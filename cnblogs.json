{
  "title": "ä¸»é¡µ - åšå®¢å›­",
  "link": "https://www.cnblogs.com/",
  "description": "ä¸»é¡µ - åšå®¢å›­ RSS",
  "entries": [
    {
      "title": "è¿˜æœ‰æ¯”ollamaæ›´å‚»ç“œå¼çš„å¤§æ¨¡å‹æœ¬åœ°éƒ¨ç½²æ–¹å¼å— ï¼Ÿ",
      "link": "https://www.cnblogs.com/JulianHuang/p/19520341",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/JulianHuang/p/19520341\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-23 09:08\">\n    <span>è¿˜æœ‰æ¯”ollamaæ›´å‚»ç“œå¼çš„å¤§æ¨¡å‹æœ¬åœ°éƒ¨ç½²æ–¹å¼å— ï¼Ÿ</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<p>LLMçš„ç‹‚é£å·²ç»å¹äº†å‡ å¹´ï¼Œ æ‰€æœ‰äººéƒ½è€³æ¿¡ç›®æŸ“çš„ä¼šé£šä¸Šå‡ å¥è¡Œè¯/åè¯ã€‚åˆ‡å¥½ä½ è‡ªå·±æœ‰å°4070çš„æœºå™¨ï¼Œæ°å¥½ä½ æœ‰æ—¶é—´å€’è…¾ï¼Œ é‚£å°±è®©æˆ‘ä»¬å›é¡¾ä¸€éåè¯ï¼ŒéªŒè¯ç‹‚é£å¹è¿‡çš„æŠ€æœ¯è½¦è¾™ã€‚</p>\n<p>æ°å¥½æœ€è¿‘æœ‰å°4070(12gæ˜¾å­˜)æœºå™¨ï¼Œäºæ˜¯å°è¯•ä½¿ç”¨ollamaéƒ¨ç½²å¤§æ¨¡å‹ã€‚</p>\n<blockquote>\n<p>RTX 4070 æ“…é•¿è®­ç»ƒä¸­å°å‹æ¨¡å‹ï¼›å‡­å€Ÿå…¶ 184 ä¸ª Tensor Coreï¼Œå®ƒå¯ä»¥é«˜æ•ˆå¤„ç†çŸ©é˜µä¹˜æ³•ç­‰è¿ç®—ï¼Œè¿™å¯¹äºæ·±åº¦å­¦ä¹ ä»»åŠ¡è‡³å…³é‡è¦ã€‚<br />\nRTX 4070 é€‚ç”¨äºå®æ—¶æ¨ç†åº”ç”¨ï¼Œæä¾›å¿«é€Ÿçš„æ¨ç†é€Ÿåº¦ï¼Œä½¿å…¶æˆä¸ºèŠå¤©æœºå™¨äººå’Œæ¨èç³»ç»Ÿç­‰äº¤äº’å¼ AI åº”ç”¨çš„ç†æƒ³é€‰æ‹©ã€‚</p>\n</blockquote>\n<p>æœ¬æ¬¡ä¼šç”¨åˆ°3ä¸ªåè¯</p>\n<ol>\n<li><a href=\"https://www.baeldung.com/linux/nvidia-smi-full-gpu-details\" rel=\"noopener nofollow\" target=\"_blank\" title=\"nvidia-smi\">nvidia-smi</a> è‹±ä¼Ÿè¾¾è®¾å¤‡ç®¡ç†å·¥å…·</li>\n</ol>\n<p>åŸºäºnvidia managemant libraryï¼ˆNVMLï¼‰ä¹‹ä¸Šçš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºç®¡ç†å’Œç›‘æ§nvidia GPUè®¾å¤‡ï¼Œ éšæ˜¾ç¤ºé©±åŠ¨ä¸€èµ·åˆ†å‘ã€‚</p>\n<p>ä»¥ä¸‹æ˜¯æœªéƒ¨ç½²å¤§æ¨¡å‹æ—¶å€™çš„èµ„æºæ¶ˆè€—å¿«ç…§ï¼Œ nvidia-smi  -l å¯æŒç»­ç›‘æ§gpuä½¿ç”¨ã€‚</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/587720/202601/587720-20260123090138183-1418030168.png\" /></p>\n<ul>\n<li>ç¬¬ä¸€è¡Œæ˜¾ç¤ºäº†nvidia-smiç‰ˆæœ¬/é©±åŠ¨ç‰ˆæœ¬/<a href=\"https://zh.wikipedia.org/wiki/CUDA#%E7%B0%A1%E4%BB%8B\" rel=\"noopener nofollow\" target=\"_blank\" title=\"CUDA\">CUDA</a>ç‰ˆæœ¬</li>\n<li>0 è¡¨ç¤ºnvidia 4070æ˜¯ç¬¬ä¸€å¼ æ˜¾å¡ï¼Œ ç´¢å¼•çš„æ¦‚å¿µï¼Œä¸‹é¢çš„è¿›ç¨‹å…³è”äº†è¿™å—æ˜¾å¡0</li>\n<li>Fan Temp Perf Pwr åˆ†åˆ«æ˜¾ç¤ºGPUçš„å½“å‰é£æ‰‡è½¬é€Ÿã€æ¸©åº¦ã€æ€§èƒ½çŠ¶æ€å’ŒåŠŸè€—</li>\n<li>Memory-Usage  å½“å‰æ˜¾å­˜ä½¿ç”¨é‡å’Œæ€»æ˜¾å­˜(12g)</li>\n<li>GPU_Util æ˜¾ç¤ºå½“å‰GPUè®¡ç®—èƒ½åŠ›çš„ç™¾åˆ†æ¯”</li>\n<li>Compute M è¡¨ç¤ºå½“å‰è®¡ç®—æ¨¡å‹ï¼š compute</li>\n</ul>\n<ol start=\"2\">\n<li><a href=\"https://docs.ollama.com/\" rel=\"noopener nofollow\" target=\"_blank\" title=\"ollama\">ollama</a></li>\n</ol>\n<p>ollamaæ˜¯mataå¼€æºçš„ï¼Œå®šä½æ˜¯<strong>æ¨¡å‹ç®¡ç†å™¨</strong>å’Œ<strong>æ¨ç†æ¡†æ¶</strong>ï¼Œå¸®åŠ©ç”¨æˆ·å‚»ç“œå¼åœ¨æœ¬åœ°ã€k8sé›†ç¾¤ã€è™šæ‹Ÿæœºä¸Šéƒ¨ç½²å¼€æºå¤§æ¨¡å‹ã€‚</p>\n<p><code>ollama -h</code>æä¾›äº†å¯ç”¨å‘½ä»¤ï¼Œä¹Ÿæ˜¾ç¤ºäº†å¯ç”¨çš„èƒ½åŠ›ï¼šåˆ›å»ºæ¨¡å‹ã€ç®¡æ§éƒ¨ç½²æ¨¡å‹ã€‚</p>\n<p>ollamaæ˜¯æœåŠ¡ç«¯-å®¢æˆ·ç«¯æ¶æ„ï¼Œæœ‰åå°æœåŠ¡è¿›ç¨‹olllama.exeï¼Œæä¾›äº†GUIç»ˆç«¯å’Œå‘½ä»¤è¡Œå·¥å…·å¯äº¤äº’ï¼Œå¦å¤–æä¾›sdkå’Œrestful apiï¼Œå¯ä¾›å„ç§ç¨‹åºæˆ–è€…è¯­è¨€æ“ä½œollamaã€‚</p>\n<pre><code> ollama  list\nNAME                      ID              SIZE      MODIFIED\nqwen3-embedding:latest    64b933495768    4.7 GB    15 hours ago\nqwen3:8b                  500a1f067a9f    5.2 GB    23 hours ago\n\n##  size æ˜¯é¢„ä¼°çš„æ˜¾å­˜å¤§å°\n</code></pre>\n<ol start=\"3\">\n<li>qwen3:8b  vs   qwen3-embedding</li>\n</ol>\n<p>8bè¡¨ç¤º80äº¿å‚æ•°ï¼ˆ8 Billion parametersï¼‰</p>\n<p>é™¤äº†chatæ¨¡å‹ï¼Œ è¿˜æœ‰åµŒå…¥æ¨¡å‹embeddingï¼Œ åµŒå…¥æ¨¡å‹æ˜¯å°†<strong>æ–‡æœ¬/imageæ•°æ®å‘é‡åŒ–</strong>çš„æœ€æ–°æ‰‹æ®µã€‚</p>\n<hr />\n<p>ä¸‹è½½å®Œollamaï¼Œ é€‰æ‹©<code>qwen3:8b</code>å¤§æ¨¡å‹ï¼Œå¼€å§‹ä¸‹è½½æ¨¡å‹ã€‚</p>\n<h3 id=\"1--ollama-run-qwen38b\">1.  ollama run qwen3:8b</h3>\n<pre><code>$ ollama  run  qwen3:8b\n&gt;&gt;&gt; Send a message (/? for help)\n</code></pre>\n<p>è¿è¡Œåƒé—®å¤§æ¨¡å‹ï¼ˆæœªè¿›è¡Œé¦–æ¬¡æ¨ç†è¯·æ±‚ï¼‰ï¼Œ æ˜¾å­˜å’ŒGPUä½¿ç”¨ç‡æœªå‘ç”Ÿå˜åŒ–ï¼›<br />\n<img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/587720/202601/587720-20260123090213372-268817923.png\" /></p>\n<p>é¦–æ¬¡æ¨ç†è¯·æ±‚ï¼Œ æ˜¾å­˜ä½¿ç”¨ç¨³å®šåœ¨6g, gpuä½¿ç”¨ç‡ä¸Šå‡ï¼Œæ¨ç†ç»“æŸï¼Œæ˜¾å­˜ä½¿ç”¨ç‡ä¸ä¼šé™ï¼Œ gpuä½¿ç”¨ç‡å›è½ï¼Œ è¯´æ˜ollamaæ˜¯<strong>æŒ‰éœ€åŠ è½½å¤§æ¨¡å‹</strong>ã€‚</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/587720/202601/587720-20260123090232098-1659121708.png\" /></p>\n<h3 id=\"2-ollama-run--model--vs--ollama--serve\">2. ollama run  [model]  vs  ollama  serve</h3>\n<p>ollama serveæ„å‘³ç€<strong>å¯åŠ¨ollamaä½œä¸ºwebæœåŠ¡</strong>(ä¸æ„å‘³ç€å½“å‰å¯åŠ¨äº†å¤§æ¨¡å‹)ï¼Œé»˜è®¤åœ¨http://127.0.0.1:11434/ç›‘å¬ï¼Œå¤–éƒ¨å¯ä½¿ç”¨restful apiæˆ–è€…client sdkæ“ä½œollamaã€æ“ä½œæ¨¡å‹ã€ä¸æ¨¡å‹å¯¹è¯ã€‚</p>\n<pre><code>curl http://localhost:11434/api/chat -d '{\n  \"model\": \"qwen3:8b\",\n  \"messages\": [{\n    \"role\": \"user\",\n    \"content\": \"Hello there!\"\n  }],\n  \"stream\": false\n}'\n{\"model\":\"qwen3:8b\",\"created_at\":\"2026-01-21T07:57:52.9621534Z\",\"message\":{\"role\":\"assistant\",\"content\":\"Hello! How can I assist you today? ğŸ˜Š\",\"thinking\":\"Okay, the user greeted me with \\\"Hello there!\\\" So I need to respond in a friendly and welcoming manner. Let me make sure to acknowledge their greeting and offer assistance. I should keep it simple and positive. Maybe something like, \\\"Hello! How can I assist you today?\\\" That sounds good. Let me check if there's anything else I need to consider. No, that should cover it. Ready to respond.\\n\"},\"done\":true,\"done_reason\":\"stop\",\"total_duration\":1535352700,\"load_duration\":98539300,\"prompt_eval_count\":13,\"prompt_eval_duration\":208148700,\"eval_count\":101,\"eval_duration\":1223840500}\n</code></pre>\n<p>è¿™ä¸ªrestful apiå¯åŠ¨äº†å¤§æ¨¡å‹ï¼Œä¸”æ˜¯æŒ‰éœ€åŠ è½½ï¼Œ  <code>stream: true</code> å°±ä¼šæŒ‰ç…§streamingè¾“å‡ºï¼Œ ä¹Ÿå°±æ˜¯èµ°chunked transfer encoding watchæœºåˆ¶ã€‚\"think\":é»˜è®¤ä¸ºtrueè¡¨ç¤ºè¾“å‡ºæ¨ç†æ€è€ƒã€‚</p>\n<h3 id=\"3-ollamaéƒ¨ç½²embeddingsåµŒå…¥æ¨¡å‹\">3. ollamaéƒ¨ç½²embeddingsåµŒå…¥æ¨¡å‹</h3>\n<p>eembeddingsåµŒå…¥æ¨¡å‹ä¸åŒäºå¯¹è¯æ¨¡å‹ï¼Œç”¨äºå°†æ–‡æœ¬/imgaeå‘é‡åŒ–ï¼Œç”¨äºè¯­ä¹‰æœç´¢ã€æ£€ç´¢å’ŒRAGã€‚è¿™é‡Œæœ‰æœ€æ–°çš„<a href=\"https://huggingface.co/spaces/mteb/leaderboard\" rel=\"noopener nofollow\" target=\"_blank\" title=\"åµŒå…¥æ¨¡å‹æ¦œå•\">åµŒå…¥æ¨¡å‹æ¦œå•</a></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/587720/202601/587720-20260123090252139-202991087.png\" /></p>\n<p><strong>RAG æŠ€æœ¯æœ¬è´¨ä¸Šæ˜¯å°†Promptå¢å¼º</strong>æŠ€æœ¯ï¼Œ æœ¬æ¬¡åˆ©ç”¨ollamaéƒ¨ç½²æ–‡æœ¬åµŒå…¥æ¨¡å‹ï¼Œæå‰å°†æ–‡æœ¬æ•°æ®å‘é‡åŒ–åï¼Œå­˜å‚¨åœ¨å‘é‡æ•°æ®åº“ã€‚</p>\n<pre><code>curl -X POST http://localhost:11434/api/embed \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"model\": \"qwen3-embedding\",\n    \"input\": \"The quick brown fox jumps over the lazy dog.\"\n  }'\n</code></pre>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/587720/202601/587720-20260123090402066-2090586535.png\" /></p>\n<h2 id=\"4-function-calling\">4. function calling</h2>\n<p><code>what is  the temperature in the capital of china today?</code></p>\n<p>LLMæ˜¯é™æ€çŸ¥è¯†ï¼Œä»–è‚¯å®šä¸çŸ¥é“ä»Šå¤©æ˜¯å‡ å·ï¼Ÿä»Šå¤©å¤©æ°”æ€ä¹ˆæ · ï¼Ÿ<br />\nä»–çš„é™æ€çŸ¥è¯†å‘Šè¯‰ä»–ä¸­å›½é¦–éƒ¨æ˜¯åŒ—äº¬(å¦‚æœæ¢é¦–éƒ½ï¼Œä»–ä¹ŸGäº†)ã€‚</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/587720/202601/587720-20260123090424312-1965215025.png\" /></p>\n<p><strong>function callingå…è®¸æ¨¡å‹è°ƒç”¨å¤–éƒ¨å·¥å…·å¹¶å°†å…¶ç»“æœåˆå¹¶åˆ°å¯¹è¯å“åº”ä¸­</strong></p>\n<blockquote>\n<p>æ— è®ºæ˜¯agenticå¼€å‘ï¼Œä½¿ç”¨LLM APiï¼Œ ç†è§£function calling éƒ½å¾ˆé‡è¦ï¼Œç‰¹åˆ«æ˜¯åº•å±‚çš„è¯·æ±‚å’Œå“åº”payloadå·¥ä½œæ–¹å¼ã€‚function callingéœ€è¦ç»“åˆåº”ç”¨èƒ½åŠ›ä¸€èµ·æ¥ç†è§£ã€‚</p>\n</blockquote>\n<p>function calling ä½¿å¾—LLMå…·å¤‡æ¨ç†å‡ºä½ æƒ³è¦åšçš„åŠ¨ä½œ(ä»¥ç»“æ„åŒ–jsonçš„æ–¹å¼ç»™å‡º), appæ®æ­¤æ‰§è¡ŒåŠ¨ä½œï¼Œå°†è°ƒç”¨çš„ç»“æœåˆå¹¶åˆ°LLMçš„è¾“å‡ºåº”ç­”é‡Œé¢ã€‚</p>\n<p>è¯¢é—®ä¸­å›½é¦–éƒ½ä»Šå¤©çš„æ°”æ¸©ï¼Ÿï¼š</p>\n<p>LLMè§’åº¦ï¼š</p>\n<ul>\n<li>å…ˆè¦è¦çŸ¥é“ä»Šå¤©æ˜¯å‡ å·ï¼Œ æç¤ºåº”ç”¨å»è°ƒç”¨å‡½æ•°get_currentDateæ‹¿åˆ°æ—¶é—´</li>\n<li>ç„¶åæç¤ºåº”ç”¨æ‹¿city= beijing ,date=2016-01-22 å»è°ƒç”¨å¤©æ°”å‡½æ•°get_temperature(string cityï¼Œ string date)</li>\n<li>æœ€åä¿¡æ¯å……è¶³ï¼Œå¯¹è¯ä¸­é—®ç±»ä¼¼çš„éƒ½èƒ½ç¬‘çº³ã€‚</li>\n</ul>\n<p>åº”ç”¨è§’åº¦ï¼šéœ€è¦æä¾›2ä¸ªå‡½æ•°</p>\n<ul>\n<li>get_temperature(string cityï¼Œ string date)ï¼š Get the current temperature for a city</li>\n<li>get_currentDate()ï¼š Get the current date</li>\n</ul>\n<hr />\n<h4 id=\"-llmå‘èµ·ç¬¬ä¸€æ¬¡function-calling-toolsé…ç½®èŠ‚æºå¸¦äº†åº”ç”¨æä¾›çš„2ä¸ªå¤–éƒ¨è°ƒç”¨å‡½æ•°\">â‘  LLMå‘èµ·ç¬¬ä¸€æ¬¡function calling, <code>tools</code>é…ç½®èŠ‚æºå¸¦äº†åº”ç”¨æä¾›çš„2ä¸ªå¤–éƒ¨è°ƒç”¨å‡½æ•°ã€‚</h4>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/587720/202601/587720-20260123090454039-1314904393.png\" /></p>\n<p>LLMæ¨ç†æç¤ºåº”ç”¨å»è°ƒç”¨<code>get_currentDate</code>å‡½æ•°ã€‚</p>\n<h4 id=\"-åº”ç”¨æ‹¿è¿™ä¸ªæ¨ç†ä¿¡æ¯å»è°ƒç”¨å‡†å¤‡å¥½çš„get_currentdateå‡½æ•°å‡è®¾ç»“æœæ˜¯2026-01-22\">â‘¡ åº”ç”¨æ‹¿è¿™ä¸ªæ¨ç†ä¿¡æ¯ï¼Œå»è°ƒç”¨å‡†å¤‡å¥½çš„get_currentDateå‡½æ•°ï¼Œå‡è®¾ç»“æœæ˜¯<code>2026-01-22</code>ã€‚</h4>\n<h4 id=\"-llmå‘èµ·ç¬¬äºŒæ¬¡function-callingæ­¤æ—¶messageé…ç½®èŠ‚è¦é™„å¸¦ç¬¬ä¸€æ¬¡å¤–éƒ¨è°ƒç”¨çš„ä¿¡æ¯\">â‘¢ LLMå‘èµ·ç¬¬äºŒæ¬¡function callingï¼Œæ­¤æ—¶<code>message</code>é…ç½®èŠ‚è¦é™„å¸¦ç¬¬ä¸€æ¬¡å¤–éƒ¨è°ƒç”¨çš„ä¿¡æ¯</h4>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/587720/202601/587720-20260123090514188-995218064.png\" /></p>\n<p>LLMæ¨ç†æç¤ºåº”ç”¨å»è°ƒç”¨<code>get_temperature</code>å‡½æ•°ï¼Œæ­¤æ—¶å‚æ•°éƒ½å·²ç»å°±ç»ªäº†ï¼šbeijingæ˜¯æ¨ç†å·²çŸ¥ï¼Œ2026-01-22æ˜¯å¤–éƒ¨è°ƒç”¨æ³¨å…¥ä¿¡æ¯ã€‚</p>\n<h4 id=\"-åº”ç”¨æ‹¿åˆ°æ¨ç†ä¿¡æ¯å»è°ƒç”¨get_temperatureå‡½æ•°-å‡è®¾æ‹¿åˆ°ç»“æœæ˜¯22\">â‘£ åº”ç”¨æ‹¿åˆ°æ¨ç†ä¿¡æ¯ï¼Œå»è°ƒç”¨<code>get_temperature</code>å‡½æ•°ï¼Œ å‡è®¾æ‹¿åˆ°ç»“æœæ˜¯22Â°ã€‚</h4>\n<h4 id=\"-å‘llmå‘èµ·æœ€ç»ˆå¤©æ°”å¯¹è¯å–‚ç»™ä»–æ‰€æœ‰ä¿¡æ¯\">â‘¤ å‘LLMå‘èµ·æœ€ç»ˆå¤©æ°”å¯¹è¯ï¼Œå–‚ç»™ä»–æ‰€æœ‰ä¿¡æ¯</h4>\n<pre><code>  curl -s http://localhost:11434/api/chat -H \"Content-Type: application/json\" -d '{\n  \"model\": \"qwen3:8b\",\n  \"messages\": [\n    {\"role\": \"user\", \"content\": \"what is the temperature in the capital of china today?\"},\n    {\"role\": \"assistant\",\"tool_calls\":[{\"type\": \"function\",\"function\":{\"index\":0,\"name\":\"get_temperature\",\"arguments\":{\n             \"city\": \"Beijing\",\n              \"date\": \"2026-01-22\" }}}]},\n    {\"role\": \"tool\", \"tool_name\": \"get_temperature\", \"content\": \"22Â°C\"}\n  ],\n  \"stream\": false,\n  \"think\": false\n}'    // æ³¨å…¥çš„ä¿¡æ¯ä¾æ—§æ”¾åœ¨`message`é…ç½®èŠ‚ã€‚\n</code></pre>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/587720/202601/587720-20260123090556259-1793205593.png\" /></p>\n<p>æ¨¡å‹å°±æ”¶åˆ°çš„å¤–éƒ¨è°ƒç”¨çš„ä¿¡æ¯ï¼Œå¹¶é›†æˆåˆ°è‡ªå·±æ¨ç†ç³»ç»Ÿã€‚</p>\n<p>æ‰€ä»¥ä¸€æ¬¡å¤æ‚çš„å¯¹è¯å¯èƒ½ç»è¿‡å‡ æ¬¡function callingï¼Œ äºæ­¤åŒæ—¶ä¹Ÿéœ€è¦åº”ç”¨çš„é…åˆã€‚</p>\n\n</div>\n<div id=\"MySignature\">\n    <hr color=\"#987cb9\" size=\"3\" width=\"80%\" />\n<div style=\"text-align: center;\">\n<p>æœ¬æ–‡æ¥è‡ªåšå®¢å›­ï¼Œä½œè€…ï¼š{æœ‰æ€åº¦çš„é©¬ç”²}ï¼Œè½¬è½½è¯·æ³¨æ˜åŸæ–‡é“¾æ¥ï¼š<a href=\"https://www.cnblogs.com/JulianHuang/p/19520341\" target=\"_blank\">https://www.cnblogs.com/JulianHuang/p/19520341</a></p>\n<strong style=\"color: red;\">æ¬¢è¿å…³æ³¨æˆ‘çš„åŸåˆ›æŠ€æœ¯ã€èŒåœºå…¬ä¼—å·ï¼Œ åŠ å¥½å‹è°ˆå¤©è¯´åœ°ï¼Œä¸€èµ·è¿›åŒ–</strong>\n<div><img src=\"https://blog-static.cnblogs.com/files/JulianHuang/QR.gif\" style=\"width: 250px; height: 250px;\" /> </div>\n\n</div>\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-23 09:08</span>&nbsp;\n<a href=\"https://www.cnblogs.com/JulianHuang\">ç ç”²å“¥ä¸å·</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">0</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": ".NET 10äº†ï¼ŒHttpClientè¿˜æ˜¯ä¸èƒ½ç”¨usingå—ï¼Ÿæˆ‘åšäº†ä¸€ä¸ªå®éªŒ",
      "link": "https://www.cnblogs.com/sdcb/p/19500792/20260119-using-httpclient",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/sdcb/p/19500792/20260119-using-httpclient\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-23 08:45\">\n    <span>.NET 10äº†ï¼ŒHttpClientè¿˜æ˜¯ä¸èƒ½ç”¨usingå—ï¼Ÿæˆ‘åšäº†ä¸€ä¸ªå®éªŒ</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h2 id=\"å¼•è¨€è¿™ä¸ªæœ€ä½³å®è·µåˆ°åº•è¿‡æ—¶äº†å—\">å¼•è¨€ï¼šè¿™ä¸ªâ€œæœ€ä½³å®è·µâ€åˆ°åº•è¿‡æ—¶äº†å—ï¼Ÿ</h2>\n<p>æ¯éš”ä¸€æ®µæ—¶é—´ï¼Œå°±ä¼šçœ‹åˆ°ç±»ä¼¼é—®é¢˜åå¤å‡ºç°ï¼š</p>\n<blockquote>\n<p>â€œéƒ½ .NET 10 äº†ï¼Œ<code>HttpClient</code> è¿˜ä¸èƒ½ <code>using</code> å—ï¼Ÿæˆ‘æ¯æ¬¡è¯·æ±‚ <code>new HttpClient()</code>ï¼Œç”¨å®Œ <code>Dispose()</code>ï¼Œä¸æ˜¯å¾ˆåˆç†ï¼Ÿâ€</p>\n</blockquote>\n<p>è¿™ç±»é—®é¢˜ä¹‹æ‰€ä»¥ç»ä¹…ä¸è¡°ï¼Œæ˜¯å› ä¸ºå®ƒ<strong>åœ¨ä½å¹¶å‘ä¸‹å‡ ä¹æ°¸è¿œè·‘å¾—é€š</strong>ï¼›ä½†ä¸€æ—¦è¿›å…¥â€œé«˜å¹¶å‘ + çŸ­è¿æ¥å¯†é›†åˆ›å»ºâ€çš„åœºæ™¯ï¼Œå°±ä¼šçªç„¶å˜æˆç„å­¦ï¼šæœ‰çš„äººèƒ½è·‘ï¼Œæœ‰çš„äººä¼šç‚¸ï¼Œæœ‰äººè¯´è¿™æ˜¯ä¸€ä¸ªè¿™æ˜¯ä¸€ä¸ªâ€œbugâ€ï¼Œåœ¨æŸæŸç‰ˆæœ¬ä¸­ä¼šä¿®å¤ï¼ˆå…¶å®å¹¶æ²¡æœ‰ï¼‰ï¼Œæœ‰äººè¯´è¿™æ˜¯ä¸€ä¸ªfeatureï¼Œè®¾è®¡å°±æ˜¯å¦‚æ­¤â€¦â€¦</p>\n<p>æ‰€ä»¥æˆ‘å†³å®šåšä¸€ä¸ªå®éªŒï¼Œæ¥é‡ç°ä¸€ä¸‹10å¹´å‰å°±æœ‰çš„ç°è±¡ï¼Œçœ‹è¿™äº›ç°è±¡æ˜¯å¦æœ‰ä»»ä½•ä¸åŒã€‚</p>\n<p>æœ¬æ–‡ç”¨ä¸€ç»„å¯å¤ç°çš„å‹æµ‹ï¼ˆåŒæœº server/clientï¼ŒWindowsï¼Œrequests=20000ï¼Œparallel=200ï¼‰å¯¹æ¯”ï¼š</p>\n<ul>\n<li>æ¯è¯·æ±‚ <code>new HttpClient</code> + <code>Dispose()</code>ï¼ˆä¹Ÿå°±æ˜¯å¤§å®¶å¸¸è¯´çš„â€œusing å†™æ³•â€ï¼‰</li>\n<li>å¤ç”¨ä¸€ä¸ª <code>HttpClient</code>ï¼ˆé™æ€/å•ä¾‹ï¼‰</li>\n<li>ä½¿ç”¨ <code>IHttpClientFactory</code></li>\n</ul>\n<p>å¹¶è§‚å¯Ÿå…³é”®æŒ‡æ ‡ï¼š<strong>TIME_WAIT æ•°é‡</strong>ï¼Œä»¥åŠæ˜¯å¦å‡ºç°ç»å…¸çš„ç«¯å£è€—å°½é”™è¯¯ï¼š</p>\n<blockquote>\n<p>é€šå¸¸æ¯ä¸ªå¥—æ¥å­—åœ°å€(åè®®/ç½‘ç»œåœ°å€/ç«¯å£)åªå…è®¸ä½¿ç”¨ä¸€æ¬¡ã€‚</p>\n</blockquote>\n<hr />\n<h2 id=\"å®éªŒç›®æ ‡\">å®éªŒç›®æ ‡</h2>\n<p>éªŒè¯â€œæ¯è¯·æ±‚ new HttpClient å¹¶ using é‡Šæ”¾â€åœ¨é«˜å¹¶å‘ä¸‹ä¼šå¯¼è‡´ TIME_WAIT æ¿€å¢ï¼Œå¹¶å¯¹æ¯”å¤ç”¨ HttpClient / IHttpClientFactory çš„è¡¨ç°ã€‚</p>\n<hr />\n<h2 id=\"å®éªŒç¯å¢ƒä¸å‚æ•°\">å®éªŒç¯å¢ƒä¸å‚æ•°</h2>\n<ul>\n<li>OS: Windows</li>\n<li>SDK: .NET SDK 10.0.102</li>\n<li>æœåŠ¡å™¨: HttpLeakServerï¼ˆtarget net6ï¼Œé€šè¿‡ roll-forward è¿è¡Œï¼‰</li>\n<li>å®¢æˆ·ç«¯: net48 / net6 / net8 / net10</li>\n<li>å‹æµ‹å‚æ•°: requests=20000, parallel=200, timeoutSeconds=5</li>\n<li>TIME_WAIT ç»Ÿè®¡: <code>netstat -an</code> è¿‡æ»¤ç«¯å£ 5055</li>\n<li>éš”ç¦»ç­–ç•¥: æ¯è½®ç»“æŸåç­‰å¾… TIME_WAIT &lt;= baseline + 200ï¼ˆæ¯ 10 ç§’æ£€æŸ¥ï¼Œæœ€é•¿ 300 ç§’ï¼‰</li>\n</ul>\n<hr />\n<h2 id=\"å¦‚ä½•è¿è¡Œå¯å¤ç°\">å¦‚ä½•è¿è¡Œï¼ˆå¯å¤ç°ï¼‰</h2>\n<p>å®Œæ•´é¡¹ç›®æˆ‘æ”¾åœ¨ GitHubï¼š<code>https://github.com/sdcb/http-client-exp</code></p>\n<h3 id=\"1å¯åŠ¨æœåŠ¡ç«¯å•ç‹¬çª—å£\">1ï¼‰å¯åŠ¨æœåŠ¡ç«¯ï¼ˆå•ç‹¬çª—å£ï¼‰</h3>\n<pre><code class=\"language-powershell\">dotnet run --project Server/HttpLeakServer/HttpLeakServer.csproj\n</code></pre>\n<h3 id=\"2è¿è¡Œå®éªŒè„šæœ¬å¦ä¸€ä¸ªçª—å£\">2ï¼‰è¿è¡Œå®éªŒè„šæœ¬ï¼ˆå¦ä¸€ä¸ªçª—å£ï¼‰</h3>\n<pre><code class=\"language-powershell\">scripts/run-experiment-external-server.ps1\n</code></pre>\n<p>æœ¬æ¬¡æ—¥å¿—ç›®å½•ï¼š<code>logs/run-20260119-095017</code></p>\n<hr />\n<h2 id=\"è§£è¯»ä¸ºä»€ä¹ˆusing-httpclientä¼šæŠŠä½ æ¨å‘ç«¯å£è€—å°½\">è§£è¯»ï¼šä¸ºä»€ä¹ˆâ€œusing HttpClientâ€ä¼šæŠŠä½ æ¨å‘ç«¯å£è€—å°½ï¼Ÿ</h2>\n<p>å¾ˆå¤šäººç›´è§‰ä¼šè§‰å¾—ï¼š<code>HttpClient</code> æ˜¯æ‰˜ç®¡å¯¹è±¡ï¼Œç”¨å®Œ <code>Dispose()</code>ï¼Œä¸å°±é‡Šæ”¾èµ„æºäº†å—ï¼Ÿ</p>\n<p>ä½†è¿™é‡Œæœ‰ä¸¤ä¸ªå…³é”®ç‚¹ç»å¸¸è¢«å¿½ç•¥ï¼š</p>\n<ol>\n<li><strong><code>HttpClient</code> å¹¶ä¸æ˜¯â€œè¯·æ±‚ä¸€æ¬¡å°±å…³ä¸€æ¬¡è¿æ¥â€çš„ç®€å•æ¨¡å‹</strong>ã€‚HTTP Keep-Alive + è¿æ¥æ± çš„å­˜åœ¨ï¼Œæ„å‘³ç€æ­£ç¡®å§¿åŠ¿åº”è¯¥æ˜¯å¤ç”¨åº•å±‚è¿æ¥ï¼ˆæˆ–è‡³å°‘å¤ç”¨ handler çš„è¿æ¥æ± ï¼‰ï¼Œè®©å¤§é‡è¯·æ±‚å¤ç”¨å°‘é‡ TCP è¿æ¥ã€‚</li>\n<li>ä½ é¢‘ç¹ <code>new HttpClient</code> + <code>Dispose()</code>ï¼Œç­‰ä»·äº<strong>é¢‘ç¹å»ºç«‹ TCP è¿æ¥å¹¶å¿«é€Ÿå…³é—­</strong>ã€‚è€Œ TCP è¿æ¥çš„å…³é—­ä¼šè¿›å…¥ <strong>TIME_WAIT</strong>ï¼ˆå…·ä½“å“ªä¸€ç«¯è¿›å…¥ TIME_WAIT ä¸å…³é—­æ—¶åºæœ‰å…³ï¼‰ï¼ŒTIME_WAIT å­˜åœ¨çš„æ„ä¹‰æ˜¯ä¿æŠ¤ç½‘ç»œä¸è¢«â€œæ—§è¿æ¥çš„æ®‹ç•™åŒ…â€æ±¡æŸ“ã€‚</li>\n</ol>\n<p>åœ¨â€œ200 å¹¶å‘ + 2 ä¸‡æ¬¡è¯·æ±‚â€è¿™ç§å‚æ•°ä¸‹ï¼Œå¦‚æœä½ è®©æ¯ä¸ªè¯·æ±‚éƒ½åˆ›å»ºæ–°è¿æ¥ï¼Œé‚£ä¹ˆå¾ˆå®¹æ˜“çŸ­æ—¶é—´åˆ¶é€ å¤§é‡ TIME_WAITï¼›ä¸€æ—¦æœ¬æœºå¯ç”¨çš„ä¸´æ—¶ç«¯å£èŒƒå›´è¢« TIME_WAIT å æ»¡ï¼ˆæˆ–æ¥è¿‘å æ»¡ï¼‰ï¼Œæ–°è¿æ¥å°±ä¼šå¼€å§‹å¤±è´¥ï¼Œå…¸å‹å¼‚å¸¸å°±æ˜¯ï¼š</p>\n<blockquote>\n<p>é€šå¸¸æ¯ä¸ªå¥—æ¥å­—åœ°å€(åè®®/ç½‘ç»œåœ°å€/ç«¯å£)åªå…è®¸ä½¿ç”¨ä¸€æ¬¡ã€‚</p>\n</blockquote>\n<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåŒæ ·çš„ä»£ç ï¼š</p>\n<ul>\n<li>åœ¨ä½å¹¶å‘ä¸‹â€œçœ‹èµ·æ¥å®Œå…¨æ²¡é—®é¢˜â€</li>\n<li>åœ¨å‹åŠ›ä¸€ä¸Šæ¥å°±å¼€å§‹â€œç„å­¦æŠ¥é”™â€</li>\n</ul>\n<hr />\n<h2 id=\"é‚£åˆ°åº•æ€ä¹ˆå†™æ‰å¯¹\">é‚£åˆ°åº•æ€ä¹ˆå†™æ‰å¯¹ï¼Ÿ</h2>\n<p>æœ¬æ–‡ä¸å±•å¼€â€œæ‰€æœ‰åœºæ™¯çš„æœ€ä½³å®è·µâ€ï¼Œåªç»™ä¸¤æ¡æœ€èƒ½è½åœ°çš„ç»“è®ºï¼š</p>\n<ol>\n<li><strong>ä¸šåŠ¡ä»£ç ä¸è¦æ¯æ¬¡è¯·æ±‚ new HttpClient</strong>ã€‚è¦ä¹ˆå¤ç”¨å•ä¾‹/é™æ€ <code>HttpClient</code>ï¼Œè¦ä¹ˆä½¿ç”¨ <code>IHttpClientFactory</code>ã€‚</li>\n<li><strong>å¯ä»¥ using çš„æ˜¯ <code>HttpResponseMessage</code> / <code>HttpContent</code></strong>ï¼ˆå®ƒä»¬ç¡®å®åº”è¯¥åŠæ—¶é‡Šæ”¾ï¼‰ï¼Œè€Œä¸æ˜¯â€œæ¯ä¸ªè¯·æ±‚ä¸€ä¸ª HttpClientâ€ã€‚</li>\n</ol>\n<p>ä¸‹é¢æˆ‘æŠŠè¿™æ¬¡å®éªŒçš„<strong>å®Œæ•´ä»£ç </strong>å’Œ<strong>åŸå§‹æ—¥å¿—</strong>å…¨éƒ¨è´´å‡ºæ¥ï¼Œæ–¹ä¾¿ä½ è‡ªå·±å¤è·‘/æ”¹å‚æ•°/åšäºŒæ¬¡éªŒè¯ã€‚</p>\n<hr />\n<h2 id=\"å®Œæ•´ä»£ç ç²¾ç®€ç‰ˆä¸€ä»½æºç --æ¡ä»¶ç¼–è¯‘\">å®Œæ•´ä»£ç ï¼ˆç²¾ç®€ç‰ˆï¼šä¸€ä»½æºç  + æ¡ä»¶ç¼–è¯‘ï¼‰</h2>\n<p>å®Œæ•´é¡¹ç›®åœ°å€ï¼š<code>https://github.com/sdcb/http-client-exp</code></p>\n<p>ä¸ºäº†é¿å…åŒæ ·çš„ä»£ç è´´å››éï¼Œè¿™é‡ŒæŠŠ net48/net6/net8/net10 çš„å®¢æˆ·ç«¯åˆå¹¶æˆ<strong>ä¸€ä»½</strong>ï¼Œç”¨ <code>#if / #elif</code> è¡¨ç¤ºå·®å¼‚ï¼ˆå®éªŒè¾“å‡ºä¸åŸå§‹æ—¥å¿—ä»æŒ‰â€œå¤šä»½ç»“æœâ€åŸæ ·ä¿ç•™åœ¨åæ–‡ï¼‰ã€‚</p>\n<h3 id=\"ç®€å•æœåŠ¡ç«¯httpleakserver\">ç®€å•æœåŠ¡ç«¯ï¼šHttpLeakServer</h3>\n<h4 id=\"serverhttpleakserverhttpleakservercsproj\"><code>Server/HttpLeakServer/HttpLeakServer.csproj</code></h4>\n<pre><code class=\"language-xml\">&lt;Project Sdk=\"Microsoft.NET.Sdk.Web\"&gt;\n  &lt;PropertyGroup&gt;\n    &lt;TargetFramework&gt;net6.0&lt;/TargetFramework&gt;\n    &lt;Nullable&gt;enable&lt;/Nullable&gt;\n    &lt;ImplicitUsings&gt;enable&lt;/ImplicitUsings&gt;\n  &lt;/PropertyGroup&gt;\n&lt;/Project&gt;\n</code></pre>\n<h4 id=\"serverhttpleakserverprogramcs\"><code>Server/HttpLeakServer/Program.cs</code></h4>\n<pre><code class=\"language-csharp\">using Microsoft.AspNetCore.Builder;\nusing Microsoft.Extensions.Hosting;\nusing Microsoft.Extensions.Logging;\n\nvar builder = WebApplication.CreateBuilder(args);\n\nbuilder.Logging.ClearProviders();\nbuilder.Logging.AddSimpleConsole(options =&gt;\n{\n    options.SingleLine = true;\n    options.TimestampFormat = \"HH:mm:ss \";\n});\n\nvar app = builder.Build();\n\napp.MapGet(\"/\", () =&gt; Results.Text(\"ok\"));\napp.MapGet(\"/ping\", () =&gt; Results.Text(\"ok\"));\napp.MapGet(\"/slow\", async () =&gt;\n{\n    await Task.Delay(50);\n    return Results.Text(\"ok\");\n});\n\nvar url = Environment.GetEnvironmentVariable(\"HTTPLEAK_URL\") ?? \"http://localhost:5055\";\napp.Urls.Add(url);\n\napp.Lifetime.ApplicationStarted.Register(() =&gt;\n{\n    Console.WriteLine($\"Listening on {url}\");\n});\n\nawait app.RunAsync();\n</code></pre>\n<h3 id=\"å®¢æˆ·ç«¯httpleakclientnet48net6net8net10-å…±ç”¨ä¸€ä»½\">å®¢æˆ·ç«¯ï¼šHttpLeakClientï¼ˆnet48/net6/net8/net10 å…±ç”¨ä¸€ä»½ï¼‰</h3>\n<h4 id=\"clientshttpleakclienthttpleakclientcsprojç¤ºæ„å¤šç›®æ ‡--æ¡ä»¶ä¾èµ–\"><code>Clients/HttpLeakClient/HttpLeakClient.csproj</code>ï¼ˆç¤ºæ„ï¼šå¤šç›®æ ‡ + æ¡ä»¶ä¾èµ–ï¼‰</h4>\n<pre><code class=\"language-xml\">&lt;Project Sdk=\"Microsoft.NET.Sdk\"&gt;\n  &lt;PropertyGroup&gt;\n    &lt;OutputType&gt;Exe&lt;/OutputType&gt;\n    &lt;TargetFrameworks&gt;net48;net6.0;net8.0;net10.0&lt;/TargetFrameworks&gt;\n    &lt;LangVersion&gt;latest&lt;/LangVersion&gt;\n    &lt;Nullable&gt;enable&lt;/Nullable&gt;\n    &lt;ImplicitUsings&gt;enable&lt;/ImplicitUsings&gt;\n  &lt;/PropertyGroup&gt;\n\n  &lt;ItemGroup Condition=\"'$(TargetFramework)' == 'net48'\"&gt;\n    &lt;Reference Include=\"System.Net.Http\" /&gt;\n  &lt;/ItemGroup&gt;\n\n  &lt;ItemGroup Condition=\"'$(TargetFramework)' == 'net10.0'\"&gt;\n    &lt;PackageReference Include=\"Microsoft.Extensions.Http\" Version=\"10.0.0\" /&gt;\n  &lt;/ItemGroup&gt;\n&lt;/Project&gt;\n</code></pre>\n<h4 id=\"clientshttpleakclientprogramcsç”¨-if-è¡¨ç¤ºå·®å¼‚\"><code>Clients/HttpLeakClient/Program.cs</code>ï¼ˆç”¨ <code>#if</code> è¡¨ç¤ºå·®å¼‚ï¼‰</h4>\n<pre><code class=\"language-csharp\">using System.Diagnostics;\nusing System.Net.Http;\n\n#if NET48\nusing System.Net;\n#endif\n\n#if NET10_0_OR_GREATER\nusing Microsoft.Extensions.DependencyInjection;\n#endif\n\nstatic string? GetArg(string[] args, string name)\n{\n    for (var i = 0; i &lt; args.Length - 1; i++)\n    {\n        if (string.Equals(args[i], name, StringComparison.OrdinalIgnoreCase))\n        {\n            return args[i + 1];\n        }\n    }\n\n    return null;\n}\n\nstatic int GetArgInt(string[] args, string name, int defaultValue)\n{\n    var value = GetArg(args, name);\n    return int.TryParse(value, out var parsed) ? parsed : defaultValue;\n}\n\nvar url = GetArg(args, \"--url\") ?? \"http://localhost:5055/ping\";\nvar requests = GetArgInt(args, \"--requests\", 20000);\nvar parallel = GetArgInt(args, \"--parallel\", 200);\nvar logEvery = GetArgInt(args, \"--logEvery\", 1000);\nvar timeoutSeconds = GetArgInt(args, \"--timeoutSeconds\", 5);\n\n#if NET10_0_OR_GREATER\nvar mode = GetArg(args, \"--mode\") ?? \"new\"; // new | static | factory\n#endif\n\nConsole.WriteLine($\"url={url}\");\n#if NET10_0_OR_GREATER\nConsole.WriteLine($\"requests={requests}, parallel={parallel}, timeoutSeconds={timeoutSeconds}, mode={mode}\");\n#else\nConsole.WriteLine($\"requests={requests}, parallel={parallel}, timeoutSeconds={timeoutSeconds}\");\n#endif\n\n#if NET48\nServicePointManager.DefaultConnectionLimit = 1000;\nServicePointManager.Expect100Continue = false;\n#endif\n\nvar throttler = new SemaphoreSlim(parallel);\nvar tasks = new List&lt;Task&gt;(requests);\nvar sw = Stopwatch.StartNew();\nvar success = 0;\nvar failed = 0;\n\n#if NET10_0_OR_GREATER\nHttpClient? staticClient = null;\nif (string.Equals(mode, \"static\", StringComparison.OrdinalIgnoreCase))\n{\n    staticClient = new HttpClient\n    {\n        Timeout = TimeSpan.FromSeconds(timeoutSeconds)\n    };\n}\n\nIHttpClientFactory? httpClientFactory = null;\nServiceProvider? serviceProvider = null;\nif (string.Equals(mode, \"factory\", StringComparison.OrdinalIgnoreCase))\n{\n    var services = new ServiceCollection();\n    services.AddHttpClient();\n    serviceProvider = services.BuildServiceProvider();\n    httpClientFactory = serviceProvider.GetRequiredService&lt;IHttpClientFactory&gt;();\n}\n#endif\n\nfor (var i = 0; i &lt; requests; i++)\n{\n    await throttler.WaitAsync();\n    var index = i + 1;\n    tasks.Add(Task.Run(async () =&gt;\n    {\n        try\n        {\n#if NET10_0_OR_GREATER\n            HttpClient client;\n            if (staticClient != null)\n            {\n                client = staticClient;\n            }\n            else if (httpClientFactory != null)\n            {\n                client = httpClientFactory.CreateClient();\n                client.Timeout = TimeSpan.FromSeconds(timeoutSeconds);\n            }\n            else\n            {\n                client = new HttpClient();\n                client.Timeout = TimeSpan.FromSeconds(timeoutSeconds);\n            }\n\n            using var response = await client.GetAsync(url);\n            response.EnsureSuccessStatusCode();\n            Interlocked.Increment(ref success);\n\n            if (staticClient == null &amp;&amp; httpClientFactory == null)\n            {\n                client.Dispose();\n            }\n#else\n            using var client = new HttpClient();\n            client.Timeout = TimeSpan.FromSeconds(timeoutSeconds);\n            using var response = await client.GetAsync(url);\n            response.EnsureSuccessStatusCode();\n            Interlocked.Increment(ref success);\n#endif\n        }\n        catch (Exception ex)\n        {\n            var fail = Interlocked.Increment(ref failed);\n            if (fail &lt;= 5)\n            {\n                Console.WriteLine($\"ERR#{fail}: {ex.GetType().Name} {ex.Message}\");\n            }\n        }\n        finally\n        {\n            throttler.Release();\n        }\n    }));\n\n    if (index % logEvery == 0)\n    {\n        Console.WriteLine($\"queued: {index}/{requests}, success: {Volatile.Read(ref success)}, failed: {Volatile.Read(ref failed)}, elapsed: {sw.Elapsed}\");\n    }\n}\n\nawait Task.WhenAll(tasks);\nConsole.WriteLine($\"done: success={success}, failed={failed}, elapsed={sw.Elapsed}\");\n\n#if NET10_0_OR_GREATER\nstaticClient?.Dispose();\nserviceProvider?.Dispose();\n#endif\n</code></pre>\n<h3 id=\"powershell-è„šæœ¬\">PowerShell è„šæœ¬</h3>\n<p>è„šæœ¬æˆ‘å°±ä¸åœ¨æ–‡ç« é‡Œå…¨æ–‡è´´äº†ï¼š</p>\n<ul>\n<li>å¤–éƒ¨å¯åŠ¨ Server ç‰ˆæœ¬ï¼š<code>https://github.com/sdcb/http-client-exp/blob/main/scripts/run-experiment-external-server.ps1</code></li>\n<li>è„šæœ¬å†…å¯åŠ¨ Server ç‰ˆæœ¬ï¼š<code>https://github.com/sdcb/http-client-exp/blob/main/scripts/run-experiment.ps1</code></li>\n</ul>\n<hr />\n<h2 id=\"åŸå§‹å®éªŒç»“æœæ—¥å¿—å®Œæ•´è´´å‡º\">åŸå§‹å®éªŒç»“æœï¼ˆæ—¥å¿—ï¼Œå®Œæ•´è´´å‡ºï¼‰</h2>\n<blockquote>\n<p>æ—¥å¿—ç›®å½•ï¼š<code>logs/run-20260119-095017</code></p>\n</blockquote>\n<h3 id=\"experiment-summarylog\"><code>experiment-summary.log</code></h3>\n<pre><code class=\"language-text\">[2026-01-19T09:51:13.7180857+08:00] net48 ExitCode=0 OutLog=C:\\Users\\ZhouJie\\source\\repos\\http-client-exp\\logs\\\\run-20260119-095017\\net48.out.log ErrLog=C:\\Users\\ZhouJie\\source\\repos\\http-client-exp\\logs\\\\run-20260119-095017\\net48.err.log\n[2026-01-19T09:53:33.0362523+08:00] net6 ExitCode=0 OutLog=C:\\Users\\ZhouJie\\source\\repos\\http-client-exp\\logs\\\\run-20260119-095017\\net6.out.log ErrLog=C:\\Users\\ZhouJie\\source\\repos\\http-client-exp\\logs\\\\run-20260119-095017\\net6.err.log\n[2026-01-19T09:56:00.4574527+08:00] net8 ExitCode=0 OutLog=C:\\Users\\ZhouJie\\source\\repos\\http-client-exp\\logs\\\\run-20260119-095017\\net8.out.log ErrLog=C:\\Users\\ZhouJie\\source\\repos\\http-client-exp\\logs\\\\run-20260119-095017\\net8.err.log\n[2026-01-19T09:58:27.2618139+08:00] net10-new ExitCode=0 OutLog=C:\\Users\\ZhouJie\\source\\repos\\http-client-exp\\logs\\\\run-20260119-095017\\net10-new.out.log ErrLog=C:\\Users\\ZhouJie\\source\\repos\\http-client-exp\\logs\\\\run-20260119-095017\\net10-new.err.log\n[2026-01-19T10:00:53.0490472+08:00] net10-static ExitCode=0 OutLog=C:\\Users\\ZhouJie\\source\\repos\\http-client-exp\\logs\\\\run-20260119-095017\\net10-static.out.log ErrLog=C:\\Users\\ZhouJie\\source\\repos\\http-client-exp\\logs\\\\run-20260119-095017\\net10-static.err.log\n[2026-01-19T10:01:10.2096164+08:00] net10-factory ExitCode=0 OutLog=C:\\Users\\ZhouJie\\source\\repos\\http-client-exp\\logs\\\\run-20260119-095017\\net10-factory.out.log ErrLog=C:\\Users\\ZhouJie\\source\\repos\\http-client-exp\\logs\\\\run-20260119-095017\\net10-factory.err.log\n</code></pre>\n<h3 id=\"netstatlog\"><code>netstat.log</code></h3>\n<pre><code class=\"language-text\">[2026-01-19T09:50:55.6627455+08:00] before-net48 TIME_WAIT=2 ESTABLISHED=0 CLOSE_WAIT=0\n[2026-01-19T09:51:15.4686603+08:00] after-net48 TIME_WAIT=20002 ESTABLISHED=0 CLOSE_WAIT=0\n[2026-01-19T09:53:13.9647485+08:00] before-net6 TIME_WAIT=0 ESTABLISHED=0 CLOSE_WAIT=0\n[2026-01-19T09:53:33.8112294+08:00] after-net6 TIME_WAIT=20000 ESTABLISHED=0 CLOSE_WAIT=0\n[2026-01-19T09:55:42.6435015+08:00] before-net8 TIME_WAIT=0 ESTABLISHED=0 CLOSE_WAIT=0\n[2026-01-19T09:56:01.1900000+08:00] after-net8 TIME_WAIT=18361 ESTABLISHED=0 CLOSE_WAIT=0\n[2026-01-19T09:58:08.8603129+08:00] before-net10-new TIME_WAIT=0 ESTABLISHED=0 CLOSE_WAIT=0\n[2026-01-19T09:58:28.1500737+08:00] after-net10-new TIME_WAIT=18860 ESTABLISHED=0 CLOSE_WAIT=0\n[2026-01-19T10:00:36.1038757+08:00] before-net10-static TIME_WAIT=0 ESTABLISHED=0 CLOSE_WAIT=0\n[2026-01-19T10:00:53.1007259+08:00] after-net10-static TIME_WAIT=200 ESTABLISHED=0 CLOSE_WAIT=0\n[2026-01-19T10:00:53.2458798+08:00] before-net10-factory TIME_WAIT=200 ESTABLISHED=0 CLOSE_WAIT=0\n[2026-01-19T10:01:10.2574678+08:00] after-net10-factory TIME_WAIT=200 ESTABLISHED=0 CLOSE_WAIT=0\n</code></pre>\n<h3 id=\"cooldownlog\"><code>cooldown.log</code></h3>\n<pre><code class=\"language-text\">[2026-01-19T09:51:16.2687666+08:00] cooldown-net48 TIME_WAIT=20002 baseline=2 limit=202\n[2026-01-19T09:51:27.0427805+08:00] cooldown-net48 TIME_WAIT=20002 baseline=2 limit=202\n[2026-01-19T09:51:37.8184382+08:00] cooldown-net48 TIME_WAIT=20002 baseline=2 limit=202\n[2026-01-19T09:51:48.5404492+08:00] cooldown-net48 TIME_WAIT=20002 baseline=2 limit=202\n[2026-01-19T09:51:59.2846968+08:00] cooldown-net48 TIME_WAIT=20002 baseline=2 limit=202\n[2026-01-19T09:52:10.1562079+08:00] cooldown-net48 TIME_WAIT=20002 baseline=2 limit=202\n[2026-01-19T09:52:21.0588622+08:00] cooldown-net48 TIME_WAIT=20002 baseline=2 limit=202\n[2026-01-19T09:52:31.7777704+08:00] cooldown-net48 TIME_WAIT=20002 baseline=2 limit=202\n[2026-01-19T09:52:42.5664350+08:00] cooldown-net48 TIME_WAIT=20002 baseline=2 limit=202\n[2026-01-19T09:52:53.3299614+08:00] cooldown-net48 TIME_WAIT=20001 baseline=2 limit=202\n[2026-01-19T09:53:03.8109734+08:00] cooldown-net48 TIME_WAIT=10752 baseline=2 limit=202\n[2026-01-19T09:53:13.8560831+08:00] cooldown-net48 TIME_WAIT=0 baseline=2 limit=202\n[2026-01-19T09:53:34.6370711+08:00] cooldown-net6 TIME_WAIT=20000 baseline=0 limit=200\n[2026-01-19T09:53:45.5166974+08:00] cooldown-net6 TIME_WAIT=20000 baseline=0 limit=200\n[2026-01-19T09:53:56.2899736+08:00] cooldown-net6 TIME_WAIT=20000 baseline=0 limit=200\n[2026-01-19T09:54:07.0165428+08:00] cooldown-net6 TIME_WAIT=20000 baseline=0 limit=200\n[2026-01-19T09:54:17.8872137+08:00] cooldown-net6 TIME_WAIT=20000 baseline=0 limit=200\n[2026-01-19T09:54:28.7673529+08:00] cooldown-net6 TIME_WAIT=20000 baseline=0 limit=200\n[2026-01-19T09:54:39.5200091+08:00] cooldown-net6 TIME_WAIT=20000 baseline=0 limit=200\n[2026-01-19T09:54:50.3090659+08:00] cooldown-net6 TIME_WAIT=20000 baseline=0 limit=200\n[2026-01-19T09:55:01.0638920+08:00] cooldown-net6 TIME_WAIT=20000 baseline=0 limit=200\n[2026-01-19T09:55:11.7529528+08:00] cooldown-net6 TIME_WAIT=20000 baseline=0 limit=200\n[2026-01-19T09:55:22.3886445+08:00] cooldown-net6 TIME_WAIT=12540 baseline=0 limit=200\n[2026-01-19T09:55:32.4658786+08:00] cooldown-net6 TIME_WAIT=435 baseline=0 limit=200\n[2026-01-19T09:55:42.5354878+08:00] cooldown-net6 TIME_WAIT=0 baseline=0 limit=200\n[2026-01-19T09:56:01.8876493+08:00] cooldown-net8 TIME_WAIT=18361 baseline=0 limit=200\n[2026-01-19T09:56:12.6341541+08:00] cooldown-net8 TIME_WAIT=18361 baseline=0 limit=200\n[2026-01-19T09:56:23.2806604+08:00] cooldown-net8 TIME_WAIT=18361 baseline=0 limit=200\n[2026-01-19T09:56:33.9425873+08:00] cooldown-net8 TIME_WAIT=18361 baseline=0 limit=200\n[2026-01-19T09:56:44.6277561+08:00] cooldown-net8 TIME_WAIT=18361 baseline=0 limit=200\n[2026-01-19T09:56:55.3013674+08:00] cooldown-net8 TIME_WAIT=18361 baseline=0 limit=200\n[2026-01-19T09:57:06.0278128+08:00] cooldown-net8 TIME_WAIT=18361 baseline=0 limit=200\n[2026-01-19T09:57:16.7315578+08:00] cooldown-net8 TIME_WAIT=18361 baseline=0 limit=200\n[2026-01-19T09:57:27.3887925+08:00] cooldown-net8 TIME_WAIT=18361 baseline=0 limit=200\n[2026-01-19T09:57:38.0442453+08:00] cooldown-net8 TIME_WAIT=18361 baseline=0 limit=200\n[2026-01-19T09:57:48.6566839+08:00] cooldown-net8 TIME_WAIT=12989 baseline=0 limit=200\n[2026-01-19T09:57:58.7347337+08:00] cooldown-net8 TIME_WAIT=1069 baseline=0 limit=200\n[2026-01-19T09:58:08.7780660+08:00] cooldown-net8 TIME_WAIT=0 baseline=0 limit=200\n[2026-01-19T09:58:29.0261291+08:00] cooldown-net10-new TIME_WAIT=18860 baseline=0 limit=200\n[2026-01-19T09:58:39.7491043+08:00] cooldown-net10-new TIME_WAIT=18860 baseline=0 limit=200\n[2026-01-19T09:58:50.4613796+08:00] cooldown-net10-new TIME_WAIT=18860 baseline=0 limit=200\n[2026-01-19T09:59:01.2064545+08:00] cooldown-net10-new TIME_WAIT=18860 baseline=0 limit=200\n[2026-01-19T09:59:11.8710153+08:00] cooldown-net10-new TIME_WAIT=18860 baseline=0 limit=200\n[2026-01-19T09:59:22.5648486+08:00] cooldown-net10-new TIME_WAIT=18860 baseline=0 limit=200\n[2026-01-19T09:59:33.2755958+08:00] cooldown-net10-new TIME_WAIT=18860 baseline=0 limit=200\n[2026-01-19T09:59:43.9631547+08:00] cooldown-net10-new TIME_WAIT=18860 baseline=0 limit=200\n[2026-01-19T09:59:54.6979243+08:00] cooldown-net10-new TIME_WAIT=18860 baseline=0 limit=200\n[2026-01-19T10:00:05.3961397+08:00] cooldown-net10-new TIME_WAIT=18860 baseline=0 limit=200\n[2026-01-19T10:00:15.8607378+08:00] cooldown-net10-new TIME_WAIT=11840 baseline=0 limit=200\n[2026-01-19T10:00:25.9471407+08:00] cooldown-net10-new TIME_WAIT=614 baseline=0 limit=200\n[2026-01-19T10:00:36.0111701+08:00] cooldown-net10-new TIME_WAIT=0 baseline=0 limit=200\n[2026-01-19T10:00:53.1510649+08:00] cooldown-net10-static TIME_WAIT=200 baseline=0 limit=200\n[2026-01-19T10:01:10.3057785+08:00] cooldown-net10-factory TIME_WAIT=200 baseline=200 limit=400\n</code></pre>\n<h3 id=\"net48outlog\"><code>net48.out.log</code></h3>\n<pre><code class=\"language-text\">url=http://localhost:5055/ping\nrequests=20000, parallel=200, timeoutSeconds=5\nqueued: 1000/20000, success: 803, failed: 0, elapsed: 00:00:00.7170409\nqueued: 2000/20000, success: 1803, failed: 0, elapsed: 00:00:01.5455465\nqueued: 3000/20000, success: 2800, failed: 0, elapsed: 00:00:02.3559601\nqueued: 4000/20000, success: 3801, failed: 0, elapsed: 00:00:03.1925172\nqueued: 5000/20000, success: 4802, failed: 0, elapsed: 00:00:04.0184093\nqueued: 6000/20000, success: 5802, failed: 0, elapsed: 00:00:04.8348862\nqueued: 7000/20000, success: 6800, failed: 0, elapsed: 00:00:05.6775563\nqueued: 8000/20000, success: 7801, failed: 0, elapsed: 00:00:06.5458377\nqueued: 9000/20000, success: 8802, failed: 0, elapsed: 00:00:07.4397727\nqueued: 10000/20000, success: 9803, failed: 0, elapsed: 00:00:08.3348468\nqueued: 11000/20000, success: 10802, failed: 0, elapsed: 00:00:09.2035416\nqueued: 12000/20000, success: 11804, failed: 0, elapsed: 00:00:10.0393223\nqueued: 13000/20000, success: 12806, failed: 0, elapsed: 00:00:10.8262272\nqueued: 14000/20000, success: 13804, failed: 0, elapsed: 00:00:11.6636597\nqueued: 15000/20000, success: 14802, failed: 0, elapsed: 00:00:12.4799716\nqueued: 16000/20000, success: 15819, failed: 0, elapsed: 00:00:13.4697834\nqueued: 17000/20000, success: 16822, failed: 0, elapsed: 00:00:14.5332049\nqueued: 18000/20000, success: 17818, failed: 0, elapsed: 00:00:15.5317397\nqueued: 19000/20000, success: 18816, failed: 0, elapsed: 00:00:16.5405963\nqueued: 20000/20000, success: 19819, failed: 0, elapsed: 00:00:17.6652081\ndone: success=20000, failed=0, elapsed=00:00:17.7541839\n</code></pre>\n<h3 id=\"net6outlog\"><code>net6.out.log</code></h3>\n<pre><code class=\"language-text\">url=http://localhost:5055/ping\nrequests=20000, parallel=200, timeoutSeconds=5\nqueued: 1000/20000, success: 803, failed: 0, elapsed: 00:00:00.7159800\nqueued: 2000/20000, success: 1803, failed: 0, elapsed: 00:00:01.6028433\nqueued: 3000/20000, success: 2802, failed: 0, elapsed: 00:00:02.4876237\nqueued: 4000/20000, success: 3802, failed: 0, elapsed: 00:00:03.3549543\nqueued: 5000/20000, success: 4802, failed: 0, elapsed: 00:00:04.2710795\nqueued: 6000/20000, success: 5801, failed: 0, elapsed: 00:00:05.1637653\nqueued: 7000/20000, success: 6802, failed: 0, elapsed: 00:00:06.0729777\nqueued: 8000/20000, success: 7802, failed: 0, elapsed: 00:00:07.0697555\nqueued: 9000/20000, success: 8801, failed: 0, elapsed: 00:00:08.0143162\nqueued: 10000/20000, success: 9800, failed: 0, elapsed: 00:00:08.9633860\nqueued: 11000/20000, success: 10802, failed: 0, elapsed: 00:00:09.9344239\nqueued: 12000/20000, success: 11802, failed: 0, elapsed: 00:00:10.8379783\nqueued: 13000/20000, success: 12801, failed: 0, elapsed: 00:00:11.6810601\nqueued: 14000/20000, success: 13801, failed: 0, elapsed: 00:00:12.5122642\nqueued: 15000/20000, success: 14800, failed: 0, elapsed: 00:00:13.3692282\nqueued: 16000/20000, success: 15803, failed: 0, elapsed: 00:00:14.2782829\nqueued: 17000/20000, success: 16801, failed: 0, elapsed: 00:00:15.2187642\nqueued: 18000/20000, success: 17802, failed: 0, elapsed: 00:00:16.0811154\nqueued: 19000/20000, success: 18810, failed: 0, elapsed: 00:00:16.9798536\nqueued: 20000/20000, success: 19817, failed: 0, elapsed: 00:00:17.8952478\ndone: success=20000, failed=0, elapsed=00:00:18.0175351\n</code></pre>\n<h3 id=\"net8outlog\"><code>net8.out.log</code></h3>\n<pre><code class=\"language-text\">url=http://localhost:5055/ping\nrequests=20000, parallel=200, timeoutSeconds=5\nqueued: 1000/20000, success: 800, failed: 0, elapsed: 00:00:00.8405997\nqueued: 2000/20000, success: 1802, failed: 0, elapsed: 00:00:01.6913251\nqueued: 3000/20000, success: 2800, failed: 0, elapsed: 00:00:02.6176324\nqueued: 4000/20000, success: 3802, failed: 0, elapsed: 00:00:03.4744051\nqueued: 5000/20000, success: 4801, failed: 0, elapsed: 00:00:04.2873345\nqueued: 6000/20000, success: 5800, failed: 0, elapsed: 00:00:05.0960137\nqueued: 7000/20000, success: 6803, failed: 0, elapsed: 00:00:05.8940500\nqueued: 8000/20000, success: 7802, failed: 0, elapsed: 00:00:06.7207568\nqueued: 9000/20000, success: 8803, failed: 0, elapsed: 00:00:07.5346954\nqueued: 10000/20000, success: 9800, failed: 0, elapsed: 00:00:08.3507870\nqueued: 11000/20000, success: 10802, failed: 0, elapsed: 00:00:09.1985154\nqueued: 12000/20000, success: 11803, failed: 0, elapsed: 00:00:10.0035216\nqueued: 13000/20000, success: 12803, failed: 0, elapsed: 00:00:10.7763067\nqueued: 14000/20000, success: 13802, failed: 0, elapsed: 00:00:11.6251384\nqueued: 15000/20000, success: 14802, failed: 0, elapsed: 00:00:12.4436652\nqueued: 16000/20000, success: 15807, failed: 0, elapsed: 00:00:13.3164599\nqueued: 17000/20000, success: 16801, failed: 0, elapsed: 00:00:14.2231530\nERR#1: HttpRequestException é€šå¸¸æ¯ä¸ªå¥—æ¥å­—åœ°å€(åè®®/ç½‘ç»œåœ°å€/ç«¯å£)åªå…è®¸ä½¿ç”¨ä¸€æ¬¡ã€‚ (localhost:5055)\nERR#2: HttpRequestException é€šå¸¸æ¯ä¸ªå¥—æ¥å­—åœ°å€(åè®®/ç½‘ç»œåœ°å€/ç«¯å£)åªå…è®¸ä½¿ç”¨ä¸€æ¬¡ã€‚ (localhost:5055)\nERR#3: HttpRequestException é€šå¸¸æ¯ä¸ªå¥—æ¥ï¿½ï¿½ï¿½åœ°å€(åè®®/ç½‘ç»œåœ°å€/ç«¯å£)åªå…è®¸ä½¿ç”¨ä¸€æ¬¡ã€‚ (localhost:5055)\nERR#5: HttpRequestException é€šå¸¸æ¯ä¸ªå¥—æ¥å­—åœ°å€(åè®®/ç½‘ç»œåœ°å€/ç«¯å£)åªå…è®¸ä½¿ç”¨ä¸€æ¬¡ã€‚ (localhost:5055)\nERR#4: HttpRequestException é€šå¸¸æ¯ä¸ªå¥—æ¥å­—åœ°å€(åè®®/ç½‘ç»œåœ°å€/ç«¯å£)åªå…è®¸ä½¿ç”¨ä¸€æ¬¡ã€‚ (localhost:5055)\nqueued: 18000/20000, success: 17605, failed: 201, elapsed: 00:00:15.0862152\nqueued: 19000/20000, success: 17711, failed: 1090, elapsed: 00:00:15.6168905\nqueued: 20000/20000, success: 18165, failed: 1639, elapsed: 00:00:16.3332350\ndone: success=18361, failed=1639, elapsed=00:00:16.4268168\n</code></pre>\n<h3 id=\"net10-newoutlog\"><code>net10-new.out.log</code></h3>\n<pre><code class=\"language-text\">url=http://localhost:5055/ping\nrequests=20000, parallel=200, timeoutSeconds=5, mode=new\nqueued: 1000/20000, success: 805, failed: 0, elapsed: 00:00:00.7099803\nqueued: 2000/20000, success: 1800, failed: 0, elapsed: 00:00:01.5324361\nqueued: 3000/20000, success: 2800, failed: 0, elapsed: 00:00:02.3573877\nqueued: 4000/20000, success: 3800, failed: 0, elapsed: 00:00:03.2069000\nqueued: 5000/20000, success: 4800, failed: 0, elapsed: 00:00:04.0313423\nqueued: 6000/20000, success: 5802, failed: 0, elapsed: 00:00:04.8687039\nqueued: 7000/20000, success: 6801, failed: 0, elapsed: 00:00:05.7252572\nqueued: 8000/20000, success: 7800, failed: 0, elapsed: 00:00:06.5624078\nqueued: 9000/20000, success: 8800, failed: 0, elapsed: 00:00:07.4244971\nqueued: 10000/20000, success: 9800, failed: 0, elapsed: 00:00:08.2911306\nqueued: 11000/20000, success: 10800, failed: 0, elapsed: 00:00:09.1755667\nqueued: 12000/20000, success: 11801, failed: 0, elapsed: 00:00:10.1160925\nqueued: 13000/20000, success: 12802, failed: 0, elapsed: 00:00:11.0165038\nqueued: 14000/20000, success: 13801, failed: 0, elapsed: 00:00:11.9382103\nqueued: 15000/20000, success: 14802, failed: 0, elapsed: 00:00:12.8002543\nqueued: 16000/20000, success: 15801, failed: 0, elapsed: 00:00:13.7185127\nERR#3: HttpRequestException é€šå¸¸æ¯ä¸ªå¥—æ¥å­—åœ°å€(åè®®/ç½‘ç»œåœ°å€/ç«¯å£)åªå…è®¸ä½¿ç”¨ä¸€æ¬¡ã€‚ (localhost:5055)\nERR#2: HttpRequestException é€šå¸¸æ¯ä¸ªå¥—æ¥å­—åœ°å€(åè®®/ç½‘ç»œåœ°å€/ç«¯å£)åªå…è®¸ä½¿ç”¨ä¸€æ¬¡ã€‚ (localhost:5055)\nERR#1: HttpRequestException é€šå¸¸æ¯ä¸ªå¥—æ¥å­—åœ°å€(åè®®/ç½‘ç»œåœ°å€/ç«¯å£)åªå…è®¸ä½¿ç”¨ä¸€æ¬¡ã€‚ (localhost:5055)\nERR#5: HttpRequestException é€šå¸¸æ¯ä¸ªå¥—æ¥å­—åœ°å€(åè®®/ç½‘ç»œåœ°å€/ç«¯å£)åªå…è®¸ä½¿ç”¨ä¸€æ¬¡ã€‚ (localhost:5055)\nERR#4: HttpRequestException é€šå¸¸æ¯ä¸ªå¥—æ¥å­—åœ°å€(åè®®/ç½‘ç»œåœ°å€/ç«¯å£)åªå…è®¸ä½¿ç”¨ä¸€æ¬¡ã€‚ (localhost:5055)\nqueued: 17000/20000, success: 16682, failed: 118, elapsed: 00:00:14.7578539\nqueued: 18000/20000, success: 16684, failed: 1118, elapsed: 00:00:15.4297844\nqueued: 19000/20000, success: 17661, failed: 1140, elapsed: 00:00:16.2796589\nqueued: 20000/20000, success: 18661, failed: 1140, elapsed: 00:00:17.3258406\ndone: success=18860, failed=1140, elapsed=00:00:17.3996862\n</code></pre>\n<h3 id=\"net10-staticoutlog\"><code>net10-static.out.log</code></h3>\n<pre><code class=\"language-text\">url=http://localhost:5055/ping\nrequests=20000, parallel=200, timeoutSeconds=5, mode=static\nqueued: 1000/20000, success: 801, failed: 0, elapsed: 00:00:00.6551470\nqueued: 2000/20000, success: 1800, failed: 0, elapsed: 00:00:01.5355394\nqueued: 3000/20000, success: 2800, failed: 0, elapsed: 00:00:02.3480456\nqueued: 4000/20000, success: 3800, failed: 0, elapsed: 00:00:03.0999050\nqueued: 5000/20000, success: 4800, failed: 0, elapsed: 00:00:03.8470820\nqueued: 6000/20000, success: 5800, failed: 0, elapsed: 00:00:04.5759884\nqueued: 7000/20000, success: 6800, failed: 0, elapsed: 00:00:05.3461919\nqueued: 8000/20000, success: 7801, failed: 0, elapsed: 00:00:06.0916621\nqueued: 9000/20000, success: 8802, failed: 0, elapsed: 00:00:06.9085343\nqueued: 10000/20000, success: 9800, failed: 0, elapsed: 00:00:07.8274125\nqueued: 11000/20000, success: 10800, failed: 0, elapsed: 00:00:08.6757231\nqueued: 12000/20000, success: 11800, failed: 0, elapsed: 00:00:09.5154490\nqueued: 13000/20000, success: 12800, failed: 0, elapsed: 00:00:10.3306765\nqueued: 14000/20000, success: 13800, failed: 0, elapsed: 00:00:11.1493724\nqueued: 15000/20000, success: 14800, failed: 0, elapsed: 00:00:11.9658212\nqueued: 16000/20000, success: 15801, failed: 0, elapsed: 00:00:12.7510706\nqueued: 17000/20000, success: 16800, failed: 0, elapsed: 00:00:13.4735304\nqueued: 18000/20000, success: 17800, failed: 0, elapsed: 00:00:14.2777953\nqueued: 19000/20000, success: 18800, failed: 0, elapsed: 00:00:15.0219907\nqueued: 20000/20000, success: 19801, failed: 0, elapsed: 00:00:15.7699702\ndone: success=20000, failed=0, elapsed=00:00:15.8507052\n</code></pre>\n<h3 id=\"net10-factoryoutlog\"><code>net10-factory.out.log</code></h3>\n<pre><code class=\"language-text\">url=http://localhost:5055/ping\nrequests=20000, parallel=200, timeoutSeconds=5, mode=factory\nqueued: 1000/20000, success: 801, failed: 0, elapsed: 00:00:00.7094395\nqueued: 2000/20000, success: 1801, failed: 0, elapsed: 00:00:01.5072383\nqueued: 3000/20000, success: 2800, failed: 0, elapsed: 00:00:02.3047647\nqueued: 4000/20000, success: 3800, failed: 0, elapsed: 00:00:03.0607252\nqueued: 5000/20000, success: 4800, failed: 0, elapsed: 00:00:03.8370598\nqueued: 6000/20000, success: 5800, failed: 0, elapsed: 00:00:04.6621606\nqueued: 7000/20000, success: 6800, failed: 0, elapsed: 00:00:05.4589104\nqueued: 8000/20000, success: 7800, failed: 0, elapsed: 00:00:06.2913588\nqueued: 9000/20000, success: 8800, failed: 0, elapsed: 00:00:07.0629536\nqueued: 10000/20000, success: 9800, failed: 0, elapsed: 00:00:07.8438472\nqueued: 11000/20000, success: 10800, failed: 0, elapsed: 00:00:08.5796209\nqueued: 12000/20000, success: 11800, failed: 0, elapsed: 00:00:09.3663975\nqueued: 13000/20000, success: 12801, failed: 0, elapsed: 00:00:10.1984757\nqueued: 14000/20000, success: 13800, failed: 0, elapsed: 00:00:11.0474925\nqueued: 15000/20000, success: 14800, failed: 0, elapsed: 00:00:11.9175753\nqueued: 16000/20000, success: 15800, failed: 0, elapsed: 00:00:12.7356429\nqueued: 17000/20000, success: 16801, failed: 0, elapsed: 00:00:13.4991148\nqueued: 18000/20000, success: 17800, failed: 0, elapsed: 00:00:14.2912941\nqueued: 19000/20000, success: 18800, failed: 0, elapsed: 00:00:15.0844828\nqueued: 20000/20000, success: 19800, failed: 0, elapsed: 00:00:15.8439387\ndone: success=20000, failed=0, elapsed=00:00:15.9485251\n</code></pre>\n<hr />\n<h2 id=\"å±€é™ä¸å¤‡æ³¨åˆ«æŠŠç»“è®ºç”¨é”™åœ°æ–¹\">å±€é™ä¸å¤‡æ³¨ï¼ˆåˆ«æŠŠç»“è®ºç”¨é”™åœ°æ–¹ï¼‰</h2>\n<ol>\n<li><strong>å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨åŒæœº</strong>ï¼šTIME_WAIT ç»Ÿè®¡åŒ…å«ä¸¤ç«¯è¿æ¥ï¼Œä¸èƒ½å®Œå…¨å½’å› äºâ€œå®¢æˆ·ç«¯ç«¯å£è€—å°½â€ï¼Œä½†å®ƒè¶³ä»¥è¯´æ˜â€œçŸ­æ—¶é—´åˆ¶é€ å¤§é‡çŸ­è¿æ¥â€è¿™ä»¶äº‹æœ¬èº«çš„é£é™©ã€‚</li>\n<li><strong>net48 è®¾ç½®äº† <code>ServicePointManager.DefaultConnectionLimit = 1000</code></strong>ï¼Œä¸ net6+/net10 çš„è¿æ¥ç®¡ç†ç­–ç•¥å­˜åœ¨å·®å¼‚ã€‚</li>\n</ol>\n<hr />\n<h2 id=\"å…³é”®ç»“æœæ±‡æ€»\">å…³é”®ç»“æœæ±‡æ€»</h2>\n<h3 id=\"time_wait-ç»Ÿè®¡ç«¯å£-5055\">TIME_WAIT ç»Ÿè®¡ï¼ˆç«¯å£ 5055ï¼‰</h3>\n<table>\n<thead>\n<tr>\n<th>è¿è¡Œ</th>\n<th style=\"text-align: right;\">before TIME_WAIT</th>\n<th style=\"text-align: right;\">after TIME_WAIT</th>\n<th style=\"text-align: right;\">è€—æ—¶ï¼ˆç§’ï¼‰</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>net48</td>\n<td style=\"text-align: right;\">2</td>\n<td style=\"text-align: right;\">20002</td>\n<td style=\"text-align: right;\">17.754</td>\n</tr>\n<tr>\n<td>net6</td>\n<td style=\"text-align: right;\">0</td>\n<td style=\"text-align: right;\">20000</td>\n<td style=\"text-align: right;\">18.018</td>\n</tr>\n<tr>\n<td>net8</td>\n<td style=\"text-align: right;\">0</td>\n<td style=\"text-align: right;\">18361</td>\n<td style=\"text-align: right;\">16.427</td>\n</tr>\n<tr>\n<td>net10</td>\n<td style=\"text-align: right;\">0</td>\n<td style=\"text-align: right;\">18860</td>\n<td style=\"text-align: right;\">17.400</td>\n</tr>\n<tr>\n<td>net10-static</td>\n<td style=\"text-align: right;\">0</td>\n<td style=\"text-align: right;\">200</td>\n<td style=\"text-align: right;\">15.851</td>\n</tr>\n<tr>\n<td>net10-factory</td>\n<td style=\"text-align: right;\">200</td>\n<td style=\"text-align: right;\">200</td>\n<td style=\"text-align: right;\">15.949</td>\n</tr>\n</tbody>\n</table>\n<p><img alt=\"elapsed_seconds\" src=\"https://img2024.cnblogs.com/blog/233608/202601/233608-20260119112313722-548103397.png\" /><br />\n<img alt=\"time_wait_delta\" src=\"https://img2024.cnblogs.com/blog/233608/202601/233608-20260119112309621-529653637.png\" /></p>\n<p>æ¥æºï¼š<code>logs/run-20260119-095017/netstat.log</code></p>\n<h3 id=\"å®¢æˆ·ç«¯æ‰§è¡Œç»“æœæ‘˜è¦\">å®¢æˆ·ç«¯æ‰§è¡Œç»“æœï¼ˆæ‘˜è¦ï¼‰</h3>\n<ul>\n<li>net48: success=20000, failed=0</li>\n<li>net6: success=20000, failed=0</li>\n<li>net8: success=18361, failed=1639ï¼ˆæŠ¥é”™ï¼šâ€œé€šå¸¸æ¯ä¸ªå¥—æ¥å­—åœ°å€åªå…è®¸ä½¿ç”¨ä¸€æ¬¡â€ï¼‰</li>\n<li>net10-new: success=18860, failed=1140ï¼ˆæŠ¥é”™ï¼šâ€œé€šå¸¸æ¯ä¸ªå¥—æ¥å­—åœ°å€åªå…è®¸ä½¿ç”¨ä¸€æ¬¡â€ï¼‰</li>\n<li>net10-static: success=20000, failed=0</li>\n<li>net10-factory: success=20000, failed=0</li>\n</ul>\n<p>æ¥æºï¼š<code>logs/run-20260119-095017/*.out.log</code></p>\n<hr />\n<h2 id=\"ç»“è®º\">ç»“è®º</h2>\n<p>â€œ.NET 10 äº†ï¼ŒHttpClient è¿˜èƒ½ä¸èƒ½ usingï¼Ÿâ€â€”â€”ç­”æ¡ˆä¾ç„¶æ˜¯ï¼š<strong>åˆ«æŠŠ HttpClient å½“æˆä¸€æ¬¡æ€§å¯¹è±¡</strong>ã€‚</p>\n<p>ä½ å¯ä»¥ <code>using</code> çš„æ˜¯è¯·æ±‚/å“åº”ç›¸å…³çš„å¯¹è±¡ï¼ˆä¾‹å¦‚ <code>HttpResponseMessage</code>ï¼‰ï¼Œä½† <code>HttpClient</code> æœ¬èº«æ›´åƒä¸€ä¸ªâ€œè¿æ¥æ± çš„é—¨é¢â€ï¼šå®ƒè¶Šå¤ç”¨ï¼Œè¶Šç¨³å®šï¼Œè¶Šä¸å®¹æ˜“æŠŠä½ æ¨å‘ TIME_WAIT åœ°ç‹±ã€‚</p>\n<p>å¦å¤–ï¼Œä»æœ¬æ¬¡å‹æµ‹è€—æ—¶æ¥çœ‹ï¼Œ<strong>ä¸åšâ€œæ¯æ¬¡è¯·æ±‚éƒ½ using/new HttpClientâ€</strong> çš„å†™æ³•ï¼Œé€Ÿåº¦å…¶å®è¿˜ä¼šç¨å¾®å¿«ä¸€ä¸¢ä¸¢ï¼ˆå½“ç„¶å·®è·å¾ˆå°ï¼‰ã€‚</p>\n<p>æ„Ÿè°¢é˜…è¯»ï¼å¦‚æœä½ è§‰å¾—è¿™äº›å®éªŒåˆ†ææœ‰æ„æ€ï¼Œæˆ–è€…å¯¹ .NET é«˜æ€§èƒ½ç¼–ç¨‹æ„Ÿå…´è¶£ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€äº¤æµï¼Œä¹Ÿæ¬¢è¿åŠ å…¥æˆ‘çš„ <strong>.NETéªšæ“ä½œ QQç¾¤ï¼š495782587</strong>ï¼Œæˆ‘ä»¬ä¸€èµ·æ¢ç´¢æ›´å¤šæŠ€æœ¯ç¡¬æ ¸ç©æ³•ã€‚</p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-23 08:45</span>&nbsp;\n<a href=\"https://www.cnblogs.com/sdcb\">.NETéªšæ“ä½œ</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">177</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">3</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "ç«çˆ†å…¨ç½‘çš„Agent Skillsï¼Œæ™®é€šäººåˆ°åº•è¯¥æ€ä¹ˆç”¨ï¼Ÿ-- è¯¦ç»†æ•™ç¨‹",
      "link": "https://www.cnblogs.com/jinjiangongzuoshi/p/19520101",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/jinjiangongzuoshi/p/19520101\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-23 08:38\">\n    <span>ç«çˆ†å…¨ç½‘çš„Agent Skillsï¼Œæ™®é€šäººåˆ°åº•è¯¥æ€ä¹ˆç”¨ï¼Ÿ-- è¯¦ç»†æ•™ç¨‹</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<p>æœ€è¿‘ï¼ŒAI Agent Skills ç®€ç›´ç«åˆ°å‡ºåœˆï¼Œè¯´ä¸€å¥ â€œå…¨ç½‘åˆ·å±â€ éƒ½æ¯«ä¸å¤¸å¼ ï¼</p>\n<p>å¦‚ä»Šï¼Œè¶Šæ¥è¶Šå¤š AI äº§å“éƒ½å·²æ¥å…¥ Skills åŠŸèƒ½ â€”â€” ä» Claude Codeã€OpenCode åˆ° CodeXã€Antigravityï¼Œå†åˆ°æœ€è¿‘åˆšå‡çº§çš„ Coze 2.0ï¼Œå‡ ä¹æˆäº†ä¸»æµ AI å·¥å…·çš„ â€œæ ‡é…â€ã€‚</p>\n<p>ä½†é—®é¢˜æ¥äº†ï¼š<strong>ç«çˆ†å…¨ç½‘çš„ Skillsï¼Œæ™®é€šäººåˆ°åº•è¯¥æ€ä¹ˆç”¨ï¼Ÿ</strong></p>\n<p>ä½ ä¼šå‘ç°ï¼Œé™¤äº† Coze 2.0 ä¹‹å¤–ï¼Œç»å¤§å¤šæ•°æ”¯æŒ Skills çš„å·¥å…·ï¼Œæœ¬è´¨éƒ½æ˜¯ AI ç¼–ç¨‹å·¥å…· â€”â€” ä¸æ˜¯ CLI å‘½ä»¤è¡Œï¼Œå°±æ˜¯ IDE å¼€å‘ç¯å¢ƒã€‚è¿™å¯¹æ–°æ‰‹å°ç™½ã€éæŠ€æœ¯äººå‘˜æ¥è¯´ï¼Œé—¨æ§›å®åœ¨å¤ªé«˜äº†ï¼</p>\n<p>å¯¹æ™®é€šäººè€Œè¨€ï¼Œä¸ç®¡æ˜¯éƒ¨ç½²è¿˜æ˜¯ä½¿ç”¨ï¼Œéƒ½å ªç§° â€œæ‹¦è·¯è™â€ï¼šä¸€æ—¦æ¶‰åŠæœ¬åœ°é…ç½®ã€å‘½ä»¤è¡Œæ“ä½œï¼Œå°±ç›´æ¥æŠŠå¤§å¤šæ•°äººæŒ¡åœ¨äº†é—¨å¤–ã€‚</p>\n<p>æ¯•ç«Ÿï¼ŒçœŸæ²¡å¤šå°‘äººæ„¿æ„èŠ±æ—¶é—´å»ä¿®æ”¹ã€ç¼–å†™ Skills ç›¸å…³æ–‡ä»¶ â€”â€” è¿™ä¸œè¥¿è¯´å¤æ‚ä¸ç®—æè‡´å¤æ‚ï¼Œä½†å¯¹éä¸“ä¸šäººå£«æ¥è¯´ï¼Œå…‰æ˜¯ç†è§£æ–‡ä»¶ç»“æ„å°±å¤Ÿå¤´ç–¼ã€‚ç°åœ¨æ„¿æ„åœ¨è¿™äº›å·¥å…·é‡ŒæŠ˜è…¾ Skills çš„ï¼ŒåŸºæœ¬éƒ½æ˜¯åæå®¢ã€åä¸“ä¸šçš„æŠ€æœ¯ç©å®¶ã€‚</p>\n<p>è€Œå¯¹æ›´å¤šæœ‹å‹æ¥è¯´ï¼Œå›°æƒ‘ç®€ç›´æ— å¤„ä¸åœ¨ï¼š</p>\n<ul>\n<li>å®‰è£…æ­¥éª¤çœ‹ä¸æ‡‚ï¼ŒåŠå¤©è£…ä¸ä¸Šï¼›</li>\n<li>ç»ˆç«¯æ˜¯ä»€ä¹ˆï¼Ÿå®Œå…¨æ²¡æ¦‚å¿µï¼›</li>\n<li>Skills çš„æ–‡ä»¶å¤¹è—åœ¨å“ªï¼Œç¿»éç”µè„‘æ‰¾ä¸åˆ°ï¼›</li>\n<li>Github ä¸Šçš„å¼€æºé¡¹ç›®å…¨æ˜¯ä»£ç ï¼Œæ ¹æœ¬çœ‹ä¸æ‡‚æ€ä¹ˆæ”¹æˆ Skillsï¼›</li>\n<li>æƒ³è‡ªå·±åˆ›å»ºä¸€ä¸ª Skillï¼Œå´è¿å…¥é—¨çš„é—¨éƒ½æ‘¸ä¸åˆ°â€¦â€¦</li>\n</ul>\n<p>æ‰€ä»¥ä»Šå¤©ï¼Œæˆ‘å°±æ¥åˆ†äº«ä¸€ç§ <strong>æœ€ç®€å•ã€æœ€ä¾¿æ·çš„ Skill æ„å»ºæ–¹æ³• â€”â€” ç›´æ¥ç”¨å˜´è¯´ï¼Œå°±èƒ½æå®šï¼</strong> å…¨ç¨‹ä¸ç”¨ç¢°ä»£ç ã€ä¸ç”¨æé…ç½®ï¼Œç‰¹åˆ«é€‚åˆæ–°æ‰‹å°ç™½å’ŒéæŠ€æœ¯äººå‘˜ã€‚</p>\n<p>å¦‚æœæœ‰å¯¹Skillsè¿˜ä¸äº†è§£çš„æœ‹å‹ï¼Œå¯ä»¥å»çœ‹æˆ‘çš„è¿™ç¯‡æ–‡ç« ï¼š<a href=\"https://mp.weixin.qq.com/s/CFjpnEo9eOoaLYx2OqQ0kg\" rel=\"noopener nofollow\" target=\"_blank\">æœ€è¿‘å¾ˆç«çˆ†çš„Claude Skillsåˆ°åº•æ˜¯ä¸ªå•¥ï¼Ÿè§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿæ€ä¹ˆç”¨ï¼</a></p>\n<h2 id=\"å…·ä½“æ“ä½œ\">å…·ä½“æ“ä½œ</h2>\n<p>1ã€ä»¥Claude Codeä¸ºä¾‹ï¼Œå…¶å®ƒAIå·¥å…·ä¹Ÿç±»ä¼¼ï¼Œå…ˆå®‰è£…å¹¶è¿›å…¥åˆ°<code>Claude Code</code> äº¤äº’ç»ˆç«¯ï¼Œå¦‚æœè¿˜ä¸çŸ¥é“æ€ä¹ˆå®‰è£…Claude Codeï¼Œå¯ä»¥çœ‹è¿™ç¯‡ï¼š<a href=\"https://mp.weixin.qq.com/s/PyqhVgbkNBzd7grKN5IxgQ\" rel=\"noopener nofollow\" target=\"_blank\">99% çš„äººéƒ½ä¸çŸ¥é“çš„ Claude Code ä½¿ç”¨æŠ€å·§ï¼</a><br />\n<img alt=\"\" src=\"https://image.kjdaohang.com/PicGo/20260121153305205.png\" /></p>\n<p>2ã€åœ¨CCäº¤äº’ä¸­ï¼Œè¾“å…¥æç¤ºè¯ï¼š</p>\n<pre><code>å¸®æˆ‘å®‰è£…skill-creator\n</code></pre>\n<p><img alt=\"\" src=\"https://image.kjdaohang.com/PicGo/20260121153811834.png\" /></p>\n<p>3ã€æ¯”å¦‚æˆ‘æƒ³å¼€å‘ä¸€ä¸ªå›¾ç‰‡è½¬æ¢ã€å‹ç¼©çš„å·¥å…·ï¼Œå¸Œæœ›æŠŠè¿™ä¸ªèƒ½åŠ›å°è£…æˆä¸€ä¸ªå¯å¤ç”¨çš„skillæŠ€èƒ½ï¼Œåªéœ€è¦åœ¨CCä¸­è¾“å…¥æç¤ºè¯ï¼š</p>\n<pre><code>è¯·å¸®æˆ‘æŠŠå¼€æºé¡¹ç›®https://github.com/lmageMagick/lmageMagick,æ‰“åŒ…æˆä¸€ä¸ªSkillï¼Œæ–¹ä¾¿æˆ‘ä»¥åç›´æ¥è°ƒç”¨å®ƒæ¥å¯¹æˆ‘çš„å›¾ç‰‡ç´ æè¿›è¡Œå¤„ç†ï¼Œå¯ä»¥æ¯”å¦‚æ ¼å¼è½¬æ¢ï¼Œåˆ†è¾¨ç‡ä¿®æ”¹ã€å‹ç¼©ç­‰ç­‰\n</code></pre>\n<p><img alt=\"\" src=\"https://image.kjdaohang.com/PicGo/20260121160320245.png\" /></p>\n<p>4ã€å¤§æ¦‚3~4åˆ†é’Ÿå·¦å³åï¼ŒClaude Codeå°±å¸®æˆ‘è‡ªåŠ¨åˆ›å»ºå¥½äº†ä¸€ä¸ªï¼š <code>ImageMagick å›¾ç‰‡å¤„ç† Skill</code><br />\n<img alt=\"\" src=\"https://image.kjdaohang.com/PicGo/20260121160733521.png\" /></p>\n<p>5ã€æœ¬åœ°ä¸Šä¼ ä¸€å¼ å›¾ç‰‡ï¼Œæµ‹è¯•ä¸€ä¸‹</p>\n<pre><code>è¯·å°†é™„ä»¶å›¾ç‰‡æ ¼å¼è½¬åŒ–JPGï¼Œå›¾ç‰‡å¤§å°å‹ç¼©ä¸€ä¸‹ï¼Œå¹¶ä¿å­˜åˆ°åŸå§‹å›¾ç‰‡åŒç›®å½•ä¸‹\n</code></pre>\n<p><img alt=\"\" src=\"https://image.kjdaohang.com/PicGo/20260121170000979.png\" /></p>\n<p>å¯ä»¥çœ‹åˆ°ï¼Œå·²ç»å¯ä»¥æˆåŠŸè°ƒç”¨åˆšåˆšæ–°æ„å»ºçš„skillå¯¹å›¾ç‰‡æ ¼å¼è½¬æ¢ä»¥åŠå›¾ç‰‡å¤§å°å‹ç¼©äº†<br />\n<img alt=\"\" src=\"https://image.kjdaohang.com/PicGo/20260121183417063.png\" /></p>\n<p>å¯ä»¥çœ‹åˆ°ï¼ŒçœŸçš„åªç”¨äº†4æ­¥ï¼Œå°±æ„å»ºäº†ä¸€ä¸ªå…¨æ–°çš„å›¾ç‰‡å¤„ç†skillæŠ€èƒ½ã€‚</p>\n<h2 id=\"ä»»ä½•å¯å¤ç”¨çš„æŠ€èƒ½éƒ½å»ºè®®skillåŒ–\">ä»»ä½•å¯å¤ç”¨çš„æŠ€èƒ½ï¼Œéƒ½å»ºè®®SkillåŒ–</h2>\n<p>è¿™æ˜¯æˆ‘éå¸¸å¼ºè°ƒå¹¶åŒæ„çš„è§‚ç‚¹ï¼Œä»»ä½•ä¼šé‡å¤3æ¬¡ä¸”ä»¥ä¸Šçš„çš„ï¼Œæˆ–è€…ä»»ä½•å¯ä»¥å¤ç”¨çš„èƒ½åŠ›ï¼Œéƒ½å»ºè®®æŠ½è±¡æˆæŠ€èƒ½ï¼Œä¸€å®šè¦SkillåŒ–ã€‚</p>\n<p>ä¹‹å‰ï¼Œè¦å€ŸåŠ©å¤–åŠ›çš„ï¼Œéƒ½æ˜¯å„ç§æ‰¾å·¥å…·ï¼Œä¸‹è½½ã€å®‰è£…å·¥å…·ï¼Œæœ‰äº†Skillä¹‹åï¼Œä½ å¯ä»¥å¾ˆè½»æ¾çš„å°†å…¶è½¬åŒ–ä¸ºAIçš„SkillæŠ€èƒ½ã€‚</p>\n<p>æ¯”å¦‚ä¹‹å‰ï¼Œå¤§å®¶ä¼šç”¨åˆ°çš„å„ç§æ ¼å¼å·¥å‚ã€å›¾ç‰‡å‹ç¼©ã€è§†é¢‘ä¸‹è½½ä¹‹ç±»çš„å·¥å…·ã€‚è¿™äº›å·¥å…·ï¼Œç»å¤§å¤šæ•°éƒ½æ˜¯æŠŠä¸€äº›å¤§ä½¬çš„å¼€æºå·¥å…·ï¼Œå°è£…ä¸€ä¸‹åŒ…è£…æˆå•ç‹¬çš„äº§å“ã€‚æ²¡æœ‰AIä¹‹å‰ï¼Œæ¯æ¬¡å°±æ˜¯å»Googleã€ç™¾åº¦å„ç§æœã€‚ç°åœ¨æˆ‘ä»¬æœ‰äº†Skillåï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆå¼€æºé¡¹ç›®ï¼Œå¾ˆå®¹æ˜“å°±èƒ½åšå‡ºç›¸å¯¹åº”çš„skilläº†ã€‚</p>\n<p>Githubä¸Šæœ‰å¾ˆå¤šä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼Œä½†å¯¹äºæ™®é€šäººæ¥è®²ï¼Œå¦‚ä½•çŸ¥é“è¯¥ç”¨ä»€ä¹ˆç‰¹å®šçš„å¼€æºé¡¹ç›®æ¥å¤„ç†ç‰¹å®šçš„äº‹æƒ…å‘¢ï¼Ÿæ¯”å¦‚ä¸Šé¢æˆ‘ä»¬æ„å»ºçš„å›¾ç‰‡å‹ç¼©å·¥å…·ï¼Œåªæœ‰ä½ äº‹å…ˆçŸ¥é“äº†æœ‰<code>ImageMagick</code>è¿™ä¸ªé¡¹ç›®ä¸”çŸ¥é“å®ƒçš„å¼€æºåœ°å€ï¼ˆ<code>https://github.com/lmageMagick/lmageMagick</code>ï¼‰ï¼Œä½ æ‰èƒ½æŠŠå®ƒå–‚ç»™AIå°è£…æˆSkillï¼Œä½†å¤§å¤šæ•°æ™®é€šäººï¼Œæœ‰äº›å¯èƒ½è¿githubæ˜¯ä»€ä¹ˆéƒ½ä¸çŸ¥é“ï¼Œé‚£æ€ä¹ˆå°è£…å‘¢ï¼Ÿ</p>\n<p>å…¶å®é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œä½ åŒæ ·å¯ä»¥é—®AIï¼Œæ¯”å¦‚å‘AIæè¿°ä½ çš„éœ€æ±‚ï¼Œä¸”é—®AIï¼Œåœ¨Githubä¸Šæœ‰ä»€ä¹ˆæ¯”è¾ƒå¥½çš„å¼€æºé¡¹ç›®èƒ½å¸®æˆ‘å¤„ç†è¿™ç±»éœ€æ±‚ï¼Œç„¶åç»™å‡ºé¡¹ç›®é“¾æ¥ã€‚ç„¶åæˆ‘ä»¬ï¼Œå†æ ¹æ®AIå›å¤çš„ç»“æœï¼Œæ¯ä¸ªè¿›å»ç¨å¾®çœ‹ä¸€ä¸‹staræ•°å’Œå†…å®¹æ˜¯å¦ç¬¦åˆè‡ªå·±éœ€æ±‚å°±å¯ä»¥äº†ã€‚</p>\n<p><strong>ä¸¾ä¸€ä¸ªä¾‹å­ï¼š</strong></p>\n<p>æˆ‘ç›¸ä¿¡å¤§å®¶ç»å¸¸éƒ½æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œå°±æ˜¯å»å„ç§è§†é¢‘ç½‘ç«™ä¸Šä¸‹è½½è§†é¢‘ï¼Œæ¯”å¦‚è§†é¢‘å·ã€æŠ–éŸ³ã€å°çº¢ä¹¦ã€Youtubeã€Bç«™ç­‰ã€‚</p>\n<p>ç„¶åç›´æ¥æå‡ºä½ çš„é—®é¢˜ï¼š</p>\n<blockquote>\n<p>åœ¨Githubä¸Šæœ‰æ²¡æœ‰é‚£ç§é’ˆå¯¹å„ç§è§†é¢‘ç½‘ç«™ä¸Šçš„è§†é¢‘è¿›è¡Œè§†é¢‘ä¸‹è½½æ¯”è¾ƒå¥½çš„é¡¹ç›®ï¼Œæ¯”å¦‚æ”¯æŒè§†é¢‘å·ã€æŠ–éŸ³ã€å°çº¢ä¹¦ã€Youtubeã€Bç«™ç­‰è§†é¢‘ä¸‹è½½ï¼Œè¯·ç»™å‡ºé¡¹ç›®åç§°ï¼Œé¡¹ç›®åœ°å€ï¼Œç‚¹èµæ•°ç­‰</p>\n</blockquote>\n<p><img alt=\"\" src=\"https://image.kjdaohang.com/PicGo/20260121194423030.png\" /></p>\n<p>ä¸åˆ°ä¸€åˆ†é’Ÿçš„æ—¶é—´ï¼Œå°±å¸®æˆ‘è‡ªåŠ¨æ•´ç†å‡ºæ¥10ä¸ªæ¨èçš„å¼€æºé¡¹ç›®<br />\n<img alt=\"\" src=\"https://image.kjdaohang.com/PicGo/20260121194454299.png\" /></p>\n<p>æ’åç¬¬ä¸€ï¼Œä¹Ÿæ˜¯æœ€ä¸ºæ¨èçš„é¡¹ç›®å½“å±<code>yt-dlp</code>ï¼Œå…¨å¹³å°é€šç”¨ï¼Œä¹Ÿæ˜¯åŠŸèƒ½æœ€å¼ºå¤§çš„è§†é¢‘ä¸‹è½½å·¥å…·ï¼Œæ”¯æŒå¹³å°: YouTube, Bç«™, æŠ–éŸ³, å¿«æ‰‹, ä¼˜é…·, è…¾è®¯è§†é¢‘, çˆ±å¥‡è‰ºç­‰ 1000+ ç½‘ç«™<br />\n<img alt=\"\" src=\"https://image.kjdaohang.com/PicGo/20260121194729405.png\" /></p>\n<p>ä¸ºä»€ä¹ˆè¯´<code>yt-dlp</code>æœ€ä¸ºæ¨èï¼Ÿä¸è®²å…¶å®ƒçš„ï¼Œå…‰Githubä¸Š<code>143k</code>çš„starï¼Œå°±èƒ½å……åˆ†è¯æ˜è¿™ç‚¹ï¼Œè¯´è¿™ä¸ªé¡¹ç›®æ˜¯Githubä¸Šæœ€ä¼Ÿå¤§çš„é¡¹ç›®ä¹‹ä¸€ï¼Œä¹Ÿä¸ä¸ºè¿‡ã€‚</p>\n<p><img alt=\"\" src=\"https://image.kjdaohang.com/PicGo/20260121194640967.png\" /></p>\n<p>é¡¹ç›®åœ°å€: <code> https://github.com/yt-dlp/yt-dlp</code></p>\n<p>ä½ è¦ç›¸ä¿¡ï¼Œä½ çš„éœ€æ±‚ï¼Œæ°¸è¿œä¸æ˜¯è¿™ä¸ªä¸–ç•Œä¸Šç¬¬ä¸€ä¸ªæå‡ºè¿™ä¸ªéœ€æ±‚çš„äººï¼Œä¹Ÿç»å¯¹ä¸æ˜¯æœ€åä¸€ä¸ªã€‚</p>\n<p>ç„¶åæŠŠä¸‹é¢è¿™æ®µæç¤ºè¯ï¼Œå‘ç»™ä½ è£…å¥½äº†skill-creatorçš„Claude Codeï¼š</p>\n<pre><code>å¸®æˆ‘æŠŠè¿™ä¸ªå¼€æºå·¥å…·https://github.com/yt-dlp/yt-dlpæ‰“åŒ…æˆä¸€ä¸ªSkillï¼Œåªè¦æˆ‘åç»­ç»™å‡ºè§†é¢‘é“¾æ¥ï¼Œå°±å¯ä»¥å¸®æˆ‘ä¸‹è½½è§†é¢‘ã€‚\n</code></pre>\n<p>æ¥ç€ï¼Œä½ åªéœ€è¦å–æ¯å’–å•¡ï¼Œç­‰å®ƒå®Œæˆå°±å¯ä»¥äº†<br />\n<img alt=\"\" src=\"https://image.kjdaohang.com/PicGo/20260121195246346.png\" /></p>\n<p><img alt=\"\" src=\"https://image.kjdaohang.com/PicGo/20260121200457340.png\" /></p>\n<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éšä¾¿æ‰¾ä¸€ä¸ªè§†é¢‘ï¼Œæµ‹è¯•éªŒè¯ä¸€ä¸‹</p>\n<p>å°±åœ¨å°çº¢ä¹¦æ‰¾ä¸€ä¸ªéŸ©ç«‹ç»“å©´çš„è§†é¢‘ï¼ˆå“ˆå“ˆï¼Œå„ä½é“å‹åº”è¯¥éƒ½çœ‹è¿‡è¿™é›†å§ï¼‰<br />\n<img alt=\"\" src=\"https://image.kjdaohang.com/PicGo/20260121200802848.png\" /></p>\n<p>é€‰æ‹©ç¬¬ä¸€ä¸ªè§†é¢‘ï¼Œå¤åˆ¶é“¾æ¥ï¼Œè¾“å…¥ä¸‹é¢çš„æç¤ºè¯ï¼š</p>\n<pre><code>å¸®æˆ‘ä¸‹è½½è¿™ä¸ªè§†é¢‘:\nhttps://www.xiaohongshu.com/discovery/item/692ac48b000000001e031b6c?source=webshare&amp;xhsshare=pc_web&amp;xsec_token=ABb9ZAeT2LidNaRo8XrZpegRyrQ7X4mSQTDbOcCDSGBXI=&amp;xsec_source=pc_share\n</code></pre>\n<p><img alt=\"\" src=\"https://image.kjdaohang.com/PicGo/20260121201006927.png\" /></p>\n<p>åªèŠ±äº†15ç§’é’Ÿçš„æ—¶é—´ï¼Œå°±æŠŠè§†é¢‘ä¸‹è½½åˆ°äº†æˆ‘çš„ç”µè„‘æ¡Œé¢ï¼Œæ‰“å¼€çœ‹äº†ä¸€ä¸‹ï¼Œè§†é¢‘å¯ä»¥æ­£å¸¸æ’­å…¥ï¼Œä¸”æ¸…æ™°åº¦è¿˜ä¸é”™ï¼Œå®Œç¾ï¼</p>\n<p>æœ€åï¼Œæˆ‘ä»¬è¿˜è¦åœ¨Claude Codeä¸­æŸ¥çœ‹ä¸€ä¸‹æœ¬åœ°å·²ç»å®‰è£…çš„skills</p>\n<pre><code>/skills\n</code></pre>\n<p><img alt=\"\" src=\"https://image.kjdaohang.com/PicGo/20260121201304364.png\" /></p>\n<h2 id=\"æœ€åè¯´ä¸¤å¥\">æœ€åè¯´ä¸¤å¥</h2>\n<p>é€šè¿‡ä¸Šé¢ä¸¤ä¸ªç®€å•çš„å®æ“æ¡ˆä¾‹ï¼Œç›¸ä¿¡å¤§å®¶å·²ç»çœŸåˆ‡æ„Ÿå—åˆ°ï¼šSkill å¸¦æ¥çš„ç»ä¸ä»…æ˜¯ã€Œä¾¿æ·ã€ï¼Œæ›´æ˜¯ä¸€ç§ã€Œæ•ˆç‡é©å‘½ã€ã€‚</p>\n<p>ç”¨ä¸€å¥è¯æ€»ç»“ Skill çš„åˆ›å»ºå…¨æµç¨‹ï¼Œæ ¸å¿ƒå°±å››ä¸ªå­—ï¼š<strong>éœ€æ±‚â†’è½åœ°</strong>ï¼š</p>\n<blockquote>\n<p>é”šå®šä¸€ä¸ªå…·ä½“éœ€æ±‚ï¼Œå€ŸåŠ© AI æŒ–æ˜ GitHub ä¸Šçš„ä¼˜è´¨å¼€æºé¡¹ç›®ï¼Œå†é€šè¿‡ AI å°†è¿™äº›é¡¹ç›®ã€ŒSkill åŒ–ã€å°è£…ï¼Œæœ€ç»ˆæ²‰æ·€ä¸ºä¸€ä¸ªä¸ªå³æ‹¿å³ç”¨ã€ç¨³å®šå¯é çš„ AI æŠ€èƒ½ã€‚</p>\n</blockquote>\n<p>è¿™è¿œä¸æ­¢èƒ½è§£å†³å›¾ç‰‡å¤„ç†ã€è§†é¢‘ä¸‹è½½è¿™ç±»å•ä¸€éœ€æ±‚ â€”â€” ä½ ç”šè‡³å¯ä»¥æŠŠè¿™äº›è¶…å®ç”¨çš„å¼€æºé¡¹ç›®æ•´åˆæ‰“åŒ…ï¼Œæ‰“é€ ä¸€ä¸ªã€Œä¸‡èƒ½ Skill å·¥å…·ç®±ã€ã€‚ä»æ­¤ï¼Œä¸å¿…å†ä¸ºå„ç±»æ ¼å¼è½¬æ¢ã€åŠŸèƒ½è°ƒç”¨æŠ˜è…¾äº”èŠ±å…«é—¨çš„å·¥å…·ï¼Œä¸€ä¸ª Skill å°±èƒ½ä¸€ç«™å¼æå®šæ‰€æœ‰åœºæ™¯ï¼</p>\n<p>æ— è®ºæ˜¯æ‰¹é‡å¤„ç†æ–‡ä»¶ã€è‡ªåŠ¨åŒ–çˆ¬å–æ•°æ®ï¼Œè¿˜æ˜¯æ™ºèƒ½åˆ†ææŠ¥è¡¨ã€å¿«é€Ÿæ­å»ºè½»é‡åº”ç”¨â€¦â€¦ è¿™äº›åœºæ™¯å…¨éƒ½èƒ½å®ç° Skill åŒ–ï¼Œå…¨éƒ½èƒ½æ— ç¼æ¥å…¥ä½ çš„ AI Agent ä½“ç³»ï¼Œæˆä¸ºä½ ä¸“å±çš„ã€Œæ ¸å¿ƒæŠ€èƒ½åŒ…ã€ï¼Œæ›´æ˜¯ä½ åº”å¯¹å„ç±»éœ€æ±‚æ—¶ï¼Œæœ€ç¡¬æ ¸ã€æœ€å¯é çš„ã€Œå¼¹è¯åº“ã€ã€‚</p>\n<p>è€Œæˆ‘ä»Šå¤©æåˆ°çš„è¿™äº›ï¼Œè¿˜ä»…ä»…æ˜¯ GitHub æµ·é‡å¼€æºé¡¹ç›®ä¸­çš„å†°å±±ä¸€è§’ã€‚</p>\n<p>æ­£å›  Skill çš„è¯ç”Ÿï¼Œæ­£å›  AI Agent çš„å¼ºå¤§èµ‹èƒ½ï¼Œå¦‚ä»Šï¼Œæ¯ä¸€ä¸ªæ™®é€šäººéƒ½èƒ½ç«™åœ¨ã€Œå·¨äººçš„è‚©è†€ã€ä¸Š â€”â€” äººç±»è¿‡å»æ•°åå¹´ç§¯ç´¯çš„æŠ€æœ¯æˆæœã€å¼€æºæ™ºæ…§ï¼Œä¸å†æ˜¯å°‘æ•°å¼€å‘è€…çš„ä¸“å±ï¼Œåªè¦ä½ æƒ³ï¼Œå°±èƒ½ä¸€é”®è°ƒç”¨ï¼Œä¸ºä½ æ‰€ç”¨ã€‚</p>\n\n</div>\n<div id=\"MySignature\">\n    æŠ€æœ¯æ”¹å˜ä¸–ç•Œï¼\n         --ç‹‚è¯—ç»å‰‘\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-23 08:38</span>&nbsp;\n<a href=\"https://www.cnblogs.com/jinjiangongzuoshi\">ç‹‚å¸ˆ</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">15</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹äº”ï¼šè‡ªç„¶è¯­è¨€å¤„ç†  ç¬¬äºŒå‘¨ï¼šè¯åµŒå…¥ï¼ˆå››ï¼‰åˆ†å±‚ softmax å’Œè´Ÿé‡‡æ ·",
      "link": "https://www.cnblogs.com/Goblinscholar/p/19519181",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/Goblinscholar/p/19519181\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-22 22:28\">\n    <span>å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹äº”ï¼šè‡ªç„¶è¯­è¨€å¤„ç†  ç¬¬äºŒå‘¨ï¼šè¯åµŒå…¥ï¼ˆå››ï¼‰åˆ†å±‚ softmax å’Œè´Ÿé‡‡æ ·</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<p>æ­¤åˆ†ç±»ç”¨äºè®°å½•å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹çš„å­¦ä¹ ç¬”è®°ã€‚<br />\nè¯¾ç¨‹ç›¸å…³ä¿¡æ¯é“¾æ¥å¦‚ä¸‹ï¼š</p>\n<ol>\n<li>åŸè¯¾ç¨‹è§†é¢‘é“¾æ¥ï¼š<a href=\"https://www.bilibili.com/video/BV1FT4y1E74V?buvid=XU762317353676D786954061C192FE625463B&amp;from_spmid=playlist.playlist-detail.0.0&amp;is_story_h5=false&amp;mid=zqernykrmpf7XfIorMR%2FnA%3D%3D&amp;plat_id=116&amp;share_from=ugc&amp;share_medium=android&amp;share_plat=android&amp;share_session_id=ce0bc526-db69-428a-962e-c65ed8c267bc&amp;share_source=COPY&amp;share_tag=s_i&amp;spmid=united.player-video-detail.0.0&amp;timestamp=1713085655&amp;unique_k=DfBgvFW&amp;up_id=8654113&amp;vd_source=e035e9878d32f414b4354b839a4c31a4\" rel=\"noopener nofollow\" target=\"_blank\">[åŒè¯­å­—å¹•]å´æ©è¾¾æ·±åº¦å­¦ä¹ deeplearning.ai</a></li>\n<li>githubè¯¾ç¨‹èµ„æ–™ï¼Œå«è¯¾ä»¶ä¸ç¬”è®°:<a href=\"https://github.com/robbertliu/deeplearning.ai-andrewNG\" rel=\"noopener nofollow\" target=\"_blank\">å´æ©è¾¾æ·±åº¦å­¦ä¹ æ•™å­¦èµ„æ–™</a></li>\n<li>è¯¾ç¨‹é…å¥—ç»ƒä¹ ï¼ˆä¸­è‹±ï¼‰ä¸ç­”æ¡ˆï¼š<a href=\"https://blog.csdn.net/u013733326/article/details/79827273\" rel=\"noopener nofollow\" target=\"_blank\">å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾åä¹ é¢˜ä¸ç­”æ¡ˆ</a></li>\n</ol>\n<p>æœ¬ç¯‡ä¸ºç¬¬äº”è¯¾çš„ç¬¬äºŒå‘¨å†…å®¹ï¼Œ<a href=\"https://www.bilibili.com/video/BV1FT4y1E74V?spm_id_from=333.788.videopod.episodes&amp;vd_source=e035e9878d32f414b4354b839a4c31a4&amp;p=169\" rel=\"noopener nofollow\" target=\"_blank\">2.7</a>çš„å†…å®¹ä»¥åŠä¸€äº›ç›¸å…³çŸ¥è¯†çš„è¡¥å……ã€‚</p>\n<hr />\n<p>æœ¬å‘¨ä¸ºç¬¬äº”è¯¾çš„ç¬¬äºŒå‘¨å†…å®¹ï¼Œä¸ CV ç›¸å¯¹åº”çš„ï¼Œè¿™ä¸€è¯¾æ‰€æœ‰å†…å®¹çš„ä¸­å¿ƒåªæœ‰ä¸€ä¸ªï¼š<strong>è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNatural Language Processingï¼ŒNLPï¼‰</strong>ã€‚<br />\nåº”ç”¨åœ¨æ·±åº¦å­¦ä¹ é‡Œï¼Œå®ƒæ˜¯ä¸“é—¨ç”¨æ¥è¿›è¡Œ<strong>æ–‡æœ¬ä¸åºåˆ—ä¿¡æ¯å»ºæ¨¡</strong>çš„æ¨¡å‹å’ŒæŠ€æœ¯ï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨å…¨è¿æ¥ç½‘ç»œä¸ç»Ÿè®¡è¯­è¨€æ¨¡å‹åŸºç¡€ä¸Šçš„ä¸€æ¬¡â€œç»“æ„åŒ–ç‰¹åŒ–â€ï¼Œä¹Ÿæ˜¯äººå·¥æ™ºèƒ½ä¸­<strong>æœ€è´´è¿‘äººç±»æ€ç»´è¡¨è¾¾æ–¹å¼</strong>çš„é‡è¦ç ”ç©¶æ–¹å‘ä¹‹ä¸€ã€‚<br />\n<strong>è¿™ä¸€æ•´èŠ‚è¯¾åŒæ ·æ¶‰åŠå¤§é‡éœ€è¦åå¤æ¶ˆåŒ–çš„å†…å®¹ï¼Œæ¨ªè·¨æœºå™¨å­¦ä¹ ã€æ¦‚ç‡ç»Ÿè®¡ã€çº¿æ€§ä»£æ•°ä»¥åŠè¯­è¨€å­¦ç›´è§‰ã€‚</strong><br />\nè¯­è¨€ä¸åƒå›¾åƒé‚£æ ·â€œç›´è§‚å¯è§â€ï¼Œæ›´å¤šæ˜¯æŠ½è±¡ç¬¦å·ä¸ä¸Šä¸‹æ–‡å…³ç³»çš„ç»„åˆï¼Œå› æ­¤<strong>ç†è§£é—¨æ§›åè€Œæ›´é«˜</strong>ã€‚<br />\nå› æ­¤ï¼Œæˆ‘åŒæ ·ä¼šå°½é‡è¡¥è¶³å¿…è¦çš„èƒŒæ™¯çŸ¥è¯†ï¼Œå°½å¯èƒ½ç”¨æ¯”å–»å’Œå®ä¾‹é™ä½ç†è§£éš¾åº¦ã€‚<br />\næœ¬å‘¨çš„å†…å®¹å…³äºè¯åµŒå…¥ï¼Œæ˜¯ä¸€ç§<strong>ç›¸å¯¹äºç‹¬çƒ­ç¼–ç ï¼Œæ›´èƒ½ä¿ç•™è¯­ä¹‰ä¿¡æ¯çš„æ–‡æœ¬ç¼–ç æ–¹å¼</strong>ã€‚é€šè¿‡è¯åµŒå…¥ï¼Œæ¨¡å‹ä¸å†åªæ˜¯â€œè®°ä½â€è¯æœ¬èº«ï¼Œè€Œæ˜¯èƒ½å¤Ÿ<strong>åŸºäºè¯­ä¹‰å…³ç³»è¿›è¡Œæ³›åŒ–</strong>ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå®ç°ç±»ä¼¼â€œ<strong>ä¸¾ä¸€åä¸‰</strong>â€çš„æ•ˆæœã€‚è¯åµŒå…¥æ˜¯ NLP é¢†åŸŸä¸­æœ€é‡è¦çš„åŸºç¡€æŠ€æœ¯ä¹‹ä¸€ã€‚</p>\n<p>æœ¬ç¯‡çš„å†…å®¹å…³äº<strong>åˆ†å±‚ softmax å’Œè´Ÿé‡‡æ ·</strong>ï¼Œæ˜¯ç”¨æ¥æå‡è¯åµŒå…¥æ¨¡å‹è®­ç»ƒæ•ˆç‡ï¼ŒèŠ‚çœè®¡ç®—å¼€é”€çš„æŠ€æœ¯ã€‚</p>\n<h1 id=\"1-åˆ†å±‚-softmax\">1. åˆ†å±‚ softmax</h1>\n<p>åœ¨ä¸Šä¸€ç¯‡ä»‹ç» <a href=\"https://www.cnblogs.com/Goblinscholar/p/19504549\" target=\"_blank\">Word2Vec</a> çš„æ—¶å€™ï¼Œæˆ‘ä»¬é»˜è®¤ä½¿ç”¨çš„æ˜¯<strong>æ ‡å‡† softmax</strong> æ¥è®¡ç®—è¾“å‡ºå±‚çš„æ¦‚ç‡åˆ†å¸ƒã€‚ä½†å¦‚æœç¨å¾®åœä¸‹æ¥ä»”ç»†æƒ³ä¸€æƒ³ï¼Œå°±ä¼šç«‹åˆ»æ„è¯†åˆ°ä¸€ä¸ªé—®é¢˜ï¼š<strong>åœ¨å¤§è¯è¡¨åœºæ™¯ä¸‹ï¼Œæ ‡å‡† softmax å‡ ä¹æ˜¯ä¸å¯ç”¨çš„ã€‚</strong></p>\n<p>ä¸‹é¢æˆ‘ä»¬åˆ†ç‚¹æ¥å±•å¼€æ ‡å‡† softmax åœ¨è¯åµŒå…¥ä¸­çš„å±€é™å’Œåˆ†å±‚ softmax çš„æ€æƒ³ï¼š</p>\n<h2 id=\"11-æ ‡å‡†-softmax-çš„è®¡ç®—å¼€é”€\">1.1 æ ‡å‡† softmax çš„è®¡ç®—å¼€é”€</h2>\n<p>åœ¨ä¹‹å‰çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åå¤å¼ºè°ƒè¿‡ä¸€ç‚¹ï¼š<strong>è¾“å‡ºå±‚çš„ç¥ç»å…ƒä¸ªæ•°ä¸è¯å…¸å¤§å°å®Œå…¨ä¸€è‡´</strong>ã€‚<br />\nè¿™æ˜¯å› ä¸ºï¼Œåœ¨ Word2Vec çš„å»ºæ¨¡è§†è§’ä¸‹ï¼Œé¢„æµ‹è¿‡ç¨‹æœ¬è´¨ä¸Šå¯ä»¥è¢«çœ‹ä½œä¸€ä¸ª<strong>å•æ ‡ç­¾åˆ†ç±»é—®é¢˜</strong>ï¼š</p>\n<ul>\n<li>ç›®æ ‡è¯å¯¹åº”â€œæ­£ç¡®ç±»åˆ«â€</li>\n<li>è¯è¡¨ä¸­å…¶ä½™æ‰€æœ‰è¯éƒ½å¯¹åº”â€œé”™è¯¯ç±»åˆ«â€</li>\n</ul>\n<p>å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ softmax å°†æ¨¡å‹è¾“å‡ºæ˜ å°„ä¸ºä¸€ä¸ª<strong>å¯¹æ•´ä¸ªè¯è¡¨çš„æ¦‚ç‡åˆ†å¸ƒ</strong>ï¼Œå¹¶åœ¨åå‘ä¼ æ’­é˜¶æ®µä¸æ–­<strong>å¼ºåŒ–æ­£ç¡®é¢„æµ‹ã€æŠ‘åˆ¶é”™è¯¯é¢„æµ‹</strong>ã€‚</p>\n<p>ä»å»ºæ¨¡é€»è¾‘ä¸Šçœ‹ï¼Œè¿™ä¸€è¿‡ç¨‹æ˜¯å®Œå…¨åˆç†çš„ï¼Œä½†çœŸæ­£çš„é—®é¢˜ï¼Œå¹¶ä¸å‡ºåœ¨â€œå¯¹ä¸å¯¹â€ï¼Œè€Œæ˜¯â€œèƒ½ä¸èƒ½å®ç°â€ã€‚</p>\n<p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ NLP ä»»åŠ¡ä¸­ï¼Œå¦‚æœå¸Œæœ›æ¨¡å‹å…·å¤‡æ›´å¼ºçš„æ³›åŒ–èƒ½åŠ›ï¼Œç¬¬ä¸€æ­¥å¾€å¾€å°±æ˜¯<strong>æ‰©å¤§è¯­æ–™è§„æ¨¡</strong>ï¼Œè¿›è€Œæ„å»ºæ›´å¤§çš„è¯å…¸ã€‚<br />\nè€Œå½“æˆ‘ä»¬å¸Œæœ›æ¨¡å‹åœ¨ç°å®åœºæ™¯ä¸­â€œçœŸæ­£å¥½ç”¨â€æ—¶ï¼Œå…¶æ€§èƒ½æŒ‡æ ‡å¾€å¾€éœ€è¦ä¸æ–­é€¼è¿‘ï¼Œç”šè‡³å°è¯•è¶…è¶Šæˆ‘ä»¬ä¹‹å‰ä»‹ç»è¿‡çš„<a href=\"https://www.cnblogs.com/Goblinscholar/p/19274215\" target=\"_blank\">è´å¶æ–¯æœ€ä¼˜é”™è¯¯ç‡</a>ã€‚<br />\nåœ¨è¿™ä¸ªæ„ä¹‰ä¸Šï¼Œè¯å…¸è§„æ¨¡å¹¶ä¸æ˜¯ä¸€ä¸ªå¯æœ‰å¯æ— çš„å·¥ç¨‹å‚æ•°ï¼Œè€Œæ˜¯æ¨¡å‹èƒ½åŠ›çš„<strong>ç¡¬ä¸Šé™</strong>ã€‚</p>\n<p>ä¸€ä¸ªç›´è§‚çš„ç±»æ¯”å°±æ˜¯ï¼š<strong>äººç±»çš„å¤§è„‘ç©¶ç«Ÿâ€œè®°ä½â€äº†å¤šå°‘è¯ï¼Ÿ</strong> æ˜¾ç„¶ï¼Œè¿™ç»ä¸æ˜¯ä¸€ä¸ªå¯ä»¥ç”¨â€œå‡ åƒâ€æˆ–â€œå‡ ä¸‡â€æ¥æè¿°çš„æ•°é‡çº§ã€‚</p>\n<p>é—®é¢˜ä¹Ÿæ­£æ˜¯åœ¨è¿™é‡Œå¼€å§‹æ˜¾ç°çš„ï¼šå¯¹äºä¸€æ¬¡æ ‡å‡† softmax è®¡ç®—è€Œè¨€ï¼Œå¦‚æœè¯è¡¨å¤§å°ä¸º <span class=\"math inline\">\\(|V|\\)</span>ï¼Œé‚£ä¹ˆæ¨¡å‹åœ¨è¾“å‡ºå±‚éœ€è¦å®Œæˆçš„æ“ä½œåŒ…æ‹¬ï¼š</p>\n<ol>\n<li>å¯¹ <strong><span class=\"math inline\">\\(|V|\\)</span> ä¸ªè¯å‘é‡</strong> åˆ†åˆ«è®¡ç®—å†…ç§¯ã€‚</li>\n<li>å¯¹ <strong><span class=\"math inline\">\\(|V|\\)</span> ä¸ªå¾—åˆ†</strong> è¿›è¡ŒæŒ‡æ•°è¿ç®—ã€‚</li>\n<li>å¯¹æ‰€æœ‰ç»“æœæ±‚å’Œå¹¶å®Œæˆå½’ä¸€åŒ–ã€‚</li>\n</ol>\n<p>å…¶è®¡ç®—å½¢å¼å¯ä»¥å†™æˆï¼š</p>\n<p></p><div class=\"math display\">\\[P(w_o \\mid w_c)=\n\n\\frac{\\exp(\\mathbf{u}_{w_o}^\\top \\mathbf{v}_{w_c})}  \n{\\sum_{w \\in V} \\exp(\\mathbf{u}_w^\\top \\mathbf{v}_{w_c})}  \n\\]</div><p></p><p>æ³¨æ„ï¼Œè¿™é‡Œçœç•¥äº† softmax è¾“å‡ºå±‚çš„åç½®é¡¹ï¼Œåœ¨ Word2Vec çš„å®é™…å»ºæ¨¡ä¸å®ç°ä¸­ï¼Œè¯¥åç½®å¯¹è¯å‘é‡è¯­ä¹‰ç»“æ„çš„å½±å“é€šå¸¸å¯ä»¥å¿½ç•¥ï¼Œè¿™æ˜¯å¾ˆç®€å•çš„é“ç†ï¼š<strong>æˆ‘ä»¬éœ€è¦åˆ»ç”»å‘é‡é—´çš„è·ç¦»å…³ç³»ï¼Œè€Œåç½®å¸¦æ¥çš„æ•´ä½“å¹³ç§»æ˜¾ç„¶æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚</strong></p>\n<p>å›åˆ°æ­£é¢˜ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>å“ªæ€•æˆ‘ä»¬åªå…³å¿ƒä¸€ä¸ªç›®æ ‡è¯çš„æ¦‚ç‡</strong>ï¼Œ æ¨¡å‹ä»ç„¶å¿…é¡»å¯¹<strong>æ•´ä¸ªè¯è¡¨ä¸­çš„æ‰€æœ‰è¯</strong>å„è®¡ç®—ä¸€éæ‰“åˆ†ã€‚</p>\n<p>å› æ­¤ï¼Œæ¯ä¸€ä¸ªè®­ç»ƒæ ·æœ¬åœ¨è¾“å‡ºå±‚çš„<strong>è®¡ç®—å¤æ‚åº¦éƒ½æ˜¯ï¼š<span class=\"math inline\">\\(O(|V|)\\)</span>ã€‚</strong><br />\nå½“ <span class=\"math inline\">\\(|V|\\)</span> åªæœ‰å‡ åƒæ—¶ï¼Œè¿™ä¸ªä»£ä»·å°šå¯æ¥å—ï¼Œä½†ä¸€æ—¦è¯å…¸è§„æ¨¡è¾¾åˆ°å‡ åä¸‡ã€ç”šè‡³ä¸Šç™¾ä¸‡çº§åˆ«ï¼Œè¿™ä¸€æ­¥è®¡ç®—å°±ä¼šè¿…é€Ÿæˆä¸ºè®­ç»ƒè¿‡ç¨‹ä¸­çš„ä¸»è¦ç“¶é¢ˆã€‚<br />\næ¢å¥è¯è¯´ï¼Œ<strong>æ ‡å‡† softmax çš„è®¡ç®—æˆæœ¬ä¸è¯è¡¨è§„æ¨¡çº¿æ€§ç›¸å…³</strong>ï¼Œè¿™ä¸€æ€§è´¨åœ¨å¤§è¯è¡¨åœºæ™¯ä¸‹æ˜¯æ— æ³•å›é¿çš„ã€‚<br />\nç”¨æˆ‘ä»¬ä¹‹å‰çš„å†…å®¹æ¥ç±»æ¯”ä¸€ä¸‹ï¼š<strong>ä½ è§è¿‡å‡ ç™¾ä¸‡ç±»åˆ«çš„åˆ†ç±»æ¨¡å‹å—ï¼Ÿ</strong><br />\nä¹Ÿæ­£æ˜¯åœ¨è¿™æ ·çš„èƒŒæ™¯ä¸‹ï¼Œæˆ‘ä»¬ä¸å¾—ä¸æ€è€ƒæ–°çš„é—®é¢˜ï¼š <strong>å¯ä¸å¯ä»¥åœ¨ä¸æ˜¾å¼éå†æ•´ä¸ªè¯è¡¨çš„å‰æä¸‹ï¼Œå®Œæˆå¯¹ç›®æ ‡è¯çš„æœ‰æ•ˆå»ºæ¨¡ï¼Ÿ</strong><br />\n<img alt=\"image.png\" src=\"https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260122222725445-514225875.png\" /><br />\näºæ˜¯ï¼ŒWord2Vec æå‡ºäº†ç¬¬ä¸€ç§åŠ é€Ÿç­–ç•¥ï¼š<strong>åˆ†å±‚ softmax</strong>ã€‚</p>\n<h2 id=\"12-å“ˆå¤«æ›¼æ ‘\">1.2 å“ˆå¤«æ›¼æ ‘</h2>\n<p>å“ˆå¤«æ›¼æ˜¯å…¶å®æ˜¯æ•°æ®ç»“æ„é‡Œçš„å†…å®¹ï¼Œæˆ‘ä»¬çœ‹çœ‹å®ƒåœ¨åˆ†å±‚softmaxä¸­å®ç°çš„æ•ˆæœã€‚</p>\n<p>å“ˆå¤«æ›¼æ ‘æœ€æ—©è¢«ç”¨äº<strong>æ— æŸæ•°æ®å‹ç¼©</strong>ï¼Œå…¶æ ¸å¿ƒæ€æƒ³å¯ä»¥æ¦‚æ‹¬ä¸ºä¸€å¥è¯ï¼š<strong>å‡ºç°é¢‘ç‡è¶Šé«˜çš„ç¬¦å·ï¼Œç¼–ç è¶ŠçŸ­ï¼›å‡ºç°é¢‘ç‡è¶Šä½çš„ç¬¦å·ï¼Œç¼–ç è¶Šé•¿ã€‚</strong> é€šè¿‡è¿™ç§æ–¹å¼ï¼Œ<strong>é«˜é¢‘ç¬¦å·æ‹¥æœ‰æ›´çŸ­çš„è·¯å¾„é•¿åº¦</strong>ï¼Œä»è€Œåœ¨æ•´ä½“æ„ä¹‰ä¸‹æœ€å°åŒ–ç¼–ç çš„æœŸæœ›é•¿åº¦ã€‚</p>\n<p>åœ¨ åˆ†å±‚softmax ä¸­ï¼Œå¹¶æ²¡æœ‰ä½¿ç”¨å…¶å‹ç¼©ç¼–ç çš„é€»è¾‘ï¼Œè€Œæ˜¯é‡ç‚¹åˆ©ç”¨å“ˆå¤«æ›¼æ ‘ä¸­<strong>é«˜é¢‘ç¬¦å·æ‹¥æœ‰æ›´çŸ­çš„è·¯å¾„é•¿åº¦</strong>çš„ç‰¹ç‚¹æ¥ç»„ç»‡è¯è¡¨å¹¶ä¼˜åŒ–ä¼ æ’­é€»è¾‘ï¼Œå®ƒçš„è¿‡ç¨‹å¦‚ä¸‹ï¼š<br />\n<img alt=\"image.png\" src=\"https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260122222708870-226555105.png\" /></p>\n<p>å†å…·ä½“æ¥è¯´ï¼ŒWord2Vec çš„åˆ†å±‚ softmax å°†è¯è¡¨ç»„ç»‡æˆå“ˆå¤«æ›¼æ ‘çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p>\n<ol>\n<li><strong>ç»Ÿè®¡è¯é¢‘</strong>ï¼šé¦–å…ˆå¯¹è¯­æ–™åº“ä¸­çš„æ¯ä¸ªè¯è®¡ç®—å‡ºç°é¢‘ç‡ï¼Œé¢‘ç‡è¶Šé«˜çš„è¯è¡¨ç¤ºè¶Šå¸¸è§ï¼Œä¹Ÿå°±è¶Šå¯èƒ½åœ¨è®­ç»ƒä¸­è¢«è®¿é—®å¤šæ¬¡ã€‚</li>\n<li><strong>æ„å»ºå“ˆå¤«æ›¼æ ‘</strong>ï¼š\n<ul>\n<li>å°†æ¯ä¸ªè¯ä½œä¸ºå¶å­èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹æƒé‡ = è¯é¢‘ï¼›</li>\n<li>ä»æœ€å°æƒé‡çš„ä¸¤ä¸ªèŠ‚ç‚¹å¼€å§‹åˆå¹¶ï¼Œç”Ÿæˆæ–°çš„çˆ¶èŠ‚ç‚¹ï¼Œæƒé‡ä¸ºå­èŠ‚ç‚¹æƒé‡ä¹‹å’Œï¼›</li>\n<li>é‡å¤æ­¤è¿‡ç¨‹ï¼Œç›´åˆ°åªå‰©ä¸‹æ ¹èŠ‚ç‚¹ã€‚<br />\né€šè¿‡è¿™ç§æ–¹å¼ï¼Œé«˜é¢‘è¯è‡ªç„¶é è¿‘æ ¹èŠ‚ç‚¹ï¼Œä½é¢‘è¯é è¿‘å¶å­ï¼Œä»è€Œä¿è¯<strong>é¢‘ç¹è®¿é—®çš„è¯è·¯å¾„çŸ­</strong>ã€‚</li>\n</ul>\n</li>\n<li><strong>è·¯å¾„ä½œä¸ºæ¦‚ç‡è®¡ç®—åºåˆ—</strong>ï¼š\n<ul>\n<li>æ¯æ¡ä»æ ¹åˆ°å¶å­çš„è·¯å¾„å¯¹åº”ä¸€æ¬¡æ¦‚ç‡è®¡ç®—çš„åºåˆ—ï¼šæ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„é€‰æ‹©å¯ä»¥çœ‹ä½œä¸€æ¬¡äºŒåˆ†ç±»ï¼ˆæ˜¯å¦æ²¿å·¦/å³åˆ†æ”¯èµ°ï¼‰ã€‚</li>\n<li>ç›®æ ‡è¯çš„æ¦‚ç‡ = è·¯å¾„ä¸Šæ‰€æœ‰äºŒåˆ†ç±»æ¦‚ç‡çš„ä¹˜ç§¯ã€‚</li>\n</ul>\n</li>\n<li><strong>é™ä½è®­ç»ƒå¼€é”€</strong>ï¼š\n<ul>\n<li>é«˜é¢‘è¯è·¯å¾„çŸ­ â†’ æ›´æ–°æ¢¯åº¦çš„èŠ‚ç‚¹å°‘ â†’ æ¯æ¬¡è®­ç»ƒæ ·æœ¬è®¡ç®—é‡å°ã€‚</li>\n<li>ä½é¢‘è¯è·¯å¾„é•¿ â†’ è™½ç„¶èŠ‚ç‚¹å¤šï¼Œä½†è®­ç»ƒä¸­å‡ºç°é¢‘ç‡ä½ï¼Œå¯¹æ•´ä½“è®­ç»ƒå¼€é”€å½±å“å°ã€‚</li>\n<li>æ•´ä½“è€Œè¨€ï¼Œ<strong>å¹³å‡è®¡ç®—å¤æ‚åº¦ä» <span class=\"math inline\">\\(O(|V|)\\)</span> é™åˆ° <span class=\"math inline\">\\(O(\\log |V|)\\)</span></strong>ï¼Œæå¤§æå‡äº†å¤§è¯è¡¨åœºæ™¯ä¸‹çš„è®­ç»ƒæ•ˆç‡ã€‚</li>\n</ul>\n</li>\n</ol>\n<p>åªçœ‹åˆ°è¿™é‡Œï¼Œå¯èƒ½è¿˜æ˜¯æœ‰äº›æ¨¡ç³Šï¼Œæˆ‘ä»¬ä»¥ CBOW ä¸ºä¾‹ï¼Œæ¥çœ‹çœ‹ä½¿ç”¨åˆ†å±‚ softmax çš„æ•´ä½“ç½‘ç»œç»“æ„å’Œä¼ æ’­è¿‡ç¨‹ã€‚</p>\n<h2 id=\"13--cbow-ä¸­çš„åˆ†å±‚-softmax\">1.3  CBOW ä¸­çš„åˆ†å±‚ softmax</h2>\n<p><img alt=\"image.png\" src=\"https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260122222724875-338795043.png\" /><br />\nè¿™æ ·ï¼Œæœ€ç»ˆæ•ˆæœæ˜¯ï¼šä¸€<strong>ä¸ªåŸæœ¬åŒ…å«å‡ ç™¾ä¸‡ç±»åˆ«çš„è¾“å‡ºé—®é¢˜ï¼Œè¢«åˆ†è§£æˆäº†ä¸€ç³»åˆ—äºŒåˆ†ç±»é—®é¢˜ã€‚</strong><br />\nåœ¨æ¯æ¬¡è®­ç»ƒæ—¶ï¼Œç½‘ç»œåªéœ€æ›´æ–°ç›®æ ‡è¯è·¯å¾„ä¸Šçš„ç›¸å…³èŠ‚ç‚¹å‚æ•°ï¼Œè€Œä¸å¿…è§¦åŠæ•´ä¸ªè¾“å‡ºå±‚ï¼Œä»è€Œå¤§å¹…èŠ‚çœè®¡ç®—å¼€é”€ã€‚<br />\nåŒæ—¶ï¼Œç”±äºå“ˆå¤«æ›¼æ ‘å¤©ç„¶æŒ‰ç…§è¯é¢‘ç»„ç»‡ï¼Œé«˜é¢‘è¯ä½äºé è¿‘æ ¹èŠ‚ç‚¹çš„è·¯å¾„ä¸Šï¼Œä½¿å¾—è¿™äº›è¯çš„æ›´æ–°è·¯å¾„æ›´çŸ­ã€è®¿é—®æ›´å¿«ã€‚è¿™ä¸ä»…åŠ é€Ÿäº†é«˜é¢‘è¯çš„å­¦ä¹ ï¼Œä¹Ÿè®©æ•´ä½“è®­ç»ƒè¿‡ç¨‹æ›´åŠ é«˜æ•ˆã€‚</p>\n<p>è¿™ä¾¿æ˜¯åˆ†å±‚ softmax çš„åŸç†ï¼Œå¦‚æœä»å®é™…åº”ç”¨ä¸Šæ¥è¯´ï¼Œä½ ä¹Ÿå¯ä»¥å«å®ƒâ€å †å  sigmoidâ€œï¼Œè€Œ CBOW ä¾¿å¸¸å¸¸å’Œåˆ†å±‚ softmax  æ­é…ä½¿ç”¨ã€‚</p>\n<p>ä¸‹é¢æˆ‘ä»¬ä¾¿æ¥çœ‹çœ‹å¦ä¸€ç§åŠ é€Ÿç­–ç•¥ï¼šè´Ÿé‡‡æ ·ã€‚</p>\n<h1 id=\"2-è´Ÿé‡‡æ ·negative-sampling\">2. è´Ÿé‡‡æ ·ï¼ˆNegative Samplingï¼‰</h1>\n<p>å¦‚æœè¯´åˆ†å±‚ softmax æ˜¯ä¸€ç§<strong>ç»“æ„å±‚é¢çš„åŠ é€Ÿ</strong>ï¼Œé‚£ä¹ˆè´Ÿé‡‡æ ·æ›´åƒæ˜¯ä¸€ç§<strong>ä»ç›®æ ‡å‡½æ•°å±‚é¢â€œæ”¹é—®é¢˜â€çš„æ–¹æ³•</strong>ã€‚<br />\nå®ƒçš„å‡ºå‘ç‚¹éå¸¸ç›´æ¥ï¼š<strong>æˆ‘ä»¬çœŸçš„æœ‰å¿…è¦åœ¨è®­ç»ƒæ—¶åŒºåˆ†â€œç›®æ ‡è¯â€å’Œâ€œæ‰€æœ‰éç›®æ ‡è¯â€å—ï¼Ÿ</strong><br />\nç­”æ¡ˆæ˜¯ï¼š<strong>ä¸éœ€è¦</strong>ã€‚<br />\nç›¸è¾ƒäºåˆ†å±‚ softmaxï¼Œè´Ÿé‡‡æ ·çš„æ€æƒ³æ›´åŠ æœ´ç´ ã€å®ç°ä¹Ÿæ›´åŠ ç®€å•ã€‚åœ¨å®é™…å·¥ç¨‹ä¸­ï¼Œå®ƒå‡ ä¹å¯ä»¥çœ‹ä½œæ˜¯ <strong>Skip-gram çš„é»˜è®¤æ­æ¡£</strong>ï¼Œä¹Ÿæ˜¯ Word2Vec æœ€å¸¸è¢«ä½¿ç”¨çš„è®­ç»ƒæ–¹å¼ä¹‹ä¸€ã€‚</p>\n<p>è´Ÿé‡‡æ ·çš„æ ¸å¿ƒæ€æƒ³å¯ä»¥æ¦‚æ‹¬ä¸ºä¸€å¥è¯ï¼š<strong>åªæŒ‘é€‰å°‘é‡è´Ÿæ ·æœ¬è¿›è¡Œè®­ç»ƒï¼Œè€Œééå†æ•´ä¸ªè¯è¡¨</strong>ã€‚æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬åªå…³å¿ƒâ€œæ­£ç¡®è¯ + ä¸€äº›éšæœºæŒ‘é€‰çš„é”™è¯¯è¯â€ï¼Œå…¶ä»–çš„å…¨ä½“è¯ä¸å‚ä¸è®¡ç®—ã€‚<br />\nè¿™æ ·ï¼Œè®¡ç®—é‡ä» <span class=\"math inline\">\\(O(|V|)\\)</span> ç›´æ¥é™åˆ°äº† <span class=\"math inline\">\\(O(k)\\)</span>ï¼Œå…¶ä¸­ <span class=\"math inline\">\\(k\\)</span> æ˜¯è´Ÿæ ·æœ¬çš„æ•°é‡ï¼ˆé€šå¸¸ <span class=\"math inline\">\\(5 \\sim 20\\)</span>ï¼‰ã€‚</p>\n<p>æˆ‘ä»¬ä»¥ Skip-gram ä¸ºä¾‹æ¥æ¼”ç¤ºè´Ÿé‡‡æ ·çš„åŸç†ï¼š</p>\n<h2 id=\"21-ç¡®å®šæ­£è´Ÿæ ·æœ¬\">2.1 ç¡®å®šæ­£è´Ÿæ ·æœ¬</h2>\n<p>ä½¿ç”¨è´Ÿé‡‡æ ·çš„ç¬¬ä¸€æ­¥æ˜¯ç¡®å®šæ­£è´Ÿæ ·æœ¬ï¼Œè¿™ä¸€è¿‡ç¨‹åŒæ ·å®¹æ˜“ç†è§£ï¼Œæ¥çœ‹çœ‹ï¼š<br />\n<img alt=\"image.png\" src=\"https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260122222401494-1883957489.png\" /><br />\nå…¶ä¸­ï¼š</p>\n<ul>\n<li><strong>æ­£æ ·æœ¬</strong>ï¼šç”±çœŸå®è¯­æ–™ä¸­å‡ºç°çš„ä¸Šä¸‹æ–‡è¯æ„æˆï¼›</li>\n<li><strong>è´Ÿæ ·æœ¬</strong>ï¼šä»è¯è¡¨ä¸­éšæœºæŠ½å–ï¼Œä½†å¹¶ä¸å‡ºç°åœ¨å½“å‰ä¸Šä¸‹æ–‡ä¸­çš„è¯ã€‚</li>\n</ul>\n<p>è¿™é‡Œå±•å¼€ä¸€ç‚¹ï¼Œå¯¹äºè´Ÿæ ·æœ¬çš„é‡‡æ ·ï¼Œæˆ‘ä»¬å¸¸å¸¸ä½¿ç”¨ä¸‹é¢è¿™ä¸ªå…¬å¼ï¼š</p>\n<p></p><div class=\"math display\">\\[P(w) \\propto U(w)^{3/4}\n\\]</div><p></p><ul>\n<li><span class=\"math inline\">\\(P(w)\\)</span>ï¼šè¡¨ç¤º<strong>åœ¨è´Ÿé‡‡æ ·ä¸­æŠ½åˆ°è¯ <span class=\"math inline\">\\(w\\)</span> çš„æ¦‚ç‡</strong>ã€‚</li>\n<li><span class=\"math inline\">\\(U(w)\\)</span>ï¼šè¡¨ç¤ºè¯ <span class=\"math inline\">\\(w\\)</span> åœ¨æ•´ä¸ªè¯­æ–™åº“ä¸­çš„<strong>å‡ºç°é¢‘ç‡</strong>ã€‚</li>\n<li><span class=\"math inline\">\\(\\propto\\)</span>ï¼šè¡¨ç¤ºâ€œ<strong>ä¸â€¦â€¦æˆæ­£æ¯”</strong>â€ï¼Œæ„æ€æ˜¯æˆ‘ä»¬å…ˆæŒ‰è¿™ä¸ªè§„åˆ™ç»™æ¯ä¸ªè¯ä¸€ä¸ªæƒé‡ï¼Œå†å½’ä¸€åŒ–æˆæ¦‚ç‡ã€‚</li>\n</ul>\n<p>è¯­è¨€æè¿°å°±æ˜¯ï¼šå…ˆç®—æ¯ä¸ªè¯çš„è¯é¢‘çš„å››åˆ†ä¹‹ä¸‰æ¬¡æ–¹ï¼Œç„¶åæŠŠå®ƒä»¬é™¤ä»¥æ‰€æœ‰è¯çš„è¯é¢‘çš„å››åˆ†ä¹‹ä¸‰æ¬¡æ–¹ ä¹‹å’Œï¼Œå°±å¾—åˆ°æœ€ç»ˆæŠ½æ ·æ¦‚ç‡ <span class=\"math inline\">\\(P(w)\\)</span>ï¼š</p>\n<p></p><div class=\"math display\">\\[P(w) = \\frac{U(w)^{3/4}}{\\sum_{w' \\in V} U(w')^{3/4}}  \n\\]</div><p></p><p>è¿™ä¸ªå…¬å¼å®é™…ä¸Šåšçš„æ˜¯è¿™æ ·çš„å·¥ä½œï¼š</p>\n<ol>\n<li>å¯¹é«˜é¢‘è¯åšäº†<strong>é™æƒ</strong>ï¼ˆæ¯”åŸå§‹è¯é¢‘ä½ä¸€äº›ï¼‰ï¼Œå‡å°‘å®ƒä»¬åœ¨è´Ÿæ ·æœ¬ä¸­å‡ºç°çš„æ¦‚ç‡ã€‚</li>\n<li>å¯¹ä½é¢‘è¯åšäº†<strong>ç›¸å¯¹æå‡</strong>ï¼ˆæ¯”ç›´æ¥æŒ‰è¯é¢‘é«˜ä¸€äº›ï¼‰ï¼Œè®©å®ƒä»¬æœ‰æœºä¼šè¢«é‡‡æ ·åˆ°ã€‚</li>\n</ol>\n<p>è¿™ç§é‡‡æ ·ç­–ç•¥åœ¨å®è·µä¸­è¢«è¯æ˜å¯ä»¥æé«˜è¯å‘é‡è®­ç»ƒçš„ç¨³å®šæ€§å’Œè¯­ä¹‰è¡¨è¾¾èƒ½åŠ›ã€‚<br />\nå®Œæˆäº†æ•°æ®å‡†å¤‡åï¼Œç°åœ¨ï¼Œå°±æ¥çœ‹çœ‹ Skip-gram  ä¸­çš„è´Ÿé‡‡æ ·ã€‚</p>\n<h2 id=\"22-skip-gram-ä¸­çš„è´Ÿé‡‡æ ·\">2.2 Skip-gram ä¸­çš„è´Ÿé‡‡æ ·</h2>\n<p>åœ¨ Skip-gram + è´Ÿé‡‡æ · æ¡†æ¶ä¸‹ï¼Œä¸€æ¬¡è®­ç»ƒçš„ä¼ æ’­è¿‡ç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºä¸‹å›¾æ‰€ç¤ºï¼š<br />\n<img alt=\"image.png\" src=\"https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260122222708411-1201982967.png\" /></p>\n<p>è¿™ç§æ€è·¯å…¶å®å¾ˆå®¹æ˜“ç†è§£ï¼š<strong>åœ¨ä¸€æ¬¡ä¼ æ’­ä¸­ï¼Œæˆ‘ä¸å†ä¸€æ¬¡æ›´æ–°è¾“å‡ºå±‚çš„æ‰€æœ‰å‚æ•°ï¼Œè€Œæ˜¯åªè®¡ç®—æˆ‘æå‰æŒ‘é€‰å¥½çš„ä¸€äº›æ ·æœ¬ï¼Œåªæ›´æ–°å®ƒä»¬ç›¸å…³çš„å‚æ•°ï¼Œæ¥èŠ‚çœè®¡ç®—å¼€é”€ï¼Œå‰©ä¸‹çš„ç­‰ä¸‹æ¬¡é€‰ä¸­å†æ›´æ–°ã€‚</strong></p>\n<p>æœ€ç»ˆï¼Œæ¨¡å‹ä»…æ›´æ–°æ­£æ ·æœ¬å’Œ <span class=\"math inline\">\\(k\\)</span> ä¸ªè´Ÿæ ·æœ¬å¯¹åº”çš„è¾“å‡ºå±‚å‚æ•°ä»¥åŠè¾“å…¥è¯å‘é‡ï¼Œå…¶ä½™è¯çš„å‘é‡å®Œå…¨ä¸å‚ä¸æ›´æ–°ï¼Œä»è€ŒèŠ‚çœäº†å¤§é‡è®¡ç®—ï¼Œå®ç° <span class=\"math inline\">\\(O(k)\\)</span> çš„å¤æ‚åº¦ï¼Œè¿œå°äº <span class=\"math inline\">\\(O(|V|)\\)</span>ã€‚<br />\nè¿™ç§â€œåªæ›´æ–°è¢«é€‰ä¸­å‚æ•°â€çš„è®­ç»ƒæ–¹å¼ï¼Œä½¿å¾—<strong>è´Ÿé‡‡æ ·åœ¨å¤§è§„æ¨¡è¯­æ–™ä¸è¶…å¤§è¯è¡¨åœºæ™¯ä¸‹ï¼Œå…·å¤‡æé«˜çš„è®¡ç®—æ•ˆç‡ã€‚</strong></p>\n<p>ä½ ä¼šå‘ç°ï¼Œè´Ÿé‡‡æ ·å’Œåˆ†å±‚ softmax çš„ä¸€ç‚¹å…±åŒé€»è¾‘å°±æ˜¯<strong>æŠŠä¸€æ¬¡å¤šåˆ†ç±»æ‹†æˆäº†å¤šæ¬¡äºŒåˆ†ç±»</strong>ï¼Œè¿™åŒæ ·æ˜¯æˆ‘ä»¬å¯ä»¥å­¦ä¹ çš„ä¼˜åŒ–æ€è·¯ã€‚</p>\n<h1 id=\"3æ€»ç»“\">3.æ€»ç»“</h1>\n<table>\n<thead>\n<tr>\n<th>æ¦‚å¿µ</th>\n<th>åŸç†</th>\n<th>æ¯”å–»</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>softmaxå¤§è¯è¡¨ç“¶é¢ˆ</td>\n<td>softmax çš„è®¡ç®—ä¸åå‘ä¼ æ’­éƒ½å¿…é¡»éå†æ•´ä¸ªè¯è¡¨ï¼Œè¯è¡¨è¶Šå¤§ï¼Œè®­ç»ƒè¶Šæ…¢ï¼Œæˆä¸ºä¸»è¦æ€§èƒ½ç“¶é¢ˆ</td>\n<td>åœ¨é—®è·¯æ—¶ï¼Œå¿…é¡»<strong>é—®å®Œå…¨å›½æ‰€æœ‰å±…æ°‘</strong></td>\n</tr>\n<tr>\n<td>åˆ†å±‚ softmax</td>\n<td>ç”¨å“ˆå¤«æ›¼æ ‘å°†å¤šåˆ†ç±»é—®é¢˜æ‹†æˆ<strong>ä¸€æ¡ä»æ ¹åˆ°å¶çš„äºŒåˆ†ç±»å†³ç­–è·¯å¾„</strong>ï¼Œç›®æ ‡è¯æ¦‚ç‡ç­‰äºè·¯å¾„ä¸Šå„äºŒåˆ†ç±»æ¦‚ç‡çš„ä¹˜ç§¯</td>\n<td>åœ¨<strong>æ¯ä¸ªè·¯å£é€‰æ‹©æ–¹å‘</strong>ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡é—®éæ‰€æœ‰äººã€‚</td>\n</tr>\n<tr>\n<td>åˆ†å±‚ softmax +CBOW</td>\n<td>æ¯æ¬¡è®­ç»ƒåªæ›´æ–°ç›®æ ‡è¯è·¯å¾„ä¸Šçš„èŠ‚ç‚¹å‚æ•°ï¼Œå…¶ä½™è¯å®Œå…¨ä¸å‚ä¸è®¡ç®—</td>\n<td>åªç»´ä¿®<strong>ä½ çœŸæ­£ç»è¿‡çš„è·¯å£</strong>ï¼Œè€Œä¸æ˜¯é‡ä¿®æ•´åº§åŸå¸‚ã€‚</td>\n</tr>\n<tr>\n<td>è´Ÿé‡‡æ ·ï¼ˆNegative Samplingï¼‰</td>\n<td>ä¸å†é€¼æ¨¡å‹åŒºåˆ†â€œç›®æ ‡è¯ vs å…¨è¯è¡¨â€ï¼Œè€Œæ˜¯åŒºåˆ†â€œç›®æ ‡è¯ vs å°‘é‡å™ªå£°è¯â€ï¼Œå¤æ‚åº¦ä¸º <span class=\"math inline\">\\(O(k)\\)</span></td>\n<td>ä¸ç”¨è®¤æ¸…æ‰€æœ‰é™Œç”Ÿäººï¼Œåªè¦ç¡®è®¤<strong>æœ‹å‹å’Œå‡ åè·¯äºº</strong></td>\n</tr>\n<tr>\n<td>æ­£è´Ÿæ ·æœ¬æ„é€ </td>\n<td>æ­£æ ·æœ¬æ¥è‡ªçœŸå®ä¸Šä¸‹æ–‡ï¼›è´Ÿæ ·æœ¬ä»è¯è¡¨éšæœºæŠ½å–ä½†ä¸åœ¨ä¸Šä¸‹æ–‡ä¸­</td>\n<td>çœŸæœ‹å‹ vs <strong>éšæœºæ‹‰æ¥çš„å‡ç†Ÿäºº</strong></td>\n</tr>\n<tr>\n<td><span class=\"math inline\">\\(U(w)^{3/4}\\)</span> é‡‡æ ·åˆ†å¸ƒ</td>\n<td>å¯¹é«˜é¢‘è¯é™æƒã€å¯¹ä½é¢‘è¯ç›¸å¯¹æå‡ï¼Œä½¿è´Ÿæ ·æœ¬æ›´æœ‰ä¿¡æ¯é‡</td>\n<td>çƒ­é—¨æ˜æ˜Ÿ<strong>å°‘å‡ºç°ç‚¹</strong>ï¼Œè·¯äºº<strong>å¤šç»™ç‚¹é•œå¤´</strong></td>\n</tr>\n<tr>\n<td>Skip-gram + è´Ÿé‡‡æ ·</td>\n<td>æ¯æ¬¡ä»…æ›´æ–°ä¸­å¿ƒè¯ã€æ­£æ ·æœ¬è¯å’Œ <span class=\"math inline\">\\(k\\)</span> ä¸ªè´Ÿæ ·æœ¬çš„å‘é‡ï¼Œå…¶ä½™å‚æ•°ä¸åŠ¨</td>\n<td>åªè®­ç»ƒ<strong>è¢«ç‚¹åçš„å‡ ä¸ªäºº</strong>ï¼Œå…¶ä»–äººä¸‹æ¬¡å†è¯´</td>\n</tr>\n</tbody>\n</table>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-22 22:28</span>&nbsp;\n<a href=\"https://www.cnblogs.com/Goblinscholar\">å“¥å¸ƒæ—å­¦è€…</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">19</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "ä»DEMåˆ°ç­‰é«˜çº¿ï¼šæ‰‹æ’•çŸ¢é‡ä¸æ …æ ¼ä¸¤ç§åœ°å½¢è¡¨è¾¾",
      "link": "https://www.cnblogs.com/charlee44/p/19519065",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/charlee44/p/19519065\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-22 21:19\">\n    <span>ä»DEMåˆ°ç­‰é«˜çº¿ï¼šæ‰‹æ’•çŸ¢é‡ä¸æ …æ ¼ä¸¤ç§åœ°å½¢è¡¨è¾¾</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                    <div id=\"cnblogs_post_description\" style=\"display: none;\">\n        <img alt=\"ä»DEMåˆ°ç­‰é«˜çº¿ï¼šæ‰‹æ’•çŸ¢é‡ä¸æ …æ ¼ä¸¤ç§åœ°å½¢è¡¨è¾¾\" class=\"desc_img\" src=\"https://img2024.cnblogs.com/blog/1000410/202601/1000410-20260122212101111-1429511358.png\" />\n        æ·±å…¥è§£æç­‰é«˜çº¿åœ°å½¢å›¾çš„çŸ¢é‡ä¸æ …æ ¼ä¸¤ç§ç”ŸæˆåŸç†ï¼Œå¹¶é€šè¿‡ C++ ä»£ç ä»é›¶å®ç° DEM åˆ°ç­‰é«˜çº¿çš„å®Œæ•´æµç¨‹ï¼Œæ­ç¤º GIS åœ°å½¢è¡¨è¾¾çš„æ ¸å¿ƒé€»è¾‘ã€‚\n    </div>\n<div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<blockquote>\n<p>æœ¬æ–‡èŠ‚é€‰è‡ªæ–°ä¹¦<a href=\"https://item.jd.com/14603137.html\" rel=\"noopener nofollow\" target=\"_blank\">ã€ŠGISåŸºç¡€åŸç†ä¸æŠ€æœ¯å®è·µã€‹</a>ç¬¬6ç« ã€‚å¾ˆå¤šäººä¼šç”¨ gdal_contour ä¸€é”®ç”Ÿæˆç­‰é«˜çº¿ï¼Œä½†ä½ çŸ¥é“å®ƒèƒŒåæ˜¯å¦‚ä½•é€šè¿‡ä¸‰è§’ç½‘æˆ–æ ¼ç½‘ DEM è®¡ç®—äº¤çº¿çš„å—ï¼Ÿæœ¬æ–‡å¸¦ä½ ä»é›¶å®ç°çŸ¢é‡ç­‰é«˜çº¿æå–ä¸æ …æ ¼åˆ†å±‚è®¾è‰²å›¾ç”Ÿæˆï¼ŒçœŸæ­£ç†è§£åœ°å½¢è¡¨è¾¾çš„æœ¬è´¨ã€‚</p>\n</blockquote>\n<p><img alt=\"GISåŸºç¡€åŸç†ä¸æŠ€æœ¯å®è·µ\" class=\"lazyload\" /></p>\n<h1 id=\"66-ç­‰é«˜çº¿åœ°å½¢å›¾\">6.6 ç­‰é«˜çº¿åœ°å½¢å›¾</h1>\n<p>åœ°å½¢çš„è¡¨è¾¾é™¤äº†å‰æ–‡ä»‹ç»çš„åŸºäºæ …æ ¼å½¢å¼çš„æ ¼ç½‘DEMå’ŒåŸºäºçŸ¢é‡å½¢å¼çš„ä¸è§„åˆ™ä¸‰è§’ç½‘DEMä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ç§è¡¨è¾¾æ–¹å¼ï¼šç­‰é«˜çº¿åœ°å½¢å›¾ï¼Œç®€ç§°ç­‰é«˜çº¿å›¾ã€‚ç­‰é«˜çº¿å›¾çš„å†å²éå¸¸æ‚ ä¹…ï¼Œæ˜¯ä¸€ç§éå¸¸ç»å…¸çš„åœ°å½¢è¡¨è¾¾æ–¹å¼ï¼Œåœ¨é«˜ä¸­åœ°ç†ä¸­å°±æœ‰è¯¦ç»†çš„ä»‹ç»å’Œè€ƒå¯Ÿï¼ˆæœ‰è¶£çš„æ˜¯åœ¨å›½å†…çš„è¯¾ç¨‹è®¾ç½®ä¸­ï¼Œé«˜ä¸­åœ°ç†å±äºæ–‡ç§‘ï¼Œæœ¬ç§‘çš„åœ°ç†ä¿¡æ¯ç³»ç»Ÿå´å±äºç†ç§‘ï¼Œç›¸ä¿¡åœ¨è¿›å…¥å¤§å­¦åæ‰æ¥è§¦åˆ°ç­‰é«˜çº¿å›¾çš„äººä¸æ­¢ç¬”è€…ä¸€ä¸ªï¼‰ã€‚</p>\n<h2 id=\"661-ç­‰é«˜çº¿å›¾çš„åŸºç¡€ç†è§£\">6.6.1 ç­‰é«˜çº¿å›¾çš„åŸºç¡€ç†è§£</h2>\n<p>æ‰€è°“ç­‰é«˜çº¿ï¼Œå°±æ˜¯æŠŠåœ°é¢ä¸Šæµ·æ‹”é«˜åº¦ç›¸ç­‰çš„ç‚¹ç›¸è¿ï¼Œå‚ç›´æŠ•å½±åˆ°æ°´å¹³é¢ä¸Šï¼Œå¹¶æŒ‰ç…§ä¸€å®šçš„æ¯”ä¾‹ç¼©æ”¾ç»˜åˆ¶åˆ°å›¾çº¸æ‰€å¾—åˆ°çš„é—­åˆæ›²çº¿ã€‚å¦‚æœæˆ‘ä»¬æŒ‰ç…§ä¸€å®šé«˜åº¦å·®ï¼ˆç­‰é«˜è·ï¼‰ï¼Œä»ä½åˆ°é«˜ä¾æ¬¡ç»˜åˆ¶ç­‰é«˜çº¿ï¼Œå°±å¾—åˆ°äº†ä¸€å¼ ç­‰é«˜çº¿å›¾ã€‚å¦‚ä¸‹å›¾6.15æ‰€ç¤ºï¼š</p>\n<p><img alt=\"å›¾6.15 ç­‰é«˜çº¿å›¾\" class=\"lazyload\" /></p>\n<p>ç­‰é«˜çº¿å›¾è™½ç„¶æœ‰ä¸æ˜“è¯†åˆ«çš„ç‰¹ç‚¹ï¼Œä½†æ˜¯å…¶æœ€å¤§çš„ä¼˜ç‚¹å°±åœ¨äºé€šè¿‡è¾ƒå°‘çš„ä¿¡æ¯é‡ï¼Œå°±èƒ½å¤Ÿè½»æ˜“è¯†åˆ«å‡ºå¤šç§åœ°å½¢åœ°è²Œï¼Œä»è€Œå¸®åŠ©æˆ‘ä»¬åšå‡ºåœ°ç†ç©ºé—´ç›¸å…³çš„å†³ç­–ã€‚ä¸€äº›å…¸å‹çš„åœ°è²ŒåŒ…æ‹¬ï¼š</p>\n<h3 id=\"1-é™¡å¡å’Œç¼“å¡\">1. é™¡å¡å’Œç¼“å¡</h3>\n<p>ç­‰é«˜çº¿å¯†é›†çš„åœ°æ–¹ï¼Œå¡åº¦è¾ƒé™¡ï¼Œå¦‚å›¾6.16ï¼ˆ1ï¼‰æ‰€ç¤ºã€‚è€Œå›¾6.16ï¼ˆ2ï¼‰æ‰€ç¤ºçš„å¡åº¦è¾ƒç¼“ï¼Œå› ä¸ºå…¶ç­‰é«˜çº¿è¾ƒä¸ºç¨€ç–ï¼Œå¡åº¦è¾ƒç¼“ã€‚å¦‚æœæˆ‘ä»¬è¿›è¡Œçˆ¬å±±æ´»åŠ¨ï¼Œåº”é€‰æ‹©ç­‰é«˜çº¿ç¨€ç–çš„åœ°æ–¹ã€‚</p>\n<p><img alt=\"å›¾6.16 é™¡å¡å’Œç¼“å¡\" class=\"lazyload\" /></p>\n<h3 id=\"2-å±±å¤´å’Œæ´¼åœ°\">2. å±±å¤´å’Œæ´¼åœ°</h3>\n<p>ä¸‹å›¾6.17ä¸­ç­‰é«˜çº¿ï¼ˆaï¼‰è¡¨ç¤ºå±±å¤´ï¼Œç­‰é«˜çº¿ï¼ˆbï¼‰ä¸ºè¡¨ç¤ºæ´¼åœ°ï¼Œå®ƒä»¬æŠ•å½±åˆ°å¹³é¢ä¸Šéƒ½æ˜¯ç®€å•çš„é—­åˆå¤šè¾¹å½¢æ›²çº¿ã€‚ä¸¤è€…çš„åŒºåˆ«åœ¨äºå±±å¤´çš„å†…åœˆé«˜ç¨‹å¤§äºå¤–åœˆï¼Œè€Œæ´¼åœ°åˆ™ç›¸åã€‚</p>\n<p><img alt=\"å›¾6.17 å±±å¤´å’Œæ´¼åœ°\" class=\"lazyload\" /></p>\n<h3 id=\"3-å±±è„Šå±±è°·å’Œééƒ¨\">3. å±±è„Šã€å±±è°·å’Œééƒ¨</h3>\n<p>å±±è„Šä½äºç­‰é«˜çº¿å¼¯æ›²çš„åœ°æ–¹ï¼Œå…¶é«˜ç¨‹å€¼æ²¿ç€å‡¸å‘ä»é«˜åˆ°åº•ï¼Œå¦‚ä¸‹å›¾6.18ï¼ˆaï¼‰æ‰€ç¤ºã€‚å±±è°·åˆ™ç›¸åï¼Œç­‰é«˜çº¿å¼¯æ›²å¤„ä»é«˜ç¨‹å€¼ä½å¾€é«˜ç¨‹å€¼é«˜çš„åœ°æ–¹å‡¸å‡ºï¼Œå¦‚ä¸‹å›¾6.18ï¼ˆbï¼‰æ‰€ç¤ºã€‚å±±è„Šå¼¯æ›²å¤„ç›¸è¿çš„çº¿è¢«ç§°ä¸ºå±±è„Šçº¿ï¼Œé™„è¿‘é›¨æ°´åœ¨é™è½åˆ°è¿™æ¡çº¿ä¸Šæ—¶ä¼šåˆ†åˆ«æµå‘å±±è„Šçš„ä¸¤ä¾§ï¼Œå› æ­¤å±±è„Šçº¿è¢«ç§°ä¸ºåˆ†æ°´çº¿ã€‚å±±è°·å¼¯æ›²å¤„ç›¸è¿çš„çº¿è¢«ç§°ä¸ºå±±è°·çº¿ï¼Œé›¨æ°´ä¼šä»ä¸¤ä¾§ä¸Šå¡æµå‘è°·åº•ï¼Œå®¹æ˜“å‘è‚²æ²³æµï¼Œå› æ­¤å±±è°·çº¿è¢«ç§°ä¸ºé›†æ°´çº¿ã€‚åˆ†æ°´çº¿ã€é›†æ°´çº¿æ˜¯åœŸæœ¨å·¥ç¨‹ä¸­éœ€è¦é‡ç‚¹å…³æ³¨çš„é—®é¢˜ã€‚</p>\n<p>ééƒ¨æ˜¯ä½äºä¸¤ä¸ªå±±å¤´ä¹‹é—´å‘ˆé©¬éå½¢çš„ä½å‡¹éƒ¨ä½ï¼Œå¦‚ä¸‹å›¾6.18æ‰€ç¤ºã€‚ééƒ¨æ˜¯ä¿®å»ºå±±åŒºé“è·¯çš„å…³èŠ‚ç‚¹ï¼Œå¯ä»¥è€ƒè™‘åœ¨ééƒ¨ä¿®å»ºè¶Šå²­é“è·¯ã€‚</p>\n<p><img alt=\"å›¾6.18 å±±è„Šã€å±±è°·å’Œééƒ¨\" class=\"lazyload\" /></p>\n<h3 id=\"4-ç»å£å’Œæ‚¬å´–\">4. ç»å£å’Œæ‚¬å´–</h3>\n<p>ç»å£æ˜¯å¡åº¦åœ¨70Â°ä»¥ä¸Šçš„é™¡å³­å´–å£ï¼Œæ­¤æ—¶å¤šæ¡ç­‰é«˜çº¿çš„ä¸€éƒ¨åˆ†ä¼šé‡å ï¼Œå°†è¿™éƒ¨åˆ†ç”¨é”¯é½¿çŠ¶çš„ç¬¦å·è¡¨ç¤ºç»å£ï¼Œå¦‚ä¸‹å›¾6.19ï¼ˆaï¼‰æ‰€ç¤ºã€‚æ‚¬å´–æ˜¯ä¸Šéƒ¨çªå‡ºï¼Œä¸‹éƒ¨å‡¹è¿›çš„ç»å£ï¼Œè¿™ç§åœ°è²Œçš„ç­‰é«˜çº¿å‡ºç°ç›¸äº¤ã€‚è¿™æ—¶éšè”½çš„ç­‰é«˜çº¿ç”¨è™šçº¿è¡¨ç¤ºï¼Œå¦‚ä¸‹å›¾6.19ï¼ˆcï¼‰æ‰€ç¤ºã€‚</p>\n<p><img alt=\"å›¾6.19 ç»å£å’Œæ‚¬å´–\" class=\"lazyload\" /></p>\n<p>ç­‰é«˜çº¿å›¾çš„å¦ä¸€ä¸ªç‰¹ç‚¹çš„æ˜¯å…¶å¹¶ä¸å®Œå…¨æ˜¯å®šæ€§çš„ï¼Œç”±äºæ¯ä¸€æ¡ç­‰é«˜çº¿éƒ½ä¼šæ ‡æ³¨é«˜ç¨‹ä¿¡æ¯ï¼Œå¾ˆå¤šæƒ…å†µä¸‹å¯ä»¥è¿›è¡Œå¤§è‡´å®šé‡è¿ç®—ï¼Œæ¯”å¦‚ä¼°ç®—ç­‰é«˜çº¿å›¾ä¸­ä¸¤ä¸ªç‚¹çš„ç›¸å¯¹é«˜å·®ã€å¡åº¦ç­‰ã€‚æ‰€ä»¥ç­‰é«˜çº¿å›¾ç¡®å®æ˜¯ä¸€ç§éå¸¸ç®€æ´æœ‰åŠ›çš„åœ°å½¢è¡¨è¾¾ï¼Œåº”ç”¨éå¸¸å¹¿æ³›ã€‚</p>\n<h2 id=\"662-ç­‰é«˜çº¿åœ°å½¢å›¾çŸ¢é‡å½¢å¼\">6.6.2 ç­‰é«˜çº¿åœ°å½¢å›¾çŸ¢é‡å½¢å¼</h2>\n<p>æ­£å¦‚å›¾6.16~å›¾6.19æ‰€ç¤ºï¼Œæœ€ä¸ºç®€æ´çš„ç­‰é«˜çº¿å›¾æ˜¯åŸºäºè¦ç´ ç‰¹å¾çš„ï¼Œæ˜¯ç”±ä¸€ç»„é—­åˆçš„æ›²çº¿ç»„æˆçš„ã€‚å› æ­¤ä¸éš¾æƒ³è±¡ï¼Œä¸ºäº†ä»DEMä¸­ç”ŸæˆçŸ¢é‡å½¢å¼çš„ç­‰é«˜çº¿åœ°å½¢å›¾ï¼Œå…³é”®åœ¨äºä½¿ç”¨DEMçš„ç©ºé—´è¦ç´ è¿›è¡Œç«‹ä½“å‡ ä½•è®¡ç®—ã€‚å…¶å®åœ¨GDALè‡ªå¸¦çš„å·¥å…·ä¸­å·²ç»æœ‰æå–ç­‰é«˜çº¿å›¾çš„å·¥å…·ï¼Œä½†æ˜¯æ­£å¦‚å‰é¢ç¬”è€…æ‰€è¯´ï¼Œç»“æœå¹¶ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯å…¶ä¸­çš„åŸç†ã€‚è¿™é‡Œç¬”è€…è‡ªå·±çš„å®ç°å¦‚ä¸‹ä¾‹6.10æ‰€ç¤ºã€‚</p>\n<pre><code class=\"language-cpp\">//ä¾‹6.10 ç”Ÿæˆç­‰é«˜çº¿å›¾çš„çŸ¢é‡å½¢å¼\n#include &lt;gdal_priv.h&gt;\n#include &lt;ogrsf_frmts.h&gt;\n\n#include &lt;Eigen/Eigen&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n\nusing namespace std;\nusing namespace Eigen;\n\nstruct TrigonVertexIndex {\n  size_t index[3];\n};\n\ndouble startHeight = 550;\ndouble endHeight = 2815;\ndouble heightInterval = 500;\n\nsize_t nV;                                       //ç‚¹çš„ä¸ªæ•°\nstd::vector&lt;Vector3d&gt; vertexXyz;                 //ç‚¹é›†\nsize_t nF;                                       //é¢çš„ä¸ªæ•°.\nstd::vector&lt;TrigonVertexIndex&gt; faceVertexIndex;  //é¢åœ¨ç‚¹é›†ä¸­çš„åºå·\n\n//æ ¹æ®ç©ºæˆªæ–­å­—ç¬¦ä¸²\nvoid ChopStringWithSpace(string line, vector&lt;string&gt;&amp; substring) {\n  std::stringstream linestream(line);\n  string sub;\n\n  while (linestream &gt;&gt; sub) {\n    substring.push_back(sub);\n  }\n}\n\nbool ReadTin(const char* szModelPath) {\n  ifstream infile(szModelPath, ios::binary);\n  if (!infile) {\n    printf(\"Can't Load %s\\n\", szModelPath);\n    return false;\n  }\n\n  string line;\n  while (line != string(\"end_header\")) {\n    getline(infile, line);\n    vector&lt;string&gt; substring;\n    ChopStringWithSpace(line, substring);\n\n    if (substring.size() == 3 &amp;&amp; substring[0] == \"element\") {\n      if (substring[1] == \"vertex\") {\n        nV = stoul(substring[2]);\n      } else if (substring[1] == \"face\") {\n        nF = stoul(substring[2]);\n      }\n    }\n  }\n\n  vertexXyz.resize(nV);\n  vertexXyz.shrink_to_fit();\n\n  uint8_t propertyNum = 3;\n  double* vertexTmp = new double[propertyNum * nV];\n  infile.read((char*)(vertexTmp),\n              static_cast&lt;int64_t&gt;(propertyNum * nV * sizeof(double)));\n  for (size_t i = 0; i &lt; nV; i++) {\n    vertexXyz[i].x() = vertexTmp[i * propertyNum];\n    vertexXyz[i].y() = vertexTmp[i * propertyNum + 1];\n    vertexXyz[i].z() = vertexTmp[i * propertyNum + 2];\n  }\n\n  delete[] vertexTmp;\n  vertexTmp = nullptr;\n\n  faceVertexIndex.resize(nF);\n  faceVertexIndex.shrink_to_fit();\n\n  for (size_t i = 0; i &lt; nF; i++) {\n    uint8_t type;\n    infile.read((char*)(&amp;type), 1);\n\n    if (type != 3) {\n      printf(\"Format Incompatible Or Non Trigon!\\n\");\n      return false;\n    }\n\n    for (unsigned int j = 0; j &lt; type; j++) {\n      int id;\n      infile.read((char*)(&amp;id), sizeof(int));\n      faceVertexIndex[i].index[j] = static_cast&lt;size_t&gt;(id);\n    }\n  }\n\n  infile.close();\n\n  return true;\n}\n\n//åˆ¤æ–­å‡ ç§å¯èƒ½çš„ç›¸äº¤æƒ…å†µ\nint CalTriangleType(TrigonVertexIndex trigonVID,\n                    std::vector&lt;bool&gt;&amp; vertexFlag) {\n  bool triVertexFlag[3] = {false, false, false};\n  for (int vi = 0; vi &lt; 3; vi++) {\n    size_t vid = trigonVID.index[vi];\n    triVertexFlag[vi] = vertexFlag[vid];\n  }\n\n  int type = 0;\n  if (!triVertexFlag[0] &amp;&amp; !triVertexFlag[1] &amp;&amp; !triVertexFlag[2]) {\n    type = 0;\n  } else if (!triVertexFlag[0] &amp;&amp; !triVertexFlag[1] &amp;&amp; triVertexFlag[2]) {\n    type = 1;\n  } else if (triVertexFlag[0] &amp;&amp; !triVertexFlag[1] &amp;&amp; !triVertexFlag[2]) {\n    type = 2;\n  } else if (!triVertexFlag[0] &amp;&amp; triVertexFlag[1] &amp;&amp; !triVertexFlag[2]) {\n    type = 3;\n  } else if (triVertexFlag[0] &amp;&amp; triVertexFlag[1] &amp;&amp; triVertexFlag[2]) {\n    type = 4;\n  } else if (triVertexFlag[0] &amp;&amp; triVertexFlag[1] &amp;&amp; !triVertexFlag[2]) {\n    type = 5;\n  } else if (!triVertexFlag[0] &amp;&amp; triVertexFlag[1] &amp;&amp; triVertexFlag[2]) {\n    type = 6;\n  } else if (triVertexFlag[0] &amp;&amp; !triVertexFlag[1] &amp;&amp; triVertexFlag[2]) {\n    type = 7;\n  }\n\n  return type;\n}\n\n//è®¡ç®—ç©ºé—´çº¿æ®µå·²çŸ¥Zå€¼çš„ç‚¹çš„åæ ‡\nbool CalPointOfSegmentLineWithZ(Vector3d O, Vector3d E, double z, Vector3d&amp; P) {\n  if (E.z() &lt; O.z()) {\n    Vector3d tmp = O;\n    O = E;\n    E = tmp;\n  }\n\n  double t = (z - O.z()) / (E.z() - O.z());\n  if (t &lt; 0 &amp;&amp; t &gt; 1) {\n    return false;\n  }\n\n  Vector3d D = E - O;\n  P = O + D * t;\n\n  return true;\n}\n\n//è®¡ç®—ç©ºé—´ä¸­ä¸‰è§’å½¢ä¸ç›´çº¿ç›¸äº¤\nvoid CalTriangleIntersectingLine(TrigonVertexIndex trigonVID, int cornerId,\n                                 Vector3d&amp; start, Vector3d&amp; end, double z) {\n  vector&lt;Vector3d&gt; xyzList(3);\n  for (size_t vi = 0; vi &lt; 3; vi++) {\n    size_t vid = trigonVID.index[vi];\n    xyzList[vi] = vertexXyz[vid];\n  }\n\n  if (cornerId == 0) {\n    CalPointOfSegmentLineWithZ(xyzList[0], xyzList[1], z, start);\n    CalPointOfSegmentLineWithZ(xyzList[0], xyzList[2], z, end);\n  } else if (cornerId == 1) {\n    CalPointOfSegmentLineWithZ(xyzList[1], xyzList[0], z, start);\n    CalPointOfSegmentLineWithZ(xyzList[1], xyzList[2], z, end);\n  } else if (cornerId == 2) {\n    CalPointOfSegmentLineWithZ(xyzList[2], xyzList[1], z, start);\n    CalPointOfSegmentLineWithZ(xyzList[2], xyzList[0], z, end);\n  }\n}\n\nbool CalIsoHeightLine(TrigonVertexIndex trigonVID, int type, Vector3d&amp; start,Vector3d&amp; end, double height) {\n  bool flag = false;\n  switch (type) {\n    case 1:\n    case 5: {\n      CalTriangleIntersectingLine(trigonVID, 2, start, end, height);\n      flag = true;\n      break;\n    }\n    case 2:\n    case 6: {\n      CalTriangleIntersectingLine(trigonVID, 0, start, end, height);\n      flag = true;\n      break;\n    }\n    case 3:\n    case 7: {\n      CalTriangleIntersectingLine(trigonVID, 1, start, end, height);\n      flag = true;\n      break;\n    }\n    case 0:\n    case 4:\n    default:\n      break;\n  }\n\n  return flag;\n}\n\nint main() {\n  GDALAllRegister();  // GDALæ‰€æœ‰æ“ä½œéƒ½éœ€è¦å…ˆæ³¨å†Œæ ¼å¼\n\n  vector&lt;double&gt; heightThresholdList;\n  {\n    double heightThreshold = startHeight;\n    while (heightThreshold &lt; endHeight) {\n      heightThresholdList.push_back(heightThreshold);\n      heightThreshold = heightThreshold + heightInterval;\n    }\n  }\n\n  string workDir = getenv(\"GISBasic\");\n  string outShpFile = workDir + \"/../Data/Terrain/dst.shp\";\n\n  string tinPath = workDir + \"/../Data/Terrain/terrain.ply\";\n  if (!ReadTin(tinPath.c_str())) {\n    return 1;\n  }\n\n  //åˆ›å»º\n  GDALDriver* driver =\n      GetGDALDriverManager()-&gt;GetDriverByName(\"ESRI Shapefile\");\n  if (!driver) {\n    printf(\"Get Driver ESRI Shapefile Errorï¼\\n\");\n    return 1;\n  }\n\n  GDALDataset* dataset =\n      driver-&gt;Create(outShpFile.c_str(), 0, 0, 0, GDT_Unknown, nullptr);\n  OGRLayer* poLayer = dataset-&gt;CreateLayer(\"IsoHeightline\", nullptr,\n                                           wkbMultiLineStringZM, nullptr);\n\n  OGRFeature* poFeature = new OGRFeature(poLayer-&gt;GetLayerDefn());\n  OGRMultiLineString multiLineString;\n\n  for (size_t i = 0; i &lt; heightThresholdList.size(); i++) {\n    double heightThreshold = heightThresholdList[i];\n\n    std::vector&lt;bool&gt; vertexFlag(vertexXyz.size(), false);\n    for (size_t i = 0; i &lt; vertexXyz.size(); i++) {\n      if (vertexXyz[i].z() &gt;= heightThreshold) {\n        vertexFlag[i] = true;\n      }\n    }\n\n    for (size_t fi = 0; fi &lt; faceVertexIndex.size(); fi++) {\n      int type = CalTriangleType(faceVertexIndex[fi], vertexFlag);\n\n      Vector3d start;\n      Vector3d end;\n      if (CalIsoHeightLine(faceVertexIndex[fi], type, start, end,\n                           heightThreshold)) {\n        OGRLinearRing ogrring;\n        ogrring.setPoint(0, start.x(), start.y(), start.z());\n        ogrring.setPoint(1, end.x(), end.y(), end.z());\n        multiLineString.addGeometry(&amp;ogrring);\n      }\n    }\n  }\n\n  poFeature-&gt;SetGeometry(&amp;multiLineString);\n  if (poLayer-&gt;CreateFeature(poFeature) != OGRERR_NONE) {\n    printf(\"Failed to create feature in shapefile.\\n\");\n    return 1;\n  }\n\n  //é‡Šæ”¾\n  GDALClose(dataset);\n  dataset = nullptr;\n\n  return 0;\n}\n</code></pre>\n<p>åœ¨æœ¬ä¾‹ä¸­ç¬”è€…ä½¿ç”¨çš„DEMæ˜¯ä¸è§„åˆ™ä¸‰è§’ç½‘å½¢å¼çš„DEMï¼Œä¸è¿‡å¦‚æœä½¿ç”¨è§„åˆ™æ ¼ç½‘ä¹Ÿå·®ä¸å¤šï¼Œéƒ½éœ€è¦å…ˆè·å–ä¸€ç»„ç«‹ä½“ç©ºé—´ä¸‰è§’å½¢ã€‚è¦è·å–ç­‰é«˜çº¿ï¼Œæˆ‘ä»¬å¯ä»¥è®¾æƒ³æŸä¸€å›ºå®šçš„é«˜ç¨‹é¢ä¸è¿™ä¸€ç»„ç«‹ä½“ç©ºé—´ä¸‰è§’å½¢ç›¸äº¤ï¼Œé‚£ä¹ˆå¿…ç„¶å¯ä»¥å¾—åˆ°ç›¸äº¤çš„çº¿æ®µï¼Œè¿™ä¸ªçº¿æ®µä¹Ÿå°±æ˜¯ç­‰é«˜çº¿ä¸Šçš„çº¿æ®µã€‚</p>\n<p>æŸä¸€å›ºå®šçš„é«˜ç¨‹é¢ä¸è¿™ä¸€ç»„ç«‹ä½“ç©ºé—´ä¸‰è§’å½¢ç›¸äº¤çš„ç®—æ³•ä¹Ÿä¸æ˜¯ä½¿ç”¨è®¡ç®—å‡ ä½•ç®—æ³•ç¡¬ç®—ï¼Œå…¶å®åŸç†éå¸¸ç®€å•ï¼Œå¦‚æœé«˜ç¨‹é¢ä¸ç«‹ä½“ç©ºé—´ä¸‰è§’å½¢ç›¸äº¤ï¼Œé‚£ä¹ˆç©ºé—´ä¸‰è§’å½¢å°±ä¼šæœ‰ä¸€ä¸ªè§’æˆ–è€…ä¸¤ä¸ªè§’åœ¨é«˜ç¨‹é¢ä¸Šæ–¹ã€‚æ¢å¥è¯è¯´ï¼Œé«˜ç¨‹é¢ä¸ç«‹ä½“ç©ºé—´ä¸‰è§’å½¢ç›¸äº¤ï¼Œæ¯”å¦‚æœ‰ä¸€ä¸ªè§’åœ¨é«˜ç¨‹é¢ä¸Šæ–¹ï¼Œæˆ–è€…åœ¨é«˜ç¨‹é¢ä¸‹æ–¹ã€‚åªè¦æ±‚å–è¿™ä¸ªè§’ï¼Œå°±å¯ä»¥è·å–åˆ°ä¸¤æ¡ç›¸äº¤çš„ä¸‰è§’å½¢è¾¹ã€‚æœ€åï¼Œæ±‚ä¸¤ä¸ªç›¸äº¤çš„ä¸‰è§’å½¢è¾¹ä¸Šå›ºå®šé«˜ç¨‹çš„ç‚¹ï¼Œå°†ä¸¤ç‚¹ç›¸è¿å°±æ˜¯ç­‰é«˜çº¿ä¸Šçš„çº¿æ®µã€‚</p>\n<p>å…¶å®ä¸Šè¿°åŸç†ä¹Ÿä½“ç°äº†ç¬”è€…åœ¨å‰é¢çš„è®ºè¿°ï¼ŒDEMå…¶å®åªæ˜¯ä¸ª2.5ç»´çš„æ•°æ®ï¼Œè¿™é‡Œç¡®å®ä¹Ÿæ²¡æœ‰ç”¨åˆ°çœŸæ­£æ„ä¹‰ä¸Šçš„ä¸‰ç»´ç«‹ä½“ç©ºé—´è¿ç®—ï¼Œè€Œæ˜¯å¾ˆå¿«æ ¹æ®é«˜åº¦å€¼åšå‡ºé«˜ç¨‹é¢ä¸ç«‹ä½“ç©ºé—´ä¸‰è§’å½¢ç›¸äº¤çš„åˆ¤å®šã€‚è¿™ç§é™ç»´çš„æ€æƒ³åœ¨GISä¸­æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œæˆ‘ä»¬åº”è¯¥å……åˆ†åˆ©ç”¨å®ƒã€‚æœ€åå¾—åˆ°çš„ç»“æœå¦‚ä¸‹å›¾6.20æ‰€ç¤ºï¼š</p>\n<p><img alt=\"å›¾6.20 æ ¹æ®DEMç”Ÿæˆç­‰é«˜çº¿å›¾\" class=\"lazyload\" /></p>\n<h2 id=\"663-ç­‰é«˜çº¿åœ°å½¢å›¾æ …æ ¼å½¢å¼\">6.6.3 ç­‰é«˜çº¿åœ°å½¢å›¾æ …æ ¼å½¢å¼</h2>\n<p>ç­‰é«˜çº¿åœ°å½¢å›¾çš„çŸ¢é‡å½¢å¼è™½ç„¶æ¯”è¾ƒç®€æ´ï¼Œä½†æ˜¯ç¡®å®ä¸å¤Ÿç›´è§‚ã€‚æˆ‘ä»¬å¯ä»¥ä»¿ç…§çƒ­åŠ›å›¾çš„è¡¨è¾¾ï¼Œå°†å…¶æ …æ ¼åŒ–ï¼Œå¹¶æ ¹æ®ä¸åŒçš„é«˜åº¦åŒºé—´èµ‹äºˆä¸åŒçš„é¢œè‰²ï¼Œå°±å¾—åˆ°äº†åˆ†å±‚è®¾è‰²çš„ç­‰é«˜çº¿åœ°å½¢å›¾ã€‚è¿™ç§æ …æ ¼å½¢å¼çš„ç­‰é«˜çº¿åœ°å½¢å›¾æ›´ä¸ºç›´æ¥ç¾è§‚ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“æ ¹æ®é¢œè‰²åŒºåˆ†é‚£äº›åœ°åŒºå±äºå¹³åŸã€ä¸˜é™µã€ç›†åœ°ã€é«˜åŸæˆ–è€…å±±åœ°ï¼Œä¹Ÿæ–¹ä¾¿ç›´æ¥è¾“å‡ºå›¾çº¸ã€‚</p>\n<p>ä¸€ä¸ªæ€è·¯æ˜¯å°†ä¾‹6.10æ‰€å¾—åˆ°çš„ç»“æœæ …æ ¼åŒ–ï¼Œä¸è¿‡è¿™å¹¶ä¸æ˜¯æœ€ä½³çš„æ–¹æ¡ˆã€‚ç”±äºæ ¼ç½‘DEMæ•°æ®æœ¬èº«å°±æ˜¯æ …æ ¼åŒ–çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨æ ¼ç½‘DEMä¸Šç”Ÿæˆåˆ†å±‚è®¾è‰²ç­‰é«˜çº¿åœ°å½¢å›¾ï¼Œå¦‚ä¸‹ä¾‹6.11æ‰€ç¤ºï¼š</p>\n<pre><code class=\"language-cpp\">//ä¾‹6.11 ç”Ÿæˆç­‰é«˜çº¿å›¾çš„æ …æ ¼å½¢å¼\n#include &lt;gdal_priv.h&gt;\n\n#include &lt;array&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nusing F_RGB = std::array&lt;double, 3&gt;;\n\nint demWidth;\nint demHeight;\n\ndouble geoTransform[6] = {0};\ndouble startX;  //å·¦ä¸Šè§’ç‚¹åæ ‡X\ndouble dx;      // Xæ–¹å‘çš„åˆ†è¾¨ç‡\ndouble startY;  //å·¦ä¸Šè§’ç‚¹åæ ‡Y\ndouble dy;      // Yæ–¹å‘çš„åˆ†è¾¨ç‡\n\nvector&lt;float&gt; demBuf;\n\nint dstBandNum = 4;\nvector&lt;uint8_t&gt; dstBuf;\n\ndouble startHeight = 550;\ndouble endHeight = 2815;\ndouble heightInterval = 500;\n\nvector&lt;F_RGB&gt; tableRGB(256);         //é¢œè‰²æ˜ å°„è¡¨\nvector&lt;double&gt; heightThresholdList;  //é«˜åº¦åŒºé—´\nvector&lt;F_RGB&gt; heightRGBList;         //é«˜åº¦åŒºé—´å¯¹åº”çš„é¢œè‰²\n\n//ç”Ÿæˆæ¸å˜è‰²\nvoid Gradient(F_RGB &amp;start, F_RGB &amp;end, vector&lt;F_RGB&gt; &amp;RGBList) {\n  F_RGB d;\n  for (int i = 0; i &lt; 3; i++) {\n    d[i] = (end[i] - start[i]) / RGBList.size();\n  }\n\n  for (size_t i = 0; i &lt; RGBList.size(); i++) {\n    for (int j = 0; j &lt; 3; j++) {\n      RGBList[i][j] = start[j] + d[j] * i;\n    }\n  }\n}\n\n//åˆå§‹åŒ–é¢œè‰²æŸ¥æ‰¾è¡¨\nvoid InitColorTable() {\n  F_RGB blue({17, 60, 235});   //è“è‰²\n  F_RGB green({17, 235, 86});  //ç»¿è‰²\n  vector&lt;F_RGB&gt; RGBList(60);\n  Gradient(blue, green, RGBList);\n  for (int i = 0; i &lt; 60; i++) {\n    tableRGB[i] = RGBList[i];\n  }\n\n  F_RGB yellow({235, 173, 17});  //é»„è‰²\n  RGBList.clear();\n  RGBList.resize(60);\n  Gradient(green, yellow, RGBList);\n  for (int i = 0; i &lt; 60; i++) {\n    tableRGB[i + 60] = RGBList[i];\n  }\n\n  F_RGB red({235, 60, 17});  //çº¢è‰²\n  RGBList.clear();\n  RGBList.resize(60);\n  Gradient(yellow, red, RGBList);\n  for (int i = 0; i &lt; 60; i++) {\n    tableRGB[i + 120] = RGBList[i];\n  }\n\n  F_RGB white({235, 17, 235});  //ç´«è‰²\n  RGBList.clear();\n  RGBList.resize(76);\n  Gradient(red, white, RGBList);\n  for (int i = 0; i &lt; 76; i++) {\n    tableRGB[i + 180] = RGBList[i];\n  }\n}\n\nvoid ReadDem() {\n  string workDir = getenv(\"GISBasic\");\n  string demPath = workDir + \"/../Data/Terrain/dem.tif\";\n\n  GDALDataset *dem = (GDALDataset *)GDALOpen(demPath.c_str(), GA_ReadOnly);\n  if (!dem) {\n    cout &lt;&lt; \"Can't Open Image!\" &lt;&lt; endl;\n    return;\n  }\n\n  demWidth = dem-&gt;GetRasterXSize();\n  demHeight = dem-&gt;GetRasterYSize();\n\n  dem-&gt;GetGeoTransform(geoTransform);\n  startX = geoTransform[0];  //å·¦ä¸Šè§’ç‚¹åæ ‡X\n  dx = geoTransform[1];      // Xæ–¹å‘çš„åˆ†è¾¨ç‡\n  startY = geoTransform[3];  //å·¦ä¸Šè§’ç‚¹åæ ‡Y\n  dy = geoTransform[5];      // Yæ–¹å‘çš„åˆ†è¾¨ç‡\n\n  // noValue = dem-&gt;GetRasterBand(1)-&gt;GetNoDataValue();\n\n  size_t demBufNum = (size_t)demWidth * demHeight;\n  demBuf.resize(demBufNum, 0);\n\n  int depth = sizeof(float);\n  dem-&gt;GetRasterBand(1)-&gt;RasterIO(GF_Read, 0, 0, demWidth, demHeight,\n                                  demBuf.data(), demWidth, demHeight,\n                                  GDT_Float32, depth, demWidth * depth);\n\n  GDALClose(dem);\n  dem = nullptr;\n}\n\nvoid HandleDem() {\n  size_t dstBufNum = (size_t)demWidth * demHeight * dstBandNum;\n  dstBuf.resize(dstBufNum, 255);\n\n  for (size_t i = 0; i &lt; heightThresholdList.size(); i++) {\n    double heightThreshold = heightThresholdList[i];\n    F_RGB thresholdRgb = heightRGBList[i];\n\n    for (int yi = 0; yi &lt; demHeight; yi++) {\n      for (int xi = 0; xi &lt; demWidth; xi++) {\n        size_t m = (size_t)demWidth * yi + xi;\n\n        if (demBuf[m] &gt; heightThreshold) {\n          size_t n = (size_t)demWidth * dstBandNum * yi + dstBandNum * xi;\n          for (int bi = 0; bi &lt; 3; bi++) {\n            dstBuf[n + bi] = (uint8_t)thresholdRgb[bi];\n          }\n        }\n      }\n    }\n  }\n}\n\nvoid WriteDst() {\n  string workDir = getenv(\"GISBasic\");\n  string demPath = workDir + \"/../Data/Terrain/dst.tif\";\n\n  GDALDriver *pDriver =\n      GetGDALDriverManager()-&gt;GetDriverByName(\"GTIFF\");  //å›¾åƒé©±åŠ¨\n  char **ppszOptions = NULL;\n  ppszOptions =\n      CSLSetNameValue(ppszOptions, \"BIGTIFF\", \"IF_NEEDED\");  //é…ç½®å›¾åƒä¿¡æ¯\n  GDALDataset *dst = pDriver-&gt;Create(demPath.c_str(), demWidth, demHeight, 4,\n                                     GDT_Byte, ppszOptions);\n  if (!dst) {\n    printf(\"Can't Write Image!\");\n    return;\n  }\n\n  dst-&gt;SetGeoTransform(geoTransform);\n\n  int depth = sizeof(uint8_t);\n  dst-&gt;RasterIO(GF_Write, 0, 0, demWidth, demHeight, dstBuf.data(), demWidth,\n                demHeight, GDT_Byte, dstBandNum, nullptr, dstBandNum * depth,\n                demWidth * dstBandNum * depth, depth);\n\n  GDALClose(dst);\n  dst = nullptr;\n}\n\nint main() {\n  GDALAllRegister();  // GDALæ‰€æœ‰æ“ä½œéƒ½éœ€è¦å…ˆæ³¨å†Œæ ¼å¼\n\n  //è®¾ç½®Projæ•°æ®\n  std::string projDataPath = getenv(\"GISBasic\");\n  projDataPath += \"/share/proj\";\n  CPLSetConfigOption(\"PROJ_LIB\", projDataPath.c_str());\n\n  ReadDem();\n\n  InitColorTable();\n\n  double heightThreshold = startHeight;\n  while (heightThreshold &lt; endHeight) {\n    heightThresholdList.push_back(heightThreshold);\n    heightThreshold = heightThreshold + heightInterval;\n  }\n\n  if (heightThresholdList.size() == 1) {\n    heightRGBList.push_back(tableRGB[0]);\n  } else {\n    size_t step = tableRGB.size() / (heightThresholdList.size() - 1);\n    size_t index = 0;\n    for (size_t i = 0; i &lt; heightThresholdList.size() - 1; i++) {\n      heightRGBList.push_back(tableRGB[index]);\n      index = index + step;\n    }\n    heightRGBList.push_back(tableRGB[tableRGB.size() - 1]);\n  }\n\n  HandleDem();\n\n  WriteDst();\n\n  return 0;\n}\n</code></pre>\n<p>ä¸åŸºäºçŸ¢é‡è¦ç´ çš„å‡ ä½•è¿ç®—ä¸åŒï¼ŒåŸºäºæ …æ ¼çš„è¿ç®—æ›´å¤šçš„æ˜¯åŸºäºå›¾åƒå¤„ç†çš„æ€æƒ³ã€‚æˆ‘ä»¬å¹¶ä¸çŸ¥é“æ¯ä¸€æ¡å…·ä½“çš„ç­‰é«˜çº¿åœ¨å“ªé‡Œï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å‘æ …æ ¼ä¸­æ’å€¼ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯å¦‚æœè¯¥æ …æ ¼æ‰€ä»£è¡¨çš„ç‚¹çš„é«˜ç¨‹å¤§äºé«˜ç¨‹åŒºé—´çš„ä¸´ç•Œå€¼ï¼Œé‚£ä¹ˆå°±å‘å…¶å¡«å……åˆé€‚çš„é¢œè‰²ï¼›æŒ‰ç…§é«˜ç¨‹åŒºé—´æ ¼å¼å¡«å……å¤šæ¬¡ï¼Œç›´åˆ°æ‰€æœ‰é«˜ç¨‹åŒºé—´éƒ½å¡«å……å®Œæˆã€‚è¿™æ ·ï¼Œç­‰é«˜çº¿å°±ç”±ä¸åŒçš„é¢œè‰²åŒºé—´ä½“ç°å‡ºæ¥äº†ã€‚æœ€ç»ˆç”Ÿæˆçš„ç­‰é«˜çº¿å›¾å¦‚ä¸‹å›¾6.21æ‰€ç¤ºã€‚</p>\n<p><img alt=\"å›¾6.21 æ ¹æ®DEMç”Ÿæˆç­‰é«˜çº¿å›¾\" class=\"lazyload\" /></p>\n<h1 id=\"ç»“è¯­\">ç»“è¯­</h1>\n<p>åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬è¯¦ç»†è®ºè¿°äº†ä¸€ç§ç»¼åˆäº†çŸ¢é‡ç‰¹æ€§ä¸æ …æ ¼ç‰¹æ€§çš„åœ°ç†ç©ºé—´æ•°æ®â€”â€”åœ°å½¢ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬å‰é¢å¯¹çŸ¢é‡å’Œæ …æ ¼æŒæ¡çš„æ¯”è¾ƒç†Ÿç»ƒï¼ŒæŒæ¡åœ°å½¢ç›¸å…³çš„çŸ¥è¯†ä¹Ÿä¸æ˜¯å¤ªéš¾ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜ä»‹ç»äº†ä¸€äº›åœ°å½¢æ•°æ®çš„åŸºæœ¬å¤„ç†æ–¹æ³•ï¼Œåœ°å½¢å†…æ’ç®—æ³•ï¼Œæ™•æ¸²å›¾ä¸ç­‰é«˜çº¿å›¾çš„åˆ¶ä½œã€‚å…¶å®åœ°å½¢ç›¸å…³çš„çŸ¥è¯†éå¸¸ä¹‹ä¸°å¯Œï¼Œè¿œä¸æ˜¯æœ¬ç« æœ‰é™çš„å†…å®¹æ‰€èƒ½æ¶µç›–çš„ã€‚è€Œä¸”ï¼Œåœ°å½¢æ•°æ®æœ‰å…¶æ•°æ®æ•æ„Ÿæ€§ï¼Œæ™®é€šä»ä¸šè€…æƒ³è·å–é«˜ç²¾åº¦çš„æ•°æ®è¿›è¡Œæ·±å…¥ç ”ç©¶ä¹Ÿååˆ†ä¸æ˜“ã€‚ä¸è¿‡è¿˜æ˜¯é‚£å¥è¯ï¼Œç¤ºä¾‹çš„ç»“æœä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯è¦äº†è§£å…¶åº•å±‚çš„åŸç†ï¼Œå»ºç«‹ä¸€ä¸ªç›¸å¯¹ç³»ç»Ÿè€Œå…¨é¢çš„è®¤çŸ¥ï¼Œåœ¨é‡åˆ°æ›´ä¸ºå¤æ‚çš„éš¾é¢˜æ—¶æ‰èƒ½å¿ƒä¸­ä¸æ…Œã€‚</p>\n<hr />\n<p>æœ¬æ–‡èŠ‚é€‰è‡ªä½œè€…æ–°ä¹¦ã€ŠGISåŸºç¡€åŸç†ä¸æŠ€æœ¯å®è·µã€‹ç¬¬6ç« ã€‚ä¹¦ä¸­ç³»ç»Ÿè®²è§£ GIS æ ¸å¿ƒç†è®ºä¸å¤šè¯­è¨€å®æˆ˜ï¼Œé€‚åˆå¼€å‘è€…ä¸é«˜æ ¡å¸ˆç”Ÿã€‚</p>\n<p>ğŸ“š <strong>é…å¥—èµ„æºå¼€æº</strong>ï¼š<a href=\"https://github.com/fafa1899/GISBasic\" rel=\"noopener nofollow\" target=\"_blank\">GitHub</a> | <a href=\"https://gitcode.com/charlee44/GISBasic\" rel=\"noopener nofollow\" target=\"_blank\">GitCode</a></p>\n<p>ğŸ›’ <strong>æ”¯æŒæ­£ç‰ˆ</strong>ï¼š<a href=\"https://item.jd.com/14603137.html\" rel=\"noopener nofollow\" target=\"_blank\">äº¬ä¸œ</a>ï½œ<a href=\"https://product.dangdang.com/29988568.html\" rel=\"noopener nofollow\" target=\"_blank\">å½“å½“</a></p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-22 21:19</span>&nbsp;\n<a href=\"https://www.cnblogs.com/charlee44\">charlee44</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">31</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "AIå¼€å‘-python-langchainæ¡†æ¶ï¼ˆ1-4åŠ¨æ€å°‘æ ·æœ¬æç¤ºï¼‰",
      "link": "https://www.cnblogs.com/yclh/p/19518845",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/yclh/p/19518845\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-22 19:31\">\n    <span>AIå¼€å‘-python-langchainæ¡†æ¶ï¼ˆ1-4åŠ¨æ€å°‘æ ·æœ¬æç¤ºï¼‰</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body blogpost-body-html\" id=\"cnblogs_post_body\">\n<p class=\"qwen-markdown-paragraph\"><span class=\"qwen-markdown-text\">è¿™ä¸ªä»£ç çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯ï¼š<strong class=\"qwen-markdown-strong\"><span class=\"qwen-markdown-text\">åŸºäºè¾“å…¥è¯çš„é•¿åº¦åŠ¨æ€é€‰æ‹©åä¹‰è¯ç¤ºä¾‹ï¼Œå¹¶è°ƒç”¨å¤§æ¨¡å‹ç”Ÿæˆåä¹‰è¯</span></strong><span class=\"qwen-markdown-text\">ï¼Œä½“ç°äº† <strong class=\"qwen-markdown-strong\"><span class=\"qwen-markdown-text\">â€œåŠ¨æ€å°‘æ ·æœ¬æç¤ºï¼ˆDynamic Few-Shot Promptingï¼‰â€</span></strong><span class=\"qwen-markdown-text\"> ä¸ <strong class=\"qwen-markdown-strong\"><span class=\"qwen-markdown-text\">â€œä¸Šä¸‹æ–‡é•¿åº¦æ„ŸçŸ¥çš„ç¤ºä¾‹é€‰æ‹©â€</span></strong><span class=\"qwen-markdown-text\"> çš„èƒ½åŠ›ã€‚</span></span></span></span></p>\n<div class=\"cnblogs_Highlighter\">\n<pre class=\"brush:python;gutter:true;\">from langchain.prompts import FewShotPromptTemplate, PromptTemplate\nfrom langchain.prompts.example_selector import LengthBasedExampleSelector\nfrom langchain_core.output_parsers import StrOutputParser\nfrom langchain_openai import ChatOpenAI\nimport os\nfrom dotenv import load_dotenv\n\n\n# å®šä¹‰åä¹‰è¯ä»»åŠ¡çš„ç¤ºä¾‹æ•°æ®é›†ï¼ˆfew-shot examplesï¼‰\n# æ¯ä¸ªç¤ºä¾‹åŒ…å«ä¸€ä¸ªè¾“å…¥è¯ï¼ˆinputï¼‰å’Œå¯¹åº”çš„åä¹‰è¯ï¼ˆoutputï¼‰\nexamples = [\n    {\"input\": \"å¼€å¿ƒ\", \"output\": \"ä¼¤å¿ƒ\"},\n    {\"input\": \"é«˜\", \"output\": \"çŸ®\"},\n    {\"input\": \"ç²¾åŠ›å……æ²›\", \"output\": \"æ²¡ç²¾æ‰“é‡‡\"},\n    {\"input\": \"ç²—\", \"output\": \"ç»†\"},\n]\n\n# å®šä¹‰å•ä¸ªç¤ºä¾‹çš„æ ¼å¼æ¨¡æ¿\n# ä½¿ç”¨ {input} å’Œ {output} ä½œä¸ºå ä½ç¬¦ï¼Œç”¨äºåç»­å¡«å……å…·ä½“å€¼\nexample_prompt = PromptTemplate(\n    input_variables=[\"input\", \"output\"],  # å£°æ˜æ¨¡æ¿ä¸­ä½¿ç”¨çš„å˜é‡å\n    template=\"Input: {input}\\nOutput: {output}\",  # ç¤ºä¾‹çš„æ–‡æœ¬æ ¼å¼\n)\n\n# åˆ›å»ºä¸€ä¸ªåŸºäºé•¿åº¦çš„ç¤ºä¾‹é€‰æ‹©å™¨ï¼ˆLengthBasedExampleSelectorï¼‰\n# ä½œç”¨ï¼šæ ¹æ®è¾“å…¥æç¤ºçš„æ€»é•¿åº¦åŠ¨æ€é€‰æ‹©æœ€åˆé€‚çš„ç¤ºä¾‹æ•°é‡ï¼Œé¿å…è¶…å‡ºæ¨¡å‹ä¸Šä¸‹æ–‡é™åˆ¶\nexample_selector = LengthBasedExampleSelector(\n    examples=examples,  # æä¾›æ‰€æœ‰å€™é€‰ç¤ºä¾‹\n    example_prompt=example_prompt,  # ç”¨äºæ ¼å¼åŒ–æ¯ä¸ªç¤ºä¾‹çš„æ¨¡æ¿\n    max_length=25,  # è®¾å®šæ•´ä¸ª promptï¼ˆå«å‰ç¼€ã€ç¤ºä¾‹ã€åç¼€ï¼‰çš„æœ€å¤§ token é•¿åº¦ï¼ˆæ­¤å¤„ä¸ºå­—ç¬¦æ•°è¿‘ä¼¼ï¼‰\n    # æ³¨æ„ï¼šLengthBasedExampleSelector é»˜è®¤ä½¿ç”¨ len(text) è®¡ç®—é•¿åº¦ï¼ˆéç²¾ç¡® token æ•°ï¼‰ï¼Œé€‚ç”¨äºç®€å•åœºæ™¯\n)\n\n# æ„å»ºåŠ¨æ€å°‘æ ·æœ¬æç¤ºæ¨¡æ¿ï¼ˆFewShotPromptTemplateï¼‰\n# å®ƒä¼šæ ¹æ®è¾“å…¥å†…å®¹çš„é•¿åº¦ï¼Œè‡ªåŠ¨ä» examples ä¸­é€‰æ‹©åˆé€‚æ•°é‡çš„ç¤ºä¾‹æ’å…¥åˆ° prompt ä¸­\ndynamic_prompt = FewShotPromptTemplate(\n    example_selector=example_selector,  # ä½¿ç”¨ä¸Šé¢å®šä¹‰çš„åŠ¨æ€é€‰æ‹©å™¨ï¼ˆè€Œéå›ºå®šç¤ºä¾‹åˆ—è¡¨ï¼‰\n    example_prompt=example_prompt,      # å•ä¸ªç¤ºä¾‹çš„æ ¼å¼\n    prefix=\"ç»™å‡ºæ¯ä¸ªè¾“å…¥çš„åä¹‰è¯\",       # æç¤ºçš„å¼€å¤´éƒ¨åˆ†ï¼ˆä»»åŠ¡æŒ‡ä»¤ï¼‰\n    suffix=\"Input: {adjective}\\nOutput:\",  # æç¤ºçš„ç»“å°¾éƒ¨åˆ†ï¼ŒåŒ…å«å¾…é¢„æµ‹çš„è¾“å…¥å ä½ç¬¦\n    input_variables=[\"adjective\"],      # å£°æ˜æœ€ç»ˆç”¨æˆ·è¾“å…¥çš„å˜é‡åï¼ˆä¸ suffix ä¸­çš„ {adjective} å¯¹åº”ï¼‰\n)\n\n# === æµ‹è¯• 1ï¼šè¾“å…¥è¾ƒçŸ­ï¼Œåº”é€‰æ‹©å¤šä¸ªç¤ºä¾‹ ===\nprint(\"ã€æµ‹è¯•1ã€‘è¾“å…¥è¾ƒçŸ­ï¼Œé€‰æ‹©å¤šä¸ªç¤ºä¾‹ï¼š\")\nprint(dynamic_prompt.format(adjective=\"big\"))\n\nprint('------------')\n\n# === æµ‹è¯• 2ï¼šè¾“å…¥å¾ˆé•¿ï¼Œåº”åªé€‰æ‹©å°‘é‡æˆ–ä¸€ä¸ªç¤ºä¾‹ä»¥æ§åˆ¶æ€»é•¿åº¦ ===\nlong_string = \"big and huge and massive and large and gigantic and tall and much much much much much bigger than everything else\"\nprint(\"ã€æµ‹è¯•2ã€‘è¾“å…¥å¾ˆé•¿ï¼Œä»…é€‰æ‹©ä¸€ä¸ªç¤ºä¾‹ï¼š\")\nprint(dynamic_prompt.format(adjective=long_string))\n\nprint('------------')\n\n# === æµ‹è¯• 3ï¼šåŠ¨æ€æ·»åŠ æ–°ç¤ºä¾‹ ===\n# å‘ç¤ºä¾‹é€‰æ‹©å™¨ä¸­æ–°å¢ä¸€ä¸ªç¤ºä¾‹ï¼ˆ\"èƒ–\" -&gt; \"ç˜¦\"ï¼‰\nnew_example = {\"input\": \"èƒ–\", \"output\": \"ç˜¦\"}\ndynamic_prompt.example_selector.add_example(new_example)\nprint(\"ã€æµ‹è¯•3ã€‘æ·»åŠ æ–°ç¤ºä¾‹åï¼ŒæŸ¥è¯¢'çƒ­æƒ…'ï¼š\")\nprint(dynamic_prompt.format(adjective=\"çƒ­æƒ…\"))\n\nprint('------------')\n\n# === é…ç½®å¹¶è°ƒç”¨ DeepSeek å¤§è¯­è¨€æ¨¡å‹ ===\n\nllm = ChatOpenAI(\n    api_key=os.getenv(\"DEEPSEEK_API_KEY\"),\n    base_url=os.getenv(\"DEEP_URL\"),  # Deepseek çš„ API åŸºç¡€åœ°å€\n    model=\"deepseek-v3:671b\",  # Deepseek å¯¹è¯æ¨¡å‹ï¼ˆå¯é€‰ï¼šdeepseek-chat-pro ç­‰é«˜çº§æ¨¡å‹ï¼‰\n    temperature=0.7,  # æ¸©åº¦å‚æ•°ï¼ˆ0-1ï¼Œè¶Šä½è¶Šç¨³å®šï¼‰\n    max_tokens=1024  # æœ€å¤§ç”Ÿæˆ tokens\n)\n\n# åˆ›å»ºå­—ç¬¦ä¸²è¾“å‡ºè§£æå™¨ï¼Œç”¨äºå°†æ¨¡å‹è¿”å›çš„ AIMessage è½¬æ¢ä¸ºçº¯æ–‡æœ¬\noutput_parser = StrOutputParser()\n\n# æ„å»ºå¤„ç†é“¾ï¼ˆChainï¼‰ï¼šprompt â†’ LLM â†’ output parser\n# ä½¿ç”¨ LangChain çš„ç®¡é“æ“ä½œç¬¦ `|` è¿æ¥å„ç»„ä»¶\nchain = dynamic_prompt | llm | output_parser\n\n# è°ƒç”¨é“¾ï¼Œä¼ å…¥è¾“å…¥å˜é‡ {\"adjective\": \"çƒ­æƒ…\"}\n# æ³¨æ„ï¼šchain.invoke() å†…éƒ¨å·²åŒ…å« llm è°ƒç”¨å’Œ output_parser è§£æï¼Œæ— éœ€å†æ‰‹åŠ¨è°ƒç”¨ output_parser\nmessage = chain.invoke({\"adjective\": \"çƒ­æƒ…\"})\n\n# âš ï¸ æ³¨æ„ï¼šä¸Šä¸€è¡Œ `chain.invoke()` å·²ç»è¿”å›äº†å­—ç¬¦ä¸²ï¼ˆå› ä¸ºæœ€åæ˜¯ StrOutputParserï¼‰\n# æ‰€ä»¥ä¸‹é¢è¿™è¡Œæ˜¯å¤šä½™çš„ï¼Œç”šè‡³ä¼šå¯¼è‡´é”™è¯¯ï¼ˆå› ä¸º message å·²æ˜¯ strï¼Œä¸èƒ½å†æ¬¡ invokeï¼‰\n# result = output_parser.invoke(message)  # âŒ é”™è¯¯ï¼šmessage æ˜¯ strï¼Œä¸æ˜¯ AIMessage\n\n# æ­£ç¡®åšæ³•ï¼šç›´æ¥ä½¿ç”¨ message ä½œä¸ºç»“æœ\nresult = message\n\nprint('###############')\nprint(\"ã€æ¨¡å‹è¾“å‡ºã€‘\")\nprint(result)\n</pre>\n</div>\n<h1>è¾“å‡ºç»“æœï¼š</h1>\n<div class=\"cnblogs_Highlighter\">\n<pre class=\"brush:python;gutter:true;\">ã€æµ‹è¯•1ã€‘è¾“å…¥è¾ƒçŸ­ï¼Œé€‰æ‹©å¤šä¸ªç¤ºä¾‹ï¼š\nç»™å‡ºæ¯ä¸ªè¾“å…¥çš„åä¹‰è¯\n\nInput: å¼€å¿ƒ\nOutput: ä¼¤å¿ƒ\n\nInput: é«˜\nOutput: çŸ®\n\nInput: ç²¾åŠ›å……æ²›\nOutput: æ²¡ç²¾æ‰“é‡‡\n\nInput: ç²—\nOutput: ç»†\n\nInput: big\nOutput:\n------------\nã€æµ‹è¯•2ã€‘è¾“å…¥å¾ˆé•¿ï¼Œä»…é€‰æ‹©ä¸€ä¸ªç¤ºä¾‹ï¼š\nç»™å‡ºæ¯ä¸ªè¾“å…¥çš„åä¹‰è¯\n\nInput: å¼€å¿ƒ\nOutput: ä¼¤å¿ƒ\n\nInput: big and huge and massive and large and gigantic and tall and much much much much much bigger than everything else\nOutput:\n------------\nã€æµ‹è¯•3ã€‘æ·»åŠ æ–°ç¤ºä¾‹åï¼ŒæŸ¥è¯¢'çƒ­æƒ…'ï¼š\nç»™å‡ºæ¯ä¸ªè¾“å…¥çš„åä¹‰è¯\n\nInput: å¼€å¿ƒ\nOutput: ä¼¤å¿ƒ\n\nInput: é«˜\nOutput: çŸ®\n\nInput: ç²¾åŠ›å……æ²›\nOutput: æ²¡ç²¾æ‰“é‡‡\n\nInput: ç²—\nOutput: ç»†\n\nInput: èƒ–\nOutput: ç˜¦\n\nInput: çƒ­æƒ…\nOutput:\n------------\n###############\nã€æ¨¡å‹è¾“å‡ºã€‘\nå†·æ·¡\n</pre>\n</div>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<h1>&nbsp;</h1>\n<h1>æ ¸å¿ƒè¦ç‚¹æ€»ç»“</h1>\n<div>&nbsp;</div>\n<div>è¿™æ®µä»£ç æ˜¯åŸºäº LangChain æ¡†æ¶å¯¹æ¥ DeepSeek å¤§æ¨¡å‹ï¼Œå®ç°ã€ŒåŠ¨æ€å°‘æ ·æœ¬ï¼ˆFew-Shotï¼‰åä¹‰è¯ç”Ÿæˆã€çš„å®Œæ•´æ¡ˆä¾‹ï¼Œæ ¸å¿ƒè§£å†³ã€Œå›ºå®šç¤ºä¾‹æ˜“è¶…å‡ºæ¨¡å‹ä¸Šä¸‹æ–‡é•¿åº¦ã€çš„é—®é¢˜ï¼Œé€šè¿‡åŠ¨æ€ç¤ºä¾‹é€‰æ‹©å™¨é€‚é…ä¸åŒé•¿åº¦è¾“å…¥ï¼ŒåŒæ—¶ç»“åˆ LangChain é“¾å¼è°ƒç”¨ç®€åŒ–æ¨¡å‹è°ƒç”¨æµç¨‹ï¼Œå…ˆæ˜ç¡®æ•´ä½“å®šä½ï¼Œå†æ‹†è§£æ ¸å¿ƒé‡ç‚¹ï¼š</div>\n<div>&nbsp;</div>\n<h2>ä¸€ã€æ•´ä½“æµç¨‹æ¦‚è§ˆï¼ˆæ ¸å¿ƒé€»è¾‘é“¾ï¼‰</h2>\n<div>&nbsp;</div>\n<div>ä»£ç éµå¾ª LangChain ã€Œç¤ºä¾‹å‡†å¤‡ â†’ åŠ¨æ€æç¤ºæ„å»º â†’ æ¨¡å‹è°ƒç”¨ â†’ ç»“æœè§£æã€çš„å°‘æ ·æœ¬å­¦ä¹ ç»å…¸æµç¨‹ï¼Œæ•´ä½“å¯æ¦‚æ‹¬ä¸ºï¼š</div>\n<div>\n<div dir=\"ltr\">\n<div>\n<pre><code>1. å®šä¹‰åä¹‰è¯ä»»åŠ¡çš„å›ºå®šç¤ºä¾‹æ•°æ®é›†ï¼Œä¸ºæ¨¡å‹æä¾›å‚è€ƒæ¡ˆä¾‹\n2. é…ç½®åŸºäºé•¿åº¦çš„ç¤ºä¾‹é€‰æ‹©å™¨ï¼Œæ ¹æ®è¾“å…¥æ–‡æœ¬é•¿åº¦åŠ¨æ€ç­›é€‰ç¤ºä¾‹æ•°é‡\n3. æ„å»ºåŠ¨æ€å°‘æ ·æœ¬æç¤ºæ¨¡æ¿ï¼Œè‡ªåŠ¨é€‚é…è¾“å…¥é•¿åº¦ç”Ÿæˆåˆè§„ Prompt\n4. åˆå§‹åŒ– DeepSeek æ¨¡å‹å®¢æˆ·ç«¯ï¼Œé…ç½®æ ¸å¿ƒè°ƒç”¨å‚æ•°\n5. æ„å»ºã€Œæç¤ºæ¨¡æ¿ â†’ å¤§æ¨¡å‹ â†’ è¾“å‡ºè§£æã€çš„é“¾å¼è°ƒç”¨æµç¨‹\n6. è°ƒç”¨é“¾æ¡å®Œæˆåä¹‰è¯ç”Ÿæˆï¼Œå¹¶è¾“å‡ºçº¯æ–‡æœ¬ç»“æœ\n</code></pre>\n</div>\n<div>&nbsp;</div>\n</div>\n</div>\n<div>&nbsp;</div>\n<h2>äºŒã€æ ¸å¿ƒé‡ç‚¹æ‹†è§£ï¼ˆå¿…æŒæ¡ï¼‰</h2>\n<div>&nbsp;</div>\n<h3>1. å°‘æ ·æœ¬æç¤ºï¼ˆFew-Shot Promptï¼‰æ ¸å¿ƒç»„ä»¶</h3>\n<div>&nbsp;</div>\n<div>è¿™æ˜¯å®ç°ã€Œæ¨¡å‹å‚è€ƒç¤ºä¾‹ç”Ÿæˆç»“æœã€çš„åŸºç¡€ï¼Œä¹Ÿæ˜¯ LangChain æç¤ºå·¥ç¨‹çš„æ ¸å¿ƒç”¨æ³•ï¼š</div>\n<div>&nbsp;</div>\n<div>&nbsp; &nbsp;<code>- ç¤ºä¾‹æ•°æ®é›†ï¼ˆexamplesï¼‰ï¼šä»¥é”®å€¼å¯¹å½¢å¼å­˜å‚¨ã€Œè¾“å…¥-è¾“å‡ºã€ç¤ºä¾‹ï¼Œä¸ºæ¨¡å‹æä¾›ä»»åŠ¡å‚è€ƒï¼ˆå¦‚\"å¼€å¿ƒ\"â†’\"ä¼¤å¿ƒ\"ï¼‰ï¼›</code></div>\n<div><code> - å•ç¤ºä¾‹æ¨¡æ¿ï¼ˆexample_promptï¼‰ï¼šå®šä¹‰å•ä¸ªç¤ºä¾‹çš„æ–‡æœ¬æ ¼å¼ï¼ˆInput/Output å›ºå®šæ ·å¼ï¼‰ï¼Œç»Ÿä¸€ç¤ºä¾‹å±•ç¤ºå½¢å¼ï¼›</code></div>\n<div>\n<div dir=\"ltr\">\n<div>\n<pre><code>- åŠ¨æ€å°‘æ ·æœ¬æ¨¡æ¿ï¼ˆFewShotPromptTemplateï¼‰ï¼šæ•´åˆç¤ºä¾‹é€‰æ‹©å™¨ã€å•ç¤ºä¾‹æ¨¡æ¿ã€å‰ç¼€/åç¼€ï¼Œç”Ÿæˆæœ€ç»ˆå‘ç»™æ¨¡å‹çš„å®Œæ•´ Promptï¼›\n  - prefixï¼šä»»åŠ¡æŒ‡ä»¤ï¼ˆ\"ç»™å‡ºæ¯ä¸ªè¾“å…¥çš„åä¹‰è¯\"ï¼‰ï¼Œæ˜ç¡®æ¨¡å‹è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼›\n  - suffixï¼šå¾…å¡«å……çš„ç”¨æˆ·è¾“å…¥å ä½ç¬¦ï¼Œæ‰¿æ¥åŠ¨æ€è¾“å…¥å†…å®¹ã€‚\n</code></pre>\n</div>\n</div>\n</div>\n<h3>2. åŠ¨æ€ç¤ºä¾‹é€‰æ‹©å™¨ï¼ˆLengthBasedExampleSelectorï¼‰</h3>\n<div>&nbsp;</div>\n<div>è¿™æ˜¯ä»£ç çš„æ ¸å¿ƒäº®ç‚¹ï¼Œè§£å†³ã€Œå›ºå®šç¤ºä¾‹æ•°é‡æ˜“è¶…ä¸Šä¸‹æ–‡é•¿åº¦ã€çš„é—®é¢˜ï¼š</div>\n<div>\n<div dir=\"ltr\">\n<div>\n<pre><code>æ ¸å¿ƒä½œç”¨ï¼šæ ¹æ®è¾“å…¥æ–‡æœ¬çš„é•¿åº¦ï¼Œè‡ªåŠ¨è®¡ç®—å¹¶é€‰æ‹©åˆé€‚æ•°é‡çš„ç¤ºä¾‹ï¼ˆè¾“å…¥è¶Šé•¿ï¼Œé€‰çš„ç¤ºä¾‹è¶Šå°‘ï¼‰ï¼Œé¿å… Prompt æ€»é•¿åº¦è¶…å‡ºæ¨¡å‹ä¸Šä¸‹æ–‡é™åˆ¶ï¼›\nå…³é”®å‚æ•°ï¼š\n  - examplesï¼šå€™é€‰ç¤ºä¾‹åˆ—è¡¨ï¼›\n  - example_promptï¼šç¤ºä¾‹æ ¼å¼åŒ–æ¨¡æ¿ï¼ˆç”¨äºè®¡ç®—å•ç¤ºä¾‹é•¿åº¦ï¼‰ï¼›\n  - max_lengthï¼šPrompt å…è®¸çš„æœ€å¤§é•¿åº¦ï¼ˆæ­¤å¤„ä¸ºå­—ç¬¦æ•°è¿‘ä¼¼å€¼ï¼‰ã€‚\n</code></pre>\n</div>\n<div>&nbsp;</div>\n</div>\n</div>\n<div>&nbsp;</div>\n<h3>3. LangChain é“¾å¼è°ƒç”¨ï¼ˆ| æ“ä½œç¬¦ï¼‰</h3>\n<div>&nbsp;</div>\n<div>ç®€åŒ–å¤šç»„ä»¶åä½œæµç¨‹ï¼Œæ˜¯ LangChain æ ¸å¿ƒè®¾è®¡ç†å¿µï¼š</div>\n<div>\n<div dir=\"ltr\">\n<div>\n<pre><code>- é“¾æ¡æ„æˆï¼šdynamic_promptï¼ˆç”Ÿæˆ Promptï¼‰ | llmï¼ˆè°ƒç”¨æ¨¡å‹ï¼‰ | output_parserï¼ˆè§£æç»“æœï¼‰ï¼›\n- æ ¸å¿ƒä¼˜åŠ¿ï¼šæ— éœ€æ‰‹åŠ¨åˆ†æ­¥è°ƒç”¨ï¼ˆå…ˆæ ¼å¼åŒ– Promptã€å†è°ƒç”¨æ¨¡å‹ã€æœ€åè§£æç»“æœï¼‰ï¼Œä¸€è¡Œä»£ç å®Œæˆå…¨æµç¨‹ï¼›\n- è°ƒç”¨æ–¹å¼ï¼šchain.invoke({\"adjective\": \"çƒ­æƒ…\"}) ä¼ å…¥è¾“å…¥å˜é‡ï¼Œç›´æ¥è¿”å›è§£æåçš„çº¯æ–‡æœ¬ç»“æœã€‚\n</code></pre>\n</div>\n<div>&nbsp;</div>\n</div>\n</div>\n<div>&nbsp;</div>\n<h3>4. è¾“å‡ºè§£æå™¨ï¼ˆStrOutputParserï¼‰</h3>\n<div>&nbsp;</div>\n<div>è§£å†³ã€Œæ¨¡å‹è¿”å› AIMessage å¯¹è±¡â†’æå–çº¯æ–‡æœ¬ã€çš„é—®é¢˜ï¼š</div>\n<div>\n<div dir=\"ltr\">\n<div>\n<pre><code>æ ¸å¿ƒä½œç”¨ï¼šå°† LangChain æ¨¡å‹è¿”å›çš„ AIMessage ç±»å‹ï¼ˆå« content/metadata ç­‰å­—æ®µï¼‰è½¬æ¢ä¸ºçº¯å­—ç¬¦ä¸²ï¼Œç®€åŒ–ç»“æœä½¿ç”¨ï¼›\nå…³é”®æ³¨æ„ç‚¹ï¼šé“¾å¼è°ƒç”¨ä¸­å·²åŒ…å«è§£ææ­¥éª¤ï¼Œæ— éœ€æ‰‹åŠ¨å†æ¬¡è°ƒç”¨ output_parser.invoke()ï¼ˆå¦åˆ™ä¼šæŠ¥é”™ï¼‰ã€‚</code></pre>\n</div>\n</div>\n</div>\n<p>&nbsp;</p>\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-22 19:31</span>&nbsp;\n<a href=\"https://www.cnblogs.com/yclh\">ä¸‡ç¬‘ä½›</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">47</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "SEALå…¨åŒæ€åŠ å¯†BFVæ–¹æ¡ˆå…¥é—¨è¯¦è§£",
      "link": "https://www.cnblogs.com/zhaoweiwei/p/19510487/bfv",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/zhaoweiwei/p/19510487/bfv\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-22 15:50\">\n    <span>SEALå…¨åŒæ€åŠ å¯†BFVæ–¹æ¡ˆå…¥é—¨è¯¦è§£</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                    <div id=\"cnblogs_post_description\" style=\"display: none;\">\n        \n        æœ¬æ–‡ä»‹ç»å¾®è½¯çš„å¼€æºå…¨åŒæ€é¡¹ç›®SEALä¸­BFVæ–¹æ¡ˆçš„ç›¸å…³æ•°å­¦ç†è®ºåŸºç¡€ï¼Œä»¥åŠç›¸åº”åŠ è§£å¯†çš„ä¸»è¦æµç¨‹ï¼Œæœ€åç®€å•åœ°ä»‹ç»äº†SEALæºç çš„ç¼–è¯‘è¿‡ç¨‹åŠç®€å•åº”ç”¨ç¤ºä¾‹ã€‚\n    </div>\n<div class=\"blogpost-body blogpost-body-html\" id=\"cnblogs_post_body\">\n<p>Microsoft SEALï¼ˆSimple Encrypted Arithmetic Libraryï¼‰æ˜¯å¾®è½¯å¼€æºçš„è½»é‡çº§ã€é«˜æ€§èƒ½å…¨åŒæ€åŠ å¯†ï¼ˆFHEï¼‰åº“ï¼Œä¸“ä¸ºæ•´æ•°/æµ®ç‚¹æ•°çš„å¯†æ–‡è¿ç®—è®¾è®¡ï¼Œæ”¯æŒBFVã€CKKSã€BGVç­‰ä¸»æµFHEæ–¹æ¡ˆï¼Œå¹¿æ³›åº”ç”¨äºéšç§è®¡ç®—ã€è”é‚¦å­¦ä¹ ã€æ•°æ®åŠ å¯†ç­‰åœºæ™¯ï¼Œæºç ï¼š<a href=\"https://github.com/microsoft/SEAL\" rel=\"noopener nofollow\" target=\"_blank\">https://github.com/microsoft/SEAL</a>ã€‚</p>\n<h1>1 æ•°å­¦åŸºç¡€</h1>\n<h2>1.1 å¤šé¡¹å¼ç¯</h2>\n<p>SEALä½¿ç”¨çš„åŸºç¡€ç¯æ˜¯ï¼š</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/465567/202601/465567-20260121153443048-88951557.png\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></p>\n<p align=\"left\">BFVçš„æ‰€æœ‰è¿ç®—éƒ½åœ¨è¿™ä¸ªå¤šé¡¹å¼ç¯ä¸­è¿›è¡Œï¼Œç¬¦å·å«ä¹‰å¦‚ä¸‹ï¼š</p>\n<p align=\"left\">Z<sub>q</sub>ï¼šç³»æ•°åŸŸï¼Œå³å¤šé¡¹å¼çš„æ‰€æœ‰ç³»æ•°éƒ½å–è‡ªâ€œæ¨¡qçš„æ•´æ•°é›†åˆâ€ï¼Œqç§°ä¸ºç³»æ•°æ¨¡æ•°ï¼ˆä¸€ä¸ªå¤§ç´ æ•°æˆ–å¤šä¸ªç´ æ•°çš„ä¹˜ç§¯ï¼‰ï¼Œå†³å®šå¯†æ–‡çš„å™ªå£°å®¹å¿åº¦å’Œè¿ç®—æ·±åº¦ã€‚</p>\n<p align=\"left\">x<sup>N</sup>+1ï¼šå¤šé¡¹å¼æ¨¡ï¼Œè¦æ±‚Næ˜¯2çš„æ•´æ•°å¹‚ï¼ˆå¦‚4096ã€8192ï¼‰ï¼Œæ»¡è¶³x<sup>N</sup>â‰¡-1 (mod x<sup>N</sup>+1)ï¼Œè¿™æ„å‘³ç€æ‰€æœ‰å¤šé¡¹å¼çš„æ¬¡æ•°éƒ½ä¸ä¼šè¶…è¿‡N-1ï¼ˆè¶…è¿‡çš„é¡¹å¯é€šè¿‡x<sup>N</sup> = -1é™æ¬¡ï¼‰ã€‚</p>\n<p align=\"left\">R<sub>q</sub>å…ƒç´ å½¢å¼ï¼šä»»æ„å…ƒç´ æ˜¯ä¸€ä¸ªæ¬¡æ•°â‰¤ N - 1çš„å¤šé¡¹å¼ï¼Œå½¢å¦‚ï¼š</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/465567/202601/465567-20260121154506434-1453063209.png\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></p>\n<p>&nbsp;</p>\n<h2>1.2 æ˜æ–‡ç©ºé—´</h2>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/465567/202601/465567-20260121155707555-629451098.png\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></p>\n<p>æ˜æ–‡ï¼ˆå¾…åŠ å¯†çš„æ•´æ•°ï¼‰ä¼šè¢«ç¼–ç ä¸ºR<sub>t</sub>ä¸­çš„å¤šé¡¹å¼ï¼Œtæ»¡è¶³tâ‰¡1 (mod 2N)ï¼Œè¿™æ˜¯æ‰¹é‡åŠ å¯†çš„ç¡¬æ€§è¦æ±‚ï¼Œæ˜æ–‡åœ¨è¿›è¡ŒåŠ å¯†å‰è¦è¿›è¡Œç¼–ç ï¼Œæœ‰ä¸¤ç§ç¼–ç æ–¹å¼ï¼š</p>\n<p><strong>å•æ•´æ•°ç¼–ç </strong>ï¼šå°†å•ä¸ªæ•´æ•°mç¼–ç ä¸ºå¸¸æ•°å¤šé¡¹å¼f(x)=mï¼Œå³æ‰€æœ‰é«˜æ¬¡é¡¹ç³»æ•°ä¸º0ã€‚</p>\n<p><strong>æ‰¹é‡ç¼–ç </strong>ï¼šå°†Nä¸ªå°æ•´æ•°[m<sub>0</sub>,m<sub>1</sub>,...,m<sub>N-1</sub>]ç›´æ¥åšä¸ºå¤šé¡¹å¼çš„ç³»æ•°ï¼Œç¼–ç ä¸ºï¼š</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/465567/202601/465567-20260121160312132-985918846.png\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></p>\n<h2>1.3 RLWEé—®é¢˜</h2>\n<p align=\"left\">BFVçš„å®‰å…¨æ€§åŸºäºRLWEé—®é¢˜ï¼ˆRing Learning With Errorsï¼‰çš„è®¡ç®—å›°éš¾æ€§ï¼Œç®€å•æè¿°ä¸ºï¼š</p>\n<p align=\"left\">ç»™å®šå¤šé¡¹å¼R<sub>q</sub>ï¼Œé€‰æ‹©ä¸€ä¸ªç§˜å¯†å¤šé¡¹å¼s(x)âˆˆR<sub>q</sub>ï¼ˆç³»æ•°ä¸º0/1çš„çŸ­å¤šé¡¹å¼ï¼‰ï¼Œä»¥åŠå¤§é‡çš„â€œå™ªå£°å¤šé¡¹å¼å¯¹â€ï¼ˆa<sub>i</sub>(x), b<sub>i</sub>(x)ï¼‰ï¼Œå…¶ä¸­a<sub>i</sub>(x)æ˜¯éšæœºç”Ÿæˆçš„ï¼Œb<sub>i</sub>(x)=-a<sub>i</sub>(x)s(x)+e<sub>i</sub>(x) (mod q)æ˜¯é€šè¿‡ç§˜å¯†å¤šé¡¹å¼s(x)è®¡ç®—å¾—åˆ°çš„â€œå“åº”å¤šé¡¹å¼â€ï¼ŒåŠ å…¥å™ªå£°e<sub>i</sub>(x)æ˜¯ä¸ºäº†è®©b<sub>i</sub>(x)çœ‹èµ·æ¥åƒä¸€ä¸ªå®Œå…¨éšæœºçš„å¤šé¡¹å¼ï¼Œä»è€Œéšè—s(x)çš„å­˜åœ¨ï¼Œè€Œåœ¨è®¡ç®—ä¸Šæ— æ³•ä»è¿™äº›å¤šé¡¹å¼å¯¹ä¸­æ¢å¤å‡ºç§˜å¯†å¤šé¡¹å¼s(x)ã€‚å¯¹äºb<sub>i</sub>(x)å…¶ç”Ÿæˆæ—¶æ¯ä¸€éƒ¨åˆ†çš„ä½œç”¨å¦‚ä¸‹ï¼š</p>\n<p align=\"left\">a<sub>i</sub>(x)ï¼šä»å¤šé¡¹å¼ç¯R<sub>q</sub>ä¸­å‡åŒ€éšæœºç”Ÿæˆçš„å¤šé¡¹å¼ï¼Œç›¸å½“äºâ€œå…¬å…±è¾“å…¥â€ï¼Œå¯ä»¥å…¬å¼€ã€‚</p>\n<p align=\"left\">s(x)ï¼šç§˜å¯†å¤šé¡¹å¼ï¼ˆç³»æ•°ä»…ä¸º0æˆ–1ï¼‰ï¼Œæ˜¯æ•´ä¸ªRLWEé—®é¢˜çš„æ ¸å¿ƒï¼Œå¿…é¡»ä¸¥æ ¼ä¿å¯†ã€‚</p>\n<p align=\"left\">e<sub>i</sub>(x)ï¼šå°ç³»æ•°å™ªå£°å¤šé¡¹å¼ï¼ˆç³»æ•°ä»…ä¸º-1ã€0ã€1ï¼‰ï¼Œæ˜¯â€œéšè—ç§˜å¯†â€çš„å…³é”®ã€‚</p>\n<p align=\"left\">b<sub>i</sub>(x)ï¼šç”±a<sub>i</sub>(x)s(x)åŠ ä¸Šå™ªå£°å¾—åˆ°çš„ç»“æœï¼Œä¸ai(x)ä¸€èµ·æ„æˆå…¬å¼€çš„â€œå¤šé¡¹å¼å¯¹â€ã€‚</p>\n<p align=\"left\">å¦‚æœæ²¡æœ‰å™ªå£°e<sub>i</sub>(x)ï¼Œå³e<sub>i</sub>(x)=0ï¼Œé‚£ä¹ˆb<sub>i</sub>(x)=-a<sub>i</sub>(x)s(x) (mod q)ï¼Œæ­¤æ—¶æ”»å‡»è€…å¯ä»¥é€šè¿‡å¤šç»„(a<sub>i</sub>(x), b<sub>i</sub>(x))æ„å»ºçº¿æ€§æ–¹ç¨‹ç»„ï¼Œç›´æ¥è§£å¯†å‡ºç§˜å¯†å¤šé¡¹å¼s(x)ï¼Œè¿™å°±å®Œå…¨å¤±å»äº†å®‰å…¨æ€§ã€‚è€ŒåŠ å…¥å°å™ªå£°e<sub>i</sub>(x)åï¼š</p>\n<p align=\"left\">b<sub>i</sub>(x)ä¸å†æ˜¯a<sub>i</sub>(x)s(x)çš„ç²¾ç¡®ç»“æœï¼Œè€Œæ˜¯ä¸€ä¸ªâ€œè¿‘ä¼¼å€¼â€ï¼›</p>\n<p align=\"left\">è¿™ä¸ªè¿‘ä¼¼å€¼çš„è¯¯å·®è¢«æ§åˆ¶åœ¨å¾ˆå°çš„èŒƒå›´å†…ï¼ˆç”±e<sub>i</sub>(x)çš„ç³»æ•°å¤§å°å†³å®šï¼‰ï¼›</p>\n<p align=\"left\">ä»è®¡ç®—è§’åº¦ï¼Œç›®å‰æ²¡æœ‰ä»»ä½•ç®—æ³•ï¼ˆåŒ…æ‹¬é‡å­ç®—æ³•ï¼‰èƒ½é«˜æ•ˆåœ°ä»è¿™äº›å¸¦å™ªå£°çš„è¿‘ä¼¼ç»“æœä¸­æ¢å¤å‡ºs(x)ï¼Œè¿™æ­£æ˜¯RLWEé—®é¢˜çš„â€œè®¡ç®—å›°éš¾æ€§â€æ¥æºï¼Œä¹Ÿæ˜¯BFVé€‚åˆåé‡å­ç§˜å¯†åœºæ™¯çš„åŸå› ã€‚</p>\n<h2>1.4 ç¼©æ”¾å› å­</h2>\n<p>åœ¨BFVåŒæ€åŠ å¯†æ–¹æ¡ˆä¸­ï¼Œç¼©æ”¾å› å­ï¼ˆScaling Factorï¼‰æ˜¯è¿æ¥æ˜æ–‡ç©ºé—´ï¼ˆZ<sub>t</sub>ï¼‰å’Œå¯†æ–‡ç©ºé—´ï¼ˆZ<sub>q</sub>ï¼‰çš„æ ¸å¿ƒç³»æ•°ï¼Œæœ¬è´¨æ˜¯ä¸ºäº†è®©æ˜æ–‡å¤šé¡¹å¼èƒ½â€œé€‚é…â€ç³»æ•°æ¨¡æ•°qçš„èŒƒå›´ï¼ŒåŒæ—¶ä¿è¯è§£å¯†æ—¶å¯ä»¥ç²¾ç¡®è¿˜åŸæ˜æ–‡ã€‚BFVçš„æ˜æ–‡æ¨¡æ•°tè¿œå°äºç³»æ•°æ¨¡æ•°qï¼ˆt&lt;&lt;q)ï¼Œæ¯”å¦‚t=65537ï¼Œq=2<sup>60</sup>é‡çº§ã€‚</p>\n<p>æ˜æ–‡å¤šé¡¹å¼m(x)âˆˆR<sub>t</sub>çš„ç³»æ•°èŒƒå›´æ˜¯[0, t-1]ï¼Œè€Œå¯†æ–‡å¤šé¡¹å¼c(x)âˆˆR<sub>q</sub>çš„ç³»æ•°èŒƒå›´æ˜¯[0, q-1]ï¼Œå¦‚æœç›´æ¥å°†æ˜æ–‡m(x)æ”¾å…¥å¯†æ–‡å…¬å¼ï¼Œç”±äºtå¤ªå°ï¼Œæ˜æ–‡ä¿¡æ¯ä¼šè¢«å™ªå£°å’Œæ©ç å®Œå…¨æ·¹æ²¡ï¼Œæ— æ³•è§£å¯†ã€‚å› æ­¤éœ€è¦ä¸€ä¸ªç¼©æ”¾å› å­ï¼Œå°†æ˜æ–‡ç³»æ•°æ”¾å¤§åˆ°qçš„é‡çº§ï¼Œå†å‚ä¸å¯†æ–‡è®¡ç®—ã€‚ç¼©æ”¾å› å­è´¯ç©¿åŠ å¯†å’Œè§£å¯†ä¸¤ä¸ªæ ¸å¿ƒæ­¥éª¤ï¼Œæ˜¯æ˜æ–‡å’Œå¯†æ–‡çš„â€œæ¡¥æ¢â€ã€‚</p>\n<p>ï¼ˆ1ï¼‰åŠ å¯†æ—¶ï¼šæ˜æ–‡æ”¾å¤§</p>\n<p>åœ¨åŠ å¯†æ­¥éª¤ä¸­ï¼Œæ˜æ–‡å¤šé¡¹å¼m(x)ä¸ä¼šç›´æ¥ä»£å…¥å¯†æ–‡å…¬å¼ï¼Œè€Œæ˜¯å…ˆä¹˜äºç¼©æ”¾å› å­Î”ï¼Œå†æ”¾å…¥åˆ°å…¬å¼ï¼š</p>\n<p>&nbsp;</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/465567/202601/465567-20260122103147623-1899019256.png\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></p>\n<p>ä½œç”¨ï¼šå°†æ˜æ–‡ç³»æ•°ä»[0, t-1]æ”¾å¤§åˆ°[0,&nbsp;Î”*(t-1)]ï¼Œè¿™ä¸ªèŒƒå›´åœ¨qçš„é‡çº§å†…ï¼Œèƒ½é¿å…æ˜æ–‡è¢«å™ªå£°è¦†ç›–ã€‚</p>\n<p>ï¼ˆ2ï¼‰è§£å¯†æ—¶ï¼šæ˜æ–‡ç¼©å°</p>\n<p>è§£å¯†çš„æ ¸å¿ƒæ­¥éª¤æ˜¯å…ˆè®¡ç®—èšåˆå¤šé¡¹å¼D(ct)ï¼Œä»£å…¥åŠ å¯†å…¬å¼åå¯å¾—ï¼š</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/465567/202601/465567-20260122103532065-202805649.png\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></p>\n<p>æ­¤æ—¶éœ€è¦åå‘ç¼©æ”¾æ¥è¿˜åŸæ˜æ–‡ï¼š</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/465567/202601/465567-20260122103637412-765250880.png\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></p>\n<p>æ¦‚æ‹¬æ¥è¯´ï¼Œç¼©æ”¾å› å­ä¸ä¼šç›´æ¥å‚ä¸è¿ç®—ï¼Œä½†ä¼šé—´æ¥å½±å“å™ªå£°çš„å¢é•¿é€Ÿåº¦ï¼š</p>\n<p align=\"left\">1) åŠ æ³•è¿ç®—ï¼šå¯†æ–‡åŠ æ³•æ˜¯ç³»æ•°ç›´æ¥ç›¸åŠ ï¼Œå™ªå£°çº¿æ€§å åŠ ï¼Œç¼©æ”¾å› å­ä¸å½±å“å™ªå£°å¢é•¿ï¼›</p>\n<p align=\"left\">2) ä¹˜æ³•è¿ç®—ï¼šå¯†æ–‡ä¹˜æ³•æ˜¯å¤šé¡¹å¼ä¹˜æ³•ï¼Œå™ªå£°ä¼šå¹³æ–¹å¢é•¿ï¼Œè€Œç¼©æ”¾å› å­Î”è¶Šå¤§ï¼Œå™ªå£°çš„è§„æ¨¡ä¹Ÿä¼šè¶Šå¤§ï¼Œå¯¼è‡´è¿ç®—æ·±åº¦é™ä½ã€‚</p>\n<p align=\"left\">å› æ­¤ï¼Œåœ¨å‚æ•°é…ç½®æ—¶ï¼Œéœ€è¦åœ¨â€œæ˜æ–‡èŒƒå›´ï¼ˆtå¤§å°ï¼‰â€å’Œâ€œè¿ç®—æ·±åº¦ï¼ˆqå¤§å°ï¼‰â€ä¹‹é—´åšæƒè¡¡ï¼š</p>\n<p align=\"left\">è‹¥tå¢å¤§â†’Î”å‡å°â†’å™ªå£°å®¹å¿åº¦æå‡â†’è¿ç®—æ·±åº¦å¢åŠ ï¼›</p>\n<p align=\"left\">è‹¥tå‡å°â†’Î”å¢å¤§â†’å™ªå£°å®¹å¿åº¦é™ä½â†’è¿ç®—æ·±åº¦å‡å°ã€‚</p>\n<p align=\"left\">æ‰€ä»¥tä¸Î”æˆåæ¯”ï¼Œéœ€æ ¹æ®ä¸šåŠ¡éœ€æ±‚å¹³è¡¡æ˜æ–‡èŒƒå›´å’Œè¿ç®—æ·±åº¦ã€‚</p>\n<h1>2 BFVæ ¸å¿ƒæµç¨‹</h1>\n<h2>2.1 å‚æ•°é…ç½®</h2>\n<p>å‚æ•°é…ç½®å†³å®šæ–¹æ¡ˆçš„æ€§èƒ½ä¸å®‰å…¨æ€§ï¼ŒBFVæ ¸å¿ƒå‚æ•°æœ‰4ä¸ªï¼Œéœ€ä¸¥æ ¼æ»¡è¶³æ•°å­¦çº¦æŸï¼š</p>\n<p><img alt=\"image\" height=\"249\" src=\"https://img2024.cnblogs.com/blog/465567/202601/465567-20260121155055832-1091265286.png\" style=\"display: block; margin-left: auto; margin-right: auto;\" width=\"798\" /></p>\n<p>å‚æ•°çº¦æŸï¼šéœ€æ»¡è¶³q&gt;t*(2N)<sup>d</sup>*Bï¼ˆdæ˜¯ç›®æ ‡è¿ç®—æ·±åº¦ï¼ŒBæ˜¯å™ªå£°ä¸Šé™ï¼‰ï¼Œå¦åˆ™è¿ç®—è¿‡ç¨‹ä¸­å™ªå£°ä¼šâ€œçˆ†ç‚¸â€å¯¼è‡´è§£å¯†å¤±è´¥ã€‚</p>\n<h2>2.2 å¯†é’¥ç”Ÿæˆ</h2>\n<p>åŸºäºRLWEé—®é¢˜ç”Ÿæˆç§é’¥ã€å…¬é’¥ã€é‡çº¿æ€§åŒ–å¯†é’¥3ä¸­å¯†é’¥ï¼Œæ ¸å¿ƒæ˜¯æ„é€ å«å™ªå£°çš„å¤šé¡¹å¼å¯¹ã€‚</p>\n<p>ï¼ˆ1ï¼‰ç§é’¥ï¼ˆskï¼‰</p>\n<p>éšæœºç”Ÿæˆä¸€ä¸ªçŸ­å¤šé¡¹å¼s(x)âˆˆR<sub>q</sub>ï¼Œç³»æ•°ä»…ä¸º0æˆ–1ï¼ˆå¦‚s(x) = 1 + x<sup>2</sup> + x<sup>5</sup>ï¼‰ï¼Œç§é’¥å°±æ˜¯s(x)ã€‚</p>\n<p>ï¼ˆ2ï¼‰å…¬é’¥ï¼ˆpkï¼‰</p>\n<p>éšæœºç”Ÿæˆå¤šé¡¹å¼a(x)âˆˆR<sub>q</sub>ï¼Œç”Ÿæˆå°å¸Œæ•°å™ªå£°å¤šé¡¹å¼e(x)âˆˆR<sub>q</sub>ï¼Œè®¡ç®—b(x) = -a(x)s(x) + e(x) (mod q)ï¼Œå…¬é’¥æ˜¯å¤šé¡¹å¼å¯¹pk = (b(x), a(x))ï¼Œå¯å…¬å¼€ä¼ æ’­ã€‚è¿™é‡Œçš„å™ªå£°e(x)è®©æ”»å‡»è€…æ— æ³•ä»å…¬é’¥å¯¹ä¸­æ¢å¤ç§é’¥s(x)ï¼Œç›®çš„æ˜¯è§£å†³â€œå…¬é’¥æœ¬èº«çš„å®‰å…¨æ€§â€ã€‚</p>\n<p>ï¼ˆ3ï¼‰é‡çº¿æ€§åŒ–å¯†é’¥ï¼ˆrlkï¼‰</p>\n<p>å¯†æ–‡ä¹˜æ³•ä¼šå¯¼è‡´å¯†æ–‡ä»â€œ2é¡¹å¤šé¡¹å¼â€è†¨èƒ€ä¸ºâ€œ3é¡¹å¤šé¡¹å¼â€ï¼Œåç»­è¿ç®—æ•ˆç‡éª¤é™ã€‚é‡çº¿æ€§åŒ–å¯†é’¥ç”¨äºå°†è†¨èƒ€åçš„å¯†æ–‡å‹ç¼©å›2é¡¹ï¼Œç”Ÿæˆé€»è¾‘ä¸å…¬é’¥ç±»ä¼¼ï¼Œæœ¬è´¨æ˜¯ä¸€ç»„æ‰©å±•çš„RLWEå¤šé¡¹å¼å¯¹ã€‚</p>\n<h2>2.3 åŠ å¯†</h2>\n<p>å°†æ˜æ–‡å¤šé¡¹å¼è½¬ä¸ºå¯†æ–‡å¤šé¡¹å¼ï¼ŒBFVçš„å¯†æ–‡æ˜¯R<sub>q</sub>ä¸­çš„2é¡¹å¤šé¡¹å¼å¯¹ct = (c<sub>0</sub>(x), c<sub>1</sub>(x))ï¼ŒåŠ å¯†è¿‡ç¨‹åˆ†ä¸¤æ­¥ï¼š</p>\n<p>ï¼ˆ1ï¼‰æ˜æ–‡ç¼–ç ï¼šå°†æ•´æ•°æ˜æ–‡mç¼–ç ä¸ºæ˜æ–‡å¤šé¡¹å¼m(x)âˆˆR<sub>t</sub>ï¼›</p>\n<p>ï¼ˆ2ï¼‰æ·»åŠ å™ªå£°ä¸æ··æ·†ï¼š</p>\n<p>éšæœºç”Ÿæˆä¸¤ä¸ªå°å™ªå£°å¤šé¡¹å¼e<sub>0</sub>(x),e<sub>1</sub>(x)âˆˆR<sub>q</sub>ï¼Œéšæœºç”Ÿæˆä¸€ä¸ªâ€œæ©ç å¤šé¡¹å¼â€u(x)âˆˆR<sub>q</sub>ï¼ˆç³»æ•°ä¸º0/1ï¼‰ï¼Œè®¡ç®—å¯†æ–‡ï¼š</p>\n<p><img alt=\"image\" height=\"72\" src=\"https://img2024.cnblogs.com/blog/465567/202601/465567-20260122101343624-1971179879.png\" style=\"display: block; margin-left: auto; margin-right: auto;\" width=\"506\" /></p>\n<p>æ ¸å¿ƒè®¾è®¡ï¼šå¯†æ–‡ä¸­åŒ…å«æ˜æ–‡ä¿¡æ¯m(x)ï¼Œä½†è¢«å™ªå£°e<sub>0</sub>/e<sub>1</sub>å’Œæ©ç u(x)æ··æ·†ï¼Œåªæœ‰ç§é’¥èƒ½å»é™¤æ··æ·†å’Œå™ªå£°ã€‚è¯¥æ­¥éª¤ä¸­çš„æ©ç å¤šé¡¹å¼u(x)å’Œå™ªå£°å¤šé¡¹å¼e<sub>0</sub>(x),e<sub>1</sub>(x)æ˜¯ä¸¤å¥—ç‹¬ç«‹çš„å®‰å…¨æœºåˆ¶ï¼Œå®ƒä»¬è§£å†³çš„æ˜¯å®Œå…¨ä¸åŒçš„é—®é¢˜ï¼Œä¸èƒ½äº’ç›¸æ›¿ä»£ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/465567/202601/465567-20260122145538684-995418377.png\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></p>\n<p>u(x)é€šè¿‡éšæœºç¼©æ”¾å®ç°å…¬é’¥å’Œæ˜æ–‡é—´çš„éå›ºå®šçº¿æ€§å…³ç³»ï¼Œå™ªå£°é€šè¿‡â€œè¿‘ä¼¼â€è¿›ä¸€æ­¥æ‰“ç ´å®ƒä»¬ä¹‹é—´ç²¾ç¡®çš„ä»£æ•°å…³ç³»ï¼Œä½¿å¾—æ”»å‡»è€…æ— æ³•ä»è¿‘ä¼¼å€¼ä¸­è¿˜åŸç²¾ç¡®æ˜æ–‡ã€‚</p>\n<h2>2.4 åŒæ€è¿ç®—</h2>\n<p>è¿™æ­¥çš„æ ¸å¿ƒæ˜¯ï¼šå¯†æ–‡è¿ç®—=å¤šé¡¹å¼ç¯è¿ç®—ï¼ŒBFVæ”¯æŒç§˜å¯†&amp;å¯†æ–‡ï¼ˆCt&amp;Ctï¼‰å’Œå¯†æ–‡&amp;æ˜æ–‡ï¼ˆCt&amp;Ptï¼‰çš„åŠ å‡ä¹˜è¿ç®—ï¼Œæ‰€æœ‰è¿ç®—éƒ½åœ¨å¤šé¡¹å¼ç¯R<sub>q</sub>ä¸­è¿›è¡Œï¼Œä¸”æ— éœ€å¯†é’¥ã€‚</p>\n<p><img alt=\"image\" height=\"252\" src=\"https://img2024.cnblogs.com/blog/465567/202601/465567-20260122102234951-828568152.png\" style=\"display: block; margin-left: auto; margin-right: auto;\" width=\"925\" /></p>\n<p>è¿ç®—åçš„å¯†æ–‡ä»ç„¶æ˜¯åˆæ³•çš„RLWEå¯†æ–‡ï¼Œå¯ç»§ç»­å‚ä¸åç»­è¿ç®—â€”â€”è¿™å°±æ˜¯ã€ŒåŒæ€æ€§ã€çš„ä½“ç°ã€‚</p>\n<h2>2.5 è§£å¯†</h2>\n<p>è§£å¯†æ˜¯åŠ å¯†çš„é€†è¿ç®—ï¼Œæ ¸å¿ƒæ˜¯å»é™¤å™ªå£°ã€è¿˜åŸæ˜æ–‡å¤šé¡¹å¼ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>\n<p>ï¼ˆ1ï¼‰å¯†æ–‡èšåˆ</p>\n<p>ç”¨ç§é’¥s(x)è®¡ç®—èšåˆå¤šé¡¹å¼ï¼š</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/465567/202601/465567-20260122102616840-333286614.png\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></p>\n<p>ä»£å…¥åŠ å¯†å…¬å¼å¯æ¨å¯¼ï¼š</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/465567/202601/465567-20260122102653366-486423113.png\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></p>\n<p>ï¼ˆ2ï¼‰å™ªå£°å»é™¤</p>\n<p>ç”±äºæ€»å™ªå£°e<sub>total</sub>&lt;q/(2t)ï¼Œå¯é€šè¿‡â€œèˆå…¥+æ¨¡è¿ç®—â€è¿˜åŸæ˜æ–‡ï¼š</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/465567/202601/465567-20260122102808245-1880527419.png\" style=\"display: block; margin-left: auto; margin-right: auto;\" />ï¼ˆ3ï¼‰æ˜æ–‡è§£ç </p>\n<p>å°†è§£å¯†åçš„å¤šé¡¹å¼m(x)è½¬æ¢å›æ•´æ•°ï¼ˆå•æ•´æ•°å–å¸¸æ•°é¡¹ï¼Œæ‰¹é‡åŠ å¯†å–æ‰€æœ‰ç³»æ•°ï¼‰ã€‚</p>\n<p>è§£å¯†æˆåŠŸæ¡ä»¶ï¼šæ€»å™ªå£°e<sub>total</sub>&lt;q/(2t)ï¼Œè‹¥è¿ç®—æ¬¡æ•°è¿‡å¤šå¯¼è‡´å™ªå£°çˆ†ç‚¸ï¼Œèˆå…¥åæ— æ³•è¿˜åŸæ˜æ–‡ï¼Œåˆ™ä¼šè§£å¯†å¤±è´¥â€”â€”è¿™æ˜¯BFVâ€œå±‚æ¬¡æ€§â€çš„æœ¬è´¨ï¼Œè¿ç®—æ·±åº¦æœ‰é™ã€‚</p>\n<h2>2.6 pythonç¤ºä¾‹</h2>\n<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„pythonç¤ºä¾‹ç¨‹åºï¼š</p>\n<div class=\"cnblogs_code\"><img class=\"code_img_closed\" id=\"code_img_closed_09b97ffc-eef3-46ba-bb50-d1e4cf620627\" src=\"https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif\" /><img class=\"code_img_opened\" id=\"code_img_opened_09b97ffc-eef3-46ba-bb50-d1e4cf620627\" src=\"https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif\" style=\"display: none;\" />\n<div class=\"cnblogs_code_hide\" id=\"cnblogs_code_open_09b97ffc-eef3-46ba-bb50-d1e4cf620627\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> numpy as np\n</span><span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> random\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">class</span><span style=\"color: rgba(0, 0, 0, 1);\"> PolynomialRing:\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">def</span> <span style=\"color: rgba(128, 0, 128, 1);\">__init__</span><span style=\"color: rgba(0, 0, 0, 1);\">(self, n, modulus):\n        self.n </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> n\n        self.modulus </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> modulus\n        self.phi </span>= np.zeros(n + 1, dtype=<span style=\"color: rgba(0, 0, 0, 1);\">int)\n        self.phi[0] </span>= 1<span style=\"color: rgba(0, 0, 0, 1);\">\n        self.phi[n] </span>= 1\n\n    <span style=\"color: rgba(0, 0, 255, 1);\">def</span><span style=\"color: rgba(0, 0, 0, 1);\"> poly_add(self, a, b):\n        result </span>= np.zeros(self.n, dtype=<span style=\"color: rgba(0, 0, 0, 1);\">int)\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">for</span> i <span style=\"color: rgba(0, 0, 255, 1);\">in</span><span style=\"color: rgba(0, 0, 0, 1);\"> range(self.n):\n            result[i] </span>= (a[i] + b[i]) %<span style=\"color: rgba(0, 0, 0, 1);\"> self.modulus\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> result\n\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">def</span><span style=\"color: rgba(0, 0, 0, 1);\"> poly_mul(self, a, b):\n        result </span>= np.zeros(2 * self.n - 1, dtype=<span style=\"color: rgba(0, 0, 0, 1);\">int)\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">for</span> i <span style=\"color: rgba(0, 0, 255, 1);\">in</span><span style=\"color: rgba(0, 0, 0, 1);\"> range(self.n):\n            </span><span style=\"color: rgba(0, 0, 255, 1);\">for</span> j <span style=\"color: rgba(0, 0, 255, 1);\">in</span><span style=\"color: rgba(0, 0, 0, 1);\"> range(self.n):\n                result[i </span>+ j] = (result[i + j] + a[i] * b[j]) %<span style=\"color: rgba(0, 0, 0, 1);\"> self.modulus\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> self.poly_mod(result)\n\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">def</span><span style=\"color: rgba(0, 0, 0, 1);\"> poly_mod(self, poly):\n        result </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> poly.copy()\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">for</span> i <span style=\"color: rgba(0, 0, 255, 1);\">in</span> range(len(result) - 1, self.n - 1, -1<span style=\"color: rgba(0, 0, 0, 1);\">):\n            </span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> result[i] !=<span style=\"color: rgba(0, 0, 0, 1);\"> 0:\n                coeff </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> result[i]\n                result[i] </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> 0\n                idx </span>= i -<span style=\"color: rgba(0, 0, 0, 1);\"> self.n\n                </span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> idx &lt;<span style=\"color: rgba(0, 0, 0, 1);\"> len(result):\n                    result[idx] </span>= (result[idx] - coeff) %<span style=\"color: rgba(0, 0, 0, 1);\"> self.modulus\n        result </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> result[:self.n]\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> result\n\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">def</span><span style=\"color: rgba(0, 0, 0, 1);\"> poly_sub(self, a, b):\n        result </span>= np.zeros(self.n, dtype=<span style=\"color: rgba(0, 0, 0, 1);\">int)\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">for</span> i <span style=\"color: rgba(0, 0, 255, 1);\">in</span><span style=\"color: rgba(0, 0, 0, 1);\"> range(self.n):\n            result[i] </span>= (a[i] - b[i]) %<span style=\"color: rgba(0, 0, 0, 1);\"> self.modulus\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> result\n\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">def</span><span style=\"color: rgba(0, 0, 0, 1);\"> poly_scale(self, a, scalar):\n        result </span>= np.zeros(self.n, dtype=<span style=\"color: rgba(0, 0, 0, 1);\">int)\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">for</span> i <span style=\"color: rgba(0, 0, 255, 1);\">in</span><span style=\"color: rgba(0, 0, 0, 1);\"> range(self.n):\n            result[i] </span>= (a[i] * scalar) %<span style=\"color: rgba(0, 0, 0, 1);\"> self.modulus\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> result\n\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">def</span><span style=\"color: rgba(0, 0, 0, 1);\"> random_poly(self):\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> np.random.randint(0, self.modulus, self.n)\n\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">def</span><span style=\"color: rgba(0, 0, 0, 1);\"> binary_poly(self):\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span> np.random.randint(0, 2<span style=\"color: rgba(0, 0, 0, 1);\">, self.n)\n\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">def</span> small_poly(self, bound=3<span style=\"color: rgba(0, 0, 0, 1);\">):\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span> np.random.randint(-bound, bound + 1<span style=\"color: rgba(0, 0, 0, 1);\">, self.n)\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">class</span><span style=\"color: rgba(0, 0, 0, 1);\"> BFV:\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">def</span> <span style=\"color: rgba(128, 0, 128, 1);\">__init__</span>(self, n=256, q=1048576, t=256<span style=\"color: rgba(0, 0, 0, 1);\">):\n        self.n </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> n\n        self.q </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> q\n        self.t </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> t\n        self.ring </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> PolynomialRing(n, q)\n        self.plaintext_ring </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> PolynomialRing(n, t)\n        self.delta </span>= q //<span style=\"color: rgba(0, 0, 0, 1);\"> t\n\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">def</span><span style=\"color: rgba(0, 0, 0, 1);\"> keygen(self):\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> äº§ç”Ÿå¯†é’¥</span>\n        s =<span style=\"color: rgba(0, 0, 0, 1);\"> self.ring.binary_poly()\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> æŒ‘æˆ˜å¤šé¡¹å¼</span>\n        a =<span style=\"color: rgba(0, 0, 0, 1);\"> self.ring.random_poly()\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> éšæœºå¤šé¡¹å¼</span>\n        e =<span style=\"color: rgba(0, 0, 0, 1);\"> self.ring.small_poly()\n        a_s </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> self.ring.poly_mul(a, s)\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> å“åº”å¤šé¡¹å¼</span>\n        pk0 =<span style=\"color: rgba(0, 0, 0, 1);\"> self.ring.poly_sub(e, a_s)\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> å…¬é’¥</span>\n        pk =<span style=\"color: rgba(0, 0, 0, 1);\"> [pk0, a]\n        sk </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> s\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> pk, sk\n\n    </span><span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> ç¼–ç æ˜æ–‡</span>\n    <span style=\"color: rgba(0, 0, 255, 1);\">def</span><span style=\"color: rgba(0, 0, 0, 1);\"> encode(self, message):\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">if</span><span style=\"color: rgba(0, 0, 0, 1);\"> isinstance(message, int):\n            </span><span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> å•æ•´æ•°ç¼–ç </span>\n            m = np.zeros(self.n, dtype=<span style=\"color: rgba(0, 0, 0, 1);\">int)\n            m[0] </span>= message %<span style=\"color: rgba(0, 0, 0, 1);\"> self.t\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">else</span><span style=\"color: rgba(0, 0, 0, 1);\">:\n            </span><span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> æ‰¹é‡ç¼–ç </span>\n            m = np.array(message, dtype=int) %<span style=\"color: rgba(0, 0, 0, 1);\"> self.t\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> m\n\n    </span><span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> ä½¿ç”¨å…¬é’¥åŠ å¯†</span>\n    <span style=\"color: rgba(0, 0, 255, 1);\">def</span><span style=\"color: rgba(0, 0, 0, 1);\"> encrypt(self, pk, message):\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> å¯¹æ˜æ–‡è¿›è¡Œç¼–ç </span>\n        m =<span style=\"color: rgba(0, 0, 0, 1);\"> self.encode(message)\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> å¯¹æ˜æ–‡ç¼–ç ç»“æœè¿›è¡Œæ”¾å¤§</span>\n        m_scaled =<span style=\"color: rgba(0, 0, 0, 1);\"> self.ring.poly_scale(m, self.delta)\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\">print(\"m_scaled: {}\".format(m_scaled))</span>\n        \n        <span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> ç”Ÿæˆæ©ç å¤šé¡¹å¼</span>\n        u =<span style=\"color: rgba(0, 0, 0, 1);\"> self.ring.binary_poly()\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> äº§ç”Ÿä¸¤ä¸ªå°å™ªå£°å¤šé¡¹å¼</span>\n        e1 =<span style=\"color: rgba(0, 0, 0, 1);\"> self.ring.small_poly()\n        e2 </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> self.ring.small_poly()\n        \n        pk0_u </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> self.ring.poly_mul(pk[0], u)\n        pk1_u </span>= self.ring.poly_mul(pk[1<span style=\"color: rgba(0, 0, 0, 1);\">], u)\n        \n        </span><span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> ç”Ÿæˆå¯†æ–‡c0</span>\n        c0 =<span style=\"color: rgba(0, 0, 0, 1);\"> self.ring.poly_add(pk0_u, e1)\n        c0 </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> self.ring.poly_add(c0, m_scaled)\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> ç”Ÿæˆå¯†æ–‡c1</span>\n        c1 =<span style=\"color: rgba(0, 0, 0, 1);\"> self.ring.poly_add(pk1_u, e2)\n        \n        </span><span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> è¿”å›å¯†æ–‡</span>\n        <span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> [c0, c1]\n\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">def</span><span style=\"color: rgba(0, 0, 0, 1);\"> decrypt(self, sk, ciphertext):\n        c0, c1 </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> ciphertext\n        s_c1 </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> self.ring.poly_mul(sk, c1)\n        decrypted </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> self.ring.poly_add(c0, s_c1)\n        \n        result </span>= np.zeros(self.n, dtype=<span style=\"color: rgba(0, 0, 0, 1);\">int)\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">for</span> i <span style=\"color: rgba(0, 0, 255, 1);\">in</span><span style=\"color: rgba(0, 0, 0, 1);\"> range(self.n):\n            result[i] </span>= round(decrypted[i] * self.t / self.q) %<span style=\"color: rgba(0, 0, 0, 1);\"> self.t\n        \n        </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> result\n\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">def</span><span style=\"color: rgba(0, 0, 0, 1);\"> add(self, c1, c2):\n        c0 </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> self.ring.poly_add(c1[0], c2[0])\n        c1 </span>= self.ring.poly_add(c1[1], c2[1<span style=\"color: rgba(0, 0, 0, 1);\">])\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> [c0, c1]\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">def</span><span style=\"color: rgba(0, 0, 0, 1);\"> main():\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">print</span>(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">=== BFV åŒæ€åŠ å¯†æ–¹æ¡ˆæ¼”ç¤º ===\\n</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    \n    bfv </span>= BFV(n=256, q=1048576, t=256<span style=\"color: rgba(0, 0, 0, 1);\">)\n    \n    </span><span style=\"color: rgba(0, 0, 255, 1);\">print</span>(f<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">å‚æ•°è®¾ç½®:</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">print</span>(f<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">  å¤šé¡¹å¼æ¬¡æ•° n = {bfv.n}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">print</span>(f<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">  å¯†æ–‡æ¨¡æ•° q = {bfv.q}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">print</span>(f<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">  æ˜æ–‡æ¨¡æ•° t = {bfv.t}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">print</span>(f<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">  ç¼©æ”¾å› å­ Î” = {bfv.delta}\\n</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    \n    pk, sk </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> bfv.keygen()\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">print</span>(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">å¯†é’¥ç”Ÿæˆå®Œæˆ</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">print</span>(f<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">ç§é’¥ s å‰5ä¸ªç³»æ•°: {sk[:5]}...\\n</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">print</span><span style=\"color: rgba(0, 0, 0, 1);\">(sk)\n    \n    m1 </span>= 42<span style=\"color: rgba(0, 0, 0, 1);\">\n    m2 </span>= 17\n    <span style=\"color: rgba(0, 0, 255, 1);\">print</span>(f<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">æ˜æ–‡ m1 = {m1}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">print</span>(f<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">æ˜æ–‡ m2 = {m2}\\n</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    \n    c1 </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> bfv.encrypt(pk, m1)\n    c2 </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> bfv.encrypt(pk, m2)\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">print</span>(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">åŠ å¯†å®Œæˆ</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">print</span>(f<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">å¯†æ–‡ c1[0] å‰5ä¸ªç³»æ•°: {c1[0][:5]}...</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">print</span>(f<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">å¯†æ–‡ c1[1] å‰5ä¸ªç³»æ•°: {c1[1][:5]}...\\n</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">print</span>(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">å¯†æ–‡c1 {}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">.format(c1))\n    \n    d1 </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> bfv.decrypt(sk, c1)\n    d2 </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> bfv.decrypt(sk, c2)\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">print</span>(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">è§£å¯†å®Œæˆ</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">print</span>(f<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">è§£å¯†ç»“æœ d1 = {d1[0]}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">print</span>(f<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">è§£å¯†ç»“æœ d2 = {d2[0]}\\n</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    \n    </span><span style=\"color: rgba(0, 0, 255, 1);\">print</span>(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">=== åŒæ€åŠ æ³•æ¼”ç¤º ===</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    c_sum </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> bfv.add(c1, c2)\n    d_sum </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> bfv.decrypt(sk, c_sum)\n    expected_sum </span>= (m1 + m2) %<span style=\"color: rgba(0, 0, 0, 1);\"> bfv.t\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">print</span>(f<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">å¯†æ–‡åŒæ€åŠ æ³•: c1 + c2</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">print</span>(f<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">è§£å¯†ç»“æœ: {d_sum[0]}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">print</span>(f<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">æœŸæœ›ç»“æœ: {expected_sum}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">print</span>(f<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">éªŒè¯: {'æˆåŠŸ' if d_sum[0] == expected_sum else 'å¤±è´¥'}\\n</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    \n    </span><span style=\"color: rgba(0, 0, 255, 1);\">print</span>(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">=== å¤šé¡¹å¼æ˜æ–‡æ¼”ç¤º ===</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    m_poly </span>= np.array([1, 2, 3, 4, 5] + [0] * 251, dtype=<span style=\"color: rgba(0, 0, 0, 1);\">int)\n    c_poly </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> bfv.encrypt(pk, m_poly)\n    d_poly </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> bfv.decrypt(sk, c_poly)\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">print</span>(f<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">å¤šé¡¹å¼æ˜æ–‡å‰5ä¸ªç³»æ•°: {m_poly[:5]}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">print</span>(f<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">è§£å¯†ç»“æœå‰5ä¸ªç³»æ•°: {d_poly[:5]}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">print</span>(f<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">éªŒè¯: {'æˆåŠŸ' if np.array_equal(d_poly[:5], m_poly[:5]) else 'å¤±è´¥'}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> <span style=\"color: rgba(128, 0, 128, 1);\">__name__</span> == <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">__main__</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">:\n    main()</span></pre>\n</div>\n<span class=\"cnblogs_code_collapse\">View Code</span></div>\n<h1>3 SEALä½¿ç”¨</h1>\n<h2>3.1 æºç ç¼–è¯‘</h2>\n<p>è¿™é‡Œä»…ç®€å•ä»‹ç»ä¸‹Windowsä¸‹ä½¿ç”¨VS2022ç¯å¢ƒè¿›è¡Œç¼–è¯‘ï¼Œä¸‹è½½æºç å¹¶å®‰è£…cmakeï¼Œè¿è¡ŒVS2022å®‰è£…èœå•ä¸‹çš„â€œDeveloper Command Prompt for VS 2022â€å‘½ä»¤è¡Œï¼Œæ‰§è¡Œå‘½ä»¤è¿›è¡Œé…ç½®ï¼š</p>\n<div class=\"cnblogs_code\">\n<pre>cmake -S . -B build -G <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Visual Studio 17 2022</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span> -A x64 -DCMAKE_INSTALL_PREFIX=./<span style=\"color: rgba(0, 0, 255, 1);\">out</span></pre>\n</div>\n<p>è¿™é‡Œç¼–è¯‘çš„æ˜¯64ä½ç‰ˆæœ¬ï¼Œå¹¶å°†å®‰è£…ç›®å½•è®¾ç½®ä¸ºå½“å‰ç›®å½•ä¸‹çš„outæ–‡ä»¶å¤¹ï¼Œé…ç½®å®Œæˆåå†æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œç¼–è¯‘</p>\n<div class=\"cnblogs_code\">\n<pre>cmake --build build --<span style=\"color: rgba(0, 0, 0, 1);\">config Release    #ç¼–è¯‘Releaseç‰ˆæœ¬\ncmake </span>--build build --config Debug      #ç¼–è¯‘Debugç‰ˆæœ¬</pre>\n</div>\n<p>ç¼–è¯‘å®Œæˆåä¼šç”Ÿæˆseal-4.1.libåº“æ–‡ä»¶ï¼š</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/465567/202601/465567-20260122113702648-1311816022.png\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></p>\n<p>ç„¶åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š</p>\n<div class=\"cnblogs_code\">\n<pre>cmake --install build</pre>\n</div>\n<p>outä¸‹includeä¸­æ˜¯å¤´æ–‡ä»¶ï¼Œlibä¸­æ˜¯é™æ€åº“æ–‡ä»¶ï¼š</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/465567/202601/465567-20260122114032047-1402497300.png\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></p>\n<h2>3.2 ç¤ºä¾‹ç¨‹åº</h2>\n<p>ä½¿ç”¨VS2022åˆ›å»ºç©ºé¡¹ç›®ï¼Œå¹¶æ·»åŠ demo.cppæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>\n<div class=\"cnblogs_code\"><img class=\"code_img_closed\" id=\"code_img_closed_1771d7b9-7319-4893-9ce5-5347e3e25b4a\" src=\"https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif\" /><img class=\"code_img_opened\" id=\"code_img_opened_1771d7b9-7319-4893-9ce5-5347e3e25b4a\" src=\"https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif\" style=\"display: none;\" />\n<div class=\"cnblogs_code_hide\" id=\"cnblogs_code_open_1771d7b9-7319-4893-9ce5-5347e3e25b4a\">\n<pre><span style=\"color: rgba(0, 128, 128, 1);\"> 1</span> #include &lt;iostream&gt;\n<span style=\"color: rgba(0, 128, 128, 1);\"> 2</span> #include &lt;SEAL/SEAL.h&gt;\n<span style=\"color: rgba(0, 128, 128, 1);\"> 3</span> \n<span style=\"color: rgba(0, 128, 128, 1);\"> 4</span> <span style=\"color: rgba(0, 0, 255, 1);\">using</span> <span style=\"color: rgba(0, 0, 255, 1);\">namespace</span><span style=\"color: rgba(0, 0, 0, 1);\"> std;\n</span><span style=\"color: rgba(0, 128, 128, 1);\"> 5</span> <span style=\"color: rgba(0, 0, 255, 1);\">using</span> <span style=\"color: rgba(0, 0, 255, 1);\">namespace</span><span style=\"color: rgba(0, 0, 0, 1);\"> seal;\n</span><span style=\"color: rgba(0, 128, 128, 1);\"> 6</span> \n<span style=\"color: rgba(0, 128, 128, 1);\"> 7</span> <span style=\"color: rgba(0, 0, 255, 1);\">int</span><span style=\"color: rgba(0, 0, 0, 1);\"> main() {\n</span><span style=\"color: rgba(0, 128, 128, 1);\"> 8</span>     <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> æ­¥éª¤ 1ï¼šé…ç½®åŠ å¯†å‚æ•°ï¼ˆBFV æ–¹æ¡ˆï¼‰</span>\n<span style=\"color: rgba(0, 128, 128, 1);\"> 9</span> <span style=\"color: rgba(0, 0, 0, 1);\">    EncryptionParameters parms(scheme_type::bfv);\n</span><span style=\"color: rgba(0, 128, 128, 1);\">10</span>     <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> å¤šé¡¹å¼æ¨¡æ•°ï¼š4096ï¼ˆ2çš„å¹‚æ¬¡ï¼‰</span>\n<span style=\"color: rgba(0, 128, 128, 1);\">11</span>     size_t poly_modulus_degree = <span style=\"color: rgba(128, 0, 128, 1);\">4096</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n</span><span style=\"color: rgba(0, 128, 128, 1);\">12</span> <span style=\"color: rgba(0, 0, 0, 1);\">    parms.set_poly_modulus_degree(poly_modulus_degree);\n</span><span style=\"color: rgba(0, 128, 128, 1);\">13</span>     <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> æ˜æ–‡æ¨¡æ•°ï¼šæ”¯æŒæ‰¹é‡è¿ç®—ï¼Œå–å€¼èŒƒå›´ 2^20</span>\n<span style=\"color: rgba(0, 128, 128, 1);\">14</span>     parms.set_plain_modulus(PlainModulus::Batching(poly_modulus_degree, <span style=\"color: rgba(128, 0, 128, 1);\">20</span><span style=\"color: rgba(0, 0, 0, 1);\">));\n</span><span style=\"color: rgba(0, 128, 128, 1);\">15</span>     <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> ç³»æ•°æ¨¡æ•°ï¼šä½¿ç”¨ BFV é»˜è®¤å‚æ•°</span>\n<span style=\"color: rgba(0, 128, 128, 1);\">16</span> <span style=\"color: rgba(0, 0, 0, 1);\">    parms.set_coeff_modulus(CoeffModulus::BFVDefault(poly_modulus_degree));\n</span><span style=\"color: rgba(0, 128, 128, 1);\">17</span> \n<span style=\"color: rgba(0, 128, 128, 1);\">18</span>     cout &lt;&lt; <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">æ˜æ–‡æ¨¡æ•° t = </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span> &lt;&lt; parms.plain_modulus().value() &lt;&lt;<span style=\"color: rgba(0, 0, 0, 1);\"> endl;\n</span><span style=\"color: rgba(0, 128, 128, 1);\">19</span>     cout &lt;&lt; <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">æ˜æ–‡æ¨¡æ•° t æ¯”ç‰¹æ•° = </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span> &lt;&lt; parms.plain_modulus().bit_count() &lt;&lt;<span style=\"color: rgba(0, 0, 0, 1);\"> endl;\n</span><span style=\"color: rgba(0, 128, 128, 1);\">20</span>     cout &lt;&lt; <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">t mod 2N = </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span> &lt;&lt; (parms.plain_modulus().value() % (<span style=\"color: rgba(128, 0, 128, 1);\">2</span> * poly_modulus_degree)) &lt;&lt;<span style=\"color: rgba(0, 0, 0, 1);\"> endl;\n</span><span style=\"color: rgba(0, 128, 128, 1);\">21</span> \n<span style=\"color: rgba(0, 128, 128, 1);\">22</span>     vector&lt;Modulus&gt; coeff_mods =<span style=\"color: rgba(0, 0, 0, 1);\"> CoeffModulus::BFVDefault(poly_modulus_degree);\n</span><span style=\"color: rgba(0, 128, 128, 1);\">23</span> \n<span style=\"color: rgba(0, 128, 128, 1);\">24</span>     <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> 3. ç³»æ•°æ¨¡æ•° qï¼ˆå¤šç´ æ•°ä¹˜ç§¯ï¼‰</span>\n<span style=\"color: rgba(0, 128, 128, 1);\">25</span>     cout &lt;&lt; <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">\\nç³»æ•°æ¨¡æ•° q çš„æ„æˆï¼ˆç´ æ•°åˆ—è¡¨ï¼‰ï¼š</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span> &lt;&lt;<span style=\"color: rgba(0, 0, 0, 1);\"> endl;\n</span><span style=\"color: rgba(0, 128, 128, 1);\">26</span>     <span style=\"color: rgba(0, 0, 255, 1);\">int</span> total_bits = <span style=\"color: rgba(128, 0, 128, 1);\">0</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n</span><span style=\"color: rgba(0, 128, 128, 1);\">27</span>     <span style=\"color: rgba(0, 0, 255, 1);\">for</span> (size_t i = <span style=\"color: rgba(128, 0, 128, 1);\">0</span>; i &lt; coeff_mods.size(); i++<span style=\"color: rgba(0, 0, 0, 1);\">) {\n</span><span style=\"color: rgba(0, 128, 128, 1);\">28</span>         cout &lt;&lt; <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">ç¬¬</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span> &lt;&lt; i + <span style=\"color: rgba(128, 0, 128, 1);\">1</span> &lt;&lt; <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">ä¸ªç´ æ•°ï¼š</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span> &lt;&lt;<span style=\"color: rgba(0, 0, 0, 1);\"> coeff_mods[i].value()\n</span><span style=\"color: rgba(0, 128, 128, 1);\">29</span>             &lt;&lt; <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">ï¼ˆæ¯”ç‰¹æ•°ï¼š</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span> &lt;&lt; coeff_mods[i].bit_count() &lt;&lt; <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">ï¼‰</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span> &lt;&lt;<span style=\"color: rgba(0, 0, 0, 1);\"> endl;\n</span><span style=\"color: rgba(0, 128, 128, 1);\">30</span>         total_bits +=<span style=\"color: rgba(0, 0, 0, 1);\"> coeff_mods[i].bit_count();\n</span><span style=\"color: rgba(0, 128, 128, 1);\">31</span> <span style=\"color: rgba(0, 0, 0, 1);\">    }\n</span><span style=\"color: rgba(0, 128, 128, 1);\">32</span>     cout &lt;&lt; <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">ç³»æ•°æ¨¡æ•°æ€»æ¯”ç‰¹æ•° = </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span> &lt;&lt; total_bits &lt;&lt;<span style=\"color: rgba(0, 0, 0, 1);\"> endl;\n</span><span style=\"color: rgba(0, 128, 128, 1);\">33</span> \n<span style=\"color: rgba(0, 128, 128, 1);\">34</span>     <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> æ­¥éª¤ 2ï¼šåˆ›å»ºåŠ å¯†ä¸Šä¸‹æ–‡ï¼ŒéªŒè¯å‚æ•°åˆæ³•æ€§</span>\n<span style=\"color: rgba(0, 128, 128, 1);\">35</span> <span style=\"color: rgba(0, 0, 0, 1);\">    SEALContext context(parms);\n</span><span style=\"color: rgba(0, 128, 128, 1);\">36</span>     <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> æ‰“å°ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆå¯é€‰ï¼ŒæŸ¥çœ‹å‚æ•°é…ç½®ï¼‰</span>\n<span style=\"color: rgba(0, 128, 128, 1);\">37</span>     cout &lt;&lt; <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Context created successfully, scheme type: BFV</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span> &lt;&lt;<span style=\"color: rgba(0, 0, 0, 1);\"> endl;\n</span><span style=\"color: rgba(0, 128, 128, 1);\">38</span> \n<span style=\"color: rgba(0, 128, 128, 1);\">39</span>     <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> æ­¥éª¤ 3ï¼šç”Ÿæˆå¯†é’¥ï¼ˆé€‚é… SEAL 4.1 APIï¼Œæ ¸å¿ƒä¿®æ”¹éƒ¨åˆ†ï¼‰</span>\n<span style=\"color: rgba(0, 128, 128, 1);\">40</span> <span style=\"color: rgba(0, 0, 0, 1);\">    KeyGenerator keygen(context);\n</span><span style=\"color: rgba(0, 128, 128, 1);\">41</span>     <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> 4.1 ç‰ˆæœ¬ï¼šé€šè¿‡ create_public_key() ç”Ÿæˆå…¬é’¥ï¼ˆæ›¿ä»£åŸ public_key()ï¼‰</span>\n<span style=\"color: rgba(0, 128, 128, 1);\">42</span> <span style=\"color: rgba(0, 0, 0, 1);\">    PublicKey public_key;\n</span><span style=\"color: rgba(0, 128, 128, 1);\">43</span> <span style=\"color: rgba(0, 0, 0, 1);\">    keygen.create_public_key(public_key);\n</span><span style=\"color: rgba(0, 128, 128, 1);\">44</span>     <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> 4.1 ç‰ˆæœ¬ï¼šç›´æ¥é€šè¿‡æˆå‘˜å‡½æ•°è·å–ç§é’¥ï¼ˆè¯¥æ¥å£æœªå˜æ›´ï¼‰</span>\n<span style=\"color: rgba(0, 128, 128, 1);\">45</span>     SecretKey secret_key =<span style=\"color: rgba(0, 0, 0, 1);\"> keygen.secret_key();\n</span><span style=\"color: rgba(0, 128, 128, 1);\">46</span>     <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> 4.1 ç‰ˆæœ¬ï¼šé€šè¿‡ create_relin_keys() ç”Ÿæˆè¯„ä¼°å¯†é’¥ï¼ˆæ›¿ä»£åŸ relin_keys()ï¼‰</span>\n<span style=\"color: rgba(0, 128, 128, 1);\">47</span> <span style=\"color: rgba(0, 0, 0, 1);\">    RelinKeys relin_keys;\n</span><span style=\"color: rgba(0, 128, 128, 1);\">48</span> <span style=\"color: rgba(0, 0, 0, 1);\">    keygen.create_relin_keys(relin_keys);\n</span><span style=\"color: rgba(0, 128, 128, 1);\">49</span> \n<span style=\"color: rgba(0, 128, 128, 1);\">50</span>     <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> æ­¥éª¤ 4ï¼šåˆå§‹åŒ–åŠ å¯†å™¨ã€è§£å¯†å™¨ã€è¯„ä¼°å™¨</span>\n<span style=\"color: rgba(0, 128, 128, 1);\">51</span> <span style=\"color: rgba(0, 0, 0, 1);\">    Encryptor encryptor(context, public_key);\n</span><span style=\"color: rgba(0, 128, 128, 1);\">52</span> <span style=\"color: rgba(0, 0, 0, 1);\">    Decryptor decryptor(context, secret_key);\n</span><span style=\"color: rgba(0, 128, 128, 1);\">53</span> <span style=\"color: rgba(0, 0, 0, 1);\">    Evaluator evaluator(context);\n</span><span style=\"color: rgba(0, 128, 128, 1);\">54</span> \n<span style=\"color: rgba(0, 128, 128, 1);\">55</span>     <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> æ­¥éª¤ 5ï¼šæ˜æ–‡å‡†å¤‡ï¼ˆä¸¤ä¸ªæ•´æ•°ï¼‰</span>\n<span style=\"color: rgba(0, 128, 128, 1);\">56</span>     Plaintext plain1(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">123</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n</span><span style=\"color: rgba(0, 128, 128, 1);\">57</span>     Plaintext plain2(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">456</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n</span><span style=\"color: rgba(0, 128, 128, 1);\">58</span>     cout &lt;&lt; <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Original plaintext 1: </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span> &lt;&lt; plain1.to_string() &lt;&lt;<span style=\"color: rgba(0, 0, 0, 1);\"> endl;\n</span><span style=\"color: rgba(0, 128, 128, 1);\">59</span>     cout &lt;&lt; <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Original plaintext 2: </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span> &lt;&lt; plain2.to_string() &lt;&lt;<span style=\"color: rgba(0, 0, 0, 1);\"> endl;\n</span><span style=\"color: rgba(0, 128, 128, 1);\">60</span> \n<span style=\"color: rgba(0, 128, 128, 1);\">61</span>     <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> æ­¥éª¤ 6ï¼šåŠ å¯†æ˜æ–‡ä¸ºå¯†æ–‡</span>\n<span style=\"color: rgba(0, 128, 128, 1);\">62</span> <span style=\"color: rgba(0, 0, 0, 1);\">    Ciphertext cipher1, cipher2;\n</span><span style=\"color: rgba(0, 128, 128, 1);\">63</span> <span style=\"color: rgba(0, 0, 0, 1);\">    encryptor.encrypt(plain1, cipher1);\n</span><span style=\"color: rgba(0, 128, 128, 1);\">64</span> <span style=\"color: rgba(0, 0, 0, 1);\">    encryptor.encrypt(plain2, cipher2);\n</span><span style=\"color: rgba(0, 128, 128, 1);\">65</span>     cout &lt;&lt; <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Plaintext encrypted to ciphertext successfully</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span> &lt;&lt;<span style=\"color: rgba(0, 0, 0, 1);\"> endl;\n</span><span style=\"color: rgba(0, 128, 128, 1);\">66</span> \n<span style=\"color: rgba(0, 128, 128, 1);\">67</span>     <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> æ­¥éª¤ 7ï¼šå¯†æ–‡åŒæ€è¿ç®—ï¼ˆåŠ æ³• + ä¹˜æ³•ï¼‰\n</span><span style=\"color: rgba(0, 128, 128, 1);\">68</span>     <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> å¯†æ–‡åŠ æ³•</span>\n<span style=\"color: rgba(0, 128, 128, 1);\">69</span> <span style=\"color: rgba(0, 0, 0, 1);\">    Ciphertext cipher_add;\n</span><span style=\"color: rgba(0, 128, 128, 1);\">70</span> <span style=\"color: rgba(0, 0, 0, 1);\">    evaluator.add(cipher1, cipher2, cipher_add);\n</span><span style=\"color: rgba(0, 128, 128, 1);\">71</span>     <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> å¯†æ–‡ä¹˜æ³• + é‡çº¿æ€§åŒ–ï¼ˆå‡å°‘å¯†æ–‡å¤§å°ï¼‰</span>\n<span style=\"color: rgba(0, 128, 128, 1);\">72</span> <span style=\"color: rgba(0, 0, 0, 1);\">    Ciphertext cipher_mult;\n</span><span style=\"color: rgba(0, 128, 128, 1);\">73</span> <span style=\"color: rgba(0, 0, 0, 1);\">    evaluator.multiply(cipher1, cipher2, cipher_mult);\n</span><span style=\"color: rgba(0, 128, 128, 1);\">74</span> <span style=\"color: rgba(0, 0, 0, 1);\">    evaluator.relinearize_inplace(cipher_mult, relin_keys);\n</span><span style=\"color: rgba(0, 128, 128, 1);\">75</span> \n<span style=\"color: rgba(0, 128, 128, 1);\">76</span>     <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> æ­¥éª¤ 8ï¼šè§£å¯†å¯†æ–‡ï¼ŒéªŒè¯ç»“æœ</span>\n<span style=\"color: rgba(0, 128, 128, 1);\">77</span> <span style=\"color: rgba(0, 0, 0, 1);\">    Plaintext plain_add, plain_mult;\n</span><span style=\"color: rgba(0, 128, 128, 1);\">78</span> <span style=\"color: rgba(0, 0, 0, 1);\">    decryptor.decrypt(cipher_add, plain_add);\n</span><span style=\"color: rgba(0, 128, 128, 1);\">79</span> <span style=\"color: rgba(0, 0, 0, 1);\">    decryptor.decrypt(cipher_mult, plain_mult);\n</span><span style=\"color: rgba(0, 128, 128, 1);\">80</span>     cout &lt;&lt; <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Ciphertext add result: </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span> &lt;&lt; plain_add.to_string() &lt;&lt;<span style=\"color: rgba(0, 0, 0, 1);\"> endl;\n</span><span style=\"color: rgba(0, 128, 128, 1);\">81</span>     cout &lt;&lt; <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Ciphertext multiply result: </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span> &lt;&lt; plain_mult.to_string() &lt;&lt;<span style=\"color: rgba(0, 0, 0, 1);\"> endl;\n</span><span style=\"color: rgba(0, 128, 128, 1);\">82</span>     \n<span style=\"color: rgba(0, 128, 128, 1);\">83</span>     <span style=\"color: rgba(0, 0, 255, 1);\">return</span> <span style=\"color: rgba(128, 0, 128, 1);\">0</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n</span><span style=\"color: rgba(0, 128, 128, 1);\">84</span> }</pre>\n</div>\n<span class=\"cnblogs_code_collapse\">View Code</span></div>\n<p>å°†ä¹‹é—´äº§ç”Ÿçš„outæ–‡ä»¶å¤¹ä¸‹çš„includeå’Œlibæ‹·è´åˆ°é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹ï¼Œé…ç½®é¡¹ç›®çš„C/C++ç¼–è¯‘åŒ…å«å¤´æ–‡ä»¶è·¯å¾„ï¼Œåº“æ–‡ä»¶è·¯å¾„ä»¥åŠè¾“å…¥åº“ï¼Œå³å¯è¿›è¡Œç¼–è¯‘ã€‚</p>\n<p><img alt=\"image\" height=\"434\" src=\"https://img2024.cnblogs.com/blog/465567/202601/465567-20260122114406545-2054417852.png\" style=\"display: block; margin-left: auto; margin-right: auto;\" width=\"593\" /></p>\n<p>ç¼–è¯‘å®Œæˆåè¿è¡Œç¨‹åºï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/465567/202601/465567-20260122114732024-1409765149.png\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></p>\n<p>åœ¨è¯¥ç¤ºä¾‹ç¨‹åºä¸­ï¼Œå¤šé¡¹å¼æ¨¡æ•°Næ˜¯4096ï¼Œæ˜æ–‡æ¨¡æ•°tæ˜¯1032193ï¼Œä½å®½ä¸º20bitsï¼Œç³»æ•°æ¨¡æ•°qæ˜¯3ä¸ªç´ æ•°çš„ä¹˜ç§¯68719403009*68719230977*137438822401=0x1ffff4400622fecd904df7f92001ï¼Œä½å®½æ˜¯109bitsï¼Œç¤ºä¾‹ä¸­æ¼”ç¤ºäº†0x123å’Œ0x456çš„åŠ æ³•å’Œä¹˜æ³•è¿è¡Œï¼Œå¯è§åŠ å¯†è¿ç®—åçš„è§£å¯†ç»“æœå’ŒæœªåŠ å¯†è¿ç®—çš„ç»“æœå®Œå…¨ä¸€è‡´ã€‚</p>\n<p>&nbsp;</p>\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-22 15:50</span>&nbsp;\n<a href=\"https://www.cnblogs.com/zhaoweiwei\">weiwei22844</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">36</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "å“‘é“ƒå›¾ï¼šæ•°æ®å¯¹æ¯”çš„ä¼˜é›…ä¹‹é€‰",
      "link": "https://www.cnblogs.com/wang_yb/p/19519312",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/wang_yb/p/19519312\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-22 23:23\">\n    <span>å“‘é“ƒå›¾ï¼šæ•°æ®å¯¹æ¯”çš„ä¼˜é›…ä¹‹é€‰</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<blockquote>\n<p>ç®€æ´çš„çº¿æ¡è¿æ¥ä¸¤ä¸ªæ•°æ®ç‚¹ï¼Œå°±åƒå“‘é“ƒçš„ä¸¤ç«¯ï¼Œåœ¨å¯¹æ¯”åˆ†æä¸­å±•ç°å‡ºä»¤äººæƒŠè‰³çš„æ¸…æ™°åº¦ã€‚</p>\n</blockquote>\n<p>åœ¨å¹³æ—¶çš„æ•°æ®åˆ†æé¡¹ç›®ä¸­ï¼Œæˆ‘ç»å¸¸ä¼šé‡åˆ°æ¯”è¾ƒä¸¤ä¸ªç›¸å…³æ•°æ®é›†çš„å˜åŒ–æƒ…å†µã€‚</p>\n<p>è¿™æ—¶ï¼Œä¼ ç»Ÿçš„åšæ³•æ˜¯ä½¿ç”¨å †ç§¯æ¡å½¢å›¾æˆ–ç°‡çŠ¶æ¡å½¢å›¾ï¼Œä½†å®ƒä»¬å­˜åœ¨ä¸€ä¸ª<strong>å…±åŒé—®é¢˜</strong>ï¼šå½“æˆ‘ä»¬éœ€è¦ç²¾ç¡®è¿½è¸ªæ¯ä¸ªé¡¹ç›®åœ¨ä¸¤ä¸ªæ—¶é—´ç‚¹æˆ–ä¸¤ç§æ¡ä»¶ä¸‹çš„å˜åŒ–æ—¶ï¼Œè¿™äº›å›¾è¡¨ä¼šè®©æˆ‘ä»¬çš„çœ¼ç›åœ¨æ¡å½¢ä¹‹é—´æ¥å›è·³è·ƒï¼Œéš¾ä»¥ç›´è§‚æŠŠæ¡å˜åŒ–çš„å¹…åº¦å’Œæ–¹å‘ã€‚</p>\n<p>ä»Šå¤©ï¼Œæˆ‘è¦å‘å¤§å®¶æ¨èä¸€ç§æ›´ä¼˜é›…çš„æ›¿ä»£æ–¹æ¡ˆ--<strong>å“‘é“ƒå›¾</strong>ã€‚</p>\n<h1 id=\"1-å“‘é“ƒå›¾æ˜¯ä»€ä¹ˆ\">1. å“‘é“ƒå›¾æ˜¯ä»€ä¹ˆï¼Ÿ</h1>\n<p><strong>å“‘é“ƒå›¾</strong>ï¼ˆ<code>Dumbbell Plot</code>ï¼‰ï¼Œæœ‰æ—¶ä¹Ÿç§°ä¸º<strong>DNAå›¾</strong>æˆ–<strong>æ é“ƒå›¾</strong>ï¼Œæ˜¯ä¸€ç§ç”¨äºæ¯”è¾ƒä¸¤ä¸ªç›¸å…³æ•°æ®ç‚¹çš„å¯è§†åŒ–å›¾è¡¨ã€‚</p>\n<p>å®ƒæºäºäººä»¬å¯¹æ›´æœ‰æ•ˆæ•°æ®æ¯”è¾ƒæ–¹å¼çš„æŒç»­æ¢ç´¢ã€‚</p>\n<p>åœ¨ä¼ ç»Ÿçš„æ—¶é—´åºåˆ—æ¯”è¾ƒä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨ä¸¤æ¡æŠ˜çº¿ï¼Œä½†å½“éœ€è¦æ¯”è¾ƒçš„é¡¹ç›®è¾ƒå¤šæ—¶ï¼ŒæŠ˜çº¿å›¾ä¼šå˜å¾—æ··ä¹±ã€‚<strong>å“‘é“ƒå›¾</strong>é€šè¿‡å°†æ¯”è¾ƒç„¦ç‚¹æ”¾åœ¨æ¯ä¸ªé¡¹ç›®çš„ä¸¤ä¸ªçŠ¶æ€ä¸Šï¼Œè§£å†³äº†å¤šé¡¹ç›®å¯¹æ¯”æ—¶çš„è§†è§‰æ··ä¹±é—®é¢˜ã€‚</p>\n<p>å®ƒçš„<strong>åŸºæœ¬ç»“æ„</strong>å¾ˆç®€å•ï¼š</p>\n<ul>\n<li>æ¯ä¸ªè§‚å¯Ÿå•ä½ï¼ˆå¦‚äº§å“ã€åœ°åŒºã€æ—¶é—´æ®µï¼‰å¯¹åº”ä¸¤ä¸ªæ•°æ®ç‚¹</li>\n<li>è¿™ä¸¤ä¸ªæ•°æ®ç‚¹ç”±ä¸€æ¡ç›´çº¿ï¼ˆæˆ–çº¿æ®µï¼‰è¿æ¥</li>\n<li>æ•´ä¸ªå›¾å½¢çœ‹èµ·æ¥åƒä¸€æ’æ’å“‘é“ƒï¼Œå› è€Œå¾—å</li>\n</ul>\n<h1 id=\"2-å®ç°åŸç†\">2. å®ç°åŸç†</h1>\n<p><strong>å“‘é“ƒå›¾</strong>çš„æ ¸å¿ƒè®¾è®¡ç†å¿µæ˜¯<strong>æœ€å°åŒ–è®¤çŸ¥è´Ÿè·</strong>ã€‚</p>\n<p>å½“æˆ‘ä»¬éœ€è¦æ¯”è¾ƒAå’ŒBæ—¶ï¼Œæœ€ç›´æ¥çš„æ–¹å¼å°±æ˜¯æŠŠå®ƒä»¬æ”¾åœ¨ä¸€èµ·ï¼Œç”¨ä¸€æ¡çº¿è¿æ¥ï¼Œç„¶åè§‚å¯Ÿè¿™æ¡çº¿çš„é•¿åº¦ï¼ˆå·®å¼‚å¤§å°ï¼‰å’Œæ–¹å‘ï¼ˆå“ªä¸ªæ›´å¤§ï¼‰ã€‚</p>\n<p>åœ¨<code>matplotlib</code>ä¸­åˆ›å»º<strong>å“‘é“ƒå›¾</strong>ï¼Œæˆ‘ä»¬ä¸»è¦ä½¿ç”¨ä»¥ä¸‹å…ƒç´ ï¼š</p>\n<ul>\n<li><strong>æ•£ç‚¹å›¾</strong>ï¼šè¡¨ç¤ºä¸¤ä¸ªæ•°æ®ç‚¹</li>\n<li><strong>ç›´çº¿æ®µ</strong>ï¼šè¿æ¥ä¸¤ä¸ªç›¸å…³ç‚¹</li>\n<li><strong>é¢œè‰²ç¼–ç </strong>ï¼šé€šå¸¸ç”¨ä¸åŒé¢œè‰²åŒºåˆ†å‰åçŠ¶æ€æˆ–ä¸åŒç»„åˆ«</li>\n<li><strong>æ ‡ç­¾ç³»ç»Ÿ</strong>ï¼šæ¸…æ™°æ ‡è¯†æ¯ä¸ªè§‚å¯Ÿå•ä½</li>\n</ul>\n<h1 id=\"3-å®æˆ˜ç¤ºä¾‹\">3. å®æˆ˜ç¤ºä¾‹</h1>\n<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬çœ‹çœ‹å“‘é“ƒå›¾åœ¨å®é™…åœºæ™¯ä¸­çš„æ˜¾ç¤ºæ•ˆæœã€‚</p>\n<p>å‡è®¾æˆ‘ä»¬æ˜¯ä¸€å®¶ç”µå•†å…¬å¸çš„æ•°æ®åˆ†æå¸ˆï¼Œéœ€è¦æ¯”è¾ƒ8ä¸ªä¸»è¦äº§å“ç±»åˆ«åœ¨2022å¹´å’Œ2023å¹´çš„é”€å”®é¢å˜åŒ–ã€‚</p>\n<p>ï¼ˆå®Œæ•´çš„ä»£ç åœ¨æ–‡ç« æœ«å°¾æä¾›ä¸‹è½½åœ°å€ï¼Œæ–‡ä¸­åªæˆªå–éƒ¨åˆ†ä»£ç ï¼‰</p>\n<p>å…ˆåˆ›å»ºä¸€äº›æµ‹è¯•æ•°æ®ï¼š</p>\n<pre><code class=\"language-python\"># ç¤ºä¾‹æ•°æ®ï¼š8ä¸ªäº§å“ç±»åˆ«åœ¨2022å¹´å’Œ2023å¹´çš„é”€å”®é¢ï¼ˆå•ä½ï¼šä¸‡å…ƒï¼‰\ncategories = [\n    \"ç”µå­äº§å“\",\n    \"æœè£…é‹å¸½\",\n    \"å®¶å±…ç”¨å“\",\n    \"ç¾å¦†æŠ¤è‚¤\",\n    \"å›¾ä¹¦éŸ³åƒ\",\n    \"è¿åŠ¨æˆ·å¤–\",\n    \"é£Ÿå“é¥®æ–™\",\n    \"æ¯å©´ç”¨å“\",\n]\nsales_2022 = [85, 92, 78, 65, 45, 60, 88, 72]\nsales_2023 = [95, 87, 85, 78, 52, 73, 95, 80]\n</code></pre>\n<p>ç„¶åï¼Œæˆ‘ä»¬ç»˜åˆ¶ä¼ ç»Ÿçš„ç°‡çŠ¶æ¡å½¢å›¾å’Œå“‘é“ƒå›¾æ¥å¯¹æ¯”ä¸€ä¸‹æ•ˆæœï¼š</p>\n<pre><code class=\"language-python\"># åˆ›å»ºå­å›¾ï¼Œå¯¹æ¯”ä¸¤ç§å¯è§†åŒ–æ–¹æ³•\nfig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 8))\n\n# ç°‡çŠ¶æ¡å½¢å›¾\nx = np.arange(len(categories))\n\nbars1 = ax1.bar(x - width/2, sales_2022, width, label='2022å¹´', color='#4C72B0', alpha=0.8)\nbars2 = ax1.bar(x + width/2, sales_2023, width, label='2023å¹´', color='#DD8452', alpha=0.8)\n\n# åœ¨æ¯ä¸ªæ¡å½¢ä¸Šæ·»åŠ æ•°å€¼æ ‡ç­¾\n# çœç•¥ ...\n\n# å“‘é“ƒå›¾\n# è®¾ç½®yè½´ä½ç½®ï¼ˆæ¯ä¸ªç±»åˆ«çš„å‚ç›´ä½ç½®ï¼‰\ny_pos = np.arange(len(categories))\n\n# ç»˜åˆ¶è¿æ¥çº¿\nfor i, (y2022, y2023) in enumerate(zip(sales_2022, sales_2023)):\n    # ç¡®å®šçº¿é¢œè‰²ï¼šå¢é•¿ä¸ºç»¿è‰²ï¼Œä¸‹é™ä¸ºçº¢è‰²\n    line_color = '#55A868' if y2023 &gt; y2022 else '#C44E52'\n    ax2.plot([y2022, y2023], [i, i], color=line_color, linewidth=2.5, alpha=0.7, zorder=1)\n\n# ç»˜åˆ¶æ•°æ®ç‚¹\nax2.scatter(sales_2022, y_pos, s=120, color='#4C72B0', alpha=0.9, label='2022å¹´', zorder=2, edgecolors='white', linewidth=2)\nax2.scatter(sales_2023, y_pos, s=120, color='#DD8452', alpha=0.9, label='2023å¹´', zorder=2, edgecolors='white', linewidth=2)\n\n# çœç•¥ ...\n\nplt.tight_layout()\nplt.show()\n</code></pre>\n\n<p><img alt=\"\" src=\"https://img2024.cnblogs.com/blog/83005/202601/83005-20260122232220614-1554024714.png\" /></p>\n<p>é€šè¿‡ä¸Šé¢çš„å¯¹æ¯”ï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ°<strong>å“‘é“ƒå›¾</strong>çš„ä¼˜åŠ¿ï¼š</p>\n<ul>\n<li><strong>å˜åŒ–ä¸€ç›®äº†ç„¶</strong>ï¼šè¿æ¥çº¿çš„é•¿åº¦ç›´è§‚è¡¨ç¤ºå˜åŒ–å¹…åº¦ï¼Œæ–¹å‘è¡¨ç¤ºå¢é•¿æˆ–ä¸‹é™</li>\n<li><strong>å‡å°‘è§†è§‰è·³è·ƒ</strong>ï¼šçœ¼ç›ä¸éœ€è¦åœ¨æ¡å½¢é—´æ¥å›ç§»åŠ¨ï¼Œè€Œæ˜¯æ²¿ç€æ°´å¹³çº¿è‡ªç„¶è¿½è¸ª</li>\n<li><strong>çªå‡ºæ¯”è¾ƒé‡ç‚¹</strong>ï¼šä¸“æ³¨äºæ¯ä¸ªé¡¹ç›®çš„ä¸¤ä¸ªçŠ¶æ€å¯¹æ¯”ï¼Œè€Œéç»å¯¹æ•°å€¼</li>\n</ul>\n<p>è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç»™<strong>å“‘é“ƒå›¾</strong>æ’åºï¼ŒæŒ‰ç…§å¢é•¿<strong>ç”±å¿«åˆ°æ…¢</strong>ç»™å„ä¸ªå“ç±»æ’åºï¼Œè¿™æ ·è‡ªç„¶å½¢æˆä»\"ä¸‹é™æœ€æ˜¾è‘—\"åˆ°\"å¢é•¿æœ€æ˜¾è‘—\"çš„è¿ç»­è°±ï¼Œæ¨¡å¼è‡ªåŠ¨æ˜¾ç°ï¼Œæ— éœ€åˆ»æ„å¯»æ‰¾ã€‚</p>\n<p>æ¯”å¦‚ä¸Šé¢çš„<strong>å“‘é“ƒå›¾</strong>ä¸­ï¼Œã€æœè£…é‹å¸½ã€‘è¿™ä¸ªå“ç±»å…¶å®é”€å”®é¢æ˜¯ä¸‹é™çš„ï¼Œæ··åœ¨ä¸€å †å“‘é“ƒä¸­ä¸å®¹æ˜“çœ‹å‡ºæ¥å§ï¼Ÿ</p>\n<pre><code class=\"language-python\"># åˆ›å»ºæ’åºåçš„å“‘é“ƒå›¾\nfig, ax = plt.subplots(figsize=(10, 8))\n\n# æŒ‰å˜åŒ–å¹…åº¦æ’åº\nsorted_indices = np.argsort(\n    [sales_2023[i] - sales_2022[i] for i in range(len(categories))]\n)\nsorted_categories = [categories[i] for i in sorted_indices]\nsorted_2022 = [sales_2022[i] for i in sorted_indices]\nsorted_2023 = [sales_2023[i] for i in sorted_indices]\n\n# ç»˜åˆ¶è¿æ¥çº¿\n# çœç•¥ ...\n\n# ç»˜åˆ¶æ•°æ®ç‚¹\n# çœç•¥ ...\n\n# æ·»åŠ å˜åŒ–ç®­å¤´æ ‡æ³¨\n# çœç•¥ ...\n\nplt.tight_layout()\nplt.show()\n</code></pre>\n\n<p><img alt=\"\" src=\"https://img2024.cnblogs.com/blog/83005/202601/83005-20260122232220694-18227431.png\" /></p>\n<p>è¿™æ ·æ”¹é€ åï¼Œç”±ä¸Šåˆ°ä¸‹çš„å“‘é“ƒï¼Œè¶Šæ¥è¶ŠçŸ­ï¼ˆä¹Ÿå°±æ˜¯å¢é•¿è¶Šæ¥è¶Šæ…¢ï¼‰ï¼Œæœ€åº•éƒ¨çš„é‚£ä¸ªæ˜¯<strong>è´Ÿå¢é•¿</strong>ï¼Œç”¨äº†<strong>çº¢è‰²</strong>æ¥æ ‡æ³¨ã€‚</p>\n<h1 id=\"4-æ€»ç»“\">4. æ€»ç»“</h1>\n<p>æ•°æ®å¯è§†åŒ–çš„æ ¸å¿ƒç›®æ ‡æ˜¯<strong>æœ‰æ•ˆä¼ è¾¾ä¿¡æ¯</strong>ã€‚å½“æˆ‘ä»¬éœ€è¦å¼ºè°ƒå˜åŒ–ã€æ¯”è¾ƒä¸¤ä¸ªç›¸å…³çŠ¶æ€æ—¶ï¼Œ<strong>å“‘é“ƒå›¾</strong>æä¾›äº†ä¸€ç§ç®€æ´è€Œå¼ºå¤§çš„è§£å†³æ–¹æ¡ˆã€‚</p>\n<p>å°±åƒé€‰æ‹©åˆé€‚çš„å·¥å…·å®Œæˆå·¥ä½œä¸€æ ·ï¼Œåœ¨é¢å¯¹æ•°æ®æ¯”è¾ƒä»»åŠ¡æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©æœ€åˆé€‚çš„å¯è§†åŒ–å½¢å¼ï¼š</p>\n<ul>\n<li>å½“éœ€è¦æ¯”è¾ƒå¤šä¸ªé¡¹ç›®çš„ä¸¤ä¸ªçŠ¶æ€æ—¶ï¼Œé€‰æ‹©<strong>å“‘é“ƒå›¾</strong></li>\n<li>å½“éœ€è¦å±•ç¤ºå•ä¸ªé¡¹ç›®çš„å¤šä¸ªç»„æˆéƒ¨åˆ†æ—¶ï¼Œé€‰æ‹©<strong>å †ç§¯æ¡å½¢å›¾</strong></li>\n<li>å½“éœ€è¦æ¯”è¾ƒå¤šä¸ªé¡¹ç›®çš„å¤šä¸ªç±»åˆ«æ—¶ï¼Œé€‰æ‹©<strong>ç°‡çŠ¶æ¡å½¢å›¾</strong></li>\n</ul>\n<p>æœ€å¥½çš„å¯è§†åŒ–ä¸æ˜¯æœ€å¤æ‚çš„ï¼Œè€Œæ˜¯èƒ½è®©è§‚ä¼—åœ¨æœ€çŸ­æ—¶é—´å†…ç†è§£æœ€å¤šä¿¡æ¯çš„é‚£ä¸ªã€‚</p>\n<p><strong>å“‘é“ƒå›¾</strong>æ­£æ˜¯è¿™æ ·ä¸€ç§é«˜æ•ˆçš„å·¥å…·ï¼Œå®ƒç”¨æœ€ç®€å•çš„çº¿æ¡è¿æ¥ï¼Œè®²è¿°äº†æ•°æ®ä¸–ç•Œä¸­æœ€åŠ¨äººçš„å˜åŒ–æ•…äº‹ã€‚</p>\n<p>ä¸‹æ¬¡åšæŠ¥å‘Šæ—¶ï¼Œä¸å¦¨è¯•ç€æŠŠé‚£å¼ æ‹¥æŒ¤çš„ç°‡çŠ¶æ¡å½¢å›¾æ¢æˆ<strong>å“‘é“ƒå›¾</strong>ï¼Œç›¸ä¿¡ä½ çš„è§‚ä¼—ä¼šæ„Ÿå¹ï¼šâ€œå“‡ï¼Œè¿™å¼ å›¾åšå¾—çœŸä¸“ä¸šï¼â€</p>\n<p>å®Œæ•´ä»£ç ï¼š<a href=\"https://url11.ctfile.com/f/45455611-8608730361-d698e0?p=6872\" rel=\"noopener nofollow\" target=\"_blank\">å“‘é“ƒå›¾.ipynb</a> (è®¿é—®å¯†ç : 6872)</p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-22 23:23</span>&nbsp;\n<a href=\"https://www.cnblogs.com/wang_yb\">wang_yb</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">0</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "Langchain å¿«é€Ÿå…¥é—¨(ä¸€)",
      "link": "https://www.cnblogs.com/ClownLMe/p/19519224",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/ClownLMe/p/19519224\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-22 22:51\">\n    <span>Langchain å¿«é€Ÿå…¥é—¨(ä¸€)</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h1 id=\"ç®€ä»‹\">ç®€ä»‹</h1>\n<p>langchainä¸“é—¨ç”¨äºæ„å»ºLLMå¤§è¯­è¨€æ¨¡å‹ï¼Œå…¶ä¸­æä¾›äº†å¤§é‡çš„promptæ¨¡æ¿ï¼Œå’Œç»„ä»¶ï¼Œé€šè¿‡chain(é“¾)çš„æ–¹å¼å°†æµç¨‹è¿æ¥èµ·æ¥ï¼Œæ“ä½œç®€å•ï¼Œå¼€å‘ä¾¿æ·ã€‚</p>\n<h1 id=\"ç¯å¢ƒé…ç½®\">ç¯å¢ƒé…ç½®</h1>\n<p><strong>å®‰è£…langchainæ¡†æ¶</strong></p>\n<pre><code class=\"language-bash\">pip install langchain langchain-community\n</code></pre>\n<p>å…¶ä¸­langchainå¯ä»¥æä¾›äº†å„ç§å¤§æ¨¡å‹è¯­è¨€åº“é€‰æ‹©ï¼Œï¼ˆè¿™é‡Œåªåˆ—ä¸¾å‡ ä¸ªï¼‰ä¾‹å¦‚ï¼š</p>\n<pre><code class=\"language-bash\">#chatgpt\npip install langchain-openai\n#hugging face\npip install langchain-huggingface\n#åƒé—®\npip install langchain-qwq\n</code></pre>\n<h1 id=\"1-è®©æ¨¡å‹è·‘èµ·æ¥\">1. è®©æ¨¡å‹è·‘èµ·æ¥</h1>\n<p>å¦‚ä½•è®©ä½ llmè·‘èµ·æ¥ï¼Œè¿™é‡Œç”¨çš„æ˜¯åƒé—®ï¼Œæ¥æ¼”ç¤º</p>\n<h3 id=\"æ¡ˆä¾‹\">æ¡ˆä¾‹</h3>\n<pre><code class=\"language-python\">import os\nfrom langchain_community.chat_models.tongyi import ChatTongyi\nfrom langchain_core.prompts import ChatPromptTemplate\nfrom langchain_core.output_parsers import StrOutputParser\n\n#è¿™é‡Œæ˜¯ä½ çš„åƒé—®apikey\nos.environ[\"DASHSCOPE_API_KEY\"] = \"apikey\"\n\nmodel = ChatTongyi(model=\"qwen-plus\")\n\nprompt = ChatPromptTemplate.from_messages([\n&nbsp; &nbsp; (\"system\", \"ä½ æ˜¯ä¸€ä¸ªç²¾é€š{topic}çš„èµ„æ·±æŠ€æœ¯ä¸“å®¶ã€‚\"),\n&nbsp; &nbsp; (\"user\", \"è¯·ç”¨ä¸‰å¥è¯è§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯{concept}ã€‚\")\n])\n\noutput_parser = StrOutputParser()\n\nchain = prompt | model | output_parser\n\n#æ–‡æœ¬è¾“å‡º\nresponse = chain.invoke({\"topic\": \"Python\", \"concept\": \"åˆ—è¡¨\"})\nprint(response)\n\n#åˆ†å‰²\nprint(\"=\"*30)\n\n#æµå¼è¾“å‡º\nfor chunk in chain.stream({\"topic\": \"äººå·¥æ™ºèƒ½\", \"concept\": \"ç¥ç»ç½‘ç»œ\"}):\n&nbsp; &nbsp; print(chunk, end=\"\", flush=True)\n</code></pre>\n<h3 id=\"ä»£ç è§£é‡Š\">ä»£ç è§£é‡Š</h3>\n<p>æ•´ä¸ªä»£ç çš„æµç¨‹å¦‚ä¸‹ï¼š<br />\n<strong>åˆ›å»ºæ¨¡å‹-&gt;æ„å»ºæç¤ºè¯-&gt;æ„å»ºchainé“¾-&gt;ä½¿ç”¨å¤§æ¨¡å‹</strong></p>\n<h5 id=\"åˆ›å»ºæ¨¡å‹\">åˆ›å»ºæ¨¡å‹</h5>\n<p>è¿™ä¸€æ­¥ç”¨ä¸åŒçš„æ¨¡å‹å¯èƒ½ä¼šä¸åŒ<br />\nè¿™é‡Œåˆ©ç”¨langchainçš„åƒé—®åº“åˆ›å»ºæ¨¡å‹ï¼Œå¯èƒ½ä¼šä¸åŒ</p>\n<pre><code class=\"language-python\">model = ChatTongyi(model=\"qwen-plus\")\n\n#ä¾‹å¦‚ç”¨chatgpt\nllm = init_chat_model(\"gpt-4o\", model_provider=\"openai\")\n</code></pre>\n<h5 id=\"æ„å»ºæç¤ºè¯\">æ„å»ºæç¤ºè¯</h5>\n<p>è¿™ä¸€æ­¥æ„å»ºåˆ©ç”¨äº†langchainåº“æä¾›æç¤ºè¯æ¨¡æ¿ï¼š<br />\nå…¶ä¸­ç”¨<code>{}</code>é˜”èµ·æ¥çš„åœ¨è°ƒç”¨æ—¶å¯ä»¥åŠ¨æ€ç”¨å­—å…¸æ›¿æ¢</p>\n<pre><code class=\"language-python\">prompt = ChatPromptTemplate.from_messages([\n&nbsp; &nbsp; (\"system\", \"ä½ æ˜¯ä¸€ä¸ªç²¾é€š{topic}çš„èµ„æ·±æŠ€æœ¯ä¸“å®¶ã€‚\"),\n&nbsp; &nbsp; (\"user\", \"è¯·ç”¨ä¸‰å¥è¯è§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯{concept}ã€‚\")\n])\n</code></pre>\n<p>å„ä¸ªè§’è‰²åŠŸèƒ½å¦‚ä¸‹ï¼š</p>\n<table>\n<thead>\n<tr>\n<th><strong>è§’è‰²åç§° (Role)</strong></th>\n<th><strong>å¯¹åº”çš„ç±»</strong></th>\n<th><strong>ä½œç”¨è¯´æ˜</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>system</strong></td>\n<td><code>SystemMessage</code></td>\n<td><strong>ç³»ç»Ÿæç¤ºè¯</strong>ã€‚ç”¨äºè®¾å®š AI çš„â€œäººæ ¼â€ã€ä¸“ä¸šèƒŒæ™¯ã€è¡Œä¸ºå‡†åˆ™æˆ–çº¦æŸæ¡ä»¶ã€‚å®ƒé€šå¸¸ä¼˜å…ˆçº§æœ€é«˜ï¼Œå†³å®šäº†åç»­å¯¹è¯çš„åŸºè°ƒã€‚</td>\n</tr>\n<tr>\n<td><strong>user</strong></td>\n<td><code>HumanMessage</code></td>\n<td><strong>ç”¨æˆ·æ¶ˆæ¯</strong>ã€‚ä»£è¡¨äººç±»å‘é€çš„å†…å®¹ã€‚è¿™æ˜¯æ¨¡å‹éœ€è¦ç›´æ¥å›ç­”æˆ–å¤„ç†çš„é—®é¢˜ã€‚</td>\n</tr>\n<tr>\n<td><strong>ai</strong></td>\n<td><code>AIMessage</code></td>\n<td><strong>AI æ¶ˆæ¯</strong>ã€‚ä»£è¡¨æ¨¡å‹ä¹‹å‰çš„å›å¤ã€‚åœ¨æ„å»ºå¤šè½®å¯¹è¯ï¼ˆå¸¦è®°å¿†ï¼‰æ—¶ï¼Œéœ€è¦æŠŠæ¨¡å‹ä¹‹å‰çš„å›å¤ä¼ å›å»ã€‚</td>\n</tr>\n</tbody>\n</table>\n<h5 id=\"æ„å»ºchainé“¾\">æ„å»ºchainé“¾</h5>\n<p>è¿™ä¸ªæ˜¯langchainçš„çµé­‚ï¼Œè¿™é‡Œç®€å•è¯´æ˜ï¼Œåé¢ä¼šå‘æ›´è¯¦ç»†çš„æ•™å­¦æ–‡ç« <br />\nchainé“¾çš„è¿è¡Œæµç¨‹å¦‚ä¸‹ï¼š<br />\n<strong>å°†è¾“å…¥å¡«å……prompt-&gt;å°†å®Œæ•´promptå–‚ç»™LLM-&gt;ç›´æ¥è§£æè¿”å›æ–‡æœ¬</strong></p>\n<p><code>StrOutputParser()</code>è¿™ä¸ªæ˜¯langchainæä¾›çš„æ–‡æœ¬è§£æå™¨ï¼Œç”¨äºå°†ä¸Šé¢çš„ç»“æœè§£æä¸ºæ–‡æœ¬</p>\n<pre><code class=\"language-python\">output_parser = StrOutputParser()\nchain = prompt | model | output_parser\n</code></pre>\n<h5 id=\"ä½¿ç”¨å¤§æ¨¡å‹\">ä½¿ç”¨å¤§æ¨¡å‹</h5>\n<p>è¿™é‡Œæœ‰ä¸¤ç§æ–¹å¼ï¼š</p>\n<ol>\n<li>ç›´æ¥è¾“å‡ºå®Œæ•´çš„æ–‡æœ¬</li>\n</ol>\n<pre><code class=\"language-python\">response = chain.invoke({\"topic\": \"Python\", \"concept\": \"åˆ—è¡¨\"})\nprint(response)\n</code></pre>\n<ol start=\"2\">\n<li>æµæ–‡æœ¬è¾“å‡ºï¼ˆæ‰“å­—æœºï¼‰</li>\n</ol>\n<pre><code class=\"language-python\">for chunk in chain.stream({\"topic\": \"äººå·¥æ™ºèƒ½\", \"concept\": \"ç¥ç»ç½‘ç»œ\"}):\n&nbsp; &nbsp; print(chunk, end=\"\", flush=True)\n</code></pre>\n<p><strong>å¦‚æœâ¤å–œæ¬¢â¤æœ¬ç³»åˆ—æ•™ç¨‹ï¼Œå°±ç‚¹ä¸ªå…³æ³¨å§ï¼Œåç»­ä¸å®šæœŸæ›´æ–°~</strong></p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-22 22:51</span>&nbsp;\n<a href=\"https://www.cnblogs.com/ClownLMe\">ClownLMe</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">0</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "Nginxå¤šæœåŠ¡é™æ€èµ„æºè·¯å¾„å†²çªè§£å†³æ–¹æ¡ˆ",
      "link": "https://www.cnblogs.com/yudaxia/p/19519201",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/yudaxia/p/19519201\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-22 22:34\">\n    <span>Nginxå¤šæœåŠ¡é™æ€èµ„æºè·¯å¾„å†²çªè§£å†³æ–¹æ¡ˆ</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<blockquote>\n<p>åœ¨ä½¿ç”¨Nginxåå‘ä»£ç†å¤šä¸ªFlaskåº”ç”¨æ—¶ï¼Œé‡åˆ°äº†ä¸€ä¸ªæ£˜æ‰‹çš„é—®é¢˜ï¼šä¸åŒæœåŠ¡çš„é™æ€èµ„æºï¼ˆCSS/JSï¼‰ä¼šäº’ç›¸å¹²æ‰°ã€‚æœ¬æ–‡è®°å½•äº†é—®é¢˜çš„åˆ†æè¿‡ç¨‹å’Œè§£å†³æ–¹æ¡ˆã€‚</p>\n<p><strong>å…³é”®è¯</strong>ï¼šNginxåå‘ä»£ç†ã€Flaské™æ€èµ„æºã€locationåŒ¹é…ã€proxy_pass</p>\n</blockquote>\n<h2 id=\"é—®é¢˜æè¿°\">é—®é¢˜æè¿°</h2>\n<p>åœ¨Nginxåå‘ä»£ç†å¤šä¸ªFlaskæœåŠ¡æ—¶ï¼Œä¸åŒæœåŠ¡çš„é™æ€èµ„æºè·¯å¾„ä¼šå‘ç”Ÿå†²çªï¼Œå¯¼è‡´æœåŠ¡Açš„é¡µé¢åŠ è½½äº†æœåŠ¡Bçš„CSS/JSæ–‡ä»¶ï¼Œæˆ–è€…æ‰¾ä¸åˆ°é™æ€èµ„æºè¿”å›404é”™è¯¯ã€‚</p>\n<h3 id=\"é—®é¢˜åœºæ™¯\">é—®é¢˜åœºæ™¯</h3>\n<h4 id=\"éƒ¨ç½²æ¶æ„\">éƒ¨ç½²æ¶æ„</h4>\n<pre><code>åŸŸå: mathcoding.top\nâ”œâ”€â”€ ä¸»æœåŠ¡ (ç«¯å£5000) â†’ è·¯å¾„å‰ç¼€: /\nâ””â”€â”€ é™æµæœåŠ¡ (ç«¯å£5001) â†’ è·¯å¾„å‰ç¼€: /numberLimit\n</code></pre>\n<h4 id=\"åˆå§‹nginxé…ç½®\">åˆå§‹Nginxé…ç½®</h4>\n<pre><code class=\"language-nginx\"># é™æµæœåŠ¡\nlocation /numberLimit {\n&nbsp; &nbsp; proxy_pass http://127.0.0.1:5001/;\n&nbsp; &nbsp; proxy_set_header Host $host;\n&nbsp; &nbsp; proxy_set_header X-Real-IP $remote_addr;\n&nbsp; &nbsp; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n&nbsp; &nbsp; proxy_set_header X-Forwarded-Proto $scheme;\n}\n# ä¸»æœåŠ¡ï¼ˆå…œåº•è§„åˆ™ï¼‰\nlocation / {\n&nbsp; &nbsp; proxy_pass http://127.0.0.1:5000;\n&nbsp; &nbsp; proxy_set_header Host $host;\n&nbsp; &nbsp; proxy_set_header X-Real-IP $remote_addr;\n&nbsp; &nbsp; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n&nbsp; &nbsp; proxy_set_header X-Forwarded-Proto $scheme;\n}\n</code></pre>\n<h4 id=\"flaskæ¨¡æ¿ä»£ç \">Flaskæ¨¡æ¿ä»£ç </h4>\n<pre><code class=\"language-html\">&lt;!-- 5001ç«¯å£çš„é™æµæœåŠ¡çš„æ¨¡æ¿ --&gt;\n&lt;link rel=\"stylesheet\" href=\"{{url_for('static', filename='css/style.css')}}\" /&gt;\n</code></pre>\n<h3 id=\"é”™è¯¯è¡¨ç°è¯¦è§£\">é”™è¯¯è¡¨ç°è¯¦è§£</h3>\n<p><strong>æœŸæœ›è¡Œä¸º</strong>ï¼š</p>\n<ol>\n<li>è®¿é—® <code>https://mathcoding.top/numberLimit/</code> åŠ è½½é™æµæœåŠ¡çš„é¡µé¢</li>\n<li>é¡µé¢ä¸­çš„CSSé“¾æ¥åº”è¯¥è¯·æ±‚é™æµæœåŠ¡(5001ç«¯å£)çš„é™æ€èµ„æº</li>\n<li>æµè§ˆå™¨åº”è¯¥èƒ½æ­£ç¡®è·å–åˆ°é™æµæœåŠ¡çš„ <code>static/css/style.css</code> æ–‡ä»¶<br />\n<strong>å®é™…è¡Œä¸º</strong>ï¼š</li>\n<li>è®¿é—® <code>https://mathcoding.top/numberLimit/</code> âœ… æ­£ç¡®åŠ è½½é¡µé¢HTML</li>\n<li>Flaskçš„ <code>url_for('static')</code> ç”Ÿæˆè·¯å¾„ï¼š<code>/static/css/style.css</code></li>\n<li>æµè§ˆå™¨å‘èµ·è¯·æ±‚ï¼š<code>https://mathcoding.top/static/css/style.css</code></li>\n<li>NginxåŒ¹é…åˆ° <code>location /</code>ï¼ˆå› ä¸º <code>/static/...</code> åŒ¹é…ä¸åˆ° <code>/numberLimit</code>ï¼‰</li>\n<li>è¯·æ±‚è¢«è½¬å‘åˆ°ä¸»æœåŠ¡5000ç«¯å£ âŒ <strong>é”™è¯¯çš„æœåŠ¡ï¼</strong></li>\n<li>ç»“æœï¼šåŠ è½½äº†ä¸»æœåŠ¡çš„CSSï¼ˆæ ·å¼é”™è¯¯ï¼‰æˆ–è¿”å›404ï¼ˆä¸»æœåŠ¡æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼‰</li>\n</ol>\n<h3 id=\"é—®é¢˜çš„è§†è§‰è¡¨ç°\">é—®é¢˜çš„è§†è§‰è¡¨ç°</h3>\n<p>æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·Networkæ ‡ç­¾ä¼šçœ‹åˆ°ï¼š</p>\n<pre><code>è¯·æ±‚URL: https://mathcoding.top/static/css/style.css\nçŠ¶æ€ç : 200 æˆ– 404\næ¥æºé¡µé¢: https://mathcoding.top/numberLimit/\né—®é¢˜: è¿™ä¸ªCSSæ–‡ä»¶æ¥è‡ª5000ç«¯å£çš„ä¸»æœåŠ¡ï¼Œä¸æ˜¯5001ç«¯å£çš„é™æµæœåŠ¡\n</code></pre>\n<p>é¡µé¢è¡¨ç°ï¼š</p>\n<ul>\n<li>CSSæ ·å¼ä¸æ­£ç¡®æˆ–å®Œå…¨æ²¡æœ‰æ ·å¼</li>\n<li>æ§åˆ¶å°å¯èƒ½å‡ºç°MIMEç±»å‹é”™è¯¯</li>\n<li>å¦‚æœä¸»æœåŠ¡æ²¡æœ‰åŒåæ–‡ä»¶ï¼Œåˆ™æ˜¾ç¤º404é”™è¯¯</li>\n</ul>\n<h2 id=\"é—®é¢˜æ ¹æº\">é—®é¢˜æ ¹æº</h2>\n<h3 id=\"åº•å±‚åŸç†\">åº•å±‚åŸç†</h3>\n<ol>\n<li><strong>Flask URLç”Ÿæˆæœºåˆ¶</strong>ï¼š<code>url_for('static')</code> ç”Ÿæˆçš„æ˜¯ç»å¯¹è·¯å¾„ï¼Œé»˜è®¤ä¸º <code>/static/...</code>ï¼Œä¸åŒ…å«æœåŠ¡çš„æŒ‚è½½å‰ç¼€</li>\n<li><strong>Nginx locationåŒ¹é…è§„åˆ™</strong>ï¼šé‡‡ç”¨æœ€é•¿å‰ç¼€åŒ¹é…ï¼Œ<code>/static/...</code> ä¸åŒ¹é… <code>/numberLimit</code>ï¼Œå› æ­¤è¢« <code>location /</code> æ•è·</li>\n<li><strong>è·¯å¾„å‘½åç©ºé—´å†²çª</strong>ï¼šå¤šä¸ªæœåŠ¡å…±äº«åŒä¸€ä¸ªURLè·¯å¾„ç©ºé—´ï¼Œéƒ½ä½¿ç”¨ <code>/static/...</code> ä½œä¸ºé™æ€èµ„æºè·¯å¾„</li>\n</ol>\n<h3 id=\"è¯·æ±‚æµç¨‹åˆ†æ\">è¯·æ±‚æµç¨‹åˆ†æ</h3>\n<pre><code>Flaskæ¸²æŸ“æ¨¡æ¿\n&nbsp; &nbsp; â†“\nurl_for('static', filename='css/style.css')\n&nbsp; &nbsp; â†“\nç”ŸæˆHTML: &lt;link href=\"/static/css/style.css\"&gt;\n&nbsp; &nbsp; â†“\næµè§ˆå™¨è§£æHTMLå¹¶å‘èµ·è¯·æ±‚: GET /static/css/style.css\n&nbsp; &nbsp; â†“\nNginxåŒ¹é…è§„åˆ™:\n&nbsp; - /numberLimit? ä¸åŒ¹é… (è¯·æ±‚è·¯å¾„æ˜¯/static/..., ä¸æ˜¯/numberLimit/...)\n&nbsp; - /? åŒ¹é…! (æœ€é•¿å‰ç¼€åŒ¹é…çš„å…œåº•è§„åˆ™)\n&nbsp; &nbsp; â†“\nproxy_passè½¬å‘åˆ°: http://127.0.0.1:5000/static/css/style.css\n&nbsp; &nbsp; â†“\né”™è¯¯: 5001æœåŠ¡çš„é™æ€èµ„æºè¢«é”™è¯¯åœ°è·¯ç”±åˆ°5000æœåŠ¡\n</code></pre>\n<h3 id=\"ä¸ºä»€ä¹ˆflaskä¸ç”Ÿæˆ-numberlimitstatic\">ä¸ºä»€ä¹ˆFlaskä¸ç”Ÿæˆ <code>/numberLimit/static/...</code>ï¼Ÿ</h3>\n<p>Flaskåº”ç”¨æœ¬èº«ä¸çŸ¥é“å®ƒè¢«éƒ¨ç½²åœ¨ä»€ä¹ˆè·¯å¾„ä¸‹ã€‚ä»Flaskçš„è§†è§’ï¼š</p>\n<ul>\n<li>å®ƒæ”¶åˆ°çš„è¯·æ±‚è·¯å¾„æ˜¯ <code>/</code>ï¼ˆå› ä¸º <code>proxy_pass http://127.0.0.1:5001/</code> æœ«å°¾æœ‰æ–œæ ï¼Œä¼šå‰¥ç¦»å‰ç¼€ï¼‰</li>\n<li>å®ƒè®¤ä¸ºè‡ªå·±çš„æ ¹è·¯å¾„å°±æ˜¯ <code>/</code></li>\n<li>æ‰€ä»¥ <code>url_for('static')</code> ç”Ÿæˆ <code>/static/...</code> è€Œä¸æ˜¯ <code>/numberLimit/static/...</code><br />\nè¿™å°±æ˜¯ä¸ºä»€ä¹ˆéœ€è¦åœ¨Flaskç«¯é…ç½® <code>static_url_path</code>ï¼Œæˆ–è€…åœ¨Nginxç«¯åšè·¯å¾„é‡å†™ã€‚</li>\n</ul>\n<h2 id=\"è§£å†³æ–¹æ¡ˆ\">è§£å†³æ–¹æ¡ˆ</h2>\n<h3 id=\"æ–¹æ¡ˆé€‰æ‹©ç‹¬ç«‹é™æ€èµ„æºè·¯å¾„å‰ç¼€\">æ–¹æ¡ˆé€‰æ‹©ï¼šç‹¬ç«‹é™æ€èµ„æºè·¯å¾„å‰ç¼€</h3>\n<p>ä¸ºæ¯ä¸ªæœåŠ¡é…ç½®ç‹¬ç«‹çš„é™æ€èµ„æºURLå‰ç¼€ï¼Œé¿å…è·¯å¾„å†²çªã€‚è¿™ç§æ–¹æ¡ˆï¼š</p>\n<ul>\n<li>æœåŠ¡ä»£ç æ”¹åŠ¨æœ€å°ï¼ˆåªæ”¹ä¸€ä¸ªé…ç½®å‚æ•°ï¼‰</li>\n<li>ä¸éœ€è¦å¤æ‚çš„URLé‡å†™è§„åˆ™</li>\n<li>æ˜“äºç†è§£å’Œç»´æŠ¤</li>\n<li>ç¬¦åˆå¾®æœåŠ¡çš„å‘½åç©ºé—´éš”ç¦»åŸåˆ™</li>\n</ul>\n<h3 id=\"flaské…ç½®\">Flaské…ç½®</h3>\n<pre><code class=\"language-python\"># è®¾ç½®ç‹¬ç«‹çš„é™æ€èµ„æºURLè·¯å¾„\napp = Flask(__name__, static_url_path=\"/numberLimit-static\")\n</code></pre>\n<p><strong>å‚æ•°è¯´æ˜</strong>ï¼š</p>\n<ul>\n<li><code>static_url_path</code>: æ§åˆ¶URLç”Ÿæˆï¼Œå½±å“ <code>url_for('static')</code> çš„è¾“å‡º</li>\n<li><code>static_folder</code>: æ§åˆ¶æ–‡ä»¶ç³»ç»Ÿè·¯å¾„ï¼ˆé»˜è®¤ä¸º'static'ï¼Œä¸éœ€è¦æ”¹ï¼‰<br />\n<strong>æ•ˆæœ</strong>ï¼š</li>\n</ul>\n<pre><code class=\"language-python\"># ä¿®æ”¹å‰\nurl_for('static', filename='css/style.css') &nbsp;# â†’ /static/css/style.css\n# ä¿®æ”¹å\nurl_for('static', filename='css/style.css') &nbsp;# â†’ /numberLimit-static/css/style.css\n</code></pre>\n<h3 id=\"nginxé…ç½®\">Nginxé…ç½®</h3>\n<pre><code class=\"language-nginx\"># é™æ€èµ„æºlocationï¼ˆä¼˜å…ˆçº§é«˜ï¼Œæ”¾åœ¨å‰é¢ï¼‰\nlocation /numberLimit-static/ {\n&nbsp; &nbsp; proxy_pass http://127.0.0.1:5001/numberLimit-static/;\n&nbsp; &nbsp; proxy_set_header Host $host;\n&nbsp; &nbsp; proxy_set_header X-Real-IP $remote_addr;\n&nbsp; &nbsp; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n&nbsp; &nbsp; proxy_set_header X-Forwarded-Proto $scheme;\n}\n# æœåŠ¡ä¸»è·¯å¾„\nlocation /numberLimit {\n&nbsp; &nbsp; proxy_pass http://127.0.0.1:5001/;\n&nbsp; &nbsp; proxy_set_header Host $host;\n&nbsp; &nbsp; proxy_set_header X-Real-IP $remote_addr;\n&nbsp; &nbsp; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n&nbsp; &nbsp; proxy_set_header X-Forwarded-Proto $scheme;\n}\n# ä¸»æœåŠ¡ï¼ˆæ”¾åœ¨æœ€åï¼‰\nlocation / {\n&nbsp; &nbsp; proxy_pass http://127.0.0.1:5000;\n&nbsp; &nbsp; proxy_set_header Host $host;\n&nbsp; &nbsp; proxy_set_header X-Real-IP $remote_addr;\n&nbsp; &nbsp; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n&nbsp; &nbsp; proxy_set_header X-Forwarded-Proto $scheme;\n}\n</code></pre>\n<h3 id=\"å·¥ä½œæµç¨‹\">å·¥ä½œæµç¨‹</h3>\n<pre><code>Flaskæ¸²æŸ“æ¨¡æ¿\n&nbsp; &nbsp; â†“\nurl_for('static', filename='css/style.css')\n&nbsp; &nbsp; â†“\nç”ŸæˆHTML: &lt;link href=\"/numberLimit-static/css/style.css\"&gt;\n&nbsp; &nbsp; â†“\næµè§ˆå™¨è¯·æ±‚: GET https://mathcoding.top/numberLimit-static/css/style.css\n&nbsp; &nbsp; â†“\nNginxåŒ¹é…è§„åˆ™:\n&nbsp; - /numberLimit-static/? åŒ¹é…! (æœ€é•¿å‰ç¼€åŒ¹é…)\n&nbsp; &nbsp; â†“\nproxy_passè½¬å‘: http://127.0.0.1:5001/numberLimit-static/css/style.css\n&nbsp; &nbsp; â†“\nFlaskå¤„ç†:\n&nbsp; - è·¯ç”± /numberLimit-static/* ç”± static_url_path å¤„ç†\n&nbsp; - æ˜ å°„åˆ°æ–‡ä»¶ç³»ç»Ÿ: static/css/style.css\n&nbsp; &nbsp; â†“\nè¿”å›æ­£ç¡®çš„CSSæ–‡ä»¶ âœ…\n</code></pre>\n<h2 id=\"å…³é”®æŠ€æœ¯ç»†èŠ‚\">å…³é”®æŠ€æœ¯ç»†èŠ‚</h2>\n<h3 id=\"proxy_passå°¾æ–œæ çš„ä½œç”¨\">proxy_passå°¾æ–œæ çš„ä½œç”¨</h3>\n<pre><code class=\"language-nginx\"># âœ… æ­£ç¡®ï¼šå¸¦å°¾æ–œæ ï¼Œè¿›è¡Œè·¯å¾„æ›¿æ¢\nproxy_pass http://127.0.0.1:5001/numberLimit-static/;\n# è¯·æ±‚ /numberLimit-static/css/style.css\n# è½¬å‘ http://127.0.0.1:5001/numberLimit-static/css/style.css\n# âŒ é”™è¯¯ï¼šä¸å¸¦å°¾æ–œæ ï¼Œæ‹¼æ¥å®Œæ•´è·¯å¾„\nproxy_pass http://127.0.0.1:5001/numberLimit-static;\n# è¯·æ±‚ /numberLimit-static/css/style.css\n# è½¬å‘ http://127.0.0.1:5001/numberLimit-static/numberLimit-static/css/style.css\n</code></pre>\n<p><strong>åŸç†</strong>ï¼š</p>\n<ul>\n<li>æœ‰å°¾æ–œæ ï¼šNginxä¼šç”¨ <code>proxy_pass</code> çš„è·¯å¾„<strong>æ›¿æ¢</strong> <code>location</code> åŒ¹é…çš„éƒ¨åˆ†</li>\n<li>æ— å°¾æ–œæ ï¼šNginxä¼šç›´æ¥<strong>æ‹¼æ¥</strong>å®Œæ•´çš„è¯·æ±‚URI</li>\n</ul>\n<h3 id=\"locationåŒ¹é…ä¼˜å…ˆçº§\">locationåŒ¹é…ä¼˜å…ˆçº§</h3>\n<p>Nginxçš„locationåŒ¹é…è§„åˆ™ï¼ˆæŒ‰ä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼‰ï¼š</p>\n<ol>\n<li>ç²¾ç¡®åŒ¹é… <code>location = /path</code></li>\n<li>æ­£åˆ™åŒ¹é… <code>location ~ /pattern</code> æˆ– <code>location ~* /pattern</code></li>\n<li>å‰ç¼€åŒ¹é…ï¼ˆæœ€é•¿ä¼˜å…ˆï¼‰<code>location /path</code><br />\nåœ¨æœ¬æ–¹æ¡ˆä¸­ï¼š</li>\n</ol>\n<ul>\n<li><code>/numberLimit-static/</code> é•¿åº¦19ï¼Œæ¯” <code>/</code> æ›´å…·ä½“ï¼Œä¼˜å…ˆåŒ¹é…</li>\n<li><code>/numberLimit</code> é•¿åº¦13ï¼Œæ¯” <code>/</code> æ›´å…·ä½“ï¼Œä¼˜å…ˆåŒ¹é…</li>\n<li><code>/</code> é•¿åº¦1ï¼Œä½œä¸ºå…œåº•ï¼ŒåŒ¹é…æ‰€æœ‰å…¶ä»–è¯·æ±‚<br />\n<strong>éªŒè¯æ–¹æ³•</strong>ï¼š</li>\n</ul>\n<pre><code class=\"language-bash\"># æµ‹è¯•Nginxé…ç½®\nnginx -t\n# æŸ¥çœ‹å®é™…åŒ¹é…çš„locationï¼ˆéœ€è¦å¼€å¯debugæ—¥å¿—ï¼‰\ntail -f /var/log/nginx/error.log | grep location\n</code></pre>\n<h2 id=\"æ›´å¥½çš„é•¿æœŸæ–¹æ¡ˆå­åŸŸå\">æ›´å¥½çš„é•¿æœŸæ–¹æ¡ˆï¼šå­åŸŸå</h2>\n<p>å½“å‰çš„ <code>static_url_path</code> æ–¹æ¡ˆæ˜¯è·¯å¾„å‰ç¼€éƒ¨ç½²ä¸‹çš„æƒå®œä¹‹è®¡ã€‚<strong>æœ€ä½³å®è·µæ˜¯ä¸ºæ¯ä¸ªæœåŠ¡åˆ†é…ç‹¬ç«‹çš„å­åŸŸå</strong>ï¼Œè¿™æ ·å¯ä»¥ä»æ ¹æœ¬ä¸Šè§£å†³è·¯å¾„å†²çªé—®é¢˜ã€‚</p>\n<h3 id=\"å­åŸŸåæ–¹æ¡ˆç¤ºä¾‹\">å­åŸŸåæ–¹æ¡ˆç¤ºä¾‹</h3>\n<pre><code class=\"language-nginx\"># é™æµæœåŠ¡ - ç‹¬ç«‹å­åŸŸå\nserver {\n&nbsp; &nbsp; server_name numberlimit.mathcoding.top;\n&nbsp; &nbsp;\n&nbsp; &nbsp; location / {\n&nbsp; &nbsp; &nbsp; &nbsp; proxy_pass http://127.0.0.1:5001;\n&nbsp; &nbsp; &nbsp; &nbsp; # proxyé…ç½®...\n&nbsp; &nbsp; }\n}\n# ä¸»æœåŠ¡\nserver {\n&nbsp; &nbsp; server_name mathcoding.top www.mathcoding.top;\n&nbsp; &nbsp;\n&nbsp; &nbsp; location / {\n&nbsp; &nbsp; &nbsp; &nbsp; proxy_pass http://127.0.0.1:5000;\n&nbsp; &nbsp; &nbsp; &nbsp; # proxyé…ç½®...\n&nbsp; &nbsp; }\n}\n</code></pre>\n<p>Flaskæ¢å¤é»˜è®¤é…ç½®ï¼š</p>\n<pre><code class=\"language-python\">app = Flask(__name__) &nbsp;# æ— éœ€è®¾ç½®static_url_path\n</code></pre>\n<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>\n<ul>\n<li>æ¯ä¸ªæœåŠ¡æœ‰å®Œå…¨ç‹¬ç«‹çš„URLè·¯å¾„ç©ºé—´</li>\n<li>æ— éœ€ä»»ä½•ç‰¹æ®Šçš„é™æ€èµ„æºé…ç½®</li>\n<li>æ›´ç¬¦åˆå¾®æœåŠ¡æ¶æ„ç†å¿µ</li>\n<li>ä¾¿äºæœåŠ¡ç‹¬ç«‹æ‰©å±•å’Œè¿ç§»</li>\n</ul>\n<h2 id=\"æ€»ç»“\">æ€»ç»“</h2>\n<h3 id=\"é—®é¢˜æœ¬è´¨\">é—®é¢˜æœ¬è´¨</h3>\n<p>å¤šä¸ªæœåŠ¡å…±äº«åŒä¸€ä¸ªURLè·¯å¾„ç©ºé—´ï¼ŒFlaskç”Ÿæˆçš„é™æ€èµ„æºè·¯å¾„æ˜¯ç»å¯¹è·¯å¾„ï¼ˆ<code>/static/...</code>ï¼‰ï¼Œå¯¼è‡´ä¸åŒæœåŠ¡çš„é™æ€èµ„æºè¢«è·¯ç”±åˆ°é”™è¯¯çš„åç«¯æœåŠ¡ã€‚</p>\n<h3 id=\"è§£å†³æ–¹æ¡ˆæ ¸å¿ƒ\">è§£å†³æ–¹æ¡ˆæ ¸å¿ƒ</h3>\n<p>ä¸ºæ¯ä¸ªæœåŠ¡åˆ†é…ç‹¬ç«‹çš„é™æ€èµ„æºURLå‰ç¼€ï¼Œé€šè¿‡Flaskçš„ <code>static_url_path</code> å‚æ•°é…åˆNginxçš„locationè·¯ç”±å®ç°è·¯å¾„éš”ç¦»ã€‚</p>\n<h3 id=\"å…³é”®é…ç½®\">å…³é”®é…ç½®</h3>\n<ol>\n<li><strong>Flaskä¾§</strong>ï¼š<code>app = Flask(__name__, static_url_path=\"/æœåŠ¡å-static\")</code></li>\n<li><strong>Nginxä¾§</strong>ï¼šæ·»åŠ å¯¹åº”çš„ <code>location /æœåŠ¡å-static/</code> è§„åˆ™</li>\n<li><strong>æ³¨æ„ç‚¹</strong>ï¼š<code>proxy_pass</code> æœ«å°¾çš„æ–œæ ä¼šå½±å“è·¯å¾„è½¬æ¢</li>\n</ol>\n<h3 id=\"é€‚ç”¨åœºæ™¯\">é€‚ç”¨åœºæ™¯</h3>\n<ul>\n<li>å¤šä¸ªWebåº”ç”¨å…±äº«ä¸€ä¸ªåŸŸå</li>\n<li>ä½¿ç”¨è·¯å¾„å‰ç¼€åŒºåˆ†ä¸åŒæœåŠ¡ï¼ˆå¦‚ <code>/app1</code>ã€<code>/app2</code>ï¼‰</li>\n<li>éœ€è¦å¿«é€Ÿéƒ¨ç½²ï¼Œæš‚æ—¶æ— æ³•ä½¿ç”¨å­åŸŸå</li>\n</ul>\n<h3 id=\"é•¿æœŸå»ºè®®\">é•¿æœŸå»ºè®®</h3>\n<p>å½“ä¸šåŠ¡ç¨³å®šåï¼Œå»ºè®®è¿ç§»åˆ°å­åŸŸåæ–¹æ¡ˆï¼ˆå¦‚ <code>app1.example.com</code>ã€<code>app2.example.com</code>ï¼‰ï¼Œä»æ¶æ„ä¸Šå½»åº•è§£å†³è·¯å¾„å†²çªé—®é¢˜ã€‚</p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-22 22:34</span>&nbsp;\n<a href=\"https://www.cnblogs.com/yudaxia\">yupenglei</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">3</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    }
  ]
}