{
  "title": "ä¸»é¡µ - åšå®¢å›­",
  "link": "https://www.cnblogs.com/",
  "description": "ä¸»é¡µ - åšå®¢å›­ RSS",
  "entries": [
    {
      "title": "CodeSpirit å¤šè¯­è¨€å›½é™…åŒ–ä½¿ç”¨æŒ‡å—ï¼ˆBetaï¼‰",
      "link": "https://www.cnblogs.com/codelove/p/19417730",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n\t\t\t<a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/codelove/p/19417730\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2025-12-31 09:11\">\n    <span>CodeSpirit å¤šè¯­è¨€å›½é™…åŒ–ä½¿ç”¨æŒ‡å—ï¼ˆBetaï¼‰</span>\n    \n\n</a>\n\n\t\t</h1>\n\t\t<div class=\"clear\"></div>\n\t\t<div class=\"postBody\">\n\t\t\t<div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h2 id=\"-æ¦‚è¿°\">ğŸ“‹ æ¦‚è¿°</h2>\n<p>CodeSpirit æ¡†æ¶ç°å·²æ”¯æŒå®Œæ•´çš„å‰åç«¯å¤šè¯­è¨€å›½é™…åŒ–åŠŸèƒ½ï¼Œæä¾›ä¸­è‹±æ–‡åŒè¯­æ”¯æŒï¼ŒåŸºäº .NET èµ„æºæ–‡ä»¶å’Œ AMIS localeï¼Œé€šè¿‡ Settings ç»„ä»¶å®ç°å…¨å±€ã€ç§Ÿæˆ·ã€ç”¨æˆ·ä¸‰çº§è¯­è¨€é…ç½®ã€‚</p>\n<p><strong>ç‰ˆæœ¬</strong>: v1.0.0<br />\n<strong>æ”¯æŒè¯­è¨€</strong>: ç®€ä½“ä¸­æ–‡ï¼ˆzh-CNï¼‰ã€è‹±æ–‡ï¼ˆenï¼‰<br />\n<strong>æ›´æ–°æ—¥æœŸ</strong>: 2025å¹´12æœˆ28æ—¥</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/70544/202512/70544-20251229184550117-1365827054.png\" /></p>\n<h2 id=\"-æ ¸å¿ƒç‰¹æ€§\">ğŸ¯ æ ¸å¿ƒç‰¹æ€§</h2>\n<ul>\n<li>âœ… <strong>åŒè¯­æ”¯æŒ</strong>ï¼šä¸­æ–‡ï¼ˆé»˜è®¤ï¼‰+ è‹±æ–‡</li>\n<li>âœ… <strong>å…¨æ ˆè¦†ç›–</strong>ï¼šåç«¯ API + å‰ç«¯ UI</li>\n<li>âœ… <strong>å¤šçº§é…ç½®</strong>ï¼šç³»ç»Ÿé»˜è®¤ â†’ ç§Ÿæˆ·é»˜è®¤ â†’ ç”¨æˆ·åå¥½</li>\n<li>âœ… <strong>ç±»å‹å®‰å…¨</strong>ï¼šä½¿ç”¨ .resx èµ„æºæ–‡ä»¶ï¼Œç¼–è¯‘æ—¶å¼ºç±»å‹è®¿é—®</li>\n<li>âœ… <strong>åŠ¨æ€åˆ‡æ¢</strong>ï¼šç”¨æˆ·å¯å®æ—¶åˆ‡æ¢è¯­è¨€ï¼Œæ— éœ€é‡æ–°ç™»å½•</li>\n<li>âœ… <strong>AMIS å…¼å®¹</strong>ï¼šé›†æˆ AMIS çš„ locale æœºåˆ¶</li>\n<li>âœ… <strong>DataAnnotations æ”¯æŒ</strong>ï¼šéªŒè¯ç‰¹æ€§è‡ªåŠ¨æœ¬åœ°åŒ–</li>\n<li>âœ… <strong>DTOæè¿°å¤šè¯­è¨€</strong>ï¼šæ”¯æŒå­—æ®µæè¿°ä¿¡æ¯çš„å¤šè¯­è¨€</li>\n<li>âœ… <strong>é›¶ä¾µå…¥</strong>ï¼šæ— éœ€ä¿®æ”¹ä¸šåŠ¡è¡¨ç»“æ„ï¼ŒåŸºäº Settings ç»„ä»¶</li>\n</ul>\n<h2 id=\"ï¸-æ¶æ„è®¾è®¡\">ğŸ—ï¸ æ¶æ„è®¾è®¡</h2>\n<h3 id=\"è¯­è¨€è§£æä¼˜å…ˆçº§\">è¯­è¨€è§£æä¼˜å…ˆçº§</h3>\n<pre><code>Cookieï¼ˆç”¨æˆ·æ‰‹åŠ¨åˆ‡æ¢ï¼‰\n    â†“ (æœªè®¾ç½®)\nUser Settingsï¼ˆç”¨æˆ·åå¥½ï¼‰\n    â†“ (æœªè®¾ç½®)\nTenant Settingsï¼ˆç§Ÿæˆ·é»˜è®¤ï¼‰\n    â†“ (æœªè®¾ç½®)\nGlobal Settingsï¼ˆç³»ç»Ÿé»˜è®¤ï¼‰\n    â†“ (æœªè®¾ç½®)\nzh-CNï¼ˆæœ€ç»ˆå›é€€ï¼‰\n</code></pre>\n<h3 id=\"settings-å­˜å‚¨ç»“æ„\">Settings å­˜å‚¨ç»“æ„</h3>\n<pre><code class=\"language-csharp\">// å…¨å±€é»˜è®¤è¯­è¨€\nModule: \"Localization\"\nKey: \"DefaultLanguage\"\nValue: \"zh-CN\"\nScope: Global\n\n// ç§Ÿæˆ·é»˜è®¤è¯­è¨€\nModule: \"Localization\"\nKey: \"DefaultLanguage\"\nValue: \"en\"\nScope: Tenant\nScopeId: \"{tenantId}\"\n\n// ç”¨æˆ·åå¥½è¯­è¨€\nModule: \"Localization\"\nKey: \"PreferredLanguage\"\nValue: \"en\"\nScope: User\nScopeId: \"{userId}\"\n</code></pre>\n<h2 id=\"-å¿«é€Ÿå¼€å§‹\">ğŸš€ å¿«é€Ÿå¼€å§‹</h2>\n<h3 id=\"1-é…ç½®å·²å®Œæˆ\">1. é…ç½®å·²å®Œæˆ</h3>\n<p>æœ¬åœ°åŒ–æœåŠ¡å·²åœ¨ <code>ServiceDefaults</code> ä¸­è‡ªåŠ¨æ³¨å†Œï¼Œæ— éœ€é¢å¤–é…ç½®ã€‚</p>\n<h3 id=\"2-åç«¯ä½¿ç”¨\">2. åç«¯ä½¿ç”¨</h3>\n<h4 id=\"åœ¨-controller-ä¸­ä½¿ç”¨æœ¬åœ°åŒ–\">åœ¨ Controller ä¸­ä½¿ç”¨æœ¬åœ°åŒ–</h4>\n<pre><code class=\"language-csharp\">using CodeSpirit.Localization.Resources;\nusing Microsoft.Extensions.Localization;\n\npublic class MyController : ApiControllerBase\n{\n    private readonly IStringLocalizer&lt;SharedResources&gt; _localizer;\n    \n    public MyController(IStringLocalizer&lt;SharedResources&gt; localizer)\n    {\n        _localizer = localizer;\n    }\n    \n    [HttpPost]\n    public IActionResult Create()\n    {\n        return Ok(new ApiResponse \n        { \n            Status = 1, \n            Msg = _localizer[\"Common.Save\"].Value \n        });\n    }\n}\n</code></pre>\n<h4 id=\"æŠ›å‡ºæœ¬åœ°åŒ–å¼‚å¸¸\">æŠ›å‡ºæœ¬åœ°åŒ–å¼‚å¸¸</h4>\n<pre><code class=\"language-csharp\">// ä½¿ç”¨èµ„æºé”®\nthrow new BusinessException(\"Errors.InvalidStartTime\");\n\n// å¸¦å‚æ•°\nthrow new ValidationException(\"Errors.NotFound\", resourceId);\n</code></pre>\n<h3 id=\"3-dto-éªŒè¯ç‰¹æ€§å¤šè¯­è¨€\">3. DTO éªŒè¯ç‰¹æ€§å¤šè¯­è¨€</h3>\n<pre><code class=\"language-csharp\">using CodeSpirit.Localization.Resources;\n\npublic class CreateQuestionDto\n{\n    [Display(Name = \"Content\", ResourceType = typeof(DisplayResources))]\n    [Required(ErrorMessageResourceType = typeof(ValidationResources), \n             ErrorMessageResourceName = \"Required\")]\n    [StringLength(2000, \n        ErrorMessageResourceType = typeof(ValidationResources),\n        ErrorMessageResourceName = \"StringLengthMax\")]\n    public string Content { get; set; } = string.Empty;\n}\n</code></pre>\n<p><strong>éªŒè¯é”™è¯¯ç¤ºä¾‹</strong>ï¼š</p>\n<p>ä¸­æ–‡ç¯å¢ƒï¼š<code>é¢˜ç›®å†…å®¹ä¸èƒ½ä¸ºç©º</code><br />\nè‹±æ–‡ç¯å¢ƒï¼š<code>Content is required</code></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/70544/202512/70544-20251229184639734-1657824800.png\" /></p>\n<h3 id=\"4-dto-æè¿°ä¿¡æ¯å¤šè¯­è¨€\">4. DTO æè¿°ä¿¡æ¯å¤šè¯­è¨€</h3>\n<p>DTO å­—æ®µçš„æè¿°ä¿¡æ¯ï¼ˆDescriptionï¼‰ä¹Ÿæ”¯æŒå¤šè¯­è¨€ï¼Œé€šè¿‡ <code>LocalizedDescriptionAttribute</code> å®ç°ã€‚</p>\n<h4 id=\"41-åˆ›å»ºæœåŠ¡èµ„æºæ–‡ä»¶\">4.1 åˆ›å»ºæœåŠ¡èµ„æºæ–‡ä»¶</h4>\n<p>å„æœåŠ¡åº”åˆ›å»ºè‡ªå·±çš„èµ„æºæ–‡ä»¶ï¼Œä¿æŒæœåŠ¡ç‹¬ç«‹æ€§ï¼š</p>\n<p><strong>èµ„æºæ–‡ä»¶ç»“æ„</strong>ï¼š</p>\n<pre><code>CodeSpirit.ExamApi/Resources/\n  â”œâ”€â”€ ExamDisplayResources.cs    # èµ„æºå ä½ç±»ï¼ˆåŒ…å«ResourceManagerï¼‰\n  â”œâ”€â”€ ExamDisplay.resx           # ä¸­æ–‡èµ„æº\n  â””â”€â”€ ExamDisplay.en.resx        # è‹±æ–‡èµ„æº\n</code></pre>\n<p><strong>èµ„æºé”®å‘½åè§„èŒƒ</strong>ï¼š</p>\n<ul>\n<li>DTOå­—æ®µæè¿°ï¼š<code>Description.{EntityName}.{PropertyName}</code></li>\n<li>ç¤ºä¾‹ï¼š<code>Description.Question.Options</code>ã€<code>Description.Question.CorrectAnswer</code></li>\n</ul>\n<h4 id=\"42-åœ¨dtoä¸­ä½¿ç”¨\">4.2 åœ¨DTOä¸­ä½¿ç”¨</h4>\n<pre><code class=\"language-csharp\">using CodeSpirit.Core.Attributes;\nusing CodeSpirit.ExamApi.Resources;\n\npublic class CreateQuestionDto\n{\n    [LocalizedDescription(\n        \"æ ¹æ®é¢˜ç›®å†…å®¹ç”Ÿæˆåˆé€‚çš„é€‰é¡¹\",  // å›é€€æ–‡æœ¬ï¼ˆå¯é€‰ï¼‰\n        ResourceKey = \"Description.Question.Options\",\n        ResourceType = typeof(ExamDisplayResources)\n    )]\n    public List&lt;string&gt; Options { get; set; }\n}\n</code></pre>\n<p><strong>ä½¿ç”¨æ–¹å¼</strong>ï¼š</p>\n<ul>\n<li><strong>æ–¹å¼1</strong>ï¼šä»…ä½¿ç”¨èµ„æºé”®ï¼ˆæ¨èï¼‰</li>\n<li><strong>æ–¹å¼2</strong>ï¼šå¸¦å›é€€æ–‡æœ¬ï¼ˆæ›´å®‰å…¨ï¼Œèµ„æºä¸å¯ç”¨æ—¶æ˜¾ç¤ºå›é€€æ–‡æœ¬ï¼‰</li>\n<li><strong>æ–¹å¼3</strong>ï¼šä½¿ç”¨å…±äº«èµ„æºï¼ˆä»…é€‚ç”¨äºé€šç”¨æè¿°ï¼‰</li>\n</ul>\n<h4 id=\"43-å‘åå…¼å®¹\">4.3 å‘åå…¼å®¹</h4>\n<p>ç°æœ‰çš„ <code>DescriptionAttribute</code> ä»ç„¶å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œç³»ç»Ÿä¼šä¼˜å…ˆæ£€æŸ¥ <code>LocalizedDescriptionAttribute</code>ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™å›é€€åˆ° <code>DescriptionAttribute</code>ã€‚</p>\n<h4 id=\"44-èµ„æºæ–‡ä»¶ç»„ç»‡åŸåˆ™\">4.4 èµ„æºæ–‡ä»¶ç»„ç»‡åŸåˆ™</h4>\n<ul>\n<li><strong>å…±äº«èµ„æº</strong>ï¼š<code>CodeSpirit.Localization/Resources/</code> - å­˜æ”¾çœŸæ­£é€šç”¨çš„ã€è·¨æœåŠ¡çš„èµ„æº</li>\n<li><strong>æœåŠ¡èµ„æº</strong>ï¼š<code>ApiServices/{ServiceName}/Resources/</code> - å­˜æ”¾æœåŠ¡ç‰¹æœ‰çš„ä¸šåŠ¡èµ„æº</li>\n</ul>\n<p><strong>æœ€ä½³å®è·µ</strong>ï¼š</p>\n<ul>\n<li>å„æœåŠ¡ç®¡ç†è‡ªå·±çš„èµ„æºæ–‡ä»¶ï¼Œé¿å…åœ¨å…±äº«èµ„æºä¸­æ”¾ç½®æœåŠ¡ç‰¹å®šå†…å®¹</li>\n<li>éµå¾ª <code>Description.{EntityName}.{PropertyName}</code> å‘½åçº¦å®š</li>\n<li>å»ºè®®æä¾›å›é€€æ–‡æœ¬ï¼Œç¡®ä¿èµ„æºä¸å¯ç”¨æ—¶ä»èƒ½æ˜¾ç¤º</li>\n</ul>\n<h4 id=\"45-æŠ€æœ¯å®ç°\">4.5 æŠ€æœ¯å®ç°</h4>\n<p>æè¿°å¤šè¯­è¨€çš„èµ„æºè§£æç”± AMIS è¡¨å•ç”Ÿæˆæ—¶ç»Ÿä¸€å¤„ç†ï¼š</p>\n<ul>\n<li><strong>CultureResolver</strong>ï¼šä» HttpContext Featuresã€Cookie ç­‰å¤šä¸ªæ¥æºè·å–å½“å‰è¯­è¨€</li>\n<li><strong>ç»Ÿä¸€è§£æ</strong>ï¼š<code>GetLocalizedDescription</code> æ–¹æ³•åœ¨è¡¨å•ç”Ÿæˆæ—¶è§£æèµ„æº</li>\n<li><strong>å›é€€æœºåˆ¶</strong>ï¼šè‹±æ–‡ç¯å¢ƒä¸‹ç¡®ä¿æ­£ç¡®åŠ è½½è‹±æ–‡èµ„æºï¼Œé¿å…å›é€€åˆ°ä¸­æ–‡</li>\n<li><strong>ç¼“å­˜ä¼˜åŒ–</strong>ï¼šåœ¨åŒä¸€è¯·æ±‚ä¸­å¤ç”¨å·²è§£æçš„æ–‡åŒ–ä¿¡æ¯</li>\n</ul>\n<h3 id=\"5-å‰ç«¯ä½¿ç”¨\">5. å‰ç«¯ä½¿ç”¨</h3>\n<h4 id=\"javascript\">JavaScript</h4>\n<pre><code class=\"language-javascript\">// è·å–ç¿»è¯‘æ–‡æœ¬\nconst message = CodeSpirit.i18n.t('Common.Save');\n\n// å¸¦å‚æ•°\nconst message = CodeSpirit.i18n.t('Validation.Required', { 0: 'ç”¨æˆ·å' });\n\n// åˆ‡æ¢è¯­è¨€\nCodeSpirit.i18n.switchLanguage('en');\n</code></pre>\n<h4 id=\"razor-é¡µé¢\">Razor é¡µé¢</h4>\n<pre><code class=\"language-razor\">@using CodeSpirit.Localization.Resources\n@using Microsoft.Extensions.Localization\n@inject IStringLocalizer&lt;SharedResources&gt; Localizer\n\n&lt;h1&gt;@Localizer[\"Common.Save\"]&lt;/h1&gt;\n</code></pre>\n<h2 id=\"ï¸-è¯­è¨€é…ç½®ç®¡ç†\">ğŸ›ï¸ è¯­è¨€é…ç½®ç®¡ç†</h2>\n<h3 id=\"é€šè¿‡-api-è®¾ç½®è¯­è¨€\">é€šè¿‡ API è®¾ç½®è¯­è¨€</h3>\n<p>ç³»ç»Ÿå·²è‡ªåŠ¨é›†æˆ Settings ç»„ä»¶ï¼Œå¯ä»¥é€šè¿‡ Settings API ç®¡ç†è¯­è¨€é…ç½®ï¼š</p>\n<h4 id=\"è®¾ç½®ç”¨æˆ·è¯­è¨€åå¥½\">è®¾ç½®ç”¨æˆ·è¯­è¨€åå¥½</h4>\n<pre><code class=\"language-csharp\">await _settingsService.SetUserSettingAsync(\n    module: \"Localization\",\n    key: \"PreferredLanguage\",\n    value: \"en\",\n    userId: currentUserId\n);\n</code></pre>\n<h4 id=\"è®¾ç½®ç§Ÿæˆ·é»˜è®¤è¯­è¨€\">è®¾ç½®ç§Ÿæˆ·é»˜è®¤è¯­è¨€</h4>\n<pre><code class=\"language-csharp\">await _settingsService.SetTenantSettingAsync(\n    module: \"Localization\",\n    key: \"DefaultLanguage\",\n    value: \"en\",\n    tenantId: currentTenantId\n);\n</code></pre>\n<h4 id=\"è®¾ç½®å…¨å±€é»˜è®¤è¯­è¨€\">è®¾ç½®å…¨å±€é»˜è®¤è¯­è¨€</h4>\n<pre><code class=\"language-csharp\">await _settingsService.SetGlobalSettingAsync(\n    module: \"Localization\",\n    key: \"DefaultLanguage\",\n    value: \"en\"\n);\n</code></pre>\n<h3 id=\"é€šè¿‡-ui-åˆ‡æ¢è¯­è¨€\">é€šè¿‡ UI åˆ‡æ¢è¯­è¨€</h3>\n<p>ç”¨æˆ·å¯ä»¥åœ¨å¯¼èˆªæ çš„è¯­è¨€åˆ‡æ¢å™¨ä¸­é€‰æ‹©è¯­è¨€ï¼Œåˆ‡æ¢åä¼šï¼š</p>\n<ol>\n<li>è®¾ç½® Cookieï¼ˆ<code>.AspNetCore.Culture</code>ï¼‰</li>\n<li>åˆ·æ–°é¡µé¢</li>\n<li>æ‰€æœ‰ç•Œé¢æ–‡æœ¬ã€é”™è¯¯æ¶ˆæ¯è‡ªåŠ¨åˆ‡æ¢ä¸ºå¯¹åº”è¯­è¨€</li>\n</ol>\n<h2 id=\"-èµ„æºæ–‡ä»¶è¯´æ˜\">ğŸ“š èµ„æºæ–‡ä»¶è¯´æ˜</h2>\n<h3 id=\"å…±äº«èµ„æºlocalizationç»„ä»¶\">å…±äº«èµ„æºï¼ˆLocalizationç»„ä»¶ï¼‰</h3>\n<table>\n<thead>\n<tr>\n<th>èµ„æºæ–‡ä»¶</th>\n<th>ç”¨é€”</th>\n<th>ç¤ºä¾‹é”®</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>Shared.resx</code></td>\n<td>é€šç”¨ UI æ–‡æœ¬</td>\n<td><code>Common.Save</code>, <code>Common.Cancel</code></td>\n</tr>\n<tr>\n<td><code>Errors.resx</code></td>\n<td>é”™è¯¯æ¶ˆæ¯</td>\n<td><code>Errors.NotFound</code>, <code>Errors.Unauthorized</code></td>\n</tr>\n<tr>\n<td><code>Validation.resx</code></td>\n<td>éªŒè¯æ¶ˆæ¯æ¨¡æ¿</td>\n<td><code>Required</code>, <code>StringLengthMax</code></td>\n</tr>\n<tr>\n<td><code>Display.resx</code></td>\n<td>å­—æ®µæ˜¾ç¤ºåç§°</td>\n<td><code>Content</code>, <code>Type</code>, <code>Difficulty</code></td>\n</tr>\n</tbody>\n</table>\n<p>æ¯ä¸ªèµ„æºæ–‡ä»¶éƒ½æœ‰å¯¹åº”çš„è‹±æ–‡ç‰ˆæœ¬ï¼ˆå¦‚ <code>Shared.en.resx</code>ï¼‰ã€‚</p>\n<h3 id=\"æœåŠ¡ç‰¹å®šèµ„æºå„apiæœåŠ¡\">æœåŠ¡ç‰¹å®šèµ„æºï¼ˆå„APIæœåŠ¡ï¼‰</h3>\n<p>å„æœåŠ¡åº”åˆ›å»ºè‡ªå·±çš„èµ„æºæ–‡ä»¶ï¼Œä¿æŒæœåŠ¡ç‹¬ç«‹æ€§ï¼š</p>\n<p><strong>å‘½åè§„èŒƒ</strong>ï¼š</p>\n<ul>\n<li>å ä½ç±»ï¼š<code>{ServiceName}DisplayResources.cs</code></li>\n<li>èµ„æºæ–‡ä»¶ï¼š<code>{ServiceName}Display.resx</code>ã€<code>{ServiceName}Display.en.resx</code></li>\n</ul>\n<p><strong>ç¤ºä¾‹</strong>ï¼š</p>\n<pre><code>CodeSpirit.ExamApi/Resources/\n  â”œâ”€â”€ ExamDisplayResources.cs    # èµ„æºå ä½ç±»ï¼ˆåŒ…å«ResourceManagerï¼‰\n  â”œâ”€â”€ ExamDisplay.resx           # ä¸­æ–‡èµ„æº\n  â””â”€â”€ ExamDisplay.en.resx        # è‹±æ–‡èµ„æº\n\nCodeSpirit.SurveyApi/Resources/\n  â”œâ”€â”€ SurveyDisplayResources.cs\n  â”œâ”€â”€ SurveyDisplay.resx\n  â””â”€â”€ SurveyDisplay.en.resx\n</code></pre>\n<p><strong>èµ„æºé”®å‘½åçº¦å®š</strong>ï¼š</p>\n<ul>\n<li>DTOå­—æ®µæè¿°ï¼š<code>Description.{EntityName}.{PropertyName}</code></li>\n<li>ç¤ºä¾‹ï¼š<code>Description.Question.Options</code>ã€<code>Description.Survey.Title</code></li>\n</ul>\n<h2 id=\"-å¸¸è§åœºæ™¯\">ğŸ”§ å¸¸è§åœºæ™¯</h2>\n<h3 id=\"åœºæ™¯-1ç”¨æˆ·åˆ‡æ¢è¯­è¨€\">åœºæ™¯ 1ï¼šç”¨æˆ·åˆ‡æ¢è¯­è¨€</h3>\n<ol>\n<li>\n<p>ç”¨æˆ·åœ¨å¯¼èˆªæ é€‰æ‹© \"English\"</p>\n</li>\n<li>\n<p>JavaScript è°ƒç”¨ <code>CodeSpirit.i18n.switchLanguage('en')</code></p>\n</li>\n<li>\n<p>è®¾ç½® Cookie å¹¶åˆ·æ–°é¡µé¢</p>\n</li>\n<li>\n<p>æ‰€æœ‰å†…å®¹æ˜¾ç¤ºä¸ºè‹±æ–‡</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/70544/202512/70544-20251229184704171-1071541876.png\" /></p>\n</li>\n</ol>\n<h3 id=\"åœºæ™¯-2ç§Ÿæˆ·è®¾ç½®é»˜è®¤è¯­è¨€\">åœºæ™¯ 2ï¼šç§Ÿæˆ·è®¾ç½®é»˜è®¤è¯­è¨€</h3>\n<ol>\n<li>ç§Ÿæˆ·ç®¡ç†å‘˜åœ¨è®¾ç½®ä¸­é€‰æ‹©é»˜è®¤è¯­è¨€ä¸ºè‹±æ–‡</li>\n<li>ç³»ç»Ÿé€šè¿‡ Settings API ä¿å­˜é…ç½®</li>\n<li>è¯¥ç§Ÿæˆ·ä¸‹çš„æ‰€æœ‰ç”¨æˆ·é»˜è®¤ä½¿ç”¨è‹±æ–‡</li>\n<li>ç”¨æˆ·ä»å¯ä»¥è®¾ç½®è‡ªå·±çš„è¯­è¨€åå¥½</li>\n</ol>\n<h3 id=\"åœºæ™¯-3api-è¿”å›æœ¬åœ°åŒ–é”™è¯¯\">åœºæ™¯ 3ï¼šAPI è¿”å›æœ¬åœ°åŒ–é”™è¯¯</h3>\n<pre><code class=\"language-csharp\">// ä¸­æ–‡ç¯å¢ƒ\nthrow new BusinessException(\"Errors.NotFound\");\n// API è¿”å›: { \"status\": 0, \"msg\": \"æœªæ‰¾åˆ°èµ„æº\" }\n\n// è‹±æ–‡ç¯å¢ƒ  \nthrow new BusinessException(\"Errors.NotFound\");\n// API è¿”å›: { \"status\": 0, \"msg\": \"Resource not found\" }\n</code></pre>\n<h2 id=\"-amis-å¤šè¯­è¨€\">ğŸŒ AMIS å¤šè¯­è¨€</h2>\n<p>AMIS ç»„ä»¶ä¼šè‡ªåŠ¨æ ¹æ®å½“å‰è¯­è¨€åŠ è½½å¯¹åº”çš„ locale æ–‡ä»¶ï¼š</p>\n<ul>\n<li><strong>ä¸­æ–‡ç¯å¢ƒ</strong>ï¼šä½¿ç”¨é»˜è®¤çš„ zh-CN locale</li>\n<li><strong>è‹±æ–‡ç¯å¢ƒ</strong>ï¼šåŠ¨æ€åŠ è½½ <code>sdk/6.13.0/locale/en-US.js</code></li>\n</ul>\n<p>AMIS å†…ç½®ç»„ä»¶ï¼ˆæ—¥æœŸé€‰æ‹©å™¨ã€åˆ†é¡µå™¨ç­‰ï¼‰ä¼šè‡ªåŠ¨æ˜¾ç¤ºå¯¹åº”è¯­è¨€ã€‚</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/70544/202512/70544-20251229184723949-1878507554.png\" /></p>\n<h2 id=\"-å¯¼èˆªç»„ä»¶å¤šè¯­è¨€\">ğŸ§­ å¯¼èˆªç»„ä»¶å¤šè¯­è¨€</h2>\n<p>å¯¼èˆªç»„ä»¶ï¼ˆ<code>CodeSpirit.Navigation</code>ï¼‰æä¾›äº†å®Œæ•´çš„å¤šè¯­è¨€æ”¯æŒï¼Œç”¨äºå®ç°åŠ¨æ€å¯¼èˆªèœå•çš„å¤šè¯­è¨€åˆ‡æ¢ã€‚</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/70544/202512/70544-20251229184735542-1462849359.png\" /></p>\n<h3 id=\"å¯¼èˆªèµ„æºæ–‡ä»¶\">å¯¼èˆªèµ„æºæ–‡ä»¶</h3>\n<p>å¯¼èˆªç»„ä»¶ä½¿ç”¨ä¸“ç”¨çš„èµ„æºæ–‡ä»¶ï¼š</p>\n<p><strong>èµ„æºæ–‡ä»¶ä½ç½®</strong>ï¼š</p>\n<pre><code>CodeSpirit.Navigation/Resources/\n  â”œâ”€â”€ NavigationResources.cs         # èµ„æºå ä½ç±»\n  â”œâ”€â”€ NavigationResources.resx       # ä¸­æ–‡èµ„æº\n  â””â”€â”€ NavigationResources.en.resx    # è‹±æ–‡èµ„æº\n</code></pre>\n<p><strong>èµ„æºé”®å‘½åè§„èŒƒ</strong>ï¼š</p>\n<ul>\n<li>æ¨¡å—åç§°ï¼š<code>Module.{ModuleName}</code>ï¼ˆå¦‚ <code>Module.Identity</code>ã€<code>Module.Survey</code>ï¼‰</li>\n<li>æ§åˆ¶å™¨åç§°ï¼š<code>Controller.{ControllerName}</code>ï¼ˆå¦‚ <code>Controller.Users</code>ã€<code>Controller.Roles</code>ï¼‰</li>\n</ul>\n<h3 id=\"åœ¨æ§åˆ¶å™¨ä¸­ä½¿ç”¨\">åœ¨æ§åˆ¶å™¨ä¸­ä½¿ç”¨</h3>\n<p>å¯¼èˆªç»„ä»¶æ”¯æŒä¸¤ç§ç‰¹æ€§æ¥é…ç½®å¤šè¯­è¨€ï¼š<code>Module</code> ç‰¹æ€§å’Œ <code>NavigationAttribute</code> ç‰¹æ€§ã€‚</p>\n<h4 id=\"ä½¿ç”¨-module-ç‰¹æ€§æ¨è\">ä½¿ç”¨ Module ç‰¹æ€§ï¼ˆæ¨èï¼‰</h4>\n<p><code>Module</code> ç‰¹æ€§ç”¨äºå®šä¹‰æ¨¡å—çº§åˆ«çš„å¤šè¯­è¨€é…ç½®ï¼Œé€šå¸¸æ”¾åœ¨ <code>ApiControllerBase</code> ä¸Šï¼š</p>\n<pre><code class=\"language-csharp\">using CodeSpirit.Core.Attributes;\nusing CodeSpirit.Core.Enums;\nusing CodeSpirit.Navigation.Resources;\n\n// æ¨¡å—çº§é…ç½®ï¼ˆåœ¨ ApiControllerBase ä¸Šï¼‰\n[Module(\"identity\", \n    displayName: \"ç”¨æˆ·ä¸­å¿ƒ\",  // å›é€€æ–‡æœ¬\n    DisplayNameResourceKey = \"Module.Identity\",           // èµ„æºé”®\n    DisplayNameResourceType = typeof(NavigationResources), // èµ„æºç±»å‹\n    Icon = \"fa-solid fa-user-group\")]\n[Navigation(\n    Icon = \"fa-solid fa-user-group\", \n    PlatformType = PlatformType.Both,\n    TitleResourceKey = \"Module.Identity\",           // ä¸ Module çš„èµ„æºé”®ä¿æŒä¸€è‡´\n    TitleResourceType = typeof(NavigationResources)\n)]\npublic abstract class ApiControllerBase : CodeSpirit.Shared.Controllers.ApiControllerBase\n{\n}\n</code></pre>\n<h4 id=\"ä½¿ç”¨-navigationattribute-ç‰¹æ€§\">ä½¿ç”¨ NavigationAttribute ç‰¹æ€§</h4>\n<p><code>NavigationAttribute</code> ç”¨äºæ§åˆ¶å™¨çº§åˆ«çš„å¤šè¯­è¨€é…ç½®ï¼š</p>\n<pre><code class=\"language-csharp\">using CodeSpirit.Core.Attributes;\nusing CodeSpirit.Navigation.Resources;\nusing System.ComponentModel;\n\n// æ§åˆ¶å™¨çº§é…ç½®\n[DisplayName(\"ç”¨æˆ·ç®¡ç†\")]\n[Navigation(\n    Icon = \"fa-solid fa-users\", \n    PlatformType = PlatformType.Tenant,\n    TitleResourceKey = \"Controller.Users\",\n    TitleResourceType = typeof(NavigationResources)\n)]\npublic class UsersController : ApiControllerBase\n{\n}\n</code></pre>\n<h3 id=\"é…ç½®è¦ç‚¹\">é…ç½®è¦ç‚¹</h3>\n<p><strong>Module ç‰¹æ€§</strong>ï¼š</p>\n<ol>\n<li><strong>DisplayNameResourceKey</strong>ï¼šæŒ‡å®šæ¨¡å—åç§°çš„èµ„æºé”®ï¼ˆå¿…å¡«ï¼‰</li>\n<li><strong>DisplayNameResourceType</strong>ï¼šæŒ‡å®šèµ„æºç±»å‹ï¼Œé€šå¸¸ä¸º <code>typeof(NavigationResources)</code>ï¼ˆå¿…å¡«ï¼‰</li>\n<li><strong>displayName</strong>ï¼šå›é€€æ–‡æœ¬ï¼Œå½“èµ„æºä¸å¯ç”¨æ—¶æ˜¾ç¤ºï¼ˆå¿…å¡«ï¼Œå»ºè®®æä¾›ï¼‰</li>\n</ol>\n<p><strong>NavigationAttribute ç‰¹æ€§</strong>ï¼š</p>\n<ol>\n<li><strong>TitleResourceKey</strong>ï¼šæŒ‡å®šèµ„æºé”®åç§°ï¼ˆæ¨èå¡«å†™ï¼Œä¸ Module çš„ DisplayNameResourceKey ä¿æŒä¸€è‡´ï¼‰</li>\n<li><strong>TitleResourceType</strong>ï¼šæŒ‡å®šèµ„æºç±»å‹ï¼Œé€šå¸¸ä¸º <code>typeof(NavigationResources)</code>ï¼ˆæ¨èå¡«å†™ï¼‰</li>\n<li><strong>Title</strong>ï¼šå›é€€æ–‡æœ¬ï¼Œå½“èµ„æºä¸å¯ç”¨æ—¶æ˜¾ç¤ºï¼ˆå¯é€‰ï¼Œå»ºè®®æä¾›ï¼‰</li>\n</ol>\n<blockquote>\n<p><strong>æœ€ä½³å®è·µ</strong>ï¼šåœ¨æ¨¡å—çº§é…ç½®ä¸­ï¼Œå»ºè®®åœ¨ <code>Navigation</code> ç‰¹æ€§ä¸­ä¹Ÿè®¾ç½® <code>TitleResourceKey</code> å’Œ <code>TitleResourceType</code>ï¼Œä¸ <code>Module</code> ç‰¹æ€§çš„èµ„æºé”®ä¿æŒä¸€è‡´ï¼Œç¡®ä¿å¯¼èˆªå¤šè¯­è¨€åŠŸèƒ½å®Œæ•´å¯é ã€‚</p>\n</blockquote>\n<h3 id=\"å·¥ä½œåŸç†\">å·¥ä½œåŸç†</h3>\n<ol>\n<li><strong>è‡ªåŠ¨æ‰«æ</strong>ï¼šç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œå¯¼èˆªç»„ä»¶è‡ªåŠ¨æ‰«ææ‰€æœ‰æ§åˆ¶å™¨çš„ <code>NavigationAttribute</code></li>\n<li><strong>èµ„æºè§£æ</strong>ï¼šæ ¹æ®å½“å‰è¯­è¨€ï¼ˆ<code>CultureInfo.CurrentUICulture</code>ï¼‰è§£æå¯¹åº”çš„èµ„æºæ–‡æœ¬</li>\n<li><strong>ç¼“å­˜æœºåˆ¶</strong>ï¼šè§£æåçš„å¯¼èˆªæ ‘ç¼“å­˜åˆ°åˆ†å¸ƒå¼ç¼“å­˜ï¼ˆRedisï¼‰ï¼Œæå‡æ€§èƒ½</li>\n<li><strong>åŠ¨æ€åˆ‡æ¢</strong>ï¼šç”¨æˆ·åˆ‡æ¢è¯­è¨€åï¼Œå¯¼èˆªèœå•ä¼šè‡ªåŠ¨æ˜¾ç¤ºå¯¹åº”è¯­è¨€</li>\n</ol>\n<h3 id=\"ï¸-é‡è¦æ³¨æ„äº‹é¡¹\">âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹</h3>\n<h4 id=\"1-ç¼“å­˜é—®é¢˜\">1. ç¼“å­˜é—®é¢˜</h4>\n<p>å¯¼èˆªç»„ä»¶ä½¿ç”¨åˆ†å¸ƒå¼ç¼“å­˜æ¥æå‡æ€§èƒ½ï¼Œä½†åœ¨ä»¥ä¸‹æƒ…å†µä¸‹å¯èƒ½å¯¼è‡´å¤šè¯­è¨€ä¸ç”Ÿæ•ˆï¼š</p>\n<p><strong>ç—‡çŠ¶</strong>ï¼šåˆ‡æ¢è¯­è¨€åï¼Œå¯¼èˆªèœå•ä»æ˜¾ç¤ºæ—§è¯­è¨€</p>\n<p><strong>åŸå› </strong>ï¼šå¯¼èˆªæ ‘å·²ç¼“å­˜ï¼Œæœªé‡æ–°è§£æå¤šè¯­è¨€èµ„æº</p>\n<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šæ¸…ç©ºå¯¼èˆªç¼“å­˜</p>\n<h5 id=\"æ–¹æ³•1é€šè¿‡ç¼“å­˜ç®¡ç†ç•Œé¢\">æ–¹æ³•1ï¼šé€šè¿‡ç¼“å­˜ç®¡ç†ç•Œé¢</h5>\n<ol>\n<li>è®¿é—®ç³»ç»Ÿå¹³å°çš„<strong>ç¼“å­˜ç®¡ç†</strong>é¡µé¢ï¼ˆè·¯ç”±ï¼š<code>/cacheManagement</code>ï¼‰</li>\n<li>åœ¨ç¼“å­˜åˆ—è¡¨ä¸­æœç´¢æˆ–æ‰¾åˆ°å¯¼èˆªç¼“å­˜é”®ï¼š<code>CodeSpirit:Navigation:All</code></li>\n<li>ç‚¹å‡»è¯¥ç¼“å­˜é¡¹çš„\"åˆ é™¤\"æŒ‰é’®æ¸…ç©ºç¼“å­˜</li>\n</ol>\n<blockquote>\n<p><strong>æ³¨æ„</strong>ï¼šç¼“å­˜ç®¡ç†åŠŸèƒ½ä»…ç³»ç»Ÿç®¡ç†å‘˜å¯è®¿é—®ï¼Œå±äºç³»ç»Ÿå¹³å°åŠŸèƒ½ã€‚</p>\n</blockquote>\n<h5 id=\"æ–¹æ³•2é€šè¿‡ä»£ç -api-è°ƒç”¨\">æ–¹æ³•2ï¼šé€šè¿‡ä»£ç  API è°ƒç”¨</h5>\n<pre><code class=\"language-csharp\">// æ¸…ç©ºæ‰€æœ‰å¯¼èˆªç¼“å­˜\nawait _navigationService.ClearAllNavigationCacheAsync();\n\n// æ¸…ç©ºç‰¹å®šæ¨¡å—ç¼“å­˜ï¼ˆå®é™…ä¸Šä¹Ÿä¼šæ¸…ç©ºæ•´ä¸ªç¼“å­˜ï¼‰\nawait _navigationService.ClearModuleNavigationCacheAsync(\"Identity\");\n\n// é‡æ–°åˆå§‹åŒ–å¯¼èˆªæ ‘ï¼ˆæ¸…ç©ºå¹¶é‡å»ºç¼“å­˜ï¼‰\nawait _navigationService.InitializeNavigationTree();\n</code></pre>\n<h5 id=\"æ–¹æ³•3é€šè¿‡-http-api-è°ƒç”¨\">æ–¹æ³•3ï¼šé€šè¿‡ HTTP API è°ƒç”¨</h5>\n<pre><code class=\"language-bash\"># æ¸…ç©ºæ‰€æœ‰å¯¼èˆªç¼“å­˜\nDELETE /api/navigation/cache\n\n# æ¸…ç©ºç‰¹å®šæ¨¡å—ç¼“å­˜\nDELETE /api/navigation/cache?moduleName=Identity\n\n# é‡æ–°åˆå§‹åŒ–å¯¼èˆªæ ‘ï¼ˆæ¸…ç©ºå¹¶é‡å»ºç¼“å­˜ï¼‰\nPOST /api/navigation/initialize\n</code></pre>\n<h4 id=\"2-èµ„æºæ–‡ä»¶ç¼–è¯‘\">2. èµ„æºæ–‡ä»¶ç¼–è¯‘</h4>\n<p>ç¡®ä¿èµ„æºæ–‡ä»¶æ­£ç¡®é…ç½®ä¸ºåµŒå…¥å¼èµ„æºï¼š</p>\n<pre><code class=\"language-xml\">&lt;ItemGroup&gt;\n  &lt;EmbeddedResource Include=\"Resources\\NavigationResources.resx\"&gt;\n    &lt;Generator&gt;PublicResXFileCodeGenerator&lt;/Generator&gt;\n  &lt;/EmbeddedResource&gt;\n  &lt;EmbeddedResource Include=\"Resources\\NavigationResources.en.resx\" /&gt;\n&lt;/ItemGroup&gt;\n</code></pre>\n<h4 id=\"3-å¼€å‘å»ºè®®\">3. å¼€å‘å»ºè®®</h4>\n<ul>\n<li><strong>æ¨¡å—é…ç½®</strong>ï¼šæ¨èåŒæ—¶ä½¿ç”¨ <code>Module</code> å’Œ <code>Navigation</code> ç‰¹æ€§é…ç½®æ¨¡å—çº§å¤šè¯­è¨€</li>\n<li><strong>å›é€€æ–‡æœ¬</strong>ï¼šå§‹ç»ˆæä¾›å›é€€æ–‡æœ¬ï¼ˆ<code>displayName</code>ã€<code>Title</code>ï¼‰ï¼Œç¡®ä¿èµ„æºä¸å¯ç”¨æ—¶ä»èƒ½æ˜¾ç¤º</li>\n<li><strong>æ·»åŠ æ–°å¯¼èˆªé¡¹</strong>ï¼šæ·»åŠ åéœ€æ¸…ç©ºç¼“å­˜ï¼Œç¡®ä¿æ–°é¡¹ç”Ÿæ•ˆ</li>\n<li><strong>ä¿®æ”¹èµ„æºæ–‡æœ¬</strong>ï¼šä¿®æ”¹åéœ€é‡æ–°ç¼–è¯‘é¡¹ç›®ï¼Œå¹¶æ¸…ç©ºç¼“å­˜</li>\n<li><strong>æµ‹è¯•å¤šè¯­è¨€</strong>ï¼šåˆ‡æ¢è¯­è¨€åè‹¥ä¸ç”Ÿæ•ˆï¼Œä¼˜å…ˆæ£€æŸ¥ç¼“å­˜</li>\n<li><strong>èµ„æºé”®ä¸€è‡´æ€§</strong>ï¼š<code>Module</code> çš„ <code>DisplayNameResourceKey</code> å’Œ <code>Navigation</code> çš„ <code>TitleResourceKey</code> é€šå¸¸ä½¿ç”¨ç›¸åŒçš„èµ„æºé”®</li>\n</ul>\n<h3 id=\"å®Œæ•´ç¤ºä¾‹\">å®Œæ•´ç¤ºä¾‹</h3>\n<p>ä»¥ä¸‹æ˜¯ç”¨æˆ·ä¸­å¿ƒæ¨¡å—çš„å®Œæ•´å¤šè¯­è¨€é…ç½®ç¤ºä¾‹ï¼ˆæ¥è‡ªå®é™…ä»£ç ï¼‰ï¼š</p>\n<pre><code class=\"language-csharp\">using CodeSpirit.Core;\nusing CodeSpirit.Core.Attributes;\nusing CodeSpirit.Core.Enums;\nusing CodeSpirit.Navigation.Resources;\nusing Microsoft.AspNetCore.Authorization;\nusing Microsoft.AspNetCore.Mvc;\nusing System.ComponentModel;\n\nnamespace CodeSpirit.IdentityApi.Controllers\n{\n    /// &lt;summary&gt;\n    /// èº«ä»½è®¤è¯APIæ§åˆ¶å™¨åŸºç±»\n    /// &lt;/summary&gt;\n    [ApiController]\n    [Authorize(policy: \"DynamicPermissions\")]\n    [Route(\"api/identity/[controller]\")]\n    // æ¨¡å—çº§é…ç½®ï¼ˆä½¿ç”¨ Module å’Œ Navigation ç‰¹æ€§ï¼‰\n    [Module(\"identity\", \n        displayName: \"ç”¨æˆ·ä¸­å¿ƒ\",  // å›é€€æ–‡æœ¬\n        DisplayNameResourceKey = \"Module.Identity\",           // èµ„æºé”®\n        DisplayNameResourceType = typeof(NavigationResources), // èµ„æºç±»å‹\n        Icon = \"fa-solid fa-user-group\")]\n    [Navigation(\n        Icon = \"fa-solid fa-user-group\",\n        PlatformType = PlatformType.Both,\n        TitleResourceKey = \"Module.Identity\",\n        TitleResourceType = typeof(NavigationResources)\n    )]\n    public abstract class ApiControllerBase : CodeSpirit.Shared.Controllers.ApiControllerBase\n    {\n    }\n\n    /// &lt;summary&gt;\n    /// ç”¨æˆ·ç®¡ç†æ§åˆ¶å™¨\n    /// &lt;/summary&gt;\n    [DisplayName(\"ç”¨æˆ·ç®¡ç†\")]\n    [Navigation(\n        Icon = \"fa-solid fa-users\", \n        PlatformType = PlatformType.Tenant,\n        TitleResourceKey = \"Controller.Users\",\n        TitleResourceType = typeof(NavigationResources)\n    )]\n    public class UsersController : ApiControllerBase\n    {\n        private readonly IUserService _userService;\n\n        public UsersController(IUserService userService)\n        {\n            _userService = userService;\n        }\n\n        /// &lt;summary&gt;\n        /// è·å–ç”¨æˆ·åˆ—è¡¨\n        /// &lt;/summary&gt;\n        [HttpGet]\n        [DisplayName(\"è·å–ç”¨æˆ·åˆ—è¡¨\")]\n        public async Task&lt;ActionResult&lt;ApiResponse&lt;PageList&lt;UserDto&gt;&gt;&gt;&gt; GetUsers([FromQuery] UserQueryDto queryDto)\n        {\n            PageList&lt;UserDto&gt; users = await _userService.GetUsersAsync(queryDto);\n            return SuccessResponse(users);\n        }\n    }\n}\n</code></pre>\n<p><strong>èµ„æºæ–‡ä»¶å†…å®¹</strong>ï¼š</p>\n<pre><code class=\"language-xml\">&lt;!-- NavigationResources.resx (ä¸­æ–‡) --&gt;\n&lt;data name=\"Module.Identity\"&gt;\n  &lt;value&gt;ç”¨æˆ·ä¸­å¿ƒ&lt;/value&gt;\n&lt;/data&gt;\n&lt;data name=\"Controller.Users\"&gt;\n  &lt;value&gt;ç”¨æˆ·ç®¡ç†&lt;/value&gt;\n&lt;/data&gt;\n\n&lt;!-- NavigationResources.en.resx (è‹±æ–‡) --&gt;\n&lt;data name=\"Module.Identity\"&gt;\n  &lt;value&gt;User Center&lt;/value&gt;\n&lt;/data&gt;\n&lt;data name=\"Controller.Users\"&gt;\n  &lt;value&gt;User Management&lt;/value&gt;\n&lt;/data&gt;\n</code></pre>\n<h3 id=\"ç¼“å­˜é”®è¯´æ˜\">ç¼“å­˜é”®è¯´æ˜</h3>\n<p>å¯¼èˆªç»„ä»¶ä½¿ç”¨ä»¥ä¸‹ç¼“å­˜é”®ï¼š</p>\n<ul>\n<li><strong>ç¼“å­˜é”®</strong>ï¼š<code>CodeSpirit:Navigation:All</code></li>\n<li><strong>ç¼“å­˜ç­–ç•¥</strong>ï¼šå•ä¸€ç¼“å­˜ + å†…å­˜è¿‡æ»¤</li>\n<li><strong>ç¼“å­˜æ—¶é—´</strong>ï¼šç»å¯¹è¿‡æœŸ 365 å¤©ï¼Œæ»‘åŠ¨è¿‡æœŸ 90 å¤©</li>\n<li><strong>æ¸…ç©ºæ—¶æœº</strong>ï¼š\n<ul>\n<li>æ·»åŠ /ä¿®æ”¹å¯¼èˆªé¡¹å</li>\n<li>ä¿®æ”¹èµ„æºæ–‡ä»¶å</li>\n<li>åˆ‡æ¢è¯­è¨€ä¸ç”Ÿæ•ˆæ—¶</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"-æ‰©å±•æ”¯æŒ\">ğŸ“Š æ‰©å±•æ”¯æŒ</h2>\n<h3 id=\"æ·»åŠ æ–°è¯­è¨€å¦‚æ—¥æ–‡\">æ·»åŠ æ–°è¯­è¨€ï¼ˆå¦‚æ—¥æ–‡ï¼‰</h3>\n<ol>\n<li><strong>æ›´æ–°é…ç½®</strong>ï¼šåœ¨ <code>appsettings.json</code> ä¸­æ·»åŠ </li>\n</ol>\n<pre><code class=\"language-json\">{\n  \"Localization\": {\n    \"SupportedCultures\": [\n      { \"Code\": \"zh-CN\", \"DisplayName\": \"ç®€ä½“ä¸­æ–‡\" },\n      { \"Code\": \"en\", \"DisplayName\": \"English\" },\n      { \"Code\": \"ja\", \"DisplayName\": \"æ—¥æœ¬èª\" }\n    ]\n  }\n}\n</code></pre>\n<ol start=\"2\">\n<li>\n<p><strong>æ·»åŠ èµ„æºæ–‡ä»¶</strong>ï¼š</p>\n<ul>\n<li><code>Shared.ja.resx</code></li>\n<li><code>Errors.ja.resx</code></li>\n<li><code>Validation.ja.resx</code></li>\n<li><code>Display.ja.resx</code></li>\n</ul>\n</li>\n<li>\n<p><strong>ä¸‹è½½ AMIS locale</strong>ï¼šå°† <code>ja-JP.js</code> æ”¾åˆ° <code>wwwroot/sdk/6.13.0/locale/</code></p>\n</li>\n<li>\n<p><strong>æ›´æ–°è¯­è¨€åˆ‡æ¢å™¨</strong>ï¼šåœ¨ <code>MainNav.razor</code> ä¸­æ·»åŠ æ—¥è¯­é€‰é¡¹</p>\n</li>\n</ol>\n<h2 id=\"ï¸-é…ç½®è¯´æ˜\">âš™ï¸ é…ç½®è¯´æ˜</h2>\n<h3 id=\"appsettingsjson-é…ç½®\">appsettings.json é…ç½®</h3>\n<pre><code class=\"language-json\">{\n  \"Localization\": {\n    \"DefaultCulture\": \"zh-CN\",\n    \"SupportedCultures\": [\n      { \"Code\": \"zh-CN\", \"DisplayName\": \"ç®€ä½“ä¸­æ–‡\" },\n      { \"Code\": \"en\", \"DisplayName\": \"English\" }\n    ],\n    \"EnableTenantLevelLanguage\": true,\n    \"EnableUserLevelLanguage\": true,\n    \"FallbackToParentCultures\": true,\n    \"SettingsModule\": \"Localization\",\n    \"SettingsKeys\": {\n      \"GlobalDefault\": \"DefaultLanguage\",\n      \"TenantDefault\": \"DefaultLanguage\",\n      \"UserPreference\": \"PreferredLanguage\"\n    }\n  }\n}\n</code></pre>\n<h2 id=\"-ui-ç»„ä»¶\">ğŸ¨ UI ç»„ä»¶</h2>\n<h3 id=\"è¯­è¨€åˆ‡æ¢å™¨\">è¯­è¨€åˆ‡æ¢å™¨</h3>\n<p>ä½ç½®ï¼š<code>Src/CodeSpirit.Web/Components/Shared/MainNav.razor</code></p>\n<p>ç”¨æˆ·ç‚¹å‡»ä¸‹æ‹‰æ¡†é€‰æ‹©è¯­è¨€ï¼Œç³»ç»Ÿä¼šï¼š</p>\n<ol>\n<li>è®¾ç½® Cookie</li>\n<li>åˆ·æ–°é¡µé¢</li>\n<li>åº”ç”¨æ–°è¯­è¨€åˆ°æ‰€æœ‰ç•Œé¢å…ƒç´ </li>\n</ol>\n<h2 id=\"-æœ€ä½³å®è·µ\">ğŸ“– æœ€ä½³å®è·µ</h2>\n<h3 id=\"1-èµ„æºé”®å‘½åè§„èŒƒ\">1. èµ„æºé”®å‘½åè§„èŒƒ</h3>\n<ul>\n<li>ä½¿ç”¨ç‚¹å·åˆ†éš”ç±»åˆ«ï¼š<code>Errors.NotFound</code>, <code>Common.Save</code></li>\n<li>ä½¿ç”¨ PascalCaseï¼š<code>StringLengthMax</code>, <code>ValidationError</code></li>\n<li>é¿å…é‡å¤å‰ç¼€ï¼šâœ… <code>Errors.NotFound</code> âŒ <code>Errors.ErrorsNotFound</code></li>\n</ul>\n<h3 id=\"2-å‚æ•°åŒ–æ¶ˆæ¯\">2. å‚æ•°åŒ–æ¶ˆæ¯</h3>\n<pre><code class=\"language-csharp\">// èµ„æºæ–‡ä»¶\n&lt;data name=\"UserCreated\"&gt;&lt;value&gt;ç”¨æˆ· {0} åˆ›å»ºæˆåŠŸ&lt;/value&gt;&lt;/data&gt;\n\n// ä½¿ç”¨\n_localizer[\"UserCreated\", username]\n</code></pre>\n<h3 id=\"3-å‘åå…¼å®¹\">3. å‘åå…¼å®¹</h3>\n<p>ç°æœ‰ç¡¬ç¼–ç ä¸­æ–‡çš„ä»£ç ç»§ç»­æ­£å¸¸å·¥ä½œï¼š</p>\n<pre><code class=\"language-csharp\">// æ—§ä»£ç ï¼ˆç»§ç»­å·¥ä½œï¼‰\nthrow new BusinessException(\"æœªæ‰¾åˆ°èµ„æº\");\n\n// æ–°ä»£ç ï¼ˆæ”¯æŒå¤šè¯­è¨€ï¼‰\nthrow new BusinessException(\"Errors.NotFound\");\n</code></pre>\n<h2 id=\"-æ•…éšœæ’æŸ¥\">ğŸ” æ•…éšœæ’æŸ¥</h2>\n<h3 id=\"èµ„æºé”®æœªæ‰¾åˆ°\">èµ„æºé”®æœªæ‰¾åˆ°</h3>\n<p>å¦‚æœèµ„æºé”®ä¸å­˜åœ¨ï¼Œç³»ç»Ÿä¼šè¿”å›é”®åæœ¬èº«ï¼Œä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>\n<h3 id=\"è¯­è¨€æœªç”Ÿæ•ˆ\">è¯­è¨€æœªç”Ÿæ•ˆ</h3>\n<ol>\n<li>æ£€æŸ¥ Settings é…ç½®æ˜¯å¦æ­£ç¡®</li>\n<li>ç¡®è®¤ Cookie æ˜¯å¦è®¾ç½®æˆåŠŸ</li>\n<li>æŸ¥çœ‹æ—¥å¿—ä¸­çš„è¯­è¨€è§£æè¿‡ç¨‹</li>\n</ol>\n<h3 id=\"èµ„æºæ–‡ä»¶æœªç”Ÿæˆ\">èµ„æºæ–‡ä»¶æœªç”Ÿæˆ</h3>\n<p>ç¡®ä¿é¡¹ç›®æ–‡ä»¶ä¸­é…ç½®äº†èµ„æºæ–‡ä»¶ç”Ÿæˆå™¨ï¼š</p>\n<pre><code class=\"language-xml\">&lt;EmbeddedResource Update=\"Resources\\Shared.resx\"&gt;\n    &lt;Generator&gt;PublicResXFileCodeGenerator&lt;/Generator&gt;\n&lt;/EmbeddedResource&gt;\n</code></pre>\n<h2 id=\"-ç›¸å…³æ–‡æ¡£\">ğŸ“˜ ç›¸å…³æ–‡æ¡£</h2>\n<ul>\n<li><a href=\"https://learn.microsoft.com/zh-cn/aspnet/core/fundamentals/localization\" rel=\"noopener nofollow\" target=\"_blank\">ASP.NET Core å…¨çƒåŒ–å’Œæœ¬åœ°åŒ–</a></li>\n<li><a href=\"https://aisuda.bce.baidu.com/amis/zh-CN/docs/extend/i18n\" rel=\"noopener nofollow\" target=\"_blank\">AMIS å›½é™…åŒ–æ–‡æ¡£</a></li>\n<li><a href=\"../Components/CodeSpirit.Settings/README.md\" rel=\"noopener nofollow\" target=\"_blank\">CodeSpirit Settings ç»„ä»¶</a></li>\n</ul>\n<h2 id=\"-faq\">ğŸ’¡ FAQ</h2>\n<h3 id=\"q-å¦‚ä½•ä¸ºæŸä¸ªç”¨æˆ·æ°¸ä¹…è®¾ç½®è¯­è¨€\">Q: å¦‚ä½•ä¸ºæŸä¸ªç”¨æˆ·æ°¸ä¹…è®¾ç½®è¯­è¨€ï¼Ÿ</h3>\n<p>A: é€šè¿‡ Settings API è®¾ç½®ç”¨æˆ·çº§é…ç½®ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŒä¹…åŒ–åˆ°æ•°æ®åº“ã€‚</p>\n<h3 id=\"q-amis-ç»„ä»¶çš„å¤šè¯­è¨€å¦‚ä½•å·¥ä½œ\">Q: AMIS ç»„ä»¶çš„å¤šè¯­è¨€å¦‚ä½•å·¥ä½œï¼Ÿ</h3>\n<p>A: ç³»ç»Ÿä¼šæ ¹æ®å½“å‰è¯­è¨€è‡ªåŠ¨åŠ è½½å¯¹åº”çš„ AMIS locale æ–‡ä»¶ï¼ˆå¦‚ <code>en-US.js</code>ï¼‰ï¼ŒAMIS å†…ç½®ç»„ä»¶ä¼šè‡ªåŠ¨æ˜¾ç¤ºå¯¹åº”è¯­è¨€ã€‚</p>\n<h3 id=\"q-å¯ä»¥ä¸ºä¸åŒç§Ÿæˆ·è®¾ç½®ä¸åŒçš„é»˜è®¤è¯­è¨€å—\">Q: å¯ä»¥ä¸ºä¸åŒç§Ÿæˆ·è®¾ç½®ä¸åŒçš„é»˜è®¤è¯­è¨€å—ï¼Ÿ</h3>\n<p>A: å¯ä»¥ã€‚é€šè¿‡ Settings API ä¸ºæ¯ä¸ªç§Ÿæˆ·è®¾ç½® <code>Localization.DefaultLanguage</code>ï¼Œè¯¥ç§Ÿæˆ·ä¸‹çš„æ‰€æœ‰ç”¨æˆ·é»˜è®¤ä½¿ç”¨è¯¥è¯­è¨€ï¼ˆç”¨æˆ·ä»å¯è‡ªå®šä¹‰ï¼‰ã€‚</p>\n<h3 id=\"q-å¦‚ä½•æ·»åŠ æ›´å¤šè¯­è¨€\">Q: å¦‚ä½•æ·»åŠ æ›´å¤šè¯­è¨€ï¼Ÿ</h3>\n<p>A:</p>\n<ol>\n<li>åœ¨ <code>appsettings.json</code> æ·»åŠ è¯­è¨€é…ç½®</li>\n<li>åˆ›å»ºå¯¹åº”çš„èµ„æºæ–‡ä»¶ï¼ˆå¦‚ <code>Shared.ja.resx</code>ï¼‰</li>\n<li>ä¸‹è½½ AMIS locale æ–‡ä»¶</li>\n<li>åœ¨è¯­è¨€åˆ‡æ¢å™¨æ·»åŠ é€‰é¡¹</li>\n</ol>\n<p>æ— éœ€ä¿®æ”¹ä»»ä½•ä»£ç é€»è¾‘ã€‚</p>\n<h2 id=\"-dtoæè¿°å¤šè¯­è¨€å¸¸è§é—®é¢˜\">ğŸ“ DTOæè¿°å¤šè¯­è¨€å¸¸è§é—®é¢˜</h2>\n<h3 id=\"q-å¦‚ä½•ä¸ºdtoå­—æ®µæ·»åŠ å¤šè¯­è¨€æè¿°\">Q: å¦‚ä½•ä¸ºDTOå­—æ®µæ·»åŠ å¤šè¯­è¨€æè¿°ï¼Ÿ</h3>\n<p>A: ä½¿ç”¨ <code>LocalizedDescriptionAttribute</code>ï¼ŒæŒ‡å®š <code>ResourceKey</code> å’Œ <code>ResourceType</code>ï¼š</p>\n<pre><code class=\"language-csharp\">[LocalizedDescription(\n    ResourceKey = \"Description.Question.Options\",\n    ResourceType = typeof(ExamDisplayResources)\n)]\npublic List&lt;string&gt; Options { get; set; }\n</code></pre>\n<h3 id=\"q-èµ„æºæ–‡ä»¶æ‰¾ä¸åˆ°æ€ä¹ˆåŠ\">Q: èµ„æºæ–‡ä»¶æ‰¾ä¸åˆ°æ€ä¹ˆåŠï¼Ÿ</h3>\n<p>A: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š</p>\n<ol>\n<li>èµ„æºæ–‡ä»¶æ˜¯å¦æ­£ç¡®åµŒå…¥ï¼ˆæ£€æŸ¥ <code>.csproj</code> é…ç½®ï¼‰</li>\n<li>èµ„æºé”®åç§°æ˜¯å¦æ­£ç¡®</li>\n<li>èµ„æºç±»å‹æ˜¯å¦æ­£ç¡®å¼•ç”¨</li>\n<li>å¦‚æœé…ç½®äº†å›é€€æ–‡æœ¬ï¼Œä¼šä½¿ç”¨å›é€€æ–‡æœ¬</li>\n</ol>\n<h3 id=\"q-å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ‡æ¢è¯­è¨€å—\">Q: å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ‡æ¢è¯­è¨€å—ï¼Ÿ</h3>\n<p>A: å¯ä»¥ã€‚<code>LocalizedDescriptionAttribute</code> ä¼šæ ¹æ® <code>CultureInfo.CurrentUICulture</code> è‡ªåŠ¨è·å–å¯¹åº”è¯­è¨€çš„èµ„æºã€‚è¯­è¨€åˆ‡æ¢ç”± <code>CodeSpirit.Localization</code> ç»„ä»¶çš„ä¸­é—´ä»¶å¤„ç†ã€‚</p>\n<h3 id=\"q-å¯¼èˆªç»„ä»¶æ”¯æŒå“ªäº›å¤šè¯­è¨€é…ç½®æ–¹å¼\">Q: å¯¼èˆªç»„ä»¶æ”¯æŒå“ªäº›å¤šè¯­è¨€é…ç½®æ–¹å¼ï¼Ÿ</h3>\n<p>A: å¯¼èˆªç»„ä»¶æ”¯æŒä¸¤ç§é…ç½®æ–¹å¼ï¼š</p>\n<ol>\n<li><strong>æ¨èæ–¹å¼</strong>ï¼šä½¿ç”¨ <code>NavigationAttribute</code> çš„ <code>TitleResourceKey</code> å’Œ <code>TitleResourceType</code></li>\n</ol>\n<pre><code class=\"language-csharp\">[Navigation(\n    TitleResourceKey = \"Controller.Users\",\n    TitleResourceType = typeof(NavigationResources)\n)]\n</code></pre>\n<ol start=\"2\">\n<li><strong>å‘åå…¼å®¹</strong>ï¼šä½¿ç”¨ <code>DisplayAttribute</code> çš„ <code>Name</code> å’Œ <code>ResourceType</code></li>\n</ol>\n<pre><code class=\"language-csharp\">[Display(\n    Name = \"Controller.Users\",\n    ResourceType = typeof(NavigationResources)\n)]\n</code></pre>\n<p>å¦‚æœåŒæ—¶é…ç½®äº†ä¸¤è€…ï¼Œ<code>NavigationAttribute</code> çš„é…ç½®ä¼˜å…ˆçº§æ›´é«˜ã€‚</p>\n\n</div>\n<div id=\"MySignature\">\n    ä½œè€…ï¼š<a href=\"http://www.cnblogs.com/codelove/\" target=\"_blank\">é›ªé›</a><br />å‡ºå¤„ï¼š<a href=\"http://www.cnblogs.com/codelove/\" target=\"_blank\">http://www.cnblogs.com/codelove/</a>\n<br />å¦‚æœå–œæ¬¢ä½œè€…çš„æ–‡ç« ï¼Œè¯·å…³æ³¨ã€CodeSpirit-ç çµã€‘å…¬ä¼—å·ä»¥ä¾¿ç¬¬ä¸€æ—¶é—´è·å¾—æœ€æ–°å†…å®¹ã€‚æœ¬æ–‡ç‰ˆæƒå½’ä½œè€…æ‰€æœ‰ï¼Œæ¬¢è¿è½¬è½½ï¼Œä½†æœªç»ä½œè€…åŒæ„å¿…é¡»ä¿ç•™æ­¤æ®µå£°æ˜ï¼Œä¸”åœ¨æ–‡ç« é¡µé¢æ˜æ˜¾ä½ç½®ç»™å‡ºåŸæ–‡è¿æ¥ï¼Œå¦åˆ™ä¿ç•™è¿½ç©¶æ³•å¾‹è´£ä»»çš„æƒåˆ©ã€‚<br /><b>é™å¬é¸Ÿè¯­èŠ±é¦™ï¼Œæ¼«èµäº‘å·äº‘èˆ’ã€‚</b>\n<br />\n<img height=\"100\" src=\"https://images.cnblogs.com/cnblogs_com/codelove/315887/o_251224070213_%E5%85%AC%E4%BC%97%E5%8F%B7.jpg\" width=\"100\" />\n</div>\n<div class=\"clear\"></div>\n\n\t\t</div>\n\t\t<div class=\"postDesc\">posted @ \n<span id=\"post-date\">2025-12-31 09:11</span>&nbsp;\n<a href=\"https://www.cnblogs.com/codelove\">é›ªé›</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">0</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "å¯¹çº¿é¢è¯•å®˜ç³»åˆ—ï¼šææ‡‚MySQL å›è¡¨æœºåˆ¶ï¼Œçœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†ï¼",
      "link": "https://www.cnblogs.com/bgyb/p/19420823",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/bgyb/p/19420823\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2025-12-31 09:08\">\n    <span>å¯¹çº¿é¢è¯•å®˜ç³»åˆ—ï¼šææ‡‚MySQL å›è¡¨æœºåˆ¶ï¼Œçœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†ï¼</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<p>@</p><div class=\"toc\"><div class=\"toc-container-header\">ç›®å½•</div><ul><li><a href=\"#å‰è¨€\" rel=\"noopener nofollow\">å‰è¨€</a></li><li><a href=\"#èƒŒæ™¯\" rel=\"noopener nofollow\">èƒŒæ™¯</a></li><li><a href=\"#åŸºç¡€çŸ¥è¯†\" rel=\"noopener nofollow\">åŸºç¡€çŸ¥è¯†</a></li><li><a href=\"#å›è¡¨å®šä¹‰\" rel=\"noopener nofollow\">å›è¡¨å®šä¹‰</a></li><li><a href=\"#ç»å…¸ç¤ºä¾‹\" rel=\"noopener nofollow\">ç»å…¸ç¤ºä¾‹:</a></li><li><a href=\"#å›è¡¨çš„å½±å“\" rel=\"noopener nofollow\">å›è¡¨çš„å½±å“</a></li><li><a href=\"#å¦‚ä½•é¿å…å›è¡¨\" rel=\"noopener nofollow\">å¦‚ä½•é¿å…å›è¡¨ï¼Ÿ</a><ul><li><a href=\"#1-ä½¿ç”¨è¦†ç›–ç´¢å¼•\" rel=\"noopener nofollow\">1. ä½¿ç”¨è¦†ç›–ç´¢å¼•</a></li><li><a href=\"#2-ä½¿ç”¨èšç°‡ç´¢å¼•\" rel=\"noopener nofollow\">2. ä½¿ç”¨èšç°‡ç´¢å¼•</a></li><li><a href=\"#3-ä¼˜åŒ–æŸ¥è¯¢æ¡ä»¶\" rel=\"noopener nofollow\">3. ä¼˜åŒ–æŸ¥è¯¢æ¡ä»¶</a></li><li><a href=\"#4-å‡å°‘select-çš„ä½¿ç”¨\" rel=\"noopener nofollow\">4. å‡å°‘SELECT *çš„ä½¿ç”¨</a></li><li><a href=\"#5-ä½¿ç”¨è”åˆç´¢å¼•\" rel=\"noopener nofollow\">5. ä½¿ç”¨è”åˆç´¢å¼•</a></li><li><a href=\"#6-ä½¿ç”¨å­æŸ¥è¯¢æˆ–ä¸´æ—¶è¡¨\" rel=\"noopener nofollow\">6. ä½¿ç”¨å­æŸ¥è¯¢æˆ–ä¸´æ—¶è¡¨</a></li><li><a href=\"#7-å®šæœŸä¼˜åŒ–å’Œé‡å»ºç´¢å¼•\" rel=\"noopener nofollow\">7. å®šæœŸä¼˜åŒ–å’Œé‡å»ºç´¢å¼•</a></li><li><a href=\"#8-explainåˆ†ææŸ¥è¯¢è®¡åˆ’\" rel=\"noopener nofollow\">8. EXPLAINåˆ†ææŸ¥è¯¢è®¡åˆ’</a></li><li><a href=\"#9è°ƒæ•´è¡¨ç»“æ„\" rel=\"noopener nofollow\">9.è°ƒæ•´è¡¨ç»“æ„</a></li><li><a href=\"#10-ä½¿ç”¨ç¼“å­˜\" rel=\"noopener nofollow\">10. ä½¿ç”¨ç¼“å­˜</a></li></ul></li><li><a href=\"#å›è¡¨æ€»ç»“\" rel=\"noopener nofollow\">å›è¡¨æ€»ç»“</a></li></ul></div><p></p>\n<hr />\n<h1 id=\"å‰è¨€\">å‰è¨€</h1>\n<p><font color=\"#999AAA\">è¯·å„å¤§ç½‘å‹å°Šé‡æœ¬äººåŸåˆ›çŸ¥è¯†åˆ†äº«ï¼Œè°¨è®°æœ¬äººåšå®¢ï¼š<a href=\"https://www.cnblogs.com/bgyb\" target=\"_blank\">å—å›½ä»¥å—i</a>ã€</font>å¾®ä¿¡å…¬ä¼—å·ï¼š<strong><code>ç™½ç æ¢¦æƒ³å®¶</code></strong></p>\n<p><code>æç¤ºï¼šä»¥ä¸‹æ˜¯æœ¬ç¯‡æ–‡ç« æ­£æ–‡å†…å®¹ï¼Œä¸‹é¢æ¡ˆä¾‹å¯ä¾›å‚è€ƒ</code></p>\n<h1 id=\"èƒŒæ™¯\">èƒŒæ™¯</h1>\n<blockquote>\n<p>Hello æœ‹å‹ä»¬ï¼Œæ¥ä¸‹æ¥ä¸ºå¤§å®¶å¼€å¯ï¼Œ<strong>é¢è¯•é¢˜ç›¸å…³ç³»åˆ—â˜ã€Šå¯¹çº¿é¢è¯•å®˜ã€‹</strong> <code>è‡ªä¿¡å‡ºå‡»ï¼Œè®© offer æ‰‹åˆ°æ“’æ¥ï¼ï¼ï¼</code></p>\n</blockquote>\n<h1 id=\"åŸºç¡€çŸ¥è¯†\">åŸºç¡€çŸ¥è¯†</h1>\n<blockquote>\n<ul>\n<li><strong>èšç°‡ç´¢å¼•ï¼š</strong> èšç°‡ç´¢å¼•çš„<code>å¶å­èŠ‚ç‚¹å­˜å‚¨çš„æ˜¯æ•´è¡Œæ•°æ®</code>ï¼Œä¸”æ•°æ®çš„ç‰©ç†å­˜å‚¨é¡ºåºä¸èšç°‡ç´¢å¼•çš„é¡ºåºä¸€è‡´ã€‚</li>\n<li><strong>éèšç°‡ç´¢å¼•ï¼š</strong> éèšç°‡ç´¢å¼•çš„<code>å¶å­èŠ‚ç‚¹å­˜å‚¨çš„æ˜¯ç´¢å¼•åˆ—çš„å€¼å’Œå¯¹åº”è¡Œçš„ä¸»é”®å€¼</code>ï¼Œè€Œä¸æ˜¯æ•´è¡Œæ•°æ®ã€‚</li>\n</ul>\n</blockquote>\n<p><strong>èšæ—ç´¢å¼•ä¸éèšæ—ç´¢å¼•åŒºåˆ«ï¼š</strong></p>\n<blockquote>\n<p>å¶èŠ‚ç‚¹æ˜¯å¦å­˜æ”¾ä¸€æ•´è¡Œè®°å½•ï¼Œ<code>ä¸€ä¸ªè¡¨ä¸­é™¤äº†ä¸»é”®idå­—æ®µæ˜¯èšæ—ç´¢å¼•ï¼Œå…¶å®ƒå­—æ®µéƒ½æ˜¯éèšæ—ç´¢å¼•</code></p>\n</blockquote>\n<h1 id=\"å›è¡¨å®šä¹‰\">å›è¡¨å®šä¹‰</h1>\n<p>å›è¡¨ï¼ˆLook-upï¼‰æŒ‡çš„æ˜¯åœ¨MySQLä¸­ï¼Œ <strong><code>åœ¨ä½¿ç”¨éèšé›†ç´¢å¼•è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼Œæ‰ä¼šæ¶‰åŠå›è¡¨é—®é¢˜ </code></strong> ã€‚MySQLé¦–å…ˆé€šè¿‡éèšç°‡ç´¢å¼•æ‰¾åˆ°å¯¹åº”çš„ä¸»é”®å€¼ï¼Œååˆ©ç”¨è¿™ä¸ªä¸»é”®å€¼åœ¨èšç°‡ç´¢å¼•ä¸­å®šä½åˆ°å…·ä½“çš„è¡Œï¼Œå¹¶è·å–æ‰€éœ€çš„å…¶ä»–åˆ—æ•°æ®ã€‚<br />\nç®€å•æ¥è¯´ï¼Œå›è¡¨æ˜¯ä¸€ç§äºŒæ¬¡æŸ¥æ‰¾çš„æ“ä½œï¼Œç”¨äºè·å–éèšé›†ç´¢å¼•æ— æ³•æä¾›çš„å…¶ä»–åˆ—çš„å€¼ã€‚</p>\n<h1 id=\"ç»å…¸ç¤ºä¾‹\">ç»å…¸ç¤ºä¾‹:</h1>\n<p>å‡è®¾æœ‰ä¸€ä¸ªåä¸ºusersçš„è¡¨ï¼Œå…¶ä¸­åŒ…å«ä¸‰åˆ—ï¼šidï¼ˆä¸»é”®ï¼Œèšç°‡ç´¢å¼•ï¼‰ã€nameï¼ˆéèšç°‡ç´¢å¼•ï¼‰å’Œageã€‚å¦‚æœæ‰§è¡ŒæŸ¥è¯¢<code>SELECT * FROM users WHERE name = 'Alice';</code>ï¼Œåˆ™MySQLä¼šé¦–å…ˆé€šè¿‡nameåˆ—çš„éèšç°‡ç´¢å¼•æ‰¾åˆ°æ‰€æœ‰nameä¸º'Alice'çš„è®°å½•çš„ä¸»é”®å€¼ï¼Œç„¶ååˆ©ç”¨è¿™äº›ä¸»é”®å€¼åœ¨idåˆ—çš„èšç°‡ç´¢å¼•ä¸­æŸ¥æ‰¾å¹¶è¿”å›æ•´è¡Œæ•°æ®ã€‚<br />\n<img alt=\"ç´¢å¼•\" src=\"https://i-blog.csdnimg.cn/direct/eaf82fda4a5045a2bb42ebf5a5fc7e17.png\" /></p>\n<blockquote>\n<p>ç”±å›¾å¯çŸ¥æµç¨‹ï¼Œé¦–å…ˆä»éèšç°‡ç´¢å¼•å¼€å§‹å¯»æ‰¾èšç°‡ç´¢å¼•ï¼Œæ‰¾åˆ°éèšç°‡ç´¢å¼•ä¸Šçš„èšç°‡ç´¢å¼•åï¼Œå°±ä¼šåˆ°èšç°‡ç´¢å¼•çš„B+æ ‘ä¸Šè¿›è¡ŒæŸ¥è¯¢ï¼Œé€šè¿‡èšç°‡ç´¢å¼•B+æ ‘æ‰¾åˆ°å®Œæ•´çš„æ•°æ®ã€‚è¯¥è¿‡ç¨‹æ¯”è¾ƒä¸“ä¸šçš„å«æ³•ä¹Ÿè¢«ç§°ä¸º <strong><code>â€œå›è¡¨â€</code></strong>ã€‚</p>\n</blockquote>\n<h1 id=\"å›è¡¨çš„å½±å“\">å›è¡¨çš„å½±å“</h1>\n<p>å›è¡¨æ“ä½œä¼šå¢åŠ æŸ¥è¯¢çš„æˆæœ¬ï¼Œå› ä¸ºå®ƒéœ€è¦é¢å¤–çš„I/Oæ“ä½œæ¥è®¿é—®èšç°‡ç´¢å¼•å¹¶è·å–æ•´è¡Œæ•°æ®ã€‚ç‰¹åˆ«æ˜¯åœ¨æ•°æ®é‡è¾ƒå¤§çš„æƒ…å†µä¸‹ï¼Œ<strong>å›è¡¨æ“ä½œå¯èƒ½ä¼šå¯¹æŸ¥è¯¢æ€§èƒ½äº§ç”Ÿæ˜¾è‘—å½±å“</strong>ã€‚</p>\n<h1 id=\"å¦‚ä½•é¿å…å›è¡¨\">å¦‚ä½•é¿å…å›è¡¨ï¼Ÿ</h1>\n<p>å¦‚æœæ— æ³•é¿å…å›è¡¨æ“ä½œï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•è¿›è¡Œä¼˜åŒ–ï¼š</p>\n<h2 id=\"1-ä½¿ç”¨è¦†ç›–ç´¢å¼•\">1. ä½¿ç”¨è¦†ç›–ç´¢å¼•</h2>\n<p><strong>å®šä¹‰ï¼š</strong><code>è¦†ç›–ç´¢å¼•ï¼ˆCovering Indexï¼‰çš„æ–¹å¼ã€‚è¦†ç›–ç´¢å¼•æ˜¯æŒ‡åˆ›å»ºä¸€ä¸ªåŒ…å«äº†æŸ¥è¯¢æ‰€éœ€çš„æ‰€æœ‰åˆ—çš„ç´¢å¼•</code>ï¼Œè¿™æ ·å°±å¯ä»¥ç›´æ¥ä»ç´¢å¼•ä¸­è·å–æ‰€éœ€çš„æ•°æ®ï¼Œè€Œæ— éœ€å›åˆ°è¡¨ä¸­æŸ¥æ‰¾ã€‚ä½¿ç”¨è¦†ç›–ç´¢å¼•å¯ä»¥å‡å°‘I/Oæ“ä½œå’Œæé«˜æŸ¥è¯¢æ€§èƒ½ã€‚</p>\n<p><strong>åšæ³•ï¼š</strong> åœ¨åˆ›å»ºç´¢å¼•æ—¶ï¼Œç¡®ä¿ç´¢å¼•åŒ…å«äº†æŸ¥è¯¢ä¸­éœ€è¦çš„æ‰€æœ‰åˆ—ã€‚è¿™æ ·ï¼ŒMySQLå¯ä»¥ç›´æ¥ä»ç´¢å¼•ä¸­è·å–æ‰€éœ€çš„æ•°æ®ï¼Œè€Œæ— éœ€å›è¡¨ã€‚</p>\n<p><strong>æ³¨æ„ï¼š</strong> <code>è¦†ç›–ç´¢å¼•ï¼ˆCovering Indexï¼‰å’Œç´¢å¼•è¦†ç›–ï¼ˆIndex Coveringï¼‰å®é™…ä¸Šæ˜¯åŒä¸€æ¦‚å¿µçš„ä¸åŒè¡¨è¿°æ–¹å¼ï¼Œå®ƒä»¬æŒ‡çš„æ˜¯åŒä¸€ä¸ªä¼˜åŒ–æŠ€æœ¯ã€‚å› æ­¤ï¼Œä»æœ¬è´¨ä¸Šæ¥è¯´ï¼Œè¦†ç›–ç´¢å¼•å’Œç´¢å¼•è¦†ç›–æ²¡æœ‰åŒºåˆ«ã€‚</code></p>\n<p><strong>åº”ç”¨åœºæ™¯ï¼š</strong></p>\n<ol>\n<li>å½“æŸ¥è¯¢çš„åˆ—æ˜¯ç´¢å¼•çš„ä¸€éƒ¨åˆ†æ—¶ï¼Œå¦‚æœè¿™äº›åˆ—è¶³ä»¥æ»¡è¶³æŸ¥è¯¢éœ€æ±‚ï¼Œå°±å¯ä»¥ä½¿ç”¨è¦†ç›–ç´¢å¼•ã€‚</li>\n<li>åœ¨è¿›è¡Œåˆ†é¡µæŸ¥è¯¢æ—¶ï¼Œå¦‚æœæŸ¥è¯¢æ¡ä»¶å·²ç»åŒ…å«åœ¨ç´¢å¼•ä¸­ï¼Œå¹¶ä¸”åªéœ€è¦è·å–ç´¢å¼•ä¸­çš„éƒ¨åˆ†åˆ—æ•°æ®ï¼Œå°±å¯ä»¥ä½¿ç”¨è¦†ç›–ç´¢å¼•æ¥æé«˜æŸ¥è¯¢æ•ˆç‡ã€‚</li>\n<li>åœ¨è¿›è¡Œç»Ÿè®¡æŸ¥è¯¢æ—¶ï¼Œå¦‚æœç»Ÿè®¡ä¿¡æ¯å¯ä»¥é€šè¿‡ç´¢å¼•ç›´æ¥è®¡ç®—å¾—å‡ºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è¦†ç›–ç´¢å¼•æ¥å‡å°‘æ•°æ®è®¿é—®é‡ã€‚</li>\n</ol>\n<p><strong>ç¤ºä¾‹ï¼š</strong></p>\n<pre><code class=\"language-sql\">CREATE INDEX idx_name_age ON table_name(name, age);  \nSELECT name, age FROM table_name WHERE name = 'Alice';\n</code></pre>\n<h2 id=\"2-ä½¿ç”¨èšç°‡ç´¢å¼•\">2. ä½¿ç”¨èšç°‡ç´¢å¼•</h2>\n<p><strong>å®šä¹‰ï¼š</strong> èšç°‡ç´¢å¼•æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç´¢å¼•ï¼Œå®ƒå°†æ•°æ®å’Œç´¢å¼•å­˜å‚¨åœ¨ä¸€èµ·ã€‚åœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œä¸»é”®ç´¢å¼•å°±æ˜¯èšç°‡ç´¢å¼•ã€‚</p>\n<p><strong>åšæ³•ï¼š</strong> ç¡®ä¿æŸ¥è¯¢ä¸­é¢‘ç¹ä½¿ç”¨çš„åˆ—æ˜¯ä¸»é”®æˆ–åŒ…å«åœ¨èšç°‡ç´¢å¼•ä¸­ã€‚è¿™æ ·ï¼Œå½“é€šè¿‡è¿™äº›åˆ—è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼Œå¯ä»¥ç›´æ¥ä»èšç°‡ç´¢å¼•ä¸­è·å–æ•°æ®ï¼Œæ— éœ€å›è¡¨ã€‚</p>\n<p><strong>æ³¨æ„ï¼š</strong> <code>æ¯ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªèšç°‡ç´¢å¼•ï¼Œå› ä¸ºæ•°æ®åªèƒ½æœ‰ä¸€ç§ç‰©ç†å­˜å‚¨é¡ºåºã€‚</code></p>\n<h2 id=\"3-ä¼˜åŒ–æŸ¥è¯¢æ¡ä»¶\">3. ä¼˜åŒ–æŸ¥è¯¢æ¡ä»¶</h2>\n<p>åšæ³•ï¼šå°½é‡é¿å…åœ¨æŸ¥è¯¢æ¡ä»¶ä¸­ä½¿ç”¨ä¸åœ¨ç´¢å¼•åˆ—ä¸­çš„åˆ—ï¼Œå› ä¸ºè¿™ä¼šå¯¼è‡´å›è¡¨æŸ¥è¯¢ã€‚ä¼˜åŒ–æŸ¥è¯¢æ¡ä»¶ï¼Œä½¿ä¹‹å°½å¯èƒ½ä½¿ç”¨ç´¢å¼•åˆ—ã€‚</p>\n<p>ç¤ºä¾‹ï¼š</p>\n<pre><code class=\"language-sql\">-- ä¼˜åŒ–å‰ï¼ˆå‡è®¾æ²¡æœ‰é’ˆå¯¹customer_nameçš„ç´¢å¼•ï¼‰  \nSELECT * FROM customers WHERE customer_name = 'John Doe';  \n  \n-- ä¼˜åŒ–åï¼ˆæ·»åŠ ç´¢å¼•ï¼‰  \nALTER TABLE customers ADD INDEX (customer_name);  \nSELECT * FROM customers WHERE customer_name = 'John Doe';\n</code></pre>\n<h2 id=\"4-å‡å°‘select-çš„ä½¿ç”¨\">4. å‡å°‘SELECT *çš„ä½¿ç”¨</h2>\n<p><strong>åšæ³•ï¼š</strong> å°½é‡é¿å…ä½¿ç”¨SELECT *ï¼ŒåªæŸ¥è¯¢éœ€è¦çš„åˆ—ã€‚è¿™æ ·å¯ä»¥å‡å°‘æ•°æ®ä¼ è¾“é‡ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œå¹¶åœ¨æŸäº›æƒ…å†µä¸‹é¿å…å›è¡¨ã€‚</p>\n<p><strong>ç¤ºä¾‹ï¼š</strong></p>\n<pre><code class=\"language-sql\">-- ä¼˜åŒ–å‰  \nSELECT * FROM table_name WHERE id = 1;  \n  \n-- ä¼˜åŒ–å  \nSELECT id, name FROM table_name WHERE id = 1;\n</code></pre>\n<h2 id=\"5-ä½¿ç”¨è”åˆç´¢å¼•\">5. ä½¿ç”¨è”åˆç´¢å¼•</h2>\n<p><strong>å®šä¹‰ï¼š</strong> è”åˆç´¢å¼•æ˜¯å°†å¤šä¸ªåˆ—ç»„åˆæˆä¸€ä¸ªç´¢å¼•ã€‚</p>\n<p><strong>åšæ³•ï¼š</strong> å°†æŸ¥è¯¢ä¸­ç»å¸¸ä¸€èµ·å‡ºç°çš„åˆ—ç»„åˆæˆè”åˆç´¢å¼•ã€‚è¿™æ ·ï¼Œå½“è¿™äº›åˆ—ä¸€èµ·å‡ºç°åœ¨æŸ¥è¯¢æ¡ä»¶ä¸­æ—¶ï¼Œå¯ä»¥å‡å°‘å›è¡¨æ¬¡æ•°ã€‚</p>\n<p>ç¤ºä¾‹ï¼š</p>\n<pre><code class=\"language-sql\">CREATE INDEX idx_name_age ON table_name(name, age);  \nSELECT * FROM table_name WHERE name = 'Alice' AND age = 20;\n</code></pre>\n<h2 id=\"6-ä½¿ç”¨å­æŸ¥è¯¢æˆ–ä¸´æ—¶è¡¨\">6. ä½¿ç”¨å­æŸ¥è¯¢æˆ–ä¸´æ—¶è¡¨</h2>\n<p><strong>åšæ³•ï¼š</strong> å°†éœ€è¦æŸ¥è¯¢çš„æ•°æ®å…ˆå­˜å‚¨åœ¨ä¸´æ—¶è¡¨æˆ–å­æŸ¥è¯¢ä¸­ï¼Œç„¶åå†è¿›è¡Œå…³è”æŸ¥è¯¢ã€‚è¿™æ ·å¯ä»¥å‡å°‘å›è¡¨æ¬¡æ•°ï¼Œç‰¹åˆ«æ˜¯å½“å…³è”æŸ¥è¯¢æ¶‰åŠå¤šä¸ªè¡¨æ—¶ã€‚</p>\n<h2 id=\"7-å®šæœŸä¼˜åŒ–å’Œé‡å»ºç´¢å¼•\">7. å®šæœŸä¼˜åŒ–å’Œé‡å»ºç´¢å¼•</h2>\n<p><strong>åšæ³•ï¼š</strong> éšç€æ•°æ®çš„æ›´æ–°å’Œå¢é•¿ï¼Œç´¢å¼•å¯èƒ½ä¼šå˜å¾—ä¸å†ç´§å‡‘ï¼Œå½±å“æŸ¥è¯¢æ€§èƒ½ã€‚å®šæœŸä¼˜åŒ–å’Œé‡å»ºç´¢å¼•å¯ä»¥ä¿æŒç´¢å¼•æ€§èƒ½ã€‚</p>\n<h2 id=\"8-explainåˆ†ææŸ¥è¯¢è®¡åˆ’\">8. EXPLAINåˆ†ææŸ¥è¯¢è®¡åˆ’</h2>\n<p><strong>åšæ³•ï¼š</strong> é€šè¿‡EXPLAINè¯­å¥åˆ†ææŸ¥è¯¢è®¡åˆ’ï¼Œäº†è§£æŸ¥è¯¢æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Œä»è€Œæ‰¾åˆ°ä¼˜åŒ–çš„æ–¹æ³•ï¼Œå‡å°‘å›è¡¨æŸ¥è¯¢çš„æ¬¡æ•°ã€‚</p>\n<h2 id=\"9è°ƒæ•´è¡¨ç»“æ„\">9.è°ƒæ•´è¡¨ç»“æ„</h2>\n<p><strong>åšæ³•ï¼š</strong>  å¦‚æœå›è¡¨æ“ä½œéå¸¸é¢‘ç¹ï¼Œå¯ä»¥è€ƒè™‘è°ƒæ•´è¡¨ç»“æ„ï¼Œå°†éœ€è¦æŸ¥è¯¢çš„åˆ—æ”¾åœ¨ç´¢å¼•ä¸­ï¼Œæˆ–è€…ä½¿ç”¨èšç°‡ç´¢å¼•æ¥å‡å°‘å›è¡¨æ“ä½œã€‚</p>\n<h2 id=\"10-ä½¿ç”¨ç¼“å­˜\">10. ä½¿ç”¨ç¼“å­˜</h2>\n<p><strong>åšæ³•ï¼š</strong> å¦‚æœæŸ¥è¯¢çš„æ•°æ®å…·æœ‰ä¸€å®šçš„é‡å¤æ€§ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ç¼“å­˜æ¥å‡å°‘å›è¡¨æ“ä½œã€‚</p>\n<p>é€šè¿‡ä»¥ä¸Šæ–¹æ³•ï¼Œå¯ä»¥æœ‰æ•ˆåœ°é¿å…MySQLä¸­çš„å›è¡¨æ“ä½œï¼Œæé«˜æŸ¥è¯¢æ€§èƒ½å’Œæ•°æ®åº“çš„æ•´ä½“æ€§èƒ½ã€‚</p>\n<h1 id=\"å›è¡¨æ€»ç»“\">å›è¡¨æ€»ç»“</h1>\n<p>å›è¡¨æ˜¯MySQLæ•°æ®åº“ä¸­ä¸€ç§å¸¸è§çš„æ“ä½œï¼Œç”¨äºè·å–éèšé›†ç´¢å¼•æ— æ³•æä¾›çš„å…¶ä»–åˆ—çš„å€¼ã€‚<code>å›è¡¨æ“ä½œä¼šå¢åŠ é¢å¤–çš„I/Oæ“ä½œå’Œè®¿é—®æ—¶é—´ï¼Œå½±å“æŸ¥è¯¢çš„æ€§èƒ½</code>ã€‚ä¸ºäº†é¿å…å›è¡¨æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨<strong>è¦†ç›–ç´¢å¼•</strong>çš„æ–¹å¼ã€‚å¦‚æœæ— æ³•é¿å…å›è¡¨æ“ä½œï¼Œå¯ä»¥é€šè¿‡<strong>ä¼˜åŒ–æŸ¥è¯¢è¯­å¥</strong>ã€<strong>è°ƒæ•´è¡¨ç»“æ„</strong>å’Œ<strong>ä½¿ç”¨ç¼“å­˜</strong>ç­‰æ–¹å¼æ¥ä¼˜åŒ–å›è¡¨æ“ä½œã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œéœ€è¦æ ¹æ®å…·ä½“çš„åœºæ™¯å’Œéœ€æ±‚æ¥é€‰æ‹©åˆé€‚çš„ä¼˜åŒ–ç­–ç•¥ã€‚</p>\n<hr color=\"#000000\" size=\"1&quot;\" style=\"border: solid; width: 100px; height: 1px;\" />\n<p>æˆ‘æ˜¯<a href=\"https://www.cnblogs.com/bgyb\" target=\"_blank\">å—å›½ä»¥å—i</a>è®°å½•ç‚¹æ»´æ¯å¤©æˆé•¿ä¸€ç‚¹ç‚¹ï¼Œå­¦ä¹ æ˜¯æ°¸æ— æ­¢å¢ƒçš„ï¼è½¬è½½è¯·é™„åŸæ–‡é“¾æ¥ï¼ï¼ï¼</p>\n<p><a href=\"https://blog.csdn.net/q7w8e9r4/article/details/132532986\" rel=\"noopener nofollow\" target=\"_blank\">å‚è€ƒé“¾æ¥</a>ã€<a href=\"https://www.cnblogs.com/kdaddy/p/18270217\" target=\"_blank\">å‚è€ƒé“¾æ¥</a>ã€</p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2025-12-31 09:08</span>&nbsp;\n<a href=\"https://www.cnblogs.com/bgyb\">å—å›½ä»¥å—i</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">0</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "ä¸€æ–‡ç†æ¸…FastAPIå‚æ•°ï¼šä»Queryã€Pathåˆ°BaseModelçš„å®æˆ˜æŒ‡å—",
      "link": "https://www.cnblogs.com/ymtianyu/p/19424375",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/ymtianyu/p/19424375\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2025-12-31 08:57\">\n    <span>ä¸€æ–‡ç†æ¸…FastAPIå‚æ•°ï¼šä»Queryã€Pathåˆ°BaseModelçš„å®æˆ˜æŒ‡å—</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                    <div id=\"cnblogs_post_description\" style=\"display: none;\">\n        \n        æœ¬æ–‡ç³»ç»Ÿè®²è§£äº†FastAPIä¸­çš„æ ¸å¿ƒå‚æ•°ç±»å‹ï¼ŒåŒ…æ‹¬æŸ¥è¯¢å‚æ•°ã€è·¯å¾„å‚æ•°ä»¥åŠè¯·æ±‚ä½“å‚æ•°ï¼ˆJSONä¸è¡¨å•ï¼‰çš„å®šä¹‰ã€åŒºåˆ«å’Œä½¿ç”¨æ–¹æ³•ã€‚é‡ç‚¹ä»‹ç»äº†åˆ©ç”¨Pydantic BaseModelè¿›è¡Œç»“æ„åŒ–æ•°æ®éªŒè¯å’Œç®¡ç†çš„ä¼˜åŠ¿ä¸å®è·µï¼Œå¹¶é€šè¿‡æ··åˆå‚æ•°ç¤ºä¾‹å’Œå®Œæ•´ä»£ç å±•ç¤ºäº†å¦‚ä½•æ„å»ºæ¸…æ™°ã€å¥å£®ä¸”æ–‡æ¡£å®Œå–„çš„APIæ¥å£ã€‚\n    </div>\n<div class=\"blogpost-body blogpost-body-html\" id=\"cnblogs_post_body\">\n<div>\n<p style=\"font-size: 18px; font-weight: bold; color: rgba(26, 26, 26, 1);\">åˆšå­¦ FastAPIï¼Œæ˜¯ä¸æ˜¯æ€»è¢«è·¯å¾„å‚æ•°ã€æŸ¥è¯¢å‚æ•°ã€è¯·æ±‚ä½“è¿™äº›æ¦‚å¿µç»•æ™•ï¼Œä¸çŸ¥é“æ•°æ®ä»å“ªå„¿æ¥ã€è¯¥æ€ä¹ˆæ¥ï¼Ÿäº‹å®ä¸Šï¼Œ<strong style=\"color: rgba(186, 55, 42, 1);\">æ­£ç¡®ä½¿ç”¨å‚æ•°å£°æ˜ï¼Œèƒ½è®©ä½ çš„ API ä»£ç é‡å‡å°‘ä¸€åŠï¼Œä¸”è‡ªåŠ¨è·å¾—å®Œç¾çš„äº¤äº’æ–‡æ¡£ã€‚</strong></p>\n<blockquote style=\"padding-left: 15px; margin: 20px 0; color: rgba(102, 102, 102, 1); font-style: italic;\">æœ¬æ–‡å¸¦ä½ ä¸€æ¬¡ææ‡‚ FastAPI ä¸­çš„æ‰€æœ‰æ ¸å¿ƒå‚æ•°ç±»å‹ï¼šä»ç®€å•çš„æŸ¥è¯¢å­—ç¬¦ä¸²ï¼ˆ?name=valueï¼‰ï¼Œåˆ°å®šä¹‰URLç‰‡æ®µçš„è·¯å¾„å‚æ•°ï¼Œå†åˆ°å¤„ç†å¤æ‚ JSON æˆ–è¡¨å•æ•°æ®çš„è¯·æ±‚ä½“ã€‚é‡ç‚¹æ·±å…¥ Pydantic BaseModelï¼Œæ•™ä½ å¦‚ä½•ç”¨å®ƒä¼˜é›…åœ°å®šä¹‰ã€éªŒè¯å’Œç»„ç»‡å¤æ‚æ•°æ®ï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆ API æ–‡æ¡£ã€‚è¯»å®Œä½ å°±èƒ½æ¸…æ™°åœ°è§„åˆ’ API çš„æ•°æ®æ¥å£äº†ã€‚ <br /><br />- âœ¨ æŸ¥è¯¢å‚æ•°ä¸è·¯å¾„å‚æ•°ï¼šåŸºç¡€ä¸åŒºåˆ«<br />- ğŸ“¦ è¯·æ±‚ä½“å‚æ•°ï¼šJSON (Body) ä¸ è¡¨å• (Form) å¤„ç†<br />- ğŸ§© æ··åˆå‚æ•°ï¼šè·¯å¾„ã€æŸ¥è¯¢ã€è¯·æ±‚ä½“åŒæ—¶ä½¿ç”¨<br />- ğŸ—ï¸ ç»“æ„åŒ–åˆ©å™¨ï¼šPydantic BaseModel è¯¦è§£ä¸åº”ç”¨<br />- ğŸš€ å®Œæ•´å®æˆ˜ç¤ºä¾‹ä¸ä»£ç å‚è€ƒ</blockquote>\n<h2 style=\"padding-bottom: 10px; margin-top: 40px;\">âœ¨ æŸ¥è¯¢å‚æ•°ä¸è·¯å¾„å‚æ•°ï¼šåœ°åŸºè¦æ‰“ç‰¢</h2>\n<p>è¿™æ˜¯ä¸¤ç§æœ€åŸºç¡€ã€æœ€å¸¸ç”¨çš„å‚æ•°ï¼Œéƒ½ç›´æ¥ä½“ç°åœ¨ URL ä¸­ã€‚</p>\n<p><strong style=\"color: rgba(186, 55, 42, 1);\">æŸ¥è¯¢å‚æ•°ï¼ˆQuery Parametersï¼‰</strong>ï¼šè·Ÿåœ¨ URL é—®å·<code>?</code>åé¢ï¼Œæ ¼å¼ä¸º<code>key1=value1&amp;key2=value2</code>ã€‚åœ¨ FastAPI ä¸­ï¼Œå‡½æ•°å‚æ•°<strong>ä¸æ˜¯è·¯å¾„çš„ä¸€éƒ¨åˆ†</strong>çš„ï¼Œé»˜è®¤å°±æ˜¯æŸ¥è¯¢å‚æ•°ã€‚</p>\n<pre class=\"language-python highlighter-hljs\"><code>from fastapi import FastAPI\napp = FastAPI()\n\n@app.get(\"/items/\")\nasync def read_items(skip: int = 0, limit: int = 10):\n    # `skip`å’Œ`limit`å°±æ˜¯æŸ¥è¯¢å‚æ•°ï¼Œå¦‚ï¼š/items/?skip=20&amp;limit=5\n    return {\"skip\": skip, \"limit\": limit}</code></pre>\n<p>ä½¿ç”¨ <code>skip: int = 0</code> å½¢å¼ï¼Œå°±å®šä¹‰äº†å¸¦é»˜è®¤å€¼çš„å¯é€‰å‚æ•°ã€‚å¦‚æœæ²¡æœ‰é»˜è®¤å€¼ï¼ˆå¦‚ <code>name: str</code>ï¼‰ï¼Œå®ƒå°±æ˜¯å¿…éœ€çš„æŸ¥è¯¢å‚æ•°ã€‚</p>\n<p><strong style=\"color: rgba(186, 55, 42, 1);\">è·¯å¾„å‚æ•°ï¼ˆPath Parametersï¼‰</strong>ï¼šç›´æ¥æ˜¯ URL è·¯å¾„çš„ä¸€éƒ¨åˆ†ï¼Œç”¨èŠ±æ‹¬å·<code>{}</code>å£°æ˜ã€‚é€šå¸¸ç”¨äºå”¯ä¸€æ ‡è¯†èµ„æºï¼Œæ¯”å¦‚æ ¹æ®IDè·å–æŸç¯‡æ–‡ç« ã€‚</p>\n<pre class=\"language-python highlighter-hljs\"><code>@app.get(\"/items/{item_id}\")\nasync def read_item(item_id: int):  # item_id æ˜¯è·¯å¾„å‚æ•°\n    return {\"item_id\": item_id}</code></pre>\n<p>æ³¨æ„å®ƒä»¬çš„é¡ºåºï¼å¦‚æœæŠŠ <code>/items/{item_id}</code> å’Œ <code>/items/me</code> ä¸¤ä¸ªç«¯ç‚¹éƒ½å®šä¹‰ï¼Œ<strong style=\"color: rgba(186, 55, 42, 1);\">è¦æŠŠå…·ä½“çš„è·¯å¾„ï¼ˆ<code>/items/me</code>ï¼‰æ”¾åœ¨å‰é¢</strong>ï¼Œå¦åˆ™<code>me </code>ä¼šè¢«å½“æˆ<code>item_id</code>çš„å€¼ã€‚</p>\n<h2 style=\"padding-bottom: 10px; margin-top: 40px;\">ğŸ“¦ è¯·æ±‚ä½“å‚æ•°ï¼šå¤„ç†å¤æ‚æ•°æ®</h2>\n<p>å½“ä½ éœ€è¦å®¢æˆ·ç«¯å‘é€è¾ƒå¤šæ•°æ®ï¼ˆå¦‚åˆ›å»ºæ–°æ–‡ç« ï¼‰æ—¶ï¼Œå°±éœ€è¦è¯·æ±‚ä½“ã€‚FastAPI ç”¨ <code>Body()</code>, <code>Form()</code> ç­‰å·¥å…·å‡½æ•°æ¥å£°æ˜ã€‚</p>\n<p><strong style=\"color: rgba(186, 55, 42, 1);\">JSON è¯·æ±‚ä½“ï¼ˆBodyï¼‰</strong>ï¼šæœ€å¸¸è§çš„ REST API æ•°æ®æ ¼å¼ã€‚ä½¿ç”¨ Pydantic çš„ <code>BaseModel</code> æ˜¯æœ€ä½³å®è·µï¼ˆä¸‹æ–‡è¯¦è§£ï¼‰ï¼Œä¹Ÿå¯ç”¨ <code>Body()</code> ç›´æ¥å£°æ˜å¤šä¸ªå‚æ•°ã€‚</p>\n<pre class=\"language-python highlighter-hljs\"><code>from fastapi import Body\n\n@app.put(\"/items/{item_id}\")\nasync def update_item(\n    item_id: int,\n    name: str = Body(...),  # Body(...) è¡¨ç¤ºå¿…éœ€é¡¹\n    description: str = Body(None)  # Body(None) è¡¨ç¤ºå¯é€‰é¡¹\n):\n    return {\"item_id\": item_id, \"name\": name, \"description\": description}</code></pre>\n<p><strong style=\"color: rgba(186, 55, 42, 1);\">è¡¨å•æ•°æ®ï¼ˆFormï¼‰</strong>ï¼šå½“æ•°æ®æ¥è‡ª HTML è¡¨å•æˆ–éœ€è¦ä¸Šä¼ æ–‡ä»¶æ—¶ä½¿ç”¨ã€‚å¦‚ä½•è¦ä¸Šä¼ å¤§æ–‡ä»¶ï¼Œéœ€è¦å…ˆå®‰è£… <code>python-multipart</code>ã€‚</p>\n<pre class=\"language-python highlighter-hljs\"><code>from fastapi import Form\n\n@app.post(\"/login/\")\nasync def login(username: str = Form(...), password: str = Form(...)):\n    return {\"username\": username}</code></pre>\n<h2 style=\"padding-bottom: 10px; margin-top: 40px;\">ğŸ§© æ··åˆå‚æ•°ï¼šè‡ªç”±ç»„åˆï¼Œå„å¸å…¶èŒ</h2>\n<p>FastAPI èƒ½æ™ºèƒ½åœ°åŒºåˆ†å‚æ•°æ¥æºï¼Œä½ å¯ä»¥åŒæ—¶ä½¿ç”¨è·¯å¾„ã€æŸ¥è¯¢å’Œè¯·æ±‚ä½“å‚æ•°ã€‚</p>\n<pre class=\"language-python highlighter-hljs\"><code>from fastapi import Path, Query, Body\n\n@app.put(\"/mixed-items/{item_id}\")\nasync def update_mixed_item(\n    *,\n    item_id: int = Path(..., title=\"å•†å“ID\", ge=1),  # è·¯å¾„å‚æ•°ï¼Œ&gt;=1\n    q: str = Query(None, alias=\"query-string\"),      # å¯é€‰æŸ¥è¯¢å‚æ•°ï¼Œåˆ«å\n    item: dict = Body(...)                           # å¿…éœ€çš„JSONè¯·æ±‚ä½“\n):\n    results = {\"item_id\": item_id}\n    if q:\n        results.update({\"q\": q})\n    results.update({\"item\": item})\n    return results</code></pre>\n<p>è¿™é‡Œç”¨åˆ°äº†å‚æ•°æ ¡éªŒï¼š<code>ge=1</code> è¡¨ç¤ºå€¼å¤§äºç­‰äº1ã€‚<code>Query</code>, <code>Path</code>, <code>Body</code> ç­‰å‡½æ•°è®©å£°æ˜æ›´æ˜ç¡®ä¸”åŠŸèƒ½æ›´å¼ºå¤§ï¼ˆå¦‚æ·»åŠ æè¿°ã€åˆ«åã€æ ¡éªŒï¼‰ã€‚</p>\n<h2 style=\"padding-bottom: 10px; margin-top: 40px;\">ğŸ—ï¸ ç»“æ„åŒ–åˆ©å™¨ï¼šPydantic BaseModel</h2>\n<p><strong style=\"color: rgba(186, 55, 42, 1);\">è¿™æ˜¯ FastAPI çš„çµé­‚ç‰¹æ€§ä¹‹ä¸€ã€‚</strong> BaseModel è®©ä½ ç”¨ Python ç±»æ¥å®šä¹‰æ•°æ®æ¨¡å‹ï¼Œå®ƒè‡ªåŠ¨å¤„ç†æ•°æ®éªŒè¯ã€åºåˆ—åŒ–å’Œæ–‡æ¡£ç”Ÿæˆã€‚</p>\n<pre class=\"language-python highlighter-hljs\"><code>from pydantic import BaseModel, EmailStr\nfrom typing import Optional, List\n\nclass UserCreate(BaseModel):\n    # å¿…éœ€å­—æ®µ\n    username: str\n    email: EmailStr  # å†…ç½®é‚®ç®±æ ¼å¼éªŒè¯\n    # å¯é€‰å­—æ®µï¼Œå¸¦é»˜è®¤å€¼\n    full_name: Optional[str] = None\n    # åˆ—è¡¨ç±»å‹\n    tags: List[str] = []\n\n@app.post(\"/users/\")\nasync def create_user(user: UserCreate):  # ä¸€ä¸ªå‚æ•°æ¥ç®¡æ•´ä¸ªè¯·æ±‚ä½“\n    # ç›´æ¥è®¿é—®å·²éªŒè¯å¥½çš„æ•°æ®\n    if user.full_name:\n        greeting = f\"Hello, {user.full_name}!\"\n    else:\n        greeting = f\"Hello, {user.username}!\"\n    return {\"message\": greeting, \"user_info\": user.dict()}</code></pre>\n<p><strong style=\"color: rgba(186, 55, 42, 1);\">BaseModel çš„ä¼˜åŠ¿ï¼š</strong></p>\n- <strong>å£°æ˜å³éªŒè¯ï¼š</strong> å­—æ®µç±»å‹ä¸å¯¹ã€é‚®ç®±æ ¼å¼é”™è¯¯ç­‰ä¼šè‡ªåŠ¨è¿”å› 422 é”™è¯¯ã€‚<br />- <strong>è‡ªåŠ¨æ–‡æ¡£ï¼š</strong> Swagger UI å’Œ ReDoc ä¼šè‡ªåŠ¨æ˜¾ç¤ºæ¨¡å‹ç»“æ„å’Œç¤ºä¾‹ã€‚<br />- <strong>ä»£ç æ¸…æ™°ï¼š</strong> æ•°æ®å¥‘çº¦æ˜ç¡®ï¼Œä¸šåŠ¡é€»è¾‘ä¸æ•°æ®éªŒè¯åˆ†ç¦»ã€‚<br />- <strong>åµŒå¥—è‡ªç”±ï¼š</strong> æ¨¡å‹å¯ä»¥åµŒå¥—å…¶ä»–æ¨¡å‹ï¼Œè½»æ¾å¤„ç†å¤æ‚æ•°æ®ã€‚<br />\n<h2 style=\"padding-bottom: 10px; margin-top: 40px;\">ğŸš€ å®Œæ•´ä»£ç ç¤ºä¾‹</h2>\n<p>ä¸‹é¢æ˜¯ä¸€ä¸ªèåˆäº†ä¸»è¦å‚æ•°ç±»å‹çš„å®æˆ˜ç¤ºä¾‹ï¼Œä½ å¯ä»¥ç›´æ¥å¤åˆ¶è¿è¡Œã€‚</p>\n<pre class=\"language-python highlighter-hljs\"><code>from fastapi import FastAPI, Path, Query, Body\nfrom pydantic import BaseModel\nfrom typing import Optional\nfrom datetime import datetime\n\napp = FastAPI(title=\"å‚æ•°è¯¦è§£ç¤ºä¾‹\")\n\nclass Item(BaseModel):\n    name: str\n    description: Optional[str] = None\n    price: float = Body(..., gt=0)\n    tax: Optional[float] = None\n    tags: list = []\n\n@app.post(\"/advanced-items/{category}\")\nasync def create_advanced_item(\n    category: str = Path(..., description=\"ç‰©å“åˆ†ç±»\"),\n    item_id: int = Query(..., ge=1, description=\"ç‰©å“ID\"),\n    q: Optional[str] = Query(None, max_length=50),\n    urgent: bool = Query(False),\n    item: Item = Body(..., example={  # ä¸ºæ–‡æ¡£æä¾›ç¤ºä¾‹\n        \"name\": \"Foo\",\n        \"price\": 50.5,\n        \"tags\": [\"cool\", \"new\"]\n    })\n):\n    \"\"\"åˆ›å»ºæ–°ç‰©å“çš„å¤æ‚ç«¯ç‚¹\"\"\"\n    total = item.price + (item.tax if item.tax else 0)\n    result = {\n        \"category\": category,\n        \"item_id\": item_id,\n        \"query_string\": q,\n        \"urgent\": urgent,\n        \"item_name\": item.name,\n        \"total_price\": total,\n        \"created_at\": datetime.now().isoformat()\n    }\n    return result\n\nif __name__ == \"__main__\":\n    import uvicorn\n    uvicorn.run(app, host=\"0.0.0.0\", port=8000)</code></pre>\n<p>è¿è¡Œåï¼Œè®¿é—® <code>http://127.0.0.1:8000/docs</code>ï¼Œä½ å°†çœ‹åˆ°ä¸€ä¸ªåŠŸèƒ½é½å…¨çš„äº¤äº’å¼ API æ–‡æ¡£ï¼Œæ‰€æœ‰å‚æ•°å’Œæ¨¡å‹éƒ½æ¸…æ™°å¯è§ã€‚</p>\n<div style=\"text-align: center; margin: 40px 0;\"><hr style=\"border-right: none; border-bottom: none; border-left: none;\" /></div>\n<p style=\"text-align: center; color: rgba(119, 119, 119, 1); font-style: italic;\">å–œæ¬¢æœ¬æ–‡ï¼Ÿä¸è¦é”™è¿‡âœ¨ï¼Œç‚¹èµğŸ‘æ”¶è—â­å…³æ³¨æˆ‘ğŸ‘†ï¼Œä¸€èµ·å­¦ä¹ æ›´å¤šæœ‰ç”¨çš„çŸ¥è¯†ï¼Œå®Œå–„ä½ æˆ‘çš„æŠ€èƒ½æ ‘ï¼ä¹Ÿè¯·è·¯è¿‡çš„å¤§ä½¬ç»™äº›å»ºè®®å’ŒæŒ‡æ•™ğŸ™ğŸ¶ï¼</p>\n</div>\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2025-12-31 08:57</span>&nbsp;\n<a href=\"https://www.cnblogs.com/ymtianyu\">æ›²å¹½</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">0</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "Ã¥Â¯Â¹Ã©Â½ÂÃ¨Â§â€Ã¥Ë†â„¢Ã¥Â¤Âª Ã¢â‚¬Å“Ã¨â€¹â€ºÃ¥Ë†Â»Ã¢â‚¬ÂÃ¯Â¼Å’PostgreSQLÃ¨Â¡Â¨Ã¥ÂËœÃ¥Â¤Â§Ã§Å¡â€ 3 Ã¤Â¸ÂªÃ¦Â Â¸Ã¥Â¿Æ’Ã¥Å½Å¸Ã¥â€º",
      "link": "https://www.cnblogs.com/lyhabc/p/19161704/postgresql-table-size-increase-causes-alignment-padding",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/lyhabc/p/19161704/postgresql-table-size-increase-causes-alignment-padding\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2025-12-31 08:00\">\n    <span>å¯¹é½è§„åˆ™å¤ª â€œè‹›åˆ»â€ï¼ŒPostgreSQLè¡¨å˜å¤§çš„ 3 ä¸ªæ ¸å¿ƒåŸå› </span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body blogpost-body-html\" id=\"cnblogs_post_body\">\n<h1 style=\"text-align: center;\">å¯¹é½è§„åˆ™å¤ª â€œè‹›åˆ»â€ï¼ŒPostgreSQLè¡¨å˜å¤§çš„ 3 ä¸ªæ ¸å¿ƒåŸå› </h1>\n<p><span>ç›¸åŒçš„è¡¨ç»“æ„å’Œæ•°æ®ï¼Œåœ¨å•†ä¸šæ•°æ®åº“ä¸­å­˜å‚¨ç´§å‡‘ï¼Œåˆ°äº†PostgreSQLé‡Œå´ä¼šæ˜æ˜¾å˜å¤§ï¼Ÿ ä¸ºä»€ä¹ˆæœ‰äº›æ•°æ®åº“ç®¡ç†å‘˜ï¼ˆDBAï¼‰åœ¨å°†<span>Oracle</span>ã€<span>SQL Serverå’ŒDB2</span><span>ç­‰å•†ä¸šæ•°æ®åº“</span>è¿ç§»åˆ°PostgreSQLåè¡¨å ç”¨çš„ç£ç›˜ç©ºé—´å¢åŠ 20%-40%ï¼Ÿ</span></p>\n<p><span>æœ¬æ–‡å°†é€šè¿‡å®é™…ç¤ºä¾‹è¯´æ˜â€œå¯¹é½â€ä¸â€œå¡«å……â€æ˜¯å¦‚ä½•é€ æˆè¿™ç§å·®å¼‚çš„ã€‚</span></p>\n<h2><span><span>å•†ä¸šæ•°æ®åº“ä¸­çš„è¡Œå­˜å‚¨æœºåˆ¶</span></span></h2>\n<p><span>SQL Serverä½œä¸ºå•†ä¸šæ•°æ®åº“ï¼Œä¼šå°†è¡Œæ•°æ®å­˜å‚¨åœ¨8KBå¤§å°çš„é¡µï¼ˆpageï¼‰ä¸­ï¼Œæ¯ä¸€è¡Œçš„ç»“æ„åŒ…å«ä¸‰éƒ¨åˆ†ï¼š</span></p>\n<ol class=\"list-paddingleft-1\">\n<li><span>ä¸€ä¸ªå°å‹è¡Œå¤´éƒ¨ï¼ˆ4å­—èŠ‚ï¼Œå¤–åŠ ä¸€ä¸ªç©ºå€¼ä½å›¾ï¼‰ï¼›</span></li>\n<li><span>æŒ‰å®šä¹‰é¡ºåºæ’åˆ—çš„æ‰€æœ‰å›ºå®šé•¿åº¦åˆ—ï¼›</span></li>\n<li><span>é€šè¿‡â€œåç§»æ•°ç»„â€ï¼ˆoffset arrayï¼‰ç®¡ç†çš„å¯å˜é•¿åº¦åˆ—ã€‚</span></li>\n</ol>\n<p><span>æ³¨æ„ï¼š</span><strong><span>SQL Serverä¸å¯¹å›ºå®šé•¿åº¦ç±»å‹å¼ºåˆ¶æ‰§è¡Œå¯¹é½è§„åˆ™</span></strong><span>ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨è¡¨ä¸­å…ˆå®šä¹‰ä¸€ä¸ªBITåˆ—ã€å†å®šä¹‰ä¸€ä¸ªBIGINTåˆ—ã€æœ€åå†å®šä¹‰ä¸€ä¸ªBITåˆ—ï¼ŒSQL Serverä¼šå°†è¿™äº›å­—èŠ‚ç´§å¯†æ’åˆ—ï¼Œä¸ä¼šäº§ç”Ÿç©ºé—´æµªè´¹ã€‚</span></p>\n<p>&nbsp;</p>\n<p><img alt=\"QQæˆªå›¾20251023212807\" src=\"https://img2024.cnblogs.com/blog/257159/202510/257159-20251023213645491-1192768041.png\" /></p>\n<p><span>é€šè¿‡å®é™…ä»£ç æ¥çœ‹å…·ä½“æ•ˆæœï¼š</span></p>\n<pre class=\"highlighter-hljs\"><code>-- SQL Server ä»£ç \nCREATETABLE&nbsp;T_BadOrder\n(\n&nbsp; &nbsp; a&nbsp;BIT, &nbsp; &nbsp; &nbsp; &nbsp;-- å ç”¨1å­—èŠ‚\n&nbsp; &nbsp; b&nbsp;BIGINT, &nbsp; &nbsp;&nbsp;-- å ç”¨8å­—èŠ‚\n&nbsp; &nbsp; c&nbsp;BIT&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-- å ç”¨1å­—èŠ‚\n);\n\nINSERTINTO&nbsp;T_BadOrder&nbsp;VALUES&nbsp;(1,&nbsp;42,&nbsp;0);\n\n-- è®¡ç®—æ•°æ®å ç”¨ï¼ˆpayloadï¼‰å¤§å°ï¼šç»“æœä¸º10å­—èŠ‚\nSELECTDATALENGTH(a) +&nbsp;DATALENGTH(b) +&nbsp;DATALENGTH(c)&nbsp;AS&nbsp;payload_bytes\nFROM&nbsp;T_BadOrder;\n\n-- æŸ¥çœ‹ç‰©ç†è¡Œçš„å¹³å‡å¤§å°ï¼šç»“æœä¸º16å­—èŠ‚ï¼ˆ4å­—èŠ‚è¡Œå¤´éƒ¨ + 10å­—èŠ‚æ•°æ®è½½è· + 2å­—èŠ‚ç©ºå€¼ä½å›¾æ©ç çš„å­—æ®µè®¡æ•°ï¼‰\nSELECT&nbsp;avg_record_size_in_bytes\nFROM&nbsp;sys.dm_db_index_physical_stats(DB_ID(), OBJECT_ID('T_BadOrder'),&nbsp;-1,&nbsp;NULL,&nbsp;'DETAILED')\nWHERE&nbsp;alloc_unit_type_desc =&nbsp;'IN_ROW_DATA';</code></pre>\n<p><span>å¯ä»¥çœ‹åˆ°ï¼Œæ•°æ®å ç”¨æ€»è®¡10å­—èŠ‚ï¼ŒåŠ ä¸Šè¡Œå¤´éƒ¨å’Œç©ºå€¼ä½å›¾åï¼Œæ€»å¤§å°ä¸º16å­—èŠ‚ã€‚è¿™é‡Œçš„é‡ç‚¹æ˜¯ï¼šå­—æ®µaå’Œå­—æ®µbä¹‹é—´</span><strong><span>æ²¡æœ‰æ’å…¥ä»»ä½•å¡«å……å­—èŠ‚</span></strong><span>ã€‚</span></p>\n<h2><span><span>PostgreSQLä¸­çš„è¡Œå­˜å‚¨æœºåˆ¶</span></span></h2>\n<p><span>PostgreSQLä½œä¸ºå¼€æºæ•°æ®åº“ï¼Œè¡¨ä¸­çš„æ¯ä¸€è¡Œçš„ç»“æ„å¦‚ä¸‹ï¼š</span></p>\n<ol class=\"list-paddingleft-1\">\n<li><span>ä¸€ä¸ªå…ƒç»„å¤´éƒ¨ï¼ˆtuple headerï¼Œå›ºå®š23å­—èŠ‚ï¼‰ï¼ŒåŒ…å«MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰æ‰€éœ€çš„å…ƒæ•°æ®ï¼ˆå¦‚äº‹åŠ¡IDã€å¯è§æ€§æ ‡è®°ç­‰ï¼‰ï¼›</span></li>\n<li><span>ä¸€ä¸ªç©ºå€¼ä½å›¾ï¼›ï¼ˆè®°å½•å“ªäº›å­—æ®µæ˜¯ç©ºå€¼ï¼Œæ¯å­—æ®µå  1 ä½ï¼Œä¸è¶³ 1 å­—èŠ‚åˆ™è¡¥æ»¡ 1 å­—èŠ‚ï¼Œè¡¨å¦‚æœæœ‰8ä¸ªå­—æ®µå°±å ç”¨1 å­—èŠ‚ï¼‰ã€‚</span></li>\n<li><span>æŒ‰å®šä¹‰é¡ºåºæ’åˆ—çš„å­—æ®µå€¼ã€‚</span></li>\n</ol>\n<p><span>ä¸å•†ä¸šæ•°æ®åº“æœ€å¤§çš„ä¸åŒæ˜¯ï¼š</span><strong><span>PostgreSQLä¼šå¼ºåˆ¶è¦æ±‚æ•°æ®ç±»å‹å¯¹é½</span></strong><span>ï¼Œå…·ä½“è§„åˆ™å¦‚ä¸‹ï¼š</span></p>\n<ul class=\"list-paddingleft-1\">\n<li><span>BOOLEANç±»å‹éœ€è¦1å­—èŠ‚å¯¹é½ï¼›</span></li>\n<li><span>SMALLINTç±»å‹éœ€è¦2å­—èŠ‚å¯¹é½ï¼›</span></li>\n<li><span>INTç±»å‹éœ€è¦4å­—èŠ‚å¯¹é½ï¼›</span></li>\n<li><span>BIGINTã€double precisionï¼ˆåŒç²¾åº¦æµ®ç‚¹æ•°ï¼‰ã€timestampï¼ˆæ—¶é—´æˆ³ï¼‰ç±»å‹éœ€è¦8å­—èŠ‚å¯¹é½ã€‚</span></li>\n</ul>\n<p><span>å¦‚æœæŸä¸€å­—æ®µçš„èµ·å§‹ä½ç½®ä¸ç¬¦åˆå¯¹åº”çš„å¯¹é½è¦æ±‚ï¼ŒPostgreSQLä¼šè‡ªåŠ¨æ’å…¥â€œå¡«å……å­—èŠ‚â€ï¼ˆpadding bytesï¼‰ï¼Œå°†è¯¥å­—æ®µâ€œæ¨â€åˆ°æ­£ç¡®çš„å¯¹é½è¾¹ç•Œä¸Šã€‚æˆ‘ä»¬ç”¨è·Ÿå‰æ–‡ç›¸åŒçš„è¡¨ç»“æ„æ¥æµ‹è¯•ï¼š</span></p>\n<pre class=\"highlighter-hljs\"><code>-- PostgreSQL ä»£ç \nCREATE&nbsp;TABLE&nbsp;t_bad\n(\n&nbsp; &nbsp; a&nbsp;boolean, &nbsp; &nbsp;-- 1å­—èŠ‚ï¼ˆåç»­éœ€è¡¥7å­—èŠ‚å¡«å……ï¼‰\n&nbsp; &nbsp; b&nbsp;bigint, &nbsp; &nbsp;&nbsp;-- 8å­—èŠ‚ï¼ˆéœ€8å­—èŠ‚å¯¹é½ï¼Œå› æ­¤å‰ä¸€åˆ—è¦è¡¥å¡«å……ï¼‰\n&nbsp; &nbsp; c&nbsp;boolean&nbsp; &nbsp; &nbsp;-- 1å­—èŠ‚\n);\n\nINSERT&nbsp;INTO&nbsp;t_bad&nbsp;VALUES&nbsp;(true,&nbsp;42,&nbsp;false);\n\n-- æŸ¥çœ‹å®é™…è¡Œå¤§å°ï¼šç»“æœä¸º41å­—èŠ‚\nSELECT&nbsp;pg_column_size(t)&nbsp;AS&nbsp;row_bytes\nFROM&nbsp;t_bad t;</code></pre>\n<p><span>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå…ƒç»„å¤´éƒ¨ï¼ˆ23 å­—èŠ‚ï¼‰+ ç©ºå€¼ä½å›¾ï¼ˆ1 å­—èŠ‚ï¼‰= å‰ 24 å­—èŠ‚ï¼ŒPostgreSQLå…ˆä¸ºå­—æ®µaåˆ†é…1å­—èŠ‚ï¼Œç„¶åæ’å…¥7å­—èŠ‚å¡«å……ï¼Œè¿™æ ·å­—æ®µbæ‰èƒ½ä»8å­—èŠ‚å¯¹é½è¾¹ç•Œå¼€å§‹å­˜å‚¨ï¼›å­—æ®µbä¹‹åæ˜¯1å­—èŠ‚çš„å­—æ®µcã€‚ä»…æ•°æ®å ç”¨çš„å¤§å°å°±å·²ç»è¶…è¿‡äº†SQL Serverï¼Œè¿˜æ²¡ç®—ä¸ŠPostgreSQLæœ¬èº«æ›´å¤§çš„å…ƒç»„å¤´éƒ¨ã€‚</span></p>\n<p><span>ä½†å¦‚æœæˆ‘ä»¬æ ¹æ®â€œå¡«å……éœ€æ±‚â€è°ƒæ•´å­—æ®µçš„é¡ºåºï¼Œå­˜å‚¨å ç”¨ä¼šæ˜¾è‘—å‡å°‘ï¼š</span></p>\n<pre class=\"highlighter-hljs\"><code>-- PostgreSQL ä»£ç \nCREATE&nbsp;TABLE&nbsp;t_good\n(\n&nbsp; &nbsp; b&nbsp;bigint, &nbsp; &nbsp;&nbsp;-- 8å­—èŠ‚\n&nbsp; &nbsp; a&nbsp;boolean, &nbsp; &nbsp;-- 1å­—èŠ‚ï¼ˆæ— éœ€å¡«å……ï¼ï¼‰\n&nbsp; &nbsp; c&nbsp;boolean&nbsp; &nbsp; &nbsp;-- 1å­—èŠ‚\n);\n\nINSERT&nbsp;INTO&nbsp;t_good&nbsp;VALUES&nbsp;(42,&nbsp;true,&nbsp;false);\n\n-- æŸ¥çœ‹å®é™…è¡Œå¤§å°ï¼šç»“æœä¸º34å­—èŠ‚ï¼ˆå‡å°‘äº†7å­—èŠ‚ï¼Œå› ä¸ºæ— éœ€ä¸ºä»»ä½•åˆ—æ’å…¥å¡«å……ï¼‰\nSELECT&nbsp;pg_column_size(t)&nbsp;AS&nbsp;row_bytes\nFROM&nbsp;t_good t;</code></pre>\n<p><span>è°ƒæ•´åï¼Œè¡Œå¤§å°ä»41å­—èŠ‚é™è‡³34å­—èŠ‚ï¼Œæ ¸å¿ƒåŸå› å°±æ˜¯å­—æ®µaä¸å†éœ€è¦å¡«å……å­—èŠ‚ï¼Œå› ä¸ºå­—æ®µbï¼ˆ8å­—èŠ‚ï¼‰ç»“æŸåï¼Œåˆšå¥½æ»¡è¶³å­—æ®µaï¼ˆ1å­—èŠ‚ï¼‰çš„å¯¹é½è¦æ±‚ã€‚</span></p>\n<p><strong><span>å…³é”®åŸåˆ™ï¼šå­—æ®µçš„é¡ºåºåº”ä»â€œå ç”¨ç©ºé—´æœ€å¤§â€åˆ°â€œå ç”¨ç©ºé—´æœ€å°â€æ’åˆ—ï¼</span></strong></p>\n<p><strong><span>8å­—èŠ‚å¯¹é½è§„åˆ™</span></strong><span>ï¼š</span><code><span>bigint</span></code><span>ç±»å‹ï¼ˆ8å­—èŠ‚ï¼‰è¦æ±‚å…¶</span><strong><span>èµ·å§‹ä½ç½®å¿…é¡»æ˜¯8çš„å€æ•°</span></strong><span>ï¼ˆæ¯”å¦‚8ã€16ã€24ã€32...ï¼‰ã€‚è¿™æ˜¯ç¡¬ä»¶å±‚é¢çš„ä¼˜åŒ–ã€‚</span></p>\n<h3><span><span>å…·ä½“ä½ç½®è®¡ç®—</span></span></h3>\n<p><span>æˆ‘ä»¬æŒ‰å­—æ®µçš„å®šä¹‰é¡ºåºï¼ˆa â†’ b â†’ cï¼‰é€æ­¥è®¡ç®—æ¯ä¸ªå­—æ®µçš„â€œèµ·å§‹ä½ç½®â€ï¼š</span></p>\n<ol class=\"list-paddingleft-1\">\n<li>\n<p><strong><span>å­—æ®µaï¼ˆbooleanï¼‰çš„ä½ç½®</span></strong><span>ï¼š</span><span><br /></span><span>å‰24å­—èŠ‚æ˜¯å¤´éƒ¨å’Œç©ºå€¼ä½å›¾ï¼Œæ‰€ä»¥åˆ—aä»</span><strong><span>ç¬¬24å­—èŠ‚</span></strong><span>å¼€å§‹å­˜å‚¨ã€‚</span><span><br /></span><code><span>boolean</span></code><span>å 1å­—èŠ‚ï¼Œå› æ­¤å­—æ®µaå ç”¨ç¬¬24å­—èŠ‚ï¼Œç»“æŸåœ¨</span><strong><span>ç¬¬24å­—èŠ‚</span></strong><span>ï¼ˆ24â†’24ï¼Œå…±1å­—èŠ‚ï¼‰ã€‚</span></p>\n\n\n</li>\n<li>\n<p><strong><span>å­—æ®µbï¼ˆbigintï¼‰çš„ä½ç½®</span></strong><span>ï¼š</span><span><br /></span><span>å­—æ®µaç»“æŸåï¼Œä¸‹ä¸€ä¸ªå¯ç”¨çš„èµ·å§‹ä½ç½®æ˜¯</span><strong><span>ç¬¬25å­—èŠ‚</span></strong><span>ã€‚</span><span><br /></span><span>ä½†</span><code><span>bigint</span></code><span>è¦æ±‚èµ·å§‹ä½ç½®æ˜¯8çš„å€æ•°ï¼ˆ8çš„å€æ•°ï¼š8ã€16ã€24ã€32ã€40...ï¼‰ã€‚ &nbsp;ç¬¬25å­—èŠ‚ä¸æ˜¯8çš„å€æ•°ï¼ˆ25Ã·8=3.125ï¼Œä½™æ•°1ï¼‰ï¼Œä¸ç¬¦åˆè¦æ±‚ã€‚ &nbsp;å› æ­¤éœ€è¦å¡«å……å­—èŠ‚ï¼Œç›´åˆ°ä¸‹ä¸€ä¸ª8çš„å€æ•°ä½ç½®ã€‚æœ€è¿‘çš„8çš„å€æ•°æ˜¯</span><strong><span>ç¬¬32å­—èŠ‚</span></strong><span>ï¼ˆ8Ã—4=32ï¼‰ã€‚ ä»ç¬¬25å­—èŠ‚åˆ°ç¬¬32å­—èŠ‚ï¼Œä¸­é—´æœ‰32-25=7å­—èŠ‚ï¼Œè¿™å°±æ˜¯éœ€è¦å¡«å……çš„</span><strong><span>7å­—èŠ‚</span></strong><span>ã€‚æ‰€ä»¥å­—æ®µbä»ç¬¬32å­—èŠ‚å¼€å§‹ï¼Œå ç”¨8å­—èŠ‚ï¼ˆ32â†’39å­—èŠ‚ï¼‰ã€‚</span></p>\n\n\n</li>\n<li>\n<p><strong><span>å­—æ®µcï¼ˆbooleanï¼‰çš„ä½ç½®</span></strong><span>ï¼š</span><span><br /></span><span>å­—æ®µbç»“æŸåœ¨ç¬¬39å­—èŠ‚ï¼Œä¸‹ä¸€ä¸ªä½ç½®æ˜¯ç¬¬40å­—èŠ‚ã€‚</span><span><br /></span><code><span>boolean</span></code><span>åªéœ€è¦1å­—èŠ‚å¯¹é½ï¼ˆä»»ä½•ä½ç½®éƒ½å¯ä»¥ï¼‰ï¼Œå› æ­¤ç›´æ¥ä»ç¬¬40å­—èŠ‚å¼€å§‹ï¼Œå ç”¨1å­—èŠ‚ï¼ˆ40â†’40å­—èŠ‚ï¼‰ã€‚</span></p>\n\n\n</li>\n\n</ol>\n<h3><span><span>æ€»å¤§å°éªŒè¯</span></span></h3>\n<p><span>æ•´ä¸ªè¡Œçš„æ€»å¤§å°=å¤´éƒ¨ï¼ˆ23ï¼‰+ ç©ºå€¼ä½å›¾ï¼ˆ1ï¼‰+ å­—æ®µaï¼ˆ1ï¼‰+ å¡«å……ï¼ˆ7ï¼‰+ å­—æ®µbï¼ˆ8ï¼‰+ å­—æ®µcï¼ˆ1ï¼‰= 23+1+1+7+8+1=41å­—èŠ‚ã€‚</span></p>\n<h3><span><span>è°ƒæ•´é¡ºåºåä¸éœ€è¦å¡«å……</span></span></h3>\n<p><span>å¦‚æœæŠŠ</span><code><span>bigint</span></code><span>ï¼ˆbï¼‰æ”¾åœ¨ç¬¬ä¸€ä¸ªå­—æ®µï¼Œæƒ…å†µå°±å˜äº†ï¼š</span></p>\n<ul class=\"list-paddingleft-1\">\n<li>\n<span>å­—æ®µbä»ç¬¬24å­—èŠ‚å¼€å§‹ï¼ˆå¤´éƒ¨23+ç©ºå€¼ä½å›¾1=24ï¼‰ï¼Œ<span>24</span>æ˜¯8çš„å€æ•°ï¼ˆ24Ã·8=3ï¼‰ï¼Œç¬¦åˆ</span><code><span>bigint</span></code><span>çš„å¯¹é½è¦æ±‚ï¼Œæ— éœ€å¡«å……ã€‚</span>\n</li>\n<li>\n<span>å­—æ®µbå ç”¨24â†’31å­—èŠ‚ï¼ˆ8å­—èŠ‚ï¼‰ï¼Œä¹‹åå­—æ®µaï¼ˆbooleanï¼‰ä»32å­—èŠ‚å¼€å§‹ï¼ˆ1å­—èŠ‚å¯¹é½ï¼Œæ— éœ€å¡«å……ï¼‰ï¼Œå­—æ®µcä»33å­—èŠ‚å¼€å§‹ï¼Œæ€»å¤§å°å‡å°‘7å­—èŠ‚ã€‚</span>\n</li>\n\n</ul>\n<h2><span><span>å¯å˜é•¿åº¦å­—æ®µçš„å½±å“</span></span></h2>\n<p><span>å½“è¡¨ä¸­åŒ…å«å¯å˜é•¿åº¦å­—æ®µæ—¶ï¼Œæƒ…å†µæ›´æœ‰æ„æ€ã€‚ä¸¤è€…çš„å¤„ç†å·®å¼‚å¦‚ä¸‹ï¼š</span></p>\n<ul class=\"list-paddingleft-1\">\n<li>\n<span>åœ¨SQL Serverä¸­ï¼Œå¯å˜é•¿åº¦æ•°æ®é€šè¿‡è¡Œæœ«å°¾çš„â€œåç§»æ•°ç»„â€ç®¡ç†ï¼›</span>\n</li>\n<li>\n<span>åœ¨PostgreSQLä¸­ï¼Œæ¯ä¸€ä¸ªå¯å˜é•¿åº¦å€¼ï¼ˆå¦‚TEXTã€VARCHARã€BYTEAã€NUMERICç­‰ï¼‰éƒ½è‡ªå¸¦ä¸€ä¸ª4å­—èŠ‚çš„â€œå˜é•¿å¤´éƒ¨â€ï¼ˆvarlena headerï¼‰ã€‚</span>\n</li>\n\n</ul>\n<p><span>æˆ‘ä»¬é€šè¿‡ä¸‹é¢ä¸¤ä¸ªè¡¨çš„è¡¨ç»“æ„å¯¹æ¯”æ¥çœ‹çœ‹å®é™…å½±å“ï¼š</span></p>\n<pre class=\"highlighter-hljs\"><code>-- PostgreSQL ä»£ç ï¼šåˆ—é¡ºåºä¸åˆç†çš„è¡¨\nCREATETABLE&nbsp;bad_order\n(\n&nbsp; &nbsp; a&nbsp;boolean,\n&nbsp; &nbsp; b&nbsp;bigint,\n&nbsp; &nbsp; c&nbsp;int,\n&nbsp; &nbsp; d&nbsp;timestamp,\n&nbsp; &nbsp; e&nbsp;smallint,\n&nbsp; &nbsp; f&nbsp;varchar(20),\n&nbsp; &nbsp; g&nbsp;numeric(18,2)\n);\n\n-- PostgreSQL ä»£ç ï¼šåˆ—é¡ºåºåˆç†çš„è¡¨\nCREATETABLE&nbsp;good_order\n(\n&nbsp; &nbsp; b&nbsp;bigint,\n&nbsp; &nbsp; d&nbsp;timestamp,\n&nbsp; &nbsp; c&nbsp;int,\n&nbsp; &nbsp; e&nbsp;smallint,\n&nbsp; &nbsp; a&nbsp;boolean,\n&nbsp; &nbsp; g&nbsp;numeric(18,2),\n&nbsp; &nbsp; f&nbsp;varchar(20)\n);\n\n-- æ’å…¥100ä¸‡æ¡æµ‹è¯•æ•°æ®\nINSERTINTO&nbsp;bad_order (a,b,c,d,e,f,g)\nSELECT\n&nbsp; (i %&nbsp;2&nbsp;=&nbsp;0), &nbsp;-- å¸ƒå°”å€¼ï¼štrue/falseäº¤æ›¿\n&nbsp; (random()*1e9)::bigint, &nbsp;-- éšæœºå¤§æ•´æ•°\n&nbsp; (random()*1e5)::int, &nbsp; &nbsp;&nbsp;-- éšæœºæ•´æ•°\n&nbsp; to_timestamp(1420070400&nbsp;+ (random()*1e6)::int), &nbsp;-- éšæœºæ—¶é—´æˆ³\n&nbsp; (random()*32000)::int::smallint, &nbsp;-- éšæœºå°æ•´æ•°\nsubstr(md5(random()::text),&nbsp;1, (random()*20)::int), &nbsp;-- éšæœºé•¿åº¦å­—ç¬¦ä¸²ï¼ˆ1-20å­—ç¬¦ï¼‰\n&nbsp; ((random()*1e7)::bigint)::numeric&nbsp;/&nbsp;100.0-- éšæœºæ•°å€¼ï¼ˆä¿ç•™2ä½å°æ•°ï¼‰\nFROM&nbsp;generate_series(1,1000000) i; &nbsp;-- ç”Ÿæˆ1-1000000çš„åºåˆ—ä½œä¸ºå¾ªç¯å˜é‡\n\n-- å°†bad_orderçš„æ•°æ®æŒ‰åˆç†åˆ—é¡ºåºæ’å…¥good_order\nINSERTINTO&nbsp;good_order\nSELECT&nbsp;b,d,c,e,a,g,f&nbsp;FROM&nbsp;bad_order;\n\n-- å¯¹æ¯”ä¸¤å¼ è¡¨çš„å¹³å‡è¡Œå¤§å°\nSELECT'bad_order'AS&nbsp;tbl,&nbsp;avg(pg_column_size(t))&nbsp;AS&nbsp;avg_row_bytes&nbsp;FROM&nbsp;bad_order t\nUNIONALL\nSELECT'good_order',&nbsp;avg(pg_column_size(t))&nbsp;FROM&nbsp;good_order t;</code></pre>\n<p><span>å®é™…æµ‹è¯•ç»“æœæ˜¾ç¤ºï¼š</span><code><span>bad_order</span></code><span>å› åˆ—é¡ºåºä¸åˆç†å’Œå¯¹é½é—®é¢˜ï¼Œå¹³å‡æ¯è¡Œå ç”¨77å­—èŠ‚ï¼›è€Œ</span><code><span>good_order</span></code><span>å°†â€œå®½å­—èŠ‚å›ºå®šé•¿åº¦å­—æ®µâ€æ”¾åœ¨å‰é¢ã€â€œå¯å˜é•¿åº¦å­—æ®µâ€æ”¾åœ¨æœ€åï¼Œæœ€å¤§é™åº¦å‡å°‘äº†å¡«å……ï¼Œå¹³å‡æ¯è¡Œä»…å ç”¨66å­—èŠ‚ã€‚</span></p>\n<h2><span><span>ä¸ºä»€ä¹ˆPostgreSQLçš„è¡Œå­˜å‚¨é€šå¸¸æ›´å¤§ï¼Ÿ</span></span></h2>\n<p><span>è¿ç§»åPostgreSQLè¡Œå¤§å°è¶…è¿‡å•†ä¸šæ•°æ®åº“ï¼Œä¸»è¦æºäºä¸‰ä¸ªæ ¸å¿ƒå·®å¼‚ï¼š</span></p>\n<ol class=\"list-paddingleft-1\">\n<li><strong><span>å…ƒç»„å¤´éƒ¨å¤§å°</span></strong><span>ï¼šPostgreSQLçš„è¡Œå¤´éƒ¨åŒ…å«çº¦23å­—èŠ‚çš„MVCCå…ƒæ•°æ®ï¼Œè€ŒSQL Serverä»…ä¸º4å­—èŠ‚ï¼›</span></li>\n<li><strong><span>å¯¹é½å¡«å……</span></strong><span>ï¼šPostgreSQLä¼šæ’å…¥å¡«å……å­—èŠ‚ä»¥ä¿è¯å›ºå®šé•¿åº¦ç±»å‹çš„å¯¹é½ï¼Œè€Œå•†ä¸šæ•°æ®åº“åˆ™ä¸ä¼šï¼›</span></li>\n<li><strong><span>å¯å˜é•¿åº¦å­—æ®µå¼€é”€</span></strong><span>ï¼šPostgreSQLä¸­æ¯ä¸ªå¯å˜é•¿åº¦å­—æ®µéƒ½è‡ªå¸¦4å­—èŠ‚çš„å˜é•¿å¤´éƒ¨ï¼Œå•†ä¸šæ•°æ®åº“åˆ™æ— æ­¤å¼€é”€ã€‚</span></li>\n</ol>\n<h3><span><span>PostgreSQLä¼˜åŒ–å­˜å‚¨ç©ºé—´çš„æ ¸å¿ƒé€»è¾‘åŒ…æ‹¬ä¸‹é¢å‡ ä¸ªæ–¹é¢ï¼š</span></span></h3>\n<ul class=\"list-paddingleft-1\">\n<li><span>å…ˆæ”¾â€œå®½å­—èŠ‚å›ºå®šé•¿åº¦åˆ—â€ï¼ˆå¦‚BIGINTã€timestampï¼‰ï¼›</span></li>\n<li><span>å†æ”¾â€œä¸­ç­‰å­—èŠ‚å›ºå®šé•¿åº¦åˆ—â€ï¼ˆå¦‚INTï¼‰ï¼›</span></li>\n<li><span>æ¥ç€æ”¾â€œå°å­—èŠ‚å›ºå®šé•¿åº¦åˆ—â€ï¼ˆå¦‚SMALLINTã€BOOLEANï¼‰ï¼›</span></li>\n<li><span>æœ€åæ”¾â€œå¯å˜é•¿åº¦åˆ—â€ï¼ˆå¦‚VARCHARã€TEXTã€NUMERICï¼‰ã€‚</span></li>\n</ul>\n<h2><span><span>æ€»ç»“</span></span></h2>\n<p><span>ä»<span>å•†ä¸šæ•°æ®åº“</span>è¿ç§»åˆ°å¼€æºæ•°æ®åº“PostgreSQLåè¡¨ä½“ç§¯å˜å¤§æ˜¯ä¸ºäº†æ”¯æ’‘PostgreSQLçš„æ ¸å¿ƒç‰¹æ€§ï¼ˆMVCCï¼‰å’Œè·¨æ¶æ„çš„æ€§èƒ½ç¨³å®šæ€§ã€‚è¿™ä¹Ÿæ„å‘³ç€ï¼Œæˆ‘ä»¬ä¸èƒ½æœŸæœ›å•†ä¸šæ•°æ®åº“å’Œå¼€æºæ•°æ®åº“ä¸¤è€…çš„å­˜å‚¨å¤§å°å®Œå®Œå…¨å…¨â€œä¸€ä¸€å¯¹åº”â€ï¼Œè€Œä¸”å¼€æºæ•°æ®åº“è·Ÿå•†ä¸šæ•°æ®åº“ç›¸æ¯”èµ·æ¥è¿˜æ˜¯æœ‰ä¸€å®šçš„å·®è·ã€‚</span></p>\n<p>&nbsp;</p>\n<p><img alt=\"\" class=\"medium-zoom-image\" src=\"https://img2024.cnblogs.com/blog/257159/202409/257159-20240908204310924-1005667056.png\" /></p>\n<p><strong>æœ¬æ–‡ç‰ˆæƒå½’ä½œè€…æ‰€æœ‰ï¼Œæœªç»ä½œè€…åŒæ„ä¸å¾—è½¬è½½ã€‚</strong></p>\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2025-12-31 08:00</span>&nbsp;\n<a href=\"https://www.cnblogs.com/lyhabc\">æ¡¦ä»”</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">18</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "2025 å¹´çš„ PHP è™½ä½è°ƒå†…æ•›æ²¡å¤§æ”¹ ä½†æ˜¯æ›´å¥½ç”¨äº†",
      "link": "https://www.cnblogs.com/catchadmin/p/19424111",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/catchadmin/p/19424111\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2025-12-31 08:00\">\n    <span>2025 å¹´çš„ PHP è™½ä½è°ƒå†…æ•›æ²¡å¤§æ”¹ ä½†æ˜¯æ›´å¥½ç”¨äº†</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h2 id=\"2025-å¹´-php-çš„åå¸¸è¯†å˜åŒ–\">2025 å¹´ PHP çš„â€œåå¸¸è¯†â€å˜åŒ–</h2>\n<p>2025 å¹´çš„ PHP å¹¶æ²¡æœ‰ä¸Šæ¼”â€œè„±èƒæ¢éª¨â€ã€‚ç›¸åï¼Œå®ƒåšçš„æ˜¯æ›´å·¥ç¨‹åŒ–ã€æ›´å®åœ¨çš„æ”¹è¿›ï¼šæŠŠé‚£äº›æœ€å®¹æ˜“å‰²ä¼¤äººçš„ç»†èŠ‚ä¸€ç‚¹ç‚¹æ‰“ç£¨å¹³æ•´ã€‚</p>\n<p>ä½ åªè¦çœŸçš„åœ¨ç”Ÿäº§ç¯å¢ƒé‡Œè·‘ PHP ï¼Œå°±ä¼šåœ¨è¿™äº›åœ°æ–¹æ„Ÿå—åˆ°å˜åŒ–ï¼š</p>\n<ul>\n<li>å†™é¢†åŸŸè§„åˆ™æ›´é¡ºæ‰‹ï¼šä¸å¿…é ä¸€å † getter/setter æ‰èƒ½æŠŠçº¦æŸè®²æ¸…æ¥šã€‚</li>\n<li>å·¥å…·é“¾æ›´â€œè¾ƒçœŸâ€ï¼šå¯¹æ­£ç¡®æ€§æ›´æœ‰ç«‹åœºï¼Œå¯¹â€œåæ­£èƒ½è·‘â€æ›´ä¸è€çƒ¦ã€‚</li>\n<li>æ¡†æ¶ç”Ÿæ€ç»§ç»­æŠ¬é«˜åŸºçº¿ï¼š PHP 8.2+ å·²ç»ä¸æ˜¯å°é²œï¼Œè€Œæ˜¯é»˜è®¤é—¨æ§›ã€‚æ¯”å¦‚ Laravel 12 çš„æœ€ä½ç‰ˆæœ¬ä»æ˜¯ PHP 8.2ã€‚ (Laravel)</li>\n<li>PHP 8.5 äº 2025 å¹´ 11 æœˆå‘å¸ƒï¼Œå®šä½å¹¶ä¸ç‚«é…·ï¼Œå´å¾ˆåƒç”Ÿäº§åŠ›æ”¾å¤§å™¨â€”â€”å‰ææ˜¯ä½ æ„¿æ„é‡‡ç”¨å®ƒæ›´é¼“åŠ±çš„å†™æ³•ã€‚ (PHP)</li>\n</ul>\n<p>è¿™ä¸æ˜¯åŠŸèƒ½æ¸…å•ï¼Œè€Œæ˜¯â€œå·¥ç¨‹ä½“æ„Ÿæ€»ç»“â€ï¼šå“ªäº›å˜åŒ–çœŸçš„æ”¹å˜äº†æ—¥å¸¸å†™ä»£ç çš„æ–¹å¼ï¼Œå“ªäº›åšæ³•å‡å°‘äº†äº‹æ•…ï¼Œä»¥åŠå“ªäº›æ•™è®­å€¼å¾—æ›´æ—©æ¥å—ã€‚</p>\n<p><a href=\"https://catchadmin.com/post/2025-12/php-in-2025-what-changed-what-stuck-next-time\" rel=\"noopener nofollow\" target=\"_blank\">åŸæ–‡ 2025 å¹´çš„ PHPï¼šæ²¡å¤§æ”¹ï¼Œå´æ›´å¥½ç”¨äº†</a></p>\n<h2 id=\"è¶‹åŠ¿-1-php-84-è®©è§„çŸ©æœ´ç´ çš„ä»£ç æ›´å®¹æ˜“å†™\">è¶‹åŠ¿ #1ï¼š PHP 8.4 è®©â€œè§„çŸ©ã€æœ´ç´ â€çš„ä»£ç æ›´å®¹æ˜“å†™</h2>\n<p>PHP 8.4 è™½ç„¶åœ¨ 2024 å¹´æœ«å‘å¸ƒï¼Œä½† 2025 å¹´æ‰åœ¨å¤§å¤šæ•°å›¢é˜Ÿé‡Œâ€œè½åœ°â€ã€‚åŸå› å¾ˆç®€å•ï¼šç”Ÿäº§å‡çº§ä»æ¥ä¸æ˜¯ä¸€é”®å®Œæˆã€‚æœ€å…³é”®çš„å˜åŒ–æ˜¯ property hooks ä¸ asymmetric visibilityã€‚ (PHP)</p>\n<h3 id=\"property-hooksæŠŠè§„åˆ™è´´åœ¨æ•°æ®æ—è¾¹\">Property hooksï¼šæŠŠè§„åˆ™è´´åœ¨æ•°æ®æ—è¾¹</h3>\n<p>ä»¥å‰ä½ è¦è¡¨è¾¾ä¸å˜å¼ï¼Œå¸¸å¸¸ä¼šå†™æˆï¼šç§æœ‰å±æ€§ + getter/setterã€‚å®ƒå¹¶ä¸é”™è¯¯ï¼Œä½†å¾ˆå®¹æ˜“è®©ä¸€ä¸ªç®€å•æ¦‚å¿µå˜å¾—è‡ƒè‚¿ã€ä»ªå¼æ„Ÿè¿‡å¼ºã€‚</p>\n<p>Property hooks çš„ä»·å€¼åœ¨äºï¼šä½ å¯ä»¥åœ¨â€œè¯»/å†™å±æ€§çš„é‚£ä¸€åˆ»â€æŠŠè§„åˆ™è®²æ˜ç™½ï¼Œä¸å†ä¾èµ–å¤§é‡æ ·æ¿ã€‚</p>\n<pre><code class=\"language-php\">&lt;?php\nfinal class Money\n{\n    public function __construct(\n        public string $currency,\n        public int $amountCents\n    ) {\n        if ($this-&gt;amountCents &lt; 0) {\n            throw new InvalidArgumentException(\"Amount cannot be negative.\");\n        }\n        if (!preg_match('/^[A-Z]{3}$/', $this-&gt;currency)) {\n            throw new InvalidArgumentException(\"Currency must be ISO-4217 format.\");\n        }\n    }\n}\nfinal class Invoice\n{\n    public function __construct(\n        public Money $total\n    ) {}\n    public Money $paid\n    {\n        set (Money $value) {\n            if ($value-&gt;currency !== $this-&gt;total-&gt;currency) {\n                throw new InvalidArgumentException(\"Currency mismatch.\");\n            }\n            if ($value-&gt;amountCents &gt; $this-&gt;total-&gt;amountCents) {\n                throw new InvalidArgumentException(\"Overpayment is not allowed.\");\n            }\n            $this-&gt;paid = $value;\n        }\n    }\n}\n</code></pre>\n<p>å·¥ç¨‹ä¸Šçš„ç›´è§‚æ”¶ç›Šæ˜¯ï¼šæ ¡éªŒä¸å†æ•£è½åœ¨å„ä¸ª service é‡Œï¼Œè€Œèƒ½æ›´è‡ªç„¶åœ°è´´è¿‘å®ƒè¦ä¿æŠ¤çš„çŠ¶æ€ã€‚</p>\n<p>ç°åœºæ•™è®­ï¼šç”¨ property hooks åšæ ¡éªŒå¾ˆåˆé€‚ï¼›ä½†å¦‚æœä½ æ‹¿å®ƒåšæ•°æ®åº“ lazy-loading ä¹‹ç±»çš„éšå¼ IO ï¼Œä½ ä¼šå¾—åˆ°æ›´éš¾è¿½è¸ªçš„è¡Œä¸ºä¸æ›´ç—›è‹¦çš„è°ƒè¯•ä½“éªŒã€‚</p>\n<h3 id=\"asymmetric-visibilityè¯»ç»™å¤–éƒ¨çœ‹å†™ç•™ç»™å†…éƒ¨åš\">Asymmetric visibilityï¼šè¯»ç»™å¤–éƒ¨çœ‹ï¼Œå†™ç•™ç»™å†…éƒ¨åš</h3>\n<p>å¾ˆå¤šé¢†åŸŸå¯¹è±¡éƒ½æƒ³è¦â€œå¯¹å¤–å¯è¯»ã€å¯¹å†…å¯å†™â€ã€‚è¿‡å»ä½ ä¸æ˜¯å¼€ setter ï¼Œå°±æ˜¯ç»•è·¯ã€‚ç°åœ¨ PHP 8.4 æŠŠè¿™ç§éœ€æ±‚å˜å¾—æ›´ç›´ç™½ã€‚ (PHP)</p>\n<pre><code class=\"language-php\">&lt;?php\nfinal class Shipment\n{\n    public function __construct(\n        public private(set) string $status = 'CREATED',\n    ) {}\n    public function markInTransit(): void\n    {\n        $this-&gt;status = 'IN_TRANSIT';\n    }\n}\n</code></pre>\n<p>å®ƒå‡å°‘äº†é‚£ç§â€œä¸ºäº† hydration/ä¸ºäº†æµ‹è¯•â€è€Œæš´éœ² setter çš„å†²åŠ¨â€”â€”è€Œè¿™ç±»å†²åŠ¨å¾€å¾€ä¼šæ— æ„é—´æ‰©å¤§ç³»ç»Ÿçš„å¯å˜æ€§ä¸æ¥å£é¢ã€‚</p>\n<h2 id=\"è¶‹åŠ¿-2-php-85-æ›´åƒä¸€æ¬¡å†™èµ·æ¥æ›´èˆ’æœçš„å‡çº§\">è¶‹åŠ¿ #2ï¼š PHP 8.5 æ›´åƒä¸€æ¬¡â€œå†™èµ·æ¥æ›´èˆ’æœâ€çš„å‡çº§</h2>\n<p>PHP 8.5 åœ¨ 2025 å¹´ 11 æœˆ 20 æ—¥å‘å¸ƒã€‚ (PHP)<br />\nç›¸æ¯”è½°åŠ¨æ€§çš„è¯­æ³•é©æ–°ï¼Œå®ƒæ›´åƒåœ¨å¼€å‘ä½“éªŒä¸ŠåšåŠ æ³•ï¼š pipe operator ï¼Œä»¥åŠæ›´é¡ºæ‰‹çš„ clone-and-modifyï¼ˆç¤¾åŒºå¸¸è¯´ â€œclone withâ€ï¼‰ã€‚ (stitcher.io)</p>\n<h3 id=\"pipe-operatoræŠŠæ•°æ®å¤„ç†å†™æˆæ¸…æ™°çš„æµæ°´çº¿\">Pipe operatorï¼šæŠŠæ•°æ®å¤„ç†å†™æˆæ¸…æ™°çš„æµæ°´çº¿</h3>\n<p>ä¸šåŠ¡ä»£ç é‡Œï¼Œæ•°æ®å˜æ¢éå¸¸å¸¸è§ã€‚è¿‡å»ä½ è¦ä¹ˆå†™æˆåµŒå¥—è°ƒç”¨ï¼Œè¦ä¹ˆå †ä¸­é—´å˜é‡ã€‚ Pipe çš„å¥½å¤„æ˜¯ï¼šæŒ‰æ­¥éª¤é˜…è¯»æ›´è‡ªç„¶ã€‚</p>\n<pre><code class=\"language-php\">&lt;?php\nfunction trimAll(array $xs): array {\n    return array_map('trim', $xs);\n}\nfunction dropEmpty(array $xs): array {\n    return array_values(array_filter($xs, fn($x) =&gt; $x !== ''));\n}\nfunction unique(array $xs): array {\n    return array_values(array_unique($xs));\n}\n$tags = ['  php ', '', 'backend', 'PHP', 'backend '];\n$normalized = $tags\n    |&gt; trimAll(...)\n    |&gt; dropEmpty(...)\n    |&gt; array_map(strtolower(...), ...)\n    |&gt; unique(...);\nprint_r($normalized);\n</code></pre>\n<p>ç°åœºæ•™è®­ï¼šæ¯ä¸€æ­¥è¦â€œå°ä¸”å‘½åæ˜ç¡®â€ã€‚å¦‚æœä½ ä¸€è·¯ pipe è¿›åŒ¿åå‡½æ•°çš„å¤§æ®µé€»è¾‘ï¼Œå¯è¯»æ€§ä¼šåè¿‡æ¥ä¸‹é™ã€‚</p>\n<h3 id=\"uri-æ‰©å±•å°‘å†™æ­£åˆ™å¤šç”¨æ ‡å‡†è§£æ\">URI æ‰©å±•ï¼šå°‘å†™æ­£åˆ™ï¼Œå¤šç”¨æ ‡å‡†è§£æ</h3>\n<p>å‘å¸ƒå…¬å‘Šæåˆ°ä¸“é—¨çš„ URI æ‰©å±•ã€‚ (PHP)<br />\nåªè¦ä½ åšè¿‡é‡å®šå‘ã€å›è°ƒã€ OAuth ã€æ”¯ä»˜ã€ webhook ï¼Œä½ å°±çŸ¥é“ URL è§£æçš„å‘æœ‰å¤šâ€œé¡½å›ºâ€ã€‚æ–¹å‘ä¸Šçš„ä»·å€¼å¾ˆæ˜ç¡®ï¼šç”¨æ ‡å‡†ç»„ä»¶æ›¿æ¢é›¶æ•£ regexã€‚</p>\n<h3 id=\"clone-and-modifyæ›´å®‰å…¨çš„å¤åˆ¶åå¾®è°ƒ\">clone-and-modifyï¼šæ›´å®‰å…¨çš„â€œå¤åˆ¶åå¾®è°ƒâ€</h3>\n<p>DTO ã€ command ã€ event è¿™äº›â€œè¿‘ä¼¼ä¸å¯å˜å¯¹è±¡â€è¶Šæ¥è¶Šå¸¸è§ã€‚è¿‡å»ä½ è¦ä¹ˆ clone åå†æ‰‹åŠ¨æ”¹ï¼ˆå®¹æ˜“æ¼ï¼‰ï¼Œè¦ä¹ˆåˆ°å¤„å†™ withX()ã€‚</p>\n<p>PHP 8.5 æ˜ç¡®æ”¯æŒåœ¨ cloning åŒæ—¶ä¿®æ”¹å±æ€§ã€‚ (PHP)<br />\nè¿™ä¼šé¼“åŠ±å›¢é˜Ÿæ›´å¤šä½¿ç”¨â€œå¤åˆ¶åå°æ”¹åŠ¨â€çš„å®‰å…¨æ¨¡å¼ã€‚</p>\n<pre><code class=\"language-php\">&lt;?php\nfinal class CustomerProfile\n{\n    public function __construct(\n        public string $id,\n        public string $email,\n        public bool $marketingOptIn,\n    ) {}\n}\n$old = new CustomerProfile('c-123', 'old@mail.com', false);\n// Pseudocode-ish shape for the pattern:\n$new = clone $old;\n$new-&gt;email = 'new@mail.com';\n</code></pre>\n<h2 id=\"è¶‹åŠ¿-3æ¡†æ¶æŠŠé—¨æ§›æŠ¬é«˜äº†ä½ çš„ä¾èµ–ä¹Ÿä¼šè¢«ä¸€èµ·æ‹–ç€èµ°\">è¶‹åŠ¿ #3ï¼šæ¡†æ¶æŠŠé—¨æ§›æŠ¬é«˜äº†ï¼Œä½ çš„ä¾èµ–ä¹Ÿä¼šè¢«ä¸€èµ·æ‹–ç€èµ°</h2>\n<h3 id=\"laravelé ç¨³å®šä¸æ— èŠèµ¢\">Laravelï¼šé â€œç¨³å®šä¸æ— èŠâ€èµ¢</h3>\n<p>Laravel 12 å»¶ç»­ç»´æŠ¤å¯¼å‘ï¼ŒåŒæ—¶ä¿æŒ PHP 8.2+ åŸºçº¿ã€‚ (Laravel)<br />\nç°å®å½±å“å¾ˆç›´æ¥ï¼šåœåœ¨ PHP 8.0/8.1 çš„æœåŠ¡ï¼Œä¼šè¶Šæ¥è¶Šéš¾äº«å—ç”Ÿæ€æ›´æ–°ä¸å®‰å…¨æ”¯æŒã€‚</p>\n<h3 id=\"symfonyå¿«èŠ‚å¥æ˜¯å‹åŠ›ä¹Ÿæ˜¯ä¼˜åŠ¿\">Symfonyï¼šå¿«èŠ‚å¥æ˜¯å‹åŠ›ï¼Œä¹Ÿæ˜¯ä¼˜åŠ¿</h3>\n<p>Symfony çš„æ—¶é—´çº¿æ˜¾ç¤ºï¼š Symfony 8.0 åœ¨ 2025 å¹´ 11 æœˆä½œä¸ºç¨³å®šçº¿ï¼Œå¹¶è¦æ±‚ PHP 8.4+ã€‚ (Symfony)<br />\nåŒæ—¶å®˜æ–¹ä¹Ÿç»™å‡ºäº†é¢å‘ 2025 å¹´ 11 æœˆä¸‹æ—¬å‘å¸ƒçš„å‡†å¤‡å»ºè®®ã€‚ (Symfony)</p>\n<p>ç°åœºæ•™è®­ï¼š LTS è¿˜æ˜¯ latest ï¼Œæœ¬è´¨æ˜¯è¿ç»´ç­–ç•¥ä¸é¢„ç®—é—®é¢˜ã€‚å¤šæœåŠ¡ä½“ç³»é‡Œï¼Œæœ€å¥½æ˜ç¡®ä¸€ä¸ªé»˜è®¤é€‰é¡¹ï¼Œå¹¶å…¬å¼€ä¾‹å¤–ã€‚</p>\n<h2 id=\"è¶‹åŠ¿-4é™æ€åˆ†æä»åŠ åˆ†é¡¹å˜æˆåº•çº¿\">è¶‹åŠ¿ #4ï¼šé™æ€åˆ†æä»â€œåŠ åˆ†é¡¹â€å˜æˆâ€œåº•çº¿â€</h2>\n<p>PHPStan 2.x è®©è¶Šæ¥è¶Šå¤šå›¢é˜ŸæŠŠå®ƒæ”¾è¿›åˆå¹¶é—¨ç¦ï¼Œå› ä¸ºå®ƒå‘½ä¸­çš„ bug å¾€å¾€å°±æ˜¯äº‹æ•…å‰èº«ã€‚ (phpstan.org)</p>\n<p>ç¨³å¦¥çš„å¼•å…¥æ–¹å¼æ˜¯æ¸è¿›å¼ï¼Œè€Œä¸æ˜¯ä¸€å¤œæ‹‰æ»¡ï¼š</p>\n<ul>\n<li>ä»ä½ç­‰çº§å¼€å§‹ï¼Œå…ˆè®© CI è·‘èµ·æ¥ä½†ä¸é˜»æ–­ã€‚</li>\n<li>ä¿®æ‰æ˜¾è€Œæ˜“è§çš„é—®é¢˜ï¼šç±»å‹ç¼ºå¤±ã€æ­»åˆ†æ”¯ã€æ— æ„ä¹‰ null åˆ¤æ–­ã€‚</li>\n<li>baseline åªèƒ½å½“è¿‡æ¸¡ï¼Œå¿…é¡»è®¡åˆ’æ¶ˆåŒ–ã€‚</li>\n<li>é€æ¨¡å—æå‡é—¨æ§›ã€‚</li>\n</ul>\n<p>ç¤ºä¾‹é…ç½®ä¸ CIï¼š</p>\n<pre><code class=\"language-yaml\">parameters:\n  level: 6\n  paths:\n    - src\n  tmpDir: var/phpstan\n  checkMissingIterableValueType: false\n  reportUnmatchedIgnoredErrors: true\n</code></pre>\n<pre><code class=\"language-bash\">composer require --dev phpstan/phpstan\nvendor/bin/phpstan analyse --memory-limit=1G\n</code></pre>\n<h2 id=\"è¶‹åŠ¿-5æµ‹è¯•å†™å¾—æ›´è½»æ¾ä½†æ‰§è¡Œæ ‡å‡†æ›´ç°ä»£\">è¶‹åŠ¿ #5ï¼šæµ‹è¯•å†™å¾—æ›´è½»æ¾ï¼Œä½†æ‰§è¡Œæ ‡å‡†æ›´ç°ä»£</h2>\n<ul>\n<li>PHPUnit 11 è¦æ±‚ PHP 8.2+ï¼Œ PHPUnit 12 è¦æ±‚ PHP 8.3+ã€‚ (phpunit.de)</li>\n<li>Pest 4 è¦æ±‚ PHP 8.3+ï¼ˆ 2025 å¹´ 8 æœˆå‘å¸ƒï¼‰ï¼Œ Pest 3 å¯¹é½ PHP 8.2+ã€‚ (pestphp.com)</li>\n</ul>\n<p>Pest çš„ä¼˜åŠ¿æ˜¯é™ä½å†™æµ‹è¯•çš„é˜»åŠ›ï¼Œå°¤å…¶é€‚åˆåº”ç”¨å±‚æµ‹è¯•ã€‚ä¾‹å­å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"language-php\">&lt;?php\nfinal class Discount\n{\n    public function apply(int $priceCents, int $percent): int\n    {\n        if ($percent &lt; 0 || $percent &gt; 100) {\n            throw new InvalidArgumentException(\"Percent must be 0..100\");\n        }\n        $cut = (int) round($priceCents * ($percent / 100));\n        return max(0, $priceCents - $cut);\n    }\n}\n</code></pre>\n<pre><code class=\"language-php\">&lt;?php\nuse PHPUnit\\Framework\\Attributes\\Test;\nit('applies percentage discount safely', function () {\n    $d = new Discount();\n    expect($d-&gt;apply(10000, 10))-&gt;toBe(9000);\n    expect($d-&gt;apply(10000, 0))-&gt;toBe(10000);\n    expect($d-&gt;apply(10000, 100))-&gt;toBe(0);\n});\nit('rejects invalid percentages', function () {\n    $d = new Discount();\n    expect(fn() =&gt; $d-&gt;apply(10000, -1))-&gt;toThrow(InvalidArgumentException::class);\n    expect(fn() =&gt; $d-&gt;apply(10000, 101))-&gt;toThrow(InvalidArgumentException::class);\n});\n</code></pre>\n<p>ç°åœºæ•™è®­ï¼šä¼˜å…ˆæµ‹è¾¹ç•Œâ€”â€”è¿™äº›åœ°æ–¹æœ€å®¹æ˜“å‡ºäº‹æ•…ï¼šå››èˆäº”å…¥ã€æ—¶é—´çª—ã€å¹‚ç­‰ã€ç©ºå€¼ã€æ ¼å¼åŒ–ã€‚</p>\n<h2 id=\"è¶‹åŠ¿-6-composer-æ›´å®‰å…¨å¯¼å‘ä¾èµ–æˆäº†ä¾›åº”é“¾é—®é¢˜\">è¶‹åŠ¿ #6ï¼š Composer æ›´å®‰å…¨å¯¼å‘ï¼Œä¾èµ–æˆäº†ä¾›åº”é“¾é—®é¢˜</h2>\n<p>Composer çš„æ¼”è¿›æŒç»­å¼ºåŒ–ä¸€ä¸ªè§‚å¿µï¼šä¾èµ–ç®¡ç†æ˜¯ç”Ÿäº§åŸºç¡€è®¾æ–½ã€‚ (getcomposer.org)<br />\n2025 å¹´æœ«çš„ GitHub release notes ä¹Ÿä½“ç°äº†å¯¹å®‰å…¨ä¸å®¡è®¡è¡Œä¸ºçš„åŠ å¼ºã€‚ (GitHub)</p>\n<p>å®ç”¨å«ç”Ÿä¹ æƒ¯åŒ…æ‹¬ï¼šæäº¤ lock ã€ä½¿ç”¨ composer audit ã€ä¿æŒ platform çº¦æŸä¸€è‡´ã€å®šæœŸä¾èµ–æ›´æ–°ã€‚</p>\n<pre><code class=\"language-json\">{\n  \"require\": {\n    \"php\": \"^8.3\"\n  },\n  \"config\": {\n    \"platform\": {\n      \"php\": \"8.3.0\"\n    }\n  }\n}\n</code></pre>\n<h2 id=\"è¶‹åŠ¿-7å·¥å…·æ›´-ai-ä½†-adoption-çš„å…³é”®ä»æ˜¯-ide\">è¶‹åŠ¿ #7ï¼šå·¥å…·æ›´ AI ï¼Œä½† adoption çš„å…³é”®ä»æ˜¯ IDE</h2>\n<p>PhpStorm 2025.3 æåˆ°å¯¹ PHP 8.5 çš„æ”¯æŒä¸ agent é›†æˆã€‚ (The JetBrains Blog)<br />\nç°å®æ˜¯ï¼š IDE å¦‚æœä¸æ”¯æŒæ–°è¯­æ³•ï¼Œæ–°ç‰¹æ€§å¾ˆéš¾è¿›å…¥å›¢é˜Ÿæ—¥å¸¸å†™æ³•ã€‚</p>\n<h2 id=\"ç”Ÿäº§ä¸Šæœ€å€¼å¾—åšæŒçš„æ¸…å•\">ç”Ÿäº§ä¸Šæœ€å€¼å¾—åšæŒçš„æ¸…å•</h2>\n<ul>\n<li>æŠŠå‡çº§å½“ä½œå¯ç®¡ç†çš„äº§å“å·¥ä½œï¼šå®šç›®æ ‡ã€åšåŒç‰ˆæœ¬ CI ã€æŒ‰é¡ºåºå‡çº§ã€‚</li>\n<li>åšæ¸…æ™°è¾¹ç•Œï¼šè¾“å…¥ DTO â†’ é¢†åŸŸå¯¹è±¡ â†’ è¾“å‡ºæ˜ å°„ã€‚</li>\n<li>è¿½æ±‚å¯è°ƒè¯•æ€§ï¼šå‡å°‘éšå¼ null ã€æ•°ç»„å¥‘çº¦ã€æ— å¹‚ç­‰é‡è¯•ã€‚</li>\n<li>æŠŠå¯è§‚æµ‹æ€§æ”¾åœ¨å…³é”®å†³ç­–ç‚¹ï¼šç»“æ„åŒ–æ—¥å¿—ã€ correlation IDã€‚</li>\n<li>ç”¨è¯­è¨€ç‰¹æ€§é™ä½å¶ç„¶å¤æ‚åº¦ï¼Œè€Œä¸æ˜¯åˆ¶é€ èŠ±æ´»ã€‚</li>\n</ul>\n<h2 id=\"ç»“è®º\">ç»“è®º</h2>\n<p>2025 å¹´çš„ PHP æ›´åå‘å¥–åŠ±â€œç¨³å®šä¸å…‹åˆ¶â€ã€‚ PHP 8.4 å¸®ä½ æ›´æ¸…æ¥šåœ°è¡¨è¾¾æ„å›¾ï¼Œ PHP 8.5 è®©å¸¸è§å˜æ¢ä¸ä¸å¯å˜é£æ ¼æ›´é¡ºæ‰‹ã€‚ (PHP)<br />\nçœŸæ­£è·‘å¾—æ›´å¿«çš„å›¢é˜Ÿï¼Œå¾€å¾€ä¸æ˜¯è¿½æ–°ï¼Œè€Œæ˜¯ç”¨è¿™äº›å˜åŒ–æŠŠç³»ç»Ÿå˜å¾—æ›´å¯é¢„æµ‹ã€‚</p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2025-12-31 08:00</span>&nbsp;\n<a href=\"https://www.cnblogs.com/catchadmin\">JaguarJack</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">9</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "Redis 7.0 æ–°ç‰¹æ€§ä¹‹maxmemory-clientsï¼šé™åˆ¶å®¢æˆ·ç«¯å†…å­˜æ€»ä½¿ç”¨é‡",
      "link": "https://www.cnblogs.com/ivictor/p/19424061",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n\t\t\t<a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/ivictor/p/19424061\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2025-12-31 07:20\">\n    <span>Redis 7.0 æ–°ç‰¹æ€§ä¹‹maxmemory-clientsï¼šé™åˆ¶å®¢æˆ·ç«¯å†…å­˜æ€»ä½¿ç”¨é‡</span>\n    \n\n</a>\n\n\t\t</h1>\n\t\t<div class=\"clear\"></div>\n\t\t<div class=\"postBody\">\n\t\t\t<div class=\"blogpost-body blogpost-body-html\" id=\"cnblogs_post_body\">\n<h1><span style=\"color: rgba(0, 128, 0, 1);\">èƒŒæ™¯</span></h1>\n<p><span>ä¹‹å‰åˆ†äº«ä¸ª caseï¼ˆ<a class=\"normal_text_link mp_article_text_link\" href=\"https://mp.weixin.qq.com/s?__biz=Mzg5OTY2MjU5MQ==&amp;mid=2247495615&amp;idx=1&amp;sn=130df46d573bbdd979dff98d82575dfe&amp;scene=21#wechat_redirect\" rel=\"noopener nofollow\" target=\"_blank\">Redis å†…å­˜çªå¢æ—¶ï¼Œå¦‚ä½•å®šé‡åˆ†æå…¶å†…å­˜ä½¿ç”¨æƒ…å†µ</a>ï¼‰ï¼Œä¸€ä¸ª Redis å®ä¾‹çš„å†…å­˜çªå¢ï¼Œ<code><span>used_memory</span></code><span>æœ€å¤§æ—¶è¾¾åˆ°äº† 78.9Gï¼Œè€Œè¯¥å®ä¾‹çš„<code><span>maxmemory</span></code><span>é…ç½®å´åªæœ‰ 16Gï¼Œæœ€ç»ˆå¯¼è‡´å®ä¾‹ä¸­çš„æ•°æ®è¢«å¤§é‡é©±é€ã€‚</span></span></span></p>\n<p><span>å¯¼è‡´è¿™ä¸ªé—®é¢˜çš„ä¸€ä¸ªå¸¸è§åŸå› æ˜¯å®¢æˆ·ç«¯å ç”¨çš„å†…å­˜è¿‡å¤šã€‚</span></p>\n<p><span>Redis ä¸­ï¼Œå®¢æˆ·ç«¯å†…å­˜ä¸»è¦åŒ…æ‹¬ä¸‰éƒ¨åˆ†ï¼šè¾“å…¥ç¼“å†²åŒºï¼ˆæš‚å­˜å®¢æˆ·ç«¯å‘½ä»¤ï¼‰ã€è¾“å‡ºç¼“å†²åŒºï¼ˆç¼“å­˜å‘é€ç»™å®¢æˆ·ç«¯çš„æ•°æ®ï¼‰ï¼Œä»¥åŠå®¢æˆ·ç«¯å¯¹è±¡æœ¬èº«çš„å¼€é”€ã€‚</span></p>\n<p><span>å…¶ä¸­ï¼Œè¾“å…¥ç¼“å†²åŒºå¯é€šè¿‡<code><span>client-query-buffer-limit</span></code><span>é™åˆ¶ï¼Œè¾“å‡ºç¼“å†²åŒºå¯é€šè¿‡<code><span>client-output-buffer-limit</span></code><span>é™åˆ¶ã€‚</span></span></span></p>\n<p><span>ä½†è¿™ä¸¤ä¸ªå‚æ•°<strong>åªèƒ½é™åˆ¶å•ä¸ªå®¢æˆ·ç«¯</strong><span>ã€‚</span></span></p>\n<p><span>åœ¨å®¢æˆ·ç«¯æ•°é‡è¾ƒå¤šçš„æƒ…å†µä¸‹ï¼Œå³ä½¿å•ä¸ªå®¢æˆ·ç«¯å ç”¨ä¸å¤§ï¼Œå®¢æˆ·ç«¯å†…å­˜çš„æ€»é‡ä»å¯èƒ½å¤±æ§ã€‚</span></p>\n<p><span>ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼ŒRedis 7.0 å¼•å…¥äº†<code><span>maxmemory-clients</span></code><span>ï¼Œç”¨äºé™åˆ¶æ‰€æœ‰å®¢æˆ·ç«¯å¯ä½¿ç”¨çš„å†…å­˜æ€»é‡ã€‚</span></span></p>\n<p><span>ä¸‹é¢çœ‹çœ‹å…·ä½“çš„å®ç°ç»†èŠ‚ã€‚</span></p>\n<h1><span style=\"color: rgba(0, 128, 0, 1);\">é…ç½®</span></h1>\n<pre><span><code><span>standardConfig static_configs[] = {<span><br /><span>...<span><br /><span>&nbsp; &nbsp; createSSizeTConfig(\"maxmemory-clients\"<span>,&nbsp;NULL<span>, MODIFIABLE_CONFIG,&nbsp;-100<span>, SSIZE_MAX, server.maxmemory_clients,&nbsp;0<span>, MEMORY_CONFIG | PERCENT_CONFIG,&nbsp;NULL<span>, applyClientMaxMemoryUsage),<span><br /><span>...<span><br /><span>};<span><br /></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></span></pre>\n<p><code><span>maxmemory-clients</span></code><span>&nbsp;çš„é»˜è®¤å€¼ä¸º 0ï¼Œæœ€å°å€¼ä¸º -100ï¼Œå¯¹åº”çš„å†…éƒ¨å˜é‡æ˜¯<code><span>server.maxmemory_clients</span></code><span>ã€‚</span></span></p>\n<p><span>è¯¥å‚æ•°æ—¢å¯ä»¥è®¾ç½®ä¸ºæ­£æ•°ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸ºè´Ÿæ•°ï¼š</span></p>\n<ul class=\"list-paddingleft-1\">\n<li>\n<p><span>æ­£æ•°ï¼šè¡¨ç¤ºå®¢æˆ·ç«¯å†…å­˜æ€»ä½¿ç”¨é‡çš„ä¸Šé™ã€‚å› ä¸ºè¯¥å‚æ•°çš„ç±»å‹æ˜¯ MEMORY_CONFIGï¼Œæ‰€ä»¥å¯ä»¥æŒ‡å®š kb/mb/gb ä¹‹ç±»çš„å•ä½ã€‚ä¸æŒ‡å®šï¼Œåˆ™é»˜è®¤æ˜¯å­—èŠ‚ã€‚</span></p>\n</li>\n<li>\n<p><span>è´Ÿæ•°ï¼šè¡¨ç¤ºæŒ‰ maxmemory &nbsp;çš„ç™¾åˆ†æ¯”é™åˆ¶å®¢æˆ·ç«¯å†…å­˜ã€‚ä¾‹å¦‚ï¼š<code><span>maxmemory-clients = -50</span></code><span>è¡¨ç¤ºå®¢æˆ·ç«¯å†…å­˜æ€»é‡ä¸å¾—è¶…è¿‡ maxmemory çš„ 50%ã€‚</span></span></p>\n</li>\n</ul>\n<p><span>è¿™ä¸€ç‚¹æ˜¯åœ¨<code><span>getClientEvictionLimit</span></code><span>å‡½æ•°ä¸­å®ç°çš„ã€‚</span></span></p>\n<pre><span><code><span>size_t<span>&nbsp;<span>getClientEvictionLimit<span>(<span>void<span>)<span>&nbsp;<span>{<span><br /><span>&nbsp; &nbsp;&nbsp;size_t<span>&nbsp;maxmemory_clients_actual = SIZE_MAX;<span><br /><span><br /><span>&nbsp; &nbsp;&nbsp;if<span>&nbsp;(server.maxmemory_clients &lt;&nbsp;0<span>&nbsp;&amp;&amp; server.maxmemory &gt;&nbsp;0<span>) {<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;unsignedlonglong<span>&nbsp;maxmemory_clients_bytes = (unsignedlonglong<span>)((double<span>)server.maxmemory * -(double<span>) server.maxmemory_clients /&nbsp;100<span>);<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;if<span>&nbsp;(maxmemory_clients_bytes &lt;= SIZE_MAX)<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; maxmemory_clients_actual = maxmemory_clients_bytes;<span><br /><span>&nbsp; &nbsp; }<span><br /><span>&nbsp; &nbsp;&nbsp;elseif<span>&nbsp;(server.maxmemory_clients &gt;&nbsp;0<span>)<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; maxmemory_clients_actual = server.maxmemory_clients;<span><br /><span>&nbsp; &nbsp;&nbsp;else<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;return0<span>;<span><br /><span><br /><span>&nbsp; &nbsp;&nbsp;<span>/* Don't allow a too small maxmemory-clients to avoid cases where we can't communicate<span><br /><span>&nbsp; &nbsp; &nbsp;* at all with the server because of bad configuration */<span><br /><span>&nbsp; &nbsp;&nbsp;if<span>&nbsp;(maxmemory_clients_actual &lt;&nbsp;1024<span>*128<span>)<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; maxmemory_clients_actual =&nbsp;1024<span>*128<span>;<span><br /><span><br /><span>&nbsp; &nbsp;&nbsp;return<span>&nbsp;maxmemory_clients_actual;<span><br /><span>}<span><br /></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></span></pre>\n<h1><span style=\"color: rgba(0, 128, 0, 1);\">å®ç°ç»†èŠ‚</span></h1>\n<p><span>å½“é€šè¿‡<code><span>CONFIG SET</span></code><span>å‘½ä»¤è°ƒæ•´<code><span>maxmemory-clients</span></code><span>çš„å€¼æ—¶ï¼Œä¼šè°ƒç”¨<code><span>applyClientMaxMemoryUsage</span></code><span>å‡½æ•°è¿›è¡Œå¤„ç†ã€‚</span></span></span></span></p>\n<pre><span><code><span>static<span>&nbsp;<span>int<span>&nbsp;<span>applyClientMaxMemoryUsage<span>(<span>const<span>&nbsp;<span>char<span>&nbsp;**err)<span>&nbsp;<span>{<span><br /><span>&nbsp; &nbsp; ...<span><br /><span>&nbsp; &nbsp;&nbsp;if<span>&nbsp;(server.maxmemory_clients !=&nbsp;0<span>)<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; initServerClientMemUsageBuckets();<span><br /><span>&nbsp; &nbsp; ...<span><br /><span>&nbsp; &nbsp;&nbsp;if<span>&nbsp;(server.maxmemory_clients ==&nbsp;0<span>)<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; freeServerClientMemUsageBuckets();<span><br /><span>&nbsp; &nbsp;&nbsp;return<span>&nbsp;1<span>;<span><br /><span>}<span><br /></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></span></pre>\n<p><span>å¯ä»¥çœ‹åˆ°ï¼Œå½“<code><span>server.maxmemory_clients</span></code><span>çš„å€¼ä¸ä¸º 0ï¼Œä¼šè°ƒç”¨<code><span>initServerClientMemUsageBuckets()</span></code><span>ã€‚</span></span></span></p>\n<pre><span><code><span>void<span>&nbsp;<span>initServerClientMemUsageBuckets<span>()<span>&nbsp;<span>{<span><br /><span>&nbsp; &nbsp;&nbsp;if<span>&nbsp;(server.client_mem_usage_buckets)<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;return<span>;<span><br /><span>&nbsp; &nbsp; server.client_mem_usage_buckets = zmalloc(sizeof<span>(clientMemUsageBucket)*CLIENT_MEM_USAGE_BUCKETS);<span><br /><span>&nbsp; &nbsp;&nbsp;for<span>&nbsp;(int<span>&nbsp;j =&nbsp;0<span>; j &lt; CLIENT_MEM_USAGE_BUCKETS; j++) {<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; server.client_mem_usage_buckets[j].mem_usage_sum =&nbsp;0<span>;<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; server.client_mem_usage_buckets[j].clients = listCreate();<span><br /><span>&nbsp; &nbsp; }<span><br /><span>}<span><br /></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></span></pre>\n<p><span>è¯¥å‡½æ•°ç”¨äºåˆå§‹åŒ–<code><span>server.client_mem_usage_buckets</span></code><span>æ•°ç»„ï¼Œæ•°ç»„é•¿åº¦ç”±å®<code><span>CLIENT_MEM_USAGE_BUCKETS</span></code><span>å†³å®šï¼Œé»˜è®¤ 19ã€‚</span></span></span></p>\n<p><span>æ¯ä¸ªå…ƒç´ è¡¨ç¤ºä¸€ä¸ªæ¡¶ï¼ˆbucketï¼‰ã€‚ æ¯ä¸ªæ¡¶ç»´æŠ¤ä¸¤ç±»ä¿¡æ¯ï¼š</span></p>\n<ul class=\"list-paddingleft-1\">\n<li><span>mem_usage_sumï¼šè¯¥æ¡¶å†…æ‰€æœ‰å®¢æˆ·ç«¯çš„å†…å­˜å ç”¨æ€»å’Œã€‚</span></li>\n<li><span>clientsï¼šå±äºè¯¥æ¡¶çš„å®¢æˆ·ç«¯åˆ—è¡¨ã€‚</span></li>\n</ul>\n<p><span>å½“å®¢æˆ·ç«¯å†…å­˜å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒRedis ä¼šé€šè¿‡<code><span>updateClientMemUsageAndBucket</span></code><span>æ›´æ–°è¯¥å®¢æˆ·ç«¯çš„å†…å­˜ä½¿ç”¨æƒ…å†µï¼ˆå®¢æˆ·ç«¯ä½¿ç”¨çš„å†…å­˜ï¼Œå¯¹åº”<code><span>client list</span></code><span>è¾“å‡ºä¸­çš„<code><span>tot-mem</span></code><span>ï¼‰ï¼Œå¹¶æ ¹æ®å†…å­˜å¤§å°å°†å®¢æˆ·ç«¯åˆ†é…åˆ°å¯¹åº”çš„æ¡¶ä¸­ï¼š</span></span></span></span></p>\n<ul class=\"list-paddingleft-1\">\n<li><strong>å°äº 32KB</strong><span>&nbsp;çš„å®¢æˆ·ç«¯è¿›å…¥ 0 å·æ¡¶ï¼›</span></li>\n<li><strong>32KBï½64KB</strong><span>&nbsp;çš„å®¢æˆ·ç«¯è¿›å…¥ 1 å·æ¡¶ï¼›</span></li>\n<li><span>ä¹‹åæ¯ä¸ªæ¡¶çš„èŒƒå›´æŒ‰ 2 å€é€’å¢ï¼›</span></li>\n<li><strong>â‰¥ 4GB</strong><span>&nbsp;çš„å®¢æˆ·ç«¯è¿›å…¥ 18 å·æ¡¶ã€‚</span></li>\n</ul>\n<p><span>æ­¤å¤–ï¼ŒRedis è¿˜ä¼šé€šè¿‡<code><span>clientsCron()</span></code><span>å‘¨æœŸæ€§åœ°æ›´æ–°éƒ¨åˆ†å®¢æˆ·ç«¯çš„å†…å­˜ä½¿ç”¨æƒ…å†µã€‚&nbsp;<code><span>clientsCron()</span></code><span>&nbsp;çš„æ‰§è¡Œé¢‘ç‡ç”±<code><span>server.hz</span></code><span>æ§åˆ¶ï¼Œé»˜è®¤æ¯ç§’ 10 æ¬¡ã€‚</span></span></span></span></p>\n<h1><span style=\"color: rgba(0, 128, 0, 1);\">é€‚ç”¨çš„å®¢æˆ·ç«¯ç±»å‹</span></h1>\n<p><span>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¹¶éæ‰€æœ‰å®¢æˆ·ç«¯éƒ½ä¼šè¢«ç»Ÿè®¡å†…å­˜å¹¶å‚ä¸é©±é€ã€‚å…·ä½“åˆ¤æ–­é€»è¾‘å¦‚ä¸‹ï¼š</span></p>\n<pre><span><code><span>int<span>&nbsp;<span>clientEvictionAllowed<span>(client *c)<span>&nbsp;<span>{<span><br /><span>&nbsp; &nbsp;&nbsp;if<span>&nbsp;(server.maxmemory_clients ==&nbsp;0<span>&nbsp;|| c-&gt;flags &amp; CLIENT_NO_EVICT) {<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;return<span>&nbsp;0<span>;<span><br /><span>&nbsp; &nbsp; }<span><br /><span>&nbsp; &nbsp;&nbsp;int<span>&nbsp;type = getClientType(c);<span><br /><span>&nbsp; &nbsp;&nbsp;return<span>&nbsp;(type == CLIENT_TYPE_NORMAL || type == CLIENT_TYPE_PUBSUB);<span><br /><span>}<span><br /></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></span></pre>\n<p><span>å¯ä»¥çœ‹åˆ°ï¼Œåªæœ‰æ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„å®¢æˆ·ç«¯æ‰ä¼šè¢«ç»Ÿè®¡å†…å­˜å¹¶å‚ä¸é©±é€ï¼š</span></p>\n<ol class=\"list-paddingleft-1\">\n<li><code><span>maxmemory_clients</span></code><span>ä¸ä¸º 0ã€‚</span></li>\n<li><span>å®¢æˆ·ç«¯æœªè®¾ç½® CLIENT_NO_EVICTï¼Œåœ¨ Redis 7.0 ä¸­ï¼Œæ”¯æŒé€šè¿‡<code><span>CLIENT NO-EVICT ON</span></code><span>å‘½ä»¤æ˜¾å¼å…³é—­é©±é€ã€‚</span></span></li>\n<li><span>å®¢æˆ·ç«¯ç±»å‹ä¸º NORMAL æˆ– PUBSUBã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¤åˆ¶ç›¸å…³å®¢æˆ·ç«¯ä¸ä¼šè¢«é©±é€ã€‚</span></li>\n</ol>\n<h1><span style=\"color: rgba(0, 128, 0, 1);\">å®¢æˆ·ç«¯é©±é€ç»†èŠ‚</span></h1>\n<p><span>å®¢æˆ·ç«¯é©±é€æ˜¯åœ¨<code><span>evictClients</span></code><span>å‡½æ•°ä¸­å®ç°çš„ã€‚</span></span></p>\n<pre><span><code><span>void<span>&nbsp;<span>evictClients<span>(<span>void<span>)<span>&nbsp;<span>{<span><br /><span>&nbsp; &nbsp;&nbsp;// å¦‚æœ client_mem_usage_buckets æ²¡è¢«åˆå§‹åŒ–ï¼Œåˆ™ç›´æ¥è¿”å›<span><br /><span>&nbsp; &nbsp;&nbsp;if<span>&nbsp;(!server.client_mem_usage_buckets)<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;return<span>;<span><br /><span>&nbsp; &nbsp;&nbsp;// ä»æœ€å¤§å®¢æˆ·ç«¯å†…å­˜æ¡¶å¼€å§‹é©±é€<span><br /><span>&nbsp; &nbsp;&nbsp;int<span>&nbsp;curr_bucket = CLIENT_MEM_USAGE_BUCKETS-1<span>;<span><br /><span>&nbsp; &nbsp; listIter bucket_iter;<span><br /><span>&nbsp; &nbsp; listRewind(server.client_mem_usage_buckets[curr_bucket].clients, &amp;bucket_iter);<span><br /><span>&nbsp; &nbsp;&nbsp;// è·å–å®¢æˆ·ç«¯å…è®¸ä½¿ç”¨çš„æœ€å¤§å†…å­˜<span><br /><span>&nbsp; &nbsp;&nbsp;size_t<span>&nbsp;client_eviction_limit = getClientEvictionLimit();<span><br /><span>&nbsp; &nbsp;&nbsp;if<span>&nbsp;(client_eviction_limit ==&nbsp;0<span>)<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;return<span>;<span><br /><span>&nbsp; &nbsp;&nbsp;// å¾ªç¯é©±é€ï¼Œç›´åˆ°å®¢æˆ·ç«¯æ€»å†…å­˜é™åˆ°é˜ˆå€¼ä»¥ä¸‹æˆ–æ‰€æœ‰å¯é©±é€å®¢æˆ·ç«¯å·²é‡Šæ”¾<span><br /><span>&nbsp; &nbsp;&nbsp;while<span>&nbsp;(server.stat_clients_type_memory[CLIENT_TYPE_NORMAL] +<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;server.stat_clients_type_memory[CLIENT_TYPE_PUBSUB] &gt;= client_eviction_limit) {<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;// è·å–å½“å‰æ¡¶çš„ä¸‹ä¸€ä¸ªå®¢æˆ·ç«¯<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; listNode *ln = listNext(&amp;bucket_iter);<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;if<span>&nbsp;(ln) {<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; client *c = ln-&gt;value;<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;// ç”Ÿæˆå®¢æˆ·ç«¯ä¿¡æ¯å­—ç¬¦ä¸²ï¼Œç”¨äºæ—¥å¿—<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sds ci = catClientInfoString(sdsempty(),c);<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; serverLog(LL_NOTICE,&nbsp;\"Evicting client: %s\"<span>, ci);<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;// é‡Šæ”¾å®¢æˆ·ç«¯å ç”¨çš„èµ„æº<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; freeClient(c);<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sdsfree(ci);<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;// stat_evictedclientså¯¹åº”çš„æ˜¯info statsä¸­çš„evicted_clients<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; server.stat_evictedclients++;<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; }&nbsp;else<span>&nbsp;{<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;// å½“å‰æ¡¶å·²ç©ºï¼Œåˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªè¾ƒå°å®¢æˆ·ç«¯æ¡¶<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; curr_bucket--;<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;// æ‰€æœ‰æ¡¶éƒ½å·²ç»éå†å®Œï¼Œä½†å†…å­˜ä»è¶…è¿‡é˜ˆå€¼ï¼Œè®°å½•è­¦å‘Š<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;if<span>&nbsp;(curr_bucket &lt;&nbsp;0<span>) {<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; serverLog(LL_WARNING,&nbsp;\"Over client maxmemory after evicting all evictable clients\"<span>);<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;break<span>;<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; listRewind(server.client_mem_usage_buckets[curr_bucket].clients, &amp;bucket_iter);<span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; }<span><br /><span>&nbsp; &nbsp; }<span><br /><span>}<span><br /></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></span></pre>\n<p><span>å¯ä»¥çœ‹åˆ°ï¼Œè¯¥å‡½æ•°ä»æœ€å¤§å†…å­˜æ¡¶å¼€å§‹é©±é€ï¼Œä¼˜å…ˆæ·˜æ±°å ç”¨å†…å­˜æœ€å¤šçš„å®¢æˆ·ç«¯ã€‚</span></p>\n<p><span>å¯¹äºè¢«é©±é€çš„å®¢æˆ·ç«¯ï¼Œä¼šåœ¨æ—¥å¿—ä¸­æ‰“å°ä»¥ä¸‹å†…å®¹ã€‚</span></p>\n<pre><span><code><span>* Evicting client: id=993566 addr=243.247.151.0:46084 laddr=172.17.0.2:7379 fd=774 name= age=6 idle=1 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=20474 argv-mem=0 multi-mem=0 rbs=4096 rbp=0 obl=0 oll=1 omem=3145752 tot-mem=3171096 events=rw cmd=get user=default redir=-1 resp=2<span><br /></span></span></code></span></pre>\n<p><span>è¯¥å‡½æ•°çš„è°ƒç”¨åœºæ™¯ä¸»è¦æœ‰ä¸¤ä¸ªï¼š</span></p>\n<ol class=\"list-paddingleft-1\">\n<li><code><span>beforeSleep</span></code><span>ï¼šåœ¨å¤„ç†å®Œæœ¬è½®æ‰€æœ‰å‘½ä»¤ã€å³å°†è¿›å…¥ä¸‹ä¸€è½®äº‹ä»¶å¾ªç¯é˜»å¡å‰æ‰§è¡Œã€‚è¯¥é˜¶æ®µä¼šå¤„ç†å®¢æˆ·ç«¯è¯»å†™ä¸é˜»å¡çŠ¶æ€ã€é›†ç¾¤ä¸å¤åˆ¶ç»´æŠ¤ã€Key è¿‡æœŸã€AOF åˆ·ç›˜ã€å¼‚æ­¥é‡Šæ”¾å®¢æˆ·ç«¯ï¼Œä»¥åŠå®¢æˆ·ç«¯å†…å­˜é©±é€ç­‰æ“ä½œã€‚</span></li>\n<li><code><span>processCommand(client *c)</span></code><span>ï¼šåœ¨å®Œæ•´è¯»å–å¹¶è§£æä¸€æ¡å®¢æˆ·ç«¯å‘½ä»¤åè°ƒç”¨ï¼Œæ˜¯æ‰€æœ‰å‘½ä»¤çš„å¿…ç»è·¯å¾„ï¼Œç”¨äºæ‰§è¡Œå‘½ä»¤åˆæ³•æ€§æ ¡éªŒã€ACL æƒé™æ£€æŸ¥ã€é›†ç¾¤é‡å®šå‘åˆ¤æ–­ã€å®¢æˆ·ç«¯å†…å­˜é™åˆ¶ã€æœåŠ¡å™¨å†…å­˜æ·˜æ±°ã€åªè¯»ä»åº“æ ¡éªŒç­‰ä¸€ç³»åˆ—å‰ç½®æ£€æŸ¥ã€‚</span></li>\n</ol>\n</div>\n<div class=\"clear\"></div>\n\n\t\t</div>\n\t\t<div class=\"postDesc\">posted @ \n<span id=\"post-date\">2025-12-31 07:20</span>&nbsp;\n<a href=\"https://www.cnblogs.com/ivictor\">iVictor</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">29</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "Claude Skills MCP æŠ€æœ¯è§£æ",
      "link": "https://www.cnblogs.com/smartloli/p/19423547",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/smartloli/p/19423547\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2025-12-30 22:48\">\n    <span>Claude Skills MCP æŠ€æœ¯è§£æ</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body blogpost-body-html\" id=\"cnblogs_post_body\">\n<h1>1.æ¦‚è¿°</h1>\n<p>å¦‚æœè¯´å¤§æ¨¡å‹çš„æ¨ç†èƒ½åŠ›å†³å®šäº†â€œå®ƒæœ‰å¤šèªæ˜â€ï¼Œé‚£ä¹ˆ MCP å†³å®šäº†å®ƒåˆ°åº•èƒ½ä¸èƒ½åœ¨çœŸå®ä¸–ç•Œé‡ŒæŠŠäº‹åšå®Œã€‚è¿™ç¯‡æ–‡ç« ä¸æ˜¯ç®€å•ä»‹ç»ä¸€ä¸ªæ–°åè¯ï¼Œè€Œæ˜¯è¯•å›¾å›ç­”ä¸€ä¸ªå¾ˆå¤šå·¥ç¨‹å¸ˆå¿ƒé‡Œéƒ½åœ¨é—®çš„é—®é¢˜ï¼š<strong>Claude çš„ Skills å’Œ MCPï¼Œåˆ°åº•è§£å†³äº†ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆå®ƒçœ‹èµ·æ¥æ¯”ä¼ ç»Ÿçš„ Tool / Function Calling æ›´â€œé‡â€ï¼Ÿ</strong></p>\n<h1><strong>2.å†…å®¹</strong></h1>\n<h2><strong>2.1&nbsp;ä»ä¸€ä¸ªçœŸå®é—®é¢˜è¯´èµ·</strong></h2>\n<p>å…ˆè¯´ä¸€ä¸ªå¾ˆå¸¸è§çš„åœºæ™¯ã€‚ä½ è®©ä¸€ä¸ªå¤§æ¨¡å‹å¸®ä½ åšä¸€ä»¶äº‹ï¼š</p>\n<div class=\"cnblogs_code\">\n<pre>â€œå¸®æˆ‘æŸ¥ä¸€ä¸‹è¿™ä¸ªç”¨æˆ·çš„èµ„æ–™ã€æœ€è¿‘ <span style=\"color: rgba(128, 0, 128, 1);\">30</span> å¤©çš„è®¢å•ï¼Œç„¶åç»™å‡ºè¿è¥å»ºè®®ã€‚â€</pre>\n</div>\n<p>å¦‚æœä½ åšè¿‡ç›¸å…³ç³»ç»Ÿï¼Œç¬¬ä¸€ååº”ä¸€å®šæ˜¯ï¼š</p>\n<ul>\n<li>è¦æŸ¥ç”¨æˆ·è¡¨</li>\n<li>è¦æŸ¥è®¢å•è¡¨</li>\n<li>è¦èšåˆæ•°æ®</li>\n<li>è¦åˆ†æç»“æœ</li>\n</ul>\n<p>è€Œä¼ ç»Ÿ LLM çš„åšæ³•å¾€å¾€æ˜¯ï¼š</p>\n<ul>\n<li>ç”¨ Prompt å‘Šè¯‰æ¨¡å‹â€œå‡è£…ä½ æŸ¥äº†æ•°æ®åº“â€</li>\n<li>æˆ–è€…ç”¨ Function Calling å‹‰å¼ºè°ƒç”¨ä¸€ä¸¤ä¸ªæ¥å£</li>\n<li>æˆ–è€…åœ¨å¤–éƒ¨ä»£ç é‡Œç¡¬å†™æµç¨‹</li>\n</ul>\n<p>é—®é¢˜æ˜¯ï¼Œè¿™äº›æ–¹å¼éƒ½å­˜åœ¨æ˜æ˜¾çŸ­æ¿ï¼š</p>\n<ul>\n<li>Prompt æ˜¯å‡èƒ½åŠ›</li>\n<li>Function Calling æ˜¯åŠè‡ªåŠ¨</li>\n<li>å¤–éƒ¨æµç¨‹æ˜¯æ¨¡å‹è¢«åŠ¨æ‰§è¡Œ</li>\n</ul>\n<p>Claude çš„ Skill + MCPï¼Œè¯•å›¾ä»åº•å±‚è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>\n<h2>2.2&nbsp;ä»€ä¹ˆæ˜¯ Claude Skillsï¼Ÿå…ˆæŠŠè¯¯è§£è¯´æ¸…æ¥š</h2>\n<p>å¾ˆå¤šäººç¬¬ä¸€æ¬¡å¬åˆ° Skillï¼Œä¼šä¸‹æ„è¯†ç†è§£ä¸ºï¼š</p>\n<div class=\"cnblogs_code\">\n<pre>â€œå“¦ï¼Œå°±æ˜¯ Toolã€‚â€</pre>\n</div>\n<p>ä½†å®é™…ä¸Š Claude Skills å’Œä¼ ç»Ÿ Tool å¹¶ä¸æ˜¯ä¸€ä¸ªå±‚çº§çš„ä¸œè¥¿ã€‚</p>\n<p><strong>1.ç›´è§‚ç†è§£ä¸€ä¸‹</strong></p>\n<ul>\n<li>Toolï¼šâ€œè¿™æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä½ å¯ä»¥è°ƒç”¨ã€‚â€</li>\n<li>Skillsï¼šâ€œè¿™æ˜¯ä¸€ä¸ªä½ è¢«å…è®¸ä½¿ç”¨çš„èƒ½åŠ›è¾¹ç•Œï¼Œæˆ‘å·²ç»å¸®ä½ å®šä¹‰å¥½äº†è¾“å…¥ã€è¾“å‡ºå’Œè§„åˆ™ã€‚â€</li>\n</ul>\n<p><strong>2.Skill æ›´åƒä»€ä¹ˆï¼Ÿ</strong></p>\n<ul>\n<li><strong>åƒä¸€ä¸ªç³»ç»Ÿ API + ç±»å‹ç³»ç»Ÿ + æƒé™è¾¹ç•Œçš„ç»„åˆä½“</strong></li>\n</ul>\n<p><strong>3.ä¸€ä¸ª Skill è‡³å°‘åŒ…å«ä»€ä¹ˆï¼Ÿ</strong></p>\n<p>ä¸€ä¸ªå®Œæ•´çš„ Claude Skillï¼Œé€šå¸¸åŒ…å«ï¼š</p>\n<ul>\n<li>èƒ½åŠ›åç§°ï¼ˆNameï¼‰</li>\n<li>èƒ½åŠ›æè¿°ï¼ˆç»™æ¨¡å‹çœ‹çš„ï¼‰</li>\n<li>è¾“å…¥å‚æ•°ç»“æ„ï¼ˆJSON Schemaï¼‰</li>\n<li>è¾“å‡ºç»“æœç»“æ„ï¼ˆJSON Schemaï¼‰</li>\n<li>å®é™…æ‰§è¡Œé€»è¾‘ï¼ˆè¿è¡Œåœ¨ Skill Server ä¸­ï¼‰</li>\n</ul>\n<p>ä¹Ÿå°±æ˜¯è¯´ï¼ŒSkill æœ¬èº«æ˜¯â€œå£°æ˜å¼â€çš„ï¼Œæ¨¡å‹å¹¶ä¸å…³å¿ƒä½ æ˜¯ Pythonã€Java è¿˜æ˜¯ Rust å®ç°çš„ã€‚</p>\n<h2>2.3&nbsp;MCPï¼ˆModel Context Protocolï¼‰åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</h2>\n<p>å…ˆç»™ä¸€ä¸ªä¸é‚£ä¹ˆå®˜æ–¹çš„å®šä¹‰ï¼š</p>\n<div class=\"cnblogs_code\">\n<pre>MCP æ˜¯ä¸€å¥—è®©å¤§æ¨¡å‹â€œå®‰å…¨ã€å¯æ§åœ°ä½¿ç”¨å¤–éƒ¨èƒ½åŠ›ï¼Œå¹¶æŠŠç»“æœçº³å…¥æ¨ç†è¿‡ç¨‹â€çš„åè®®ã€‚</pre>\n</div>\n<p>æ³¨æ„å…³é”®è¯ä¸æ˜¯â€œè°ƒç”¨â€ï¼Œè€Œæ˜¯ï¼š</p>\n<ul>\n<li>å®‰å…¨</li>\n<li>å¯æ§</li>\n<li>çº³å…¥æ¨ç†</li>\n</ul>\n<p>è¿™ä¸‰ç‚¹ï¼Œæ°æ°æ˜¯å¾ˆå¤š Tool æ–¹æ¡ˆåšä¸åˆ°çš„ã€‚</p>\n<p><strong>1.MCP è§£å†³çš„æ ¸å¿ƒä¸æ˜¯â€œæ€ä¹ˆè°ƒå‡½æ•°â€</strong></p>\n<p>è€Œæ˜¯è¿™å‡ ä¸ªé—®é¢˜ï¼š</p>\n<ul>\n<li>æ¨¡å‹æ€ä¹ˆçŸ¥é“æœ‰å“ªäº›èƒ½åŠ›å¯ä»¥ç”¨ï¼Ÿ</li>\n<li>æ¨¡å‹æ€ä¹ˆç†è§£è¿™äº›èƒ½åŠ›èƒ½å¹²å˜›ï¼Ÿ</li>\n<li>æ¨¡å‹æ€ä¹ˆä¿è¯å‚æ•°ä¸ä¼šä¹±ä¼ ï¼Ÿ</li>\n<li>æ‰§è¡Œç»“æœæ€ä¹ˆå›åˆ°ä¸Šä¸‹æ–‡ç»§ç»­æ¨ç†ï¼Ÿ</li>\n<li>æ•´ä¸ªè¿‡ç¨‹æ€ä¹ˆè¢«äººç±»æ²»ç†ï¼Ÿ</li>\n</ul>\n<p>MCP æ˜¯åœ¨è§£å†³â€œ<strong>æ¨¡å‹ä¸ç°å®ç³»ç»Ÿä¹‹é—´çš„åè®®é—®é¢˜</strong>â€ã€‚</p>\n<h2>2.4&nbsp;æ•´ä½“æ¶æ„ï¼šClaude æ˜¯å¤§è„‘ï¼ŒMCP æ˜¯ç¥ç»ç³»ç»Ÿ</h2>\n<p>å…ˆçœ‹ä¸€å¼ æ•´ä½“ç»“æ„å›¾ï¼š</p>\n<p><img alt=\"image\" height=\"826\" src=\"https://img2024.cnblogs.com/blog/666745/202512/666745-20251230222618784-1569725605.png\" width=\"1196\" /></p>\n<p>&nbsp;å…³é”®ç‚¹åœ¨è¿™é‡Œï¼š</p>\n<ul>\n<li>Claude ä¸ç›´æ¥æ¥è§¦æ•°æ®åº“</li>\n<li>Claude ä¸ç›´æ¥å‘ HTTP è¯·æ±‚</li>\n<li>Claude åªå’Œ MCP â€œè¯´è¯â€</li>\n</ul>\n<p>&nbsp;è¿™å°±åƒï¼š<strong>å¤§è„‘ä¸ä¼šç›´æ¥æ§åˆ¶è‚Œè‚‰çº¤ç»´ï¼Œè€Œæ˜¯é€šè¿‡ç¥ç»ç³»ç»Ÿå‘ä¿¡å·ã€‚</strong></p>\n<h2><strong>2.5&nbsp;ä¸€æ¬¡å®Œæ•´çš„ MCP è°ƒç”¨æµç¨‹</strong></h2>\n<p>æˆ‘ä»¬æŠŠä¸€æ¬¡å®Œæ•´è°ƒç”¨æ‹†å¼€æ¥çœ‹ã€‚</p>\n<h3><strong>1.åœºæ™¯</strong></h3>\n<p><strong>ç”¨æˆ·è¯´ï¼š</strong></p>\n<div class=\"cnblogs_code\">\n<pre>â€œå¸®æˆ‘æŸ¥ä¸€ä¸‹ test@example.com è¿™ä¸ªç”¨æˆ·çš„ä¿¡æ¯ã€‚â€</pre>\n</div>\n<p><strong>1ï¸âƒ£ Claude å…ˆåšä»€ä¹ˆï¼Ÿ</strong></p>\n<p>Claude é¦–å…ˆåšçš„æ˜¯ è¯­ä¹‰åˆ¤æ–­ï¼š</p>\n<ul>\n<li>è¿™æ˜¯ä¸€ä¸ªâ€œæŸ¥ç”¨æˆ·â€çš„è¯·æ±‚</li>\n<li>å½“å‰ä¸Šä¸‹æ–‡é‡Œæœ‰æ²¡æœ‰èƒ½å®Œæˆè¿™ä»¶äº‹çš„ Skillï¼Ÿ</li>\n<li>å¦‚æœ MCP Client æ³¨å†Œè¿‡ç±»ä¼¼ï¼š</li>\n</ul>\n<div class=\"cnblogs_code\">\n<pre>get_user_by_email</pre>\n</div>\n<p>Claude å°±ä¼šç»§ç»­ã€‚</p>\n<p><strong>2ï¸âƒ£ Claude ç”Ÿæˆ MCP è°ƒç”¨ï¼ˆç»“æ„åŒ–ï¼‰</strong></p>\n<p>ä¸æ˜¯è‡ªç„¶è¯­è¨€ï¼Œè€Œæ˜¯ç±»ä¼¼è¿™æ ·çš„ç»“æ„åŒ–è¯·æ±‚ï¼š</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 0, 1);\">{\n  </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">tool</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>: <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">get_user_by_email</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">,\n  </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">arguments</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">: {\n    </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">email</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>: <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">test@example.com</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">\n  }\n}</span></pre>\n</div>\n<p>è¿™ä¸€æ­¥éå¸¸é‡è¦ï¼š<strong>æ¨¡å‹å·²ç»ä»â€œç”Ÿæˆæ–‡æœ¬â€åˆ‡æ¢æˆâ€œç”Ÿæˆç»“æ„åŒ–æ„å›¾â€ã€‚</strong></p>\n<p><strong>3ï¸âƒ£ MCP Client åšæ ¡éªŒ</strong></p>\n<p>MCP Client ä¼šæ£€æŸ¥ï¼š</p>\n<ul>\n<li>Skill æ˜¯å¦å­˜åœ¨</li>\n<li>å‚æ•°æ˜¯å¦ç¬¦åˆ Schema</li>\n<li>æ˜¯å¦æœ‰æƒé™è°ƒç”¨</li>\n</ul>\n<p>ä¸é€šè¿‡ï¼Œç›´æ¥æ‹¦æˆªã€‚</p>\n<p><strong>4ï¸âƒ£ Skill Server æ‰§è¡ŒçœŸå®é€»è¾‘</strong></p>\n<p>æ¯”å¦‚ï¼š</p>\n<ul>\n<li>æŸ¥æ•°æ®åº“</li>\n<li>è°ƒå†…éƒ¨ API</li>\n<li>è¯»å–æ–‡ä»¶</li>\n</ul>\n<p><strong>5ï¸âƒ£ è¿”å›ç»“æ„åŒ–ç»“æœ</strong></p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 0, 1);\">{\n  </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">id</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>: <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">u_123</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">,\n  </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">name</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>: <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Alice</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">,\n  </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">email</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>: <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">test@example.com</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">,\n  </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">level</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>: <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">VIP</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">\n}</span></pre>\n</div>\n<p><strong>6ï¸âƒ£ Claude æŠŠç»“æœâ€œåƒâ€å›ä¸Šä¸‹æ–‡</strong></p>\n<p>æ³¨æ„è¿™é‡Œä¸æ˜¯â€œå±•ç¤ºç»™ç”¨æˆ·â€ï¼Œè€Œæ˜¯ï¼š<strong>ä½œä¸ºæ–°ä¸Šä¸‹æ–‡ç»§ç»­æ¨ç†</strong>ã€‚Claude å¯èƒ½ä¼šæ¥ç€åˆ†æã€å¯¹æ¯”ã€æ€»ç»“ï¼Œæœ€åæ‰ç”Ÿæˆè‡ªç„¶è¯­è¨€å›å¤ã€‚</p>\n<h2>2.6&nbsp;ä¸€ä¸ªæœ€å°å¯è¿è¡Œçš„ MCP Skill ç¤ºä¾‹</h2>\n<p>ä¸‹é¢è¿™ä¸ªç¤ºä¾‹éå¸¸ç®€å•ï¼Œä½†å·²ç»å…·å¤‡ MCP çš„å®Œæ•´å½¢æ€ã€‚</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 0, 1);\">from mcp.server import Server\n\nserver </span>= Server(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">user_service</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n\n@server.tool()\ndef get_user_by_email(email: str) </span>-&gt;<span style=\"color: rgba(0, 0, 0, 1);\"> dict:\n    </span><span style=\"color: rgba(128, 0, 0, 1);\">\"\"\"\n</span><span style=\"color: rgba(0, 0, 0, 1);\">    Query user information by email\n    </span><span style=\"color: rgba(128, 0, 0, 1);\">\"\"\"\n</span>    <span style=\"color: rgba(0, 0, 255, 1);\">if</span> email == <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">test@example.com</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">:\n        return {\n            </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">id</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>: <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">u_123</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">,\n            </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">name</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>: <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Alice</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">,\n            </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">email</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">: email,\n            </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">level</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>: <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">VIP</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">\n        }\n    return {}\n\nserver.run()</span></pre>\n</div>\n<p>ä½ ä¼šå‘ç°ï¼š</p>\n<ul>\n<li>æ²¡æœ‰ prompt</li>\n<li>æ²¡æœ‰ AI é€»è¾‘</li>\n<li>åªæ˜¯çº¯èƒ½åŠ›å®šä¹‰</li>\n</ul>\n<p>ä½† Claude ä¼šè‡ªåŠ¨ç†è§£ï¼š</p>\n<ul>\n<li>ä»€ä¹ˆæ—¶å€™ç”¨å®ƒ</li>\n<li>æ€ä¹ˆç”¨</li>\n<li>ç”¨å®Œä¹‹åæ€ä¹ˆç»§ç»­æ€è€ƒ</li>\n</ul>\n<h2>2.7&nbsp;ä¸ºä»€ä¹ˆ MCP å¯¹ Agent ç‰¹åˆ«é‡è¦ï¼Ÿ</h2>\n<p>å¦‚æœä½ åšè¿‡ Agentï¼Œä¸€å®šè¸©è¿‡è¿™äº›å‘ï¼š</p>\n<ul>\n<li>æµç¨‹å†™æ­»</li>\n<li>çŠ¶æ€éš¾ç»´æŠ¤</li>\n<li>ä¸€æ­¥å¤±è´¥å…¨ç›˜å´©</li>\n<li>èƒ½åŠ›è¶Šå¤šè¶Šæ··ä¹±</li>\n</ul>\n<p>MCP çš„å¥½å¤„åœ¨äºï¼š</p>\n<ul>\n<li>Agent ä¸éœ€è¦æå‰å†™æ­»æµç¨‹ï¼Œæ¨¡å‹å¯ä»¥åŠ¨æ€è§„åˆ’ã€‚</li>\n</ul>\n<p><strong>ä¸€ä¸ªå…¸å‹ Agent è¡Œä¸º</strong>ï¼š</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 0, 1);\">ç”¨æˆ·éœ€æ±‚ï¼š\n\nâ€œå¸®æˆ‘åˆ†æè¿™ä¸ªç”¨æˆ·æœ€è¿‘çš„æ¶ˆè´¹æƒ…å†µï¼Œå¹¶ç»™å‡ºå»ºè®®ã€‚â€</span></pre>\n</div>\n<p>Claude å¯èƒ½ä¼šï¼š</p>\n<ul>\n<li>è°ƒç”¨ get_user_profile</li>\n<li>è°ƒç”¨ search_orders</li>\n<li>æ±‡æ€»æ•°æ®</li>\n<li>ç»™å‡ºåˆ†æå’Œå»ºè®®</li>\n<li>ä½ ä¸éœ€è¦å†™ if/else æµç¨‹ã€‚</li>\n</ul>\n<h2>2.8&nbsp;MCP å’Œ Function Calling çš„æœ¬è´¨åŒºåˆ«</h2>\n<p>å¾ˆå¤šäººä¼šé—®ï¼š</p>\n<ul>\n<li>â€œè¿™å’Œ OpenAI çš„ Function Calling æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿâ€</li>\n</ul>\n<p>ç®€å•è¯´ä¸€å¥ï¼š</p>\n<ul>\n<li>Function Calling æ˜¯èƒ½åŠ›ç‚¹ï¼ŒMCP æ˜¯èƒ½åŠ›ä½“ç³»ã€‚</li>\n</ul>\n<p><img alt=\"image\" height=\"751\" src=\"https://img2024.cnblogs.com/blog/666745/202512/666745-20251230224051152-69932232.png\" width=\"1378\" /></p>\n<h2>2.9&nbsp;åœ¨çœŸå®å·¥ç¨‹ä¸­å¦‚ä½•ç”¨å¥½ MCPï¼Ÿ</h2>\n<p>ä¸€äº›ç»éªŒä¹‹è°ˆï¼š</p>\n<p><strong>Skill è®¾è®¡å»ºè®®</strong></p>\n<ul>\n<li>ä¸€ä¸ª Skill åªåšä¸€ä»¶äº‹</li>\n<li>è¾“å…¥è¾“å‡ºä¸€å®šè¦ç¨³å®š</li>\n<li>ä¸è¦è¿”å›è‡ªç„¶è¯­è¨€</li>\n<li>é”™è¯¯ä¹Ÿè¦ç»“æ„åŒ–</li>\n</ul>\n<p><strong>ä¸è¦åšçš„äº‹æƒ…</strong></p>\n<ul>\n<li>æŠŠä¸šåŠ¡é€»è¾‘å†™è¿› Prompt</li>\n<li>ä¸€ä¸ª Skill å¹²äº”å…­ä»¶äº‹</li>\n<li>è®©æ¨¡å‹è‡ªå·±æ‹¼ SQL</li>\n<li>è®© Skill è¿”å›â€œåˆ†æç»“è®ºâ€</li>\n</ul>\n<h2>2.10&nbsp;æˆ‘å¯¹ MCP çš„ä¸€ä¸ªåˆ¤æ–­</h2>\n<p>ç«™åœ¨å·¥ç¨‹è§†è§’ï¼Œæˆ‘è®¤ä¸ºï¼š</p>\n<ul>\n<li>MCP æ˜¯ç›®å‰æœ€æ¥è¿‘â€œå¤§æ¨¡å‹æ“ä½œç³»ç»Ÿæ¥å£â€çš„è®¾è®¡ä¹‹ä¸€ã€‚</li>\n</ul>\n<p>å®ƒåšçš„ä¸æ˜¯è®©æ¨¡å‹â€œæ›´èªæ˜â€ï¼Œè€Œæ˜¯è®©æ¨¡å‹ï¼š</p>\n<ul>\n<li>æ›´å¯é </li>\n<li>æ›´å¯æ§</li>\n<li>æ›´åƒä¸€ä¸ªçœŸæ­£èƒ½è½åœ°çš„ç³»ç»Ÿç»„ä»¶</li>\n</ul>\n<h1>3.æ€»ç»“</h1>\n<p>å¦‚æœä½ åªæ˜¯åš Demoï¼ŒMCP å¯èƒ½æ˜¾å¾—æœ‰ç‚¹â€œé‡â€ã€‚</p>\n<p>ä½†å¦‚æœä½ åœ¨åšçš„æ˜¯ï¼š</p>\n<ul>\n<li>ä¼ä¸šçº§ AI åŠ©æ‰‹</li>\n<li>AI ç¼–ç¨‹ç³»ç»Ÿ</li>\n<li>å¤š Agent è‡ªåŠ¨åŒ–å¹³å°</li>\n</ul>\n<p>é‚£ MCP ä¸æ˜¯â€œå¯é€‰é¡¹â€ï¼Œè€Œæ˜¯è¿Ÿæ—©è¦èµ°åˆ°çš„é‚£ä¸€æ­¥ã€‚</p>\n<h1 class=\"ds-markdown-paragraph\">4.ç»“æŸè¯­</h1>\n<p>è¿™ç¯‡åšå®¢å°±å’Œå¤§å®¶åˆ†äº«åˆ°è¿™é‡Œï¼Œå¦‚æœå¤§å®¶åœ¨ç ”ç©¶å­¦ä¹ çš„è¿‡ç¨‹å½“ä¸­æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå¯ä»¥åŠ ç¾¤è¿›è¡Œè®¨è®ºæˆ–å‘é€é‚®ä»¶ç»™æˆ‘ï¼Œæˆ‘ä¼šå°½æˆ‘æ‰€èƒ½ä¸ºæ‚¨è§£ç­”ï¼Œä¸å›å…±å‹‰ï¼</p>\n<p>å¦å¤–ï¼Œåšä¸»å‡ºæ–°ä¹¦äº†ã€Š<span style=\"color: rgba(255, 0, 0, 1);\"><strong><a href=\"https://item.jd.com/14421833.html\" rel=\"noopener nofollow\" target=\"_blank\"><span style=\"color: rgba(255, 0, 0, 1);\">Hadoopä¸Sparkå¤§æ•°æ®å…¨æ™¯è§£æ</span></a></strong></span>ã€‹ã€åŒæ—¶å·²å‡ºç‰ˆçš„ã€Š<strong><span style=\"color: rgba(0, 0, 255, 1);\"><a href=\"https://item.jd.com/14699434.html\" rel=\"noopener nofollow\" target=\"_blank\"><span style=\"color: rgba(0, 0, 255, 1);\">æ·±å…¥ç†è§£Hive</span></a></span></strong>ã€‹ã€ã€Š<span style=\"color: rgba(0, 0, 255, 1);\"><strong><a href=\"https://item.jd.com/12455361.html\" rel=\"noopener nofollow\" target=\"_blank\"><span style=\"color: rgba(0, 0, 255, 1);\">Kafkaå¹¶ä¸éš¾å­¦</span></a></strong></span>ã€‹å’Œã€Š<span style=\"color: rgba(0, 0, 255, 1);\"><strong><a href=\"https://item.jd.com/12371763.html\" rel=\"noopener nofollow\" target=\"_blank\"><span style=\"color: rgba(0, 0, 255, 1);\">Hadoopå¤§æ•°æ®æŒ–æ˜ä»å…¥é—¨åˆ°è¿›é˜¶å®æˆ˜</span></a></strong></span>ã€‹ä¹Ÿå¯ä»¥å’Œæ–°ä¹¦é…å¥—ä½¿ç”¨ï¼Œå–œæ¬¢çš„æœ‹å‹æˆ–åŒå­¦ï¼Œ å¯ä»¥<span style=\"color: rgba(255, 0, 0, 1);\"><strong>åœ¨å…¬å‘Šæ é‚£é‡Œç‚¹å‡»è´­ä¹°é“¾æ¥è´­ä¹°åšä¸»çš„ä¹¦</strong></span>è¿›è¡Œå­¦ä¹ ï¼Œåœ¨æ­¤æ„Ÿè°¢å¤§å®¶çš„æ”¯æŒã€‚å…³æ³¨ä¸‹é¢å…¬ä¼—å·ï¼Œæ ¹æ®æç¤ºï¼Œå¯å…è´¹è·å–ä¹¦ç±çš„æ•™å­¦è§†é¢‘ã€‚</p>\n</div>\n<div id=\"MySignature\">\n    <div>\n<b class=\"b1\"></b><b class=\"b2 d1\"></b><b class=\"b3 d1\"></b><b class=\"b4 d1\"></b>\n<div class=\"b d1 k\">  \nè”ç³»æ–¹å¼ï¼š\n<br />\né‚®ç®±ï¼šsmartloli.org@gmail.com\n<br />\n<strong style=\"color: green;\">QQç¾¤ï¼ˆHiveä¸AIå®æˆ˜ã€æ–°ç¾¤ã€‘ï¼‰ï¼š935396818</strong>\n<br />\nQQç¾¤ï¼ˆHadoop - äº¤æµç¤¾åŒº1ï¼‰ï¼š424769183\n<br />\nQQç¾¤ï¼ˆKafkaå¹¶ä¸éš¾å­¦ï¼‰ï¼š825943084\n<br />\næ¸©é¦¨æç¤ºï¼šè¯·å¤§å®¶åŠ ç¾¤çš„æ—¶å€™å†™ä¸ŠåŠ ç¾¤ç†ç”±ï¼ˆå§“åï¼‹å…¬å¸/å­¦æ ¡ï¼‰ï¼Œæ–¹ä¾¿ç®¡ç†å‘˜å®¡æ ¸ï¼Œè°¢è°¢ï¼\n<br />\n<h3>çƒ­çˆ±ç”Ÿæ´»ï¼Œäº«å—ç¼–ç¨‹ï¼Œä¸å›å…±å‹‰ï¼</h3>  \n</div>\n<b class=\"b4b d1\"></b><b class=\"b3b d1\"></b><b class=\"b2b d1\"></b><b class=\"b1b\"></b>\n</div>\n<br />\n<div>\n<b class=\"b1\"></b><b class=\"b2 d1\"></b><b class=\"b3 d1\"></b><b class=\"b4 d1\"></b>\n<div class=\"b d1 k\">\n<h3>å…¬ä¼—å·ï¼š</h3>\n<h3><img src=\"https://www.cnblogs.com/images/cnblogs_com/smartloli/1324636/t_qr.png\" style=\"width: 8%; margin-left: 10px;\" /></h3>\n</div>\n<b class=\"b4b d1\"></b><b class=\"b3b d1\"></b><b class=\"b2b d1\"></b><b class=\"b1b\"></b>\n</div>\n<br />\n<div>\n<b class=\"b1\"></b><b class=\"b2 d1\"></b><b class=\"b3 d1\"></b><b class=\"b4 d1\"></b>\n<div class=\"b d1 k\">\n<h3>ä½œè€…ï¼šå“¥ä¸æ˜¯å°èè‰ ï¼»<a href=\"http://www.kafka-eagle.org/\" style=\"color: green;\" target=\"_blank\">å…³äºæˆ‘</a>ï¼½ï¼»<a href=\"http://www.cnblogs.com/smartloli/p/4241701.html\" style=\"color: green;\" target=\"_blank\">çŠ’èµ</a>ï¼½</h3>\n<h3>å‡ºå¤„ï¼š<a href=\"http://www.cnblogs.com/smartloli/\" style=\"color: green;\" target=\"_blank\">http://www.cnblogs.com/smartloli/</a></h3>\n<h3>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼Œè°¢è°¢åˆä½œï¼</h3>\n</div>\n<b class=\"b4b d1\"></b><b class=\"b3b d1\"></b><b class=\"b2b d1\"></b><b class=\"b1b\"></b>\n</div>\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2025-12-30 22:48</span>&nbsp;\n<a href=\"https://www.cnblogs.com/smartloli\">å“¥ä¸æ˜¯å°èè‰</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">62</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "Flinkæºç é˜…è¯»ï¼šCheckpointæœºåˆ¶ï¼ˆä¸‹ï¼‰",
      "link": "https://www.cnblogs.com/Jackeyzhe/p/19423123",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/Jackeyzhe/p/19423123\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2025-12-30 20:13\">\n    <span>Flinkæºç é˜…è¯»ï¼šCheckpointæœºåˆ¶ï¼ˆä¸‹ï¼‰</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                    <div id=\"cnblogs_post_description\" style=\"display: none;\">\n        <img alt=\"Flinkæºç é˜…è¯»ï¼šCheckpointæœºåˆ¶ï¼ˆä¸‹ï¼‰\" class=\"desc_img\" src=\"https://img2024.cnblogs.com/blog/1828322/202512/1828322-20251230201244606-898036727.png\" />\n        ä¹¦æ¥ä¸Šå›ï¼Œå‰æ–‡æˆ‘ä»¬æ¢³ç†çš„ Checkpoint æœºåˆ¶çš„æºç ï¼Œä½†æ˜¯å¯¹äºå¦‚ä½•å†™å…¥çŠ¶æ€æ•°æ®å¹¶æ²¡æœ‰æ·±å…¥äº†è§£ã€‚ä»Šå¤©å°±ä¸€èµ·æ¥æ¢³ç†ä¸€ä¸‹è¿™éƒ¨åˆ†ä»£ç ã€‚\n    </div>\n<div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<p>ä¹¦æ¥ä¸Šå›ï¼Œå‰æ–‡æˆ‘ä»¬æ¢³ç†çš„ Checkpoint æœºåˆ¶çš„æºç ï¼Œä½†æ˜¯å¯¹äºå¦‚ä½•å†™å…¥çŠ¶æ€æ•°æ®å¹¶æ²¡æœ‰æ·±å…¥äº†è§£ã€‚ä»Šå¤©å°±ä¸€èµ·æ¥æ¢³ç†ä¸€ä¸‹è¿™éƒ¨åˆ†ä»£ç ã€‚</p>\n<h3 id=\"å†™åœ¨å‰é¢\">å†™åœ¨å‰é¢</h3>\n<p>å‰é¢æˆ‘ä»¬äº†è§£åˆ°åœ¨ <code>StreamOperatorStateHandler.snapshotState</code> æ–¹æ³•ä¸­ä¼šåˆ›å»ºå››ä¸ª Futureï¼Œç”¨æ¥æ”¯æŒä¸åŒç±»å‹çš„çŠ¶æ€å†™å…¥ã€‚</p>\n<pre><code class=\"language-java\">snapshotInProgress.setKeyedStateRawFuture(snapshotContext.getKeyedStateStreamFuture());\nsnapshotInProgress.setOperatorStateRawFuture(\n        snapshotContext.getOperatorStateStreamFuture());\n\nif (null != operatorStateBackend) {\n    snapshotInProgress.setOperatorStateManagedFuture(\n            operatorStateBackend.snapshot(\n                    checkpointId, timestamp, factory, checkpointOptions));\n}\n\nif (useAsyncState &amp;&amp; null != asyncKeyedStateBackend) {\n    if (isCanonicalSavepoint(checkpointOptions.getCheckpointType())) {\n        throw new UnsupportedOperationException(\"Not supported yet.\");\n    } else {\n        snapshotInProgress.setKeyedStateManagedFuture(\n                asyncKeyedStateBackend.snapshot(\n                        checkpointId, timestamp, factory, checkpointOptions));\n    }\n}\n</code></pre>\n<p>æˆ‘ä»¬ä¸»è¦å…³å¿ƒ ManagedStateï¼ŒManagedState éƒ½æ˜¯è°ƒç”¨ <code>Snapshotable.snapshot</code> æ–¹æ³•æ¥å†™å…¥æ•°æ®çš„ï¼Œä¸‹é¢å…·ä½“çœ‹ KeyedState å’Œ OperatorState çš„å…·ä½“å®ç°ã€‚</p>\n<h3 id=\"keyedstate\">KeyedState</h3>\n<p>KeyedState æˆ‘ä»¬ä»¥ HeapKeyedStateBackend ä¸ºä¾‹ï¼Œè¿™é‡Œå…ˆæ˜¯åˆ›å»ºäº†ä¸€ä¸ª <code>SnapshotStrategyRunner</code> å®ä¾‹ï¼ŒSnapshotStrategyRunner æ˜¯ä¸€ä¸ªå¿«ç…§ç­–ç•¥çš„ä¸€ä¸ªæ‰§è¡Œç±»ï¼Œåˆ›å»ºå®Œæˆåå°±ä¼šè°ƒç”¨ snapshot æ–¹æ³•ã€‚åœ¨è¿™ä¸ª snapshot æ–¹æ³•ä¸­ä¸»è¦åšäº†åšäº†ä¸‹é¢å‡ ä»¶äº‹ï¼š</p>\n<ol>\n<li>\n<p>åŒæ­¥æ‹·è´çŠ¶æ€æ•°æ®çš„å¼•ç”¨ã€‚</p>\n</li>\n<li>\n<p>åˆ›å»º Checkpoint è¾“å‡ºæµ <code>CheckpointStateOutputStream</code></p>\n</li>\n<li>\n<p>å®Œæˆ Checkpoint æŒä¹…åŒ–</p>\n</li>\n<li>\n<p>è¿”å›å…ƒä¿¡æ¯ç»“æœ</p>\n</li>\n</ol>\n<h4 id=\"çŠ¶æ€æ•°æ®å¼•ç”¨æ‹·è´\">çŠ¶æ€æ•°æ®å¼•ç”¨æ‹·è´</h4>\n<p>åœ¨ HeapSnapshotStrategy çš„ syncPrepareResources æ–¹æ³•ä¸­è°ƒç”¨äº† <code>HeapSnapshotResources.create</code> æ–¹æ³•ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„å‚æ•°æ˜¯ registeredKVStatesï¼Œå®ƒä»£è¡¨æˆ‘ä»¬åœ¨ä¸šåŠ¡ä»£ç ä¸­æ³¨å†Œçš„çŠ¶æ€æ•°æ®è¡¨ã€‚</p>\n<pre><code class=\"language-java\">ValueStateDescriptor&lt;Tuple2&lt;Long, Long&gt;&gt; descriptor =\n        new ValueStateDescriptor&lt;&gt;(\n                \"average\",\n                TypeInformation.of(new TypeHint&lt;Tuple2&lt;Long, Long&gt;&gt;() {}));\n</code></pre>\n<p>ä¾‹å¦‚æˆ‘ä»¬è¿™æ ·æ³¨å†ŒçŠ¶æ€æ•°æ®è¡¨ï¼Œé‚£ä¹ˆ registeredKVStates çš„ key å°±æ˜¯ averageï¼Œvalue å°±æ˜¯çŠ¶æ€è¡¨ï¼Œå®ƒé€šå¸¸æ˜¯ä¸€ä¸ª CopyOnWriteStateTableã€‚å…·ä½“çš„çŠ¶æ€æ•°æ®å¼•ç”¨æ‹·è´çš„é€»è¾‘åœ¨ <code>processSnapshotMetaInfoForAllStates</code> æ–¹æ³•ä¸­ã€‚</p>\n<pre><code class=\"language-java\">private static void processSnapshotMetaInfoForAllStates(\n        List&lt;StateMetaInfoSnapshot&gt; metaInfoSnapshots,\n        Map&lt;StateUID, StateSnapshot&gt; cowStateStableSnapshots,\n        Map&lt;StateUID, Integer&gt; stateNamesToId,\n        Map&lt;String, ? extends StateSnapshotRestore&gt; registeredStates,\n        StateMetaInfoSnapshot.BackendStateType stateType) {\n\n    for (Map.Entry&lt;String, ? extends StateSnapshotRestore&gt; kvState :\n            registeredStates.entrySet()) {\n        final StateUID stateUid = StateUID.of(kvState.getKey(), stateType);\n        stateNamesToId.put(stateUid, stateNamesToId.size());\n        StateSnapshotRestore state = kvState.getValue();\n        if (null != state) {\n            final StateSnapshot stateSnapshot = state.stateSnapshot();\n            metaInfoSnapshots.add(stateSnapshot.getMetaInfoSnapshot());\n            cowStateStableSnapshots.put(stateUid, stateSnapshot);\n        }\n    }\n}\n</code></pre>\n<p>é’ˆå¯¹æ¯ä¸ª Stateï¼Œè¿™é‡Œéƒ½åˆ›å»ºä¸€ä¸ª CopyOnWriteStateTableSnapshotï¼Œç„¶åå­˜åœ¨ cowStateStableSnapshots é‡Œã€‚è¿™é‡Œ CopyOnWriteStateTableSnapshot å°±æ˜¯æ‹·è´æ•°æ®çš„å¼•ç”¨ï¼Œå› æ­¤å¯ä»¥åŒæ­¥æ‰§è¡Œã€‚</p>\n<h4 id=\"åˆ›å»º-checkpointstateoutputstream\">åˆ›å»º CheckpointStateOutputStream</h4>\n<p>åˆ›å»º CheckpointStateOutputStream çš„æ–¹æ³•æ˜¯ <code>CheckpointStreamWithResultProvider.createSimpleStream</code>ï¼Œç”Ÿäº§ç¯å¢ƒé€šå¸¸ä½¿ç”¨çš„æ˜¯ FsCheckpointStateOutputStreamã€‚FsCheckpointStateOutputStream ä¸­çš„å‚æ•°å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"language-java\">// çŠ¶æ€æ•°æ®å†™å…¥ç¼“å†²æ•°ç»„ï¼Œæ•°æ®å…ˆå†™åˆ°å†…å­˜ä¸­ï¼Œç„¶å flush åˆ°ç£ç›˜\nprivate final byte[] writeBuffer;\n\n// ç¼“å†²æ•°ç»„å½“å‰å†™å…¥ä½ç½®\nprivate int pos;\n\n// æ–‡ä»¶è¾“å‡ºæµ\nprivate volatile FSDataOutputStream outStream;\n\n// å†…å­˜ä¸­çŠ¶æ€å¤§å°é˜ˆå€¼ï¼Œè¶…è¿‡é˜ˆå€¼ä¼š flush åˆ°ç£ç›˜ï¼Œé»˜è®¤20KBï¼Œæœ€å¤§1MB\n// ç›®çš„æ˜¯ä¸ºäº†å‡å°‘å°æ–‡ä»¶æ•°é‡\nprivate final int localStateThreshold;\n\n// checkpoint åŸºç¡€è·¯å¾„\nprivate final Path basePath;\n\n// Flink è‡ªå·±å°è£…çš„æ–‡ä»¶ç³»ç»Ÿ\nprivate final FileSystem fs;\n\n// çŠ¶æ€æ•°æ®å®Œæ•´è·¯å¾„\nprivate volatile Path statePath;\n\n// ç›¸å¯¹è·¯å¾„\nprivate String relativeStatePath;\n\n// æ˜¯å¦å·²å…³é—­\nprivate volatile boolean closed;\n\n// æ˜¯å¦å…è®¸ä½¿ç”¨ç›¸å¯¹è·¯å¾„\nprivate final boolean allowRelativePaths;\n</code></pre>\n<h4 id=\"checkpoint-æŒä¹…åŒ–\">Checkpoint æŒä¹…åŒ–</h4>\n<p>åˆ›å»ºå®Œ CheckpointStateOutputStream ä¹‹åï¼Œä¼šè°ƒç”¨ <code>serializationProxy.write(outView)</code> å†™å…¥çŠ¶æ€çš„å…ƒæ•°æ®ã€‚å…ƒæ•°æ®åŒ…æ‹¬çŠ¶æ€çš„åç§°ã€ç±»å‹ã€åºåˆ—åŒ–å™¨ç­‰ä¸€äº›é…ç½®ã€‚</p>\n<p>å…ƒæ•°æ®å†™å®Œä¹‹åï¼Œå°±å¼€å§‹åˆ†ç»„å†™å…¥çŠ¶æ€æ•°æ®ã€‚åœ¨å†™å…¥æ—¶ï¼Œå…ˆå†™ keyGroupIdï¼Œç„¶åå†å†™å½“å‰åˆ†ç»„çš„çŠ¶æ€æ•°æ®</p>\n<pre><code class=\"language-java\">for (int keyGroupPos = 0;\n        keyGroupPos &lt; keyGroupRange.getNumberOfKeyGroups();\n        ++keyGroupPos) {\n    int keyGroupId = keyGroupRange.getKeyGroupId(keyGroupPos);\n    keyGroupRangeOffsets[keyGroupPos] = localStream.getPos();\n    // å†™ keyGroupId\n    outView.writeInt(keyGroupId);\n\n    for (Map.Entry&lt;StateUID, StateSnapshot&gt; stateSnapshot :\n            cowStateStableSnapshots.entrySet()) {\n        StateSnapshot.StateKeyGroupWriter partitionedSnapshot =\n                stateSnapshot.getValue().getKeyGroupWriter();\n        try (OutputStream kgCompressionOut =\n                keyGroupCompressionDecorator.decorateWithCompression(localStream)) {\n            DataOutputViewStreamWrapper kgCompressionView =\n                    new DataOutputViewStreamWrapper(kgCompressionOut);\n            kgCompressionView.writeShort(stateNamesToId.get(stateSnapshot.getKey()));\n            // å†™çŠ¶æ€æ•°æ®\n            partitionedSnapshot.writeStateInKeyGroup(kgCompressionView, keyGroupId);\n        } // this will just close the outer compression stream\n    }\n}\n</code></pre>\n<p>çŠ¶æ€æ•°æ®å†™å…¥çš„è°ƒç”¨é“¾è·¯å¦‚ä¸‹</p>\n<p><img alt=\"writeState\" class=\"lazyload\" /></p>\n<pre><code class=\"language-java\">public void writeState(\n        TypeSerializer&lt;K&gt; keySerializer,\n        TypeSerializer&lt;N&gt; namespaceSerializer,\n        TypeSerializer&lt;S&gt; stateSerializer,\n        @Nonnull DataOutputView dov,\n        @Nullable StateSnapshotTransformer&lt;S&gt; stateSnapshotTransformer)\n        throws IOException {\n    SnapshotIterator&lt;K, N, S&gt; snapshotIterator =\n            getIterator(\n                    keySerializer,\n                    namespaceSerializer,\n                    stateSerializer,\n                    stateSnapshotTransformer);\n\n    int size = snapshotIterator.size();\n    dov.writeInt(size);\n    while (snapshotIterator.hasNext()) {\n        StateEntry&lt;K, N, S&gt; stateEntry = snapshotIterator.next();\n        namespaceSerializer.serialize(stateEntry.getNamespace(), dov);\n        keySerializer.serialize(stateEntry.getKey(), dov);\n        stateSerializer.serialize(stateEntry.getState(), dov);\n    }\n}\n</code></pre>\n<h4 id=\"è¿”å›ç»“æœ\">è¿”å›ç»“æœ</h4>\n<p>æœ€åä¸€æ­¥å°±æ˜¯å°è£…å¹¶è¿”å›å…ƒä¿¡æ¯ï¼Œè¿™é‡Œæ”¶é›†çš„ä¿¡æ¯åŒ…æ‹¬äº†æ¯ä¸ª keyGroup çš„çŠ¶æ€æ•°æ®åœ¨çŠ¶æ€æ–‡ä»¶ä¸­çš„å­˜å‚¨ä½ç½®ï¼ŒçŠ¶æ€æ•°æ®å­˜å‚¨çš„æ–‡ä»¶è·¯å¾„ã€æ–‡ä»¶å¤§å°ç­‰ã€‚</p>\n<h3 id=\"operatorstate\">OperatorState</h3>\n<p>OperatorState çš„å¤„ç†é€»è¾‘æ¯” KeyedState æ›´ç®€å•ä¸€äº›ï¼Œæµç¨‹ä¸Šéƒ½æ˜¯å…ˆåšçŠ¶æ€æ•°æ®çš„å¼•ç”¨å¿«ç…§ï¼Œç„¶åå†™å…¥çŠ¶æ€æ•°æ®å’Œè¿”å›ç»“æœã€‚åœ¨å†™å…¥æ•°æ®æ—¶ï¼Œæ²¡æœ‰äº†åˆ†ç»„å†™å…¥çš„é€»è¾‘ã€‚ç›´æ¥å¤„ç† operatorState å’Œ broadcastStateã€‚è¿™é‡Œå°±åªè´´ä¸€ä¸‹è°ƒç”¨æµç¨‹ï¼Œä¸åšè¿‡å¤šèµ˜è¿°äº†ã€‚</p>\n<p><img alt=\"operatorState\" class=\"lazyload\" /></p>\n<h3 id=\"æ€»ç»“\">æ€»ç»“</h3>\n<p>æœ¬æ–‡æˆ‘ä»¬é‡ç‚¹æ¢³ç†äº† KeyedState æ•°æ®å†™å…¥çš„ä»£ç ã€‚å…¶ä¸»è¦æ­¥éª¤åŒ…æ‹¬ï¼šåŒæ­¥æ‹·è´çŠ¶æ€æ•°æ®çš„å¼•ç”¨ï¼Œåˆ›å»º Checkpoint è¾“å‡ºæµ <code>CheckpointStateOutputStream</code> å¹¶å®Œæˆ Checkpoint æŒä¹…åŒ–ï¼Œæœ€åè¿”å›å…ƒä¿¡æ¯ç»“æœã€‚OperatorState çš„å¤„ç†è¿‡ç¨‹å’Œ KeyedState çš„è¿‡ç¨‹ç±»ä¼¼ï¼Œåªæ˜¯å°‘äº†åˆ†ç»„çš„é€»è¾‘ã€‚</p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2025-12-30 20:13</span>&nbsp;\n<a href=\"https://www.cnblogs.com/Jackeyzhe\">Jackeyzhe</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">20</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "è§„åˆ’ä¸­ä¸»è¦ä½¿ç”¨çš„åœ°å›¾ç±»å‹",
      "link": "https://www.cnblogs.com/zylyehuo/p/19419173",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/zylyehuo/p/19419173\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2025-12-30 20:07\">\n    <span>è§„åˆ’ä¸­ä¸»è¦ä½¿ç”¨çš„åœ°å›¾ç±»å‹</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<blockquote>\n<p>åšå®¢åœ°å€ï¼š<a href=\"https://www.cnblogs.com/zylyehuo/\" target=\"_blank\">https://www.cnblogs.com/zylyehuo/</a></p>\n</blockquote>\n<h1 id=\"occupancy-grid-map\">Occupancy Grid Map</h1>\n<blockquote>\n<p>ã€å æ®æ …æ ¼åœ°å›¾ã€‘</p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://www.bilibili.com/video/BV1GzwderECF/?spm_id_from=333.337.search-card.all.click&amp;vd_source=4acdb875c05ce9dccfce3cd6cfaac651\" rel=\"noopener nofollow\" target=\"_blank\">ç§»åŠ¨æœºå™¨äººè¿åŠ¨è§„åˆ’-ç¬¬ä¸€ç« (è¿åŠ¨è§„åˆ’ä»‹ç»ä¸åœ°å›¾æ„å»º)-ç¬¬ä¸‰èŠ‚(åœ°å›¾æ„å»ºæ–¹æ³•-Occupancy Grid Map)</a></p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://www.bilibili.com/video/BV14C4y1r7Jd/?spm_id_from=333.337.search-card.all.click&amp;vd_source=4acdb875c05ce9dccfce3cd6cfaac651\" rel=\"noopener nofollow\" target=\"_blank\">è‡ªåŠ¨é©¾é©¶ä¸­çš„Occupancy Gridå ç”¨æ …æ ¼ç®—æ³•</a></p>\n</blockquote>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230091555060-1199064499.png\" /></p>\n<ul>\n<li>åŸºäºè´å¶æ–¯å…¬å¼</li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230092048607-315558262.png\" /></p>\n<ul>\n<li>åŸºäºé©¬å°”ç§‘å¤«å‡è®¾ï¼ˆå½“å‰çš„æ¦‚ç‡ä¸ä¹‹å‰çš„æ¦‚ç‡æ˜¯ç‹¬ç«‹çš„ï¼‰</li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230092203011-2028367547.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230092225738-123828824.png\" /></p>\n<ul>\n<li>å‘ç°å­˜åœ¨ç›¸åŒé¡¹</li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230092347064-1157737378.png\" /></p>\n<ul>\n<li>å°†ä¸¤ä¸ªæ¦‚ç‡è¿›è¡Œç›¸é™¤ï¼Œçº¦å»ç›¸åŒé¡¹</li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230092755566-498805078.png\" /></p>\n<ul>\n<li>åˆ©ç”¨ log å‡½æ•°ï¼Œåˆ†ç¦»å‡ºå…ˆéªŒçŠ¶æ€</li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230093031164-242106556.png\" /></p>\n<ul>\n<li>è¿˜å‰©ä¸‹â€œé€†ä¼ æ„Ÿå™¨æ¨¡å‹â€éƒ¨åˆ†ã€ä¸ç›´è§‚ã€‘</li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230093249678-366631429.png\" /></p>\n<ul>\n<li>å†åˆ©ç”¨è´å¶æ–¯å…¬å¼ï¼Œå°†â€œé€†ä¼ æ„Ÿå™¨æ¨¡å‹â€è½¬æ¢ä¸ºâ€œä¼ æ„Ÿå™¨æ¨¡å‹â€ã€åŸºäºå½“å‰æ …æ ¼åœ°å›¾çš„çŠ¶æ€ï¼Œå¾—åˆ°çš„è¿™ä¸€æ¬¡è§‚æµ‹å€¼åº”è¯¥æ˜¯0è¿˜æ˜¯1çš„æ¦‚ç‡ã€‘ï¼Œå‘ç°åˆå‡ºç°ç›¸åŒé¡¹</li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230093716424-1872441123.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230093825914-1423272760.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230094001016-1041041406.png\" /></p>\n<ul>\n<li>å‡è®¾â€œä¼ æ„Ÿå™¨æ¨¡å‹â€æ˜¯ä¸ªå®šå€¼ã€åŸºäºè§‚æµ‹çš„æ›´æ–°æ–¹å¼ã€‘</li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230094259734-1484359303.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230094533636-1069601382.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230094914148-745996427.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230095200901-845289928.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230095233736-1331029782.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230095347220-253112120.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230095358663-165236316.png\" /></p>\n<ul>\n<li>åˆ©ç”¨æ»šåŠ¨çš„ Occupancy Grid Mapï¼Œè§£å†³â€œå¤§åœ°å›¾â€é—®é¢˜</li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230095538388-1548681780.png\" /></p>\n<h1 id=\"tsdf\">TSDF</h1>\n<blockquote>\n<p>(Truncated Signed Distance Field)ã€æˆªæ–­ç¬¦å·è·ç¦»åœºã€‘</p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://github.com/personalrobotics/OpenChisel\" rel=\"noopener nofollow\" target=\"_blank\">An open-source version of the Chisel chunked TSDF library.</a></p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://www.bilibili.com/video/BV1Xi4y1471W/?spm_id_from=333.337.search-card.all.click&amp;vd_source=4acdb875c05ce9dccfce3cd6cfaac651\" rel=\"noopener nofollow\" target=\"_blank\">è¿åŠ¨è§„åˆ’ä¹‹ TSDF map</a></p>\n</blockquote>\n<ul>\n<li>éšœç¢ç‰©å¤–é¢çš„å€¼ä¸ºæ­£å€¼ï¼Œéšœç¢ç‰©å¤–é¢çš„å€¼ä¸ºè´Ÿå€¼</li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230151947608-384612791.png\" /></p>\n<h1 id=\"esdf\">ESDF</h1>\n<blockquote>\n<p>(Euclidean Signed Distance Field)ã€æ¬§å‡ é‡Œå¾—ç¬¦å·è·ç¦»åœºã€‘</p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://www.bilibili.com/video/BV1Hnwde9EFc?spm_id_from=333.788.player.switch&amp;vd_source=4acdb875c05ce9dccfce3cd6cfaac651&amp;trackid=web_related_0.router-related-2206419-gx8f2.1767056746104.238\" rel=\"noopener nofollow\" target=\"_blank\">ç§»åŠ¨æœºå™¨äººè¿åŠ¨è§„åˆ’-ç¬¬ä¸€ç« (è¿åŠ¨è§„åˆ’ä»‹ç»ä¸åœ°å›¾æ„å»º)-ç¬¬ä¸‰èŠ‚(åœ°å›¾æ„å»ºæ–¹æ³•-ESDF)</a></p>\n</blockquote>\n<ul>\n<li>â€œä¸€å±‚â€çš„æ˜¯ ESDFï¼Œä¸Šé¢çš„å°æ …æ ¼æ˜¯ Occupancy Grid Map</li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230095632105-2084501764.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230100013176-744146623.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230100121591-1498147498.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230100151782-1360282382.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230101513785-573529793.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230135055798-1520530407.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230135316095-806542410.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230135735490-663923292.png\" /></p>\n<ul>\n<li>ä»…é’ˆå¯¹ä¸€ç»´çš„ä¼ªä»£ç </li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230135828974-1891255415.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230140300707-708995518.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230140520538-65060715.png\" /></p>\n<ul>\n<li>å¯¹äºäºŒç»´çš„æƒ…å†µï¼Œå°±æ˜¯å›ºå®š xï¼Œæ ¹æ®ä¸åŒçš„ y æ±‚è§£åˆ°è¾¾éšœç¢ç‰©çš„æœ€å°è·ç¦»</li>\n<li>ä»¥ç¬¬ä¸€åˆ—ä¸ºä¾‹</li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230140734954-316583447.png\" /></p>\n<ul>\n<li>ä»¥ç¬¬äºŒåˆ—ä¸ºä¾‹ï¼ˆæ²¡æœ‰éšœç¢ç‰©çš„æƒ…å†µï¼Œåˆ™æ¯ä¸ªä½ç½®çš„å€¼éƒ½ä¸º âˆï¼‰</li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230141116066-773952293.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230141241727-845739716.png\" /></p>\n<ul>\n<li>æ¥ç€å›ºå®š yï¼Œæ ¹æ®ä¸åŒçš„ x æ±‚è§£åˆ°è¾¾éšœç¢ç‰©çš„æœ€å°è·ç¦»</li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230141744667-376666185.png\" /></p>\n<ul>\n<li>ä»¥ä¸‹é¢ä¸‰è¡Œä¸ºä¾‹</li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230141817043-1907659702.png\" /></p>\n<ul>\n<li>å¯¹äºç¬¬ä¸€ä¸ªæ ¼å­ï¼Œx=1ï¼Œé€‰å–ã€è¿™ä¸ªæ ¼å­åˆ°åˆ«çš„æ ¼å­çš„è·ç¦» + åˆ«çš„æ ¼å­é‡Œé¢çš„â€œå€¼â€ã€‘æœ€å°çš„ç»“æœ</li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230142536264-839975597.png\" /></p>\n<ul>\n<li>å¯¹äºç¬¬äºŒä¸ªæ ¼å­ï¼Œx=2</li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230142732894-2092955561.png\" /></p>\n<ul>\n<li>åˆ©ç”¨ä¸¤æ¬¡â€œä¸€ç»´â€çš„æ±‚è§£ï¼Œè·å¾—äºŒç»´çš„ç»“æœã€ä¸‰ç»´ç±»ä¼¼ã€‘</li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230142837572-2122723745.png\" /></p>\n<ul>\n<li>éšœç¢ç‰©é‡Œé¢å­˜æ”¾çš„å€¼çš„æ„ä¹‰ï¼šåˆ°æœ€è¿‘çš„ free çš„æ …æ ¼çš„è·ç¦»ï¼ŒåŒæ—¶è¿™ä¸ªå€¼æ”¾çš„æ˜¯è´Ÿå€¼</li>\n<li>å…ˆå°†éšœç¢ç‰©å’Œ free æ …æ ¼è¿›è¡Œç¿»è½¬ï¼Œç„¶åè¿›è¡Œè®¡ç®—</li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230143237644-1636509800.png\" /></p>\n<ul>\n<li>å°†è®¡ç®—åçš„å€¼æ·»åŠ ä¸Šè´Ÿå·</li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230143311745-18788185.png\" /></p>\n<ul>\n<li>å†å’ŒåŸæ¥çš„åœºè¿›è¡Œå åŠ </li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230143344921-1946627573.png\" /></p>\n<ul>\n<li>å…ˆæ²¿ç€ z è½´ç®—ï¼Œå†æ²¿ç€ y è½´ç®—ï¼Œæœ€åæ²¿ç€ x è½´ç®—</li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230143458985-408992367.png\" /></p>\n<ul>\n<li>è¿›è¡Œç¿»è½¬æ“ä½œã€åå‘ ESDFã€‘ï¼Œè®¡ç®—éšœç¢ç‰©å†…éƒ¨çš„å€¼ã€å…ˆæ²¿ç€ z è½´ç®—ï¼Œå†æ²¿ç€ y è½´ç®—ï¼Œæœ€åæ²¿ç€ x è½´ç®—ã€‘</li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230143811950-1709618967.png\" /></p>\n<ul>\n<li>æœ€åè¿›è¡Œå åŠ </li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230143910379-1892087086.png\" /></p>\n<ul>\n<li>å¯¹äºå½“å‰ä½ç½®ä¸åœ¨æ …æ ¼ä¸­å¿ƒçš„æƒ…å†µï¼Œåˆ©ç”¨æ’å€¼è¿›è¡Œè§£å†³</li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230144224352-5167244.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230144333713-2132197098.png\" /></p>\n<ul>\n<li>ESDF åœ°å›¾æ¢¯åº¦çš„è®¡ç®—</li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230144605924-1620303920.png\" /></p>\n<h1 id=\"gaussian-map\">Gaussian Map</h1>\n<h2 id=\"3dgs\">3DGS</h2>\n<blockquote>\n<p>(3D Gaussian Splatting)ã€3D é«˜æ–¯æº…å°„åœ°å›¾ / å‰æ²¿è§†è§‰åœ°å›¾ã€‘</p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://zhuanlan.zhihu.com/p/7833648056\" rel=\"noopener nofollow\" target=\"_blank\">3D Gaussian Splattingç®—æ³•åŠå…¶å®ç°ç»†èŠ‚</a></p>\n</blockquote>\n<blockquote>\n<p>è®ºæ–‡ï¼š<a href=\"https://arxiv.org/pdf/2308.04079\" rel=\"noopener nofollow\" target=\"_blank\">3D Gaussian Splatting for Real-Time Radiance Field Rendering</a></p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://github.com/graphdeco-inria/gaussian-splatting\" rel=\"noopener nofollow\" target=\"_blank\">ä»£ç </a></p>\n</blockquote>\n<h2 id=\"gp-map\">GP Map</h2>\n<blockquote>\n<p>(Gaussian Process Map)ã€é«˜æ–¯è¿‡ç¨‹åœ°å›¾ / æ¦‚ç‡è¿ç»­åœ°å›¾ã€‘</p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://zhuanlan.zhihu.com/p/2751630763\" rel=\"noopener nofollow\" target=\"_blank\">ä»€ä¹ˆæ˜¯é«˜æ–¯è¿‡ç¨‹ï¼ˆGaussian Processes, GPï¼‰</a></p>\n</blockquote>\n<blockquote>\n<p>è®ºæ–‡ï¼š<a href=\"https://fabioramos.github.io/Publications_files/Simon_ISER2014.pdf\" rel=\"noopener nofollow\" target=\"_blank\">Gaussian process occupancy maps for dynamic environments</a></p>\n</blockquote>\n<h2 id=\"gmm\">GMM</h2>\n<blockquote>\n<p>(Gaussian Mixture Models)ã€é«˜æ–¯æ··åˆæ¨¡å‹åœ°å›¾ã€‘</p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://zhuanlan.zhihu.com/p/151671154\" rel=\"noopener nofollow\" target=\"_blank\">å¦‚ä½•é€šä¿—çš„ç†è§£é«˜æ–¯æ··åˆæ¨¡å‹ï¼ˆGaussian Mixture Modelsï¼‰ï¼‰</a></p>\n</blockquote>\n<blockquote>\n<p>è®ºæ–‡ï¼š<a href=\"https://zhuanlan.zhihu.com/p/151671154\" rel=\"noopener nofollow\" target=\"_blank\">Gaussian Mixture Models</a></p>\n</blockquote>\n<h1 id=\"nerf\">NeRF</h1>\n<blockquote>\n<p>(Neural Radiance Fields)ã€ç¥ç»è¾å°„åœºã€‘</p>\n</blockquote>\n<blockquote>\n<p>è®ºæ–‡ï¼š<a href=\"https://arxiv.org/pdf/2003.08934\" rel=\"noopener nofollow\" target=\"_blank\">Representing Scenes as Neural Radiance Fields for View Synthesis</a></p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://github.com/bmild/nerf\" rel=\"noopener nofollow\" target=\"_blank\">ä»£ç </a></p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://www.matthewtancik.com/nerf\" rel=\"noopener nofollow\" target=\"_blank\">å®˜ç½‘</a></p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://blog.csdn.net/jiaoyangwm/article/details/133804918\" rel=\"noopener nofollow\" target=\"_blank\">NeRF é¦–ç¯‡ç»å…¸è®ºæ–‡ä»‹ç»ï¼ˆECCV2020ï¼‰</a></p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://www.bilibili.com/video/BV1CC411V7oq/?spm_id_from=333.337.search-card.all.click&amp;vd_source=4acdb875c05ce9dccfce3cd6cfaac651\" rel=\"noopener nofollow\" target=\"_blank\">ã€è¾ƒçœŸç³»åˆ—ã€‘è®²äººè¯-NeRFå…¨è§£ï¼ˆåŸç†+ä»£ç +å…¬å¼ï¼‰</a></p>\n</blockquote>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230152646680-808967645.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230153232330-8093872.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230153304058-1966233738.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230153458012-810246374.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230153627018-1090646223.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230153701724-2140345591.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230153801636-51891141.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230153921564-421511957.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230154119566-421233492.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230154404671-1853328831.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230154452220-1182229856.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230154836620-1158102823.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230155102446-1293304585.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230155330237-169551366.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230155631408-2064100778.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230155728157-250263865.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230155820644-869689816.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230160626120-96920975.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230160754127-1769142361.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230160851194-233434887.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230160937600-1841363.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230161047152-122034867.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230161318891-1616916806.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230161437134-1545984944.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230161723359-1462419215.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230161925557-1973428927.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230174118921-38385255.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230174243818-575765853.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230175016337-1136716337.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230175052111-1485817129.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230175157993-2141132230.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230175345585-750664154.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230175425714-1466271787.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230175528313-2072746571.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230175732929-1433112194.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3071480/202512/3071480-20251230175830148-1190162908.png\" /></p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2025-12-30 20:07</span>&nbsp;\n<a href=\"https://www.cnblogs.com/zylyehuo\">zylyehuo</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">26</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "ä»£ç è€ƒå¤å­¦ï¼šå¦‚ä½•è®©ä½ çš„ä»£ç ä¸å†æ˜¯â€œæœªè§£ä¹‹è°œâ€ï¼Ÿ",
      "link": "https://www.cnblogs.com/huizhudev/p/19422839",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/huizhudev/p/19422839\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2025-12-30 18:29\">\n    <span>ä»£ç è€ƒå¤å­¦ï¼šå¦‚ä½•è®©ä½ çš„ä»£ç ä¸å†æ˜¯â€œæœªè§£ä¹‹è°œâ€ï¼Ÿ</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                    <div id=\"cnblogs_post_description\" style=\"display: none;\">\n        <img alt=\"ä»£ç è€ƒå¤å­¦ï¼šå¦‚ä½•è®©ä½ çš„ä»£ç ä¸å†æ˜¯â€œæœªè§£ä¹‹è°œâ€ï¼Ÿ\" class=\"desc_img\" src=\"https://img2024.cnblogs.com/blog/3695776/202512/3695776-20251230182757218-218563489.png\" />\n        å¥½çš„ä»£ç ä¸åªéœ€è¦é€»è¾‘ï¼Œæ›´éœ€è¦è§£é‡Šã€‚æœ¬æ–‡æŒ‘æˆ˜â€œä»£ç å³æ–‡æ¡£â€çš„è¿·æ€ï¼Œä»‹ç»å¦‚ä½•åˆ©ç”¨AIæŒ‡ä»¤å……å½“â€œä»£ç è€ƒå¤å­¦å®¶â€ï¼Œå°†æ™¦æ¶©çš„é€»è¾‘è½¬åŒ–ä¸ºæ¸…æ™°çš„â€œç½—å¡å¡”çŸ³ç¢‘â€å¼æ–‡æ¡£ï¼Œæ¶ˆé™¤å›¢é˜ŸçŸ¥è¯†å€ºåŠ¡ï¼Œæå‡é¡¹ç›®çš„å¯ç»´æŠ¤æ€§ä¸ä¸“ä¸šåº¦ã€‚\n    </div>\n<div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<p>ä½ æœ‰æ²¡æœ‰ç»å†è¿‡è¿™ç§<strong>â€œçµé­‚å‡ºçªâ€</strong>çš„æ—¶åˆ»ï¼š</p>\n<p>ç›¯ç€ä¸€æ®µä¸‰ä¸ªæœˆå‰è‡ªå·±äº²æ‰‹å†™çš„ä»£ç ï¼Œæ„Ÿè§‰åƒæ˜¯åœ¨çœ‹å¤–æ˜Ÿæ–‡æ˜ç•™ä¸‹çš„å¤©ä¹¦ã€‚é€»è¾‘æå…¶ç²¾å¦™ï¼Œå˜é‡åç®€å†™å¾—æå…¶æ½‡æ´’ï¼Œä½†ä½ å°±æ˜¯æ­»æ´»æƒ³ä¸èµ·æ¥â€”â€”<strong>è¿™ç©æ„å„¿åˆ°åº•æ˜¯ç”¨æ¥å¹²å˜›çš„ï¼Ÿ</strong></p>\n<p>å¦‚æœè¯´å†™ä»£ç æ˜¯æ„å»ºä¸€åº§å®ä¼Ÿçš„å®«æ®¿ï¼Œé‚£ä¹ˆå†™æ³¨é‡Šå°±æ˜¯ç»™è¿™åº§å®«æ®¿ç»˜åˆ¶â€œå¯¼æ¸¸å›¾â€ã€‚é—æ†¾çš„æ˜¯ï¼Œåœ¨èµ¶è¿›åº¦çš„ä¿®ç½—åœºé‡Œï¼Œæˆ‘ä»¬å¾€å¾€åªé¡¾ç€æ·»ç –åŠ ç“¦ï¼Œå´å¿˜äº†ç•™ä¸‹ä»»ä½•æ–‡å­—çº¿ç´¢ã€‚</p>\n<p>æœ€ç»ˆï¼Œé¡¹ç›®å˜æˆäº†ä¸€åº§<strong>â€œæ•°å­—è¿·å®«â€</strong>ã€‚æ–°æ¥çš„åŒäº‹åœ¨é‡Œé¢æ™•å¤´è½¬å‘ï¼Œæ¥æ‰‹çš„ç»´æŠ¤è€…åœ¨é‡Œé¢æ­¥æ­¥æƒŠå¿ƒï¼Œå°±è¿å§‹ä½œä¿‘è€…ä½ è‡ªå·±ï¼Œè¿‡æ®µæ—¶é—´å›æ¥ä¹Ÿæ˜¯ä¸€è„¸èŒ«ç„¶ã€‚</p>\n<p><img alt=\"ä»£ç è€ƒå¤å­¦ï¼šå¦‚ä½•è®©ä½ çš„ä»£ç ä¸å†æ˜¯â€œæœªè§£ä¹‹è°œâ€ï¼Ÿ\" class=\"lazyload\" /></p>\n<h2 id=\"-æ‰“ç ´ä»£ç å³æ–‡æ¡£çš„è¿·æ€\">ğŸº æ‰“ç ´â€œä»£ç å³æ–‡æ¡£â€çš„è¿·æ€</h2>\n<p>åœ¨ç¨‹åºå‘˜åœˆå­é‡Œï¼Œæµä¼ ç€ä¸€ä¸ªè¿·äººçš„è°è¨€ï¼š<em>â€œå¥½çš„ä»£ç æ˜¯è‡ªè§£é‡Šçš„ï¼ˆSelf-documentingï¼‰ï¼Œä¸éœ€è¦æ³¨é‡Šã€‚â€</em></p>\n<p>è¿™å¥è¯åªå¯¹äº†ä¸€åŠã€‚<br />\nå¯¹äº <code>getUserName()</code> è¿™ç§æ˜¾è€Œæ˜“è§çš„ä»£ç ï¼Œæ³¨é‡Šç¡®å®æ˜¯å™ªéŸ³ã€‚<br />\nä½†å¯¹äºé‚£äº›<strong>åç›´è§‰çš„ä¸šåŠ¡é€»è¾‘ã€ä¸ºäº†æ€§èƒ½çš„Hackå†™æ³•ã€ä»¥åŠå¤æ‚çš„ç®—æ³•å®ç°</strong>ï¼Œä»£ç æœ¬èº«åªèƒ½å‘Šè¯‰ä½ â€œå®ƒåšäº†ä»€ä¹ˆâ€ï¼Œå´æ°¸è¿œæ— æ³•å‘Šè¯‰ä½ â€œ<strong>ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåš</strong>â€ã€‚</p>\n<p>ç¼ºå¤±çš„æ³¨é‡Šï¼Œå°±æ˜¯å›¢é˜Ÿçš„<strong>â€œçŸ¥è¯†å€ºåŠ¡â€</strong>ã€‚å€ºåŠ¡æ˜¯æœ‰åˆ©æ¯çš„ï¼Œè€Œåˆ©æ¯çš„æ”¯ä»˜æ–¹å¼ï¼Œå°±æ˜¯æ— ä¼‘æ­¢çš„ Bug æ’æŸ¥å’Œé«˜æ˜‚çš„æ²Ÿé€šæˆæœ¬ã€‚</p>\n<h2 id=\"-aiä½ çš„ç½—å¡å¡”çŸ³ç¢‘é›•åˆ»å¸ˆ\">ğŸ§© AIï¼šä½ çš„â€œç½—å¡å¡”çŸ³ç¢‘â€é›•åˆ»å¸ˆ</h2>\n<p>å¦‚æœæ˜¯ä»¥å‰ï¼Œæˆ‘ä¼šåŠä½ ï¼šâ€œå…„å¼Ÿï¼Œå’¬å’¬ç‰™ï¼ŒæŠŠæ–‡æ¡£è¡¥ä¸Šå§ã€‚â€<br />\nä½†ç°åœ¨ï¼Œä½œä¸ºä¸€åè¿½æ±‚æè‡´æ•ˆç‡çš„å·¥ç¨‹å¸ˆï¼Œæˆ‘ä¼šè¯´ï¼š<strong>â€œè¿™ç§è¦æŠŠé€»è¾‘ç¿»è¯‘æˆäººç±»è¯­è¨€çš„æ´»å„¿ï¼Œä¸ºä»€ä¹ˆä¸äº¤ç»™æœ€æ“…é•¿å¤„ç†è‡ªç„¶è¯­è¨€çš„ AI å‘¢ï¼Ÿâ€</strong></p>\n<p>æˆ‘ä¸ºä½ å‡†å¤‡äº†ä¸€å¥—<strong>ã€Œä»£ç æ³¨é‡Šç”Ÿæˆ AI æŒ‡ä»¤ã€</strong>ã€‚<br />\nå®ƒä¸æ˜¯ç®€å•çš„â€œç¿»è¯‘æœºâ€ï¼Œè€Œæ˜¯ä¸€ä½<strong>â€œä»£ç è€ƒå¤å­¦å®¶â€</strong>ã€‚å®ƒèƒ½æ·±å…¥åˆ†æä½ çš„ä»£ç é€»è¾‘ï¼Œæ¨æ–­è®¾è®¡æ„å›¾ï¼Œå¹¶ç”¨æœ€è§„èŒƒçš„æ ¼å¼ï¼Œä¸ºä½ åˆ»ä¸‹æ¸…æ™°çš„â€œç½—å¡å¡”çŸ³ç¢‘â€ã€‚</p>\n<h3 id=\"ï¸-å¤åˆ¶è¿™ä¸ªæŒ‡ä»¤é‡å¡‘ä»£ç å¯è¯»æ€§\">ğŸ› ï¸ å¤åˆ¶è¿™ä¸ªæŒ‡ä»¤ï¼Œé‡å¡‘ä»£ç å¯è¯»æ€§</h3>\n<p>è¿™å¥—æŒ‡ä»¤çš„ç²¾é«“åœ¨äº<strong>â€œåˆ†å±‚è§£æâ€</strong>ã€‚å®ƒä¼šæ ¹æ®ä½ æŒ‡å®šçš„è§„èŒƒï¼ˆJSDoc/Javadocç­‰ï¼‰ï¼Œè‡ªåŠ¨åŒºåˆ†<strong>æ¥å£å¥‘çº¦</strong>ï¼ˆå‚æ•°/è¿”å›å€¼ï¼‰å’Œ<strong>å®ç°ç»†èŠ‚</strong>ï¼ˆè¡Œå†…é€»è¾‘ï¼‰ï¼Œç¡®ä¿æ³¨é‡Šæ—¢ä¸å†—ä½™ï¼Œä¹Ÿä¸ç¼ºå¤±ã€‚</p>\n<pre><code class=\"language-markdown\"># è§’è‰²å®šä¹‰\nä½ æ˜¯ä¸€ä½èµ„æ·±ä»£ç æ–‡æ¡£å·¥ç¨‹å¸ˆï¼Œæ‹¥æœ‰10å¹´ä»¥ä¸Šè½¯ä»¶å¼€å‘ç»éªŒï¼Œç²¾é€šå¤šç§ç¼–ç¨‹è¯­è¨€çš„æ–‡æ¡£è§„èŒƒï¼ˆå¦‚JSDocã€Javadocã€Python Docstringã€XML Docç­‰ï¼‰ã€‚ä½ æ“…é•¿åˆ†æä»£ç é€»è¾‘ã€ç†è§£è®¾è®¡æ„å›¾ï¼Œå¹¶èƒ½ç”¨ç®€æ´æ¸…æ™°çš„è¯­è¨€ç¼–å†™é«˜è´¨é‡çš„ä»£ç æ³¨é‡Šã€‚\n\n# ä»»åŠ¡æè¿°\nè¯·ä¸ºä»¥ä¸‹ä»£ç ç”Ÿæˆä¸“ä¸šã€è§„èŒƒçš„æ³¨é‡Šï¼Œç¡®ä¿æ³¨é‡Šèƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…å¿«é€Ÿç†è§£ä»£ç åŠŸèƒ½ã€å‚æ•°è¯´æ˜ã€è¿”å›å€¼åŠä½¿ç”¨åœºæ™¯ã€‚\n\n**è¾“å…¥ä¿¡æ¯**:\n- **ç¼–ç¨‹è¯­è¨€**: [è¯·æŒ‡å®šï¼šJavaScript/Python/Java/C#/Go/TypeScript/å…¶ä»–]\n- **æ³¨é‡Šè§„èŒƒ**: [è¯·æŒ‡å®šï¼šJSDoc/Javadoc/Python Docstring/XML Doc/è‡ªå®šä¹‰/è‡ªåŠ¨è¯†åˆ«]\n- **æ³¨é‡Šçº§åˆ«**: [è¯·é€‰æ‹©ï¼šå‡½æ•°çº§/ç±»çº§/æ¨¡å—çº§/è¡Œå†…æ³¨é‡Š/å…¨éƒ¨]\n- **è¯¦ç»†ç¨‹åº¦**: [è¯·é€‰æ‹©ï¼šç®€æ´/æ ‡å‡†/è¯¦ç»†]\n\n**å¾…æ³¨é‡Šä»£ç **:\n```\n[åœ¨æ­¤ç²˜è´´ä½ çš„ä»£ç ]\n```\n\n# è¾“å‡ºè¦æ±‚\n\n## 1. å†…å®¹ç»“æ„\n- **æ–‡ä»¶/æ¨¡å—å¤´æ³¨é‡Š**: æè¿°æ–‡ä»¶ç”¨é€”ã€ä½œè€…ã€åˆ›å»ºæ—¥æœŸ\n- **ç±»/æ¥å£æ³¨é‡Š**: æè¿°ç±»çš„èŒè´£ã€è®¾è®¡ç›®çš„ã€ä½¿ç”¨ç¤ºä¾‹\n- **å‡½æ•°/æ–¹æ³•æ³¨é‡Š**: åŠŸèƒ½æè¿°ã€å‚æ•°è¯´æ˜ã€è¿”å›å€¼ã€å¼‚å¸¸å¤„ç†ã€ä½¿ç”¨ç¤ºä¾‹\n- **å…³é”®é€»è¾‘æ³¨é‡Š**: å¤æ‚ç®—æ³•æˆ–ä¸šåŠ¡é€»è¾‘çš„è¡Œå†…è¯´æ˜\n\n## 2. è´¨é‡æ ‡å‡†\n- **å‡†ç¡®æ€§**: æ³¨é‡Šå¿…é¡»å‡†ç¡®åæ˜ ä»£ç çš„å®é™…åŠŸèƒ½ï¼Œä¸èƒ½æœ‰æ­§ä¹‰\n- **å®Œæ•´æ€§**: è¦†ç›–æ‰€æœ‰å…¬å…±APIã€å¤æ‚é€»è¾‘å’Œå…³é”®å†³ç­–ç‚¹\n- **ç®€æ´æ€§**: ç”¨æœ€å°‘çš„æ–‡å­—è¡¨è¾¾æœ€å®Œæ•´çš„ä¿¡æ¯\n- **è§„èŒƒæ€§**: ä¸¥æ ¼éµå¾ªæŒ‡å®šçš„æ³¨é‡Šè§„èŒƒæ ¼å¼\n\n## 3. æ ¼å¼è¦æ±‚\n- éµå¾ªæŒ‡å®šç¼–ç¨‹è¯­è¨€çš„æ³¨é‡Šè¯­æ³•\n- ä¿æŒä¸€è‡´çš„ç¼©è¿›å’Œå¯¹é½\n- ä½¿ç”¨è§„èŒƒçš„æ ‡ç­¾ï¼ˆå¦‚@paramã€@returnsã€@throwsç­‰ï¼‰\n- ä¸­è‹±æ–‡ä¹‹é—´æ·»åŠ ç©ºæ ¼ï¼Œæå‡å¯è¯»æ€§\n\n## 4. é£æ ¼çº¦æŸ\n- **è¯­è¨€é£æ ¼**: æŠ€æœ¯ä¸“ä¸šä½†é€šä¿—æ˜“æ‡‚\n- **è¡¨è¾¾æ–¹å¼**: ç¬¬ä¸‰äººç§°å®¢è§‚å™è¿°\n- **ä¸“ä¸šç¨‹åº¦**: é¢å‘å¼€å‘è€…ï¼Œå‡è®¾è¯»è€…å…·å¤‡åŸºç¡€ç¼–ç¨‹çŸ¥è¯†\n\n# è´¨é‡æ£€æŸ¥æ¸…å•\n\nåœ¨å®Œæˆè¾“å‡ºåï¼Œè¯·è‡ªæˆ‘æ£€æŸ¥:\n- [ ] æ³¨é‡Šæ ¼å¼ç¬¦åˆæŒ‡å®šçš„æ–‡æ¡£è§„èŒƒ\n- [ ] å‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼éƒ½å·²è¯´æ˜\n- [ ] å¤æ‚é€»è¾‘å¤„æœ‰è¡Œå†…æ³¨é‡Šè§£é‡Š\n- [ ] æ²¡æœ‰æ‹¼å†™é”™è¯¯æˆ–è¯­æ³•é—®é¢˜\n- [ ] æ³¨é‡Šä¸ä»£ç å®é™…åŠŸèƒ½ä¸€è‡´\n\n# æ³¨æ„äº‹é¡¹\n- ä¸è¦ä¿®æ”¹åŸæœ‰ä»£ç é€»è¾‘ï¼Œåªæ·»åŠ æ³¨é‡Š\n- é¿å…è¿‡åº¦æ³¨é‡Šï¼ˆå¦‚è§£é‡Šæ˜¾è€Œæ˜“è§çš„ä»£ç ï¼‰\n- å¯¹äºåºŸå¼ƒçš„æ–¹æ³•è¦æ ‡æ³¨ @deprecated å¹¶è¯´æ˜æ›¿ä»£æ–¹æ¡ˆ\n- æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚å¯†ç ã€å¯†é’¥ï¼‰ä¸è¦åœ¨æ³¨é‡Šä¸­å‡ºç°\n\n# è¾“å‡ºæ ¼å¼\nè¯·ç›´æ¥è¾“å‡ºå¸¦æœ‰å®Œæ•´æ³¨é‡Šçš„ä»£ç ï¼Œä½¿ç”¨å¯¹åº”è¯­è¨€çš„ä»£ç å—æ ¼å¼ã€‚å¦‚æœæœ‰å¤šä¸ªæ–‡ä»¶ï¼Œè¯·åˆ†åˆ«æ ‡æ³¨æ–‡ä»¶åã€‚\n</code></pre>\n<h2 id=\"ï¸-æ•ˆæœå®æµ‹ä»å¤©ä¹¦åˆ°æ•™ç§‘ä¹¦\">âš¡ï¸ æ•ˆæœå®æµ‹ï¼šä»â€œå¤©ä¹¦â€åˆ°â€œæ•™ç§‘ä¹¦â€</h2>\n<p>è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªçœŸå®çš„<strong>åç›´è§‰</strong>åœºæ™¯ã€‚<br />\nè¿™æ˜¯ä¸€æ®µç”¨äºå¤„ç†é˜²æŠ–ï¼ˆDebounceï¼‰çš„ JavaScript ä»£ç ã€‚å¦‚æœä¸çœ‹æ³¨é‡Šï¼Œä½ éœ€è¦åœ¨å¤§è„‘é‡Œæ¨¡æ‹ŸåŠå¤© Event Loop æ‰èƒ½çœ‹æ‡‚å®ƒæ˜¯æ€ä¹ˆå·¥ä½œçš„ã€‚</p>\n<p><strong>ä½¿ç”¨å‰ï¼ˆè£¸å¥”ç‰ˆï¼‰ï¼š</strong></p>\n<pre><code class=\"language-javascript\">function debounce(func, wait, immediate) {\n    let timeout;\n    return function() {\n        const context = this, args = arguments;\n        const later = function() {\n            timeout = null;\n            if (!immediate) func.apply(context, args);\n        };\n        const callNow = immediate &amp;&amp; !timeout;\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n        if (callNow) func.apply(context, args);\n    };\n}\n</code></pre>\n<p><strong>ä½¿ç”¨æŒ‡ä»¤åï¼ˆæ•™ç§‘ä¹¦ç‰ˆï¼‰ï¼š</strong></p>\n<pre><code class=\"language-javascript\">/**\n * åˆ›å»ºä¸€ä¸ªé˜²æŠ–å‡½æ•°ï¼Œåœ¨æŒ‡å®šæ—¶é—´å†…å¤šæ¬¡è°ƒç”¨åªæ‰§è¡Œä¸€æ¬¡\n * \n * é˜²æŠ–å¸¸ç”¨äºå¤„ç†é¢‘ç¹è§¦å‘çš„äº‹ä»¶ï¼Œå¦‚çª—å£resizeã€è¾“å…¥æ¡†å®æ—¶æœç´¢ç­‰åœºæ™¯ï¼Œ\n * å¯ä»¥æœ‰æ•ˆå‡å°‘ä¸å¿…è¦çš„å‡½æ•°è°ƒç”¨ï¼Œæå‡æ€§èƒ½ã€‚\n * \n * @param {Function} func - éœ€è¦é˜²æŠ–å¤„ç†çš„ç›®æ ‡å‡½æ•°\n * @param {number} wait - é˜²æŠ–å»¶è¿Ÿæ—¶é—´ï¼Œå•ä½æ¯«ç§’\n * @param {boolean} [immediate=false] - æ˜¯å¦ç«‹å³æ‰§è¡Œ\n *   - true: åœ¨å»¶è¿Ÿå¼€å§‹æ—¶ç«‹å³æ‰§è¡Œï¼Œåç»­è°ƒç”¨åœ¨å»¶è¿Ÿç»“æŸå‰è¢«å¿½ç•¥\n *   - false: åœ¨å»¶è¿Ÿç»“æŸåæ‰§è¡Œæœ€åä¸€æ¬¡è°ƒç”¨\n * @returns {Function} ç»è¿‡é˜²æŠ–å¤„ç†çš„æ–°å‡½æ•°\n */\nfunction debounce(func, wait, immediate) {\n    // ç”¨äºå­˜å‚¨å®šæ—¶å™¨IDï¼Œå®ç°å»¶è¿Ÿæ§åˆ¶\n    let timeout;\n    \n    // è¿”å›åŒ…è£…åçš„å‡½æ•°ï¼Œä¿æŒåŸå‡½æ•°çš„ this æŒ‡å‘å’Œå‚æ•°\n    return function executedFunction() {\n        const context = this;\n        const args = arguments;\n        \n        // å»¶è¿Ÿæ‰§è¡Œçš„å›è°ƒå‡½æ•°\n        const later = function() {\n            timeout = null;\n            // éç«‹å³æ‰§è¡Œæ¨¡å¼ä¸‹ï¼Œåœ¨å»¶è¿Ÿç»“æŸåè°ƒç”¨ç›®æ ‡å‡½æ•°\n            if (!immediate) func.apply(context, args);\n        };\n        \n        // åˆ¤æ–­æ˜¯å¦éœ€è¦ç«‹å³æ‰§è¡Œï¼šimmediate ä¸º true ä¸”å½“å‰æ²¡æœ‰ç­‰å¾…ä¸­çš„å®šæ—¶å™¨\n        const callNow = immediate &amp;&amp; !timeout;\n        \n        // æ¯æ¬¡è°ƒç”¨éƒ½é‡ç½®å®šæ—¶å™¨ï¼Œå®ç°\"é‡æ–°è®¡æ—¶\"æ•ˆæœ\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n        \n        // ç«‹å³æ‰§è¡Œæ¨¡å¼ä¸‹ï¼Œé¦–æ¬¡è°ƒç”¨ç›´æ¥æ‰§è¡Œ\n        if (callNow) func.apply(context, args);\n    };\n}\n</code></pre>\n<p>æ³¨æ„åˆ°äº†å—ï¼ŸAI ä¸ä»…è§£é‡Šäº†å‚æ•°ï¼Œè¿˜è§£é‡Šäº†<strong>å®ç°åŸç†</strong>ï¼ˆå¦‚ \"ä¿æŒåŸå‡½æ•°çš„ this æŒ‡å‘\"ï¼‰ã€‚è¿™ä¸ä»…æ˜¯æ–‡æ¡£ï¼Œæ›´æ˜¯<strong>æ•™å­¦</strong>ã€‚</p>\n<h2 id=\"-å·¥ç¨‹å¸ˆçš„ç¬¬äºŒå¤§è„‘\">ğŸ’¡ å·¥ç¨‹å¸ˆçš„ç¬¬äºŒå¤§è„‘</h2>\n<p>ä½¿ç”¨è¿™ä¸ª AI æŒ‡ä»¤ï¼Œå¹¶ä¸æ˜¯ä¸ºäº†è®©ä½ å·æ‡’ï¼Œè€Œæ˜¯ä¸ºäº†è®©ä½ æŠŠå®è´µçš„è„‘åŠ›ä»â€œè§£é‡Šä»£ç â€ä¸­è§£æ”¾å‡ºæ¥ï¼Œå»ä¸“æ³¨äºâ€œè®¾è®¡ä»£ç â€ã€‚</p>\n<p>è¯•ç€æŠŠè¿™ä¸ªæŒ‡ä»¤é›†æˆåˆ°ä½ çš„å·¥ä½œæµä¸­ï¼š</p>\n<ol>\n<li><strong>æ¥æ‰‹é—ç•™é¡¹ç›®æ—¶</strong>ï¼šå…ˆç”¨ AI è·‘ä¸€éæ ¸å¿ƒæ¨¡å—ï¼Œå¿«é€Ÿç”Ÿæˆâ€œåœ°å½¢å›¾â€ã€‚</li>\n<li><strong>æäº¤ Code Review å‰</strong>ï¼šç”¨ AI è¡¥å…¨æ–‡æ¡£ï¼Œè®© Reviewer å°‘é—®å‡ ä¸ªâ€œè¿™æ˜¯å•¥â€ã€‚</li>\n<li><strong>ç¼–å†™å¼€æºåº“æ—¶</strong>ï¼šä¸€é”®ç”Ÿæˆæ ‡å‡† JSDoc/Javadocï¼Œè®©ä½ çš„é¡¹ç›®æ˜¾å¾—æ›´ä¸“ä¸šã€‚</li>\n</ol>\n<p>ä»£ç æ˜¯å†™ç»™æœºå™¨æ‰§è¡Œçš„ï¼Œä½†æ›´æ˜¯å†™ç»™äººçœ‹çš„ã€‚<br />\n<strong>åˆ«è®©ä½ çš„ä»£ç ï¼Œæˆä¸ºä¸‹ä¸€ä¸ªéœ€è¦è§£å¯†çš„â€œæœªè§£ä¹‹è°œâ€ã€‚</strong></p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2025-12-30 18:29</span>&nbsp;\n<a href=\"https://www.cnblogs.com/huizhudev\">realhuizhu</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">59</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    }
  ]
}