{
  "title": "ä¸»é¡µ - åšå®¢å›­",
  "link": "https://www.cnblogs.com/",
  "description": "ä¸»é¡µ - åšå®¢å›­ RSS",
  "entries": [
    {
      "title": "ä½ çš„ IP å½’å±åœ°ï¼Œæ˜¯å’‹è¢«æŒ–å‡ºæ¥çš„ï¼Ÿ",
      "link": "https://www.cnblogs.com/yupi/p/19486536",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/yupi/p/19486536\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-15 11:41\">\n    <span>ä½ çš„ IP å½’å±åœ°ï¼Œæ˜¯å’‹è¢«æŒ–å‡ºæ¥çš„ï¼Ÿ</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                    <div id=\"cnblogs_post_description\" style=\"display: none;\">\n        <img alt=\"ä½ çš„ IP å½’å±åœ°ï¼Œæ˜¯å’‹è¢«æŒ–å‡ºæ¥çš„ï¼Ÿ\" class=\"desc_img\" src=\"https://img2024.cnblogs.com/blog/2225420/202601/2225420-20260115111608009-63796805.png\" />\n        å¾ˆå¤šå¹³å°éƒ½ä¼šæ˜¾ç¤ºç”¨æˆ· IP å½’å±åœ°çš„ï¼Œè¿™å¾ˆæ­£å¸¸ã€‚ä¸è¿‡ä½ çš„ IP å½’å±åœ°ï¼Œæ˜¯æ€ä¹ˆè¢«è·å–åˆ°çš„ï¼Ÿ\n    </div>\n<div class=\"blogpost-body blogpost-body-html\" id=\"cnblogs_post_body\">\n<p class=\"md-end-block md-heading\"><span class=\"md-plain\">ä½ æ˜¯å°é˜¿å·´ï¼Œæ­£åœ¨å®¶é‡Œå·å·æ¬£èµä¸€éƒ¨å¾ˆç²¾å½©çš„å†…å®¹ã€‚</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">ä½ ï¼šå—¯ï¼ŒçœŸä¸é”™å•Š~</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">ä¸€æ—¶å…´èµ·ï¼Œä½ ç•™ä¸‹äº†ä¸€æ¡è¯„è®ºï¼šä½œè€…ç‰›æ°ï¼</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">ç»“æœåˆšå‘å‡ºå»ï¼Œä½ å°±å‘ç°è¯„è®ºä¸‹é¢ç«Ÿç„¶æ˜¾ç¤ºï¼š<span class=\"md-pair-s\"><code>åŒ—äº¬</code></span></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">ä½ å¤§æƒŠå¤±è‰²ï¼šå•Šï¼Œä¿ºè¢«å®šä½äº†ï¼è¿™ç½‘ç«™åœ¨ç›‘æ§ä¿ºï¼ä¿ºè¦ä¸¾æŠ¥å®ƒï¼</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">è¿™æ—¶ï¼Œç¨‹åºå‘˜é±¼çš®çªç„¶å‡ºç°åœ¨ä½ èº«åï¼Œæ“¦ç€é¼»è¡€è¯´ï¼šæ·¡å®šï¼Œå¾ˆå¤šå¹³å°éƒ½ä¼šæ˜¾ç¤ºç”¨æˆ· IP å½’å±åœ°çš„ï¼Œè¿™å¾ˆæ­£å¸¸ã€‚</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">ä½ å“äº†ä¸€è·³ï¼šé¢ï¼Œä½ è°å•Šï¼Ÿ</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">é±¼çš®ï¼šæˆ‘æ˜¯å¤å¸Œè…ŠæŒç®¡ç¼–ç¨‹çš„ç¥â€¦â€¦ç²¾ï¼Œä¸‹é¢æˆ‘æ¥ç§‘æ™®ä¸€ä¸‹ â€”â€” ä½ çš„ IP å½’å±åœ°ï¼Œæ˜¯æ€ä¹ˆè¢«è·å–åˆ°çš„ï¼Ÿ</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">â­ï¸ æœ¬æ–‡å¯¹åº”è§†é¢‘ç‰ˆï¼š<span class=\"md-meta-i-c  md-link\"><a href=\"https://www.bilibili.com/video/BV1xCi9BJEx1/\" rel=\"noopener nofollow\"><span class=\"md-plain\">https://bilibili.com/video/BV1xCi9BJEx1</span></a></span></span></p>\n<p class=\"md-end-block md-p\">&nbsp;</p>\n<h2 class=\"md-end-block md-heading\"><span class=\"md-plain\">æ€ä¹ˆè·å–ä½ çš„ IP å½’å±åœ°ï¼Ÿ</span></h2>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">é±¼çš®ï¼šä½ ä¸Šç½‘çš„æ—¶å€™ï¼Œä½ çš„ç”µè„‘è¦è·ŸæœåŠ¡å™¨é€šä¿¡æ¥è·å–ç½‘é¡µå’Œæ•°æ®ã€‚</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">å°±åƒå¯„å¿«é€’ä¸€æ ·ï¼Œå¿«é€’å‘˜è¦æŠŠåŒ…è£¹é€åˆ°ä½ å®¶ï¼Œå¾—çŸ¥é“ä½ å®¶çš„åœ°å€ã€‚è¿™ä¸ªåœ°å€å°±æ˜¯ <span class=\"md-pair-s \"><strong>IP åœ°å€</strong><span class=\"md-plain\">ï¼Œå¯ä»¥ç†è§£ä¸ºä½ çš„ç½‘ç»œé—¨ç‰Œå·ã€‚</span></span></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">ä½ ï¼šä½†å¹³å°æ˜¯æ€ä¹ˆé€šè¿‡ IP åœ°å€çŸ¥é“ä¿ºåœ¨ â€œåŒ—äº¬â€ çš„å‘¢ï¼Ÿ</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">é±¼çš®ï¼šè¿™å°±æ¶‰åŠåˆ°äº’è”ç½‘çš„ç»„ç»‡å½¢å¼äº†ã€‚</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">ä¸ºäº†æ–¹ä¾¿ç®¡ç†å’Œè·¯ç”±ï¼Œå…¨çƒäº’è”ç½‘è¢«åˆ’åˆ†ä¸ºè®¸å¤šä¸ªå·¨å¤§çš„ç½‘ç»œé¢†åœ°ï¼Œæˆ‘ä»¬æŠŠæ¯ä¸ªé¢†åœ°å«åš <span class=\"md-pair-s \"><strong>è‡ªæ²»ç³»ç»Ÿ</strong><span class=\"md-plain\">ï¼ˆAutonomous Systemï¼‰ï¼Œç®€ç§° ASã€‚</span></span></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">è¿™äº› AS ä¸€èˆ¬ç”±ç”µä¿¡ã€è”é€šè¿™æ ·çš„è¿è¥å•†ï¼ˆISPï¼‰ï¼Œæˆ–è€…å¤§å‹äº’è”ç½‘å…¬å¸è¿è¥ã€‚</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">æ¯ä¸ª AS è´Ÿè´£ç®¡ç†ä¸€å¤§æ‰¹ IP åœ°å€ï¼Œå¹¶è§„åˆ’æ•°æ®åŒ…çš„ä¼ è¾“è·¯çº¿ã€‚</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">è¿è¥å•†åœ¨æ‹¿åˆ°è¿™äº› IP åï¼Œä¼šæ ¹æ®è‡ªå·±çš„æœºæˆ¿éƒ¨ç½²ï¼ŒæŠŠä¸åŒçš„ IP åœ°å€æ®µåˆ’åˆ†ç»™ä¸åŒåŸå¸‚çš„ç½‘ç»œè®¾å¤‡ã€‚</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">ä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œæ¯ä¸ª AS éƒ½æœ‰ä¸€ä¸ªå…¨çƒå”¯ä¸€çš„ç¼–å·ï¼Œå« <span class=\"md-pair-s \"><strong>ASN</strong><span class=\"md-plain\">ï¼ˆAutonomous System Numberï¼‰è‡ªæ²»ç³»ç»Ÿç¼–å·ã€‚</span></span></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">æ¯”å¦‚ AS4808 æ˜¯ä¸­å›½è”é€šåŒ—äº¬çœç½‘ç»œï¼Œè”é€šä¼šæŠŠå…¶ä¸­ä¸€æ®µ IPï¼ˆæ¯”å¦‚ 123.xx.xx.0 åˆ° 123.xx.xx.255ï¼‰åˆ†é…ç»™ä»–ä»¬åœ¨åŒ—äº¬çš„æ¥å…¥æœºæˆ¿ã€‚</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">ä½ ï¼šæ‰€ä»¥æƒ³æŸ¥ä¿º IP çš„ä½ç½®ï¼Œå…³é”®å°±æ˜¯æ‰¾åˆ° ASNï¼Ÿ</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">é±¼çš®ï¼šæœ‰æ›´ç®€å•çš„æ–¹æ³•ã€‚å…¨çƒæœ‰å¾ˆå¤šä¸“ä¸šçš„æœºæ„ï¼ˆå¦‚ MaxMindã€IP2Locationï¼‰ä¸“é—¨æ”¶é›†å¹¶æ±‡æ€»äº†è¿™äº› AS å†…éƒ¨ <span class=\"md-pair-s \"><strong>IP æ®µå’ŒåŸå¸‚çš„æ˜ å°„å…³ç³»</strong><span class=\"md-plain\">ï¼Œåšæˆäº† <span class=\"md-pair-s \"><strong>IP åœ°ç†ä½ç½®æ•°æ®åº“</strong><span class=\"md-plain\">ã€‚</span></span></span></span></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" /></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">æ•°æ®åº“é‡Œä¼šè®°å½•ï¼šè¿™ä¸ª IP æ®µå±äº AS4808ï¼ˆä¸­å›½è”é€šï¼‰ï¼Œä¸”ç›®å‰åˆ†é…ç»™äº†åŒ—äº¬å¸‚çš„æŸä¸ªæ¥å…¥èŠ‚ç‚¹ã€‚å°±çŸ¥é“ä½ å¤§æ¦‚æ‰€å±çš„ä½ç½®äº†ã€‚</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" /></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">æˆ‘ä»¬æ‰“å¼€ <span class=\"md-meta-i-c  md-link\"><a href=\"https://ip.sb/\" rel=\"noopener nofollow\"><span class=\"md-plain\">è¿™ä¸ªç½‘ç«™</span></a><span class=\"md-plain\"> æŸ¥ä¸€ä¸‹ï¼Œå°±èƒ½çœ‹åˆ°ä½ å®¶ IP çš„å®Œæ•´ä¿¡æ¯ï¼š</span></span></span></p>\n<ul class=\"ul-list\">\n<li class=\"md-list-item\">\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">Addressï¼š123.xx.xx.xxï¼ˆä½ çš„ IP åœ°å€ï¼‰</span></p>\n</li>\n<li class=\"md-list-item\">\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">ISPï¼šChina Unicomï¼ˆç½‘ç»œæœåŠ¡æä¾›å•†ï¼Œä¸­å›½è”é€šï¼‰</span></p>\n</li>\n<li class=\"md-list-item\">\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">ASNï¼šAS4808ï¼ˆè‡ªæ²»ç³»ç»Ÿç¼–å·ï¼‰</span></p>\n</li>\n<li class=\"md-list-item\">\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">ASN Organizationï¼šChina Unicomï¼ˆASN æ‰€å±çš„è¿è¥å•†ï¼‰</span></p>\n</li>\n<li class=\"md-list-item\">\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">Locationï¼šåŒ—äº¬ ä¸­å›½ï¼ˆåœ°ç†ä½ç½®ï¼‰</span></p>\n</li>\n</ul>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" /></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">ä½ æ¿€åŠ¨äº†ï¼šå“‡ï¼Œä¸€ç›®äº†ç„¶å•Šï¼</span></p>\n<p class=\"md-end-block md-p\">&nbsp;</p>\n<h2 class=\"md-end-block md-heading\"><span class=\"md-plain\">èƒ½å®šä½å¤šç²¾ç¡®ï¼Ÿ</span></h2>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">ä½ ç´§å¼ èµ·æ¥ï¼šç­‰ç­‰ï¼Œé‚£å¹³å°ç®¡ç†å‘˜å²‚ä¸æ˜¯èƒ½é¡ºç€ç½‘çº¿æ‰¾åˆ°ä¿ºå®¶é—¨ç‰Œå·ï¼Ÿä¿ºè¿™å°±æŠŠç½‘çº¿æ‹”äº†ï¼</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">é±¼çš®ï¼šåˆ«æ…Œï¼Œé€šè¿‡ IP åœ°å€å®šä½çš„ç²¾ç¡®åº¦ï¼Œå–å†³äºæ•°æ®æ¥æºã€‚</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">åƒåˆšæ‰æˆ‘ä»¬ç”¨çš„æŸ¥è¯¢å·¥å…·ï¼Œè¿˜æœ‰å¾®åšã€æŠ–éŸ³è¿™äº›ç¤¾äº¤å¹³å°ï¼Œå®ƒä»¬éƒ½æ˜¯åŸºäº ASN å’Œè¿è¥å•†æ•°æ®æ¥å®šä½çš„ï¼Œé€šå¸¸åªèƒ½å®šä½åˆ°å¸‚çº§æˆ–è€…åŒºçº§ï¼Œæ¯”å¦‚å¹¿ä¸œæ·±åœ³ã€ä¸Šæµ·æµ¦ä¸œè¿™ç§ã€‚</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">ä½ ï¼šåæ­£ä¸ä¼šæ˜¾ç¤ºåˆ° â€œæŸæ ‹æŸå®¤â€ å¯¹å§ï¼Ÿé‚£ä¿ºåœ¨æ–°é—»é‡Œçœ‹åˆ°æœ‰äººè¯´ â€œé¡ºç€ç½‘çº¿æŠ“äººâ€ æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">é±¼çš®ï¼šæƒ³è¦æ‰¾åˆ°ä½ çš„ <span class=\"md-pair-s \"><strong>ç²¾ç¡®å®šä½</strong><span class=\"md-plain\">ï¼Œå¯ä»¥æŸ¥è¯¢è¿è¥å•†é‚£è¾¹è¯¦ç»†çš„åˆ†é…è®°å½•ï¼Œè®°å½•ç€å“ªä¸ª IP åœ¨ä»€ä¹ˆæ—¶é—´åˆ†é…ç»™äº†å“ªä¸ªç”¨æˆ·ï¼Œç”šè‡³æœ‰å…·ä½“çš„å®‰è£…åœ°å€ã€‚</span></span></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">ä½†æ˜¯ï¼Œè¿™äº›æ•°æ®æœ‰ä¸¥æ ¼çš„éšç§ä¿æŠ¤ï¼Œåªæœ‰æ‰§æ³•éƒ¨é—¨ä¾æ³•è°ƒæŸ¥çš„æ—¶å€™æ‰èƒ½æŸ¥è¯¢ã€‚æ™®é€šäººå’Œæ™®é€šå¹³å°æ˜¯æŸ¥ä¸åˆ°çš„ï¼Œæ‰€ä»¥åˆ«æ‹…å¿ƒã€‚ä¸åšäºå¿ƒäº‹ï¼Œä¸æ€•é¬¼æ•²é—¨ã€‚</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">ä½ è‹¥æœ‰æ‰€æ€ï¼šçœ‹æ¥åœ¨ç½‘ç»œä¸Šä¹Ÿä¸èƒ½ä¹±è¯´è¯å‘€â€¦â€¦</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">é±¼çš®ï¼šä¸è¿‡ï¼Œè¿˜æœ‰å…¶ä»–ç²¾ç¡®å®šä½çš„æ–¹æ³•ã€‚æ¯”å¦‚ä½ ç»™ APP å¼€äº† <span class=\"md-pair-s \"><strong>GPS æƒé™</strong><span class=\"md-plain\">ï¼ŒAPP å°±èƒ½ç›´æ¥è¯»å–ä½ æ‰‹æœºé‡Œçš„ <span class=\"md-pair-s \"><strong>ç»çº¬åº¦åæ ‡</strong><span class=\"md-plain\">ï¼Œç²¾åº¦å¯ä»¥è¾¾åˆ° 10 ç±³ä»¥å†…ã€‚</span></span></span></span></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">å“ªæ€•ä½ å…³äº† GPSï¼Œåªè¦ä½ å¼€äº† <span class=\"md-pair-s \"><strong>WiFi æˆ–è“ç‰™æ‰«ææƒé™</strong><span class=\"md-plain\">ï¼ŒAPP ç…§æ ·èƒ½å®šä½ã€‚å®ƒä»¬ä¼šæ‰«æä½ é™„è¿‘å‡ ä¸ª WiFi çš„ç‰¹å¾ IDï¼ˆBSSIDï¼‰ï¼Œç„¶åå»äº‘ç«¯æ•°æ®åº“ä¸€æ¯”å¯¹ï¼Œå‘ç°ä½ å‘¨å›´è¿™å‡ ä¸ª WiFi éƒ½åœ¨æŸæ ‹å†™å­—æ¥¼é‡Œï¼Œå°±èƒ½åæ¨å‡ºä½ ä¹Ÿåœ¨é‚£é‡Œã€‚</span></span></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">ä½ å¿ƒæœ‰ä½™æ‚¸ï¼šè¿˜å¥½æˆ‘çš„æ‰‹æœºæƒé™æ²¡æœ‰ä¹±å¼€â€¦â€¦ ä½†æ˜¯é±¼çš®ï¼Œå¹³å°ä¸ºä»€ä¹ˆè¦æ˜¾ç¤º IP å½’å±åœ°å‘¢ï¼Ÿä¼šä¸ä¼šä¾µçŠ¯ç”¨æˆ·çš„éšç§å•Šï¼Ÿ</span></p>\n<p class=\"md-end-block md-p\">&nbsp;</p>\n<h2 class=\"md-end-block md-heading\"><span class=\"md-plain\">ä¼šä¸ä¼šä¾µçŠ¯éšç§ï¼Ÿ</span></h2>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">é±¼çš®ï¼šå…¶å®è¿™ä¸ªåŠŸèƒ½æ˜¯æœ‰ä¾æ®çš„ã€‚2022 å¹´ 6 æœˆï¼Œå›½å®¶ç½‘ä¿¡åŠå‘å¸ƒäº†ã€Šäº’è”ç½‘ç”¨æˆ·è´¦å·ä¿¡æ¯ç®¡ç†è§„å®šã€‹ï¼Œè¦æ±‚å¹³å°å±•ç¤º <span class=\"md-pair-s \"><strong>åˆç†èŒƒå›´å†…</strong><span class=\"md-plain\"> çš„ IP å½’å±åœ°ä¿¡æ¯ï¼Œç›®çš„æ˜¯ä¾¿äºå…¬ä¼—ç›‘ç£ï¼Œå‡å°‘ç½‘ç»œä¸Šçš„ä¸å®ä¿¡æ¯ä¼ æ’­ã€‚</span></span></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">è€Œä¸”ä½ çœ‹ï¼Œæ­£è§„å¹³å°åªæ˜¾ç¤ºå¤§è‡´åœ°åŒºï¼Œå¹¶ä¸æ¶‰åŠä½ çš„å…·ä½“ä¸ªäººèº«ä»½ä¿¡æ¯ï¼Œä¹Ÿä¸ä¼šæš´éœ²ä½ æ˜¯è°ã€ä½åœ¨å“ªé‡Œã€‚</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">ä½ ï¼šåŸæ¥å¦‚æ­¤ï¼ä½†å¦‚æœä¿ºæ˜¯ä¸ªå¤§æ˜æ˜Ÿï¼Œç²‰ä¸ä¸å°±çŸ¥é“ä¿ºå¤§æ¦‚åœ¨å“ªé‡Œäº†ï¼Ÿä¸‡ä¸€äººå¤šåŠ›é‡å¤§ï¼Œä¸å°å¿ƒæŠŠä¿ºé€®åˆ°äº†æ€ä¹ˆåŠï¼Ÿ</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">å¯¹äº†ï¼Œä¿ºèƒ½ä¸èƒ½ä¿®æ”¹è‡ªå·±çš„ IP å½’å±åœ°å‘¢ï¼Ÿ</span></p>\n<p class=\"md-end-block md-p\">&nbsp;</p>\n<h2 class=\"md-end-block md-heading\"><span class=\"md-plain\">æ€ä¹ˆä¿®æ”¹ IP å½’å±åœ°ï¼Ÿ</span></h2>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">é±¼çš®åç¬‘ï¼šè¿™å¤ªç®€å•äº†ï¼Œä½ åªéœ€è¦ä¹°ä¸€å¼ é«˜é“ç¥¨ï¼Œä»åŒ—äº¬åˆ°å¤©æ´¥ï¼ŒåŠä¸ªå°æ—¶å°±æå®šäº†~</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">ä½ ä¸€æ‹è„‘è¢‹ï¼šå¦™å•Šï¼</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">é±¼çš®ï¼šå“¼å“¼ï¼Œä¸è¿‡è¿˜æœ‰æ›´ç®€å•çš„æ–¹å¼ â€”â€” é€šè¿‡ä»£ç†æœåŠ¡å™¨ã€‚</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">ä»£ç†æœåŠ¡å™¨å°±åƒç½‘ç»œä¸­è½¬ç«™ã€‚</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">æ­£å¸¸æƒ…å†µä¸‹ï¼Œä½ çš„è¯·æ±‚æ˜¯ç›´æ¥å‘ç»™ç›®æ ‡ç½‘ç«™çš„ã€‚</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">ä½†å¦‚æœç”¨äº†ä»£ç†æœåŠ¡å™¨ï¼Œä½ çš„è¯·æ±‚ä¼šå…ˆå‘åˆ°ä»£ç†æœåŠ¡å™¨ï¼Œå†ç”±å®ƒè½¬å‘ç»™ç›®æ ‡ç½‘ç«™ã€‚</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">è¿™æ ·ä¸€æ¥ï¼Œç›®æ ‡ç½‘ç«™çœ‹åˆ°çš„å°±æ˜¯ä»£ç†æœåŠ¡å™¨çš„ IPï¼Œè€Œä¸æ˜¯ä½ çš„çœŸå® IPã€‚</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" /></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">ä½ æç„¶å¤§æ‚Ÿï¼šä¿ºæ‡‚äº†ï¼Œå°±åƒä¿ºè®©æœ‹å‹å¸®å¿™å¯„å¿«é€’ï¼Œå¯„ä»¶åœ°å€æ˜¾ç¤ºçš„æ˜¯æœ‹å‹å®¶ï¼Œè€Œä¸æ˜¯ä¿ºå®¶ã€‚</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">é±¼çš®ï¼šæ¥ï¼Œæˆ‘ç»™ä½ æ¼”ç¤ºä¸€ä¸‹ã€‚æ¯”å¦‚æˆ‘åœ¨åŒ—äº¬æœ‰å°æœåŠ¡å™¨ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªå« Nginx çš„é«˜æ€§èƒ½ Web æœåŠ¡å™¨è½¯ä»¶æ¥é…ç½®ä»£ç†ã€‚</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">é¦–å…ˆï¼Œæˆ‘åœ¨æœåŠ¡å™¨ä¸Šå®‰è£… Nginxï¼ˆè¿™é‡Œåˆ©ç”¨äº†å®å¡” Linux é¢æ¿æé€Ÿå®‰è£…ï¼‰ï¼š</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" /></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">ç„¶åç¼–è¾‘é…ç½®æ–‡ä»¶ <span class=\"md-pair-s\"><code>nginx.conf</code><span class=\"md-plain\">ï¼Œé…ç½®ä¸€ä¸ªç®€å•çš„æ­£å‘ä»£ç†ï¼Œä¹Ÿå°±æ˜¯è®©ä½ çš„è¯·æ±‚é€šè¿‡ä»£ç†æœåŠ¡å™¨è½¬å‘å‡ºå»ã€‚</span></span></span></p>\n<pre class=\"md-fences md-end-block ty-contain-cm modeLoaded\"><span><span class=\"cm-comment\"># ç®€æ˜“æ­£å‘ä»£ç†ï¼ˆæ³¨æ„ï¼šä»…æ”¯æŒ HTTP æµé‡ï¼Œä¸æ”¯æŒ HTTPSï¼‰<br /><span><span class=\"cm-variable-2\">server&nbsp;{<br /><span>&nbsp; &nbsp;<span class=\"cm-string-2\">listen&nbsp;8080;<br /><span>&nbsp; &nbsp;<br /><span>&nbsp; &nbsp;<span class=\"cm-variable-2\">location&nbsp;/ {<br /><span>&nbsp; &nbsp; &nbsp; &nbsp;<span class=\"cm-comment\"># å¿…é¡»é…ç½® DNS è§£æå™¨<br /><span>&nbsp; &nbsp; &nbsp; &nbsp;<span class=\"cm-keyword\">resolver&nbsp;8.8.8.8;<br /><span>&nbsp; &nbsp; &nbsp; &nbsp;<br /><span>&nbsp; &nbsp; &nbsp; &nbsp;<span class=\"cm-comment\"># è®¾ç½®ä»£ç†ç›®æ ‡<br /><span>&nbsp; &nbsp; &nbsp; &nbsp;<span class=\"cm-string-2\">proxy_pass&nbsp;<span class=\"cm-variable-2\">http://$http_host$request_uri;<br /><span>&nbsp; &nbsp; &nbsp; &nbsp;<br /><span>&nbsp; &nbsp; &nbsp; &nbsp;<span class=\"cm-comment\"># éšè—çœŸå® IPï¼Œé˜²æ­¢æ³„éœ²ç»™ç›®æ ‡ç½‘ç«™<br /><span>&nbsp; &nbsp; &nbsp; &nbsp;<span class=\"cm-keyword\">proxy_set_header&nbsp;<span class=\"cm-number\">X-Real-IP&nbsp;<span class=\"cm-string\">\"\";<br /><span>&nbsp; &nbsp; &nbsp; &nbsp;<span class=\"cm-keyword\">proxy_set_header&nbsp;<span class=\"cm-number\">X-Forwarded-For&nbsp;<span class=\"cm-string\">\"\";<br /><span>&nbsp; &nbsp; &nbsp; &nbsp;<span class=\"cm-keyword\">proxy_set_header&nbsp;<span class=\"cm-number\">Via&nbsp;<span class=\"cm-string\">\"\";<br /><span>&nbsp; }<br /><span>}</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" /></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">é…ç½®å¥½ä¹‹åï¼Œé‡å¯ Nginxï¼ˆæˆ–è€…é‡è½½é…ç½®ï¼‰ï¼š</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" /></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">æ¥ä¸‹æ¥ï¼Œå½“ä½ é€šè¿‡è¿™å°æœåŠ¡å™¨çš„ 8080 ç«¯å£è®¿é—® HTTP ç½‘ç«™æ—¶ï¼Œç½‘ç«™çœ‹åˆ°çš„å°±æ˜¯è¿™å°åŒ—äº¬æœåŠ¡å™¨çš„ IP äº†ã€‚</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" /></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">ä¸è¿‡è¿™ä¸ªç®€æ˜“é…ç½®åªèƒ½ä»£ç† HTTP ç½‘ç«™ï¼Œå¦‚æœè¦ä»£ç† HTTPSï¼Œéœ€è¦æ›´å¤æ‚çš„é…ç½®æˆ–è€…ä½¿ç”¨ä¸“é—¨çš„ä»£ç†è½¯ä»¶ã€‚ä¸è¿‡æ€è·¯æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯é€šè¿‡ä¸­è½¬æœåŠ¡å™¨æ¥éšè—çœŸå® IPã€‚</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">ä½ å…´å¥‹åœ°æ‰‹èˆè¶³è¹ˆï¼šé˜¿å·´é˜¿å·´ï¼Œä¿ºä¹Ÿè¦è¿™æ ·åšï¼</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">é±¼çš®ï¼šæŠ€æœ¯è™½ç„¶ä¸éš¾ï¼Œä½†ä½ è¦æ³¨æ„åˆç†ä½¿ç”¨æŠ€æœ¯ã€‚</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">å¦‚æœæ˜¯æ­£å¸¸çš„æŠ€æœ¯å­¦ä¹ ã€ä¼ä¸šåº”ç”¨ï¼Œå®Œå…¨æ²¡é—®é¢˜ï¼Œå¾ˆå¤šå…¬å¸éƒ½ä¼šç”¨ä»£ç†æœåŠ¡å™¨æ¥ç®¡ç†ç½‘ç»œæµé‡ã€‚</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">ä½†åƒä¸‡ä¸è¦ç”¨æ¥é€ƒé¿å¹³å°è§„åˆ™æˆ–è€…åšè¿è§„çš„äº‹æƒ…ã€‚è€Œä¸”ç°åœ¨å¾ˆå¤šå¹³å°éƒ½æœ‰æ£€æµ‹æœºåˆ¶ï¼Œèƒ½è¯†åˆ«å‡ºä½ æ˜¯ä¸æ˜¯ç”¨äº†ä»£ç†è®¿é—®ã€‚</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">ä½ å¥½å¥‡é“ï¼šå®ƒä»¬æ˜¯æ€ä¹ˆæ£€æµ‹å‡ºæ¥çš„ï¼Ÿ</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">é±¼çš®ï¼šå¸¸è§çš„æ–¹æ³•æœ‰è¿™å‡ ç§</span></p>\n<ol class=\"ol-list\" start=\"\">\n<li class=\"md-list-item\">\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">æ£€æŸ¥ HTTP è¯·æ±‚å¤´ï¼Œä»£ç†è®¿é—®æ—¶ä¼šæœ‰ä¸€äº›ç‰¹æ®Šçš„è¯·æ±‚å¤´ä¿¡æ¯ï¼Œæ¯”å¦‚ X-Forwarded-For</span></p>\n</li>\n<li class=\"md-list-item\">\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">æ£€æŸ¥ IP åœ°å€åº“ï¼Œæœ‰äº›æœåŠ¡ä¼šç»´æŠ¤å·²çŸ¥çš„ä»£ç†æœåŠ¡å™¨ IP é»‘åå•</span></p>\n</li>\n<li class=\"md-list-item\">\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">åˆ†æè®¿é—®è¡Œä¸ºï¼Œæ¯”å¦‚åŒä¸€ä¸ª IP çŸ­æ—¶é—´å†…æœ‰å¤§é‡ä¸åŒç”¨æˆ·çš„è¯·æ±‚ï¼Œå°±å¾ˆå¯èƒ½æ˜¯ä»£ç†</span></p>\n</li>\n<li class=\"md-list-item\">\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">WebRTC æ³„éœ²æ£€æµ‹ã€‚æµè§ˆå™¨åœ¨å®ç°è§†é¢‘é€šè¯æ—¶ä¼šå°è¯•å»ºç«‹ç‚¹å¯¹ç‚¹è¿æ¥ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­å¯èƒ½æš´éœ²ä½ çš„çœŸå® IP åœ°å€ï¼Œå³ä½¿ä½ ç”¨äº†ä»£ç†ä¹Ÿæ²¡ç”¨</span></p>\n</li>\n</ol>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" /></span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">ä½ ï¼šçœ‹æ¥æƒ³å®Œå…¨éšè— IPï¼Œè¿˜æœ‰ç‚¹å„¿éš¾å•Šâ€¦â€¦</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">é±¼çš®ï¼šæ‰€ä»¥æœ€å¥½è¿˜æ˜¯åˆè§„ä½¿ç”¨ç½‘ç»œï¼Œä¸åšè¿è§„çš„äº‹æƒ…å“¦ã€‚</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-plain\">å°é˜¿å·´ï¼šæ˜ç™½äº†æ˜ç™½äº†ï¼ä¿ºè¦åœ¨ä½ çš„å†…å®¹ä¸‹è¯„è®ºï¼Œçœ‹çœ‹è‡ªå·±çš„å½’å±åœ°~</span></p>\n<p class=\"md-end-block md-p\"><span class=\"md-image md-img-loaded\"><img class=\"lazyload\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></span></p>\n<h2 class=\"md-end-block md-heading\"><span class=\"md-plain\">æ›´å¤šç¼–ç¨‹å­¦ä¹ èµ„æº</span></h2>\n<ul class=\"ul-list\">\n<li class=\"md-list-item\">\n<p class=\"md-end-block md-p\"><span class=\"md-meta-i-c  md-link\"><a href=\"https://www.code-nav.cn/course\" rel=\"noopener nofollow\"><span class=\"md-plain\">Javaå‰ç«¯ç¨‹åºå‘˜å¿…åšé¡¹ç›®å®æˆ˜æ•™ç¨‹+æ¯•è®¾ç½‘ç«™</span></a></span></p>\n</li>\n<li class=\"md-list-item\">\n<p class=\"md-end-block md-p\"><span class=\"md-meta-i-c  md-link\"><a href=\"https://www.code-nav.cn/\" rel=\"noopener nofollow\"><span class=\"md-plain\">ç¨‹åºå‘˜å…è´¹ç¼–ç¨‹å­¦ä¹ äº¤æµç¤¾åŒºï¼ˆè‡ªå­¦å¿…å¤‡ï¼‰</span></a></span></p>\n</li>\n<li class=\"md-list-item\">\n<p class=\"md-end-block md-p\"><span class=\"md-meta-i-c  md-link\"><a href=\"https://www.code-nav.cn/course/cv\" rel=\"noopener nofollow\"><span class=\"md-plain\">ç¨‹åºå‘˜ä¿å§†çº§æ±‚èŒå†™ç®€å†æŒ‡å—ï¼ˆæ‰¾å·¥ä½œå¿…å¤‡ï¼‰</span></a></span></p>\n</li>\n<li class=\"md-list-item\">\n<p class=\"md-end-block md-p\"><span class=\"md-meta-i-c  md-link\"><a href=\"https://www.mianshiya.com/\" rel=\"noopener nofollow\"><span class=\"md-plain\">ç¨‹åºå‘˜å…è´¹é¢è¯•åˆ·é¢˜ç½‘ç«™å·¥å…·ï¼ˆæ‰¾å·¥ä½œå¿…å¤‡ï¼‰</span></a></span></p>\n</li>\n<li class=\"md-list-item\">\n<p class=\"md-end-block md-p\"><span class=\"md-meta-i-c  md-link\"><a href=\"https://www.code-nav.cn/post/1640584449888772098\" rel=\"noopener nofollow\"><span class=\"md-plain\">æœ€æ–°Javaé›¶åŸºç¡€å…¥é—¨å­¦ä¹ è·¯çº¿ + Javaæ•™ç¨‹</span></a></span></p>\n</li>\n<li class=\"md-list-item\">\n<p class=\"md-end-block md-p\"><span class=\"md-meta-i-c  md-link\"><a href=\"https://www.code-nav.cn/post/1640586673306091521\" rel=\"noopener nofollow\"><span class=\"md-plain\">æœ€æ–°Pythoné›¶åŸºç¡€å…¥é—¨å­¦ä¹ è·¯çº¿ + Pythonæ•™ç¨‹</span></a></span></p>\n</li>\n<li class=\"md-list-item\">\n<p class=\"md-end-block md-p\"><span class=\"md-meta-i-c  md-link\"><a href=\"https://www.code-nav.cn/post/1640586014108303362\" rel=\"noopener nofollow\"><span class=\"md-plain\">æœ€æ–°å‰ç«¯é›¶åŸºç¡€å…¥é—¨å­¦ä¹ è·¯çº¿ + å‰ç«¯æ•™ç¨‹</span></a></span></p>\n</li>\n<li class=\"md-list-item\">\n<p class=\"md-end-block md-p\"><span class=\"md-meta-i-c  md-link\"><a href=\"https://www.code-nav.cn/post/1640586867363954689\" rel=\"noopener nofollow\"><span class=\"md-plain\">æœ€æ–°æ•°æ®ç»“æ„å’Œç®—æ³•é›¶åŸºç¡€å…¥é—¨å­¦ä¹ è·¯çº¿ + ç®—æ³•æ•™ç¨‹</span></a></span></p>\n</li>\n<li class=\"md-list-item\">\n<p class=\"md-end-block md-p\"><span class=\"md-meta-i-c  md-link\"><a href=\"https://www.code-nav.cn/post/1644279832026075138\" rel=\"noopener nofollow\"><span class=\"md-plain\">æœ€æ–°C++é›¶åŸºç¡€å…¥é—¨å­¦ä¹ è·¯çº¿ã€C++æ•™ç¨‹</span></a></span></p>\n</li>\n<li class=\"md-list-item\">\n<p class=\"md-end-block md-p\"><span class=\"md-meta-i-c  md-link\"><a href=\"https://www.code-nav.cn/post/1641797333479903234\" rel=\"noopener nofollow\"><span class=\"md-plain\">æœ€æ–°æ•°æ®åº“é›¶åŸºç¡€å…¥é—¨å­¦ä¹ è·¯çº¿ + æ•°æ®åº“æ•™ç¨‹</span></a></span></p>\n</li>\n<li class=\"md-list-item\">\n<p class=\"md-end-block md-p\"><span class=\"md-meta-i-c  md-link\"><a href=\"https://www.code-nav.cn/post/1640589994284695553\" rel=\"noopener nofollow\"><span class=\"md-plain\">æœ€æ–°Redisé›¶åŸºç¡€å…¥é—¨å­¦ä¹ è·¯çº¿ + Redisæ•™ç¨‹</span></a></span></p>\n</li>\n<li class=\"md-list-item\">\n<p class=\"md-end-block md-p\"><span class=\"md-meta-i-c  md-link\"><a href=\"https://www.code-nav.cn/post/1641035880439271426\" rel=\"noopener nofollow\"><span class=\"md-plain\">æœ€æ–°è®¡ç®—æœºåŸºç¡€å…¥é—¨å­¦ä¹ è·¯çº¿ + è®¡ç®—æœºåŸºç¡€æ•™ç¨‹</span></a></span></p>\n</li>\n<li class=\"md-list-item\">\n<p class=\"md-end-block md-p\"><span class=\"md-meta-i-c  md-link\"><a href=\"https://www.code-nav.cn/post/1641366118197153793\" rel=\"noopener nofollow\"><span class=\"md-plain\">æœ€æ–°å°ç¨‹åºå…¥é—¨å­¦ä¹ è·¯çº¿ + å°ç¨‹åºå¼€å‘æ•™ç¨‹</span></a></span></p>\n</li>\n<li class=\"md-list-item\">\n<p class=\"md-end-block md-p\"><span class=\"md-meta-i-c  md-link\"><a href=\"http://sqlmother.yupi.icu/\" rel=\"noopener nofollow\"><span class=\"md-plain\">æœ€æ–°SQLé›¶åŸºç¡€å…¥é—¨å­¦ä¹ è·¯çº¿ + SQLæ•™ç¨‹</span></a></span></p>\n</li>\n<li class=\"md-list-item\">\n<p class=\"md-end-block md-p\"><span class=\"md-meta-i-c  md-link\"><a href=\"https://www.code-nav.cn/post/1640586295529324545\" rel=\"noopener nofollow\"><span class=\"md-plain\">æœ€æ–°Linuxé›¶åŸºç¡€å…¥é—¨å­¦ä¹ è·¯çº¿ + Linuxæ•™ç¨‹</span></a></span></p>\n</li>\n<li class=\"md-list-item\">\n<p class=\"md-end-block md-p\"><span class=\"md-meta-i-c  md-link\"><a href=\"https://www.code-nav.cn/post/1640588753362108417\" rel=\"noopener nofollow\"><span class=\"md-plain\">æœ€æ–°Git/GitHubé›¶åŸºç¡€å…¥é—¨å­¦ä¹ è·¯çº¿ + Gitæ•™ç¨‹</span></a></span></p>\n</li>\n<li class=\"md-list-item\">\n<p class=\"md-end-block md-p\"><span class=\"md-meta-i-c  md-link\"><a href=\"https://www.code-nav.cn/post/1640587909942099969\" rel=\"noopener nofollow\"><span class=\"md-plain\">æœ€æ–°æ“ä½œç³»ç»Ÿé›¶åŸºç¡€å…¥é—¨å­¦ä¹ è·¯çº¿ + æ“ä½œç³»ç»Ÿæ•™ç¨‹</span></a></span></p>\n</li>\n<li class=\"md-list-item\">\n<p class=\"md-end-block md-p\"><span class=\"md-meta-i-c  md-link\"><a href=\"https://www.code-nav.cn/post/1640588119619551233\" rel=\"noopener nofollow\"><span class=\"md-plain\">æœ€æ–°è®¡ç®—æœºç½‘ç»œé›¶åŸºç¡€å…¥é—¨å­¦ä¹ è·¯çº¿ + è®¡ç®—æœºç½‘ç»œæ•™ç¨‹</span></a></span></p>\n</li>\n<li class=\"md-list-item\">\n<p class=\"md-end-block md-p\"><span class=\"md-meta-i-c  md-link\"><a href=\"https://www.code-nav.cn/post/1640588392073150465\" rel=\"noopener nofollow\"><span class=\"md-plain\">æœ€æ–°è®¾è®¡æ¨¡å¼é›¶åŸºç¡€å…¥é—¨å­¦ä¹ è·¯çº¿ + è®¾è®¡æ¨¡å¼æ•™ç¨‹</span></a></span></p>\n</li>\n<li class=\"md-list-item md-focus-container\">\n<p class=\"md-end-block md-p md-focus\"><span class=\"md-meta-i-c md-link md-expand\"><a href=\"https://www.code-nav.cn/post/1640648711119892481\" rel=\"noopener nofollow\"><span class=\"md-plain\">æœ€æ–°è½¯ä»¶å·¥ç¨‹é›¶åŸºç¡€å…¥é—¨å­¦ä¹ è·¯çº¿ + è½¯ä»¶å·¥ç¨‹æ•™ç¨‹</span></a></span></p>\n</li>\n</ul>\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-15 11:41</span>&nbsp;\n<a href=\"https://www.cnblogs.com/yupi\">ç¨‹åºå‘˜é±¼çš®</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">76</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "# Gorse Master å·¥ä½œåŸç†è¯¦è§£",
      "link": "https://www.cnblogs.com/wanber/p/19486510",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/wanber/p/19486510\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-15 11:36\">\n    <span># Gorse Master å·¥ä½œåŸç†è¯¦è§£</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<blockquote>\n<p>Master æ˜¯æ•´ä¸ª Gorse ç³»ç»Ÿçš„\"å¤§è„‘\"å’Œ\"æŒ‡æŒ¥å®˜\"</p>\n</blockquote>\n<h2 id=\"-master-åœ¨æ¶æ„ä¸­çš„ä½ç½®\">ğŸ“Š Master åœ¨æ¶æ„ä¸­çš„ä½ç½®</h2>\n<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                  Master (å¤§è„‘)                    â”‚\nâ”‚          ç«¯å£: 8086 (gRPC) + 8088 (HTTP)         â”‚\nâ””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n     â”‚             â”‚                â”‚\n     â”‚ é…ç½®åŒæ­¥     â”‚ æ¨¡å‹ä¸‹å‘       â”‚ ä»»åŠ¡åˆ†é…\n     â–¼             â–¼                â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Server  â”‚  â”‚ Worker-1 â”‚    â”‚ Worker-2 â”‚\nâ”‚ (APIå±‚) â”‚  â”‚ (è®¡ç®—å±‚) â”‚    â”‚ (è®¡ç®—å±‚) â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n     â”‚             â”‚                â”‚\n     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                   â”‚\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n        â”‚                     â”‚\n   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”\n   â”‚  MySQL   â”‚        â”‚  Redis   â”‚\n   â”‚ (æ•°æ®)   â”‚        â”‚ (ç¼“å­˜)   â”‚\n   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n</code></pre>\n<hr />\n<h2 id=\"-master-çš„å…­å¤§èŒè´£\">ğŸ¯ Master çš„å…­å¤§èŒè´£</h2>\n<h3 id=\"1-ä»»åŠ¡è°ƒåº¦-\">1. <strong>ä»»åŠ¡è°ƒåº¦</strong> ğŸ•</h3>\n<p>å®šæœŸè§¦å‘è®­ç»ƒä»»åŠ¡ï¼Œæ§åˆ¶æ•´ä¸ªæ¨èç³»ç»Ÿçš„ç”Ÿå‘½å‘¨æœŸ</p>\n<h3 id=\"2-æ•°æ®åŠ è½½-\">2. <strong>æ•°æ®åŠ è½½</strong> ğŸ“¦</h3>\n<p>ä» MySQL åŠ è½½ç”¨æˆ·/ç‰©å“/åé¦ˆæ•°æ®ï¼Œæ„å»ºè®­ç»ƒæ•°æ®é›†</p>\n<h3 id=\"3-æ¨¡å‹è®­ç»ƒ-\">3. <strong>æ¨¡å‹è®­ç»ƒ</strong> ğŸ§®</h3>\n<p>è®­ç»ƒååŒè¿‡æ»¤æ¨¡å‹ã€CTR æ¨¡å‹ï¼Œä¿å­˜æ¨¡å‹å‚æ•°</p>\n<h3 id=\"4-automl-ä¼˜åŒ–-\">4. <strong>AutoML ä¼˜åŒ–</strong> ğŸ”§</h3>\n<p>è‡ªåŠ¨æœç´¢æœ€ä½³è¶…å‚æ•°ï¼Œæå‡æ¨èè´¨é‡</p>\n<h3 id=\"5-é…ç½®åˆ†å‘-ï¸\">5. <strong>é…ç½®åˆ†å‘</strong> âš™ï¸</h3>\n<p>é€šè¿‡ gRPC å‘ Server/Worker åˆ†å‘é…ç½®å’Œæ•°æ®åº“è¿æ¥ä¿¡æ¯</p>\n<h3 id=\"6-ç»Ÿè®¡ç›‘æ§-\">6. <strong>ç»Ÿè®¡ç›‘æ§</strong> ğŸ“Š</h3>\n<p>æ”¶é›†ç³»ç»ŸæŒ‡æ ‡ï¼Œæä¾› Dashboard å’Œç›‘æ§æ¥å£</p>\n<hr />\n<h2 id=\"ï¸-master-çš„æ ¸å¿ƒç»“æ„\">ğŸ—ï¸ Master çš„æ ¸å¿ƒç»“æ„</h2>\n<pre><code class=\"language-go\">// master.go:62-100\ntype Master struct {\n    // gRPC æœåŠ¡å™¨ï¼ˆä¸ Worker/Server é€šä¿¡ï¼‰\n    grpcServer *grpc.Server\n    \n    // REST API æœåŠ¡å™¨ï¼ˆDashboard + ç®¡ç†æ¥å£ï¼‰\n    RestServer server.RestServer\n    \n    // æ•°æ®åº“è¿æ¥\n    metaStore  meta.Database    // å…ƒæ•°æ®ï¼ˆSQLiteï¼‰\n    blobStore  blob.Store       // æ¨¡å‹æ–‡ä»¶å­˜å‚¨\n    DataClient  data.Database   // ç”¨æˆ·æ•°æ®ï¼ˆMySQLï¼‰\n    CacheClient cache.Database  // æ¨èç¼“å­˜ï¼ˆRedisï¼‰\n    \n    // ååŒè¿‡æ»¤æ¨¡å‹\n    collaborativeFilteringModelMutex sync.RWMutex\n    collaborativeFilteringMeta       meta.Model[cf.Score]\n    \n    // CTR æ¨¡å‹\n    clickThroughRateModelMutex sync.RWMutex\n    clickThroughRateMeta        meta.Model[ctr.Score]\n    \n    // äº‹ä»¶é€šé“ï¼ˆè§¦å‘è®­ç»ƒï¼‰\n    fitTicker    *time.Ticker              // å®šæ—¶å™¨\n    importedChan *parallel.ConditionChannel // æ•°æ®å¯¼å…¥äº‹ä»¶\n    triggerChan  *parallel.ConditionChannel // æ‰‹åŠ¨è§¦å‘äº‹ä»¶\n}\n</code></pre>\n<hr />\n<h2 id=\"-master-å¯åŠ¨æµç¨‹è¯¦è§£\">ğŸ” Master å¯åŠ¨æµç¨‹è¯¦è§£</h2>\n<h3 id=\"step-1-åˆ›å»º-master-å®ä¾‹mastergo103-144\">Step 1: åˆ›å»º Master å®ä¾‹ï¼ˆmaster.go:103-144ï¼‰</h3>\n<pre><code class=\"language-go\">func NewMaster(cfg *config.Config, cacheFolder string, standalone bool) *Master {\n    // 1. è®¾ç½®è¿½è¸ªæä¾›è€…ï¼ˆOpenTelemetryï¼‰\n    tp, _ := cfg.Tracing.NewTracerProvider()\n    otel.SetTracerProvider(tp)\n    \n    // 2. è®¾ç½® OpenAI å®¢æˆ·ç«¯ï¼ˆå¦‚æœä½¿ç”¨ LLM æ’åºï¼‰\n    clientConfig := openai.DefaultConfig(cfg.OpenAI.AuthToken)\n    openAIClient := openai.NewClientWithConfig(clientConfig)\n    \n    // 3. åˆ›å»ºå®šæ—¶å™¨ï¼ˆé»˜è®¤æ¯å°æ—¶è®­ç»ƒä¸€æ¬¡ï¼‰\n    duration := cfg.Recommend.Collaborative.FitPeriod  // å¦‚ 60m\n    fitTicker := time.NewTicker(duration)\n    \n    // 4. åˆ›å»ºäº‹ä»¶é€šé“\n    importedChan := parallel.NewConditionChannel()  // æ•°æ®å¯¼å…¥é€šçŸ¥\n    triggerChan := parallel.NewConditionChannel()   // æ‰‹åŠ¨è§¦å‘é€šçŸ¥\n    \n    m := &amp;Master{\n        cachePath:    cacheFolder,\n        openAIClient: openAIClient,\n        fitTicker:    fitTicker,\n        importedChan: importedChan,\n        triggerChan:  triggerChan,\n        RestServer: server.RestServer{\n            Config:     cfg,\n            HttpHost:   cfg.Master.HttpHost,\n            HttpPort:   cfg.Master.HttpPort,\n        },\n    }\n    return m\n}\n</code></pre>\n<p><strong>å…³é”®é…ç½®</strong>ï¼š</p>\n<ul>\n<li>âœ… <code>FitPeriod</code>ï¼šè®­ç»ƒå‘¨æœŸï¼ˆé»˜è®¤ 60 åˆ†é’Ÿï¼‰</li>\n<li>âœ… <code>CacheFolder</code>ï¼šå­˜å‚¨æ¨¡å‹å’Œå…ƒæ•°æ®çš„è·¯å¾„</li>\n<li>âœ… <code>Standalone</code>ï¼šæ˜¯å¦ç‹¬ç«‹æ¨¡å¼ï¼ˆåŒ…å« Worker åŠŸèƒ½ï¼‰</li>\n</ul>\n<hr />\n<h3 id=\"step-2-å¯åŠ¨æœåŠ¡mastergo147-283-æ ¸å¿ƒ\">Step 2: å¯åŠ¨æœåŠ¡ï¼ˆmaster.go:147-283ï¼‰â­ æ ¸å¿ƒ</h3>\n<pre><code class=\"language-go\">func (m *Master) Serve() {\n    var err error\n    \n    // 1ï¸âƒ£ è¿æ¥ Blob Storeï¼ˆå­˜å‚¨æ¨¡å‹æ–‡ä»¶ï¼‰\n    if m.Config.S3.Endpoint != \"\" {\n        m.blobStore, _ = blob.NewS3(m.Config.S3)  // AWS S3\n    } else if m.Config.GCS.Bucket != \"\" {\n        m.blobStore, _ = blob.NewGCS(m.Config.GCS)  // Google Cloud Storage\n    } else {\n        m.blobStore = blob.NewPOSIX(m.cachePath)  // æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ\n    }\n    \n    // 2ï¸âƒ£ è¿æ¥ Meta Databaseï¼ˆSQLiteï¼Œå­˜å‚¨å…ƒæ•°æ®ï¼‰\n    m.metaStore, _ = meta.Open(\n        fmt.Sprintf(\"sqlite://%s/meta.sqlite3\", m.cachePath),\n        m.Config.Master.MetaTimeout,\n    )\n    m.metaStore.Init()\n    \n    // 3ï¸âƒ£ è¿æ¥ Data Databaseï¼ˆMySQL/PostgreSQLï¼‰\n    m.DataClient, _ = data.Open(\n        m.Config.Database.DataStore,  // \"mysql://user:pass@host/db\"\n        m.Config.Database.DataTablePrefix,\n    )\n    m.DataClient.Init()\n    \n    // 4ï¸âƒ£ è¿æ¥ Cache Databaseï¼ˆRedisï¼‰\n    m.CacheClient, _ = cache.Open(\n        m.Config.Database.CacheStore,  // \"redis://host:6379\"\n        m.Config.Database.CacheTablePrefix,\n    )\n    m.CacheClient.Init()\n    \n    // 5ï¸âƒ£ åŠ è½½å·²ä¿å­˜çš„æ¨¡å‹å…ƒæ•°æ®\n    metaStr, _ := m.metaStore.Get(meta.COLLABORATIVE_FILTERING_MODEL)\n    if metaStr != nil {\n        m.collaborativeFilteringMeta.FromJSON(*metaStr)\n        log.Logger().Info(\"loaded collaborative filtering model\",\n            zap.String(\"type\", m.collaborativeFilteringMeta.Type),\n            zap.Any(\"params\", m.collaborativeFilteringMeta.Params),\n            zap.Any(\"score\", m.collaborativeFilteringMeta.Score))\n    }\n    \n    // 6ï¸âƒ£ å¯åŠ¨ä»»åŠ¡è°ƒåº¦å¾ªç¯ï¼ˆåå° goroutineï¼‰â­â­â­\n    go m.RunTasksLoop()\n    \n    // 7ï¸âƒ£ å¯åŠ¨ gRPC æœåŠ¡å™¨ï¼ˆåå° goroutineï¼‰\n    go func() {\n        log.Logger().Info(\"start rpc server\",\n            zap.String(\"host\", m.Config.Master.Host),\n            zap.Int(\"port\", m.Config.Master.Port))  // é»˜è®¤ 8086\n        \n        lis, _ := net.Listen(\"tcp\", \n            fmt.Sprintf(\"%s:%d\", m.Config.Master.Host, m.Config.Master.Port))\n        \n        m.grpcServer = grpc.NewServer()\n        \n        // æ³¨å†ŒæœåŠ¡\n        protocol.RegisterMasterServer(m.grpcServer, m)              // Master æœåŠ¡\n        protocol.RegisterCacheStoreServer(m.grpcServer, ...)        // Cache ä»£ç†\n        protocol.RegisterDataStoreServer(m.grpcServer, ...)         // Data ä»£ç†\n        protocol.RegisterBlobStoreServer(m.grpcServer, ...)         // Blob å­˜å‚¨\n        \n        m.grpcServer.Serve(lis)\n    }()\n    \n    // 8ï¸âƒ£ å¯åŠ¨ HTTP æœåŠ¡å™¨ï¼ˆDashboardï¼‰\n    m.StartHttpServer()  // é»˜è®¤ç«¯å£ 8088\n}\n</code></pre>\n<p><strong>å¯åŠ¨é¡ºåºå›¾</strong>ï¼š</p>\n<pre><code>Master å¯åŠ¨\n    â†“\n1. è¿æ¥ Blob Store (S3/GCS/æœ¬åœ°)\n    â†“\n2. è¿æ¥ Meta Store (SQLite)\n    â†“\n3. è¿æ¥ Data Store (MySQL)\n    â†“\n4. è¿æ¥ Cache Store (Redis)\n    â†“\n5. åŠ è½½å·²ä¿å­˜çš„æ¨¡å‹\n    â†“\n6. å¯åŠ¨ä»»åŠ¡è°ƒåº¦å¾ªç¯ (goroutine)\n    â†“\n7. å¯åŠ¨ gRPC æœåŠ¡å™¨ (8086)\n    â†“\n8. å¯åŠ¨ HTTP æœåŠ¡å™¨ (8088)\n    â†“\nâœ… Master å°±ç»ªï¼\n</code></pre>\n<hr />\n<h2 id=\"-ä»»åŠ¡è°ƒåº¦å¾ªç¯mastergo295-323-æœ€æ ¸å¿ƒ\">ğŸ”„ ä»»åŠ¡è°ƒåº¦å¾ªç¯ï¼ˆmaster.go:295-323ï¼‰â­â­â­ æœ€æ ¸å¿ƒ</h2>\n<pre><code class=\"language-go\">func (m *Master) RunTasksLoop() {\n    defer util.CheckPanic()\n    \n    // åå°ç›‘æ§æ•°æ®å¯¼å…¥\n    go func() {\n        m.importedChan.Signal()  // é¦–æ¬¡ç«‹å³è§¦å‘\n        for {\n            if m.checkDataImported() {  // æ£€æŸ¥æ˜¯å¦æœ‰æ–°æ•°æ®å¯¼å…¥\n                m.importedChan.Signal()\n            }\n            time.Sleep(time.Second)  // æ¯ç§’æ£€æŸ¥ä¸€æ¬¡\n        }\n    }()\n    \n    // ä¸»å¾ªç¯ï¼šç­‰å¾…è§¦å‘äº‹ä»¶\n    for {\n        select {\n        case &lt;-m.fitTicker.C:      // å®šæ—¶è§¦å‘ï¼ˆå¦‚æ¯å°æ—¶ï¼‰\n        case &lt;-m.importedChan.C:    // æ•°æ®å¯¼å…¥è§¦å‘\n        case &lt;-m.triggerChan.C:     // æ‰‹åŠ¨è§¦å‘\n        }\n        \n        // æ‰§è¡Œå®Œæ•´çš„è®­ç»ƒæµç¨‹\n        err := m.runLoadDatasetTask()  // 1. åŠ è½½æ•°æ®é›†\n        if err != nil {\n            log.Logger().Error(\"failed to load dataset\", zap.Error(err))\n            continue\n        }\n        \n        // åç»­è¿˜ä¼šè°ƒç”¨ï¼ˆåœ¨å®é™…ä»£ç ä¸­ï¼‰ï¼š\n        // m.runFitCollaborativeFilteringTask()  // 2. è®­ç»ƒååŒè¿‡æ»¤æ¨¡å‹\n        // m.runFitClickModelTask()              // 3. è®­ç»ƒ CTR æ¨¡å‹\n        // m.runCacheTask()                      // 4. ç”Ÿæˆæ¨èç¼“å­˜\n    }\n}\n</code></pre>\n<p><strong>è°ƒåº¦æµç¨‹å›¾</strong>ï¼š</p>\n<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚         ä¸»å¾ªç¯ï¼ˆæ°¸ä¸åœæ­¢ï¼‰            â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n             â”‚\n    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”\n    â”‚  ç­‰å¾…è§¦å‘äº‹ä»¶    â”‚\n    â”‚  - å®šæ—¶å™¨         â”‚\n    â”‚  - æ•°æ®å¯¼å…¥       â”‚\n    â”‚  - æ‰‹åŠ¨è§¦å‘       â”‚\n    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n             â”‚\n             â–¼\n    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n    â”‚ 1. åŠ è½½æ•°æ®é›†   â”‚  â† tasks.go:loadDataset()\n    â”‚    ä» MySQL     â”‚\n    â”‚    æ„å»ºè®­ç»ƒé›†   â”‚\n    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n             â”‚\n             â–¼\n    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n    â”‚ 2. è®­ç»ƒ CF æ¨¡å‹ â”‚  â† tasks.go:fitCollaborativeFiltering()\n    â”‚    BPR/ALS      â”‚\n    â”‚    è¯„ä¼°æ€§èƒ½     â”‚\n    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n             â”‚\n             â–¼\n    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n    â”‚ 3. AutoML ä¼˜åŒ–  â”‚  â† tasks.go:optimizeCollaborativeFiltering()\n    â”‚    æœç´¢æœ€ä½³å‚æ•° â”‚\n    â”‚    (å¯é€‰)       â”‚\n    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n             â”‚\n             â–¼\n    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n    â”‚ 4. è®­ç»ƒ CTR æ¨¡å‹â”‚  â† tasks.go:fitClickModel()\n    â”‚    FM/DeepFM    â”‚\n    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n             â”‚\n             â–¼\n    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n    â”‚ 5. åˆ†å‘ä»»åŠ¡ç»™   â”‚  â† Worker æ‰§è¡Œæ¨èè®¡ç®—\n    â”‚    Worker       â”‚\n    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n             â”‚\n             â–¼\n    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n    â”‚ 6. ç­‰å¾…ä¸‹æ¬¡è§¦å‘ â”‚\n    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n</code></pre>\n<hr />\n<h2 id=\"-ä»»åŠ¡-1åŠ è½½æ•°æ®é›†tasksgo51-149\">ğŸ“¦ ä»»åŠ¡ 1ï¼šåŠ è½½æ•°æ®é›†ï¼ˆtasks.go:51-149ï¼‰</h2>\n<pre><code class=\"language-go\">func (m *Master) loadDataset() (datasets Datasets, err error) {\n    ctx, span := m.tracer.Start(context.Background(), \"Load Dataset\", 1)\n    defer span.End()\n    \n    // 1ï¸âƒ£ åˆ›å»ºéä¸ªæ€§åŒ–æ¨èå™¨ï¼ˆæµè¡Œã€æœ€æ–°ç­‰ï¼‰\n    nonPersonalizedRecommenders := make([]*logics.NonPersonalized, 0)\n    for _, cfg := range m.Config.Recommend.NonPersonalized {\n        recommender, _ := logics.NewNonPersonalized(cfg, ...)\n        nonPersonalizedRecommenders = append(nonPersonalizedRecommenders, recommender)\n    }\n    \n    // 2ï¸âƒ£ ä» MySQL åŠ è½½æ•°æ®\n    log.Logger().Info(\"load dataset\",\n        zap.Any(\"positive_feedback_types\", m.Config.Recommend.DataSource.PositiveFeedbackTypes),\n        zap.Uint(\"item_ttl\", m.Config.Recommend.DataSource.ItemTTL))\n    \n    datasets.clickDataset, datasets.rankingDataset, err = m.LoadDataFromDatabase(\n        ctx, \n        m.DataClient,\n        m.Config.Recommend.DataSource.PositiveFeedbackTypes,  // [\"purchase\", \"like\"]\n        m.Config.Recommend.DataSource.ReadFeedbackTypes,      // [\"click\", \"view\"]\n        m.Config.Recommend.DataSource.ItemTTL,                // ç‰©å“è¿‡æœŸæ—¶é—´\n        m.Config.Recommend.DataSource.PositiveFeedbackTTL,    // åé¦ˆè¿‡æœŸæ—¶é—´\n        evaluator,\n        nonPersonalizedRecommenders,\n    )\n    \n    // 3ï¸âƒ£ ä¿å­˜éä¸ªæ€§åŒ–æ¨èç»“æœåˆ° Redis\n    for i, recommender := range nonPersonalizedRecommenders {\n        scores := recommender.PopAll()\n        m.CacheClient.AddScores(ctx, cache.NonPersonalized, recommender.Name(), scores)\n    }\n    \n    // 4ï¸âƒ£ å†™å…¥ç»Ÿè®¡æ•°æ®åˆ° Redis\n    m.CacheClient.AddTimeSeriesPoints(ctx, []cache.TimeSeriesPoint{\n        {Name: cache.NumUsers, Value: float64(datasets.rankingDataset.CountUsers())},\n        {Name: cache.NumItems, Value: float64(datasets.rankingDataset.CountItems())},\n        {Name: cache.NumFeedback, Value: float64(len(datasets.clickDataset.Target))},\n    })\n    \n    // 5ï¸âƒ£ åˆ†å‰²è®­ç»ƒé›†å’Œæµ‹è¯•é›†\n    datasets.rankingTrainSet, datasets.rankingTestSet = \n        datasets.rankingDataset.SplitCF(numTestUsers, seed)\n    datasets.clickTrainSet, datasets.clickTestSet = \n        datasets.clickDataset.Split(testRatio, seed)\n    \n    return datasets, nil\n}\n</code></pre>\n<p><strong>åŠ è½½æ•°æ®æµç¨‹</strong>ï¼š</p>\n<pre><code>MySQL æ•°æ®åº“\n    â”‚\n    â”‚ SELECT * FROM users\n    â”‚ SELECT * FROM items  \n    â”‚ SELECT * FROM feedbacks WHERE feedback_type IN ('purchase', 'like')\n    â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  LoadDataFromDatabase   â”‚\nâ”‚  - è¿‡æ»¤è¿‡æœŸæ•°æ®         â”‚\nâ”‚  - è¿‡æ»¤éšè—ç‰©å“         â”‚\nâ”‚  - æ„å»ºç”¨æˆ·-ç‰©å“çŸ©é˜µ    â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n           â”‚\n           â”œâ”€â”€â†’ rankingDataset (ååŒè¿‡æ»¤ç”¨)\n           â”‚    - ç”¨æˆ·æ•°: 10,000\n           â”‚    - ç‰©å“æ•°: 50,000\n           â”‚    - åé¦ˆæ•°: 500,000\n           â”‚\n           â””â”€â”€â†’ clickDataset (CTR æ¨¡å‹ç”¨)\n                - æ­£æ ·æœ¬: 300,000\n                - è´Ÿæ ·æœ¬: 200,000\n</code></pre>\n<hr />\n<h2 id=\"-ä»»åŠ¡-2è®­ç»ƒååŒè¿‡æ»¤æ¨¡å‹\">ğŸ§® ä»»åŠ¡ 2ï¼šè®­ç»ƒååŒè¿‡æ»¤æ¨¡å‹</h2>\n<pre><code class=\"language-go\">func (m *Master) fitCollaborativeFiltering(datasets Datasets) {\n    // 1ï¸âƒ£ é€‰æ‹©æ¨¡å‹ç±»å‹\n    modelName := m.Config.Recommend.Collaborative.Model\n    // å¯é€‰: bpr, als, item-cf, user-cf\n    \n    // 2ï¸âƒ£ è®¾ç½®è¶…å‚æ•°\n    params := model.Params{\n        model.NFactors:   50,      // éšå‘é‡ç»´åº¦\n        model.Lr:         0.01,    // å­¦ä¹ ç‡\n        model.Reg:        0.01,    // æ­£åˆ™åŒ–\n        model.NEpochs:    100,     // è®­ç»ƒè½®æ•°\n        model.InitMean:   0,\n        model.InitStdDev: 0.1,\n    }\n    \n    // 3ï¸âƒ£ åˆ›å»ºå¹¶è®­ç»ƒæ¨¡å‹\n    var cfModel cf.MatrixFactorization\n    switch modelName {\n    case \"bpr\":\n        cfModel = cf.NewBPR(params)\n    case \"als\":\n        cfModel = cf.NewALS(params)\n    }\n    \n    // 4ï¸âƒ£ è®­ç»ƒ\n    log.Logger().Info(\"start training\", \n        zap.String(\"model\", modelName),\n        zap.Any(\"params\", params))\n    \n    cfModel.Fit(datasets.rankingTrainSet, datasets.rankingTestSet, ...)\n    \n    // 5ï¸âƒ£ è¯„ä¼°æ¨¡å‹\n    scores := cfModel.Evaluate(datasets.rankingTestSet)\n    log.Logger().Info(\"model trained\",\n        zap.Float32(\"Precision@10\", scores.Precision),\n        zap.Float32(\"Recall@10\", scores.Recall),\n        zap.Float32(\"NDCG@10\", scores.NDCG))\n    \n    // 6ï¸âƒ£ ä¿å­˜æ¨¡å‹\n    modelBytes := cfModel.Marshal()\n    m.blobStore.Put(\"models/cf_model.bin\", modelBytes)\n    \n    // 7ï¸âƒ£ ä¿å­˜å…ƒæ•°æ®\n    m.collaborativeFilteringMeta = meta.Model[cf.Score]{\n        Type:   modelName,\n        Params: params,\n        Score:  scores,\n    }\n    m.metaStore.Set(meta.COLLABORATIVE_FILTERING_MODEL, \n        m.collaborativeFilteringMeta.ToJSON())\n}\n</code></pre>\n<hr />\n<h2 id=\"-ä»»åŠ¡-3automl-è¶…å‚æ•°ä¼˜åŒ–å¯é€‰\">ğŸ”§ ä»»åŠ¡ 3ï¼šAutoML è¶…å‚æ•°ä¼˜åŒ–ï¼ˆå¯é€‰ï¼‰</h2>\n<pre><code class=\"language-go\">func (m *Master) optimizeCollaborativeFiltering(datasets Datasets) {\n    // ä½¿ç”¨ TPE (Tree-structured Parzen Estimator) ç®—æ³•\n    \n    study, _ := goptuna.CreateStudy(\"cf-optimize\", \n        goptuna.StudyOptionSampler(tpe.NewSampler()))\n    \n    // å®šä¹‰ä¼˜åŒ–ç›®æ ‡\n    objective := func(trial goptuna.Trial) (float64, error) {\n        // 1ï¸âƒ£ é‡‡æ ·è¶…å‚æ•°\n        nFactors := trial.SuggestInt(\"n_factors\", 10, 100)\n        lr := trial.SuggestFloat(\"lr\", 0.001, 0.1)\n        reg := trial.SuggestFloat(\"reg\", 0.001, 0.1)\n        \n        // 2ï¸âƒ£ ä½¿ç”¨è¿™ç»„å‚æ•°è®­ç»ƒæ¨¡å‹\n        params := model.Params{\n            model.NFactors: nFactors,\n            model.Lr:       lr,\n            model.Reg:      reg,\n        }\n        cfModel := cf.NewBPR(params)\n        cfModel.Fit(datasets.rankingTrainSet, datasets.rankingTestSet, ...)\n        \n        // 3ï¸âƒ£ è¿”å›è¯„ä¼°æŒ‡æ ‡ï¼ˆè¶Šå¤§è¶Šå¥½ï¼‰\n        scores := cfModel.Evaluate(datasets.rankingTestSet)\n        return float64(scores.NDCG), nil\n    }\n    \n    // 4ï¸âƒ£ è¿è¡Œä¼˜åŒ–ï¼ˆé»˜è®¤ 10 æ¬¡è¯•éªŒï¼‰\n    for i := 0; i &lt; m.Config.Recommend.Collaborative.OptimizeTrials; i++ {\n        study.Optimize(objective, 1)\n        \n        log.Logger().Info(\"optimization progress\",\n            zap.Int(\"trial\", i+1),\n            zap.Float64(\"best_ndcg\", study.GetBestValue()))\n    }\n    \n    // 5ï¸âƒ£ ä½¿ç”¨æœ€ä½³å‚æ•°é‡æ–°è®­ç»ƒ\n    bestParams := study.GetBestParams()\n    log.Logger().Info(\"found best params\", zap.Any(\"params\", bestParams))\n}\n</code></pre>\n<p><strong>AutoML æœç´¢ç©ºé—´</strong>ï¼š</p>\n<pre><code>è¶…å‚æ•°èŒƒå›´ï¼š\n- n_factors:  [10, 20, 50, 100]        # éšå‘é‡ç»´åº¦\n- lr:         [0.001, 0.01, 0.05, 0.1] # å­¦ä¹ ç‡\n- reg:        [0.001, 0.01, 0.1]       # æ­£åˆ™åŒ–\n- n_epochs:   [50, 100, 200]           # è®­ç»ƒè½®æ•°\n\nç›®æ ‡ï¼šæœ€å¤§åŒ– NDCG@10\næ–¹æ³•ï¼šTPE (è´å¶æ–¯ä¼˜åŒ–)\nè¯•éªŒæ¬¡æ•°ï¼š10 æ¬¡ï¼ˆé»˜è®¤ï¼‰\n</code></pre>\n<hr />\n<h2 id=\"-grpc-æœåŠ¡é…ç½®åˆ†å‘\">ğŸ“¡ gRPC æœåŠ¡ï¼šé…ç½®åˆ†å‘</h2>\n<h3 id=\"serverworker-è¯·æ±‚é…ç½®\">Server/Worker è¯·æ±‚é…ç½®</h3>\n<pre><code class=\"language-go\">// rpc.go\nfunc (m *Master) GetMeta(ctx context.Context, nodeInfo *protocol.NodeInfo) (*protocol.Meta, error) {\n    // 1ï¸âƒ£ è®°å½•èŠ‚ç‚¹ä¿¡æ¯\n    log.Logger().Info(\"node connected\",\n        zap.String(\"node_type\", nodeInfo.NodeType.String()),\n        zap.String(\"uuid\", nodeInfo.Uuid),\n        zap.String(\"version\", nodeInfo.BinaryVersion))\n    \n    // 2ï¸âƒ£ åºåˆ—åŒ–é…ç½®ä¸º JSON\n    configJson, _ := json.Marshal(m.Config)\n    \n    // 3ï¸âƒ£ è¿”å›å…ƒæ•°æ®\n    return &amp;protocol.Meta{\n        Config:             string(configJson),\n        ConfigVersion:      m.Config.Version,\n        RankingModelName:   m.collaborativeFilteringMeta.Type,\n        RankingModelVersion: m.collaborativeFilteringMeta.Version,\n        // ... å…¶ä»–å…ƒæ•°æ®\n    }, nil\n}\n</code></pre>\n<h3 id=\"worker-è¯·æ±‚æ¨¡å‹\">Worker è¯·æ±‚æ¨¡å‹</h3>\n<pre><code class=\"language-go\">func (m *Master) GetRankingModel(ctx context.Context, req *protocol.VersionInfo) (*protocol.Model, error) {\n    // 1ï¸âƒ£ è¯»å–æ¨¡å‹å…ƒæ•°æ®\n    m.collaborativeFilteringModelMutex.RLock()\n    meta := m.collaborativeFilteringMeta\n    m.collaborativeFilteringModelMutex.RUnlock()\n    \n    // 2ï¸âƒ£ ä» Blob Store è¯»å–æ¨¡å‹æ–‡ä»¶\n    modelBytes, _ := m.blobStore.Get(\"models/cf_model.bin\")\n    \n    // 3ï¸âƒ£ è¿”å›æ¨¡å‹\n    return &amp;protocol.Model{\n        Name:    meta.Type,\n        Version: meta.Version,\n        Data:    modelBytes,\n    }, nil\n}\n</code></pre>\n<hr />\n<h2 id=\"-master-çš„æ•°æ®æµ\">ğŸ¨ Master çš„æ•°æ®æµ</h2>\n<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚              Master æ•°æ®æµ                  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n        â”‚\n   è¾“å…¥æº â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ MySQL         â”‚\nâ”‚ - users       â”‚\nâ”‚ - items       â”‚\nâ”‚ - feedbacks   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜\n        â”‚ åŠ è½½\n        â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Dataset          â”‚\nâ”‚ - 10K ç”¨æˆ·       â”‚\nâ”‚ - 50K ç‰©å“       â”‚\nâ”‚ - 500K åé¦ˆ      â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â”‚ è®­ç»ƒ\n         â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ CF Model (BPR)   â”‚\nâ”‚ UserFactor: 10KÃ—50â”‚\nâ”‚ ItemFactor: 50KÃ—50â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â”‚ ä¿å­˜\n         â”œâ”€â”€â†’ Blob Store (æ¨¡å‹æ–‡ä»¶)\n         â””â”€â”€â†’ Meta Store (å…ƒæ•°æ®)\n                 â”‚\n                 â”‚ åˆ†å‘\n                 â–¼\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n        â”‚ Worker         â”‚\n        â”‚ - ä¸‹è½½æ¨¡å‹     â”‚\n        â”‚ - è®¡ç®—æ¨è     â”‚\n        â”‚ - å†™å…¥ Redis   â”‚\n        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n</code></pre>\n<hr />\n<h2 id=\"ï¸-master-çš„é…ç½®ç®¡ç†\">âš™ï¸ Master çš„é…ç½®ç®¡ç†</h2>\n<h3 id=\"é…ç½®çƒ­æ›´æ–°\">é…ç½®çƒ­æ›´æ–°</h3>\n<pre><code class=\"language-go\">// Master ç›‘æ§é…ç½®æ–‡ä»¶å˜åŒ–\nfunc (m *Master) watchConfig() {\n    watcher, _ := fsnotify.NewWatcher()\n    watcher.Add(\"config.toml\")\n    \n    for {\n        select {\n        case event := &lt;-watcher.Events:\n            if event.Op&amp;fsnotify.Write == fsnotify.Write {\n                // é‡æ–°åŠ è½½é…ç½®\n                newConfig, _ := config.LoadConfig(\"config.toml\")\n                m.Config = newConfig\n                \n                log.Logger().Info(\"config reloaded\")\n                \n                // è§¦å‘é‡æ–°è®­ç»ƒ\n                m.triggerChan.Signal()\n            }\n        }\n    }\n}\n</code></pre>\n<hr />\n<h2 id=\"-master-ç›‘æ§æŒ‡æ ‡\">ğŸ“Š Master ç›‘æ§æŒ‡æ ‡</h2>\n<h3 id=\"prometheus-æŒ‡æ ‡\">Prometheus æŒ‡æ ‡</h3>\n<pre><code class=\"language-go\">// metrics.go\n\n// ç”¨æˆ·å’Œç‰©å“ç»Ÿè®¡\nUsersTotal = prometheus.NewGauge(...)\nItemsTotal = prometheus.NewGauge(...)\nImplicitFeedbacksTotal = prometheus.NewGauge(...)\n\n// æ¨¡å‹æ€§èƒ½\nModelPrecision = prometheus.NewGauge(...)\nModelRecall = prometheus.NewGauge(...)\nModelNDCG = prometheus.NewGauge(...)\n\n// è®­ç»ƒæ—¶é•¿\nTrainingDuration = prometheus.NewHistogram(...)\n\n// å†…å­˜ä½¿ç”¨\nMemoryInUse = prometheus.NewGauge(...)\n</code></pre>\n<h3 id=\"dashboard-è®¿é—®\">Dashboard è®¿é—®</h3>\n<pre><code class=\"language-bash\"># HTTP æ¥å£\nGET http://master:8088/api/dashboard/stats\n# è¿”å›ï¼š\n{\n  \"num_users\": 10000,\n  \"num_items\": 50000,\n  \"num_feedbacks\": 500000,\n  \"model_precision\": 0.23,\n  \"model_recall\": 0.45,\n  \"model_ndcg\": 0.67\n}\n\n# Prometheus æŒ‡æ ‡\nGET http://master:8088/metrics\n</code></pre>\n<hr />\n<h2 id=\"-master-vs-server-å¯¹æ¯”\">ğŸ¯ Master vs Server å¯¹æ¯”</h2>\n<table>\n<thead>\n<tr>\n<th>ç‰¹æ€§</th>\n<th>Master</th>\n<th>Server</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>ä½œç”¨</strong></td>\n<td>å¤§è„‘ï¼ˆè°ƒåº¦è®­ç»ƒï¼‰</td>\n<td>æ‰‹ï¼ˆæä¾› APIï¼‰</td>\n</tr>\n<tr>\n<td><strong>çŠ¶æ€</strong></td>\n<td>æœ‰çŠ¶æ€ï¼ˆå­˜å‚¨æ¨¡å‹ï¼‰</td>\n<td>æ— çŠ¶æ€ï¼ˆåªè¯»ç¼“å­˜ï¼‰</td>\n</tr>\n<tr>\n<td><strong>å®ä¾‹æ•°</strong></td>\n<td>1 ä¸ªï¼ˆå•ä¾‹ï¼‰</td>\n<td>N ä¸ªï¼ˆå¯æ‰©å±•ï¼‰</td>\n</tr>\n<tr>\n<td><strong>ç«¯å£</strong></td>\n<td>8086 (gRPC) + 8088 (HTTP)</td>\n<td>8087 (HTTP)</td>\n</tr>\n<tr>\n<td><strong>ä¸»è¦å·¥ä½œ</strong></td>\n<td>è®­ç»ƒæ¨¡å‹ã€åˆ†é…ä»»åŠ¡</td>\n<td>è¯»å–ç¼“å­˜ã€è¿”å›æ¨è</td>\n</tr>\n<tr>\n<td><strong>æ•°æ®åº“</strong></td>\n<td>è¯»å†™ MySQL/Redis</td>\n<td>åªè¯» Redis</td>\n</tr>\n<tr>\n<td><strong>CPU ä½¿ç”¨</strong></td>\n<td>é«˜ï¼ˆè®­ç»ƒå¯†é›†ï¼‰</td>\n<td>ä½ï¼ˆåªè¯»ç¼“å­˜ï¼‰</td>\n</tr>\n<tr>\n<td><strong>å†…å­˜ä½¿ç”¨</strong></td>\n<td>é«˜ï¼ˆåŠ è½½æ•°æ®é›†ï¼‰</td>\n<td>ä½ï¼ˆæ— éœ€å­˜å‚¨ï¼‰</td>\n</tr>\n<tr>\n<td><strong>æ•…éšœå½±å“</strong></td>\n<td>æ— æ³•è®­ç»ƒï¼Œä½†æ¨èç»§ç»­</td>\n<td>éƒ¨åˆ†å®ä¾‹å¤±è´¥ï¼Œå…¶ä»–ç»§ç»­</td>\n</tr>\n</tbody>\n</table>\n<hr />\n<h2 id=\"-æ ¸å¿ƒè¦ç‚¹æ€»ç»“\">ğŸ’¡ æ ¸å¿ƒè¦ç‚¹æ€»ç»“</h2>\n<h3 id=\"master-çš„æœ¬è´¨\">Master çš„æœ¬è´¨</h3>\n<pre><code>Master = ä»»åŠ¡è°ƒåº¦å™¨ + æ¨¡å‹è®­ç»ƒå™¨ + é…ç½®ç®¡ç†å™¨\n\næ ¸å¿ƒå·¥ä½œï¼š\n1. å®šæœŸä» MySQL åŠ è½½æ•°æ®\n2. è®­ç»ƒååŒè¿‡æ»¤æ¨¡å‹\n3. åˆ†é…æ¨èè®¡ç®—ä»»åŠ¡ç»™ Worker\n4. é€šè¿‡ gRPC åˆ†å‘é…ç½®ç»™ Server/Worker\n5. ç›‘æ§ç³»ç»ŸçŠ¶æ€\n\nNOT åšçš„äº‹ï¼š\nâŒ ä¸æä¾›æ¨è APIï¼ˆServer åšï¼‰\nâŒ ä¸è®¡ç®—æ¨èç»“æœï¼ˆWorker åšï¼‰\nâŒ ä¸é¢å‘ç»ˆç«¯ç”¨æˆ·ï¼ˆåªé¢å‘é›†ç¾¤å†…éƒ¨ï¼‰\n</code></pre>\n<h3 id=\"master-çš„è°ƒåº¦å‘¨æœŸ\">Master çš„è°ƒåº¦å‘¨æœŸ</h3>\n<pre><code>é»˜è®¤é…ç½®ï¼š\n- è®­ç»ƒå‘¨æœŸï¼š60 åˆ†é’Ÿï¼ˆFitPeriodï¼‰\n- AutoML å‘¨æœŸï¼š360 åˆ†é’Ÿï¼ˆOptimizePeriodï¼‰\n- æ•°æ®æ£€æŸ¥ï¼š1 ç§’ï¼ˆæ£€æŸ¥æ˜¯å¦æœ‰æ–°æ•°æ®å¯¼å…¥ï¼‰\n\nå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è§¦å‘è®­ç»ƒï¼š\n1. å®šæ—¶å™¨åˆ°æœŸï¼ˆæ¯å°æ—¶ï¼‰\n2. æ•°æ®å¯¼å…¥ï¼ˆAPI æ’å…¥å¤§é‡åé¦ˆåï¼‰\n3. æ‰‹åŠ¨è§¦å‘ï¼ˆDashboard ç‚¹å‡»æŒ‰é’®ï¼‰\n</code></pre>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-15 11:36</span>&nbsp;\n<a href=\"https://www.cnblogs.com/wanber\">æŠ€æœ¯æ¼«æ¸¸</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">0</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "ä¸æœè·‘ä¸ªåˆ†ï¼Ÿ.NET 10 å¤§æ•´æ•°è®¡ç®—å¯¹é˜µ Javaï¼Œç»“æœä»¤äººæ„å¤–",
      "link": "https://www.cnblogs.com/sdcb/p/19484525/20261113-big-integer-dotnet-10-vs-java",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/sdcb/p/19484525/20261113-big-integer-dotnet-10-vs-java\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-15 08:50\">\n    <span>ä¸æœè·‘ä¸ªåˆ†ï¼Ÿ.NET 10 å¤§æ•´æ•°è®¡ç®—å¯¹é˜µ Javaï¼Œç»“æœä»¤äººæ„å¤–</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h2 id=\"å¼•è¨€ä»ç»éªŒå€¼åˆ°æ— é™å¤§\">å¼•è¨€ï¼šä»â€œç»éªŒå€¼â€åˆ°æ— é™å¤§</h2>\n<p>æˆ‘å¯¹æ•°å€¼è®¡ç®—çš„æ‰§å¿µï¼Œæ¥è‡ªåˆä¸­æ—¶ä»£çƒŸé›¾ç¼­ç»•çš„ç½‘å§ã€‚é‚£æ—¶ç©ã€Šä¼å¥‡ã€‹ï¼Œæœ€è®©æˆ‘ç€è¿·çš„ä¸æ˜¯æ‰“æ€ªçˆ†è£…å¤‡ï¼Œè€Œæ˜¯è§’è‰²é¢æ¿é‡Œé‚£æ¡é•¿é•¿çš„<strong>ç»éªŒå€¼</strong>ã€‚çœ‹ç€æ•°å­—ä¸æ–­è·³åŠ¨ã€ç´¯ç§¯ï¼Œæœ€ç»ˆâ€œå®â€ä¸€å£°å‡çº§ï¼Œé‚£ç§ç®€å•çš„æ•°å€¼é©±åŠ¨æ•´ä¸ªä¸–ç•Œè¿è½¬çš„æ„Ÿè§‰ï¼Œå®åœ¨å¤ªå¥‡å¦™äº†ã€‚</p>\n<p>å½“æ—¶è‡ªå­¦ç¼–ç¨‹ï¼Œä» G-BASIC é‡Œåªæœ‰ 16 ä½çš„ <code>INTEGER</code>ï¼Œåˆ°ç¬¬ä¸€æ¬¡å‘ç° QBASIC <code>LONG</code> èƒ½å­˜ä¸‹â€œ20äº¿â€æ—¶çš„å…´å¥‹ï¼Œå†åˆ°å¦‚ä»Šæˆä¸ºä¸€å .NET ç¨‹åºå‘˜ï¼Œæ‰‹æ¡ç†è®ºä¸Šâ€œæ— é™å¤§â€çš„ <code>System.Numerics.BigInteger</code>ã€‚æˆ‘å¯¹å¤§æ•°çš„è¿·æ‹ä»æœªæ”¹å˜ï¼Œåªæ˜¯ç–‘æƒ‘éšä¹‹è€Œæ¥ï¼š</p>\n<blockquote>\n<p><strong>ä½œä¸º .NET å¼€å‘è€…ï¼Œæˆ‘æ‰‹é‡Œçš„ <code>BigInteger</code> åˆ°åº•å¤Ÿä¸å¤Ÿå¿«ï¼Ÿç‰¹åˆ«æ˜¯å’Œéš”å£ Java çš„ <code>BigInteger</code> ç›¸æ¯”ï¼Œç©¶ç«Ÿè°æ›´èƒœä¸€ç­¹ï¼Ÿ</strong></p>\n</blockquote>\n<p>å°¤å…¶æ˜¯æ¶‰åŠé«˜ç²¾åº¦è®¡ç®—ã€å¯†ç å­¦ç­‰å…³é”®é¢†åŸŸæ—¶ï¼Œè¿™ä¸ä»…æ˜¯å¥½å¥‡ï¼Œæ›´æ˜¯å…³ä¹æ€§èƒ½çš„ä¸¥è‚ƒæ‹·é—®ã€‚ä»Šå¤©ï¼Œæˆ‘å°±é€šè¿‡ä¸€æ¬¡è¯¦å°½çš„å¯¹æ¯”æµ‹è¯•ï¼ˆå« .NET 10ã€Java 21ä»¥åŠJava 8ï¼‰ï¼Œæ¥ä¸ºå¤§å®¶æ­æ™“ç­”æ¡ˆã€‚ç»“æœå¯èƒ½å‡ºä¹æ„æ–™ï¼Œè¯·åŠ¡å¿…çœ‹åˆ°æœ€åï¼Œæ–‡æœ«è¿˜æœ‰ä¸€ä¸ªé«˜æ€§èƒ½çš„â€œå½©è›‹â€ã€‚</p>\n<hr />\n<h2 id=\"å®éªŒç›®æ ‡ä¸èŒƒå›´\">å®éªŒç›®æ ‡ä¸èŒƒå›´</h2>\n<p>æˆ‘ä»¬å¯¹æ¯”è¿™ä¸‰å¥—å®ç°ï¼š</p>\n<ul>\n<li><strong>.NET</strong>ï¼š<code>System.Numerics.BigInteger</code>ï¼ˆåŸºäº .NET 10ï¼‰</li>\n<li><strong>Java</strong>ï¼š<code>java.math.BigInteger</code>\n<ul>\n<li><strong>Java 21ï¼ˆæœ€æ–°LTSï¼‰</strong>ï¼šä»£è¡¨æœªæ¥è¶‹åŠ¿</li>\n<li><strong>Java 8ï¼ˆå›½å†…å­˜é‡æœ€å¤§ï¼‰</strong>ï¼šä»£è¡¨åºå¤§çš„ç°çŠ¶</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"æµ‹è¯•æ“ä½œ3ç±»è¦†ç›–å¸¸è§å¤§æ•°çƒ­ç‚¹\">æµ‹è¯•æ“ä½œï¼ˆ3ç±»ï¼Œè¦†ç›–å¸¸è§å¤§æ•°çƒ­ç‚¹ï¼‰</h3>\n<ol>\n<li><strong>ADD_MOD</strong>ï¼š<code>(a + b) mod m</code>ï¼ˆåŠ æ³• + å–æ¨¡ï¼‰</li>\n<li><strong>MUL_MOD</strong>ï¼š<code>(a * b) mod m</code>ï¼ˆä¹˜æ³• + å–æ¨¡ï¼‰</li>\n<li><strong>MODPOW</strong>ï¼š<code>a^e mod m</code>ï¼ˆæ¨¡å¹‚ï¼Œå¯†ç å­¦ç­‰åœºæ™¯çš„æ€§èƒ½çƒ­ç‚¹ï¼‰</li>\n</ol>\n<h3 id=\"ä½å®½3æ¡£\">ä½å®½ï¼ˆ3æ¡£ï¼‰</h3>\n<ul>\n<li>256 / 1024 / 4096 bits</li>\n</ul>\n<h3 id=\"è®¡æ—¶å£å¾„å°½é‡æŠ‘åˆ¶å™ªå£°\">è®¡æ—¶å£å¾„ï¼ˆå°½é‡æŠ‘åˆ¶å™ªå£°ï¼‰</h3>\n<ul>\n<li><strong>çƒ­èº«</strong>ï¼šé¢„çƒ­ 5 æ¬¡ï¼Œè®© JITï¼ˆå³æ—¶ç¼–è¯‘å™¨ï¼‰å……åˆ†å‘æŒ¥ã€‚</li>\n<li><strong>æµ‹é‡</strong>ï¼šæ­£å¼è·‘ 11 æ¬¡ï¼Œå–ä¸­ä½æ•°ï¼Œé¿å…å•æ¬¡æŠ–åŠ¨å¹²æ‰°ã€‚</li>\n<li><strong>æŒ‡æ ‡</strong>ï¼š<code>nsPerOp</code>ï¼ˆæ¯æ¬¡æ“ä½œè€—æ—¶å¤šå°‘çº³ç§’ï¼‰ï¼Œè¿™ä¸ªå€¼<strong>è¶Šå°è¶Šå¥½</strong>ã€‚</li>\n<li><strong>é˜²ä½œå¼Š</strong>ï¼šç”¨ <code>XOR</code> èšåˆæ¯æ¬¡è®¡ç®—ç»“æœï¼Œé˜²æ­¢èªæ˜çš„ç¼–è¯‘å™¨æŠŠæ•´ä¸ªå¾ªç¯ä¼˜åŒ–æ‰ã€‚</li>\n</ul>\n<hr />\n<h2 id=\"æµ‹è¯•ç¯å¢ƒ\">æµ‹è¯•ç¯å¢ƒ</h2>\n<blockquote>\n<p>è¯´æ˜ï¼šä»¥ä¸‹æ˜¯åœ¨åŒä¸€ Linux å®¹å™¨å†…å®Œæˆã€‚å®¹å™¨æœ‰èµ„æºé™åˆ¶ï¼Œå› æ­¤â€œçœ‹åˆ°çš„ CPU æ ¸æ•°/å†…å­˜â€ä¸å®¿ä¸»æœºä¸å®Œå…¨ä¸€è‡´ã€‚</p>\n</blockquote>\n<ul>\n<li><strong>OS</strong>ï¼šUbuntu 24.04.3 LTS</li>\n<li><strong>CPUï¼ˆå®¿ä¸»æœºå‹å·ï¼‰</strong>ï¼šAMD EPYC 7763 64-Core Processor<br />\n<strong>å®¹å™¨å¯ç”¨æ ¸å¿ƒæ•°</strong>ï¼š2 æ ¸ï¼ˆå—å®¹å™¨é™åˆ¶ï¼‰</li>\n<li><strong>å†…å­˜</strong>ï¼š2GBï¼ˆå®¹å™¨é™åˆ¶ï¼‰</li>\n<li><strong>.NET</strong>\n<ul>\n<li>SDKï¼š10.0.101</li>\n<li>Runtimeï¼š10.0.1</li>\n<li>ç¯å¢ƒå˜é‡ï¼š<code>DOTNET_GCServer=1</code></li>\n</ul>\n</li>\n<li><strong>Java</strong>\n<ul>\n<li>Java 21ï¼šOpenJDK 21.0.9ï¼ˆLTSï¼‰</li>\n<li>Java 8ï¼šTemurin(OpenJDK) 1.8.0_472-b08ï¼ˆå¹¿æ³›ä½¿ç”¨çš„ 8u ç³»åˆ—ï¼‰</li>\n<li>JVM å‚æ•°ï¼ˆä¸¤ç‰ˆæœ¬ä¸€è‡´ï¼‰ï¼š\n<ul>\n<li><code>-Xms1g -Xmx1g</code>ï¼ˆæŠŠ Java å †å›ºå®šä¸º 1GBï¼Œé¿å…å †åŠ¨æ€æ‰©å¼ å¹²æ‰°ï¼‰</li>\n<li><code>-XX:+UseG1GC</code></li>\n<li><code>-XX:+AlwaysPreTouch</code>ï¼ˆå°½é‡å‡å°‘è¿è¡Œä¸­é¡µåˆ†é…æ‰°åŠ¨ï¼‰</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><strong>ä¸€è‡´æ€§çº¦æŸ</strong>\n<ul>\n<li>Java 8/Java 21 ä½¿ç”¨<strong>åŒä¸€ä»½æºç </strong>ï¼ˆä»…ä½¿ç”¨ Java 8 è¯­æ³•ï¼‰ï¼Œå¹¶ä¸” <strong>ç”¨ Java 8 çš„ <code>javac</code> ç¼–è¯‘</strong>ï¼ˆclassfile=52.0ï¼‰ååˆ†åˆ«åœ¨ Java 8 / Java 21 ä¸Šè¿è¡Œï¼Œä»è€Œå°½é‡æŠŠå·®å¼‚å½’å› åˆ°è¿è¡Œæ—¶/JIT/åº“å®ç°ï¼Œè€Œä¸æ˜¯ç¼–è¯‘å™¨ç”Ÿæˆå·®å¼‚ã€‚</li>\n</ul>\n</li>\n</ul>\n<hr />\n<h2 id=\"èµ›å‰æ’æ›²net-biginteger-çœŸçš„ä¸å…¬å¹³å—\">èµ›å‰æ’æ›²ï¼š.NET BigInteger çœŸçš„â€œä¸å…¬å¹³â€å—ï¼Ÿ</h2>\n<p>æœ‰äººå¯èƒ½æƒ³é—®ï¼š</p>\n<blockquote>\n<p>â€œ.NET BigInteger æ¯æ¬¡è¿ç®—éƒ½ä¼šåˆ›å»ºæ–°çš„å¯¹è±¡ï¼ˆä¸å¯å˜ï¼‰ï¼Œä¸å…¬å¹³ã€‚â€</p>\n</blockquote>\n<p>è¿™å¥è¯åœ¨â€œå¤§æ•°åœºæ™¯â€é‡ŒåŸºæœ¬æˆç«‹ï¼Œä½†<strong>Java BigInteger åŒæ ·æ˜¯ä¸å¯å˜ç±»å‹</strong>ï¼š<code>add/multiply/mod/xor/modPow</code> éƒ½ä¼šè¿”å›æ–°å€¼ï¼Œä¸šåŠ¡ä»£ç å±‚é¢ä½ å¹¶æ²¡æœ‰å…¬å¼€çš„ in-place API å¯ä»¥å¤ç”¨å†…éƒ¨ç¼“å†²ã€‚</p>\n<p>å› æ­¤ï¼Œåœ¨æœ¬æ–‡çš„â€œä¸»å¯¹æ¯”â€ï¼ˆ.NET vs Javaï¼‰é‡Œï¼ŒåŒæ–¹éƒ½åœ¨ä¸å¯å˜èŒƒå¼ä¸‹è¿è¡Œï¼Œè¿™ç‚¹æ˜¯å…¬å¹³çš„ã€‚</p>\n<hr />\n<h2 id=\"å®éªŒä¸€net-biginteger-vs-java-21-biginteger\">å®éªŒä¸€ï¼š.NET BigInteger vs Java 21 BigInteger</h2>\n<h3 id=\"31-å®Œæ•´æºä»£ç \">3.1 å®Œæ•´æºä»£ç </h3>\n<h4 id=\"java-æºç bigintbenchjava\">Java æºç ï¼š<code>BigIntBench.java</code></h4>\n<blockquote>\n<p>å…¼å®¹ Java 8 è¯­æ³•ï¼›åŒä¸€ä»½ä»£ç åœ¨ Java 21 ä¸‹è¿è¡Œã€‚</p>\n</blockquote>\n<pre><code class=\"language-java\">import java.math.BigInteger;\nimport java.util.*;\n\npublic class BigIntBench {\n    // SplitMix64 RNG (deterministic, fast)\n    static final class SplitMix64 {\n        private long x;\n        SplitMix64(long seed) { this.x = seed; }\n        long nextLong() {\n            long z = (x += 0x9E3779B97F4A7C15L);\n            z = (z ^ (z &gt;&gt;&gt; 30)) * 0xBF58476D1CE4E5B9L;\n            z = (z ^ (z &gt;&gt;&gt; 27)) * 0x94D049BB133111EBL;\n            return z ^ (z &gt;&gt;&gt; 31);\n        }\n        void nextBytes(byte[] dst) {\n            int i = 0;\n            while (i &lt; dst.length) {\n                long v = nextLong();\n                for (int k = 0; k &lt; 8 &amp;&amp; i &lt; dst.length; k++) {\n                    dst[i++] = (byte)(v &gt;&gt;&gt; (56 - 8*k)); // big-endian stream\n                }\n            }\n        }\n    }\n\n    static BigInteger[] genBigInts(int bitSize, int count, long seed) {\n        SplitMix64 rng = new SplitMix64(seed);\n        int byteLen = (bitSize + 7) / 8;\n        BigInteger[] arr = new BigInteger[count];\n        byte[] buf = new byte[byteLen];\n        int topBit = (bitSize - 1) % 8;\n        int keepBits = topBit + 1;\n        int firstMask = (keepBits == 8) ? 0xFF : ((1 &lt;&lt; keepBits) - 1);\n        byte topMask = (byte)(1 &lt;&lt; topBit);\n        for (int i = 0; i &lt; count; i++) {\n            rng.nextBytes(buf);\n            // Ensure exact bit length:\n            // - mask away unused top bits when bitSize is not byte-aligned\n            // - set the top bit so the number has the requested bit length\n            buf[0] &amp;= (byte)firstMask;\n            buf[0] |= topMask;\n            arr[i] = new BigInteger(1, buf);\n        }\n        return arr;\n    }\n\n    static BigInteger genModulus(int bitSize, long seed) {\n        SplitMix64 rng = new SplitMix64(seed);\n        int byteLen = (bitSize + 7) / 8;\n        byte[] buf = new byte[byteLen];\n        rng.nextBytes(buf);\n        int topBit = (bitSize - 1) % 8;\n        int keepBits = topBit + 1;\n        int firstMask = (keepBits == 8) ? 0xFF : ((1 &lt;&lt; keepBits) - 1);\n        buf[0] &amp;= (byte)firstMask;\n        buf[0] |= (byte)(1 &lt;&lt; topBit);\n        buf[buf.length - 1] |= 1; // odd\n        return new BigInteger(1, buf);\n    }\n\n    enum Op { ADD_MOD, MUL_MOD, MODPOW }\n\n    static final class Result {\n        final String lang;\n        final int bits;\n        final Op op;\n        final long ops;\n        final double nsPerOp;\n        final long checksum;\n        Result(String lang, int bits, Op op, long ops, double nsPerOp, long checksum) {\n            this.lang = lang; this.bits = bits; this.op = op; this.ops = ops; this.nsPerOp = nsPerOp; this.checksum = checksum;\n        }\n        String toJson() {\n            return String.format(Locale.ROOT,\n                    \"{\\\"lang\\\":\\\"%s\\\",\\\"bits\\\":%d,\\\"op\\\":\\\"%s\\\",\\\"ops\\\":%d,\\\"nsPerOp\\\":%.3f,\\\"checksum\\\":%d}\",\n                    lang, bits, op.name(), ops, nsPerOp, checksum);\n        }\n    }\n\n    static long runOnce(Op op, BigInteger[] a, BigInteger[] b, BigInteger[] e, BigInteger mod, int outer) {\n        BigInteger acc = BigInteger.ZERO;\n        int n = a.length;\n        switch (op) {\n            case ADD_MOD:\n                for (int o = 0; o &lt; outer; o++) {\n                    for (int i = 0; i &lt; n; i++) {\n                        BigInteger r = a[i].add(b[i]).mod(mod);\n                        acc = acc.xor(r);\n                    }\n                }\n                break;\n\n            case MUL_MOD:\n                for (int o = 0; o &lt; outer; o++) {\n                    for (int i = 0; i &lt; n; i++) {\n                        BigInteger r = a[i].multiply(b[i]).mod(mod);\n                        acc = acc.xor(r);\n                    }\n                }\n                break;\n\n            case MODPOW:\n                // here we use a.length as n; e can be same length\n                for (int o = 0; o &lt; outer; o++) {\n                    for (int i = 0; i &lt; n; i++) {\n                        BigInteger r = a[i].modPow(e[i], mod);\n                        acc = acc.xor(r);\n                    }\n                }\n                break;\n\n            default:\n                throw new IllegalArgumentException(\"Unknown op: \" + op);\n        }\n        return acc.longValue();\n    }\n\n    static Result bench(String lang, int bits, Op op, BigInteger[] a, BigInteger[] b, BigInteger[] e, BigInteger mod, long targetOps, int warmups, int measures) {\n        int n = a.length;\n        int outer = (int)Math.max(1, targetOps / n);\n        long actualOps = (long)n * outer;\n\n        // warmup\n        long ck = 0;\n        for (int i = 0; i &lt; warmups; i++) {\n            ck ^= runOnce(op, a, b, e, mod, outer);\n        }\n\n        long[] times = new long[measures];\n        for (int i = 0; i &lt; measures; i++) {\n            long t0 = System.nanoTime();\n            long c = runOnce(op, a, b, e, mod, outer);\n            long t1 = System.nanoTime();\n            ck ^= c;\n            times[i] = (t1 - t0);\n        }\n        Arrays.sort(times);\n        long median = times[times.length / 2];\n        double nsPerOp = (double)median / (double)actualOps;\n        return new Result(lang, bits, op, actualOps, nsPerOp, ck);\n    }\n\n    static void printHuman(List&lt;Result&gt; results) {\n        System.out.println(\"Java BigInteger benchmark\");\n        System.out.println(\"java.version=\" + System.getProperty(\"java.version\"));\n        System.out.println(\"java.vm.name=\" + System.getProperty(\"java.vm.name\"));\n        System.out.println();\n        System.out.printf(Locale.ROOT, \"%-6s %-9s %-12s %-12s\\n\", \"Bits\", \"Op\", \"ns/op(med)\", \"ops/run\");\n        for (Result r : results) {\n            System.out.printf(Locale.ROOT, \"%-6d %-9s %-12.3f %-12d\\n\", r.bits, r.op.name(), r.nsPerOp, r.ops);\n        }\n        System.out.println();\n        System.out.println(\"checksum=\" + results.stream().mapToLong(x -&gt; x.checksum).reduce(0L, (x,y)-&gt;x^y));\n    }\n\n    public static void main(String[] args) {\n        boolean json = false;\n        for (String a : args) if (a.equals(\"--json\")) json = true;\n\n        int warmups = 5;\n        int measures = 11;\n\n        int[] bitSizes = new int[]{256, 1024, 4096};\n        List&lt;Result&gt; results = new ArrayList&lt;&gt;();\n\n        for (int bits : bitSizes) {\n            BigInteger mod = genModulus(bits, 0xA1B2C3D4E5F60708L ^ bits);\n\n            // add/mul datasets\n            int nAddMul = 1024;\n            BigInteger[] a = genBigInts(bits, nAddMul, 0x1111222233334444L ^ bits);\n            BigInteger[] b = genBigInts(bits, nAddMul, 0x9999AAAABBBBCCCCL ^ bits);\n\n            // modpow datasets (smaller)\n            int nPow = 256;\n            BigInteger[] ap = genBigInts(bits, nPow, 0x13579BDF2468ACE0L ^ bits);\n            BigInteger[] ep = genBigInts(Math.min(bits, 512), nPow, 0x0FEDCBA987654321L ^ bits);\n\n            long addOps;\n            long mulOps;\n            long powOps;\n            if (bits == 256) {\n                addOps = 2_000_000L;\n                mulOps = 500_000L;\n                powOps = 8_000L;\n            } else if (bits == 1024) {\n                addOps = 1_000_000L;\n                mulOps = 120_000L;\n                powOps = 1_500L;\n            } else {\n                addOps = 200_000L;\n                mulOps = 20_000L;\n                powOps = 250L;\n            }\n\n            results.add(bench(\"java\", bits, Op.ADD_MOD, a, b, null, mod, addOps, warmups, measures));\n            results.add(bench(\"java\", bits, Op.MUL_MOD, a, b, null, mod, mulOps, warmups, measures));\n            results.add(bench(\"java\", bits, Op.MODPOW, ap, null, ep, mod, powOps, warmups, measures));\n        }\n\n        if (json) {\n            for (Result r : results) System.out.println(r.toJson());\n        } else {\n            printHuman(results);\n        }\n    }\n}\n</code></pre>\n<h4 id=\"net-æºç programcsbiginteger-éƒ¨åˆ†\">.NET æºç ï¼š<code>Program.cs</code>ï¼ˆBigInteger éƒ¨åˆ†ï¼‰</h4>\n<blockquote>\n<p>è¿™æ˜¯â€œä¸»å¯¹æ¯”â€ç”¨çš„ .NET åŸºå‡†ç¨‹åºã€‚</p>\n</blockquote>\n<pre><code class=\"language-csharp\">using System;\nusing System.Collections.Generic;\nusing System.Diagnostics;\nusing System.Globalization;\nusing System.Linq;\nusing System.Numerics;\n\nsealed class SplitMix64\n{\n    private ulong _x;\n    public SplitMix64(ulong seed) =&gt; _x = seed;\n\n    public ulong NextUInt64()\n    {\n        ulong z = (_x += 0x9E3779B97F4A7C15UL);\n        z = (z ^ (z &gt;&gt; 30)) * 0xBF58476D1CE4E5B9UL;\n        z = (z ^ (z &gt;&gt; 27)) * 0x94D049BB133111EBUL;\n        return z ^ (z &gt;&gt; 31);\n    }\n\n    public void NextBytes(byte[] dst)\n    {\n        int i = 0;\n        while (i &lt; dst.Length)\n        {\n            ulong v = NextUInt64();\n            for (int k = 0; k &lt; 8 &amp;&amp; i &lt; dst.Length; k++)\n            {\n                dst[i++] = (byte)(v &gt;&gt; (56 - 8 * k)); // big-endian stream\n            }\n        }\n    }\n}\n\nenum Op { ADD_MOD, MUL_MOD, MODPOW }\n\nrecord Result(string Lang, int Bits, Op Op, long Ops, double NsPerOp, long Checksum)\n{\n    public string ToJson() =&gt; string.Create(CultureInfo.InvariantCulture,\n        $\"{{\\\"lang\\\":\\\"{Lang}\\\",\\\"bits\\\":{Bits},\\\"op\\\":\\\"{Op}\\\",\\\"ops\\\":{Ops},\\\"nsPerOp\\\":{NsPerOp:F3},\\\"checksum\\\":{Checksum}}}\");\n}\n\nstatic class BigIntBench\n{\n    static BigInteger[] GenBigInts(int bitSize, int count, ulong seed)\n    {\n        var rng = new SplitMix64(seed);\n        int byteLen = (bitSize + 7) / 8;\n        var arr = new BigInteger[count];\n        var buf = new byte[byteLen];\n        int topBit = (bitSize - 1) % 8;\n        byte topMask = (byte)(1 &lt;&lt; topBit);\n\n        for (int i = 0; i &lt; count; i++)\n        {\n            rng.NextBytes(buf);\n            buf[0] |= topMask;\n            // unsigned + big-endian prevents negative\n            arr[i] = new BigInteger(buf, isUnsigned: true, isBigEndian: true);\n        }\n        return arr;\n    }\n\n    static BigInteger GenModulus(int bitSize, ulong seed)\n    {\n        var rng = new SplitMix64(seed);\n        int byteLen = (bitSize + 7) / 8;\n        var buf = new byte[byteLen];\n        rng.NextBytes(buf);\n        int topBit = (bitSize - 1) % 8;\n        buf[0] |= (byte)(1 &lt;&lt; topBit);\n        buf[^1] |= 1; // odd\n        return new BigInteger(buf, isUnsigned: true, isBigEndian: true);\n    }\n\n    static long RunOnce(Op op, BigInteger[] a, BigInteger[] b, BigInteger[] e, BigInteger mod, int outer)\n    {\n        BigInteger acc = BigInteger.Zero;\n        int n = a.Length;\n\n        switch (op)\n        {\n            case Op.ADD_MOD:\n                for (int o = 0; o &lt; outer; o++)\n                    for (int i = 0; i &lt; n; i++)\n                    {\n                        var r = (a[i] + b[i]) % mod;\n                        acc ^= r;\n                    }\n                break;\n\n            case Op.MUL_MOD:\n                for (int o = 0; o &lt; outer; o++)\n                    for (int i = 0; i &lt; n; i++)\n                    {\n                        var r = (a[i] * b[i]) % mod;\n                        acc ^= r;\n                    }\n                break;\n\n            case Op.MODPOW:\n                for (int o = 0; o &lt; outer; o++)\n                    for (int i = 0; i &lt; n; i++)\n                    {\n                        var r = BigInteger.ModPow(a[i], e[i], mod);\n                        acc ^= r;\n                    }\n                break;\n        }\n\n        return (long)(acc &amp; long.MaxValue); // stable checksum\n    }\n\n    static Result Bench(string lang, int bits, Op op, BigInteger[] a, BigInteger[] b, BigInteger[] e, BigInteger mod, long targetOps, int warmups, int measures)\n    {\n        int n = a.Length;\n        int outer = (int)Math.Max(1, targetOps / n);\n        long actualOps = (long)n * outer;\n\n        long ck = 0;\n        for (int i = 0; i &lt; warmups; i++)\n            ck ^= RunOnce(op, a, b, e, mod, outer);\n\n        long[] timesNs = new long[measures];\n        for (int i = 0; i &lt; measures; i++)\n        {\n            var sw = Stopwatch.StartNew();\n            long c = RunOnce(op, a, b, e, mod, outer);\n            sw.Stop();\n            ck ^= c;\n            // Stopwatch ticks to ns\n            timesNs[i] = (long)(sw.ElapsedTicks * (1_000_000_000.0 / Stopwatch.Frequency));\n        }\n\n        Array.Sort(timesNs);\n        long median = timesNs[timesNs.Length / 2];\n        double nsPerOp = (double)median / actualOps;\n        return new Result(lang, bits, op, actualOps, nsPerOp, ck);\n    }\n\n    static void PrintHuman(List&lt;Result&gt; results)\n    {\n        Console.WriteLine(\"C# BigInteger benchmark\");\n        Console.WriteLine($\"dotnet.version={Environment.Version}\");\n        Console.WriteLine($\"os={System.Runtime.InteropServices.RuntimeInformation.OSDescription}\");\n        Console.WriteLine($\"arch={System.Runtime.InteropServices.RuntimeInformation.OSArchitecture}\");\n        Console.WriteLine();\n        Console.WriteLine($\"{ \"Bits\",-6} {\"Op\",-9} {\"ns/op(med)\",-12} {\"ops/run\",-12}\");\n        foreach (var r in results)\n            Console.WriteLine(string.Create(CultureInfo.InvariantCulture, $\"{r.Bits,-6} {r.Op,-9} {r.NsPerOp,-12:F3} {r.Ops,-12}\"));\n        Console.WriteLine();\n        long checksum = 0;\n        foreach (var r in results) checksum ^= r.Checksum;\n        Console.WriteLine($\"checksum={checksum}\");\n    }\n\n    public static int Main(string[] args)\n    {\n        bool json = args.Any(a =&gt; a == \"--json\");\n\n        int warmups = 5;\n        int measures = 11;\n        int[] bitSizes = [256, 1024, 4096];\n\n        var results = new List&lt;Result&gt;();\n\n        foreach (int bits in bitSizes)\n        {\n            var mod = GenModulus(bits, 0xA1B2C3D4E5F60708UL ^ (uint)bits);\n\n            int nAddMul = 1024;\n            var a = GenBigInts(bits, nAddMul, 0x1111222233334444UL ^ (uint)bits);\n            var b = GenBigInts(bits, nAddMul, 0x9999AAAABBBBCCCCUL ^ (uint)bits);\n\n            int nPow = 256;\n            var ap = GenBigInts(bits, nPow, 0x13579BDF2468ACE0UL ^ (uint)bits);\n            var ep = GenBigInts(Math.Min(bits, 512), nPow, 0x0FEDCBA987654321UL ^ (uint)bits);\n\n            long addOps = bits switch { 256 =&gt; 2_000_000L, 1024 =&gt; 1_000_000L, _ =&gt; 200_000L };\n            long mulOps = bits switch { 256 =&gt; 500_000L, 1024 =&gt; 120_000L, _ =&gt; 20_000L };\n            long powOps = bits switch { 256 =&gt; 8_000L, 1024 =&gt; 1_500L, _ =&gt; 250L };\n\n            results.Add(Bench(\"csharp\", bits, Op.ADD_MOD, a, b, null!, mod, addOps, warmups, measures));\n            results.Add(Bench(\"csharp\", bits, Op.MUL_MOD, a, b, null!, mod, mulOps, warmups, measures));\n            results.Add(Bench(\"csharp\", bits, Op.MODPOW, ap, null!, ep, mod, powOps, warmups, measures));\n        }\n\n        if (json)\n        {\n            foreach (var r in results) Console.WriteLine(r.ToJson());\n        }\n        else\n        {\n            PrintHuman(results);\n        }\n\n        return 0;\n    }\n}\n</code></pre>\n<h3 id=\"32-è¿è¡Œæ–¹å¼å¯å¤ç°å‘½ä»¤\">3.2 è¿è¡Œæ–¹å¼ï¼ˆå¯å¤ç°å‘½ä»¤ï¼‰</h3>\n<pre><code class=\"language-bash\"># Java 21\ncd /app/bigintbench/java\njavac BigIntBench.java\njava -Xms1g -Xmx1g -XX:+UseG1GC -XX:+AlwaysPreTouch BigIntBench --json\n\n# .NET 10\ncd /app/bigintbench/csharp\ndotnet build -c Release\nDOTNET_GCServer=1 dotnet run -c Release -- --json\n</code></pre>\n<h3 id=\"33-å®éªŒä¸€åŸå§‹è¾“å‡ºjsonl\">3.3 å®éªŒä¸€åŸå§‹è¾“å‡ºï¼ˆJSONLï¼‰</h3>\n<h4 id=\"java-21results_java21jsonl\">Java 21ï¼š<code>results_java21.jsonl</code></h4>\n<pre><code class=\"language-jsonl\">{\"lang\":\"java\",\"bits\":256,\"op\":\"ADD_MOD\",\"ops\":1999872,\"nsPerOp\":139.589,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":256,\"op\":\"MUL_MOD\",\"ops\":499712,\"nsPerOp\":387.031,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":256,\"op\":\"MODPOW\",\"ops\":7936,\"nsPerOp\":17764.884,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":1024,\"op\":\"ADD_MOD\",\"ops\":999424,\"nsPerOp\":284.672,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":1024,\"op\":\"MUL_MOD\",\"ops\":119808,\"nsPerOp\":3094.540,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":1024,\"op\":\"MODPOW\",\"ops\":1280,\"nsPerOp\":264577.852,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":4096,\"op\":\"ADD_MOD\",\"ops\":199680,\"nsPerOp\":900.735,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":4096,\"op\":\"MUL_MOD\",\"ops\":19456,\"nsPerOp\":32062.554,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":4096,\"op\":\"MODPOW\",\"ops\":256,\"nsPerOp\":3422756.113,\"checksum\":0}\n</code></pre>\n<h4 id=\"net-10results_csharpjsonl\">.NET 10ï¼š<code>results_csharp.jsonl</code></h4>\n<pre><code class=\"language-jsonl\">{\"lang\":\"csharp\",\"bits\":256,\"op\":\"ADD_MOD\",\"ops\":1999872,\"nsPerOp\":146.261,\"checksum\":0}\n{\"lang\":\"csharp\",\"bits\":256,\"op\":\"MUL_MOD\",\"ops\":499712,\"nsPerOp\":560.246,\"checksum\":0}\n{\"lang\":\"csharp\",\"bits\":256,\"op\":\"MODPOW\",\"ops\":7936,\"nsPerOp\":169713.608,\"checksum\":0}\n{\"lang\":\"csharp\",\"bits\":1024,\"op\":\"ADD_MOD\",\"ops\":999424,\"nsPerOp\":297.335,\"checksum\":0}\n{\"lang\":\"csharp\",\"bits\":1024,\"op\":\"MUL_MOD\",\"ops\":119808,\"nsPerOp\":4792.760,\"checksum\":0}\n{\"lang\":\"csharp\",\"bits\":1024,\"op\":\"MODPOW\",\"ops\":1280,\"nsPerOp\":1938407.720,\"checksum\":0}\n{\"lang\":\"csharp\",\"bits\":4096,\"op\":\"ADD_MOD\",\"ops\":199680,\"nsPerOp\":1280.760,\"checksum\":0}\n{\"lang\":\"csharp\",\"bits\":4096,\"op\":\"MUL_MOD\",\"ops\":19456,\"nsPerOp\":36894.568,\"checksum\":0}\n{\"lang\":\"csharp\",\"bits\":4096,\"op\":\"MODPOW\",\"ops\":256,\"nsPerOp\":20617970.004,\"checksum\":0}\n</code></pre>\n<hr />\n<h2 id=\"å®éªŒäºŒåŠ å…¥-java-8-çœ‹ç°çŠ¶ä¸»æµå¤„äºä»€ä¹ˆä½ç½®\">å®éªŒäºŒï¼šåŠ å…¥ Java 8 â€”â€”çœ‹â€œç°çŠ¶ä¸»æµâ€å¤„äºä»€ä¹ˆä½ç½®</h2>\n<p>è¿™ä¸€ç»„çš„å…³é”®ç‚¹æ˜¯ï¼š<strong>åŒä¸€ä»½ Java æºç ç”¨ Java 8 ç¼–è¯‘</strong>ï¼Œåˆ†åˆ«åœ¨ Java 8 ä¸ Java 21 ä¸Šè¿è¡Œï¼Œå°½é‡é¿å…â€œç¼–è¯‘å™¨äº§ç‰©å·®å¼‚â€ã€‚</p>\n<h3 id=\"41-è¿è¡Œæ–¹å¼\">4.1 è¿è¡Œæ–¹å¼</h3>\n<pre><code class=\"language-bash\"># ç¼–è¯‘ï¼ˆJava 8ï¼‰\n/path/to/jdk8/bin/javac BigIntBench.java\n\n# è¿è¡Œï¼ˆJava 8ï¼‰\n/path/to/jdk8/bin/java -Xms1g -Xmx1g -XX:+UseG1GC -XX:+AlwaysPreTouch BigIntBench --json\n\n# è¿è¡Œï¼ˆJava 21ï¼‰\njava -Xms1g -Xmx1g -XX:+UseG1GC -XX:+AlwaysPreTouch BigIntBench --json\n</code></pre>\n<h3 id=\"42-å®éªŒäºŒåŸå§‹è¾“å‡ºjsonl\">4.2 å®éªŒäºŒåŸå§‹è¾“å‡ºï¼ˆJSONLï¼‰</h3>\n<h4 id=\"java-8results_java8jsonl\">Java 8ï¼š<code>results_java8.jsonl</code></h4>\n<pre><code class=\"language-jsonl\">{\"lang\":\"java\",\"bits\":256,\"op\":\"ADD_MOD\",\"ops\":1999872,\"nsPerOp\":207.335,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":256,\"op\":\"MUL_MOD\",\"ops\":499712,\"nsPerOp\":468.248,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":256,\"op\":\"MODPOW\",\"ops\":7936,\"nsPerOp\":17697.113,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":1024,\"op\":\"ADD_MOD\",\"ops\":999424,\"nsPerOp\":390.906,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":1024,\"op\":\"MUL_MOD\",\"ops\":119808,\"nsPerOp\":3089.474,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":1024,\"op\":\"MODPOW\",\"ops\":1280,\"nsPerOp\":277395.652,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":4096,\"op\":\"ADD_MOD\",\"ops\":199680,\"nsPerOp\":990.708,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":4096,\"op\":\"MUL_MOD\",\"ops\":19456,\"nsPerOp\":30692.214,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":4096,\"op\":\"MODPOW\",\"ops\":256,\"nsPerOp\":3468269.539,\"checksum\":0}\n</code></pre>\n<hr />\n<h2 id=\"å¯è§†åŒ–ä¸æ€»ç»“\">å¯è§†åŒ–ä¸æ€»ç»“</h2>\n<p>ä»ä¸€ä¸ª .NET ç¨‹åºå‘˜çš„è§†è§’æ¥çœ‹ï¼Œè¿™æ¬¡çš„æµ‹è¯•ç»“æœå¯ä»¥è¯´æ—¢åœ¨æƒ…ç†ä¹‹ä¸­ï¼Œåˆæœ‰äº›å‡ºä¹æ„æ–™ã€‚</p>\n<ol>\n<li><strong>ADD_MOD (åŠ æ³•+å–æ¨¡)</strong>: åœ¨è¿™ä¸ªé¡¹ç›®ä¸Šï¼Œ.NET å’Œ Java 21 å‡ ä¹æ‰“äº†ä¸ªå¹³æ‰‹ï¼Œå·®è·å¾®ä¹å…¶å¾®ã€‚å¯ä»¥è¯´ï¼Œåœ¨åŸºç¡€çš„åŠ æ³•è¿ç®—ä¸Šï¼Œ.NET è¡¨ç°å¾—ç›¸å½“ä¸é”™ã€‚<br />\n<img alt=\"bar_csharp_baseline_add_mod\" src=\"https://img2024.cnblogs.com/blog/233608/202601/233608-20260114225530983-1114904260.png\" /></li>\n<li><strong>MUL_MOD (ä¹˜æ³•+å–æ¨¡)</strong>: ä»è¿™é‡Œå¼€å§‹ï¼Œå·®è·å‡ºç°äº†ã€‚.NET æ˜æ˜¾æ…¢äº Javaï¼Œæ€§èƒ½é¸¿æ²Ÿå¼€å§‹å˜å¾—â€œè‚‰çœ¼å¯è§â€ã€‚<br />\n<img alt=\"bar_csharp_baseline_mul_mod\" src=\"https://img2024.cnblogs.com/blog/233608/202601/233608-20260114225554833-1748112213.png\" /></li>\n<li><strong>MODPOW (æ¨¡å¹‚)</strong>: è¿™æ˜¯å·®è·æœ€å¤§çš„åœ°æ–¹ã€‚.NET åœ¨è¿™é¡¹æµ‹è¯•ä¸­è¢« Java 21 æ‹‰å¼€äº† <strong>6åˆ°9å€</strong> çš„å·®è·ã€‚å¯¹äºä»äº‹å¯†ç å­¦æˆ–éœ€è¦å¤§é‡å¤§æ•°è¿ç®—çš„å¼€å‘è€…æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸åˆºçœ¼çš„ä¿¡å·ã€‚<br />\n<img alt=\"bar_csharp_baseline_modpow\" src=\"https://img2024.cnblogs.com/blog/233608/202601/233608-20260114225547260-463566788.png\" /></li>\n<li><strong>Java 8 vs Java 21</strong>: æ¯«æ— ç–‘é—®ï¼ŒJava 21 åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ¯”è€è¿ˆçš„ Java 8 è¦å¿«ã€‚ä¸è¿‡æœ‰è¶£çš„æ˜¯ï¼Œåœ¨ <code>MUL_MOD</code> çš„ 1024 å’Œ 4096 ä½æµ‹è¯•ä¸­ï¼ŒJava 8 å±…ç„¶å‡ºç°äº†â€œåè¶…â€çš„ç°è±¡ã€‚è¿™å¯èƒ½æ˜¯ç”±äº JIT ç­–ç•¥ã€ç®—æ³•é€‰æ‹©çš„é˜ˆå€¼å·®å¼‚ï¼Œæˆ–æ˜¯å•çº¯çš„æµ‹é‡è¯¯å·®ã€‚è™½ç„¶è¿™ä¸å½±å“â€œJava 21æ›´å¿«â€çš„æ€»ä½“ç»“è®ºï¼Œä½†ä¹Ÿæé†’æˆ‘ä»¬æ€§èƒ½æµ‹è¯•çš„å¤æ‚æ€§ã€‚</li>\n</ol>\n<p>æ€»è€Œè¨€ä¹‹ï¼Œè¿™æ¬¡å¯¹å†³è®©æˆ‘ä»¬æ¸…æ¥šåœ°çœ‹åˆ°ï¼Œåœ¨å¤æ‚çš„å¤§æ•°è¿ç®—ä¸Šï¼Œ.NET çš„ <code>BigInteger</code> ç¡®å®è¿˜æœ‰å¾ˆé•¿çš„è·¯è¦èµ°ã€‚</p>\n<hr />\n<h2 id=\"one-more-thingå½“å¤–æ´ç™»åœº\">One More Thingï¼šå½“â€œå¤–æ´â€ç™»åœº</h2>\n<p>åœ¨å¯»æ‰¾ .NET å¤§æ•°æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬è‡ªç„¶èƒ½æƒ³åˆ°äº†ä¸šç•Œæ ‡æ† GMP â€”â€”å®ƒæ˜¯ GNU Multi-Precision Arithmetic Libraryï¼Œå¾ˆå¤šæ•°å­¦è½¯ä»¶/å¯†ç å­¦å®ç°éƒ½ä¼šç”¨å®ƒåšé«˜æ€§èƒ½å¤§æ•´æ•°è¿ç®—ã€‚</p>\n<p>æˆ‘ç¢°å·§ä¹Ÿä¸ºå®ƒåšäº†ä¸€ä¸ª .NET å°è£…ï¼š<a href=\"https://github.com/sdcb/Sdcb.Arithmetic\" rel=\"noopener nofollow\" target=\"_blank\">Sdcb.Arithmetic</a>ã€‚</p>\n<p>ä½†å¿…é¡»æå‰å£°æ˜ï¼š<strong>è®© GMP ä½œä¸ºâ€œå¤–æ´â€åŠ å…¥è¿™åœºå¯¹æ¯”ï¼Œæ˜¯â€œä¸å…¬å¹³â€çš„</strong>ã€‚åŸå› å¾ˆç®€å•ï¼š</p>\n<ul>\n<li><strong>è¯­è¨€ä¼˜åŠ¿</strong>ï¼šGMP æ˜¯åŸç”Ÿ C/æ±‡ç¼–ï¼Œè€Œ .NET å’Œ Java æ˜¯åœ¨è™šæ‹Ÿæœºä¸Šè¿è¡Œçš„æ‰˜ç®¡è¯­è¨€ã€‚</li>\n<li><strong>å†…å­˜ç­–ç•¥</strong>ï¼šGMP é¼“åŠ±ä½¿ç”¨ <strong>in-place API</strong>ï¼Œå¯ä»¥ç›´æ¥åœ¨åŸåœ°ä¿®æ”¹æ•°å€¼ï¼Œå¤§å¤§å‡å°‘äº†å†…å­˜åˆ†é…å’Œ GC å‹åŠ›ã€‚è€Œ .NET å’Œ Java çš„ <code>BigInteger</code> åˆ™æ˜¯ä¸å¯å˜å¯¹è±¡ã€‚</li>\n</ul>\n<p>æ‰€ä»¥ï¼Œè¿™éƒ¨åˆ†çš„ç»“æœæ›´åƒæ˜¯ä¸€ä¸ªâ€œå½©è›‹â€ï¼Œå±•ç¤ºçš„æ˜¯ï¼š<strong>å¦‚æœä½ æ„¿æ„å¼•å…¥åŸç”Ÿä¾èµ–ï¼Œå¹¶æ”¹å˜ç¼–ç é£æ ¼ï¼Œ.NET çš„å¤§æ•°æ€§èƒ½å¯ä»¥è¾¾åˆ°æ€æ ·çš„é«˜åº¦ã€‚</strong></p>\n<h3 id=\"71-å®¢ä¸²å®éªŒå®Œæ•´æºä»£ç net-biginteger--gmpinteger-åŒåœº\">7.1 å®¢ä¸²å®éªŒå®Œæ•´æºä»£ç ï¼ˆ.NET BigInteger + GmpInteger åŒåœºï¼‰</h3>\n<blockquote>\n<p>ä¸‹é¢ä»£ç ä¼šåŒæ—¶è¾“å‡ºä¸¤å¥—ç»“æœï¼š<code>csharp_bigint</code> ä¸ <code>csharp_gmp_inplace</code>ï¼ˆä»æ˜¯ JSONLï¼‰ã€‚</p>\n</blockquote>\n<p><strong><code>Program.cs</code>ï¼ˆå®¢ä¸²ç‰ˆï¼Œå®Œæ•´ï¼‰</strong></p>\n<pre><code class=\"language-csharp\">using System;\nusing System.Collections.Generic;\nusing System.Diagnostics;\nusing System.Globalization;\nusing System.Linq;\nusing System.Numerics;\nusing Sdcb.Arithmetic.Gmp;\n\nsealed class SplitMix64\n{\n    private ulong _x;\n    public SplitMix64(ulong seed) =&gt; _x = seed;\n\n    public ulong NextUInt64()\n    {\n        ulong z = (_x += 0x9E3779B97F4A7C15UL);\n        z = (z ^ (z &gt;&gt; 30)) * 0xBF58476D1CE4E5B9UL;\n        z = (z ^ (z &gt;&gt; 27)) * 0x94D049BB133111EBUL;\n        return z ^ (z &gt;&gt; 31);\n    }\n\n    public void NextBytes(byte[] dst)\n    {\n        int i = 0;\n        while (i &lt; dst.Length)\n        {\n            ulong v = NextUInt64();\n            for (int k = 0; k &lt; 8 &amp;&amp; i &lt; dst.Length; k++)\n                dst[i++] = (byte)(v &gt;&gt; (56 - 8 * k));\n        }\n    }\n}\n\nenum Op { ADD_MOD, MUL_MOD, MODPOW }\n\nrecord Result(string Impl, int Bits, Op Op, long Ops, double NsPerOp, long Checksum)\n{\n    public string ToJson() =&gt; string.Create(CultureInfo.InvariantCulture,\n        $\"{{\\\"lang\\\":\\\"{Impl}\\\",\\\"bits\\\":{Bits},\\\"op\\\":\\\"{Op}\\\",\\\"ops\\\":{Ops},\\\"nsPerOp\\\":{NsPerOp:F3},\\\"checksum\\\":{Checksum}}}\");\n}\n\nstatic class BenchUtil\n{\n    public static void MaskToBitSize(byte[] buf, int bitSize)\n    {\n        int topBit = (bitSize - 1) % 8;\n        int keepBits = topBit + 1;\n        int firstMask = keepBits == 8 ? 0xFF : ((1 &lt;&lt; keepBits) - 1);\n        buf[0] &amp;= (byte)firstMask;\n        buf[0] |= (byte)(1 &lt;&lt; topBit);\n    }\n\n    public static string ToHex(byte[] bytes) =&gt; Convert.ToHexString(bytes);\n}\n\nstatic class BigIntegerBench\n{\n    public static BigInteger[] Gen(int bitSize, int count, ulong seed)\n    {\n        var rng = new SplitMix64(seed);\n        int byteLen = (bitSize + 7) / 8;\n        var arr = new BigInteger[count];\n        var buf = new byte[byteLen];\n\n        for (int i = 0; i &lt; count; i++)\n        {\n            rng.NextBytes(buf);\n            BenchUtil.MaskToBitSize(buf, bitSize);\n            arr[i] = new BigInteger(buf, isUnsigned: true, isBigEndian: true);\n        }\n        return arr;\n    }\n\n    public static BigInteger GenModulus(int bitSize, ulong seed)\n    {\n        var rng = new SplitMix64(seed);\n        int byteLen = (bitSize + 7) / 8;\n        var buf = new byte[byteLen];\n        rng.NextBytes(buf);\n        BenchUtil.MaskToBitSize(buf, bitSize);\n        buf[^1] |= 1;\n        return new BigInteger(buf, isUnsigned: true, isBigEndian: true);\n    }\n\n    public static long RunOnce(Op op, BigInteger[] a, BigInteger[] b, BigInteger[] e, BigInteger mod, int outer)\n    {\n        BigInteger acc = BigInteger.Zero;\n        int n = a.Length;\n\n        switch (op)\n        {\n            case Op.ADD_MOD:\n                for (int o = 0; o &lt; outer; o++)\n                    for (int i = 0; i &lt; n; i++)\n                        acc ^= (a[i] + b[i]) % mod;\n                break;\n\n            case Op.MUL_MOD:\n                for (int o = 0; o &lt; outer; o++)\n                    for (int i = 0; i &lt; n; i++)\n                        acc ^= (a[i] * b[i]) % mod;\n                break;\n\n            case Op.MODPOW:\n                for (int o = 0; o &lt; outer; o++)\n                    for (int i = 0; i &lt; n; i++)\n                        acc ^= BigInteger.ModPow(a[i], e[i], mod);\n                break;\n        }\n\n        return (long)(acc &amp; long.MaxValue);\n    }\n}\n\nstatic class GmpIntegerBench\n{\n    public static GmpInteger[] Gen(int bitSize, int count, ulong seed)\n    {\n        var rng = new SplitMix64(seed);\n        int byteLen = (bitSize + 7) / 8;\n        var arr = new GmpInteger[count];\n        var buf = new byte[byteLen];\n\n        for (int i = 0; i &lt; count; i++)\n        {\n            rng.NextBytes(buf);\n            BenchUtil.MaskToBitSize(buf, bitSize);\n            arr[i] = GmpInteger.Parse(BenchUtil.ToHex(buf), 16);\n        }\n        return arr;\n    }\n\n    public static GmpInteger GenModulus(int bitSize, ulong seed)\n    {\n        var rng = new SplitMix64(seed);\n        int byteLen = (bitSize + 7) / 8;\n        var buf = new byte[byteLen];\n        rng.NextBytes(buf);\n        BenchUtil.MaskToBitSize(buf, bitSize);\n        buf[^1] |= 1;\n        return GmpInteger.Parse(BenchUtil.ToHex(buf), 16);\n    }\n\n    public static long RunOnce(Op op, GmpInteger[] a, GmpInteger[] b, GmpInteger[] e, GmpInteger mod, int outer)\n    {\n        using var acc = GmpInteger.From(0);\n        using var tmp = GmpInteger.From(0);\n\n        int n = a.Length;\n        switch (op)\n        {\n            case Op.ADD_MOD:\n                for (int o = 0; o &lt; outer; o++)\n                    for (int i = 0; i &lt; n; i++)\n                    {\n                        GmpInteger.AddInplace(tmp, a[i], b[i]);\n                        GmpInteger.ModInplace(tmp, tmp, mod);\n                        GmpInteger.BitwiseXorInplace(acc, acc, tmp);\n                    }\n                break;\n\n            case Op.MUL_MOD:\n                for (int o = 0; o &lt; outer; o++)\n                    for (int i = 0; i &lt; n; i++)\n                    {\n                        GmpInteger.MultiplyInplace(tmp, a[i], b[i]);\n                        GmpInteger.ModInplace(tmp, tmp, mod);\n                        GmpInteger.BitwiseXorInplace(acc, acc, tmp);\n                    }\n                break;\n\n            case Op.MODPOW:\n                for (int o = 0; o &lt; outer; o++)\n                    for (int i = 0; i &lt; n; i++)\n                    {\n                        GmpInteger.PowerModInplace(tmp, a[i], e[i], mod);\n                        GmpInteger.BitwiseXorInplace(acc, acc, tmp);\n                    }\n                break;\n        }\n\n        return acc.GetHashCode();\n    }\n\n    public static void DisposeAll(GmpInteger[] xs)\n    {\n        foreach (var x in xs) x.Dispose();\n    }\n}\n\nstatic class Runner\n{\n    static Result BenchBigInteger(int bits, Op op, BigInteger[] a, BigInteger[] b, BigInteger[] e, BigInteger mod, long targetOps, int warmups, int measures)\n    {\n        int n = a.Length;\n        int outer = (int)Math.Max(1, targetOps / n);\n        long actualOps = (long)n * outer;\n\n        long ck = 0;\n        for (int i = 0; i &lt; warmups; i++) ck ^= BigIntegerBench.RunOnce(op, a, b, e, mod, outer);\n\n        long[] timesNs = new long[measures];\n        for (int i = 0; i &lt; measures; i++)\n        {\n            var sw = Stopwatch.StartNew();\n            long c = BigIntegerBench.RunOnce(op, a, b, e, mod, outer);\n            sw.Stop();\n            ck ^= c;\n            timesNs[i] = (long)(sw.ElapsedTicks * (1_000_000_000.0 / Stopwatch.Frequency));\n        }\n        Array.Sort(timesNs);\n        long median = timesNs[timesNs.Length / 2];\n        return new Result(\"csharp_bigint\", bits, op, actualOps, (double)median / actualOps, ck);\n    }\n\n    static Result BenchGmpInteger(int bits, Op op, GmpInteger[] a, GmpInteger[] b, GmpInteger[] e, GmpInteger mod, long targetOps, int warmups, int measures)\n    {\n        int n = a.Length;\n        int outer = (int)Math.Max(1, targetOps / n);\n        long actualOps = (long)n * outer;\n\n        long ck = 0;\n        for (int i = 0; i &lt; warmups; i++) ck ^= GmpIntegerBench.RunOnce(op, a, b, e, mod, outer);\n\n        long[] timesNs = new long[measures];\n        for (int i = 0; i &lt; measures; i++)\n        {\n            var sw = Stopwatch.StartNew();\n            long c = GmpIntegerBench.RunOnce(op, a, b, e, mod, outer);\n            sw.Stop();\n            ck ^= c;\n            timesNs[i] = (long)(sw.ElapsedTicks * (1_000_000_000.0 / Stopwatch.Frequency));\n        }\n        Array.Sort(timesNs);\n        long median = timesNs[timesNs.Length / 2];\n        return new Result(\"csharp_gmp_inplace\", bits, op, actualOps, (double)median / actualOps, ck);\n    }\n\n    public static int Run(string[] args)\n    {\n        bool json = args.Any(a =&gt; a == \"--json\");\n\n        int warmups = 5;\n        int measures = 11;\n        int[] bitSizes = [256, 1024, 4096];\n\n        var results = new List&lt;Result&gt;();\n\n        foreach (int bits in bitSizes)\n        {\n            long addOps = bits switch { 256 =&gt; 2_000_000L, 1024 =&gt; 1_000_000L, _ =&gt; 200_000L };\n            long mulOps = bits switch { 256 =&gt; 500_000L, 1024 =&gt; 120_000L, _ =&gt; 20_000L };\n            long powOps = bits switch { 256 =&gt; 8_000L, 1024 =&gt; 1_500L, _ =&gt; 250L };\n\n            // BigInteger data\n            var modB = BigIntegerBench.GenModulus(bits, 0xA1B2C3D4E5F60708UL ^ (uint)bits);\n            var aB = BigIntegerBench.Gen(bits, 1024, 0x1111222233334444UL ^ (uint)bits);\n            var bB = BigIntegerBench.Gen(bits, 1024, 0x9999AAAABBBBCCCCUL ^ (uint)bits);\n            var apB = BigIntegerBench.Gen(bits, 256, 0x13579BDF2468ACE0UL ^ (uint)bits);\n            var epB = BigIntegerBench.Gen(Math.Min(bits, 512), 256, 0x0FEDCBA987654321UL ^ (uint)bits);\n\n            // GmpInteger data (same seeds/bit sizes)\n            using var modG = GmpIntegerBench.GenModulus(bits, 0xA1B2C3D4E5F60708UL ^ (uint)bits);\n            var aG = GmpIntegerBench.Gen(bits, 1024, 0x1111222233334444UL ^ (uint)bits);\n            var bG = GmpIntegerBench.Gen(bits, 1024, 0x9999AAAABBBBCCCCUL ^ (uint)bits);\n            var apG = GmpIntegerBench.Gen(bits, 256, 0x13579BDF2468ACE0UL ^ (uint)bits);\n            var epG = GmpIntegerBench.Gen(Math.Min(bits, 512), 256, 0x0FEDCBA987654321UL ^ (uint)bits);\n\n            try\n            {\n                results.Add(BenchBigInteger(bits, Op.ADD_MOD, aB, bB, null!, modB, addOps, warmups, measures));\n                results.Add(BenchBigInteger(bits, Op.MUL_MOD, aB, bB, null!, modB, mulOps, warmups, measures));\n                results.Add(BenchBigInteger(bits, Op.MODPOW, apB, null!, epB, modB, powOps, warmups, measures));\n\n                results.Add(BenchGmpInteger(bits, Op.ADD_MOD, aG, bG, null!, modG, addOps, warmups, measures));\n                results.Add(BenchGmpInteger(bits, Op.MUL_MOD, aG, bG, null!, modG, mulOps, warmups, measures));\n                results.Add(BenchGmpInteger(bits, Op.MODPOW, apG, null!, epG, modG, powOps, warmups, measures));\n            }\n            finally\n            {\n                GmpIntegerBench.DisposeAll(aG);\n                GmpIntegerBench.DisposeAll(bG);\n                GmpIntegerBench.DisposeAll(apG);\n                GmpIntegerBench.DisposeAll(epG);\n            }\n        }\n\n        if (json)\n        {\n            foreach (var r in results) Console.WriteLine(r.ToJson());\n        }\n\n        return 0;\n    }\n}\n\npublic static class Program\n{\n    public static int Main(string[] args) =&gt; Runner.Run(args);\n}\n</code></pre>\n<p><strong><code>gmpbench.csproj</code>ï¼ˆå®¢ä¸²ç‰ˆé¡¹ç›®æ–‡ä»¶ï¼‰</strong></p>\n<pre><code class=\"language-xml\">&lt;Project Sdk=\"Microsoft.NET.Sdk\"&gt;\n  &lt;PropertyGroup&gt;\n    &lt;OutputType&gt;Exe&lt;/OutputType&gt;\n    &lt;TargetFramework&gt;net10.0&lt;/TargetFramework&gt;\n    &lt;Nullable&gt;enable&lt;/Nullable&gt;\n    &lt;ImplicitUsings&gt;enable&lt;/ImplicitUsings&gt;\n  &lt;/PropertyGroup&gt;\n\n  &lt;ItemGroup&gt;\n    &lt;PackageReference Include=\"Sdcb.Arithmetic.Gmp\" Version=\"*\" /&gt;\n    &lt;PackageReference Include=\"Sdcb.Arithmetic.Gmp.runtime.linux-x64\" Version=\"*\" /&gt;\n  &lt;/ItemGroup&gt;\n&lt;/Project&gt;\n</code></pre>\n<h3 id=\"72-å®¢ä¸²å®éªŒåŸå§‹è¾“å‡ºjsonl\">7.2 å®¢ä¸²å®éªŒåŸå§‹è¾“å‡ºï¼ˆJSONLï¼‰</h3>\n<pre><code class=\"language-jsonl\">{\"lang\":\"csharp_bigint\",\"bits\":256,\"op\":\"ADD_MOD\",\"ops\":1999872,\"nsPerOp\":146.261,\"checksum\":0}\n{\"lang\":\"csharp_bigint\",\"bits\":256,\"op\":\"MUL_MOD\",\"ops\":499712,\"nsPerOp\":560.246,\"checksum\":0}\n{\"lang\":\"csharp_bigint\",\"bits\":256,\"op\":\"MODPOW\",\"ops\":7936,\"nsPerOp\":169713.608,\"checksum\":0}\n{\"lang\":\"csharp_gmp_inplace\",\"bits\":256,\"op\":\"ADD_MOD\",\"ops\":1999872,\"nsPerOp\":76.644,\"checksum\":0}\n{\"lang\":\"csharp_gmp_inplace\",\"bits\":256,\"op\":\"MUL_MOD\",\"ops\":499712,\"nsPerOp\":114.690,\"checksum\":0}\n{\"lang\":\"csharp_gmp_inplace\",\"bits\":256,\"op\":\"MODPOW\",\"ops\":7936,\"nsPerOp\":13931.914,\"checksum\":0}\n{\"lang\":\"csharp_bigint\",\"bits\":1024,\"op\":\"ADD_MOD\",\"ops\":999424,\"nsPerOp\":297.335,\"checksum\":0}\n{\"lang\":\"csharp_bigint\",\"bits\":1024,\"op\":\"MUL_MOD\",\"ops\":119808,\"nsPerOp\":4792.760,\"checksum\":0}\n{\"lang\":\"csharp_bigint\",\"bits\":1024,\"op\":\"MODPOW\",\"ops\":1280,\"nsPerOp\":1938407.720,\"checksum\":0}\n{\"lang\":\"csharp_gmp_inplace\",\"bits\":1024,\"op\":\"ADD_MOD\",\"ops\":999424,\"nsPerOp\":97.260,\"checksum\":0}\n{\"lang\":\"csharp_gmp_inplace\",\"bits\":1024,\"op\":\"MUL_MOD\",\"ops\":119808,\"nsPerOp\":562.235,\"checksum\":0}\n{\"lang\":\"csharp_gmp_inplace\",\"bits\":1024,\"op\":\"MODPOW\",\"ops\":1280,\"nsPerOp\":218715.147,\"checksum\":0}\n{\"lang\":\"csharp_bigint\",\"bits\":4096,\"op\":\"ADD_MOD\",\"ops\":199680,\"nsPerOp\":1280.760,\"checksum\":0}\n{\"lang\":\"csharp_bigint\",\"bits\":4096,\"op\":\"MUL_MOD\",\"ops\":19456,\"nsPerOp\":36894.568,\"checksum\":0}\n{\"lang\":\"csharp_bigint\",\"bits\":4096,\"op\":\"MODPOW\",\"ops\":256,\"nsPerOp\":20617970.004,\"checksum\":0}\n{\"lang\":\"csharp_gmp_inplace\",\"bits\":4096,\"op\":\"ADD_MOD\",\"ops\":199680,\"nsPerOp\":179.720,\"checksum\":0}\n{\"lang\":\"csharp_gmp_inplace\",\"bits\":4096,\"op\":\"MUL_MOD\",\"ops\":19456,\"nsPerOp\":5431.441,\"checksum\":0}\n{\"lang\":\"csharp_gmp_inplace\",\"bits\":4096,\"op\":\"MODPOW\",\"ops\":256,\"nsPerOp\":2662198.492,\"checksum\":0}\n</code></pre>\n<h3 id=\"73-å®¢ä¸²å¯è§†åŒ–ä»¥gmpä¸ºåŸºå‡†\">7.3 å®¢ä¸²å¯è§†åŒ–ï¼ˆä»¥GMPä¸ºåŸºå‡†ï¼‰</h3>\n<p><img alt=\"bar_gmp_baseline_add_mod\" src=\"https://img2024.cnblogs.com/blog/233608/202601/233608-20260114225617406-1423853952.png\" /><br />\n<img alt=\"bar_gmp_baseline_mul_mod\" src=\"https://img2024.cnblogs.com/blog/233608/202601/233608-20260114225622152-863625745.png\" /><br />\n<img alt=\"bar_gmp_baseline_modpow\" src=\"https://img2024.cnblogs.com/blog/233608/202601/233608-20260114225625327-2119127781.png\" /></p>\n<hr />\n<h2 id=\"æ€»ç»“ä¸å±•æœ›\">æ€»ç»“ä¸å±•æœ›</h2>\n<p>ä»è¿™æ¬¡â€œç¡¬ç¢°ç¡¬â€çš„å¯¹å†³ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ°ï¼šåœ¨åŸºç¡€åŠ æ³•ä¸Šï¼Œ.NET <code>BigInteger</code> ä¸ Java ä¸åˆ†ä¼¯ä»²ï¼›ä½†åœ¨ä¹˜æ³•ï¼Œå°¤å…¶æ˜¯<strong>æ¨¡å¹‚è¿ç®—</strong>ï¼ˆå¯¹å¯†ç å­¦ç­‰åœºæ™¯æå…¶é‡è¦ï¼‰ä¸Šï¼Œ.NET ç›®å‰ç¡®å®å­˜åœ¨æ˜æ˜¾çš„çŸ­æ¿ï¼Œå¤§å¹…è½åäº Javaã€‚</p>\n<p>æ‰¿è®¤ä¸è¶³æ˜¯æ”¹è¿›çš„å¼€å§‹ã€‚å¯¹äºç»å¤§å¤šæ•°ä¸šåŠ¡åœºæ™¯ï¼Œå†…ç½®çš„ <code>BigInteger</code> ä¾ç„¶å¤Ÿç”¨ä¸”æ–¹ä¾¿ã€‚ä½†å¦‚æœä½ çš„åº”ç”¨å¤„äºæ€§èƒ½æ•æ„ŸåŒºï¼ˆå¦‚åŠ å¯†ç®—æ³•ã€ç§‘å­¦è®¡ç®—ï¼‰ï¼Œé‚£ä¹ˆä¹Ÿè®¸æ˜¯æ—¶å€™è€ƒè™‘ä¸€äº›â€œé‡æ­¦å™¨â€äº†ã€‚</p>\n<p>è¿™ä¹Ÿæ­£æ˜¯æˆ‘å¼€å‘å¹¶ç»´æŠ¤ <strong><a href=\"https://github.com/sdcb/Sdcb.Arithmetic\" rel=\"noopener nofollow\" target=\"_blank\">Sdcb.Arithmetic</a></strong> çš„åˆè¡·ã€‚å®ƒé€šè¿‡å°è£… GMP ç­‰é«˜æ€§èƒ½åŸç”Ÿåº“ï¼Œä¸º .NET å¸¦æ¥äº†<strong>åŸåœ°ä¿®æ”¹ï¼ˆin-placeï¼‰</strong>ä»¥åŠé«˜è¾¾æ•°å€çš„æ€§èƒ½æå‡ï¼ˆå¦‚æ–‡ä¸­å®éªŒæ‰€ç¤ºï¼‰ã€‚å¦‚æœä½ å¯¹æ€§èƒ½æœ‰æè‡´è¿½æ±‚ï¼Œæˆ–è€…æƒ³çœ‹çœ‹ .NET åœ¨å¤§æ•°è®¡ç®—ä¸Šçš„æé™ï¼Œæ¬¢è¿å» GitHub ç‚¹ä¸ª Star â­ï¼Œè¯•ä¸€è¯•è¿™ä¸ªåº“ã€‚</p>\n<p>æ„Ÿè°¢é˜…è¯»ï¼å¦‚æœä½ è§‰å¾—è¿™ä¸¤ä¸ªè¯­è¨€çš„å¯¹æ¯”åˆ†ææœ‰æ„æ€ï¼Œæˆ–è€…å¯¹ .NET é«˜æ€§èƒ½ç¼–ç¨‹æ„Ÿå…´è¶£ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€äº¤æµï¼Œä¹Ÿæ¬¢è¿åŠ å…¥æˆ‘çš„ <strong>.NETéªšæ“ä½œ QQç¾¤ï¼š495782587</strong>ï¼Œæˆ‘ä»¬ä¸€èµ·æ¢ç´¢æ›´å¤šæŠ€æœ¯ç¡¬æ ¸ç©æ³•ã€‚</p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-15 08:50</span>&nbsp;\n<a href=\"https://www.cnblogs.com/sdcb\">.NETéªšæ“ä½œ</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">626</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">8</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "Mysqlä¸‹è½½éƒ¨ç½²æ–¹æ³•å¤‡ä»½ï¼ˆWindows/Linuxï¼‰",
      "link": "https://www.cnblogs.com/tokepson/p/19358930",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/tokepson/p/19358930\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-15 00:58\">\n    <span>Mysqlä¸‹è½½éƒ¨ç½²æ–¹æ³•å¤‡ä»½ï¼ˆWindows/Linuxï¼‰</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                    <div id=\"cnblogs_post_description\" style=\"display: none;\">\n        <img alt=\"Mysqlä¸‹è½½éƒ¨ç½²æ–¹æ³•å¤‡ä»½ï¼ˆWindows/Linuxï¼‰\" class=\"desc_img\" src=\"https://img2024.cnblogs.com/blog/3027557/202601/3027557-20260115005726963-1064528741.png\" />\n        ### Mysqlä¸‹è½½éƒ¨ç½²æ–¹æ³•å¤‡ä»½ï¼ˆWindows/Linuxï¼‰\n\n&gt;å‰è¨€ï¼š\nå‘ƒå‘ƒå‘ƒï¼Œï¼Œï¼Œä¸å¤šè¯´äº†ï¼Œç›´æ¥çœ‹æ­£æ–‡å§\n\n### Windows\n    </div>\n<div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h3 id=\"mysqlä¸‹è½½éƒ¨ç½²æ–¹æ³•å¤‡ä»½windowslinux\">Mysqlä¸‹è½½éƒ¨ç½²æ–¹æ³•å¤‡ä»½ï¼ˆWindows/Linuxï¼‰</h3>\n<blockquote>\n<p>å‰è¨€ï¼š<br />\nå‘ƒå‘ƒå‘ƒï¼Œï¼Œï¼Œä¸å¤šè¯´äº†ï¼Œç›´æ¥çœ‹æ­£æ–‡å§</p>\n</blockquote>\n<p><img alt=\"20160513024330_39701\" src=\"https://img2024.cnblogs.com/blog/3027557/202601/3027557-20260115005731844-1896204594.jpg\" /></p>\n<h3 id=\"windows\">Windows</h3>\n<p><em>ç›¸å…³æ•™ç¨‹ï¼š</em> <a href=\"https://blog.csdn.net/R_Feynman_/article/details/147523049\" rel=\"noopener nofollow\" target=\"_blank\">ç¬¬ä¸€é›†ï¼šMySQLä¸‹è½½è¶…ç»†æ•™ç¨‹ï¼ˆè¯¦ç»†åˆ°æ¯ä¸€å°æ­¥ï¼‰</a></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3027557/202512/3027557-20251216182550108-1208756501.png\" width=\"800\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3027557/202512/3027557-20251216182516662-1356207044.png\" width=\"800\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3027557/202512/3027557-20251216182251339-1241286922.png\" width=\"800\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3027557/202512/3027557-20251216182213741-1061580300.png\" width=\"800\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3027557/202512/3027557-20251216182006041-375477595.png\" width=\"800\" /></p>\n<p>ï¼ˆæ²¡æå®Œï¼Œæ‡’å¾—æäº†ï¼Œç­‰ä¸‹æ¬¡å†ç¢°åˆ°å†è¡¥ä¸Šå§ï¼Œç´¯äº†ï¼Œåˆ°æ—¶å€™å†è¡¥å……äº›MySQLå¸¸ç”¨å‘½ä»¤ï¼Œä»¥åŠä¸€äº›å¯èƒ½ä¼šå‡ºç°çš„æ¼æ´â€”â€”â€”â€”ä¸€èˆ¬æ¥è®²æ­£å¸¸å®‰è£…å°±è¡Œï¼Œåªåœ¨å®¢æˆ·æœºä½¿ç”¨Customï¼ŒæœåŠ¡å™¨ä½¿ç”¨ç”¨Serverï¼Œéƒ½å®‰è£…å°±ç”¨Fullï¼Œåé¢å†å¡«å†™ç”¨æˆ·åå¯†ç å³å¯ï¼Œå…¶ä»–æ•™ç¨‹ä¹Ÿæœ‰åšè¯¦ç»†è§£é‡Šï¼‰</p>\n<hr />\n<h3 id=\"linuxubuntu\">Linuxï¼ˆUbuntuï¼‰</h3>\n<p><em>ç›¸å…³æ•™ç¨‹ï¼š</em> <a href=\"https://www.cnblogs.com/zhuchunlin/p/18562893\" target=\"_blank\">MySQL - ä¸‹è½½ä¸å®‰è£…é…ç½®ï¼ˆLinuxï¼‰</a></p>\n<pre><code class=\"language-bash\">sudo apt-get update\n</code></pre>\n<pre><code class=\"language-bash\">sudo apt-get install -y mysql-server mysql-client\n</code></pre>\n<pre><code class=\"language-bash\">sudo vi /etc/mysql/mysql.conf.d/mysqld.cnf\n</code></pre>\n<p>æ‰¾åˆ°[mysqld]é€‰é¡¹ç»„ä¸­çš„bind-addressï¼Œç„¶åä½¿ç”¨i é”®è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œå¹¶è¾“å…¥#æ³¨é‡Šæ‰è¯¥è¡Œã€‚ä¿®æ”¹çš„æœ€ç»ˆç»“æœå¦‚ä¸‹å›¾æœ€åä¸€è¡Œæ‰€ç¤ºã€‚</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3027557/202512/3027557-20251216184740806-1135866084.png\" width=\"800\" /></p>\n<pre><code class=\"language-bash\">sudo systemctl status mysql #æŸ¥çœ‹mysqlæœåŠ¡çš„çŠ¶æ€\n</code></pre>\n<pre><code class=\"language-bash\">sudo systemctl start mysql #å¯åŠ¨MySQLæœåŠ¡\n</code></pre>\n<pre><code class=\"language-bash\">sudo systemctl stop mysql #åœæ­¢MySQLæœåŠ¡\n</code></pre>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3027557/202512/3027557-20251216184846284-1413312583.png\" width=\"600\" /></p>\n<pre><code class=\"language-bash\">sudo vim /etc/mysql/debian.cnf\n</code></pre>\n<pre><code># MySQLå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶\n# åªåŒ…å«å®¢æˆ·ç«¯ç›¸å…³çš„é…ç½®é€‰é¡¹\n\n[client]\n# é»˜è®¤è¿æ¥åˆ°æœ¬åœ°MySQL\nhost = localhost\nuser = root\nsocket = /var/run/mysqld/mysqld.sock\n\n[mysql]\n# è®¾ç½®å‘½ä»¤æç¤ºç¬¦\nprompt = (\\u@\\h) [\\d]&gt;\\_\n# å¯ç”¨è‡ªåŠ¨è¡¥å…¨\nauto-rehash = TRUE\n# æ˜¾ç¤ºåˆ—å\ncolumn-names = TRUE\n\n[mysqladmin]\n[mysqlcheck]\n[mysqldump]\n[mysqlimport]\n[mysqlshow]\n[mysqlslap]\n\n</code></pre>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3027557/202512/3027557-20251216185117506-12438712.png\" width=\"600\" /></p>\n<p>ä½¿ç”¨æ–‡ä»¶ä¸­çš„åˆå§‹ç”¨æˆ·åå’Œå¯†ç ç™»å½•mysql</p>\n<pre><code class=\"language-bash\">mysql -u debian-sys-maint -p pfdKSjeFFhJtdGkr\n</code></pre>\n<pre><code class=\"language-bash\">update mysql.user set authentication_string=password('123456') where user='root' and host='localhost';\n</code></pre>\n<p><strong>é‡åˆ°çš„é”™è¯¯é—®é¢˜</strong></p>\n<pre><code># ç¬¬1åˆ†é’Ÿï¼šæ£€æŸ¥æœåŠ¡çŠ¶æ€\nsudo systemctl status mysql\nsudo systemctl restart mysql\n\n# ç¬¬2åˆ†é’Ÿï¼šä¿®å¤æ–‡ä»¶æƒé™\nsudo chmod 644 /etc/mysql/debian.cnf\n\n# ç¬¬3åˆ†é’Ÿï¼šç™»å½•ç³»ç»Ÿè´¦æˆ·\nmysql --defaults-extra-file=/etc/mysql/debian.cnf\n\n# ç¬¬4åˆ†é’Ÿï¼šé‡ç½®rootå¯†ç ï¼ˆåœ¨MySQLä¸­æ‰§è¡Œï¼‰\nALTER USER 'root'@'localhost' IDENTIFIED BY '123456';\nFLUSH PRIVILEGES;\nexit;\n\n# ç¬¬5åˆ†é’Ÿï¼šæµ‹è¯•ç™»å½•\nmysql -u root -p123456\n</code></pre>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3027557/202512/3027557-20251216194106977-213894387.png\" /></p>\n<p><strong>æµ‹è¯•æ•ˆæœ</strong></p>\n<pre><code class=\"language-bash\">SELECT VERSION(), USER(), NOW();\nSELECT 1+2*3-4/5;\n</code></pre>\n<hr />\n<h3 id=\"linuxcentos\">Linuxï¼ˆCentOSï¼‰</h3>\n<p><em>ç›¸å…³æ•™ç¨‹ï¼š</em> <a href=\"https://cloud.tencent.com/developer/article/2372374\" rel=\"noopener nofollow\" target=\"_blank\">Linux MySQLä¸‹è½½å®‰è£…è¯¦ç»†æ•™ç¨‹ï¼ˆCentOSç‰ˆï¼‰</a></p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-15 00:58</span>&nbsp;\n<a href=\"https://www.cnblogs.com/tokepson\">TokE648</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">46</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">1</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "Flinkæºç é˜…è¯»ï¼šJobManagerçš„HAæœºåˆ¶",
      "link": "https://www.cnblogs.com/Jackeyzhe/p/19484622",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/Jackeyzhe/p/19484622\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-14 23:45\">\n    <span>Flinkæºç é˜…è¯»ï¼šJobManagerçš„HAæœºåˆ¶</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                    <div id=\"cnblogs_post_description\" style=\"display: none;\">\n        <img alt=\"Flinkæºç é˜…è¯»ï¼šJobManagerçš„HAæœºåˆ¶\" class=\"desc_img\" src=\"https://img2024.cnblogs.com/blog/1828322/202601/1828322-20260114234320282-1778052120.png\" />\n        JobManager åœ¨ Flink é›†ç¾¤ä¸­å‘æŒ¥ç€é‡è¦çš„ä½œç”¨ï¼ŒåŒ…æ‹¬ä»»åŠ¡è°ƒåº¦å’Œèµ„æºç®¡ç†ç­‰å·¥ä½œã€‚å¦‚æœ JobManager å®•æœºï¼Œé‚£ä¹ˆæ•´ä¸ªé›†ç¾¤çš„ä»»åŠ¡éƒ½å°†å¤±è´¥ã€‚ä¸ºäº†è§£å†³ JobManager çš„å•ç‚¹é—®é¢˜ï¼ŒFlink ä¹Ÿè®¾è®¡äº† HA æœºåˆ¶æ¥ä¿éšœæ•´ä¸ªé›†ç¾¤çš„ç¨³å®šæ€§ã€‚\n    </div>\n<div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<p>JobManager åœ¨ Flink é›†ç¾¤ä¸­å‘æŒ¥ç€é‡è¦çš„ä½œç”¨ï¼ŒåŒ…æ‹¬ä»»åŠ¡è°ƒåº¦å’Œèµ„æºç®¡ç†ç­‰å·¥ä½œã€‚å¦‚æœ JobManager å®•æœºï¼Œé‚£ä¹ˆæ•´ä¸ªé›†ç¾¤çš„ä»»åŠ¡éƒ½å°†å¤±è´¥ã€‚ä¸ºäº†è§£å†³ JobManager çš„å•ç‚¹é—®é¢˜ï¼ŒFlink ä¹Ÿè®¾è®¡äº† HA æœºåˆ¶æ¥ä¿éšœæ•´ä¸ªé›†ç¾¤çš„ç¨³å®šæ€§ã€‚</p>\n<h3 id=\"åŸºæœ¬æ¦‚å¿µ\">åŸºæœ¬æ¦‚å¿µ</h3>\n<p>åœ¨ JobManager å¯åŠ¨æ—¶ï¼Œè°ƒç”¨ <code>HighAvailabilityServicesUtils.createHighAvailabilityServices</code> æ¥åˆ›å»º HA æœåŠ¡ï¼ŒHA ä¾èµ–çš„æœåŠ¡éƒ½è¢«å°è£…åœ¨ HighAvailabilityServices ä¸­ã€‚å½“å‰ Flink å†…éƒ¨æ”¯æŒä¸¤ç§é«˜å¯ç”¨æ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯ ZooKeeper å’Œ KUBERNETESã€‚</p>\n<pre><code class=\"language-java\">case ZOOKEEPER:\n    return createZooKeeperHaServices(configuration, executor, fatalErrorHandler);\ncase KUBERNETES:\n    return createCustomHAServices(\n            \"org.apache.flink.kubernetes.highavailability.KubernetesHaServicesFactory\",\n            configuration,\n            executor);\n</code></pre>\n<p>HighAvailabilityServices ä¸­æä¾›çš„å…³é”®ç»„ä»¶åŒ…æ‹¬ï¼š</p>\n<ul>\n<li>\n<p>LeaderRetrievalServiceï¼šæœåŠ¡å‘ç°ï¼Œç”¨äºè·å–å½“å‰ leader çš„åœ°å€ã€‚ç›®å‰ç”¨åˆ°æœåŠ¡å‘ç°çš„ç»„ä»¶æœ‰ ResourceManagerã€Dispatcherã€JobManagerã€ClusterRestEndpointã€‚</p>\n</li>\n<li>\n<p>LeaderElectionï¼šé€‰ä¸¾æœåŠ¡ï¼Œä»å¤šä¸ªå€™é€‰è€…ä¸­é€‰å‡ºä¸€ä¸ªä½œä¸º leaderã€‚ç”¨åˆ°é€‰ä¸¾æœåŠ¡çš„åŒæ ·æ˜¯ ResourceManagerã€Dispatcherã€JobManagerã€ClusterRestEndpoint è¿™å››ä¸ªã€‚</p>\n</li>\n<li>\n<p>CheckpointRecoveryFactoryï¼šCheckpoint æ¢å¤ç»„ä»¶çš„å·¥å‚ç±»ï¼Œæä¾›äº†åˆ›å»º CompletedCheckpointStore å’Œ CheckpointIDCounter çš„æ–¹æ³•ã€‚CompletedCheckpointStore æ˜¯ç”¨äºå­˜å‚¨å·²å®Œæˆçš„ checkpoint çš„å…ƒä¿¡æ¯ï¼ŒCheckpointIDCounter æ˜¯ç”¨äºç”Ÿæˆ checkpoint IDã€‚</p>\n</li>\n<li>\n<p>ExecutionPlanStoreï¼šç”¨äºå­˜å‚¨æ‰§è¡Œè®¡åˆ’ã€‚</p>\n</li>\n<li>\n<p>JobResultStoreï¼šç”¨äºå­˜å‚¨ä½œä¸šç»“æœï¼Œè¿™é‡Œæœ‰ä¸¤ç§çŠ¶æ€ï¼Œä¸€ç§æ˜¯ dirtyï¼Œè¡¨ç¤ºä½œä¸šæ²¡æœ‰è¢«å®Œå…¨æ¸…ç†ï¼Œå¦ä¸€ç§æ˜¯ cleanï¼Œè¡¨ç¤ºä½œä¸šæ¸…ç†å·¥ä½œå·²ç»æ‰§è¡Œå®Œæˆäº†ã€‚</p>\n</li>\n<li>\n<p>BlobStoreï¼šå­˜å‚¨ä½œä¸šè¿è¡ŒæœŸé—´çš„ä¸€äº›äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p>\n</li>\n</ul>\n<h4 id=\"é€‰ä¸¾æœåŠ¡\">é€‰ä¸¾æœåŠ¡</h4>\n<p>Flink çš„é€‰ä¸¾æ˜¯ä¾é  LeaderElection å’Œ LeaderContender é…åˆå®Œæˆçš„ã€‚LeaderElection æ˜¯ LeaderElectionService çš„ä»£ç†æ¥å£ï¼Œæä¾›äº†æ³¨å†Œå€™é€‰è€…ã€ç¡®è®¤ leader å’Œ åˆ¤æ–­å€™é€‰è€…æ˜¯å¦æ˜¯ leader ä¸‰ä¸ªæ¥å£ã€‚LeaderContender åˆ™æ˜¯ç”¨æ¥è¡¨ç¤ºå€™é€‰è€…å¯¹è±¡ã€‚å½“ä¸€ä¸ª LeaderContender å½“é€‰ leader åï¼ŒLeaderElectionService ä¼šä¸ºå…¶ç”Ÿæˆä¸€ä¸ª leaderSessionIdï¼ŒLeaderContender ä¼šè°ƒç”¨ confirmLeadershipAsync å‘å¸ƒè‡ªå·±çš„åœ°å€ã€‚é€‰ä¸¾æœåŠ¡çš„å…·ä½“å®ç°åœ¨ LeaderElectionDriver æ¥å£ä¸­ã€‚</p>\n<h4 id=\"æœåŠ¡å‘ç°\">æœåŠ¡å‘ç°</h4>\n<p>æœåŠ¡å‘ç°çš„ä½œç”¨æ˜¯è·å–å„ç»„ä»¶çš„ leader åœ°å€ã€‚æœåŠ¡å‘ç°ä¾èµ– LeaderRetrievalService å’Œ LeaderRetrievalListenerã€‚LeaderRetrievalService å¯ä»¥å¯åŠ¨ä¸€ä¸ªç›‘å¬ï¼Œå½“æœ‰æ–°çš„ leader å½“é€‰æ—¶ï¼Œä¼šè°ƒç”¨ LeaderRetrievalListener çš„ notifyLeaderAddress æ–¹æ³•ã€‚</p>\n<h4 id=\"ä¿¡æ¯ä¿å­˜\">ä¿¡æ¯ä¿å­˜</h4>\n<p>å½“ leader å‘ç”Ÿåˆ‡æ¢æ—¶ï¼Œæ–°çš„ leader éœ€è¦è·å–åˆ°æ—§ leader å­˜å‚¨çš„ä¿¡æ¯ï¼Œè¿™å°±éœ€è¦æ—§ leader æŠŠè¿™äº›ä¿¡æ¯å­˜åœ¨ä¸€ä¸ªå…¬å…±çš„å­˜å‚¨ä¸Šã€‚å®ƒå¯ä»¥æ˜¯ ZooKeeper æˆ– Kubernetes çš„å­˜å‚¨ï¼Œä¹Ÿå¯ä»¥æ˜¯åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿçš„å­˜å‚¨ã€‚</p>\n<h3 id=\"åŸºäº-zookeeper-çš„-ha\">åŸºäº ZooKeeper çš„ HA</h3>\n<h4 id=\"é€‰ä¸¾æœåŠ¡-1\">é€‰ä¸¾æœåŠ¡</h4>\n<p>å‰é¢æˆ‘ä»¬æåˆ°äº†é€‰ä¸¾æœåŠ¡ä¸»è¦ä¾èµ– LeaderElection å’Œ LeaderContender é…åˆå®Œæˆã€‚æˆ‘ä»¬å°±ä»¥ JobManager ä¸ºä¾‹ï¼Œçœ‹ä¸€ä¸‹æœºé‡ ZooKeeper çš„é€‰ä¸¾æµç¨‹çš„å…·ä½“å®ç°ã€‚</p>\n<p><img alt=\"ZKLeaderElection\" class=\"lazyload\" /></p>\n<p>å›¾ä¸­ JobMasterServiceLeadershipRunner æ˜¯ LeaderContender çš„å®ç°ç±»ã€‚åœ¨å¯åŠ¨æœåŠ¡æ—¶ï¼Œä¼šå‘ LeaderElection æ³¨å†Œè‡ªå·±çš„ä¿¡æ¯ï¼Œå®é™…æ‰§è¡Œè€…æ˜¯ DefaultLeaderElectionServiceã€‚å®ƒå…ˆåˆ›å»ºäº† LeaderElectionDriverï¼Œç„¶åå°† LeaderContender ä¿å­˜åœ¨ leaderContenderRegistry ä¸­ã€‚é€‰ä¸¾çš„æ ¸å¿ƒé€»è¾‘å°è£…åœ¨ LeaderElectionDriver ä¸­ã€‚</p>\n<p>åœ¨åˆ›å»º LeaderElectionDriver æ—¶ï¼Œä¼šåˆ›å»º LeaderLatch å¯¹è±¡å’Œ TreeCache å¯¹è±¡ï¼Œ LeaderLatch å°è£…äº†ä¸ ZooKeeper å…³è”çš„å›è°ƒï¼Œä¼šæ¥æ”¶ä¸€ä¸ª LeaderElectionDriver ä½œä¸ºç›‘å¬ã€‚TreeCache ä¸»è¦ç”¨äºç›‘å¬ ZooKeeper ä¸­ leader èŠ‚ç‚¹çš„å˜æ›´ã€‚</p>\n<pre><code class=\"language-java\">public ZooKeeperLeaderElectionDriver(\n        CuratorFramework curatorFramework, LeaderElectionDriver.Listener leaderElectionListener)\n        throws Exception {\n    ...\n    this.leaderLatch = new LeaderLatch(curatorFramework, ZooKeeperUtils.getLeaderLatchPath());\n    this.treeCache =\n            ZooKeeperUtils.createTreeCache(\n                    curatorFramework,\n                    \"/\",\n                    new ZooKeeperLeaderElectionDriver.ConnectionInfoNodeSelector());\n\n    treeCache\n            .getListenable()\n            .addListener(\n                    (client, event) -&gt; {\n                        switch (event.getType()) {\n                            case NODE_ADDED:\n                            case NODE_UPDATED:\n                                Preconditions.checkNotNull(\n                                        event.getData(),\n                                        \"The ZooKeeper event data must not be null.\");\n                                handleChangedLeaderInformation(event.getData());\n                                break;\n                            case NODE_REMOVED:\n                                Preconditions.checkNotNull(\n                                        event.getData(),\n                                        \"The ZooKeeper event data must not be null.\");\n                                handleRemovedLeaderInformation(event.getData().getPath());\n                                break;\n                        }\n                    });\n\n    leaderLatch.addListener(this);\n    ...\n    leaderLatch.start();\n    treeCache.start();\n}\n</code></pre>\n<p>æˆ‘ä»¬è¿›å…¥åˆ° LeaderLatch çš„ start æ–¹æ³•ã€‚å®ƒçš„å†…éƒ¨æ˜¯åœ¨ ZooKeeper ä¸Šåˆ›å»º latch-xxx èŠ‚ç‚¹ã€‚xxx æ˜¯å½“å‰ LeaderLatch çš„ IDï¼Œå®ƒç”± ZooKeeper ç”Ÿæˆï¼ŒID æœ€å°çš„å½“é€‰ Leaderã€‚</p>\n<pre><code class=\"language-java\">private void checkLeadership(List&lt;String&gt; children) throws Exception {\n    if (this.debugCheckLeaderShipLatch != null) {\n        this.debugCheckLeaderShipLatch.await();\n    }\n\n    String localOurPath = (String)this.ourPath.get();\n    List&lt;String&gt; sortedChildren = LockInternals.getSortedChildren(\"latch-\", sorter, children);\n    int ourIndex = localOurPath != null ? sortedChildren.indexOf(ZKPaths.getNodeFromPath(localOurPath)) : -1;\n    this.log.debug(\"checkLeadership with id: {}, ourPath: {}, children: {}\", new Object[]{this.id, localOurPath, sortedChildren});\n    if (ourIndex &lt; 0) {\n        this.log.error(\"Can't find our node. Resetting. Index: \" + ourIndex);\n        this.reset();\n    } else if (ourIndex == 0) {\n        this.lastPathIsLeader.set(localOurPath);\n        this.setLeadership(true);\n    } else {\n        this.setLeadership(false);\n        String watchPath = (String)sortedChildren.get(ourIndex - 1);\n        Watcher watcher = new Watcher() {\n            public void process(WatchedEvent event) {\n                if (LeaderLatch.this.state.get() == LeaderLatch.State.STARTED &amp;&amp; event.getType() == EventType.NodeDeleted) {\n                    try {\n                        LeaderLatch.this.getChildren();\n                    } catch (Exception ex) {\n                        ThreadUtils.checkInterrupted(ex);\n                        LeaderLatch.this.log.error(\"An error occurred checking the leadership.\", ex);\n                    }\n                }\n\n            }\n        };\n        BackgroundCallback callback = new BackgroundCallback() {\n            public void processResult(CuratorFramework client, CuratorEvent event) throws Exception {\n                if (event.getResultCode() == Code.NONODE.intValue()) {\n                    LeaderLatch.this.getChildren();\n                }\n\n            }\n        };\n        ((ErrorListenerPathable)((BackgroundPathable)this.client.getData().usingWatcher(watcher)).inBackground(callback)).forPath(ZKPaths.makePath(this.latchPath, watchPath));\n    }\n\n}\n</code></pre>\n<p>å½“é€‰ Leader åï¼Œä¼šå›è°ƒ LeaderElectionDriver çš„ isLeader æ–¹æ³•ï¼Œå¦‚æœæœªå½“é€‰ï¼Œåˆ™ç»§ç»­ç›‘å¬ latch èŠ‚ç‚¹çš„å˜æ›´ã€‚isLeader ä¼šç»§ç»­å›è°ƒ LeaderElection çš„ onGrantLeadership æ–¹æ³•ï¼Œæ¥ç€è°ƒç”¨ LeaderContender çš„ grantLeadershipã€‚è¿™æ—¶ä¼šå¯åŠ¨ JobMaster æœåŠ¡ï¼Œç„¶åè°ƒç”¨ LeaderElection çš„ confirmLeadershipAsync æ¥ç¡®è®¤å½“é€‰æˆåŠŸã€‚ç¡®è®¤çš„è¿‡ç¨‹æ˜¯ç”± LeaderElectionDriver æ¥æ‰§è¡Œçš„ã€‚ä¸»è¦ä½œç”¨æ˜¯æŠŠå½“å‰ leader çš„ä¿¡æ¯å†™å›åˆ° ZooKeeper çš„ connection_info èŠ‚ç‚¹ã€‚</p>\n<pre><code class=\"language-java\">public void publishLeaderInformation(String componentId, LeaderInformation leaderInformation) {\n    Preconditions.checkState(running.get());\n\n    if (!leaderLatch.hasLeadership()) {\n        return;\n    }\n\n    final String connectionInformationPath =\n            ZooKeeperUtils.generateConnectionInformationPath(componentId);\n\n    LOG.debug(\n            \"Write leader information {} for component '{}' to {}.\",\n            leaderInformation,\n            componentId,\n            ZooKeeperUtils.generateZookeeperPath(\n                    curatorFramework.getNamespace(), connectionInformationPath));\n\n    try {\n        ZooKeeperUtils.writeLeaderInformationToZooKeeper(\n                leaderInformation,\n                curatorFramework,\n                leaderLatch::hasLeadership,\n                connectionInformationPath);\n    } catch (Exception e) {\n        leaderElectionListener.onError(e);\n    }\n}\n</code></pre>\n<h4 id=\"æœåŠ¡å‘ç°-1\">æœåŠ¡å‘ç°</h4>\n<p>æ¢³ç†å®Œé€‰ä¸¾æœåŠ¡çš„æºç åï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹æœåŠ¡å‘ç°çš„è¿‡ç¨‹ã€‚æˆ‘ä»¬ä»¥ TaskManager è·å– JobManager çš„ leader ä¸ºä¾‹ã€‚</p>\n<p><img alt=\"ZKLeaderRetrieval\" class=\"lazyload\" /></p>\n<p>å½“æˆ‘ä»¬å¾€ TaskManager æ·»åŠ ä»»åŠ¡æ—¶ï¼Œä¼šè°ƒç”¨ JobLeaderService çš„ addJob æ–¹æ³•ã€‚è¿™é‡Œä¼šå…ˆè·å– LeaderRetrievalï¼Œç„¶åè°ƒç”¨ start æ–¹æ³•æ³¨å†Œ LeaderRetrievalListener ç›‘å¬ï¼Œå¹¶åˆ›å»º LeaderRetrievalDriverã€‚åœ¨ LeaderRetrievalDriver ä¸­ä¸»è¦æ˜¯å‘ ZooKeeper æ³¨å†Œ connection_info èŠ‚ç‚¹çš„å˜æ›´ã€‚</p>\n<p>å¦‚æœå‘ç”Ÿå˜æ›´ï¼ŒZooKeeper ä¼šå›è°ƒ <code>LeaderRetrievalDriver.retrieveLeaderInformationFromZooKeeper</code> æ–¹æ³•ã€‚æˆ‘ä»¬ä» ZooKeeper è·å–åˆ° leader çš„åœ°å€å’Œ sessionId åï¼Œå°±å›è°ƒ <code>LeaderRetrievalService.notifyLeaderAddress</code> æ–¹æ³•ã€‚æœ€ç»ˆè°ƒç”¨åˆ° JobLeaderService çš„ notifyLeaderAddress æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¸­å°±æ˜¯æ–­å¼€ä¸æ—§ leader çš„è¿æ¥ï¼Œå¢åŠ ä¸æ–° leader çš„è¿æ¥ã€‚</p>\n<h4 id=\"ä¿¡æ¯ä¿å­˜-1\">ä¿¡æ¯ä¿å­˜</h4>\n<p>æœ€åæˆ‘ä»¬å†æ¥çœ‹ä¿¡æ¯ä¿å­˜ç›¸å…³çš„æºç ã€‚åœ¨ JobManager å®Œæˆä¸€æ¬¡ Checkpoint æ—¶ï¼Œä¼šæ‰§è¡Œ <code>CheckpointCoordinator.completePendingCheckpoint</code> æ–¹æ³•ï¼Œè·Ÿéšè°ƒç”¨é“¾è·¯å¯ä»¥æ‰¾åˆ° <code>ZooKeeperStateHandleStore.addAndLock</code> æ–¹æ³•ï¼Œè¿™é‡Œä¼šæŠŠçŠ¶æ€å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œç„¶åæŠŠæ–‡ä»¶è·¯å¾„ä¿å­˜åœ¨ ZooKeeper ä¸­ã€‚</p>\n<pre><code class=\"language-java\">public RetrievableStateHandle&lt;T&gt; addAndLock(String pathInZooKeeper, T state)\n        throws PossibleInconsistentStateException, Exception {\n    checkNotNull(pathInZooKeeper, \"Path in ZooKeeper\");\n    checkNotNull(state, \"State\");\n    final String path = normalizePath(pathInZooKeeper);\n    final Optional&lt;Stat&gt; maybeStat = getStat(path);\n\n    if (maybeStat.isPresent()) {\n        if (isNotMarkedForDeletion(maybeStat.get())) {\n            throw new AlreadyExistException(\n                    String.format(\"ZooKeeper node %s already exists.\", path));\n        }\n\n        Preconditions.checkState(\n                releaseAndTryRemove(path),\n                \"The state is marked for deletion and, therefore, should be deletable.\");\n    }\n\n    final RetrievableStateHandle&lt;T&gt; storeHandle = storage.store(state);\n    final byte[] serializedStoreHandle = serializeOrDiscard(storeHandle);\n    try {\n        writeStoreHandleTransactionally(path, serializedStoreHandle);\n        return storeHandle;\n    } catch (KeeperException.NodeExistsException e) {\n        // Transactions are not idempotent in the curator version we're currently using, so it\n        // is actually possible that we've re-tried a transaction that has already succeeded.\n        // We've ensured that the node hasn't been present prior executing the transaction, so\n        // we can assume that this is a result of the retry mechanism.\n        return storeHandle;\n    } catch (Exception e) {\n        if (indicatesPossiblyInconsistentState(e)) {\n            throw new PossibleInconsistentStateException(e);\n        }\n        // In case of any other failure, discard the state and rethrow the exception.\n        storeHandle.discardState();\n        throw e;\n    }\n}\n</code></pre>\n<p>è‡³æ­¤ï¼ŒåŸºäº ZooKeeper çš„ HA é€»è¾‘æˆ‘ä»¬å°±æ¢³ç†å®Œäº†ã€‚ä» 1.12 ç‰ˆæœ¬å¼€å§‹ï¼ŒFlink è¿˜æ”¯æŒäº† Kubernetes é«˜å¯ç”¨ï¼Œä¸‹é¢æˆ‘ä»¬å†æ¥ä¸€ä¸‹å®ƒæ˜¯å¦‚ä½•å®ç°çš„ã€‚</p>\n<h3 id=\"åŸºäº-kubernetes-çš„-ha\">åŸºäº Kubernetes çš„ HA</h3>\n<h4 id=\"é€‰ä¸¾æœåŠ¡-2\">é€‰ä¸¾æœåŠ¡</h4>\n<p>é€šè¿‡å‰é¢çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å·²ç»äº†è§£åˆ°ï¼Œé€‰ä¸¾çš„ä¸»è¦é€»è¾‘æ˜¯åœ¨ LeaderElectionDriver ä¸­ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬ç›´æ¥æ¥çœ‹ KubernetesLeaderElectionDriver çš„é€»è¾‘å³å¯ã€‚åˆ›å»º KubernetesLeaderElectionDriver æ—¶ï¼Œåˆ›å»ºå¹¶å¯åŠ¨äº† KubernetesLeaderElectorã€‚è¿™ä¸ªç±»ä¼¼äº ZooKeeper é€»è¾‘ä¸­ LeaderLatchï¼Œä¼šè·Ÿ Kubernetes åº•å±‚çš„é€‰ä¸¾é€»è¾‘äº¤äº’ï¼ŒåŒæ—¶æ³¨å†Œç›‘å¬ã€‚</p>\n<pre><code class=\"language-java\">public KubernetesLeaderElector(\n        NamespacedKubernetesClient kubernetesClient,\n        KubernetesLeaderElectionConfiguration leaderConfig,\n        LeaderCallbackHandler leaderCallbackHandler,\n        ExecutorService executorService) {\n    this.kubernetesClient = kubernetesClient;\n    this.leaderElectionConfig =\n            new LeaderElectionConfigBuilder()\n                    .withName(leaderConfig.getConfigMapName())\n                    .withLeaseDuration(leaderConfig.getLeaseDuration())\n                    .withLock(\n                            new ConfigMapLock(\n                                    new ObjectMetaBuilder()\n                                            .withNamespace(kubernetesClient.getNamespace())\n                                            .withName(leaderConfig.getConfigMapName())\n                                            // Labels will be used to clean up the ha related\n                                            // ConfigMaps.\n                                            .withLabels(\n                                                    KubernetesUtils.getConfigMapLabels(\n                                                            leaderConfig.getClusterId()))\n                                            .build(),\n                                    leaderConfig.getLockIdentity()))\n                    .withRenewDeadline(leaderConfig.getRenewDeadline())\n                    .withRetryPeriod(leaderConfig.getRetryPeriod())\n                    .withReleaseOnCancel(true)\n                    .withLeaderCallbacks(\n                            new LeaderCallbacks(\n                                    leaderCallbackHandler::isLeader,\n                                    leaderCallbackHandler::notLeader,\n                                    newLeader -&gt;\n                                            LOG.info(\n                                                    \"New leader elected {} for {}.\",\n                                                    newLeader,\n                                                    leaderConfig.getConfigMapName())))\n                    .build();\n    this.executorService = executorService;\n\n    LOG.info(\n            \"Create KubernetesLeaderElector on lock {}.\",\n            leaderElectionConfig.getLock().describe());\n}\n</code></pre>\n<p>é€‰ä¸¾æˆåŠŸåï¼Œä¼šå›è°ƒ <code>LeaderElectionListener.onGrantLeadership</code> æ–¹æ³•ã€‚åç»­çš„è°ƒç”¨é“¾è·¯è¿˜æ˜¯ä¼šè°ƒç”¨åˆ° <code>KubernetesLeaderElectionDriver.publishLeaderInformation</code> æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯æŠŠ leader ä¿¡æ¯å†™åˆ° Kubernetes çš„ configMap ä¸­ã€‚</p>\n<pre><code class=\"language-java\">public void publishLeaderInformation(String componentId, LeaderInformation leaderInformation) {\n    Preconditions.checkState(running.get());\n\n    try {\n        kubeClient\n                .checkAndUpdateConfigMap(\n                        configMapName,\n                        updateConfigMapWithLeaderInformation(componentId, leaderInformation))\n                .get();\n    } catch (InterruptedException | ExecutionException e) {\n        leaderElectionListener.onError(e);\n    }\n\n    LOG.debug(\n            \"Successfully wrote leader information {} for leader {} into the config map {}.\",\n            leaderInformation,\n            componentId,\n            configMapName);\n}\n</code></pre>\n<h4 id=\"æœåŠ¡å‘ç°-2\">æœåŠ¡å‘ç°</h4>\n<p>æœåŠ¡å‘ç°çš„é€»è¾‘åœ¨ KubernetesLeaderRetrievalDriver ç±»ä¸­ï¼Œåœ¨åˆ›å»ºæ—¶ï¼Œä¼šå°†å†…éƒ¨ç±» ConfigMapCallbackHandlerImpl æ³¨å†Œä¸ºç›‘å¬å›è°ƒç±»ã€‚</p>\n<p>å½“ configMap æœ‰æ–°å¢æˆ–å˜æ›´åï¼Œä¼šå›è°ƒ <code>LeaderRetrievalService.notifyLeaderAddress</code> æ–¹æ³•ã€‚</p>\n<pre><code class=\"language-java\">private class ConfigMapCallbackHandlerImpl\n        implements FlinkKubeClient.WatchCallbackHandler&lt;KubernetesConfigMap&gt; {\n\n    @Override\n    public void onAdded(List&lt;KubernetesConfigMap&gt; configMaps) {\n        // The ConfigMap is created by KubernetesLeaderElectionDriver with\n        // empty data. We don't really need to process anything unless the retriever was started\n        // after the leader election has already succeeded.\n        final KubernetesConfigMap configMap = getOnlyConfigMap(configMaps, configMapName);\n        final LeaderInformation leaderInformation = leaderInformationExtractor.apply(configMap);\n        if (!leaderInformation.isEmpty()) {\n            leaderRetrievalEventHandler.notifyLeaderAddress(leaderInformation);\n        }\n    }\n\n    @Override\n    public void onModified(List&lt;KubernetesConfigMap&gt; configMaps) {\n        final KubernetesConfigMap configMap = getOnlyConfigMap(configMaps, configMapName);\n        leaderRetrievalEventHandler.notifyLeaderAddress(\n                leaderInformationExtractor.apply(configMap));\n    }\n    ...\n}\n</code></pre>\n<h4 id=\"ä¿¡æ¯ä¿å­˜-2\">ä¿¡æ¯ä¿å­˜</h4>\n<p>ä¿¡æ¯ä¿å­˜çš„é€»è¾‘å’Œ ZooKeeper ä¹Ÿéå¸¸ç±»ä¼¼ã€‚å³å…ˆæŠŠ state ä¿å­˜åœ¨æ–‡ä»¶ç³»ç»Ÿï¼Œç„¶åæŠŠå­˜å‚¨è·¯å¾„å†™åˆ° Kubernetes å†™åˆ° configMap ä¸­ã€‚å…·ä½“å¯ä»¥çœ‹ <code>KubernetesStateHandleStore.addAndLock</code> æ–¹æ³•ã€‚</p>\n<h3 id=\"æ€»ç»“\">æ€»ç»“</h3>\n<p>æœ¬æ–‡æˆ‘ä»¬ä¸€èµ·æ¢³ç†äº† Flink ä¸­ JobManager çš„ HA æœºåˆ¶ç›¸å…³æºç ã€‚ç›®å‰ Flink æ”¯æŒ ZooKeeper å’Œ Kubernetes ä¸¤ç§å®ç°ã€‚åœ¨æ¢³ç†è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä»¥ JobManager ä¸ºä¾‹ï¼Œå…¶ä»–å‡ ä¸ªç”¨åˆ°é«˜å¯ç”¨çš„æœåŠ¡çš„é€‰ä¸¾é€»è¾‘ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚</p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-14 23:45</span>&nbsp;\n<a href=\"https://www.cnblogs.com/Jackeyzhe\">Jackeyzhe</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">15</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "å°ç™½å­¦AIå¼€å‘01ï¼šåˆ›å»ºç¬¬ä¸€ä¸ªç¤ºä¾‹Agent",
      "link": "https://www.cnblogs.com/jyzhao/p/19484508/xiao-bai-xueai-kai-fa01-chuang-jian-di-yi-ge-shi-l",
      "published": "",
      "description": "<a name=\"top\"></a>\n    <h2><a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/jyzhao/p/19484508/xiao-bai-xueai-kai-fa01-chuang-jian-di-yi-ge-shi-l\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-14 23:43\">\n    <span>å°ç™½å­¦AIå¼€å‘01ï¼šåˆ›å»ºç¬¬ä¸€ä¸ªç¤ºä¾‹Agent</span>\n    \n\n</a>\n</h2>\n    <small>\n<span id=\"post-date\">2026-01-14 23:43</span>&nbsp;\n<a href=\"https://www.cnblogs.com/jyzhao\">AlfredZhao</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">20</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</small>\n    <div class=\"entry\">\n        <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<p>åœ¨ LangChain å¼€å‘ä¸­ï¼Œæˆ‘ä»¬çš„æ ¸å¿ƒå·¥ä½œæ˜¯å†™ Promptï¼ˆæç¤ºè¯ï¼‰ã€‚</p>\n<p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜éœ€è¦äº†è§£ä¸‹pythonåŸºç¡€ï¼Œç®€å•äº†è§£å³å¯ï¼Œä¸éœ€è¦ç³»ç»Ÿå­¦ä¹ ï¼Œè¿™å°±æ˜¯AIæ—¶ä»£å¯¹æŠ€æœ¯çˆ±å¥½è€…çš„çº¢åˆ©ã€‚</p>\n<h2 id=\"01--æ„å»ºç‹¬ç«‹çš„pythonç¯å¢ƒ\">01 | æ„å»ºç‹¬ç«‹çš„pythonç¯å¢ƒ</h2>\n<p>ä½¿ç”¨minicondaæ„å»ºç‹¬ç«‹çš„pythonç¯å¢ƒã€‚</p>\n<p>å®˜æ–¹ç½‘ç«™ï¼š<a href=\"https://www.anaconda.com/\" rel=\"noopener nofollow\" target=\"_blank\">https://www.anaconda.com/</a></p>\n<p>é€‰æ‹©é€‚åˆä½ çš„ï¼Œæˆ‘è¿™é‡Œç›´æ¥é€‰æ‹©å›¾å½¢åŒ–å®‰è£…çš„Minicondaï¼š</p>\n<p><img alt=\"\" src=\"https://img2024.cnblogs.com/blog/635610/202601/635610-20260114224646258-840865368.jpg\" /></p>\n<p>ä¸‹è½½åå®‰è£…ï¼š</p>\n<p><img alt=\"\" src=\"https://img2024.cnblogs.com/blog/635610/202601/635610-20260114224646142-163182582.jpg\" /></p>\n<p>å…³é—­å¹¶é‡æ–°æ‰“å¼€ç»ˆç«¯ã€‚æ­¤æ—¶ä½ ä¼šçœ‹åˆ°å‘½ä»¤è¡Œå‰é¢å¤šäº†ä¸ª (base)ï¼Œè¿™è¯´æ˜ Conda å·²ç»æ¥ç®¡äº†ç¯å¢ƒã€‚</p>\n<p>ç„¶ååˆ›å»º Python 3.12 ä¸“å±å­¦ä¹ ç¯å¢ƒï¼š</p>\n<pre><code class=\"language-BASH\"># åˆ›å»ºç¯å¢ƒå¹¶æŒ‡å®š Python ç‰ˆæœ¬\nconda create -n lc python=3.12 -y\n\n# æ¿€æ´»ç¯å¢ƒ\nconda activate lc\n</code></pre>\n<p>Tipsï¼šå¦‚æœåˆ›å»ºç¯å¢ƒï¼Œé‡åˆ°è®©åŒæ„æœåŠ¡/æ¡æ¬¾ä¹‹ç±»ï¼Œç›´æ¥æŒ‰æç¤ºå‘½ä»¤æ‰§è¡ŒåŒæ„å³å¯ã€‚</p>\n<p>åé¢æµ‹è¯•ä¸åŒåŠŸèƒ½çš„pythonç¨‹åºè‚¯å®šå…ä¸äº†å¼•ç”¨å„ç§ç±»å‹çš„åŒ…ï¼Œæˆ‘ä»¬ç»Ÿä¸€æ”¾åˆ° requirements.txt ä¸­ï¼Œåç»­æ–°ç¯å¢ƒä¹Ÿå¯ä»¥ç›´æ¥ä¸€é”®å®‰è£…éœ€è¦å¼•å…¥çš„ç›¸å…³åŒ…ã€‚</p>\n<pre><code class=\"language-BASH\">pip install -r requirements.txt\n</code></pre>\n<p>å®šæœŸç»´æŠ¤requirements.txtæ–‡ä»¶ï¼š</p>\n<pre><code class=\"language-BASH\">langchain\nlangchain-openai\npython-dotenv\n</code></pre>\n<h2 id=\"02--åˆ›å»ºç¬¬ä¸€ä¸ªç¤ºä¾‹agent\">02 | åˆ›å»ºç¬¬ä¸€ä¸ªç¤ºä¾‹Agent</h2>\n<p>è¿™é‡Œä»¿ç…§LangChainå®˜æ–¹æ–‡æ¡£ï¼Œæ„å»ºä¸€ä¸ªç®€å•çš„Agentã€‚</p>\n<ul>\n<li><a href=\"https://docs.langchain.com/oss/python/langchain/quickstart\" rel=\"noopener nofollow\" target=\"_blank\">https://docs.langchain.com/oss/python/langchain/quickstart</a></li>\n</ul>\n<p>å› ä¸ºç¬”è€…æš‚æ—¶æ²¡æœ‰Claudeæ¨¡å‹å¯ç”¨ï¼Œæ‰€ä»¥æ›¿æ¢ä¸ºå›½å†…çš„æ¨¡å‹ï¼Œåœ¨æˆ‘ä»¬å­¦ä¹ æµ‹è¯•é˜¶æ®µï¼ŒåŸºæœ¬æ˜¯æ²¡å•¥å½±å“çš„ã€‚</p>\n<p>vi basic.py</p>\n<pre><code class=\"language-python\">import os\nfrom dotenv import load_dotenv\nfrom langchain.agents import create_agent\nfrom langchain_openai import ChatOpenAI\nfrom langchain.tools import tool\n\n# åŠ è½½ .env æ–‡ä»¶ä¸­çš„ SILICONFLOW_API_KEY\nload_dotenv()\n\n# 1. å®šä¹‰å·¥å…·ï¼šå¿…é¡»è¦å†™æ¸…æ™°çš„ Docstringï¼ˆå‡½æ•°æ³¨é‡Šï¼‰\n@tool\ndef get_weather(city: str) -&gt; str:\n    \"\"\"è·å–æŒ‡å®šåŸå¸‚çš„å®æ—¶å¤©æ°”æƒ…å†µã€‚\"\"\"\n    return f\"{city} çš„å¤©æ°”æ€»æ˜¯é˜´é›¨è¿è¿ï¼\"\n\n# 2. åˆå§‹åŒ– SiliconFlow æ¨¡å‹\nllm = ChatOpenAI(\n    model=\"deepseek-ai/DeepSeek-V3\", \n    api_key=os.getenv(\"SILICONFLOW_API_KEY\"),\n    base_url=\"https://api.siliconflow.cn/v1\",\n    temperature=0.1\n)\n\n# 3. åˆ›å»º Agent\nagent = create_agent(\n    model=llm,\n    tools=[get_weather],\n    system_prompt=\"ä½ æ˜¯ä¸€ä¸ªä¹äºåŠ©äººçš„å¤©æ°”åŠ©æ‰‹ã€‚\"\n)\n\n# 4. è¿è¡Œ\nif __name__ == \"__main__\":\n    response = agent.invoke(\n        {\"messages\": [{\"role\": \"user\", \"content\": \"åŒ—äº¬å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ\"}]}\n    )\n    # æ‰“å°æœ€åä¸€æ¡æ¶ˆæ¯ï¼ˆAI çš„å›ç­”ï¼‰\n    print(response[\"messages\"][-1].content)\n</code></pre>\n<h2 id=\"03--å¢å¼ºè¿™ä¸ªç¤ºä¾‹agent\">03 | å¢å¼ºè¿™ä¸ªç¤ºä¾‹Agent</h2>\n<p>æ±‰åŒ–å¹¶ç¨å¾®æ”¹é€ ä¸‹å®˜æ–¹çš„ç¤ºä¾‹ï¼Œä½¿å…¶é€‚ç”¨äºæˆ‘ä»¬çš„æµ‹è¯•ç¯å¢ƒï¼š</p>\n<p>vi enhance.py</p>\n<pre><code class=\"language-PYTHON\">import os\nfrom dataclasses import dataclass\nfrom dotenv import load_dotenv\n\nfrom langchain_openai import ChatOpenAI\nfrom langchain.agents import create_agent\nfrom langchain.tools import tool, ToolRuntime\nfrom langgraph.checkpoint.memory import InMemorySaver\nfrom langchain.agents.structured_output import ToolStrategy\n\nload_dotenv()\n\n# 1. å®šä¹‰ç³»ç»Ÿæç¤ºè¯ï¼ˆè¦æ±‚ AI åšä¸ªâ€œè°éŸ³æ¢—â€ä¸“å®¶ï¼‰\nSYSTEM_PROMPT = \"\"\"ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„èµ„æ·±å¤©æ°”é¢„æŠ¥å‘˜ï¼Œè¯´è¯æå…¶å¹½é»˜ï¼Œç‰¹åˆ«å–œæ¬¢è®²â€œè°éŸ³æ¢—â€ã€‚\n\nä½ æœ‰æƒä½¿ç”¨ä»¥ä¸‹ä¸¤ä¸ªå·¥å…·ï¼š\n- get_weather_for_location: è·å–ç‰¹å®šåŸå¸‚çš„å¤©æ°”ã€‚\n- get_user_location: è·å–å½“å‰ç”¨æˆ·çš„æ‰€åœ¨åœ°ã€‚\n\nå¦‚æœç”¨æˆ·è¯¢é—®å¤©æ°”ï¼Œè¯·åŠ¡å¿…ç¡®è®¤åœ°ç‚¹ã€‚å¦‚æœç”¨æˆ·è¯´çš„æ˜¯â€œæˆ‘è¿™å„¿â€æˆ–â€œæˆ‘è¿™é‡Œâ€ï¼Œè¯·è°ƒç”¨ get_user_location è·å–ä»–ä»¬çš„ä½ç½®ã€‚\"\"\"\n\n# 2. å®šä¹‰ä¸Šä¸‹æ–‡ç»“æ„ï¼ˆå­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼‰\n@dataclass\nclass Context:\n    \"\"\"è‡ªå®šä¹‰è¿è¡Œæ—¶ä¸Šä¸‹æ–‡ã€‚\"\"\"\n    user_id: str\n\n# 3. å®šä¹‰å·¥å…·\n@tool\ndef get_weather_for_location(city: str) -&gt; str:\n    \"\"\"è·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”æƒ…å†µã€‚\"\"\"\n    return f\"{city} çš„å¤©æ°”æ€»æ˜¯é˜³å…‰ç¿çƒ‚ï¼\"\n\n@tool\ndef get_user_location(runtime: ToolRuntime[Context]) -&gt; str:\n    \"\"\"æ ¹æ®ç”¨æˆ· ID è·å–å…¶åœ°ç†ä½ç½®ã€‚\"\"\"\n    user_id = runtime.context.user_id\n    # æ¨¡æ‹Ÿæ•°æ®åº“ï¼šç”¨æˆ· 1 åœ¨åŒ—äº¬ï¼Œå…¶ä»–åœ¨ç æµ·\n    return \"åŒ—äº¬\" if user_id == \"1\" else \"ç æµ·\"\n\n# 4. é…ç½®ä½ çš„æ¨¡å‹ (SiliconFlow)\nmodel = ChatOpenAI(\n    model=\"deepseek-ai/DeepSeek-V3\",\n    api_key=os.getenv(\"SILICONFLOW_API_KEY\"),\n    base_url=\"https://api.siliconflow.cn/v1\",\n    temperature=0.7  # ç¨å¾®æé«˜éšæœºæ€§ï¼Œè®©è°éŸ³æ¢—æ›´æœ‰åˆ›æ„\n)\n\n# 5. å®šä¹‰å“åº”æ ¼å¼ï¼ˆæ±‰åŒ–å­—æ®µæè¿°ï¼Œè®© AI æ˜ç™½å¡«ä»€ä¹ˆï¼‰\n@dataclass\nclass ResponseFormat:\n    \"\"\"Agent çš„ç»“æ„åŒ–å›å¤æ ¼å¼ã€‚\"\"\"\n    # å¹½é»˜çš„è°éŸ³æ¢—å›å¤\n    punny_response: str\n    # ä»»ä½•å…³äºå¤©æ°”çš„æœ‰è¶£ä¿¡æ¯ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰\n    weather_conditions: str | None = None\n\n# 6. è®¾ç½®è®°å¿†å­˜å‚¨\ncheckpointer = InMemorySaver()\n\n# 7. åˆ›å»º Agent\nagent = create_agent(\n    model=model,\n    system_prompt=SYSTEM_PROMPT,\n    tools=[get_user_location, get_weather_for_location],\n    context_schema=Context,\n    response_format=ToolStrategy(ResponseFormat),\n    checkpointer=checkpointer\n)\n\n# --- è¿è¡Œæµ‹è¯• ---\n\n# è®¾ç½®ä¼šè¯ ID\nconfig = {\"configurable\": {\"thread_id\": \"test_user_001\"}}\n\n# ç¬¬ä¸€æ¬¡æé—®\nprint(\"--- ç¬¬ä¸€æ¬¡å¯¹è¯ ---\")\nresponse = agent.invoke(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"å¤–é¢å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ\"}]},\n    config=config,\n    context=Context(user_id=\"1\")\n)\n\n# è®¿é—®ç»“æ„åŒ–ç»“æœ\nres = response['structured_response']\nprint(f\"AI: {res.punny_response}\")\nprint(f\"è¯¦æƒ…: {res.weather_conditions}\")\n\nprint(\"\\n--- ç¬¬äºŒæ¬¡å¯¹è¯ï¼ˆæµ‹è¯•è®°å¿†ï¼‰ ---\")\n# ç¬¬äºŒæ¬¡æé—®\nresponse = agent.invoke(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"è°¢è°¢ä½ ï¼æˆ‘åœ¨å“ªé‡Œï¼Ÿ\"}]},\n    config=config,\n    context=Context(user_id=\"1\")\n)\n\nres = response['structured_response']\nprint(f\"AI: {res.punny_response}\")\n</code></pre>\n<p>è¿™æ®µç¤ºä¾‹ä»£ç çš„æ ¸å¿ƒé€»è¾‘æ˜¯ï¼š</p>\n<p><strong>ç¬¬ä¸€æ¬¡å¯¹è¯ï¼š</strong></p>\n<p>ç”¨æˆ·é—®ï¼šâ€œå¤–é¢å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿâ€ï¼ˆæ²¡è¯´åœ°ç‚¹ï¼‰ã€‚<br />\nAI æ€è€ƒï¼šç³»ç»Ÿæç¤ºè¯å‘Šè¯‰æˆ‘ï¼Œå¦‚æœåœ°ç‚¹ä¸æ˜ï¼Œå…ˆå»æŸ¥ç”¨æˆ·åœ¨å“ªã€‚<br />\nåŠ¨ä½œï¼šAI è°ƒç”¨ get_user_location -&gt; å¾—åˆ°â€œåŒ—äº¬â€ -&gt; è°ƒç”¨ get_weather_for_location -&gt; å¾—åˆ°å¤©æ°”ã€‚<br />\nå›å¤ï¼šæ ¹æ® ResponseFormat åå‡ºä¸€ä¸ªè°éŸ³æ¢—ã€‚</p>\n<p><strong>ç¬¬äºŒæ¬¡å¯¹è¯ï¼š</strong></p>\n<p>ç”¨æˆ·é—®ï¼šâ€œè°¢è°¢ä½ ï¼æˆ‘åœ¨å“ªé‡Œï¼Ÿâ€<br />\nAI æ€è€ƒï¼šç”±äºæœ‰ thread_id å’Œ checkpointerï¼ŒAI è®°å¾—ä¸Šä¸€æ¬¡æŸ¥è¯¢çš„ç»“æœã€‚<br />\nåŠ¨ä½œï¼šå®ƒä¸éœ€è¦å†æ¬¡æŸ¥å·¥å…·ï¼Œç›´æ¥ä»è®°å¿†é‡Œæå–ä¿¡æ¯å¹¶å›å¤ã€‚</p>\n<p>ç„¶åæ‰‹å·¥å°†ä»£ç ä¸­çš„ user_id æ”¹ä¸º2ï¼Œå†æ¬¡è¿è¡Œï¼Œå°±ä¼šæ ¹æ®å·¥å…· <code>get_user_location</code> ä¸­çš„ç¤ºä¾‹é€»è¾‘ï¼Œå¾—åˆ°åœ°ç‚¹ä¸ºâ€ç æµ·â€œï¼Œä¸¤æ¬¡æ‰§è¡Œçš„æ•ˆæœå‚è€ƒå¦‚ä¸‹ï¼š</p>\n<p><img alt=\"\" src=\"https://img2024.cnblogs.com/blog/635610/202601/635610-20260114224646132-69223909.jpg\" /></p>\n<p>è¯¥æ®µç¤ºä¾‹ä»£ç è™½ç„¶ç®€å•ï¼Œä½†å…¶å®å·²ç»èƒ½å±•ç°å‡ºä¸€ä¸ªä¼ä¸šçº§ AI æ™ºèƒ½ä½“ï¼ˆAgentï¼‰çš„ç¼©å½±ã€‚å®ƒæ¶µç›–äº†ç°ä»£ AI å¼€å‘ä¸­æœ€æ ¸å¿ƒçš„ä¸‰ä¸ªæ”¯æŸ±ï¼šå·¥å…·è°ƒç”¨ï¼ˆTool Useï¼‰ã€ä¸Šä¸‹æ–‡è®°å¿†ï¼ˆMemoryï¼‰ã€ä»¥åŠç»“æ„åŒ–è¾“å‡ºï¼ˆStructured Outputï¼‰ã€‚</p>\n\n</div>\n<div id=\"MySignature\">\n    <a href=\"https://www.cnblogs.com/jyzhao/\" target=\"_blank\">AlfredZhao</a>Â©ç‰ˆæƒæ‰€æœ‰ã€Œä»Oracleèµ·èˆªï¼Œé¢†ç•¥ç²¾å½©çš„ITæŠ€æœ¯ã€‚ã€<br />\nè½¬è½½è¯·æ³¨æ˜åŸæ–‡é“¾æ¥ï¼š<a href=\"https://www.cnblogs.com/jyzhao/p/19484508/xiao-bai-xueai-kai-fa01-chuang-jian-di-yi-ge-shi-l\" target=\"_blank\">https://www.cnblogs.com/jyzhao/p/19484508/xiao-bai-xueai-kai-fa01-chuang-jian-di-yi-ge-shi-l</a>\n<hr />\n<div style=\"text-align: center; margin-top: 30px;\">\n  <p style=\"font-size: 14px; color: #555;\">\n    ğŸ‘‹ æ„Ÿè°¢é˜…è¯»ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å· <b>ã€Œèµµé–å®‡ã€</b>\n  </p>\n  <img src=\"https://images.cnblogs.com/cnblogs_com/jyzhao/824234/o_250208075013_qrcode-zjy.jpg\" style=\"border: 1px solid #ddd; border-radius: 8px;\" width=\"160\" />\n</div>\n</div>\n<div class=\"clear\"></div>\n\n        <div class=\"clear\"></div>\n        \n</div>\n    <ul class=\"postmetadata\">\n        \n    </ul>"
    },
    {
      "title": "FastAPIç¼“å­˜æé€Ÿå®æˆ˜ï¼šæ‰‹æŠŠæ‰‹æ•™ä½ ç”¨Redisä¸ºæ¥å£æ³¨å…¥â€œè®°å¿†â€",
      "link": "https://www.cnblogs.com/ymtianyu/p/19485724",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/ymtianyu/p/19485724\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-15 11:14\">\n    <span>FastAPIç¼“å­˜æé€Ÿå®æˆ˜ï¼šæ‰‹æŠŠæ‰‹æ•™ä½ ç”¨Redisä¸ºæ¥å£æ³¨å…¥â€œè®°å¿†â€</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                    <div id=\"cnblogs_post_description\" style=\"display: none;\">\n        \n        æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¦‚ä½•åœ¨FastAPIåº”ç”¨ä¸­é›†æˆRediså®ç°é«˜æ•ˆçš„æ•°æ®ç¼“å­˜ã€‚å†…å®¹æ¶µç›–Redisçš„æ ¸å¿ƒä½œç”¨ä¸ä¼˜åŠ¿ã€åœ¨ä¸»è¦æ“ä½œç³»ç»Ÿä¸Šçš„å®‰è£…ä¸é…ç½®æ­¥éª¤ã€å¿…é¡»æŒæ¡çš„å¸¸ç”¨å‘½ä»¤ï¼Œå¹¶é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„å®æˆ˜ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ç¼–å†™ä¸€ä¸ªå¯å¤ç”¨çš„ç¼“å­˜è£…é¥°å™¨æ¥æ˜¾è‘—æå‡æ¥å£æ€§èƒ½ï¼Œæœ€ååˆ†äº«ç¼“å­˜ç­–ç•¥çš„æ³¨æ„äº‹é¡¹ä¸è¿›é˜¶æ€è€ƒã€‚\n    </div>\n<div class=\"blogpost-body blogpost-body-html\" id=\"cnblogs_post_body\">\n<p>ä½ çš„FastAPIæ¥å£æ˜¯ä¸æ˜¯åœ¨é«˜å¹¶å‘ä¸‹è¶Šæ¥è¶Šæ…¢ï¼Œæ•°æ®åº“é¢‘é¢‘å‘Šè­¦ï¼Ÿ</p>\n<p>ä¸€ä¸ªæ¡ˆä¾‹ï¼Œä¸€ä¸ªæ ¸å¿ƒæŸ¥è¯¢æ¥å£ï¼Œåœ¨æ—¥æ´»ä»…5ä¸‡æ—¶ï¼Œå¹³å‡å“åº”æ—¶é—´å°±é£™å‡åˆ°äº†1.2ç§’ã€‚æ’æŸ¥åå‘ç°ï¼Œè¶…è¿‡80%çš„è¯·æ±‚éƒ½åœ¨é‡å¤æŸ¥è¯¢æ•°æ®åº“é‡Œé‚£å‡ æ¡å‡ ä¹ä¸å˜çš„çƒ­ç‚¹æ•°æ®ã€‚åœ¨å¼•å…¥Redisç¼“å­˜åï¼Œè¿™ä¸ªæ¥å£çš„<strong style=\"color: rgba(186, 55, 42, 1);\">å¹³å‡å“åº”æ—¶é—´ç›´æ¥é™åˆ°äº†0.2ç§’ä»¥å†…</strong>ï¼Œæ•°æ®åº“è´Ÿè½½ä¸‹é™äº†70%ã€‚è¿™ï¼Œå°±æ˜¯ç¼“å­˜çš„é­”åŠ›ã€‚</p>\n<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥èŠèŠå¦‚ä½•ä¸ºä½ FastAPIé¡¹ç›®è£…ä¸ŠRedisè¿™ä¸ªâ€œé«˜é€Ÿç¼“å­˜â€ï¼Œè®©å®ƒæ‹¥æœ‰â€œè®°å¿†â€ï¼Œä¸å†æ¯æ¬¡éƒ½å‚»å‚»åœ°é‡å¤åŠ³åŠ¨ã€‚</p>\n<h2>ğŸ“– æœ¬æ–‡ä½ å°†å­¦åˆ°ï¼š</h2>\n<div>\n<p>ğŸ¯ 1. Redisæ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆå®ƒæ˜¯ç¼“å­˜çš„é¦–é€‰ï¼Ÿ</p>\n<p>ğŸ¯ 2. å¦‚ä½•å¿«é€Ÿå®‰è£…ã€é…ç½®Redisã€‚</p>\n<p>ğŸ¯ 3. å¿…é¡»æŒæ¡çš„Redisæ ¸å¿ƒå‘½ä»¤ã€‚</p>\n<p>ğŸ¯ 4. ç¼–å†™ä¸€ä¸ªé€šç”¨çš„FastAPIç¼“å­˜è£…é¥°å™¨ï¼Œä¸€åŠ³æ°¸é€¸ã€‚</p>\n</div>\n<hr />\n<h2>ğŸ”§ ç¬¬ä¸€éƒ¨åˆ†ï¼šé—®é¢˜ä¸èƒŒæ™¯ - ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ï¼Ÿ</h2>\n<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ˜¯é¤å…ï¼ˆä½ çš„WebæœåŠ¡ï¼‰çš„æœåŠ¡å‘˜ï¼ˆAPIæ¥å£ï¼‰ã€‚æ¯æ¬¡å®¢äººï¼ˆå®¢æˆ·ç«¯ï¼‰ç‚¹ä¸€ä»½â€œä»Šæ—¥ç‰¹è‰²èœâ€ï¼ˆçƒ­é—¨æ•°æ®ï¼‰ï¼Œä½ éƒ½éå¾—è·‘å›åå¨ï¼ˆæ•°æ®åº“ï¼‰é—®å¨å¸ˆä¸€éï¼Œå°½ç®¡è¿™é“èœä¸€å¤©éƒ½ä¸ä¼šå˜ã€‚ç»“æœå°±æ˜¯ï¼Œä½ ç´¯è¶´äº†ï¼Œåå¨ä¹Ÿè¢«ä½ é—®çƒ¦äº†ï¼Œå®¢äººè¿˜å«Œä¸Šèœæ…¢ã€‚</p>\n<p>ç¼“å­˜ï¼Œå°±åƒæ˜¯ä½ åœ¨å‰å…æ”¾äº†ä¸ªå°æœ¬å­ï¼ˆRedisï¼‰ã€‚ç¬¬ä¸€æ¬¡æœ‰å®¢äººç‚¹â€œä»Šæ—¥ç‰¹è‰²èœâ€ï¼Œä½ å»åå¨é—®äº†ï¼Œç„¶å<strong style=\"color: rgba(186, 55, 42, 1);\">æŠŠèœåå’Œä»·æ ¼è®°åœ¨æœ¬å­ä¸Š</strong>ã€‚æ¥ä¸‹æ¥å†æœ‰å®¢äººç‚¹ï¼Œä½ ç›´æ¥çœ‹ä¸€çœ¼æœ¬å­å°±å‘Šè¯‰ä»–ï¼Œé€Ÿåº¦å¿«äº†åå€ã€‚åªæœ‰å½“ç‰¹è‰²èœæ›´æ¢äº†ï¼ˆæ•°æ®å˜æ›´ï¼‰ï¼Œä½ æ‰éœ€è¦å»æ›´æ–°å°æœ¬å­ã€‚</p>\n<p>åœ¨æŠ€æœ¯å±‚é¢ï¼Œç¼“å­˜ä¸»è¦è§£å†³ä¸¤ä¸ªé—®é¢˜ï¼š<strong style=\"color: rgba(186, 55, 42, 1);\">1. æå‡æ•°æ®è¯»å–é€Ÿåº¦</strong>ï¼ˆå†…å­˜è¿œå¿«äºç£ç›˜/ç½‘ç»œï¼‰ï¼›<strong style=\"color: rgba(186, 55, 42, 1);\">2. å‡è½»åç«¯æ•°æ®åº“å‹åŠ›</strong>ã€‚</p>\n<h2>âš™ï¸ ç¬¬äºŒéƒ¨åˆ†ï¼šRedisæ ¸å¿ƒä¸å®‰è£…é…ç½®</h2>\n<h3>ğŸ¯ Redisæ˜¯ä»€ä¹ˆï¼Ÿ</h3>\n<p>Redisæ˜¯ä¸€ä¸ªå¼€æºã€åŸºäºå†…å­˜ã€å¯æŒä¹…åŒ–çš„<code style=\"color: rgba(186, 55, 42, 1);\">é”®å€¼å¯¹(Key-Value)</code>å­˜å‚¨ç³»ç»Ÿã€‚å®ƒæ”¯æŒå¤šç§æ•°æ®ç»“æ„ï¼ˆå­—ç¬¦ä¸²ã€å“ˆå¸Œã€åˆ—è¡¨ã€é›†åˆç­‰ï¼‰ï¼Œæ€§èƒ½æé«˜ï¼Œå¸¸è¢«ç”¨ä½œæ•°æ®åº“ã€ç¼“å­˜å’Œæ¶ˆæ¯ä¸­é—´ä»¶ã€‚å¯¹äºç¼“å­˜åœºæ™¯ï¼Œæˆ‘ä»¬ä¸»è¦çœ‹ä¸­å®ƒï¼š<strong style=\"color: rgba(186, 55, 42, 1);\">å†…å­˜å­˜å‚¨é€Ÿåº¦æå¿«</strong>ã€<strong style=\"color: rgba(186, 55, 42, 1);\">æ•°æ®ç»“æ„ä¸°å¯Œ</strong>ã€<strong style=\"color: rgba(186, 55, 42, 1);\">æ”¯æŒè®¾ç½®è¿‡æœŸæ—¶é—´</strong>ã€‚</p>\n<h3>ğŸ¯ å®‰è£…Redisï¼ˆå„å¹³å°é€šç”¨æ­¥éª¤ï¼‰</h3>\n<div>\n<p><strong>1. macOS (ä½¿ç”¨Homebrew):</strong></p>\n<div>\n<p>- æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œï¼š<code style=\"color: rgba(186, 55, 42, 1);\">brew install redis</code></p>\n<p>- å¯åŠ¨æœåŠ¡ï¼š<code style=\"color: rgba(186, 55, 42, 1);\">brew services start redis</code></p>\n</div>\n<p><strong>2. Linux (ä»¥Ubuntuä¸ºä¾‹):</strong></p>\n<div>\n<p>- æ›´æ–°åŒ…ç®¡ç†å™¨ï¼š<code style=\"color: rgba(186, 55, 42, 1);\">sudo apt update</code></p>\n<p>- å®‰è£…Redisï¼š<code style=\"color: rgba(186, 55, 42, 1);\">sudo apt install redis-server</code></p>\n<p>- å¯åŠ¨æœåŠ¡ï¼š<code style=\"color: rgba(186, 55, 42, 1);\">sudo systemctl start redis</code></p>\n</div>\n<p><strong>3. Windows:</strong></p>\n<div>\n<p>å®˜æ–¹ä¸æ”¯æŒWindowsåŸç”Ÿå®‰è£…ï¼Œä½†å¯ä»¥é€šè¿‡ï¼š</p>\n<p>- ä½¿ç”¨WSL2ï¼ˆæ¨èï¼Œåœ¨WSLçš„Ubuntuä¸­æŒ‰Linuxæ–¹æ³•å®‰è£…ï¼‰ã€‚</p>\n<p>- æˆ–ä¸‹è½½å¾®è½¯ç»´æŠ¤çš„æ—§ç‰ˆæœ¬Windowsç§»æ¤ç‰ˆï¼ˆä¸æ¨èç”¨äºç”Ÿäº§ï¼‰ã€‚</p>\n</div>\n</div>\n<p>å®‰è£…å®Œæˆåï¼Œåœ¨ç»ˆç«¯è¾“å…¥ <code style=\"color: rgba(186, 55, 42, 1);\">redis-cli ping</code>ï¼Œå¦‚æœè¿”å› <code style=\"color: rgba(186, 55, 42, 1);\">PONG</code>ï¼Œæ­å–œä½ ï¼ŒRedisæœåŠ¡å·²æˆåŠŸè¿è¡Œï¼</p>\n<h3>ğŸ¯ ä½ å¿…é¡»æŒæ¡çš„5ä¸ªRedisç¼“å­˜æ ¸å¿ƒå‘½ä»¤</h3>\n<div>\n<p><strong>1. SETï¼š è®¾ç½®é”®å€¼å¯¹</strong></p>\n<pre class=\"language-dockerfile highlighter-hljs\"><code>SET user:1001 '{\"name\": \"Alice\", \"age\": 30}' EX 60\n# é”®ï¼šuser:1001ï¼Œ å€¼ï¼šJSONå­—ç¬¦ä¸²ï¼Œ EX 60è¡¨ç¤º60ç§’åè¿‡æœŸ</code></pre>\n<p><strong>2. GETï¼š è·å–é”®å¯¹åº”çš„å€¼</strong></p>\n<pre class=\"language-sql highlighter-hljs\"><code>GET user:1001</code></pre>\n<p><strong>3. EXISTSï¼š æ£€æŸ¥é”®æ˜¯å¦å­˜åœ¨</strong></p>\n<pre class=\"language-dockerfile highlighter-hljs\"><code>EXISTS user:1001 # è¿”å›1(å­˜åœ¨)æˆ–0(ä¸å­˜åœ¨)</code></pre>\n<p><strong>4. DELï¼š åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªé”®</strong></p>\n<pre class=\"language-sql highlighter-hljs\"><code>DEL user:1001 user:1002</code></pre>\n<p><strong>5. TTLï¼š æŸ¥çœ‹é”®çš„å‰©ä½™ç”Ÿå­˜æ—¶é—´(ç§’)</strong></p>\n<pre class=\"language-dockerfile highlighter-hljs\"><code>TTL user:1001 # è¿”å›å‰©ä½™ç§’æ•°ï¼Œ-1è¡¨ç¤ºæ°¸ä¸è¿‡æœŸï¼Œ-2è¡¨ç¤ºé”®ä¸å­˜åœ¨</code></pre>\n</div>\n<h2>ğŸš€ ç¬¬ä¸‰éƒ¨åˆ†ï¼šFastAPIæ•´åˆRediså®æˆ˜æ¼”ç¤º</h2>\n<p>ç†è®ºè¯´å†å¤šï¼Œä¸å¦‚ä¸€è¡Œä»£ç ã€‚è®©æˆ‘ä»¬å¼€å§‹å®æˆ˜ï¼Œæ„å»ºä¸€ä¸ªå¸¦ç¼“å­˜çš„FastAPIåº”ç”¨ã€‚</p>\n<h3>ğŸ¯ ç¬¬ä¸€æ­¥ï¼šå®‰è£…ä¾èµ–</h3>\n<pre class=\"highlighter-hljs\" style=\"background-color: rgba(246, 248, 250, 1); padding: 15px; border-radius: 5px;\"><code>pip install fastapi uvicorn redis python-dotenv</code></pre>\n<h3>ğŸ¯ ç¬¬äºŒæ­¥ï¼šé¡¹ç›®ç»“æ„ä¸é…ç½®</h3>\n<pre class=\"highlighter-hljs\" style=\"background-color: rgba(246, 248, 250, 1); padding: 15px; border-radius: 5px;\"><code>your_project/\nâ”œâ”€â”€ main.py\nâ”œâ”€â”€ cache.py\nâ”œâ”€â”€ .env\nâ””â”€â”€ requirements.txt</code></pre>\n<p>åœ¨<code style=\"color: rgba(186, 55, 42, 1);\">.env</code>æ–‡ä»¶ä¸­é…ç½®Redisè¿æ¥ï¼š</p>\n<pre class=\"highlighter-hljs\" style=\"background-color: rgba(246, 248, 250, 1); padding: 15px; border-radius: 5px;\"><code>REDIS_HOST=localhost\nREDIS_PORT=6379\nREDIS_DB=0\nREDIS_PASSWORD=  # é»˜è®¤æ— å¯†ç ï¼Œç”Ÿäº§ç¯å¢ƒä¸€å®šè¦è®¾ï¼\nCACHE_DEFAULT_TTL=3600  # é»˜è®¤ç¼“å­˜è¿‡æœŸæ—¶é—´1å°æ—¶</code></pre>\n<h3>ğŸ¯ ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºRedisè¿æ¥ä¸ç¼“å­˜å·¥å…·ç±» (cache.py)</h3>\n<pre class=\"language-python highlighter-hljs\"><code>import redis.asyncio as redis  # ä½¿ç”¨å¼‚æ­¥å®¢æˆ·ç«¯\nimport json\nfrom functools import wraps\nfrom typing import Any, Optional\nimport os\nfrom dotenv import load_dotenv\n\nload_dotenv()\n\nclass RedisCache:\n    def __init__(self):\n        self.redis_client: Optional[redis.Redis] = None\n        self.default_ttl = int(os.getenv(â€œCACHE_DEFAULT_TTLâ€, 3600))\n\n    async def connect(self):\n        \"\"\"è¿æ¥Redis\"\"\"\n        if not self.redis_client:\n            self.redis_client = redis.Redis(\n                host=os.getenv(â€œREDIS_HOSTâ€, â€œlocalhostâ€),\n                port=int(os.getenv(â€œREDIS_PORTâ€, 6379)),\n                db=int(os.getenv(â€œREDIS_DBâ€, 0)),\n                password=os.getenv(â€œREDIS_PASSWORDâ€),\n                decode_responses=True  # è‡ªåŠ¨è§£ç è¿”å›å­—ç¬¦ä¸²\n            )\n        return self.redis_client\n\n    async def disconnect(self):\n        \"\"\"å…³é—­è¿æ¥\"\"\"\n        if self.redis_client:\n            await self.redis_client.close()\n\n    def cache_key(self, func_name: str, *args, **kwargs) -&gt; str:\n        \"\"\"ç”Ÿæˆå”¯ä¸€çš„ç¼“å­˜é”®\"\"\"\n        # ç®€å•ç¤ºä¾‹ï¼šå°†å‡½æ•°åå’Œå‚æ•°åºåˆ—åŒ–åæ‹¼æ¥\n        arg_str = â€œ_â€.join([str(arg) for arg in args])\n        kwarg_str = â€œ_â€.join([fâ€œ{k}_{v}â€ for k, v in sorted(kwargs.items())])\n        return fâ€œfastapi_cache:{func_name}:{arg_str}:{kwarg_str}â€.strip(â€œ:â€)\n\n    async def get(self, key: str) -&gt; Any:\n        \"\"\"ä»ç¼“å­˜è·å–æ•°æ®\"\"\"\n        if not self.redis_client:\n            await self.connect()\n        data = await self.redis_client.get(key)\n        if data:\n            try:\n                return json.loads(data)  # ååºåˆ—åŒ–JSON\n            except json.JSONDecodeError:\n                return data  # å¦‚æœä¸æ˜¯JSONï¼Œè¿”å›åŸå§‹å­—ç¬¦ä¸²\n        return None\n\n    async def set(self, key: str, value: Any, ttl: Optional[int] = None) -&gt; bool:\n        \"\"\"è®¾ç½®ç¼“å­˜\"\"\"\n        if not self.redis_client:\n            await self.connect()\n        if isinstance(value, (dict, list)):\n            value = json.dumps(value)  # åºåˆ—åŒ–å¤æ‚å¯¹è±¡\n        expire_time = ttl if ttl is not None else self.default_ttl\n        return await self.redis_client.setex(key, expire_time, value)\n\n    async def delete(self, key: str) -&gt; int:\n        \"\"\"åˆ é™¤ç¼“å­˜\"\"\"\n        if not self.redis_client:\n            await self.connect()\n        return await self.redis_client.delete(key)\n\n# å…¨å±€ç¼“å­˜å®ä¾‹\ncache = RedisCache()\n\ndef cached(ttl: Optional[int] = None):\n    \"\"\"ç¼“å­˜è£…é¥°å™¨ï¼šå¯å¤ç”¨äºä»»ä½•å¼‚æ­¥å‡½æ•°\"\"\"\n    def decorator(func):\n        @wraps(func)\n        async def wrapper(*args, **kwargs):\n            # ç”Ÿæˆç¼“å­˜é”®\n            key = cache.cache_key(func.__name__, *args, **kwargs)\n            # å°è¯•ä»ç¼“å­˜è·å–\n            cached_result = await cache.get(key)\n            if cached_result is not None:\n                print(fâ€œCache HIT for key: {key}â€)\n                return cached_result\n            # ç¼“å­˜æœªå‘½ä¸­ï¼Œæ‰§è¡ŒåŸå‡½æ•°\n            print(fâ€œCache MISS for key: {key}â€)\n            result = await func(*args, **kwargs)\n            # å°†ç»“æœå­˜å…¥ç¼“å­˜\n            await cache.set(key, result, ttl)\n            return result\n        return wrapper\n    return decorator</code></pre>\n<h3>ğŸ¯ ç¬¬å››æ­¥ï¼šåœ¨FastAPIåº”ç”¨ä¸­ä½¿ç”¨ (main.py)</h3>\n<pre class=\"highlighter-hljs\" style=\"background-color: rgba(246, 248, 250, 1); padding: 15px; border-radius: 5px;\"><code>from fastapi import FastAPI, Depends, HTTPException\nfrom cache import cache, cached\nimport asyncio\n\napp = FastAPI(title=â€œFastAPI Redisç¼“å­˜æ¼”ç¤ºâ€)\n\n# åº”ç”¨å¯åŠ¨å’Œå…³é—­äº‹ä»¶\n@app.on_event(â€œstartupâ€)\nasync def startup_event():\n    await cache.connect()\n    print(â€œâœ… Redis connectedâ€)\n\n@app.on_event(â€œshutdownâ€)\nasync def shutdown_event():\n    await cache.disconnect()\n    print(â€œğŸ‘‹ Redis disconnectedâ€)\n\n# --- æ¨¡æ‹Ÿä¸€ä¸ªè€—æ—¶çš„æ•°æ®æŸ¥è¯¢å‡½æ•° ---\nasync def fetch_user_data_from_db(user_id: int):\n    \"\"\"æ¨¡æ‹Ÿä»æ•°æ®åº“æŸ¥è¯¢ç”¨æˆ·æ•°æ®ï¼ˆè€—æ—¶æ“ä½œï¼‰\"\"\"\n    await asyncio.sleep(2)  # æ¨¡æ‹Ÿ2ç§’çš„IOå»¶è¿Ÿ\n    return {â€œidâ€: user_id, â€œnameâ€: fâ€œç”¨æˆ·_{user_id}â€, â€œscoreâ€: user_id * 10}\n\n# --- åº”ç”¨ç¼“å­˜çš„æ¥å£ ---\n@app.get(â€œ/user/{user_id}â€)\n@cached(ttl=30)  # ä¸ºæ­¤æ¥å£å•ç‹¬è®¾ç½®30ç§’ç¼“å­˜\nasync def get_user(user_id: int):\n    \"\"\"è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆå¸¦ç¼“å­˜ï¼‰\"\"\"\n    data = await fetch_user_data_from_db(user_id)\n    return {â€œsourceâ€: â€œdatabase (cached later)â€, â€œdataâ€: data}\n\n@app.get(â€œ/user/{user_id}/freshâ€)\nasync def get_user_fresh(user_id: int):\n    \"\"\"è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆå¼ºåˆ¶æŸ¥æ•°æ®åº“ï¼Œä¸ç¼“å­˜ï¼‰\"\"\"\n    data = await fetch_user_data_from_db(user_id)\n    return {â€œsourceâ€: â€œdatabase (fresh)â€, â€œdataâ€: data}\n\n@app.delete(â€œ/cache/user/{user_id}â€)\nasync def delete_user_cache(user_id: int):\n    \"\"\"æ‰‹åŠ¨åˆ é™¤æŸä¸ªç”¨æˆ·çš„ç¼“å­˜\"\"\"\n    # æ³¨æ„ï¼šè¿™é‡Œéœ€è¦æ¨¡æ‹Ÿç”Ÿæˆå’Œæ¥å£ä¸€è‡´çš„ç¼“å­˜é”®ï¼Œå®æˆ˜ä¸­å¯èƒ½éœ€è¦æ›´å¤æ‚çš„é”®ç®¡ç†\n    key_pattern = fâ€œfastapi_cache:get_user:{user_id}â€\n    deleted = await cache.delete(key_pattern)\n    if deleted:\n        return {â€œmessageâ€: fâ€Cache for user {user_id} deleted.â€}\n    raise HTTPException(status_code=404, detail=â€œCache key not foundâ€)\n\nif __name__ == â€œ__main__â€:\n    import uvicorn\n    uvicorn.run(â€œmain:appâ€, host=â€œ0.0.0.0â€, port=8000, reload=True)</code></pre>\n<p>ç°åœ¨ï¼Œè¿è¡Œ<code style=\"color: rgba(186, 55, 42, 1);\">python main.py</code>å¹¶è®¿é—® <code style=\"color: rgba(186, 55, 42, 1);\">http://localhost:8000/docs</code> æŸ¥çœ‹è‡ªåŠ¨ç”Ÿæˆçš„APIæ–‡æ¡£ã€‚</p>\n<p><strong style=\"color: rgba(186, 55, 42, 1);\">æµ‹è¯•æ•ˆæœï¼š</strong></p>\n<div>\n<p>- é¦–æ¬¡è®¿é—® <code style=\"color: rgba(186, 55, 42, 1);\">/user/1</code>ï¼Œä¼šç­‰å¾…çº¦2ç§’ï¼Œè¿”å›æ¥æºä¸º<span style=\"color: rgba(186, 55, 42, 1);\"><code>database</code></span>ã€‚</p>\n<p>- <strong>30ç§’å†…</strong>å†æ¬¡è®¿é—® <code style=\"color: rgba(186, 55, 42, 1);\">/user/1</code>ï¼Œç¬é—´è¿”å›ï¼Œæ¥æºæ•°æ®æ¥è‡ªç¼“å­˜ï¼Œæ§åˆ¶å°ä¼šæ‰“å°<span style=\"color: rgba(186, 55, 42, 1);\"><code>Cache HIT</code></span>ã€‚</p>\n<p>- è®¿é—® <code style=\"color: rgba(186, 55, 42, 1);\">/user/1/fresh</code> åˆ™æ€»æ˜¯è®¿é—®â€œæ•°æ®åº“â€ã€‚</p>\n<p>- è°ƒç”¨ <code style=\"color: rgba(186, 55, 42, 1);\">DELETE /cache/user/1</code> å¯ä»¥æ‰‹åŠ¨æ¸…é™¤ç¼“å­˜ã€‚</p>\n</div>\n<h2>ğŸ’¡ ç¬¬å››éƒ¨åˆ†ï¼šæ³¨æ„äº‹é¡¹ä¸è¿›é˜¶æ€è€ƒ</h2>\n<div>\n<p><strong>1. ç¼“å­˜ç©¿é€ï¼š</strong> æŸ¥è¯¢ä¸€ä¸ªä¸å­˜åœ¨çš„æ•°æ®ï¼ˆå¦‚<span style=\"color: rgba(186, 55, 42, 1);\"><code>user_id=-1</code></span>ï¼‰ï¼Œç¼“å­˜æ°¸è¿œä¸ä¼šå‘½ä¸­ï¼Œè¯·æ±‚æ¯æ¬¡éƒ½æ‰“åˆ°æ•°æ®åº“ã€‚</p>\n<div>\n<p>- <strong>è§£å†³æ–¹æ¡ˆï¼š</strong> å³ä½¿æ²¡æŸ¥åˆ°æ•°æ®ï¼Œä¹Ÿç¼“å­˜ä¸€ä¸ªç©ºå€¼æˆ–ç‰¹æ®Šæ ‡è®°ï¼ˆå¦‚<span style=\"color: rgba(186, 55, 42, 1);\"><code>NULL</code></span>ï¼‰ï¼Œå¹¶è®¾ç½®ä¸€ä¸ªè¾ƒçŸ­çš„è¿‡æœŸæ—¶é—´ã€‚</p>\n</div>\n<p><strong>2. ç¼“å­˜é›ªå´©ï¼š</strong> å¤§é‡ç¼“å­˜é”®åœ¨åŒä¸€æ—¶åˆ»è¿‡æœŸï¼Œå¯¼è‡´æ‰€æœ‰è¯·æ±‚ç¬é—´æ¶Œå‘æ•°æ®åº“ã€‚</p>\n<div>\n<p>- <strong>è§£å†³æ–¹æ¡ˆï¼š</strong> ä¸ºç¼“å­˜è¿‡æœŸæ—¶é—´æ·»åŠ ä¸€ä¸ªéšæœºå€¼ï¼ˆå¦‚<span style=\"color: rgba(186, 55, 42, 1);\"><code>åŸºç¡€TTL + random.randint(0, 300)</code></span>ï¼‰ï¼Œé¿å…é›†ä½“å¤±æ•ˆã€‚</p>\n</div>\n<p><strong>3. ç¼“å­˜æ›´æ–°ç­–ç•¥ï¼š</strong> æ•°æ®å˜æ›´æ—¶ï¼Œå¦‚ä½•åŒæ­¥æ›´æ–°ç¼“å­˜ï¼Ÿå¸¸ç”¨â€œå†™æ—¶åˆ é™¤â€ï¼ˆCache-Asideï¼‰ã€‚</p>\n<div>\n<p>- æ›´æ–°æ•°æ®åº“åï¼Œ<strong style=\"color: rgba(186, 55, 42, 1);\">ç«‹å³åˆ é™¤</strong>å¯¹åº”çš„ç¼“å­˜é”®ã€‚ä¸‹æ¬¡è¯»å–æ—¶è‡ªç„¶å›æºå¹¶é‡æ–°ç¼“å­˜ã€‚</p>\n</div>\n<p><strong>4. åºåˆ—åŒ–ï¼š</strong> ç¼“å­˜å¤æ‚å¯¹è±¡ï¼ˆå¦‚Pydanticæ¨¡å‹ï¼‰æ—¶ï¼Œè¦ç¡®ä¿å®ƒä»¬èƒ½è¢«JSONåºåˆ—åŒ–ã€‚å¯ä»¥ä½¿ç”¨<span style=\"color: rgba(186, 55, 42, 1);\"><code>.dict()</code></span>æ–¹æ³•å°†å…¶è½¬ä¸ºå­—å…¸ã€‚</p>\n<p><strong>5. é”®çš„è®¾è®¡ï¼š</strong> æ¸…æ™°çš„é”®å‘½åç©ºé—´ï¼ˆå¦‚<span style=\"color: rgba(186, 55, 42, 1);\"><code>app:entity:id</code></span>ï¼‰ä¾¿äºç®¡ç†å’Œæ‰¹é‡æ“ä½œï¼ˆä½¿ç”¨<span style=\"color: rgba(186, 55, 42, 1);\"><code>KEYS</code></span>æˆ–<span style=\"color: rgba(186, 55, 42, 1);\"><code>SCAN</code></span>å‘½ä»¤ï¼Œç”Ÿäº§ç¯å¢ƒæ…ç”¨<span style=\"color: rgba(186, 55, 42, 1);\"><code>KEYS</code></span>ï¼‰ã€‚</p>\n<p><strong>6. æœ€é‡è¦çš„ä¸€ç‚¹ï¼š</strong> <strong style=\"color: rgba(186, 55, 42, 1);\">ç¼“å­˜ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œå®ƒæ˜¯ä¸€ç§ç”¨ç©ºé—´æ¢æ—¶é—´çš„æƒè¡¡ã€‚</strong> ä¸è¦ç¼“å­˜é¢‘ç¹å˜åŒ–çš„æ•°æ®ã€æå°ç»“æœé›†æˆ–å·²ç»å¾ˆå¿«çš„æŸ¥è¯¢ã€‚å§‹ç»ˆç›‘æ§ç¼“å­˜å‘½ä¸­ç‡ï¼Œå®ƒæ˜¯è¡¡é‡ç¼“å­˜æ•ˆç›Šçš„å…³é”®æŒ‡æ ‡ã€‚</p>\n</div>\n<hr style=\"border: none; height: 1px; margin: 40px 0;\" />\n<p style=\"text-align: center;\">---<strong>å†™åœ¨æœ€å</strong>---<br />å¸Œæœ›è¿™ä»½æ€»ç»“èƒ½å¸®ä½ é¿å¼€ä¸€äº›å‘ã€‚å¦‚æœè§‰å¾—æœ‰ç”¨ï¼Œä¸å¦¨ç‚¹ä¸ª èµğŸ‘ æˆ– æ”¶è—â­ æ ‡è®°ä¸€ä¸‹ï¼Œæ–¹ä¾¿éšæ—¶å›é¡¾ã€‚ä¹Ÿæ¬¢è¿å…³æ³¨æˆ‘ï¼Œåç»­ä¸ºä½ å¸¦æ¥æ›´å¤šç±»ä¼¼çš„å®æˆ˜è§£æã€‚æœ‰ä»»ä½•ç–‘é—®æˆ–æƒ³æ³•ï¼Œæˆ‘ä»¬è¯„è®ºåŒºè§ï¼Œä¸€èµ·äº¤æµå¼€å‘ä¸­çš„å„ç§å¿ƒå¾—ä¸é—®é¢˜ã€‚</p>\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-15 11:14</span>&nbsp;\n<a href=\"https://www.cnblogs.com/ymtianyu\">ä¸€åç¨‹åºåª›å‘€</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">0</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "å¦‚ä½•ä¸€æ­¥æ­¥å°† ASP.NET MVC å‡çº§ä¸º.NET",
      "link": "https://www.cnblogs.com/powertoolsteam/p/19486260",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/powertoolsteam/p/19486260\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-15 10:55\">\n    <span>å¦‚ä½•ä¸€æ­¥æ­¥å°† ASP.NET MVC å‡çº§ä¸º.NET</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h2 id=\"å¼•è¨€\">å¼•è¨€</h2>\n<p>å°† ASP.NET MVC åº”ç”¨ä».NET Framework å‡çº§åˆ°ç°ä»£.NET å¹¶ä¸æ˜¯ç®€å•çš„ç‰ˆæœ¬æå‡ã€‚æ­¤æ¬¡è¿ç§»ä»£è¡¨äº†è¿è¡Œæ—¶ã€æ‰˜ç®¡æ¨¡å‹ã€é…ç½®ç³»ç»Ÿã€ä¾èµ–æ³¨å…¥å’Œ HTTP æµæ°´çº¿æ¶æ„çš„è½¬å˜ã€‚è®¸å¤šå›¢é˜Ÿä½ä¼°äº†è¿™ä¸€ç‚¹ï¼ŒæŠŠå®ƒå½“ä½œæ ‡å‡†çš„æ¡†æ¶å‡çº§ï¼Œç»“æœåœ¨æµç¨‹åæœŸæ‰å‘ç°ä»–ä»¬åº”ç”¨ä¸­çš„æ ¸å¿ƒå‡è®¾å·²ç»ä¸å†æˆç«‹ã€‚</p>\n<p>å¥½æ¶ˆæ¯æ˜¯ï¼ŒMicrosoft æä¾›äº†æ˜ç¡®çš„æŒ‡å¯¼å’Œæ¨¡å¼ï¼Œä½¿å¾—æ­£ç¡®æ“ä½œæ—¶è¿ç§»è¿‡ç¨‹å¯é¢„æµ‹ã€‚æœ¬æ–‡ä»‹ç»äº†ä¸€ä¸ªå®ç”¨çš„é€æ­¥ç­–ç•¥ï¼Œå¦‚ä½•å°†åŸºäº.NET Framework æ„å»ºçš„ ASP.NET MVC 5 åº”ç”¨è¿ç§»åˆ°è¿è¡Œåœ¨ç°ä»£.NET ä¸Šçš„ ASP.NET Coreï¼ŒåŒæ—¶æœ€å¤§é™åº¦åœ°å‡å°‘é£é™©å’Œåœæœºæ—¶é—´ã€‚</p>\n<p>æœ¬æŒ‡å—æ˜¯ä¸ºå·²ç»äº†è§£ ASP.NET MVC å¹¶å¸Œæœ›æœ‰ä¸€æ¡åˆ‡å®å¯è¡Œã€å‡†å¤‡å¥½ç”Ÿäº§çš„å¼€å‘è€…å†™çš„ã€‚</p>\n<h3 id=\"æ­¥éª¤1æ ¹æ®åº”ç”¨å¤§å°é€‰æ‹©è¿ç§»è·¯å¾„\">æ­¥éª¤1ï¼šæ ¹æ®åº”ç”¨å¤§å°é€‰æ‹©è¿ç§»è·¯å¾„</h3>\n<p>é€‰æ‹©è¿™ä¸¤æ¡è·¯ä¸­çš„ä¸€æ¡ï¼š</p>\n<ol>\n<li>\n<p><strong>å¤§å¤šæ•°çœŸå®åº”ç”¨çš„å¢é‡è¿ç§»</strong><br />\nä½ ä¼šåœ¨æ—§åº”ç”¨å‰é¢æ­å»ºä¸€ä¸ªæ–°çš„ ASP.NET Core åº”ç”¨ï¼Œé€æ­¥è¿ç§»è·¯ç”±å’ŒåŠŸèƒ½ï¼Œè¿ç§»æ—¶ä¿æŒæ—§åº”ç”¨çš„å­˜åœ¨ã€‚Microsoft æ¨èè¿™ç§æ–¹æ³•ç”¨äºå¤§è§„æ¨¡è¿ç§»ã€‚</p>\n</li>\n<li>\n<p><strong>å°å‹åº”ç”¨çš„ Big Bang è¿ç§»</strong><br />\nä½ åˆ›å»ºä¸€ä¸ªæ–°çš„ ASP.NET Core MVC åº”ç”¨ï¼Œç§»æ¤æ§åˆ¶å™¨ã€è§†å›¾å’ŒæœåŠ¡ï¼Œç›´åˆ°ä¸€åˆ‡è¿è¡Œå®Œæ¯•ï¼Œç„¶ååˆ‡æ¢ã€‚</p>\n</li>\n</ol>\n<p>å¦‚æœä¸ç¡®å®šï¼Œé»˜è®¤é‡‡ç”¨å¢é‡è¿ç§»ï¼Œå› ä¸ºè¿™æ ·å¯ä»¥é™ä½åˆ‡æ¢é£é™©ã€‚</p>\n<h3 id=\"æ­¥éª¤2æ¸…ç‚¹ä»€ä¹ˆä¼šé˜»æŒ¡ä½ \">æ­¥éª¤2ï¼šæ¸…ç‚¹ä»€ä¹ˆä¼šé˜»æŒ¡ä½ </h3>\n<p>åˆ—å‡ºè¿ç§»è¿‡ç¨‹ä¸­å¸¸éœ€è¦æ”¹è¿›çš„ä¾èµ–å’Œåº”ç”¨åŠŸèƒ½ï¼š</p>\n<ul>\n<li>\n<p><strong>System.Web çš„ä½¿ç”¨</strong><br />\nåƒ HttpContext.Currentã€HttpModulesã€HttpHandlersã€Global.asax ä»¥åŠç»å…¸æµæ°´çº¿åŠŸèƒ½è¿™äº›åŠŸèƒ½ä¸ä¼šç›´æ¥è¿ç§»ã€‚</p>\n</li>\n<li>\n<p><strong>è®¤è¯ä¸æˆæƒ</strong><br />\nASP.NET Core é‡‡ç”¨äº†ä¸åŒçš„æ¨¡å¼ã€‚</p>\n</li>\n<li>\n<p><strong>ä¼šè¯ã€ç¼“å­˜ã€é…ç½®ã€æ—¥å¿—</strong><br />\nAPI å’Œæ¨¡å¼å„ä¸ç›¸åŒï¼Œéœ€è¦æœ‰æ„è¯†çš„è¿ç§»è§„åˆ’ã€‚</p>\n</li>\n</ul>\n<p>å¿«é€Ÿå¯¹ä½ çš„ NuGet åŒ…åšä¸ªå…¼å®¹æ€§æ£€æŸ¥ã€‚å¯¹äºæ¯ä¸ªè½¯ä»¶åŒ…ï¼Œæ£€æŸ¥å®ƒæ˜¯å¦æ”¯æŒ netstandard2.0 æˆ–ç°ä»£ç½‘ç»œç‰ˆæœ¬ï¼Œæˆ–è€…æ˜¯å¦æœ‰ ASP.NET Core æ›¿ä»£å“ã€‚æ ‡è®°æ‰€æœ‰ä¸ System.Web ç›¸å…³çš„å†…å®¹ã€‚</p>\n<h3 id=\"æ­¥éª¤3åœ¨æ¥è§¦ä»£ç å‰å»ºç«‹å®‰å…¨åŸºçº¿\">æ­¥éª¤3ï¼šåœ¨æ¥è§¦ä»£ç å‰å»ºç«‹å®‰å…¨åŸºçº¿</h3>\n<p>å†»ç»“å½“å‰çŠ¶æ€ï¼š</p>\n<ol>\n<li>ç»™ä»“åº“æ ‡è®°</li>\n<li>ç¡®ä¿ä½ èƒ½æ„å»ºè§£å†³æ–¹æ¡ˆå¹¶è¿è¡Œæµ‹è¯•å¥—ä»¶</li>\n<li>å¦‚æœè¦†ç›–ç‡è¾ƒå°‘ï¼Œå¯ä»¥å¢åŠ æˆ–åŠ å¼ºæµ‹è¯•<br />\né‡ç‚¹å…³æ³¨å…³é”®è·¯ç”±ã€æˆæƒæµç¨‹å’Œæœ€é‡è¦çš„ä¸šåŠ¡æ“ä½œã€‚</li>\n</ol>\n<p>å¦‚æœæ— æ³•å¿«é€Ÿæ·»åŠ æµ‹è¯•ï¼Œè‡³å°‘è¦è®°å½•çƒŸé›¾æµ‹è¯•è„šæœ¬å’Œé¢„æœŸè¾“å‡ºã€‚</p>\n<h3 id=\"æ­¥éª¤4å…ˆå‡çº§åº“å†è€ƒè™‘ç½‘é¡µåº”ç”¨\">æ­¥éª¤4ï¼šå…ˆå‡çº§åº“ï¼Œå†è€ƒè™‘ç½‘é¡µåº”ç”¨</h3>\n<p>è¿™æ˜¯æ æ†æœ€é«˜çš„æ“ä½œã€‚å¦‚æœè¿˜æ²¡æ‹†åˆ†ï¼Œå°±æŠŠè§£å†³æ–¹æ¡ˆåˆ†æˆå‡ å±‚ï¼šç½‘é¡µé¡¹ç›®ã€åº”ç”¨æœåŠ¡ã€åŸŸåã€æ•°æ®è®¿é—®ã€å…±äº«å·¥å…·ã€‚</p>\n<p>å…ˆç§»æ¤ç±»åº“ã€‚å¦‚æœå¯èƒ½ï¼ŒæŠŠåº“è½¬æ¢æˆç›®æ ‡ NetStandard2.0 ä½œä¸ºæ¡¥æ¥ï¼Œæˆ–è€…ç›´æ¥é¢å‘ç°ä»£ .NETã€‚ä¿®å¤ç¼–è¯‘é”™è¯¯å¹¶æ›¿æ¢ä¸æ”¯æŒçš„ APIã€‚</p>\n<p>Microsoft çš„é€šç”¨ç§»æ¤æŒ‡å¯¼æ˜¯è¯„ä¼°é¡¹ç›®ï¼Œå¹¶ä»¥é™ä½åˆå§‹å‡çº§åå¤æ‚æ€§çš„æ–¹å¼æ¨è¿›å„ä¸ªéƒ¨åˆ†ã€‚</p>\n<h3 id=\"æ­¥éª¤5å†³å®šæ˜¯å¦ä½¿ç”¨è¿ç§»å·¥å…·\">æ­¥éª¤5ï¼šå†³å®šæ˜¯å¦ä½¿ç”¨è¿ç§»å·¥å…·</h3>\n<p>ä½ å¯ä»¥ä½¿ç”¨ä¸¤ä¸ª Microsoft æ”¯æŒçš„å·¥å…·æŒ‡ä»¤æ¥åŠ å¿«éƒ¨åˆ†å·¥ä½œé€Ÿåº¦ï¼š</p>\n<ol>\n<li>\n<p><strong>.NET å‡çº§åŠ©æ‰‹</strong><br />\nå®ƒå¸®åŠ©å‡çº§é¡¹ç›®å¹¶åˆ†æä¸å…¼å®¹é—®é¢˜ï¼ŒåŒ…æ‹¬ .NET Framework é¡¹ç›®ã€‚åœ¨æœ‰å¸®åŠ©çš„åœ°æ–¹ä½¿ç”¨å®ƒï¼Œä½†ä¸è¦æŒ‡æœ›å®ƒèƒ½å®Œå…¨æŠŠ ASP.NET MVC 5 åº”ç”¨è‡ªåŠ¨è½¬åŒ–ä¸º ASP.NET Core MVCã€‚</p>\n</li>\n<li>\n<p><strong>ASP.NET Framework åº”ç”¨çš„è¿ç§»å·¥å…·</strong><br />\nMicrosoft æŒ‡å‡ºï¼Œå°† ASP.NET æ¡†æ¶ MVCã€Web API å’Œ Web Forms é¡¹ç›®å‡çº§åˆ° ASP.NET Coreï¼Œæä¾›ä¸“ç”¨çš„ç°ä»£åŒ–å·¥å…·ã€‚</p>\n</li>\n</ol>\n<p>å¦‚æœä½ æ„¿æ„ï¼Œä½ ä»ç„¶å¯ä»¥æ‰‹åŠ¨å®Œæˆæ‰€æœ‰æ“ä½œï¼Œä½†å·¥å…·å¯ä»¥å‡å°‘æ¯ç‡¥çš„æœºæ¢°ç¼–è¾‘ã€‚</p>\n<h3 id=\"æ­¥éª¤6åˆ›å»ºæ–°çš„-aspnet-core-mvc-ä¸»æœºåº”ç”¨\">æ­¥éª¤6ï¼šåˆ›å»ºæ–°çš„ ASP.NET Core MVC ä¸»æœºåº”ç”¨</h3>\n<p>å³ä½¿æ˜¯å¢é‡è¿ç§»ï¼Œè¿™ä¸€æ­¥ä¹Ÿå¿…é¡»ï¼Œå› ä¸ºä½ éœ€è¦ä¸€ä¸ª ASP.NET Core åº”ç”¨æ‰èƒ½åœ¨ç°ä»£.NET ä¸Šè¿è¡Œã€‚</p>\n<p>åˆ›å»ºä¸€ä¸ªæ–°çš„ ASP.NET æ ¸å¿ƒ MVC é¡¹ç›®ï¼Œä½¿ç”¨æ ‡å‡†çš„ ASP.NET æ ¸å¿ƒ MVC æ¨¡æ¿ã€‚æ·»åŠ ä½ çš„æ ¸å¿ƒåŒ…ã€æ—¥å¿—ã€é…ç½®å’Œ DI ç»“æ„ã€‚</p>\n<p>åœ¨ ASP.NET Core ä¸­ï¼ŒProgram.cs é…ç½®ä¸»æœºå’Œä¸­é—´ä»¶æµæ°´çº¿ã€‚æ²¡æœ‰ Global.asaxã€‚æ·»åŠ ä¸€äº›ä½ è‚¯å®šéœ€è¦çš„åŸºç¡€ä¸­é—´ä»¶ï¼šè·¯ç”±ã€é™æ€æ–‡ä»¶ã€è®¤è¯å’Œæˆæƒï¼ˆå¦‚é€‚ç”¨ï¼‰ã€MVC ç«¯ç‚¹ã€‚</p>\n<p>æœ€å°ç¤ºä¾‹å½¢çŠ¶ï¼š</p>\n<pre><code class=\"language-csharp\">var builder = WebApplication.CreateBuilder(args);\n\nbuilder.Services.AddControllersWithViews();\n\nvar app = builder.Build();\n\napp.UseStaticFiles();\napp.UseRouting();\n\napp.MapControllerRoute(\n    name: \"default\",\n    pattern: \"{controller=Home}/{action=Index}/{id?}\");\n\napp.Run();\n</code></pre>\n<h3 id=\"æ­¥éª¤7å…ˆç§»åŠ¨è·¯ç”±ç„¶åæ˜¯æ§åˆ¶å™¨æœ€åæ˜¯è§†å›¾\">æ­¥éª¤7ï¼šå…ˆç§»åŠ¨è·¯ç”±ï¼Œç„¶åæ˜¯æ§åˆ¶å™¨ï¼Œæœ€åæ˜¯è§†å›¾</h3>\n<p>Microsoft çš„ MVC åˆ°æ ¸å¿ƒç¤ºä¾‹æ”»ç•¥ä»è®¾ç½®å¼€å§‹ï¼Œç„¶åæ˜¯æ§åˆ¶å™¨å’Œè§†å›¾ï¼Œæœ€åæ˜¯é™æ€å†…å®¹å’Œå®¢æˆ·ç«¯ä¾èµ–ã€‚éµå¾ªè¿™ä¸ªé¡ºåºï¼Œå› ä¸ºè¿™æ ·å¯ä»¥è®©è¿ç§»åœ¨æ¯ä¸€æ­¥éƒ½å¯æµ‹è¯•ã€‚</p>\n<p><strong>è¿ç§»è·¯ç”±</strong><br />\nåœ¨ MVC 5 ä¸­ï¼Œä½ å¾ˆå¯èƒ½ç”¨è¿‡ RouteConfigï¼Œå¯èƒ½è¿˜ç”¨äº†å±æ€§è·¯ç”±ã€‚åœ¨ ASP.NET Core ä¸­ï¼Œä½ é…ç½®ä¸­é—´ä»¶æµæ°´çº¿å’Œç«¯ç‚¹æ˜ å°„ä¸­çš„è·¯ç”±ã€‚</p>\n<p><strong>è¿ç§»æ§åˆ¶å™¨</strong><br />\nä¸€æ¬¡è¿ç§»ä¸€ä¸ªæ§åˆ¶å™¨ã€‚å¤åˆ¶ä¸€ä¸ªæ§åˆ¶å™¨ç±»ã€‚é€šè¿‡æ›´æ¢å‘½åç©ºé—´å’Œæ›¿æ¢ä¾èµ– System.Web çš„ä»£ç æ¥ä¿®å¤ç¼–è¯‘é”™è¯¯ã€‚ç”¨æ§åˆ¶å™¨ HttpContext è®¿é—®æ›¿ä»£ HttpContext.Current æ¨¡å¼ã€‚</p>\n<p><strong>è¿ç§»è§†å›¾</strong><br />\nRazor è¯­æ³•ç±»ä¼¼ï¼Œä½†è¾…åŠ©å™¨å’Œä¸€äº›åŠŸèƒ½æœ‰æ‰€ä¸åŒã€‚éœ€è¦çš„åœ°æ–¹è½¬æ¢ HTML è¾…åŠ©å·¥å…·ï¼Œå¿…è¦æ—¶ä½¿ç”¨æ ‡ç­¾è¾…åŠ©å·¥å…·ã€‚</p>\n<p>ä½ å¾ˆå¯èƒ½ä¼šå¼•å…¥ ViewImports.cshtml å’Œ ViewStart.cshtml çš„æ¨¡å¼ã€‚</p>\n<h3 id=\"æ­¥éª¤8ç§»åŠ¨é™æ€æ–‡ä»¶å’Œå®¢æˆ·ç«¯ä¾èµ–\">æ­¥éª¤8ï¼šç§»åŠ¨é™æ€æ–‡ä»¶å’Œå®¢æˆ·ç«¯ä¾èµ–</h3>\n<p><strong>é™æ€æ–‡ä»¶</strong><br />\nåœ¨ MVC 5 ä¸­ï¼Œä½ å¯èƒ½ç”¨è¿‡å†…å®¹å’Œè„šæœ¬çš„çº¦å®šã€‚åœ¨ ASP.NET Core ä¸­ï¼Œé»˜è®¤æ˜¯ wwwroot åŠ  UseStaticFiles ä¸­é—´ä»¶ã€‚</p>\n<p><strong>æ†ç»‘ä¸ç²¾ç®€</strong><br />\nå¦‚æœä½ ä¾èµ– System.Web.Optimizationï¼Œå¯ä»¥ç”¨ç°ä»£å‰ç«¯æ„å»ºæµæ°´çº¿æˆ–å…¶ä»–æ”¯æŒçš„æ–¹æ³•æ›¿ä»£å®ƒã€‚</p>\n<p>Microsoft çš„ç¤ºä¾‹è¿ç§»æµç¨‹æ˜ç¡®æŒ‡å‡ºé™æ€å†…å®¹å’Œå®¢æˆ·ç«¯ä¾èµ–æ˜¯æ—©æœŸè¿ç§»æ­¥éª¤ã€‚</p>\n<h3 id=\"æ­¥éª¤9å°†é…ç½®ä»-webconfig-è¿ç§»åˆ°-appsettings\">æ­¥éª¤9ï¼šå°†é…ç½®ä» Web.config è¿ç§»åˆ° appsettings</h3>\n<p>ç¡®å®šä½ åœ¨ Web.config ä¸­å­˜å‚¨äº†ä»€ä¹ˆï¼šè¿æ¥ä¸²ã€åº”ç”¨è®¾ç½®ã€è®¤è¯è®¾ç½®ã€è‡ªå®šä¹‰é…ç½®éƒ¨åˆ†ã€‚</p>\n<p>å°†è®¾ç½®è¿ç§»åˆ° appsettings.json å’Œç¯å¢ƒç‰¹å®šçš„ appsettings æ–‡ä»¶ä¸­ã€‚é€šè¿‡æ„å»ºå™¨è¯»å– ASP.NET æ ¸å¿ƒé…ç½®ç³»ç»Ÿä¸­çš„è®¾ç½®ã€‚</p>\n<p>Microsoft æœ‰ä¸“é—¨çš„ MVC è¿ç§»ç¤ºä¾‹ä¸­çš„è¿ç§»é…ç½®æŒ‡å—ã€‚</p>\n<h3 id=\"æ­¥éª¤10è¿ç§»è®¤è¯å’Œæˆæƒ\">æ­¥éª¤10ï¼šè¿ç§»è®¤è¯å’Œæˆæƒ</h3>\n<p>ç¡®å®šä½ å½“å‰çš„è®¤è¯æ¨¡å‹ï¼šè¡¨å•è®¤è¯ã€OWIN cookiesã€ASP.NET MVC 5 ä¸­çš„èº«ä»½ã€Windows è®¤è¯ã€‚</p>\n<p>åœ¨ ASP.NET Core ä¸­å®ç°ç±»ä¼¼çš„ï¼š</p>\n<ol>\n<li>åœ¨ DI ä¸­é…ç½®è®¤è¯æœåŠ¡</li>\n<li>åœ¨æµç¨‹ä¸­åŠ å…¥ä¸­é—´ä»¶</li>\n<li>ç«¯å£æˆæƒå±æ€§å’Œç­–ç•¥</li>\n</ol>\n<p>Microsoft çš„ MVC è¿ç§»ç¤ºä¾‹æŒ‡å‘äº†é’ˆå¯¹è®¤è¯å’Œèº«ä»½è¿ç§»çš„ä¸“é—¨æŒ‡å¯¼ï¼Œå› ä¸ºè¿™é€šå¸¸æ˜¯è¾ƒä¸ºç¹é‡çš„éƒ¨åˆ†ä¹‹ä¸€ã€‚</p>\n<h3 id=\"æ­¥éª¤11è¿ç§»æ•°æ®è®¿é—®\">æ­¥éª¤11ï¼šè¿ç§»æ•°æ®è®¿é—®</h3>\n<p><strong>å¦‚æœä½ ä½¿ç”¨å®ä½“æ¡†æ¶6</strong><br />\nä½ é€šå¸¸å¯ä»¥ä¿ç•™ EF6 ä¸€æ®µæ—¶é—´ï¼Œå³ä½¿æ˜¯åœ¨ç°ä»£.NET ä¸Šï¼Œè¿™å–å†³äºä½ çš„é…ç½®ã€‚ä»é•¿è¿œæ¥çœ‹ï¼Œè®¸å¤šå›¢é˜Ÿè½¬å‘ EF Core ä»¥è·å–ç°ä»£åŒ–çš„æ¨¡å¼å’ŒåŠŸèƒ½ã€‚</p>\n<p><strong>å¦‚æœä½ ç”¨ ADO.NET æˆ– Dapper</strong><br />\nè¿™äº›é€šå¸¸èƒ½å¹²å‡€åœ°ç§»æ¤ï¼Œä½†ä½ ä¼šæ›´æ–°é…ç½®å’Œä¾èµ–æ³¨å…¥æ¨¡å¼ã€‚</p>\n<h3 id=\"æ­¥éª¤12è¿è¡Œåº”ç”¨ä¿®å¤è¿è¡Œæ—¶é—®é¢˜ç„¶åè¿›è¡Œä¼˜åŒ–\">æ­¥éª¤12ï¼šè¿è¡Œåº”ç”¨ï¼Œä¿®å¤è¿è¡Œæ—¶é—®é¢˜ï¼Œç„¶åè¿›è¡Œä¼˜åŒ–</h3>\n<p>æŒ‰è¿™ä¸ªå…¸å‹é¡ºåºä¿®å¤è¿è¡Œæ—¶é—®é¢˜ï¼š</p>\n<ol>\n<li>é…ç½®ä¸ç¯å¢ƒå·®å¼‚</li>\n<li>ä¸­é—´ä»¶æ’åºé—®é¢˜</li>\n<li>èº«ä»½éªŒè¯ä¸ Cookie</li>\n<li>ä¼šè¯ä¸ç¼“å­˜è¡Œä¸º</li>\n</ol>\n<p>è¿è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•å’ŒçƒŸé›¾æµ‹è¯•ã€‚åœ¨é€‚å½“æƒ…å†µä¸‹æ·»åŠ ç»“æ„åŒ–æ—¥å¿—å’Œå¥åº·æ£€æŸ¥ã€‚</p>\n<h3 id=\"æ­¥éª¤13å¦‚æœä½ é€‰æ‹©äº†å¢é‡è¿ç§»è®¾ç½®å‰é—¨core-åº”ç”¨\">æ­¥éª¤13ï¼šå¦‚æœä½ é€‰æ‹©äº†å¢é‡è¿ç§»ï¼Œè®¾ç½®\"å‰é—¨\"Core åº”ç”¨</h3>\n<p>å¯¹äºå¢é‡è¿ç§»ï¼Œå…³é”®ä¸¾æªæ˜¯å°† ASP.NET æ ¸å¿ƒåº”ç”¨ç½®äºç°æœ‰çš„.NET Framework åº”ç”¨ä¹‹å‰ï¼Œå¹¶é€è·¯ç”±è¿ç§»ã€‚Microsoft å…³äºå¢é‡è¿ç§»çš„\"å…¥é—¨æŒ‡å—\"æ¨èé‡‡ç”¨ä»£ç†å‰çº¿æ–¹æ³•è¿›è¡Œå¤§è§„æ¨¡è¿ç§»ã€‚</p>\n<p>ä½ çš„æµç¨‹å˜æˆï¼š</p>\n<ol>\n<li>è·¯ç”± A ç”± ASP.NET æ ¸å¿ƒå¤„ç†ï¼Œå…¶ä»–æ‰€æœ‰è·¯ç”±ä»£ç†åˆ° MVC 5</li>\n<li>ä¸€æ¬¡ç§»åŠ¨ä¸€ä¸ªå‚ç›´åˆ‡ç‰‡</li>\n<li>å½“æ‰€æœ‰è·¯çº¿éƒ½è¢«è¿ç§»åï¼Œå…³é—­æ—§çš„ MVC 5 åº”ç”¨</li>\n</ol>\n<h3 id=\"æ­¥éª¤14ç”Ÿäº§åˆ‡æ¢æ¸…å•\">æ­¥éª¤14ï¼šç”Ÿäº§åˆ‡æ¢æ¸…å•</h3>\n<p><strong>ä¸»æŒ</strong><br />\nå†³å®š IIS åœ¨æµç¨‹ä¸­ã€IIS åœ¨æµç¨‹å¤–ï¼Œè¿˜æ˜¯å®¹å™¨ã€‚</p>\n<p><strong>å¯è§‚æµ‹æ€§</strong><br />\nåœ¨å¢é‡è¿ç§»è¿‡ç¨‹ä¸­ï¼Œä¸¤ä¸ªåº”ç”¨çš„æ—¥å¿—ã€æŒ‡æ ‡å’Œè¿½è¸ªéƒ½å¯¹é½äº†ã€‚</p>\n<p><strong>å®‰å…¨</strong><br />\nCookie è®¾ç½®ã€æ•°æ®ä¿æŠ¤å¯†é’¥ã€TLSã€å¤´éƒ¨ã€‚</p>\n<p><strong>æ€§èƒ½</strong><br />\nè¿ç§»åç¡®è®¤ç¼“å­˜å’Œä¼šè¯è¡Œä¸ºã€‚</p>\n<h2 id=\"ç»“è®º\">ç»“è®º</h2>\n<p>å°† ASP.NET MVC åº”ç”¨ä».NET Framework è¿ç§»åˆ°ç°ä»£.NET æ˜¯ä¸€é¡¹æˆ˜ç•¥æŠ•èµ„ï¼Œè€Œéæœºæ¢°å‡çº§ã€‚æ­£ç¡®æ‰§è¡Œæ—¶ï¼Œå®ƒèƒ½å¸¦æ¥æ›´æ¸…æ™°çš„æ¶æ„ã€æ€§èƒ½æå‡ã€äº‘å‡†å¤‡åº¦æå‡ä»¥åŠé•¿æœŸå¹³å°æ”¯æŒã€‚</p>\n<p>é€šè¿‡å°†è¿ç§»æ‹†åˆ†ä¸ºæœ‰è®¡åˆ’ã€å¯æµ‹è¯•çš„æ­¥éª¤ï¼Œå¹¶ä¼˜å…ˆå…³æ³¨æ¶æ„è€Œéè¯­æ³•ï¼Œå›¢é˜Ÿå¯ä»¥è‡ªä¿¡åœ°ç°ä»£åŒ–ï¼ŒåŒæ—¶ä¸æ‰°ä¹±ç”Ÿäº§ç³»ç»Ÿã€‚</p>\n<p>è¿™ç§æ–¹æ³•åœ¨ç°å®ä¼ä¸šè¿ç§»ä¸­å·²è¢«åå¤è¯æ˜æœ‰æ•ˆï¼Œå¹¶ä¸”ç¬¦åˆ Microsoft æ¨èçš„ ASP.NET åº”ç”¨ç°ä»£åŒ–æˆ˜ç•¥ã€‚</p>\n\n</div>\n<div id=\"MySignature\">\n    <hr />\n<br />\n<p>æœ¬æ–‡æ˜¯ç”±è‘¡è„åŸæŠ€æœ¯å¼€å‘å›¢é˜Ÿå‘å¸ƒï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼š<a href=\"https://www.grapecity.com.cn/\" target=\"_blank\">è‘¡è„åŸå®˜ç½‘</a></p>\n<!--p style=\"font-size: 16px; font-family: å¾®è½¯é›…é»‘, é»‘ä½“, Arial; color: #000\">äº†è§£ä¼ä¸šçº§ä½ä»£ç å¼€å‘å¹³å°ï¼Œè¯·å‰å¾€<a href=\"https://www.grapecity.com.cn/solutions/huozige\" target=\"_blank\">æ´»å­—æ ¼</a>\n</p><p style=\"font-size: 16px; font-family: å¾®è½¯é›…é»‘, é»‘ä½“, Arial; color: #000\">äº†è§£å¯åµŒå…¥æ‚¨ç³»ç»Ÿçš„åœ¨çº¿ Excelï¼Œè¯·å‰å¾€<a href=\"https://www.grapecity.com.cn/developer/spreadjs\" target=\"_blank\">SpreadJSçº¯å‰ç«¯è¡¨æ ¼æ§ä»¶</a></p>\n<p style=\"font-size: 16px; font-family: å¾®è½¯é›…é»‘, é»‘ä½“, Arial; color: #000\">äº†è§£åµŒå…¥å¼çš„å•†ä¸šæ™ºèƒ½å’ŒæŠ¥è¡¨è½¯ä»¶ï¼Œè¯·å‰å¾€<a href=\"https://www.grapecity.com.cn/solutions/wyn\" target=\"_blank\">Wyn Enterprise\n</a></p-->\n\n<br />\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-15 10:55</span>&nbsp;\n<a href=\"https://www.cnblogs.com/powertoolsteam\">è‘¡è„åŸæŠ€æœ¯å›¢é˜Ÿ</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">0</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "vivo å¾®æœåŠ¡æ¶æ„å®è·µä¹‹ Dubbo æ€§èƒ½ä¼˜åŒ–",
      "link": "https://www.cnblogs.com/vivotech/p/19486239",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/vivotech/p/19486239\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-15 10:52\">\n    <span>vivo å¾®æœåŠ¡æ¶æ„å®è·µä¹‹ Dubbo æ€§èƒ½ä¼˜åŒ–</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                    <div id=\"cnblogs_post_description\" style=\"display: none;\">\n        \n        åœ¨JavaæŠ€æœ¯æ ˆåœºæ™¯ï¼Œvivoä¸»è¦åŸºäº Apache Dubbo æ¡†æ¶æ¥ä½œä¸ºå¾®æœåŠ¡ä¹‹é—´çš„é€šä¿¡æ¡¥æ¢ï¼Œåœ¨å†…éƒ¨ä¸šåŠ¡çš„å¤§è§„æ¨¡å®è·µè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç¢°åˆ°äº†è´¨é‡ã€æ€§èƒ½å’Œå®¹é‡ç­‰æ–¹é¢çš„æŒ‘æˆ˜ï¼Œé€šè¿‡ä¸€ç³»åˆ—çš„æ‰©å±•ä¸ä¼˜åŒ–ï¼Œè¾ƒå¥½çš„è§£å†³äº†ç›¸å…³é—®é¢˜ï¼ŒåŠ©åŠ›ä¸šåŠ¡æ›´å¥½ä¿éšœè´¨é‡ï¼ŒèŠ‚çœç®—åŠ›æˆæœ¬ï¼Œæå‡ç ”å‘æ•ˆç‡ã€‚\n    </div>\n<div class=\"blogpost-body blogpost-body-html\" id=\"cnblogs_post_body\">\n<blockquote>ä½œè€…ï¼šäº’è”ç½‘ä¸­é—´ä»¶å›¢é˜Ÿ-Zhang Zhenwei<br />æœ¬æ–‡ä¸º2025å¹´ vivo å¼€å‘è€…å¤§ä¼šäº’è”ç½‘æŠ€æœ¯ä¸“åœºåˆ†äº«å†…å®¹ä¹‹ä¸€ï¼Œåœ¨å¾®ä¿¡å…¬ä¼—å·ã€Švivoäº’è”ç½‘æŠ€æœ¯ã€‹å¯¹è¯æ¡†å›å¤ã€2025VDCã€‘è·å– 2025VDC äº’è”ç½‘æŠ€æœ¯ä¼šåœºè®®é¢˜ç›¸å…³èµ„æ–™ã€‚<br /><br />åœ¨JavaæŠ€æœ¯æ ˆåœºæ™¯ï¼Œvivoä¸»è¦åŸºäº Apache Dubbo æ¡†æ¶æ¥ä½œä¸ºå¾®æœåŠ¡ä¹‹é—´çš„é€šä¿¡æ¡¥æ¢ï¼Œåœ¨å†…éƒ¨ä¸šåŠ¡çš„å¤§è§„æ¨¡å®è·µè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç¢°åˆ°äº†è´¨é‡ã€æ€§èƒ½å’Œå®¹é‡ç­‰æ–¹é¢çš„æŒ‘æˆ˜ï¼Œé€šè¿‡ä¸€ç³»åˆ—çš„æ‰©å±•ä¸ä¼˜åŒ–ï¼Œè¾ƒå¥½çš„è§£å†³äº†ç›¸å…³é—®é¢˜ï¼ŒåŠ©åŠ›ä¸šåŠ¡æ›´å¥½ä¿éšœè´¨é‡ï¼ŒèŠ‚çœç®—åŠ›æˆæœ¬ï¼Œæå‡ç ”å‘æ•ˆç‡ã€‚</blockquote>\n<p>&nbsp;</p>\n<p>1åˆ†é’Ÿçœ‹å›¾æŒæ¡æ ¸å¿ƒè§‚ç‚¹ğŸ‘‡</p>\n\n<img class=\"lazyload\" />\n<p>&nbsp;</p>\n\n<img class=\"lazyload\" />\n<p><em>å›¾1 VS å›¾2ï¼Œæ‚¨æ›´å€¾å‘äºå“ªå¼ å›¾æ¥è¾…åŠ©ç†è§£å…¨æ–‡å‘¢ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€ã€‚</em></p>\n<p>&nbsp;</p>\n<h2>ä¸€ã€Dubbo åœ¨ vivo çš„æ¼”è¿›å†ç¨‹</h2>\n<h2>1.1 vivo å¾®æœåŠ¡ç°çŠ¶</h2>\n\n<img class=\"lazyload\" />\n<p>vivoè‡ª2015å¹´é€šè¿‡å¾®æœåŠ¡æ¶æ„å‡çº§ä»¥èµ‹èƒ½ä¸šåŠ¡å¢é•¿ï¼Œé€šè¿‡å…¨ç½‘æ²»ç†ï¼Œäº2018å¹´å®Œæˆäº†å…¨ç½‘JavaæŠ€æœ¯æ ˆRPCæ¡†æ¶ç»Ÿä¸€ä¸ºDubboã€‚ ç›®å‰ï¼Œè¯¥æ¶æ„é«˜æ•ˆæ”¯æ’‘äº†5äº¿ç”¨æˆ·ã€è¦†ç›–60+åœ°åŒºçš„ä¸šåŠ¡ä½“é‡ï¼Œå®ç°äº†ä¸‡çº§å¾®æœåŠ¡åœ¨åä¸‡çº§æœºå™¨ä¸Šçš„ç¨³å®šè¿è¡Œï¼Œæ—¥å‡RPCè°ƒç”¨é‡é«˜è¾¾8000äº¿æ¬¡ã€‚</p>\n<p>&nbsp;</p>\n<h2>1.2 Dubboåœ¨vivoçš„æ¼”è¿›å†å²</h2>\n\n<img class=\"lazyload\" />\n<p>Dubbo æ˜¯ä¸€æ¬¾ RPC æœåŠ¡å¼€å‘æ¡†æ¶ï¼Œä¸»è¦ç”¨äºè§£å†³å¾®æœåŠ¡æ¶æ„ä¸­çš„é€šä¿¡ä¸æœåŠ¡æ²»ç†é—®é¢˜ã€‚å®ƒæä¾›äº†æœåŠ¡å®šä¹‰ï¼ŒæœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡ã€æµé‡ç®¡æ§ç­‰ä¸°å¯Œèƒ½åŠ›ã€‚vivoåœ¨2015å¹´ï¼Œå¼•å…¥å¼€æºç¤¾åŒºDubboä½œä¸ºJavaæŠ€æœ¯æ ˆRPCæ¡†æ¶ã€‚è€Œéšä¸šåŠ¡è§„æ¨¡å‘å±•ï¼Œä¸šåŠ¡ä¾§æµ®ç°æ¡†æ¶ç‰ˆæœ¬ç¢ç‰‡åŒ–ç°è±¡ï¼Œäº§ç”Ÿæ²»ç†å›°éš¾ï¼Œç»´æŠ¤æˆæœ¬é«˜ç­‰é—®é¢˜ã€‚ åœ¨19å¹´ï¼Œvivoå¼•å…¥å¼€æºç¤¾åŒº2.7.* ç‰ˆæœ¬å‘å¸ƒä½œä¸ºç¬¬ä¸€ä¸ªåŸºçº¿ç‰ˆæœ¬ï¼Œå¯¹ä¸šåŠ¡ä¾§è¿›è¡Œäº†ç‰ˆæœ¬æ”¶æ•›ã€‚éšåå‘å¸ƒä¸¤ä¸ªå¤§åŸºçº¿ç‰ˆæœ¬ï¼Œåˆ†åˆ«ä¸ºå»ºè®¾ä¸‰ä¸­å¿ƒåˆ†ç¦»èƒ½åŠ›ï¼Œå’Œåº”ç”¨çº§æ³¨å†Œå‘ç°èƒ½åŠ›ã€‚</p>\n<p>&nbsp;</p>\n<h2>1.3 Dubboæ‰§è¡Œæ ¸å¿ƒé“¾è·¯ï¼ˆæ¦‚è¦ï¼‰</h2>\n\n<img class=\"lazyload\" />\n<p>æˆ‘ä»¬å…ˆç®€è¦ä»‹ç»ä¸€ä¸‹Dubboçš„æ•´ä½“æµç¨‹ã€‚ æµç¨‹å¯åˆ†ä¸ºä¸Šä¸‹ä¸¤éƒ¨åˆ†ã€‚ä¸ŠåŠéƒ¨åˆ†å‘ˆç°äº†ç”±æä¾›æ–¹ã€æ¶ˆè´¹æ–¹ã€æ³¨å†Œä¸­å¿ƒå’Œå…ƒæ•°æ®ä¸­å¿ƒï¼ŒååŒå®Œæˆçš„æœåŠ¡æ³¨å†Œä¸å¼•å…¥ã€‚ ä¸‹åŠéƒ¨åˆ†ä¸ºè°ƒç”¨æµç¨‹ã€‚Dubboé‡‡ç”¨å¾®å†…æ ¸ä¸æ’ä»¶åŒ–è®¾è®¡ï¼Œå†…éƒ¨å¤šä¸ªæŠ½è±¡å±‚æ¬¡ã€‚</p>\n<p>&nbsp;</p>\n<p> æ€»ä½“è€Œè¨€ï¼Œä¸€æ¬¡RPCæµç¨‹å¯åˆ†ä¸ºä¸¤ç±»ï¼š </p>\n<ul>\n<li>ä¸€æ˜¯å¯åŠ¨å³å°±ç»ªçš„é™æ€è¿‡ç¨‹ï¼ˆå¦‚ä»£ç†ç”Ÿæˆã€æœåŠ¡åˆ—è¡¨ç¼“å­˜ï¼‰ </li>\n<li>äºŒæ˜¯æ¯æ¬¡è°ƒç”¨å‡éœ€åŠ¨æ€è®¡ç®—çš„éƒ¨åˆ†ï¼ˆå¦‚è·¯ç”±ã€è´Ÿè½½å‡è¡¡ã€åºåˆ—åŒ–ï¼Œç¼–è§£ç ï¼‰ï¼Œè¿™äº›å¸¸æ˜¯æ€§èƒ½çƒ­ç‚¹ã€‚</li>\n\n</ul>\n<p>&nbsp;</p>\n<h2>äºŒã€Dubbo è·¯ç”±æ‰©å±•åŠä¼˜åŒ–</h2>\n<h2>2.1 Dubboè·¯ç”±ç®€ä»‹</h2>\n\n<img class=\"lazyload\" />\n<p>Dubboè·¯ç”±æ˜¯ä¸€å¥—åŸºäºè§„åˆ™çš„ç²¾ç»†åŒ–æµé‡æ²»ç†ç»„ä»¶ï¼Œå…¶å·¥ä½œæµç¨‹ç”±æœåŠ¡æ²»ç†ä¾§å‘Dubboä¸‹å‘è·¯ç”±ç­–ç•¥ï¼Œä»è€Œç¡®ä¿RPCè¯·æ±‚èƒ½å¤Ÿè¢«ç²¾å‡†çš„è·¯ç”±è‡³é¢„æœŸçš„æœåŠ¡å®ä¾‹åˆ—è¡¨ã€‚è¯¥æœºåˆ¶æ˜¯æ”¯æ’‘ç°åº¦å‘å¸ƒã€æœºæˆ¿å®¹ç¾ã€ç¯å¢ƒéš”ç¦»ç­‰æµé‡æ²»ç†èƒ½åŠ›çš„æŠ€æœ¯åŸºçŸ³ã€‚ å¼€æºç‰ˆæœ¬çš„Dubboæä¾›äº†åº”ç”¨çº§æ ‡ç­¾è·¯ç”±ã€æ¡ä»¶è·¯ç”±å’Œè„šæœ¬è·¯ç”±ç­‰æ ¸å¿ƒè·¯ç”±èƒ½åŠ›ã€‚æˆ‘ä»¬åœ¨å…¶åŸºç¡€ä¸Šï¼Œæ‰©å±•å®ç°äº†æ¥å£çº§æ ‡ç­¾è·¯ç”±ä¸å°±è¿‘è·¯ç”±ä¸¤ç§å¢å¼ºæœºåˆ¶ã€‚</p>\n<p>&nbsp;</p>\n<h2>2.2 å°±è¿‘è·¯ç”±</h2>\n<h3>2.2.1 å°±è¿‘è·¯ç”±èƒŒæ™¯è¯´æ˜</h3>\n\n<img class=\"lazyload\" />\n<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒåŒæœºæˆ¿å†…éƒ¨çš„ç½‘ç»œè°ƒç”¨å¹³å‡æ—¶å»¶åœ¨0.1mså·¦å³ï¼Œè€ŒåŒåŸå¤šæœºæˆ¿é—´çš„å¹³å‡æ—¶å»¶åœ¨1ms-5msï¼Œè·¨åœ°åŸŸæœºæˆ¿ä¹‹é—´çš„ç½‘ç»œæ—¶å»¶åˆ™æ›´å¤§ã€‚ å‡è®¾å†…éƒ¨æœåŠ¡å­˜åœ¨å¤§é‡è·¨æœºæˆ¿è°ƒç”¨ï¼Œå°¤å…¶é’ˆå¯¹rtæ•æ„Ÿä¸šåŠ¡ï¼Œå¯èƒ½å› ä¸ºè¯·æ±‚å»¶æ—¶çš„å¢åŠ ï¼Œå½±å“æœåŠ¡è´¨é‡ç”¨æˆ·ä½“éªŒã€‚ å› æ­¤Dubboå°±è¿‘è·¯ç”±åº”è¿è€Œç”Ÿï¼Œå…¶å¯å®ç°RPCè¿‡ç¨‹ä¼˜å…ˆä½¿ç”¨åŒæœºæˆ¿è¿›è¡Œè°ƒç”¨ã€‚ å¯ä»¥çœ‹åˆ°ä¸Šå›¾ï¼Œæä¾›æ–¹åœ¨æ³¨å†Œä¼šä¸ŠæŠ¥æœºæˆ¿ä¿¡æ¯ï¼Œæ¶ˆè´¹æ–¹è°ƒç”¨ç»è¿‡å°±è¿‘è·¯ç”±ï¼ŒåªåŒ¹é…åŒæœºæˆ¿çš„æä¾›æ–¹èŠ‚ç‚¹åˆ—è¡¨ã€‚</p>\n<p>&nbsp;</p>\n<h3>2.2.2 å°±è¿‘è·¯ç”±åœºæ™¯åˆ†æ</h3>\n\n<img class=\"lazyload\" />\n<p>æˆ‘ä»¬çš„ç†æƒ³æ–¹æ¡ˆå¦‚ä¸Šæ–¹æ‰€ç¤ºï¼Œæ˜¯å¤šæœºæˆ¿å…±äº«æ³¨å†Œä¸­å¿ƒï¼Œæµé‡åœ¨å°±è¿‘è·¯ç”±çš„å¹²æ¶‰ä¸‹ï¼Œåœ¨åŒæœºæˆ¿å†…æµè½¬ã€‚ ä½†æ­¤æ–¹æ¡ˆé¢ä¸´ä¸‹æ–¹ä¸¤ä¸ªé—®é¢˜ï¼š å­˜åœ¨éƒ¨åˆ†ä¸šåŠ¡å•æœºæˆ¿éƒ¨ç½²ç°è±¡ï¼Œè‹¥å¼ºåˆ¶è¿›è¡ŒåŒæœºæˆ¿è°ƒç”¨ï¼Œä¼šé€ æˆæ¶ˆè´¹æ–¹æ— å¯ç”¨æä¾›è€…ã€‚ åŒæ—¶å­˜åœ¨å¤šæœºæˆ¿éå‡åŒ€éƒ¨ç½²ç°è±¡ï¼Œè‹¥æœºæˆ¿é—´éƒ¨ç½²è§„æ¨¡å·®å¼‚è¾ƒå¤§ï¼ŒåŒæœºæˆ¿è°ƒç”¨å¯èƒ½é€ æˆå°è§„æ¨¡éƒ¨ç½²æœºæˆ¿çš„ä¸šåŠ¡é›†ç¾¤é›ªå´©ã€‚</p>\n<p>&nbsp;</p>\n<h3>2.2.3 å°±è¿‘è·¯ç”±å®è·µ</h3>\n\n<img class=\"lazyload\" />\n<p>ä¸ºè§£å†³åˆšæ‰çš„é—®é¢˜ï¼Œæˆ‘ä»¬æœ€ç»ˆå®ç°å¦‚ä¸‹ï¼š</p>\n<ul>\n<li>ä¸­é—´ä»¶è”åˆCI/CDä¾§ï¼Œåœ¨æä¾›æ–¹æœåŠ¡éƒ¨ç½²æ—¶ä¸ŠæŠ¥æœºæˆ¿ä¿¡æ¯ã€‚</li>\n<li>æ¶ˆè´¹æ–¹è°ƒç”¨ç»è¿‡å°±è¿‘è·¯ç”±æ—¶ä¼šéå†æä¾›æ–¹åˆ—è¡¨ï¼Œä¼˜å…ˆç­›é€‰åŒæœºæˆ¿æä¾›æ–¹å®ä¾‹ã€‚</li>\n<li>æ–°å¢é˜ˆå€¼åˆ¤æ–­ï¼Œå½“åŒæœºæˆ¿æä¾›æ–¹æœºå™¨è§„æ¨¡ä½äºé˜ˆå€¼æ—¶ï¼Œè·¯ç”±ä¼šè‡ªåŠ¨é™çº§è¿›è¡Œå…¨é‡è®¿é—®ã€‚è¿™æ ·å¯ä»¥æœ‰æ•ˆé¿å…å•æœºæˆ¿éƒ¨ç½²çš„æ— æä¾›è€…é—®é¢˜ ï¼Œä»¥åŠé™ä½éå‡åŒ€éƒ¨ç½²æ—¶çš„é›†ç¾¤é›ªå´©é£é™©ã€‚</li>\n\n</ul>\n<p>&nbsp;</p>\n<p>ç”¨ä¸Šè¾¹çš„ä¸‰ä¸ªè¯·æ±‚ä¸¾ä¾‹ï¼Œåœ¨å°±è¿‘è·¯ç”±é˜¶æ®µï¼š </p>\n<ul>\n<li><strong>è¯·æ±‚1 </strong>å‘ç°åŒæœºæˆ¿æä¾›è€…éƒ¨ç½²è§„æ¨¡è¶…è¿‡é˜ˆå€¼ï¼Œå±äºå®‰å…¨è°ƒç”¨ï¼Œç›´æ¥è¿‡æ»¤å‡º01æœºæˆ¿èŠ‚ç‚¹ã€‚ </li>\n<li><strong>è¯·æ±‚2 </strong>å‘ç°åŒæœºæˆ¿æ— å¯ç”¨æä¾›è€…ï¼Œåˆ™ç›´æ¥è§¦å‘é™çº§è§„åˆ™ï¼Œè¿”å›å…¨é‡èŠ‚ç‚¹ã€‚</li>\n<li><strong>è¯·æ±‚3 </strong>åœ¨å°±è¿‘è·¯ç”±é˜¶æ®µï¼Œå‘ç°åŒæœºæˆ¿è™½æœ‰å¯ç”¨æä¾›è€…éƒ¨ç½²ï¼Œä½†è§„æ¨¡ä½äºé˜ˆå€¼ï¼Œä¹Ÿç›´æ¥è§¦å‘é™çº§è§„åˆ™ï¼Œè¿”å›å…¨é‡èŠ‚ç‚¹ã€‚</li>\n\n</ul>\n<p>&nbsp;</p>\n<p>ç»¼ä¸Šï¼Œå°±è¿‘è·¯ç”±é€šè¿‡ç®€å•çš„å…ƒæ•°æ®æ ‡è®°å’Œçµæ´»çš„é˜ˆå€¼è§„åˆ™ï¼Œå®ç°äº†æµé‡çš„è‡ªåŠ¨ä¼˜åŒ–ä¸éš”ç¦»ã€‚å…¶æ”¹é€ è¿‡ç¨‹å¯¹ä¸šåŠ¡ä»£ç æ— ä¾µå…¥ï¼Œå¹¶å¸¦æ¥å»¶è¿Ÿé™ä½ã€ç½‘ç»œå¸¦å®½æˆæœ¬ä¸‹é™ã€ç¨³å®šæ€§æå‡çš„å·¨å¤§æ”¶ç›Šã€‚</p>\n<p>&nbsp;</p>\n<h2>2.3 æ ‡ç­¾è·¯ç”±èƒ½åŠ›è¯´æ˜</h2>\n\n<img class=\"lazyload\" />\n<p>æ¥ä¸‹æ¥æ˜¯æ ‡ç­¾è·¯ç”±ï¼Œæ ‡ç­¾è·¯ç”±æ˜¯ä¸€ç§åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ç”¨äºå®ç°æµé‡ç²¾ç»†æ§åˆ¶çš„æœåŠ¡æ²»ç†ç­–ç•¥ã€‚</p>\n<p>&nbsp;</p>\n<p>å…¶æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡æ§åˆ¶é¢ä¸ºæœåŠ¡å®ä¾‹æ‰“ä¸Šè‡ªå®šä¹‰æ ‡ç­¾ï¼Œæ ‡ç­¾è·¯ç”±æ ¹æ®æ¶ˆè´¹æ–¹è°ƒç”¨æ—¶æŒ‡å®šçš„æ ‡ç­¾ï¼Œå°†è¯·æ±‚æµé‡è·¯ç”±åˆ°åŒ¹é…è¿™äº›æ ‡ç­¾çš„æä¾›æ–¹å®ä¾‹ã€‚ åœ¨Dubboè¯­ä¹‰ä¸­ï¼ŒDubboæ ‡ç­¾åˆ†ä¸ºåŠ¨æ€æ ‡ç­¾ä¸é™æ€æ ‡ç­¾ï¼šå¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬ç”¨é€šè¿‡é…ç½®ä¸­å¿ƒä¸‹å‘åŠ¨æ€æ ‡ç­¾ï¼Œæ ‡è®°gray1åŒ…å«aèŠ‚ç‚¹ï¼Œæ ‡è®°gray2åŒ…å«cèŠ‚ç‚¹ï¼Œç”¨äºæ ‡è¯†ä¸¤ä¸ªç°åº¦ç¯å¢ƒã€‚ è€Œæä¾›æ–¹éƒ¨ç½²æ—¶å¯ä»¥è‡ªå¸¦é™æ€æ ‡ç­¾ï¼Œé™æ€æ ‡ç­¾éšDubboæ³¨å†Œå‘ç°æµç¨‹è¢«æ¶ˆè´¹æ–¹åœ¨å†…å­˜ç¼“å­˜ã€‚</p>\n<p>&nbsp;</p>\n<p>ä»¥ä¸‰ä¸ªè¯·æ±‚ä¸¾ä¾‹ï¼š </p>\n<ul>\n<li><strong>è¯·æ±‚1</strong> æŒ‡å®šäº†gray1ï¼Œæ ‡ç­¾è·¯ç”±ä¼šéå†æä¾›æ–¹åˆ—è¡¨ä¸gray1å¯¹åº”çš„åˆ—è¡¨è¿›è¡Œäº¤é›†è®¡ç®—ï¼Œæœ€åè¿‡æ»¤aèŠ‚ç‚¹ã€‚ </li>\n<li><strong>è¯·æ±‚2</strong> æŒ‡å®šgray3ï¼Œæ ‡ç­¾è·¯ç”±å‘ç°æ— å¯ç”¨èŠ‚ç‚¹ï¼Œåˆ™è¯·æ±‚ä¼šé™çº§åˆ°æ— æ ‡ç­¾çš„æœºå™¨ï¼Œæœ€åè¿‡æ»¤b,d,eèŠ‚ç‚¹ã€‚ </li>\n<li><strong>è¯·æ±‚3</strong> æœªæŒ‡å®šæ ‡ç­¾ï¼Œè¯´æ˜æ˜¯åŸºçº¿ç¯å¢ƒè°ƒç”¨ï¼Œæ ‡ç­¾è·¯ç”±ä¼šç­›é€‰æœªæ‰“æ ‡ç­¾çš„æœºå™¨ï¼Œæœ€åè¿‡æ»¤b,d,eèŠ‚ç‚¹ã€‚</li>\n\n</ul>\n<p>&nbsp;</p>\n<h2>2.4 æˆ‘ä»¬å‘ç°çš„æ€§èƒ½é—®é¢˜</h2>\n\n<img class=\"lazyload\" />\n<p>åœ¨vivoå¤§è§„æ¨¡ Dubbo æä¾›æ–¹é›†ç¾¤åœºæ™¯ä¸‹ï¼Œé«˜å³°æœŸè¯¥ä¸šåŠ¡æ¶ˆè´¹æ–¹ä¾§åº”ç”¨çš„æ•´ä½“ CPU åˆ©ç”¨ç‡çº¦ä¸º60%ï¼Œè€Œå…¶ä¸­è´Ÿè½½å‡è¡¡æ¨¡å—åŠè·¯ç”±æ¨¡å—çš„ CPU å ç”¨ç‡ç«Ÿè¶…è¿‡äº†30%ï¼ é€šè¿‡ç«ç„°å›¾åˆ†æå¯ä»¥è§‚å¯Ÿåˆ°è¿™äº›é—®é¢˜å­˜åœ¨å…±æ€§ ï¼š ç›¸å…³æ–¹æ³•å‡æ¶‰åŠéå†æ“ä½œï¼Œå…¶æ—¶é—´å¤æ‚åº¦ä¸æä¾›æ–¹èŠ‚ç‚¹æ•°é‡æˆæ­£ç›¸å…³ã€‚åœ¨å¤§è§„æ¨¡é›†ç¾¤éƒ¨ç½²ç¯å¢ƒä¸‹ï¼Œè·¯ç”±ä¸è´Ÿè½½å‡è¡¡æ¨¡å—å› éå†è®¡ç®—äº§ç”Ÿäº†æ˜æ˜¾çš„èµ„æºæ¶ˆè€— ã€‚</p>\n<p>&nbsp;</p>\n<h3>2.4.1 è·¯ç”±ä¼˜åŒ–å®è·µ--å‡å°‘éå†è¿ç®—</h3>\n\n<img class=\"lazyload\" />\n<p><strong>ä¼˜åŒ–æ€è·¯</strong></p>\n<ul>\n<li>é™ä½æ¶ˆè´¹æ–¹ä¾§éå†æ¬¡æ•°ï¼šæˆ‘ä»¬å‘ç°éƒ¨åˆ†ä¸šåŠ¡æ˜¯å®Œå…¨ä¸ä½¿ç”¨åº”ç”¨çº§æ ‡ç­¾è·¯ç”±çš„ï¼Œè€Œä¸ºäº†æ”¯æŒé™æ€æ ‡ç­¾åœºæ™¯ï¼Œåº”ç”¨çº§è·¯ç”±å¯¹äºä¸å¸¦æ ‡ç­¾çš„è¯·æ±‚ï¼Œè¿˜æ˜¯éœ€è¦å…¨é‡éå†ï¼Œä»¥ç­›é€‰æ— é™æ€æ ‡ç­¾çš„èŠ‚ç‚¹ã€‚è¿™éƒ¨åˆ†æ— æ•ˆéå†ä¼šé€ æˆç®—åŠ›ç©ºè½¬æµªè´¹ã€‚å› æ­¤æˆ‘ä»¬ç¬¬ä¸€ä¸ªä¼˜åŒ–æ˜¯å¯¹æ­¤ç±»ä¸šåŠ¡å…³é—­äº†åº”ç”¨çº§è·¯ç”±ã€‚</li>\n\n</ul>\n<p>&nbsp;</p>\n<ul>\n<li>æ ¹æ®ç«ç„°å›¾æˆ‘ä»¬äº†è§£åˆ°ï¼Œåœ¨è´Ÿè½½å‡è¡¡ä¸­ï¼Œè´Ÿè½½å‡è¡¡å™¨éœ€è¦å…¨é‡éå†èŠ‚ç‚¹ä»¥è·å–æƒé‡ã€‚é‚£ä¹ˆè¿™æ—¶æˆ‘ä»¬å¯ä»¥è¯•å›¾é™ä½å‚ä¸è´Ÿè½½å‡è¡¡è®¡ç®—çš„èŠ‚ç‚¹æ•°ï¼šåœ¨è´Ÿè½½å‡è¡¡å‰ï¼Œæˆ‘ä»¬æ–°å¢äº†è™šæ‹Ÿåˆ†ç»„ã€‚å½“è·¯ç”±ç­›é€‰åçš„å®ä¾‹è§„æ¨¡è¶…è¿‡é˜ˆå€¼åï¼Œè™šæ‹Ÿåˆ†ç»„æ¨¡å—ä¼šå°†å®ä¾‹åˆ—è¡¨æ‹†åˆ†æˆå¤šä¸ªå°è§„æ¨¡åˆ†ç»„ï¼Œé€šè¿‡å¯¹åˆ†ç»„éšæœºé€‰æ‹©ï¼Œå€æ•°çº§é™ä½äº†è¿›å…¥è´Ÿè½½å‡è¡¡çš„èŠ‚ç‚¹æ•°ï¼Œé™ä½äº†è´Ÿè½½å‡è¡¡éå†æ¬¡æ•°ã€‚</li>\n\n</ul>\n<p>&nbsp;</p>\n<h3>2.4.2 è·¯ç”±ä¼˜åŒ–å®è·µ</h3>\n<p><strong>1.å¼•å…¥ä½å›¾ç¼“å­˜</strong></p>\n\n<img class=\"lazyload\" />\n<p>ç”±ç«ç„°å›¾ç°è±¡å‘ç°ï¼Œæ— è®ºæ˜¯å°±è¿‘è·¯ç”±ï¼Œè¿˜æ˜¯æ ‡ç­¾è·¯ç”±ï¼Œç­›é€‰æµç¨‹ä»¥åŠäº¤é›†è®¡ç®—æµç¨‹ä¾ç„¶å­˜åœ¨å¤§é‡éå†æ“ä½œå¸¦æ¥ç®—åŠ›æŸè€—ã€‚é¦–å…ˆå¼•å…¥ç¼“å­˜å‡å°‘éå†ã€‚</p>\n<p>&nbsp;</p>\n<p>å¯¹äºæ ‡ç­¾è·¯ç”±ï¼Œå¯ä»¥å¯¹æä¾›è€…èŠ‚ç‚¹åšå¦‚ä¸‹åˆ†ç±»ï¼š å¸¦åŠ¨æ€æ ‡ç­¾çš„èŠ‚ç‚¹ï¼Œå¸¦é™æ€æ ‡ç­¾çš„èŠ‚ç‚¹ï¼Œæœªæ‰“æ ‡ç­¾çš„èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥æå‰åœ¨å»ºç«‹è·¯ç”±å…ƒæ•°æ®çš„æ—¶å€™ï¼Œå¯¹ä¸åŒç§ç±»èŠ‚ç‚¹è¿›è¡Œç¼“å­˜ã€‚</p>\n<p>&nbsp;</p>\n<p>æˆ‘ä»¬åœ¨æ ‡ç­¾è·¯ç”±å†…è®¾ç½®äº†ç¼“å­˜å•å…ƒï¼Œå¯¹ä¸Šè¿°ä¸‰ç±»èŠ‚ç‚¹ï¼Œè¿›è¡Œäº†åˆ†ç±»ç¼“å­˜ã€‚ ç±»ä¼¼çš„ï¼Œåœ¨å°±è¿‘è·¯ç”±å†…ï¼Œå¯¹ä¸åŒæœºæˆ¿çš„æä¾›è€…åˆ—è¡¨ï¼Œç›´æ¥è¿›è¡Œç¼“å­˜ã€‚ åŒæ—¶ï¼Œæˆ‘ä»¬ä»¥ä½å›¾å½¢å¼ç»„ç»‡äº†ç¼“å­˜ã€‚</p>\n<p>&nbsp;</p>\n<p>ä»¥å›¾ä¸­è¯·æ±‚ä¸ºä¾‹ï¼Œå…¨é‡èŠ‚ç‚¹ä¸ºa,b,cè‡³jï¼Œ10ä¸ªèŠ‚ç‚¹ã€‚ åœ¨åº”ç”¨çº§æ ‡ç­¾è·¯ç”±ä¸­å…±ç»´æŠ¤å››ä»½ç¼“å­˜ï¼šæœ‰gray1ï¼Œgray2ï¼Œé™æ€æ ‡ç­¾ä½å›¾ï¼Œæ— æ ‡ç­¾ä½å›¾ã€‚ç±»ä¼¼çš„ï¼Œæ¥å£çº§ç»´æŠ¤ä¸¤ä»½ï¼Œåˆ†åˆ«ä¸ºgrayAæ ‡ç­¾ä½å›¾ï¼Œä¸æ— æ ‡ç­¾ä½å›¾ã€‚æœ€åæ˜¯å°±è¿‘è·¯ç”±ï¼Œç»´æŠ¤æœºæˆ¿çº§åˆ«çš„ä½å›¾ç¼“å­˜ã€‚</p>\n<p>&nbsp;</p>\n<p>è¯·æ±‚ä¸€ä»loc1æœºæˆ¿å‘èµ·æºå¸¦åº”ç”¨çº§æ ‡ç­¾gray1ï¼Œæ¥å£çº§æ ‡ç­¾garyAã€‚ç»å†åº”ç”¨æ ‡ç­¾è·¯ç”±ä¸è¿ç®—ï¼Œå¯ç”¨åˆ—è¡¨ä¸ºa,b,gï¼Œç»è¿‡æ¥å£çº§è·¯ç”±ä¸è¿ç®—ï¼Œä¾ç„¶a,b,gã€‚ç»è¿‡å°±è¿‘è·¯ç”±ä¸è¿ç®—åï¼Œåªä¿ç•™abã€‚ç”±æ­¤æˆ‘ä»¬å®Œæˆäº†è·¯ç”±æ‰§è¡Œå¤æ‚åº¦ä»O(n) -&gt; O(1ï¼‰çš„æŒ‘æˆ˜ã€‚</p>\n<p>&nbsp;</p>\n<p><strong>2.ç¼“å­˜ä¸€è‡´æ€§</strong></p>\n\n<img class=\"lazyload\" />\n<p>&nbsp;</p>\n<p>æˆ‘ä»¬åœ¨è·¯ç”±åŠ å…¥epochæˆ³ï¼Œç”¨äºç¼“å­˜ç‰ˆæœ¬æ¯”å¯¹ã€‚ æ¶ˆè´¹æ–¹å‘èµ·è¯·æ±‚æ—¶ï¼Œä¼šæºå¸¦æœ€æ–°å·²ç»ä»¥ä½å›¾å½¢å¼å‚¨å­˜å¥½çš„æä¾›æ–¹åˆ—è¡¨ï¼Œä»¥åŠå¯¹åº”çš„epochæˆ³ã€‚æ¯åˆ°æ–°ä¸€çº§è·¯ç”±æ—¶ï¼Œæ–°è·¯ç”±ä¼šæ¯”å¯¹è‡ªèº«ç¼“å­˜epochæˆ³ä¸åˆå§‹epochæ˜¯å¦ä¸€è‡´ã€‚ å¦‚æœä¸€è‡´ï¼Œåˆ™è¯æ˜è§†å›¾æ˜¯ä¸€è‡´çš„ï¼Œç›´æ¥ä½¿ç”¨è‡ªèº«ä½å›¾ç¼“å­˜ä¸ä¸Šä¸€é˜¶æ®µçš„ä½å›¾ç»“æœè¿›è¡Œä¸ä½è¿ç®—ã€‚ å¦‚æœä¸ä¸€è‡´ï¼Œåˆ™è¯æ˜å½“å‰è·¯ç”±ç¼“å­˜å¾…æ›´æ–°ï¼Œé‚£ä¹ˆä¼šç›´æ¥å®æ—¶ç”¨æœ€æ–°è·¯ç”±é…ç½®è§„åˆ™ä¸ä¸Šä¸€é˜¶æ®µçš„è®¡ç®—çš„ä½å›¾ç»“æœè¿›è¡Œéå†è®¡ç®—ã€‚</p>\n<p>&nbsp;</p>\n<p><strong>3.ä¸»åŠ¨ç¼“å­˜æ›´æ–°ç­–ç•¥</strong></p>\n\n<img class=\"lazyload\" />\n<p>&nbsp;</p>\n<p>åœ¨æä¾›æ–¹æŒç»­å‘å¸ƒè¿‡ç¨‹ä¸­ï¼Œæ¶ˆè´¹æ–¹æŒç»­è¿›è¡ŒæœåŠ¡å¼•å…¥ï¼ŒæœåŠ¡å­—å…¸ä¾§ä¼šåŒæ­¥åˆ·æ–°æœ€æ–°çš„Invokeråˆ—è¡¨ï¼Œå¹¶è®¡ç®—æ–°çš„epochæˆ³ï¼Œå¹¶å°†æœ€æ–°çš„invokeråˆ—è¡¨æ›´æ–°é€šçŸ¥è‡³è·¯ç”±å™¨ï¼Œç”¨äºæå‰å»ºç«‹æœ€æ–°ç¼“å­˜ï¼ŒåŒæ—¶è·¯ç”±å™¨æ›´æ–°ä¸æœåŠ¡å­—å…¸ä¸€è‡´çš„epochã€‚</p>\n<p>&nbsp;</p>\n<h2>2.5 è·¯ç”±ä¼˜åŒ–æ€»ç»“</h2>\n\n<img class=\"lazyload\" />\n<p>&nbsp;</p>\n<ol>\n<li>vivoé€šè¿‡å»ºè®¾å°±è¿‘è·¯ç”±èƒ½åŠ›ï¼Œæ˜¾è‘—é™ä½äº†RTæ•æ„Ÿæ€§ä¸šåŠ¡çš„è¯·æ±‚å»¶è¿Ÿï¼ŒåŒæ—¶å¢å¼ºäº†ä¸šåŠ¡çš„å¯ç”¨æ€§ä¸å¤šæœºæˆ¿å®¹ç¾èƒ½åŠ›ã€‚</li>\n<li>é’ˆå¯¹è·¯ç”±é“¾ï¼Œæˆ‘ä»¬ä»ä¸¤å¤§æ–¹å‘è¿›è¡Œäº†ç³»ç»Ÿæ€§ä¼˜åŒ–ï¼š <br /><strong>- ç²¾ç®€é“¾è·¯ï¼Œ</strong>å¹¶æ–°å¢è™šæ‹Ÿåˆ†ç»„ï¼Œå‡å°‘éå†çš„ç®—åŠ›æ¶ˆè€—ã€‚ <br /><strong>- å¼•å…¥ä½å›¾ç¼“å­˜ç»“æ„ï¼Œ</strong>å¤§å¹…åŠ é€Ÿè·¯ç”±äº¤é›†è®¡ç®—é€Ÿåº¦ï¼Œä¾æ‰˜ä¸»åŠ¨ç¼“å­˜æ›´æ–°ä¸ epoch ç‰ˆæœ¬æ¯”å¯¹æœºåˆ¶ï¼Œä¿è¯äº†ç¼“å­˜è§†å›¾çš„å¼ºä¸€è‡´æ€§ã€‚</li>\n\n</ol>\n<p>&nbsp;</p>\n<p><strong>ä¼˜åŒ–æ•ˆæœï¼š</strong> éšç€æœåŠ¡æä¾›æ–¹è§„æ¨¡ä¸æ–­æ‰©å¤§ï¼ŒCPU ä½¿ç”¨ç‡å’Œ TPS æ€§èƒ½æå‡æ•ˆæœæ„ˆå‘æ˜¾è‘—ã€‚åœ¨ä¸¤åƒèŠ‚ç‚¹è§„æ¨¡ä¸‹ï¼ŒTPS æå‡è¶…100%ï¼ŒCPU åˆ©ç”¨ç‡ä¹Ÿé™ä½27%</p>\n<p>&nbsp;</p>\n<h2>ä¸‰ã€Dubboè´Ÿè½½å‡è¡¡æ‰©å±•åŠä¼˜åŒ–</h2>\n<p>åœ¨ä¸€æ¬¡RPCè°ƒç”¨ç»è¿‡è·¯ç”±ç­›é€‰åï¼Œæ¶ˆè´¹è€…ç«¯å¿…é¡»ä»å¤šä¸ªæœåŠ¡å®ä¾‹ä¸­ï¼Œé€‰æ‹©ä¸€ä¸ªèŠ‚ç‚¹æ¥å‘èµ·è¯·æ±‚ã€‚è¿™ä¸ªé€‰æ‹©ç­–ç•¥ï¼Œå¯èƒ½ç›´æ¥å½±å“äº†ç³»ç»Ÿçš„ååé‡ã€å“åº”å»¶è¿Ÿã€èµ„æºåˆ©ç”¨ç‡ç­‰æ ¸å¿ƒæŒ‡æ ‡ã€‚ è€ŒDubboçš„è´Ÿè½½å‡è¡¡å™¨ï¼Œæ­£æ˜¯æ‰¿æ‹…è¿™ä¸€å…³é”®å†³ç­–çš„æ ¸å¿ƒç»„ä»¶ã€‚</p>\n<p>&nbsp;</p>\n<h2>3.1 Dubboè´Ÿè½½å‡è¡¡ä¼˜åŒ–èƒŒæ™¯ä»‹ç»</h2>\n\n<img class=\"lazyload\" />\n<p>&nbsp;</p>\n<p>åœ¨vivoçš„äº’è”ç½‘ä¸šåŠ¡é«˜é€Ÿå‘å±•è¿‡ç¨‹ä¸­ï¼Œç”±äºæŒç»­å¼•å…¥äº†ä¸åŒå¹´ä»½ã€ä¸åŒä¾›åº”å•†çš„æœåŠ¡å™¨ï¼Œå¹¶è€ƒè™‘åˆ°æ‘©å°”å®šå¾‹çš„å½±å“ï¼Œè¿™äº›æœåŠ¡å™¨ä¹‹é—´å­˜åœ¨æ˜¾è‘—çš„ç®—åŠ›å·®å¼‚ã€‚ å°½ç®¡å„å®ä¾‹æ¥æ”¶çš„æµé‡åŸºæœ¬ä¸€è‡´ï¼Œä½†åœ¨ä¸šåŠ¡é«˜å³°æœŸï¼Œå®ä¾‹é—´CPUåˆ©ç”¨ç‡è¡¨ç°å‡ºæ˜æ˜¾çš„ä¸å¹³è¡¡ç°è±¡ã€‚ è¯¥ç°è±¡å¯¼è‡´ä¸šåŠ¡é›†ç¾¤æš´éœ²å‡ºè‹¥å¹²é—®é¢˜ï¼šå¦‚æ•´ä½“é›†ç¾¤ç®—åŠ›åˆ©ç”¨ä¸å……åˆ†ï¼Œä½ç®—åŠ›æœºå™¨å› è´Ÿè½½è¿‡é«˜æ˜“å¼•å‘è¶…æ—¶ï¼Œå¹¶ä¸”é¢‘ç¹è§¦å‘è´Ÿè½½å‘Šè­¦è¢«è¿«äººå·¥å¹²é¢„ç­‰ã€‚</p>\n<p>&nbsp;</p>\n<p><strong>å¤‡æ³¨ï¼š</strong> å¯ä»¥çœ‹åˆ°Dubboå†…ç½®è‡ªé€‚åº”è´Ÿè½½ç­–ç•¥ï¼Œå®ƒçš„ç†å¿µæ˜¯èƒ½å¤ŸåŸºäºæœåŠ¡ç«¯çš„å¤šä¸ªå®æ—¶æŒ‡æ ‡ï¼ŒåŠ¨æ€è®¡ç®—èŠ‚ç‚¹è´Ÿè½½ï¼Œå¹¶é€‰æ‹©ç©ºé—²èŠ‚ç‚¹è¿›è¡Œè°ƒç”¨ï¼Œå®ç°æ™ºèƒ½åŒ–çš„å¼¹æ€§è´Ÿè½½è°ƒåº¦ã€‚ ä½†æ˜¯è¿™é‡Œéœ€è¦è¯´æ˜ï¼Œvivoå»ºè®¾è‡ªé€‚åº”ç­–ç•¥æ—¶æœŸè¾ƒæ—©ï¼ŒåŒæœŸå¼€æºç¤¾åŒºè‡ªé€‚åº”ç­–ç•¥å°šå¤„äºææ¡ˆé˜¶æ®µï¼Œåªå­˜åœ¨åˆå§‹çš„ç¤¾åŒºè®¨è®ºç‰ˆæœ¬ã€‚åç»­vivoå¯¹äºè‡ªé€‚åº”ç­–ç•¥èƒ½åŠ›çš„åˆ†æä¸å¢å¼ºæ˜¯åŸºäºæ­¤åŸå§‹ç‰ˆæœ¬æ€è·¯çš„è¿›è¡Œçš„ã€‚å½“å‰å¼€æºç¤¾åŒºå·²ç»æä¾›äº†æ­£å¼ç‰ˆæœ¬ï¼Œä¸vivoå®ç°å’ŒåŸå§‹å®ç°æœ‰è¾ƒå¤§å·®å¼‚ã€‚</p>\n<p>&nbsp;</p>\n<h2>3.2 ç¤¾åŒºè®¨è®ºç‰ˆè‡ªé€‚åº”è´Ÿè½½å‡è¡¡</h2>\n<h3>3.2.1 ç¤¾åŒºè®¨è®ºç‰ˆè‡ªé€‚åº”è´Ÿè½½å‡è¡¡æŠ€æœ¯æ–¹æ¡ˆ</h3>\n\n<img class=\"lazyload\" />\n<p>&nbsp;</p>\n<p>åŸå§‹æ–¹æ¡ˆæµç¨‹ç”±3éƒ¨åˆ†æ„æˆã€‚</p>\n<ol>\n<li>æä¾›æ–¹æ›´æ–°è‡ªèº«CPUåˆ©ç”¨ç‡ï¼Œæ¯æ¬¡æŒ‡æ ‡éšRPCç»“æœè¿”å›ã€‚</li>\n<li>æ¶ˆè´¹æ–¹å¼‚æ­¥è®¡ç®—æä¾›æ–¹è´Ÿè½½ï¼Œå¹¶å¯¹è´Ÿè½½è¿›è¡Œæ›´æ–°å¹¶ç¼“å­˜ã€‚</li>\n<li>æ¶ˆè´¹æ–¹ä½¿ç”¨P2Cç®—æ³•ï¼Œè¿™é‡Œå¯¹P2Cåšä¸€ä¸ªç®€å•çš„ä»‹ç»ï¼šæ¯æ¬¡è´Ÿè½½å‡è¡¡éšæœºæŒ‘é€‰ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œå¹¶ç›´æ¥é€‰æ‹©è´Ÿè½½è¾ƒå°çš„é‚£ä¸ªèŠ‚ç‚¹è¿›è¡Œè°ƒç”¨ã€‚</li>\n\n</ol>\n<p>&nbsp;</p>\n<p>å³ä¾§æ˜¯æ¶ˆè´¹æ–¹é‡‡ç”¨çš„åŸ‹ç‚¹æŒ‡æ ‡ï¼ŒåŒ…æ‹¬æä¾›æ–¹cpuè´Ÿè½½ï¼Œå“åº”æ—¶é—´ç­‰å‚æ•°ã€‚ ä¸‹è¾¹æ˜¯æ¶ˆè´¹æ–¹åŸºäºé‡‡é›†æŒ‡æ ‡å¯¹è´Ÿè½½è®¡ç®—çš„å…¬å¼ å¯ä»¥ç›´æ¥ç®€æ˜“ç†è§£ä¸ºæ¶ˆè´¹æ–¹è®¡ç®—çš„æä¾›æ–¹å®ä¾‹è´Ÿè½½å€¼ï¼Œä¸å®ä¾‹CPUè´Ÿè½½å€¼ï¼Œåœ¨é€”è¯·æ±‚æ•°ï¼ŒRTï¼Œå‘ˆæ­£ç›¸å…³ï¼›ä¸è¯·æ±‚æˆåŠŸç‡ï¼Œæƒé‡é…ç½®å€¼å‘ˆè´Ÿç›¸å…³ã€‚</p>\n<p>&nbsp;</p>\n<h3>3.2.2 ç¤¾åŒºè®¨è®ºç‰ˆè‡ªé€‚åº”è´Ÿè½½å‡è¡¡å‹æµ‹ç»“æœ</h3>\n\n<img class=\"lazyload\" />\n<p>&nbsp;</p>\n<p>ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œè‡ªé€‚åº”ç­–ç•¥ä½¿ä¸åŒç®—åŠ›çš„æœºå™¨åœ¨æµé‡æ‰¿è½½ä¸Šå‡ºç°æ¸…æ™°åˆ†å±‚ï¼Œä½“ç°äº†ç®—æ³•åŸºäºèŠ‚ç‚¹è´Ÿè½½è¿›è¡ŒåŠ¨æ€æµé‡è°ƒåº¦çš„æœ‰æ•ˆæ€§ã€‚ ä½†ä¹Ÿè§‚å¯Ÿåˆ°ï¼Œè¯¥ç‰ˆæœ¬ä¸­CPUåˆ©ç”¨ç‡å­˜åœ¨æ˜æ˜¾æ³¢åŠ¨ï¼Œæ­¤è¡Œä¸ºå¯èƒ½ä¼šå¼•å…¥æœåŠ¡è´¨é‡é£é™©ã€‚åˆæ­¥åˆ†æï¼Œåˆ©ç”¨ç‡éœ‡è¡åŸå› å¯èƒ½æ˜¯æµé‡è°ƒæ•´æœºåˆ¶å°šæœªå®ç°å¹³æ»‘è¿‡æ¸¡ã€‚</p>\n<p>&nbsp;</p>\n<h3>3.2.3 ç¤¾åŒºè®¨è®ºç‰ˆæ³¢åŠ¨åŸå› åˆ†æ</h3>\n\n<img class=\"lazyload\" />\n<p>&nbsp;</p>\n<p>ä»¥æœ€ç®€å•çš„åŒèŠ‚ç‚¹åœºæ™¯ä¸ºä¾‹ï¼šå‡è®¾å­˜åœ¨èŠ‚ç‚¹ P1 å’Œ P2ã€‚ åˆå§‹é˜¶æ®µï¼ŒP2 è´Ÿè½½è¾ƒé«˜ã€‚åœ¨æä¾›æ–¹å°†æ›´æ–°çš„è´Ÿè½½æŒ‡æ ‡è¿”å›ä¹‹å‰ï¼Œæ¶ˆè´¹æ–¹æŒç»­å°†è¯·æ±‚é›†ä¸­å‘å¾€è´Ÿè½½è¾ƒä½çš„ P1ï¼Œå¯¼è‡´ P1 çš„è´Ÿè½½è¿…é€Ÿå‡è‡³å³°å€¼ï¼Œè€Œ P2 æ­¤æ—¶æ— è°ƒç”¨ï¼Œè´Ÿè½½æ‰å…¥æä½æ°´å¹³ã€‚ éšåï¼Œæ¶ˆè´¹æ–¹æ›´æ–°äº†è´Ÿè½½æ•°æ®ï¼Œä¸¤ä¸ªèŠ‚ç‚¹çš„è´Ÿè½½è§†å›¾çŠ¶æ€å‘ç”Ÿåè½¬ï¼Œä»¥æ­¤å¾ªç¯å¾€å¤ã€‚</p>\n<p>&nbsp;</p>\n<p>åŸºäºä¸Šè¿°åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸¤ä¸ªå…³é”®æ–¹å‘ç€æ‰‹ä¼˜åŒ–ï¼š</p>\n<ol>\n<li>æ”¹è¿› P2C çš„æµé‡åˆ†é…æœºåˆ¶ï¼Œé¿å…èŠ‚ç‚¹åœ¨çŸ­æ—¶é—´å†…è¢«é›†ä¸­è®¿é—®ï¼›</li>\n<li>æ˜¯å¢å¼ºæŒ‡æ ‡å¹³æ»‘æµè½¬èƒ½åŠ›ï¼ŒæŠ‘åˆ¶çŸ­æœŸæŠ–åŠ¨å¸¦æ¥çš„å†³ç­–å¹²æ‰°ï¼Œä»è€Œæå‡ç³»ç»Ÿçš„æ•´ä½“ç¨³å®šæ€§ã€‚</li>\n\n</ol>\n<p>&nbsp;</p>\n<h2>3.3 vivoç‰ˆè‡ªé€‚åº”è´Ÿè½½å‡è¡¡ä¼˜åŒ–</h2>\n\n<img class=\"lazyload\" />\n<p>&nbsp;</p>\n<ul>\n<li>å¯¹P2Cçš„æµé‡åˆ†å‘ç­–ç•¥è¿›è¡Œè°ƒæ•´ï¼šåŸæœ‰çš„æœºåˆ¶æ˜¯ä¸€ç§â€œèµ¢è€…é€šåƒâ€çš„æ¨¡å¼ï¼šç®—æ³•ç›´æ¥å°†æµé‡å…¨éƒ¨å¯¼å‘äº†å½“å‰è´Ÿè½½æœ€ä½çš„èŠ‚ç‚¹ã€‚ P2Cè¿‡ç¨‹ä¼šæ ¹æ®èŠ‚ç‚¹çš„è´Ÿè½½è®¡ç®—æ¦‚ç‡ç³»æ•°ï¼Œè´Ÿè½½ä½çš„èŠ‚ç‚¹è¢«é€‰ä¸­çš„æ¦‚ç‡æ›´é«˜ï¼Œä½†è´Ÿè½½é«˜çš„èŠ‚ç‚¹ä¹Ÿä¸ä¼šåƒä¹‹å‰ä¸€æ ·è¢«è¢«å®Œå…¨å¿½ç•¥ã€‚è¿™ä¸€æ”¹è¿›ä¸ä»…ä»æ ¹æºä¸Šæ¶ˆé™¤äº†æ‰€æœ‰æµé‡ç¬é—´æ¶Œå‘åŒä¸€èŠ‚ç‚¹æ‰€å¸¦æ¥çš„éœ‡è¡é£é™©ï¼Œä¹Ÿæ˜¾è‘—æå‡äº†é›†ç¾¤èµ„æºçš„æ•´ä½“åˆ©ç”¨ç‡ï¼Œå®ç°äº†P2CèŠ‚ç‚¹é—´è´Ÿè½½çš„â€œå‰Šå³°å¡«è°·â€ã€‚</li>\n\n</ul>\n<p>&nbsp;</p>\n<ul>\n<li>å°†è´Ÿè½½è®¡ç®—ä¸è´Ÿè½½è°ƒåº¦åˆ†ç¦»ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œè´Ÿè½½å‡è¡¡å¼•å…¥äº†ä¸€ä¸ªç‹¬ç«‹çš„æƒé‡è®¡ç®—å•å…ƒã€‚è¯¥å•å…ƒçš„æ ¸å¿ƒç›®æ ‡æ˜¯ç»´æŠ¤ä¸€ä¸ªç¨³å®šçš„ã€å…¨å±€çš„ã€æµé‡è°ƒåº¦è§†å›¾ã€‚ å®ƒçš„è®¾è®¡æ€è·¯æ˜¯ï¼šæ¶ˆè´¹æ–¹æ ¹æ®è´Ÿè½½å€¼ï¼Œè®¡ç®—ä¸€ä¸ªå¹³æ»‘çš„ï¼Œè¿è´¯å˜åŒ–çš„è™šæ‹Ÿæƒé‡ï¼Œä»è€Œé—´æ¥é€šè¿‡æ­¤è™šæ‹Ÿæƒé‡ï¼Œä½¿å¾—å½“å‰çš„æµé‡åˆ†é…è¿‡ç¨‹å§‹ç»ˆä¿æŒç¨³æ€ã€‚</li>\n\n</ul>\n<p>&nbsp;</p>\n<ul>\n<li>P2Cè¿‡ç¨‹å°†åŸºäºä¸Šè¿°è™šæ‹Ÿæƒé‡è¿›è¡ŒèŠ‚ç‚¹é€‰æ‹©ã€‚</li>\n\n</ul>\n<p>&nbsp;</p>\n<h2>3.4 vivoè‡ªé€‚åº”è´Ÿè½½å‡è¡¡å‹æµ‹æ•ˆæœå±•ç¤º</h2>\n\n<img class=\"lazyload\" />\n<p>&nbsp;</p>\n<p>å·¦ä¾§ä»å·¦è‡³å³ä¾æ¬¡å±•ç¤ºäº†éšæœºç®—æ³•ã€åŸå§‹ç‰ˆæœ¬è‡ªé€‚åº”ç­–ç•¥ï¼Œä»¥åŠvivoå†…éƒ¨ä¼˜åŒ–åçš„è‡ªé€‚åº”ç­–ç•¥ï¼Œåœ¨åŒç®—åŠ›é…ç½®é›†ç¾¤çš„å‹æµ‹ç¯å¢ƒä¸­çš„å‹æµ‹è¡¨ç°ï¼š vivoä¼˜åŒ–ç‰ˆæœ¬ä¸ä»…å®ç°äº†æ›´ä¼˜çš„æµé‡åˆ†å±‚ï¼Œè¿˜å°†å„èŠ‚ç‚¹CPUåˆ©ç”¨ç‡æ”¶æ•›è‡³åŸºæœ¬ä¸€è‡´çš„æ°´å¹³ï¼Œå¹¶å§‹ç»ˆä¿æŒç¨³å®šï¼Œä½¿å¾—é›†ç¾¤è¾¾æˆé«˜æ•ˆã€é«˜ååä¸”ç¨³å®šè¿è¡Œçš„ç†æƒ³çŠ¶æ€ã€‚</p>\n<p>&nbsp;</p>\n<p>å³ä¾§å‘ˆç°äº†åŸå§‹ç­–ç•¥ä¸vivoç‰ˆè‡ªé€‚åº”ç­–ç•¥ï¼Œç›¸å¯¹éšæœºç­–ç•¥åœ¨å¤šé¡¹æ ¸å¿ƒæŒ‡æ ‡ä¸Šçš„è¡¨ç°ï¼ŒåŒ…æ‹¬TPSã€å¹³å‡RTç­‰ï¼Œå¯çœ‹å‡ºæ­¤æ¬¡ä¼˜åŒ–æ•ˆæœæ˜¾è‘—ï¼Œå„é¡¹æŒ‡æ ‡å‡æœ‰å¤§å¹…æå‡ã€‚</p>\n<p>&nbsp;</p>\n<h2>3.5 vivoè‡ªé€‚åº”è´Ÿè½½å‡è¡¡ç”Ÿäº§ç¯å¢ƒä½¿ç”¨æ•ˆæœ</h2>\n\n<img class=\"lazyload\" />\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<ul>\n<li><strong>æå‡æœåŠ¡å®¹é‡ï¼š</strong>åœ¨åŒç­‰é›†ç¾¤è§„æ¨¡ä¸‹ï¼Œæ–°ç­–ç•¥å¯å°†é›†ç¾¤æµé‡ååä¸Šé™å¹³å‡æå‡çº¦15%ï¼Œæœ‰æ•ˆå¢å¼ºäº†æ•´ä½“é›†ç¾¤æ‰¿è½½èƒ½åŠ›ã€‚</li>\n<li><strong>æå‡æœåŠ¡è´¨é‡ï¼š</strong>æ¨å¹¿æ–°ç­–ç•¥åï¼Œç®—æ³•åœ¨é«˜å³°æœŸå¯æœ‰æ•ˆæŠ‘åˆ¶è¶…æ—¶ç‡ï¼Œè¯·æ±‚å¤±è´¥ç‡ä¸‹é™è¶…è¿‡50%ã€‚</li>\n<li><strong>å®ç°æœ‰æ•ˆé™æœ¬ï¼š</strong>æ–°ç®—æ³•é€šè¿‡æ›´ç²¾å‡†çš„æµé‡è°ƒåº¦ï¼Œæ˜¾è‘—èŠ‚çœäº†CPUèµ„æºå ç”¨ï¼Œé¢„è®¡æ¯å¹´å¯ä¸ºä¸šåŠ¡é™ä½ç™¾ä¸‡å…ƒçº§åˆ«çš„è®¡ç®—æˆæœ¬ã€‚</li>\n<li><strong>ä¼˜åŒ–è¿ç»´äººåŠ›æŠ•å…¥ï¼š</strong>æ–°è´Ÿè½½ç­–ç•¥å¤§å¹…å‡å°‘äº†ä½ç®—åŠ›æœºå™¨çš„åˆ©ç”¨ç‡å‘Šè­¦é¢‘ç‡ã€‚ä¸šåŠ¡æ–¹æ— éœ€åœ¨æµé‡é«˜å³°æœŸé—´ä¸“é—¨è¿›è¡Œé›†ç¾¤å®ä¾‹çš„é™æ€æƒé‡è°ƒæ•´ï¼Œå‡è½»äº†è¿ç»´è´Ÿæ‹…ã€‚</li>\n\n</ul>\n<p>&nbsp;</p>\n<h2>å››ã€æŠ€æœ¯æˆæœ</h2>\n\n<img class=\"lazyload\" />\n<p>&nbsp;</p>\n<p><strong>åœ¨Dubboè·¯ç”±å±‚é¢ï¼š</strong>æˆ‘ä»¬é‡ç‚¹è§£å†³ä¸¤å¤§<strong>ç—›ç‚¹</strong>ï¼š<strong>ä¸€æ˜¯</strong>è·¯ç”±ç­›é€‰æ—¶çš„å¤§é‡éå†æ“ä½œå¯¼è‡´æ¶ˆè´¹ç«¯CPUèµ„æºæµªè´¹ï¼Œ<strong>äºŒæ˜¯</strong>è·¨æœºæˆ¿è°ƒç”¨å¯¹RTæ•æ„Ÿä¸šåŠ¡çš„æ€§èƒ½å½±å“ã€‚ </p>\n<p>&nbsp;</p>\n<p>é’ˆå¯¹è·¯ç”±éå†æ•ˆç‡é—®é¢˜ï¼Œæˆ‘ä»¬å®æ–½4é¡¹ä¼˜åŒ–ï¼š</p>\n<ul>\n<li>å…³é—­æœªä½¿ç”¨çš„è·¯ç”±ï¼Œå‡å°‘æ— æ•ˆè®¡ç®—ï¼›</li>\n<li>å¼•å…¥ä½å›¾ç¼“å­˜æœºåˆ¶ï¼Œå°†è·¯ç”±ç­›é€‰å¤æ‚åº¦ä» O(n) é™è‡³ O(1)ï¼Œå¤§å¹…æå‡æ‰§è¡Œæ•ˆç‡ï¼›</li>\n<li>æ–°å¢åˆ†ç»„è·¯ç”±åŠŸèƒ½ï¼Œæœ‰æ•ˆå‡å°‘è¿›å…¥è´Ÿè½½å‡è¡¡æ¨¡å—çš„å®ä¾‹æ•°é‡ï¼Œå‡è½»åç»­å¤„ç†å‹åŠ›ã€‚</li>\n<li>å»ºè®¾å°±è¿‘è·¯ç”±èƒ½åŠ›ï¼Œæ˜¾è‘—æå‡äº†è·¨æœºæˆ¿è°ƒç”¨çš„ä¸šåŠ¡ä½“éªŒï¼Œæé«˜æœåŠ¡è´¨é‡ã€‚</li>\n\n</ul>\n<p>&nbsp;</p>\n<p><strong>åœ¨è´Ÿè½½å‡è¡¡æ–¹é¢ï¼š</strong>æˆ‘ä»¬åŸå…ˆé¢ä¸´ç€åŸé™æ€ç­–ç•¥éš¾ä»¥é€‚é…åº•å±‚è®¾æ–½å·®å¼‚ï¼Œå¯¼è‡´ç®—åŠ›åˆ©ç”¨ç‡ä½çš„é—®é¢˜ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬åŸºäºç¤¾åŒºç‰ˆæœ¬æ„å»ºäº†vivoè‡ªé€‚åº”è´Ÿè½½å‡è¡¡èƒ½åŠ›ï¼Œé‡ç‚¹ä¼˜åŒ–P2Cç®—æ³•å¹¶å¼•å…¥æƒé‡è®¡ç®—å•å…ƒï¼Œå®ç°æµé‡è‡ªé€‚åº”ä¸å¹³æ»‘è°ƒåº¦ï¼Œæœ€ç»ˆæ˜¾è‘—æå‡æœåŠ¡å®¹é‡ä¸è´¨é‡ï¼ŒåŒæ—¶å®ç°é™æœ¬å’ŒèŠ‚çº¦äººåŠ›çš„ç›®æ ‡ã€‚</p>\n<p>&nbsp;</p>\n<h2>äº”ã€æœªæ¥å±•æœ›</h2>\n\n<img class=\"lazyload\" />\n<p>&nbsp;</p>\n<p>æœ€åæ˜¯vivoå¯¹äºDubboæœªæ¥åœ¨å…¬å¸å†…æ¼”è¿›çš„ä¸€äº›è®¡åˆ’ä¸æ€è€ƒï¼š</p>\n<p>&nbsp;</p>\n<ul>\n<li><strong>æ¨è¿›Dubboä¸å¼€æºç¤¾åŒºç‰ˆæœ¬å¯¹é½ï¼š</strong> ç›®å‰å…¬å¸å†…éƒ¨çš„DubboåŸºçº¿ç‰ˆæœ¬åŸºäºå¼€æºç¤¾åŒº2.7.*æ„å»ºï¼Œè€Œç¤¾åŒºç°å·²æ¼”è¿›è‡³3.*ç‰ˆæœ¬ï¼Œç¤¾åŒº3.*ç‰ˆæœ¬å…¨é¢æ”¯æŒæ–°ä¸€ä»£é«˜æ€§èƒ½é€šä¿¡åè®®ï¼Œå…·å¤‡æ›´å¼ºçš„äº‘åŸç”Ÿç‰¹æ€§ã€‚é‚£ä¹ˆæœªæ¥æˆ‘ä»¬ä¹Ÿå°†æŒç»­æ¨è¿›vivoå†…éƒ¨åŸºçº¿ç‰ˆæœ¬å‡çº§ï¼Œå¼•å…¥æ›´å¤šä¼˜ç§€çš„å¼€æºèƒ½åŠ›ä¸æ¨¡å‹ï¼Œæ›´å¥½åœ°æ‹¥æŠ±äº‘åŸç”Ÿæ¶æ„ã€‚</li>\n\n</ul>\n<p>&nbsp;</p>\n<ul>\n<li><strong>æ„å»ºè·¨è¯­è¨€çš„ç»Ÿä¸€å¾®æœåŠ¡æ²»ç†å¹³å°ï¼š</strong> å½“å‰vivoçš„æœåŠ¡æ²»ç†èƒ½åŠ›ä¸»è¦å›´ç»•Javaå’ŒC++æŠ€æœ¯æ ˆï¼Œéšç€å…¬å¸ä¸šåŠ¡é«˜é€Ÿå‘å±•ï¼Œå¦‚Goã€Pythonç­‰è¯­è¨€é€æ¸å¹¿æ³›åº”ç”¨ã€‚ç›®å‰ï¼Œè·¨è¯­è¨€æœåŠ¡è°ƒç”¨çš„éœ€æ±‚æ˜¾è‘—å¢é•¿ï¼ŒåŒæ—¶ä¹Ÿå¸¦æ¥äº†æŠ€æœ¯æ ˆç¢ç‰‡åŒ–ã€æ²»ç†èƒ½åŠ›ä¸ååŒã€é…ç½®æ¨¡å‹ä¸ç»Ÿä¸€ã€å¼€å‘è®¤çŸ¥ä¸ä¸€è‡´ç­‰æŒ‘æˆ˜ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬è®¡åˆ’å»ºè®¾ä¸€å¥—æ ‡å‡†åŒ–çš„ã€è¯­è¨€æ— å…³çš„å¾®æœåŠ¡æ²»ç†å¹³å°ã€‚è¯¥å¹³å°å°†æä¾›ç»Ÿä¸€çš„æœåŠ¡å‘ç°ã€æµé‡ç›‘æ§ã€æµé‡æ²»ç†ä»¥åŠæœåŠ¡è§‚æµ‹èƒ½åŠ›ã€‚çœŸæ­£å®ç°â€œå¤šè¯­è¨€å¼€å‘ï¼Œä¸€ä½“åŒ–æ²»ç†â€çš„ç›®æ ‡ï¼Œä»¥é™ä½æœªæ¥çš„ç³»ç»Ÿå¤æ‚æ€§ä¸è¿ç»´æˆæœ¬ã€‚</li>\n\n</ul>\n</div>\n<div id=\"MySignature\">\n    åˆ†äº« vivo äº’è”ç½‘æŠ€æœ¯å¹²è´§ä¸æ²™é¾™æ´»åŠ¨ï¼Œæ¨èæœ€æ–°è¡Œä¸šåŠ¨æ€ä¸çƒ­é—¨ä¼šè®®ã€‚\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-15 10:52</span>&nbsp;\n<a href=\"https://www.cnblogs.com/vivotech\">vivoäº’è”ç½‘æŠ€æœ¯</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">8</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "c#å®ç°åŒ…è£¹æ‰£é¢å•çš„å‡ ç§æ–¹å¼",
      "link": "https://www.cnblogs.com/axing/p/19483856",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/axing/p/19483856\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-15 10:46\">\n    <span>c#å®ç°åŒ…è£¹æ‰£é¢å•çš„å‡ ç§æ–¹å¼</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body blogpost-body-html\" id=\"cnblogs_post_body\">\n<p><span>&nbsp; æ— è®ºæ˜¯è·¨å¢ƒç”µå•†è¿˜æ˜¯åˆ¶é€ ä¸šåˆ†æ‹£è®¾å¤‡ï¼Œåœ¨åŒ…è£¹æµè½¬å‡ºå…¥åº“çš„åœºæ™¯ï¼Œä¸ºäº†ä¿è¯åŒ…è£¹åˆ†æ‹£è®¡åˆ’å’Œæµ‹é‡æ•°æ®ç»‘å®šçœŸå®æ€§ï¼Œç»å¸¸ä¼šé‡åˆ°é¢å•æ‰£å–çš„éœ€æ±‚ï¼Œä¸‹é¢æˆ‘å°±é€šè¿‡ä¸¤ç§å®ç°åŸç†æ¥å®ç°è¿™ä¸€åŠŸèƒ½ã€‚</span></p>\n<p>&nbsp; &nbsp; ä¸€:OpenCVSharp é€šè¿‡é¢å•è½®å»“/é¢œè‰²/è¾¹ç¼˜ç­‰ç»„åˆæ£€æµ‹å®ç°</p>\n<p>&nbsp; &nbsp; äºŒ:é€šè¿‡OCRè¯†åˆ«é¢å•å†…å®¹,æ ¹æ®æ‰€æœ‰åˆ‡å‰²ç‚¹åæ ‡ç‚¹æœ€å°å¤–ç•ŒçŸ©å½¢æ¥å®šä½é¢å•ä½ç½®(æ‰£é¢å•çš„åœºæ™¯éœ€æ±‚æ˜¯çœ‹æ¸…é¢å•å†…å®¹ï¼Œå½“ç„¶æƒ³è¦æ‰£å–å®Œæ•´é¢å•å›¾ç‰‡ï¼Œå¯ä»¥æ·»åŠ é¢å•å°ºå¯¸,è§„åˆ™ä¿¡æ¯ç­‰ç»´åº¦è®¡ç®—æˆ–è€…ç›´æ¥ç”¨ç¬¬ä¸‰ç§æ–¹å¼)</p>\n<p>&nbsp; &nbsp; ä¸‰:YOLO+Labelmeæ ‡å®šå·¥å…·ï¼Œé€šè¿‡æ¨¡å‹è®­ç»ƒå®šä½æ‰£å–(è¿™ä¸ªæŠ½æ—¶é—´å•ç‹¬å±•å¼€ä¸€ç¯‡è§£é‡Š)</p>\n<p><strong><span>æ–¹å¼ä¸€:OpencvSharp é€šè¿‡è½®å»“/é¢œè‰²/è¾¹ç¼˜æ£€æµ‹</span></strong></p>\n<p><strong><span>ã€€ã€€</span></strong>è¿™ç§æ–¹å¼å¯¹äºåŒ…è£¹å’Œé¢å•é¢œè‰²æœ‰æ˜æ˜¾å·®å¼‚çš„åœºæ™¯å¾ˆå‹å¥½ï¼Œå¯¹äºåŒ…è£¹é¢œè‰²å’Œé¢å•é¢œè‰²æ¥è¿‘çš„æ•ˆæœä¸€èˆ¬ï¼ˆå»ºè®®è€ƒè™‘ç¬¬äºŒç§æ–¹å¼ï¼‰ï¼Œè™½ç„¶å¯ä»¥æ ¹æ®é¢å•æ ·å¼æˆ–è€…æ–‡å­—èšé›†å¯†åº¦ç­‰å¤šé‡ç»´åº¦æ¥ç»„åˆåˆ†æï¼Œä½†æ˜¯è¿‡äºå¤æ‚ï¼Œå¹¶ä¸”å®šåˆ¶åŒ–ç¨‹åº¦å¾ˆé«˜ï¼ŒåºŸè¯å°‘è¯´ï¼Œå…ˆçœ‹çœ‹æ•ˆæœ:</p>\n<p>&nbsp;</p>\n<p><span>&nbsp; &nbsp; &nbsp; &nbsp; åŸå›¾ï¼š</span></p>\n<p><span>ã€€ã€€<img alt=\"333\" height=\"328\" src=\"https://img2024.cnblogs.com/blog/116076/202601/116076-20260114185329554-1784692153.png\" width=\"439\" /></span></p>\n<p>&nbsp;</p>\n<p>&nbsp;&nbsp;ã€€&nbsp;é€šè¿‡æ˜¾ç¤ºå¢å¼ºåçš„æ•ˆæœå›¾:</p>\n<p>&nbsp; &nbsp; &nbsp; &nbsp;<img alt=\"zsvvyv\" height=\"536\" src=\"https://img2024.cnblogs.com/blog/116076/202601/116076-20260114185355689-1585898524.png\" width=\"367\" /></p>\n<p><img alt=\"116076-20250310125032345-1793233350[1]\" height=\"244\" src=\"https://img2024.cnblogs.com/blog/116076/202509/116076-20250924180326264-1688793031.png\" width=\"519\" /></p>\n<p>åºŸè¯å°‘è¯´ï¼Œé™„ä¸Šæ ¸å¿ƒä»£ç :</p>\n<div class=\"cnblogs_code\">\n<pre>staticvoidProcessSingleImage(<span style=\"color: rgba(0, 0, 255, 1);\">string</span><span style=\"color: rgba(0, 0, 0, 1);\"> imagePath)\n{\n</span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> (!<span style=\"color: rgba(0, 0, 0, 1);\">File.Exists(imagePath))\n    {\n        Console.WriteLine(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">æ–‡ä»¶ä¸å­˜åœ¨!</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n        Console.ReadKey();\n</span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n    }\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">try</span><span style=\"color: rgba(0, 0, 0, 1);\">\n    {\n        Console.WriteLine($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">å¤„ç†: {Path.GetFileName(imagePath)}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> stopwatch =<span style=\"color: rgba(0, 0, 0, 1);\"> Stopwatch.StartNew();\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> æ£€æµ‹é¢å•</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">var</span> results =<span style=\"color: rgba(0, 0, 0, 1);\"> _detector.DetectLabels(imagePath);\n\n        stopwatch.Stop();\n        Console.WriteLine($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">æ£€æµ‹è€—æ—¶: {stopwatch.ElapsedMilliseconds}ms</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n        Console.WriteLine($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">æ‰¾åˆ° {results.Count} ä¸ªé¢å•åŒºåŸŸ</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> (results.Count == <span style=\"color: rgba(128, 0, 128, 1);\">0</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n        {\n            Console.WriteLine(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">æœªæ£€æµ‹åˆ°é¢å•!</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n            Console.ReadKey();\n</span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n        }\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> æ˜¾ç¤ºç»“æœ</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">foreach</span> (<span style=\"color: rgba(0, 0, 255, 1);\">var</span> result <span style=\"color: rgba(0, 0, 255, 1);\">in</span><span style=\"color: rgba(0, 0, 0, 1);\"> results)\n        {\n            Console.WriteLine($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">- {result.DetectionMethod}: ç½®ä¿¡åº¦ {result.Confidence:F2}, </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span> +<span style=\"color: rgba(0, 0, 0, 1);\">\n$</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">ä½ç½® [{result.BoundingBox.X}, {result.BoundingBox.Y}, </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span> +<span style=\"color: rgba(0, 0, 0, 1);\">\n$</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">{result.BoundingBox.Width}, {result.BoundingBox.Height}]</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n        }\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> åˆ›å»ºè¾“å‡ºç›®å½•</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">var</span> outputDir =<span style=\"color: rgba(0, 0, 0, 1);\"> _config.OutputDirectory;\n</span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> (!<span style=\"color: rgba(0, 0, 0, 1);\">Directory.Exists(outputDir))\n            Directory.CreateDirectory(outputDir);\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> baseName =<span style=\"color: rgba(0, 0, 0, 1);\"> Path.GetFileNameWithoutExtension(imagePath);\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> ä¿å­˜å¯è§†åŒ–ç»“æœ</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">if</span><span style=\"color: rgba(0, 0, 0, 1);\"> (_config.SaveVisualized)\n        {\n</span><span style=\"color: rgba(0, 0, 255, 1);\">using</span> (<span style=\"color: rgba(0, 0, 255, 1);\">var</span> original = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> Bitmap(imagePath))\n            {\n                Bitmap bitResult </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> ImageProcessor.DrawBoundingBoxesSafe(original, results);\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> visPath = Path.Combine(outputDir, $<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">{baseName}_detected.png</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n                ImageProcessor.SaveImage(bitResult, visPath);\n                Console.WriteLine($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">å¯è§†åŒ–ç»“æœå·²ä¿å­˜: {visPath}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n            }\n        }\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> ä¿å­˜æŠ å›¾ç»“æœ </span>\n<span style=\"color: rgba(0, 0, 255, 1);\">if</span><span style=\"color: rgba(0, 0, 0, 1);\"> (_config.SaveCropped)\n        {\n</span><span style=\"color: rgba(0, 0, 255, 1);\">using</span> (<span style=\"color: rgba(0, 0, 255, 1);\">var</span> mat =<span style=\"color: rgba(0, 0, 0, 1);\"> Cv2.ImRead(imagePath))\n            {\n</span><span style=\"color: rgba(0, 0, 255, 1);\">for</span> (<span style=\"color: rgba(0, 0, 255, 1);\">int</span> i = <span style=\"color: rgba(128, 0, 128, 1);\">0</span>; i &lt; results.Count; i++<span style=\"color: rgba(0, 0, 0, 1);\">)\n                {\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> cropped =<span style=\"color: rgba(0, 0, 0, 1);\"> _detector.CropLabel(mat, results[i].BoundingBox);\n</span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> (cropped != <span style=\"color: rgba(0, 0, 255, 1);\">null</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n                    {\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> å›¾åƒå¢å¼º</span>\n                        _detector.EnhanceImage(<span style=\"color: rgba(0, 0, 255, 1);\">ref</span><span style=\"color: rgba(0, 0, 0, 1);\"> cropped);\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> cropPath = Path.Combine(outputDir, $<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">{baseName}_label_{i + 1}.png</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n                        Console.WriteLine(cropped);\n\n                        ImageProcessor.SaveImage(cropped, cropPath);\n                        Console.WriteLine($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">æŠ å›¾å·²ä¿å­˜: {cropPath}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n\n                        cropped.Dispose();\n                    }\n                }\n            }\n        }\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> ä¿å­˜æ£€æµ‹ç»“æœåˆ°JSON</span>\n        SaveResultsToJson(results, Path.Combine(outputDir, $<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">{baseName}_results.json</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">));\n\n        Console.WriteLine(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">\\nå¤„ç†å®Œæˆ! æŒ‰ä»»æ„é”®ç»§ç»­...</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">); \n    }\n</span><span style=\"color: rgba(0, 0, 255, 1);\">catch</span><span style=\"color: rgba(0, 0, 0, 1);\"> (Exception ex)\n    {\n        Console.WriteLine($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">å¤„ç†å¤±è´¥: {ex.Message}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n    }\n}</span></pre>\n</div>\n<p>é€šè¿‡è½®å»“æ£€æµ‹ã€é¢œè‰²æ£€æµ‹å’Œè¾¹ç¼˜æ£€æµ‹ä¸‰ç§æ–¹å¼ç»„åˆå®šä½é¢å•ä½ç½®</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">public</span> List&lt;DetectionResult&gt; DetectLabels(<span style=\"color: rgba(0, 0, 255, 1);\">string</span><span style=\"color: rgba(0, 0, 0, 1);\"> imagePath)\n    {\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> results = <span style=\"color: rgba(0, 0, 255, 1);\">new</span> List&lt;DetectionResult&gt;<span style=\"color: rgba(0, 0, 0, 1);\">();\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">using</span> (<span style=\"color: rgba(0, 0, 255, 1);\">var</span> mat =<span style=\"color: rgba(0, 0, 0, 1);\"> Cv2.ImRead(imagePath, OpenCvSharp.ImreadModes.Color))\n        {\n</span><span style=\"color: rgba(0, 0, 255, 1);\">if</span><span style=\"color: rgba(0, 0, 0, 1);\"> (mat.Empty())\nthrownew FileNotFoundException($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">æ— æ³•åŠ è½½å›¾åƒ: {imagePath}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> æ–¹æ³•1: è½®å»“æ£€æµ‹</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">var</span> contourResults =<span style=\"color: rgba(0, 0, 0, 1);\"> DetectByContours(mat);\n            results.AddRange(contourResults);\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> æ–¹æ³•2: é¢œè‰²æ£€æµ‹</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">var</span> colorResults =<span style=\"color: rgba(0, 0, 0, 1);\"> DetectByColor(mat);\n            results.AddRange(colorResults);\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> æ–¹æ³•3: è¾¹ç¼˜æ£€æµ‹</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">var</span> edgeResults =<span style=\"color: rgba(0, 0, 0, 1);\"> DetectByEdges(mat);\n            results.AddRange(edgeResults);\n        }\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> åˆå¹¶å’Œç­›é€‰ç»“æœ</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> FilterResults(results);\n    }</span></pre>\n</div>\n<p>è½®å»“æ£€æµ‹</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">private</span> List&lt;DetectionResult&gt;<span style=\"color: rgba(0, 0, 0, 1);\"> DetectByContours(OpenCvSharp.Mat src)\n    {\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> results = <span style=\"color: rgba(0, 0, 255, 1);\">new</span> List&lt;DetectionResult&gt;<span style=\"color: rgba(0, 0, 0, 1);\">(); \n</span><span style=\"color: rgba(0, 0, 255, 1);\">using</span> (<span style=\"color: rgba(0, 0, 255, 1);\">var</span> gray = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> OpenCvSharp.Mat())\n</span><span style=\"color: rgba(0, 0, 255, 1);\">using</span> (<span style=\"color: rgba(0, 0, 255, 1);\">var</span> binary = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> OpenCvSharp.Mat())\n        {\n            Cv2.CvtColor(src, gray, ColorConversionCodes.BGR2GRAY);\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> äºŒå€¼åŒ–</span>\n            Cv2.Threshold(gray, binary, <span style=\"color: rgba(128, 0, 128, 1);\">0</span>, <span style=\"color: rgba(128, 0, 128, 1);\">255</span>, ThresholdTypes.Binary |<span style=\"color: rgba(0, 0, 0, 1);\"> ThresholdTypes.Otsu);\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> å½¢æ€å­¦æ“ä½œ</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">var</span> kernel = Cv2.GetStructuringElement(MorphShapes.Rect, <span style=\"color: rgba(0, 0, 255, 1);\">new</span> OpenCvSharp.Size(<span style=\"color: rgba(128, 0, 128, 1);\">3</span>, <span style=\"color: rgba(128, 0, 128, 1);\">3</span><span style=\"color: rgba(0, 0, 0, 1);\">));\n            Cv2.MorphologyEx(binary, binary, MorphTypes.Close, kernel);\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> æŸ¥æ‰¾è½®å»“</span>\n<span style=\"color: rgba(0, 0, 0, 1);\">            Cv2.FindContours(binary, outvar contours, outvar hierarchy,\n                RetrievalModes.External, ContourApproximationModes.ApproxSimple);\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">foreach</span> (<span style=\"color: rgba(0, 0, 255, 1);\">var</span> contour <span style=\"color: rgba(0, 0, 255, 1);\">in</span><span style=\"color: rgba(0, 0, 0, 1);\"> contours)\n            {\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> area =<span style=\"color: rgba(0, 0, 0, 1);\"> Cv2.ContourArea(contour); \n</span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> (area &lt; _minArea || area &gt;<span style=\"color: rgba(0, 0, 0, 1);\"> _maxArea)\n</span><span style=\"color: rgba(0, 0, 255, 1);\">continue</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n\n                Console.WriteLine($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">é¢ç§¯ï¼š{area}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> rect =<span style=\"color: rgba(0, 0, 0, 1);\"> Cv2.BoundingRect(contour);\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> è®¡ç®—å®½é«˜æ¯”</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">var</span> aspectRatio = (<span style=\"color: rgba(0, 0, 255, 1);\">double</span>)rect.Width /<span style=\"color: rgba(0, 0, 0, 1);\"> rect.Height;\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> é¢å•é€šå¸¸ä¸ºçŸ©å½¢ï¼Œå®½é«˜æ¯”åœ¨ä¸€å®šèŒƒå›´å†…</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">if</span> (aspectRatio &gt; <span style=\"color: rgba(128, 0, 128, 1);\">0.5</span> &amp;&amp; aspectRatio &lt; <span style=\"color: rgba(128, 0, 128, 1);\">3.0</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n                {\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> è®¡ç®—çŸ©å½¢åº¦</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">var</span> rectArea = rect.Width *<span style=\"color: rgba(0, 0, 0, 1);\"> rect.Height;\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> rectangularity = area /<span style=\"color: rgba(0, 0, 0, 1);\"> rectArea;\nConsole.WriteLine(rectangularity);\n</span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> (rectangularity &gt; <span style=\"color: rgba(128, 0, 128, 1);\">0.55</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n                    {\n                        results.Add(</span><span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> DetectionResult\n                        {\n                            BoundingBox </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> rect.ToRectangle(),\n                            Confidence </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> rectangularity,\n                            DetectionMethod </span>= <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Contour</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">\n                        });\n                    }\n                }\n            }\n        }\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> results;\n    }</span></pre>\n</div>\n<p>2.é¢œè‰²æ£€æµ‹</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">private</span> List&lt;DetectionResult&gt;<span style=\"color: rgba(0, 0, 0, 1);\"> DetectByColor(OpenCvSharp.Mat src)\n    {\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> results = <span style=\"color: rgba(0, 0, 255, 1);\">new</span> List&lt;DetectionResult&gt;<span style=\"color: rgba(0, 0, 0, 1);\">();\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">using</span> (<span style=\"color: rgba(0, 0, 255, 1);\">var</span> hsv = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> OpenCvSharp.Mat())\n</span><span style=\"color: rgba(0, 0, 255, 1);\">using</span> (<span style=\"color: rgba(0, 0, 255, 1);\">var</span> mask = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> OpenCvSharp.Mat())\n        {\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> è½¬æ¢åˆ°HSVè‰²å½©ç©ºé—´</span>\n<span style=\"color: rgba(0, 0, 0, 1);\">            Cv2.CvtColor(src, hsv, ColorConversionCodes.BGR2HSV);\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> å®šä¹‰ç™½è‰²/æµ…è‰²èŒƒå›´</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">var</span> lowerWhite1 = <span style=\"color: rgba(0, 0, 255, 1);\">new</span> Scalar(<span style=\"color: rgba(128, 0, 128, 1);\">0</span>, <span style=\"color: rgba(128, 0, 128, 1);\">0</span>, <span style=\"color: rgba(128, 0, 128, 1);\">200</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> upperWhite1 = <span style=\"color: rgba(0, 0, 255, 1);\">new</span> Scalar(<span style=\"color: rgba(128, 0, 128, 1);\">180</span>, <span style=\"color: rgba(128, 0, 128, 1);\">30</span>, <span style=\"color: rgba(128, 0, 128, 1);\">255</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> lowerWhite2 = <span style=\"color: rgba(0, 0, 255, 1);\">new</span> Scalar(<span style=\"color: rgba(128, 0, 128, 1);\">0</span>, <span style=\"color: rgba(128, 0, 128, 1);\">0</span>, <span style=\"color: rgba(128, 0, 128, 1);\">180</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> upperWhite2 = <span style=\"color: rgba(0, 0, 255, 1);\">new</span> Scalar(<span style=\"color: rgba(128, 0, 128, 1);\">180</span>, <span style=\"color: rgba(128, 0, 128, 1);\">80</span>, <span style=\"color: rgba(128, 0, 128, 1);\">255</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">using</span> (<span style=\"color: rgba(0, 0, 255, 1);\">var</span> mask1 = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> OpenCvSharp.Mat())\n</span><span style=\"color: rgba(0, 0, 255, 1);\">using</span> (<span style=\"color: rgba(0, 0, 255, 1);\">var</span> mask2 = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> OpenCvSharp.Mat())\n            {\n                Cv2.InRange(hsv, lowerWhite1, upperWhite1, mask1);\n                Cv2.InRange(hsv, lowerWhite2, upperWhite2, mask2);\n                Cv2.BitwiseOr(mask1, mask2, mask);\n            }\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> å½¢æ€å­¦æ“ä½œ</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">var</span> kernel = Cv2.GetStructuringElement(MorphShapes.Rect, <span style=\"color: rgba(0, 0, 255, 1);\">new</span> OpenCvSharp.Size(<span style=\"color: rgba(128, 0, 128, 1);\">5</span>, <span style=\"color: rgba(128, 0, 128, 1);\">5</span><span style=\"color: rgba(0, 0, 0, 1);\">));\n            Cv2.MorphologyEx(mask, mask, MorphTypes.Close, kernel);\n            Cv2.MorphologyEx(mask, mask, MorphTypes.Open, kernel);\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> æŸ¥æ‰¾è½®å»“</span>\n<span style=\"color: rgba(0, 0, 0, 1);\">            Cv2.FindContours(mask, outvar contours, outvar hierarchy,\n                RetrievalModes.External, ContourApproximationModes.ApproxSimple);\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">foreach</span> (<span style=\"color: rgba(0, 0, 255, 1);\">var</span> contour <span style=\"color: rgba(0, 0, 255, 1);\">in</span><span style=\"color: rgba(0, 0, 0, 1);\"> contours)\n            {\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> area =<span style=\"color: rgba(0, 0, 0, 1);\"> Cv2.ContourArea(contour);\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> (area &lt; _minArea || area &gt;<span style=\"color: rgba(0, 0, 0, 1);\"> _maxArea)\n</span><span style=\"color: rgba(0, 0, 255, 1);\">continue</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> rect =<span style=\"color: rgba(0, 0, 0, 1);\"> Cv2.BoundingRect(contour);\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> è®¡ç®—é¢œè‰²å‡åŒ€åº¦</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">var</span> uniformity =<span style=\"color: rgba(0, 0, 0, 1);\"> CalculateColorUniformity(src, rect);\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> (uniformity &gt;<span style=\"color: rgba(0, 0, 0, 1);\"> _confidenceThreshold)\n                {\n                    results.Add(</span><span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> DetectionResult\n                    {\n                        BoundingBox </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> rect.ToRectangle(),\n                        Confidence </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> uniformity,\n                        DetectionMethod </span>= <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Color</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">\n                    });\n                }\n            }\n        }\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> results;\n    }\n</span><span style=\"color: rgba(128, 0, 128, 1);\">3</span><span style=\"color: rgba(0, 0, 0, 1);\">.è¾¹ç¼˜æ£€æµ‹\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">private</span> List&lt;DetectionResult&gt;<span style=\"color: rgba(0, 0, 0, 1);\"> DetectByEdges(OpenCvSharp.Mat src)\n    {\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> results = <span style=\"color: rgba(0, 0, 255, 1);\">new</span> List&lt;DetectionResult&gt;<span style=\"color: rgba(0, 0, 0, 1);\">();\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">using</span> (<span style=\"color: rgba(0, 0, 255, 1);\">var</span> gray = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> OpenCvSharp.Mat())\n</span><span style=\"color: rgba(0, 0, 255, 1);\">using</span> (<span style=\"color: rgba(0, 0, 255, 1);\">var</span> edges = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> OpenCvSharp.Mat())\n        {\n            Cv2.CvtColor(src, gray, ColorConversionCodes.BGR2GRAY);\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> é™å™ª</span>\n            Cv2.GaussianBlur(gray, gray, <span style=\"color: rgba(0, 0, 255, 1);\">new</span> OpenCvSharp.Size(<span style=\"color: rgba(128, 0, 128, 1);\">5</span>, <span style=\"color: rgba(128, 0, 128, 1);\">5</span>), <span style=\"color: rgba(128, 0, 128, 1);\">1.5</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> è¾¹ç¼˜æ£€æµ‹</span>\n            Cv2.Canny(gray, edges, <span style=\"color: rgba(128, 0, 128, 1);\">50</span>, <span style=\"color: rgba(128, 0, 128, 1);\">150</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> è†¨èƒ€</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">var</span> kernel = Cv2.GetStructuringElement(MorphShapes.Rect, <span style=\"color: rgba(0, 0, 255, 1);\">new</span> OpenCvSharp.Size(<span style=\"color: rgba(128, 0, 128, 1);\">3</span>, <span style=\"color: rgba(128, 0, 128, 1);\">3</span><span style=\"color: rgba(0, 0, 0, 1);\">));\n            Cv2.Dilate(edges, edges, kernel, iterations: </span><span style=\"color: rgba(128, 0, 128, 1);\">2</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> æŸ¥æ‰¾è½®å»“</span>\n<span style=\"color: rgba(0, 0, 0, 1);\">            Cv2.FindContours(edges, outvar contours, outvar hierarchy,\n                RetrievalModes.External, ContourApproximationModes.ApproxSimple);\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">foreach</span> (<span style=\"color: rgba(0, 0, 255, 1);\">var</span> contour <span style=\"color: rgba(0, 0, 255, 1);\">in</span><span style=\"color: rgba(0, 0, 0, 1);\"> contours)\n            {\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> area =<span style=\"color: rgba(0, 0, 0, 1);\"> Cv2.ContourArea(contour);\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> (area &lt; _minArea || area &gt;<span style=\"color: rgba(0, 0, 0, 1);\"> _maxArea)\n</span><span style=\"color: rgba(0, 0, 255, 1);\">continue</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> rect =<span style=\"color: rgba(0, 0, 0, 1);\"> Cv2.BoundingRect(contour);\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> è®¡ç®—è¾¹ç¼˜å¯†åº¦</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">using</span> (<span style=\"color: rgba(0, 0, 255, 1);\">var</span> roi = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> OpenCvSharp.Mat(edges, rect))\n                {\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> totalPixels = roi.Rows *<span style=\"color: rgba(0, 0, 0, 1);\"> roi.Cols;\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> edgePixels =<span style=\"color: rgba(0, 0, 0, 1);\"> Cv2.CountNonZero(roi);\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> edgeDensity = (<span style=\"color: rgba(0, 0, 255, 1);\">double</span>)edgePixels /<span style=\"color: rgba(0, 0, 0, 1);\"> totalPixels;\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> (edgeDensity &gt; <span style=\"color: rgba(128, 0, 128, 1);\">0.1</span> &amp;&amp; rect.Width &gt; <span style=\"color: rgba(128, 0, 128, 1);\">100</span> &amp;&amp; rect.Height &gt; <span style=\"color: rgba(128, 0, 128, 1);\">100</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n                    {\n                        results.Add(</span><span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> DetectionResult\n                        {\n                            BoundingBox </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> rect.ToRectangle(),\n                            Confidence </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> edgeDensity,\n                            DetectionMethod </span>= <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Edge</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">\n                        });\n                    }\n                }\n            }\n        }\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> results;\n    }</span></pre>\n</div>\n<p><strong><span>æ–¹å¼äºŒ:é€šè¿‡OCRè¯†åˆ«é¢å•å†…å®¹,æ ¹æ®æ‰€æœ‰åˆ‡å‰²ç‚¹åæ ‡ç‚¹æœ€å°å¤–ç•ŒçŸ©å½¢æ¥å®šä½é¢å•ä½ç½®</span></strong></p>\n<p><span>&nbsp; &nbsp; OCRåŸºç¡€æ¨¡å‹ç”¨çš„æ˜¯SVTR-LCNetè¿™ä¸ªæ¶æ„çš„ç½‘ç»œæ¨¡å‹ï¼Œè®ºæ–‡æ˜¯å…¬å¼€çš„ï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ªåŸºç¡€ä¸Šåšçš„å¤ç°ä¸è°ƒä¼˜ã€‚è¯ä¸å¤šè¯´ï¼Œå…ˆçœ‹æ•ˆæœ</span></p>\n<p><span>&nbsp; &nbsp; ç›¸æœºæ‹ç…§åŸå§‹åŒ…è£¹å›¾ç‰‡</span></p>\n<p><span>&nbsp; &nbsp;&nbsp;<img alt=\"ScreenShot_2026-01-14_185601_117\" height=\"383\" src=\"https://img2024.cnblogs.com/blog/116076/202601/116076-20260114185618097-2092867094.png\" width=\"458\" /></span></p>\n<p>&nbsp;</p>\n<p>&nbsp; &nbsp;&nbsp;&nbsp; &nbsp; OCRè¯†åˆ«åˆ‡å‰²æ•ˆæœ(æ ¹æ®è¯†åˆ«æ–‡å­—è§’åº¦è‡ªåŠ¨æ ¡æ­£)</p>\n<p>ã€€ã€€<img alt=\"640\" src=\"https://img2024.cnblogs.com/blog/116076/202601/116076-20260114185658596-1401802679.png\" /></p>\n<p>ã€€ã€€å®šä½åˆ°æ¯ä¸ªè¯†åˆ«å†…å®¹çš„çŸ©å½¢åæ ‡ï¼Œè·å–æ‰€æœ‰å½“å‰å›¾ç‰‡æ‰€æœ‰åˆ‡å‰²çŸ©å½¢çš„æœ€å°å¤–æ¥çŸ©å½¢ï¼Œç„¶åè£åˆ‡ï¼Œå°±å¯ä»¥å¾—åˆ°åŒ…å«æ‰€æœ‰é¢å•å†…å®¹çš„å›¾ç‰‡</p>\n<p>ã€€ã€€<img alt=\"640 (1)\" height=\"547\" src=\"https://img2024.cnblogs.com/blog/116076/202601/116076-20260114185730759-1515244179.png\" width=\"840\" /></p>\n<p>ã€€ã€€æŠ é¢å•æ•ˆæœ(å®é™…ä¼šæ¯”é¢å•å°ï¼Œä½†æ˜¯æ»¡è¶³å®¢æˆ·éœ€æ±‚ï¼ŒåŒ…å«äº†æ‰€æœ‰é¢å•å†…å®¹)</p>\n<p>ã€€ã€€<img alt=\"640 (2)\" height=\"536\" src=\"https://img2024.cnblogs.com/blog/116076/202601/116076-20260114185752661-1398249190.png\" width=\"849\" /></p>\n<p>ã€€ã€€<img alt=\"116076-20250310125032345-1793233350[1]\" src=\"https://img2024.cnblogs.com/blog/116076/202509/116076-20250924180326264-1688793031.png\" /></p>\n<p>ã€€ã€€åºŸè¯ä¸å¤šè¯´ï¼Œé™„ä¸Šä»£ç </p>\n<p>ã€€ã€€</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(128, 128, 128, 1);\">///</span><span style=\"color: rgba(128, 128, 128, 1);\">&lt;summary&gt;</span>\n<span style=\"color: rgba(128, 128, 128, 1);\">///</span><span style=\"color: rgba(0, 128, 0, 1);\"> è¿”å›é¢å•å›¾ç‰‡\n</span><span style=\"color: rgba(128, 128, 128, 1);\">///</span><span style=\"color: rgba(128, 128, 128, 1);\">&lt;/summary&gt;</span>\n<span style=\"color: rgba(128, 128, 128, 1);\">///</span><span style=\"color: rgba(128, 128, 128, 1);\">&lt;param name=\"errorMsg\"&gt;</span><span style=\"color: rgba(0, 128, 0, 1);\">å¼‚å¸¸ä¿¡æ¯</span><span style=\"color: rgba(128, 128, 128, 1);\">&lt;/param&gt;</span>\n<span style=\"color: rgba(128, 128, 128, 1);\">///</span><span style=\"color: rgba(128, 128, 128, 1);\">&lt;param name=\"IsEnhanceImage\"&gt;</span><span style=\"color: rgba(0, 128, 0, 1);\">é¢å•æ˜¯å¦å¢å¼º</span><span style=\"color: rgba(128, 128, 128, 1);\">&lt;/param&gt;</span>\n<span style=\"color: rgba(128, 128, 128, 1);\">///</span><span style=\"color: rgba(128, 128, 128, 1);\">&lt;param name=\"IsSaveLocl\"&gt;</span><span style=\"color: rgba(0, 128, 0, 1);\">æ˜¯å¦æœ¬åœ°ä¿å­˜</span><span style=\"color: rgba(128, 128, 128, 1);\">&lt;/param&gt;</span>\n<span style=\"color: rgba(128, 128, 128, 1);\">///</span><span style=\"color: rgba(128, 128, 128, 1);\">&lt;returns&gt;&lt;/returns&gt;</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">public</span> Bitmap GetLabelImageByBitmap(outstring errorMsg, <span style=\"color: rgba(0, 0, 255, 1);\">bool</span> IsEnhanceImage = <span style=\"color: rgba(0, 0, 255, 1);\">true</span>, <span style=\"color: rgba(0, 0, 255, 1);\">bool</span> IsSaveLocl = <span style=\"color: rgba(0, 0, 255, 1);\">true</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n {\n     Bitmap croppedImage </span>= <span style=\"color: rgba(0, 0, 255, 1);\">null</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n     errorMsg </span>= <span style=\"color: rgba(0, 0, 255, 1);\">string</span><span style=\"color: rgba(0, 0, 0, 1);\">.Empty;\n     </span><span style=\"color: rgba(0, 0, 255, 1);\">try</span><span style=\"color: rgba(0, 0, 0, 1);\">\n     {\n         </span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> (!<span style=\"color: rgba(0, 0, 0, 1);\">File.Exists(imagePath))\n         {\n             ShellLine.WriteLine($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">è¯·ç¡®ä¿ {imagePath} å­˜åœ¨</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n             errorMsg </span>= $<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">è¯·ç¡®ä¿ {imagePath} å­˜åœ¨</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n             returnnew Bitmap(</span><span style=\"color: rgba(128, 0, 128, 1);\">10</span>, <span style=\"color: rgba(128, 0, 128, 1);\">10</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n         }\n         </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\">å›¾ç‰‡ç›®å½•</span>\n         <span style=\"color: rgba(0, 0, 255, 1);\">string</span> imageDir =<span style=\"color: rgba(0, 0, 0, 1);\"> Path.GetDirectoryName(debugImagePath);\n         </span><span style=\"color: rgba(0, 0, 255, 1);\">if</span><span style=\"color: rgba(0, 0, 0, 1);\"> (Directory.Exists(imageDir))\n         {\n             Directory.CreateDirectory(imageDir);\n         }\n         Bitmap bitmap1 </span>= <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> Bitmap(imagePath);\n         </span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> rr =<span style=\"color: rgba(0, 0, 0, 1);\"> oCR.GetOCRDataStr(bitmap1, debugImagePath);\n\n         </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> è¯»å–JSONæ–‡ä»¶</span>\n         <span style=\"color: rgba(0, 0, 255, 1);\">string</span> jsonFilePath = imageDir + <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">\\\\content.json</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n\n         </span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> (!<span style=\"color: rgba(0, 0, 0, 1);\">File.Exists(jsonFilePath))\n         {\n             errorMsg </span>= $<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">æœªæ‰¾åˆ°JSONæ–‡ä»¶ï¼Œè¯·ç¡®ä¿ {jsonFilePath} å­˜åœ¨</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n             ShellLine.WriteLine($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">æœªæ‰¾åˆ°JSONæ–‡ä»¶ï¼Œè¯·ç¡®ä¿ {jsonFilePath} å­˜åœ¨</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n             returnnew Bitmap(imagePath);\n         }\n\n         </span><span style=\"color: rgba(0, 0, 255, 1);\">string</span> preRotatedImage = imageDir + <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">\\\\preRotatedImg.jpg</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n         </span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> (!<span style=\"color: rgba(0, 0, 0, 1);\">File.Exists(preRotatedImage))\n         {\n             errorMsg </span>= $<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">æœªæ‰¾åˆ°é¢å•æ–‡ä»¶ï¼Œè¯·ç¡®ä¿åŒ…è£¹é¢å•æ¸…æ™°ä¸”å­˜åœ¨</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n             ShellLine.WriteLine($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">æœªæ‰¾åˆ°é¢å•æ–‡ä»¶ï¼Œè¯·ç¡®ä¿åŒ…è£¹é¢å•æ¸…æ™°ä¸”å­˜åœ¨</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n             returnnew Bitmap(imagePath);\n         }\n\n         </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> è§£æçŸ©å½¢æ•°æ®å¹¶è®¡ç®—æœ€å°å¤–æ¥çŸ©å½¢</span>\n         List&lt;Rectangle&gt; rectangles =<span style=\"color: rgba(0, 0, 0, 1);\"> ParseRectanglesFromJson(jsonFilePath);\n         </span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> (rectangles.Count == <span style=\"color: rgba(128, 0, 128, 1);\">0</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n         {\n             errorMsg </span>= <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">æœªåœ¨JSONæ–‡ä»¶ä¸­æ‰¾åˆ°æœ‰æ•ˆçš„çŸ©å½¢æ•°æ®</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n             ShellLine.WriteLine(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">æœªåœ¨JSONæ–‡ä»¶ä¸­æ‰¾åˆ°æœ‰æ•ˆçš„çŸ©å½¢æ•°æ®</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n             returnnew Bitmap(imagePath);\n         }\n\n         Rectangle boundingRect </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> CalculateBoundingRectangle(rectangles);\n         ShellLine.WriteLine($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">æœ€å°å¤–æ¥çŸ©å½¢: X={boundingRect.X}, Y={boundingRect.Y}, Width={boundingRect.Width}, Height={boundingRect.Height}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n         ShellLine.WriteLine($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">åŒ…å« {rectangles.Count} ä¸ªå…ƒç´ </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n\n         </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> åŠ è½½å›¾ç‰‡å¹¶è¿›è¡Œè£å‰ª</span>\n         <span style=\"color: rgba(0, 0, 255, 1);\">using</span> (Bitmap originalImage = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> Bitmap(preRotatedImage))\n         {\n             </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> ç¡®ä¿çŸ©å½¢åœ¨å›¾ç‰‡èŒƒå›´å†…</span>\n             Rectangle safeRect =<span style=\"color: rgba(0, 0, 0, 1);\"> GetSafeRectangle(boundingRect, originalImage);\n             </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> è£å‰ªå›¾ç‰‡</span>\n             croppedImage =<span style=\"color: rgba(0, 0, 0, 1);\"> CropImage(originalImage, safeRect);\n             </span><span style=\"color: rgba(0, 0, 255, 1);\">if</span><span style=\"color: rgba(0, 0, 0, 1);\"> (IsEnhanceImage)\n             {\n                 </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> å¢å¼ºæ˜¾ç¤º </span>\n                 EnhanceImage(<span style=\"color: rgba(0, 0, 255, 1);\">ref</span><span style=\"color: rgba(0, 0, 0, 1);\"> croppedImage);\n             }\n             </span><span style=\"color: rgba(0, 0, 255, 1);\">if</span><span style=\"color: rgba(0, 0, 0, 1);\"> (IsSaveLocl)\n             {\n                 </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> ä¿å­˜ç»“æœ</span>\n                 <span style=\"color: rgba(0, 0, 255, 1);\">string</span> outputPath =<span style=\"color: rgba(0, 0, 0, 1);\"> Path.Combine(\n                     Path.GetDirectoryName(preRotatedImage),\n                     Path.GetFileNameWithoutExtension(preRotatedImage) </span>+ <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">_cropped_enhanced.jpg</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n\n                 croppedImage.Save(outputPath, ImageFormat.Jpeg);\n                 ShellLine.WriteLine($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">å¤„ç†å®Œæˆï¼ç»“æœå·²ä¿å­˜åˆ°: {outputPath}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n             }\n             </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> æ˜¾ç¤ºè£å‰ªåŒºåŸŸä¿¡æ¯</span>\n             ShellLine.WriteLine($<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">\\nè£å‰ªåŒºåŸŸä¿¡æ¯:</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n             ShellLine.WriteLine($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">  åŸå§‹å›¾ç‰‡å°ºå¯¸: {originalImage.Width}x{originalImage.Height}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n             ShellLine.WriteLine($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">  è£å‰ªåŒºåŸŸ: {safeRect.X}, {safeRect.Y}, {safeRect.Width}x{safeRect.Height}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n             ShellLine.WriteLine($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">  å¢å¼ºåå›¾ç‰‡å°ºå¯¸: {croppedImage.Width}x{croppedImage.Height}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n             </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> croppedImage;\n         }\n     }\n     </span><span style=\"color: rgba(0, 0, 255, 1);\">catch</span><span style=\"color: rgba(0, 0, 0, 1);\"> (Exception ex)\n     {\n         errorMsg </span>= $<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">å¤„ç†è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯: {ex.Message}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n         ShellLine.WriteLine($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">å¤„ç†è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯: {ex.Message}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n         ShellLine.WriteLine($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">å †æ ˆè·Ÿè¸ª: {ex.StackTrace}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n         returnnew Bitmap(imagePath);\n     }\n     </span><span style=\"color: rgba(0, 0, 255, 1);\">finally</span><span style=\"color: rgba(0, 0, 0, 1);\">\n     {\n         </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> é‡Šæ”¾èµ„æº</span>\n         croppedImage?<span style=\"color: rgba(0, 0, 0, 1);\">.Dispose();\n     }\n }</span></pre>\n</div>\n<p>ã€€ã€€å›¾ç‰‡å¢å¼ºæ˜¾ç¤ºï¼Œæœ‰éœ€è¦å¯ä»¥è°ƒç”¨</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(128, 128, 128, 1);\">///</span><span style=\"color: rgba(128, 128, 128, 1);\">&lt;summary&gt;</span>\n<span style=\"color: rgba(128, 128, 128, 1);\">///</span><span style=\"color: rgba(0, 128, 0, 1);\"> å›¾ç‰‡å¢å¼ºæ˜¾ç¤º\n</span><span style=\"color: rgba(128, 128, 128, 1);\">///</span><span style=\"color: rgba(128, 128, 128, 1);\">&lt;/summary&gt;</span>\n<span style=\"color: rgba(128, 128, 128, 1);\">///</span><span style=\"color: rgba(128, 128, 128, 1);\">&lt;param name=\"image\"&gt;&lt;/param&gt;</span>\npublicvoidEnhanceImage(<span style=\"color: rgba(0, 0, 255, 1);\">ref</span><span style=\"color: rgba(0, 0, 0, 1);\"> Bitmap image)\n {\n     </span><span style=\"color: rgba(0, 0, 255, 1);\">using</span> (<span style=\"color: rgba(0, 0, 255, 1);\">var</span> mat =<span style=\"color: rgba(0, 0, 0, 1);\"> image.ToMat())\n     </span><span style=\"color: rgba(0, 0, 255, 1);\">using</span> (<span style=\"color: rgba(0, 0, 255, 1);\">var</span> lab = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> OpenCvSharp.Mat())\n     {\n         </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> è½¬æ¢ä¸ºLabè‰²å½©ç©ºé—´</span>\n<span style=\"color: rgba(0, 0, 0, 1);\">         Cv2.CvtColor(mat, lab, ColorConversionCodes.BGR2Lab);\n\n         Cv2.Split(lab, outvar labChannels);\n\n         </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> å¯¹äº®åº¦é€šé“è¿›è¡Œç›´æ–¹å›¾å‡è¡¡åŒ–</span>\n         Cv2.EqualizeHist(labChannels[<span style=\"color: rgba(128, 0, 128, 1);\">0</span>], labChannels[<span style=\"color: rgba(128, 0, 128, 1);\">0</span><span style=\"color: rgba(0, 0, 0, 1);\">]);\n\n         Cv2.Merge(labChannels, lab);\n         Cv2.CvtColor(lab, mat, ColorConversionCodes.Lab2BGR);\n\n         </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> é‡Šæ”¾é€šé“</span>\n         <span style=\"color: rgba(0, 0, 255, 1);\">foreach</span> (<span style=\"color: rgba(0, 0, 255, 1);\">var</span> channel <span style=\"color: rgba(0, 0, 255, 1);\">in</span><span style=\"color: rgba(0, 0, 0, 1);\"> labChannels)\n             channel.Dispose();\n\n         </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> æ›´æ–°å›¾åƒ</span>\n<span style=\"color: rgba(0, 0, 0, 1);\">         image.Dispose();\n         image </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> mat.ToBitmap();\n     }\n }</span></pre>\n</div>\n<p>ã€€ã€€è·å–åŒ…å«æ‰€æœ‰åˆ‡å‰²å­—ç¬¦çš„æœ€å°å¤–æ¥çŸ©å½¢</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> è®¡ç®—åŒ…å«æ‰€æœ‰çŸ©å½¢çš„æœ€å°å¤–æ¥çŸ©å½¢</span>\n  <span style=\"color: rgba(0, 0, 255, 1);\">static</span> Rectangle CalculateBoundingRectangle(List&lt;Rectangle&gt;<span style=\"color: rgba(0, 0, 0, 1);\"> rectangles)\n  {\n      </span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> (rectangles.Count == <span style=\"color: rgba(128, 0, 128, 1);\">0</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n          thrownew ArgumentException(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">çŸ©å½¢åˆ—è¡¨ä¸ºç©º</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n\n      </span><span style=\"color: rgba(0, 0, 255, 1);\">int</span> minX = <span style=\"color: rgba(0, 0, 255, 1);\">int</span><span style=\"color: rgba(0, 0, 0, 1);\">.MaxValue;\n      </span><span style=\"color: rgba(0, 0, 255, 1);\">int</span> minY = <span style=\"color: rgba(0, 0, 255, 1);\">int</span><span style=\"color: rgba(0, 0, 0, 1);\">.MaxValue;\n      </span><span style=\"color: rgba(0, 0, 255, 1);\">int</span> maxX = <span style=\"color: rgba(0, 0, 255, 1);\">int</span><span style=\"color: rgba(0, 0, 0, 1);\">.MinValue;\n      </span><span style=\"color: rgba(0, 0, 255, 1);\">int</span> maxY = <span style=\"color: rgba(0, 0, 255, 1);\">int</span><span style=\"color: rgba(0, 0, 0, 1);\">.MinValue;\n\n      </span><span style=\"color: rgba(0, 0, 255, 1);\">foreach</span> (Rectangle rect <span style=\"color: rgba(0, 0, 255, 1);\">in</span><span style=\"color: rgba(0, 0, 0, 1);\"> rectangles)\n      {\n          minX </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> Math.Min(minX, rect.X);\n          minY </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> Math.Min(minY, rect.Y);\n          maxX </span>= Math.Max(maxX, rect.X +<span style=\"color: rgba(0, 0, 0, 1);\"> rect.Width);\n          maxY </span>= Math.Max(maxY, rect.Y +<span style=\"color: rgba(0, 0, 0, 1);\"> rect.Height);\n      }\n\n      </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> æ·»åŠ ä¸€äº›è¾¹è·ï¼Œä½¿è£å‰ªæ›´ç¾è§‚</span>\n      <span style=\"color: rgba(0, 0, 255, 1);\">int</span> margin = <span style=\"color: rgba(128, 0, 128, 1);\">10</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n      minX </span>= Math.Max(<span style=\"color: rgba(128, 0, 128, 1);\">0</span>, minX -<span style=\"color: rgba(0, 0, 0, 1);\"> margin);\n      minY </span>= Math.Max(<span style=\"color: rgba(128, 0, 128, 1);\">0</span>, minY -<span style=\"color: rgba(0, 0, 0, 1);\"> margin);\n      maxX </span>= maxX +<span style=\"color: rgba(0, 0, 0, 1);\"> margin;\n      maxY </span>= maxY +<span style=\"color: rgba(0, 0, 0, 1);\"> margin;\n\n      returnnew Rectangle(minX, minY, maxX </span>- minX, maxY -<span style=\"color: rgba(0, 0, 0, 1);\"> minY);\n  }\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> ç¡®ä¿çŸ©å½¢åœ¨å›¾ç‰‡èŒƒå›´å†…</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">static</span><span style=\"color: rgba(0, 0, 0, 1);\"> Rectangle GetSafeRectangle(Rectangle rect, Bitmap image)\n  {\n      </span><span style=\"color: rgba(0, 0, 255, 1);\">int</span> x = Math.Max(<span style=\"color: rgba(128, 0, 128, 1);\">0</span>, Math.Min(rect.X, image.Width - <span style=\"color: rgba(128, 0, 128, 1);\">1</span><span style=\"color: rgba(0, 0, 0, 1);\">));\n      </span><span style=\"color: rgba(0, 0, 255, 1);\">int</span> y = Math.Max(<span style=\"color: rgba(128, 0, 128, 1);\">0</span>, Math.Min(rect.Y, image.Height - <span style=\"color: rgba(128, 0, 128, 1);\">1</span><span style=\"color: rgba(0, 0, 0, 1);\">));\n      </span><span style=\"color: rgba(0, 0, 255, 1);\">int</span> width = Math.Min(rect.Width, image.Width -<span style=\"color: rgba(0, 0, 0, 1);\"> x);\n      </span><span style=\"color: rgba(0, 0, 255, 1);\">int</span> height = Math.Min(rect.Height, image.Height -<span style=\"color: rgba(0, 0, 0, 1);\"> y);\n\n      returnnew Rectangle(x, y, width, height);\n  }\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> è£å‰ªå›¾ç‰‡</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">static</span><span style=\"color: rgba(0, 0, 0, 1);\"> Bitmap CropImage(Bitmap source, Rectangle cropArea)\n  {\n      Bitmap target </span>= <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> Bitmap(cropArea.Width, cropArea.Height);\n\n      </span><span style=\"color: rgba(0, 0, 255, 1);\">using</span> (Graphics g =<span style=\"color: rgba(0, 0, 0, 1);\"> Graphics.FromImage(target))\n      {\n          g.DrawImage(source, </span><span style=\"color: rgba(0, 0, 255, 1);\">new</span> Rectangle(<span style=\"color: rgba(128, 0, 128, 1);\">0</span>, <span style=\"color: rgba(128, 0, 128, 1);\">0</span><span style=\"color: rgba(0, 0, 0, 1);\">, cropArea.Width, cropArea.Height),\n              cropArea, GraphicsUnit.Pixel);\n      }\n      </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> target;\n  }</span></pre>\n</div>\n<p><strong><span>ã€€ã€€ç»“æŸè¯­</span></strong></p>\n<p><strong>&nbsp;&nbsp; &nbsp;ã€€ã€€æ„Ÿè°¢å„ä½è€å¿ƒæŸ¥é˜…ï¼ &nbsp;å¦‚æœæ‚¨æœ‰æ›´å¥½çš„æƒ³æ³•æ¬¢è¿ä¸€èµ·äº¤æµï¼Œæœ‰ä¸æ‡‚çš„ä¹Ÿå¯ä»¥å¾®ä¿¡å…¬ä¼—å·è”ç³»åšä¸»ï¼Œä½œè€…å…¬ä¼—å·ä¼šç»å¸¸å‘ä¸€äº›å®ç”¨çš„å°å·¥å…·å’Œdemoæºç ï¼Œéœ€è¦çš„å¯ä»¥å»çœ‹çœ‹ï¼å¦å¤–ï¼Œå¦‚æœè§‰å¾—æœ¬ç¯‡åšæ–‡å¯¹æ‚¨æˆ–è€…èº«è¾¹æœ‹å‹æœ‰å¸®åŠ©çš„ï¼Œéº»çƒ¦ç‚¹ä¸ªå…³æ³¨ï¼èµ äººç«ç‘°ï¼Œæ‰‹ç•™ä½™é¦™ï¼Œæ‚¨çš„æ”¯æŒå°±æ˜¯æˆ‘å†™ä½œæœ€å¤§çš„åŠ¨åŠ›ï¼Œæ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼ŒæœŸå¾…å’Œæ‚¨ä¸€èµ·æ¢è®¨ï¼å†ä¼šï¼</strong></p>\n<p><img alt=\"640\" src=\"https://img2024.cnblogs.com/blog/116076/202509/116076-20250924180748850-573212949.gif\" /></p>\n<p>&nbsp;</p>\n</div>\n<div id=\"MySignature\">\n    <div id=\"AllanboltSignature1\" style=\"color: green;\">        \n<p id=\"PSignature\">            \n<br /> \nä½œè€…ï¼š<a href=\"http://www.cnblogs.com/axing/\" style=\"color: Red;\" target=\"_blank\">Stephen-kzx</a>            \n<br /> \nå‡ºå¤„ï¼š<a href=\"http://www.cnblogs.com/axing/\" style=\"color: Red;\" target=\"_blank\">http://www.cnblogs.com/axing/</a>\n<br /> \nå…¬ä¼—å·ï¼š<font color=\"red\">ä¼šå®šæ—¶åˆ†äº«å†™å·¥ä½œä¸­æˆ–è€…ç”Ÿæ´»ä¸­é‡åˆ°çš„å°æ¸¸æˆå’Œå°å·¥å…·æºç ã€‚æœ‰å…´è¶£çš„å¸®å¿™ç‚¹ä¸‹å…³æ³¨ï¼æ„Ÿæ©ï¼</font>\n<br />æœ¬æ–‡ç‰ˆæƒå½’ä½œè€…å’Œåšå®¢å›­å…±æœ‰ï¼Œæ¬¢è¿è½¬è½½ï¼Œä½†æœªç»ä½œè€…åŒæ„å¿…é¡»ä¿ç•™æ­¤æ®µå£°æ˜ï¼Œä¸”åœ¨æ–‡ç« é¡µé¢æ˜æ˜¾ä½ç½®ç»™å‡ºåŸæ–‡è¿æ¥ï¼Œå¦åˆ™ä¿ç•™è¿½ç©¶æ³•å¾‹è´£ä»»çš„æƒåˆ©ã€‚\n\n</p>\n</div>\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-15 10:46</span>&nbsp;\n<a href=\"https://www.cnblogs.com/axing\">ä½•ä»¥è§£å¿§å”¯æœ‰*ç </a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">7</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    }
  ]
}