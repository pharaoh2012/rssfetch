{
  "title": "ä¸»é¡µ - åšå®¢å›­",
  "link": "https://www.cnblogs.com/",
  "description": "ä¸»é¡µ - åšå®¢å›­ RSS",
  "entries": [
    {
      "title": "è§£å¯†Promptç³»åˆ—68. å‘Šåˆ«é€è¯è¹¦å­— - é‡å¡‘ Transformer çš„æ¨ç†èŒƒå¼",
      "link": "https://www.cnblogs.com/gogoSandy/p/19485562",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/gogoSandy/p/19485562\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-15 08:52\">\n    <span>è§£å¯†Promptç³»åˆ—68. å‘Šåˆ«é€è¯è¹¦å­— - é‡å¡‘ Transformer çš„æ¨ç†èŒƒå¼</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                    <div id=\"cnblogs_post_description\" style=\"display: none;\">\n        <img alt=\"è§£å¯†Promptç³»åˆ—68. å‘Šåˆ«é€è¯è¹¦å­— - é‡å¡‘ Transformer çš„æ¨ç†èŒƒå¼\" class=\"desc_img\" src=\"https://img2024.cnblogs.com/blog/1326688/202601/1326688-20260115085201383-1680160121.png\" />\n        æ…¢æ€è€ƒçš„æœ¬è´¨ä¾ç„¶æ˜¯é€šè¿‡ç”Ÿæˆæ›´å¤šçš„æ˜¾æ€§ Token æ¥æ¢å–è®¡ç®—æ—¶é—´ã€‚ä¸ºäº†æƒ³å¾—æ·±ï¼Œå¿…é¡»è¯´å¾—å¤šã€‚è¿™ä¸€ç« çš„å››ç¯‡è®ºæ–‡éƒ½åœ¨å°è¯•ï¼šèƒ½å¦åœ¨ä¸è¾“å‡ºåºŸè¯çš„æƒ…å†µä¸‹ï¼Œè®©æ¨¡å‹åœ¨å†…éƒ¨â€œç©ºè½¬â€æ€è€ƒï¼Ÿ ç”šè‡³æ‰“ç ´è‡ªå›å½’å…¨å±€è§„åˆ’ï¼Ÿ\n    </div>\n<div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<p>Transformer çš„æ ¸å¿ƒèŒƒå¼ä¸€ç›´æ˜¯â€œNext Token Predictionâ€â€”â€”åƒæ¥é¾™ä¸€æ ·ï¼Œä¸€ä¸ªè¯ä¸€ä¸ªè¯åœ°å¾€åè¹¦ã€‚è™½ç„¶ OpenAI o1 å’Œ DeepSeek-R1 é€šè¿‡ Chain of Thought (CoT) å¼€å¯äº†â€œæ…¢æ€è€ƒâ€æ—¶ä»£ï¼Œä½†å…¶æœ¬è´¨ä¾ç„¶æ˜¯é€šè¿‡ç”Ÿæˆæ›´å¤šçš„æ˜¾æ€§ Token æ¥æ¢å–è®¡ç®—æ—¶é—´ã€‚</p>\n<p>è¿™å°±å¸¦æ¥äº†ä¸€ä¸ªå·¨å¤§çš„æ•ˆç‡æ‚–è®ºï¼šä¸ºäº†æƒ³å¾—æ·±ï¼Œå¿…é¡»è¯´å¾—å¤šã€‚è¿™ä¸€ç« æˆ‘ä»¬çœ‹å››ç¯‡æå…·ä»£è¡¨æ€§çš„è®ºæ–‡ï¼ˆHuginn, COCONUT, TRM, TiDARï¼‰ï¼Œå®ƒä»¬ä¸çº¦è€ŒåŒåœ°è¯•å›¾æ‰“ç ´è¿™ä¸€å±€é™ï¼šèƒ½å¦åœ¨ä¸è¾“å‡ºåºŸè¯çš„æƒ…å†µä¸‹ï¼Œè®©æ¨¡å‹åœ¨å†…éƒ¨â€œç©ºè½¬â€æ€è€ƒï¼Ÿ ç”šè‡³æ‰“ç ´è‡ªå›å½’çš„æŸç¼šï¼Œè¿›è¡Œå…¨å±€è§„åˆ’ï¼Ÿ</p>\n<h1 id=\"huginå†…ç”Ÿå¾ªç¯æ€è€ƒæå‡æ·±åº¦\">Huginï¼šå†…ç”Ÿå¾ªç¯æ€è€ƒæå‡æ·±åº¦</h1>\n<blockquote>\n<ul>\n<li>Scaling up Test-Time Compute with Latent Reasoning: A Recurrent Depth Approach</li>\n</ul>\n</blockquote>\n<p>è¿™ç¯‡è®ºæ–‡çš„æ ¸å¿ƒåœ¨äºæ‰“ç ´å¤§æ¨¡å‹æ¨ç†æ—¶è®¡ç®—é‡æ’å®šçš„é™åˆ¶ï¼Œæå‡ºäº†ä¸€ç§åœ¨â€œæ·±åº¦â€ä¸Šè¿›è¡Œå¾ªç¯çš„æ¶æ„ï¼Œä»è€Œå®ç°äº†åœ¨<strong>éšç©ºé—´ï¼ˆLatent Spaceï¼‰</strong>è¿›è¡Œé€’å½’æ¨ç†ã€‚</p>\n<h2 id=\"-æ ¸å¿ƒç—›ç‚¹å›ºå®šè®¡ç®—å›¾ä¸åŠ¨æ€éš¾åº¦çš„çŸ›ç›¾\">ğŸš¨ æ ¸å¿ƒç—›ç‚¹ï¼šå›ºå®šè®¡ç®—å›¾ä¸åŠ¨æ€éš¾åº¦çš„çŸ›ç›¾</h2>\n<p>ä¼ ç»Ÿçš„ LLM ä¸€æ—¦è®­ç»ƒå®Œæˆï¼Œå…¶å±‚æ•°ï¼ˆDepthï¼‰æ˜¯å›ºå®šçš„ã€‚è¿™æ„å‘³ç€æ— è®ºè¾“å…¥æ˜¯ç®€å•çš„â€œ1+1â€è¿˜æ˜¯å¤æ‚çš„æ•°å­¦è¯æ˜ï¼Œæ¨¡å‹åœ¨ç”Ÿæˆæ¯ä¸€ä¸ª Token æ—¶æ¶ˆè€—çš„ FLOPsæ˜¯ä¸€æ ·çš„ ã€‚è¿™æ˜¾ç„¶ä¸ç¬¦åˆç›´è§‰â€”â€”éš¾é¢˜åº”è¯¥éœ€è¦æ›´å¤šçš„â€œæ€è€ƒæ—¶é—´â€ã€‚å› æ­¤æˆ‘ä»¬æœ‰äº†COTå’Œç°åœ¨çš„Reasoningæ¨¡å¼ã€‚</p>\n<ul>\n<li>ç°çŠ¶ï¼šä¸ºäº†å¤„ç†éš¾é¢˜ï¼Œç°åœ¨çš„ CoT ç­–ç•¥ä¸å¾—ä¸å¼ºè¿«æ¨¡å‹â€œè‡ªè¨€è‡ªè¯­â€ç”Ÿæˆå¤§é‡ Tokenï¼Œè¿™å¯¼è‡´äº†æ˜¾å­˜ï¼ˆKV Cacheï¼‰çš„çˆ†ç‚¸å¼å¢é•¿å’Œæ¨ç†é€Ÿåº¦çš„çº¿æ€§ä¸‹é™ã€‚</li>\n<li>ç›®æ ‡ï¼šèƒ½å¦è®©æ¨¡å‹åœ¨å†…éƒ¨â€œåœä¸‹æ¥æƒ³ä¸€ä¼šå„¿â€ï¼Œä½†ä¸å ç”¨è¾“å‡ºå¸¦å®½ï¼Ÿ</li>\n</ul>\n<h2 id=\"ï¸è§£å†³æ–¹æ¡ˆå¾ªç¯æ·±åº¦æ¶æ„\">ğŸ› ï¸è§£å†³æ–¹æ¡ˆï¼šå¾ªç¯æ·±åº¦æ¶æ„</h2>\n<p>Huginn æå‡ºäº†ä¸€ç§ç‰¹æ®Šçš„æ¶æ„è®¾è®¡ï¼Œè¯•å›¾åœ¨ Transformer ä¸­åŸç”Ÿå®ç°â€œæ…¢æ€è€ƒâ€ã€‚<br />\n<img alt=\"image\" class=\"lazyload\" /></p>\n<p>å¦‚ä¸Šå›¾ï¼Œæ¨¡å‹åŒ…æ‹¬ä¸‰ä¸ªéƒ¨åˆ†</p>\n<ul>\n<li>ï¼ˆPï¼‰Prelude: ç›¸å½“äºEncoderå±‚ï¼Œè´Ÿè´£å°† Input Token æ˜ å°„ä¸ºéšçŠ¶æ€ã€‚</li>\n<li>ï¼ˆRï¼‰recurrent block: è¿™æ˜¯ä¸€ä¸ªå¤šå±‚Transformer Layerï¼Œæ‰€æœ‰çš„æ€è€ƒéƒ½å‘ç”Ÿåœ¨è¿™é‡Œï¼Œä½†æ˜¯å’Œä¼ ç»ŸTransformerä¸åŒçš„ç‚¹åœ¨äºï¼Œè¿™ä¸ªæ¨¡å—å¯ä»¥å¾ªç¯è¿è¡Œä»»æ„æ¬¡ã€‚</li>\n<li>ï¼ˆCï¼‰Codaï¼šç›¸å½“äºè¾“å‡ºå¤´ï¼Œå¯¹æ€è€ƒå®Œæˆçš„éšçŠ¶æ€è¿›è¡Œtokenè§£ç ç”Ÿæˆã€‚</li>\n</ul>\n<p><strong>è¿™æœ¬è´¨ä¸Šæ˜¯â€œå±‚å‚æ•°å…±äº«â€çš„æè‡´åº”ç”¨</strong>ã€‚ æ¨¡å‹é€šè¿‡åŠ¨æ€å†³å®š R æ¨¡å—å¾ªç¯çš„æ¬¡æ•°ï¼Œå®ç°äº†åœ¨å‚æ•°é‡ä¸å˜çš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€è°ƒæ•´æ¨ç†æ—¶çš„è®¡ç®—æ·±åº¦ã€‚ä¸ºäº†é˜²æ­¢æ·±å±‚å¾ªç¯å¯¼è‡´çš„æ¢¯åº¦æ¶ˆå¤±æˆ–é—å¿˜ï¼Œæ¨¡å‹åœ¨æ¯ä¸€æ­¥å¾ªç¯éƒ½ä¼šæ³¨å…¥åŸå§‹è¾“å…¥çš„ Embeddingï¼Œèµ·åˆ°é”šç‚¹ï¼ˆAnchorï¼‰çš„ä½œç”¨ã€‚</p>\n<h2 id=\"-æ·±åº¦æ´å¯Ÿ\">ğŸ’¡ æ·±åº¦æ´å¯Ÿ</h2>\n<ol>\n<li>\n<p><strong>é«˜æ•ˆæ¨ç†</strong>ï¼šé€’å½’æ¨¡å—ä¸äº§ç”Ÿçº¿æ€§å¢é•¿çš„KV-Cacheï¼Œåªæ˜¯ä¸æ–­æ›´æ–°é€’å½’å‚æ•°</p>\n</li>\n<li>\n<p><strong>éš¾åº¦è‡ªé€‚åº”</strong>ï¼šå¯ä»¥é€šè¿‡æ§åˆ¶é€’å½’çš„è½®æ•°æ¥å¯¹ä¸åŒéš¾åº¦çš„é—®é¢˜å®ç°è‡ªé€‚åº”è®¡ç®—ï¼Œä¸éœ€è¦å¯¹æ‰€æœ‰éš¾åº¦çš„é—®é¢˜è¿›è¡Œç»Ÿä¸€çš„æ€è€ƒæˆ–è€…ä¸æ€è€ƒ</p>\n</li>\n<li>\n<p><strong>Test Time Scaling</strong>ï¼šè®ºæ–‡å‘ç°é€’å½’çš„æ¨¡å¼åŒæ ·å­˜åœ¨Test-time scalingï¼Œæ›´å¤šçš„é€’å½’æ¬¡æ•°ä¼šå¸¦æ¥æŒç»­çš„è¡¨ç°æå‡ã€‚</p>\n</li>\n</ol>\n<h1 id=\"coconutæŠ›å¼ƒè¯­è¨€ç”¨ç›´è§‰æ€è€ƒ\">COCONUTï¼šæŠ›å¼ƒè¯­è¨€ï¼Œç”¨â€œç›´è§‰â€æ€è€ƒ</h1>\n<blockquote>\n<ul>\n<li>Metaï¼š Training Large Language Models to Reason in a<br />\nContinuous Latent Space</li>\n</ul>\n</blockquote>\n<p>å¦‚æœè¯´ Huginn æ˜¯åœ¨æ¶æ„å±‚é¢â€œæŠ˜å â€äº†æ·±åº¦ï¼Œé‚£ä¹ˆ COCONUTåˆ™æ˜¯åœ¨æ€ç»´è½½ä½“ä¸Šè¿›è¡Œäº†ä¸€æ¬¡é©å‘½ã€‚å®ƒè´¨ç–‘äº†å¤§æ¨¡å‹æ¨ç†çš„ä¸€ä¸ªåŸºæœ¬å‡è®¾ï¼šä¸ºä»€ä¹ˆæ€è€ƒçš„è¿‡ç¨‹å¿…é¡»ç”¨äººç±»è¯­è¨€ï¼ˆTokensï¼‰æ¥è¡¨è¾¾ï¼Ÿ</p>\n<h2 id=\"æ ¸å¿ƒç—›ç‚¹è¯­è¨€ç©ºé—´çš„å±€é™æ€§\">ğŸš¨æ ¸å¿ƒç—›ç‚¹ï¼šè¯­è¨€ç©ºé—´çš„å±€é™æ€§</h2>\n<p>ç”±OpenAI-O1æ‹‰å¼€åºå¹•çš„Reasoningæ—¶ä»£ï¼Œå½“å‰çš„æ¨ç†è¿‡ç¨‹ä¸€èˆ¬æ˜¯<br />\nï¼šHidden State <span class=\"math inline\">\\(\\rightarrow\\)</span> Logits <span class=\"math inline\">\\(\\rightarrow\\)</span> Sampling (Token) <span class=\"math inline\">\\(\\rightarrow\\)</span> Embedding <span class=\"math inline\">\\(\\rightarrow\\)</span> Next Inputã€‚</p>\n<p>è¿™å°±å¼•å…¥äº†ä¸€äº›å±€é™æ€§</p>\n<ul>\n<li><strong>ä¿¡æ¯ä¸¢å¤±</strong>ï¼šå°†é«˜ç»´è¿ç»­çš„ Hidden State åç¼©ä¸ºç¦»æ•£çš„ Tokenï¼Œä¼šä¸¢å¤±å¤§é‡éç»“æ„åŒ–çš„â€œç›´è§‰â€ä¿¡æ¯ã€‚å°±åƒä½ è„‘æµ·é‡Œæœ‰å¤§é‡ä¿¡æ¯ï¼Œå´å¿…é¡»ç”¨ä¸€å¥è¯è¯´å‡ºæ¥ã€‚</li>\n<li><strong>æ•ˆç‡ä½ä¸‹</strong>ï¼šå½“CoT ä¸­å……æ–¥ç€ \"Let's think step by step\", \"Therefore\" ç­‰æ— æ„ä¹‰çš„è¿æ¥è¯ã€‚</li>\n<li><strong>çº¿æ€§çº¦æŸ</strong>ï¼šè¯­è¨€æ˜¯çº¿æ€§çš„ï¼Œä½†æ€ç»´å¾€å¾€æ˜¯å‘æ•£çš„ã€ç½‘çŠ¶çš„ã€‚ä¹‹å‰å¾ˆå¤šparrallelæ€è€ƒçš„æ–¹æ¡ˆéƒ½æ˜¯ä¸ºäº†æ‰“ç ´è¿™ä¸ªçº¦æŸã€‚</li>\n</ul>\n<h2 id=\"ï¸è§£å†³æ–¹æ¡ˆè¿ç»­æ€ç»´é“¾\">ğŸ› ï¸è§£å†³æ–¹æ¡ˆï¼šè¿ç»­æ€ç»´é“¾</h2>\n<p>COCONUT æå‡ºäº†ä¸€ç§Latent Modeã€‚è™½ç„¶æ¶æ„ä»åŸºäº Transformerï¼Œä½†å®ƒæ”¹å˜äº†æ•°æ®æµè½¬æ–¹å¼ï¼š</p>\n<p><img alt=\"image\" class=\"lazyload\" /></p>\n<ol>\n<li><strong>æ¨ç†æ¨¡å¼ï¼šLatent Mode (éšæ¨¡å¼)</strong></li>\n</ol>\n<p>Coconut å¼•å…¥äº†ä¸€ç§æ–°çš„æ¨ç†æ¨¡å¼ã€‚æ¨¡å‹å¯ä»¥åœ¨Language Modeå’ŒLatent Modeä¹‹é—´åˆ‡æ¢ã€‚</p>\n<p>æœºåˆ¶ï¼šå½“æ¨¡å‹è¿›å…¥Latent Modeåï¼ˆè¾“å‡º&lt;bot&gt;ç‰¹æ®Šå­—ç¬¦ï¼‰ï¼Œå®ƒä¸å†å°† Last Hidden State è§£ç ä¸º Tokenã€‚è€Œæ˜¯ç›´æ¥å°†è¿™ä¸ª Hidden State ä½œä¸ºä¸‹ä¸€æ­¥çš„ Input Embedding å–‚ç»™æ¨¡å‹ã€‚</p>\n<p>è¿™å°±åƒæ˜¯æ¨¡å‹åœ¨â€œè‡ªè¨€è‡ªè¯­â€ï¼Œä½†æ˜¯ç”¨åªæœ‰å®ƒè‡ªå·±å¬å¾—æ‡‚çš„â€œè„‘ç”µæ³¢â€ï¼ˆå‘é‡ï¼‰åœ¨äº¤æµï¼Œè€Œä¸æ˜¯ç”¨äººç±»è¯­è¨€ã€‚è¿™ç§â€œè¿ç»­æ€ç»´â€ä¸€ç›´æŒç»­åˆ°æ¨¡å‹è¾“å‡º&lt;eot&gt;ç‰¹æ®Šå­—ç¬¦ï¼Œç„¶åå†åˆ‡å›è¯­è¨€æ¨¡å¼è¾“å‡ºæœ€ç»ˆç­”æ¡ˆã€‚</p>\n<ol start=\"2\">\n<li><strong>è®­ç»ƒç­–ç•¥ï¼šå¤šé˜¶æ®µè¯¾ç¨‹å­¦ä¹ </strong></li>\n</ol>\n<p>ä¸ºäº†è®©æ¨¡å‹å­¦ä¼šä½¿ç”¨ä¸Šè¿°çš„æ€è€ƒå‘é‡ä¿¡æ¯ï¼Œè®ºæ–‡ä½¿ç”¨äº†æ¸è¿›å¼çš„è®­ç»ƒæ–¹æ¡ˆï¼Œå¦‚ä¸‹å›¾</p>\n<p><img alt=\"image\" class=\"lazyload\" /></p>\n<ul>\n<li>Stage 0ï¼šå…ˆç”¨æ ‡å‡†çš„ CoT æ•°æ®è®­ç»ƒæ¨¡å‹ï¼Œè®©å®ƒå­¦ä¼šé€»è¾‘ã€‚</li>\n<li>Stage 1 ~ kï¼šé€æ­¥â€œæ“¦é™¤â€CoT ä¸­çš„æ–‡æœ¬ã€‚\n<ul>\n<li>ä¾‹å¦‚ï¼Œåœ¨ Stage 1ï¼ŒæŠŠ CoT çš„ç¬¬ 1 æ­¥æ¨ç†æ–‡æœ¬å»æ‰ï¼Œæ›¿æ¢ä¸º <span class=\"math inline\">\\(c\\)</span> ä¸ª Continuous Thoughtsï¼ˆéšå‘é‡ï¼‰ã€‚æ¨¡å‹å¿…é¡»å­¦ä¼šç”¨è¿™ <span class=\"math inline\">\\(c\\)</span> ä¸ªå‘é‡æ¥æ‰¿è½½åŸæœ¬é‚£å¥è¯çš„é€»è¾‘ä¿¡æ¯</li>\n<li>éšç€è®­ç»ƒè¿›è¡Œï¼Œé€æ­¥æŠŠæ›´å¤šçš„æ–‡æœ¬æ¨ç†æ­¥éª¤æ›¿æ¢ä¸ºéšå‘é‡ã€‚</li>\n</ul>\n</li>\n<li>æœ€ç»ˆå½¢æ€ï¼šæ‰€æœ‰çš„ä¸­é—´æ¨ç†æ–‡æœ¬éƒ½è¢«â€œå†…åŒ–â€æˆäº†è¿ç»­çš„éšå‘é‡ï¼Œæ¨¡å‹åªè¾“å‡ºæœ€ç»ˆç­”æ¡ˆã€‚</li>\n</ul>\n<h2 id=\"-æ·±åº¦æ´å¯Ÿ-1\">ğŸ’¡ æ·±åº¦æ´å¯Ÿ</h2>\n<ol>\n<li><strong>æ ¸å¿ƒèƒ½åŠ›æ¶Œç°ï¼šéšå¼ BFS (Implicit Breadth-First Search)</strong></li>\n</ol>\n<p>è¿™æ˜¯æœ€ç²¾å½©çš„å‘ç°ã€‚ç›¸æ¯”åŸæœ‰COTæ˜¯çº¿æ€§çš„ï¼ŒåŒä¸€æ—¶åˆ»åªèƒ½æ¨ç†ä¸€ä¸ªæ€è·¯ã€‚ä½†COconutå› ä¸ºHidden Stateæ˜¯é«˜ç»´è¿ç»­å‘é‡ï¼Œæ‰€ä»¥å®ƒå¯ä»¥å¤„äºâ€œå åŠ æ€â€,å¯ä»¥åŒæ—¶ç¼–ç å¤šä¸ªå¯èƒ½çš„æ¨ç†è·¯å¾„ã€‚éšå¼è¿›è¡Œäº†å¹¿åº¦æœç´¢ã€‚</p>\n<ol start=\"2\">\n<li><strong>æ¨ç†æ•ˆç‡æå‡</strong></li>\n</ol>\n<p>è™½ç„¶å’ŒHuginç›¸æ¯”ä¾æ—§éœ€è¦ä½¿ç”¨KV-cacheï¼Œä½†å› ä¸ºè¿ç»­å‘é‡çš„æ•°é‡å¾€å¾€æ˜¾è‘—å°äºtokenæ•°ï¼Œæ‰€ä»¥æ¨ç†æ•ˆç‡ä¼šæœ‰æå‡ï¼ŒåŒæ—¶ä¹Ÿå› ä¸ºçœç•¥äº†æ¨ç†tokené‡‡æ ·çš„æ­¥éª¤ï¼Œè€Œè¿›ä¸€æ­¥æå‡ååã€‚</p>\n<ol start=\"3\">\n<li><strong>è¶…è¶Šäººäº†è¯­è¨€æ€ç»´å¯†åº¦</strong></li>\n</ol>\n<p>å°¤å…¶å¯¹äºä¸€äº›å¤æ‚å¤šè·¯å¾„è§„åˆ’ä»»åŠ¡ï¼Œä»¥åŠéƒ¨åˆ†éœ€è¦<code>look ahead</code>æ¨ç†çš„ä»»åŠ¡ï¼Œå› ä¸ºéšå‘é‡æ¯”tokenåŒ…å«å¹¿åº¦æ›´å¤§çš„æ€è€ƒä¿¡æ¯ï¼Œå› æ­¤æ•ˆæœæœ‰æ‰€æå‡ã€‚</p>\n<p>çœ‹åˆ°è¿™é‡Œæˆ‘ä¹Ÿæœ‰ä¸ªæƒ³æ³•ï¼Œé€»è¾‘ä¸Šhidden thoughtä¸€å®šä¼šæ¯”tokenæºå¸¦æ›´å¤šçš„ä¿¡æ¯é‡ï¼Œä½†æœ€å¤§çš„é—®é¢˜å°±æ˜¯æ— æ³•å¯è§†åŒ–ï¼Œé‚£èƒ½å¦æƒ³ä¸€ä¼šï¼Œè¯´ä¸¤å¥ï¼Œæƒ³ä¸€ä¼šè¯´ä¸¤å¥ï¼Œä¹Ÿå°±æ˜¯æŠŠhidden thoughtå’Œtoken reasoningé€šè¿‡interleaveä¸²è”èµ·æ¥ï¼Ÿ</p>\n<h1 id=\"trm-åƒæ”¹ä»£ç ä¸€æ ·è¿­ä»£æ¨ç†\">TRM: åƒæ”¹ä»£ç ä¸€æ ·è¿­ä»£æ¨ç†</h1>\n<blockquote>\n<ul>\n<li>Less is More: Recursive Reasoning with Tiny Networks</li>\n</ul>\n</blockquote>\n<p>TRMå’Œå‰é¢çš„Huginæ˜¯éå¸¸ç›¸ä¼¼çš„ï¼Œå‡ ä¹éƒ½æ˜¯èµ°çš„â€œå¾ªç¯æ€ç»´è½½ä½“â€çš„æ€è·¯ã€‚ä½†æ˜¯TRMå¤šäº†åŒæµé€’å½’çš„è®¾è®¡ï¼ŒæŠŠå¾ªç¯è¿‡ç¨‹ä¸­çš„è‰ç¨¿å’Œæ‰“ç£¨è¿™ä¸¤ä¸ªä¸åŒä¿¡æ¯æ‹†åˆ†å¼€å¤„ç†ã€‚</p>\n<p>å’ŒCOCONUTä¹Ÿæœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œåªä¸è¿‡COCONUTæ›´åƒæ˜¯æ½œæ„è¯†åœ¨æ—¶é—´è½´ä¸Šï¼ˆè‡ªå›å½’æ¨ç†ï¼‰çš„å»¶ä¼¸ï¼Œè€ŒTRMæ˜¯åœ¨è´¨é‡è½´ä¸Šçš„ä¸æ–­è¿­ä»£ä¿®æ­£ã€‚</p>\n<h2 id=\"-æ ¸å¿ƒç—›ç‚¹è‡ªå›å½’çš„è½å­æ— æ‚”\">ğŸš¨ æ ¸å¿ƒç—›ç‚¹ï¼šè‡ªå›å½’çš„â€œè½å­æ— æ‚”â€</h2>\n<p>Reasoningæœ€å¤§çš„é—®é¢˜ï¼Œå°±æ˜¯å‰é¢COCONUTæåˆ°çš„â€œè½å­æ— æ‚”â€é—®é¢˜ï¼Œæƒ³è¦è¿›ä¸€æ­¥åæ€æˆ–è€…ä¿®æ­£ï¼Œå°±éœ€è¦ç»§ç»­æ˜¾æ€§å»¶ä¼¸ä½ çš„æ€è€ƒé“¾è·¯è¿›è¡Œåæ€ã€‚</p>\n<p>è®ºæ–‡çš„ç›®æ ‡ï¼šèƒ½å¦æ„å»ºä¸€ä¸ªæ¨¡å‹ï¼Œå®ƒçš„æ¨ç†è¿‡ç¨‹ä¸æ˜¯â€œç”Ÿæˆä¸‹ä¸€ä¸ªè¯â€ï¼Œè€Œæ˜¯ä¸æ–­ä¿®æ­£å½“å‰çš„ç­”æ¡ˆï¼Ÿè¿™éœ€è¦æ¨¡å‹å…·å¤‡è¿­ä»£ä¿®æ­£çš„èƒ½åŠ›ã€‚</p>\n<h2 id=\"ï¸-è§£å†³æ–¹æ¡ˆtrm-tiny-recursive-model\">ğŸ› ï¸ è§£å†³æ–¹æ¡ˆï¼šTRM (Tiny Recursive Model)</h2>\n<p>TRM çš„æ¶æ„è®¾è®¡éå¸¸ç²¾ç®€ï¼Œå®ƒç›´æ¥å›åˆ°äº†æœ€æœ¬è´¨çš„é€’å½’ç»“æ„ï¼Œå¦‚ä¸‹å›¾</p>\n<p><img alt=\"image\" class=\"lazyload\" /></p>\n<ol>\n<li><strong>åŒæµé€’å½’çŠ¶æ€</strong></li>\n</ol>\n<p>TRM ç»´æŠ¤ä¸¤ä¸ªæ ¸å¿ƒçŠ¶æ€ï¼Œå¹¶åœ¨å¾ªç¯ä¸­ä¸æ–­æ›´æ–°å®ƒä»¬ ï¼š</p>\n<ul>\n<li>Latent (Z)ï¼šæ¨ç†çŠ¶æ€ã€‚è¿™å’ŒHuginnå¤šæ­¥é€’å½’å¾ªç¯çš„R Blockç±»ä¼¼ï¼Œéƒ½æ˜¯æ€ç»´çš„è½½ä½“ï¼Œå­˜å‚¨ä¸æ–­æ›´æ–°çš„æ€ç»´ä¸Šä¸‹æ–‡ã€‚</li>\n<li>Prediction (Y)ï¼šå½“å‰ç­”æ¡ˆçš„è‰ç¨¿ã€‚è¿™æ˜¯ TRM æœ€ç‹¬ç‰¹çš„åœ°æ–¹ã€‚å®ƒæŠŠâ€œå½“å‰çš„é¢„æµ‹ç»“æœâ€Embedding ä¹‹åï¼Œä½œä¸ºä¸‹ä¸€è½®çš„è¾“å…¥å–‚ç»™è‡ªå·±ã€‚ï¼ˆå¯¹æ¯”Huginæ‰€æœ‰ä¿¡æ¯éƒ½åœ¨Rï¼ŒTRMæŠŠå·²ç»å½¢æˆçš„é¢„æµ‹ç»“æœè§£è€¦å‡ºæ¥äº†ï¼‰</li>\n</ul>\n<p>æ¨ç†å¾ªç¯é€»è¾‘ (The Loop)ï¼š</p>\n<p></p><div class=\"math display\">\\[\\begin{aligned}\nz_{t+1} &amp;= \\text{Net}(x, y_t, z_t) \\quad \\text{// æ€è€ƒï¼šåŸºäºå½“å‰è‰ç¨¿å’Œæ€ç»´ï¼Œæ›´æ–°æ€ç»´} \\\\\ny_{t+1} &amp;= \\text{Net}(y_t, z_{t+1}) \\quad \\text{// ä¿®æ”¹ï¼šåŸºäºæ–°çš„æ€ç»´ï¼Œä¿®æ­£è‰ç¨¿}\n\\end{aligned}\n\\]</div><p></p><p>è¿™å°±åƒæˆ‘ä»¬å†™ä»£ç ï¼šå…ˆå†™ä¸ªå¤§æ¦‚ (<span class=\"math inline\">\\(y_0\\)</span>) -&gt; è„‘å­è½¬ä¸€ä¸‹ (<span class=\"math inline\">\\(z_1\\)</span>) -&gt; æ”¹ä¸€è¡Œä»£ç  (<span class=\"math inline\">\\(y_1\\)</span>) -&gt; å‘ç°æœ‰ä¸ª Bug (<span class=\"math inline\">\\(z_2\\)</span>) -&gt; å†æ”¹ä¸€è¡Œ (<span class=\"math inline\">\\(y_2\\)</span>)ã€‚</p>\n<ol start=\"2\">\n<li><strong>æ¶æ„æç®€ä¸»ä¹‰</strong></li>\n</ol>\n<ul>\n<li>Tiny Networkï¼šæ¨¡å‹åªæœ‰ 2 å±‚ Transformer Layerï¼Œå‚æ•°é‡ä»… 5M - 7M</li>\n<li>å‚æ•°å…±äº«ï¼šåŒä¸€ä¸ªç½‘ç»œï¼ˆNetï¼‰åœ¨æ¯ä¸€æ¬¡å¾ªç¯ä¸­è¢«åå¤ä½¿ç”¨</li>\n<li>å…¨é‡æ¨ç†æ¨¡å¼ï¼šå¹¶éè‡ªå›å½’æ¨¡å‹token by tokençš„æ¨ç†ï¼Œè€Œæ˜¯æ¯ä¸€æ­¥å¾ªç¯éƒ½ç”Ÿæˆå…¨é‡çš„Yï¼Œå¹¶ä¸”æ¯ä¸€æ­¥éƒ½å¯¹å…¨é‡çš„Yè¿›è¡Œä¿®æ­£</li>\n</ul>\n<h2 id=\"-æ·±åº¦æ´å¯Ÿ-2\">ğŸ’¡ æ·±åº¦æ´å¯Ÿ</h2>\n<ol>\n<li><strong>å…¨é‡ç”Ÿæˆçš„æ€ç»´è½¬æ¢</strong>ï¼šTRM çš„ç”Ÿæˆæ–¹å¼æ›´åƒ Diffusion Modelï¼ˆæ‰©æ•£æ¨¡å‹ï¼‰ï¼Œæ˜¯ä»æ¨¡ç³Šåˆ°æ¸…æ™°çš„è¿‡ç¨‹ï¼Œè€Œä¸æ˜¯ä»å·¦åˆ°å³çš„è¿‡ç¨‹ã€‚ä½†è¿™åŒæ ·ä¹Ÿçº¦æŸäº†å½“å‰TRMåªèƒ½ç”¨äºå›ºå®šé•¿åº¦å†…å®¹çš„è¾“å‡ºã€‚</li>\n<li><strong>Deep Supervision</strong>ï¼šè®­ç»ƒæ—¶ï¼ŒTRM å¹¶ä¸åªåœ¨æœ€åä¸€æ­¥è®¡ç®— Lossï¼Œè€Œæ˜¯å¯¹æ¯ä¸€æ­¥ç”Ÿæˆçš„è‰ç¨¿éƒ½è®¡ç®— Lossã€‚è¿™å¼ºè¿«æ¨¡å‹åœ¨ç¬¬ä¸€æ­¥å°±ç»™å‡ºä¸€ä¸ªâ€œå¤§è‡´æ­£ç¡®â€çš„è§£ï¼Œç„¶ååœ¨åç»­æ­¥éª¤ä¸­ç²¾ç»†åŒ–ã€‚</li>\n</ol>\n<h1 id=\"tidar\">TiDAR</h1>\n<blockquote>\n<ul>\n<li>TiDAR: Think in Diffusion, Talk in Autoregression</li>\n</ul>\n</blockquote>\n<p>è‹±ä¼Ÿè¾¾çš„è¿™ç¯‡è®ºæ–‡ï¼Œåˆ™æ˜¯å’ŒTRMæ€è·¯éå¸¸ç›¸åƒï¼Œéƒ½æ˜¯åœ¨ç”Ÿæˆé˜¶æ®µæŠ›å¼ƒè‡ªå›å½’â€œè¹¦å­—â€çš„æ–¹æ¡ˆï¼Œé‡‡ç”¨å…¨å±€ç”Ÿæˆå¹¶ä¸æ–­æ‰“ç£¨çš„æ€è·¯ã€‚åªä¸è¿‡TIDARå¼•å…¥äº†æ‰©æ•£æ¨¡å‹ï¼Œå¹¶åˆ‡è®©æ¨¡å‹åœ¨åŒä¸€ä¸ª Forward Passï¼ˆå‰å‘ä¼ æ’­ï¼‰é‡Œï¼Œæ—¢ä½œä¸ºâ€œèµ·è‰è€…â€å¹¶è¡Œåœ°æƒ³ï¼Œåˆä½œä¸ºâ€œéªŒè¯è€…â€è‡ªå›å½’åœ°ç¡®è®¤ã€‚</p>\n<h2 id=\"-æ ¸å¿ƒç—›ç‚¹æ—¢è¦è¿˜è¦çš„å›°å¢ƒ\">ğŸš¨ æ ¸å¿ƒç—›ç‚¹ï¼šæ—¢è¦è¿˜è¦çš„å›°å¢ƒ</h2>\n<p>åœ¨å¤§æ¨¡å‹æ¨ç†ä¸­ï¼Œæˆ‘ä»¬ä¸€ç›´é¢ä¸´ä¸€ä¸ªtrade-off</p>\n<ul>\n<li>ARï¼šè‡ªå›å½’æ¨¡å‹ç”±äºç¬¦åˆè¯­è¨€çš„å› æœå¾‹ï¼Œè´¨é‡æœ€é«˜ï¼Œä½†æ¨ç†é€Ÿåº¦æ…¢</li>\n<li>Diffusionï¼šéè‡ªå›å½’æ¨¡å‹å¯ä»¥å¹¶è¡Œç”Ÿæˆï¼Œååé‡æé«˜ä½†å¾€å¾€è´¨é‡ä¸ä½³ï¼Œå¹¶ä¸”è´¨é‡ä¼šéšç€ç”Ÿæˆçš„tokenä¸ªæ•°è€ŒæŒç»­ä¸‹é™ã€‚</li>\n</ul>\n<p>ç°åœ¨å·²æœ‰çš„ä¸€äº›è§£å†³æ–¹æ¡ˆä¾‹å¦‚DeepSeekæå‡ºçš„MTPï¼ŒåŒæ—¶é¢„æµ‹å¤šä¸ªtokenï¼Œä¹Ÿæ˜¯åœ¨å°è¯•è§£å†³ä»¥ä¸Šçš„é—®é¢˜ï¼Œä½†MTPçš„æœ¬è´¨è¿˜æ˜¯è‡ªå›å½’çš„ã€‚</p>\n<p>è¿˜æœ‰Speculative decodingï¼Œä½¿ç”¨ä¸€ä¸ªè½»é‡çº§çš„ARæ¨¡å‹å»ç”Ÿæˆå¤šä¸ªtokençš„è‰ç¨¿ï¼Œå†ç”¨å¤§æ¨¡å‹å¹¶è¡Œå¯¹è‰ç¨¿çš„æ¯ä¸ªtokenè¿›è¡ŒéªŒè¯ï¼Œä½†è¿™æ ·å°±éœ€è¦åŒæ—¶éƒ¨ç½²å¤šä¸ªæ¨¡å‹è¿›è¡Œæ¨ç†ã€‚</p>\n<h2 id=\"ï¸-è§£å†³æ–¹æ¡ˆ-think--talkçš„åŒæµååŒ\">ğŸ› ï¸ è§£å†³æ–¹æ¡ˆï¼š Think + Talkçš„åŒæµååŒ</h2>\n<p>TiDAR çš„æ¨¡å‹ç»“æ„åˆ™æ˜¯åœ¨speculative Decodingçš„åŸºç¡€ä¸Šï¼ŒæŠŠè‰ç¨¿æ¨¡å‹å’ŒéªŒè¯æ¨¡å‹åˆå¹¶åœ¨äº†ä¸€ä¸ªæ¨¡å‹ç»“æ„é‡Œï¼Œé€šè¿‡ç‰¹æ®Šæ©ç å®ç°åŒæ—¶æ¨ç†ã€‚</p>\n<ol>\n<li><strong>Think in Diffusion</strong></li>\n</ol>\n<p>åœ¨æ¨ç†æ—¶ï¼ŒTiDAR å¹¶ä¸åƒ GPT é‚£æ ·ä¸€æ¬¡åªé¢„æµ‹ä¸€ä¸ªè¯ã€‚å®ƒä½¿ç”¨ Diffusionçš„æ–¹æ¡ˆï¼Œåœ¨å½“å‰ä½ç½®ä¹‹åçš„Kä¸ªæ§½ä½ä¸Šï¼ŒåŒæ—¶ç”Ÿæˆæ‰€æœ‰å€™é€‰Tokenã€‚è¿™ <span class=\"math inline\">\\(K\\)</span> ä¸ª Token æ˜¯<strong>å¹¶è¡Œ</strong>ç”Ÿæˆçš„ã€‚å®ƒåˆ©ç”¨äº†æ‰©æ•£æ¨¡å‹çš„å…¨å±€è§†é‡ã€‚</p>\n<ol start=\"2\">\n<li><strong>Talk in Autoregression\"</strong></li>\n</ol>\n<p>ç”Ÿæˆçš„è¿™Kä¸ªå€™é€‰è¯å¹¶ä¸èƒ½ç›´æ¥ä½œä¸ºç­”æ¡ˆï¼Œå› ä¸º Diffusion çš„é€»è¾‘ä¸€è‡´æ€§ä¸å¦‚ ARã€‚TiDAR åœ¨åŒä¸€ä¸ªå‰å‘ä¼ æ’­ä¸­ï¼Œåˆ©ç”¨ AR çš„é€»è¾‘å¯¹è¿™Kä¸ªå€™é€‰è¯è¿›è¡Œæ‹’ç»é‡‡æ ·ã€‚</p>\n<p><img alt=\"image\" class=\"lazyload\" /></p>\n<ol start=\"3\">\n<li><strong>åŒæµçš„æ ¸å¿ƒå®ç°ï¼šç»“æ„åŒ–æ³¨æ„åŠ›æ©ç </strong></li>\n</ol>\n<p>ä¸ºäº†åœ¨ä¸€æ¬¡å‘å‰æ¨ç†æ—¶ï¼ŒåŒæ—¶å®ç°ä»¥ä¸Šä¸¤ç§æ¨ç†ï¼ŒTIDARè®¾è®¡äº†ä¸€ä¸ªç‰¹æ®Šçš„äºŒç»´MASKï¼Œå°†åºåˆ—åˆ†æˆäº†ä¸¤ä¸ªéƒ¨åˆ†</p>\n<ul>\n<li>Diffusion MASKï¼šè¿™ä¸ªåŒºåŸŸçš„tokenç›´æ¥æ˜¯å…¨è¿æ¥çš„ï¼Œä¸ºäº†è®©æ¨¡å‹èƒ½å¤Ÿæ ¹æ®ä¸Šæ–‡åŒæ—¶çŒœå‡ºåé¢Kä¸ªè¯</li>\n<li>AR MASKï¼šè¿™ä¸ªåŒºåŸŸæ˜¯causal MASKï¼Œå®ƒè´Ÿè´£æ ¹æ®ä¸Šä¸‹æ–‡å’Œå‰é¢çŒœå‡ºçš„è‰ç¨¿è¿›è¡Œé€’å½’ç”Ÿæˆã€‚</li>\n</ul>\n<p>è¿™æ ·åœ¨ä¸€æ¬¡å‘å‰æ¨ç†ä¸­ï¼ŒInpäº¡çš„KV Cacheä¼šå‚ä¸ä¸¤æ¬¡è®¡ç®—</p>\n<ul>\n<li>Input â€”&gt; Think Mask -&gt; Diffusion Drafts</li>\n<li>Input + Diffusion Drafts -&gt; AR Mask -&gt; Final verified Token</li>\n</ul>\n<ol start=\"4\">\n<li><strong>å¤šä»»åŠ¡è”åˆä¼˜åŒ–è®­ç»ƒ</strong></li>\n</ol>\n<p>ä¸ºäº†åŒæ—¶è®­ç»ƒDiffusionå’ŒARï¼ŒTIDARåœ¨ä¼ ç»Ÿçš„NSPè®­ç»ƒçš„åŸºç¡€ä¸Šè¿›è¡Œäº†æ”¹è‰¯ï¼ŒåŒæ—¶è®­ç»ƒä¸¤ä¸ªloss</p>\n<ul>\n<li>Diffusion Lossï¼šè®­ç»ƒæ¨¡å‹åœ¨ç»™å®šä¸Šä¸‹æ–‡å’Œéƒ¨åˆ†å™ªå£°çš„æƒ…å†µä¸‹ï¼Œå¹¶è¡Œé‡æ„å‡ºåç»­ <span class=\"math inline\">\\(K\\)</span> ä¸ªè¯çš„èƒ½åŠ›ã€‚</li>\n<li>AR Lossï¼šæ ‡å‡†çš„äº¤å‰ç†µæŸå¤±ï¼Œç¡®ä¿æ¨¡å‹çš„æœ€ç»ˆè¾“å‡ºç¬¦åˆè¯­è¨€æ¦‚ç‡åˆ†å¸ƒ</li>\n</ul>\n<hr />\n<h1 id=\"æ€»ç»“æ¨ç†çš„æœªæ¥æ˜¯å‘å†…ç”Ÿé•¿\">æ€»ç»“ï¼šæ¨ç†çš„æœªæ¥æ˜¯â€œå‘å†…ç”Ÿé•¿â€ï¼Ÿ</h1>\n<p>ä»ä»¥ä¸Šå››ç¯‡è®ºæ–‡ï¼Œæˆ‘ä»¬ä¸å¦¨çŒœæµ‹ä¸‹åReasoningæ—¶ä»£çš„æŠ€æœ¯æ¼”è¿›æ–¹å‘</p>\n<ol>\n<li>ä»Explicitåˆ°Implicitï¼Ÿ</li>\n<li>ä»Linearåˆ°Recurrentï¼Ÿ</li>\n<li>ä»ARåˆ°Hybridï¼Ÿ</li>\n</ol>\n<p>æœªæ¥çš„å¤§æ¨¡å‹ï¼Œæˆ–è®¸ä¼šå˜å¾—æ›´åƒäººç±»çš„å¤§è„‘ï¼š è¡¨é¢ä¸Šæ²‰é»˜å¯¡è¨€ï¼Œä½†å†…å¿ƒæˆæå…¶ä¸°å¯Œï¼Œå¹¶ä¸”èƒ½å¤Ÿåå¤æ¨æ•²ï¼Œæœ€ç»ˆç»™å‡ºä¸€ä¸ªæ·±æ€ç†Ÿè™‘çš„ç­”æ¡ˆã€‚</p>\n<p>æƒ³çœ‹æ›´å…¨çš„å¤§æ¨¡å‹è®ºæ–‡Â·å¾®è°ƒé¢„è®­ç»ƒæ•°æ®Â·å¼€æºæ¡†æ¶Â·AIGCåº”ç”¨ &gt;&gt; <a href=\"https://github.com/DSXiangLi?tab=repositories\" rel=\"noopener nofollow\" target=\"_blank\">DecryPrompt</a></p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-15 08:52</span>&nbsp;\n<a href=\"https://www.cnblogs.com/gogoSandy\">é£é›¨ä¸­çš„å°ä¸ƒ</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">0</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "ä¸æœè·‘ä¸ªåˆ†ï¼Ÿ.NET 10 å¤§æ•´æ•°è®¡ç®—å¯¹é˜µ Javaï¼Œç»“æœä»¤äººæ„å¤–",
      "link": "https://www.cnblogs.com/sdcb/p/19484525/20261113-big-integer-dotnet-10-vs-java",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/sdcb/p/19484525/20261113-big-integer-dotnet-10-vs-java\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-15 08:50\">\n    <span>ä¸æœè·‘ä¸ªåˆ†ï¼Ÿ.NET 10 å¤§æ•´æ•°è®¡ç®—å¯¹é˜µ Javaï¼Œç»“æœä»¤äººæ„å¤–</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h2 id=\"å¼•è¨€ä»ç»éªŒå€¼åˆ°æ— é™å¤§\">å¼•è¨€ï¼šä»â€œç»éªŒå€¼â€åˆ°æ— é™å¤§</h2>\n<p>æˆ‘å¯¹æ•°å€¼è®¡ç®—çš„æ‰§å¿µï¼Œæ¥è‡ªåˆä¸­æ—¶ä»£çƒŸé›¾ç¼­ç»•çš„ç½‘å§ã€‚é‚£æ—¶ç©ã€Šä¼å¥‡ã€‹ï¼Œæœ€è®©æˆ‘ç€è¿·çš„ä¸æ˜¯æ‰“æ€ªçˆ†è£…å¤‡ï¼Œè€Œæ˜¯è§’è‰²é¢æ¿é‡Œé‚£æ¡é•¿é•¿çš„<strong>ç»éªŒå€¼</strong>ã€‚çœ‹ç€æ•°å­—ä¸æ–­è·³åŠ¨ã€ç´¯ç§¯ï¼Œæœ€ç»ˆâ€œå®â€ä¸€å£°å‡çº§ï¼Œé‚£ç§ç®€å•çš„æ•°å€¼é©±åŠ¨æ•´ä¸ªä¸–ç•Œè¿è½¬çš„æ„Ÿè§‰ï¼Œå®åœ¨å¤ªå¥‡å¦™äº†ã€‚</p>\n<p>å½“æ—¶è‡ªå­¦ç¼–ç¨‹ï¼Œä» G-BASIC é‡Œåªæœ‰ 16 ä½çš„ <code>INTEGER</code>ï¼Œåˆ°ç¬¬ä¸€æ¬¡å‘ç° QBASIC <code>LONG</code> èƒ½å­˜ä¸‹â€œ20äº¿â€æ—¶çš„å…´å¥‹ï¼Œå†åˆ°å¦‚ä»Šæˆä¸ºä¸€å .NET ç¨‹åºå‘˜ï¼Œæ‰‹æ¡ç†è®ºä¸Šâ€œæ— é™å¤§â€çš„ <code>System.Numerics.BigInteger</code>ã€‚æˆ‘å¯¹å¤§æ•°çš„è¿·æ‹ä»æœªæ”¹å˜ï¼Œåªæ˜¯ç–‘æƒ‘éšä¹‹è€Œæ¥ï¼š</p>\n<blockquote>\n<p><strong>ä½œä¸º .NET å¼€å‘è€…ï¼Œæˆ‘æ‰‹é‡Œçš„ <code>BigInteger</code> åˆ°åº•å¤Ÿä¸å¤Ÿå¿«ï¼Ÿç‰¹åˆ«æ˜¯å’Œéš”å£ Java çš„ <code>BigInteger</code> ç›¸æ¯”ï¼Œç©¶ç«Ÿè°æ›´èƒœä¸€ç­¹ï¼Ÿ</strong></p>\n</blockquote>\n<p>å°¤å…¶æ˜¯æ¶‰åŠé«˜ç²¾åº¦è®¡ç®—ã€å¯†ç å­¦ç­‰å…³é”®é¢†åŸŸæ—¶ï¼Œè¿™ä¸ä»…æ˜¯å¥½å¥‡ï¼Œæ›´æ˜¯å…³ä¹æ€§èƒ½çš„ä¸¥è‚ƒæ‹·é—®ã€‚ä»Šå¤©ï¼Œæˆ‘å°±é€šè¿‡ä¸€æ¬¡è¯¦å°½çš„å¯¹æ¯”æµ‹è¯•ï¼ˆå« .NET 10ã€Java 21ä»¥åŠJava 8ï¼‰ï¼Œæ¥ä¸ºå¤§å®¶æ­æ™“ç­”æ¡ˆã€‚ç»“æœå¯èƒ½å‡ºä¹æ„æ–™ï¼Œè¯·åŠ¡å¿…çœ‹åˆ°æœ€åï¼Œæ–‡æœ«è¿˜æœ‰ä¸€ä¸ªé«˜æ€§èƒ½çš„â€œå½©è›‹â€ã€‚</p>\n<hr />\n<h2 id=\"å®éªŒç›®æ ‡ä¸èŒƒå›´\">å®éªŒç›®æ ‡ä¸èŒƒå›´</h2>\n<p>æˆ‘ä»¬å¯¹æ¯”è¿™ä¸‰å¥—å®ç°ï¼š</p>\n<ul>\n<li><strong>.NET</strong>ï¼š<code>System.Numerics.BigInteger</code>ï¼ˆåŸºäº .NET 10ï¼‰</li>\n<li><strong>Java</strong>ï¼š<code>java.math.BigInteger</code>\n<ul>\n<li><strong>Java 21ï¼ˆæœ€æ–°LTSï¼‰</strong>ï¼šä»£è¡¨æœªæ¥è¶‹åŠ¿</li>\n<li><strong>Java 8ï¼ˆå›½å†…å­˜é‡æœ€å¤§ï¼‰</strong>ï¼šä»£è¡¨åºå¤§çš„ç°çŠ¶</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"æµ‹è¯•æ“ä½œ3ç±»è¦†ç›–å¸¸è§å¤§æ•°çƒ­ç‚¹\">æµ‹è¯•æ“ä½œï¼ˆ3ç±»ï¼Œè¦†ç›–å¸¸è§å¤§æ•°çƒ­ç‚¹ï¼‰</h3>\n<ol>\n<li><strong>ADD_MOD</strong>ï¼š<code>(a + b) mod m</code>ï¼ˆåŠ æ³• + å–æ¨¡ï¼‰</li>\n<li><strong>MUL_MOD</strong>ï¼š<code>(a * b) mod m</code>ï¼ˆä¹˜æ³• + å–æ¨¡ï¼‰</li>\n<li><strong>MODPOW</strong>ï¼š<code>a^e mod m</code>ï¼ˆæ¨¡å¹‚ï¼Œå¯†ç å­¦ç­‰åœºæ™¯çš„æ€§èƒ½çƒ­ç‚¹ï¼‰</li>\n</ol>\n<h3 id=\"ä½å®½3æ¡£\">ä½å®½ï¼ˆ3æ¡£ï¼‰</h3>\n<ul>\n<li>256 / 1024 / 4096 bits</li>\n</ul>\n<h3 id=\"è®¡æ—¶å£å¾„å°½é‡æŠ‘åˆ¶å™ªå£°\">è®¡æ—¶å£å¾„ï¼ˆå°½é‡æŠ‘åˆ¶å™ªå£°ï¼‰</h3>\n<ul>\n<li><strong>çƒ­èº«</strong>ï¼šé¢„çƒ­ 5 æ¬¡ï¼Œè®© JITï¼ˆå³æ—¶ç¼–è¯‘å™¨ï¼‰å……åˆ†å‘æŒ¥ã€‚</li>\n<li><strong>æµ‹é‡</strong>ï¼šæ­£å¼è·‘ 11 æ¬¡ï¼Œå–ä¸­ä½æ•°ï¼Œé¿å…å•æ¬¡æŠ–åŠ¨å¹²æ‰°ã€‚</li>\n<li><strong>æŒ‡æ ‡</strong>ï¼š<code>nsPerOp</code>ï¼ˆæ¯æ¬¡æ“ä½œè€—æ—¶å¤šå°‘çº³ç§’ï¼‰ï¼Œè¿™ä¸ªå€¼<strong>è¶Šå°è¶Šå¥½</strong>ã€‚</li>\n<li><strong>é˜²ä½œå¼Š</strong>ï¼šç”¨ <code>XOR</code> èšåˆæ¯æ¬¡è®¡ç®—ç»“æœï¼Œé˜²æ­¢èªæ˜çš„ç¼–è¯‘å™¨æŠŠæ•´ä¸ªå¾ªç¯ä¼˜åŒ–æ‰ã€‚</li>\n</ul>\n<hr />\n<h2 id=\"æµ‹è¯•ç¯å¢ƒ\">æµ‹è¯•ç¯å¢ƒ</h2>\n<blockquote>\n<p>è¯´æ˜ï¼šä»¥ä¸‹æ˜¯åœ¨åŒä¸€ Linux å®¹å™¨å†…å®Œæˆã€‚å®¹å™¨æœ‰èµ„æºé™åˆ¶ï¼Œå› æ­¤â€œçœ‹åˆ°çš„ CPU æ ¸æ•°/å†…å­˜â€ä¸å®¿ä¸»æœºä¸å®Œå…¨ä¸€è‡´ã€‚</p>\n</blockquote>\n<ul>\n<li><strong>OS</strong>ï¼šUbuntu 24.04.3 LTS</li>\n<li><strong>CPUï¼ˆå®¿ä¸»æœºå‹å·ï¼‰</strong>ï¼šAMD EPYC 7763 64-Core Processor<br />\n<strong>å®¹å™¨å¯ç”¨æ ¸å¿ƒæ•°</strong>ï¼š2 æ ¸ï¼ˆå—å®¹å™¨é™åˆ¶ï¼‰</li>\n<li><strong>å†…å­˜</strong>ï¼š2GBï¼ˆå®¹å™¨é™åˆ¶ï¼‰</li>\n<li><strong>.NET</strong>\n<ul>\n<li>SDKï¼š10.0.101</li>\n<li>Runtimeï¼š10.0.1</li>\n<li>ç¯å¢ƒå˜é‡ï¼š<code>DOTNET_GCServer=1</code></li>\n</ul>\n</li>\n<li><strong>Java</strong>\n<ul>\n<li>Java 21ï¼šOpenJDK 21.0.9ï¼ˆLTSï¼‰</li>\n<li>Java 8ï¼šTemurin(OpenJDK) 1.8.0_472-b08ï¼ˆå¹¿æ³›ä½¿ç”¨çš„ 8u ç³»åˆ—ï¼‰</li>\n<li>JVM å‚æ•°ï¼ˆä¸¤ç‰ˆæœ¬ä¸€è‡´ï¼‰ï¼š\n<ul>\n<li><code>-Xms1g -Xmx1g</code>ï¼ˆæŠŠ Java å †å›ºå®šä¸º 1GBï¼Œé¿å…å †åŠ¨æ€æ‰©å¼ å¹²æ‰°ï¼‰</li>\n<li><code>-XX:+UseG1GC</code></li>\n<li><code>-XX:+AlwaysPreTouch</code>ï¼ˆå°½é‡å‡å°‘è¿è¡Œä¸­é¡µåˆ†é…æ‰°åŠ¨ï¼‰</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><strong>ä¸€è‡´æ€§çº¦æŸ</strong>\n<ul>\n<li>Java 8/Java 21 ä½¿ç”¨<strong>åŒä¸€ä»½æºç </strong>ï¼ˆä»…ä½¿ç”¨ Java 8 è¯­æ³•ï¼‰ï¼Œå¹¶ä¸” <strong>ç”¨ Java 8 çš„ <code>javac</code> ç¼–è¯‘</strong>ï¼ˆclassfile=52.0ï¼‰ååˆ†åˆ«åœ¨ Java 8 / Java 21 ä¸Šè¿è¡Œï¼Œä»è€Œå°½é‡æŠŠå·®å¼‚å½’å› åˆ°è¿è¡Œæ—¶/JIT/åº“å®ç°ï¼Œè€Œä¸æ˜¯ç¼–è¯‘å™¨ç”Ÿæˆå·®å¼‚ã€‚</li>\n</ul>\n</li>\n</ul>\n<hr />\n<h2 id=\"èµ›å‰æ’æ›²net-biginteger-çœŸçš„ä¸å…¬å¹³å—\">èµ›å‰æ’æ›²ï¼š.NET BigInteger çœŸçš„â€œä¸å…¬å¹³â€å—ï¼Ÿ</h2>\n<p>æœ‰äººå¯èƒ½æƒ³é—®ï¼š</p>\n<blockquote>\n<p>â€œ.NET BigInteger æ¯æ¬¡è¿ç®—éƒ½ä¼šåˆ›å»ºæ–°çš„å¯¹è±¡ï¼ˆä¸å¯å˜ï¼‰ï¼Œä¸å…¬å¹³ã€‚â€</p>\n</blockquote>\n<p>è¿™å¥è¯åœ¨â€œå¤§æ•°åœºæ™¯â€é‡ŒåŸºæœ¬æˆç«‹ï¼Œä½†<strong>Java BigInteger åŒæ ·æ˜¯ä¸å¯å˜ç±»å‹</strong>ï¼š<code>add/multiply/mod/xor/modPow</code> éƒ½ä¼šè¿”å›æ–°å€¼ï¼Œä¸šåŠ¡ä»£ç å±‚é¢ä½ å¹¶æ²¡æœ‰å…¬å¼€çš„ in-place API å¯ä»¥å¤ç”¨å†…éƒ¨ç¼“å†²ã€‚</p>\n<p>å› æ­¤ï¼Œåœ¨æœ¬æ–‡çš„â€œä¸»å¯¹æ¯”â€ï¼ˆ.NET vs Javaï¼‰é‡Œï¼ŒåŒæ–¹éƒ½åœ¨ä¸å¯å˜èŒƒå¼ä¸‹è¿è¡Œï¼Œè¿™ç‚¹æ˜¯å…¬å¹³çš„ã€‚</p>\n<hr />\n<h2 id=\"å®éªŒä¸€net-biginteger-vs-java-21-biginteger\">å®éªŒä¸€ï¼š.NET BigInteger vs Java 21 BigInteger</h2>\n<h3 id=\"31-å®Œæ•´æºä»£ç \">3.1 å®Œæ•´æºä»£ç </h3>\n<h4 id=\"java-æºç bigintbenchjava\">Java æºç ï¼š<code>BigIntBench.java</code></h4>\n<blockquote>\n<p>å…¼å®¹ Java 8 è¯­æ³•ï¼›åŒä¸€ä»½ä»£ç åœ¨ Java 21 ä¸‹è¿è¡Œã€‚</p>\n</blockquote>\n<pre><code class=\"language-java\">import java.math.BigInteger;\nimport java.util.*;\n\npublic class BigIntBench {\n    // SplitMix64 RNG (deterministic, fast)\n    static final class SplitMix64 {\n        private long x;\n        SplitMix64(long seed) { this.x = seed; }\n        long nextLong() {\n            long z = (x += 0x9E3779B97F4A7C15L);\n            z = (z ^ (z &gt;&gt;&gt; 30)) * 0xBF58476D1CE4E5B9L;\n            z = (z ^ (z &gt;&gt;&gt; 27)) * 0x94D049BB133111EBL;\n            return z ^ (z &gt;&gt;&gt; 31);\n        }\n        void nextBytes(byte[] dst) {\n            int i = 0;\n            while (i &lt; dst.length) {\n                long v = nextLong();\n                for (int k = 0; k &lt; 8 &amp;&amp; i &lt; dst.length; k++) {\n                    dst[i++] = (byte)(v &gt;&gt;&gt; (56 - 8*k)); // big-endian stream\n                }\n            }\n        }\n    }\n\n    static BigInteger[] genBigInts(int bitSize, int count, long seed) {\n        SplitMix64 rng = new SplitMix64(seed);\n        int byteLen = (bitSize + 7) / 8;\n        BigInteger[] arr = new BigInteger[count];\n        byte[] buf = new byte[byteLen];\n        int topBit = (bitSize - 1) % 8;\n        int keepBits = topBit + 1;\n        int firstMask = (keepBits == 8) ? 0xFF : ((1 &lt;&lt; keepBits) - 1);\n        byte topMask = (byte)(1 &lt;&lt; topBit);\n        for (int i = 0; i &lt; count; i++) {\n            rng.nextBytes(buf);\n            // Ensure exact bit length:\n            // - mask away unused top bits when bitSize is not byte-aligned\n            // - set the top bit so the number has the requested bit length\n            buf[0] &amp;= (byte)firstMask;\n            buf[0] |= topMask;\n            arr[i] = new BigInteger(1, buf);\n        }\n        return arr;\n    }\n\n    static BigInteger genModulus(int bitSize, long seed) {\n        SplitMix64 rng = new SplitMix64(seed);\n        int byteLen = (bitSize + 7) / 8;\n        byte[] buf = new byte[byteLen];\n        rng.nextBytes(buf);\n        int topBit = (bitSize - 1) % 8;\n        int keepBits = topBit + 1;\n        int firstMask = (keepBits == 8) ? 0xFF : ((1 &lt;&lt; keepBits) - 1);\n        buf[0] &amp;= (byte)firstMask;\n        buf[0] |= (byte)(1 &lt;&lt; topBit);\n        buf[buf.length - 1] |= 1; // odd\n        return new BigInteger(1, buf);\n    }\n\n    enum Op { ADD_MOD, MUL_MOD, MODPOW }\n\n    static final class Result {\n        final String lang;\n        final int bits;\n        final Op op;\n        final long ops;\n        final double nsPerOp;\n        final long checksum;\n        Result(String lang, int bits, Op op, long ops, double nsPerOp, long checksum) {\n            this.lang = lang; this.bits = bits; this.op = op; this.ops = ops; this.nsPerOp = nsPerOp; this.checksum = checksum;\n        }\n        String toJson() {\n            return String.format(Locale.ROOT,\n                    \"{\\\"lang\\\":\\\"%s\\\",\\\"bits\\\":%d,\\\"op\\\":\\\"%s\\\",\\\"ops\\\":%d,\\\"nsPerOp\\\":%.3f,\\\"checksum\\\":%d}\",\n                    lang, bits, op.name(), ops, nsPerOp, checksum);\n        }\n    }\n\n    static long runOnce(Op op, BigInteger[] a, BigInteger[] b, BigInteger[] e, BigInteger mod, int outer) {\n        BigInteger acc = BigInteger.ZERO;\n        int n = a.length;\n        switch (op) {\n            case ADD_MOD:\n                for (int o = 0; o &lt; outer; o++) {\n                    for (int i = 0; i &lt; n; i++) {\n                        BigInteger r = a[i].add(b[i]).mod(mod);\n                        acc = acc.xor(r);\n                    }\n                }\n                break;\n\n            case MUL_MOD:\n                for (int o = 0; o &lt; outer; o++) {\n                    for (int i = 0; i &lt; n; i++) {\n                        BigInteger r = a[i].multiply(b[i]).mod(mod);\n                        acc = acc.xor(r);\n                    }\n                }\n                break;\n\n            case MODPOW:\n                // here we use a.length as n; e can be same length\n                for (int o = 0; o &lt; outer; o++) {\n                    for (int i = 0; i &lt; n; i++) {\n                        BigInteger r = a[i].modPow(e[i], mod);\n                        acc = acc.xor(r);\n                    }\n                }\n                break;\n\n            default:\n                throw new IllegalArgumentException(\"Unknown op: \" + op);\n        }\n        return acc.longValue();\n    }\n\n    static Result bench(String lang, int bits, Op op, BigInteger[] a, BigInteger[] b, BigInteger[] e, BigInteger mod, long targetOps, int warmups, int measures) {\n        int n = a.length;\n        int outer = (int)Math.max(1, targetOps / n);\n        long actualOps = (long)n * outer;\n\n        // warmup\n        long ck = 0;\n        for (int i = 0; i &lt; warmups; i++) {\n            ck ^= runOnce(op, a, b, e, mod, outer);\n        }\n\n        long[] times = new long[measures];\n        for (int i = 0; i &lt; measures; i++) {\n            long t0 = System.nanoTime();\n            long c = runOnce(op, a, b, e, mod, outer);\n            long t1 = System.nanoTime();\n            ck ^= c;\n            times[i] = (t1 - t0);\n        }\n        Arrays.sort(times);\n        long median = times[times.length / 2];\n        double nsPerOp = (double)median / (double)actualOps;\n        return new Result(lang, bits, op, actualOps, nsPerOp, ck);\n    }\n\n    static void printHuman(List&lt;Result&gt; results) {\n        System.out.println(\"Java BigInteger benchmark\");\n        System.out.println(\"java.version=\" + System.getProperty(\"java.version\"));\n        System.out.println(\"java.vm.name=\" + System.getProperty(\"java.vm.name\"));\n        System.out.println();\n        System.out.printf(Locale.ROOT, \"%-6s %-9s %-12s %-12s\\n\", \"Bits\", \"Op\", \"ns/op(med)\", \"ops/run\");\n        for (Result r : results) {\n            System.out.printf(Locale.ROOT, \"%-6d %-9s %-12.3f %-12d\\n\", r.bits, r.op.name(), r.nsPerOp, r.ops);\n        }\n        System.out.println();\n        System.out.println(\"checksum=\" + results.stream().mapToLong(x -&gt; x.checksum).reduce(0L, (x,y)-&gt;x^y));\n    }\n\n    public static void main(String[] args) {\n        boolean json = false;\n        for (String a : args) if (a.equals(\"--json\")) json = true;\n\n        int warmups = 5;\n        int measures = 11;\n\n        int[] bitSizes = new int[]{256, 1024, 4096};\n        List&lt;Result&gt; results = new ArrayList&lt;&gt;();\n\n        for (int bits : bitSizes) {\n            BigInteger mod = genModulus(bits, 0xA1B2C3D4E5F60708L ^ bits);\n\n            // add/mul datasets\n            int nAddMul = 1024;\n            BigInteger[] a = genBigInts(bits, nAddMul, 0x1111222233334444L ^ bits);\n            BigInteger[] b = genBigInts(bits, nAddMul, 0x9999AAAABBBBCCCCL ^ bits);\n\n            // modpow datasets (smaller)\n            int nPow = 256;\n            BigInteger[] ap = genBigInts(bits, nPow, 0x13579BDF2468ACE0L ^ bits);\n            BigInteger[] ep = genBigInts(Math.min(bits, 512), nPow, 0x0FEDCBA987654321L ^ bits);\n\n            long addOps;\n            long mulOps;\n            long powOps;\n            if (bits == 256) {\n                addOps = 2_000_000L;\n                mulOps = 500_000L;\n                powOps = 8_000L;\n            } else if (bits == 1024) {\n                addOps = 1_000_000L;\n                mulOps = 120_000L;\n                powOps = 1_500L;\n            } else {\n                addOps = 200_000L;\n                mulOps = 20_000L;\n                powOps = 250L;\n            }\n\n            results.add(bench(\"java\", bits, Op.ADD_MOD, a, b, null, mod, addOps, warmups, measures));\n            results.add(bench(\"java\", bits, Op.MUL_MOD, a, b, null, mod, mulOps, warmups, measures));\n            results.add(bench(\"java\", bits, Op.MODPOW, ap, null, ep, mod, powOps, warmups, measures));\n        }\n\n        if (json) {\n            for (Result r : results) System.out.println(r.toJson());\n        } else {\n            printHuman(results);\n        }\n    }\n}\n</code></pre>\n<h4 id=\"net-æºç programcsbiginteger-éƒ¨åˆ†\">.NET æºç ï¼š<code>Program.cs</code>ï¼ˆBigInteger éƒ¨åˆ†ï¼‰</h4>\n<blockquote>\n<p>è¿™æ˜¯â€œä¸»å¯¹æ¯”â€ç”¨çš„ .NET åŸºå‡†ç¨‹åºã€‚</p>\n</blockquote>\n<pre><code class=\"language-csharp\">using System;\nusing System.Collections.Generic;\nusing System.Diagnostics;\nusing System.Globalization;\nusing System.Linq;\nusing System.Numerics;\n\nsealed class SplitMix64\n{\n    private ulong _x;\n    public SplitMix64(ulong seed) =&gt; _x = seed;\n\n    public ulong NextUInt64()\n    {\n        ulong z = (_x += 0x9E3779B97F4A7C15UL);\n        z = (z ^ (z &gt;&gt; 30)) * 0xBF58476D1CE4E5B9UL;\n        z = (z ^ (z &gt;&gt; 27)) * 0x94D049BB133111EBUL;\n        return z ^ (z &gt;&gt; 31);\n    }\n\n    public void NextBytes(byte[] dst)\n    {\n        int i = 0;\n        while (i &lt; dst.Length)\n        {\n            ulong v = NextUInt64();\n            for (int k = 0; k &lt; 8 &amp;&amp; i &lt; dst.Length; k++)\n            {\n                dst[i++] = (byte)(v &gt;&gt; (56 - 8 * k)); // big-endian stream\n            }\n        }\n    }\n}\n\nenum Op { ADD_MOD, MUL_MOD, MODPOW }\n\nrecord Result(string Lang, int Bits, Op Op, long Ops, double NsPerOp, long Checksum)\n{\n    public string ToJson() =&gt; string.Create(CultureInfo.InvariantCulture,\n        $\"{{\\\"lang\\\":\\\"{Lang}\\\",\\\"bits\\\":{Bits},\\\"op\\\":\\\"{Op}\\\",\\\"ops\\\":{Ops},\\\"nsPerOp\\\":{NsPerOp:F3},\\\"checksum\\\":{Checksum}}}\");\n}\n\nstatic class BigIntBench\n{\n    static BigInteger[] GenBigInts(int bitSize, int count, ulong seed)\n    {\n        var rng = new SplitMix64(seed);\n        int byteLen = (bitSize + 7) / 8;\n        var arr = new BigInteger[count];\n        var buf = new byte[byteLen];\n        int topBit = (bitSize - 1) % 8;\n        byte topMask = (byte)(1 &lt;&lt; topBit);\n\n        for (int i = 0; i &lt; count; i++)\n        {\n            rng.NextBytes(buf);\n            buf[0] |= topMask;\n            // unsigned + big-endian prevents negative\n            arr[i] = new BigInteger(buf, isUnsigned: true, isBigEndian: true);\n        }\n        return arr;\n    }\n\n    static BigInteger GenModulus(int bitSize, ulong seed)\n    {\n        var rng = new SplitMix64(seed);\n        int byteLen = (bitSize + 7) / 8;\n        var buf = new byte[byteLen];\n        rng.NextBytes(buf);\n        int topBit = (bitSize - 1) % 8;\n        buf[0] |= (byte)(1 &lt;&lt; topBit);\n        buf[^1] |= 1; // odd\n        return new BigInteger(buf, isUnsigned: true, isBigEndian: true);\n    }\n\n    static long RunOnce(Op op, BigInteger[] a, BigInteger[] b, BigInteger[] e, BigInteger mod, int outer)\n    {\n        BigInteger acc = BigInteger.Zero;\n        int n = a.Length;\n\n        switch (op)\n        {\n            case Op.ADD_MOD:\n                for (int o = 0; o &lt; outer; o++)\n                    for (int i = 0; i &lt; n; i++)\n                    {\n                        var r = (a[i] + b[i]) % mod;\n                        acc ^= r;\n                    }\n                break;\n\n            case Op.MUL_MOD:\n                for (int o = 0; o &lt; outer; o++)\n                    for (int i = 0; i &lt; n; i++)\n                    {\n                        var r = (a[i] * b[i]) % mod;\n                        acc ^= r;\n                    }\n                break;\n\n            case Op.MODPOW:\n                for (int o = 0; o &lt; outer; o++)\n                    for (int i = 0; i &lt; n; i++)\n                    {\n                        var r = BigInteger.ModPow(a[i], e[i], mod);\n                        acc ^= r;\n                    }\n                break;\n        }\n\n        return (long)(acc &amp; long.MaxValue); // stable checksum\n    }\n\n    static Result Bench(string lang, int bits, Op op, BigInteger[] a, BigInteger[] b, BigInteger[] e, BigInteger mod, long targetOps, int warmups, int measures)\n    {\n        int n = a.Length;\n        int outer = (int)Math.Max(1, targetOps / n);\n        long actualOps = (long)n * outer;\n\n        long ck = 0;\n        for (int i = 0; i &lt; warmups; i++)\n            ck ^= RunOnce(op, a, b, e, mod, outer);\n\n        long[] timesNs = new long[measures];\n        for (int i = 0; i &lt; measures; i++)\n        {\n            var sw = Stopwatch.StartNew();\n            long c = RunOnce(op, a, b, e, mod, outer);\n            sw.Stop();\n            ck ^= c;\n            // Stopwatch ticks to ns\n            timesNs[i] = (long)(sw.ElapsedTicks * (1_000_000_000.0 / Stopwatch.Frequency));\n        }\n\n        Array.Sort(timesNs);\n        long median = timesNs[timesNs.Length / 2];\n        double nsPerOp = (double)median / actualOps;\n        return new Result(lang, bits, op, actualOps, nsPerOp, ck);\n    }\n\n    static void PrintHuman(List&lt;Result&gt; results)\n    {\n        Console.WriteLine(\"C# BigInteger benchmark\");\n        Console.WriteLine($\"dotnet.version={Environment.Version}\");\n        Console.WriteLine($\"os={System.Runtime.InteropServices.RuntimeInformation.OSDescription}\");\n        Console.WriteLine($\"arch={System.Runtime.InteropServices.RuntimeInformation.OSArchitecture}\");\n        Console.WriteLine();\n        Console.WriteLine($\"{ \"Bits\",-6} {\"Op\",-9} {\"ns/op(med)\",-12} {\"ops/run\",-12}\");\n        foreach (var r in results)\n            Console.WriteLine(string.Create(CultureInfo.InvariantCulture, $\"{r.Bits,-6} {r.Op,-9} {r.NsPerOp,-12:F3} {r.Ops,-12}\"));\n        Console.WriteLine();\n        long checksum = 0;\n        foreach (var r in results) checksum ^= r.Checksum;\n        Console.WriteLine($\"checksum={checksum}\");\n    }\n\n    public static int Main(string[] args)\n    {\n        bool json = args.Any(a =&gt; a == \"--json\");\n\n        int warmups = 5;\n        int measures = 11;\n        int[] bitSizes = [256, 1024, 4096];\n\n        var results = new List&lt;Result&gt;();\n\n        foreach (int bits in bitSizes)\n        {\n            var mod = GenModulus(bits, 0xA1B2C3D4E5F60708UL ^ (uint)bits);\n\n            int nAddMul = 1024;\n            var a = GenBigInts(bits, nAddMul, 0x1111222233334444UL ^ (uint)bits);\n            var b = GenBigInts(bits, nAddMul, 0x9999AAAABBBBCCCCUL ^ (uint)bits);\n\n            int nPow = 256;\n            var ap = GenBigInts(bits, nPow, 0x13579BDF2468ACE0UL ^ (uint)bits);\n            var ep = GenBigInts(Math.Min(bits, 512), nPow, 0x0FEDCBA987654321UL ^ (uint)bits);\n\n            long addOps = bits switch { 256 =&gt; 2_000_000L, 1024 =&gt; 1_000_000L, _ =&gt; 200_000L };\n            long mulOps = bits switch { 256 =&gt; 500_000L, 1024 =&gt; 120_000L, _ =&gt; 20_000L };\n            long powOps = bits switch { 256 =&gt; 8_000L, 1024 =&gt; 1_500L, _ =&gt; 250L };\n\n            results.Add(Bench(\"csharp\", bits, Op.ADD_MOD, a, b, null!, mod, addOps, warmups, measures));\n            results.Add(Bench(\"csharp\", bits, Op.MUL_MOD, a, b, null!, mod, mulOps, warmups, measures));\n            results.Add(Bench(\"csharp\", bits, Op.MODPOW, ap, null!, ep, mod, powOps, warmups, measures));\n        }\n\n        if (json)\n        {\n            foreach (var r in results) Console.WriteLine(r.ToJson());\n        }\n        else\n        {\n            PrintHuman(results);\n        }\n\n        return 0;\n    }\n}\n</code></pre>\n<h3 id=\"32-è¿è¡Œæ–¹å¼å¯å¤ç°å‘½ä»¤\">3.2 è¿è¡Œæ–¹å¼ï¼ˆå¯å¤ç°å‘½ä»¤ï¼‰</h3>\n<pre><code class=\"language-bash\"># Java 21\ncd /app/bigintbench/java\njavac BigIntBench.java\njava -Xms1g -Xmx1g -XX:+UseG1GC -XX:+AlwaysPreTouch BigIntBench --json\n\n# .NET 10\ncd /app/bigintbench/csharp\ndotnet build -c Release\nDOTNET_GCServer=1 dotnet run -c Release -- --json\n</code></pre>\n<h3 id=\"33-å®éªŒä¸€åŸå§‹è¾“å‡ºjsonl\">3.3 å®éªŒä¸€åŸå§‹è¾“å‡ºï¼ˆJSONLï¼‰</h3>\n<h4 id=\"java-21results_java21jsonl\">Java 21ï¼š<code>results_java21.jsonl</code></h4>\n<pre><code class=\"language-jsonl\">{\"lang\":\"java\",\"bits\":256,\"op\":\"ADD_MOD\",\"ops\":1999872,\"nsPerOp\":139.589,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":256,\"op\":\"MUL_MOD\",\"ops\":499712,\"nsPerOp\":387.031,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":256,\"op\":\"MODPOW\",\"ops\":7936,\"nsPerOp\":17764.884,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":1024,\"op\":\"ADD_MOD\",\"ops\":999424,\"nsPerOp\":284.672,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":1024,\"op\":\"MUL_MOD\",\"ops\":119808,\"nsPerOp\":3094.540,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":1024,\"op\":\"MODPOW\",\"ops\":1280,\"nsPerOp\":264577.852,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":4096,\"op\":\"ADD_MOD\",\"ops\":199680,\"nsPerOp\":900.735,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":4096,\"op\":\"MUL_MOD\",\"ops\":19456,\"nsPerOp\":32062.554,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":4096,\"op\":\"MODPOW\",\"ops\":256,\"nsPerOp\":3422756.113,\"checksum\":0}\n</code></pre>\n<h4 id=\"net-10results_csharpjsonl\">.NET 10ï¼š<code>results_csharp.jsonl</code></h4>\n<pre><code class=\"language-jsonl\">{\"lang\":\"csharp\",\"bits\":256,\"op\":\"ADD_MOD\",\"ops\":1999872,\"nsPerOp\":146.261,\"checksum\":0}\n{\"lang\":\"csharp\",\"bits\":256,\"op\":\"MUL_MOD\",\"ops\":499712,\"nsPerOp\":560.246,\"checksum\":0}\n{\"lang\":\"csharp\",\"bits\":256,\"op\":\"MODPOW\",\"ops\":7936,\"nsPerOp\":169713.608,\"checksum\":0}\n{\"lang\":\"csharp\",\"bits\":1024,\"op\":\"ADD_MOD\",\"ops\":999424,\"nsPerOp\":297.335,\"checksum\":0}\n{\"lang\":\"csharp\",\"bits\":1024,\"op\":\"MUL_MOD\",\"ops\":119808,\"nsPerOp\":4792.760,\"checksum\":0}\n{\"lang\":\"csharp\",\"bits\":1024,\"op\":\"MODPOW\",\"ops\":1280,\"nsPerOp\":1938407.720,\"checksum\":0}\n{\"lang\":\"csharp\",\"bits\":4096,\"op\":\"ADD_MOD\",\"ops\":199680,\"nsPerOp\":1280.760,\"checksum\":0}\n{\"lang\":\"csharp\",\"bits\":4096,\"op\":\"MUL_MOD\",\"ops\":19456,\"nsPerOp\":36894.568,\"checksum\":0}\n{\"lang\":\"csharp\",\"bits\":4096,\"op\":\"MODPOW\",\"ops\":256,\"nsPerOp\":20617970.004,\"checksum\":0}\n</code></pre>\n<hr />\n<h2 id=\"å®éªŒäºŒåŠ å…¥-java-8-çœ‹ç°çŠ¶ä¸»æµå¤„äºä»€ä¹ˆä½ç½®\">å®éªŒäºŒï¼šåŠ å…¥ Java 8 â€”â€”çœ‹â€œç°çŠ¶ä¸»æµâ€å¤„äºä»€ä¹ˆä½ç½®</h2>\n<p>è¿™ä¸€ç»„çš„å…³é”®ç‚¹æ˜¯ï¼š<strong>åŒä¸€ä»½ Java æºç ç”¨ Java 8 ç¼–è¯‘</strong>ï¼Œåˆ†åˆ«åœ¨ Java 8 ä¸ Java 21 ä¸Šè¿è¡Œï¼Œå°½é‡é¿å…â€œç¼–è¯‘å™¨äº§ç‰©å·®å¼‚â€ã€‚</p>\n<h3 id=\"41-è¿è¡Œæ–¹å¼\">4.1 è¿è¡Œæ–¹å¼</h3>\n<pre><code class=\"language-bash\"># ç¼–è¯‘ï¼ˆJava 8ï¼‰\n/path/to/jdk8/bin/javac BigIntBench.java\n\n# è¿è¡Œï¼ˆJava 8ï¼‰\n/path/to/jdk8/bin/java -Xms1g -Xmx1g -XX:+UseG1GC -XX:+AlwaysPreTouch BigIntBench --json\n\n# è¿è¡Œï¼ˆJava 21ï¼‰\njava -Xms1g -Xmx1g -XX:+UseG1GC -XX:+AlwaysPreTouch BigIntBench --json\n</code></pre>\n<h3 id=\"42-å®éªŒäºŒåŸå§‹è¾“å‡ºjsonl\">4.2 å®éªŒäºŒåŸå§‹è¾“å‡ºï¼ˆJSONLï¼‰</h3>\n<h4 id=\"java-8results_java8jsonl\">Java 8ï¼š<code>results_java8.jsonl</code></h4>\n<pre><code class=\"language-jsonl\">{\"lang\":\"java\",\"bits\":256,\"op\":\"ADD_MOD\",\"ops\":1999872,\"nsPerOp\":207.335,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":256,\"op\":\"MUL_MOD\",\"ops\":499712,\"nsPerOp\":468.248,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":256,\"op\":\"MODPOW\",\"ops\":7936,\"nsPerOp\":17697.113,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":1024,\"op\":\"ADD_MOD\",\"ops\":999424,\"nsPerOp\":390.906,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":1024,\"op\":\"MUL_MOD\",\"ops\":119808,\"nsPerOp\":3089.474,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":1024,\"op\":\"MODPOW\",\"ops\":1280,\"nsPerOp\":277395.652,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":4096,\"op\":\"ADD_MOD\",\"ops\":199680,\"nsPerOp\":990.708,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":4096,\"op\":\"MUL_MOD\",\"ops\":19456,\"nsPerOp\":30692.214,\"checksum\":0}\n{\"lang\":\"java\",\"bits\":4096,\"op\":\"MODPOW\",\"ops\":256,\"nsPerOp\":3468269.539,\"checksum\":0}\n</code></pre>\n<hr />\n<h2 id=\"å¯è§†åŒ–ä¸æ€»ç»“\">å¯è§†åŒ–ä¸æ€»ç»“</h2>\n<p>ä»ä¸€ä¸ª .NET ç¨‹åºå‘˜çš„è§†è§’æ¥çœ‹ï¼Œè¿™æ¬¡çš„æµ‹è¯•ç»“æœå¯ä»¥è¯´æ—¢åœ¨æƒ…ç†ä¹‹ä¸­ï¼Œåˆæœ‰äº›å‡ºä¹æ„æ–™ã€‚</p>\n<ol>\n<li><strong>ADD_MOD (åŠ æ³•+å–æ¨¡)</strong>: åœ¨è¿™ä¸ªé¡¹ç›®ä¸Šï¼Œ.NET å’Œ Java 21 å‡ ä¹æ‰“äº†ä¸ªå¹³æ‰‹ï¼Œå·®è·å¾®ä¹å…¶å¾®ã€‚å¯ä»¥è¯´ï¼Œåœ¨åŸºç¡€çš„åŠ æ³•è¿ç®—ä¸Šï¼Œ.NET è¡¨ç°å¾—ç›¸å½“ä¸é”™ã€‚<br />\n<img alt=\"bar_csharp_baseline_add_mod\" src=\"https://img2024.cnblogs.com/blog/233608/202601/233608-20260114225530983-1114904260.png\" /></li>\n<li><strong>MUL_MOD (ä¹˜æ³•+å–æ¨¡)</strong>: ä»è¿™é‡Œå¼€å§‹ï¼Œå·®è·å‡ºç°äº†ã€‚.NET æ˜æ˜¾æ…¢äº Javaï¼Œæ€§èƒ½é¸¿æ²Ÿå¼€å§‹å˜å¾—â€œè‚‰çœ¼å¯è§â€ã€‚<br />\n<img alt=\"bar_csharp_baseline_mul_mod\" src=\"https://img2024.cnblogs.com/blog/233608/202601/233608-20260114225554833-1748112213.png\" /></li>\n<li><strong>MODPOW (æ¨¡å¹‚)</strong>: è¿™æ˜¯å·®è·æœ€å¤§çš„åœ°æ–¹ã€‚.NET åœ¨è¿™é¡¹æµ‹è¯•ä¸­è¢« Java 21 æ‹‰å¼€äº† <strong>6åˆ°9å€</strong> çš„å·®è·ã€‚å¯¹äºä»äº‹å¯†ç å­¦æˆ–éœ€è¦å¤§é‡å¤§æ•°è¿ç®—çš„å¼€å‘è€…æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸åˆºçœ¼çš„ä¿¡å·ã€‚<br />\n<img alt=\"bar_csharp_baseline_modpow\" src=\"https://img2024.cnblogs.com/blog/233608/202601/233608-20260114225547260-463566788.png\" /></li>\n<li><strong>Java 8 vs Java 21</strong>: æ¯«æ— ç–‘é—®ï¼ŒJava 21 åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ¯”è€è¿ˆçš„ Java 8 è¦å¿«ã€‚ä¸è¿‡æœ‰è¶£çš„æ˜¯ï¼Œåœ¨ <code>MUL_MOD</code> çš„ 1024 å’Œ 4096 ä½æµ‹è¯•ä¸­ï¼ŒJava 8 å±…ç„¶å‡ºç°äº†â€œåè¶…â€çš„ç°è±¡ã€‚è¿™å¯èƒ½æ˜¯ç”±äº JIT ç­–ç•¥ã€ç®—æ³•é€‰æ‹©çš„é˜ˆå€¼å·®å¼‚ï¼Œæˆ–æ˜¯å•çº¯çš„æµ‹é‡è¯¯å·®ã€‚è™½ç„¶è¿™ä¸å½±å“â€œJava 21æ›´å¿«â€çš„æ€»ä½“ç»“è®ºï¼Œä½†ä¹Ÿæé†’æˆ‘ä»¬æ€§èƒ½æµ‹è¯•çš„å¤æ‚æ€§ã€‚</li>\n</ol>\n<p>æ€»è€Œè¨€ä¹‹ï¼Œè¿™æ¬¡å¯¹å†³è®©æˆ‘ä»¬æ¸…æ¥šåœ°çœ‹åˆ°ï¼Œåœ¨å¤æ‚çš„å¤§æ•°è¿ç®—ä¸Šï¼Œ.NET çš„ <code>BigInteger</code> ç¡®å®è¿˜æœ‰å¾ˆé•¿çš„è·¯è¦èµ°ã€‚</p>\n<hr />\n<h2 id=\"one-more-thingå½“å¤–æ´ç™»åœº\">One More Thingï¼šå½“â€œå¤–æ´â€ç™»åœº</h2>\n<p>åœ¨å¯»æ‰¾ .NET å¤§æ•°æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬è‡ªç„¶èƒ½æƒ³åˆ°äº†ä¸šç•Œæ ‡æ† GMP â€”â€”å®ƒæ˜¯ GNU Multi-Precision Arithmetic Libraryï¼Œå¾ˆå¤šæ•°å­¦è½¯ä»¶/å¯†ç å­¦å®ç°éƒ½ä¼šç”¨å®ƒåšé«˜æ€§èƒ½å¤§æ•´æ•°è¿ç®—ã€‚</p>\n<p>æˆ‘ç¢°å·§ä¹Ÿä¸ºå®ƒåšäº†ä¸€ä¸ª .NET å°è£…ï¼š<a href=\"https://github.com/sdcb/Sdcb.Arithmetic\" rel=\"noopener nofollow\" target=\"_blank\">Sdcb.Arithmetic</a>ã€‚</p>\n<p>ä½†å¿…é¡»æå‰å£°æ˜ï¼š<strong>è®© GMP ä½œä¸ºâ€œå¤–æ´â€åŠ å…¥è¿™åœºå¯¹æ¯”ï¼Œæ˜¯â€œä¸å…¬å¹³â€çš„</strong>ã€‚åŸå› å¾ˆç®€å•ï¼š</p>\n<ul>\n<li><strong>è¯­è¨€ä¼˜åŠ¿</strong>ï¼šGMP æ˜¯åŸç”Ÿ C/æ±‡ç¼–ï¼Œè€Œ .NET å’Œ Java æ˜¯åœ¨è™šæ‹Ÿæœºä¸Šè¿è¡Œçš„æ‰˜ç®¡è¯­è¨€ã€‚</li>\n<li><strong>å†…å­˜ç­–ç•¥</strong>ï¼šGMP é¼“åŠ±ä½¿ç”¨ <strong>in-place API</strong>ï¼Œå¯ä»¥ç›´æ¥åœ¨åŸåœ°ä¿®æ”¹æ•°å€¼ï¼Œå¤§å¤§å‡å°‘äº†å†…å­˜åˆ†é…å’Œ GC å‹åŠ›ã€‚è€Œ .NET å’Œ Java çš„ <code>BigInteger</code> åˆ™æ˜¯ä¸å¯å˜å¯¹è±¡ã€‚</li>\n</ul>\n<p>æ‰€ä»¥ï¼Œè¿™éƒ¨åˆ†çš„ç»“æœæ›´åƒæ˜¯ä¸€ä¸ªâ€œå½©è›‹â€ï¼Œå±•ç¤ºçš„æ˜¯ï¼š<strong>å¦‚æœä½ æ„¿æ„å¼•å…¥åŸç”Ÿä¾èµ–ï¼Œå¹¶æ”¹å˜ç¼–ç é£æ ¼ï¼Œ.NET çš„å¤§æ•°æ€§èƒ½å¯ä»¥è¾¾åˆ°æ€æ ·çš„é«˜åº¦ã€‚</strong></p>\n<h3 id=\"71-å®¢ä¸²å®éªŒå®Œæ•´æºä»£ç net-biginteger--gmpinteger-åŒåœº\">7.1 å®¢ä¸²å®éªŒå®Œæ•´æºä»£ç ï¼ˆ.NET BigInteger + GmpInteger åŒåœºï¼‰</h3>\n<blockquote>\n<p>ä¸‹é¢ä»£ç ä¼šåŒæ—¶è¾“å‡ºä¸¤å¥—ç»“æœï¼š<code>csharp_bigint</code> ä¸ <code>csharp_gmp_inplace</code>ï¼ˆä»æ˜¯ JSONLï¼‰ã€‚</p>\n</blockquote>\n<p><strong><code>Program.cs</code>ï¼ˆå®¢ä¸²ç‰ˆï¼Œå®Œæ•´ï¼‰</strong></p>\n<pre><code class=\"language-csharp\">using System;\nusing System.Collections.Generic;\nusing System.Diagnostics;\nusing System.Globalization;\nusing System.Linq;\nusing System.Numerics;\nusing Sdcb.Arithmetic.Gmp;\n\nsealed class SplitMix64\n{\n    private ulong _x;\n    public SplitMix64(ulong seed) =&gt; _x = seed;\n\n    public ulong NextUInt64()\n    {\n        ulong z = (_x += 0x9E3779B97F4A7C15UL);\n        z = (z ^ (z &gt;&gt; 30)) * 0xBF58476D1CE4E5B9UL;\n        z = (z ^ (z &gt;&gt; 27)) * 0x94D049BB133111EBUL;\n        return z ^ (z &gt;&gt; 31);\n    }\n\n    public void NextBytes(byte[] dst)\n    {\n        int i = 0;\n        while (i &lt; dst.Length)\n        {\n            ulong v = NextUInt64();\n            for (int k = 0; k &lt; 8 &amp;&amp; i &lt; dst.Length; k++)\n                dst[i++] = (byte)(v &gt;&gt; (56 - 8 * k));\n        }\n    }\n}\n\nenum Op { ADD_MOD, MUL_MOD, MODPOW }\n\nrecord Result(string Impl, int Bits, Op Op, long Ops, double NsPerOp, long Checksum)\n{\n    public string ToJson() =&gt; string.Create(CultureInfo.InvariantCulture,\n        $\"{{\\\"lang\\\":\\\"{Impl}\\\",\\\"bits\\\":{Bits},\\\"op\\\":\\\"{Op}\\\",\\\"ops\\\":{Ops},\\\"nsPerOp\\\":{NsPerOp:F3},\\\"checksum\\\":{Checksum}}}\");\n}\n\nstatic class BenchUtil\n{\n    public static void MaskToBitSize(byte[] buf, int bitSize)\n    {\n        int topBit = (bitSize - 1) % 8;\n        int keepBits = topBit + 1;\n        int firstMask = keepBits == 8 ? 0xFF : ((1 &lt;&lt; keepBits) - 1);\n        buf[0] &amp;= (byte)firstMask;\n        buf[0] |= (byte)(1 &lt;&lt; topBit);\n    }\n\n    public static string ToHex(byte[] bytes) =&gt; Convert.ToHexString(bytes);\n}\n\nstatic class BigIntegerBench\n{\n    public static BigInteger[] Gen(int bitSize, int count, ulong seed)\n    {\n        var rng = new SplitMix64(seed);\n        int byteLen = (bitSize + 7) / 8;\n        var arr = new BigInteger[count];\n        var buf = new byte[byteLen];\n\n        for (int i = 0; i &lt; count; i++)\n        {\n            rng.NextBytes(buf);\n            BenchUtil.MaskToBitSize(buf, bitSize);\n            arr[i] = new BigInteger(buf, isUnsigned: true, isBigEndian: true);\n        }\n        return arr;\n    }\n\n    public static BigInteger GenModulus(int bitSize, ulong seed)\n    {\n        var rng = new SplitMix64(seed);\n        int byteLen = (bitSize + 7) / 8;\n        var buf = new byte[byteLen];\n        rng.NextBytes(buf);\n        BenchUtil.MaskToBitSize(buf, bitSize);\n        buf[^1] |= 1;\n        return new BigInteger(buf, isUnsigned: true, isBigEndian: true);\n    }\n\n    public static long RunOnce(Op op, BigInteger[] a, BigInteger[] b, BigInteger[] e, BigInteger mod, int outer)\n    {\n        BigInteger acc = BigInteger.Zero;\n        int n = a.Length;\n\n        switch (op)\n        {\n            case Op.ADD_MOD:\n                for (int o = 0; o &lt; outer; o++)\n                    for (int i = 0; i &lt; n; i++)\n                        acc ^= (a[i] + b[i]) % mod;\n                break;\n\n            case Op.MUL_MOD:\n                for (int o = 0; o &lt; outer; o++)\n                    for (int i = 0; i &lt; n; i++)\n                        acc ^= (a[i] * b[i]) % mod;\n                break;\n\n            case Op.MODPOW:\n                for (int o = 0; o &lt; outer; o++)\n                    for (int i = 0; i &lt; n; i++)\n                        acc ^= BigInteger.ModPow(a[i], e[i], mod);\n                break;\n        }\n\n        return (long)(acc &amp; long.MaxValue);\n    }\n}\n\nstatic class GmpIntegerBench\n{\n    public static GmpInteger[] Gen(int bitSize, int count, ulong seed)\n    {\n        var rng = new SplitMix64(seed);\n        int byteLen = (bitSize + 7) / 8;\n        var arr = new GmpInteger[count];\n        var buf = new byte[byteLen];\n\n        for (int i = 0; i &lt; count; i++)\n        {\n            rng.NextBytes(buf);\n            BenchUtil.MaskToBitSize(buf, bitSize);\n            arr[i] = GmpInteger.Parse(BenchUtil.ToHex(buf), 16);\n        }\n        return arr;\n    }\n\n    public static GmpInteger GenModulus(int bitSize, ulong seed)\n    {\n        var rng = new SplitMix64(seed);\n        int byteLen = (bitSize + 7) / 8;\n        var buf = new byte[byteLen];\n        rng.NextBytes(buf);\n        BenchUtil.MaskToBitSize(buf, bitSize);\n        buf[^1] |= 1;\n        return GmpInteger.Parse(BenchUtil.ToHex(buf), 16);\n    }\n\n    public static long RunOnce(Op op, GmpInteger[] a, GmpInteger[] b, GmpInteger[] e, GmpInteger mod, int outer)\n    {\n        using var acc = GmpInteger.From(0);\n        using var tmp = GmpInteger.From(0);\n\n        int n = a.Length;\n        switch (op)\n        {\n            case Op.ADD_MOD:\n                for (int o = 0; o &lt; outer; o++)\n                    for (int i = 0; i &lt; n; i++)\n                    {\n                        GmpInteger.AddInplace(tmp, a[i], b[i]);\n                        GmpInteger.ModInplace(tmp, tmp, mod);\n                        GmpInteger.BitwiseXorInplace(acc, acc, tmp);\n                    }\n                break;\n\n            case Op.MUL_MOD:\n                for (int o = 0; o &lt; outer; o++)\n                    for (int i = 0; i &lt; n; i++)\n                    {\n                        GmpInteger.MultiplyInplace(tmp, a[i], b[i]);\n                        GmpInteger.ModInplace(tmp, tmp, mod);\n                        GmpInteger.BitwiseXorInplace(acc, acc, tmp);\n                    }\n                break;\n\n            case Op.MODPOW:\n                for (int o = 0; o &lt; outer; o++)\n                    for (int i = 0; i &lt; n; i++)\n                    {\n                        GmpInteger.PowerModInplace(tmp, a[i], e[i], mod);\n                        GmpInteger.BitwiseXorInplace(acc, acc, tmp);\n                    }\n                break;\n        }\n\n        return acc.GetHashCode();\n    }\n\n    public static void DisposeAll(GmpInteger[] xs)\n    {\n        foreach (var x in xs) x.Dispose();\n    }\n}\n\nstatic class Runner\n{\n    static Result BenchBigInteger(int bits, Op op, BigInteger[] a, BigInteger[] b, BigInteger[] e, BigInteger mod, long targetOps, int warmups, int measures)\n    {\n        int n = a.Length;\n        int outer = (int)Math.Max(1, targetOps / n);\n        long actualOps = (long)n * outer;\n\n        long ck = 0;\n        for (int i = 0; i &lt; warmups; i++) ck ^= BigIntegerBench.RunOnce(op, a, b, e, mod, outer);\n\n        long[] timesNs = new long[measures];\n        for (int i = 0; i &lt; measures; i++)\n        {\n            var sw = Stopwatch.StartNew();\n            long c = BigIntegerBench.RunOnce(op, a, b, e, mod, outer);\n            sw.Stop();\n            ck ^= c;\n            timesNs[i] = (long)(sw.ElapsedTicks * (1_000_000_000.0 / Stopwatch.Frequency));\n        }\n        Array.Sort(timesNs);\n        long median = timesNs[timesNs.Length / 2];\n        return new Result(\"csharp_bigint\", bits, op, actualOps, (double)median / actualOps, ck);\n    }\n\n    static Result BenchGmpInteger(int bits, Op op, GmpInteger[] a, GmpInteger[] b, GmpInteger[] e, GmpInteger mod, long targetOps, int warmups, int measures)\n    {\n        int n = a.Length;\n        int outer = (int)Math.Max(1, targetOps / n);\n        long actualOps = (long)n * outer;\n\n        long ck = 0;\n        for (int i = 0; i &lt; warmups; i++) ck ^= GmpIntegerBench.RunOnce(op, a, b, e, mod, outer);\n\n        long[] timesNs = new long[measures];\n        for (int i = 0; i &lt; measures; i++)\n        {\n            var sw = Stopwatch.StartNew();\n            long c = GmpIntegerBench.RunOnce(op, a, b, e, mod, outer);\n            sw.Stop();\n            ck ^= c;\n            timesNs[i] = (long)(sw.ElapsedTicks * (1_000_000_000.0 / Stopwatch.Frequency));\n        }\n        Array.Sort(timesNs);\n        long median = timesNs[timesNs.Length / 2];\n        return new Result(\"csharp_gmp_inplace\", bits, op, actualOps, (double)median / actualOps, ck);\n    }\n\n    public static int Run(string[] args)\n    {\n        bool json = args.Any(a =&gt; a == \"--json\");\n\n        int warmups = 5;\n        int measures = 11;\n        int[] bitSizes = [256, 1024, 4096];\n\n        var results = new List&lt;Result&gt;();\n\n        foreach (int bits in bitSizes)\n        {\n            long addOps = bits switch { 256 =&gt; 2_000_000L, 1024 =&gt; 1_000_000L, _ =&gt; 200_000L };\n            long mulOps = bits switch { 256 =&gt; 500_000L, 1024 =&gt; 120_000L, _ =&gt; 20_000L };\n            long powOps = bits switch { 256 =&gt; 8_000L, 1024 =&gt; 1_500L, _ =&gt; 250L };\n\n            // BigInteger data\n            var modB = BigIntegerBench.GenModulus(bits, 0xA1B2C3D4E5F60708UL ^ (uint)bits);\n            var aB = BigIntegerBench.Gen(bits, 1024, 0x1111222233334444UL ^ (uint)bits);\n            var bB = BigIntegerBench.Gen(bits, 1024, 0x9999AAAABBBBCCCCUL ^ (uint)bits);\n            var apB = BigIntegerBench.Gen(bits, 256, 0x13579BDF2468ACE0UL ^ (uint)bits);\n            var epB = BigIntegerBench.Gen(Math.Min(bits, 512), 256, 0x0FEDCBA987654321UL ^ (uint)bits);\n\n            // GmpInteger data (same seeds/bit sizes)\n            using var modG = GmpIntegerBench.GenModulus(bits, 0xA1B2C3D4E5F60708UL ^ (uint)bits);\n            var aG = GmpIntegerBench.Gen(bits, 1024, 0x1111222233334444UL ^ (uint)bits);\n            var bG = GmpIntegerBench.Gen(bits, 1024, 0x9999AAAABBBBCCCCUL ^ (uint)bits);\n            var apG = GmpIntegerBench.Gen(bits, 256, 0x13579BDF2468ACE0UL ^ (uint)bits);\n            var epG = GmpIntegerBench.Gen(Math.Min(bits, 512), 256, 0x0FEDCBA987654321UL ^ (uint)bits);\n\n            try\n            {\n                results.Add(BenchBigInteger(bits, Op.ADD_MOD, aB, bB, null!, modB, addOps, warmups, measures));\n                results.Add(BenchBigInteger(bits, Op.MUL_MOD, aB, bB, null!, modB, mulOps, warmups, measures));\n                results.Add(BenchBigInteger(bits, Op.MODPOW, apB, null!, epB, modB, powOps, warmups, measures));\n\n                results.Add(BenchGmpInteger(bits, Op.ADD_MOD, aG, bG, null!, modG, addOps, warmups, measures));\n                results.Add(BenchGmpInteger(bits, Op.MUL_MOD, aG, bG, null!, modG, mulOps, warmups, measures));\n                results.Add(BenchGmpInteger(bits, Op.MODPOW, apG, null!, epG, modG, powOps, warmups, measures));\n            }\n            finally\n            {\n                GmpIntegerBench.DisposeAll(aG);\n                GmpIntegerBench.DisposeAll(bG);\n                GmpIntegerBench.DisposeAll(apG);\n                GmpIntegerBench.DisposeAll(epG);\n            }\n        }\n\n        if (json)\n        {\n            foreach (var r in results) Console.WriteLine(r.ToJson());\n        }\n\n        return 0;\n    }\n}\n\npublic static class Program\n{\n    public static int Main(string[] args) =&gt; Runner.Run(args);\n}\n</code></pre>\n<p><strong><code>gmpbench.csproj</code>ï¼ˆå®¢ä¸²ç‰ˆé¡¹ç›®æ–‡ä»¶ï¼‰</strong></p>\n<pre><code class=\"language-xml\">&lt;Project Sdk=\"Microsoft.NET.Sdk\"&gt;\n  &lt;PropertyGroup&gt;\n    &lt;OutputType&gt;Exe&lt;/OutputType&gt;\n    &lt;TargetFramework&gt;net10.0&lt;/TargetFramework&gt;\n    &lt;Nullable&gt;enable&lt;/Nullable&gt;\n    &lt;ImplicitUsings&gt;enable&lt;/ImplicitUsings&gt;\n  &lt;/PropertyGroup&gt;\n\n  &lt;ItemGroup&gt;\n    &lt;PackageReference Include=\"Sdcb.Arithmetic.Gmp\" Version=\"*\" /&gt;\n    &lt;PackageReference Include=\"Sdcb.Arithmetic.Gmp.runtime.linux-x64\" Version=\"*\" /&gt;\n  &lt;/ItemGroup&gt;\n&lt;/Project&gt;\n</code></pre>\n<h3 id=\"72-å®¢ä¸²å®éªŒåŸå§‹è¾“å‡ºjsonl\">7.2 å®¢ä¸²å®éªŒåŸå§‹è¾“å‡ºï¼ˆJSONLï¼‰</h3>\n<pre><code class=\"language-jsonl\">{\"lang\":\"csharp_bigint\",\"bits\":256,\"op\":\"ADD_MOD\",\"ops\":1999872,\"nsPerOp\":146.261,\"checksum\":0}\n{\"lang\":\"csharp_bigint\",\"bits\":256,\"op\":\"MUL_MOD\",\"ops\":499712,\"nsPerOp\":560.246,\"checksum\":0}\n{\"lang\":\"csharp_bigint\",\"bits\":256,\"op\":\"MODPOW\",\"ops\":7936,\"nsPerOp\":169713.608,\"checksum\":0}\n{\"lang\":\"csharp_gmp_inplace\",\"bits\":256,\"op\":\"ADD_MOD\",\"ops\":1999872,\"nsPerOp\":76.644,\"checksum\":0}\n{\"lang\":\"csharp_gmp_inplace\",\"bits\":256,\"op\":\"MUL_MOD\",\"ops\":499712,\"nsPerOp\":114.690,\"checksum\":0}\n{\"lang\":\"csharp_gmp_inplace\",\"bits\":256,\"op\":\"MODPOW\",\"ops\":7936,\"nsPerOp\":13931.914,\"checksum\":0}\n{\"lang\":\"csharp_bigint\",\"bits\":1024,\"op\":\"ADD_MOD\",\"ops\":999424,\"nsPerOp\":297.335,\"checksum\":0}\n{\"lang\":\"csharp_bigint\",\"bits\":1024,\"op\":\"MUL_MOD\",\"ops\":119808,\"nsPerOp\":4792.760,\"checksum\":0}\n{\"lang\":\"csharp_bigint\",\"bits\":1024,\"op\":\"MODPOW\",\"ops\":1280,\"nsPerOp\":1938407.720,\"checksum\":0}\n{\"lang\":\"csharp_gmp_inplace\",\"bits\":1024,\"op\":\"ADD_MOD\",\"ops\":999424,\"nsPerOp\":97.260,\"checksum\":0}\n{\"lang\":\"csharp_gmp_inplace\",\"bits\":1024,\"op\":\"MUL_MOD\",\"ops\":119808,\"nsPerOp\":562.235,\"checksum\":0}\n{\"lang\":\"csharp_gmp_inplace\",\"bits\":1024,\"op\":\"MODPOW\",\"ops\":1280,\"nsPerOp\":218715.147,\"checksum\":0}\n{\"lang\":\"csharp_bigint\",\"bits\":4096,\"op\":\"ADD_MOD\",\"ops\":199680,\"nsPerOp\":1280.760,\"checksum\":0}\n{\"lang\":\"csharp_bigint\",\"bits\":4096,\"op\":\"MUL_MOD\",\"ops\":19456,\"nsPerOp\":36894.568,\"checksum\":0}\n{\"lang\":\"csharp_bigint\",\"bits\":4096,\"op\":\"MODPOW\",\"ops\":256,\"nsPerOp\":20617970.004,\"checksum\":0}\n{\"lang\":\"csharp_gmp_inplace\",\"bits\":4096,\"op\":\"ADD_MOD\",\"ops\":199680,\"nsPerOp\":179.720,\"checksum\":0}\n{\"lang\":\"csharp_gmp_inplace\",\"bits\":4096,\"op\":\"MUL_MOD\",\"ops\":19456,\"nsPerOp\":5431.441,\"checksum\":0}\n{\"lang\":\"csharp_gmp_inplace\",\"bits\":4096,\"op\":\"MODPOW\",\"ops\":256,\"nsPerOp\":2662198.492,\"checksum\":0}\n</code></pre>\n<h3 id=\"73-å®¢ä¸²å¯è§†åŒ–ä»¥gmpä¸ºåŸºå‡†\">7.3 å®¢ä¸²å¯è§†åŒ–ï¼ˆä»¥GMPä¸ºåŸºå‡†ï¼‰</h3>\n<p><img alt=\"bar_gmp_baseline_add_mod\" src=\"https://img2024.cnblogs.com/blog/233608/202601/233608-20260114225617406-1423853952.png\" /><br />\n<img alt=\"bar_gmp_baseline_mul_mod\" src=\"https://img2024.cnblogs.com/blog/233608/202601/233608-20260114225622152-863625745.png\" /><br />\n<img alt=\"bar_gmp_baseline_modpow\" src=\"https://img2024.cnblogs.com/blog/233608/202601/233608-20260114225625327-2119127781.png\" /></p>\n<hr />\n<h2 id=\"æ€»ç»“ä¸å±•æœ›\">æ€»ç»“ä¸å±•æœ›</h2>\n<p>ä»è¿™æ¬¡â€œç¡¬ç¢°ç¡¬â€çš„å¯¹å†³ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ°ï¼šåœ¨åŸºç¡€åŠ æ³•ä¸Šï¼Œ.NET <code>BigInteger</code> ä¸ Java ä¸åˆ†ä¼¯ä»²ï¼›ä½†åœ¨ä¹˜æ³•ï¼Œå°¤å…¶æ˜¯<strong>æ¨¡å¹‚è¿ç®—</strong>ï¼ˆå¯¹å¯†ç å­¦ç­‰åœºæ™¯æå…¶é‡è¦ï¼‰ä¸Šï¼Œ.NET ç›®å‰ç¡®å®å­˜åœ¨æ˜æ˜¾çš„çŸ­æ¿ï¼Œå¤§å¹…è½åäº Javaã€‚</p>\n<p>æ‰¿è®¤ä¸è¶³æ˜¯æ”¹è¿›çš„å¼€å§‹ã€‚å¯¹äºç»å¤§å¤šæ•°ä¸šåŠ¡åœºæ™¯ï¼Œå†…ç½®çš„ <code>BigInteger</code> ä¾ç„¶å¤Ÿç”¨ä¸”æ–¹ä¾¿ã€‚ä½†å¦‚æœä½ çš„åº”ç”¨å¤„äºæ€§èƒ½æ•æ„ŸåŒºï¼ˆå¦‚åŠ å¯†ç®—æ³•ã€ç§‘å­¦è®¡ç®—ï¼‰ï¼Œé‚£ä¹ˆä¹Ÿè®¸æ˜¯æ—¶å€™è€ƒè™‘ä¸€äº›â€œé‡æ­¦å™¨â€äº†ã€‚</p>\n<p>è¿™ä¹Ÿæ­£æ˜¯æˆ‘å¼€å‘å¹¶ç»´æŠ¤ <strong><a href=\"https://github.com/sdcb/Sdcb.Arithmetic\" rel=\"noopener nofollow\" target=\"_blank\">Sdcb.Arithmetic</a></strong> çš„åˆè¡·ã€‚å®ƒé€šè¿‡å°è£… GMP ç­‰é«˜æ€§èƒ½åŸç”Ÿåº“ï¼Œä¸º .NET å¸¦æ¥äº†<strong>åŸåœ°ä¿®æ”¹ï¼ˆin-placeï¼‰</strong>ä»¥åŠé«˜è¾¾æ•°å€çš„æ€§èƒ½æå‡ï¼ˆå¦‚æ–‡ä¸­å®éªŒæ‰€ç¤ºï¼‰ã€‚å¦‚æœä½ å¯¹æ€§èƒ½æœ‰æè‡´è¿½æ±‚ï¼Œæˆ–è€…æƒ³çœ‹çœ‹ .NET åœ¨å¤§æ•°è®¡ç®—ä¸Šçš„æé™ï¼Œæ¬¢è¿å» GitHub ç‚¹ä¸ª Star â­ï¼Œè¯•ä¸€è¯•è¿™ä¸ªåº“ã€‚</p>\n<p>æ„Ÿè°¢é˜…è¯»ï¼å¦‚æœä½ è§‰å¾—è¿™ä¸¤ä¸ªè¯­è¨€çš„å¯¹æ¯”åˆ†ææœ‰æ„æ€ï¼Œæˆ–è€…å¯¹ .NET é«˜æ€§èƒ½ç¼–ç¨‹æ„Ÿå…´è¶£ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€äº¤æµï¼Œä¹Ÿæ¬¢è¿åŠ å…¥æˆ‘çš„ <strong>.NETéªšæ“ä½œ QQç¾¤ï¼š495782587</strong>ï¼Œæˆ‘ä»¬ä¸€èµ·æ¢ç´¢æ›´å¤šæŠ€æœ¯ç¡¬æ ¸ç©æ³•ã€‚</p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-15 08:50</span>&nbsp;\n<a href=\"https://www.cnblogs.com/sdcb\">.NETéªšæ“ä½œ</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">117</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "ã€é¢è¯•é¢˜ã€‘ä»€ä¹ˆæ˜¯è§‚å¯Ÿè€…æ¨¡å¼ï¼Ÿä¸€èˆ¬ç”¨åœ¨ä»€ä¹ˆåœºæ™¯ï¼Ÿ",
      "link": "https://www.cnblogs.com/sun-10387834/p/19452781",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/sun-10387834/p/19452781\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-15 08:38\">\n    <span>ã€é¢è¯•é¢˜ã€‘ä»€ä¹ˆæ˜¯è§‚å¯Ÿè€…æ¨¡å¼ï¼Ÿä¸€èˆ¬ç”¨åœ¨ä»€ä¹ˆåœºæ™¯ï¼Ÿ</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h1 id=\"è§‚å¯Ÿè€…æ¨¡å¼æ¶ˆæ¯ç•Œçš„å…«å¦å°åˆ†é˜Ÿ-\">è§‚å¯Ÿè€…æ¨¡å¼ï¼šæ¶ˆæ¯ç•Œçš„\"å…«å¦å°åˆ†é˜Ÿ\" ğŸ“¢</h1>\n<h2 id=\"ä¸€ä»€ä¹ˆæ˜¯è§‚å¯Ÿè€…æ¨¡å¼\">ä¸€ã€ä»€ä¹ˆæ˜¯è§‚å¯Ÿè€…æ¨¡å¼ï¼Ÿ</h2>\n<p>æƒ³è±¡ä¸€ä¸‹<strong>å¾®ä¿¡ç¾¤èŠ</strong>ï¼š</p>\n<ul>\n<li>ä½ å‘ä¸€æ¡æ¶ˆæ¯ï¼ˆå‘å¸ƒäº‹ä»¶ï¼‰</li>\n<li>ç¾¤é‡Œæ‰€æœ‰äººéƒ½æ”¶åˆ°äº†é€šçŸ¥ï¼ˆè§‚å¯Ÿè€…è¢«è§¦å‘ï¼‰</li>\n<li>æœ‰äº›äººå›å¤ï¼Œæœ‰äº›äººç‚¹èµï¼Œæœ‰äº›äººæ½œæ°´ï¼ˆä¸åŒçš„ååº”ï¼‰</li>\n</ul>\n<p>è¿™å°±æ˜¯<strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>ï¼š<strong>ä¸€ä¸ªå¯¹è±¡ï¼ˆè¢«è§‚å¯Ÿè€…ï¼‰çš„çŠ¶æ€å˜åŒ–ï¼Œä¼šé€šçŸ¥æ‰€æœ‰ä¾èµ–å®ƒçš„å¯¹è±¡ï¼ˆè§‚å¯Ÿè€…ï¼‰</strong>ã€‚</p>\n<h2 id=\"äºŒjavaä»£ç ç¤ºä¾‹æ˜æ˜Ÿå‡ºè½¨çˆ†æ–™ç°åœº-\">äºŒã€Javaä»£ç ç¤ºä¾‹ï¼šæ˜æ˜Ÿå‡ºè½¨çˆ†æ–™ç°åœº ğŸ¬</h2>\n<pre><code class=\"language-java\">import java.util.*;\n\n// 1. è§‚å¯Ÿè€…æ¥å£ï¼ˆåƒç“œç¾¤ä¼—ï¼‰\ninterface GossipObserver {\n    void update(String celebrityName, String scandal);\n}\n\n// 2. å…·ä½“è§‚å¯Ÿè€…ï¼šä¸åŒååº”çš„äºº\nclass ExcitedFan implements GossipObserver {\n    private String name;\n    \n    public ExcitedFan(String name) {\n        this.name = name;\n    }\n    \n    @Override\n    public void update(String celebrityName, String scandal) {\n        System.out.println(name + \"å…´å¥‹åœ°å°–å«ï¼šOMGï¼\" + celebrityName + \"ç«Ÿç„¶\" + scandal + \"ï¼\");\n        System.out.println(\"    â†’ ç«‹åˆ»æ‰“å¼€å¾®åšå‡†å¤‡åƒç“œğŸ‰\\n\");\n    }\n}\n\nclass CalmJournalist implements GossipObserver {\n    @Override\n    public void update(String celebrityName, String scandal) {\n        System.out.println(\"è®°è€…å†·é™åœ°è®°å½•ï¼š\");\n        System.out.println(\"    ã€ç‹¬å®¶çˆ†æ–™ã€‘\" + celebrityName + \"è¢«æ›\" + scandal);\n        System.out.println(\"    â†’ å¼€å§‹å†™æ–°é—»ç¨¿ğŸ“°\\n\");\n    }\n}\n\nclass IndifferentPerson implements GossipObserver {\n    @Override\n    public void update(String celebrityName, String scandal) {\n        System.out.println(\"è·¯äººç”²ç¥äº†ä¸€çœ¼ï¼š\");\n        System.out.println(\"    \" + celebrityName + \"ï¼Ÿä¸è®¤è¯†ã€‚å…³æˆ‘å±äº‹ğŸ™„\");\n        System.out.println(\"    â†’ ç»§ç»­åˆ·æŠ–éŸ³\\n\");\n    }\n}\n\n// 3. ä¸»é¢˜/è¢«è§‚å¯Ÿè€…æ¥å£ï¼ˆå…«å¦ä¸­å¿ƒï¼‰\ninterface GossipSubject {\n    void addObserver(GossipObserver observer);  // æ·»åŠ åƒç“œç¾¤ä¼—\n    void removeObserver(GossipObserver observer); // ç§»é™¤åƒç“œç¾¤ä¼—\n    void notifyObservers();  // å‘å¸ƒå…«å¦\n}\n\n// 4. å…·ä½“ä¸»é¢˜ï¼šæ˜æ˜Ÿå…«å¦\nclass CelebrityScandal implements GossipSubject {\n    private String celebrityName;\n    private String scandal;\n    private List&lt;GossipObserver&gt; observers = new ArrayList&lt;&gt;();\n    \n    public CelebrityScandal(String name) {\n        this.celebrityName = name;\n    }\n    \n    // æ˜æ˜Ÿæœ‰æ–°ç“œäº†ï¼\n    public void newScandal(String scandal) {\n        this.scandal = scandal;\n        System.out.println(\"âš¡âš¡âš¡ ç‹—ä»”é˜Ÿæ‹åˆ°ï¼š\" + celebrityName + \" \" + scandal + \"ï¼\");\n        System.out.println(\"å…«å¦å¼€å§‹ä¼ æ’­...\\n\");\n        notifyObservers();  // é€šçŸ¥æ‰€æœ‰åƒç“œç¾¤ä¼—\n    }\n    \n    @Override\n    public void addObserver(GossipObserver observer) {\n        observers.add(observer);\n        System.out.println(\"ğŸ‘¥ \" + observer.getClass().getSimpleName() + \" åŠ å…¥äº†åƒç“œç¾¤\");\n    }\n    \n    @Override\n    public void removeObserver(GossipObserver observer) {\n        observers.remove(observer);\n        System.out.println(\"ğŸš¶ \" + observer.getClass().getSimpleName() + \" é€€ç¾¤äº†\");\n    }\n    \n    @Override\n    public void notifyObservers() {\n        for (GossipObserver observer : observers) {\n            observer.update(celebrityName, scandal);\n        }\n    }\n}\n\n// 5. æµ‹è¯•ï¼šå¨±ä¹åœˆå¤§æˆä¸Šæ¼”\npublic class ObserverPatternDemo {\n    public static void main(String[] args) {\n        System.out.println(\"========== å¨±ä¹åœˆè§‚å¯Ÿè€…æ¨¡å¼æ¼”ç¤º ==========\\n\");\n        \n        // åˆ›å»ºå…«å¦ä¸­å¿ƒï¼ˆè¢«è§‚å¯Ÿè€…ï¼‰\n        CelebrityScandal wang = new CelebrityScandal(\"ç‹æŸ\");\n        \n        // åˆ›å»ºä¸åŒçš„åƒç“œç¾¤ä¼—ï¼ˆè§‚å¯Ÿè€…ï¼‰\n        GossipObserver fan1 = new ExcitedFan(\"ç‹‚çƒ­ç²‰ä¸å°å¼ \");\n        GossipObserver fan2 = new ExcitedFan(\"åƒç“œå°‘å¥³å°æ\");\n        GossipObserver journalist = new CalmJournalist();\n        GossipObserverè·¯äºº = new IndifferentPerson();\n        \n        // ç¾¤ä¼—é™†ç»­åŠ å…¥åƒç“œç¾¤\n        wang.addObserver(fan1);\n        wang.addObserver(fan2);\n        wang.addObserver(journalist);\n        wang.addObserver(è·¯äºº);\n        \n        System.out.println(\"\\n------- ç¬¬ä¸€æ³¢çˆ†æ–™ -------\");\n        // ç¬¬ä¸€æ³¢çˆ†æ–™\n        wang.newScandal(\"æ·±å¤œä¸ç¥ç§˜å¥³å­åŒå›é…’åº—\");\n        \n        System.out.println(\"\\n------- ç²‰ä¸é€€ç¾¤åç¬¬äºŒæ³¢çˆ†æ–™ -------\");\n        // å°å¼ é€€ç¾¤äº†\n        wang.removeObserver(fan1);\n        \n        // ç¬¬äºŒæ³¢çˆ†æ–™\n        wang.newScandal(\"è¢«æ‹åˆ°åœ¨è¶…å¸‚å·åƒè¯•åƒå“\");\n    }\n}\n</code></pre>\n<p><strong>è¿è¡Œç»“æœï¼š</strong></p>\n<pre><code>========== å¨±ä¹åœˆè§‚å¯Ÿè€…æ¨¡å¼æ¼”ç¤º ==========\n\nğŸ‘¥ ExcitedFan åŠ å…¥äº†åƒç“œç¾¤\nğŸ‘¥ ExcitedFan åŠ å…¥äº†åƒç“œç¾¤\nğŸ‘¥ CalmJournalist åŠ å…¥äº†åƒç“œç¾¤\nğŸ‘¥ IndifferentPerson åŠ å…¥äº†åƒç“œç¾¤\n\n------- ç¬¬ä¸€æ³¢çˆ†æ–™ -------\nâš¡âš¡âš¡ ç‹—ä»”é˜Ÿæ‹åˆ°ï¼šç‹æŸ æ·±å¤œä¸ç¥ç§˜å¥³å­åŒå›é…’åº—ï¼\nå…«å¦å¼€å§‹ä¼ æ’­...\n\nç‹‚çƒ­ç²‰ä¸å°å¼ å…´å¥‹åœ°å°–å«ï¼šOMGï¼ç‹æŸç«Ÿç„¶æ·±å¤œä¸ç¥ç§˜å¥³å­åŒå›é…’åº—ï¼\n    â†’ ç«‹åˆ»æ‰“å¼€å¾®åšå‡†å¤‡åƒç“œğŸ‰\n\nåƒç“œå°‘å¥³å°æå…´å¥‹åœ°å°–å«ï¼šOMGï¼ç‹æŸç«Ÿç„¶æ·±å¤œä¸ç¥ç§˜å¥³å­åŒå›é…’åº—ï¼\n    â†’ ç«‹åˆ»æ‰“å¼€å¾®åšå‡†å¤‡åƒç“œğŸ‰\n\nè®°è€…å†·é™åœ°è®°å½•ï¼š\n    ã€ç‹¬å®¶çˆ†æ–™ã€‘ç‹æŸè¢«æ›æ·±å¤œä¸ç¥ç§˜å¥³å­åŒå›é…’åº—\n    â†’ å¼€å§‹å†™æ–°é—»ç¨¿ğŸ“°\n\nè·¯äººç”²ç¥äº†ä¸€çœ¼ï¼š\n    ç‹æŸï¼Ÿä¸è®¤è¯†ã€‚å…³æˆ‘å±äº‹ğŸ™„\n    â†’ ç»§ç»­åˆ·æŠ–éŸ³\n\n\n------- ç²‰ä¸é€€ç¾¤åç¬¬äºŒæ³¢çˆ†æ–™ -------\nğŸš¶ ExcitedFan é€€ç¾¤äº†\nâš¡âš¡âš¡ ç‹—ä»”é˜Ÿæ‹åˆ°ï¼šç‹æŸ è¢«æ‹åˆ°åœ¨è¶…å¸‚å·åƒè¯•åƒå“ï¼\nå…«å¦å¼€å§‹ä¼ æ’­...\n\nåƒç“œå°‘å¥³å°æå…´å¥‹åœ°å°–å«ï¼šOMGï¼ç‹æŸç«Ÿç„¶è¢«æ‹åˆ°åœ¨è¶…å¸‚å·åƒè¯•åƒå“ï¼\n    â†’ ç«‹åˆ»æ‰“å¼€å¾®åšå‡†å¤‡åƒç“œğŸ‰\n\nè®°è€…å†·é™åœ°è®°å½•ï¼š\n    ã€ç‹¬å®¶çˆ†æ–™ã€‘ç‹æŸè¢«æ›è¢«æ‹åˆ°åœ¨è¶…å¸‚å·åƒè¯•åƒå“\n    â†’ å¼€å§‹å†™æ–°é—»ç¨¿ğŸ“°\n\nè·¯äººç”²ç¥äº†ä¸€çœ¼ï¼š\n    ç‹æŸï¼Ÿä¸è®¤è¯†ã€‚å…³æˆ‘å±äº‹ğŸ™„\n    â†’ ç»§ç»­åˆ·æŠ–éŸ³\n</code></pre>\n<h2 id=\"ä¸‰è§‚å¯Ÿè€…æ¨¡å¼çš„å››è¦ç´ \">ä¸‰ã€è§‚å¯Ÿè€…æ¨¡å¼çš„å››è¦ç´ </h2>\n<pre><code class=\"language-java\">// 1ï¸âƒ£ ä¸»é¢˜ (Subject) - \"å…«å¦ä¸­å¿ƒ\"\n// è´Ÿè´£ï¼šç®¡ç†è§‚å¯Ÿè€… + é€šçŸ¥å˜åŒ–\ninterface Subject {\n    void addObserver(Observer o);\n    void removeObserver(Observer o);\n    void notifyObservers();\n}\n\n// 2ï¸âƒ£ è§‚å¯Ÿè€… (Observer) - \"åƒç“œç¾¤ä¼—\"  \n// è´Ÿè´£ï¼šå®šä¹‰ååº”æ–¹å¼\ninterface Observer {\n    void update(Object data);\n}\n\n// 3ï¸âƒ£ å…·ä½“ä¸»é¢˜ (ConcreteSubject) - \"å…·ä½“æ˜æ˜Ÿ\"\n// è´Ÿè´£ï¼šçŠ¶æ€å˜åŒ–æ—¶è§¦å‘é€šçŸ¥\nclass ConcreteSubject implements Subject {\n    private List&lt;Observer&gt; observers = new ArrayList&lt;&gt;();\n    private Object state;  // çŠ¶æ€\n    \n    public void setState(Object newState) {\n        this.state = newState;\n        notifyObservers();  // çŠ¶æ€æ”¹å˜ï¼Œé€šçŸ¥æ‰€æœ‰äººï¼\n    }\n}\n\n// 4ï¸âƒ£ å…·ä½“è§‚å¯Ÿè€… (ConcreteObserver) - \"å…·ä½“ç²‰ä¸\"\n// è´Ÿè´£ï¼šå®ç°å…·ä½“çš„ååº”é€»è¾‘\nclass ConcreteObserver implements Observer {\n    @Override\n    public void update(Object data) {\n        // å¯¹çŠ¶æ€å˜åŒ–çš„ååº”\n    }\n}\n</code></pre>\n<h2 id=\"å››ä»€ä¹ˆæ—¶å€™ç”¨è§‚å¯Ÿè€…æ¨¡å¼\">å››ã€ä»€ä¹ˆæ—¶å€™ç”¨è§‚å¯Ÿè€…æ¨¡å¼ï¼Ÿ</h2>\n<h3 id=\"-é€‚ç”¨åœºæ™¯ä¸‰ä¸ªå­—è¦é€šçŸ¥\">ğŸ¯ <strong>é€‚ç”¨åœºæ™¯ï¼ˆä¸‰ä¸ªå­—ï¼šè¦é€šçŸ¥ï¼ï¼‰</strong></h3>\n<ol>\n<li>\n<p><strong>äº‹ä»¶é©±åŠ¨ç³»ç»Ÿ</strong> - \"æœ‰äº‹å‘ç”Ÿï¼Œé©¬ä¸ŠæŠ¥å‘Šï¼\"</p>\n<pre><code class=\"language-java\">// GUIæŒ‰é’®ç‚¹å‡»äº‹ä»¶\nbutton.addActionListener(new ActionListener() {\n    @Override\n    public void actionPerformed(ActionEvent e) {\n        System.out.println(\"æŒ‰é’®è¢«ç‚¹äº†ï¼\");\n    }\n});\n</code></pre>\n</li>\n<li>\n<p><strong>æ¶ˆæ¯è®¢é˜…ç³»ç»Ÿ</strong> - \"æˆ‘æœ‰æ–°æ¶ˆæ¯ï¼Œè®¢é˜…è€…è¯·æŸ¥æ”¶\"</p>\n<pre><code class=\"language-java\">// æ–°é—»è®¢é˜…\nnewsPublisher.subscribe(user1);\nnewsPublisher.subscribe(user2);\n// æ–°æ–‡ç« å‘å¸ƒ â†’ æ‰€æœ‰è®¢é˜…è€…æ”¶åˆ°æ¨é€\n</code></pre>\n</li>\n<li>\n<p><strong>æ•°æ®ç›‘æ§ç³»ç»Ÿ</strong> - \"æ•°æ®å˜äº†ï¼Œå¿«æ›´æ–°æ˜¾ç¤ºï¼\"</p>\n<pre><code class=\"language-java\">// è‚¡ç¥¨ä»·æ ¼ç›‘æ§\nstock.addObserver(new StockDisplay());  // æ˜¾ç¤ºæ¿\nstock.addObserver(new AlertSystem());   // è­¦æŠ¥ç³»ç»Ÿ\nstock.addObserver(new TraderBot());     // è‡ªåŠ¨äº¤æ˜“æœºå™¨äºº\n// è‚¡ä»·å˜åŠ¨ â†’ æ‰€æœ‰è§‚å¯Ÿè€…ç«‹å³è¡ŒåŠ¨\n</code></pre>\n</li>\n<li>\n<p><strong>MVCæ¨¡å¼</strong> - \"æ¨¡å‹å˜äº†ï¼Œè§†å›¾å¿«åˆ·æ–°\"</p>\n<pre><code class=\"language-java\">// Modelæ•°æ®å˜åŒ–\nmodel.setData(newData);  \n// â†’ è‡ªåŠ¨é€šçŸ¥æ‰€æœ‰å…³è”çš„Viewæ›´æ–°ç•Œé¢\n</code></pre>\n</li>\n</ol>\n<h3 id=\"-å®é™…é¡¹ç›®ä¸­çš„ä¾‹å­\">ğŸ“¦ <strong>å®é™…é¡¹ç›®ä¸­çš„ä¾‹å­</strong></h3>\n<pre><code class=\"language-java\">// ç”µå•†è®¢å•çŠ¶æ€é€šçŸ¥ç³»ç»Ÿ\nclass Order {\n    private List&lt;OrderObserver&gt; observers = new ArrayList&lt;&gt;();\n    private String status;\n    \n    public void setStatus(String newStatus) {\n        this.status = newStatus;\n        notifyObservers();\n    }\n    \n    public void addObserver(OrderObserver observer) {\n        observers.add(observer);\n    }\n    \n    private void notifyObservers() {\n        for (OrderObserver observer : observers) {\n            observer.onOrderStatusChanged(this, status);\n        }\n    }\n}\n\n// ä¸åŒçš„è§‚å¯Ÿè€…\nclass CustomerNotifier implements OrderObserver {\n    public void onOrderStatusChanged(Order order, String status) {\n        sendSMS(\"å°Šæ•¬çš„å®¢æˆ·ï¼Œæ‚¨çš„è®¢å•çŠ¶æ€å·²æ›´æ–°ä¸ºï¼š\" + status);\n    }\n}\n\nclass WarehouseSystem implements OrderObserver {\n    public void onOrderStatusChanged(Order order, String status) {\n        if (\"å·²æ”¯ä»˜\".equals(status)) {\n            prepareGoods(order);  // å‡†å¤‡å‘è´§\n        }\n    }\n}\n\nclass AccountingSystem implements OrderObserver {\n    public void onOrderStatusChanged(Order order, String status) {\n        if (\"å·²å®Œæˆ\".equals(status)) {\n            recordRevenue(order);  // è®°å½•æ”¶å…¥\n        }\n    }\n}\n</code></pre>\n<h2 id=\"äº”è§‚å¯Ÿè€…æ¨¡å¼çš„å˜ä½“\">äº”ã€è§‚å¯Ÿè€…æ¨¡å¼çš„å˜ä½“</h2>\n<h3 id=\"1-æ¨æ¨¡å‹-vs-æ‹‰æ¨¡å‹\">1. <strong>æ¨æ¨¡å‹ vs æ‹‰æ¨¡å‹</strong></h3>\n<pre><code class=\"language-java\">// æ¨æ¨¡å‹ï¼šæŠŠæ•°æ®ç›´æ¥æ¨ç»™è§‚å¯Ÿè€…ï¼ˆå¸¸ç”¨ï¼‰\nvoid update(String celebrity, String scandal) {\n    // ç›´æ¥æ‹¿åˆ°æ‰€æœ‰ä¿¡æ¯\n}\n\n// æ‹‰æ¨¡å‹ï¼šè§‚å¯Ÿè€…è‡ªå·±ä»ä¸»é¢˜æ‹‰å–æ•°æ®\nvoid update(Subject subject) {\n    String scandal = subject.getScandal();  // è‡ªå·±è·å–éœ€è¦çš„æ•°æ®\n}\n</code></pre>\n<h3 id=\"2-javaå†…ç½®æ”¯æŒå·²è¿‡æ—¶ä½†è¦çŸ¥é“\">2. <strong>Javaå†…ç½®æ”¯æŒï¼ˆå·²è¿‡æ—¶ä½†è¦çŸ¥é“ï¼‰</strong></h3>\n<pre><code class=\"language-java\">import java.util.Observable;  // ä¸»é¢˜\nimport java.util.Observer;    // è§‚å¯Ÿè€…\n\n// ä½†æ³¨æ„ï¼šObservableæ˜¯ç±»ä¸æ˜¯æ¥å£ï¼ŒJava 9åå·²åºŸå¼ƒ\n</code></pre>\n<h3 id=\"3-äº‹ä»¶æ€»çº¿event-bus---è§‚å¯Ÿè€…æ¨¡å¼çš„å‡çº§ç‰ˆ\">3. <strong>äº‹ä»¶æ€»çº¿ï¼ˆEvent Busï¼‰</strong> - è§‚å¯Ÿè€…æ¨¡å¼çš„å‡çº§ç‰ˆ</h3>\n<pre><code class=\"language-java\">// æ›´çµæ´»çš„äº‹ä»¶å¤„ç†\neventBus.register(subscriber);  // æ³¨å†Œè®¢é˜…è€…\neventBus.post(new OrderEvent());  // å‘å¸ƒäº‹ä»¶\n// æ‰€æœ‰å¯¹OrderEventæ„Ÿå…´è¶£çš„è®¢é˜…è€…éƒ½ä¼šæ”¶åˆ°\n</code></pre>\n<h2 id=\"å…­è§‚å¯Ÿè€…æ¨¡å¼çš„ä¼˜ç¼ºç‚¹\">å…­ã€è§‚å¯Ÿè€…æ¨¡å¼çš„ä¼˜ç¼ºç‚¹</h2>\n<h3 id=\"-ä¼˜ç‚¹\">ğŸ‘ <strong>ä¼˜ç‚¹</strong></h3>\n<ul>\n<li><strong>æ¾è€¦åˆ</strong>ï¼šä¸»é¢˜ä¸çŸ¥é“è§‚å¯Ÿè€…çš„å…·ä½“ç»†èŠ‚ï¼ŒåªçŸ¥é“æ¥å£</li>\n<li><strong>åŠ¨æ€æ·»åŠ </strong>ï¼šè¿è¡Œæ—¶å¯ä»¥éšæ—¶æ·»åŠ /ç§»é™¤è§‚å¯Ÿè€…</li>\n<li><strong>ä¸€å¯¹å¤šé€šçŸ¥</strong>ï¼šä¸€ä¸ªå˜åŒ–å¯ä»¥é€šçŸ¥å¤šä¸ªå¯¹è±¡</li>\n<li><strong>ç¬¦åˆå¼€é—­åŸåˆ™</strong>ï¼šæ–°å¢è§‚å¯Ÿè€…æ— éœ€ä¿®æ”¹ä¸»é¢˜</li>\n</ul>\n<h3 id=\"-ç¼ºç‚¹\">ğŸ‘ <strong>ç¼ºç‚¹</strong></h3>\n<ul>\n<li><strong>å†…å­˜æ³„æ¼é£é™©</strong>ï¼šå¦‚æœè§‚å¯Ÿè€…æ²¡æ­£ç¡®ç§»é™¤ï¼Œå¯èƒ½æ— æ³•è¢«åƒåœ¾å›æ”¶</li>\n<li><strong>é€šçŸ¥é¡ºåºä¸ç¡®å®š</strong>ï¼šè§‚å¯Ÿè€…è¢«é€šçŸ¥çš„é¡ºåºé€šå¸¸æ— æ³•ä¿è¯</li>\n<li><strong>æ€§èƒ½é—®é¢˜</strong>ï¼šè§‚å¯Ÿè€…å¤ªå¤šæ—¶ï¼Œé€šçŸ¥å¯èƒ½å˜æ…¢</li>\n<li><strong>å¾ªç¯ä¾èµ–</strong>ï¼šè§‚å¯Ÿè€…ä¹‹é—´ç›¸äº’è§‚å¯Ÿå¯èƒ½å¯¼è‡´æ­»å¾ªç¯</li>\n</ul>\n<h3 id=\"-æ³¨æ„äº‹é¡¹\">ğŸš¨ <strong>æ³¨æ„äº‹é¡¹</strong></h3>\n<pre><code class=\"language-java\">// 1. é¿å…åœ¨è§‚å¯Ÿè€…æ–¹æ³•ä¸­ä¿®æ”¹ä¸»é¢˜ï¼ˆå¯èƒ½å¯¼è‡´å¾ªç¯æˆ–å¼‚å¸¸ï¼‰\n@Override\npublic void update(Subject subject) {\n    // âŒ é”™è¯¯åšæ³•ï¼šå¯èƒ½å¯¼è‡´é€’å½’è°ƒç”¨\n    subject.setState(\"æ–°çŠ¶æ€\");  \n    \n    // âœ… æ­£ç¡®åšæ³•ï¼šåªè¯»å–ä¸ä¿®æ”¹\n    String state = subject.getState();\n}\n\n// 2. è€ƒè™‘å¼‚æ­¥é€šçŸ¥ï¼ˆé¿å…é˜»å¡ï¼‰\nclass AsyncSubject extends Subject {\n    private ExecutorService executor = Executors.newCachedThreadPool();\n    \n    @Override\n    protected void notifyObservers() {\n        for (Observer observer : observers) {\n            executor.submit(() -&gt; observer.update(data));  // å¼‚æ­¥æ‰§è¡Œ\n        }\n    }\n}\n</code></pre>\n<h2 id=\"ä¸ƒä¸å…¶ä»–æ¨¡å¼çš„å…³ç³»\">ä¸ƒã€ä¸å…¶ä»–æ¨¡å¼çš„å…³ç³»</h2>\n<table>\n<thead>\n<tr>\n<th>æ¨¡å¼</th>\n<th>å…³ç³»</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>å‘å¸ƒ-è®¢é˜…æ¨¡å¼</strong></td>\n<td>è§‚å¯Ÿè€…æ¨¡å¼çš„å‡çº§ç‰ˆï¼Œé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—è§£è€¦</td>\n</tr>\n<tr>\n<td><strong>ä¸­ä»‹è€…æ¨¡å¼</strong></td>\n<td>éƒ½æ˜¯å¤„ç†å¯¹è±¡é—´é€šä¿¡ï¼Œä½†ä¸­ä»‹è€…æ˜¯é›†ä¸­å¼ç®¡ç†</td>\n</tr>\n<tr>\n<td><strong>è´£ä»»é“¾æ¨¡å¼</strong></td>\n<td>éƒ½æ˜¯ä¼ é€’äº‹ä»¶ï¼Œä½†è´£ä»»é“¾æ˜¯é“¾å¼å¤„ç†</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"å…«ç”Ÿæ´»ä¸­çš„è§‚å¯Ÿè€…æ¨¡å¼\">å…«ã€ç”Ÿæ´»ä¸­çš„è§‚å¯Ÿè€…æ¨¡å¼</h2>\n<table>\n<thead>\n<tr>\n<th>åœºæ™¯</th>\n<th>ä¸»é¢˜</th>\n<th>è§‚å¯Ÿè€…</th>\n<th>è§¦å‘æ—¶æœº</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>å¾®ä¿¡ç¾¤</strong></td>\n<td>ç¾¤ä¸»</td>\n<td>ç¾¤æˆå‘˜</td>\n<td>æœ‰äººå‘æ¶ˆæ¯</td>\n</tr>\n<tr>\n<td><strong>å¤©æ°”é¢„æŠ¥</strong></td>\n<td>æ°”è±¡å±€</td>\n<td>æ‰‹æœºAPP/ç”µè§†å°</td>\n<td>å¤©æ°”æ•°æ®æ›´æ–°</td>\n</tr>\n<tr>\n<td><strong>ç½‘çº¢ç›´æ’­</strong></td>\n<td>ä¸»æ’­</td>\n<td>è§‚ä¼—</td>\n<td>å¼€å§‹ç›´æ’­</td>\n</tr>\n<tr>\n<td><strong>GitHubä»“åº“</strong></td>\n<td>ä»£ç ä»“åº“</td>\n<td>Starçš„ç”¨æˆ·</td>\n<td>æœ‰æ–°æäº¤</td>\n</tr>\n<tr>\n<td><strong>ç”µå•†æ‰“æŠ˜</strong></td>\n<td>å•†å“</td>\n<td>æ”¶è—çš„ç”¨æˆ·</td>\n<td>ä»·æ ¼å˜åŒ–</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"ä¹æ€»ç»“ä¸€å¥è¯è®°ä½\">ä¹ã€æ€»ç»“ï¼šä¸€å¥è¯è®°ä½</h2>\n<p><strong>è§‚å¯Ÿè€…æ¨¡å¼ = \"æˆ‘æœ‰æƒ…å†µï¼Œé©¬ä¸Šé€šçŸ¥å¤§å®¶\"</strong></p>\n<ul>\n<li><strong>ä¸»é¢˜</strong>ï¼šå°±æ˜¯é‚£ä¸ª\"æœ‰æƒ…å†µçš„äºº\"</li>\n<li><strong>è§‚å¯Ÿè€…</strong>ï¼šå°±æ˜¯\"ç­‰ç€å¬æ¶ˆæ¯çš„äºº\"</li>\n<li><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼š<strong>è§£è€¦</strong> + <strong>è‡ªåŠ¨é€šçŸ¥</strong></li>\n</ul>\n<h3 id=\"-ä½¿ç”¨æ—¶æœºåˆ¤æ–­è¡¨\">ğŸ“ <strong>ä½¿ç”¨æ—¶æœºåˆ¤æ–­è¡¨</strong></h3>\n<p>é—®è‡ªå·±è¿™äº›é—®é¢˜ï¼š</p>\n<ol>\n<li>âœ… ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å˜åŒ–éœ€è¦é€šçŸ¥å…¶ä»–å¯¹è±¡å—ï¼Ÿ</li>\n<li>âœ… è¢«é€šçŸ¥çš„å¯¹è±¡æ•°é‡ä¸ç¡®å®šæˆ–å¯èƒ½å˜åŒ–å—ï¼Ÿ</li>\n<li>âœ… ä¸æƒ³è®©è¿™äº›å¯¹è±¡ç´§å¯†è€¦åˆå—ï¼Ÿ</li>\n</ol>\n<p>å¦‚æœéƒ½æ˜¯\"æ˜¯\" â†’ ç”¨è§‚å¯Ÿè€…æ¨¡å¼ï¼</p>\n<h3 id=\"-æœ€ä½³å®è·µ\">ğŸ¯ <strong>æœ€ä½³å®è·µ</strong></h3>\n<ol>\n<li><strong>ä¼˜å…ˆç”¨æ¥å£</strong>ï¼šä¸»é¢˜å’Œè§‚å¯Ÿè€…éƒ½ç”¨æ¥å£å®šä¹‰</li>\n<li><strong>è€ƒè™‘çº¿ç¨‹å®‰å…¨</strong>ï¼šå¤šçº¿ç¨‹ç¯å¢ƒä¸‹è¦åŒæ­¥</li>\n<li><strong>é¿å…è¿‡åº¦ä½¿ç”¨</strong>ï¼šç®€å•çš„å›è°ƒå¯èƒ½å°±å¤Ÿäº†</li>\n<li><strong>ä½¿ç”¨ç°æœ‰æ¡†æ¶</strong>ï¼šSpringäº‹ä»¶ã€Guava EventBusç­‰</li>\n</ol>\n<p>è®°ä½å£è¯€ï¼š<strong>\"çŠ¶æ€å˜ï¼Œå‘é€šçŸ¥ï¼›è§‚å¯Ÿè€…ï¼Œè‡ªåŠ¨åŠ¨ï¼›æ¾è€¦åˆï¼ŒçœŸè½»æ¾ï¼\"</strong> ğŸ‰</p>\n\n</div>\n<div id=\"MySignature\">\n    \n<p>â¤ï¸ å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·ç‚¹èµæ”¯æŒï¼ ğŸ‘ åŒæ—¶æ¬¢è¿å…³æ³¨æˆ‘çš„åšå®¢ï¼Œè·å–æ›´å¤šç²¾å½©å†…å®¹ï¼</p>\n\n<p>æœ¬æ–‡æ¥è‡ªåšå®¢å›­ï¼Œä½œè€…ï¼š<a href=\"https://www.cnblogs.com/sun-10387834/\" target=\"_blank\">ä½›ç¥–è®©æˆ‘æ¥å·¡å±±</a>ï¼Œè½¬è½½è¯·æ³¨æ˜åŸæ–‡é“¾æ¥ï¼š<a href=\"https://www.cnblogs.com/sun-10387834/p/19452781\" target=\"_blank\">https://www.cnblogs.com/sun-10387834/p/19452781</a></p>\n\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-15 08:38</span>&nbsp;\n<a href=\"https://www.cnblogs.com/sun-10387834\">ä½›ç¥–è®©æˆ‘æ¥å·¡å±±</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">25</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "Mysqlä¸‹è½½éƒ¨ç½²æ–¹æ³•å¤‡ä»½ï¼ˆWindows/Linuxï¼‰",
      "link": "https://www.cnblogs.com/tokepson/p/19358930",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/tokepson/p/19358930\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-15 00:58\">\n    <span>Mysqlä¸‹è½½éƒ¨ç½²æ–¹æ³•å¤‡ä»½ï¼ˆWindows/Linuxï¼‰</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                    <div id=\"cnblogs_post_description\" style=\"display: none;\">\n        <img alt=\"Mysqlä¸‹è½½éƒ¨ç½²æ–¹æ³•å¤‡ä»½ï¼ˆWindows/Linuxï¼‰\" class=\"desc_img\" src=\"https://img2024.cnblogs.com/blog/3027557/202601/3027557-20260115005726963-1064528741.png\" />\n        ### Mysqlä¸‹è½½éƒ¨ç½²æ–¹æ³•å¤‡ä»½ï¼ˆWindows/Linuxï¼‰\n\n&gt;å‰è¨€ï¼š\nå‘ƒå‘ƒå‘ƒï¼Œï¼Œï¼Œä¸å¤šè¯´äº†ï¼Œç›´æ¥çœ‹æ­£æ–‡å§\n\n### Windows\n    </div>\n<div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h3 id=\"mysqlä¸‹è½½éƒ¨ç½²æ–¹æ³•å¤‡ä»½windowslinux\">Mysqlä¸‹è½½éƒ¨ç½²æ–¹æ³•å¤‡ä»½ï¼ˆWindows/Linuxï¼‰</h3>\n<blockquote>\n<p>å‰è¨€ï¼š<br />\nå‘ƒå‘ƒå‘ƒï¼Œï¼Œï¼Œä¸å¤šè¯´äº†ï¼Œç›´æ¥çœ‹æ­£æ–‡å§</p>\n</blockquote>\n<p><img alt=\"20160513024330_39701\" src=\"https://img2024.cnblogs.com/blog/3027557/202601/3027557-20260115005731844-1896204594.jpg\" /></p>\n<h3 id=\"windows\">Windows</h3>\n<p><em>ç›¸å…³æ•™ç¨‹ï¼š</em> <a href=\"https://blog.csdn.net/R_Feynman_/article/details/147523049\" rel=\"noopener nofollow\" target=\"_blank\">ç¬¬ä¸€é›†ï¼šMySQLä¸‹è½½è¶…ç»†æ•™ç¨‹ï¼ˆè¯¦ç»†åˆ°æ¯ä¸€å°æ­¥ï¼‰</a></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3027557/202512/3027557-20251216182550108-1208756501.png\" width=\"800\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3027557/202512/3027557-20251216182516662-1356207044.png\" width=\"800\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3027557/202512/3027557-20251216182251339-1241286922.png\" width=\"800\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3027557/202512/3027557-20251216182213741-1061580300.png\" width=\"800\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3027557/202512/3027557-20251216182006041-375477595.png\" width=\"800\" /></p>\n<p>ï¼ˆæ²¡æå®Œï¼Œæ‡’å¾—æäº†ï¼Œç­‰ä¸‹æ¬¡å†ç¢°åˆ°å†è¡¥ä¸Šå§ï¼Œç´¯äº†ï¼Œåˆ°æ—¶å€™å†è¡¥å……äº›MySQLå¸¸ç”¨å‘½ä»¤ï¼Œä»¥åŠä¸€äº›å¯èƒ½ä¼šå‡ºç°çš„æ¼æ´â€”â€”â€”â€”ä¸€èˆ¬æ¥è®²æ­£å¸¸å®‰è£…å°±è¡Œï¼Œåªåœ¨å®¢æˆ·æœºä½¿ç”¨Customï¼ŒæœåŠ¡å™¨ä½¿ç”¨ç”¨Serverï¼Œéƒ½å®‰è£…å°±ç”¨Fullï¼Œåé¢å†å¡«å†™ç”¨æˆ·åå¯†ç å³å¯ï¼Œå…¶ä»–æ•™ç¨‹ä¹Ÿæœ‰åšè¯¦ç»†è§£é‡Šï¼‰</p>\n<hr />\n<h3 id=\"linuxubuntu\">Linuxï¼ˆUbuntuï¼‰</h3>\n<p><em>ç›¸å…³æ•™ç¨‹ï¼š</em> <a href=\"https://www.cnblogs.com/zhuchunlin/p/18562893\" target=\"_blank\">MySQL - ä¸‹è½½ä¸å®‰è£…é…ç½®ï¼ˆLinuxï¼‰</a></p>\n<pre><code class=\"language-bash\">sudo apt-get update\n</code></pre>\n<pre><code class=\"language-bash\">sudo apt-get install -y mysql-server mysql-client\n</code></pre>\n<pre><code class=\"language-bash\">sudo vi /etc/mysql/mysql.conf.d/mysqld.cnf\n</code></pre>\n<p>æ‰¾åˆ°[mysqld]é€‰é¡¹ç»„ä¸­çš„bind-addressï¼Œç„¶åä½¿ç”¨i é”®è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œå¹¶è¾“å…¥#æ³¨é‡Šæ‰è¯¥è¡Œã€‚ä¿®æ”¹çš„æœ€ç»ˆç»“æœå¦‚ä¸‹å›¾æœ€åä¸€è¡Œæ‰€ç¤ºã€‚</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3027557/202512/3027557-20251216184740806-1135866084.png\" width=\"800\" /></p>\n<pre><code class=\"language-bash\">sudo systemctl status mysql #æŸ¥çœ‹mysqlæœåŠ¡çš„çŠ¶æ€\n</code></pre>\n<pre><code class=\"language-bash\">sudo systemctl start mysql #å¯åŠ¨MySQLæœåŠ¡\n</code></pre>\n<pre><code class=\"language-bash\">sudo systemctl stop mysql #åœæ­¢MySQLæœåŠ¡\n</code></pre>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3027557/202512/3027557-20251216184846284-1413312583.png\" width=\"600\" /></p>\n<pre><code class=\"language-bash\">sudo vim /etc/mysql/debian.cnf\n</code></pre>\n<pre><code># MySQLå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶\n# åªåŒ…å«å®¢æˆ·ç«¯ç›¸å…³çš„é…ç½®é€‰é¡¹\n\n[client]\n# é»˜è®¤è¿æ¥åˆ°æœ¬åœ°MySQL\nhost = localhost\nuser = root\nsocket = /var/run/mysqld/mysqld.sock\n\n[mysql]\n# è®¾ç½®å‘½ä»¤æç¤ºç¬¦\nprompt = (\\u@\\h) [\\d]&gt;\\_\n# å¯ç”¨è‡ªåŠ¨è¡¥å…¨\nauto-rehash = TRUE\n# æ˜¾ç¤ºåˆ—å\ncolumn-names = TRUE\n\n[mysqladmin]\n[mysqlcheck]\n[mysqldump]\n[mysqlimport]\n[mysqlshow]\n[mysqlslap]\n\n</code></pre>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3027557/202512/3027557-20251216185117506-12438712.png\" width=\"600\" /></p>\n<p>ä½¿ç”¨æ–‡ä»¶ä¸­çš„åˆå§‹ç”¨æˆ·åå’Œå¯†ç ç™»å½•mysql</p>\n<pre><code class=\"language-bash\">mysql -u debian-sys-maint -p pfdKSjeFFhJtdGkr\n</code></pre>\n<pre><code class=\"language-bash\">update mysql.user set authentication_string=password('123456') where user='root' and host='localhost';\n</code></pre>\n<p><strong>é‡åˆ°çš„é”™è¯¯é—®é¢˜</strong></p>\n<pre><code># ç¬¬1åˆ†é’Ÿï¼šæ£€æŸ¥æœåŠ¡çŠ¶æ€\nsudo systemctl status mysql\nsudo systemctl restart mysql\n\n# ç¬¬2åˆ†é’Ÿï¼šä¿®å¤æ–‡ä»¶æƒé™\nsudo chmod 644 /etc/mysql/debian.cnf\n\n# ç¬¬3åˆ†é’Ÿï¼šç™»å½•ç³»ç»Ÿè´¦æˆ·\nmysql --defaults-extra-file=/etc/mysql/debian.cnf\n\n# ç¬¬4åˆ†é’Ÿï¼šé‡ç½®rootå¯†ç ï¼ˆåœ¨MySQLä¸­æ‰§è¡Œï¼‰\nALTER USER 'root'@'localhost' IDENTIFIED BY '123456';\nFLUSH PRIVILEGES;\nexit;\n\n# ç¬¬5åˆ†é’Ÿï¼šæµ‹è¯•ç™»å½•\nmysql -u root -p123456\n</code></pre>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3027557/202512/3027557-20251216194106977-213894387.png\" /></p>\n<p><strong>æµ‹è¯•æ•ˆæœ</strong></p>\n<pre><code class=\"language-bash\">SELECT VERSION(), USER(), NOW();\nSELECT 1+2*3-4/5;\n</code></pre>\n<hr />\n<h3 id=\"linuxcentos\">Linuxï¼ˆCentOSï¼‰</h3>\n<p><em>ç›¸å…³æ•™ç¨‹ï¼š</em> <a href=\"https://cloud.tencent.com/developer/article/2372374\" rel=\"noopener nofollow\" target=\"_blank\">Linux MySQLä¸‹è½½å®‰è£…è¯¦ç»†æ•™ç¨‹ï¼ˆCentOSç‰ˆï¼‰</a></p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-15 00:58</span>&nbsp;\n<a href=\"https://www.cnblogs.com/tokepson\">TokE648</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">46</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">1</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "çº¿ç¨‹æ± ä»¥åŠHashTable, HashMap, ConcurrentHashMapä¹‹é—´çš„åŒºåˆ«",
      "link": "https://www.cnblogs.com/xi-yongqi/p/19484107",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n\t\t\t<a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/xi-yongqi/p/19484107\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-15 00:29\">\n    <span>çº¿ç¨‹æ± ä»¥åŠHashTable, HashMap, ConcurrentHashMapä¹‹é—´çš„åŒºåˆ«</span>\n    \n\n</a>\n\n\t\t</h1>\n\t\t<div class=\"clear\"></div>\n\t\t<div class=\"postBody\">\n\t\t\t<div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h3 id=\"ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± \">ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± </h3>\n<h5 id=\"çº¿ç¨‹æ± thread-poolæ˜¯ä¸€ç§çº¿ç¨‹ä½¿ç”¨æ¨¡å¼æå‰åˆ›å»ºä¸€å®šæ•°é‡çš„çº¿ç¨‹å¹¶è¿›è¡Œå¤ç”¨ç»Ÿä¸€ç®¡ç†çº¿ç¨‹çš„åˆ›å»ºé”€æ¯å’Œè°ƒåº¦ä»è€Œ\">çº¿ç¨‹æ± ï¼ˆThread Poolï¼‰æ˜¯ä¸€ç§çº¿ç¨‹ä½¿ç”¨æ¨¡å¼ï¼Œæå‰åˆ›å»ºä¸€å®šæ•°é‡çš„çº¿ç¨‹å¹¶è¿›è¡Œå¤ç”¨ï¼Œç»Ÿä¸€ç®¡ç†çº¿ç¨‹çš„åˆ›å»ºã€é”€æ¯å’Œè°ƒåº¦ï¼Œä»è€Œï¼š</h5>\n<ul>\n<li>é™ä½çº¿ç¨‹åˆ›å»ºå’Œé”€æ¯çš„å¼€é”€</li>\n<li>æé«˜ç¨‹åºå“åº”é€Ÿåº¦</li>\n<li>é˜²æ­¢çº¿ç¨‹æ•°é‡å¤±æ§å¯¼è‡´ç³»ç»Ÿèµ„æºè€—å°½</li>\n</ul>\n<h3 id=\"çº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°\">çº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°</h3>\n<ul>\n<li>Javaä¸­çº¿ç¨‹æ± çš„æ ¸å¿ƒå®ç°ç±»æ˜¯ ThreadPoolExecutorã€‚</li>\n</ul>\n<pre><code class=\"language-java\">public ThreadPoolExecutor(\n    int corePoolSize,\n    int maximumPoolSize,\n    long keepAliveTime,\n    TimeUnit unit,\n    BlockingQueue&lt;Runnable&gt; workQueue,\n    ThreadFactory threadFactory,\n    RejectedExecutionHandler handler\n)\n</code></pre>\n<ol>\n<li>corePoolSizeï¼ˆæ ¸å¿ƒçº¿ç¨‹æ•°ï¼‰</li>\n</ol>\n<ul>\n<li>çº¿ç¨‹æ± ä¸­é•¿æœŸå­˜æ´»çš„çº¿ç¨‹æ•°é‡</li>\n<li>å³ä½¿ç©ºé—²ï¼Œä¹Ÿä¸ä¼šè¢«é”€æ¯ï¼ˆé™¤éè®¾ç½®å…è®¸å›æ”¶ï¼‰</li>\n<li>ä½œç”¨ï¼šä¿è¯çº¿ç¨‹æ± çš„åŸºæœ¬å¤„ç†èƒ½åŠ›</li>\n</ul>\n<ol start=\"2\">\n<li>maximumPoolSizeï¼ˆæœ€å¤§çº¿ç¨‹æ•°ï¼‰</li>\n</ol>\n<ul>\n<li>çº¿ç¨‹æ± ä¸­å…è®¸å­˜åœ¨çš„æœ€å¤§çº¿ç¨‹æ•°é‡</li>\n<li>å½“ä»»åŠ¡å¾ˆå¤šã€é˜Ÿåˆ—å·²æ»¡æ—¶ï¼Œæ‰ä¼šåˆ›å»ºæ–°çº¿ç¨‹</li>\n<li>ä½œç”¨ï¼šé™åˆ¶çº¿ç¨‹æ•°é‡ï¼Œé˜²æ­¢èµ„æºè€—å°½</li>\n</ul>\n<ol start=\"3\">\n<li>keepAliveTimeï¼ˆç©ºé—²å­˜æ´»æ—¶é—´ï¼‰</li>\n</ol>\n<ul>\n<li>éæ ¸å¿ƒçº¿ç¨‹ç©ºé—²æ—¶ï¼Œæœ€å¤šå­˜æ´»æ—¶é—´</li>\n<li>è¶…è¿‡è¯¥æ—¶é—´å°†è¢«å›æ”¶</li>\n</ul>\n<ol start=\"4\">\n<li>unitï¼ˆæ—¶é—´å•ä½ï¼‰</li>\n</ol>\n<ul>\n<li>keepAliveTime çš„æ—¶é—´å•ä½</li>\n<li>å¦‚ï¼šTimeUnit.SECONDS</li>\n</ul>\n<ol start=\"5\">\n<li>workQueueï¼ˆä»»åŠ¡é˜Ÿåˆ—ï¼‰</li>\n</ol>\n<ul>\n<li>ç”¨äºå­˜æ”¾ç­‰å¾…æ‰§è¡Œçš„ä»»åŠ¡</li>\n<li>å¸¸è§å®ç°ï¼š</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>é˜Ÿåˆ—</th>\n<th>ç‰¹ç‚¹</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>LinkedBlockingQueue</td>\n<td>æ— ç•Œé˜Ÿåˆ—ï¼ˆå¯èƒ½ OOMï¼‰</td>\n</tr>\n<tr>\n<td>ArrayBlockingQueue</td>\n<td>æœ‰ç•Œé˜Ÿåˆ—</td>\n</tr>\n<tr>\n<td>SynchronousQueue</td>\n<td>ä¸å­˜ä»»åŠ¡ï¼Œç›´æ¥äº¤ç»™çº¿ç¨‹</td>\n</tr>\n<tr>\n<td>DelayQueue</td>\n<td>å»¶æ—¶ä»»åŠ¡</td>\n</tr>\n</tbody>\n</table>\n<ol start=\"6\">\n<li>threadFactoryï¼ˆçº¿ç¨‹å·¥å‚ï¼‰</li>\n</ol>\n<ul>\n<li>ç”¨äºåˆ›å»ºçº¿ç¨‹</li>\n<li>å¯è‡ªå®šä¹‰çº¿ç¨‹åã€ä¼˜å…ˆçº§ã€æ˜¯å¦å®ˆæŠ¤çº¿ç¨‹</li>\n<li>æ–¹ä¾¿æ’æŸ¥é—®é¢˜ã€æ—¥å¿—å®šä½</li>\n</ul>\n<ol start=\"7\">\n<li>handlerï¼ˆæ‹’ç»ç­–ç•¥ï¼‰</li>\n</ol>\n<ul>\n<li>å½“çº¿ç¨‹æ± çº¿ç¨‹æ•°å·²æ»¡ + é˜Ÿåˆ—å·²æ»¡æ—¶è§¦å‘ã€‚</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>ç­–ç•¥</th>\n<th>è¡Œä¸º</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>AbortPolicy</td>\n<td>æŠ›å¼‚å¸¸ï¼ˆé»˜è®¤ï¼‰</td>\n</tr>\n<tr>\n<td>CallerRunsPolicy</td>\n<td>è°ƒç”¨è€…è‡ªå·±æ‰§è¡Œ</td>\n</tr>\n<tr>\n<td>DiscardPolicy</td>\n<td>ç›´æ¥ä¸¢å¼ƒä»»åŠ¡</td>\n</tr>\n<tr>\n<td>DiscardOldestPolicy</td>\n<td>ä¸¢å¼ƒæœ€æ—©ä»»åŠ¡</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"çº¿ç¨‹æ± çš„å·¥ä½œæµç¨‹\">çº¿ç¨‹æ± çš„å·¥ä½œæµç¨‹</h3>\n<ul>\n<li>çº¿ç¨‹æ± å¤„ç†ä»»åŠ¡çš„å®Œæ•´é€»è¾‘å¯æ€»ç»“ä¸º5ä¸ªæ­¥éª¤:</li>\n</ul>\n<div class=\"mermaid\">flowchart TD\n    A[æäº¤ä»»åŠ¡] --&gt; B{æ ¸å¿ƒçº¿ç¨‹æ± æ˜¯å¦æ»¡ï¼Ÿ}\n    B -- å¦ --&gt; C[åˆ›å»ºæ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œä»»åŠ¡]\n    B -- æ˜¯ --&gt; D{ä»»åŠ¡é˜Ÿåˆ—æ˜¯å¦æ»¡ï¼Ÿ}\n    D -- å¦ --&gt; E[ä»»åŠ¡åŠ å…¥é˜Ÿåˆ—ç­‰å¾…]\n    D -- æ˜¯ --&gt; F{çº¿ç¨‹æ± æ˜¯å¦è¾¾åˆ°æœ€å¤§çº¿ç¨‹æ•°ï¼Ÿ}\n    F -- å¦ --&gt; G[åˆ›å»ºéæ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œä»»åŠ¡]\n    F -- æ˜¯ --&gt; H[æ‰§è¡Œæ‹’ç»ç­–ç•¥]\n</div><h3 id=\"executorsåˆ›å»ºå¸¸è§çº¿ç¨‹æ± \">Executorsåˆ›å»ºå¸¸è§çº¿ç¨‹æ± </h3>\n<ul>\n<li>Javaæä¾›äº†Executorså·¥å…·ç±»ï¼Œå¿«é€Ÿåˆ›å»ºçº¿ç¨‹æ± ï¼ˆä½†ç”Ÿäº§ç¯å¢ƒä¸æ¨èç›´æ¥ä½¿ç”¨ï¼‰ã€‚</li>\n</ul>\n<ol>\n<li>FixedThreadPoolï¼ˆå›ºå®šå¤§å°çº¿ç¨‹æ± ï¼‰</li>\n</ol>\n<pre><code class=\"language-java\">ExecutorService pool = Executors.newFixedThreadPool(5);\n</code></pre>\n<ul>\n<li>ç‰¹ç‚¹\n<ul>\n<li>çº¿ç¨‹æ•°é‡å›ºå®š</li>\n<li>ä½¿ç”¨ æ— ç•Œé˜Ÿåˆ— LinkedBlockingQueue</li>\n</ul>\n</li>\n<li>é£é™©\n<ul>\n<li>ä»»åŠ¡è¿‡å¤šå¯èƒ½ OOM(å†…å­˜æº¢å‡º)</li>\n</ul>\n</li>\n<li>é€‚ç”¨åœºæ™¯\n<ul>\n<li>ä»»åŠ¡é‡ç¨³å®š</li>\n<li>å¹¶å‘æ•°å¯æ§</li>\n</ul>\n</li>\n</ul>\n<ol start=\"2\">\n<li>SingleThreadExecutorï¼ˆå•çº¿ç¨‹æ± ï¼‰</li>\n</ol>\n<pre><code class=\"language-java\">ExecutorService pool = Executors.newSingleThreadExecutor();\n</code></pre>\n<ul>\n<li>ç‰¹ç‚¹\n<ul>\n<li>åªæœ‰ä¸€ä¸ªçº¿ç¨‹</li>\n<li>ä¿è¯ä»»åŠ¡é¡ºåºæ‰§è¡Œ</li>\n</ul>\n</li>\n<li>é£é™©\n<ul>\n<li>ä»»åŠ¡å †ç§¯å¯èƒ½ OOM(å†…å­˜æº¢å‡º)</li>\n</ul>\n</li>\n</ul>\n<ol start=\"3\">\n<li>CachedThreadPoolï¼ˆç¼“å­˜çº¿ç¨‹æ± ï¼‰</li>\n</ol>\n<pre><code class=\"language-java\">ExecutorService pool = Executors.newCachedThreadPool();\n</code></pre>\n<ul>\n<li>ç‰¹ç‚¹\n<ul>\n<li>çº¿ç¨‹æ•°ä¸å›ºå®š</li>\n<li>ç©ºé—²çº¿ç¨‹ 60s å›æ”¶</li>\n<li>ä½¿ç”¨ SynchronousQueue</li>\n</ul>\n</li>\n<li>é£é™©\n<ul>\n<li>çº¿ç¨‹æ•°æ— é™å¢é•¿ï¼Œå®¹æ˜“è€—å°½CPU</li>\n</ul>\n</li>\n</ul>\n<ol start=\"4\">\n<li>ScheduledThreadPoolï¼ˆå®šæ—¶çº¿ç¨‹æ± ï¼‰</li>\n</ol>\n<pre><code class=\"language-java\">ScheduledExecutorService pool = Executors.newScheduledThreadPool(3);\n</code></pre>\n<ul>\n<li>ç‰¹ç‚¹:æ”¯æŒå®šæ—¶ã€å‘¨æœŸä»»åŠ¡</li>\n</ul>\n<hr />\n<h3 id=\"hashtable-hashmap-concurrenthashmap-ä¹‹é—´çš„åŒºåˆ«\">HashTable, HashMap, ConcurrentHashMap ä¹‹é—´çš„åŒºåˆ«</h3>\n<h4 id=\"ä¸»è¦åŒºåˆ«\">ä¸»è¦åŒºåˆ«ï¼š</h4>\n<table>\n<thead>\n<tr>\n<th>å¯¹æ¯”ç‚¹</th>\n<th>Hashtable</th>\n<th>HashMap</th>\n<th>ConcurrentHashMap</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>çº¿ç¨‹å®‰å…¨</td>\n<td>å®‰å…¨</td>\n<td>ä¸å®‰å…¨</td>\n<td>å®‰å…¨</td>\n</tr>\n<tr>\n<td>å®ç°æ–¹å¼</td>\n<td>æ•°ç»„+é“¾è¡¨</td>\n<td>æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ (JDK 1.8)</td>\n<td>æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ + CAS + synchronized</td>\n</tr>\n<tr>\n<td>é”çš„ç²’åº¦</td>\n<td>synchronized æ•´è¡¨åŠ é”</td>\n<td>æ— é”</td>\n<td>åˆ†æ®µé”/æ¡¶çº§é” (é”å®šå¤´èŠ‚ç‚¹)</td>\n</tr>\n<tr>\n<td>æ€§èƒ½</td>\n<td>æœ€å·®</td>\n<td>æœ€å¥½</td>\n<td>é«˜å¹¶å‘ä¸‹æœ€å¥½</td>\n</tr>\n<tr>\n<td>å…è®¸ key ä¸º null</td>\n<td>ä¸å…è®¸</td>\n<td>å…è®¸ 1 ä¸ª</td>\n<td>ä¸å…è®¸</td>\n</tr>\n<tr>\n<td>å…è®¸ value ä¸º null</td>\n<td>ä¸å…è®¸</td>\n<td>å…è®¸</td>\n<td>ä¸å…è®¸</td>\n</tr>\n<tr>\n<td>æ˜¯å¦æ¨èä½¿ç”¨</td>\n<td>ä¸æ¨è</td>\n<td>æ¨èï¼ˆå•çº¿ç¨‹ï¼‰</td>\n<td>æ¨èï¼ˆå¹¶å‘ï¼‰</td>\n</tr>\n<tr>\n<td>æ‰©å®¹æœºåˆ¶</td>\n<td>æ•´ä½“æ‰©å®¹ï¼Œæ‰©å®¹æ—¶é˜»å¡æ‰€æœ‰æ“ä½œ</td>\n<td>æ•´ä½“æ‰©å®¹ï¼Œæ‰©å®¹æ—¶é˜»å¡æ‰€æœ‰æ“ä½œ</td>\n<td>åˆ†æ®µ / åˆ†æ¡¶æ‰©å®¹ï¼Œä¸é˜»å¡å…¨éƒ¨æ“ä½œ</td>\n</tr>\n</tbody>\n</table>\n\n</div>\n<div class=\"clear\"></div>\n\n\t\t</div>\n\t\t<div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-15 00:29</span>&nbsp;\n<a href=\"https://www.cnblogs.com/xi-yongqi\">æˆ‘ä¼šæ›¿é£å»</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">2</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "Flinkæºç é˜…è¯»ï¼šJobManagerçš„HAæœºåˆ¶",
      "link": "https://www.cnblogs.com/Jackeyzhe/p/19484622",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/Jackeyzhe/p/19484622\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-14 23:45\">\n    <span>Flinkæºç é˜…è¯»ï¼šJobManagerçš„HAæœºåˆ¶</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                    <div id=\"cnblogs_post_description\" style=\"display: none;\">\n        <img alt=\"Flinkæºç é˜…è¯»ï¼šJobManagerçš„HAæœºåˆ¶\" class=\"desc_img\" src=\"https://img2024.cnblogs.com/blog/1828322/202601/1828322-20260114234320282-1778052120.png\" />\n        JobManager åœ¨ Flink é›†ç¾¤ä¸­å‘æŒ¥ç€é‡è¦çš„ä½œç”¨ï¼ŒåŒ…æ‹¬ä»»åŠ¡è°ƒåº¦å’Œèµ„æºç®¡ç†ç­‰å·¥ä½œã€‚å¦‚æœ JobManager å®•æœºï¼Œé‚£ä¹ˆæ•´ä¸ªé›†ç¾¤çš„ä»»åŠ¡éƒ½å°†å¤±è´¥ã€‚ä¸ºäº†è§£å†³ JobManager çš„å•ç‚¹é—®é¢˜ï¼ŒFlink ä¹Ÿè®¾è®¡äº† HA æœºåˆ¶æ¥ä¿éšœæ•´ä¸ªé›†ç¾¤çš„ç¨³å®šæ€§ã€‚\n    </div>\n<div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<p>JobManager åœ¨ Flink é›†ç¾¤ä¸­å‘æŒ¥ç€é‡è¦çš„ä½œç”¨ï¼ŒåŒ…æ‹¬ä»»åŠ¡è°ƒåº¦å’Œèµ„æºç®¡ç†ç­‰å·¥ä½œã€‚å¦‚æœ JobManager å®•æœºï¼Œé‚£ä¹ˆæ•´ä¸ªé›†ç¾¤çš„ä»»åŠ¡éƒ½å°†å¤±è´¥ã€‚ä¸ºäº†è§£å†³ JobManager çš„å•ç‚¹é—®é¢˜ï¼ŒFlink ä¹Ÿè®¾è®¡äº† HA æœºåˆ¶æ¥ä¿éšœæ•´ä¸ªé›†ç¾¤çš„ç¨³å®šæ€§ã€‚</p>\n<h3 id=\"åŸºæœ¬æ¦‚å¿µ\">åŸºæœ¬æ¦‚å¿µ</h3>\n<p>åœ¨ JobManager å¯åŠ¨æ—¶ï¼Œè°ƒç”¨ <code>HighAvailabilityServicesUtils.createHighAvailabilityServices</code> æ¥åˆ›å»º HA æœåŠ¡ï¼ŒHA ä¾èµ–çš„æœåŠ¡éƒ½è¢«å°è£…åœ¨ HighAvailabilityServices ä¸­ã€‚å½“å‰ Flink å†…éƒ¨æ”¯æŒä¸¤ç§é«˜å¯ç”¨æ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯ ZooKeeper å’Œ KUBERNETESã€‚</p>\n<pre><code class=\"language-java\">case ZOOKEEPER:\n    return createZooKeeperHaServices(configuration, executor, fatalErrorHandler);\ncase KUBERNETES:\n    return createCustomHAServices(\n            \"org.apache.flink.kubernetes.highavailability.KubernetesHaServicesFactory\",\n            configuration,\n            executor);\n</code></pre>\n<p>HighAvailabilityServices ä¸­æä¾›çš„å…³é”®ç»„ä»¶åŒ…æ‹¬ï¼š</p>\n<ul>\n<li>\n<p>LeaderRetrievalServiceï¼šæœåŠ¡å‘ç°ï¼Œç”¨äºè·å–å½“å‰ leader çš„åœ°å€ã€‚ç›®å‰ç”¨åˆ°æœåŠ¡å‘ç°çš„ç»„ä»¶æœ‰ ResourceManagerã€Dispatcherã€JobManagerã€ClusterRestEndpointã€‚</p>\n</li>\n<li>\n<p>LeaderElectionï¼šé€‰ä¸¾æœåŠ¡ï¼Œä»å¤šä¸ªå€™é€‰è€…ä¸­é€‰å‡ºä¸€ä¸ªä½œä¸º leaderã€‚ç”¨åˆ°é€‰ä¸¾æœåŠ¡çš„åŒæ ·æ˜¯ ResourceManagerã€Dispatcherã€JobManagerã€ClusterRestEndpoint è¿™å››ä¸ªã€‚</p>\n</li>\n<li>\n<p>CheckpointRecoveryFactoryï¼šCheckpoint æ¢å¤ç»„ä»¶çš„å·¥å‚ç±»ï¼Œæä¾›äº†åˆ›å»º CompletedCheckpointStore å’Œ CheckpointIDCounter çš„æ–¹æ³•ã€‚CompletedCheckpointStore æ˜¯ç”¨äºå­˜å‚¨å·²å®Œæˆçš„ checkpoint çš„å…ƒä¿¡æ¯ï¼ŒCheckpointIDCounter æ˜¯ç”¨äºç”Ÿæˆ checkpoint IDã€‚</p>\n</li>\n<li>\n<p>ExecutionPlanStoreï¼šç”¨äºå­˜å‚¨æ‰§è¡Œè®¡åˆ’ã€‚</p>\n</li>\n<li>\n<p>JobResultStoreï¼šç”¨äºå­˜å‚¨ä½œä¸šç»“æœï¼Œè¿™é‡Œæœ‰ä¸¤ç§çŠ¶æ€ï¼Œä¸€ç§æ˜¯ dirtyï¼Œè¡¨ç¤ºä½œä¸šæ²¡æœ‰è¢«å®Œå…¨æ¸…ç†ï¼Œå¦ä¸€ç§æ˜¯ cleanï¼Œè¡¨ç¤ºä½œä¸šæ¸…ç†å·¥ä½œå·²ç»æ‰§è¡Œå®Œæˆäº†ã€‚</p>\n</li>\n<li>\n<p>BlobStoreï¼šå­˜å‚¨ä½œä¸šè¿è¡ŒæœŸé—´çš„ä¸€äº›äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p>\n</li>\n</ul>\n<h4 id=\"é€‰ä¸¾æœåŠ¡\">é€‰ä¸¾æœåŠ¡</h4>\n<p>Flink çš„é€‰ä¸¾æ˜¯ä¾é  LeaderElection å’Œ LeaderContender é…åˆå®Œæˆçš„ã€‚LeaderElection æ˜¯ LeaderElectionService çš„ä»£ç†æ¥å£ï¼Œæä¾›äº†æ³¨å†Œå€™é€‰è€…ã€ç¡®è®¤ leader å’Œ åˆ¤æ–­å€™é€‰è€…æ˜¯å¦æ˜¯ leader ä¸‰ä¸ªæ¥å£ã€‚LeaderContender åˆ™æ˜¯ç”¨æ¥è¡¨ç¤ºå€™é€‰è€…å¯¹è±¡ã€‚å½“ä¸€ä¸ª LeaderContender å½“é€‰ leader åï¼ŒLeaderElectionService ä¼šä¸ºå…¶ç”Ÿæˆä¸€ä¸ª leaderSessionIdï¼ŒLeaderContender ä¼šè°ƒç”¨ confirmLeadershipAsync å‘å¸ƒè‡ªå·±çš„åœ°å€ã€‚é€‰ä¸¾æœåŠ¡çš„å…·ä½“å®ç°åœ¨ LeaderElectionDriver æ¥å£ä¸­ã€‚</p>\n<h4 id=\"æœåŠ¡å‘ç°\">æœåŠ¡å‘ç°</h4>\n<p>æœåŠ¡å‘ç°çš„ä½œç”¨æ˜¯è·å–å„ç»„ä»¶çš„ leader åœ°å€ã€‚æœåŠ¡å‘ç°ä¾èµ– LeaderRetrievalService å’Œ LeaderRetrievalListenerã€‚LeaderRetrievalService å¯ä»¥å¯åŠ¨ä¸€ä¸ªç›‘å¬ï¼Œå½“æœ‰æ–°çš„ leader å½“é€‰æ—¶ï¼Œä¼šè°ƒç”¨ LeaderRetrievalListener çš„ notifyLeaderAddress æ–¹æ³•ã€‚</p>\n<h4 id=\"ä¿¡æ¯ä¿å­˜\">ä¿¡æ¯ä¿å­˜</h4>\n<p>å½“ leader å‘ç”Ÿåˆ‡æ¢æ—¶ï¼Œæ–°çš„ leader éœ€è¦è·å–åˆ°æ—§ leader å­˜å‚¨çš„ä¿¡æ¯ï¼Œè¿™å°±éœ€è¦æ—§ leader æŠŠè¿™äº›ä¿¡æ¯å­˜åœ¨ä¸€ä¸ªå…¬å…±çš„å­˜å‚¨ä¸Šã€‚å®ƒå¯ä»¥æ˜¯ ZooKeeper æˆ– Kubernetes çš„å­˜å‚¨ï¼Œä¹Ÿå¯ä»¥æ˜¯åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿçš„å­˜å‚¨ã€‚</p>\n<h3 id=\"åŸºäº-zookeeper-çš„-ha\">åŸºäº ZooKeeper çš„ HA</h3>\n<h4 id=\"é€‰ä¸¾æœåŠ¡-1\">é€‰ä¸¾æœåŠ¡</h4>\n<p>å‰é¢æˆ‘ä»¬æåˆ°äº†é€‰ä¸¾æœåŠ¡ä¸»è¦ä¾èµ– LeaderElection å’Œ LeaderContender é…åˆå®Œæˆã€‚æˆ‘ä»¬å°±ä»¥ JobManager ä¸ºä¾‹ï¼Œçœ‹ä¸€ä¸‹æœºé‡ ZooKeeper çš„é€‰ä¸¾æµç¨‹çš„å…·ä½“å®ç°ã€‚</p>\n<p><img alt=\"ZKLeaderElection\" class=\"lazyload\" /></p>\n<p>å›¾ä¸­ JobMasterServiceLeadershipRunner æ˜¯ LeaderContender çš„å®ç°ç±»ã€‚åœ¨å¯åŠ¨æœåŠ¡æ—¶ï¼Œä¼šå‘ LeaderElection æ³¨å†Œè‡ªå·±çš„ä¿¡æ¯ï¼Œå®é™…æ‰§è¡Œè€…æ˜¯ DefaultLeaderElectionServiceã€‚å®ƒå…ˆåˆ›å»ºäº† LeaderElectionDriverï¼Œç„¶åå°† LeaderContender ä¿å­˜åœ¨ leaderContenderRegistry ä¸­ã€‚é€‰ä¸¾çš„æ ¸å¿ƒé€»è¾‘å°è£…åœ¨ LeaderElectionDriver ä¸­ã€‚</p>\n<p>åœ¨åˆ›å»º LeaderElectionDriver æ—¶ï¼Œä¼šåˆ›å»º LeaderLatch å¯¹è±¡å’Œ TreeCache å¯¹è±¡ï¼Œ LeaderLatch å°è£…äº†ä¸ ZooKeeper å…³è”çš„å›è°ƒï¼Œä¼šæ¥æ”¶ä¸€ä¸ª LeaderElectionDriver ä½œä¸ºç›‘å¬ã€‚TreeCache ä¸»è¦ç”¨äºç›‘å¬ ZooKeeper ä¸­ leader èŠ‚ç‚¹çš„å˜æ›´ã€‚</p>\n<pre><code class=\"language-java\">public ZooKeeperLeaderElectionDriver(\n        CuratorFramework curatorFramework, LeaderElectionDriver.Listener leaderElectionListener)\n        throws Exception {\n    ...\n    this.leaderLatch = new LeaderLatch(curatorFramework, ZooKeeperUtils.getLeaderLatchPath());\n    this.treeCache =\n            ZooKeeperUtils.createTreeCache(\n                    curatorFramework,\n                    \"/\",\n                    new ZooKeeperLeaderElectionDriver.ConnectionInfoNodeSelector());\n\n    treeCache\n            .getListenable()\n            .addListener(\n                    (client, event) -&gt; {\n                        switch (event.getType()) {\n                            case NODE_ADDED:\n                            case NODE_UPDATED:\n                                Preconditions.checkNotNull(\n                                        event.getData(),\n                                        \"The ZooKeeper event data must not be null.\");\n                                handleChangedLeaderInformation(event.getData());\n                                break;\n                            case NODE_REMOVED:\n                                Preconditions.checkNotNull(\n                                        event.getData(),\n                                        \"The ZooKeeper event data must not be null.\");\n                                handleRemovedLeaderInformation(event.getData().getPath());\n                                break;\n                        }\n                    });\n\n    leaderLatch.addListener(this);\n    ...\n    leaderLatch.start();\n    treeCache.start();\n}\n</code></pre>\n<p>æˆ‘ä»¬è¿›å…¥åˆ° LeaderLatch çš„ start æ–¹æ³•ã€‚å®ƒçš„å†…éƒ¨æ˜¯åœ¨ ZooKeeper ä¸Šåˆ›å»º latch-xxx èŠ‚ç‚¹ã€‚xxx æ˜¯å½“å‰ LeaderLatch çš„ IDï¼Œå®ƒç”± ZooKeeper ç”Ÿæˆï¼ŒID æœ€å°çš„å½“é€‰ Leaderã€‚</p>\n<pre><code class=\"language-java\">private void checkLeadership(List&lt;String&gt; children) throws Exception {\n    if (this.debugCheckLeaderShipLatch != null) {\n        this.debugCheckLeaderShipLatch.await();\n    }\n\n    String localOurPath = (String)this.ourPath.get();\n    List&lt;String&gt; sortedChildren = LockInternals.getSortedChildren(\"latch-\", sorter, children);\n    int ourIndex = localOurPath != null ? sortedChildren.indexOf(ZKPaths.getNodeFromPath(localOurPath)) : -1;\n    this.log.debug(\"checkLeadership with id: {}, ourPath: {}, children: {}\", new Object[]{this.id, localOurPath, sortedChildren});\n    if (ourIndex &lt; 0) {\n        this.log.error(\"Can't find our node. Resetting. Index: \" + ourIndex);\n        this.reset();\n    } else if (ourIndex == 0) {\n        this.lastPathIsLeader.set(localOurPath);\n        this.setLeadership(true);\n    } else {\n        this.setLeadership(false);\n        String watchPath = (String)sortedChildren.get(ourIndex - 1);\n        Watcher watcher = new Watcher() {\n            public void process(WatchedEvent event) {\n                if (LeaderLatch.this.state.get() == LeaderLatch.State.STARTED &amp;&amp; event.getType() == EventType.NodeDeleted) {\n                    try {\n                        LeaderLatch.this.getChildren();\n                    } catch (Exception ex) {\n                        ThreadUtils.checkInterrupted(ex);\n                        LeaderLatch.this.log.error(\"An error occurred checking the leadership.\", ex);\n                    }\n                }\n\n            }\n        };\n        BackgroundCallback callback = new BackgroundCallback() {\n            public void processResult(CuratorFramework client, CuratorEvent event) throws Exception {\n                if (event.getResultCode() == Code.NONODE.intValue()) {\n                    LeaderLatch.this.getChildren();\n                }\n\n            }\n        };\n        ((ErrorListenerPathable)((BackgroundPathable)this.client.getData().usingWatcher(watcher)).inBackground(callback)).forPath(ZKPaths.makePath(this.latchPath, watchPath));\n    }\n\n}\n</code></pre>\n<p>å½“é€‰ Leader åï¼Œä¼šå›è°ƒ LeaderElectionDriver çš„ isLeader æ–¹æ³•ï¼Œå¦‚æœæœªå½“é€‰ï¼Œåˆ™ç»§ç»­ç›‘å¬ latch èŠ‚ç‚¹çš„å˜æ›´ã€‚isLeader ä¼šç»§ç»­å›è°ƒ LeaderElection çš„ onGrantLeadership æ–¹æ³•ï¼Œæ¥ç€è°ƒç”¨ LeaderContender çš„ grantLeadershipã€‚è¿™æ—¶ä¼šå¯åŠ¨ JobMaster æœåŠ¡ï¼Œç„¶åè°ƒç”¨ LeaderElection çš„ confirmLeadershipAsync æ¥ç¡®è®¤å½“é€‰æˆåŠŸã€‚ç¡®è®¤çš„è¿‡ç¨‹æ˜¯ç”± LeaderElectionDriver æ¥æ‰§è¡Œçš„ã€‚ä¸»è¦ä½œç”¨æ˜¯æŠŠå½“å‰ leader çš„ä¿¡æ¯å†™å›åˆ° ZooKeeper çš„ connection_info èŠ‚ç‚¹ã€‚</p>\n<pre><code class=\"language-java\">public void publishLeaderInformation(String componentId, LeaderInformation leaderInformation) {\n    Preconditions.checkState(running.get());\n\n    if (!leaderLatch.hasLeadership()) {\n        return;\n    }\n\n    final String connectionInformationPath =\n            ZooKeeperUtils.generateConnectionInformationPath(componentId);\n\n    LOG.debug(\n            \"Write leader information {} for component '{}' to {}.\",\n            leaderInformation,\n            componentId,\n            ZooKeeperUtils.generateZookeeperPath(\n                    curatorFramework.getNamespace(), connectionInformationPath));\n\n    try {\n        ZooKeeperUtils.writeLeaderInformationToZooKeeper(\n                leaderInformation,\n                curatorFramework,\n                leaderLatch::hasLeadership,\n                connectionInformationPath);\n    } catch (Exception e) {\n        leaderElectionListener.onError(e);\n    }\n}\n</code></pre>\n<h4 id=\"æœåŠ¡å‘ç°-1\">æœåŠ¡å‘ç°</h4>\n<p>æ¢³ç†å®Œé€‰ä¸¾æœåŠ¡çš„æºç åï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹æœåŠ¡å‘ç°çš„è¿‡ç¨‹ã€‚æˆ‘ä»¬ä»¥ TaskManager è·å– JobManager çš„ leader ä¸ºä¾‹ã€‚</p>\n<p><img alt=\"ZKLeaderRetrieval\" class=\"lazyload\" /></p>\n<p>å½“æˆ‘ä»¬å¾€ TaskManager æ·»åŠ ä»»åŠ¡æ—¶ï¼Œä¼šè°ƒç”¨ JobLeaderService çš„ addJob æ–¹æ³•ã€‚è¿™é‡Œä¼šå…ˆè·å– LeaderRetrievalï¼Œç„¶åè°ƒç”¨ start æ–¹æ³•æ³¨å†Œ LeaderRetrievalListener ç›‘å¬ï¼Œå¹¶åˆ›å»º LeaderRetrievalDriverã€‚åœ¨ LeaderRetrievalDriver ä¸­ä¸»è¦æ˜¯å‘ ZooKeeper æ³¨å†Œ connection_info èŠ‚ç‚¹çš„å˜æ›´ã€‚</p>\n<p>å¦‚æœå‘ç”Ÿå˜æ›´ï¼ŒZooKeeper ä¼šå›è°ƒ <code>LeaderRetrievalDriver.retrieveLeaderInformationFromZooKeeper</code> æ–¹æ³•ã€‚æˆ‘ä»¬ä» ZooKeeper è·å–åˆ° leader çš„åœ°å€å’Œ sessionId åï¼Œå°±å›è°ƒ <code>LeaderRetrievalService.notifyLeaderAddress</code> æ–¹æ³•ã€‚æœ€ç»ˆè°ƒç”¨åˆ° JobLeaderService çš„ notifyLeaderAddress æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¸­å°±æ˜¯æ–­å¼€ä¸æ—§ leader çš„è¿æ¥ï¼Œå¢åŠ ä¸æ–° leader çš„è¿æ¥ã€‚</p>\n<h4 id=\"ä¿¡æ¯ä¿å­˜-1\">ä¿¡æ¯ä¿å­˜</h4>\n<p>æœ€åæˆ‘ä»¬å†æ¥çœ‹ä¿¡æ¯ä¿å­˜ç›¸å…³çš„æºç ã€‚åœ¨ JobManager å®Œæˆä¸€æ¬¡ Checkpoint æ—¶ï¼Œä¼šæ‰§è¡Œ <code>CheckpointCoordinator.completePendingCheckpoint</code> æ–¹æ³•ï¼Œè·Ÿéšè°ƒç”¨é“¾è·¯å¯ä»¥æ‰¾åˆ° <code>ZooKeeperStateHandleStore.addAndLock</code> æ–¹æ³•ï¼Œè¿™é‡Œä¼šæŠŠçŠ¶æ€å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œç„¶åæŠŠæ–‡ä»¶è·¯å¾„ä¿å­˜åœ¨ ZooKeeper ä¸­ã€‚</p>\n<pre><code class=\"language-java\">public RetrievableStateHandle&lt;T&gt; addAndLock(String pathInZooKeeper, T state)\n        throws PossibleInconsistentStateException, Exception {\n    checkNotNull(pathInZooKeeper, \"Path in ZooKeeper\");\n    checkNotNull(state, \"State\");\n    final String path = normalizePath(pathInZooKeeper);\n    final Optional&lt;Stat&gt; maybeStat = getStat(path);\n\n    if (maybeStat.isPresent()) {\n        if (isNotMarkedForDeletion(maybeStat.get())) {\n            throw new AlreadyExistException(\n                    String.format(\"ZooKeeper node %s already exists.\", path));\n        }\n\n        Preconditions.checkState(\n                releaseAndTryRemove(path),\n                \"The state is marked for deletion and, therefore, should be deletable.\");\n    }\n\n    final RetrievableStateHandle&lt;T&gt; storeHandle = storage.store(state);\n    final byte[] serializedStoreHandle = serializeOrDiscard(storeHandle);\n    try {\n        writeStoreHandleTransactionally(path, serializedStoreHandle);\n        return storeHandle;\n    } catch (KeeperException.NodeExistsException e) {\n        // Transactions are not idempotent in the curator version we're currently using, so it\n        // is actually possible that we've re-tried a transaction that has already succeeded.\n        // We've ensured that the node hasn't been present prior executing the transaction, so\n        // we can assume that this is a result of the retry mechanism.\n        return storeHandle;\n    } catch (Exception e) {\n        if (indicatesPossiblyInconsistentState(e)) {\n            throw new PossibleInconsistentStateException(e);\n        }\n        // In case of any other failure, discard the state and rethrow the exception.\n        storeHandle.discardState();\n        throw e;\n    }\n}\n</code></pre>\n<p>è‡³æ­¤ï¼ŒåŸºäº ZooKeeper çš„ HA é€»è¾‘æˆ‘ä»¬å°±æ¢³ç†å®Œäº†ã€‚ä» 1.12 ç‰ˆæœ¬å¼€å§‹ï¼ŒFlink è¿˜æ”¯æŒäº† Kubernetes é«˜å¯ç”¨ï¼Œä¸‹é¢æˆ‘ä»¬å†æ¥ä¸€ä¸‹å®ƒæ˜¯å¦‚ä½•å®ç°çš„ã€‚</p>\n<h3 id=\"åŸºäº-kubernetes-çš„-ha\">åŸºäº Kubernetes çš„ HA</h3>\n<h4 id=\"é€‰ä¸¾æœåŠ¡-2\">é€‰ä¸¾æœåŠ¡</h4>\n<p>é€šè¿‡å‰é¢çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å·²ç»äº†è§£åˆ°ï¼Œé€‰ä¸¾çš„ä¸»è¦é€»è¾‘æ˜¯åœ¨ LeaderElectionDriver ä¸­ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬ç›´æ¥æ¥çœ‹ KubernetesLeaderElectionDriver çš„é€»è¾‘å³å¯ã€‚åˆ›å»º KubernetesLeaderElectionDriver æ—¶ï¼Œåˆ›å»ºå¹¶å¯åŠ¨äº† KubernetesLeaderElectorã€‚è¿™ä¸ªç±»ä¼¼äº ZooKeeper é€»è¾‘ä¸­ LeaderLatchï¼Œä¼šè·Ÿ Kubernetes åº•å±‚çš„é€‰ä¸¾é€»è¾‘äº¤äº’ï¼ŒåŒæ—¶æ³¨å†Œç›‘å¬ã€‚</p>\n<pre><code class=\"language-java\">public KubernetesLeaderElector(\n        NamespacedKubernetesClient kubernetesClient,\n        KubernetesLeaderElectionConfiguration leaderConfig,\n        LeaderCallbackHandler leaderCallbackHandler,\n        ExecutorService executorService) {\n    this.kubernetesClient = kubernetesClient;\n    this.leaderElectionConfig =\n            new LeaderElectionConfigBuilder()\n                    .withName(leaderConfig.getConfigMapName())\n                    .withLeaseDuration(leaderConfig.getLeaseDuration())\n                    .withLock(\n                            new ConfigMapLock(\n                                    new ObjectMetaBuilder()\n                                            .withNamespace(kubernetesClient.getNamespace())\n                                            .withName(leaderConfig.getConfigMapName())\n                                            // Labels will be used to clean up the ha related\n                                            // ConfigMaps.\n                                            .withLabels(\n                                                    KubernetesUtils.getConfigMapLabels(\n                                                            leaderConfig.getClusterId()))\n                                            .build(),\n                                    leaderConfig.getLockIdentity()))\n                    .withRenewDeadline(leaderConfig.getRenewDeadline())\n                    .withRetryPeriod(leaderConfig.getRetryPeriod())\n                    .withReleaseOnCancel(true)\n                    .withLeaderCallbacks(\n                            new LeaderCallbacks(\n                                    leaderCallbackHandler::isLeader,\n                                    leaderCallbackHandler::notLeader,\n                                    newLeader -&gt;\n                                            LOG.info(\n                                                    \"New leader elected {} for {}.\",\n                                                    newLeader,\n                                                    leaderConfig.getConfigMapName())))\n                    .build();\n    this.executorService = executorService;\n\n    LOG.info(\n            \"Create KubernetesLeaderElector on lock {}.\",\n            leaderElectionConfig.getLock().describe());\n}\n</code></pre>\n<p>é€‰ä¸¾æˆåŠŸåï¼Œä¼šå›è°ƒ <code>LeaderElectionListener.onGrantLeadership</code> æ–¹æ³•ã€‚åç»­çš„è°ƒç”¨é“¾è·¯è¿˜æ˜¯ä¼šè°ƒç”¨åˆ° <code>KubernetesLeaderElectionDriver.publishLeaderInformation</code> æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯æŠŠ leader ä¿¡æ¯å†™åˆ° Kubernetes çš„ configMap ä¸­ã€‚</p>\n<pre><code class=\"language-java\">public void publishLeaderInformation(String componentId, LeaderInformation leaderInformation) {\n    Preconditions.checkState(running.get());\n\n    try {\n        kubeClient\n                .checkAndUpdateConfigMap(\n                        configMapName,\n                        updateConfigMapWithLeaderInformation(componentId, leaderInformation))\n                .get();\n    } catch (InterruptedException | ExecutionException e) {\n        leaderElectionListener.onError(e);\n    }\n\n    LOG.debug(\n            \"Successfully wrote leader information {} for leader {} into the config map {}.\",\n            leaderInformation,\n            componentId,\n            configMapName);\n}\n</code></pre>\n<h4 id=\"æœåŠ¡å‘ç°-2\">æœåŠ¡å‘ç°</h4>\n<p>æœåŠ¡å‘ç°çš„é€»è¾‘åœ¨ KubernetesLeaderRetrievalDriver ç±»ä¸­ï¼Œåœ¨åˆ›å»ºæ—¶ï¼Œä¼šå°†å†…éƒ¨ç±» ConfigMapCallbackHandlerImpl æ³¨å†Œä¸ºç›‘å¬å›è°ƒç±»ã€‚</p>\n<p>å½“ configMap æœ‰æ–°å¢æˆ–å˜æ›´åï¼Œä¼šå›è°ƒ <code>LeaderRetrievalService.notifyLeaderAddress</code> æ–¹æ³•ã€‚</p>\n<pre><code class=\"language-java\">private class ConfigMapCallbackHandlerImpl\n        implements FlinkKubeClient.WatchCallbackHandler&lt;KubernetesConfigMap&gt; {\n\n    @Override\n    public void onAdded(List&lt;KubernetesConfigMap&gt; configMaps) {\n        // The ConfigMap is created by KubernetesLeaderElectionDriver with\n        // empty data. We don't really need to process anything unless the retriever was started\n        // after the leader election has already succeeded.\n        final KubernetesConfigMap configMap = getOnlyConfigMap(configMaps, configMapName);\n        final LeaderInformation leaderInformation = leaderInformationExtractor.apply(configMap);\n        if (!leaderInformation.isEmpty()) {\n            leaderRetrievalEventHandler.notifyLeaderAddress(leaderInformation);\n        }\n    }\n\n    @Override\n    public void onModified(List&lt;KubernetesConfigMap&gt; configMaps) {\n        final KubernetesConfigMap configMap = getOnlyConfigMap(configMaps, configMapName);\n        leaderRetrievalEventHandler.notifyLeaderAddress(\n                leaderInformationExtractor.apply(configMap));\n    }\n    ...\n}\n</code></pre>\n<h4 id=\"ä¿¡æ¯ä¿å­˜-2\">ä¿¡æ¯ä¿å­˜</h4>\n<p>ä¿¡æ¯ä¿å­˜çš„é€»è¾‘å’Œ ZooKeeper ä¹Ÿéå¸¸ç±»ä¼¼ã€‚å³å…ˆæŠŠ state ä¿å­˜åœ¨æ–‡ä»¶ç³»ç»Ÿï¼Œç„¶åæŠŠå­˜å‚¨è·¯å¾„å†™åˆ° Kubernetes å†™åˆ° configMap ä¸­ã€‚å…·ä½“å¯ä»¥çœ‹ <code>KubernetesStateHandleStore.addAndLock</code> æ–¹æ³•ã€‚</p>\n<h3 id=\"æ€»ç»“\">æ€»ç»“</h3>\n<p>æœ¬æ–‡æˆ‘ä»¬ä¸€èµ·æ¢³ç†äº† Flink ä¸­ JobManager çš„ HA æœºåˆ¶ç›¸å…³æºç ã€‚ç›®å‰ Flink æ”¯æŒ ZooKeeper å’Œ Kubernetes ä¸¤ç§å®ç°ã€‚åœ¨æ¢³ç†è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä»¥ JobManager ä¸ºä¾‹ï¼Œå…¶ä»–å‡ ä¸ªç”¨åˆ°é«˜å¯ç”¨çš„æœåŠ¡çš„é€‰ä¸¾é€»è¾‘ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚</p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-14 23:45</span>&nbsp;\n<a href=\"https://www.cnblogs.com/Jackeyzhe\">Jackeyzhe</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">15</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "å°ç™½å­¦AIå¼€å‘01ï¼šåˆ›å»ºç¬¬ä¸€ä¸ªç¤ºä¾‹Agent",
      "link": "https://www.cnblogs.com/jyzhao/p/19484508/xiao-bai-xueai-kai-fa01-chuang-jian-di-yi-ge-shi-l",
      "published": "",
      "description": "<a name=\"top\"></a>\n    <h2><a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/jyzhao/p/19484508/xiao-bai-xueai-kai-fa01-chuang-jian-di-yi-ge-shi-l\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-14 23:43\">\n    <span>å°ç™½å­¦AIå¼€å‘01ï¼šåˆ›å»ºç¬¬ä¸€ä¸ªç¤ºä¾‹Agent</span>\n    \n\n</a>\n</h2>\n    <small>\n<span id=\"post-date\">2026-01-14 23:43</span>&nbsp;\n<a href=\"https://www.cnblogs.com/jyzhao\">AlfredZhao</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">20</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</small>\n    <div class=\"entry\">\n        <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<p>åœ¨ LangChain å¼€å‘ä¸­ï¼Œæˆ‘ä»¬çš„æ ¸å¿ƒå·¥ä½œæ˜¯å†™ Promptï¼ˆæç¤ºè¯ï¼‰ã€‚</p>\n<p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜éœ€è¦äº†è§£ä¸‹pythonåŸºç¡€ï¼Œç®€å•äº†è§£å³å¯ï¼Œä¸éœ€è¦ç³»ç»Ÿå­¦ä¹ ï¼Œè¿™å°±æ˜¯AIæ—¶ä»£å¯¹æŠ€æœ¯çˆ±å¥½è€…çš„çº¢åˆ©ã€‚</p>\n<h2 id=\"01--æ„å»ºç‹¬ç«‹çš„pythonç¯å¢ƒ\">01 | æ„å»ºç‹¬ç«‹çš„pythonç¯å¢ƒ</h2>\n<p>ä½¿ç”¨minicondaæ„å»ºç‹¬ç«‹çš„pythonç¯å¢ƒã€‚</p>\n<p>å®˜æ–¹ç½‘ç«™ï¼š<a href=\"https://www.anaconda.com/\" rel=\"noopener nofollow\" target=\"_blank\">https://www.anaconda.com/</a></p>\n<p>é€‰æ‹©é€‚åˆä½ çš„ï¼Œæˆ‘è¿™é‡Œç›´æ¥é€‰æ‹©å›¾å½¢åŒ–å®‰è£…çš„Minicondaï¼š</p>\n<p><img alt=\"\" src=\"https://img2024.cnblogs.com/blog/635610/202601/635610-20260114224646258-840865368.jpg\" /></p>\n<p>ä¸‹è½½åå®‰è£…ï¼š</p>\n<p><img alt=\"\" src=\"https://img2024.cnblogs.com/blog/635610/202601/635610-20260114224646142-163182582.jpg\" /></p>\n<p>å…³é—­å¹¶é‡æ–°æ‰“å¼€ç»ˆç«¯ã€‚æ­¤æ—¶ä½ ä¼šçœ‹åˆ°å‘½ä»¤è¡Œå‰é¢å¤šäº†ä¸ª (base)ï¼Œè¿™è¯´æ˜ Conda å·²ç»æ¥ç®¡äº†ç¯å¢ƒã€‚</p>\n<p>ç„¶ååˆ›å»º Python 3.12 ä¸“å±å­¦ä¹ ç¯å¢ƒï¼š</p>\n<pre><code class=\"language-BASH\"># åˆ›å»ºç¯å¢ƒå¹¶æŒ‡å®š Python ç‰ˆæœ¬\nconda create -n lc python=3.12 -y\n\n# æ¿€æ´»ç¯å¢ƒ\nconda activate lc\n</code></pre>\n<p>Tipsï¼šå¦‚æœåˆ›å»ºç¯å¢ƒï¼Œé‡åˆ°è®©åŒæ„æœåŠ¡/æ¡æ¬¾ä¹‹ç±»ï¼Œç›´æ¥æŒ‰æç¤ºå‘½ä»¤æ‰§è¡ŒåŒæ„å³å¯ã€‚</p>\n<p>åé¢æµ‹è¯•ä¸åŒåŠŸèƒ½çš„pythonç¨‹åºè‚¯å®šå…ä¸äº†å¼•ç”¨å„ç§ç±»å‹çš„åŒ…ï¼Œæˆ‘ä»¬ç»Ÿä¸€æ”¾åˆ° requirements.txt ä¸­ï¼Œåç»­æ–°ç¯å¢ƒä¹Ÿå¯ä»¥ç›´æ¥ä¸€é”®å®‰è£…éœ€è¦å¼•å…¥çš„ç›¸å…³åŒ…ã€‚</p>\n<pre><code class=\"language-BASH\">pip install -r requirements.txt\n</code></pre>\n<p>å®šæœŸç»´æŠ¤requirements.txtæ–‡ä»¶ï¼š</p>\n<pre><code class=\"language-BASH\">langchain\nlangchain-openai\npython-dotenv\n</code></pre>\n<h2 id=\"02--åˆ›å»ºç¬¬ä¸€ä¸ªç¤ºä¾‹agent\">02 | åˆ›å»ºç¬¬ä¸€ä¸ªç¤ºä¾‹Agent</h2>\n<p>è¿™é‡Œä»¿ç…§LangChainå®˜æ–¹æ–‡æ¡£ï¼Œæ„å»ºä¸€ä¸ªç®€å•çš„Agentã€‚</p>\n<ul>\n<li><a href=\"https://docs.langchain.com/oss/python/langchain/quickstart\" rel=\"noopener nofollow\" target=\"_blank\">https://docs.langchain.com/oss/python/langchain/quickstart</a></li>\n</ul>\n<p>å› ä¸ºç¬”è€…æš‚æ—¶æ²¡æœ‰Claudeæ¨¡å‹å¯ç”¨ï¼Œæ‰€ä»¥æ›¿æ¢ä¸ºå›½å†…çš„æ¨¡å‹ï¼Œåœ¨æˆ‘ä»¬å­¦ä¹ æµ‹è¯•é˜¶æ®µï¼ŒåŸºæœ¬æ˜¯æ²¡å•¥å½±å“çš„ã€‚</p>\n<p>vi basic.py</p>\n<pre><code class=\"language-python\">import os\nfrom dotenv import load_dotenv\nfrom langchain.agents import create_agent\nfrom langchain_openai import ChatOpenAI\nfrom langchain.tools import tool\n\n# åŠ è½½ .env æ–‡ä»¶ä¸­çš„ SILICONFLOW_API_KEY\nload_dotenv()\n\n# 1. å®šä¹‰å·¥å…·ï¼šå¿…é¡»è¦å†™æ¸…æ™°çš„ Docstringï¼ˆå‡½æ•°æ³¨é‡Šï¼‰\n@tool\ndef get_weather(city: str) -&gt; str:\n    \"\"\"è·å–æŒ‡å®šåŸå¸‚çš„å®æ—¶å¤©æ°”æƒ…å†µã€‚\"\"\"\n    return f\"{city} çš„å¤©æ°”æ€»æ˜¯é˜´é›¨è¿è¿ï¼\"\n\n# 2. åˆå§‹åŒ– SiliconFlow æ¨¡å‹\nllm = ChatOpenAI(\n    model=\"deepseek-ai/DeepSeek-V3\", \n    api_key=os.getenv(\"SILICONFLOW_API_KEY\"),\n    base_url=\"https://api.siliconflow.cn/v1\",\n    temperature=0.1\n)\n\n# 3. åˆ›å»º Agent\nagent = create_agent(\n    model=llm,\n    tools=[get_weather],\n    system_prompt=\"ä½ æ˜¯ä¸€ä¸ªä¹äºåŠ©äººçš„å¤©æ°”åŠ©æ‰‹ã€‚\"\n)\n\n# 4. è¿è¡Œ\nif __name__ == \"__main__\":\n    response = agent.invoke(\n        {\"messages\": [{\"role\": \"user\", \"content\": \"åŒ—äº¬å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ\"}]}\n    )\n    # æ‰“å°æœ€åä¸€æ¡æ¶ˆæ¯ï¼ˆAI çš„å›ç­”ï¼‰\n    print(response[\"messages\"][-1].content)\n</code></pre>\n<h2 id=\"03--å¢å¼ºè¿™ä¸ªç¤ºä¾‹agent\">03 | å¢å¼ºè¿™ä¸ªç¤ºä¾‹Agent</h2>\n<p>æ±‰åŒ–å¹¶ç¨å¾®æ”¹é€ ä¸‹å®˜æ–¹çš„ç¤ºä¾‹ï¼Œä½¿å…¶é€‚ç”¨äºæˆ‘ä»¬çš„æµ‹è¯•ç¯å¢ƒï¼š</p>\n<p>vi enhance.py</p>\n<pre><code class=\"language-PYTHON\">import os\nfrom dataclasses import dataclass\nfrom dotenv import load_dotenv\n\nfrom langchain_openai import ChatOpenAI\nfrom langchain.agents import create_agent\nfrom langchain.tools import tool, ToolRuntime\nfrom langgraph.checkpoint.memory import InMemorySaver\nfrom langchain.agents.structured_output import ToolStrategy\n\nload_dotenv()\n\n# 1. å®šä¹‰ç³»ç»Ÿæç¤ºè¯ï¼ˆè¦æ±‚ AI åšä¸ªâ€œè°éŸ³æ¢—â€ä¸“å®¶ï¼‰\nSYSTEM_PROMPT = \"\"\"ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„èµ„æ·±å¤©æ°”é¢„æŠ¥å‘˜ï¼Œè¯´è¯æå…¶å¹½é»˜ï¼Œç‰¹åˆ«å–œæ¬¢è®²â€œè°éŸ³æ¢—â€ã€‚\n\nä½ æœ‰æƒä½¿ç”¨ä»¥ä¸‹ä¸¤ä¸ªå·¥å…·ï¼š\n- get_weather_for_location: è·å–ç‰¹å®šåŸå¸‚çš„å¤©æ°”ã€‚\n- get_user_location: è·å–å½“å‰ç”¨æˆ·çš„æ‰€åœ¨åœ°ã€‚\n\nå¦‚æœç”¨æˆ·è¯¢é—®å¤©æ°”ï¼Œè¯·åŠ¡å¿…ç¡®è®¤åœ°ç‚¹ã€‚å¦‚æœç”¨æˆ·è¯´çš„æ˜¯â€œæˆ‘è¿™å„¿â€æˆ–â€œæˆ‘è¿™é‡Œâ€ï¼Œè¯·è°ƒç”¨ get_user_location è·å–ä»–ä»¬çš„ä½ç½®ã€‚\"\"\"\n\n# 2. å®šä¹‰ä¸Šä¸‹æ–‡ç»“æ„ï¼ˆå­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼‰\n@dataclass\nclass Context:\n    \"\"\"è‡ªå®šä¹‰è¿è¡Œæ—¶ä¸Šä¸‹æ–‡ã€‚\"\"\"\n    user_id: str\n\n# 3. å®šä¹‰å·¥å…·\n@tool\ndef get_weather_for_location(city: str) -&gt; str:\n    \"\"\"è·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”æƒ…å†µã€‚\"\"\"\n    return f\"{city} çš„å¤©æ°”æ€»æ˜¯é˜³å…‰ç¿çƒ‚ï¼\"\n\n@tool\ndef get_user_location(runtime: ToolRuntime[Context]) -&gt; str:\n    \"\"\"æ ¹æ®ç”¨æˆ· ID è·å–å…¶åœ°ç†ä½ç½®ã€‚\"\"\"\n    user_id = runtime.context.user_id\n    # æ¨¡æ‹Ÿæ•°æ®åº“ï¼šç”¨æˆ· 1 åœ¨åŒ—äº¬ï¼Œå…¶ä»–åœ¨ç æµ·\n    return \"åŒ—äº¬\" if user_id == \"1\" else \"ç æµ·\"\n\n# 4. é…ç½®ä½ çš„æ¨¡å‹ (SiliconFlow)\nmodel = ChatOpenAI(\n    model=\"deepseek-ai/DeepSeek-V3\",\n    api_key=os.getenv(\"SILICONFLOW_API_KEY\"),\n    base_url=\"https://api.siliconflow.cn/v1\",\n    temperature=0.7  # ç¨å¾®æé«˜éšæœºæ€§ï¼Œè®©è°éŸ³æ¢—æ›´æœ‰åˆ›æ„\n)\n\n# 5. å®šä¹‰å“åº”æ ¼å¼ï¼ˆæ±‰åŒ–å­—æ®µæè¿°ï¼Œè®© AI æ˜ç™½å¡«ä»€ä¹ˆï¼‰\n@dataclass\nclass ResponseFormat:\n    \"\"\"Agent çš„ç»“æ„åŒ–å›å¤æ ¼å¼ã€‚\"\"\"\n    # å¹½é»˜çš„è°éŸ³æ¢—å›å¤\n    punny_response: str\n    # ä»»ä½•å…³äºå¤©æ°”çš„æœ‰è¶£ä¿¡æ¯ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰\n    weather_conditions: str | None = None\n\n# 6. è®¾ç½®è®°å¿†å­˜å‚¨\ncheckpointer = InMemorySaver()\n\n# 7. åˆ›å»º Agent\nagent = create_agent(\n    model=model,\n    system_prompt=SYSTEM_PROMPT,\n    tools=[get_user_location, get_weather_for_location],\n    context_schema=Context,\n    response_format=ToolStrategy(ResponseFormat),\n    checkpointer=checkpointer\n)\n\n# --- è¿è¡Œæµ‹è¯• ---\n\n# è®¾ç½®ä¼šè¯ ID\nconfig = {\"configurable\": {\"thread_id\": \"test_user_001\"}}\n\n# ç¬¬ä¸€æ¬¡æé—®\nprint(\"--- ç¬¬ä¸€æ¬¡å¯¹è¯ ---\")\nresponse = agent.invoke(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"å¤–é¢å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ\"}]},\n    config=config,\n    context=Context(user_id=\"1\")\n)\n\n# è®¿é—®ç»“æ„åŒ–ç»“æœ\nres = response['structured_response']\nprint(f\"AI: {res.punny_response}\")\nprint(f\"è¯¦æƒ…: {res.weather_conditions}\")\n\nprint(\"\\n--- ç¬¬äºŒæ¬¡å¯¹è¯ï¼ˆæµ‹è¯•è®°å¿†ï¼‰ ---\")\n# ç¬¬äºŒæ¬¡æé—®\nresponse = agent.invoke(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"è°¢è°¢ä½ ï¼æˆ‘åœ¨å“ªé‡Œï¼Ÿ\"}]},\n    config=config,\n    context=Context(user_id=\"1\")\n)\n\nres = response['structured_response']\nprint(f\"AI: {res.punny_response}\")\n</code></pre>\n<p>è¿™æ®µç¤ºä¾‹ä»£ç çš„æ ¸å¿ƒé€»è¾‘æ˜¯ï¼š</p>\n<p><strong>ç¬¬ä¸€æ¬¡å¯¹è¯ï¼š</strong></p>\n<p>ç”¨æˆ·é—®ï¼šâ€œå¤–é¢å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿâ€ï¼ˆæ²¡è¯´åœ°ç‚¹ï¼‰ã€‚<br />\nAI æ€è€ƒï¼šç³»ç»Ÿæç¤ºè¯å‘Šè¯‰æˆ‘ï¼Œå¦‚æœåœ°ç‚¹ä¸æ˜ï¼Œå…ˆå»æŸ¥ç”¨æˆ·åœ¨å“ªã€‚<br />\nåŠ¨ä½œï¼šAI è°ƒç”¨ get_user_location -&gt; å¾—åˆ°â€œåŒ—äº¬â€ -&gt; è°ƒç”¨ get_weather_for_location -&gt; å¾—åˆ°å¤©æ°”ã€‚<br />\nå›å¤ï¼šæ ¹æ® ResponseFormat åå‡ºä¸€ä¸ªè°éŸ³æ¢—ã€‚</p>\n<p><strong>ç¬¬äºŒæ¬¡å¯¹è¯ï¼š</strong></p>\n<p>ç”¨æˆ·é—®ï¼šâ€œè°¢è°¢ä½ ï¼æˆ‘åœ¨å“ªé‡Œï¼Ÿâ€<br />\nAI æ€è€ƒï¼šç”±äºæœ‰ thread_id å’Œ checkpointerï¼ŒAI è®°å¾—ä¸Šä¸€æ¬¡æŸ¥è¯¢çš„ç»“æœã€‚<br />\nåŠ¨ä½œï¼šå®ƒä¸éœ€è¦å†æ¬¡æŸ¥å·¥å…·ï¼Œç›´æ¥ä»è®°å¿†é‡Œæå–ä¿¡æ¯å¹¶å›å¤ã€‚</p>\n<p>ç„¶åæ‰‹å·¥å°†ä»£ç ä¸­çš„ user_id æ”¹ä¸º2ï¼Œå†æ¬¡è¿è¡Œï¼Œå°±ä¼šæ ¹æ®å·¥å…· <code>get_user_location</code> ä¸­çš„ç¤ºä¾‹é€»è¾‘ï¼Œå¾—åˆ°åœ°ç‚¹ä¸ºâ€ç æµ·â€œï¼Œä¸¤æ¬¡æ‰§è¡Œçš„æ•ˆæœå‚è€ƒå¦‚ä¸‹ï¼š</p>\n<p><img alt=\"\" src=\"https://img2024.cnblogs.com/blog/635610/202601/635610-20260114224646132-69223909.jpg\" /></p>\n<p>è¯¥æ®µç¤ºä¾‹ä»£ç è™½ç„¶ç®€å•ï¼Œä½†å…¶å®å·²ç»èƒ½å±•ç°å‡ºä¸€ä¸ªä¼ä¸šçº§ AI æ™ºèƒ½ä½“ï¼ˆAgentï¼‰çš„ç¼©å½±ã€‚å®ƒæ¶µç›–äº†ç°ä»£ AI å¼€å‘ä¸­æœ€æ ¸å¿ƒçš„ä¸‰ä¸ªæ”¯æŸ±ï¼šå·¥å…·è°ƒç”¨ï¼ˆTool Useï¼‰ã€ä¸Šä¸‹æ–‡è®°å¿†ï¼ˆMemoryï¼‰ã€ä»¥åŠç»“æ„åŒ–è¾“å‡ºï¼ˆStructured Outputï¼‰ã€‚</p>\n\n</div>\n<div id=\"MySignature\">\n    <a href=\"https://www.cnblogs.com/jyzhao/\" target=\"_blank\">AlfredZhao</a>Â©ç‰ˆæƒæ‰€æœ‰ã€Œä»Oracleèµ·èˆªï¼Œé¢†ç•¥ç²¾å½©çš„ITæŠ€æœ¯ã€‚ã€<br />\nè½¬è½½è¯·æ³¨æ˜åŸæ–‡é“¾æ¥ï¼š<a href=\"https://www.cnblogs.com/jyzhao/p/19484508/xiao-bai-xueai-kai-fa01-chuang-jian-di-yi-ge-shi-l\" target=\"_blank\">https://www.cnblogs.com/jyzhao/p/19484508/xiao-bai-xueai-kai-fa01-chuang-jian-di-yi-ge-shi-l</a>\n<hr />\n<div style=\"text-align: center; margin-top: 30px;\">\n  <p style=\"font-size: 14px; color: #555;\">\n    ğŸ‘‹ æ„Ÿè°¢é˜…è¯»ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å· <b>ã€Œèµµé–å®‡ã€</b>\n  </p>\n  <img src=\"https://images.cnblogs.com/cnblogs_com/jyzhao/824234/o_250208075013_qrcode-zjy.jpg\" style=\"border: 1px solid #ddd; border-radius: 8px;\" width=\"160\" />\n</div>\n</div>\n<div class=\"clear\"></div>\n\n        <div class=\"clear\"></div>\n        \n</div>\n    <ul class=\"postmetadata\">\n        \n    </ul>"
    },
    {
      "title": "Claude Code æœ€ä½³å®è·µçš„ 8 æ¡é»„é‡‘æ³•åˆ™",
      "link": "https://www.cnblogs.com/didispace/p/19484090",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/didispace/p/19484090\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-14 19:53\">\n    <span>Claude Code æœ€ä½³å®è·µçš„ 8 æ¡é»„é‡‘æ³•åˆ™</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<p>ä¸ºä»€ä¹ˆåŒæ ·æ˜¯è°ƒç”¨ Claudeï¼Œæœ‰çš„äººèƒ½å†™å‡ºå·¥ä¸šçº§ä»£ç ï¼Œè€Œæœ‰çš„äººåªæ˜¯åœ¨ä¸æ–­å †ç§¯â€œæŠ€æœ¯å€ºâ€ï¼Ÿ ä»Šå¤©åˆ†äº«ä¸€ä½æ‹¥æœ‰ 7 å¹´ Amazonã€Disney å¤§å‚ç»éªŒã€ç°ä»»åˆ›ä¸šå…¬å¸ CTO åˆ†äº«çš„å®æˆ˜æŒ‡å—ã€‚ä»–æŠŠ Claude Code å½“ä½œæ¯æ—¥ä¸»åŠ›å·¥å…·ï¼Œå¹¶æ€»ç»“å‡ºäº†ä¸€å¥—é«˜é˜¶ç©å®¶æ‰‹å†Œã€‚ä»â€œå…ˆæ€è€ƒåæ•²å­—â€çš„æ¶æ„é“å¾‹ï¼Œåˆ°è®© AI ç§’æ‡‚ä½ çš„ CLAUDE.md æ·±åº¦é…ç½®ï¼Œå…¨æ˜¯é¿å‘æŒ‡å—ã€‚å¦‚æœä½ æƒ³è®© AI çœŸæ­£æˆä¸ºä½ çš„ç”Ÿäº§åŠ›é£è½®ï¼Œè¿™ç¯‡æ–‡ç« ç»å¯¹å€¼å¾—æ”¶è—åå¤è¯»ï¼</p>\n<p><img alt=\"f02adbeb1a8c005df0134224ed8c0d1b.png\" class=\"lazyload\" /></p>\n<p>ä¸‹é¢æ˜¯å¯¹è¿™ç¯‡æ–‡ç« çš„æ€»ç»“è§£è¯»ï¼Œå¦‚æœå¯¹åŸæ–‡æ„Ÿå…´è¶£ä¹Ÿå¯ä»¥æˆ³è¿™é‡ŒæŸ¥çœ‹ï¼š<a href=\"https://x.com/eyad_khrais/status/2010076957938188661\" rel=\"noopener nofollow\" target=\"_blank\">ã€ŠThe complete claude code tutorial ã€‹</a></p>\n<h2 id=\"æ³•åˆ™ä¸€å…ˆæ€è€ƒå†è¾“å…¥è®¡åˆ’æ¨¡å¼æ˜¯ä½ æœ€å¼ºå¤§çš„æ­¦å™¨\">æ³•åˆ™ä¸€ï¼šå…ˆæ€è€ƒï¼Œå†è¾“å…¥ï¼šè®¡åˆ’æ¨¡å¼æ˜¯ä½ æœ€å¼ºå¤§çš„æ­¦å™¨ã€‚</h2>\n<p>å¤§å¤šæ•°äººè®¤ä¸ºä½¿ç”¨AIå·¥å…·çš„ç¬¬ä¸€æ­¥å°±æ˜¯ç›´æ¥å¼€å§‹è¾“å…¥æç¤ºè¯ã€‚è¿™æ˜¯ä½ èƒ½çŠ¯ä¸‹çš„æœ€å¤§é”™è¯¯ä¹‹ä¸€ã€‚çœŸæ­£è‡³å…³é‡è¦ä¸”å¿…é¡»å…ˆåšçš„ç¬¬ä¸€æ­¥æ˜¯â€”â€”æ€è€ƒå’Œè®¡åˆ’ã€‚</p>\n<p>æˆ‘100%çš„ç»éªŒè¡¨æ˜ï¼Œä½¿ç”¨â€œè®¡åˆ’æ¨¡å¼â€ï¼ˆè¿æŒ‰ä¸¤æ¬¡ Shift+Tab é”®è¿›å…¥ï¼‰å¾—åˆ°çš„è¾“å‡ºï¼Œè¿œèƒœäºç›´æ¥æ»”æ»”ä¸ç»åœ°è¾“å…¥æƒ³æ³•ã€‚è¿™ç§å·®è·æ˜¯å‹å€’æ€§çš„ã€‚</p>\n<p>å½“ç„¶ï¼Œå¯¹äºä¸€äº›ç»éªŒä¸è¶³çš„å·¥ç¨‹å¸ˆæ¥è¯´ï¼Œè¿™å¯èƒ½è¯´èµ·æ¥å®¹æ˜“åšèµ·æ¥éš¾ã€‚å¯¹æ­¤ï¼Œæˆ‘æœ‰ä¸¤æ¡å»ºè®®ï¼š</p>\n<ol>\n<li>å¼€å§‹å­¦ä¹ ã€‚ å³ä½¿æ¯æ¬¡åªå­¦ä¸€ç‚¹ï¼Œä¹Ÿå¿…é¡»å¼€å§‹ç§¯ç´¯ã€‚å¦‚æœä½ æ°¸è¿œä¸æŒæ¡è§„åˆ’èƒ½åŠ›ï¼Œä½ å°±æ˜¯åœ¨ç»™è‡ªå·±è®¾ç½®éšœç¢ã€‚</li>\n<li>ä¸AIæ·±åº¦äº¤æµã€‚ å’ŒClaudeè¿›è¡Œä¸€åœºæ·±å…¥çš„ã€åŒå‘çš„å¯¹è¯ã€‚è¯¦ç»†æè¿°ä½ æƒ³æ„å»ºä»€ä¹ˆï¼Œè¯¢é—®å®ƒåœ¨ç³»ç»Ÿè®¾è®¡ä¸Šæœ‰ä»€ä¹ˆä¸åŒçš„é€‰æ‹©ï¼Œæœ€ç»ˆå…±åŒç¡®å®šä¸€ä¸ªæ–¹æ¡ˆã€‚ä½ å’ŒAIåº”è¯¥äº’ç›¸æé—®ï¼Œè€Œä¸æ˜¯å•è¡Œé“ã€‚</li>\n</ol>\n<h2 id=\"æ³•åˆ™äºŒclaudemdä¸æ˜¯æ–‡æ¡£è€Œæ˜¯aiçš„å¤§è„‘\">æ³•åˆ™äºŒï¼šCLAUDE.mdä¸æ˜¯æ–‡æ¡£ï¼Œè€Œæ˜¯AIçš„å¤§è„‘ã€‚</h2>\n<p>CLAUDE.mdæ˜¯ä¸€ä¸ªæå…¶é‡è¦ä½†å¸¸è¢«è¯¯ç”¨çš„é…ç½®æ–‡ä»¶ã€‚åœ¨ä½ æ¯æ¬¡å¯åŠ¨ä¼šè¯æ—¶ï¼ŒClaudeéƒ½ä¼šé¦–å…ˆè¯»å–å®ƒã€‚å¤§å¤šæ•°äººè¦ä¹ˆå®Œå…¨å¿½ç•¥å®ƒï¼Œè¦ä¹ˆç”¨ä¸€äº›åƒåœ¾ä¿¡æ¯å¡«æ»¡å®ƒï¼Œç»“æœåè€Œè®©Claudeçš„è¡¨ç°æ›´ç³Ÿã€‚</p>\n<p>è¦å†™å¥½ä¸€ä¸ªCLAUDE.mdï¼Œè¯·éµå¾ªä»¥ä¸‹å››ä¸ªå…³é”®æ³•åˆ™ï¼š</p>\n<ul>\n<li>ä¿æŒç®€çŸ­ï¼š Claudeä¸€æ¬¡åªèƒ½å¯é åœ°éµå¾ªå¤§çº¦150-200æ¡æŒ‡ä»¤ï¼Œè€Œç³»ç»Ÿæç¤ºæœ¬èº«å·²ç»å ç”¨äº†å¤§çº¦50æ¡ã€‚ä½ çš„æ¯ä¸€æ¡æ–°æŒ‡ä»¤éƒ½åœ¨äº‰å¤ºå®ƒçš„æ³¨æ„åŠ›ã€‚å¦‚æœä½ çš„CLAUDE.mdå†™å¾—åƒæœ¬å°è¯´ï¼ŒClaudeå°±ä¼šå¼€å§‹éšæœºå¿½ç•¥æŸäº›å†…å®¹ã€‚</li>\n<li>ä¸“æ³¨äºé¡¹ç›®ç‰¹æ€§ï¼š ä¸è¦å‘Šè¯‰å®ƒä»€ä¹ˆæ˜¯â€œç»„ä»¶â€æ–‡ä»¶å¤¹ï¼Œå®ƒæ—©å°±çŸ¥é“äº†ã€‚ä½ åº”è¯¥å‘Šè¯‰å®ƒä½ é¡¹ç›®é‡Œé‚£äº›â€œå¥‡æ€ªâ€çš„ä¸œè¥¿ï¼Œæ¯”å¦‚ä½ ç‰¹æœ‰çš„bashå‘½ä»¤æˆ–å·¥ä½œæµç¨‹ã€‚</li>\n<li>è§£é‡Šâ€œä¸ºä»€ä¹ˆâ€ï¼Œè€Œä¸ä»…æ˜¯â€œåšä»€ä¹ˆâ€ï¼š å½“ä½ ç»™å‡ºæŒ‡ä»¤èƒŒåçš„åŸå› æ—¶ï¼ŒClaudeèƒ½æ›´å¥½åœ°ç†è§£æ„å›¾å¹¶åšå‡ºæ›´ä¼˜çš„åˆ¤æ–­ã€‚åªè¯´â€œä½¿ç”¨TypeScriptä¸¥æ ¼æ¨¡å¼â€æ˜¯å¯ä»¥çš„ï¼Œä½†è¯´â€œä½¿ç”¨TypeScriptä¸¥æ ¼æ¨¡å¼ï¼Œå› ä¸ºæˆ‘ä»¬æ›¾å› éšå¼anyç±»å‹å¯¼è‡´è¿‡ç”Ÿäº§ç¯å¢ƒçš„bugâ€æ•ˆæœä¼šå¥½å¾—å¤šã€‚</li>\n<li>æŒç»­æ›´æ–°ï¼š CLAUDE.mdåº”è¯¥æ˜¯ä¸€ä»½â€œæ´»æ–‡æ¡£â€ã€‚å½“ä½ å·¥ä½œæ—¶ï¼Œå¯ä»¥æŒ‰ # é”®å¿«é€Ÿå°†å½“å‰æŒ‡ä»¤æ·»åŠ åˆ°æ–‡ä»¶ä¸­ã€‚æ¯å½“ä½ å‘ç°è‡ªå·±ç¬¬äºŒæ¬¡çº æ­£ClaudeåŒä¸€ä¸ªé—®é¢˜æ—¶ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªæ˜ç¡®çš„ä¿¡å·ï¼šè¿™æ¡è§„åˆ™åº”è¯¥è¢«å†™å…¥CLAUDE.mdã€‚</li>\n</ul>\n<p>ä¸€ä¸ªç³Ÿç³•çš„ CLAUDE.md è¯»èµ·æ¥åƒæ˜¯ç»™æ–°å‘˜å·¥å†™çš„å…¥èŒæ–‡æ¡£ã€‚è€Œä¸€ä¸ªä¼˜ç§€çš„ CLAUDE.md è¯»èµ·æ¥åƒæ˜¯ä½ ä¸ºæ˜å¤©ä¼šå¤±å¿†çš„è‡ªå·±ç•™ä¸‹çš„æ ¸å¿ƒç¬”è®°ã€‚</p>\n<h2 id=\"æ³•åˆ™ä¸‰200kä¸Šä¸‹æ–‡æ˜¯ç”œèœœçš„é™·é˜±åˆ«æ‰è¿›å»\">æ³•åˆ™ä¸‰ï¼š200kä¸Šä¸‹æ–‡æ˜¯ç”œèœœçš„é™·é˜±ï¼Œåˆ«æ‰è¿›å»ã€‚</h2>\n<p>è¿™æ˜¯ä¸€ä¸ªåç›´è§‰çš„äº‹å®ï¼šæ¨¡å‹æ€§èƒ½çš„ä¸‹é™è¿œåœ¨ä¸Šä¸‹æ–‡çª—å£è¢«å®Œå…¨å¡«æ»¡ä¹‹å‰å°±å¼€å§‹äº†ï¼Œé€šå¸¸åœ¨ä½¿ç”¨ç‡è¾¾åˆ°20-40%æ—¶å°±ä¼šå‡ºç°æ˜æ˜¾çš„è¡°å‡ã€‚</p>\n<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæœ‰æ—¶å€™å³ä½¿ä½ å‹ç¼©äº†ä¸Šä¸‹æ–‡ï¼ˆä½¿ç”¨ /compact å‘½ä»¤ï¼‰ï¼ŒClaudeä»ç„¶ä¼šç»™å‡ºç³Ÿç³•çš„è¾“å‡ºã€‚å› ä¸ºåœ¨å‹ç¼©ä¹‹å‰ï¼Œæ¨¡å‹çš„æ€§èƒ½å°±å·²ç»é€€åŒ–äº†ã€‚</p>\n<p>ä»¥ä¸‹æ˜¯æœ‰æ•ˆç®¡ç†ä¸Šä¸‹æ–‡çš„å‡ ä¸ªå®ç”¨ç­–ç•¥ï¼š</p>\n<ul>\n<li>åˆ’åˆ†å¯¹è¯èŒƒå›´ (Scope your conversations): æ¯ä¸ªåŠŸèƒ½æˆ–ä»»åŠ¡ä½¿ç”¨ä¸€ä¸ªç‹¬ç«‹çš„å¯¹è¯ã€‚ä¸è¦åœ¨åŒä¸€ä¸ªå¯¹è¯é‡Œæ—¢æ„å»ºè®¤è¯ç³»ç»Ÿåˆé‡æ„æ•°æ®åº“å±‚ã€‚</li>\n<li>ä½¿ç”¨å¤–éƒ¨è®°å¿† (Use external memory): å¯¹äºå¤æ‚çš„ä»»åŠ¡ï¼Œè®©Claudeå°†è®¡åˆ’å’Œè¿›åº¦å†™å…¥åƒ SCRATCHPAD.md è¿™æ ·çš„å¤–éƒ¨æ–‡ä»¶ä¸­ã€‚è¿™æ ·ç¬¬äºŒå¤©ä½ å›æ¥æ—¶ï¼ŒClaudeå¯ä»¥è¯»å–æ–‡ä»¶ï¼Œä»ä¸Šæ¬¡ä¸­æ–­çš„åœ°æ–¹ç»§ç»­ã€‚</li>\n<li>â€œå¤åˆ¶-ç²˜è´´â€é‡ç½®æ³• (The copy-paste reset): å½“ä¸Šä¸‹æ–‡å˜å¾—è‡ƒè‚¿æ—¶ï¼Œå¤åˆ¶å¯¹è¯ä¸­çš„å…³é”®ä¿¡æ¯ï¼Œè¿è¡Œ /compact å’Œ /clear æ¸…ç©ºä¸Šä¸‹æ–‡ï¼Œç„¶ååªæŠŠæœ€é‡è¦çš„ä¿¡æ¯ç²˜è´´å›æ¥ã€‚ä¸€ä¸ªæ¸…çˆ½çš„ä¸Šä¸‹æ–‡è¿œèƒœäºé€€åŒ–çš„ä¸Šä¸‹æ–‡ã€‚</li>\n<li>æœæ–­æ¸…ç©º (Know when to clear): å¦‚æœä¸€ä¸ªå¯¹è¯å·²ç»åç¦»äº†è½¨é“ï¼Œç›´æ¥ç”¨ /clear é‡æ–°å¼€å§‹ã€‚è¿™å‡ ä¹æ€»æ˜¯æ¯”è¯•å›¾çº æ­£ä¸€ä¸ªæ··ä¹±çš„å¯¹è¯è¦å¥½ã€‚</li>\n</ul>\n<p>è®°ä½è¿™ä¸ªå¿ƒæ™ºæ¨¡å‹ï¼šClaudeæ˜¯æ— çŠ¶æ€çš„ã€‚é™¤äº†ä½ æ˜ç¡®ç»™å®ƒçš„ä¸œè¥¿ï¼Œæ¯ä¸ªå¯¹è¯éƒ½æ˜¯ä»é›¶å¼€å§‹ã€‚è¯·æ®æ­¤è§„åˆ’ã€‚</p>\n<h2 id=\"æ³•åˆ™å››æ¶æ„å†³å®šä¸€åˆ‡è§„åˆ’æ— å¯æ›¿ä»£\">æ³•åˆ™å››ï¼šæ¶æ„å†³å®šä¸€åˆ‡ï¼Œè§„åˆ’æ— å¯æ›¿ä»£ã€‚</h2>\n<p>æ¶æ„è‡³å…³é‡è¦ï¼Œå°¤å…¶æ˜¯åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ã€‚å¦‚æœä½ ä¸å…ˆæ€è€ƒç»“æ„ï¼ŒAIç”Ÿæˆçš„ä»£ç å°±ä¼šæœ‰å·¨å¤§çš„â€œè‡ªç”±å‘æŒ¥â€ç©ºé—´ï¼Œè€Œè¿™æ°æ°æ˜¯é—®é¢˜çš„æ ¹æºã€‚ä½ ä¸èƒ½è·³è¿‡è§„åˆ’ã€‚</p>\n<p>æ¯”è¾ƒä¸€ä¸‹è¿™ä¸¤ç§æé—®æ–¹å¼çš„å¤©å£¤ä¹‹åˆ«ï¼šæ¨¡ç³Šçš„è¯·æ±‚æ˜¯â€œç»™æˆ‘å»ºä¸€ä¸ªè®¤è¯ç³»ç»Ÿâ€ï¼Œè€Œä¸€ä¸ªç»è¿‡è§„åˆ’çš„ã€å…·ä½“çš„è¯·æ±‚æ˜¯â€œä½¿ç”¨ç°æœ‰çš„Useræ¨¡å‹æ„å»ºç”µå­é‚®ä»¶/å¯†ç è®¤è¯åŠŸèƒ½ï¼Œå°†sessionå­˜å‚¨åœ¨Redisä¸­å¹¶è®¾ç½®24å°æ—¶è¿‡æœŸï¼Œå¹¶æ·»åŠ ä¸­é—´ä»¶ä¿æŠ¤/api/protectedä¸‹çš„æ‰€æœ‰è·¯ç”±ã€‚â€</p>\n<p>å‰è€…ç»™äº†AIè¿‡å¤šçš„è‡ªç”±ï¼Œç»“æœå¯èƒ½æ˜¯æ··ä¹±çš„ã€‚åè€…ç»™äº†å®ƒä¸€ä¸ªæ¸…æ™°çš„è“å›¾ï¼Œç»“æœä¼šç²¾å‡†å¾—å¤šã€‚èŠ±5åˆ†é’Ÿè¿›è¡Œæ¶æ„è§„åˆ’ï¼Œå¯ä»¥ä¸ºä½ çœä¸‹åç»­æ•°å°æ—¶çš„è°ƒè¯•æ—¶é—´ã€‚</p>\n<h2 id=\"æ³•åˆ™äº”åœæ­¢æŠ±æ€¨æ¨¡å‹ç³Ÿç³•çš„è¾“å‡ºæºäºä½ ç³Ÿç³•çš„è¾“å…¥\">æ³•åˆ™äº”ï¼šåœæ­¢æŠ±æ€¨æ¨¡å‹ï¼Œç³Ÿç³•çš„è¾“å‡ºæºäºä½ ç³Ÿç³•çš„è¾“å…¥ã€‚</h2>\n<p>å½“å¾—åˆ°ä¸ç†æƒ³çš„ç»“æœæ—¶ï¼Œäººä»¬çš„ç¬¬ä¸€ååº”å¾€å¾€æ˜¯æŠ±æ€¨æ¨¡å‹ã€‚ä½†ç°å®æ˜¯æ®‹é…·çš„ï¼šåˆ«å†æ€ªæ¨¡å‹äº†ã€‚å¦‚æœä½ ç”¨Opus 4.5è¿˜å¾—ä¸åˆ°å¥½ç»“æœï¼Œé—®é¢˜å‡ºåœ¨ä½ èº«ä¸Šï¼Œè€Œä¸æ˜¯AIã€‚ä½ çš„è¾“å…¥å’Œæç¤ºæ–¹å¼çƒ‚é€äº†ï¼Œå¥å·ã€‚</p>\n<p>æƒ³è¦æå‡è¾“å‡ºè´¨é‡ï¼Œå…ˆè¦æå‡ä½ çš„è¾“å…¥è´¨é‡ï¼š</p>\n<ul>\n<li>å…·ä½“è¯´æ˜ä½ æƒ³è¦ä»€ä¹ˆ (Be specific about what you want)ï¼š ä½ çš„æŒ‡ä»¤è¶Šæ¸…æ™°ã€è¶Šå…·ä½“ï¼Œç»“æœå°±è¶Šå¥½ã€‚</li>\n<li>å‘Šè¯‰å®ƒä¸è¦åšä»€ä¹ˆ (Tell it what NOT to do)ï¼š Claude 4.5å°¤å…¶æœ‰è¿‡åº¦è®¾è®¡çš„å€¾å‘ã€‚å¦‚æœä½ æƒ³è¦ä¸€ä¸ªç®€çº¦çš„æ–¹æ¡ˆï¼Œå°±æ˜ç¡®å‘Šè¯‰å®ƒï¼šâ€œä¿æŒç®€å•ï¼Œä¸è¦æ·»åŠ æˆ‘æ²¡è¦æ±‚çš„æŠ½è±¡ï¼Œå¦‚æœå¯èƒ½çš„è¯ï¼Œåªç”¨ä¸€ä¸ªæ–‡ä»¶ã€‚â€</li>\n<li>æä¾›â€œä¸ºä»€ä¹ˆâ€çš„èƒŒæ™¯ (Give it context about why)ï¼š å‘Šè¯‰å®ƒâ€œè¿™ä¸ªåŠŸèƒ½éœ€è¦åœ¨æ¯ä¸ªè¯·æ±‚ä¸Šè¿è¡Œï¼Œæ‰€ä»¥æ€§èƒ½è‡³å…³é‡è¦â€ï¼Œæˆ–è€…â€œè¿™åªæ˜¯ä¸€ä¸ªåŸå‹ï¼Œç”¨å®Œå°±æ‰”â€ï¼Œè¿™äº›çº¦æŸä¼šå½»åº•æ”¹å˜æ¨¡å‹è§£å†³é—®é¢˜çš„æ€è·¯ã€‚</li>\n</ul>\n<p>ä¸€ä¸ªä¸“å®¶çº§çš„å·¥ä½œæµæ˜¯ï¼šç”¨Opusè¿›è¡Œè§„åˆ’å’Œæ¶æ„è®¾è®¡ï¼Œç„¶ååˆ‡æ¢åˆ°Sonnetè¿›è¡Œå…·ä½“å®ç°ã€‚ Opusæ›´æ“…é•¿å¤æ‚æ¨ç†ï¼Œè€ŒSonnetæ›´å¿«ã€æ›´ä¾¿å®œï¼Œéå¸¸é€‚åˆæ‰§è¡Œæ˜ç¡®çš„ä»»åŠ¡ã€‚å½“ç„¶ï¼Œå¦‚æœä½ æ˜¯é€šè¿‡APIæŒ‰é‡ä»˜è´¹ï¼Œç”¨Opuså†™æ¯ä¸€è¡Œä»£ç ï¼Œé‚£ä½ å¯èƒ½å¾—è€ƒè™‘å–æ‰ä¸€ä¸ªè‚¾äº†ã€‚</p>\n<p>è®°ä½è¿™ä¸ªçœŸç†ï¼šå¦‚æœä½ çš„è¾“å‡ºå¾ˆç³Ÿç³•ï¼Œé‚£æ˜¯å› ä¸ºä½ çš„è¾“å…¥å¾ˆç³Ÿç³•ã€‚æ²¡æœ‰æ·å¾„å¯èµ°ã€‚</p>\n<h2 id=\"æ³•åˆ™å…­å‹‡äºå®éªŒé…ç½®å†³å®šä½ çš„ä¸Šé™\">æ³•åˆ™å…­ï¼šå‹‡äºå®éªŒï¼Œé…ç½®å†³å®šä½ çš„ä¸Šé™ã€‚</h2>\n<p>Claudeæ‹¥æœ‰ä¸€ä¸ªæå…¶ä¸°å¯Œçš„åŠŸèƒ½ç”Ÿæ€ç³»ç»Ÿï¼šMCPæœåŠ¡å™¨ã€Hooksã€è‡ªå®šä¹‰æ–œæ å‘½ä»¤ã€settings.jsoné…ç½®ç­‰ç­‰ã€‚ä½ ä¸éœ€è¦å…¨éƒ¨æŒæ¡ï¼Œä½†ä½ åº”è¯¥å»å°è¯•å’Œå®éªŒã€‚</p>\n<ul>\n<li>MCP (Model Context Protocol): è®©Claudeè¿æ¥åˆ°å¤–éƒ¨æœåŠ¡ï¼Œå¦‚Slackã€GitHubã€æ•°æ®åº“ã€‚å¦‚æœä½ å‘ç°è‡ªå·±æ€»æ˜¯åœ¨å¤åˆ¶ç²˜è´´ä¿¡æ¯ï¼Œå¾ˆå¯èƒ½æœ‰MCPæœåŠ¡å™¨èƒ½å¸®ä½ è‡ªåŠ¨åŒ–ã€‚</li>\n<li>Hooks: è®©ä»£ç åœ¨Claudeä¿®æ”¹å‰åè‡ªåŠ¨è¿è¡Œã€‚æƒ³è®©Prettieræ ¼å¼åŒ–æ¯ä¸ªæ–‡ä»¶ï¼Ÿç”¨Hookã€‚æƒ³åœ¨æ¯æ¬¡ç¼–è¾‘åè¿›è¡Œç±»å‹æ£€æŸ¥ï¼Ÿç”¨Hookã€‚è¿™èƒ½ç«‹å³æ•è·é—®é¢˜ã€‚</li>\n<li>è‡ªå®šä¹‰æ–œæ å‘½ä»¤: æŠŠä½ é‡å¤ä½¿ç”¨çš„æç¤ºè¯æ‰“åŒ…æˆå‘½ä»¤ã€‚åœ¨.claude/commandsæ–‡ä»¶å¤¹é‡Œåˆ›å»ºmarkdownæ–‡ä»¶ï¼Œç„¶åä½ å°±å¯ä»¥ç”¨/commandnameæ¥è¿è¡Œå®ƒä»¬ã€‚</li>\n</ul>\n<p>è¿™äº›æ¨¡å‹æ¯å‘¨éƒ½åœ¨è¿›æ­¥ã€‚ä¸€ä¸ªæœˆå‰è¡Œä¸é€šçš„åŠŸèƒ½ï¼Œç°åœ¨å¯èƒ½å·²ç»å¯ä»¥äº†ã€‚ä¿æŒå¥½å¥‡å¿ƒï¼Œä¸æ–­é‡æ–°æµ‹è¯•ã€‚</p>\n<h2 id=\"æ³•åˆ™ä¸ƒå½“ä½ è¢«å¡ä½æ—¶åœæ­¢å¼ºæ¨æ”¹å˜æ–¹æ³•\">æ³•åˆ™ä¸ƒï¼šå½“ä½ è¢«å¡ä½æ—¶ï¼Œåœæ­¢å¼ºæ¨ï¼Œæ”¹å˜æ–¹æ³•ã€‚</h2>\n<p>æœ‰æ—¶Claudeä¼šé™·å…¥ä¸€ä¸ªå¾ªç¯ï¼šå°è¯•ã€å¤±è´¥ã€å†å°è¯•ã€å†å¤±è´¥ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œäººçš„æœ¬èƒ½æ˜¯ç»§ç»­è§£é‡Šã€æä¾›æ›´å¤šæŒ‡ä»¤ã€‚ä½†æ›´å¥½çš„åšæ³•æ˜¯å½»åº•æ”¹å˜ä½ çš„æ–¹æ³•ã€‚</p>\n<ul>\n<li>æ¸…ç©ºå¯¹è¯ (Clear the conversation)ï¼š ç´¯ç§¯çš„ä¸Šä¸‹æ–‡å¯èƒ½æ­£åœ¨è¿·æƒ‘å®ƒï¼Œä¸€ä¸ªå…¨æ–°çš„å¼€å§‹å¯ä»¥è§£å†³é—®é¢˜ã€‚</li>\n<li>ç®€åŒ–ä»»åŠ¡ (Simplify the task)ï¼š å¦‚æœä¸€ä¸ªå¤æ‚ä»»åŠ¡è®©Claudeä¸¾æ­¥ç»´è‰°ï¼ŒæŠŠå®ƒåˆ†è§£æˆæ›´å°çš„éƒ¨åˆ†ã€‚é¡ºä¾¿è¯´ä¸€å¥ï¼Œå¦‚æœClaudeå¤„ç†å¤æ‚ä»»åŠ¡å¾ˆåƒåŠ›ï¼Œè¿™é€šå¸¸æ„å‘³ç€ä½ çš„åˆå§‹è®¡åˆ’å°±ä¸å¤Ÿå……åˆ†ã€‚</li>\n<li>å±•ç¤ºè€Œéå‘ŠçŸ¥ (Show instead of tell)ï¼š å¦‚æœClaudeä¸€ç›´æ— æ³•ç†è§£ï¼Œäº²æ‰‹å†™ä¸€ä¸ªæœ€å°åŒ–çš„æ­£ç¡®ç¤ºä¾‹ï¼Œç„¶åå‘Šè¯‰å®ƒï¼šâ€œçœ‹ï¼Œæœ€ç»ˆè¾“å‡ºåº”è¯¥åƒè¿™æ ·ã€‚ç°åœ¨æŠŠè¿™ä¸ªæ¨¡å¼åº”ç”¨åˆ°å…¶ä»–éƒ¨åˆ†ã€‚â€</li>\n<li>é‡æ„é—®é¢˜ (Be creative)ï¼š æ¢ä¸€ä¸ªè§’åº¦æ¥æè¿°ä½ çš„é—®é¢˜ã€‚æœ‰æ—¶å€™ä½ æœ€åˆçš„è¡¨è¿°æ–¹å¼å¯èƒ½ä¸ç¬¦åˆClaudeçš„â€œæ€ç»´æ¨¡å‹â€ã€‚</li>\n</ul>\n<p>å¦‚æœä½ å‘ç°è‡ªå·±å·²ç»é‡å¤è§£é‡Šäº†ä¸‰éï¼Œæ˜¯æ—¶å€™æ”¹å˜ç­–ç•¥äº†ã€‚</p>\n<h2 id=\"æ³•åˆ™å…«è¶…è¶ŠèŠå¤©æ¨¡å¼æ„å»ºè‡ªåŠ¨åŒ–ç³»ç»Ÿ\">æ³•åˆ™å…«ï¼šè¶…è¶ŠèŠå¤©æ¨¡å¼ï¼Œæ„å»ºè‡ªåŠ¨åŒ–ç³»ç»Ÿã€‚</h2>\n<p>çœŸæ­£ä»Claudeä¸­è·å¾—å·¨å¤§ä»·å€¼çš„äººï¼Œå¹¶ä¸ä»…ä»…æŠŠå®ƒå½“ä½œä¸€ä¸ªäº¤äº’å¼å·¥å…·ã€‚ä»–ä»¬æ­£åœ¨æ„å»ºä»¥Claudeä¸ºæ ¸å¿ƒç»„ä»¶çš„è‡ªåŠ¨åŒ–ç³»ç»Ÿã€‚</p>\n<p>é€šè¿‡ -p æ ‡å¿—ï¼Œä½ å¯ä»¥åœ¨æ— å¤´æ¨¡å¼ï¼ˆheadless modeï¼‰ä¸‹è¿è¡ŒClaudeã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥ç¼–å†™è„šæœ¬ï¼Œå°†å®ƒçš„è¾“å‡ºé€šè¿‡ç®¡é“ä¼ é€’ç»™å…¶ä»–å·¥å…·ï¼Œä¸bashå‘½ä»¤é“¾æ¥ï¼Œå¹¶å°†å…¶é›†æˆåˆ°è‡ªåŠ¨åŒ–å·¥ä½œæµä¸­ã€‚</p>\n<p>ä¼ä¸šæ­£åœ¨ç”¨è¿™ç§æ–¹å¼å®ç°è‡ªåŠ¨åŒ–çš„ä»£ç å®¡æŸ¥ï¼ˆPR reviewï¼‰ã€æ”¯æŒå·¥å•å“åº”ã€æ—¥å¿—è®°å½•å’Œæ–‡æ¡£æ›´æ–°ã€‚æ‰€æœ‰è¿™äº›éƒ½æ˜¯å¯è®°å½•ã€å¯å®¡è®¡çš„ï¼Œå¹¶ä¸”éšç€æ—¶é—´çš„æ¨ç§»ä¸æ–­æ”¹è¿›ã€‚</p>\n<p>è¿™å°±å½¢æˆäº†ä¸€ä¸ªå¼ºå¤§çš„é£è½®æ•ˆåº”ï¼šClaudeçŠ¯äº†ä¸€ä¸ªé”™è¯¯ï¼Œä½ å®¡æŸ¥æ—¥å¿—ï¼Œç„¶åæ”¹è¿›CLAUDE.mdæˆ–ç›¸å…³å·¥å…·ï¼Œä¸‹ä¸€æ¬¡Claudeå°±ä¼šåšå¾—æ›´å¥½ã€‚è¿™ç§æ”¹è¿›æ˜¯å¤åˆå¼çš„ã€‚å¦‚æœä½ åªåœ¨äº¤äº’æ¨¡å¼ä¸‹ä½¿ç”¨Claudeï¼Œä½ æ­£åœ¨é”™å¤±å®ƒçœŸæ­£çš„ä»·å€¼ã€‚</p>\n<h2 id=\"ç»“è¯­ä½ çš„aiä½ çš„è´£ä»»\">ç»“è¯­ï¼šä½ çš„AIï¼Œä½ çš„è´£ä»»</h2>\n<p>çœŸæ­£æŒæ¡åƒClaudeè¿™æ ·çš„AIå¼€å‘å·¥å…·ï¼Œå…³é”®åœ¨äºæ€ç»´æ¨¡å¼çš„è½¬å˜â€”â€”ä»ä¸€ä¸ªç®€å•çš„æŒ‡ä»¤å‘å‡ºè€…ï¼Œè½¬å˜ä¸ºä¸€ä¸ª meticulous çš„è§„åˆ’è€…ã€é…ç½®è€…å’Œç³»ç»Ÿæ„å»ºè€…ã€‚ä½ ä¸æ˜¯åœ¨å’Œå®ƒèŠå¤©ï¼Œä½ æ˜¯åœ¨ç¼–ç¨‹å®ƒã€‚</p>\n<p>æœ€åï¼Œç•™ç»™ä½ ä¸€ä¸ªé—®é¢˜æ€è€ƒï¼š å¦‚æœä½ ä¸æŠŠClaudeå½“ä½œèŠå¤©æœºå™¨äººï¼Œè€Œæ˜¯çœ‹ä½œä¸€ä¸ªå¯ç¼–ç¨‹çš„å›¢é˜Ÿæˆå‘˜ï¼Œä½ æœ€å…ˆä¼šè‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹çš„å“ªä¸ªéƒ¨åˆ†ï¼Ÿ</p>\n<p>æ›´å¤šå…³äºAI Codingçš„å†…å®¹å¯å…³æ³¨æˆ‘çš„<a href=\"https://didispace.com\" rel=\"noopener nofollow\" target=\"_blank\">åšå®¢</a>è·å–æŒç»­æ›´æ–°ã€‚</p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-14 19:53</span>&nbsp;\n<a href=\"https://www.cnblogs.com/didispace\">ç¨‹åºçŒ¿DD</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">95</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "é«˜å¾·åœ°å›¾å®ç°å®æ—¶è½¨è¿¹å±•ç¤º",
      "link": "https://www.cnblogs.com/lijinhuaboke/p/19457121",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/lijinhuaboke/p/19457121\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-14 14:35\">\n    <span>é«˜å¾·åœ°å›¾å®ç°å®æ—¶è½¨è¿¹å±•ç¤º</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h1 id=\"vue3--é«˜å¾·åœ°å›¾amap-å®ç°å¹³æ»‘çš„å®æ—¶è½¨è¿¹å›æ”¾ä¸è¿½è¸ª\">Vue3 + é«˜å¾·åœ°å›¾(AMap) å®ç°å¹³æ»‘çš„å®æ—¶è½¨è¿¹å›æ”¾ä¸è¿½è¸ª</h1>\n<h2 id=\"å‰è¨€\">å‰è¨€</h2>\n<p>åœ¨ç‰©è”ç½‘ã€ç‰©æµç›‘æ§æˆ–å®‰é˜²è°ƒåº¦ç³»ç»Ÿä¸­ï¼Œå®æ—¶å±•ç¤ºè®¾å¤‡ï¼ˆå¦‚æ— äººæœºã€è½¦è¾†ã€æ‰‹ç¯ï¼‰çš„ç§»åŠ¨è½¨è¿¹æ˜¯ä¸€ä¸ªå¸¸è§éœ€æ±‚ã€‚å¦‚æœä»…ä»…æ˜¯ç®€å•çš„æ›´æ–°æ ‡è®°ç‚¹ä½ç½®ï¼Œè§†è§‰ä¸Šä¼šå‡ºç°â€œè·³å˜â€ç°è±¡ï¼Œä½“éªŒå¾ˆä¸æµç•…ã€‚</p>\n<p>æœ¬æ–‡å°†åˆ†äº«å¦‚ä½•åœ¨ <strong>Vue 3</strong> é¡¹ç›®ä¸­ï¼Œåˆ©ç”¨ <strong>é«˜å¾·åœ°å›¾ (AMap) JS API</strong> å®ç°æ¯”è¾ƒä¸æ»‘çš„å®æ—¶è½¨æ•ˆæœã€‚</p>\n<h2 id=\"æ ¸å¿ƒç—›ç‚¹\">æ ¸å¿ƒç—›ç‚¹</h2>\n<ol>\n<li><strong>å¹³æ»‘ç§»åŠ¨</strong>ï¼šç‚¹ä½æ›´æ–°æ—¶ï¼ŒMarker éœ€è¦ä»æ—§ä½ç½®å¹³æ»‘è¿‡æ¸¡åˆ°æ–°ä½ç½®ï¼Œè€Œä¸æ˜¯ç¬é—´è·³è¿‡å»ã€‚</li>\n<li><strong>è½¨è¿¹è·Ÿéš</strong>ï¼šéšç€ Marker çš„ç§»åŠ¨ï¼Œè½¨è¿¹çº¿ï¼ˆPolylineï¼‰éœ€è¦å®æ—¶â€œç”Ÿé•¿â€ï¼Œç´§è·Ÿåœ¨ Marker åé¢ã€‚</li>\n<li><strong>å¢é‡æ›´æ–°</strong>ï¼šåç«¯é€šå¸¸è¿”å›å®Œæ•´çš„å†å²è·¯å¾„æˆ–å½“å‰çŠ¶æ€ï¼Œå‰ç«¯éœ€è¦è®¡ç®—å‡ºâ€œæ–°å¢çš„è·¯å¾„æ®µâ€è¿›è¡ŒåŠ¨ç”»æ’­æ”¾ã€‚</li>\n</ol>\n<h2 id=\"å®ç°é€»è¾‘è§£æ\">å®ç°é€»è¾‘è§£æ</h2>\n<p>æ ¸å¿ƒæ˜¯åˆ©ç”¨é«˜å¾·åœ°å›¾ API çš„è½¨è¿¹å›æ”¾åŠŸèƒ½ã€‚è™½ç„¶å®˜æ–¹æ–‡æ¡£æä¾›äº†åŸºç¡€çš„è½¨è¿¹å›æ”¾ç¤ºä¾‹ï¼ˆå‚è€ƒï¼š<a href=\"https://lbs.amap.com/demo/javascript-api-v2/example/marker/replaying-historical-running-data\" rel=\"noopener nofollow\" target=\"_blank\">è½¨è¿¹å›æ”¾ç¤ºä¾‹</a>ï¼‰ï¼Œä½†å®˜æ–¹ç¤ºä¾‹é€šå¸¸æ˜¯ä¸€æ¬¡æ€§åŠ è½½å®Œæ•´è·¯å¾„ï¼ˆä¾‹å¦‚ï¼šå…ˆè·å–å®Œæ•´ç»çº¬åº¦æ•°ç»„ï¼Œæ¸²æŸ“å‡ºæµ…è“è‰²èƒŒæ™¯çº¿ï¼Œå†è®©å°è½¦æ²¿ç€è·¯å¾„è·‘å¹¶ç”»å‡ºæµ…ç»¿è‰²è½¨è¿¹ï¼‰ã€‚</p>\n<p><strong>æˆ‘ä»¬çš„ä¸šåŠ¡åœºæ™¯ä¸å®˜æ–¹ç¤ºä¾‹çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼š</strong><br />\næˆ‘ä»¬çš„è·¯å¾„æ•°æ®æ˜¯<strong>å®æ—¶å¢é‡æ›´æ–°</strong>çš„ã€‚å‰ç«¯å¹¶æ²¡æœ‰ä¸€å¼€å§‹å°±æ‹¿åˆ°å®Œæ•´çš„è·¯å¾„ï¼Œè€Œæ˜¯é€šè¿‡ WebSocket æˆ–è½®è¯¢å®æ—¶è·å–åç«¯è¿”å›çš„æœ€æ–°è·¯å¾„æ•°æ®ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦è‡ªè¡Œè®¾è®¡é€»è¾‘ï¼Œè®¡ç®—å‡ºæ¯æ¬¡æ›´æ–°çš„â€œå¢é‡ç‰‡æ®µâ€ï¼Œå¹¶è®© Marker å¹³æ»‘åœ°èµ°å®Œè¿™ä¸€æ®µã€‚</p>\n<h3 id=\"æ ¸å¿ƒæ€è·¯\">æ ¸å¿ƒæ€è·¯ï¼š</h3>\n<ol>\n<li>\n<p><strong>å‰åç«¯æ•°æ®çº¦å®š</strong>ï¼š</p>\n<ul>\n<li>ç†æƒ³æƒ…å†µä¸‹ï¼Œåç«¯æœ€å¥½ç›´æ¥è¿”å›â€œå¢é‡è·¯å¾„â€ï¼ˆå³ä¸Šä¸€æ¬¡ä½ç½®åˆ°å½“å‰ä½ç½®çš„åæ ‡é›†åˆï¼‰ã€‚</li>\n<li>ä½†åœ¨å®é™…é¡¹ç›®ä¸­ï¼ˆæ¯”å¦‚æœ¬æ¡ˆä¾‹ï¼‰ï¼Œåç«¯æ¥å£è¿”å›çš„æ˜¯<strong>å½“å‰æ—¶åˆ»çš„å®Œæ•´ç´¯ç§¯è·¯å¾„</strong>ã€‚å› æ­¤ï¼Œå‰ç«¯éœ€è¦è‡ªè¡Œæ¯”å¯¹ç¼“å­˜çš„â€œä¸Šä¸€æ¬¡è·¯å¾„â€å’Œâ€œæœ€æ–°è·¯å¾„â€ï¼Œè®¡ç®—å‡ºå¢é‡éƒ¨åˆ†ã€‚</li>\n</ul>\n</li>\n<li>\n<p><strong>çŠ¶æ€ç®¡ç† (ç¼“å­˜å®ä¾‹)</strong>ï¼š</p>\n<ul>\n<li>ä½¿ç”¨ <code>Map</code> æ•°æ®ç»“æ„æ¥ç¼“å­˜æ¯ä¸ªè®¾å¤‡ï¼ˆå¦‚æ— äººæœºã€æ‰‹ç¯ï¼‰çš„ <code>Marker</code>ï¼ˆå›¾æ ‡ï¼‰å’Œ <code>Polyline</code>ï¼ˆè½¨è¿¹çº¿ï¼‰å®ä¾‹ã€‚</li>\n<li>ç¡®ä¿æ¯ä¸ªè®¾å¤‡ ID å¯¹åº”å”¯ä¸€çš„åœ°å›¾å®ä¾‹ï¼Œé¿å…æ•°æ®åˆ·æ–°æ—¶é‡å¤åˆ›å»ºå¯¼è‡´å†…å­˜æ³„æ¼æˆ–é—ªçƒã€‚</li>\n</ul>\n</li>\n<li>\n<p><strong>è®¡ç®—å¢é‡è·¯å¾„</strong>ï¼š</p>\n<ul>\n<li>å½“æ–°æ•°æ®åˆ°è¾¾æ—¶ï¼Œé€šè¿‡å¯¹æ¯”æ–°æ—§è·¯å¾„é•¿åº¦ï¼Œæˆªå–å‡º<strong>æ–°å¢çš„è·¯å¾„æ®µ</strong>ã€‚</li>\n<li>è¿™æ®µæ–°å¢è·¯å¾„å°±æ˜¯ Marker æ¥ä¸‹æ¥éœ€è¦â€œå¹³æ»‘ç§»åŠ¨â€çš„è½¨è¿¹ã€‚</li>\n</ul>\n</li>\n<li>\n<p><strong>å¹³æ»‘åŠ¨ç”» (<code>moveAlong</code>)</strong>ï¼š</p>\n<ul>\n<li>è°ƒç”¨é«˜å¾·åœ°å›¾çš„ <code>marker.moveAlong()</code> æ–¹æ³•ï¼Œè®© Marker æ²¿ç€æ–°å¢è·¯å¾„å¹³æ»‘ç§»åŠ¨ï¼Œè€Œä¸æ˜¯ç¬é—´è·³å˜ã€‚</li>\n</ul>\n</li>\n<li>\n<p><strong>å®æ—¶ç»˜åˆ¶è½¨è¿¹ (<code>moving</code> äº‹ä»¶)</strong>ï¼š</p>\n<ul>\n<li>ç›‘å¬ Marker çš„ <code>moving</code> äº‹ä»¶ã€‚åœ¨ç§»åŠ¨è¿‡ç¨‹ä¸­ï¼Œå®æ—¶æ›´æ–°è½¨è¿¹çº¿ï¼ˆPolylineï¼‰çš„è·¯å¾„ï¼Œä»è€Œå®ç°â€œè¾¹èµ°è¾¹ç”»â€çš„æ•ˆæœã€‚</li>\n<li><strong>å…³é”®ç‚¹</strong>ï¼šä¸ºä»€ä¹ˆè¦åœ¨ <code>moving</code> äº‹ä»¶ä¸­æ›´æ–°æ€»è½¨è¿¹ï¼Œè€Œä¸æ˜¯åœ¨åŠ¨ç”»ç»“æŸ (<code>moveend</code>) åæ›´æ–°ï¼Ÿ\n<ul>\n<li>è¿™æ˜¯ä¸ºäº†é˜²æ­¢æ•°æ®æ¨é€é¢‘ç‡è¿‡å¿«ã€‚å¦‚æœç­‰åˆ°åŠ¨ç”»ç»“æŸå†æ›´æ–°ï¼Œå¯èƒ½ä¼šå‡ºç°â€œæ–°çš„æ•°æ®æ¨é€æ¥äº†ï¼Œä½†ä¸Šä¸€æ¬¡åŠ¨ç”»è¿˜æ²¡ç»“æŸï¼Œå¯¼è‡´è½¨è¿¹æ•°æ®ä¸¢å¤±æˆ–è¡”æ¥ä¸ä¸Šâ€çš„é—®é¢˜ã€‚åœ¨ <code>moving</code> è¿‡ç¨‹ä¸­å®æ—¶å°† <code>passedPath</code>ï¼ˆå·²èµ°è¿‡çš„è·¯å¾„ï¼‰æ‹¼æ¥åˆ°æ€»è½¨è¿¹ä¸­ï¼Œæ˜¯æœ€ç¨³å¦¥çš„æ–¹å¼ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>åŠ¨ç”»ç»“æŸæ¸…ç†</strong>ï¼š</p>\n<ul>\n<li>åŠ¨ç”»ç»“æŸæ—¶ (<code>moveend</code>)ï¼Œæ¸…ç†ä¸´æ—¶ç»˜åˆ¶çš„è¾…åŠ©çº¿ï¼Œç§»é™¤ç›‘å¬å™¨ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼ã€‚</li>\n</ul>\n</li>\n</ol>\n<hr />\n<h3 id=\"ä»£ç è¯¦è§£\">ä»£ç è¯¦è§£</h3>\n<h4 id=\"1-çŠ¶æ€ç®¡ç†ä¸åˆå§‹åŒ–\">1. çŠ¶æ€ç®¡ç†ä¸åˆå§‹åŒ–</h4>\n<p>æˆ‘ä»¬ä½¿ç”¨ <code>Map</code> æ¥ç®¡ç†åœ°å›¾ä¸Šçš„ Marker å’Œ Polyline å®ä¾‹ã€‚</p>\n<pre><code class=\"language-javascript\">// å­˜å‚¨ Marker å®ä¾‹ (Key: è®¾å¤‡ID, Value: AMap.Marker)\nconst uavMarkers = ref(new Map());\n// å­˜å‚¨è½¨è¿¹çº¿ Polyline å®ä¾‹ (Key: è®¾å¤‡ID, Value: AMap.Polyline)\nconst uavPaths = ref(new Map());\n</code></pre>\n<h4 id=\"2-æ ¸å¿ƒå¤„ç†å‡½æ•°-refreshtemppoint\">2. æ ¸å¿ƒå¤„ç†å‡½æ•° <code>refreshTempPoint</code></h4>\n<p>è¿™ä¸ªå‡½æ•°è´Ÿè´£å¤„ç†å•æ¡è®¾å¤‡æ•°æ®çš„æ›´æ–°é€»è¾‘ã€‚</p>\n<pre><code class=\"language-javascript\">// åˆ·æ–°è®¾å¤‡ç‚¹ä½ä¸è½¨è¿¹\n// item: åç«¯è¿”å›çš„è®¾å¤‡æ•°æ®å¯¹è±¡\n// position: å½“å‰æœ€æ–°çš„åæ ‡ç‚¹\n// type: æ›´æ–°ç±»å‹ï¼ˆ'init' ä¸ºåˆå§‹åŒ–ï¼Œå…¶ä»–ä¸ºå¢é‡æ›´æ–°ï¼‰\nconst refreshTempPoint = async (item, position, type, marker, tempOverlay, pathOverlay) =&gt; {\n  // 1. æ¸…ç†ä¸Šä¸€è½®çš„ä¸´æ—¶è¦†ç›–ç‰©ï¼ˆå¦‚ä¸´æ—¶è·¯çº¿ã€è·ç¦»æ–‡æœ¬ï¼‰\n  tempOverlay?.clearOverlays();\n\n  if (item.coordinatesLine) {\n    const coordinatesLine = JSON.parse(item.coordinatesLine); // è§£æåç«¯è¿”å›çš„å®Œæ•´è·¯å¾„æ•°ç»„\n\n    // --- A. åˆå§‹åŒ–èµ·ç‚¹ Marker ---\n    let tempMarker = tempUavMarkers.value.get(item.id);\n    if (!tempMarker) {\n      // å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡å‡ºç°ï¼Œæ¸²æŸ“èµ·ç‚¹\n      tempMarker = renderPoint(coordinatesLine[0], item, \"\", pathOverlay);\n      tempUavMarkers.value.set(item.id, tempMarker);\n    }\n\n    // --- B. è·å–æˆ–åˆ›å»ºå†å²è½¨è¿¹çº¿ (Polyline) ---\n    let polyline = uavPaths.value.get(item.id);\n    if (!polyline) {\n      polyline = trajectoryLine(item, pathOverlay); // åˆ›å»ºæ–°çš„çº¿å®ä¾‹\n      uavPaths.value.set(item.id, polyline);\n    }\n\n    // è·å–å½“å‰åœ°å›¾ä¸Šå·²æœ‰çš„è·¯å¾„ï¼ˆç¼“å­˜çš„æ—§è·¯å¾„ï¼‰\n    const existingPath = polyline.getPath() || [];\n\n    if (type != \"init\") {\n      // --- C. å¢é‡æ›´æ–°é€»è¾‘ ---\n      \n      // 1. è®¡ç®—å¢é‡è·¯å¾„ï¼šä»å·²æœ‰è·¯å¾„çš„æœ€åä¸€ä¸ªç‚¹å¼€å§‹æˆªå–ï¼Œç›´åˆ°æœ€æ–°è·¯å¾„çš„æœ«å°¾\n      const newPathSegment = coordinatesLine.slice(\n        existingPath.length ? existingPath.length - 1 : 0\n      );\n\n      // 2. åˆ›å»ºä¸€æ¡ä¸´æ—¶çš„â€œéšå½¢â€çº¿æ®µï¼Œç”¨äºè¾…åŠ©è®¡ç®—æˆ–å±•ç¤ºï¼ˆè§†éœ€æ±‚è€Œå®šï¼‰\n      const newPolyline = trajectoryLine(item, tempOverlay);\n\n      // 3. å¦‚æœæœ‰æ–°å¢è·¯å¾„ï¼Œå¼€å§‹åŠ¨ç”»\n      if (newPathSegment &amp;&amp; newPathSegment.length &gt; 0) {\n        \n        // ç›‘å¬ç§»åŠ¨è¿‡ç¨‹\n        marker.on(\"moving\", function (e) {\n          // e.passedPath æ˜¯ Marker åœ¨å½“å‰åŠ¨ç”»ç‰‡æ®µä¸­å·²ç»èµ°è¿‡çš„è·¯å¾„\n          newPolyline.setPath(e.passedPath);\n          \n          // [å…³é”®] å®æ—¶å°†èµ°è¿‡çš„è·¯å¾„æ‹¼æ¥åˆ°å†å²æ€»è½¨è¿¹ä¸­\n          // è¿™æ ·å³ä½¿ WebSocket æ¨é€é¢‘ç‡å¾ˆå¿«ï¼Œä¹Ÿèƒ½ä¿è¯è½¨è¿¹æ•°æ®çš„è¿ç»­æ€§\n          polyline.setPath([...existingPath, ...e.passedPath]);\n        });\n\n        // å¼€å§‹å¹³æ»‘ç§»åŠ¨\n        marker.moveAlong(newPathSegment, {\n          duration: 1000,    // åŠ¨ç”»æ—¶é•¿ï¼Œéœ€æ ¹æ® WebSocket æ¨é€é¢‘ç‡è°ƒæ•´\n          autoRotation: true, // è½¦å¤´è‡ªåŠ¨å¯¹å‡†è·¯å¾„æ–¹å‘\n        });\n\n        // ç›‘å¬ç§»åŠ¨ç»“æŸ\n        marker.on(\"moveend\", function () {\n          // åŠ¨ç”»ç»“æŸï¼Œæ¸…ç†ä¸´æ—¶è¦†ç›–ç‰©\n          tempOverlay?.clearOverlays();\n          \n          // æ›´æ–°è·ç¦»æ–‡æœ¬ç­‰ä¿¡æ¯\n          if (item.distance) {\n            renderText(\n              coordinatesLine[Math.ceil(coordinatesLine.length - 2)],\n              `${item.distance}ç±³`,\n              tempOverlay\n            );\n          }\n          \n          // ç§»é™¤ç›‘å¬å™¨ï¼Œé˜²æ­¢é‡å¤ç»‘å®š\n          marker.off(\"moveend\");\n        });\n      } else {\n        // å¦‚æœæ²¡æœ‰æ–°å¢è·¯å¾„ï¼ˆä½ç½®æ²¡å˜ï¼‰ï¼Œä»…æ›´æ–°æ–‡å­—ä¿¡æ¯\n        if (item.distance) {\n          renderText(..., `${item.distance}ç±³`, tempOverlay);\n        }\n      }\n\n    } else {\n      // --- D. åˆå§‹åŒ–é€»è¾‘ ---\n      // å¦‚æœæ˜¯åˆå§‹åŒ–åŠ è½½ï¼Œç›´æ¥è®¾ç½®å®Œæ•´è·¯å¾„ï¼Œä¸è¿›è¡ŒåŠ¨ç”»å›æ”¾\n      if (item.distance) {\n         renderText(..., `${item.distance}ç±³`, tempOverlay);\n      }\n      polyline.setPath(coordinatesLine);\n    }\n  } else {\n    // --- E. æ— è½¨è¿¹æ•°æ®æ—¶çš„é™çº§å¤„ç† ---\n    // å¦‚æœåç«¯æ²¡æœ‰è¿”å›è·¯å¾„æ•°æ®ï¼Œç›´æ¥è·³å˜åˆ°æœ€æ–°ä½ç½®\n    marker.setPosition(position);\n    \n    // æ¸…ç†ç›¸å…³çš„è½¨è¿¹å®ä¾‹å’Œç¼“å­˜\n    let tempMarker = tempUavMarkers.value.get(item.id);\n    if (tempMarker) {\n      tempMarker.setMap(null);\n      pathOverlay &amp;&amp; pathOverlay.removeOverlay(tempMarker);\n      tempUavMarkers.value.delete(item.id);\n    }\n    \n    let polyline = uavPaths.value.get(item.id);\n    if (polyline) {\n      polyline.setMap(null);\n      pathOverlay &amp;&amp; pathOverlay.removeOverlay(polyline);\n      uavPaths.value.delete(item.id);\n    }\n  }\n};\n</code></pre>\n<p>}<br />\n};</p>\n<pre><code class=\"language-javascript\">\n// æ— äººæœºå’Œæ‰‹ç¯è½¨è¿¹æš‚æ—¶\nconst refreshAirMap = async (type, data) =&gt; {\n  const res = await getUavElement();\n  // console.log(\"æ— äººæœºæ•°æ®\", res.result);\n  res.result.map(async (item) =&gt; {\n    // data.map(async (item) =&gt; {\n    if (item.type == \"1\") {\n      let position = JSON.parse(item.coordinates);\n      // è·å–æˆ–åˆ›å»ºæ— äººæœºæ ‡è®°\n      let marker = uavMarkers.value.get(item.id);\n      if (!marker) {\n        // åˆ›å»ºæ— äººæœºã€æ‰‹ç¯ç‚¹ä½ã€‚\n        marker = renderPoint(position, item, \"\", overlayGroups.value);\n        uavMarkers.value.set(item.id, marker);\n      }else{\n        \n        if (item.elementType == \"2\") {\n          // å·²æœ‰ç‚¹ä½ä¸”æ˜¯æ‰‹ç¯ç‚¹ä½å°±æ›´æ–°ç”µé‡\n          marker.setLabel({\n            content: `&lt;div class=\"marker-label-container\"&gt;\n              &lt;div class=\"info-name\"&gt;${item.name}&lt;/div&gt;\n              &lt;div class=\"icon-placeholder\"&gt;&lt;/div&gt;\n              ${batteryHtml(item)}\n            &lt;/div&gt;`,\n            offset: new AMaps.value.Pixel(0, 0),\n            direction: \"center\",\n          });\n        }\n      }\n\n      if (item.elementType == \"1\") {\n        // æ— äººæœºè½¨è¿¹\n        refreshTempPoint(\n          item,\n          position,\n          type,\n          marker,\n          pathOverlayGroups.value,\n          pathsStartPointOverlayGroups.value\n        );\n      } else if (item.elementType == \"2\") {\n        // æ‰‹ç¯è½¨è¿¹\n        refreshTempPoint(\n          item,\n          position,\n          type,\n          marker,\n          rescuePathsOverlayGroups.value,\n          rescueOverlayGroups.value\n        );\n      }\n      // è½¨è¿¹éƒ¨åˆ†ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰è½¨è¿¹\n    }\n  });\n  // });\n};\n</code></pre>\n<p>è¯´æ˜ä¸€ä¸‹å“¦ï¼Œæˆ‘çš„é¡¹ç›®ä¸­è¿˜éœ€è¦å®ç°å…¶ä»–åŠŸèƒ½åƒæ˜¯æ‰‹ç¯ç”µé‡å±•ç¤ºï¼Œç‚¹å‡»æŒ‰é’®å¯éšè—æ— äººæœºè½¨è¿¹ï¼Œç‚¹å‡»æŒ‰é’®å¯éšè—æ‰‹ç¯è½¨è¿¹ï¼Œæ— äººæœºå’Œæ‰‹ç¯è½¨è¿¹èµ·å§‹ç‚¹ä¹Ÿéœ€è¦å±•ç¤ºä¸€ä¸ªç‚¹ä½å›¾æ ‡ï¼Œè½¨è¿¹çº¿ä¸Šæ˜¾ç¤ºè·ç¦»ï¼Œè¿˜è€ƒè™‘äº†ç¬¬ä¸€æ¬¡è¿›å…¥é¡¹ç›®ï¼Œå¦‚æ— è½¨è¿¹å°±åªæ›´æ–°ç‚¹ä½åæ ‡ç­‰ç­‰è¿™äº›ï¼Œæ— å…³çš„è½¨è¿¹å±•ç¤ºé€»è¾‘çš„å„ä½è§‚ä¼—è€çˆ·ç•¥è¿‡å°±å¥½ï¼Œè¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯åˆ†äº«ä¸€ä¸‹å®æ—¶è½¨è¿¹å®ç°çš„é€»è¾‘ï¼ŒæŠŠè½¨è¿¹ç›¸å…³é€»è¾‘æŠ½å‡ºæ¥é‡æ–°å†™ä¸€ä»½ä»£ç ï¼Œæˆ‘å«Œéº»çƒ¦å˜»å˜»ã€‚</p>\n<h2 id=\"æ€»ç»“\">æ€»ç»“</h2>\n<p>é€šè¿‡ç»“åˆ å¢é‡è·¯å¾„è®¡ç®—<code>moveAlong</code> è½¨è¿¹å›æ”¾ ä»¥åŠ <code>moving</code> äº‹ä»¶ç›‘å¬ï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªé«˜æ€§èƒ½ä¸”è§†è§‰æµç•…çš„å®æ—¶è½¨è¿¹è¿½è¸ªåŠŸèƒ½ã€‚è¿™ç§æ–¹æ¡ˆç‰¹åˆ«é€‚åˆæ— äººæœºå·¡èˆªã€è½¦è¾†å®æ—¶å®šä½ç­‰éœ€è¦é«˜é¢‘æ›´æ–°ä½ç½®çš„åœºæ™¯ã€‚</p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-14 14:35</span>&nbsp;\n<a href=\"https://www.cnblogs.com/lijinhuaboke\">æ­¤é¢œå·®çŸ£ã€‚</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">376</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">3</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "`i` å’Œ `e` å†™åå¼•å‘çš„è¡€æ¡ˆï¼šå½“ AI çš„â€œçº é”™ç™–â€é‡ä¸Š NexusContract çš„â€œç…§å¦–é•œâ€",
      "link": "https://www.cnblogs.com/jieky/p/19481961",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/jieky/p/19481961\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-14 14:19\">\n    <span>`i` å’Œ `e` å†™åå¼•å‘çš„è¡€æ¡ˆï¼šå½“ AI çš„â€œçº é”™ç™–â€é‡ä¸Š NexusContract çš„â€œç…§å¦–é•œâ€</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                    <div id=\"cnblogs_post_description\" style=\"display: none;\">\n        \n        åœ¨å¯¹æ¥æŸå¤´éƒ¨æ”¯ä»˜ç½‘å…³æ—¶ï¼Œæˆ‘é­é‡äº†ä¸€æ¬¡å®Œç¾çš„â€œé™ç»´æ‰“å‡»â€ã€‚å®˜æ–¹æ–‡æ¡£é‡Œä¸€ä¸ªæŠŠ `ei` å†™æˆ `ie` çš„è‹±è¯­è¯­æ³•é”™è¯¯ï¼Œéª—è¿‡äº† AI çš„è¯­æ³•æ£€æŸ¥ï¼Œä¹Ÿéª—è¿‡äº†æˆ‘çš„è‚‰çœ¼ Reviewã€‚æœ¬æ–‡å°†æ¢è®¨ NexusContract å¦‚ä½•é€šè¿‡**å…ƒæ•°æ®éš”ç¦»**æœºåˆ¶ï¼Œåœ¨æ··ä¹±çš„é—ç•™æ¥å£ä¸ç°ä»£åŒ–çš„æ•´æ´ä»£ç ä¹‹é—´å»ºç«‹ä¸€é“é˜²çº¿ã€‚\n    </div>\n<div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h1 id=\"i-å’Œ-e-å†™åå¼•å‘çš„è¡€æ¡ˆå½“-ai-çš„çº é”™ç™–é‡ä¸Š-nexuscontract-çš„ç…§å¦–é•œ\"><code>i</code> å’Œ <code>e</code> å†™åå¼•å‘çš„è¡€æ¡ˆï¼šå½“ AI çš„â€œçº é”™ç™–â€é‡ä¸Š NexusContract çš„â€œç…§å¦–é•œâ€</h1>\n<blockquote>\n<p><strong>æ‘˜è¦</strong>ï¼šåœ¨å¯¹æ¥æŸå¤´éƒ¨æ”¯ä»˜ç½‘å…³æ—¶ï¼Œæˆ‘é­é‡äº†ä¸€æ¬¡å®Œç¾çš„â€œé™ç»´æ‰“å‡»â€ã€‚å®˜æ–¹æ–‡æ¡£é‡Œä¸€ä¸ªæŠŠ <code>ei</code> å†™æˆ <code>ie</code> çš„è‹±è¯­è¯­æ³•é”™è¯¯ï¼Œéª—è¿‡äº† AI çš„è¯­æ³•æ£€æŸ¥ï¼Œä¹Ÿéª—è¿‡äº†æˆ‘çš„è‚‰çœ¼ Reviewã€‚æœ¬æ–‡å°†æ¢è®¨ NexusContract å¦‚ä½•é€šè¿‡<strong>å…ƒæ•°æ®éš”ç¦»</strong>æœºåˆ¶ï¼Œåœ¨æ··ä¹±çš„é—ç•™æ¥å£ä¸ç°ä»£åŒ–çš„æ•´æ´ä»£ç ä¹‹é—´å»ºç«‹ä¸€é“é˜²çº¿ã€‚</p>\n</blockquote>\n<h2 id=\"1-è¯¡å¼‚çš„-parameter_missing\">1. è¯¡å¼‚çš„ <code>PARAMETER_MISSING</code></h2>\n<p>æ•…äº‹å‘ç”Ÿåœ¨ä¸ä¹…å‰ï¼Œæˆ‘ä»¬æ­£åœ¨é‡æ„å†…éƒ¨çš„ä¸€ä¸ªè¿è¡Œäº†å‡ å¹´çš„è€æ—§æ”¯ä»˜ç½‘å…³ã€‚</p>\n<p>ä¸ºäº†æé«˜é‡æ„æ•ˆç‡ï¼Œæˆ‘æŠŠæ—§çš„æ–‡æ¡£æˆªå›¾å–‚ç»™äº† AIï¼ˆæŸçŸ¥åå¤§æ¨¡å‹ï¼‰ï¼Œè®©å®ƒå¸®æˆ‘ç”Ÿæˆç¬¦åˆ NexusContract è§„èŒƒçš„ C# DTOï¼ˆæ•°æ®ä¼ è¾“å¯¹è±¡ï¼‰ã€‚AI çš„è¡¨ç°å ªç§°å®Œç¾ï¼Œç¬é—´åå‡ºäº†ç»“æ„æ¸…æ™°çš„ä»£ç ï¼š</p>\n<pre><code class=\"language-csharp\">public string ReceiverId { get; set; } // æ”¶æ¬¾æ–¹ID\n\n</code></pre>\n<p>ä»£ç çœ‹ç€æ²¡æ¯›ç—…ï¼Œå‘½åä¹Ÿè§„èŒƒã€‚æˆ‘æ»¡æ€€ä¿¡å¿ƒåœ°å¯åŠ¨æœåŠ¡ï¼Œå¼€å§‹<strong>æœ¬åœ°è”è°ƒ</strong>ã€‚</p>\n<p><strong>ç»“æœï¼Œæ¥å£æ­»æ´»ä¸é€šã€‚</strong></p>\n<p>ä¸Šæ¸¸ç½‘å…³ä¸€ç›´è¿”å›å†·å†°å†°çš„é”™è¯¯ï¼š<code>PARAMETER_MISSING</code>ã€‚</p>\n<p>è¿™å°±å¾ˆé‚ªé—¨äº†ã€‚<br />\næˆ‘æ‰“äº†æ–­ç‚¹ï¼Œæ•°æ®åœ¨ï¼›<br />\næŠ“äº†åŒ…ï¼ŒJSON å­—æ®µä¹Ÿæœ‰ï¼›<br />\næˆ‘è‚‰çœ¼æ£€æŸ¥äº†ä¸‰éï¼Œ<code>ReceiverId</code> æ‹¼å†™ç»å¯¹æ²¡é—®é¢˜ï¼›<br />\næˆ‘åˆè®© AI æ£€æŸ¥äº†ä¸€éä»£ç ï¼Œå®ƒä¹Ÿä¿¡èª“æ—¦æ—¦åœ°è¯´æ²¡æœ‰è¯­æ³•é”™è¯¯ã€‚</p>\n<p><strong>æ•´æ•´ä¸¤ä¸ªå°æ—¶ï¼Œæˆ‘å°±å¡åœ¨è¿™ä¸ªè«åå…¶å¦™çš„é”™è¯¯ä¸Šï¼Œç”šè‡³å¼€å§‹æ€€ç–‘æ˜¯ä¸æ˜¯ HTTP åè®®å¤´çš„é—®é¢˜ï¼Œæˆ–è€…æ˜¯ JSON åºåˆ—åŒ–åº“çš„ Bugã€‚</strong></p>\n<p>ç›´åˆ°æˆ‘å®åœ¨æ²¡æ‹›äº†ï¼Œå†æ¬¡æ‰“å¼€é‚£ä»½æ–‡æ¡£ï¼Œå¼ºè¿«è‡ªå·±ä¸€ä¸ªå­—æ¯ä¸€ä¸ªå­—æ¯åœ°è·Ÿæˆ‘çš„ä»£ç æ¯”å¯¹æ—¶ï¼Œæˆ‘æ‰å‘ç°äº†ä¸€ä¸ªä»¤äººçª’æ¯çš„ç»†èŠ‚ï¼š</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/45234/202601/45234-20260114141433336-590884100.png\" /></p>\n<p><strong>æ–‡æ¡£é‡Œå†™çš„å­—æ®µåï¼Œæ˜¯ <code>recieverId</code>ã€‚</strong></p>\n<p>æ³¨æ„åˆ°äº†å—ï¼Ÿ<strong><code>i</code> å’Œ <code>e</code> å†™åäº†ï¼</strong></p>\n<p>æ­£ç¡®çš„è‹±è¯­å•è¯æ˜¯ <code>Receiver</code>ï¼ˆc åé¢æ¥ eiï¼‰ï¼Œä½†æ–‡æ¡£é‡Œå†™æˆäº† <code>Reciever</code>ï¼ˆieï¼‰ã€‚è¿™ç§â€œé•¿å¾—æåƒâ€çš„é”™è¯¯ï¼Œæå…¶å®¹æ˜“å‘ç”Ÿè§†é”™è§‰ã€‚</p>\n<p>é‚£ä¸€åˆ»æˆ‘ç®€ç›´æƒ³æ‘”é”®ç›˜ï¼š<strong>AI å¤ªâ€œèªæ˜â€äº†ã€‚</strong> å®ƒè¯†åˆ«å‡ºè¿™æ˜¯â€œæ”¶æ¬¾æ–¹â€çš„æ„æ€ï¼Œå‘ç°äº†è¿™ä¸ªè¯­æ³•é”™è¯¯ï¼Œäºæ˜¯<strong>å¥½å¿ƒåœ°åœ¨ç”Ÿæˆä»£ç æ—¶å¸®æˆ‘æŠŠå®ƒâ€œæ”¹å¯¹â€äº†</strong>ã€‚è€Œæˆ‘ï¼Œä½œä¸ºä¸€ä¸ªæ­£å¸¸çš„äººç±»ç¨‹åºå‘˜ï¼Œå¤§è„‘ä¹Ÿè‡ªåŠ¨è¿‡æ»¤äº†è¿™ä¸ªæ‹¼å†™é”™è¯¯ã€‚</p>\n<p>åœ¨é—ç•™ç³»ç»Ÿçš„é›†æˆä¸­ï¼Œ<strong>â€œå†å²çš„é”™è¯¯â€å¾€å¾€æ¯”â€œæ­£ç¡®çš„è¯­æ³•â€æ›´é‡è¦</strong>ã€‚</p>\n<h2 id=\"2-æ¶æ„çš„åå‡»ä»£ç æ´ç™–ä¸è‚®è„ç°å®\">2. æ¶æ„çš„åå‡»ï¼šä»£ç æ´ç™–ä¸è‚®è„ç°å®</h2>\n<p>é¢å¯¹è¿™ç§åœºæ™¯ï¼Œä¼ ç»Ÿåšæ³•é€šå¸¸æœ‰ä¸¤ç§ï¼š</p>\n<ol>\n<li><strong>åŒæµåˆæ±¡æ´¾ï¼š</strong> ç›´æ¥æŠŠ C# å±æ€§åä¹Ÿå†™é”™ã€‚</li>\n</ol>\n<pre><code class=\"language-csharp\">public string RecieverId { get; set; } // çœ‹ç€å°±éš¾å—ï¼Œé€¼æ­»å¼ºè¿«ç—‡\n\n</code></pre>\n<p>è¿™æœ‰ä¸ªå·¨å¤§çš„éšæ‚£ï¼šæ–°æ¥çš„åŒäº‹æˆ–è€…åæ¥ç»´æŠ¤çš„ AIï¼Œçœ‹åˆ°è¿™ä¸ªâ€œé”™è¯¯æ‹¼å†™â€ï¼Œå¾ˆæœ‰å¯èƒ½ä¼šé¡ºæ‰‹æŠŠå®ƒâ€œä¿®å¤â€æˆæ­£ç¡®çš„ <code>ReceiverId</code>ï¼Œç„¶å<strong>ç °ï¼ç³»ç»ŸåˆæŒ‚äº†ã€‚</strong><br />\n2. <strong>æ‰‹åŠ¨æ˜ å°„æ´¾ï¼š</strong> åœ¨ä¸šåŠ¡ä»£ç é‡Œæ‰‹åŠ¨å†™ <code>json[\"recieverId\"] = request.ReceiverId</code>ã€‚<br />\nè¿™ä¼šå¯¼è‡´ä¸šåŠ¡é€»è¾‘é‡Œå……æ–¥ç€å¤§é‡çš„å­—ç¬¦ä¸²ç¡¬ç¼–ç ï¼Œç»´æŠ¤æˆæœ¬æé«˜ã€‚</p>\n<p><strong>NexusContract çš„å“²å­¦æ˜¯ï¼š</strong> æˆ‘ä»¬æ”¹å˜ä¸äº†å¤–éƒ¨ä¸–ç•Œçš„â€œæ–‡ç›²â€æ‹¼å†™ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡æ¶æ„æ‰‹æ®µï¼Œä¸è®©è¿™äº›â€œè„ä¸œè¥¿â€æ±¡æŸ“æˆ‘ä»¬çš„æ ¸å¿ƒä»£ç ã€‚</p>\n<p>æˆ‘ä»¬é‡‡ç”¨äº† <strong>[ApiField]</strong> ç‰¹æ€§æ¥å®ç° <strong>ç‰©ç†éš”ç¦»</strong>ï¼š</p>\n<pre><code class=\"language-csharp\">[ApiOperation(\"payment.gateway.pay\", HttpVerb.POST)]\npublic class PaymentRequest : IApiRequest\n{\n    // ç»™å¯¹æ–¹çœ‹çš„ï¼ˆå¿…é¡»é”™ï¼‰ï¼šæ˜ å°„åˆ°é‚£ä¸ªæŠŠ ie å†™åçš„è„å­—æ®µ\n    [ApiField(\"recieverId\", IsRequired = true)]\n    \n    // ç»™è‡ªå·±çœ‹çš„ï¼ˆå¿…é¡»å¯¹ï¼‰ï¼šä¿æŒå†…éƒ¨é¢†åŸŸè¯­è¨€çš„çº¯æ´æ€§\n    public string ReceiverId { get; set; }\n}\n\n</code></pre>\n<p>è¿™ä¸ä»…æ˜¯ç®€å•çš„é‡å‘½åï¼Œè¿™æ˜¯ <strong>è¯­ä¹‰è§£è€¦ (Semantic Decoupling)</strong>ã€‚</p>\n<ul>\n<li><strong>å±æ€§å (Property):</strong> æœåŠ¡äºå†…éƒ¨é€»è¾‘ï¼Œä½¿ç”¨ <strong>Ubiquitous Language (é€šç”¨è¯­è¨€)</strong>ï¼Œå¿…é¡»æ­£ç¡®ã€å¯è¯»ã€‚</li>\n<li><strong>ç‰¹æ€§å (Attribute):</strong> æœåŠ¡äºå¤–éƒ¨å¥‘çº¦ï¼Œæ˜¯å¯¹å†å²äº‹å®çš„ <strong>å¿«ç…§</strong>ï¼Œå¿…é¡»çœŸå®ã€å“ªæ€•æ˜¯é”™çš„ã€‚</li>\n</ul>\n<h2 id=\"3-æ·±åº¦è§£å¯†nexuscontractcore-çš„é»‘ç›’\">3. æ·±åº¦è§£å¯†ï¼šNexusContract.Core çš„é»‘ç›’</h2>\n<p>è¿™æ—¶ä½ å¯èƒ½ä¼šé—®ï¼š<em>â€œå¸‚é¢ä¸Šå¾ˆå¤š JSON åº“éƒ½æœ‰ <code>JsonProperty</code>ï¼Œè¿™æœ‰ä»€ä¹ˆç¨€å¥‡çš„ï¼Ÿâ€</em></p>\n<p>åŒºåˆ«åœ¨äº <strong>å¤„ç†æ—¶æœº</strong> å’Œ <strong>ç¡®å®šæ€§</strong>ã€‚</p>\n<p>NexusContract åœ¨ <strong>ç³»ç»Ÿå¯åŠ¨ (Startup)</strong> æ—¶ï¼Œä¼šæ‰§è¡Œä¸€ä¸ª <strong>[å†³ç­– A-301] å…ƒæ•°æ®å†·å†» (Metadata Freezing)</strong> æµç¨‹ã€‚</p>\n<p>è™½ç„¶æ¡†æ¶åœ¨å¯åŠ¨æ—¶æ— æ³•çŸ¥é“å¤–éƒ¨æ¥å£åˆ°åº•å« <code>recieverId</code> è¿˜æ˜¯ <code>receiverId</code>ï¼ˆé™¤éæˆ‘ä»¬æœ‰ Schema æ–‡ä»¶ï¼‰ï¼Œä½†å®ƒåšäº†ä¸€ä»¶æ›´é‡è¦çš„äº‹ï¼š<strong>ç¡®ç«‹å¥‘çº¦çš„ç»å¯¹æƒå¨</strong>ã€‚</p>\n<h3 id=\"æ ¸å¿ƒä»£ç å±•ç¤º\">æ ¸å¿ƒä»£ç å±•ç¤º</h3>\n<pre><code class=\"language-csharp\">// Copyright (c) 2026 NexusContract. All rights reserved.\n\nusing System.Collections.Concurrent;\nusing System.Reflection;\nusing NexusContract.Abstractions.Exceptions;\n\nnamespace NexusContract.Core.Reflection\n{\n    /// &lt;summary&gt;\n    /// ã€å†³ç­– A-301ã€‘NexusContractMetadataRegistryï¼ˆå¥‘çº¦å…ƒæ•°æ®æ³¨å†Œè¡¨ï¼‰\n    /// \n    /// æ ¸å¿ƒèŒèƒ½ï¼š\n    /// 1. å‘ç°ï¼ˆDiscoveryï¼‰ï¼šå¯åŠ¨æ—¶æ‰«ææ‰€æœ‰å¥‘çº¦ç±»çš„ Attribute ç»“æ„\n    /// 2. éªŒè¯ï¼ˆValidationï¼‰ï¼šæ‰§è¡Œ ContractValidator ç¡®ä¿å†…éƒ¨çº¦æŸï¼ˆå¦‚ Getter/Setter å®Œæ•´æ€§ï¼‰\n    /// 3. å†»ç»“ï¼ˆFreezingï¼‰ï¼šå°†åå°„ç»“æœè½¬ä¸ºä¸å¯å˜å¯¹è±¡ï¼Œè¿è¡ŒæœŸé›¶åå°„æŸè€—\n    /// &lt;/summary&gt;\n    public sealed class NexusContractMetadataRegistry\n    {\n        // å•ä¾‹æ¨¡å¼ï¼šç¡®ä¿å…¨å±€å”¯ä¸€æ³¨å†Œè¡¨\n        private static readonly Lazy&lt;NexusContractMetadataRegistry&gt; _instance = new(() =&gt; new NexusContractMetadataRegistry());\n        public static NexusContractMetadataRegistry Instance =&gt; _instance.Value;\n\n        // ã€å†³ç­– A-302ã€‘æ ¸å¿ƒå†·å†»åº“\n        // Key: å¥‘çº¦ç±»å‹, Value: é¢„ç¼–è¯‘å¥½çš„å…ƒæ•°æ®ï¼ˆåŒ…å« Expression Tree å§”æ‰˜ï¼‰\n        private readonly ConcurrentDictionary&lt;Type, ContractMetadata&gt; _cache = new();\n\n        private NexusContractMetadataRegistry() { }\n\n        /// &lt;summary&gt;\n        /// ã€å†³ç­– A-308ã€‘å¯åŠ¨æœŸä½“æ£€ï¼ˆStartup Health Checkï¼‰\n        /// è¿™ä¸æ˜¯ç®€å•çš„åŠ è½½ï¼Œè€Œæ˜¯ä¸€æ¬¡å…¨é‡çš„â€œCTæ‰«æâ€ã€‚\n        /// ç¡®ä¿æ‰€æœ‰å¥‘çº¦åœ¨ç‰©ç†ä¸Šæ˜¯åˆæ³•çš„ï¼ˆä¾‹å¦‚é˜²æ­¢ Attribute é‡å¤å®šä¹‰ï¼‰ã€‚\n        /// &lt;/summary&gt;\n        public DiagnosticReport Preload(IEnumerable&lt;Type&gt; types)\n        {\n            var globalReport = new DiagnosticReport();\n\n            foreach (var type in types)\n            {\n                // 1. é™æ€éªŒè¯ï¼ˆå­—æ®µæ‹¼å†™ã€Attribute å†²çªç­‰ï¼‰\n                var perTypeReport = new DiagnosticReport();\n                ContractValidator.Validate(type, perTypeReport);\n\n                // 2. å¦‚æœéªŒè¯é€šè¿‡ï¼Œæ„å»ºä¸å¯å˜å…ƒæ•°æ®\n                if (!perTypeReport.HasErrors)\n                {\n                    try \n                    {\n                        var metadata = BuildMetadata(type, perTypeReport);\n                        _cache.TryAdd(type, metadata); // å†»ç»“å…¥åº“\n                    }\n                    catch (Exception ex)\n                    {\n                        perTypeReport.AddCritical(type.Name, $\"Metadata freeze failed: {ex.Message}\");\n                    }\n                }\n                globalReport.Merge(perTypeReport);\n            }\n            return globalReport; // è¿”å›ä½“æ£€æŠ¥å‘Š\n        }\n\n        /// &lt;summary&gt;\n        /// æ„å»ºå…ƒæ•°æ®æ ¸å¿ƒæµï¼šå®¡è®¡ -&gt; ç¼–è¯‘ -&gt; å°è£…\n        /// &lt;/summary&gt;\n        private ContractMetadata BuildMetadata(Type type, DiagnosticReport report)\n        {\n            // ... (çœç•¥éƒ¨åˆ†ä»£ç ) ...\n\n            // ã€å†³ç­– A-309ã€‘å¯ç”¨ Expression Tree é¢„ç¼–è¯‘ï¼ˆçœŸæ­£é›¶åå°„ï¼‰\n            // å°†åå°„è¯»å†™è½¬æ¢ä¸ºå¼ºç±»å‹å§”æ‰˜ï¼Œæ€§èƒ½æå‡ 10 å€\n            var projector = ContractMetadataCompiler.CompileProjector(type, propertyMetadatas);\n            var hydrator = ContractMetadataCompiler.CompileHydrator(type, propertyMetadatas);\n\n            return new ContractMetadata(type, opAttr, propertyMetadatas.AsReadOnly(), projector, hydrator);\n        }\n    }\n}\n\n</code></pre>\n<h3 id=\"æŠ€æœ¯åŸç†è§£è¯»\">æŠ€æœ¯åŸç†è§£è¯»</h3>\n<p><strong>ä¸ºä»€ä¹ˆè¿™å¯¹æ’æŸ¥ Bug å¾ˆæœ‰ç”¨ï¼Ÿ</strong></p>\n<p>è™½ç„¶ <code>PARAMETER_MISSING</code> æ˜¯åœ¨è¿è¡Œæ—¶æŠ¥å‡ºæ¥çš„ï¼Œä½† NexusContract çš„æœºåˆ¶ä¿è¯äº†<strong>ä¿®å¤çš„å»‰ä»·æ€§ä¸ç¡®å®šæ€§</strong>ã€‚</p>\n<ol>\n<li><strong>Expression Tree é¢„ç¼–è¯‘ï¼š</strong><br />\nä¸€æ—¦æˆ‘ä»¬åœ¨ Attribute é‡ŒæŠŠåå­—ä¿®æ­£ä¸º <code>[ApiField(\"recieverId\")]</code>ï¼Œæ¡†æ¶åœ¨ä¸‹æ¬¡å¯åŠ¨æ—¶ï¼Œä¼šé€šè¿‡ <strong>Expression Tree</strong> æŠŠè¿™ä¸ªæ˜ å°„å…³ç³»ç¼–è¯‘æˆé«˜æ•ˆçš„ Delegateã€‚<br />\nè¿™æ„å‘³ç€ï¼šå³ä½¿ä¸ºäº†å…¼å®¹è€æ¥å£è€ŒåŠ äº† Attributeï¼Œ<strong>è¿è¡Œæ—¶æ€§èƒ½ä¾ç„¶ç­‰åŒäºæ‰‹å†™ä»£ç </strong>ï¼Œå®Œå…¨æ²¡æœ‰åå°„çš„é¢å¤–å¼€é”€ã€‚</li>\n<li><strong>å¥‘çº¦çš„æ˜¾å¼åŒ–ï¼š</strong><br />\nè¿™ç§å†™æ³•å¼ºè¿«å¼€å‘è€…å»ç¡®è®¤æ¯ä¸€ä¸ªå­—æ®µçš„æ˜ å°„å…³ç³»ã€‚ä»£ç é‡Œçš„ <code>[ApiField]</code> å°±åƒä¸€ä¸ªä¸ªè­¦ç¤ºç‰Œï¼Œæ—¶åˆ»æé†’ç€åæ¥è€…ï¼š<strong>â€œæ³¨æ„ï¼Œè¿™é‡Œæœ‰ä¸ªå‘ï¼Œåˆ«åŠ¨ï¼â€</strong></li>\n</ol>\n<h2 id=\"4-ç»“è¯­\">4. ç»“è¯­</h2>\n<p>ä»¥å‰æˆ‘ä»¬æ€• AI çç¼–ä»£ç ï¼ˆå¹»è§‰ï¼‰ï¼Œç°åœ¨æˆ‘ä»¬æ€• AI <strong>ä»£ç å†™å¾—å¤ªå¯¹</strong>ã€‚</p>\n<p>é¢å¯¹æŸè”ã€æŸé“¶è¡Œã€æŸæ”¯ä»˜é‚£äº›åå‡ å¹´å‰çš„â€œè€ƒå¤çº§â€æ¥å£ï¼ŒAI è¿™ç§æ‹¿ç‰›æ´¥è¯å…¸å½“æ ‡å‡†çš„â€œé«˜æç”Ÿâ€æ ¹æœ¬æ°´åœŸä¸æœã€‚å®ƒä¸çŸ¥é“ <code>recieverId</code> åœ¨è¿™é‡Œä¸æ˜¯æ‹¼å†™é”™è¯¯ï¼Œå®ƒæ˜¯<strong>æ³•å¾‹</strong>ï¼Œæ˜¯<strong>ä¸å¯åŠ¨æ‘‡çš„å¥‘çº¦</strong>ã€‚</p>\n<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ NexusContract â€”â€” <strong>å®ƒå…è®¸æˆ‘ä»¬åœ¨ä»£ç é‡Œä¼˜é›…åœ°â€œæŒ‡é¹¿ä¸ºé©¬â€ï¼Œå¹¶ç”¨æœ€åº•å±‚çš„æŠ€æœ¯æ‰‹æ®µï¼ˆå…ƒæ•°æ®å†·å†»ï¼‰ï¼Œå°†è¿™ä»½â€œè‚®è„çš„ç°å®â€é«˜æ€§èƒ½åœ°å°è£…èµ·æ¥ã€‚</strong></p>\n<hr />\n\n</div>\n<div id=\"MySignature\">\n    <p>______________________________________<br />ç”Ÿæ´»ï¼Œè¦ç”¨åœ£äººçš„èƒ¸æ€€é¢å¯¹ï¼Œç”¨ç§‘å­¦çš„æ–¹æ³•æ”¯é…ï¼Œ <br />&nbsp; &nbsp; &nbsp; &nbsp; ç”¨çš‡å¸çš„å¾¡è†³å…»èƒƒï¼Œç”¨æ¸…æ´çš„ç©ºæ°”æ´—è‚ºï¼Œ <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ç”¨å°çŒªçš„æ„Ÿè§‰å»ç¡ï¼Œç”¨å¤ªé˜³çš„çƒ­æƒ…çŒæ°´ã€‚<br />______________________________________</p>\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-14 14:19</span>&nbsp;\n<a href=\"https://www.cnblogs.com/jieky\">æ¶ˆå¤±è€…</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">199</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    }
  ]
}