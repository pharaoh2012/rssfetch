{
  "title": "ä¸»é¡µ - åšå®¢å›­",
  "link": "https://www.cnblogs.com/",
  "description": "ä¸»é¡µ - åšå®¢å›­ RSS",
  "entries": [
    {
      "title": "nginx locationæ²¡å­¦å¥½ï¼ŒæŠŠè‡ªå·±å‘äº†ä¸€æŠŠ",
      "link": "https://www.cnblogs.com/grey-wolf/p/19560342",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/grey-wolf/p/19560342\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-02-01 11:28\">\n    <span>nginx locationæ²¡å­¦å¥½ï¼ŒæŠŠè‡ªå·±å‘äº†ä¸€æŠŠ</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h1 id=\"èƒŒæ™¯\">èƒŒæ™¯</h1>\n<p>å‰å‡ å¤©åœ¨éƒ¨ç½²ä¸€å¥—ç¯å¢ƒçš„æ—¶å€™ï¼Œæ¶‰åŠnginxè¿™å—ï¼Œå½“æ—¶ä»¥ä¸ºåˆ†åˆ†é’Ÿæå®šï¼Œæ²¡ç›¸å¯¹è¿˜è´¹äº†å¥½äº›åŠŸå¤«ï¼Œç”šè‡³ä»¥ä¸ºæ˜¯nginxçš„bugäº†ã€‚</p>\n<p>æˆ‘å…ˆä¸Šä¸ªå›¾ï¼š</p>\n<p>æˆ‘ä»¬æœ‰ä¸ªæ ¡ä¼åˆä½œçš„é¡¹ç›®ï¼Œç”±äºé¡¹ç›®çš„å‚ä¸æ–¹æ¶‰åŠå­¦æ ¡å­¦ç”Ÿï¼Œç½‘ç»œå› æ­¤æ˜¯å•ç‹¬åˆ’äº†ä¸€ä¸ªåŒºåŸŸï¼Œå°±ç›¸å½“äºä¸€ä¸ªç‹¬ç«‹ç½‘æ®µï¼Œé‡Œé¢æœ‰å­¦ç”ŸåŠå…¬pcã€linuxæœåŠ¡å™¨ç­‰ç­‰ã€‚æˆ‘ä»¬è¿™æ¬¡ç»„é‡Œå¼€å‘äº†ä¸€ä¸ªå°çš„å‰åç«¯åˆ†ç¦»é¡¹ç›®ï¼Œå¼€å‘å®Œäº†åï¼Œæˆ‘å°±å‡†å¤‡éƒ¨ç½²ã€‚</p>\n<p>éƒ¨ç½²çš„è¯ï¼Œæˆ‘æ˜¯é€šè¿‡ç±»ä¼¼äºwindowsè¿œç¨‹æ¡Œé¢çš„æœºåˆ¶ï¼ˆå®é™…æ˜¯æŸå‚å•†çš„VDIï¼Œç›¸æ¯”äºwindowsè¿œç¨‹æ¡Œé¢ï¼Œåº”è¯¥æ˜¯å¤šäº†æ›´å¤šæ–‡ä»¶è¿›å‡ºçš„ç®¡æ§æœºåˆ¶ï¼Œæ¯”å¦‚æ²¡æƒé™çš„è¯ï¼Œè¿œç¨‹ä¸»æœºé‡Œçš„æ–‡ä»¶é»˜è®¤æ˜¯æ‹·è´ä¸å‡ºæ¥çš„ï¼‰ã€‚</p>\n<p>é€šè¿‡è¿œç¨‹æ¡Œé¢è¿›å…¥è¿œç¨‹windowsåï¼Œåœ¨é‡Œé¢å†sshè¿æ¥linuxæœåŠ¡å™¨ï¼Œåœ¨ä¸Šé¢éƒ¨ç½²nginxã€å‰ç«¯åŒ…ï¼Œç”±äºæœåŠ¡å™¨æœ‰é™ï¼Œç›´æ¥æŠŠåç«¯spring bootåŒ…ä¹Ÿæ˜¯éƒ¨ç½²åœ¨äº†è¿™ä¸€å°æœºå™¨ä¸Šï¼Œæ¶æ„å¦‚ä¸‹ã€‚</p>\n<p><img alt=\"image-20260201104040556\" src=\"https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260201104040556.png\" /></p>\n<p>åˆšå¼€å§‹éƒ¨ç½²å®Œæˆåï¼Œåº”ç”¨æœåŠ¡å™¨ä¸Šï¼ˆå‡è®¾ipä¸º1.1.1.1ï¼‰çš„nginxï¼Œç›‘å¬80ç«¯å£ï¼Œé‚£ä¹ˆï¼Œåœ¨è¿œç¨‹windowsä¸Šçš„æµè§ˆå™¨ï¼Œæ˜¯å¯ä»¥è®¿é—®ï¼šhttp://1.1.1.1:80æ¥æ‰“å¼€ç³»ç»Ÿçš„ï¼Œä½†æ˜¯ï¼Œåœ¨æˆ‘çš„åŠå…¬pcä¸Šä¸è¡Œã€‚</p>\n<p>ç”±äºè¿™ç§ä¸€èˆ¬æ˜¯éœ€è¦ç»™é¢†å¯¼æ¼”ç¤ºçš„ï¼Œé‚£è‡ªç„¶è¦æŠŠ1.1.1.1:80ç«¯å£æš´éœ²å‡ºæ¥ï¼Œè®©åŠå…¬pcç½‘ç»œå¯ä»¥è®¿é—®ã€‚ä¸ºäº†å®‰å…¨èµ·è§ï¼Œè¿™ç§ä¸€èˆ¬åªå¼€æ”¾å¿…è¦çš„ç«¯å£ï¼Œå¦‚ä¸Šé¢å°±åªå¼€æ”¾80ç«¯å£ã€‚å°±åƒæˆ‘ä»¬å¹³æ—¶ç³»ç»Ÿå¯¹äº’è”ç½‘ä»…å¼€æ”¾443ç«¯å£ä¸€æ ·ã€‚</p>\n<h1 id=\"é—®é¢˜\">é—®é¢˜</h1>\n<p>ç”±äºç‰ˆæœ¬åˆšå¼€å§‹ä¸ç¨³å®šï¼Œè‡ªç„¶æ˜¯ä¼šå‘ç°ä¸€äº›bugï¼Œå‘ç°bugå°±éœ€è¦çœ‹æ—¥å¿—ï¼Œæˆ‘ä»¬è¿™è¾¹çœ‹æ—¥å¿—è¿˜æ˜¯æ¯”è¾ƒåŸå§‹çš„ï¼Œä¹Ÿæ²¡æä»€ä¹ˆelkè¿™ç±»ã€‚spring bootæœåŠ¡çš„æ—¥å¿—ï¼Œå°±åœ¨ä¸Šè¿°çš„1.1.1.1è¿™å°æœåŠ¡å™¨çš„ç‰¹å®šç›®å½•ä¸‹ï¼Œæˆ‘å°±æƒ³ç€ï¼Œé€šè¿‡80ç«¯å£ï¼Œnginxé‡Œé¢å†é…ä¸ªlocationï¼ŒæŠŠlogæš´éœ²å‡ºæ¥ï¼Œæ–¹ä¾¿ç»„å†…åŒäº‹çœ‹æ—¥å¿—ï¼Œåº”è¯¥æ›´æ–¹ä¾¿ä¸€äº›ã€‚</p>\n<p>åŸå§‹çš„nginxé…ç½®å¦‚ä¸‹ï¼Œå°±ä¸€ä¸ªå‰åç«¯åˆ†ç¦»çš„é…ç½®ï¼š</p>\n<pre><code class=\"language-shell\">server {\n    listen 80;\n    server_name localhost;\n    location / {\n        root /usr/local/nginx/html/quantify-trade-platform-frontend/dist;\n        index index.html  index.htm;\n        try_files $uri $uri/ /index.html;\n    }\n    location ~ /quantify-trade-platform-admin {\n        proxy_pass http://localhost:8093;\n   }\n}\n</code></pre>\n<p>æˆ‘ä»¬javaæœåŠ¡å‘¢ï¼Œæ—¥å¿—æ˜¯åœ¨:</p>\n<p>/opt/quantify-trade-platform-admin/quantify-trade-platform-admin-0.1-SNAPSHOT/logs</p>\n<p><img alt=\"image-20260201105400498\" src=\"https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260201105400498.png\" /></p>\n<p>æ‰€ä»¥ï¼Œæˆ‘å°±åŠ äº†ä¸€æ®µé…ç½®ï¼š</p>\n<pre><code class=\"language-shell\">    location /mylog/ {\n      alias /opt/quantify-trade-platform-admin/quantify-trade-platform-admin-0.1-SNAPSHOT/logs/;\n      autoindex on;\n    }\n</code></pre>\n<p>å®Œæ•´å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"language-shell\">    server {\n        listen 80;\n        server_name localhost;\n        location / {\n            root /usr/local/nginx/html/quantify-trade-platform-frontend/dist;\n            index index.html  index.htm;\n            try_files $uri $uri/ /index.html;\n        }\n        location ~ /quantify-trade-platform-admin {\n            proxy_pass http://localhost:8093;\n        }\n\t\t-- æ–°å¢å¦‚ä¸‹:\n\t    location /mylog/ {\n\t      alias /opt/quantify-trade-platform-admin/quantify-trade-platform-admin-0.1-SNAPSHOT/logs/;\n          autoindex on;\n        }\n   }\n</code></pre>\n<p>åŠ å¥½åï¼Œæˆ‘è¯•äº†ä¸‹, <a href=\"http://1.1.1.1/mylog/%EF%BC%8C%E5%8F%AF%E4%BB%A5%E6%AD%A3%E5%B8%B8%E8%AE%BF%E9%97%AE%EF%BC%9A%EF%BC%88%E5%AE%9E%E9%99%85%E4%B8%8A%EF%BC%8C%E6%8A%98%E8%85%BE%E8%BF%99%E4%B8%AAautoindex%E8%BF%99%E4%B8%AAlocation%EF%BC%8C%E4%B9%9F%E8%8A%B1%E4%BA%86%E4%B8%8D%E5%B0%91%E6%97%B6%E9%97%B4%EF%BC%8C%E8%A6%81%E4%B8%8D%E8%A6%81%E5%8A%A0/%E4%B9%8B%E7%B1%BB%E7%9A%84%EF%BC%89\" rel=\"noopener nofollow\" target=\"_blank\">http://1.1.1.1/mylog/ï¼Œå¯ä»¥æ­£å¸¸è®¿é—®ï¼šï¼ˆå®é™…ä¸Šï¼ŒæŠ˜è…¾è¿™ä¸ªautoindexè¿™ä¸ªlocationï¼Œä¹ŸèŠ±äº†ä¸å°‘æ—¶é—´ï¼Œè¦ä¸è¦åŠ /ä¹‹ç±»çš„ï¼‰</a></p>\n<p><img alt=\"image-20260201105622188\" src=\"https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260201105622188.png\" /></p>\n<p>ä½†æ˜¯å‘¢ï¼Œæˆ‘åœ¨ç‚¹å‡»é‡Œé¢çš„æ–‡ä»¶çš„æ—¶å€™ï¼Œå‘ç°æŠ¥404ï¼š</p>\n<p><a href=\"http://1.1.1.1/mylog/quantify-trade-platform-admin.log\" rel=\"noopener nofollow\" target=\"_blank\">http://1.1.1.1/mylog/quantify-trade-platform-admin.log</a></p>\n<p><img alt=\"image-20260201105804252\" src=\"https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260201105804252.png\" /></p>\n<p>è¿™ä¸ªé—®é¢˜æŠŠæˆ‘æŠ˜è…¾çš„å¤Ÿå‘›ï¼Œæˆ‘ä¸€ç›´ä»¥ä¸ºæ˜¯æˆ‘autoindexè¿™å—ï¼Œæ˜¯ä¸æ˜¯å“ªé‡Œé…ç½®æ²¡å¯¹ï¼Œå°±è¿™ä¸ªåœ°æ–¹ï¼Œåå¤æŠ˜è…¾ï¼Œåå¤æŠ˜è…¾ï¼š</p>\n<pre><code class=\"language-shell\">location /mylog/ {\n  alias /opt/quantify-trade-platform-admin/quantify-trade-platform-admin-0.1-SNAPSHOT/logs/;\n  autoindex on;\n}\n</code></pre>\n<p>å¿«ä¸‹ç­çš„æ—¶å€™ï¼Œæˆ‘å‘ç°å¦‚æœæˆ‘æŠŠadminæ”¹æˆaminã€adinï¼Œå°±æ‹¼é”™ä¸€ä¸¤ä¸ªå­—æ¯ï¼Œå°±èƒ½ä¸‹è½½ä¸‹æ¥äº†ã€‚å½“æ—¶ä»¥ä¸ºï¼Œæ˜¯autoindexè¿™ç§é™æ€æ–‡ä»¶æœºåˆ¶ï¼Œä¼šä¸ä¼šæ˜¯ä¸ºäº†å®‰å…¨è€ƒè™‘ï¼Œæ–‡ä»¶ååŒ¹é…åˆ°adminè¿™ä¸ªå…³é”®å­—å•¥çš„ï¼Œå°±404.</p>\n<p><img alt=\"image-20260201110908710\" src=\"https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260201110908710.png\" /></p>\n<p>ä½†åé¢ï¼Œæˆ‘æŠŠlogæ‹·è´ä¸€ä¸‹ï¼Œå»æ‰ä¸­é—´çš„ä¸­åˆ’çº¿ï¼Œä¹Ÿå¯ä»¥ä¸‹è½½ä¸‹æ¥ï¼š</p>\n<p><img alt=\"image-20260201110108269\" src=\"https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260201110108269.png\" /></p>\n<p>ç„¶åç½‘ä¸Šä¸€é¡¿ä¹±æœï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯ä¸­åˆ’çº¿å¯¼è‡´çš„é—®é¢˜å•¥çš„ï¼Œæˆ–è€…æ˜¯å› ä¸ºå«æœ‰adminå…³é”®å­—å¯¼è‡´çš„ï¼Œç»“æœéƒ½æ²¡æŸ¥åˆ°æœ‰äººé‡åˆ°è¿™ç§é—®é¢˜ã€‚</p>\n<p>ä¸€é¡¿æœç´¢çŒ›å¦‚è™ï¼Œä»¥ä¸ºæ˜¯nginxçš„ä»€ä¹ˆå°bugï¼ˆå½“æ—¶æ„Ÿè§‰autoindexè¿™ç§é™æ€æ–‡ä»¶æœºåˆ¶ï¼Œå¯èƒ½ç”¨çš„äººå°‘ï¼Œæ˜¯ä¸æ˜¯æœ‰å•¥å°bugæ­£å¥½è¢«æˆ‘æ’è§äº†ï¼‰</p>\n<h1 id=\"æ¬¡æ—¥æ’æŸ¥\">æ¬¡æ—¥æ’æŸ¥</h1>\n<p>ç¬¬äºŒå¤©æ—©ä¸Šæ¥äº†åï¼Œæ‰¾äº†å°æœåŠ¡å™¨ï¼Œæ–°æ­å»ºï¼Œç»“æœå‘ç°admin.txtå¯ä»¥æ­£å¸¸ä¸‹è½½ï¼Œä¸ºå•¥åœ¨é‚£å°æœºå™¨ä¸Šå°±ä¸è¡Œå‘¢ï¼Ÿ</p>\n<p>æˆ‘æƒ³èµ·æ¥straceå‘½ä»¤ï¼Œé‚£å°±çœ‹çœ‹æœ‰æ²¡æœ‰çº¿ç´¢å§ï¼š</p>\n<pre><code class=\"language-shell\">strace -p 121920 -s 1000  -t -e trace=network,file,desc,process\n</code></pre>\n<p>ç»“æœè¯·æ±‚http://1.1.1.1/mylog/quantify-trade-platform-admin.log æ—¶ï¼Œå‘ç°ä¿¡æ¯æ˜¾ç¤ºå‡ºï¼šå‘èµ·äº†socketæ“ä½œï¼Œè¯·æ±‚äº†springbootæœåŠ¡çš„ç«¯å£ã€‚</p>\n<p>å½“æ—¶å¾ˆå¥‡æ€ªï¼Œç¬¬ä¸€æ¬¡è¿˜æ²¡æ”¾åˆ°å¿ƒä¸Šï¼Œç„¶åå¤æµ‹äº†ä¸€éï¼Œå‘ç°è¿˜æ˜¯è¿™æ ·ã€‚ç„¶åå°±å“ŸtcpdumpæŠ“äº†ä¸ªåŒ…ï¼Œå’¦ï¼Œè¿™ä¸ªæ—¥å¿—æ–‡ä»¶çš„è¯·æ±‚æ€ä¹ˆè¢«å‘åˆ°åç«¯æœåŠ¡å»äº†ã€‚</p>\n<p>ç„¶åå†ä¸€çœ‹locationï¼š</p>\n<p><img alt=\"image-20260201111403498\" src=\"https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260201111403498.png\" /></p>\n<p>è¡Œå§ï¼Œä¸€çœ‹è‚¯å®šæ˜¯locationä¸­çš„é‚£ä¸ª<sub>çš„é—®é¢˜äº†ï¼Œç”±äºæ—¥å¿—æ–‡ä»¶åå’Œæˆ‘ä»¬åç«¯æ¥å£çš„å‰ç¼€æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥åŒ¹é…åˆ°äº†ä¸Šå›¾çš„é‚£ä¸ªlocationï¼Œç„¶å</sub>åˆæ˜¯æ­£åˆ™åŒ¹é…ï¼ˆè¿™å—è¿™å‡ ä¸ªç¬¦å·ä¸€ç›´è®°ä¸æ¸…æ¥šï¼Œè¿™ä¸‹æŠŠè‡ªå·±å‘äº†ï¼‰</p>\n<h1 id=\"è§£å†³æ–¹æ³•å¦‚ä½•çŸ¥é“urlåŒ¹é…ä¸Šäº†å“ªä¸ªlocation\">è§£å†³æ–¹æ³•ï¼šå¦‚ä½•çŸ¥é“urlåŒ¹é…ä¸Šäº†å“ªä¸ªlocation</h1>\n<p>å†™è¿™ç¯‡æ–‡ç« æ—¶ï¼Œç½‘ä¸Šæœç´¢äº†ä¸‹ï¼Œå‘ç°æœ‰è¿™ä¹ˆä¸€ä¸ªæŠ€å·§ï¼š</p>\n<p><a href=\"https://stackoverflow.com/questions/12703702/nginx-test-which-location-used-to-process-request#:~:text=If%20you%20just%20want%20to,3%20Comments\" rel=\"noopener nofollow\" target=\"_blank\">https://stackoverflow.com/questions/12703702/nginx-test-which-location-used-to-process-request#:~:text=If you just want to,3 Comments</a></p>\n<p><a href=\"https://stackoverflow.com/questions/12703702/nginx-test-which-location-used-to-process-request\" rel=\"noopener nofollow\" target=\"_blank\">https://stackoverflow.com/questions/12703702/nginx-test-which-location-used-to-process-request</a></p>\n<p>å°±æ˜¯åœ¨æ¯ä¸ªlocationä¸­åŠ ä¸€ä¸ªè¯­å¥ï¼Œåœ¨è¿”å›çš„http headerä¸­åŠ ä¸€ä¸ªï¼š</p>\n<pre><code class=\"language-shell\">add_header location 1 always;\n</code></pre>\n<p>æ³¨æ„ï¼Œè¿™é‡Œè¦åŠ alwaysï¼Œä¸ç„¶åƒæˆ‘è¿™ç§404æƒ…å†µä¸‹ï¼Œä¸åŠ alwaysæ˜¯ä¸ä¼šæœ‰è¿™ä¸ªheaderçš„ã€‚</p>\n<p><img alt=\"image-20260201111900000\" src=\"https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260201111900000.png\" /></p>\n<p>åŠ äº†alwaysï¼Œæ‰ä¼šåƒä¸‹é¢è¿™æ ·ï¼š</p>\n<p><img alt=\"image-20260201112049861\" src=\"https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260201112049861.png\" /></p>\n<p>å¦å¤–ï¼Œç”±äºlocationæ˜¯ä¸€ä¸ªhttpè§„èŒƒä¸­é¢„å®šä¹‰çš„headerï¼Œå’Œ403é‡å®šå‘é…åˆä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥æ¢ä¸ªåå­—ï¼š</p>\n<pre><code class=\"language-shell\">    add_header mylocation 2 always;\n</code></pre>\n<p><img alt=\"image-20260201112228298\" src=\"https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260201112228298.png\" /></p>\n<h1 id=\"å¢åŠ æ—¥å¿—\">å¢åŠ æ—¥å¿—</h1>\n<p>å¦å¤–ä¸€ä¸ªæ–¹å¼ï¼Œå°±æ˜¯æŠŠæ—¥å¿—å¤šæ‰“ä¸€ç‚¹ï¼Œæˆ‘è¯•è¿‡ä¸¤ç§ï¼š</p>\n<h2 id=\"error_log\">error_log</h2>\n<pre><code class=\"language-shell\">error_log  logs/my_error.log  info;\n</code></pre>\n<p><a href=\"https://nginx.org/en/docs/ngx_core_module.html#error_log\" rel=\"noopener nofollow\" target=\"_blank\">https://nginx.org/en/docs/ngx_core_module.html#error_log</a></p>\n<p>vim /usr/local/nginx/logs/my_error.log</p>\n<p>ä½†å‘ç°æ²¡å•¥ç”¨ï¼Œè¿˜æ˜¯æ²¡æœ‰è¯¦ç»†æ—¥å¿—ã€‚</p>\n<h2 id=\"access-log\">access log</h2>\n<p><img alt=\"image-20260201112452079\" src=\"https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260201112452079.png\" /></p>\n<pre><code class=\"language-shell\">    log_format upstream_time '$remote_addr - $remote_user [$time_local] '\n                             '\"$request\" $status $body_bytes_sent '\n                             '\"$http_referer\" \"$http_user_agent\"'\n                             'rt=\"$request_time\" $upstream_addr uct=\"$upstream_connect_time\" uht=\"$upstream_header_time\" urt=\"$upstream_response_time\"';\n\n    server {\n        listen       80;\n        server_name  localhost;\n\n\n        access_log  logs/my.access.log  upstream_time;\n</code></pre>\n<p>é€šè¿‡ä¸Šé¢è¿™ç±»æ—¥å¿—ï¼Œä¹Ÿèƒ½å¸®æˆ‘ä»¬çœ‹åˆ°ï¼Œåˆ°åº•èµ°åˆ°äº†å“ªä¸ªlocationï¼Œåå‘ä»£ç†åˆ°äº†å“ªå°åç«¯æœåŠ¡å™¨ã€‚</p>\n<h2 id=\"debug-log\">debug log</h2>\n<p><a href=\"https://nginx.org/en/docs/debugging_log.html\" rel=\"noopener nofollow\" target=\"_blank\">https://nginx.org/en/docs/debugging_log.html</a></p>\n<p>è¿™ä¸ªè¦åœ¨ç¼–è¯‘æ—¶æ‰“å¼€ï¼š</p>\n<pre><code class=\"language-shell\">./configure --with-debug ...\n</code></pre>\n<p>è¿™ä¸ªæˆ‘å°±æ²¡è¯•äº†ï¼Œåç»­æœ‰ç©ºå†è¯´ã€‚</p>\n\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-02-01 11:28</span>&nbsp;\n<a href=\"https://www.cnblogs.com/grey-wolf\">ä¸‰å›½æ¢¦å›</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">5</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "ä»0åˆ°1ï¼Œå¿«é€Ÿè®­ç»ƒå¹¶ä½¿ç”¨YOLOæ¨¡å‹",
      "link": "https://www.cnblogs.com/ClownLMe/p/19559180",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/ClownLMe/p/19559180\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-31 21:54\">\n    <span>ä»0åˆ°1ï¼Œå¿«é€Ÿè®­ç»ƒå¹¶ä½¿ç”¨YOLOæ¨¡å‹</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h1 id=\"ç®€ä»‹\">ç®€ä»‹</h1>\n<p><strong>YOLO</strong>æ˜¯ç›®å‰è®¡ç®—æœºè§†è§‰é¢†åŸŸæœ€å‰æ²¿ã€åº”ç”¨æœ€å¹¿æ³›çš„<strong>ç›®æ ‡æ£€æµ‹</strong>ç®—æ³•æ¡†æ¶ï¼Œä»–èƒ½å¿«é€Ÿè¯†åˆ«åŒºåˆ†ç›®æ ‡ï¼Œå¹¿æ³›åº”ç”¨äºæ¸¸æˆï¼Œæ— äººé©¾é©¶ï¼Œå·¥ä¸šç­‰é¢†åŸŸã€‚</p>\n<p>ä»¥è¯†åˆ«èº²é¿æ‰è½æ»‘å—çš„æ¸¸æˆçš„ç‰©ä½“å›¾ç‰‡ä½œä¸ºä¾‹å­ã€‚</p>\n<h1 id=\"ä¸€ç¯å¢ƒé…ç½®\">ä¸€ï¼Œç¯å¢ƒé…ç½®</h1>\n<pre><code class=\"language-bash\">pip install ultralytics\n</code></pre>\n<h1 id=\"äºŒå‡†å¤‡æ•°æ®é›†\">äºŒï¼Œå‡†å¤‡æ•°æ®é›†</h1>\n<p>è¿™ä¸ªæ ¼å¼ç›®å½•å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"language-bash\">my_dataset/\nâ”œâ”€â”€ data.yaml # é…ç½®æ–‡ä»¶ï¼ˆå®šä¹‰è·¯å¾„å’Œç±»åˆ«ï¼‰\nâ”œâ”€â”€ train/ #è®­ç»ƒæ•°æ®é›†\nâ”‚   â”œâ”€â”€ images/ # è®­ç»ƒå›¾ç‰‡\nâ”‚   â””â”€â”€ labels/ # æ ‡æ³¨æ–‡ä»¶ (.txt)\nâ””â”€â”€ val/ #éªŒè¯æ•°æ®é›†\n    â”œâ”€â”€ images/ \n    â””â”€â”€ labels/ \n</code></pre>\n<h3 id=\"datayml\">data.yml</h3>\n<pre><code class=\"language-yaml\">path: D:\\D_MyProject\\Ai\\game_ai\\my_dataset #æ•°æ®é›†è·¯å¾„\ntrain: train/images #è®­ç»ƒé›†å›¾ç‰‡è·¯å¾„\nval: val/images #éªŒè¯é›†å›¾ç‰‡è·¯å¾„\n\nnc: 3 #æ ‡è®°ä¸ªæ•°\nnames:  #æ¯ä¸ªæ ‡è®°çš„åç§°\n&nbsp; 0: player\n&nbsp; 1: enemy\n&nbsp; 2: game_over\n</code></pre>\n<h3 id=\"ä¸‹é¢æ˜¯ç”¨aiç”Ÿæˆäº†æ•°æ®é›†çš„ç”Ÿæˆè„šæœ¬\">ä¸‹é¢æ˜¯ç”¨AIç”Ÿæˆäº†æ•°æ®é›†çš„ç”Ÿæˆè„šæœ¬</h3>\n<p>æ•°æ®é‡å¤ªå¤šäº†ï¼Œè¿™é‡Œä¸ºäº†æ¼”ç¤ºï¼Œæˆ–è€…å­¦ä¹ ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ä¸‹é¢è„šæœ¬</p>\n<pre><code class=\"language-python\">import pygame\nimport random\nimport sys\nimport os\nimport shutil\n\n# =================é…ç½®åŒºåŸŸ=================\n# æ•°æ®é›†æ ¹ç›®å½•åç§°\nDATASET_ROOT = \"my_dataset\"\n# é‡‡é›†æ€»æ•°é‡\nMAX_IMAGES = 1000\n# è®­ç»ƒé›†å æ¯” (0.8 = 80% è®­ç»ƒ, 20% éªŒè¯)\nTRAIN_RATIO = 0.8\n\n# ================= 1. ç¯å¢ƒæ¸…ç†ä¸ç›®å½•åˆ›å»º =================\nprint(f\"ğŸš€ æ­£åœ¨åˆå§‹åŒ–æ•°æ®é›†ç›®å½•: {DATASET_ROOT} ...\")\n\n# å¦‚æœç›®å½•å·²å­˜åœ¨ï¼Œå…ˆåˆ é™¤ï¼ˆé˜²æ­¢æ—§æ•°æ®æ··å…¥ï¼‰ï¼Œç¡®ä¿æ•°æ®çº¯å‡€\nif os.path.exists(DATASET_ROOT):\n    shutil.rmtree(DATASET_ROOT)\n\n# åˆ›å»º YOLO æ ‡å‡†ç›®å½•ç»“æ„\nfor split in ['train', 'val']:\n    os.makedirs(os.path.join(DATASET_ROOT, split, 'images'), exist_ok=True)\n    os.makedirs(os.path.join(DATASET_ROOT, split, 'labels'), exist_ok=True)\n\n# ================= 2. è‡ªåŠ¨ç”Ÿæˆ data.yaml =================\nyaml_content = f\"\"\"\npath: {os.path.abspath(DATASET_ROOT)} # ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œé˜²æ­¢æŠ¥é”™\ntrain: train/images\nval: val/images\n\nnc: 3\nnames:\n  0: player\n  1: enemy\n  2: game_over\n\"\"\"\nwith open(os.path.join(DATASET_ROOT, \"data.yaml\"), \"w\", encoding='utf-8') as f:\n    f.write(yaml_content)\nprint(\"âœ… data.yaml é…ç½®æ–‡ä»¶å·²ç”Ÿæˆã€‚\")\n\n# ================= 3. æ¸¸æˆä¸é‡‡é›†é€»è¾‘ =================\npygame.init()\nWIDTH, HEIGHT = 800, 600\n# ä½¿ç”¨ hidden æ¨¡å¼æˆ–æ­£å¸¸æ¨¡å¼å‡å¯ï¼Œè¿™é‡Œç”¨æ­£å¸¸æ¨¡å¼æ–¹ä¾¿ä½ çœ‹åˆ°è¿›åº¦\nscreen = pygame.display.set_mode((WIDTH, HEIGHT))\npygame.display.set_caption(\"Auto Data Generator\")\nclock = pygame.time.Clock()\n\nfont_big = pygame.font.SysFont(\"monospace\", 50)\nfont_small = pygame.font.SysFont(\"monospace\", 35)\n\n# æ¸¸æˆçŠ¶æ€\nplayer_size, enemy_size = 50, 50\nplayer_x = WIDTH // 2\nplayer_y = HEIGHT - player_size - 10\nenemies = []\n\nimg_count = 0\nGAMEPLAY_LIMIT = int(MAX_IMAGES * 0.9) # 90% æ­£å¸¸æ¸¸æˆï¼Œ10% Game Over\n\nprint(f\"ğŸ“¸ å¼€å§‹é‡‡é›† {MAX_IMAGES} å¼ å›¾ç‰‡ (è‡ªåŠ¨åˆ’åˆ† Train/Val)...\")\n\nwhile img_count &lt; MAX_IMAGES:\n    # å¤„ç†é€€å‡ºäº‹ä»¶ï¼Œé˜²æ­¢å¡æ­»\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            pygame.quit()\n            sys.exit()\n\n    screen.fill((0, 0, 0))\n    labels = [] # å­˜å‚¨å½“å‰å¸§çš„æ ‡ç­¾\n    dw, dh = 1.0 / WIDTH, 1.0 / HEIGHT # å½’ä¸€åŒ–ç³»æ•°\n\n    # --- é€»è¾‘åˆ†æ”¯ï¼šæ­£å¸¸æ¸¸æˆ vs Game Over ---\n    if img_count &lt; GAMEPLAY_LIMIT:\n        # A. æ­£å¸¸æ¸¸æˆç”»é¢\n        # 1. ç©å®¶ç§»åŠ¨\n        if random.random() &lt; 0.2: # å¢åŠ ç§»åŠ¨é¢‘ç‡\n            player_x += random.choice([-15, 15])\n            player_x = max(0, min(WIDTH - player_size, player_x))\n\n        # 2. æ•Œäººç”Ÿæˆä¸ç§»åŠ¨\n        if random.randint(0, 20) == 0: # å¢åŠ æ•Œäººå¯†åº¦\n            enemies.append([random.randint(0, WIDTH - enemy_size), 0])\n        \n        for enemy in enemies: enemy[1] += 15 # åŠ å¿«ä¸‹è½é€Ÿåº¦\n        enemies = [e for e in enemies if e[1] &lt; HEIGHT]\n\n        # 3. ç»˜åˆ¶ç©å®¶ (Class 0)\n        pygame.draw.rect(screen, (50, 150, 255), (player_x, player_y, player_size, player_size))\n        # è®¡ç®— YOLO åæ ‡ (class x_center y_center width height)\n        px, py = (player_x + player_size/2) * dw, (player_y + player_size/2) * dh\n        labels.append(f\"0 {px:.6f} {py:.6f} {player_size*dw:.6f} {player_size*dh:.6f}\")\n\n        # 4. ç»˜åˆ¶æ•Œäºº (Class 1)\n        for e in enemies:\n            pygame.draw.rect(screen, (255, 50, 50), (e[0], e[1], enemy_size, enemy_size))\n            ex, ey = (e[0] + enemy_size/2) * dw, (e[1] + enemy_size/2) * dh\n            labels.append(f\"1 {ex:.6f} {ey:.6f} {enemy_size*dw:.6f} {enemy_size*dh:.6f}\")\n\n    else:\n        # B. Game Over ç”»é¢ (Class 2)\n        text_surf = font_big.render(\"GAME OVER\", True, (255, 50, 50))\n        \n        # éšæœºæŠ–åŠ¨ä½ç½®ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆ\n        off_x, off_y = random.randint(-50, 50), random.randint(-50, 50)\n        text_x = WIDTH // 2 - text_surf.get_width() // 2 + off_x\n        text_y = HEIGHT // 2 - 100 + off_y\n        screen.blit(text_surf, (text_x, text_y))\n\n        # å¹²æ‰°é¡¹\n        score_surf = font_small.render(f\"Score: {random.randint(0,999)}\", True, (255,255,255))\n        screen.blit(score_surf, (WIDTH//2 - score_surf.get_width()//2, HEIGHT//2 + 50))\n\n        # è®°å½•æ ‡ç­¾\n        tw, th = text_surf.get_width(), text_surf.get_height()\n        tx, ty = (text_x + tw/2) * dw, (text_y + th/2) * dh\n        labels.append(f\"2 {tx:.6f} {ty:.6f} {tw*dw:.6f} {th*dh:.6f}\")\n\n    # ================= 4. ä¿å­˜é€»è¾‘ (æ ¸å¿ƒä¿®æ”¹) =================\n    pygame.display.flip()\n    \n    # é‡‡æ ·ç‡ï¼šä¸æ˜¯æ¯ä¸€å¸§éƒ½ä¿å­˜ï¼Œé˜²æ­¢é‡å¤åº¦è¿‡é«˜ (è¿™é‡Œè®¾ä¸º 30% æ¦‚ç‡ä¿å­˜)\n    if random.random() &lt; 0.3:\n        # A. å†³å®šæ˜¯å» Train è¿˜æ˜¯ Val\n        split_folder = \"train\" if random.random() &lt; TRAIN_RATIO else \"val\"\n        \n        # B. ç”Ÿæˆæ–‡ä»¶å\n        filename = f\"{img_count:06d}\"\n        img_save_path = os.path.join(DATASET_ROOT, split_folder, \"images\", f\"{filename}.jpg\")\n        lbl_save_path = os.path.join(DATASET_ROOT, split_folder, \"labels\", f\"{filename}.txt\")\n\n        # C. ä¿å­˜å›¾ç‰‡\n        pygame.image.save(screen, img_save_path)\n\n        # D. ä¿å­˜æ ‡ç­¾\n        with open(lbl_save_path, \"w\") as f:\n            f.write(\"\\n\".join(labels))\n\n        img_count += 1\n        \n        # æ‰“å°è¿›åº¦æ¡\n        print(f\"[{split_folder.upper()}] è¿›åº¦: {img_count}/{MAX_IMAGES}\", end=\"\\r\")\n\n    # åŠ é€Ÿæ¨¡æ‹Ÿï¼Œä¸è¦å‚ç›´åŒæ­¥ï¼Œè¶Šå¿«è¶Šå¥½\n    clock.tick(0) \n\npygame.quit()\nprint(f\"\\n\\nâœ¨ å…¨éƒ¨å®Œæˆï¼æ•°æ®é›†å·²å°±ç»ªï¼š{os.path.abspath(DATASET_ROOT)}\")\nprint(\"ğŸ’¡ ä¸‹ä¸€æ­¥ï¼šç›´æ¥è¿è¡Œ model.train(data='my_dataset/data.yaml')\")\n</code></pre>\n<h1 id=\"ä¸‰è®­ç»ƒyoloæ¨¡å‹\">ä¸‰ï¼Œè®­ç»ƒYOLOæ¨¡å‹</h1>\n<p>å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨<code>ultralytics</code>æ¡†æ¶è®­ç»ƒYOLOçš„ä»£ç éå¸¸ç®€å•ï¼Œåªéœ€è¦å‡ è¡Œ<br />\n<strong>æ³¨æ„ï¼šè¿™é‡ŒYOLOä¼šè‡ªåŠ¨ä¸‹è½½æ¨¡å‹å¹¶è®­ç»ƒï¼Œä¸‹è½½æ—¶å¤±è´¥å¯èƒ½éœ€è¦æŒ‚æ¢¯å­</strong></p>\n<pre><code class=\"language-python\">from ultralytics import YOLO\n\ndef train_model():\n    #åŠ è½½æ¨¡å‹\n    model = YOLO(\"yolo11n.pt\") \n\n    #å¼€å§‹è®­ç»ƒ\n    print(\"å¼€å§‹è®­ç»ƒ...\")\n    results = model.train(\n        data=\"my_dataset/data.yaml\", #æ•°æ®é›†é…ç½®æ–‡ä»¶\n        epochs=30, #è®­ç»ƒè½®æ•°\n        imgsz=640, #å›¾ç‰‡è¾“å…¥å°ºå¯¸\n        batch=16, #æ˜¾å­˜å¤Ÿå¤§å¯ä»¥æ”¹å¤§ï¼Œæ¯”å¦‚ 32 æˆ– 64\n        device=0, #å¼ºåˆ¶ä½¿ç”¨ç¬¬ä¸€å¼ æ˜¾å¡ (éœ€è¦CUDA)\n        workers=0, #Windowsä¸‹è®¾ä¸º0é˜²æ­¢å¤šè¿›ç¨‹æŠ¥é”™\n        project=\"dodge_project\",#ä¿å­˜è·¯å¾„\n        name=\"ai_model\" #è®­ç»ƒè¿è¡Œåç§°\n    )\n    print(f\"è®­ç»ƒå®Œæˆï¼æœ€ä½³æ¨¡å‹ä¿å­˜åœ¨: {results.save_dir}/weights/best.pt\")\n\nif __name__ == \"__main__\":\n    train_model()\n</code></pre>\n<h1 id=\"å››ä½¿ç”¨yoloæ¨¡å‹\">å››ï¼Œä½¿ç”¨YOLOæ¨¡å‹</h1>\n<pre><code class=\"language-python\">from ultralytics import YOLO\n\n#é…ç½®è·¯å¾„\nMODEL_PATH = \"dodge_project/ai_model/weights/best.pt\" \nPIC_PATH = \"my_dataset/val/images/000045.jpg\"\n\n#åŠ è½½æ¨¡å‹\nmodel = YOLO(MODEL_PATH)\nprint(f\"æ¨¡å‹åŠ è½½æˆåŠŸ\")\n\n#è¯†åˆ«å›¾ç‰‡\nresults = model.predict(PIC_PATH, verbose=False, conf=0.4, imgsz=640)\nresult = results[0]\n\n#è·å–ä¿¡æ¯å¹¶æ‰“å°\nfor box in result.boxes:\n    # è·å–åæ ‡ (x1, y1, x2, y2)ã€ç±»åˆ« ID å’Œç½®ä¿¡åº¦\n    x1, y1, x2, y2 = map(int, box.xyxy[0])\n    cls_id = int(box.cls[0])\n    conf = float(box.conf[0])\n    \n    # ç±»åˆ«åç§°æ˜ å°„\n    names = {0: \"Player\", 1: \"Enemy\", 2: \"Game Over\"}\n    label = names.get(cls_id, f\"Unknown({cls_id})\")\n    print(f\"æ‰¾åˆ°ç‰©ä½“: [{label:10}] | ç½®ä¿¡åº¦: {conf:.2f} | åæ ‡: ({x1}, {y1}) -&gt; ({x2}, {y2})\")\n\n#å±•ç¤ºå›¾ç‰‡\nresult.show()\n</code></pre>\n<p><strong>å¦‚æœâ¤å–œæ¬¢â¤æœ¬ç³»åˆ—æ•™ç¨‹ï¼Œå°±ç‚¹ä¸ªå…³æ³¨å§ï¼Œåç»­ä¸å®šæœŸæ›´æ–°~</strong></p>\n\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-31 21:54</span>&nbsp;\n<a href=\"https://www.cnblogs.com/ClownLMe\">ClownLMe</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">69</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "ã€ä¿å§†çº§æ•™ç¨‹ã€‘æ‰‹æŠŠæ‰‹æ•™ä½ å®‰è£…OpenClawå¹¶æ¥å…¥é£ä¹¦ï¼Œè®©AIåœ¨èŠå¤©è½¯ä»¶é‡Œå¸®ä½ å¹²æ´»",
      "link": "https://www.cnblogs.com/weipo0105/p/19558953",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n\t\t\t<a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/weipo0105/p/19558953\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-31 19:50\">\n    <span>ã€ä¿å§†çº§æ•™ç¨‹ã€‘æ‰‹æŠŠæ‰‹æ•™ä½ å®‰è£…OpenClawå¹¶æ¥å…¥é£ä¹¦ï¼Œè®©AIåœ¨èŠå¤©è½¯ä»¶é‡Œå¸®ä½ å¹²æ´»</span>\n    \n\n</a>\n\n\t\t</h1>\n\t\t<div class=\"clear\"></div>\n\t\t<div class=\"postBody\">\n\t\t\t    <div id=\"cnblogs_post_description\" style=\"display: none;\">\n        <img alt=\"ã€ä¿å§†çº§æ•™ç¨‹ã€‘æ‰‹æŠŠæ‰‹æ•™ä½ å®‰è£…OpenClawå¹¶æ¥å…¥é£ä¹¦ï¼Œè®©AIåœ¨èŠå¤©è½¯ä»¶é‡Œå¸®ä½ å¹²æ´»\" class=\"desc_img\" src=\"https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131195003333-854515303.png\" />\n        OpenClaw æ˜¯ä¸€æ¬¾èƒ½ç›´æ¥æ“ä½œä½ ç”µè„‘çš„å¼€æºAIåŠ©æ‰‹ï¼Œä¸æ­¢äºèŠå¤©ï¼Œæ›´èƒ½æ›¿ä½ æ‰§è¡Œä»»åŠ¡ã€‚æœ¬æ–‡æä¾›ä¸€ä»½ä¿å§†çº§æ•™ç¨‹ï¼Œä»é›¶å¼€å§‹ï¼Œè¯¦ç»†æ¼”ç¤ºå¦‚ä½•åœ¨ Windows ç³»ç»Ÿä¸Šå®Œæˆ OpenClaw çš„å®‰è£…ã€åˆå§‹é…ç½®ï¼Œå¹¶é‡ç‚¹ä¸€æ­¥æ­¥æ•™ä½ æ¥å…¥é£ä¹¦æœºå™¨äººï¼Œæœ€ç»ˆå®ç°åœ¨é£ä¹¦Appä¸­ç›´æ¥æŒ‡æŒ¥ä½ çš„AIåŠ©æ‰‹å¤„ç†å·¥ä½œã€‚è·Ÿéšå›¾æ–‡æŒ‡å¼•ï¼Œè½»æ¾æ‹¥æœ‰ä½ çš„ä¸ªäººâ€œè´¾ç»´æ–¯â€ã€‚\n    </div>\n<div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<p>è¿™é‡Œå…ˆåšä¸€ä¸‹ç®€å•çš„ç§‘æ™®ï¼š</p>\n<p><code>OpenClaw</code> çš„åå­—ç»å†äº†ä¸‰æ¬¡å˜æ›´ï¼Œç¬¬ä¸€æ¬¡å«åš <code>ClawdBot</code>ï¼Œåæ¥å› ä¸ºåå­—è·Ÿ <code>Claude</code> å¤ªè¿‡ç›¸ä¼¼ï¼Œè¢« <code>CLaude</code> å‘Šä¾µæƒï¼Œé‚æ”¹å <code>MoltBot</code> ã€‚</p>\n<p>ä½†æ˜¯åæ¥åœ¨æ”¹åè¿‡ç¨‹ä¸­é­é‡åŸŸåå’Œç¤¾äº¤è´¦å·è¢«æŠ¢æ³¨ï¼Œç”šè‡³å‡ºå‘åŒååŠ å¯†è´§å¸å‰²éŸ­èœçš„æƒ…å†µï¼Œå¯¼è‡´åç§°ä¼ æ’­å—é˜»ã€‚</p>\n<p>æœ€ç»ˆå®šåä¸ºï¼š<strong>OpenClaw</strong>ã€‚</p>\n<p>æ‰€ä»¥ï¼Œåå­—ç»å†å…ˆåé¡ºåºä¸ºï¼šClawdBot -&gt; MoltBot -&gt; OpenClaw</p>\n<p>å¤§å®¶ä¸è¦å› ä¸ºåå­—å›°æƒ‘äº†ï¼Œæ€€ç–‘æ˜¯ä¸æ˜¯è‡ªå·±ä¸‹é”™è½¯ä»¶äº†ï¼Œä»–ä»¬éƒ½æ˜¯åŒä¸€ä¸ªã€‚</p>\n<h1 id=\"ä¸€ä»€ä¹ˆæ˜¯-openclaw\">ä¸€ã€ä»€ä¹ˆæ˜¯ OpenClawï¼Ÿ</h1>\n<p><strong>OpenClaw</strong>ï¼ˆæ›¾ç”¨å Clawdbotï¼‰æ˜¯ä¸€æ¬¾ 2026 å¹´çˆ†ç«çš„å¼€æºä¸ªäºº AI åŠ©æ‰‹ï¼ŒGitHub æ˜Ÿæ ‡å·²è¶…è¿‡ 10 ä¸‡é¢—ã€‚ä¸ä¼ ç»Ÿ AI èŠå¤©æœºå™¨äººçš„æ ¹æœ¬åŒºåˆ«åœ¨äºï¼š</p>\n<ul>\n<li><strong>çœŸæ­£çš„æ‰§è¡Œèƒ½åŠ›</strong>ï¼šä¸ä»…èƒ½å›ç­”é—®é¢˜ï¼Œè¿˜èƒ½å®é™…æ“ä½œä½ çš„ç”µè„‘</li>\n<li><strong>24/7 å…¨å¤©å€™å¾…å‘½</strong>ï¼šåœ¨ä½ ç¡è§‰æ—¶ä¹Ÿèƒ½ä¸»åŠ¨å®Œæˆä»»åŠ¡</li>\n<li><strong>å®Œå…¨å¼€æºå…è´¹</strong>ï¼šæ•°æ®å®Œå…¨æŒæ§åœ¨è‡ªå·±æ‰‹ä¸­</li>\n<li><strong>æ”¯æŒå¤šç§é€šè®¯å¹³å°</strong>ï¼šåœ¨å›½å¤–ï¼ŒWhatsAppã€Telegramã€Discordã€Slackã€iMessage ç­‰ï¼Œåœ¨å›½å†…ï¼Œé£ä¹¦ï¼Œé’‰é’‰ç­‰å„å¤§å‚å•†çš„å³æ—¶èŠå¤©è½¯ä»¶å·²ç»æ”¯æŒæ¥å…¥</li>\n</ul>\n<p><strong>å®ƒèƒ½åšä»€ä¹ˆï¼Ÿ</strong></p>\n<p>å®ƒä¸åªæ˜¯å›ç­”é—®é¢˜çš„èŠå¤©æœºå™¨äººï¼Œè€Œæ˜¯çœŸçš„èƒ½åœ¨ä½ ç”µè„‘ä¸ŠåŠ¨æ‰‹æ“ä½œã€‚æ¯”å¦‚ä½ å‘Šè¯‰å®ƒâ€œå¸®æˆ‘æ•´ç†ä¸€ä¸‹ä¸Šä¸ªæœˆçš„é‚®ä»¶â€ï¼Œå®ƒå°±é»˜é»˜å»å¤„ç†äº†ï¼›ä½ ç¡è§‰æ—¶ï¼Œå®ƒè¿˜èƒ½ç»§ç»­å¹²æ´»ï¼Œé€€è®¢å¹¿å‘Šã€é¢„çº¦è¡Œç¨‹ã€ç”šè‡³æ‰¾æ‰¾ Bugã€‚</p>\n<p>å®ƒå®Œå…¨å…è´¹ï¼Œä½ çš„æ•°æ®éƒ½åœ¨è‡ªå·±æ‰‹é‡Œã€‚è€Œä¸”å¯ä»¥ç”¨é’‰é’‰ï¼Œé£ä¹¦ï¼ŒWhatsAppã€Telegramç­‰å„ç±»å³æ—¶é€šè®¯è½¯ä»¶æ¥æŒ‡æŒ¥ä»–å¹²æ´»ï¼</p>\n<p>ç®€å•æ¥è¯´ï¼Œä¸€å¥è¯äº¤ç»™å®ƒï¼Œä»æ•´ç†æ¡Œé¢æ–‡ä»¶åˆ°æ§åˆ¶å®¶é‡Œç¯å…‰ï¼Œå®ƒéƒ½é»˜é»˜å¸®ä½ æå®šã€‚æ˜¯ä½ ç”µè„‘é‡ŒçœŸæ­£çš„è´¾ç»´æ–¯ï¼è¶…çº§æ™ºèƒ½çš„AIåŠ©ç†ï¼</p>\n<h1 id=\"äºŒå®‰è£…nodejs\">äºŒã€å®‰è£…nodejs</h1>\n<p>åé¢æ‰§è¡Œä¸€é”®å®‰è£…å‘½ä»¤ï¼Œå¯ä»¥è‡ªåŠ¨å®‰è£…nodejsï¼Œä½†æ˜¯å¦‚æœä¸ºäº†åŠ å¿«é€Ÿåº¦ï¼Œé˜²æ­¢å®‰è£…æ„å¤–ï¼Œå¯ä»¥å…ˆå®‰è£…nodejsï¼š</p>\n<p>å®˜æ–¹ä¸‹è½½åœ°å€ï¼š<a href=\"https://nodejs.org/zh-cn/download\" rel=\"noopener nofollow\" target=\"_blank\">https://nodejs.org/zh-cn/download</a><br />\n<img alt=\"\" class=\"lazyload\" /></p>\n<h1 id=\"ä¸‰å¼€å§‹å®‰è£…\">ä¸‰ã€å¼€å§‹å®‰è£…</h1>\n<h3 id=\"ä¸€è®¾ç½®-powershell-æ‰§è¡Œæƒé™\">ä¸€ï¼‰è®¾ç½® PowerShell æ‰§è¡Œæƒé™</h3>\n<p>ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ PowerShellï¼š</p>\n<ol>\n<li>æŒ‰ <code>Win</code> é”®ï¼Œæœç´¢ <strong>PowerShell</strong></li>\n<li>å³é”®ç‚¹å‡» <strong>Windows PowerShell</strong></li>\n<li>é€‰æ‹© <strong>ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ</strong></li>\n<li>ç‚¹å‡» <strong>æ˜¯</strong> ç¡®è®¤<br />\n<img alt=\"\" class=\"lazyload\" /></li>\n</ol>\n<p>åœ¨ç®¡ç†å‘˜ PowerShell çª—å£ä¸­ï¼Œä¾æ¬¡æ‰§è¡Œä»¥ä¸‹ä¸¤æ¡å‘½ä»¤ï¼š</p>\n<pre><code class=\"language-powershell\">Set-ExecutionPolicy RemoteSigned -Scope CurrentUser\n\nSet-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass\n</code></pre>\n<p><strong>è¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</strong></p>\n<ul>\n<li>ç¬¬ä¸€æ¡å‘½ä»¤ï¼šå…è®¸å½“å‰ç”¨æˆ·è¿è¡Œæœ¬åœ°å’Œä¸‹è½½çš„è„šæœ¬</li>\n<li>ç¬¬äºŒæ¡å‘½ä»¤ï¼šå…è®¸å½“å‰ç”¨æˆ·è¿è¡Œæœ¬åœ°å’Œä¸‹è½½çš„è„šæœ¬</li>\n</ul>\n<blockquote>\n<p>âš ï¸ <strong>å®‰å…¨æç¤º</strong>ï¼šè¿™äº›å‘½ä»¤åªä¼šå½±å“æ‚¨è‡ªå·±çš„è´¦æˆ·ï¼Œä¸ä¼šå½±å“ç³»ç»Ÿå®‰å…¨æˆ–å…¶ä»–ç”¨æˆ·ã€‚</p>\n</blockquote>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<h3 id=\"äºŒæ‰§è¡Œä¸€é”®å®‰è£…å‘½ä»¤\">äºŒï¼‰æ‰§è¡Œä¸€é”®å®‰è£…å‘½ä»¤</h3>\n<p>å¤åˆ¶ä»¥ä¸‹å‘½ä»¤ï¼Œç²˜è´´åˆ° PowerShell çª—å£ä¸­ï¼ŒæŒ‰ <strong>Enter</strong> æ‰§è¡Œï¼š</p>\n<pre><code class=\"language-powershell\">iwr -useb https://openclaw.ai/install.ps1 | iex\n</code></pre>\n<p><strong>å®‰è£…è¿‡ç¨‹ä¼šè‡ªåŠ¨å®Œæˆï¼š</strong></p>\n<ul>\n<li>æ£€æµ‹ç³»ç»Ÿç¯å¢ƒ</li>\n<li>å®‰è£…å¿…è¦ä¾èµ–ï¼ˆNode.js ç­‰ï¼‰</li>\n<li>ä¸‹è½½ OpenClaw æ ¸å¿ƒæ–‡ä»¶</li>\n<li>é…ç½®ç¯å¢ƒå˜é‡</li>\n<li>å¯åŠ¨é…ç½®å‘å¯¼</li>\n</ul>\n<blockquote>\n<p>æ³¨æ„ï¼šå¦‚æœå‘½ä»¤æ‰§è¡Œåï¼Œè¿˜æ˜¯æŠ¥é”™ï¼Œå¯ä»¥è‡ªå·±åˆ°å®˜ç½‘ä¸‹è½½nodeå®‰è£…åŒ…ï¼Œè‡ªå·±å®‰è£…nodeç¯å¢ƒï¼Œæ³¨æ„ç‰ˆæœ¬æœ€å¥½åœ¨ node v22.x ä»¥ä¸Šï¼Œnodeå®˜ç½‘ä¸‹è½½åœ°å€ï¼š<a href=\"https://nodejs.org/zh-cn/download%EF%BC%8C%E8%8B%A5%E8%BF%98%E6%98%AF%E4%B8%8D%E6%87%82%E6%80%8E%E4%B9%88%E5%AE%89%E8%A3%85%EF%BC%8C%E7%82%B9%E5%A4%B4%E5%83%8F%E8%BF%9B%E6%88%91%E4%B8%BB%E9%A1%B5%E6%89%BE%E5%88%B0%E6%88%91%EF%BC%8C%E6%8B%89%E4%BD%A0%E8%BF%9B%E4%BA%A4%E6%B5%81%E7%BE%A4\" rel=\"noopener nofollow\" target=\"_blank\">https://nodejs.org/zh-cn/downloadï¼Œè‹¥è¿˜æ˜¯ä¸æ‡‚æ€ä¹ˆå®‰è£…ï¼Œç‚¹å¤´åƒè¿›æˆ‘ä¸»é¡µæ‰¾åˆ°æˆ‘ï¼Œæ‹‰ä½ è¿›äº¤æµç¾¤</a></p>\n</blockquote>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<h1 id=\"å››åˆå§‹é…ç½®å‘å¯¼\">å››ã€åˆå§‹é…ç½®å‘å¯¼</h1>\n<p>å®‰è£…å®Œæˆåï¼Œä¼šè‡ªåŠ¨è¿›å…¥é…ç½®å‘å¯¼ï¼ˆ<code>openclaw onboard</code>ï¼‰ã€‚</p>\n<h2 id=\"ä¸€é£é™©å‘ŠçŸ¥\">ä¸€ï¼‰é£é™©å‘ŠçŸ¥</h2>\n<p>è¿™ä¸€æ­¥ä¸»è¦æ˜¯å‘Šè¯‰ä½ ï¼Œä½¿ç”¨OpenClawå¯èƒ½ä¼šæœ‰ä¸€äº›é£é™©ã€‚è¯·é—®ä½ æ˜¯å¦ç»§ç»­ï¼Ÿ<br />\næŒ‰ å‘å·¦æ–¹å‘é”® â†ï¼Œé€‰æ‹© <code>Yes</code>ï¼ŒæŒ‰ <code>Enter</code> å›è½¦ç¡®è®¤<br />\n<img alt=\"\" class=\"lazyload\" /></p>\n<h2 id=\"äºŒé€‰æ‹©-qiuickstart-æ¨¡å¼\">äºŒï¼‰é€‰æ‹© QiuickStart æ¨¡å¼</h2>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<h2 id=\"ä¸‰é…ç½®-ai-æ¨¡å‹-api-key\">ä¸‰ï¼‰é…ç½® AI æ¨¡å‹ API Key</h2>\n<p>OpenClaw éœ€è¦è¿æ¥åˆ°å¤§è¯­è¨€æ¨¡å‹æ‰èƒ½å·¥ä½œã€‚Openclaw æ¯”è¾ƒè´¹tokenï¼Œå›½å¤–æ¨¡å‹æˆæœ¬é«˜ï¼Œé—¨æ§›ä¹Ÿé«˜ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©å›½å†…çš„æ™ºè°±çš„ GLM 4.7</p>\n<blockquote>\n<p>å¦‚æœæ²¡æœ‰æ™ºè°±çš„API Keyï¼Œç‚¹å‡»å®˜æ–¹åœ°å€è‡ªå·±æ³¨å†Œè´¦å·è·å–API keyï¼š<a href=\"https://www.bigmodel.cn/glm-coding?ic=RBSKXMPNJP\" rel=\"noopener nofollow\" target=\"_blank\">https://www.bigmodel.cn/glm-coding?ic=RBSKXMPNJP</a></p>\n</blockquote>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<p>è¾“å…¥è‡ªå·±çš„ API Keyï¼š</p>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<h2 id=\"å››é€‰æ‹©-ai-æ¨¡å‹\">å››ï¼‰é€‰æ‹© AI æ¨¡å‹</h2>\n<blockquote>\n<p>è¿™é‡Œæˆ‘é€‰æ‹©é»˜è®¤çš„GLM 4.7ï¼Œä¹Ÿæ˜¯æ™ºæ™®å½“å‰çš„æ——èˆ°æ¨¡å‹</p>\n</blockquote>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<h2 id=\"äº”è¿æ¥å³æ—¶é€šè®¯å¹³å°\">äº”ï¼‰è¿æ¥å³æ—¶é€šè®¯å¹³å°</h2>\n<p>é…ç½®å®Œ AI æ¨¡å‹åï¼ŒOpenClaw ä¼šè¯¢é—®ä½ è¦è¿æ¥å“ªä¸ªé€šè®¯å¹³å°ï¼Ÿ</p>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<blockquote>\n<p>OpenClaw åŸç”Ÿæ”¯æŒçš„å³æ—¶é€šä¿¡å¹³å°ä¸»è¦æ˜¯æµ·å¤–çš„ WhatsAppã€Telegramã€Discordã€Slackã€iMessage ç­‰ï¼Œå›½å†…ç”¨æˆ·ä¸ä¹ æƒ¯ï¼Œè¿™é‡Œå›½äº§å³æ—¶é€šä¿¡è½¯ä»¶å¤§å‚ä¹Ÿè·Ÿè¿›äº†ï¼Œç°åœ¨é’‰é’‰ï¼Œé£ä¹¦ç­‰éƒ½å·²æ”¯æŒæ¥å…¥OpenClaw</p>\n</blockquote>\n<p>åé¢ä¼šå¸¦é¢†å¤§å®¶æŠŠé£ä¹¦æœºå™¨äººæ¥å…¥ OpenClawï¼Œä½¿å¤§å®¶å¯ä»¥é€šè¿‡é£ä¹¦å³å¯æŒ‡æŒ¥OpenClawä¸ºæˆ‘ä»¬å¹²æ´»ï¼Œä½†æ˜¯é£ä¹¦é…ç½®æ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆé€‰æ‹©è·³è¿‡ï¼Œåé¢æˆ‘ä»¬å¯ä»¥é€šè¿‡ç»§ç»­è¿›è¡Œé…ç½®ï¼š</p>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<h2 id=\"å…­é€‰æ‹©skills\">å…­ï¼‰é€‰æ‹©Skills</h2>\n<p>è¿™é‡Œä¹Ÿé€‰æ‹©ï¼šNoï¼Œæš‚ä¸é…ç½®ï¼Œåé¢é€šè¿‡UIç•Œé¢è¿›è¡Œé…ç½®ï¼š<br />\n<img alt=\"\" class=\"lazyload\" /></p>\n<h2 id=\"ä¸ƒæ˜¯å¦å¼€å¯hooks\">ä¸ƒï¼‰æ˜¯å¦å¼€å¯Hooks</h2>\n<p>æ“ä½œæ­¥éª¤ï¼šå…ˆæ•²<strong>ç©ºæ ¼</strong>ï¼Œè¡¨ç¤ºé€‰ä¸­å½“å‰é¡¹ï¼Œå†æ•²å›è½¦é”®</p>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<h2 id=\"å…«å¯åŠ¨æœåŠ¡å¹¶æ‰“å¼€uiç•Œé¢\">å…«ï¼‰å¯åŠ¨æœåŠ¡å¹¶æ‰“å¼€UIç•Œé¢</h2>\n<p>æ­¤æ—¶å®ƒä¼šè‡ªåŠ¨å†æ‰“å¼€ä¸€ä¸ªå‘½ä»¤çª—å£æ¥å¯åŠ¨æœåŠ¡:</p>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<blockquote>\n<p>è¿™ä¸ªè¿‡ç¨‹æ˜¯åœ¨å¯åŠ¨æœåŠ¡ï¼Œå¯èƒ½ä¼šéœ€è¦ç­‰ä¸€ç‚¹æ—¶é—´</p>\n</blockquote>\n<p>åŒæ—¶ï¼Œå¤§çº¦è¿‡30ç§’å·¦å³ï¼Œæˆ‘ä»¬å›åˆ°åˆšæ‰çš„è®¾ç½®çª—å£ï¼Œé€‰æ‹© <code>Open the Web UI</code> ï¼Œæ‰“å¼€ <code>OpenClaw</code> çš„UIç•Œé¢ï¼š</p>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<p>æµè§ˆå™¨è‡ªåŠ¨æ‰“å¼€Web UIç•Œé¢ï¼š</p>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<h2 id=\"ä¹æµ‹è¯•ä¸€ä¸‹\">ä¹ï¼‰æµ‹è¯•ä¸€ä¸‹</h2>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<h1 id=\"äº”æ¥å…¥é£ä¹¦æœºå™¨äºº\">äº”ã€æ¥å…¥é£ä¹¦æœºå™¨äºº</h1>\n<p>æˆ‘ä»¬éœ€è¦å…ˆåˆ°é£ä¹¦å¹³å°åˆ›å»ºè‡ªå·±çš„æœºå™¨äººæ¥æ¥å…¥OpenClawï¼š</p>\n<h2 id=\"ä¸€æ¥åˆ°é£ä¹¦å¼€å‘è€…åå°\">ä¸€ï¼‰æ¥åˆ°é£ä¹¦å¼€å‘è€…åå°</h2>\n<p>é£ä¹¦å¼€æ”¾å¹³å°åœ°å€ï¼š<a href=\"https://open.feishu.cn\" rel=\"noopener nofollow\" target=\"_blank\">https://open.feishu.cn</a></p>\n<blockquote>\n<p>æ²¡æœ‰é£ä¹¦è´¦å·çš„ï¼Œéœ€è¦è‡ªå·±æ³¨å†Œè´¦å·</p>\n</blockquote>\n<p>ç‚¹å‡»å³ä¸Šè§’è¿›å…¥ <strong>å¼€å‘è€…åå°</strong>ï¼š</p>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<h2 id=\"äºŒåˆ›å»ºåº”ç”¨\">äºŒï¼‰åˆ›å»ºåº”ç”¨</h2>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<h2 id=\"ä¸‰å¡«å†™åº”ç”¨ä¿¡æ¯\">ä¸‰ï¼‰å¡«å†™åº”ç”¨ä¿¡æ¯</h2>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<h2 id=\"å››è·å–è‡ªå·±çš„åº”ç”¨å‡­è¯\">å››ï¼‰è·å–è‡ªå·±çš„åº”ç”¨å‡­è¯</h2>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<h2 id=\"äº”ç»™åº”ç”¨æ·»åŠ æœºå™¨äºº\">äº”ï¼‰ç»™åº”ç”¨æ·»åŠ æœºå™¨äºº</h2>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<h2 id=\"å…­ç»™åº”ç”¨é…ç½®æƒé™\">å…­ï¼‰ç»™åº”ç”¨é…ç½®æƒé™</h2>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<p>æŠŠå³æ—¶é€šè®¯ç›¸å…³çš„æƒé™å…¨éƒ¨å¼€é€šï¼š</p>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<h2 id=\"ä¸ƒåˆ›å»ºç‰ˆæœ¬å¹¶å‘å¸ƒ\">ä¸ƒï¼‰åˆ›å»ºç‰ˆæœ¬å¹¶å‘å¸ƒ</h2>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<p>æ¥åˆ°é£ä¹¦å®¢æˆ·ç«¯è¿›è¡Œå®¡æ‰¹ï¼š</p>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<h2 id=\"å…«å®‰è£…é£ä¹¦æ’ä»¶\">å…«ï¼‰å®‰è£…é£ä¹¦æ’ä»¶</h2>\n<p>æ‰“å¼€powershellï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œå®‰è£…é£ä¹¦æ’ä»¶ï¼š</p>\n<pre><code>openclaw plugins install @m1heng-clawd/feishu\n</code></pre>\n<p>å®‰è£…æˆåŠŸåï¼Œå†æ‰“å¼€ä¸€ä¸ªæ–°çš„å‘½ä»¤çª—å£ï¼Œå¼€å§‹é…ç½®é£ä¹¦æ’ä»¶ï¼š</p>\n<p>è¾“å…¥å‘½ä»¤ï¼š<code>openclaw config</code></p>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<p>é€‰æ‹©æ¸ é“:<br />\n<img alt=\"\" class=\"lazyload\" /></p>\n<p>é€‰æ‹©é…ç½®é“¾æ¥:<br />\n<img alt=\"\" class=\"lazyload\" /></p>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<p>è¾“å…¥é£ä¹¦çš„AppIDï¼ŒAppSecrectï¼š</p>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<p>åŸŸåé€‰æ‹©ä¸­å›½çš„ï¼š<br />\n<img alt=\"\" class=\"lazyload\" /></p>\n<p>æ¥å—ç¾¤ç»„èŠå¤©ï¼š<br />\n<img alt=\"\" class=\"lazyload\" /></p>\n<p>é€‰æ‹©å®Œæˆï¼š<br />\n<img alt=\"\" class=\"lazyload\" /></p>\n<p>é€‰æ‹©yesï¼š<br />\n<img alt=\"\" class=\"lazyload\" /></p>\n<p>é€‰æ‹©openï¼š<br />\n<img alt=\"\" class=\"lazyload\" /></p>\n<p>é€‰æ‹©ç»§ç»­ï¼Œå®Œæˆé…ç½®ï¼š<br />\n<img alt=\"\" class=\"lazyload\" /></p>\n<p>é‡å¯æœåŠ¡ï¼Œä½¿é…ç½®ç”Ÿæ•ˆï¼š<br />\næ§åˆ¶å¯ä»¥çœ‹åˆ°é£ä¹¦æ’ä»¶å·²ç»é…ç½®æˆåŠŸ<br />\n<img alt=\"\" class=\"lazyload\" /></p>\n<h2 id=\"ä¸ƒå›åˆ°é£ä¹¦åå°è®¾ç½®äº‹ä»¶å›è°ƒ\">ä¸ƒï¼‰å›åˆ°é£ä¹¦åå°è®¾ç½®äº‹ä»¶å›è°ƒ</h2>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<p>é€‰æ‹© <code>ä½¿ç”¨é•¿è¿æ¥æ¥æ”¶äº‹ä»¶</code> ï¼š</p>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<p>å¯ä»¥çœ‹åˆ°æ·»åŠ äº‹ä»¶æŒ‰é’®ç”±åŸæ¥çš„ç°è‰²ä¸å¯ç‚¹å‡»å˜ä¸ºå¯ç‚¹å‡»ï¼š<br />\n<img alt=\"\" class=\"lazyload\" /></p>\n<p>æ·»åŠ æ¥æ”¶æ¶ˆæ¯äº‹ä»¶ï¼š<br />\n<img alt=\"\" class=\"lazyload\" /></p>\n<p>ç»™åº”ç”¨å¼€é€šè·å–é€šè®¯å½•åŸºæœ¬ä¿¡æ¯çš„æƒé™ï¼š<br />\n<img alt=\"\" class=\"lazyload\" /></p>\n<p>é‡æ–°å‘å¸ƒç‰ˆæœ¬ï¼š<br />\n<img alt=\"\" class=\"lazyload\" /></p>\n<p>è·Ÿå‰é¢çš„æ­¥éª¤ä¸€æ ·ï¼Œå‘å¸ƒä¸ºåœ¨çº¿åº”ç”¨å³å¯ã€‚</p>\n<p>ç°åœ¨å¯ä»¥åœ¨ é£ä¹¦ä¸­ä¸ AI åŠ©æ‰‹å¯¹è¯äº†ï¼</p>\n<h2 id=\"å…«åœ¨é£ä¹¦ä¸­ä¸openclawå¯¹è¯\">å…«ï¼‰åœ¨é£ä¹¦ä¸­ä¸OpenClawå¯¹è¯</h2>\n<p>æ¥åˆ°é£ä¹¦å®¢æˆ·ç«¯æˆ–è€…æ‰‹æœºé£ä¹¦appä¸Šï¼š</p>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<p>ä»¥ä¸‹æ˜¯openclawæ–‡ä»¶å¤¹ä¸‹é¢çš„æ–‡æ¡£å†…çš„å†…å®¹ï¼š<br />\n<img alt=\"\" class=\"lazyload\" /></p>\n<p>ç°åœ¨æˆ‘è·ŸåºŸæ°´æœºå™¨äººå¯¹è¯ï¼Œè®©ä»–å‘Šè¯‰æˆ‘æŒ‡å®šæ–‡æ¡£å†…æ˜¯ä»€ä¹ˆå†…å®¹ï¼š<br />\n<img alt=\"\" class=\"lazyload\" /></p>\n<hr />\n<h1 id=\"å…­è®¿é—®-web-æ§åˆ¶é¢æ¿\">å…­ã€è®¿é—® Web æ§åˆ¶é¢æ¿</h1>\n<p>é…ç½®å®Œæˆåï¼ŒPowerShell çª—å£åº•éƒ¨ä¼šæ˜¾ç¤ºæ§åˆ¶é¢æ¿é“¾æ¥ï¼Œæ ¼å¼ç±»ä¼¼ï¼š</p>\n<pre><code>Control UI: http://127.0.0.1:18789\n</code></pre>\n<ol>\n<li>å¤åˆ¶å®Œæ•´é“¾æ¥</li>\n<li>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€</li>\n<li>å³å¯çœ‹åˆ°å¯è§†åŒ–UIç®¡ç†ç•Œé¢</li>\n</ol>\n<hr />\n<h1 id=\"ä¸ƒå¸¸ç”¨å‘½ä»¤é€ŸæŸ¥\">ä¸ƒã€å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥</h1>\n<table>\n<thead>\n<tr>\n<th>å‘½ä»¤</th>\n<th>åŠŸèƒ½</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>openclaw onboard</code></td>\n<td>é‡æ–°è¿›å…¥é…ç½®å‘å¯¼</td>\n</tr>\n<tr>\n<td><code>openclaw status</code></td>\n<td>æŸ¥çœ‹è¿è¡ŒçŠ¶æ€</td>\n</tr>\n<tr>\n<td><code>openclaw health</code></td>\n<td>å¥åº·æ£€æŸ¥</td>\n</tr>\n<tr>\n<td><code>openclaw gateway start</code></td>\n<td>å¯åŠ¨æœåŠ¡</td>\n</tr>\n<tr>\n<td><code>openclaw gateway stop</code></td>\n<td>åœæ­¢æœåŠ¡</td>\n</tr>\n<tr>\n<td><code>openclaw update</code></td>\n<td>æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬</td>\n</tr>\n<tr>\n<td><code>openclaw doctor</code></td>\n<td>è¯Šæ–­é—®é¢˜</td>\n</tr>\n<tr>\n<td><code>openclaw uninstall</code></td>\n<td>å¸è½½ OpenClaw</td>\n</tr>\n</tbody>\n</table>\n<hr />\n<h1 id=\"å…«å¸¸è§é—®é¢˜è§£ç­”\">å…«ã€å¸¸è§é—®é¢˜è§£ç­”</h1>\n<h3 id=\"q1-å®‰è£…é£ä¹¦æ’ä»¶æç¤ºspawn-npm-enoent\">Q1: å®‰è£…é£ä¹¦æ’ä»¶æç¤ºï¼šspawn npm ENOENT</h3>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<p>é—®é¢˜åŸå› ï¼šè¿™å¯èƒ½æ˜¯openclawçš„ä¸€ä¸ªbugï¼Œå¯ä»¥ç­‰å®˜æ–¹æ›´æ–°ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å»å®˜æ–¹ä»“åº“æissue</p>\n<p>è§£å†³æ­¥éª¤ï¼š</p>\n<p>å®šä½é—®é¢˜ä»£ç </p>\n<p>æ–‡ä»¶è·¯å¾„ï¼š</p>\n<pre><code>C:\\Users\\Administrator\\AppData\\Roaming\\fnm\\node-versions\\v22.14.0\\installation\\node_modules\\openclaw\\dist\\process\\exec.js\n</code></pre>\n<p>ä¿®æ”¹ä»£ç </p>\n<p>æ‰¾åˆ° <code>runCommandWithTimeout</code> å‡½æ•°ä¸­çš„ spawn è°ƒç”¨ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š</p>\n<p><strong>ä¿®æ”¹å‰ï¼š</strong></p>\n<pre><code class=\"language-javascript\">const stdio = resolveCommandStdio({ hasInput, preferInherit: true });\nconst child = spawn(argv[0], argv.slice(1), {\n    stdio,\n    cwd,\n    env: resolvedEnv,\n    windowsVerbatimArguments,\n});\n</code></pre>\n<p><strong>ä¿®æ”¹åï¼š</strong></p>\n<pre><code class=\"language-javascript\">const stdio = resolveCommandStdio({ hasInput, preferInherit: true });\n// On Windows, npm must be spawned with shell: true or use .cmd extension\nlet command = argv[0];\nlet useShell = false;\nif (process.platform === \"win32\" &amp;&amp; path.basename(command) === \"npm\") {\n    useShell = true;\n}\nconst child = spawn(command, argv.slice(1), {\n    stdio,\n    cwd,\n    env: resolvedEnv,\n    shell: useShell,\n});\n</code></pre>\n<h3 id=\"q2-æç¤º-openclaw-å‘½ä»¤æ‰¾ä¸åˆ°\">Q2: æç¤º \"openclaw å‘½ä»¤æ‰¾ä¸åˆ°\"</h3>\n<p><strong>è§£å†³æ–¹æ³•ï¼š</strong></p>\n<ol>\n<li>å…³é—­æ‰€æœ‰ PowerShell çª—å£</li>\n<li>é‡æ–°æ‰“å¼€ PowerShell</li>\n<li>å¦‚æœè¿˜ä¸è¡Œï¼Œæ‰§è¡Œ <code>exec bash</code> æˆ–é‡å¯ç”µè„‘</li>\n</ol>\n<h3 id=\"q3-å®‰è£…å¡ä½ä¸åŠ¨\">Q3: å®‰è£…å¡ä½ä¸åŠ¨</h3>\n<p><strong>è§£å†³æ–¹æ³•ï¼š</strong></p>\n<ol>\n<li>æŒ‰ <code>Ctrl + C</code> ä¸­æ–­å½“å‰æ“ä½œ</li>\n<li>æ‰§è¡Œï¼š<code>openclaw doctor</code> æ£€æŸ¥é—®é¢˜</li>\n<li>å¦‚æç¤ºç½‘ç»œé—®é¢˜ï¼Œæ£€æŸ¥é˜²ç«å¢™è®¾ç½®</li>\n</ol>\n<h3 id=\"q4-api-key-é…ç½®é”™è¯¯\">Q4: API Key é…ç½®é”™è¯¯</h3>\n<p><strong>è§£å†³æ–¹æ³•ï¼š</strong></p>\n<ol>\n<li>æ‰§è¡Œï¼š<code>openclaw onboard</code></li>\n<li>é€‰æ‹©é‡æ–°é…ç½® API Key</li>\n<li>ç¡®ä¿å¯†é’¥æ ¼å¼æ­£ç¡®</li>\n</ol>\n<h3 id=\"q5-ç«¯å£-18789-è¢«å ç”¨\">Q5: ç«¯å£ 18789 è¢«å ç”¨</h3>\n<p><strong>è§£å†³æ–¹æ³•ï¼š</strong></p>\n<pre><code class=\"language-powershell\">openclaw gateway --port 18790\n</code></pre>\n<p>ä½¿ç”¨å…¶ä»–ç«¯å£å¯åŠ¨æœåŠ¡ã€‚</p>\n<h1 id=\"ä¹æˆæœ¬è¯´æ˜\">ä¹ã€æˆæœ¬è¯´æ˜</h1>\n<p>OpenClaw è½¯ä»¶æœ¬èº«å®Œå…¨å…è´¹ï¼Œä¸»è¦æˆæœ¬æ¥è‡ª AI æ¨¡å‹ API è°ƒç”¨ï¼Œå¯é€‰æ‹©å›½äº§å¤§æ¨¡å‹ï¼Œé™ä½æˆæœ¬ã€‚</p>\n<hr />\n<h1 id=\"ç»“è¯­\">ç»“è¯­</h1>\n<p>OpenClaw ä»£è¡¨äº†ä¸ªäºº AI åŠ©ç†çš„æœªæ¥è¶‹åŠ¿â€”â€”ä»\"èŠå¤©å·¥å…·\"è¿›åŒ–ä¸º\"æ‰§è¡Œå·¥å…·\"ã€‚è™½ç„¶ç›®å‰çš„é…ç½®è¿‡ç¨‹å¯¹å°ç™½ç”¨æˆ·æœ‰ä¸€å®šé—¨æ§›ï¼Œä½†ä¸€æ—¦å®Œæˆè®¾ç½®ï¼Œæ‚¨å°†æ‹¥æœ‰ä¸€ä¸ª 24/7 å¾…å‘½çš„è¶…çº§åŠ©æ‰‹ã€‚</p>\n\n\n</div>\n<div class=\"clear\"></div>\n\n\t\t</div>\n\t\t<div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-31 19:50</span>&nbsp;\n<a href=\"https://www.cnblogs.com/weipo0105\">é˜¿å¡RPA</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">136</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "Rediså¿«é€Ÿå®ç°å¸ƒéš†è¿‡æ»¤å™¨ï¼šç¼“å­˜å»é‡çš„â€œæ™ºèƒ½é—¨å«â€",
      "link": "https://www.cnblogs.com/sun-10387834/p/19522155",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/sun-10387834/p/19522155\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-31 18:32\">\n    <span>Rediså¿«é€Ÿå®ç°å¸ƒéš†è¿‡æ»¤å™¨ï¼šç¼“å­˜å»é‡çš„â€œæ™ºèƒ½é—¨å«â€</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<p>åœ¨ç¼“å­˜æ¶æ„ä¸­ï¼Œæ€»æœ‰ä¸€äº›â€œå¤´ç–¼é—®é¢˜â€ï¼šç”¨æˆ·åå¤æäº¤ç›¸åŒè¯·æ±‚ã€æŸ¥è¯¢ä¸å­˜åœ¨çš„keyå¯¼è‡´ç¼“å­˜ç©¿é€ã€æµ·é‡æ•°æ®å»é‡æ•ˆç‡ä½ä¸‹â€¦â€¦è¿™äº›åœºæ™¯ä¸‹ï¼ŒRediså¸ƒéš†è¿‡æ»¤å™¨å°±æ˜¯å½“ä¹‹æ— æ„§çš„â€œæ•‘æ˜Ÿâ€ã€‚å®ƒåƒä¸€ä¸ªæ™ºèƒ½é—¨å«ï¼Œèƒ½å¿«é€Ÿåˆ¤æ–­â€œè¿™ä¸ªäººæ˜¯ä¸æ˜¯æ¥è¿‡â€â€œè¿™ä¸ªkeyæ˜¯ä¸æ˜¯ä¸å­˜åœ¨â€ï¼Œç”¨æå°çš„ç©ºé—´æˆæœ¬å®ç°é«˜æ•ˆè¿‡æ»¤ï¼Œæ€§èƒ½è¿œè¶…ä¼ ç»Ÿçš„æ•°æ®åº“æŸ¥è¯¢æˆ–å…¨é‡ç¼“å­˜æ ¡éªŒã€‚</p>\n<p>ä»Šå¤©å’±ä»¬å°±ä»â€œæ˜¯ä»€ä¹ˆã€ä¸ºä»€ä¹ˆå¥½ç”¨ã€æ€ä¹ˆç”¨Rediså¿«é€Ÿå®ç°â€ä¸‰ä¸ªç»´åº¦ï¼Œç”¨é€šä¿—çš„è¯­è¨€+å®æ“ä»£ç ï¼ŒæŠŠå¸ƒéš†è¿‡æ»¤å™¨è®²é€ã€‚å…¨ç¨‹é¿å¼€å¤æ‚å…¬å¼ï¼Œå°±ç®—æ˜¯åˆšæ¥è§¦ç¼“å­˜çš„åŒå­¦ï¼Œä¹Ÿèƒ½è·Ÿç€æ­¥éª¤å¿«é€Ÿè½åœ°ã€‚</p>\n<h2 id=\"ä¸€å…ˆææ‡‚å¸ƒéš†è¿‡æ»¤å™¨åˆ°åº•æ˜¯ä¸ªå•¥\">ä¸€ã€å…ˆææ‡‚ï¼šå¸ƒéš†è¿‡æ»¤å™¨åˆ°åº•æ˜¯ä¸ªå•¥ï¼Ÿ</h2>\n<p>å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆBloom Filterï¼‰æœ¬è´¨æ˜¯ä¸€ä¸ª<strong>åŸºäºå“ˆå¸Œå‡½æ•°çš„æ¦‚ç‡å‹æ•°æ®ç»“æ„</strong>ï¼Œæ ¸å¿ƒä½œç”¨æ˜¯â€œå¿«é€Ÿåˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨äºé›†åˆä¸­â€ã€‚å®ƒä¸åƒå“ˆå¸Œè¡¨é‚£æ ·å­˜å‚¨å®Œæ•´æ•°æ®ï¼Œè€Œæ˜¯ç”¨ä¸€ä¸ªäºŒè¿›åˆ¶æ•°ç»„ï¼ˆbitæ•°ç»„ï¼‰+å¤šä¸ªå“ˆå¸Œå‡½æ•°ï¼Œé€šè¿‡æ ‡è®°å…ƒç´ çš„å“ˆå¸Œä½ç½®æ¥å®ç°è¿‡æ»¤ã€‚</p>\n<p>å’±ä»¬ç”¨â€œå°åŒºé—¨å«è®°è®¿å®¢â€çš„åœºæ™¯ç±»æ¯”ï¼Œç§’æ‡‚æ ¸å¿ƒé€»è¾‘ï¼š</p>\n<ul>\n<li>\n<p>äºŒè¿›åˆ¶æ•°ç»„ = é—¨å«çš„ç™»è®°æœ¬ï¼Œæ¯ä¸€é¡µåªæœ‰â€œæ˜¯â€ï¼ˆ1ï¼‰å’Œâ€œå¦â€ï¼ˆ0ï¼‰ä¸¤ä¸ªçŠ¶æ€ï¼›</p>\n</li>\n<li>\n<p>å“ˆå¸Œå‡½æ•° = é—¨å«çš„â€œè®°å¿†è§„åˆ™â€ï¼Œæ¯”å¦‚â€œè®°ä½è®¿å®¢çš„å§“æ°é¦–å­—æ¯+èº«é«˜åŒºé—´+é‹å­é¢œè‰²â€ï¼›</p>\n</li>\n<li>\n<p>å…ƒç´ å­˜åœ¨åˆ¤æ–­ = é—¨å«æ ¹æ®è®°å¿†è§„åˆ™æ ¸å¯¹ç™»è®°æœ¬ï¼Œåªè¦æœ‰ä¸€æ¡è§„åˆ™å¯¹åº”â€œå¦â€ï¼Œå°±ç¡®å®šè®¿å®¢æ²¡æ¥è¿‡ï¼›å¦‚æœå…¨æ˜¯â€œæ˜¯â€ï¼Œåˆ™å¤§æ¦‚ç‡æ¥è¿‡ï¼ˆå­˜åœ¨æå°è¯¯åˆ¤ï¼‰ã€‚</p>\n</li>\n</ul>\n<h3 id=\"æ ¸å¿ƒç‰¹æ€§ä¼˜ç‚¹ä¸å°ç‘•ç–µ\">æ ¸å¿ƒç‰¹æ€§ï¼šä¼˜ç‚¹ä¸â€œå°ç‘•ç–µâ€</h3>\n<p>å¸ƒéš†è¿‡æ»¤å™¨çš„ä¼˜åŠ¿å’Œå±€é™æ€§éƒ½å¾ˆé²œæ˜ï¼Œè½åœ°å‰å¿…é¡»æ‘¸æ¸…ï¼š</p>\n<h4 id=\"-æ ¸å¿ƒä¼˜ç‚¹\">âœ… æ ¸å¿ƒä¼˜ç‚¹</h4>\n<ul>\n<li>\n<p>ç©ºé—´å ç”¨æå°ï¼šä»…ç”¨bitæ•°ç»„å­˜å‚¨æ ‡è®°ï¼Œå­˜å‚¨100ä¸‡æ¡æ•°æ®ï¼Œè¯¯åˆ¤ç‡1%æ—¶ï¼Œä»…éœ€çº¦1.2MBç©ºé—´ï¼›</p>\n</li>\n<li>\n<p>æŸ¥è¯¢é€Ÿåº¦æå¿«ï¼šæ—¶é—´å¤æ‚åº¦æ˜¯O(k)ï¼ˆkæ˜¯å“ˆå¸Œå‡½æ•°ä¸ªæ•°ï¼‰ï¼Œæ— è®ºæ•°æ®é‡å¤šå¤§ï¼Œéƒ½èƒ½ç¬é—´è¿”å›ç»“æœï¼›</p>\n</li>\n<li>\n<p>æ”¯æŒæµ·é‡æ•°æ®ï¼šæ— éœ€å­˜å‚¨å®Œæ•´æ•°æ®ï¼Œå¯è½»æ¾åº”å¯¹åƒä¸‡çº§ã€äº¿çº§æ•°æ®çš„è¿‡æ»¤åœºæ™¯ã€‚</p>\n</li>\n</ul>\n<h4 id=\"-ä¸å¯å¿½è§†çš„å±€é™æ€§\">âŒ ä¸å¯å¿½è§†çš„å±€é™æ€§</h4>\n<ul>\n<li>\n<p>å­˜åœ¨è¯¯åˆ¤ç‡ï¼šåªèƒ½ç¡®å®šâ€œå…ƒç´ ä¸€å®šä¸å­˜åœ¨â€ï¼Œä¸èƒ½100%ç¡®å®šâ€œå…ƒç´ ä¸€å®šå­˜åœ¨â€ï¼Œè¯¯åˆ¤ç‡å¯é€šè¿‡å‚æ•°è°ƒæ•´ï¼Œä½†æ— æ³•å®Œå…¨æ¶ˆé™¤ï¼›</p>\n</li>\n<li>\n<p>ä¸æ”¯æŒåˆ é™¤æ“ä½œï¼šä¸€æ—¦å…ƒç´ è¢«æ ‡è®°åˆ°bitæ•°ç»„ï¼Œæ— æ³•åå‘æ¸…é™¤ï¼ˆä¼šå½±å“å…¶ä»–å…ƒç´ çš„åˆ¤æ–­ï¼‰ï¼›</p>\n</li>\n<li>\n<p>éœ€æå‰é¢„ä¼°æ•°æ®é‡ï¼šå“ˆå¸Œå‡½æ•°ä¸ªæ•°ã€bitæ•°ç»„é•¿åº¦éœ€æ ¹æ®é¢„ä¼°æ•°æ®é‡è®¡ç®—ï¼Œå¦åˆ™ä¼šå¯¼è‡´è¯¯åˆ¤ç‡é£™å‡ã€‚</p>\n</li>\n</ul>\n<h2 id=\"äºŒrediså®ç°å¸ƒéš†è¿‡æ»¤å™¨çš„ä¸¤ç§æ–¹å¼\">äºŒã€Rediså®ç°å¸ƒéš†è¿‡æ»¤å™¨çš„ä¸¤ç§æ–¹å¼</h2>\n<p>Redisæœ¬èº«æ²¡æœ‰å†…ç½®å¸ƒéš†è¿‡æ»¤å™¨ï¼Œä½†æä¾›äº†ä¸¤ç§å¿«é€Ÿå®ç°çš„æ–¹æ¡ˆï¼šä¸€æ˜¯åŸºäºRedisçš„BitMapï¼ˆä½å›¾ï¼‰æ‰‹åŠ¨å®ç°ï¼Œçµæ´»å¯æ§ï¼›äºŒæ˜¯ä½¿ç”¨Rediså®˜æ–¹æ¨èçš„Redissonå®¢æˆ·ç«¯ï¼Œå°è£…å¥½ç°æˆAPIï¼Œå¼€ç®±å³ç”¨ã€‚å’±ä»¬åˆ†åˆ«è®²å®æ“ï¼ŒæŒ‰éœ€é€‰æ‹©å³å¯ã€‚</p>\n<h3 id=\"æ–¹æ¡ˆä¸€åŸºäºbitmapæ‰‹åŠ¨å®ç°çµæ´»å¯æ§\">æ–¹æ¡ˆä¸€ï¼šåŸºäºBitMapæ‰‹åŠ¨å®ç°ï¼ˆçµæ´»å¯æ§ï¼‰</h3>\n<p>æ ¸å¿ƒæ€è·¯ï¼šåˆ©ç”¨Redisçš„BitMapæ•°æ®ç»“æ„ä½œä¸ºå¸ƒéš†è¿‡æ»¤å™¨çš„bitæ•°ç»„ï¼Œé€šè¿‡å¤šä¸ªå“ˆå¸Œå‡½æ•°è®¡ç®—å…ƒç´ çš„å“ˆå¸Œå€¼ï¼Œå°†å¯¹åº”ä½ç½®çš„bitç½®ä¸º1ï¼›æŸ¥è¯¢æ—¶ï¼ŒåŒæ ·è®¡ç®—å“ˆå¸Œå€¼ï¼Œæ£€æŸ¥æ‰€æœ‰ä½ç½®æ˜¯å¦ä¸º1ï¼Œå…¨ä¸º1åˆ™å¤§æ¦‚ç‡å­˜åœ¨ï¼Œå¦åˆ™ä¸€å®šä¸å­˜åœ¨ã€‚</p>\n<h4 id=\"1-å…³é”®å‚æ•°è®¡ç®—é¿å…è¯¯åˆ¤ç‡è¿‡é«˜\">1. å…³é”®å‚æ•°è®¡ç®—ï¼ˆé¿å…è¯¯åˆ¤ç‡è¿‡é«˜ï¼‰</h4>\n<p>æ‰‹åŠ¨å®ç°å‰ï¼Œéœ€å…ˆç¡®å®šä¸‰ä¸ªæ ¸å¿ƒå‚æ•°ï¼Œå¯é€šè¿‡å…¬å¼æˆ–åœ¨çº¿å·¥å…·è®¡ç®—ï¼š</p>\n<ul>\n<li>\n<p>mï¼šbitæ•°ç»„é•¿åº¦ï¼ˆå•ä½ï¼šbitï¼‰ï¼Œé¢„ä¼°æ•°æ®é‡nè¶Šå¤§ï¼Œméœ€è¶Šå¤§ï¼›</p>\n</li>\n<li>\n<p>kï¼šå“ˆå¸Œå‡½æ•°ä¸ªæ•°ï¼Œkè¿‡å¤šä¼šå¯¼è‡´bitæ•°ç»„å¿«é€Ÿè¢«å æ»¡ï¼Œè¯¯åˆ¤ç‡ä¸Šå‡ï¼›kè¿‡å°‘åˆ™è¿‡æ»¤æ•ˆæœå·®ï¼›</p>\n</li>\n<li>\n<p>pï¼šå¯æ¥å—çš„è¯¯åˆ¤ç‡ï¼ˆé€šå¸¸è®¾ä¸º0.01~0.1ï¼‰ã€‚</p>\n</li>\n</ul>\n<p>å¸¸ç”¨è®¡ç®—å…¬å¼ï¼ˆæ— éœ€æ­»è®°ï¼Œåœ¨çº¿å·¥å…·ç›´æ¥ç®—ï¼‰ï¼š</p>\n<ul>\n<li>\n<p>m = - (n * ln p) / (ln 2)Â² ï¼ˆbitæ•°ç»„é•¿åº¦ï¼‰ï¼›</p>\n</li>\n<li>\n<p>k = (m / n) * ln 2 ï¼ˆå“ˆå¸Œå‡½æ•°ä¸ªæ•°ï¼‰ã€‚</p>\n</li>\n</ul>\n<p>ä¸¾ä¸ªä¾‹å­ï¼šé¢„ä¼°å­˜å‚¨10ä¸‡æ¡æ•°æ®ï¼Œè¯¯åˆ¤ç‡è®¾ä¸º0.01ï¼Œè®¡ç®—å¾—mâ‰ˆ958505 bitï¼ˆçº¦117KBï¼‰ï¼Œkâ‰ˆ7ä¸ªå“ˆå¸Œå‡½æ•°ã€‚</p>\n<h4 id=\"2-æ‰‹åŠ¨å®ç°ä»£ç javaç¤ºä¾‹\">2. æ‰‹åŠ¨å®ç°ä»£ç ï¼ˆJavaç¤ºä¾‹ï¼‰</h4>\n<p>æ ¸å¿ƒæ˜¯å®ç°å¤šä¸ªå“ˆå¸Œå‡½æ•°ï¼Œæ“ä½œRedisçš„BitMapæŒ‡ä»¤ï¼ˆSETBITç½®1ï¼ŒGETBITæŸ¥è¯¢ï¼‰ï¼š</p>\n<pre><code class=\"language-java\">import org.springframework.data.redis.core.StringRedisTemplate;\nimport java.nio.charset.StandardCharsets;\nimport java.security.MessageDigest;\nimport java.security.NoSuchAlgorithmException;\n\n/**\n * åŸºäºRedis BitMapæ‰‹åŠ¨å®ç°å¸ƒéš†è¿‡æ»¤å™¨\n */\npublic class RedisBloomFilter {\n    // Redisé”®å\n    private final String key;\n    // bitæ•°ç»„é•¿åº¦\n    private final long bitSize;\n    // å“ˆå¸Œå‡½æ•°ä¸ªæ•°\n    private final int hashCount;\n    private final StringRedisTemplate stringRedisTemplate;\n\n    // æ„é€ å™¨ï¼šåˆå§‹åŒ–å‚æ•°\n    public RedisBloomFilter(String key, long n, double p, StringRedisTemplate stringRedisTemplate) {\n        this.key = key;\n        this.stringRedisTemplate = stringRedisTemplate;\n        // è®¡ç®—bitæ•°ç»„é•¿åº¦\n        this.bitSize = (long) (-n * Math.log(p) / (Math.log(2) * Math.log(2)));\n        // è®¡ç®—å“ˆå¸Œå‡½æ•°ä¸ªæ•°\n        this.hashCount = (int) (this.bitSize / n * Math.log(2));\n    }\n\n    // æ·»åŠ å…ƒç´ åˆ°å¸ƒéš†è¿‡æ»¤å™¨\n    public void add(Object value) {\n        byte[] bytes = value.toString().getBytes(StandardCharsets.UTF_8);\n        long[] hashes = hash(bytes, hashCount, bitSize);\n        for (long hash : hashes) {\n            // æŠŠå¯¹åº”bitä½ç½®ç½®ä¸º1\n            stringRedisTemplate.opsForValue().setBit(key, hash, true);\n        }\n    }\n\n    // åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼ˆå­˜åœ¨è¿”å›trueï¼Œä¸å­˜åœ¨è¿”å›falseï¼›trueå¯èƒ½æ˜¯è¯¯åˆ¤ï¼‰\n    public boolean contains(Object value) {\n        byte[] bytes = value.toString().getBytes(StandardCharsets.UTF_8);\n        long[] hashes = hash(bytes, hashCount, bitSize);\n        for (long hash : hashes) {\n            // åªè¦æœ‰ä¸€ä¸ªbitä½ä¸º0ï¼Œå°±ç¡®å®šä¸å­˜åœ¨\n            if (!stringRedisTemplate.opsForValue().getBit(key, hash)) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    // å¤šå“ˆå¸Œå‡½æ•°å®ç°ï¼ˆåŸºäºMD5æ‹†åˆ†ï¼‰\n    private long[] hash(byte[] bytes, int hashCount, long bitSize) {\n        long[] hashes = new long[hashCount];\n        try {\n            MessageDigest md5 = MessageDigest.getInstance(\"MD5\");\n            byte[] digest = md5.digest(bytes);\n            // æŠŠMD5ç»“æœï¼ˆ16å­—èŠ‚ï¼‰æ‹†åˆ†æˆå¤šä¸ªå“ˆå¸Œå€¼\n            for (int i = 0; i &lt; hashCount; i++) {\n                long hash = 0;\n                for (int j = i * 2; j &lt; (i + 1) * 2 &amp;&amp; j &lt; digest.length; j++) {\n                    hash = hash * 256 + (digest[j] &amp; 0xFF);\n                }\n                // ç¡®ä¿å“ˆå¸Œå€¼åœ¨bitæ•°ç»„é•¿åº¦èŒƒå›´å†…\n                hashes[i] = hash % bitSize;\n            }\n        } catch (NoSuchAlgorithmException e) {\n            throw new RuntimeException(\"å“ˆå¸Œå‡½æ•°åˆå§‹åŒ–å¤±è´¥\", e);\n        }\n        return hashes;\n    }\n}\n</code></pre>\n<h4 id=\"3-ä½¿ç”¨æ–¹å¼\">3. ä½¿ç”¨æ–¹å¼</h4>\n<pre><code class=\"language-java\">// åˆå§‹åŒ–å¸ƒéš†è¿‡æ»¤å™¨ï¼škeyä¸º\"user:bloom:filter\"ï¼Œé¢„ä¼°10ä¸‡æ¡æ•°æ®ï¼Œè¯¯åˆ¤ç‡0.01\nRedisBloomFilter bloomFilter = new RedisBloomFilter(\"user:bloom:filter\", 100000, 0.01, stringRedisTemplate);\n\n// æ·»åŠ å…ƒç´ \nbloomFilter.add(\"user123\");\nbloomFilter.add(\"order456\");\n\n// åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨\nboolean exists = bloomFilter.contains(\"user123\"); // å¤§æ¦‚ç‡è¿”å›true\nboolean notExists = bloomFilter.contains(\"user789\"); // ä¸€å®šè¿”å›false\n</code></pre>\n<h3 id=\"æ–¹æ¡ˆäºŒredissonå®¢æˆ·ç«¯å®ç°å¼€ç®±å³ç”¨\">æ–¹æ¡ˆäºŒï¼šRedissonå®¢æˆ·ç«¯å®ç°ï¼ˆå¼€ç®±å³ç”¨ï¼‰</h3>\n<p>å¦‚æœè§‰å¾—æ‰‹åŠ¨å®ç°éº»çƒ¦ï¼Œæ¨èç”¨Redissonâ€”â€”Rediså®˜æ–¹ç”Ÿæ€çš„Javaå®¢æˆ·ç«¯ï¼Œå·²ç»å°è£…å¥½äº†å¸ƒéš†è¿‡æ»¤å™¨ï¼Œæ”¯æŒè‡ªåŠ¨è®¡ç®—å‚æ•°ã€åˆ†å¸ƒå¼åœºæ™¯ï¼Œè¿˜è§£å†³äº†æ‰‹åŠ¨å®ç°çš„å“ˆå¸Œå‡½æ•°ä¼˜åŒ–é—®é¢˜ï¼Œç”Ÿäº§ç¯å¢ƒé¦–é€‰ã€‚</p>\n<h4 id=\"1-å¼•å…¥ä¾èµ–\">1. å¼•å…¥ä¾èµ–</h4>\n<pre><code class=\"language-xml\">&lt;dependency&gt;\n    &lt;groupId&gt;org.redisson&lt;/groupId&gt;\n    &lt;artifactId&gt;redisson-spring-boot-starter&lt;/artifactId&gt;\n    &lt;version&gt;3.23.3&lt;/version&gt; // ç‰ˆæœ¬ä¸Redisç‰ˆæœ¬é€‚é…\n&lt;/dependency&gt;\n</code></pre>\n<h4 id=\"2-å¿«é€Ÿå®ç°ä»£ç \">2. å¿«é€Ÿå®ç°ä»£ç </h4>\n<pre><code class=\"language-java\">import org.redisson.api.RBloomFilter;\nimport org.redisson.api.RedissonClient;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class RedissonBloomFilterDemo {\n    @Autowired\n    private RedissonClient redissonClient;\n\n    // åˆå§‹åŒ–å¸ƒéš†è¿‡æ»¤å™¨\n    public RBloomFilter&lt;String&gt; initBloomFilter() {\n        // å¸ƒéš†è¿‡æ»¤å™¨åç§°\n        String filterName = \"user:bloom:filter:redisson\";\n        // è·å–å¸ƒéš†è¿‡æ»¤å™¨å®ä¾‹\n        RBloomFilter&lt;String&gt; bloomFilter = redissonClient.getBloomFilter(filterName);\n        // åˆå§‹åŒ–ï¼šé¢„ä¼°10ä¸‡æ¡æ•°æ®ï¼Œè¯¯åˆ¤ç‡0.01ï¼ˆRedissonä¼šè‡ªåŠ¨è®¡ç®—må’Œkï¼‰\n        bloomFilter.tryInit(100000, 0.01);\n        return bloomFilter;\n    }\n\n    // æµ‹è¯•ä½¿ç”¨\n    public void testBloomFilter() {\n        RBloomFilter&lt;String&gt; bloomFilter = initBloomFilter();\n        // æ·»åŠ å…ƒç´ \n        bloomFilter.add(\"user123\");\n        bloomFilter.add(\"order456\");\n\n        // åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨\n        boolean exists = bloomFilter.contains(\"user123\"); // å¤§æ¦‚ç‡true\n        boolean notExists = bloomFilter.contains(\"user789\"); // ä¸€å®šfalse\n\n        // ç»Ÿè®¡å·²æ·»åŠ å…ƒç´ æ•°é‡ï¼ˆè¿‘ä¼¼å€¼ï¼‰\n        long count = bloomFilter.count();\n        System.out.println(\"å·²æ·»åŠ å…ƒç´ æ•°é‡ï¼š\" + count);\n    }\n}\n</code></pre>\n<h4 id=\"3-æ ¸å¿ƒä¼˜åŠ¿\">3. æ ¸å¿ƒä¼˜åŠ¿</h4>\n<ul>\n<li>\n<p>åˆ†å¸ƒå¼æ”¯æŒï¼šé€‚é…å¾®æœåŠ¡åœºæ™¯ï¼Œå¤šå®ä¾‹å…±äº«åŒä¸€ä¸ªå¸ƒéš†è¿‡æ»¤å™¨ï¼Œæ— éœ€æ‹…å¿ƒæ•°æ®ä¸€è‡´æ€§ï¼›</p>\n</li>\n<li>\n<p>å‚æ•°ä¼˜åŒ–ï¼šå†…ç½®æ›´é«˜æ•ˆçš„å“ˆå¸Œå‡½æ•°ï¼ˆMurmurHashï¼‰ï¼Œè¯¯åˆ¤ç‡æ§åˆ¶æ›´ç²¾å‡†ï¼›</p>\n</li>\n<li>\n<p>APIä¸°å¯Œï¼šæ”¯æŒå…ƒç´ è®¡æ•°ã€æ‰¹é‡æ·»åŠ ç­‰åŠŸèƒ½ï¼Œæ¯”æ‰‹åŠ¨å®ç°æ›´å®Œå–„ã€‚</p>\n</li>\n</ul>\n<h2 id=\"ä¸‰å®é™…åº”ç”¨åœºæ™¯ä¸é¿å‘æŒ‡å—\">ä¸‰ã€å®é™…åº”ç”¨åœºæ™¯ä¸é¿å‘æŒ‡å—</h2>\n<h3 id=\"-å…¸å‹åº”ç”¨åœºæ™¯\">âœ… å…¸å‹åº”ç”¨åœºæ™¯</h3>\n<ol>\n<li>\n<p>ç¼“å­˜ç©¿é€é˜²æŠ¤ï¼šæŸ¥è¯¢æ•°æ®åº“å‰ï¼Œå…ˆç”¨å¸ƒéš†è¿‡æ»¤å™¨åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨åˆ™ç›´æ¥è¿”å›ï¼Œé¿å…å¤§é‡æ— æ•ˆæ•°æ®åº“æŸ¥è¯¢ï¼›</p>\n</li>\n<li>\n<p>æµ·é‡æ•°æ®å»é‡ï¼šæ¯”å¦‚ç”¨æˆ·ç­¾åˆ°ã€æ—¥å¿—å»é‡ã€çˆ¬è™«URLå»é‡ï¼Œæ— éœ€å­˜å‚¨å…¨é‡æ•°æ®ï¼Œä»…ç”¨bitæ•°ç»„æ ‡è®°ï¼›</p>\n</li>\n<li>\n<p>é˜²æ­¢é‡å¤æäº¤ï¼šæ¥å£è¯·æ±‚å‰ï¼Œç”¨å¸ƒéš†è¿‡æ»¤å™¨åˆ¤æ–­è¯·æ±‚IDæ˜¯å¦å·²å¤„ç†ï¼Œé¿å…é‡å¤ä¸šåŠ¡é€»è¾‘æ‰§è¡Œï¼›</p>\n</li>\n<li>\n<p>é»‘åå•è¿‡æ»¤ï¼šæ¯”å¦‚åƒåœ¾é‚®ä»¶è¯†åˆ«ã€æ¶æ„IPæ‹¦æˆªï¼Œå¿«é€Ÿåˆ¤æ–­æ˜¯å¦åœ¨é»‘åå•ä¸­ã€‚</p>\n</li>\n</ol>\n<h3 id=\"-é¿å‘æŒ‡å—\">âŒ é¿å‘æŒ‡å—</h3>\n<ul>\n<li>\n<p>ä¸è¦ç”¨åœ¨â€œç»å¯¹ä¸èƒ½è¯¯åˆ¤â€çš„åœºæ™¯ï¼šæ¯”å¦‚é‡‘èäº¤æ˜“ã€ç”¨æˆ·ç™»å½•éªŒè¯ï¼Œè¯¯åˆ¤å¯èƒ½å¯¼è‡´ä¸¥é‡é—®é¢˜ï¼›</p>\n</li>\n<li>\n<p>æå‰é¢„ä¼°æ•°æ®é‡ï¼šè‹¥å®é™…æ•°æ®é‡è¿œè¶…é¢„ä¼°ï¼Œbitæ•°ç»„ä¼šè¢«å¿«é€Ÿå æ»¡ï¼Œè¯¯åˆ¤ç‡ä¼šæ€¥å‰§ä¸Šå‡ï¼Œå¯é¢„ç•™2~3å€å†—ä½™ï¼›</p>\n</li>\n<li>\n<p>å®šæœŸé‡ç½®å¸ƒéš†è¿‡æ»¤å™¨ï¼šè‹¥æ•°æ®æœ‰è¿‡æœŸç‰¹æ€§ï¼ˆæ¯”å¦‚æ¯æ—¥é»‘åå•æ›´æ–°ï¼‰ï¼Œå¯å®šæœŸåˆ é™¤æ—§çš„å¸ƒéš†è¿‡æ»¤å™¨ï¼Œé‡å»ºæ–°å®ä¾‹ï¼›</p>\n</li>\n<li>\n<p>Redisé›†ç¾¤æ³¨æ„äº‹é¡¹ï¼šæ‰‹åŠ¨å®ç°çš„å¸ƒéš†è¿‡æ»¤å™¨è‹¥ç”¨åœ¨Redisé›†ç¾¤ä¸­ï¼Œéœ€ç¡®ä¿keyè½åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ï¼ˆé¿å…å“ˆå¸Œåˆ†ç‰‡å¯¼è‡´bitæ•°ç»„åˆ†æ•£ï¼‰ï¼ŒRedissonå·²è‡ªåŠ¨å¤„ç†è¯¥é—®é¢˜ã€‚</p>\n</li>\n</ul>\n<h2 id=\"å››æ€»ç»“ä»€ä¹ˆæ—¶å€™é€‰å“ªç§å®ç°æ–¹å¼\">å››ã€æ€»ç»“ï¼šä»€ä¹ˆæ—¶å€™é€‰å“ªç§å®ç°æ–¹å¼ï¼Ÿ</h2>\n<p>Rediså¸ƒéš†è¿‡æ»¤å™¨çš„æ ¸å¿ƒä»·å€¼çš„æ˜¯â€œç”¨æå°ç©ºé—´æ¢æé«˜è¿‡æ»¤æ•ˆç‡â€ï¼Œè½åœ°æ—¶æŒ‰åœºæ™¯é€‰æ‹©å®ç°æ–¹å¼ï¼š</p>\n<ul>\n<li>\n<p>å¿«é€Ÿè½åœ°ã€ç”Ÿäº§ç¯å¢ƒã€åˆ†å¸ƒå¼åœºæ™¯ï¼šé€‰Redissonï¼Œçœå¿ƒé«˜æ•ˆï¼Œé€‚é…æ€§å¼ºï¼›</p>\n</li>\n<li>\n<p>å­¦ä¹ ç ”ç©¶ã€è‡ªå®šä¹‰å“ˆå¸Œå‡½æ•°ã€ç‰¹æ®Šå‚æ•°éœ€æ±‚ï¼šé€‰æ‰‹åŠ¨å®ç°ï¼Œçµæ´»å¯æ§ï¼ŒåŠ æ·±å¯¹åŸç†çš„ç†è§£ã€‚</p>\n</li>\n</ul>\n<p>å…¶å®å¸ƒéš†è¿‡æ»¤å™¨çš„é€»è¾‘å¹¶ä¸å¤æ‚ï¼Œæ ¸å¿ƒå°±æ˜¯â€œå“ˆå¸Œæ ‡è®°+æ¦‚ç‡åˆ¤æ–­â€ã€‚æŒæ¡å®ƒä¹‹åï¼Œé¢å¯¹ç¼“å­˜ç©¿é€ã€æµ·é‡å»é‡ç­‰é—®é¢˜ï¼Œå°±ä¸ç”¨å†é â€œå…¨é‡å­˜å‚¨â€è¿™ç§ç¬¨åŠæ³•ï¼Œèƒ½å¤§å¹…æå‡ç³»ç»Ÿæ€§èƒ½å’Œç©ºé—´åˆ©ç”¨ç‡ã€‚ä¸‹æ¬¡å†é‡åˆ°ç±»ä¼¼åœºæ™¯ï¼Œç›´æ¥æå‡ºRediså¸ƒéš†è¿‡æ»¤å™¨ï¼Œè½»æ¾æå®šï¼</p>\n\n\n</div>\n<div id=\"MySignature\">\n    \n<p>â¤ï¸ å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·ç‚¹èµæ”¯æŒï¼ ğŸ‘ åŒæ—¶æ¬¢è¿å…³æ³¨æˆ‘çš„åšå®¢ï¼Œè·å–æ›´å¤šç²¾å½©å†…å®¹ï¼</p>\n\n<p>æœ¬æ–‡æ¥è‡ªåšå®¢å›­ï¼Œä½œè€…ï¼š<a href=\"https://www.cnblogs.com/sun-10387834/\" target=\"_blank\">ä½›ç¥–è®©æˆ‘æ¥å·¡å±±</a>ï¼Œè½¬è½½è¯·æ³¨æ˜åŸæ–‡é“¾æ¥ï¼š<a href=\"https://www.cnblogs.com/sun-10387834/p/19522155\" target=\"_blank\">https://www.cnblogs.com/sun-10387834/p/19522155</a></p>\n\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-31 18:32</span>&nbsp;\n<a href=\"https://www.cnblogs.com/sun-10387834\">ä½›ç¥–è®©æˆ‘æ¥å·¡å±±</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">48</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "æ¶æ„å¸ˆå¿…å¤‡ï¼šç°åº¦æ–¹æ¡ˆæ±‡æ€»",
      "link": "https://www.cnblogs.com/toplist/p/19527704",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/toplist/p/19527704\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-31 17:35\">\n    <span>æ¶æ„å¸ˆå¿…å¤‡ï¼šç°åº¦æ–¹æ¡ˆæ±‡æ€»</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯Javaçƒ˜ç„™å¸ˆã€‚æœ¬æ–‡ç»“åˆç¬”è€…çš„ç»éªŒå’Œæ€è€ƒï¼Œå¯¹ç°åº¦æ–¹æ¡ˆåšä¸ªæ€»ç»“ï¼Œé‡ç‚¹ä»‹ç»ABå®éªŒã€‚</p>\n<p>ç°åº¦åœ¨å¼€å‘æµç¨‹ä¸­éå¸¸æ™®éã€‚å…ˆåšå°æµé‡éªŒè¯ï¼Œç¡®è®¤æ— è¯¯åå†æ¨å…¨ï¼Œç°åº¦è¿‡ç¨‹ä¸­ä¸€æ—¦å‘ç°ç³»ç»Ÿå¼‚å¸¸ã€æˆ–ä¸šåŠ¡æŒ‡æ ‡å¼‚å¸¸ï¼Œåº”ç«‹åˆ»å›æ»šã€‚</p>\n<h1 id=\"ç°åº¦åœºæ™¯\">ç°åº¦åœºæ™¯</h1>\n<ul>\n<li>ä»£ç ç°åº¦ï¼šæ˜¯æœ€å…¸å‹çš„ç°åº¦ï¼Œç°åº¦å†…åšæ–°é€»è¾‘ï¼Œç°åº¦å¤–åšæ—§é€»è¾‘\n<ul>\n<li>æ—¢å¯ä»¥æä¾›v2ç‰ˆæœ¬æ–°æ¥å£ç»™è°ƒç”¨æ–¹æœåŠ¡ï¼Œç”±è°ƒç”¨æ–¹æ¥åšç°åº¦åˆ‡æ¢</li>\n<li>ä¹Ÿå¯ä»¥å†…éƒ¨åˆ‡ç°åº¦ï¼Œåšåˆ°è°ƒç”¨æ–¹æ— æ„Ÿ</li>\n</ul>\n</li>\n<li>å‘ç‰ˆç°åº¦ï¼šä¸Šçº¿è¿‡ç¨‹ä¸­ï¼Œæ–°ç‰ˆæœ¬æœåŠ¡å®ä¾‹ä¸æ–­å¢åŠ ï¼Œéœ€è€ƒè™‘å…¼å®¹æ–°æ—§åè®®</li>\n<li>é…ç½®ç°åº¦ï¼šä¿®æ”¹é…ç½®æ—¶ï¼ŒæŒ‰æœåŠ¡å®ä¾‹ç°åº¦æ¨é€é…ç½®å˜æ›´</li>\n</ul>\n<h1 id=\"ç°åº¦æ¨¡å¼\">ç°åº¦æ¨¡å¼</h1>\n<ul>\n<li>æ•°å­—idå°¾å·ç°åº¦ï¼šå–idæœ€å2ä½ï¼ˆç™¾åˆ†æ¯”ï¼‰ã€æœ€å3ä½ï¼ˆåƒåˆ†æ¯”ï¼‰ã€æœ€å4ä½ï¼ˆä¸‡åˆ†æ¯”ï¼‰ç­‰\n<ul>\n<li>å®ç°æ–¹å¼ï¼šidå–æ¨¡ï¼Œä¾‹å¦‚ <code>id % 100 &lt; ç°åº¦ç™¾åˆ†æ¯”</code>ï¼Œåˆ™å‘½ä¸­ç°åº¦</li>\n<li>ç‰¹ç‚¹ï¼šç®€å•ï¼Œé€‚ç”¨äºç»å¤§éƒ¨åˆ†æŠ€æœ¯ä¼˜åŒ–åœºæ™¯</li>\n</ul>\n</li>\n<li>éšæœºç°åº¦ï¼šå–ä¸€éƒ¨åˆ†éšæœºæµé‡åšç°åº¦\n<ul>\n<li>å®ç°æ–¹å¼ï¼š<code>ThreadLocalRandom.current().nextInt(100) &lt; ç°åº¦ç™¾åˆ†æ¯”</code></li>\n<li>ä¹‹æ‰€ä»¥ä½¿ç”¨ThreadLocalRandomã€è€Œä¸æ˜¯Randomï¼Œæ˜¯ä¸ºäº†é¿å…å¤šçº¿ç¨‹ç«äº‰ç”¨äºç”Ÿæˆéšæœºæ•°çš„seed</li>\n</ul>\n</li>\n<li>A/Bå®éªŒ\n<ul>\n<li>å®ç°æ–¹å¼ï¼šåˆ†å±‚å®éªŒã€å®éªŒæ•°æ®æ”¶é›†ã€ç¦»çº¿ç»Ÿè®¡</li>\n<li>ç‰¹ç‚¹ï¼šé€‚ç”¨äºå°æµé‡éªŒè¯æ–°ä¸šåŠ¡åŠŸèƒ½çš„æ•ˆæœï¼Œæ•´ä½“æ–¹æ¡ˆç›¸å¯¹å¤æ‚ï¼Œéœ€è¦æŠ€æœ¯åŸºå»º</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"idé€‰å–\">idé€‰å–</h1>\n<ul>\n<li>ä¸šåŠ¡idï¼šå¦‚ç”¨æˆ·idã€å•†å“idç­‰</li>\n<li>è®¾å¤‡idï¼šæœªæ³¨å†Œ/æœªç™»å½•ç”¨æˆ·ï¼Œæ­¤æ—¶æ²¡æœ‰ç”¨æˆ·idï¼Œåªèƒ½å–è®¾å¤‡çš„å”¯ä¸€æ ‡è¯†</li>\n</ul>\n<p>ä¸‹é¢é‡ç‚¹ä»‹ç»ä¸€ä¸‹A/Bå®éªŒã€‚</p>\n<h1 id=\"abå®éªŒ\">A/Bå®éªŒ</h1>\n<h2 id=\"ç›®çš„\">ç›®çš„</h2>\n<ul>\n<li>å°æµé‡éªŒè¯æ–°ä¸šåŠ¡åŠŸèƒ½ï¼Œæ­£å‘æ˜¾è‘—åˆ™æ¨è‡³å…¨é‡ï¼Œå¦åˆ™ç»§ç»­è¿­ä»£ä¼˜åŒ–ã€æˆ–ä¸‹çº¿ï¼Œé¿å…åŠŸèƒ½è¿‡äºè‡ƒè‚¿</li>\n<li>ç”¨æ•°æ®ä½œä¸ºä¾æ®ï¼Œé¿å…æƒ³å½“ç„¶ã€æ‹è„‘è¢‹å†³ç­–</li>\n</ul>\n<h2 id=\"åˆ†å±‚å®éªŒ\">åˆ†å±‚å®éªŒ</h2>\n<p>ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†åŒæ—¶åšå¤šä¸ªå®éªŒï¼Œè€Œä¸æ˜¯ç»™æ¯ä¸ªå®éªŒå‡åˆ†ä¸€éƒ¨åˆ†æµé‡ã€‚å› ä¸ºå½“åŒæ—¶è¿›è¡Œçš„å®éªŒå˜å¤šæ—¶ï¼Œç»„åˆæ•°é‡æˆå€å¢åŠ ï¼Œæ¯ä¸ªå®éªŒåˆ†åˆ°çš„æµé‡å°±å¾ˆå°‘äº†ã€‚<br />\næœ‰è¿™å‡ å±‚ç»“æ„ï¼šå®éªŒå±‚ã€å®éªŒã€åˆ†ç»„</p>\n<ul>\n<li>å®éªŒå±‚ä¹‹é—´æ­£äº¤ï¼Œå¯åŒæ—¶è¿›è¡Œå¤šä¸ªå®éªŒå±‚çš„å®éªŒ</li>\n<li>åŒä¸€å®éªŒå±‚çš„å®éªŒä¹‹é—´äº’æ–¥ï¼Œæ¯”å¦‚å‘½ä¸­äº†å®éªŒ1-1ï¼Œå°±ä¸ä¼šå‘½ä¸­å®éªŒ1-2ã€‚å®éªŒæŒæœ‰0åˆ°å¤šä¸ªåˆ†æ¡¶ï¼Œæ ¹æ®ä¸šåŠ¡idå¯è®¡ç®—å‡ºæ¡¶å·ï¼Œè¿›è€ŒçŸ¥é“å‘½ä¸­å“ªä¸ªå®éªŒ</li>\n<li>åŒä¸€å®éªŒå†…æœ‰å¤šä¸ªåˆ†ç»„ï¼ŒåŒ…æ‹¬1ä¸ªå¯¹ç…§ç»„ï¼Œå’Œ1åˆ°å¤šä¸ªå®éªŒç»„ï¼Œåªä¼šå‘½ä¸­å…¶ä¸­ä¸€ä¸ªåˆ†ç»„ã€‚åˆ†ç»„æŒæœ‰0åˆ°å¤šä¸ªåˆ†æ¡¶ï¼Œæ ¹æ®ä¸šåŠ¡idå¯è®¡ç®—å‡ºæ¡¶å·ï¼Œè¿›è€ŒçŸ¥é“å‘½ä¸­å“ªä¸ªåˆ†ç»„</li>\n</ul>\n<p>å®éªŒå±‚ã€å®éªŒä¸¾ä¾‹ï¼š</p>\n<ul>\n<li>å±•ç¤ºå®éªŒå±‚ï¼šæ ¹æ®é¡µé¢è¿›è¡Œåˆ’åˆ†ï¼Œå¦‚é¦–é¡µã€æœç´¢é¡µã€æ¨èé¡µã€è¯¦æƒ…é¡µç­‰ã€‚æ¯ä¸ªé¡µé¢ä½œä¸ºä¸€ä¸ªå®éªŒå±‚ï¼Œæ¯ä¸ªå®éªŒå±‚é‡Œå¯åŒæ—¶åšå¤šä¸ªå±•ç¤ºå®éªŒ</li>\n<li>ç®—æ³•å®éªŒå±‚ï¼šæ ¹æ®åœºæ™¯è¿›è¡Œåˆ’åˆ†ï¼Œå¦‚ç›¸ä¼¼æ¨èã€æ­é…è´­æ¨èã€ä¸ªæ€§åŒ–æ¨èã€æœç´¢æ’åºã€å¹¿å‘Šæ’åºç­‰ã€‚æ¯ä¸ªåœºæ™¯ä½œä¸ºä¸€ä¸ªå®éªŒå±‚ï¼Œæ¯ä¸ªå®éªŒå±‚é‡Œå¯åŒæ—¶åšå¤šä¸ªç®—æ³•å®éªŒ</li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/1247698/202601/1247698-20260127012326894-198795136.png\" /></p>\n<h2 id=\"å“ˆå¸Œç®—æ³•æ‰“æ•£\">å“ˆå¸Œç®—æ³•æ‰“æ•£</h2>\n<p>è¦åŒæ—¶æ”¯æŒå¤šä¸ªåˆ†å±‚å®éªŒï¼Œæ ¸å¿ƒåœ¨äºé€šè¿‡å“ˆå¸Œç®—æ³•å°†æ¯ä¸€å±‚çš„æµé‡æ‰“æ•£ï¼Œç”¨äºå®ç°â€œå‡åŒ€åˆ†æµâ€å’Œâ€œå±‚é—´æ­£äº¤â€ï¼Œä½¿å¾—æµé‡åœ¨å„ä¸ªå®éªŒçš„æ•ˆæœæ­£è´ŸæŠµæ¶ˆï¼Œæ‰èƒ½å¾—åˆ°çœŸå®çš„å¯¹æ¯”ç»“æœã€‚<br />\nä»¥ä¸‹æ˜¯è®¡ç®—å®éªŒå±‚æ¡¶å·çš„ä»£ç ç¤ºä¾‹ï¼Œå®éªŒæ¡¶å·åŒç†ï¼š</p>\n<pre><code class=\"language-java\">import com.google.common.hash.Hashing;\nimport java.nio.charset.StandardCharsets;\n\npublic class ABTestRouter {\n\n    /**\n     * æ ¹æ®ç”¨æˆ·IDå’Œå®éªŒå±‚IDï¼ˆå®éªŒå±‚IDå……å½“ç›çš„è§’è‰²ï¼‰ï¼Œè®¡ç®—æ¡¶å· (0-99)\n     */\n    public static int getBucket(String userId, String layerId) {\n        // 1. æ‹¼æ¥ Key: \"layerId:userId\"\n        String key = layerId + \":\" + userId;\n\n        // 2. ä½¿ç”¨ MurmurHash3 (32-bit)\n        // Guava çš„ murmur3_32_fixed æ˜¯çº¿ç¨‹å®‰å…¨çš„\n        int hash = Hashing.murmur3_32_fixed()\n                .hashString(key, StandardCharsets.UTF_8)\n                .asInt();\n\n        // 3. å–æ¨¡å¹¶ç¡®ä¿ç»“æœä¸ºæ­£æ•°\n        // Math.abs(Integer.MIN_VALUE) ä¼šè¿”å›è´Ÿæ•°ï¼Œæ‰€ä»¥æ¨èä½¿ç”¨ä½è¿ç®—å»é™¤ç¬¦å·ä½\n        return (hash &amp; Integer.MAX_VALUE) % 100;\n    }\n\n    public static void main(String[] args) {\n        String uid = \"user_123456\";\n        \n        // ä¸åŒå±‚çš„æµé‡æ˜¯æ­£äº¤çš„ï¼ˆæ‰“æ•£é‡æ–°åˆ†é…ï¼‰\n        System.out.println(\"å±•ç¤ºå±‚æ¡¶å·: \" + getBucket(uid, \"layer_ui\"));\n        System.out.println(\"ç®—æ³•å±‚æ¡¶å·: \" + getBucket(uid, \"layer_algo\"));\n    }\n}\n</code></pre>\n<p>ä¹‹æ‰€ä»¥ç”¨murmurhashï¼Œè€Œémd5ï¼Œæ˜¯å› ä¸ºmd5æ˜¯åŠ å¯†ç®—æ³•ï¼Œè®¡ç®—å¼€é”€æ›´å¤§ï¼Œåœ¨ABå®éªŒä¸­ä»…éœ€å‡åŒ€æ‰“æ•£å³å¯ï¼Œæ— éœ€æ‹…å¿ƒæ ¹æ®å“ˆå¸Œç»“æœåæ¨åŸæ–‡ã€‚<br />\nä¹‹æ‰€ä»¥æŠŠå®éªŒå±‚idä½œä¸ºç›ï¼Œæ˜¯å› ä¸ºå¾®å°çš„è¾“å…¥å·®å¼‚éƒ½ä¼šå¯¼è‡´å“ˆå¸Œç»“æœç›¸å·®å·¨å¤§ï¼Œå®ç°æ‰“æ•£çš„æ•ˆæœã€‚</p>\n<h2 id=\"å®éªŒæ•°æ®æ”¶é›†\">å®éªŒæ•°æ®æ”¶é›†</h2>\n<p>å®éªŒæ•°æ®æ”¶é›†æµç¨‹å¦‚ä¸‹ï¼š</p>\n<ul>\n<li>åœ¨ABå®éªŒç®¡ç†ç³»ç»Ÿä¸­é…ç½®å®éªŒä¿¡æ¯ï¼šå¦‚å®éªŒç›å€¼ã€æ¡¶å·ä¸å®éªŒç»„çš„æ˜ å°„å…³ç³»ç­‰ï¼Œå¯åŠ¨æ€ä¿®æ”¹</li>\n<li>ä»£ç é€»è¾‘å¼€å‘ï¼š\n<ul>\n<li>å¼•å…¥å®éªŒsdkï¼Œsdkåœ¨å¯åŠ¨ã€æˆ–é…ç½®å˜æ›´æ—¶æ‹‰å–å®éªŒä¿¡æ¯ï¼Œæœ¬åœ°è®¡ç®—ä¸šåŠ¡idçš„æ¡¶å·ï¼Œè¿›è€Œå¾—åˆ°å‘½ä¸­çš„åˆ†ç»„</li>\n<li>å¯¹ç…§ç»„åšå½“å‰é€»è¾‘ï¼Œå®éªŒç»„1åšé€»è¾‘1ï¼Œå®éªŒç»„2åšé€»è¾‘2</li>\n</ul>\n</li>\n<li>åœ¨æ­£å¼å¼€å§‹ABå®éªŒä¹‹å‰ï¼Œå…ˆåšAAåˆ†æ¡¶å®éªŒï¼Œæ¨¡æ‹Ÿå®éªŒç»„ã€å¯¹ç…§ç»„çš„ç»“æœï¼Œåˆ¤æ–­æ˜¯å¦å‡åŒ€ï¼Œé¿å…åˆ†æ¡¶ä¸å‡åŒ€å¸¦æ¥é”™è¯¯çš„å®éªŒç»“æœ</li>\n<li>å®éªŒå¼€å§‹ï¼Œåç«¯åŸ‹ç‚¹ï¼šsdkå‘å‡ºåç«¯åŸ‹ç‚¹æ¶ˆæ¯\n<ul>\n<li>æ¶ˆæ¯æ ¼å¼ä¸¾ä¾‹ï¼š<code>ä¸šåŠ¡id, å®éªŒå±‚id, å®éªŒid, åˆ†ç»„id, æ¡¶å·, è§¦å‘æ—¶é—´</code></li>\n</ul>\n</li>\n<li>å®éªŒè¿‡ç¨‹ï¼šå®éªŒæŒç»­æ—¶é—´è‡³å°‘ä¸€å‘¨ï¼Œè¦†ç›–å·¥ä½œæ—¥ã€å‘¨æœ«/å‡æœŸï¼Œé¿å…å—æ—¶é—´å‘¨æœŸå¸¦æ¥çš„æ³¢åŠ¨å½±å“</li>\n<li>ç¦»çº¿ç»Ÿè®¡å®éªŒæ•ˆæœï¼š\n<ul>\n<li>åç«¯åŸ‹ç‚¹æ•°æ®å¯¼å…¥æ›å…‰äº‹ä»¶hiveè¡¨</li>\n<li>ä¸šåŠ¡DBæ•°æ®å¯¼å…¥è¡Œä¸ºäº‹ä»¶hiveè¡¨ï¼Œå¦‚æ³¨å†Œã€ç™»å½•ã€æµè§ˆã€ç‚¹å‡»ã€æ”¶è—ã€åŠ è´­ã€ä¸‹å•ã€æ”¯ä»˜ç­‰ï¼Œå–å†³äºå®éªŒå…³æ³¨çš„ä¸šåŠ¡æŒ‡æ ‡</li>\n<li>æŠŠæ›å…‰äº‹ä»¶ã€è¡Œä¸ºäº‹ä»¶joinèµ·æ¥ï¼Œå¯¹æ¯”å®éªŒç»„ã€å¯¹ç…§ç»„çš„ä¸šåŠ¡æŒ‡æ ‡å·®å¼‚</li>\n</ul>\n</li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/1247698/202601/1247698-20260131014010302-1779078827.png\" /></p>\n<p>ä»¥ä¸‹æ˜¯sqlç¤ºä¾‹ï¼Œä»£è¡¨ä»å®éªŒæ›å…‰å24å°æ—¶å†…å„ä¸ªåˆ†ç»„çš„è½¬åŒ–ç‡å¯¹æ¯”ã€‚</p>\n<pre><code class=\"language-sql\">SELECT \n    e.group_id,\n    COUNT(DISTINCT e.user_id) as exposed_users,\n    COUNT(DISTINCT a.user_id) as converted_users,\n    COUNT(DISTINCT a.user_id) / COUNT(DISTINCT e.user_id) as conversion_rate\nFROM exposure_events e\nLEFT JOIN action_events a ON e.user_id = a.user_id \n    AND a.event_time BETWEEN e.event_time AND (e.event_time + INTERVAL 24 HOUR)\nWHERE e.experiment_id = 'ui_test_001'\nGROUP BY e.group_id;\n</code></pre>\n<h2 id=\"å®éªŒæŠ¥è¡¨åˆ†æ\">å®éªŒæŠ¥è¡¨åˆ†æ</h2>\n<p>è¯„ä¼°å®éªŒç»“æœæ˜¯å¦æ­£å‘ã€æ˜¯å¦æ˜¾è‘—ã€‚äº†è§£ç»Ÿè®¡å­¦é‡Œçš„æ ¸å¿ƒæ¦‚å¿µï¼Œèƒ½çœ‹æ‡‚å®éªŒæŠ¥è¡¨å³å¯ã€‚</p>\n<h3 id=\"på€¼\">på€¼</h3>\n<p>ç”¨æ¥è¡¡é‡å®éªŒç»“æœæ˜¯å¦æ˜¾è‘—ï¼Œpå€¼çš„å«ä¹‰æ˜¯ï¼šå‡è®¾å®éªŒç»„ä¸å¯¹ç…§ç»„æ²¡æœ‰åŒºåˆ«ï¼Œæ­¤æ—¶è§‚å¯Ÿåˆ°å®éªŒæœ‰å·®å¼‚çš„æ¦‚ç‡ã€‚ä¸€èˆ¬è¦æ±‚ <code>p &lt; 0.05</code>ï¼Œä¹Ÿå°±æ˜¯è¯´å®éªŒç»“æœæ˜¾è‘—çš„æ¦‚ç‡å¤§äº95%ï¼ˆ<code>1 - 0.05 = 95%</code>ï¼‰</p>\n<h3 id=\"ç½®ä¿¡åŒºé—´\">ç½®ä¿¡åŒºé—´</h3>\n<p>åœ¨æ˜¾è‘—çš„å‰æä¸‹ï¼Œç”¨æ¥è¡¡é‡å®éªŒç»“æœæ˜¯å¦æ­£å‘ï¼Œä»£è¡¨ä¸šåŠ¡æŒ‡æ ‡çš„å¯èƒ½èŒƒå›´åˆ†å¸ƒã€‚<br />\næ¯”å¦‚ï¼šå®éªŒç»“æœé‡Œä¸šåŠ¡æŒ‡æ ‡æå‡äº†1%ï¼Œ95%ç½®ä¿¡åŒºé—´åœ¨[0.8%, 1.2%]ï¼Œåˆ™ä»£è¡¨æœ‰95%çš„æŠŠæ¡å¯ä»¥æŠŠä¸šåŠ¡æŒ‡æ ‡æå‡è‡³å°‘0.8%ã€è‡³å¤š1.2%ï¼Œæ•ˆæœæ­£å‘ã€‚å¦‚æœç½®ä¿¡åŒºé—´çš„ä¸‹ç•Œæ˜¯è´Ÿæ•°ï¼Œå°±æœ‰å¯èƒ½æ˜¯è´Ÿå‘æ•ˆæœäº†ï¼Œéœ€è¦è­¦æƒ•ã€‚</p>\n<p>ä»¥ä¸Šå°±æ˜¯ç°åº¦æ–¹æ¡ˆçš„æ€»ç»“äº†ï¼Œæ¬¢è¿è®¨è®ºäº¤æµã€‚</p>\n\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-31 17:35</span>&nbsp;\n<a href=\"https://www.cnblogs.com/toplist\">Javaçƒ˜ç„™å¸ˆ</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">50</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "å¼€æºè‡ªå»ºï¼ŒGPT åˆ‡æ¢ç©ºé—´éº»çƒ¦ï¼Ÿä¸€ä»¶å¸®ä½ æå®š",
      "link": "https://www.cnblogs.com/qxnm/p/19558462",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/qxnm/p/19558462\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-31 16:23\">\n    <span>å¼€æºè‡ªå»ºï¼ŒGPT åˆ‡æ¢ç©ºé—´éº»çƒ¦ï¼Ÿä¸€ä»¶å¸®ä½ æå®š</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body blogpost-body-html\" id=\"cnblogs_post_body\">\n<p style=\"font-size: 0; line-height: 0; margin: 0;\">&nbsp;</p>\n<section>\n<blockquote>\n<p>å­—æ•° 497ï¼Œé˜…è¯»å¤§çº¦éœ€ 3 åˆ†é’Ÿ</p>\n</blockquote>\n<p>è¿™å‡ å¤©ç»™æˆ‘å¿™çš„ï¼Œæœ€è¿‘å†™äº†ä¸€ä¸ªCodexçš„TEAM è´¦å·ç®¡ç†å·¥å…·ç›´æ¥åœ¨æœ¬åœ°è¿è¡Œ<br />å¤§æ¦‚æ˜¯ä¸‹é¢è¿™æ ·è‚äº†å‡ å¤©ï¼Œèƒ½é…åˆcodex cliä½¿ç”¨<br />æœ‰ç›®å‰è¿˜æœ‰ä¸€äº›bugå’Œä¸å¥½ç”¨çš„åœ°æ–¹ï¼Œåé¢ä¼šé€æ­¥ä¼˜åŒ–å‡ºæ¥</p>\n<p>é¡¹ç›®è¿æ¥ï¼Œéœ€è¦çš„ä½¬å‹å¸Œæœ›èƒ½è´¡çŒ®ä¸€ä¸ªstart<br /><span>hongshungao/Codex-Manager: ä¸€ä¸ªCodex cli è´¦å·ç®¡ç†ä¸åˆ‡æ¢å·¥å…·ã€‚ä¸º Codex cliæä¾›æœ¬åœ°å·æ± ç®¡ç†è‡ªåŠ¨åˆ‡æ¢ã€‚<sup>[1]</sup></span></p>\n<h2 id=\"0\">ReadMe</h2>\n<p>æœ¬åœ°æ¡Œé¢ç«¯ + æœåŠ¡è¿›ç¨‹çš„ Codex è´¦å·æ± ç®¡ç†å™¨ï¼Œç”¨äºç»Ÿä¸€ç®¡ç†è´¦å·ã€ç”¨é‡ä¸å¹³å° Keyï¼Œå¹¶æä¾›æœ¬åœ°ç½‘å…³ä¸æœåŠ¡èƒ½åŠ›ã€‚</p>\n<h2 id=\"1\">é¡¹ç›®ç®€ä»‹</h2>\n<ul>\n<li>â€¢ æ¡Œé¢ç«¯ï¼ˆTauriï¼‰è´Ÿè´£è´¦å·ç®¡ç†ã€ç”¨é‡å±•ç¤ºã€æˆæƒç™»å½•ä¸å¹³å° Key é…ç½®</li>\n<li>â€¢ æœåŠ¡ç«¯ï¼ˆRustï¼‰æä¾›æœ¬åœ° RPC + Gatewayï¼Œæ”¯æŒç”¨é‡åˆ·æ–°ã€è´¦å·è½®è¯¢ä¸é‰´æƒè½¬å‘</li>\n<li>â€¢ æ”¯æŒæ‰‹åŠ¨è§£æ OAuth å›è°ƒé“¾æ¥ï¼Œé¿å…ç«¯å£å†²çªæˆ–å›è°ƒå¤±è´¥</li>\n</ul>\n<h2 id=\"2\">åŠŸèƒ½äº®ç‚¹</h2>\n<ul>\n<li>â€¢ è´¦å·æ± ç®¡ç†ï¼šåˆ†ç»„/æ ‡ç­¾/æ’åº/å¤‡æ³¨</li>\n<li>â€¢ ç”¨é‡å±•ç¤ºï¼š5 å°æ—¶ + 7 æ—¥ç”¨é‡å¿«ç…§</li>\n<li>â€¢ æˆæƒç™»å½•ï¼šæµè§ˆå™¨æˆæƒ + æ‰‹åŠ¨å›è°ƒè§£æ</li>\n<li>â€¢ å¹³å° Keyï¼šç”Ÿæˆ/ç¦ç”¨/åˆ é™¤</li>\n<li>â€¢ æœ¬åœ°æœåŠ¡ï¼šè‡ªåŠ¨å¯åŠ¨ã€å¯è‡ªå®šä¹‰ç«¯å£</li>\n<li>â€¢ ç½‘å…³èƒ½åŠ›ï¼šä¸ºæœ¬åœ° CLI/å·¥å…·æä¾›ç»Ÿä¸€å…¥å£</li>\n</ul>\n<h2 id=\"3\">æŠ€æœ¯æ ˆ</h2>\n<ul>\n<li>â€¢ å‰ç«¯ï¼šVite + åŸç”Ÿ JS + è‡ªå®šä¹‰ UI</li>\n<li>â€¢ æ¡Œé¢ç«¯ï¼šTauri (Rust)</li>\n<li>â€¢ æœåŠ¡ç«¯ï¼šRustï¼ˆæœ¬åœ° HTTP/RPC + Gatewayï¼‰</li>\n</ul>\n<h2 id=\"4\">ç›®å½•ç»“æ„</h2>\n<pre class=\"language-plaintext highlighter-hljs\"><code>.\nâ”œâ”€&nbsp;apps/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;å‰ç«¯ä¸&nbsp;Tauri&nbsp;æ¡Œé¢ç«¯\nâ”‚&nbsp;&nbsp;â”œâ”€&nbsp;src/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;å‰ç«¯æºç \nâ”‚&nbsp;&nbsp;â”œâ”€&nbsp;src-tauri/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Tauri&nbsp;ç«¯æºç \nâ”‚&nbsp;&nbsp;â””â”€&nbsp;dist/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;å‰ç«¯æ„å»ºäº§ç‰©\nâ”œâ”€&nbsp;crates/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Rust&nbsp;æ ¸å¿ƒä¸æœåŠ¡ç«¯\nâ”‚&nbsp;&nbsp;â”œâ”€&nbsp;gpttools-core\nâ”‚&nbsp;&nbsp;â””â”€&nbsp;gpttools-service\nâ”œâ”€&nbsp;portable/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;ä¾¿æºç‰ˆè¾“å‡ºç›®å½•\nâ”œâ”€&nbsp;rebuild.ps1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;æ‰“åŒ…è„šæœ¬\nâ””â”€&nbsp;README.md</code></pre>\n<h2 id=\"5\">å¿«é€Ÿå¼€å§‹</h2>\n<ol>\n<li>1. å¯åŠ¨æ¡Œé¢ç«¯åï¼Œç‚¹å‡»â€œå¯åŠ¨æœåŠ¡â€</li>\n<li>2. è¿›å…¥â€œè´¦å·ç®¡ç†â€æ·»åŠ è´¦å·å¹¶å®Œæˆæˆæƒ</li>\n<li>3. éœ€è¦æ—¶ç²˜è´´å›è°ƒé“¾æ¥å®Œæˆæ‰‹åŠ¨è§£æ</li>\n<li>4. åˆ·æ–°ç”¨é‡ï¼Œæ£€æŸ¥çŠ¶æ€ä¸é…é¢</li>\n</ol>\n</section>\n<p style=\"font-size: 0; line-height: 0; margin: 0;\">&nbsp;</p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-31 16:23</span>&nbsp;\n<a href=\"https://www.cnblogs.com/qxnm\">é«˜å®é¡º</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">46</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "ç¡¬æ ¸ç§‘æ™®ï¼šä¸ºä½•å°ç±³ä»»å¤©å ‚å°æ€ Rootï¼Ÿæ­ç§˜æ“ä½œç³»ç»Ÿä»å¯åŠ¨åˆ°â€œå¤ºæƒâ€çš„åº•å±‚æ¸¸æˆ",
      "link": "https://www.cnblogs.com/kaiux/p/19558207",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/kaiux/p/19558207\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-31 15:40\">\n    <span>ç¡¬æ ¸ç§‘æ™®ï¼šä¸ºä½•å°ç±³ä»»å¤©å ‚å°æ€ Rootï¼Ÿæ­ç§˜æ“ä½œç³»ç»Ÿä»å¯åŠ¨åˆ°â€œå¤ºæƒâ€çš„åº•å±‚æ¸¸æˆ</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                    <div id=\"cnblogs_post_description\" style=\"display: none;\">\n        <img alt=\"ç¡¬æ ¸ç§‘æ™®ï¼šä¸ºä½•å°ç±³ä»»å¤©å ‚å°æ€ Rootï¼Ÿæ­ç§˜æ“ä½œç³»ç»Ÿä»å¯åŠ¨åˆ°â€œå¤ºæƒâ€çš„åº•å±‚æ¸¸æˆ\" class=\"desc_img\" src=\"https://img2024.cnblogs.com/blog/1158182/202601/1158182-20260131154106142-1968484472.png\" />\n        å°ç±³é”BLã€ä»»å¤©å ‚åç ´è§£ï¼Œå‚å•†åœ¨æ€•ä»€ä¹ˆï¼Ÿæœ¬æ–‡ç¡¬æ ¸æ‹†è§£ä»å¼€æœºåˆ°â€œå¤ºæƒâ€çš„åº•å±‚é€»è¾‘ã€‚ç©¿è¶ŠUEFIæƒåŠ›äº¤æ¥ï¼Œæ­ç§˜Ring0ç‰©ç†é˜²çº¿ä¸Rootæœ¬è´¨ï¼Œæ·±åº¦å‰–æSwitchç¡¬ç ´çš„â€œç”µå‹æ•…éšœæ³¨å…¥â€åŸç†ã€‚å¸¦ä½ æ·±å…¥å¾®è§‚ä¸–ç•Œï¼Œçœ‹æ‡‚è¿™åœºèŠ¯ç‰‡æ·±å¤„çš„ä¿¡ä»»é“¾æ”»é˜²æˆ˜ã€‚\n    </div>\n<div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<p>æœ€è¿‘æœºåœˆæœ€çƒ­é—¹çš„ä¸¤ä»¶äº‹ï¼šä¸€æ˜¯å°ç±³å½»åº•æ”¶ç´§äº† Bootloader è§£é”æƒé™ï¼ŒäºŒæ˜¯ä»»å¤©å ‚åˆèµ·è¯‰äº†å‡ ä¸ªå– Switch ç ´è§£èŠ¯ç‰‡çš„å•†å®¶ã€‚</p>\n<p>å¾ˆå¤šå…„å¼Ÿå¯èƒ½ä¼šè§‰å¾—ï¼šâ€œæˆ‘èŠ±é’±ä¹°çš„ç¡¬ä»¶ï¼Œå‡­ä»€ä¹ˆä¸è®©æˆ‘å®Œå…¨æ§åˆ¶ï¼Ÿâ€</p>\n<p>ä½†åœ¨å‚å•†çš„é€»è¾‘é‡Œï¼Œ<strong>ä¸€æ—¦ä½ æ‹¿åˆ°äº†æœ€é«˜æƒé™ï¼Œä½ å°±æ‰“ç ´äº†æˆ‘ä»¬è¾›è‹¦å»ºç«‹çš„â€œå•†ä¸šå›´å¢™â€ã€‚</strong></p>\n<p>ä¸ºäº†çœ‹æ‡‚è¿™åœºå…³äºâ€œæ§åˆ¶æƒâ€çš„æˆ˜äº‰ï¼Œæˆ‘ä»¬ä¸éœ€è¦å»å•ƒæ¯ç‡¥çš„ã€Šæ“ä½œç³»ç»Ÿå¯¼è®ºã€‹ï¼Œåªéœ€è¦æŠŠè§†è§’ç¼©å°åˆ°çº³ç§’çº§åˆ«ï¼Œçœ‹çœ‹å½“ä½ æŒ‰ä¸‹ç”µæºé”®çš„é‚£ä¸€æƒŠå¿ƒåŠ¨é­„çš„ç¬é—´ï¼Œè®¡ç®—æœºå†…éƒ¨åˆ°åº•ä¸Šæ¼”äº†ä¸€åœºæ€æ ·çš„â€œæƒåŠ›äº¤æ¥â€ã€‚</p>\n<h2 id=\"ä¸€è›®è’æ—¶ä»£çš„åœ°å›¾\">ä¸€ã€è›®è’æ—¶ä»£çš„åœ°å›¾</h2>\n<p>åœ¨ CPU åˆšåˆšé†’æ¥çš„é‚£ä¸€åˆ»ï¼Œå®ƒé¢å¯¹çš„æ˜¯ä¸€ç‰‡æ¼†é»‘çš„å­˜å‚¨è’åŸâ€”â€”ç¡¬ç›˜ã€‚è¦æŠŠåºå¤§çš„æ“ä½œç³»ç»Ÿè£…è¿›è„‘å­ï¼ˆå†…å­˜ï¼‰é‡Œï¼Œé¦–å…ˆå¾—æœ‰ä¸€å¼ åœ°å›¾ã€‚</p>\n<p><strong>1. MBRï¼šä¸Šä¸€ä»£çš„è€åœ°å›¾</strong></p>\n<p>åœ¨ä»¥å‰ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ <strong>MBR (Master Boot Record)</strong>ã€‚å®ƒçš„æ ·å­éå¸¸å¯’é…¸ï¼Œåªå æ®ç¡¬ç›˜æœ€å¼€å¤´çš„ <strong>512 å­—èŠ‚</strong>ã€‚</p>\n<p>å“ªæ€•ä½ ç°åœ¨çš„ç¡¬ç›˜æœ‰ 10TBï¼ŒMBR ä¹Ÿåªæœ‰è¿™ç‚¹åœ°ç›˜ã€‚è¿™å°±å¯¼è‡´äº†å®ƒå…ˆå¤©ä¸è¶³ï¼šå› ä¸ºè®°å½•åœ°å€çš„ç©ºé—´å¤ªå°ï¼Œå®ƒæœ€å¤§åªèƒ½è¯†åˆ« <strong>2TB</strong> çš„ç¡¬ç›˜ï¼Œè€Œä¸”æœ€å¤šåªèƒ½åˆ† <strong>4 ä¸ªä¸»åˆ†åŒº</strong>ã€‚å®ƒå°±åƒä¸€æœ¬åªæœ‰ä¸€é¡µç›®å½•çš„è€æ—§ç¬”è®°æœ¬ï¼Œæ—¢å†™ä¸ä¸‹å¤ªå¤šä¸œè¥¿ï¼Œä¹ŸæŒ‡å¼•ä¸äº†é€šå¾€å¤§åŸå¸‚çš„è·¯ã€‚</p>\n<p><strong>2. GPTï¼šæ–°ä¸–ç•Œçš„å…¨æ¯å¯¼èˆª</strong></p>\n<p>ç°åœ¨çš„ç”µè„‘å‡ ä¹éƒ½æ ‡é… <strong>UEFI</strong> å¯åŠ¨ï¼Œä¸ä¹‹æ­é…çš„æ˜¯ <strong>GPT (GUID Partition Table)</strong> åˆ†åŒºè¡¨ã€‚</p>\n<p>å®ƒçš„ä¼˜åŠ¿æ˜¾è€Œæ˜“è§ï¼šå½»åº•æ‰“ç ´äº†å®¹é‡å’Œåˆ†åŒºæ•°é‡çš„é™åˆ¶ï¼Œæƒ³åˆ†å¤šå°‘å°±åˆ†å¤šå°‘ã€‚æ›´é‡è¦çš„æ˜¯å®ƒå…·å¤‡äº†<strong>å®¹ç¾æœºåˆ¶</strong>â€”â€”MBR åäº†ï¼Œæ•´å—ç¡¬ç›˜çš„æ•°æ®å¯èƒ½å°±è¯»ä¸å‡ºæ¥äº†ï¼›ä½† GPT èªæ˜åœ°åœ¨ç¡¬ç›˜çš„â€œè½¦å¤´â€å’Œâ€œè½¦å°¾â€å„å­˜äº†ä¸€ä»½ï¼Œåäº†è¿˜èƒ½æ•‘ã€‚</p>\n<p>ä¸ºäº†ç…§é¡¾é‚£äº›è€æ—§çš„è½¯ä»¶ï¼Œç°åœ¨çš„ GPT ç¡¬ç›˜è¿˜ä¼šåœ¨å¼€å¤´ä¿ç•™ä¸€ä¸ªâ€œå‡è£…çš„ MBRâ€ã€‚å®ƒçš„å”¯ä¸€ä½œç”¨å°±æ˜¯å‘Šè¯‰è€è½¯ä»¶ï¼šâ€œè¿™å—ç¡¬ç›˜å·²ç»æœ‰ä¸»äº†ï¼Œåˆ«ä¹±åŠ¨ã€‚â€</p>\n<p><img alt=\"mbrvsgpt\" src=\"https://img2024.cnblogs.com/blog/1158182/202601/1158182-20260131153816610-848754645.jpg\" /></p>\n<h2 id=\"äºŒç¬¬ä¸€æ£’ç«ç‚¬æ‰‹\">äºŒã€ç¬¬ä¸€æ£’ç«ç‚¬æ‰‹</h2>\n<p>å½“ä½ æŒ‰ä¸‹ç”µæºé”®ï¼Œç”µæµæ¶Œå…¥ä¸»æ¿ï¼ŒCPU åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯â€œç¡¬ç¼–ç â€å†™æ­»çš„ï¼šå¼ºåˆ¶è¯»å–ä¸€æ®µâ€œç»å¯¹æƒå¨â€çš„ä»£ç ã€‚</p>\n<p>è¿™é‡Œä½ç€ç¡¬ä»¶çš„çµé­‚â€”â€”<strong>å›ºä»¶ (Firmware)</strong>ã€‚ä¸è¿‡ï¼Œæ ¹æ®è®¾å¤‡ç±»å‹çš„ä¸åŒï¼Œè¿™é‡Œçš„ç®¡å®¶ä¹Ÿåˆ†ä¸ºä¸¤æ´¾ã€‚</p>\n<p><strong>1. PC ç•Œçš„ç®¡å®¶ï¼šä» BIOS åˆ° UEFI</strong></p>\n<p>åœ¨æ¼«é•¿çš„ PC å‘å±•å²ä¸­ï¼Œç®¡å®¶æ¢äº†ä¸€å±Šã€‚</p>\n<ul>\n<li><strong>è€ç®¡å®¶å« BIOS</strong>ã€‚å®ƒæ˜¯ä¸ªå®ˆæ—§æ´¾ï¼Œåªæ‡‚ 16 ä½æ±‡ç¼–è¯­è¨€ï¼Œåªèƒ½å‘†æ¿åœ°è¯»å–ç¡¬ç›˜å¤´éƒ¨çš„ MBRï¼Œå¹²æ´»æ…¢ä¸”æ•ˆç‡ä½ã€‚</li>\n<li><strong>æ–°ç®¡å®¶å« UEFI</strong>ã€‚å®ƒæœ¬è´¨ä¸Šå·²ç»æ˜¯ä¸€ä¸ª<strong>å¾®å‹æ“ä½œç³»ç»Ÿ</strong>äº†ã€‚å®ƒèƒ½è¯»æ‡‚æ–‡ä»¶ç³»ç»Ÿï¼ˆæ¯”å¦‚ FAT32ï¼‰ï¼Œèƒ½ç›´æ¥è¿è¡Œåç¼€ä¸º <code>.efi</code> çš„å¯æ‰§è¡Œç¨‹åºï¼Œç”šè‡³èƒ½è”ç½‘ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆç°åœ¨çš„ BIOS ç•Œé¢èƒ½ç”¨é¼ æ ‡ã€èƒ½æˆªå›¾ï¼Œç”šè‡³åšå¾—èŠ±é‡Œèƒ¡å“¨çš„åŸå› ã€‚</li>\n</ul>\n<p><img alt=\"bios\" src=\"https://img2024.cnblogs.com/blog/1158182/202601/1158182-20260131153830288-1861685661.jpg\" /></p>\n<p><strong>2. åµŒå…¥å¼ç•Œçš„ç®¡å®¶ï¼šBootROM</strong></p>\n<p>å¯¹äº<strong>å°ç±³æ‰‹æœº</strong>æˆ– <strong>Switch</strong> è¿™ç§åµŒå…¥å¼è®¾å¤‡ï¼ˆé€šå¸¸æ˜¯ ARM æ¶æ„ï¼‰ï¼Œè™½ç„¶å®ƒä»¬æ²¡æœ‰åƒç”µè„‘é‚£æ ·å¯ä»¥æŒ‰ <code>Del</code> é”®è¿›å…¥çš„å›¾å½¢åŒ– UEFI ç•Œé¢ï¼Œä½†æ ¸å¿ƒé€»è¾‘æ˜¯ä¸€æ ·çš„ã€‚</p>\n<p>å®ƒä»¬ä¾é çš„æ˜¯èŠ¯ç‰‡å‡ºå‚æ—¶å°±åœ¨å†…éƒ¨çƒ§å½•æ­»çš„ä¸€å°æ®µä»£ç â€”â€”<strong>BootROM</strong>ã€‚å®ƒæ˜¯ç¡¬ä»¶è‹é†’åæ‰§è¡Œçš„ç¬¬ä¸€æ®µä»£ç ï¼Œæ¯”ä»»ä½•è½¯ä»¶éƒ½æ—©ï¼Œä¸”æ— æ³•è¢«ä¿®æ”¹ã€‚å®ƒçš„èŒè´£å•ä¸€è€Œç¥åœ£ï¼šåˆå§‹åŒ–æœ€åŸºæœ¬çš„ç¡¬ä»¶ï¼Œç„¶åå»å¯»æ‰¾å¹¶éªŒè¯ä¸‹ä¸€æ£’æ¥åŠ›è€…ã€‚</p>\n<h2 id=\"ä¸‰çµæ´»çš„ä¸­é—´äºº\">ä¸‰ã€çµæ´»çš„ä¸­é—´äºº</h2>\n<p>å½“ UEFI æˆ– BootROM è‡ªæ£€å®Œç¡¬ä»¶ï¼Œå‡†å¤‡æŠŠæƒåŠ›ç§»äº¤ç»™æ“ä½œç³»ç»Ÿæ—¶ï¼Œå®ƒä¸ä¼šç›´æ¥å”¤é†’ Windows æˆ– Linux çš„å†…æ ¸ï¼Œè€Œæ˜¯å…ˆå”¤é†’ä¸€ä½ä¸­é—´äººâ€”â€”<strong>Bootloader</strong>ï¼ˆåœ¨ Linux PC ä¸–ç•Œé‡Œé€šå¸¸æ˜¯ GRUBï¼Œåœ¨å®‰å“/æ‰‹æœºä¸–ç•Œé‡Œé€šå¸¸æ˜¯ U-Boot æˆ–å‚å•†è‡ªç ”çš„ Bootloaderï¼‰ã€‚</p>\n<p><strong>ä¸ºä»€ä¹ˆè¦ç»•ä¸€åœˆï¼Œä¸èƒ½ç›´æ¥åŠ è½½å†…æ ¸å—ï¼Ÿ</strong></p>\n<p>åŸå› åœ¨äºæ“ä½œç³»ç»Ÿå†…æ ¸ï¼ˆKernelï¼‰å¤ªâ€œå¨‡è´µâ€äº†ï¼š</p>\n<ol>\n<li>å®ƒå¯èƒ½éœ€è¦ç‰¹æ®Šçš„å¯åŠ¨å‚æ•°ï¼ˆæ¯”å¦‚ä½ éœ€è¦è¿›å…¥å®‰å…¨æ¨¡å¼ï¼Œæˆ–è€…å¼€å¯è°ƒè¯•ï¼‰ã€‚</li>\n<li>å®ƒå¯èƒ½èººåœ¨å›ºä»¶è¯»ä¸æ‡‚çš„æ–‡ä»¶ç³»ç»Ÿé‡Œï¼ˆæ¯”å¦‚ Linux çš„ Ext4 æ ¼å¼ï¼ŒUEFI åŸç”Ÿå¯èƒ½åªè®¤ FATï¼‰ã€‚</li>\n<li>ä½ å¯èƒ½å®‰è£…äº†åŒç³»ç»Ÿï¼Œéœ€è¦æœ‰äººæ¥é—®ä½ åˆ°åº•è¿›å“ªä¸€ä¸ªã€‚</li>\n</ol>\n<p>æ‰€ä»¥ï¼ŒBootloader å°±åƒæ˜¯ä¸€ä¸ªä¸“ä¸šçš„â€œé¢†è·¯äººâ€ã€‚å®ƒè´Ÿè´£æŠŠå†…æ ¸æ–‡ä»¶ï¼ˆ<code>vmlinuz</code>ï¼‰å’Œåˆå§‹åŒ–æ–‡ä»¶ç³»ç»Ÿï¼ˆ<code>initrd</code>ï¼‰æ¬è¿åˆ°å†…å­˜é‡Œï¼Œä¸€åˆ‡å‡†å¤‡å°±ç»ªåï¼Œæ‰§è¡Œä¸€ä¸ªä¿¡ä»°ä¹‹è·ƒï¼ˆJump æŒ‡ä»¤ï¼‰ï¼Œå°† CPU çš„æ§åˆ¶æƒå½»åº•ç§»äº¤ç»™å†…æ ¸ã€‚</p>\n<p><img alt=\"bootloader\" src=\"https://img2024.cnblogs.com/blog/1158182/202601/1158182-20260131153843749-1017464152.jpg\" /></p>\n<h2 id=\"å››é˜¶çº§æ£®ä¸¥\">å››ã€é˜¶çº§æ£®ä¸¥</h2>\n<p>å†…æ ¸ï¼ˆKernelï¼‰ä¸€æ—¦æ¥ç®¡äº† CPUï¼Œåšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯åˆ©ç”¨ CPU çš„ç¡¬ä»¶ç‰¹æ€§ï¼Œå»ºç«‹èµ·æ£®ä¸¥çš„ç­‰çº§åˆ¶åº¦ã€‚è¿™æ˜¯ç³»ç»Ÿå®‰å…¨çš„åŸºçŸ³ã€‚</p>\n<p><strong>1. æ¶ˆå¤±çš„ Ring 1 å’Œ Ring 2</strong></p>\n<p>Intel x86 æ¶æ„åœ¨è®¾è®¡ä¹‹åˆï¼Œå…¶å®å®šä¹‰äº† 4 ä¸ªç‰¹æƒçº§ï¼š<strong>Ring 0</strong>ï¼ˆå†…æ ¸ï¼Œæœ€é«˜æƒé™ï¼‰ã€<strong>Ring 1 &amp; 2</strong>ï¼ˆåŸæœ¬ç»™é©±åŠ¨ï¼‰ã€<strong>Ring 3</strong>ï¼ˆåº”ç”¨ç¨‹åºï¼Œæœ€ä½æƒé™ï¼‰ã€‚</p>\n<p><strong>ä½†åœ¨ç°ä»£æ“ä½œç³»ç»Ÿï¼ˆWindows/Linuxï¼‰ä¸­ï¼ŒRing 1 å’Œ Ring 2 å‡ ä¹è¢«åºŸå¼ƒäº†ï¼Œåªå‰©ä¸‹äº†ä¸¤æåˆ†åŒ–çš„ Ring 0 å’Œ Ring 3ã€‚</strong></p>\n<p>è¿™æœ€æ ¸å¿ƒçš„åŸå› æ˜¯<strong>ç§»æ¤æ€§ï¼ˆPortabilityï¼‰</strong>ã€‚å½“å¹´çš„ Linux å’Œ Windows NT ä¸ºäº†èƒ½è·‘åœ¨ä¸åŒçš„ CPU æ¶æ„ä¸Šï¼ˆæ¯”å¦‚ MIPSã€ARMï¼‰ï¼Œé‡åˆ°äº†ä¸€ä¸ªå¤§éš¾é¢˜ï¼šå¾ˆå¤šé x86 çš„ RISC æ¶æ„ç¡¬ä»¶è®¾è®¡ä¸Šéå¸¸ç²¾ç®€ï¼Œ<strong>åªæ”¯æŒä¸¤ä¸ªå±‚çº§</strong>ï¼ˆå†…æ ¸æ€ Kernel Mode å’Œç”¨æˆ·æ€ User Modeï¼‰ã€‚ä¸ºäº†ä¿è¯ä»£ç é€šç”¨ï¼Œæ“ä½œç³»ç»Ÿè®¾è®¡è€…ç´¢æ€§å†³å®šï¼šâ€œå¥½ï¼Œé‚£æˆ‘ä»¬ä¹Ÿåªç”¨ä¸¤å±‚ï¼ŒæŠŠä¸­é—´çš„ç æ‰ã€‚â€</p>\n<p><strong>2. ç‰©ç†å±‚é¢çš„é˜²çº¿</strong></p>\n<p>ç°åœ¨çš„ CPU å†…éƒ¨ï¼Œæœ‰ä¸€ä¸ª <strong>CS å¯„å­˜å™¨</strong> æ˜ç¡®è®°å½•äº†å½“å‰çš„èº«ä»½ï¼š</p>\n<ul>\n<li><strong>0 (ä¸Šå¸æ¨¡å¼)</strong>ï¼šä½ å¯ä»¥æ‰§è¡Œæ‰€æœ‰æŒ‡ä»¤ï¼Œå¼€å…³ä¸­æ–­ã€è¯»å†™ä»»æ„å†…å­˜ã€ç›´æ¥æ“ä½œç¡¬ç›˜ IOã€‚</li>\n<li><strong>3 (å¹³æ°‘æ¨¡å¼)</strong>ï¼šä½ åªèƒ½åšæ•°å­¦è¿ç®—ï¼Œä¸¥ç¦ç›´æ¥è§¦ç¢°ç¡¬ä»¶ã€‚</li>\n</ul>\n<p>å¦‚æœä½ çš„ Appï¼ˆè¿è¡Œåœ¨ Ring 3ï¼‰è¯•å›¾æ‰§è¡Œä¸€æ¡â€œè¯»å–ç¡¬ç›˜â€çš„æ±‡ç¼–æŒ‡ä»¤ï¼ŒCPU ç¡¬ä»¶åœ¨è§£ç é˜¶æ®µå°±ä¼šå‘ç°ï¼šâ€œä½ åªæœ‰ 3 çº§æƒé™ï¼Œå´æƒ³æ‰§è¡Œ 0 çº§æŒ‡ä»¤ï¼Ÿâ€ äºæ˜¯ç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œå†…æ ¸æ•è·åä¼šç›´æ¥æŠŠè¿™ä¸ª App æ€æ‰â€”â€”è¿™å°±æ˜¯ç¨‹åº<strong>å´©æºƒï¼ˆCrashï¼‰</strong>çš„æœ¬è´¨ã€‚</p>\n<p><strong>3. å”¯ä¸€çš„é€šé“ï¼šSyscall</strong></p>\n<p>é‚£å¹³æ°‘ï¼ˆAppï¼‰æƒ³åŠäº‹ï¼ˆæ¯”å¦‚è¯»æ–‡ä»¶ã€è”ç½‘ï¼‰æ€ä¹ˆåŠï¼Ÿå¿…é¡»å»æ•²è¡™é—¨çš„é¼“â€”â€”è¿™å«<strong>ç³»ç»Ÿè°ƒç”¨ï¼ˆSyscallï¼‰</strong>ã€‚</p>\n<ol>\n<li>App æ‰§è¡Œ <code>SYSCALL</code> æŒ‡ä»¤ã€‚</li>\n<li>CPU ç¬é—´åˆ‡æ¢åˆ° Ring 0ï¼Œè·³è½¬åˆ°å†…æ ¸é¢„è®¾å¥½çš„ä»£ç ä½ç½®ã€‚</li>\n<li><strong>æ¢æ ˆï¼ˆStack Switchingï¼‰</strong>ï¼šè¿™æ˜¯å…³é”®ä¸€æ­¥ï¼ŒCPU ä¼šè‡ªåŠ¨æŠŠæ ˆæŒ‡é’ˆä»â€œç”¨æˆ·æ ˆâ€åˆ‡æ¢åˆ°â€œå†…æ ¸æ ˆâ€ã€‚è¿™æ˜¯ä¸ºäº†é˜²æ­¢é»‘å®¢åœ¨æ ˆé‡ŒåŸ‹é›·ï¼Œç¡®ä¿å†…æ ¸åœ¨ä¸€ä¸ªç»å¯¹å¹²å‡€çš„ç¯å¢ƒä¸‹å·¥ä½œã€‚</li>\n<li>å†…æ ¸æ›¿ä½ åŠå®Œäº‹ï¼ŒæŠŠç»“æœæ‹·å›ç”¨æˆ·å†…å­˜ï¼Œç„¶åé€€å› Ring 3ã€‚</li>\n</ol>\n<p><img alt=\"rings\" src=\"https://img2024.cnblogs.com/blog/1158182/202601/1158182-20260131153901587-891608174.jpg\" /></p>\n<h2 id=\"äº”çœŸå‡ç¾çŒ´ç‹\">äº”ã€çœŸå‡ç¾çŒ´ç‹</h2>\n<p>è¿™æ˜¯å¾ˆå¤šæŠ€æœ¯çˆ±å¥½è€…æœ€å®¹æ˜“ææ··çš„åœ°æ–¹ï¼š<strong>â€œæˆ‘æ‰‹æœº Root äº†ï¼Œæ˜¯ä¸æ˜¯å°±æ„å‘³ç€æˆ‘çš„ App è¿è¡Œåœ¨ Ring 0 äº†ï¼Ÿâ€</strong></p>\n<p><strong>ç­”æ¡ˆæ˜¯ï¼šNOã€‚å³ä½¿ä½  Root äº†ï¼Œä½ çš„ App ä¾ç„¶è¿è¡Œåœ¨ Ring 3ã€‚</strong></p>\n<p><strong>1. Root åªæ˜¯ä¸€ä¸ªâ€œé€šè¡Œè¯â€</strong></p>\n<p>æˆ‘ä»¬éœ€è¦åŒºåˆ†ä¸¤ä¸ªæ¦‚å¿µï¼š</p>\n<ul>\n<li><strong>Root (User ID = 0)</strong>ï¼šè¿™æ˜¯<strong>è½¯ä»¶å±‚é¢</strong>çš„æ¦‚å¿µã€‚å®ƒåªæ˜¯ Linux ç³»ç»Ÿé‡Œçš„ä¸€æ¡ç”¨æˆ·è®°å½•ã€‚å®ƒçš„æƒåŠ›åœ¨äºï¼š<strong>å†…æ ¸è¢«è®¾è®¡ä¸ºâ€œæ— æ¡ä»¶å¬ä» Root ç”¨æˆ·çš„è¯·æ±‚â€ã€‚</strong></li>\n<li><strong>Ring 0</strong>ï¼šè¿™æ˜¯<strong>ç¡¬ä»¶å±‚é¢</strong>çš„æ¦‚å¿µã€‚åªæœ‰å†…æ ¸ä»£ç æœ¬èº«è¿è¡Œåœ¨è¿™é‡Œã€‚</li>\n</ul>\n<p><strong>2. çš‡å¸ä¸åˆ½å­æ‰‹</strong></p>\n<p>å½“ä½ è·å–äº† Root æƒé™ï¼Œè¿è¡Œä¸€ä¸ªå‘½ä»¤ <code>rm -rf /</code>ï¼ˆåˆ åº“è·‘è·¯ï¼‰æ—¶ï¼Œè¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>\n<ol>\n<li><strong>Root ç”¨æˆ·</strong> å‘èµ·åˆ é™¤æ–‡ä»¶çš„è¯·æ±‚ã€‚</li>\n<li><strong>å†…æ ¸</strong> æ£€æŸ¥å‘èµ·è€…ï¼šå“Ÿï¼Œæ˜¯ ID ä¸º 0 çš„å¤§å“¥å•Šã€‚è™½ç„¶åˆ é™¤ç³»ç»Ÿæ–‡ä»¶å¾ˆå±é™©ï¼Œä½†æ—¢ç„¶å¤§å“¥è¯´äº†ï¼Œæˆ‘å°±ç…§åšã€‚</li>\n<li><strong>å†…æ ¸ï¼ˆRing 0ï¼‰</strong> é©±åŠ¨ç¡¬ç›˜ç£å¤´ï¼Œç‰©ç†æ“¦é™¤æ•°æ®ã€‚</li>\n</ol>\n<p><strong>æ€»ç»“ä¸€ä¸‹</strong>ï¼šRoot ç”¨æˆ·å°±åƒæ˜¯æ‹¿ç€â€œåœ£æ—¨â€çš„é’¦å·®å¤§è‡£ï¼Œä½†ä»–æœ¬èº«è¿˜æ˜¯ä¸ªäººï¼ˆè¿è¡Œåœ¨ Ring 3ï¼‰ï¼›è€Œ Ring 0 æ‰æ˜¯é‚£ä¸ªçœŸæ­£æŒåˆ€åŠ¨æ‰‹çš„åˆ½å­æ‰‹ã€‚<strong>Root æ‹¿åˆ°äº†æœ€é«˜è¡Œæ”¿æƒï¼Œä½†æ²¡æœ‰æ‹¿åˆ°æœ€é«˜ç‰©ç†æ‰§è¡Œæƒã€‚</strong></p>\n<p><img alt=\"rootvsring\" src=\"https://img2024.cnblogs.com/blog/1158182/202601/1158182-20260131153913727-1769032851.jpg\" /></p>\n<h2 id=\"å…­æ‰“ç ´æ·é”\">å…­ã€æ‰“ç ´æ·é”</h2>\n<p>ç†è§£äº†ä¸Šé¢çš„â€œä¿¡ä»»é“¾â€å’Œâ€œæƒé™å¢™â€ï¼Œæˆ‘ä»¬ç»ˆäºå¯ä»¥çœ‹æ‡‚é»‘å®¢æ˜¯å¦‚ä½•ä¸€æ­¥æ­¥æ”»ç ´ç³»ç»Ÿçš„ã€‚è¿™ä¸ªè¿‡ç¨‹ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä¸€åœºç²¾å¯†çš„å¤–ç§‘æ‰‹æœ¯ã€‚</p>\n<p><strong>1. æ’•å¼€å°æ¡ï¼šæ‰‹æœºè§£é” BL (Bootloader)</strong></p>\n<p>æ­£å¸¸çš„æ‰‹æœºå¯åŠ¨é“¾æ¡æ˜¯ä¸¥ä¸åˆç¼çš„ï¼š<strong>BootROM (ç¡¬ä»¶)</strong> â†’ <strong>éªŒè¯ Bootloader ç­¾å</strong> â†’ <strong>éªŒè¯ Kernel (ç³»ç»Ÿå†…æ ¸) ç­¾å</strong>ã€‚</p>\n<p>æ‰€è°“çš„ <strong>BL é”</strong>ï¼Œå°±æ˜¯å‚å•†è®© Bootloader ä¸¥æ ¼æŸ¥éªŒä¸‹ä¸€çº§ï¼ˆKernelï¼‰æ˜¯ä¸æ˜¯å®˜æ–¹åŸå‚çš„ã€‚å¦‚æœæ˜¯å®˜æ–¹çš„ï¼Œæ”¾è¡Œï¼›å¦‚æœè¢«äººåŠ¨è¿‡æ‰‹è„šï¼ˆæ¯”å¦‚ä¸ºäº† Rootï¼‰ï¼Œæ‹’ç»å¯åŠ¨ã€‚</p>\n<p>è€Œ<strong>è§£é” BL</strong>ï¼Œå°±æ˜¯ç”¨å®˜æ–¹ç»™çš„å·¥å…·ï¼ˆæˆ–è€…åˆ©ç”¨æ¼æ´ï¼‰ï¼Œç»™ Bootloader ä¸‹è¾¾ä¸€é“æŒ‡ä»¤ï¼šâ€œåˆ«æŸ¥ç­¾åäº†ï¼Œä¸ç®¡æˆ‘åˆ·è¿›å»ä»€ä¹ˆçƒ‚ä¸ƒå…«ç³Ÿçš„å†…æ ¸ï¼Œä½ éƒ½ç»™æˆ‘è·‘ã€‚â€</p>\n<p><em>æ³¨æ„ä»£ä»·ï¼šè§£é” BL è™½ç„¶è®©ä½ è·å¾—äº†è‡ªç”±ï¼Œä½†ä¹Ÿ<strong>ç ´åäº†å®Œæ•´çš„ä¿¡ä»»é“¾</strong>ï¼ˆAndroid Verified Bootï¼‰ã€‚æ­¤æ—¶ï¼Œç³»ç»Ÿé‡Œçš„ TEEï¼ˆå¯ä¿¡æ‰§è¡Œç¯å¢ƒï¼‰ä¼šæ„ŸçŸ¥åˆ°ç¯å¢ƒä¸å®‰å…¨ï¼Œä»è€Œå¯¼è‡´é“¶è¡Œ App é—ªé€€ã€å¾®ä¿¡/æ”¯ä»˜å®æŒ‡çº¹æ”¯ä»˜å¤±æ•ˆç­‰åæœã€‚</em></p>\n<p><strong>2. æ¤å…¥å‡è‚¢ï¼šä»è§£é”åˆ°è·å– Root çš„å…¨è¿‡ç¨‹</strong></p>\n<p>å¾ˆå¤šå°ç™½ä»¥ä¸ºè§£äº† BL å°±è‡ªåŠ¨ Root äº†ï¼Œå…¶å®ä¸æ˜¯ã€‚è§£é”åªæ˜¯æ‰“å¼€äº†å¤§é—¨ï¼Œæˆ¿é—´ï¼ˆç³»ç»Ÿï¼‰è¿˜æ˜¯ç©ºçš„ã€‚è¦æ‹¿åˆ° Rootï¼Œå¿…é¡»è¿›è¡Œä¸€åœº<strong>â€œå™¨å®˜ç§»æ¤â€</strong>ã€‚</p>\n<p>ä»¥ Android ä¸Šæœ€æµè¡Œçš„ Magisk ä¸ºä¾‹ï¼Œå®ƒçš„æ ¸å¿ƒé­”æ³•å«åš <strong>\"Systemless\"ï¼ˆä¸è§¦åŠ¨ System åˆ†åŒºï¼‰</strong>ï¼Œæ ‡å‡†æµç¨‹æ˜¯ï¼š</p>\n<ol>\n<li><strong>æå–å™¨å®˜</strong>ï¼šä»å®˜æ–¹åˆ·æœºåŒ…é‡Œæå–å‡º <strong><code>boot.img</code></strong>ã€‚</li>\n<li><strong>æ‰‹æœ¯æ”¹é€ </strong>ï¼šMagisk ä¼šåƒç—…æ¯’ä¸€æ ·ï¼ŒæŠŠè‡ªå·±çš„æ ¸å¿ƒä»£ç ï¼ˆ<code>su</code> æ–‡ä»¶å’Œå®ˆæŠ¤è¿›ç¨‹ï¼‰<strong>æ³¨å…¥</strong> åˆ°è¿™ä¸ªé•œåƒé‡Œï¼Œè€Œå®Œå…¨ä¸å»ä¿®æ”¹åŸæœ¬çš„ System åˆ†åŒºã€‚</li>\n<li><strong>ç§»æ¤æ‰‹æœ¯</strong>ï¼šå› ä¸ºä½ ä¹‹å‰<strong>è§£é”äº† BL</strong>ï¼ŒBootloader çœ‹åˆ°è¿™ä¸ªè¢«ç¯¡æ”¹è¿‡çš„é•œåƒï¼Œè™½ç„¶ç­¾åä¸å¯¹ï¼Œä½†å®ƒè€¸è€¸è‚©ï¼šâ€œåæ­£ä½ è§£é”äº†ï¼Œä½ å¼€å¿ƒå°±å¥½â€ï¼Œç„¶åæŠŠå®ƒåˆ·è¿›äº†ç¡¬ç›˜ã€‚</li>\n<li><strong>å¤ºèˆ</strong>ï¼šæ‰‹æœºé‡å¯ï¼Œå†…æ ¸åŠ è½½ã€‚Magisk çš„å®ˆæŠ¤è¿›ç¨‹éšä¹‹å¯åŠ¨ï¼Œæ¥ç®¡äº†æƒé™ç®¡ç†ã€‚</li>\n</ol>\n<p><img alt=\"åˆ·æœº\" src=\"https://img2024.cnblogs.com/blog/1158182/202601/1158182-20260131153926524-1349870764.jpg\" /></p>\n<p><strong>3. ç»ˆæç ´è§£ï¼šSwitch ä¸èŠ¯ç‰‡ç¡¬ç ´</strong></p>\n<p>å¦‚æœè¯´æ‰‹æœº Root è¿˜æ˜¯è½¯ä»¶å±‚é¢çš„åšå¼ˆï¼Œé‚£ä¹ˆ Switch çš„ç ´è§£å°±æ˜¯ç‰©ç†å±‚é¢çš„æš´åŠ›ç¾å­¦ã€‚Switch ç ´è§£çš„æ ¸å¿ƒåŠ¨åŠ›éå¸¸æœ´ç´ ï¼š<strong>å› ä¸ºç©·ï¼Œä¸æƒ³ä¹°æ¸¸æˆï¼Œæ‰€ä»¥å¿…é¡»ç»•è¿‡æ¸¸æˆç­¾åéªŒè¯ã€‚</strong></p>\n<p><strong>(1) ä¸Šå¤æ—¶ä»£çš„â€œè½¯ç ´â€</strong></p>\n<p>æœ€æ—©çš„ä¸€æ‰¹ Switchï¼ˆ2018 å¹´å‰å‡ºå‚ï¼‰ï¼ŒèŠ¯ç‰‡ï¼ˆTegra X1ï¼‰é‡Œçš„ <strong>BootROM</strong> ä»£ç å†™æŒ«äº†ã€‚é»‘å®¢ä¸ä»…éœ€è¦ç”¨ä¸€æ ¹å›å½¢é’ˆ<strong>çŸ­æ¥æ‰‹æŸ„æ»‘è½¨</strong>è¿›å…¥ RCMï¼ˆæ¢å¤ï¼‰æ¨¡å¼ï¼Œè¿˜éœ€è¦é…åˆ<strong>ç”µè„‘æˆ–æ³¨å…¥å™¨é€šè¿‡ USB æ¥å£å‘é€ä¸€æ®µ Payload</strong>ï¼Œåˆ©ç”¨ç¼“å†²åŒºæº¢å‡ºæ¼æ´æ¬ºéª— CPUã€‚è¿™å±äºâ€œè€å¤©çˆ·èµé¥­åƒâ€ï¼Œä»»å¤©å ‚é™¤äº†å‡ºæ–°ç¡¬ä»¶ï¼Œè½¯ä»¶å±‚é¢æ ¹æœ¬ä¿®è¡¥ä¸äº†ã€‚</p>\n<p><strong>(2) ç°ä»£çš„â€œç¡¬ç ´â€ (Modchip èŠ¯ç‰‡ç ´è§£)</strong></p>\n<p>ä»»å¤©å ‚åæ¥ä¿®å¤äº†æ¼æ´ã€‚ç°åœ¨çš„ç ´è§£å¿…é¡»<strong>æ‹†æœº</strong>ï¼Œåœ¨ä¸»æ¿ä¸Šæå…¶ç²¾ç»†åœ°<strong>ç„Šæ¥ä¸€é¢—ç¬¬ä¸‰æ–¹èŠ¯ç‰‡</strong>ã€‚è¿™ç©æ„çš„åŸç†å« <strong>â€œç”µå‹æ•…éšœæ³¨å…¥â€ (Voltage Glitching)</strong>ã€‚</p>\n<ul>\n<li><strong>ã€åŸç†ã€‘</strong> Switch å¯åŠ¨æ—¶ï¼ŒCPU ä¼šè¯»å–å®˜æ–¹ Bootloader å¹¶è¿›è¡Œç­¾åæ ¡éªŒã€‚</li>\n<li><strong>ã€æ”»å‡»ã€‘</strong> ç„Šåœ¨ä¸»æ¿ä¸Šçš„ç ´è§£èŠ¯ç‰‡åƒç‹™å‡»æ‰‹ä¸€æ ·ï¼Œæ­»æ­»ç›¯ç€ CPUã€‚å½“ CPU å‡†å¤‡æ‰§è¡Œâ€œæ ¡éªŒç­¾åâ€è¿™ä¸€è¡Œä»£ç çš„<strong>çº³ç§’çº§ç¬é—´</strong>ï¼Œç ´è§£èŠ¯ç‰‡çªç„¶<strong>æ‹‰ä½ CPU çš„æ ¸å¿ƒç”µå‹ (VCC)</strong>ã€‚</li>\n<li><strong>ã€ç»“æœã€‘</strong> ç”µå‹éª¤é™å¯¼è‡´ CPU å°±åƒè¢«ç”µå‡»äº†ä¸€ä¸‹ï¼Œè„‘å­â€œæ‡µâ€äº†é‚£ä¹ˆä¸€ç¬é—´ã€‚å®ƒåˆšå¥½<strong>è·³è¿‡äº†æ ¡éªŒæŒ‡ä»¤</strong>ï¼Œæˆ–è€…å°†å¯„å­˜å™¨é‡Œæ ¡éªŒå¤±è´¥çš„ <code>False</code> é”™è¯¯åœ°è¯»æˆäº† <code>True</code>ã€‚</li>\n</ul>\n<p>è¿™å°±å¥½æ¯”ä¿å®‰æ‹¦ä½ä½ è¦æŸ¥èº«ä»½è¯ï¼Œä½ æ²¡å¸¦ã€‚ä½†åœ¨ä¿å®‰å¼ å˜´é—®ä½ â€œèº«ä»½è¯å‘¢ï¼Ÿâ€çš„ä¸€ç¬é—´ï¼Œä½ çªç„¶åœ¨ä»–è€³è¾¹æ•²äº†ä¸€è®°é”£ã€‚ä¿å®‰è„‘å­ä¸€ç‰‡ç©ºç™½ï¼Œä¸‹æ„è¯†åœ°æ‘†æ‘†æ‰‹ï¼šâ€œè¡Œè¡Œè¡Œï¼Œè¿›å»å§ã€‚â€</p>\n<p><strong>(3) é¸ å é¹Šå·¢ï¼šAtmosphere (å¤§æ°”å±‚)</strong></p>\n<p>æ—¢ç„¶é€šè¿‡â€œç”µå‡»â€ä¿å®‰æ··è¿›äº†å¤§é—¨ï¼Œæˆ‘ä»¬å°±ä¸åŠ è½½ä»»å¤©å ‚å®˜æ–¹ç³»ç»Ÿäº†ï¼Œè€Œæ˜¯åŠ è½½ <strong>Atmosphere</strong>ã€‚å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª<strong>å®šåˆ¶çš„ Bootloader + ç³»ç»Ÿè¡¥ä¸é›†</strong>ã€‚å®ƒæ¥ç®¡äº†å¯åŠ¨æµç¨‹ï¼Œå¹¶ä¸”åœ¨å†…å­˜ä¸­å®æ—¶ä¿®æ”¹ä»»å¤©å ‚çš„ OSï¼Œæ¬ºéª—ç³»ç»Ÿè¯´ï¼šâ€œè¿™å¼ ç›—ç‰ˆå¡æ˜¯é€šè¿‡éªŒè¯çš„â€ã€‚</p>\n<p><img alt=\"switch\" src=\"https://img2024.cnblogs.com/blog/1158182/202601/1158182-20260131153938657-967507878.jpg\" /></p>\n<h2 id=\"ä¸ƒçŒ«é¼ æ¸¸æˆ\">ä¸ƒã€çŒ«é¼ æ¸¸æˆ</h2>\n<p>Root æˆåŠŸäº†ï¼Œå¹¶ä¸ä»£è¡¨ä½ å¯ä»¥é«˜æ•æ— å¿§ã€‚äº‹å®ä¸Šï¼Œè¿™æ‰æ˜¯ä½ å’Œ App å¼€å‘å•†ï¼ˆå°¤å…¶æ˜¯é“¶è¡Œã€æ¸¸æˆï¼‰ä¹‹é—´â€œçŒ«é¼ æ¸¸æˆâ€çš„å¼€å§‹ã€‚</p>\n<p><strong>1. App æ˜¯æ€ä¹ˆå‘ç°ä½  Root çš„ï¼Ÿ</strong></p>\n<p>App ä¹Ÿæ˜¯è¿è¡Œåœ¨ Ring 3 çš„å¹³æ°‘ï¼Œå®ƒä¸èƒ½ç›´æ¥é—® CPU â€œæˆ‘æ˜¯ä¸æ˜¯è¢« Root äº†â€ã€‚ä½†å®ƒæœ‰å¾ˆå¤šé—´æ¥æ‰‹æ®µï¼š</p>\n<ul>\n<li><strong>æŸ¥æˆ·å£ï¼ˆæ–‡ä»¶æ‰«æï¼‰</strong>ï¼šApp ä¼šå·å·æ‰«æä½ çš„ <code>/bin</code> æˆ– <code>/sbin</code> ç›®å½•ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰ <code>su</code> è¿™ä¸ªæ–‡ä»¶ï¼Œæˆ–è€…æœ‰æ²¡æœ‰å®‰è£… <code>Magisk Manager</code> è¿™ä¸ª Appã€‚</li>\n<li><strong>æ‰“ç”µè¯é—®å®¶é•¿ï¼ˆPlay Integrity APIï¼‰</strong>ï¼šè¿™æ˜¯æœ€ç‹ çš„ä¸€æ‹›ã€‚App ä¼šå‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼Œé€šè¿‡ Google çš„æœåŠ¡å»è¯¢é—®ä½ çš„åº•å±‚ç¡¬ä»¶ã€‚Google ä¼šæ£€æŸ¥ä½ çš„ Bootloader çŠ¶æ€ã€‚å¦‚æœä½ è§£é”äº†ï¼Œç¡¬ä»¶å±‚é¢çš„ <strong>TEE (å¯ä¿¡æ‰§è¡Œç¯å¢ƒ)</strong> å°±ä¼šè€å®äº¤å¾…ï¼šâ€œæ˜¯çš„ï¼Œæˆ‘çš„å¤§é—¨è¢«æ‰“å¼€äº†ã€‚â€</li>\n</ul>\n<p><strong>2. Magisk çš„éšèº«æœ¯ï¼šå‘½åç©ºé—´éš”ç¦» (Namespace Isolation)</strong></p>\n<p>æ—¢ç„¶ App ä¼šæŸ¥æ–‡ä»¶ï¼Œé‚£æˆ‘ä»¬åœ¨å®ƒæŸ¥æˆ¿çš„æ—¶å€™ï¼ŒæŠŠè¿ç¦å“è—èµ·æ¥ä¸å°±å¥½äº†ï¼Ÿè¿™å°±æ˜¯ Magisk Hideï¼ˆç°åœ¨è¿›åŒ–ä¸º Zygisk/Shamikoï¼‰çš„æ ¸å¿ƒåŸç†ã€‚</p>\n<p>Linux å†…æ ¸æœ‰ä¸€ä¸ªå¼ºå¤§çš„åŠŸèƒ½å« <strong>Mount Namespace</strong>ã€‚å®ƒå¯ä»¥è®©æ¯ä¸ªè¿›ç¨‹çœ‹åˆ°å®Œå…¨ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿè§†å›¾ã€‚</p>\n<ul>\n<li><strong>å¹³æ—¶</strong>ï¼šä½ çš„æ–‡ä»¶ç³»ç»Ÿé‡Œç¡®å®æœ‰ Root ç›¸å…³çš„æ–‡ä»¶ã€‚</li>\n<li><strong>å½“ä½ æ‰“å¼€é“¶è¡Œ App æ—¶</strong>ï¼šMagisk ä¼šç«‹åˆ»æ‹¦æˆªè¿™ä¸ªå¯åŠ¨è¿‡ç¨‹ï¼Œä¸ºè¿™ä¸ªé“¶è¡Œ App å•ç‹¬åˆ›å»ºä¸€ä¸ªâ€œå¹³è¡Œå®‡å®™â€ã€‚</li>\n<li><strong>åœ¨é‚£ä¸ªå®‡å®™é‡Œ</strong>ï¼šMagisk ä¼šåˆ©ç”¨ <code>unmount</code> æŒ‡ä»¤ï¼ŒæŠŠ <code>su</code> æ–‡ä»¶ã€Magisk ç›¸å…³çš„æ¨¡å—å…¨éƒ¨â€œå¸è½½â€æ‰ã€‚</li>\n<li><strong>ç»“æœ</strong>ï¼šé“¶è¡Œ App çå¼€çœ¼ï¼Œçœ‹åˆ°çš„æ˜¯ä¸€ä¸ªå¹²å¹²å‡€å‡€ã€ä»¿ä½›ä»æœªè¢« Root è¿‡çš„å®˜æ–¹ç³»ç»Ÿã€‚å®ƒæ»¡æ„åœ°ç‚¹ç‚¹å¤´ï¼Œè®©ä½ é€šè¿‡äº†ã€‚</li>\n</ul>\n<p><strong>3. é“é«˜ä¸€å°ºï¼Œé­”é«˜ä¸€ä¸ˆ</strong></p>\n<p>ç°åœ¨ï¼Œè¿™åœºæˆ˜äº‰å·²ç»è¿›åŒ–åˆ°äº†<strong>ç¡¬ä»¶å±‚é¢</strong>ã€‚</p>\n<p>åƒ <strong>KernelSU</strong> è¿™ç§æ–°ä¸€ä»£ Root æ–¹æ¡ˆï¼Œç›´æ¥æŠŠè‡ªå·±è—è¿›äº†å†…æ ¸é‡Œï¼ˆRing 0ï¼‰ï¼Œè®©è¿è¡Œåœ¨ Ring 3 çš„ App æ ¹æœ¬æ— ä»æŸ¥èµ·ã€‚è€Œ App å‚å•†åˆ™å¼€å§‹è”åˆæ‰‹æœºå‚å•†ï¼Œè¯•å›¾é€šè¿‡<strong>ç¡¬ä»¶å¯†é’¥è¯æ˜ (Key Attestation)</strong> è®©ä½ åœ¨è§£é” Bootloader çš„é‚£ä¸€åˆ»èµ·ï¼Œå°±æ°¸è¿œå¤±å»é€šè¿‡â€œå®‰å…¨éªŒè¯â€çš„èµ„æ ¼ã€‚</p>\n<p>åªè¦ä½ ä¸ºäº†è‡ªç”±è§£å¼€äº†é”ï¼Œä½ å°±æ³¨å®šè¦ä¸€ç›´åœ¨è¿™ä¸ªçŒ«é¼ æ¸¸æˆé‡Œé€šè¿‡ä¸æ–­çš„â€œä¼ªè£…â€ç”Ÿå­˜ä¸‹å»ã€‚</p>\n<h2 id=\"å…«æ€»ç»“å¿ƒæ™ºæ¨¡å‹\">å…«ã€æ€»ç»“ï¼šå¿ƒæ™ºæ¨¡å‹</h2>\n<p>çœ‹å®Œå…¨æ–‡ï¼Œä½ åº”è¯¥åœ¨è„‘æµ·é‡Œå»ºç«‹èµ·è¿™æ ·ä¸€å¼ å›¾ï¼š</p>\n<ol>\n<li><strong>åœ°å›¾ (MBR ä¸ GPT)</strong>ï¼šå†³å®šäº†åœ°ç›˜æ€ä¹ˆåˆ†ã€‚</li>\n<li><strong>æ¥åŠ› (BootROM/UEFI â†’ Bootloader â†’ Kernel)</strong>ï¼šæ˜¯ä¸€åœºä»ç¡¬ä»¶åˆ°è½¯ä»¶çš„ä¿¡ä»»æ¥åŠ›èµ›ã€‚</li>\n<li><strong>é«˜å¢™ (Ring 0 vs Ring 3)</strong>ï¼šæ˜¯ä¸ºäº†é˜²æ­¢å¹³æ°‘ï¼ˆAppï¼‰çæç¡¬ä»¶ã€‚</li>\n<li><strong>Root</strong>ï¼šæ˜¯ Ring 3 ä¸–ç•Œé‡Œçš„çš‡å¸ï¼Œä»–å¯ä»¥å‘½ä»¤ Ring 0 åŠäº‹ï¼Œä½†ä»–è‡ªå·±ä¾ç„¶åœ¨å¢™å¤–ã€‚</li>\n<li><strong>ç ´è§£</strong>ï¼šæ— è®ºæ˜¯ Root æ‰‹æœºè¿˜æ˜¯ç ´è§£ Switchï¼Œæœ¬è´¨éƒ½æ˜¯æƒ³æ–¹è®¾æ³•<strong>æ‰“æ–­ä¿¡ä»»é“¾çš„ä¼ é€’</strong>ã€‚</li>\n<li><strong>æ”»é˜²</strong>ï¼šRoot ä¹‹åï¼Œæ˜¯ä¸€åœºåˆ©ç”¨â€œå¹³è¡Œå®‡å®™â€ï¼ˆNamespaceï¼‰æ¬ºéª— App çš„çŒ«é¼ æ¸¸æˆã€‚</li>\n</ol>\n\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-31 15:40</span>&nbsp;\n<a href=\"https://www.cnblogs.com/kaiux\">å¿µé£é›¶å£¹</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">119</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">2</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "AAæ¸¸æˆè„šæœ¬è§„èŒƒï¼ˆAA Game Scriptï¼‰",
      "link": "https://www.cnblogs.com/ygluu/p/19550578",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/ygluu/p/19550578\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-31 15:22\">\n    <span>AAæ¸¸æˆè„šæœ¬è§„èŒƒï¼ˆAA Game Scriptï¼‰</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<font color=\"#002FA5\">\n<h2 id=\"1-ä»‹ç»\">1 ä»‹ç»</h2>\n<p>ä¸­æ–‡åï¼šAAæ¸¸æˆè„šæœ¬<br />\nè‹±æ–‡åï¼šAA Game Script<br />\nç®€  ç§°ï¼šAAè„šæœ¬ï¼ˆAAGSï¼‰<br />\nä½œ  è€…ï¼šygluuï¼ˆç å®¢ï¼‰<br />\nWeChat: 48092788</p>\n<p><strong>AAè„šæœ¬æ—¨ä¸ºï¼šä¸ºæ¸¸æˆæä¾›ä¸€ç§æ›´åŠ ç®€å•è€Œåˆçµæ´»çš„é€šç”¨é…ç½®æ–¹å¼</strong>ã€‚</p>\n<p><strong>æ³¨</strong>ï¼š<br />\n1ã€å‘½åæ— ä»»ä½•å«ä¹‰ä»…æ˜¯æ ‡è¯†ç¬¦<br />\n2ã€æœ¬äººåœ¨å…¶ä»–åšæ–‡ä¸­æåˆ°çš„æ•°æ®åï¼Œåœ¨æœ¬æ–‡ä¸­ç»Ÿç§°ä¸ºå˜é‡åï¼Œä¸¤è€…ç­‰æ•ˆ<br />\n3ã€æœ¬æ–‡äº¦æ˜¯æœ¬äººè¿‡å»åšå®¢çŸ¥è¯†ç‚¹çš„ç³»ç»ŸåŒ–æ€»ç»“ï¼ˆç›¸å…³å‚è€ƒè§é™„å½•3ï¼‰<br />\n4ã€æœ¬è„šæœ¬ä¸ºé€šç”¨è„šæœ¬ï¼Œä¸å±€é™äºä»»ä½•æ¸¸æˆç±»å‹<br />\n5ã€æ•ä½œè€…è§è¯†æœ‰é™ï¼Œå¦‚æœ‰é›·åŒçº¯å±å·§åˆï¼Œè¯·ç•™è¨€å¿…åˆ ä¹‹</p>\n<p>é™„å›¾ æ¡ä»¶ç³»ç»ŸåŸç†ï¼š<br />\n<img alt=\"image\" class=\"lazyload\" /></p>\n<p><strong>ç³»ç»Ÿæ”¯æ’‘</strong><br />\nAAè„šæœ¬çš„ç³»ç»Ÿæ”¯æ’‘å®ç°åŸç†å‚è€ƒé™„å½•5ã€Šä¸‡ç‰©çš†IDã€ä¸‡äº‹çš†äº‹ä»¶ã€ä¸‡äººçš†æ•°æ®ã€‹ã€‚<br />\nAAè„šæœ¬æœ‰ä¸¤ç§å¹³å°è§£ææ–¹å¼å¯é€‰ï¼š<br />\n1ã€ç”¨å·¥å…·å°†é…ç½®è¡¨æŒ‰æ¥å£è§„èŒƒé¢„å…ˆç¿»è¯‘æˆluaè„šæœ¬ï¼ˆå‚è€ƒé™„å½•5 data-e çš„luaéƒ¨åˆ†ï¼‰ã€‚<br />\n2ã€ç”¨é«˜çº§è¯­è¨€åœ¨æ¸¸æˆå¯åŠ¨æ—¶è§£ææˆç¨‹åºå¯¹è±¡ï¼ˆå‚è€ƒé™„å½•5 data-e çš„golangéƒ¨åˆ†ï¼‰ã€‚<br />\næ³¨ï¼šAAè„šæœ¬è§£å†³å¤šæ•°æ—¥å¸¸ç­–åˆ’éœ€æ±‚ï¼Œå°‘æ•°å¤æ‚éœ€æ±‚å¯ç”±Luaè„šæœ¬å®ç°ã€‚</p>\n<h2 id=\"2-on-doæ¨¡å‹\">2 ON-DOæ¨¡å‹</h2>\n<p>åœ¨æ¸¸æˆå¼€å‘å½“ä¸­ï¼Œå¤šæ•°ç­–åˆ’é…ç½®éœ€æ±‚ä¸å¤–ä¹ï¼šå½“ä»€ä¹ˆæ¡ä»¶æ»¡è¶³æ—¶åšä»€ä¹ˆäº‹æƒ…ï¼Œè€Œæ¸¸æˆæœ‰ä»–ç‹¬æœ‰çš„æ•°æ®å½¢æ€ä»è€Œé€ å°±äº†ä¸€ç§æ—¢å®šæ¨¡å¼ï¼Œæ‰€ä»¥æœ¬æ–‡å°†è¿™ç§æ¨¡å¼æŠ½è±¡ä¸ºON-DOæ¨¡å‹ã€‚<br />\n<strong>ON-DOæ¨¡å‹æ¦‚å¿µè¯æ±‡</strong>ï¼š</p>\n<blockquote style=\"color: rgba(102, 102, 102, 1); border-left-color: rgba(255, 102, 0, 1);\">\nONï¼šåœ¨æŸç§æ¡ä»¶è¾¾æˆçš„æ—¶å€™<br />\nDOï¼šåšä»€ä¹ˆäº‹æƒ…<br />\n<br />\nCondï¼šæ¡ä»¶è¡¨è¾¾å¼ï¼Œå¦‚ï¼š(A&gt;10)&amp;(B&lt;0)<br />\nActï¼šåŠ¨ä½œè¡¨è¾¾å¼ï¼Œå¦‚ï¼šA+11;B-10<br />\n</blockquote>\n<p>ONè¡¨è¾¾å¼ã€Condè¡¨è¾¾å¼ã€æ¡ä»¶è¡¨è¾¾å¼ä¸‰è€…æ¦‚å¿µç­‰åŒã€‚<br />\nDOè¡¨è¾¾å¼ã€Actè¡¨è¾¾å¼ã€åŠ¨ä½œè¡¨è¾¾å¼ä¸‰è€…æ¦‚å¿µç­‰åŒã€‚</p>\n<p><strong>ON-DOæ¨¡å‹ä¸‰æ­¥éª¤</strong>ï¼š<br />\n1ã€å®šä¹‰å˜é‡<br />\n2ã€å®Œå–„æ¡ä»¶å‡½æ•°å’Œç¼–å†™æ¡ä»¶è¡¨è¾¾å¼<br />\n3ã€å®Œå–„åŠ¨ä½œå‡½æ•°å’Œç¼–å†™åŠ¨ä½œè¡¨è¾¾å¼</p>\n<h2 id=\"3-æ¡ä»¶è¡¨è¾¾å¼è§„èŒƒ\">3 æ¡ä»¶è¡¨è¾¾å¼è§„èŒƒ</h2>\n<p><strong>å››åˆ™è¿ç®—</strong>ï¼š+ - * /<br />\nå¦‚ï¼šç©å®¶ç­‰çº§&gt;10 &amp; (ä»Šæ—¥æ€æ€ª + æ˜¨æ—¥æ€æ€ª) &gt; 200<br />\n<strong>æ¯”è¾ƒè¿ç®—</strong>ï¼š&gt; =&gt; = &lt; &lt;=<br />\n<strong>é€»è¾‘è¿ç®—</strong>ï¼š&amp; | and or<br />\n<strong>ä¼˜å…ˆçº§</strong>ï¼š( )<br />\n<strong>å˜é‡</strong>: è§é™„å½•å˜é‡è¡¨<br />\n<strong>å‡½æ•°</strong>: è§é™„å½•å‡½æ•°åº“<br />\n<strong>å¸¸é‡</strong>ï¼šabc 123 true ...<br />\n<strong>æ¶ˆè€—åŠ¨ä½œ</strong>(å‡å·)ï¼š-<br />\næ³¨ï¼šå‡å·è¡¨ç¤ºèƒ½å¤Ÿæ‰£å‡æŒ‡å®šçš„ç‰©å“æˆ–æ•°æ®ï¼Œå¦‚ï¼šç©å®¶ç­‰çº§&gt;=10 &amp; å…¥åœºå·-10 &amp; é‡‘å¸-20</p>\n<p><strong>ç¤ºä¾‹</strong>ï¼š</p>\n<blockquote style=\"color: rgba(102, 102, 102, 1); border-left-color: rgba(255, 102, 0, 1);\">\nç¤ºä¾‹1ï¼šæ—¥æœŸ&gt;=2023-01-01 &amp; æ—¶é—´&gt;18:00:00 &amp; äº‹ä»¶(è¿›å…¥åœ°å›¾) &amp; åœ°å›¾(åç§°ï¼ŒèŠ±å±±)<br />\nç¤ºä¾‹2ï¼šç­‰çº§&gt;=10 &amp; é‡‘å¸-10 &amp; ä¸Šå±±å¡-20<br />\nç¤ºä¾‹3ï¼šç­‰çº§&gt;=20 &amp; (é‡‘å¸-30 | ä¸Šå±±å¡-30)<br />\nç¤ºä¾‹4ï¼šå½“å‰åœ°å›¾=èŠ±å±± &amp; æ€æ¶çŠ¬&gt;=100<br />\n</blockquote>\n<h2 id=\"4-åŠ¨ä½œè¡¨è¾¾å¼è§„èŒƒ\">4 åŠ¨ä½œè¡¨è¾¾å¼è§„èŒƒ</h2>\n<p><strong>å››åˆ™è¿ç®—</strong>ï¼š+ - * /<br />\nå¦‚ï¼šå¹¸è¿å€¼=(å–æ€ªç‰©(å¹¸è¿è€…)+å–åœ°å›¾(å¹¸è¿å€¼)+å–ç‰©å“(å¹¸è¿å€¼)+ç©å®¶å¹¸è¿å€¼) / 3 * 1.3<br />\n<strong>ç´¯è®¡è¿ç®—</strong>ï¼š+ - * / += -= *= /=<br />\nå¦‚ï¼šé‡‘å¸+10;é‡‘å¸+=10ï¼Œå‡è¡¨ç¤ºé‡‘å¸ç´¯åŠ 10<br />\n<strong>èµ‹å€¼</strong>(ç­‰äºå·æˆ–å†’å·å‡å¯)ï¼š= :<br />\n<strong>åˆ†éš”ç¬¦</strong>(åˆ†å·)ï¼š;<br />\n<strong>ä¼˜å…ˆçº§</strong>ï¼š( )<br />\n<strong>å‡½æ•°</strong>ï¼šè§é™„å½•å‡½æ•°åº“ï¼Œå«è§¦å‘äº‹ä»¶å‡½æ•°ï¼šäº‹ä»¶(XXX)</p>\n<p><strong>ç¤ºä¾‹</strong>:</p>\n<blockquote style=\"color: rgba(102, 102, 102, 1); border-left-color: rgba(255, 102, 0, 1);\">\nç¤ºä¾‹1ï¼šæ”»å‡»+100;é˜²å¾¡+20<br />\nç¤ºä¾‹2: é‡‘å¸+20;çµèŠ+20<br />\nç¤ºä¾‹3ï¼šæ¶ˆè€—(é‡‘å¸:100,é“¶å¸:200);è·³è½¬(å—å¤©é—¨,103,304) // å‡½æ•°å‚æ•°è§„èŒƒç”±å‡½æ•°å®šä¹‰<br />\nç¤ºä¾‹4ï¼šå¥–åŠ±(é‡‘å¸:100,é“¶å¸:200);å¥–åŠ±(1001) // å¥–åŠ±åŒ…é‡Œçš„é…ç½®ID<br />\nç¤ºä¾‹6: å……å€¼=188;äº‹ä»¶(å……å€¼) // è®¾ç½®å……å€¼å˜é‡ï¼Œè§¦å‘å……å€¼äº‹ä»¶<br />\nç¤ºä¾‹6: åœ°å›¾=Map.Name;æ€ªç‰©=Mon.Name;æ€ªç‰©ç±»å‹=çº¢æ€ª;äº‹ä»¶(æ€æ€ª) // è®¾ç½®æ€æ€ªæ•°æ®ï¼Œè§¦å‘æ€æ€ªäº‹ä»¶<br />\n</blockquote>\n<p>æ³¨ï¼š<br />\n1ã€åŠ¨ä½œè¡¨è¾¾å¼åŒ…å«äº†æ•°æ®çš„æ“ä½œã€ç‰©å“çš„å¥–åŠ±å’Œäº‹ä»¶è§¦å‘ç­‰ï¼Œå¦‚æœæœ‰ç‰©å“å¥–åŠ±ç³»ç»Ÿä¼šè‡ªåŠ¨åŒºåˆ†å“ªäº›æ˜¯ç‰©å“å¹¶ç»“åˆèƒŒåŒ…ç©ºé—´æ¥æ‰§è¡Œå¥–åŠ±ã€‚<br />\n2ã€è§¦å‘äº‹ä»¶æ˜¯AAè„šæœ¬çš„æ ¸å¿ƒï¼Œä»–ä¼šè§¦å‘å…³è”æ¡ä»¶çš„åˆ¤æ–­å’ŒåŠ¨ä½œæ‰§è¡Œã€‚</p>\n<h2 id=\"5-æµç¨‹æ§åˆ¶è¡¨è¾¾å¼è§„èŒƒæ´»åŠ¨ç³»ç»Ÿè®¾è®¡è§„èŒƒ\">5 æµç¨‹æ§åˆ¶è¡¨è¾¾å¼è§„èŒƒï¼ˆæ´»åŠ¨ç³»ç»Ÿè®¾è®¡è§„èŒƒï¼‰</h2>\n<p>æµç¨‹æ§åˆ¶æ˜¯ON-DOè¡¨è¾¾å¼å¯¹ç»„åˆçš„æ–‡æœ¬æ–‡ä»¶ï¼Œå¦‚ï¼šctrl.aaï¼Œé»˜è®¤é€å¯¹æ‰§è¡Œã€‚ON-ORå’ŒDO-ORè¡¨è¾¾å¼å¯¹æ˜¯æˆ–å…³ç³»ï¼Œä¸¤å¯¹æˆ–å¤šå¯¹æ—¶è¡¨ç¤ºä»»æ„ä¸€å¯¹æ»¡è¶³å³å¯ï¼Œå•å¯¹ä»ç„¶è¿˜æ˜¯â€œä¸â€å…³ç³»ã€‚<br />\nç¤ºä¾‹ï¼šæ´»åŠ¨è¡¨è¾¾å¼</p>\n<blockquote style=\"color: rgba(102, 102, 102, 1); border-left-color: rgba(255, 102, 0, 1);\">\nNameï¼šæ¯æ—¥BOSS\n<p>ON: æ—¶é—´&gt;=18:25<br />\nDO:<br />\nåˆ›å»ºåœ°å›¾(èŠ±å±±, å®‰å…¨åœ°å›¾=1)  // åœ°å›¾è®¾ç½®ä¸ºéæˆ˜æ–—çŠ¶æ€<br />\nåˆ·æ€ª(å·¨å…½, x, y, z)<br />\nå…¥å£å›¾æ ‡(èŠ±å±±); è·‘é©¬ç¯(å·¨å…½å‡ºæ¥æ£ä¹±äº†ï¼Œå¿«æ¥å‡»æ€å®ƒå§ï¼)<br />\nèŠå¤©(ä¸–ç•Œé¢‘é“, å·¨å…½å‡ºæ¥æ£ä¹±äº†ï¼Œå¿«æ¥å‡»æ€å®ƒå§ï¼)</p>\n<p>ON: æ—¶é—´&gt;=18:30<br />\nDO:<br />\nåœ°å›¾å˜é‡(èŠ±å±±, å®‰å…¨åœ°å›¾=0)  // 18:30å¼€å§‹æˆ˜æ–—<br />\nè·‘é©¬ç¯(å·¨å…½å‡ºæ¥æ£ä¹±äº†ï¼Œå¿«æ¥å‡»æ€å®ƒå§ï¼)<br />\nèŠå¤©(ä¸–ç•Œé¢‘é“, å·¨å…½å‡ºæ¥æ£ä¹±äº†ï¼Œå¿«æ¥å‡»æ€å®ƒå§ï¼)</p>\n<p>// å¦‚æœè¶…æ—¶åˆ™<br />\nON-OR: æ—¶é—´&gt;=19:00<br />\nDO-OR: GOTO(æ¸…åœº)</p>\n<p>// å¦‚æœæ­»äº¡åˆ™<br />\nON-OR: æ­»äº¡æ€ªç‰©=å·¨å…½<br />\nDO-OR: å¥–åŠ±(é‡‘å¸:100,è¯æ°´1000);GOTO(æ¸…åœº)</p>\n<p>Labelï¼šæ¸…åœº<br />\n// labelä¹‹åæ— æ¡ä»¶çš„å¯ä»¥ä¸å†™è¡¨è¾¾å¼, ä¹Ÿå¯ä»¥ä¸å†™ON:<br />\nON:<br />\nDO: æ¸…åœº()</p>\n</blockquote>\n<h2 id=\"6-é…ç½®è¡¨è§„èŒƒ\">6 é…ç½®è¡¨è§„èŒƒ</h2>\n<p>æ³¨ï¼šé…ç½®è¡¨æ³›æŒ‡ç”µå­è¡¨æ ¼ä¹‹ç±»çš„æ–‡æ¡£</p>\n<h3 id=\"åŸºç¡€å­—æ®µç±»å‹\">åŸºç¡€å­—æ®µç±»å‹ï¼š</h3>\n<p><strong>int</strong> : 64ä½æœ‰ç¬¦å·æ•´å½¢<br />\n<strong>bool</strong> : å¸ƒå°”å‹<br />\n<strong>string</strong> : å­—ç¬¦ä¸²å‹<br />\n<strong>Cond</strong> : æ¡ä»¶è¡¨è¾¾å¼<br />\n<strong>Act</strong> : åŠ¨ä½œè¡¨è¾¾å¼<br />\n<strong>Ctrl</strong>: æµç¨‹æ§åˆ¶è¡¨è¾¾å¼</p>\n<h3 id=\"å®¹å™¨å­—æ®µç±»å‹\">å®¹å™¨å­—æ®µç±»å‹ï¼š</h3>\n<p><strong>arr</strong> : æ•°ç»„, ç±»å‹ç”±ç¬¬ä¸€ä¸ªå…ƒç´ çš„åŸºç¡€å­—æ®µç±»å‹å†³å®šï¼Œå¯è‡ªåµŒå¥—ï¼Œå¦‚ï¼š{{1,3},{3,4}}<br />\n<strong>map</strong> : key-valueé”®å€¼å¯¹å“ˆå¸Œè¡¨ï¼Œkeyç±»å‹å¯ä¸ºintå’Œstringï¼Œvalueç±»å‹ä½åŸºæœ¬å­—æ®µç±»å‹ï¼Œå¯è‡ªåµŒå¥—å’ŒåµŒå¥—arrï¼Œå¦‚ï¼š{{a=1,b=2},{a=A,b=B},{a=3,b={1,2,3,4}}}</p>\n<h3 id=\"é€šç”¨å­—æ®µå\">é€šç”¨å­—æ®µåï¼š</h3>\n<p><strong>CfgId</strong> : intï¼Œé…ç½®IDï¼Œå…¨å±€å”¯ä¸€ï¼Œint64å¯è§„åˆ’å¥½å„è¡¨çš„IDåˆ†æ®µèŒƒå›´ï¼Œè¡¨å†…è‡ªå¢ï¼Œä¸å¡«åˆ™ç³»ç»Ÿé»˜è®¤ä½¿ç”¨CfgNameå­—æ®µçš„crc64å€¼ï¼Œç¢°æ’åˆ™æç¤ºæ”¹å<br />\næ³¨ï¼š<br />\n1ã€å¦‚æœéœ€è¦åˆ†ç»„è®¾ç½®çš„ï¼Œæ¯1ä¸‡ä¸€ä¸ªIDæ®µï¼Œå¦‚2ç»„IDï¼š1000010000ï¼Œ3ç»„IDï¼š100001000010000,  å³å¯æ ¹æ®åˆ†ç»„ä¿¡æ¯è·å–é…ç½®å†…å®¹<br />\n2ã€è¦è§„åˆ’å·IDæ®µåˆ†é…æ‰èƒ½ä¿è¯å…¨å±€å”¯ä¸€ï¼Œæˆ–è‡ªè¡Œä½¿ç”¨ieee_crc64ç®—æ³•è®¡ç®—ã€‚<br />\n3ã€æ¨¡å—åŒ–åˆ†è¡¨é…ç½®æ— æ³•ç¡®ä¿CfgIDå…¨å±€å”¯ä¸€çš„å¯ä»¥ç¼ºçœä¸å¡«ï¼Œç³»ç»Ÿè‡ªåŠ¨ä½¿ç”¨ieee_crc64ç®—æ³•æ¥è®¡ç®—ï¼Œé…ç½®çš„æ—¶å€™ä½¿ç”¨CfgNameæ¥é…ç½®å³å¯ã€‚<br />\n<strong>CfgName</strong> : stringï¼Œé…ç½®åï¼Œå…¨å±€å”¯ä¸€ï¼Œå¿…å¡«ï¼Œå­—ç¬¦ä¸²å‹<br />\n<strong>CfgType</strong> : intï¼Œé…ç½®ç±»å‹ï¼Œå¦‚ï¼šè¯æã€è´§å¸ã€æ­¦å™¨ã€æœè£…ã€çº¢æ€ªã€<br />\n<strong>CfgFlag</strong> ï¼šintï¼Œé…ç½®æ ‡å¿—ï¼Œå³CfgTypeçš„ç»†åˆ†<br />\n<strong>ShowName</strong> : stringï¼Œæ˜¾ç¤ºåç§°ï¼Œç”¨äºUIå¤šå›½è¯­è¨€ç­‰ï¼Œä¸å¡«åˆ™é»˜è®¤ä½¿ç”¨CfgNameï¼Œå¦‚æœå¤šå›½è¯­è¨€ä½¿ç”¨â€œ/â€åˆ†éš”<br />\nå¦‚ï¼šè´§å¸/money/ë¨¸ë‹ˆï¼Œå¯æ ¹æ®è®¾å®šçš„è¯­è¨€ç´¢å¼•å·è·å–<br />\n<strong>Prop</strong> : mapï¼Œè¯¥é…ç½®å¯¹è±¡å…·æœ‰çš„è‡ªèº«å±æ€§<br />\nå¦‚åœ°å›¾è¡¨ï¼š{å¯ç©¿äºº=false,å¯ç©¿æ€ª=false,é­”æ€§=20}<br />\næ³¨ï¼šåœ°å›¾å±æ€§â€œé­”æ€§â€æ˜¯ç»“åˆæ€ªç‰©å’Œç©å®¶æ­»äº¡æ•°é‡ç”¨å…¬å¼è®¡ç®—å¾—å‡ºçš„æ•°å€¼ï¼Œé­”æ€§è¶Šå¤§ç©å®¶è¡Œä¸ºä¼šç¼“æ…¢ã€æŠ€èƒ½å‘½ä¸­ç‡ä¼šé™ä½ç­‰ã€‚<br />\n<strong>Attr</strong> : mapï¼Œè¡¨ç¤ºæ‹¥æœ‰è€…è·å¾—çš„å±æ€§åŠ æˆç­‰ï¼Œå¦‚ç‰©å“è¡¨ï¼š{é˜²å¾¡+100,æ”»å‡»+200}<br />\n<strong>Cond</strong> : Condï¼Œæ¡ä»¶è¡¨ç¤ºå¼<br />\n<strong>Act</strong> : Actï¼ŒåŠ¨ä½œè¡¨è¾¾å¼ï¼Œæ¡ä»¶è¾¾æˆå‡æ‰§è¡Œ</p>\n<h3 id=\"é…ç½®è¡¨æ³¨é‡Šè§„èŒƒ\">é…ç½®è¡¨æ³¨é‡Šè§„èŒƒï¼š</h3>\n<p>è¡¨æ ¼ç¬¬ä¸€æ ¼ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯â€œ/â€ã€â€œ#â€ã€â€œ;â€ä¹‹ä¸€çš„è¡¨ç¤ºè¯¥è¡Œä¸ºæ³¨é‡Š<br />\nç¬¬1ä¸ªéæ³¨é‡Šçš„è¡Œè¡¨ç¤ºå­—æ®µå<br />\nç¬¬2ä¸ªéæ³¨é‡Šçš„è¡Œè¡¨ç¤ºå­—æ®µç±»å‹<br />\nä»ç¬¬3ä¸ªéæ³¨é‡Šçš„è¡Œå¼€å§‹ä¸ºæ•°æ®éƒ¨åˆ†</p>\n<h2 id=\"7-å˜é‡å®šä¹‰è§„èŒƒ\">7 å˜é‡å®šä¹‰è§„èŒƒ</h2>\n<p>å˜é‡è¡¨ï¼švar.xlsx<br />\n<img alt=\"image\" class=\"lazyload\" /></p>\n<p><strong>CfgId</strong> : å˜é‡IDï¼Œå¦‚æœä¸å¡«åˆ™ä½¿ç”¨CfgNameè®¡ç®—CRC64ï¼Œç¢°æ’åˆ™æç¤ºæ”¹å<br />\n<strong>CfgName</strong> : å˜é‡åï¼Œç”¨äºé…ç½®æè¿°ï¼Œå…¨å±€å”¯ä¸€<br />\n<strong>ShowName</strong> : æ˜¾ç¤ºåï¼Œç”¨äºUIç­‰ï¼Œä¸å¡«é»˜è®¤ç­‰äºCfgName<br />\nå¦‚ï¼šè´§å¸/money/ë¨¸ë‹ˆï¼Œå¯æ ¹æ®è®¾å®šçš„è¯­è¨€ç´¢å¼•å·è·å–<br />\n<strong>Reset</strong> : intï¼Œé‡ç½®å‘¨æœŸï¼Œç”¨äºå‘¨æœŸæ€§å˜é‡å¤ä½ä¸ºåˆå§‹åŒ–ï¼Œä¸å¡«å’Œ0è¡¨ç¤ºä¸é‡ç½®ï¼Œ1ï¼šæ¯æ—¥é‡ç½®ï¼Œ2ï¼šæ¯å‘¨é‡ç½®ï¼Œ3ï¼šæ¯æœˆé‡ç½®ï¼Œ4ï¼šæ¯å¹´é‡ç½®<br />\nå¦‚å˜é‡ï¼šæ¯æ—¥æ€æ€ªã€å‘¨å……å€¼ã€æœˆå……å€¼ç­‰<br />\n<strong>Valid</strong> : intï¼Œæœ‰æ•ˆæœŸï¼Œè¿‡æœŸåç³»ç»Ÿä¸å†å­˜å‚¨è¿™äº›å˜é‡ï¼Œä¸å¡«æˆ–0è¡¨ç¤ºæ°¸ä¹…æœ‰æ•ˆï¼Œæœ€ç»ˆè¡¨ç°å½¢å¼æ˜¯å¤±æ•ˆç§’æ—¶é—´æˆ³<br />\nå¦‚ï¼šâ€œ10æœˆ1~10æœˆ10æ—¥â€è¡¨ç¤ºæ¯å¹´å›½åº†æœ‰æ•ˆï¼Œ10æœˆ10æ—¥åç³»ç»Ÿä¸å†å­˜å‚¨è¿™äº›å˜é‡<br />\n<strong>Cond</strong> ï¼šæ¡ä»¶è¡¨è¾¾å¼ï¼Œéç©ºåˆ™ç³»ç»Ÿä¼šä¾æ®æ¡ä»¶æ‰§è¡ŒActåŠ¨ä½œè¡¨è¾¾å¼ï¼Œç”¨äºå˜é‡è‡ªèº«çš„ç´¯è®¡è®¡ç®—<br />\n<strong>Act</strong> : CfgNameçš„èµ‹å€¼åŠ¨ä½œè¡¨è¾¾å¼<br />\næ³¨ï¼šå˜é‡è¡¨çš„åŠ¨ä½œè¡¨è¾¾å¼ä¸€èˆ¬åªå¯¹CfgNameçš„èµ‹å€¼æ“ä½œï¼Œä¸åº”è¯¥åšå…¶å®ƒæ“ä½œ<br />\nå¦‚å‘¨å……å€¼å˜é‡ï¼šON:äº‹ä»¶=å……å€¼ï¼ŒDO:å‘¨å……å€¼+=å½“å‰å……å€¼<br />\nå¦‚å‘¨å……å€¼å˜é‡ï¼šON:äº‹ä»¶=å……å€¼ï¼ŒDO:æœˆå……å€¼+=å½“å‰å……å€¼<br />\nå¦‚æ¯æ—¥æ€æ€ªå˜é‡ï¼šON:äº‹ä»¶=æ€æ€ªï¼ŒDO:æ¯æ—¥æ€æ€ª+1<br />\n<strong>Init</strong> : åˆå§‹å€¼ï¼Œä¸å¡«é»˜è®¤0ï¼Œæ•´å½¢å€¼æœ‰æ•ˆ<br />\n<strong>Min</strong> : æœ€å°å€¼ï¼Œä¸å¡«é»˜è®¤0ï¼Œæ•´å½¢å€¼æœ‰æ•ˆ<br />\n<strong>Max</strong> : æœ€å¤§å€¼ï¼Œä¸å¡«é»˜è®¤int64çš„æœ€å¤§å€¼ï¼Œæ•´å½¢å€¼æœ‰æ•ˆ</p>\n<p><strong>æ³¨</strong>ï¼š<br />\nå˜é‡ç±»å‹æœ‰stringã€int64ã€objï¼Œæ— éœ€å®šä¹‰è®¾å®šï¼Œä»¥æœ€åä¸€æ¬¡èµ‹å€¼çš„ç±»å‹ä¸ºå‡†ã€‚</p>\n<h2 id=\"8-å…»æˆçº¿ç³»ç»Ÿè®¾è®¡è§„èŒƒ\">8 å…»æˆçº¿ç³»ç»Ÿè®¾è®¡è§„èŒƒ</h2>\n<p>äº‹å®ä¸Šä»»åŠ¡ç³»ç»Ÿæ˜¯æ¯”è¾ƒå¤æ‚çš„å…»æˆçº¿ç³»ç»Ÿï¼Œå…»æˆçº¿æœ‰ä¸€ä¸ªç‰¹å¾æ˜¯é€çº§å‡é˜¶ï¼Œä¸”å…»æˆçº¿ä¸€èˆ¬æœ‰å±æ€§åŠ æˆï¼ˆä¸Šçº¿é‡ç®—ï¼‰å’Œç‰©å“å¥–åŠ±ï¼ˆä¸€æ¬¡æ€§ï¼‰ï¼Œå¹¶è§¦å‘å‡çº§äº‹ä»¶ã€‚</p>\n<h3 id=\"ç­‰çº§è‡ªå¢\">ç­‰çº§è‡ªå¢</h3>\n<p>ç”¨â€œæ¨¡å—åâ€+â€œç­‰çº§â€ä½œä¸ºç­‰çº§å˜é‡ï¼Œæ¯æ¬¡å‡çº§åˆ™è‡ªå¢ï¼Œå¦‚æ¨¡å—â€œèµé‡‘çŒäººâ€çš„æ¨¡å—ç­‰çº§å˜é‡æ˜¯ï¼šèµé‡‘çŒäººç­‰çº§</p>\n<h3 id=\"ä¸€å¯¹on-doæ¨¡å¼\">ä¸€å¯¹ON-DOæ¨¡å¼ï¼š</h3>\n<p>å­—æ®µï¼šCond<br />\nå­—æ®µï¼šAct<br />\nå¦‚ä¸‹è¡¨ï¼š<br />\n<img alt=\"image\" class=\"lazyload\" /></p>\n<p>æ³¨ï¼šåŠ¨ä½œè¡¨è¾¾å¼åŒ…å«äº†æ•°æ®çš„æ“ä½œå’Œç‰©å“çš„å¥–åŠ±ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åŒºåˆ†å“ªäº›æ˜¯ç‰©å“å¹¶ç»“åˆèƒŒåŒ…ç©ºé—´æ¥æ‰§è¡Œå¥–åŠ±ã€‚</p>\n<h3 id=\"ä¸¤å¯¹on-doæ¨¡å¼\">ä¸¤å¯¹ON-DOæ¨¡å¼</h3>\n<p>å¦‚æœä¸€å¯¹ON-DOæ¨¡å¼ä¸èƒ½æ»¡è¶³è¦æ±‚çš„åˆ™ä½¿ç”¨æœ¬æ¨¡å¼ã€‚<br />\nå­—æ®µï¼šCond1<br />\nå­—æ®µï¼šAct1<br />\nå­—æ®µï¼šCond2<br />\nå­—æ®µï¼šAct2<br />\næ¡ä»¶Cond1æ»¡è¶³äº†ä¸€æ¬¡æ€§æ‰§è¡ŒåŠ¨ä½œAct1ï¼Œæ¡ä»¶Cond2æ»¡è¶³äº†ä¸€æ¬¡æ€§æ‰§è¡ŒåŠ¨ä½œAct2ï¼Œä¸¤è€…ä»¥â€œæˆ–â€å…³ç³»æ‰§è¡Œï¼ˆæœ€å¤§å¯èƒ½ä¸¤è€…éƒ½æ»¡è¶³ï¼‰<br />\nç¬¬1å¯¹å¯ä»¥ç”¨äºåŸºç¡€æ•°æ®çš„è®¡ç®—ï¼Œå¦‚ï¼šON:äº‹ä»¶=æ€æ€ª &amp; åœ°å›¾=å—å¤©é—¨ï¼ŒDO: ä»Šæ—¥æ€æ€ª+1ï¼Œ<br />\nç¬¬2å¯¹åˆ™ç”¨ç¬¬1å¯¹çš„æ•°æ®ä½œä¸ºæ¡ä»¶ï¼Œå¦‚ï¼šON:ä»Šæ—¥æ€æ€ª&gt;20ï¼ŒDO: é‡‘å¸+20;è¯æ+20<br />\nå¦‚ä¸‹è¡¨ï¼š<br />\n<img alt=\"image\" class=\"lazyload\" /></p>\n<p>æ³¨ï¼šåŠ¨ä½œè¡¨è¾¾å¼åŒ…å«äº†æ•°æ®çš„æ“ä½œå’Œç‰©å“çš„å¥–åŠ±ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åŒºåˆ†å“ªäº›æ˜¯ç‰©å“å¹¶ç»“åˆèƒŒåŒ…ç©ºé—´æ¥æ‰§è¡Œå¥–åŠ±ã€‚</p>\n<h3 id=\"æµç¨‹æ§åˆ¶ç±»å‹æ¨¡å¼æ¯”è¾ƒå¤æ‚çš„éœ€æ±‚\">æµç¨‹æ§åˆ¶ç±»å‹æ¨¡å¼ï¼ˆæ¯”è¾ƒå¤æ‚çš„éœ€æ±‚ï¼‰</h3>\n<p>å¦‚æœä¸¤å¯¹ON-DOæ¨¡å¼ä¸èƒ½æ»¡è¶³è¦æ±‚çš„åˆ™ä½¿ç”¨æœ¬æ¨¡å¼ã€‚<br />\nå­—æ®µï¼šCtrl</p>\n<p>æ³¨ï¼šåŠ¨ä½œè¡¨è¾¾å¼åŒ…å«äº†æ•°æ®çš„æ“ä½œå’Œç‰©å“çš„å¥–åŠ±ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åŒºåˆ†å“ªäº›æ˜¯ç‰©å“å¹¶ç»“åˆèƒŒåŒ…ç©ºé—´æ¥æ‰§è¡Œå¥–åŠ±ã€‚</p>\n<h3 id=\"å±æ€§åŠ æˆ\">å±æ€§åŠ æˆ</h3>\n<p>å­—æ®µï¼šAttr map<br />\næ³¨ï¼šä»»åŠ¡ç³»ç»Ÿæ²¡æœ‰attrå­—æ®µï¼Œç©å®¶å±æ€§åŠ æˆè®¡ç®—çš„æ—¶å€™å¯ä»¥æ ¹æ®æ¨¡å—ç­‰çº§è·å–å…¶å€¼ã€‚</p>\n<p>å¯æ ¹æ®éœ€æ±‚é€‰æ‹©é€‰æ‹©ä¸Šè¿°3ä¸­æ¨¡å¼ä¹‹ä¸€å®ç°é…ç½®ã€‚</p>\n<h2 id=\"9-å‡½æ•°å®šä¹‰è§„èŒƒ\">9 å‡½æ•°å®šä¹‰è§„èŒƒ</h2>\n<p>å‡½æ•°å(å‚æ•°1,å‚æ•°2,..)<br />\n<strong>æ³¨æ„</strong>ï¼š<br />\n1ã€æ‰€æœ‰å‡½æ•°é»˜è®¤è¿”å›int64ï¼Œ0è¡¨ç¤ºå¤±è´¥ï¼Œç­‰äºå¸ƒå°”å€¼çš„false<br />\n2ã€å‡½æ•°å‚æ•°è§„èŒƒç”±å„å‡½æ•°å®šä¹‰</p>\n<p>ç¤ºä¾‹ï¼š<br />\n<img alt=\"image\" class=\"lazyload\" /></p>\n<h2 id=\"é™„å½•1-å˜é‡åº“\">é™„å½•1 å˜é‡åº“</h2>\n<p>â€¢æ—¶é—´<br />\nâ€¢æ—¥æœŸ<br />\nâ€¢æ—¶é—´æ—¥æœŸ<br />\nâ€¢å¹´<br />\nâ€¢æœˆ<br />\nâ€¢æ—¥<br />\nâ€¢å¤©<br />\nâ€¢æ˜ŸæœŸ<br />\nâ€¢æ—¶<br />\nâ€¢åˆ†<br />\nâ€¢ç§’<br />\nâ€¢åœ°å›¾ // å½“å‰æ‰€åœ¨åœ°å›¾<br />\nâ€¢X // å½“å‰ä½ç½®Xåæ ‡<br />\nâ€¢Y // å½“å‰ä½ç½®Yåæ ‡<br />\nâ€¢Z // å½“å‰ä½ç½®Zåæ ‡<br />\nâ€¢å……å€¼ // å½“å‰å……å€¼å˜é‡ï¼Œäº¦å³æœ€åä¸€æ¬¡å……å€¼</p>\n<p>å¯è‡ªè¡Œè¡¥å……å®Œå–„</p>\n<h2 id=\"é™„å½•2-äº‹ä»¶åº“\">é™„å½•2 äº‹ä»¶åº“</h2>\n<p>â€¢å¹´ // æ—¶é—´ä¿¡æ¯æ”¹å˜<br />\nâ€¢æœˆ<br />\nâ€¢æ—¥<br />\nâ€¢å¤©<br />\nâ€¢æ˜ŸæœŸ<br />\nâ€¢æ—¶<br />\nâ€¢åˆ†<br />\nâ€¢ç§’<br />\nâ€¢ä¸Šçº¿<br />\nâ€¢ä¸‹çº¿<br />\nâ€¢æ–­çº¿<br />\nâ€¢è¿›å…¥åœ°å›¾<br />\nâ€¢ç¦»å¼€åœ°å›¾<br />\nâ€¢æ­»äº¡ // è¢«å¯¹æ‰‹æ€æ­»<br />\nâ€¢æ€æ­» // åˆšåˆšæ€æ­»ä¸€ä¸ªå¯¹æ‰‹<br />\nâ€¢å¤æ´»<br />\nâ€¢èµ°<br />\nâ€¢è·‘<br />\nâ€¢è·³<br />\nâ€¢é£<br />\nâ€¢è·¯è¿‡ // ä»å¯¹æ–¹xè·ç¦»èµ°è¿‡<br />\nâ€¢ç¢°ã€å¯¹è¯ // ç¢°åˆ°å¯¹æ–¹ã€å¯¹è¯<br />\nâ€¢è¸©ã€ç©¿ // è¸©åˆ°æˆ–ç©¿è¿‡å¯¹æ–¹</p>\n<p>å¯è‡ªè¡Œè¡¥å……å®Œå–„</p>\n<h2 id=\"é™„å½•3-æ¡ä»¶å‡½æ•°åº“\">é™„å½•3 æ¡ä»¶å‡½æ•°åº“</h2>\n<p>â€¢äº‹ä»¶(A,B,...) // åˆ¤æ–­äº‹ä»¶æ˜¯å¦åŒ…å«æ‰€åˆ—å€¼<br />\nâ€¢æ¶ˆè€—(A:100,B:200,...)<br />\nâ€¢å¯¹æ–¹(åå­—, ä¼åœ°é­”)ã€å¯¹æ–¹(ç±»å‹, æ€ªç‰©) // åˆ¤æ–­PKå¯¹æ–¹æŒ‡å®šçš„å˜é‡æ˜¯å¦ç­‰äºé¢„æœŸå€¼<br />\nâ€¢åœ°å›¾(åå­—, å—å¤©é—¨)ã€åœ°å›¾(ç±»å‹, å¤©ç•Œ) // åˆ¤æ–­åœ°å›¾æŒ‡å®šçš„å˜é‡æ˜¯å¦ç­‰äºé¢„æœŸå€¼</p>\n<p>å¯è‡ªè¡Œè¡¥å……å®Œå–„</p>\n<h2 id=\"é™„å½•4-åŠ¨ä½œå‡½æ•°åº“\">é™„å½•4 åŠ¨ä½œå‡½æ•°åº“</h2>\n<p>â€¢äº‹ä»¶(A,B,...) // ä¾æ¬¡è§¦å‘æ‰€åˆ—äº‹ä»¶ï¼Œè‡ªåŠ¨å¯¹äº‹ä»¶å˜é‡èµ‹å€¼å’Œæ¸…é™¤ï¼šäº‹ä»¶=A;è§¦å‘å›è°ƒ;äº‹ä»¶=0<br />\nâ€¢æ¶ˆè€—(A:100,B:200,...)<br />\nâ€¢å¥–åŠ±(A:100,B:200,...)ã€å¥–åŠ±(10003) // è°ƒç”¨IDæŒ‡å®šçš„å¥–åŠ±åŒ…è®¾å®šå®ç°<br />\nâ€¢åˆ·æ€ª(ä¼åœ°é­”,1,203,235)ã€åˆ·æ€ª(80001) // è°ƒç”¨IDæŒ‡å®šçš„å¸…æ€ªè®¾å®šå®ç°<br />\nâ€¢è·³è½¬(å—å¤©é—¨,304,208)ã€è·³è½¬(å—å¤©é—¨,304,208,10)// æŒ‡å®šèŒƒå›´éšæœº<br />\nâ€¢å¤æ´»(å—å¤©é—¨,304,208)ã€å¤æ´»() // åŸåœ°å¤æ´»<br />\nâ€¢èµ°(304,256) // ç”±åŸç‚¹åˆ°ç›®æ ‡ç‚¹<br />\nâ€¢è·‘(304,256)<br />\nâ€¢è·³(304,256)<br />\nâ€¢é£(304,256,503) // ç”±åŸç‚¹åˆ°ç›®æ ‡3Dç‚¹</p>\n<p>å¯è‡ªè¡Œè¡¥å……å®Œå–„</p>\n<h2 id=\"é™„å½•-5-ç›¸å…³å‚è€ƒé“¾æ¥\">é™„å½• 5 ç›¸å…³å‚è€ƒé“¾æ¥</h2>\n<p>é€šç”¨æ•°æ®å¼•æ“(data-e)åŠå…¶åœ¨æ¨¡å—åŒ–æ¸¸æˆå¼€å‘ä¸­çš„åº”ç”¨æ„æƒ³å›¾è§£<br />\n<a href=\"https://blog.csdn.net/guestcode/article/details/139897257\" rel=\"noopener nofollow\" target=\"_blank\">https://blog.csdn.net/guestcode/article/details/139897257</a></p>\n<p>ä¸‡ç‰©çš†IDã€ä¸‡äº‹çš†äº‹ä»¶ã€ä¸‡äººçš†æ•°æ®<br />\n<a href=\"https://www.cnblogs.com/ygluu/p/19117836\" target=\"_blank\">https://www.cnblogs.com/ygluu/p/19117836</a></p>\n</font>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-31 15:22</span>&nbsp;\n<a href=\"https://www.cnblogs.com/ygluu\">ç å®¢-ygluu</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">111</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "æ•°æ®â€œæ˜¾å¾®é•œâ€ï¼šèœ‚ç¾¤å›¾è®©æ¯ä¸ªæ•°æ®ç‚¹éƒ½å‘å£°",
      "link": "https://www.cnblogs.com/wang_yb/p/19557785",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/wang_yb/p/19557785\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-31 14:22\">\n    <span>æ•°æ®â€œæ˜¾å¾®é•œâ€ï¼šèœ‚ç¾¤å›¾è®©æ¯ä¸ªæ•°æ®ç‚¹éƒ½å‘å£°</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<p>æƒ³è±¡ä¸€ä¸‹å¤æ—¥çš„èŠ±ä¸›ä¸­ï¼Œæˆç¾¤çš„èœœèœ‚å›´ç»•ç€èŠ±æœµå¿™ç¢Œåœ°é£èˆã€‚æ¯åªèœœèœ‚éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ•°æ®ç‚¹ï¼Œå®ƒä»¬æ—¢ä¿æŒç¾¤ä½“èšé›†çš„å½¢æ€ï¼Œåˆä¸ä¼šå®Œå…¨é‡å åœ¨ä¸€èµ·ã€‚</p>\n<p>è¿™å°±æ˜¯<strong>èœ‚ç¾¤å›¾</strong>ï¼ˆ<code>Swarm Plot</code>ï¼‰çš„<strong>æ ¸å¿ƒç†å¿µ</strong>â€”â€”åœ¨æœ‰é™çš„ç©ºé—´å†…å±•ç¤ºæ‰€æœ‰æ•°æ®ç‚¹ï¼Œè®©æ¯ä¸ªç‚¹éƒ½èƒ½è¢«æ¸…æ™°çœ‹è§ã€‚</p>\n<p><strong>èœ‚ç¾¤å›¾</strong>æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°æ®å¯è§†åŒ–å›¾è¡¨ï¼Œå®ƒå°†åˆ†ç±»æ•°æ®ä¸æ•°å€¼æ•°æ®ç»“åˆèµ·æ¥ï¼Œå±•ç¤ºæ•°æ®çš„åˆ†å¸ƒæƒ…å†µã€‚</p>\n<p>ä¸ä¼ ç»Ÿçš„æ¡å½¢å›¾æˆ–ç®±çº¿å›¾ä¸åŒï¼Œèœ‚ç¾¤å›¾ä¸è¿›è¡Œä»»ä½•æ•°æ®èšåˆï¼Œè€Œæ˜¯å±•ç¤ºæ¯ä¸€ä¸ªåŸå§‹æ•°æ®ç‚¹ï¼Œé¿å…äº†ä¿¡æ¯ä¸¢å¤±ã€‚</p>\n<h1 id=\"1-èœ‚ç¾¤å›¾æ ¸å¿ƒç‰¹ç‚¹\">1. èœ‚ç¾¤å›¾æ ¸å¿ƒç‰¹ç‚¹</h1>\n<p><strong>èœ‚ç¾¤å›¾</strong>æœ€å·§å¦™çš„åœ°æ–¹åœ¨äºå®ƒçš„å¸ƒå±€ç®—æ³•ã€‚</p>\n<p>å½“å¤šä¸ªæ•°æ®ç‚¹å…·æœ‰ç›¸ä¼¼æ•°å€¼æ—¶ï¼Œå®ƒä»¬ä¸ä¼šç®€å•åœ°é‡å åœ¨ä¸€èµ·ï¼Œè€Œæ˜¯åƒæœ‰â€œæ’æ–¥åŠ›â€ä¸€æ ·ï¼Œåœ¨å‚ç›´æ–¹å‘ï¼ˆæˆ–æ°´å¹³æ–¹å‘ï¼‰ä¸Šè½»å¾®åç§»ï¼Œå½¢æˆä¸€ä¸ªç±»ä¼¼èœ‚ç¾¤çš„åˆ†å¸ƒã€‚</p>\n<p>æ¯”å¦‚ï¼Œä¸‹é¢æ˜¯<strong>åŒä¸€ç»„æ•°æ®</strong>åœ¨<strong>æ•£ç‚¹å›¾</strong>å’Œ<strong>èœ‚ç¾¤å›¾</strong>ä¸­å±•ç¤ºçš„æ•ˆæœã€‚</p>\n\n<p><img alt=\"\" src=\"https://img2024.cnblogs.com/blog/83005/202601/83005-20260131142128895-781019092.png\" /></p>\n<p>ä»ä¸­å¯ä»¥çœ‹å‡ºèœ‚ç¾¤å›¾çš„æ ¸å¿ƒç‰¹ç‚¹æœ‰ï¼š</p>\n<ol>\n<li><strong>ç»ä¸é‡å </strong>ï¼š å®ƒé€šè¿‡ç®—æ³•æ£€æµ‹æ•°æ®ç‚¹çš„é‡å æƒ…å†µï¼Œä¸€æ—¦å‘ç°ä¸¤ä¸ªç‚¹æ•°å€¼ç›¸è¿‘ï¼Œå°±ä¼šè‡ªåŠ¨æŠŠå®ƒä»¬å‘æ°´å¹³æ–¹å‘æ¨å¼€ã€‚</li>\n<li><strong>ä¿ç•™åˆ†å¸ƒå½¢æ€</strong>ï¼š æ•£å¼€åçš„å½¢çŠ¶ï¼Œå¤©ç„¶å½¢æˆäº†ä¸€ç§ç±»ä¼¼â€œå°æç´â€æˆ–â€œå±±å³°â€çš„è½®å»“ï¼Œç›´è§‚åœ°å±•ç¤ºäº†æ•°æ®çš„å¯†åº¦ã€‚</li>\n<li><strong>å‚æ•°è°ƒæ•´</strong>ï¼š æˆ‘ä»¬å¯ä»¥è°ƒæ•´ç‚¹çš„å¤§å°ï¼ˆmarker sizeï¼‰å’Œæ’åˆ—çš„ç´§å¯†ç¨‹åº¦ã€‚ç‚¹è¶Šå¤§ï¼Œè§†è§‰å†²å‡»åŠ›è¶Šå¼ºï¼Œä½†éœ€è¦çš„æ°´å¹³ç©ºé—´ä¹Ÿè¶Šå¤šã€‚</li>\n</ol>\n<h1 id=\"2-èœ‚ç¾¤å›¾-vs-æ¡å½¢å›¾ä»æ‘˜è¦åˆ°ç»†èŠ‚\">2. èœ‚ç¾¤å›¾ vs. æ¡å½¢å›¾ï¼šä»æ‘˜è¦åˆ°ç»†èŠ‚</h1>\n<p><strong>æ¡å½¢å›¾</strong>å°±åƒæ˜¯ä¸€ä»½æ•°æ®æ‘˜è¦æŠ¥å‘Šï¼Œå®ƒå‘Šè¯‰æˆ‘ä»¬æ¯ä¸ªç±»åˆ«çš„å¹³å‡å€¼æˆ–æ€»è®¡å€¼ï¼Œä½†éšè—äº†æ•°æ®å†…éƒ¨çš„åˆ†å¸ƒç»†èŠ‚ã€‚</p>\n<p>è€Œ<strong>èœ‚ç¾¤å›¾</strong>åˆ™åƒæ˜¯ä¸€æ¬¡æ•°æ®ç‚¹çš„å…¨å‘˜å¤§ä¼šï¼Œæ¯ä¸ªæ•°æ®ç‚¹éƒ½æœ‰å‘è¨€çš„æœºä¼šã€‚</p>\n<p>ä¸‹é¢é’ˆå¯¹åŒä¸€ç»„æ•°æ®ï¼Œæˆ‘ä»¬åˆ†åˆ«ç»˜åˆ¶äº†<strong>æ¡å½¢å›¾</strong>ã€<strong>ç®±çº¿å›¾</strong>å’Œ<strong>èœ‚ç¾¤å›¾</strong>ï¼Œä¸€èµ·æ¥æ„Ÿå—ä¸€ä¸‹å®ƒä»¬ä¹‹é—´ä¸åŒçš„å±•ç¤ºæ•ˆæœã€‚</p>\n<pre><code class=\"language-python\"># ç”Ÿæˆç¤ºä¾‹æ•°æ®\nnp.random.seed(123)\ncategories = [\"äº§å“A\", \"äº§å“B\", \"äº§å“C\", \"äº§å“D\"]\ndata_comparison = []\nfor category in categories:\n    n_points = 40\n    if category == \"äº§å“A\":\n        values = np.random.normal(75, 8, n_points)\n    elif category == \"äº§å“B\":\n        values = np.random.normal(82, 12, n_points)\n    elif category == \"äº§å“C\":\n        values = np.random.normal(65, 5, n_points)\n    else:  # äº§å“D\n        # åˆ›å»ºä¸€ä¸ªåŒå³°åˆ†å¸ƒ\n        values1 = np.random.normal(55, 6, n_points // 2)\n        values2 = np.random.normal(85, 7, n_points // 2)\n        values = np.concatenate([values1, values2])\n\n    for value in values:\n        data_comparison.append({\"äº§å“\": category, \"ç”¨æˆ·è¯„åˆ†\": value})\n\n# 1. æ¡å½¢å›¾ï¼ˆå¹³å‡å€¼ï¼‰\nmeans = []\nfor category in categories:\n    cat_data = [d[\"ç”¨æˆ·è¯„åˆ†\"] for d in data_comparison if d[\"äº§å“\"] == category]\n    means.append(np.mean(cat_data))\n\nbars = axes[0].bar(\n    categories, means, color=[\"#1f77b4\", \"#ff7f0e\", \"#2ca02c\", \"#d62728\"]\n)\n\n\n# åœ¨æ¡å½¢ä¸Šæ ‡æ³¨å¹³å‡å€¼\n# çœç•¥...\n\n# 2. ç®±çº¿å›¾\nbox_data = []\nfor category in categories:\n    cat_data = [d[\"ç”¨æˆ·è¯„åˆ†\"] for d in data_comparison if d[\"äº§å“\"] == category]\n    box_data.append(cat_data)\n\nboxplot = axes[1].boxplot(\n    box_data, tick_labels=categories, patch_artist=True, boxprops=dict(facecolor=\"lightblue\")\n)\n# çœç•¥...\n\n# 3. èœ‚ç¾¤å›¾\ndata_df = pd.DataFrame(data_comparison)\nsns.swarmplot(\n    x=\"äº§å“\",\n    y=\"ç”¨æˆ·è¯„åˆ†\",\n    hue=\"äº§å“\",\n    data=data_df,\n    ax=axes[2],\n    size=5,\n    palette=\"Set2\",\n    edgecolor=\"black\",\n    linewidth=0.5,\n)\n# çœç•¥...\n\nplt.tight_layout()\nplt.show()\n\n</code></pre>\n\n<p><img alt=\"\" src=\"https://img2024.cnblogs.com/blog/83005/202601/83005-20260131142128894-2129735776.png\" /></p>\n<p>ç»˜åˆ¶èœ‚ç¾¤å›¾å¯ä»¥ç”¨<code>seaborn</code>è¿™ä¸ªåº“ä¸­çš„<code>swarmplot</code>å‡½æ•°ã€‚</p>\n<p>ä»ä¸Šé¢çš„å¯¹æ¯”å¯ä»¥çœ‹å‡ºï¼š</p>\n<ul>\n<li><strong>æ¡å½¢å›¾</strong>å‘Šè¯‰æˆ‘ä»¬äº§å“Dçš„å¹³å‡åˆ†çº¦ä¸º70åˆ†</li>\n<li><strong>ç®±çº¿å›¾</strong>æç¤ºäº§å“Dçš„æ•°æ®åˆ†å¸ƒèŒƒå›´å¾ˆå¹¿</li>\n<li>ä½†åªæœ‰<strong>èœ‚ç¾¤å›¾</strong>æ¸…æ™°åœ°æ­ç¤ºäº†äº§å“Då®é™…ä¸Šæœ‰ä¸¤ä¸ªæ˜æ˜¾çš„ç”¨æˆ·ç¾¤ä½“ï¼šä¸€ä¸ªä½è¯„åˆ†ç¾¤ä½“å’Œä¸€ä¸ªé«˜è¯„åˆ†ç¾¤ä½“</li>\n</ul>\n<h1 id=\"3-èœ‚ç¾¤å›¾-vs-æ•£ç‚¹å›¾ä»æ··ä¹±åˆ°æœ‰åº\">3. èœ‚ç¾¤å›¾ vs. æ•£ç‚¹å›¾ï¼šä»æ··ä¹±åˆ°æœ‰åº</h1>\n<p>ä¼ ç»Ÿ<strong>æ•£ç‚¹å›¾</strong>åœ¨å¤„ç†åˆ†ç±»æ•°æ®æ—¶ï¼Œå¸¸å¸¸å¯¼è‡´æ•°æ®ç‚¹å¤§é‡é‡å ï¼Œå½¢æˆ\"é»‘å›¢\"ï¼Œæˆ‘ä»¬æ— æ³•çœ‹æ¸…æ•°æ®ç‚¹çš„çœŸå®åˆ†å¸ƒã€‚</p>\n<p><strong>èœ‚ç¾¤å›¾</strong>é€šè¿‡æ™ºèƒ½å¸ƒå±€ç®—æ³•è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>\n<p>ä¸‹é¢æ„é€ ä¸€ä¸ªä¸åŒå¯†åº¦çš„æ•°æ®ï¼Œçœ‹çœ‹èœ‚ç¾¤å›¾å’Œæ•£ç‚¹å›¾çš„å±•ç¤ºæ•ˆæœã€‚</p>\n<pre><code class=\"language-python\"># æ¯”è¾ƒæ•£ç‚¹å›¾ä¸èœ‚ç¾¤å›¾çš„è§†è§‰æ•ˆæœ\nfig, axes = plt.subplots(1, 2, figsize=(14, 6))\n\n# ç”Ÿæˆå…·æœ‰ä¸åŒå¯†åº¦çš„æ•°æ®\nnp.random.seed(42)\ndensity_data = []\ncategories = [\"ä½å¯†åº¦\", \"ä¸­ç­‰å¯†åº¦\", \"é«˜å¯†åº¦\"]\nfor i, category in enumerate(categories):\n    n_points = 20 + i * 30  # ä¸åŒå¯†åº¦\n    if category == \"ä½å¯†åº¦\":\n        values = np.random.normal(50, 15, n_points)\n    elif category == \"ä¸­ç­‰å¯†åº¦\":\n        values = np.random.normal(50, 8, n_points)\n    else:  # é«˜å¯†åº¦\n        values = np.random.normal(50, 4, n_points)\n\n    for value in values:\n        density_data.append({\"ç±»åˆ«\": category, \"æ•°å€¼\": value})\n\n# å·¦ä¾§ï¼šä¼ ç»Ÿæ•£ç‚¹å›¾\nfor i, category in enumerate(categories):\n    cat_data = [d[\"æ•°å€¼\"] for d in density_data if d[\"ç±»åˆ«\"] == category]\n    x_positions = np.full(len(cat_data), i)\n    axes[0].scatter(x_positions, cat_data, alpha=0.6, s=60, label=category)\n\n#çœç•¥...\n\n# å³ä¾§ï¼šèœ‚ç¾¤å›¾\ndensity_data_df = pd.DataFrame(density_data)\nsns.swarmplot(\n    x=\"ç±»åˆ«\",\n    y=\"æ•°å€¼\",\n    hue=\"ç±»åˆ«\",\n    data=density_data_df,\n    ax=axes[1],\n    size=6,\n    palette=\"coolwarm\",\n    edgecolor=\"black\",\n    linewidth=0.5,\n)\n#çœç•¥...\n\nplt.tight_layout()\nplt.show()\n</code></pre>\n\n<p><img alt=\"\" src=\"https://img2024.cnblogs.com/blog/83005/202601/83005-20260131142128896-1164818687.png\" /></p>\n<p><strong>èœ‚ç¾¤å›¾</strong>è§£å†³äº† <strong>â€œé‡å ï¼ˆOverplottingï¼‰â€</strong> çš„é—®é¢˜ã€‚åœ¨æ•°æ®é‡é€‚ä¸­ï¼ˆå‡ ç™¾åˆ°å‡ åƒä¸ªç‚¹ï¼‰æ—¶ï¼Œå®ƒæ˜¯å±•ç¤ºåˆ†å¸ƒå¯†åº¦çš„æœ€ä½³é€‰æ‹©ã€‚</p>\n<h1 id=\"4-èœ‚ç¾¤å›¾çš„é€‚ç”¨åœºæ™¯\">4. èœ‚ç¾¤å›¾çš„é€‚ç”¨åœºæ™¯</h1>\n<p><strong>èœ‚ç¾¤å›¾</strong>å¹¶ä¸æ˜¯ä¸ºäº†å–ä»£<strong>æ¡å½¢å›¾</strong>æˆ–<strong>æ•£ç‚¹å›¾</strong>ï¼Œå®ƒæœ‰è‡ªå·±çš„é€‚ç”¨åœºæ™¯å’Œå±€é™æ€§ã€‚</p>\n<p>é€‚åˆä½¿ç”¨<strong>èœ‚ç¾¤å›¾</strong>çš„åœºæ™¯ï¼š</p>\n<ul>\n<li>æ ·æœ¬é‡é€‚ä¸­ï¼ˆé€šå¸¸å°‘äºå‡ ç™¾ä¸ªç‚¹ï¼‰æ—¶ï¼Œå±•ç¤ºå®Œæ•´æ•°æ®åˆ†å¸ƒ</li>\n<li>éœ€è¦åŒæ—¶çœ‹åˆ°æ•´ä½“è¶‹åŠ¿å’Œä¸ªä½“æ•°æ®ç‚¹</li>\n<li>æ•°æ®æœ‰å¤šä¸ªåˆ†ç±»å˜é‡ï¼Œéœ€è¦æ¯”è¾ƒä¸åŒç±»åˆ«åˆ†å¸ƒ</li>\n<li>å¸Œæœ›å‘ç°å¼‚å¸¸å€¼æˆ–ç‰¹æ®Šæ¨¡å¼ï¼ˆå¦‚åŒå³°åˆ†å¸ƒï¼‰</li>\n</ul>\n<p><font style=\"color: rgba(15, 17, 21, 1);\"></font></p>\n<p><strong>èœ‚ç¾¤å›¾</strong>çš„<strong>å±€é™æ€§</strong>ä¸»è¦æœ‰ï¼š</p>\n<ol>\n<li>å¤§æ•°æ®é›†å¯èƒ½å¯¼è‡´å›¾è¡¨è¿‡äºæ‹¥æŒ¤</li>\n<li>å¯¹äºéå¸¸å¤§è§„æ¨¡æ•°æ®ï¼Œç®±çº¿å›¾æˆ–å°æç´å›¾å¯èƒ½æ›´åˆé€‚</li>\n<li>ç²¾ç¡®çš„æ•°å€¼æ¯”è¾ƒä¸å¦‚æ¡å½¢å›¾ç›´è§‚</li>\n</ol>\n<h1 id=\"5-æ€»ç»“\">5. æ€»ç»“</h1>\n<p><strong>èœ‚ç¾¤å›¾</strong>å°±åƒæ•°æ®å¯è§†åŒ–é¢†åŸŸçš„\"æ˜¾å¾®é•œ\"ï¼Œå®ƒè®©æˆ‘ä»¬æ—¢èƒ½è§‚å¯Ÿåˆ°æ•°æ®çš„æ•´ä½“åˆ†å¸ƒå½¢æ€ï¼Œåˆèƒ½çœ‹åˆ°æ¯ä¸€ä¸ªæ•°æ®ç‚¹çš„å…·ä½“ä½ç½®ã€‚</p>\n<p>ä¸åªèƒ½æ˜¾ç¤ºæ‘˜è¦ä¿¡æ¯çš„<strong>æ¡å½¢å›¾</strong>å’Œå®¹æ˜“äº§ç”Ÿé‡å çš„<strong>æ•£ç‚¹å›¾</strong>ç›¸æ¯”ï¼Œ<strong>èœ‚ç¾¤å›¾</strong>åœ¨æ˜¾ç¤ºä¸­å°å‹æ•°æ®é›†çš„å®Œæ•´åˆ†å¸ƒä¿¡æ¯æ–¹é¢å…·æœ‰ç‹¬ç‰¹ä¼˜åŠ¿ã€‚</p>\n<p>åœ¨æ•°æ®å¯è§†åŒ–å®è·µä¸­ï¼Œé€‰æ‹©æ­£ç¡®çš„å›¾è¡¨ç±»å‹å°±åƒé€‰æ‹©æ­£ç¡®çš„å·¥å…·ä¸€æ ·é‡è¦ã€‚</p>\n<p>å½“ä¸‹ä¸€æ¬¡ä½ éœ€è¦å±•ç¤ºåˆ†ç±»æ•°æ®çš„åˆ†å¸ƒæ—¶ï¼Œä¸å¦¨å°è¯•ä¸€ä¸‹èœ‚ç¾¤å›¾ï¼Œå®ƒå¯èƒ½ä¼šæ­ç¤ºå‡ºä½ ä»æœªæ³¨æ„åˆ°çš„æ•°æ®ç§˜å¯†ã€‚</p>\n<p>æ–‡ä¸­çš„å®Œæ•´ä»£ç å…±äº«åœ¨ï¼š<a href=\"https://url11.ctfile.com/f/45455611-8639900394-9a109f?p=6872\" rel=\"noopener nofollow\" target=\"_blank\">èœ‚ç¾¤å›¾.ipynb</a> (è®¿é—®å¯†ç : 6872)</p>\n\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-31 14:22</span>&nbsp;\n<a href=\"https://www.cnblogs.com/wang_yb\">wang_yb</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">63</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "C++ å°è£… C FFI æ¥å£æœ€ä½³å®è·µï¼šä»¥ Hugging Face Tokenizer ä¸ºä¾‹",
      "link": "https://www.cnblogs.com/charlee44/p/19557586",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/charlee44/p/19557586\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-31 13:36\">\n    <span>C++ å°è£… C FFI æ¥å£æœ€ä½³å®è·µï¼šä»¥ Hugging Face Tokenizer ä¸ºä¾‹</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                    <div id=\"cnblogs_post_description\" style=\"display: none;\">\n        \n        è¯¦ç»†ä»‹ç»äº†å¦‚ä½•é€šè¿‡ Rust çš„ C FFI å°è£… Hugging Face tokenizersï¼Œå¹¶åœ¨ C++ ä¸­åˆ©ç”¨ RAII å’Œæ™ºèƒ½æŒ‡é’ˆå®ç°å®‰å…¨ã€ç®€æ´ã€é«˜æ•ˆçš„èµ„æºç®¡ç†ï¼Œæœ€ç»ˆéµå¾ªç°ä»£ C++ çš„â€œé›¶æ³•åˆ™â€å®Œæˆå·¥ä¸šçº§å°è£…ã€‚\n    </div>\n<div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h1 id=\"1-å¼•å…¥\">1. å¼•å…¥</h1>\n<p>åœ¨ç°ä»£ AI å·¥ç¨‹ä¸­ï¼ŒHugging Face çš„ tokenizers åº“å·²æˆä¸ºåˆ†è¯å™¨çš„äº‹å®æ ‡å‡†ã€‚ä¸è¿‡ Hugging Face çš„ tokenizers æ˜¯ç”¨ Rust æ¥å®ç°çš„ï¼Œå®˜æ–¹åªæä¾›äº† python å’Œ node çš„ç»‘å®šå®ç°ã€‚è¦å®ç°ä¸ Hugging Face tokenizers ç›¸åŒçš„è¡Œä¸ºï¼Œæœ€å¥½çš„åŠæ³•å°±æ˜¯è‡ªå·±å°è£… Hugging Face tokenizers çš„ C ç»‘å®šï¼Œä»è€Œå¯ä»¥è¢« C++ / C# / Java è¿™äº›é«˜çº§ç¼–ç¨‹è¯­è¨€è°ƒç”¨ã€‚</p>\n<h1 id=\"2-å°è£…-c-æ¥å£\">2. å°è£… C æ¥å£</h1>\n<p>é¦–å…ˆè¦è¯´æ˜çš„æ˜¯ï¼Œè¦åšçš„ä¸æ˜¯å®Œæ•´çš„å°è£… Hugging Face tokenizers çš„ C çš„ FFIï¼ˆForeign Function Interfaceï¼‰æ¥å£ï¼Œè€Œæ˜¯å°è£…è‡ªå·±éœ€è¦çš„æ¥å£å°±å¯ä»¥äº†ã€‚æ¯”å¦‚æ‰§è¡Œåˆ†è¯æ¥å£å’Œè®¡ç®—Tokençš„æ¥å£ï¼š</p>\n<pre><code class=\"language-rust\">use std::ffi::CStr;\nuse std::os::raw::c_char;\nuse tokenizers::{PaddingParams, Tokenizer, TruncationParams};\n\n// === 1. å®šä¹‰ C å…¼å®¹çš„è¿”å›ç»“æ„ä½“ ===\n#[repr(C)]\npub struct TokenizerResult {\n    pub input_ids: *mut i64,\n    pub attention_mask: *mut i64,\n    pub token_type_ids: *mut i64,\n    pub length: u64,\n}\n\n// === 2. å†…éƒ¨çŠ¶æ€ï¼šåŒ…è£… Tokenizer ===\nstruct TokenizerHandle {\n    tokenizer: Tokenizer,     // ç”¨äº encodeï¼ˆå¸¦ paddingï¼‰\n    raw_tokenizer: Tokenizer, // ç”¨äº countï¼ˆæ—  paddingï¼‰\n}\n\n// === 3. è¾…åŠ©å‡½æ•°ï¼šå°† Rust Vec è½¬ä¸º C å¯æ‹¥æœ‰çš„æŒ‡é’ˆ ===\nfn vec_to_c_ptr(vec: Vec&lt;i64&gt;) -&gt; *mut i64 {\n    let mut boxed = vec.into_boxed_slice();\n    let ptr = boxed.as_mut_ptr();\n    std::mem::forget(boxed); // é˜²æ­¢ Rust è‡ªåŠ¨é‡Šæ”¾\n    ptr\n}\n\n// === 4. åˆ›å»º tokenizer ===\n#[unsafe(no_mangle)] // ç¦ç”¨ name manglingï¼Œè®© C èƒ½æ‰¾åˆ°ç¬¦å·\npub extern \"C\" fn tokenizer_create(tokenizer_json_path: *const c_char) -&gt; *mut std::ffi::c_void {\n    if tokenizer_json_path.is_null() {\n        return std::ptr::null_mut();\n    }\n\n    let path_cstr = unsafe { CStr::from_ptr(tokenizer_json_path) };\n    let path_str = match path_cstr.to_str() {\n        Ok(s) =&gt; s,\n        Err(_) =&gt; return std::ptr::null_mut(),\n    };\n\n    let mut tokenizer = match Tokenizer::from_file(path_str) {\n        Ok(t) =&gt; t,\n        Err(_) =&gt; return std::ptr::null_mut(),\n    };\n\n    // è®¾ç½® padding/truncation åˆ° 512ï¼ˆBGE é»˜è®¤ï¼‰\n    tokenizer.with_padding(Some(PaddingParams {\n        strategy: tokenizers::PaddingStrategy::Fixed(512),\n        ..Default::default()\n    }));\n\n    if tokenizer\n        .with_truncation(Some(TruncationParams {\n            max_length: 512,\n            ..Default::default()\n        }))\n        .is_err()\n    {\n        return std::ptr::null_mut();\n    }\n\n    let mut raw_tokenizer = tokenizer.clone();\n    raw_tokenizer.with_padding(None);\n    raw_tokenizer.with_truncation(None).ok();\n\n    let handle = TokenizerHandle {\n        tokenizer,\n        raw_tokenizer,\n    };\n    Box::into_raw(Box::new(handle)) as *mut std::ffi::c_void\n}\n\n//è®¡ç®—å¥å­token\n#[unsafe(no_mangle)] // ç¦ç”¨ name manglingï¼Œè®© C èƒ½æ‰¾åˆ°ç¬¦å·\npub extern \"C\" fn tokenizer_count(handle: *mut std::ffi::c_void, text: *const c_char) -&gt; u64 {\n    if handle.is_null() || text.is_null() {\n        return 0;\n    }\n\n    let handle_ref = unsafe { &amp;*(handle as *mut TokenizerHandle) };\n\n    let text_cstr = unsafe { CStr::from_ptr(text) };\n    let text_str = match text_cstr.to_str() {\n        Ok(s) =&gt; s,\n        Err(_) =&gt; return 0,\n    };\n\n    match handle_ref.raw_tokenizer.encode(text_str, true) {\n        Ok(encoding) =&gt; encoding.len() as u64,\n        Err(_) =&gt; 0,\n    }\n}\n\n// === 5. é”€æ¯ tokenizer ===\n#[unsafe(no_mangle)]\npub extern \"C\" fn tokenizer_destroy(handle: *mut std::ffi::c_void) {\n    if !handle.is_null() {\n        unsafe {\n            let _ = Box::from_raw(handle as *mut TokenizerHandle);\n            // Drop è‡ªåŠ¨è°ƒç”¨\n        }\n    }\n}\n\n// === 6. æ‰§è¡Œåˆ†è¯ ===\n#[unsafe(no_mangle)]\npub extern \"C\" fn tokenizer_encode(\n    handle: *mut std::ffi::c_void,\n    text: *const c_char,\n) -&gt; TokenizerResult {\n    let default_result = TokenizerResult {\n        input_ids: std::ptr::null_mut(),\n        attention_mask: std::ptr::null_mut(),\n        token_type_ids: std::ptr::null_mut(),\n        length: 0,\n    };\n\n    if handle.is_null() || text.is_null() {\n        return default_result;\n    }\n\n    let handle_ref = unsafe { &amp;*(handle as *mut TokenizerHandle) };\n\n    let text_cstr = unsafe { CStr::from_ptr(text) };\n    let text_str = match text_cstr.to_str() {\n        Ok(s) =&gt; s,\n        Err(_) =&gt; return default_result,\n    };\n\n    let encoding = match handle_ref.tokenizer.encode(text_str, true) {\n        Ok(e) =&gt; e,\n        Err(_) =&gt; return default_result,\n    };\n\n    let input_ids: Vec&lt;i64&gt; = encoding.get_ids().iter().map(|&amp;x| x as i64).collect();\n    let attention_mask: Vec&lt;i64&gt; = encoding\n        .get_attention_mask()\n        .iter()\n        .map(|&amp;x| x as i64)\n        .collect();\n    let token_type_ids: Vec&lt;i64&gt; = encoding.get_type_ids().iter().map(|&amp;x| x as i64).collect();\n    // BGE ä¸éœ€è¦ï¼Œä½† C++ ä»£ç ä¼ äº†\n    // let token_type_ids: Vec&lt;u32&gt; = vec![0u32; input_ids.len()];\n\n    let len = input_ids.len(); // åº”è¯¥æ˜¯ 512ï¼Œä½†æ›´é€šç”¨\n\n    TokenizerResult {\n        input_ids: vec_to_c_ptr(input_ids),\n        attention_mask: vec_to_c_ptr(attention_mask),\n        token_type_ids: vec_to_c_ptr(token_type_ids),\n        length: len as u64,\n    }\n}\n\n// === 7. é‡Šæ”¾ç»“æœå†…å­˜ ===\n#[unsafe(no_mangle)]\npub extern \"C\" fn tokenizer_result_free(result: TokenizerResult) {\n    if !result.input_ids.is_null() {\n        unsafe {\n            let _ = Vec::from_raw_parts(\n                result.input_ids,\n                result.length as usize,\n                result.length as usize,\n            );\n        }\n    }\n\n    if !result.attention_mask.is_null() {\n        unsafe {\n            let _ = Vec::from_raw_parts(\n                result.attention_mask,\n                result.length as usize,\n                result.length as usize,\n            );\n        }\n    }\n\n    if !result.token_type_ids.is_null() {\n        unsafe {\n            let _ = Vec::from_raw_parts(\n                result.token_type_ids,\n                result.length as usize,\n                result.length as usize,\n            );\n        }\n    }\n}\n</code></pre>\n<p>å¯¹åº”çš„ C æ¥å£å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"language-c\">// tokenizer_result.h\n#pragma once\n\nstruct TokenizerResult {\n  int64_t* input_ids;\n  int64_t* attention_mask;\n  int64_t* token_type_ids;\n  uint64_t length;\n};\n\n#ifdef __cplusplus\nstatic_assert(std::is_standard_layout_v&lt;TokenizerResult&gt; &amp;&amp;\n                  std::is_trivially_copyable_v&lt;TokenizerResult&gt;,\n              \"TokenizerResult must be C ABI compatible\");\n#endif\n</code></pre>\n<pre><code class=\"language-c\">// hf_tokenizer_ffi.h\n#pragma once\n\n#include &lt;stdint.h&gt;\n\n#include \"tokenizer_result.h\"\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\nvoid* tokenizer_create(const char* tokenizer_json_path);\nvoid tokenizer_destroy(void* handle);\nTokenizerResult tokenizer_encode(void* handle, const char* text);\nuint64_t tokenizer_count(void* handle, const char* text);\nvoid tokenizer_result_free(TokenizerResult result);\n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n<p>å…·ä½“çš„å°è£…ç»†èŠ‚ç¬”è€…å°±ä¸å¤šè¯´äº†ï¼Œå› ä¸ºä¸æœ¬æ–‡çš„ä¸»é¢˜æ— å…³ã€‚ä¸è¿‡å¯ä»¥ç¨ç¨äº†è§£ä¸€ä¸‹å…¶ä¸­çš„åŸç†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ“ä½œç³»ç»Ÿå¤§å¤šæ•°æ˜¯ç”± C å®ç°çš„ï¼Œæˆ–è€…æä¾›äº† C çš„æ¥å£ã€‚å› æ­¤ï¼Œç»å¤§å¤šæ•°æ¯” C é«˜çº§çš„ç¼–ç¨‹è¯­è¨€éƒ½æä¾›äº†ä¸ C äº¤äº’çš„èƒ½åŠ›ï¼Œå½“ç„¶å‰ææ˜¯å¿…é¡»å¾—æŒ‰ç…§ C å¾—è§„èŒƒç»„ç»‡æ•°æ®å’Œå°è£…æ¥å£ã€‚æ¯”å¦‚è¿™é‡Œçš„<code>struct TokenizerResult</code>å°±æ˜¯ä¸€ä¸ªå…¼å®¹ C çš„ç»“æ„ä½“ï¼Œ<code>#[unsafe(no_mangle)]</code>åˆ™è¡¨æ˜è¿™æ˜¯ä¸€ä¸ª C è¯­è¨€å½¢å¼çš„å‡½æ•°æ¥å£ã€‚</p>\n<h1 id=\"3-ç»å…¸-c-å°è£…\">3. ç»å…¸ C++ å°è£…</h1>\n<p>å¦‚ä¸Šæ¥å£æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ C é£æ ¼å¼çš„æ¥å£ï¼šå°†åˆ†è¯å™¨å°è£…æˆä¸€ä¸ª Handle ï¼Œä¹Ÿå°±æ˜¯ä¿—ç§°çš„å¥æŸ„ã€‚è€Œåç»­å…·ä½“çš„åˆ†è¯æ“ä½œå°±é€šè¿‡è¿™ä¸ªå¥æŸ„æ¥è¿›è¡Œï¼ŒåŒ…æ‹¬æœ€åå¯¹èµ„æºçš„é‡Šæ”¾ã€‚åœ¨ C++ ä¸­ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ç§å½¢å¼çš„æ¥å£ï¼Œä¸è¿‡è¿™æ ·å°±éœ€è¦éµå¾ª C çš„èµ„æºæ§åˆ¶è§„åˆ™ï¼šèµ„æºç”³è¯·å’Œé‡Šæ”¾å¿…é¡»æˆå¯¹å‡ºç°â€”â€”æ¯”å¦‚è¿™é‡Œçš„ <code>tokenizer_create</code> å’Œ <code>tokenizer_destroy</code>ã€‚</p>\n<h2 id=\"31-raii-æœºåˆ¶\">3.1 RAII æœºåˆ¶</h2>\n<p>ä¸è¿‡è¿™æ ·å°±ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œè¿‡ç¨‹å¼çš„æµç¨‹ä¸­å¾ˆéš¾ä¿è¯ <code>tokenizer_create</code> å’Œ <code>tokenizer_destroy</code> èƒ½å¤Ÿæˆå¯¹è°ƒç”¨ï¼Œä¾‹å¦‚ï¼š</p>\n<pre><code class=\"language-c\">tokenizer_create()\n\nif(...){\n    return;\n}\n\ntokenizer_destroy()\n</code></pre>\n<p>åªè¦åœ¨ <code>tokenizer_create</code> å’Œ <code>tokenizer_destroy</code> ä¹‹é—´å‡ºç°åˆ†æ”¯ï¼Œç¨‹åºæå‰è¿”å›ï¼Œå°±ä¼šå¯¼è‡´èµ„æºæ²¡æœ‰é‡Šæ”¾è€Œå†…å­˜æ³„æ¼ã€‚ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œå°±éœ€è¦åœ¨æ¯æ¬¡ <code>return</code> ä¹‹å‰ï¼Œéƒ½è°ƒç”¨ <code>tokenizer_destroy()</code>â€”â€”è¿™å½“ç„¶æ˜¯éå¸¸ä¸ä¼˜é›…çš„ï¼Œæ—¢å®¹æ˜“å¿˜æ‰åˆæ˜¯å†—ä½™ä»£ç ã€‚</p>\n<p>ä¸ºäº†è§£å†³è¿™ç§èµ„æºç®¡ç†éš¾é¢˜ï¼ŒC++ æä¾›äº†ä¸€ç§å¼ºå¤§è€Œä¼˜é›…çš„æœºåˆ¶ï¼šRAIIï¼ˆResource Acquisition Is Initializationï¼Œèµ„æºè·å–å³åˆå§‹åŒ–ï¼‰ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šå°†èµ„æºçš„ç”Ÿå‘½å‘¨æœŸç»‘å®šåˆ°å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸä¸Šã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯åˆ©ç”¨é¢å‘å¯¹è±¡çš„æ€æƒ³ï¼Œå°†èµ„æºæ§åˆ¶çš„è¡Œä¸ºå°è£…æˆä¸€ä¸ªç±»å¯¹è±¡ï¼Œå¹¶ä¸”ä¿è¯èµ„æºåœ¨å¯¹è±¡æ„é€ å‡½æ•°ä¸­è·å–ï¼Œåœ¨ææ„å‡½æ•°ä¸­è‡ªåŠ¨é‡Šæ”¾ã€‚ç”±äº C++ ä¸­æ ˆå¯¹è±¡åœ¨ç¦»å¼€ä½œç”¨åŸŸæ—¶ä¼šè‡ªåŠ¨è°ƒç”¨ææ„å‡½æ•°ï¼Œåœ¨ç¦»å¼€ä½œç”¨åŸŸæ—¶ä¼šè‡ªåŠ¨è°ƒç”¨ææ„å‡½æ•°ã€‚å› æ­¤è¿™äº›èµ„æºæ€»æ˜¯å¯ä»¥è¢«æ­£ç¡®é‡Šæ”¾ï¼Œä»æ ¹æœ¬ä¸Šæœç»å†…å­˜æ³„æ¼æˆ–èµ„æºæ³„éœ²ã€‚ä¾‹å¦‚ï¼š</p>\n<pre><code class=\"language-cpp\">Tokenizer tokenizer;\n\n//...æ“ä½œ\n\nif(...){\n    return;\n}\n\n//...æ›´å¤šæ“ä½œ\n</code></pre>\n<h2 id=\"32-æ‹·è´è¯­ä¹‰\">3.2 æ‹·è´è¯­ä¹‰</h2>\n<p>å¤ä¹ ä¸€ä¸‹ C++ é¢å‘å¯¹è±¡è®¾è®¡çš„ç»å…¸äº”æ³•åˆ™ï¼ˆRule of Fiveï¼‰ï¼Œå¦‚æœä¸€ä¸ªç±»è‡ªå®šä¹‰äº†ä»¥ä¸‹ä»»æ„ä¸€ä¸ªå‡½æ•°ï¼š</p>\n<ol>\n<li>ææ„å‡½æ•°ï¼ˆDestructorï¼‰</li>\n<li>æ‹·è´æ„é€ å‡½æ•°ï¼ˆCopy Constructorï¼‰</li>\n<li>æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ï¼ˆCopy Assignment Operatorï¼‰</li>\n<li>ç§»åŠ¨æ„é€ å‡½æ•°ï¼ˆMove Constructorï¼‰</li>\n<li>ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ï¼ˆMove Assignment Operatorï¼‰</li>\n</ol>\n<p>é‚£ä¹ˆå¤§æ¦‚ç‡ä¹Ÿéœ€è¦è‡ªå®šä¹‰å¦å¤–å››ä¸ªå‡½æ•°ï¼Œæˆ–è€…æ˜¾å¼ = default / = delete æ¥æ§åˆ¶è¡Œä¸ºã€‚å¾ˆå¤š C++ ç¨‹åºå‘˜å¹¶ä¸ç†è§£ç§»åŠ¨è¯­ä¹‰ï¼Œä½†è¿™å¹¶æ²¡æœ‰å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå‡å®šä¸å®šä¹‰ç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ï¼ˆæˆ–è€…æ˜¾å¼ = defaultï¼‰ï¼Œæ­¤æ—¶ç§»åŠ¨æ“ä½œå°±ä¼šé€€åŒ–ä¸ºæ‹·è´è¯­ä¹‰çš„è¡Œä¸ºã€‚</p>\n<p>è€Œå…³äºæ‹·è´è¯­ä¹‰ï¼Œç»å¤§å¤šæ•° C++ ç¨‹åºå‘˜åº”è¯¥éƒ½çŸ¥é“è¿™ä¸ªé—®é¢˜ï¼šå½“åœ¨ç±»å¯¹è±¡ä¸­ç®¡ç†èµ„æºæ—¶ï¼Œç¼–è¯‘å™¨ç”Ÿæˆçš„é»˜è®¤æ‹·è´è¡Œä¸ºæ˜¯â€œæµ…æ‹·è´â€ï¼Œå¯èƒ½å¯¼è‡´åŒé‡é‡Šæ”¾ã€å†…å­˜æ³„æ¼ç­‰é—®é¢˜ï¼Œå› æ­¤éœ€è¦è‡ªå®šä¹‰æ‹·è´æ„é€ å‡½æ•°å’Œæ‹·è´èµ‹å€¼è¿ç®—ç¬¦æ¥å®ç°â€œæ·±æ‹·è´â€çš„è¡Œä¸ºã€‚å› æ­¤ï¼Œè¿™ä¸ªé“¾æ¡å°±å¾ˆæ˜ç¡®äº†ï¼šå› ä¸ºç±»ä¸­éœ€è¦å®šä¹‰ææ„å‡½æ•°ï¼Œæ‰€ä»¥éœ€è¦åŒæ—¶å®šä¹‰æ‹·è´æ„é€ å‡½æ•°å’Œæ‹·è´èµ‹å€¼è¿ç®—ç¬¦ã€‚</p>\n<h2 id=\"33-ç§»åŠ¨è¯­ä¹‰\">3.3 ç§»åŠ¨è¯­ä¹‰</h2>\n<p>è¿›ä¸€æ­¥è®¨è®ºï¼Œåæ­£ç§»åŠ¨è¯­ä¹‰å¯ä»¥é»˜è®¤ï¼Œé‚£ä¹ˆæ˜¯ä¸æ˜¯åªç”¨å®šä¹‰æ‹·è´è¯­ä¹‰å°±è¡Œäº†å‘¢ï¼Ÿè¿™ä¸ªè¦çœ‹èµ„æºçš„å®šä¹‰ï¼šå¦‚æœåªæ˜¯ç®¡ç†å†…å­˜èµ„æºï¼Œé‚£ä¹ˆè¿™æ ·åšæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œè‡³å°‘æ˜¯å®‰å…¨çš„ã€‚ä½†æ˜¯èµ„æºç®¡ç†ä¸ä»…ä»…æŒ‡çš„æ˜¯å†…å­˜èµ„æºï¼Œè¿˜å¯ä»¥æ˜¯ä¸€äº›æ–‡ä»¶å¥æŸ„ã€ç½‘ç»œè¿æ¥ç­‰ç­‰ã€‚è¿™äº›èµ„æºå¾€å¾€æ˜¯ç‹¬å æ€§çš„ï¼Œè¿›è¡Œæ·±æ‹·è´å¾€å¾€ä¼šå‡ºç°é—®é¢˜ã€‚å› æ­¤å°±å‡ºç°äº† C++ 11 å¼€å§‹è§„å®šçš„ç§»åŠ¨è¯­ä¹‰ï¼šå¯ä»¥å®‰å…¨å¾—å®ç°â€œæµ…æ‹·è´â€çš„è¡Œä¸ºã€‚åŒæ—¶è¿˜å¯ä»¥è§£å†³â€œæ·±æ‹·è´â€çš„æ€§èƒ½é—®é¢˜ã€‚</p>\n<p>åŸºäºä»¥ä¸Šçš„æ€æƒ³ï¼Œç¬”è€…å°è£…çš„åˆ†è¯å™¨å¯¹è±¡å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"language-cpp\">// HfTokenizer.h\n#pragma once\n\n#include &lt;string&gt;\n\n#include \"hf_tokenizer_ffi.h\"\n\nnamespace hf {\nclass Tokenizer {\n public:\n  explicit Tokenizer(const std::string&amp; path);\n\n  // ææ„å‡½æ•°\n  ~Tokenizer() noexcept;\n\n  // ç¦æ­¢æ‹·è´\n  Tokenizer(const Tokenizer&amp;) = delete;\n  Tokenizer&amp; operator=(const Tokenizer&amp;) = delete;\n\n  // ç§»åŠ¨è¯­ä¹‰\n  Tokenizer(Tokenizer&amp;&amp; rhs) noexcept;\n  Tokenizer&amp; operator=(Tokenizer&amp;&amp; rhs) noexcept;\n\n  // å…¶ä»–æ¥å£æ–¹æ³•\n  // TokenizerResult Encode(const char* text) const;\n  // uint64_t Count(const char* text) const;\n\n private:\n  void* handle;  // æ¥è‡ª tokenizer_create çš„æŒ‡é’ˆ\n};\n\n}  // namespace hf\n</code></pre>\n<pre><code class=\"language-cpp\">// HfTokenizer.cpp\n#include \"HfTokenizer.h\"\n\n#include &lt;iostream&gt;\n\nnamespace hf {\nTokenizer::Tokenizer(const std::string&amp; path)\n    : handle(tokenizer_create(path.c_str())) {\n  if (!handle) {\n    throw std::runtime_error(\"Failed to create tokenizer from \" + path);\n  }\n}\n\nTokenizer::~Tokenizer() noexcept {\n  if (handle) {\n    tokenizer_destroy(handle);\n  }\n}\n\n// ç§»åŠ¨è¯­ä¹‰\nTokenizer::Tokenizer(Tokenizer&amp;&amp; rhs) noexcept : handle(rhs.handle) {\n  rhs.handle = nullptr;\n}\n\nTokenizer&amp; Tokenizer::operator=(Tokenizer&amp;&amp; rhs) noexcept {\n  if (this != &amp;rhs) {\n    if (handle) {\n      tokenizer_destroy(handle);\n    }\n    handle = rhs.handle;\n    rhs.handle = nullptr;\n  }\n  return *this;\n}\n\n}  // namespace hf\n</code></pre>\n<p>å¦‚å‰æ‰€è¿°ï¼Œå› ä¸ºå°è£…çš„æ˜¯ä¸€ä¸ªå¥æŸ„ï¼Œä¸ºäº†é¿å…èµ„æºæ§åˆ¶çš„éº»çƒ¦ï¼Œå°±ç¦æ­¢æ‰æ‹·è´è¯­ä¹‰ï¼š</p>\n<pre><code class=\"language-cpp\">// ç¦æ­¢æ‹·è´\nTokenizer(const Tokenizer&amp;) = delete;\nTokenizer&amp; operator=(const Tokenizer&amp;) = delete;\n</code></pre>\n<p>è¿›è¡Œ<code>()</code>æ‹·è´æ„é€ æˆ–è€…<code>=</code>èµ‹å€¼æ„é€ çœ‹èµ·æ¥ä¼¼ä¹å¾ˆç®€å•ï¼Œå…¶å®åœ¨ä»£ç å±‚å±‚åµŒå¥—ä¹‹åï¼Œå°±å¯èƒ½å¾ˆéš¾åˆ†æå‡ºæ˜¯ä¸æ˜¯è°ƒç”¨äº†é»˜è®¤çš„æ‹·è´çš„è¡Œä¸ºï¼Œæ¯”å¦‚å‡½æ•°ä¼ å‚ã€å®¹å™¨æ“ä½œç­‰ç­‰ã€‚å½“ç„¶æ·±æ‹·è´çš„å®ç°ä¹Ÿä¸æ˜¯æ€§èƒ½æœ€ä¼˜ï¼Œå› æ­¤å¹²è„†å°±ç›´æ¥åˆ é™¤æ‰æ‹·è´æ„é€ å‡½æ•°å’Œæ‹·è´èµ‹å€¼è¿ç®—ç¬¦ã€‚</p>\n<p>æ²¡æœ‰æ‹·è´è¯­ä¹‰ï¼Œé‚£ä¹ˆå°±éœ€è¦ç§»åŠ¨è¯­ä¹‰æ¥è¿›è¡Œä¼ é€’å¯¹è±¡äº†ã€‚å…¶å®ç§»åŠ¨è¯­ä¹‰æ²¡é‚£ä¹ˆéš¾ï¼Œæˆ‘ä»¬åªè¦æŠŠæ¡ä½ä¸€ç‚¹ï¼Œç§»åŠ¨è¯­ä¹‰çš„ç›®çš„æ˜¯å®‰å…¨åœ°å®ç°â€œæµ…æ‹·è´â€ã€‚ä»¥ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦çš„å®ç°æ¥è¯´ï¼Œå¦‚æœè¦å®ç°å¦‚ä¸‹ç§»åŠ¨èµ‹å€¼ï¼š</p>\n<pre><code class=\"language-cpp\">Tokenizer A();\nTokenizer B();\nB = std::move(A);\n</code></pre>\n<p>å°±éœ€è¦ä»¥ä¸‹çš„è¡Œä¸ºï¼š</p>\n<ol>\n<li>é‡Šæ”¾æ‰Bç®¡ç†çš„èµ„æºã€‚</li>\n<li>å°†Aä¸­çš„æˆå‘˜â€œæµ…æ‹·è´â€åˆ°Bä¸­ï¼Œè®©Bæ¥ç®¡Açš„èµ„æºã€‚</li>\n<li>å°†Aä¸­æˆå‘˜åˆå§‹åŒ–ã€‚</li>\n</ol>\n<p>å…·ä½“å®ç°å°±æ˜¯å¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<pre><code class=\"language-cpp\">Tokenizer&amp; Tokenizer::operator=(Tokenizer&amp;&amp; rhs) noexcept {\n  if (this != &amp;rhs) {\n    if (handle) {\n      tokenizer_destroy(handle);\n    }\n    handle = rhs.handle;\n    rhs.handle = nullptr;\n  }\n  return *this;\n}\n</code></pre>\n<p>ç§»åŠ¨æ„é€ å‡½æ•°å°±æ›´åŠ ç®€å•äº†ï¼Œå› ä¸ºBå¯¹è±¡åœ¨ç§»åŠ¨æ„é€ ä¹‹å‰æˆå‘˜å¹¶æ²¡æœ‰åˆå§‹åŒ–ï¼š</p>\n<pre><code class=\"language-cpp\">Tokenizer A();\nTokenizer B(std::move(A));\n</code></pre>\n<p>å› æ­¤å¯ä»¥çœç•¥æ‰é‡Šæ”¾è‡ªèº«èµ„æºçš„æ­¥éª¤ï¼Œå…·ä½“å®ç°ä¹Ÿå°±æ˜¯å¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<pre><code class=\"language-cpp\">Tokenizer::Tokenizer(Tokenizer&amp;&amp; rhs) noexcept : handle(rhs.handle) {\n  rhs.handle = nullptr;\n}\n</code></pre>\n<p>æœ€åè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼šAé€šè¿‡ç§»åŠ¨è¯­ä¹‰è½¬ç§»åˆ°Bäº†ï¼ŒAè¿˜èƒ½ä½¿ç”¨å—ï¼Ÿä¸èƒ½ä¹Ÿæ²¡å¿…è¦ä½¿ç”¨Aäº†ï¼Œæ— è®ºæ˜¯Aå¯¹è±¡å’ŒBå¯¹è±¡å…¶å®æ˜¯ä¸€ä¸ªæ ˆå¯¹è±¡ï¼ˆå½“ç„¶å†…éƒ¨ç®¡ç†çš„æ•°æ®æˆå‘˜å¯èƒ½æ”¾åœ¨å †ä¸Šï¼‰ï¼Œæˆ–è€…è¯´æ˜¯ä¸€ä¸ªå€¼å¯¹è±¡ï¼›è¿™è·Ÿå¼•ç”¨å¯¹è±¡æˆ–è€…åœ°å€å¯¹è±¡å®Œå…¨ä¸åŒã€‚ç§»åŠ¨è¯­ä¹‰çš„æœ¬è´¨æ˜¯å¯¹è±¡æ‰€æœ‰æƒçš„è½¬ç§»ï¼Œè½¬ç§»ä¹‹ååŸå¯¹è±¡ä¸­èµ„æºæ‰€æœ‰æƒå°±ä¸å­˜åœ¨äº†ï¼Œå³ä½¿å¼ºè¡Œè®¿é—®ï¼Œè¦ä¹ˆè®¿é—®ä¸åˆ°ï¼Œè¦ä¹ˆä¼šç¨‹åºå´©æºƒã€‚</p>\n<h1 id=\"4-é«˜çº§-c-å°è£…\">4. é«˜çº§ C++ å°è£…</h1>\n<h2 id=\"41-é›¶æ³•åˆ™\">4.1 é›¶æ³•åˆ™</h2>\n<p>ä½¿ç”¨ RAII æœºåˆ¶ + ç»å…¸äº”æ³•åˆ™æ¥è®¾è®¡ä¸€ä¸ªç±»å¯¹è±¡ï¼Œè¿˜æœ‰ä¸€ä¸ªä¼˜ç‚¹ï¼Œå°±æ˜¯ä½¿ç”¨è¿™ä¸ªç±»å¯¹è±¡ä½œä¸ºæ•°æ®æˆå‘˜çš„ç±»ï¼Œå°±ä¸ç”¨å†æ˜¾å¼å®ç°ææ„å‡½æ•°ã€‚ä¸ç”¨æ˜¾å¼å®ç°ææ„å‡½æ•°ï¼Œä¹Ÿå°±æ„å‘³ç€ä¸ç”¨å®ç°æ‹·è´è¯­ä¹‰å’Œç§»åŠ¨è¯­ä¹‰ï¼Œå®Œå…¨å¯ä»¥ä¾èµ–ç±»å¯¹è±¡æ‹·è´å’Œç§»åŠ¨çš„é»˜è®¤è¡Œä¸ºã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œä¸€ä¸ª<code>MyResource</code>å¯¹è±¡ï¼Œç®¡ç†ç€ä¸€æ®µå†…å­˜ buffer ï¼Œå®ƒçš„ç±»å®šä¹‰ä¸ºï¼š</p>\n<pre><code class=\"language-cpp\">class MyResource {\npublic:\n    // æ„é€ ï¼šç”³è¯·èµ„æº\n    MyResource() {\n        data = new int[100];\n    }\n\n    // ææ„ï¼šé‡Šæ”¾èµ„æº\n    ~MyResource() {\n        delete[] data;\n    }\n\n    // æ‹·è´æ„é€ ï¼šæ·±æ‹·è´\n    MyResource(const MyResource&amp; other) {\n        data = new int[100];\n        copy(other.data, other.data + 100, data);\n    }\n\n    // æ‹·è´èµ‹å€¼\n    MyResource&amp; operator=(const MyResource&amp; other) {\n        if (this != &amp;other) {\n            delete[] data;\n            data = new int[100];\n            copy(other.data, other.data + 100, data);\n        }\n        return *this;\n    }\n\n    // ç§»åŠ¨æ„é€ ï¼šæ¥ç®¡èµ„æº\n    MyResource(MyResource&amp;&amp; other) noexcept {\n        data = other.data;\n        other.data = nullptr;\n    }\n\n    // ç§»åŠ¨èµ‹å€¼\n    MyResource&amp; operator=(MyResource&amp;&amp; other) noexcept {\n        if (this != &amp;other) {\n            delete[] data;\n            data = other.data;\n            other.data = nullptr;\n        }\n        return *this;\n    }\n\nprivate:\n    int* data = nullptr;\n};\n</code></pre>\n<p>ä½†æ˜¯å¦‚æœæˆ‘ä½¿ç”¨ std å®¹å™¨<code>vector</code> ï¼Œç›¸åº”çš„ä»£ç å°±å¯ä»¥ç®€å†™ä¸ºï¼š</p>\n<pre><code class=\"language-cpp\">#include &lt;vector&gt;\n\nclass MyResource {\npublic:\n    // æ„é€ ï¼šè‡ªåŠ¨åˆ†é…å†…å­˜\n    MyResource() : data(100) {}  // vector&lt;int&gt; è‡ªåŠ¨åˆå§‹åŒ–ä¸º 100 ä¸ªå…ƒç´ \n\n    // âœ… æ— éœ€æ˜¾å¼å®šä¹‰ææ„å‡½æ•°\n    // âœ… æ— éœ€è‡ªå®šä¹‰æ‹·è´æ„é€  / æ‹·è´èµ‹å€¼\n    // âœ… æ— éœ€è‡ªå®šä¹‰ç§»åŠ¨æ„é€  / ç§»åŠ¨èµ‹å€¼\n\n    // ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„ç‰ˆæœ¬å·²æ­£ç¡®ã€é«˜æ•ˆã€å¼‚å¸¸å®‰å…¨\n\nprivate:\n    std::vector&lt;int&gt; data;  // RAII è‡ªåŠ¨ç®¡ç†å†…å­˜\n};\n</code></pre>\n<p>è¿™ä¸æ˜¯å› ä¸º <code>vector</code> ä½¿ç”¨äº†ä»€ä¹ˆé­”æ³•ï¼Œè€Œæ˜¯ <code>vector</code> æœ¬èº«å°±æ˜¯ä½¿ç”¨äº† RAII æœºåˆ¶ + ç»å…¸äº”æ³•åˆ™æ¥è®¾è®¡çš„ä¸€ä¸ªæ¨¡æ¿ç±»å¯¹è±¡ï¼åœ¨ <code>MyResource</code> å¯¹è±¡è¿›è¡Œæ‹·è´æˆ–è€…ç§»åŠ¨çš„æ—¶å€™ï¼Œä½œä¸ºæ•°æ®æˆå‘˜ï¼Œ<code>std::vector&lt;int&gt; data</code>ä¹Ÿä¼šé‡‡å–åŒæ ·çš„æ‹·è´æˆ–è€…ç§»åŠ¨çš„è¡Œä¸ºï¼Œå¹¶ä¸”é»˜è®¤çš„ã€ç”±ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„ç‰ˆæœ¬å°±å¯ä»¥æ­£ç¡®å¤„ç†ã€‚</p>\n<p>ä»¥ä¸Šè¿™ä¸ªæ€æƒ³ï¼Œå°±æ˜¯ç°ä»£ C++ æ›´æ¨èçš„<strong>é›¶æ³•åˆ™ï¼ˆRule of Zeroï¼‰</strong>ï¼šå°½é‡ä¸è¦æ‰‹åŠ¨ç®¡ç†èµ„æºï¼Œè€Œæ˜¯ä½¿ç”¨ RAII ç±»å‹è®©ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆæ‰€æœ‰ç‰¹æ®Šæˆå‘˜å‡½æ•°ã€‚è€Œè¿™ä¸ª RAII ç±»å‹ï¼Œå¯ä»¥æ˜¯ std çš„ä»»ä½•å®¹å™¨å¯¹è±¡ã€æ™ºèƒ½æŒ‡é’ˆï¼Œä¹Ÿå¯ä»¥æ˜¯è‡ªå·±æŒ‰ç…§äº”æ³•åˆ™å®ç°çš„ç±»å¯¹è±¡ã€‚</p>\n<h2 id=\"42-æ™ºèƒ½æŒ‡é’ˆ\">4.2 æ™ºèƒ½æŒ‡é’ˆ</h2>\n<p>å›åˆ°æœ¬æ–‡å¼•å…¥çš„é—®é¢˜ï¼Œå¦‚æœæˆ‘çš„åˆ†è¯å™¨å®ç°ä¸åƒå†™æ‹·è´è¯­ä¹‰å’Œç§»åŠ¨è¯­ä¹‰æ€ä¹ˆåŠå‘¢ï¼Ÿæ¯•ç«Ÿéƒ½æ˜¯æ ·æ¿ä»£ç ï¼Œå†™ä¸å¥½è¿˜å®¹æ˜“å‡ºé—®é¢˜ã€‚æ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆ <code>unique_ptr</code> ã€‚å¸¸è§„æ„ä¹‰ä¸Šï¼Œæˆ‘ä»¬éƒ½çŸ¥é“æ™ºèƒ½æŒ‡é’ˆå¯ä»¥åœ¨æ²¡æœ‰ä»»ä½•å…¶ä»–å¯¹è±¡å¼•ç”¨çš„æƒ…å†µä¸‹è‡ªåŠ¨ <code>delete</code> ï¼Œå…¶å®æ™ºèƒ½æŒ‡é’ˆè¿˜å¯ä»¥è‡ªå®šä¹‰èµ„æºçš„é‡Šæ”¾è¡Œä¸ºï¼š</p>\n<pre><code class=\"language-cpp\">#pragma once\n\n#include &lt;memory&gt;\n#include &lt;string&gt;\n\nnamespace hf {\nclass Tokenizer {\n public:\n  explicit Tokenizer(const std::string&amp; path);\n\n  // ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆï¼š\n  // - ææ„å‡½æ•°\n  // - ç§»åŠ¨æ„é€  / ç§»åŠ¨èµ‹å€¼\n  // - ç¦æ­¢æ‹·è´ï¼ˆå› ä¸º unique_ptr ä¸å¯æ‹·è´ï¼‰\n\n private:\n  std::unique_ptr&lt;void, void (*)(void*)&gt; handle;\n};\n\n}  // namespace hf\n</code></pre>\n<pre><code class=\"language-cpp\">#include \"HfTokenizer.h\"\n\n#include &lt;stdexcept&gt;\n\n#include \"hf_tokenizer_ffi.h\"\n\nnamespace hf {\n\nstatic void HandleDeleter(void* handle) noexcept {\n  if (handle) {\n    tokenizer_destroy(handle);\n  }\n}\n\nTokenizer::Tokenizer(const std::string&amp; path)\n    : handle(tokenizer_create(path.c_str()), HandleDeleter) {\n  if (!handle) {\n    throw std::runtime_error(\"Failed to create tokenizer from \" + path);\n  }\n}\n\n}  // namespace hf\n</code></pre>\n<p>å¦‚ä¸Šå®ç°æ‰€ç¤ºï¼Œå‡½æ•° <code>HandleDeleter</code> å°±æ˜¯ <code>std::unique_ptr&lt;void, void (*)(void*)&gt; handle</code> çš„è‡ªå®šä¹‰ææ„è¡Œä¸ºï¼Œåœ¨ç±»å¯¹è±¡ææ„çš„æ—¶å€™å°±ä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªå‡½æ•°é‡Šæ”¾èµ„æºã€‚æ—¢ç„¶èµ„æºè¢«æ™ºèƒ½æ‰˜ç®¡äº†ï¼Œé‚£ä¹ˆè‡ªç„¶å°±ä¸ç”¨å†™ææ„å‡½æ•°ï¼›ææ„å‡½æ•°ä¸ç”¨å†™ï¼Œé‚£ä¹ˆæ‹·è´æ„é€ å‡½æ•°ã€æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ã€ç§»åŠ¨æ„é€ å‡½æ•°ä»¥åŠç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦éƒ½å¯ä»¥ä¸ç”¨å®ç°ï¼Œå…¨éƒ¨å¯ä»¥ä¾èµ–ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆã€‚å½“ç„¶ï¼Œç”±äº <code>unique_ptr</code> åªèƒ½ç§»åŠ¨ä¸èƒ½æ‹·è´ï¼Œ<code>Tokenizer</code>ä¹Ÿå°±åªèƒ½ç§»åŠ¨ä¸èƒ½æ‹·è´ã€‚</p>\n<h1 id=\"5-æ€»ç»“\">5. æ€»ç»“</h1>\n<p>æœ€åï¼Œç¬”è€…å°±ç»™å‡º C++ å°è£… C FFI æ¥å£çš„å®Œæ•´å®ç°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<pre><code class=\"language-cpp\">// HfTokenizer.h\n#pragma once\n\n#include &lt;memory&gt;\n#include &lt;string&gt;\n\n#include \"tokenizer_result.h\"\n\nnamespace hf {\nclass Tokenizer {\n public:\n  explicit Tokenizer(const std::string&amp; path);\n\n  // ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆï¼š\n  // - ææ„å‡½æ•°ï¼ˆè°ƒç”¨ Deleterï¼‰\n  // - ç§»åŠ¨æ„é€  / ç§»åŠ¨èµ‹å€¼\n  // - ç¦æ­¢æ‹·è´ï¼ˆå› ä¸º unique_ptr ä¸å¯æ‹·è´ï¼‰\n\n  // å…¶ä»–æ¥å£æ–¹æ³•\n  uint64_t Count(const std::string&amp; text) const;\n\n  // å‘é‡åŒ–\n  using ResultPtr =\n      std::unique_ptr&lt;TokenizerResult, void (*)(TokenizerResult*)&gt;;\n  ResultPtr Encode(const std::string&amp; text) const;\n\n private:\n  std::unique_ptr&lt;void, void (*)(void*)&gt; handle;\n};\n\n}  // namespace hf\n</code></pre>\n<pre><code class=\"language-cpp\">// HfTokenizer.cpp\n#include \"HfTokenizer.h\"\n\n#include &lt;stdexcept&gt;\n\n#include \"hf_tokenizer_ffi.h\"\n\nnamespace hf {\n\nstatic void HandleDeleter(void* handle) noexcept {\n  if (handle) {\n    tokenizer_destroy(handle);\n  }\n}\n\nstatic void ResultDeleter(TokenizerResult* p) noexcept {\n  if (p) {\n    tokenizer_result_free(*p);\n    delete p;\n  }\n}\n\nTokenizer::Tokenizer(const std::string&amp; path)\n    : handle(tokenizer_create(path.c_str()), HandleDeleter) {\n  if (!handle) {\n    throw std::runtime_error(\"Failed to create tokenizer from \" + path);\n  }\n}\n\nuint64_t Tokenizer::Count(const std::string&amp; text) const {\n  return tokenizer_count(handle.get(), text.c_str());\n}\n\nTokenizer::ResultPtr Tokenizer::Encode(const std::string&amp; text) const {\n  auto result = std::make_unique&lt;TokenizerResult&gt;(\n      tokenizer_encode(handle.get(), text.c_str()));\n  return {result.release(), ResultDeleter};\n};\n\n}  // namespace hf\n</code></pre>\n<p>ä¸ä»…æ˜¯å¥æŸ„ï¼Œè¿ä¼ é€’çš„æ•°æ®å¯¹è±¡ç¬”è€…éƒ½æ‰˜ç®¡ç»™æ™ºèƒ½æŒ‡é’ˆï¼Œä»è€Œé¿å…å¤§é‡å†™ç‰¹æ®Šæˆå‘˜å‡½æ•°è¿™äº›æ ·æ¿ä»£ç ã€‚ä¸å¾—ä¸è¯´ï¼ŒRAII çš„è®¾è®¡æ€è·¯éå¸¸ç²¾å¦™ï¼ŒåŒæ—¶ä¿è¯äº†å®‰å…¨æ€§ä¸ç®€æ´æ€§ï¼Œç»™äººä¸€ç§å›å½’ç¼–ç¨‹åŸå§‹çŠ¶æ€çš„æ„Ÿè§‰ã€‚æ‰€è°“â€œå¤§é“è‡³ç®€â€ï¼Œä¸æ˜¯ä»£ç è¶Šç¹å¤å°±è¶Šå®‰å…¨ï¼Œä¹Ÿä¸æ˜¯ä»£ç è¶ŠæŠ½è±¡å°±è¶Šå‰å®³ï¼›çœŸæ­£å¥½çš„ä»£ç ï¼Œæ˜¯åœ¨æ­£ç¡®æ€§ã€å¯ç»´æŠ¤æ€§ä¸ç®€æ´æ€§ä¹‹é—´å–å¾—å¹³è¡¡ï¼Œè®©èµ„æºç®¡ç†å¦‚å‘¼å¸èˆ¬è‡ªç„¶ï¼Œè€Œéè´Ÿæ‹…ã€‚</p>\n\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-31 13:36</span>&nbsp;\n<a href=\"https://www.cnblogs.com/charlee44\">charlee44</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">44</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    }
  ]
}