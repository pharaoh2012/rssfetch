{
  "title": "主页 - 博客园",
  "link": "https://www.cnblogs.com/",
  "description": "主页 - 博客园 RSS",
  "entries": [
    {
      "title": "FastAPI + TinyDB并发陷阱与实战：告别数据错乱的解决方案",
      "link": "https://www.cnblogs.com/ymtianyu/p/19450340",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/ymtianyu/p/19450340\" id=\"cb_post_title_url\" title=\"发布于 2026-01-07 08:54\">\n    <span>FastAPI + TinyDB并发陷阱与实战：告别数据错乱的解决方案</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                    <div id=\"cnblogs_post_description\" style=\"display: none;\">\n        \n        本文针对在FastAPI框架下使用TinyDB（JSON文件数据库）时，因多人同时读写导致的并发数据冲突问题，进行了深度剖析。文章通过生动的比喻解释了问题根源，并详细提供了文件锁、内存操作队列和应用层乐观锁三种由浅入深的实战解决方案，附有可直接整合的代码示例。同时，明确了各方案的适用场景与局限性，为开发者在轻量级与生产级应用之间提供平滑过渡的思路。\n    </div>\n<div class=\"blogpost-body blogpost-body-html\" id=\"cnblogs_post_body\">\n<p><strong style=\"color: rgba(186, 55, 42, 1);\">你的FastAPI应用在多人同时修改数据时，会不会出现数据错乱或丢失？</strong></p>\n<p>试像一下，团队里一个用于管理内部资源的工具突然“抽风”了。几个同事同时提交申请，结果后台数据显示，有的申请记录神秘消失，有的资源数量对不上。一查日志，发现大家都在同一秒对同一个<code style=\"color: rgba(186, 55, 42, 1);\">db.json</code>文件进行了读写。这就是为了轻量而选用TinyDB（一个纯Python的、以JSON文件为存储的数据库）后，最有可能真切地感受到“并发”带来的痛。🎯</p>\n<p>这篇文章，我将和你一起拆解这个问题，并分享如何用几个轻量级方案，让这个基于FastAPI和TinyDB的应用稳定地支撑起了日均数千次的并发请求。它不是一套放之四海而皆准的架构，但绝对是你在原型开发、小型工具或特定轻量场景下，性价比最高的解决方案。</p>\n<h2>📖 核心摘要</h2>\n<p>本文针对在FastAPI框架下使用TinyDB（JSON文件数据库）时遇到的并发写入数据冲突、错乱问题，深入浅出地解释了问题根源，并提供了从“文件锁”到“内存队列”再到“乐观锁”的三种由浅入深的实战解决方案，帮助你根据实际场景选择，确保数据一致性。</p>\n<h2>🚶‍♀️ 主要内容脉络</h2>\n<div>\n<p>🔍 一、问题根源：为什么简单的JSON文件会“打架”？</p>\n<p>🛠️ 二、解决方案：从“锁”到“队列”的三层防御</p>\n<p>- 方案一：文件锁（fcntl / portalocker）—— 给文件上个“请勿打扰”牌</p>\n<p>- 方案二：内存操作队列（asyncio.Queue）—— 让请求排好队，一个一个来</p>\n<p>- 方案三：应用层乐观锁（版本号校验）—— “我改的时候，东西还是原来的样子吗？”</p>\n<p>💻 三、实战代码：将方案融入FastAPI依赖项与路由</p>\n<p>⚠️ 四、重要提醒与边界探讨：这不是银弹</p>\n</div>\n<h2>🔍 第一部分：问题与背景</h2>\n<p>想象一下，TinyDB的<code style=\"color: rgba(186, 55, 42, 1);\">db.json</code>文件就是一个共享的笔记本。FastAPI的每个工作进程（Worker）就像一个快速记录员。</p>\n<p>当用户A的请求到来时，记录员1打开笔记本，读到某个值（比如库存为5），准备将其改为4。</p>\n<p><strong style=\"color: rgba(186, 55, 42, 1);\">就在这“读到”和“改写”的毫秒之间</strong>，用户B的请求也来了。记录员2也打开了同一个笔记本，他读到的库存<strong>仍然是5</strong>（因为记录员1还没写回去），然后他也计算，将库存改为3。</p>\n<p>结果就是，无论谁最后保存，另一个人的修改都会被完全覆盖。这就是典型的“并发写冲突”。在高并发的Web API场景下，这个问题会被急剧放大。</p>\n<h2>🛠️ 第二部分：核心原理与步骤</h2>\n<h3>🎯 方案一：文件锁（最直接的物理隔离）</h3>\n<p>原理：在读写文件前，先给这个文件加一把系统级的锁。其他进程尝试加锁时，会被阻塞或失败，直到锁被释放。这就像给笔记本的房间门上了锁，一次只进一个人。</p>\n<p><strong style=\"color: rgba(186, 55, 42, 1);\">适用场景：</strong> 低并发（如内部工具）、读写不那么频繁的场景。</p>\n<pre class=\"highlighter-hljs\" style=\"background-color: rgba(246, 248, 250, 1); padding: 15px; border-radius: 5px;\"><code># 安装：pip install portalocker\nimport portalocker\n\ndef safe_update_db():\n    with open('db.json', 'r+') as f:\n        portalocker.lock(f, portalocker.LOCK_EX)  # 获取独占锁\n        # 在这里安全地读取和修改数据\n        data = json.load(f)\n        data['counter'] += 1\n        f.seek(0)\n        json.dump(data, f)\n        f.truncate()\n        # 退出with块时，锁会自动释放</code></pre>\n<h3>🎯 方案二：内存操作队列（单进程内的秩序维护者）</h3>\n<p>原理：利用Python的<code style=\"color: rgba(186, 55, 42, 1);\">asyncio.Queue</code>，将所有对TinyDB的写操作封装成任务，放入一个队列。由一个单独的“消费者”协程从队列中依次取出任务执行。这样，无论外部请求多么并发，对数据库的写操作都是<strong>串行化</strong>的。</p>\n<p><strong style=\"color: rgba(186, 55, 42, 1);\">优点：</strong> 完全在内存中操作，速度极快，避免了文件锁可能带来的死锁或跨平台问题。非常适合FastAPI的异步模式。</p>\n<p><strong style=\"color: rgba(186, 55, 42, 1);\">关键警告：</strong> 此方案仅在<u>单个服务进程</u>内有效。如果你使用多个工作进程（如<span style=\"color: rgba(186, 55, 42, 1);\"><code>Uvicorn with --workers 4</code></span>），每个进程有自己的内存和队列，冲突依然会发生。此时需搭配方案一或方案三。</p>\n<h3>🎯 方案三：应用层乐观锁（基于版本的冲突检测）</h3>\n<p>原理：不阻止“读”，只在“写”的时候检查冲突。为每条数据增加一个<code style=\"color: rgba(186, 55, 42, 1);\">version</code>字段。每次读取数据时，连带版本号一起读出。修改后写回时，检查当前文件中的版本号是否和自己读到的版本号一致。如果一致，则写入，并将版本号+1；如果不一致，则说明在此期间数据已被他人修改，本次操作失败，需要提示用户重试。</p>\n<p>这就像两个人编辑在线文档，系统会提示你“在你编辑期间，文档已被他人更新”。</p>\n<h2>💻 第三部分：实战演示（整合方案二与三）</h2>\n<p>下面是一个在FastAPI中整合<strong>内存队列</strong>与<strong>乐观锁</strong>的核心示例：</p>\n<pre class=\"highlighter-hljs\" style=\"background-color: rgba(246, 248, 250, 1); padding: 15px; border-radius: 5px;\"><code>from fastapi import FastAPI, Depends, HTTPException\nfrom contextlib import asynccontextmanager\nimport asyncio\nfrom tinydb import TinyDB, Query\nimport json\nfrom pydantic import BaseModel\n\napp = FastAPI()\nwrite_queue = asyncio.Queue()\ndb_path = 'db.json'\n\n# 数据模型\nclass ItemUpdate(BaseModel):\n    item_id: int\n    new_value: str\n    read_version: int  # 客户端传来的读取时的版本号\n\n# 启动时启动写任务消费者\n@asynccontextmanager\nasync def lifespan(app: FastAPI):\n    # 启动时\n    asyncio.create_task(db_write_consumer())\n    yield\n    # 关闭时...\n\napp = FastAPI(lifespan=lifespan)\n\nasync def db_write_consumer():\n    \"\"\"写操作消费者，常驻后台，串行处理写队列\"\"\"\n    while True:\n        task_data = await write_queue.get()\n        await _perform_safe_write(task_data)\n        write_queue.task_done()\n\nasync def _perform_safe_write(task_data: dict):\n    \"\"\"执行带乐观锁检查的写入\"\"\"\n    with TinyDB(db_path) as db:\n        Item = Query()\n        record = db.get(Item.id == task_data['item_id'])\n        if not record:\n            # 处理记录不存在的情况...\n            return\n        # 乐观锁检查！！！\n        if record['version'] != task_data['read_version']:\n            raise ValueError(f\"数据版本冲突。当前版本{record['version']}，提交版本{task_data['read_version']}\")\n        # 通过检查，执行更新\n        db.update({\n            'value': task_data['new_value'],\n            'version': record['version'] + 1  # 版本号递增\n        }, Item.id == task_data['item_id'])\n\n@app.put(\"/update_item/\")\nasync def update_item(update: ItemUpdate):\n    \"\"\"更新接口\"\"\"\n    try:\n        # 将写操作封装成任务，放入队列，等待消费者处理\n        await write_queue.put(update.dict())\n        # 这里可以返回一个任务ID，让客户端轮询结果，或者使用WebSocket推送\n        return {\"message\": \"更新请求已加入队列\"}\n    except asyncio.QueueFull:\n        raise HTTPException(status_code=429, detail=\"系统繁忙，请稍后重试\")\n\n@app.get(\"/get_item/{item_id}\")\nasync def get_item(item_id: int):\n    \"\"\"读取接口，返回数据和当前版本号\"\"\"\n    with TinyDB(db_path) as db:\n        Item = Query()\n        record = db.get(Item.id == item_id)\n        if record:\n            return {\"value\": record['value'], \"version\": record['version']}\n        raise HTTPException(status_code=404, detail=\"Item not found\")</code></pre>\n<h2>⚠️ 第四部分：注意事项与进阶思考</h2>\n<div>\n<p>🚨 <strong style=\"color: rgba(186, 55, 42, 1);\">重要提醒：</strong></p>\n<p>1. <strong>性能瓶颈：</strong> 所有方案的核心都是“串行化写”。这意味着你的数据库写吞吐量存在上限。对于超高并发写入场景，JSON文件本身就会成为瓶颈。</p>\n<p>2. <strong>多进程限制：</strong> 内存队列方案在单进程内完美，多进程需配合分布式锁（如Redis锁）或回归到数据库方案。</p>\n<p>3. <strong>故障恢复：</strong> 队列中的任务在服务重启时会丢失。对数据一致性要求极高的场景，需要引入持久化消息队列（如RabbitMQ）或直接使用真正的数据库。</p>\n</div>\n<p><strong>升华思考：</strong> 技术选型永远是权衡的艺术。TinyDB的优点是极致简单、无需外部服务。但当你的并发和一致性要求增长到一定阶段时，就是考虑升级到SQLite（支持更完善的事务和并发控制）、PostgreSQL等更强大数据库的时候了。本次实战的方案，是你从“玩具项目”平稳过渡到“生产系统”的一座关键桥梁。</p>\n<p style=\"text-align: center;\">---<strong>写在最后</strong>---<br />希望这份总结能帮你避开一些坑。如果觉得有用，不妨点个 赞👍 或 收藏⭐ 标记一下，方便随时回顾。也欢迎关注我，后续为你带来更多类似的实战解析。有任何疑问或想法，我们评论区见，一起交流开发中的各种心得与问题。</p>\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-07 08:54</span>&nbsp;\n<a href=\"https://www.cnblogs.com/ymtianyu\">一名程序媛呀</a>&nbsp;\n阅读(<span id=\"post_view_count\">42</span>)&nbsp;\n评论(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">收藏</a>&nbsp;\n<a href=\"\">举报</a>\n</div>"
    },
    {
      "title": "PHP 异步与多线程 从 TrueAsync 展望未来",
      "link": "https://www.cnblogs.com/catchadmin/p/19450129",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/catchadmin/p/19450129\" id=\"cb_post_title_url\" title=\"发布于 2026-01-07 07:12\">\n    <span>PHP 异步与多线程 从 TrueAsync 展望未来</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h1 id=\"php-异步与多线程-从-trueasync-展望未来\">PHP 异步与多线程 从 TrueAsync 展望未来</h1>\n<p>RFC TrueAsync 1.7 讨论中有个问题：这个提议会如何与 PHP 核心未来的变化互动？要设计好语言的长期演进，至少得对 PHP 的发展方向有基本判断。本文试图回答这个问题。</p>\n<p>TrueAsync 项目不仅是 PHP 核心的 async 改动，还包括回答以下问题所需的其他研究：</p>\n<ul>\n<li>PHP 能在多大程度上向多线程方向发展？</li>\n<li>是否存在根本性限制？</li>\n<li>实现真正的多线程可能需要哪些核心改动？</li>\n<li>可以实现哪些语言抽象？</li>\n</ul>\n<p>本文不是 PHP 多线程的详尽综述，也不追求每个细节的技术精确性或大众可读性。但希望它对 PHP 开发者有参考价值，能为后续讨论提供方向。</p>\n<p><a href=\"https://catchadmin.com/post/2026-01/multithreading-in-php-looking-to-the-future\" rel=\"noopener nofollow\" target=\"_blank\">原文 PHP 异步与多线程 从 TrueAsync 展望未来</a></p>\n<h2 id=\"历史\">历史</h2>\n<p>几年前要给 PHP 应用加高容量遥测，我说做不到。看到 Swoole 架构后想测试一下。能不能做一个 API，生成和处理大量数据的同时不拖慢客户端？</p>\n<p>我们给 PHP 做了个优化的 OpenTelemetry，分批写数据，收集成大块再发到中间遥测服务器。数据压缩，JSON 结构用 MessagePack 序列化。</p>\n<p>假设是：用单线程协程逐步构建遥测数据，定时或达到阈值时发送。没有跨线程交互，代码应该快。真的吗？</p>\n<p>实验结果：遥测让 API 吞吐量减半。假设错了。为什么？概念上看起来没问题。Swoole 已经让 PHP 函数非阻塞，协程应该高效才对。哪里出错了？</p>\n<p>第二版改成：遥测只在一个请求期间收集，立即扔给作业进程去聚合、压缩、发送。这版性能好多了。但不应该啊？进程间数据走管道，一端序列化另一端反序列化。管道在内存里，但系统调用开销不小。</p>\n<p>后来找到原因：遥测数据量大，压缩相对 API 请求处理吃掉太多 CPU。Swoole 协程对 I/O 高效，但帮不了 CPU 密集型任务。</p>\n<p>这个案例说明单线程协程解决不了所有问题。也说明多线程能补充协程，给更多问题提供工具。</p>\n<h2 id=\"单线程--offload\">单线程 + offload</h2>\n<p>把 CPU 密集型工作卸载到单独进程不是什么新发明。这个模式在不同语言和框架中独立出现，叫 <code>Single-threaded + offload</code>。</p>\n<p>打个比方：一个人快速分拣信件（每小时几千封），重包裹由其他员工用卡车装走。分拣员要是自己去搬包裹，信件队列就堆到天花板了。</p>\n<p><code>Single-threaded + offload</code> 模型把任务分两类：</p>\n<ul>\n<li><strong>I/O-bound 任务</strong> — 读文件、网络调用、数据库访问。大部分时间在等外部世界。通过并发 async（协程、<code>await</code>），一个线程能容纳几千个这类操作。</li>\n<li><strong>CPU-bound 任务</strong> — 压缩、加密、解析、计算。CPU 满负荷跑，光靠并发不够，得上更多核心。</li>\n</ul>\n<p>模型在物理上分离这两类任务：主线程（<code>Event Loop</code>）只管 I/O，CPU 任务扔给单独的线程或进程（<code>Workers</code>）。</p>\n<p>Node.js 靠单线程 <code>Event Loop</code> 出名，很适合网络应用。但开发者要是在请求处理器里直接处理图像或压缩视频，服务器就变南瓜了。后来加了 <code>Worker Threads</code>，专门跑 CPU 密集型操作。</p>\n<p>Python 走了类似路线。<code>asyncio</code> 出来后，I/O-bound 代码有了好工具，但 GIL（全局解释器锁）挡着，单进程内没法真正 CPU 并行（写这篇文章时问题已解决）。阻塞操作有 <code>loop.run_in_executor()</code> 和 <code>asyncio.to_thread()</code>（Python 3.9+），把重活卸载到线程池或进程池。<code>Event Loop</code> 保持响应，计算并行跑。</p>\n<p>PHP/Swoole 也是这个架构：<code>Request Workers</code> 用协程处理 HTTP 请求，<code>Task Workers</code> 跑重计算。通过 UnixSocket 或管道通信，单进程能处理每秒约 10 万次操作。</p>\n<h3 id=\"模型的优势\">模型的优势</h3>\n<p><strong>1. 资源效率</strong></p>\n<p>单线程 <code>Event Loop</code> 能以极小开销服务几千个并发 I/O 操作。协程任务间切换比操作系统线程上下文切换便宜得多。CPU-bound 任务在多核上真正并行——每个 worker 占一个核心，互不干扰。</p>\n<p><strong>2. 开发简单</strong></p>\n<p><code>Event Loop</code> 里的代码不用互斥锁、信号量这些多线程编程的玩意儿。单线程模型一次只跑一个任务，竞态条件不可能出现。<code>Workers</code> 并行跑，但只要遵循 <code>Shared Nothing</code>，同步问题就不存在。</p>\n<p>多线程代码和单线程 async 代码的复杂度差距很大。现代语言和框架都奔着单线程 async 去，不走经典多线程。</p>\n<p><strong>3. 编译器/运行时更简单</strong></p>\n<p>单线程模型的 async 函数对编译器和运行时简单得多。好的多线程语言需要自己的代码生成管道。PHP 有个硬约束：部分代码用 C 写的，没法对线程、内存管理、参数传递做高效的字节码级优化。Go 的设计复杂出名：专有栈、复杂 GC，都是高效 goroutines 和 channels 必需的。PHP 的 GC 后面会讲，先别放松。</p>\n<p><strong>4. 手动负载分配</strong></p>\n<p>开发者可以主动在请求处理代码和 worker 池之间分配负载。手动控制能从硬件榨出理论最大值。但这也是缺点。</p>\n<h3 id=\"模型的劣势\">模型的劣势</h3>\n<p><strong>1. 手动负载分配</strong></p>\n<p>手动分配是双刃剑。开发者可以针对特定任务优化，也可能误判什么该放 I/O 代码、什么该放 workers。I/O 代码塞了重活会过载，响应变慢、延迟上升。</p>\n<p>这个模型要求 PHP 开发者有足够技能，或者依赖框架作者提供的现成方案。</p>\n<p><strong>2. 不适合所有任务</strong></p>\n<p><code>Single-threaded + offload</code> 很适合 Web 服务器、API、微服务——主要负载是数据库、文件系统、网络调用这些 I/O。但每一步都要密集计算的场景——科学计算、渲染、机器学习——这个模型效果就差了。那些场景更适合完全多线程。</p>\n<p>你可能说：能接受！准备好了！但 PHP 本身准备好多线程了吗？</p>\n<h2 id=\"php-准备好多线程了吗\">PHP 准备好多线程了吗？</h2>\n<p>开发 TrueAsync 时，最难的讨论之一是\"为什么 PHP 没有 async\"。解释 PHP 为什么还没准备好多线程可能同样难。不过先聊聊多线程本身。我们为什么需要它？或者换个问法：我们为什么不需要它？</p>\n<p><strong>多线程不是并行执行代码的必要条件。</strong></p>\n<p>\"并行必须多线程\"这个想法早就刻在程序员脑子里了，就像\"黑洞会吸东西\"刻在流行文化里一样。</p>\n<p>并行执行完全可以用进程，进程彼此隔离（80386 架构就有了）。进程通过 IPC 通信，完成状态通过信号（操作系统事件）跟踪。那为什么还要线程？</p>\n<p>要老实回答这个问题，得穿越回去请当年做决定的人解释：Edsger Dijkstra、Fernando Corbató、Barbara Liskov、Richard Rashid。办个脱口秀挺好。但就算他们都来了，可能也说不出直接答案。</p>\n<p>下面这个说法是错的：</p>\n<blockquote>\n<p>线程是为了让并行代码不用额外工具就能共享内存。</p>\n</blockquote>\n<p>进程也能共享内存，但得把段映射到地址空间（额外工具）。线程默认共享所有内存。线程 A 能访问的变量 <code>x</code>，线程 B 在同一地址也能访问，不用任何技巧……但等等！多个线程没法在不加额外工具的情况下安全使用共享变量。</p>\n<p>更准确的说法是：</p>\n<blockquote>\n<p>线程是为了在任务间传递内存时没有额外开销。</p>\n</blockquote>\n<p>如果线程用内存传消息，保证同一时间只有一个线程能访问某块内存区域，那在内存和 CPU 两方面都是最高效的。线程刻意避免共享内存。这个模型叫 <code>Shared Nothing</code>。</p>\n<p><strong>线程是为了在任务间高效传数据。</strong> 跟\"黑洞不吸东西\"一样是事实。</p>\n<h2 id=\"php-内存模型\">PHP 内存模型</h2>\n<p>PHP 怎么处理内存？简化的抽象模型：</p>\n<ul>\n<li>代码</li>\n<li>数据</li>\n<li>PHP VM 状态</li>\n</ul>\n<p>线程间共享 PHP 代码已经能做到（PHP JIT 解决了）。其他组件紧密耦合，拆不开。比如 PHP 用一个全局 <code>object_store</code> 存所有创建对象的引用。PHP 内存管理器是给单个 PHP VM 的对象设计的，不面向多线程。PHP 垃圾收集器处理不了不同线程的数据，甚至要完全停掉 VM，因为它直接改对象的 <code>refcount</code>。</p>\n<p>所以 <strong>PHP 是严格的单线程模型，带 stop-the-world GC</strong>。</p>\n<h2 id=\"在线程间移动-php-vm\">在线程间移动 PHP VM</h2>\n<p>PHP 用线程局部存储（<code>Thread-Local Storage</code>，TLS）保存每个线程的 VM 状态。这对 ZTS（Zend Thread Safety）模式下线程间隔离很关键。</p>\n<p>现代 PHP 构建用 C11 标准的 <code>__thread</code>（MSVC 里是 <code>__declspec(thread)</code>）获取 VM 状态指针。速度很快，x86_64 上就是从 FS 或 GS 寄存器的基址读一个偏移量。</p>\n<pre><code class=\"language-asm\">; offset - 编译时计算的常量偏移量\n; fs - 内存段的基地址\nmov rax, QWORD PTR fs:offset\n</code></pre>\n<p>FS/GS 对每个线程唯一（操作系统保证），读出来的总是正确的 VM 状态指针。</p>\n<p>能在线程间移动 VM 状态，就能实现类似 Go 协程或 actors 的功能。现代 VM 通过自定义代码生成传上下文，用 CPU 寄存器传 VM 状态。PHP 做不到这个，因为底层用 C 函数，C 没法给每个函数传隐式上下文参数。在线程间移动 PHP VM 状态会损失一定性能。</p>\n<p>但如果只移动执行代码需要的那一小部分 VM 状态呢？比如 PHP Fiber 切换时会复制指向全局结构（<code>zend_executor_globals</code>）的部分指针。</p>\n<p>如果把 PHP VM 概念上分成两部分：</p>\n<ul>\n<li><strong>PHP VM shared</strong>。类、函数、常量、ini 指令、可执行代码。</li>\n<li><strong>PHP VM movable</strong>。需要移动的 VM 部分。</li>\n</ul>\n<p><img alt=\"PHP Memory Model\" class=\"lazyload\" /></p>\n<p>有些结构可以标记为共享，有些标记为可移动；<code>Executor Globals</code> 甚至可以拆成共享和可移动两部分，实现线程间高效的 VM 状态移动。扩展全局结构不会因为多一层间接而损失性能，因为它们本来就在用间接访问。</p>\n<p>问题出在代码编译相关的结构上。PHP 通过 <code>include</code>/<code>require</code>、<code>eval</code> 和自动加载是动态的，这让 VM 状态很难有效拆成共享和可移动两部分。如果能解决这个问题，PHP 就能以很小的开销在线程间移动部分 VM 状态。</p>\n<h2 id=\"在线程间传递对象\">在线程间传递对象</h2>\n<p>PHP 要改什么才能安全地在线程间传递对象？怎么做？</p>\n<p>从语言层面看。假设 <code>$obj</code> 里有个 <code>SomeObject</code> 实例，要发到另一个线程。能做到吗？</p>\n<pre><code class=\"language-php\">$obj = new SomeObject();\n\n$thread = new Thread(function () use ($obj) {\n    echo $obj-&gt;someMethod();\n});\n\n$thread-&gt;join();\n</code></pre>\n<p><code>SomeObject</code> 只属于 <code>$obj</code>，可以安全地把地址从一个线程移到另一个。主线程的 <code>$obj</code> 会被销毁：</p>\n<pre><code class=\"language-php\">$obj = new SomeObject();\n$thread = new Thread(function () use ($obj) {\n    echo $obj-&gt;someMethod();\n});\n\n// $obj 在这里未定义\n$thread-&gt;join();\n</code></pre>\n<p>上面的代码跟 C++ 和 Rust 的移动语义完全一样。这种线程间传内存的方式：</p>\n<ul>\n<li><strong>安全</strong>。只有一个线程拥有对象。</li>\n<li><strong>没有复制或序列化开销</strong>。</li>\n</ul>\n<p>为了让行为可预测、静态分析器能读懂，应该加特殊的移动语法：</p>\n<pre><code class=\"language-php\">$obj = new SomeObject();\n\n// consume $obj 表示移动对象\n$thread = new Thread(function () use (consume $obj) {\n    echo $obj-&gt;someMethod();\n});\n\n// $obj 在这里未定义。在 PHP9 中应该在这里报告错误。\necho $obj;\n</code></pre>\n<p>看着不错？</p>\n<p>但移动 <code>refcount = 1</code> 的对象有问题。</p>\n<p>看个分类树的例子：</p>\n<pre><code class=\"language-php\">$electronics = new CategoryNode('Electronics');\n$categoriesTree = new Tree();\n$categoriesTree-&gt;addToPath('/products/electronics', $electronics);\n$categoriesTree-&gt;addToPath('/popular/electronics', $electronics);  \n// 同一个分类！\n</code></pre>\n<p><code>$electronics</code> 在树里出现两次（<code>refcount = 2</code>）。把 <code>$categoriesTree</code> 移到另一个线程会怎样？</p>\n<p>要安全移动，必须保证图里所有对象都没有外部引用：</p>\n<pre><code class=\"language-php\">$node = new CategoryNode('Electronics');\n$categoriesTree = new Tree();\n$categoriesTree-&gt;addToPath('/products/electronics', $node);\n\n$favourites = [$node];  // 外部引用！\n$thread = new Thread(function () use ($categoriesTree) {\n    // $categoriesTree 被移动\n});\n\n// $favourites[0] 现在指向另一个线程中的内存\n// 悬空指针！\n</code></pre>\n<p>安全移动需要：</p>\n<ul>\n<li><strong>完整图遍历</strong>：检查所有嵌套对象。</li>\n<li><strong>Refcount 检查</strong>：图里每个对象都要查。</li>\n<li><strong>身份保留</strong>：图内的重复项得保持重复。</li>\n</ul>\n<p>可以为此设计算法，叫深拷贝。简单实现大概这样：</p>\n<pre><code class=\"language-php\">// 深拷贝伪代码\n// 线程 A 中的源图\n$node = new Node('A');        // addr: 0x1000\n$tree-&gt;left = $node;          // addr: 0x1000\n$tree-&gt;right = $node;         // addr: 0x1000 (相同引用)\n\n// 深拷贝到线程 B（带 MM 的伪代码）\n$copied_map = [];  // 哈希表: addr_source -&gt; addr_target\nfunction deepCopyToThread(object $obj, Thread $target_thread_mm) \n{\n    $source_addr = get_object_address($obj);\n    if (isset($copied_map[$source_addr])) {\n        return $copied_map[$source_addr];  // 已经复制！\n    }\n    // 在另一个线程的 MM 中分配内存\n    $new_addr = $target_thread_mm-&gt;allocate(sizeof($obj));\n    $copied_map[$source_addr] = $new_addr;\n    // 复制对象数据\n    memcpy($new_addr, $source_addr, sizeof($obj));\n    // 遍历属性\n    foreach ($obj-&gt;properties as $prop) {\n        if (is_object($prop)) {\n            $new_prop_addr = deepCopyToThread($prop, $target_thread_mm);\n            // 更新新对象中的指针\n            update_property($new_addr, $prop, $new_prop_addr);\n        }\n    }\n    return $new_addr;\n}\n// 线程 B 中的结果：\n// $newTree-&gt;left (addr: 0x2500) === $newTree-&gt;right (addr: 0x2500)\n// 身份保留！\n</code></pre>\n<p>深拷贝时间复杂度 O(N + E)，N 是对象数，E 是引用数。空间复杂度 O(N)——哈希表 + 新对象 + 递归栈。</p>\n<p>比序列化快，因为不用转换传输格式，但收益取决于数据形状和图大小。也可以混合：<code>refcount = 1</code> 的移动，其他的深拷贝。</p>\n<p>结果：</p>\n<ul>\n<li>PHP 开发者不用管对象怎么传到另一个线程。</li>\n<li>最好情况：内存直接移动（<code>refcount = 1</code>）。</li>\n<li>最坏情况：深拷贝，保留身份（<code>refcount &gt; 1</code>）。</li>\n</ul>\n<p>看着还行：</p>\n<ul>\n<li>PHP 语法改动最小</li>\n<li>可以逐步改</li>\n<li>多线程能用了</li>\n</ul>\n<p>但核心层面没那么美好。要让对象移动成真，PHP 需要跨线程的内存管理机制。现在做不到。</p>\n<h2 id=\"多线程-php-内存管理器\">多线程 PHP 内存管理器</h2>\n<p>PHP 内存管理器类似 jemalloc 或 tcmalloc 这些现代分配器。区别是：它没有从另一个线程释放内存的正确算法。</p>\n<p>场景：</p>\n<ul>\n<li>线程 A 创建对象。</li>\n<li>移动（原样）给线程 B。</li>\n<li>B 不再需要，要释放。</li>\n</ul>\n<p>每个 PHP 线程有自己的内存管理器（<code>Memory Manager</code>，MM）。B 想释放 A 分配的内存就出问题了。B 的 MM 不认识 A 的内存，释放会出错。B 直接访问 A 的 MM 结构也不行，需要同步。现代高性能多线程分配器用延迟释放（<code>deferred free</code>）解决这个问题。</p>\n<p>延迟释放的思路：</p>\n<ul>\n<li>B 的 MM 看到一个不认识的指针。</li>\n<li>找到哪个 MM 拥有它，给那个 MM 的队列发消息说可以释放了。</li>\n<li>A 的 MM 处理队列，在自己的上下文里释放。</li>\n</ul>\n<p><img alt=\"Cross thread deferred free\" class=\"lazyload\" /></p>\n<p>用现代无锁结构，这个算法吞吐量高，不同线程能并行释放内存，几乎不用锁。</p>\n<p>多线程 PHP 内存管理器为以前不可能的改动打开了门。</p>\n<h2 id=\"共享对象\">共享对象</h2>\n<p>能用最少操作把内存从一个线程传到另一个很好，但如果能创建一开始就设计成跨线程共享的对象呢？</p>\n<p>很多服务可以构建成不可变对象，应该能在进程间共享，省内存、加快 worker 启动。</p>\n<p>但 <code>refcount</code> 挡着，它让所有 PHP 对象实际上都是可变的。能绕过吗？</p>\n<h3 id=\"代理对象\">代理对象</h3>\n<p>第一种方法是代理对象，引用存在所有线程可访问的共享内存池里的真实对象。代理只存标识符或指针，加上访问数据的方法。缺点：</p>\n<ul>\n<li>访问数据/属性变慢</li>\n<li>Reflection API 和类型检查更复杂</li>\n</ul>\n<p>PHP 已经有强大的代理机制。代理共享对象在某些场景不错，比如计数器表或 Swoole/Table 这样的数据表。</p>\n<h3 id=\"带有-gc_share-标志的共享对象\">带有 GC_SHARE 标志的共享对象</h3>\n<p>PHP 有个内置机制通过 <code>GC_IMMUTABLE</code> 标志实现不可变元素，用于：</p>\n<ul>\n<li>内部字符串（<code>IS_STR_INTERNED</code>）——整个 PHP 进程存在的字符串常量</li>\n<li>不可变数组（<code>IS_ARRAY_IMMUTABLE</code>）——比如 <code>zend_empty_array</code></li>\n<li>opcache 里的常量——带常量数据的编译代码</li>\n</ul>\n<p><code>GC_IMMUTABLE</code> 让引擎跳过这些结构的 <code>refcount</code> 修改：</p>\n<pre><code class=\"language-c\">// Zend/zend_types.h\n// 为 zend_refcounted_h 增加 refcount 的函数\nstatic zend_always_inline void zend_gc_try_addref(zend_refcounted_h *p) {\n    if (!(p-&gt;u.type_info &amp; GC_IMMUTABLE)) {\n        ZEND_RC_MOD_CHECK(p);\n        ++p-&gt;refcount;\n    }\n}\n</code></pre>\n<p>类似机制可以支持 <code>SharedObjects</code>，比如加个 <code>GC_SHARE</code> 标志。</p>\n<p>性能分析显示，检查 <code>GC_SHARE</code> 给单独的 <code>refcount++</code> 加了 +34% 开销（微基准测试）。实际应用里 <code>refcount</code> 操作只占总工作一小部分，影响几乎看不出来：</p>\n<ul>\n<li>真实操作（数组/对象）：+3–9%</li>\n<li>实际应用：+0.05–0.5%</li>\n</ul>\n<p>这解决了一半问题；另一半是给这些对象设计 GC。用原子 <code>refcount</code> 不理想，多线程访问同一对象时会变慢。延迟释放算法可能更合适。</p>\n<h2 id=\"基于区域的内存\">基于区域的内存</h2>\n<p>基于区域的内存（<code>Region-based memory</code>）在面向 Web 的语言里越来越流行。</p>\n<p>思路：给特定任务或线程在单独区域分配内存，不需要时整体释放。避免了逐个对象管理的复杂性，GC 也简单了。</p>\n<p>比如 PHP MM 可以保证对象在绑定到特定 PHP 对象的区域里创建。区域生命周期等于对象生命周期。</p>\n<p>对象销毁时整个区域直接释放，不用遍历子对象。这种对象要\"移动\"到另一个线程，可以避免深拷贝。</p>\n<p>PHP VM 实现基于区域的内存有问题：比如全局对象列表、操作码缓存。但高效实现的机会不是零，值得继续研究。</p>\n<p>有效的基于区域的内存算法能为 actors 打开门——有隔离内存的特殊对象。</p>\n<p><strong>Actors 是多线程编程里最方便、最强大、最安全的工具。</strong></p>\n<h2 id=\"协程和线程协作\">协程和线程协作</h2>\n<p>从协程角度看，<code>Thread</code> 是个 <code>Awaitable</code> 对象。协程可以等 <code>Thread</code> 结果而不阻塞其他协程。一个线程能托管很多等重任务的协程。服务它们的线程对新请求保持快速响应，因为等 <code>Thread</code> 不阻塞 <code>Event Loop</code>。</p>\n<pre><code class=\"language-php\">use Async\\await;\nuse Async\\Thread;\n\n$thread = new Thread(function() {\n    // 硬件密集型任务在这里\n    return 42;\n});\n\n$result = await($thread); \n// 协程在这里暂停，直到 Thread 完成\n</code></pre>\n<p>这种方式能实现有 CPU 密集型任务和简单业务逻辑的聊天场景。<br />\n<img alt=\"协程和线程协作\" class=\"lazyload\" /></p>\n<p>图里是个示例架构。应用有两个线程池：带并发多任务的请求处理线程，和跑 CPU 密集型任务的 worker 线程。协程处理请求，worker 跑重任务时可以完全暂停，跑完继续。</p>\n<pre><code class=\"language-php\">use Async\\await;\nuse Async\\ThreadPool;\n\nfinal readonly class ImageDto\n{\n    public function __construct(\n    public int $width,\n    public int $height,\n    public string $text,\n) {}\n}\n\n$pool = new ThreadPool(2);\n$dto = new ImageDto(\n    width: 200,\n    height: 200,\n    text: 'Hello TrueAsync!'\n);\n\n$image = $pool-&gt;enqueue(function (ImageDto $dto) {\n    $img = imagecreatetruecolor($dto-&gt;width, $dto-&gt;height);\n\n    $white = imagecolorallocate($img, 255, 255, 255);\n    $black = imagecolorallocate($img, 0, 0, 0);\n\n    imagefill($img, 0, 0, $white);\n    imagestring($img, 5, 20, 90, $dto-&gt;text, $black);\n\n    ob_start();\n    imagepng($img);\n    imagedestroy($img);\n    return ob_get_clean();\n}, $dto);\n\n$response-&gt;setHeader('Content-Type', 'image/png');\n$response-&gt;write($image);\n$response-&gt;end();\n</code></pre>\n<p>协程代码是顺序的，读起来像普通代码，<code>ThreadPool::enqueue</code> 像在同一线程调用回调一样。DTO 跨线程传，结果字符串不会在内存里复制两次。</p>\n<h2 id=\"垃圾收集器和有状态模式\">垃圾收集器和有状态模式</h2>\n<p>现代化 PHP 内存管理器不是改进多线程环境唯一要做的事。没有高效 GC，多线程 PHP 会有性能问题和循环引用导致的内存泄漏。</p>\n<p>PHP GC 用两种算法：引用计数做主要内存管理，并发循环收集（Concurrent Cycle Collection，Bacon-Rajan，2001）处理循环。引用计数每次赋值都递增/递减，没同步的话多线程不安全。每次赋值用原子操作开销太大；不同步就有竞态和泄漏。循环收集器虽然叫\"并发\"，但只在单线程内工作，用颜色标记（PURPLE → GREY → WHITE/BLACK）找循环，也不是线程安全的。</p>\n<p>好消息是：当前 GC 实现在多线程环境能工作，因为它跟内存管理器分开，不依赖内存在哪分配。</p>\n<p>但 PHP 要进入有状态应用的多线程时代，GC 得适应：</p>\n<ul>\n<li>在单独线程并行跑，不影响业务代码。</li>\n<li>尽快释放资源。</li>\n<li>提供泄漏检测、日志、遥测的额外工具（长时间运行的应用特别需要）。</li>\n</ul>\n<p>循环收集器可以改成在多线程环境工作，在单独线程处理引用，提高整体响应性。这可能够用了！</p>\n<h2 id=\"actors\">Actors</h2>\n<p><code>ThreadPool</code> 和线程间传对象有用，但需要开发者的注意力、技能和精力。有个更好的多线程编程抽象，藏住线程/内存复杂性，完美契合业务逻辑：actors。</p>\n<p><strong>Actors 是并发并行编程模型，计算的基本单元是 actor。</strong></p>\n<p>每个 actor：</p>\n<ul>\n<li>有自己的隔离状态</li>\n<li>顺序处理消息</li>\n<li>只通过消息跟其他 actors 交互</li>\n<li>可能在单独线程跑</li>\n</ul>\n<p>可以把 actor 想成对象，这让多线程 PHP 能用熟悉的 OOP 模式。</p>\n<p>想象一个有很多房间的聊天服务器。每个房间是单独的对象。</p>\n<pre><code class=\"language-php\">use Async\\Actor;\n\nclass ChatRoom extends Actor\n{\n    private array $messages = [];\n    private string $name;\n\n    public function __construct(string $name)\n    {\n        $this-&gt;name = $name;\n    }\n\n    public function postMessage(string $user, string $text): void\n    {\n        $this-&gt;messages[] = [\n            'user' =&gt; $user,\n            'text' =&gt; $text,\n            'time' =&gt; time()\n        ];\n    }\n\n    public function getMessages(): array\n    {\n        return $this-&gt;messages;\n    }\n}\n\nspawn(function() {\n   $room = new ChatRoom('general');\n   $room-&gt;postMessage('Alice', 'Hello!');  // 在另一个线程中运行，暂停协程！\n   $messages = $room-&gt;getMessages();       // 在另一个线程中运行，暂停协程！\n   echo json_encode($messages);\n});\n</code></pre>\n<p><code>ChatRoom</code> 对象特殊。它们的数据和 PHP VM 状态本地化了，方便在线程间移动。每个方法在自己的线程跑，但任何时刻只有一个线程能执行给定 actor 的方法。</p>\n<p>语义上，基类 <code>Actor</code> 定义了 PHP VM 和内存管理器的工作方式，让 <code>ChatRoom</code> 对象能安全地在单独线程跑。类类型不只\"存\"方法和属性信息，还存 MM 和 GC 该怎么操作这类对象。Rust、C++ 也有类似做法。好处：不改语法，符合 OOP 哲学。</p>\n<p>示例看起来像协程里跑的普通顺序代码。但 <code>postMessage</code> 和 <code>getMessages</code> 在另一个线程跑，不会直接执行。协程给 actor 队列发消息，进入等待，actor 在另一个线程跑完方法返回结果后才恢复。</p>\n<p>这跟熟悉的 PHP OOP 不冲突：<code>Actor</code> 重写 <code>__call</code>：</p>\n<pre><code class=\"language-php\">class Actor \n{\n    private $threadPool;\n\n    public function __call(string $name, array $arguments): mixed\n    {\n        if(current_thread_id() === $this-&gt;threadPool-&gt;getThreadIdForActor($this)) {\n            // 如果我们在同一个线程中，直接运行方法\n            return $this-&gt;$name(...$arguments);\n        }\n    \n        // 否则将调用排队给 actor\n        return $this-&gt;threadPool-&gt;enqueueActorMethod($this, $name, $arguments);\n    }\n}\n</code></pre>\n<p><code>enqueueActorMethod</code> 把 <code>postMessage</code> 加到 actor 队列，订阅结果事件，调用 <code>Async\\suspend()</code> 暂停协程。</p>\n<p>Actor 代码顺序执行，解决竞态条件，多线程开发对开发者透明。</p>\n<p>并行性靠每个 <code>ChatRoom</code> actor 能在单独线程跑来实现：</p>\n<pre><code class=\"language-php\">spawn(function() {\n   $room = new ChatRoom('room1');\n   $room-&gt;postMessage('Alice', 'Hello!');\n   $messages = $room-&gt;getMessages();\n   echo json_encode($messages);\n});\n\nspawn(function() {\n   $room = new ChatRoom('room2');\n   $room-&gt;postMessage('Bob', 'Hi there!');\n   $messages = $room-&gt;getMessages();\n   echo json_encode($messages);\n});\n</code></pre>\n<p><code>ChatRoom</code> 实例能在不同线程并行跑，因为每个 actor 有自己的执行线程、唯一的 PHP VM 状态和内存。</p>\n<p>创建 100 个聊天室：</p>\n<pre><code class=\"language-php\">use Async\\Actor;\n\n$rooms = [\n    'general' =&gt; new ChatRoom('general'),\n    'random'  =&gt; new ChatRoom('random'),\n    'tech'    =&gt; new ChatRoom('tech'),\n    // ... 97 个更多房间\n];\n\n// 处理请求的协程\nHttpServer::onRequest(function(Request $request, Response $response) use ($rooms) {\n   // HTTP 请求处理\n   $roomName = $request-&gt;getQueryParam('room');\n   $room = $rooms[$roomName] ?? null;\n   \n   if (!$room) {\n      $response-&gt;setStatus(404);\n      $response-&gt;write('Room not found');\n      $response-&gt;end();\n      return;\n   }\n   \n   // 调用看起来是同步的，但在另一个线程中运行！\n   $room-&gt;postMessage($request-&gt;getQueryParam('user'), $request-&gt;getQueryParam('text'));\n   $messages = $room-&gt;getMessages();\n   \n   $response-&gt;setHeader('Content-Type',  'application/json');  \n   $response-&gt;write(json_encode($messages));\n   $response-&gt;end();\n});\n</code></pre>\n<p>每个聊天室顺序处理消息，跟其他房间并行。</p>\n<p>Actors 不需要互斥锁、锁、复杂同步或手动线程池交互。它们是现成的高级并行化方案。</p>\n<p>一个聊天室要给另一个发消息也行，因为 actors 是 <code>SharedObject</code>，能跨线程交互：</p>\n<pre><code class=\"language-php\">class Rooms extends Actor\n{\n    private array $rooms = [];\n    \n    public function __construct(string ...$roomNames)\n    {\n       foreach ($roomNames as $name) {\n           $this-&gt;rooms[$name] = new ChatRoom($name);\n       }\n    }\n    \n    public function broadcastMessage(string $fromRoom, string $user, string $text): void\n    {\n        foreach ($this-&gt;rooms as $name =&gt; $room) {\n            if ($name !== $fromRoom) {\n                // 非阻塞调用\n                $room-&gt;postMessageAsync($user, $text);\n            }\n        }\n    }\n}\n\nspawn(function() {\n   $rooms = new Rooms('general', 'room1', 'room2', 'room3');\n   $rooms-&gt;broadcastMessage('general', 'Alice', 'Hello!');\n});\n</code></pre>\n<h3 id=\"actor-内部\">Actor 内部</h3>\n<p>PHP VM 保证 actor 内所有对象：</p>\n<ul>\n<li>要么只属于该 actor，在其唯一区域分配</li>\n<li>要么从其他区域或线程移动过来</li>\n<li>要么是另一个 <code>SharedObject</code> 或另一个 actor</li>\n</ul>\n<p>Actor 要么拥有自己的区域，要么只用显式共享的不可变对象；否则竞态还是会有。</p>\n<p>内存管理器保证 actor 方法内所有内存操作自动绑定到与 actor 关联的区域。</p>\n<p>方法通过 <code>Scheduler</code> 服务的 MPMC 消息队列执行。<code>Scheduler</code> 在 actors 间分配 CPU 时间，提供并发和并行执行。</p>\n<p><img alt=\"Actor 内部\" class=\"lazyload\" /></p>\n<h2 id=\"结论\">结论</h2>\n<p>这些听着都不错，但什么时候能真正用上？</p>\n<p><code>Single-threaded + offload</code> 模型可能很快出现，很多组件已经就绪。TrueAsync 单线程协程已到 beta 版。实验性的多线程内存管理器和创建线程的 API 已经实现。</p>\n<p>Actors 需要更多开发时间，因为涉及 PHP 核心很多部分，但仍是 PHP 9 的现实目标，给市场提供一种安全的多线程编程语言。</p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-07 07:12</span>&nbsp;\n<a href=\"https://www.cnblogs.com/catchadmin\">JaguarJack</a>&nbsp;\n阅读(<span id=\"post_view_count\">15</span>)&nbsp;\n评论(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">收藏</a>&nbsp;\n<a href=\"\">举报</a>\n</div>"
    },
    {
      "title": "Claude Code 完全指南：使用方式、技巧与最佳实践",
      "link": "https://www.cnblogs.com/knqiufan/p/19449849",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/knqiufan/p/19449849\" id=\"cb_post_title_url\" title=\"发布于 2026-01-07 00:55\">\n    <span>Claude Code 完全指南：使用方式、技巧与最佳实践</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h1 id=\"claude-code-完全指南使用方式技巧与最佳实践\">Claude Code 完全指南：使用方式、技巧与最佳实践</h1>\n<p>最近在深度使用 Claude Code，发现真的很香！即整理了一份全面的指南，从零开始逐步了解 Claude Code 的核心功能、高级特性和最佳实践。这篇博客实际上更像是一本工具书，让我自己在使用时也能随时参考其内容，更好的使用这个强大的 AI 工具。</p>\n<h2 id=\"目录\">目录</h2>\n<ul>\n<li><a href=\"#%E4%B8%80claude-code-%E7%AE%80%E4%BB%8B\" rel=\"noopener nofollow\">一、Claude Code 简介</a></li>\n<li><a href=\"#%E4%BA%8C%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE\" rel=\"noopener nofollow\">二、安装与配置</a></li>\n<li><a href=\"#%E4%B8%89%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E8%AF%A6%E8%A7%A3\" rel=\"noopener nofollow\">三、核心概念详解</a></li>\n<li><a href=\"#%E5%9B%9B%E9%AB%98%E7%BA%A7%E5%8A%9F%E8%83%BD\" rel=\"noopener nofollow\">四、高级功能</a></li>\n<li><a href=\"#%E4%BA%94%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7%E4%B8%8E%E5%BF%AB%E6%8D%B7%E6%93%8D%E4%BD%9C\" rel=\"noopener nofollow\">五、实用技巧与快捷操作</a></li>\n<li><a href=\"#%E5%85%AD%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5\" rel=\"noopener nofollow\">六、最佳实践</a></li>\n<li><a href=\"#%E4%B8%83%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B\" rel=\"noopener nofollow\">七、实战案例</a></li>\n<li><a href=\"#%E5%85%AB%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88\" rel=\"noopener nofollow\">八、常见问题与解决方案</a></li>\n<li><a href=\"#%E4%B9%9D%E9%AB%98%E7%BA%A7%E9%9B%86%E6%88%90%E4%B8%8E%E6%89%A9%E5%B1%95\" rel=\"noopener nofollow\">九、高级集成与扩展</a></li>\n</ul>\n<hr />\n<h2 id=\"一claude-code-简介\">一、Claude Code 简介</h2>\n<h3 id=\"11-什么是-claude-code\">1.1 什么是 Claude Code?</h3>\n<p>Claude Code(CC)是由 Anthropic 开发的<strong>系统级 AI Agent</strong>,它不仅是一个代码编写工具,更是一个可以通过自然语言指令完成各种电脑任务的智能助手。</p>\n<p><strong>核心特性:</strong></p>\n<table>\n<thead>\n<tr>\n<th>特性</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>全功能访问</strong></td>\n<td>拥有系统级权限,可执行文件操作、运行命令、管理进程等</td>\n</tr>\n<tr>\n<td><strong>超大上下文</strong></td>\n<td>支持 200K token 上下文窗口,可处理大型项目</td>\n</tr>\n<tr>\n<td><strong>高度可扩展</strong></td>\n<td>支持 MCP、Skills、Plugins、Hooks 等多种扩展方式</td>\n</tr>\n<tr>\n<td><strong>多代理协作</strong></td>\n<td>支持子代理(Subagents)并行处理复杂任务</td>\n</tr>\n<tr>\n<td><strong>自然交互</strong></td>\n<td>支持自然语言指令,无需学习复杂命令语法</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"12-claude-code-vs-传统工具\">1.2 Claude Code vs 传统工具</h3>\n<div class=\"mermaid\">graph LR\n    A[传统开发工具] --&gt; B[代码编辑器]\n    A --&gt; C[Chat AI工具]\n    A --&gt; D[Coding助手]\n\n    E[Claude Code] --&gt; F[代码编写]\n    E --&gt; G[对话问答]\n    E --&gt; H[数据分析]\n    E --&gt; I[文件管理]\n    E --&gt; J[爬虫自动化]\n    E --&gt; K[Office处理]\n\n    style E fill:#667eea\n    style F fill:#764ba2\n    style G fill:#764ba2\n    style H fill:#764ba2\n    style I fill:#764ba2\n    style J fill:#764ba2\n    style K fill:#764ba2\n</div><p><strong>核心差异:</strong></p>\n<ul>\n<li><strong>传统工具</strong>:单一功能,需要人工操作多个工具完成复杂任务</li>\n<li><strong>Claude Code</strong>:系统级 AI Agent,通过自然语言指令即可完成全流程任务</li>\n</ul>\n<hr />\n<h2 id=\"二安装与配置\">二、安装与配置</h2>\n<h3 id=\"21-前置准备\">2.1 前置准备</h3>\n<p><strong>必需工具:</strong></p>\n<table>\n<thead>\n<tr>\n<th>工具</th>\n<th>用途</th>\n<th>安装地址</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Node.js</td>\n<td>运行环境</td>\n<td><a href=\"https://nodejs.org\" rel=\"noopener nofollow\" target=\"_blank\">https://nodejs.org</a></td>\n</tr>\n<tr>\n<td>Git</td>\n<td>版本控制</td>\n<td><a href=\"https://git-scm.com\" rel=\"noopener nofollow\" target=\"_blank\">https://git-scm.com</a></td>\n</tr>\n<tr>\n<td>API Key</td>\n<td>模型服务</td>\n<td>智谱GLM/月之暗面K2/阿里Qwen等</td>\n</tr>\n</tbody>\n</table>\n<p><strong>验证安装:</strong></p>\n<pre><code class=\"language-bash\"># 检查 Node.js 版本\nnode -v\n\n# 检查 Git 版本\ngit --version\n</code></pre>\n<h3 id=\"22-安装-claude-code\">2.2 安装 Claude Code</h3>\n<p><strong>全局安装(推荐):</strong></p>\n<pre><code class=\"language-bash\">npm install -g @anthropic-ai/claude-code\n</code></pre>\n<p><strong>验证安装:</strong></p>\n<pre><code class=\"language-bash\">claude --version\n</code></pre>\n<h3 id=\"23-配置模型\">2.3 配置模型</h3>\n<p>Claude Code 支持多种模型配置方式,你可以根据自己的需求选择合适的模型。</p>\n<h4 id=\"方式一手动配置通用方式\">方式一:手动配置(通用方式)</h4>\n<p>手动配置适用于所有兼容 Anthropic API 的模型。配置方式如下:</p>\n<p><strong>Windows:</strong></p>\n<pre><code class=\"language-cmd\">setx ANTHROPIC_BASE_URL \"模型API地址\"\nsetx ANTHROPIC_AUTH_TOKEN \"你的API密钥\"\nsetx ANTHROPIC_MODEL \"模型名称\"\n</code></pre>\n<p><strong>macOS/Linux:</strong></p>\n<pre><code class=\"language-bash\">export ANTHROPIC_BASE_URL=模型API地址\nexport ANTHROPIC_AUTH_TOKEN=你的API密钥\nexport ANTHROPIC_MODEL=模型名称\n\n# 永久配置(添加到 ~/.bashrc 或 ~/.zshrc)\necho 'export ANTHROPIC_BASE_URL=模型API地址' &gt;&gt; ~/.bashrc\necho 'export ANTHROPIC_AUTH_TOKEN=你的API密钥' &gt;&gt; ~/.bashrc\necho 'export ANTHROPIC_MODEL=模型名称' &gt;&gt; ~/.bashrc\nsource ~/.bashrc\n</code></pre>\n<p><strong>常用国内模型配置示例:</strong></p>\n<table>\n<thead>\n<tr>\n<th>模型</th>\n<th>API地址</th>\n<th>模型名称</th>\n<th>获取API Key</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>智谱 GLM-4.7</strong></td>\n<td><code>https://open.bigmodel.cn/api/anthropic</code></td>\n<td><code>GLM-4.7</code></td>\n<td><a href=\"https://open.bigmodel.cn/\" rel=\"noopener nofollow\" target=\"_blank\">https://open.bigmodel.cn/</a></td>\n</tr>\n<tr>\n<td><strong>Kimi K2</strong></td>\n<td><code>https://api.moonshot.cn/v1</code></td>\n<td><code>kimi-k2</code></td>\n<td><a href=\"https://platform.moonshot.cn/console/account\" rel=\"noopener nofollow\" target=\"_blank\">https://platform.moonshot.cn/console/account</a></td>\n</tr>\n<tr>\n<td><strong>通义千问</strong></td>\n<td><code>https://dashscope.aliyuncs.com/compatible-mode/v1</code></td>\n<td><code>qwen-coder-plus</code></td>\n<td><a href=\"https://bailian.console.aliyun.com/\" rel=\"noopener nofollow\" target=\"_blank\">https://bailian.console.aliyun.com/</a></td>\n</tr>\n<tr>\n<td><strong>DeepSeek</strong></td>\n<td><code>https://api.deepseek.com/v1</code></td>\n<td><code>deepseek-coder</code></td>\n<td><a href=\"https://platform.deepseek.com/\" rel=\"noopener nofollow\" target=\"_blank\">https://platform.deepseek.com/</a></td>\n</tr>\n</tbody>\n</table>\n<p><strong>配置示例(以智谱GLM为例):</strong></p>\n<pre><code class=\"language-bash\">export ANTHROPIC_BASE_URL=https://open.bigmodel.cn/api/anthropic\nexport ANTHROPIC_AUTH_TOKEN=your_glm_api_key\nexport ANTHROPIC_MODEL=GLM-4.7\n</code></pre>\n<p><strong>注意:</strong> 配置环境变量后需要重启终端或运行 <code>source ~/.bashrc</code> 使配置生效。</p>\n<h4 id=\"方式二使用自动化助手仅适用于智谱glm\">方式二:使用自动化助手(仅适用于智谱GLM)</h4>\n<p>如果选择使用智谱GLM系列模型,还可以使用自动化配置助手:</p>\n<pre><code class=\"language-bash\">npx @z_ai/coding-helper\n</code></pre>\n<p>按照交互式提示完成配置:</p>\n<ol>\n<li>选择界面语言</li>\n<li>设置 Coding 套餐</li>\n<li>配置 API 密钥</li>\n<li>选择编码工具</li>\n</ol>\n<p>这种方式可以自动完成智谱GLM模型的配置,适合不想手动设置环境变量的用户。</p>\n<h4 id=\"国内模型对比\">国内模型对比</h4>\n<table>\n<thead>\n<tr>\n<th>模型</th>\n<th>提供商</th>\n<th>代码能力</th>\n<th>价格</th>\n<th>优势</th>\n<th>适用场景</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>GLM-4.7</strong></td>\n<td>智谱AI</td>\n<td>⭐⭐⭐⭐⭐</td>\n<td>中等</td>\n<td>中文理解强,有Coding套餐</td>\n<td>中文项目为主</td>\n</tr>\n<tr>\n<td><strong>Kimi K2</strong></td>\n<td>月之暗面</td>\n<td>⭐⭐⭐⭐⭐</td>\n<td>较低</td>\n<td>超长上下文,MoE架构</td>\n<td>大型项目重构</td>\n</tr>\n<tr>\n<td><strong>Qwen-Coder-Plus</strong></td>\n<td>阿里云</td>\n<td>⭐⭐⭐⭐⭐</td>\n<td>低</td>\n<td>开源,性能优秀</td>\n<td>Python/JS项目</td>\n</tr>\n<tr>\n<td><strong>DeepSeek-Coder</strong></td>\n<td>深度求索</td>\n<td>⭐⭐⭐⭐</td>\n<td>极低</td>\n<td>价格优势</td>\n<td>预算有限的场景</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"24-启动-claude-code\">2.4 启动 Claude Code</h3>\n<p><strong>基本启动:</strong></p>\n<pre><code class=\"language-bash\">claude\n</code></pre>\n<p><strong>危险模式(跳过权限确认):</strong></p>\n<pre><code class=\"language-bash\">claude --dangerously-skip-permissions\n</code></pre>\n<p><strong>Headless 模式(非交互式):</strong></p>\n<pre><code class=\"language-bash\">git diff | claude -p \"解释这些更改\"\n</code></pre>\n<hr />\n<h2 id=\"三核心概念详解\">三、核心概念详解</h2>\n<p>了解了 Claude Code 的安装配置后，深入了解一下它的一些核心概念。这些概念是充分发挥 Claude Code 能力的基础。</p>\n<h3 id=\"31-skills技能包\">3.1 Skills(技能包)</h3>\n<h4 id=\"什么是-skills\">什么是 Skills?</h4>\n<p><strong>Skills</strong> 是预封装的工作流,就像游戏中的\"技能包\",用完即走,不占用上下文。它是别人已经编写好的、可直接使用的功能模块。</p>\n<p><strong>官方 Skills 库:</strong> <a href=\"https://github.com/anthropics/skills\" rel=\"noopener nofollow\" target=\"_blank\">https://github.com/anthropics/skills</a> (32k+ Stars)</p>\n<h4 id=\"skills-的类型\">Skills 的类型</h4>\n<table>\n<thead>\n<tr>\n<th>类型</th>\n<th>说明</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>User Skills</strong></td>\n<td>用户自定义技能,存储在本地</td>\n<td>个人工作流自动化</td>\n</tr>\n<tr>\n<td><strong>Plugin Skills</strong></td>\n<td>插件提供的技能,随插件安装</td>\n<td>frontend-design</td>\n</tr>\n<tr>\n<td><strong>Built-in Skills</strong></td>\n<td>Claude Code 内置技能</td>\n<td>commit, review-pr</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"常用官方-skills\">常用官方 Skills</h4>\n<pre><code class=\"language-bash\"># 前端设计技能\nnpx skills-installer install @anthropics/claude-code/frontend-design --client claude-code\n\n# 文档协同技能\nnpx skills-installer install @anthropics/claude-code/doc-coauthoring --client claude-code\n\n# Canvas 设计技能\nnpx skills-installer install @anthropics/claude-code/canvas-design --client claude-code\n\n# PDF 处理技能\nnpx skills-installer install @anthropics/claude-code/pdf --client claude-code\n\n# 算法艺术生成\nnpx skills-installer install @anthropics/claude-code/algorithmic-art --client claude-code\n</code></pre>\n<h4 id=\"如何使用-skills\">如何使用 Skills</h4>\n<p><strong>查看可用 Skills:</strong></p>\n<pre><code class=\"language-bash\">claude /skills\n</code></pre>\n<p><strong>调用 Skill:</strong></p>\n<pre><code class=\"language-bash\"># 在 Claude Code 对话中\n使用 frontend-design skill 优化 https://example.com\n\n使用 pdf skill 提取 report.pdf 中的表格数据\n</code></pre>\n<h4 id=\"如何编写自己的-skills\">如何编写自己的 Skills</h4>\n<p><strong>Skill 目录结构:</strong></p>\n<pre><code>my-skill/\n├── skill.json          # Skill 元数据\n├── skill.md            # Skill 文档\n├── api/                # API 定义(可选)\n└── tools/              # 自定义工具(可选)\n</code></pre>\n<p><strong>skill.json 示例:</strong></p>\n<pre><code class=\"language-json\">{\n  \"name\": \"my-custom-skill\",\n  \"description\": \"我的自定义技能\",\n  \"version\": \"1.0.0\",\n  \"author\": \"Your Name\",\n  \"categories\": [\"automation\"],\n  \"license\": \"MIT\",\n  \"skill\": {\n    \"file\": \"skill.md\",\n    \"description\": \"这个技能用于...\"\n  }\n}\n</code></pre>\n<p><strong>skill.md 示例:</strong></p>\n<pre><code class=\"language-markdown\"># My Custom Skill\n\n这个技能帮助用户快速完成[特定任务]。\n\n## 使用场景\n\n- 场景1:描述...\n- 场景2:描述...\n\n## 使用方式\n\n用户只需要告诉你要完成什么,这个技能就会自动:\n\n1. 分析需求\n2. 执行步骤\n3. 返回结果\n\n## 注意事项\n\n- 注意事项1\n- 注意事项2\n</code></pre>\n<p><strong>安装本地 Skill:</strong></p>\n<pre><code class=\"language-bash\"># 将技能复制到 Claude Code 配置目录\ncp -r my-skill ~/.claude/skills/\n\n# 或使用安装命令\nnpx skills-installer install ./my-skill --client claude-code\n</code></pre>\n<h3 id=\"32-hooks钩子\">3.2 Hooks(钩子)</h3>\n<h4 id=\"什么是-hooks\">什么是 Hooks?</h4>\n<p><strong>Hooks</strong> 是在特定事件触发时自动执行的脚本,用于自定义工作流、拦截危险操作、自动格式化代码等。</p>\n<p><strong>核心价值:</strong></p>\n<div class=\"mermaid\">graph LR\n    A[事件触发] --&gt; B{Hook 拦截}\n    B --&gt; C[执行自定义脚本]\n    C --&gt; D[返回结果]\n    D --&gt; E[继续/阻止操作]\n\n    style B fill:#f093fb\n    style C fill:#f5576c\n</div><h4 id=\"hook-事件类型\">Hook 事件类型</h4>\n<table>\n<thead>\n<tr>\n<th>事件类型</th>\n<th>触发时机</th>\n<th>典型用途</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>user-prompt-submit</strong></td>\n<td>用户提交提示词前</td>\n<td>验证、修改提示词</td>\n</tr>\n<tr>\n<td><strong>tool-use</strong></td>\n<td>工具使用前</td>\n<td>权限检查、参数验证</td>\n</tr>\n<tr>\n<td><strong>after-tool-use</strong></td>\n<td>工具使用后</td>\n<td>日志记录、结果处理</td>\n</tr>\n<tr>\n<td><strong>permission-request</strong></td>\n<td>权限请求时</td>\n<td>拦截危险操作</td>\n</tr>\n<tr>\n<td><strong>notification</strong></td>\n<td>通知时</td>\n<td>发送告警、更新状态</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"hook-配置方式\">Hook 配置方式</h4>\n<p><strong>方式一:通过 /hooks 命令</strong></p>\n<pre><code class=\"language-bash\"># 在 Claude Code 中\n/hooks\n</code></pre>\n<p><strong>方式二:通过配置文件</strong></p>\n<p>在 <code>~/.claude/settings.json</code> 或项目 <code>.claude/settings.json</code> 中配置:</p>\n<pre><code class=\"language-json\">{\n  \"hooks\": {\n    \"user-prompt-submit-hook\": {\n      \"command\": \"npm run validate-prompt\",\n      \"enabled\": true\n    },\n    \"tool-use-hook\": {\n      \"command\": \"~/.claude/hooks/check-permission.sh\",\n      \"enabled\": true,\n      \"blocking\": true\n    },\n    \"after-tool-use-hook\": {\n      \"command\": \"echo 'Tool used: {{toolName}}' &gt;&gt; ~/.claude/hooks.log\",\n      \"enabled\": true\n    }\n  }\n}\n</code></pre>\n<h4 id=\"hook-实战示例\">Hook 实战示例</h4>\n<p><strong>拦截危险命令:</strong></p>\n<pre><code class=\"language-bash\">#!/bin/bash\n# ~/.claude/hooks/check-dangerous.sh\n\n# 读取工具调用信息\nTOOL_NAME=$(jq -r '.toolName' &lt;&lt;&lt; \"$CLAUDE_HOOK_INPUT\")\n\n# 危险操作列表\nDANGEROUS_TOOLS=(\"rm\" \"delete\" \"format\" \"shutdown\")\n\nif [[ \" ${DANGEROUS_TOOLS[@]} \" =~ \" ${TOOL_NAME} \" ]]; then\n  echo \"⚠️  警告:即将执行危险操作 - $TOOL_NAME\"\n  echo \"请确认是否继续? (yes/no)\"\n  read -r confirmation\n  if [[ \"$confirmation\" != \"yes\" ]]; then\n    exit 1  # 阻止操作\n  fi\nfi\n</code></pre>\n<p><strong>自动格式化代码:</strong></p>\n<pre><code class=\"language-json\">{\n  \"hooks\": {\n    \"after-write-hook\": {\n      \"command\": \"if [[ {{filePath}} == *.js ]]; then prettier --write {{filePath}}; fi\",\n      \"enabled\": true,\n      \"blocking\": false\n    }\n  }\n}\n</code></pre>\n<p><strong>发送通知:</strong></p>\n<pre><code class=\"language-json\">{\n  \"hooks\": {\n    \"task-complete-hook\": {\n      \"command\": \"notify-send 'Claude Code' '任务已完成'\",\n      \"enabled\": true\n    }\n  }\n}\n</code></pre>\n<p><strong>自动格式化代码(PostToolUse Hook):</strong></p>\n<p>来自创始人的实战经验 - 彻底消灭 CI 里的格式报错:</p>\n<pre><code class=\"language-json\">{\n  \"hooks\": {\n    \"after-tool-use-hook\": {\n      \"command\": \"bun run format || true\",\n      \"enabled\": true,\n      \"blocking\": false\n    }\n  }\n}\n</code></pre>\n<p><strong>工作原理:</strong></p>\n<ol>\n<li>每次 Claude 使用 <code>Write</code> 或 <code>Edit</code> 工具后自动触发</li>\n<li>运行格式化命令(这里是 <code>bun run format</code>)</li>\n<li><code>|| true</code> 确保即使格式化失败也不阻塞流程</li>\n<li>虽然 Claude 已经写得很规范,但这最后 10% 的自动化处理能彻底解决格式问题</li>\n</ol>\n<p><strong>效果:</strong></p>\n<ul>\n<li>✅ CI 中不再有格式报错</li>\n<li>✅ 代码风格始终一致</li>\n<li>✅ 无需手动运行格式化</li>\n<li>✅ Git diff 更清晰</li>\n</ul>\n<h3 id=\"33-plugins插件\">3.3 Plugins(插件)</h3>\n<h4 id=\"什么是-plugins\">什么是 Plugins?</h4>\n<p><strong>Plugins</strong> 是打包在一起的扩展集合,可以包含:</p>\n<ul>\n<li>5 个 Skills</li>\n<li>10 个斜杠命令</li>\n<li>3 个 MCP 服务器配置</li>\n<li>2 个 SubAgent 定义</li>\n<li>若干 Hooks</li>\n</ul>\n<p><strong>Plugins vs Skills:</strong></p>\n<table>\n<thead>\n<tr>\n<th>特性</th>\n<th>Skills</th>\n<th>Plugins</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>复杂度</strong></td>\n<td>简单工作流</td>\n<td>完整功能套件</td>\n</tr>\n<tr>\n<td><strong>内容</strong></td>\n<td>单一技能</td>\n<td>多种资源的集合</td>\n</tr>\n<tr>\n<td><strong>安装</strong></td>\n<td>独立安装</td>\n<td>一次性安装多个资源</td>\n</tr>\n<tr>\n<td><strong>适用场景</strong></td>\n<td>单一任务</td>\n<td>完整解决方案</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"plugin-安装与使用\">Plugin 安装与使用</h4>\n<h5 id=\"哪里获取已有-plugins\">哪里获取已有 Plugins?</h5>\n<p><strong>官方插件市场:</strong></p>\n<table>\n<thead>\n<tr>\n<th>来源</th>\n<th>地址</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>Anthropic Skills</strong></td>\n<td><a href=\"https://github.com/anthropics/skills\" rel=\"noopener nofollow\" target=\"_blank\">https://github.com/anthropics/skills</a></td>\n<td>官方Skills库,包含多个插件</td>\n</tr>\n<tr>\n<td><strong>Claude Code Marketplace</strong></td>\n<td><a href=\"https://claudecodemarketplaces.com\" rel=\"noopener nofollow\" target=\"_blank\">https://claudecodemarketplaces.com</a></td>\n<td>插件市场目录</td>\n</tr>\n<tr>\n<td><strong>Awesome Claude Code</strong></td>\n<td><a href=\"https://awesomeclaude.ai/plugins\" rel=\"noopener nofollow\" target=\"_blank\">https://awesomeclaude.ai/plugins</a></td>\n<td>社区插件精选</td>\n</tr>\n</tbody>\n</table>\n<p><strong>添加插件市场:</strong></p>\n<pre><code class=\"language-bash\"># 添加官方Anthropic插件市场\nclaude /plugin marketplace add anthropics/skills\n\n# 添加本地插件市场\nclaude /plugin marketplace add ~/my-marketplace\n\n# 浏览可用插件\nclaude /plugin\n# 选择 \"Browse Plugins\" 查看完整列表\n</code></pre>\n<p><strong>常用官方插件:</strong></p>\n<pre><code class=\"language-bash\"># 文档处理插件套件\nclaude /plugin marketplace add anthropics/skills\nclaude /plugin install document-skills\n\n# 前端开发插件\nclaude /plugin install frontend-design\n\n# Git工作流插件\nclaude /plugin install git-workflow\n</code></pre>\n<h5 id=\"安装-plugin\">安装 Plugin</h5>\n<p><strong>从市场安装:</strong></p>\n<pre><code class=\"language-bash\">claude plugin install &lt;plugin-name&gt;\n</code></pre>\n<p><strong>从本地安装:</strong></p>\n<pre><code class=\"language-bash\"># 安装本地插件\nclaude plugin install ./my-plugin\n\n# 或使用完整路径\nclaude plugin install /path/to/my-plugin\n</code></pre>\n<p><strong>从GitHub安装:</strong></p>\n<pre><code class=\"language-bash\"># 直接从GitHub仓库安装\nclaude plugin install github:user/repo\n</code></pre>\n<h5 id=\"查看-plugins\">查看 Plugins</h5>\n<p><strong>查看已安装 Plugins:</strong></p>\n<pre><code class=\"language-bash\">claude /plugin\n</code></pre>\n<p><strong>浏览可用插件:</strong></p>\n<pre><code class=\"language-bash\"># 在Claude Code中输入\n/plugin\n# 选择 \"Browse Plugins\"\n</code></pre>\n<p><strong>卸载 Plugin:</strong></p>\n<pre><code class=\"language-bash\">claude plugin uninstall &lt;plugin-name&gt;\n</code></pre>\n<p><strong>创建自定义 Plugin:</strong></p>\n<pre><code>my-plugin/\n├── plugin.json           # Plugin 配置\n├── skills/              # Skills 目录\n│   ├── skill1/\n│   └── skill2/\n├── commands/            # 自定义斜杠命令\n│   └── my-command.md\n├── mcp/                 # MCP 配置\n│   └── mcp-config.json\n├── agents/              # SubAgent 定义\n│   └── agent1.json\n└── hooks/               # Hook 脚本\n    └── hook1.sh\n</code></pre>\n<p><strong>plugin.json 示例:</strong></p>\n<pre><code class=\"language-json\">{\n  \"name\": \"my-plugin\",\n  \"version\": \"1.0.0\",\n  \"description\": \"我的自定义插件\",\n  \"author\": \"Your Name\",\n  \"skills\": [\n    \"skills/skill1\",\n    \"skills/skill2\"\n  ],\n  \"commands\": [\n    {\n      \"name\": \"/my-command\",\n      \"description\": \"我的自定义命令\",\n      \"file\": \"commands/my-command.md\"\n    }\n  ],\n  \"mcpServers\": [\n    {\n      \"name\": \"my-mcp\",\n      \"config\": \"mcp/mcp-config.json\"\n    }\n  ],\n  \"agents\": [\n    {\n      \"name\": \"my-agent\",\n      \"config\": \"agents/agent1.json\"\n    }\n  ]\n}\n</code></pre>\n<h3 id=\"34-mcp-servers模型上下文协议服务器\">3.4 MCP Servers(模型上下文协议服务器)</h3>\n<h4 id=\"什么是-mcp\">什么是 MCP?</h4>\n<p><strong>MCP (Model Context Protocol)</strong> 是 AI 的扩展接口标准,通过添加 MCP 服务器可以扩展 Claude Code 获取外部工具、资源、服务的能力。</p>\n<p><strong>核心概念:</strong></p>\n<div class=\"mermaid\">graph LR\n    A[Claude Code] --&gt; B[MCP Client]\n    B --&gt; C[MCP Server 1]\n    B --&gt; D[MCP Server 2]\n    B --&gt; E[MCP Server N]\n\n    C --&gt; F[GitHub API]\n    D --&gt; G[Database]\n    E --&gt; H[Browser]\n\n    style A fill:#667eea\n    style B fill:#764ba2\n    style C fill:#f093fb\n    style D fill:#f093fb\n    style E fill:#f093fb\n</div><h4 id=\"常用-mcp-服务器\">常用 MCP 服务器</h4>\n<table>\n<thead>\n<tr>\n<th>MCP Server</th>\n<th>功能</th>\n<th>Star 数</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>chrome-devtools-mcp</strong></td>\n<td>浏览器自动化,26个工具</td>\n<td>18.5k</td>\n</tr>\n<tr>\n<td><strong>github-mcp</strong></td>\n<td>GitHub API 集成</td>\n<td>10k+</td>\n</tr>\n<tr>\n<td><strong>postgres-mcp</strong></td>\n<td>PostgreSQL 数据库操作</td>\n<td>5k+</td>\n</tr>\n<tr>\n<td><strong>filesystem-mcp</strong></td>\n<td>增强文件系统操作</td>\n<td>3k+</td>\n</tr>\n<tr>\n<td><strong>web-search-mcp</strong></td>\n<td>网络搜索功能</td>\n<td>2k+</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"mcp-安装方式\">MCP 安装方式</h4>\n<p><strong>方式一:命令行安装</strong></p>\n<pre><code class=\"language-bash\">claude mcp add chrome-devtools npx chrome-devtools-mcp@latest\n</code></pre>\n<p><strong>方式二:配置文件安装</strong></p>\n<p>编辑 <code>~/.claude/mcp.json</code>:</p>\n<pre><code class=\"language-json\">{\n  \"mcpServers\": {\n    \"chrome-devtools\": {\n      \"command\": \"npx\",\n      \"args\": [\"chrome-devtools-mcp@latest\"],\n      \"disabled\": false\n    },\n    \"github\": {\n      \"command\": \"npx\",\n      \"args\": [\"-y\", \"@modelcontextprotocol/server-github\"],\n      \"env\": {\n        \"GITHUB_TOKEN\": \"your_github_token_here\"\n      }\n    },\n    \"postgres\": {\n      \"command\": \"npx\",\n      \"args\": [\"-y\", \"@modelcontextprotocol/server-postgres\"],\n      \"env\": {\n        \"POSTGRES_CONNECTION_STRING\": \"postgresql://user:password@localhost:5432/db\"\n      }\n    }\n  }\n}\n</code></pre>\n<p><strong>验证安装:</strong></p>\n<pre><code class=\"language-bash\"># 在 Claude Code 中\n/mcp\n\n# 或通过命令行\nclaude mcp list\nclaude mcp test chrome-devtools\n</code></pre>\n<h4 id=\"chrome-devtools-mcp-实战\">Chrome DevTools MCP 实战</h4>\n<p><strong>安装:</strong></p>\n<pre><code class=\"language-bash\">claude mcp add chrome-devtools npx chrome-devtools-mcp@latest\n</code></pre>\n<p><strong>使用示例:</strong></p>\n<pre><code class=\"language-bash\"># 在 Claude Code 中\n用Chrome浏览器打开 https://example.com,然后通过 chrome devtools mcp 完成以下任务:\n1. 截取页面截图\n2. 提取所有链接\n3. 分析页面结构\n4. 获取页面性能数据\n</code></pre>\n<p><strong>26个内置工具包括:</strong></p>\n<ul>\n<li><code>chrome_navigate</code>: 导航到指定 URL</li>\n<li><code>chrome_screenshot</code>: 截取页面截图</li>\n<li><code>chrome_click</code>: 点击元素</li>\n<li><code>chrome_fill</code>: 填写表单</li>\n<li><code>chrome_select</code>: 选择元素</li>\n<li><code>chrome_evaluate</code>: 执行 JavaScript</li>\n<li>等等...</li>\n</ul>\n<h3 id=\"35-subagents子代理\">3.5 Subagents(子代理)</h3>\n<h4 id=\"什么是-subagents\">什么是 Subagents?</h4>\n<p><strong>Subagents</strong> 是可以并行处理任务的独立 AI 代理,每个子代理拥有独立的 200K 上下文窗口,可以分配不同任务以提高效率。</p>\n<p><strong>核心理念：</strong> 把常用工作流看作自动化运行的\"子智能体\",就像圣诞老人分派任务给精灵一样,每个子智能体专注于特定领域。</p>\n<p><strong>核心优势:</strong></p>\n<div class=\"mermaid\">graph TB\n    A[主代理 Claude Code] --&gt; B[子代理1: 代码审查]\n    A --&gt; C[子代理2: 测试编写]\n    A --&gt; D[子代理3: 文档生成]\n    A --&gt; E[子代理4: 性能优化]\n\n    B --&gt; F[并行处理]\n    C --&gt; F\n    D --&gt; F\n    E --&gt; F\n\n    F --&gt; G[结果汇总]\n\n    style A fill:#667eea\n    style B fill:#f093fb\n    style C fill:#f093fb\n    style D fill:#f093fb\n    style E fill:#f093fb\n    style G fill:#764ba2\n</div><h4 id=\"subagent-配置\">Subagent 配置</h4>\n<p><strong>方式一:通过 /agents 命令</strong></p>\n<pre><code class=\"language-bash\">claude /agents\n</code></pre>\n<p><strong>方式二:配置文件</strong></p>\n<p>在 <code>~/.claude/agents.json</code> 或项目 <code>.claude/agents.json</code> 中配置:</p>\n<pre><code class=\"language-json\">{\n  \"agents\": {\n    \"code-reviewer\": {\n      \"description\": \"专门负责代码审查的子代理\",\n      \"model\": \"claude-opus-4-5\",\n      \"instructions\": \"你是一个专业的代码审查专家,专注于检查代码质量、安全漏洞和性能问题。\",\n      \"tools\": [\"read\", \"search\", \"git\"],\n      \"permissions\": {\n        \"allowWrite\": false\n      }\n    },\n    \"test-writer\": {\n      \"description\": \"专门负责编写测试的子代理\",\n      \"model\": \"claude-sonnet-4-5\",\n      \"instructions\": \"你是一个测试工程师,专注于编写全面的单元测试和集成测试。\",\n      \"tools\": [\"read\", \"write\", \"bash\"]\n    },\n    \"doc-generator\": {\n      \"description\": \"专门负责生成文档的子代理\",\n      \"model\": \"claude-sonnet-4-5\",\n      \"instructions\": \"你是一个技术文档专家,专注于生成清晰、准确的技术文档。\",\n      \"tools\": [\"read\", \"write\"]\n    }\n  }\n}\n</code></pre>\n<h4 id=\"subagent-使用示例\">Subagent 使用示例</h4>\n<p><strong>场景:完成一个功能开发</strong></p>\n<pre><code class=\"language-bash\"># 主任务\n我需要完成用户认证功能,请帮我:\n\n1. 使用 code-reviewer agent 审查现有认证代码\n2. 使用 test-writer agent 编写测试用例\n3. 使用 doc-generator agent 更新 API 文档\n\n这三个任务并行执行\n</code></pre>\n<p><strong>Claude Code 会自动:</strong></p>\n<ol>\n<li>创建三个独立的子代理</li>\n<li>分配各自的上下文(200K × 3)</li>\n<li>并行执行任务</li>\n<li>汇总结果返回</li>\n</ol>\n<h4 id=\"实战子代理案例\">实战子代理案例</h4>\n<p>来自 Claude Code 创始人 Boris Cherny 的实际使用案例:</p>\n<p><strong>code-simplifier:</strong></p>\n<pre><code class=\"language-markdown\"># .claude/agents/code-simplifier.md\n\n你是一个代码精简专家。在 Claude 完成工作后,你的任务是:\n1. 分析代码的复杂度和可读性\n2. 识别可以简化的逻辑\n3. 提供优化建议但保持功能不变\n4. 优先考虑性能和可维护性\n</code></pre>\n<p><strong>verify-app:</strong></p>\n<pre><code class=\"language-markdown\"># .claude/agents/verify-app.md\n\n你是一个端到端测试专家。你的任务是验证应用功能:\n1. 运行完整的测试套件\n2. 检查所有关键路径\n3. 验证边界情况\n4. 确保用户体验\"感觉对劲\"\n5. 如果发现问题,提供详细的修复步骤\n</code></pre>\n<p><strong>使用方式:</strong></p>\n<pre><code class=\"language-bash\"># 在 Claude Code 中\n使用 code-simplifier agent 优化刚才写的代码\n\n使用 verify-app agent 验证应用是否正常工作\n</code></pre>\n<h3 id=\"36-claudemd项目记忆文件\">3.6 CLAUDE.md(项目记忆文件)</h3>\n<h4 id=\"什么是-claudemd\">什么是 CLAUDE.md?</h4>\n<p><strong>CLAUDE.md</strong> 是 Claude Code 的\"项目记忆文件\",记录项目结构、构建命令、代码规范、架构决策等信息,让 Claude Code 快速理解项目上下文。</p>\n<h4 id=\"claudemd-的作用\">CLAUDE.md 的作用</h4>\n<table>\n<thead>\n<tr>\n<th>作用</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>📚 <strong>项目知识库</strong></td>\n<td>记录项目架构、技术栈、依赖关系</td>\n</tr>\n<tr>\n<td>🚀 <strong>快速启动</strong></td>\n<td>自动读取,无需重复解释项目背景</td>\n</tr>\n<tr>\n<td>🤝 <strong>团队协作</strong></td>\n<td>共享项目规范,确保团队理解一致</td>\n</tr>\n<tr>\n<td>🔄 <strong>持续迭代</strong></td>\n<td>随项目演进自动更新</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"claudemd-最佳位置\">CLAUDE.md 最佳位置</h4>\n<div class=\"mermaid\">graph TD\n    A[项目根目录_CLAUDE.md]\n    B[src_.claude_CLAUDE.md]\n    C[.claude_rules_auth.md]\n    D[home_.claude_CLAUDE.md]\n\n    A --&gt; E[全局项目配置]\n    B --&gt; F[模块级配置]\n    C --&gt; G[特定规则]\n    D --&gt; H[用户级配置]\n\n    style A fill:#667eea\n    style B fill:#764ba2\n    style C fill:#f093fb\n    style D fill:#f5576c\n    style E fill:#667eea\n    style F fill:#764ba2\n    style G fill:#f093fb\n    style H fill:#f5576c\n</div><p><strong>优先级:</strong> 特定规则 &gt; 模块配置 &gt; 项目配置 &gt; 用户配置</p>\n<h4 id=\"claudemd-示例\">CLAUDE.md 示例</h4>\n<p><strong>完整示例:</strong></p>\n<pre><code class=\"language-markdown\"># 项目名称: E-Commerce Platform\n\n## 项目概述\n这是一个基于 Node.js + React 的电商平台,支持商品管理、订单处理、支付集成等功能。\n\n## 技术栈\n- **前端:** React 18, TypeScript, Tailwind CSS, Redux Toolkit\n- **后端:** Node.js 20, Express, TypeScript\n- **数据库:** PostgreSQL 15, Redis 7\n- **认证:** JWT, OAuth 2.0\n- **测试:** Jest, Playwright\n- **部署:** Docker, Kubernetes\n\n## 项目结构\n\\`\\`\\`\nsrc/\n├── frontend/          # React 前端\n│   ├── components/    # 可复用组件\n│   ├── pages/         # 页面组件\n│   ├── store/         # Redux store\n│   └── utils/         # 工具函数\n├── backend/           # Node.js 后端\n│   ├── controllers/   # 控制器\n│   ├── services/      # 业务逻辑\n│   ├── models/        # 数据模型\n│   └── routes/        # API 路由\n└── shared/            # 共享代码\n    └── types/         # TypeScript 类型定义\n\\`\\`\\`\n\n## 常用命令\n\n### 开发环境\n\\`\\`\\`bash\n# 安装依赖\nnpm install\n\n# 启动前端开发服务器\nnpm run dev:frontend\n\n# 启动后端开发服务器\nnpm run dev:backend\n\n# 同时启动前后端\nnpm run dev\n\\`\\`\\`\n\n### 构建与部署\n\\`\\`\\`bash\n# 构建前端\nnpm run build:frontend\n\n# 构建后端\nnpm run build:backend\n\n# 构建所有\nnpm run build\n\n# Docker 构建\ndocker-compose build\ndocker-compose up\n\\`\\`\\`\n\n### 测试\n\\`\\`\\`bash\n# 运行所有测试\nnpm test\n\n# 前端单元测试\nnpm run test:frontend\n\n# 后端单元测试\nnpm run test:backend\n\n# E2E 测试\nnpm run test:e2e\n\n# 测试覆盖率\nnpm run test:coverage\n\\`\\`\\`\n\n### 代码质量\n\\`\\`\\`bash\n# 代码格式化\nnpm run format\n\n# 代码检查\nnpm run lint\n\n# 类型检查\nnpm run type-check\n\\`\\`\\`\n\n## 代码规范\n\n### 命名规范\n- **文件名:** kebab-case (user-profile.ts)\n- **组件名:** PascalCase (UserProfile)\n- **函数/变量:** camelCase (getUserProfile)\n- **常量:** UPPER_SNAKE_CASE (API_BASE_URL)\n- **类型/接口:** PascalCase (UserProfile)\n\n### Git 提交规范\n遵循 Conventional Commits:\n- \\`feat: 新功能\\`\n- \\`fix: 修复 bug\\`\n- \\`docs: 文档更新\\`\n- \\`style: 代码格式调整\\`\n- \\`refactor: 代码重构\\`\n- \\`test: 测试相关\\`\n- \\`chore: 构建/工具链更新\\`\n\n### 代码审查清单\n- [ ] 代码符合项目命名规范\n- [ ] 添加了必要的注释\n- [ ] 更新了相关文档\n- [ ] 编写了/更新了测试\n- [ ] 通过了所有测试\n- [ ] 通过了 lint 检查\n- [ ] 没有引入安全漏洞\n\n## 架构决策\n\n### ADR-001: 选择 TypeScript 而非 JavaScript\n**日期:** 2024-01-15\n**状态:** 已接受\n**理由:**\n- 类型安全减少运行时错误\n- 更好的 IDE 支持\n- 代码可维护性更高\n\n### ADR-002: 采用微服务架构\n**日期:** 2024-02-20\n**状态:** 已接受\n**理由:**\n- 便于团队并行开发\n- 独立部署和扩展\n- 技术栈灵活性\n\n## 环境变量\n\n### 必需变量\n\\`\\`\\`bash\nDATABASE_URL=postgresql://...\nREDIS_URL=redis://...\nJWT_SECRET=your-secret-key\nAPI_BASE_URL=https://api.example.com\n\\`\\`\\`\n\n### 可选变量\n\\`\\`\\`bash\nLOG_LEVEL=info\nNODE_ENV=development\nPORT=3000\n\\`\\`\\`\n\n## 常见问题\n\n### Q: 如何添加新的 API 端点?\nA:\n1. 在 \\`backend/routes/\\` 创建路由文件\n2. 在 \\`backend/controllers/\\` 创建控制器\n3. 在 \\`backend/services/\\` 实现业务逻辑\n4. 添加测试用例\n5. 更新 API 文档\n\n### Q: 如何调试前端状态管理问题?\nA:\n1. 使用 Redux DevTools 浏览器扩展\n2. 在 \\`src/frontend/store/\\` 添加日志\n3. 检查 action 和 reducer 逻辑\n\n## 重要注意事项\n\n1. **安全:** 永远不要在代码中硬编码密钥或敏感信息\n2. **性能:** 大数据查询必须使用分页\n3. **测试:** 所有新功能必须包含测试\n4. **文档:** API 变更必须更新文档\n5. **兼容性:** 确保向后兼容,使用版本控制\n\n## 相关资源\n- [项目 Wiki](https://wiki.example.com)\n- [API 文档](https://docs.example.com)\n- [设计规范](https://design.example.com)\n</code></pre>\n<h4 id=\"生成-claudemd-的方式\">生成 CLAUDE.md 的方式</h4>\n<p><strong>方式一:使用 /init 命令</strong></p>\n<pre><code class=\"language-bash\"># 在项目根目录\nclaude /init\n</code></pre>\n<p>Claude Code 会自动扫描项目并生成初始 CLAUDE.md,包含:</p>\n<ul>\n<li>构建和测试命令</li>\n<li>目录结构说明</li>\n<li>代码规范和架构决策</li>\n<li>技术栈信息</li>\n</ul>\n<p><strong>方式二:手动创建</strong></p>\n<pre><code class=\"language-bash\"># 创建基础文件\ntouch CLAUDE.md\n\n# 让 Claude Code 帮助生成\nclaude \"请根据当前项目结构生成 CLAUDE.md 文件\"\n</code></pre>\n<p><strong>方式三:模块化规则</strong></p>\n<pre><code class=\"language-bash\"># 在 .claude/rules/ 目录创建多个规则文件\n.claude/rules/\n├── auth.md          # 认证相关规则\n├── database.md      # 数据库相关规则\n├── api.md           # API 设计规范\n└── testing.md       # 测试规范\n</code></pre>\n<p><strong>方式四:Memory Updates - 动态更新记忆</strong></p>\n<pre><code class=\"language-bash\"># 直接告诉 Claude 更新知识\nUpdate CLAUDE.md: always use bun instead of npm\nUpdate CLAUDE.md: 不要使用 enum,改用 string union\n\n# Claude 会自动把新知识写入记忆文件,无需手动编辑\n</code></pre>\n<h4 id=\"claudemd-的-ai-进化机制\">CLAUDE.md 的 AI 进化机制</h4>\n<p>来自 Claude Code 创始人团队的实战经验:</p>\n<p><strong>核心理念:</strong> 让 Claude 在 Code Review 中自我迭代,越用越聪明</p>\n<p><strong>实战流程:</strong></p>\n<ol>\n<li><strong>在 PR 中发现问题</strong></li>\n</ol>\n<pre><code class=\"language-bash\"># 在 GitHub PR 评论中\n@claude 这里的代码使用了 enum,但我们项目规范要求使用 string union,请修复\n</code></pre>\n<ol start=\"2\">\n<li><strong>让 Claude 记住教训</strong></li>\n</ol>\n<pre><code class=\"language-bash\"># 在 PR 中直接告诉 Claude\n@claude 请把这次的教训写入 CLAUDE.md:不要使用 enum,改用 string union\n</code></pre>\n<ol start=\"3\">\n<li><strong>Claude 自动更新</strong></li>\n</ol>\n<pre><code class=\"language-markdown\"># Claude 会在 CLAUDE.md 中添加\n## 代码规范更新 (2026-01-03)\n\n### Enum vs String Union\n- ❌ 不要使用 enum\n- ✅ 改用 string union\n- 理由:更好的类型推断和 Tree-shaking\n</code></pre>\n<ol start=\"4\">\n<li><strong>团队共同维护</strong></li>\n</ol>\n<pre><code class=\"language-bash\"># 将 CLAUDE.md 签入 Git\ngit add CLAUDE.md\ngit commit -m \"docs: 更新 CLAUDE.md 规范\"\n\n# 整个团队共享这份\"行为准则\"\n</code></pre>\n<p><strong>价值体现:</strong></p>\n<ul>\n<li>🧠 <strong>集体智慧:</strong> 每个团队成员的反馈都让 AI 更聪明</li>\n<li>🔄 <strong>持续进化:</strong> Claude 不会重复犯同样的错误</li>\n<li>📚 <strong>知识沉淀:</strong> 项目规范自动文档化</li>\n<li>🤝 <strong>团队协作:</strong> 统一的 AI 助手理解团队偏好</li>\n</ul>\n<p><strong>实际案例:</strong></p>\n<pre><code class=\"language-markdown\"># CLAUDE.md - 实际演进示例\n\n## 初始版本 (第1周)\n- 使用 TypeScript\n- 测试覆盖率 &gt; 80%\n\n## 第1次更新 (第2周 - PR反馈)\n+ 永远使用 bun 而不是 npm\n+ 理由:启动速度快 10 倍\n\n## 第2次更新 (第3周 - PR反馈)\n+ 不要使用 enum,改用 string union\n+ 理由:更好的类型推断\n\n## 第3次更新 (第4周 - PR反馈)\n+ 所有 API 必须添加错误处理\n+ 使用 try-catch 包装所有 async 函数\n</code></pre>\n<hr />\n<h2 id=\"四高级功能\">四、高级功能</h2>\n<p>实际上CC还有一些高级功能，这些功能将帮助更高效地完成复杂任务。</p>\n<h3 id=\"41-plan-模式规划模式\">4.1 Plan 模式(规划模式)</h3>\n<h4 id=\"什么是-plan-模式\">什么是 Plan 模式?</h4>\n<p><strong>Plan 模式</strong>是一种\"先规划、后执行\"的工作模式,Claude 会先分析项目架构、依赖关系并起草实现方案,确认后才开始编写代码。</p>\n<p><strong>Anthropic 开发者关系负责人 Ado Kukic 有 90% 的时间都在使用这个模式。</strong></p>\n<p><strong>核心价值:</strong> 在这个模式下,Claude 会阅读代码、分析架构、<strong>起草计划</strong>,但<strong>绝不修改代码</strong>。直到你批准计划,它才会动手。你是架构师,它是执行者。</p>\n<p><strong>核心价值:</strong></p>\n<div class=\"mermaid\">graph LR\n    A[接收任务] --&gt; B[分析项目]\n    B --&gt; C[探索代码库]\n    C --&gt; D[设计方案]\n    D --&gt; E{用户确认?}\n    E --&gt;|是| F[执行实现]\n    E --&gt;|否| G[调整方案]\n    G --&gt; D\n    F --&gt; H[完成任务]\n\n    style B fill:#667eea\n    style C fill:#764ba2\n    style D fill:#f093fb\n    style E fill:#f5576c\n    style F fill:#4facfe\n</div><h4 id=\"进入-plan-模式\">进入 Plan 模式</h4>\n<p><strong>快捷键:</strong></p>\n<pre><code class=\"language-bash\"># 按两次 Shift+Tab\nShift+Tab, Shift+Tab\n</code></pre>\n<p><strong>命令方式:</strong></p>\n<pre><code class=\"language-bash\">/plan\n</code></pre>\n<h4 id=\"plan-模式工作流程\">Plan 模式工作流程</h4>\n<p><strong>1. 探索阶段</strong></p>\n<ul>\n<li>读取相关文件</li>\n<li>分析代码结构</li>\n<li>理解依赖关系</li>\n</ul>\n<p><strong>2. 规划阶段</strong></p>\n<ul>\n<li>设计实现方案</li>\n<li>列出具体步骤</li>\n<li>识别潜在风险</li>\n</ul>\n<p><strong>3. 确认阶段</strong></p>\n<ul>\n<li>展示完整计划</li>\n<li>等待用户反馈</li>\n<li>根据反馈调整</li>\n</ul>\n<p><strong>4. 执行阶段</strong></p>\n<ul>\n<li>按计划实施</li>\n<li>实时反馈进度</li>\n<li>处理异常情况</li>\n</ul>\n<h4 id=\"plan-模式最佳实践\">Plan 模式最佳实践</h4>\n<p><strong>适合场景:</strong></p>\n<ul>\n<li>✅ 复杂功能开发(多文件、多步骤)</li>\n<li>✅ 架构重构</li>\n<li>✅ 性能优化</li>\n<li>✅ 代码迁移</li>\n<li>✅ 不熟悉的项目</li>\n</ul>\n<p><strong>不适合场景:</strong></p>\n<ul>\n<li>❌ 简单 bug 修复</li>\n<li>❌ 单行代码修改</li>\n<li>❌ 文档查询</li>\n<li>❌ 快速原型验证</li>\n</ul>\n<p><strong>使用技巧:</strong></p>\n<pre><code class=\"language-bash\"># 启用 Plan 模式\nShift+Tab × 2\n\n# 明确任务需求\n请帮我实现用户认证功能,包括:\n1. 用户注册\n2. 用户登录\n3. JWT token 验证\n4. 密码加密存储\n\n# Claude 会先探索并规划:\n# Plan: 实现用户认证功能\n#\n# 1. 分析现有代码结构\n# 2. 设计认证流程\n# 3. 创建数据模型\n# 4. 实现 API 端点\n# 5. 添加中间件\n# 6. 编写测试\n#\n# 确认后开始执行? (yes/no)\n\n# 确认后开始实施\nyes\n</code></pre>\n<h3 id=\"42-sandbox-模式沙箱模式\">4.2 Sandbox 模式(沙箱模式)</h3>\n<h4 id=\"什么是-sandbox-模式\">什么是 Sandbox 模式?</h4>\n<p><strong>Sandbox 模式</strong>通过定义允许的操作范围,拦截危险操作,提高安全性。</p>\n<p><strong>核心机制:</strong></p>\n<div class=\"mermaid\">graph TB\n    A[操作请求] --&gt; B{Sandbox 规则检查}\n    B --&gt;|允许| C[执行操作]\n    B --&gt;|拒绝| D[拦截并警告]\n    B --&gt;|需要确认| E[询问用户]\n\n    E --&gt;|允许| C\n    E --&gt;|拒绝| D\n\n    style B fill:#667eea\n    style C fill:#4facfe\n    style D fill:#f5576c\n    style E fill:#f093fb\n</div><h4 id=\"配置-sandbox-模式\">配置 Sandbox 模式</h4>\n<p><strong>方式一:通过 /permissions 命令</strong></p>\n<pre><code class=\"language-bash\">claude /permissions\n</code></pre>\n<p><strong>方式二:配置文件</strong></p>\n<p>编辑 <code>~/.claude/settings.json</code>:</p>\n<pre><code class=\"language-json\">{\n  \"permissions\": {\n    \"allow\": {\n      \"bash\": [\n        \"npm install\",\n        \"npm test\",\n        \"npm run build\",\n        \"git *\",\n        \"node -v\",\n        \"npm -v\"\n      ],\n      \"write\": [\n        \"src/**/*\",\n        \"tests/**/*\",\n        \"*.md\"\n      ],\n      \"read\": [\n        \"**/*\"\n      ]\n    },\n    \"deny\": {\n      \"bash\": [\n        \"rm -rf *\",\n        \"format *\",\n        \"shutdown\",\n        \"reboot\"\n      ],\n      \"write\": [\n        \"node_modules/**/*\",\n        \".git/**/*\",\n        \"/etc/*\",\n        \"/usr/*\"\n      ]\n    }\n  }\n}\n</code></pre>\n<h4 id=\"sandbox-最佳实践\">Sandbox 最佳实践</h4>\n<p><strong>最小权限原则:</strong></p>\n<pre><code class=\"language-json\">{\n  \"permissions\": {\n    \"allow\": {\n      \"bash\": [\"npm test\", \"npm run build\"],\n      \"write\": [\"src/**/*\", \"tests/**/*\"]\n    }\n  }\n}\n</code></pre>\n<p><strong>特定项目配置:</strong></p>\n<pre><code class=\"language-json\">// .claude/settings.json (项目级)\n{\n  \"permissions\": {\n    \"allow\": {\n      \"bash\": [\n        \"npm run dev:*\",\n        \"npm run test:*\",\n        \"npm run build:*\"\n      ],\n      \"write\": [\"src/**/*\", \"tests/**/*\", \"docs/**/*\"]\n    },\n    \"deny\": {\n      \"write\": [\"dist/**/*\", \"build/**/*\"]\n    }\n  }\n}\n</code></pre>\n<h3 id=\"43-headless-模式无头模式\">4.3 Headless 模式(无头模式)</h3>\n<h4 id=\"什么是-headless-模式\">什么是 Headless 模式?</h4>\n<p><strong>Headless 模式</strong>是非交互式运行方式,输出结果直接流向标准输出,可集成到 Shell 脚本或 CI/CD 流程中。</p>\n<p><strong>使用场景:</strong></p>\n<table>\n<thead>\n<tr>\n<th>场景</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>🔄 <strong>CI/CD 集成</strong></td>\n<td>自动化代码审查</td>\n</tr>\n<tr>\n<td>📜 <strong>脚本自动化</strong></td>\n<td>批量处理任务</td>\n</tr>\n<tr>\n<td>🔍 <strong>快速分析</strong></td>\n<td>不需要交互的代码分析</td>\n</tr>\n<tr>\n<td>📊 <strong>报告生成</strong></td>\n<td>自动生成文档</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"headless-模式使用\">Headless 模式使用</h4>\n<p><strong>基本用法:</strong></p>\n<pre><code class=\"language-bash\"># 从管道输入\ngit diff | claude -p \"解释这些更改\"\n\n# 从文件输入\ncat file.txt | claude -p \"总结这个文件\"\n\n# 直接指定\nclaude -p \"检查代码质量\" &lt; src/main.js\n</code></pre>\n<p><strong>CI/CD 集成示例:</strong></p>\n<pre><code class=\"language-yaml\"># .github/workflows/claude-review.yml\nname: Claude Code Review\n\non:\n  pull_request:\n    types: [opened, synchronize]\n\njobs:\n  review:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Setup Node.js\n        uses: actions/setup-node@v3\n        with:\n          node-version: '20'\n\n      - name: Install Claude Code\n        run: npm install -g @anthropic-ai/claude-code\n\n      - name: Run Code Review\n        run: |\n          git diff origin/main...HEAD | claude -p \"审查这个 PR 的代码变更\" &gt; review.txt\n\n      - name: Comment PR\n        uses: actions/github-script@v6\n        with:\n          script: |\n            const fs = require('fs');\n            const review = fs.readFileSync('review.txt', 'utf8');\n            github.rest.issues.createComment({\n              issue_number: context.issue.number,\n              owner: context.repo.owner,\n              repo: context.repo.repo,\n              body: review\n            });\n</code></pre>\n<p><strong>脚本自动化示例:</strong></p>\n<pre><code class=\"language-bash\">#!/bin/bash\n# batch-process.sh\n\nfor file in src/**/*.js; do\n  echo \"Processing $file...\"\n\n  # 使用 Claude Code 分析代码\n  claude -p \"检查文件 $file 的代码质量,包括:\n  1. 潜在的 bug\n  2. 性能问题\n  3. 安全漏洞\n  4. 代码规范违规\" &lt; \"$file\" &gt; \"reports/$(basename $file).md\"\n\n  echo \"✓ Completed $file\"\ndone\n\necho \"All files processed!\"\n</code></pre>\n<h3 id=\"44-vim-模式\">4.4 Vim 模式</h3>\n<h4 id=\"启用-vim-模式\">启用 Vim 模式</h4>\n<pre><code class=\"language-bash\">/vim\n</code></pre>\n<h4 id=\"vim-常用快捷键\">Vim 常用快捷键</h4>\n<table>\n<thead>\n<tr>\n<th>快捷键</th>\n<th>功能</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>h</code></td>\n<td>左移光标</td>\n</tr>\n<tr>\n<td><code>j</code></td>\n<td>下移光标</td>\n</tr>\n<tr>\n<td><code>k</code></td>\n<td>上移光标</td>\n</tr>\n<tr>\n<td><code>l</code></td>\n<td>右移光标</td>\n</tr>\n<tr>\n<td><code>ciw</code></td>\n<td>修改单词</td>\n</tr>\n<tr>\n<td><code>dd</code></td>\n<td>删除行</td>\n</tr>\n<tr>\n<td><code>yy</code></td>\n<td>复制行</td>\n</tr>\n<tr>\n<td><code>p</code></td>\n<td>粘贴</td>\n</tr>\n<tr>\n<td><code>u</code></td>\n<td>撤销</td>\n</tr>\n<tr>\n<td><code>Ctrl+r</code></td>\n<td>重做</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"45-slash-commands自定义命令\">4.5 Slash Commands(自定义命令)</h3>\n<h4 id=\"什么是-slash-commands\">什么是 Slash Commands?</h4>\n<p><strong>Slash Commands</strong> 是将高频工作流封装成可复用的斜杠命令,将复杂的\"人机对话\"变成简单的\"命令行指令\"。</p>\n<p>来自 Claude Code 创始人的实战经验:为了避免重复输入相同的 Prompt,他将高频工作流封装成了 Slash Commands。</p>\n<h4 id=\"创建自定义命令\">创建自定义命令</h4>\n<p><strong>方式一:通过 /commands 命令</strong></p>\n<pre><code class=\"language-bash\">claude /commands\n# 选择 \"Create new command\"\n</code></pre>\n<p><strong>方式二:手动创建</strong></p>\n<p>在 <code>.claude/commands/</code> 目录创建 Markdown 文件:</p>\n<pre><code class=\"language-bash\"># .claude/commands/\n├── commit-push-pr.md\n├── daily-standup.md\n└── deploy-staging.md\n</code></pre>\n<p><strong>示例1:自动提交并创建 PR</strong></p>\n<pre><code class=\"language-markdown\"># .claude/commands/commit-push-pr.md\n\n你是一个发布助手。请执行以下步骤:\n\n1. 检查 Git 状态\n   !git status\n\n2. 运行测试套件\n   !npm test\n\n3. 如果测试通过:\n   - 添加所有更改\n   - 生成符合 Conventional Commits 的提交消息\n   - 推送到远程\n   - 创建 Pull Request\n\n4. 如果测试失败:\n   - 分析失败原因\n   - 提供修复建议\n</code></pre>\n<p><strong>使用:</strong></p>\n<pre><code class=\"language-bash\"># 直接输入命令\n/commit-push-pr\n\n# Claude 会自动执行整个流程\n</code></pre>\n<p><strong>示例2:生成每日站会日报</strong></p>\n<pre><code class=\"language-markdown\"># .claude/commands/daily-standup.md\n\n请生成今日站会报告,包括:\n\n1. 昨天完成了什么\n   !git log --since=\"yesterday\" --oneline\n\n2. 今天计划做什么\n   (读取 CLAUDE.md 中的当前任务)\n\n3. 遇到的阻碍\n   (读取最近的 TODO 注释)\n\n请以清晰的 Markdown 格式输出。\n</code></pre>\n<p><strong>使用:</strong></p>\n<pre><code class=\"language-bash\">/daily-standup\n</code></pre>\n<h4 id=\"实战案例\">实战案例</h4>\n<p><strong>完整的部署工作流:</strong></p>\n<pre><code class=\"language-markdown\"># .claude/commands/deploy-production.md\n\n你是一个部署专家。请按以下步骤执行生产环境部署:\n\n## 前置检查\n1. 确认当前分支\n   !git branch --show-current\n\n2. 检查是否有未提交的更改\n   !git status\n\n3. 运行完整测试套件\n   !npm run test:all\n\n## 构建阶段\n4. 构建生产版本\n   !npm run build\n\n5. 运行构建产物测试\n   !npm run test:build\n\n## 部署阶段\n6. 打包部署\n   !npm run deploy:staging\n\n7. 验证部署\n   !curl https://staging.example.com/health\n\n8. 运行冒烟测试\n   !npm run test:smoke\n\n## 生产部署\n9. 合并到主分支\n   !git checkout main\n   !git merge production\n\n10. 推送到远程\n    !git push origin main\n\n11. 监控部署\n    (等待 CI/CD 完成)\n\n12. 验证生产环境\n    !curl https://api.example.com/health\n\n## 回滚准备\n如果部署失败,立即执行:\n!git revert HEAD\n!git push origin main\n\n## 部署后检查\n13. 检查错误日志\n    (使用 Sentry MCP 查询最新错误)\n\n14. 发送团队通知\n    (使用 Slack MCP 发送部署成功通知)\n\n请每完成一步都报告进度,遇到问题立即暂停并询问。\n</code></pre>\n<p><strong>价值:</strong></p>\n<ul>\n<li>✅ 一键执行复杂流程</li>\n<li>✅ 减少人为错误</li>\n<li>✅ 团队共享最佳实践</li>\n<li>✅ 可以签入 Git 版本控制</li>\n</ul>\n<h3 id=\"46-extended-thinking扩展思考模式\">4.6 Extended Thinking(扩展思考模式)</h3>\n<h4 id=\"ultrathink-深度思考模式\">ultrathink 深度思考模式</h4>\n<p>当你需要设计复杂的缓存层或重构架构时,在提示词中加上 <code>ultrathink</code>。</p>\n<pre><code class=\"language-bash\"># 标准模式\n设计一个 Redis 缓存层\n\n# ultrathink 模式\nultrathink: 设计一个高可用的 Redis 缓存层,考虑:\n- 缓存穿透、缓存击穿、缓存雪崩\n- 分布式锁\n- 缓存更新策略\n- 降级方案\n</code></pre>\n<p><strong>效果:</strong></p>\n<ul>\n<li>Claude 会分配高达 32k 的 Token 进行内部推理</li>\n<li>虽然反应慢一点,但逻辑准确率大幅提升</li>\n<li>适合架构设计、复杂重构等关键任务</li>\n</ul>\n<h4 id=\"extended-thinking-api\">Extended Thinking API</h4>\n<p>通过 API 调用时,开启 Extended Thinking 可以看到 Claude 的逐步推理过程(Thinking Blocks)。</p>\n<p><strong>价值:</strong></p>\n<ul>\n<li>透明化思考过程</li>\n<li>便于调试复杂逻辑</li>\n<li>理解 Claude 的决策路径</li>\n<li>教学和学习工具</li>\n</ul>\n<hr />\n<h2 id=\"五实用技巧与快捷操作\">五、实用技巧与快捷操作</h2>\n<p>了解了 Claude Code 的高级功能后，分享一些实用的技巧和快捷操作，可以更高效地使用这个工具。</p>\n<h3 id=\"51-基础操作技巧\">5.1 基础操作技巧</h3>\n<h4 id=\"项目初始化init\">项目初始化(/init)</h4>\n<pre><code class=\"language-bash\"># 自动生成 CLAUDE.md\n/init\n\n# 或手动指定\nclaude /init \"这是一个 Node.js + React 项目\"\n</code></pre>\n<h4 id=\"快速引用上下文提及\">快速引用上下文(@提及)</h4>\n<pre><code class=\"language-bash\"># 引用单个文件\n@src/auth.ts\n\n# 引用整个目录\n@src/components/\n\n# 引用多个文件\n@src/auth.ts @src/user.ts @src/database.ts\n\n# 引用 MCP 服务器\n@mcp:github\n\n# 模糊匹配\n@auth  # 自动匹配 auth.ts, auth.controller.ts 等\n</code></pre>\n<h4 id=\"即时执行-bash-命令前缀\">即时执行 Bash 命令(!前缀)</h4>\n<pre><code class=\"language-bash\"># 查看状态\n!git status\n\n# 运行测试\n!npm test\n\n# 查看进程\n!ps aux | grep node\n\n# 组合使用\n!git diff &amp;&amp; echo \"=== Changes Summary ===\"\n</code></pre>\n<h4 id=\"回退操作双击-esc\">回退操作(双击 ESC)</h4>\n<pre><code class=\"language-bash\">ESC ESC\n</code></pre>\n<p><strong>选项:</strong></p>\n<ul>\n<li>仅回退对话</li>\n<li>仅回退代码</li>\n<li>同时回退对话和代码</li>\n</ul>\n<p><strong>注意:</strong> 已执行的 Bash 命令无法回退</p>\n<h3 id=\"52-效率提升技巧\">5.2 效率提升技巧</h3>\n<h4 id=\"反向搜索历史提示词ctrlr\">反向搜索历史提示词(Ctrl+R)</h4>\n<pre><code class=\"language-bash\">Ctrl+R    # 开始搜索\nCtrl+R    # 循环匹配项\nEnter     # 运行\nTab       # 编辑后运行\n</code></pre>\n<h4 id=\"提示词暂存ctrls\">提示词暂存(Ctrl+S)</h4>\n<pre><code class=\"language-bash\">Ctrl+S    # 暂存当前提示词\n# ... 处理其他事务 ...\n# 恢复暂存内容继续工作\n</code></pre>\n<p><strong>类似 Git stash,但用于提示词</strong></p>\n<h4 id=\"智能提示补全prompt-suggestions\">智能提示补全(Prompt Suggestions)</h4>\n<p>Claude 甚至能预测你接下来想问什么:</p>\n<pre><code class=\"language-bash\"># 当你看到灰色的建议文字时\nTab       # 接受建议并编辑\nEnter     # 直接运行建议\n</code></pre>\n<p><strong>价值:</strong></p>\n<ul>\n<li>减少打字量</li>\n<li>发现隐藏功能</li>\n<li>学习最佳实践</li>\n</ul>\n<h4 id=\"会话管理高级技巧\">会话管理高级技巧</h4>\n<p><strong>Continue &amp; Resume - 无缝续关</strong></p>\n<pre><code class=\"language-bash\"># 终端意外关闭?电脑没电了?\nclaude --continue              # 瞬间恢复上一次对话\nclaude --resume                # 显示历史会话列表供选择\n\n# 上下文完美保留,工作流永不丢失\n</code></pre>\n<p><strong>Named Sessions - 会话命名</strong></p>\n<pre><code class=\"language-bash\"># 像管理 Git 分支一样管理会话\n/rename api-migration          # 给当前会话命名\n/resume api-migration          # 按名称恢复会话\n\n# 用途:为不同任务创建独立会话\n/rename feature-auth\n/rename bugfix-login\n/resume feature-auth\n</code></pre>\n<p><strong>Claude Code Remote - 跨设备传送</strong></p>\n<pre><code class=\"language-bash\"># 在网页版 claude.ai/code 上开始任务\n# 回家后用终端继续开发\n\nclaude --teleport session_id   # 把云端会话\"拉\"到本地\n\n# 利用\"传送(Teleport)\"功能\n# 在终端和网页间同步上下文\n# 甚至早上起床和白天休息时,用手机版 Claude App 查看进度\n</code></pre>\n<h4 id=\"自定义状态栏statusline\">自定义状态栏(/statusline)</h4>\n<pre><code class=\"language-bash\">/statusline\n</code></pre>\n<p><strong>可显示信息:</strong></p>\n<ul>\n<li>Git 分支</li>\n<li>当前模型</li>\n<li>Token 用量</li>\n<li>上下文占比</li>\n<li>任务进度</li>\n</ul>\n<p><strong>配置示例:</strong></p>\n<pre><code class=\"language-json\">{\n  \"statusline\": {\n    \"segments\": [\n      \"git.branch\",\n      \"model.name\",\n      \"context.usage\",\n      \"token.cost\"\n    ],\n    \"refreshInterval\": 1000\n  }\n}\n</code></pre>\n<h4 id=\"可视化上下文context\">可视化上下文(/context)</h4>\n<pre><code class=\"language-bash\">/context\n</code></pre>\n<p><strong>显示:</strong></p>\n<ul>\n<li>当前 token 使用情况</li>\n<li>上下文占用百分比</li>\n<li>各文件占用大小</li>\n<li>建议优化方向</li>\n</ul>\n<h4 id=\"使用统计与监控\">使用统计与监控</h4>\n<p><strong>查看使用习惯:</strong></p>\n<pre><code class=\"language-bash\">/stats     # 查看你的使用习惯、最爱用的模型、连续使用天数等\n/usage     # 查看当前的费率限制和使用进度\n</code></pre>\n<p><strong>价值:</strong></p>\n<ul>\n<li>了解自己的使用模式</li>\n<li>监控费用消耗</li>\n<li>晒 Claude Code 统计(现在比晒 GitHub 提交记录更流行)</li>\n</ul>\n<h3 id=\"53-文件夹管理技巧\">5.3 文件夹管理技巧</h3>\n<h4 id=\"工作空间隔离\">工作空间隔离</h4>\n<p><strong>最佳实践:</strong></p>\n<pre><code class=\"language-bash\"># 为每个任务创建独立文件夹\nproject-1/\nproject-2/\ntask-a/\ntask-b/\n</code></pre>\n<p><strong>快速启动:</strong></p>\n<pre><code class=\"language-bash\"># Windows: 在地址栏输入 cmd\n# macOS: 在右键菜单选择\"服务 &gt; 新建终端位于文件夹\"\n\n# 然后启动 Claude Code\nclaude\n</code></pre>\n<h4 id=\"拖拽文件\">拖拽文件</h4>\n<p><strong>支持操作:</strong></p>\n<ul>\n<li>拖拽单个文件</li>\n<li>拖拽整个文件夹</li>\n<li>拖拽多个文件</li>\n</ul>\n<p><strong>使用场景:</strong></p>\n<pre><code class=\"language-bash\"># 拖拽文件后直接描述任务\n[拖入 auth.ts]\n这个认证模块有安全问题,请帮我审查并修复\n</code></pre>\n<h3 id=\"54-粘贴技巧\">5.4 粘贴技巧</h3>\n<h4 id=\"文本粘贴\">文本粘贴</h4>\n<table>\n<thead>\n<tr>\n<th>操作</th>\n<th>方式</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>在 CC 中粘贴文本</strong></td>\n<td>鼠标右键 → 粘贴</td>\n</tr>\n<tr>\n<td><strong>在普通命令行粘贴</strong></td>\n<td>Ctrl+V</td>\n</tr>\n<tr>\n<td><strong>在 CC 中粘贴图片</strong></td>\n<td>复制图片 → Alt+V (Windows) / Ctrl+V (macOS)</td>\n</tr>\n</tbody>\n</table>\n<p><strong>注意:</strong></p>\n<ul>\n<li>CC 中不能用 Ctrl+V 粘贴文本</li>\n<li>CC 中不能用 Ctrl+A 全选</li>\n<li>图片必须在打开状态复制,预览状态无法粘贴</li>\n</ul>\n<h3 id=\"55-常用斜杠命令速查\">5.5 常用斜杠命令速查</h3>\n<table>\n<thead>\n<tr>\n<th>命令</th>\n<th>功能</th>\n<th>使用频率</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>/clear</code></td>\n<td>清空对话历史</td>\n<td>⭐⭐⭐⭐⭐</td>\n</tr>\n<tr>\n<td><code>/compact</code></td>\n<td>清空对话但保留摘要</td>\n<td>⭐⭐⭐⭐⭐</td>\n</tr>\n<tr>\n<td><code>/context</code></td>\n<td>可视化上下文使用</td>\n<td>⭐⭐⭐⭐⭐</td>\n</tr>\n<tr>\n<td><code>/model</code></td>\n<td>切换模型</td>\n<td>⭐⭐⭐⭐</td>\n</tr>\n<tr>\n<td><code>/cost</code></td>\n<td>显示费用统计</td>\n<td>⭐⭐⭐⭐</td>\n</tr>\n<tr>\n<td><code>/export</code></td>\n<td>导出对话</td>\n<td>⭐⭐⭐⭐</td>\n</tr>\n<tr>\n<td><code>/add-dir</code></td>\n<td>添加工作目录</td>\n<td>⭐⭐⭐⭐</td>\n</tr>\n<tr>\n<td><code>/status</code></td>\n<td>查看系统状态</td>\n<td>⭐⭐⭐</td>\n</tr>\n<tr>\n<td><code>/mcp</code></td>\n<td>管理 MCP 服务器</td>\n<td>⭐⭐⭐</td>\n</tr>\n<tr>\n<td><code>/skills</code></td>\n<td>列出可用技能</td>\n<td>⭐⭐⭐</td>\n</tr>\n<tr>\n<td><code>/hooks</code></td>\n<td>管理钩子</td>\n<td>⭐⭐</td>\n</tr>\n<tr>\n<td><code>/agents</code></td>\n<td>管理子代理</td>\n<td>⭐⭐</td>\n</tr>\n<tr>\n<td><code>/vim</code></td>\n<td>切换 Vim 模式</td>\n<td>⭐⭐</td>\n</tr>\n<tr>\n<td><code>/theme</code></td>\n<td>更换主题</td>\n<td>⭐</td>\n</tr>\n<tr>\n<td><code>/doctor</code></td>\n<td>诊断环境</td>\n<td>⭐⭐⭐⭐</td>\n</tr>\n</tbody>\n</table>\n<hr />\n<h2 id=\"六最佳实践\">六、最佳实践</h2>\n<p>继续。提供并建立一些最佳实践以提升团队协作和开发效率。</p>\n<h3 id=\"61-项目组织最佳实践\">6.1 项目组织最佳实践</h3>\n<h4 id=\"目录结构规范\">目录结构规范</h4>\n<pre><code class=\"language-bash\">project/\n├── .claude/                    # Claude Code 配置\n│   ├── settings.json           # 项目级设置\n│   ├── agents.json             # 子代理配置\n│   ├── rules/                  # 模块化规则\n│   │   ├── auth.md\n│   │   ├── database.md\n│   │   └── api.md\n│   └── mcp.json                # MCP 配置\n├── src/                        # 源代码\n├── tests/                      # 测试代码\n├── docs/                       # 文档\n├── CLAUDE.md                   # 项目主配置\n└── README.md                   # 项目说明\n</code></pre>\n<h4 id=\"claudemd-层级配置\">CLAUDE.md 层级配置</h4>\n<div class=\"mermaid\">graph TD\n    A[用户级_home_claude_CLAUDE_md]\n    B[项目级_CLAUDE_md]\n    C[模块级_src_claude_CLAUDE_md]\n    D[特定规则_claude_rules]\n\n    A --&gt; E[合并规则]\n    B --&gt; E\n    C --&gt; E\n    D --&gt; E\n    E --&gt; F[最终配置]\n\n    style A fill:#f5576c\n    style B fill:#667eea\n    style C fill:#764ba2\n    style D fill:#f093fb\n    style E fill:#4facfe\n    style F fill:#00d2ff\n</div><h3 id=\"62-工作流最佳实践\">6.2 工作流最佳实践</h3>\n<h4 id=\"探索-规划-编码-提交工作流\">探索-规划-编码-提交工作流</h4>\n<p>这是一个完整的开发工作流程,需要配合特定的Skills和MCP使用。</p>\n<p><strong>前置准备 - 安装必要工具:</strong></p>\n<pre><code class=\"language-bash\"># 1. 安装代码分析MCP(可选,用于深度分析)\nclaude mcp add github npx -y @modelcontextprotocol/server-github\n\n# 2. 安装commit skill(用于生成规范的commit消息)\nnpx skills-installer install @anthropics/claude-code/commit --client claude-code\n\n# 3. 安装Chrome DevTools MCP(用于浏览器测试,可选)\nclaude mcp add chrome-devtools npx chrome-devtools-mcp@latest\n</code></pre>\n<p><strong>详细工作流程:</strong></p>\n<p><strong>第1步:探索阶段 - 理解项目</strong></p>\n<pre><code class=\"language-bash\"># 启动Claude Code\nclaude\n\n# 探索项目架构\n请帮我分析这个项目的架构,重点关注:\n1. 整体项目结构\n2. 认证模块的实现\n3. 依赖关系\n4. 技术栈\n\n# 使用@引用特定目录\n@src/\n\n# 如果有GitHub仓库,使用GitHub MCP\n请使用github MCP查看最近的commit历史和issue\n</code></pre>\n<p><strong>第2步:规划阶段 - 使用Plan模式</strong></p>\n<pre><code class=\"language-bash\"># 进入Plan模式(按两次Shift+Tab)\nShift+Tab, Shift+Tab\n\n# 或使用命令\n/plan\n\n# 明确任务需求\n我需要添加 OAuth2.0 认证支持,请规划实现方案,包括:\n1. 需要创建哪些新文件\n2. 需要修改哪些现有文件\n3. 需要安装哪些依赖\n4. 实现步骤顺序\n5. 潜在的风险点\n\n# Claude会生成详细计划,等待你的确认\n# Plan: 添加OAuth2.0认证支持\n#\n# 1. 分析现有认证代码\n# 2. 设计OAuth2.0流程\n# 3. 创建OAuth控制器\n# 4. 实现token生成和验证\n# 5. 添加测试用例\n# 6. 更新文档\n#\n# 预计需要修改的文件:\n# - src/auth/oauth.controller.ts (新建)\n# - src/auth/auth.service.ts (修改)\n# - src/config/oauth.config.ts (新建)\n#\n# 确认后开始执行? (yes/no)\n\n# 确认后开始实施\nyes\n</code></pre>\n<p><strong>第3步:编码阶段 - 实施计划</strong></p>\n<pre><code class=\"language-bash\"># 让Claude按照计划实施\n按照上面的计划开始实施\n\n# 如果遇到问题,可以要求暂停\n暂停,让我先检查一下这一步\n\n# 继续实施\n继续下一步\n\n# 运行测试\n!npm test\n\n# 修复失败的测试\n测试失败了,请帮我修复\n</code></pre>\n<p><strong>第4步:提交阶段 - 使用commit skill</strong></p>\n<pre><code class=\"language-bash\"># 使用commit skill生成规范的commit消息\n使用commit skill为这些更改创建一个规范的commit消息\n\n# Claude会分析变更并生成commit\n# commit skill会:\n# 1. 分析git diff\n# 2. 生成符合Conventional Commits的消息\n# 3. 自动创建commit\n\n# 或手动指导commit\n请帮我创建git commit,包含这些更改\ncommit消息格式: feat(auth): 添加OAuth2.0认证支持\n</code></pre>\n<h4 id=\"测试驱动开发tdd工作流\">测试驱动开发(TDD)工作流</h4>\n<p><strong>前置准备 - 安装测试相关工具:</strong></p>\n<pre><code class=\"language-bash\"># 1. 安装测试编写skill(可选)\nnpx skills-installer install @anthropics/claude-code/test-writer --client claude-code\n\n# 2. 或者配置test-writer子代理(后面详细说明)\n</code></pre>\n<p><strong>TDD工作流程:</strong></p>\n<pre><code class=\"language-bash\"># 第1步:先写测试\n# 使用test-writer skill或agent\n使用test-writer skill为用户登录功能编写测试,包括:\n1. 正常登录场景\n2. 错误密码场景\n3. 用户不存在场景\n4. Token验证场景\n\n@src/auth/login.controller.ts\n\n# 第2步:运行测试(预期失败)\n!npm test\n\n# 第3步:实现最小可行代码\n测试失败了,请实现登录功能使测试通过,只写能通过的代码\n\n# 第4步:重构代码\n代码通过了但不够优雅,请重构以提高可读性,但保持测试通过\n\n# 第5步:重复循环\n继续添加新功能的测试...\n</code></pre>\n<h4 id=\"代码审查工作流\">代码审查工作流</h4>\n<p><strong>前置准备 - 创建和配置代码审查子代理:</strong></p>\n<p><strong>方式1:使用 /agents 命令创建</strong></p>\n<pre><code class=\"language-bash\"># 在Claude Code中\nclaude\n/agents\n\n# 选择 \"Create new agent\"\n# 按提示配置:\n- Name: code-reviewer\n- Description: 专门负责代码审查的子代理\n- Instructions: 你是一个代码审查专家,专注于检查代码质量、安全漏洞和性能问题\n- Tools: read, search, git\n- Permissions: 禁止写入(allowWrite: false)\n</code></pre>\n<p><strong>方式2:手动配置文件</strong></p>\n<pre><code class=\"language-bash\"># 创建agents配置文件\nmkdir -p ~/.claude\ncat &gt; ~/.claude/agents.json &lt;&lt; 'EOF'\n{\n  \"agents\": {\n    \"code-reviewer\": {\n      \"description\": \"专门负责代码审查的子代理\",\n      \"model\": \"claude-sonnet-4-5\",\n      \"instructions\": \"你是一个专业的代码审查专家。专注于:\\n1. 代码质量(Clean Code原则)\\n2. 安全漏洞(OWASP Top 10)\\n3. 性能问题(算法复杂度、资源使用)\\n4. 最佳实践\\n\\n请以结构化方式输出审查结果。\",\n      \"tools\": [\"read\", \"search\", \"git\"],\n      \"permissions\": {\n        \"allowWrite\": false\n      }\n    },\n    \"security-reviewer\": {\n      \"description\": \"专注于安全问题的子代理\",\n      \"model\": \"claude-sonnet-4-5\",\n      \"instructions\": \"你是一个安全专家,专注于识别:\\n1. SQL注入、XSS、CSRF等漏洞\\n2. 敏感信息泄露\\n3. 权限控制问题\\n4. 依赖安全问题\",\n      \"tools\": [\"read\", \"search\"],\n      \"permissions\": {\n        \"allowWrite\": false\n      }\n    },\n    \"performance-reviewer\": {\n      \"description\": \"专注于性能问题的子代理\",\n      \"model\": \"claude-sonnet-4-5\",\n      \"instructions\": \"你是一个性能优化专家,专注于:\\n1. 算法效率\\n2. 内存使用\\n3. 数据库查询优化\\n4. 缓存策略\",\n      \"tools\": [\"read\", \"search\"],\n      \"permissions\": {\n        \"allowWrite\": false\n      }\n    }\n  }\n}\nEOF\n\n# 验证配置\nclaude\n/agents\n# 应该看到刚创建的三个agent\n</code></pre>\n<p><strong>使用代码审查工作流:</strong></p>\n<pre><code class=\"language-bash\"># 第1步:使用子代理并行审查\n# 代码质量审查\n使用code-reviewer agent审查以下文件的代码质量:\n- 是否符合Clean Code原则\n- 是否有代码异味\n- 是否易于维护\n\n@src/auth.ts @src/user.ts @src/database.ts\n\n# 安全审查(并行)\n使用security-reviewer agent审查这些文件的安全问题:\n- SQL注入风险\n- XSS漏洞\n- 敏感信息泄露\n\n@src/auth.ts @src/user.ts @src/database.ts\n\n# 性能审查(并行)\n使用performance-reviewer agent审查这些文件的性能问题:\n- 算法复杂度\n- 数据库查询效率\n- 内存使用\n\n@src/auth.ts @src/user.ts @src/database.ts\n\n# 第2步:生成综合审查报告\n请综合以上三个agent的审查结果,生成一份详细报告,包括:\n- 发现的问题列表\n- 每个问题的严重程度(Critical/High/Medium/Low)\n- 具体的修复建议\n- 修复优先级排序\n\n# 第3步:逐个修复问题\n根据审查报告,请帮我修复Critical和High级别的问题:\n1. 先修复安全问题\n2. 再修复性能问题\n3. 最后修复代码质量问题\n\n# 第4步:重新审查\n修复完成后,使用code-reviewer agent重新审查修复后的代码\n</code></pre>\n<h3 id=\"63-团队协作最佳实践\">6.3 团队协作最佳实践</h3>\n<h4 id=\"共享-claudemd\">共享 CLAUDE.md</h4>\n<p><strong>场景:</strong>团队项目</p>\n<p><strong>实施步骤:</strong></p>\n<ol>\n<li>在项目根目录创建 CLAUDE.md</li>\n<li>团队共同维护</li>\n<li>定期更新</li>\n<li>版本控制</li>\n</ol>\n<p><strong>示例:</strong></p>\n<pre><code class=\"language-markdown\"># 团队项目规范\n\n## 团队约定\n- 代码审查至少 1 人 approve\n- 所有 PR 必须通过 CI\n- 文档与代码同步更新\n\n## 分工信息\n- @alice: 前端负责人\n- @bob: 后端负责人\n- @charlie: DevOps\n\n## 沟通渠道\n- Slack: #team-channel\n- JIRA: 项目看板\n</code></pre>\n<h4 id=\"github-集成\">GitHub 集成</h4>\n<p><strong>安装 GitHub App:</strong></p>\n<pre><code class=\"language-bash\">/install-github-app\n</code></pre>\n<p><strong>使用 PR 评论:</strong></p>\n<pre><code class=\"language-bash\"># 在 PR 中\n@.claude 请审查这个 PR 的代码变更\n\n# 自动添加问题到 CLAUDE.md\n/pr-comments\n</code></pre>\n<h3 id=\"64-性能优化最佳实践\">6.4 性能优化最佳实践</h3>\n<h4 id=\"极致的并行处理parallelism\">极致的并行处理(Parallelism)</h4>\n<p>来自 Claude Code 创始人 Boris Cherny 的核心理念:<strong>不要让 AI 等你,也不要让你等 AI</strong></p>\n<p><strong>1. 终端里的\"多线程\"操作</strong></p>\n<pre><code class=\"language-bash\"># 同时运行 5 个 Claude 实例\n# 将终端标签页标记为 1-5\n\n# 配置系统通知(System Notifications)\n# 当某个 Claude 完成任务需要输入时,直接弹窗提醒\n\n# 在 ~/.claude/settings.json 中配置\n{\n  \"notifications\": {\n    \"enabled\": true,\n    \"sound\": true,\n    \"position\": \"top-right\"\n  }\n}\n</code></pre>\n<p>就好比你雇了 5 个初级程序员同时干活,你只需要负责 Review 和分配任务,效率直接翻倍。</p>\n<p><strong>2. 本地与云端的\"混合双打\"</strong></p>\n<pre><code class=\"language-bash\"># 在本地终端运行 5 个实例\n# 同时在 claude.ai/code 网页端运行 5-10 个会话\n\n# 利用 &amp; 命令将本地会话\"甩\"给网页端后台运行\n&amp; 将这个任务转到网页端继续\n\n# 在网页版开始新任务\n# 然后在终端用 claude --teleport session_id 拉回本地\n</code></pre>\n<p><strong>3. 跨设备同步工作流</strong></p>\n<pre><code class=\"language-bash\"># 早上在办公室:终端 + 网页版\n# 中午休息:手机版 Claude App 查看进度\n# 晚上回家:claude --teleport 继续开发\n\n# 工作流永不中断\n</code></pre>\n<p><strong>效果对比:</strong></p>\n<table>\n<thead>\n<tr>\n<th>方式</th>\n<th>并发度</th>\n<th>效率提升</th>\n<th>适用场景</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>单实例</strong></td>\n<td>1x</td>\n<td>基准</td>\n<td>简单任务</td>\n</tr>\n<tr>\n<td><strong>5个终端</strong></td>\n<td>5x</td>\n<td>400%</td>\n<td>本地开发</td>\n</tr>\n<tr>\n<td><strong>5终端 + 10网页</strong></td>\n<td>15x</td>\n<td>1400%</td>\n<td>大型项目</td>\n</tr>\n<tr>\n<td><strong>全设备协作</strong></td>\n<td>20x+</td>\n<td>1900%+</td>\n<td>复杂重构</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"上下文管理\">上下文管理</h4>\n<p><strong>策略:</strong></p>\n<pre><code class=\"language-bash\"># 长对话定期 compact\n/compact \"保留以下要点: ...\"\n\n# 新任务先 clear\n/clear\n\n# 监控上下文使用\n/context\n\n# 定期 export 备份\n/export conversation-2026-01-06.json\n</code></pre>\n<h4 id=\"token-优化\">Token 优化</h4>\n<table>\n<thead>\n<tr>\n<th>技巧</th>\n<th>说明</th>\n<th>节省效果</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>使用 @提及</strong></td>\n<td>只加载需要的文件</td>\n<td>30-50%</td>\n</tr>\n<tr>\n<td><strong>定期 /compact</strong></td>\n<td>清理历史保留摘要</td>\n<td>40-60%</td>\n</tr>\n<tr>\n<td><strong>避免重复加载</strong></td>\n<td>检查 /context 输出</td>\n<td>20-30%</td>\n</tr>\n<tr>\n<td><strong>使用 Subagents</strong></td>\n<td>并行处理减少串行上下文</td>\n<td>50-70%</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"模型选择策略\">模型选择策略</h4>\n<p>Claude Code 创始人的独家见解: 只用最强的模型:Opus 4.5 + Thinking</p>\n<p>很多人为了省钱或追求速度会用 Haiku 或 Sonnet,但 Boris Cherny 只用 Opus 4.5,并全程开启 Thinking(思考)模式。</p>\n<p>理由:</p>\n<ul>\n<li>虽然 Opus 4.5 更贵、更慢,但它不需要你频繁纠正(Steer less)</li>\n<li>工具使用能力更强,一次就能做对</li>\n<li>从\"任务完成总耗时\"来看,聪明的大模型反而比\"快但笨\"的小模型更快</li>\n<li>一次做对,永远比反复修改更省时间</li>\n</ul>\n<p>土豪专属了属于是。</p>\n<p><strong>国外模型选择策略</strong>:</p>\n<div class=\"mermaid\">graph LR\n    A[简单任务] --&gt; B[Haiku 4.5]\n    C[中等复杂度] --&gt; D[Sonnet 4.5]\n    E[高复杂度] --&gt; F[Opus 4.5 + Thinking]\n\n    B --&gt; G[成本优化]\n    D --&gt; H[平衡性能]\n    F --&gt; I[质量优先]\n\n    style A fill:#4facfe\n    style C fill:#667eea\n    style E fill:#f5576c\n    style B fill:#4facfe\n    style D fill:#667eea\n    style F fill:#f5576c\n</div><p><strong>国外模型使用建议</strong>:</p>\n<ul>\n<li><strong>快速查询/格式化:</strong> Haiku 4.5 - 最快最便宜</li>\n<li><strong>日常开发/代码编写:</strong> Sonnet 4.5 - 性价比平衡</li>\n<li><strong>架构设计/复杂重构:</strong> Opus 4.5 + Thinking - 最高质量(创始人首选)</li>\n</ul>\n<p><strong>国内模型选择策略:</strong></p>\n<div class=\"mermaid\">graph LR\n    A[简单任务] --&gt; B[DeepSeek-Coder]\n    C[中文项目] --&gt; D[GLM-4.7]\n    E[大型项目] --&gt; F[Kimi K2]\n    G[Python/JS] --&gt; H[Qwen-Coder-Plus]\n\n    B --&gt; I[极低成本]\n    D --&gt; J[中文优化]\n    F --&gt; K[超长上下文]\n    H --&gt; L[开源优秀]\n\n    style A fill:#00d2ff\n    style C fill:#667eea\n    style E fill:#f093fb\n    style G fill:#4facfe\n    style B fill:#00d2ff\n    style D fill:#667eea\n    style F fill:#f093fb\n    style H fill:#4facfe\n</div><p><strong>国内模型使用建议:</strong></p>\n<table>\n<thead>\n<tr>\n<th>任务类型</th>\n<th>推荐模型</th>\n<th>理由</th>\n<th>价格(相对)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>简单查询</strong></td>\n<td>DeepSeek-Coder</td>\n<td>极低成本,够用</td>\n<td>⭐</td>\n</tr>\n<tr>\n<td><strong>中文项目</strong></td>\n<td>GLM-4.7</td>\n<td>中文理解最强,有Coding套餐</td>\n<td>⭐⭐⭐</td>\n</tr>\n<tr>\n<td><strong>大型重构</strong></td>\n<td>Kimi K2</td>\n<td>超长上下文(2M+),MoE架构</td>\n<td>⭐⭐</td>\n</tr>\n<tr>\n<td><strong>Python/JS</strong></td>\n<td>Qwen-Coder-Plus</td>\n<td>开源,Python/JS性能优秀</td>\n<td>⭐⭐</td>\n</tr>\n<tr>\n<td><strong>预算有限</strong></td>\n<td>DeepSeek-Coder</td>\n<td>价格优势明显</td>\n<td>⭐</td>\n</tr>\n<tr>\n<td><strong>团队协作</strong></td>\n<td>GLM-4.7</td>\n<td>有团队套餐,管理方便</td>\n<td>⭐⭐⭐</td>\n</tr>\n</tbody>\n</table>\n<p><strong>模型切换策略:</strong></p>\n<pre><code class=\"language-bash\"># 方式1:使用 /model 命令快速切换\nclaude\n/model\n# 选择对应模型\n\n# 方式2:临时切换(当前会话)\nexport ANTHROPIC_MODEL=kimi-k2\nclaude\n\n# 方式3:针对不同任务使用不同配置\n# 创建alias\nalias cc-glm='ANTHROPIC_MODEL=GLM-4.7 claude'\nalias cc-kimi='ANTHROPIC_MODEL=kimi-k2 claude'\nalias cc-qwen='ANTHROPIC_MODEL=qwen-coder-plus claude'\n\n# 使用\ncc-glm   # 使用智谱GLM\ncc-kimi  # 使用Kimi\ncc-qwen  # 使用通义千问\n</code></pre>\n<p><strong>成本优化建议:</strong></p>\n<div class=\"mermaid\">graph TB\n    A[任务开始] --&gt; B{任务类型?}\n    B --&gt;|简单查询| C[DeepSeek-Coder]\n    B --&gt;|中文开发| D[GLM-4.7]\n    B --&gt;|大型重构| E[Kimi K2]\n    B --&gt;|Python项目| F[Qwen-Coder-Plus]\n    B --&gt;|高质量要求| G[Sonnet 4.5]\n\n    C --&gt; H[成本: $]\n    D --&gt; I[成本: $$]\n    E --&gt; J[成本: $$]\n    F --&gt; K[成本: $$]\n    G --&gt; L[成本: $$$$]\n\n    style A fill:#667eea\n    style C fill:#00d2ff\n    style D fill:#f093fb\n    style E fill:#f5576c\n    style F fill:#4facfe\n    style G fill:#764ba2\n</div><p><strong>混合使用策略:</strong></p>\n<pre><code class=\"language-bash\"># 日常开发用国产模型(便宜)\nexport ANTHROPIC_MODEL=GLM-4.7\n\n# 遇到复杂任务时临时切换到高质量模型\n/model\n# 选择 Opus 4.5\n\n# 完成后切换回国产模型\n/model\n# 选择 GLM-4.7\n</code></pre>\n<h3 id=\"65-安全最佳实践\">6.5 安全最佳实践</h3>\n<h4 id=\"sandbox-配置\">Sandbox 配置</h4>\n<pre><code class=\"language-json\">{\n  \"permissions\": {\n    \"allow\": {\n      \"bash\": [\"npm run *\", \"git *\"],\n      \"write\": [\"src/**/*\", \"tests/**/*\"],\n      \"read\": [\"**/*.ts\", \"**/*.js\", \"**/*.json\"]\n    },\n    \"deny\": {\n      \"bash\": [\"rm -rf *\", \"format *\", \"shutdown\"],\n      \"write\": [\"node_modules/**/*\", \".git/**/*\", \"/etc/*\", \"/usr/*\"]\n    }\n  }\n}\n</code></pre>\n<h4 id=\"hooks-安全检查\">Hooks 安全检查</h4>\n<pre><code class=\"language-bash\">#!/bin/bash\n# ~/.claude/hooks/security-check.sh\n\n# 检查敏感操作\nif [[ \"$TOOL_NAME\" == \"Bash\" ]]; then\n  COMMAND=$(jq -r '.command' &lt;&lt;&lt; \"$CLAUDE_HOOK_INPUT\")\n\n  # 危险命令黑名单\n  DANGEROUS_CMDS=(\"rm -rf\" \"format\" \"shutdown\" \"reboot\" \"chmod 000\")\n\n  for cmd in \"${DANGEROUS_CMDS[@]}\"; do\n    if [[ \"$COMMAND\" == *\"$cmd\"* ]]; then\n      echo \"🚫 拦截危险命令: $COMMAND\"\n      exit 1\n    fi\n  done\nfi\n</code></pre>\n<h4 id=\"敏感信息保护\">敏感信息保护</h4>\n<pre><code class=\"language-markdown\"># CLAUDE.md 安全规范\n\n## 禁止事项\n- ❌ 在代码中硬编码密钥\n- ❌ 在 CLAUDE.md 中记录密码\n- ❌ 在 Git 提交中包含凭证\n\n## 推荐做法\n- ✅ 使用环境变量\n- ✅ 使用 .env 文件(不提交)\n- ✅ 使用密钥管理服务(AWS Secrets Manager 等)\n- ✅ .gitignore 排除敏感文件\n</code></pre>\n<h3 id=\"66-验证闭环feedback-loop\">6.6 验证闭环(Feedback Loop)</h3>\n<p>来自 Claude Code 创始人的最重要的一条技巧：永远给 Claude 一种验证自己工作的方法</p>\n<h4 id=\"核心原理\">核心原理</h4>\n<p>如果 Claude 能看到自己代码的运行结果(报错信息、测试通过与否),它的代码质量会提升 2-3 倍。</p>\n<h4 id=\"实践方法\">实践方法</h4>\n<p><strong>1. 简单的任务:运行 Bash 命令验证</strong></p>\n<pre><code class=\"language-bash\"># 编写代码后立即验证\n请实现一个用户登录功能,然后:\n1. 运行测试\n!npm test\n\n# 根据测试结果修复问题\n\n# 重新验证\n!npm test\n\n# 直到所有测试通过\n</code></pre>\n<p><strong>2. 复杂的 UI:使用浏览器自动化</strong></p>\n<pre><code class=\"language-bash\"># 使用 Claude Chrome 扩展\n请修复这个 Bug 并验证:\n1. 用 Chrome 打开 http://localhost:3000/login\n2. 输入测试账号和密码\n3. 点击登录按钮\n4. 检查是否正确跳转到首页\n5. 查看控制台是否有报错\n6. 直到体验\"感觉对劲\"为止\n</code></pre>\n<p><strong>3. 端到端验证流程</strong></p>\n<pre><code class=\"language-bash\"># 创建完整的验证循环\n使用 verify-app agent 验证以下功能:\n1. 用户注册流程\n2. 登录和登出\n3. 权限验证\n4. 数据持久化\n\n运行完整测试套件:\n!npm run test:e2e\n\n如果发现问题,请:\n1. 分析根因\n2. 修复代码\n3. 重新验证\n4. 确认问题已解决\n</code></pre>\n<h4 id=\"效果对比\">效果对比</h4>\n<table>\n<thead>\n<tr>\n<th>验证方式</th>\n<th>代码质量</th>\n<th>所需时间</th>\n<th>返工率</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>无验证</strong></td>\n<td>⭐⭐</td>\n<td>基准</td>\n<td>40%</td>\n</tr>\n<tr>\n<td><strong>人工验证</strong></td>\n<td>⭐⭐⭐</td>\n<td>+50%</td>\n<td>20%</td>\n</tr>\n<tr>\n<td><strong>Claude 自动验证</strong></td>\n<td>⭐⭐⭐⭐⭐</td>\n<td>+20%</td>\n<td>5%</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"为什么验证循环如此重要\">为什么验证循环如此重要?</h4>\n<p><strong>人类开发流程:</strong></p>\n<ol>\n<li>写代码</li>\n<li>手动测试</li>\n<li>发现 bug</li>\n<li>修复 bug</li>\n<li>重复测试</li>\n</ol>\n<p><strong>Claude + 验证循环流程:</strong></p>\n<ol>\n<li>Claude 写代码</li>\n<li><strong>Claude 自己测试</strong></li>\n<li><strong>Claude 看到错误</strong></li>\n<li><strong>Claude 立即修复</strong></li>\n<li><strong>Claude 再次验证</strong></li>\n<li>循环直到完美</li>\n</ol>\n<p><strong>关键差异:</strong></p>\n<ul>\n<li>Claude 能立即看到错误信息</li>\n<li>Claude 不需要等待人工反馈</li>\n<li>Claude 可以在几秒内完成多个修复循环</li>\n<li>最终代码质量远超人工编写</li>\n</ul>\n<h4 id=\"最佳实践建议\">最佳实践建议</h4>\n<p><strong>✅ 推荐做法:</strong></p>\n<pre><code class=\"language-bash\"># 总是让 Claude 验证自己的工作\n请实现功能 X,然后:\n1. 运行测试验证\n2. 检查代码格式\n3. 验证边界情况\n4. 确认无回归问题\n</code></pre>\n<p><strong>❌ 避免做法:</strong></p>\n<pre><code class=\"language-bash\"># 不要让 Claude\"盲写\"\n请实现功能 X\n# (没有验证步骤,Claude 不知道代码是否正确)\n</code></pre>\n<hr />\n<h2 id=\"七实战案例\">七、实战案例</h2>\n<p>简单几个案例看看如何运用到实际工作中。</p>\n<h3 id=\"71-案例1批量文件重命名\">7.1 案例1:批量文件重命名</h3>\n<p><strong>需求:</strong>将文件夹中所有文件名改为规范的英文名称</p>\n<p><strong>实现:</strong></p>\n<pre><code class=\"language-bash\"># 拖拽文件夹到 Claude Code\n\n请将文件夹中的所有文件名改成规范的英文名称,只改名字,不改序号\n\n# Claude Code 自动:\n# 1. 读取文件夹内容\n# 2. 分析文件名\n# 3. 批量重命名\n# 4. 报告结果\n</code></pre>\n<h3 id=\"72-案例2自动化数据抓取\">7.2 案例2:自动化数据抓取</h3>\n<p><strong>需求:</strong>抓取公众号多页文章数据并导出 Excel</p>\n<p><strong>实现:</strong></p>\n<pre><code class=\"language-bash\"># 使用 Chrome DevTools MCP\n\n用Chrome浏览器打开这个链接:[公众号链接]\n\n然后通过 chrome devtools mcp 完成:\n1. 获取第1、2、3页每篇文章的详细数据\n2. 包括标题、阅读量、点赞量、发布时间等\n3. 保存到 Excel 表格中\n\n# Claude Code 自动:\n# 1. 启动 Chrome\n# 2. 导航到页面\n# 3. 翻页抓取数据\n# 4. 生成 Excel 报告\n</code></pre>\n<p><strong>效果对比:</strong></p>\n<table>\n<thead>\n<tr>\n<th>方式</th>\n<th>耗时</th>\n<th>准确率</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>人工</strong></td>\n<td>30分钟</td>\n<td>90%</td>\n</tr>\n<tr>\n<td><strong>Claude Code + MCP</strong></td>\n<td>5分钟</td>\n<td>99%</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"73-案例3代码质量审查\">7.3 案例3:代码质量审查</h3>\n<p><strong>需求:</strong>审查 PR 的代码变更</p>\n<p><strong>实现:</strong></p>\n<pre><code class=\"language-bash\"># 使用 code-reviewer subagent\n\n使用 code-reviewer agent 审查这个 PR:\n- 代码质量\n- 安全漏洞\n- 性能问题\n- 最佳实践\n\n@src/ @tests/\n\n# Claude Code 自动:\n# 1. 读取所有相关文件\n# 2. 应用审查标准\n# 3. 生成详细报告\n# 4. 提供修复建议\n</code></pre>\n<h3 id=\"74-案例4自动化测试生成\">7.4 案例4:自动化测试生成</h3>\n<p><strong>需求:</strong>为新功能编写测试</p>\n<p><strong>实现:</strong></p>\n<pre><code class=\"language-bash\"># 使用 test-writer subagent\n\n使用 test-writer agent 为用户认证功能编写测试:\n- 单元测试\n- 集成测试\n- E2E 测试\n- 边界情况测试\n\n@src/auth.ts @src/auth.controller.ts\n\n# Claude Code 自动:\n# 1. 分析代码逻辑\n# 2. 识别测试场景\n# 3. 编写测试用例\n# 4. 运行测试验证\n</code></pre>\n<h3 id=\"75-案例5cicd-集成\">7.5 案例5:CI/CD 集成</h3>\n<p><strong>需求:</strong>在 PR 创建时自动审查代码</p>\n<p><strong>实现:</strong></p>\n<pre><code class=\"language-yaml\"># .github/workflows/claude-review.yml\n\nname: Claude Auto Review\n\non:\n  pull_request:\n    types: [opened, synchronize]\n\njobs:\n  review:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Install Claude Code\n        run: npm install -g @anthropic-ai/claude-code\n\n      - name: Configure Claude\n        run: |\n          echo \"配置模型...\"\n          export ANTHROPIC_MODEL=\"claude-sonnet-4-5\"\n\n      - name: Run Review\n        run: |\n          git diff origin/main...HEAD &gt; diff.txt\n          claude -p \"审查这个 PR 的代码变更,重点关注:\n          1. 安全漏洞\n          2. 性能问题\n          3. 代码规范\n          请提供详细审查意见\" &lt; diff.txt &gt; review.txt\n\n      - name: Comment on PR\n        uses: actions/github-script@v6\n        with:\n          script: |\n            const fs = require('fs');\n            const review = fs.readFileSync('review.txt', 'utf8');\n            github.rest.issues.createComment({\n              issue_number: context.issue.number,\n              owner: context.repo.owner,\n              repo: context.repo.repo,\n              body: `## 🤖 Claude Code 自动审查\\n\\n${review}`\n            });\n</code></pre>\n<hr />\n<h2 id=\"八常见问题与解决方案\">八、常见问题与解决方案</h2>\n<p>在使用 Claude Code 的过程中,你可能会遇到一些常见问题。本章节收集了最常见的问题及其解决方案,帮助你快速排除故障。</p>\n<h3 id=\"81-安装问题\">8.1 安装问题</h3>\n<h4 id=\"q1-npm-install-失败\">Q1: npm install 失败</h4>\n<p><strong>问题:</strong></p>\n<pre><code class=\"language-bash\">npm ERR! code EACCES\nnpm ERR! syscall access\n</code></pre>\n<p><strong>解决方案:</strong></p>\n<pre><code class=\"language-bash\"># 方式1: 使用 sudo (macOS/Linux)\nsudo npm install -g @anthropic-ai/claude-code\n\n# 方式2: 修改 npm 全局目录\nmkdir ~/.npm-global\nnpm config set prefix '~/.npm-global'\nexport PATH=~/.npm-global/bin:$PATH\nnpm install -g @anthropic-ai/claude-code\n\n# 方式3: 使用 nvm (推荐)\nnvm install --lts\nnpm install -g @anthropic-ai/claude-code\n</code></pre>\n<h4 id=\"q2-claude-命令未找到\">Q2: claude 命令未找到</h4>\n<p><strong>问题:</strong></p>\n<pre><code class=\"language-bash\">bash: claude: command not found\n</code></pre>\n<p><strong>解决方案:</strong></p>\n<pre><code class=\"language-bash\"># 检查 npm 全局路径\nnpm config get prefix\n\n# 添加到 PATH\nexport PATH=$(npm config get prefix)/bin:$PATH\n\n# 永久配置\necho 'export PATH=$(npm config get prefix)/bin:$PATH' &gt;&gt; ~/.bashrc\nsource ~/.bashrc\n</code></pre>\n<h3 id=\"82-配置问题\">8.2 配置问题</h3>\n<h4 id=\"q3-模型配置不生效\">Q3: 模型配置不生效</h4>\n<p><strong>问题:</strong>配置后仍显示默认模型</p>\n<p><strong>解决方案:</strong></p>\n<pre><code class=\"language-bash\"># 1. 验证环境变量\necho $ANTHROPIC_BASE_URL\necho $ANTHROPIC_AUTH_TOKEN\necho $ANTHROPIC_MODEL\n\n# 2. 重新启动终端\n# 配置环境变量后必须重启终端才能生效\n\n# 3. 使用 claude /status 检查\nclaude\n/status\n\n# 4. 手动设置(临时)\nclaude\n/model\n# 选择第4个(自定义模型)\n</code></pre>\n<h4 id=\"q4-mcp-服务器无法连接\">Q4: MCP 服务器无法连接</h4>\n<p><strong>问题:</strong></p>\n<pre><code class=\"language-bash\">Error: MCP server 'chrome-devtools' failed to start\n</code></pre>\n<p><strong>解决方案:</strong></p>\n<pre><code class=\"language-bash\"># 1. 检查 MCP 状态\nclaude\n/mcp\n\n# 2. 测试连接\nclaude mcp test chrome-devtools\n\n# 3. 重新安装\nclaude mcp remove chrome-devtools\nclaude mcp add chrome-devtools npx chrome-devtools-mcp@latest\n\n# 4. 检查网络\nnpx chrome-devtools-mcp@latest --version\n\n# 5. 查看日志\nclaude /doctor\n</code></pre>\n<h3 id=\"83-使用问题\">8.3 使用问题</h3>\n<h4 id=\"q5-上下文超出限制\">Q5: 上下文超出限制</h4>\n<p><strong>问题:</strong></p>\n<pre><code>Context exceeded: Request too large\n</code></pre>\n<p><strong>解决方案:</strong></p>\n<pre><code class=\"language-bash\"># 1. 查看上下文使用\n/context\n\n# 2. 使用 compact 保留摘要\n/compact \"保留项目背景和当前任务\"\n\n# 3. 使用 clear 清空历史\n/clear\n\n# 4. 减少文件引用\n# 不要用 @src/ 引用整个目录\n# 改用 @src/file1.ts @src/file2.ts 精确引用\n\n# 5. 使用 Subagents 分担上下文\n# 将大任务拆分给多个子代理\n</code></pre>\n<h4 id=\"q6-代码生成质量差\">Q6: 代码生成质量差</h4>\n<p><strong>问题:</strong>生成的代码不符合项目规范</p>\n<p><strong>解决方案:</strong></p>\n<pre><code class=\"language-bash\"># 1. 完善 CLAUDE.md\n# 在 CLAUDE.md 中明确代码规范\n\n# 2. 使用 Plan 模式\nShift+Tab × 2\n# 让 Claude 先理解项目再编写代码\n\n# 3. 提供示例\n# 这是符合规范的代码示例:\n@src/good-example.ts\n# 请参照这个风格编写新功能\n\n# 4. 明确要求\n请编写符合以下规范的代码:\n- 使用 TypeScript 严格模式\n- 遵循项目命名规范\n- 包含完整的错误处理\n- 添加必要的注释\n</code></pre>\n<h3 id=\"84-性能问题\">8.4 性能问题</h3>\n<h4 id=\"q7-响应速度慢\">Q7: 响应速度慢</h4>\n<p><strong>问题:</strong>Claude Code 响应延迟高</p>\n<p><strong>解决方案:</strong></p>\n<pre><code class=\"language-bash\"># 1. 检查网络\nping api.anthropic.com\n\n# 2. 切换更快的模型\n/model\n# 选择 Haiku 4.5(最快) 或国产模型\n\n# 3. 优化提示词\n# 避免冗长的提示词,直接说明需求\n\n# 4. 减少上下文\n/context\n# 如果接近 100%,使用 /compact 清理\n\n# 5. 使用本地模型(如果有)\nexport ANTHROPIC_BASE_URL=http://localhost:8000\n</code></pre>\n<h4 id=\"q8-token-消耗过快\">Q8: Token 消耗过快</h4>\n<p><strong>问题:</strong>费用增长过快</p>\n<p><strong>解决方案:</strong></p>\n<pre><code class=\"language-bash\"># 1. 监控费用\n/cost\n\n# 2. 定期 compact\n/compact \"保留关键信息\"\n\n# 3. 新任务先 clear\n/clear\n\n# 4. 使用更便宜的模型\n# Haiku &lt; Sonnet &lt; Opus\n# 国产模型(更便宜)\n\n# 5. 优化工作流\n# 避免反复修改,一次性明确需求\n</code></pre>\n<h3 id=\"85-调试技巧\">8.5 调试技巧</h3>\n<h4 id=\"启用调试模式\">启用调试模式</h4>\n<pre><code class=\"language-bash\"># 设置环境变量\nexport CLAUDE_DEBUG=true\nexport CLAUDE_LOG_LEVEL=debug\n\n# 启动 Claude Code\nclaude\n\n# 查看日志\ntail -f ~/.claude/logs/claude.log\n</code></pre>\n<h4 id=\"使用-doctor-诊断\">使用 /doctor 诊断</h4>\n<pre><code class=\"language-bash\">claude\n/doctor\n</code></pre>\n<p><strong>检查项:</strong></p>\n<ul>\n<li>✅ 安装版本</li>\n<li>✅ 配置文件</li>\n<li>✅ API 连接</li>\n<li>✅ MCP 服务器</li>\n<li>✅ 权限设置</li>\n<li>✅ 环境变量</li>\n</ul>\n<hr />\n<h2 id=\"九高级集成与扩展\">九、高级集成与扩展</h2>\n<p>Claude Code 的真正强大之处在于它的可扩展性。通过 LSP 集成和 Agent SDK，甚至可以构建自己的智能开发环境。</p>\n<h3 id=\"91-lsp-集成\">9.1 LSP 集成</h3>\n<h4 id=\"什么是-lsp\">什么是 LSP?</h4>\n<p><strong>LSP (Language Server Protocol)</strong> 是语言服务器协议，通过集成 LSP，Claude Code 现在的代码理解能力达到了 <strong>IDE 级别</strong>。</p>\n<h4 id=\"lsp-的强大能力\">LSP 的强大能力</h4>\n<pre><code class=\"language-bash\"># Claude Code 现在可以:\n- 看到实时报错和警告\n- 跳转到定义\n- 查看类型信息\n- 理解符号引用\n- 分析代码结构\n</code></pre>\n<p><strong>效果对比:</strong></p>\n<table>\n<thead>\n<tr>\n<th>能力</th>\n<th>无 LSP</th>\n<th>有 LSP</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>错误检测</strong></td>\n<td>⭐⭐⭐</td>\n<td>⭐⭐⭐⭐⭐</td>\n</tr>\n<tr>\n<td><strong>类型推断</strong></td>\n<td>⭐⭐⭐</td>\n<td>⭐⭐⭐⭐⭐</td>\n</tr>\n<tr>\n<td><strong>代码导航</strong></td>\n<td>⭐⭐</td>\n<td>⭐⭐⭐⭐⭐</td>\n</tr>\n<tr>\n<td><strong>重构建议</strong></td>\n<td>⭐⭐⭐</td>\n<td>⭐⭐⭐⭐⭐</td>\n</tr>\n</tbody>\n</table>\n<p><strong>实战案例:</strong></p>\n<pre><code class=\"language-bash\"># Claude Code 可以像 IDE 一样理解代码\n\n@src/auth.ts\n这个函数的返回类型是什么?\n# (Claude 会使用 LSP 查看准确的类型定义)\n\n这个函数在哪里被调用了?\n# (Claude 会使用 LSP 查找所有引用)\n\n这里有个类型错误,怎么修复?\n# (Claude 会看到实时报错并提供建议)\n</code></pre>\n<h4 id=\"配置-lsp\">配置 LSP</h4>\n<p>Claude Code 会自动检测项目中的 LSP 服务器:</p>\n<pre><code class=\"language-bash\"># TypeScript 项目\n# 自动使用 tsserver\n\n# Python 项目\n# 自动使用 pylsp\n\n# Go 项目\n# 自动使用 gopls\n</code></pre>\n<p><strong>手动配置 LSP:</strong></p>\n<pre><code class=\"language-json\">// ~/.claude/settings.json\n{\n  \"lsp\": {\n    \"typescript\": {\n      \"command\": \"typescript-language-server\",\n      \"args\": [\"--stdio\"]\n    },\n    \"python\": {\n      \"command\": \"pylsp\",\n      \"args\": [\"--stdio\"]\n    }\n  }\n}\n</code></pre>\n<h3 id=\"92-claude-agent-sdk\">9.2 Claude Agent SDK</h3>\n<h4 id=\"什么是-agent-sdk\">什么是 Agent SDK?</h4>\n<p><strong>Claude Agent SDK</strong> 将 Claude Code 的核心能力(Agent Loop、工具管理、上下文管理)作为一个 SDK 开放了。可以用几十行代码构建一个像 Claude Code 一样强大的自定义智能体。</p>\n<h4 id=\"核心能力\">核心能力</h4>\n<pre><code class=\"language-typescript\">import { Agent, Tool, Context } from '@anthropic-ai/agent-sdk';\n\n// 创建自定义 Agent\nconst myAgent = new Agent({\n  model: 'claude-sonnet-4-5',\n  tools: [\n    new Tool({\n      name: 'readFile',\n      execute: async (path: string) =&gt; {\n        return fs.readFileSync(path, 'utf-8');\n      }\n    }),\n    new Tool({\n      name: 'writeFile',\n      execute: async (path: string, content: string) =&gt; {\n        fs.writeFileSync(path, content);\n      }\n    })\n  ],\n  context: new Context({\n    maxSize: 200_000, // 200K tokens\n    compression: 'auto'\n  })\n});\n\n// 运行 Agent\nconst result = await myAgent.run('创建一个用户认证系统');\n</code></pre>\n<h4 id=\"实战案例-1\">实战案例</h4>\n<p><strong>案例1:自动化测试生成器</strong></p>\n<pre><code class=\"language-typescript\">import { Agent, Tool } from '@anthropic-ai/agent-sdk';\n\nclass TestGenerator extends Agent {\n  constructor() {\n    super({\n      model: 'claude-sonnet-4-5',\n      instructions: '你是一个测试专家,专门为代码编写全面的测试用例',\n      tools: [\n        new Tool({\n          name: 'readSource',\n          description: '读取源代码文件',\n          execute: async (path: string) =&gt; {\n            return fs.readFileSync(path, 'utf-8');\n          }\n        }),\n        new Tool({\n          name: 'writeTest',\n          description: '编写测试文件',\n          execute: async (path: string, content: string) =&gt; {\n            fs.writeFileSync(path, content);\n          }\n        }),\n        new Tool({\n          name: 'runTests',\n          description: '运行测试',\n          execute: async () =&gt; {\n            return execSync('npm test').toString();\n          }\n        })\n      ]\n    });\n  }\n}\n\n// 使用\nconst testGen = new TestGenerator();\nawait testGen.run(`\n  为 src/auth.ts 编写测试,包括:\n  1. 正常登录场景\n  2. 错误密码场景\n  3. 用户不存在场景\n  4. Token 验证场景\n\n  然后运行测试确保所有测试通过\n`);\n</code></pre>\n<p><strong>案例2:代码审查机器人</strong></p>\n<pre><code class=\"language-typescript\">import { Agent, Tool } from '@anthropic-ai/agent-sdk';\n\nclass CodeReviewer extends Agent {\n  constructor() {\n    super({\n      model: 'claude-opus-4-5',\n      instructions: `\n        你是一个代码审查专家。审查代码时关注:\n        1. 安全漏洞(OWASP Top 10)\n        2. 性能问题\n        3. 代码规范\n        4. 最佳实践\n\n        输出格式:\n        - 严重程度(Critical/High/Medium/Low)\n        - 问题描述\n        - 修复建议\n        - 代码示例\n      `,\n      tools: [\n        new Tool({\n          name: 'readFile',\n          execute: async (path: string) =&gt; {\n            return fs.readFileSync(path, 'utf-8');\n          }\n        }),\n        new Tool({\n          name: 'gitDiff',\n          execute: async () =&gt; {\n            return execSync('git diff').toString();\n          }\n        })\n      ]\n    });\n  }\n}\n\n// 使用\nconst reviewer = new CodeReviewer();\nconst review = await reviewer.run('审查当前的代码变更');\n\nconsole.log(review);\n/*\n输出:\n## 🔴 Critical: SQL 注入风险\n\n位置: src/auth.ts:45\n问题: 直接拼接 SQL 查询,存在注入风险\n建议: 使用参数化查询\n\n代码示例:\n\\`\\`\\`typescript\n// ❌ 不安全\nconst query = `SELECT * FROM users WHERE id = ${userId}`;\n\n// ✅ 安全\nconst query = 'SELECT * FROM users WHERE id = ?';\nawait db.query(query, [userId]);\n\\`\\`\\`\n*/\n</code></pre>\n<p><strong>案例3:自动化部署助手</strong></p>\n<pre><code class=\"language-typescript\">import { Agent, Tool } from '@anthropic-ai/agent-sdk';\n\nclass DeploymentBot extends Agent {\n  constructor() {\n    super({\n      model: 'claude-sonnet-4-5',\n      instructions: `\n        你是一个部署专家。部署流程:\n        1. 运行测试\n        2. 构建项目\n        3. 部署到 staging\n        4. 验证部署\n        5. 部署到生产\n        6. 监控错误\n        如果任何步骤失败,立即回滚\n      `,\n      tools: [\n        new Tool({\n          name: 'runTests',\n          execute: async () =&gt; {\n            return execSync('npm test').toString();\n          }\n        }),\n        new Tool({\n          name: 'build',\n          execute: async () =&gt; {\n            return execSync('npm run build').toString();\n          }\n        }),\n        new Tool({\n          name: 'deploy',\n          execute: async (env: 'staging' | 'production') =&gt; {\n            return execSync(`npm run deploy:${env}`).toString();\n          }\n        }),\n        new Tool({\n          name: 'verify',\n          execute: async (url: string) =&gt; {\n            return fetch(`${url}/health`).then(r =&gt; r.json());\n          }\n        }),\n        new Tool({\n          name: 'rollback',\n          execute: async () =&gt; {\n            return execSync('npm run rollback').toString();\n          }\n        }),\n        new Tool({\n          name: 'notify',\n          execute: async (message: string) =&gt; {\n            // 发送 Slack 通知\n            await slackClient.chat.postMessage({\n              channel: '#deployments',\n              text: message\n            });\n          }\n        })\n      ]\n    });\n  }\n}\n\n// 使用\nconst deployBot = new DeploymentBot();\nawait deployBot.run('部署最新版本到生产环境');\n</code></pre>\n<h4 id=\"agent-sdk-的核心优势\">Agent SDK 的核心优势</h4>\n<p><strong>1. 完整的 Agent Loop</strong></p>\n<pre><code class=\"language-typescript\">// 自动处理:\n- 思考(Thinking)\n- 工具调用(Tool Use)\n- 结果观察(Observation)\n- 迭代优化(Iteration)\n</code></pre>\n<p><strong>2. 强大的上下文管理</strong></p>\n<pre><code class=\"language-typescript\">const context = new Context({\n  maxSize: 200_000,\n  compression: 'auto', // 自动压缩历史对话\n  priority: 'recent'   // 优先保留最近的内容\n});\n</code></pre>\n<p><strong>3. 灵活的工具系统</strong></p>\n<pre><code class=\"language-typescript\">// 支持各种类型的工具\n- 文件操作\n- API 调用\n- 数据库查询\n- 网络请求\n- 自定义脚本\n</code></pre>\n<p><strong>4. 可观测性</strong></p>\n<pre><code class=\"language-typescript\">const agent = new Agent({\n  onThink: (thought) =&gt; console.log('思考:', thought),\n  onToolUse: (tool, args) =&gt; console.log('调用工具:', tool),\n  onError: (error) =&gt; console.error('错误:', error),\n  onComplete: (result) =&gt; console.log('完成:', result)\n});\n</code></pre>\n<h4 id=\"使用场景\">使用场景</h4>\n<table>\n<thead>\n<tr>\n<th>场景</th>\n<th>价值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>CI/CD 集成</strong></td>\n<td>自动化代码审查和测试</td>\n</tr>\n<tr>\n<td><strong>自动化运维</strong></td>\n<td>智能部署和监控</td>\n</tr>\n<tr>\n<td><strong>文档生成</strong></td>\n<td>自动生成 API 文档</td>\n</tr>\n<tr>\n<td><strong>代码迁移</strong></td>\n<td>批量重构和升级</td>\n</tr>\n<tr>\n<td><strong>教学工具</strong></td>\n<td>编程辅导和练习</td>\n</tr>\n</tbody>\n</table>\n<hr />\n<h2 id=\"附录\">附录</h2>\n<h3 id=\"a-快速参考卡\">A. 快速参考卡</h3>\n<h4 id=\"核心命令速查\">核心命令速查</h4>\n<pre><code class=\"language-bash\"># 基础操作\nclaude                    # 启动 Claude Code\nclaude -p \"prompt\"        # Headless 模式\nclaude --version          # 查看版本\n\n# 斜杠命令\n/clear                    # 清空对话\n/compact                  # 压缩对话\n/context                  # 查看上下文\n/cost                     # 查看费用\n/model                    # 切换模型\n/mcp                      # 管理 MCP\n/skills                   # 查看 Skills\n/hooks                    # 管理 Hooks\n/agents                   # 管理子代理\n/status                   # 系统状态\n/doctor                   # 诊断环境\n\n# 快捷键\nCtrl+R                    # 搜索历史\nCtrl+S                    # 暂存提示词\nCtrl+C                    # 中止操作\nShift+Tab × 2             # Plan 模式\nESC ESC                   # 回退操作\nAlt+V                     # 粘贴图片\n\n# 文件操作\n@file.ts                  # 引用文件\n@src/                     # 引用目录\n!command                  # 执行 Bash\n</code></pre>\n<h3 id=\"b-配置文件清单\">B. 配置文件清单</h3>\n<table>\n<thead>\n<tr>\n<th>配置文件</th>\n<th>位置</th>\n<th>作用</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>CLAUDE.md</strong></td>\n<td>项目根目录</td>\n<td>项目配置</td>\n</tr>\n<tr>\n<td><strong>settings.json</strong></td>\n<td>~/.claude/ 或项目/.claude/</td>\n<td>全局/项目设置</td>\n</tr>\n<tr>\n<td><strong>agents.json</strong></td>\n<td>~/.claude/ 或项目/.claude/</td>\n<td>子代理配置</td>\n</tr>\n<tr>\n<td><strong>mcp.json</strong></td>\n<td>~/.claude/</td>\n<td>MCP 服务器配置</td>\n</tr>\n<tr>\n<td><strong>hooks/</strong></td>\n<td>~/.claude/hooks/</td>\n<td>Hook 脚本</td>\n</tr>\n<tr>\n<td><strong>skills/</strong></td>\n<td>~/.claude/skills/</td>\n<td>自定义 Skills</td>\n</tr>\n<tr>\n<td><strong>rules/</strong></td>\n<td>项目/.claude/rules/</td>\n<td>模块化规则</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"c-推荐资源\">C. 推荐资源</h3>\n<h4 id=\"官方资源\">官方资源</h4>\n<ul>\n<li><strong>Claude Code 官网:</strong> <a href=\"https://code.claude.com\" rel=\"noopener nofollow\" target=\"_blank\">https://code.claude.com</a></li>\n<li><strong>文档:</strong> <a href=\"https://code.claude.com/docs\" rel=\"noopener nofollow\" target=\"_blank\">https://code.claude.com/docs</a></li>\n<li><strong>GitHub:</strong> <a href=\"https://github.com/anthropics/claude-code\" rel=\"noopener nofollow\" target=\"_blank\">https://github.com/anthropics/claude-code</a></li>\n<li><strong>Skills 库:</strong> <a href=\"https://github.com/anthropics/skills\" rel=\"noopener nofollow\" target=\"_blank\">https://github.com/anthropics/skills</a></li>\n<li><strong>MCP 服务器:</strong> <a href=\"https://github.com/modelcontextprotocol\" rel=\"noopener nofollow\" target=\"_blank\">https://github.com/modelcontextprotocol</a></li>\n</ul>\n<hr />\n<h2 id=\"总结\">总结</h2>\n<p>Claude Code 真的很强，是一个强大的系统级 AI Agent，用好这个工具能为自己提高很多工作效率。</p>\n<h3 id=\"核心能力清单\">核心能力清单</h3>\n<ul>\n<li>✅ <strong>Skills:</strong> 预封装的工作流,快速复用专业能力</li>\n<li>✅ <strong>Hooks:</strong> 事件驱动的自动化,打造个性化工作流</li>\n<li>✅ <strong>Plugins:</strong> 完整解决方案,一键安装多功能套件</li>\n<li>✅ <strong>MCP Servers:</strong> 外部服务集成,无限扩展能力边界</li>\n<li>✅ <strong>Subagents:</strong> 并行处理复杂任务,提升团队协作效率</li>\n<li>✅ <strong>CLAUDE.md:</strong> 项目记忆系统,让 AI 理解你的项目,并支持自我进化</li>\n<li>✅ <strong>Plan 模式:</strong> 先规划后执行,减少返工提高质量(90% 时间都在用)</li>\n<li>✅ <strong>Slash Commands:</strong> 复杂工作流一键执行,团队共享最佳实践</li>\n<li>✅ <strong>Extended Thinking:</strong> ultrathink 深度思考模式,解决复杂问题</li>\n<li>✅ <strong>Sandbox 模式:</strong> 安全防护机制,保护你的工作环境</li>\n<li>✅ <strong>Headless 模式:</strong> CI/CD 集成,实现自动化工作流</li>\n<li>✅ <strong>LSP 集成:</strong> IDE 级代码理解,实时错误检测</li>\n<li>✅ <strong>Agent SDK:</strong> 构建自定义智能体,几十行代码创造强大工具</li>\n</ul>\n<h3 id=\"顶级开发者的秘诀\">顶级开发者的秘诀</h3>\n<p>来自 Claude Code 创始人和 Anthropic 团队的实战经验:</p>\n<p><strong>1. 并行处理是效率倍增的关键</strong></p>\n<ul>\n<li>同时运行 5 个终端实例 + 5-10 个网页会话</li>\n<li>利用系统通知和多设备协作</li>\n<li>效率提升可达 1900%+</li>\n</ul>\n<p><strong>2. AI 进化机制让工具越用越聪明</strong></p>\n<ul>\n<li>在 PR 评论中直接 @claude 反馈</li>\n<li>自动将教训写入 CLAUDE.md</li>\n<li>整个团队的 AI 助手持续进化</li>\n</ul>\n<p><strong>3. 验证闭环是质量保证的基石</strong></p>\n<ul>\n<li>永远给 Claude 验证自己工作的方法</li>\n<li>代码质量提升 2-3 倍</li>\n<li>返工率降低到 5%</li>\n</ul>\n<p><strong>4. 选择合适的工具</strong></p>\n<ul>\n<li>简单任务: Haiku 4.5 或国产模型</li>\n<li>日常开发: Sonnet 4.5</li>\n<li>复杂任务: Opus 4.5 + Thinking(创始人首选)</li>\n<li>追求极致效率:聪明的大模型比\"快但笨\"的小模型更快</li>\n</ul>\n<p><strong>5. 先规划后执行</strong></p>\n<ul>\n<li>90% 的时间使用 Plan 模式</li>\n<li>你是架构师,Claude 是执行者</li>\n<li>一次做对,永远比反复修改更省时间</li>\n</ul>\n<h3 id=\"设计哲学\">设计哲学</h3>\n<p>看完这些技巧会发现 Claude Code 的设计哲学非常有意思:</p>\n<ul>\n<li>通过 <strong>Plan Mode</strong>,它尊重人的决策权</li>\n<li>通过 <strong>Hooks</strong> 和 <strong>Sandbox</strong>,它给人提供了控制权</li>\n<li>通过 <strong>Subagents</strong> 和 <strong>Automation</strong>,它帮人分担了繁琐的执行工作</li>\n<li>通过 <strong>LSP</strong> 和 <strong>Agent SDK</strong>,它提供了无限的扩展可能</li>\n</ul>\n<blockquote>\n<p>正如 Ado Kukic 所说:\"用得最好的开发者,不是那些把所有事情都丢给 AI 的人,而是那些懂得何时使用计划模式、何时开启深度思考、如何设置安全边界的人。\"</p>\n</blockquote>\n<p>Claude Code 不仅仅是一个工具,它是一个可编程、可扩展、可进化的智能开发环境。你的创造力决定了它的上限。</p>\n\n</div>\n<div id=\"MySignature\">\n    <p>本文来自博客园，作者：<a href=\"https://www.cnblogs.com/knqiufan/\" target=\"_blank\">knqiufan</a>，转载请注明原文链接：<a href=\"https://www.cnblogs.com/knqiufan/p/19449849\" target=\"_blank\">https://www.cnblogs.com/knqiufan/p/19449849</a></p>\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-07 00:55</span>&nbsp;\n<a href=\"https://www.cnblogs.com/knqiufan\">knqiufan</a>&nbsp;\n阅读(<span id=\"post_view_count\">471</span>)&nbsp;\n评论(<span id=\"post_comment_count\">6</span>)&nbsp;\n&nbsp;\n<a href=\"\">收藏</a>&nbsp;\n<a href=\"\">举报</a>\n</div>"
    },
    {
      "title": "吴恩达深度学习课程五：自然语言处理  第一周：循环神经网络 （二）循环神经网络",
      "link": "https://www.cnblogs.com/Goblinscholar/p/19449622",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/Goblinscholar/p/19449622\" id=\"cb_post_title_url\" title=\"发布于 2026-01-06 22:53\">\n    <span>吴恩达深度学习课程五：自然语言处理  第一周：循环神经网络 （二）循环神经网络</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<p>此分类用于记录吴恩达深度学习课程的学习笔记。<br />\n课程相关信息链接如下：</p>\n<ol>\n<li>原课程视频链接：<a href=\"https://www.bilibili.com/video/BV1FT4y1E74V?buvid=XU762317353676D786954061C192FE625463B&amp;from_spmid=playlist.playlist-detail.0.0&amp;is_story_h5=false&amp;mid=zqernykrmpf7XfIorMR%2FnA%3D%3D&amp;plat_id=116&amp;share_from=ugc&amp;share_medium=android&amp;share_plat=android&amp;share_session_id=ce0bc526-db69-428a-962e-c65ed8c267bc&amp;share_source=COPY&amp;share_tag=s_i&amp;spmid=united.player-video-detail.0.0&amp;timestamp=1713085655&amp;unique_k=DfBgvFW&amp;up_id=8654113&amp;vd_source=e035e9878d32f414b4354b839a4c31a4\" rel=\"noopener nofollow\" target=\"_blank\">[双语字幕]吴恩达深度学习deeplearning.ai</a></li>\n<li>github课程资料，含课件与笔记:<a href=\"https://github.com/robbertliu/deeplearning.ai-andrewNG\" rel=\"noopener nofollow\" target=\"_blank\">吴恩达深度学习教学资料</a></li>\n<li>课程配套练习（中英）与答案：<a href=\"https://blog.csdn.net/u013733326/article/details/79827273\" rel=\"noopener nofollow\" target=\"_blank\">吴恩达深度学习课后习题与答案</a></li>\n</ol>\n<p>本篇为第五课的第一周内容，<a href=\"https://www.bilibili.com/video/BV1FT4y1E74V?spm_id_from=333.788.videopod.episodes&amp;vd_source=e035e9878d32f414b4354b839a4c31a4&amp;p=152\" rel=\"noopener nofollow\" target=\"_blank\">1.2</a>到<a href=\"https://www.bilibili.com/video/BV1FT4y1E74V?spm_id_from=333.788.player.switch&amp;vd_source=e035e9878d32f414b4354b839a4c31a4&amp;p=154\" rel=\"noopener nofollow\" target=\"_blank\">1.4</a>的内容。</p>\n<hr />\n<p>本周为第五课的第一周内容，与 CV 相对应的，这一课所有内容的中心只有一个：<strong>自然语言处理（Natural Language Processing，NLP）</strong>。<br />\n应用在深度学习里，它是专门用来进行<strong>文本与序列信息建模</strong>的模型和技术，本质上是在全连接网络与统计语言模型基础上的一次“结构化特化”，也是人工智能中<strong>最贴近人类思维表达方式</strong>的重要研究方向之一。<br />\n<strong>这一整节课同样涉及大量需要反复消化的内容，横跨机器学习、概率统计、线性代数以及语言学直觉。</strong><br />\n语言不像图像那样“直观可见”，更多是抽象符号与上下文关系的组合，因此<strong>理解门槛反而更高</strong>。<br />\n因此，我同样会尽量补足必要的背景知识，尽可能用比喻和实例降低理解难度。<br />\n本篇的内容关于<strong>循环神经网络</strong>，在 NLP 中，循环神经网络就像卷积网络在 CV 中一样，是处理序列数据的核心特化模型，专门用于捕捉上下文依赖。</p>\n<h1 id=\"1-nlp-中的符号规范\">1. NLP 中的符号规范</h1>\n<p>在正式开始引入循环神经网络前，我们同样需要先了解一些相关的符号规范，主要是在数据的表示方面。</p>\n<h2 id=\"11-模型的输入与输出\">1.1 模型的输入与输出</h2>\n<p><img alt=\"image.png\" src=\"https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260106225017927-302231808.png\" /><br />\n再复述一下：</p>\n<ol>\n<li><span class=\"math inline\">\\(x^{&lt;t&gt;}\\)</span> ：<strong>输入序列在第 <span class=\"math inline\">\\(t\\)</span> 个时间步的输入</strong>。</li>\n<li><span class=\"math inline\">\\(y^{&lt;t&gt;}\\)</span> ：<strong>输出序列在第 <span class=\"math inline\">\\(t\\)</span> 个时间步的输出</strong>。</li>\n<li><span class=\"math inline\">\\(T_x\\)</span>：<strong>输入序列的长度</strong>。</li>\n<li><span class=\"math inline\">\\(T_y\\)</span>：<strong>输出序列的长度</strong>。</li>\n</ol>\n<p>现在，结合我们之前的符号规范，就可以知道：<br />\n<strong><span class=\"math inline\">\\(X^{(n)&lt;t&gt;}\\)</span> 代表一批次输入中第 <span class=\"math inline\">\\(n\\)</span> 个样本的第 <span class=\"math inline\">\\(t\\)</span> 个元素。</strong></p>\n<h2 id=\"12-词典vocabulary\">1.2 词典（Vocabulary）</h2>\n<p>经过上一部分，我们知道，<span class=\"math inline\">\\(x^{&lt;t&gt;}\\)</span> 代表了一个序列中的某一个元素。<br />\n但是又有一个新的问题：在 NLP 任务中，<span class=\"math inline\">\\(x^{&lt;t&gt;}\\)</span> 往往是一个<strong>离散的符号</strong>，例如某个具体的词（如 <em>hello</em>、<em>Hi</em>），而神经网络本质上只能处理<strong>数值向量</strong>，并不能直接理解“词”这一抽象概念。</p>\n<p>因此，在将文本序列送入模型之前，我们必须先完成一件事情：给“词”一个能输入网络的表示方法，<strong>即建立一种从“词”到“数值表示”的映射规则。</strong><br />\n显然，这种映射关系必须是<strong>确定且唯一的</strong>，即每一个词都对应一个唯一的数值表示。<br />\n而<strong>其中一种</strong>表示方法，就是我们在多分类标签表示中使用的<strong>独热编码</strong>。<br />\n我们看一个简单的示例：<br />\n假设我们当前的<strong>词典</strong>只包含 4 个词：</p>\n<p></p><div class=\"math display\">\\[{\\text{hello},\\ \\text{Hi},\\ \\text{thanks},\\ \\text{bye}}\n\\]</div><p></p><p>我们可以为词典中的每一个词分配一个唯一的索引：</p>\n<p></p><div class=\"math display\">\\[\\text{hello}\\rightarrow 1,\\quad \\text{Hi}\\rightarrow 2,\\quad \\text{thanks}\\rightarrow 3,\\quad \\text{bye}\\rightarrow 4\n\\]</div><p></p><p>在这种设定下，每一个词都可以用一个<strong>长度为 4 的独热向量</strong>来表示。<br />\n例如：</p>\n<ul>\n<li><span class=\"math inline\">\\(\\text{hello}\\)</span> 对应的表示为：<span class=\"math inline\">\\(x = [1,0,0,0]\\)</span></li>\n<li><span class=\"math inline\">\\(\\text{Hi}\\)</span> 对应的表示为：<span class=\"math inline\">\\(x = [0,1,0,0]\\)</span><br />\n<strong>词典中的每个词都有且仅有一个位置为 1，其余位置全部为 0。</strong><br />\n从模型的角度来看，这样的表示方式意味着：模型在任意时刻接收到的输入，本质上是一个高维稀疏向量，这正好满足“词 → 数值向量”的一对一映射要求，因此能够直接作为神经网络的输入。</li>\n</ul>\n<p>然而，在真实的 NLP 任务中，一个不可忽视的现实问题是：<strong>词典的规模通常非常巨大。</strong><br />\n在常见的语言建模或翻译任务中，词典大小往往达到<strong>数万甚至百万级别</strong>。<br />\n这意味着：</p>\n<ul>\n<li>独热向量的维度极高</li>\n<li>向量极度稀疏</li>\n<li>计算和存储成本都非常不经济</li>\n</ul>\n<p>因此，在实际模型中，我们往往会采用一种更紧凑、也更具语义表达能力的词表示方法，叫做<strong>词向量（Embedding）</strong> ，我们会在之后的内容详细展开它。<br />\n<img alt=\"image.png\" src=\"https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260106224853098-1209020991.png\" /><br />\n此外，还会出现另一个问题：  <strong>测试或实际使用时，可能会遇到词典中从未出现过的词。</strong><br />\n对于这种<strong>不在词典中的词（Out-Of-Vocabulary，OOV）</strong>，常见的一种处理方式是在词典中额外引入一个特殊标记<code>&lt;UNK&gt;</code>，用于统一表示所有未知词，这种方式虽然简单，但也会丢失不同未知词之间的差异性，这也是后续子词建模方法要解决的问题之一。</p>\n<p>这些我们都会在之后的实际演示中详细展开，现在，先了解简单的符号规范后，我们正式开始引入循环神经网络。</p>\n<h1 id=\"2-循环神经网络recurrent-neural-networkrnn\">2. 循环神经网络（Recurrent Neural Network，RNN）</h1>\n<p>在<a href=\"https://www.cnblogs.com/Goblinscholar/p/19437798\" target=\"_blank\">上一篇</a>对序列模型的介绍中，我们已经知道：全连接网络和卷积网络并不适合用来处理序列数据。<br />\n我们需要一种模型，<strong>在处理当前输入的同时，能够保留并更新对“过去信息”的表示，让模型在理解当前内容时，不是孤立地“看这一刻”，而是基于整个上下文来判断。</strong><br />\n而这，就是 RNN 的基本思想。<br />\nRNN最早可追溯到 Jordan（1986）对序列连接主义模型的研究，而现代深度学习中常用的 RNN 基本形式，则来源于 Elman 在1990年发表的一篇论文： <a href=\"https://langev.com/pdf/elman90findingStructure.pdf?\" rel=\"noopener nofollow\" target=\"_blank\">Finding Structure in Time</a>中提出的递归状态网络结构。<br />\n可以看到，尽管论文距今已有几十年，但像最初的 CNN 一样，RNN 的思想并没有被时间淹没，而是不断被推广和创新，最终成为现代 NLP 中不可或缺的基础模型。</p>\n<p>现在，我们用一个最简单的<strong>单层循环神经网络</strong>来介绍 RNN 的传播过程及其特点。</p>\n<h2 id=\"21-单层循环神经网络的结构\">2.1 单层循环神经网络的结构</h2>\n<p>来看课程里这样一个循环网络的<strong>传播示意图</strong>：<br />\n<img alt=\"image.png\" src=\"https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260106224834808-1322487049.png\" /><br />\n你可能会觉得，这个结构看起来好像不像传统意义上的“单层网络”，反而更像每一层都直接接收原始输入的全连接网络。<br />\n其实这正体现了 RNN 与 FN 或 CNN 的本质区别：<strong>在 RNN 中，每个时间步的隐藏状态不会直接传给下一层，而是传递给下一个时间步的自身。</strong><br />\n也就是说，这个网络的实际结构是这样的：<br />\n<img alt=\"image.png\" src=\"https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260106224835295-122620775.png\" /><br />\n也就是说，RNN 本质上就是<strong>在全连接层基础上加了时间维度的循环连接</strong>。<br />\n你会发现，<strong>如果抛开传播逻辑不看，单层循环网络实际上就是一层全连接层。</strong><br />\n但这也恰恰说明了它的传播逻辑的重要性，到底是怎么样的设计能让单层的全连接层一跃而成为 NLP 的基石？<br />\n我们继续。</p>\n<h2 id=\"22-单层循环神经网络的正向传播\">2.2 单层循环神经网络的正向传播</h2>\n<p>了解了 RNN 的基本逻辑后， 现在，我们就来演示一下单层 RNN 的具体传播过程中的一些细节：<br />\n<img alt=\"image.png\" src=\"https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260106224834545-1669402886.png\" /><br />\n了解了这些后，我们规范一下单层 RNN 的正向传播过程：</p>\n<ol>\n<li><strong>初始状态</strong><br />\nRNN 在第一个时间步输入第一个元素 <span class=\"math inline\">\\(x^{&lt;1&gt;}\\)</span>（例如“韩”）时，同时会引入初始的伪激活值 (<span class=\"math inline\">\\(a^{&lt;0&gt;}\\)</span>) 作为网络的初始状态，<span class=\"math inline\">\\(a^{&lt;0&gt;}\\)</span> 通常设为零向量或随机初始化。</li>\n<li><strong>逐步处理序列</strong><br />\n每个时间步，RNN 会将当前输入 <span class=\"math inline\">\\(x^{&lt;t&gt;}\\)</span> 与上一时间步的隐藏状态 <span class=\"math inline\">\\(a^{&lt;t-1&gt;}\\)</span> 一起输入网络，计算当前的隐藏状态 <span class=\"math inline\">\\(a^{&lt;t&gt;}\\)</span>,例如在第二步，输入为 <span class=\"math inline\">\\(x^{&lt;2&gt;}\\)</span>（“信”）和 <span class=\"math inline\">\\(a^{&lt;1&gt;}\\)</span>，得到 <span class=\"math inline\">\\(a^{&lt;2&gt;}\\)</span>。</li>\n<li><strong>输出生成</strong><br />\n每一步的隐藏状态 <span class=\"math inline\">\\(a^{&lt;t&gt;}\\)</span> 都会产生一个预测输出 <span class=\"math inline\">\\(\\hat{y}^{&lt;t&gt;}\\)</span>。输出不仅依赖当前输入，也包含了前面时间步的历史信息，这就是 RNN 能够“记忆”序列上下文的原因。</li>\n<li><strong>信息传递</strong><br />\n隐藏状态会沿时间步向后传递，使后续时间步的输出能够利用之前所有的序列信息，最终一步输出 <span class=\"math inline\">\\(\\hat{y}^{&lt;T_x&gt;}\\)</span> 包含整个序列的信息，可用于完整序列的预测或判断。</li>\n</ol>\n<p>明白了传播逻辑后，我们便可以更好地理解 RNN 正向传播的公式表达，我们先<strong>说明一下网络中的参数表示：</strong><br />\n<img alt=\"image.png\" src=\"https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260106225018168-1671840978.png\" /><br />\n现在便摆出正向传播的通式如下：</p>\n<p></p><div class=\"math display\">\\[a^{&lt;t&gt;} = g(W_{aa} a^{&lt;t-1&gt;} + W_{ax} x^{&lt;t&gt;} + b_a)\n\\]</div><p></p><p></p><div class=\"math display\">\\[y^{&lt;t&gt;} = g(W_{ya} a^{&lt;t&gt;} + b_y)\n\\]</div><p></p><p>总结一下：RNN 的正向传播就是<strong>每个时间步将当前输入和上一隐藏状态结合，更新当前隐藏状态并生成输出，隐藏状态沿时间步传递，从而使网络能够逐步累积和利用序列历史信息</strong>。</p>\n<p>了解了正向传播的大致流程后，我们再看看 RNN 的反向传播是如何进行的。</p>\n<h2 id=\"23-单层循环神经网络的反向传播\">2.3 单层循环神经网络的反向传播</h2>\n<p>经过上一部分，我们已经知道：RNN 的正向传播，本质上是在<strong>时间维度上反复使用同一组参数</strong>，并通过隐藏状态把历史信息向后传递。</p>\n<p>那么问题自然就来了：  <strong>这些跨时间步传递的信息，反向传播时该怎么“算梯度”？</strong></p>\n<p>答案是： 怎么过去就怎么回来——RNN 的反向传播，并不是在“层”之间传播，而是<strong>在时间维度上反向传播</strong>，这种传播被称为 <strong>BPTT（Backpropagation Through Time）</strong> 。<br />\n我们来简要演示一下这个过程：<br />\n<img alt=\"image.png\" src=\"https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260106225121561-283647183.png\" /></p>\n<p>在监督学习中，反向传播的起点永远是<strong>损失函数</strong>，对于 RNN 来说，损失通常是<strong>所有时间步损失的累加</strong>（默认 <span class=\"math inline\">\\(T_x = T_y\\)</span>）：</p>\n<p></p><div class=\"math display\">\\[\\mathcal{L}\n=\n\\sum_{t=1}^{T_x}\n\\mathcal{L}^{&lt;t&gt;}(\\hat{y}^{&lt;t&gt;}, y^{&lt;t&gt;})\n\\]</div><p></p><p>也就是说，<strong>每一个时间步的输出都会对总损失产生贡献</strong>。<br />\n而对于单步的损失，最常用的仍然是我们比较熟悉的<a href=\"https://www.cnblogs.com/Goblinscholar/p/19133349\" target=\"_blank\">交叉熵损失</a>,你可以通过链接查看我们之前的介绍，应用在 RNN 中，它的公式是这样的：</p>\n<p></p><div class=\"math display\">\\[\\mathcal{L}\n=\n\\sum_{t=1}^{T_x}\n\\left(\n- \\sum_{k=1}^{C} y_k^{&lt;t&gt;} \\log \\hat{y}_k^{&lt;t&gt;}\n\\right)\n\\]</div><p></p><p>因此，反向传播时，我们会从最后一个时间步开始，逐步向前，把每个时间步的误差信号往回传， 由于参数在所有时间步共享，每个时间步的损失都会通过时间链路对这些参数产生梯度贡献，最终用于更新的梯度，是<strong>沿时间维度反向传播后，各时间步贡献的综合结果</strong>。</p>\n<p>这就是单层循环神经网络的反向传播，这样我们就对 RNN 的基本运行逻辑有了大体的了解。</p>\n<h1 id=\"3总结\">3.总结</h1>\n<table>\n<thead>\n<tr>\n<th>概念</th>\n<th>原理</th>\n<th>比喻</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>序列数据</td>\n<td>数据元素具有<strong>明确顺序</strong>，当前理解依赖历史上下文</td>\n<td>一句话的意思要从前往后读，不能只看中间一个词。</td>\n</tr>\n<tr>\n<td>时间步 <span class=\"math inline\">\\(t\\)</span></td>\n<td>序列中第 <span class=\"math inline\">\\(t\\)</span> 个位置，用于展开时间维度</td>\n<td>时间轴上的第 <span class=\"math inline\">\\(t\\)</span> 帧画面。</td>\n</tr>\n<tr>\n<td>输入 <span class=\"math inline\">\\(x^{}\\)</span></td>\n<td>第 <span class=\"math inline\">\\(t\\)</span> 个时间步送入模型的输入向量</td>\n<td>当前这一秒你听到的一个词。</td>\n</tr>\n<tr>\n<td>预测输出 <span class=\"math inline\">\\(\\hat{y}^{}\\)</span></td>\n<td>模型在第 <span class=\"math inline\">\\(t\\)</span> 个时间步给出的预测结果</td>\n<td>听到一句话后，此刻你做出的判断。</td>\n</tr>\n<tr>\n<td>序列长度 <span class=\"math inline\">\\(T_x, T_y\\)</span></td>\n<td>输入序列与输出序列的长度（可相同或不同）</td>\n<td>一段话的字数 vs 你回答时说了几句话。</td>\n</tr>\n<tr>\n<td>词典（Vocabulary）</td>\n<td>从词到索引的<strong>一一映射表</strong></td>\n<td>电话簿：名字 ↔ 电话号码</td>\n</tr>\n<tr>\n<td>RNN 核心思想</td>\n<td>当前状态由<strong>当前输入 + 过去状态</strong>共同决定</td>\n<td>你理解一句话时，会不断修正之前的理解。</td>\n</tr>\n<tr>\n<td>BPTT</td>\n<td>梯度沿时间维度反向传播</td>\n<td>从句尾倒回去反思：是哪一步理解错了。</td>\n</tr>\n<tr>\n<td>梯度累积</td>\n<td>参数梯度来自所有时间步的综合贡献</td>\n<td>每一句话的错误都会影响你下次的理解方式。</td>\n</tr>\n</tbody>\n</table>\n<p>。</p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-06 22:53</span>&nbsp;\n<a href=\"https://www.cnblogs.com/Goblinscholar\">哥布林学者</a>&nbsp;\n阅读(<span id=\"post_view_count\">30</span>)&nbsp;\n评论(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">收藏</a>&nbsp;\n<a href=\"\">举报</a>\n</div>"
    },
    {
      "title": "解决java客户端连接ssh失败问题",
      "link": "https://www.cnblogs.com/hellxz/p/19449582",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/hellxz/p/19449582\" id=\"cb_post_title_url\" title=\"发布于 2026-01-06 22:24\">\n    <span>解决java客户端连接ssh失败问题</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h2 id=\"问题现象\">问题现象</h2>\n<p>有的运维工具使用了java的ssh客户端，这些客户端和服务端间有时会出现加密算法协商失败和主机密钥类型协商失败的问题，该问题是由于新客户端/服务端禁用了相关的不安全算法和密钥类型，本文简要记录下该问题的解决方法以备不时之需。</p>\n<p>错误常见提示如下：</p>\n<pre><code>#加密算法协商失败\nUnable to negotiate with 192.168.56.99 port 54234: no matching key exchange method found. Their offer: diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1 [preauth]\n\n#主机密钥类型协商失败\nUnable to negotiate with 192.168.56.99 port 22: no matching host key type found. Their offer: ssh-rsa,ssh-dss [preauth]\n</code></pre>\n<h2 id=\"解决方法\">解决方法</h2>\n<p>二选一：</p>\n<h3 id=\"较新的客户端兼容旧服务端\"><strong>较新的客户端兼容旧服务端</strong></h3>\n<p>以Jsch为例，升级新版本。</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.jcraft&lt;/groupId&gt;\n    &lt;artifactId&gt;jsch&lt;/artifactId&gt;\n    &lt;version&gt;0.1.55&lt;/version&gt; &lt;!-- 检查最新版本 --&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>代码中配置连接属性：</p>\n<pre><code class=\"language-java\">import com.jcraft.jsch.*;\n\npublic class SSHConnector {\n    public static void main(String[] args) {\n        try {\n            JSch jsch = new JSch();\n            \n            // 设置支持的算法\n            java.util.Properties config = new java.util.Properties();\n            \n            // 关键配置：指定算法\n            config.put(\"kex\", \"diffie-hellman-group1-sha1,diffie-hellman-group14-sha1\");\n            config.put(\"server_host_key\", \"ssh-rsa,ssh-dss\");\n            config.put(\"cipher.s2c\", \"aes128-ctr,aes128-cbc,3des-cbc\");\n            config.put(\"cipher.c2s\", \"aes128-ctr,aes128-cbc,3des-cbc\");\n            config.put(\"mac.s2c\", \"hmac-sha1\");\n            config.put(\"mac.c2s\", \"hmac-sha1\");\n            \n            Session session = jsch.getSession(\"username\", \"172.16.29.254\", 22);\n            session.setConfig(config);\n            session.setPassword(\"password\");\n            session.setConfig(\"StrictHostKeyChecking\", \"no\"); // 临时测试用\n            \n            session.connect(30000); // 30秒超时\n            System.out.println(\"连接成功\");\n            \n            session.disconnect();\n        } catch (JSchException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<h3 id=\"较新的服务端兼容旧客户端\"><strong>较新的服务端兼容旧客户端</strong></h3>\n<p><code>/etc/ssh/sshd_config</code>追加以下内容，这里添加的算法取决于Their offer后边提示的类型，一般只添加部分即可，推荐使用<code>+</code>追加额外算法。</p>\n<pre><code class=\"language-bash\">#解决no matching key exchange method found报错\nKexAlgorithms +diffie-hellman-group14-sha1\n#解决no matching host key type found报错\nHostKeyAlgorithms +ssh-rsa\n</code></pre>\n<h2 id=\"附查看服务端ssh支持算法\">附查看服务端ssh支持算法</h2>\n<pre><code class=\"language-bash\">hellxz@hz:~$ sudo sshd -T | grep -E \"^hostkeyalg|^kexalg\"\nkexalgorithms sntrup761x25519-sha512@openssh.com,curve25519-sha256,curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group14-sha256,diffie-hellman-group14-sha1\nhostkeyalgorithms ssh-ed25519-cert-v01@openssh.com,ecdsa-sha2-nistp256-cert-v01@openssh.com,ecdsa-sha2-nistp384-cert-v01@openssh.com,ecdsa-sha2-nistp521-cert-v01@openssh.com,sk-ssh-ed25519-cert-v01@openssh.com,sk-ecdsa-sha2-nistp256-cert-v01@openssh.com,rsa-sha2-512-cert-v01@openssh.com,rsa-sha2-256-cert-v01@openssh.com,ssh-ed25519,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,sk-ssh-ed25519@openssh.com,sk-ecdsa-sha2-nistp256@openssh.com,rsa-sha2-512,rsa-sha2-256,ssh-rsa\n</code></pre>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-06 22:24</span>&nbsp;\n<a href=\"https://www.cnblogs.com/hellxz\">东北小狐狸</a>&nbsp;\n阅读(<span id=\"post_view_count\">28</span>)&nbsp;\n评论(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">收藏</a>&nbsp;\n<a href=\"\">举报</a>\n</div>"
    },
    {
      "title": "大道至简：如何用最轻量的代码实现跨团队的微服务契约？",
      "link": "https://www.cnblogs.com/jieky/p/19449427",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/jieky/p/19449427\" id=\"cb_post_title_url\" title=\"发布于 2026-01-06 21:27\">\n    <span>大道至简：如何用最轻量的代码实现跨团队的微服务契约？</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h1 id=\"大道至简如何用最轻量的代码实现跨团队的微服务契约\">大道至简：如何用最轻量的代码实现跨团队的微服务契约？</h1>\n<h3 id=\"1-二十年的架构长征从加法到减法\">1. 二十年的架构长征：从加法到减法</h3>\n<p>回首我的职业生涯，有三个时间坐标让我印象深刻：</p>\n<ul>\n<li><strong>2006 年：</strong> 身边同事开始谈论 DDD（领域驱动设计）和马丁·福勒的《企业应用架构模式》。那是<strong>求知</strong>的年代，我们试图通过增加模式的复杂度来驯服代码的混乱。</li>\n<li><strong>2016 年：</strong> 微服务浪潮袭来，我引入了 <strong>ABP 框架</strong>。那是<strong>工具</strong>的年代，重型框架提供了开箱即用的功能，但也带来了不可忽视的依赖负担和“全家桶”式的束缚。</li>\n<li><strong>2026 年：</strong> 站在即将 45 岁的时间点，我写下了 <strong>NexusContract</strong>。这是<strong>回归+AI</strong>的年代。在见过了无数过度设计的疲惫后，我明白了一个道理：<strong>架构的尊严在于边界的清晰，而非功能的堆砌。</strong></li>\n</ul>\n<h3 id=\"2-现状之痛被重型工具绑架的契约\">2. 现状之痛：被“重型工具”绑架的契约</h3>\n<p>在支付对账、第三方集成（如银联、支付宝）这种典型的异构场景中，我们经常陷入以下泥潭：</p>\n<ul>\n<li><strong>强耦合的 SDK：</strong> 为了用一个接口，不得不拉下一整套业务逻辑 SDK，里面甚至包含数据库依赖。</li>\n<li><strong>隐式魔法：</strong> 靠运行时推断、全局反射和硬编码来猜测字段名，一旦上游协议变更，整个系统瞬间崩溃。</li>\n<li><strong>沟通成本：</strong> 不同团队之间唯一的“契约”文档竟是半年前的 Markdown 截图，缺乏强类型约束。</li>\n</ul>\n<h3 id=\"3-nexuscontract-的内核repr-p-模式\">3. NexusContract 的内核：REPR-P 模式</h3>\n<p>我们扩展了 <a href=\"https://fast-endpoints.com/\" rel=\"noopener nofollow\" target=\"_blank\">FastEndpoints</a> 倡导的 <strong>REPR (Request-Endpoint-Response)</strong> 模式，通过 <strong>Proxying (代理化)</strong> 机制实现了逻辑与协议的彻底解耦。</p>\n<p><strong>核心宪法：显式边界优于隐式魔法。</strong><br />\n在 NexusContract 中，契约（Contract）是不可变的语义内核，是团队间唯一的法律。</p>\n<h3 id=\"4-核心实现在启动阶段冷冻元数据\">4. 核心实现：在启动阶段“冷冻”元数据</h3>\n<p>为了追求极致的性能，我为框架制定了两个严苛的技术决策：</p>\n<h4 id=\"a-元数据冷冻-frozen-metadata\">A. 元数据冷冻 (Frozen Metadata)</h4>\n<p>我们拒绝运行时反射。所有的元数据提取、约束审计都在启动阶段完成并缓存。启动完成后，结果存入不可变的 <code>ReflectionCache</code>。</p>\n<ul>\n<li><strong>运行期：</strong> O(1) 查询，零反射开销。</li>\n<li><strong>确定性：</strong> 确保 P50 与 P99 曲线高度重合，消除了 GC 导致的波动。</li>\n</ul>\n<h4 id=\"b-预编译投影-expression-tree\">B. 预编译投影 (Expression Tree)</h4>\n<p>我们利用 <strong>Expression Tree（表达式树）</strong> 将对象的映射逻辑预编译为 IL 代码。相比运行时反射遍历，我们将指令消耗减少了数倍，性能等同于硬编码映射。</p>\n<h3 id=\"5-架构红线用-nxc-诊断码捍卫确定性\">5. 架构红线：用 NXC 诊断码捍卫确定性</h3>\n<p>我们不抛出含义模糊的异常，每一处失效都有其唯一索引。</p>\n<ul>\n<li><strong>NXC1xx (静态红线)</strong>：架构违规。例如 <strong>【决策 A-401】</strong> 强制要求最大嵌套深度 ≤ 3。设计太复杂，系统将拒绝启动。</li>\n<li><strong>NXC2xx/3xx (运行诊断)</strong>：精确锁定出向报文不合规或入向协议对齐失败。</li>\n</ul>\n<h3 id=\"6-代码展示回归纯粹的-poco\">6. 代码展示：回归纯粹的 POCO</h3>\n<pre><code class=\"language-csharp\">/// &lt;summary&gt;\n/// 统一下单契约：纯净、强类型、显式边界\n/// &lt;/summary&gt;\n[ApiOperation(\"payment.order.create\", HttpVerb.POST)]\npublic class OrderRequest : IApiRequest&lt;OrderResponse&gt;\n{\n    [ApiField(\"mer_order_no\", IsRequired = true)]\n    public string OrderNo { get; set; }\n\n    [ApiField(\"card_no\", IsEncrypted = true)] // 触发【规则 R-201】验证，必须显式锁定名称\n    public string CardNo { get; set; }\n\n    [ApiField(\"txn_amt\")]\n    public long Amount { get; set; }\n}\n\n</code></pre>\n<h3 id=\"7-结语\">7. 结语</h3>\n<p>在软件架构的世界里，我们总是习惯于做加法，认为功能越多越强大。但真正的工业级作品，往往敢于在关键时刻停下来做减法。</p>\n<p><strong>在网络延迟的 3 秒黑暗中，我们要让内部处理的 50 微秒闪耀得像恒星。</strong></p>\n<h3 id=\"️-项目地址与源码\">🏛️ 项目地址与源码</h3>\n<p>本项目已正式开源，欢迎各位同行指正、交流：</p>\n<ul>\n<li><strong>GitHub:</strong> <a href=\"https://github.com/NexusContract/PubSoft.NexusContract\" rel=\"noopener nofollow\" target=\"_blank\">NexusContract</a></li>\n<li><strong>核心理念：</strong> Kernelized Contract Integration (KCI) Framework</li>\n<li><strong>适用场景：</strong> 高性能支付集成、跨团队微服务契约管理、异构协议透明转换。</li>\n</ul>\n<hr />\n<p><strong>关于作者：</strong><br />\n一名在 .NET 阵营潜行 20 年的架构师，从 .NET Framework 1.1 到今天的 .NET 10，依然对干净的代码保持热爱。</p>\n\n</div>\n<div id=\"MySignature\">\n    <p>______________________________________<br />生活，要用圣人的胸怀面对，用科学的方法支配， <br />&nbsp; &nbsp; &nbsp; &nbsp; 用皇帝的御膳养胃，用清洁的空气洗肺， <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 用小猪的感觉去睡，用太阳的热情灌水。<br />______________________________________</p>\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-06 21:27</span>&nbsp;\n<a href=\"https://www.cnblogs.com/jieky\">消失者</a>&nbsp;\n阅读(<span id=\"post_view_count\">71</span>)&nbsp;\n评论(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">收藏</a>&nbsp;\n<a href=\"\">举报</a>\n</div>"
    },
    {
      "title": "AUC 的两种等价定义：从排序概率到 ROC 曲线的统一理解",
      "link": "https://www.cnblogs.com/GlenTt/p/19449279",
      "published": "",
      "description": "<h2>\n\t\t\t<a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/GlenTt/p/19449279\" id=\"cb_post_title_url\" title=\"发布于 2026-01-06 20:27\">\n    <span>AUC 的两种等价定义：从排序概率到 ROC 曲线的统一理解</span>\n    \n\n</a>\n\n\t\t</h2>\n\t\t<div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h1 id=\"auc-的两种等价定义从排序概率到-roc-曲线的统一理解\">AUC 的两种等价定义：从排序概率到 ROC 曲线的统一理解</h1>\n<p>在推荐系统与广告排序中，AUC 是最常用、也最容易被误解的离线评估指标之一。很多人同时接触过两种说法：<br />\n一种是“ROC 曲线下面积”，另一种是“正样本排在负样本前面的概率”。<strong>这并不是两种不同的指标，而是同一个指标的两种完全等价的定义</strong>。</p>\n<h2 id=\"一auc-的本质一个排序概率\">一、AUC 的本质：一个排序概率</h2>\n<h3 id=\"1-问题设定\">1. 问题设定</h3>\n<p>假设我们面对的是一个二分类 / 排序问题：</p>\n<ul>\n<li>每个样本 <span class=\"math inline\">\\(x_i\\)</span> 有真实标签 <span class=\"math inline\">\\(y_i \\in {0,1}\\)</span></li>\n<li>模型给出一个连续预测分数 <span class=\"math inline\">\\(s_i \\in \\mathbb{R}\\)</span></li>\n<li>分数越大，模型认为样本“越可能是正样本”</li>\n</ul>\n<p>定义：</p>\n<ul>\n<li>正样本集合<p></p><div class=\"math display\">\\[P = { i \\mid y_i = 1 }\n\\]</div><p></p></li>\n<li>负样本集合<p></p><div class=\"math display\">\\[N = { j \\mid y_j = 0 }\n\\]</div><p></p></li>\n</ul>\n<h3 id=\"2-auc-的概率定义最本质定义\">2. AUC 的概率定义（最本质定义）</h3>\n<p><strong>AUC 的概率定义是：</strong></p>\n<p>从正样本集合中随机抽取一个样本，从负样本集合中随机抽取一个样本，<br />\n正样本的预测分数大于负样本预测分数的概率。</p>\n<p>其数学形式为：</p>\n<p></p><div class=\"math display\">\\[\\mathrm{AUC}\n=\n\n\\frac{1}{|P|\\cdot|N|}\n\\sum_{p \\in P}\\sum_{n \\in N}\n\\left[\n\\mathbb{I}(s_p &gt; s_n)\n+\n\\frac{1}{2}\\mathbb{I}(s_p = s_n)\n\\right]\n\\]</div><p></p><p>其中：</p>\n<ul>\n<li><span class=\"math inline\">\\(\\mathbb{I}(\\cdot)\\)</span> 为指示函数</li>\n<li>当 <span class=\"math inline\">\\(s_p = s_n\\)</span> 时记为 <span class=\"math inline\">\\(0.5\\)</span>，表示随机打平</li>\n</ul>\n<h3 id=\"3-这一点意味着什么\">3. 这一点意味着什么？</h3>\n<ul>\n<li>AUC <strong>不依赖任何阈值</strong></li>\n<li>AUC <strong>不是一个分类指标，而是一个排序指标</strong></li>\n<li>AUC 衡量的是：<br />\n<strong>模型是否倾向于把正样本整体排在负样本前面</strong></li>\n</ul>\n<p>这也是为什么在推荐系统中，即便最终没有明确的“正负分类决策”，AUC 依然是最核心的离线评估指标之一。</p>\n<h2 id=\"二roc-曲线定义几何视角下的同一个量\">二、ROC 曲线定义：几何视角下的同一个量</h2>\n<h3 id=\"1-roc-曲线如何构造\">1. ROC 曲线如何构造</h3>\n<p>给定一组预测分数 <span class=\"math inline\">\\(s_i\\)</span>，我们引入一个阈值 <span class=\"math inline\">\\(\\tau\\)</span>：</p>\n<ul>\n<li>若 <span class=\"math inline\">\\(s_i \\ge \\tau\\)</span>，预测为正类</li>\n<li>若 <span class=\"math inline\">\\(s_i &lt; \\tau\\)</span>，预测为负类</li>\n</ul>\n<p>在每一个阈值 <span class=\"math inline\">\\(\\tau\\)</span> 下，可以计算：</p>\n<ul>\n<li>真阳性率（TPR）<p></p><div class=\"math display\">\\[\\mathrm{TPR}(\\tau)\n=\n\n\\frac{\\mathrm{TP}}{\\mathrm{P}}\n\\]</div><p></p></li>\n<li>假阳性率（FPR）<p></p><div class=\"math display\">\\[\\mathrm{FPR}(\\tau)\n=\n\n\\frac{\\mathrm{FP}}{\\mathrm{N}}\n\\]</div><p></p></li>\n</ul>\n<p>当阈值 <span class=\"math inline\">\\(\\tau\\)</span> 从 <span class=\"math inline\">\\(+\\infty\\)</span> 连续下降到 <span class=\"math inline\">\\(-\\infty\\)</span> 时，<br />\n点对 <span class=\"math inline\">\\((\\mathrm{FPR}(\\tau), \\mathrm{TPR}(\\tau))\\)</span> 在平面上形成一条曲线，即 <strong>ROC 曲线</strong>。</p>\n<h3 id=\"2-auc-的-roc-定义\">2. AUC 的 ROC 定义</h3>\n<p><strong>AUC 定义为 ROC 曲线下方的面积：</strong></p>\n<p></p><div class=\"math display\">\\[\\mathrm{AUC}\n=\n\n\\int_0^1 \\mathrm{TPR}(\\mathrm{FPR}) , d(\\mathrm{FPR})\n\\]</div><p></p><p>这是一个<strong>几何意义上的定义</strong>。</p>\n<h2 id=\"三两种定义为什么是完全等价的\">三、两种定义为什么是完全等价的？</h2>\n<p>一个统计学习中的经典结论是：</p>\n<p></p><div class=\"math display\">\\[\\boxed{\n\\mathrm{AUC}\n=\n\nP(s^+ &gt; s^-)\n}\n\\]</div><p></p><p>其中 <span class=\"math inline\">\\(s^+\\)</span> 表示正样本分数，<span class=\"math inline\">\\(s^-\\)</span> 表示负样本分数。</p>\n<p>直观解释如下：</p>\n<ul>\n<li>ROC 曲线本质是在 <strong>按照 score 从高到低扫描排序结果</strong></li>\n<li>每遇到一个正样本，TPR 增加</li>\n<li>每遇到一个负样本，FPR 增加</li>\n<li>某个正样本是否“早于”负样本被扫描到，正对应于<p></p><div class=\"math display\">\\[s^+ &gt; s^-\n\\]</div><p></p></li>\n</ul>\n<p>因此：</p>\n<blockquote>\n<p><strong>ROC 曲线下面积，等价于所有正负样本对中，排序正确的比例。</strong></p>\n</blockquote>\n<p>ROC 只是将“排序关系”用几何方式进行了表达。</p>\n<h2 id=\"四一个完整可手算的例子\">四、一个完整、可手算的例子</h2>\n<h3 id=\"1-样本与预测分数\">1. 样本与预测分数</h3>\n<table>\n<thead>\n<tr>\n<th>样本</th>\n<th>label</th>\n<th>score</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>A</td>\n<td>1</td>\n<td>0.90</td>\n</tr>\n<tr>\n<td>B</td>\n<td>1</td>\n<td>0.60</td>\n</tr>\n<tr>\n<td>C</td>\n<td>0</td>\n<td>0.70</td>\n</tr>\n<tr>\n<td>D</td>\n<td>0</td>\n<td>0.40</td>\n</tr>\n<tr>\n<td>E</td>\n<td>0</td>\n<td>0.20</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>正样本：A, B</li>\n<li>负样本：C, D, E</li>\n<li>正负样本对总数：<span class=\"math inline\">\\(2 \\times 3 = 6\\)</span></li>\n</ul>\n<hr />\n<h3 id=\"2-按概率定义逐对比较\">2. 按概率定义逐对比较</h3>\n<table>\n<thead>\n<tr>\n<th>正样本</th>\n<th>负样本</th>\n<th>是否排序正确</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>A(0.90)</td>\n<td>C(0.70)</td>\n<td>✓</td>\n</tr>\n<tr>\n<td>A(0.90)</td>\n<td>D(0.40)</td>\n<td>✓</td>\n</tr>\n<tr>\n<td>A(0.90)</td>\n<td>E(0.20)</td>\n<td>✓</td>\n</tr>\n<tr>\n<td>B(0.60)</td>\n<td>C(0.70)</td>\n<td>✗</td>\n</tr>\n<tr>\n<td>B(0.60)</td>\n<td>D(0.40)</td>\n<td>✓</td>\n</tr>\n<tr>\n<td>B(0.60)</td>\n<td>E(0.20)</td>\n<td>✓</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>排序正确对数：5</li>\n<li>总对数：6</li>\n</ul>\n<p></p><div class=\"math display\">\\[\\mathrm{AUC} = \\frac{5}{6} \\approx 0.833\n\\]</div><p></p><h2 id=\"五对应的计算代码\">五、对应的计算代码</h2>\n<p>下面给出两种 AUC 计算实现。</p>\n<h3 id=\"1-概率定义两两比较定义直译\">1. 概率定义（两两比较，定义直译）</h3>\n<pre><code class=\"language-python\">def auc_pairwise(labels, scores):\n    \"\"\"\n    基于 AUC 的概率定义（Pairwise Comparison）进行计算。\n\n    输入：\n    - labels: List[int] 或 1D array\n        样本真实标签，取值为 {0, 1}\n        1 表示正样本，0 表示负样本\n    - scores: List[float] 或 1D array\n        模型对每个样本给出的预测分数，分数越大表示越倾向正类\n\n    输出：\n    - auc: float\n        AUC 值，取值范围 [0, 1]\n\n    核心思想：\n    随机取一个正样本 p 和一个负样本 n，\n    统计 P(score_p &gt; score_n) 的比例\n    \"\"\"\n\n    # 提取正样本 (label=1) 的预测分数\n    pos_scores = [s for l, s in zip(labels, scores) if l == 1]\n\n    # 提取负样本 (label=0) 的预测分数\n    neg_scores = [s for l, s in zip(labels, scores) if l == 0]\n\n    # 排序正确的正负样本对数量（允许 0.5 的打平贡献）\n    correct = 0.0\n\n    # 正负样本对的总数量 |P| * |N|\n    total = len(pos_scores) * len(neg_scores)\n\n    # 对所有正负样本对进行两两比较\n    for sp in pos_scores:        # sp: positive sample score\n        for sn in neg_scores:    # sn: negative sample score\n            if sp &gt; sn:\n                # 正样本分数严格大于负样本分数，排序正确\n                correct += 1.0\n            elif sp == sn:\n                # 分数相等，按约定计为 0.5（随机打平）\n                correct += 0.5\n            # sp &lt; sn 时不加分，表示排序错误\n\n    # AUC = 排序正确的比例\n    return correct / total\n</code></pre>\n<p><strong>复杂度分析：</strong></p>\n<ul>\n<li>时间复杂度：<p></p><div class=\"math display\">\\[O(|P| \\cdot |N|)\n\\]</div><p></p>其中 <span class=\"math inline\">\\(|P|\\)</span> 为正样本数，<span class=\"math inline\">\\(|N|\\)</span> 为负样本数</li>\n<li>空间复杂度：<p></p><div class=\"math display\">\\[O(|P| + |N|)\n\\]</div><p></p></li>\n</ul>\n<p><strong>适用场景：</strong></p>\n<ul>\n<li>严格对应 AUC 的概率定义</li>\n<li>适合教学、理论验证、小规模数据</li>\n<li>不适用于工程和大规模离线计算</li>\n</ul>\n<hr />\n<h3 id=\"2-排序--rank-based-实现工程思想\">2. 排序 / Rank-based 实现（工程思想）</h3>\n<pre><code class=\"language-python\">import numpy as np\n\ndef auc_rank(labels, scores):\n    \"\"\"\n    基于排序（Rank / Mann–Whitney U）的 AUC 计算方法。\n\n    输入：\n    - labels: List[int] 或 1D numpy array\n        样本真实标签，取值为 {0, 1}\n    - scores: List[float] 或 1D numpy array\n        模型预测分数，分数越大表示越可能为正样本\n\n    输出：\n    - auc: float\n        AUC 值，取值范围 [0, 1]\n\n    核心思想：\n    1. 按预测分数从小到大排序\n    2. 扫描排序后的样本序列\n    3. 每遇到一个正样本，统计其前面已有多少负样本\n       这些负样本都被该正样本“正确地排在后面”\n    \"\"\"\n\n    # 转为 numpy array，便于排序和向量化操作\n    labels = np.asarray(labels)\n    scores = np.asarray(scores)\n\n    # 获取按照 score 从小到大排序后的索引\n    order = np.argsort(scores)\n\n    # 按排序后的顺序重排标签\n    labels_sorted = labels[order]\n\n    # 正样本数量 |P|\n    n_pos = np.sum(labels_sorted == 1)\n\n    # 负样本数量 |N|\n    n_neg = np.sum(labels_sorted == 0)\n\n    # 已扫描到的负样本数量（前缀负样本计数）\n    neg_count = 0\n\n    # 排序正确的正负样本对数量\n    correct = 0.0\n\n    # 从低分到高分扫描\n    for l in labels_sorted:\n        if l == 1:\n            # 当前是正样本：\n            # 它前面的所有负样本都满足 score_neg &lt; score_pos\n            correct += neg_count\n        else:\n            # 当前是负样本，增加负样本计数\n            neg_count += 1\n\n    # AUC = 排序正确的正负样本对 / 总正负样本对\n    return correct / (n_pos * n_neg)\n</code></pre>\n<p><strong>复杂度分析：</strong></p>\n<ul>\n<li>时间复杂度：<p></p><div class=\"math display\">\\[O(n \\log n)\n\\]</div><p></p>主要来自排序操作，其中 <span class=\"math inline\">\\(n = |P| + |N|\\)</span></li>\n<li>空间复杂度：<p></p><div class=\"math display\">\\[O(n)\n\\]</div><p></p></li>\n</ul>\n<p><strong>工程说明：</strong></p>\n<ul>\n<li>与 Mann–Whitney U 统计量完全等价</li>\n<li>是工业界离线 AUC 计算（Spark / MapReduce / Flink）的理论基础</li>\n<li>可自然扩展为分桶、分 user、分实验组的 AUC 统计</li>\n</ul>\n\n</div>\n<div class=\"clear\"></div>\n\n\t\t<p class=\"postfoot\">\n\t\t\tposted on \n<span id=\"post-date\">2026-01-06 20:27</span>&nbsp;\n<a href=\"https://www.cnblogs.com/GlenTt\">GlenTt</a>&nbsp;\n阅读(<span id=\"post_view_count\">21</span>)&nbsp;\n评论(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">收藏</a>&nbsp;\n<a href=\"\">举报</a>\n\n\t\t</p>"
    },
    {
      "title": "性能提升4倍！使用Granian作为Django项目的ASGI服务器",
      "link": "https://www.cnblogs.com/deali/p/19449242",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/deali/p/19449242\" id=\"cb_post_title_url\" title=\"发布于 2026-01-06 20:11\">\n    <span>性能提升4倍！使用Granian作为Django项目的ASGI服务器</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h2 id=\"前言\">前言</h2>\n<p>最近我又继续在开发 DjangoStarter 的新版本了。</p>\n<p>之前为了实现 docker 部署，我把 Nginx 打包进了 DjangoStarter 的 compose 配置里了，不过这带来了配置的复杂度，特别是还要搭配框架实现 URL prefix 之类的功能。</p>\n<p>从 v3.2.x 版本开始，我就启动了减法计划，简化代码和功能，减少心智负担，这个 Nginx 容器也是我一直想去掉的。</p>\n<p>最近发现 Granian 这个 Rust 开发的 ASGI 服务器，性能高，而且还可以支持静态文件，正好完美符合我的需求，于是这次正好拿来替换原本使用的 Daphne</p>\n<h2 id=\"granian\">Granian</h2>\n<p>项目主页: <a href=\"https://github.com/emmett-framework/granian\" rel=\"noopener nofollow\" target=\"_blank\">https://github.com/emmett-framework/granian</a></p>\n<p>Granian 是一款高性能 Python Web Server，支持 ASGI、WSGI、RSGI，基于 Rust 编写，启动速度快、并发能力强，非常适合 Django / FastAPI / Starlette。</p>\n<p>官方描述为 “A Rust HTTP server for Python applications built on top of Hyper/Tokio”。</p>\n<p>特点：</p>\n<ul>\n<li>支持 <strong>ASGI 3</strong>、<strong>RSGI</strong>（Rust-Server-Gateway Interface）和 <strong>WSGI</strong> 接口。</li>\n<li>支持 HTTP/1 和 HTTP/2（未来计划 HTTP/3）协议。</li>\n<li>支持静态文件直出 (“Direct static files serving”)。</li>\n</ul>\n<h2 id=\"使用方式\">使用方式</h2>\n<p>很简单，不需要修改代码，只需要修改启动命令。</p>\n<p>目前搭配 DjangoStarter 使用的启动命令是这样的：</p>\n<pre><code class=\"language-bash\">granian --interface asgi --host 0.0.0.0 --port 8000 --static-path-route /static --static-path-mount ./static-dist config.asgi:application\n</code></pre>\n<p>类似 uvicorn，这个 granian 也支持热重载，加个 <code>--reload</code> 参数就行了</p>\n<h2 id=\"性能测试\">性能测试</h2>\n<p>本次用 wrk 进行性能测试</p>\n<h3 id=\"测试数据\">测试数据</h3>\n<p>以下数据在腾讯云 2 cores CPU + 2G 内存的服务器上测得。</p>\n<p>django 5.x + ninja + daphne</p>\n<pre><code>$ wrk -t4 -c200 -d30s http://127.0.0.1:9876/api/django-starter/monitoring/health\nRunning 30s test @ http://127.0.0.1:9876/api/django-starter/monitoring/health\n  4 threads and 200 connections\n  Thread Stats   Avg      Stdev     Max   +/- Stdev\n    Latency     1.97s     0.00us   1.97s   100.00%\n    Req/Sec    38.55     55.33   343.00     90.23%\n  1343 requests in 30.04s, 760.03KB read\n  Socket errors: connect 0, read 0, write 0, timeout 1342\nRequests/sec:     44.70\nTransfer/sec:     25.30KB\n</code></pre>\n<p>django 5.x + ninja + granian</p>\n<pre><code>$ wrk -t4 -c200 -d30s http://127.0.0.1:9875/api/django-starter/monitoring/hea\nlth\nRunning 30s test @ http://127.0.0.1:9875/api/django-starter/monitoring/health\n  4 threads and 200 connections\n  Thread Stats   Avg      Stdev     Max   +/- Stdev\n    Latency     1.20s    93.05ms   1.72s    82.69%\n    Req/Sec    83.13    105.81   460.00     83.72%\n  4980 requests in 30.04s, 2.85MB read\nRequests/sec:    165.76\nTransfer/sec:     97.31KB\n</code></pre>\n<p>因为好奇，我还找到之前一个很老的项目，使用WSGI部署的进行对比。</p>\n<p>以下数据在私有云的 4 cores CPU + 2G 内存服务器上测得。</p>\n<p>因为是完全不同的服务器硬件，数据仅供参考。</p>\n<p>Django 3.x + drf + uwsgi + nginx</p>\n<pre><code>$ wrk -t4 -c200 -d30s http://127.0.0.1:9001/api/health/\nRunning 30s test @ http://127.0.0.1:9001/api/health/\n  4 threads and 200 connections\n  Thread Stats   Avg      Stdev     Max   +/- Stdev\n    Latency   295.30ms  373.95ms   1.96s    85.14%\n    Req/Sec   205.54     68.42   380.00     73.73%\n  19583 requests in 30.09s, 5.83MB read\n  Socket errors: connect 0, read 0, write 0, timeout 474\n  Non-2xx or 3xx responses: 12\nRequests/sec:    650.89\nTransfer/sec:    198.32KB\n</code></pre>\n<p>Django 3.x + ninja + uwsgi + nginx</p>\n<pre><code>$ wrk -t4 -c200 -d30s http://127.0.0.1:9001/api2/health\nRunning 30s test @ http://127.0.0.1:9001/api2/health\n  4 threads and 200 connections\n  Thread Stats   Avg      Stdev     Max   +/- Stdev\n    Latency   203.75ms  280.30ms   1.95s    88.44%\n    Req/Sec   250.81    108.59   500.00     61.21%\n  22542 requests in 30.06s, 5.68MB read\n  Socket errors: connect 0, read 0, write 0, timeout 420\n  Non-2xx or 3xx responses: 12\nRequests/sec:    749.88\nTransfer/sec:    193.35KB\n</code></pre>\n<h3 id=\"结论\">结论</h3>\n<p>以下是使用 AI 对上面的测试数据进行分析的结论，不过 ASGI 和 uWSGI 不在同一台服务器进行测试，其实很难直接对比。目前看来切换到 Granian 确实可以提高4倍的性能。</p>\n<p>① Daphne 在 Django + ASGI 下的性能表现非常差</p>\n<ul>\n<li>延迟直接飙到 <strong>1.9 秒级别</strong>，</li>\n<li>wrk 200 并发几乎把它压扁，</li>\n<li><strong>1343 请求里 1342 超时</strong>，等于完全顶不住。</li>\n</ul>\n<p>说白了：<strong>Daphne 更像是开发环境服务器，不推荐上生产高并发。</strong></p>\n<p>② Granian 性能比 Daphne 好 3–4 倍，但仍然有限</p>\n<ul>\n<li>每秒处理 <strong>165 req/s</strong>（同机房、同代码）。</li>\n<li>延迟仍然在 <strong>1.2s</strong> 左右，远不算理想（在高并发下仍吃力）。</li>\n<li>优点是 ASGI 原生 + Rust 实现，比 Daphne 强太多。</li>\n</ul>\n<p>直观感受：<strong>Granian 能用，但你别指望它像 uWSGI 那样扛流量。</strong></p>\n<p>③ uWSGI（WSGI）表现碾压：单机可达 650–750 req/s 级别</p>\n<ul>\n<li>性能直接是 granian 的 <strong>4～5 倍</strong>。</li>\n<li>虽然是老架构（WSGI），但调优成熟、稳定、分配机制强，抗压能力远强于同类 ASGI 服务。</li>\n</ul>\n<p>简而言之：<strong>如果不用异步，WSGI 依旧是 Django 的最强部署方式（性能层面）。</strong></p>\n<h2 id=\"docker-compose\">docker-compose</h2>\n<p>这是精简后的 compose 配置</p>\n<pre><code class=\"language-yaml\">services:\n  app:\n    image: ${APP_IMAGE_NAME}:${APP_IMAGE_TAG}\n    container_name: $APP_NAME-app\n    command:\n      - granian\n      - --interface\n      - asgi\n      - --host\n      - 0.0.0.0\n      - --port\n      - \"${APP_INTERNAL_PORT:-8000}\"\n      - --static-path-route\n      - /static\n      - --static-path-mount\n      - /project/static-dist\n      - config.asgi:application\n</code></pre>\n<h2 id=\"命令行参数\">命令行参数</h2>\n<p>它的命令行结构很简单：</p>\n<pre><code class=\"language-bash\">granian [OPTIONS] APP\n</code></pre>\n<p>其中：</p>\n<ul>\n<li><strong>APP</strong> 是入口，例如：<code>config.asgi:application</code></li>\n<li><strong>OPTIONS</strong> 是各种配置参数</li>\n</ul>\n<p>下面按分类整理所有参数（附带说明与建议）。</p>\n<h3 id=\"-基础参数启动必要项\">🧩 基础参数（启动必要项）</h3>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>说明</th>\n<th>默认值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>APP</code></td>\n<td><strong>要启动的应用入口</strong>（如 <code>mysite.asgi:application</code>）</td>\n<td>必填</td>\n</tr>\n<tr>\n<td><code>--interface</code></td>\n<td>接口类型：<code>asgi</code> / <code>asginl</code> / <code>rsgi</code> / <code>wsgi</code></td>\n<td>rsgi</td>\n</tr>\n<tr>\n<td><code>--host</code></td>\n<td>监听地址</td>\n<td>127.0.0.1</td>\n</tr>\n<tr>\n<td><code>--port</code></td>\n<td>端口</td>\n<td>8000</td>\n</tr>\n<tr>\n<td><code>--uds</code></td>\n<td>使用 Unix Domain Socket</td>\n<td>无</td>\n</tr>\n<tr>\n<td><code>--http</code></td>\n<td>HTTP 版本：<code>1</code>、<code>2</code>、<code>auto</code></td>\n<td>auto</td>\n</tr>\n<tr>\n<td><code>--workers</code></td>\n<td>Worker 进程数</td>\n<td>1</td>\n</tr>\n</tbody>\n</table>\n<p>👉 Django、FastAPI 用户一般写：</p>\n<pre><code>--interface asgi\n</code></pre>\n<h3 id=\"️-静态文件服务django-专用配置\">🗂️ 静态文件服务（Django 专用配置）</h3>\n<p>Granian 内置静态文件服务：</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>说明</th>\n<th>默认值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>--static-path-route</code></td>\n<td>URL 路由前缀，例如 <code>/static</code></td>\n<td>/static</td>\n</tr>\n<tr>\n<td><code>--static-path-mount</code></td>\n<td>文件目录，例如 <code>/project/static-dist</code></td>\n<td>无</td>\n</tr>\n<tr>\n<td><code>--static-path-expires</code></td>\n<td>缓存时间（秒）</td>\n<td>86400</td>\n</tr>\n</tbody>\n</table>\n<p>示例：</p>\n<pre><code>--static-path-route /static --static-path-mount /project/static-dist\n</code></pre>\n<h3 id=\"️-多进程线程事件循环选项\">⚙️ 多进程、线程、事件循环选项</h3>\n<p>Worker / Thread</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>--workers</code></td>\n<td>Worker 数量</td>\n</tr>\n<tr>\n<td><code>--blocking-threads</code></td>\n<td>阻塞线程数</td>\n</tr>\n<tr>\n<td><code>--runtime-threads</code></td>\n<td>Runtime 线程数</td>\n</tr>\n<tr>\n<td><code>--runtime-blocking-threads</code></td>\n<td>Runtime I/O 阻塞线程</td>\n</tr>\n</tbody>\n</table>\n<p>建议：</p>\n<ul>\n<li><strong>CPU × 2</strong> 左右的 worker 容量通常够用</li>\n<li>大部分 ASGI 项目不需要调 thread 参数</li>\n</ul>\n<h3 id=\"-事件循环--runtime\">🔁 事件循环 &amp; Runtime</h3>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>--loop</code></td>\n<td>事件循环：<code>auto</code>、<code>asyncio</code>、<code>rloop</code>、<code>uvloop</code></td>\n</tr>\n<tr>\n<td><code>--task-impl</code></td>\n<td>task 执行器：<code>asyncio</code> / <code>rust</code></td>\n</tr>\n<tr>\n<td><code>--runtime-mode</code></td>\n<td>单线程 <code>st</code> / 多线程 <code>mt</code></td>\n</tr>\n</tbody>\n</table>\n<p>适用建议：</p>\n<ul>\n<li>普通项目：用默认即可</li>\n<li>高并发：<code>--task-impl rust</code> 性能更强</li>\n</ul>\n<h3 id=\"-http1-与-http2-相关参数\">🔒 HTTP/1 与 HTTP/2 相关参数</h3>\n<table>\n<thead>\n<tr>\n<th>类别</th>\n<th>常用配置</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>HTTP/1</td>\n<td><code>--http1-buffer-size</code>、<code>--http1-keep-alive</code></td>\n</tr>\n<tr>\n<td>HTTP/2</td>\n<td><code>--http2-*</code> 一系列参数控制 flow control、窗口、keepalive、stream 数量等</td>\n</tr>\n</tbody>\n</table>\n<p>大部分项目无需调整，默认即可。</p>\n<h3 id=\"-日志logging\">📜 日志（Logging）</h3>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>说明</th>\n<th>默认</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>--log / --no-log</code></td>\n<td>启用日志</td>\n<td>enabled</td>\n</tr>\n<tr>\n<td><code>--log-level</code></td>\n<td>日志等级</td>\n<td>info</td>\n</tr>\n<tr>\n<td><code>--log-config</code></td>\n<td>使用 JSON 配置文件</td>\n<td>无</td>\n</tr>\n<tr>\n<td><code>--access-log</code></td>\n<td>开启 access log</td>\n<td>disabled</td>\n</tr>\n<tr>\n<td><code>--access-log-fmt</code></td>\n<td>Access log 格式</td>\n<td>无</td>\n</tr>\n</tbody>\n</table>\n<p>如果你希望生产环境有 Nginx 样式的 access log：</p>\n<pre><code>--access-log --access-log-fmt \"%a %r %s %b\"\n</code></pre>\n<h3 id=\"-热重载开发环境用\">🔁 热重载（开发环境用）</h3>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>--reload</code></td>\n<td>开启自动重载</td>\n</tr>\n<tr>\n<td><code>--reload-paths</code></td>\n<td>指定监控目录</td>\n</tr>\n<tr>\n<td><code>--reload-ignore-*</code></td>\n<td>忽略目录、路径、pattern</td>\n</tr>\n</tbody>\n</table>\n<p>例如：</p>\n<pre><code>--reload --reload-paths src/\n</code></pre>\n<h3 id=\"-https\">🔐 HTTPS</h3>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>--ssl-certificate</code></td>\n<td>证书文件</td>\n</tr>\n<tr>\n<td><code>--ssl-keyfile</code></td>\n<td>密钥文件</td>\n</tr>\n<tr>\n<td><code>--ssl-ca</code></td>\n<td>CA</td>\n</tr>\n<tr>\n<td><code>--ssl-client-verify</code></td>\n<td>客户端证书验证</td>\n</tr>\n</tbody>\n</table>\n<p>（一般反向代理交给 Nginx 做 HTTPS）</p>\n<h3 id=\"-其他有用但不常改的参数\">🧰 其他有用但不常改的参数</h3>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>--working-dir</code></td>\n<td>切换 WorkDir</td>\n</tr>\n<tr>\n<td><code>--env-files</code></td>\n<td>加载环境变量文件</td>\n</tr>\n<tr>\n<td><code>--factory</code></td>\n<td>APP 是 factory function 时使用</td>\n</tr>\n<tr>\n<td><code>--url-path-prefix</code></td>\n<td>应用挂载前缀</td>\n</tr>\n<tr>\n<td><code>--process-name</code></td>\n<td>自定义进程名</td>\n</tr>\n<tr>\n<td><code>--pid-file</code></td>\n<td>写入 PID 文件</td>\n</tr>\n<tr>\n<td><code>--version</code></td>\n<td>显示版本</td>\n</tr>\n<tr>\n<td><code>--help</code></td>\n<td>显示帮助</td>\n</tr>\n</tbody>\n</table>\n\n</div>\n<div id=\"MySignature\">\n    微信公众号：「程序设计实验室」\n专注于互联网热门新技术探索与团队敏捷开发实践，包括架构设计、机器学习与数据分析算法、移动端开发、Linux、Web前后端开发等，欢迎一起探讨技术，分享学习实践经验。\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-06 20:11</span>&nbsp;\n<a href=\"https://www.cnblogs.com/deali\">程序设计实验室</a>&nbsp;\n阅读(<span id=\"post_view_count\">24</span>)&nbsp;\n评论(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">收藏</a>&nbsp;\n<a href=\"\">举报</a>\n</div>"
    },
    {
      "title": "Zsh 配置笔记",
      "link": "https://www.cnblogs.com/owlman/p/19449225",
      "published": "",
      "description": "<h2 class=\"post-title\">\n            <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/owlman/p/19449225\" id=\"cb_post_title_url\" title=\"发布于 2026-01-06 20:01\">\n    <span>Zsh 配置笔记</span>\n    \n\n</a>\n\n        </h2>\n        <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<blockquote>\n<p>[!NOTE] 笔记说明</p>\n<p>这篇笔记主要记录了我在使用 Zsh 这款 Shell 的过程中所记录的一些心得与体会。它将会被存储在我个人的 <a href=\"https://github.com/owlman/CS_Studynotes\" rel=\"noopener nofollow\" target=\"_blank\">计算机专业笔记库</a> 中，以便日后查阅。</p>\n</blockquote>\n<h2 id=\"zsh-简介\">Zsh 简介</h2>\n<p>Z shell（以下简称 Zsh）是保罗·弗斯塔德（Paul Falstad）于 1990 年在普林斯顿大学求学时编写的、一款可用作交互式登录的 Shell。Zsh 对 <a href=\"https://zh.wikipedia.org/wiki/Bourne_shell\" rel=\"noopener nofollow\" target=\"_blank\">Bourne shell</a>做出了大量改进，同时加入了 <a href=\"https://zh.wikipedia.org/wiki/Bash\" rel=\"noopener nofollow\" target=\"_blank\">Bash</a>、<a href=\"https://zh.wikipedia.org/wiki/Korn_shell\" rel=\"noopener nofollow\" target=\"_blank\">ksh</a> 及 <a href=\"https://zh.wikipedia.org/wiki/Tcsh\" rel=\"noopener nofollow\" target=\"_blank\">tcsh</a> 的某些功能。</p>\n<p>2019 年，由于新版本的 Bash v5 将开源授权改成了 GPLv3 协议，而 Apple 公司一贯避免在系统组件中引入 GPLv3 软件。于是自从那时起，macOS 系统上的预置 Shell 就已从 Bash 改为了 Zsh。另外，<a href=\"https://zh.wikipedia.org/wiki/Kali_Linux\" rel=\"noopener nofollow\" target=\"_blank\">Kali Linux</a> 也使用 Zsh 作为预置 Shell。其主要特性包括：</p>\n<ul>\n<li>提供可编程的命令行补全功能，该功能可帮助用户键入常用命令选项及参数；</li>\n<li>提供可编程的命令行界面，包括将提示行信息显示在屏幕右侧，以及自动隐藏过长指令等功能；</li>\n<li>提供可与任意 Shell 共享的命令行历史记录；</li>\n<li>可在不借助外部程序的情况下实现文件的查找；</li>\n<li>改进了针对变量/数组的处理方式；</li>\n<li>允许在单缓冲区内编辑多行命令；</li>\n<li>支持针对命令的拼写检查；</li>\n<li>支持多种兼容模式（例如，Zsh 可在运行为<code>/bin/sh</code>的情况下伪装成 Bourne shell）</li>\n<li>支持以加载模块的方式引入额外的功能，包括支持 Unix 域套接字控制、FTP 客户端等；</li>\n<li>提供有<code>where</code>命令，该命令的使用方法与<code>which</code>命令类似，但返回的是指定指令在<code>$PATH</code>中的全部位置，而不是它当前最优先匹配的位置；</li>\n<li>允许用户为指定目录设置别名，例如，用户可以为<code>/usr/bin</code>设置别名<code>/u</code>，这样在输入<code>/u</code>时，Zsh 会自动将其替换为<code>/usr/bin</code>；</li>\n</ul>\n<h2 id=\"安装步骤\">安装步骤</h2>\n<p>在安装之前，我希望读者确定自己是在类 UNIX 系统下，因为 Zsh 是在类 UNIX 系统下运行的 Shell 程序，如果您使用的是 Windows 系统，推荐使用 Windows Subsystem for Linux（WSL）。下面书归正传，Zsh 在每个操作系统中的安装方式并不完全相同，下面是其在几种常见 Linux/UNIX 系统下的安装命令：</p>\n<pre><code class=\"language-bash\"># macOS 系统下的安装命令：\nbrew install zsh\n\n# ubuntu/debian 系统下的安装命令：\nsudo apt install zsh\n\n# CentOS 系统下的安装命令：\nsudo yum install zsh\n\n# ArchLinux/Manjaro 系统下的安装命令：\nsudo pacman -S zsh\n</code></pre>\n<p>如果您使用的是上述操作系统之一，在执行完相应的安装命令之后，就可以使用<code>cat /etc/shells</code>命令查看当前系统可以用的 Shell 了。然后，只要在该命令返回的结果中看到<code>/bin/zsh</code>，就说明 Zsh 已经安装好了，如图 1 所示。</p>\n\n<p><img alt=\"图 1：当前可用的 Shell\" class=\"lazyload\" /></p>\n<p><strong>图 1</strong>：当前可用的 Shell</p>\n<p>接下来，我们可以使用<code>chsh -s /bin/zsh</code>命令将 Zsh 设置为系统默认 Shell 了。如果到目前为止的操作一切顺利，现在只需要重新启动一个 Shell 会话（通常是一个命令行终端窗口），就会看到 Zsh 的初始配置了，如图 2 所示。</p>\n\n<p><img alt=\"图 2：Zsh 的配置引导界面\" class=\"lazyload\" /></p>\n<p><strong>图 2</strong>：Zsh 的配置引导界面</p>\n<p>在上述界面中，如果我们输入<code>q</code>会直接退出配置引导，下一次运行 zsh 时会再次进入配置引导。如果输入<code>0</code>，也会退出配置引导，但是会在当前用户目录生成一个空白的文件<code>.zshrc</code>（路径为<code>~/.zshrc</code>），并且不会再进入配置引导界面。换言之，Zsh 会不会在启动时进入配置引导界面取决于当前用户目录下是否存在<code>.zshrc</code>文件，该文件是 Zsh 的默认配置文件，人们可以使用 vim 编辑器打开它并进行源码级别的手动配置。而如果我们在这里输入<code>1</code>，就会开始进行一系列自定义的配置。但通常情况下，考虑到<code>.zshrc</code>文件中各项配置的复杂性，我们在这里并不推荐读者直接进行手动配置，使用 Oh-My-Zsh 来进行配置会是更好的选择。</p>\n<h2 id=\"oh-my-zsh\">Oh-My-Zsh</h2>\n<p>Oh-My-Zsh 是一款 Zsh 的配置管理工具，它提供了丰富的主题和插件，可以极大地美化命令行界面，并提高工作效率。我们需要这项工具的原因在于：原生的 Zsh 虽然很强大，但存在着以下几个配置成本方面的问题：</p>\n<ul>\n<li>稍复杂的配置就需要使用编码的方式修改<code>.zshrc</code>文件；</li>\n<li>命令的自动补全和提示需要手动调教；</li>\n<li>引入第三方主题与插件的相关配置就更为复杂了。</li>\n</ul>\n<p>而 Oh-My-Zsh 的作用就是把这些复杂的配置一次性打包好，确保开箱即用，它相对于 Bash、原生 Zsh 的优势如表 1 所示：</p>\n<table>\n<thead>\n<tr>\n<th>项目</th>\n<th>Bash</th>\n<th>原生 Zsh</th>\n<th>Oh My Zsh</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>自动补全</td>\n<td>基础</td>\n<td>强</td>\n<td><strong>非常强</strong></td>\n</tr>\n<tr>\n<td>配置难度</td>\n<td>低</td>\n<td>高</td>\n<td><strong>低</strong></td>\n</tr>\n<tr>\n<td>插件系统</td>\n<td>无</td>\n<td>无</td>\n<td><strong>有</strong></td>\n</tr>\n<tr>\n<td>主题</td>\n<td>基本无</td>\n<td>有</td>\n<td><strong>大量现成</strong></td>\n</tr>\n<tr>\n<td>上手速度</td>\n<td>快</td>\n<td>慢</td>\n<td><strong>最快</strong></td>\n</tr>\n</tbody>\n</table>\n<p><strong>表 1</strong>：Bash、原生 Zsh 与 Oh My Zsh 的对比</p>\n<p>在了解 Oh-My-Zsh 的基本信息以及所能发挥的功能之后，我们现在就来演示一下它的安装步骤：</p>\n<ul>\n<li>\n<p>在安装 Oh-My-Zsh 之前，需要确保本地已经安装了 Git，关于 Git 的安装与配置步骤，读者可参考我在《[[Git 使用笔记]]》中的记录；</p>\n</li>\n<li>\n<p>打开 Zsh 终端窗口，并在用户目录下使用 curl 或 wget 命令下载 Oh-My-Zsh 的安装脚本，并执行它：</p>\n<pre><code class=\"language-bash\"># 使用 curl 下载脚本并安装：\nsh -c \"$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\"\n\n# 使用 wget 下载脚本并安装：\nsh -c \"$(wget https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh -O -)\"\n</code></pre>\n</li>\n<li>\n<p>在执行上述命令过程中，我们需要同意 Oh-My-Zsh 使用自身的配置模板覆盖已有的<code>.zshrc</code>文件，如图 3 所示（由于我已完成配置，不便截图，此处引用来自<a href=\"https://www.haoyep.com/posts/zsh-config-oh-my-zsh/\" rel=\"noopener nofollow\" target=\"_blank\">网络的截图</a>）：</p>\n  \n<p><img alt=\"图 3：Oh-My-Zsh 的安装界面\" class=\"lazyload\" /></p>\n<p><strong>图 3</strong>：Oh-My-Zsh 的安装过程</p>\n</li>\n</ul>\n<p>待安装顺利完成之后，用户的<code>home</code>目录下会出现一个名为<code>.oh-my-zsh</code>的目录，该目录中存储的就是 Oh-My-Zsh 框架本身，及其主题和插件的实现代码。下面，我们从功能插件、外观配置与快捷命令三个方面来介绍基于 Oh-My-Zsh 配置 Zsh 的主要方法。</p>\n<h3 id=\"功能插件\">功能插件</h3>\n<p>Oh-My-Zsh 的核心竞争力主要来自于它所提供的那套极具开放性的，高度可定制的插件系统，这让我们可以根据自己的喜好进行选择和配置，打造一个富有个性的命令行终端界面。下面是我个人常用的一些插件及其相关介绍：</p>\n<table>\n<thead>\n<tr>\n<th>插件</th>\n<th>功能</th>\n<th>使用说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>z</code></td>\n<td>可实现智能目录跳转。</td>\n<td><code>z &lt;目录名&gt;</code> （该目录需历史记录中出现过）</td>\n</tr>\n<tr>\n<td><code>git</code></td>\n<td>可用<code>ga</code>、<code>gc</code>等快捷命令。</td>\n<td><code>gc -m \"commit message\"</code></td>\n</tr>\n<tr>\n<td><code>extract</code></td>\n<td>提供<code>x</code>压缩包解压命令。</td>\n<td><code>x file_name.tar.gz</code></td>\n</tr>\n<tr>\n<td><code>web-search</code></td>\n<td>可实现网页搜索。</td>\n<td><code>google &lt;搜索内容&gt;</code>或<code>baidu &lt;搜索内容&gt;</code></td>\n</tr>\n<tr>\n<td><code>you-should-use</code></td>\n<td>命令行错误提示功能。</td>\n<td>在命令输入错误时，会给出正确的命令提示。</td>\n</tr>\n<tr>\n<td><code>zsh-completions</code></td>\n<td>命令行自动补齐功能。</td>\n<td>在输入命令时按<code>Tab</code>键会自动补齐。</td>\n</tr>\n<tr>\n<td><code>zsh-autosuggestions</code></td>\n<td>命令行自动提示功能。</td>\n<td>在输入命令时会自动给出提示。</td>\n</tr>\n<tr>\n<td><code>zsh-syntax-highlighting</code></td>\n<td>命令行语法高亮功能。</td>\n<td>在输入命令时会根据语法高亮。</td>\n</tr>\n</tbody>\n</table>\n<p>在 Oh-My-Zsh 中安装和启用插件通常可按照以下三个步骤来进行（如果是自带插件，则可跳过第一步）：</p>\n<ol>\n<li>\n<p>如果我们要启用的不是 Oh-My-Zsh 的内置插件，那该插件通常会在 Github 上有独立的仓库，人们需要先使用<code>git clone</code>命令将其下载到 Oh-My-Zsh 安装目录下的<code>custom/plugins</code>目录中（而内置插件则已存在于 Oh-My-Zsh 安装目录下的<code>plugins</code>目录中，无需下载），例如，我们现在要启用的是<code>zsh-autosuggestions</code>插件，这是一个第三方插件，这就需要先执行以下命令，将其下载到 Oh-My-Zsh 安装目录下的<code>custom/plugins</code>目录中：</p>\n<pre><code class=\"language-bash\">git clone https://github.com/zsh-users/zsh-autosuggestions $ZSH_CUSTOM/plugins/zsh-autosuggestions\n</code></pre>\n</li>\n<li>\n<p>使用 vim 这样的文本编辑器打开<code>.zshrc</code>文件，并在其中找到<code>plugins</code>字段，并将要启用的插件名称添加到该字段中（该字段的值是一个用空白符分隔的字符串），例如，如果我们现在要启用的插件包括<code>z</code>、<code>git</code>、<code>extract</code>、<code>web-search</code>、<code>you-should-use</code>、<code>zsh-completions</code>、<code>zsh-autosuggestions</code>、<code>zsh-syntax-highlighting</code>，那么<code>.zshrc</code>文件中<code>plugins</code>字段的值就该被设置如下：</p>\n<pre><code class=\"language-bash\">plugins=(\n    z \n    git\n    extract\n    web-search\n    you-should-use \n    zsh-completions \n    zsh-autosuggestions \n    zsh-syntax-highlighting \n    zsh-history-substring-search\n)\n</code></pre>\n</li>\n<li>\n<p>保存并关闭<code>.zshrc</code>文件，然后执行<code>source ~/.zshrc</code>或<code>omz reload</code>命令使配置生效。例如，图 4 所示的是启用<code>extract</code>插件之后，使用<code>x</code>命令解压文件的效果：</p>\n \n<p><img alt=\"图 4：extract 插件的效果\" class=\"lazyload\" /></p>\n<p><strong>图 4</strong>：extract 插件的效果</p>\n</li>\n</ol>\n<h3 id=\"外观配置\">外观配置</h3>\n<p>在 Oh-My-Zsh 中，我们可以通过一种被称之为“主题”的特殊插件来配置 Zsh 界面所呈现的外观，目的是通过各种特定的颜色和提示信息让命令行界面的易用性和美观性达到一个平衡。Oh-My-Zsh 内置了大量的主题，它们都被存放在 Oh-My-Zsh 安装目录下的<code>themes</code>目录中（也可以前往 <a href=\"https://github.com/ohmyzsh/ohmyzsh/wiki/Themes\" rel=\"noopener nofollow\" target=\"_blank\">Oh-My-Zsh 官方文档</a>查看），如图 5 所示：</p>\n\n<p><img alt=\"图 5：Oh-My-Zsh 内置的主题\" class=\"lazyload\" /></p>\n<p><strong>图 5</strong>：Oh-My-Zsh 内置的主题</p>\n<p>如果我们想启用上述任意一个 Oh-My-Zsh 的内置主题，就只需将<code>.zshrc</code>文件中的<code>ZSH_THEME</code>变量值修改为该主题的名称即可，例如，假设现在要启用的是<code>agnoster</code>主题，我们就只需要执行以下步骤：</p>\n<ul>\n<li>\n<p>先使用 vim 这样的文本编辑器打开<code>.zshrc</code>文件；</p>\n</li>\n<li>\n<p>找到<code>ZSH_THEME</code>变量，并将它的值设置如下即可：</p>\n<pre><code class=\"language-bash\">ZSH_THEME=\"agnoster\" # 默认主题为 robbyrussell\n</code></pre>\n</li>\n<li>\n<p>保存并关闭<code>.zshrc</code>文件，然后执行<code>source ~/.zshrc</code>命令使配置生效，其效果如图 6 所示：</p>\n  \n<p><img alt=\"图 6：agnoster 主题的效果\" class=\"lazyload\" /></p>\n<p><strong>图 6</strong>：agnoster 主题的效果</p>\n</li>\n</ul>\n<p>当然，除了上述内置主题之外，我们还可以选择安装其他开源的主题，例如，<a href=\"https://github.com/romkatv/powerlevel10k\" rel=\"noopener nofollow\" target=\"_blank\">powerlevel10k</a>就是一个非常受欢迎的，功能强大的主题，它提供了丰富的配置选项，可以让我们打造出各种个性化的命令行界面，其安装与配置步骤如下：</p>\n<ol>\n<li>\n<p>使用<code>git clone</code>命令将主题下载到 Oh-My-Zsh 安装目录下的<code>custom/themes</code>目录中：</p>\n<pre><code class=\"language-bash\">git clone --depth=1 https://github.com/romkatv/powerlevel10k.git $ZSH_CUSTOM/themes/powerlevel10k\n</code></pre>\n</li>\n<li>\n<p>使用 vim 这样的文本编辑器打开<code>.zshrc</code>文件，并在其中找到<code>ZSH_THEME</code>变量，并将它的值设置为我们刚刚下载的主题名称即可：</p>\n<pre><code class=\"language-bash\">ZSH_THEME=\"powerlevel10k/powerlevel10k\"\n</code></pre>\n</li>\n<li>\n<p>保存并关闭<code>.zshrc</code>文件，然后执行<code>source ~/.zshrc</code>或<code>omz reload</code>命令使配置生效。在该主题配置首次生效时会启动一个配置向导（之后也可以通过执行<code>p10k configure</code>命令来启动该向导），引导我们完成主题的配置，如图 7 所示：</p>\n \n<p><img alt=\"图 7：powerlevel10k 主题的配置向导\" class=\"lazyload\" /></p>\n<p><strong>图 7</strong>：powerlevel10k 主题的配置向导</p>\n</li>\n<li>\n<p>接下来，我们只需要根据上述配置向导的提示，按照自己的喜欢一步一步地做出选择，就可以完成主题的配置，我个人的配置效果如图 8 所示：</p>\n \n<p><img alt=\"图 8：powerlevel10k 主题的配置效果\" class=\"lazyload\" /></p>\n<p><strong>图 8</strong>：powerlevel10k 主题的配置效果</p>\n</li>\n</ol>\n<h3 id=\"快捷命令\">快捷命令</h3>\n<p>对于类似于进入某个特定工作目录的常用命令，Zsh 提供了一种被称为 alias 的机制，让我们可以为其设置一个快捷命令。例如，<code>~/working/notes</code>目录是我们每次写笔记时要打开的目录，如果我们想使用 Zsh 的 alias 机制为<code>cd ~/working/notes</code>命令设置一个快捷命令，就可以使用 vim 编辑器打开在<code>.zshrc</code>文件，并在其中恰当的位置上添加如下配置：</p>\n<pre><code class=\"language-bash\">alias cd-notes=\"cd ~/working/notes\"\n</code></pre>\n<p>配置完成后，我们就可以使用<code>cd-notes</code>这个快捷命令命令来执行进入<code>~/working/notes</code>目录了。当然，除了手动配置的 Zsh alias 之外，在安装了Oh-My-Zsh 之后，我们还可以使用该框架所内置的一系列常用的 alias。例如在启用了<code>git</code>插件之后，我们就可以使用它提供的 alias 来执行 git 相关操作了，具体命令列表可查阅 Oh-My-Zsh 官方提供的 <a href=\"https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins/git\" rel=\"noopener nofollow\" target=\"_blank\">git 插件文档</a>。</p>\n\n</div>\n<div class=\"clear\"></div>\n\n        <p class=\"postfoot\">\n            posted on \n<span id=\"post-date\">2026-01-06 20:01</span>&nbsp;\n<a href=\"https://www.cnblogs.com/owlman\">凌杰</a>&nbsp;\n阅读(<span id=\"post_view_count\">38</span>)&nbsp;\n评论(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">收藏</a>&nbsp;\n<a href=\"\">举报</a>\n\n        </p>"
    },
    {
      "title": "PC端自动化测试实战教程-8-pywinauto操作应用程序窗口的控件（详细教程）",
      "link": "https://www.cnblogs.com/du-hong/p/18826978",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/du-hong/p/18826978\" id=\"cb_post_title_url\" title=\"发布于 2026-01-06 16:45\">\n    <span>PC端自动化测试实战教程-8-pywinauto操作应用程序窗口的控件（详细教程）</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body blogpost-body-html\" id=\"cnblogs_post_body\">\n<h3>1.简介</h3>\n<p>前边的几篇文章，宏哥依次介绍了环境的搭建、启动应用程序、操作应用程序窗口以及等待的各种方法和实践。今天跟随宏哥一起来看下应用程序窗口的控件怎么操作呢？？？其实这个知识点前边已经有所涉及，只不过是一带而过，没有展开详细介绍。今天就来讲解和分享一下。PC端的应用程序的操作都是基于控件操作，如果要操作控件，我们就必须首先要找到控件对应的窗口，因此我们只需要基于控件查找对应的窗口框架，然后定位到控件即可操作了。那么跟随宏哥先来看一下常用的定位控件的方法。</p>\n<h3 id=\"常用定位控件方法\">2.常用定位控件方法</h3>\n<h4>2.1通过层级查找控件相关方法</h4>\n<p>常用的定位控件的方法如下：</p>\n<ul>\n<li>window(**kwargs) # 用于窗口的查找</li>\n<li>child_window(**kwargs) # 可以无视层级的找后代中某个符合条件的元素===&gt;【最常用】</li>\n<li>parent() # 返回此元素的父元素,没有参数</li>\n<li>children(**kwargs) # 返回符合条件的子元素列表,支持索引，是BaseWrapper对象（或子类）</li>\n<li>iter_children(**kwargs) # 返回子元素的迭代器，是BaseWrapper对象（或子类）</li>\n<li>descendants(**kwargs) # 返回符合条件的所有后代元素列表,是BaseWrapper对象（或子类）</li>\n<li>iter_children(**kwargs) # 符合条件后代元素迭代器，是BaseWrapper对象（或子类）</li>\n</ul>\n<h4>2.2**kwargs 常用的一些参数</h4>\n<p>**kwargs 常用的一些参数如下：</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 0, 1);\">class_name=None, # 类名\nclass_name_re=None, # 正则匹配类名\ntitle=None, # 控件的标题文字，对应inspect中Name字段\ntitle_re=None, # 正则匹配文字\ncontrol_type=None, # 控件类型，inspect界面LocalizedControlType字段的英文名\nbest_match=None, # 模糊匹配类似的title\nauto_id=None, # inspect界面AutomationId字段，但是很多控件没有这个属性\nparent=None,\nprocess=None, # 这个基本不用，每次启动进程都会变化\ntop_level_only=True,\nvisible_only=True,\nenabled_only=False,\nhandle=None,\nctrl_index=None,\nfound_index=None,\npredicate_func=None,\nactive_only=False,\ncontrol_id=None,\nframework_id=None,\nbackend=None,</span></pre>\n</div>\n<h3>3.查看窗口控件</h3>\n<p>要想操作窗口控件吗，我们需要先学会如何查看窗口框架，查看窗口的结构树。宏哥这里介绍两种比较常用的方法，而且这两种方法前边都有所介绍和讲解，这里简单演示一下即可。</p>\n<h4>3.1方法一（工具）</h4>\n<p>可以用inspect.exe 查看窗口的层级结构树。</p>\n<p>1.双击启动inspect.exe软件，然后点击窗口的箭头按钮，如下图所示：</p>\n<p><img alt=\"\" src=\"https://img2024.cnblogs.com/blog/1232840/202504/1232840-20250417084315152-1636677140.png\" /></p>\n<p>2.然后鼠标再次点击你要查看的窗口（宏哥要查看记事本的编辑区域的窗口结构树，点击箭头，然后再点击记事本的编辑区域）。如下图所示：</p>\n<p><img alt=\"\" src=\"https://img2024.cnblogs.com/blog/1232840/202504/1232840-20250417084338788-1693555032.gif\" /></p>\n<h4>3.2方法二（代码）</h4>\n<p>可以通过<code>print_ctrl_ids()</code>方法 (另外一个<code>print_control_identifiers()</code>&nbsp;功能一样，这个前边的文章已经介绍过也用过，今天介绍没有用过的)查看当前窗口下的控件。</p>\n<h5>3.2.1代码设计</h5>\n<p><img alt=\"\" src=\"https://img2024.cnblogs.com/blog/1232840/202504/1232840-20250417085233259-552179057.png\" /></p>\n<h5>3.2.2参考代码</h5>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> -*- coding:utf-8 -*-</span>\n\n<span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> 1.先设置编码，utf-8可支持中英文，如上，一般放在第一行</span>\n\n<span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> 2.注释：包括记录创建时间，创建人，项目名称。</span>\n<span style=\"color: rgba(128, 0, 0, 1);\">'''</span><span style=\"color: rgba(128, 0, 0, 1);\">\nCreated on 2025-04-18\n@author: 北京-宏哥\n北京宏哥（微信搜索：北京宏哥，关注宏哥，提前解锁更多测试干货！）\nProject: PC端自动化测试实战教程-8-pywinauto操作应用程序窗口的控件（详细教程）\n</span><span style=\"color: rgba(128, 0, 0, 1);\">'''</span>\n\n<span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> 3.导入模块</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">from</span> pywinauto <span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> Application\n</span><span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> time\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> 通过窗口打开</span>\napp = Application(<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">uia</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>).start(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">notepad.exe</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\ntime.sleep(</span>10<span style=\"color: rgba(0, 0, 0, 1);\">)\napp </span>= Application(<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">uia</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>).connect(class_name=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Notepad</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>,visible_only=<span style=\"color: rgba(0, 0, 0, 1);\">False)\nwin </span>= app[<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题 - Notepad</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\nwin.print_ctrl_ids()</span></pre>\n</div>\n<h5>3.2.3运行代码</h5>\n<p>1.运行代码，右键Run'Test'，就可以看到控制台输出，如下图所示：</p>\n<p><img alt=\"\" src=\"https://img2024.cnblogs.com/blog/1232840/202504/1232840-20250417085953947-1259510100.png\" /></p>\n<p>2.运行代码后电脑端的动作（启动记事本，打印窗口结构树）。如下图所示：</p>\n<p><img alt=\"\" src=\"https://img2024.cnblogs.com/blog/1232840/202504/1232840-20250417085905208-106052787.gif\" /></p>\n<h3>4.对比工具和代码查看的控件</h3>\n<p>因为要在记事本的编辑区域输入内容，所以我们需要操作编辑区域窗口的控件。但是此时宏哥发现工具查看的窗口结构树和代码打印的完全不一致，这难道因为宏哥的是Windows11系统吗？？？</p>\n<p>1.工具查看记事本编辑区域，如下图所示：</p>\n<p><img alt=\"\" src=\"https://img2024.cnblogs.com/blog/1232840/202504/1232840-20250417092946994-1597173468.png\" /></p>\n<p>2.代码打印记事本结构树，如下图所示：</p>\n<div class=\"cnblogs_code\">\n<pre>D:\\Python\\python.exe D:/Demo/<span style=\"color: rgba(0, 0, 0, 1);\">test.py\nControl Identifiers:\n\nDialog </span>- <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题 - Notepad</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">    (L0, T0, R0, B0)\n[</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题 - NotepadDialog</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Dialog</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题 - Notepad</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Dialog0</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Dialog1</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\nchild_window(title</span>=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题 - Notepad</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, control_type=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Window</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>| \n   | Pane - <span style=\"color: rgba(128, 0, 0, 1);\">''</span>    (L-<span style=\"color: rgba(128, 0, 128, 1);\">31992</span>, T-<span style=\"color: rgba(128, 0, 128, 1);\">31907</span>, R-<span style=\"color: rgba(128, 0, 128, 1);\">31297</span>, B-<span style=\"color: rgba(128, 0, 128, 1);\">31554</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>| [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题Pane</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Pane</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题Pane0</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题Pane1</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Pane0</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Pane1</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    | \n   |    | Document - <span style=\"color: rgba(128, 0, 0, 1);\">''</span>    (L-<span style=\"color: rgba(128, 0, 128, 1);\">31992</span>, T-<span style=\"color: rgba(128, 0, 128, 1);\">31907</span>, R-<span style=\"color: rgba(128, 0, 128, 1);\">31297</span>, B-<span style=\"color: rgba(128, 0, 128, 1);\">31554</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题Document</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Document</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>| \n   | Pane - <span style=\"color: rgba(128, 0, 0, 1);\">''</span>    (L-<span style=\"color: rgba(128, 0, 128, 1);\">31942</span>, T-<span style=\"color: rgba(128, 0, 128, 1);\">31988</span>, R-<span style=\"color: rgba(128, 0, 128, 1);\">31655</span>, B-<span style=\"color: rgba(128, 0, 128, 1);\">31956</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>| [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题Pane2</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Pane2</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    | \n   |    | TabControl - <span style=\"color: rgba(128, 0, 0, 1);\">''</span>    (L-<span style=\"color: rgba(128, 0, 128, 1);\">31942</span>, T-<span style=\"color: rgba(128, 0, 128, 1);\">31988</span>, R-<span style=\"color: rgba(128, 0, 128, 1);\">31583</span>, B-<span style=\"color: rgba(128, 0, 128, 1);\">31948</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">TabControl添加新标签页</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">TabControl</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题TabControl</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    | child_window(auto_id=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Tabs</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, control_type=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Tab</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    |    | \n   |    |    | ListBox - <span style=\"color: rgba(128, 0, 0, 1);\">''</span>    (L-<span style=\"color: rgba(128, 0, 128, 1);\">31940</span>, T-<span style=\"color: rgba(128, 0, 128, 1);\">31988</span>, R-<span style=\"color: rgba(128, 0, 128, 1);\">31628</span>, B-<span style=\"color: rgba(128, 0, 128, 1);\">31948</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    |    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题ListBox</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">ListBox</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    |    | child_window(auto_id=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">TabListView</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, control_type=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">List</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    |    |    | \n   |    |    |    | TabItem - <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题. 未修改。</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>    (L-<span style=\"color: rgba(128, 0, 128, 1);\">31937</span>, T-<span style=\"color: rgba(128, 0, 128, 1);\">31988</span>, R-<span style=\"color: rgba(128, 0, 128, 1);\">31630</span>, B-<span style=\"color: rgba(128, 0, 128, 1);\">31948</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    |    |    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题. 未修改。</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题. 未修改。TabItem</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">TabItem</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    |    |    | child_window(title=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题. 未修改。</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, control_type=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">TabItem</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    |    |    |    | \n   |    |    |    |    | Static - <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>    (L-<span style=\"color: rgba(128, 0, 128, 1);\">31921</span>, T-<span style=\"color: rgba(128, 0, 128, 1);\">31978</span>, R-<span style=\"color: rgba(128, 0, 128, 1);\">31876</span>, B-<span style=\"color: rgba(128, 0, 128, 1);\">31959</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    |    |    |    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Static</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题Static</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Static0</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Static1</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    |    |    |    | child_window(title=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, control_type=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Text</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    |    |    |    | \n   |    |    |    |    | Button - <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">关闭标签页</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>    (L-<span style=\"color: rgba(128, 0, 128, 1);\">31681</span>, T-<span style=\"color: rgba(128, 0, 128, 1);\">31983</span>, R-<span style=\"color: rgba(128, 0, 128, 1);\">31641</span>, B-<span style=\"color: rgba(128, 0, 128, 1);\">31953</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    |    |    |    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Button</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">关闭标签页</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">关闭标签页Button</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Button0</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Button1</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    |    |    |    | child_window(title=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">关闭标签页</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, auto_id=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">CloseButton</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, control_type=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Button</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    |    | \n   |    |    | Button - <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">添加新标签页</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>    (L-<span style=\"color: rgba(128, 0, 128, 1);\">31623</span>, T-<span style=\"color: rgba(128, 0, 128, 1);\">31982</span>, R-<span style=\"color: rgba(128, 0, 128, 1);\">31583</span>, B-<span style=\"color: rgba(128, 0, 128, 1);\">31952</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    |    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">添加新标签页</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Button2</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">添加新标签页Button</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    |    | child_window(title=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">添加新标签页</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, auto_id=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">AddButton</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, control_type=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Button</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    | \n   |    | Pane - <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">记事本自动保存进度。下次打开记事本时，你的所有内容都将可用。</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">    (L0, T0, R0, B0)\n   </span>|    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">记事本自动保存进度。下次打开记事本时，你的所有内容都将可用。Pane</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">记事本自动保存进度。下次打开记事本时，你的所有内容都将可用。</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Pane3</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    | child_window(title=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">记事本自动保存进度。下次打开记事本时，你的所有内容都将可用。</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, auto_id=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">TeachingTip</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, control_type=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Pane</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>| \n   | Pane - <span style=\"color: rgba(128, 0, 0, 1);\">''</span>    (L-<span style=\"color: rgba(128, 0, 128, 1);\">31992</span>, T-<span style=\"color: rgba(128, 0, 128, 1);\">31948</span>, R-<span style=\"color: rgba(128, 0, 128, 1);\">31436</span>, B-<span style=\"color: rgba(128, 0, 128, 1);\">31916</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>| [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题Pane3</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Pane4</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    | \n   |    | Menu - <span style=\"color: rgba(128, 0, 0, 1);\">''</span>    (L-<span style=\"color: rgba(128, 0, 128, 1);\">31992</span>, T-<span style=\"color: rgba(128, 0, 128, 1);\">31948</span>, R-<span style=\"color: rgba(128, 0, 128, 1);\">31782</span>, B-<span style=\"color: rgba(128, 0, 128, 1);\">31908</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Menu</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题Menu</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Menu0</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Menu1</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    | child_window(auto_id=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">MenuBar</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, control_type=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">MenuBar</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    |    | \n   |    |    | MenuItem - <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">文件</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>    (L-<span style=\"color: rgba(128, 0, 128, 1);\">31987</span>, T-<span style=\"color: rgba(128, 0, 128, 1);\">31948</span>, R-<span style=\"color: rgba(128, 0, 128, 1);\">31927</span>, B-<span style=\"color: rgba(128, 0, 128, 1);\">31908</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    |    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">MenuItem</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">文件MenuItem</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">文件</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">MenuItem0</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">MenuItem1</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    |    | child_window(title=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">文件</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, auto_id=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">File</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, control_type=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">MenuItem</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    |    | \n   |    |    | MenuItem - <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">编辑</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>    (L-<span style=\"color: rgba(128, 0, 128, 1);\">31917</span>, T-<span style=\"color: rgba(128, 0, 128, 1);\">31948</span>, R-<span style=\"color: rgba(128, 0, 128, 1);\">31857</span>, B-<span style=\"color: rgba(128, 0, 128, 1);\">31908</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    |    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">编辑</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">MenuItem2</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">编辑MenuItem</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    |    | child_window(title=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">编辑</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, auto_id=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Edit</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, control_type=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">MenuItem</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    |    | \n   |    |    | MenuItem - <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">查看</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>    (L-<span style=\"color: rgba(128, 0, 128, 1);\">31847</span>, T-<span style=\"color: rgba(128, 0, 128, 1);\">31948</span>, R-<span style=\"color: rgba(128, 0, 128, 1);\">31787</span>, B-<span style=\"color: rgba(128, 0, 128, 1);\">31908</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    |    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">MenuItem3</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">查看</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">查看MenuItem</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    |    | child_window(title=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">查看</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, auto_id=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">View</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, control_type=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">MenuItem</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    | \n   |    | Button - <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">设置</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>    (L-<span style=\"color: rgba(128, 0, 128, 1);\">31345</span>, T-<span style=\"color: rgba(128, 0, 128, 1);\">31948</span>, R-<span style=\"color: rgba(128, 0, 128, 1);\">31307</span>, B-<span style=\"color: rgba(128, 0, 128, 1);\">31908</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">设置Button</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Button3</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">设置</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    | child_window(title=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">设置</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, auto_id=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">SettingsButton</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, control_type=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Button</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    | \n   |    | Dialog - <span style=\"color: rgba(128, 0, 0, 1);\">''</span><span style=\"color: rgba(0, 0, 0, 1);\">    (L0, T0, R0, B0)\n   </span>|    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Dialog2</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    | child_window(auto_id=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">CowriterTeachingTip</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, control_type=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Window</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>| \n   | Pane - <span style=\"color: rgba(128, 0, 0, 1);\">''</span>    (L-<span style=\"color: rgba(128, 0, 128, 1);\">31992</span>, T-<span style=\"color: rgba(128, 0, 128, 1);\">31554</span>, R-<span style=\"color: rgba(128, 0, 128, 1);\">31436</span>, B-<span style=\"color: rgba(128, 0, 128, 1);\">31522</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>| [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">  行 1，列 1Pane</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Pane5</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    | \n   |    | Static - <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">  行 1，列 1</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>    (L-<span style=\"color: rgba(128, 0, 128, 1);\">31972</span>, T-<span style=\"color: rgba(128, 0, 128, 1);\">31544</span>, R-<span style=\"color: rgba(128, 0, 128, 1);\">31893</span>, B-<span style=\"color: rgba(128, 0, 128, 1);\">31524</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Static2</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">  行 1，列 1</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">  行 1，列 1Static</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    | child_window(title=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">  行 1，列 1</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, auto_id=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">ContentTextBlock</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, control_type=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Text</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    | \n   |    | Static - <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">0 个字符</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>    (L-<span style=\"color: rgba(128, 0, 128, 1);\">31861</span>, T-<span style=\"color: rgba(128, 0, 128, 1);\">31544</span>, R-<span style=\"color: rgba(128, 0, 128, 1);\">31803</span>, B-<span style=\"color: rgba(128, 0, 128, 1);\">31524</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Static3</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">0 个字符</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">0 个字符Static</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    | child_window(title=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">0 个字符</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, auto_id=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">ContentTextBlock</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, control_type=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Text</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    | \n   |    | Static - <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\"> 100%</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>    (L-<span style=\"color: rgba(128, 0, 128, 1);\">31700</span>, T-<span style=\"color: rgba(128, 0, 128, 1);\">31544</span>, R-<span style=\"color: rgba(128, 0, 128, 1);\">31659</span>, B-<span style=\"color: rgba(128, 0, 128, 1);\">31524</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Static4</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\"> 100%</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\"> 100%Static</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    | child_window(title=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\"> 100%</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, auto_id=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">ContentTextBlock</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, control_type=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Text</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    | \n   |    | Static - <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\"> Windows (CRLF)</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>    (L-<span style=\"color: rgba(128, 0, 128, 1);\">31616</span>, T-<span style=\"color: rgba(128, 0, 128, 1);\">31544</span>, R-<span style=\"color: rgba(128, 0, 128, 1);\">31505</span>, B-<span style=\"color: rgba(128, 0, 128, 1);\">31524</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Static5</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\"> Windows (CRLF)Static</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\"> Windows (CRLF)</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    | child_window(title=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\"> Windows (CRLF)</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, auto_id=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">ContentTextBlock</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, control_type=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Text</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    | \n   |    | Static - <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\"> UTF-8</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>    (L-<span style=\"color: rgba(128, 0, 128, 1);\">31456</span>, T-<span style=\"color: rgba(128, 0, 128, 1);\">31544</span>, R-<span style=\"color: rgba(128, 0, 128, 1);\">31412</span>, B-<span style=\"color: rgba(128, 0, 128, 1);\">31524</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Static6</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\"> UTF-8Static</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\"> UTF-8</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    | child_window(title=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\"> UTF-8</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, auto_id=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">ContentTextBlock</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, control_type=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Text</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>| \n   | TitleBar - <span style=\"color: rgba(128, 0, 0, 1);\">''</span><span style=\"color: rgba(0, 0, 0, 1);\">    (L0, T0, R0, B0)\n   </span>| [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\"> UTF-8TitleBar</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">TitleBar</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    | \n   |    | Menu - <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">系统</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>    (L-<span style=\"color: rgba(128, 0, 128, 1);\">31991</span>, T-<span style=\"color: rgba(128, 0, 128, 1);\">31991</span>, R-<span style=\"color: rgba(128, 0, 128, 1);\">31963</span>, B-<span style=\"color: rgba(128, 0, 128, 1);\">31963</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">系统</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Menu2</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">系统Menu</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">系统0</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">系统1</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    | child_window(title=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">系统</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, auto_id=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">MenuBar</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, control_type=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">MenuBar</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    |    | \n   |    |    | MenuItem - <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">系统</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>    (L-<span style=\"color: rgba(128, 0, 128, 1);\">31991</span>, T-<span style=\"color: rgba(128, 0, 128, 1);\">31991</span>, R-<span style=\"color: rgba(128, 0, 128, 1);\">31963</span>, B-<span style=\"color: rgba(128, 0, 128, 1);\">31963</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    |    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">系统2</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">MenuItem4</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">系统MenuItem</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    |    | child_window(title=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">系统</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, control_type=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">MenuItem</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    | \n   |    | Button - <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">还原</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>    (L-<span style=\"color: rgba(128, 0, 128, 1);\">31987</span>, T-<span style=\"color: rgba(128, 0, 128, 1);\">31999</span>, R-<span style=\"color: rgba(128, 0, 128, 1);\">31927</span>, B-<span style=\"color: rgba(128, 0, 128, 1);\">31973</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Button4</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">还原Button</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">还原</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    | child_window(title=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">还原</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, control_type=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Button</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    | \n   |    | Button - <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">最大化</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>    (L-<span style=\"color: rgba(128, 0, 128, 1);\">31927</span>, T-<span style=\"color: rgba(128, 0, 128, 1);\">31999</span>, R-<span style=\"color: rgba(128, 0, 128, 1);\">31868</span>, B-<span style=\"color: rgba(128, 0, 128, 1);\">31973</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Button5</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">最大化</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">最大化Button</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    | child_window(title=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">最大化</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, control_type=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Button</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    | \n   |    | Button - <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">关闭</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>    (L-<span style=\"color: rgba(128, 0, 128, 1);\">31868</span>, T-<span style=\"color: rgba(128, 0, 128, 1);\">31999</span>, R-<span style=\"color: rgba(128, 0, 128, 1);\">31808</span>, B-<span style=\"color: rgba(128, 0, 128, 1);\">31973</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">关闭</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Button6</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">关闭Button</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    | child_window(title=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">关闭</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, control_type=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Button</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n\nProcess finished with exit code </span><span style=\"color: rgba(128, 0, 128, 1);\">0</span></pre>\n</div>\n<p>宏哥看了代码打印的根本没有工具查看的“文本编辑器”和Classname是“RichEditD2DPT”。这怎么搞......查了好几天资料也没有查到有用的或者能解决问题的方法。然后就打算放弃了...最后突然想到要不把那个“uia”换成“win32”试一下，但是总感觉不靠谱，因为工具查看的记事本是uia。不管了先试一下吧！</p>\n<h4>4.1参考代码</h4>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> -*- coding:utf-8 -*-</span>\n\n<span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> 1.先设置编码，utf-8可支持中英文，如上，一般放在第一行</span>\n\n<span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> 2.注释：包括记录创建时间，创建人，项目名称。</span>\n<span style=\"color: rgba(128, 0, 0, 1);\">'''</span><span style=\"color: rgba(128, 0, 0, 1);\">\nCreated on 2025-04-18\n@author: 北京-宏哥\n北京宏哥（微信搜索：北京宏哥，关注宏哥，提前解锁更多测试干货！）\nProject: PC端自动化测试实战教程-8-pywinauto操作应用程序窗口的控件（详细教程）\n</span><span style=\"color: rgba(128, 0, 0, 1);\">'''</span>\n\n<span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> 3.导入模块</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">from</span> pywinauto <span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> Application\n</span><span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> time\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> 通过窗口打开</span>\napp = Application(<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">win32</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>).start(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">notepad.exe</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\ntime.sleep(</span>10<span style=\"color: rgba(0, 0, 0, 1);\">)\napp </span>= Application(<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">win32</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>).connect(class_name=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Notepad</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>,visible_only=<span style=\"color: rgba(0, 0, 0, 1);\">False)\nwin </span>= app[<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题 - Notepad</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\nwin.print_ctrl_ids()</span></pre>\n</div>\n<h4>4.2运行代码</h4>\n<p>1.运行代码，右键Run'Test'，就可以看到控制台输出，如下图所示：</p>\n<p><img alt=\"\" src=\"https://img2024.cnblogs.com/blog/1232840/202504/1232840-20250417094313286-1450639824.png\" /></p>\n<p>2.出乎意料啊，从上图的控制台，竟然看到了工具查看的classname。不管三七二十一，宏哥觉得离胜利更进一步了。宏哥接着就要尝试能不能操作这个记事本编辑窗口的控件然后输入内容，如果可以就大功告成了。打印结构树如下：</p>\n<div class=\"cnblogs_code\">\n<pre>D:\\Python\\python.exe D:/Demo/<span style=\"color: rgba(0, 0, 0, 1);\">test.py\nD:\\Python\\lib\\site</span>-packages\\pywinauto\\application.py:<span style=\"color: rgba(128, 0, 128, 1);\">1076</span><span style=\"color: rgba(0, 0, 0, 1);\">: RuntimeWarning: Application is not loaded correctly (WaitForInputIdle failed)\n  warnings.warn(</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Application is not loaded correctly (WaitForInputIdle failed)</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">, RuntimeWarning)\nControl Identifiers:\n\nNotepad </span>- <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题 - Notepad</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">    (L1011, T190, R1722, B684)\n[</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Notepad</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题 - Notepad</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题 - NotepadNotepad</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\nchild_window(title</span>=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题 - Notepad</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, class_name=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Notepad</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>| \n   | Windows.UI.Composition.DesktopWindowContentBridge - <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">DesktopWindowXamlSource</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">    (L1019, T615, R1696, B633)\n   </span>| [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Composition.DesktopWindowContentBridge</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">DesktopWindowXamlSourceWindows.UI.Composition.DesktopWindowContentBridge</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">DesktopWindowXamlSource</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Composition.DesktopWindowContentBridge0</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Composition.DesktopWindowContentBridge1</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">DesktopWindowXamlSourceWindows.UI.Composition.DesktopWindowContentBridge0</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">DesktopWindowXamlSourceWindows.UI.Composition.DesktopWindowContentBridge1</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">DesktopWindowXamlSource0</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">DesktopWindowXamlSource1</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>| child_window(title=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">DesktopWindowXamlSource</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, class_name=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Composition.DesktopWindowContentBridge</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    | \n   |    | Windows.UI.Input.InputSite.WindowClass - <span style=\"color: rgba(128, 0, 0, 1);\">''</span><span style=\"color: rgba(0, 0, 0, 1);\">    (L1019, T615, R1019, B615)\n   </span>|    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Input.InputSite.WindowClass</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题 - NotepadWindows.UI.Input.InputSite.WindowClass</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Input.InputSite.WindowClass0</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Input.InputSite.WindowClass1</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题 - NotepadWindows.UI.Input.InputSite.WindowClass0</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题 - NotepadWindows.UI.Input.InputSite.WindowClass1</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    | child_window(class_name=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Input.InputSite.WindowClass</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>| \n   | Windows.UI.Input.InputSite.WindowClass - <span style=\"color: rgba(128, 0, 0, 1);\">''</span><span style=\"color: rgba(0, 0, 0, 1);\">    (L1019, T615, R1019, B615)\n   </span>| [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Input.InputSite.WindowClass</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题 - NotepadWindows.UI.Input.InputSite.WindowClass</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Input.InputSite.WindowClass0</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Input.InputSite.WindowClass1</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题 - NotepadWindows.UI.Input.InputSite.WindowClass0</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题 - NotepadWindows.UI.Input.InputSite.WindowClass1</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>| child_window(class_name=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Input.InputSite.WindowClass</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>| \n   | Windows.UI.Composition.DesktopWindowContentBridge - <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">DesktopWindowXamlSource</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">    (L1693, T283, R1711, B636)\n   </span>| [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Composition.DesktopWindowContentBridge2</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">DesktopWindowXamlSourceWindows.UI.Composition.DesktopWindowContentBridge2</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">DesktopWindowXamlSource2</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>| child_window(title=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">DesktopWindowXamlSource</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, class_name=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Composition.DesktopWindowContentBridge</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    | \n   |    | Windows.UI.Input.InputSite.WindowClass - <span style=\"color: rgba(128, 0, 0, 1);\">''</span><span style=\"color: rgba(0, 0, 0, 1);\">    (L1693, T283, R1693, B283)\n   </span>|    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Input.InputSite.WindowClass2</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题 - NotepadWindows.UI.Input.InputSite.WindowClass2</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    | child_window(class_name=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Input.InputSite.WindowClass</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>| \n   | Windows.UI.Input.InputSite.WindowClass - <span style=\"color: rgba(128, 0, 0, 1);\">''</span><span style=\"color: rgba(0, 0, 0, 1);\">    (L1693, T283, R1693, B283)\n   </span>| [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Input.InputSite.WindowClass2</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题 - NotepadWindows.UI.Input.InputSite.WindowClass2</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>| child_window(class_name=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Input.InputSite.WindowClass</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>| \n   | NotepadTextBox - <span style=\"color: rgba(128, 0, 0, 1);\">''</span><span style=\"color: rgba(0, 0, 0, 1);\">    (L1019, T283, R1714, B636)\n   </span>| [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题 - NotepadNotepadTextBox</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">NotepadTextBox</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>| child_window(class_name=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">NotepadTextBox</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    | \n   |    | Edit - <span style=\"color: rgba(128, 0, 0, 1);\">''</span><span style=\"color: rgba(0, 0, 0, 1);\">    (L1019, T283, R1714, B636)\n   </span>|    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Edit</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题 - NotepadEdit</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    | child_window(class_name=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">RichEditD2DPT</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>| \n   | Edit - <span style=\"color: rgba(128, 0, 0, 1);\">''</span><span style=\"color: rgba(0, 0, 0, 1);\">    (L1019, T283, R1714, B636)\n   </span>| [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Edit</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题 - NotepadEdit</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>| child_window(class_name=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">RichEditD2DPT</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>| \n   | Windows.UI.Core.CoreWindow - <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">DesktopWindowXamlSource</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">    (L1019, T190, R1020, B191)\n   </span>| [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">DesktopWindowXamlSourceWindows.UI.Core.CoreWindow</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Core.CoreWindow</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">DesktopWindowXamlSource3</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>| child_window(title=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">DesktopWindowXamlSource</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, class_name=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Core.CoreWindow</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>| \n   | Windows.UI.Composition.DesktopWindowContentBridge - <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">DesktopWindowXamlSource</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">    (L1069, T202, R1428, B242)\n   </span>| [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Composition.DesktopWindowContentBridge3</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">DesktopWindowXamlSourceWindows.UI.Composition.DesktopWindowContentBridge3</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">DesktopWindowXamlSource4</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>| child_window(title=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">DesktopWindowXamlSource</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, class_name=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Composition.DesktopWindowContentBridge</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    | \n   |    | Windows.UI.Input.InputSite.WindowClass - <span style=\"color: rgba(128, 0, 0, 1);\">''</span><span style=\"color: rgba(0, 0, 0, 1);\">    (L1069, T202, R1069, B202)\n   </span>|    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Input.InputSite.WindowClass3</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题 - NotepadWindows.UI.Input.InputSite.WindowClass3</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    | child_window(class_name=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Input.InputSite.WindowClass</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>| \n   | Windows.UI.Input.InputSite.WindowClass - <span style=\"color: rgba(128, 0, 0, 1);\">''</span><span style=\"color: rgba(0, 0, 0, 1);\">    (L1069, T202, R1069, B202)\n   </span>| [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Input.InputSite.WindowClass3</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题 - NotepadWindows.UI.Input.InputSite.WindowClass3</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>| child_window(class_name=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Input.InputSite.WindowClass</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>| \n   | Windows.UI.Composition.DesktopWindowContentBridge - <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">DesktopWindowXamlSource</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">    (L1019, T242, R1714, B283)\n   </span>| [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Composition.DesktopWindowContentBridge4</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">DesktopWindowXamlSourceWindows.UI.Composition.DesktopWindowContentBridge4</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">DesktopWindowXamlSource5</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>| child_window(title=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">DesktopWindowXamlSource</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, class_name=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Composition.DesktopWindowContentBridge</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    | \n   |    | Windows.UI.Input.InputSite.WindowClass - <span style=\"color: rgba(128, 0, 0, 1);\">''</span><span style=\"color: rgba(0, 0, 0, 1);\">    (L1019, T242, R1019, B242)\n   </span>|    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Input.InputSite.WindowClass4</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题 - NotepadWindows.UI.Input.InputSite.WindowClass4</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    | child_window(class_name=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Input.InputSite.WindowClass</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>| \n   | Windows.UI.Input.InputSite.WindowClass - <span style=\"color: rgba(128, 0, 0, 1);\">''</span><span style=\"color: rgba(0, 0, 0, 1);\">    (L1019, T242, R1019, B242)\n   </span>| [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Input.InputSite.WindowClass4</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题 - NotepadWindows.UI.Input.InputSite.WindowClass4</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>| child_window(class_name=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Input.InputSite.WindowClass</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>| \n   | Windows.UI.Composition.DesktopWindowContentBridge - <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">DesktopWindowXamlSource</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">    (L1019, T636, R1714, B676)\n   </span>| [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Composition.DesktopWindowContentBridge5</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">DesktopWindowXamlSourceWindows.UI.Composition.DesktopWindowContentBridge5</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">DesktopWindowXamlSource6</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>| child_window(title=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">DesktopWindowXamlSource</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, class_name=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Composition.DesktopWindowContentBridge</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>|    | \n   |    | Windows.UI.Input.InputSite.WindowClass - <span style=\"color: rgba(128, 0, 0, 1);\">''</span><span style=\"color: rgba(0, 0, 0, 1);\">    (L1019, T636, R1019, B636)\n   </span>|    | [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Input.InputSite.WindowClass5</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题 - NotepadWindows.UI.Input.InputSite.WindowClass5</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>|    | child_window(class_name=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Input.InputSite.WindowClass</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n   </span>| \n   | Windows.UI.Input.InputSite.WindowClass - <span style=\"color: rgba(128, 0, 0, 1);\">''</span><span style=\"color: rgba(0, 0, 0, 1);\">    (L1019, T636, R1019, B636)\n   </span>| [<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Input.InputSite.WindowClass5</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题 - NotepadWindows.UI.Input.InputSite.WindowClass5</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n   </span>| child_window(class_name=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Windows.UI.Input.InputSite.WindowClass</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n\nProcess finished with exit code </span><span style=\"color: rgba(128, 0, 128, 1);\">0</span></pre>\n</div>\n<h3>5.记事本编辑区域输入内容</h3>\n<p>上边已经大致解决了代码和工具查看窗口控件结构树不一致的情况，接下来要趁热打铁看看能不能输入内容。</p>\n<h4>5.1测试场景</h4>\n<p>测试场景：大致的测试场景就是，启动电脑的记事本这款软件，然后操作记事本编辑区域的窗口控件，输入内容：北京宏哥，</p>\n<h4>5.2代码设计</h4>\n<p><img alt=\"\" src=\"https://img2024.cnblogs.com/blog/1232840/202504/1232840-20250417100127426-1291218977.png\" /></p>\n<h4>5.3参考代码</h4>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> -*- coding:utf-8 -*-</span>\n\n<span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> 1.先设置编码，utf-8可支持中英文，如上，一般放在第一行</span>\n\n<span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> 2.注释：包括记录创建时间，创建人，项目名称。</span>\n<span style=\"color: rgba(128, 0, 0, 1);\">'''</span><span style=\"color: rgba(128, 0, 0, 1);\">\nCreated on 2025-04-18\n@author: 北京-宏哥\n北京宏哥（微信搜索：北京宏哥，关注宏哥，提前解锁更多测试干货！）\nProject: PC端自动化测试实战教程-8-pywinauto操作应用程序窗口的控件（详细教程）\n</span><span style=\"color: rgba(128, 0, 0, 1);\">'''</span>\n\n<span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> 3.导入模块</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">from</span> pywinauto <span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> Application\n</span><span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> time\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> 通过窗口打开</span>\napp = Application(<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">win32</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>).start(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">notepad.exe</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\ntime.sleep(</span>10<span style=\"color: rgba(0, 0, 0, 1);\">)\napp </span>= Application(<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">win32</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>).connect(class_name=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Notepad</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>,visible_only=<span style=\"color: rgba(0, 0, 0, 1);\">False)\nwin </span>= app[<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">无标题 - Notepad</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(0, 0, 0, 1);\">]\n</span><span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> win.print_ctrl_ids()</span><span style=\"color: rgba(0, 128, 0, 1);\">\n#</span><span style=\"color: rgba(0, 128, 0, 1);\"> 输入内容</span>\nwin.child_window(class_name=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">RichEditD2DPT</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>).type_keys(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">北京-宏哥</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>)</pre>\n</div>\n<h4>5.4运行代码</h4>\n<p>1.运行代码，右键Run'Test'，就可以看到控制台输出，如下图所示：</p>\n<p><img alt=\"\" src=\"https://img2024.cnblogs.com/blog/1232840/202504/1232840-20250417100042450-1964143364.png\" /></p>\n<p>2.运行代码后电脑端的动作（成功启动记事本，然后操作记事本的编辑区域窗口控件，最后在记事本的编辑区域输入内容：北京-宏哥）。如下图所示：</p>\n<p><img alt=\"\" src=\"https://img2024.cnblogs.com/blog/1232840/202504/1232840-20250417095952745-53916798.gif\" /></p>\n<h4>5.5其他方法</h4>\n<p>宏哥都试过了，可以成功输入内容。</p>\n<p>中括号定位控件输入内容的其他方法如下：</p>\n<div class=\"cnblogs_code\">\n<pre>win[<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Edit</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>].type_keys(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">北京-宏哥</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\nwin[</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Edit</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>].set_text(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">北京-宏哥</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>)</pre>\n</div>\n<p>点窗口定位控件输入内容的其他方法如下：</p>\n<div class=\"cnblogs_code\">\n<pre>win.Edit.type_keys(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">北京-宏哥</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\nwin.Edit.set_text(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">北京-宏哥</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>)</pre>\n</div>\n<h3>6.小结</h3>\n<p>以下是pywinauto操作应用程序窗口控件的核心方法总结：</p>\n<h4>6.1控件定位方法</h4>\n<h5>6.1.1基础定位‌</h5>\n<p>通过窗口标题或类名获取窗口对象：</p>\n<div class=\"cnblogs_code\">\n<pre>win = app.window(title=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">窗口标题</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, class_name=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">窗口类名</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>) <span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> ‌:ml-citation{ref=\"2,5\" data=\"citationList\"}</span></pre>\n</div>\n<p>使用child_window()定位子控件，支持参数包括title、auto_id、control_type等：</p>\n<div class=\"cnblogs_code\">\n<pre>edit_box = win.child_window(title=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">文本编辑器</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, control_type=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Edit</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>) <span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> ‌:ml-citation{ref=\"3,6\" data=\"citationList\"}</span></pre>\n</div>\n<h5>6.1.2层级遍历‌</h5>\n<p>通过print_control_identifiers()或print_ctrl_ids()打印窗口层级结构，快速查看控件属性及层级关系 ‌。<br />结合descendants()或children()方法遍历子控件：</p>\n<div class=\"cnblogs_code\">\n<pre>all_buttons = win.descendants(control_type=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Button</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>) <span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> ‌:ml-citation{ref=\"6,8\" data=\"citationList\"}</span></pre>\n</div>\n<h4>6.2常用控件操作</h4>\n<p>控件类型 操作方法示例 说明</p>\n<p>按钮‌ button.click_input() 模拟鼠标点击&nbsp;‌</p>\n<p>编辑框‌ edit.set_text(\"内容\") 输入文本&nbsp;‌</p>\n<p>复选框‌ checkbox.check() 或 checkbox.uncheck() 勾选/取消勾选&nbsp;‌</p>\n<p>下拉框‌ combo.select(\"选项名\") 选择指定选项&nbsp;‌</p>\n<p>列表项‌ list_view.select(\"项名\") 选中指定项&nbsp;</p>\n<p>菜单‌ menu.item(\"文件\").click() 点击级联菜单项&nbsp;‌</p>\n<h4>6.3复杂控件处理</h4>\n<h5>6.3.1动态控件‌</h5>\n<p>使用wait()方法等待控件出现，避免操作超时：</p>\n<div class=\"cnblogs_code\">\n<pre>popup = win.child_window(title=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">提示</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>).wait(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">visible</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, timeout=10) <span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> ‌:ml-citation{ref=\"3,6\" data=\"citationList\"}</span></pre>\n</div>\n<h5>6.3.2嵌套控件‌</h5>\n<p>通过多级child_window()逐层定位：</p>\n<div class=\"cnblogs_code\">\n<pre>sub_control = win.child_window(title=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">父控件</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>).child_window(auto_id=<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">子控件ID</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>) <span style=\"color: rgba(0, 128, 0, 1);\">#</span><span style=\"color: rgba(0, 128, 0, 1);\"> ‌:ml-citation{ref=\"3,6\" data=\"citationList\"}</span></pre>\n</div>\n<h4>6.4工具辅助</h4>\n<p>Inspect工具‌：查看窗口控件的title、class_name、control_type等属性，辅助编写定位逻辑 ‌。</p>\n<p>Spy++‌：获取窗口句柄及层级结构，验证控件属性 ‌。</p>\n<h4>6.5注意事项</h4>\n<p>优先使用control_type和auto_id定位控件，避免因标题动态变化导致脚本失效 ‌。</p>\n<p>对现代应用（如WPF/UWP）使用backend=\"uia\"，传统Win32应用可选用backend=\"win32\" ‌。</p>\n<p>结合send_keys()模拟键盘操作（如快捷键Ctrl+S），增强脚本兼容性 ‌。</p>\n<p>通过以上方法可覆盖大多数Windows应用程序的控件自动化操作场景。</p>\n<p>&nbsp;好了，时间不早了今天就分享到这里，感谢你耐心地阅读！</p>\n</div>\n<div id=\"MySignature\">\n    <div id=\"MySignature\" style=\"display: block;\">\n\t<div style=\"font-size: 13px; border: 1px dashed rgb(45, 161, 45); padding: 10px 15px; background-color: rgb(248, 248, 248);\">\n\t\t<label style=\"font-weight: bold;\">\n\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;为了方便大家在移动端也能看到我分享的博文，现已注册个人微信公众号，扫描左下方二维码即可，欢迎大家关注，提前解锁更多测试干货！有时间会及时分享相关技术博文。\n\t\t</label>\n\t\t<br />\n\t\t<label style=\"font-weight: bold;\">\n\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;为了方便大家互动讨论相关技术问题，刚刚建立了咱们的专门的微信群交流互动群，群内会分享交流测试领域前沿知识。  请您扫描中间的微信二维码进群 \n\t\t</label>\n\t\t<br />\n\t\t<label style=\"font-weight: bold;\">\n\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;为了方便大家互动讨论相关技术问题，现已组建专门的微信群，由于微信群满100，请您扫描右下方宏哥个人微信二维码拉你进群\n\t\t\t<label style=\"font-weight: bold; color: red; font-size: 15px;\">\n\t\t\t\t（请务必备注：已关注公众号进群）平时上班忙（和你一样），所以加好友不及时，请稍安勿躁~\n\t\t\t</label>\n\t\t\t，欢迎大家加入这个大家庭，我们一起畅游知识的海洋。\n\t\t</label>\n\t\t<br />\n\t\t&nbsp;&nbsp;&nbsp;&nbsp;感谢您花时间阅读此篇文章,如果您觉得这篇文章你学到了东西也是为了犒劳下博主的码字不易不妨打赏一下吧，让博主能喝上一杯咖啡，在此谢过了！\n\t\t<br />\n\t\t&nbsp;&nbsp;&nbsp;&nbsp;如果您觉得阅读本文对您有帮助，请点一下左下角\n\t\t<a id=\"recommend\" style=\"font-weight: bold; color: red; font-size: 15px; text-decoration: underline;\">\n\t\t\t“推荐”\n\t\t</a>\n\t\t按钮，您的\n\t\t<label style=\"font-weight: bold; color: red; font-size: 15px;\">\n\t\t\t“推荐”\n\t\t</label>\n\t\t将是我最大的写作动力！另外您也可以选择\n\t\t<a id=\"follow_me_btn\" style=\"cursor: pointer; color: blue; text-decoration: underline;\">\n\t\t\t【\n\t\t\t<strong>\n\t\t\t\t关注我\n\t\t\t</strong>\n\t\t\t】\n\t\t</a>\n\t\t，可以很方便找到我！\n\t\t<br />\n\t\t&nbsp;&nbsp;&nbsp;&nbsp;本文版权归作者和博客园共有，来源网址：\n\t\t<a href=\"https://www.cnblogs.com/du-hong\" style=\"color: red; text-decoration: underline;\" target=\"_blank\">\n\t\t\thttps://www.cnblogs.com/du-hong\n\t\t</a>\n\t\t欢迎各位转载，但是未经作者本人同意，转载文章之后必须在文章页面明显位置给出作者和原文连接，否则保留追究法律责任的权利！\n\t</div>\n\t<div style=\"text-align: center; margin-top: 10px;\">\n\t\t<p style=\"font-weight: bolder; color: red;\">\n\t\t\t公众号(关注宏哥)&nbsp; &nbsp;&nbsp;&nbsp;\n\t\t\t&nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;\n\t\t\t&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;\n\t\t\t&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;\n\t\t\t微信群(扫码进群) &nbsp;&nbsp;&nbsp;\n\t\t\t&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;\n\t\t\t&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;\n\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;\n\t\t\t&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;\n\t\t\t&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;客服微信\n\t\t</p>\n\t\t<img alt=\"个人微信公众号\" src=\"https://img2018.cnblogs.com/common/1741949/201911/1741949-20191119095948011-608816619.png\" style=\"width: 200px; padding-right: 50px;\" />\n\t\t<img alt=\"微信群\" src=\"https://img2024.cnblogs.com/blog/1232840/202506/1232840-20250610113707419-637869921.png\" style=\"width: 200px; padding-right: 65px;\" />\n\t\t<img alt=\"个人微信\" src=\"https://img2018.cnblogs.com/common/1741949/201911/1741949-20191106101257091-849954564.png\" style=\"width: 200px;\" />\n\t</div>\n</div>\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-06 16:45</span>&nbsp;\n<a href=\"https://www.cnblogs.com/du-hong\">北京-宏哥</a>&nbsp;\n阅读(<span id=\"post_view_count\">124</span>)&nbsp;\n评论(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">收藏</a>&nbsp;\n<a href=\"\">举报</a>\n</div>"
    }
  ]
}