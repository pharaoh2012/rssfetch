{
  "title": "主页 - 博客园",
  "link": "https://www.cnblogs.com/",
  "description": "主页 - 博客园 RSS",
  "entries": [
    {
      "title": "吴恩达深度学习课程五：自然语言处理  第二周：词嵌入（二）词嵌入模型原理",
      "link": "https://www.cnblogs.com/Goblinscholar/p/19503620",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/Goblinscholar/p/19503620\" id=\"cb_post_title_url\" title=\"发布于 2026-01-19 20:34\">\n    <span>吴恩达深度学习课程五：自然语言处理  第二周：词嵌入（二）词嵌入模型原理</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<p>此分类用于记录吴恩达深度学习课程的学习笔记。<br />\n课程相关信息链接如下：</p>\n<ol>\n<li>原课程视频链接：<a href=\"https://www.bilibili.com/video/BV1FT4y1E74V?buvid=XU762317353676D786954061C192FE625463B&amp;from_spmid=playlist.playlist-detail.0.0&amp;is_story_h5=false&amp;mid=zqernykrmpf7XfIorMR%2FnA%3D%3D&amp;plat_id=116&amp;share_from=ugc&amp;share_medium=android&amp;share_plat=android&amp;share_session_id=ce0bc526-db69-428a-962e-c65ed8c267bc&amp;share_source=COPY&amp;share_tag=s_i&amp;spmid=united.player-video-detail.0.0&amp;timestamp=1713085655&amp;unique_k=DfBgvFW&amp;up_id=8654113&amp;vd_source=e035e9878d32f414b4354b839a4c31a4\" rel=\"noopener nofollow\" target=\"_blank\">[双语字幕]吴恩达深度学习deeplearning.ai</a></li>\n<li>github课程资料，含课件与笔记:<a href=\"https://github.com/robbertliu/deeplearning.ai-andrewNG\" rel=\"noopener nofollow\" target=\"_blank\">吴恩达深度学习教学资料</a></li>\n<li>课程配套练习（中英）与答案：<a href=\"https://blog.csdn.net/u013733326/article/details/79827273\" rel=\"noopener nofollow\" target=\"_blank\">吴恩达深度学习课后习题与答案</a></li>\n</ol>\n<p>本篇为第五课的第二周内容，<a href=\"https://www.bilibili.com/video/BV1FT4y1E74V?spm_id_from=333.788.videopod.episodes&amp;vd_source=e035e9878d32f414b4354b839a4c31a4&amp;p=166\" rel=\"noopener nofollow\" target=\"_blank\">2.4</a>到<a href=\"https://www.bilibili.com/video/BV1FT4y1E74V?spm_id_from=333.788.videopod.episodes&amp;vd_source=e035e9878d32f414b4354b839a4c31a4&amp;p=167\" rel=\"noopener nofollow\" target=\"_blank\">2.5</a>的内容以及一些相关知识的补充。</p>\n<hr />\n<p>本周为第五课的第二周内容，与 CV 相对应的，这一课所有内容的中心只有一个：<strong>自然语言处理（Natural Language Processing，NLP）</strong>。<br />\n应用在深度学习里，它是专门用来进行<strong>文本与序列信息建模</strong>的模型和技术，本质上是在全连接网络与统计语言模型基础上的一次“结构化特化”，也是人工智能中<strong>最贴近人类思维表达方式</strong>的重要研究方向之一。<br />\n<strong>这一整节课同样涉及大量需要反复消化的内容，横跨机器学习、概率统计、线性代数以及语言学直觉。</strong><br />\n语言不像图像那样“直观可见”，更多是抽象符号与上下文关系的组合，因此<strong>理解门槛反而更高</strong>。<br />\n因此，我同样会尽量补足必要的背景知识，尽可能用比喻和实例降低理解难度。<br />\n本周的内容关于词嵌入，是一种<strong>相对于独热编码，更能保留语义信息的文本编码方式</strong>。通过词嵌入，模型不再只是“记住”词本身，而是能够<strong>基于语义关系进行泛化</strong>，在一定程度上实现类似“<strong>举一反三</strong>”的效果。词嵌入是 NLP 领域中最重要的基础技术之一。</p>\n<p>本篇的内容关于<strong>词嵌入模型原理</strong>，是了解基础内容后的下一步引入。</p>\n<h1 id=\"1-词嵌入矩阵\">1. 词嵌入矩阵</h1>\n<p>在<a href=\"https://www.cnblogs.com/Goblinscholar/p/19494158\" target=\"_blank\">上一篇</a>中，我们知道通过词嵌入可以实现词汇的特征化表示，这种序列信息编码方式相比独热编码不仅节约了存储和时间成本，而且可以量化词汇的语义来提升模型性能。<br />\n那么要如何训练一个可以输出对词汇合适编码的词嵌入模型呢？<br />\n实际上，词嵌入模型的原理和我们之前介绍过的<a href=\"https://www.cnblogs.com/Goblinscholar/p/19423276\" target=\"_blank\">图像风格转换</a>有些类似，就像其首先要随机初始化目标图像一样，词嵌入模型的第一步，并不是“理解语义”，而是<strong>先给每个词一个可以被学习的数值载体</strong>。<br />\n具体来说是这样的：<br />\n<img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260119203403821-212247932.png\" /></p>\n<p>如图所示，假设我们的词表大小为 <span class=\"math inline\">\\(|V|\\)</span>，词向量维度设为 <span class=\"math inline\">\\(d\\)</span>，那么词嵌入本质上就是一个矩阵，每一行对应词表中的一个词，我们称之为<strong>词嵌入矩阵</strong>。</p>\n<p></p><div class=\"math display\">\\[\\mathbf{E}\n=\n\\begin{bmatrix}\nv_{1,1} &amp; v_{1,2} &amp; v_{1,3} &amp; \\cdots &amp; v_{1,d} \\\\\nv_{2,1} &amp; v_{2,2} &amp; v_{2,3} &amp; \\cdots &amp; v_{2,d} \\\\\nv_{3,1} &amp; v_{3,2} &amp; v_{3,3} &amp; \\cdots &amp; v_{3,d} \\\\\n\\vdots  &amp; \\vdots  &amp; \\vdots  &amp; \\ddots &amp; \\vdots  \\\\\nv_{|V|,1} &amp; v_{|V|,2} &amp; v_{|V|,3} &amp; \\cdots &amp; v_{|V|,d}\n\\end{bmatrix}\n\\]</div><p></p><p>这里需要强调的是，在课程中，吴恩达老师常在词嵌入矩阵中使用列向量来表示词向量，以匹配矩阵乘法的约定。但在实际工程代码中，通常视作行向量（矩阵行对应词向量）。<strong>这只是约定问题</strong>，取决于实现方式：教学中列向量便于公式推导，代码中行向量更高效。了解后，根据场景选择即可。<br />\n回到正题，在模型初始化阶段，词嵌入矩阵<strong>并不包含任何语义信息</strong>，通常采用随机初始化，或者服从均值为 0 的正态分布。<br />\n我们之前就说过，词向量并不是我们手工设定的，而是在模型学习得到的，在我们完成词嵌入矩阵的初始化后，<strong>词嵌入模型的目的就是不断传播和优化词嵌入矩阵，得到对语义编码合理的词向量</strong>，从而进行下一步应用。</p>\n<p>到这里就会发现，学习词嵌入矩阵的过程和图像风格转换的过程非常相似：一开始是随机噪声，但在损失函数的约束下，逐步学习得到结构化、有意义的结果。</p>\n<p>在完成词嵌入矩阵的初始化后，<strong>模型训练的核心任务就是设计合理的上下文预测目标，让矩阵中每一行（词向量）逐步调整位置，从而携带语义信息。</strong></p>\n<h1 id=\"2-早期词嵌入模型\">2. 早期词嵌入模型</h1>\n<p>在 2003 年，一篇论文 <a href=\"https://www.jmlr.org/papers/volume3/bengio03a/bengio03a.pdf\" rel=\"noopener nofollow\" target=\"_blank\">A Neural Probabilistic Language Model</a>，首次展示了一个神经网络语言模型，它不仅预测下一个词的概率分布，还通过一个嵌入层将词索引映射为实值向量。这些向量成为了词的稠密表示，也就是我们今天所说的<strong>词嵌入（word embeddings）</strong>。<br />\n尽管当时论文中并没有直接使用“word embedding”这个术语，但其核心思想：<strong>通过神经网络学习词的分布式向量表示</strong>——正是现代词嵌入模型的理论源头。</p>\n<h2 id=\"21-词嵌入模型原理\">2.1 词嵌入模型原理</h2>\n<p>这一部分我们展开一下，用早期的模型介绍一下最经典的一类词嵌入模型：<strong>预测型词嵌入模型</strong>的基本逻辑：<br />\n<img alt=\"image.png\" src=\"https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260119202257923-2120601282.png\" /><br />\n图中简要描述了该模型的传播逻辑，补充一些细节如下：</p>\n<ol>\n<li><strong>嵌入层（Embedding Layer）</strong>：在图中的左半部分，完成的是<strong>存储词嵌入矩阵和根据索引查找机制提取词向量</strong>的工作，我们称完成这部分内容的结构为<strong>嵌入层</strong>。</li>\n<li><strong>窗口大小 <span class=\"math inline\">\\(t\\)</span></strong>：这是一个超参数，当预测序列中第 <span class=\"math inline\">\\(n\\)</span> 个词汇时，我们使用其之前 <span class=\"math inline\">\\(t\\)</span> 个词汇作为序列信息，<strong>前文如果不足 <span class=\"math inline\">\\(t\\)</span> 个，则会使用特殊符号填充。</strong></li>\n<li><strong>联合更新</strong>：在反向传播过程中，<strong>嵌入层和网络的其他参数同时更新</strong>。这意味着每次看到训练样本，嵌入矩阵中涉及的<strong>词向量会和网络参数一起沿梯度方向调整</strong>，使其更有利于下一个词的预测。</li>\n</ol>\n<p>那词向量具体是怎么更新来学习语义的呢？我们展开说说：</p>\n<h2 id=\"22-词向量的语义学习\">2.2 词向量的语义学习</h2>\n<p>举个例子来理解一下词向量的更新逻辑：<br />\n假设训练语料中出现了许多关于水果的句子，比如：</p>\n<pre><code>I like to eat apple.\nShe bought a banana yesterday.\nOrange juice is tasty.\n</code></pre>\n<p>现在，模型的任务是<strong>根据上下文预测下一个词</strong>。当看到句子 <code>\"I like to eat apple\"</code> 时，模型会预测下一个词可能是 <code>\"apple\"</code>。<br />\n这时，反向传播时，模型会调整 <strong>“apple”对应的词向量</strong>以及上下文中其他词的向量，使得网络更容易正确预测 <code>\"apple\"</code>。</p>\n<p>同理，当训练样本中出现 <code>\"banana\"</code> 或 <code>\"orange\"</code> 时，这些词的向量也会因为相似的上下文而被调整到<strong>相互靠近的位置</strong>：<code>\"apple\"</code>, <code>\"banana\"</code>, <code>\"orange\"</code> <strong>这些同类型的词常出现在类似的上下文</strong>（如 eat、juice、like 等）<br />\n最终模型通过梯度更新，让这些词向量在向量空间中<strong>彼此靠近</strong>，从而自然捕捉到语义相似性。</p>\n<p>这样的效果就是：即使模型从未显式告知“它们都是水果”，词向量也会因为上下文模式相似而自动聚集在一起，形成<strong>语义簇（semantic cluster）</strong>，即向量空间中，语义相近的词自然聚在一起的群体。<br />\n这时，面对下面这两句话：</p>\n<pre><code>训练：I like orange juice.\n测试：I love apple _____. \n</code></pre>\n<p>模型即使<strong>没见过测试语句，也可以通过<code>\"love 和 like\"</code>、<code>\"apple 和 orange\"</code> 在向量空间的距离相近得到更可靠的答案，从而提高模型性能。</strong></p>\n<p>用一句话总结一下：<strong>同类型的词汇往往出现在相似的上下文中，因此在更新后更加相似，最终在向量空间中形成语义簇，极大增强了模型的泛化能力。</strong></p>\n<p>你会发现，<strong>在词嵌入模型中，词向量的语义结构并不是显式教给模型的，而是在上下文预测任务中自然而然学到的，模型并没有专门去“训练合适编码”，而是在预测中让相似的词不断靠近。</strong><br />\n同样是对数据进行编码，词嵌入和我们之前介绍的<a href=\"https://www.cnblogs.com/Goblinscholar/p/19418306\" target=\"_blank\">人脸识别</a>又有所不同。</p>\n<p>当然，既然是早期模型，自然有值得优化的地方，我们继续：</p>\n<h2 id=\"23-早期词嵌入模型的局限\">2.3 早期词嵌入模型的局限</h2>\n<p>尽管 A Neural Probabilistic Language Model 成功提出了通过神经网络学习词向量的思路，但作为早期模型，它在实际应用和理论上存在一些明显的局限性：</p>\n<table>\n<thead>\n<tr>\n<th>局限类别</th>\n<th>具体说明</th>\n<th>影响</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>计算开销大</strong></td>\n<td>输入是 <span class=\"math inline\">\\(t\\)</span> 个词独热向量拼接，输出是词表大小 <span class=\"math inline\">\\(V\\)</span> 的 softmax</td>\n<td>词表大时计算量高，训练预测速度慢</td>\n</tr>\n<tr>\n<td><strong>上下文窗口固定</strong></td>\n<td>每次预测只使用前 <span class=\"math inline\">\\(t\\)</span> 个词</td>\n<td>无法捕捉长距离依赖，语义建模受限</td>\n</tr>\n<tr>\n<td><strong>梯度更新效率低</strong></td>\n<td>嵌入矩阵和网络参数同时更新，每个样本只涉及部分词向量</td>\n<td>收敛慢，低频词向量质量不稳定</td>\n</tr>\n<tr>\n<td><strong>没有显式建模语义规律</strong></td>\n<td>语义相似性完全依赖上下文共现</td>\n<td>稀有词或低频词向量质量差，泛化能力有限，无法处理多义词</td>\n</tr>\n</tbody>\n</table>\n<p>因此，为了解决这些问题，自然有人发明新的技术和模型，我们在之后几篇就来详细介绍这些内容。</p>\n<h1 id=\"3-总结\">3. 总结</h1>\n<table>\n<thead>\n<tr>\n<th>概念</th>\n<th>原理</th>\n<th>比喻</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>词嵌入矩阵（Embedding Matrix）</strong></td>\n<td>将词表中每个词映射为可学习的稠密向量，矩阵行（或列）对应词向量。初始化随机或正态分布，通过梯度更新学习语义信息。</td>\n<td>类似图像风格转换中的“随机噪声图像”，逐步在训练中形成结构化图像。</td>\n</tr>\n<tr>\n<td><strong>嵌入层（Embedding Layer）</strong></td>\n<td>存储词嵌入矩阵并提供索引查找功能，将词索引映射为词向量。</td>\n<td>就像一本“词向量字典”，根据索引直接查到对应的向量。</td>\n</tr>\n<tr>\n<td><strong>上下文预测训练</strong></td>\n<td>利用前 <span class=\"math inline\">\\(t\\)</span> 个词预测下一个词，通过反向传播更新嵌入矩阵和网络参数，使语义相似的词向量靠近。</td>\n<td>好比让水果类词（apple, banana, orange）在向量空间里自然聚成一簇，通过相似上下文学习它们的关系。</td>\n</tr>\n<tr>\n<td><strong>语义簇（Semantic Cluster）</strong></td>\n<td>在向量空间中，语义相近的词自然聚集，捕捉词汇之间的语义关系。</td>\n<td>词向量像朋友一样，常在同一圈子（上下文）出现就靠近在一起。</td>\n</tr>\n<tr>\n<td><strong>早期词嵌入模型局限</strong></td>\n<td>计算开销大（softmax over 大词表）上下文窗口固定、 梯度更新效率低 、无显式语义建模（如多义词）。</td>\n<td>模型像老式拼字游戏，效率低且只能看到局部信息，难以捕捉远距离或复杂规律。</td>\n</tr>\n</tbody>\n</table>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-19 20:34</span>&nbsp;\n<a href=\"https://www.cnblogs.com/Goblinscholar\">哥布林学者</a>&nbsp;\n阅读(<span id=\"post_view_count\">0</span>)&nbsp;\n评论(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">收藏</a>&nbsp;\n<a href=\"\">举报</a>\n</div>"
    },
    {
      "title": "使用 AI 编程工具的一点实践体会：为什么要减少对话轮次、一次把需求说清楚",
      "link": "https://www.cnblogs.com/YpEng-Codeme/p/19503631",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/YpEng-Codeme/p/19503631\" id=\"cb_post_title_url\" title=\"发布于 2026-01-19 20:25\">\n    <span>使用 AI 编程工具的一点实践体会：为什么要减少对话轮次、一次把需求说清楚</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                    <div id=\"cnblogs_post_description\" style=\"display: none;\">\n        \n        在使用 Cursor、ChatGPT 等 AI 编程工具的过程中，我逐渐意识到：\n相比多轮对话不断修补需求，用更少的对话轮次一次性描述清楚核心需求，\n反而更容易得到符合预期的实现。\n本文结合实际使用经验，分析了对话轮次过多导致结果偏离的原因，\n以及在什么情况下应当重新编辑问题而不是继续对话修补。\n    </div>\n<div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h1 id=\"使用-ai-编程工具的一点实践体会为什么要减少对话轮次一次把需求说清楚\">使用 AI 编程工具的一点实践体会：为什么要减少对话轮次、一次把需求说清楚</h1>\n<h2 id=\"一背景\">一、背景</h2>\n<p>随着 Cursor、Copilot、ChatGPT 等 AI 编程工具在日常开发中的普及，<br />\n越来越多的开发者开始尝试用 AI 来完成：</p>\n<ul>\n<li>单个功能模块</li>\n<li>小型系统原型</li>\n<li>重复性或模板化代码</li>\n</ul>\n<p>我自己在实际使用这些工具的过程中，也逐渐形成了一些使用习惯。<br />\n其中<strong>最重要的一点体会是：</strong></p>\n<blockquote>\n<p><strong>在让 AI 写代码时，应尽量减少对话轮次，用尽可能清晰、完整的描述一次性说明核心需求。</strong></p>\n</blockquote>\n<p>这篇文章主要记录我在实践中总结出的原因、经验以及适用边界。</p>\n<hr />\n<h2 id=\"二常见的错误使用方式\">二、常见的错误使用方式</h2>\n<p>在刚开始使用 AI 编程工具时，我（以及身边不少同事）都会下意识采用类似下面的方式：</p>\n<ol>\n<li>先描述一个比较模糊的需求</li>\n<li>看 AI 生成的代码</li>\n<li>发现不符合预期</li>\n<li>继续在当前对话中补充或修改需求</li>\n<li>重复上述过程</li>\n</ol>\n<p>这种方式在<strong>简单问题</strong>上通常没什么问题，<br />\n但在以下场景中，很容易出现偏差：</p>\n<ul>\n<li>模块之间存在关联</li>\n<li>功能有前后依赖关系</li>\n<li>有较多隐含约束（性能、扩展性、结构等）</li>\n</ul>\n<p>最终结果往往是：</p>\n<blockquote>\n<p><strong>代码越来越“补丁化”，整体实现逐渐偏离最初的目标。</strong></p>\n</blockquote>\n<hr />\n<h2 id=\"三为什么对话轮次越多结果越容易偏离\">三、为什么对话轮次越多，结果越容易偏离？</h2>\n<h3 id=\"31-模型理解是上下文驱动的\">3.1 模型理解是“上下文驱动”的</h3>\n<p>AI 模型并不是像人一样“始终记得最初的目标”，而是：</p>\n<ul>\n<li>基于当前上下文进行概率推断</li>\n<li>更倾向于满足<strong>最近一轮对话中的显式要求</strong></li>\n</ul>\n<p>当我们不断追加新指令时：</p>\n<ul>\n<li>新需求可能与旧需求存在隐性冲突</li>\n<li>模型会尝试“局部修补”，而不是整体重构</li>\n</ul>\n<p>久而久之，最初的设计目标就会被逐渐稀释。</p>\n<hr />\n<h3 id=\"32-人在补充需求时往往是局部视角\">3.2 人在补充需求时，往往是“局部视角”</h3>\n<p>在多轮对话中，人通常是在<strong>针对当前不满意的点进行修正</strong>，例如：</p>\n<ul>\n<li>“这里能不能换成异步？”</li>\n<li>“这个字段我不想要了”</li>\n<li>“这个函数再加一个参数”</li>\n</ul>\n<p>但问题在于：</p>\n<ul>\n<li>这些修改<strong>可能影响其它模块</strong></li>\n<li>AI 并不知道你是否接受连带变化</li>\n<li>你自己也未必在当下考虑到了所有影响</li>\n</ul>\n<p>最终就会出现：</p>\n<ul>\n<li>功能能跑</li>\n<li>结构却越来越奇怪</li>\n</ul>\n<hr />\n<h3 id=\"33-模型限制--问题拆解方式的叠加效应\">3.3 模型限制 + 问题拆解方式的叠加效应</h3>\n<p>偏离预期，往往不是单一原因造成的，而是：</p>\n<ul>\n<li>模型在长对话中的抽象能力下降</li>\n<li>人在提问时逐渐变成“修 bug 式提问”</li>\n<li>缺乏一次“全局视角”的重新校准</li>\n</ul>\n<p>这三点叠加在一起，就很容易让结果走偏。</p>\n<hr />\n<h2 id=\"四更推荐的使用方式少轮次--高质量输入\">四、更推荐的使用方式：少轮次 + 高质量输入</h2>\n<h3 id=\"41-一次性描述清楚核心需求\">4.1 一次性描述清楚“核心需求”</h3>\n<p>这里说的“一次性”，并不是要求把所有细节都写死，而是至少要说明清楚：</p>\n<ul>\n<li>这个模块/系统<strong>要解决什么问题</strong></li>\n<li>有哪些核心功能</li>\n<li>功能之间是否有关联</li>\n<li>哪些点是<strong>不能随意改动的约束</strong></li>\n</ul>\n<p>示例思路：</p>\n<pre><code class=\"language-text\">我要实现一个 XXX 系统，主要包含 A / B / C 三个功能。\n其中：\n- A 和 B 之间存在依赖关系\n- C 的实现不能影响 A 的调用方式\n- 性能优先级高于代码简洁性\n</code></pre>\n<hr />\n<h3 id=\"42-接受非核心问题的逐步优化\">4.2 接受“非核心问题”的逐步优化</h3>\n<p>在一次高质量描述后，AI 生成的结果通常会：</p>\n<ul>\n<li>核心结构基本正确</li>\n<li>功能逻辑大体符合预期</li>\n<li>细节上存在一些小问题</li>\n</ul>\n<p>这些小问题通常包括：</p>\n<ul>\n<li>命名不够优雅</li>\n<li>局部代码不够简洁</li>\n<li>样式或美观问题</li>\n</ul>\n<p>👉 <strong>这些问题是适合通过“少量追加对话”来优化的。</strong></p>\n<hr />\n<h2 id=\"五什么时候应该停止对话重新编辑问题\">五、什么时候应该“停止对话，重新编辑问题”？</h2>\n<p>这是一个非常关键的判断点。</p>\n<h3 id=\"51-明确应该重来的一些信号\">5.1 明确应该重来的一些信号</h3>\n<p>如果出现以下情况之一，<strong>强烈建议重新编辑需求，而不是继续对话修补</strong>：</p>\n<ul>\n<li>新需求会影响多个已有功能</li>\n<li>修改一个功能，会连带影响其它模块</li>\n<li>你发现自己在“打补丁”而不是在设计</li>\n<li>你已经很难用一句话说明当前代码结构</li>\n</ul>\n<p>此时继续对话，大概率只会让问题更复杂。</p>\n<hr />\n<h3 id=\"52-正确的做法\">5.2 正确的做法</h3>\n<p>更好的方式是：</p>\n<ol>\n<li>停止当前对话</li>\n<li>回顾当前代码和真实需求</li>\n<li>在<strong>新的对话中重新整理描述</strong></li>\n<li>把之前暴露出的缺陷明确写进去</li>\n</ol>\n<p>例如：</p>\n<pre><code class=\"language-text\">在之前的实现中，我发现 A 和 B 的设计存在耦合问题。\n这次希望：\n- 明确拆分 A / B 的职责\n- 保证后续扩展 C 功能时不需要修改 A\n</code></pre>\n<hr />\n<h2 id=\"六关于一次性描述和灵活调整的平衡\">六、关于“一次性描述”和“灵活调整”的平衡</h2>\n<p>需要强调的是：</p>\n<blockquote>\n<p><strong>减少对话轮次 ≠ 一次性把一切写到极致完美</strong></p>\n</blockquote>\n<p>更合理的平衡是：</p>\n<ul>\n<li>核心设计、关键约束：一次说明清楚</li>\n<li>非核心细节、体验优化：允许少量调整</li>\n<li>结构性缺陷、系统性问题：直接重来</li>\n</ul>\n<p>把 AI 当成一个：</p>\n<blockquote>\n<p><strong>执行能力很强，但不具备全局自省能力的助手</strong></p>\n</blockquote>\n<p>而不是一个会自动“帮你纠偏”的高级工程师。</p>\n<hr />\n<h2 id=\"七总结\">七、总结</h2>\n<p>结合自己的实际使用经验，我目前形成的结论是：</p>\n<ol>\n<li>AI 编程工具非常依赖输入质量</li>\n<li>对话轮次越多，越容易偏离最初目标</li>\n<li>核心问题应一次性描述清楚</li>\n<li>结构性问题不要通过“补丁式对话”修复</li>\n<li>重新编辑问题，往往比继续对话更高效</li>\n</ol>\n<p>后续我也会结合具体案例（包括错误示范和正确示范）进一步补充说明。</p>\n<hr />\n<blockquote>\n<p><strong>这篇文章并不是否定多轮对话的价值，而是希望在合适的场景下，用更合理的方式使用 AI。</strong></p>\n</blockquote>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-19 20:25</span>&nbsp;\n<a href=\"https://www.cnblogs.com/YpEng-Codeme\">YounGp_oo</a>&nbsp;\n阅读(<span id=\"post_view_count\">0</span>)&nbsp;\n评论(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">收藏</a>&nbsp;\n<a href=\"\">举报</a>\n</div>"
    },
    {
      "title": "WebDataset使用指南：构建高效深度学习数据管道",
      "link": "https://www.cnblogs.com/aurora-zzm/p/19503592/webdataset_usage",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/aurora-zzm/p/19503592/webdataset_usage\" id=\"cb_post_title_url\" title=\"发布于 2026-01-19 20:04\">\n    <span>WebDataset使用指南：构建高效深度学习数据管道</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<blockquote>\n<p>在深度学习项目实践中，数据加载往往成为限制训练速度的关键瓶颈。当数据集规模达到数百万甚至数十亿样本时，传统的文件系统随机访问方式会导致I/O效率急剧下降，让昂贵的GPU资源处于闲置等待状态。WebDataset通过<strong>流式处理</strong>和<strong>顺序读取</strong>的设计理念，可以极大提升数据加载性能。</p>\n</blockquote>\n<h2 id=\"什么是webdataset\">什么是WebDataset？</h2>\n<p>WebDataset是一个基于TAR归档格式的深度学习数据加载库，专为处理超大规模数据集而设计。其核心思想是将<strong>大量小文件打包成较大的TAR文件</strong>，通过顺序读取替代随机访问，极大提升I/O效率。</p>\n<p>本质上，<em><strong>wds格式文件就是遵循了额外约定的tar文件，并且一般不压缩，使得可以实现流式读取。</strong></em></p>\n<h3 id=\"与传统方式的对比\">与传统方式的对比</h3>\n<table>\n<thead>\n<tr>\n<th>特性</th>\n<th>传统文件系统</th>\n<th>WebDataset</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>访问模式</strong></td>\n<td>随机访问，高延迟</td>\n<td>顺序读取，高吞吐</td>\n</tr>\n<tr>\n<td><strong>存储效率</strong></td>\n<td>文件系统元数据开销大</td>\n<td>TAR容器减少元数据</td>\n</tr>\n<tr>\n<td><strong>分布式支持</strong></td>\n<td>需要复杂协调机制</td>\n<td>天然支持分片和数据并行</td>\n</tr>\n<tr>\n<td><strong>网络传输</strong></td>\n<td>小文件传输效率低</td>\n<td>大文件流式传输</td>\n</tr>\n<tr>\n<td><strong>使用便捷性</strong></td>\n<td>需要解压和预处理</td>\n<td>直接读取，无需解压</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"webdataset的核心原理\">WebDataset的核心原理</h2>\n<h3 id=\"顺序读取的优势\">顺序读取的优势</h3>\n<p>传统深度学习数据集由数百万个小文件组成，训练时需要随机访问这些文件。机械硬盘的随机读取速度通常只有顺序读取的1/100，即使固态硬盘也存在明显差距。WebDataset通过将相关文件打包成TAR归档，将随机I/O转换为顺序I/O，充分利用现代存储系统的吞吐能力。</p>\n<h3 id=\"分片机制\">分片机制</h3>\n<p>WebDataset将大数据集分割为多个TAR文件（分片），每个分片包含数千个样本。这种设计带来多重好处：</p>\n<ul>\n<li><strong>并行加载</strong>：不同分片可由不同工作进程并行读取</li>\n<li><strong>分布式训练</strong>：每个训练节点可处理不同的分片子集</li>\n<li><strong>容错性</strong>：单个分片损坏不影响整个数据集</li>\n</ul>\n<h3 id=\"样本组织规范\">样本组织规范</h3>\n<p>WebDataset遵循严格的命名约定：<em><strong>同一样本的所有文件共享相同的前缀key，通过扩展名区分数据类型。</strong></em></p>\n<blockquote>\n<p>前缀key：tar文件内部，某个文件的路径的第一个句点之前的部分</p>\n</blockquote>\n<p>文件可以有多个后缀，甚至没有后缀（这样在字典中的键就是空字符）；而且相同前缀key的（同一样本中的）文件数量可以不固定。<br />\n示例TAR文件内容结构：</p>\n<pre><code>images17/image194.left.jpg  \nimages17/image194.right.jpg  \nimages17/image194.json  \nimages17/image12.left.jpg  \nimages17/image12.json  \nimages3/image14  \n</code></pre>\n<p>读取之后，会得到像这样的字典</p>\n<pre><code class=\"language-python\">[\n{ “__key__”: “images17/image194”, “left.jpg”: b”...”, “right.jpg”: b”...”, “json”: b”...”}  \n{ “__key__”: “images17/image12”, “left.jpg”: b”...”, “json”: b”...”}  \n{ “__key__”: “images3/image14”, “”: b””}  \n]\n</code></pre>\n<h2 id=\"创建webdataset格式数据集\">创建WebDataset格式数据集</h2>\n<h3 id=\"使用tarwriter-api\">使用TarWriter API</h3>\n<pre><code class=\"language-python\">import webdataset as wds\nimport json\n\ndef create_webdataset(output_path, samples):\n    \"\"\"创建WebDataset格式数据集\"\"\"\n    with wds.TarWriter(output_path) as sink:\n        for i, (image_data, label, metadata) in enumerate(samples):\n            sink.write({\n                \"__key__\": f\"sample{i:06d}\",      # 样本唯一标识\n                \"jpg\": image_data,               # 图像数据（字节格式）\n                \"cls\": str(label).encode(),      # 类别标签\n                \"json\": json.dumps(metadata).encode()  # 元数据\n            })\n</code></pre>\n<h2 id=\"读取和处理webdataset数据集\">读取和处理WebDataset数据集</h2>\n<h3 id=\"基础数据管道\">基础数据管道</h3>\n<pre><code class=\"language-python\">import webdataset as wds\nimport torch\nfrom torchvision import transforms\n\n# 定义数据预处理\npreprocess = transforms.Compose([\n    transforms.RandomResizedCrop(224),\n    transforms.RandomHorizontalFlip(),\n    transforms.ToTensor(),\n    transforms.Normalize(mean=[0.485, 0.456, 0.406], \n                         std=[0.229, 0.224, 0.225])\n])\n\n# 创建WebDataset数据管道\ndataset = (wds.WebDataset(\"dataset-{000000..000099}.tar\")  # 100个分片\n    .shuffle(1000)                    # 样本级打乱\n    .decode(\"pil\")                    # 解码为PIL图像\n    .to_tuple(\"jpg\", \"cls\")           # 提取图像和标签\n    .map_tuple(preprocess, lambda x: int(x))  # 应用预处理\n    .batched(32)                      # 批处理\n\t)\n\n# 创建DataLoader\ndataloader = torch.utils.data.DataLoader(\n    dataset, \n    batch_size=None,  # 批处理已在管道中完成\n    num_workers=4\n)\n</code></pre>\n<h3 id=\"高级数据处理技巧\">高级数据处理技巧</h3>\n<p>WebDataset支持复杂的数据处理管道，包括多模态数据融合和动态增强：</p>\n<pre><code class=\"language-python\">def create_advanced_pipeline():\n    \"\"\"创建高级数据处理管道\"\"\"\n    \n    # 图像增强\n    image_augmentation = transforms.Compose([\n        transforms.RandomChoice([\n            transforms.ColorJitter(brightness=0.2, contrast=0.2),\n            transforms.GaussianBlur(3),\n            transforms.RandomAffine(degrees=15, scale=(0.9, 1.1))\n        ]),\n        transforms.RandomHorizontalFlip(),\n    ])\n    \n    # 文本预处理\n    def text_preprocessing(text_bytes):\n        text = text_bytes.decode(\"utf-8\").lower().strip()\n        # 应用文本清洗和分词逻辑\n        return text\n    \n    dataset = (wds.WebDataset(\"multimodal-{000000..000050}.tar\")\n        .shuffle(5000)  # 大缓冲区提高随机性\n        .decode(\"pil\", handler=wds.warn_and_continue)  # 错误处理\n        .rename(image=\"jpg;png;jpeg\", text=\"txt;json\", caption=\"caption;text\")\n        .map_dict(  # 对不同字段应用不同处理\n            image=image_augmentation,\n            text=text_preprocessing,\n            caption=text_preprocessing\n        )\n        .to_tuple(\"image\", \"text\", \"caption\")  # 多模态输出\n        .batched(16, partial=False)  # 精确批大小控制\n    )\n    \n    return dataset\n</code></pre>\n<h2 id=\"分布式训练集成\">分布式训练集成</h2>\n<h3 id=\"单机多gpu训练\">单机多GPU训练</h3>\n<pre><code class=\"language-python\">import webdataset as wds\nimport torch.distributed as dist\n\ndef setup_distributed_training():\n    \"\"\"设置分布式训练环境\"\"\"\n    \n    # 初始化进程组\n    dist.init_process_group(backend=\"nccl\")\n    local_rank = int(os.environ[\"LOCAL_RANK\"])\n    world_size = dist.get_world_size()\n    \n    # 根据rank配置设备\n    torch.cuda.set_device(local_rank)\n    \n    return local_rank, world_size\n\ndef create_distributed_loader(url_pattern, batch_size=32):\n    \"\"\"创建分布式数据加载器\"\"\"\n    \n    local_rank, world_size = setup_distributed_training()\n    \n    dataset = (wds.WebDataset(\n            url_pattern, \n            resampled=True,  # 启用重采样以支持无限数据流\n            nodesplitter=wds.split_by_node,\n            splitter=wds.split_by_worker\n        )\n        .shuffle(1000)\n        .decode(\"pil\")\n        .to_tuple(\"jpg\", \"cls\")\n        .batched(batch_size)\n    )\n    \n    loader = wds.WebLoader(\n        dataset,\n        batch_size=None,\n        num_workers=4,\n        shuffle=False  # 打乱已在数据管道中处理\n    )\n    \n    # 设置epoch长度\n    loader = loader.with_epoch(10000)  # 每个epoch处理10000个批次\n    \n    return loader\n</code></pre>\n<h3 id=\"多节点训练配置\">多节点训练配置</h3>\n<p>对于跨多个服务器的训练任务，WebDataset提供完整的多节点支持：</p>\n<pre><code class=\"language-python\">def multi_node_training_setup():\n    \"\"\"多节点训练配置\"\"\"\n    \n    dataset = (wds.WebDataset(\"dataset-{000000..012345}.tar\")\n        .shuffle(10000)\n        .decode(\"torchrgb\")  # 直接解码为PyTorch张量\n        .split_by_node  # 自动按节点分割数据\n        .split_by_worker  # 按工作进程分割\n        .to_tuple(\"image\", \"label\")\n        .batched(64)\n    )\n    \n    # 使用WebLoader优化性能\n    loader = wds.WebLoader(\n        dataset,\n        batch_size=None,\n        num_workers=8,\n        persistent_workers=True  # 保持工作进程活跃\n    )\n    \n    return loader\n</code></pre>\n<h2 id=\"性能优化最佳实践\">性能优化最佳实践</h2>\n<h3 id=\"分片策略优化\">分片策略优化</h3>\n<p>分片大小对性能有显著影响，建议根据存储类型选择：</p>\n<ul>\n<li><strong>本地硬盘</strong>：256MB-1GB/分片</li>\n<li><strong>网络存储</strong>：1-4GB/分片</li>\n<li><strong>云对象存储</strong>：4-16GB/分片</li>\n</ul>\n<pre><code class=\"language-python\">def optimize_shard_size(base_url, target_size_mb=1024):\n    \"\"\"根据目标大小优化分片策略\"\"\"\n    # 计算样本平均大小\n    sample_size = estimate_average_sample_size()\n    samples_per_shard = (target_size_mb * 1024 * 1024) // sample_size\n    \n    return f\"{base_url}-{{000000..999999}}.tar\", samples_per_shard\n</code></pre>\n<h3 id=\"缓存策略\">缓存策略</h3>\n<p>对于远程数据集，使用缓存可以显著减少网络传输：</p>\n<pre><code class=\"language-python\">dataset = (wds.WebDataset(\"https://example.com/dataset-{000000..000999}.tar\")\n    .cache_dir(\"./cache\")  # 本地缓存目录\n    .cache_size(10 * 1024 ** 3)  # 10GB缓存大小\n    .shuffle(10000)\n    .decode(\"pil\")\n)\n</code></pre>\n<h3 id=\"内存优化技巧\">内存优化技巧</h3>\n<p>处理超大图像或视频时，使用流式解码避免内存溢出：</p>\n<pre><code class=\"language-python\">def streamed_video_processing():\n    \"\"\"流式视频处理避免内存溢出\"\"\"\n    \n    dataset = (wds.WebDataset(\"video-dataset.tar\")\n        .shuffle(100)\n        .decode(\"rgb8\", handler=wds.ignore_and_continue)  # 流式解码\n        .map(video_frame_sampling)  # 帧采样\n        .slice(0, 100)  # 限制序列长度\n        .batched(1)  # 视频批处理大小为1\n    )\n    \n    return dataset\n</code></pre>\n<h2 id=\"故障排除与调试\">故障排除与调试</h2>\n<h3 id=\"常见问题解决\">常见问题解决</h3>\n<ol>\n<li><strong>内存不足</strong>：减少批大小或使用流式解码</li>\n<li><strong>数据加载慢</strong>：增加分片大小或调整工作进程数</li>\n<li><strong>样本不匹配</strong>：检查TAR文件中同一样本的文件命名一致性</li>\n</ol>\n<h3 id=\"调试技巧\">调试技巧</h3>\n<pre><code class=\"language-python\"># 启用详细日志\nimport os\nos.environ[\"WDS_VERBOSE_CACHE\"] = \"1\"\nos.environ[\"GOPEN_VERBOSE\"] = \"1\"\n\n# 检查数据样本\ndataset = wds.WebDataset(\"dataset.tar\")\nfor sample in dataset.take(5):  # 只取前5个样本\n    print(\"Sample keys:\", list(sample.keys()))\n    for key, value in sample.items():\n        print(f\"{key}: {type(value)}, size: {len(value) if hasattr(value, '__len__') else 'N/A'}\")\n</code></pre>\n<h2 id=\"随机读取\">随机读取</h2>\n<p>虽然wds格式是为了流式读取而设计的，随机读取有些违背其使用理念，但是只能流式读取也有些不方便。比如当想随机查找第n个样本（比如bad case）时，随机读取还是更加方便快捷。<br />\n在安装官方的webdataset python库时，还会同步安装 wids 这个库，会可以帮助wds格式数据集实现随机读取。<a href=\"https://www.bing.com/ck/a?!&amp;&amp;p=8c306290ed0a41aeda3ad41f03f82846e4e663c8ea4b25152258d8546b6dc558JmltdHM9MTc2ODc4MDgwMA&amp;ptn=3&amp;ver=2&amp;hsh=4&amp;fclid=18e4bf87-a076-62ee-3329-aa52a19c6398&amp;u=a1aHR0cHM6Ly9weXBpLm9yZy9wcm9qZWN0L3dpZHMv&amp;ntb=1\" rel=\"noopener nofollow\" target=\"_blank\">wids · PyPI</a> 中给出了一个DEMO.</p>\n<p>但是如果可以获取样本所在tar文件路径和key，直接基于webdataset的接口读取也不会很慢，不应该使用wids；另外，我发现wids的相关资料很少，，很久都不更新了，官方好像也不在意这个功能，我自己尝试了一下感觉意义不大。</p>\n<h2 id=\"结论\">结论</h2>\n<p>WebDataset通过创新的流式数据加载范式，彻底解决了大规模深度学习训练中的数据I/O瓶颈。其核心优势在于：</p>\n<ol>\n<li><strong>卓越性能</strong>：顺序读取相比随机访问带来3-10倍的性能提升</li>\n<li><strong>分布式友好</strong>：天然支持多节点、多GPU训练场景</li>\n<li><strong>灵活性</strong>：支持任意数据类型和复杂的多模态场景</li>\n<li><strong>易用性</strong>：与PyTorch生态无缝集成，API设计简洁直观</li>\n</ol>\n<p>随着深度学习数据集规模的不断增长，WebDataset已成为处理TB级甚至PB级数据的标准工具。掌握WebDataset的使用技巧，对于构建高效、可扩展的深度学习系统至关重要。</p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-19 20:04</span>&nbsp;\n<a href=\"https://www.cnblogs.com/aurora-zzm\">一苇江湖</a>&nbsp;\n阅读(<span id=\"post_view_count\">0</span>)&nbsp;\n评论(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">收藏</a>&nbsp;\n<a href=\"\">举报</a>\n</div>"
    },
    {
      "title": "AI新手入门：10分钟用Spring AI打造你的第一个智能心理咨询师",
      "link": "https://www.cnblogs.com/freshman118/p/19503473",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/freshman118/p/19503473\" id=\"cb_post_title_url\" title=\"发布于 2026-01-19 18:57\">\n    <span>AI新手入门：10分钟用Spring AI打造你的第一个智能心理咨询师</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<p>大家好！我是你们的 AI 技术向导。今天带来一篇超级实用的 Spring AI 上手教程，专为零基础的 AI 爱好者设计。无需高深技术背景，只需 10 分钟，你就能创建一个能对话的智能体！</p>\n<h2 id=\"什么是-spring-ai\">什么是 Spring AI？</h2>\n<p>Spring AI 是 Spring 生态中用于简化 AI 应用开发的框架，让开发者能轻松集成大语言模型。今天的 Demo 将基于阿里云的 DashScope 平台，创建一个专业的心理咨询师智能体。</p>\n<h2 id=\"环境准备\">环境准备</h2>\n<p>首先，我们需要创建一个 Spring 项目。推荐使用 IDEA 开发工具：</p>\n<ol>\n<li>打开 IDEA，选择新建 Spring 项目</li>\n</ol>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<ol>\n<li>设置 Spring Boot 版本以及依赖</li>\n</ol>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<ol>\n<li>项目创建成功后，进入下一步</li>\n</ol>\n<h2 id=\"添加关键依赖\">添加关键依赖</h2>\n<p>在项目的 pom.xml 文件中，添加以下两个核心依赖：</p>\n<pre><code class=\"language-xml\">&lt;dependency&gt;\n    &lt;groupId&gt;com.alibaba.cloud.ai&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-ai-alibaba-agent-framework&lt;/artifactId&gt;\n    &lt;version&gt;1.1.0.0-M5&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.alibaba.cloud.ai&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-ai-alibaba-starter-dashscope&lt;/artifactId&gt;\n    &lt;version&gt;1.1.0.0-M5&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>这两个依赖分别提供了智能体框架和 DashScope 模型的支持。</p>\n<h2 id=\"编写核心代码\">编写核心代码</h2>\n<p>在 com.jackson.aiagent 包下创建 AgentExample.java 文件：</p>\n<pre><code class=\"language-java\">package com.jackson.aiagent;\n\n// 导入必要的类\npublic class AgentExample {\n    public static void main(String[] args) throws Exception {\n        // 1. 创建模型实例（记得替换成你自己的API Key）\n        DashScopeApi dashScopeApi = DashScopeApi.builder()\n                .apiKey(\"sk-309xxxxxxxxxxxxxxxxxxxxxxxx\")\n                .build();\n        ChatModel chatModel = DashScopeChatModel.builder()\n                .dashScopeApi(dashScopeApi)\n                .build();\n\n        // 2. 创建智能体角色\n        ReactAgent agent = ReactAgent.builder()\n                .name(\"智能心理咨询师\")\n                .model(chatModel)\n                .instruction(\"你是一名10年经验的资深心理咨询师.\")\n                .build();\n\n        // 3. 与智能体对话\n        var response = agent.call(\"抑郁症有些什么症状？该如何缓解？\");\n        System.out.println(response.getText());\n    }\n}\n</code></pre>\n<h2 id=\"运行你的第一个-ai-智能体\">运行你的第一个 AI 智能体</h2>\n<p>代码编写完成后，直接运行 main 方法。你会看到控制台输出类似以下内容：</p>\n<p><img alt=\"\" class=\"lazyload\" /></p>\n<h2 id=\"技术要点解析\">技术要点解析</h2>\n<ul>\n<li>​<strong>API Key 配置</strong>​：需要到 DashScope 平台申请自己的 API Key</li>\n<li>​<strong>智能体定制</strong>​：通过 instruction 参数定义智能体的专业背景</li>\n<li>​<strong>对话交互</strong>​：使用 call 方法即可与智能体进行对话</li>\n</ul>\n<h2 id=\"拓展思路\">拓展思路</h2>\n<p>这个 Demo 虽然简单，但已经包含了 AI 智能体的核心要素。你可以尝试：</p>\n<ul>\n<li>更换不同的专业角色（如法律顾问、编程助手等）</li>\n<li>设计更复杂的对话流程</li>\n<li>集成到 Web 应用中提供在线服务</li>\n</ul>\n<h2 id=\"总结\">总结</h2>\n<p>通过这个教程，我们见证了 Spring AI 的强大之处——用极简的代码实现智能对话功能。作为 AI 新手，这是一个完美的起点。未来你可以在此基础上探索更复杂的 AI 应用场景。</p>\n<p><strong>动手试试吧！</strong> 在评论区分享你的第一个智能体作品，遇到问题随时提问哦~</p>\n<hr />\n<p><em>本文基于技术文档整理，适合 AI 入门学习。实际开发中请参考官方最新文档。</em></p>\n<p>_Reference: _https://github.com/alibaba/spring-ai-alibaba</p>\n\n</div>\n<div id=\"MySignature\">\n    <p>本文来自博客园，作者：<a href=\"https://www.cnblogs.com/freshman118/\" target=\"_blank\">90后小陈老师</a>，转载请注明原文链接：<a href=\"https://www.cnblogs.com/freshman118/p/19503473\" target=\"_blank\">https://www.cnblogs.com/freshman118/p/19503473</a></p>\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-19 18:57</span>&nbsp;\n<a href=\"https://www.cnblogs.com/freshman118\">90后小陈老师</a>&nbsp;\n阅读(<span id=\"post_view_count\">36</span>)&nbsp;\n评论(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">收藏</a>&nbsp;\n<a href=\"\">举报</a>\n</div>"
    },
    {
      "title": "[python] python-docx-template模板化Word文档生成指北",
      "link": "https://www.cnblogs.com/luohenyueji/p/19503461",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/luohenyueji/p/19503461\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäºŽ 2026-01-19 18:51\">\n    <span>[python] python-docx-templateæ¨¡æ¿åŒ–Wordæ–‡æ¡£ç”ŸæˆæŒ‡åŒ—</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<p>python-docxåº“çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯ç¨‹åºåŒ–åˆ›å»ºå…¨æ–°çš„Wordæ–‡æ¡£ï¼Œä½†åœ¨åŸºäºŽå·²æœ‰æ¨¡æ¿æ›¿æ¢å…¶éƒ¨åˆ†å†…å®¹æ—¶ï¼Œå…¶æ“ä½œä¼šéžå¸¸ç¹çã€‚ç”¨æˆ·éœ€è¦å…ˆè§£æžæ–‡æ¡£ç»“æž„ã€å®šä½å…·ä½“ä½ç½®ã€æ‰‹åŠ¨æ›¿æ¢å†…å®¹ï¼Œå¹¶ç»´æŠ¤åŽŸæœ‰æ ¼å¼ä¸Žå¸ƒå±€ï¼Œå¯¼è‡´å¼€å‘æ•ˆçŽ‡è¾ƒä½Žã€‚ç›¸å…³ä½¿ç”¨æ–¹æ³•å¯å‚è€ƒï¼š<a href=\"https://www.cnblogs.com/luohenyueji/p/19479110\" target=\"_blank\">åŸºäºŽpython-docxåº“çš„Wordæ–‡æ¡£è‡ªåŠ¨å¤„ç†å…¨è§£</a>ã€‚</p>\n<p>python-docx-templateæ­£æ˜¯ä¸ºè§£å†³è¿™ä¸€ç—›ç‚¹è€Œè®¾è®¡çš„ã€‚å®ƒå€Ÿé‰´Jinja2æ¨¡æ¿å¼•æ“Žçš„æ€è·¯ï¼Œå…è®¸åœ¨Wordæ–‡æ¡£ä¸­ç›´æŽ¥æ’å…¥ç±»ä¼¼<code>{{variable}}</code>çš„å ä½ç¬¦ï¼ŒéšåŽä»…ç”¨å‡ è¡Œä»£ç å³å¯å®Œæˆæ•°æ®å¡«å……ï¼Œæ— éœ€å…³å¿ƒåº•å±‚æ–‡æ¡£ç»“æž„ï¼Œå®Œç¾Žé€‚é…åŸºäºŽæ¨¡æ¿ä¿®æ”¹æ–‡æ¡£çš„åœºæ™¯ã€‚</p>\n<p><img alt=\"\" src=\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5Bpython%5D%20python-docx-template%E6%A8%A1%E6%9D%BF%E5%8C%96Word%E6%96%87%E6%A1%A3%E7%94%9F%E6%88%90%E6%8C%87%E5%8C%97/imgs/1.jpg\" /></p>\n<p>python-docx-templateåŸºäºŽpython-docxå®žçŽ°æ–‡æ¡£è¯»å†™åŠŸèƒ½ï¼Œå¹¶å€ŸåŠ©jinja2æä¾›çµæ´»çš„æ¨¡æ¿æ ‡ç­¾æ”¯æŒï¼Œå…¶è®¾è®¡æ€è·¯å¦‚ä¸‹ï¼š</p>\n<ol>\n<li>\n<p>ç”¨Wordåˆ¶ä½œæ¨¡æ¿<br />\nåœ¨Microsoft Wordä¸­è‡ªç”±è®¾è®¡æ–‡æ¡£æ ¼å¼ï¼Œå¦‚æ’å…¥å›¾ç‰‡ã€è®¾ç½®é¡µçœ‰é¡µè„šã€è°ƒæ•´è¡¨æ ¼æ ·å¼ï¼Œå……åˆ†åˆ©ç”¨Wordå¼ºå¤§çš„æŽ’ç‰ˆåŠŸèƒ½ã€‚</p>\n</li>\n<li>\n<p>æ’å…¥æ¨¡æ¿å˜é‡<br />\nåœ¨éœ€è¦åŠ¨æ€å†…å®¹çš„ä½ç½®ï¼Œç›´æŽ¥è¾“å…¥Jinja2é£Žæ ¼çš„æ ‡ç­¾ï¼Œä¾‹å¦‚<code>{{company_name}}</code>æˆ–<code>{%for item in list%}</code>ã€‚</p>\n</li>\n<li>\n<p>ä¿å­˜ä¸ºæ¨¡æ¿æ–‡ä»¶<br />\nå°†æ–‡æ¡£ä¿å­˜ä¸ºæ™®é€šçš„.docxæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å³æˆä¸ºå¯å¤ç”¨çš„æ¨¡æ¿ã€‚</p>\n</li>\n<li>\n<p>ç”¨Pythonæ‰¹é‡ç”Ÿæˆ<br />\nåŠ è½½æ¨¡æ¿å¹¶ä¼ å…¥å­—å…¸æˆ–å¯¹è±¡ï¼Œpython-docx-templateä¼šè‡ªåŠ¨æ›¿æ¢æ ‡ç­¾ï¼Œç”Ÿæˆæœ€ç»ˆæ–‡æ¡£ã€‚</p>\n</li>\n</ol>\n<p>python-docx-templateçš„å®˜æ–¹ä»£ç ä»“åº“åœ°å€ä¸ºï¼š<a href=\"https://github.com/elapouya/python-docx-template\" rel=\"noopener nofollow\" target=\"_blank\">python-docx-template</a>ï¼Œè¯¦ç»†æ–‡æ¡£å¯å‚é˜…ï¼š<a href=\"https://docxtpl.readthedocs.io/\" rel=\"noopener nofollow\" target=\"_blank\">python-docx-template doc</a>ã€‚æœ¬æ–‡ä½¿ç”¨çš„python-docx-templateç‰ˆæœ¬ä¸º0.20.2ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p>\n<blockquote>\n<p>pip install docxtpl</p>\n</blockquote>\n<p>å…¶ä¸­ï¼Œdocxtplæ˜¯python-docx-templateåº“çš„æ­£å¼åˆ†å‘åç§°ï¼ŒäºŒè€…æŒ‡ä»£åŒä¸€å·¥å…·ã€‚</p>\n<p></p><div class=\"toc\"><div class=\"toc-container-header\">ç›®å½•</div><ul><li><a href=\"#1-ä½¿ç”¨è¯´æ˜Ž\" rel=\"noopener nofollow\">1 ä½¿ç”¨è¯´æ˜Ž</a><ul><li><a href=\"#11-æ ¸å¿ƒæ¦‚å¿µ\" rel=\"noopener nofollow\">1.1 æ ¸å¿ƒæ¦‚å¿µ</a><ul><li><a href=\"#111-æ ‡ç­¾è¯´æ˜Ž\" rel=\"noopener nofollow\">1.1.1 æ ‡ç­¾è¯´æ˜Ž</a></li><li><a href=\"#112-å¸¸è§å…ƒç´\" rel=\"noopener nofollow\">1.1.2 å¸¸è§å…ƒç´ </a></li></ul></li><li><a href=\"#12-å¤æ‚å…ƒç´\" rel=\"noopener nofollow\">1.2 å¤æ‚å…ƒç´ </a><ul><li><a href=\"#121-å¯Œæ–‡æœ¬\" rel=\"noopener nofollow\">1.2.1 å¯Œæ–‡æœ¬</a></li><li><a href=\"#122-å¯Œæ–‡æœ¬æ®µè½\" rel=\"noopener nofollow\">1.2.2 å¯Œæ–‡æœ¬æ®µè½</a></li><li><a href=\"#123-æµ®åŠ¨å¯¹è±¡\" rel=\"noopener nofollow\">1.2.3 æµ®åŠ¨å¯¹è±¡</a></li><li><a href=\"#124-å­æ–‡æ¡£\" rel=\"noopener nofollow\">1.2.4 å­æ–‡æ¡£</a></li></ul></li><li><a href=\"#13-è¡¥å……æ“ä½œ\" rel=\"noopener nofollow\">1.3 è¡¥å……æ“ä½œ</a><ul><li><a href=\"#131-è½¬ä¹‰æ“ä½œ\" rel=\"noopener nofollow\">1.3.1 è½¬ä¹‰æ“ä½œ</a></li><li><a href=\"#132-èŽ·å–æœªå®šä¹‰å˜é‡\" rel=\"noopener nofollow\">1.3.2 èŽ·å–æœªå®šä¹‰å˜é‡</a></li><li><a href=\"#133-jinjaè‡ªå®šä¹‰è¿‡æ»¤å™¨\" rel=\"noopener nofollow\">1.3.3 Jinjaè‡ªå®šä¹‰è¿‡æ»¤å™¨</a></li><li><a href=\"#134-microsoft-word-2016ç‰¹æ®Šè¡Œä¸ºè¯´æ˜Ž\" rel=\"noopener nofollow\">1.3.4 Microsoft Word 2016ç‰¹æ®Šè¡Œä¸ºè¯´æ˜Ž</a></li></ul></li></ul></li><li><a href=\"#2-å‚è€ƒ\" rel=\"noopener nofollow\">2 å‚è€ƒ</a></li></ul></div><p></p>\n<h1 id=\"1-ä½¿ç”¨è¯´æ˜Ž\">1 ä½¿ç”¨è¯´æ˜Ž</h1>\n<h2 id=\"11-æ ¸å¿ƒæ¦‚å¿µ\">1.1 æ ¸å¿ƒæ¦‚å¿µ</h2>\n<h3 id=\"111-æ ‡ç­¾è¯´æ˜Ž\">1.1.1 æ ‡ç­¾è¯´æ˜Ž</h3>\n<p>python-docx-templateå…è®¸åœ¨Wordæ–‡æ¡£ä¸­ä½¿ç”¨Jinja2æ ‡ç­¾å’Œè¿‡æ»¤å™¨ã€‚ä½†ä¸ºç¡®ä¿å…¶åœ¨Wordä¸­æ­£å¸¸è¿ä½œï¼Œéœ€éµå¾ªè‹¥å¹²é™åˆ¶ã€‚</p>\n<p>å¸¸è§„Jinja2æ ‡ç­¾ä»…èƒ½åœ¨åŒä¸€æ®µè½å†…ä¸”åŒä¸€æ–‡æœ¬è¿è¡Œä¸­ä½¿ç”¨ï¼Œè‹¥éœ€æŽ§åˆ¶æ®µè½ã€è¡¨æ ¼è¡Œæˆ–åŒ…å«æ ·å¼çš„å®Œæ•´æ–‡æœ¬è¿è¡Œï¼Œåˆ™å¿…é¡»ä½¿ç”¨åŽç»­ç« èŠ‚ä»‹ç»çš„å¤æ‚å…ƒç´ æ ‡ç­¾è¯­æ³•ã€‚</p>\n<p>ä¸¾ä¾‹è€Œè¨€ï¼Œè‹¥åˆ›å»ºä¸€ä¸ªæ‰€æœ‰å­—ç¬¦æ ·å¼ç›¸åŒçš„æ®µè½ï¼ŒWordå†…éƒ¨åªä¼šç”Ÿæˆä¸€ä¸ªæ–‡æœ¬è¿è¡Œå¯¹è±¡ã€‚ä½†è‹¥åœ¨è¯¥æ®µè½ä¸­å°†éƒ¨åˆ†æ–‡å­—è®¾ç½®ä¸ºåŠ ç²—ï¼ŒWordä¼šå°†åŽŸæœ‰æ–‡æœ¬è¿è¡Œæ‹†åˆ†ä¸ºä¸‰ä¸ªç‹¬ç«‹éƒ¨åˆ†ï¼Œåˆ†åˆ«å¯¹åº”æ™®é€šæ ·å¼ã€åŠ ç²—æ ·å¼åŠæ¢å¤åŽçš„æ™®é€šæ ·å¼ã€‚</p>\n<p><strong>æ ‡ç­¾</strong></p>\n<p>è‹¥è¦å¯¹æ®µè½ã€è¡¨æ ¼è¡Œã€è¡¨æ ¼åˆ—ä»¥åŠæ–‡æœ¬æ®µè¿›è¡Œç®¡ç†ï¼Œéœ€ä½¿ç”¨ä»¥ä¸‹ä¸“ç”¨è¯­æ³•ï¼š</p>\n<ul>\n<li>æ®µè½æ ‡ç­¾ï¼š<code>{%p jinja2_tag %}</code></li>\n<li>è¡¨æ ¼è¡Œæ ‡ç­¾ï¼š<code>{%tr jinja2_tag %}</code></li>\n<li>è¡¨æ ¼åˆ—æ ‡ç­¾ï¼š<code>{%tc jinja2_tag %}</code></li>\n<li>æ–‡æœ¬æ®µæ ‡ç­¾ï¼š<code>{%r jinja2_tag %}</code></li>\n</ul>\n<p>è¿™äº›ä»¥<code>{% %}</code>åŒ…è£¹çš„å†…å®¹æ˜¯Jinja2æ¨¡æ¿è¯­æ³•æ ‡ç­¾ï¼Œå¼•æ“Žä¼šè¯†åˆ«å¹¶æ‰§è¡Œå…¶ä¸­çš„é€»è¾‘ã€‚ä¸€ä¸ªå®Œæ•´çš„æ¨¡æ¿æ ‡ç­¾åŸºæœ¬ç»“æž„å¦‚ä¸‹ï¼š</p>\n<pre><code>{% æŒ‡ä»¤å…³é”®å­— å‚æ•°/æ¡ä»¶ %}  // èµ·å§‹æ ‡ç­¾\nå†…å®¹                      // è¢«æ ‡ç­¾æŽ§åˆ¶çš„æ–‡æœ¬\n{% ç»“æŸå…³é”®å­— %}          // ç»“æŸæ ‡ç­¾\n</code></pre>\n<p>é€šè¿‡æ­¤ç±»æ ‡ç­¾ï¼Œpython-docx-templateå¯è‡ªåŠ¨å°†æ ‡å‡†Jinja2æ ‡ç­¾ï¼Œå³åŽ»é™¤å‰ç¼€<code>p</code>ã€<code>tr</code>ã€<code>tc</code>ã€<code>r</code>åŽçš„å†…å®¹ï¼Œç²¾ç¡®åµŒå…¥åˆ°æ–‡æ¡£XMLæºç çš„ç›¸åº”ä½ç½®ã€‚</p>\n<p><img alt=\"\" src=\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5Bpython%5D%20python-docx-template%E6%A8%A1%E6%9D%BF%E5%8C%96Word%E6%96%87%E6%A1%A3%E7%94%9F%E6%88%90%E6%8C%87%E5%8C%97/imgs/2.jpg\" /></p>\n<p>å‡è®¾æ¨¡æ¿å†…å®¹å¦‚ä¸‹ï¼š</p>\n<pre><code>{%p if display_paragraph %}\nä¸€æ®µæˆ–å¤šæ®µæ–‡æœ¬å†…å®¹\n{%p endif %}\n</code></pre>\n<p>æ— è®ºdisplay_paragraphå˜é‡å–å€¼å¦‚ä½•ï¼Œé¦–å°¾ä¸¤ä¸ªåŒ…å«<code>{%p ... %}</code>æ ‡ç­¾çš„æ®µè½ï¼Œéƒ½ä¸ä¼šå‡ºçŽ°åœ¨æœ€ç»ˆç”Ÿæˆçš„docxæ–‡æ¡£ä¸­ã€‚<br />\nåªæœ‰å½“display_paragraphçš„å€¼ä¸ºTrueæ—¶ï¼Œä»¥ä¸‹å†…å®¹æ‰ä¼šè¢«ä¿ç•™åœ¨ç”Ÿæˆçš„æ–‡æ¡£é‡Œï¼š</p>\n<pre><code>ä¸€æ®µæˆ–å¤šæ®µæ–‡æœ¬å†…å®¹\n</code></pre>\n<p>å¯¹äºŽæ¨¡æ¿é‡Œçš„æ ‡ç­¾æ ¼å¼éœ€éµå¾ªå¦‚ä¸‹è¦æ±‚ï¼Œå¦åˆ™æ— æ³•ç”Ÿæˆæ­£ç¡®ç»“æžœï¼š</p>\n<ul>\n<li>èµ·å§‹æ ‡ç­¾åˆ†éš”ç¬¦åŽå¿…é¡»åŠ ç©ºæ ¼ï¼Œç»“æŸæ ‡ç­¾åˆ†éš”ç¬¦å‰å¿…é¡»åŠ ç©ºæ ¼ï¼š\n<ul>\n<li>é”™è¯¯ç¤ºä¾‹ï¼š<pre><code>{%if something%}\n{%pif display_paragraph%}\n</code></pre>\n</li>\n<li>æ­£ç¡®ç¤ºä¾‹ï¼š<pre><code>{% if something %}\n{%p if display_paragraph %}\n</code></pre>\n</li>\n</ul>\n</li>\n<li>åŒä¸€æ®µè½ã€è¡Œã€åˆ—æˆ–æ–‡æœ¬æ®µå†…ï¼Œç¦æ­¢è¿žç»­ä½¿ç”¨æ ‡ç­¾åˆ†éš”ç¬¦ï¼š\n<ul>\n<li>é”™è¯¯ç¤ºä¾‹ï¼š<pre><code>{%p{%tr{%tc{%r\n</code></pre>\n</li>\n</ul>\n</li>\n<li>æ ‡ç­¾ä¸Žå†…å®¹ä¸å¯å†™åœ¨åŒä¸€è¡Œï¼Œéœ€æ¢è¡ŒæŽ’ç‰ˆï¼š\n<ul>\n<li>é”™è¯¯ç¤ºä¾‹ï¼š<pre><code>{%p if display_paragraph %}Here is my paragraph {%p endif %}\n</code></pre>\n</li>\n<li>æ­£ç¡®ç¤ºä¾‹ï¼š<pre><code>{%p if display_paragraph %}\nHere is my paragraph\n{%p endif %}\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"112-å¸¸è§å…ƒç´ \">1.1.2 å¸¸è§å…ƒç´ </h3>\n<p><strong>æ˜¾ç¤ºå˜é‡</strong></p>\n<p>Jinja2æ¨¡æ¿é‡Œï¼Œå¯ä»¥ç”¨åŒå¤§æ‹¬å·æ¥æ˜¾ç¤ºå˜é‡ï¼š</p>\n<pre><code>{{ &lt;å˜é‡å&gt; }}\n</code></pre>\n<p>å¦‚æžœå˜é‡æ˜¯æ™®é€šå­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²é‡Œçš„ç‰¹æ®Šç¬¦å·ä¼šè‡ªåŠ¨è½¬æ¢æˆå¯¹åº”çš„æ ¼å¼ï¼š</p>\n<ul>\n<li><code>\\n</code> â†’ æ¢è¡Œ</li>\n<li><code>\\a</code> â†’ åˆ†æ®µ</li>\n<li><code>\\t</code> â†’ åˆ¶è¡¨ç¬¦ï¼ˆæŒ‰ä¸€ä¸‹ Tab é”®çš„æ•ˆæžœï¼‰</li>\n<li><code>\\f</code> â†’ åˆ†é¡µç¬¦</li>\n</ul>\n<p>å¦‚æžœå˜é‡æ˜¯å¯Œæ–‡æœ¬ï¼ˆRichTextï¼‰å¯¹è±¡ï¼Œå¿…é¡»åœ¨å˜é‡åå‰åŠ ä¸€ä¸ª<code>r</code>ï¼Œæ˜Žç¡®è¡¨ç¤ºè¦æ¸²æŸ“è¿™ä¸ªå¯Œæ–‡æœ¬å†…å®¹ï¼š</p>\n<pre><code>{{r &lt;å˜é‡å&gt; }}\n</code></pre>\n<p>æ³¨æ„ï¼Œ<code>r</code>è¦ç´§è·Ÿåœ¨å·¦å¤§æ‹¬å·çš„åŽé¢ã€‚</p>\n<p>æ­¤å¤–ï¼Œå˜é‡åä¸­ç¦æ­¢ç›´æŽ¥ä½¿ç”¨<code>&lt;</code>,<code>&gt;</code>, <code>&amp;</code>è¿™ç±»å­—ç¬¦ï¼Œé™¤éžç”¨äº†è½¬ä¹‰è¯­æ³•ã€‚</p>\n<p><strong>æ³¨é‡Š</strong></p>\n<p>å¯ä»¥åœ¨æ¨¡æ¿ä¸­æ·»åŠ ç±»Jinja2é£Žæ ¼çš„æ³¨é‡Šï¼Œæ³¨é‡Šä¸ä¼šè¢«æ¸²æŸ“åˆ°æœ€ç»ˆæ–‡ä»¶ï¼š</p>\n<pre><code>{#p è¿™æ˜¯ä¸€ä¸ªæ®µè½ç±»åž‹çš„æ³¨é‡Š #}\n{#tr è¿™æ˜¯ä¸€ä¸ªè¡¨æ ¼è¡Œç±»åž‹çš„æ³¨é‡Š #}\n{#tc è¿™æ˜¯ä¸€ä¸ªè¡¨æ ¼å•å…ƒæ ¼ç±»åž‹çš„æ³¨é‡Š #}\n</code></pre>\n<p>åœ¨æ‰§è¡Œå¦‚ä¸‹ä»£ç å¯¹æ¨¡æ¿æ–‡ä»¶è¿›è¡Œæ¸²æŸ“æ“ä½œæ—¶ï¼Œæ¨¡æ¿ä¸­åŽŸæœ‰çš„æ‰€æœ‰æ³¨é‡Šä¿¡æ¯å‡ä¼šè¢«æ¸…é™¤ï¼Œä¸ä¼šä¿ç•™åœ¨æœ€ç»ˆçš„æ¸²æŸ“ç»“æžœä¸­ï¼š</p>\n<pre><code class=\"language-python\"># https://github.com/elapouya/python-docx-template/blob/master/tests/comments.py\nfrom docxtpl import DocxTemplate\nimport os\n\n# data: https://github.com/elapouya/python-docx-template/blob/master/tests/templates/comments_tpl.docx\ntpl = DocxTemplate(\"templates/comments_tpl.docx\")\n\ntpl.render({})\nos.makedirs(\"output\",exist_ok=True)\ntpl.save(\"output/comments.docx\")\n</code></pre>\n<p><strong>æ–‡æœ¬çš„æ‹†åˆ†ä¸Žåˆå¹¶</strong></p>\n<p>è‹¥åŒ…å«Jinja2æ ‡ç­¾çš„æ–‡æœ¬è¿‡é•¿ï¼Œä¼šå¯¼è‡´å¯è¯»æ€§ä¸‹é™ï¼Œä¾‹å¦‚ï¼š</p>\n<pre><code>æˆ‘çš„æˆ¿å­ä½äºŽ{% if living_in_town %}åŸŽå¸‚åŒºåŸŸ{% else %}ä¹¡æ‘åœ°åŒº{% endif %}ï¼Œæˆ‘éžå¸¸å–œæ¬¢å®ƒã€‚\n</code></pre>\n<p>å€ŸåŠ©<code>{%-</code>è¯­æ³•ï¼Œå¯å°†Jinja2æ ‡ç­¾ä¸Žä¸Šä¸€è¡Œå†…å®¹åˆå¹¶ï¼ŒåŒæ—¶å€ŸåŠ©<code>-%}</code>è¯­æ³•ï¼Œå¯å°†Jinja2æ ‡ç­¾ä¸Žä¸‹ä¸€è¡Œå†…å®¹åˆå¹¶ã€‚æ­¤æ—¶å¯ä½¿ç”¨å›žè½¦é”®ï¼ˆEnterï¼‰æˆ–Shift+Enterå¯¹æ–‡æœ¬è¿›è¡Œæ‹†åˆ†æŽ’ç‰ˆï¼Œå†é€šè¿‡ä¸Šè¿°çš„æ ‡ç­¾è¯­æ³•å°†æ‹†åˆ†åŽçš„å†…å®¹åˆå¹¶ä¸ºä¸€ä¸ªæ•´ä½“ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>\n<pre><code>æˆ‘çš„æˆ¿å­ä½äºŽ\n{%- if living_in_town -%}\nåŸŽå¸‚åŒºåŸŸ\n{%- else -%}\nä¹¡æ‘åœ°åŒº\n{%- endif -%}\nï¼Œæˆ‘éžå¸¸å–œæ¬¢å®ƒã€‚\n</code></pre>\n<p>æ¸²æŸ“ä»£ç å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"language-python\">from docxtpl import DocxTemplate\ntpl = DocxTemplate(\"template.docx\")\ncontext = {\"living_in_town\": True}\n\ntpl.render(context)\ntpl.save(\"output/output.docx\")\n</code></pre>\n<p><strong>è¡¨æ ¼</strong></p>\n<p>å¯ä»¥ä½¿ç”¨<code>colspan</code>æ ‡ç­¾å®žçŽ°è¡¨æ ¼å•å…ƒæ ¼çš„æ°´å¹³åˆå¹¶ï¼š</p>\n<pre><code>{% colspan &lt;var&gt; %}\n</code></pre>\n<p><code>&lt;var&gt;</code>å¿…é¡»ä¸ºæ•´æ•°ï¼Œç”¨äºŽæŒ‡å®šéœ€è¦åˆå¹¶çš„åˆ—æ•°ã€‚ä¹Ÿå¯é€šè¿‡Jinja2æ¨¡æ¿å¼•æ“Žè‡ªåŠ¨è®¡ç®—ï¼Œå¦‚å†…ç½®è¿‡æ»¤å™¨counté€šè¿‡ç®¡é“ç¬¦|æŽ¥æ”¶col_labelsï¼Œç”¨äºŽç»Ÿè®¡å…¶å…ƒç´ æ•°é‡ï¼š</p>\n<pre><code>{% colspan col_labels|count %}\n</code></pre>\n<p>ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•åˆ©ç”¨<code>colspan</code>æ ‡ç­¾ã€<code>tr</code>å’Œ<code>tc</code>æ ‡ç­¾åŠ¨æ€å¡«å……ä¸€ä¸ªè¡¨æ ¼ï¼š</p>\n<pre><code class=\"language-python\"># https://github.com/elapouya/python-docx-template/blob/master/tests/dynamic_table.py\nfrom docxtpl import DocxTemplate\nimport os\n# data: https://github.com/elapouya/python-docx-template/blob/master/tests/templates/dynamic_table_tpl.docx\ntpl = DocxTemplate(\"templates/dynamic_table_tpl.docx\")\n\ncontext = {\n    \"col_labels\": [\"fruit\", \"vegetable\", \"stone\", \"thing\"],\n    \"tbl_contents\": [\n        {\"label\": \"yellow\", \"cols\": [\"banana\", \"capsicum\", \"pyrite\", \"taxi\"]},\n        {\"label\": \"red\", \"cols\": [\"apple\", \"tomato\", \"cinnabar\", \"doubledecker\"]},\n        {\"label\": \"green\", \"cols\": [\"guava\", \"cucumber\", \"aventurine\", \"card\"]},\n    ],\n}\n\ntpl.render(context)\nos.makedirs(\"output\",exist_ok=True)\ntpl.save(\"output/dynamic_table.docx\")\n</code></pre>\n<p>ä¹Ÿå¯ä»¥åœ¨forå¾ªçŽ¯ä¸­å®žçŽ°å•å…ƒæ ¼æ°´å¹³åˆå¹¶ï¼š</p>\n<pre><code>{% hm %}\n</code></pre>\n<p>ä»¥ä¸‹ä»£ç å±•ç¤ºäº†å¦‚ä½•åˆ©ç”¨<code>hm</code>æ ‡ç­¾å®žçŽ°å•å…ƒæ ¼æ°´å¹³åˆå¹¶ï¼š</p>\n<pre><code class=\"language-python\"># https://github.com/elapouya/python-docx-template/blob/master/tests/horizontal_merge.py\nfrom docxtpl import DocxTemplate\nimport os\n# data: https://github.com/elapouya/python-docx-template/blob/master/tests/templates/horizontal_merge_tpl.docx\ntpl = DocxTemplate(\"templates/horizontal_merge_tpl.docx\")\ntpl.render({})\nos.makedirs(\"output\",exist_ok=True)\ntpl.save(\"output/horizontal_merge.docx\")\n</code></pre>\n<p>æ­¤å¤–ï¼Œè¿˜å¯ä»¥åœ¨forå¾ªçŽ¯ä¸­å®žçŽ°å•å…ƒæ ¼åž‚ç›´åˆå¹¶ï¼š</p>\n<pre><code>{% vm %}\n</code></pre>\n<p>ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•å®žçŽ°è¡¨æ ¼å•å…ƒæ ¼çš„åž‚ç›´åˆå¹¶æ•ˆæžœï¼š</p>\n<pre><code class=\"language-python\"># https://github.com/elapouya/python-docx-template/blob/master/tests/vertical_merge.py\nfrom docxtpl import DocxTemplate\n\n# data: https://github.com/elapouya/python-docx-template/blob/master/tests/templates/vertical_merge_tpl.docx\ntpl = DocxTemplate(\"templates/vertical_merge_tpl.docx\")\n\ncontext = {\n    \"items\": [\n        {\"desc\": \"Python interpreters\", \"qty\": 2, \"price\": \"FREE\"},\n        {\"desc\": \"Django projects\", \"qty\": 5403, \"price\": \"FREE\"},\n        {\"desc\": \"Guido\", \"qty\": 1, \"price\": \"100,000,000.00\"},\n    ],\n    \"total_price\": \"100,000,000.00\",\n    \"category\": \"Book\",\n}\n\ntpl.render(context)\ntpl.save(\"output/vertical_merge.docx\")\n</code></pre>\n<p>è‹¥éœ€è¦ä¿®æ”¹è¡¨æ ¼å•å…ƒæ ¼çš„èƒŒæ™¯è‰²ï¼Œå¿…é¡»å°†ä»¥ä¸‹æ ‡ç­¾æ”¾ç½®åœ¨å•å…ƒæ ¼å†…å®¹çš„æœ€å¼€å¤´ä½ç½®ï¼š</p>\n<pre><code>{% cellbg &lt;var&gt; %}\n</code></pre>\n<p><code>&lt;var&gt;</code>å¿…é¡»å¡«å†™é¢œè‰²çš„åå…­è¿›åˆ¶ç¼–ç ï¼Œä¸”æ— éœ€åŒ…å«äº•å·ï¼ˆ#ï¼‰ã€‚</p>\n<h2 id=\"12-å¤æ‚å…ƒç´ \">1.2 å¤æ‚å…ƒç´ </h2>\n<p><img alt=\"\" src=\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5Bpython%5D%20python-docx-template%E6%A8%A1%E6%9D%BF%E5%8C%96Word%E6%96%87%E6%A1%A3%E7%94%9F%E6%88%90%E6%8C%87%E5%8C%97/imgs/3.jpg\" /></p>\n<h3 id=\"121-å¯Œæ–‡æœ¬\">1.2.1 å¯Œæ–‡æœ¬</h3>\n<p>å¯Œæ–‡æœ¬ï¼ˆRich Textï¼‰æ˜¯ç›¸å¯¹äºŽçº¯æ–‡æœ¬ï¼ˆPlain Textï¼‰è€Œè¨€çš„ä¸€ç§æ–‡æœ¬æ ¼å¼ã€‚å®ƒä¸ä»…åŒ…å«æ–‡å­—å†…å®¹ï¼Œè¿˜æ”¯æŒä¸ºæ–‡å­—æ·»åŠ å„ç§æ ¼å¼å±žæ€§åŠå¤šåª’ä½“å…ƒç´ ï¼Œä»Žè€Œå‘ˆçŽ°å‡ºæ›´ä¸ºä¸°å¯Œçš„è§†è§‰æ•ˆæžœã€‚è¿™ç§æ ¼å¼çš„ç¼–è¾‘å’Œå¤„ç†ä¹Ÿå¯ä»¥é€šè¿‡åœ¨Microsoft Wordè½¯ä»¶ä¸­é¢„å…ˆå®šä¹‰å­—ç¬¦æ ·å¼æ¥å®žçŽ°ã€‚</p>\n<p>åœ¨python-docx-templateä¸­ä½¿ç”¨å¯Œæ–‡æœ¬çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p>\n<ol>\n<li>åœ¨Wordæ¨¡æ¿ä¸­ï¼Œä¸ºå¯Œæ–‡æœ¬å®šä¹‰ä¸€ä¸ªå ä½ç¬¦ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨<code>{{r rich_text_var}}</code>ï¼Œå…¶ä¸­çš„rè¡¨ç¤ºå¯Œæ–‡æœ¬ã€‚</li>\n<li>åœ¨Pythonä»£ç ä¸­ï¼Œåˆ©ç”¨RichTextç±»æž„å»ºå¸¦æœ‰æ ¼å¼çš„æ–‡æœ¬å†…å®¹ã€‚</li>\n<li>æ¸²æŸ“æ¨¡æ¿æ—¶ï¼Œå ä½ç¬¦ä¼šè¢«æ›¿æ¢ä¸ºå¯Œæ–‡æœ¬å†…å®¹ï¼Œå¹¶ä¿ç•™æ‰€æœ‰å·²å®šä¹‰çš„æ ¼å¼æ ·å¼ã€‚</li>\n</ol>\n<p>åœ¨ä»£ç ä¸­ä½¿ç”¨RichTextç±»æ—¶ï¼Œè¿˜å¯é€šè¿‡ä»¥ä¸‹æ ‡è®°æŽ§åˆ¶æ–‡æœ¬æ ¼å¼ï¼š</p>\n<ul>\n<li>æ¢è¡Œï¼š<code>\\n</code>ï¼›</li>\n<li>æ¢æ®µï¼š<code>\\a</code>ï¼›</li>\n<li>åˆ†é¡µï¼š<code>\\f</code>ã€‚</li>\n</ul>\n<p>ä»¥ä¸‹ä¸ºç”Ÿæˆå¯Œæ–‡æœ¬Wordæ–‡æ¡£çš„ç¤ºä¾‹ï¼š</p>\n<pre><code class=\"language-python\"># https://github.com/elapouya/python-docx-template/blob/master/tests/richtext.py\nfrom docxtpl import DocxTemplate, RichText\n\n# data: https://github.com/elapouya/python-docx-template/blob/master/tests/templates/richtext_tpl.docx\ntpl = DocxTemplate(\"templates/richtext_tpl.docx\")\n\nrt = RichText()\n\n# å‘å¯Œæ–‡æœ¬å¯¹è±¡ä¸­æ·»åŠ å†…å®¹ï¼Œä¾æ¬¡æ¼”ç¤ºä¸åŒçš„æ–‡æœ¬æ ¼å¼è®¾ç½®\nrt.add(\"a rich text\", style=\"myrichtextstyle\")  # ä½¿ç”¨è‡ªå®šä¹‰æ ·å¼\nrt.add(\" with \")                                \nrt.add(\"some italic\", italic=True)              # æ–œä½“æ–‡æœ¬\nrt.add(\" and \")\nrt.add(\"some violet\", color=\"#ff00ff\")          # ç´«è‰²æ–‡æœ¬ï¼ˆåå…­è¿›åˆ¶é¢œè‰²ç ï¼‰\nrt.add(\" and \")\nrt.add(\"some striked\", strike=True)             # åˆ é™¤çº¿æ–‡æœ¬\nrt.add(\" and \")\nrt.add(\"some Highlighted\", highlight=\"#ffff00\") # é»„è‰²é«˜äº®æ–‡æœ¬\nrt.add(\" and \")\nrt.add(\"some small\", size=14)                   # å°å­—å·æ–‡æœ¬ï¼ˆ14ç£…ï¼‰\nrt.add(\" or \")\nrt.add(\"big\", size=60)                          # å¤§å­—å·æ–‡æœ¬ï¼ˆ60ç£…ï¼‰\nrt.add(\" text.\")\nrt.add(\"\\nYou can add an hyperlink, here to \")\n# æ·»åŠ å¸¦è¶…é“¾æŽ¥çš„æ–‡æœ¬ï¼Œbuild_url_id ç”¨äºŽåˆ›å»ºURLæ ‡è¯†å¹¶å…³è”åˆ°æŒ‡å®šé“¾æŽ¥\nrt.add(\"bing\", url_id=tpl.build_url_id(\"http://bing.com\"))\nrt.add(\"\\nEt voilÃ  ! \")\n# æ¼”ç¤ºæ¢è¡Œç¬¦æ•ˆæžœ\nrt.add(\"\\n1st line\")\nrt.add(\"\\n2nd line\")\nrt.add(\"\\n3rd line\")\n# \\a ç”¨äºŽåˆ›å»ºæ–°æ®µè½\nrt.add(\"\\aA new paragraph : &lt;cool&gt;\\a\")\n# \\f ç”¨äºŽæ’å…¥åˆ†é¡µç¬¦\nrt.add(\"--- A page break here (see next page) ---\\f\")\n\n# å¾ªçŽ¯æ¼”ç¤ºä¸åŒç±»åž‹çš„ä¸‹åˆ’çº¿æ ·å¼\nfor ul in [\n    \"single\",       # å•ä¸‹åˆ’çº¿\n    \"double\",       # åŒä¸‹åˆ’çº¿\n    \"thick\",        # ç²—ä¸‹åˆ’çº¿\n    \"dotted\",       # ç‚¹ä¸‹åˆ’çº¿\n    \"dash\",         # çŸ­åˆ’çº¿ä¸‹åˆ’çº¿\n    \"dotDash\",      # ç‚¹åˆ’çº¿ä¸‹åˆ’çº¿\n    \"dotDotDash\",   # åŒç‚¹åˆ’çº¿ä¸‹åˆ’çº¿\n    \"wave\",         # æ³¢æµªçº¿ä¸‹åˆ’çº¿\n]:\n    rt.add(\"\\nUnderline : \" + ul + \" \\n\", underline=ul)\n\n# æ¼”ç¤ºä¸åŒå­—ä½“çš„è®¾ç½®\nrt.add(\"\\nFonts :\\n\", underline=True)\nrt.add(\"Arial\\n\", font=\"Arial\")                \nrt.add(\"Courier New\\n\", font=\"Courier New\")    \nrt.add(\"Times New Roman\\n\", font=\"Times New Roman\") \n\n# æ¼”ç¤ºä¸Šæ ‡å’Œä¸‹æ ‡æ–‡æœ¬\nrt.add(\"\\n\\nHere some\")\nrt.add(\"superscript\", superscript=True)        # ä¸Šæ ‡æ–‡æœ¬\nrt.add(\" and some\")\nrt.add(\"subscript\", subscript=True)            # ä¸‹æ ‡æ–‡æœ¬\n\n# åˆ›å»ºä¸€ä¸ªæ–°çš„å¯Œæ–‡æœ¬å¯¹è±¡ï¼Œå¹¶å°†ä¹‹å‰åˆ›å»ºçš„rtå¯¹è±¡åµŒå…¥å…¶ä¸­ï¼Œå®žçŽ°å¯Œæ–‡æœ¬åµŒå¥—\nrt_embedded = RichText(\"an example of \")\nrt_embedded.add(rt)\n\n# æž„å»ºæ¸²æŸ“ä¸Šä¸‹æ–‡ï¼Œå°†åµŒå¥—çš„å¯Œæ–‡æœ¬å¯¹è±¡èµ‹å€¼ç»™æ¨¡æ¿ä¸­çš„ \"example\" å˜é‡\ncontext = {\n    \"example\": rt_embedded,\n}\n\n# å°†ä¸Šä¸‹æ–‡æ•°æ®æ¸²æŸ“åˆ°Wordæ¨¡æ¿ä¸­\ntpl.render(context)\n# ä¿å­˜æ¸²æŸ“åŽçš„Wordæ–‡æ¡£åˆ°æŒ‡å®šè·¯å¾„\ntpl.save(\"output/richtext.docx\")\n</code></pre>\n<h3 id=\"122-å¯Œæ–‡æœ¬æ®µè½\">1.2.2 å¯Œæ–‡æœ¬æ®µè½</h3>\n<p>è‹¥è¦ç²¾ç»†æŽ§åˆ¶å•ä¸ªæ®µè½çš„æ ·å¼ï¼Œå¯åœ¨ä»£ç ä¸­ä½¿ç”¨<code>RichTextParagraph()</code>æˆ–<code>RP()</code>å¯¹è±¡ã€‚æ­¤å¯¹è±¡éœ€é€šè¿‡<code>{{p &lt;var&gt; }}</code>è¯­æ³•æ·»åŠ è‡³æ¨¡æ¿ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"language-python\"># https://github.com/elapouya/python-docx-template/blob/master/tests/richtextparagraph.py\nfrom docxtpl import DocxTemplate, RichText, RichTextParagraph\n\n# data: https://github.com/elapouya/python-docx-template/blob/master/tests/templates/richtext_paragraph_tpl.docx\ntpl = DocxTemplate(\"templates/richtext_paragraph_tpl.docx\")\n\n# åˆ›å»ºå¯Œæ–‡æœ¬æ®µè½å¯¹è±¡ç»„åˆä¸åŒæ ·å¼çš„æ®µè½\nrtp = RichTextParagraph()\n# åˆ›å»ºå¯Œæ–‡æœ¬å¯¹è±¡ï¼Œç”¨äºŽè®¾ç½®æ–‡æœ¬çš„å­—ç¬¦æ ·å¼\nrt = RichText()\n\n# å‘å¯Œæ–‡æœ¬æ®µè½ä¸­æ·»åŠ æ–‡æœ¬ï¼Œå¹¶æŒ‡å®šè‡ªå®šä¹‰æ ·å¼myrichparastyle\nrtp.add(\n    \"The rich text paragraph function allows paragraph styles to be added to text\",\n    parastyle=\"myrichparastyle\",\n)\n# æ·»åŠ æ–‡æœ¬å¹¶ä½¿ç”¨å†…ç½®æ®µè½æ ·å¼IntenseQuote\nrtp.add(\"Any built in paragraph style can be used\", parastyle=\"IntenseQuote\")\n# æ·»åŠ æ–‡æœ¬å¹¶ä½¿ç”¨è‡ªå®šä¹‰æ ·å¼createdStyle\nrtp.add(\n    \"or you can add your own, unlocking all style options\", parastyle=\"createdStyle\"\n)\n# æ·»åŠ æ–‡æœ¬å¹¶ä½¿ç”¨é»˜è®¤æ™®é€šæ®µè½æ ·å¼normal\nrtp.add(\n    \"To use, just create a style in your template word doc with the formatting you want \"\n    \"and call it in the code.\",\n    parastyle=\"normal\",\n)\n\n# æ¼”ç¤ºä¸åŒåˆ—è¡¨æ ·å¼çš„ä½¿ç”¨\nrtp.add(\"This allows for the use of\")\nrtp.add(\"custom bullet\\apoints\", parastyle=\"SquareBullet\")  # æ–¹å½¢é¡¹ç›®ç¬¦å·æ ·å¼\nrtp.add(\"Numbered Bullet Points\", parastyle=\"BasicNumbered\")  # æ•°å­—ç¼–å·æ ·å¼\nrtp.add(\"and Alpha Bullet Points.\", parastyle=\"alphaBracketNumbering\")  # å­—æ¯ç¼–å·æ ·å¼\n\n# æ¼”ç¤ºæ–‡æœ¬å¯¹é½æ–¹å¼çš„è®¾ç½®\nrtp.add(\"You can\", parastyle=\"normal\")  # é»˜è®¤å·¦å¯¹é½\nrtp.add(\"set the\", parastyle=\"centerAlign\")  # åº”ç”¨è‡ªå®šä¹‰æ ·å¼å±…ä¸­å¯¹é½\nrtp.add(\"text alignment\", parastyle=\"rightAlign\")  # åº”ç”¨è‡ªå®šä¹‰æ ·å¼å³å¯¹é½\n\n# æ¼”ç¤ºè¡Œé—´è·æ ·å¼ï¼šç´§å‡‘è¡Œé—´è·\nrtp.add(\n    \"as well as the spacing between lines of text. Like this for example, \"\n    \"this text has very tight spacing between the lines.\\aIt also has no space between \"\n    \"paragraphs of the same style.\",\n    parastyle=\"TightLineSpacing\",\n)\n# æ¼”ç¤ºè¡Œé—´è·æ ·å¼ï¼šå®½è¡Œé—´è·\nrtp.add(\n    \"Unlike this one, which has extra large spacing between lines for when you want to \"\n    \"space things out a bit or just write a little less.\",\n    parastyle=\"WideLineSpacing\",\n)\n# æ¼”ç¤ºæ®µè½èƒŒæ™¯è‰²æ ·å¼ï¼šç»¿è‰²èƒŒæ™¯\nrtp.add(\n    \"You can also set the background colour of a line.\", parastyle=\"LineShadingGreen\"\n)\n\n# æž„å»ºå¯Œæ–‡æœ¬å­—ç¬¦ä¸²ï¼Œæ¼”ç¤ºå­—ç¬¦çº§æ ·å¼\nrt.add(\"This works with \")\nrt.add(\"Rich \", bold=True)  # åŠ ç²—\nrt.add(\"Text \", italic=True)  # æ–œä½“\nrt.add(\"Strings\", underline=\"single\")  # å•ä¸‹åˆ’çº¿\nrt.add(\" too.\")\n\n# å°†å¯Œæ–‡æœ¬å¯¹è±¡æ·»åŠ åˆ°å¯Œæ–‡æœ¬æ®µè½ä¸­ï¼Œå¹¶æŒ‡å®šæ–¹å½¢é¡¹ç›®ç¬¦å·æ ·å¼\nrtp.add(rt, parastyle=\"SquareBullet\")\n\n# æž„å»ºæ¸²æŸ“ä¸Šä¸‹æ–‡ï¼Œå°†å¯Œæ–‡æœ¬æ®µè½å¯¹è±¡ç»‘å®šåˆ°æ¨¡æ¿ä¸­çš„exampleå˜é‡\ncontext = {\n    \"example\": rtp,\n}\n\n# å°†ä¸Šä¸‹æ–‡æ•°æ®æ¸²æŸ“åˆ° Word æ¨¡æ¿ä¸­\ntpl.render(context)\n# ä¿å­˜æ¸²æŸ“åŽçš„ Word æ–‡æ¡£åˆ°æŒ‡å®šè·¯å¾„\ntpl.save(\"output/richtext_paragraph.docx\")\n</code></pre>\n<h3 id=\"123-æµ®åŠ¨å¯¹è±¡\">1.2.3 æµ®åŠ¨å¯¹è±¡</h3>\n<p><strong>å›¾ç‰‡æ’å…¥</strong></p>\n<p>å¯åœ¨æ–‡æ¡£ä¸­åŠ¨æ€æ’å…¥å•å¼ æˆ–å¤šå¼ å›¾ç‰‡ï¼Œå½“å‰å·²æ”¯æŒJPEGå’ŒPNGæ ¼å¼ã€‚åªéœ€åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨<code>{{ &lt;var&gt; }}</code>æ ¼å¼çš„æ ‡ç­¾å³å¯ã€‚å›¾ç‰‡åµŒå…¥ä»£ç å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"language-python\">myimage = InlineImage(tpl, image_descriptor='test_files/python_logo.png', width=Mm(20), height=Mm(10))\n</code></pre>\n<p>ä½¿ç”¨æ—¶åº”ä¼ å…¥æ¨¡æ¿å¯¹è±¡ä¸Žå›¾ç‰‡æ–‡ä»¶è·¯å¾„ï¼Œå®½é«˜ä¸ºå¯é€‰å‚æ•°ã€‚å®½åº¦å’Œé«˜åº¦éœ€é€šè¿‡<code>Mm</code>ï¼ˆæ¯«ç±³ï¼‰ã€<code>Inches</code>ï¼ˆè‹±å¯¸ï¼‰æˆ– <code>Pt</code>ï¼ˆç£…ï¼‰ç­‰ç±»è¿›è¡Œå•ä½å®šä¹‰ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"language-python\"># https://github.com/elapouya/python-docx-template/blob/master/tests/inline_image.py\nfrom docxtpl import DocxTemplate, InlineImage\nfrom docx.shared import Mm\nimport jinja2\n# data: https://github.com/elapouya/python-docx-template/blob/master/tests/templates/inline_image_tpl.docx\ntpl = DocxTemplate(\"templates/inline_image_tpl.docx\")\n\n# å®šä¹‰æ¸²æŸ“æ¨¡æ¿æ‰€éœ€çš„ä¸Šä¸‹æ–‡æ•°æ®\ncontext = {\n    # åªè®¾ç½®å®½æˆ–è€…é«˜ï¼Œåˆ™å›¾ç‰‡è‡ªé€‚åº”å˜åŒ–\n    \"myimage\": InlineImage(tpl, \"templates/python_logo.png\", width=Mm(20)),\n    # æ‰‹åŠ¨æŒ‡å®šå®½é«˜åº¦\n    \"myimageratio\": InlineImage(\n        tpl, \"templates/python_jpeg.jpg\", width=Mm(30), height=Mm(60)\n    ),\n    # å®šä¹‰å›¾ç‰‡+æè¿°\n    \"frameworks\": [\n        {\n            \"image\": InlineImage(tpl, \"templates/django.png\", height=Mm(10)),\n            \"desc\": \"The web framework for perfectionists with deadlines\",\n        },\n        {\n            \"image\": InlineImage(tpl, \"templates/zope.png\", height=Mm(10)),\n            \"desc\": \"Zope is a leading Open Source Application Server \"\n            \"and Content Management Framework\",\n        },\n        {\n            \"image\": InlineImage(tpl, \"templates/pyramid.png\", height=Mm(10)),\n            \"desc\": \"Pyramid is a lightweight Python web framework aimed at taking \"\n            \"small web apps into big web apps.\",\n        },\n        {\n            \"image\": InlineImage(tpl, \"templates/bottle.png\", height=Mm(10)),\n            \"desc\": \"Bottle is a fast, simple and lightweight WSGI micro web-framework \"\n            \"for Python\",\n        },\n        {\n            \"image\": InlineImage(tpl, \"templates/tornado.png\", height=Mm(10)),\n            \"desc\": \"Tornado is a Python web framework and asynchronous networking \"\n            \"library.\",\n        },\n    ],\n}\n\n# autoescapeæ˜¯å¦å¼€å¯è‡ªåŠ¨è½¬ä¹‰ï¼ŒæŠŠæ¨¡æ¿å˜é‡ä¸­çš„ç‰¹æ®Šå­—ç¬¦è½¬æ¢æˆæ— å®³çš„HTMå®žä½“\njinja_env = jinja2.Environment(autoescape=True)\n# ä½¿ç”¨ä¸Šä¸‹æ–‡æ•°æ®å’Œè‡ªå®šä¹‰çš„jinja2çŽ¯å¢ƒæ¸²æŸ“Wordæ¨¡æ¿\ntpl.render(context, jinja_env)\ntpl.save(\"output/inline_image.docx\")\n</code></pre>\n<p><strong>æ›¿æ¢æ–‡æ¡£ä¸­çš„å›¾ç‰‡</strong></p>\n<p>å¯å¯¹æ–‡æ¡£ä¸­çš„çŽ°æœ‰å›¾ç‰‡è¿›è¡Œæ›¿æ¢ï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹ï¼šå…ˆåœ¨æ¨¡æ¿ä¸­æ’å…¥ä¸€å¼ å ä½å›¾ï¼ŒæŒ‰å¸¸è§„æµç¨‹æ¸²æŸ“æ¨¡æ¿ï¼Œä¹‹åŽå†å°†å ä½å›¾æ›¿æ¢ä¸ºç›®æ ‡å›¾ç‰‡ã€‚è¯¥æ–¹æ³•æ”¯æŒæ‰¹é‡å¤„ç†æ–‡æ¡£å†…çš„æ‰€æœ‰åª’ä½“æ–‡ä»¶ï¼Œä¸”æ›¿æ¢åŽçš„å›¾ç‰‡å°†ç»´æŒåŽŸå ä½å›¾çš„çºµæ¨ªæ¯”ã€‚åœ¨æ¨¡æ¿ä¸­æ’å…¥å›¾ç‰‡æ—¶ï¼Œåªéœ€æŒ‡å®šæ–‡ä»¶åå³å¯ã€‚è¯¥æ›¿æ¢æ“ä½œåŒæ—¶å¯¹é¡µçœ‰ã€é¡µè„šåŠæ­£æ–‡åŒºåŸŸç”Ÿæ•ˆã€‚</p>\n<p>ä¾‹å¦‚ï¼Œæ›¿æ¢å ä½å›¾<code>dummy_header_pic.jpg</code>çš„è¯­æ³•ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"language-python\">tpl.replace_pic('dummy_header_pic.jpg', 'header_pic_i_want.jpg')\n</code></pre>\n<p>æ³¨æ„ï¼Œåœ¨å°†å›¾ç‰‡æ‰‹åŠ¨æ’å…¥Wordæ¨¡æ¿æ—¶ï¼ŒæŸäº›ç‰ˆæœ¬çš„Wordä¼šè‡ªåŠ¨å¯¹å…¶é‡å‘½åå¹¶å­˜å‚¨ã€‚è¿™å¯¼è‡´å›¾ç‰‡åœ¨docxæ–‡ä»¶å†…çš„å®žé™…æ–‡ä»¶åä¸ŽåŽŸæ–‡ä»¶åå®Œå…¨ä¸åŒï¼Œä»Žè€Œå¯èƒ½å¼•å‘æ‰¾ä¸åˆ°å›¾ç‰‡çš„é—®é¢˜ã€‚è‹¥ä¸ç¡®å®šå›¾ç‰‡çš„å…·ä½“ä½ç½®ï¼Œå¯å°†docxæ–‡ä»¶è§†ä¸ºzipåŽ‹ç¼©åŒ…è¿›è¡Œè§£åŽ‹ï¼ŒéšåŽåœ¨<code>word\\document.xml</code>æ–‡ä»¶ä¸­ï¼Œé€šè¿‡æŸ¥æ‰¾<code>pic:nvPicPr</code>èŠ‚ç‚¹æ¥å®šä½å›¾ç‰‡ä¿¡æ¯ã€‚å…·ä½“æ­¥éª¤å¯å‚è€ƒï¼š<a href=\"https://blog.csdn.net/qq_42780731/article/details/106946284\" rel=\"noopener nofollow\" target=\"_blank\">pythonä½¿ç”¨docxtplåº“å¯¹å›¾ç‰‡è¿›è¡Œæ›¿æ¢</a>ã€‚</p>\n<p>åœ¨æ‰¾åˆ°ç›®æ ‡å›¾ç‰‡å¯¹åº”çš„<code>pic:nvPicPr</code>èŠ‚ç‚¹åŽï¼Œå…¶<code>name</code>å±žæ€§çš„å€¼å³ä¸ºå›¾ç‰‡åœ¨æ–‡æ¡£ä¸­å®žé™…å­˜å‚¨çš„æ–‡ä»¶åã€‚æ­¤å¤„çš„æ–‡ä»¶åå¯èƒ½ä¸åŒ…å«å›¾ç‰‡æ ¼å¼åŽç¼€ï¼Œæ›¿æ¢å›¾ç‰‡çš„ç¤ºä¾‹ä»£ç å¯èƒ½å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"language-python\">tpl.replace_pic('Picture 1','header_pic_i_want.jpg')\n</code></pre>\n<h3 id=\"124-å­æ–‡æ¡£\">1.2.4 å­æ–‡æ¡£</h3>\n<p>æ¨¡æ¿å˜é‡å¯åŒ…å«å¤æ‚çš„å­æ–‡æ¡£å¯¹è±¡ï¼Œä¸”èƒ½é€šè¿‡python-docxçš„æ–‡æ¡£æ“ä½œæ–¹æ³•ä»Žé›¶æž„å»ºã€‚å…·ä½“æ­¥éª¤ä¸ºï¼šå…ˆä»Žæ¨¡æ¿å¯¹è±¡ä¸­èŽ·å–å­æ–‡æ¡£å¯¹è±¡ï¼Œå†å°†å…¶å½“ä½œpython-docxæ–‡æ¡£å¯¹è±¡ä½¿ç”¨ã€‚è¯¥åŠŸèƒ½éœ€è¦å®‰è£…é¢å¤–ä¾èµ–ï¼š</p>\n<blockquote>\n<p>pip install \"docxtpl[subdoc]\"</p>\n</blockquote>\n<p>ä»¥ä¸‹ä»£ç å±•ç¤ºäº†å¦‚ä½•åˆ›å»ºå­æ–‡æ¡£ï¼Œå¹¶å°†è¯¥å­æ–‡æ¡£åµŒå…¥åˆ°ä¸»æ¨¡æ¿ä¸­ï¼Œæœ€ç»ˆç”Ÿæˆå¹¶ä¿å­˜æ–°çš„æ–‡æ¡£ï¼š</p>\n<pre><code class=\"language-python\"># https://github.com/elapouya/python-docx-template/blob/master/tests/subdoc.py\nfrom docxtpl import DocxTemplate\nfrom docx.shared import Inches\n\n# data: https://github.com/elapouya/python-docx-template/blob/master/tests/templates/subdoc_tpl.docx\n# 1. åŠ è½½Wordæ¨¡æ¿æ–‡ä»¶ï¼ˆæŒ‡å®šæ¨¡æ¿æ–‡ä»¶è·¯å¾„ï¼‰\ntpl = DocxTemplate(\"templates/subdoc_tpl.docx\")\n\n# 2. åˆ›å»ºä¸€ä¸ªæ–°çš„å­æ–‡æ¡£å¯¹è±¡\nsd = tpl.new_subdoc()\n\n# 3. å‘ä¸‹æ–‡æ¡£ä¸­æ·»åŠ æ®µè½å†…å®¹\np = sd.add_paragraph(\"This is a sub-document inserted into a bigger one\")\np = sd.add_paragraph(\"It has been \")\n# ä¸ºæ–‡æœ¬ç‰‡æ®µè®¾ç½®è‡ªå®šä¹‰æ ·å¼\np.add_run(\"dynamically\").style = \"dynamic\"\np.add_run(\" generated with python by using \")\n# ä¸ºæ–‡æœ¬ç‰‡æ®µè®¾ç½®æ–œä½“æ ·å¼\np.add_run(\"python-docx\").italic = True\np.add_run(\" library\")\n\n# 4. å‘ä¸‹æ–‡æ¡£æ·»åŠ æ ‡é¢˜\nsd.add_heading(\"Heading, level 1\", level=1)\n# å‘ä¸‹æ–‡æ¡£æ·»åŠ å¸¦æ ·å¼çš„æ®µè½ï¼ˆIntenseQuoteæ ·å¼ä¸ºå†…ç½®æ ·å¼ï¼‰\nsd.add_paragraph(\"This is an Intense quote\", style=\"IntenseQuote\")\n\n# 5. å‘ä¸‹æ–‡æ¡£æ’å…¥å›¾ç‰‡\nsd.add_paragraph(\"A picture :\")\nsd.add_picture(\"templates/python_logo.png\", width=Inches(1.25))\n\n# 6. å‘ä¸‹æ–‡æ¡£æ’å…¥è¡¨æ ¼\nsd.add_paragraph(\"A Table :\")\n# åˆ›å»ºè¡¨æ ¼ï¼ˆåˆå§‹1è¡Œ3åˆ—ï¼Œä½œä¸ºè¡¨å¤´ï¼‰\ntable = sd.add_table(rows=1, cols=3)\n# èŽ·å–è¡¨å¤´å•å…ƒæ ¼å¹¶è®¾ç½®å†…å®¹\nhdr_cells = table.rows[0].cells\nhdr_cells[0].text = \"Qty\"\nhdr_cells[1].text = \"Id\"\nhdr_cells[2].text = \"Desc\"\n\n# å®šä¹‰è¡¨æ ¼æ•°æ®\nrecordset = ((1, 101, \"Spam\"), (2, 42, \"Eggs\"), (3, 631, \"Spam,spam, eggs, and ham\"))\n# å¾ªçŽ¯æ·»åŠ æ•°æ®è¡Œåˆ°è¡¨æ ¼\nfor item in recordset:\n    row_cells = table.add_row().cells\n    row_cells[0].text = str(item[0])  # æ•°é‡ï¼ˆè½¬ä¸ºå­—ç¬¦ä¸²ï¼‰\n    row_cells[1].text = str(item[1])  # IDï¼ˆè½¬ä¸ºå­—ç¬¦ä¸²ï¼‰\n    row_cells[2].text = item[2]       # æè¿°\n\ncontext = {\n    \"mysubdoc\": sd,\n}\n\ntpl.render(context)\ntpl.save(\"output/subdoc.docx\")\n</code></pre>\n<p>æ­¤å¤–è‡ªpython-docx-template V0.12.0ç‰ˆæœ¬èµ·ï¼Œæ”¯æŒå°†å·²æœ‰çš„.docxæ–‡ä»¶ä½œä¸ºå­æ–‡æ¡£è¿›è¡Œåˆå¹¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<pre><code class=\"language-python\"># https://github.com/elapouya/python-docx-template/blob/master/tests/merge_docx.py\nfrom docxtpl import DocxTemplate\n\n# data: https://github.com/elapouya/python-docx-template/blob/master/tests/templates\ntpl = DocxTemplate(\"templates/merge_docx_master_tpl.docx\")\nsd = tpl.new_subdoc(\"templates/merge_docx_subdoc.docx\")\n\ncontext = {\n    \"mysubdoc\": sd,\n}\n\ntpl.render(context)\ntpl.save(\"output/merge_docx.docx\")\n</code></pre>\n<h2 id=\"13-è¡¥å……æ“ä½œ\">1.3 è¡¥å……æ“ä½œ</h2>\n<p><img alt=\"\" src=\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5Bpython%5D%20python-docx-template%E6%A8%A1%E6%9D%BF%E5%8C%96Word%E6%96%87%E6%A1%A3%E7%94%9F%E6%88%90%E6%8C%87%E5%8C%97/imgs/4.jpg\" /></p>\n<h3 id=\"131-è½¬ä¹‰æ“ä½œ\">1.3.1 è½¬ä¹‰æ“ä½œ</h3>\n<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œpython-docx-templateä¸ä¼šå¯¹å†…å®¹è¿›è¡Œè½¬ä¹‰ã€‚è¿™æ˜¯å› ä¸ºåœ¨ä½¿ç”¨æ¨¡æ¿è¯­æ³•ä¿®æ”¹Wordæ–‡æ¡£æ—¶ï¼Œåº•å±‚å®žé™…ä¸Šæ˜¯åœ¨å¤„ç†XMLç»“æž„ï¼Œè€Œåƒ<code>&lt;</code>ã€<code>&gt;</code> å’Œ<code>&amp;</code>è¿™æ ·çš„å­—ç¬¦åœ¨XMLä¸­å…·æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œå¿…é¡»ç»è¿‡è½¬ä¹‰æ‰èƒ½æ­£ç¡®æ˜¾ç¤ºã€‚ä»¥ä¸‹æä¾›å‡ ç§å®žçŽ°è½¬ä¹‰çš„æ–¹æ³•ï¼š</p>\n<ol>\n<li>\n<p>ä¸Šä¸‹æ–‡å®šä¹‰æ—¶ä½¿ç”¨<code>R()</code>åŒ…è£¹å†…å®¹ï¼Œæ¨¡æ¿ä¸­æ·»åŠ <code>r</code>æ ‡è®°ï¼š</p>\n<pre><code class=\"language-python\">context = { 'var': R('my text') }\n</code></pre>\n<p>æ¨¡æ¿ä¸­å†™æ³•ï¼š<code>{{r &lt;var&gt; }}</code></p>\n</li>\n<li>\n<p>ä¸Šä¸‹æ–‡ä¿æŒåŽŸå§‹å­—ç¬¦ä¸²ï¼Œæ¨¡æ¿ä¸­ä½¿ç”¨<code>|e</code>è¿‡æ»¤å™¨ï¼š</p>\n<pre><code class=\"language-python\">context = { 'var':'my text' }\n</code></pre>\n<p>æ¨¡æ¿ä¸­å†™æ³•ï¼š<code>{{ &lt;var&gt;|e }}</code></p>\n</li>\n<li>\n<p>ä¸Šä¸‹æ–‡ä½¿ç”¨<code>escape()</code>å‡½æ•°å¤„ç†å†…å®¹ï¼Œæ¨¡æ¿ç›´æŽ¥å¼•ç”¨ï¼š</p>\n<pre><code class=\"language-python\">context = { 'var': escape('my text') }\n</code></pre>\n<p>æ¨¡æ¿ä¸­å†™æ³•ï¼š<code>{{ &lt;var&gt; }}</code></p>\n</li>\n<li>\n<p>è°ƒç”¨<code>render</code>æ–¹æ³•æ—¶å¯ç”¨è‡ªåŠ¨è½¬ä¹‰ï¼Œé»˜è®¤å€¼ä¸º<code>autoescape=False</code>ï¼š</p>\n<pre><code class=\"language-python\">tpl.render(context, autoescape=True)\n</code></pre>\n</li>\n</ol>\n<p>åœ¨æ–‡æ¡£ä¸­æ’å…¥ä»£ç æ¸…å•æ—¶ï¼Œå¦‚æžœéœ€è¦åŒæ—¶è½¬ä¹‰æ–‡æœ¬å¹¶å¤„ç†æ¢è¡Œç¬¦ï¼ˆ<code>\\n</code>ï¼‰ã€æ®µè½ç¬¦ï¼ˆ<code>\\a</code>ï¼‰å’Œæ¢é¡µç¬¦ï¼ˆ<code>\\f</code>ï¼‰ï¼Œå¯ä»¥åœ¨Pythonä»£ç ä¸­ä½¿ç”¨<code>Listing</code>ç±»ã€‚</p>\n<p>ä¾‹å¦‚ï¼š</p>\n<pre><code class=\"language-python\">context = { \n    'mylisting': Listing('the listing\\nwith\\nsome\\nlines \\a and some paragraph \\a and special chars : &lt;&gt;&amp;') \n}\n</code></pre>\n<p>åœ¨æ¨¡æ¿ä¸­ç›´æŽ¥å¼•ç”¨å³å¯ï¼š</p>\n<pre><code>{{ mylisting }}\n</code></pre>\n<p>ä½¿ç”¨<code>Listing()</code>èƒ½å¤Ÿä¿æŒå½“å‰å­—ç¬¦æ ·å¼ï¼Œé™¤éžé‡åˆ°<code>\\a</code>åˆ†éš”ç¬¦ï¼Œå®ƒä¼šåœ¨è¯¥ä½ç½®å¼€å§‹ä¸€ä¸ªæ–°çš„æ®µè½ã€‚</p>\n<p>ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"language-python\"># https://github.com/elapouya/python-docx-template/blob/master/tests/escape.py\nfrom docxtpl import DocxTemplate, R, Listing\n# data: https://github.com/elapouya/python-docx-template/blob/master/tests/templates/escape_tpl.docx\ntpl = DocxTemplate(\"templates/escape_tpl.docx\")\n\ncontext = {\n    \"myvar\": R(\n        '\"less than\" must be escaped : &lt;, this can be done with RichText() or R()'\n    ),\n    \"myescvar\": 'It can be escaped with a \"|e\" jinja filter in the template too : &lt; ',\n    \"nlnp\": R(\n        \"Here is a multiple\\nlines\\nstring\\aand some\\aother\\aparagraphs\",\n        color=\"#ff00ff\",\n    ),\n    \"mylisting\": Listing(\"the listing\\nwith\\nsome\\nlines\\nand special chars : &lt;&gt;&amp; ...\"),\n    \"page_break\": R(\"\\f\"),\n    \"new_listing\": \"\"\"\nThis is a new listing\nHere is a \\t tab\\a\nHere is a page break : \\f\nThat's it\n\"\"\",\n    \"some_html\": (\n        \"HTTP/1.1 200 OK\\n\"\n        \"Server: Apache-Coyote/1.1\\n\"\n        \"Cache-Control: no-store\\n\"\n    ),\n}\n\ntpl.render(context)\ntpl.save(\"output/escape.docx\")\n</code></pre>\n<p>æ­¤å¤–ï¼Œè‹¥éœ€åœ¨æœ€ç»ˆç”Ÿæˆçš„Wordæ–‡æ¡£ä¸­æ˜¾ç¤ºç”±Jinja2æ¸²æŸ“åŽçš„ç‰¹æ®Šå­—ç¬¦<code>%</code>ã€<code>{</code>æˆ–<code>}</code>ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼è¿›è¡Œè½¬ä¹‰ï¼š</p>\n<ul>\n<li>æ˜¾ç¤º<code>%%</code> â†’ ä½¿ç”¨<code>{_% %_}</code></li>\n<li>æ˜¾ç¤º<code>{{ }}</code> â†’ ä½¿ç”¨<code>{_{ }_}</code></li>\n</ul>\n<h3 id=\"132-èŽ·å–æœªå®šä¹‰å˜é‡\">1.3.2 èŽ·å–æœªå®šä¹‰å˜é‡</h3>\n<p>è¦èŽ·å–æ¨¡æ¿æ¸²æŸ“æ—¶æ‰€éœ€çš„æœªå®šä¹‰å˜é‡ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</p>\n<pre><code class=\"language-python\">from docxtpl import DocxTemplate\ntpl = DocxTemplate('template.docx')\n\ncontext = {'name': 'å¼ ä¸‰', 'age': 30}\n# æ³¨æ„ï¼šdepartmentå˜é‡æœªå®šä¹‰\n\n# æ£€æµ‹ç¼ºå¤±å˜é‡\nmissing = tpl.get_undeclared_template_variables(context=context)\nprint(f\"ç¼ºå¤±çš„å˜é‡: {missing}\")\n\n# èŽ·å–æ‰€æœ‰å˜é‡ï¼ˆä¸ä¼ contextï¼‰\nall_vars = tpl.get_undeclared_template_variables()\nprint(f\"æ¨¡æ¿æ‰€æœ‰å˜é‡: {all_vars}\")\n</code></pre>\n<p>æ¨¡æ¿æ–‡æ¡£çš„å†…å®¹åŒ…å«ï¼š</p>\n<pre><code>å§“åï¼š{{name}}\nå¹´é¾„ï¼š{{age}}\néƒ¨é—¨ï¼š{{department}}\n</code></pre>\n<p>è‹¥æœªä¼ é€’ <code>context</code> å‚æ•°ï¼Œè¯¥æ–¹æ³•å°†è¿”å›žæ¨¡æ¿ä¸­æ‰€æœ‰éœ€è¦èµ‹å€¼çš„å˜é‡åçš„é›†åˆã€‚æ­¤ç»“æžœå¯ç”¨äºŽå‘ç”¨æˆ·æç¤ºè¾“å…¥ï¼Œæˆ–å†™å…¥æ–‡ä»¶ä¾›åŽç»­æ‰‹åŠ¨å¤„ç†ã€‚</p>\n<h3 id=\"133-jinjaè‡ªå®šä¹‰è¿‡æ»¤å™¨\">1.3.3 Jinjaè‡ªå®šä¹‰è¿‡æ»¤å™¨</h3>\n<p>Python-docx-templateçš„renderæ–¹æ³•æ”¯æŒä¸€ä¸ªå¯é€‰å‚æ•°jinja_envï¼Œä½œä¸ºå…¶ç¬¬äºŒä¸ªå‚æ•°ã€‚é€šè¿‡ä¼ é€’è‡ªå®šä¹‰çš„JinjaçŽ¯å¢ƒå¯¹è±¡ï¼Œå¯ä»¥å®žçŽ°è‡ªå®šä¹‰è¿‡æ»¤å™¨çš„æ·»åŠ ï¼Œä»Žè€Œçµæ´»æ‰©å±•æ•°æ®å¤„ç†é€»è¾‘ã€‚ä»¥ä¸‹ä¸ºå…·ä½“ç¤ºä¾‹ã€‚</p>\n<p>æ¨¡æ¿wordå†…å®¹å¦‚ä¸‹ï¼š</p>\n<pre><code>=== å§“åå±•ç¤ºå¯¹æ¯” ===\nåŽŸå§‹åå­—: {{ name }}\næ–¹æ³•A (Pythonå¤„ç†): {{ name_upper }}\næ–¹æ³•B (æ¨¡æ¿è¿‡æ»¤å™¨): {{ name|upper }}\n</code></pre>\n<p>å¯¹åº”çš„Pythonæ¸²æŸ“ä»£ç ï¼š</p>\n<pre><code class=\"language-python\">from docxtpl import DocxTemplate\nimport jinja2\n\n# å‡†å¤‡æ•°æ®\ndata = {'name': 'zhangsan'}\n\n# Pythonä¸­å¤„ç†\ndata['name_upper'] = data['name'].upper()\n\n# å®šä¹‰è¿‡æ»¤å™¨\ndef my_upper(text):\n    return text.upper()\n\ndoc = DocxTemplate(\"template.docx\")\n\n#åˆ›å»ºçŽ¯å¢ƒå¹¶æ³¨å†Œè¿‡æ»¤å™¨\nenv = jinja2.Environment()\nenv.filters['upper'] = my_upper \n\ndoc.render(data, env) \ndoc.save(\"output/compare.docx\")\nprint(f\"åŽŸå§‹æ•°æ®: {data['name']}\")\nprint(f\"Pythonå¤„ç†ç»“æžœ: {data['name_upper']}\")\nprint(f\"æ¨¡æ¿è¿‡æ»¤å™¨ç»“æžœ: {data['name'].upper()}\")\n</code></pre>\n<h3 id=\"134-microsoft-word-2016ç‰¹æ®Šè¡Œä¸ºè¯´æ˜Ž\">1.3.4 Microsoft Word 2016ç‰¹æ®Šè¡Œä¸ºè¯´æ˜Ž</h3>\n<p>MS Word 2016ä¼šå¿½ç•¥æ–‡æ¡£ä¸­çš„åˆ¶è¡¨ç¬¦ï¼Œè¿™æ˜¯è¯¥ç‰ˆæœ¬ç‰¹æœ‰çš„æƒ…å†µã€‚ç±»ä¼¼LibreOfficeæˆ–WordPadç­‰å…¶ä»–ç¼–è¾‘å·¥å…·åˆ™æ— æ­¤é—®é¢˜ã€‚åŒæ ·ï¼Œä»¥Jinja2æ ‡ç­¾å¼€å¤´ä¸”å¸¦æœ‰å‰å¯¼ç©ºæ ¼çš„è¡Œï¼Œå…¶ç©ºæ ¼ä¹Ÿä¼šè¢«å¿½ç•¥ã€‚</p>\n<p>ä¸ºè§£å†³ä¸Šè¿°é—®é¢˜ï¼Œå¯ä½¿ç”¨<code>RichText</code>è¿›è¡Œå¤„ç†ï¼š</p>\n<pre><code class=\"language-python\">tpl.render({\n    'test_space_r': RichText('          '),\n    'test_tabs_r': RichText(5 * '\\t'),\n})\n</code></pre>\n<p>åœ¨æ¨¡æ¿ä¸­ï¼Œé€šè¿‡<code>{{r ... }}</code>è¯­æ³•è°ƒç”¨ï¼š</p>\n<pre><code>{{r test_space_r}} ç©ºæ ¼å°†è¢«ä¿ç•™\n{{r test_tabs_r}} åˆ¶è¡¨ç¬¦å°†æ­£å¸¸æ˜¾ç¤º\n</code></pre>\n<h1 id=\"2-å‚è€ƒ\">2 å‚è€ƒ</h1>\n<ul>\n<li><a href=\"https://www.cnblogs.com/luohenyueji/p/19479110\" target=\"_blank\">åŸºäºŽpython-docxåº“çš„Wordæ–‡æ¡£è‡ªåŠ¨å¤„ç†å…¨è§£</a></li>\n<li><a href=\"https://github.com/elapouya/python-docx-template\" rel=\"noopener nofollow\" target=\"_blank\">python-docx-template</a></li>\n<li><a href=\"https://docxtpl.readthedocs.io/\" rel=\"noopener nofollow\" target=\"_blank\">python-docx-template doc</a></li>\n<li><a href=\"https://blog.csdn.net/qq_42780731/article/details/106946284\" rel=\"noopener nofollow\" target=\"_blank\">pythonä½¿ç”¨docxtplåº“å¯¹å›¾ç‰‡è¿›è¡Œæ›¿æ¢</a></li>\n</ul>\n\n</div>\n<div id=\"MySignature\">\n    <p>æœ¬æ–‡æ¥è‡ªåšå®¢å›­ï¼Œä½œè€…ï¼š<a href=\"https://www.cnblogs.com/luohenyueji/\" target=\"_blank\">è½ç—•çš„å¯’å‡</a>ï¼Œè½¬è½½è¯·æ³¨æ˜ŽåŽŸæ–‡é“¾æŽ¥ï¼š<a href=\"https://www.cnblogs.com/luohenyueji/p/19503461\" target=\"_blank\">https://www.cnblogs.com/luohenyueji/p/19503461</a></p>\n\n<div style=\"text-align: center;\">\n    <img src=\"https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/wechat/content/%E5%8A%A0%E6%B2%B9%E9%B8%AD.gif\" />\n</div>\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-19 18:51</span>&nbsp;\n<a href=\"https://www.cnblogs.com/luohenyueji\">è½ç—•çš„å¯’å‡</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">16</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "MAF快速入门（12）主工作流+子工作流",
      "link": "https://www.cnblogs.com/edisontalk/p/-/quick-start-on-maf-chatper12",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/edisontalk/p/-/quick-start-on-maf-chatper12\" id=\"cb_post_title_url\" title=\"发布于 2026-01-19 18:30\">\n    <span>MAF快速入门（12）主工作流+子工作流</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                    <div id=\"cnblogs_post_description\" style=\"display: none;\">\n        <img alt=\"MAF快速入门（12）主工作流+子工作流\" class=\"desc_img\" src=\"https://img2024.cnblogs.com/blog/381412/202601/381412-20260116201534655-550888663.png\" />\n        在实际业务场景中，往往需要在主工作流中根据工单类型分发或移交到不同的标准化子流程中进行后续处理。本文介绍了MAF中主工作流 + 子工作流的工作模式，最后通过一个企业客服中心处理投诉工单的案例介绍了这种模式的代码实现。\n    </div>\n<div class=\"blogpost-body blogpost-body-html\" id=\"cnblogs_post_body\">\n<p><span><span>大家好，我是Edison。</span></span></p>\n<p><span><span>最近我一直在跟着圣杰的《<a class=\"normal_text_link mp_article_text_link\" href=\"https://mp.weixin.qq.com/s?__biz=MzA4NzQzNTg4Ng==&amp;mid=2651744458&amp;idx=1&amp;sn=139f7584e81aeecd0945133bdc2b4791&amp;scene=21#wechat_redirect\" rel=\"noopener nofollow\" target=\"_blank\"><span>.NET+AI智能体开发进阶</span></a><span>》课程学习MAF开发多智能体工作流，我强烈推荐你也上车跟我一起出发！</span></span></span></p>\n<p><span><a class=\"normal_text_link mp_article_text_link\" href=\"https://www.cnblogs.com/edisontalk/p/-/quick-start-on-maf-chatper11\" target=\"_blank\"><span>上一篇</span></a><span>，我们学习了MAF中如何进行并行工作流<span>。本篇，我们来了解下在MAF中如何开启 主工作流 + 自工作流 的模式，相信这会是大家可能会碰到的场景。</span></span></span></p>\n<h1><strong>1 子工作流模式介绍</strong></h1>\n<p><span><span><span><span><span><span>在实际业务场景中，往往需要在主工作流中根据工单类型分发或移交到不同的标准化子流程中进行后续处理<span>。</span></span></span></span></span></span></span></p>\n<p><span><span><span><span><span><span>在MAF中，我们可以使用 Sub-Worklfow 模式来实现这个目的<span>，如下代码片段所示。</span></span></span></span></span></span></span></p>\n<p><span><span><span><span><span><span>首先，将子工作流转换为一个Executor：</span></span></span></span></span></span></p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">var</span> logisticsSubExecutor =<span style=\"color: rgba(0, 0, 0, 1);\"> \n  logisticsSubWorkflow.BindAsExecutor(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">LogisticsSubWorkflow</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> productQualitySubExecutor =<span style=\"color: rgba(0, 0, 0, 1);\"> \n  productQualitySubWorkflow.BindAsExecutor(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">ProductQualitySubWorkflow</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>);</pre>\n</div>\n<p><span><span><span><span><span><span>然后，构建主工作流并根据条件路由到子工作流Executor：</span></span></span></span></span></span></p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">var</span> mainWorkflow = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> WorkflowBuilder(classifierExecutor)\n    .AddEdge</span>&lt;ComplaintProcessingRecord&gt;<span style=\"color: rgba(0, 0, 0, 1);\">(classifierExecutor, productQualitySubExecutor, \n        condition: record </span>=&gt; record.Category == <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">产品质量</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    .AddEdge</span>&lt;ComplaintProcessingRecord&gt;<span style=\"color: rgba(0, 0, 0, 1);\">(classifierExecutor, logisticsSubExecutor, \n        condition: record </span>=&gt; record.Category == <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">物流问题</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    .AddEdge(productQualitySubExecutor, complianceExecutor)\n    .AddEdge(logisticsSubExecutor, complianceExecutor)\n    .AddEdge(complianceExecutor, sentimentExecutor)\n    .WithOutputFrom(sentimentExecutor)\n    .Build();</span></pre>\n</div>\n<p><span><span><span><span><span><span><span>这样就实现了：<span><strong>主工作流进行分类转发，自工作流进行详细处理</strong><span>。</span></span></span></span></span></span></span></span></span></p>\n<h1><strong>2 主工作流+子工作流实验案例</strong></h1>\n<p><span><span><span><span><span><span><span><span><span><span>假设我们是一个企业的客服中心，每天都会收到大量的工单，需要根据工单类型（比如是 产品质量话题 还是 物流话题）分发到不同的标准化子流程去做后续处理，最后生成一个用户友好 且 满足合规要求 的回复给用户。</span></span></span></span></span></span></span></span></span></span></p>\n<p><span><span><span><span><span><span><span><span><span><span><span>因此，我们的目标是：配置&nbsp;<span>1个主工作流 + 2个子工作流<span>&nbsp;来覆盖这个需求。</span></span></span></span></span></span></span></span></span></span></span></span></span></p>\n<h3><strong><span><span>2.1 关键依赖包引入</span></span></strong></h3>\n<p><span><span><span><span><span><span><span><span><span><span><span><span><span><span>在今天的这个案例中，我们仍然创建了一个.NET控制台应用程序，安装了以下NuGet包：</span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>\n<ul class=\"list-paddingleft-1\">\n<li><span>Microsoft.Agents.AI.OpenAI</span></li>\n<li><span>Microsoft.Agents.AI.Workflows</span></li>\n<li><span>Microsoft.Extensions.AI.OpenAI</span></li>\n</ul>\n<h3><span><span>2.2 定义数据传输模型</span></span></h3>\n<p><span><span>首先，我们定义一下在这个工作流中需要生成传递的数据模型：</span></span></p>\n<p><span><span>投诉数据模型 及 共享状态</span></span></p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">namespace</span><span style=\"color: rgba(0, 0, 0, 1);\"> SubWorkflow.Models;\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> 共享状态：投诉处理记录（各执行器会更新此对象）</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">internal</span> <span style=\"color: rgba(0, 0, 255, 1);\">class</span><span style=\"color: rgba(0, 0, 0, 1);\"> ComplaintProcessingRecord\n{\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> CustomerComplaint Original { <span style=\"color: rgba(0, 0, 255, 1);\">get</span>; <span style=\"color: rgba(0, 0, 255, 1);\">set</span><span style=\"color: rgba(0, 0, 0, 1);\">; }\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">string</span> Category { <span style=\"color: rgba(0, 0, 255, 1);\">get</span>; <span style=\"color: rgba(0, 0, 255, 1);\">set</span>; } = <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">未分类</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">string</span> Handler { <span style=\"color: rgba(0, 0, 255, 1);\">get</span>; <span style=\"color: rgba(0, 0, 255, 1);\">set</span>; } = <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">待分配</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> List&lt;<span style=\"color: rgba(0, 0, 255, 1);\">string</span>&gt; ProcessingSteps { <span style=\"color: rgba(0, 0, 255, 1);\">get</span>; <span style=\"color: rgba(0, 0, 255, 1);\">set</span>; } = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\">();\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">string</span> AIGeneratedResponse { <span style=\"color: rgba(0, 0, 255, 1);\">get</span>; <span style=\"color: rgba(0, 0, 255, 1);\">set</span>; } = <span style=\"color: rgba(128, 0, 0, 1);\">\"\"</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">string</span> ComplianceStatus { <span style=\"color: rgba(0, 0, 255, 1);\">get</span>; <span style=\"color: rgba(0, 0, 255, 1);\">set</span>; } = <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">待审核</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">string</span> SentimentScore { <span style=\"color: rgba(0, 0, 255, 1);\">get</span>; <span style=\"color: rgba(0, 0, 255, 1);\">set</span>; } = <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">未评估</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n}\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> 投诉数据模型</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">internal</span><span style=\"color: rgba(0, 0, 0, 1);\"> record CustomerComplaint(\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">string</span><span style=\"color: rgba(0, 0, 0, 1);\"> OrderId,\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">string</span><span style=\"color: rgba(0, 0, 0, 1);\"> CustomerName,\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">string</span><span style=\"color: rgba(0, 0, 0, 1);\"> ComplaintText,\n    DateTime SubmittedAt\n);</span></pre>\n</div>\n<h3><span><span>2.3 定义产品质量处理子工作流</span></span></h3>\n<p><strong><strong><span><span>（1）<span>问题评估<span>：</span></span></span></span></strong></strong><span>封装产品质量评估的逻辑，这里仅仅做演示用无实际逻辑。</span></p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">internal</span> <span style=\"color: rgba(0, 0, 255, 1);\">sealed</span> <span style=\"color: rgba(0, 0, 255, 1);\">class</span> ProductEvaluationExecutor() : Executor&lt;ComplaintProcessingRecord, ComplaintProcessingRecord&gt;<span style=\"color: rgba(0, 0, 0, 1);\">(nameof(ProductEvaluationExecutor))\n{\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">override</span> ValueTask&lt;ComplaintProcessingRecord&gt; HandleAsync(ComplaintProcessingRecord record, IWorkflowContext context, CancellationToken cancellationToken = <span style=\"color: rgba(0, 0, 255, 1);\">default</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    {\n        Console.WriteLine(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">🔍 正在评估产品质量问题...</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n        record.ProcessingSteps.Add(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">[产品评估] 检测到屏幕外观缺陷，符合质量问题定义</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n        record.Handler </span>= <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">产品质量团队</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> ValueTask.FromResult(record);\n    }\n}</span></pre>\n</div>\n<p><strong><span><span>（2）<span>退/换货判定<span>：</span></span></span></span></strong><span>负责判定是退货 还是 换货 处理。</span></p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">internal</span> <span style=\"color: rgba(0, 0, 255, 1);\">sealed</span> <span style=\"color: rgba(0, 0, 255, 1);\">class</span> ReturnPolicyExecutor() : Executor&lt;ComplaintProcessingRecord, ComplaintProcessingRecord&gt;<span style=\"color: rgba(0, 0, 0, 1);\">(nameof(ReturnPolicyExecutor))\n{\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">override</span> ValueTask&lt;ComplaintProcessingRecord&gt; HandleAsync(ComplaintProcessingRecord record, IWorkflowContext context, CancellationToken cancellationToken = <span style=\"color: rgba(0, 0, 255, 1);\">default</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    {\n        Console.WriteLine(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">📦 判定退换货政策...</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> daysFromOrder = (DateTime.Now -<span style=\"color: rgba(0, 0, 0, 1);\"> record.Original.SubmittedAt).Days;\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> (daysFromOrder &lt;= <span style=\"color: rgba(128, 0, 128, 1);\">7</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n        {\n            record.ProcessingSteps.Add(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">[退换货判定] 符合7天无理由退货政策，批准全额退款</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n        }\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">else</span><span style=\"color: rgba(0, 0, 0, 1);\">\n        {\n            record.ProcessingSteps.Add(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">[退换货判定] 超过退货期限，建议换货或部分补偿</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n        }\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> ValueTask.FromResult(record);\n    }\n}</span></pre>\n</div>\n<p><span><strong><strong><span><span>（3）<span>AI回复<span>：</span></span></span></span></strong></strong><span>在投诉内容和判定结果的基础上生成友好的回复返回给用户。</span></span></p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">internal</span> <span style=\"color: rgba(0, 0, 255, 1);\">sealed</span> <span style=\"color: rgba(0, 0, 255, 1);\">class</span> AIResponseGeneratorExecutor(IChatClient chatClient) : Executor&lt;ComplaintProcessingRecord, ComplaintProcessingRecord&gt;<span style=\"color: rgba(0, 0, 0, 1);\">(nameof(AIResponseGeneratorExecutor))\n{\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">override</span> <span style=\"color: rgba(0, 0, 255, 1);\">async</span> ValueTask&lt;ComplaintProcessingRecord&gt; HandleAsync(ComplaintProcessingRecord record, IWorkflowContext context, CancellationToken cancellationToken = <span style=\"color: rgba(0, 0, 255, 1);\">default</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    {\n        Console.WriteLine(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">🤖 AI 正在生成客户回复...</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> prompt = $<span style=\"color: rgba(128, 0, 0, 1);\">@\"</span><span style=\"color: rgba(128, 0, 0, 1);\">你是专业的客服主管。根据以下投诉处理信息，生成一封正式、有同理心的客户回复邮件（150字内）：\n\n客户：{record.Original.CustomerName}\n订单号：{record.Original.OrderId}\n投诉内容：{record.Original.ComplaintText}\n处理步骤：\n{string.Join(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>\\n<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">, record.ProcessingSteps)}</span>\n<span style=\"color: rgba(0, 0, 0, 1);\">\n要求：\n</span><span style=\"color: rgba(128, 0, 128, 1);\">1</span><span style=\"color: rgba(0, 0, 0, 1);\">. 表达歉意和理解\n</span><span style=\"color: rgba(128, 0, 128, 1);\">2</span><span style=\"color: rgba(0, 0, 0, 1);\">. 说明处理方案\n</span><span style=\"color: rgba(128, 0, 128, 1);\">3</span><span style=\"color: rgba(0, 0, 0, 1);\">. 提供后续联系方式\n</span><span style=\"color: rgba(128, 0, 128, 1);\">4</span>. 语气真诚、专业<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">;</span>\n\n        <span style=\"color: rgba(0, 0, 255, 1);\">var</span> response = <span style=\"color: rgba(0, 0, 255, 1);\">await</span><span style=\"color: rgba(0, 0, 0, 1);\"> chatClient.GetResponseAsync(prompt, cancellationToken: cancellationToken);\n        record.AIGeneratedResponse </span>= response.Text ?? <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">AI 生成失败</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n        record.ProcessingSteps.Add($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">[AI 回复] 已生成客户回复模板（{record.AIGeneratedResponse.Length}字）</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> record;\n    }\n}</span></pre>\n</div>\n<p><span>最后，构建子工作流并将其转换为一个Executor以便后续集成到主工作流中：</span></p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">var</span> productEvalExecutor = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> ProductEvaluationExecutor();\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> returnPolicyExecutor = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> ReturnPolicyExecutor();\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> aiResponseExecutor = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> AIResponseGeneratorExecutor(chatClient);\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> productQualitySubWorkflow = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> WorkflowBuilder(productEvalExecutor)\n    .AddEdge(productEvalExecutor, returnPolicyExecutor)\n    .AddEdge(returnPolicyExecutor, aiResponseExecutor)\n    .WithOutputFrom(aiResponseExecutor)\n    .Build();\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> productQualitySubExecutor =<span style=\"color: rgba(0, 0, 0, 1);\"> \n  productQualitySubWorkflow.BindAsExecutor(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">ProductQualitySubWorkflow</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>);</pre>\n</div>\n<h3><span><span>2.4 定义物流问题处理子工作流</span></span></h3>\n<p><strong><strong><span><span>（1）<span>物流追踪<span>：</span></span></span></span></strong></strong><span>封装物流查询逻辑，这里仅仅做演示用无实际逻辑。</span></p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">internal</span> <span style=\"color: rgba(0, 0, 255, 1);\">sealed</span> <span style=\"color: rgba(0, 0, 255, 1);\">class</span> LogisticsTrackingExecutor() : Executor&lt;ComplaintProcessingRecord, ComplaintProcessingRecord&gt;<span style=\"color: rgba(0, 0, 0, 1);\">(nameof(LogisticsTrackingExecutor))\n{\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">override</span> ValueTask&lt;ComplaintProcessingRecord&gt; HandleAsync(ComplaintProcessingRecord record, IWorkflowContext context, CancellationToken cancellationToken = <span style=\"color: rgba(0, 0, 255, 1);\">default</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    {\n        Console.WriteLine(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">🚚 正在查询物流信息...</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n        record.ProcessingSteps.Add(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">[物流追踪] 包裹在中转站滞留3天，当前状态：运输中</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n        record.Handler </span>= <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">物流运营团队</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> ValueTask.FromResult(record);\n    }\n}</span></pre>\n</div>\n<p><strong><strong><span><span>（2）<span>延迟分析<span>：</span></span></span></span></strong></strong><span>封装延迟分析逻辑，这里仅仅做演示用无实际逻辑。</span></p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">internal</span> <span style=\"color: rgba(0, 0, 255, 1);\">sealed</span> <span style=\"color: rgba(0, 0, 255, 1);\">class</span> DelayAnalysisExecutor() : Executor&lt;ComplaintProcessingRecord, ComplaintProcessingRecord&gt;<span style=\"color: rgba(0, 0, 0, 1);\">(nameof(DelayAnalysisExecutor))\n{\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">override</span> ValueTask&lt;ComplaintProcessingRecord&gt; HandleAsync(ComplaintProcessingRecord record, IWorkflowContext context, CancellationToken cancellationToken = <span style=\"color: rgba(0, 0, 255, 1);\">default</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    {\n        Console.WriteLine(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">📊 分析延迟原因...</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n        record.ProcessingSteps.Add(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">[延迟分析] 延迟原因：暴雨导致道路封闭，预计2天内恢复配送</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n        record.ProcessingSteps.Add(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">[补偿方案] 提供50元优惠券 + 免运费</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> ValueTask.FromResult(record);\n    }\n}</span></pre>\n</div>\n<p><span>最后，构建子工作流并将其转换为一个Executor以便后续集成到主工作流中：</span></p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">var</span> logisticsTrackExecutor = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> LogisticsTrackingExecutor();\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> delayAnalysisExecutor = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> DelayAnalysisExecutor();\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> logisticsAIResponseExecutor = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> AIResponseGeneratorExecutor(chatClient);\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> logisticsSubWorkflow = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> WorkflowBuilder(logisticsTrackExecutor)\n    .AddEdge(logisticsTrackExecutor, delayAnalysisExecutor)\n    .AddEdge(delayAnalysisExecutor, logisticsAIResponseExecutor)\n    .WithOutputFrom(logisticsAIResponseExecutor)\n    .Build();\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> logisticsSubExecutor =<span style=\"color: rgba(0, 0, 0, 1);\"> \n  logisticsSubWorkflow.BindAsExecutor(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">LogisticsSubWorkflow</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>);</pre>\n</div>\n<h3><strong><span><span>2.5 构建主工作流</span></span></strong></h3>\n<p>现在开始构建主工作流：</p>\n<p>Step1: 获取ChatClient</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">var</span> chatClient = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> OpenAIClient(\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> ApiKeyCredential(openAIProvider.ApiKey),\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">new</span> OpenAIClientOptions { Endpoint = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> Uri(openAIProvider.Endpoint) })\n    .GetChatClient(openAIProvider.ModelId)\n    .AsIChatClient();</span></pre>\n</div>\n<p>Step2: 创建工单分类<span>Executor,&nbsp;</span>合规审核Executor 以及 情绪评估Executor</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> 1. 工单分类执行器</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">internal</span> <span style=\"color: rgba(0, 0, 255, 1);\">sealed</span> <span style=\"color: rgba(0, 0, 255, 1);\">class</span> ComplaintClassifierExecutor() : Executor&lt;ComplaintProcessingRecord, ComplaintProcessingRecord&gt;<span style=\"color: rgba(0, 0, 0, 1);\">(nameof(ComplaintClassifierExecutor))\n{\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">override</span> ValueTask&lt;ComplaintProcessingRecord&gt; HandleAsync(ComplaintProcessingRecord record, IWorkflowContext context, CancellationToken cancellationToken = <span style=\"color: rgba(0, 0, 255, 1);\">default</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    {\n        Console.WriteLine(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">🏷️ 正在分类投诉类型...</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> 简单规则分类（实际可用 AI 分类）</span>\n        <span style=\"color: rgba(0, 0, 255, 1);\">if</span> (record.Original.ComplaintText.Contains(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">划痕</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>) || record.Original.ComplaintText.Contains(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">质量</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>) || record.Original.ComplaintText.Contains(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">退货</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">))\n        {\n            record.Category </span>= <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">产品质量</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n        }\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">else</span> <span style=\"color: rgba(0, 0, 255, 1);\">if</span> (record.Original.ComplaintText.Contains(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">延迟</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>) || record.Original.ComplaintText.Contains(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">物流</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>) || record.Original.ComplaintText.Contains(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">配送</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">))\n        {\n            record.Category </span>= <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">物流问题</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n        }\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">else</span><span style=\"color: rgba(0, 0, 0, 1);\">\n        {\n            record.Category </span>= <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">其他</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n        }\n        record.ProcessingSteps.Add($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">[分类器] 投诉类型识别为：{record.Category}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> ValueTask.FromResult(record);\n    }\n}\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> 2. 合规审核执行器</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">internal</span> <span style=\"color: rgba(0, 0, 255, 1);\">sealed</span> <span style=\"color: rgba(0, 0, 255, 1);\">class</span> ComplianceCheckExecutor() : Executor&lt;ComplaintProcessingRecord, ComplaintProcessingRecord&gt;<span style=\"color: rgba(0, 0, 0, 1);\">(nameof(ComplianceCheckExecutor))\n{\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">override</span> ValueTask&lt;ComplaintProcessingRecord&gt; HandleAsync(ComplaintProcessingRecord record, IWorkflowContext context, CancellationToken cancellationToken = <span style=\"color: rgba(0, 0, 255, 1);\">default</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    {\n        Console.WriteLine(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">🛡️ 合规审核中...</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> checks = <span style=\"color: rgba(0, 0, 255, 1);\">new</span> List&lt;<span style=\"color: rgba(0, 0, 255, 1);\">string</span>&gt;<span style=\"color: rgba(0, 0, 0, 1);\">();\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> (record.AIGeneratedResponse.Contains(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">歉意</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>)) checks.Add(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">✅ 包含道歉</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> (record.AIGeneratedResponse.Length &lt;= <span style=\"color: rgba(128, 0, 128, 1);\">300</span>) checks.Add(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">✅ 字数合规</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> (!record.AIGeneratedResponse.Contains(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">法律</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>) &amp;&amp; !record.AIGeneratedResponse.Contains(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">诉讼</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">))\n            checks.Add(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">✅ 无敏感法律词汇</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n\n        record.ComplianceStatus </span>= checks.Count &gt;= <span style=\"color: rgba(128, 0, 128, 1);\">2</span> ? <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">✅ 审核通过</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span> : <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">⚠️ 需人工复审</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n        record.ProcessingSteps.Add($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">[合规审核] {record.ComplianceStatus} - {string.Join(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">, checks)}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> ValueTask.FromResult(record);\n    }\n}\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> 3. 情绪评估执行器（使用 AI）</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">internal</span> <span style=\"color: rgba(0, 0, 255, 1);\">sealed</span> <span style=\"color: rgba(0, 0, 255, 1);\">class</span> SentimentAnalysisExecutor(IChatClient chatClient) : Executor&lt;ComplaintProcessingRecord, ComplaintProcessingRecord&gt;<span style=\"color: rgba(0, 0, 0, 1);\">(nameof(SentimentAnalysisExecutor))\n{\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">override</span> <span style=\"color: rgba(0, 0, 255, 1);\">async</span> ValueTask&lt;ComplaintProcessingRecord&gt; HandleAsync(ComplaintProcessingRecord record, IWorkflowContext context, CancellationToken cancellationToken = <span style=\"color: rgba(0, 0, 255, 1);\">default</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    {\n        Console.WriteLine(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">😊 AI 情绪评估中...</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> prompt = $<span style=\"color: rgba(128, 0, 0, 1);\">@\"</span><span style=\"color: rgba(128, 0, 0, 1);\">分析以下客服回复的情绪基调，用一个词概括（如：友好、专业、冷淡、热情）：\n\n{record.AIGeneratedResponse}\n\n只返回一个词，不要解释。</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> response = <span style=\"color: rgba(0, 0, 255, 1);\">await</span><span style=\"color: rgba(0, 0, 0, 1);\"> chatClient.GetResponseAsync(prompt, cancellationToken: cancellationToken);\n        record.SentimentScore </span>= response.Text?.Trim() ?? <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">中性</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n        record.ProcessingSteps.Add($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">[情绪评估] AI 评估语气为：{record.SentimentScore}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> record;\n    }\n}</span></pre>\n</div>\n<p>NOTE：前面的子工作流均生成了AI回复，这里需要对其进行合规审核以防止不合规的回复到用户那里。</p>\n<p><span>Step3: 创建主工作流</span></p>\n<p>&nbsp;</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">var</span> classifierExecutor = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> ComplaintClassifierExecutor();\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> complianceExecutor = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> ComplianceCheckExecutor();\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> sentimentExecutor = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> SentimentAnalysisExecutor(chatClient);\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> 主工作流：分类 → 条件路由到子流程 → 合规 → 情绪</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">var</span> mainWorkflow = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> WorkflowBuilder(classifierExecutor)\n    .AddEdge</span>&lt;ComplaintProcessingRecord&gt;<span style=\"color: rgba(0, 0, 0, 1);\">(classifierExecutor, productQualitySubExecutor,\n        condition: record </span>=&gt; record.Category == <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">产品质量</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    .AddEdge</span>&lt;ComplaintProcessingRecord&gt;<span style=\"color: rgba(0, 0, 0, 1);\">(classifierExecutor, logisticsSubExecutor,\n        condition: record </span>=&gt; record.Category == <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">物流问题</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    .AddEdge(productQualitySubExecutor, complianceExecutor)\n    .AddEdge(logisticsSubExecutor, complianceExecutor)\n    .AddEdge(complianceExecutor, sentimentExecutor)\n    .WithOutputFrom(sentimentExecutor)\n    .Build();\nConsole.OutputEncoding </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> Encoding.UTF8;\nConsole.WriteLine(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">✅ Main + Sub Workflow 构建完成</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>);</pre>\n</div>\n<h3><span><span>2.6 测试工作流</span></span></h3>\n<p><span><span>定义投诉的工单内容如下：<span><span>这是一个<span>产品质量相关<span>的投诉。</span></span></span></span></span></span></p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">var</span> processingRecord = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> ComplaintProcessingRecord \n{ \n    Original </span>= <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> CustomerComplaint(\n        OrderId: </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">ORD-2025-8821</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">,\n        CustomerName: </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">张先生</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">,\n        ComplaintText: </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">收到的手机屏幕有明显划痕，要求退货退款</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">,\n        SubmittedAt: DateTime.Now)\n};</span></pre>\n</div>\n<p>通过Streaming流式执行：</p>\n<div class=\"cnblogs_code\">\n<pre>Console.WriteLine(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">🚀 开始执行投诉处理流水线...</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\nConsole.WriteLine(</span><span style=\"color: rgba(0, 0, 255, 1);\">new</span> <span style=\"color: rgba(0, 0, 255, 1);\">string</span>(<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">━</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 128, 1);\">60</span><span style=\"color: rgba(0, 0, 0, 1);\">));\n</span><span style=\"color: rgba(0, 0, 255, 1);\">await</span> <span style=\"color: rgba(0, 0, 255, 1);\">using</span> (<span style=\"color: rgba(0, 0, 255, 1);\">var</span> streaming = <span style=\"color: rgba(0, 0, 255, 1);\">await</span><span style=\"color: rgba(0, 0, 0, 1);\"> InProcessExecution.StreamAsync(mainWorkflow, processingRecord))\n{\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">await</span> <span style=\"color: rgba(0, 0, 255, 1);\">foreach</span> (WorkflowEvent evt <span style=\"color: rgba(0, 0, 255, 1);\">in</span><span style=\"color: rgba(0, 0, 0, 1);\"> streaming.WatchStreamAsync())\n    {\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">switch</span><span style=\"color: rgba(0, 0, 0, 1);\"> (evt)\n        {\n            </span><span style=\"color: rgba(0, 0, 255, 1);\">case</span><span style=\"color: rgba(0, 0, 0, 1);\"> ExecutorInvokedEvent started:\n                Console.WriteLine($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">\\n🔹 {started.ExecutorId} 开始执行</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n                </span><span style=\"color: rgba(0, 0, 255, 1);\">break</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n            </span><span style=\"color: rgba(0, 0, 255, 1);\">case</span> ExecutorCompletedEvent completed when completed.Data <span style=\"color: rgba(0, 0, 255, 1);\">is</span><span style=\"color: rgba(0, 0, 0, 1);\"> ComplaintProcessingRecord rec:\n                Console.WriteLine($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">   共享状态更新 → 处理步骤数：{rec.ProcessingSteps.Count}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n                </span><span style=\"color: rgba(0, 0, 255, 1);\">break</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n            </span><span style=\"color: rgba(0, 0, 255, 1);\">case</span> WorkflowOutputEvent outputEvt when outputEvt.Data <span style=\"color: rgba(0, 0, 255, 1);\">is</span><span style=\"color: rgba(0, 0, 0, 1);\"> ComplaintProcessingRecord finalRecord:\n                Console.WriteLine(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">\\n</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span> + <span style=\"color: rgba(0, 0, 255, 1);\">new</span> <span style=\"color: rgba(0, 0, 255, 1);\">string</span>(<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">━</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 128, 1);\">60</span><span style=\"color: rgba(0, 0, 0, 1);\">));\n                Console.WriteLine(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">🎉 投诉处理完成！最终处理记录:\\n</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n                Console.WriteLine(JsonSerializer.Serialize(finalRecord));\n                Console.WriteLine(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">\\n📝 处理步骤详情：</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n                </span><span style=\"color: rgba(0, 0, 255, 1);\">foreach</span> (<span style=\"color: rgba(0, 0, 255, 1);\">var</span> step <span style=\"color: rgba(0, 0, 255, 1);\">in</span><span style=\"color: rgba(0, 0, 0, 1);\"> finalRecord.ProcessingSteps)\n                {\n                    Console.WriteLine($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">  {step}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n                }\n\n                Console.WriteLine(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">\\n💬 AI 生成的客户回复：</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n                Console.WriteLine(</span><span style=\"color: rgba(0, 0, 255, 1);\">new</span> <span style=\"color: rgba(0, 0, 255, 1);\">string</span>(<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">─</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 128, 1);\">60</span><span style=\"color: rgba(0, 0, 0, 1);\">));\n                Console.WriteLine(finalRecord.AIGeneratedResponse);\n                Console.WriteLine(</span><span style=\"color: rgba(0, 0, 255, 1);\">new</span> <span style=\"color: rgba(0, 0, 255, 1);\">string</span>(<span style=\"color: rgba(128, 0, 0, 1);\">'</span><span style=\"color: rgba(128, 0, 0, 1);\">─</span><span style=\"color: rgba(128, 0, 0, 1);\">'</span>, <span style=\"color: rgba(128, 0, 128, 1);\">60</span><span style=\"color: rgba(0, 0, 0, 1);\">));\n                </span><span style=\"color: rgba(0, 0, 255, 1);\">break</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n        }\n    }\n}</span></pre>\n</div>\n<p><span><span>测试结果如下图所示：</span></span></p>\n<p><span><span>首先，可以通过监控日志发现准确地进入到了产品质量子流程：</span></span></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/381412/202601/381412-20260116201359984-901569605.png\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></p>\n<p><span>其次，最后由AI生成的回复内容也很友好，同时也满足合规审核的要求：</span></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/381412/202601/381412-20260116201408277-1480451793.png\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></p>\n<h1><strong><span>3 小结</span></strong></h1>\n<p>本文介绍了MAF中主工作流 + 子工作流的工作模式，最后通过一个企业客服中心处理投诉工单的案例介绍了这种模式的代码实现。</p>\n<p><span><span>需要注意的是：</span></span></p>\n<ul class=\"list-paddingleft-1\">\n<li><span><span>建议每个子工作流都是用<span><strong>标准统一</strong><span>的状态模型，以便在主工作流中复用 和 传递。</span></span></span></span></li>\n<li><span><span>建议每个子工作流只保持3~4个步骤，<span><strong>单一职责</strong><span>在工作流中同样适用！</span></span></span></span></li>\n</ul>\n<p>下一篇，我们将继续学习MAF中智能体的几种常见编排模式 -&nbsp;顺序，并发 和 移交。</p>\n<h1>示例源码</h1>\n<p>GitHub:&nbsp;<a href=\"https://github.com/EdisonTalk/MAFD\" rel=\"noopener nofollow\" target=\"_blank\">https://github.com/EdisonTalk/MAFD</a></p>\n<h1>参考资料</h1>\n<p><span><span>圣杰，《<a href=\"https://www.cnblogs.com/sheng-jie/p/19200934\" target=\"_blank\">.NET + AI 智能体开发进阶</a>》（推荐指数：★★★★★）</span></span></p>\n<p><span><span>Microsoft Learn，<span>《<a href=\"https://learn.microsoft.com/en-us/agent-framework/overview/agent-framework-overview?wt.mc_id=MVP_397012\" rel=\"noopener nofollow\" target=\"_blank\">Agent Framework Tutorials</a>》</span></span></span></p>\n<div><span><span>&nbsp;</span></span></div>\n<p style=\"text-align: center;\"><img alt=\"\" src=\"https://images.cnblogs.com/cnblogs_com/edisonchou/1647700/o_200902144330EdisonTalk-Footer.jpg\" /></p>\n<div id=\"Copyright\">\n<p>作者：<span style=\"text-decoration: underline;\">爱迪生</span></p>\n<p>出处：<a href=\"https://edisontalk.cnblogs.com\" target=\"_blank\" title=\"from\">https://edisontalk.cnblogs.com</a></p>\n<p>本文版权归作者和博客园共有，欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出原文链接。</p>\n</div>\n</div>\n<div id=\"MySignature\">\n    <div align=\"center\"><a href=\"https://weibo.com/u/2068032061?s=6uyXnP\" target=\"_blank\"><img border=\"0\" src=\"http://service.t.sina.com.cn/widget/qmd/2068032061/d643d182/10.png\" /></a></div>\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-19 18:30</span>&nbsp;\n<a href=\"https://www.cnblogs.com/edisontalk\">EdisonZhou</a>&nbsp;\n阅读(<span id=\"post_view_count\">0</span>)&nbsp;\n评论(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">收藏</a>&nbsp;\n<a href=\"\">举报</a>\n</div>"
    },
    {
      "title": "快速掌握Linux启动过程：像看接力赛一样简单",
      "link": "https://www.cnblogs.com/LDdOps/p/19501725",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/LDdOps/p/19501725\" id=\"cb_post_title_url\" title=\"发布于 2026-01-19 14:59\">\n    <span>快速掌握Linux启动过程：像看接力赛一样简单</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<p>大家好，我是刘叨叨，一个致力于让碎片化技术系统性的运维人。</p>\n<p>每次按下服务器电源，就像观看一场精心编排的<strong>六棒接力赛</strong>——从冷冰冰的硬件到灵动的命令行界面，每一棒都至关重要。今天，咱们就拆解这场“比赛”，让你彻底看清Linux的启动“魔法”。</p>\n<h2 id=\"一为什么要看懂这场接力赛\">一、为什么要看懂这场“接力赛”？</h2>\n<p>因为当服务器启动“掉棒”时，你需要一眼看出：</p>\n<ul>\n<li>🚫 <strong>哪一棒出了问题</strong>：是硬件没准备好？引导程序迷路了？还是服务启动“吵架”了？</li>\n<li>🔧 <strong>该派谁去修</strong>：该重启硬件、重装引导，还是调整服务配置？</li>\n<li>⚡ <strong>如何让下次跑更快</strong>：哪个环节拖了后腿？</li>\n</ul>\n<p>懂原理，就是拿到了系统内部的“赛事转播权”。</p>\n<h2 id=\"二全景速览六棒精彩接力\">二、全景速览：六棒精彩接力</h2>\n<p>因为当服务器启动“掉棒”时，你需要一眼</p>\n<h2 id=\"三逐棒详解关键选手与技术要点\">三、逐棒详解：关键选手与技术要点</h2>\n<h3 id=\"-第一棒biosuefi--硬件检录员\">🎯 第一棒：BIOS/UEFI —— “硬件检录员”</h3>\n<p><strong>核心任务</strong>：确保所有“运动员”（硬件）状态良好，并确定第一位起跑者。</p>\n<p><strong>工作三件事</strong>：</p>\n<ol>\n<li><strong>硬件自检（POST）</strong>：快速检查CPU、内存等核心部件。</li>\n<li><strong>读取启动顺序</strong>：按设定顺序（如：硬盘→U盘→网络）寻找可启动设备。</li>\n<li><strong>交接控制权</strong>：将找到的第一个启动设备的<strong>前512字节</strong>（MBR）或EFI系统分区，交给下一棒。</li>\n</ol>\n<h3 id=\"️-第二棒grub2--赛道引导员\">🗺️ 第二棒：GRUB2 —— “赛道引导员”</h3>\n<p><strong>它的角色</strong>： Grand Unified Bootloader，即<strong>系统启动的导航菜单</strong>。</p>\n<p><strong>三大职责</strong>：</p>\n<ol>\n<li><strong>显示菜单</strong>：让你选择不同内核版本或操作系统。</li>\n<li><strong>加载内核</strong>：把内核镜像（<code>/boot/vmlinuz-版本号</code>）读到内存。</li>\n<li><strong>加载 initramfs</strong>：把临时根文件系统也准备好。</li>\n</ol>\n<p><strong>关键文件与操作</strong>：</p>\n<ul>\n<li><strong>配置文件</strong>：<code>/boot/grub2/grub.cfg</code>（<strong>自动生成</strong>，一般别直接改）。</li>\n<li><strong>用户配置</strong>：修改 <code>/etc/default/grub</code> 后，<strong>必须执行</strong>以下命令使配置生效：</li>\n</ul>\n<pre><code># 重新生成GRUB2配置文件\ngrub2-mkconfig -o /boot/grub2/grub.cfg\n</code></pre>\n<p><em>参数解释</em>：<code>-o</code> 指定输出文件。这步操作<strong>至关重要</strong>，否则修改不会生效。</p>\n<h3 id=\"-第三棒linux内核--系统大脑\">🧠 第三棒：Linux内核 —— “系统大脑”</h3>\n<p><strong>内核的启动任务</strong>：</p>\n<ol>\n<li><strong>解压并初始化自己</strong>。</li>\n<li><strong>检测并初始化所有硬件</strong>。</li>\n<li><strong>挂载 initramfs 临时根文件系统</strong>。</li>\n<li><strong>从 initramfs 手中接过“指挥权”，准备挂载真正的根文件系统</strong>。</li>\n</ol>\n<p><strong>重要文件</strong>：<code>/boot/vmlinuz-$(uname -r)</code></p>\n<p><strong>查看内核消息</strong>：</p>\n<pre><code># 查看本次启动的所有内核消息（重点看错误）\ndmesg -T --level=err,warn\n</code></pre>\n<p><em>参数解释</em>：<code>-T</code> 显示人类可读的时间戳，<code>--level=err,warn</code> 只显示错误和警告信息，便于快速定位问题。</p>\n<h3 id=\"-第四棒initramfs--全能急救包\">🎒 第四棒：initramfs —— “全能急救包”</h3>\n<p><strong>它是什么</strong>：<strong>一个被加载到内存里的临时根文件系统</strong>。</p>\n<p><strong>为什么需要它</strong>？内核很“专一”，很多事不会干，比如：</p>\n<ul>\n<li>解密被加密的根分区。</li>\n<li>管理复杂的LVM或RAID存储。</li>\n<li>加载特殊硬件（如某些磁盘控制器）的驱动。</li>\n</ul>\n<p><strong>它的使命</strong>：<strong>搞定这些依赖</strong>，把“真正的根文件系统”挂载好，然后功成身退，将控制权交回内核。</p>\n<h3 id=\"-第五棒systemd--超级大管家\">👔 第五棒：systemd —— “超级大管家”</h3>\n<p><strong>一句话</strong>：现代Linux系统的<strong>初始化系统和管家</strong>，负责启动和管理所有服务。</p>\n<p><strong>它上任后</strong>：</p>\n<ol>\n<li>并行启动所有系统和服务进程（所以比老式的<code>init</code>快）。</li>\n<li>管理系统日志、设备、挂载点等。</li>\n</ol>\n<p><strong>管家必备命令</strong>：</p>\n<pre><code># 1. 查看启动耗时总览\nsystemd-analyze\n# 输出示例：Startup finished in 2.3s (kernel) + 10.1s (userspace) = 12.4s\n# 2. 查看哪个服务启动最慢（按耗时排序）\nsystemd-analyze blame --no-pager | head -5\n</code></pre>\n<p><em>参数解释</em>：<code>blame</code> 子命令用于分析各单元的启动时间；<code>--no-pager</code> 表示直接输出全部结果，不启用分页器。</p>\n<h3 id=\"-第六棒登录管理器--前台接待\">🚪 第六棒：登录管理器 —— “前台接待”</h3>\n<p><strong>最后一步</strong>：呈现登录界面，验证身份，为你启动熟悉的Shell（如bash）。</p>\n<ul>\n<li><strong>服务器常用</strong>：文本登录（<code>getty</code>服务）。</li>\n<li><strong>桌面常用</strong>：图形登录（<code>gdm</code>, <code>lightdm</code>等）。</li>\n</ul>\n<p>至此，六棒接力完成，系统就绪，等待你的命令！</p>\n<hr />\n<h2 id=\"四问题诊断当接力赛掉棒时\">四、问题诊断：当接力赛“掉棒”时</h2>\n<h3 id=\"快速定位表\">快速定位表</h3>\n<table>\n<thead>\n<tr>\n<th style=\"text-align: left;\">故障现象</th>\n<th style=\"text-align: left;\">可能“掉棒”环节</th>\n<th style=\"text-align: left;\">初步检查动作</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: left;\">通电后毫无反应，黑屏</td>\n<td style=\"text-align: left;\"><strong>第一棒 (BIOS/UEFI)或硬件</strong></td>\n<td style=\"text-align: left;\">检查电源、连接，听主板提示音</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">出现grub&gt;或GRUB rescue&gt;提示</td>\n<td style=\"text-align: left;\"><strong>第二棒 (GRUB2)</strong></td>\n<td style=\"text-align: left;\">引导文件损坏，需使用安装盘修复</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">屏幕卡住，显示Kernel Panic</td>\n<td style=\"text-align: left;\"><strong>第三棒 (内核)</strong></td>\n<td style=\"text-align: left;\">检查dmesg输出，常见于驱动问题</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">卡在 “Starting services…” 或某服务名</td>\n<td style=\"text-align: left;\"><strong>第五棒 (systemd)</strong></td>\n<td style=\"text-align: left;\">使用journalctl -xe查看该服务详细日志</td>\n</tr>\n</tbody>\n</table>\n<hr />\n<h2 id=\"五让接力赛跑更快启动优化小贴士\">五、让接力赛跑更快：启动优化小贴士</h2>\n<h3 id=\"1-找出慢吞吞的服务\">1. 找出“慢吞吞”的服务</h3>\n<pre><code># 查看启动最慢的5个服务\nsystemd-analyze blame | head -5\n</code></pre>\n<h3 id=\"2-关掉不必要的自动启动\">2. 关掉不必要的“自动启动”</h3>\n<pre><code># 查看所有开机自启的服务\nsystemctl list-unit-files --state=enabled | grep service\n# 禁用某个不必要服务（例如：蓝牙在服务器上通常不用）\nsudo systemctl disable bluetooth.service\n</code></pre>\n<h3 id=\"3-善用日志洞察全局\">3. 善用日志，洞察全局</h3>\n<pre><code># 查看本次启动的所有日志\njournalctl -b --no-pager | less\n# 参数解释：`-b` 仅限本次启动，`--no-pager` 直接输出，`less` 用于分页浏览\n</code></pre>\n<h2 id=\"六总结\">六、总结</h2>\n<p>Linux启动，是一场分工明确的六棒接力：</p>\n<ol>\n<li><strong>BIOS/UEFI</strong> 检录硬件，选定起跑盘。</li>\n<li><strong>GRUB2</strong> 提供菜单，加载内核与急救包。</li>\n<li><strong>内核</strong> 驱动硬件，奠定系统基石。</li>\n<li><strong>initramfs</strong> 搞定依赖，挂载真根分区。</li>\n<li><strong>systemd</strong> 并行启动，拉起所有服务。</li>\n<li><strong>登录管理器</strong> 验证身份，恭候大驾。</li>\n</ol>\n<p>理解这个过程，你就握住了排查启动问题的“地图”。下次服务器启动异常，你就能精准判断问题区间，高效解决。</p>\n<hr />\n<p>关注【刘叨叨趣味运维】，用有趣的方式，啃下最硬核的技术。咱们下期见！</p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-19 14:59</span>&nbsp;\n<a href=\"https://www.cnblogs.com/LDdOps\">刘叨叨趣味运维</a>&nbsp;\n阅读(<span id=\"post_view_count\">66</span>)&nbsp;\n评论(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">收藏</a>&nbsp;\n<a href=\"\">举报</a>\n</div>"
    },
    {
      "title": "Python 学习笔记：编程环境配置",
      "link": "https://www.cnblogs.com/owlman/p/19501012",
      "published": "",
      "description": "<h2 class=\"post-title\">\n            <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/owlman/p/19501012\" id=\"cb_post_title_url\" title=\"发布于 2026-01-19 12:00\">\n    <span>Python 学习笔记：编程环境配置</span>\n    \n\n</a>\n\n        </h2>\n        <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<blockquote>\n<p>[!NOTE] 笔记说明</p>\n<p>根据之前在《[[关于Python的学习]]》一文中的规划，这篇笔记中将会具体记录配置 Python 编程环境所需执行的操作步骤，这些操作将着重于解决以下问题：</p>\n<ul>\n<li>如何根据具体需求来配置运行时环境；</li>\n<li>如何基于具体的项目来搭建编程环境；</li>\n</ul>\n</blockquote>\n<h2 id=\"安装-python-解释器\">安装 Python 解释器</h2>\n<p>正所谓“工欲善其事，必先利其器”。虽然 Python 被广泛认为是一门跨平台编程语言，但这种跨平台能力并非语言本身直接提供，而是依赖于各个平台上对应的 Python 运行时实现（runtime implementation）来完成的。换言之，Python 代码能够在不同操作系统平台上运行，前提是目标平台上安装有相应的 Python 解释器及其运行环境。就当前主流的应用场景来说，我们所使用的 Python 运行时实现大致可分为以下两种体系：</p>\n<ul>\n<li>\n<p><strong>官方实现体系</strong>：该体系由 Python 官方社区主导开发和维护，其核心是 CPython 解释器，同时包含标准库，以及围绕其构建的包管理与环境管理工具，例如 <code>pip</code>、<code>venv</code>，以及近年来逐渐流行的 <code>uv</code> 等。这一体系强调对语言规范（PEP）的忠实实现，是 Python 语言事实上的参考实现，也是绝大多数第三方扩展默认支持的运行环境。</p>\n</li>\n<li>\n<p><strong>Conda 实现体系</strong>：该体系由 Anaconda 公司主导维护，在提供 Python 解释器和标准库的同时，引入了以 <code>conda</code> 命令行工具为核心的包管理与环境管理机制。<code>conda</code> 命令不仅可以管理 Python 的第三方扩展（包或框架），还能够统一管理 C/C++、Fortran 等编译型依赖，因此在科学计算和数据分析领域具有较强的工程优势。此外，Conda 官方维护了一套经过严格测试的第三方扩展仓库，使其在可复现性和环境一致性方面表现尤为突出。</p>\n</li>\n</ul>\n<p>因此，在正式开始学习 Python 这门编程语言之前，我们首先需要根据自身的使用场景（学习、工程开发、科研计算等）选择合适的运行时实现体系，并正确配置 Python 解释器及其运行环境。这一步骤虽然看似琐碎，却直接决定了后续学习与开发过程的顺畅程度。下面，让我们先从 Python 解释器的安装开始介绍。</p>\n<h3 id=\"官方-python-解释器\">官方 Python 解释器</h3>\n<p>如果读者是 Python 这门编程语言本身的初学者，那么使用严格按照该语言官方规范（PEP）来实现的 CPython 解释器无疑是最稳妥的选择。下面，就让我们根据 Python 官方社区提供的指导文档，来了解如何在不同操作系统平台上安装这一解释器。</p>\n<ul>\n<li>\n<p>如果读者选择使用 <code>apt</code>、<code>pacman</code>、<code>Homebrew</code> 这一类软件包管理器来安装 Python 解释器及其运行环境，那么通常是不需要根据自己所在设备的 CPU 架构与操作系统平台来选择要安装的软件包的。但这种方式通常都是以 Shell 命令的方式来使用的，这就意味着读者必须要了解各种操作系统使用的包管理器，以及这项包管理器在安装该运行时环境时所需要执行的 shell 命令。下面是各种常见的包管理器安装官方 Python 解释器及其运行环境的命令。</p>\n<pre><code class=\"language-bash\"># 在 Ubuntu、Deepin 等以 Debian 项目为基础的 Linux 发行版中，\n# 我们使用的是 apt 包管理器，这里需要安装的是 Python 3.x，\n# 以及用于将 python3 命令设置为默认 python 命令的 python-is-python3：\nsudo apt install python3 python-is-python3\n\n# 在以 Arch Linux 项目为基础的 Linux 发行版中，\n# 我们使用的是 pacman 包管理器，它安装 Python 3.x 的命令如下：\nsudo pacman -S python3   \n\n# 在 macOS 操作系统中，我们可以使用 Homebrew 包管理器来安装 Python 3.x：\nbrew install python3\n\n# 在 Windows 7 以上的 Microsoft Windows 操作系统中，\n# 我们可使用 Scoop 这款包管理器来安装 Python 3.x：\nscoop install python\n</code></pre>\n</li>\n<li>\n<p>如果读者选择在 macOS 或 Windows 这样的图形化操作系统中以 GUI 的方式来安装官方 Python 解释器及其运行环境，那么就需先找到并下载与自己所在设备的 CPU 架构与操作系统相匹配的二进制安装包（在 Windows 中通常是一个扩展名为<code>.exe</code>的文件，在 macOS 中则是扩展名为<code>.img</code>的文件），然后启动它的图形化向导来完成相关的安装操作。例如在 Windows 系统中，Python 3.x 运行时环境的安装步骤主要如下。</p>\n<ol>\n<li>\n<p>访问 Python 官方网站的下载页面，并根据自身所在设备的 CPU 架构及其所运行的 Windows 版本来下载相应的二进制安装包，其官方下载页面如图 1 所示。</p>\n \n<p><img alt=\"img\" class=\"lazyload\" /></p>\n<p><strong>图 1</strong>：Python 官方下载页面</p>\n</li>\n<li>\n<p>待上述二进制安装包被成功下载到本地计算机上之后，以系统管理员的身份打开该安装包，以便启动其图形化安装向导，如图 2 所示。</p>\n \n<p><img alt=\"img\" class=\"lazyload\" /></p>\n<p><strong>图 2</strong>：Python 图形化安装向导</p>\n<p>上述界面中，我们需要先勾选“Add Python.exe to PATH”选项，然后再单击“Customize installation”选项。这个选项用于将 Python 加入到系统的 PATH 环境变量中，这样会让我们日后直接在系统的终端环境中使用 Python 运行时环境，否则我们在后面的操作中可能就需要在该环境变量中手动添加路径。</p>\n</li>\n<li>\n<p>在图形化向导的第二个页面中，我们需要选择要安装的 Python 组件，其中的选项“Documentation”表示安装 Python 的帮助文档；选项“pip”表示安装 Python 的第三方包管理工具；选项“tcl/tk and IDLE”表示安装 Python 的集成开发环境；选项“Python test suite”表示安装 Python 的标准测试套件，后两个选项则表示允许版本更新。在这里，我们会建议读者勾选该页面上列出的所有选项，然后单击“Next”按钮继续下一步的安装设置，如图 3 所示。</p>\n \n<p><img alt=\"img\" class=\"lazyload\" /></p>\n<p><strong>图 3</strong>：选择要安装的组件</p>\n</li>\n<li>\n<p>在图形化向导的第三个页面中，我们需要设置 Python 的安装路径。通常情况下，读者只需要保持该页面上所有的默认选项即可，当然，也可以选择单击“Browse”按钮，设置好自己想要安装路径，如图 4 所示。</p>\n \n<p><img alt=\"img\" class=\"lazyload\" /></p>\n<p><strong>图 4</strong>：设置安装路径</p>\n</li>\n<li>\n<p>在设置好安装路径之后，我们就可以单击“Install”按钮正式开始执行 Python 运行时环境的安装操作，读者只需等待安装向导中的进度条显示完成即可，如图 5 所示。</p>\n \n<p><img alt=\"img\" class=\"lazyload\" /></p>\n<p><strong>图 5</strong>：安装进度条</p>\n</li>\n<li>\n<p>待上述安装过程完成之后，我们就会看到如图 6 所示界面，安装过程已经顺利完成，读者可以通过单击“Close”按钮来退出这个图形化安装向导。</p>\n  \n<p><img alt=\"img\" class=\"lazyload\" /></p>\n<p><strong>图 6</strong>：安装结束界面</p>\n</li>\n</ol>\n</li>\n<li>\n<p>最后，如果我们想验证 Python 运行时环境是否已经安装成功，就只需要在自己所在的操作系统中打开 Shell 终端环境，例如 Windows 系统下的 Powershell 或 Unix-like 系统下的 Bash、Zsh 等命令行终端程序，并在其中执行<code>python</code>命令（如果计算机上同时安装了多个版本的 Python 解释器，可能需要在命令中指定版本号），如果看到如图 7 所示的脚本交互界面，其中会显示当前 Python 解释器及其运行环境的相关信息，这证明它已经成功安装到了我们的计算机上。</p>\n  \n<p><img alt=\"img\" class=\"lazyload\" /></p>\n<p><strong>图 7</strong>：Python 的脚本交互界面</p>\n</li>\n</ul>\n<h3 id=\"anaconda-python-解释器\">Anaconda Python 解释器</h3>\n<p>如果读者使用 Python 的场景主要集中在科学计算、数据科学等领域，且不想花费大量的时间在配置运行环境之类的问题上，那么安装基于 Conda 体系的 Python 运行时实现无疑是一个更为合适的选择。下面，就让我们根据 Anaconda 官方网站提供的指导文档，来了解如何在不同操作系统平台上安装基于这一体系的 Python 运行时实现。</p>\n<ul>\n<li>\n<p>如果读者选择在 macOS 或 Windows 这样的图形化操作系统中以 GUI 的方式来安装 Anaconda Python 解释器及其运行环境，那么就需先找到并下载与自己所在设备的 CPU 架构与操作系统相匹配的二进制安装包（在 Windows 中通常是一个扩展名为<code>.exe</code>的文件，在 macOS 中则是扩展名为<code>.pkg</code>的文件），然后启动它的图形化向导来完成相关的安装操作。例如在 Windows 10/11 系统中，其安装步骤主要如下。</p>\n<ol>\n<li>\n<p>在使用网页浏览器中打开 Anaconda 官方网站的下载页面（如图 8 所示）之后，读者会在该页面中看到“Anaconda Distribution”与“Miniconda Distribution”两个选项，它们之间的区别在于前者除了 Python 解释器及其运行环境之外，还包含了 Anaconda 官方维护的绝大多数第三方扩展，而后者则只包含 Python 解释器及其运行环境。考虑到我们选择 Conda 体系的目的是节省配置运行时环境的时间，在这里应该下载的是“Anaconda Distribution”。</p>\n \n<p><img alt=\"img\" class=\"lazyload\" /></p>\n<p><strong>图 8</strong>：Anaconda 的官方下载页面</p>\n</li>\n<li>\n<p>待上述二进制安装包被成功下载到本地计算机上之后，用该安装包启动其图形化安装向导，其界面如图 9 所示。</p>\n \n<p><img alt=\"img\" class=\"lazyload\" /></p>\n<p><strong>图 9</strong>：Anaconda 的图形化安装向导</p>\n</li>\n<li>\n<p>根据图形化向导一路单击“Next”或“I Agree”按钮，直到出现如图 10 所示界面，这里需要读者选择 Anaconda 的安装路径，通常情况下，读者只需要保持该页面上所有的默认选项即可，当然，也可以选择单击“Browse”按钮，设置好自己想要安装路径。</p>\n \n<p><img alt=\"img\" class=\"lazyload\" /></p>\n<p><strong>图 10</strong>：设置安装路径</p>\n</li>\n<li>\n<p>在设置好安装路径之后，继续单击“Next”按钮，就会看到如图 11 所示界面，上面有四个可勾选的配置项，分别是“Create Shartouls（创建快捷方式）”、“Add Anaconda3 to my PATH environment variable（将 Anaconda3 添加到系统的 PATH 环境变量中）”、\"Register Anaconda3 as the system Python 3.x（将 Anaconda3 注册为默认的 Python 3.x 版本）”，以及\"Clear the packages cache upon completion（安装完成后清除缓存）\"，读者可根据需要勾选这些选项，然后单击“Install”按钮正式开始执行 Anaconda Python 运行时环境的安装操作，读者只需等待安装向导中的进度条显示完成即可。</p>\n \n<p><img alt=\"img\" class=\"lazyload\" /></p>\n<p><strong>图 11</strong>：安装进度条</p>\n</li>\n<li>\n<p>待上述安装过程完成之后，我们就会看安装结束界面，接下来只需单击“Next”按钮就可退出这个图形化安装向导，如图 12 所示。</p>\n \n<p><img alt=\"img\" class=\"lazyload\" /></p>\n<p><strong>图 12</strong>：安装结束界面</p>\n</li>\n</ol>\n</li>\n<li>\n<p>如果读者选择在 Linux 这样的 Unix-like 操作系统中安装 Anaconda Python 解释器及其运行环境，那么就需先找到并下载与自己所在设备的 CPU 架构与操作系统相匹配的安装脚本文件（通常是一个扩展名为<code>.sh</code>的文件），然后启动它的图形化向导来完成相关的安装操作。例如在 CentOS 7 操作系统中，其安装步骤主要如下。</p>\n<ol>\n<li>\n<p>在 Bash、Zsh 这样的 Shell 应用中执行刚刚下载到的安装脚本，执行命令如下：</p>\n<pre><code class=\"language-bash\"># 此处的 &lt;version&gt; 用于指代 Anaconda 的版本号\nbash Anaconda3-&lt;version&gt;-Linux-x86_64.sh\n</code></pre>\n</li>\n<li>\n<p>在执行上述命令之后，就会看到一个字符界面的安装向导，读者可按以下提示执行安装操作：</p>\n<ul>\n<li><strong><strong>阅读许可协议</strong></strong>：可按空格键翻页，并通过输入 yes 接受协议。</li>\n<li><strong>选择安装路径</strong>：默认路径为 <code>~/anaconda3</code>，推荐直接按回车键确认，保留默认设置（避免权限问题）。如需自定义路径，应输入绝对路径（如 <code>/opt/anaconda3</code>，但需管理员权限）。</li>\n<li><strong>是否初始化 conda</strong>：安装向导会询问 Do you wish the installer to initialize Anaconda3 by running conda init?，建议输入 yes。此步骤会自动将 conda 添加到 Shell 配置文件（如 <code>.bashrc</code> 或 <code>.zshrc</code>），避免手动配置环境变量。</li>\n</ul>\n</li>\n<li>\n<p>待安装完成后，关闭当前终端并重新打开，或执行以下命令可使上述配置生效：</p>\n<pre><code class=\"language-bash\">source ~/.bashrc  # 若使用 zsh，替换为 source ~/.zshrc\n</code></pre>\n</li>\n</ol>\n</li>\n<li>\n<p>最后，如果我们想验证 Python 运行时环境是否已经安装成功，就只需要在自己所在的操作系统中打开 Shell 终端环境，例如 Windows 系统下的 Powershell 或 Unix-like 系统下的 Bash、Zsh 等命令行终端程序，并在其中执行<code>conda --version</code>查看版本信息，或执行<code>python</code>命令打开脚本交互界面，查看其中显示的 Python 运行环境信息，如果信息如图 13 所示，这证明它已经成功安装到了我们的计算机上。</p>\n  \n<p><img alt=\"img\" class=\"lazyload\" /></p>\n<p><strong>图 13</strong>： Anaconda 的脚本交互界面</p>\n</li>\n</ul>\n<p>在成功安装了 Python 解释器之后，我们接下来就可以根据自己要运行的项目/应用来配置 Python 的运行时环境了。然而，由于近些年 Python 在数据科学、人工智能等领域的爆炸式发展，如今市场上同时存在着多个版本的 Python 解释器，每个版本的解释器还存在着多种不同的实现，这让运行时环境的配置工作变得比十年前要复杂得多。</p>\n<h2 id=\"从虚拟环境开始创建项目\">从虚拟环境开始创建项目</h2>\n<p>为了应对近年来由人工智能应用迅猛发展所带来的各种变化，Python 社区在运行时环境的配置方面逐渐确立起了一个极其重要的项目配置原则：“<strong>任何非一次性的小脚本开发，都应当从创建虚拟环境开始</strong>\"。该原则是工程师们从长期工作实践中总结出来的经验，因为他们发现绝大多数新手在使用 Python 过程中所遇到的大部分头痛问题，都并非因为语言本身，而是来自对其运行时环境及其依赖管理机制的误解。具体来说就是：在现有条件下，如果我们直接在当前系统或用户权限下使用 Python 解释器来开发具体的项目，大概率就会遇到依赖管理方面的问题。</p>\n<p>这是因为 Python 的第三方扩展默认是“全局可见”的，当我们在执行诸如<code>pip install numpy</code>这样的命令时，它所安装的扩展包会被放入当前 Python 解释器所对应的<code>site-packages</code>目录中。这意味着：</p>\n<ul>\n<li>当前 Python 解释器所运行的所有 Python 项目都会“看到”这个包；</li>\n<li>如果升级、降级或删除某个包，就会影响到当前 Python 解释器运行的<strong>所有项目</strong>。</li>\n</ul>\n<p>在语言的初学阶段，这样做也许一时半会并不会带来明显的问题；但一旦进入到工程化的环境中，我们就会陆续遇到以下情形，风险也就随之暴露了出来：</p>\n<ul>\n<li>昨天还能跑的项目，今天什么都没改却报错了。</li>\n<li>因新项目升级了相关的依赖，导致旧项目无法运行；</li>\n<li>不同的项目依赖同一扩展包的<strong>不同版本</strong>，导致冲突；</li>\n<li>教程代码在你本地无法复现，但在作者环境中可以正常运行；</li>\n</ul>\n<p>这些问题都是因为项目中的<em>依赖关系缺乏隔离</em>。那么为什么虚拟环境可以解决这个问题呢？事实上，虚拟环境（Virtual Environment）并不是某种“高级技巧”，它本质上就是在 <strong>为每一个 Python 项目提供一套彼此独立、互不干扰的运行时环境</strong> 。即在一个虚拟环境中：</p>\n<ul>\n<li>Python 解释器是“看似独立”的；</li>\n<li>第三方扩展只对当前环境可见；</li>\n<li>依赖版本可以被精确锁定；</li>\n<li>项目可以被完整复现。</li>\n</ul>\n<p>换言之，虚拟环境解决的并不是“如何安装更多库”的问题，而是如何让一个项目在时间、空间和他人机器上保持可控性。从工程角度看，这一点甚至比语法熟练程度更加重要。</p>\n<p>在当前的 Python 生态中，虚拟环境的实现方式并不唯一，但它们的目标高度一致。下面，让我们来具体介绍几种基于虚拟环境来创建 Python 开发项目的常见解决方案。</p>\n<h3 id=\"python-官方解决方案\">Python 官方解决方案</h3>\n<p>Python 官方在 3.3 及其之后的版本中引入了内置的虚拟环境管理工具，它允许我们先通过<code>venv</code>模块来创建虚拟环境，然后在该虚拟环境中使用 pip 管理项目依赖。该工具链在 Windows、macOS 以及各种 Linux 发行版上均可使用，用该工具创建项目的步骤如下。</p>\n<ol>\n<li>\n<p>在 Bash、Zsh 这类的命令行终端中进入到目标项目所在的目录中（例如<code>examples/say_hello</code>目录），然后执行<code>python -m venv &lt;虚拟环境目录&gt;</code>命令创建一个新的虚拟环境，并使用<code>source &lt;虚拟环境目录&gt;/bin/activate</code>命令激活该虚拟环境，具体如图 14 所示。</p>\n \n<p><img alt=\"img\" class=\"lazyload\" /></p>\n<p><strong>图 14</strong>：Python 官方虚拟环境创建与激活</p>\n<p><strong>请注意</strong>：<code>&lt;虚拟环境目录&gt;</code>除了是虚拟环境存放运行时环境文件的目录之外，它的最底层目录名也是该虚拟环境的唯一标识符，读者可根据自己的需要自行设置。另外，如果读者使用的命令行终端是 Windows 系统下的 PowerShell 或 CMD，那么激活虚拟环境的命令就应改为<code>.\\&lt;虚拟环境目录&gt;\\Scripts\\Activate.ps1</code>或<code>.\\\\&lt;虚拟环境目录&gt;\\Scripts\\activate.bat</code>。</p>\n</li>\n<li>\n<p>在成功创建并激活了虚拟环境之后，Shell 会优先使用虚拟环境中的 pip 可执行文件，因此此时执行的 pip 命令将仅作用于当前虚拟环境，而不会影响系统中的其他 Python 项目。接下来，我们就可以在虚拟环境中独立安装 Python 的第三方扩展了。例如，如果读者现在到<code>examples/say_hello</code>目录下执行<code>pip install numpy</code>命令，就可以在该项目的<code>&lt;虚拟环境目录&gt;</code>下的<code>lib/&lt;python-version&gt;/site-packages</code>子目录中看到新安装的 numpy 包了，如图 15 所示。</p>\n \n<p><img alt=\"img\" class=\"lazyload\" /></p>\n<p><strong>图 15</strong>：Python 官方虚拟环境中的第三方扩展</p>\n<p><strong>请注意</strong>：<code>&lt;python-version&gt;</code>是 Python 解释器的版本号，例如<code>python3.11</code>、<code>python3.14</code>等。</p>\n</li>\n</ol>\n<p>关于具体如何使用 pip 来管理 Python 项目中的第三方扩展，我将会将在《[[具体项目实践]]》这篇笔记中做详细讲解，在这里就先暂且按下不表了。</p>\n<h3 id=\"anaconda-解决方案\">Anaconda 解决方案</h3>\n<p>在基于 Conda 体系的 Python 运行时实现中，基于虚拟环境来创建项目，并管理项目依赖的解决方案则要简单得多，基本上只靠 <code>conda</code> 命令就可以完成。而该工具同样在 Windows、macOS 以及各种 Linux 发行版上均可使用，用该工具创建项目的步骤如下。</p>\n<ol>\n<li>\n<p>在命令行终端中进入到目标项目所在的目录中（例如<code>examples/say_hello</code>目录），然后执行<code>conda create -n &lt;虚拟环境名称&gt; python=&lt;python-version&gt;</code>命令创建一个新的虚拟环境，具体如图 16 所示。</p>\n \n<p><img alt=\"img\" class=\"lazyload\" /></p>\n<p><strong>图 16</strong>：Anaconda 虚拟环境创建与激活</p>\n<p><strong>请注意</strong>：<code>&lt;虚拟环境名称&gt;</code>是虚拟环境的唯一标识符，另外，<code>python=&lt;python-version&gt;</code>是可选参数，其中的<code>&lt;python-version&gt;</code>用于指定当前项目要使用的 Python 版本号，例如<code>python=3.11</code>、<code>python=3.14</code>等。</p>\n</li>\n<li>\n<p>在成功创建虚拟环境之后，我们接下来就可以使用<code>conda env list</code>命令来查看当前计算机中所有基于 Conda 体系的虚拟环境及其所在的目录，如图 17 所示。</p>\n \n<p><img alt=\"img\" class=\"lazyload\" /></p>\n<p><strong>图 17</strong>：Anaconda 虚拟环境列表</p>\n<p><strong>请注意</strong>：与 Python 官方解决方案不同的是，基于 Conda 体系的虚拟环境并不被保存在当前项目所在的目录中，而是被保存在 Anaconda 安装目录下的<code>envs</code>子目录中。当然，这也意味着同一个 Conda 虚拟环境通常会被多个项目复用，因此在具体的项目实践中需要格外注意环境命名与用途划分。</p>\n</li>\n<li>\n<p>我们接下来要做的就是使用<code>conda activate &lt;虚拟环境名称&gt;</code>命令来激活刚刚创建的虚拟环境，然后就可以使用<code>conda install &lt;扩展包名称&gt;</code>命令来安装 Python 的第三方扩展了。例如，通过执行<code>conda install numpy</code>命令来安装 numpy 扩展，如图 18 所示。</p>\n \n<p><img alt=\"img\" class=\"lazyload\" /></p>\n<p><strong>图 18</strong>：在 Anaconda 虚拟环境中安装第三方扩展</p>\n</li>\n<li>\n<p>如果上述命令执行顺利，我们就可以通过执行<code>conda list &lt;扩展包名称&gt;</code>命令来确认刚刚安装的扩展包是否已经成功安装到了虚拟环境中，如图 19 所示。</p>\n \n<p><img alt=\"img\" class=\"lazyload\" /></p>\n<p><strong>图 19</strong>：在 Anaconda 虚拟环境中查看第三方扩展</p>\n</li>\n</ol>\n<p>同样的，关于具体如何使用 Conda 来管理 Python 项目的第三方扩展及其依赖关系，我将会在《[[具体项目实践]]》这篇笔记中做详细讲解，在这里就先暂且按下不表了。</p>\n<h3 id=\"第三方解决方案\">第三方解决方案</h3>\n<p>考虑到基于 Conda 体系的解决方案毕竟来自第三方实现，会导致 Python 的解释器在版本上会有些落后于官方，而 Python 官方提供的 pip 又缺乏管理复杂依赖关系的能力（例如它在移除项目的某一直接依赖时，无法自动移除其间接依赖）。近些年来，Python 社区为了解决此类问题又陆续发展出了基于 <code>uv</code> 、<code>poetry</code>等第三方工具来创建 Python 项目并管理项目依赖的解决方案。由于这些解决方案既可作用于官方的 Python 解释器，也可作用于 Conda 体系中的 Python 解释器，因此它们在项目实践中也变得越来越流行。下面，我就以 <code>uv</code> 这款工具为例，来介绍一下如何使用这类工具创建 Python 项目。</p>\n<ol>\n<li>\n<p>如果读者现在还没有安装 <code>uv</code>，可先通过在命令行终端中执行<code>pip install uv</code>命令来安装这款工具，然后再使用<code>uv --version</code>命令来查看其版本信息，如果信息如图 20 所示，这证明它已经成功安装到了我们的计算机上。</p>\n \n<p><img alt=\"img\" class=\"lazyload\" /></p>\n<p><strong>图 20</strong>：uv 的安装与确认</p>\n</li>\n<li>\n<p>在成功安装了 <code>uv</code> 工具之后，我们就可以使用该工具来创建 Python 项目了。例如，如果读者现在到<code>examples/say_hello</code>目录下执行<code>uv init</code>命令，就会看到该目录被初始化成了一个标准的 Python 项目，我们可以使用<code>ls</code>命令来查看一下这个项目的目录结构，如图 21 所示。</p>\n \n<p><img alt=\"img\" class=\"lazyload\" /></p>\n<p><strong>图 21</strong>：使用 uv 初始化的 Python 项目</p>\n<p>正如读者所见，<code>uv</code> 这款工具会为该项目创建以下一系列文件：</p>\n<ul>\n<li><code>pyproject.toml</code>：该文件用于保存 Python 项目的基本配置；</li>\n<li><code>README.md</code>：该文件用于保存 Python 项目的说明性信息；</li>\n<li><code>main.py</code>：该文件用于保存 Python 项目的入口代码。</li>\n<li><code>.python-version</code>：该文件用于保存 Python 项目的 Python 解释器版本号。</li>\n</ul>\n</li>\n<li>\n<p>在成功完成 Python 项目的初始化工作之后，我们接下来就可以使用<code>uv add &lt;扩展包名称&gt;</code>命令来安装 Python 的第三方扩展了。例如，通过执行<code>uv add numpy</code>命令来安装 numpy 扩展，如图 22 所示。</p>\n \n<p><img alt=\"img\" class=\"lazyload\" /></p>\n<p><strong>图 22</strong>：使用 uv 安装项目的第三方扩展</p>\n<p>正如读者所见，<code>uv</code> 这款工具会在第一次为项目安装扩展时自动为其创建虚拟环境，并将其依赖关系写入到<code>pyproject.toml</code>文件中，以便日后自动处理项目中的依赖关系。</p>\n</li>\n<li>\n<p>如果上述命令执行顺利，我们就可以通过执行<code>uv pip list</code>命令来确认刚刚安装的扩展包是否已经成功安装到了虚拟环境中，如图 23 所示。</p>\n \n<p><img alt=\"img\" class=\"lazyload\" /></p>\n<p><strong>图 23</strong>：使用 uv 查看项目的第三方扩展</p>\n</li>\n</ol>\n<p>当然了，<code>uv</code> 除了可以管理项目中的第三方扩展及其依赖关系之外，甚至还可以为项目指定要使用的 Python 解释器版本号，关于这些高级功能的详细使用方法，我将会在《[[具体项目实践]]》这篇笔记中做详细讲解，读者在这里暂时只需要知道 <code>uv</code> 这款工具的基本使用方法即可。</p>\n<h2 id=\"选择合适的编程工具链\">选择合适的编程工具链</h2>\n<p>从理论的角度上来说，要想编写一个基于 Python 语言及其运行时环境的应用程序，通常只需要使用任意一款纯文本编辑器就可以了。但在具体的项目实践中，为了在工作过程中获得代码的语法高亮与智能补全等功能以提高编码体验，并能方便地使用各种强大的程序调试工具和版本控制工具，我们通常还是会选择使用一款专用的代码编辑器或集成开发环境来完成项目开发。在这里，我个人会倾向于推荐读者使用 Visual Studio Code 编辑器（以下简称 VS Code）来构建所有的项目。读者可以参考下面这篇笔记来学习这款编辑器的安装方法，以及如何将其打造成一款用于编写 Python 应用程序的集成开发环境。</p>\n<blockquote>\n<p>关联笔记：[[VS Code 配置笔记]]：<a href=\"https://www.cnblogs.com/owlman/p/17537015.html\" target=\"_blank\">博客园链接</a></p>\n</blockquote>\n<p>除此之外，Atom 与 Sublime Text 这两款编辑器也与 VS Code 编辑器有着类似的插件生态系统和使用方式，如果读者喜欢的话，也可以使用它们来打造属于自己的项目开发工具，方法是大同小异的。而除了上述专用的代码编辑器之外，如果读者更习惯使用传统的集成开发环境（IDE），JetBrains 公司旗下的 PyCharm 无疑会是一个不错的选择，它在 Windows、macOS 以及各种 Linux 发行版上均可做到所有的功能都是开箱即用，无需进行多余的配置，这对初学者是相对比较友好的。当然了，令人比较遗憾的是，PyCharm 的专业版本并非是一款免费的软件，而免费的社区版在功能上则多多少少会受到一些限制。如果考虑到程序员们在实际生产环境中各种可能的需要及其带来的相关开销等因素，我个人还是会倾向于建议大家尽可能地选择开源软件，这个系列的笔记接下来也将会以 VS Code 编辑器为主要编程工具来展开后续的各种实例演示。</p>\n<h2 id=\"学习成果验收hello-world\">学习成果验收：Hello World</h2>\n<p>现在，为了验证我们已经成功配置好了使用 Python 语言的编程工具，接下来就需要尝试着使用这些工具来编写一个 Python 版本的 Hello World 程序，看看它能否在我们所在的计算机设备上成功运行起来。编写该程序的具体步骤如下。</p>\n<ol>\n<li>\n<p>使用 VS Code 编辑器打开之前创建的<code>examples/say_hello</code>目录，并在其集成终端中使用<code>uv init</code>命令将其初始化为一个 Python 项目。</p>\n</li>\n<li>\n<p>在编辑器中打开项目的入口文件<code>main.py</code>，然后将其中的代码修改如下：</p>\n<pre><code class=\"language-python\">#! /usr/bin/env python\n'''\n    Simple example to say hello\n    \n    Author: lingjie\n    Created on: 2024-06-15\n    '''\n\nauthor_name = \"owlman\"    \ndef say_hello(name: str) -&gt; None:\n    '''\n        Say hello by name.\n    \n        Args:\n            name: name to greet\n    '''\n    print(\"Hello World! My name is\", name)\n\nif __name__ == \"__main__\":\n    say_hello(author_name)\n</code></pre>\n<p>在这里，读者暂时不必理会这段代码中使用的具体语法，只需要知道它会在程序运行时输出一条包含用户 ID（即<code>author_name</code>变量的值）的问候语即可。稍后，我们将会在《[[基础语法学习]]》这篇笔记中详细讲解 Python 语言的语法规则。</p>\n</li>\n<li>\n<p>在保存上述文件之后，回到编辑器的集成终端环境中并执行<code>python main.py</code>命令，如果终端中输出了如图 24 所示的信息，就说明我们已经成功配置好了使用 Python 语言的编程工具。</p>\n \n<p><img alt=\"img\" class=\"lazyload\" /></p>\n<p><strong>图 24</strong>：学习成果验收</p>\n</li>\n</ol>\n<h2 id=\"小结\">小结</h2>\n<p>在本篇笔记中，我首先介绍了如何安装 Python 解释器，并使用它来创建 Python 项目，然后又介绍了如何使用 Conda 来管理 Python 项目的第三方扩展及其依赖关系，最后又介绍了如何选择合适的编程工具链。在完成上述配置之后，我们就可以使用这些工具来编写 Python 程序了。</p>\n\n</div>\n<div class=\"clear\"></div>\n\n        <p class=\"postfoot\">\n            posted on \n<span id=\"post-date\">2026-01-19 12:00</span>&nbsp;\n<a href=\"https://www.cnblogs.com/owlman\">凌杰</a>&nbsp;\n阅读(<span id=\"post_view_count\">89</span>)&nbsp;\n评论(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">收藏</a>&nbsp;\n<a href=\"\">举报</a>\n\n        </p>"
    },
    {
      "title": "Django入门指南：Python Web开发的“瑞士军刀”",
      "link": "https://www.cnblogs.com/ymtianyu/p/19500859",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/ymtianyu/p/19500859\" id=\"cb_post_title_url\" title=\"发布于 2026-01-19 11:36\">\n    <span>Django入门指南：Python Web开发的“瑞士军刀”</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                    <div id=\"cnblogs_post_description\" style=\"display: none;\">\n        \n        本文为Python Web开发新手清晰梳理了Django框架的定位。通过将Django与FastAPI、Flask进行形象对比，阐明其“开箱即用”的全能特性、相对不足以及适用场景。文章包含从安装到创建第一个项目的完整实操步骤与代码，助你快速上手，并为框架选择提供决策参考。\n    </div>\n<div class=\"blogpost-body blogpost-body-html\" id=\"cnblogs_post_body\">\n<p><strong style=\"color: rgba(186, 55, 42, 1);\">想用Python快速搭建一个功能齐全的网站，却被各种框架搞得眼花缭乱？</strong></p>\n<p>我记得刚开始时，面对Flask的轻量、听说Django的“重”、还有后来FastAPI的炫酷，纠结了好久。直到着手编写一个正式项目——一个需要后台管理、用户认证和内容发布的小型社区网站—— deadline压下来，咬牙选了Django。结果？原本预估两周的基础搭建，<strong style=\"color: rgba(186, 55, 42, 1);\">用Django的“开箱即用”特性，三天就搓出了一个五脏俱全的雏形</strong>。今天，就来看看这把Web开发的“瑞士军刀”Django。</p>\n<h2>🎯 本文能帮你解决什么？</h2>\n<div>\n<p> 👉 1. 理清Django在Python Web框架中的地位与核心思想。</p>\n<p> 👉 2. 看懂Django相比FastAPI、Flask的独特优势和可能短板。</p>\n<p> 👉 3. 获得从零开始安装、配置并运行第一个Django项目的清晰步骤。</p>\n<p> 👉 4. 对“何时该用Django”有一个基于实战的判断。</p>\n</div>\n<h2>🧩 第一部分：Django是什么？为什么是它？</h2>\n<p>如果把建网站比作开店：</p>\n<div>\n<p> - <code style=\"color: rgba(186, 55, 42, 1);\">Flask</code> 给你一块地和一些基础建材（路由、模板引擎），店怎么盖、用什么砖瓦，你说了算。高度自由，但一砖一瓦都得自己操心。</p>\n<p> - <code style=\"color: rgba(186, 55, 42, 1);\">FastAPI</code> 则像一家专注做“外卖/API配送”的现代化中央厨房，自动化程度高，性能出色，但主要精力在高效处理“订单”（请求）和生成“餐品”（JSON响应）。</p>\n<p> - 而 <code style=\"color: rgba(186, 55, 42, 1);\">Django</code>，就像一家提供“精装修酒店式公寓”的开发商。从房间布局（MVC/MTV架构）、水电管路（ORM数据库操作）、前台管理系统（Admin后台），甚至门禁安保（用户认证）都给你配好了。你只需专注经营你的“酒店特色服务”（业务逻辑）。</p>\n</div>\n<p>这就是Django著名的 <strong>“电池内置”</strong> 哲学。它不适合所有场景，但当你需要快速构建一个功能完整、管理后台健全、安全性有保障的内容驱动型网站（如新闻站、博客平台、企业内部管理系统）时，它能极大提升你的开发效率。</p>\n<h2>⚖️ 第二部分：Django vs FastAPI vs Flask，怎么选？</h2>\n<p>用一个表格太冰冷，我用三个比喻来总结：</p>\n<div>\n<p> 🏢 <strong>Django (精装公寓)</strong></p>\n<p>  - <strong>优势</strong>：开箱即用，功能全面（ORM、Admin、Auth、缓存等），文档极其完善，社区庞大，安全性高（默认防CSRF、SQL注入等）。适合中大型、需求明确、需要快速上手的项目。</p>\n<p>  - <strong>不足</strong>：灵活性相对较低，“船舵”较大，对于微小API或极高并发、定制化极致的场景可能显得“重”。</p>\n<br />\n<p> 🚀 <strong>FastAPI (高性能中央厨房)</strong></p>\n<p>  - <strong>优势</strong>：异步支持好，性能顶尖，自动生成交互式API文档，数据类型校验强（基于Pydantic）。是现代微服务、纯API后端、实时应用的首选。</p>\n<p>  - <strong>不足</strong>：生态系统相比Django仍处于成长阶段，很多“精装修”功能需要自己或第三方库搭建。</p>\n<br />\n<p> 🧱 <strong>Flask (毛坯房+自选建材)</strong></p>\n<p>  - <strong>优势</strong>：极度轻量灵活，学习曲线平缓。你可以从零开始，按需添加任何扩展（数据库用SQLAlchemy，表单用WTForms）。适合微小型项目、学习Web原理，或架构需要高度定制的场景。</p>\n<p>  - <strong>不足</strong>：初始配置决策多，需要开发者自己组合拼装，项目结构容易因人而异。</p>\n</div>\n<p><strong style=\"color: rgba(186, 55, 42, 1);\">核心结论：没有最好，只有最合适。要快速建站选Django，要做API服务选FastAPI，要极致灵活/学习底层选Flask。</strong></p>\n<h2>🔧 第三部分：动手！安装并创建你的第一个Django项目</h2>\n<p>理论说完，我们来点实在的。请确保已安装Python（建议3.8以上）。</p>\n<h3>🎯 步骤一：安装Django</h3>\n<p>强烈建议使用虚拟环境，避免包冲突。打开你的终端（命令行）：</p>\n<pre class=\"language-bash highlighter-hljs\"><code># 1. 创建并进入一个项目目录\nmkdir my_first_django_site\ncd my_first_django_site\n\n# 2. 初始化虚拟环境\nuv init\n\n# 3. 安装Django\nuv add django</code></pre>\n<h3>🎯 步骤二：创建项目和应用程序</h3>\n<p>在Django中，<code style=\"color: rgba(186, 55, 42, 1);\">项目</code> 是你的整个网站容器，而 <code style=\"color: rgba(186, 55, 42, 1);\">应用</code> 是网站内的功能模块（如博客应用、用户应用）。</p>\n<pre class=\"language-bash highlighter-hljs\"><code># 创建名为 ‘mysite‘ 的项目\nuv run django-admin startproject mysite .\n\n# 注意最后的点‘.‘，它表示在当前目录创建，避免嵌套两层目录。\n# 现在目录结构类似：\n# my_first_django_site/\n#   ├── manage.py      # 项目管理命令行工具\n#   ├── mysite/        # 项目配置目录\n#   │   ├── __init__.py\n#   │   ├── settings.py # 项目所有设置（数据库、应用等）\n#   │   ├── urls.py     # 项目级别的URL路由\n#   │   └── wsgi.py\n#   └── .venv/\n#   └── pyproject.toml\n#   └── uv.lock\n\n# 创建一个名为 ‘blog‘ 的应用\nuv run manage.py startapp blog\n\n# 创建后，多了一个 blog/ 目录，里面包含了模型、视图等文件。</code></pre>\n<h3>🎯 步骤三：让项目“动”起来</h3>\n<p>首先，我们需要将新建的应用注册到项目中。编辑 <code style=\"color: rgba(186, 55, 42, 1);\">mysite/settings.py</code> 文件：</p>\n<pre class=\"language-ini highlighter-hljs\"><code># 找到 INSTALLED_APPS 列表，在末尾添加 ‘blog‘\nINSTALLED_APPS = [\n    ‘django.contrib.admin‘,\n    ‘django.contrib.auth‘,\n    ... # 其他默认应用\n    ‘blog‘, # &lt;-- 添加这一行\n]</code></pre>\n<p>然后，进行数据库迁移（Django默认使用SQLite，无需额外安装）：</p>\n<pre class=\"language-bash highlighter-hljs\"><code># 生成迁移文件（根据模型创建数据库表的蓝图）\nuv run manage.py makemigrations\n\n# 执行迁移，在数据库中创建表\nuv run manage.py migrate</code></pre>\n<p>最后，创建超级用户（用于登录强大的Admin后台）并运行开发服务器：</p>\n<pre class=\"language-bash highlighter-hljs\"><code># 创建超级用户，按提示输入用户名、邮箱和密码\nuv run manage.py createsuperuser\n\n# 启动开发服务器，默认监听 127.0.0.1:8000\nuv run manage.py runserver</code></pre>\n<p>现在，打开浏览器访问：</p>\n<div>\n<p> 👉 <a href=\"http://127.0.0.1:8000/\" rel=\"noopener nofollow\">http://127.0.0.1:8000/</a> - 你会看到Django的“火箭”欢迎页！恭喜，项目已运行。</p>\n<p> 👉 <a href=\"http://127.0.0.1:8000/admin/\" rel=\"noopener nofollow\">http://127.0.0.1:8000/admin/</a> - 用刚才创建的超级用户登录，你将进入功能强大的Admin后台，可以管理用户、组等（未来你的博客文章模型注册后也能在这里管理）。</p>\n</div>\n<p><strong style=\"color: rgba(186, 55, 42, 1);\">看，不到10条命令，一个具备完整后台管理、用户认证、数据库ORM的Web应用骨架就立起来了。这就是Django“电池内置”的魅力。</strong></p>\n<h2>⚠️ 第四部分：一些重要的提醒</h2>\n<div>\n<p> 1️⃣ <strong>学习曲线</strong>：Django入门看似简单，但其MTV模式和“约定优于配置”的思想需要时间消化。别怕，官方教程是神作，请务必过一遍。</p>\n<p> 2️⃣ <strong>性能</strong>：对于绝大多数应用，Django默认性能足够。遇到真正的高并发瓶颈时，再考虑缓存、异步视图、甚至结合FastAPI做微服务，<strong>不要过早优化</strong>。</p>\n<p> 3️⃣ <strong>不要修改内置应用</strong>：Django自带的<code style=\"color: rgba(186, 55, 42, 1);\">auth</code>, <code style=\"color: rgba(186, 55, 42, 1);\">admin</code>等应用代码不要直接改，通过继承和覆盖来扩展功能。</p>\n<p> 4️⃣ <strong>调试工具</strong>：安装<code style=\"color: rgba(186, 55, 42, 1);\">django-debug-toolbar</code>，它是开发阶段查看SQL查询、性能的神器。</p>\n</div>\n<hr />\n<p style=\"text-align: center;\">---<strong>写在最后</strong>---<br />希望这份总结能帮你避开一些坑。如果觉得有用，不妨点个 赞👍 或 收藏⭐ 标记一下，方便随时回顾。也欢迎关注我，后续为你带来更多类似的实战解析。有任何疑问或想法，我们评论区见，一起交流开发中的各种心得与问题。</p>\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-19 11:36</span>&nbsp;\n<a href=\"https://www.cnblogs.com/ymtianyu\">一名程序媛呀</a>&nbsp;\n阅读(<span id=\"post_view_count\">139</span>)&nbsp;\n评论(<span id=\"post_comment_count\">3</span>)&nbsp;\n&nbsp;\n<a href=\"\">收藏</a>&nbsp;\n<a href=\"\">举报</a>\n</div>"
    },
    {
      "title": "上周热点回顾（1.12-1.18）",
      "link": "https://www.cnblogs.com/cmt/p/19499970",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/cmt/p/19499970\" id=\"cb_post_title_url\" title=\"发布于 2026-01-19 08:27\">\n    <span>上周热点回顾（1.12-1.18）</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body blogpost-body-html\" id=\"cnblogs_post_body\">\n<p>热点随笔：</p>\n<p> · <a href=\"https://www.cnblogs.com/sdcb/archive/2026/01/15/20261113-big-integer-dotnet-10-vs-java.html\" target=\"_blank\">不服跑个分？.NET 10 大整数计算对阵 Java，结果令人意外</a> (<a href=\"https://www.cnblogs.com/sdcb/\" target=\"_blank\">.NET骚操作</a>) <br />\n · <a href=\"https://www.cnblogs.com/dotnet-org-cn/archive/2026/01/12/19473369.html\" target=\"_blank\">一个高性能的 .NET MQTT 客户端与服务器库</a>\n(<a href=\"https://www.cnblogs.com/dotnet-org-cn/\" target=\"_blank\">中国.NET研究协会</a>)                    <br />\n · <a href=\"https://www.cnblogs.com/zxlh1529/archive/2026/01/14/19480754.html\" target=\"_blank\">新的一年，写给博客园的大家，也写给自己</a>\n(<a href=\"https://www.cnblogs.com/zxlh1529/\" target=\"_blank\">幼儿园技术家</a>)                    <br />\n · <a href=\"https://www.cnblogs.com/SunSpring/archive/2026/01/13/19469874.html\" target=\"_blank\">2025总结篇，忙碌的日子里越过35岁，开启下一个征程</a>\n(<a href=\"https://www.cnblogs.com/SunSpring/\" target=\"_blank\">XSpringSun</a>)                    <br />\n · <a href=\"https://www.cnblogs.com/whuanle/archive/2026/01/12/19469026.html\" target=\"_blank\">万字长文讲解：团队落地 AI 辅助编程和 AI Specs 实战</a>\n(<a href=\"https://www.cnblogs.com/whuanle/\" target=\"_blank\">痴者工良</a>)                    <br />\n · <a href=\"https://www.cnblogs.com/guangzan/archive/2026/01/15/19487446.html\" target=\"_blank\">AI → JSON → UI</a>\n(<a href=\"https://www.cnblogs.com/guangzan/\" target=\"_blank\">guangzan</a>)                    <br />\n · <a href=\"https://www.cnblogs.com/sdcb/archive/2026/01/13/20251203-interleaved-thinking.html\" target=\"_blank\">从 OpenAI 兼容到 Anthropic 崛起：大模型“交错思考”协议的演进与变局</a>\n(<a href=\"https://www.cnblogs.com/sdcb/\" target=\"_blank\">.NET骚操作</a>)                    <br />\n · <a href=\"https://www.cnblogs.com/lichengxiao/archive/2026/01/15/19485897.html\" target=\"_blank\">新的旅程</a>\n(<a href=\"https://www.cnblogs.com/lichengxiao/\" target=\"_blank\">熬夜不早睡</a>)                    <br />\n · <a href=\"https://www.cnblogs.com/Can-daydayup/archive/2026/01/12/19470057.html\" target=\"_blank\">让 WinForm.NET 再次伟大！一个专门设计用于帮助 WinForms 应用程序迁移到 Blazor WASM 平台的项目</a>\n(<a href=\"https://www.cnblogs.com/Can-daydayup/\" target=\"_blank\">追逐时光者</a>)                    <br />\n · <a href=\"https://www.cnblogs.com/lijinhuaboke/archive/2026/01/14/19457121.html\" target=\"_blank\">高德地图实现实时轨迹展示</a>\n(<a href=\"https://www.cnblogs.com/lijinhuaboke/\" target=\"_blank\">此颜差矣。</a>)                    <br />\n · <a href=\"https://www.cnblogs.com/Can-daydayup/archive/2026/01/13/19479370.html\" target=\"_blank\">C#/.NET/.NET Core技术前沿周刊 | 第 65 期（2026年1.1-1.11）</a>\n(<a href=\"https://www.cnblogs.com/Can-daydayup/\" target=\"_blank\">追逐时光者</a>)                    <br />\n · <a href=\"https://www.cnblogs.com/MeteorSeed/archive/2026/01/12/19460575.html\" target=\"_blank\">【译】使用 Visual Studio 2026 简化您的 Git 工作流程</a>\n(<a href=\"https://www.cnblogs.com/MeteorSeed/\" target=\"_blank\">MeteorSeed</a>)                    <br />\n            </p>\n<p>热点新闻：</p>\n<p>\n · <a href=\"https://news.cnblogs.com/n/812864/\" target=\"_blank\">因AI做的太好陷绝境！收入暴降80%，裁员75%，只剩6个月续命，下一个是谁？</a><br />\n · <a href=\"https://news.cnblogs.com/n/813046/\" target=\"_blank\">5行代码，逼疯整个硅谷！澳洲放羊大叔，捅开AI编程奇点</a><br />\n · <a href=\"https://news.cnblogs.com/n/812874/\" target=\"_blank\">Linux祖师爷真香现场！曾嘲讽AI编程是垃圾，如今亲自下场氛围编程</a><br />\n · <a href=\"https://news.cnblogs.com/n/812866/\" target=\"_blank\">年薪70万跌至几千块！第一批被AI取代的人类出现了</a><br />\n · <a href=\"https://news.cnblogs.com/n/812716/\" target=\"_blank\">马斯克宣布“X将在7天内公开所有算法”，包括推荐算法，以后每四周1次</a><br />\n · <a href=\"https://news.cnblogs.com/n/813044/\" target=\"_blank\">Digg 重新上线</a><br />\n · <a href=\"https://news.cnblogs.com/n/812977/\" target=\"_blank\">实测：千问App接入“阿里全家桶”，可以点外卖、订车票了</a><br />\n · <a href=\"https://news.cnblogs.com/n/812836/\" target=\"_blank\">内存暴涨10倍，手机电脑直呼买不起？中国厂商的机会，这次真的来了</a><br />\n · <a href=\"https://news.cnblogs.com/n/813054/\" target=\"_blank\">不得了，这个新技术把视频压缩到了0.02%！</a><br />\n · <a href=\"https://news.cnblogs.com/n/812777/\" target=\"_blank\">携程深夜发离职通知短信，后被澄清为乌龙事件</a><br />\n · <a href=\"https://news.cnblogs.com/n/812851/\" target=\"_blank\">KAN一作刘子鸣回国任教，清华官网盖章认证了</a><br />\n · <a href=\"https://news.cnblogs.com/n/813045/\" target=\"_blank\">被判违法的AI仲裁案，撕开了技术裁员的遮羞布</a></p>\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-19 08:27</span>&nbsp;\n<a href=\"https://www.cnblogs.com/cmt\">博客园团队</a>&nbsp;\n阅读(<span id=\"post_view_count\">277</span>)&nbsp;\n评论(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">收藏</a>&nbsp;\n<a href=\"\">举报</a>\n</div>"
    }
  ]
}