{
  "title": "ä¸»é¡µ - åšå®¢å›­",
  "link": "https://www.cnblogs.com/",
  "description": "ä¸»é¡µ - åšå®¢å›­ RSS",
  "entries": [
    {
      "title": "æŒæ¡Fetchä¸Flaskäº¤äº’ï¼šè®©å‰ç«¯è¡¨å•æäº¤æ›´ä¼˜é›…çš„åŠ¨æ€ä¹‹é“",
      "link": "https://www.cnblogs.com/ymtianyu/p/19418995",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/ymtianyu/p/19418995\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2025-12-30 08:18\">\n    <span>æŒæ¡Fetchä¸Flaskäº¤äº’ï¼šè®©å‰ç«¯è¡¨å•æäº¤æ›´ä¼˜é›…çš„åŠ¨æ€ä¹‹é“</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                    <div id=\"cnblogs_post_description\" style=\"display: none;\">\n        \n        æœ¬æ–‡è¯¦ç»†è§£æäº†å‰ç«¯Fetch APIçš„å·¥ä½œåŸç†ä¸å¸¸è§ç”¨æ³•ï¼Œå¹¶é‡ç‚¹é˜è¿°äº†å…¶å¦‚ä½•ä¸Python Flaskåç«¯æ¡†æ¶ååŒå·¥ä½œã€‚é€šè¿‡ç™»å½•é‡å®šå‘ã€æ•°æ®åŠ¨æ€å¢åˆ æ”¹æŸ¥ç­‰å…·ä½“åœºæ™¯ï¼Œæ¼”ç¤ºäº†å¦‚ä½•å®ç°æ— åˆ·æ–°äº¤äº’ä½“éªŒã€‚æ–‡ç« æä¾›äº†å‰åç«¯é…å¥—çš„ä»£ç ç¤ºä¾‹ï¼Œè®²è§£äº†å¦‚ä½•å¤„ç†JSONã€æ–‡æœ¬ç­‰ä¸åŒæ ¼å¼çš„å“åº”ï¼Œä»¥åŠå¦‚ä½•æ ¹æ®å“åº”çŠ¶æ€æ›´æ–°ç”¨æˆ·ç•Œé¢ï¼Œä¸ºæ„å»ºç°ä»£Webåº”ç”¨æä¾›äº†å®ç”¨æŒ‡å—ã€‚\n    </div>\n<div class=\"blogpost-body blogpost-body-html\" id=\"cnblogs_post_body\">\n<div>\n<h1 style=\"font-size: 22px; line-height: 1.4; margin-top: 0; margin-bottom: 15px; font-weight: bold; color: rgba(26, 26, 26, 1);\">è¿˜åœ¨ä¸ºè¡¨å•æäº¤åé¡µé¢åˆ·æ–°çƒ¦æ¼ï¼Ÿä¸€æ–‡æå®šFetchä¸Flaskçš„æ— ç¼äº¤äº’</h1>\n<p style=\"font-size: 15px; color: rgba(127, 140, 141, 1); margin-bottom: 20px; padding-left: 12px; font-style: italic;\">æœ¬æ–‡å¸¦ä½ æ·±å…¥ç†è§£ç°ä»£å‰ç«¯ Fetch API çš„å·¥ä½œåŸç†ï¼Œå¹¶æ‰‹æŠŠæ‰‹æ•™ä½ å¦‚ä½•ä¸ Flask åç«¯ä¼˜é›…ç»“åˆï¼Œå®ç°æ— åˆ·æ–°ç™»å½•ã€æ•°æ®åŠ¨æ€å¢åˆ æ”¹æŸ¥ç­‰äº¤äº’ã€‚<br />äº®ç‚¹åŒ…æ‹¬ï¼šFetch æ ¸å¿ƒåŸç†å‰–æã€ç™»å½•é‡å®šå‘çš„å¼‚æ­¥å¤„ç†ã€åˆ©ç”¨å“åº”çŠ¶æ€ç åŠ¨æ€æ›´æ–°UIã€ä»¥åŠå¦‚ä½•å¤„ç†JSON/æ–‡æœ¬ç­‰ä¸åŒæ ¼å¼çš„è¿”å›æ•°æ®ã€‚<br /><br /><span style=\"font-weight: bold;\">ä½ å°†å­¦åˆ°ï¼š</span><br />- Fetch API çš„â€œæ‰¿è¯ºâ€æœºåˆ¶ä¸åŸºç¡€ç”¨æ³•<br />- å¦‚ä½•ç”¨ Flask æ„å»º RESTful é£æ ¼çš„ API ç«¯ç‚¹<br />- ç™»å½•è¡¨å•æäº¤ï¼šå‘Šåˆ«ä¼ ç»Ÿè¡¨å•åˆ·æ–°ï¼Œå®ç°å¹³æ»‘è·³è½¬<br />- æ•°æ®æ“ä½œï¼šå‰ç«¯ä¸€ä¸ªè¯·æ±‚ï¼Œåç«¯å¤„ç†ï¼Œå‰ç«¯UIå³æ—¶å“åº”<br />- æ ¹æ®åç«¯è¿”å›çš„ä¸åŒæ•°æ®ç±»å‹ï¼ˆJSON/Textï¼‰è¿›è¡Œç²¾å‡†å¤„ç†</p>\n<h2 style=\"font-size: 18px; font-weight: bold; color: rgba(44, 62, 80, 1); padding-bottom: 8px; margin-top: 30px; margin-bottom: 15px;\">âœ¨ ç›®å½•</h2>\n<p>1. åˆè¯†Fetchï¼šç°ä»£Webçš„é€šä¿¡ä¿¡ä½¿<br />2. ğŸ› ï¸ å®æˆ˜å‡†å¤‡ï¼šFlaskåç«¯çš„ç®€å•é…ç½®<br />3. ğŸ” åœºæ™¯ä¸€ï¼šç™»å½•è¡¨å•æäº¤ä¸é¡µé¢é‡å®šå‘<br />4. âœ¨ åœºæ™¯äºŒï¼šåŠ¨æ€æ–°å¢ä¸ä¿®æ”¹æ•°æ®<br />5. ğŸ“¦ åœºæ™¯ä¸‰ï¼šå¤„ç†ä¸åŒç±»å‹çš„å“åº”æ•°æ®<br />6. ğŸ’» å®Œæ•´ä»£ç å‚è€ƒä¸æ€»ç»“</p>\n<h2 style=\"font-size: 20px; font-weight: bold; color: rgba(44, 62, 80, 1); margin-top: 35px; margin-bottom: 15px;\">1. åˆè¯†Fetchï¼šç°ä»£Webçš„é€šä¿¡ä¿¡ä½¿</h2>\n<p><code>fetch()</code> æ˜¯æµè§ˆå™¨æä¾›çš„ã€åŸºäº <strong style=\"color: rgba(186, 55, 42, 1);\">Promise</strong> çš„ç°ä»£ç½‘ç»œè¯·æ±‚APIã€‚å®ƒå–ä»£äº†å¤è€çš„ XMLHttpRequestï¼Œè®©å¼‚æ­¥æ•°æ®è¯·æ±‚å˜å¾—æ¸…æ™°ã€ç®€æ´ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªä¸“ä¸šçš„â€œä¿¡ä½¿â€ã€‚</p>\n<p>å®ƒçš„åŸºæœ¬å·¥ä½œæµç¨‹æ˜¯ï¼šä½ ç»™ä¿¡ä½¿ï¼ˆfetchï¼‰ä¸€ä¸ªåœ°å€ï¼ˆURLï¼‰å’ŒæŒ‡ç¤ºï¼ˆé…ç½®å¯¹è±¡ï¼‰ï¼Œå®ƒç«‹åˆ»è¿”å›ä¸€ä¸ªâ€œæ‰¿è¯ºæ”¶æ®â€ï¼ˆPromiseï¼‰ã€‚è¿™ä¸ªæ‰¿è¯ºæœ€ç»ˆä¼šå…‘ç°ä¸ºâ€œå“åº”åŒ…è£¹â€ï¼ˆResponseå¯¹è±¡ï¼‰ï¼Œä½ éœ€è¦æ‰“å¼€è¿™ä¸ªåŒ…è£¹ï¼ˆè°ƒç”¨å¦‚.json(), .text()ç­‰æ–¹æ³•ï¼‰æ‰èƒ½æ‹¿åˆ°é‡Œé¢çš„çœŸå®æ•°æ®ã€‚</p>\n<pre class=\"language-javascript highlighter-hljs\"><code>// ä¸€ä¸ªæœ€ç®€å•çš„GETè¯·æ±‚ç¤ºä¾‹\nfetch('/api/data')\n  .then(response =&gt; response.json()) // æ‰“å¼€åŒ…è£¹ï¼Œè§£æJSONæ•°æ®\n  .then(data =&gt; console.log(data))   // å¤„ç†çœŸå®æ•°æ®\n  .catch(error =&gt; console.error('å‡ºé”™å•¦ï¼š', error)); // å¤„ç†é”™è¯¯</code></pre>\n<h2 style=\"font-size: 20px; font-weight: bold; color: rgba(44, 62, 80, 1); margin-top: 35px; margin-bottom: 15px;\">2. ğŸ› ï¸ å®æˆ˜å‡†å¤‡ï¼šFlaskåç«¯çš„ç®€å•é…ç½®</h2>\n<p>ä¸ºäº†è®©å‰ç«¯Fetchèƒ½é¡ºåˆ©ä¸åç«¯â€œå¯¹è¯â€ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªèƒ½å¤„ç†JSONã€å¹¶èƒ½è¿›è¡Œè·¨åŸŸèµ„æºå…±äº«ï¼ˆCORSï¼‰çš„Flaskåº”ç”¨ã€‚é¦–å…ˆï¼Œå®‰è£…å¿…è¦åº“ï¼š</p>\n<pre class=\"language-python highlighter-hljs\"><code>pip install flask flask-cors</code></pre>\n<p>æ¥ç€ï¼Œæ­å»ºä¸€ä¸ªåŸºç¡€çš„åç«¯æœåŠ¡ï¼š</p>\n<pre class=\"language-python highlighter-hljs\"><code>from flask import Flask, request, jsonify\nfrom flask_cors import CORS\n\napp = Flask(__name__)\nCORS(app)  # å…è®¸å‰ç«¯è·¨åŸŸè¯·æ±‚ï¼Œå¼€å‘æ—¶éå¸¸æ–¹ä¾¿\n\n# æˆ‘ä»¬å°†åœ¨åç»­åœºæ™¯ä¸­é€æ­¥å¡«å……è¿™ä¸ªappçš„è·¯ç”±\nif __name__ == '__main__':\n    app.run(debug=True)</code></pre>\n<h2 style=\"font-size: 20px; font-weight: bold; color: rgba(44, 62, 80, 1); margin-top: 35px; margin-bottom: 15px;\">3. ğŸ” åœºæ™¯ä¸€ï¼šç™»å½•è¡¨å•æäº¤ä¸é¡µé¢é‡å®šå‘</h2>\n<p>ä¼ ç»Ÿè¡¨å•æäº¤ä¼šåˆ·æ–°é¡µé¢ï¼Œä½“éªŒå‰²è£‚ã€‚ä½¿ç”¨Fetchï¼Œæˆ‘ä»¬å¯ä»¥å®ç°æ— åˆ·æ–°ç™»å½•ï¼Œå¹¶æ ¹æ®åç«¯æŒ‡ä»¤è¿›è¡Œå‰ç«¯è·¯ç”±è·³è½¬ã€‚</p>\n<p><strong style=\"color: rgba(186, 55, 42, 1);\">å‰ç«¯ (JavaScript)</strong>ï¼šæ‹¦æˆªè¡¨å•æäº¤äº‹ä»¶ï¼Œä½¿ç”¨Fetchå‘é€æ•°æ®ã€‚</p>\n<pre class=\"language-javascript highlighter-hljs\"><code>document.getElementById('loginForm').addEventListener('submit', function(event) {\n    event.preventDefault(); // é˜»æ­¢è¡¨å•é»˜è®¤æäº¤è¡Œä¸º\n\n    const formData = new FormData(this);\n    // æˆ–è€…å°†æ•°æ®è½¬æ¢ä¸ºJSON: JSON.stringify(Object.fromEntries(formData))\n\n    fetch('/api/login', {\n        method: 'POST',\n        body: formData, // å‘é€FormDataå¯¹è±¡\n        // headers: { 'Content-Type': 'application/json' }, // å¦‚æœå‘é€JSONéœ€è®¾ç½®æ­¤header\n    })\n    .then(response =&gt; response.json()) // è§£æåç«¯è¿”å›çš„JSON\n    .then(result =&gt; {\n        if (result.success) {\n            // ç™»å½•æˆåŠŸï¼Œä½¿ç”¨å‰ç«¯è·¯ç”±è·³è½¬ï¼Œè€Œéåç«¯é‡å®šå‘\n            window.location.href = result.redirect_url || '/dashboard';\n        } else {\n            // ç™»å½•å¤±è´¥ï¼ŒåŠ¨æ€æ›´æ–°é¡µé¢ä¸Šçš„é”™è¯¯æç¤ºå…ƒç´ \n            document.getElementById('error-msg').textContent = result.message;\n        }\n    })\n    .catch(error =&gt; console.error('Error:', error));\n});</code></pre>\n<p><strong style=\"color: rgba(186, 55, 42, 1);\">åç«¯ (Flask)</strong>ï¼šéªŒè¯æ•°æ®ï¼Œè¿”å›åŒ…å«çŠ¶æ€å’ŒæŒ‡ä»¤çš„JSONï¼Œè€Œä¸æ˜¯ç›´æ¥è¿”å›é‡å®šå‘çš„HTMLã€‚</p>\n<pre class=\"language-python highlighter-hljs\"><code>@app.route('/api/login', methods=['POST'])\ndef login():\n    username = request.form.get('username')\n    password = request.form.get('password')\n\n    # è¿™é‡Œåº”æ˜¯ä½ çš„éªŒè¯é€»è¾‘ï¼Œä¾‹å¦‚æŸ¥è¯¢æ•°æ®åº“\n    if username == 'admin' and password == 'secret':\n        # è¿”å›æˆåŠŸçŠ¶æ€å’Œå‰ç«¯è·³è½¬åœ°å€\n        return jsonify({'success': True, 'redirect_url': '/dashboard'})\n    else:\n        # è¿”å›å¤±è´¥çŠ¶æ€å’Œé”™è¯¯ä¿¡æ¯\n        return jsonify({'success': False, 'message': 'ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯'}), 401</code></pre>\n<h2 style=\"font-size: 20px; font-weight: bold; color: rgba(44, 62, 80, 1); margin-top: 35px; margin-bottom: 15px;\">4. âœ¨ åœºæ™¯äºŒï¼šåŠ¨æ€æ–°å¢ä¸ä¿®æ”¹æ•°æ®</h2>\n<p>åœ¨ç®¡ç†ç³»ç»Ÿä¸­ï¼Œæ–°å¢æˆ–ä¿®æ”¹ä¸€æ¡æ•°æ®åï¼Œæˆ‘ä»¬å¸Œæœ›åˆ—è¡¨èƒ½ç«‹å³æ›´æ–°ï¼Œè€Œæ— éœ€åˆ·æ–°æ•´ä¸ªé¡µé¢ã€‚</p>\n<p><strong style=\"color: rgba(186, 55, 42, 1);\">æ ¸å¿ƒæ€è·¯</strong>ï¼šFetchè¯·æ±‚æˆåŠŸåï¼Œåœ¨<code>.then()</code>ä¸­æ ¹æ®åç«¯è¿”å›çš„æœ€æ–°æ•°æ®ï¼Œç›´æ¥æ“ä½œDOMæ›´æ–°UIã€‚</p>\n<pre class=\"language-javascript highlighter-hljs\"><code>// å‡è®¾æœ‰ä¸€ä¸ªä¿å­˜æŒ‰é’®ï¼Œç”¨äºæäº¤æ–°å¢æˆ–ä¿®æ”¹çš„æ•°æ®\nsaveButton.addEventListener('click', () =&gt; {\n    const itemData = { title: 'æ–°é¡¹ç›®', status: 'active' };\n\n    fetch('/api/items', {\n        method: 'POST', // æ–°å¢ç”¨POSTï¼Œä¿®æ”¹å¯èƒ½æ˜¯PUTæˆ–PATCH\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(itemData)\n    })\n    .then(response =&gt; response.json())\n    .then(newItem =&gt; {\n        // å…³é”®æ­¥éª¤ï¼šè¯·æ±‚æˆåŠŸåï¼ŒåŠ¨æ€æ›´æ–°å‰ç«¯åˆ—è¡¨\n        const itemList = document.getElementById('itemList');\n        const newItemElement = document.createElement('li');\n        newItemElement.id = `item-${newItem.id}`;\n        newItemElement.innerHTML = `${newItem.title} ${newItem.status}`;\n        itemList.appendChild(newItemElement);\n\n        // æˆ–è€…ï¼Œå¦‚æœæ˜¯ä¿®æ”¹æ“ä½œï¼Œå¯ä»¥æ‰¾åˆ°å¯¹åº”çš„DOMå…ƒç´ æ›´æ–°å…¶å†…å®¹\n        // const oldItemElement = document.getElementById(`item-${newItem.id}`);\n        // oldItemElement.innerHTML = ...;\n\n        alert('æ“ä½œæˆåŠŸï¼'); // æˆ–æ›´ä¼˜é›…çš„æç¤º\n    });\n});</code></pre>\n<p>å¯¹åº”çš„Flaskåç«¯éœ€è¦è¿”å›åˆ›å»ºæˆ–æ›´æ–°åçš„å®Œæ•´æ•°æ®å¯¹è±¡ï¼Œä»¥ä¾¿å‰ç«¯ä½¿ç”¨ã€‚</p>\n<h2 style=\"font-size: 20px; font-weight: bold; color: rgba(44, 62, 80, 1); margin-top: 35px; margin-bottom: 15px;\">5. ğŸ“¦ åœºæ™¯ä¸‰ï¼šå¤„ç†ä¸åŒç±»å‹çš„å“åº”æ•°æ®</h2>\n<p>åç«¯å¯èƒ½è¿”å›JSONï¼Œä¹Ÿå¯èƒ½è¿”å›çº¯æ–‡æœ¬æˆ–HTMLç‰‡æ®µã€‚Fetchçš„Responseå¯¹è±¡æä¾›äº†ä¸åŒçš„æ–¹æ³•æ¥å¤„ç†ã€‚</p>\n<p><strong style=\"color: rgba(186, 55, 42, 1);\">å¤„ç†JSON (æœ€å¸¸ç”¨)</strong>ï¼šå¦‚ä¸Šæ–‡æ‰€ç¤ºï¼Œä½¿ç”¨<code>response.json()</code>ã€‚</p>\n<p><strong style=\"color: rgba(186, 55, 42, 1);\">å¤„ç†æ–‡æœ¬</strong>ï¼šä¾‹å¦‚åç«¯è¿”å›ä¸€ä¸ªç®€å•çš„æˆåŠŸæ¶ˆæ¯æˆ–CSVæ•°æ®ã€‚</p>\n<pre class=\"language-javascript highlighter-hljs\"><code>fetch('/api/export')\n  .then(response =&gt; response.text())\n  .then(textData =&gt; {\n    console.log(textData);\n    // å¤„ç†æ–‡æœ¬æ•°æ®...\n  });</code></pre>\n<p><strong style=\"color: rgba(186, 55, 42, 1);\">æ£€æŸ¥å“åº”çŠ¶æ€</strong>ï¼šåœ¨è§£ææ•°æ®å‰ï¼Œå…ˆæ£€æŸ¥è¯·æ±‚æ˜¯å¦çœŸæ­£æˆåŠŸæ˜¯ä¸ªå¥½ä¹ æƒ¯ã€‚</p>\n<pre class=\"language-javascript highlighter-hljs\"><code>fetch('/api/some-data')\n  .then(response =&gt; {\n    if (!response.ok) { // æ£€æŸ¥HTTPçŠ¶æ€ç æ˜¯å¦åœ¨200-299ä¹‹é—´\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    return response.json(); // çŠ¶æ€æ­£å¸¸æ‰è§£æJSON\n  })\n  .then(data =&gt; /* å¤„ç†æ•°æ® */)\n  .catch(error =&gt; /* å¤„ç†ç½‘ç»œé”™è¯¯æˆ–çŠ¶æ€ç é”™è¯¯ */);</code></pre>\n<h2 style=\"font-size: 20px; font-weight: bold; color: rgba(44, 62, 80, 1); margin-top: 35px; margin-bottom: 15px;\">6. ğŸ’» å®Œæ•´ä»£ç å‚è€ƒä¸æ€»ç»“</h2>\n<p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ•´åˆäº†ç™»å½•å’Œæ–°å¢é¡¹ç›®çš„è¶…ç®€æ˜“å®Œæ•´ç¤ºä¾‹ï¼š</p>\n<pre class=\"language-python highlighter-hljs\"><code># app.py (Flaskåç«¯)\nfrom flask import Flask, request, jsonify\nfrom flask_cors import CORS\n\napp = Flask(__name__)\nCORS(app)\nitems = [] # ç”¨ä¸€ä¸ªç®€æ˜“åˆ—è¡¨æ¨¡æ‹Ÿæ•°æ®åº“\n\n@app.route('/api/login', methods=['POST'])\ndef login():\n    data = request.get_json()\n    if data.get('user') == 'demo':\n        return jsonify({'success': True, 'token': 'fake-jwt-token'})\n    return jsonify({'success': False}), 401\n\n@app.route('/api/items', methods=['GET', 'POST'])\ndef handle_items():\n    if request.method == 'GET':\n        return jsonify(items)\n    else: # POST\n        new_item = request.get_json()\n        new_item['id'] = len(items) + 1\n        items.append(new_item)\n        return jsonify(new_item), 201\n\nif __name__ == '__main__':\n    app.run(debug=True)</code></pre>\n<pre class=\"language-html highlighter-hljs\"><code>&lt;!-- index.html (éƒ¨åˆ†å‰ç«¯) --&gt;\n&lt;script&gt;\n// ç™»å½•\nfetch('/api/login', {\n    method: 'POST',\n    headers: {'Content-Type': 'application/json'},\n    body: JSON.stringify({user: 'demo', pass: 'demo'})\n}).then(r =&gt; r.json()).then(console.log);\n\n// æ–°å¢é¡¹ç›®å¹¶æ›´æ–°åˆ—è¡¨\nfetch('/api/items', {\n    method: 'POST',\n    headers: {'Content-Type': 'application/json'},\n    body: JSON.stringify({name: 'New Task'})\n})\n.then(r =&gt; r.json())\n.then(newItem =&gt; {\n    const list = document.getElementById('list');\n    list.innerHTML += `&lt;li&gt;${newItem.id}: ${newItem.name}&lt;/li&gt;`;\n});\n&lt;/script&gt;</code></pre>\n<p><strong style=\"color: rgba(186, 55, 42, 1);\">æ€»ç»“ä¸€ä¸‹</strong>ï¼šFetch + Flask çš„ç»„åˆï¼Œé€šè¿‡â€œè¯·æ±‚-å“åº”-JSONâ€çš„æ¨¡å¼ï¼Œå°†å‰åç«¯è§£è€¦ï¼Œè®©Webäº¤äº’å˜å¾—<strong style=\"color: rgba(186, 55, 42, 1);\">æ›´åŠ åŠ¨æ€å’Œé«˜æ•ˆ</strong>ã€‚<br />å…³é”®åœ¨äºï¼šå‰ç«¯è´Ÿè´£äº¤äº’å’ŒUIæ›´æ–°ï¼Œåç«¯è´Ÿè´£æ•°æ®å’Œé€»è¾‘ï¼Œä¸¤è€…é€šè¿‡æ¸…æ™°çš„APIå¥‘çº¦è¿›è¡Œé€šä¿¡ã€‚</p>\n<div style=\"text-align: center; margin: 40px 0;\"><hr style=\"border-right: none; border-bottom: none; border-left: none;\" /></div>\n<p style=\"font-size: 15px; color: rgba(85, 85, 85, 1); text-align: center;\">å–œæ¬¢æœ¬æ–‡ï¼Ÿä¸è¦é”™è¿‡âœ¨ï¼Œç‚¹èµğŸ‘æ”¶è—â­å…³æ³¨æˆ‘ğŸ‘†ï¼Œä¸€èµ·å­¦ä¹ æ›´å¤šæœ‰ç”¨çš„çŸ¥è¯†ï¼Œå®Œå–„ä½ æˆ‘çš„æŠ€èƒ½æ ‘ï¼ä¹Ÿè¯·è·¯è¿‡çš„å¤§ä½¬ç»™äº›å»ºè®®å’ŒæŒ‡æ•™ğŸ™ğŸ¶ï¼</p>\n</div>\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2025-12-30 08:18</span>&nbsp;\n<a href=\"https://www.cnblogs.com/ymtianyu\">æ›²å¹½</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">24</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "Spring Boot Pf4jæ¨¡å—åŒ–èƒ½åŠ›è®¾è®¡æ€è€ƒ",
      "link": "https://www.cnblogs.com/CreateMyself/p/19413005",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/CreateMyself/p/19413005\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2025-12-30 08:00\">\n    <span>Spring Boot Pf4jæ¨¡å—åŒ–èƒ½åŠ›è®¾è®¡æ€è€ƒ</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body blogpost-body-html\" id=\"cnblogs_post_body\">\n<h2>å‰è¨€</h2>\n<p><span style=\"font-size: 15px;\">ä¸Šä¸€ç¯‡æ–‡ç« æˆ‘ä»¬æµ…å°è¾„æ­¢æ¨¡å—åŒ–æ•´ä½“æ¦‚è§ˆï¼Œæ‰€è°“æ¨¡å—åŒ–åŸºç¡€è®¾æ–½åˆ™æ˜¯åŸºäºPf4jäºŒæ¬¡å°è£…ï¼Œæˆ‘ä»¬å…·ä½“åˆ°åº•è¦å®ç°å“ªäº›ï¼Œæœ¬ç¯‡æˆ‘ä»¬ä»Pf4jå¼€å§‹è®²è§£ï¼Œæˆ‘ä»¬æ·±æŒ–ç»†èŠ‚ã€‚</span></p>\n<h2><span style=\"font-size: 15px;\">æ¨¡å—åŒ–åŸºç¡€è®¾æ–½</span></h2>\n<p><span style=\"font-size: 15px;\">Pf4jå®˜æ–¹æœ‰åŸºæœ¬ä»‹ç»ä»¥åŠå¯¹æ•´ä¸ªæ¡†æ¶çš„æ¶æ„ç­‰ç­‰ï¼Œæˆ‘ä»¬ä¸å†æµªè´¹å£èˆŒã€‚å¦‚ä¸‹æ˜¯é€šè¿‡AIæ€»ç»“Pf4jçš„èƒ½åŠ›æ‰€å¯¼å‡ºçš„æ—¶åºå›¾ï¼ŒåŸºæœ¬ä¸Šç®—æ˜¯é‚£ä¹ˆå›äº‹ï¼Œç»™ä¸äº†è§£Pf4jèƒ½åŠ›çš„ç«¥é‹ç•™ä¸ªåŸºæœ¬å°è±¡</span></p>\n<p><img alt=\"PF4Jæ ¸å¿ƒèƒ½åŠ›æ—¶åºå›¾\" src=\"https://img2024.cnblogs.com/blog/589642/202512/589642-20251228230453654-1092258168.png\" /></p>\n<p><span style=\"font-size: 15px;\">åŸºäºä¸Šè¿°Pf4jçš„åŸºæœ¬èƒ½åŠ›æ¦‚æ‹¬ï¼ˆå¯åŠ¨ã€åœæ­¢ã€çƒ­åŠ è½½/å¸è½½ã€é”€æ¯ã€æ‰©å±•ç‚¹ï¼‰ï¼Œæˆ‘ä»¬å…ˆæŠ›å¼€å°è£…æ¶‰åŠWebåº”ç”¨çš„åŸºç¡€èƒ½åŠ›ï¼Œæˆ‘ä»¬å†æ¥æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼šæ¨¡å—åŒ–æ¡†æ¶è¿˜åº”å…·å¤‡å“ªäº›èƒ½åŠ›ï¼Ÿä»¥æ­¤å†å¯¹ç…§æ·±å…¥P4fjå®ç°ç»†èŠ‚ç¡®è®¤æ˜¯å¦èƒ½æ‰©å±•å¢å¼ºæˆ–è€…å¯¹åº•å±‚å¤æ‚å®ç°è¿›è¡Œç®€åŒ–ç­‰ç­‰ï¼Œå¦‚ä¸‹æˆ‘ä»¬ä¸€ä¸€æŠ½ä¸å‰¥èŒ§ä¸”åŒ–ç¹ä¸ºç®€ä»¥åŠç›´æ¥ç»™å‡ºè‹¥ä¸æ”¯æŒå¦‚ä½•æ‰©å±•å®ç°ï¼ˆæ³¨ï¼špf4jæ—¢æ”¯æŒjaråŒ…ä¹Ÿæ”¯æŒå°†jaræ‰“åŒ…æˆzipï¼Œæˆ‘ä»¬ä»…ä»¥åŸå§‹jaråŒ…ä¸ºä¾‹è®²è§£ï¼Œzipçš„jaråŒ…æ— éå¤šäº†ä¸€æ­¥å°†jaråŒ…è§£å‹ç­‰ç­‰ï¼Œé€»è¾‘å¤§åŒå°å¼‚ï¼‰</span></p>\n<h3>æ’ä»¶ç›®å½•è‡ªå®šä¹‰</h3>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/589642/202512/589642-20251229204902655-1327827454.png\" /></p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">static</span> <span style=\"color: rgba(0, 0, 255, 1);\">final</span> String PLUGINS_DIR_PROPERTY_NAME = \"pf4j.pluginsDir\"<span style=\"color: rgba(0, 0, 0, 1);\">;\n</span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">static</span> <span style=\"color: rgba(0, 0, 255, 1);\">final</span> String MODE_PROPERTY_NAME = \"pf4j.mode\"<span style=\"color: rgba(0, 0, 0, 1);\">;\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">static</span> <span style=\"color: rgba(0, 0, 255, 1);\">final</span> String DEFAULT_PLUGINS_DIR = \"plugins\"<span style=\"color: rgba(0, 0, 0, 1);\">;\n</span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">static</span> <span style=\"color: rgba(0, 0, 255, 1);\">final</span> String DEVELOPMENT_PLUGINS_DIR = \"../plugins\"<span style=\"color: rgba(0, 0, 0, 1);\">;\n\n </span><span style=\"color: rgba(0, 0, 255, 1);\">protected</span> <span style=\"color: rgba(0, 0, 255, 1);\">void</span><span style=\"color: rgba(0, 0, 0, 1);\"> initialize() {\n\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">if</span><span style=\"color: rgba(0, 0, 0, 1);\"> (pluginsRoots.isEmpty()) {\n            pluginsRoots.addAll(createPluginsRoot());\n        }\n}\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">protected</span> <span style=\"color: rgba(0, 0, 255, 1);\">final</span> List&lt;Path&gt; pluginsRoots = <span style=\"color: rgba(0, 0, 255, 1);\">new</span> ArrayList&lt;&gt;<span style=\"color: rgba(0, 0, 0, 1);\">();\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">protected</span> List&lt;Path&gt;<span style=\"color: rgba(0, 0, 0, 1);\"> createPluginsRoot() {\n        String pluginsDir </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> System.getProperty(PLUGINS_DIR_PROPERTY_NAME);\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> (pluginsDir != <span style=\"color: rgba(0, 0, 255, 1);\">null</span> &amp;&amp; !<span style=\"color: rgba(0, 0, 0, 1);\">pluginsDir.isEmpty()) {\n            </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span> Arrays.stream(pluginsDir.split(\",\"<span style=\"color: rgba(0, 0, 0, 1);\">))\n                .map(String::trim)\n                .map(Paths::get)\n                .collect(Collectors.toList());\n        }\n\n        pluginsDir </span>= isDevelopment() ?<span style=\"color: rgba(0, 0, 0, 1);\"> DEVELOPMENT_PLUGINS_DIR : DEFAULT_PLUGINS_DIR;\n\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> Collections.singletonList(Paths.get(pluginsDir));\n    }</span></pre>\n</div>\n<p><span style=\"font-size: 15px;\">å½“æˆ‘ä»¬å®ç°è‡ªå®šä¹‰ç»§æ‰¿PluginManageræ—¶ï¼Œè‹¥æˆ‘ä»¬å·²æŒ‡å®šæ’ä»¶ç›®å½•è·¯å¾„åˆ™æŒ‰ç…§æ‰‹åŠ¨æŒ‡å®šçš„æ’ä»¶ç›®å½•è§£æå¹¶åŠ è½½æ’ä»¶ï¼Œå¦åˆ™ä»JVMç³»ç»Ÿå±æ€§è·å–pf4j.pluginsDirï¼Œè‹¥å·²æŒ‡å®šåˆ™æŒ‰ç…§æŒ‡å®šè·¯å¾„è§£æå¹¶åŠ è½½æ’ä»¶ï¼Œå¦åˆ™é»˜è®¤çš„æ’ä»¶ç›®å½•åˆ™ä¸ºpluginsæˆ–è€…../pluginsï¼ˆpf4jåŒºåˆ†æµ‹è¯•å’Œç”Ÿäº§æ¨¡å¼ï¼Œä¹Ÿæ˜¯ä»JVMç³»ç»Ÿå±æ€§è·å–MODE_PROPERTY_NAMEï¼‰ã€‚</span></p>\n<h3>æ’ä»¶ä¸æ’ä»¶ä¹‹é—´çš„ç›®å½•è‡ªå®šä¹‰</h3>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/589642/202512/589642-20251229210110653-256153991.png\" /></p>\n<p><span style=\"font-size: 15px;\">æˆ‘ä»¬è®¾è®¡çš„å…·ä½“æ’ä»¶æœ‰2ä¸ªå±‚çº§ï¼Œå°†æ’ä»¶jaråŒ…å»é™¤ç‰ˆæœ¬å·çš„åç§°ä½œä¸ºæ’ä»¶ç›®å½•ï¼Œå…¶ç›®å½•ä¸‹æ”¾æ’ä»¶jaråŒ…ï¼ŒåŒæ—¶è¿˜æœ‰ä¸ªlibç›®å½•ï¼Œè¯¥libç›®å½•ç”¨äºå­˜æ”¾æ’ä»¶çš„ä¾èµ–ï¼Œæ­¤ä¾èµ–æ—¢å¯æ¥æºäºæ’ä»¶å¼•å…¥ç‹¬ç«‹ä¾èµ–çš„mvnä»“åº“åŒ…ï¼Œä¹Ÿå¯æ¥æºäºä¸å¤–éƒ¨å¯¹æ¥æ—¶çš„ç§æœ‰åŒ…ï¼ˆä¸å­˜åœ¨äºmvnä»“åº“ï¼‰ã€‚ å¾ˆæ˜¾ç„¶ï¼Œpf4jä¸æ”¯æŒï¼ˆä¸€å¥è¯æ¦‚æ‹¬ï¼špf4jæ²¡æœ‰æ’ä»¶ç›®å½•å±‚çº§ä¹‹åˆ†ï¼Œæ‰€æœ‰æ’ä»¶jaråŒ…ç»Ÿä¸€æ”¾åˆ°æ’ä»¶ç›®å½•ä¸‹ä»¥åŠä¾èµ–ä¹Ÿç»Ÿä¸€æ”¾åˆ°æ’ä»¶ç›®å½•ä¸‹çš„libç›®å½•ä¸‹ï¼Œåœ¨æ­¤ä¸å†åšè¿›ä¸€æ­¥çš„æºç è®²è§£ï¼‰ï¼Œæˆ‘ä»¬é‡å†™å…¶æ–¹æ³•å®ç°</span></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/589642/202512/589642-20251229232706985-1871234307.png\" /></p>\n<p><span style=\"font-size: 15px;\">å¦‚ä¸ŠBasePluginRepositoryä¸ºpf4jæä¾›çš„åŸºæœ¬å®ç°ï¼ŒåŒæ—¶pf4jè¿›ä¸€æ­¥æä¾›JarPluginRepositoryç»§æ‰¿BasePluginRepositoryï¼Œä»…ä»…åªæ˜¯ä½œä¸ºæ„é€ å‡½æ•°ä¼ é€’æ’ä»¶ç›®å½•è·¯å¾„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ç»§JarPluginRepositoryï¼Œé‡å†™ä¸Šè¿°streamFilesæ–¹æ³•å³å¯ï¼Œè¯¥æ–¹æ³•æœ‰2ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªåˆ™æ˜¯æ’ä»¶ç›®å½•è·¯å¾„ï¼Œç¬¬äºŒä¸ªåˆ™æ˜¯æ–‡ä»¶ç±»å‹è¿‡æ»¤ï¼ˆjarï¼‰</span></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/589642/202512/589642-20251229233338450-1680010069.png\" /></p>\n<p><span style=\"font-size: 15px;\">ä¸Šè¿°æˆ‘ä»¬å·²é‡å†™æœ€ç»ˆå¾—åˆ°çš„å°†æ˜¯å…·ä½“æ’ä»¶jaråŒ…è·¯å¾„ï¼Œè¿™é‡Œæˆ‘ä»¬å¯è€ƒè™‘åšä¸¤æ–¹é¢å¤„ç†ï¼Œä¸€æ˜¯å¼ºæ ¡éªŒæ’ä»¶ç›®å½•çš„åç§°å’ŒjaråŒ…å¿½ç•¥ç‰ˆæœ¬å·çš„åç§°æ˜¯å¦å®Œå…¨ä¸€è‡´ï¼ŒäºŒæ˜¯ç‰ˆæœ¬å†²çªå¤„ç†å³å­˜åœ¨ä¸åŒç‰ˆæœ¬çš„jaråŒ…æ—¶ï¼Œä¾‹å¦‚å¯ä»¥æ ¹æ®ç‰ˆæœ¬çº¦å®šä¿—æˆçš„alphaã€rcã€releaseç‰ˆæœ¬ç­‰è§„åˆ™å–æœ€æ–°çš„jaråŒ…ï¼Œå…¶ä»–å„å‡­å®é™…æƒ…å†µè‡ªç”±å‘æŒ¥ã€‚</span></p>\n<h3>æ’ä»¶ç‹¬ç«‹ä¾èµ–åŒ…è§£æ</h3>\n<p><span style=\"font-size: 15px;\">ä¸Šè¿°ä»…ä»…åªæ˜¯å–åˆ°äº†å…·ä½“æ’ä»¶jaråŒ…è·¯å¾„ï¼Œæ¥ä¸‹æ¥é€šè¿‡ç±»åŠ è½½å™¨åŠ è½½jaråŒ…ä»¥åŠåŠ è½½ä¾èµ–ï¼Œé¦–å…ˆéœ€è¦è®¨è®ºç±»åŠ è½½å™¨çš„äº‹æƒ…ï¼Œä¸ªäººè®¤ä¸ºpf4jçš„ç±»åŠ è½½å™¨è€ƒè™‘çš„å¾ˆå‘¨åˆ°ï¼Œè®¾è®¡çš„æ¯”è¾ƒçµæ´»ï¼Œä½†æˆ‘ä»¬å®é™…å¯ä»¥ç¨å¾®ç®€åŒ–ä¸‹ï¼Œ<span style=\"color: rgba(255, 102, 0, 1);\">æ ¸å¿ƒæ€è·¯æ€»ç»“èµ·æ¥ä¸»è¦ä¹Ÿå°±4ç‚¹ï¼šéµå¾ªâ€œåŒäº²å§”æ´¾â€ åŸºç¡€è§„åˆ™ï¼Œå…ˆæ£€æŸ¥ç±»æ˜¯å¦å·²åŠ è½½ï¼Œé¿å…é‡å¤åŠ è½½â†’éµå¾ªåŒäº²å§”æ´¾æ ¸å¿ƒæ€æƒ³ï¼Œä¼˜å…ˆä»ä¸»åº”ç”¨ï¼ˆçˆ¶ç±»åŠ è½½å™¨ï¼‰åŠ è½½â†’æ’ä»¶ä¸“å±ç±»ä¼˜å…ˆä»æ’ä»¶åŠ è½½ï¼ˆå¯é€‰ï¼‰â†’ç±»ä»æ’ä»¶åŠ è½½â†’è‡ªå®šä¹‰é¢å¤–ç±»è·¯å¾„å…œåº•ï¼ˆå¯é€‰ï¼‰â†’æœ€ç»ˆåŠ è½½å¤±è´¥æŠ›å¼‚å¸¸</span>ã€‚å½“ç„¶å®é™…æƒ…å†µä¸‹æˆ‘ä»¬å¯èƒ½ä¹Ÿæœ‰å…¶ä»–è€ƒè™‘ï¼Œå¯çœ‹çœ‹pf4jç±»åŠ è½½å™¨æºç è‡ªè¡Œåšå–èˆï¼Œå¦‚ä¸‹è‡ªå®šä¹‰ç»§æ‰¿</span></p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">class</span> GJPluginClassLoader <span style=\"color: rgba(0, 0, 255, 1);\">extends</span><span style=\"color: rgba(0, 0, 0, 1);\"> PluginClassLoader {\n\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">private</span> <span style=\"color: rgba(0, 0, 255, 1);\">static</span> <span style=\"color: rgba(0, 0, 255, 1);\">final</span> Logger log = LoggerFactory.getLogger(GJPluginClassLoader.<span style=\"color: rgba(0, 0, 255, 1);\">class</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n\n    </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> æ’ä»¶ä¸“å±èµ„æº</span>\n    <span style=\"color: rgba(0, 0, 255, 1);\">private</span> <span style=\"color: rgba(0, 0, 255, 1);\">static</span> <span style=\"color: rgba(0, 0, 255, 1);\">final</span> Set&lt;String&gt; PLUGIN_FIRST_RESOURCES =<span style=\"color: rgba(0, 0, 0, 1);\"> Set.of(\n            </span>\"META-INF/extensions.idx\"<span style=\"color: rgba(0, 0, 0, 1);\">\n    );\n\n  @Override\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">protected</span> Class&lt;?&gt; loadClass(String name, <span style=\"color: rgba(0, 0, 255, 1);\">boolean</span> resolve) <span style=\"color: rgba(0, 0, 255, 1);\">throws</span><span style=\"color: rgba(0, 0, 0, 1);\"> ClassNotFoundException {\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> 1. æ£€æŸ¥æ˜¯å¦å·²åŠ è½½</span>\n        Class&lt;?&gt; loadedClass =<span style=\"color: rgba(0, 0, 0, 1);\"> findLoadedClass(name);\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> (loadedClass != <span style=\"color: rgba(0, 0, 255, 1);\">null</span><span style=\"color: rgba(0, 0, 0, 1);\">) {\n            </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> loadedClass;\n        }\n\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> 2. ä¼˜å…ˆä»ä¸»åº”ç”¨ï¼ˆçˆ¶ç±»åŠ è½½å™¨ï¼‰åŠ è½½</span>\n        <span style=\"color: rgba(0, 0, 255, 1);\">try</span><span style=\"color: rgba(0, 0, 0, 1);\"> {\n            </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> parentClassLoader.loadClass(name);\n        } </span><span style=\"color: rgba(0, 0, 255, 1);\">catch</span><span style=\"color: rgba(0, 0, 0, 1);\"> (ClassNotFoundException e) {\n            log.debug(</span>\"Class {} not found in parent classloader, trying plugin\"<span style=\"color: rgba(0, 0, 0, 1);\">, name);\n        }\n\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> 3. æ£€æŸ¥æ˜¯å¦æ˜¯æ’ä»¶ä¸“ç”¨èµ„æºï¼ˆä¼˜å…ˆä»æ’ä»¶åŠ è½½ï¼‰</span>\n        <span style=\"color: rgba(0, 0, 255, 1);\">if</span><span style=\"color: rgba(0, 0, 0, 1);\"> (isPluginOnlyResource(name)) {\n            </span><span style=\"color: rgba(0, 0, 255, 1);\">try</span><span style=\"color: rgba(0, 0, 0, 1);\"> {\n                Class</span>&lt;?&gt; pluginClass = <span style=\"color: rgba(0, 0, 255, 1);\">super</span><span style=\"color: rgba(0, 0, 0, 1);\">.loadClass(name, resolve);\n                </span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> (pluginClass != <span style=\"color: rgba(0, 0, 255, 1);\">null</span><span style=\"color: rgba(0, 0, 0, 1);\">) {\n                    </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> pluginClass;\n                }\n            } </span><span style=\"color: rgba(0, 0, 255, 1);\">catch</span><span style=\"color: rgba(0, 0, 0, 1);\"> (ClassNotFoundException ignored) {\n            }\n        }\n\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> 4. å°è¯•ä»æ’ä»¶ä¸­åŠ è½½</span>\n        <span style=\"color: rgba(0, 0, 255, 1);\">try</span><span style=\"color: rgba(0, 0, 0, 1);\"> {\n            Class</span>&lt;?&gt; pluginClass = <span style=\"color: rgba(0, 0, 255, 1);\">super</span><span style=\"color: rgba(0, 0, 0, 1);\">.loadClass(name, resolve);\n            </span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> (pluginClass != <span style=\"color: rgba(0, 0, 255, 1);\">null</span><span style=\"color: rgba(0, 0, 0, 1);\">) {\n                </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> pluginClass;\n            }\n        } </span><span style=\"color: rgba(0, 0, 255, 1);\">catch</span><span style=\"color: rgba(0, 0, 0, 1);\"> (ClassNotFoundException e) {\n            log.warn(</span>\"Class {} not found in plugin, trying additional paths\"<span style=\"color: rgba(0, 0, 0, 1);\">, name);\n        }\n\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> 5. æœ€åä»é¢å¤–ç±»è·¯å¾„ä¸­æŸ¥æ‰¾</span>\n        Class&lt;?&gt; additionalClass =<span style=\"color: rgba(0, 0, 0, 1);\"> findClassInAdditionalPaths(name);\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> (additionalClass != <span style=\"color: rgba(0, 0, 255, 1);\">null</span><span style=\"color: rgba(0, 0, 0, 1);\">) {\n            </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> additionalClass;\n        }\n\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">throw</span> <span style=\"color: rgba(0, 0, 255, 1);\">new</span> ClassNotFoundException(\"Class \" + name + \" not found in parent, plugin or additional paths\"<span style=\"color: rgba(0, 0, 0, 1);\">);\n    }</span></pre>\n</div>\n<p><span style=\"font-size: 15px;\">æ—¢ç„¶æˆ‘ä»¬å·²è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œé‚£ä¹ˆä½•æ—¶å®ä¾‹åŒ–ç±»åŠ è½½å™¨å‘¢ï¼Œå°±åœ¨æˆ‘ä»¬ç»§æ‰¿åº•å±‚</span>DefaultPluginManager<span style=\"font-size: 15px;\">è‡ªå®šä¹‰çš„PluginManageré‡Œé¢é‡å†™createPluginLoaderæ–¹æ³•</span></p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 0, 1);\">    @Override\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">protected</span><span style=\"color: rgba(0, 0, 0, 1);\"> PluginLoader createPluginLoader() {\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span> <span style=\"color: rgba(0, 0, 255, 1);\">new</span> GJJarPluginLoader(<span style=\"color: rgba(0, 0, 255, 1);\">this</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n    }</span></pre>\n</div>\n<p><span style=\"font-size: 15px;\">ä¸Šè¿°æˆ‘ä»¬æä¾›ç»§æ‰¿è‡ªåº•å±‚çš„PluginClassLoaderè‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œæˆ‘ä»¬å¼€å§‹åŠ è½½jaråŒ…åŠå…¶ä¾èµ–ï¼Œæ­¤æ—¶åˆå¾—éœ€è¦è‡ªå®šä¹‰jaråŒ…åŠ è½½ç±»ç»§æ‰¿è‡ªåº•å±‚çš„JarPluginLoaderï¼Œå…¨éƒ¨ä»£ç ä¸€è´´å¦‚ä¸‹ï¼š</span></p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">class</span> GJJarPluginLoader <span style=\"color: rgba(0, 0, 255, 1);\">extends</span><span style=\"color: rgba(0, 0, 0, 1);\"> JarPluginLoader {\n\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">private</span> <span style=\"color: rgba(0, 0, 255, 1);\">static</span> <span style=\"color: rgba(0, 0, 255, 1);\">final</span> Logger log = LoggerFactory.getLogger(GJJarPluginLoader.<span style=\"color: rgba(0, 0, 255, 1);\">class</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">private</span> <span style=\"color: rgba(0, 0, 255, 1);\">static</span> <span style=\"color: rgba(0, 0, 255, 1);\">final</span> String LIB_DIR = \"lib\"<span style=\"color: rgba(0, 0, 0, 1);\">;\n\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span><span style=\"color: rgba(0, 0, 0, 1);\"> GJJarPluginLoader(PluginManager pluginManager) {\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">super</span><span style=\"color: rgba(0, 0, 0, 1);\">(pluginManager);\n    }\n\n    @Override\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">boolean</span><span style=\"color: rgba(0, 0, 0, 1);\"> isApplicable(Path pluginPath) {\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span> Files.exists(pluginPath) &amp;&amp;<span style=\"color: rgba(0, 0, 0, 1);\"> FileUtils.isJarFile(pluginPath);\n    }\n\n    @Override\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span><span style=\"color: rgba(0, 0, 0, 1);\"> ClassLoader loadPlugin(Path pluginPath, PluginDescriptor pluginDescriptor) {\n        GJPluginClassLoader pluginClassLoader </span>= <span style=\"color: rgba(0, 0, 255, 1);\">new</span> GJPluginClassLoader(<span style=\"color: rgba(0, 0, 255, 1);\">this</span>.pluginManager, pluginDescriptor, <span style=\"color: rgba(0, 0, 255, 1);\">this</span><span style=\"color: rgba(0, 0, 0, 1);\">.getClass().getClassLoader());\n        pluginClassLoader.addFile(pluginPath.toFile());\n        loadDependencyJars(pluginPath, pluginClassLoader);\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> pluginClassLoader;\n    }\n\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">void</span><span style=\"color: rgba(0, 0, 0, 1);\"> loadDependencyJars(Path pluginPath, GJPluginClassLoader pluginClassLoader) {\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> æ’ä»¶ JAR æ‰€åœ¨ç›®å½•</span>\n        Path pluginDir =<span style=\"color: rgba(0, 0, 0, 1);\"> pluginPath.getParent();\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> (pluginDir == <span style=\"color: rgba(0, 0, 255, 1);\">null</span><span style=\"color: rgba(0, 0, 0, 1);\">) {\n            log.warn(</span>\"Plugin path has no parent directory: {}\"<span style=\"color: rgba(0, 0, 0, 1);\">, pluginPath);\n            </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n        }\n        Path libDir </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> pluginDir.resolve(LIB_DIR);\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> 1. LIB_DIRä¸å­˜åœ¨ï¼Œè¯´æ˜æ— ä¾èµ–ï¼Œå¿½ç•¥åŠ è½½ç‹¬ç«‹ä¾èµ–</span>\n        <span style=\"color: rgba(0, 0, 255, 1);\">if</span> (!<span style=\"color: rgba(0, 0, 0, 1);\">Files.exists(libDir)) {\n            </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n        }\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> 2. ä» MANIFEST.MF è¯»å– Class-Path å£°æ˜çš„ä¾èµ–</span>\n        List&lt;Path&gt; declaredPaths =<span style=\"color: rgba(0, 0, 0, 1);\"> getDeclaredClassPathJars(pluginPath);\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">if</span><span style=\"color: rgba(0, 0, 0, 1);\"> (declaredPaths.isEmpty()) {\n            log.debug(</span>\"No Class-Path found in MANIFEST.MF\"<span style=\"color: rgba(0, 0, 0, 1);\">);\n            </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n        }\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> 3. æå– Class-Path ä¸­æ‰€æœ‰æŒ‡å‘ lib/ ä¸‹çš„ JAR æ–‡ä»¶åï¼ˆæ ‡å‡†åŒ–ä¸ºæ–‡ä»¶åï¼‰</span>\n        Set&lt;String&gt; declaredJarNames =<span style=\"color: rgba(0, 0, 0, 1);\"> getDeclaredJarNames(declaredPaths);\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">if</span><span style=\"color: rgba(0, 0, 0, 1);\"> (declaredJarNames.isEmpty()) {\n            </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n        }\n        Set</span>&lt;String&gt; loadedJarNames = <span style=\"color: rgba(0, 0, 255, 1);\">new</span> HashSet&lt;&gt;<span style=\"color: rgba(0, 0, 0, 1);\">();\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">try</span> (Stream&lt;Path&gt; stream =<span style=\"color: rgba(0, 0, 0, 1);\"> Files.list(libDir)) {\n            List</span>&lt;Path&gt; libJars =<span style=\"color: rgba(0, 0, 0, 1);\"> stream\n                    .filter(Files::isRegularFile)\n                    .filter(path </span>-&gt; path.getFileName().toString().endsWith(\".jar\"<span style=\"color: rgba(0, 0, 0, 1);\">))\n                    .toList();\n\n            </span><span style=\"color: rgba(0, 0, 255, 1);\">for</span><span style=\"color: rgba(0, 0, 0, 1);\"> (Path jarPath : libJars) {\n                String jarName </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> jarPath.getFileName().toString();\n\n                </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> åªåŠ è½½ Class-Path ä¸­å£°æ˜çš„ JAR</span>\n                <span style=\"color: rgba(0, 0, 255, 1);\">if</span> (!<span style=\"color: rgba(0, 0, 0, 1);\">declaredJarNames.contains(jarName)) {\n                    log.warn(</span>\"Ignored undeclared JAR in lib/: {}\"<span style=\"color: rgba(0, 0, 0, 1);\">, jarName);\n                    </span><span style=\"color: rgba(0, 0, 255, 1);\">continue</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n                }\n\n                </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> é¿å…é‡å¤åŠ è½½</span>\n                <span style=\"color: rgba(0, 0, 255, 1);\">if</span> (!<span style=\"color: rgba(0, 0, 0, 1);\">loadedJarNames.add(jarName)) {\n                    log.warn(</span>\"Duplicate JAR in lib/: {}\"<span style=\"color: rgba(0, 0, 0, 1);\">, jarName);\n                    </span><span style=\"color: rgba(0, 0, 255, 1);\">continue</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n                }\n\n                </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> ä½¿ç”¨ PF4J æ ‡å‡†æ–¹æ³•æ·»åŠ </span>\n<span style=\"color: rgba(0, 0, 0, 1);\">                pluginClassLoader.addFile(jarPath.toFile());\n                log.debug(</span>\"Loaded dependency JAR: {}\"<span style=\"color: rgba(0, 0, 0, 1);\">, jarName);\n            }\n        } </span><span style=\"color: rgba(0, 0, 255, 1);\">catch</span><span style=\"color: rgba(0, 0, 0, 1);\"> (IOException e) {\n            log.error(</span>\"Failed to scan lib directory: {}\"<span style=\"color: rgba(0, 0, 0, 1);\">, libDir, e);\n        }\n    }\n\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">private</span> Set&lt;String&gt; getDeclaredJarNames(List&lt;Path&gt;<span style=\"color: rgba(0, 0, 0, 1);\"> declaredPaths) {\n        Set</span>&lt;String&gt; declaredJarNames =<span style=\"color: rgba(0, 0, 0, 1);\"> declaredPaths.stream()\n                .filter(path </span>-&gt;<span style=\"color: rgba(0, 0, 0, 1);\"> {\n                    </span><span style=\"color: rgba(0, 0, 255, 1);\">try</span><span style=\"color: rgba(0, 0, 0, 1);\"> {\n                        </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span> path.startsWith(LIB_DIR) ||<span style=\"color: rgba(0, 0, 0, 1);\">\n                                path.getFileName().toString().equals(path.toString());\n                    } </span><span style=\"color: rgba(0, 0, 255, 1);\">catch</span><span style=\"color: rgba(0, 0, 0, 1);\"> (Exception e) {\n                        </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span> <span style=\"color: rgba(0, 0, 255, 1);\">false</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n                    }\n                })\n                .map(path </span>-&gt;<span style=\"color: rgba(0, 0, 0, 1);\"> {\n                    </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> å¤„ç†ç›¸å¯¹è·¯å¾„ï¼ˆå¦‚ \"lib/xxx.jar\"ï¼‰</span>\n                    <span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> path.getFileName().toString();\n                })\n                .collect(Collectors.toSet());\n\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">if</span><span style=\"color: rgba(0, 0, 0, 1);\"> (declaredJarNames.isEmpty()) {\n            log.debug(</span>\"No lib JARs declared in Class-Path\"<span style=\"color: rgba(0, 0, 0, 1);\">);\n        }\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> declaredJarNames;\n    }\n\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">private</span> List&lt;Path&gt;<span style=\"color: rgba(0, 0, 0, 1);\"> getDeclaredClassPathJars(Path pluginJarPath) {\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">try</span> (JarFile jarFile = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> JarFile(pluginJarPath.toFile())) {\n            Manifest manifest </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> jarFile.getManifest();\n            </span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> (manifest == <span style=\"color: rgba(0, 0, 255, 1);\">null</span><span style=\"color: rgba(0, 0, 0, 1);\">) {\n                </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> Collections.emptyList();\n            }\n\n            Attributes mainAttrs </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> manifest.getMainAttributes();\n            String classPath </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> mainAttrs.getValue(Attributes.Name.CLASS_PATH);\n\n            </span><span style=\"color: rgba(0, 0, 255, 1);\">if</span> (classPath == <span style=\"color: rgba(0, 0, 255, 1);\">null</span> ||<span style=\"color: rgba(0, 0, 0, 1);\"> classPath.trim().isEmpty()) {\n                </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> Collections.emptyList();\n            }\n            </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> æŒ‰ç©ºæ ¼åˆ†å‰²ï¼ˆæ”¯æŒå¤šä¸ªç©ºæ ¼ï¼‰</span>\n            <span style=\"color: rgba(0, 0, 255, 1);\">return</span> Arrays.stream(classPath.trim().split(\"\\\\s+\"<span style=\"color: rgba(0, 0, 0, 1);\">))\n                    .filter(s </span>-&gt; !<span style=\"color: rgba(0, 0, 0, 1);\">s.isEmpty())\n                    .map(Paths::get)\n                    .collect(Collectors.toList());\n        } </span><span style=\"color: rgba(0, 0, 255, 1);\">catch</span><span style=\"color: rgba(0, 0, 0, 1);\"> (Exception e) {\n            </span><span style=\"color: rgba(0, 0, 255, 1);\">throw</span> <span style=\"color: rgba(0, 0, 255, 1);\">new</span> RuntimeException(\"Failed to read Class-Path from plugin manifest: \" +<span style=\"color: rgba(0, 0, 0, 1);\"> pluginJarPath, e);\n        }\n    }\n}</span></pre>\n</div>\n<p><span style=\"font-size: 15px;\">ä¸Šè¿°æ€»ç»“èµ·æ¥ä¸€å¥è¯ï¼š<span style=\"color: rgba(255, 102, 0, 1);\">æ’ä»¶åŒ…å…ˆæŠ•å…¥ç±»åŠ è½½å™¨ï¼Œå†å°†æ’ä»¶libç›®å½•ç‹¬ç«‹ä¾èµ–æŠ•å…¥ç±»åŠ è½½å™¨ï¼Œä½†å°¤å…¶éœ€è¦æ³¨æ„2ç‚¹æ¶‰åŠå®‰å…¨æ–¹é¢çš„è€ƒè™‘ï¼Œä¸€æ˜¯é˜²æ­¢è·¯å¾„ç©¿è¶Šï¼ŒäºŒæ˜¯åœ¨åˆ©ç”¨mvnè‡ªåŠ¨åŒ–æ„å»ºæ—¶å°†libä¸‹æ‰€æœ‰ä¾èµ–å†™å…¥åˆ°JARæ¸…å•æ–‡ä»¶MANIFEST.MFï¼ˆå¹¶ä¸æ˜¯éšéšä¾¿ä¾¿æ”¾ä¸ªJARåŒ…åˆ°libç›®å½•ä¸‹æˆ‘ä»¬å°±ä»»æ„å»åŠ è½½ï¼Œå½“ç„¶æ›´é‡è¦çš„å‰ç½®æ¡ä»¶æ˜¯å½“æ’ä»¶æ”¾åˆ°å¹³å°æ’ä»¶ç›®å½•ä¸‹æ—¶è‚¯å®šè¦åšSHA256ç­‰ç­‰ä¸€è‡´æ€§æ ¡éªŒï¼‰</span></span></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/589642/202512/589642-20251230002407615-539248996.png\" /></p>\n<h3>æ’ä»¶ä¸æ’ä»¶ç›¸äº’ä¾èµ–è§£æ</h3>\n<p><span style=\"font-size: 15px;\">pf4jä»¥é€†æ‹“æ‰‘æ’åºè§£ææ’ä»¶ä¾èµ–ï¼Œæ’ä»¶ä¾èµ–ç”±çº¦å®šçš„plugin.propertiesä¸­çš„plugin.dependencieså±æ€§å®šä¹‰æ’ä»¶ä¾èµ–ï¼Œè‹¥ä¾èµ–æ’ä»¶gj.plugin.demo2å’Œgj.plugin.demo3ï¼ˆå¯é€‰æ˜¯å¦å¸¦ä¸Šç‰ˆæœ¬å·ï¼‰ï¼Œé‚£ä¹ˆï¼š<span style=\"color: rgba(255, 102, 0, 1);\">plugin.dependencies=gj.plugin.demo2@1.0.0-SNAPSHOT,gj.plugin.demo2@1.0.0-SNAPSHOTã€‚æ³¨æ„å¤šä¸ªä¾èµ–ç”¨è‹±æ–‡åŠè§’ç¬¦å·éš”å¼€ï¼ŒåŒæ—¶è‹¥å‡ºç°å¾ªç¯ä¾èµ–åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œä¸ç”¨æ‹…å¿ƒæ­»å¾ªç¯é—®é¢˜</span></span></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/589642/202512/589642-20251230003923658-1583916127.png\" /></p>\n<h3>æ’ä»¶åŠ è½½å¼‚å¸¸è‡ªå®šä¹‰ç­–ç•¥</h3>\n<p><span style=\"font-size: 15px; color: rgba(255, 102, 0, 1);\">å¤šä¸ªæ’ä»¶åŠ è½½ï¼Œè‹¥æŸä¸ªæ’ä»¶å‡ºç°åŠ è½½å¼‚å¸¸æˆ‘ä»¬å¯èƒ½å¹¶ä¸å¸Œæœ›å½±å“å…¶ä»–æ’ä»¶çš„æ­£å¸¸åŠ è½½ï¼Œpf4jæä¾›äº†æ’ä»¶åŠ è½½å¼‚å¸¸ç­–ç•¥ï¼Œé»˜è®¤æ˜¯ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</span></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/589642/202512/589642-20251230005419485-1178931856.png\" /></p>\n<p><span style=\"font-size: 15px;\">è‹¥éœ€è°ƒæ•´æ’ä»¶åŠ è½½å¼‚å¸¸ç­–ç•¥ï¼Œæˆ‘ä»¬åœ¨ç»§æ‰¿åº•å±‚DefaultPluginManagerè‡ªå®šä¹‰çš„PluginManageré‡Œé¢é‡å†™initializeæ–¹æ³•ï¼Œåœ¨è°ƒç”¨çˆ¶ç±»åˆå§‹åŒ–æ–¹æ³•åé‡å†™å…¶ç­–ç•¥å³å¯</span></p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 0, 1);\">   @Override\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">protected</span> <span style=\"color: rgba(0, 0, 255, 1);\">void</span><span style=\"color: rgba(0, 0, 0, 1);\"> initialize() {\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">super</span><span style=\"color: rgba(0, 0, 0, 1);\">.initialize();\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> è¦†ç›–é»˜è®¤è®¾ç½®è§£æä¾èµ–å¼‚å¸¸ä¸å½±å“å…¶ä»–æ’ä»¶æ­£å¸¸åŠ è½½</span>\n        <span style=\"color: rgba(0, 0, 255, 1);\">this</span>.resolveRecoveryStrategy =<span style=\"color: rgba(0, 0, 0, 1);\"> ResolveRecoveryStrategy.IGNORE_PLUGIN_AND_CONTINUE;\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">this</span>.configurationRepository =<span style=\"color: rgba(0, 0, 0, 1);\"> createConfigurationRepository();\n    }</span></pre>\n</div>\n<h2>æ€»ç»“</h2>\n<p><span style=\"font-size: 15px;\">è¿˜æ²¡å®Œï¼Œç•™ä¸ªå½©è›‹ï¼š<span style=\"color: rgba(255, 102, 0, 1);\">pf4jé»˜è®¤çš„PluginManagerå¯¹æ’ä»¶çš„ç›¸å…³æ“ä½œéçº¿ç¨‹å®‰å…¨ï¼Œæ‰€ä»¥è¯·æ³¨æ„å•ä¸ªæ’ä»¶æ“ä½œçš„åŸå­æ€§</span><span style=\"color: rgba(255, 102, 0, 1);\">ã€‚</span>å¦‚ä¸Šå¯¹pf4jäºŒæ¬¡å°è£…æ¨¡å—åŒ–å¤§è‡´è®¾è®¡æ€è·¯ï¼Œä»…ä¾›å„ä½å‚è€ƒï¼Œæœ¬æ–‡æš‚åˆ°æ­¤ä¸ºæ­¢ï¼Œæ„Ÿè°¢é˜…è¯»ã€‚&nbsp;</span></p>\n</div>\n<div id=\"MySignature\">\n    ä½ æ‰€çœ‹åˆ°çš„å¹¶éäº‹ç‰©æœ¬èº«ï¼Œè€Œæ˜¯ç»è¿‡è¯ é‡Šåæ‰€èµ‹äºˆçš„æ„ä¹‰\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2025-12-30 08:00</span>&nbsp;\n<a href=\"https://www.cnblogs.com/CreateMyself\">Jeffcky</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">32</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹å››ï¼šè®¡ç®—æœºè§†è§‰ ç¬¬å››å‘¨ï¼šå·ç§¯ç½‘ç»œåº”ç”¨ (ä¸€) äººè„¸è¯†åˆ«",
      "link": "https://www.cnblogs.com/Goblinscholar/p/19418306",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/Goblinscholar/p/19418306\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2025-12-29 23:52\">\n    <span>å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹å››ï¼šè®¡ç®—æœºè§†è§‰ ç¬¬å››å‘¨ï¼šå·ç§¯ç½‘ç»œåº”ç”¨ (ä¸€) äººè„¸è¯†åˆ«</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<p>æ­¤åˆ†ç±»ç”¨äºè®°å½•å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹çš„å­¦ä¹ ç¬”è®°ã€‚<br />\nè¯¾ç¨‹ç›¸å…³ä¿¡æ¯é“¾æ¥å¦‚ä¸‹ï¼š</p>\n<ol>\n<li>åŸè¯¾ç¨‹è§†é¢‘é“¾æ¥ï¼š<a href=\"https://www.bilibili.com/video/BV1FT4y1E74V?buvid=XU762317353676D786954061C192FE625463B&amp;from_spmid=playlist.playlist-detail.0.0&amp;is_story_h5=false&amp;mid=zqernykrmpf7XfIorMR%2FnA%3D%3D&amp;plat_id=116&amp;share_from=ugc&amp;share_medium=android&amp;share_plat=android&amp;share_session_id=ce0bc526-db69-428a-962e-c65ed8c267bc&amp;share_source=COPY&amp;share_tag=s_i&amp;spmid=united.player-video-detail.0.0&amp;timestamp=1713085655&amp;unique_k=DfBgvFW&amp;up_id=8654113&amp;vd_source=e035e9878d32f414b4354b839a4c31a4\" rel=\"noopener nofollow\" target=\"_blank\">[åŒè¯­å­—å¹•]å´æ©è¾¾æ·±åº¦å­¦ä¹ deeplearning.ai</a></li>\n<li>githubè¯¾ç¨‹èµ„æ–™ï¼Œå«è¯¾ä»¶ä¸ç¬”è®°:<a href=\"https://github.com/robbertliu/deeplearning.ai-andrewNG\" rel=\"noopener nofollow\" target=\"_blank\">å´æ©è¾¾æ·±åº¦å­¦ä¹ æ•™å­¦èµ„æ–™</a></li>\n<li>è¯¾ç¨‹é…å¥—ç»ƒä¹ ï¼ˆä¸­è‹±ï¼‰ä¸ç­”æ¡ˆï¼š<a href=\"https://blog.csdn.net/u013733326/article/details/79827273\" rel=\"noopener nofollow\" target=\"_blank\">å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾åä¹ é¢˜ä¸ç­”æ¡ˆ</a></li>\n</ol>\n<p>æœ¬ç¯‡ä¸ºç¬¬å››è¯¾çš„ç¬¬å››å‘¨å†…å®¹ï¼Œ<a href=\"https://www.bilibili.com/video/BV1FT4y1E74V?spm_id_from=333.788.videopod.episodes&amp;vd_source=e035e9878d32f414b4354b839a4c31a4&amp;p=140\" rel=\"noopener nofollow\" target=\"_blank\">4.1</a>åˆ°<a href=\"https://www.bilibili.com/video/BV1FT4y1E74V?spm_id_from=333.788.videopod.episodes&amp;vd_source=e035e9878d32f414b4354b839a4c31a4&amp;p=144\" rel=\"noopener nofollow\" target=\"_blank\">4.5</a>çš„å†…å®¹ã€‚</p>\n<hr />\n<p>æœ¬å‘¨ä¸ºç¬¬å››è¯¾çš„ç¬¬å››å‘¨å†…å®¹ï¼Œè¿™ä¸€è¯¾æ‰€æœ‰å†…å®¹çš„ä¸­å¿ƒåªæœ‰ä¸€ä¸ªï¼š<strong>è®¡ç®—æœºè§†è§‰</strong>ã€‚åº”ç”¨åœ¨æ·±åº¦å­¦ä¹ é‡Œï¼Œå°±æ˜¯ä¸“é—¨ç”¨æ¥è¿›è¡Œå›¾å­¦ä¹ çš„æ¨¡å‹å’ŒæŠ€æœ¯ï¼Œæ˜¯åœ¨ä¹‹å‰å…¨è¿æ¥åŸºç¡€ä¸Šçš„â€œç‰¹åŒ–â€ï¼Œä¹Ÿæ˜¯ç›¸å…³ä¸“ä¸šé‡Œçš„ä¸€ä¸ªé‡è¦ç ”ç©¶å¤§ç±»ã€‚<br />\n<strong>è¿™ä¸€æ•´èŠ‚è¯¾éƒ½å­˜åœ¨å¤§é‡éœ€è¦åå¤ç†è§£çš„å†…å®¹å’Œæœºå™¨å­¦ä¹ ã€æ•°å­¦åŸºç¡€ã€‚</strong> å› æ­¤æˆ‘ä¼šå°½å¯èƒ½çš„è¡¥è¶³åŸºç¡€ï¼Œç”¨æ¯”å–»å’Œå®ä¾‹æ¥æ¼”ç¤ºæ¯ä¸ªéƒ¨åˆ†ï¼Œä»è€Œå¸®åŠ©ç†è§£ã€‚<br />\nç¬¬å››å‘¨çš„å†…å®¹æ˜¯å¯¹å‰ä¸‰å‘¨å†…å®¹çš„ç»¼åˆåº”ç”¨ï¼Œä»‹ç»äº†ä¸€äº›é€šè¿‡å·ç§¯ç½‘ç»œå®ç°çš„å®é™…åº”ç”¨ï¼Œå®ƒä»¬åœ¨ä½¿ç”¨å·ç§¯ç½‘ç»œçš„åŸºç¡€ä¸Šåˆå„æœ‰è‡ªå·±çš„ç‰¹ç‚¹æ¥åŒ¹é…ä¸åŒçš„ä»»åŠ¡è¦æ±‚ï¼Œæ˜¯å¯¹<strong>å¦‚ä½•çœŸå®åº”ç”¨å·ç§¯ç½‘ç»œ</strong>çš„è‰¯å¥½æ¼”ç¤ºã€‚<br />\næœ¬ç¯‡çš„å†…å®¹å…³äº<strong>äººè„¸è¯†åˆ«</strong>ã€‚</p>\n<h1 id=\"1-äººè„¸éªŒè¯ä¸äººè„¸è¯†åˆ«\">1. äººè„¸éªŒè¯ä¸äººè„¸è¯†åˆ«</h1>\n<p>äººè„¸éªŒè¯å’Œäººè„¸è¯†åˆ«æ˜¯ä¸¤ä¸ªç›¸ä¼¼çš„æ¦‚å¿µã€‚<br />\nè€Œåœ¨äººè„¸è¯†åˆ«ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬è¯´<strong>äººè„¸éªŒè¯æ˜¯äººè„¸è¯†åˆ«çš„ä¸€ä¸ªåŸºæœ¬æ¨¡å—</strong>ã€‚<br />\nç°åœ¨å°±æ¥å±•å¼€ä¸€ä¸‹äºŒè€…çš„å…³ç³»ï¼š<br />\n<img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3708248/202512/3708248-20251229234636631-73929260.png\" /><br />\næˆ‘ä»¬åœ¨å›¾é‡Œæåˆ°<strong>äººè„¸éªŒè¯æ˜¯ä¸€ä¸ª1å¯¹1é—®é¢˜</strong>ï¼Œè¿™æ˜¯å› ä¸ºåœ¨å‡å®šéªŒè¯å™¨å®Œå…¨å‡†ç¡®çš„æƒ…å†µä¸‹ï¼Œå®ƒåªä¼šå¯¹ä¸€ä¸ªäººè¯´ â€œYesâ€ è€Œæ‹’ç»å…¶ä»–æ‰€æœ‰äººã€‚<br />\nå¾ˆæ˜¾ç„¶ï¼Œè¿™ç§é€»è¾‘åœ¨æˆ‘ä»¬å®é™…ç”Ÿæ´»ä¸­çš„å¤§å¤šåœºæ™¯éƒ½ä¸é€‚ç”¨ï¼Œå…¬å¸ã€å®¿èˆçš„é—¨ç¦ç­‰éƒ½æ”¯æŒé€šè¿‡ä¸€ä¸ªæ¨¡å‹è¯†åˆ«å¤šä¸ªäººã€‚è€Œä¸æ˜¯ä¸ºæ¯ä¸ªäººå•ç‹¬è®¾ç½®ä¸€ä¸ªé—¸æœºã€‚<br />\nå› æ­¤ï¼Œæˆ‘ä»¬ä¾¿ç§°è¿™ç§<strong>å®ç°â€œ1å¯¹å¤šâ€é€»è¾‘çš„ç›¸åº”ä»»åŠ¡ä¸ºäººè„¸è¯†åˆ«</strong>ã€‚<br />\næŒ‰ç…§åˆšæ‰çš„é€»è¾‘æ¨ä¸‹å»ï¼Œä¸€ä¸ªå¾ˆè‡ªç„¶ã€ä¹Ÿå¾ˆâ€œæœºå™¨å­¦ä¹ ç›´è§‰â€çš„æƒ³æ³•æ˜¯ï¼š<strong>é‚£äººè„¸è¯†åˆ«ä¸å°±æ˜¯ä¸€ä¸ªå¤šåˆ†ç±»é—®é¢˜å—ï¼Ÿ</strong> åƒè¿™æ ·ï¼š<br />\n<img alt=\"image.png\" src=\"https://img2024.cnblogs.com/blog/3708248/202512/3708248-20251229234219889-112044451.png\" /><br />\nä½†å¦‚æœåœ¨å®é™…éƒ¨ç½²ä¸­è¿™æ ·å®ç°äººè„¸è¯†åˆ«ï¼Œä½ ä¼šå‘ç°è¿™æ ·ä¸€äº›é—®é¢˜ï¼š</p>\n<ol>\n<li>å¦‚æœå•ä½æœ‰æ–°å‘˜å·¥åŠ å…¥æˆ–è€å‘˜å·¥ç¦»èŒï¼Œå°±è¦<strong>é‡æ–°è°ƒæ•´æ•°æ®å’Œç½‘ç»œè¾“å‡ºå±‚ï¼Œé‡æ–°è®­ç»ƒ</strong>ã€‚</li>\n<li>å½“å•ä½è§„æ¨¡è¾ƒå¤§æ—¶ï¼Œæ•°æ®å¯èƒ½åŒ…å«<strong>æˆåƒä¸Šä¸‡ä¸ªç±»åˆ«</strong>ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œæ¯ä¸ªç±»åˆ«æ•°æ®é‡å¾ˆå°‘ï¼Œè€Œæ·±åº¦å­¦ä¹ å¾€å¾€åˆä¾èµ–äº<strong>æ•°æ®é‡</strong>ï¼Œéš¾é“åŠç†å…¥èŒè¦å…ˆæ‹å‡ ç™¾å‡ åƒå¼ ç…§ç‰‡å—ï¼Ÿ</li>\n</ol>\n<p>å› æ­¤ï¼Œæˆ‘ä»¬å¾—å‡ºç»“è®ºï¼šå› ä¸ºäººè„¸è¯†åˆ«ä»»åŠ¡åœ¨å®é™…éƒ¨ç½²ä¸­çš„ç‰¹æ®Šæ€§ï¼Œè®©æˆ‘ä»¬ä¹‹å‰äº†è§£çš„å¸¸è§„<strong>åˆ†ç±»ç®—æ³•å¹¶ä¸é€‚ç”¨</strong>ä½œä¸ºä¸€ä¸ªå¯æŒç»­éƒ¨ç½²æ–¹æ¡ˆå¯¹å…¶åº”ç”¨ã€‚</p>\n<p>è€Œåœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œä½ ä¼šå‘ç°ï¼Œæˆ‘ä»¬åœ¨ç›¸å…³ç³»ç»Ÿå½•å…¥äººè„¸æ—¶ï¼Œ<strong>å¾€å¾€åªéœ€è¦ä¸€å¼ è¯ä»¶ç…§å³å¯</strong>ï¼Œè¿™æ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿæˆ‘ä»¬ç»§ç»­ã€‚</p>\n<h1 id=\"2-ä¸€æ¬¡å­¦ä¹ one-shot-learning\">2. ä¸€æ¬¡å­¦ä¹ ï¼ˆone-shot learningï¼‰</h1>\n<p>ç»§ç»­åˆšåˆšçš„å†…å®¹ï¼Œæˆ‘ä»¬ä¼šå‘ç°ä¸€ä¸ªçœ‹ä¼¼çŸ›ç›¾çš„ç°è±¡ï¼š<br />\nåœ¨å®é™…çš„äººè„¸ç³»ç»Ÿä¸­ï¼Œå½•å…¥ä¸€ä¸ªæ–°ç”¨æˆ·æ—¶ï¼Œ<strong>å¾€å¾€åªéœ€è¦ä¸€å¼ è¯ä»¶ç…§</strong>ã€‚ä½†åœ¨æ·±åº¦å­¦ä¹ çš„ç»éªŒè®¤çŸ¥é‡Œï¼Œæ¨¡å‹æ€§èƒ½åˆé«˜åº¦ä¾èµ–æ•°æ®é‡ã€‚  <strong>è¿™ä¸¤ç‚¹ï¼Œä¸å†²çªå—ï¼Ÿ</strong></p>\n<p>è¦ç†è§£è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå›åˆ°åˆšæ‰â€œæŠŠäººè„¸è¯†åˆ«å½“ä½œå¤šåˆ†ç±»é—®é¢˜â€çš„æ€è·¯ã€‚<br />\nåœ¨æ ‡å‡†çš„å¤šåˆ†ç±»ä»»åŠ¡ä¸­ï¼Œ<strong>åˆ†ç±»æ ‡ç­¾æœ¬èº«å°±ä¸ºæ•°æ®åˆ’åˆ†äº†æ˜ç¡®çš„è¾¹ç•Œ</strong>ï¼šæ¨¡å‹åªèƒ½é€šè¿‡<strong>åŒä¸€æ ‡ç­¾ä¸‹çš„æ ·æœ¬</strong>æ¥å­¦ä¹ è¯¥ç±»åˆ«çš„ç‰¹å¾ï¼Œè€Œä¸åŒç±»åˆ«ä¹‹é—´çš„æ•°æ®æ˜¯è¢«ä¸¥æ ¼éš”ç¦»ä½¿ç”¨çš„ã€‚<br />\næ­£å› ä¸ºå¦‚æ­¤ï¼Œå¦‚æœå°†äººè„¸è¯†åˆ«ç›´æ¥å»ºæ¨¡ä¸ºâ€œæ¯ä¸ªäººä¸€ä¸ªç±»åˆ«â€ï¼Œé‚£ä¹ˆæ¨¡å‹è¦å­¦å¥½æŸä¸€ä¸ªäººçš„ç‰¹å¾ï¼Œå°±å¿…ç„¶éœ€è¦<strong>å¤§é‡å±äºè¿™ä¸ªäººçš„æ ·æœ¬</strong>â€”â€”ä¹Ÿå°±å‡ºç°äº†â€œè¦ç»™æ¯ä¸ªäººæ‹å†™çœŸé›†â€çš„ä¸ç°å®è¦æ±‚ã€‚</p>\n<p>ä½†æ˜¯ï¼Œä½ ä¼šå‘ç°ï¼šåœ¨äººè„¸è¯†åˆ«ä»»åŠ¡ä¸­ï¼Œ<strong>æ€»çš„æ•°æ®é‡å…¶å®å¹¶ä¸å°‘</strong>ï¼ŒçœŸæ­£ç¨€ç¼ºçš„åªæ˜¯â€œæ¯ä¸ªèº«ä»½å¯¹åº”çš„æ ·æœ¬æ•°é‡â€ã€‚è¿™æ„å‘³ç€ï¼Œå¹¶ä¸æ˜¯â€œæ•°æ®ä¸å¤Ÿâ€ï¼Œè€Œæ˜¯<strong>æ•°æ®è¢«æ ‡ç­¾å¼ºè¡Œåˆ†å‰²åï¼Œæ— æ³•è¢«å……åˆ†åˆ©ç”¨</strong>ã€‚</p>\n<p>æ­£æ˜¯ç”±äºè¿™ç§è®¾ç½®ä¸å®é™…éƒ¨ç½²åœºæ™¯ä¸åŒ¹é…ï¼Œæˆ‘ä»¬è‡ªç„¶ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ç–‘é—®ï¼š<strong>èƒ½ä¸èƒ½è®©æ‰€æœ‰äººçš„æ ·æœ¬éƒ½å‚ä¸å­¦ä¹ ï¼Œè€Œä¸æ˜¯è¢«èº«ä»½æ ‡ç­¾å„è‡ªéš”ç¦»å¼€æ¥ï¼Ÿ</strong></p>\n<p>åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œè¿™ç±»â€œ<strong>æ¯ä¸ªç±»åˆ«åªæœ‰æå°‘æ ·æœ¬</strong>â€çš„é—®é¢˜è¢«ç§°ä¸º<strong>ä¸€æ¬¡å­¦ä¹ ï¼ˆone-shot learningï¼‰é—®é¢˜</strong>ã€‚<br />\nè€Œåœ¨å…·ä½“çš„äººè„¸è¯†åˆ«åœºæ™¯ä¸‹ï¼Œ<strong>one-shot äººè„¸è¯†åˆ«</strong>æŒ‡çš„æ˜¯ï¼šæ¯ä¸ªèº«ä»½åœ¨è®­ç»ƒæˆ–å»ºåº“é˜¶æ®µï¼Œä»…æä¾›ä¸€å¼ ï¼ˆæˆ–æå°‘å‡ å¼ ï¼‰å·²çŸ¥äººè„¸æ ·æœ¬ã€‚</p>\n<p>ä¸ºäº†è§£å†³è¿™ç§â€œ<strong>æ€»ä½“æ ·æœ¬é‡å¾ˆå¤§ï¼Œä½†å•ä¸ªèº«ä»½æ ·æœ¬æå°‘</strong>â€çš„çŸ›ç›¾ï¼Œäººä»¬æå‡ºäº†ä¸€ç§ä¸åŒäºä¼ ç»Ÿåˆ†ç±»çš„æ€è·¯ï¼š  <strong>ä¸å†è®©æ¨¡å‹å›ç­”â€œè¿™å¼ è„¸å±äºæ‰€æœ‰äººä¸­çš„å“ªä¸€ä¸ªï¼Ÿâ€ï¼Œè€Œæ˜¯è®©å®ƒåˆ¤æ–­â€œè¿™å¼ è„¸æ˜¯å¦å’ŒæŸä¸€ä¸ªå·²çŸ¥çš„æŸå¼ è„¸è¶³å¤Ÿç›¸ä¼¼ï¼Ÿâ€</strong></p>\n<p>ç°åœ¨ï¼Œç½‘ç»œç›®æ ‡å°±ä»ä¸€å¼€å§‹çš„â€œå­¦ä¹ åˆ†ç±»â€å˜æˆäº†â€œ<strong>å­¦ç›¸ä¼¼åº¦</strong>â€ï¼Œå°±åƒè¿™æ ·ï¼š<br />\n<img alt=\"image.png\" src=\"https://img2024.cnblogs.com/blog/3708248/202512/3708248-20251229234253679-642676291.png\" /><br />\nå¦‚æœå¦‚å›¾ä¸­è¿™æ ·ï¼Œç½‘ç»œå®ç°äº†â€œ<strong>å­¦ä¹ ä¸¤å¼ äººè„¸çš„ç›¸ä¼¼åº¦</strong>â€œï¼Œæˆ‘ä»¬å°±è§£å†³äº†åˆšåˆšçš„é—®é¢˜ï¼š</p>\n<ol>\n<li>å¦‚æœå•ä½æœ‰æ–°å‘˜å·¥åŠ å…¥æˆ–è€å‘˜å·¥ç¦»èŒï¼Œå°±è¦ä¸å†éœ€è¦è°ƒæ•´ç½‘ç»œå’Œé‡æ–°è®­ç»ƒï¼Œ<strong>åªéœ€è¦æŠŠç›¸åº”æ•°æ®åŠ å…¥æ•°æ®åº“æˆ–ä»æ•°æ®åº“ä¸­åˆ é™¤</strong>ã€‚</li>\n<li>æ‰€æœ‰çš„æ•°æ®éƒ½è¢«å……åˆ†åˆ©ç”¨ï¼ŒåŒæ—¶æ¯äººåªéœ€è¦ä¸€å¼ è¯ä»¶ç…§ï¼Œåœ¨é—¨ç¦æ—¶äººè„¸å’Œæ•°æ®åº“ä¸­çš„äººè„¸å¯¹æ¯”ï¼Œ<strong>æ‰¾åˆ°æ»¡è¶³ç›¸ä¼¼åº¦é˜ˆå€¼çš„æ ·æœ¬å³é€šè¿‡ï¼Œä¸å­˜åœ¨å³æ‹’ç»ã€‚</strong></li>\n</ol>\n<h1 id=\"3-siamese-ç½‘ç»œ\">3. Siamese ç½‘ç»œ</h1>\n<p>ç°åœ¨ï¼Œæˆ‘ä»¬æ˜ç¡®äº†é’ˆå¯¹é¢éƒ¨è¯†åˆ«ä»»åŠ¡çš„ç›®æ ‡ï¼š<strong>è®­ç»ƒä¸€ä¸ªå¯ä»¥å­¦ä¹ ä¸¤å¼ äººè„¸ç›¸ä¼¼åº¦çš„ç½‘ç»œ</strong>ã€‚<br />\nç°åœ¨ï¼Œè¦æ€ä¹ˆå®ç°è¿™ä¸€ç‚¹å‘¢ï¼Ÿ<br />\nç­”æ¡ˆå°±æ˜¯è¿™éƒ¨åˆ†çš„æ ‡é¢˜ï¼šSiamese ç½‘ç»œã€‚<br />\nè¦è¯´æ˜çš„æ˜¯ï¼Œå´æ©è¾¾è€å¸ˆåœ¨è¯¾ç¨‹é‡Œæåˆ°äº†ä¸€ç¯‡ 2014 å¹´çš„è®ºæ–‡ <a href=\"https://www.cv-foundation.org/openaccess/content_cvpr_2014/papers/Taigman_DeepFace_Closing_the_2014_CVPR_paper.pdf?utm_source=chatgpt.com\" rel=\"noopener nofollow\" target=\"_blank\">DeepFace: Closing the Gap to Human-Level Performance in Face Verification</a>ã€‚<strong>ä½† Siamese ç½‘ç»œå¹¶ä¸æ˜¯ä»è¿™ç¯‡è®ºæ–‡æ‰æå‡ºçš„</strong>â€”â€”æ—©åœ¨ 1993 å¹´ï¼Œå®ƒå°±è¢«å‘æ˜å‡ºæ¥ï¼Œç”¨äºåˆ¤æ–­ä¸¤å¹…æ‰‹å†™ç­¾åæ˜¯å¦åŒä¸€äººã€‚åæ¥ä¹Ÿè¢«åº”ç”¨åˆ°äººè„¸è¯†åˆ«ä»»åŠ¡ä¸­ã€‚<br />\nSiamese ç½‘ç»œçš„æ ¸å¿ƒæ€è·¯æ˜¯<strong>é€šè¿‡å…±äº«æƒé‡çš„åŒåˆ†æ”¯ï¼ˆæˆ–å¤šåˆ†æ”¯ï¼‰ç¥ç»ç½‘ç»œï¼Œå°†è¾“å…¥çš„ä¸¤å¼ å›¾åƒæ˜ å°„åˆ°åŒä¸€ç‰¹å¾ç©ºé—´ï¼Œç„¶åé€šè¿‡åº¦é‡å‡½æ•°ï¼ˆå¦‚æ¬§æ°è·ç¦»æˆ–ä½™å¼¦ç›¸ä¼¼åº¦ï¼‰è®¡ç®—å®ƒä»¬çš„ç›¸ä¼¼åº¦</strong>ã€‚<br />\nDeepFace å€Ÿé‰´äº† Siamese ç½‘ç»œçš„æ€è·¯ï¼Œåœ¨æ·±åº¦ CNN ä¸Šç›´æ¥å­¦ä¹ äººè„¸ç‰¹å¾çš„ç›¸ä¼¼åº¦ï¼Œå¹¶é€šè¿‡ä¼˜åŒ–å’Œå¤§è§„æ¨¡è®­ç»ƒï¼Œè¿™æ‰ä½¿å¾—<strong>ç³»ç»Ÿæ€§èƒ½æ¥è¿‘äººç±»æ°´å¹³ï¼ŒçœŸæ­£å…·å¤‡éƒ¨ç½²ä»·å€¼</strong>ã€‚</p>\n<p>ç°åœ¨ï¼Œå°±æ¥è¯¦ç»†çœ‹çœ‹ä¸€ä¸ªè¾ƒå®Œå–„çš„ Siamese ç½‘ç»œçš„è¿è¡Œè¿‡ç¨‹ï¼š</p>\n<h2 id=\"31-å¯¹å›¾åƒè¿›è¡Œç¼–ç å¤„ç†ä¸‰å…ƒç»„æŸå¤±triplet-loss\">3.1 å¯¹å›¾åƒè¿›è¡Œç¼–ç å¤„ç†ï¼šä¸‰å…ƒç»„æŸå¤±ï¼ˆtriplet lossï¼‰</h2>\n<p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä»€ä¹ˆå«å¯¹å›¾åƒè¿›è¡Œç¼–ç å¤„ç†ï¼š<br />\n<img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3708248/202512/3708248-20251229234657431-1853718024.png\" /><br />\nè¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ä¸€ç»„ç‰¹å¾å‘é‡æ¥ç¼–ç ä¸€å¼ äººè„¸ï¼Œå®é™…ä¸Šï¼Œè¿™å°±æ˜¯ DeepFace æå‡ºçš„ä¸€æ­¥ä¼˜åŒ–ï¼Œè¿™ä¸€æ­¥è®¾ç½®<strong>ä¸æ­¢ä¸ºäº†è®¡ç®—ç›¸ä¼¼åº¦ä½œå‡†å¤‡ï¼ŒåŒæ—¶ä¹Ÿæå¤§å‡å°‘äº†è®¡ç®—é‡ï¼Œç¼©çŸ­äº†è¿è¡Œæ—¶é—´</strong>ï¼Œå¯ä»¥è¯´ç›¸å½“æˆåŠŸã€‚</p>\n<p>ä½†æ˜¯ï¼ŒåŒæ ·ä¹Ÿæ˜¯å› ä¸ºè¿™ä¸€æ­¥ç¼–ç ï¼Œæ–°çš„é—®é¢˜å‡ºç°äº†ï¼š<strong>ä½ ä¼šå‘ç°ï¼Œè¿™ä¸ªç”¨æ¥æŠŠå›¾åƒè½¬æ¢æˆç¼–ç çš„ç½‘ç»œåŒæ ·éœ€è¦è®­ç»ƒã€‚</strong><br />\næ²¡é”™ï¼Œæˆ‘ä»¬éœ€è¦è®­ç»ƒè¿™ä¸ªç½‘ç»œï¼Œè€Œç›®æ ‡å°±æ˜¯ï¼š<strong>è®©åŒä¸€ä¸ªèº«ä»½çš„äººè„¸ç¼–ç å·®å¼‚æœ€å°åŒ–ï¼Œä¸åŒèº«ä»½çš„äººè„¸çš„ç¼–ç å·®å¼‚æœ€å¤§åŒ–ã€‚</strong><br />\nè¦å®ç°è¿™ä¸ªç›®æ ‡çš„å¸¸ç”¨æ–¹æ³•å«åš<strong>ä¸‰å…ƒç»„ï¼ˆtripletï¼‰æŸå¤±</strong>ï¼Œè¿™æ—¶ï¼Œ<strong>ç½‘ç»œåœ¨è®­ç»ƒé˜¶æ®µéœ€è¦åŒæ—¶è¾“å…¥ä¸‰å¼ å›¾åƒ</strong>ã€‚<br />\nå®ƒçš„å…¬å¼é•¿è¿™ä¸ªæ ·ï¼š</p>\n<p></p><div class=\"math display\">\\[L=maxâ¡(0,âˆ¥f(a)âˆ’f(p)âˆ¥^2_2âˆ’âˆ¥f(a)âˆ’f(n)âˆ¥^2_2+Î±)\n\\]</div><p></p><p>å…¶ä¸­ï¼š</p>\n<ul>\n<li><span class=\"math inline\">\\(f(a)\\)</span>ï¼šanchorï¼ˆåŸºå‡†å›¾åƒï¼‰æ˜ å°„åçš„ç‰¹å¾å‘é‡</li>\n<li><span class=\"math inline\">\\(f(p)\\)</span>ï¼špositiveï¼ˆåŒä¸€èº«ä»½çš„å›¾åƒï¼‰æ˜ å°„åçš„ç‰¹å¾å‘é‡</li>\n<li><span class=\"math inline\">\\(f(n)\\)</span>ï¼šnegativeï¼ˆä¸åŒèº«ä»½çš„å›¾åƒï¼‰æ˜ å°„åçš„ç‰¹å¾å‘é‡</li>\n<li><span class=\"math inline\">\\(\\alpha\\)</span>ï¼šé—´éš”ï¼ˆmarginï¼‰ï¼Œä¿è¯ä¸åŒèº«ä»½çš„è·ç¦»æ¯”åŒä¸€èº«ä»½è·ç¦»è‡³å°‘å¤§ <span class=\"math inline\">\\(\\alpha\\)</span></li>\n</ul>\n<p>åˆ«æ…Œï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªä¾‹å­æ¥æ¼”ç¤ºä¸€éåŸç†ï¼š<br />\n<img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/3708248/202512/3708248-20251229235145998-454139387.png\" /></p>\n<p><img alt=\"image.png\" src=\"https://img2024.cnblogs.com/blog/3708248/202512/3708248-20251229234301253-442526298.png\" /><br />\nåªçœ‹ç¬¦å·å¯èƒ½æœ‰äº›å¤ªç»•äº†ï¼Œ<strong>æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªå®ä¾‹</strong>ï¼š<br />\nå‡è®¾ä¸‰å¼ äººè„¸å›¾åƒï¼šç»è¿‡ç½‘ç»œæ˜ å°„åçš„äºŒç»´ç‰¹å¾å‘é‡å¦‚ä¸‹ï¼š</p>\n<table>\n<thead>\n<tr>\n<th>å›¾åƒ</th>\n<th>ç‰¹å¾å‘é‡</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>a (Alice)</td>\n<td>[1.0, 1.0]</td>\n</tr>\n<tr>\n<td>p (Alice)</td>\n<td>[1.2, 1.1]</td>\n</tr>\n<tr>\n<td>n (Bob)</td>\n<td>[2.5, 2.0]</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"1è®¡ç®—æ¬§æ°è·ç¦»\">ï¼ˆ1ï¼‰è®¡ç®—æ¬§æ°è·ç¦»</h4>\n<p><strong>Anchor ä¸ Positiveï¼ˆåŒä¸€äººï¼‰</strong>ï¼š</p>\n<p></p><div class=\"math display\">\\[âˆ¥f(a)-f(p)âˆ¥_2^2 = (1.0-1.2)^2 + (1.0-1.1)^2 = 0.04 + 0.01 = 0.05  \n\\]</div><p></p><p><strong>Anchor ä¸ Negativeï¼ˆä¸åŒäººï¼‰</strong>ï¼š</p>\n<p></p><div class=\"math display\">\\[âˆ¥f(a)-f(n)âˆ¥_2^2 = (1.0-2.5)^2 + (1.0-2.0)^2 = 2.25 + 1.0 = 3.25  \n\\]</div><p></p><h4 id=\"2ä»£å…¥ä¸‰å…ƒç»„æŸå¤±å…¬å¼\">ï¼ˆ2ï¼‰ä»£å…¥ä¸‰å…ƒç»„æŸå¤±å…¬å¼</h4>\n<p>å‡è®¾ <span class=\"math inline\">\\(\\alpha = 0.5\\)</span>ï¼Œä»£å…¥æ•°å€¼ï¼š</p>\n<p></p><div class=\"math display\">\\[L = \\max\\Big(0,0.05 - 3.25 + 0.5\\Big) = \\max(0, -2.7) = 0  \n\\]</div><p></p><p>ä»£è¡¨å½“å‰ç‰¹å¾å‘é‡æ»¡è¶³ç›®æ ‡ï¼ŒåŒä¸€äººè·ç¦»æ¥è¿‘ï¼Œä¸åŒäººè·ç¦»å¤§äº <span class=\"math inline\">\\(\\alpha\\)</span>ã€‚</p>\n<h4 id=\"3å¦‚æœ-negative-å¤ªè¿‘\">ï¼ˆ3ï¼‰å¦‚æœ Negative å¤ªè¿‘</h4>\n<p>å‡è®¾ <span class=\"math inline\">\\(f(n) = [1.5, 1.3]\\)</span>ï¼Œè®¡ç®—è·ç¦»ï¼š</p>\n<p></p><div class=\"math display\">\\[âˆ¥f(a)-f(n)âˆ¥_2^2 = (1.0-1.5)^2 + (1.0-1.3)^2 = 0.25 + 0.09 = 0.34  \n\\]</div><p></p><p>æŸå¤±ä¸ºï¼š</p>\n<p></p><div class=\"math display\">\\[L = \\max\\Big(0, 0.05 - 0.34 + 0.5\\Big) = \\max(0, 0.21) = 0.21  \n\\]</div><p></p><p>ä¾¿è¯´æ˜ä¸åŒäººè·ç¦»å¤ªè¿‘ï¼Œç½‘ç»œéœ€è¦æ›´æ–°ï¼Œä¿ç•™æŸå¤±æ¥è¿›è¡Œåå‘ä¼ æ’­ã€‚</p>\n<p><strong>é€šè¿‡è¿™ç§è®¾è®¡ï¼Œç½‘ç»œå¯ä»¥ç›´æ¥å­¦ä¹ ä¸€ä¸ªé€‚åˆåº¦é‡ç›¸ä¼¼åº¦çš„ç‰¹å¾ç©ºé—´ã€‚</strong></p>\n<p>æœ€åè¦å¼ºè°ƒçš„ä¸€ç‚¹æ˜¯ï¼Œä¸ºäº†è®©è®­ç»ƒæ•ˆæœæ›´å¥½ï¼Œ<strong>æˆ‘ä»¬åœ¨é€‰æ‹©ä¸‰å…ƒç»„æ—¶ï¼Œä¼šå°½é‡è®©åŸºå‡†å›¾åƒå’ŒåŒä¸€äººçš„å›¾åƒå·®åˆ«å°½å¯èƒ½å¤§ï¼ŒåŒæ—¶è®©åŸºå‡†å›¾åƒå’Œä¸åŒäººçš„å›¾åƒå·®åˆ«å°½å¯èƒ½å°ã€‚</strong><br />\nè¿™å°±åƒæ˜¯åœ¨æ‰‹åŠ¨æé«˜è€ƒè¯•éš¾åº¦ï¼Œéš¾é¢˜ä¼šäº†ï¼Œç®€å•é¢˜è‡ªç„¶ä¸åœ¨è¯ä¸‹ã€‚<br />\nç°åœ¨ï¼Œæˆ‘ä»¬ä¾¿ç»§ç»­ä¸‹ä¸€éƒ¨åˆ†ã€‚</p>\n<h2 id=\"32-æ­£å‘ä¼ æ’­ä¸¤å¹…å›¾åƒå¹¶è®¡ç®—ç›¸ä¼¼åº¦\">3.2 æ­£å‘ä¼ æ’­ä¸¤å¹…å›¾åƒå¹¶è®¡ç®—ç›¸ä¼¼åº¦</h2>\n<p>åœ¨æ‹¥æœ‰äº†å¯ä»¥å¯¹å›¾åƒè¿›è¡Œåˆé€‚ç¼–ç çš„ç½‘ç»œåï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥è¿›è¡Œç›¸ä¼¼åº¦è®¡ç®—çš„åº”ç”¨ï¼Œè¿™ä¸€æ­¥çš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š<br />\n<img alt=\"image.png\" src=\"https://img2024.cnblogs.com/blog/3708248/202512/3708248-20251229234408230-256446436.png\" /><br />\nå¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬é€šè¿‡æ­£å‘ä¼ æ’­å¾—åˆ°ä¸¤å¹…è¾“å…¥äººè„¸çš„ç¼–ç ï¼Œå¹¶æ ¹æ®ç¼–ç è®¡ç®—ç›¸ä¼¼åº¦ï¼Œè‡ªç„¶å°±å¯ä»¥æ ¹æ®é˜ˆå€¼åˆ¤æ–­ä¸¤å¼ äººè„¸æ˜¯å¦å±äºåŒä¸€ä¸ªäººã€‚<br />\nè€Œä¸”ï¼Œè¿™ç§ä¼ æ’­å’Œè®¡ç®—ç›¸ä¼¼åº¦åˆ†ç¦»çš„è®¾è®¡ï¼Œä»£è¡¨<strong>æˆ‘ä»¬å¯ä»¥æå‰ä¸ºæ•°æ®åº“ä¸­çš„å›¾åƒè®¡ç®—å¥½ç¼–ç </strong>ï¼Œåªéœ€åˆ·è„¸æ—¶ä¼ å…¥çš„äººè„¸å•ç‹¬ä¼ æ’­å¾—åˆ°ç¼–ç åè¿›è¡Œè®¡ç®—å°±å¥½äº†ï¼Œè¿™å¤§å¤§æé«˜äº†å¯éƒ¨ç½²æ€§ã€‚</p>\n<h2 id=\"33-æ‹“å±•å¦ä¸€ç§è®­ç»ƒç¼–ç ç½‘ç»œçš„æ–¹å¼\">3.3 æ‹“å±•ï¼šå¦ä¸€ç§è®­ç»ƒç¼–ç ç½‘ç»œçš„æ–¹å¼</h2>\n<p>æˆ‘ä»¬åˆšåˆšä»‹ç»äº†å¯ä»¥é€šè¿‡ä¸‰å…ƒç»„æŸå¤±æ¥è®­ç»ƒç¼–ç ç½‘ç»œï¼Œä½†ä½ å¯èƒ½ä¹Ÿå‘ç°äº†ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨æ•°æ®å‡†å¤‡é˜¶æ®µè¾ƒä¸ºå¤æ‚ã€‚<br />\nå› æ­¤ï¼Œå´æ©è¾¾è€å¸ˆè¿˜ä»‹ç»äº†å¦ä¸€ç§è®­ç»ƒæ–¹æ³•ï¼š<strong>æ›´æ”¹æ ‡ç­¾ï¼Œè®©Siamese ç½‘ç»œåæ¥é€»è¾‘å›å½’å˜ä¸ºäºŒåˆ†ç±»é—®é¢˜ã€‚</strong><br />\n<img alt=\"image.png\" src=\"https://img2024.cnblogs.com/blog/3708248/202512/3708248-20251229234243543-574274696.png\" /><br />\nè¿™æ ·ï¼Œæˆ‘ä»¬å°±åˆæŠŠäººè„¸è¯†åˆ«é—®é¢˜åˆè½¬æ¢å›äº†äºŒåˆ†ç±»é—®é¢˜ï¼Œé€šè¿‡åå‘ä¼ æ’­æ¥è¿›è¡Œè®­ç»ƒã€‚<br />\nä½†æ˜¯ï¼Œä½ ä¼šå‘ç°ï¼Œ<strong>å½“æ–°å‘˜å·¥åŠ å…¥æ—¶ï¼Œè¿˜æ˜¯è¦é‡æ–°è®­ç»ƒæ¨¡å‹ã€‚</strong><br />\nå› æ­¤ï¼Œå®é™…ä¸Šè¿™ç§æ–¹å¼çš„å®é™…éƒ¨ç½²ä»·å€¼å¹¶ä¸å¦‚å®ç”¨ä¸‰å…ƒç»„æŸå¤±ã€‚</p>\n<h1 id=\"4æ€»ç»“\">4.æ€»ç»“</h1>\n<table>\n<thead>\n<tr>\n<th>æ¦‚å¿µ</th>\n<th>åŸç†</th>\n<th>æ¯”å–»</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>äººè„¸éªŒè¯ï¼ˆFace Verificationï¼‰</td>\n<td>1 å¯¹ 1 é—®é¢˜ï¼Œåˆ¤æ–­è¾“å…¥äººè„¸æ˜¯å¦ä¸ç›®æ ‡èº«ä»½åŒ¹é…</td>\n<td>å°±åƒé—¨å«åªå¯¹æŸä¸ªäººè¯´â€œå¯ä»¥è¿›â€ï¼Œå…¶ä»–äººå…¨éƒ¨æ‹’ç»</td>\n</tr>\n<tr>\n<td>äººè„¸è¯†åˆ«ï¼ˆFace Recognitionï¼‰</td>\n<td>1 å¯¹å¤šé—®é¢˜ï¼Œé€šè¿‡æ¨¡å‹è¯†åˆ«è¾“å…¥äººè„¸å±äºå“ªä¸€ä¸ªå·²çŸ¥èº«ä»½</td>\n<td>é—¨ç¦ç³»ç»Ÿè¯†åˆ«å¤šä¸ªå‘˜å·¥ï¼Œä¸éœ€è¦å•ç‹¬ä¸ºæ¯ä¸ªäººè®¾é—¸æœº</td>\n</tr>\n<tr>\n<td>å¤šåˆ†ç±»å»ºæ¨¡é—®é¢˜</td>\n<td>å°†æ¯ä¸ªäººä½œä¸ºä¸€ä¸ªç±»åˆ«è¿›è¡Œè®­ç»ƒ</td>\n<td>æ¯ä¸ªå‘˜å·¥éƒ½æœ‰ä¸€æœ¬å†™çœŸé›†ï¼Œè¦å­¦ä¼šåŒºåˆ†æˆåƒä¸Šä¸‡æœ¬</td>\n</tr>\n<tr>\n<td>ä¸€æ¬¡å­¦ä¹ ï¼ˆOne-Shot Learningï¼‰</td>\n<td>æ¯ä¸ªèº«ä»½ä»…æä¾›æå°‘æ ·æœ¬ï¼Œé€šè¿‡ç›¸ä¼¼åº¦åˆ¤æ–­è¯†åˆ«</td>\n<td>åªéœ€ä¸€å¼ è¯ä»¶ç…§å°±èƒ½è¯†åˆ«æ–°å‘˜å·¥ï¼Œä¸ç”¨æ‹å†™çœŸé›†</td>\n</tr>\n<tr>\n<td>Siamese ç½‘ç»œ</td>\n<td>å…±äº«æƒé‡çš„åŒåˆ†æ”¯ï¼ˆæˆ–å¤šåˆ†æ”¯ï¼‰ç½‘ç»œï¼Œå°†å›¾åƒæ˜ å°„åˆ°åŒä¸€ç‰¹å¾ç©ºé—´ï¼Œé€šè¿‡åº¦é‡å‡½æ•°è®¡ç®—ç›¸ä¼¼åº¦</td>\n<td>åŒæ—¶çœ‹ä¸¤å¼ ç…§ç‰‡ï¼Œç„¶åæ¯”è¾ƒç›¸ä¼¼åº¦</td>\n</tr>\n<tr>\n<td>ä¸‰å…ƒç»„æŸå¤±ï¼ˆTriplet Lossï¼‰</td>\n<td>è®­ç»ƒç½‘ç»œä½¿åŒä¸€äººè·ç¦»æœ€å°ï¼Œä¸åŒäººè·ç¦»æœ€å¤§ï¼Œç½‘ç»œéœ€è¾“å…¥ä¸‰å¼ å›¾åƒï¼ˆanchor, positive, negativeï¼‰</td>\n<td>æé«˜è€ƒè¯•éš¾åº¦ï¼šåŸºå‡†é¢˜å’Œç›¸ä¼¼é¢˜å·®åˆ«å°ï¼Œä¸åŒé¢˜å·®åˆ«å¤§ï¼Œè®­ç»ƒæ›´æœ‰æ•ˆ</td>\n</tr>\n<tr>\n<td>æ­£å‘ä¼ æ’­ä¸¤å›¾è®¡ç®—ç›¸ä¼¼åº¦</td>\n<td>å·²è®­ç»ƒç½‘ç»œå¯¹ä¸¤å¹…å›¾åƒç¼–ç åï¼Œè®¡ç®—ç‰¹å¾è·ç¦»æˆ–ç›¸ä¼¼åº¦ï¼Œç”¨é˜ˆå€¼åˆ¤æ–­æ˜¯å¦åŒä¸€äºº</td>\n<td>å…ˆæŠŠç…§ç‰‡ç¼–ç æˆâ€œèº«ä»½ç‰¹å¾å¡ç‰‡â€ï¼Œåˆ·è„¸æ—¶åªæ¯”å¯¹å¡ç‰‡</td>\n</tr>\n<tr>\n<td>Siamese + é€»è¾‘å›å½’äºŒåˆ†ç±»</td>\n<td>å°†ä¸¤å¼ å›¾åƒè¾“å…¥ Siamese ç½‘ç»œï¼Œé€šè¿‡é€»è¾‘å›å½’åˆ¤æ–­æ˜¯å¦åŒä¸€äºº</td>\n<td>å°†äººè„¸è¯†åˆ«é—®é¢˜ç®€åŒ–æˆâ€œæ˜¯/ä¸æ˜¯åŒä¸€äººâ€çš„é€‰æ‹©é¢˜</td>\n</tr>\n<tr>\n<td>éƒ¨ç½²å¯è¡Œæ€§å¯¹æ¯”</td>\n<td>ä¸‰å…ƒç»„æŸå¤±æ”¯æŒ one-shotã€å¯æå‰è®¡ç®—æ•°æ®åº“ç‰¹å¾å‘é‡ï¼Œæ³›åŒ–å¼ºï¼›é€»è¾‘å›å½’æ–¹å¼æ–°èº«ä»½éœ€é‡æ–°è®­ç»ƒï¼Œæ³›åŒ–å·®</td>\n<td>ä¸‰å…ƒç»„ï¼šè€ƒè¯•è€ƒé€šç”¨èƒ½åŠ›ï¼›é€»è¾‘å›å½’ï¼šè€ƒè¯•åªä¼šç­”å·²æœ‰é¢˜ç›®</td>\n</tr>\n</tbody>\n</table>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2025-12-29 23:52</span>&nbsp;\n<a href=\"https://www.cnblogs.com/Goblinscholar\">å“¥å¸ƒæ—å­¦è€…</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">32</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "Python osåº“ os.walkä½¿ç”¨ï¼ˆè¯¦ç»†æ•™ç¨‹ã€å¸¦å®è·µï¼‰",
      "link": "https://www.cnblogs.com/io-T-T/p/19418274",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/io-T-T/p/19418274\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2025-12-29 23:19\">\n    <span>Python osåº“ os.walkä½¿ç”¨ï¼ˆè¯¦ç»†æ•™ç¨‹ã€å¸¦å®è·µï¼‰</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                    <div id=\"cnblogs_post_description\" style=\"display: none;\">\n        \n        Python osåº“ os.walkä½¿ç”¨ï¼ˆè¯¦ç»†æ•™ç¨‹ã€å¸¦å®è·µï¼‰\nos.walk å¤„ç†æ–‡ä»¶\nos.walkåŸç†\n    </div>\n<div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h2 id=\"python-osåº“-oswalkä½¿ç”¨è¯¦ç»†æ•™ç¨‹å¸¦å®è·µ\">Python osåº“ os.walkä½¿ç”¨ï¼ˆè¯¦ç»†æ•™ç¨‹ã€å¸¦å®è·µï¼‰</h2>\n<p>-----------------------<em><strong>PSï¼šenv python version==3.10</strong></em>----------------</p>\n<p>ç®€ä»‹ï¼š</p>\n<p>â€‹\tæœ¬æ–‡ä»¥å®é™…æ¡ˆä¾‹è¯´æ˜<code>os.walk</code>å¯¹æ–‡ä»¶çš„ä½¿ç”¨æ–¹å¼ã€‚ä¸»è¦æ•™å­¦å†…å®¹ï¼š</p>\n<ul>\n<li><code>os.walk</code>åº“å®é™…çš„ä½¿ç”¨</li>\n<li><code>os.walk</code>æœ€ä½³å®è·µ</li>\n<li><em>ï¼ˆå¯é€‰ï¼‰os.walkåŸç†</em></li>\n<li><em>ï¼ˆå¯é€‰ï¼‰è¿­ä»£å™¨æ–¹å‘ç†è§£</em></li>\n</ul>\n<p>å…¨æ–‡2000å­—å·¦å³ï¼Œä»£ç å­—æ•°800ï¼ˆå«è¿­ä»£å™¨180ï¼‰å·¦å³ï¼Œå»ºè®®å­¦ä¹ æ—¶é—´10-15minï¼ˆä¸å«è¿­ä»£å™¨ï¼‰ã€‚è‹¥å­¦ä¹ è¿­ä»£å™¨å»ºè®®30min+</p>\n<h3 id=\"1-æ¨¡æ‹Ÿå®é™…ä½¿ç”¨ç¯å¢ƒ\">1 æ¨¡æ‹Ÿå®é™…ä½¿ç”¨ç¯å¢ƒ</h3>\n<p>â€‹\tPSï¼šä»…ä½œä¸ºæ¡ˆä¾‹è¯´æ˜å‚è€ƒï¼Œè‹¥å·²æœ‰å¯ç”¨çš„æ–‡ä»¶å¤¹/ç›®å½•ï¼Œè¯·ç§»æ­¥ç¬¬äºŒæ­¥</p>\n<p>â€‹\t<img alt=\"image-20251222214254412\" class=\"lazyload\" /></p>\n<ol>\n<li>\n<p>æ ¹æ®ä¸Šå›¾æ¨¡æ‹Ÿå®é™…ä½¿ç”¨æƒ…å†µï¼š</p>\n<ul>\n<li>\n<p>éšæ„æ–°å»ºä¸€ä¸ªç›®å½•ï¼ˆç¡®ä¿ä¸ä¼šæœ‰å…¶ä»–æ–‡ä»¶ï¼‰</p>\n</li>\n<li>\n<p>åœ¨ï¼ˆæ–°å»ºç›®å½•çš„ï¼‰æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ª<strong>æ–‡ä»¶</strong>å’Œ<strong>æ–‡ä»¶å¤¹</strong>ï¼ˆåç§°éšæ„ï¼Œä¹Ÿå¯ä»¥å‚ç…§æˆ‘çš„æ ·ä¾‹æ¥ï¼‰</p>\n</li>\n<li>\n<p>è¿›å…¥<code>root</code>æ–‡ä»¶å¤¹ï¼Œæ–°å»ºä¸¤ä¸ªæ¬¡çº§æ–‡ä»¶å¤¹ï¼ˆ<code>dir1</code>ã€<code>dir2</code>ï¼‰</p>\n<ul>\n<li>rootæ–‡ä»¶å¤¹ä¸‹ç›´æ¥åˆ›å»ºæ¬¡çº§ç›®å½•æ–‡ä»¶<code>F1.txt</code></li>\n<li>åˆ›å»ºæ¬¡çº§ç›®å½•æ–‡ä»¶<code>dir1</code>ã€<code>dir2</code>\n<ul>\n<li>è¿›å…¥<code>dir2</code>æ–‡ä»¶å¤¹\n<ul>\n<li>åˆ›å»ºæ–‡ä»¶ï¼ˆ<code>F2.txt</code>ï¼‰</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"2-è§£æoswalkå‡½æ•°\">2 è§£æ<code>os.walk</code>å‡½æ•°</h3>\n<p>é¢å‘åŸºç¡€è®²è§£ï¼Œè¯¦ç»†è§ <a href=\"https://docs.python.org/zh-cn/3.10/library/os.html?highlight=os%20walk#os.walk\" rel=\"noopener nofollow\" target=\"_blank\">os.walkå®˜æ–¹è¯´æ˜</a></p>\n<ul>\n<li>\n<p>ä»€ä¹ˆæ˜¯ python çš„<code>os</code>åº“</p>\n<ul>\n<li>æœ¬æ¨¡å—æä¾›äº†ä¸€ç§ä½¿ç”¨ä¸æ“ä½œç³»ç»Ÿç›¸å…³çš„åŠŸèƒ½çš„ä¾¿æ·å¼é€”å¾„ã€‚ï¼ˆå¦‚æ–‡ä»¶è·¯å¾„æ§åˆ¶ã€æ–‡ä»¶ä¿¡æ¯è·å–ã€éå†ç›®å½•æ–‡ä»¶ã€<code>os.walk</code>ã€‘ã€å…¶ä»–ç³»ç»Ÿè°ƒç”¨åŠŸèƒ½ï¼‰</li>\n</ul>\n</li>\n<li>\n<p><code>os.walk</code>å‡½æ•°è®²è§£ï¼š</p>\n<p><code>os.walk</code>(<strong><em>top</em>, <em>topdown=True</em>,</strong> <em>onerror=None</em>, <em>followlinks=False</em>)</p>\n<ul>\n<li>\n<p>ä¸»è¦èšç„¦äºå‰ä¸¤ä¸ªå‚æ•°å³å¯ï¼š</p>\n<ul>\n<li><code>top</code>ï¼šæ ¹ç›®å½•è·¯å¾„ï¼ˆstrï¼‰</li>\n<li><code>topdown</code>ï¼šè‡ªä¸Šè€Œä¸‹æ¨¡å¼ï¼Œé»˜è®¤ï¼ˆ<code>True</code>ï¼‰ä¸ºè‡ªä¸Šè€Œä¸‹éå†ï¼Œ<code>False</code>åˆ™ä»åº•å‘ä¸Šéå†</li>\n</ul>\n</li>\n<li>\n<p>è¿”å›å€¼ï¼š</p>\n<ul>\n<li>\n<p>è¿”å›è¿­ä»£å™¨ ï¼Œè¿­ä»£å™¨æ¯æ¬¡ç”Ÿæˆçš„å¯¹è±¡ä¸ºï¼š<code>(dirpath, dirnames, filenames)</code></p>\n<p><code>dirpath</code>ï¼š å½“å‰æ–‡ä»¶å¤¹è·¯å¾„</p>\n<p><code>dirnames</code>ï¼šæ–‡ä»¶å¤¹åç§°</p>\n<p><code>filenames</code>ï¼šæ–‡ä»¶åç§°</p>\n</li>\n<li>\n<p>å¦‚æœä¸ç†è§£è¿­ä»£å™¨ï¼Œå¯ä»¥æš‚æ—¶ç†è§£ä¸ºos.walkè¿”å›äº† å…ƒç»„ <code>(dirpath, dirnames, filenames)</code>çš„åˆ—è¡¨ï¼Œç±»ä¼¼äºä¸‹æ–‡ (çœç•¥åŒå¼•å·):</p>\n<pre><code class=\"language-python\">[\n\t(C:/user/, [root],[rott_text.txt] ),\t\t#æ ¹ç›®å½•\n\t(C:/user/root, [dir1,dir2],[F1.txt] ),\t\t#è¿›å…¥rootæ–‡ä»¶å¤¹\n\t(C:/user/root/dir1, [],[] ),\t\t\t\t#è¿›å…¥dir1æ–‡ä»¶å¤¹\n\t(C:/user/root/dir2, [],[F2.txt] )\t\t\t#dir1ä¸­æ²¡æœ‰æ–‡ä»¶äº†ï¼Œé€€å›ä¸Šä¸€å±‚çº§ï¼Œè¿›å…¥dir2æ–‡ä»¶å¤¹ä¸­\n    #è¯»å–æ‰€æœ‰æ–‡ä»¶/æ–‡ä»¶åå®Œæ¯•ï¼Œ\n]\n</code></pre>\n<p>åªä¸è¿‡ä»–ç”Ÿæˆçš„ç‰¹æ®Šâ€œåˆ—è¡¨â€ç»å¸¸é€‚ç”¨äºforï¼Œä¸èƒ½ç›´æ¥ä½œä¸ºåˆ—è¡¨æ‰“å°ï¼Œç›´æ¥æ‰“å°æ˜¯è¿™æ ·å­çš„ï¼š</p>\n<pre><code class=\"language-bash\">#code\ndir_path = r'your_dir'\t\t\t\t\t\t#æ›¿æ¢ä¸ºä½ çš„æ–‡ä»¶å¤¹\ndirpath, dirnames, filenames = os.walk(dir_path)\nprint(f'dir_path:{dirpath}\\ndir_name:{dirnames}\\nfile_names:{filenames}')\n\n#resultï¼š\n\tdirpath, dirnames, filenames = os.walk(dir_path)\nValueError: too many values to unpack (expected 3)\n</code></pre>\n<p>ç©¶å…¶åŸå› æ˜¯è¿”å›çš„å•ä¸ªè¿­ä»£å™¨ï¼Œå¹¶éä¸‰ä¸ªåˆ—è¡¨å…ƒç»„ï¼Œå–œæ¬¢ç»†ç©¶è¿™éƒ¨åˆ†çš„è§åæ–‡ï¼Œç®€è¦çš„è¯çŸ¥é“ä¸èƒ½ç›´æ¥è°ƒç”¨ï¼Œä¸€èˆ¬ç»“åˆ<code>for</code>è°ƒç”¨å°±å¥½ï¼Œè¿™ä¸ªå¹¶éæ·±åº¦æŒ–æ˜ï¼Œçœ‹å®Œåé¢ä¼šçœ‹å¯èƒ½æœ‰æ›´å¥½çš„ç†è§£ã€‚</p>\n<p>è¿­ä»£å™¨å­¦ä¹ å»ºè®®ï¼š<a href=\"https://www.bilibili.com/video/BV1jt421c7yN/?\" rel=\"noopener nofollow\" target=\"_blank\">ã€Pythonã€‘ä»è¿­ä»£å™¨åˆ°ç”Ÿæˆå™¨ï¼šå°å†…å­˜ä¹Ÿèƒ½å¤„ç†å¤§æ•°æ®</a></p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"3-è°ƒç”¨æ ·ä¾‹\">3 è°ƒç”¨æ ·ä¾‹ï¼š</h3>\n<p>å‰é¢å‚æ•°æœ‰ç‚¹ä¸å¥½ç†è§£ä¹Ÿæ²¡å…³ç³»ï¼Œåªè¦å¤§æ¦‚çŸ¥é“å°±å¥½äº†ï¼Œä¸‹é¢æ˜¯å®é™…å‡½æ•°ä½¿ç”¨</p>\n<ol>\n<li>å…ˆå¤åˆ¶ä¸‹é¢ä»£ç è‡³æ–°pyæ–‡ä»¶ï¼Œæ”¹ä¸€ä¸‹ <code>dir_path</code>è¿è¡Œä¸€ä¸‹ä½“ä¼šä¸€ä¸‹</li>\n</ol>\n<pre><code class=\"language-python\">import os\n\ndef walk_example(dir_path:str):\n    #os.walk è¿”å›ç±»ä¼¼äºä¸‰å…ƒç»„åˆ—è¡¨ç»“æ„ï¼Œç„¶åè¿›è¡Œéå†\n    for root, dir_names, file_names in os.walk(dir_path):   #(dirpath, dirnames, filenames)\n        print(f'dirpath :{root}')\n        print(f'dir_names :{dir_names}')\n        print(f'file_names:{file_names}')\n        print('-'*50)\n\n\nif __name__ == '__main__':\n    dir_path = r'your_dir_path'\n    walk_example(dir_path)\n</code></pre>\n<ol start=\"2\">\n<li>\n<p>è¾“å‡ºç»“æœï¼š</p>\n<img alt=\"image-20251222223407130\" class=\"lazyload\" />\n<p>è¿™é‡Œå¯ä»¥çœ‹å‡ºï¼ˆé»˜è®¤çŠ¶æ€ä¸‹ï¼‰ï¼Œæ˜¯ä»é¡¶å‘ä¸‹ï¼Œä¸€å±‚å±‚éå†ã€‚</p>\n<blockquote>\n<p>dirpath : <code>x:\\your_path\\walk</code></p>\n<p>dir_names :['root']<br />\nfile_names:['root_text.txt']</p>\n</blockquote>\n<ul>\n<li>è¿™é‡Œæ˜¯æ ¹ç›®å½•ä¸­å‡ºç°çš„æ–‡ä»¶å¤¹åç§°(root)ã€æ–‡ä»¶('root_text.txt')</li>\n</ul>\n<blockquote>\n<p>dirpath :<code>x:\\your_path\\walk\\root</code><br />\ndir_names :['dir1', 'dir2']<br />\nfile_names:['F1.txt']</p>\n</blockquote>\n<ul>\n<li>è¿›å…¥äº†rootæ–‡ä»¶å¤¹ï¼Œé‡Œé¢åŒ…å«<strong>ä¸¤ä¸ªæ–‡ä»¶å¤¹</strong>åŠå½“å‰æ–‡ä»¶å¤¹æ ¹ç›®å½•ä¸‹çš„<strong>å•ä¸ªæ–‡ä»¶</strong>\n<ul>\n<li>åé¢ä¸¤ä¸ªåŒç†ï¼Œä¸»è¦æ˜¯æ„Ÿå—æ¯ä¸€å±‚çº§çš„å˜åŒ–ï¼Œæ¯æ¬¡è¿›å…¥ä¸‹ä¸€ä¸ªæ–‡ä»¶å¤¹æ—¶ï¼Œ<code>root</code><strong>æ‰€è¡¨è¾¾çš„å±æ€§éƒ½ä¼šæœ‰æ‰€å˜åŒ–</strong>ï¼Œå˜æˆäº†å½“å‰æ ¹è·¯å¾„ã€‚</li>\n<li>é™¤æ­¤ä¹‹å¤–ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œ4é¡¹çš„<code>dir_name</code>è¾“å‡ºï¼Œåˆšå¥½æ˜¯æˆ‘ä»¬<strong>å…¨éƒ¨</strong>çš„ç›®å½•åç§°ï¼Œ<code>file_names</code>åŒç†</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>ä»ä¸Šæ–‡ï¼Œå¯ä»¥çœ‹å‡º <code>os.walk</code>å‡½æ•°çš„éå†ç»“æœä¼šæ ¹æ®æ·±å…¥çš„å±‚çº§è¾“å‡ºä»¥ä¸‹ä¿¡æ¯ï¼š</p>\n<ul>\n<li>å½“å‰æ–‡ä»¶è·¯å¾„ï¼ˆstrï¼‰</li>\n<li>å­˜åœ¨çš„æ–‡ä»¶å¤¹ï¼ˆlistï¼‰</li>\n<li>å­˜åœ¨çš„æ–‡ä»¶ï¼ˆlistï¼‰</li>\n</ul>\n<p>æŠŠä»–ä»¬èšåˆèµ·æ¥ï¼Œå°±èƒ½è·å–æˆ‘ä»¬æ‰€éœ€è¦çš„ï¼š</p>\n<ul>\n<li>æå–æ–‡ä»¶å¤¹ä¿¡æ¯ï¼ˆæˆ–å¤„ç†ï¼‰</li>\n<li>æå–æ–‡ä»¶ä¿¡æ¯ï¼ˆæˆ–å¤„ç†ï¼‰</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"4-å®é™…è¿ç”¨æ¡ˆä¾‹æœ€ä½³å®è·µ\">4 å®é™…è¿ç”¨æ¡ˆä¾‹ï¼ˆæœ€ä½³å®è·µï¼‰</h3>\n<p>æœ¬å°èŠ‚ä¼šä»ä»¥ä¸‹å‡ ç‚¹æ¥è¯´æ˜å¦‚ä½•é€šè¿‡<code>os.walk</code>è¿›è¡Œæ–‡ä»¶çš„æå–åŠå¤„ç†ã€‚</p>\n<ul>\n<li>æå–å…¨éƒ¨ä¿¡æ¯ï¼ˆæ–‡ä»¶å¤¹ã€æ–‡ä»¶ï¼‰ã€ç†è§£è°ƒç”¨æ–¹å¼ã€‘</li>\n<li>æ„é€ æ–‡ä»¶å¤¹ä¸­ï¼Œæ‰€æœ‰æ–‡ä»¶çš„è·¯å¾„</li>\n<li>æ ¹æ®å…³é”®å­—æå–ï¼ˆæ–‡ä»¶/æ–‡ä»¶å¤¹ï¼‰è·¯å¾„</li>\n</ul>\n<h4 id=\"41-æå–å…¨éƒ¨ä¿¡æ¯æ–‡ä»¶å¤¹æ–‡ä»¶ç†è§£è°ƒç”¨æ–¹å¼\">4.1 æå–å…¨éƒ¨ä¿¡æ¯ï¼ˆæ–‡ä»¶å¤¹ã€æ–‡ä»¶ï¼‰ã€ç†è§£è°ƒç”¨æ–¹å¼ã€‘</h4>\n<p>â€‹\tå¾ˆç®€å•ï¼Œåªè¦æŠŠå¯¹åº”å…¨éƒ¨è¾“å‡ºæ”¶é›†èµ·æ¥ï¼Œå°±èƒ½è·å¾—æˆ‘ä»¬éœ€è¦çš„å…¨æ–‡ä»¶åã€æ–‡ä»¶ä¿¡æ¯äº†ã€‚</p>\n<pre><code class=\"language-python\">def walk_get_all_info(dir_path:str):\n    '''\n    è·å–æ‰€æœ‰æ–‡ä»¶åã€æ–‡ä»¶ä¿¡æ¯\n    :param dir_path: è¾“å…¥æ–‡ä»¶å¤¹è·¯å¾„\n    '''\n    dir_list = []\n    file_list = []\n    for root, dirnames, files in os.walk(dir_path):\n        for dir_name in dirnames:\n            dir_list.append(dir_name)\n            # print(dir_name)\t\t\t\t\t#ä¸ç†è§£å¯ä»¥è°ƒè¯•æ¥ä¸€ä¸‹ç†è§£ä¸€ä¸‹ï¼Œä¸¤è€…æ˜¯ç›¸äº’ç‹¬ç«‹çš„\n        for file in files:\n            file_list.append(file)\n            # print(file)\n    print(dir_list)\n    print(file_list)\nif __name__ == '__main__':\n    dir_path = r'your_path'\n    walk_get_all_info(dir_path)\n</code></pre>\n<p>â€‹\tè¾“å‡ºï¼š</p>\n<blockquote>\n<p>root<br />\nroot_text.txt<br />\ndir1<br />\ndir2<br />\nF1.txt<br />\nF2.txt</p>\n</blockquote>\n<h4 id=\"42-æ„é€ æ–‡ä»¶å¤¹ä¸­æ‰€æœ‰æ–‡ä»¶çš„è·¯å¾„\">4.2 æ„é€ æ–‡ä»¶å¤¹ä¸­ï¼Œæ‰€æœ‰æ–‡ä»¶çš„è·¯å¾„</h4>\n<p>â€‹\té€šè¿‡<strong>4.1</strong> æˆ‘ä»¬çŸ¥é“äº†<code>os.walk</code>çš„è¿­ä»£æ–¹å¼ã€‚å¯ä»¥é€šè¿‡â€œå½“å‰æ ¹ç›®å½•â€ä¸ â€œæ‰€éœ€æ–‡ä»¶åç§°â€ç›¸ç»“åˆï¼Œä»è€Œéå†æ‰€æœ‰æ–‡ä»¶çš„è·¯å¾„ã€‚</p>\n<pre><code class=\"language-python\">def walk_get_file_path(dir_path:str):\n    '''\n    è·å–æ–‡ä»¶è·¯å¾„\n    :param dir_path: è¾“å…¥æ–‡ä»¶å¤¹è·¯å¾„\n    '''\n\n    file_list = []\n    for root, dirnames, files in os.walk(dir_path):\n        print(f'local root path :{root}')\n        for file in files:\n            file_path = os.path.join(root, file)        #window ä¸Šï¼Œç­‰ä»·äº root + \"\\\\\" + file\n            # file_path = root + \"\\\\\" + file\n            print(f'file path :{file_path}')\n            file_list.append(file_path)\n        print('-'*50)\n    print(file_list)\n</code></pre>\n<h4 id=\"43-æ ¹æ®å…³é”®å­—æå–æ–‡ä»¶è·¯å¾„\">4.3 æ ¹æ®å…³é”®å­—æå–æ–‡ä»¶è·¯å¾„</h4>\n<p>â€‹\tè¿™é‡Œä»¥æœ€ç®€å•çš„å…³é”®å­—æå–ï¼Œå³ <code>if keyword in file</code>ä¸ºä¾‹ã€‚</p>\n<pre><code class=\"language-python\">def filter_by_key_word(dir_path,key_word:str='F1'):   \n    '''\n    æ–‡ä»¶å¤¹è·¯å¾„ä»¥å…³é”®å­—ï¼Œé€’å½’æŸ¥æ‰¾ç¬¦åˆå…³é”®å­—çš„æ–‡ä»¶\n    :param dir_path: è¾“å…¥æ ¹æ–‡ä»¶å¤¹\n    :param key_word: å…³é”®å­—\n    '''\n    res:list = []\n    for root, dirnames, files in os.walk(dir_path):\n        for file in files:\n            if key_word in file:\n                res.append(\n                    os.path.join(root, file)\n                )\n    print(res)\n    return\n</code></pre>\n<p>æŒ‰ç…§é¢„æœŸï¼Œå°±åº”è¯¥è¾“å‡º<code>F1</code>ï¼š</p>\n<blockquote>\n<p>['E:\\walk\\root\\F1.txt']</p>\n</blockquote>\n<p>æ›´æ”¹å…³é”®å­—ï¼Œä¹Ÿå¯ä»¥åšåˆ°ç­›é€‰ä¸åŒæ–‡ä»¶çš„åŠŸèƒ½ï¼Œå¯ä»¥è‡ªå·±æ”¹ä¸€ä¸‹ã€‚å¯¹<code>files</code>è¿­ä»£æ”¹ä¸ºå¯¹<code>dirname</code>è¿­ä»£ï¼Œä¸€æ ·èƒ½å®Œæˆå¯¹æ–‡ä»¶å¤¹çš„å…³é”®å­—æå–ï¼Œå¯ä»¥å°è¯•ä¸€ä¸‹</p>\n<h4 id=\"44-å…¶ä»–è¿ç”¨\">4.4 å…¶ä»–è¿ç”¨</h4>\n<p>â€‹\tèƒ½æ‰¾åˆ°æ–‡ä»¶åœ°å€ï¼Œåç»­å°±å¯ä»¥æŒ‰ç…§ä½ æƒ³å¤„ç†çš„æ–¹å¼å¯¹æ–‡ä»¶è¿›è¡Œå¤„ç†äº†ï¼Œè¿™ä¸ªæ ¹æ®å„è‡ªéœ€è¦è¿›è¡Œæ‰©å±•å°±å¥½ï¼Œæ•™ç¨‹ç»“æŸã€‚</p>\n<h3 id=\"5-éƒ¨åˆ†ä»£ç \">5. éƒ¨åˆ†ä»£ç ï¼š</h3>\n<pre><code class=\"language-python\">import os\n\ndef walk_example(dir_path:str):\n\t\n    # walk_iter = os.walk(dir_path)\n    # print(walk_iter.__next__())\n\n\n    for root, dir_names, file_names in os.walk(dir_path):   #(dirpath, dirnames, filenames)\n        print(f'dirpath :{root}')\n        print(f'dir_names :{dir_names}')\n        print(f'file_names:{file_names}')\n        print('-'*50)\n\n\ndef walk_get_file_path(dir_path:str):\n    '''\n    è·å–æ–‡ä»¶è·¯å¾„\n    :param dir_path: è¾“å…¥æ–‡ä»¶å¤¹è·¯å¾„\n    '''\n\n    file_list = []\n    for root, dirnames, files in os.walk(dir_path):\n        print(f'local root path :{root}')\n        for file in files:\n            file_path = os.path.join(root, file)        #window ä¸Šï¼Œç­‰ä»·äº root + \"\\\\\" + file\n            # file_path = root + \"\\\\\" + file\n            print(f'file path :{file_path}')\n            file_list.append(file_path)\n        print('-'*50)\n    print(file_list)\n    return\n\ndef filter_by_key_word(dir_path,key_word:str='F1'):\n    '''\n    æ–‡ä»¶å¤¹è·¯å¾„ä»¥å…³é”®å­—ï¼Œé€’å½’æŸ¥æ‰¾ç¬¦åˆå…³é”®å­—çš„æ–‡ä»¶\n    :param dir_path: è¾“å…¥æ ¹æ–‡ä»¶å¤¹\n    :param key_word: å…³é”®å­—\n\n    '''\n    res:list = []\n    for root, dirnames, files in os.walk(dir_path):\n        for file in files:\n            if key_word in file:\n                res.append(\n                    os.path.join(root, file)\n                )\n    print(res)\n    return\n\nif __name__ == '__main__':\n    dir_path = r'your_path'\n    # walk_example(dir_path)\n    # walk_get_file_path(dir_path)\n    filter_by_key_word(dir_path)\n</code></pre>\n<h3 id=\"6-è¿­ä»£å™¨ç›¸å…³éå¿…é¡»\">6 è¿­ä»£å™¨ç›¸å…³ï¼ˆéå¿…é¡»ï¼‰</h3>\n<p>â€‹\tå»ºè®®å…ˆå»å­¦ä¹ ä¸€ä¸‹ä»€ä¹ˆæ˜¯è¿­ä»£å™¨ï¼Œå†çœ‹è¿™ä¸ªæ¼”ç¤ºä»£ç ï¼Œå¯¹<code>os.walk</code>ç†è§£ä¼šæ›´æ·±ï¼Œè¿™è¾¹è¿˜æ˜¯å»ºè®®å­¦ä¸€ä¸‹çš„ï¼Œå¦‚æœå¤Ÿæ—¶é—´çš„è¯ï¼Œè¶å­¦os.walkå¤šå­¦ä¸€ä¸ªè¿­ä»£å™¨/ç”Ÿæˆå™¨ï¼Œä½•ä¹è€Œä¸ä¸ºå‘¢ï¼Œå‡½æ•°è®²è§£å¡é‡Œé¢äº†ï¼Œå°±è¿™æ ·å§ã€‚</p>\n<pre><code class=\"language-python\">def iter_example(dir_path:str):\n    '''\n    è¿­ä»£å™¨ç†è§£ä»£ç \n    :param dir_path:\n    '''\n    #æˆ‘æ²¡è®°é”™çš„è¯ï¼Œæ˜¯è¦æœ‰__next__ å’Œ __iter__ ç±»æ–¹æ³•ï¼Œæ‰èƒ½æ˜¯è¿­ä»£å™¨ç±»\n    walk_iter = os.walk(dir_path)\n    print(walk_iter.__next__())         #è·å–è¿­ä»£å™¨çš„ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œä¸€èˆ¬éƒ½ç”¨nextè®¿é—®ä¸‹ä¸€ä¸ªå…ƒç´ \n    print(walk_iter.__iter__())         #è·å–è¿­ä»£å™¨æœ¬èº«ï¼Œè¿™é‡Œos.walkè¿”å›çš„æ˜¯generator objectï¼Œæœ¬è´¨ä¸Šä¹Ÿæ˜¯è¿­ä»£å™¨ï¼Œä¸å¤ªèƒ½è·å–å½“å‰è¿­ä»£å™¨çš„å…ƒç´ å™¢ï¼\n    print(next(walk_iter))              #ç›¸åŒå†™æ³•\n    print('#'*25+\"åˆ†éš”ç¬¦\"+'#'*25)\n    count = 0\n    while True:\n        count += 1\n        try:\n            print(f'next element:{walk_iter.__next__()}')\n            print(\"-\"*50 + f\"{count}\")\n        except Exception as e:          #æ— å¯è¿­ä»£å¯¹è±¡åï¼Œä¼šraiseä¸€ä¸ªStopIteration Error\n            # print('finish iter, break')\n            # break                         #å¸¸è§„å¾ªç¯é€€å‡ºæœºåˆ¶\n            raise e\n\n</code></pre>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2025-12-29 23:19</span>&nbsp;\n<a href=\"https://www.cnblogs.com/io-T-T\">io_T_T</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">42</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "docker-compose éƒ¨ç½²å•èŠ‚ç‚¹ kafka 4.0 æµ‹è¯•ç¯å¢ƒ",
      "link": "https://www.cnblogs.com/apocelipes/p/19417908",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/apocelipes/p/19417908\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2025-12-29 20:34\">\n    <span>docker-compose éƒ¨ç½²å•èŠ‚ç‚¹ kafka 4.0 æµ‹è¯•ç¯å¢ƒ</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<p>é«˜ç‰ˆæœ¬kafkaå·²ç»ä¸å†éœ€è¦ZooKeeperå½“ä¿å§†æ‰èƒ½å¯åŠ¨äº†ï¼Œç°åœ¨éƒ¨ç½²ä¸€ä¸ªå•æœºå•èŠ‚ç‚¹æµ‹è¯•ç¯å¢ƒæ¯”åŸæ¥æ–¹ä¾¿ä¸å°‘ã€‚</p>\n<p>ä¸è¿‡æœ€å¸¸ç”¨çš„<code>bitnami/kafka</code>ä¸å†æä¾›å…è´¹é•œåƒï¼Œå¯¼è‡´æˆ‘ä»¬åªèƒ½ç”¨<code>apache/kafka</code>ï¼Œæ–°é•œåƒçš„é…ç½®ä¼šç¨å¾®éº»çƒ¦ä¸€äº›ï¼Œæ‰€ä»¥è®°å½•ä¸€ä¸‹ã€‚</p>\n<p>éƒ¨ç½²å†…å®¹ï¼š</p>\n<ul>\n<li>å•èŠ‚ç‚¹kafkaæœåŠ¡ï¼Œç‰ˆæœ¬4.0+</li>\n<li>kafka UIï¼Œæ–¹ä¾¿ç®¡ç†ï¼Œç‰ˆæœ¬ç”¨æœ€æ–°çš„</li>\n<li>å¼€å¯ç®€å•çš„ç”¨æˆ·åå¯†ç éªŒè¯</li>\n</ul>\n<p>docker-composeæ–‡ä»¶ï¼š</p>\n<pre><code class=\"language-yaml\">version: '3'\n\nnetworks:\n  kafka-net:\n\nservices:\n  kafka:\n    image: apache/kafka:latest\n    container_name: kafka\n    networks:\n      - kafka-net\n    ports:\n      - \"9092:9092\"\n    volumes:\n      - ./kafka_data:/var/lib/kafka/data\n      - ./kafka_server_jaas.conf:/etc/kafka/kafka_server_jaas.conf # é…ç½®ç”¨æˆ·åå¯†ç \n    environment:\n      KAFKA_NODE_ID: 1\n      KAFKA_PROCESS_ROLES: 'broker,controller'\n      KAFKA_CONTROLLER_QUORUM_VOTERS: '1@localhost:9093'\n      KAFKA_CONTROLLER_LISTENER_NAMES: 'CONTROLLER'\n      \n      # å®šä¹‰ç›‘å¬å™¨ï¼šEXTERNAL(9092) èµ° SASL è®¤è¯ï¼ŒPLAINTEXT(29092) ç»™å®¹å™¨å†…ç”¨ï¼ˆè¿™é‡Œä¹Ÿæ”¹ä¸º SASL ç¡®ä¿å®‰å…¨ï¼‰\n      KAFKA_LISTENERS: 'SASL_PLAINTEXT://0.0.0.0:29092,EXTERNAL://0.0.0.0:9092,CONTROLLER://0.0.0.0:9093'\n      KAFKA_ADVERTISED_LISTENERS: 'SASL_PLAINTEXT://kafka:29092,EXTERNAL://localhost:9092'\n      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: 'CONTROLLER:PLAINTEXT,SASL_PLAINTEXT:SASL_PLAINTEXT,EXTERNAL:SASL_PLAINTEXT'\n      KAFKA_INTER_BROKER_LISTENER_NAME: 'SASL_PLAINTEXT'\n      \n      # SASL/PLAIN è®¤è¯é…ç½®\n      KAFKA_SASL_ENABLED_MECHANISMS: 'PLAIN'\n      KAFKA_SASL_MECHANISM_INTER_BROKER_PROTOCOL: 'PLAIN'\n      # å‘Šè¯‰ Kafka è¯»å–æˆ‘ä»¬çš„ JAAS æ–‡ä»¶\n      KAFKA_OPTS: \"-Djava.security.auth.login.config=/etc/kafka/kafka_server_jaas.conf\"\n\n      # æ•°æ®æŒä¹…åŒ–\n      KAFKA_LOG_DIRS: '/var/lib/kafka/data'\n\n  kafka-ui:\n    image: provectuslabs/kafka-ui:latest\n    container_name: kafka-ui\n    depends_on:\n      - kafka\n    networks:\n      - kafka-net\n    ports:\n      # æ˜ å°„åˆ°8090ï¼Œå› ä¸º8080ä¸€èˆ¬è¿˜å¾—æŒ‚å…¶ä»–çš„æœåŠ¡åšæµ‹è¯•\n      - \"8090:8080\"\n    environment:\n      KAFKA_CLUSTERS_0_NAME: local\n      KAFKA_CLUSTERS_0_BOOTSTRAPSERVERS: kafka:29092\n      # é…ç½® UI ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç è¿æ¥ Kafka\n      KAFKA_CLUSTERS_0_PROPERTIES_SECURITY_PROTOCOL: SASL_PLAINTEXT\n      KAFKA_CLUSTERS_0_PROPERTIES_SASL_MECHANISM: PLAIN\n      KAFKA_CLUSTERS_0_PROPERTIES_SASL_JAAS_CONFIG: 'org.apache.kafka.common.security.plain.PlainLoginModule required username=\"ä½ é…ç½®çš„ç”¨æˆ·å\" password=\"ä½ é…ç½®çš„å¯†ç \";'\n</code></pre>\n<p>é…ç½®æ–‡ä»¶é‡Œè¾“å…¥ç”¨æˆ·å’Œå¯†ç ï¼š</p>\n<pre><code class=\"language-conf\">KafkaServer {\n    org.apache.kafka.common.security.plain.PlainLoginModule required\n    username=\"èŠ‚ç‚¹åœ¨é›†ç¾¤å†…é€šä¿¡æ—¶çš„ç”¨æˆ·å\"\n    password=\"èŠ‚ç‚¹åœ¨é›†ç¾¤å†…é€šä¿¡æ—¶çš„å¯†ç \"\n    # ä¸‹é¢è¿™äº›æ‰æ˜¯ç”¨æˆ·é…ç½®\n    # æ ¼å¼user_&lt;ç”¨æˆ·å&gt;=\"å¯†ç \"\n    user_apot=\"ä½ é…ç½®çš„å¯†ç \";\n};\n</code></pre>\n<p>åˆ›å»ºå¥½æ–‡ä»¶å’Œç›®å½•ä¹‹åç”¨<code>docker-compose up -d</code>å°±èƒ½å¯åŠ¨æœåŠ¡äº†ã€‚è®¿é—®<code>localhost:8090</code>å¯ä»¥çœ‹åˆ°kafkaçš„webæ§åˆ¶é¢æ¿ï¼š</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/1434464/202512/1434464-20251229202723957-374430349.png\" /></p>\n<p>å®‰è£…å¥½ä¹‹åå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹ç‰ˆæœ¬ï¼š</p>\n<pre><code class=\"language-console\">$ docker exec -it kafka /opt/kafka/bin/kafka-server-start.sh --version\n\n[2025-12-29 11:08:34,595] INFO Registered kafka:type=kafka.Log4jController MBean (kafka.utils.Log4jControllerRegistration$)\n4.0.0\n</code></pre>\n<p>å¯ä»¥çœ‹åˆ°å·²ç»é…ç½®å¥½äº†kafka 4.0ç¯å¢ƒã€‚</p>\n<p><code>apache/kafka</code>çš„é•œåƒé‡Œå†…ç½®äº†å„ç§æ“ä½œkafkaçš„è„šæœ¬ï¼Œä¸è¿‡è¿™äº›è„šæœ¬æ²¡è¢«æ·»åŠ è¿›<code>$PATH</code>ï¼Œæ‰§è¡Œçš„æ—¶å€™éœ€è¦æŒ‡å®šè·¯å¾„ï¼š</p>\n<pre><code class=\"language-bash\"># å…ˆé…ç½®ç™»å½•éªŒè¯ä¿¡æ¯\ndocker exec -it kafka bash -c \"cat &lt;&lt;EOF &gt; /tmp/client.conf\nsecurity.protocol=SASL_PLAINTEXT\nsasl.mechanism=PLAIN\nsasl.jaas.config=org.apache.kafka.common.security.plain.PlainLoginModule required \\\n  username='å®¢æˆ·ç«¯ç™»å½•ç”¨æˆ·åï¼Œå°±æ˜¯æˆ‘ä»¬ä¹‹å‰ç”¨user_xxxé…ç½®çš„é‚£äº›' \\\n  password='å®¢æˆ·ç«¯ç™»å½•å¯†ç ';\nEOF\"\n\n# è°ƒç”¨è„šæœ¬åˆ›å»ºä¸€ä¸ªtopicï¼Œéœ€è¦æŒ‡å®šè„šæœ¬è·¯å¾„\ndocker exec -it kafka /opt/kafka/bin/kafka-topics.sh --command-config /tmp/client.conf \\\n  --bootstrap-server localhost:9092 \\\n  --create \\\n  --topic test.data \\\n  --partitions 1 \\\n  --replication-factor 1 \\\n  --config cleanup.policy=delete \\\n  --config retention.ms=86400000\n</code></pre>\n<p>æ‰€æœ‰è„šæœ¬éƒ½å­˜æ”¾åœ¨<code>/opt/kafka/bin</code>è·¯å¾„ä¸‹ï¼Œè°ƒç”¨å‰è¿˜éœ€è¦æä¾›ç™»å½•å‡­è¯ä¿¡æ¯ï¼Œè¿™äº›éœ€è¦æ³¨æ„ã€‚æ‰“å¼€<code>localhost:8090</code>ä¸Šçš„web UIï¼Œå°±èƒ½æ‰¾åˆ°æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„topicäº†ï¼š</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/1434464/202512/1434464-20251229202843717-1676041370.png\" /></p>\n<p>è¿‡æœŸå¤„ç†ç­–ç•¥å’Œè¿‡æœŸæ—¶é—´ä¹Ÿå·²ç»è¢«æ­£ç¡®è®¾ç½®ï¼š</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/1434464/202512/1434464-20251229203013465-1213915024.png\" /></p>\n<p>æ€»ä½“è€Œè¨€æ‰§è¡Œè„šæœ¬è¿˜æ˜¯æœ‰äº›ç¹çï¼Œæˆ‘æ›´æ„¿æ„é€šè¿‡ä»£ç æˆ–è€…webç•Œé¢æ¥åšè¿™äº›æ“ä½œã€‚</p>\n<p>æœ€åæˆ‘ä»¬å†™ä¸€ä¸ªgoçš„æµ‹è¯•ä»£ç ï¼Œå‘æˆ‘ä»¬çš„æµ‹è¯•ç”¨å•èŠ‚ç‚¹kafkaé‡Œå†™å…¥ä¸€äº›æ•°æ®ï¼š</p>\n<pre><code class=\"language-golang\">package main\n\nimport (\n\t\"context\"\n\t\"math/rand/v2\"\n\t\"strconv\"\n\t\"time\"\n\n\t\"github.com/segmentio/kafka-go\"\n\t\"github.com/segmentio/kafka-go/sasl/plain\"\n)\n\nconst (\n\ttopic         = \"lean.data1\"\n\tkafkaEndpoint = \"localhost:9092\"\n)\n\nfunc main() {\n\tmechanism := plain.Mechanism{\n\t\tUsername: \"å®¢æˆ·ç«¯ç™»å½•ç”¨æˆ·å\",\n\t\tPassword: \"å®¢æˆ·ç«¯ç™»å½•å¯†ç \",\n\t}\n\n\tdialer := &amp;kafka.Dialer{\n\t\tTimeout:       10 * time.Second,\n\t\tDualStack:     true,\n\t\tSASLMechanism: mechanism,\n\t}\n\n\tw := kafka.NewWriter(kafka.WriterConfig{\n\t\tBrokers: []string{kafkaEndpoint},\n\t\tDialer:  dialer, // å¿…é¡»ä¼ å…¥å¸¦ SASL çš„ dialer\n\t\tAsync:   false,\n\t})\n\tdefer w.Close()\n\n\tmsg := kafka.Message{\n\t\tTopic: topic,\n\t\tKey:   []byte(\"test\"),\n\t\tValue: []byte(strconv.Itoa(rand.Int())), // éšä¾¿å†™å…¥ä¸€äº›éšæœºæ•°æ®\n\t}\n\n\tctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)\n\tdefer cancel()\n\n\terr := w.WriteMessages(ctx, msg)\n\tif err != nil {\n\t\tpanic(err)\n\t}\n}\n</code></pre>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/1434464/202512/1434464-20251229202601662-326565622.png\" /></p>\n<p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„éšæœºæ•°å·²ç»æ­£å¸¸å†™å…¥topicäº†ã€‚</p>\n<p>æ³¨æ„ï¼šè¿™ä¸ªé…ç½®åªä½¿ç”¨äº†æœ€åŸºæœ¬çš„éªŒè¯ï¼Œä¸”æ˜¯å•èŠ‚ç‚¹ï¼Œä¸é€‚åˆåœ¨æµ‹è¯•å’Œå­¦ä¹ ä¹‹å¤–çš„ä»»ä½•ç”¨é€”ä½¿ç”¨ï¼Œä¸ºäº†å®‰å…¨æˆ‘ä¹Ÿå»ºè®®åœ¨æµ‹è¯•å®Œæˆä¹‹åå°±ç«‹åˆ»ç”¨<code>docker-compose down</code>å…³é—­æœåŠ¡ã€‚</p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2025-12-29 20:34</span>&nbsp;\n<a href=\"https://www.cnblogs.com/apocelipes\">apocelipes</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">64</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "ã€å¤§æ•°æ® & AIã€‘Flink Agents æºç è§£è¯» --- (2) ---  æ ¸å¿ƒæ¶æ„",
      "link": "https://www.cnblogs.com/rossiXYZ/p/19369781",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/rossiXYZ/p/19369781\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2025-12-29 20:24\">\n    <span>ã€å¤§æ•°æ® &amp; AIã€‘Flink Agents æºç è§£è¯» --- (2) ---  æ ¸å¿ƒæ¶æ„</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h1 id=\"å¤§æ•°æ®--aiflink-agents-æºç è§£è¯»-----2------æ ¸å¿ƒæ¶æ„\">ã€å¤§æ•°æ® &amp; AIã€‘Flink Agents æºç è§£è¯» --- (2) ---  æ ¸å¿ƒæ¶æ„</h1>\n<p></p><div class=\"toc\"><div class=\"toc-container-header\">ç›®å½•</div><ul><li><a href=\"#å¤§æ•°æ®--aiflink-agents-æºç è§£è¯»-----2------æ ¸å¿ƒæ¶æ„\" rel=\"noopener nofollow\">ã€å¤§æ•°æ® &amp; AIã€‘Flink Agents æºç è§£è¯» --- (2) ---  æ ¸å¿ƒæ¶æ„</a><ul><li><a href=\"#0x00-æ‘˜è¦\" rel=\"noopener nofollow\">0x00 æ‘˜è¦</a></li><li><a href=\"#0x01-flink-agentsä¸»è¦ç»„ä»¶\" rel=\"noopener nofollow\">0x01 Flink Agentsä¸»è¦ç»„ä»¶</a><ul><li><a href=\"#11-ä¸»è¦ç»„ä»¶\" rel=\"noopener nofollow\">1.1 ä¸»è¦ç»„ä»¶</a></li><li><a href=\"#12-å†…éƒ¨æˆå‘˜å˜é‡æ˜ å°„å…³ç³»\" rel=\"noopener nofollow\">1.2 å†…éƒ¨æˆå‘˜å˜é‡æ˜ å°„å…³ç³»</a><ul><li><a href=\"#121-agent-åˆ°-agentplan\" rel=\"noopener nofollow\">1.2.1 Agent åˆ° AgentPlan</a></li><li><a href=\"#122-agentplan-åˆ°-actionexecutionoperator\" rel=\"noopener nofollow\">1.2.2 AgentPlan åˆ° ActionExecutionOperator</a><ul><li><a href=\"#è¯¦ç»†æ˜ å°„åˆ†æ\" rel=\"noopener nofollow\">è¯¦ç»†æ˜ å°„åˆ†æ</a><ul><li><a href=\"#åŠ¨ä½œæ‰§è¡Œæ˜ å°„\" rel=\"noopener nofollow\">åŠ¨ä½œæ‰§è¡Œæ˜ å°„</a></li><li><a href=\"#èµ„æºç®¡ç†æ˜ å°„\" rel=\"noopener nofollow\">èµ„æºç®¡ç†æ˜ å°„</a></li><li><a href=\"#é…ç½®æ˜ å°„\" rel=\"noopener nofollow\">é…ç½®æ˜ å°„</a></li><li><a href=\"#çŠ¶æ€ç®¡ç†æ˜ å°„\" rel=\"noopener nofollow\">çŠ¶æ€ç®¡ç†æ˜ å°„</a></li></ul></li></ul></li></ul></li><li><a href=\"#13-æ‰§è¡Œæµç¨‹\" rel=\"noopener nofollow\">1.3 æ‰§è¡Œæµç¨‹</a></li></ul></li><li><a href=\"#0x02-ä¸åŸç”Ÿflinkæ¯”å¯¹\" rel=\"noopener nofollow\">0x02 ä¸åŸç”ŸFlinkæ¯”å¯¹</a><ul><li><a href=\"#21-æ ¸å¿ƒ\" rel=\"noopener nofollow\">2.1 æ ¸å¿ƒ</a></li><li><a href=\"#22-å…·ä½“æ¯”å¯¹\" rel=\"noopener nofollow\">2.2 å…·ä½“æ¯”å¯¹</a><ul><li><a href=\"#221-agent\" rel=\"noopener nofollow\">2.2.1 Agent</a></li><li><a href=\"#222-agentplan\" rel=\"noopener nofollow\">2.2.2 AgentPlan</a></li><li><a href=\"#223-actionexecutionoperator\" rel=\"noopener nofollow\">2.2.3 ActionExecutionOperator</a></li><li><a href=\"#223-actiontask\" rel=\"noopener nofollow\">2.2.3 ActionTask</a></li></ul></li></ul></li><li><a href=\"#0x03-å®ä¾‹æ‹†è§£\" rel=\"noopener nofollow\">0x03 å®ä¾‹æ‹†è§£</a><ul><li><a href=\"#31-ç¬¬ä¸€å±‚çº§agent--é¤å…èœå•å’Œè§„åˆ™æ‰‹å†Œblueprint\" rel=\"noopener nofollow\">3.1 ç¬¬ä¸€å±‚çº§ï¼šAgent â€“ é¤å…èœå•å’Œè§„åˆ™æ‰‹å†Œï¼ˆBlueprintï¼‰</a></li><li><a href=\"#32-ç¬¬äºŒå±‚çº§agentplan--é¤å…çš„è¯¦ç»†æ“ä½œæµç¨‹å›¾compiled-planè®¡åˆ’ç¼–è¯‘å±‚\" rel=\"noopener nofollow\">3.2 ç¬¬äºŒå±‚çº§ï¼šAgentPlan â€“ é¤å…çš„è¯¦ç»†æ“ä½œæµç¨‹å›¾ï¼ˆCompiled Plan,è®¡åˆ’ç¼–è¯‘å±‚ï¼‰</a><ul><li><a href=\"#ç»“æ„åŒ–è§£æ\" rel=\"noopener nofollow\">ç»“æ„åŒ–è§£æ</a></li><li><a href=\"#å¹³å°é€‚é…æ€§\" rel=\"noopener nofollow\">å¹³å°é€‚é…æ€§</a></li></ul></li><li><a href=\"#33-ç¬¬ä¸‰å±‚çº§actionexecutionoperator--é¤å…çš„æ‰§è¡Œç®¡ç†å±‚runtime-executoræ‰§è¡Œå¼•æ“å±‚\" rel=\"noopener nofollow\">3.3 ç¬¬ä¸‰å±‚çº§ï¼šActionExecutionOperator â€“ é¤å…çš„æ‰§è¡Œç®¡ç†å±‚ï¼ˆRuntime Executorï¼Œæ‰§è¡Œå¼•æ“å±‚ï¼‰</a></li><li><a href=\"#34-ç¬¬å››å±‚çº§actiontask--å…·ä½“çš„æœåŠ¡æ­¥éª¤execution-unit\" rel=\"noopener nofollow\">3.4 ç¬¬å››å±‚çº§ï¼šActionTask â€“ å…·ä½“çš„æœåŠ¡æ­¥éª¤ï¼ˆExecution Unitï¼‰</a></li><li><a href=\"#35-å·¥ä½œæµç¨‹ä¸¾ä¾‹\" rel=\"noopener nofollow\">3.5 å·¥ä½œæµç¨‹ä¸¾ä¾‹</a></li></ul></li><li><a href=\"#0x04-å¹¶å‘æ€§å’Œå¹¶è¡Œæ€§\" rel=\"noopener nofollow\">0x04 å¹¶å‘æ€§å’Œå¹¶è¡Œæ€§</a><ul><li><a href=\"#41-flinkåŸç”Ÿå¹¶å‘æ¨¡å‹\" rel=\"noopener nofollow\">4.1 FlinkåŸç”Ÿå¹¶å‘æ¨¡å‹</a></li><li><a href=\"#42-æ¯ä¸ªkeyçš„çŠ¶æ€ç®¡ç†\" rel=\"noopener nofollow\">4.2 æ¯ä¸ªKeyçš„çŠ¶æ€ç®¡ç†</a></li><li><a href=\"#43-é‚®ç®±çº¿ç¨‹æ¨¡å‹\" rel=\"noopener nofollow\">4.3 é‚®ç®±çº¿ç¨‹æ¨¡å‹</a></li><li><a href=\"#44-å¼‚æ­¥ä»»åŠ¡å¤„ç†\" rel=\"noopener nofollow\">4.4 å¼‚æ­¥ä»»åŠ¡å¤„ç†</a></li><li><a href=\"#45-å†…å­˜ä¸€è‡´æ€§\" rel=\"noopener nofollow\">4.5 å†…å­˜ä¸€è‡´æ€§</a></li><li><a href=\"#46-æ°´å°å’Œäº‹ä»¶æ—¶é—´å¤„ç†\" rel=\"noopener nofollow\">4.6 æ°´å°å’Œäº‹ä»¶æ—¶é—´å¤„ç†</a></li><li><a href=\"#47-æ£€æŸ¥ç‚¹å’Œæ¢å¤\" rel=\"noopener nofollow\">4.7 æ£€æŸ¥ç‚¹å’Œæ¢å¤</a></li><li><a href=\"#48-æ€»ç»“\" rel=\"noopener nofollow\">4.8 æ€»ç»“</a></li></ul></li><li><a href=\"#0xff-å‚è€ƒ\" rel=\"noopener nofollow\">0xFF å‚è€ƒ</a></li></ul></li></ul></div><p></p>\n<h2 id=\"0x00-æ‘˜è¦\">0x00 æ‘˜è¦</h2>\n<p>Flink Agents æ¡†æ¶çš„æ ¸å¿ƒæ˜¯ <strong>â€œäº‹ä»¶é©±åŠ¨ + çŠ¶æ€éš”ç¦» + å¤šè¯­è¨€åä½œâ€</strong>ï¼šé€šè¿‡ Agent/AgentPlan å®ç°ä¸šåŠ¡é€»è¾‘çš„å£°æ˜å¼å®šä¹‰ï¼Œå€ŸåŠ© Flink åŸç”Ÿçš„åˆ†å¸ƒå¼ã€é«˜å¹¶å‘èƒ½åŠ›å®ç°å¯é æ‰§è¡Œï¼ŒåŒæ—¶æ”¯æŒ Python ç”Ÿæ€çš„å·¥å…· / æ¨¡å‹é›†æˆï¼Œå…¼é¡¾äº†å¼€å‘çµæ´»æ€§ä¸è¿è¡Œæ—¶æ•ˆç‡ï¼Œé€‚ç”¨äºå¤æ‚ AI ä»£ç†ä»»åŠ¡çš„åˆ†å¸ƒå¼éƒ¨ç½²ä¸æ‰§è¡Œã€‚</p>\n<p>å…·ä½“è€Œè¨€ï¼ŒFlink Agents çš„ç»„ä»¶æ˜¯å¯¹åŸç”Ÿ Flink ç»„ä»¶åœ¨ â€œAgent ä¸šåŠ¡åœºæ™¯â€ ä¸‹çš„è¯­ä¹‰åŒ–å°è£…ï¼Œè€Œéå…¨æ–°å‘æ˜ã€‚å› æ­¤ï¼Œæœ¬æ–‡å°†å…ˆä»‹ç»Flink Agentsçš„åŸºæœ¬ç»„ä»¶ï¼Œç„¶åå°†å…¶ç»„ä»¶ä¸Flink åŸç”Ÿç»„ä»¶åšå¯¹æ¯”ï¼Œæœ€åç»™å‡ºä¸€ä¸ªè¯¦ç»†çš„ä¾‹å­ï¼Œè¿™æ ·è¯»è€…å¯ä»¥æ›´å¥½çš„ç†è§£å…¶è®¾è®¡ç²¾è¦ã€‚</p>\n<h2 id=\"0x01-flink-agentsä¸»è¦ç»„ä»¶\">0x01 Flink Agentsä¸»è¦ç»„ä»¶</h2>\n<p>å¯ä»¥æŠŠ Flink Agents çš„æ•´ä¸ªæ‰§è¡Œæµç¨‹æ¯”ä½œ â€œåšä¸€é“èœâ€ï¼Œæˆ‘ä»¬å€Ÿæ­¤è¿›è¡Œåˆ†æã€‚</p>\n<h3 id=\"11-ä¸»è¦ç»„ä»¶\">1.1 ä¸»è¦ç»„ä»¶</h3>\n<p>Flink Agents æ˜¯åŸºäºåŸç”Ÿ Flink åˆ†å¸ƒå¼æµå¤„ç†èƒ½åŠ›å°è£…çš„ä¸Šå±‚æ¡†æ¶ã€‚å…¶ä¸­å››ä¸ªä¸»è¦ç»„ä»¶ä»£è¡¨äº† Flink Agents æ¡†æ¶ä¸­çš„å››ä¸ªå±‚æ¬¡ï¼š</p>\n<ul>\n<li><strong>Agentï¼ˆé¡¶å±‚è®¾è®¡ï¼Œå®šä¹‰äº†â€œåšä»€ä¹ˆâ€ï¼‰</strong>ï¼šç”¨æˆ·å®šä¹‰çš„æ™ºèƒ½å®ä½“ï¼Œç±»ä¼¼ â€œé¤å…èœå• + è§„åˆ™æ‰‹å†Œâ€ï¼ŒåŒ…å«ä¸šåŠ¡é€»è¾‘ã€åŠ¨ä½œï¼ˆActionï¼‰å’Œèµ„æºï¼ˆå·¥å…·ã€æ¨¡å‹ç­‰ï¼‰å®šä¹‰ï¼Œæ˜ç¡® â€œåšä»€ä¹ˆâ€ã€‚</li>\n<li><strong>AgentPlanï¼ˆä¸­é—´ç¼–è¯‘å±‚ï¼Œç¡®å®šäº†â€œæ€ä¹ˆåšâ€ï¼‰</strong>ï¼šå°† Agent ç¼–è¯‘åçš„å¯æ‰§è¡Œè®¡åˆ’ï¼Œç±»ä¼¼ â€œè¯¦ç»†æ“ä½œæµç¨‹å›¾â€ï¼Œæ˜ç¡®åŠ¨ä½œè§¦å‘è§„åˆ™ã€èµ„æºæ˜ å°„å…³ç³»ï¼Œç¡®å®š â€œæ€ä¹ˆåšâ€ã€‚</li>\n<li><strong>ActionExecutionOperatorï¼ˆè¿è¡Œæ—¶æ‰§è¡Œå±‚ï¼Œæ˜¯æ‰§è¡Œç¯å¢ƒï¼Œè´Ÿè´£â€œåè°ƒè°ƒåº¦â€ï¼‰</strong>ï¼šFlink é›†ç¾¤ä¸­çš„æ‰§è¡Œæ ¸å¿ƒï¼Œåœ¨ Flink æµå¤„ç†ç¯å¢ƒä¸­å®é™…æ‰§è¡Œæ“ä½œï¼Œç±»ä¼¼ â€œé¤å…é¦–å¸­å¤§å¨â€ï¼Œè´Ÿè´£æ¥æ”¶æ•°æ®ã€è°ƒåº¦ä»»åŠ¡ã€ç®¡ç†çŠ¶æ€ï¼Œåè°ƒæ•´ä½“æ‰§è¡Œæµç¨‹ã€‚</li>\n<li><strong>ActionTaskï¼ˆæœ€å°æ‰§è¡Œå•å…ƒï¼Œè´Ÿè´£â€œå…·ä½“å®æ–½â€ï¼‰</strong>ï¼šå…·ä½“çš„æ‰§è¡Œä»»åŠ¡ï¼Œç±»ä¼¼ â€œå‘˜å·¥çš„å•ä¸ªæœåŠ¡æ­¥éª¤â€ï¼Œåˆ†ä¸º JavaActionTask å’Œ PythonActionTaskï¼Œå¤„ç†å•ä¸ªäº‹ä»¶å¹¶è¿”å›ç»“æœã€‚</li>\n</ul>\n<p>å…·ä½“å¯ä»¥å‚è§ä¸‹å›¾ã€‚</p>\n<pre><code class=\"language-python\">[Agent] èœå•æ‰‹å†Œ\n    â†“ï¼ˆç¼–è¯‘ï¼‰\n[AgentPlan] è¯¦ç»†æµç¨‹å›¾\n    â†“ï¼ˆè¿è¡Œæ—¶å®ä¾‹åŒ–ï¼‰\n[ActionExecutionOperator] é¤å…é¦–å¸­å¤§å¨\n    â†“ï¼ˆåˆ†é…ä»»åŠ¡ï¼‰\n[ActionTask] å‘˜å·¥å…·ä½“ä»»åŠ¡\n</code></pre>\n<p>è¿™æ ·çš„è®¾è®¡ä½¿å¾—ç³»ç»Ÿæ—¢çµæ´»åˆé«˜æ•ˆï¼Œèƒ½å¤Ÿå¤„ç†å¤æ‚çš„AIä»£ç†ä»»åŠ¡ï¼ŒåŒæ—¶ä¿è¯äº†è‰¯å¥½çš„æ‰©å±•æ€§å’Œç»´æŠ¤æ€§ã€‚</p>\n<h3 id=\"12-å†…éƒ¨æˆå‘˜å˜é‡æ˜ å°„å…³ç³»\">1.2 å†…éƒ¨æˆå‘˜å˜é‡æ˜ å°„å…³ç³»</h3>\n<p>Agentã€AgentPlan å’Œ ActionExecutionOperator ä¹‹é—´çš„å…³ç³»ä»¥åŠå®ƒä»¬å†…éƒ¨æˆå‘˜å˜é‡çš„æ˜ å°„å…³ç³»å¦‚ä¸‹ã€‚</p>\n<h4 id=\"121-agent-åˆ°-agentplan\">1.2.1 Agent åˆ° AgentPlan</h4>\n<p>Agent åˆ° AgentPlan çš„æ˜ å°„å¦‚ä¸‹ï¼š</p>\n<table>\n<thead>\n<tr>\n<th>Agent æˆå‘˜</th>\n<th>AgentPlan å¯¹åº”æˆå‘˜</th>\n<th>è¯´æ˜</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>_actionsï¼ˆè£…é¥°å™¨å®šä¹‰ï¼‰</td>\n<td>actions, actions_by_event</td>\n<td>Agent ä¸­é€šè¿‡ @action è£…é¥°å™¨å®šä¹‰çš„åŠ¨ä½œè¢«ç¼–è¯‘åˆ° AgentPlan çš„åŠ¨ä½œæ˜ å°„ä¸­</td>\n</tr>\n<tr>\n<td>_actionsï¼ˆadd_action æ·»åŠ ï¼‰</td>\n<td>actions, actions_by_event</td>\n<td>é€šè¿‡ add_action æ–¹æ³•æ·»åŠ çš„åŠ¨ä½œåŒæ ·ç¼–è¯‘åˆ°åŠ¨ä½œæ˜ å°„ä¸­</td>\n</tr>\n<tr>\n<td>_resources</td>\n<td>resource_providers</td>\n<td>Agent ä¸­æ³¨å†Œçš„èµ„æºè¢«è½¬æ¢ä¸ºèµ„æºæä¾›è€…</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"122-agentplan-åˆ°-actionexecutionoperator\">1.2.2 AgentPlan åˆ° ActionExecutionOperator</h4>\n<p>AgentPlan åˆ° ActionExecutionOperator çš„æ˜ å°„å¦‚ä¸‹ï¼š</p>\n<table>\n<thead>\n<tr>\n<th>AgentPlan æˆå‘˜</th>\n<th>ActionExecutionOperator å¯¹åº”æˆå‘˜</th>\n<th>è¯´æ˜</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>actions</td>\n<td>é€šè¿‡ getActionsTriggeredBy() æ–¹æ³•è°ƒç”¨</td>\n<td>Operator æ ¹æ®äº‹ä»¶ç±»å‹æŸ¥æ‰¾å¯¹åº”çš„åŠ¨ä½œ</td>\n</tr>\n<tr>\n<td>resource_providers</td>\n<td>åœ¨ RunnerContextImpl ä¸­ä½¿ç”¨</td>\n<td>æä¾›è¿è¡Œæ—¶æ‰€éœ€çš„èµ„æº</td>\n</tr>\n<tr>\n<td>config</td>\n<td>metricGroup, builtInMetrics ç­‰</td>\n<td>ç”¨äºé…ç½®æŒ‡æ ‡å’Œå…¶ä»–è¿è¡Œæ—¶è¡Œä¸º</td>\n</tr>\n</tbody>\n</table>\n<h5 id=\"è¯¦ç»†æ˜ å°„åˆ†æ\">è¯¦ç»†æ˜ å°„åˆ†æ</h5>\n<h6 id=\"åŠ¨ä½œæ‰§è¡Œæ˜ å°„\">åŠ¨ä½œæ‰§è¡Œæ˜ å°„</h6>\n<p>åœ¨ <code>ActionExecutionOperator</code> ä¸­ï¼š</p>\n<pre><code class=\"language-java\">// æ ¹æ®äº‹ä»¶ç±»å‹è·å–è§¦å‘çš„åŠ¨ä½œ\nprivate List&lt;Action&gt; getActionsTriggeredBy(Event event) {\n    if (event instanceof PythonEvent) {\n        return agentPlan.getActionsTriggeredBy(((PythonEvent) event).getEventType());\n    } else {\n        return agentPlan.getActionsTriggeredBy(event.getClass().getName());\n    }\n}\n\n// åˆ›å»º ActionTask æ¥æ‰§è¡ŒåŠ¨ä½œ\nprivate ActionTask createActionTask(Object key, Action action, Event event) {\n    if (action.getExec() instanceof JavaFunction) {\n        return new JavaActionTask(\n            key, event, action, getRuntimeContext().getUserCodeClassLoader());\n    } else if (action.getExec() instanceof PythonFunction) {\n        return new PythonActionTask(key, event, action);\n    }\n    // ..\n}\n</code></pre>\n<h6 id=\"èµ„æºç®¡ç†æ˜ å°„\">èµ„æºç®¡ç†æ˜ å°„</h6>\n<p><code>AgentPlan</code> ä¸­çš„èµ„æºæä¾›è€…åœ¨ <code>ActionExecutionOperator</code> ä¸­é€šè¿‡ <code>RunnerContextImpl</code> è®¿é—®ï¼š</p>\n<pre><code class=\"language-java\">// åœ¨ RunnerContextImpl ä¸­\npublic Resource getResource(String name, ResourceType type) {\n    return agentPlan.getResource(name, type);\n}\n</code></pre>\n<h6 id=\"é…ç½®æ˜ å°„\">é…ç½®æ˜ å°„</h6>\n<p>AgentPlan ä¸­çš„é…ç½®ä¿¡æ¯è¢«ç”¨äºåˆå§‹åŒ–ActionExecutionOperatorçš„å„ç§è¿è¡Œæ—¶ç»„ä»¶ï¼š</p>\n<pre><code class=\"language-java\">// åœ¨ ActionExecutionOperator.open() ä¸­\nmetricGroup = new FlinkAgentsMetricGroupImpl(getMetricGroup());\nbuiltInMetrics = new BuiltInMetrics(metricGroup, agentPlan);\n\n// ActionStateStore åˆå§‹åŒ–ä¹Ÿä¾èµ–äºé…ç½®\nif (actionStateStore == null &amp;&amp; KAFKA.getType().equalsIgnoreCase(agentPlan.getConfig().get(ACTION_STATE_STORE_BACKEND))) {\n    actionStateStore = new KafkaActionStateStore(agentPlan.getConfig());\n}\n</code></pre>\n<h6 id=\"çŠ¶æ€ç®¡ç†æ˜ å°„\">çŠ¶æ€ç®¡ç†æ˜ å°„</h6>\n<p>ActionExecutionOperator ä¸­çš„å„ç§çŠ¶æ€ä¸ AgentPlan çš„æ‰§è¡Œéœ€æ±‚ç›¸å¯¹åº”ï¼š</p>\n<pre><code class=\"language-java\">// çŸ­æœŸå†…å­˜çŠ¶æ€ç”¨äºåŠ¨ä½œé—´çš„æ•°æ®å…±äº«\nprivate transient MapState&lt;String, MemoryObjectImpl.MemoryItem&gt; shortTermMemState;\n\n// åŠ¨ä½œä»»åŠ¡çŠ¶æ€ç”¨äºå¼‚æ­¥æ‰§è¡Œç®¡ç†\nprivate transient ListState&lt;ActionTask&gt; actionTasksState;\n\n// å¾…å¤„ç†äº‹ä»¶çŠ¶æ€ç”¨äºæµæ§\nprivate transient ListState&lt;Event&gt; pendingInputEventsState;\n</code></pre>\n<h3 id=\"13-æ‰§è¡Œæµç¨‹\">1.3 æ‰§è¡Œæµç¨‹</h3>\n<p>å…·ä½“æµç¨‹å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"language-python\">Action Code â†’ Agent â†’ AgentPlan â†’ ActionExecutionOperator â†’ ActionTask â†’ Flink Runtime\n</code></pre>\n<p>ä»¥ ReActAgent ä¸ºä¾‹ï¼Œå…¶æµç¨‹å¦‚ä¸‹ï¼š</p>\n<ul>\n<li>\n<p>ç”¨æˆ·å®šä¹‰ ReActAgentï¼ŒåŒ…å« <code>start_action</code> å’Œ <code>stop_action</code></p>\n</li>\n<li>\n<p>é€šè¿‡ <code>AgentPlan.from_agent()</code> ç¼–è¯‘æˆè®¡åˆ’ï¼š</p>\n<ul>\n<li>\n<p><code>actions</code>ï¼šåŒ…å« <code>start_action</code> å’Œ <code>stop_action</code></p>\n</li>\n<li>\n<p><code>actions_by_event</code>ï¼šæ˜ å°„ <code>InputEvent</code> â†’ <code>start_action</code>ï¼Œ<code>ChatResponseEvent</code> â†’ <code>stop_action</code></p>\n</li>\n</ul>\n</li>\n<li>\n<p>åœ¨è¿è¡Œç¯å¢ƒä¸­ï¼ŒAgentPlan è¢«ä¼ é€’ç»™ ActionExecutionOperatorFactoryã€‚ActionExecutionOperatorFactory åˆ›å»º ActionExecutionOperator å®ä¾‹ã€‚</p>\n</li>\n<li>\n<p>ActionExecutionOperator åœ¨è¿è¡Œæ—¶æ ¹æ® AgentPlan æ‰§è¡Œå…·ä½“æ“ä½œã€‚åœ¨ ActionExecutionOperator ä¸­ï¼š</p>\n<ul>\n<li>æ¥æ”¶åˆ° InputEvent åï¼ŒæŸ¥æ‰¾å¹¶æ‰§è¡Œ start_action</li>\n<li>start_action å‘é€ ChatRequestEvent</li>\n<li>æŸ¥æ‰¾å¹¶æ‰§è¡Œå¤„ç† ChatRequestEvent çš„å†…ç½®åŠ¨ä½œï¼ˆå¦‚ CHAT_MODEL_ACTIONï¼‰</li>\n<li>PythonActionTask æ‰§è¡Œå·¥å…·å‡½æ•°ï¼Œè‹¥ä¸ºç”Ÿæˆå™¨åˆ™åˆ›å»º PythonGeneratorActionTask æŒç»­æ‰§è¡Œï¼›</li>\n<li>å·¥å…·æ‰§è¡Œå®Œæˆç”Ÿæˆ ChatResponseEvent</li>\n<li>æŸ¥æ‰¾å¹¶æ‰§è¡Œ stop_action</li>\n<li>stop_action äº§ç”Ÿ OutputEvent å¹¶å‘é€åˆ°ä¸‹æ¸¸</li>\n</ul>\n</li>\n</ul>\n<p>è¿™ç§è®¾è®¡å®ç°äº†å…³æ³¨ç‚¹åˆ†ç¦»ï¼šç”¨æˆ·åªéœ€å…³æ³¨ä¸šåŠ¡é€»è¾‘å®šä¹‰ï¼Œæ¡†æ¶è´Ÿè´£å°†å…¶ç¼–è¯‘ä¸ºé«˜æ•ˆçš„è¿è¡Œæ—¶æ‰§è¡Œè®¡åˆ’ã€‚</p>\n<h2 id=\"0x02-ä¸åŸç”Ÿflinkæ¯”å¯¹\">0x02 ä¸åŸç”ŸFlinkæ¯”å¯¹</h2>\n<p>Flink Agents æ˜¯åŸç”Ÿ Flink çš„ â€œé¢†åŸŸå°è£…â€ï¼šæ‰€æœ‰ç»„ä»¶éƒ½èƒ½æ˜ å°„åˆ°åŸç”Ÿ Flink æ ¸å¿ƒç»„ä»¶ï¼Œæœªè„±ç¦» Flink æµå¤„ç†çš„æ ¸å¿ƒæ¶æ„ã€‚æˆ‘ä»¬æ¥ä¸‹æ¥çœ‹çœ‹ Flink Agents é‡Œçš„ Agentã€AgentPlanã€ActionExecutionOperatorã€ActionTask è¿™äº›æ ¸å¿ƒç»„ä»¶ï¼Œåˆ†åˆ«å¯¹åº”åŸç”Ÿ Flink ä¸­çš„å“ªäº›æ ¸å¿ƒç»„ä»¶ï¼Œä»¥åŠå®ƒä»¬çš„ç›¸ä¼¼æ€§é€»è¾‘ã€‚</p>\n<h3 id=\"21-æ ¸å¿ƒ\">2.1 æ ¸å¿ƒ</h3>\n<p>æˆ‘ä»¬å…ˆç”¨ä¸€å¼ è¡¨æ¥æ¦‚æ‹¬æ¯”å¯¹å…³ç³»ã€‚</p>\n<table>\n<thead>\n<tr>\n<th>Flink Agents ç»„ä»¶</th>\n<th>åŸç”Ÿ Flink å¯¹åº”ç»„ä»¶</th>\n<th>æ ¸å¿ƒè§’è‰²</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Agent</td>\n<td>StreamGraph / ç”¨æˆ· DataStream ä»£ç </td>\n<td>é«˜å±‚ä¸šåŠ¡é€»è¾‘å£°æ˜ï¼ˆåšä»€ä¹ˆï¼‰</td>\n</tr>\n<tr>\n<td>AgentPlan</td>\n<td>JobGraph</td>\n<td>ç¼–è¯‘åçš„å¯æ‰§è¡Œè®¡åˆ’ï¼ˆæ€ä¹ˆæ‹†ï¼‰</td>\n</tr>\n<tr>\n<td>ActionExecutionOperator</td>\n<td>KeyedProcessOperator/StreamOperator</td>\n<td>è¿è¡Œæ—¶æ ¸å¿ƒæ‰§è¡Œç®—å­ï¼ˆæ ¸å¿ƒè½½ä½“ï¼‰</td>\n</tr>\n<tr>\n<td>ActionTask</td>\n<td>ç®—å­å†…å¤„ç†å•å…ƒ / AsyncFunction ä»»åŠ¡</td>\n<td>åŸå­æ‰§è¡Œä»»åŠ¡ï¼ˆæœ€å°æ‰§è¡Œå•å…ƒï¼‰</td>\n</tr>\n</tbody>\n</table>\n<p>æ ¸å¿ƒæ˜ å°„é€»è¾‘å¦‚ä¸‹ï¼šã€Œå£°æ˜å±‚ï¼ˆAgentï¼‰â†’ ç¼–è¯‘å±‚ï¼ˆAgentPlanï¼‰â†’ æ‰§è¡Œç®—å­ï¼ˆActionExecutionOperatorï¼‰â†’ åŸå­ä»»åŠ¡ï¼ˆActionTaskï¼‰ã€å¯¹åº”åŸç”Ÿ Flink çš„ã€ŒStreamGraph â†’ JobGraph â†’ StreamOperator â†’ ç®—å­å†…å¤„ç†å•å…ƒã€ï¼›</p>\n<p>å›åˆ° â€œåšä¸€é“èœâ€ ï¼Œæˆ‘ä»¬è¿›è¡Œåˆ†æ‹†å¯¹æ¯”ã€‚</p>\n<ul>\n<li>Agent = ä½ å†™çš„ â€œèœè°±é€»è¾‘â€ï¼ˆæ¯”å¦‚ â€œåšç•ªèŒ„ç‚’è›‹ï¼Œå…ˆç‚’è›‹å†ç‚’ç•ªèŒ„â€ï¼‰â†’ å¯¹åº” Flink StreamGraphï¼ˆçº¯é€»è¾‘ï¼‰ï¼›</li>\n<li>AgentPlan = é¤å…åå¨æŠŠèœè°±è½¬æ¢æˆçš„ â€œå¯æ‰§è¡Œå·¥å•â€ï¼ˆæ˜ç¡® â€œè°æ¥ç‚’ã€ç”¨å“ªä¸ªé”…ã€æ”¾å¤šå°‘ç›â€ï¼‰â†’ å¯¹åº”  Flink JobGraphï¼ˆå¯æ‰§è¡Œè®¡åˆ’ï¼‰ï¼›</li>\n<li>ActionExecutionOperator = æŒå‹ºå¨å¸ˆï¼ˆæ‰§è¡Œå·¥å•ï¼‰â†’ å¯¹åº” Flink  StreamOperatorï¼›</li>\n<li>ActionTask = å¨å¸ˆçš„ â€œå•ä¸ªç¿»ç‚’åŠ¨ä½œâ€â†’ å¯¹åº” Flink ç®—å­å†…çš„åŸå­å¤„ç†ä»»åŠ¡ï¼›</li>\n<li>Flink ExecutionGraph = å¨å¸ˆå®é™…ç«™åœ¨å“ªä¸ªç¶å°ã€ç”¨å“ªå¥—å¨å…· â†’ ç‰©ç†æ‰§è¡Œå±‚ï¼Œå’Œ AgentPlan æ— å…³ã€‚</li>\n</ul>\n<h3 id=\"22-å…·ä½“æ¯”å¯¹\">2.2 å…·ä½“æ¯”å¯¹</h3>\n<h4 id=\"221-agent\">2.2.1 Agent</h4>\n<ul>\n<li><strong>ç›¸ä¼¼ç»„ä»¶</strong>ï¼šFlink Job çš„ä¸šåŠ¡é€»è¾‘å®šä¹‰ï¼ˆå¦‚ DataStream ç®—å­é“¾ï¼‰ã€StreamGraphï¼ˆæµå¼ä½œä¸šçš„é€»è¾‘æ‹“æ‰‘ï¼‰</li>\n<li><strong>ç›¸ä¼¼æ€§æ ¸å¿ƒ</strong>ï¼šAgent æ˜¯ç”¨æˆ·å®šä¹‰çš„ â€œæ™ºèƒ½å®ä½“â€ï¼ˆåŒ…å«ä¸šåŠ¡é€»è¾‘ã€åŠ¨ä½œã€èµ„æºï¼‰ï¼Œæœ¬è´¨æ˜¯ä¸šåŠ¡å±‚é¢çš„ â€œä½œä¸šé€»è¾‘å£°æ˜â€ï¼›è¿™å’ŒåŸç”Ÿ Flink ä¸­ç”¨æˆ·ç¼–å†™çš„ DataStream ä»£ç ï¼ˆå®šä¹‰ â€œæ•°æ®æ€ä¹ˆå¤„ç†â€ï¼‰ã€StreamGraphï¼ˆæè¿°é€»è¾‘æ‹“æ‰‘ï¼‰çš„è§’è‰²å®Œå…¨ä¸€è‡´ â€”â€” éƒ½æ˜¯ â€œå‘Šè¯‰ç³»ç»Ÿè¦åšä»€ä¹ˆâ€ çš„é¡¶å±‚é€»è¾‘å®šä¹‰ï¼Œä¸æ¶‰åŠå…·ä½“æ‰§è¡Œã€‚</li>\n<li><strong>å·®å¼‚</strong>ï¼šAgent æ›´èšç„¦ â€œAgent è¡Œä¸º / å·¥å…·è°ƒç”¨â€ çš„è¯­ä¹‰ï¼Œè€ŒåŸç”Ÿ StreamGraph æ˜¯é€šç”¨çš„æ•°æ®æµæ‹“æ‰‘ã€‚</li>\n</ul>\n<h4 id=\"222-agentplan\">2.2.2 AgentPlan</h4>\n<ul>\n<li><strong>ç›¸ä¼¼ç»„ä»¶</strong>ï¼šFlink çš„ JobGraphï¼ˆStreamGraph ç¼–è¯‘åçš„å¯æ‰§è¡Œæ‹“æ‰‘ï¼‰</li>\n<li><strong>ç›¸ä¼¼æ€§æ ¸å¿ƒ</strong>ï¼šAgentPlan æ˜¯ Agent ç¼–è¯‘åçš„ â€œå¯æ‰§è¡Œè®¡åˆ’â€ï¼ˆæ˜ç¡®åŠ¨ä½œè§¦å‘è§„åˆ™ã€èµ„æºæ˜ å°„ï¼‰ï¼Œæœ¬è´¨æ˜¯å°†é«˜å±‚ä¸šåŠ¡é€»è¾‘è½¬æ¢ä¸ºç³»ç»Ÿå¯è¯†åˆ«çš„æ‰§è¡Œè®¡åˆ’ï¼›è¿™å’ŒåŸç”Ÿ Flink ä¸­ StreamGraph ç¼–è¯‘ä¸º JobGraph çš„è¿‡ç¨‹ä¸€è‡´ â€”â€”JobGraph æŠŠç”¨æˆ·çš„é€»è¾‘æ‹“æ‰‘è½¬æ¢ä¸ºåŒ…å«å¹¶è¡Œåº¦ã€ç®—å­é“¾ã€ä¸­é—´ç»“æœä¼ é€’çš„å¯æ‰§è¡Œæ‹“æ‰‘ï¼ŒAgentPlan åˆ™æŠŠ Agent çš„ â€œè¡Œä¸ºè§„åˆ™â€ è½¬æ¢ä¸ºç³»ç»Ÿå¯è°ƒåº¦çš„ â€œåŠ¨ä½œæ‰§è¡Œè§„åˆ™â€ã€‚</li>\n<li><strong>å…³é”®å…±æ€§</strong>ï¼šéƒ½æ˜¯ â€œç¼–è¯‘å±‚â€ äº§ç‰©ï¼Œè¿æ¥é«˜å±‚å®šä¹‰ä¸åº•å±‚æ‰§è¡Œã€‚</li>\n</ul>\n<h4 id=\"223-actionexecutionoperator\">2.2.3 ActionExecutionOperator</h4>\n<ul>\n<li>\n<p><strong>ç›¸ä¼¼ç»„ä»¶</strong>ï¼šFlink æ ¸å¿ƒçš„ StreamOperatorï¼ˆå¦‚ ProcessOperatorã€FlatMapOperatorï¼‰ã€KeyedProcessOperator</p>\n</li>\n<li>\n<p><strong>ç›¸ä¼¼æ€§æ ¸å¿ƒ</strong>ï¼šActionExecutionOperator æ˜¯ Flink é›†ç¾¤ä¸­æ‰§è¡Œ Agent é€»è¾‘çš„æ ¸å¿ƒç®—å­ï¼Œæœ¬è´¨æ˜¯è¿è¡Œæ—¶çš„æ ¸å¿ƒæ‰§è¡Œå•å…ƒï¼›è¿™å’ŒåŸç”Ÿ Flink çš„ StreamOperator å®Œå…¨å¯¹åº” â€”â€”StreamOperator æ˜¯å¤„ç†æ•°æ®æµçš„æ ¸å¿ƒè½½ä½“ï¼ˆå¦‚ ProcessOperator å¤„ç† KeyedStreamã€å®ç°çŠ¶æ€ç®¡ç†ï¼‰ï¼ŒActionExecutionOperator å°±æ˜¯é’ˆå¯¹ â€œAgent åŠ¨ä½œæ‰§è¡Œâ€ åœºæ™¯å®šåˆ¶çš„ StreamOperatorï¼š</p>\n<ul>\n<li>éƒ½è¿è¡Œåœ¨ TaskManager ä¸­ï¼Œå¤„ç†æµæ•°æ®ï¼ˆEventï¼‰ï¼›</li>\n<li>éƒ½æ”¯æŒé”®æ§çŠ¶æ€ï¼ˆKeyed Stateï¼‰ï¼ŒæŒ‰ key éš”ç¦»æ‰§è¡Œä¸Šä¸‹æ–‡ï¼›</li>\n<li>éƒ½ä¾èµ– Mailbox æœºåˆ¶è°ƒåº¦ä»»åŠ¡ï¼Œé¿å…é˜»å¡ï¼›</li>\n<li>éƒ½è´Ÿè´£çŠ¶æ€ç®¡ç†ã€äº‹ä»¶å¤„ç†ã€ç»“æœè¾“å‡ºã€‚</li>\n</ul>\n</li>\n<li>\n<p><strong>å…¸å‹å¯¹åº”</strong>ï¼šActionExecutionOperator æœ€æ¥è¿‘åŸç”Ÿçš„ <code>KeyedProcessOperator</code>ï¼ˆé”®æ§å¤„ç†ã€çŠ¶æ€ç®¡ç†ã€å¼‚æ­¥ä»»åŠ¡è°ƒåº¦ï¼‰ã€‚</p>\n</li>\n</ul>\n<h4 id=\"223-actiontask\">2.2.3 ActionTask</h4>\n<ul>\n<li>\n<p><strong>ç›¸ä¼¼ç»„ä»¶</strong>ï¼šFlink çš„ã€Œç®—å­å†…çš„å¤„ç†ä»»åŠ¡ã€ï¼ˆå¦‚ ProcessFunction ä¸­çš„å•ä¸ªå…ƒç´ å¤„ç†é€»è¾‘ï¼‰ã€Async I/O ä¸­çš„ <code>AsyncFunction</code> ä»»åŠ¡</p>\n</li>\n<li>\n<p><strong>ç›¸ä¼¼æ€§æ ¸å¿ƒ</strong>ï¼šActionTask æ˜¯ â€œæœ€å°æ‰§è¡Œå•å…ƒâ€ï¼ˆå¦‚å•ä¸ª Python/Java åŠ¨ä½œæ‰§è¡Œï¼‰ï¼Œæœ¬è´¨æ˜¯ç®—å­å†…çš„åŸå­å¤„ç†ä»»åŠ¡ï¼›è¿™å’ŒåŸç”Ÿ Flink ä¸­ï¼š</p>\n<ul>\n<li>ProcessOperator å¤„ç†å•ä¸ª StreamElementï¼ˆå¦‚ä¸€æ¡æ•°æ®ï¼‰çš„é€»è¾‘å•å…ƒï¼›</li>\n<li>Async I/O ä¸­ AsyncFunction å°è£…çš„å¼‚æ­¥ä»»åŠ¡ï¼ˆå¦‚å¼‚æ­¥æŸ¥è¯¢æ•°æ®åº“ï¼‰ï¼›</li>\n</ul>\n<p>è§’è‰²å®Œå…¨ä¸€è‡´ â€”â€” éƒ½æ˜¯ â€œç®—å­å†…çš„æœ€å°å¯æ‰§è¡Œä»»åŠ¡â€ï¼Œæ‰§è¡Œå®Œæˆåè¿”å›ç»“æœï¼Œæ”¯æŒå¼‚æ­¥ / åˆ†é˜¶æ®µæ‰§è¡Œã€‚</p>\n</li>\n<li>\n<p><strong>å…³é”®å…±æ€§</strong>ï¼š</p>\n<ul>\n<li>éƒ½æ˜¯ â€œåŸå­æ‰§è¡Œå•å…ƒâ€ï¼Œä¸å¯å†æ‹†åˆ†ï¼›</li>\n<li>æ”¯æŒå¼‚æ­¥æ‰§è¡Œï¼ˆå¦‚ PythonActionTask å¯¹åº” Async I/Oï¼‰ï¼›</li>\n<li>æ‰§è¡Œç»“æœå¯è§¦å‘åç»­ä»»åŠ¡ï¼ˆå¦‚ ActionTaskResult ç”Ÿæˆæ–°ä»»åŠ¡ï¼Œå¯¹åº” Async I/O å›è°ƒè§¦å‘åç»­å¤„ç†ï¼‰ã€‚</li>\n</ul>\n</li>\n<li>\n<p><strong>ç»†åˆ†å¯¹åº”</strong>ï¼š</p>\n<ul>\n<li>JavaActionTask â†’ åŸç”ŸåŒæ­¥å¤„ç†ä»»åŠ¡ï¼ˆå¦‚ ProcessFunction ä¸­çš„åŒæ­¥é€»è¾‘ï¼‰ï¼›</li>\n<li>PythonActionTask â†’ åŸç”Ÿ Async I/O ä»»åŠ¡ï¼ˆå¼‚æ­¥è°ƒç”¨å¤–éƒ¨æœåŠ¡ / è„šæœ¬ï¼‰ã€‚</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"0x03-å®ä¾‹æ‹†è§£\">0x03 å®ä¾‹æ‹†è§£</h2>\n<p>æˆ‘ä»¬æ¥è¿›ä¸€æ­¥è§£é‡Š Flink Agents è¿™å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µçš„å…³ç³»å’Œé…åˆã€‚ä¸ºäº†æ›´å¥½çš„è¯´æ˜ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ•´ä¸ªFlink Agentsç³»ç»Ÿä»â€åšä¸€é“èœâ€œæ‹“å±•åˆ°â€ä¸€ä¸ªæ™ºèƒ½é¤å…è‡ªåŠ¨åŒ–æœåŠ¡ç³»ç»Ÿâ€œã€‚åŒæ—¶ï¼Œç»“åˆå®ä¾‹ä¹Ÿæ·±å…¥ä¸‹æŠ€æœ¯ç»†èŠ‚ã€‚</p>\n<h3 id=\"31-ç¬¬ä¸€å±‚çº§agent--é¤å…èœå•å’Œè§„åˆ™æ‰‹å†Œblueprint\">3.1 ç¬¬ä¸€å±‚çº§ï¼šAgent â€“ é¤å…èœå•å’Œè§„åˆ™æ‰‹å†Œï¼ˆBlueprintï¼‰</h3>\n<p>Flink Agents ä¸­çš„ Agent æ˜¯ç”¨æˆ·å®šä¹‰çš„æ™ºèƒ½å®ä½“ï¼Œè´Ÿè´£åè°ƒå„ç§èµ„æºå’Œè¡Œä¸ºæ¥å®Œæˆç‰¹å®šçš„ä»»åŠ¡ã€‚æˆ‘ä»¬æŠŠ Agent æƒ³è±¡æˆé¤å…çš„èœå•å’Œè¿è¥æ‰‹å†Œï¼š</p>\n<ul>\n<li>\n<p>å®šä¹‰äº†é¤å…èƒ½æä¾›å“ªäº›èœå“å’ŒæœåŠ¡ï¼ˆåŠ¨ä½œï¼‰</p>\n</li>\n<li>\n<p>è§„å®šäº†éœ€è¦ç”¨åˆ°å“ªäº›è®¾å¤‡å’Œé£Ÿæï¼ˆèµ„æºï¼‰ï¼Œå¦‚åŒä¸ºæ–°å‘˜å·¥é…å¤‡å·¥å…·ç®±ï¼Œå¯¹åº”ç¨‹åºå‘˜å®é™…ç”¨åˆ°çš„ï¼Œå¯ä»¥æ˜¯ï¼š</p>\n<ul>\n<li>å„ç§ API æ¥å£ï¼ˆç›¸å½“äºå·¥å…·ï¼‰</li>\n<li>æ•°æ®åº“è®¿é—®æƒé™ï¼ˆç›¸å½“äºå‚è€ƒèµ„æ–™ï¼‰</li>\n<li>å†³ç­–é€»è¾‘ä»£ç ï¼ˆç›¸å½“äºåŸ¹è®­ææ–™ï¼‰</li>\n</ul>\n</li>\n<li>\n<p>é‡åˆ°ä»€ä¹ˆæƒ…å†µåº”è¯¥åšä»€ä¹ˆï¼ˆå¯¹åº”äº‹ä»¶ç›‘å¬ï¼‰</p>\n</li>\n<li>\n<p>æè¿°äº†é¡¾å®¢ç‚¹é¤åˆ°ä¸Šèœçš„å®Œæ•´æµç¨‹</p>\n<ul>\n<li>æœ‰ä¸€ä¸ª start_actionï¼ˆæ¥å¾…å‘˜ï¼‰è´Ÿè´£æ¥æ”¶é¡¾å®¢é—®é¢˜</li>\n<li>æœ‰ä¸€ä¸ª stop_actionï¼ˆæ”¶é“¶å‘˜ï¼‰è´Ÿè´£æœ€ç»ˆç»“è´¦è¾“å‡ºç»“æœ</li>\n</ul>\n</li>\n</ul>\n<p>è¿™äº›éƒ½è¢«å°è£…åœ¨ Agent å¯¹è±¡ä¸­ã€‚</p>\n<h3 id=\"32-ç¬¬äºŒå±‚çº§agentplan--é¤å…çš„è¯¦ç»†æ“ä½œæµç¨‹å›¾compiled-planè®¡åˆ’ç¼–è¯‘å±‚\">3.2 ç¬¬äºŒå±‚çº§ï¼šAgentPlan â€“ é¤å…çš„è¯¦ç»†æ“ä½œæµç¨‹å›¾ï¼ˆCompiled Plan,è®¡åˆ’ç¼–è¯‘å±‚ï¼‰</h3>\n<p>Flink Agentæ¡†æ¶ä¼šæŠŠç”¨æˆ·çš„ Agent è½¬æ¢ä¸ºä¸€ä¸ªæ›´é€šç”¨ã€æ›´é€‚åˆç³»ç»Ÿå¤„ç†çš„å½¢å¼ â€”â€” AgentPlanã€‚åœ¨æœ¬ä¾‹ä¸­ï¼ŒAgentPlan ç›¸å½“äºå°†é¤å…è¿è¥æ‰‹å†Œç¼–è¯‘æˆçš„è¯¦ç»†å·¥ä½œæµç¨‹å›¾ï¼ˆæŠ½è±¡åŒ–çš„å·¥ä½œè“å›¾ï¼‰ï¼š</p>\n<ul>\n<li>æŠŠèœå•ä¸Šçš„æ¯é“èœåˆ†è§£æˆå…·ä½“çš„æ­¥éª¤</li>\n<li>æ˜ç¡®æ¯ä¸ªå²—ä½ï¼ˆåŠ¨ä½œï¼‰åœ¨ä»€ä¹ˆæƒ…å†µä¸‹è¢«è§¦å‘ï¼Œå³é‡åˆ°å•¥äº‹ä»¶ï¼ˆEventï¼‰è¯¥å¹²å•¥æ´»ï¼ˆActionï¼‰</li>\n<li>å‡†å¤‡å¥½æ‰€æœ‰éœ€è¦çš„å·¥å…·å’Œææ–™æ¸…å•ï¼ˆResourceï¼‰</li>\n</ul>\n<p>å°±åƒé¤å…ç»ç†ä¼šåˆ¶å®šè¯¦ç»†çš„æ“ä½œæ‰‹å†Œï¼Œå‘Šè¯‰æœåŠ¡å‘˜ä»€ä¹ˆæ—¶å€™è¯¥åšä»€ä¹ˆäº‹ã€‚</p>\n<h4 id=\"ç»“æ„åŒ–è§£æ\">ç»“æ„åŒ–è§£æ</h4>\n<p>AgentPlan åŒ…å«å‡ ä¸ªå…³é”®éƒ¨åˆ†ï¼š</p>\n<p><strong>Actions æ˜ å°„è¡¨</strong></p>\n<ul>\n<li>æ˜ç¡®åˆ—å‡ºæ‰€æœ‰å¯ä»¥æ‰§è¡Œçš„åŠ¨ä½œåŠå…¶è§¦å‘æ¡ä»¶</li>\n<li>ä¾‹å¦‚ï¼šâ€œæ”¶åˆ°è®¢å•æŸ¥è¯¢è¯·æ±‚â€ â†’ â€œæ‰§è¡Œè®¢å•æŸ¥è¯¢åŠ¨ä½œâ€</li>\n</ul>\n<p><strong>èµ„æºæä¾›è€…ç›®å½•</strong></p>\n<ul>\n<li>è®°å½•æ‰€æœ‰å¯ç”¨èµ„æºçš„ä½ç½®å’Œè·å–æ–¹å¼</li>\n<li>ç±»ä¼¼äºå·¥å‚é‡Œå„ä¸ªä¾›åº”éƒ¨é—¨çš„è”ç³»æ–¹å¼æ¸…å•</li>\n</ul>\n<p><strong>é…ç½®å‚æ•°é›†</strong></p>\n<ul>\n<li>å­˜å‚¨è¿è¡Œæ‰€éœ€çš„å„é¡¹è®¾ç½®é€‰é¡¹</li>\n<li>åƒæ˜¯è®¾å¤‡æ“ä½œè§„ç¨‹å’ŒæŠ€æœ¯è§„èŒƒ</li>\n</ul>\n<h4 id=\"å¹³å°é€‚é…æ€§\">å¹³å°é€‚é…æ€§</h4>\n<p>é€šè¿‡è¿™ç§æŠ½è±¡åŒ–ï¼Œæ— è®ºåº•å±‚æ˜¯ Java è¿˜æ˜¯ Python å®ç°ï¼Œéƒ½å¯ä»¥ç»Ÿä¸€ç”¨åŒä¸€ä»½ AgentPlan æ¥è¿›è¡Œè°ƒåº¦ç®¡ç†ã€‚</p>\n<h3 id=\"33-ç¬¬ä¸‰å±‚çº§actionexecutionoperator--é¤å…çš„æ‰§è¡Œç®¡ç†å±‚runtime-executoræ‰§è¡Œå¼•æ“å±‚\">3.3 ç¬¬ä¸‰å±‚çº§ï¼šActionExecutionOperator â€“ é¤å…çš„æ‰§è¡Œç®¡ç†å±‚ï¼ˆRuntime Executorï¼Œæ‰§è¡Œå¼•æ“å±‚ï¼‰</h3>\n<p>åœ¨å¤§è§„æ¨¡ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä¸èƒ½åªé ä¸€ä¸ªç®¡å®¶å¹²æ´»ï¼Œè€Œæ˜¯éœ€è¦ä¸€æ¡è‡ªåŠ¨åŒ–æµæ°´çº¿ã€‚ActionExecutionOperator å°±åƒæ˜¯ä¸€æ¡æ™ºèƒ½åŒ–çš„å·¥å‚è£…é…çº¿ï¼Œå®ƒæŒ‰ç…§æ“ä½œæ‰‹å†Œï¼ˆAgentPlanï¼‰ç»„ç»‡å¤šä¸ªå·¥ä½œç«™æ¥ååŒå®Œæˆä»»åŠ¡ã€‚æˆ–è€…è¯´ï¼ŒActionExecutionOperator æ˜¯é¤å…çš„ç°åœºæ‰§è¡Œç®¡ç†å±‚ï¼Œæ˜¯æ•´ä¸ªç³»ç»Ÿçš„â€œå¤§è„‘ + ä¸­æ¢æ§åˆ¶å®¤â€ï¼š</p>\n<ul>\n<li>è´Ÿè´£æ¥å¾…è¿›åº—çš„é¡¾å®¢ï¼ˆæ¥æ”¶æ•°æ®ï¼‰</li>\n<li>æ ¹æ®æµç¨‹å›¾åˆ†é…ä»»åŠ¡ç»™ä¸åŒçš„å‘˜å·¥ï¼ˆæ‰§è¡ŒåŠ¨ä½œï¼‰</li>\n<li>åè°ƒå„ä¸ªå²—ä½ä¹‹é—´çš„å·¥ä½œï¼ˆç›‘æ§è¿›åº¦çŠ¶æ€ / ç®¡ç†çŠ¶æ€å’Œå†…å­˜ï¼‰</li>\n<li>ç¡®ä¿æœåŠ¡æµç¨‹é¡ºç•…ï¼ˆå¤„ç†å¹¶å‘å’Œå®¹é”™ï¼‰</li>\n<li>é¤å…ç»ç†æ‹¿ç€è¯¦ç»†æµç¨‹å›¾ï¼ŒæŒ‡æŒ¥å„ä¸ªå‘˜å·¥ååŒå·¥ä½œã€‚</li>\n</ul>\n<h3 id=\"34-ç¬¬å››å±‚çº§actiontask--å…·ä½“çš„æœåŠ¡æ­¥éª¤execution-unit\">3.4 ç¬¬å››å±‚çº§ï¼šActionTask â€“ å…·ä½“çš„æœåŠ¡æ­¥éª¤ï¼ˆExecution Unitï¼‰</h3>\n<p>ActionTask å°±åƒæ˜¯å‘˜å·¥æ‰§è¡Œçš„å…·ä½“æœåŠ¡æ­¥éª¤ï¼Œæ˜¯ç”Ÿäº§çº¿ä¸Šçš„æœ€å°å·¥ä½ï¼šä¸€æ¬¡åªå¹²ä¸€ä»¶å…·ä½“æ´»ï¼ˆè°ƒç”¨ Python å‡½æ•°ã€æŸ¥æ•°æ®åº“ã€å‘ HTTPã€å†™ Kafka â€¦ï¼‰ï¼š</p>\n<ul>\n<li>æ¯ä¸ªæœåŠ¡å‘˜æ¥åˆ°çš„ä»»åŠ¡å°±æ˜¯ä¸€ä¸ª ActionTask</li>\n<li>å¯èƒ½æ˜¯ç®€å•ä¸€æ­¥å®Œæˆï¼ˆæ™®é€šæœåŠ¡å‘˜ï¼‰</li>\n<li>å¯èƒ½æ˜¯éœ€è¦å¤šæ­¥å®Œæˆï¼ˆéœ€è¦å›è®¿çš„æŠ€æœ¯å‘˜ï¼‰ï¼Œå³å¦‚æœæ´»å¤ªå¤šï¼ˆå¼‚æ­¥ã€é•¿è€—æ—¶ï¼‰ï¼ŒæœåŠ¡å‘˜ä¼šæŠŠè‡ªå·±ã€Œåˆ‡åˆ†ã€æˆæ–°ä»»åŠ¡ï¼Œç­‰ä¸‹æ¬¡è½®è¯¢å†æ¥ç€å¹²ï¼Œå®ç°éé˜»å¡çš„åä½œå¼è°ƒåº¦ã€‚</li>\n<li>å®ŒæˆåæŠ¥å‘Šç»“æœï¼Œå¹¶å¯èƒ½è§¦å‘ä¸‹ä¸€æ­¥å·¥ä½œï¼Œå³å¹²å®Œå°±èƒ½ç«‹å³æŠŠç»“æœï¼ˆEventï¼‰æ‰”å›ä¼ é€å¸¦ï¼Œç»§ç»­ä¸‹ä¸€è½®</li>\n</ul>\n<h3 id=\"35-å·¥ä½œæµç¨‹ä¸¾ä¾‹\">3.5 å·¥ä½œæµç¨‹ä¸¾ä¾‹</h3>\n<p>å‡è®¾é¡¾å®¢æ¥åˆ°é¤å…ç‚¹äº†ä¸€ä»½å¤æ‚çš„å¥—é¤ï¼š</p>\n<ul>\n<li>é¡¾å®¢è¿›åº—ï¼ˆInputEventï¼‰\n<ul>\n<li>é¤å…ç»ç†ï¼ˆActionExecutionOperatorï¼‰æ¥å¾…é¡¾å®¢</li>\n<li>æ ¹æ®æµç¨‹å›¾çŸ¥é“åº”è¯¥è®©æ¥å¾…å‘˜ï¼ˆstart_actionï¼‰å¤„ç†</li>\n</ul>\n</li>\n<li>æ¥å¾…å‘˜å¤„ç†ï¼ˆActionTaskï¼‰\n<ul>\n<li>æ¥å¾…å‘˜ï¼ˆPythonActionTaskï¼‰æ¥åˆ°ä»»åŠ¡</li>\n<li>ç†è§£é¡¾å®¢éœ€æ±‚ï¼Œç”Ÿæˆå¨æˆ¿è®¢å•ï¼ˆChatRequestEventï¼‰</li>\n</ul>\n</li>\n<li>å¨æˆ¿åˆ¶ä½œï¼ˆå†…ç½®åŠ¨ä½œï¼‰\n<ul>\n<li>å¨å¸ˆï¼ˆCHAT_MODEL_ACTIONï¼‰æ”¶åˆ°è®¢å•å¼€å§‹åˆ¶ä½œ</li>\n<li>åˆ¶ä½œå®Œæˆåé€šçŸ¥æœåŠ¡å‘˜ï¼ˆChatResponseEventï¼‰</li>\n</ul>\n</li>\n<li>æ”¶é“¶ç»“è´¦ï¼ˆActionTaskï¼‰\n<ul>\n<li>æ”¶é“¶å‘˜ï¼ˆstop_actionï¼‰å¤„ç†æœ€ç»ˆç»“æœ</li>\n<li>é¡¾å®¢æ‰“åŒ…å¸¦èµ°ï¼ˆOutputEventï¼‰</li>\n</ul>\n</li>\n</ul>\n<p>ã€Œç”¨æˆ·åªç®¡æŠŠç®¡å®¶è®­å¥½ï¼Œæ¡†æ¶è´Ÿè´£æŠŠç®¡å®¶å˜æˆæ‰‹å†Œï¼Œå†æŠŠæ‰‹å†Œå˜æˆå¹¶è¡Œç”Ÿäº§çº¿ï¼Œæœ€åè®©æ— æ•°workeræŒ‰ key éš”ç¦»ã€äº‹ä»¶é©±åŠ¨ã€å¯æ£€æŸ¥ç‚¹çš„æ–¹å¼è·‘åœ¨ Flink ä¸Šã€‚ã€ã€‚</p>\n<h2 id=\"0x04-å¹¶å‘æ€§å’Œå¹¶è¡Œæ€§\">0x04 å¹¶å‘æ€§å’Œå¹¶è¡Œæ€§</h2>\n<p>Flink Agents ç³»ç»Ÿåœ¨è®¾è®¡æ—¶å·²ç»å……åˆ†è€ƒè™‘äº†å¹¶å‘æ€§å’Œå¹¶è¡Œæ€§ï¼Œæ¯”å¦‚ï¼š</p>\n<ul>\n<li><strong>äº‹ä»¶é©±åŠ¨æ¨¡å‹</strong>ï¼šåŸºäºäº‹ä»¶æµè½¬è§¦å‘åŠ¨ä½œï¼Œåˆå§‹ä¸º InputEventï¼Œç»å¤šè½®äº‹ä»¶ï¼ˆå¦‚ ChatRequestEventã€ChatResponseEventï¼‰è§¦å‘ï¼Œæœ€ç»ˆè¾“å‡º OutputEventã€‚</li>\n<li><strong>å¹¶å‘ä¸éš”ç¦»è®¾è®¡</strong>ï¼šåˆ©ç”¨ Flink é”®æ§æµï¼ˆKeyedStreamï¼‰å®ç°æŒ‰ key åˆ†åŒºï¼Œæ¯ä¸ª key æ‹¥æœ‰ç‹¬ç«‹çŠ¶æ€ï¼›é€šè¿‡é‚®ç®±çº¿ç¨‹æ¨¡å‹ï¼ˆMailboxExecutorï¼‰å®ç°åä½œå¼å¤šä»»åŠ¡ï¼Œé¿å…é˜»å¡ã€‚</li>\n<li><strong>ä»»åŠ¡åˆ‡åˆ†æœºåˆ¶</strong>ï¼šé•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ï¼ˆå¦‚ Python ç”Ÿæˆå™¨ï¼‰ä¼šè¢«åˆ‡åˆ†ä¸ºå¤šä¸ª ActionTaskï¼Œæ‰§è¡Œåé€šè¿‡ ActionTaskResult ä¼ é€’ä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œç¡®ä¿å¹¶å‘æ•ˆç‡ã€‚</li>\n<li><strong>æœ¬åœ°ä¸è¿œç¨‹æ‰§è¡Œ</strong>ï¼šæœ¬åœ°ç”¨ LocalRunner æ¨¡æ‹Ÿæ‰§è¡Œï¼Œè¿œç¨‹åŸºäº Flink é›†ç¾¤çš„ ActionExecutionOperator åˆ†å¸ƒå¼æ‰§è¡Œï¼Œä¿æŒ API ä¸€è‡´æ€§ã€‚</li>\n</ul>\n<p>ä»¥ä¸‹æ˜¯å…·ä½“å®ç°æ–¹å¼ï¼š</p>\n<h3 id=\"41-flinkåŸç”Ÿå¹¶å‘æ¨¡å‹\">4.1 FlinkåŸç”Ÿå¹¶å‘æ¨¡å‹</h3>\n<p>ç³»ç»Ÿå……åˆ†åˆ©ç”¨äº†Apache Flinkçš„åŸç”Ÿå¹¶å‘æœºåˆ¶ï¼š</p>\n<ul>\n<li>é”®æ§æµï¼ˆKeyed Streamsï¼‰ï¼šä½¿ç”¨Flinkçš„KeyedStreamæŒ‰keyå¯¹æ•°æ®è¿›è¡Œåˆ†åŒºï¼Œç¡®ä¿ç›¸åŒkeyçš„äº‹ä»¶ç”±åŒä¸€ä¸ªå¹¶è¡Œå®ä¾‹å¤„ç†</li>\n<li>å¹¶è¡Œæ“ä½œç¬¦ï¼šActionExecutionOperatorå¯ä»¥åœ¨Flinké›†ç¾¤ä¸­çš„å¤šä¸ªå®ä¾‹ä¸Šå¹¶è¡Œè¿è¡Œ</li>\n</ul>\n<pre><code class=\"language-java\">// åœ¨CompileUtils.javaä¸­ - å°†ä»£ç†è¿æ¥åˆ°é”®æ§æµ\npublic static &lt;IN, K&gt; DataStream&lt;Object&gt; connectToAgent(\n    DataStream&lt;IN&gt; inputStream, KeySelector&lt;IN, K&gt; keySelector, AgentPlan agentPlan) {\n    return connectToAgent(inputStream.keyBy(keySelector), agentPlan);\n}\n</code></pre>\n<p>åœ¨ RemoteExecutionEnvironment ä¸­æœ‰ï¼š</p>\n<pre><code class=\"language-java\">@Override\npublic DataStream&lt;Object&gt; toDataStream() {\n    if (agentPlan == null) {\n        throw new IllegalStateException(\"Must apply agent before calling toDataStream\");\n    }\n\n    if (outputDataStream == null) {\n        if (keySelector != null) {\n            outputDataStream =\n                    CompileUtils.connectToAgent(inputDataStream, keySelector, agentPlan);\n        } else {\n            // If no key selector provided, use a simple pass-through key selector\n            outputDataStream =\n                    CompileUtils.connectToAgent(inputDataStream, x -&gt; x, agentPlan);\n        }\n    }\n\n    return outputDataStream;\n}\n</code></pre>\n<h3 id=\"42-æ¯ä¸ªkeyçš„çŠ¶æ€ç®¡ç†\">4.2 æ¯ä¸ªKeyçš„çŠ¶æ€ç®¡ç†</h3>\n<p>æ¯ä¸ªkeyéƒ½ç»´æŠ¤ç‹¬ç«‹çš„çŠ¶æ€éš”ç¦»ï¼š</p>\n<pre><code class=\"language-java\">// åœ¨ActionExecutionOperator.javaä¸­ - ç»´æŠ¤æ¯ä¸ªkeyçš„çŠ¶æ€\nprivate transient ListState&lt;ActionTask&gt; actionTasksKState;\nprivate transient ListState&lt;Event&gt; pendingInputEventsKState;\nprivate transient ValueState&lt;Long&gt; sequenceNumberKState;\n</code></pre>\n<p>è¿™äº›éƒ½æ˜¯é”®æ§çŠ¶æ€ï¼ˆkeyed stateï¼‰ï¼Œæ„å‘³ç€æ¯ä¸ªkeyéƒ½æœ‰è‡ªå·±çš„ç‹¬ç«‹çŠ¶æ€å®ä¾‹ï¼Œé˜²æ­¢ä¸åŒkeyä¹‹é—´çš„ç«äº‰æ¡ä»¶ã€‚</p>\n<h3 id=\"43-é‚®ç®±çº¿ç¨‹æ¨¡å‹\">4.3 é‚®ç®±çº¿ç¨‹æ¨¡å‹</h3>\n<p>ç³»ç»Ÿä½¿ç”¨Flinkçš„é‚®ç®±çº¿ç¨‹æ¨¡å‹å®ç°åä½œå¼å¤šä»»åŠ¡å¤„ç†ï¼š</p>\n<pre><code class=\"language-java\">// åœ¨ActionExecutionOperator.javaä¸­\nprivate final transient MailboxExecutor mailboxExecutor;\n\n// æäº¤ä»»åŠ¡è¿›è¡Œå¤„ç†\nmailboxExecutor.submit(() -&gt; tryProcessActionTaskForKey(key), \"process action task\");\n</code></pre>\n<p>è¿™å…è®¸é•¿æ—¶é—´è¿è¡Œçš„æ“ä½œè®©å‡ºæ§åˆ¶æƒï¼Œé˜²æ­¢é˜»å¡æ•´ä¸ªæ“ä½œç¬¦ã€‚</p>\n<h3 id=\"44-å¼‚æ­¥ä»»åŠ¡å¤„ç†\">4.4 å¼‚æ­¥ä»»åŠ¡å¤„ç†</h3>\n<p>æ”¯æŒå¼‚æ­¥æ‰§è¡Œå¹¶å…·å¤‡é€‚å½“çš„çŠ¶æ€ç®¡ç†ï¼š</p>\n<pre><code class=\"language-java\">// åœ¨ ActionTask.java ä¸­ - æ”¯æŒåŸºäºå»¶ç»­çš„æ‰§è¡Œ\npublic class ActionTaskResult {\n    private final boolean finished;\n    private final List&lt;Event&gt; outputEvents;\n    private final Optional&lt;ActionTask&gt; generatedActionTaskOpt;\n\n    // å…è®¸ä¸€ä¸ªåŠ¨ä½œç”Ÿæˆå»¶ç»­ä»»åŠ¡\n    public Optional&lt;ActionTask&gt; getGeneratedActionTask() {\n        return generatedActionTaskOpt;\n    }\n}\n</code></pre>\n<h3 id=\"45-å†…å­˜ä¸€è‡´æ€§\">4.5 å†…å­˜ä¸€è‡´æ€§</h3>\n<p>å…·æœ‰ç¼“å­˜çŠ¶æ€è®¿é—®çš„çº¿ç¨‹å®‰å…¨å†…å­˜ç®¡ç†ï¼š</p>\n<pre><code class=\"language-java\">// åœ¨ ActionExecutionOperator.java ä¸­\nprivate void createAndSetRunnerContext(ActionTask actionTask) {\n    // æ­£ç¡®ç®¡ç† RunnerContext çš„åˆ›å»ºå’Œé‡ç”¨\n    if (actionTask.getRunnerContext() != null) {\n        return;\n    }\n    // ... åˆ›å»ºé€‚å½“çš„ context\n}\n</code></pre>\n<h3 id=\"46-æ°´å°å’Œäº‹ä»¶æ—¶é—´å¤„ç†\">4.6 æ°´å°å’Œäº‹ä»¶æ—¶é—´å¤„ç†</h3>\n<p>å…·å¤‡å¹¶å‘æ„è¯†çš„æ°´å°å¤„ç†ï¼š</p>\n<pre><code class=\"language-java\">    private transient SegmentedQueue keySegmentQueue;\n    \n    keySegmentQueue = new SegmentedQueue();\n\n    @Override\n    public void processWatermark(Watermark mark) throws Exception {\n        keySegmentQueue.addWatermark(mark);\n        processEligibleWatermarks();\n    }\n</code></pre>\n<h3 id=\"47-æ£€æŸ¥ç‚¹å’Œæ¢å¤\">4.7 æ£€æŸ¥ç‚¹å’Œæ¢å¤</h3>\n<p>ç”¨äºå®¹é”™çš„çº¿ç¨‹å®‰å…¨çŠ¶æ€å¿«ç…§</p>\n<pre><code class=\"language-java\">    @Override\n    public void snapshotState(StateSnapshotContext context) throws Exception {\n        if (actionStateStore != null) {\n            Object recoveryMarker = actionStateStore.getRecoveryMarker();\n            if (recoveryMarker != null) {\n                recoveryMarkerOpState.update(List.of(recoveryMarker));\n            }\n        }\n\n        HashMap&lt;Object, Long&gt; keyToSeqNum = new HashMap&lt;&gt;();\n        getKeyedStateBackend()\n                .applyToAllKeys(\n                        VoidNamespace.INSTANCE,\n                        VoidNamespaceSerializer.INSTANCE,\n                        new ValueStateDescriptor&lt;&gt;(MESSAGE_SEQUENCE_NUMBER_STATE_NAME, Long.class),\n                        (key, state) -&gt; keyToSeqNum.put(key, state.value()));\n        checkpointIdToSeqNums.put(context.getCheckpointId(), keyToSeqNum);\n\n        super.snapshotState(context);\n    }\n</code></pre>\n<h3 id=\"48-æ€»ç»“\">4.8 æ€»ç»“</h3>\n<p>è®¾è®¡é‡‡ç”¨äº†å¤šç§å¹¶å‘æœºåˆ¶ï¼š</p>\n<ul>\n<li>Flinkå¹¶è¡Œå¤„ç†ï¼šåˆ©ç”¨FlinkåŸç”Ÿçš„å¹¶è¡Œæ€§å’Œé”®æ§æµ</li>\n<li>æ¯ä¸ªKeyçš„éš”ç¦»ï¼šæ¯ä¸ªkeyç»´æŠ¤ç‹¬ç«‹çŠ¶æ€ï¼Œæ¶ˆé™¤keyä¹‹é—´çš„ç«äº‰</li>\n<li>åä½œå¼çº¿ç¨‹ï¼šä½¿ç”¨é‚®ç®±æ‰§è¡Œå™¨å®ç°éé˜»å¡æ‰§è¡Œ</li>\n<li>å¼‚æ­¥å»¶ç»­ï¼šé€šè¿‡ä»»åŠ¡é“¾æ”¯æŒé•¿æ—¶é—´è¿è¡Œçš„æ“ä½œ</li>\n<li>çº¿ç¨‹å®‰å…¨çŠ¶æ€ç®¡ç†ï¼šå¯¹å…±äº«èµ„æºè¿›è¡Œé€‚å½“çš„åŒæ­¥</li>\n<li>å®¹é”™æœºåˆ¶ï¼šæ£€æŸ¥ç‚¹æœºåˆ¶ç¡®ä¿æ•…éšœæƒ…å†µä¸‹çš„æ•°æ®ä¸€è‡´æ€§</li>\n</ul>\n<p>è¿™ç§æ–¹æ³•ä½¿ç³»ç»Ÿèƒ½å¤Ÿåœ¨ä¿æŒä¸€è‡´æ€§å’Œæ”¯æŒæ°´å¹³æ‰©å±•çš„åŒæ—¶å¤„ç†é«˜ååé‡ï¼Œå¯åœ¨ Flink é›†ç¾¤çš„å¤šä¸ªèŠ‚ç‚¹é—´æ‰©å±•ã€‚</p>\n<h2 id=\"0xff-å‚è€ƒ\">0xFF å‚è€ƒ</h2>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2025-12-29 20:24</span>&nbsp;\n<a href=\"https://www.cnblogs.com/rossiXYZ\">ç½—è¥¿çš„æ€è€ƒ</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">21</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "Java å“ªäº›æƒ…å†µä¼šå¯¼è‡´å†…å­˜æ³„æ¼",
      "link": "https://www.cnblogs.com/yanshajiuzhou/p/19417793",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/yanshajiuzhou/p/19417793\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2025-12-29 19:29\">\n    <span>Java å“ªäº›æƒ…å†µä¼šå¯¼è‡´å†…å­˜æ³„æ¼</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                    <div id=\"cnblogs_post_description\" style=\"display: none;\">\n        \n        å†…å­˜æ³„æ¼ æ˜¯æŒ‡å¯¹è±¡ å·²ç»ä¸å†è¢«ç¨‹åºä½¿ç”¨ï¼Œä½†å› ä¸ºæŸäº›åŸå›  æ— æ³•è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ï¼Œé•¿æœŸå ç”¨å†…å­˜ï¼Œæœ€ç»ˆå¯èƒ½å¼•å‘&nbsp;OOMï¼ˆOutOfMemoryErrorï¼‰ã€‚\n    </div>\n<div class=\"blogpost-body blogpost-body-html\" id=\"cnblogs_post_body\">\n<p><span>â€‹</span>ä»Šå¤©æˆ‘ä»¬æ¥ä¸€èµ·èŠä¸€èŠæœ‰å“ªäº›æƒ…å†µä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚</p>\n<p>ä»€ä¹ˆæ˜¯ <strong>å†…å­˜æ³„æ¼</strong> å‘¢ï¼Ÿ</p>\n<p><strong>å†…å­˜æ³„æ¼</strong> æ˜¯æŒ‡å¯¹è±¡ <strong>å·²ç»ä¸å†è¢«ç¨‹åºä½¿ç”¨</strong>ï¼Œä½†å› ä¸ºæŸäº›åŸå›  <strong>æ— æ³•è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶</strong>ï¼Œé•¿æœŸå ç”¨å†…å­˜ï¼Œæœ€ç»ˆå¯èƒ½å¼•å‘&nbsp;<strong>OOM</strong>ï¼ˆOutOfMemoryErrorï¼‰ã€‚</p>\n<p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹å¸¸è§çš„å‡ ç±»å†…å­˜æ³„æ¼åœºæ™¯ã€‚</p>\n<p><strong>1ã€ç”Ÿå‘½å‘¨æœŸé•¿çš„é›†åˆ</strong></p>\n<p>å°†å¯¹è±¡æ”¾å…¥ <strong>é™æ€</strong> æˆ–&nbsp;<strong>ç”Ÿå‘½å‘¨æœŸå¾ˆé•¿&nbsp;</strong>çš„é›†åˆï¼ˆå¦‚ public <strong>static</strong> List&lt;Object&gt; list = new ArrayList&lt;&gt;();ï¼‰ï¼Œå³ä½¿åé¢ä¸å†éœ€è¦ï¼Œé›†åˆä»æŒæœ‰å…¶å¼•ç”¨ï¼Œå¯¼è‡´æ— æ³•<strong>GC</strong>ã€‚</p>\n<p><strong>2ã€æœªå…³é—­çš„èµ„æº</strong></p>\n<p>è¿æ¥ã€æµç­‰èµ„æºæœªè°ƒç”¨<strong> close() </strong>æ–¹æ³•å…³é—­ã€‚è¿™äº›èµ„æºä¸ä»…å ç”¨å†…å­˜ï¼Œè¿˜å¯èƒ½å ç”¨æ–‡ä»¶å¥æŸ„ï¼ˆæ“ä½œç³»ç»Ÿåˆ†é…çš„å”¯ä¸€æ ‡è¯†ï¼Œå‡­å®ƒï¼Œä½ æ‰èƒ½æ“ä½œæ–‡ä»¶èµ„æºï¼‰ã€ç½‘ç»œè¿æ¥ç­‰ç³»ç»Ÿèµ„æºã€‚æ¯”å¦‚&nbsp;æ•°æ®åº“è¿æ¥ã€æ–‡ä»¶æµï¼ˆFileInputStreamï¼‰ã€Socketè¿æ¥ ç­‰ã€‚</p>\n<pre class=\"language-java highlighter-hljs\"><code>public class FileTest {\n    public static void main(String[] args) {\n        FileInputStream fis = null;\n        try {\n            fis = new FileInputStream(\"test.txt\");\n            // è¯»å–æ–‡ä»¶ï¼Œæœªè°ƒç”¨ fis.close()\n        } catch (FileNotFoundException e) {\n            e.printStackTrace();\n        } finally {\n            // æœªè°ƒç”¨ fis.close() â†’ fis æŒæœ‰ Native å¼•ç”¨ï¼Œæ— æ³•å›æ”¶\n        }\n    }\n}</code></pre>\n<p><strong>3ã€ThreadLocal ä½¿ç”¨ä¸å½“</strong></p>\n<p>å°†å¯¹è±¡å­˜å…¥ <strong>ThreadLocal </strong>åï¼Œæœªåœ¨åç»­è°ƒç”¨ <strong>remove()</strong> æ¸…ç†ã€‚è‹¥çº¿ç¨‹æ¥è‡ªçº¿ç¨‹æ± ï¼ˆä¼šå¤ç”¨ï¼‰ï¼Œå…¶ ThreadLocalMap ä¸­çš„å€¼ä¼šä¸€ç›´å­˜æ´»ã€‚</p>\n<pre class=\"language-java highlighter-hljs\"><code>public class ThreadLocalTest {\n    private static ThreadLocal&lt;User&gt; userThreadLocal = new ThreadLocal&lt;&gt;();\n\n    public static void main(String[] args) {\n        // çº¿ç¨‹æ± ï¼ˆæ ¸å¿ƒçº¿ç¨‹é•¿æœŸå­˜æ´»ï¼‰\n        TThreadPoolExecutor executor = new ThreadPoolExecutor(\n                2,\n                4,\n                10,\n                TimeUnit.SECONDS,\n                new ArrayBlockingQueue&lt;&gt;(100),\n                new ThreadFactoryBuilder().setNameFormat(\"my-thread-pool-%d\").setDaemon(false).setPriority(Thread.NORM_PRIORITY).build(),\n                new ThreadPoolExecutor.AbortPolicy()\n        );\n\n        executor.submit(() -&gt; {\n            User user = new User(\"æå››\", 30);\n            userThreadLocal.set(user); // å­˜å‚¨åˆ° ThreadLocal\n\n            // ä¸šåŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œæœªè°ƒç”¨ remove()\n            // æ ¸å¿ƒçº¿ç¨‹ä¸ä¼šé”€æ¯ï¼ŒThreadLocal ä»æŒæœ‰ user å¼•ç”¨\n        });\n    }\n}</code></pre>\n<p>psï¼šæœªè¿›è¡Œ&nbsp;<strong>remove()</strong>ï¼Œè¿˜å¯èƒ½ä¼šå¯¼è‡´&nbsp;<strong>ThreadLocal </strong>å–å€¼ä¸²é—¨ã€‚</p>\n<p><strong>4ã€å†…éƒ¨ç±»ä¸å¤–éƒ¨ç±»å¼•ç”¨</strong></p>\n<p>éé™æ€å†…éƒ¨ç±»ï¼ˆæˆ–åŒ¿åç±»ï¼‰ä¼š&nbsp;<strong>éšå¼æŒæœ‰&nbsp;</strong>å¤–éƒ¨ç±»çš„å¼•ç”¨ã€‚å¦‚æœå†…éƒ¨ç±»å®ä¾‹ç”Ÿå‘½å‘¨æœŸæ›´é•¿ï¼ˆå¦‚è¢«ç¼“å­˜æˆ–å¦ä¸€ä¸ªçº¿ç¨‹å¼•ç”¨ï¼‰ï¼Œä¼šé˜»æ­¢å¤–éƒ¨ç±»è¢«å›æ”¶ã€‚</p>\n<pre class=\"language-java highlighter-hljs\"><code>public class OuterClass {\n    private byte[] bigData = new byte[1024 * 1024 * 10]; // 10MB å¤§å¯¹è±¡\n\n    // éé™æ€å†…éƒ¨ç±»\n    class InnerClass {\n        // å†…éƒ¨ç±»éšå¼æŒæœ‰ OuterClass å¼•ç”¨\n    }\n\n    public InnerClass createInner() {\n        return new InnerClass();\n    }\n\n    public static void main(String[] args) {\n        OuterClass outer = new OuterClass();\n        InnerClass inner = outer.createInner();\n\n        // ç½®ç©ºå¤–éƒ¨ç±»å¼•ç”¨ï¼Œä½† inner ä»æŒæœ‰ outer å¼•ç”¨\n        outer = null;\n\n        // è‹¥ inner è¢«é™æ€å˜é‡/çº¿ç¨‹é•¿æœŸæŒæœ‰ â†’ outer å¯¹è±¡ï¼ˆå« bigDataï¼‰æ— æ³•å›æ”¶\n    }\n}</code></pre>\n<p><strong>5ã€&nbsp;ç›‘å¬å™¨ä¸å›è°ƒ</strong></p>\n<p>æ³¨å†Œäº† <strong>ç›‘å¬å™¨&nbsp;</strong>æˆ– <strong>å›è°ƒ</strong> åï¼Œåœ¨å¯¹è±¡ä¸å†éœ€è¦æ—¶ <strong>æ²¡æœ‰æ³¨é”€</strong>ï¼Œå¯¼è‡´æºå¯¹è±¡ä»æŒæœ‰ç›‘å¬å™¨çš„å¼•ç”¨ï¼ˆæ¯”å¦‚ äº‹ä»¶ç›‘å¬å™¨ã€æ¶ˆæ¯é˜Ÿåˆ—çš„æ¶ˆè´¹è€…ç­‰ï¼‰ã€‚</p>\n<p><strong>æ’æŸ¥å·¥å…·æ¨è</strong></p>\n<ul>\n<li><strong>MATï¼ˆMemory Analyzer Toolï¼‰ï¼š</strong>åˆ†æå † Dump æ–‡ä»¶ï¼Œå®šä½æ³„æ¼å¯¹è±¡ã€å¼•ç”¨é“¾ï¼ˆè°åœ¨æŒæœ‰æ³„æ¼å¯¹è±¡ï¼‰ï¼›</li>\n<li><strong>VisualVMï¼š</strong>JDK è‡ªå¸¦å·¥å…·ï¼Œç›‘æ§å†…å­˜å ç”¨è¶‹åŠ¿ï¼Œç”Ÿæˆå † Dumpï¼Œç®€å•æ’æŸ¥æ³„æ¼ã€‚</li>\n</ul>\n<p>è¿™é‡Œæˆ‘åªåˆ—äº†å¸¸è§çš„å‡ ç§æƒ…å†µï¼Œæ¬¢è¿å¤§å®¶è¡¥å……å…¶ä»–å†…å­˜æ³„æ¼åœºæ™¯ã€‚</p>\n<p style=\"text-align: right;\"><span style=\"color: rgba(53, 152, 219, 1);\">äººé—´éå‡€åœŸï¼Œå„æœ‰åƒç§æ„ï¼Œä¸‡èˆ¬è‹¦ã€‚-- çƒŸæ²™ä¹æ´²</span></p>\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2025-12-29 19:29</span>&nbsp;\n<a href=\"https://www.cnblogs.com/yanshajiuzhou\">çƒŸæ²™ä¹æ´²</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">51</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "MAFå¿«é€Ÿå…¥é—¨ï¼ˆ9ï¼‰å¤šè·¯åˆ†æ”¯è·¯ç”±å·¥ä½œæµ",
      "link": "https://www.cnblogs.com/edisontalk/p/-/quick-start-on-maf-chatper09",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/edisontalk/p/-/quick-start-on-maf-chatper09\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2025-12-29 18:30\">\n    <span>MAFå¿«é€Ÿå…¥é—¨ï¼ˆ9ï¼‰å¤šè·¯åˆ†æ”¯è·¯ç”±å·¥ä½œæµ</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                    <div id=\"cnblogs_post_description\" style=\"display: none;\">\n        <img alt=\"MAFå¿«é€Ÿå…¥é—¨ï¼ˆ9ï¼‰å¤šè·¯åˆ†æ”¯è·¯ç”±å·¥ä½œæµ\" class=\"desc_img\" src=\"https://img2024.cnblogs.com/blog/381412/202512/381412-20251224203108188-1569801702.png\" />\n        ä¸Šä¸€ç¯‡ï¼Œæˆ‘ä»¬å­¦ä¹ äº†MAFä¸­å¦‚ä½•è¿›è¡Œif-elseç±»å‹çš„æ¡ä»¶è·¯ç”±ï¼Œä½†æ˜¯å®é™…å·¥ä½œä¸­å¯èƒ½ä¼šæ‘ä¸­å¤šä¸ªåˆ†æ”¯è·¯ç”±çš„åœºæ™¯ã€‚åœ¨å®é™…ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œå¾ˆå¤šçš„ä¸šåŠ¡é€»è¾‘æ¶‰åŠåˆ°ä¸æ­¢ä¸¤ä¸ªåˆ¤æ–­æ¡ä»¶ï¼Œè€Œæ˜¯å¤šä¸ªã€‚åœ¨MAFä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Switch-Case æ¥å®ç°è¿™ç§å·¥ä½œæµå†…éƒ¨å¤šç±»å†³ç­–æ¡ä»¶çš„ å·¥ä½œæµéœ€æ±‚ã€‚\n    </div>\n<div class=\"blogpost-body blogpost-body-html\" id=\"cnblogs_post_body\">\n<p><span><span>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯Edisonã€‚</span></span></p>\n<p><span><span>æœ€è¿‘æˆ‘ä¸€ç›´åœ¨è·Ÿç€åœ£æ°çš„ã€Š<a class=\"normal_text_link mp_article_text_link\" href=\"https://www.cnblogs.com/sheng-jie/p/19200934\" target=\"_blank\"><span>.NET+AIæ™ºèƒ½ä½“å¼€å‘è¿›é˜¶</span></a><span>ã€‹è¯¾ç¨‹å­¦ä¹ MAFçš„å¼€å‘æŠ€å·§ï¼Œæˆ‘å¼ºçƒˆæ¨èä½ ä¹Ÿä¸Šè½¦è·Ÿæˆ‘ä¸€èµ·å‡ºå‘ï¼</span></span></span></p>\n<p><span><a class=\"normal_text_link mp_article_text_link\" href=\"https://www.cnblogs.com/edisontalk/p/-/quick-start-on-maf-chatper08\" target=\"_blank\"><span>ä¸Šä¸€ç¯‡</span></a><span>ï¼Œæˆ‘ä»¬å­¦ä¹ äº†MAFä¸­å¦‚ä½•è¿›è¡Œif-elseç±»å‹çš„æ¡ä»¶è·¯ç”±<span>ï¼Œä½†æ˜¯å®é™…å·¥ä½œä¸­å¯èƒ½ä¼šå­˜åœ¨å¤šä¸ªåˆ†æ”¯è·¯ç”±çš„åœºæ™¯ã€‚æœ¬ç¯‡ï¼Œæˆ‘ä»¬æ¥äº†è§£ä¸‹MAFä¸­çš„switch-caseè·¯ç”±å®ç°å¤šåˆ†æ”¯è·¯ç”±å·¥ä½œæµã€‚</span></span></span></p>\n<h1><strong>Why switch-case?</strong></h1>\n<p><span><span><span><span><span><span>åœ¨å®é™…ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œå¾ˆå¤šçš„ä¸šåŠ¡é€»è¾‘æ¶‰åŠåˆ°ä¸æ­¢ä¸¤ä¸ªåˆ¤æ–­æ¡ä»¶ï¼Œè€Œæ˜¯å¤šä¸ª<span>ã€‚</span></span></span></span></span></span></span></p>\n<p><span><span><span><span><span><span><span>ä¾‹å¦‚ï¼Œåœ¨ä¸Šä¸€ç¯‡çš„ä¼ä¸šå†…éƒ¨é‚®ä»¶æ£€æµ‹æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬çš„æ£€æµ‹ç»“æœåªæœ‰ä¸¤ä¸ªï¼ˆåƒåœ¾é‚®ä»¶ æˆ– æ­£å¸¸é‚®ä»¶ï¼‰ï¼Œä½†å¦‚æœæˆ‘ä»¬æƒ³å¢åŠ ä¸€ä¸ªç»“æœï¼ˆä¸ç¡®å®šï¼‰å°±æ— æ³•é€‚ç”¨äº†ã€‚</span></span></span></span></span></span></span></p>\n<p><span><span><span><span><span><span><span>åœ¨MAFä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Switch-Case æ¥å®ç°è¿™ç§å·¥ä½œæµå†…éƒ¨å¤šç±»å†³ç­–æ¡ä»¶çš„ å·¥ä½œæµéœ€æ±‚<span>ã€‚</span></span></span></span></span></span></span></span></p>\n<h1><strong>å®éªŒæ¡ˆä¾‹</strong></h1>\n<p><span><span><span><span><span><span><span><span>ä»Šå¤©æ¥æ™šä¸Šä¸Šä¸€ç¯‡è¿™ä¸ªä¼ä¸šå†…éƒ¨é‚®ä»¶æ£€æµ‹çš„å·¥ä½œæµæ¡ˆä¾‹ï¼Œä¸Šä¸€ç¯‡çš„æµç¨‹æ˜¯è¿™æ ·çš„ï¼š</span></span></span></span></span></span></span></span></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/381412/202512/381412-20251224202006911-1817307092.png\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></p>\n<p><span><span><span><span><span><span><span><span><span><span>ä»Šå¤©å‡è®¾æˆ‘ä»¬éœ€è¦æœ‰æ›´ä¸ºç²¾ç»†çš„åˆ†ç±»ï¼š</span></span></span></span></span></span></span></span></span></span></p>\n<p><span><span>&nbsp; âœ…&nbsp;<span><span>**æ­£å¸¸é‚®ä»¶**<span><span>ï¼ˆNotSpamï¼‰ï¼šå®¢æˆ·å’¨è¯¢ã€ä¸šåŠ¡å¾€æ¥</span></span></span></span></span></span></p>\n<p><span><span>&nbsp; âŒ&nbsp;<span><span>**åƒåœ¾é‚®ä»¶**<span><span>ï¼ˆSpamï¼‰ï¼šæ˜æ˜¾çš„è¯ˆéª—ã€å¹¿å‘Š</span></span></span></span></span></span></p>\n<p><span><span>&nbsp;&nbsp;<span><span>âš ï¸&nbsp;<span><span>**ä¸ç¡®å®šé‚®ä»¶**<span><span>ï¼ˆUncertainï¼‰ï¼šå¯èƒ½æ˜¯é’“é±¼é‚®ä»¶ï¼Œéœ€è¦äººå·¥å®¡æ ¸</span></span></span></span></span></span></span></span></p>\n<p><span><span><span><span><span><span><span><span><span><span>é‚£ä¹ˆè¿™å°±æ˜¯ä¸€ä¸ªä¸‰å…ƒåˆ†ç±»çš„ï¼Œåœ¨ä¸šåŠ¡å¼€å‘ä¸­æˆ‘ä»¬é€šå¸¸ä¼šç”¨åˆ°switch-caseè¯­æ³•ï¼Œè€Œåœ¨MAFå·¥ä½œæµä¸­ï¼Œä¹Ÿä¸ºæˆ‘ä»¬å®šä¹‰äº†è¿™ç§switch-caseæ¥å£ã€‚</span></span></span></span></span></span></span></span></span></span></p>\n<p><span><span><span><span><span><span><span><span><span><span>åœ¨ä¸‹é¢çš„ä»£ç ç¤ºä¾‹ä¸­ï¼Œæ¯”å¯¹äº†ä¸¤ç§æ¥å£çš„ä½¿ç”¨æ–¹å¼ï¼š</span></span></span></span></span></span></span></span></span></span></p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> Conditional Edge</span>\n<span style=\"color: rgba(0, 0, 0, 1);\">builder\n    .AddEdge(source, target1, condition: c </span>=&gt; c.IsSpam == <span style=\"color: rgba(0, 0, 255, 1);\">false</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    .AddEdge(source, target2, condition: c </span>=&gt; c.IsSpam == <span style=\"color: rgba(0, 0, 255, 1);\">true</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> Switch-Case</span>\nbuilder.AddSwitch(source, sb =&gt;<span style=\"color: rgba(0, 0, 0, 1);\"> sb\n    .AddCase(c </span>=&gt; c.Decision ==<span style=\"color: rgba(0, 0, 0, 1);\"> NotSpam, target1)\n    .AddCase(c </span>=&gt; c.Decision ==<span style=\"color: rgba(0, 0, 0, 1);\"> Spam, target2)\n    .WithDefault(target3)\n);</span></pre>\n</div>\n<p><span><span><span><span><span><span><span><span><span><span><span><span>å¯ä»¥çœ‹åˆ°ï¼Œswitch-caseæ¨¡å¼å…¶ä»·å€¼ä¸»è¦åœ¨äºå¢å¼ºä»£ç å¯ç»´æŠ¤æ€§ï¼Œå¯¹äºåç»­å¦‚æœæœ‰æ–°å¢åˆ†ç±»ï¼Œåªéœ€è¦æ·»åŠ ä¸€ä¸ªAddCaseæ¥å£æ–¹æ³•å®ç°æ–°å¢åˆ†ç±»çš„å¤„ç†ï¼ŒåŒæ—¶åŸºäºWithDefaultæ¥å£æ–¹æ³•å®ç°å…œåº•ç¡®ä¿æ‰€æœ‰æƒ…å†µéƒ½æœ‰å¤„ç†ã€‚</span></span></span></span></span></span></span></span></span></span></span></span></p>\n<p><span><span><span><span><span><span><span><span><span><span><span><span>æœ€åï¼Œä¸‹é¢æ˜¯æˆ‘ä»¬éœ€è¦é‡æ„åçš„åˆ†æ”¯è·¯ç”±å›¾ï¼š</span></span></span></span></span></span></span></span></span></span></span></span></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/381412/202512/381412-20251224202047038-2027515638.png\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></p>\n<h1><strong>å‡†å¤‡å·¥ä½œ</strong></h1>\n<p><span><span><span><span><span><span><span><span><span><span><span><span><span>åœ¨ä»Šå¤©çš„è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬ä»ç„¶åˆ›å»ºäº†ä¸€ä¸ª.NETæ§åˆ¶å°åº”ç”¨ç¨‹åºï¼Œå®‰è£…äº†ä»¥ä¸‹NuGetåŒ…ï¼š</span></span></span></span></span></span></span></span></span></span></span></span></span></p>\n<ul class=\"list-paddingleft-1\">\n<li><span>Microsoft.Agents.AI.OpenAI</span></li>\n<li><span>Microsoft.Agents.AI.Workflows</span></li>\n<li><span>Microsoft.Extensions.AI.OpenAI</span></li>\n</ul>\n<p><span><span><span><span><span><span><span><span><span><span><span><span><span>æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶ä¸­å®šä¹‰äº†LLM APIçš„ä¿¡æ¯ï¼š</span></span></span></span></span></span></span></span></span></span></span></span></span></p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 0, 1);\">{\n  </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">OpenAI</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">: {\n    </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">EndPoint</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>: <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">https://api.siliconflow.cn</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">,\n    </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">ApiKey</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>: <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">******************************</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">,\n    </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">ModelId</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>: <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">Qwen/Qwen3-30B-A3B-Instruct-2507</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">\n  }\n}</span></pre>\n</div>\n<p><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ SiliconCloud æä¾›<span><span>çš„<span><span>&nbsp;<span><span>Qwen/Qwen3-30B-A3B-Instruct-2507&nbsp;<span><span>æ¨¡å‹ï¼Œä½ <span><span>å¯ä»¥é€šè¿‡è¿™ä¸ªURLæ³¨å†Œè´¦å·ï¼š<span><span><a href=\"https://cloud.siliconflow.cn/i/DomqCefW\" rel=\"noopener nofollow\" target=\"_blank\">https://cloud.siliconflow.cn/i/DomqCefW</a><span>&nbsp;è·å–å¤§é‡å…è´¹çš„Tokenæ¥è¿›è¡Œæœ¬æ¬¡å®éªŒã€‚</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>\n<p><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>ç„¶åï¼Œæˆ‘ä»¬å°†é…ç½®æ–‡ä»¶ä¸­çš„APIä¿¡æ¯è¯»å–å‡ºæ¥ï¼š</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">var</span> config = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> ConfigurationBuilder()\n    .AddJsonFile($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">appsettings.json</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>, optional: <span style=\"color: rgba(0, 0, 255, 1);\">false</span>, reloadOnChange: <span style=\"color: rgba(0, 0, 255, 1);\">true</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    .Build();\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> openAIProvider = config.GetSection(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">OpenAI</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>).Get&lt;OpenAIProvider&gt;();</pre>\n</div>\n<h2><span>å®šä¹‰æ•°æ®ä¼ è¾“æ¨¡å‹</span></h2>\n<p><span><span>é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸‹åœ¨è¿™ä¸ªå·¥ä½œæµä¸­éœ€è¦ç”Ÿæˆä¼ é€’çš„æ•°æ®æ¨¡å‹ï¼š</span></span></p>\n<p><span><span>ï¼ˆ1ï¼‰DetectionResult ï¼šæ‹‰ä»¶é‚®ä»¶æ£€æµ‹ç»“æœ</span></span></p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">sealed</span> <span style=\"color: rgba(0, 0, 255, 1);\">class</span><span style=\"color: rgba(0, 0, 0, 1);\"> DetectionResult\n{\n    </span><span style=\"color: rgba(128, 128, 128, 1);\">///</span> <span style=\"color: rgba(128, 128, 128, 1);\">&lt;summary&gt;</span>\n    <span style=\"color: rgba(128, 128, 128, 1);\">///</span><span style=\"color: rgba(0, 128, 0, 1);\"> æ£€æµ‹å†³ç­–ï¼ˆNotSpam / Spam / Uncertainï¼‰\n    </span><span style=\"color: rgba(128, 128, 128, 1);\">///</span> <span style=\"color: rgba(128, 128, 128, 1);\">&lt;/summary&gt;</span>\n    [JsonPropertyName(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">spam_decision</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)]\n    [JsonConverter(</span><span style=\"color: rgba(0, 0, 255, 1);\">typeof</span>(JsonStringEnumConverter))]  <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> JSON åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²</span>\n    <span style=\"color: rgba(0, 0, 255, 1);\">public</span> SpamDecision spamDecision { <span style=\"color: rgba(0, 0, 255, 1);\">get</span>; <span style=\"color: rgba(0, 0, 255, 1);\">set</span><span style=\"color: rgba(0, 0, 0, 1);\">; }\n    </span><span style=\"color: rgba(128, 128, 128, 1);\">///</span> <span style=\"color: rgba(128, 128, 128, 1);\">&lt;summary&gt;</span>\n    <span style=\"color: rgba(128, 128, 128, 1);\">///</span><span style=\"color: rgba(0, 128, 0, 1);\"> åˆ¤å®šç†ç”±ï¼ˆç”¨äºå®¡è®¡å’Œè°ƒè¯•ï¼‰\n    </span><span style=\"color: rgba(128, 128, 128, 1);\">///</span> <span style=\"color: rgba(128, 128, 128, 1);\">&lt;/summary&gt;</span>\n    [JsonPropertyName(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">reason</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)]\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">string</span> Reason { <span style=\"color: rgba(0, 0, 255, 1);\">get</span>; <span style=\"color: rgba(0, 0, 255, 1);\">set</span>; } = <span style=\"color: rgba(0, 0, 255, 1);\">string</span><span style=\"color: rgba(0, 0, 0, 1);\">.Empty;\n    </span><span style=\"color: rgba(128, 128, 128, 1);\">///</span> <span style=\"color: rgba(128, 128, 128, 1);\">&lt;summary&gt;</span>\n    <span style=\"color: rgba(128, 128, 128, 1);\">///</span><span style=\"color: rgba(0, 128, 0, 1);\"> é‚®ä»¶IDï¼ˆç”¨äºå…³è” Shared State ä¸­çš„åŸå§‹å†…å®¹ï¼‰\n    </span><span style=\"color: rgba(128, 128, 128, 1);\">///</span> <span style=\"color: rgba(128, 128, 128, 1);\">&lt;/summary&gt;</span>\n<span style=\"color: rgba(0, 0, 0, 1);\">    [JsonIgnore]\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">string</span> EmailId { <span style=\"color: rgba(0, 0, 255, 1);\">get</span>; <span style=\"color: rgba(0, 0, 255, 1);\">set</span>; } = <span style=\"color: rgba(0, 0, 255, 1);\">string</span><span style=\"color: rgba(0, 0, 0, 1);\">.Empty;\n}\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">enum</span><span style=\"color: rgba(0, 0, 0, 1);\"> SpamDecision\n{\n    Spam,        </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> åƒåœ¾é‚®ä»¶</span>\n    NotSpam, <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> æ­£å¸¸é‚®ä»¶</span>\n    UnCertain <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> æ— æ³•ç¡®å®šï¼ˆéœ€è¦äººå·¥å®¡æ ¸ï¼‰</span>\n}</pre>\n</div>\n<p><span><span>ï¼ˆ2ï¼‰EmailStateConstants ï¼šå¸¸é‡ï¼Œç±»ä¼¼äºCache Keyçš„ä½œç”¨ï¼Œå‚è€ƒä¸Šä¸€ç¯‡åšå®¢å†…å®¹ã€‚</span></span></p>\n<p><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>ï¼ˆ3ï¼‰EmailMessage &amp; EmailResponse ï¼šDTOä½œç”¨ï¼Œå‚è€ƒä¸Šä¸€ç¯‡åšå®¢å†…å®¹ã€‚</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>\n<h2><span>å…¥å£èŠ‚ç‚¹ï¼šåƒåœ¾é‚®ä»¶æ£€æµ‹Executor</span></h2>\n<p><span><span><span><span>è¿™ä¸ªåƒåœ¾é‚®ä»¶æ£€æµ‹æ˜¯æœ¬æµç¨‹çš„æ ¸å¿ƒèŠ‚ç‚¹ï¼Œè¿™æ¬¡æˆ‘ä»¬å°†å…¶é‡æ„ä¸ºæ”¯æŒä¸‰åˆ†ç±»ï¼š</span></span></span></span></p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">internal</span> <span style=\"color: rgba(0, 0, 255, 1);\">sealed</span> <span style=\"color: rgba(0, 0, 255, 1);\">class</span> SpamDetectionExecutor : Executor&lt;ChatMessage, DetectionResult&gt;<span style=\"color: rgba(0, 0, 0, 1);\">\n{\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">private</span> <span style=\"color: rgba(0, 0, 255, 1);\">readonly</span><span style=\"color: rgba(0, 0, 0, 1);\"> AIAgent _agent;\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">private</span> <span style=\"color: rgba(0, 0, 255, 1);\">readonly</span><span style=\"color: rgba(0, 0, 0, 1);\"> AgentThread _thread;\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> SpamDetectionExecutor(AIAgent agent) : <span style=\"color: rgba(0, 0, 255, 1);\">base</span>(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">SpamDetectionExecutor</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    {\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> åˆ›å»º Agent å’Œå¯¹è¯çº¿ç¨‹</span>\n        <span style=\"color: rgba(0, 0, 255, 1);\">this</span>._agent =<span style=\"color: rgba(0, 0, 0, 1);\"> agent;\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">this</span>._thread = <span style=\"color: rgba(0, 0, 255, 1);\">this</span><span style=\"color: rgba(0, 0, 0, 1);\">._agent.GetNewThread();\n    }\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">override</span> <span style=\"color: rgba(0, 0, 255, 1);\">async</span> ValueTask&lt;DetectionResult&gt; HandleAsync(ChatMessage message, IWorkflowContext context, CancellationToken cancellationToken = <span style=\"color: rgba(0, 0, 255, 1);\">default</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    {\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> 1ï¸âƒ£ ç”Ÿæˆå”¯ä¸€é‚®ä»¶IDå¹¶ä¿å­˜å†…å®¹åˆ° Shared State</span>\n        <span style=\"color: rgba(0, 0, 255, 1);\">var</span> trackedEmail = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> EmailMessage\n        {\n            EmailId </span>= Guid.NewGuid().ToString(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">N</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">),\n            EmailContent </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> message.Text\n        };\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">await</span><span style=\"color: rgba(0, 0, 0, 1);\"> context.QueueStateUpdateAsync(\n            trackedEmail.EmailId,\n            trackedEmail,\n            scopeName: EmailStateConstants.EmailStateScope,\n            cancellationToken\n        );\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> 2ï¸âƒ£ è°ƒç”¨ AI Agent è¿›è¡Œä¸‰åˆ†ç±»æ£€æµ‹</span>\n        <span style=\"color: rgba(0, 0, 255, 1);\">var</span> agentResponse = <span style=\"color: rgba(0, 0, 255, 1);\">await</span><span style=\"color: rgba(0, 0, 0, 1);\"> _agent.RunAsync(\n            message,\n            _thread,\n            cancellationToken: cancellationToken\n        );\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> 3ï¸âƒ£ è§£æç»“æ„åŒ–è¾“å‡º</span>\n        <span style=\"color: rgba(0, 0, 255, 1);\">var</span> detection = JsonSerializer.Deserialize&lt;DetectionResult&gt;<span style=\"color: rgba(0, 0, 0, 1);\">(agentResponse.Text)\n            </span>?? <span style=\"color: rgba(0, 0, 255, 1);\">throw</span> <span style=\"color: rgba(0, 0, 255, 1);\">new</span> InvalidOperationException(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">æ— æ³•è§£æ Spam Detection å“åº”</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> 4ï¸âƒ£ å…³è” EmailIdï¼ˆä¾›ä¸‹æ¸¸ Executor æŸ¥æ‰¾åŸå§‹å†…å®¹ï¼‰</span>\n        detection.EmailId =<span style=\"color: rgba(0, 0, 0, 1);\"> trackedEmail.EmailId;\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> detection;\n    }\n}</span></pre>\n</div>\n<p>åœ¨è¿™ä¸ªExecutorä¸­ï¼Œå®ƒæ¥æ”¶æˆ‘ä»¬å¦‚ä¸‹æ‰€ç¤ºå®šä¹‰å¥½çš„Agentæ¥å®ç°ï¼š</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">var</span> spamDetectionAgent = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> ChatClientAgent(\n    chatClient,\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> ChatClientAgentOptions(\n        instructions: </span><span style=\"color: rgba(128, 0, 0, 1);\">@\"</span><span style=\"color: rgba(128, 0, 0, 1);\">ä½ æ˜¯ä¸€ä¸ªåƒåœ¾é‚®ä»¶æ£€æµ‹åŠ©æ‰‹ã€‚åˆ¤å®šè§„åˆ™ï¼š\n- NotSpam: æ˜æ˜¾çš„æ­£å¸¸ä¸šåŠ¡é‚®ä»¶ï¼ˆè®¢å•æŸ¥è¯¢ã€å”®åå’¨è¯¢ç­‰ï¼‰\n- Spam: æ˜æ˜¾çš„åƒåœ¾é‚®ä»¶ï¼ˆè¯ˆéª—ã€å¹¿å‘Šã€é’“é±¼ï¼‰\n- Uncertain: æ— æ³•æ˜ç¡®åˆ¤æ–­ï¼ŒåŒ…å«å¯ç–‘å…ƒç´ ä½†ä¸ç¡®å®šï¼ˆå¦‚å«å¯ç–‘é“¾æ¥ä½†å†…å®¹æ¨¡ç³Šï¼‰\nå¯¹äºæ¨¡æ£±ä¸¤å¯çš„æƒ…å†µï¼Œå€¾å‘äºæ ‡è®°ä¸º Uncertain ä»¥ä¿è¯å®‰å…¨ã€‚</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">\n    )\n    {\n        ChatOptions </span>= <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> ChatOptions\n        {\n            ResponseFormat </span>= ChatResponseFormat.ForJsonSchema&lt;DetectionResult&gt;<span style=\"color: rgba(0, 0, 0, 1);\">()\n        }\n    }\n);</span></pre>\n</div>\n<p>åœ¨ChatOptionsä¸­æŒ‡å®šäº†è¯¥Agentè¿”å›çš„æ¶ˆæ¯éœ€è¦è¿›è¡Œåºåˆ—åŒ–åˆ°å¼ºç±»å‹ï¼Œä¾¿äºåç»­é€šè¿‡å¼ºç±»å‹æ•°æ®è¿›è¡Œå†³ç­–è·¯ç”±ã€‚</p>\n<h2><span>ä¸‹æ¸¸èŠ‚ç‚¹Aï¼šæ­£å¸¸é‚®ä»¶å¤„ç†+å‘é€</span></h2>\n<p>è¿™é‡Œæˆ‘ä»¬é’ˆå¯¹è¯†åˆ«åˆ°çš„æ­£å¸¸é‚®ä»¶å¼€å‘ä¸¤ä¸ªæ‰§è¡Œå™¨ï¼Œå‡è®¾å…¶ç”¨äºé‚®ä»¶å¤„å’Œè½¬å‘ï¼š</p>\n<h3>é‚®ä»¶å¤„ç†ï¼šè¯»å–å…±äº«çŠ¶æ€åŒºçš„åŸæ–‡ï¼Œç„¶åè°ƒç”¨Agentè¾“å‡ºJSONå›å¤ã€‚</h3>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">internal</span> <span style=\"color: rgba(0, 0, 255, 1);\">sealed</span> <span style=\"color: rgba(0, 0, 255, 1);\">class</span> EmailAssistantExecutor : Executor&lt;DetectionResult, EmailResponse&gt;<span style=\"color: rgba(0, 0, 0, 1);\">\n{\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">private</span> <span style=\"color: rgba(0, 0, 255, 1);\">readonly</span><span style=\"color: rgba(0, 0, 0, 1);\"> AIAgent _agent;\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">private</span> <span style=\"color: rgba(0, 0, 255, 1);\">readonly</span><span style=\"color: rgba(0, 0, 0, 1);\"> AgentThread _thread;\n\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> EmailAssistantExecutor(AIAgent agent) : <span style=\"color: rgba(0, 0, 255, 1);\">base</span>(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">EmailAssistantExecutor</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    {\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> åˆ›å»º Agent å’Œå¯¹è¯çº¿ç¨‹</span>\n        <span style=\"color: rgba(0, 0, 255, 1);\">this</span>._agent =<span style=\"color: rgba(0, 0, 0, 1);\"> agent;\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">this</span>._thread = <span style=\"color: rgba(0, 0, 255, 1);\">this</span><span style=\"color: rgba(0, 0, 0, 1);\">._agent.GetNewThread();\n    }\n\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">override</span> <span style=\"color: rgba(0, 0, 255, 1);\">async</span> ValueTask&lt;EmailResponse&gt; HandleAsync(DetectionResult message, IWorkflowContext context, CancellationToken cancellationToken = <span style=\"color: rgba(0, 0, 255, 1);\">default</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    {\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> ğŸ›¡ï¸ é˜²å¾¡æ€§æ£€æŸ¥ï¼šç¡®ä¿åªå¤„ç†æ­£å¸¸é‚®ä»¶</span>\n        <span style=\"color: rgba(0, 0, 255, 1);\">if</span> (message.spamDecision ==<span style=\"color: rgba(0, 0, 0, 1);\"> SpamDecision.Spam)\n            </span><span style=\"color: rgba(0, 0, 255, 1);\">throw</span> <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> InvalidOperationException(\n                </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">EmailAssistantExecutor ä¸åº”å¤„ç†åƒåœ¾é‚®ä»¶ï¼Œè¯·æ£€æŸ¥è·¯ç”±é…ç½®ã€‚</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">\n            );\n\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> 1ï¸âƒ£ ä» Shared State è¯»å–åŸå§‹é‚®ä»¶å†…å®¹</span>\n        <span style=\"color: rgba(0, 0, 255, 1);\">var</span> email = <span style=\"color: rgba(0, 0, 255, 1);\">await</span> context.ReadStateAsync&lt;EmailMessage&gt;<span style=\"color: rgba(0, 0, 0, 1);\">(\n            message.EmailId,\n            scopeName: EmailStateConstants.EmailStateScope,\n            cancellationToken\n        ) </span>?? <span style=\"color: rgba(0, 0, 255, 1);\">throw</span> <span style=\"color: rgba(0, 0, 255, 1);\">new</span> InvalidOperationException($<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">æ‰¾ä¸åˆ° EmailId={message.EmailId} çš„é‚®ä»¶å†…å®¹</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> 2ï¸âƒ£ è°ƒç”¨ AI Agent ç”Ÿæˆå›å¤</span>\n        <span style=\"color: rgba(0, 0, 255, 1);\">var</span> agentResponse = <span style=\"color: rgba(0, 0, 255, 1);\">await</span><span style=\"color: rgba(0, 0, 0, 1);\"> _agent.RunAsync(\n            email.EmailContent,\n            _thread,\n            cancellationToken: cancellationToken\n        );\n\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> 3ï¸âƒ£ è§£æç»“æ„åŒ–è¾“å‡º</span>\n        <span style=\"color: rgba(0, 0, 255, 1);\">var</span> emailResponse = JsonSerializer.Deserialize&lt;EmailResponse&gt;<span style=\"color: rgba(0, 0, 0, 1);\">(agentResponse.Text)\n            </span>?? <span style=\"color: rgba(0, 0, 255, 1);\">throw</span> <span style=\"color: rgba(0, 0, 255, 1);\">new</span> InvalidOperationException(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">æ— æ³•è§£æ Email Assistant å“åº”</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> emailResponse;\n    }\n}</span></pre>\n</div>\n<p>è¿™é‡Œçš„Agentå®šä¹‰å¦‚ä¸‹ï¼š</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">var</span> emailAssistantAgent = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> ChatClientAgent(\n    chatClient,\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> ChatClientAgentOptions(\n        instructions: </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">ä½ æ˜¯ä¸€ä¸ªä¼ä¸šé‚®ä»¶åŠ©æ‰‹ï¼Œä¸ºå®¢æˆ·é‚®ä»¶ç”Ÿæˆä¸“ä¸šã€å‹å¥½çš„ä¸­æ–‡å›å¤ã€‚</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">\n    )\n    {\n        ChatOptions </span>= <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> ChatOptions\n        {\n            ResponseFormat </span>= ChatResponseFormat.ForJsonSchema&lt;EmailResponse&gt;<span style=\"color: rgba(0, 0, 0, 1);\">()\n        }\n    }\n);</span></pre>\n</div>\n<h3><span>é‚®ä»¶è½¬å‘ï¼šæ¨¡æ‹Ÿé‚®ä»¶è½¬å‘åˆ°å…·ä½“çš„å®¢æœï¼Œè¿™é‡Œä»…ä»…ä½¿ç”¨YieldOutputAsyncå®Œæˆå·¥ä½œæµè¾“å‡ºæ¶ˆæ¯å†…å®¹ã€‚</span></h3>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">internal</span> <span style=\"color: rgba(0, 0, 255, 1);\">sealed</span> <span style=\"color: rgba(0, 0, 255, 1);\">class</span> EmailSendingExecutor() : Executor&lt;EmailResponse&gt;(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">EmailSendingExecutor</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n{\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">override</span> <span style=\"color: rgba(0, 0, 255, 1);\">async</span> ValueTask HandleAsync(EmailResponse message, IWorkflowContext context, CancellationToken cancellationToken = <span style=\"color: rgba(0, 0, 255, 1);\">default</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    {\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> æ¨¡æ‹Ÿé‚®ä»¶å‘é€ï¼ˆå®é™…é¡¹ç›®ä¸­å¯è°ƒç”¨ SMTPã€SendGrid ç­‰æœåŠ¡ï¼‰</span>\n        <span style=\"color: rgba(0, 0, 255, 1);\">await</span><span style=\"color: rgba(0, 0, 0, 1);\"> context.YieldOutputAsync(\n            $</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">ğŸ“¤ é‚®ä»¶å·²å‘é€: {message.Response}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">,\n            cancellationToken\n        );\n    }\n}</span></pre>\n</div>\n<h2><span>ä¸‹æ¸¸èŠ‚ç‚¹Bï¼šåƒåœ¾é‚®ä»¶å¤„ç†</span></h2>\n<p>å½“åˆ¤æ–­åˆ°æ˜¯åƒåœ¾é‚®ä»¶æ—¶ï¼Œè½¬äº¤ç»™è¯¥æ‰§è¡Œå™¨å¤„ç†ï¼Œè¿™é‡Œæ¨¡æ‹Ÿè¾“å‡ºäº†ä¸€æ®µé£é™©æç¤ºï¼Œå®é™…ä¸­å¯èƒ½æ˜¯ä¸ŠæŠ¥äººå·¥è·Ÿè¿›ç­‰ç­‰æ“ä½œï¼š</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">internal</span> <span style=\"color: rgba(0, 0, 255, 1);\">sealed</span> <span style=\"color: rgba(0, 0, 255, 1);\">class</span> SpamHandlingExecutor() : Executor&lt;DetectionResult&gt;(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">SpamHandlingExecutor</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n{\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">override</span> <span style=\"color: rgba(0, 0, 255, 1);\">async</span> ValueTask HandleAsync(DetectionResult message, IWorkflowContext context, CancellationToken cancellationToken = <span style=\"color: rgba(0, 0, 255, 1);\">default</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    {\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> ğŸ›¡ï¸ é˜²å¾¡æ€§æ£€æŸ¥ï¼šç¡®ä¿åªå¤„ç†åƒåœ¾é‚®ä»¶</span>\n        <span style=\"color: rgba(0, 0, 255, 1);\">if</span> (message.spamDecision !=<span style=\"color: rgba(0, 0, 0, 1);\"> SpamDecision.Spam)\n            </span><span style=\"color: rgba(0, 0, 255, 1);\">throw</span> <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> InvalidOperationException(\n                </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">SpamHandlingExecutor åªåº”å¤„ç† Spam ç±»å‹çš„é‚®ä»¶ï¼Œè¯·æ£€æŸ¥è·¯ç”±é…ç½®ã€‚</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">\n            );\n\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> è®°å½•åƒåœ¾é‚®ä»¶ï¼ˆå®é™…é¡¹ç›®ä¸­å¯å†™å…¥æ•°æ®åº“æˆ–æ—¥å¿—ç³»ç»Ÿï¼‰</span>\n        <span style=\"color: rgba(0, 0, 255, 1);\">await</span><span style=\"color: rgba(0, 0, 0, 1);\"> context.YieldOutputAsync(\n            $</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">ğŸš« åƒåœ¾é‚®ä»¶å·²æ‹¦æˆª: {message.Reason}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">,\n            cancellationToken\n        );\n    }\n}</span></pre>\n</div>\n<h2><span>ä¸‹æ¸¸èŠ‚ç‚¹Cï¼š<span><span>ä¸ç¡®å®šé‚®ä»¶å¤„ç†æ‰§è¡Œå™¨ï¼ˆå…œåº•å¤„ç†ï¼‰</span></span></span></h2>\n<p>å½“åˆ¤æ–­åˆ°å±äºä¸ç¡®å®šçš„é‚®ä»¶åˆ†ç±»æ—¶ï¼Œè½¬äº¤ç»™è¯¥æ‰§è¡Œå™¨åšå…œåº•å¤„ç† æˆ– é»˜è®¤å¤„ç†ï¼š</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">internal</span> <span style=\"color: rgba(0, 0, 255, 1);\">class</span> UncertainHandlingExecutor() : Executor&lt;DetectionResult&gt;(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">UncertainHandlingExecutor</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n{\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">override</span> <span style=\"color: rgba(0, 0, 255, 1);\">async</span><span style=\"color: rgba(0, 0, 0, 1);\"> ValueTask HandleAsync(\n        DetectionResult message,\n        IWorkflowContext context,\n        CancellationToken cancellationToken </span>= <span style=\"color: rgba(0, 0, 255, 1);\">default</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n    {\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> ğŸ›¡ï¸ é˜²å¾¡æ€§æ£€æŸ¥ï¼šç¡®ä¿åªå¤„ç†ä¸ç¡®å®šé‚®ä»¶</span>\n        <span style=\"color: rgba(0, 0, 255, 1);\">if</span> (message.spamDecision !=<span style=\"color: rgba(0, 0, 0, 1);\"> SpamDecision.UnCertain)\n            </span><span style=\"color: rgba(0, 0, 255, 1);\">throw</span> <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> InvalidOperationException(\n                </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">UncertainHandlingExecutor åªåº”å¤„ç† Uncertain ç±»å‹çš„é‚®ä»¶ï¼ˆæˆ–ä½œä¸º Default Caseï¼‰ã€‚</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">\n            );\n\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> 1ï¸âƒ£ ä» Shared State è¯»å–åŸå§‹é‚®ä»¶å†…å®¹ï¼ˆç”¨äºäººå·¥å®¡æ ¸ï¼‰</span>\n        <span style=\"color: rgba(0, 0, 255, 1);\">var</span> email = <span style=\"color: rgba(0, 0, 255, 1);\">await</span> context.ReadStateAsync&lt;EmailMessage&gt;<span style=\"color: rgba(0, 0, 0, 1);\">(\n            message.EmailId,\n            scopeName: EmailStateConstants.EmailStateScope,\n            cancellationToken\n        );\n\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> 2ï¸âƒ£ è¾“å‡ºå¾…å®¡æ ¸ä¿¡æ¯</span>\n        <span style=\"color: rgba(0, 0, 255, 1);\">await</span><span style=\"color: rgba(0, 0, 0, 1);\"> context.YieldOutputAsync(\n            $</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">âš ï¸ ä¸ç¡®å®šé‚®ä»¶éœ€äººå·¥å®¡æ ¸:\\n</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span> +<span style=\"color: rgba(0, 0, 0, 1);\">\n            $</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">åŸå› : {message.Reason}\\n</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span> +<span style=\"color: rgba(0, 0, 0, 1);\">\n            $</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">å†…å®¹é¢„è§ˆ: {email?.EmailContent?.Substring(0, Math.Min(100, email.EmailContent.Length))}...</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">,\n            cancellationToken\n        );\n    }\n}</span></pre>\n</div>\n<h2>æ„å»ºå·¥ä½œæµ</h2>\n<p>ç°åœ¨ä¸‡äº‹ä¿±å¤‡ï¼Œåªæ¬ ä¸€ä¸ªWorkflowï¼Œç°åœ¨Let's do it!</p>\n<p><strong>Step1:</strong> è·å–ChatClient</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">var</span> chatClient = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> OpenAIClient(\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> ApiKeyCredential(openAIProvider.ApiKey),\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">new</span> OpenAIClientOptions { Endpoint = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> Uri(openAIProvider.Endpoint) })\n    .GetChatClient(openAIProvider.ModelId)\n    .AsIChatClient();</span></pre>\n</div>\n<p><strong><span><span>Step2<span>: </span></span></span></strong>å®ä¾‹åŒ–è‡ªå®šä¹‰Agent &amp; Executors</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">var</span> spamDetectionExecutor = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> SpamDetectionExecutor(spamDetectionAgent);\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> emailAssistantExecutor = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> EmailAssistantExecutor(emailAssistantAgent);\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> sendEmailExecutor = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> EmailSendingExecutor();\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> handleSpamExecutor = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> SpamHandlingExecutor();\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> handleUncertainExecutor = <span style=\"color: rgba(0, 0, 255, 1);\">new</span> UncertainHandlingExecutor();</pre>\n</div>\n<p><strong><span><span>Step3<span>: </span></span></span></strong>åˆ›å»ºswitch-caseå¤šè·¯ç”±å†³ç­–å·¥ä½œæµ</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> ğŸ”§ æ¡ä»¶å‡½æ•°å·¥å‚æ–¹æ³•\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>\nFunc&lt;<span style=\"color: rgba(0, 0, 255, 1);\">object</span>?, <span style=\"color: rgba(0, 0, 255, 1);\">bool</span>&gt; GetCondition(SpamDecision expectedDecision) =&gt;<span style=\"color: rgba(0, 0, 0, 1);\">\n    detectionResult </span>=&gt;<span style=\"color: rgba(0, 0, 0, 1);\">\n        detectionResult </span><span style=\"color: rgba(0, 0, 255, 1);\">is</span> DetectionResult result &amp;&amp;<span style=\"color: rgba(0, 0, 0, 1);\">\n        result.spamDecision </span>==<span style=\"color: rgba(0, 0, 0, 1);\"> expectedDecision;\n\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> ğŸ”€ ä½¿ç”¨ AddSwitch æ„å»º Switch-Case å·¥ä½œæµ\n</span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">var</span> builder = <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> WorkflowBuilder(spamDetectionExecutor);\nbuilder.AddSwitch(spamDetectionExecutor, sb </span>=&gt;<span style=\"color: rgba(0, 0, 0, 1);\">\n        sb\n            </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> Case 1: NotSpam â†’ EmailAssistant </span>\n            .AddCase(GetCondition(expectedDecision: SpamDecision.NotSpam), <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\">[] { (ExecutorBinding)emailAssistantExecutor })\n            </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> Case 2: Spam â†’ HandleSpam</span>\n            .AddCase(GetCondition(expectedDecision: SpamDecision.Spam), <span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\">[] { (ExecutorBinding)handleSpamExecutor })\n            </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> Default: Uncertain (æˆ–ä»»ä½•æœªåŒ¹é…çš„æƒ…å†µ) â†’ HandleUncertain</span>\n            .WithDefault(<span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\">[] { (ExecutorBinding)handleUncertainExecutor })\n    )\n    </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> EmailAssistant ä¹‹åè‡ªåŠ¨å‘é€é‚®ä»¶</span>\n<span style=\"color: rgba(0, 0, 0, 1);\">    .AddEdge(emailAssistantExecutor, sendEmailExecutor)\n    </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> é…ç½®è¾“å‡ºèŠ‚ç‚¹ï¼ˆä¸‰ä¸ªç»ˆç‚¹æ‰§è¡Œå™¨éƒ½ä¼šäº§ç”Ÿè¾“å‡ºï¼‰</span>\n<span style=\"color: rgba(0, 0, 0, 1);\">    .WithOutputFrom(handleSpamExecutor, sendEmailExecutor, handleUncertainExecutor);\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> workflow =<span style=\"color: rgba(0, 0, 0, 1);\"> builder.Build();\n\nConsole.OutputEncoding </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> Encoding.UTF8;\nConsole.WriteLine(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">âœ… Conditional Workflow æ„å»ºå®Œæˆ</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>);</pre>\n</div>\n<h2>æµ‹è¯•å·¥ä½œæµ</h2>\n<p>é¦–å…ˆï¼Œä¸ºäº†ä¾¿äºåç»­æµ‹è¯•æˆ‘ä»¬å°†æ‰§è¡Œå·¥ä½œæµå°è£…ä¸ºä¸€ä¸ªé™æ€æ–¹æ³•ï¼š</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">static</span> <span style=\"color: rgba(0, 0, 255, 1);\">async</span><span style=\"color: rgba(0, 0, 0, 1);\"> Task RunWorkflowAsync(\n    Workflow workflow,\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">string</span><span style=\"color: rgba(0, 0, 0, 1);\"> scenarioName,\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">string</span><span style=\"color: rgba(0, 0, 0, 1);\"> emailContent)\n{\n    Console.WriteLine(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n    Console.WriteLine($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">ğŸ“¬ æµ‹è¯•åœºæ™¯ï¼š{scenarioName}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n    Console.WriteLine(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n    Console.WriteLine($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">ğŸ“§ é‚®ä»¶å†…å®¹ï¼š{emailContent.Substring(0, Math.Min(80, emailContent.Length))}...\\n</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">await</span> <span style=\"color: rgba(0, 0, 255, 1);\">using</span> <span style=\"color: rgba(0, 0, 255, 1);\">var</span> run = <span style=\"color: rgba(0, 0, 255, 1);\">await</span><span style=\"color: rgba(0, 0, 0, 1);\"> InProcessExecution.StreamAsync(\n        workflow,\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">new</span><span style=\"color: rgba(0, 0, 0, 1);\"> ChatMessage(ChatRole.User, emailContent)\n    );\n    </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> å‘é€ Turn Tokenï¼Œå¯ç”¨äº‹ä»¶æ¨é€</span>\n    <span style=\"color: rgba(0, 0, 255, 1);\">await</span> run.TrySendMessageAsync(<span style=\"color: rgba(0, 0, 255, 1);\">new</span> TurnToken(emitEvents: <span style=\"color: rgba(0, 0, 255, 1);\">true</span><span style=\"color: rgba(0, 0, 0, 1);\">));\n    </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> è®¢é˜…äº‹ä»¶æµ</span>\n    <span style=\"color: rgba(0, 0, 255, 1);\">await</span> <span style=\"color: rgba(0, 0, 255, 1);\">foreach</span> (WorkflowEvent evt <span style=\"color: rgba(0, 0, 255, 1);\">in</span><span style=\"color: rgba(0, 0, 0, 1);\"> run.WatchStreamAsync())\n    {\n        </span><span style=\"color: rgba(0, 0, 255, 1);\">switch</span><span style=\"color: rgba(0, 0, 0, 1);\"> (evt)\n        {\n            </span><span style=\"color: rgba(0, 0, 255, 1);\">case</span><span style=\"color: rgba(0, 0, 0, 1);\"> ExecutorCompletedEvent completedEvent:\n                Console.WriteLine($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">âœ… {completedEvent.ExecutorId} å®Œæˆ</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n                </span><span style=\"color: rgba(0, 0, 255, 1);\">break</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n            </span><span style=\"color: rgba(0, 0, 255, 1);\">case</span><span style=\"color: rgba(0, 0, 0, 1);\"> WorkflowOutputEvent outputEvent:\n                Console.WriteLine(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n                Console.WriteLine(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">ğŸ‰ å·¥ä½œæµæ‰§è¡Œå®Œæˆ</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n                Console.WriteLine(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\\n</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n                Console.WriteLine($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">{outputEvent.Data}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n                </span><span style=\"color: rgba(0, 0, 255, 1);\">break</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n            </span><span style=\"color: rgba(0, 0, 255, 1);\">case</span><span style=\"color: rgba(0, 0, 0, 1);\"> WorkflowErrorEvent errorEvent:\n                Console.WriteLine(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">âœ¨ æ”¶åˆ° Workflow Error Eventï¼š</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n                Console.WriteLine($</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">{errorEvent.Data}</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n                </span><span style=\"color: rgba(0, 0, 255, 1);\">break</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n            </span><span style=\"color: rgba(0, 0, 255, 1);\">default</span><span style=\"color: rgba(0, 0, 0, 1);\">:\n                </span><span style=\"color: rgba(0, 0, 255, 1);\">break</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n        }\n    }\n    Console.WriteLine();\n}</span></pre>\n</div>\n<p><strong>æµ‹è¯•ç”¨ä¾‹1ï¼š</strong>æ­£å¸¸å’¨è¯¢é‚®ä»¶è¾“å…¥</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">var</span> scenarioName1 = <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">æ­£å¸¸é‚®ä»¶ â†’ EmailAssistant â†’ SendEmail</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> emailContent1 = <span style=\"color: rgba(128, 0, 0, 1);\">@\"</span><span style=\"color: rgba(128, 0, 0, 1);\">\nå°Šæ•¬çš„å®¢æœå›¢é˜Ÿï¼š\næ‚¨å¥½ï¼æˆ‘æ˜¯è´µå…¬å¸çš„é•¿æœŸå®¢æˆ·ï¼Œè®¢å•å·ä¸º \n#2025\n-001ã€‚\næˆ‘æƒ³ç¡®è®¤ä¸€ä¸‹ä¸Šå‘¨æäº¤çš„é‡‡è´­è®¢å•æ˜¯å¦å·²ç»å®‰æ’å‘è´§ã€‚\nå¦‚æœéœ€è¦è¡¥å……ä»»ä½•ä¿¡æ¯ï¼Œè¯·éšæ—¶å‘ŠçŸ¥ã€‚\næœŸå¾…æ‚¨çš„å›å¤ï¼Œè°¢è°¢ï¼\nå®¢æˆ·ï¼šå¼ å…ˆç”Ÿ\n</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n</span><span style=\"color: rgba(0, 0, 255, 1);\">await</span><span style=\"color: rgba(0, 0, 0, 1);\"> RunWorkflowAsync(workflow, scenarioName1, emailContent1);\nConsole.WriteLine(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">âœ… æ­£å¸¸é‚®ä»¶è·¯å¾„éªŒè¯å®Œæˆ</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>);</pre>\n</div>\n<p>æµ‹è¯•ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/381412/202512/381412-20251224202754097-83329301.png\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></p>\n<p>å¯ä»¥çœ‹è§ï¼Œå¯¹äºæ­£å¸¸å’¨è¯¢é‚®ä»¶ï¼Œè¿›è¡Œæ­£å¸¸çš„é‚®ä»¶å¤„ç†å’Œè½¬å‘ã€‚</p>\n<p><strong>æµ‹è¯•ç”¨ä¾‹2ï¼š</strong>åƒåœ¾é‚®ä»¶è¾“å…¥</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">var</span> scenarioName2 = <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">åƒåœ¾é‚®ä»¶ â†’ HandleSpam</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n</span><span style=\"color: rgba(0, 0, 255, 1);\">var</span> emailContent2 = <span style=\"color: rgba(128, 0, 0, 1);\">@\"</span><span style=\"color: rgba(128, 0, 0, 1);\">\nğŸ‰ğŸ‰ğŸ‰ æ­å–œæ‚¨ä¸­å¥–å•¦ï¼ğŸ‰ğŸ‰ğŸ‰\n\næ‚¨å·²è¢«é€‰ä¸­è·å¾— 100 ä¸‡ç°é‡‘å¤§å¥–ï¼\n\nç«‹å³ç‚¹å‡»ä»¥ä¸‹é“¾æ¥é¢†å–ï¼š\nhttp://suspicious-site.com/claim-prize\n\nä»…é™ä»Šæ—¥æœ‰æ•ˆï¼Œè¿‡æœŸä½œåºŸï¼\nä¸éœ€è¦ä»»ä½•æ‰‹ç»­è´¹ï¼Œå®Œå…¨å…è´¹ï¼\n\nå¿«é€Ÿè¡ŒåŠ¨ï¼Œæœºä¸å¯å¤±ï¼\n</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n</span><span style=\"color: rgba(0, 0, 255, 1);\">await</span><span style=\"color: rgba(0, 0, 0, 1);\"> RunWorkflowAsync(workflow, scenarioName2, emailContent2);\nConsole.WriteLine(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">âœ… åƒåœ¾é‚®ä»¶è·¯å¾„éªŒè¯å®Œæˆ</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>);</pre>\n</div>\n<p>æµ‹è¯•ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/381412/202512/381412-20251224202904798-37631196.png\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></p>\n<p>å¯ä»¥çœ‹è§ï¼Œå¯¹äºåƒåœ¾é‚®ä»¶ï¼Œè¿›è¡Œæœ‰æ•ˆçš„æ‹¦æˆªï¼Œåç»­è¿˜å¯ä»¥è¿›è¡Œä¸ŠæŠ¥äººå·¥è·Ÿè¸ªç­‰ç­‰ã€‚</p>\n<p><strong>æµ‹è¯•ç”¨ä¾‹3ï¼š</strong>æ— æ³•ç¡®è®¤ç±»å‹çš„é‚®ä»¶è¾“å…¥</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">var</span> uncertainEmail = <span style=\"color: rgba(128, 0, 0, 1);\">@\"</span><span style=\"color: rgba(128, 0, 0, 1);\">\nä¸»é¢˜ï¼šéœ€è¦éªŒè¯æ‚¨çš„è´¦æˆ·\nå°Šæ•¬çš„å®¢æˆ·ï¼š\næˆ‘ä»¬æ£€æµ‹åˆ°æ‚¨çš„è´¦æˆ·å­˜åœ¨å¼‚å¸¸æ´»åŠ¨ï¼Œéœ€è¦éªŒè¯æ‚¨çš„èº«ä»½ä»¥ç¡®ä¿è´¦æˆ·å®‰å…¨ã€‚\nè¯·ç™»å½•æ‚¨çš„è´¦æˆ·å¹¶å®ŒæˆéªŒè¯æµç¨‹ï¼Œä»¥ç»§ç»­ä½¿ç”¨æœåŠ¡ã€‚\nè´¦æˆ·è¯¦æƒ…ï¼š\n- ç”¨æˆ·åï¼šjohndoe@contoso.com\n- æœ€åç™»å½•ï¼š08/15/2025\n- ç™»å½•åœ°ç‚¹ï¼šè¥¿é›…å›¾ï¼Œåç››é¡¿å·\n- ç™»å½•è®¾å¤‡ï¼šç§»åŠ¨è®¾å¤‡\nè¿™æ˜¯ä¸€é¡¹è‡ªåŠ¨å®‰å…¨æªæ–½ã€‚å¦‚æœæ‚¨è®¤ä¸ºæ­¤é‚®ä»¶æ˜¯é”™è¯¯å‘é€çš„ï¼Œè¯·ç«‹å³è”ç³»æˆ‘ä»¬çš„æ”¯æŒå›¢é˜Ÿã€‚\næ­¤è‡´\nå®‰å…¨å›¢é˜Ÿ\nå®¢æˆ·æœåŠ¡éƒ¨é—¨\n</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n</span><span style=\"color: rgba(0, 0, 255, 1);\">await</span><span style=\"color: rgba(0, 0, 0, 1);\"> RunWorkflowAsync(\n    workflow,\n    </span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">ä¸ç¡®å®šé‚®ä»¶ â†’ HandleUncertain (Default)</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">,\n    uncertainEmail\n);\nConsole.WriteLine(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">âœ… ä¸ç¡®å®šé‚®ä»¶è·¯å¾„éªŒè¯å®Œæˆ</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>);</pre>\n</div>\n<p>æµ‹è¯•ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/381412/202512/381412-20251224202940842-749043447.png\" style=\"display: block; margin-left: auto; margin-right: auto;\" /></p>\n<p>å¯ä»¥çœ‹åˆ°ï¼Œå¯¹äºLLMæ— æ³•ç¡®è®¤çš„ç±»å‹ï¼Œè¿›å…¥äº†è¯¥æ‰§è¡Œå™¨ï¼Œè¿™æ—¶å¯èƒ½éœ€è¦äººå·¥ä»‹å…¥å®¡æ ¸ã€‚åŒæ—¶ï¼Œè¿™ä¹Ÿæ˜¯å®é™…ä¸­å¸¸è§çš„ä¸€ç§å…œåº•æœºåˆ¶çš„å±•ç°ï¼Œè¯å¥è¯è¯´ï¼š<strong>å³ä½¿AIæ— æ³•æ˜ç¡®åˆ¤æ–­ï¼Œä¹Ÿåº”è¯¥æœ‰å¯¹åº”çš„å¤„ç†æµç¨‹</strong>ã€‚</p>\n<h1><strong><span>å°ç»“</span></strong></h1>\n<p>æœ¬æ–‡ä»‹ç»äº†MAFä¸­çš„switch-caseè·¯ç”±ä»¥åŠå¦‚ä½•å®ç°å¤šæ¡ä»¶è·¯ç”±ï¼Œæœ€åä¼˜åŒ–äº†ä¸Šä¸€ç¯‡çš„ä¼ä¸šå†…éƒ¨é‚®ä»¶æ£€æµ‹å·¥ä½œæµæ¡ˆä¾‹ï¼Œç‰¹åˆ«é€‚åˆäºå¤§äº3ä¸ªåˆ†æ”¯çš„å¤æ‚è·¯ç”±åœºæ™¯ã€‚</p>\n<p>ä¸‹ä¸€ç¯‡ï¼Œæˆ‘ä»¬å°†ç»§ç»­å­¦ä¹ MAFä¸­å·¥ä½œæµçš„å¾ªç¯å·¥ä½œæµã€‚</p>\n<h1>å‚è€ƒèµ„æ–™</h1>\n<p><span><span>åœ£æ°ï¼Œã€Š<a href=\"https://www.cnblogs.com/sheng-jie/p/19200934\" target=\"_blank\">.NET + AI æ™ºèƒ½ä½“å¼€å‘è¿›é˜¶</a>ã€‹ï¼ˆæ¨èæŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜…ï¼‰</span></span></p>\n<p><span><span>Microsoft Learnï¼Œ<span>ã€Š<a href=\"https://learn.microsoft.com/en-us/agent-framework/overview/agent-framework-overview?wt.mc_id=MVP_397012\" rel=\"noopener nofollow\" target=\"_blank\">Agent Framework Tutorials</a>ã€‹</span></span></span></p>\n<div><span><span>&nbsp;</span></span></div>\n<p style=\"text-align: center;\"><img alt=\"\" src=\"https://images.cnblogs.com/cnblogs_com/edisonchou/1647700/o_200902144330EdisonTalk-Footer.jpg\" /></p>\n<div id=\"Copyright\">\n<p>ä½œè€…ï¼š<span style=\"text-decoration: underline;\">çˆ±è¿ªç”Ÿ</span></p>\n<p>å‡ºå¤„ï¼š<a href=\"https://edisontalk.cnblogs.com\" target=\"_blank\" title=\"from\">https://edisontalk.cnblogs.com</a></p>\n<p>æœ¬æ–‡ç‰ˆæƒå½’ä½œè€…å’Œåšå®¢å›­å…±æœ‰ï¼Œæ¬¢è¿è½¬è½½ï¼Œä½†æœªç»ä½œè€…åŒæ„å¿…é¡»ä¿ç•™æ­¤æ®µå£°æ˜ï¼Œä¸”åœ¨æ–‡ç« é¡µé¢æ˜æ˜¾ä½ç½®ç»™å‡ºåŸæ–‡é“¾æ¥ã€‚</p>\n</div>\n</div>\n<div id=\"MySignature\">\n    <div align=\"center\"><a href=\"https://weibo.com/u/2068032061?s=6uyXnP\" target=\"_blank\"><img border=\"0\" src=\"http://service.t.sina.com.cn/widget/qmd/2068032061/d643d182/10.png\" /></a></div>\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2025-12-29 18:30</span>&nbsp;\n<a href=\"https://www.cnblogs.com/edisontalk\">EdisonZhou</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">49</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "CodeSpirit å¼€å‘ç¯å¢ƒæ­å»ºåŠå¯åŠ¨æŒ‡å—",
      "link": "https://www.cnblogs.com/codelove/p/19392132",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n\t\t\t<a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/codelove/p/19392132\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2025-12-29 15:07\">\n    <span>CodeSpirit å¼€å‘ç¯å¢ƒæ­å»ºåŠå¯åŠ¨æŒ‡å—</span>\n    \n\n</a>\n\n\t\t</h1>\n\t\t<div class=\"clear\"></div>\n\t\t<div class=\"postBody\">\n\t\t\t<div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h2 id=\"æ¦‚è¿°\">æ¦‚è¿°</h2>\n<p>æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨å¿«é€Ÿæ­å»ºCodeSpiritï¼ˆç çµï¼‰ä½ä»£ç æ¡†æ¶çš„å¼€å‘ç¯å¢ƒã€‚CodeSpiritåŸºäº .NET 10 å’Œ Aspire 13.0 æ„å»ºï¼Œé€šè¿‡ç®€å•çš„å‡ ä¸ªæ­¥éª¤å³å¯å¯åŠ¨å®Œæ•´çš„å¼€å‘ç¯å¢ƒã€‚</p>\n<p><strong>æœ€åæ›´æ–°</strong>: 2025å¹´12æœˆ22æ—¥<br />\n<strong>æ¡†æ¶ç‰ˆæœ¬</strong>: v2.0.0<br />\n<img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/70544/202512/70544-20251224131727898-298580147.png\" /></p>\n<h2 id=\"å¿«é€Ÿå¼€å§‹\">å¿«é€Ÿå¼€å§‹</h2>\n<h3 id=\"å‰ç½®è¦æ±‚\">å‰ç½®è¦æ±‚</h3>\n<ul>\n<li><strong>æ“ä½œç³»ç»Ÿ</strong>: Windows 10/11, macOS 12+, æˆ– Linux (Ubuntu 20.04+)</li>\n<li><strong>CPU</strong>: Intel i5 æˆ– AMD Ryzen 5 åŠä»¥ä¸Šï¼ˆæ¨èi7/Ryzen 7ï¼‰</li>\n<li><strong>å†…å­˜</strong>: 16GB RAMï¼ˆæ¨è32GBï¼‰</li>\n<li><strong>å­˜å‚¨</strong>: è‡³å°‘20GBå¯ç”¨ç©ºé—´ï¼ˆSSDæ¨èï¼‰</li>\n</ul>\n<blockquote>\n<p><strong>æ³¨æ„</strong>: CodeSpirité»˜è®¤ä½¿ç”¨GreptimeDBè¿›è¡Œå®¡è®¡æ—¥å¿—å­˜å‚¨å’Œæœç´¢ã€‚Elasticsearchä¸ºå¯é€‰ç»„ä»¶ï¼Œå¦‚éœ€ä½¿ç”¨è¯·å‚è€ƒç›¸å…³é…ç½®æ–‡æ¡£ã€‚</p>\n</blockquote>\n<h3 id=\"1-å®‰è£…-net-10-sdk\">1. å®‰è£… .NET 10 SDK</h3>\n<h4 id=\"windows\">Windows</h4>\n<pre><code class=\"language-powershell\"># ä½¿ç”¨ winget å®‰è£…\nwinget install Microsoft.DotNet.SDK.10\n\n# æˆ–ä¸‹è½½å®‰è£…åŒ…\n# https://dotnet.microsoft.com/download/dotnet/10.0\n</code></pre>\n<h4 id=\"macos\">macOS</h4>\n<pre><code class=\"language-bash\"># ä½¿ç”¨ Homebrew\nbrew install --cask dotnet-sdk\n\n# æˆ–ä¸‹è½½å®‰è£…åŒ…\n# https://dotnet.microsoft.com/download/dotnet/10.0\n</code></pre>\n<h4 id=\"linux-ubuntu\">Linux (Ubuntu)</h4>\n<pre><code class=\"language-bash\"># æ·»åŠ å¾®è½¯åŒ…æº\nwget https://packages.microsoft.com/config/ubuntu/22.04/packages-microsoft-prod.deb -O packages-microsoft-prod.deb\nsudo dpkg -i packages-microsoft-prod.deb\nsudo apt-get update\nsudo apt-get install -y dotnet-sdk-10.0\n</code></pre>\n<h4 id=\"éªŒè¯å®‰è£…\">éªŒè¯å®‰è£…</h4>\n<pre><code class=\"language-bash\">dotnet --version\n# åº”æ˜¾ç¤º 10.x.x\n</code></pre>\n<h3 id=\"2-å®‰è£…å¼€å‘å·¥å…·\">2. å®‰è£…å¼€å‘å·¥å…·</h3>\n<h4 id=\"visual-studio-2026-æ¨è\">Visual Studio 2026 (æ¨è)</h4>\n<ul>\n<li>ä¸‹è½½åœ°å€: <a href=\"https://visualstudio.microsoft.com/vs/\" rel=\"noopener nofollow\" target=\"_blank\">https://visualstudio.microsoft.com/vs/</a></li>\n<li>é€‰æ‹©å·¥ä½œè´Ÿè½½ï¼š<strong>ASP.NET å’Œ Web å¼€å‘</strong></li>\n</ul>\n<h4 id=\"æˆ–è€…-visual-studio-code\">æˆ–è€… Visual Studio Code</h4>\n<pre><code class=\"language-bash\"># Windows\nwinget install Microsoft.VisualStudioCode\n\n# macOS\nbrew install --cask visual-studio-code\n\n# Linux\nsudo snap install code --classic\n</code></pre>\n<p>VS Codeå¿…éœ€æ‰©å±•ï¼š</p>\n<pre><code class=\"language-bash\">code --install-extension ms-dotnettools.csharp\ncode --install-extension ms-dotnettools.vscode-dotnet-runtime\n</code></pre>\n<h3 id=\"3-å®‰è£…docker-desktop\">3. å®‰è£…Docker Desktop</h3>\n<ul>\n<li>ä¸‹è½½åœ°å€: <a href=\"https://www.docker.com/products/docker-desktop\" rel=\"noopener nofollow\" target=\"_blank\">https://www.docker.com/products/docker-desktop</a></li>\n<li>å®‰è£…åå¯åŠ¨Docker Desktop</li>\n</ul>\n<p>éªŒè¯å®‰è£…ï¼š</p>\n<pre><code class=\"language-bash\">docker --version\n</code></pre>\n<h2 id=\"é¡¹ç›®å¯åŠ¨\">é¡¹ç›®å¯åŠ¨</h2>\n<h3 id=\"1-å…‹éš†é¡¹ç›®\">1. å…‹éš†é¡¹ç›®</h3>\n<pre><code class=\"language-bash\">git clone https://gitee.com/magicodes/code-spirit.git\ncd code-spirit\n</code></pre>\n<h3 id=\"2-å¯åŠ¨åŸºç¡€æœåŠ¡\">2. å¯åŠ¨åŸºç¡€æœåŠ¡</h3>\n<p>CodeSpiritä½¿ç”¨Aspireè‡ªåŠ¨ç®¡ç†æ‰€æœ‰ä¾èµ–æœåŠ¡ï¼Œæ— éœ€æ‰‹åŠ¨å¯åŠ¨Dockerå®¹å™¨ï¼š</p>\n<pre><code class=\"language-bash\"># Aspireä¼šè‡ªåŠ¨å¯åŠ¨ä»¥ä¸‹æœåŠ¡ï¼š\n# - MySQL/SQL Server (æ ¹æ®é…ç½®é€‰æ‹©ï¼Œç«¯å£: 3306/1433)\n# - Redis (ç«¯å£: 6380)\n# - RabbitMQ (ç«¯å£: 5672, ç®¡ç†ç•Œé¢: 15672)\n# - GreptimeDB (ç«¯å£: 4000/4001)\n# - Seqæ—¥å¿—æœåŠ¡ (ç«¯å£: 5341)\n</code></pre>\n<blockquote>\n<p><strong>æœåŠ¡è¯´æ˜</strong>:</p>\n<ul>\n<li><strong>MySQL/SQL Server</strong>: ä¸»æ•°æ®åº“å­˜å‚¨ï¼ˆæ ¹æ®DatabaseTypeé…ç½®é€‰æ‹©ï¼‰</li>\n<li><strong>Redis</strong>: ç¼“å­˜å’Œä¼šè¯å­˜å‚¨ï¼ˆç«¯å£: 6380ï¼‰</li>\n<li><strong>RabbitMQ</strong>: æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡ï¼ˆç®¡ç†ç•Œé¢ç«¯å£: 15672ï¼‰</li>\n<li><strong>GreptimeDB</strong>: æ—¶åºæ•°æ®åº“ï¼Œç”¨äºå®¡è®¡æ—¥å¿—å­˜å‚¨ï¼ˆHTTPç«¯å£: 4000, gRPCç«¯å£: 4001ï¼‰</li>\n<li><strong>Seq</strong>: ç»“æ„åŒ–æ—¥å¿—æœåŠ¡ï¼ˆç«¯å£: 5341ï¼‰</li>\n</ul>\n</blockquote>\n<h3 id=\"3-è¿è¡Œé¡¹ç›®\">3. è¿è¡Œé¡¹ç›®</h3>\n<h4 id=\"ä½¿ç”¨net-aspireæ¨è\">ä½¿ç”¨.NET Aspireï¼ˆæ¨èï¼‰</h4>\n<pre><code class=\"language-bash\"># è¿›å…¥AppHosté¡¹ç›®ç›®å½•\ncd Src/CodeSpirit.AppHost\n\n# è¿è¡ŒAspireåº”ç”¨\ndotnet run\n</code></pre>\n<p>å¦‚æœæ˜¯æ­£å¸¸å¯åŠ¨ï¼Œå°†çœ‹åˆ°ä»¥ä¸‹ç¼¤çº·çš„æ§åˆ¶å°è¾“å‡ºï¼š</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/70544/202512/70544-20251224131931648-1820053723.png\" /></p>\n<p>å¯åŠ¨åè®¿é—®ï¼š</p>\n<ul>\n<li><strong>Aspire Dashboard</strong>: <a href=\"http://localhost:17109\" rel=\"noopener nofollow\" target=\"_blank\">http://localhost:17109</a>ï¼ˆè‡ªåŠ¨æ‰“å¼€ï¼‰</li>\n<li><strong>Webåº”ç”¨</strong>: <a href=\"https://localhost:7120\" rel=\"noopener nofollow\" target=\"_blank\">https://localhost:7120</a>ï¼ˆå¯åŠ¨åæ˜¾ç¤ºå…·ä½“ç«¯å£ï¼‰</li>\n</ul>\n<blockquote>\n<p><strong>æ³¨æ„</strong>:</p>\n</blockquote>\n<blockquote>\n<ol>\n<li>å®é™…ç«¯å£å·å¯èƒ½å› ç³»ç»Ÿé…ç½®è€Œå¼‚ï¼Œè¯·æŸ¥çœ‹Aspire Dashboardè·å–å‡†ç¡®çš„ç«¯å£ä¿¡æ¯ã€‚</li>\n<li>å¦‚ä½•ç™»å½•é¡µæ²¡æœ‰æ­£å¸¸å‘ˆç°ï¼Œè¯·æŒ‰ç…§ä¸‹é¢çš„å¿…å¡«å‚æ•°é…ç½®è¿›è¡Œé…ç½®ã€‚</li>\n</ol>\n</blockquote>\n<h4 id=\"æˆ–è€…ä½¿ç”¨visual-studio\">æˆ–è€…ä½¿ç”¨Visual Studio</h4>\n<ol>\n<li>\n<p>æ‰“å¼€ <code>CodeSpirit.sln</code></p>\n</li>\n<li>\n<p>è®¾ç½® <code>CodeSpirit.AppHost</code> ä¸ºå¯åŠ¨é¡¹ç›®</p>\n</li>\n<li>\n<p>æŒ‰ F5 è¿è¡Œ<br />\n<img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/70544/202512/70544-20251224131917733-1101676572.png\" /><br />\næ³¨æ„ï¼Œéœ€ç¡®ä¿ä»¥ä¸‹æœåŠ¡å‡æ­£å¸¸å¯åŠ¨ï¼š<br />\n<img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/70544/202512/70544-20251224131931648-1820053723.png\" /></p>\n</li>\n</ol>\n<h2 id=\"é¡¹ç›®ç»“æ„\">é¡¹ç›®ç»“æ„</h2>\n<p>CodeSpirité‡‡ç”¨Clean Architectureè®¾è®¡ï¼Œé¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p>\n<pre><code>CodeSpirit/\nâ”œâ”€â”€ Src/\nâ”‚   â”œâ”€â”€ ApiServices/                     # APIæœåŠ¡ï¼ˆè§£å†³æ–¹æ¡ˆæ–‡ä»¶å¤¹ï¼‰\nâ”‚   â”‚   â”œâ”€â”€ CodeSpirit.IdentityApi/      # èº«ä»½è®¤è¯API\nâ”‚   â”‚   â”œâ”€â”€ CodeSpirit.ExamApi/          # è€ƒè¯•ç³»ç»ŸAPI  \nâ”‚   â”‚   â”œâ”€â”€ CodeSpirit.MessagingApi/     # æ¶ˆæ¯æœåŠ¡API\nâ”‚   â”‚   â”œâ”€â”€ CodeSpirit.ConfigCenter/    # é…ç½®ä¸­å¿ƒAPI\nâ”‚   â”‚   â”œâ”€â”€ CodeSpirit.FileStorageApi/  # æ–‡ä»¶å­˜å‚¨API\nâ”‚   â”‚   â”œâ”€â”€ CodeSpirit.SurveyApi/        # é—®å·è°ƒæŸ¥API\nâ”‚   â”‚   â”œâ”€â”€ CodeSpirit.ApprovalApi/      # å®¡æ‰¹å·¥ä½œæµAPI\nâ”‚   â”‚   â”œâ”€â”€ CodeSpirit.PathfinderApi/    # AIç›®æ ‡ç®¡ç†API\nâ”‚   â”‚   â””â”€â”€ CodeSpirit.AiCardsApi/       # AIå¡ç‰‡API\nâ”‚   â”œâ”€â”€ Components/                     # ç»„ä»¶åº“\nâ”‚   â”‚   â”œâ”€â”€ CodeSpirit.Aggregator/       # èšåˆå™¨ç»„ä»¶\nâ”‚   â”‚   â”œâ”€â”€ CodeSpirit.AiFormFill/       # AIè¡¨å•æ™ºèƒ½å¡«å……ç»„ä»¶\nâ”‚   â”‚   â”œâ”€â”€ CodeSpirit.Amis/             # UIç”Ÿæˆå¼•æ“\nâ”‚   â”‚   â”œâ”€â”€ CodeSpirit.Authorization/    # æƒé™ç»„ä»¶\nâ”‚   â”‚   â”œâ”€â”€ CodeSpirit.Audit/            # å®¡è®¡ç»„ä»¶\nâ”‚   â”‚   â”œâ”€â”€ CodeSpirit.Caching/          # åˆ†å¸ƒå¼ç¼“å­˜ç»„ä»¶\nâ”‚   â”‚   â”œâ”€â”€ CodeSpirit.Charts/           # æ™ºèƒ½å›¾è¡¨ç»„ä»¶\nâ”‚   â”‚   â”œâ”€â”€ CodeSpirit.ConfigCenter.Client/ # é…ç½®ä¸­å¿ƒå®¢æˆ·ç«¯\nâ”‚   â”‚   â”œâ”€â”€ CodeSpirit.LLM/              # å¤§è¯­è¨€æ¨¡å‹ç»„ä»¶\nâ”‚   â”‚   â”œâ”€â”€ CodeSpirit.Messaging/        # æ¶ˆæ¯é˜Ÿåˆ—ç»„ä»¶\nâ”‚   â”‚   â”œâ”€â”€ CodeSpirit.MultiTenant/      # å¤šç§Ÿæˆ·ç»„ä»¶\nâ”‚   â”‚   â”œâ”€â”€ CodeSpirit.Navigation/       # å¯¼èˆªç»„ä»¶\nâ”‚   â”‚   â”œâ”€â”€ CodeSpirit.PdfGeneration/    # PDFç”Ÿæˆç»„ä»¶\nâ”‚   â”‚   â”œâ”€â”€ CodeSpirit.ScheduledTasks/   # å®šæ—¶ä»»åŠ¡ç»„ä»¶\nâ”‚   â”‚   â”œâ”€â”€ CodeSpirit.Settings/         # è®¾ç½®ç®¡ç†ç»„ä»¶\nâ”‚   â”‚   â”œâ”€â”€ CodeSpirit.Shared/           # ç»„ä»¶å…±äº«åº“\nâ”‚   â”‚   â””â”€â”€ CodeSpirit.UdlCards/         # UDLå¡ç‰‡ç»„ä»¶\nâ”‚   â”œâ”€â”€ CodeSpirit.AppHost/              # Aspireåº”ç”¨å®¿ä¸»\nâ”‚   â”œâ”€â”€ CodeSpirit.Core/                 # æ ¸å¿ƒå®šä¹‰\nâ”‚   â”œâ”€â”€ CodeSpirit.ServiceDefaults/      # æœåŠ¡é»˜è®¤é…ç½®\nâ”‚   â”œâ”€â”€ CodeSpirit.Shared/               # å…¨å±€å…±äº«åº“\nâ”‚   â””â”€â”€ CodeSpirit.Web/                  # Webå‰ç«¯é¡¹ç›®\nâ”œâ”€â”€ Tests/                               # æµ‹è¯•é¡¹ç›®\nâ”œâ”€â”€ Docs/                                # é¡¹ç›®æ–‡æ¡£\nâ”œâ”€â”€ k8s/                                 # Kuberneteséƒ¨ç½²æ–‡ä»¶\nâ””â”€â”€ CodeSpirit.sln                       # è§£å†³æ–¹æ¡ˆæ–‡ä»¶\n</code></pre>\n<h2 id=\"é»˜è®¤é…ç½®\">é»˜è®¤é…ç½®</h2>\n<p>é¡¹ç›®ä½¿ç”¨ä»¥ä¸‹é»˜è®¤é…ç½®ï¼Œç”±.NET Aspireè‡ªåŠ¨ç®¡ç†ï¼š</p>\n<h3 id=\"æ•°æ®åº“è¿æ¥\">æ•°æ®åº“è¿æ¥</h3>\n<ul>\n<li>\n<p><strong>æ•°æ®åº“ç±»å‹</strong>: æ”¯æŒMySQLå’ŒSQL Serverä¸¤ç§æ•°æ®åº“ï¼ˆé€šè¿‡<code>DatabaseType</code>é…ç½®é€‰æ‹©ï¼‰</p>\n</li>\n<li>\n<p><strong>MySQL</strong>: ç«¯å£3306ï¼Œç”±Aspireè‡ªåŠ¨é…ç½®</p>\n<p>å¯ä»¥ä»èµ„æºé¢æ¿è®¿é—®ç®¡ç†UIï¼ˆphpmyadminï¼‰ï¼š<br />\n<img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/70544/202512/70544-20251224132002956-598129788.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/70544/202512/70544-20251224132042244-558588173.png\" /></p>\n</li>\n<li>\n<p><strong>SQL Server</strong>: ç«¯å£1433ï¼Œç”±Aspireè‡ªåŠ¨é…ç½®</p>\n</li>\n<li>\n<p><strong>æ•°æ®åº“</strong>: è‡ªåŠ¨åˆ›å»ºå’Œè¿ç§»</p>\n</li>\n<li>\n<p><strong>è¿æ¥å­—ç¬¦ä¸²</strong>: ç”±Aspireè‡ªåŠ¨ç®¡ç†</p>\n</li>\n</ul>\n<h3 id=\"ç¼“å­˜å’Œæ¶ˆæ¯é˜Ÿåˆ—\">ç¼“å­˜å’Œæ¶ˆæ¯é˜Ÿåˆ—</h3>\n<ul>\n<li>\n<p><strong>Redis</strong>: <code>localhost:6380</code>ï¼ˆå…·ä½“è§ç®¡ç†UIï¼‰</p>\n</li>\n<li>\n<p><strong>RabbitMQ</strong>: <code>localhost:5672</code> (ç®¡ç†ç•Œé¢: <a href=\"http://localhost:15672\" rel=\"noopener nofollow\" target=\"_blank\">http://localhost:15672</a>, ç”¨æˆ·å/å¯†ç : admin/Password123)</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/70544/202512/70544-20251224132123458-1426760447.png\" /></p>\n</li>\n</ul>\n<h3 id=\"å…¶ä»–æœåŠ¡ç«¯å£\">å…¶ä»–æœåŠ¡ç«¯å£</h3>\n<ul>\n<li>\n<p><strong>GreptimeDB</strong>:</p>\n<ul>\n<li>HTTPç«¯å£: <code>localhost:4000</code></li>\n<li>gRPCç«¯å£: <code>localhost:4001</code></li>\n<li>å¥åº·æ£€æŸ¥: <a href=\"http://localhost:4000/health\" rel=\"noopener nofollow\" target=\"_blank\">http://localhost:4000/health</a></li>\n</ul>\n</li>\n<li>\n<p><strong>Seqæ—¥å¿—æœåŠ¡</strong>: <code>localhost:5341</code>ï¼ˆå…·ä½“ç«¯å£è§èµ„æºé¢æ¿ï¼‰</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/70544/202512/70544-20251224132136208-2065968736.png\" /></p>\n</li>\n<li>\n<p><strong>Redis Commander</strong>: é€šè¿‡Aspire Dashboardè®¿é—®</p>\n</li>\n</ul>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/70544/202512/70544-20251224132147317-671812413.png\" /></p>\n<h2 id=\"å¿…å¡«å‚æ•°é…ç½®\">å¿…å¡«å‚æ•°é…ç½®</h2>\n<p>CodeSpirit ä½¿ç”¨ .NET Aspire çš„å‚æ•°ç®¡ç†æœºåˆ¶æ¥é…ç½®æ•æ„Ÿä¿¡æ¯å’Œç¯å¢ƒç›¸å…³å‚æ•°ã€‚åœ¨é¦–æ¬¡å¯åŠ¨å‰ï¼Œæ‚¨éœ€è¦é…ç½®ä»¥ä¸‹å¿…å¡«å‚æ•°ã€‚æç¤ºUIå¦‚ä¸‹ï¼š<br />\n<img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/70544/202512/70544-20251224132156259-1567610099.png\" /><br />\n<img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/70544/202512/70544-20251224132203941-1321498621.png\" /></p>\n<h3 id=\"å‚æ•°é…ç½®æ–¹å¼\">å‚æ•°é…ç½®æ–¹å¼</h3>\n<p>Aspire æ”¯æŒä¸¤ç§å‚æ•°é…ç½®æ–¹å¼ï¼Œé…ç½®ç³»ç»Ÿä¼šæŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§è¯»å–ï¼ˆé«˜ä¼˜å…ˆçº§ä¼šè¦†ç›–ä½ä¼˜å…ˆçº§ï¼‰ï¼š</p>\n<ol>\n<li><strong>User Secrets</strong>ï¼ˆå¼€å‘ç¯å¢ƒæ¨èï¼Œé¿å…æäº¤æ•æ„Ÿä¿¡æ¯åˆ°ä»£ç åº“ï¼‰</li>\n<li><strong>appsettings.json</strong>ï¼ˆå¼€å‘ç¯å¢ƒå¤‡é€‰æ–¹æ¡ˆï¼‰</li>\n</ol>\n<blockquote>\n<p><strong>æç¤º</strong>: å¯¹äºæ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ API å¯†é’¥ï¼‰ï¼Œå¼ºçƒˆæ¨èä½¿ç”¨ User Secretsï¼Œé¿å…å°†å¯†é’¥æäº¤åˆ°ä»£ç åº“ã€‚</p>\n</blockquote>\n<h3 id=\"å¿…å¡«å‚æ•°åˆ—è¡¨\">å¿…å¡«å‚æ•°åˆ—è¡¨</h3>\n<h4 id=\"llm-é…ç½®å‚æ•°\">LLM é…ç½®å‚æ•°</h4>\n<p>ä»¥ä¸‹å‚æ•°ç”¨äºé…ç½®é€šç”¨ LLM æœåŠ¡ï¼ˆå¦‚ AI å¡ç‰‡ã€æ™ºèƒ½å®¡æ‰¹ç­‰åŠŸèƒ½ï¼‰ï¼š</p>\n<table>\n<thead>\n<tr>\n<th>å‚æ•°åç§°</th>\n<th>è¯´æ˜</th>\n<th>æ˜¯å¦å¿…å¡«</th>\n<th>é»˜è®¤å€¼</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>llm-ApiKey</code></td>\n<td>LLM APIå¯†é’¥</td>\n<td>âœ… <strong>å¿…å¡«</strong></td>\n<td>æ— </td>\n</tr>\n<tr>\n<td><code>llm-ApiBaseUrl</code></td>\n<td>LLM APIåŸºç¡€åœ°å€</td>\n<td>å¯é€‰</td>\n<td><code>https://dashscope.aliyuncs.com/compatible-mode/v1</code></td>\n</tr>\n<tr>\n<td><code>llm-ModelName</code></td>\n<td>LLMæ¨¡å‹åç§°</td>\n<td>å¯é€‰</td>\n<td><code>qwen-flash</code></td>\n</tr>\n<tr>\n<td><code>llm-TimeoutSeconds</code></td>\n<td>è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰</td>\n<td>å¯é€‰</td>\n<td><code>120</code></td>\n</tr>\n<tr>\n<td><code>llm-MaxTokens</code></td>\n<td>æœ€å¤§Tokenæ•°</td>\n<td>å¯é€‰</td>\n<td><code>2048</code></td>\n</tr>\n<tr>\n<td><code>llm-UseProxy</code></td>\n<td>æ˜¯å¦ä½¿ç”¨ä»£ç†</td>\n<td>å¯é€‰</td>\n<td><code>false</code></td>\n</tr>\n<tr>\n<td><code>llm-ProxyAddress</code></td>\n<td>ä»£ç†åœ°å€</td>\n<td>å¯é€‰</td>\n<td>ç©ºå­—ç¬¦ä¸²</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"aiè¡¨å•å¡«å……-llm-é…ç½®å‚æ•°\">AIè¡¨å•å¡«å…… LLM é…ç½®å‚æ•°</h4>\n<p>ä»¥ä¸‹å‚æ•°ç”¨äºé…ç½® AI è¡¨å•æ™ºèƒ½å¡«å……åŠŸèƒ½ï¼š</p>\n<table>\n<thead>\n<tr>\n<th>å‚æ•°åç§°</th>\n<th>è¯´æ˜</th>\n<th>æ˜¯å¦å¿…å¡«</th>\n<th>é»˜è®¤å€¼</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>ai-form-fill-llm-ApiKey</code></td>\n<td>AIè¡¨å•å¡«å……LLM APIå¯†é’¥</td>\n<td>âœ… <strong>å¿…å¡«</strong></td>\n<td>æ— </td>\n</tr>\n<tr>\n<td><code>ai-form-fill-llm-ApiBaseUrl</code></td>\n<td>APIåŸºç¡€åœ°å€</td>\n<td>å¯é€‰</td>\n<td><code>https://dashscope.aliyuncs.com/compatible-mode/v1</code></td>\n</tr>\n<tr>\n<td><code>ai-form-fill-llm-ModelName</code></td>\n<td>æ¨¡å‹åç§°</td>\n<td>å¯é€‰</td>\n<td><code>qwen3-max-preview</code></td>\n</tr>\n<tr>\n<td><code>ai-form-fill-llm-DisableThinking</code></td>\n<td>ç¦ç”¨æ€è€ƒæ¨¡å¼</td>\n<td>å¯é€‰</td>\n<td><code>true</code></td>\n</tr>\n<tr>\n<td><code>ai-form-fill-llm-ResponseFormatType</code></td>\n<td>å“åº”æ ¼å¼ç±»å‹</td>\n<td>å¯é€‰</td>\n<td><code>json_object</code></td>\n</tr>\n<tr>\n<td><code>ai-form-fill-llm-Temperature</code></td>\n<td>æ¸©åº¦å‚æ•°</td>\n<td>å¯é€‰</td>\n<td><code>0.1</code></td>\n</tr>\n<tr>\n<td><code>ai-form-fill-llm-TopP</code></td>\n<td>TopPå‚æ•°</td>\n<td>å¯é€‰</td>\n<td><code>0.9</code></td>\n</tr>\n<tr>\n<td><code>ai-form-fill-llm-EnableStreaming</code></td>\n<td>å¯ç”¨æµå¼å“åº”</td>\n<td>å¯é€‰</td>\n<td><code>true</code></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"å…¶ä»–å¯é€‰å‚æ•°\">å…¶ä»–å¯é€‰å‚æ•°</h4>\n<p>ä»¥ä¸‹å‚æ•°å·²æœ‰é»˜è®¤å€¼ï¼Œé€šå¸¸æ— éœ€ä¿®æ”¹ï¼š</p>\n<table>\n<thead>\n<tr>\n<th>å‚æ•°åç§°</th>\n<th>è¯´æ˜</th>\n<th>é»˜è®¤å€¼</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>jwt-SecretKey</code></td>\n<td>JWTå¯†é’¥</td>\n<td><code>ECBF8FA013844D77AE041A6800D7FF8F</code></td>\n</tr>\n<tr>\n<td><code>jwt-Issuer</code></td>\n<td>JWTé¢å‘è€…</td>\n<td><code>codespirit.com</code></td>\n</tr>\n<tr>\n<td><code>jwt-Audience</code></td>\n<td>JWTå—ä¼—</td>\n<td><code>CodeSpirit</code></td>\n</tr>\n<tr>\n<td><code>mysql-password</code></td>\n<td>MySQLå¯†ç </td>\n<td><code>Password123</code></td>\n</tr>\n<tr>\n<td><code>sqlserver-password</code></td>\n<td>SQL Serverå¯†ç </td>\n<td><code>P@ssword123456</code></td>\n</tr>\n<tr>\n<td><code>rabbitmq-username</code></td>\n<td>RabbitMQç”¨æˆ·å</td>\n<td><code>admin</code></td>\n</tr>\n<tr>\n<td><code>rabbitmq-password</code></td>\n<td>RabbitMQå¯†ç </td>\n<td><code>Password123</code></td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"é…ç½®æ–¹æ³•\">é…ç½®æ–¹æ³•</h3>\n<h4 id=\"æ–¹æ³•ä¸€ä½¿ç”¨-user-secretsæ¨èå¼€å‘ç¯å¢ƒ\">æ–¹æ³•ä¸€ï¼šä½¿ç”¨ User Secretsï¼ˆæ¨èå¼€å‘ç¯å¢ƒï¼‰</h4>\n<p>ä½¿ç”¨ .NET User Secrets å¯ä»¥å®‰å…¨åœ°å­˜å‚¨æ•æ„Ÿä¿¡æ¯ï¼Œæ— éœ€æ‹…å¿ƒæäº¤åˆ°ä»£ç åº“ï¼š</p>\n<pre><code class=\"language-bash\"># è¿›å…¥ AppHost é¡¹ç›®ç›®å½•\ncd Src/CodeSpirit.AppHost\n\n# åˆå§‹åŒ– User Secretsï¼ˆå¦‚æœå°šæœªåˆå§‹åŒ–ï¼‰\ndotnet user-secrets init\n\n# è®¾ç½® LLM API å¯†é’¥\ndotnet user-secrets set \"llm-ApiKey\" \"your-llm-api-key-here\"\n\n# è®¾ç½® AI è¡¨å•å¡«å…… LLM API å¯†é’¥\ndotnet user-secrets set \"ai-form-fill-llm-ApiKey\" \"your-ai-form-fill-llm-api-key-here\"\n\n# æ¸…é™¤æ‰€æœ‰å¯†é’¥\n# dotnet user-secrets clear\n</code></pre>\n<h4 id=\"æ–¹æ³•äºŒä½¿ç”¨-appsettingsjsonå¼€å‘ç¯å¢ƒå¤‡é€‰\">æ–¹æ³•äºŒï¼šä½¿ç”¨ appsettings.jsonï¼ˆå¼€å‘ç¯å¢ƒå¤‡é€‰ï¼‰</h4>\n<p>ç¼–è¾‘ <code>Src/CodeSpirit.AppHost/appsettings.json</code> æ–‡ä»¶ï¼Œæ·»åŠ å‚æ•°é…ç½®ï¼š</p>\n<pre><code class=\"language-json\">{\n  \"DatabaseType\": \"MySql\",\n  \"Logging\": {\n    \"LogLevel\": {\n      \"Default\": \"Information\",\n      \"Microsoft.AspNetCore\": \"Warning\",\n      \"Aspire.Hosting.Dcp\": \"Warning\"\n    }\n  },\n  \"llm-ApiKey\": \"your-llm-api-key-here\",\n  \"ai-form-fill-llm-ApiKey\": \"your-ai-form-fill-llm-api-key-here\"\n}\n</code></pre>\n<blockquote>\n<p><strong>âš ï¸ é‡è¦æç¤º</strong>:</p>\n<ul>\n<li>å¦‚æœä½¿ç”¨ <code>appsettings.json</code> é…ç½®æ•æ„Ÿä¿¡æ¯ï¼Œè¯·ç¡®ä¿è¯¥æ–‡ä»¶å·²æ·»åŠ åˆ° <code>.gitignore</code> ä¸­</li>\n<li>æˆ–è€…åˆ›å»º <code>appsettings.Local.json</code> æ–‡ä»¶ï¼ˆè¯¥æ–‡ä»¶é»˜è®¤å·²åœ¨ <code>.gitignore</code> ä¸­ï¼‰ï¼Œé¿å…å°† API å¯†é’¥æäº¤åˆ°ä»£ç åº“</li>\n<li><strong>å¼ºçƒˆæ¨èä½¿ç”¨ User Secrets æ–¹å¼</strong>ï¼Œæ›´å®‰å…¨ä¸”ä¸ä¼šè¯¯æäº¤</li>\n</ul>\n</blockquote>\n<h3 id=\"è·å–-api-å¯†é’¥\">è·å– API å¯†é’¥</h3>\n<h4 id=\"é˜¿é‡Œäº‘é€šä¹‰åƒé—®dashscope\">é˜¿é‡Œäº‘é€šä¹‰åƒé—®ï¼ˆDashScopeï¼‰</h4>\n<p>å¼€å‘é˜¶æ®µå…è´¹é¢åº¦å®Œå…¨å¤Ÿç”¨ï¼š</p>\n<ol>\n<li>è®¿é—® <a href=\"https://www.aliyun.com/benefit?userCode=nw99vwgt\" rel=\"noopener nofollow\" target=\"_blank\">é˜¿é‡Œäº‘ DashScope</a></li>\n<li>æ³¨å†Œ/ç™»å½•è´¦å·</li>\n<li>åˆ›å»º API Key</li>\n<li>å°† API Key é…ç½®åˆ°ä¸Šè¿°å‚æ•°ä¸­</li>\n</ol>\n<blockquote>\n<p>ğŸ’¡ <strong>æ¨èé˜…è¯»</strong>ï¼š<a href=\"./%E9%98%BF%E9%87%8C%E4%BA%91%E9%80%9A%E4%B9%89%E5%8D%83%E9%97%AE%E5%85%8D%E8%B4%B9%E4%BD%93%E9%AA%8C%E6%8C%87%E5%8D%97.md\" rel=\"noopener nofollow\" target=\"_blank\">é˜¿é‡Œäº‘é€šä¹‰åƒé—®å…è´¹ä½“éªŒæŒ‡å—</a> - è¯¦ç»†çš„æ³¨å†ŒæŒ‡å—ã€é…ç½®æ•™ç¨‹å’Œæˆæœ¬åˆ†æï¼Œå¸®åŠ©æ‚¨é›¶æˆæœ¬ä½“éªŒ CodeSpirit çš„å¼ºå¤§ AI èƒ½åŠ›ï¼</p>\n</blockquote>\n<h4 id=\"openaiå¦‚ä½¿ç”¨-openai-å…¼å®¹æ¥å£\">OpenAIï¼ˆå¦‚ä½¿ç”¨ OpenAI å…¼å®¹æ¥å£ï¼‰</h4>\n<p>å¦‚æœä½¿ç”¨ OpenAI å…¼å®¹çš„ API æœåŠ¡ï¼Œéœ€è¦ä¿®æ”¹ä»¥ä¸‹å‚æ•°ï¼š</p>\n<p>ä½¿ç”¨ User Secrets é…ç½®ï¼š</p>\n<pre><code class=\"language-bash\">dotnet user-secrets set \"llm-ApiBaseUrl\" \"https://api.openai.com/v1\"\ndotnet user-secrets set \"llm-ModelName\" \"gpt-4\"\ndotnet user-secrets set \"llm-ApiKey\" \"your-openai-api-key-here\"\n</code></pre>\n<p>æˆ–ä½¿ç”¨ appsettings.json é…ç½®ï¼š</p>\n<pre><code class=\"language-json\">{\n  \"llm-ApiBaseUrl\": \"https://api.openai.com/v1\",\n  \"llm-ModelName\": \"gpt-4\",\n  \"llm-ApiKey\": \"your-openai-api-key-here\"\n}\n</code></pre>\n<h3 id=\"éªŒè¯å‚æ•°é…ç½®\">éªŒè¯å‚æ•°é…ç½®</h3>\n<p>å¯åŠ¨é¡¹ç›®åï¼Œå¦‚æœå‚æ•°é…ç½®ä¸æ­£ç¡®ï¼Œæ‚¨ä¼šåœ¨æ§åˆ¶å°æˆ– Aspire Dashboard ä¸­çœ‹åˆ°ç›¸å…³é”™è¯¯ä¿¡æ¯ã€‚ç¡®ä¿ä»¥ä¸‹æœåŠ¡èƒ½å¤Ÿæ­£å¸¸å¯åŠ¨ï¼š</p>\n<ul>\n<li>âœ… ConfigCenterï¼ˆé…ç½®ä¸­å¿ƒï¼‰- éœ€è¦ LLM å‚æ•°</li>\n<li>âœ… Web å‰ç«¯ - éœ€è¦ AI è¡¨å•å¡«å…… LLM å‚æ•°</li>\n</ul>\n<blockquote>\n<p><strong>æç¤º</strong>: å¦‚æœæš‚æ—¶ä¸éœ€è¦ä½¿ç”¨ AI åŠŸèƒ½ï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªå ä½ç¬¦å€¼ï¼Œä½†æŸäº›ä¾èµ– AI çš„åŠŸèƒ½å°†æ— æ³•æ­£å¸¸å·¥ä½œã€‚</p>\n</blockquote>\n<h2 id=\"å¼€å‘å·¥å…·é…ç½®\">å¼€å‘å·¥å…·é…ç½®</h2>\n<h3 id=\"visual-studio-code\">Visual Studio Code</h3>\n<p>åˆ›å»º <code>.vscode/launch.json</code>ï¼š</p>\n<pre><code class=\"language-json\">{\n  \"version\": \"0.2.0\",\n  \"configurations\": [\n    {\n      \"name\": \"Launch CodeSpirit\",\n      \"type\": \"coreclr\",\n      \"request\": \"launch\",\n      \"preLaunchTask\": \"build\",\n      \"program\": \"${workspaceFolder}/Src/CodeSpirit.AppHost/bin/Debug/net10.0/CodeSpirit.AppHost.dll\",\n      \"cwd\": \"${workspaceFolder}/Src/CodeSpirit.AppHost\",\n      \"env\": {\n        \"ASPNETCORE_ENVIRONMENT\": \"Development\"\n      }\n    }\n  ]\n}\n</code></pre>\n<p>åˆ›å»º <code>.vscode/tasks.json</code>ï¼š</p>\n<pre><code class=\"language-json\">{\n  \"version\": \"2.0.0\",\n  \"tasks\": [\n    {\n      \"label\": \"build\",\n      \"command\": \"dotnet\",\n      \"type\": \"process\",\n      \"args\": [\"build\", \"${workspaceFolder}/CodeSpirit.sln\"],\n      \"problemMatcher\": \"$msCompile\"\n    }\n  ]\n}\n</code></pre>\n<h2 id=\"éªŒè¯å®‰è£…-1\">éªŒè¯å®‰è£…</h2>\n<h3 id=\"1-æ£€æŸ¥æœåŠ¡çŠ¶æ€\">1. æ£€æŸ¥æœåŠ¡çŠ¶æ€</h3>\n<p>è®¿é—®Aspire Dashboard (<a href=\"http://localhost:17109\" rel=\"noopener nofollow\" target=\"_blank\">http://localhost:17109</a>) ç¡®è®¤æ‰€æœ‰æœåŠ¡æ­£å¸¸è¿è¡Œï¼š</p>\n<ul>\n<li>âœ… CodeSpirit.Web (Webå‰ç«¯)</li>\n<li>âœ… CodeSpirit.IdentityApi (èº«ä»½è®¤è¯)</li>\n<li>âœ… CodeSpirit.ConfigCenter (é…ç½®ä¸­å¿ƒ)</li>\n<li>âœ… CodeSpirit.MessagingApi (æ¶ˆæ¯æœåŠ¡)</li>\n<li>âœ… CodeSpirit.ExamApi (è€ƒè¯•ç³»ç»Ÿ)</li>\n<li>âœ… CodeSpirit.FileStorageApi (æ–‡ä»¶å­˜å‚¨)</li>\n<li>âœ… CodeSpirit.SurveyApi (é—®å·è°ƒæŸ¥)</li>\n<li>âœ… CodeSpirit.ApprovalApi (å®¡æ‰¹æµç¨‹)</li>\n<li>âœ… CodeSpirit.PathfinderApi (AIç›®æ ‡ç®¡ç†)</li>\n<li>âœ… MySQL/SQL Server (æ•°æ®åº“ï¼Œæ ¹æ®é…ç½®)</li>\n<li>âœ… Redis (ç¼“å­˜)</li>\n<li>âœ… RabbitMQ (æ¶ˆæ¯é˜Ÿåˆ—)</li>\n<li>âœ… GreptimeDB (æ—¶åºæ•°æ®åº“)</li>\n<li>âœ… Seq (æ—¥å¿—æœåŠ¡)</li>\n</ul>\n<h3 id=\"2-æ£€æŸ¥é”™è¯¯\">2. æ£€æŸ¥é”™è¯¯</h3>\n<p>æ‰“å¼€ç»“æ„åŒ–æ—¥å¿—é¢æ¿ï¼Œæ£€æŸ¥æ˜¯å¦å­˜åœ¨é”™è¯¯ï¼š</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/70544/202512/70544-20251224132237841-409615542.png\" /></p>\n<h3 id=\"3-è®¿é—®webç•Œé¢\">3. è®¿é—®Webç•Œé¢</h3>\n<p>ç³»ç»Ÿå¹³å°ï¼š<a href=\"https://localhost:7120\" rel=\"noopener nofollow\" target=\"_blank\">https://localhost:7120</a></p>\n<p>è´¦å·ï¼šsystemadmin</p>\n<p>å¯†ç ï¼šCodeSpirit@2025</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/70544/202512/70544-20251224132247398-182230200.png\" /></p>\n<p>ç™»å½•åå¯ä»¥çœ‹åˆ°ç³»ç»Ÿå¹³å°åå°ç®¡ç†UIï¼š</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/70544/202512/70544-20251224132258347-1684698426.png\" /></p>\n<p>ç§Ÿæˆ·å¹³å°ï¼ˆé»˜è®¤ç§Ÿæˆ·ï¼‰ï¼š<a href=\"https://localhost:7120/default/login\" rel=\"noopener nofollow\" target=\"_blank\">https://localhost:7120/default/login</a></p>\n<p>è´¦å·ï¼šadmin</p>\n<p>å¯†ç ï¼š123@Admin</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/70544/202512/70544-20251224132312276-873776487.png\" /></p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/70544/202512/70544-20251224132320900-136012642.png\" /></p>\n<h2 id=\"å¸¸è§é—®é¢˜\">å¸¸è§é—®é¢˜</h2>\n<h3 id=\"æ— æ³•æ‰“å¼€ç½‘é¡µ\">æ— æ³•æ‰“å¼€ç½‘é¡µ</h3>\n<p>ä¸€èˆ¬æ˜¯ä»¥ä¸‹æƒ…å†µå¯¼è‡´ï¼š</p>\n<ol>\n<li>\n<p>é•œåƒæ— æ³•æ‹‰å–ï¼Œä¸€èˆ¬åœ¨dockeré¢æ¿æˆ–Aspireç®¡ç†é¢æ¿çš„æ—¥å¿—ä¸­å¯ä»¥çœ‹åˆ°ã€‚å»ºè®®é…ç½®é•œåƒæºæˆ–è·¯ç”±ä¸Šç½‘ã€‚</p>\n</li>\n<li>\n<p>å…³é”®æœåŠ¡æ•…éšœï¼Œæ¯”å¦‚WebæœåŠ¡å‡ºç°æ•…éšœã€‚</p>\n</li>\n<li>\n<p>ç«¯å£å†²çªæˆ–ç½‘ç»œé”™è¯¯ï¼Œå…·ä½“å¯ä»¥çœ‹å¯åŠ¨æ§åˆ¶å°é”™è¯¯ï¼š</p>\n</li>\n</ol>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/70544/202512/70544-20251224132339285-1584044125.png\" /></p>\n<h3 id=\"ç«¯å£å†²çª\">ç«¯å£å†²çª</h3>\n<p>å¦‚æœé‡åˆ°ç«¯å£å†²çªï¼Œä¿®æ”¹ <code>Src/CodeSpirit.AppHost/Program.cs</code> ä¸­çš„ç«¯å£é…ç½®ã€‚</p>\n<h3 id=\"dockeræœåŠ¡å¯åŠ¨å¤±è´¥\">DockeræœåŠ¡å¯åŠ¨å¤±è´¥</h3>\n<p>ç”±äºé¡¹ç›®ä½¿ç”¨.NET Aspireç®¡ç†æœåŠ¡ï¼Œå¦‚æœé‡åˆ°æœåŠ¡å¯åŠ¨é—®é¢˜ï¼š</p>\n<pre><code class=\"language-bash\"># é‡å¯Aspireåº”ç”¨\ncd Src/CodeSpirit.AppHost\ndotnet run --force\n\n# æŸ¥çœ‹Aspire Dashboardä¸­çš„æœåŠ¡çŠ¶æ€\n# è®¿é—® http://localhost:17109\n</code></pre>\n<h3 id=\"greptimedbå¯åŠ¨å¤±è´¥\">GreptimeDBå¯åŠ¨å¤±è´¥</h3>\n<pre><code class=\"language-bash\"># åœ¨Aspire Dashboardä¸­æŸ¥çœ‹GreptimeDBçŠ¶æ€\n# å¦‚æœå†…å­˜ä¸è¶³ï¼Œå¯ä»¥åœ¨Program.csä¸­è°ƒæ•´GreptimeDBé…ç½®\n\n# æ£€æŸ¥ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ\n# GreptimeDBéœ€è¦è‡³å°‘512MBå†…å­˜\n</code></pre>\n<h3 id=\"sslè¯ä¹¦é—®é¢˜\">SSLè¯ä¹¦é—®é¢˜</h3>\n<pre><code class=\"language-bash\"># ä¿¡ä»»å¼€å‘è¯ä¹¦\ndotnet dev-certs https --trust\n</code></pre>\n<h3 id=\"æ•°æ®åº“è¿æ¥é—®é¢˜\">æ•°æ®åº“è¿æ¥é—®é¢˜</h3>\n<pre><code class=\"language-bash\"># æ£€æŸ¥æ•°æ®åº“å®¹å™¨çŠ¶æ€ï¼ˆæ ¹æ®é…ç½®çš„æ•°æ®åº“ç±»å‹ï¼‰\ndocker ps | grep mysql    # MySQL\ndocker ps | grep sqlserver # SQL Server\n\n# é‡å¯æ•°æ®åº“å®¹å™¨\ndocker restart mysql      # MySQL\ndocker restart sqlserver  # SQL Server\n\n# æˆ–åœ¨Aspire Dashboardä¸­æŸ¥çœ‹æ•°æ®åº“çŠ¶æ€å’Œè¿æ¥ä¿¡æ¯\n</code></pre>\n<h3 id=\"å†…å­˜ä¸è¶³é—®é¢˜\">å†…å­˜ä¸è¶³é—®é¢˜</h3>\n<p>å¦‚æœç³»ç»Ÿå†…å­˜ä¸è¶³ï¼Œå¯ä»¥ï¼š</p>\n<ol>\n<li>å…³é—­ä¸å¿…è¦çš„åº”ç”¨ç¨‹åº</li>\n<li>è°ƒæ•´GreptimeDBå†…å­˜è®¾ç½®ï¼ˆåœ¨Program.csä¸­ï¼‰</li>\n<li>è€ƒè™‘å‡çº§ç³»ç»Ÿå†…å­˜åˆ°æ¨èé…ç½®ï¼ˆ16GBæ¨èï¼Œ32GBæ›´ä½³ï¼‰</li>\n</ol>\n<h3 id=\"llm-api-å¯†é’¥æœªé…ç½®\">LLM API å¯†é’¥æœªé…ç½®</h3>\n<p>å¦‚æœå¯åŠ¨æ—¶é‡åˆ°ä»¥ä¸‹é”™è¯¯æˆ–æœåŠ¡æ— æ³•æ­£å¸¸å¯åŠ¨ï¼š</p>\n<ul>\n<li>ConfigCenter æœåŠ¡å¯åŠ¨å¤±è´¥</li>\n<li>Web å‰ç«¯æ— æ³•è®¿é—® AI åŠŸèƒ½</li>\n<li>æ§åˆ¶å°æç¤ºç¼ºå°‘ LLM é…ç½®å‚æ•°</li>\n</ul>\n<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>\n<ol>\n<li>\n<p><strong>æ£€æŸ¥å‚æ•°æ˜¯å¦å·²é…ç½®</strong>ï¼š</p>\n<pre><code class=\"language-bash\"># æŸ¥çœ‹ User Secretsï¼ˆå¦‚æœä½¿ç”¨ï¼‰\ncd Src/CodeSpirit.AppHost\ndotnet user-secrets list\n</code></pre>\n</li>\n<li>\n<p><strong>é…ç½®ç¼ºå¤±çš„å‚æ•°</strong>ï¼š</p>\n<ul>\n<li>å‚è€ƒ <a href=\"#%E5%BF%85%E5%A1%AB%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE\" rel=\"noopener nofollow\">å¿…å¡«å‚æ•°é…ç½®</a> ç« èŠ‚</li>\n<li>ç¡®ä¿è‡³å°‘é…ç½®äº† <code>llm-ApiKey</code> å’Œ <code>ai-form-fill-llm-ApiKey</code> ä¸¤ä¸ªå¿…å¡«å‚æ•°</li>\n</ul>\n</li>\n<li>\n<p><strong>éªŒè¯é…ç½®</strong>ï¼š</p>\n<ul>\n<li>é‡å¯åº”ç”¨åï¼Œæ£€æŸ¥ Aspire Dashboard ä¸­çš„æœåŠ¡çŠ¶æ€</li>\n<li>æŸ¥çœ‹æœåŠ¡æ—¥å¿—ç¡®è®¤å‚æ•°æ˜¯å¦æ­£ç¡®åŠ è½½</li>\n</ul>\n</li>\n</ol>\n<blockquote>\n<p><strong>æç¤º</strong>: å¦‚æœæš‚æ—¶ä¸éœ€è¦ä½¿ç”¨ AI åŠŸèƒ½ï¼Œå¯ä»¥è®¾ç½®å ä½ç¬¦å€¼ï¼ˆå¦‚ <code>placeholder-key</code>ï¼‰ï¼Œä½†ç›¸å…³ AI åŠŸèƒ½å°†æ— æ³•æ­£å¸¸å·¥ä½œã€‚</p>\n</blockquote>\n<h2 id=\"å¼€å‘æ¨¡å¼\">å¼€å‘æ¨¡å¼</h2>\n<h3 id=\"çƒ­é‡è½½å¼€å‘\">çƒ­é‡è½½å¼€å‘</h3>\n<pre><code class=\"language-bash\"># å¯ç”¨çƒ­é‡è½½\ncd Src/CodeSpirit.AppHost\ndotnet watch run\n</code></pre>\n<h3 id=\"è°ƒè¯•æ¨¡å¼\">è°ƒè¯•æ¨¡å¼</h3>\n<p>åœ¨Visual Studioæˆ–VS Codeä¸­è®¾ç½®æ–­ç‚¹ï¼ŒæŒ‰F5å¯åŠ¨è°ƒè¯•ã€‚</p>\n<h2 id=\"ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²\">ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²</h2>\n<h3 id=\"ä½¿ç”¨kuberneteséƒ¨ç½²\">ä½¿ç”¨Kuberneteséƒ¨ç½²</h3>\n<p>é¡¹ç›®æä¾›äº†å®Œæ•´çš„Kuberneteséƒ¨ç½²æ–‡ä»¶ï¼š</p>\n<pre><code class=\"language-bash\"># éƒ¨ç½²åˆ°Kubernetesé›†ç¾¤\nkubectl apply -f k8s/\n\n# æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€\nkubectl get pods -n code-spirit-release\n</code></pre>\n<h3 id=\"ä½¿ç”¨dockeréƒ¨ç½²\">ä½¿ç”¨Dockeréƒ¨ç½²</h3>\n<pre><code class=\"language-bash\"># æ„å»ºæ‰€æœ‰æœåŠ¡çš„Dockeré•œåƒ\ndotnet publish CodeSpirit.sln -c Release\n\n# ä½¿ç”¨é¡¹ç›®æä¾›çš„Dockerfileæ„å»ºé•œåƒ\ndocker build -f Src/CodeSpirit.Web/Dockerfile -t codespirit-web:latest .\ndocker build -f Src/CodeSpirit.IdentityApi/Dockerfile -t codespirit-identity:latest .\n</code></pre>\n<h3 id=\"é…ç½®ç®¡ç†\">é…ç½®ç®¡ç†</h3>\n<p>ç”Ÿäº§ç¯å¢ƒé…ç½®é€šè¿‡ä»¥ä¸‹æ–¹å¼ç®¡ç†ï¼š</p>\n<ul>\n<li><strong>Kubernetes ConfigMap</strong>: å­˜å‚¨åº”ç”¨é…ç½®</li>\n<li><strong>Kubernetes Secret</strong>: å­˜å‚¨æ•æ„Ÿä¿¡æ¯</li>\n<li><strong>é…ç½®ä¸­å¿ƒ</strong>: åŠ¨æ€é…ç½®ç®¡ç†</li>\n</ul>\n<h2 id=\"ä¸‹ä¸€æ­¥\">ä¸‹ä¸€æ­¥</h2>\n<p>ç¯å¢ƒæ­å»ºå®Œæˆåï¼Œæ‚¨å¯ä»¥ï¼š</p>\n<ol>\n<li>ğŸ“– é˜…è¯» <a href=\"./%E9%A1%B9%E7%9B%AE%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1.md\" rel=\"noopener nofollow\" target=\"_blank\">é¡¹ç›®æ•´ä½“æ¶æ„è®¾è®¡</a></li>\n<li>ğŸ”§ äº†è§£ <a href=\"./CodeSpirit.Core%E6%A0%B8%E5%BF%83%E6%A1%86%E6%9E%B6.md\" rel=\"noopener nofollow\" target=\"_blank\">CodeSpirit.Coreæ ¸å¿ƒæ¡†æ¶</a></li>\n<li>ğŸ“‹ æŸ¥çœ‹ <a href=\"./%E6%80%BB%E4%BD%93%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB%E8%AF%B4%E6%98%8E.md\" rel=\"noopener nofollow\" target=\"_blank\">æ€»ä½“æŠ€æœ¯ä½“ç³»è¯´æ˜</a></li>\n<li>ğŸ” å­¦ä¹  <a href=\"./CodeSpirit%E7%BB%9F%E4%B8%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E6%8C%87%E5%8D%97.md\" rel=\"noopener nofollow\" target=\"_blank\">ç»Ÿä¸€å¼‚å¸¸å¤„ç†æŒ‡å—</a></li>\n<li>ğŸ’» å‚è€ƒ <a href=\"./CRUD%E5%BC%80%E5%8F%91%E7%A4%BA%E4%BE%8B.md\" rel=\"noopener nofollow\" target=\"_blank\">CRUDå¼€å‘ç¤ºä¾‹</a> å¼€å§‹å¼€å‘</li>\n</ol>\n<h2 id=\"è·å–å¸®åŠ©\">è·å–å¸®åŠ©</h2>\n<p>å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·å‚è€ƒï¼š</p>\n<ul>\n<li><a href=\"https://github.com/your-org/code-spirit/issues\" rel=\"noopener nofollow\" target=\"_blank\">GitHub Issues</a></li>\n<li><a href=\"https://github.com/your-org/code-spirit/wiki\" rel=\"noopener nofollow\" target=\"_blank\">é¡¹ç›®Wiki</a></li>\n<li><a href=\"https://github.com/your-org/code-spirit/discussions\" rel=\"noopener nofollow\" target=\"_blank\">è®¨è®ºåŒº</a></li>\n</ul>\n<p>ç¥æ‚¨å¼€å‘æ„‰å¿«ï¼ğŸš€</p>\n\n</div>\n<div id=\"MySignature\">\n    ä½œè€…ï¼š<a href=\"http://www.cnblogs.com/codelove/\" target=\"_blank\">é›ªé›</a><br />å‡ºå¤„ï¼š<a href=\"http://www.cnblogs.com/codelove/\" target=\"_blank\">http://www.cnblogs.com/codelove/</a>\n<br />å¦‚æœå–œæ¬¢ä½œè€…çš„æ–‡ç« ï¼Œè¯·å…³æ³¨ã€CodeSpirit-ç çµã€‘å…¬ä¼—å·ä»¥ä¾¿ç¬¬ä¸€æ—¶é—´è·å¾—æœ€æ–°å†…å®¹ã€‚æœ¬æ–‡ç‰ˆæƒå½’ä½œè€…æ‰€æœ‰ï¼Œæ¬¢è¿è½¬è½½ï¼Œä½†æœªç»ä½œè€…åŒæ„å¿…é¡»ä¿ç•™æ­¤æ®µå£°æ˜ï¼Œä¸”åœ¨æ–‡ç« é¡µé¢æ˜æ˜¾ä½ç½®ç»™å‡ºåŸæ–‡è¿æ¥ï¼Œå¦åˆ™ä¿ç•™è¿½ç©¶æ³•å¾‹è´£ä»»çš„æƒåˆ©ã€‚<br /><b>é™å¬é¸Ÿè¯­èŠ±é¦™ï¼Œæ¼«èµäº‘å·äº‘èˆ’ã€‚</b>\n<br />\n<img height=\"100\" src=\"https://images.cnblogs.com/cnblogs_com/codelove/315887/o_251224070213_%E5%85%AC%E4%BC%97%E5%8F%B7.jpg\" width=\"100\" />\n</div>\n<div class=\"clear\"></div>\n\n\t\t</div>\n\t\t<div class=\"postDesc\">posted @ \n<span id=\"post-date\">2025-12-29 15:07</span>&nbsp;\n<a href=\"https://www.cnblogs.com/codelove\">é›ªé›</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">137</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">2</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "æ–°ç‰ˆMOSï¼ˆMy Oracle Supportï¼‰ä¸»è¦å˜åŒ–",
      "link": "https://www.cnblogs.com/jyzhao/p/19415968/xin-banmosmy-oracle-support-zhu-yao-bian-hua",
      "published": "",
      "description": "<a name=\"top\"></a>\n    <h2><a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/jyzhao/p/19415968/xin-banmosmy-oracle-support-zhu-yao-bian-hua\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2025-12-29 15:01\">\n    <span>æ–°ç‰ˆMOSï¼ˆMy Oracle Supportï¼‰ä¸»è¦å˜åŒ–</span>\n    \n\n</a>\n</h2>\n    <small>\n<span id=\"post-date\">2025-12-29 15:01</span>&nbsp;\n<a href=\"https://www.cnblogs.com/jyzhao\">AlfredZhao</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">63</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</small>\n    <div class=\"entry\">\n        <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<p>æœ¬æœˆ My Oracle Support åšäº†å…¨é¢çš„å‡çº§ã€‚Oracle ç¡¬ä»¶ã€è½¯ä»¶åŠæ‰˜ç®¡äº‘æœåŠ¡çš„æ”¯æŒä¹Ÿå…¨éƒ¨è¿ç§»è‡³å…¨æ–°çš„æ”¯æŒå¹³å°ã€‚æ‰€æœ‰ SR çš„åˆ›å»ºã€æ›´æ–°ä¸ç®¡ç†æ“ä½œä¹Ÿéƒ½å°†åœ¨è¿™ä¸€æ–°å¹³å°ä¸Šå®Œæˆï¼ŒåŸæ¥çš„ç³»ç»Ÿå°†ä¸å†ä½¿ç”¨ã€‚</p>\n<p>å…³äºæ–°ç‰ˆMOSï¼Œå¾ˆå¤šæ—©å·²ç†Ÿæ‚‰å¤šå¹´è€ç‰ˆæœ¬MOSçš„ä»ä¸šè€…æœ‰äº›æ‹…å¿ƒï¼Œå®é™…ä¸Šï¼Œæ–°ç‰ˆå¹¶æ²¡æœ‰å¢åŠ ä»»ä½•ä½¿ç”¨éš¾åº¦ï¼Œåè€Œæ˜¯æå¤§åœ°é™ä½äº†MOSä½¿ç”¨é—¨æ§›ã€‚</p>\n<p>ä½†è¿˜æ˜¯æœ‰ä¸€äº›ä¼˜åŒ–é¡¹å¯èƒ½ä¼šè®©è€ç”¨æˆ·åœ¨åˆšå¼€å§‹æ¥è§¦æ–°ç‰ˆçš„æ—¶å€™æœ‰äº›é™Œç”Ÿï¼Œè¿™é‡Œåˆ—å‡ºæ¥è®©å¤§å®¶æå‰æ³¨æ„ä¸‹ï¼Œåšåˆ°å¿ƒä¸­æœ‰æ•°ï¼š</p>\n<h2 id=\"01--mosçŸ¥è¯†åº“ä¸­çš„æ–‡ç« å·å‘½åé£æ ¼æ”¹å˜\">01 | MOSçŸ¥è¯†åº“ä¸­çš„æ–‡ç« å·å‘½åé£æ ¼æ”¹å˜</h2>\n<p>æ–°ç‰ˆæ˜¯<code>KB+ä¸€ç»„æ•°å­—</code>ï¼›æ—§ç‰ˆæ˜¯<code>æ•°å­—.æ•°å­—</code>æ ¼å¼ã€‚</p>\n<p>ä½†æ˜¯ç¬”è€…äº²æµ‹å¯¹äºæœ‰äº›æ¯”è¾ƒå¸¸ç”¨çš„æ–‡æ¡£æ˜¯å¯ä»¥é€šè¿‡æ—§ç‰ˆæœç´¢åˆ°çš„ï¼Œä½†è¿˜æ˜¯å»ºè®®ç†Ÿæ‚‰æ–°ç‰ˆçš„å‘½åé£æ ¼ã€‚</p>\n<p>æ¯”å¦‚ç†Ÿæ‚‰Exadataçš„å°ä¼™ä¼´éƒ½è€³ç†Ÿèƒ½è¯¦çš„ä¸€ç¯‡æ–‡æ¡£å·ï¼š<code>888828.1</code></p>\n<p>åœ¨æ–°ç‰ˆæœç´¢ä¹Ÿèƒ½æ£€ç´¢åˆ°ï¼Œæ–°ç‰ˆç»™å®ƒçš„ç¼–å·å°±æ˜¯ <code>KB153930</code></p>\n<p><img alt=\"\" src=\"https://img2024.cnblogs.com/blog/635610/202512/635610-20251229150101685-1968954989.jpg\" /></p>\n<p>æ‰“å¼€åï¼Œä¹Ÿå¯ä»¥çœ‹åˆ°é‡Œé¢ä¼šè¯´æ˜å°±æ˜¯å¯¹åº”ä¹‹å‰çš„ 888828.1ï¼š</p>\n<p><img alt=\"\" src=\"https://img2024.cnblogs.com/blog/635610/202512/635610-20251229150101698-2096446677.jpg\" /></p>\n<h2 id=\"02--mosä¸‹è½½è¡¥ä¸å…¥å£æ›´åŠ ä¾¿åˆ©\">02 | MOSä¸‹è½½è¡¥ä¸å…¥å£æ›´åŠ ä¾¿åˆ©</h2>\n<p>ä¹‹å‰ç³»ç»Ÿä¸‹è½½è¡¥ä¸ä»‹è´¨æ—¶ï¼Œå¾ˆå¤šæ–°æ‰‹ç”šè‡³éƒ½æ‰¾ä¸åˆ°åˆé€‚çš„å…¥å£ã€‚ç°åœ¨æ–°ç‰ˆå˜å¾—éå¸¸ç®€å•ï¼Œåœ¨ä¸»é¡µé¢è¿™é‡Œçš„æœç´¢æ¡†ç›´æ¥é€‰æ‹©è¡¥ä¸è¿™ä¸ªåˆ†ç±»ã€‚</p>\n<p><img alt=\"\" src=\"https://img2024.cnblogs.com/blog/635610/202512/635610-20251229150101696-686065035.jpg\" /></p>\n<p>å°±ä¼šå¼¹å‡ºçª—å£ï¼Œå¯ä»¥æŒ‰éœ€è¾“å…¥æ‰€éœ€è¡¥ä¸ä¿¡æ¯ï¼ŒApplyå³å¯çœ‹åˆ°å¯¹åº”çš„å…¥å£ï¼š</p>\n<p><img alt=\"\" src=\"https://img2024.cnblogs.com/blog/635610/202512/635610-20251229150101584-539479973.jpg\" /></p>\n<h2 id=\"03--srå‰ç¼€æ•°å­—æ”¹å˜ä¸º4-å¼€å¤´\">03 | SRå‰ç¼€æ•°å­—æ”¹å˜ä¸º4-å¼€å¤´</h2>\n<p>ä¹‹å‰çš„SRå·ç éƒ½æ˜¯<code>3-</code>å¼€å¤´åŠ ä¸€æ®µæ•°å­—ï¼Œç°åœ¨æ˜¯<code>4-</code>å¼€å¤´åŠ ä¸€æ®µæ•°å­—ï¼Œå› ä¸ºç¬”è€…çš„è´¦å·æ²¡æœ‰åˆ›å»ºä»»ä½•SRï¼Œæ‰€ä»¥çœ‹ä¸åˆ°è¿™ä¸ªå˜åŒ–ã€‚æœ‰èƒ½çœ‹SRæƒé™çš„å°ä¼™ä¼´å¯ä»¥å¸®å¿™ç¡®è®¤ä¸‹ï¼Œæ¬¢è¿ç•™è¨€ã€‚</p>\n<h2 id=\"04--ä¿®æ”¹è´¦æˆ·ä¿¡æ¯æ—¶éœ€æ³¨æ„å®‰å…¨pin\">04 | ä¿®æ”¹è´¦æˆ·ä¿¡æ¯æ—¶éœ€æ³¨æ„å®‰å…¨PIN</h2>\n<p>åœ¨ è´¦æˆ· -&gt; é¦–é€‰é¡¹ä¸‹é¢ï¼Œå¡«å†™è´¦å·ä¿¡æ¯æ—¶ï¼Œæœ‰ä¸€ä¸ª <code>å®‰å…¨PIN</code> æ®è¯´åœ¨SRç”µè¯æ²Ÿé€šè¿‡ç¨‹ä¸­ï¼Œåå°ä¼šè¦æ±‚ä½ æä¾›è¿™ä¸ªç æ‰å¯ä»¥ã€‚è¿™æ˜¯ä¸€ä¸ªåŠ å¼ºå®‰å…¨æ€§çš„è€ƒè™‘ã€‚ç¬”è€…æ²¡æœ‰è¿™ä¸ªéœ€æ±‚ï¼Œæœ‰è¿™ä¸ªéœ€æ±‚çš„å°ä¼™ä¼´ä¹Ÿå¯ä»¥å¸®å¿™ç¡®è®¤ä¸‹äº‹å®æ˜¯å¦å¦‚æ­¤ã€‚</p>\n<p>å¦å¤–ï¼ŒåŸå‚å·¥ç¨‹å¸ˆä¸ºæ­¤ä¸“é—¨å½•åˆ¶è¿‡ä¸€æ®µè¯¦ç»†çš„ä¸­æ–‡ä»‹ç»è§†é¢‘ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥ç›´æ¥ç™»å½•æ–°ç‰ˆMOSï¼Œæœç´¢ <code>KB822414</code> çœ‹åˆ°è¿™ç¯‡ä¸­æ–‡çš„æ–‡ç« åŠè§†é¢‘ã€‚</p>\n<p>å› ä¸ºè¿™æ˜¯ä¸€ç¯‡ä¸­æ–‡çš„æ–‡æ¡£ï¼Œå¦‚æœé»˜è®¤æŸ¥ä¸åˆ°ï¼Œæ³¨æ„æœç´¢è¯­è¨€åˆ‡æ¢æˆä¸­æ–‡å³å¯ã€‚</p>\n<p><img alt=\"\" src=\"https://img2024.cnblogs.com/blog/635610/202512/635610-20251229150101687-372899130.jpg\" /></p>\n\n</div>\n<div id=\"MySignature\">\n    <a href=\"https://www.cnblogs.com/jyzhao/\" target=\"_blank\">AlfredZhao</a>Â©ç‰ˆæƒæ‰€æœ‰ã€Œä»Oracleèµ·èˆªï¼Œé¢†ç•¥ç²¾å½©çš„ITæŠ€æœ¯ã€‚ã€<br />\nè½¬è½½è¯·æ³¨æ˜åŸæ–‡é“¾æ¥ï¼š<a href=\"https://www.cnblogs.com/jyzhao/p/19415968/xin-banmosmy-oracle-support-zhu-yao-bian-hua\" target=\"_blank\">https://www.cnblogs.com/jyzhao/p/19415968/xin-banmosmy-oracle-support-zhu-yao-bian-hua</a>\n<hr />\n<div style=\"text-align: center; margin-top: 30px;\">\n  <p style=\"font-size: 14px; color: #555;\">\n    ğŸ‘‹ æ„Ÿè°¢é˜…è¯»ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å· <b>ã€Œèµµé–å®‡ã€</b>\n  </p>\n  <img src=\"https://images.cnblogs.com/cnblogs_com/jyzhao/824234/o_250208075013_qrcode-zjy.jpg\" style=\"border: 1px solid #ddd; border-radius: 8px;\" width=\"160\" />\n</div>\n</div>\n<div class=\"clear\"></div>\n\n        <div class=\"clear\"></div>\n        \n</div>\n    <ul class=\"postmetadata\">\n        \n    </ul>"
    }
  ]
}