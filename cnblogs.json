{
  "title": "ä¸»é¡µ - åšå®¢å›­",
  "link": "https://www.cnblogs.com/",
  "description": "ä¸»é¡µ - åšå®¢å›­ RSS",
  "entries": [
    {
      "title": "Javaä¸­çº¿ç¨‹å®‰å…¨é—®é¢˜çš„åŸå› å’Œè§£å†³æ–¹æ¡ˆ",
      "link": "https://www.cnblogs.com/xi-yongqi/p/19468853",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n\t\t\t<a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/xi-yongqi/p/19468853\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-11 23:41\">\n    <span>Javaä¸­çº¿ç¨‹å®‰å…¨é—®é¢˜çš„åŸå› å’Œè§£å†³æ–¹æ¡ˆ</span>\n    \n\n</a>\n\n\t\t</h1>\n\t\t<div class=\"clear\"></div>\n\t\t<div class=\"postBody\">\n\t\t\t<div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h3 id=\"çº¿ç¨‹å®‰å…¨é—®é¢˜çš„æ ¸å¿ƒåŸå› \">çº¿ç¨‹å®‰å…¨é—®é¢˜çš„æ ¸å¿ƒåŸå› </h3>\n<ul>\n<li>çº¿ç¨‹å®‰å…¨é—®é¢˜æœ¬è´¨æ˜¯å¤šä¸ªçº¿ç¨‹å¹¶å‘è®¿é—®å…±äº«ä¸”å¯å˜çš„èµ„æºæ—¶ï¼Œæ“ä½œçš„åŸå­æ€§ã€å¯è§æ€§æˆ–æœ‰åºæ€§è¢«ç ´åï¼Œå¯¼è‡´ç¨‹åºæ‰§è¡Œç»“æœä¸ç¬¦åˆé¢„æœŸã€‚</li>\n</ul>\n<ol>\n<li>æ ¹æœ¬åŸå› ï¼šå…±äº«å¯å˜èµ„æº</li>\n</ol>\n<ul>\n<li>å…±äº«èµ„æºï¼šå¤šä¸ªçº¿ç¨‹éƒ½èƒ½è®¿é—®åˆ°çš„èµ„æºï¼ˆå¦‚æˆå‘˜å˜é‡ã€é™æ€å˜é‡ã€å…±äº«å†…å­˜åŒºåŸŸï¼‰ï¼›</li>\n<li>å¯å˜èµ„æºï¼šèµ„æºçš„çŠ¶æ€ï¼ˆå€¼ï¼‰å¯ä»¥è¢«ä¿®æ”¹ï¼ˆå¦‚intè®¡æ•°å™¨ã€HashMapçš„å…ƒç´ ï¼‰ï¼›</li>\n<li>ç»å…¸çš„i++ æ“ä½œã€‚å®ƒåœ¨åº•å±‚åˆ†ä¸ºâ€œè¯»å–-ä¿®æ”¹-å†™å…¥â€ä¸‰ä¸ªæ­¥éª¤ã€‚å¦‚æœä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è¯»å– i=1ï¼Œå„è‡ªåŠ 1åå†™å›ï¼Œç»“æœæ˜¯2è€Œä¸æ˜¯3ã€‚</li>\n</ul>\n<ol start=\"2\">\n<li>ç›´æ¥åŸå› ï¼šä¸‰å¤§ç‰¹æ€§è¢«ç ´å</li>\n</ol>\n<ul>\n<li>Javaå†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰å®šä¹‰çš„å¤šçº¿ç¨‹å¹¶å‘ä¸‰å¤§æ ¸å¿ƒç‰¹æ€§ï¼Œä»»ä½•ä¸€ä¸ªè¢«ç ´åéƒ½ä¼šå¼•å‘çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼š\n<ul>\n<li>åŸå­æ€§ï¼šä¸€ä¸ªæ“ä½œï¼ˆå¦‚count++ï¼‰åŒ…å«â€œè¯» - æ”¹ - å†™â€ä¸‰æ­¥ï¼ŒéåŸå­æ“ä½œä¼šè¢«å¤šçº¿ç¨‹äº¤é”™æ‰§è¡Œï¼›</li>\n<li>å¯è§æ€§ï¼šçº¿ç¨‹ä¿®æ”¹å…±äº«å˜é‡åï¼Œä¸ä¼šç«‹å³åŒæ­¥åˆ°ä¸»å†…å­˜ï¼Œå…¶ä»–çº¿ç¨‹è¯»å–çš„ä»æ˜¯æ—§å€¼ï¼›</li>\n<li>æœ‰åºæ€§ï¼šJVMçš„æŒ‡ä»¤é‡æ’åºä¼˜åŒ–ï¼Œä¼šå¯¼è‡´å¤šçº¿ç¨‹ä¸‹æ‰§è¡Œé¡ºåºæ··ä¹±ï¼ˆå¦‚æœªåŠ volatileçš„åŒé‡æ£€æŸ¥é”å•ä¾‹ï¼‰ã€‚</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"çº¿ç¨‹å®‰å…¨é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ\">çº¿ç¨‹å®‰å…¨é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ</h3>\n<ul>\n<li>æ ¸å¿ƒæ€è·¯ï¼šè¦ä¹ˆé¿å…å…±äº«å¯å˜èµ„æºï¼ˆä»æ ¹æºæ¶ˆé™¤é—®é¢˜ï¼‰ï¼Œè¦ä¹ˆæ§åˆ¶å¹¶å‘è®¿é—®è§„åˆ™ï¼ˆä¿è¯ä¸‰å¤§ç‰¹æ€§ï¼‰ã€‚</li>\n</ul>\n<h5 id=\"æ–¹æ¡ˆ1é¿å…å…±äº«å¯å˜èµ„æºä¼˜å…ˆæ¨è\">æ–¹æ¡ˆ1ï¼šé¿å…å…±äº«å¯å˜èµ„æºï¼ˆä¼˜å…ˆæ¨èï¼‰</h5>\n<ul>\n<li>æ ˆå°é—­ï¼ˆå±€éƒ¨å˜é‡ï¼‰ï¼šå±€éƒ¨å˜é‡å­˜å‚¨åœ¨çº¿ç¨‹ç§æœ‰æ ˆä¸­ï¼Œæ¯ä¸ªçº¿ç¨‹æœ‰ç‹¬ç«‹å‰¯æœ¬ï¼Œå¤©ç„¶çº¿ç¨‹å®‰å…¨ã€‚</li>\n</ul>\n<pre><code class=\"language-java\">public class StackClosedDemo {\n    // æ¯ä¸ªçº¿ç¨‹è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œéƒ½ä¼šåˆ›å»ºç‹¬ç«‹çš„countå‰¯æœ¬\n    public void calculate() {\n        int count = 0;\n        count++; // æ— çº¿ç¨‹å®‰å…¨é—®é¢˜\n        System.out.println(Thread.currentThread().getName() + \": \" + count);\n    }\n\n    public static void main(String[] args) {\n        StackClosedDemo demo = new StackClosedDemo();\n        // 10ä¸ªçº¿ç¨‹å„è‡ªæ“ä½œè‡ªå·±çš„å±€éƒ¨å˜é‡\n        for (int i = 0; i &lt; 10; i++) {\n            new Thread(demo::calculate, \"Thread-\" + i).start();\n        }\n    }\n}\n</code></pre>\n<ul>\n<li>ä¸å¯å˜å¯¹è±¡:å¯¹è±¡åˆ›å»ºåçŠ¶æ€ä¸å¯ä¿®æ”¹ï¼ˆå¦‚Stringã€Integerï¼‰ï¼Œå³ä½¿å…±äº«ä¹Ÿæ— æ³•ä¿®æ”¹å€¼ã€‚</li>\n</ul>\n<pre><code class=\"language-java\">// è‡ªå®šä¹‰ä¸å¯å˜ç±»ï¼ˆfinalç±»+finalæˆå‘˜å˜é‡+æ— setterï¼‰\npublic final class ImmutableUser {\n    private final String name;\n    private final int age;\n\n    public ImmutableUser(String name, int age) {\n        this.name = name;\n        this.age = age;\n    }\n\n    // ä»…æä¾›getterï¼Œæ— setter\n    public String getName() { return name; }\n    public int getAge() { return age; }\n}\n</code></pre>\n<ul>\n<li>ThreadLocalï¼ˆçº¿ç¨‹æœ¬åœ°å­˜å‚¨ï¼‰:ä¸ºæ¯ä¸ªçº¿ç¨‹æä¾›ç‹¬ç«‹çš„å˜é‡å‰¯æœ¬ï¼Œçº¿ç¨‹æ“ä½œè‡ªèº«å‰¯æœ¬ï¼Œäº’ä¸å¹²æ‰°ã€‚</li>\n</ul>\n<pre><code class=\"language-java\">public class ThreadLocalDemo {\n    // æ¯ä¸ªçº¿ç¨‹æœ‰ç‹¬ç«‹çš„Integerå‰¯æœ¬ï¼Œåˆå§‹å€¼ä¸º0\n    private static ThreadLocal&lt;Integer&gt; threadLocal = ThreadLocal.withInitial(() -&gt; 0);\n\n    public void increment() {\n        threadLocal.set(threadLocal.get() + 1);\n        System.out.println(Thread.currentThread().getName() + \": \" + threadLocal.get());\n    }\n\n    public static void main(String[] args) {\n        ThreadLocalDemo demo = new ThreadLocalDemo();\n        // 3ä¸ªçº¿ç¨‹å„è‡ªæ“ä½œè‡ªå·±çš„å‰¯æœ¬\n        for (int i = 0; i &lt; 3; i++) {\n            new Thread(() -&gt; {\n                for (int j = 0; j &lt; 2; j++) {\n                    demo.increment();\n                }\n            }, \"Thread-\" + i).start();\n        }\n    }\n}\n// è¾“å‡ºï¼ˆé¡ºåºå¯èƒ½ä¸åŒï¼‰ï¼š\n// Thread-0: 1ã€Thread-0: 2\n// Thread-1: 1ã€Thread-1: 2\n// Thread-2: 1ã€Thread-2: 2\n</code></pre>\n<h4 id=\"æ–¹æ¡ˆ2åŒæ­¥åŠ é”æ§åˆ¶å¹¶å‘è®¿é—®\">æ–¹æ¡ˆ2ï¼šåŒæ­¥/åŠ é”ï¼ˆæ§åˆ¶å¹¶å‘è®¿é—®ï¼‰</h4>\n<h5 id=\"äº’æ–¥åŒæ­¥é˜»å¡åŒæ­¥è¿™æ˜¯æœ€å¸¸è§çš„æ–¹æ¡ˆé€šè¿‡åŠ é”æ¥ä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ“ä½œèµ„æº\">äº’æ–¥åŒæ­¥ï¼ˆé˜»å¡åŒæ­¥ï¼‰:è¿™æ˜¯æœ€å¸¸è§çš„æ–¹æ¡ˆï¼Œé€šè¿‡åŠ é”æ¥ä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ“ä½œèµ„æºã€‚</h5>\n<ul>\n<li>synchronized å…³é”®å­—ï¼šJava åŸç”Ÿæ”¯æŒï¼Œä½¿ç”¨ç®€å•ã€‚å¯ä¿®é¥°æ–¹æ³•æˆ–ä»£ç å—ã€‚å±äºä¸å¯ä¸­æ–­çš„é”ã€‚</li>\n</ul>\n<pre><code class=\"language-java\">public class SynchronizedDemo {\n    private int count = 0;\n\n    // åŒæ­¥å®ä¾‹æ–¹æ³•ï¼Œé”æ˜¯thiså¯¹è±¡\n    public synchronized void increment() {\n        count++;\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        SynchronizedDemo demo = new SynchronizedDemo();\n        // 1000ä¸ªçº¿ç¨‹æ‰§è¡Œincrement\n        for (int i = 0; i &lt; 1000; i++) {\n            new Thread(demo::increment).start();\n        }\n        Thread.sleep(1000);\n        System.out.println(\"æœ€ç»ˆcountï¼š\" + demo.count); // è¾“å‡º1000\n    }\n}\n</code></pre>\n<h5 id=\"reentrantlockæ˜¾å¼é”æ¯”synchronizedçµæ´»å¯ä¸­æ–­å¯è¶…æ—¶å…¬å¹³é”éœ€æ‰‹åŠ¨é‡Šæ”¾é”å¿…é¡»åœ¨finallyä¸­\">ReentrantLockï¼ˆæ˜¾å¼é”ï¼‰:æ¯”synchronizedçµæ´»ï¼ˆå¯ä¸­æ–­ã€å¯è¶…æ—¶ã€å…¬å¹³é”ï¼‰ï¼Œéœ€æ‰‹åŠ¨é‡Šæ”¾é”ï¼ˆå¿…é¡»åœ¨finallyä¸­ï¼‰ã€‚</h5>\n<pre><code class=\"language-java\">import java.util.concurrent.locks.Lock;\nimport java.util.concurrent.locks.ReentrantLock;\n\npublic class ReentrantLockDemo {\n    private int count = 0;\n    private Lock lock = new ReentrantLock(); // é»˜è®¤éå…¬å¹³é”\n\n    public void increment() {\n        lock.lock(); // åŠ é”\n        try {\n            count++;\n        } finally {\n            lock.unlock(); // é‡Šæ”¾é”ï¼Œé¿å…æ­»é”\n        }\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        ReentrantLockDemo demo = new ReentrantLockDemo();\n        for (int i = 0; i &lt; 1000; i++) {\n            new Thread(demo::increment).start();\n        }\n        Thread.sleep(1000);\n        System.out.println(\"æœ€ç»ˆcountï¼š\" + demo.count); // è¾“å‡º1000\n    }\n}\n</code></pre>\n<h4 id=\"æ–¹æ¡ˆ3volatileå…³é”®å­—ä¿è¯å¯è§æ€§æœ‰åºæ€§\">æ–¹æ¡ˆ3ï¼švolatileå…³é”®å­—ï¼ˆä¿è¯å¯è§æ€§/æœ‰åºæ€§ï¼‰</h4>\n<ul>\n<li>ä¿è¯å¯è§æ€§ï¼šå¼ºåˆ¶å¤±æ•ˆå·¥ä½œå†…å­˜ï¼Œç›´æ¥è¯»å†™ä¸»å†…å­˜ã€‚</li>\n<li>ä¿è¯æœ‰åºæ€§ï¼šç¦æ­¢æŒ‡ä»¤é‡æ’åºã€‚</li>\n<li>æ³¨æ„ï¼šå®ƒä¸ä¿è¯åŸå­æ€§ï¼ˆä¸èƒ½è§£å†³i++é—®é¢˜ï¼‰ã€‚</li>\n</ul>\n<pre><code class=\"language-java\">public class VolatileDemo {\n    private volatile boolean stop = false; // ä¿è¯å¯è§æ€§å’Œæœ‰åºæ€§\n\n    public void runThread() {\n        new Thread(() -&gt; {\n            int i = 0;\n            while (!stop) { // èƒ½ç«‹å³æ„ŸçŸ¥stopçš„ä¿®æ”¹\n                i++;\n            }\n            System.out.println(\"çº¿ç¨‹åœæ­¢ï¼Œi=\" + i);\n        }).start();\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        VolatileDemo demo = new VolatileDemo();\n        demo.runThread();\n        Thread.sleep(3000);\n        demo.stop = true; // ä¿®æ”¹åï¼Œçº¿ç¨‹ç«‹å³åœæ­¢\n    }\n}\n</code></pre>\n\n</div>\n<div class=\"clear\"></div>\n\n\t\t</div>\n\t\t<div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-11 23:41</span>&nbsp;\n<a href=\"https://www.cnblogs.com/xi-yongqi\">æˆ‘ä¼šæ›¿é£å»</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">0</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "é£ä¹¦ .NET SDK äº‹ä»¶å¤„ç†çš„å¹‚ç­‰æ€§ä¸å»é‡æœºåˆ¶",
      "link": "https://www.cnblogs.com/mudtools/p/19469184",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/mudtools/p/19469184\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-11 23:00\">\n    <span>é£ä¹¦ .NET SDK äº‹ä»¶å¤„ç†çš„å¹‚ç­‰æ€§ä¸å»é‡æœºåˆ¶</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<blockquote>\n<p>é£ä¹¦äº‹ä»¶å¤„ç†è¿‡ç¨‹ä¸­å¦‚ä½•è®©ä½ çš„åº”ç”¨ä¸å†\"é‡å¤åŠ³åŠ¨\"ï¼Œå¦‚ä½•ç”¨ä¸‰å±‚é˜²æŠ¤ç­‘èµ·å®‰å…¨å¢™ï¼Œç»“åˆå†…å­˜ä¸ Redis åŒé‡ä¿éšœï¼Œè®©ä½ çš„é£ä¹¦åº”ç”¨ç¨³å¦‚ç£çŸ³â€”â€”ä¸å†é‡å¤å¤„ç†ï¼Œå‘Šåˆ«æ··ä¹±çŠ¶æ€ã€‚</p>\n</blockquote>\n<hr />\n<h2 id=\"ä¸ºä»€ä¹ˆéœ€è¦å»é‡\">ä¸ºä»€ä¹ˆéœ€è¦\"å»é‡\"ï¼Ÿ</h2>\n<p>æƒ³è±¡ä¸€ä¸‹è¿™æ ·çš„åœºæ™¯ï¼š</p>\n<p>ä½ åœ¨é£ä¹¦é‡Œæ”¶åˆ°ä¸€æ¡æ¶ˆæ¯ï¼Œåº”ç”¨æ”¶åˆ°é€šçŸ¥ååˆ›å»ºäº†å¾…åŠäº‹é¡¹ã€‚ä½†å› ä¸ºç½‘ç»œä¸ç¨³å®šï¼Œé£ä¹¦ä»¥ä¸ºä½ æ²¡æ”¶åˆ°ï¼Œåˆå‘äº†ä¸€éåŒæ ·çš„é€šçŸ¥â€”â€”ç»“æœå‘¢ï¼Ÿä½ çš„åº”ç”¨åˆåˆ›å»ºäº†ä¸€æ¬¡å¾…åŠï¼ŒåŒä¸€ä¸ªä»»åŠ¡å‡ºç°äº†ä¸¤æ¬¡ã€‚</p>\n<p>è¿™å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„\"é‡å¤å¤„ç†\"é—®é¢˜ã€‚</p>\n<hr />\n<h3 id=\"ä»€ä¹ˆæ—¶å€™ä¼šå‡ºç°è¿™ç§æƒ…å†µ\">ä»€ä¹ˆæ—¶å€™ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼Ÿ</h3>\n<p>åœ¨é£ä¹¦äº‹ä»¶é©±åŠ¨çš„ä¸–ç•Œé‡Œï¼Œä»¥ä¸‹æƒ…å†µéƒ½å¯èƒ½å¯¼è‡´<strong>åŒä¸€äº‹ä»¶è¢«å¤šæ¬¡é€è¾¾</strong>ï¼š</p>\n<ul>\n<li>ğŸ“¡ <strong>ç½‘ç»œæ³¢åŠ¨</strong>ï¼šé£ä¹¦æœåŠ¡å™¨æ²¡æ”¶åˆ°ä½ çš„ç¡®è®¤ï¼Œäºæ˜¯é‡å‘</li>\n<li>ğŸ”„ <strong>æœåŠ¡é‡å¯</strong>ï¼šå†…å­˜æ¸…ç©ºï¼Œä¹‹å‰çš„äº‹ä»¶åˆæ¥äº†</li>\n<li>ğŸ‘¥ <strong>å¤šå®ä¾‹è¿è¡Œ</strong>ï¼šå¤šä¸ªå®ä¾‹åŒæ—¶æ”¶åˆ°åŒä¸€äº‹ä»¶</li>\n<li>ğŸ”Œ <strong>æ–­çº¿é‡è¿</strong>ï¼šWebSocket é‡è¿åå¯èƒ½é‡å¤æ¶ˆæ¯</li>\n</ul>\n<h3 id=\"çœŸå®æ¡ˆä¾‹ä¸€åˆ†é’Ÿå†…çš„æ··ä¹±\">çœŸå®æ¡ˆä¾‹ï¼šä¸€åˆ†é’Ÿå†…çš„æ··ä¹±</h3>\n<pre><code>æ—¶é—´çº¿ï¼š\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n09:00:00  é£ä¹¦æ¨é€ï¼šæ”¶åˆ°ä¸€æ¡æ–°æ¶ˆæ¯\n09:00:01  å®ä¾‹A æ¥æ”¶å¹¶å¤„ç† â†’ åˆ›å»ºå¾…åŠ âœ…\n09:00:05  é£ä¹¦æ²¡æ”¶åˆ°ç¡®è®¤ï¼Œå†æ¬¡æ¨é€\n09:00:06  å®ä¾‹B æ¥æ”¶å¹¶å¤„ç† â†’ åˆåˆ›å»ºå¾…åŠ âŒ\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n</code></pre>\n<p><strong>åæœæœ‰å¤šä¸¥é‡ï¼Ÿ</strong></p>\n<table>\n<thead>\n<tr>\n<th>é—®é¢˜</th>\n<th>å®é™…å½±å“</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ğŸ“‰ æ•°æ®é‡å¤</td>\n<td>ç”¨æˆ·æ”¶åˆ°ä¸¤æ¡ç›¸åŒçš„å¾…åŠ</td>\n</tr>\n<tr>\n<td>ğŸ’° èµ„é‡‘æŸå¤±</td>\n<td>è®¢å•é‡å¤æ‰£æ¬¾ï¼Œé€€é’±éƒ½é€€ä¸å®Œ</td>\n</tr>\n<tr>\n<td>ğŸ“§ éªšæ‰°ç”¨æˆ·</td>\n<td>åŒä¸€æ¡é€šçŸ¥å‘åæ¬¡</td>\n</tr>\n<tr>\n<td>ğŸ”„ çŠ¶æ€æ··ä¹±</td>\n<td>æ•°æ®åº“é‡Œè¯´\"å·²å¤„ç†\"ï¼Œå®é™…åªåšäº†ä¸€åŠ</td>\n</tr>\n</tbody>\n</table>\n<hr />\n<h2 id=\"ä¸‰å±‚é˜²æŠ¤åƒä¿å®‰ä¸€æ ·å±‚å±‚æŠŠå…³\">ä¸‰å±‚é˜²æŠ¤ï¼šåƒä¿å®‰ä¸€æ ·å±‚å±‚æŠŠå…³</h2>\n<p>Mud.Feishu SDK è®¾è®¡äº†ä¸€å¥—<strong>ä¸‰å±‚é€’è¿›å¼é˜²æŠ¤æœºåˆ¶</strong>ï¼Œå°±åƒå°åŒºçš„ä¸‰é“å²—å“¨ï¼Œä»å¤–åˆ°å†…å±‚å±‚æŠŠå…³ï¼Œç¡®ä¿ä¸ä¼šæœ‰\"åäºº\"ï¼ˆé‡å¤äº‹ä»¶ï¼‰æ··è¿›æ¥ã€‚</p>\n<div class=\"mermaid\">graph TB\n    subgraph AppLayer[\"åº”ç”¨å±‚å»é‡ï¼ˆä¸šåŠ¡é”®ï¼‰\"]\n        AppHandler[\"IdempotentFeishuEventHandler&lt;T&gt;\"]\n        AppDesc[\"åŸºäºä¸šåŠ¡ä¸»é”®ï¼ˆæ¶ˆæ¯IDã€è®¢å•IDç­‰ï¼‰å»é‡\"]\n    end\n\n    subgraph DispatchLayer[\"åˆ†å‘å±‚å»é‡ï¼ˆEventIdï¼‰\"]\n        EventDedup[\"IFeishuEventDeduplicator / IFeishuEventDistributedDeduplicator\"]\n        EventDesc[\"åŸºäºé£ä¹¦äº‹ä»¶IDå»é‡ï¼Œ24å°æ—¶çª—å£æœŸ\"]\n    end\n\n    subgraph ProtocolLayer[\"åè®®å±‚å»é‡ï¼ˆSeqID/Nonceï¼‰\"]\n        WS_Dedup[\"WebSocket: IFeishuSeqIDDeduplicator\"]\n        Webhook_Dedup[\"Webhook: IFeishuNonceDistributedDeduplicator\"]\n        ProtoDesc[\"åŸºäºæ¶ˆæ¯åºåˆ—å·å»é‡ï¼Œè¿‡æ»¤é‡å¤æ¶ˆæ¯\"]\n    end\n\n    AppHandler --&gt;|å¤„ç†å™¨å†…éƒ¨ä¸šåŠ¡é€»è¾‘| EventDedup\n    EventDedup --&gt;|äº‹ä»¶è·¯ç”±ä¸åˆ†å‘| WS_Dedup\n    EventDedup --&gt;|äº‹ä»¶è·¯ç”±ä¸åˆ†å‘| Webhook_Dedup\n\n    style AppLayer fill:#e1f5ff\n    style DispatchLayer fill:#fff4e1\n    style ProtocolLayer fill:#ffe1e1\n</div><h3 id=\"è¿™ä¸‰å±‚åˆ†åˆ«è´Ÿè´£ä»€ä¹ˆ\">è¿™ä¸‰å±‚åˆ†åˆ«è´Ÿè´£ä»€ä¹ˆï¼Ÿ</h3>\n<p>å¯ä»¥æŠŠè¿™ä¸‰å±‚æƒ³è±¡æˆå·¥å‚æµæ°´çº¿ä¸Šçš„ä¸‰ä¸ªè´¨æ£€å‘˜ï¼š</p>\n<table>\n<thead>\n<tr>\n<th>è´¨æ£€å‘˜</th>\n<th>æ£€æŸ¥ä»€ä¹ˆï¼Ÿ</th>\n<th>åœ¨å“ªæ£€æŸ¥ï¼Ÿ</th>\n<th>è¿‡æ»¤èŒƒå›´</th>\n<th>é€‚åˆä»€ä¹ˆæ—¶å€™ç”¨ï¼Ÿ</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>åè®®å±‚</strong></td>\n<td>æ¶ˆæ¯ç¼–å·ï¼ˆSeqIDï¼‰</td>\n<td>æ¶ˆæ¯åˆšåˆ°è¾¾æ—¶</td>\n<td>æ¯æ¡æ¶ˆæ¯</td>\n<td>è¿‡æ»¤ç½‘ç»œé‡å¤ï¼Œæœ€å¤–å±‚é˜²æŠ¤</td>\n</tr>\n<tr>\n<td><strong>åˆ†å‘å±‚</strong></td>\n<td>äº‹ä»¶IDï¼ˆEventIdï¼‰</td>\n<td>äº‹ä»¶åˆ†å‘å‰</td>\n<td>æ¯ä¸ªäº‹ä»¶</td>\n<td>è¿‡æ»¤é£ä¹¦é‡å‘ï¼Œä¸­é—´å±‚é˜²æŠ¤</td>\n</tr>\n<tr>\n<td><strong>åº”ç”¨å±‚</strong></td>\n<td>ä¸šåŠ¡é”®ï¼ˆTaskIdï¼‰</td>\n<td>ä¸šåŠ¡å¤„ç†æ—¶</td>\n<td>æ¯æ¬¡ä¸šåŠ¡æ“ä½œ</td>\n<td>é˜²æ­¢é€»è¾‘é‡å¤ï¼Œæœ€åä¸€é“é˜²çº¿</td>\n</tr>\n</tbody>\n</table>\n<hr />\n<h2 id=\"åˆ†å‘å±‚äº‹ä»¶çš„èº«ä»½è¯æ£€æŸ¥\">åˆ†å‘å±‚ï¼šäº‹ä»¶çš„\"èº«ä»½è¯æ£€æŸ¥\"</h2>\n<p>è¿™æ˜¯æœ€æ ¸å¿ƒçš„ä¸€å±‚ï¼Œå°±åƒé—¨å£çš„ä¿å®‰ï¼Œæ¯ä¸ªè¿›æ¥çš„äº‹ä»¶éƒ½è¦å…ˆå‡ºç¤ºèº«ä»½è¯ï¼ˆEventIdï¼‰ï¼Œä¿å®‰æŸ¥è¿‡è®°å½•åæ‰èƒ½æ”¾è¡Œã€‚</p>\n<pre><code class=\"language-csharp\">public interface IFeishuEventDeduplicator\n{\n    /// &lt;summary&gt;\n    /// å°è¯•æ ‡è®°äº‹ä»¶ä¸ºå¤„ç†ä¸­\n    /// &lt;/summary&gt;\n    /// &lt;returns&gt;\n    /// true: å·²å¤„ç†æˆ–æ­£åœ¨å¤„ç†ä¸­ï¼ˆè·³è¿‡ï¼‰\n    /// false: æ–°äº‹ä»¶ï¼ˆç»§ç»­å¤„ç†ï¼‰\n    /// &lt;/returns&gt;\n    bool TryMarkAsProcessing(string eventId);\n\n    /// &lt;summary&gt;\n    /// æ ‡è®°äº‹ä»¶ä¸ºå·²å®Œæˆ\n    /// &lt;/summary&gt;\n    void MarkAsCompleted(string eventId);\n\n    /// &lt;summary&gt;\n    /// å›æ»šå¤„ç†ä¸­çŠ¶æ€ï¼ˆå¼‚å¸¸æ—¶è°ƒç”¨ï¼‰\n    /// &lt;/summary&gt;\n    void RollbackProcessing(string eventId);\n\n    /// &lt;summary&gt;\n    /// æ£€æŸ¥äº‹ä»¶æ˜¯å¦å·²å¤„ç†\n    /// &lt;/summary&gt;\n    bool IsProcessed(string eventId);\n}\n</code></pre>\n<h3 id=\"äº‹ä»¶çš„ä¸€ç”Ÿä¸‰ç§çŠ¶æ€æµè½¬\">äº‹ä»¶çš„ä¸€ç”Ÿï¼šä¸‰ç§çŠ¶æ€æµè½¬</h3>\n<p>æ¯ä¸ªäº‹ä»¶åœ¨å»é‡ç³»ç»Ÿé‡Œéƒ½åƒè¿‡å®‰æ£€ä¸€æ ·ï¼Œç»å†ä¸‰ç§çŠ¶æ€çš„å˜åŒ–ï¼š</p>\n<div class=\"mermaid\">stateDiagram-v2\n    [*] --&gt; Pending: æ”¶åˆ°æ–°äº‹ä»¶\n    Pending --&gt; Processing: TryMarkAsProcessing()\n    Processing --&gt; Completed: å¤„ç†æˆåŠŸ\n    Processing --&gt; Pending: è¶…æ—¶/å¼‚å¸¸ï¼ˆRollbackï¼‰\n    Completed --&gt; Pending: ç¼“å­˜è¿‡æœŸï¼ˆ24å°æ—¶åï¼‰\n\n    note right of Processing\n        å¤„ç†ä¸­è¶…æ—¶ï¼ˆé»˜è®¤5åˆ†é’Ÿï¼‰\n        å…è®¸é‡æ–°å¤„ç†\n    end note\n\n    note right of Completed\n        24å°æ—¶åè‡ªåŠ¨æ¸…ç†\n        æ”¯æŒTTLé…ç½®\n    end note\n</div><h3 id=\"çœŸå®åœºæ™¯websocket-æ˜¯æ€ä¹ˆå»é‡çš„\">çœŸå®åœºæ™¯ï¼šWebSocket æ˜¯æ€ä¹ˆå»é‡çš„ï¼Ÿ</h3>\n<p>æ¥çœ‹çœ‹ WebSocket æ”¶åˆ°äº‹ä»¶ååšäº†ä»€ä¹ˆï¼ˆ<code>FeishuEventMessageHandler.cs#104-147</code>ï¼‰ï¼š</p>\n<pre><code class=\"language-csharp\">// 1. å»é‡æ£€æŸ¥\nbool isProcessing = false;\n\nif (_options.EnableDistributedDeduplication &amp;&amp; _distributedDeduplicator != null)\n{\n    // ä¼˜å…ˆä½¿ç”¨åˆ†å¸ƒå¼å»é‡ï¼ˆRedisï¼‰\n    isProcessing = await _distributedDeduplicator.TryMarkAsProcessedAsync(\n        eventData.EventId, \n        cancellationToken: cancellationToken);\n}\nelse if (_options.EnableEventDeduplication &amp;&amp; _deduplicator != null)\n{\n    // ä½¿ç”¨å†…å­˜å»é‡\n    isProcessing = _deduplicator.TryMarkAsProcessing(eventData.EventId);\n}\n\n// 2. è·³è¿‡å·²å¤„ç†äº‹ä»¶\nif (isProcessing)\n{\n    _logger.LogDebug(\"äº‹ä»¶ {EventId} å·²åœ¨å¤„ç†ä¸­æˆ–å·²å¤„ç†ï¼Œè·³è¿‡\", eventData.EventId);\n    return;\n}\n\n// 3. å¤„ç†äº‹ä»¶\ntry\n{\n    await _eventHandlerFactory.HandleEventParallelAsync(\n        eventData.EventType, \n        eventData, \n        cancellationToken);\n\n    // 4. å¤„ç†æˆåŠŸï¼Œæ ‡è®°ä¸ºå·²å®Œæˆ\n    if (_options.EnableEventDeduplication &amp;&amp; _deduplicator != null)\n    {\n        _deduplicator.MarkAsCompleted(eventData.EventId);\n    }\n}\ncatch (Exception ex)\n{\n    // 5. å¤„ç†å¤±è´¥ï¼Œå›æ»šçŠ¶æ€\n    if (_options.EnableEventDeduplication &amp;&amp; _deduplicator != null)\n    {\n        _deduplicator.RollbackProcessing(eventData.EventId);\n    }\n    throw;\n}\n</code></pre>\n<h3 id=\"æ–¹æ¡ˆä¸€å†…å­˜å»é‡é€‚åˆå¼€å‘å’Œå°è§„æ¨¡åº”ç”¨\">æ–¹æ¡ˆä¸€ï¼šå†…å­˜å»é‡ï¼ˆé€‚åˆå¼€å‘å’Œå°è§„æ¨¡åº”ç”¨ï¼‰</h3>\n<p><strong>å°±åƒåœ¨å¤§è„‘é‡Œè®°ç¬”è®°</strong>ï¼šæŠŠæ¯ä¸ªäº‹ä»¶IDè®°åœ¨å†…å­˜é‡Œï¼Œæ”¶åˆ°æ–°äº‹ä»¶æ—¶å…ˆæŸ¥æŸ¥ç¬”è®°ï¼Œå¦‚æœæœ‰å°±è·³è¿‡ã€‚</p>\n<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>\n<ul>\n<li>ğŸ§  <strong>å…¨é è„‘å­è®°</strong>ï¼šæ‰€æœ‰æ•°æ®å­˜åœ¨å†…å­˜é‡Œ</li>\n<li>â° <strong>è®°24å°æ—¶</strong>ï¼šè¶…è¿‡æ—¶é—´å°±è‡ªåŠ¨å¿˜æ‰</li>\n<li>ğŸ§¹ <strong>å®šæœŸæ‰“æ‰«</strong>ï¼šæ¯5åˆ†é’Ÿæ¸…ç†ä¸€æ¬¡è¿‡æœŸçš„è®°å½•</li>\n<li>â±ï¸ <strong>è¶…æ—¶ä¿æŠ¤</strong>ï¼šå¤„ç†è¶…è¿‡5åˆ†é’Ÿè¿˜æ²¡å®Œæˆï¼Œå°±å…è®¸é‡è¯•</li>\n</ul>\n<p><strong>æ ¸å¿ƒä»£ç </strong>ï¼ˆ<code>FeishuEventDeduplicator.cs#86-135</code>ï¼‰ï¼š</p>\n<pre><code class=\"language-csharp\">public bool TryMarkAsProcessing(string eventId)\n{\n    lock (_lock)\n    {\n        // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨\n        if (_eventCache.TryGetValue(eventId, out var entry))\n        {\n            // å¦‚æœå·²å¤„ç†ï¼Œè¿”å› trueï¼ˆè·³è¿‡ï¼‰\n            if (entry.Status == DeduplicationStatus.Completed)\n                return true;\n\n            // å¦‚æœå·²åœ¨å¤„ç†ä¸­ï¼Œæ£€æŸ¥æ˜¯å¦è¶…æ—¶\n            if (entry.Status == DeduplicationStatus.Processing)\n            {\n                if (DateTimeOffset.UtcNow - entry.ProcessedAt &gt; _processingTimeout)\n                {\n                    // å¤„ç†ä¸­è¶…æ—¶ï¼Œå…è®¸é‡æ–°å¤„ç†\n                    _logger?.LogWarning(\"äº‹ä»¶ {EventId} å¤„ç†ä¸­è¶…æ—¶ï¼Œå…è®¸é‡æ–°å¤„ç†\", eventId);\n                    _eventCache.Remove(eventId);\n                    // ç»§ç»­å¤„ç†\n                }\n                else\n                {\n                    // ä»åœ¨å¤„ç†ä¸­ï¼Œè·³è¿‡\n                    return true;\n                }\n            }\n        }\n\n        // æ ‡è®°ä¸ºå¤„ç†ä¸­\n        _eventCache[eventId] = new EventCacheEntry\n        {\n            ProcessedAt = DateTimeOffset.UtcNow,\n            EventId = eventId,\n            Status = DeduplicationStatus.Processing\n        };\n\n        return false; // æœªå¤„ç†ï¼Œæ–°äº‹ä»¶\n    }\n}\n</code></pre>\n<h3 id=\"æ–¹æ¡ˆäºŒredis-åˆ†å¸ƒå¼å»é‡ç”Ÿäº§ç¯å¢ƒé¦–é€‰\">æ–¹æ¡ˆäºŒï¼šRedis åˆ†å¸ƒå¼å»é‡ï¼ˆç”Ÿäº§ç¯å¢ƒé¦–é€‰ï¼‰</h3>\n<p><strong>å°±åƒå…±äº«ç¬”è®°æœ¬</strong>ï¼šç”¨ Redis æŠŠå»é‡è®°å½•è®°åœ¨å¤–éƒ¨ï¼Œæ‰€æœ‰å®ä¾‹éƒ½èƒ½æŸ¥åˆ°ã€‚å°±ç®—é‡å¯æœåŠ¡ï¼Œç¬”è®°æœ¬è¿˜åœ¨ï¼Œä¸ä¼šå¿˜è®°ã€‚</p>\n<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>\n<ul>\n<li>ğŸ“’ <strong>å†™åœ¨å…±äº«ç¬”è®°æœ¬ä¸Š</strong>ï¼šæ‰€æœ‰å®ä¾‹ä¸€èµ·çœ‹</li>\n<li>ğŸ”„ <strong>è‡ªåŠ¨ç¿»é¡µ</strong>ï¼šåˆ°æœŸè‡ªåŠ¨æ¸…ç†ï¼Œä¸ç”¨ç®¡</li>\n<li>ğŸ¤ <strong>å¤§å®¶ä¸€èµ·ç”¨</strong>ï¼šå¤šå®ä¾‹éƒ¨ç½²æ²¡é—®é¢˜</li>\n<li>âš¡ <strong>åŸå­æ“ä½œ</strong>ï¼šSETNX + EXPIRE ç¡®ä¿ä¸ä¼šå†™é”™</li>\n</ul>\n<p><strong>æ ¸å¿ƒä»£ç </strong>ï¼ˆ<code>RedisFeishuEventDistributedDeduplicator.cs#53-89</code>ï¼‰ï¼š</p>\n<pre><code class=\"language-csharp\">public async Task&lt;bool&gt; TryMarkAsProcessedAsync(\n    string eventId, \n    TimeSpan? ttl = null, \n    CancellationToken cancellationToken = default)\n{\n    var actualTtl = ttl ?? _defaultCacheExpiration;\n    var redisKey = $\"{_keyPrefix}{eventId}\";\n\n    // ä½¿ç”¨ SETNX + EXPIRE å®ç°åŸå­æ€§å»é‡\n    // ä»…å½“é”®ä¸å­˜åœ¨æ—¶è®¾ç½®ï¼Œå¹¶è®¾ç½®è¿‡æœŸæ—¶é—´\n    var setResult = await _database.StringSetAsync(\n        redisKey,\n        \"1\",\n        actualTtl,\n        When.NotExists);\n\n    if (!setResult)\n    {\n        _logger?.LogDebug(\"äº‹ä»¶ {EventId} å·²å¤„ç†è¿‡ï¼Œè·³è¿‡\", eventId);\n        return true; // å·²å¤„ç†\n    }\n\n    _logger?.LogDebug(\"äº‹ä»¶ {EventId} æ ‡è®°ä¸ºå·²å¤„ç†ï¼ŒTTL: {Ttl}\", eventId, actualTtl);\n    return false; // æœªå¤„ç†ï¼Œæ–°äº‹ä»¶\n}\n</code></pre>\n<h3 id=\"ä¸¤ç§æ–¹æ¡ˆæ€ä¹ˆé€‰\">ä¸¤ç§æ–¹æ¡ˆæ€ä¹ˆé€‰ï¼Ÿ</h3>\n<table>\n<thead>\n<tr>\n<th>å¯¹æ¯”é¡¹</th>\n<th>å†…å­˜å»é‡ï¼ˆè‡ªå·±è®°ï¼‰</th>\n<th>Redis å»é‡ï¼ˆå…±äº«ç¬”è®°æœ¬ï¼‰</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>é€Ÿåº¦</strong></td>\n<td>âš¡ åƒé—ªç”µä¸€æ ·å¿«ï¼ˆç›´æ¥è¯»å†…å­˜ï¼‰</td>\n<td>ğŸš€ å¾ˆå¿«ï¼ˆä½†éœ€è¦ç½‘ç»œï¼‰</td>\n</tr>\n<tr>\n<td><strong>å¯é æ€§</strong></td>\n<td>âš ï¸ é‡å¯å°±å¿˜å…‰</td>\n<td>âœ… æ°¸è¿œè®°ç€ï¼Œé‡å¯ä¹Ÿè¿˜åœ¨</td>\n</tr>\n<tr>\n<td><strong>å¤šå®ä¾‹</strong></td>\n<td>âŒ æ¯ä¸ªäººå„è®°å„çš„</td>\n<td>âœ… å¤§å®¶ä¸€èµ·çœ‹åŒä¸€æœ¬ç¬”è®°</td>\n</tr>\n<tr>\n<td><strong>éº»çƒ¦ç¨‹åº¦</strong></td>\n<td>ğŸŸ¢ é›¶ä¾èµ–ï¼Œå¼€ç®±å³ç”¨</td>\n<td>ğŸŸ¡ éœ€è¦éƒ¨ç½² Redis</td>\n</tr>\n<tr>\n<td><strong>é€‚åˆè°</strong></td>\n<td>ğŸ  å¼€å‘ç¯å¢ƒã€å•æœºè¿è¡Œ</td>\n<td>ğŸ¢ ç”Ÿäº§ç¯å¢ƒã€å¤šå®ä¾‹éƒ¨ç½²</td>\n</tr>\n</tbody>\n</table>\n<hr />\n<h2 id=\"åè®®å±‚æ¶ˆæ¯çš„æ’é˜Ÿå·æ£€æŸ¥\">åè®®å±‚ï¼šæ¶ˆæ¯çš„\"æ’é˜Ÿå·æ£€æŸ¥\"</h2>\n<h3 id=\"websocket-çš„-seqid-æ˜¯ä»€ä¹ˆ\">WebSocket çš„ SeqID æ˜¯ä»€ä¹ˆï¼Ÿ</h3>\n<p>é£ä¹¦ WebSocket ç”¨çš„æ˜¯ ProtoBuf äºŒè¿›åˆ¶åè®®ï¼Œæ¯æ¡æ¶ˆæ¯éƒ½å¸¦ç€ä¸€ä¸ª<strong>é€’å¢çš„åºå·</strong>ï¼Œå°±åƒå»é“¶è¡ŒåŠäº‹æ‹¿çš„æ’é˜Ÿå·ã€‚é€šè¿‡è®°ä½å·²ç»å¤„ç†è¿‡çš„æ’é˜Ÿå·ï¼Œå°±èƒ½åœ¨æ¶ˆæ¯å±‚é¢å°±æŠŠé‡å¤çš„æŒ¡åœ¨å¤–é¢ã€‚</p>\n<h4 id=\"seqid-å»é‡æ€ä¹ˆå·¥ä½œ\">SeqID å»é‡æ€ä¹ˆå·¥ä½œï¼Ÿ</h4>\n<pre><code class=\"language-csharp\">public interface IFeishuSeqIDDeduplicator\n{\n    /// &lt;summary&gt;\n    /// å°è¯•æ ‡è®° SeqID ä¸ºå·²å¤„ç†\n    /// &lt;/summary&gt;\n    /// &lt;returns&gt;\n    /// true: å·²å¤„ç†è¿‡ï¼ˆè·³è¿‡ï¼‰\n    /// false: æ–°æ¶ˆæ¯ï¼ˆç»§ç»­å¤„ç†ï¼‰\n    /// &lt;/returns&gt;\n    bool TryMarkAsProcessed(ulong seqId);\n\n    /// &lt;summary&gt;\n    /// æ£€æŸ¥ SeqID æ˜¯å¦å·²å¤„ç†\n    /// &lt;/summary&gt;\n    bool IsProcessed(ulong seqId);\n\n    /// &lt;summary&gt;\n    /// å¼‚æ­¥æ£€æŸ¥ SeqID æ˜¯å¦å·²å¤„ç†\n    /// &lt;/summary&gt;\n    Task&lt;bool&gt; IsProcessedAsync(ulong seqId);\n\n    /// &lt;summary&gt;\n    /// æ¸…ç©ºç¼“å­˜\n    /// &lt;/summary&gt;\n    void ClearCache();\n\n    /// &lt;summary&gt;\n    /// è·å–ç¼“å­˜ä¸­çš„ SeqID æ•°é‡\n    /// &lt;/summary&gt;\n    int GetCacheCount();\n\n    /// &lt;summary&gt;\n    /// è·å–å·²å¤„ç†çš„æœ€å¤§ SeqID\n    /// &lt;/summary&gt;\n    ulong GetMaxProcessedSeqId();\n}\n</code></pre>\n<h4 id=\"å®ç°æœºåˆ¶\">å®ç°æœºåˆ¶</h4>\n<div class=\"mermaid\">graph LR\n    A[æ”¶åˆ°ProtoBufæ¶ˆæ¯] --&gt; B{SeqIDæ£€æŸ¥}\n    B --&gt;|å·²å¤„ç†| C[è·³è¿‡æ¶ˆæ¯]\n    B --&gt;|æœªå¤„ç†| D[è®°å½•SeqID]\n    D --&gt; E[å¤„ç†æ¶ˆæ¯]\n    E --&gt; F[å‘é€ACKç¡®è®¤]\n    D --&gt; G[æ›´æ–°æœ€å¤§SeqID]\n    G --&gt; H[å®šæ—¶æ¸…ç†è¿‡æœŸSeqID]\n</div><h4 id=\"æ ¸å¿ƒå®ç°\">æ ¸å¿ƒå®ç°</h4>\n<p><strong>å†…å­˜å®ç°</strong>ï¼ˆ<code>FeishuSeqIDDeduplicator.cs</code>ï¼‰ï¼š</p>\n<pre><code class=\"language-csharp\">public bool TryMarkAsProcessed(ulong seqId)\n{\n    lock (_lock)\n    {\n        // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨\n        if (_processedSeqIds.Contains(seqId))\n        {\n            _logger?.LogDebug(\"SeqID {SeqId} å·²å¤„ç†è¿‡ï¼Œè·³è¿‡\", seqId);\n            return true; // å·²å¤„ç†\n        }\n\n        // è®°å½•æ–° SeqID\n        _processedSeqIds.Add(seqId);\n        _seqIdTimestamps[seqId] = DateTimeOffset.UtcNow;\n\n        // æ›´æ–°æœ€å¤§ SeqID\n        if (seqId &gt; _maxProcessedSeqId)\n        {\n            _maxProcessedSeqId = seqId;\n        }\n\n        return false; // æœªå¤„ç†ï¼Œæ–°æ¶ˆæ¯\n    }\n}\n</code></pre>\n<p><strong>ä½¿ç”¨ä½ç½®</strong>ï¼ˆ<code>BinaryMessageProcessor.cs#186-194</code>ï¼‰ï¼š</p>\n<pre><code class=\"language-csharp\">// SeqID å»é‡æ£€æŸ¥\nif (_seqIdDeduplicator != null &amp;&amp; _seqIdDeduplicator.TryMarkAsProcessed(frame.SeqID))\n{\n    _logger.LogDebug(\"SeqID {SeqID} å·²å¤„ç†è¿‡ï¼Œè·³è¿‡\", frame.SeqID);\n    eventArgs.SkipReason = $\"SeqID {frame.SeqID} å·²å¤„ç†è¿‡\";\n    BinaryMessageReceived?.Invoke(this, eventArgs);\n    \n    // ä»ç„¶å‘é€ACKç¡®è®¤\n    await SendAckMessageAsync(frame, true, cancellationToken);\n    return;\n}\n</code></pre>\n<h4 id=\"ç‰¹æ€§æ€»ç»“\">ç‰¹æ€§æ€»ç»“</h4>\n<ul>\n<li>âœ… <strong>åŸºäº HashSet é«˜æ•ˆæŸ¥æ‰¾</strong>ï¼šO(1) æŸ¥è¯¢å¤æ‚åº¦</li>\n<li>âœ… <strong>è‡ªåŠ¨è·Ÿè¸ªæœ€å¤§ SeqID</strong>ï¼šæ”¯æŒé¡ºåºæ€§éªŒè¯</li>\n<li>âœ… <strong>24å°æ—¶è¿‡æœŸæœºåˆ¶</strong>ï¼šå®šæœŸæ¸…ç†å†å²æ•°æ®</li>\n<li>âœ… <strong>å†…å­˜å‹å¥½</strong>ï¼šä»…å­˜å‚¨ SeqIDï¼Œä¸å­˜å‚¨å®Œæ•´æ¶ˆæ¯</li>\n</ul>\n<h3 id=\"webhook-çš„-nonceé˜²é‡æ”¾æ”»å‡»çš„ç§˜å¯†æ­¦å™¨\">Webhook çš„ Nonceï¼šé˜²é‡æ”¾æ”»å‡»çš„ç§˜å¯†æ­¦å™¨</h3>\n<p>é£ä¹¦ Webhook çš„è¯·æ±‚é‡Œå¸¦æœ‰ä¸€ä¸ª <code>nonce</code>ï¼ˆéšæœºæ•°ï¼‰ï¼Œè¿™å°±åƒä¸€æ¬¡æ€§å¯†ç â€”â€”ç”¨è¿‡çš„å¯†ç å°±ä¸èƒ½å†ç”¨äº†ï¼Œè¿™æ ·å°±èƒ½é˜²æ­¢\"é‡æ”¾æ”»å‡»\"ï¼ˆåäººæ‹¿åŒä¸€ä¸ªè¯·æ±‚é‡å¤å‘é€ï¼‰ã€‚</p>\n<h4 id=\"é˜²é‡æ”¾æ”»å‡»æµç¨‹\">é˜²é‡æ”¾æ”»å‡»æµç¨‹</h4>\n<pre><code>æ”»å‡»è€…å°è¯•é‡æ”¾è¯·æ±‚ï¼š\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nåŸå§‹è¯·æ±‚ï¼šNonce=\"abc123\", Timestamp=\"1234567890\"\nâœ… æ­£å¸¸å¤„ç†ï¼ˆé¦–æ¬¡æ¥æ”¶ï¼‰\n\né‡æ”¾è¯·æ±‚ï¼šNonce=\"abc123\", Timestamp=\"1234567890\"\nâŒ æ‹’ç»å¤„ç†ï¼ˆNonce å·²è®°å½•ï¼‰\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n</code></pre>\n<h4 id=\"redis-å®ç°\">Redis å®ç°</h4>\n<pre><code class=\"language-csharp\">public class RedisFeishuNonceDistributedDeduplicator : IFeishuNonceDistributedDeduplicator\n{\n    private readonly IDatabase _database;\n    private readonly TimeSpan _defaultTtl = TimeSpan.FromMinutes(5); // 5åˆ†é’Ÿè¿‡æœŸ\n\n    public async Task&lt;bool&gt; TryMarkAsProcessedAsync(string nonce, CancellationToken cancellationToken = default)\n    {\n        var redisKey = $\"{_keyPrefix}{nonce}\";\n\n        // SETNX + EXPIREï¼š5åˆ†é’Ÿå†…é‡å¤ nonce ä¼šè¢«æ‹’ç»\n        var setResult = await _database.StringSetAsync(\n            redisKey,\n            \"1\",\n            _defaultTtl,\n            When.NotExists);\n\n        if (!setResult)\n        {\n            _logger?.LogWarning(\"æ£€æµ‹åˆ°é‡å¤çš„ Nonce: {Nonce}ï¼Œå¯èƒ½ä¸ºé‡æ”¾æ”»å‡»\", nonce);\n            return true; // å·²å¤„ç†ï¼Œæ‹’ç»\n        }\n\n        return false; // é¦–æ¬¡å¤„ç†\n    }\n}\n</code></pre>\n<hr />\n<h2 id=\"åº”ç”¨å±‚ç»™æ¯ä¸ªä¸šåŠ¡æ“ä½œå‘èº«ä»½è¯\">åº”ç”¨å±‚ï¼šç»™æ¯ä¸ªä¸šåŠ¡æ“ä½œå‘\"èº«ä»½è¯\"</h2>\n<h3 id=\"ä¸ºä»€ä¹ˆè¿˜éœ€è¦è¿™ä¸€å±‚\">ä¸ºä»€ä¹ˆè¿˜éœ€è¦è¿™ä¸€å±‚ï¼Ÿ</h3>\n<p>å°±ç®—å‰é¢ä¸¤å±‚éƒ½æŒ¡ä½äº†ï¼Œä¸šåŠ¡é€»è¾‘è¿˜æ˜¯æœ‰å¯èƒ½é‡å¤æ‰§è¡Œï¼Œæ¯”å¦‚ï¼š</p>\n<ul>\n<li>ğŸ”€ åŒä¸€äº‹ä»¶è§¦å‘äº†å¤šä¸ªå¤„ç†å™¨ï¼ˆå¹¶è¡Œå¤„ç†ï¼‰</li>\n<li>ğŸ”„ å¤„ç†å™¨å†…éƒ¨å¤šæ¬¡è®¿é—®åŒä¸€ä¸ªèµ„æº</li>\n<li>ğŸ“¡ ç¬¬ä¸‰æ–¹æ¥å£é‡è¯•å¯¼è‡´é‡å¤è°ƒç”¨</li>\n</ul>\n<h3 id=\"å®é™…çš„å¹‚ç­‰æ€§å®ç°æ–¹å¼\">å®é™…çš„å¹‚ç­‰æ€§å®ç°æ–¹å¼</h3>\n<p>åœ¨å®é™…çš„ Mud.Feishu SDK ä¸­ï¼Œä¸šåŠ¡å±‚å¹‚ç­‰æ€§ä¸»è¦é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼å®ç°ï¼š</p>\n<p><strong>æ–¹å¼1ï¼šä½¿ç”¨ <code>DefaultFeishuObjectEventHandler&lt;T&gt;</code>ï¼ˆæ¨èï¼‰</strong><br />\nSDK æä¾›äº† <code>DefaultFeishuObjectEventHandler&lt;T&gt;</code> åŸºç±»ï¼Œä¸“é—¨ç”¨äºå¤„ç†å¯¹è±¡ç±»å‹çš„äº‹ä»¶ã€‚ä½ åªéœ€è¦ç»§æ‰¿è¿™ä¸ªåŸºç±»ï¼Œå¹¶åœ¨ä¸šåŠ¡é€»è¾‘ä¸­æ£€æŸ¥æ•°æ®æ˜¯å¦å·²å­˜åœ¨å³å¯ã€‚</p>\n<p><strong>æ–¹å¼2ï¼šä½¿ç”¨ <code>IdempotentFeishuEventHandler&lt;T&gt;</code></strong><br />\nSDK è¿˜æä¾›äº†ä¸€ä¸ª <code>IdempotentFeishuEventHandler&lt;T&gt;</code> åŸºç±»ï¼Œæä¾›äº†åŸºäºä¸šåŠ¡é”®çš„è‡ªåŠ¨å»é‡èƒ½åŠ›ã€‚ä½ éœ€è¦é‡å†™ <code>GetBusinessKey()</code> æ–¹æ³•å’Œ <code>HandleEventInternalAsync()</code> æ–¹æ³•ï¼ŒåŸºç±»ä¼šè‡ªåŠ¨å¤„ç†ä¸šåŠ¡å»é‡ã€‚</p>\n<hr />\n<h3 id=\"æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ä¸‰ä¸ªå®é™…æ¡ˆä¾‹\">æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ï¼šä¸‰ä¸ªå®é™…æ¡ˆä¾‹</h3>\n<h4 id=\"æ¡ˆä¾‹-1æ¶ˆæ¯å¤„ç†é˜²æ­¢é‡å¤åˆ›å»ºå¾…åŠ\">æ¡ˆä¾‹ 1ï¼šæ¶ˆæ¯å¤„ç†â€”â€”é˜²æ­¢é‡å¤åˆ›å»ºå¾…åŠ</h4>\n<pre><code class=\"language-csharp\">public class MessageEventHandler : DefaultFeishuObjectEventHandler&lt;MessageReceiveResult&gt;\n{\n    private readonly IMessageService _messageService;\n\n    public MessageEventHandler(\n        ILogger&lt;MessageEventHandler&gt; logger,\n        IMessageService messageService)\n        : base(logger)\n    {\n        _messageService = messageService;\n    }\n\n    protected override async Task ProcessBusinessLogicAsync(\n        EventData eventData,\n        ObjectEventResult&lt;MessageReceiveResult&gt;? messageData,\n        CancellationToken cancellationToken = default)\n    {\n        if (eventData == null)\n            throw new ArgumentNullException(nameof(eventData));\n\n        // æ£€æŸ¥æ¶ˆæ¯æ˜¯å¦å·²å¤„ç†ï¼ˆä¸šåŠ¡å±‚å¹‚ç­‰æ€§ï¼‰\n        var messageId = messageData?.Object.MessageId;\n        if (string.IsNullOrEmpty(messageId))\n        {\n            _logger.LogWarning(\"æ¶ˆæ¯IDä¸ºç©ºï¼Œè·³è¿‡å¤„ç†\");\n            return;\n        }\n\n        var alreadyProcessed = await _messageService.IsMessageProcessedAsync(messageId, cancellationToken);\n        if (alreadyProcessed)\n        {\n            _logger.LogInformation(\"æ¶ˆæ¯ {MessageId} å·²å¤„ç†ï¼Œè·³è¿‡\", messageId);\n            return;\n        }\n\n        // å¤„ç†æ¶ˆæ¯\n        await _messageService.ProcessMessageAsync(messageData!.Object, cancellationToken);\n    }\n}\n</code></pre>\n<h4 id=\"æ¡ˆä¾‹-2éƒ¨é—¨å¤„ç†é¿å…é‡å¤åˆ›å»º\">æ¡ˆä¾‹ 2ï¼šéƒ¨é—¨å¤„ç†â€”â€”é¿å…é‡å¤åˆ›å»º</h4>\n<pre><code class=\"language-csharp\">public class DepartmentCreatedEventHandler : DefaultFeishuObjectEventHandler&lt;DepartmentCreatedResult&gt;\n{\n    private readonly IDepartmentService _departmentService;\n\n    public DepartmentCreatedEventHandler(\n        ILogger&lt;DepartmentCreatedEventHandler&gt; logger,\n        IDepartmentService departmentService)\n        : base(logger)\n    {\n        _departmentService = departmentService;\n    }\n\n    protected override async Task ProcessBusinessLogicAsync(\n        EventData eventData,\n        ObjectEventResult&lt;DepartmentCreatedResult&gt;? departmentData,\n        CancellationToken cancellationToken = default)\n    {\n        if (eventData == null)\n            throw new ArgumentNullException(nameof(eventData));\n\n        if (departmentData?.Object == null)\n        {\n            _logger.LogWarning(\"éƒ¨é—¨æ•°æ®ä¸ºç©ºï¼Œè·³è¿‡å¤„ç†\");\n            return;\n        }\n\n        // æ£€æŸ¥éƒ¨é—¨æ˜¯å¦å·²å­˜åœ¨ï¼ˆä¸šåŠ¡å±‚å¹‚ç­‰æ€§ï¼‰\n        var departmentId = departmentData.Object.DepartmentId;\n        var exists = await _departmentService.ExistsAsync(departmentId, cancellationToken);\n\n        if (exists)\n        {\n            _logger.LogInformation(\"éƒ¨é—¨ {DepartmentId} å·²å­˜åœ¨ï¼Œè·³è¿‡åˆ›å»º\", departmentId);\n            return;\n        }\n\n        // åˆ›å»ºéƒ¨é—¨\n        await _departmentService.CreateAsync(departmentData.Object, cancellationToken);\n    }\n}\n</code></pre>\n<h4 id=\"æ¡ˆä¾‹-3ç”¨æˆ·åˆ›å»ºé¿å…é‡å¤æ³¨å†Œ\">æ¡ˆä¾‹ 3ï¼šç”¨æˆ·åˆ›å»ºâ€”â€”é¿å…é‡å¤æ³¨å†Œ</h4>\n<pre><code class=\"language-csharp\">public class UserCreatedEventHandler : DefaultFeishuObjectEventHandler&lt;UserCreatedResult&gt;\n{\n    private readonly IUserService _userService;\n\n    public UserCreatedEventHandler(\n        ILogger&lt;UserCreatedEventHandler&gt; logger,\n        IUserService userService)\n        : base(logger)\n    {\n        _userService = userService;\n    }\n\n    protected override async Task ProcessBusinessLogicAsync(\n        EventData eventData,\n        ObjectEventResult&lt;UserCreatedResult&gt;? userData,\n        CancellationToken cancellationToken = default)\n    {\n        if (eventData == null)\n            throw new ArgumentNullException(nameof(eventData));\n\n        if (userData?.Object == null)\n        {\n            _logger.LogWarning(\"ç”¨æˆ·æ•°æ®ä¸ºç©ºï¼Œè·³è¿‡å¤„ç†\");\n            return;\n        }\n\n        // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²å­˜åœ¨ï¼ˆä¸šåŠ¡å±‚å¹‚ç­‰æ€§ï¼‰\n        var userId = userData.Object.UserId;\n        var exists = await _userService.ExistsAsync(userId, cancellationToken);\n\n        if (exists)\n        {\n            _logger.LogInformation(\"ç”¨æˆ· {UserId} å·²å­˜åœ¨ï¼Œè·³è¿‡åˆ›å»º\", userId);\n            return;\n        }\n\n        // åˆ›å»ºç”¨æˆ·\n        await _userService.CreateAsync(userData.Object, cancellationToken);\n    }\n}\n</code></pre>\n<h3 id=\"æ€ä¹ˆè®¾è®¡ä¸šåŠ¡é”®æœ‰å¥—è·¯å—\">æ€ä¹ˆè®¾è®¡ä¸šåŠ¡é”®ï¼Ÿæœ‰å¥—è·¯å—ï¼Ÿ</h3>\n<table>\n<thead>\n<tr>\n<th>ä¸šåŠ¡åœºæ™¯</th>\n<th>ä¸šåŠ¡é”®é•¿ä»€ä¹ˆæ ·ï¼Ÿ</th>\n<th>ä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ï¼Ÿ</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>æ”¶åˆ°æ¶ˆæ¯</td>\n<td><code>im.message.receive_v1:om_xxxxxxxxxx</code></td>\n<td>äº‹ä»¶ç±»å‹ + æ¶ˆæ¯IDï¼Œä¸€çœ¼çœ‹å‡ºæ˜¯å“ªæ¡æ¶ˆæ¯</td>\n</tr>\n<tr>\n<td>åˆ›å»ºéƒ¨é—¨</td>\n<td><code>contact.department.created_v3:od_xxxxxxxxxx</code></td>\n<td>äº‹ä»¶ç±»å‹ + éƒ¨é—¨IDï¼Œé¿å…å’Œå…¶ä»–IDå†²çª</td>\n</tr>\n<tr>\n<td>åˆ›å»ºç”¨æˆ·</td>\n<td><code>contact.user.created_v3:ou_xxxxxxxxxx</code></td>\n<td>äº‹ä»¶ç±»å‹ + ç”¨æˆ·IDï¼Œå”¯ä¸€æ ‡è¯†ç”¨æˆ·</td>\n</tr>\n<tr>\n<td>åˆ é™¤éƒ¨é—¨</td>\n<td><code>contact.department.deleted_v3:od_xxxxxxxxxx</code></td>\n<td>äº‹ä»¶ç±»å‹ + éƒ¨é—¨IDï¼Œå¤„ç†åˆ é™¤äº‹ä»¶</td>\n</tr>\n<tr>\n<td>æ¶ˆæ¯å·²è¯»</td>\n<td><code>im.message.message_read_v1:ou_xxxxxxxxxx:om_xxxxxxxxxx</code></td>\n<td>äº‹ä»¶ç±»å‹ + ç”¨æˆ·ID + æ¶ˆæ¯ID</td>\n</tr>\n</tbody>\n</table>\n<p><strong>å››æ¡é»„é‡‘æ³•åˆ™</strong>ï¼š</p>\n<ol>\n<li>ğŸ”‘ <strong>å”¯ä¸€æ€§</strong>ï¼šä¸€ä¸ªæ“ä½œå¯¹åº”ä¸€ä¸ªé”®ï¼Œä¸èƒ½æœ‰ä¸¤ä¸ªæ“ä½œæ’è½¦</li>\n<li>ğŸ‘€ <strong>å¯è¯»æ€§</strong>ï¼šçœ‹æ—¥å¿—æ—¶èƒ½å¿«é€ŸçŸ¥é“è¿™æ˜¯ä»€ä¹ˆ</li>\n<li>ğŸ§± <strong>ç¨³å®šæ€§</strong>ï¼šåˆ«ç”¨æ—¶é—´æˆ³è¿™ç§ä¼šå˜çš„å­—æ®µåšé”®</li>\n<li>âœ‚ï¸ <strong>ç®€æ´æ€§</strong>ï¼šåˆ«å†™å¤ªé•¿ï¼Œçœå†…å­˜ã€å¥½æŸ¥è¯¢</li>\n</ol>\n<hr />\n<h2 id=\"é…ç½®å®æˆ˜å¼€å‘-vs-ç”Ÿäº§ç¯å¢ƒ\">é…ç½®å®æˆ˜ï¼šå¼€å‘ vs ç”Ÿäº§ç¯å¢ƒ</h2>\n<h3 id=\"websocket-æ€ä¹ˆé…ç½®\">WebSocket æ€ä¹ˆé…ç½®ï¼Ÿ</h3>\n<pre><code class=\"language-csharp\">// ä½¿ç”¨å»ºé€ è€…æ¨¡å¼é…ç½® WebSocket\nbuilder.Services.AddFeishuWebSocketServiceBuilder(configuration)\n    .ConfigureOptions(options =&gt;\n    {\n        // äº‹ä»¶å»é‡é…ç½®\n        options.EnableEventDeduplication = true;           // å¯ç”¨äº‹ä»¶å»é‡\n        options.EnableDistributedDeduplication = false;    // å•æœºåœºæ™¯ä½¿ç”¨å†…å­˜å»é‡\n        options.EventDeduplicationCacheExpirationMs = 86400000;  // 24å°æ—¶è¿‡æœŸ\n        options.EventDeduplicationCleanupIntervalMs = 300000;    // 5åˆ†é’Ÿæ¸…ç†é—´éš”\n    });\n</code></pre>\n<h4 id=\"ç”Ÿäº§ç¯å¢ƒå¿…å¤‡é…ç½®ä¸€å®šè¦çœ‹\">ç”Ÿäº§ç¯å¢ƒå¿…å¤‡é…ç½®ï¼ˆä¸€å®šè¦çœ‹ï¼ï¼‰</h4>\n<pre><code class=\"language-csharp\">// 1. é…ç½® Redisï¼ˆåœ¨ appsettings.json ä¸­ï¼‰\n// {\n//   \"Feishu\": {\n//     \"Redis\": {\n//       \"ConnectionString\": \"your-redis-server\"\n//     }\n//   }\n// }\n\n// 2. æ³¨å†Œ Redis æœåŠ¡å’Œå»é‡æœåŠ¡\nbuilder.Services\n    .AddFeishuRedis()\n    .AddFeishuRedisDeduplicators();\n\n// 3. å¯ç”¨åˆ†å¸ƒå¼å»é‡\nbuilder.Services.AddFeishuWebSocketServiceBuilder(configuration)\n    .ConfigureOptions(options =&gt;\n    {\n        options.EnableDistributedDeduplication = true;   // å¯ç”¨åˆ†å¸ƒå¼å»é‡\n        options.EventDeduplicationCacheExpirationMs = 86400000;  // 24å°æ—¶\n    });\n</code></pre>\n<h3 id=\"webhook-é…ç½®\">Webhook é…ç½®</h3>\n<pre><code class=\"language-csharp\">// æ³¨å†Œ Webhook æœåŠ¡\nbuilder.Services.AddFeishuWebhookServiceBuilder(configuration)\n    .ConfigureOptions(options =&gt;\n    {\n        options.VerificationToken = \"your_verification_token\";\n        options.EncryptKey = \"your_encrypt_key\";\n        options.EventHandlingTimeoutMs = 30000;          // 30ç§’è¶…æ—¶\n        options.MaxConcurrentEvents = 10;                // æœ€å¤§å¹¶å‘æ•°\n    });\n\n// æ³¨å†Œ Redis å»é‡\nbuilder.Services\n    .AddFeishuRedis()\n    .AddFeishuRedisEventDeduplicator();\n</code></pre>\n<h3 id=\"ä¸€å¼ è¡¨çœ‹æ‡‚å¼€å‘ä¸ç”Ÿäº§çš„åŒºåˆ«\">ä¸€å¼ è¡¨çœ‹æ‡‚å¼€å‘ä¸ç”Ÿäº§çš„åŒºåˆ«</h3>\n<table>\n<thead>\n<tr>\n<th>é…ç½®é¡¹</th>\n<th>å¼€å‘ç¯å¢ƒ</th>\n<th>ç”Ÿäº§ç¯å¢ƒ</th>\n<th>è¯´æ˜</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>EnableEventDeduplication</code></td>\n<td><code>true</code></td>\n<td><code>true</code></td>\n<td>å§‹ç»ˆå¯ç”¨å†…å­˜å»é‡</td>\n</tr>\n<tr>\n<td><code>EnableDistributedDeduplication</code></td>\n<td><code>false</code></td>\n<td><code>true</code></td>\n<td>ç”Ÿäº§ç¯å¢ƒå¯ç”¨Rediså»é‡</td>\n</tr>\n<tr>\n<td><code>EventDeduplicationCacheExpirationMs</code></td>\n<td><code>3600000</code> (1å°æ—¶)</td>\n<td><code>86400000</code> (24å°æ—¶)</td>\n<td>ç”Ÿäº§ç¯å¢ƒå»¶é•¿çª—å£æœŸ</td>\n</tr>\n<tr>\n<td><code>EventDeduplicationCleanupIntervalMs</code></td>\n<td><code>60000</code> (1åˆ†é’Ÿ)</td>\n<td><code>300000</code> (5åˆ†é’Ÿ)</td>\n<td>ç”Ÿäº§ç¯å¢ƒé™ä½æ¸…ç†é¢‘ç‡</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"å®Œæ•´é…ç½®ä»é›¶åˆ°ä¸Šçº¿ä¸€æ¬¡æå®š\">å®Œæ•´é…ç½®ï¼šä»é›¶åˆ°ä¸Šçº¿ä¸€æ¬¡æå®š</h3>\n<pre><code class=\"language-csharp\">public void ConfigureServices(IServiceCollection services)\n{\n    // é…ç½® Redisï¼ˆappsettings.json ä¸­é…ç½®ï¼‰\n    services\n        .AddFeishuRedis()\n        .AddFeishuRedisDeduplicators();\n\n    // æ³¨å†Œ WebSocket æœåŠ¡\n    services.AddFeishuWebSocketServiceBuilder(configuration)\n        .ConfigureOptions(wsOptions =&gt;\n        {\n            wsOptions.EnableEventDeduplication = true;\n            wsOptions.EnableDistributedDeduplication = true;\n            wsOptions.EventDeduplicationCacheExpirationMs = 86400000;\n            wsOptions.AutoReconnect = true;\n            wsOptions.MaxReconnectAttempts = 5;\n            wsOptions.HeartbeatIntervalMs = 30000;\n        })\n        .AddHandler&lt;MessageEventHandler&gt;()\n        .AddHandler&lt;DepartmentCreatedEventHandler&gt;()\n        .Build();\n\n    // æ³¨å†Œ Webhook æœåŠ¡\n    services.AddFeishuWebhookServiceBuilder(configuration)\n        .ConfigureOptions(webhookOptions =&gt;\n        {\n            webhookOptions.VerificationToken = \"your_token\";\n            webhookOptions.EncryptKey = \"your_key\";\n            webhookOptions.EventHandlingTimeoutMs = 30000;\n            webhookOptions.MaxConcurrentEvents = 20;\n        })\n        .AddHandler&lt;UserCreatedEventHandler&gt;()\n        .Build();\n}\n</code></pre>\n<h3 id=\"è¿˜æœ‰ä¸ªè´´å¿ƒåŠŸèƒ½é…ç½®é”™è¯¯è‡ªåŠ¨æé†’\">è¿˜æœ‰ä¸ªè´´å¿ƒåŠŸèƒ½ï¼šé…ç½®é”™è¯¯è‡ªåŠ¨æé†’</h3>\n<p>SDK ä¼šè‡ªåŠ¨æ£€æŸ¥é…ç½®ï¼Œå¦‚æœä½ æŠŠå»é‡åŠŸèƒ½å…¨å…³äº†ï¼Œå®ƒä¼šç›´æ¥æŠ¥é”™æé†’ä½ ï¼š</p>\n<pre><code class=\"language-csharp\">// FeishuWebSocketOptions.Validate() è‡ªåŠ¨æ‰§è¡Œ\n// SDK ä¼šåœ¨æœåŠ¡å¯åŠ¨æ—¶æ£€æŸ¥é…ç½®ï¼Œå¦‚æœå»é‡åŠŸèƒ½å…¨å…³é—­ä¼šæŠ›å‡ºè­¦å‘Š\n</code></pre>\n<hr />\n<h2 id=\"è¸©å‘æŒ‡å—äº”ä¸ªå¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ\">è¸©å‘æŒ‡å—ï¼šäº”ä¸ªå¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</h2>\n<h3 id=\"é—®é¢˜-1æœåŠ¡é‡å¯é‡å¤äº‹ä»¶åˆæ¥äº†\">é—®é¢˜ 1ï¼šæœåŠ¡é‡å¯ï¼Œé‡å¤äº‹ä»¶åˆæ¥äº†</h3>\n<p><strong>ç°åœºæ˜¯è¿™æ ·çš„</strong>ï¼š</p>\n<p><strong>ç°è±¡</strong>ï¼š</p>\n<pre><code>09:00 æœåŠ¡æ¥æ”¶ EventId=\"evt_123\" âœ… å¤„ç†æˆåŠŸ\n09:05 æœåŠ¡é‡å¯ï¼ˆå†…å­˜ç¼“å­˜æ¸…ç©ºï¼‰\n09:06 é£ä¹¦é‡å‘ EventId=\"evt_123\" âŒ é‡å¤å¤„ç†\n</code></pre>\n<p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong></p>\n<ul>\n<li>ğŸ§  å†…å­˜å»é‡å°±åƒçŸ­æœŸè®°å¿†ï¼Œé‡å¯å°±å¿˜å…‰äº†</li>\n<li>ğŸ“¡ é£ä¹¦æ²¡æ”¶åˆ°ä½ çš„ç¡®è®¤ï¼Œä»¥ä¸ºä½ æ²¡æ”¶åˆ°ï¼Œç»§ç»­å‘</li>\n</ul>\n<p><strong>æ€ä¹ˆè§£å†³ï¼Ÿ</strong></p>\n<p>âœ… <strong>æ–¹æ¡ˆ1ï¼šå¯ç”¨ Redis åˆ†å¸ƒå¼å»é‡ï¼ˆæ¨èï¼‰</strong></p>\n<pre><code class=\"language-csharp\">// é…ç½® Redisï¼ˆappsettings.json ä¸­é…ç½®è¿æ¥ä¿¡æ¯ï¼‰\nservices\n    .AddFeishuRedis()\n    .AddFeishuRedisDeduplicators();\n\nservices.AddFeishuWebSocketServiceBuilder(configuration)\n    .ConfigureOptions(options =&gt;\n    {\n        options.EnableDistributedDeduplication = true; // ä½¿ç”¨Redis\n        options.EnableEventDeduplication = false;    // ç¦ç”¨å†…å­˜å»é‡\n    });\n</code></pre>\n<p>âœ… <strong>æ–¹æ¡ˆ2ï¼šå®ç°å»é‡çŠ¶æ€æŒä¹…åŒ–</strong></p>\n<pre><code class=\"language-csharp\">public class PersistentEventDeduplicator : IFeishuEventDeduplicator\n{\n    private readonly IDatabase _database;\n\n    public bool TryMarkAsProcessing(string eventId)\n    {\n        // å°è¯•å†™å…¥æ•°æ®åº“\n        var exists = _database.EventExists(eventId);\n        if (!exists)\n        {\n            _database.MarkProcessing(eventId);\n            return false;\n        }\n        return true;\n    }\n}\n</code></pre>\n<hr />\n<h3 id=\"é—®é¢˜-2å¤šå®ä¾‹ä¸€èµ·è·‘é‡å¤å¤„ç†æŒ¡ä¸ä½\">é—®é¢˜ 2ï¼šå¤šå®ä¾‹ä¸€èµ·è·‘ï¼Œé‡å¤å¤„ç†æŒ¡ä¸ä½</h3>\n<p><strong>ç°åœºæ˜¯è¿™æ ·çš„</strong>ï¼š</p>\n<pre><code>å®ä¾‹A å’Œ å®ä¾‹B åŒæ—¶å¯åŠ¨\né£ä¹¦æ¨é€ EventId=\"evt_123\"\nå®ä¾‹A æ”¶åˆ° â†’ å¤„ç† âœ…\nå®ä¾‹B æ”¶åˆ° â†’ å¤„ç† âŒ (é‡å¤ï¼)\n</code></pre>\n<p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong></p>\n<ul>\n<li>ğŸ§  æ¯ä¸ªå®ä¾‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„\"å°æœ¬æœ¬\"</li>\n<li>ğŸš« å®ä¾‹ä¹‹é—´äº’ç›¸çœ‹ä¸åˆ°å¯¹æ–¹çš„è®°å½•</li>\n</ul>\n<p><strong>æ€ä¹ˆè§£å†³ï¼Ÿ</strong></p>\n<p>âœ… <strong>å¿…é¡»ä½¿ç”¨ Redis åˆ†å¸ƒå¼å»é‡</strong></p>\n<pre><code class=\"language-csharp\">// æ‰€æœ‰å®ä¾‹è¿æ¥åˆ°åŒä¸€ä¸ª Redisï¼ˆåœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®ï¼‰\nservices\n    .AddFeishuRedis()\n    .AddFeishuRedisDeduplicators();\n\nservices.AddFeishuWebSocketServiceBuilder(configuration)\n    .ConfigureOptions(options =&gt;\n    {\n        options.EnableDistributedDeduplication = true;\n    });\n</code></pre>\n<p><strong>ä¸€å¼ å›¾çœ‹æ‡‚åŒºåˆ«</strong>ï¼š</p>\n<div class=\"mermaid\">graph TB\n    subgraph Wrong[\"âŒ é”™è¯¯æ¶æ„ï¼ˆå†…å­˜å»é‡ï¼‰\"]\n        A1[\"å®ä¾‹A&lt;br/&gt;å†…å­˜ç¼“å­˜A&lt;br/&gt;evt_123 âœ…\"]\n        A2[\"å®ä¾‹B&lt;br/&gt;å†…å­˜ç¼“å­˜B&lt;br/&gt;evt_123 âŒ\"]\n    end\n\n    subgraph Right[\"âœ… æ­£ç¡®æ¶æ„ï¼ˆRediså»é‡ï¼‰\"]\n        B1[\"å®ä¾‹A\"]\n        B2[\"å®ä¾‹B\"]\n        Redis[\"Redis å»é‡&lt;br/&gt;evt_123 âœ…\"]\n    end\n\n    B1 --&gt; Redis\n    B2 --&gt; Redis\n\n    style Wrong fill:#ffebee\n    style Right fill:#e8f5e9\n    style Redis fill:#e3f2fd\n</div><hr />\n<h3 id=\"é—®é¢˜-3å¤„ç†è¶…æ—¶é‡å¤äº‹ä»¶è¶è™šè€Œå…¥\">é—®é¢˜ 3ï¼šå¤„ç†è¶…æ—¶ï¼Œé‡å¤äº‹ä»¶è¶è™šè€Œå…¥</h3>\n<p><strong>ç°åœºæ˜¯è¿™æ ·çš„</strong>ï¼š</p>\n<pre><code>09:00 å¼€å§‹å¤„ç† EventId=\"evt_123\"\n09:01 å¤„ç†è¶…æ—¶ï¼ˆè¶…æ—¶30ç§’ï¼‰\n09:01 å›æ»š Processing çŠ¶æ€\n09:02 é£ä¹¦é‡å‘ EventId=\"evt_123\"\n09:02 é‡å¤å¤„ç† âŒ (å®é™…å·²æˆåŠŸï¼)\n</code></pre>\n<p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong></p>\n<ul>\n<li>â±ï¸ è¶…æ—¶åç³»ç»Ÿä»¥ä¸ºæ²¡å®Œæˆï¼ŒæŠŠ\"å¤„ç†ä¸­\"æ ‡è®°æ’¤å›äº†</li>\n<li>âœ… ä½†ä¸šåŠ¡å¯èƒ½å·²ç»åšå®Œäº†ï¼Œåªæ˜¯å“åº”æ…¢äº†ä¸€ç‚¹ç‚¹</li>\n</ul>\n<p><strong>æ€ä¹ˆè§£å†³ï¼Ÿ</strong></p>\n<p>âœ… <strong>æ–¹æ¡ˆ1ï¼šå¢åŠ æœ€ç»ˆä¸€è‡´æ€§æ£€æŸ¥</strong></p>\n<pre><code class=\"language-csharp\">public class DepartmentCreatedEventHandler : DefaultFeishuObjectEventHandler&lt;DepartmentCreatedResult&gt;\n{\n    private readonly IDepartmentService _departmentService;\n\n    protected override async Task ProcessBusinessLogicAsync(\n        EventData eventData,\n        ObjectEventResult&lt;DepartmentCreatedResult&gt;? departmentData,\n        CancellationToken ct)\n    {\n        if (departmentData?.Object == null)\n            return;\n\n        var departmentId = departmentData.Object.DepartmentId;\n\n        // å…ˆæ£€æŸ¥éƒ¨é—¨æ˜¯å¦å·²å­˜åœ¨ï¼ˆå¹‚ç­‰æ€§ï¼‰\n        var existingDepartment = await _departmentService.GetAsync(departmentId, ct);\n        if (existingDepartment != null)\n        {\n            _logger.LogInformation(\"éƒ¨é—¨ {DepartmentId} å·²å­˜åœ¨ï¼Œè·³è¿‡åˆ›å»º\", departmentId);\n            return;\n        }\n\n        // åˆ›å»ºéƒ¨é—¨\n        await _departmentService.CreateAsync(departmentData.Object, ct);\n    }\n}\n</code></pre>\n<p>âœ… <strong>æ–¹æ¡ˆ2ï¼šå®ç°å¤„ç†ç»­æœŸæœºåˆ¶</strong></p>\n<pre><code class=\"language-csharp\">public class LongRunningTaskHandler : DefaultFeishuEventHandler\n{\n    private readonly IFeishuEventDeduplicator _deduplicator;\n\n    protected override async Task ProcessBusinessLogicAsync(EventData eventData, CancellationToken ct)\n    {\n        var eventId = eventData.EventId;\n\n        // å®šæœŸç»­æœŸå¤„ç†æ—¶é—´ï¼ˆæ¯30ç§’ï¼‰\n        var renewalTask = Task.Run(async () =&gt;\n        {\n            while (!ct.IsCancellationRequested)\n            {\n                await Task.Delay(30000, ct);\n                _deduplicator.RenewProcessing(eventId);\n            }\n        }, ct);\n\n        try\n        {\n            await ProcessLongRunningTask(eventData, ct);\n        }\n        finally\n        {\n            await renewalTask;\n        }\n    }\n}\n</code></pre>\n<hr />\n<h3 id=\"é—®é¢˜-4redis-å®•æœºå»é‡é˜²æŠ¤å…¨å¤±æ•ˆ\">é—®é¢˜ 4ï¼šRedis å®•æœºï¼Œå»é‡é˜²æŠ¤å…¨å¤±æ•ˆ</h3>\n<p><strong>ç°åœºæ˜¯è¿™æ ·çš„</strong>ï¼š</p>\n<pre><code>Redis å®•æœº\næœåŠ¡æ— æ³•è°ƒç”¨ TryMarkAsProcessedAsync()\nè¿”å› falseï¼ˆå…è®¸å¤„ç†ï¼‰\nå¤šä¸ªå®ä¾‹é‡å¤å¤„ç†åŒä¸€äº‹ä»¶ âŒ\n</code></pre>\n<p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong></p>\n<ul>\n<li>ğŸš« Redis æŒ‚äº†ï¼Œä»£ç ä¸ºäº†ä¸é˜»å¡é€‰æ‹©\"å…è®¸å¤„ç†\"</li>\n<li>âŒ ç»“æœé‡å¤äº‹ä»¶å…¨æ¶Œè¿›æ¥</li>\n</ul>\n<p><strong>æ€ä¹ˆè§£å†³ï¼Ÿ</strong></p>\n<p>âœ… <strong>æ–¹æ¡ˆ1ï¼šå®ç°é™çº§åˆ°å†…å­˜å»é‡</strong></p>\n<pre><code class=\"language-csharp\">public class HybridEventDeduplicator : IFeishuEventDeduplicator\n{\n    private readonly IFeishuEventDistributedDeduplicator _redis;\n    private readonly IFeishuEventDeduplicator _memory;\n\n    public bool TryMarkAsProcessing(string eventId)\n    {\n        try\n        {\n            // ä¼˜å…ˆä½¿ç”¨ Redis\n            return _redis.TryMarkAsProcessedAsync(eventId).GetAwaiter().GetResult();\n        }\n        catch (Exception ex)\n        {\n            _logger.LogError(ex, \"Rediså»é‡å¤±è´¥ï¼Œé™çº§åˆ°å†…å­˜å»é‡\");\n            // é™çº§åˆ°å†…å­˜å»é‡\n            return _memory.TryMarkAsProcessing(eventId);\n        }\n    }\n}\n</code></pre>\n<p>âœ… <strong>æ–¹æ¡ˆ2ï¼šé…ç½®ç†”æ–­æœºåˆ¶</strong></p>\n<pre><code class=\"language-csharp\">public class CircuitBreakerEventDeduplicator : IFeishuEventDeduplicator\n{\n    private readonly CircuitBreaker _circuitBreaker;\n    private int _failureCount;\n    private DateTime _lastFailureTime;\n\n    public bool TryMarkAsProcessing(string eventId)\n    {\n        if (_circuitBreaker.IsOpen())\n        {\n            _logger.LogWarning(\"Rediså»é‡ç†”æ–­ï¼Œæ‹’ç»å¤„ç†\");\n            return true; // æ‹’ç»å¤„ç†ï¼Œä¿æŠ¤ä¸‹æ¸¸\n        }\n\n        try\n        {\n            var result = _redis.TryMarkAsProcessedAsync(eventId).GetAwaiter().GetResult();\n            _circuitBreaker.RecordSuccess();\n            return result;\n        }\n        catch (Exception ex)\n        {\n            _circuitBreaker.RecordFailure();\n            throw;\n        }\n    }\n}\n</code></pre>\n<hr />\n<h3 id=\"é—®é¢˜-5ç¼“å­˜è¶Šç§¯è¶Šå¤šå†…å­˜å¿«çˆ†äº†\">é—®é¢˜ 5ï¼šç¼“å­˜è¶Šç§¯è¶Šå¤šï¼Œå†…å­˜å¿«çˆ†äº†</h3>\n<p><strong>ç°åœºæ˜¯è¿™æ ·çš„</strong>ï¼š</p>\n<pre><code>æœåŠ¡è¿è¡Œ24å°æ—¶\nå»é‡ç¼“å­˜æ¡ç›®ï¼š100ä¸‡+\nå†…å­˜å ç”¨ï¼šè¶…è¿‡500MB\nGCå‹åŠ›å¢å¤§ï¼Œæ€§èƒ½ä¸‹é™\n</code></pre>\n<p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong></p>\n<ul>\n<li>ğŸ“ˆ é«˜é¢‘äº‹ä»¶ï¼ˆæ¯”å¦‚æ¥æ”¶æ¶ˆæ¯ï¼‰ä¸€å¤©èƒ½äº§ç”Ÿå‡ åä¸‡æ¡è®°å½•</li>\n<li>ğŸ• æ¸…ç†é—´éš”å¤ªé•¿ï¼Œæ—§è®°å½•å †ç§¯å¦‚å±±</li>\n</ul>\n<p><strong>æ€ä¹ˆè§£å†³ï¼Ÿ</strong></p>\n<p>âœ… <strong>æ–¹æ¡ˆ1ï¼šç¼©çŸ­ç¼“å­˜è¿‡æœŸæ—¶é—´</strong></p>\n<pre><code class=\"language-csharp\">services.AddFeishuWebSocketServiceBuilder(configuration)\n    .ConfigureOptions(options =&gt;\n    {\n        // æ ¹æ®å®é™…ä¸šåŠ¡è°ƒæ•´\n        options.EventDeduplicationCacheExpirationMs = 3600000;  // ç¼©çŸ­ä¸º1å°æ—¶\n        options.EventDeduplicationCleanupIntervalMs = 60000;    // æé«˜æ¸…ç†é¢‘ç‡ä¸º1åˆ†é’Ÿ\n    });\n</code></pre>\n<p>âœ… <strong>æ–¹æ¡ˆ2ï¼šä½¿ç”¨ LRU ç¼“å­˜</strong></p>\n<pre><code class=\"language-csharp\">public class LRUEventDeduplicator : IFeishuEventDeduplicator\n{\n    private readonly LRUCache&lt;string, EventCacheEntry&gt; _cache;\n    private const int MaxCacheSize = 10000; // æœ€å¤šä¿ç•™1ä¸‡æ¡\n\n    public LRUEventDeduplicator()\n    {\n        _cache = new LRUCache&lt;string, EventCacheEntry&gt;(MaxCacheSize);\n    }\n\n    public bool TryMarkAsProcessing(string eventId)\n    {\n        if (_cache.TryGetValue(eventId, out var entry))\n            return true;\n\n        _cache.Add(eventId, new EventCacheEntry { /* ... */ });\n        return false;\n    }\n}\n</code></pre>\n<p>âœ… <strong>æ–¹æ¡ˆ3ï¼šä¸šåŠ¡å±‚ä¼˜åŒ–</strong></p>\n<pre><code class=\"language-csharp\">// æŸäº›é«˜é¢‘äº‹ä»¶ä¸éœ€è¦å»é‡\npublic class SystemEventHandler : DefaultFeishuEventHandler\n{\n    // ä¸ç»§æ‰¿ IdempotentFeishuEventHandler\n    // ç›´æ¥å¤„ç†ï¼Œå‡å°‘ä¸šåŠ¡å±‚å»é‡å‹åŠ›\n\n    protected override Task ProcessBusinessLogicAsync(EventData eventData, CancellationToken ct)\n    {\n        // ä»…è®°å½•æ—¥å¿—ï¼Œä¸è¿›è¡Œä¸šåŠ¡æ“ä½œ\n        _logger.LogInformation(\"ç³»ç»Ÿäº‹ä»¶ï¼š{EventType}\", eventData.EventType);\n        return Task.CompletedTask;\n    }\n}\n</code></pre>\n<hr />\n<h2 id=\"ç»™ç³»ç»Ÿåšä½“æ£€ç›‘æ§ä¸è°ƒè¯•\">ç»™ç³»ç»Ÿåšä½“æ£€ï¼šç›‘æ§ä¸è°ƒè¯•</h2>\n<h3 id=\"é‡‡é›†ä»€ä¹ˆæ•°æ®æœ€æœ‰æ•ˆ\">é‡‡é›†ä»€ä¹ˆæ•°æ®æœ€æœ‰æ•ˆï¼Ÿ</h3>\n<pre><code class=\"language-csharp\">public class DeduplicatorMetrics\n{\n    public long TotalProcessed { get; set; }\n    public long DuplicateSkipped { get; set; }\n    public long ProcessingTimeout { get; set; }\n    public long CacheHitCount { get; set; }\n    public long CacheMissCount { get; set; }\n\n    public double DuplicateRate =&gt; \n        TotalProcessed &gt; 0 ? (double)DuplicateSkipped / TotalProcessed : 0;\n\n    public double CacheHitRate =&gt;\n        (CacheHitCount + CacheMissCount) &gt; 0 \n            ? (double)CacheHitCount / (CacheHitCount + CacheMissCount) \n            : 0;\n}\n</code></pre>\n<h3 id=\"æš´éœ²ä¸€ä¸ªæ¥å£éšæ—¶æŸ¥çœ‹å¥åº·çŠ¶æ€\">æš´éœ²ä¸€ä¸ªæ¥å£ï¼Œéšæ—¶æŸ¥çœ‹å¥åº·çŠ¶æ€</h3>\n<pre><code class=\"language-csharp\">[ApiController]\n[Route(\"api/[controller]\")]\npublic class DeduplicatorController : ControllerBase\n{\n    private readonly IFeishuEventDeduplicator _deduplicator;\n\n    [HttpGet(\"stats\")]\n    public ActionResult&lt;DeduplicatorStats&gt; GetStats()\n    {\n        return Ok(new DeduplicatorStats\n        {\n            CacheCount = _deduplicator.GetCacheCount(),\n            MaxProcessedSeqId = _seqIdDeduplicator?.GetMaxProcessedSeqId(),\n            DuplicateRate = _metrics.DuplicateRate,\n            CacheHitRate = _metrics.CacheHitRate\n        });\n    }\n\n    [HttpGet(\"check/{eventId}\")]\n    public ActionResult&lt;bool&gt; CheckEventId(string eventId)\n    {\n        var isProcessed = _deduplicator.IsProcessed(eventId);\n        return Ok(new { eventId, isProcessed });\n    }\n}\n</code></pre>\n<h3 id=\"æ—¥å¿—æ€ä¹ˆå†™æ‰å®¹æ˜“æ’æŸ¥é—®é¢˜\">æ—¥å¿—æ€ä¹ˆå†™æ‰å®¹æ˜“æ’æŸ¥é—®é¢˜ï¼Ÿ</h3>\n<pre><code class=\"language-csharp\">public class EnhancedEventDeduplicator : IFeishuEventDeduplicator\n{\n    private readonly ILogger&lt;EnhancedEventDeduplicator&gt; _logger;\n\n    public bool TryMarkAsProcessing(string eventId)\n    {\n        lock (_lock)\n        {\n            if (_eventCache.TryGetValue(eventId, out var entry))\n            {\n                // è¯¦ç»†è®°å½•å»é‡å‘½ä¸­åŸå› \n                _logger.LogInformation(\n                    \"[Deduplication] EventId={EventId} å·²å¤„ç†ï¼Œ\" +\n                    \"Status={Status}, ProcessedAt={ProcessedAt}\",\n                    eventId,\n                    entry.Status,\n                    entry.ProcessedAt);\n\n                return true;\n            }\n\n            _logger.LogDebug(\"[Deduplication] EventId={EventId} æ–°äº‹ä»¶\", eventId);\n            // ...\n            return false;\n        }\n    }\n}\n</code></pre>\n<hr />\n<h2 id=\"å¿«é€Ÿå›é¡¾ä¸è¡ŒåŠ¨æ¸…å•\">å¿«é€Ÿå›é¡¾ä¸è¡ŒåŠ¨æ¸…å•</h2>\n<h3 id=\"ä¸‰å±‚é˜²æŠ¤ä¸€è¡¨è§ˆ\">ä¸‰å±‚é˜²æŠ¤ä¸€è¡¨è§ˆ</h3>\n<table>\n<thead>\n<tr>\n<th>å»é‡å±‚çº§</th>\n<th>å»é‡ä¾æ®</th>\n<th>å®ç°æ–¹å¼</th>\n<th>æ¨èé…ç½®</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>åè®®å±‚</strong></td>\n<td>SeqID / Nonce</td>\n<td><code>IFeishuSeqIDDeduplicator</code> / <code>IFeishuNonceDistributedDeduplicator</code></td>\n<td>å§‹ç»ˆå¯ç”¨</td>\n</tr>\n<tr>\n<td><strong>åˆ†å‘å±‚</strong></td>\n<td>EventId</td>\n<td><code>IFeishuEventDeduplicator</code> / <code>IFeishuEventDistributedDeduplicator</code></td>\n<td>ç”Ÿäº§ç¯å¢ƒå¯ç”¨ Redis</td>\n</tr>\n<tr>\n<td><strong>åº”ç”¨å±‚</strong></td>\n<td>æ•°æ®å­˜åœ¨æ€§æ£€æŸ¥</td>\n<td><code>DefaultFeishuObjectEventHandler&lt;T&gt;</code> ä¸­çš„ä¸šåŠ¡é€»è¾‘</td>\n<td>æŒ‰éœ€å®ç°</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"è¿˜æƒ³äº†è§£æ›´å¤š\">è¿˜æƒ³äº†è§£æ›´å¤šï¼Ÿ</h3>\n<ul>\n<li>ğŸ“– <a href=\"https://open.feishu.cn/document/server-docs/event-subscription-guide/overview\" rel=\"noopener nofollow\" target=\"_blank\">é£ä¹¦å®˜æ–¹æ–‡æ¡£ï¼šäº‹ä»¶è®¢é˜…</a></li>\n<li>ğŸ’» <a href=\"https://github.com/mudtools/MudFeishu\" rel=\"noopener nofollow\" target=\"_blank\">MudFeishu GitHub ä»“åº“</a></li>\n<li>ğŸ’» <a href=\"https://gitee.com/mudtools/MudFeishu\" rel=\"noopener nofollow\" target=\"_blank\">MudFeishu Gitee ä»“åº“</a></li>\n<li>ğŸ”’ <a href=\"https://redis.io/topics/distlock\" rel=\"noopener nofollow\" target=\"_blank\">Redis åˆ†å¸ƒå¼é”æœ€ä½³å®è·µ</a></li>\n</ul>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-11 23:00</span>&nbsp;\n<a href=\"https://www.cnblogs.com/mudtools\">ç©æ³¥å·´çš„|mudtools.cn</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">0</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "è¿­ä»£å™¨ iterationã€iter ä¸ å¤šçº¿ç¨‹ concurrent äº¤å‰å®è·µï¼ˆè¯¦ç»†ï¼‰",
      "link": "https://www.cnblogs.com/io-T-T/p/19469168",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/io-T-T/p/19469168\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-11 22:52\">\n    <span>è¿­ä»£å™¨ iterationã€iter ä¸ å¤šçº¿ç¨‹ concurrent äº¤å‰å®è·µï¼ˆè¯¦ç»†ï¼‰</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                    <div id=\"cnblogs_post_description\" style=\"display: none;\">\n        \n        è¿­ä»£å™¨ å¤šçº¿ç¨‹ concurrent iter python\n    </div>\n<div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h2 id=\"è¿­ä»£å™¨iterationiter-ä¸-å¤šçº¿ç¨‹-concurrent-äº¤å‰å®è·µè¯¦ç»†\">è¿­ä»£å™¨<code>iteration</code>ã€<code>iter</code> ä¸ å¤šçº¿ç¨‹ <code>concurrent</code> äº¤å‰å®è·µï¼ˆè¯¦ç»†ï¼‰</h2>\n<h3 id=\"å®è·µåŠç®€ä»‹è¯´æ˜\">å®è·µåŠç®€ä»‹è¯´æ˜</h3>\n<p>â€‹\tç”±äºåœ¨å®é™…è¿ç”¨é‡ï¼Œè¿­ä»£å™¨ï¼ˆæˆ–ç”Ÿæˆå™¨ï¼‰ç»å¸¸ä¸å¤šçº¿ç¨‹ä¸€å¹¶ä½¿ç”¨ã€‚æœ¬å®è·µæ—¨åœ¨å¯¹è¿­ä»£å™¨ï¼ˆåŠç”Ÿæˆå™¨ï¼‰ã€å¤šçº¿ç¨‹åº“ï¼ˆä¸»è¦ä¸º<code>concurrent</code>ï¼‰è¿›è¡Œäº¤å‰å®è·µè¯´æ˜ï¼Œç”¨æ¥ä½¿è¯»è€…æ›´åŠ ç†è§£è¿­ä»£å™¨å’Œå¤šçº¿ç¨‹åœ¨å®é™…çš„åº”ç”¨ã€‚å› æ­¤æœ¬ç¯‡è½»æ•™ç¨‹ï¼Œé‡å®è·µï¼Œå½“ç„¶ä¹Ÿä¼šç®€è¦è¯´æ˜ç›¸å…³çŸ¥è¯†ã€‚</p>\n<h3 id=\"åŸºç¡€çŸ¥è¯†ç›¸å…³ä»‹ç»ç®€è¦\">åŸºç¡€çŸ¥è¯†ç›¸å…³ä»‹ç»ï¼ˆç®€è¦ï¼‰</h3>\n<blockquote>\n<p>è¯¦ç»†ä»‹ç»å»ºè®®è§‚çœ‹<a href=\"https://space.bilibili.com/1318868/?spm_id_from=333.788.upinfo.detail.click\" rel=\"noopener nofollow\" target=\"_blank\">Hucciå†™ä»£ç </a>åšä¸»æ•™çš„åŸºç¡€çŸ¥è¯†ï¼Œè¯¦ç»†æ˜“æ‡‚</p>\n<p><a href=\"https://www.bilibili.com/video/BV1jt421c7yN\" rel=\"noopener nofollow\" target=\"_blank\">ã€Pythonã€‘ä»è¿­ä»£å™¨åˆ°ç”Ÿæˆå™¨ï¼šå°å†…å­˜ä¹Ÿèƒ½å¤„ç†å¤§æ•°æ®</a></p>\n<p><a href=\"https://www.bilibili.com/video/BV1tVsyzUEtX/?\" rel=\"noopener nofollow\" target=\"_blank\">åœ¨Pythonä¸­ç”¨å¤šçº¿ç¨‹ä¹‹å‰ï¼Œéœ€è¦å…ˆææ‡‚è¿™äº›</a></p>\n</blockquote>\n<h3 id=\"ä½ ä¸ºä»€ä¹ˆéœ€è¦å­¦ä¹ è¿­ä»£å™¨å¤šçº¿ç¨‹\">ä½ ä¸ºä»€ä¹ˆéœ€è¦å­¦ä¹ è¿­ä»£å™¨ã€å¤šçº¿ç¨‹</h3>\n<p>å­¦è¿™ä¸ªæ•™ç¨‹/å®è·µä¹‹å‰ï¼Œä½ éœ€è¦å…ˆçœ‹çœ‹è‡ªå·±æœ‰æ²¡æœ‰è¿™ä¸ªéœ€æ±‚ï¼Œå½“ç„¶ä½ æ„Ÿå…´è¶£ä¹Ÿå¯ä»¥å­¦ã€‚</p>\n<h4 id=\"è¿­ä»£å™¨ç”Ÿæˆå™¨çš„ä¼˜åŠ£\">è¿­ä»£å™¨ï¼ˆç”Ÿæˆå™¨ï¼‰çš„ä¼˜åŠ£</h4>\n<p><strong>ä¼˜åŠ¿ï¼š</strong></p>\n<ul>\n<li>ä½¿ç”¨æ—¶ç”Ÿæˆæ•°æ®ï¼Œç¼“è§£çˆ†ç¼“å­˜é—®é¢˜ï¼ˆRAMã€GRAMï¼‰ã€ä¸»è¦ã€‘</li>\n<li>ç»Ÿä¸€æ ‡å‡†æ¥å£ï¼Œæ— éœ€å…³ç³»æ•°æ®çš„æ•°æ®ç»“æ„è°ƒç”¨é—®é¢˜ï¼Œä½¿ç”¨ <code>for _iter in iteration</code> å³å¯è°ƒç”¨</li>\n</ul>\n<p><strong>åŠ£åŠ¿ï¼š</strong></p>\n<ul>\n<li>å•æ¬¡ä½¿ç”¨</li>\n<li>ä¸æ”¯æŒç´¢å¼•</li>\n<li>å•å‘éå†ï¼ˆå‘å‰ï¼‰</li>\n</ul>\n<h4 id=\"å¤šçº¿ç¨‹çš„ä¼˜åŠ£pythoné™å®š\">å¤šçº¿ç¨‹çš„ä¼˜åŠ£ï¼ˆPythoné™å®šï¼‰</h4>\n<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>\n<ul>\n<li>å¹¶è¡Œæ‰§è¡Œï¼Œæé«˜CPUçš„ä½¿ç”¨ç‡</li>\n<li>å……åˆ†åˆ©ç”¨I/Oçš„ä¸­æ–­æ—¶é—´ï¼Œä»è€Œæé«˜ä»£ç çš„æ‰§è¡Œé€Ÿåº¦</li>\n</ul>\n<p><strong>åŠ£åŠ¿ï¼š</strong></p>\n<ul>\n<li>è°ƒè¯•éš¾åº¦å¤§</li>\n<li>è€ç‰ˆæœ¬ï¼ˆå¥½åƒæ˜¯3.12ä¹‹å‰ï¼‰ï¼Œåªæœ‰ä¸€ä¸ªGILé”ï¼Œå¯¼è‡´è¿›ç¨‹ä¼šå‡ºç°æŠ¢å ç°è±¡ã€‚</li>\n<li>å°‘æ•°æ®é‡å¸¦æ¥çš„æå‡å¯èƒ½è¾ƒå°‘</li>\n</ul>\n<h3 id=\"01-ç¯å¢ƒæ¥æºæ•°æ®\">01-ç¯å¢ƒæ¥æºæ•°æ®</h3>\n<p>æˆ‘ç”¨çš„æ˜¯<code>kaggle</code>çš„å¼€æºæ•°æ®ï¼Œç”±äºå¾ˆå¤šéƒ½æ˜¯<code>csv</code>ç±»å‹ï¼Œå› æ­¤æˆ‘ä¹Ÿä»¥ç®€å•çš„<code>csv</code>æ•°æ®é›†å¤šçº¿ç¨‹è¯»å–è¿›è¡Œè¯´æ˜ï¼Œä½ ä»¬ä¹Ÿå¯ä»¥ç”¨å…¶ä»–æ•°æ®é›†ï¼Œæœ€å¥½æ–‡æœ¬è¡Œé•¿åº¦&gt;5k, æ‰èƒ½å±•ç°å¤šçº¿ç¨‹ã€è¿­ä»£å™¨çš„ä¼˜åŠ¿ï¼Œæ•°é‡çº§ä½è¿˜æ˜¯ç”¨å•çº¿ç¨‹ã€ä¸²è¡Œå§ï¼Œå®¹æ˜“ç†è§£å¥½ç»´æŠ¤ã€‚</p>\n<blockquote>\n<p><a href=\"https://www.kaggle.com/datasets/dansbecker/powerlifting-database/data\" rel=\"noopener nofollow\" target=\"_blank\">powerlifting-database</a></p>\n</blockquote>\n<h3 id=\"02-ä»»åŠ¡ä»‹ç»åŠç¼–ç æ€è·¯\">02-ä»»åŠ¡ä»‹ç»åŠç¼–ç æ€è·¯</h3>\n<p>ç©ºæœ‰ç¼–ç èƒ½åŠ›ï¼Œä½†æ˜¯æ²¡æœ‰ç¼–ç æ€è·¯æ˜¯å¤§å¿Œå§ã€‚å› æ­¤å…ˆæ¦‚è¿°ä»»åŠ¡åŠç¼–ç æ€è·¯ã€‚</p>\n<h4 id=\"21-ä»»åŠ¡\">2.1 ä»»åŠ¡</h4>\n<p>æœ¬æ¬¡å®è·µï¼Œä»»åŠ¡æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p>\n<ol>\n<li>äº†è§£å¹¶æ„é€ è¿­ä»£å™¨ç±»</li>\n<li>ä½¿ç”¨è¿­ä»£å™¨ç±»å¯¹æ•°æ®é›†ï¼ˆ<strong>csvæ•°æ®</strong>ï¼‰è¿›è¡Œæ•°æ®åˆ’åˆ†</li>\n<li>ä½¿ç”¨å¤šçº¿ç¨‹åº“ï¼ˆ<code>concurrent</code>ï¼‰æ¥æ¨¡æ‹Ÿå¤šçº¿ç¨‹å¤„ç†æ•°æ®ã€‚</li>\n</ol>\n<h4 id=\"22-ç¼–ç æ€è·¯\">2.2 ç¼–ç æ€è·¯</h4>\n<p>æƒ³è¦è¾¾æˆå¤šçº¿ç¨‹ä¸è¿­ä»£å™¨çš„ç»“åˆï¼Œé¦–å…ˆéœ€è¦æ„é€ åˆé€‚çš„æ•°æ®ï¼Œå› æ­¤éœ€è¦ï¼š</p>\n<ol>\n<li>æ„å»ºè¿­ä»£å™¨ç±»ï¼ˆæ¡†æ¶ï¼‰</li>\n</ol>\n<p>ç„¶åéœ€è¦å°†æ•°æ®é›†å¯¼å…¥è¿›æ¥ï¼Œå®Œå–„è¿­ä»£å™¨ç±»ï¼Œè¿˜éœ€è¦å¯¹è¾“å…¥çš„æ•°æ®åšä¸€ä¸‹åˆ†å—ï¼Œæ–¹ä¾¿åç»­ä½¿ç”¨ï¼š</p>\n<ol start=\"2\">\n<li>æ•°æ®å¯¼å…¥+åˆ†å—+å®Œå–„è¿­ä»£å™¨ç±»</li>\n</ol>\n<p>æ•°æ®æ¥æºè§£å†³äº†ï¼Œä¹Ÿåˆ†å—äº†ï¼Œæ¥ä¸‹æ¥æ˜¯å°†æ•°æ®ä¸å¤šçº¿ç¨‹è”åŠ¨äº†</p>\n<ol start=\"3\">\n<li>å¼•å…¥å¤šçº¿ç¨‹åº“ï¼Œå¤„ç†åˆ‡åˆ†çš„æ•°æ®ã€‚</li>\n</ol>\n<h3 id=\"03-æ„å»ºè¿­ä»£å™¨ç±»\">03 æ„å»ºè¿­ä»£å™¨ç±»</h3>\n<h4 id=\"31è¿­ä»£å™¨çš„æœ€å°æ¡†æ¶\">3.1è¿­ä»£å™¨çš„æœ€å°æ¡†æ¶</h4>\n<blockquote>\n<p>å¯å‚è€ƒ <a href=\"https://www.cnblogs.com/Ravenna/p/15676404.html\" target=\"_blank\">pythonè¿­ä»£å™¨ç®€å•ç†è§£ __iter__å’Œ__next__æ–¹æ³•</a></p>\n</blockquote>\n<p>â€‹\tæˆä¸ºä¸€ä¸ªæœ€å°è¿­ä»£å™¨ç±»é€šå¸¸éœ€è¦åŒ…å«ä»¥ä¸‹å‡ ä¸ªç±»æ¥å£ï¼š</p>\n<img alt=\"image-20260111171210573\" class=\"lazyload\" />\n<ol>\n<li><code>__init__</code>ï¼šç±»åˆå§‹åŒ–æ¥å£</li>\n<li><code>__iter__</code>: è·å–è¿­ä»£å¯¹è±¡çš„æ¥å£</li>\n<li><code>__next__</code>ï¼šæ•°æ®è¿­ä»£æ¥å£ã€‚</li>\n</ol>\n<h4 id=\"32--æ„å»ºè¿­ä»£å™¨ç±»\">3.2  æ„å»ºè¿­ä»£å™¨ç±»</h4>\n<p>ä¸ºäº†ç…§é¡¾æ›´å¤šçš„è¯»è€…ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨ä¼ ç»Ÿæ¥å£å¯¹<code>csv</code>è¿›è¡Œè¯»å†™ï¼Œæœ‰<code>panda</code>èƒ½åŠ›çš„è¯»è€…å¯ä»¥ä½¿ç”¨<code>pd</code>å¿«æ·è¯»å–å¹¶æ„é€ ã€‚</p>\n<pre><code class=\"language-python\">class read_file_batch:\n    def __init__(self,file_path:str, batch_size:int):\n        self.file_fp = open(file_path, encoding='utf-8', mode='r+')\n        self.batch_size = batch_size\n    def __iter__(self):\n        return self\t\t\t\t\t#è¿”å›è¿™ä¸ªè¿­ä»£å™¨æœ¬èº«ï¼Œæˆ‘ä»¬æ˜¯ä»¥ç±»ä½œä¸ºè¿­ä»£å¯¹è±¡ï¼Œå› æ­¤è¿”å›ä»–è‡ªå·±å§\n    def __next__(self):\t\t\t\t#æ•°æ®åˆ’åˆ†\n        batch_res = []\n        for i in range(self.batch_size):\t\n            line = self.file_fp.readline()\t#æœ€åº•å±‚è·å–è¡Œæ•°æ®çš„äº¤äº’æ¥å£\n            if line:                        #å¦‚æœè¡Œéç©º\n                batch_res.append(line)\n            else:                           #è¯»åˆ°æœ€åå°±ç®—ç©ºçš„äº†\n                self.file_fp.close()\n                raise StopIteration\n\n        return batch_res\n</code></pre>\n<ul>\n<li>\n<p>è°ƒç”¨å°è¯•ï¼š</p>\n<p>å¯ä»¥è°ƒè¯•ä¸€ä¸‹ï¼Œæ„Ÿå—ä¸€ä¸‹åˆ†æ‰¹çš„è¿­ä»£åŠæ•°æ®çš„è¾“å…¥è¾“å‡ºã€‚</p>\n<pre><code class=\"language-python\">if __name__ == '__main__':\n    your_file_path:str = r\"E:\\powerlifting-database\\openpowerlifting.csv\"\n    iteration = read_file_batch(your_file_path, batch_size=1000)\n    count = 0\n    for lines in iteration:\n        print('-'*50+f\"count:{count}\"+'-'*50)\n        count += 1\n        print(lines)\n</code></pre>\n</li>\n</ul>\n<h3 id=\"04-å¼•å…¥å¤šçº¿ç¨‹å¤„ç†æ‰¹é‡æ•°æ®\">04 å¼•å…¥å¤šçº¿ç¨‹å¤„ç†æ‰¹é‡æ•°æ®</h3>\n<h4 id=\"41-å¤šçº¿ç¨‹å†™æ³•\">4.1 å¤šçº¿ç¨‹å†™æ³•</h4>\n<p>å…¶å®è›®ç®€å•çš„ï¼Œåªè¦æŠŠæ¥å£å‡½æ•°å†™å¥½ã€æ•°æ®å¤„ç†ä¸€ä¸‹ï¼Œå°±è¡Œäº†ã€‚</p>\n<ol>\n<li>\n<p>å¯¼å…¥åº“ï¼š</p>\n<pre><code class=\"language-python\">from concurrent.futures import ThreadPoolExecutor as Excecutor\n</code></pre>\n</li>\n<li>\n<p>ä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å·¥å…·ç®¡ç†çº¿ç¨‹ï¼ˆç¡®ä¿å®‰å…¨åŠé‡Šæ”¾ï¼‰ï¼š</p>\n<pre><code class=\"language-python\">with Excecutor(max_workers=8) as executor:\n</code></pre>\n</li>\n<li>\n<p>ä½¿ç”¨mapæ¥å£è¿›è¡Œå¤šçº¿ç¨‹æŒ‡ä»¤æ‰§è¡Œï¼š</p>\n<pre><code class=\"language-python\">executor.map(\n    fn= function, iter_element1, iter_element2, iter_element3\n)#functionæ˜¯ä½ å¯¹åº”çš„å‡½æ•°åï¼Œ iter_element1-3æ˜¯å‡½æ•°ä¾èµ–çš„è¾“å…¥æ•°æ®\n</code></pre>\n</li>\n<li>\n<p>æ±‡æ€»ï¼š</p>\n<pre><code class=\"language-python\">from concurrent.futures import ThreadPoolExecutor as Excecutor\nwith Excecutor(max_workers=8) as executor:\n\texecutor.map(\n    fn= function, iter_element1, iter_element2, iter_element3\n)#functionæ˜¯ä½ å¯¹åº”çš„å‡½æ•°åï¼Œ iter_element1-3æ˜¯å‡½æ•°ä¾èµ–çš„è¾“å…¥æ•°æ®\n</code></pre>\n</li>\n</ol>\n<h4 id=\"42-å¼•å…¥å¤šçº¿ç¨‹å¤„ç†æ•°æ®\">4.2 å¼•å…¥å¤šçº¿ç¨‹å¤„ç†æ•°æ®</h4>\n<ol>\n<li>\n<p>é¦–å…ˆï¼Œæ¨¡æ‹Ÿä¸€ä¸ªå¤„ç†è¡Œæ•°æ®çš„å‡½æ•°ç”¨æˆ·å¤„ç†è¡Œä¿¡æ¯ï¼š</p>\n<pre><code class=\"language-python\">def process_dealing(line:str):\n    '''\n    æ¨¡æ‹Ÿå¤„ç†æŸä¸€è¡Œçš„æ•°æ®\n    :param line:å¤„ç†æ¯ä¸€è¡Œ\n    '''\n    print(f'line top 20 info is :{line[:20]}')\n    pass\n</code></pre>\n</li>\n<li>\n<p>åœ¨è¿­ä»£å™¨çš„è¿­ä»£è¿‡ç¨‹ä¸­å¯¹æ•°æ®è¿›è¡Œå¤„ç†ã€‚</p>\n<pre><code class=\"language-python\">if __name__ == '__main__':\n    your_file_path:str = r\"E:\\powerlifting-database\\openpowerlifting.csv\"\n    iteration = read_file_batch(your_file_path, batch_size=1000)\n    count = 0\n    with Excecutor(max_workers=8) as executor:\n\n        for lines in iteration:\n            print('-'*50+f\"count:{count}\"+'-'*50)\n            count += 1\n            print(lines)\n            executor.map(process_dealing, lines)\n            #ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¤„ç†çš„å‡½æ•°ï¼Œåé¢æ˜¯*iteration å°±æ˜¯ä½ å‡½æ•°ä¾èµ–çš„å‚æ•°çš„å¯è¿­ä»£å¯¹è±¡ï¼Œè¿™é‡Œå°±æ˜¯æ”¾å…¥list[str]\n</code></pre>\n</li>\n<li>\n<p>ç»“æŸäº†ï¼Œæ ¹æ®ä½ çš„éœ€è¦å¯ä»¥å¯¹æ•°æ®è¿›è¡Œå¤„ç†äº†ï¼Œå…¶å®æœ€éš¾çš„æ­¥éª¤åœ¨äºå¦‚ä½•æ„é€ è¿­ä»£å™¨ï¼ˆç”Ÿæˆå™¨ï¼‰ï¼Œå¤šçº¿ç¨‹å…¶å®ä¿©æ­¥å°±èµ°å®Œäº†ã€‚</p>\n</li>\n</ol>\n<h3 id=\"05-éå¿…é¡»ä½¿ç”¨è¿­ä»£å™¨å¤šçº¿ç¨‹å‰åå¯¹æ¯”\">05 ï¼ˆéå¿…é¡»ï¼‰ä½¿ç”¨è¿­ä»£å™¨ã€å¤šçº¿ç¨‹å‰åå¯¹æ¯”</h3>\n<pre><code class=\"language-python\">from concurrent.futures import ThreadPoolExecutor as Excecutor\nimport time\nimport tracemalloc  #è·Ÿè¸ªå†…å­˜æ¥å£ï¼Œå†…ç½®\n\ndef process_dealing(line:str):\n    '''\n    æ¨¡æ‹Ÿå¤„ç†æŸä¸€è¡Œçš„æ•°æ®\n    :param line:å¤„ç†æ¯ä¸€è¡Œ\n    '''\n    # print(f'line top 20 info is :{line[:20]}')\n    pass\n\nclass read_file_batch:\n    def __init__(self,file_path:str, batch_size:int):\n        self.file_fp = open(file_path, encoding='utf-8', mode='r+')\n        self.batch_size = batch_size\n    def __iter__(self):\n        return self\n    def __next__(self):                     #æ•°æ®åˆ’åˆ†,å¯¹è¿­ä»£å™¨è¿›è¡Œè¿­ä»£ï¼Œå®é™…ä¸Šæ˜¯è·å–ä»–çš„nextï¼Œå› æ­¤åœ¨è¿™é‡Œåˆ’åˆ†æ•°æ®\n        batch_res = []\n        for i in range(self.batch_size):    #å–batchä¸ª\n            line = self.file_fp.readline()\n            if line:                        #å¦‚æœè¡Œéç©º\n                batch_res.append(line)\n            else:                           #è¯»åˆ°æœ€åå°±ç®—ç©ºçš„äº†\n                self.file_fp.close()\n                raise StopIteration\n\n        return batch_res                    #è¿”å›è¿­ä»£æ•°æ®\n\ndef main_concurrent(file_path,batch_size:int):\n    start_malloc = tracemalloc.start()\n    start_time = time.time()\n    your_file_path:str = file_path\n    iteration = read_file_batch(your_file_path, batch_size=batch_size)\n    count = 0\n    with Excecutor(max_workers=8) as executor:\n\n        for lines in iteration:                         #è¿”å›æ˜¯batchè¡Œ,æ¯ä¸€è¡Œæ˜¯ä¸€ä¸ªå¤§çš„str\n            print('-'*50+f\"count:{count}\"+'-'*50+f\"RAM cost:{round(tracemalloc.get_tracemalloc_memory() / 1024**2,4)} M\")\n            count += 1\n            print(lines[:50])                           #èŠ‚çº¦æ—¶é—´ï¼Œåªå–å‰50å­—ç¬¦\n            executor.map(process_dealing, lines)\n            #ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¤„ç†çš„å‡½æ•°ï¼Œåé¢æ˜¯*iteration å°±æ˜¯ä½ å‡½æ•°ä¾èµ–çš„å‚æ•°çš„å¯è¿­ä»£å¯¹è±¡ï¼Œè¿™é‡Œå°±æ˜¯æ”¾å…¥list[str]\n    print(f'spend time:{round(time.time()-start_time,4)}')\n\ndef main_not_concurrent(file_path,batch_size:int=1000):\n\n    start_time = time.time()\n    start_trace = tracemalloc.start()\n\n    with open(file=file_path,encoding='utf-8',mode='r+') as fp:\n        data = fp.readlines()\n        for idx,line in enumerate(data):\n            if idx % batch_size == 0:\n                print('-'*50 +str(idx)+'-'*50+f\"RAM cost:{round(tracemalloc.get_tracemalloc_memory() / 1024**2,4)} M\")\n                print(line[:50])\n                process_dealing(line)\n    print(f'spend time:{round(time.time()-start_time,4)}')\n\n\nif __name__ == '__main__':\n    file_path = r'E:\\openpowerlifting.csv'\n    batch_size = 1000\n    main_concurrent(file_path,batch_size)\n    # main_not_concurrent(file_path,batch_size)\n    # å…¶å®èƒ½çœ‹å‡ºæ¥è¿™ç§æ•°æ®é‡è¿˜æ˜¯ç›´æ¥ç¼“å­˜åœ¨å†…å­˜æ¯”è¾ƒå¥½ï¼Œä½†ä½¿ç”¨å¤šçº¿ç¨‹+è¿­ä»£å™¨ç¡®å®å‡å°‘äº†å¾ˆå¤šå†…å­˜\n</code></pre>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-11 22:52</span>&nbsp;\n<a href=\"https://www.cnblogs.com/io-T-T\">io_T_T</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">3</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "TensorRtSharpï¼šåœ¨ C# ä¸–ç•Œä¸­é‡Šæ”¾ GPU æ¨ç†çš„æè‡´æ€§èƒ½",
      "link": "https://www.cnblogs.com/guojin-blogs/p/19468745",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/guojin-blogs/p/19468745\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-11 18:47\">\n    <span>TensorRtSharpï¼šåœ¨ C# ä¸–ç•Œä¸­é‡Šæ”¾ GPU æ¨ç†çš„æè‡´æ€§èƒ½</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                    <div id=\"cnblogs_post_description\" style=\"display: none;\">\n        <img alt=\"TensorRtSharpï¼šåœ¨ C# ä¸–ç•Œä¸­é‡Šæ”¾ GPU æ¨ç†çš„æè‡´æ€§èƒ½\" class=\"desc_img\" src=\"https://img2024.cnblogs.com/blog/2933426/202601/2933426-20260111184433092-325501944.png\" />\n        TensorRtSharp 3.0 æ˜¯ä¸€ä¸ªä¸º C# å¼€å‘è€…æ‰“é€ çš„ TensorRT å°è£…åº“ï¼Œé€šè¿‡ NuGet ä¸€é”®å®‰è£…ï¼Œæä¾›å®Œæ•´çš„ GPU æ¨ç†åŠ é€ŸåŠŸèƒ½ã€‚è¯¥åº“åŸºäº TensorRT 10.x å¼€å‘ï¼Œæ”¯æŒ CUDA 11/12ï¼Œå…·å¤‡ç±»å‹å®‰å…¨ã€è‡ªåŠ¨èµ„æºç®¡ç†ç­‰ç‰¹æ€§ï¼Œæ˜¾è‘—æå‡ .NET ç¯å¢ƒä¸‹çš„æ·±åº¦å­¦ä¹ æ¨ç†æ€§èƒ½ï¼ˆé€Ÿåº¦æå‡ 2-10 å€ï¼Œæ˜¾å­˜é™ä½ 50%+ï¼‰ã€‚å®‰è£…ç®€å•ï¼Œåªéœ€æ·»åŠ ä¸¤ä¸ª NuGet åŒ…ï¼Œå¹¶é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®åŸç”Ÿåº“è·¯å¾„å³å¯ä½¿ç”¨ã€‚æ¨èé…ç½®ä¸º CUDA 11.6 + TensorRT 10.13.0.35ï¼Œæ”¯æŒ\n    </div>\n<div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h1 id=\"tensorrtsharpåœ¨-c-ä¸–ç•Œä¸­é‡Šæ”¾-gpu-æ¨ç†çš„æè‡´æ€§èƒ½\">TensorRtSharpï¼šåœ¨ C# ä¸–ç•Œä¸­é‡Šæ”¾ GPU æ¨ç†çš„æè‡´æ€§èƒ½</h1>\n<h2 id=\"ç›®å½•\">ç›®å½•</h2>\n<ul>\n<li><a href=\"#%E4%B8%80%E5%89%8D%E8%A8%80\" rel=\"noopener nofollow\">ä¸€ã€å‰è¨€</a></li>\n<li><a href=\"#%E4%BA%8C%E4%BB%80%E4%B9%88%E6%98%AF-tensortrtsharp\" rel=\"noopener nofollow\">äºŒã€ä»€ä¹ˆæ˜¯ TensorRtSharp</a></li>\n<li><a href=\"#%E4%B8%89%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE\" rel=\"noopener nofollow\">ä¸‰ã€å®‰è£…ä¸é…ç½®</a></li>\n<li><a href=\"#%E5%9B%9B%E6%A0%B8%E5%BF%83%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1\" rel=\"noopener nofollow\">å››ã€æ ¸å¿ƒæ¶æ„è®¾è®¡</a></li>\n<li><a href=\"#%E4%BA%94%E6%A0%B8%E5%BF%83%E7%B1%BB%E4%B8%8E-api\" rel=\"noopener nofollow\">äº”ã€æ ¸å¿ƒç±»ä¸ API</a></li>\n<li><a href=\"#%E5%85%AD%E5%AE%8C%E6%95%B4%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B\" rel=\"noopener nofollow\">å…­ã€å®Œæ•´ä½¿ç”¨ç¤ºä¾‹</a></li>\n<li><a href=\"#%E4%B8%83%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86\" rel=\"noopener nofollow\">ä¸ƒã€å¼‚å¸¸å¤„ç†</a></li>\n<li><a href=\"#%E5%85%AB%E6%97%A5%E5%BF%97%E7%B3%BB%E7%BB%9F\" rel=\"noopener nofollow\">å…«ã€æ—¥å¿—ç³»ç»Ÿ</a></li>\n<li><a href=\"#%E4%B9%9D%E4%B8%8E%E5%85%B6%E4%BB%96%E5%BA%93%E7%9A%84%E5%AF%B9%E6%AF%94\" rel=\"noopener nofollow\">ä¹ã€ä¸å…¶ä»–åº“çš„å¯¹æ¯”</a></li>\n<li><a href=\"#%E5%8D%81%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98\" rel=\"noopener nofollow\">åã€å¸¸è§é—®é¢˜</a></li>\n<li><a href=\"#%E5%8D%81%E4%B8%80%E6%80%BB%E7%BB%93\" rel=\"noopener nofollow\">åä¸€ã€æ€»ç»“</a></li>\n</ul>\n<hr />\n<h2 id=\"ä¸€å‰è¨€\">ä¸€ã€å‰è¨€</h2>\n<h3 id=\"11-ä¸ºä»€ä¹ˆéœ€è¦-tensorrtsharp\">1.1 ä¸ºä»€ä¹ˆéœ€è¦ TensorRtSharpï¼Ÿ</h3>\n<p>åœ¨æ·±åº¦å­¦ä¹ æ¨¡å‹éƒ¨ç½²é¢†åŸŸï¼ŒNVIDIA TensorRT å‡­å€Ÿå…¶å“è¶Šçš„æ¨ç†æ€§èƒ½å·²æˆä¸º GPU åŠ é€Ÿçš„äº‹å®æ ‡å‡†ã€‚æ ¹æ® NVIDIA å®˜æ–¹æ•°æ®ï¼Œä½¿ç”¨ TensorRT è¿›è¡Œæ¨¡å‹ä¼˜åŒ–å’Œæ¨ç†åŠ é€Ÿï¼Œé€šå¸¸å¯ä»¥è·å¾—ï¼š</p>\n<ul>\n<li>ğŸ“ˆ <strong>æ¨ç†é€Ÿåº¦æå‡ 2-10 å€</strong>ï¼ˆç›¸æ¯”åŸç”Ÿæ¡†æ¶ï¼‰</li>\n<li>ğŸ’¾ <strong>æ˜¾å­˜å ç”¨é™ä½ 50% ä»¥ä¸Š</strong>ï¼ˆé€šè¿‡ç²¾åº¦ä¼˜åŒ–å’Œå±‚èåˆï¼‰</li>\n<li>âš¡ <strong>å»¶è¿Ÿé™ä½è‡³æ¯«ç§’çº§</strong>ï¼ˆæ»¡è¶³å®æ—¶åº”ç”¨éœ€æ±‚ï¼‰</li>\n</ul>\n<p>ç„¶è€Œï¼ŒTensorRT å®˜æ–¹ä»…æä¾› C++ å’Œ Python APIï¼Œè¿™è®©å¹¿å¤§ .NET å¼€å‘è€…é¢ä¸´ä¸€ä¸ªä¸¤éš¾çš„é€‰æ‹©ï¼š</p>\n<ul>\n<li><strong>æ”¾å¼ƒç†Ÿæ‚‰çš„ C# ç”Ÿæ€</strong>ï¼Œè½¬å‘ C++ æˆ– Python</li>\n<li><strong>é€šè¿‡å¤æ‚çš„äº’æ“ä½œå±‚</strong>è¿›è¡Œè°ƒç”¨ï¼Œå¼€å‘æ•ˆç‡ä½ä¸‹</li>\n</ul>\n<p><strong>TensorRtSharp</strong> åº”è¿è€Œç”Ÿ â€”â€” è¿™æ˜¯ä¸€ä¸ªçº¯ C# ç¼–å†™çš„ TensorRT å®Œæ•´å°è£…åº“ï¼Œä¸º .NET å¼€å‘è€…æä¾›äº†ï¼š</p>\n<ul>\n<li>âœ… <strong>ç±»å‹å®‰å…¨çš„ API æ¥å£</strong> - å¼ºç±»å‹ç³»ç»Ÿï¼Œç¼–è¯‘æ—¶é”™è¯¯æ£€æŸ¥</li>\n<li>âœ… <strong>æ˜“äºä½¿ç”¨ä¸”æ€§èƒ½å“è¶Š</strong> - ç›´è§‚çš„ API è®¾è®¡ï¼Œé›¶æ€§èƒ½æŸå¤±</li>\n<li>âœ… <strong>å®Œæ•´çš„ TensorRT åŠŸèƒ½è¦†ç›–</strong> - æ”¯æŒæ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½</li>\n<li>âœ… <strong>è‡ªåŠ¨èµ„æºç®¡ç†</strong> - åŸºäº RAII å’Œ Dispose æ¨¡å¼ï¼Œæ— éœ€æ‹…å¿ƒå†…å­˜æ³„æ¼</li>\n<li>âœ… <strong>å¼€ç®±å³ç”¨</strong> - NuGet ä¸€é”®å®‰è£…ï¼Œæ— éœ€å¤æ‚é…ç½®</li>\n<li>âœ… <strong>å®Œå–„çš„æ–‡æ¡£å’Œç¤ºä¾‹</strong> - ä¸°å¯Œçš„ä»£ç ç¤ºä¾‹å’Œè¯¦ç»†çš„ä½¿ç”¨è¯´æ˜</li>\n</ul>\n<h3 id=\"12-tensorrtsharp-çš„æ ¸å¿ƒä¼˜åŠ¿\">1.2 TensorRtSharp çš„æ ¸å¿ƒä¼˜åŠ¿</h3>\n<p><strong>1. åŸç”Ÿ C# ä½“éªŒ</strong></p>\n<pre><code class=\"language-csharp\">// ç®€æ´ç›´è§‚çš„ API è®¾è®¡\nusing Runtime runtime = new Runtime();\nusing CudaEngine engine = runtime.deserializeCudaEngineByBlob(data, size);\nusing ExecutionContext context = engine.createExecutionContext();\ncontext.executeV3(stream);\n</code></pre>\n<p><strong>2. å®Œæ•´åŠŸèƒ½è¦†ç›–</strong></p>\n<ul>\n<li>âœ… æ¨¡å‹æ„å»ºï¼ˆONNX â†’ Engineï¼‰</li>\n<li>âœ… æ¨ç†æ‰§è¡Œï¼ˆåŒæ­¥/å¼‚æ­¥ï¼‰</li>\n<li>âœ… åŠ¨æ€å½¢çŠ¶æ”¯æŒ</li>\n<li>âœ… å¤šç²¾åº¦æ¨ç†ï¼ˆFP32/FP16/INT8ï¼‰</li>\n<li>âœ… å¤š GPU å¹¶è¡Œæ¨ç†</li>\n</ul>\n<h3 id=\"13-tensorrtsharp-30-çš„é‡å¤§æ”¹è¿›\">1.3 TensorRtSharp 3.0 çš„é‡å¤§æ”¹è¿›</h3>\n<p>åœ¨å‰æœŸå¼€å‘çš„ TensorRtSharp 1.0 å’Œ 2.0 ä¸­ï¼Œä½¿ç”¨è€…éœ€è¦ä¸‹è½½æºç ç¼–è¯‘æ‰èƒ½ä½¿ç”¨ï¼Œè¿‡ç¨‹ç¹çä¸”å®¹æ˜“å‡ºé”™ã€‚</p>\n<p><strong>åœ¨æœ€æ–°çš„ 3.0 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬è¿›è¡Œäº†é‡å¤§æ”¹è¿›</strong>ï¼š</p>\n<p>âœ… <strong>ä¸€é”®å®‰è£…</strong> - ç›´æ¥å°†ç¼–è¯‘å¥½çš„åŸç”Ÿåº“ä¸æ‰˜ç®¡ä»£ç æ‰“åŒ…è‡³ NuGet åŒ…ä¸­<br />\nâœ… <strong>å¼€ç®±å³ç”¨</strong> - æ— éœ€é…ç½®å¤æ‚çš„æ„å»ºç¯å¢ƒ<br />\nâœ… <strong>ç‰ˆæœ¬ä¸€è‡´</strong> - é™ä½å› ç¯å¢ƒå·®å¼‚å¯¼è‡´çš„æ½œåœ¨é”™è¯¯</p>\n<p>å¼€å‘è€…ä»…éœ€é€šè¿‡ Visual Studio çš„ NuGet åŒ…ç®¡ç†å™¨å®‰è£…å³å¯ç›´æ¥ä½¿ç”¨ï¼Œæ˜¾è‘—æå‡äº†å¼€å‘æ•ˆç‡ä¸éƒ¨ç½²ä¾¿æ·æ€§ï¼</p>\n<p>æœ¬æ–‡å°†å…¨é¢ä»‹ç» TensorRtSharp çš„è®¾è®¡ç†å¿µã€æ ¸å¿ƒåŠŸèƒ½å’Œä½¿ç”¨æ–¹æ³•ï¼ŒåŠ©åŠ›å¤§å®¶å¿«é€Ÿä¸Šæ‰‹ä½¿ç”¨ã€‚</p>\n<hr />\n<h2 id=\"äºŒä»€ä¹ˆæ˜¯-tensorrtsharp\">äºŒã€ä»€ä¹ˆæ˜¯ TensorRtSharp</h2>\n<h3 id=\"21-é¡¹ç›®ç®€ä»‹\">2.1 é¡¹ç›®ç®€ä»‹</h3>\n<p><strong>TensorRtSharp 3.0</strong> æ˜¯ä½œè€…å¯¹ NVIDIA TensorRT å®˜æ–¹åº“çš„å®Œæ•´ C# æ¥å£å°è£…ã€‚é€šè¿‡ P/Invoke æŠ€æœ¯ï¼Œå®ƒå°† TensorRT çš„åŸç”Ÿ C++ API æ˜ å°„ä¸ºç¬¦åˆ .NET è®¾è®¡è§„èŒƒçš„æ‰˜ç®¡ä»£ç ï¼Œè®© C# å¼€å‘è€…èƒ½å¤Ÿæ— ç¼ä½¿ç”¨ TensorRT çš„å…¨éƒ¨åŠŸèƒ½ã€‚</p>\n<h3 id=\"22-æ ¸å¿ƒç‰¹æ€§\">2.2 æ ¸å¿ƒç‰¹æ€§</h3>\n<table>\n<thead>\n<tr>\n<th>ç‰¹æ€§</th>\n<th>è¯´æ˜</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>å®Œæ•´çš„ API è¦†ç›–</strong></td>\n<td>æ”¯æŒ TensorRT æ ¸å¿ƒåŠŸèƒ½ï¼ŒåŒ…æ‹¬æ¨¡å‹æ„å»ºã€æ¨ç†æ‰§è¡Œã€åŠ¨æ€å½¢çŠ¶ç­‰</td>\n</tr>\n<tr>\n<td><strong>ç±»å‹å®‰å…¨</strong></td>\n<td>å¼ºç±»å‹ç³»ç»Ÿï¼Œç¼–è¯‘æ—¶é”™è¯¯æ£€æŸ¥ï¼Œé¿å…è¿è¡Œæ—¶ç±»å‹é”™è¯¯</td>\n</tr>\n<tr>\n<td><strong>è‡ªåŠ¨èµ„æºç®¡ç†</strong></td>\n<td>åŸºäº RAII å’Œ Dispose æ¨¡å¼çš„èµ„æºç®¡ç†ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼</td>\n</tr>\n<tr>\n<td><strong>è·¨å¹³å°æ”¯æŒ</strong></td>\n<td>æ”¯æŒ Windowsã€Linuxï¼Œå…¼å®¹ .NET 5.0-10.0ã€.NET Core 3.1ã€.NET Framework 4.7.1-4.8.1</td>\n</tr>\n<tr>\n<td><strong>é«˜æ€§èƒ½å¼‚æ­¥æ‰§è¡Œ</strong></td>\n<td>æ”¯æŒ CUDA Streamã€å¤šæ‰§è¡Œä¸Šä¸‹æ–‡å¹¶è¡Œæ¨ç†</td>\n</tr>\n<tr>\n<td><strong>å¼€ç®±å³ç”¨</strong></td>\n<td>NuGet åŒ…å«æ‰€æœ‰ä¾èµ–ï¼Œæ— éœ€å¤æ‚é…ç½®</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"23-é¡¹ç›®ä¿¡æ¯\">2.3 é¡¹ç›®ä¿¡æ¯</h3>\n<table>\n<thead>\n<tr>\n<th>é¡¹ç›®</th>\n<th>ä¿¡æ¯</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>ç‰ˆæœ¬</strong></td>\n<td>ç›®å‰æœ€æ–° NuGet ç‰ˆæœ¬ä¸º 0.0.5ï¼ˆæŒç»­æ›´æ–°ä¸­ï¼Œå»ºè®®ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ï¼‰</td>\n</tr>\n<tr>\n<td><strong>GitHub</strong></td>\n<td><code>https://github.com/guojin-yan/TensorRT-CSharp-API</code></td>\n</tr>\n<tr>\n<td><strong>æ¥å£ NuGet</strong></td>\n<td><code>JYPPX.TensorRT.CSharp.API</code></td>\n</tr>\n<tr>\n<td><strong>Runtime NuGet</strong></td>\n<td><code>JYPPX.TensorRT.CSharp.API.runtime.win-x64.cuda12</code> æˆ– <code>JYPPX.TensorRT.CSharp.API.runtime.win-x64.cuda11</code></td>\n</tr>\n<tr>\n<td><strong>ç¼–ç¨‹è¯­è¨€</strong></td>\n<td>C# 10</td>\n</tr>\n</tbody>\n</table>\n<hr />\n<h2 id=\"ä¸‰å®‰è£…ä¸é…ç½®\">ä¸‰ã€å®‰è£…ä¸é…ç½®</h2>\n<h3 id=\"31-é€šè¿‡-nuget-å®‰è£…\">3.1 é€šè¿‡ NuGet å®‰è£…</h3>\n<p>å®‰è£… TensorRtSharp éå¸¸ç®€å•ï¼Œåªéœ€å®‰è£…ä¸¤ä¸ª NuGet åŒ…ï¼š</p>\n<pre><code class=\"language-bash\"># å®‰è£…æ¥å£åŒ…\ndotnet add package JYPPX.TensorRT.CSharp.API\n\n# å®‰è£…è¿è¡Œæ—¶åŒ…ï¼ˆæ ¹æ®æ‚¨çš„ CUDA ç‰ˆæœ¬é€‰æ‹©ï¼‰\n# CUDA 12.x ç‰ˆæœ¬\ndotnet add package JYPPX.TensorRT.CSharp.API.runtime.win-x64.cuda12\n\n# æˆ– CUDA 11.x ç‰ˆæœ¬\ndotnet add package JYPPX.TensorRT.CSharp.API.runtime.win-x64.cuda11\n</code></pre>\n<blockquote>\n<p><strong>ğŸ’¡ å°è´´å£«</strong>ï¼šRuntime åŒ…ä¸ CUDA ç‰ˆæœ¬ç›¸å…³ï¼Œè¯·æ ¹æ®æ‚¨è®¾å¤‡ä¸Šå®‰è£…çš„ CUDA ç‰ˆæœ¬é€‰æ‹©å¯¹åº”çš„åŒ…ã€‚</p>\n</blockquote>\n<p><img alt=\"image-20260109233203782\" class=\"lazyload\" /></p>\n<h3 id=\"32-ç³»ç»Ÿè¦æ±‚\">3.2 ç³»ç»Ÿè¦æ±‚</h3>\n<table>\n<thead>\n<tr>\n<th>è¦æ±‚</th>\n<th>è¯´æ˜</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>æ“ä½œç³»ç»Ÿ</strong></td>\n<td>Windows 10+ã€Linuxï¼ˆUbuntu 18.04+ï¼‰ã€macOS 10.15+</td>\n</tr>\n<tr>\n<td><strong>.NET ç‰ˆæœ¬</strong></td>\n<td>.NET 5.0-10.0ã€.NET Core 3.1ã€.NET Framework 4.7.1+</td>\n</tr>\n<tr>\n<td><strong>GPU</strong></td>\n<td>NVIDIA GPUï¼ˆæ”¯æŒ CUDA 11.x æˆ– 12.xï¼‰</td>\n</tr>\n<tr>\n<td><strong>ä¾èµ–</strong></td>\n<td>NVIDIA TensorRT 10.xã€CUDA Runtime</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"33-é‡è¦ç‰ˆæœ¬è¯´æ˜\">3.3 é‡è¦ç‰ˆæœ¬è¯´æ˜</h3>\n<blockquote>\n<p><strong>âš ï¸ é‡è¦æé†’ï¼šNVIDIA TensorRT å¿…é¡»æ˜¯ 10.x ç³»åˆ—ï¼ï¼</strong></p>\n</blockquote>\n<p>TensorRtSharp 3.0 åŸºäº TensorRT 10.x å¼€å‘ï¼Œä¸æ”¯æŒ TensorRT 8.x æˆ– 9.x ç‰ˆæœ¬ã€‚</p>\n<p>ä¸ºäº†é˜²æ­¢å‡ºç°å…¼å®¹æ€§é—®é¢˜ï¼Œå»ºè®®ä½¿ç”¨ä¸åšä¸»ç›¸åŒçš„é…ç½®ï¼š</p>\n<p><strong>é…ç½® 1ï¼ˆæ¨èï¼‰ï¼š</strong></p>\n<ul>\n<li>CUDA 11.6</li>\n<li>cuDNN 9.2.0</li>\n<li>TensorRT 10.13.0.35</li>\n</ul>\n<p><strong>é…ç½® 2ï¼š</strong></p>\n<ul>\n<li>CUDA 12.3</li>\n<li>cuDNN 9.2.0</li>\n<li>TensorRT 10.11.0.33</li>\n</ul>\n<h3 id=\"34-é…ç½®åŸç”Ÿåº“\">3.4 é…ç½®åŸç”Ÿåº“</h3>\n<p>TensorRtSharp ä¾èµ– TensorRT çš„åŸç”Ÿåº“ï¼ˆ<code>nvinfer.dll</code>ï¼‰å’Œ CUDA çš„åŸç”Ÿåº“ï¼ˆ<code>cudart64_*.dll</code> ç­‰ï¼‰ã€‚æœ‰ä¸¤ç§é…ç½®æ–¹å¼ï¼š</p>\n<h4 id=\"æ–¹å¼ä¸€æ‹·è´-dll-åˆ°åº”ç”¨ç¨‹åºç›®å½•ä¸æ¨è\">æ–¹å¼ä¸€ï¼šæ‹·è´ DLL åˆ°åº”ç”¨ç¨‹åºç›®å½•ï¼ˆä¸æ¨èï¼‰</h4>\n<p>å°† TensorRT å’Œ CUDA çš„æ‰€æœ‰ DLL æ–‡ä»¶æ‹·è´åˆ°ç¨‹åºå¯æ‰§è¡Œç›®å½•ä¸‹ã€‚</p>\n<p><strong>ç¼ºç‚¹</strong>ï¼š</p>\n<ul>\n<li>ä¼šå¯¼è‡´ç¨‹åºç›®å½•æ–‡ä»¶åºå¤§</li>\n<li>ä¸æ–¹ä¾¿ç®¡ç†ä¸éƒ¨ç½²</li>\n<li><strong>ä¸æ¨èä½¿ç”¨æ­¤æ–¹å¼</strong></li>\n</ul>\n<h4 id=\"æ–¹å¼äºŒè®¾ç½®ç³»ç»Ÿ-pathæ¨è\">æ–¹å¼äºŒï¼šè®¾ç½®ç³»ç»Ÿ PATHï¼ˆæ¨èï¼‰</h4>\n<p>å°† TensorRT çš„ lib ç›®å½•å’Œ CUDA çš„ bin ç›®å½•è·¯å¾„æ·»åŠ åˆ°ç³»ç»Ÿ PATH ç¯å¢ƒå˜é‡ä¸­ã€‚</p>\n<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>\n<ul>\n<li>æ— éœ€å¤åˆ¶å¤§é‡æ–‡ä»¶</li>\n<li>ä¿æŒåº”ç”¨ç›®å½•æ•´æ´</li>\n<li>ä¾¿äºç‰ˆæœ¬ç®¡ç†å’Œéƒ¨ç½²ç»´æŠ¤</li>\n</ul>\n<p><strong>é…ç½®æ­¥éª¤</strong>ï¼š</p>\n<ol>\n<li><strong>è®¾ç½® CUDA_PATH ç¯å¢ƒå˜é‡</strong></li>\n</ol>\n<p><img alt=\"CUDA_PATH é…ç½®\" class=\"lazyload\" /></p>\n<ol start=\"2\">\n<li><strong>è®¾ç½® PATH ç¯å¢ƒå˜é‡</strong></li>\n</ol>\n<p>å°†ä»¥ä¸‹è·¯å¾„æ·»åŠ åˆ° PATHï¼š</p>\n<ul>\n<li>CUDA çš„ bin ç›®å½•ï¼ˆå¦‚ <code>C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v11.6\\bin</code>ï¼‰</li>\n<li>TensorRT çš„ lib ç›®å½•ï¼ˆå¦‚ <code>C:\\TensorRT-10.13.0.35\\lib</code>ï¼‰</li>\n</ul>\n<p><img alt=\"PATH é…ç½®\" class=\"lazyload\" /></p>\n<blockquote>\n<p><strong>ğŸ’¡ å»ºè®®</strong>ï¼šä¼˜å…ˆä½¿ç”¨ç¯å¢ƒå˜é‡æ–¹å¼é…ç½®ï¼Œé¿å…å› æ–‡ä»¶å†—ä½™å¯¼è‡´éƒ¨ç½²å¤æ‚ã€‚åŒæ—¶æ³¨æ„ä¸åŒ CUDA ç‰ˆæœ¬é—´çš„å…¼å®¹æ€§é—®é¢˜ã€‚</p>\n</blockquote>\n<hr />\n<h2 id=\"å››æ ¸å¿ƒæ¶æ„è®¾è®¡\">å››ã€æ ¸å¿ƒæ¶æ„è®¾è®¡</h2>\n<h3 id=\"41-ä¸‰å±‚æ¶æ„\">4.1 ä¸‰å±‚æ¶æ„</h3>\n<p>TensorRtSharp é‡‡ç”¨æ¸…æ™°çš„ä¸‰å±‚æ¶æ„è®¾è®¡ï¼š</p>\n<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚           ä¸šåŠ¡ API å±‚ (High-Level API)                   â”‚\nâ”‚  Runtime, Builder, CudaEngine, ExecutionContext         â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                           â–²\n                           â”‚\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚         èµ„æºç®¡ç†å±‚ (Resource Management)                 â”‚\nâ”‚  DisposableTrtObject, DisposableObject, IOvPtrHolder    â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                           â–²\n                           â”‚\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚         P/Invoke å±‚ (Native Interop)                    â”‚\nâ”‚  NativeMethodsTensorRt*, NativeMethodsCuda*             â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n</code></pre>\n<h3 id=\"42-è‡ªåŠ¨èµ„æºç®¡ç†\">4.2 è‡ªåŠ¨èµ„æºç®¡ç†</h3>\n<p>TensorRtSharp å®ç°äº†å®Œå–„çš„èµ„æºç®¡ç†æœºåˆ¶ï¼Œæ‰€æœ‰ TensorRT å¯¹è±¡éƒ½ç»§æ‰¿è‡ª <code>DisposableTrtObject</code>ï¼š</p>\n<pre><code class=\"language-csharp\">// æ‰€æœ‰ TensorRT å¯¹è±¡ç»§æ‰¿è‡ª DisposableTrtObject\npublic abstract class DisposableTrtObject : DisposableObject\n{\n    protected IntPtr ptr;                      // åŸç”Ÿå¯¹è±¡æŒ‡é’ˆ\n    public bool IsDisposed { get; protected set; }\n\n    // å®‰å…¨è®¿é—®åŸç”ŸæŒ‡é’ˆï¼ˆè‡ªåŠ¨æ£€æŸ¥é‡Šæ”¾çŠ¶æ€ï¼‰\n    public IntPtr TrtPtr\n    {\n        get\n        {\n            ThrowIfDisposed();\n            return ptr;\n        }\n    }\n\n    // é‡Šæ”¾éæ‰˜ç®¡èµ„æº\n    protected override void DisposeUnmanaged()\n    {\n        if (ptr != IntPtr.Zero)\n        {\n            // è°ƒç”¨åŸç”Ÿé‡Šæ”¾å‡½æ•°\n            NativeDestroy(ptr);\n            ptr = IntPtr.Zero;\n        }\n    }\n}\n\n// ä½¿ç”¨ using è¯­å¥è‡ªåŠ¨é‡Šæ”¾èµ„æº\nusing Runtime runtime = new Runtime();\nusing CudaEngine engine = runtime.deserializeCudaEngineByBlob(data, size);\n// ç¦»å¼€ä½œç”¨åŸŸæ—¶è‡ªåŠ¨é‡Šæ”¾\n</code></pre>\n<p><strong>è®¾è®¡äº®ç‚¹</strong>ï¼š</p>\n<ul>\n<li>âœ… é‡‡ç”¨æ ‡å‡† Dispose æ¨¡å¼ï¼Œç¡®ä¿èµ„æºæ­£ç¡®é‡Šæ”¾</li>\n<li>âœ… çº¿ç¨‹å®‰å…¨çš„èµ„æºé‡Šæ”¾æœºåˆ¶ï¼ˆä½¿ç”¨ <code>Interlocked.Exchange</code>ï¼‰</li>\n<li>âœ… è‡ªåŠ¨å†…å­˜å‹åŠ›é€šçŸ¥ï¼ˆ<code>GC.AddMemoryPressure</code>ï¼‰</li>\n<li>âœ… æŒ‡é’ˆå®‰å…¨è®¿é—®ï¼ˆ<code>ThrowIfDisposed</code> æ£€æŸ¥ï¼‰</li>\n</ul>\n<hr />\n<h2 id=\"äº”æ ¸å¿ƒç±»ä¸-api\">äº”ã€æ ¸å¿ƒç±»ä¸ API</h2>\n<h3 id=\"51-å‘½åç©ºé—´\">5.1 å‘½åç©ºé—´</h3>\n<p>åœ¨ä½¿ç”¨ TensorRtSharp ä¹‹å‰ï¼Œé¦–å…ˆå¼•å…¥å¿…è¦çš„å‘½åç©ºé—´ï¼š</p>\n<pre><code class=\"language-csharp\">using JYPPX.TensorRtSharp.Cuda;      // CUDA æ¥å£çš„ç¨‹åºé›†å‘½åç©ºé—´\nusing JYPPX.TensorRtSharp.Nvinfer;   // TensorRT æ¥å£çš„ç¨‹åºé›†å‘½åç©ºé—´\n</code></pre>\n<h3 id=\"52-runtimeæ¨ç†è¿è¡Œæ—¶\">5.2 Runtimeï¼ˆæ¨ç†è¿è¡Œæ—¶ï¼‰</h3>\n<p>Runtime æ˜¯ TensorRT æ¨ç†çš„å…¥å£ç‚¹ï¼Œè´Ÿè´£ä»åºåˆ—åŒ–çš„å¼•æ“æ–‡ä»¶åˆ›å»ºæ¨ç†å¼•æ“ã€‚</p>\n<pre><code class=\"language-csharp\">// åˆ›å»º Runtime å®ä¾‹\nRuntime runtime = new Runtime();\nstring filePath = \"yolov8s-obb.engine\";\n\n// ä»å­—èŠ‚æ•°ç»„ååºåˆ—åŒ–å¼•æ“\nbyte[] data = File.ReadAllBytes(filePath);\nusing CudaEngine cudaEngine = runtime.deserializeCudaEngineByBlob(data, (ulong)data.Length);\n\n// ä»æ–‡ä»¶æµååºåˆ—åŒ–\nusing var reader = new FileStreamReader();\nreader.open(filePath);\nusing CudaEngine cudaEngine = runtime.deserializeCudaEngineByFileStreamReader(reader);\n\n// é…ç½® DLAï¼ˆæ·±åº¦å­¦ä¹ åŠ é€Ÿå™¨ï¼‰\nruntime.setDLACore(0);  // ä½¿ç”¨ DLA æ ¸å¿ƒ 0\nint dlaCores = runtime.getNbDLACores();\n\n// è®¾ç½®æœ€å¤§çº¿ç¨‹æ•°\nruntime.setMaxThreads(4);\n</code></pre>\n<p><strong>ä¸»è¦ç”¨é€”</strong>ï¼š</p>\n<ul>\n<li>ååºåˆ—åŒ– TensorRT å¼•æ“æ–‡ä»¶</li>\n<li>é…ç½® DLA åŠ é€Ÿå™¨</li>\n<li>åŠ è½½æ’ä»¶åº“</li>\n</ul>\n<h3 id=\"53-builderæ¨¡å‹æ„å»ºå™¨\">5.3 Builderï¼ˆæ¨¡å‹æ„å»ºå™¨ï¼‰</h3>\n<p>Builder ç”¨äºä» ONNX æ¨¡å‹æ„å»º TensorRT å¼•æ“ã€‚</p>\n<pre><code class=\"language-csharp\">using Builder builder = new Builder();\n\n// æŸ¥è¯¢å¹³å°èƒ½åŠ›\nbool hasFP16 = builder.platformHasFastFp16();  // æ˜¯å¦æ”¯æŒ FP16\nbool hasINT8 = builder.platformHasFastInt8();  // æ˜¯å¦æ”¯æŒ INT8\nint maxDLABatch = builder.maxDLABatchSize();   // DLA æœ€å¤§æ‰¹å¤§å°\n\n// åˆ›å»ºç½‘ç»œå®šä¹‰ï¼ˆæ˜¾å¼æ‰¹å¤„ç†æ¨¡å¼ï¼‰\nusing NetworkDefinition network = builder.createNetworkV2(\n    TrtNetworkDefinitionCreationFlag.kEXPLICIT_BATCH);\n\n// åˆ›å»ºæ„å»ºå™¨é…ç½®\nusing BuilderConfig config = builder.createBuilderConfig();\n\n// åˆ›å»ºä¼˜åŒ–é…ç½®æ–‡ä»¶ï¼ˆç”¨äºåŠ¨æ€å½¢çŠ¶ï¼‰\nusing OptimizationProfile profile = builder.createOptimizationProfile();\n\n// æ„å»ºåºåˆ—åŒ–ç½‘ç»œ\nusing HostMemory serialized = builder.buildSerializedNetwork(network, config);\n\n// ä¿å­˜å¼•æ“æ–‡ä»¶\nusing (FileStream fs = new FileStream(\"model.engine\", FileMode.Create, FileAccess.Write))\n{\n    fs.Write(serialized.getByteData(), 0, (int)serialized.Size);\n}\n</code></pre>\n<p><strong>ä¸»è¦ç”¨é€”</strong>ï¼š</p>\n<ul>\n<li>åˆ›å»ºç½‘ç»œå®šä¹‰å’Œæ„å»ºé…ç½®</li>\n<li>æŸ¥è¯¢ç¡¬ä»¶èƒ½åŠ›ï¼ˆFP16ã€INT8ã€DLAï¼‰</li>\n<li>æ„å»º TensorRT å¼•æ“</li>\n<li>æ³¨å†Œè‡ªå®šä¹‰æ’ä»¶</li>\n</ul>\n<h3 id=\"54-cudaengineæ¨ç†å¼•æ“\">5.4 CudaEngineï¼ˆæ¨ç†å¼•æ“ï¼‰</h3>\n<p>CudaEngine æ˜¯æ¨ç†çš„æ ¸å¿ƒå¯¹è±¡ï¼ŒåŒ…å«ä¼˜åŒ–åçš„æ¨¡å‹è®¡ç®—å›¾ã€‚</p>\n<pre><code class=\"language-csharp\">// è·å–å¼ é‡ä¿¡æ¯\nint numTensors = engine.getNbIOTensors();\nstring inputName = engine.getIOTensorName(0);    // è¾“å…¥å¼ é‡åç§°\nstring outputName = engine.getIOTensorName(1);   // è¾“å‡ºå¼ é‡åç§°\n\nDims inputShape = engine.getTensorShape(inputName);\nTrtDataType inputType = engine.getTensorDataType(inputName);\n\n// åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡\nusing ExecutionContext context = engine.createExecutionContext();\nusing ExecutionContext contextStatic = engine.createExecutionContext(\n    TrtExecutionContextAllocationStrategy.kSTATIC);\n\n// åºåˆ—åŒ–å¼•æ“\nusing HostMemory memory = engine.serialize();\n\n// æŸ¥è¯¢å¼•æ“å±æ€§\nint numLayers = engine.getNbLayers();\nstring name = engine.getName();\nlong deviceMemory = engine.getDeviceMemorySize();\n</code></pre>\n<p><strong>ä¸»è¦ç”¨é€”</strong>ï¼š</p>\n<ul>\n<li>æŸ¥è¯¢æ¨¡å‹è¾“å…¥è¾“å‡ºä¿¡æ¯</li>\n<li>åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡</li>\n<li>åºåˆ—åŒ–å¼•æ“</li>\n<li>æ€§èƒ½åˆ†æ</li>\n</ul>\n<h3 id=\"55-executioncontextæ‰§è¡Œä¸Šä¸‹æ–‡\">5.5 ExecutionContextï¼ˆæ‰§è¡Œä¸Šä¸‹æ–‡ï¼‰</h3>\n<p>ExecutionContext ç®¡ç†å•æ¬¡æ¨ç†çš„æ‰§è¡Œç¯å¢ƒï¼Œæ”¯æŒå¼‚æ­¥æ¨ç†å’ŒåŠ¨æ€å½¢çŠ¶ã€‚</p>\n<pre><code class=\"language-csharp\">// ç»‘å®šå¼ é‡åœ°å€\nCuda1DMemory&lt;float&gt; input = new Cuda1DMemory&lt;float&gt;(3 * 1024 * 1024);\nCuda1DMemory&lt;float&gt; output = new Cuda1DMemory&lt;float&gt;(1 * 20 * 21504);\ncontext.setInputTensorAddress(\"images\", input.get());\ncontext.setOutputTensorAddress(\"output0\", output.get());\n\n// è®¾ç½®åŠ¨æ€å½¢çŠ¶\ncontext.setinputShape(\"images\", new Dims(1, 3, 1024, 1024));\nDims shape = context.getTensorShape(\"images\");\n\n// æ‰§è¡Œæ¨ç†ï¼ˆå¼‚æ­¥ï¼Œä½¿ç”¨ CUDA Streamï¼‰\nusing CudaStream stream = new CudaStream();\ncontext.executeV3(stream);\nstream.Synchronize();  // ç­‰å¾…å®Œæˆ\n\n// è®¾ç½®ä¼˜åŒ–é…ç½®æ–‡ä»¶ï¼ˆåŠ¨æ€å½¢çŠ¶ï¼‰\ncontext.setOptimizationProfileAsync(0, stream);\n\n// è°ƒè¯•åŠŸèƒ½\ncontext.setDebugSync(true);\n</code></pre>\n<p><strong>ä¸»è¦ç”¨é€”</strong>ï¼š</p>\n<ul>\n<li>ç»‘å®šè¾“å…¥è¾“å‡ºå¼ é‡</li>\n<li>è®¾ç½®åŠ¨æ€å½¢çŠ¶</li>\n<li>æ‰§è¡Œæ¨ç†ï¼ˆå¼‚æ­¥ï¼‰</li>\n<li>æ€§èƒ½åˆ†æå’Œè°ƒè¯•</li>\n</ul>\n<h3 id=\"56-onnxparseronnx-è§£æå™¨\">5.6 OnnxParserï¼ˆONNX è§£æå™¨ï¼‰</h3>\n<p>OnnxParser å°† ONNX æ¨¡å‹è½¬æ¢ä¸º TensorRT ç½‘ç»œå®šä¹‰ã€‚</p>\n<pre><code class=\"language-csharp\">// è§£æ ONNX æ–‡ä»¶\nusing NetworkDefinition network = build.createNetworkV2(TrtNetworkDefinitionCreationFlag.kEXPLICIT_BATCH);\nusing OnnxParser parser = new OnnxParser(network);\nbool success = parser.parseFromFile(\"yolov8s-obb.onnx\", verbosity: 2);\n\n// æ£€æŸ¥ç®—å­æ”¯æŒ\nbool supportsConv = parser.supportsOperator(\"Conv\");\n\n// å­å›¾æ”¯æŒ\nlong numSubgraphs = parser.getNbSubgraphs();\nbool supported = parser.isSubgraphSupported(0);\nlong[] nodes = parser.getSubgraphNodes(0);\n\n// è®¾ç½®è§£æå™¨æ ‡å¿—\nparser.setFlag(TrtOnnxParserFlag.kNATIVE_INSTANCENORM);\n</code></pre>\n<p><strong>ä¸»è¦ç”¨é€”</strong>ï¼š</p>\n<ul>\n<li>è§£æ ONNX æ¨¡å‹</li>\n<li>æ£€æŸ¥ç®—å­æ”¯æŒ</li>\n<li>å¤„ç†å­å›¾</li>\n</ul>\n<h3 id=\"57-cuda-å†…å­˜ç®¡ç†\">5.7 CUDA å†…å­˜ç®¡ç†</h3>\n<h4 id=\"1è®¾å¤‡å†…å­˜cuda1dmemory\">ï¼ˆ1ï¼‰è®¾å¤‡å†…å­˜ï¼ˆCuda1DMemoryï¼‰</h4>\n<pre><code class=\"language-csharp\">// åˆ›å»ºè®¾å¤‡å†…å­˜\nusing Cuda1DMemory&lt;float&gt; input = new Cuda1DMemory&lt;float&gt;(1000);\nulong numElements = input.SizeElements;\nulong numBytes = input.SizeBytes;\nIntPtr ptr = input.DevicePointer;\n\n// åŒæ­¥æ•°æ®ä¼ è¾“\nfloat[] hostData = new float[1000];\ninput.copyFromHost(hostData);   // ä¸»æœº â†’ è®¾å¤‡\ninput.copyToHost(hostData);      // è®¾å¤‡ â†’ ä¸»æœº\n\n// å¼‚æ­¥æ•°æ®ä¼ è¾“\nusing CudaStream stream = new CudaStream();\ninput.copyFromHostAsync(hostData, stream);\ninput.copyToHostAsync(hostData, stream);\n\n// å†…å­˜æ“ä½œ\ninput.memset(0);                 // å¡«å……ä¸º 0\ninput.memsetAsync(0, stream);    // å¼‚æ­¥å¡«å……\n</code></pre>\n<h4 id=\"2cuda-æµcudastream\">ï¼ˆ2ï¼‰CUDA æµï¼ˆCudaStreamï¼‰</h4>\n<pre><code class=\"language-csharp\">// åˆ›å»ºæµï¼ˆå¸¦ä¼˜å…ˆçº§ï¼‰\nusing CudaStream stream = new CudaStream();\nusing CudaStream streamHigh = new CudaStream(0, -1);  // é«˜ä¼˜å…ˆçº§\n\n// åŒæ­¥æ“ä½œ\nstream.Synchronize();  // ç­‰å¾…æµå®Œæˆ\nbool isComplete = stream.Query();  // æŸ¥è¯¢æ˜¯å¦å®Œæˆ\n\n// äº‹ä»¶ä¾èµ–\nusing CudaEvent cudaEvent = new CudaEvent();\nstream.WaitEvent(cudaEvent);  // ç­‰å¾…äº‹ä»¶\n\n// æ·»åŠ å›è°ƒ\nstream.AddCallback((streamPtr, statue, userData) =&gt;\n{\n    Console.WriteLine(\"Stream callback executed\");\n}, IntPtr.Zero, 0);\n\n// CUDA Graph æ•è·\nstream.BeginCapture(CudaStreamCaptureMode.Global);\n// ... æ‰§è¡Œæ“ä½œ ...\nCudaGraph_t graph = stream.EndCapture();\n</code></pre>\n<h4 id=\"3cuda-è®¾å¤‡cudadevice\">ï¼ˆ3ï¼‰CUDA è®¾å¤‡ï¼ˆCudaDeviceï¼‰</h4>\n<pre><code class=\"language-csharp\">// è·å–ç³»ç»Ÿä¸­å¯ç”¨çš„ CUDA å…¼å®¹è®¾å¤‡çš„æ•°é‡\nint nbDevices = CudaDevice.GetDeviceCount();\n\n// è·å–æŒ‡å®šè®¾å¤‡çš„å±æ€§\nCudaDeviceProp properties = CudaDevice.GetDeviceProperties(deviceIdx);\n\n// è®¾ç½®æ‰§è¡Œè®¾å¤‡\nCudaDevice.SetDevice(device);\n\n// è·å–æœ‰å…³è®¾å¤‡çš„è¯·æ±‚ä¿¡æ¯\nint clockRate = CudaDevice.GetAttribute(CudaDeviceAttr.ClockRate, device);\n</code></pre>\n<hr />\n<h2 id=\"å…­å®Œæ•´ä½¿ç”¨ç¤ºä¾‹\">å…­ã€å®Œæ•´ä½¿ç”¨ç¤ºä¾‹</h2>\n<h3 id=\"ç¤ºä¾‹-1è·å–å’Œè®¾ç½®è®¾å¤‡ä¿¡æ¯\">ç¤ºä¾‹ 1ï¼šè·å–å’Œè®¾ç½®è®¾å¤‡ä¿¡æ¯</h3>\n<p>ä¸‹é¢çš„ä»£ç å¯ä»¥è·å–å½“å‰è®¾å¤‡çš„ç›¸å…³ä¿¡æ¯ï¼ŒåŒæ—¶å¯ä»¥è®¾ç½®æ¨ç†è®¾å¤‡ã€‚</p>\n<pre><code class=\"language-csharp\">using JYPPX.TensorRtSharp.Cuda;\nusing JYPPX.TensorRtSharp.Nvinfer;\n\nnamespace TestDemo\n{\n    internal class Program\n    {\n        static void Main(string[] args)\n        {\n            // æŒ‡å®šé»˜è®¤ä½¿ç”¨çš„ GPU è®¾å¤‡ç´¢å¼•\n            // åœ¨å¤š GPU ç¯å¢ƒä¸‹ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹æ­¤å˜é‡æ¥é€‰æ‹©ç‰¹å®šçš„æ˜¾å¡\n            int device = 0;\n\n            // è®°å½•æ—¥å¿—ï¼Œæ ‡è®°è®¾å¤‡ä¿¡æ¯æŸ¥è¯¢çš„å¼€å§‹\n            Logger.Instance.INFO(\"=== Device Information ===\");\n\n            // è·å–å½“å‰ç³»ç»Ÿä¸­å¯è§çš„ NVIDIA GPU æ•°é‡\n            int nbDevices = CudaDevice.GetDeviceCount();\n\n            // æ£€æŸ¥ç³»ç»Ÿä¸­æ˜¯å¦å­˜åœ¨å¯ç”¨çš„ GPU è®¾å¤‡\n            if (nbDevices &lt;= 0)\n            {\n                Logger.Instance.ERROR(\"Cannot find any available devices (GPUs)!\");\n                Environment.Exit(0);\n            }\n\n            // æ‰“å°æ‰€æœ‰å¯ç”¨è®¾å¤‡çš„åˆ—è¡¨\n            Logger.Instance.INFO(\"Available Devices: \");\n\n            // éå†ç³»ç»Ÿä¸­çš„æ¯ä¸€ä¸ª GPU\n            for (int deviceIdx = 0; deviceIdx &lt; nbDevices; ++deviceIdx)\n            {\n                // è·å–ç´¢å¼•ä¸º deviceIdx çš„ GPU çš„è¯¦ç»†å±æ€§\n                CudaDeviceProp tempProperties = CudaDevice.GetDeviceProperties(deviceIdx);\n\n                // æ‰“å°è®¾å¤‡ IDã€è®¾å¤‡åç§°ä»¥åŠ UUID (å”¯ä¸€æ ‡è¯†ç¬¦)\n                Logger.Instance.INFO($\"  Device {deviceIdx}: \\\"{tempProperties.Name}\\\" UUID: {GetUuidString(tempProperties.Uuid)}\");\n\n                // å¦‚æœå½“å‰éå†åˆ°çš„è®¾å¤‡ ID æ˜¯æˆ‘ä»¬æƒ³è¦ä½¿ç”¨çš„ç›®æ ‡è®¾å¤‡\n                // åˆ™å°†è¯¥è®¾å¤‡çš„å±æ€§ä¿å­˜ä¸‹æ¥ï¼Œä¾›åç»­ä½¿ç”¨\n                if (deviceIdx == device)\n                {\n                    properties = tempProperties;\n                }\n            }\n\n            // å®‰å…¨æ£€æŸ¥ï¼šç¡®ä¿è¯·æ±‚çš„ç›®æ ‡è®¾å¤‡ ID åœ¨æœ‰æ•ˆèŒƒå›´å†…\n            if (device &lt; 0 || device &gt;= nbDevices)\n            {\n                Logger.Instance.ERROR($\"Cannot find device ID {device}!\");\n                Environment.Exit(0);\n            }\n\n            // å°† CUDA ä¸Šä¸‹æ–‡è®¾ç½®åˆ°æŒ‡å®šçš„ GPU è®¾å¤‡ä¸Š\n            CudaDevice.SetDevice(device);\n\n            // æ‰“å°é€‰å®šè®¾å¤‡çš„è¯¦ç»†ä¿¡æ¯\n            Logger.Instance.INFO($\"Selected Device: {properties.Name}\");\n            Logger.Instance.INFO($\"Selected Device ID: {device}\");\n            Logger.Instance.INFO($\"Selected Device UUID: {GetUuidString(properties.Uuid)}\");\n            Logger.Instance.INFO($\"Compute Capability: {properties.Major}.{properties.Minor}\");\n            Logger.Instance.INFO($\"SMs: {properties.MultiProcessorCount}\");\n            Logger.Instance.INFO($\"Device Global Memory: {(properties.TotalGlobalMem + 20)} MiB\");\n            Logger.Instance.INFO($\"Shared Memory per SM: {(properties.SharedMemPerMultiprocessor &gt;&gt; 10)} KiB\");\n            Logger.Instance.INFO($\"Memory Bus Width: {properties.MemoryBusWidth} bits (ECC {(properties.ECCEnabled != 0 ? \"enabled\" : \"disabled\")})\");\n\n            // è·å–å¹¶æ‰“å° GPU æ ¸å¿ƒæ—¶é’Ÿé¢‘ç‡å’Œæ˜¾å­˜æ—¶é’Ÿé¢‘ç‡\n            int clockRate = CudaDevice.GetAttribute(CudaDeviceAttr.ClockRate, device);\n            int memoryClockRate = CudaDevice.GetAttribute(CudaDeviceAttr.MemoryClockRate, device);\n\n            Logger.Instance.INFO($\"Application Compute Clock Rate: {clockRate / 1000000.0F} GHz\");\n            Logger.Instance.INFO($\"Application Memory Clock Rate: {memoryClockRate / 1000000.0F} GHz\");\n        }\n\n        /// &lt;summary&gt;\n        /// è¾…åŠ©æ–¹æ³•ï¼šå°† CudaUUID ç»“æ„ä½“è½¬æ¢ä¸ºæ ¼å¼åŒ–çš„ GPU UUID å­—ç¬¦ä¸²\n        /// æ ¼å¼é€šå¸¸ä¸ºï¼šGPU-xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n        /// &lt;/summary&gt;\n        public static string GetUuidString(CudaUUID uuid)\n        {\n            int kUUID_SIZE = uuid.Bytes.Length;\n            var ss = new System.Text.StringBuilder();\n\n            // å®šä¹‰ UUID çš„åˆ†æ®µç‚¹ï¼Œç”¨äºæ’å…¥è¿å­—ç¬¦ \"-\"\n            int[] splits = { 0, 4, 6, 8, 10, kUUID_SIZE };\n\n            // æ·»åŠ å›ºå®šçš„ \"GPU\" å‰ç¼€\n            ss.Append(\"GPU\");\n\n            // éå†åˆ†æ®µå®šä¹‰ï¼Œæ ¼å¼åŒ–æ¯ä¸€éƒ¨åˆ†çš„å­—èŠ‚\n            for (int splitIdx = 0; splitIdx &lt; splits.Length - 1; ++splitIdx)\n            {\n                ss.Append(\"-\");\n                for (int byteIdx = splits[splitIdx]; byteIdx &lt; splits[splitIdx + 1]; ++byteIdx)\n                {\n                    ss.AppendFormat(\"{0:x2}\", uuid.Bytes[byteIdx]);\n                }\n            }\n\n            return ss.ToString();\n        }\n    }\n}\n</code></pre>\n<p><strong>ç¨‹åºè¿è¡Œç»“æœï¼š</strong></p>\n<p><img alt=\"è®¾å¤‡ä¿¡æ¯è¾“å‡º\" class=\"lazyload\" /></p>\n<blockquote>\n<p><strong>ğŸ’¡ æ³¨æ„</strong>ï¼šä¸åŒçš„è®¾å¤‡è¾“å‡ºä¼šæœ‰ä¸åŒï¼Œä»¥å…·ä½“è®¾å¤‡è¾“å‡ºä¸ºå‡†ã€‚</p>\n<p>ğŸ”—<strong>ç¨‹åºè·¯å¾„é“¾æ¥</strong>ï¼šå®Œæ•´ç¨‹åºå·²ç»ä¸Šä¼ åˆ°GitHubï¼Œè¯·è‡ªè¡Œä¸‹è½½ï¼Œé“¾æ¥ä¸ºï¼š</p>\n<pre><code>https://github.com/guojin-yan/TensorRT-CSharp-API/tree/TensorRtSharp3.0/samples/SetCudaDeviceInfo\n</code></pre>\n</blockquote>\n<hr />\n<h3 id=\"ç¤ºä¾‹-2onnx-è½¬-engine-æ¨¡å‹\">ç¤ºä¾‹ 2ï¼šONNX è½¬ Engine æ¨¡å‹</h3>\n<p>ä¸‹é¢æ˜¯æŒ‰ç…§å®˜æ–¹æ¨¡å‹è½¬æ¢ä»£ç ç¼–å†™çš„ä¸€ä¸ªç®€å•çš„è½¬æ¢ä»£ç ï¼š</p>\n<pre><code class=\"language-csharp\">using JYPPX.TensorRtSharp.Cuda;\nusing JYPPX.TensorRtSharp.Nvinfer;\n\nnamespace OnnxToEngine\n{\n    internal class Program\n    {\n        static void Main(string[] args)\n        {\n            // === é…ç½® TensorRT æ—¥å¿—å›è°ƒ ===\n            // å®šä¹‰ä¸€ä¸ªå§”æ‰˜ï¼Œç”¨äºå¤„ç† TensorRT å†…éƒ¨äº§ç”Ÿçš„æ—¥å¿—æ¶ˆæ¯\n            LogCallbackFunction _callbackDelegate = (message) =&gt;\n            {\n                Console.WriteLine(message);\n            };\n\n            // å°†è‡ªå®šä¹‰çš„å›è°ƒå‡½æ•°æ³¨å†Œç»™ TensorRT çš„å…¨å±€ Logger å®ä¾‹\n            Logger.Instance.SetCallback(_callbackDelegate);\n\n            // è®¾ç½®æ—¥å¿—çš„ä¸¥é‡æ€§çº§åˆ«é˜ˆå€¼\n            // LoggerSeverity.kINFO: æ‰“å°ä¿¡æ¯ã€è­¦å‘Šå’Œé”™è¯¯\n            Logger.Instance.SetThreshold(LoggerSeverity.kINFO);\n\n            // 1. åˆ›å»º TensorRT Builder (æ„å»ºå™¨)\n            Builder build = new Builder();\n\n            // 2. åˆ›å»ºç½‘ç»œå®šä¹‰ (Network Definition)\n            // æ˜¾å¼æ‰¹å¤„ç† æ ‡å¿—è¡¨ç¤ºç½‘ç»œå®šä¹‰ä¸­æ˜¾å¼åŒ…å«æ‰¹å¤„ç†ç»´åº¦\n            NetworkDefinition networkDefinition = build.createNetworkV2(TrtNetworkDefinitionCreationFlag.kEXPLICIT_BATCH);\n\n            // 3. åˆ›å»ºæ„å»ºå™¨é…ç½®\n            BuilderConfig builderConfig = build.createBuilderConfig();\n\n            // 4. åˆ›å»º ONNX è§£æå™¨\n            OnnxParser onnxParser = new OnnxParser(networkDefinition);\n\n            // æŒ‡å®šå¾…è½¬æ¢çš„ ONNX æ¨¡å‹æ–‡ä»¶è·¯å¾„\n            string modelpath = \"yolo11s-obb.onnx\";\n\n            // 5. è§£æ ONNX æ¨¡å‹æ–‡ä»¶\n            // å‚æ•° 2: æ—¥å¿—çº§åˆ« (1=ERROR, 2=WARNING, 3=INFO, 4=VERBOSE)\n            if (onnxParser.parseFromFile(modelpath, 2) == false)\n            {\n                Console.WriteLine($\"parse onnx model failed\");\n                return;\n            }\n\n            // 6. è®¾ç½®æ„å»ºç²¾åº¦æ ‡å¿—\n            // kFP16: å¯ç”¨åŠç²¾åº¦ (FP16) æ¨ç†æ¨¡å¼\n            builderConfig.setFlag(TrtBuilderFlag.kFP16);\n\n            // 7. åˆ›å»º CUDA æµ\n            CudaStream cudaStream = new CudaStream();\n\n            // 8. è®¾ç½®ä¼˜åŒ–é…ç½®æ–‡ä»¶çš„æµ\n            builderConfig.setProfileStream(cudaStream);\n\n            // 9. æ„å»ºå¹¶åºåˆ—åŒ–ç½‘ç»œ\n            // è¿™æ˜¯ä¸€ä¸ªè€—æ—¶è¾ƒé•¿çš„è¿‡ç¨‹ï¼Œå› ä¸º TensorRT ä¼šè¿›è¡Œå†…æ ¸è‡ªåŠ¨è°ƒä¼˜ã€å±‚èåˆç­‰ä¼˜åŒ–\n            HostMemory hostMemory = build.buildSerializedNetwork(networkDefinition, builderConfig);\n\n            // 10. ä¿å­˜ Engine åˆ°ç£ç›˜\n            string filePath = \"yolo11s-obb.engine\";\n            using (FileStream fs = new FileStream(filePath, FileMode.Create, FileAccess.Write))\n            {\n                fs.Write(hostMemory.getByteData(), 0, (int)hostMemory.Size);\n            }\n\n            Console.WriteLine(\"Engine saved successfully!\");\n        }\n    }\n}\n</code></pre>\n<p><strong>ç¨‹åºè¿è¡Œç»“æœï¼š</strong></p>\n<p><img alt=\"ONNX è½¬æ¢ç»“æœ\" class=\"lazyload\" /></p>\n<blockquote>\n<p>ğŸ”—<strong>ç¨‹åºè·¯å¾„é“¾æ¥</strong>ï¼šå®Œæ•´ç¨‹åºå·²ç»ä¸Šä¼ åˆ°GitHubï¼Œè¯·è‡ªè¡Œä¸‹è½½ï¼Œé“¾æ¥ä¸ºï¼š</p>\n<pre><code>https://github.com/guojin-yan/TensorRT-CSharp-API/tree/TensorRtSharp3.0/samples/OnnxToEngine\n</code></pre>\n</blockquote>\n<hr />\n<h3 id=\"-ä½¿ç”¨-trtexec-å·¥å…·è½¬æ¢æ¨¡å‹æ¨è\">ğŸ’¡ ä½¿ç”¨ trtexec å·¥å…·è½¬æ¢æ¨¡å‹ï¼ˆæ¨èï¼‰</h3>\n<p>å½“å‰ ONNX è½¬ Engine ä»£ç ç”±äºæ²¡æœ‰è¿›è¡Œä¼˜åŒ–ï¼Œè½¬æ¢é€Ÿåº¦ä¼šè¾ƒæ…¢ã€‚<strong>å»ºè®®ä½¿ç”¨ TensorRT SDK è‡ªå¸¦çš„ <code>trtexec.exe</code> å·¥å…·è½¬æ¢æ¨¡å‹</strong>ã€‚</p>\n<h4 id=\"trtexec-ä½¿ç”¨æ–¹å¼\">trtexec ä½¿ç”¨æ–¹å¼</h4>\n<p><strong>ï¼ˆ1ï¼‰ä½¿ç”¨ CMD åˆ‡æ¢åˆ°å·¥å…·ç›®å½•</strong></p>\n<p>è¯¥å·¥å…·å­˜æ”¾åœ¨ä¸‹è½½çš„ TensorRT åº“ä¸­ï¼š</p>\n<p><img alt=\"trtexec ä½ç½®\" class=\"lazyload\" /></p>\n<p>æ‰“å¼€ CMD å¹¶åˆ‡æ¢åˆ°è¯¥è·¯å¾„ï¼š</p>\n<p><img alt=\"CMD åˆ‡æ¢è·¯å¾„\" class=\"lazyload\" /></p>\n<p><strong>ï¼ˆ2ï¼‰å›ºå®šå½¢çŠ¶æ¨¡å‹è½¬æ¢æŒ‡ä»¤</strong></p>\n<p>å¯¹äºå½¢çŠ¶å›ºå®šçš„æ¨¡å‹ï¼Œç›´æ¥è¾“å…¥å¸¸è§„æŒ‡ä»¤è½¬æ¢å³å¯ï¼š</p>\n<pre><code class=\"language-bash\">trtexec.exe --onnx=yolov8s-obb.onnx --saveEngine=yolov8s-obb.engine --fp16 --workspace=1024\n</code></pre>\n<p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p>\n<ul>\n<li><code>--onnx=yolov8s-obb.onnx</code>ï¼šæŒ‡å®šè¾“å…¥çš„ ONNX æ¨¡å‹æ–‡ä»¶è·¯å¾„</li>\n<li><code>--saveEngine=yolov8s-obb.engine</code>ï¼šæŒ‡å®šè¾“å‡ºçš„ Engine æ–‡ä»¶ä¿å­˜è·¯å¾„</li>\n<li><code>--fp16</code>ï¼šå¯ç”¨ FP16 ç²¾åº¦ï¼ˆå¯é€‰ï¼‰</li>\n<li><code>--workspace=1024</code>ï¼šæŒ‡å®šæœ€å¤§å·¥ä½œç©ºé—´ï¼Œå•ä½ MBï¼ˆå¯é€‰ï¼‰</li>\n</ul>\n<p><img alt=\"trtexec è½¬æ¢ä¸­\" class=\"lazyload\" /></p>\n<p><strong>ï¼ˆ3ï¼‰åŠ¨æ€å½¢çŠ¶æ¨¡å‹è½¬æ¢æŒ‡ä»¤</strong></p>\n<p>å¯¹äºè¾“å…¥å½¢çŠ¶æ˜¯åŠ¨æ€çš„æƒ…å†µï¼Œè½¬æ¢æ—¶è¦è®¾ç½®å½¢çŠ¶å‚æ•°ï¼š</p>\n<pre><code class=\"language-bash\">trtexec.exe --onnx=yolov8s-obb_b.onnx --saveEngine=yolov8s-obb_b.engine --fp16 --minShapes=images:1x3x1024x1024 --optShapes=images:8x3x1024x1024 --maxShapes=images:24x3x1024x1024\n</code></pre>\n<p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p>\n<ul>\n<li><code>--minShapes=images:1x3x1024x1024</code>ï¼šæœ€å°è¾“å…¥å½¢çŠ¶</li>\n<li><code>--optShapes=images:8x3x1024x1024</code>ï¼šæœ€ä¼˜è¾“å…¥å½¢çŠ¶ï¼ˆEngine ä¼šä¸ºæ­¤å½¢çŠ¶ä¼˜åŒ–ï¼‰</li>\n<li><code>--maxShapes=images:24x3x1024x1024</code>ï¼šæœ€å¤§è¾“å…¥å½¢çŠ¶</li>\n</ul>\n<p><img alt=\"åŠ¨æ€å½¢çŠ¶è½¬æ¢\" class=\"lazyload\" /></p>\n<p><strong>å¤šè¾“å…¥æ¨¡å‹è½¬æ¢æŒ‡ä»¤ï¼š</strong></p>\n<pre><code class=\"language-bash\">trtexec --onnx=model.onnx --minShapes=input1:1x3x224x224,input2:1x256 --optShapes=input1:4x3x224x224,input2:4x256 --maxShapes=input1:8x3x224x224,input2:8x256\n</code></pre>\n<hr />\n<h3 id=\"ç¤ºä¾‹-3yolo-ç›®æ ‡æ£€æµ‹\">ç¤ºä¾‹ 3ï¼šYOLO ç›®æ ‡æ£€æµ‹</h3>\n<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„ YOLO ç›®æ ‡æ£€æµ‹ç¤ºä¾‹ï¼Œå±•ç¤ºä»æ¨¡å‹æ„å»ºåˆ°æ¨ç†çš„å…¨æµç¨‹ã€‚</p>\n<blockquote>\n<p><strong>âš ï¸ ç”±äºä»£ç è¾ƒé•¿ï¼Œæ­¤å¤„ä»…å±•ç¤ºæ ¸å¿ƒæ€è·¯ã€‚å®Œæ•´ä»£ç è¯·å‚è€ƒé¡¹ç›®ç¤ºä¾‹ã€‚</strong></p>\n</blockquote>\n<pre><code class=\"language-csharp\">using JYPPX.TensorRtSharp.Cuda;\nusing JYPPX.TensorRtSharp.Nvinfer;\nusing OpenCvSharp;\nusing OpenCvSharp.Dnn;\nusing System.Diagnostics;\nusing System.Runtime.InteropServices;\n\nnamespace YoloDetInfer\n{\n    internal class Program\n    {\n        // ================= é…ç½®å‚æ•° =================\n        // æ¨¡å‹è¾“å…¥å°ºå¯¸ (å®½=é«˜)\n        private const int InputSize = 640;\n\n\n        // å»ºè®®æ ¹æ®å®é™…æ¨¡å‹åŠ¨æ€è·å–æˆ–ä½¿ç”¨ Netron æŸ¥çœ‹\n        private const int OutputSize = 8400;\n\n        // æ¨¡å‹ç±»åˆ«æ•° (æ ¹æ®æ‚¨çš„å…·ä½“æ•°æ®é›†ä¿®æ”¹ï¼Œæ­¤å¤„å‡è®¾ä¸º15ç±»)\n        private const int CategoryNum = 80;\n\n        // ç½®ä¿¡åº¦é˜ˆå€¼\n        private const float ConfThreshold = 0.25f;\n\n        // NMS IOU é˜ˆå€¼\n        private const float NmsThreshold = 0.3f;\n\n        static void Main(string[] args)\n        {\n            //  ============= é…ç½® TensorRT æ—¥å¿—å›è°ƒ =============\n            // å®šä¹‰ä¸€ä¸ªå§”æ‰˜ï¼Œç”¨äºå¤„ç† TensorRT å†…éƒ¨äº§ç”Ÿçš„æ—¥å¿—æ¶ˆæ¯ã€‚\n            // è¿™å…è®¸æˆ‘ä»¬å°† C++ å±‚é¢çš„æ—¥å¿—è¾“å‡ºåˆ° C# çš„æ§åˆ¶å°ã€‚\n            LogCallbackFunction _callbackDelegate = (message) =&gt;\n            {\n                Console.WriteLine(message);\n            };\n\n            // å°†è‡ªå®šä¹‰çš„å›è°ƒå‡½æ•°æ³¨å†Œç»™ TensorRT çš„å…¨å±€ Logger å®ä¾‹ã€‚\n            Logger.Instance.SetCallback(_callbackDelegate);\n\n            // è®¾ç½®æ—¥å¿—çš„ä¸¥é‡æ€§çº§åˆ«é˜ˆå€¼ã€‚\n            // LoggerSeverity.kINFO: æ‰“å°ä¿¡æ¯ã€è­¦å‘Šå’Œé”™è¯¯ã€‚\n            // å¼€å‘è°ƒè¯•é˜¶æ®µé€šå¸¸è®¾ä¸º kINFO æˆ– kVERBOSEï¼›ç”Ÿäº§ç¯å¢ƒå¯è®¾ä¸º kWARNING æˆ– kERROR ä»¥å‡å°‘è¾“å‡ºã€‚\n            Logger.Instance.SetThreshold(LoggerSeverity.kINFO);\n\n            string enginePath = \"yolov8s.engine\";\n            string imagePath = \"bus.jpg\";\n\n\n            // ================= 1. åŠ è½½ TensorRT Engine =================\n            // ä½¿ç”¨ using è¯­å¥ç¡®ä¿æ–‡ä»¶æµæ­£ç¡®å…³é—­\n            byte[] engineData;\n            using (FileStream fs = new FileStream(enginePath, FileMode.Open, FileAccess.Read))\n            using (BinaryReader br = new BinaryReader(fs))\n            {\n                engineData = br.ReadBytes((int)fs.Length);\n            }\n\n            // ååºåˆ—åŒ– Engine\n            // Runtime å¿…é¡»åœ¨ Engine ç”Ÿå‘½å‘¨æœŸå†…ä¿æŒå­˜æ´»ï¼Œé€šå¸¸å»ºè®®è®¾ä¸ºå…¨å±€æˆ–é™æ€ï¼Œæˆ–è€…ç¡®ä¿å®ƒæœ€åé‡Šæ”¾\n            Runtime runtime = new Runtime();\n\n            // åˆ›å»º CudaEngine (æ­¤å¤„ä½¿ç”¨ using ç¡®ä¿æ¨ç†å®Œæˆåå¼•æ“è¢«é”€æ¯)\n            using (CudaEngine cudaEngine = runtime.deserializeCudaEngineByBlob(engineData, (ulong)engineData.Length))\n            {\n                // ================= 2. åˆå§‹åŒ–æ¨ç†ä¸Šä¸‹æ–‡ä¸æ˜¾å­˜ =================\n                // åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡\n                using (JYPPX.TensorRtSharp.Nvinfer.ExecutionContext executionContext = cudaEngine.createExecutionContext(TrtExecutionContextAllocationStrategy.kSTATIC))\n                using (CudaStream cudaStream = new CudaStream()) // åˆ›å»º CUDA æµç”¨äºå¼‚æ­¥æ‰§è¡Œ\n                {\n                    // è·å–è¾“å…¥ç»´åº¦ä¿¡æ¯ (ç”¨äºæ ¡éªŒ)\n                    Dims inputDims = executionContext.getTensorShape(\"images\");\n                    Logger.Instance.INFO($\"Input Shape: {inputDims.d[0]}x{inputDims.d[1]}x{inputDims.d[2]}x{inputDims.d[3]}\");\n\n                    // è®¡ç®—æ‰€éœ€æ˜¾å­˜å¤§å°\n                    // è¾“å…¥: Batch=1, Channel=3, Height=640, Width=640\n                    ulong inputSizeInBytes = 1 * 3 * InputSize * InputSize;\n                    // è¾“å‡º: Batch=1, Channels=CategoryNum+4(box)+1(angle), Num=8400\n                    int outputChannels = CategoryNum + 4; // 4åæ ‡ + Nç±»åˆ«\n                    ulong outputSizeInBytes = (ulong)(1 * outputChannels * OutputSize);\n\n                    Stopwatch sw = new Stopwatch();\n                    // åˆ†é… GPU æ˜¾å­˜\n                    using (Cuda1DMemory&lt;float&gt; inputGpuMemory = new Cuda1DMemory&lt;float&gt;(inputSizeInBytes))\n                    using (Cuda1DMemory&lt;float&gt; outputGpuMemory = new Cuda1DMemory&lt;float&gt;(outputSizeInBytes))\n                    {\n                        // ç»‘å®šæ˜¾å­˜åœ°å€åˆ° TensorRT ä¸Šä¸‹æ–‡\n                        executionContext.setInputTensorAddress(\"images\", inputGpuMemory.get());\n                        executionContext.setOutputTensorAddress(\"output0\", outputGpuMemory.get());\n                        // é¢„çƒ­æ¨ç† (å¯é€‰ï¼Œä½†æ¨èï¼Œå°¤å…¶æ˜¯é¦–æ¬¡æ¨ç†æ—¶)\n                        executionContext.executeV3(cudaStream);\n                        cudaStream.Synchronize();\n                        // ================= 3. å›¾åƒé¢„å¤„ç† =================\n                        Mat img = Cv2.ImRead(imagePath);\n                        if (img.Empty())\n                        {\n                            Logger.Instance.INFO(\"Image not found!\");\n                            return;\n                        }\n\n                        sw.Start();\n                        float[] inputData = PreProcess(img, out float scale, out int xOffset, out int yOffset);\n                        sw.Stop();\n                        Logger.Instance.INFO($\"Pre-processing time: {sw.ElapsedMilliseconds} ms\");\n                        // ================= 4. æ¨ç† =================\n                        // å‡†å¤‡ä¸»æœºå†…å­˜æ¥æ”¶ç»“æœ\n                        float[] outputData = new float[outputChannels * OutputSize];\n\n\n                        sw.Restart();\n                        // å°†æ•°æ®ä»ä¸»æœº æ‹·è´åˆ°è®¾å¤‡\n                        inputGpuMemory.copyFromHostAsync(inputData, cudaStream);\n\n                        // æ‰§è¡Œæ¨ç† (enqueueV3 æ˜¯å¼‚æ­¥çš„)\n                        executionContext.executeV3(cudaStream);\n                        // ç­‰å¾…æ¨ç†å®Œæˆ\n                        cudaStream.Synchronize();\n\n           \n\n                        // å°†ç»“æœä»è®¾å¤‡ æ‹·è´å›ä¸»æœº\n                        // è¿™é‡Œçš„æ‹·è´æ˜¯åŒæ­¥çš„ï¼Œä¼šç­‰å¾… GPU è®¡ç®—å®Œæˆ\n                        outputGpuMemory.copyToHostAsync(outputData, cudaStream);\n                        sw.Stop();\n                        Logger.Instance.INFO($\"Inference time: {sw.ElapsedMilliseconds} ms\");\n                        // ================= 5. åå¤„ç† =================\n\n                        sw.Restart();\n                        List&lt;DetData&gt; results = PostProcess(outputData, scale, xOffset, yOffset);\n                        sw.Stop();\n                        Logger.Instance.INFO($\"Post-processing time: {sw.ElapsedMilliseconds} ms\");\n\n                        // ================= 6. ç»“æœå¯è§†åŒ– =================\n                        Mat resultImg = DrawDetResult(results, img);\n                        Cv2.ImShow(\"YOLO11-DET Result\", resultImg);\n                        Cv2.WaitKey(0);\n                    }\n                }\n            }\n        }\n\n        /// &lt;summary&gt;\n        /// å›¾åƒé¢„å¤„ç†ï¼šLetterbox ç¼©æ”¾ã€å½’ä¸€åŒ–ã€HWC è½¬ CHW\n        /// &lt;/summary&gt;\n        private static float[] PreProcess(Mat img, out float scale, out int xOffset, out int yOffset)\n        {\n            // è½¬æ¢é¢œè‰²ç©ºé—´ BGR -&gt; RGB\n            Mat rgbImg = new Mat();\n            Cv2.CvtColor(img, rgbImg, ColorConversionCodes.BGR2RGB);\n\n            // è®¡ç®— Letterbox ç¼©æ”¾æ¯”ä¾‹\n            int maxDim = Math.Max(rgbImg.Width, rgbImg.Height);\n            scale = (float)maxDim / InputSize;\n\n            // è®¡ç®—ç¼©æ”¾åçš„å°ºå¯¸\n            int newWidth = (int)(rgbImg.Width / scale);\n            int newHeight = (int)(rgbImg.Height / scale);\n\n            // Resize å›¾åƒ\n            Mat resizedImg = new Mat();\n            Cv2.Resize(rgbImg, resizedImg, new Size(newWidth, newHeight));\n\n            // åˆ›å»ºé»‘è‰²èƒŒæ™¯ Canvas (InputSize x InputSize)\n            Mat paddedImg = Mat.Zeros(InputSize, InputSize, MatType.CV_8UC3);\n\n            // è®¡ç®—ç²˜è´´ä½ç½® (å±…ä¸­)\n            xOffset = (InputSize - newWidth) / 2;\n            yOffset = (InputSize - newHeight) / 2;\n\n            // å°†å›¾åƒæ‹·è´åˆ° Canvas ä¸­å¤®\n            Rect roi = new Rect(xOffset, yOffset, newWidth, newHeight);\n            resizedImg.CopyTo(new Mat(paddedImg, roi));\n\n            // å½’ä¸€åŒ– (0-255 -&gt; 0-1) å¹¶è½¬ä¸º float ç±»å‹\n            Mat floatImg = new Mat();\n            paddedImg.ConvertTo(floatImg, MatType.CV_32FC3, 1.0 / 255.0);\n\n            // HWC è½¬ CHW å¹¶å±•å¹³ä¸ºä¸€ç»´æ•°ç»„\n            Mat[] channels = Cv2.Split(floatImg);\n            float[] chwData = new float[3 * InputSize * InputSize];\n\n            // æ‹·è´æ•°æ®ï¼šRé€šé“ -&gt; Cé€šé“ -&gt; Bé€šé“ (OpenCV Split å‡ºæ¥é¡ºåºæ˜¯ B, G, Rï¼Œå¯¹åº”ç´¢å¼• 0, 1, 2)\n            int channelSize = InputSize * InputSize;\n            // å°† R, G, B ä¾æ¬¡æ‹·å…¥æ•°ç»„\n            Marshal.Copy(channels[0].Data, chwData, 0, channelSize); // R\n            Marshal.Copy(channels[1].Data, chwData, channelSize, channelSize); // G\n            Marshal.Copy(channels[2].Data, chwData, channelSize * 2, channelSize); // B\n\n            // é‡Šæ”¾ä¸´æ—¶ Mat\n            rgbImg.Dispose();\n            resizedImg.Dispose();\n            paddedImg.Dispose();\n            floatImg.Dispose();\n            foreach (var c in channels) c.Dispose();\n\n            return chwData;\n        }\n\n        /// &lt;summary&gt;\n        /// åå¤„ç†ï¼šè§£æ TensorRT è¾“å‡ºã€NMS è¿‡æ»¤\n        /// &lt;/summary&gt;\n        private static List&lt;DetData&gt; PostProcess(float[] result, float scale, int xOffset, int yOffset)\n        {\n            List&lt;Rect&gt; boxes = new List&lt;Rect&gt;();\n            List&lt;float&gt; confidences = new List&lt;float&gt;();\n            List&lt;int&gt; classIds = new List&lt;int&gt;();\n\n            // éå†æ‰€æœ‰é¢„æµ‹æ¡† (OutputSize)\n            // æ•°æ®å¸ƒå±€: [4(box) + 80(classes)] * OutputSize\n            // å±•å¹³æ•°ç»„ä¸­ï¼ŒåŒä¸€å±æ€§çš„æ•°æ®æ˜¯è¿ç»­å­˜å‚¨çš„ï¼Œä¾‹å¦‚æ‰€æœ‰ cx åœ¨ä¸€èµ·ï¼Œæ‰€æœ‰ cy åœ¨åœ¨ä¸€èµ·...\n            int stride = OutputSize; // æ­¥é•¿ï¼Œä¸åŒå±æ€§åœ¨æ•°ç»„ä¸­çš„åç§»é‡\n\n            for (int i = 0; i &lt; OutputSize; i++)\n            {\n                // æŸ¥æ‰¾æœ€å¤§ç±»åˆ«æ¦‚ç‡åŠå…¶ç´¢å¼•\n                float maxConf = 0;\n                int maxClassId = -1;\n\n                // éå†ç±»åˆ«\n                for (int c = 0; c &lt; CategoryNum; c++)\n                {\n                    // æ•°ç»„ç´¢å¼•ï¼š(åæ ‡/è§’åº¦åç§»é‡ + ç±»åˆ«åç§») * æ¡†ç´¢å¼•\n                    // æ³¨æ„ï¼šåŸå§‹ä»£ç ä¸­ result[outputSize * j + i] è¿™ç§è®¿é—®æ–¹å¼åŸºäº Transposed æ•°æ®å¸ƒå±€\n                    float conf = result[(4 + c) * stride + i];\n                    if (conf &gt; maxConf)\n                    {\n                        maxConf = conf;\n                        maxClassId = c;\n                    }\n                }\n\n                // ç½®ä¿¡åº¦è¿‡æ»¤\n                if (maxConf &gt; ConfThreshold)\n                {\n                    // æå–åæ ‡ (cx, cy, w, h)\n                    float cx = result[0 * stride + i];\n                    float cy = result[1 * stride + i];\n                    float w = result[2 * stride + i];\n                    float h = result[3 * stride + i];\n                    // è¿˜åŸåæ ‡åˆ°åŸå›¾å°ºå¯¸\n                    int rx = (int)((cx - xOffset - 0.5 * w) * scale);\n                    int ry = (int)((cy - yOffset - 0.5 * h) * scale);\n                    int rw = (int)(w * scale);\n                    int rh = (int)(h * scale);\n\n                    boxes.Add(new Rect(rx, ry, rw, rh));\n                    confidences.Add(maxConf);\n                    classIds.Add(maxClassId);\n                }\n            }\n\n            // æ‰§è¡Œ NMS (æ—‹è½¬æ¡† NMS)\n            // OpenCV çš„ NMSBoxes æ”¯æŒ RotatedRect\n            int[] indices;\n            CvDnn.NMSBoxes(boxes, confidences, ConfThreshold, NmsThreshold, out indices);\n\n            List&lt;DetData&gt; finalResults = new List&lt;DetData&gt;();\n            foreach (int idx in indices)\n            {\n                finalResults.Add(new DetData\n                {\n                    index = classIds[idx],\n                    score = confidences[idx],\n                    box = boxes[idx]\n                });\n            }\n\n            return finalResults;\n        }\n\n        /// &lt;summary&gt;\n        /// ç»˜åˆ¶æ£€æµ‹ç»“æœï¼ˆæ°´å¹³çŸ©å½¢æ¡†ï¼‰\n        /// &lt;/summary&gt;\n        /// &lt;param name=\"results\"&gt;æ£€æµ‹ç»“æœåˆ—è¡¨&lt;/param&gt;\n        /// &lt;param name=\"image\"&gt;åŸå§‹å›¾åƒ&lt;/param&gt;\n        /// &lt;returns&gt;ç»˜åˆ¶åçš„å›¾åƒ&lt;/returns&gt;\n        public static Mat DrawDetResult(List&lt;DetData&gt; results, Mat image)\n        {\n            // å…‹éš†å›¾åƒä»¥å…ä¿®æ”¹åŸå›¾\n            Mat mat = image.Clone();\n\n            foreach (var item in results)\n            {\n                // 1. ç»˜åˆ¶çŸ©å½¢æ¡†\n                // Rect ç»“æ„åŒ…å« X, Y, Width, Height\n                Cv2.Rectangle(mat, item.box, new Scalar(0, 255, 0), thickness: 2);\n                // 2. å‡†å¤‡æ ‡ç­¾æ–‡æœ¬ (ç±»åˆ«ID - ç½®ä¿¡åº¦)\n                string label = $\"{item.index} - {item.score:F2}\";\n                // 3. è®¡ç®—æ–‡æœ¬çš„å°ºå¯¸ï¼Œç”¨äºç»˜åˆ¶èƒŒæ™¯\n                int baseLine = 1;\n                Size textSize = Cv2.GetTextSize(label, HersheyFonts.HersheySimplex, 0.6, 1, out baseLine);\n                // 4. ç»˜åˆ¶æ ‡ç­¾èƒŒæ™¯ï¼ˆåŠé€æ˜é»‘è‰²çŸ©å½¢ï¼‰ï¼Œé˜²æ­¢æ–‡å­—ä¸èƒŒæ™¯æ··æ·†\n                // ä½ç½®ï¼šçŸ©å½¢å·¦ä¸Šè§’ç•¥å¾®ä¸Šç§»ï¼Œæˆ–è€…ç›´æ¥è´´ç€å·¦ä¸Šè§’\n                Point labelPosition = new Point(item.box.X, item.box.Y - (int)textSize.Height - 5);\n\n                // ç¡®ä¿æ ‡ç­¾ä¸ç”»å‡ºå›¾åƒè¾¹ç•Œ\n                if (labelPosition.Y &lt; 0) labelPosition.Y = item.box.Y + (int)textSize.Height + 5;\n                Rect labelBgRect = new Rect(labelPosition.X,\n                                            labelPosition.Y - (int)textSize.Height, // OpenCV GetTextSize è¿”å›çš„é«˜åº¦æ˜¯åŸºçº¿åˆ°åº•éƒ¨çš„è·ç¦»ï¼Œéœ€è°ƒæ•´\n                                            (int)textSize.Width,\n                                            (int)textSize.Height + (int)baseLine);\n                // å¦‚æœèƒŒæ™¯æ¡†ä¹Ÿåœ¨å›¾åƒèŒƒå›´å†…ï¼Œåˆ™ç»˜åˆ¶\n                // æ³¨æ„ï¼šè¿™é‡Œç®€åŒ–å¤„ç†ï¼Œç›´æ¥ç”»åœ¨æ¡†ä¸Šæ–¹\n                Cv2.Rectangle(mat,\n                               new Point(item.box.X, item.box.Y - textSize.Height - 5),\n                               new Point(item.box.X + textSize.Width, item.box.Y),\n                               new Scalar(0, 255, 0),\n                               thickness: -1); // -1 è¡¨ç¤ºå¡«å……\n                // 5. ç»˜åˆ¶æ–‡æœ¬ï¼ˆç™½è‰²æ–‡å­—ï¼‰\n                Cv2.PutText(mat,\n                            label,\n                            new Point(item.box.X, item.box.Y - 5),\n                            HersheyFonts.HersheySimplex,\n                            0.6,\n                            new Scalar(0, 0, 0),\n                            1);\n            }\n            return mat;\n        }\n\n        public class DetData\n        {\n            public int index;\n            public float score;\n            public Rect box;\n        }\n    }\n}\n\n\n</code></pre>\n<p><strong>ç¨‹åºè¿è¡Œç»“æœï¼š</strong></p>\n<p><img alt=\"æ¨ç†ç»“æœ\" class=\"lazyload\" /></p>\n<p><img alt=\"æ£€æµ‹ç»“æœ\" class=\"lazyload\" /></p>\n<p><strong>æ€§èƒ½æµ‹è¯•ç»“æœï¼š</strong></p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center;\">Batch Size</th>\n<th style=\"text-align: center;\">1</th>\n<th style=\"text-align: center;\">2</th>\n<th style=\"text-align: center;\">4</th>\n<th style=\"text-align: center;\">6</th>\n<th style=\"text-align: center;\">8</th>\n<th style=\"text-align: center;\">10</th>\n<th style=\"text-align: center;\">12</th>\n<th style=\"text-align: center;\">14</th>\n<th style=\"text-align: center;\">16</th>\n<th style=\"text-align: center;\">18</th>\n<th style=\"text-align: center;\">20</th>\n<th style=\"text-align: center;\">22</th>\n<th style=\"text-align: center;\">24</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center;\">å‰å¤„ç† (ms)</td>\n<td style=\"text-align: center;\">9</td>\n<td style=\"text-align: center;\">13</td>\n<td style=\"text-align: center;\">27</td>\n<td style=\"text-align: center;\">38</td>\n<td style=\"text-align: center;\">56</td>\n<td style=\"text-align: center;\">59</td>\n<td style=\"text-align: center;\">63</td>\n<td style=\"text-align: center;\">83</td>\n<td style=\"text-align: center;\">96</td>\n<td style=\"text-align: center;\">105</td>\n<td style=\"text-align: center;\">118</td>\n<td style=\"text-align: center;\">130</td>\n<td style=\"text-align: center;\">144</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">æ¨¡å‹æ¨ç† (ms)</td>\n<td style=\"text-align: center;\">7</td>\n<td style=\"text-align: center;\">15</td>\n<td style=\"text-align: center;\">24</td>\n<td style=\"text-align: center;\">36</td>\n<td style=\"text-align: center;\">48</td>\n<td style=\"text-align: center;\">60</td>\n<td style=\"text-align: center;\">96</td>\n<td style=\"text-align: center;\">84</td>\n<td style=\"text-align: center;\">93</td>\n<td style=\"text-align: center;\">153</td>\n<td style=\"text-align: center;\">120</td>\n<td style=\"text-align: center;\">133</td>\n<td style=\"text-align: center;\">203</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">åå¤„ç† (ms)</td>\n<td style=\"text-align: center;\">25</td>\n<td style=\"text-align: center;\">26</td>\n<td style=\"text-align: center;\">26</td>\n<td style=\"text-align: center;\">26</td>\n<td style=\"text-align: center;\">28</td>\n<td style=\"text-align: center;\">27</td>\n<td style=\"text-align: center;\">27</td>\n<td style=\"text-align: center;\">28</td>\n<td style=\"text-align: center;\">28</td>\n<td style=\"text-align: center;\">28</td>\n<td style=\"text-align: center;\">27</td>\n<td style=\"text-align: center;\">31</td>\n<td style=\"text-align: center;\">29</td>\n</tr>\n</tbody>\n</table>\n<blockquote>\n<p>ğŸ”—<strong>ç¨‹åºè·¯å¾„é“¾æ¥</strong>ï¼šå®Œæ•´ç¨‹åºå·²ç»ä¸Šä¼ åˆ°GitHubï¼Œè¯·è‡ªè¡Œä¸‹è½½ï¼Œé“¾æ¥ä¸ºï¼š</p>\n<pre><code>https://github.com/guojin-yan/TensorRT-CSharp-API/tree/TensorRtSharp3.0/samples/YoloDetInfer\n</code></pre>\n<p>åŒæ—¶ä¹Ÿæä¾›äº†<strong>YoloOBB</strong>æ¨¡å‹çš„æ¨ç†ç¨‹åºï¼Œè¯·è‡ªè¡Œä¸‹è½½ï¼Œé“¾æ¥ä¸ºï¼š</p>\n<pre><code>https://github.com/guojin-yan/TensorRT-CSharp-API/tree/TensorRtSharp3.0/samples/YoloObbInfer\n</code></pre>\n</blockquote>\n<hr />\n<h3 id=\"ç¤ºä¾‹-4åŠ¨æ€å½¢çŠ¶æ¨ç†\">ç¤ºä¾‹ 4ï¼šåŠ¨æ€å½¢çŠ¶æ¨ç†</h3>\n<p>å¯¹äºè¾“å…¥å°ºå¯¸å¯å˜çš„æ¨¡å‹ï¼Œéœ€è¦æ ¹æ®è¾“å…¥çš„æ•°æ®é…ç½®åŠ¨æ€å½¢çŠ¶ã€‚</p>\n<p><strong>æ ¸å¿ƒä»£ç ï¼š</strong></p>\n<pre><code class=\"language-csharp\">using JYPPX.TensorRtSharp.Cuda;\nusing JYPPX.TensorRtSharp.Nvinfer;\nusing OpenCvSharp;\nusing OpenCvSharp.Dnn;\nusing System.Diagnostics;\nusing System.Runtime.InteropServices;\n\nnamespace YoloObbBatchInfer\n{\n    internal class Program\n    {\n        // ================= é…ç½®å‚æ•° =================\n        // æ¨¡å‹è¾“å…¥å°ºå¯¸ (å®½=é«˜)\n        private const int InputSize = 1024;\n        // å»ºè®®æ ¹æ®å®é™…æ¨¡å‹åŠ¨æ€è·å–æˆ–ä½¿ç”¨ Netron æŸ¥çœ‹\n        private const int OutputSize = 21504;\n        // æ¨¡å‹ç±»åˆ«æ•° (æ ¹æ®æ‚¨çš„å…·ä½“æ•°æ®é›†ä¿®æ”¹ï¼Œæ­¤å¤„å‡è®¾ä¸º15ç±»)\n        private const int CategoryNum = 15;\n        // ç½®ä¿¡åº¦é˜ˆå€¼\n        private const float ConfThreshold = 0.25f;\n\n        // NMS IOU é˜ˆå€¼\n        private const float NmsThreshold = 0.3f;\n        private const int MaxBatchSize = 24;\n        static void Main(string[] args)\n        {\n            //  ============= é…ç½® TensorRT æ—¥å¿—å›è°ƒ =============\n            // å®šä¹‰ä¸€ä¸ªå§”æ‰˜ï¼Œç”¨äºå¤„ç† TensorRT å†…éƒ¨äº§ç”Ÿçš„æ—¥å¿—æ¶ˆæ¯ã€‚\n            // è¿™å…è®¸æˆ‘ä»¬å°† C++ å±‚é¢çš„æ—¥å¿—è¾“å‡ºåˆ° C# çš„æ§åˆ¶å°ã€‚\n            LogCallbackFunction _callbackDelegate = (message) =&gt;\n            {\n                Console.WriteLine(message);\n            };\n            // å°†è‡ªå®šä¹‰çš„å›è°ƒå‡½æ•°æ³¨å†Œç»™ TensorRT çš„å…¨å±€ Logger å®ä¾‹ã€‚\n            Logger.Instance.SetCallback(_callbackDelegate);\n\n            // è®¾ç½®æ—¥å¿—çš„ä¸¥é‡æ€§çº§åˆ«é˜ˆå€¼ã€‚\n            // LoggerSeverity.kINFO: æ‰“å°ä¿¡æ¯ã€è­¦å‘Šå’Œé”™è¯¯ã€‚\n            // å¼€å‘è°ƒè¯•é˜¶æ®µé€šå¸¸è®¾ä¸º kINFO æˆ– kVERBOSEï¼›ç”Ÿäº§ç¯å¢ƒå¯è®¾ä¸º kWARNING æˆ– kERROR ä»¥å‡å°‘è¾“å‡ºã€‚\n            Logger.Instance.SetThreshold(LoggerSeverity.kINFO);\n\n            string enginePath = \"yolov8s-obb_b.engine\";\n            string[] imagePaths = { \n                \"P0006.png\" , \"P0016.png\", \"P0456.png\", \"P0813.png\"};\n            // ================= 1. åŠ è½½ TensorRT Engine =================\n            // ä½¿ç”¨ using è¯­å¥ç¡®ä¿æ–‡ä»¶æµæ­£ç¡®å…³é—­\n            byte[] engineData;\n            using (FileStream fs = new FileStream(enginePath, FileMode.Open, FileAccess.Read))\n            using (BinaryReader br = new BinaryReader(fs))\n            {\n                engineData = br.ReadBytes((int)fs.Length);\n            }\n\n            // ååºåˆ—åŒ– Engine\n            // Runtime å¿…é¡»åœ¨ Engine ç”Ÿå‘½å‘¨æœŸå†…ä¿æŒå­˜æ´»ï¼Œé€šå¸¸å»ºè®®è®¾ä¸ºå…¨å±€æˆ–é™æ€ï¼Œæˆ–è€…ç¡®ä¿å®ƒæœ€åé‡Šæ”¾\n            Runtime runtime = new Runtime();\n            runtime.setMaxThreads(10);\n            // åˆ›å»º CudaEngine (æ­¤å¤„ä½¿ç”¨ using ç¡®ä¿æ¨ç†å®Œæˆåå¼•æ“è¢«é”€æ¯)\n            using (CudaEngine cudaEngine = runtime.deserializeCudaEngineByBlob(engineData, (ulong)engineData.Length))\n            {\n                // ================= 2. åˆå§‹åŒ–æ¨ç†ä¸Šä¸‹æ–‡ä¸æ˜¾å­˜ =================\n                // åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡\n                using (JYPPX.TensorRtSharp.Nvinfer.ExecutionContext executionContext = cudaEngine.createExecutionContext(TrtExecutionContextAllocationStrategy.kSTATIC))\n                using (CudaStream cudaStream = new CudaStream()) // åˆ›å»º CUDA æµç”¨äºå¼‚æ­¥æ‰§è¡Œ\n                {\n                    // è·å–è¾“å…¥ç»´åº¦ä¿¡æ¯ (ç”¨äºæ ¡éªŒ)\n                    Dims inputDims = executionContext.getTensorShape(\"images\");\n                    Logger.Instance.INFO($\"Input Shape: {inputDims.d[0]}x{inputDims.d[1]}x{inputDims.d[2]}x{inputDims.d[3]}\");\n\n                    // è®¡ç®—æ‰€éœ€æ˜¾å­˜å¤§å°\n                    // è¾“å…¥: Batch=1, Channel=3, Height=1024, Width=1024\n                    ulong inputSizeInBytes = MaxBatchSize * 3 * InputSize * InputSize;\n                    // è¾“å‡º: Batch=1, Channels=CategoryNum+4(box)+1(angle), Num=8400\n                    int outputChannels = CategoryNum + 5; // 4åæ ‡ + 1è§’åº¦ + Nç±»åˆ«\n                    ulong outputSizeInBytes = (ulong)(MaxBatchSize * outputChannels * OutputSize);\n\n                    Stopwatch sw = new Stopwatch();\n                    // åˆ†é… GPU æ˜¾å­˜\n                    using (Cuda1DMemory&lt;float&gt; inputGpuMemory = new Cuda1DMemory&lt;float&gt;(inputSizeInBytes))\n                    using (Cuda1DMemory&lt;float&gt; outputGpuMemory = new Cuda1DMemory&lt;float&gt;(outputSizeInBytes))\n                    {\n                        // ç»‘å®šæ˜¾å­˜åœ°å€åˆ° TensorRT ä¸Šä¸‹æ–‡\n                        executionContext.setInputTensorAddress(\"images\", inputGpuMemory.get());\n                        executionContext.setOutputTensorAddress(\"output0\", outputGpuMemory.get());\n\n                        // å…³é”®ä¸€æ­¥ï¼Œä¿®æ”¹æœ¬æ¬¡æ¨ç†çš„å½¢çŠ¶\n                        executionContext.setinputShape(\"images\", new Dims(imagePaths.Count(), 3, 1024, 1024));\n                        // é¢„çƒ­æ¨ç† (å¯é€‰ï¼Œä½†æ¨èï¼Œå°¤å…¶æ˜¯é¦–æ¬¡æ¨ç†æ—¶)\n                        executionContext.executeV3(cudaStream);\n                        cudaStream.Synchronize();\n\n                        // ================= 3. å›¾åƒé¢„å¤„ç† =================\n                        List&lt;Mat&gt; images = new List&lt;Mat&gt;();\n                        foreach (var path in imagePaths) \n                        {\n                            Mat img = Cv2.ImRead(path);\n                            if (img.Empty())\n                            {\n                                Logger.Instance.INFO(\"Image not found!\");\n                                return;\n                            }\n                            images.Add(img);\n                        }\n\n                        (float[] inputData1, float[] scales1, int[] xOffsets1, int[] yOffsets1) = PreProcessBatch(images);\n                        sw.Start();\n                        (float[] inputData, float[] scales, int[] xOffsets, int[] yOffsets) = PreProcessBatch(images);\n                        sw.Stop();\n                        Logger.Instance.INFO($\"Pre-processing time: {sw.ElapsedMilliseconds} ms\");\n                        // ================= 4. æ¨ç† =================\n\n                        // å‡†å¤‡ä¸»æœºå†…å­˜æ¥æ”¶ç»“æœ\n                        float[] outputData1 = new float[imagePaths.Count() * outputChannels * OutputSize];\n                        // å°†æ•°æ®ä»ä¸»æœº æ‹·è´åˆ°è®¾å¤‡\n                        inputGpuMemory.copyFromHostAsync(inputData, cudaStream);\n\n                        // æ‰§è¡Œæ¨ç† (enqueueV3 æ˜¯å¼‚æ­¥çš„)\n                        executionContext.executeV3(cudaStream);\n                        // ç­‰å¾…æ¨ç†å®Œæˆ\n                        cudaStream.Synchronize();\n                        // å°†ç»“æœä»è®¾å¤‡ æ‹·è´å›ä¸»æœº\n                        // è¿™é‡Œçš„æ‹·è´æ˜¯åŒæ­¥çš„ï¼Œä¼šç­‰å¾… GPU è®¡ç®—å®Œæˆ\n                        outputGpuMemory.copyToHostAsync(outputData1, cudaStream);\n\n                        sw.Restart();\n                        // å‡†å¤‡ä¸»æœºå†…å­˜æ¥æ”¶ç»“æœ\n                        float[] outputData = new float[imagePaths.Count() * outputChannels * OutputSize];\n                        // å°†æ•°æ®ä»ä¸»æœº æ‹·è´åˆ°è®¾å¤‡\n                        inputGpuMemory.copyFromHostAsync(inputData, cudaStream);\n\n                        // æ‰§è¡Œæ¨ç† (enqueueV3 æ˜¯å¼‚æ­¥çš„)\n                        executionContext.executeV3(cudaStream);\n                        // ç­‰å¾…æ¨ç†å®Œæˆ\n                        cudaStream.Synchronize();\n                        // å°†ç»“æœä»è®¾å¤‡ æ‹·è´å›ä¸»æœº\n                        // è¿™é‡Œçš„æ‹·è´æ˜¯åŒæ­¥çš„ï¼Œä¼šç­‰å¾… GPU è®¡ç®—å®Œæˆ\n                        outputGpuMemory.copyToHostAsync(outputData, cudaStream);\n\n                        sw.Stop();\n                        Logger.Instance.INFO($\"Inference time: {sw.ElapsedMilliseconds} ms\");\n                        // ================= 5. åå¤„ç† =================\n                        List&lt;List&lt;ObbData&gt;&gt; results1 = PostProcessBatch(outputData, scales, xOffsets, yOffsets);\n                        sw.Restart();\n                        List&lt;List&lt;ObbData&gt;&gt; results = PostProcessBatch(outputData, scales, xOffsets, yOffsets);\n                        sw.Stop();\n                        Logger.Instance.INFO($\"Post-processing time: {sw.ElapsedMilliseconds} ms\");\n\n                        // ================= 6. ç»“æœå¯è§†åŒ– =================\n                        List&lt;Mat&gt; resultMats = new List&lt;Mat&gt;();\n                        for(int i = 0; i &lt; results.Count; ++i)\n                        {\n                            resultMats.Add(DrawObbResult(results[i], images[i]));\n                        }\n                        Mat putResultImgs = StitchHorizontalWithPadding(resultMats);\n                        Cv2.ImWrite(\"YOLO11-OBB Result.png\", putResultImgs);\n                        Cv2.ImShow(\"YOLO11-OBB Result\", putResultImgs);\n                        Cv2.WaitKey(0);\n                    }\n                }\n            }\n        }\n\n        /// &lt;summary&gt;\n        /// å›¾åƒé¢„å¤„ç†ï¼šLetterbox ç¼©æ”¾ã€å½’ä¸€åŒ–ã€HWC è½¬ CHW\n        /// &lt;/summary&gt;\n        private static (float[], float[] ,  int[] , int[] ) PreProcessBatch(List&lt;Mat&gt; imgs)\n        {\n            int dataLen = 3 * InputSize * InputSize;\n            float[] chwData = new float[imgs.Count * dataLen];\n            float[] scales = new float[imgs.Count];\n            int[] xOffsets = new int[imgs.Count];\n            int[]  yOffsets = new int[imgs.Count];\n            Parallel.For(0, imgs.Count, i =&gt;\n            {\n                Mat img = imgs[i];\n                // è½¬æ¢é¢œè‰²ç©ºé—´ BGR -&gt; RGB\n                Mat rgbImg = new Mat();\n                Cv2.CvtColor(img, rgbImg, ColorConversionCodes.BGR2RGB);\n\n                // è®¡ç®— Letterbox ç¼©æ”¾æ¯”ä¾‹\n                int maxDim = Math.Max(rgbImg.Width, rgbImg.Height);\n                scales[i] = (float)maxDim / InputSize;\n\n                // è®¡ç®—ç¼©æ”¾åçš„å°ºå¯¸\n                int newWidth = (int)(rgbImg.Width / scales[i]);\n                int newHeight = (int)(rgbImg.Height / scales[i]);\n\n                // Resize å›¾åƒ\n                Mat resizedImg = new Mat();\n                Cv2.Resize(rgbImg, resizedImg, new Size(newWidth, newHeight));\n\n                // åˆ›å»ºé»‘è‰²èƒŒæ™¯ Canvas (InputSize x InputSize)\n                Mat paddedImg = Mat.Zeros(InputSize, InputSize, MatType.CV_8UC3);\n\n                // è®¡ç®—ç²˜è´´ä½ç½® (å±…ä¸­)\n                xOffsets[i] = (InputSize - newWidth) / 2;\n                yOffsets[i] = (InputSize - newHeight) / 2;\n\n                // å°†å›¾åƒæ‹·è´åˆ° Canvas ä¸­å¤®\n                Rect roi = new Rect(xOffsets[i], yOffsets[i], newWidth, newHeight);\n                resizedImg.CopyTo(new Mat(paddedImg, roi));\n\n                // å½’ä¸€åŒ– (0-255 -&gt; 0-1) å¹¶è½¬ä¸º float ç±»å‹\n                Mat floatImg = new Mat();\n                paddedImg.ConvertTo(floatImg, MatType.CV_32FC3, 1.0 / 255.0);\n\n                // HWC è½¬ CHW å¹¶å±•å¹³ä¸ºä¸€ç»´æ•°ç»„\n                Mat[] channels = Cv2.Split(floatImg);\n\n\n                // æ‹·è´æ•°æ®ï¼šRé€šé“ -&gt; Cé€šé“ -&gt; Bé€šé“ (OpenCV Split å‡ºæ¥é¡ºåºæ˜¯ B, G, Rï¼Œå¯¹åº”ç´¢å¼• 0, 1, 2)\n                int channelSize = InputSize * InputSize;\n                // å°† R, G, B ä¾æ¬¡æ‹·å…¥æ•°ç»„\n                Marshal.Copy(channels[0].Data, chwData, dataLen * i, channelSize); // R\n                Marshal.Copy(channels[1].Data, chwData, dataLen * i + channelSize, channelSize); // G\n                Marshal.Copy(channels[2].Data, chwData, dataLen * i + channelSize * 2, channelSize); // B\n\n                // é‡Šæ”¾ä¸´æ—¶ Mat\n                rgbImg.Dispose();\n                resizedImg.Dispose();\n                paddedImg.Dispose();\n                floatImg.Dispose();\n                foreach (var c in channels) c.Dispose();\n            });\n\n\n\n            return (chwData, scales, xOffsets, yOffsets);\n        }\n\n        /// &lt;summary&gt;\n        /// åå¤„ç†ï¼šè§£æ TensorRT è¾“å‡ºã€NMS è¿‡æ»¤\n        /// &lt;/summary&gt;\n        private static List&lt;List&lt;ObbData&gt;&gt; PostProcessBatch(float[] result, float[] scales, int[] xOffsets, int[] yOffsets)\n        {\n            List&lt;ObbData&gt;[] obbDatas = new List&lt;ObbData&gt;[scales.Length];\n\n            Parallel.For(0, scales.Length, b =&gt;\n            {\n                List&lt;RotatedRect&gt; boxes = new List&lt;RotatedRect&gt;();\n                List&lt;float&gt; confidences = new List&lt;float&gt;();\n                List&lt;int&gt; classIds = new List&lt;int&gt;();\n\n                // éå†æ‰€æœ‰é¢„æµ‹æ¡† (OutputSize)\n                // æ•°æ®å¸ƒå±€: [4(box) + 15(classes) + 1(angle)] * OutputSize\n                // å±•å¹³æ•°ç»„ä¸­ï¼ŒåŒä¸€å±æ€§çš„æ•°æ®æ˜¯è¿ç»­å­˜å‚¨çš„ï¼Œä¾‹å¦‚æ‰€æœ‰ cx åœ¨ä¸€èµ·ï¼Œæ‰€æœ‰ cy åœ¨åœ¨ä¸€èµ·...\n                int stride = OutputSize; // æ­¥é•¿ï¼Œä¸åŒå±æ€§åœ¨æ•°ç»„ä¸­çš„åç§»é‡\n\n                int resultDataOffset = OutputSize * (CategoryNum + 5) * b;\n\n                for (int i = 0; i &lt; OutputSize; i++)\n                {\n                    // æŸ¥æ‰¾æœ€å¤§ç±»åˆ«æ¦‚ç‡åŠå…¶ç´¢å¼•\n                    float maxConf = 0;\n                    int maxClassId = -1;\n\n                    // éå†ç±»åˆ« \n                    for (int c = 0; c &lt; CategoryNum; c++)\n                    {\n                        // æ•°ç»„ç´¢å¼•ï¼š(åæ ‡/è§’åº¦åç§»é‡ + ç±»åˆ«åç§») * æ¡†ç´¢å¼•\n                        // æ³¨æ„ï¼šåŸå§‹ä»£ç ä¸­ result[outputSize * j + i] è¿™ç§è®¿é—®æ–¹å¼åŸºäº Transposed æ•°æ®å¸ƒå±€\n                        float conf = result[(4 + c) * stride + i + resultDataOffset];\n                        if (conf &gt; maxConf)\n                        {\n                            maxConf = conf;\n                            maxClassId = c;\n                        }\n                    }\n\n                    // ç½®ä¿¡åº¦è¿‡æ»¤\n                    if (maxConf &gt; ConfThreshold)\n                    {\n                        // æå–åæ ‡ (cx, cy, w, h)\n                        float cx = result[0 * stride + i + resultDataOffset];\n                        float cy = result[1 * stride + i + resultDataOffset];\n                        float w = result[2 * stride + i + resultDataOffset];\n                        float h = result[3 * stride + i + resultDataOffset];\n\n                        // æå–è§’åº¦ (é€šå¸¸åœ¨ç¬¬ 5 ä¸ªä½ç½®ï¼Œå³ç±»åˆ«ä¹‹å‰)\n                        float angleRad = result[(CategoryNum + 4) * stride + i + resultDataOffset];\n\n                        // è¿˜åŸåæ ‡åˆ°åŸå›¾å°ºå¯¸\n                        float rx = (cx - xOffsets[b]) * scales[b];\n                        float ry = (cy - yOffsets[b]) * scales[b];\n                        float rw = w * scales[b];\n                        float rh = h * scales[b];\n\n                        // å°†å¼§åº¦è½¬æ¢ä¸ºè§’åº¦\n                        // Normalize angle to [-Ï€/2, Ï€/2] range\n                        // å°†è§’åº¦å½’ä¸€åŒ–åˆ°[-Ï€/2, Ï€/2]èŒƒå›´\n                        if (angleRad &gt;= Math.PI &amp;&amp; angleRad &lt;= 0.75 * Math.PI)\n                        {\n                            angleRad -= (float)Math.PI;\n                        }\n                        float angleDeg = angleRad * (float)(180f / Math.PI);  // Convert to degrees/è½¬æ¢ä¸ºè§’åº¦åˆ¶\n\n                        boxes.Add(new RotatedRect(new Point2f(rx, ry), new Size2f(rw, rh), angleDeg));\n                        confidences.Add(maxConf);\n                        classIds.Add(maxClassId);\n                    }\n                }\n\n                // æ‰§è¡Œ NMS (æ—‹è½¬æ¡† NMS)\n                // OpenCV çš„ NMSBoxes æ”¯æŒ RotatedRect\n                int[] indices;\n                CvDnn.NMSBoxes(boxes, confidences, ConfThreshold, NmsThreshold, out indices);\n\n                List&lt;ObbData&gt; finalResults = new List&lt;ObbData&gt;();\n                foreach (int idx in indices)\n                {\n                    finalResults.Add(new ObbData\n                    {\n                        index = classIds[idx],\n                        score = confidences[idx],\n                        box = boxes[idx]\n                    });\n                }\n                obbDatas[b] = finalResults;\n            });\n\n           \n\n            return obbDatas.Select(x =&gt; x?.ToList() ?? new List&lt;ObbData&gt;()).ToList();\n        }\n\n        /// &lt;summary&gt;\n        /// ç»˜åˆ¶æ—‹è½¬æ£€æµ‹ç»“æœ\n        /// &lt;/summary&gt;\n        public static Mat DrawObbResult(List&lt;ObbData&gt; results, Mat image)\n        {\n            // å…‹éš†å›¾åƒä»¥å…ä¿®æ”¹åŸå›¾\n            Mat mat = image.Clone();\n\n            foreach (var item in results)\n            {\n                // è·å–æ—‹è½¬çŸ©å½¢çš„å››ä¸ªé¡¶ç‚¹\n                Point2f[] points = item.box.Points();\n\n                // ç»˜åˆ¶å¤šè¾¹å½¢æ¡†\n                for (int j = 0; j &lt; 4; j++)\n                {\n                    Cv2.Line(mat, (Point)points[j], (Point)points[(j + 1) % 4],\n                            new Scalar(0, 255, 0), 2);\n                }\n\n                // ç»˜åˆ¶æ ‡ç­¾ (ç±»åˆ« - ç½®ä¿¡åº¦)\n                string label = $\"{item.index} - {item.score:F2}\";\n                Point2f textPos = points[0]; // å·¦ä¸Šè§’\n\n                Cv2.PutText(mat, label, (Point)textPos, HersheyFonts.HersheySimplex, 0.8,\n                            new Scalar(255, 0, 0), 2);\n            }\n\n            return mat;\n        }\n\n        public class ObbData\n        {\n            public int index;\n            public float score;\n            public RotatedRect box;\n        }\n\n\n        /// &lt;summary&gt;\n        /// æ™ºèƒ½æ°´å¹³æ‹¼æ¥ï¼šè‡ªåŠ¨å¤„ç†é«˜åº¦ä¸ä¸€è‡´çš„å›¾ç‰‡\n        /// &lt;/summary&gt;\n        /// &lt;param name=\"images\"&gt;å›¾ç‰‡åˆ—è¡¨&lt;/param&gt;\n        /// &lt;param name=\"backgroundColor\"&gt;å¡«å……èƒŒæ™¯é¢œè‰²ï¼Œé»˜è®¤ä¸ºé»‘è‰²&lt;/param&gt;\n        /// &lt;returns&gt;æ‹¼æ¥åçš„ Mat&lt;/returns&gt;\n        public static Mat StitchHorizontalWithPadding(List&lt;Mat&gt; images, Scalar? backgroundColor = null)\n        {\n            if (images == null || images.Count == 0)\n                return new Mat();\n            // 1. æ‰¾åˆ°æ‰€æœ‰å›¾ç‰‡ä¸­çš„æœ€å¤§é«˜åº¦\n            int maxHeight = images.Max(img =&gt; img.Rows);\n            // è®¡ç®—æ€»å®½åº¦\n            int totalWidth = images.Sum(img =&gt; img.Cols);\n            // 2. å‡†å¤‡ç»“æœç”»å¸ƒ\n            Mat result = new Mat(maxHeight, totalWidth, images[0].Type(), backgroundColor ?? Scalar.Black);\n            // 3. å°†æ¯ä¸€å¼ å›¾ç‰‡å¤åˆ¶åˆ°ç”»å¸ƒçš„å¯¹åº”ä½ç½®\n            int currentX = 0; // å½“å‰ X è½´åç§»é‡\n            foreach (var img in images)\n            {\n                if (img.Empty()) continue;\n                // è®¡ç®—å½“å‰å›¾ç‰‡éœ€è¦å‚ç›´åç§»å¤šå°‘ï¼ˆåº•éƒ¨å¯¹é½é€»è¾‘ï¼‰\n                // å¦‚æœæƒ³é¡¶éƒ¨å¯¹é½ï¼ŒyOffset = 0\n                // å¦‚æœæƒ³å±…ä¸­ï¼ŒyOffset = (maxHeight - img.Rows) / 2\n                int yOffset = maxHeight - img.Rows;\n                // å®šä¹‰ ROI (æ„Ÿå…´è¶£åŒºåŸŸ)\n                Rect roi = new Rect(currentX, yOffset, img.Cols, img.Rows);\n\n                // å°†åŸå›¾ç‰‡æ‹·è´åˆ°ç»“æœå›¾çš„ ROI åŒºåŸŸ\n                img.CopyTo(new Mat(result, roi));\n                // ç§»åŠ¨ X è½´æŒ‡é’ˆ\n                currentX += img.Cols;\n            }\n            return result;\n        }\n    }\n}\n\n\n</code></pre>\n<p>ä¸‹å›¾ä¸ºä¸Šè¿°ç¨‹åºè¿è¡Œåçš„è¾“å‡ºï¼Œæ¨¡å‹è¾“å…¥å½¢çŠ¶ä¸º -1x3x1024x1024ï¼Œå…¶ä¸­Batch Sizeä¸ºåŠ¨æ€è¾“å…¥ï¼›é¡¹ç›®ç¤ºä¾‹ä½¿ç”¨äº†å››å¼ å›¾ç‰‡è¿›è¡ŒåŒæ—¶æ¨ç†ï¼Œå¼€å¯å¹¶è¡Œå¤„ç†åï¼Œå››å¼ å›¾åƒé¢„å¤„ç†æ—¶é—´ä»…ç”¨21msï¼Œæ¨ç†æ—¶é—´ä¸º25msï¼Œåå¤„ç†æ—¶é—´ä¸º26msï¼Œç´¯è®¡æ—¶é—´ä¸º72ms.</p>\n<p><img alt=\"image-20260109225451392\" class=\"lazyload\" /></p>\n<p>ä¸‹å›¾ä¸ºæ¨ç†ç»“æœå±•ç¤ºï¼š</p>\n<p><img alt=\"YOLO11-OBB Result\" class=\"lazyload\" /></p>\n<p><strong>æ€§èƒ½æµ‹è¯•ï¼ˆä¸åŒ Batch Sizeï¼‰ï¼š</strong></p>\n<p>ä¸ºäº†æ¢ç©¶ä¸åŒBatch Sizeæ¨ç†æ—¶é—´å·®å¼‚ï¼Œæ­¤å¤„å¯¹ä¸åŒBatch Sizeè¿›è¡Œäº†æµ‹è¯•ï¼Œæµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center;\">Batch Size</th>\n<th style=\"text-align: center;\">1</th>\n<th style=\"text-align: center;\">2</th>\n<th style=\"text-align: center;\">4</th>\n<th style=\"text-align: center;\">6</th>\n<th style=\"text-align: center;\">8</th>\n<th style=\"text-align: center;\">10</th>\n<th style=\"text-align: center;\">12</th>\n<th style=\"text-align: center;\">14</th>\n<th style=\"text-align: center;\">16</th>\n<th style=\"text-align: center;\">18</th>\n<th style=\"text-align: center;\">20</th>\n<th style=\"text-align: center;\">22</th>\n<th style=\"text-align: center;\">24</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center;\">å‰å¤„ç† (ms )</td>\n<td style=\"text-align: center;\">9</td>\n<td style=\"text-align: center;\">13</td>\n<td style=\"text-align: center;\">27</td>\n<td style=\"text-align: center;\">38</td>\n<td style=\"text-align: center;\">56</td>\n<td style=\"text-align: center;\">59</td>\n<td style=\"text-align: center;\">63</td>\n<td style=\"text-align: center;\">83</td>\n<td style=\"text-align: center;\">96</td>\n<td style=\"text-align: center;\">105</td>\n<td style=\"text-align: center;\">118</td>\n<td style=\"text-align: center;\">130</td>\n<td style=\"text-align: center;\">144</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">æ¨¡å‹æ¨ç† (ms)</td>\n<td style=\"text-align: center;\">7</td>\n<td style=\"text-align: center;\">15</td>\n<td style=\"text-align: center;\">24</td>\n<td style=\"text-align: center;\">36</td>\n<td style=\"text-align: center;\">48</td>\n<td style=\"text-align: center;\">60</td>\n<td style=\"text-align: center;\">96</td>\n<td style=\"text-align: center;\">84</td>\n<td style=\"text-align: center;\">93</td>\n<td style=\"text-align: center;\">153</td>\n<td style=\"text-align: center;\">120</td>\n<td style=\"text-align: center;\">133</td>\n<td style=\"text-align: center;\">203</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">åå¤„ç† (ms)</td>\n<td style=\"text-align: center;\">25</td>\n<td style=\"text-align: center;\">26</td>\n<td style=\"text-align: center;\">26</td>\n<td style=\"text-align: center;\">26</td>\n<td style=\"text-align: center;\">28</td>\n<td style=\"text-align: center;\">27</td>\n<td style=\"text-align: center;\">27</td>\n<td style=\"text-align: center;\">28</td>\n<td style=\"text-align: center;\">28</td>\n<td style=\"text-align: center;\">28</td>\n<td style=\"text-align: center;\">27</td>\n<td style=\"text-align: center;\">31</td>\n<td style=\"text-align: center;\">29</td>\n</tr>\n</tbody>\n</table>\n<blockquote>\n<p>ğŸ”—<strong>ç¨‹åºè·¯å¾„é“¾æ¥</strong>ï¼šå®Œæ•´ç¨‹åºå·²ç»ä¸Šä¼ åˆ°GitHubï¼Œè¯·è‡ªè¡Œä¸‹è½½ï¼Œé“¾æ¥ä¸ºï¼š</p>\n<pre><code>https://github.com/guojin-yan/TensorRT-CSharp-API/tree/TensorRtSharp3.0/samples/YoloObbBatchInfer\n</code></pre>\n</blockquote>\n<hr />\n<h3 id=\"ç¤ºä¾‹-5å¹¶è¡Œæ¨ç†\">ç¤ºä¾‹ 5ï¼šå¹¶è¡Œæ¨ç†</h3>\n<p>ä½¿ç”¨ä¸€ä¸ª Runtime åˆ›å»ºå¤šæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå®ç°å¤šå¹¶è¡Œæ¨ç†ã€‚</p>\n<p><strong>æ ¸å¿ƒä»£ç ï¼š</strong></p>\n<pre><code class=\"language-csharp\">using JYPPX.TensorRtSharp.Cuda;\nusing JYPPX.TensorRtSharp.Nvinfer;\nusing OpenCvSharp;\nusing OpenCvSharp.Dnn;\nusing System.Diagnostics;\nusing System.Runtime.InteropServices;\nusing static OpenCvSharp.FileStorage;\n\nnamespace YoloDetParallelInfer\n{\n    internal class Program\n    {\n        // ================= é…ç½®å‚æ•° =================\n        // æ¨¡å‹è¾“å…¥å°ºå¯¸ (å®½=é«˜)\n        private const int InputSize = 640;\n\n\n        // å»ºè®®æ ¹æ®å®é™…æ¨¡å‹åŠ¨æ€è·å–æˆ–ä½¿ç”¨ Netron æŸ¥çœ‹\n        private const int OutputSize = 8400;\n\n        // æ¨¡å‹ç±»åˆ«æ•° (æ ¹æ®æ‚¨çš„å…·ä½“æ•°æ®é›†ä¿®æ”¹ï¼Œæ­¤å¤„å‡è®¾ä¸º15ç±»)\n        private const int CategoryNum = 80;\n\n        // ç½®ä¿¡åº¦é˜ˆå€¼\n        private const float ConfThreshold = 0.25f;\n\n        // NMS IOU é˜ˆå€¼\n        private const float NmsThreshold = 0.3f;\n\n        static void Main(string[] args)\n        {\n            //  ============= é…ç½® TensorRT æ—¥å¿—å›è°ƒ =============\n            // å®šä¹‰ä¸€ä¸ªå§”æ‰˜ï¼Œç”¨äºå¤„ç† TensorRT å†…éƒ¨äº§ç”Ÿçš„æ—¥å¿—æ¶ˆæ¯ã€‚\n            // è¿™å…è®¸æˆ‘ä»¬å°† C++ å±‚é¢çš„æ—¥å¿—è¾“å‡ºåˆ° C# çš„æ§åˆ¶å°ã€‚\n            LogCallbackFunction _callbackDelegate = (message) =&gt;\n            {\n                Console.WriteLine(message);\n            };\n\n            // å°†è‡ªå®šä¹‰çš„å›è°ƒå‡½æ•°æ³¨å†Œç»™ TensorRT çš„å…¨å±€ Logger å®ä¾‹ã€‚\n            Logger.Instance.SetCallback(_callbackDelegate);\n\n            // è®¾ç½®æ—¥å¿—çš„ä¸¥é‡æ€§çº§åˆ«é˜ˆå€¼ã€‚\n            // LoggerSeverity.kINFO: æ‰“å°ä¿¡æ¯ã€è­¦å‘Šå’Œé”™è¯¯ã€‚\n            // å¼€å‘è°ƒè¯•é˜¶æ®µé€šå¸¸è®¾ä¸º kINFO æˆ– kVERBOSEï¼›ç”Ÿäº§ç¯å¢ƒå¯è®¾ä¸º kWARNING æˆ– kERROR ä»¥å‡å°‘è¾“å‡ºã€‚\n            Logger.Instance.SetThreshold(LoggerSeverity.kINFO);\n\n            string enginePath = \"yolov8s.engine\";\n            string imagePath = \"bus.jpg\";\n\n                           Mat img = Cv2.ImRead(imagePath);\n                            if (img.Empty())\n                            {\n                                Logger.Instance.INFO(\"Image not found!\");\n                                return;\n                            }\n            // ================= 1. åŠ è½½ TensorRT Engine =================\n            // ä½¿ç”¨ using è¯­å¥ç¡®ä¿æ–‡ä»¶æµæ­£ç¡®å…³é—­\n            byte[] engineData;\n            using (FileStream fs = new FileStream(enginePath, FileMode.Open, FileAccess.Read))\n            using (BinaryReader br = new BinaryReader(fs))\n            {\n                engineData = br.ReadBytes((int)fs.Length);\n            }\n\n            // ååºåˆ—åŒ– Engine\n            // Runtime å¿…é¡»åœ¨ Engine ç”Ÿå‘½å‘¨æœŸå†…ä¿æŒå­˜æ´»ï¼Œé€šå¸¸å»ºè®®è®¾ä¸ºå…¨å±€æˆ–é™æ€ï¼Œæˆ–è€…ç¡®ä¿å®ƒæœ€åé‡Šæ”¾\n            Runtime runtime = new Runtime();\n            runtime.setMaxThreads(6);\n            // åˆ›å»º CudaEngine (æ­¤å¤„ä½¿ç”¨ using ç¡®ä¿æ¨ç†å®Œæˆåå¼•æ“è¢«é”€æ¯)\n            using (CudaEngine cudaEngine = runtime.deserializeCudaEngineByBlob(engineData, (ulong)engineData.Length))\n            {\n                // ================= 2. åˆå§‹åŒ–æ¨ç†ä¸Šä¸‹æ–‡ä¸æ˜¾å­˜ =================\n                Stopwatch totalSw = new Stopwatch();\n                totalSw.Start();\n                Parallel.For(0, 24, b =&gt;\n                {           \n                    \n                    // åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡\n                    using (JYPPX.TensorRtSharp.Nvinfer.ExecutionContext executionContext = cudaEngine.createExecutionContext(TrtExecutionContextAllocationStrategy.kSTATIC))\n                    using (CudaStream cudaStream = new CudaStream()) // åˆ›å»º CUDA æµç”¨äºå¼‚æ­¥æ‰§è¡Œ\n                    {\n                        // è·å–è¾“å…¥ç»´åº¦ä¿¡æ¯ (ç”¨äºæ ¡éªŒ)\n                        Dims inputDims = executionContext.getTensorShape(\"images\");\n                        Logger.Instance.INFO($\"Input Shape: {inputDims.d[0]}x{inputDims.d[1]}x{inputDims.d[2]}x{inputDims.d[3]}\");\n\n                        // è®¡ç®—æ‰€éœ€æ˜¾å­˜å¤§å°\n                        // è¾“å…¥: Batch=1, Channel=3, Height=640, Width=640\n                        ulong inputSizeInBytes = 1 * 3 * InputSize * InputSize;\n                        // è¾“å‡º: Batch=1, Channels=CategoryNum+4(box)+1(angle), Num=8400\n                        int outputChannels = CategoryNum + 4; // 4åæ ‡ + Nç±»åˆ«\n                        ulong outputSizeInBytes = (ulong)(1 * outputChannels * OutputSize);\n\n                        Stopwatch sw = new Stopwatch();\n                        // åˆ†é… GPU æ˜¾å­˜\n                        using (Cuda1DMemory&lt;float&gt; inputGpuMemory = new Cuda1DMemory&lt;float&gt;(inputSizeInBytes))\n                        using (Cuda1DMemory&lt;float&gt; outputGpuMemory = new Cuda1DMemory&lt;float&gt;(outputSizeInBytes))\n                        {\n                            // ç»‘å®šæ˜¾å­˜åœ°å€åˆ° TensorRT ä¸Šä¸‹æ–‡\n                            executionContext.setInputTensorAddress(\"images\", inputGpuMemory.get());\n                            executionContext.setOutputTensorAddress(\"output0\", outputGpuMemory.get());\n                            // é¢„çƒ­æ¨ç† (å¯é€‰ï¼Œä½†æ¨èï¼Œå°¤å…¶æ˜¯é¦–æ¬¡æ¨ç†æ—¶)\n                            executionContext.executeV3(cudaStream);\n                            cudaStream.Synchronize();\n                            // ================= 3. å›¾åƒé¢„å¤„ç† =================\n             \n\n                            sw.Start();\n                            float[] inputData = PreProcess(img, out float scale, out int xOffset, out int yOffset);\n                            sw.Stop();\n                            Logger.Instance.INFO($\"Channel {b}: Pre-processing time: {sw.ElapsedMilliseconds} ms\");\n                            // ================= 4. æ¨ç† =================\n                            // å‡†å¤‡ä¸»æœºå†…å­˜æ¥æ”¶ç»“æœ\n                            float[] outputData = new float[outputChannels * OutputSize];\n\n\n                            sw.Restart();\n                            // å°†æ•°æ®ä»ä¸»æœº æ‹·è´åˆ°è®¾å¤‡\n                            inputGpuMemory.copyFromHostAsync(inputData, cudaStream);\n\n                            // æ‰§è¡Œæ¨ç† (enqueueV3 æ˜¯å¼‚æ­¥çš„)\n                            executionContext.executeV3(cudaStream);\n                            // ç­‰å¾…æ¨ç†å®Œæˆ\n                            cudaStream.Synchronize();\n\n\n\n                            // å°†ç»“æœä»è®¾å¤‡ æ‹·è´å›ä¸»æœº\n                            // è¿™é‡Œçš„æ‹·è´æ˜¯åŒæ­¥çš„ï¼Œä¼šç­‰å¾… GPU è®¡ç®—å®Œæˆ\n                            outputGpuMemory.copyToHostAsync(outputData, cudaStream);\n                            sw.Stop();\n                            Logger.Instance.INFO($\"Channel {b}: Inference time: {sw.ElapsedMilliseconds} ms\");\n                            // ================= 5. åå¤„ç† =================\n\n                            sw.Restart();\n                            List&lt;DetData&gt; results = PostProcess(outputData, scale, xOffset, yOffset);\n                            sw.Stop();\n                            Logger.Instance.INFO($\"Channel {b}: Post-processing time: {sw.ElapsedMilliseconds} ms\");\n\n                            // ================= 6. ç»“æœå¯è§†åŒ– =================\n                            //Mat resultImg = DrawDetResult(results, img);\n                            //Cv2.ImShow(\"YOLO11-DET Result\", resultImg);\n                            //Cv2.WaitKey(0);\n                        }\n                    }\n                });\n\n                totalSw.Stop();\n                Logger.Instance.INFO($\"Total time for 8 inferences: {totalSw.ElapsedMilliseconds} ms\");\n\n\n            }\n        }\n\n        /// &lt;summary&gt;\n        /// å›¾åƒé¢„å¤„ç†ï¼šLetterbox ç¼©æ”¾ã€å½’ä¸€åŒ–ã€HWC è½¬ CHW\n        /// &lt;/summary&gt;\n        private static float[] PreProcess(Mat img, out float scale, out int xOffset, out int yOffset)\n        {\n            // è½¬æ¢é¢œè‰²ç©ºé—´ BGR -&gt; RGB\n            Mat rgbImg = new Mat();\n            Cv2.CvtColor(img, rgbImg, ColorConversionCodes.BGR2RGB);\n\n            // è®¡ç®— Letterbox ç¼©æ”¾æ¯”ä¾‹\n            int maxDim = Math.Max(rgbImg.Width, rgbImg.Height);\n            scale = (float)maxDim / InputSize;\n\n            // è®¡ç®—ç¼©æ”¾åçš„å°ºå¯¸\n            int newWidth = (int)(rgbImg.Width / scale);\n            int newHeight = (int)(rgbImg.Height / scale);\n\n            // Resize å›¾åƒ\n            Mat resizedImg = new Mat();\n            Cv2.Resize(rgbImg, resizedImg, new Size(newWidth, newHeight));\n\n            // åˆ›å»ºé»‘è‰²èƒŒæ™¯ Canvas (InputSize x InputSize)\n            Mat paddedImg = Mat.Zeros(InputSize, InputSize, MatType.CV_8UC3);\n\n            // è®¡ç®—ç²˜è´´ä½ç½® (å±…ä¸­)\n            xOffset = (InputSize - newWidth) / 2;\n            yOffset = (InputSize - newHeight) / 2;\n\n            // å°†å›¾åƒæ‹·è´åˆ° Canvas ä¸­å¤®\n            Rect roi = new Rect(xOffset, yOffset, newWidth, newHeight);\n            resizedImg.CopyTo(new Mat(paddedImg, roi));\n\n            // å½’ä¸€åŒ– (0-255 -&gt; 0-1) å¹¶è½¬ä¸º float ç±»å‹\n            Mat floatImg = new Mat();\n            paddedImg.ConvertTo(floatImg, MatType.CV_32FC3, 1.0 / 255.0);\n\n            // HWC è½¬ CHW å¹¶å±•å¹³ä¸ºä¸€ç»´æ•°ç»„\n            Mat[] channels = Cv2.Split(floatImg);\n            float[] chwData = new float[3 * InputSize * InputSize];\n\n            // æ‹·è´æ•°æ®ï¼šRé€šé“ -&gt; Cé€šé“ -&gt; Bé€šé“ (OpenCV Split å‡ºæ¥é¡ºåºæ˜¯ B, G, Rï¼Œå¯¹åº”ç´¢å¼• 0, 1, 2)\n            int channelSize = InputSize * InputSize;\n            // å°† R, G, B ä¾æ¬¡æ‹·å…¥æ•°ç»„\n            Marshal.Copy(channels[0].Data, chwData, 0, channelSize); // R\n            Marshal.Copy(channels[1].Data, chwData, channelSize, channelSize); // G\n            Marshal.Copy(channels[2].Data, chwData, channelSize * 2, channelSize); // B\n\n            // é‡Šæ”¾ä¸´æ—¶ Mat\n            rgbImg.Dispose();\n            resizedImg.Dispose();\n            paddedImg.Dispose();\n            floatImg.Dispose();\n            foreach (var c in channels) c.Dispose();\n\n            return chwData;\n        }\n\n        /// &lt;summary&gt;\n        /// åå¤„ç†ï¼šè§£æ TensorRT è¾“å‡ºã€NMS è¿‡æ»¤\n        /// &lt;/summary&gt;\n        private static List&lt;DetData&gt; PostProcess(float[] result, float scale, int xOffset, int yOffset)\n        {\n            List&lt;Rect&gt; boxes = new List&lt;Rect&gt;();\n            List&lt;float&gt; confidences = new List&lt;float&gt;();\n            List&lt;int&gt; classIds = new List&lt;int&gt;();\n\n            // éå†æ‰€æœ‰é¢„æµ‹æ¡† (OutputSize)\n            // æ•°æ®å¸ƒå±€: [4(box) + 80(classes)] * OutputSize\n            // å±•å¹³æ•°ç»„ä¸­ï¼ŒåŒä¸€å±æ€§çš„æ•°æ®æ˜¯è¿ç»­å­˜å‚¨çš„ï¼Œä¾‹å¦‚æ‰€æœ‰ cx åœ¨ä¸€èµ·ï¼Œæ‰€æœ‰ cy åœ¨åœ¨ä¸€èµ·...\n            int stride = OutputSize; // æ­¥é•¿ï¼Œä¸åŒå±æ€§åœ¨æ•°ç»„ä¸­çš„åç§»é‡\n\n            for (int i = 0; i &lt; OutputSize; i++)\n            {\n                // æŸ¥æ‰¾æœ€å¤§ç±»åˆ«æ¦‚ç‡åŠå…¶ç´¢å¼•\n                float maxConf = 0;\n                int maxClassId = -1;\n\n                // éå†ç±»åˆ«\n                for (int c = 0; c &lt; CategoryNum; c++)\n                {\n                    // æ•°ç»„ç´¢å¼•ï¼š(åæ ‡/è§’åº¦åç§»é‡ + ç±»åˆ«åç§») * æ¡†ç´¢å¼•\n                    // æ³¨æ„ï¼šåŸå§‹ä»£ç ä¸­ result[outputSize * j + i] è¿™ç§è®¿é—®æ–¹å¼åŸºäº Transposed æ•°æ®å¸ƒå±€\n                    float conf = result[(4 + c) * stride + i];\n                    if (conf &gt; maxConf)\n                    {\n                        maxConf = conf;\n                        maxClassId = c;\n                    }\n                }\n\n                // ç½®ä¿¡åº¦è¿‡æ»¤\n                if (maxConf &gt; ConfThreshold)\n                {\n                    // æå–åæ ‡ (cx, cy, w, h)\n                    float cx = result[0 * stride + i];\n                    float cy = result[1 * stride + i];\n                    float w = result[2 * stride + i];\n                    float h = result[3 * stride + i];\n                    // è¿˜åŸåæ ‡åˆ°åŸå›¾å°ºå¯¸\n                    int rx = (int)((cx - xOffset - 0.5 * w) * scale);\n                    int ry = (int)((cy - yOffset - 0.5 * h) * scale);\n                    int rw = (int)(w * scale);\n                    int rh = (int)(h * scale);\n\n                    boxes.Add(new Rect(rx, ry, rw, rh));\n                    confidences.Add(maxConf);\n                    classIds.Add(maxClassId);\n                }\n            }\n\n            // æ‰§è¡Œ NMS (æ—‹è½¬æ¡† NMS)\n            // OpenCV çš„ NMSBoxes æ”¯æŒ RotatedRect\n            int[] indices;\n            CvDnn.NMSBoxes(boxes, confidences, ConfThreshold, NmsThreshold, out indices);\n\n            List&lt;DetData&gt; finalResults = new List&lt;DetData&gt;();\n            foreach (int idx in indices)\n            {\n                finalResults.Add(new DetData\n                {\n                    index = classIds[idx],\n                    score = confidences[idx],\n                    box = boxes[idx]\n                });\n            }\n\n            return finalResults;\n        }\n\n        /// &lt;summary&gt;\n        /// ç»˜åˆ¶æ£€æµ‹ç»“æœï¼ˆæ°´å¹³çŸ©å½¢æ¡†ï¼‰\n        /// &lt;/summary&gt;\n        /// &lt;param name=\"results\"&gt;æ£€æµ‹ç»“æœåˆ—è¡¨&lt;/param&gt;\n        /// &lt;param name=\"image\"&gt;åŸå§‹å›¾åƒ&lt;/param&gt;\n        /// &lt;returns&gt;ç»˜åˆ¶åçš„å›¾åƒ&lt;/returns&gt;\n        public static Mat DrawDetResult(List&lt;DetData&gt; results, Mat image)\n        {\n            // å…‹éš†å›¾åƒä»¥å…ä¿®æ”¹åŸå›¾\n            Mat mat = image.Clone();\n\n            foreach (var item in results)\n            {\n                // 1. ç»˜åˆ¶çŸ©å½¢æ¡†\n                // Rect ç»“æ„åŒ…å« X, Y, Width, Height\n                Cv2.Rectangle(mat, item.box, new Scalar(0, 255, 0), thickness: 2);\n                // 2. å‡†å¤‡æ ‡ç­¾æ–‡æœ¬ (ç±»åˆ«ID - ç½®ä¿¡åº¦)\n                string label = $\"{item.index} - {item.score:F2}\";\n                // 3. è®¡ç®—æ–‡æœ¬çš„å°ºå¯¸ï¼Œç”¨äºç»˜åˆ¶èƒŒæ™¯\n                int baseLine = 1;\n                Size textSize = Cv2.GetTextSize(label, HersheyFonts.HersheySimplex, 0.6, 1, out baseLine);\n                // 4. ç»˜åˆ¶æ ‡ç­¾èƒŒæ™¯ï¼ˆåŠé€æ˜é»‘è‰²çŸ©å½¢ï¼‰ï¼Œé˜²æ­¢æ–‡å­—ä¸èƒŒæ™¯æ··æ·†\n                // ä½ç½®ï¼šçŸ©å½¢å·¦ä¸Šè§’ç•¥å¾®ä¸Šç§»ï¼Œæˆ–è€…ç›´æ¥è´´ç€å·¦ä¸Šè§’\n                Point labelPosition = new Point(item.box.X, item.box.Y - (int)textSize.Height - 5);\n\n                // ç¡®ä¿æ ‡ç­¾ä¸ç”»å‡ºå›¾åƒè¾¹ç•Œ\n                if (labelPosition.Y &lt; 0) labelPosition.Y = item.box.Y + (int)textSize.Height + 5;\n                Rect labelBgRect = new Rect(labelPosition.X,\n                                            labelPosition.Y - (int)textSize.Height, // OpenCV GetTextSize è¿”å›çš„é«˜åº¦æ˜¯åŸºçº¿åˆ°åº•éƒ¨çš„è·ç¦»ï¼Œéœ€è°ƒæ•´\n                                            (int)textSize.Width,\n                                            (int)textSize.Height + (int)baseLine);\n                // å¦‚æœèƒŒæ™¯æ¡†ä¹Ÿåœ¨å›¾åƒèŒƒå›´å†…ï¼Œåˆ™ç»˜åˆ¶\n                // æ³¨æ„ï¼šè¿™é‡Œç®€åŒ–å¤„ç†ï¼Œç›´æ¥ç”»åœ¨æ¡†ä¸Šæ–¹\n                Cv2.Rectangle(mat,\n                               new Point(item.box.X, item.box.Y - textSize.Height - 5),\n                               new Point(item.box.X + textSize.Width, item.box.Y),\n                               new Scalar(0, 255, 0),\n                               thickness: -1); // -1 è¡¨ç¤ºå¡«å……\n                // 5. ç»˜åˆ¶æ–‡æœ¬ï¼ˆç™½è‰²æ–‡å­—ï¼‰\n                Cv2.PutText(mat,\n                            label,\n                            new Point(item.box.X, item.box.Y - 5),\n                            HersheyFonts.HersheySimplex,\n                            0.6,\n                            new Scalar(0, 0, 0),\n                            1);\n            }\n            return mat;\n        }\n\n        public class DetData\n        {\n            public int index;\n            public float score;\n            public Rect box;\n        }\n    }\n}\n\n\n</code></pre>\n<p>ä¸ºäº†æ–¹ä¾¿ç¼–å†™ä»£ç ï¼Œä¸Šè¿°å¹¶è¡Œå¤„ç†å³ä½¿æ—¶é—´åŒ…æ‹¬äº†æ¨ç†ä¸Šä¸‹æ–‡çš„åˆ›å»ºã€æ¨ç†é¢„çƒ­ç­‰æ­¥éª¤ï¼Œæ‰€ä»¥å®é™…æ—¶é—´ä¼šåé•¿ï¼Œä¸Šè¿°ç¨‹åºè¿è¡Œåè¾“å‡ºå¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<p><img alt=\"image-20260109230808256\" class=\"lazyload\" /></p>\n<p><strong>å¹¶è¡Œæµ‹è¯•ç»“æœï¼š</strong></p>\n<p>åŒæ—¶ä¸ºäº†æ¯”è¾ƒä¸åŒå¹¶è¡Œæ•°ï¼Œæµ‹è¯•äº†ä»1åˆ°24ä¸åŒå¹¶è¡Œæ•°çš„æƒ…å†µï¼Œæ¨ç†æ€»æ—¶é—´å¦‚ä¸‹ï¼š</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align: center;\">å¹¶è¡Œæ•°</th>\n<th style=\"text-align: center;\">1</th>\n<th style=\"text-align: center;\">2</th>\n<th style=\"text-align: center;\">4</th>\n<th style=\"text-align: center;\">6</th>\n<th style=\"text-align: center;\">8</th>\n<th style=\"text-align: center;\">10</th>\n<th style=\"text-align: center;\">12</th>\n<th style=\"text-align: center;\">14</th>\n<th style=\"text-align: center;\">16</th>\n<th style=\"text-align: center;\">18</th>\n<th style=\"text-align: center;\">20</th>\n<th style=\"text-align: center;\">22</th>\n<th style=\"text-align: center;\">24</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center;\">æ¨ç†æ€»æ—¶é—´ (ms)</td>\n<td style=\"text-align: center;\">80</td>\n<td style=\"text-align: center;\">85</td>\n<td style=\"text-align: center;\">95</td>\n<td style=\"text-align: center;\">115</td>\n<td style=\"text-align: center;\">130</td>\n<td style=\"text-align: center;\">155</td>\n<td style=\"text-align: center;\">180</td>\n<td style=\"text-align: center;\">210</td>\n<td style=\"text-align: center;\">230</td>\n<td style=\"text-align: center;\">255</td>\n<td style=\"text-align: center;\">270</td>\n<td style=\"text-align: center;\">285</td>\n<td style=\"text-align: center;\">310</td>\n</tr>\n</tbody>\n</table>\n<blockquote>\n<p>ğŸ”—<strong>ç¨‹åºè·¯å¾„é“¾æ¥</strong>ï¼šå®Œæ•´ç¨‹åºå·²ç»ä¸Šä¼ åˆ°GitHubï¼Œè¯·è‡ªè¡Œä¸‹è½½ï¼Œé“¾æ¥ä¸ºï¼š</p>\n<pre><code>https://github.com/guojin-yan/TensorRT-CSharp-API/tree/TensorRtSharp3.0/samples/YoloObbBatchInfer\n</code></pre>\n</blockquote>\n<hr />\n<h2 id=\"ä¸ƒå¼‚å¸¸å¤„ç†\">ä¸ƒã€å¼‚å¸¸å¤„ç†</h2>\n<p>TensorRtSharp æä¾›äº†å®Œå–„çš„å¼‚å¸¸å¤„ç†æœºåˆ¶ã€‚</p>\n<pre><code class=\"language-csharp\">try\n{\n    Runtime runtime = new Runtime();\n    byte[] data = File.ReadAllBytes(\"model.engine\");\n    using CudaEngine engine = runtime.deserializeCudaEngineByBlob(data, (ulong)data.Length);\n}\ncatch (TrtException ex)\n{\n    // TensorRT ç‰¹å®šé”™è¯¯\n    Console.WriteLine($\"TensorRT Error: {ex.ErrMsg}\");\n    Console.WriteLine($\"Status: {ex.Status}\");\n}\ncatch (CudaException ex)\n{\n    // CUDA è¿è¡Œæ—¶é”™è¯¯\n    Console.WriteLine($\"CUDA Error: {ex.Message}\");\n    Console.WriteLine($\"Status: {ex.Status}\");\n}\ncatch (InitException ex)\n{\n    // åˆå§‹åŒ–é”™è¯¯\n    Console.WriteLine($\"Initialization Failed: {ex.Message}\");\n    Console.WriteLine($\"Status: {ex.Status}\");\n}\n</code></pre>\n<p><strong>å¼‚å¸¸ç±»å‹è¯´æ˜ï¼š</strong></p>\n<table>\n<thead>\n<tr>\n<th>å¼‚å¸¸ç±»å‹</th>\n<th>è¯´æ˜</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>TrtException</code></td>\n<td>TensorRT API é”™è¯¯ï¼ˆ20+ é”™è¯¯ç ï¼‰</td>\n</tr>\n<tr>\n<td><code>CudaException</code></td>\n<td>CUDA è¿è¡Œæ—¶é”™è¯¯ï¼ˆ40+ é”™è¯¯ç ï¼‰</td>\n</tr>\n<tr>\n<td><code>InitException</code></td>\n<td>åº“åˆå§‹åŒ–é”™è¯¯</td>\n</tr>\n</tbody>\n</table>\n<hr />\n<h2 id=\"å…«æ—¥å¿—ç³»ç»Ÿ\">å…«ã€æ—¥å¿—ç³»ç»Ÿ</h2>\n<p>TensorRtSharp æä¾›äº†å•ä¾‹æ—¥å¿—ç³»ç»Ÿã€‚</p>\n<pre><code class=\"language-csharp\">// è·å–æ—¥å¿—å®ä¾‹\nLogger logger = Logger.Instance;\n\n// è®¾ç½®æ—¥å¿—çº§åˆ«\nlogger.SetThreshold(LoggerSeverity.kINFO);  // INFOã€WARNINGã€ERROR\n\n// è®¾ç½®è‡ªå®šä¹‰å›è°ƒ\nlogger.SetCallback((message) =&gt;\n{\n    Console.WriteLine($\"[TensorRT] {message}\");\n});\n\n// è®°å½•æ—¥å¿—\nlogger.INFO(\"Engine building started...\");\nlogger.WARNING(\"FP16 not supported, falling back to FP32\");\nlogger.ERROR(\"Failed to parse ONNX model\");\n\n// é™é»˜æ¨¡å¼\nlogger.SetThreshold(LoggerSeverity.kINTERNAL_ERROR);  // ä»…ä¸¥é‡é”™è¯¯\n</code></pre>\n<hr />\n<h2 id=\"ä¹ä¸å…¶ä»–åº“çš„å¯¹æ¯”\">ä¹ã€ä¸å…¶ä»–åº“çš„å¯¹æ¯”</h2>\n<table>\n<thead>\n<tr>\n<th>ç‰¹æ€§</th>\n<th>TensorRtSharp</th>\n<th>ML.NET</th>\n<th>ONNX Runtime</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>ç¼–ç¨‹è¯­è¨€</strong></td>\n<td>C#</td>\n<td>C#</td>\n<td>C++/Python</td>\n</tr>\n<tr>\n<td><strong>API ç±»å‹</strong></td>\n<td>æ‰˜ç®¡å°è£…</td>\n<td>æ‰˜ç®¡åº“</td>\n<td>åŸç”Ÿç»‘å®š</td>\n</tr>\n<tr>\n<td><strong>æ€§èƒ½</strong></td>\n<td>åŸç”Ÿé€Ÿåº¦</td>\n<td>ä¸­ç­‰</td>\n<td>åŸç”Ÿé€Ÿåº¦</td>\n</tr>\n<tr>\n<td><strong>æ˜“ç”¨æ€§</strong></td>\n<td>é«˜</td>\n<td>é«˜</td>\n<td>ä¸­ç­‰</td>\n</tr>\n<tr>\n<td><strong>TensorRT æ”¯æŒ</strong></td>\n<td>å®Œæ•´</td>\n<td>æ— </td>\n<td>æœ‰é™</td>\n</tr>\n<tr>\n<td><strong>è‡ªå®šä¹‰ç®—å­</strong></td>\n<td>æ”¯æŒ</td>\n<td>å›°éš¾</td>\n<td>æ”¯æŒ</td>\n</tr>\n<tr>\n<td><strong>åŠ¨æ€å½¢çŠ¶</strong></td>\n<td>æ”¯æŒ</td>\n<td>æœ‰é™</td>\n<td>æ”¯æŒ</td>\n</tr>\n<tr>\n<td><strong>å¤š GPU</strong></td>\n<td>æ”¯æŒ</td>\n<td>æœ‰é™</td>\n<td>æ”¯æŒ</td>\n</tr>\n</tbody>\n</table>\n<hr />\n<h2 id=\"åå¸¸è§é—®é¢˜\">åã€å¸¸è§é—®é¢˜</h2>\n<h3 id=\"é—®é¢˜ä¸€æ‰¾ä¸åˆ°-dll-æ¨¡å—\">é—®é¢˜ä¸€ï¼šæ‰¾ä¸åˆ° DLL æ¨¡å—</h3>\n<p><strong>é”™è¯¯ä¿¡æ¯ï¼š</strong></p>\n<pre><code>Unable to load DLL 'TensorRT-C-API' or one of its dependencies: æ‰¾ä¸åˆ°æŒ‡å®šçš„æ¨¡å—ã€‚\n</code></pre>\n<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>\n<ol>\n<li>æ£€æŸ¥æ˜¯å¦å®‰è£…äº†å¯¹åº”ç‰ˆæœ¬çš„ Runtime NuGet åŒ…</li>\n<li>ç¡®è®¤ç³»ç»Ÿ PATH ç¯å¢ƒå˜é‡ä¸­åŒ…å« TensorRT çš„ lib ç›®å½•å’Œ CUDA çš„ bin ç›®å½•</li>\n<li>ç¡®è®¤ TensorRT ç‰ˆæœ¬ä¸º 10.x ç³»åˆ—</li>\n</ol>\n<p><strong>é”™è¯¯æˆªå›¾ï¼š</strong></p>\n<p><img alt=\"é”™è¯¯1\" class=\"lazyload\" /><br />\n<img alt=\"é”™è¯¯2\" class=\"lazyload\" /></p>\n<hr />\n<h3 id=\"é—®é¢˜äºŒsehexception-å¼‚å¸¸\">é—®é¢˜äºŒï¼šSEHException å¼‚å¸¸</h3>\n<p><strong>é”™è¯¯ä¿¡æ¯ï¼š</strong></p>\n<pre><code>System.Runtime.InteropServices.SEHException: \"External component has thrown an exception.\"\n</code></pre>\n<p><strong>å¯èƒ½åŸå› ï¼š</strong></p>\n<ul>\n<li>TensorRT ç‰ˆæœ¬ä¸åŒ¹é…ï¼ˆå¿…é¡»ä½¿ç”¨ 10.xï¼‰</li>\n<li>CUDA ç‰ˆæœ¬ä¸å…¼å®¹</li>\n<li>æ¨¡å‹æ–‡ä»¶æŸå</li>\n</ul>\n<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>\n<ol>\n<li>ç¡®è®¤ TensorRT ç‰ˆæœ¬ä¸º 10.x</li>\n<li>æ£€æŸ¥ CUDA ç‰ˆæœ¬æ˜¯å¦åŒ¹é…</li>\n<li>é‡æ–°ç”Ÿæˆ Engine æ–‡ä»¶</li>\n</ol>\n<p><strong>é”™è¯¯æˆªå›¾ï¼š</strong></p>\n<p><img alt=\"SEHException\" class=\"lazyload\" /></p>\n<h3 id=\"é—®é¢˜ä¸‰systemexecutionengineexception-å¼‚å¸¸\">é—®é¢˜ä¸‰ï¼šSystem.ExecutionEngineException å¼‚å¸¸</h3>\n<p><strong>é”™è¯¯ä¿¡æ¯ï¼š</strong></p>\n<pre><code>System.ExecutionEngineException \n</code></pre>\n<p><strong>å¯èƒ½åŸå› ï¼š</strong></p>\n<ul>\n<li>æ¨¡å‹æ–‡ä»¶ä¸è®¾å¤‡ä¸åŒ¹é…</li>\n</ul>\n<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>\n<ol>\n<li>åœ¨å½“å‰è®¾å¤‡ä¸Šé‡æ–°ç”Ÿæˆæ¨¡å‹æ–‡ä»¶</li>\n</ol>\n<p><strong>é”™è¯¯æˆªå›¾ï¼š</strong></p>\n<p><img alt=\"image-20260110002045090\" class=\"lazyload\" /></p>\n<p><img alt=\"image-20260110002045090\" class=\"lazyload\" /></p>\n<hr />\n<h2 id=\"åä¸€æ€»ç»“\">åä¸€ã€æ€»ç»“</h2>\n<p>TensorRtSharp æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€è®¾è®¡ç²¾è‰¯çš„ TensorRT C# å°è£…åº“ï¼Œå®ƒå¡«è¡¥äº† .NET ç”Ÿæ€åœ¨é«˜æ€§èƒ½æ·±åº¦å­¦ä¹ æ¨ç†æ–¹é¢çš„ç©ºç™½ã€‚é€šè¿‡æä¾›ç±»å‹å®‰å…¨çš„ APIã€è‡ªåŠ¨èµ„æºç®¡ç†å’Œå®Œå–„çš„å¼‚å¸¸å¤„ç†ï¼ŒTensorRtSharp è®© C# å¼€å‘è€…èƒ½å¤Ÿå……åˆ†å‘æŒ¥ GPU çš„è®¡ç®—èƒ½åŠ›ï¼Œè€Œæ— éœ€é¢å¯¹å¤æ‚çš„åŸç”Ÿä»£ç ã€‚</p>\n<h3 id=\"æ ¸å¿ƒä¼˜åŠ¿\">æ ¸å¿ƒä¼˜åŠ¿</h3>\n<p>âœ… <strong>å®Œæ•´çš„ API è¦†ç›–</strong>ï¼šæ”¯æŒ TensorRT æ ¸å¿ƒåŠŸèƒ½<br />\nâœ… <strong>ç±»å‹å®‰å…¨</strong>ï¼šå¼ºç±»å‹ç³»ç»Ÿï¼Œç¼–è¯‘æ—¶é”™è¯¯æ£€æŸ¥<br />\nâœ… <strong>è‡ªåŠ¨èµ„æºç®¡ç†</strong>ï¼šRAII + Dispose æ¨¡å¼<br />\nâœ… <strong>é«˜æ€§èƒ½</strong>ï¼šå¼‚æ­¥æ‰§è¡Œã€å¤šæµå¹¶è¡Œ<br />\nâœ… <strong>æ˜“ç”¨æ€§</strong>ï¼šç›´è§‚çš„ APIã€è¯¦ç»†æ³¨é‡Š<br />\nâœ… <strong>è·¨å¹³å°</strong>ï¼šæ”¯æŒ Windows/Linux<br />\nâœ… <strong>å¼€ç®±å³ç”¨</strong>ï¼šNuGet åŒ…å«æ‰€æœ‰ä¾èµ–</p>\n<h3 id=\"é€‚ç”¨åœºæ™¯\">é€‚ç”¨åœºæ™¯</h3>\n<p>æ— è®ºæ‚¨æ˜¯æ„å»ºä»¥ä¸‹ç±»å‹çš„åº”ç”¨ï¼ŒTensorRtSharp éƒ½æ˜¯æ‚¨çš„ç†æƒ³é€‰æ‹©ï¼š</p>\n<ul>\n<li>ğŸ¯ <strong>å®æ—¶è§†è§‰åº”ç”¨</strong>ï¼šç›®æ ‡æ£€æµ‹ã€å›¾åƒåˆ†å‰²ã€å§¿æ€ä¼°è®¡</li>\n<li>ğŸ¤ <strong>è¯­éŸ³å¤„ç†</strong>ï¼šè¯­éŸ³è¯†åˆ«ã€è¯­éŸ³åˆæˆ</li>\n<li>ğŸš€ <strong>è¾¹ç¼˜è®¡ç®—</strong>ï¼šåµŒå…¥å¼è®¾å¤‡æ¨ç†</li>\n</ul>\n<h3 id=\"ç«‹å³å¼€å§‹\">ç«‹å³å¼€å§‹</h3>\n<p><strong>å®‰è£…å‘½ä»¤ï¼š</strong></p>\n<pre><code class=\"language-bash\">dotnet add package JYPPX.TensorRT.CSharp.API\ndotnet add package JYPPX.TensorRT.CSharp.API.runtime.win-x64.cuda12\n</code></pre>\n<p><strong>GitHub ä»“åº“ï¼š</strong></p>\n<pre><code>https://github.com/guojin-yan/TensorRT-CSharp-API\n</code></pre>\n<p>ç«‹å³å®‰è£…å¹¶ä½“éªŒ C# ä¸–ç•Œä¸­çš„ GPU æ¨ç†æè‡´æ€§èƒ½å§ï¼</p>\n<hr />\n<h2 id=\"æŠ€æœ¯æ”¯æŒ\">æŠ€æœ¯æ”¯æŒ</h2>\n<p>å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼äº¤æµï¼š</p>\n<ul>\n<li>ğŸ“§ <strong>GitHub Issues</strong>ï¼šåœ¨é¡¹ç›®ä»“åº“æ Issue æˆ– Pull Request</li>\n<li>ğŸ’¬ <strong>QQ äº¤æµç¾¤</strong>ï¼šåŠ å…¥ <strong>945057948</strong>ï¼Œå›å¤æ›´æ–¹ä¾¿æ›´å¿«å“¦</li>\n</ul>\n<p><img alt=\"QQç¾¤äºŒç»´ç \" class=\"lazyload\" /></p>\n<hr />\n<p><em>ä½œè€…ï¼šGuojin Yan</em><br />\n<em>ç‰ˆæœ¬ï¼š0.0.5</em><br />\n<em>æœ€åæ›´æ–°ï¼š2026å¹´1æœˆ</em></p>\n<hr />\n<p><strong>ã€æ–‡ç« å£°æ˜ã€‘</strong></p>\n<p>æœ¬æ–‡ä¸»è¦å†…å®¹åŸºäºä½œè€…çš„ç ”ç©¶ä¸å®è·µï¼Œéƒ¨åˆ†è¡¨è¿°å€ŸåŠ©AIå·¥å…·è¿›è¡Œäº†è¾…åŠ©ä¼˜åŒ–ã€‚ç”±äºæŠ€æœ¯å±€é™æ€§ï¼Œæ–‡ä¸­å¯èƒ½å­˜åœ¨é”™è¯¯æˆ–ç–æ¼ä¹‹å¤„ï¼Œæ³è¯·å„ä½è¯»è€…æ‰¹è¯„æŒ‡æ­£ã€‚å¦‚æœå†…å®¹æ— æ„ä¸­ä¾µçŠ¯äº†æ‚¨çš„æƒç›Šï¼Œè¯·åŠæ—¶é€šè¿‡å…¬ä¼—å·åå°ä¸æˆ‘ä»¬è”ç³»ï¼Œæˆ‘ä»¬å°†ç¬¬ä¸€æ—¶é—´æ ¸å®å¹¶å¦¥å–„å¤„ç†ã€‚æ„Ÿè°¢æ‚¨çš„ç†è§£ä¸æ”¯æŒï¼</p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-11 18:47</span>&nbsp;\n<a href=\"https://www.cnblogs.com/guojin-blogs\">æ¤’é¢œçš®çš®è™¾</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">104</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "å½“æˆ‘ä¸æƒ³å†ä¸ºã€Œå°å†³å®šã€æ¶ˆè€—æ³¨æ„åŠ›æ—¶ï¼Œæˆ‘åšäº†ä¸€ä¸ªå¾ˆå°çš„å·¥å…·",
      "link": "https://www.cnblogs.com/BigFunny/p/19468424",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/BigFunny/p/19468424\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-11 15:33\">\n    <span>å½“æˆ‘ä¸æƒ³å†ä¸ºã€Œå°å†³å®šã€æ¶ˆè€—æ³¨æ„åŠ›æ—¶ï¼Œæˆ‘åšäº†ä¸€ä¸ªå¾ˆå°çš„å·¥å…·</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<p><strong>å†™è¿™ç¯‡æ–‡ç« çš„èµ·å› ï¼Œå…¶å®å¾ˆç®€å•ã€‚</strong></p>\n<p>æœ‰ä¸€å¤©æˆ‘å‘ç°ï¼Œè‡ªå·±ä¸€å¤©ä¸­è¢«æ‰“æ–­æœ€å¤šçš„ï¼Œå¹¶ä¸æ˜¯å¤æ‚çš„é—®é¢˜ï¼Œè€Œæ˜¯ä¸€äº›æœ¬æ¥ä¸å€¼å¾—è®¤çœŸæ€è€ƒçš„å°å†³å®šï¼š</p>\n<ul>\n<li>å…ˆåšå“ªä¸ªä»»åŠ¡ï¼Ÿ</li>\n<li>åˆé¥­åƒä»€ä¹ˆï¼Ÿ</li>\n<li>å‡ ä¸ªæ–¹æ¡ˆé‡Œéšä¾¿é€‰ä¸€ä¸ªï¼Œä»å“ªå¼€å§‹ï¼Ÿ</li>\n</ul>\n<p>è¿™äº›é€‰æ‹©å•ç‹¬çœ‹éƒ½å¾ˆè½»ï¼Œä½†å®ƒä»¬åå¤å‡ºç°ï¼Œä¼šä¸æ–­æ‰“æ–­æ³¨æ„åŠ›ã€‚<br />\nçœŸæ­£æ¶ˆè€—äººçš„ï¼Œå¾€å¾€ä¸æ˜¯å¤§é—®é¢˜ï¼Œè€Œæ˜¯è¿™äº›ã€Œæ— å…³ç´§è¦ä½†åˆä¸å¾—ä¸æƒ³ä¸€ä¸‹ã€çš„æ—¶åˆ»ã€‚</p>\n<hr />\n<h2 id=\"æˆ‘ä¸€å¼€å§‹è¯•å›¾ç”¨å„ç§å·¥å…·è§£å†³è¿™ä¸ªé—®é¢˜\">æˆ‘ä¸€å¼€å§‹è¯•å›¾ç”¨å„ç§å·¥å…·è§£å†³è¿™ä¸ªé—®é¢˜</h2>\n<p>ä½†åæ¥å‘ç°ä¸€ä¸ªå¾ˆè®½åˆºçš„æƒ…å†µï¼š</p>\n<blockquote>\n<p>ä¸ºäº†ä¸çº ç»“ï¼Œæˆ‘åè€ŒèŠ±äº†æ›´å¤šæ—¶é—´åœ¨å·¥å…·æœ¬èº«ä¸Šã€‚</p>\n</blockquote>\n<p>è¦ç™»å½•ã€è¦é…ç½®ã€è¦ç†è§£åŠŸèƒ½ï¼Œç”šè‡³è¿˜ä¼šè¢«æ¨èæ›´å¤šã€Œä½ å¯èƒ½éœ€è¦çš„ä¸œè¥¿ã€ã€‚</p>\n<p>å·¥å…·å¹¶æ²¡æœ‰è®©æˆ‘æ›´å¿«å¼€å§‹è¡ŒåŠ¨ï¼Œåè€Œæˆäº†æ–°çš„æ³¨æ„åŠ›é»‘æ´ã€‚</p>\n<p>é‚£æ—¶å€™æˆ‘æ„è¯†åˆ°ï¼Œæˆ‘çœŸæ­£æƒ³è¦çš„å¹¶ä¸æ˜¯ä¸€ä¸ªã€Œæ›´èªæ˜ã€çš„ç³»ç»Ÿï¼Œè€Œæ˜¯ä¸€ä¸ª <strong>æ›´å®‰é™çš„å·¥å…·</strong>ã€‚</p>\n<hr />\n<h2 id=\"ä¸€ä¸ªå‡ ä¹æ„Ÿè§‰ä¸åˆ°å­˜åœ¨çš„å°å·¥å…·\">ä¸€ä¸ªå‡ ä¹ã€Œæ„Ÿè§‰ä¸åˆ°å­˜åœ¨ã€çš„å°å·¥å…·</h2>\n<p>WheelPage å°±æ˜¯åœ¨è¿™ç§èƒŒæ™¯ä¸‹å‡ºç°çš„ã€‚</p>\n<p>å®ƒä¸æ˜¯ä¸€ä¸ªæ•ˆç‡ç³»ç»Ÿï¼Œä¹Ÿä¸è¯•å›¾å¸®ä½ ã€Œåšå‡ºæ›´æ­£ç¡®çš„å†³å®šã€ã€‚<br />\nå®ƒçš„ç›®æ ‡åªæœ‰ä¸€ä¸ªï¼š</p>\n<blockquote>\n<p>åœ¨ä½ ä¸æƒ³å†çº ç»“çš„æ—¶å€™ï¼Œç»™ä½ ä¸€ä¸ªå¿«é€Ÿã€ä¸­ç«‹ã€æ— éœ€è§£é‡Šçš„ç»“æœã€‚</p>\n</blockquote>\n<p>æœ€æ—©åšçš„æ˜¯ä¸€ä¸ªå†³ç­–è½¬ç›˜ã€‚</p>\n<p>ä½ æŠŠé€‰é¡¹å†™è¿›å»ï¼Œè½¬ä¸€ä¸‹ï¼Œå°±æœ‰ç»“æœã€‚</p>\n<p>åæ¥æˆ‘å‘ç°ï¼Œå¾ˆå¤šäººå¹¶ä¸æ˜¯ç‰¹åˆ«åœ¨æ„è½¬ç›˜è½¬åˆ°äº†å“ªä¸€é¡¹ï¼Œ<br />\nè€Œæ˜¯åœ¨ç»“æœå‡ºç°çš„é‚£ä¸€åˆ»ï¼Œç»ˆäºå¯ä»¥ç»§ç»­å¾€ä¸‹èµ°äº†ã€‚</p>\n<p>è¿™ä¸ªè½¬ç›˜åæ¥è¢«ç”¨åœ¨å¾ˆå¤šæ„æ–™ä¹‹å¤–çš„åœºæ™¯é‡Œï¼š</p>\n<ul>\n<li>å›¢é˜Ÿé‡Œæ‰“ç ´åƒµå±€</li>\n<li>è¯¾å ‚äº’åŠ¨</li>\n<li>åˆ›ä½œå¡ä½æ—¶ï¼Œéšæœºç»™è‡ªå·±ä¸€ä¸ªèµ·ç‚¹</li>\n<li>ç”šè‡³åªæ˜¯å¸®è‡ªå·±ã€Œå…ˆå¼€å§‹åšç‚¹ä»€ä¹ˆã€</li>\n</ul>\n<p>å¦‚æœä½ æƒ³çœ‹è¿™ä¸ªæœ€åŸºç¡€çš„åŠŸèƒ½ï¼Œå®ƒåœ¨è¿™é‡Œï¼š<br />\nğŸ‘‰ <a href=\"https://wheelpage.com/zh/\" rel=\"noopener nofollow\" target=\"_blank\">è½¬ç›˜</a></p>\n<hr />\n<h2 id=\"ä¸ºä»€ä¹ˆåæ¥åˆåŠ äº†ä¸€ä¸ª-æŠ›ç¡¬å¸\">ä¸ºä»€ä¹ˆåæ¥åˆåŠ äº†ä¸€ä¸ª æŠ›ç¡¬å¸</h2>\n<p>åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸ªåé¦ˆåå¤å‡ºç°ï¼š</p>\n<blockquote>\n<p>ã€Œå…¶å®æˆ‘å¾ˆå¤šæ—¶å€™åªæ˜¯åœ¨ä¸¤ä»¶äº‹ä¹‹é—´çŠ¹è±«ã€‚ã€</p>\n</blockquote>\n<p>äºæ˜¯æˆ‘åŠ äº†ä¸€ä¸ªæ›´æç®€çš„å·¥å…·ï¼š<strong>æŠ›ç¡¬å¸</strong>ã€‚</p>\n<ul>\n<li>æ²¡æœ‰é€‰é¡¹é…ç½®</li>\n<li>æ²¡æœ‰è¯´æ˜æ–‡å­—</li>\n<li>æ‰“å¼€å°±èƒ½ç”¨</li>\n</ul>\n<p>ä½ åªéœ€æŠ›ä¸€ä¸‹ï¼Œæ­£æˆ–åã€‚</p>\n<p>æœ‰è¶£çš„æ˜¯ï¼Œå¾ˆå¤šç”¨æˆ·åæ¥è·Ÿæˆ‘è¯´ï¼Œä»–ä»¬å¹¶ä¸æ˜¯å®Œå…¨æŠŠå†³å®šäº¤ç»™ç¡¬å¸ï¼Œ<br />\nè€Œæ˜¯åœ¨ç¡¬å¸è½ä¸‹çš„ä¸€ç¬é—´ï¼Œçªç„¶æ„è¯†åˆ°è‡ªå·±å¿ƒé‡Œæ›´åå‘å“ªä¸€è¾¹ã€‚</p>\n<p>è¿™ç§ä½“éªŒæœ¬èº«å°±å¾ˆå¾®å¦™ã€‚</p>\n<p>å¦‚æœä½ ä¹Ÿå¥½å¥‡ï¼Œå¯ä»¥ç›´æ¥è¯•ä¸€ä¸‹è¿™ä¸ªé¡µé¢ï¼š<br />\nğŸ‘‰ <a href=\"https://wheelpage.com/zh/coin-flip/\" rel=\"noopener nofollow\" target=\"_blank\">æŠ›ç¡¬å¸</a></p>\n<hr />\n<h2 id=\"è®¾è®¡è¿‡ç¨‹ä¸­æˆ‘åˆ»æ„åšçš„å‡ ä»¶åç›´è§‰çš„äº‹\">è®¾è®¡è¿‡ç¨‹ä¸­ï¼Œæˆ‘åˆ»æ„åšçš„å‡ ä»¶ã€Œåç›´è§‰ã€çš„äº‹</h2>\n<p>åœ¨å¼€å‘ WheelPage çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘æœ‰æ„é¿å…åšä¸‰ä»¶äº‹æƒ…ï¼š</p>\n<h3 id=\"1-ä¸åšè´¦æˆ·ç³»ç»Ÿ\">1. ä¸åšè´¦æˆ·ç³»ç»Ÿ</h3>\n<p>å› ä¸ºã€Œåªæ˜¯ç”¨ä¸€ä¸‹ã€ï¼Œä¸åº”è¯¥æˆä¸ºæ³¨å†Œçš„ç†ç”±ã€‚</p>\n<h3 id=\"2-ä¸å †åŠŸèƒ½\">2. ä¸å †åŠŸèƒ½</h3>\n<p>æ¯åŠ ä¸€ä¸ªåŠŸèƒ½ï¼Œæˆ‘éƒ½ä¼šé—®è‡ªå·±ï¼š</p>\n<blockquote>\n<p>è¿™æ˜¯åœ¨å¸®ç”¨æˆ·ï¼Œ<br />\nè¿˜æ˜¯åªæ˜¯è®©æˆ‘è§‰å¾—ã€Œè¿™ä¸ªäº§å“æ›´åƒä¸ªäº§å“äº†ã€ï¼Ÿ</p>\n</blockquote>\n<h3 id=\"3-ä¸åˆ¶é€ å­˜åœ¨æ„Ÿ\">3. ä¸åˆ¶é€ å­˜åœ¨æ„Ÿ</h3>\n<p>ç”¨å®Œå°±èµ°ï¼Œæ˜¯æˆ‘å¸Œæœ›å®ƒå‘ˆç°å‡ºæ¥çš„çŠ¶æ€ã€‚</p>\n<p>æˆ‘æ›´æ„¿æ„æŠŠ WheelPage çœ‹æˆä¸€ä¸ªã€Œå·¥å…·æŠ½å±‰é‡Œçš„å°ä¸œè¥¿ã€ï¼Œ<br />\nè€Œä¸æ˜¯ä¸€ä¸ªéœ€è¦ä½ æŒç»­å…³æ³¨çš„äº§å“ã€‚</p>\n<hr />\n<h2 id=\"å†™åœ¨æœ€å\">å†™åœ¨æœ€å</h2>\n<p>WheelPage å¹¶ä¸æ˜¯ä¸ºäº†è§£å†³äººç”Ÿé‡å¤§å†³ç­–è€Œå­˜åœ¨çš„ã€‚</p>\n<p>å®ƒå­˜åœ¨çš„æ„ä¹‰ï¼Œæ°æ°æ˜¯ä¸ºäº†è®©ä½ ä¸ç”¨åœ¨å°äº‹ä¸Šæ¶ˆè€—å¤ªå¤šæ³¨æ„åŠ›ã€‚</p>\n<p>æœ‰æ—¶å€™ï¼Œä¸€ä¸ªå¤–éƒ¨çš„ã€éšæœºçš„ã€æ²¡æœ‰æƒ…ç»ªçš„ç»“æœï¼Œ<br />\nåè€Œèƒ½å¸®ä½ æ›´å¿«è¡ŒåŠ¨ã€‚</p>\n<p>ç”šè‡³åœ¨æŸäº›æ—¶åˆ»ï¼Œå®ƒè¿˜èƒ½è®©ä½ çœ‹æ¸…è‡ªå·±çœŸæ­£æƒ³è¦çš„æ˜¯ä»€ä¹ˆã€‚</p>\n<p>å¦‚æœä½ æœ‰ç±»ä¼¼çš„å›°æ‰°ï¼Œä¹Ÿè®¸è¿™ä¸ªå°å·¥å…·èƒ½å¸®ä½ èŠ‚çœä¸€ç‚¹æ³¨æ„åŠ›ã€‚</p>\n<p>å®ƒå°±åœ¨é‚£å„¿ï¼Œ<br />\nä¸åµä½ ï¼Œä¹Ÿä¸å‚¬ä½ ã€‚</p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-11 15:33</span>&nbsp;\n<a href=\"https://www.cnblogs.com/BigFunny\">OnlyFunny</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">165</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">1</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "å¬è¯´C++å¥½åƒå·å·å»ç»ƒä»€ä¹ˆ\"ç»ä¸–æ­¦åŠŸ\"å»äº†",
      "link": "https://www.cnblogs.com/lixingqiu/p/19468363",
      "published": "",
      "description": "<h1 class=\"postTitle\"><a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/lixingqiu/p/19468363\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-11 15:07\">\n    <span>å¬è¯´C++å¥½åƒå·å·å»ç»ƒä»€ä¹ˆ\"ç»ä¸–æ­¦åŠŸ\"å»äº†</span>\n    \n\n</a>\n</h1>\n\t<div class=\"blogpost-body blogpost-body-html\" id=\"cnblogs_post_body\">\n<p><img alt=\"monkey\" class=\"lazyload\" height=\"417\" width=\"417\" /></p>\n<p>&nbsp;</p>\n<p>å˜¿ï¼Œå¤§å®¶ä¼™å„¿ä»¥å‰æ˜¯ä¸æ˜¯éƒ½å¬é‚£ä¸ªè€ä¼ è¯´äº†ï¼Ÿå­¦C++å°±åƒèµ°èœ€é“ï¼Œéš¾äºä¸Šé’å¤©ï¼›å­¦Pythonå‘¢ï¼Œé‚£å«ä¸€ä¸ªé¡ºæ»‘ï¼Œåƒåƒæœå†»ä¸€æ ·ã€‚äºæ˜¯ä¹ï¼Œå¤šå°‘æ€€æ£æ¢¦æƒ³çš„å°‘ç”·å°‘å¥³ï¼Œè¿˜æ²¡çœ‹åˆ°C++çš„çª—å£å¼¹å‡ºæ¥ï¼Œå°±è¢«é‚£ä¸€å †æŒ‡é’ˆã€å†…å­˜ç®¡ç†åŠé€€äº†ï¼Œè½¬å¤´æŠ±äº†Pythonçš„å¤§è…¿ã€‚</p>\n<p>ä½†æ˜¯ï¼æ—¶ä»£å˜äº†å•Šæœ‹å‹ä»¬ï¼è‡ªä»æœ‰äº†è¿™ä¸ªâ€œC++ç²¾çµåº“â€ï¼ŒC++ä¹Ÿå­¦ä¼šäº†å–èŒäº†ã€‚ä»¥å‰æä¸ªå›¾å½¢ç•Œé¢ï¼Œåˆæ˜¯åˆ›å»ºç”»ç¬”åˆæ˜¯è®¾ç½®åæ ‡ç³»ï¼Œé‚£ä»£ç å†™å¾—æ¯”ç»ä¹¦è¿˜é•¿â€”â€”å°¤å…¶æ˜¯è¿˜åœ¨æ£é¼“è€å¼€å‘ç¯å¢ƒçš„åŒå­¦ä»¬ï¼Œé‚£ç§é…ç½®ç¯å¢ƒçš„é…¸çˆ½ï¼Œè°è¯•è°çŸ¥é“ã€‚ç°åœ¨å‘¢ï¼Ÿä½ çœ‹è¿™æ®µä»£ç ï¼Œå‡ è¡ŒæŒ‡ä»¤ï¼Œå±å¹•å°±äº®äº†ï¼Œç®€ç›´åƒå¼€äº†æŒ‚ã€‚</p>\n<p>å°±æ‹¿è¿™ã€Šå­™æ‚Ÿç©ºçš„72å˜åŠ¨ç”»ã€‹æ¥è¯´å§ï¼Œè¿™ä»£ç å†™å¾—é‚£å«ä¸€ä¸ªéšå¿ƒæ‰€æ¬²ã€‚é‚£ä¸ªå«<code>monkey</code>çš„å°å®¶ä¼™ï¼ŒçœŸçš„æ˜¯ä¸€ä¸ªå°ç²¾çµã€‚ä¸Šä¸€ç§’è¿˜æ˜¯å¤§åœ£çˆ·ï¼Œä¸‹ä¸€ç§’å˜æˆäº†å…‰å¤´å¼ºï¼Œè½¬çœ¼åˆæ··è¿›äº†æœºå™¨çŒ«çš„é˜Ÿä¼ï¼Œç”šè‡³è¿˜èƒ½å˜å‡ºä¸ªä¸­å›½ç»“æ¥ï¼è¿™å“ªæ˜¯å†™ä»£ç å•Šï¼Œè¿™ç®€ç›´æ˜¯â€œè¿è¿çœ‹â€ç°åœºç‰ˆï¼ä½ è®©é˜¿ç«¥æœ¨å»æŠ“ç°å¤ªç‹¼ï¼Œè¿™è„‘æ´ï¼Œä¹Ÿå°±C++åŠ ä¸Šè¿™ç²¾çµåº“èƒ½é…åˆå¾—è¿™ä¹ˆæºœã€‚</p>\n<p>æœ€ç»çš„æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯é‚£ä¸ªå¾ªç¯ã€‚<code>monkey.next_shape().wait(...)</code>ã€‚å°±è¿™ä¹ˆä¸€å¥ï¼Œå­™æ‚Ÿç©ºå°±åœ¨å±å¹•ä¸Šå¼€å§‹äº†ä»–çš„å·å‰§å˜è„¸å¤§èµã€‚ä¸éœ€è¦ä½ æ‡‚ä»€ä¹ˆå¤æ‚çš„åº•å±‚æ¸²æŸ“ï¼Œä¹Ÿä¸éœ€è¦ä½ ä¸ºäº†ä¸€ä¸ªçª—å£å¥æŸ„æŠ“è€³æŒ è…®ã€‚ç°åœ¨çš„C++ï¼Œå°±åƒè¿™å­™æ‚Ÿç©ºä¸€æ ·ï¼Œå­¦ä¼š72å˜äº†ã€‚å®ƒæ‘‡èº«ä¸€å˜ï¼Œä»é‚£ä¸ªå†·å†°å†°çš„â€œç¡¬æ±‰â€ï¼Œå˜æˆäº†ä¸€ä¸ªèƒ½é™ªä½ ç©ã€èƒ½é™ªä½ é—¹ã€è¿˜èƒ½éšä¾¿ä½ æé€ å‹çš„â€œå°å¯çˆ±â€ã€‚</p>\n<p>æ‰€ä»¥å•Šï¼Œåˆ«å†æ­»æŠ±ç€â€œC++éš¾å¦‚å¤©ä¹¦â€çš„è€é»„å†äº†ã€‚åœ¨è¿™ä¸ªç²¾çµåº“é‡Œï¼ŒC++æŠŠé—¨æ§›éƒ½æ‹†äº†ï¼Œé“ºä¸Šäº†ä¸€å±‚çº¢åœ°æ¯¯æ¬¢è¿å¤§å®¶ã€‚è¿™ã€ŠçŒ´ç‹å˜å½¢è®°ã€‹æ¼”çš„å¯ä¸æ˜¯å­™æ‚Ÿç©ºï¼Œæ¼”çš„æ˜¯C++çš„â€œå˜å½¢è®°â€â€”â€”åŸæ¥ï¼Œä½ ç¦»å¤§ç¥ä¹‹é—´ï¼Œåªå·®ä¸€ä¸ªä¼š72å˜çš„ç²¾çµåº“ï¼</p>\n<p><span style=\"color: rgba(255, 0, 0, 1);\"><strong>è¯´äº†è¿™ä¹ˆå¤šï¼Œæ­£æ–‡åœ¨æ­¤ï¼š</strong></span></p>\n<div class=\"cnblogs_code\">\n<pre>#include <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">sprites.h</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>  <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\">åŒ…å«C++ç²¾çµåº“ </span>\nSprite monkey;       <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\">å»ºç«‹è§’è‰²å«monkey </span>\n\n<span style=\"color: rgba(0, 0, 255, 1);\">int</span> main(){        <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\">ä¸»åŠŸèƒ½å— </span>\n   monkey.bgcolor(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">black</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>).scale(<span style=\"color: rgba(128, 0, 128, 1);\">0.5</span>);  <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\">èƒŒæ™¯é»‘ï¼Œè§’è‰²å˜å°ä¸€åŠ\n   </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\">æŠ¬ç¬”ï¼Œå¹¶ä¸”ç§»é™¤ç´¢å¼•ä¸º0çš„é€ å‹ï¼ˆé»˜è®¤å°ç«ç®­)</span>\n   monkey.penup().removeshape(<span style=\"color: rgba(128, 0, 128, 1);\">0</span>).color(<span style=\"color: rgba(128, 0, 128, 1);\">200</span>).addy(<span style=\"color: rgba(128, 0, 128, 1);\">200</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n   std::</span><span style=\"color: rgba(0, 0, 255, 1);\">string</span> s = <span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">C++å­™æ‚Ÿç©ºçš„72å˜å°åŠ¨ç”»</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n   monkey.write(s,</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">center</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>,{<span style=\"color: rgba(128, 0, 0, 1);\">\"\"</span>,<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">48</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>,<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">normal</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>}).wait(<span style=\"color: rgba(128, 0, 128, 1);\">1</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n   monkey.addy(</span>-<span style=\"color: rgba(128, 0, 128, 1);\">200</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n   monkey.addshape(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">res/é˜¿ç«¥æœ¨.png</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>);   <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\">æ·»åŠ é€ å‹</span>\n   monkey.addshape(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">res/å…‰å¤´å¼º.png</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n   monkey.addshape(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">res/ç°å¤ªç‹¼.png</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n   monkey.addshape(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">res/æœºå™¨çŒ«.png</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n   monkey.addshape(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">res/monkey.png</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>); <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\">å­™æ‚Ÿç©º</span>\n   monkey.addshape(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">res/å¤–æ˜Ÿäºº.png</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n   monkey.addshape(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">res/ä¸­å›½ç»“.png</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(0, 0, 0, 1);\">);\n   monkey.addshape(</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">res/qirocketboy.png</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>);  <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\">éª‘ç«ç®­é£å‘å¤ªç©ºçš„ç”·å­©\n   </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\">åŠ è½½èƒŒæ™¯éŸ³ä¹</span>\n   Mix_Music *music=Mix_LoadMUS(<span style=\"color: rgba(128, 0, 0, 1);\">\"</span><span style=\"color: rgba(128, 0, 0, 1);\">res/monkeybgmusic.wav</span><span style=\"color: rgba(128, 0, 0, 1);\">\"</span>);  <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\">ä¸æ”¯æŒä¸­æ–‡å</span>\n   Mix_PlayMusic(music,-<span style=\"color: rgba(128, 0, 128, 1);\">1</span>);  <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\">-1è¡¨ç¤ºæ— é™å¾ªç¯æ’­æ”¾ï¼Œ0è¡¨ç¤ºæ’­æ”¾1æ¬¡ï¼Œ1åˆ™æ˜¯2æ¬¡ã€‚\n   </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> g_screenæ˜¯è§’è‰²å»ºç«‹åçš„å…¨å±€å±å¹•æŒ‡é’ˆ  </span>\n   <span style=\"color: rgba(0, 0, 255, 1);\">while</span>(g_screen-&gt;exitonclick())  <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\">å•å‡»çª—å£å…³é—­æŒ‰é’®åˆ™å¾ªç¯é€€å‡º</span>\n     monkey.next_shape().wait(random(<span style=\"color: rgba(128, 0, 128, 1);\">0.9</span>,<span style=\"color: rgba(128, 0, 128, 1);\">1.5</span>)); <span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\">å­™æ‚Ÿç©ºåˆ‡æ¢é€ å‹ï¼Œå¹¶ä¸”éšæœºç­‰å¾…ä¸€å®šçš„æ—¶é—´  </span>\n   <span style=\"color: rgba(0, 0, 255, 1);\">return</span> <span style=\"color: rgba(128, 0, 128, 1);\">0</span><span style=\"color: rgba(0, 0, 0, 1);\">;\n}</span></pre>\n</div>\n<p>å“å‘€ï¼Œæˆ‘å¿˜äº†çœ‹å®˜æ²¡æœ‰å­¦è¿‡C++äº†ï¼Œä¸è¿‡è¿™é‡Œè¿˜æœ‰è§†é¢‘ï¼š</p>\n<p>................................................................................................(æ­¤å¤„è¿‡å»5åˆ†é’Ÿ)</p>\n<p>å®Œäº†ï¼Œæ‰¾äº†åŠå¤©æ²¡æœ‰æ‰¾åˆ°åœ¨å“ªé‡Œæ’å…¥è§†é¢‘ï¼Œåªå¾—å§”å±ˆçœ‹å®˜å»æŠ–éŸ³å·pxcodingæ‰¾ã€Šå­™æ‚Ÿç©ºçš„72å˜å°åŠ¨ç”»ã€‹å§ã€‚</p>\n<p>å†è§äº†ï¼Œæˆ‘çš„å°å®è´ä»¬ã€‚</p>\n<p>&nbsp;</p>\n</div>\n<div class=\"clear\"></div>\n\n\t<div class=\"postDesc\">posted on \n<span id=\"post-date\">2026-01-11 15:07</span>&nbsp;\n<a href=\"https://www.cnblogs.com/lixingqiu\">æå…´çƒ</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">113</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "åŒç³»ç»Ÿæ˜¾å¡å†²çªä¿®å¤è®°å½•",
      "link": "https://www.cnblogs.com/chenyouyuan/p/19465907",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/chenyouyuan/p/19465907\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-10 17:11\">\n    <span>åŒç³»ç»Ÿæ˜¾å¡å†²çªä¿®å¤è®°å½•</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                    <div id=\"cnblogs_post_description\" style=\"display: none;\">\n        \n        å…³äºä¿®å¤ubuntuçš„æ ¸æ˜¾ç‹¬æ˜¾ï¼Œnvidiaæ˜¾å¡é©±åŠ¨å†²çªå¯¼è‡´çš„é»‘å±é—®é¢˜\n    </div>\n<div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<h1 id=\"å…³äºåŒç³»ç»Ÿubuntuwinå®‰è£…æ˜¾å¡é©±åŠ¨é»‘å±è®°å½•\">å…³äºåŒç³»ç»Ÿï¼ˆubuntu+winï¼‰å®‰è£…æ˜¾å¡é©±åŠ¨é»‘å±è®°å½•</h1>\n<blockquote>\n<p>ç”µè„‘é…ç½®ï¼šæœºæ¢°é©å‘½è›Ÿé¾™17ks amdæ ¸æ˜¾ + 4060laptopç‹¬æ˜¾</p>\n</blockquote>\n<blockquote>\n<p>ç³»ç»Ÿï¼š win11 +  ubuntu22.04</p>\n</blockquote>\n<blockquote>\n<p>æç¤ºï¼šå…ˆçœ‹ä¸€ä¸‹ä½ æ˜¯ä¸æ˜¯å’Œæˆ‘ç±»ä¼¼çš„æ ¸æ˜¾+ç‹¬æ˜¾çš„é…ç½®,å¦‚æœä¸æ˜¯å¯ä»¥å…ˆå‚è€ƒå…¶ä»–æ–‡ç« ï¼Œä»¥å…æµªè´¹æ—¶é—´</p>\n</blockquote>\n<p></p><div class=\"toc\"><div class=\"toc-container-header\">ç›®å½•</div><ul><li><a href=\"#å…³äºåŒç³»ç»Ÿubuntuwinå®‰è£…æ˜¾å¡é©±åŠ¨é»‘å±è®°å½•\" rel=\"noopener nofollow\">å…³äºåŒç³»ç»Ÿï¼ˆubuntu+winï¼‰å®‰è£…æ˜¾å¡é©±åŠ¨é»‘å±è®°å½•</a><ul><li><a href=\"#ä¸€å¦‚æœç›´æ¥å¯åŠ¨é»‘å±ä½†æ˜¯ä½ å¯ä»¥ä½¿ç”¨ctrl--alt--f-1-or-f-2--f8è¿›å…¥ç»ˆç«¯\" rel=\"noopener nofollow\">ä¸€ã€å¦‚æœç›´æ¥å¯åŠ¨é»‘å±ï¼Œä½†æ˜¯ä½ å¯ä»¥ä½¿ç”¨ctrl + alt + f 1 or f 2 ... f8è¿›å…¥ç»ˆç«¯</a><ul><li><a href=\"#step1\" rel=\"noopener nofollow\">step1ï¼š</a></li><li><a href=\"#step2\" rel=\"noopener nofollow\">step2:</a><ul><li><a href=\"#step21\" rel=\"noopener nofollow\">step2.1:</a></li><li><a href=\"#step22\" rel=\"noopener nofollow\">step2.2:</a></li><li><a href=\"#step23\" rel=\"noopener nofollow\">step2.3:</a></li><li><a href=\"#step24\" rel=\"noopener nofollow\">step2.4:</a><ul><li><a href=\"#1å¦‚æœä½ ä»ç„¶æ˜¯é»‘å±\" rel=\"noopener nofollow\">1.å¦‚æœä½ ä»ç„¶æ˜¯é»‘å±</a></li><li><a href=\"#2å¦‚æœä½ è¿›å…¥äº†æ¡Œé¢\" rel=\"noopener nofollow\">2.å¦‚æœä½ è¿›å…¥äº†æ¡Œé¢</a></li></ul></li></ul></li><li><a href=\"#step3\" rel=\"noopener nofollow\">step3:</a></li></ul></li><li><a href=\"#äºŒå¦‚æœä¸€æ— æ³•å®ç°\" rel=\"noopener nofollow\">äºŒã€å¦‚æœä¸€æ— æ³•å®ç°</a></li><li><a href=\"#å‚è€ƒé“¾æ¥\" rel=\"noopener nofollow\">å‚è€ƒé“¾æ¥</a></li></ul></li></ul></div><p></p>\n<p>â€‹\tæœ€è¿‘ç”±äºå­¦ä¹ isaaclabï¼Œå®‰è£…åŒç³»ç»Ÿï¼ˆwslä¸æ”¯æŒæ˜¾å¡ç›´æ¥é©±åŠ¨ï¼Œå®˜æ–¹ä¹Ÿæ²¡æœ‰é’ˆå¯¹wslä½œä¼˜åŒ–ï¼‰ï¼Œå»nvidiaçš„å®˜ç½‘ä¸‹è½½.runçš„é©±åŠ¨åŒ…å®‰è£…<br />\nå®‰è£…è¿‡ç¨‹ä¸­è¦æˆ‘åŒæ„å®ƒç¦ç”¨nouveauï¼Œå¦‚ä¸‹ï¼Œå¦åˆ™ç¼–è¯‘ä¼šæŠ¥é”™ï¼Œç»ä¹‹åé‡æ–°å¯åŠ¨ä¹Ÿèƒ½æ­£å¸¸è¿›å…¥æ¡Œé¢ï¼Œç»§ç»­å®Œæˆç¼–è¯‘ã€‚</p>\n<pre><code class=\"language-text\">  One or more modprobe configuration files to disable Nouveau have been written.  You will need to reboot your     \n  system and possibly rebuild the initramfs before these changes can take effect.  Note if you later wish to       \n  reenable Nouveau, you will need to delete these files:\n  /usr/lib/modprobe.d/nvidia-installer-disable-nouveau.conf,\n  /etc/modprobe.d/nvidia-installer-disable-nouveau.conf\n</code></pre>\n<p>â€‹\tå®‰è£…ä¹‹åä½¿ç”¨nvidia-smiä¹Ÿèƒ½æ˜¾ç¤ºæ˜¾å¡ä¿¡æ¯ï¼Œæˆ‘ä¹‹åæ­£å¸¸å¯åŠ¨isacclabä¹Ÿæ²¡æœ‰é—®é¢˜ï¼Œä»¥ä¸ºä¸‡äº‹å¤§å‰äº†ã€‚ç»“æœæå®Œç¬¬äºŒå¤©æ‰“å¼€ç”µè„‘å¤©å¡Œäº†ï¼Œç›´æ¥å¡åœ¨é»‘å±å¤„æ— æ³•æ­£å¸¸è¿›å…¥æ¡Œé¢ã€‚</p>\n<p>äºæ˜¯å¼€å¯äº†æ¼«é•¿çš„ä¸€æ•´ä¸ªæ™šä¸Š+ä¸€æ•´ä¸ªä¸Šåˆçš„debug ï¼ˆps: ä½ çŸ¥é“æˆ‘è¿™ä¸¤å¤©æ˜¯æ€ä¹ˆè¿‡çš„å—ï¼Ÿï¼å“ˆåŸºé©±åŠ¨</p>\n<p>ä¸‹é¢æˆ‘åˆ†å‡ ä¸ªæ­¥éª¤æ¥è®²è§£å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜</p>\n<h2 id=\"ä¸€å¦‚æœç›´æ¥å¯åŠ¨é»‘å±ä½†æ˜¯ä½ å¯ä»¥ä½¿ç”¨ctrl--alt--f-1-or-f-2--f8è¿›å…¥ç»ˆç«¯\">ä¸€ã€å¦‚æœç›´æ¥å¯åŠ¨é»‘å±ï¼Œä½†æ˜¯ä½ å¯ä»¥ä½¿ç”¨ctrl + alt + f 1 or f 2 ... f8è¿›å…¥ç»ˆç«¯</h2>\n<p>è¿™å°±è¯´æ˜ä½ çš„ç³»ç»Ÿå…¶å®å·²ç»å¯åŠ¨äº†</p>\n<h3 id=\"step1\">step1ï¼š</h3>\n<p>æ£€æŸ¥ä½ çš„æ˜¾ç¤ºç®¡ç†ç³»ç»Ÿæ˜¯å¦å¯åŠ¨</p>\n<pre><code>sudo systemctl status gdm3\nsudo systemctl status lightdm\n</code></pre>\n<p>å¦‚æœæ˜¾ç¤ºdeadå°±è¯´æ˜æ²¡æœ‰å¯åŠ¨ï¼Œè¿™ä¸ªç¨ååœ¨è¯´ï¼Œä¹Ÿæœ‰ä¸€ç§æ˜¯runingä»ç„¶æ²¡æœ‰æ¡Œé¢çš„</p>\n<h3 id=\"step2\">step2:</h3>\n<p>æ£€æŸ¥nvidiaé©±åŠ¨æ˜¯å¦åŠ è½½</p>\n<pre><code>nvidia-smi\n</code></pre>\n<p>æ­£å¸¸æ˜¾ç¤ºæ˜¾å¡ä¿¡æ¯å°±è¯´æ˜åŠ è½½æˆåŠŸï¼ŒåŠ è½½æˆåŠŸå°±å¯ä»¥è¿›å…¥step3ï¼Œä¸è¡Œå°±å…ˆè¿›å…¥step2.1</p>\n<h4 id=\"step21\">step2.1:</h4>\n<p>å¸è½½é©±åŠ¨</p>\n<p>åˆ†ä¸¤ç§</p>\n<ol>\n<li>\n<p>ä½¿ç”¨.runè¿›è¡Œå®‰è£…çš„</p>\n<pre><code>sudo ./æ˜¾å¡é©±åŠ¨åŒ…åç§° --uninstall\n# æ¯”å¦‚ sudo ./NVIDIA-Linux-x86_64-430.26.run --uninstall\n</code></pre>\n</li>\n<li>\n<p>ä½¿ç”¨aptè¿›è¡Œå®‰è£…çš„</p>\n<pre><code>sudo spt autoremove nvidia-driver-XXX  \n#xxx ç”± tapè‡ªè¡Œè¡¥å…¨\n</code></pre>\n</li>\n</ol>\n<p>æ£€æŸ¥ç›®å½•ï¼š</p>\n<p>/usr/lib/modprobe.d/nvidia-installer-disable-nouveau.conf,<br />\n/etc/modprobe.d/nvidia-installer-disable-nouveau.conf</p>\n<p>è¿™ä¸¤ä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœæœ‰å°±åˆ é™¤å®ƒ</p>\n<h4 id=\"step22\">step2.2:</h4>\n<p>å¥½ï¼Œæ­¤æ—¶ä½ å¯ä»¥å†é‡å¯ä¸€ä¸‹ç”µè„‘ï¼Œå…ˆè¿›å…¥å¼•å¯¼é¡µé¢</p>\n<p>é€‰æ‹©ubuntu advanceï¼ˆæˆ–è€…ç±»ä¼¼ï¼‰</p>\n<p>ç„¶åé€‰æ‹©securityå®‰å…¨æ¨¡å¼è¿›å…¥</p>\n<p>ä¹‹åé€šè¿‡æ–¹å‘é”®é€‰æ‹©root</p>\n<p>è¾“å…¥å¯†ç </p>\n<p>ï¼ˆè¿™ä¼šæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œç•Œé¢ï¼‰</p>\n<p>ç„¶å</p>\n<pre><code class=\"language-bash\">sudo vim /etc/default/grub\n</code></pre>\n<p>ï¼ˆps:æŒ‰iå¼€å§‹ç¼–è¾‘ï¼ŒæŒ‰escï¼Œå¹¶ä¸”æŒ‰ä½shift + : å†è¾“å…¥wqä¿å­˜å¹¶é€€å‡ºï¼‰</p>\n<p>æ‰¾åˆ°è¿™ä¸€è¡Œ</p>\n<pre><code>GRUB_CMDLINE_LINUX_DEFAULT=\"quiet splash\"\n</code></pre>\n<p>quiet splashè¡¨ç¤ºä¸æ˜¾ç¤ºå¯åŠ¨çš„é‚£ç§åˆ·å±çš„è°ƒè¯•ä¿¡æ¯</p>\n<p>åœ¨åé¢åŠ ä¸€ä¸ªç©ºæ ¼ è¾“å…¥nomodeset</p>\n<p>å˜æˆè¿™æ ·</p>\n<pre><code>GRUB_CMDLINE_LINUX_DEFAULT=\"quiet splash nomodeset\"\n</code></pre>\n<p>ç„¶å</p>\n<pre><code class=\"language-bash\">sudo update-grub # æ›´æ–°ä¸€ä¸‹ç³»ç»Ÿå¯åŠ¨é€‰é¡¹\n</code></pre>\n<p>ä¹‹åé‡å¯</p>\n<pre><code class=\"language-bash\">sudo reboot\n</code></pre>\n<h4 id=\"step23\">step2.3:</h4>\n<p>åº”è¯¥å°±èƒ½è¿›å…¥æ¡Œé¢å¯è§†åŒ–äº†ï¼Œå¦‚æœä¸èƒ½ï¼Œ</p>\n<p>ä½ å¯ä»¥å°è¯•ä¸€ä¸‹</p>\n<pre><code class=\"language-bash\">sudo systemctl status gdm3\n</code></pre>\n<p>å¦‚æœæ˜¯dead</p>\n<p>ä½ å¯ä»¥æ‰‹åŠ¨å¯åŠ¨å®ƒ</p>\n<p>å¯åŠ¨ä¹‹å‰ä½ éœ€è¦å…ˆ</p>\n<pre><code class=\"language-bash\">sudo dpkg-reconfigure gdm3\n#é€šè¿‡æ–¹å‘é”®é€‰æ‹©gdm3ä¸ºé»˜è®¤çš„æ˜¾ç¤ºç®¡ç†å™¨\n</code></pre>\n<p>ç„¶å</p>\n<pre><code class=\"language-bash\">sudo systemctl enable gdm3\nsudo systemctl stop lightdm#å¦‚æœä½ åœ¨ä¹‹å‰è£…äº†è¿™lightdmç©æ„çš„è¯ï¼Œæˆ‘è§‰å¾—è¿™ä¸ªå¾ˆå¥‡æ€ªï¼Œå¯åŠ¨å®ƒå°±è¿›ä¸å»æ¡Œé¢ï¼Œä¹‹å‰ç”¨æˆ·è®¤è¯ä¹Ÿé€šè¿‡äº†ï¼Œå› ä¸ºç”¨gdm3æˆåŠŸäº†å°±æ²¡æœ‰è¯¦ç»†ç ”ç©¶è¿™ä¸ªäº†\nsudo systemctl disable lightdm \n</code></pre>\n<p>ç„¶åreboot</p>\n<h4 id=\"step24\">step2.4:</h4>\n<p>å¦‚æœè¿˜æ˜¯è¿›ä¸å»ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</p>\n<p>ä¹Ÿæ²¡å…³ç³»ï¼Œæˆ‘ä»¬ç»§ç»­</p>\n<h5 id=\"1å¦‚æœä½ ä»ç„¶æ˜¯é»‘å±\">1.å¦‚æœä½ ä»ç„¶æ˜¯é»‘å±</h5>\n<p>ctrl + alt + f3</p>\n<p>æ‰“å¼€ä¸€ä¸ªç»ˆç«¯</p>\n<h5 id=\"2å¦‚æœä½ è¿›å…¥äº†æ¡Œé¢\">2.å¦‚æœä½ è¿›å…¥äº†æ¡Œé¢</h5>\n<p>ctrl + alt + t</p>\n<pre><code class=\"language-bash\">sudo apt update\nubuntu-drivers devices\n# é€‰æ‹©ä¸å¸¦-openç»“å°¾çš„ç‰ˆæœ¬\n# å¦‚\n== /sys/devices/pci0000:00/0000:00:01.1/0000:01:00.0 ==\nmodalias : pci:v000010DEd000028A0sv00001D05sd0000128Abc03sc00i00\nvendor   : NVIDIA Corporation\ndriver   : nvidia-driver-570 - distro non-free\ndriver   : nvidia-driver-580-open - distro non-free recommended\ndriver   : nvidia-driver-580 - distro non-free\ndriver   : nvidia-driver-570-server - distro non-free\ndriver   : nvidia-driver-535 - distro non-free\ndriver   : nvidia-driver-580-server-open - distro non-free\ndriver   : nvidia-driver-535-server - distro non-free\ndriver   : nvidia-driver-545-open - distro non-free\ndriver   : nvidia-driver-580-server - distro non-free\ndriver   : nvidia-driver-535-open - distro non-free\ndriver   : nvidia-driver-545 - distro non-free\ndriver   : nvidia-driver-535-server-open - distro non-free\ndriver   : nvidia-driver-570-open - distro non-free\ndriver   : nvidia-driver-570-server-open - distro non-free\ndriver   : xserver-xorg-video-nouveau - distro free builtin\n\n# é€‰æ‹©nvidia-driver-580\n\n# è¾“å…¥\nsudo apt install nvidia-driver-580\n# å®‰è£…å®Œæˆä¹‹ååº”è¯¥è¾“å…¥\nnvidia-smi # å¯ä»¥çœ‹åˆ°æ˜¾å¡ä¿¡æ¯\n</code></pre>\n<h3 id=\"step3\">step3:</h3>\n<p>æ£€æŸ¥ä½ ç³»ç»Ÿçš„æ˜¾å¡æ˜¯å¦åªæœ‰ä¸€å¼ </p>\n<pre><code class=\"language-bash\">lspci | grep VGA\n</code></pre>\n<p>å¦‚æœä½ å‡ºç°äº†ä¸¤è¡Œä¿¡æ¯</p>\n<p>ç±»ä¼¼</p>\n<pre><code>01:00.0 VGA compatible controller: NVIDIA Corporation AD107M [GeForce RTX 4060 Max-Q / Mobile] (rev a1)\n07:00.0 VGA compatible controller: Advanced Micro Devices, Inc. [AMD/ATI] Phoenix1 (rev c2)\n</code></pre>\n<p>07:00.0 å°±æ˜¯busid 7:0:0</p>\n<p>å†æ‰“å¼€ä¸€ä¸ªç»ˆç«¯</p>\n<pre><code>sudo -i #è¿›å…¥è¶…çº§ç®¡ç†å‘˜\nvim /etc/X11/xorg.conf\n</code></pre>\n<p>æŠŠä¸‹é¢çš„é…ç½®æ”¾è¿›å»ï¼ˆä½ è¦ä¿®æ”¹çš„æ˜¯VendorNameå’ŒBusIDï¼Œæ”¹æˆä½ çš„æ ¸æ˜¾çš„ä¿¡æ¯ï¼Œè¿™ä¸€æ­¥çš„è¯¦ç»†ä¿¡æ¯å¯ä»¥ç”±lspci | grep VGAæ‹¿åˆ°ï¼‰ã€‚</p>\n<p>VendorNameä¸éœ€è¦å†™å…¨ï¼Œå¯ä»¥ç´¢å¼•åˆ°å”¯ä¸€å€¼å°±è¡Œã€‚</p>\n<pre><code>Section \"Module\"\n        Load \"modesetting\"\nEndSection\n \nSection \"Device\"\n        Identifier      \"Device1\"\n        Driver          \"modesetting\"\n        VendorName      \"Intel Corporation\"\n        BusID           \"PCI:0:2:0\"\nEndSection\n</code></pre>\n<p>å…¶ä½™ç»†èŠ‚å‚çœ‹ï¼š<br />\n<a href=\"https://blog.csdn.net/m0_63252914/article/details/134400519?sharetype=blog&amp;shareId=134400519&amp;sharerefer=APP&amp;sharesource=mobkbk&amp;sharefrom=link\" rel=\"noopener nofollow\" target=\"_blank\">https://blog.csdn.net/m0_63252914/article/details/134400519?sharetype=blog&amp;shareId=134400519&amp;sharerefer=APP&amp;sharesource=mobkbk&amp;sharefrom=link</a></p>\n<p>ï¼ˆps:è¿™ç¯‡æ–‡ç« çš„ä½œè€…ç”¨çš„æ˜¯nanoï¼Œæˆ‘ç”¨çš„æ˜¯vimï¼Œéƒ½æ˜¯æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œè‡ªå·±è§‰å¾—å“ªä¸ªå¥½ç”¨å°±ç”¨å“ªä¸ªå§ï¼‰</p>\n<p>å¥½ï¼Œä¹‹åæ³¨æ„è¦æŠŠåŸæ¥step2.2æ”¹è¿‡çš„é‚£å¥è¯æ”¹å›å»ï¼š</p>\n<pre><code class=\"language-text\">GRUB_CMDLINE_LINUX_DEFAULT=\"quiet splash\"\n</code></pre>\n<p>è®°å¾—wqé€€å‡º</p>\n<pre><code>sudo update-grub # æ›´æ–°ä¸€ä¸‹ç³»ç»Ÿå¯åŠ¨é€‰é¡¹\n</code></pre>\n<p>ä¹Ÿå¯ä»¥å†æ£€æŸ¥ä¸€ä¸‹step2.3</p>\n<p>ä¹‹åé‡å¯åº”è¯¥å°±æ²¡é—®é¢˜å•¦ï¼</p>\n<h2 id=\"äºŒå¦‚æœä¸€æ— æ³•å®ç°\">äºŒã€å¦‚æœä¸€æ— æ³•å®ç°</h2>\n<p>è¿›å…¥ step2.2 â€”â€”ã€‹step2.1â€”â€”ã€‹step2.3å†ç»§ç»­å¾€åèµ°</p>\n<h2 id=\"å‚è€ƒé“¾æ¥\">å‚è€ƒé“¾æ¥</h2>\n<p><a href=\"https://blog.csdn.net/m0_63252914/article/details/134400519?sharetype=blog&amp;shareId=134400519&amp;sharerefer=APP&amp;sharesource=mobkbk&amp;sharefrom=link\" rel=\"noopener nofollow\" target=\"_blank\">https://blog.csdn.net/m0_63252914/article/details/134400519?sharetype=blog&amp;shareId=134400519&amp;sharerefer=APP&amp;sharesource=mobkbk&amp;sharefrom=link</a></p>\n<p><a href=\"https://blog.csdn.net/gaoenyang760525/article/details/131219814\" rel=\"noopener nofollow\" target=\"_blank\">https://blog.csdn.net/gaoenyang760525/article/details/131219814</a></p>\n<p><a href=\"https://blog.csdn.net/xiaxl/article/details/146975458\" rel=\"noopener nofollow\" target=\"_blank\">https://blog.csdn.net/xiaxl/article/details/146975458</a></p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/671285335\" rel=\"noopener nofollow\" target=\"_blank\">https://zhuanlan.zhihu.com/p/671285335</a></p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-10 17:11</span>&nbsp;\n<a href=\"https://www.cnblogs.com/chenyouyuan\">ChenYY~</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">138</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "20260109 - TRU åè®®æ”»å‡»äº‹ä»¶åˆ†æï¼šä¹°å¾—å¤Ÿå¤šå…è´¹é€äº†å–‚ï¼",
      "link": "https://www.cnblogs.com/ACaiGarden/p/19465686",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/ACaiGarden/p/19465686\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-10 15:42\">\n    <span>20260109 - TRU åè®®æ”»å‡»äº‹ä»¶åˆ†æï¼šä¹°å¾—å¤Ÿå¤šå…è´¹é€äº†å–‚ï¼</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<p>20260109ï¼ŒETH é“¾ä¸Šçš„ TRU åè®®é­å—äº†é»‘å®¢æ”»å‡»ï¼ŒæŸå¤±çº¦ 2600 ä¸‡ç¾å…ƒã€‚æ¼æ´åŸå› æ˜¯è®¡ç®—è´­ä¹° TRU ä»£å¸æ‰€éœ€è¦çš„ ETH æ•°é‡çš„è®¡ç®—å…¬å¼è®¾è®¡å­˜åœ¨ç¼ºé™·ï¼Œè´­ä¹°å¤§é‡ TRU ä»£å¸æ—¶ä¼šå› ä¸ºç²¾åº¦ä¸¢å¤±è€Œå¾—åˆ° 0 å€¼ï¼Œä½¿å¾—æ”»å‡»è€…å¯ä»¥ä»¥ 0 ETH è´­ä¹°å¤§é‡çš„ TRU ä»£å¸ï¼Œæœ€åæŠ›å”®å®Œæˆè·åˆ©ã€‚</p>\n<ul>\n<li>TXï¼š<a href=\"https://app.blocksec.com/explorer/tx/eth/0xcd4755645595094a8ab984d0db7e3b4aabde72a5c87c4f176a030629c47fb014\" rel=\"noopener nofollow\" target=\"_blank\">https://app.blocksec.com/explorer/tx/eth/0xcd4755645595094a8ab984d0db7e3b4aabde72a5c87c4f176a030629c47fb014</a></li>\n</ul>\n<h1 id=\"trace-åˆ†æ\">Trace åˆ†æ</h1>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/1483609/202601/1483609-20260110154123776-1794652238.png\" /></p>\n<ol>\n<li>é»‘å®¢è°ƒç”¨ buyTRU() å‡½æ•°ä»¥é›¶æˆæœ¬è´­å…¥å¤§é‡çš„ TRU ä»£å¸</li>\n<li>ç„¶åè°ƒç”¨ sellTRU() å‡½æ•°å–å‡ºæ‰€æœ‰ TRU ä»£å¸å®Œæˆè·åˆ©</li>\n</ol>\n<p>éšåæ”»å‡»è€…åˆ©ç”¨æ¼æ´ä»¥é›¶æˆ–æä½æˆæœ¬çš„ä»·æ ¼è´­ä¹° TRU ä»£å¸åå‡ºå”®çš„æµç¨‹é‡å¤å¤šæ¬¡ã€‚</p>\n<h1 id=\"ä»£ç åˆ†æ\">ä»£ç åˆ†æ</h1>\n<p>TRU åˆçº¦æ˜¯ä¸€ä¸ªä»£ç†åˆçº¦ï¼š0x764C64b2A09b09Acb100B80d8c505Aa6a0302EF2</p>\n<p>å…¶å…·ä½“çš„é€»è¾‘é€»è¾‘åˆçº¦ä¸ºï¼š0x18ceDF1071EC25331130C82D7AF71D393Ccd4446</p>\n<p>ç”±äºé€»è¾‘åˆçº¦å¹¶æ²¡æœ‰å¼€æºï¼Œæ‰€ä»¥æ¥ä¸‹æ¥ä¼šé‡‡ç”¨ dedaub åç¼–è¯‘ + äººå·¥æ ¡æ­£çš„æ–¹å¼åˆ†æé¡¹ç›®çš„ä¸šåŠ¡é€»è¾‘ã€‚</p>\n<ul>\n<li>é€»è¾‘åˆçº¦çš„åç¼–è¯‘åœ°å€ï¼š<a href=\"https://app.dedaub.com/ethereum/address/0xc186e6f0163e21be057e95aa135edd52508d14d3/decompiled\" rel=\"noopener nofollow\" target=\"_blank\">https://app.dedaub.com/ethereum/address/0xc186e6f0163e21be057e95aa135edd52508d14d3/decompiled</a></li>\n</ul>\n<p>åœ¨ buyTRU() å‡½æ•°ä¸­ï¼Œä¼šæ ¹æ®è¾“å…¥çš„ TRUAmount å‚æ•°å€¼è®¡ç®—æ‰€éœ€è¦çš„ ETH æ•°é‡ï¼Œå¹¶æ£€æŸ¥ msg.value çš„å€¼æ˜¯å¦ä¸ºç›¸ç­‰ã€‚é€šè¿‡æ£€æŸ¥åï¼Œä¼šç»™ç”¨æˆ· mint TRUAmount æ•°é‡çš„ TRU ä»£å¸ã€‚</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/1483609/202601/1483609-20260110154138455-1713236541.png\" /></p>\n<p>å…¶é—®é¢˜å°±å‡ºåœ¨è®¡ç®— ETH æ•°é‡çš„ TRUtoETH() å‡½æ•°ä¸Šï¼Œå…¶åç¼–è¯‘çš„å†…å®¹å¦‚ä¸‹ï¼Œæ ¹æ®è¾“å…¥çš„ TRUAmount å€¼è¿›è¡Œä¸€ç³»åˆ—çš„è®¡ç®—ã€‚</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/1483609/202601/1483609-20260110154148291-397462858.png\" /></p>\n<p>é€šè¿‡ solidity é‡å†™è¿™ä¸ªå‡½æ•°ï¼Œå¾—åˆ°ä»¥ä¸‹çš„å†…å®¹ã€‚å…¶ä¸­ _setParameters çš„å€¼ä¸º 75ï¼Œä»£è¡¨ 75% çš„ä¸€ä¸ªæ¯”ä¾‹ã€‚</p>\n<pre><code class=\"language-solidity\">function TRUtoETH(uint256 TRUAmount) private view returns (uint256) {\n    uint256 totalSupply = TRU.totalSupply();\n    \n    // numerator: (100 - 75) * totalSupplyÂ² = 25 * totalSupplyÂ²\n    uint256 numerator = (100 - _setParameters) * totalSupply * totalSupply;\n    \n    // denominator: 100 * TRUAmount * _reserve * (TRUAmount + 2 * totalSupply)\n    uint256 denominator = 100 * TRUAmount * _reserve * (TRUAmount + 2 * totalSupply);\n    \n    return numerator / denominator;\n}\n\n</code></pre>\n<p>ç”±ä¸Šé¢çš„ä»£ç åˆ†æå¯å¾—ï¼Œå½“ _setParametersï¼ŒtotalSupply å’Œ _reserve ä¸ºå›ºå®šå€¼æ—¶ï¼Œä¼ å…¥çš„å‚æ•° TRUAmount è¶Šå¤§ï¼Œåˆ†æ¯å°±è¶Šå¤§ï¼Œè¿”å›å€¼å°±ä¼šç›¸åº”çš„å˜å°ã€‚è€Œå½“åˆ†æ¯å¤§äºåˆ†å­æ—¶ï¼Œç”±äº solidity ç²¾åº¦ä¸¢å¤±çš„ç‰¹æ€§ï¼Œè¿”å›å€¼å°†ä¼šä¸º 0ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼š</p>\n<blockquote>\n<p>å½“ TRUAmount çš„å€¼éå¸¸å¤§ï¼Œå½“å‰çš„è®¡ç®—å…¬å¼åœ¨è®¡ç®—æ‰€éœ€è¦æä¾›çš„ ETH æ•°é‡æ—¶ï¼Œä¼šç”±äº solidity çš„ç²¾åº¦ä¸¢å¤±è¿”å› 0 å€¼ã€‚</p>\n</blockquote>\n<p>è¿™æ ·ï¼Œæ”»å‡»è€…å°±å®Œæˆäº†æ”»å‡»çš„ç¬¬ä¸€ä¸ªæ­¥éª¤ï¼šä»¥é›¶æˆ–æä½æˆæœ¬çš„ä»·æ ¼è´­ä¹° TRU ä»£å¸ã€‚</p>\n<p>éšåå°±æ˜¯æ­£å¸¸ä½¿ç”¨ sellTRU() å‡½æ•°å–å‡ºæ‰€æœ‰ TRU ä»£å¸å®Œæˆäº†è·åˆ©ã€‚</p>\n<p><img alt=\"image\" src=\"https://img2024.cnblogs.com/blog/1483609/202601/1483609-20260110154205268-1163820900.png\" /></p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-10 15:42</span>&nbsp;\n<a href=\"https://www.cnblogs.com/ACaiGarden\">ACai_sec</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">100</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "ã€Azure Redisã€‘å®¢æˆ·ç«¯åº”ç”¨ä½¿ç”¨ Azure Redis Cluster æŠ¥é”™ java.security.cert.CertificateException: No subject alternative names matching IP address xxx.xxx.xxx.xxx found",
      "link": "https://www.cnblogs.com/lulight/p/19464831",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/lulight/p/19464831\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-10 12:02\">\n    <span>ã€Azure Redisã€‘å®¢æˆ·ç«¯åº”ç”¨ä½¿ç”¨ Azure Redis Cluster æŠ¥é”™ java.security.cert.CertificateException: No subject alternative names matching IP address xxx.xxx.xxx.xxx found</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body blogpost-body-html\" id=\"cnblogs_post_body\">\n<h1>é—®é¢˜æè¿°</h1>\n<p>ä½¿ç”¨Azure Cache for Redisçš„é›†ç¾¤æ¨¡å¼ã€‚åº”ç”¨å®¢æˆ·ç«¯ä¸ºJavaä»£ç ï¼Œä½¿ç”¨Lettuce ä½œä¸ºRedis å®¢æˆ·ç«¯SDKã€‚å¯åŠ¨é¡¹ç›®æŠ¥é”™ï¼š<span style=\"color: rgba(255, 0, 0, 1);\"><strong><span style=\"font-style: italic; background-color: initial;\">Caused by: java.security.cert.CertificateException: No subject alternative names matching IP address 159.27.xxx.xxx foundã€‚</span></strong></span></p>\n<h2><span style=\"color: rgba(0, 0, 0, 1);\"><strong><span style=\"background-color: initial;\">è¿è¡Œæ—¶çš„é”™è¯¯æˆªå›¾</span></strong></span></h2>\n<p><img alt=\"image\" class=\"lazyload\" height=\"435\" width=\"666\" /></p>\n<h2>ç¤ºä¾‹ä»£ç </h2>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">package</span><span style=\"color: rgba(0, 0, 0, 1);\"> com.lbazureredis;\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> io.lettuce.core.RedisURI;\n</span><span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> io.lettuce.core.cluster.RedisClusterClient;\n</span><span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> io.lettuce.core.cluster.api.StatefulRedisClusterConnection;\n</span><span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> io.lettuce.core.cluster.api.sync.RedisAdvancedClusterCommands;\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">class</span><span style=\"color: rgba(0, 0, 0, 1);\"> Main {\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">static</span> <span style=\"color: rgba(0, 0, 255, 1);\">void</span><span style=\"color: rgba(0, 0, 0, 1);\"> main(String[] args) {\n        \n        System.out.println(</span>\"Hello world! This is Redis Cluster example.\"<span style=\"color: rgba(0, 0, 0, 1);\">);\n        \n        RedisURI redisUri </span>= RedisURI.Builder.redis(\"&lt;yourredisname&gt;.redis.cache.chinacloudapi.cn\", 6380<span style=\"color: rgba(0, 0, 0, 1);\">)\n                .withPassword(</span>\"&lt;your redis access key&gt;\").withSsl(<span style=\"color: rgba(0, 0, 255, 1);\">true</span><span style=\"color: rgba(0, 0, 0, 1);\">).build();\n        RedisClusterClient clusterClient </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> RedisClusterClient.create(redisUri);\n        StatefulRedisClusterConnection</span>&lt;String, String&gt; connection =<span style=\"color: rgba(0, 0, 0, 1);\"> clusterClient.connect();\n        RedisAdvancedClusterCommands</span>&lt;String, String&gt; syncCommands =<span style=\"color: rgba(0, 0, 0, 1);\"> connection\n                .sync();\n\n        String pingResponse </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> syncCommands.ping();\n        System.out.println(</span>\"Ping response: \" +<span style=\"color: rgba(0, 0, 0, 1);\"> pingResponse);\n\n        syncCommands.set(</span>\"mykey\", \"Hello, Redis Cluster!\"<span style=\"color: rgba(0, 0, 0, 1);\">);\n        String value </span>= syncCommands.get(\"mykey\"<span style=\"color: rgba(0, 0, 0, 1);\">);\n        System.out.println(</span>\"Retrieved value: \" +<span style=\"color: rgba(0, 0, 0, 1);\"> value);\n        \n        connection.close();\n        clusterClient.shutdown();\n\n    }\n}</span></pre>\n</div>\n<h2>é¡¹ç›®POM.xml</h2>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">&lt;?</span><span style=\"color: rgba(255, 0, 255, 1);\">xml version=\"1.0\" encoding=\"UTF-8\"</span><span style=\"color: rgba(0, 0, 255, 1);\">?&gt;</span>\n<span style=\"color: rgba(0, 0, 255, 1);\">&lt;</span><span style=\"color: rgba(128, 0, 0, 1);\">project </span><span style=\"color: rgba(255, 0, 0, 1);\">xmlns</span><span style=\"color: rgba(0, 0, 255, 1);\">=\"http://maven.apache.org/POM/4.0.0\"</span><span style=\"color: rgba(255, 0, 0, 1);\">\n         xmlns:xsi</span><span style=\"color: rgba(0, 0, 255, 1);\">=\"http://www.w3.org/2001/XMLSchema-instance\"</span><span style=\"color: rgba(255, 0, 0, 1);\">\n         xsi:schemaLocation</span><span style=\"color: rgba(0, 0, 255, 1);\">=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>\n    <span style=\"color: rgba(0, 0, 255, 1);\">&lt;</span><span style=\"color: rgba(128, 0, 0, 1);\">modelVersion</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>4.0.0<span style=\"color: rgba(0, 0, 255, 1);\">&lt;/</span><span style=\"color: rgba(128, 0, 0, 1);\">modelVersion</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>\n\n    <span style=\"color: rgba(0, 0, 255, 1);\">&lt;</span><span style=\"color: rgba(128, 0, 0, 1);\">groupId</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>com.lbazureredis<span style=\"color: rgba(0, 0, 255, 1);\">&lt;/</span><span style=\"color: rgba(128, 0, 0, 1);\">groupId</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>\n    <span style=\"color: rgba(0, 0, 255, 1);\">&lt;</span><span style=\"color: rgba(128, 0, 0, 1);\">artifactId</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>test<span style=\"color: rgba(0, 0, 255, 1);\">&lt;/</span><span style=\"color: rgba(128, 0, 0, 1);\">artifactId</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>\n    <span style=\"color: rgba(0, 0, 255, 1);\">&lt;</span><span style=\"color: rgba(128, 0, 0, 1);\">version</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>1.0-SNAPSHOT<span style=\"color: rgba(0, 0, 255, 1);\">&lt;/</span><span style=\"color: rgba(128, 0, 0, 1);\">version</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>\n\n    <span style=\"color: rgba(0, 0, 255, 1);\">&lt;</span><span style=\"color: rgba(128, 0, 0, 1);\">properties</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>\n        <span style=\"color: rgba(0, 0, 255, 1);\">&lt;</span><span style=\"color: rgba(128, 0, 0, 1);\">maven.compiler.source</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>17<span style=\"color: rgba(0, 0, 255, 1);\">&lt;/</span><span style=\"color: rgba(128, 0, 0, 1);\">maven.compiler.source</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>\n        <span style=\"color: rgba(0, 0, 255, 1);\">&lt;</span><span style=\"color: rgba(128, 0, 0, 1);\">maven.compiler.target</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>17<span style=\"color: rgba(0, 0, 255, 1);\">&lt;/</span><span style=\"color: rgba(128, 0, 0, 1);\">maven.compiler.target</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>\n    <span style=\"color: rgba(0, 0, 255, 1);\">&lt;/</span><span style=\"color: rgba(128, 0, 0, 1);\">properties</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>\n\n    <span style=\"color: rgba(0, 0, 255, 1);\">&lt;</span><span style=\"color: rgba(128, 0, 0, 1);\">dependencies</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>\n        <span style=\"color: rgba(0, 128, 0, 1);\">&lt;!--</span><span style=\"color: rgba(0, 128, 0, 1);\"> Lettuce Redis Client </span><span style=\"color: rgba(0, 128, 0, 1);\">--&gt;</span>\n        <span style=\"color: rgba(0, 0, 255, 1);\">&lt;</span><span style=\"color: rgba(128, 0, 0, 1);\">dependency</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>\n            <span style=\"color: rgba(0, 0, 255, 1);\">&lt;</span><span style=\"color: rgba(128, 0, 0, 1);\">groupId</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>io.lettuce<span style=\"color: rgba(0, 0, 255, 1);\">&lt;/</span><span style=\"color: rgba(128, 0, 0, 1);\">groupId</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>\n            <span style=\"color: rgba(0, 0, 255, 1);\">&lt;</span><span style=\"color: rgba(128, 0, 0, 1);\">artifactId</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>lettuce-core<span style=\"color: rgba(0, 0, 255, 1);\">&lt;/</span><span style=\"color: rgba(128, 0, 0, 1);\">artifactId</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>\n            <span style=\"color: rgba(0, 0, 255, 1);\">&lt;</span><span style=\"color: rgba(128, 0, 0, 1);\">version</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>6.3.1.RELEASE<span style=\"color: rgba(0, 0, 255, 1);\">&lt;/</span><span style=\"color: rgba(128, 0, 0, 1);\">version</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>\n        <span style=\"color: rgba(0, 0, 255, 1);\">&lt;/</span><span style=\"color: rgba(128, 0, 0, 1);\">dependency</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>\n        <span style=\"color: rgba(0, 128, 0, 1);\">&lt;!--</span><span style=\"color: rgba(0, 128, 0, 1);\"> SLF4J for logging </span><span style=\"color: rgba(0, 128, 0, 1);\">--&gt;</span>\n        <span style=\"color: rgba(0, 0, 255, 1);\">&lt;</span><span style=\"color: rgba(128, 0, 0, 1);\">dependency</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>\n            <span style=\"color: rgba(0, 0, 255, 1);\">&lt;</span><span style=\"color: rgba(128, 0, 0, 1);\">groupId</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>org.slf4j<span style=\"color: rgba(0, 0, 255, 1);\">&lt;/</span><span style=\"color: rgba(128, 0, 0, 1);\">groupId</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>\n            <span style=\"color: rgba(0, 0, 255, 1);\">&lt;</span><span style=\"color: rgba(128, 0, 0, 1);\">artifactId</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>slf4j-simple<span style=\"color: rgba(0, 0, 255, 1);\">&lt;/</span><span style=\"color: rgba(128, 0, 0, 1);\">artifactId</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>\n            <span style=\"color: rgba(0, 0, 255, 1);\">&lt;</span><span style=\"color: rgba(128, 0, 0, 1);\">version</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>2.0.9<span style=\"color: rgba(0, 0, 255, 1);\">&lt;/</span><span style=\"color: rgba(128, 0, 0, 1);\">version</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>\n        <span style=\"color: rgba(0, 0, 255, 1);\">&lt;/</span><span style=\"color: rgba(128, 0, 0, 1);\">dependency</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>\n    <span style=\"color: rgba(0, 0, 255, 1);\">&lt;/</span><span style=\"color: rgba(128, 0, 0, 1);\">dependencies</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span>\n\n<span style=\"color: rgba(0, 0, 255, 1);\">&lt;/</span><span style=\"color: rgba(128, 0, 0, 1);\">project</span><span style=\"color: rgba(0, 0, 255, 1);\">&gt;</span></pre>\n</div>\n<p><span style=\"font-size: 18px; color: rgba(255, 0, 0, 1);\"><strong>é’ˆå¯¹ä»¥ä¸Šé—®é¢˜ï¼Œå¦‚ä½•è§£å†³å‘¢ï¼Ÿ</strong></span></p>\n<p>&nbsp;</p>\n<h1>é—®é¢˜è§£ç­”</h1>\n<p>æ ¹æ®é”™è¯¯ä¿¡æ¯æœç´¢åï¼Œå¾—åˆ°Azureå®˜æ–¹æœ€ä½³å®è·µæ–‡æ¡£ä¸­çš„è§£ç­”ï¼š<a href=\"https://github.com/Azure/AzureCacheForRedis/blob/main/Lettuce%20Best%20Practices.md\" rel=\"noopener nofollow\" target=\"_blank\">https://github.com/Azure/AzureCacheForRedis/blob/main/Lettuce%20Best%20Practices.md</a></p>\n<blockquote>\n<p>The reason this is required is because SSL certification validates the address of the Redis Nodes with the SAN (Subject Alternative Names) in the SSL certificate. <strong>Redis protocol requires that these node addresses should be IP addresses.</strong> However, the SANs in<strong> the Azure Redis SSL certificates contains only the Hostname</strong> since Public IP addresses can change and as a result not completely secure.</p>\n<p>åœ¨Redis ProtocoléªŒè¯ä¸­ï¼Œå¿…é¡»éªŒè¯è¯ä¹¦ä¸­åŒ…å«IPåœ°å€ï¼Œä½†ç”±äºAzure Rediséƒ¨ç½²åœ¨äº‘ç¯å¢ƒä¸­ï¼ŒIPåœ°å€æ˜¯ä¸å›ºå®šçš„ã€‚æ‰€ä»¥é»˜è®¤æƒ…å†µä¸‹ï¼ŒRedis SSLè¯ä¹¦ä¸­åŒ…å«çš„æ˜¯åŸŸåã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦å»ºç«‹ä¸€ä¸ªHostä¸IPåœ°å€çš„æ˜ å°„å…³ç³»ï¼Œä½¿å¾—Lettuceå®¢æˆ·ç«¯åœ¨éªŒè¯Redisè¯ä¹¦æ—¶é€šè¿‡åŸŸåéªŒè¯è€ŒéIPåœ°å€ï¼Œç”¨äºè§£å†³<strong>No subject alternative names matching IP address 159.27.xxx.xxx found </strong>é—®é¢˜</p>\n</blockquote>\n<p>å‚è€ƒæ–‡æ¡£ä¸­çš„æ–¹æ³•ï¼Œè‡ªå®šä¹‰<strong><code>MappingSocketAddressResolver</code></strong></p>\n<div class=\"cnblogs_code\">\n<pre>        Function&lt;HostAndPort, HostAndPort&gt; <span style=\"background-color: rgba(255, 204, 0, 1);\">mappingFunction</span> = <span style=\"color: rgba(0, 0, 255, 1);\">new</span> Function&lt;HostAndPort, HostAndPort&gt;<span style=\"color: rgba(0, 0, 0, 1);\">() {\n            @Override\n            </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span><span style=\"color: rgba(0, 0, 0, 1);\"> HostAndPort apply(HostAndPort hostAndPort) {\n                String cacheIP </span>= \"\"<span style=\"color: rgba(0, 0, 0, 1);\">;\n                </span><span style=\"color: rgba(0, 0, 255, 1);\">try</span><span style=\"color: rgba(0, 0, 0, 1);\"> {\n                    InetAddress[] addresses </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> DnsResolvers.JVM_DEFAULT.resolve(host);\n                    cacheIP </span>= addresses[0<span style=\"color: rgba(0, 0, 0, 1);\">].getHostAddress();\n                } </span><span style=\"color: rgba(0, 0, 255, 1);\">catch</span><span style=\"color: rgba(0, 0, 0, 1);\"> (UnknownHostException e) {\n                    e.printStackTrace();\n                }\n                HostAndPort finalAddress </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> hostAndPort;\n\n                </span><span style=\"color: rgba(0, 0, 255, 1);\">if</span><span style=\"color: rgba(0, 0, 0, 1);\"> (hostAndPort.hostText.equals(cacheIP))\n                    finalAddress </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> HostAndPort.of(host, hostAndPort.getPort());\n                </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> finalAddress;\n            }\n        };\n\n        <span style=\"background-color: rgba(255, 204, 0, 1);\">MappingSocketAddressResolver</span> resolver </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> MappingSocketAddressResolver.create(DnsResolvers.JVM_DEFAULT,\n                mappingFunction);\n        <span style=\"background-color: rgba(255, 204, 0, 1);\">ClientResources</span> res </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> DefaultClientResources.builder()\n                .socketAddressResolver(resolver).build();\n        RedisURI redisURI </span>= RedisURI.Builder.redis(host).withSsl(<span style=\"color: rgba(0, 0, 255, 1);\">true</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n                .withPassword(password)\n                .withClientName(</span>\"LettuceClient\"<span style=\"color: rgba(0, 0, 0, 1);\">)\n                .withPort(</span>6380<span style=\"color: rgba(0, 0, 0, 1);\">)\n                .build();\n        RedisClusterClient redisClient </span>= RedisClusterClient.create(<span style=\"background-color: rgba(255, 204, 0, 1);\">res</span>, redisURI);</pre>\n</div>\n<h2>ä»£ç è§£è¯»</h2>\n<blockquote>\n<h3>mappingFunction</h3>\n<ul>\n<li>å®ƒæ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„åœ°å€æ˜ å°„é€»è¾‘ï¼Œç”¨äºå¤„ç† Lettuce åœ¨è¿æ¥ Redis é›†ç¾¤æ—¶çš„ä¸»æœºåä¸ IP åœ°å€é—®é¢˜ã€‚</li>\n<li>å®ƒé€šè¿‡ DnsResolvers.JVM_DEFAULT å¯¹æŒ‡å®šçš„åŸŸåè¿›è¡Œ DNS è§£æï¼Œè·å–å¯¹åº”çš„ IP åœ°å€ã€‚å¦‚æœå½“å‰ HostAndPort çš„ hostText ä¸è§£æå‡ºçš„ IP ç›¸åŒï¼Œåˆ™å°†å…¶æ›¿æ¢ä¸ºåŸå§‹åŸŸå hostï¼Œä¿æŒç«¯å£ä¸å˜ã€‚</li>\n<li>è¿™ä¸€é€»è¾‘çš„æ ¸å¿ƒç›®çš„æ˜¯è§£å†³ SSL è¯ä¹¦æ ¡éªŒé—®é¢˜ï¼Œå› ä¸ºè¯ä¹¦é€šå¸¸ç»‘å®šåŸŸåè€Œé IPï¼Œç¡®ä¿è¿æ¥æ—¶ä½¿ç”¨åŸŸåè¿›è¡ŒéªŒè¯ï¼Œé¿å…å›  IP å¯¼è‡´çš„æ¡æ‰‹å¤±è´¥ã€‚</li>\n</ul>\n<h3>MappingSocketAddressResolver</h3>\n<ul>\n<li>å®ƒæ˜¯ Lettuce æä¾›çš„ä¸€ä¸ªå·¥å…·ç±»ï¼Œç”¨äºåœ¨è¿æ¥ Redis æ—¶æ’å…¥è‡ªå®šä¹‰çš„åœ°å€è§£æé€»è¾‘ã€‚</li>\n<li>å®ƒç»“åˆé»˜è®¤çš„ DNS è§£æå™¨å’Œ mappingFunctionï¼Œåœ¨æ¯æ¬¡è§£æ Socket åœ°å€æ—¶æ‰§è¡Œæ˜ å°„æ“ä½œã€‚</li>\n<li>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå®¢æˆ·ç«¯å¯ä»¥åœ¨ DNS è§£æåå¯¹ç»“æœè¿›è¡ŒäºŒæ¬¡å¤„ç†ï¼Œä¾‹å¦‚å°† IP åœ°å€é‡æ–°æ˜ å°„ä¸ºåŸŸåã€‚</li>\n<li>è¿™å¯¹äºäº‘æœåŠ¡åœºæ™¯ï¼ˆå¦‚ Azure Redisï¼‰éå¸¸é‡è¦ï¼Œå› ä¸ºè¿™äº›æœåŠ¡çš„ SSL è¯ä¹¦é€šå¸¸åªå¯¹åŸŸåæœ‰æ•ˆï¼Œè€Œä¸æ˜¯ IP åœ°å€ã€‚</li>\n</ul>\n<h3>DefaultClientResources</h3>\n<ul>\n<li><span style=\"background-color: initial; font-size: 14px;\">ä½œä¸º Lettuce çš„æ ¸å¿ƒèµ„æºç®¡ç†å™¨ï¼Œç”¨äºé…ç½®å®¢æˆ·ç«¯çš„åº•å±‚è¡Œä¸ºï¼ŒåŒ…æ‹¬çº¿ç¨‹æ± ã€DNS è§£æå™¨ã€äº‹ä»¶å¾ªç¯ç­‰ã€‚åœ¨è¿™é‡Œï¼Œå®ƒçš„ä½œç”¨æ˜¯å°†è‡ªå®šä¹‰çš„ MappingSocketAddressResolver æ³¨å…¥åˆ°å®¢æˆ·ç«¯èµ„æºä¸­ï¼Œä½¿æ‰€æœ‰è¿æ¥è¯·æ±‚éƒ½éµå¾ªè‡ªå®šä¹‰çš„åœ°å€è§£æé€»è¾‘ã€‚</span></li>\n<li><span style=\"background-color: initial; font-size: 14px;\">é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ•´ä¸ª Lettuce å®¢æˆ·ç«¯åœ¨è¿æ¥ Redis é›†ç¾¤æ—¶éƒ½ä¼šä½¿ç”¨åŸŸåè€Œé IPï¼Œç¡®ä¿ SSL æ ¡éªŒé€šè¿‡ï¼ŒåŒæ—¶ä¿æŒè¿æ¥çš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§ã€‚</span></li>\n</ul>\n</blockquote>\n<p>&nbsp;</p>\n<h2>æ‰§è¡Œç»“æœ</h2>\n<p>å†æ¬¡è¿è¡Œï¼ŒæˆåŠŸè¿æ¥åˆ°Azure Redis Cluster åŠæ‰§è¡ŒPing, Set, GetæŒ‡ä»¤ï¼</p>\n<p><img alt=\"image\" class=\"lazyload\" height=\"541\" width=\"999\" /></p>\n<h2>ä¿®æ”¹åå®Œæ•´çš„Javaç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</h2>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: rgba(0, 0, 255, 1);\">package</span><span style=\"color: rgba(0, 0, 0, 1);\"> com.lbazureredis;\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> java.net.InetAddress;\n</span><span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> java.net.UnknownHostException;\n</span><span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> java.time.Duration;\n</span><span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> java.util.function.Function;\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> io.lettuce.core.RedisURI;\n</span><span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> io.lettuce.core.SocketOptions;\n</span><span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> io.lettuce.core.api.StatefulRedisConnection;\n</span><span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> io.lettuce.core.cluster.ClusterClientOptions;\n</span><span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> io.lettuce.core.cluster.ClusterTopologyRefreshOptions;\n</span><span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> io.lettuce.core.cluster.RedisClusterClient;\n</span><span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> io.lettuce.core.cluster.api.StatefulRedisClusterConnection;\n</span><span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> io.lettuce.core.cluster.api.async.RedisAdvancedClusterAsyncCommands;\n</span><span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> io.lettuce.core.cluster.api.sync.RedisAdvancedClusterCommands;\n</span><span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> io.lettuce.core.internal.HostAndPort;\n</span><span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> io.lettuce.core.resource.ClientResources;\n</span><span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> io.lettuce.core.resource.DefaultClientResources;\n</span><span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> io.lettuce.core.resource.DnsResolvers;\n</span><span style=\"color: rgba(0, 0, 255, 1);\">import</span><span style=\"color: rgba(0, 0, 0, 1);\"> io.lettuce.core.resource.MappingSocketAddressResolver;\n\n</span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">class</span><span style=\"color: rgba(0, 0, 0, 1);\"> Main {\n\n    </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span> <span style=\"color: rgba(0, 0, 255, 1);\">static</span> <span style=\"color: rgba(0, 0, 255, 1);\">void</span><span style=\"color: rgba(0, 0, 0, 1);\"> main(String[] args) {\n\n        System.out.println(</span>\"Hello world! This is Redis Cluster example.\"<span style=\"color: rgba(0, 0, 0, 1);\">);\n\n        String host </span>= \"&lt;yourredisname&gt;.redis.cache.chinacloudapi.cn\"<span style=\"color: rgba(0, 0, 0, 1);\">;\n        String password </span>= \"&lt;your redis access key&gt;\"<span style=\"color: rgba(0, 0, 0, 1);\">;\n\n        Function</span>&lt;HostAndPort, HostAndPort&gt; <span style=\"background-color: rgba(255, 204, 0, 1);\">mappingFunction</span> = <span style=\"color: rgba(0, 0, 255, 1);\">new</span> Function&lt;HostAndPort, HostAndPort&gt;<span style=\"color: rgba(0, 0, 0, 1);\">() {\n            @Override\n            </span><span style=\"color: rgba(0, 0, 255, 1);\">public</span><span style=\"color: rgba(0, 0, 0, 1);\"> HostAndPort apply(HostAndPort hostAndPort) {\n                String cacheIP </span>= \"\"<span style=\"color: rgba(0, 0, 0, 1);\">;\n                </span><span style=\"color: rgba(0, 0, 255, 1);\">try</span><span style=\"color: rgba(0, 0, 0, 1);\"> {\n                    InetAddress[] addresses </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> DnsResolvers.JVM_DEFAULT.resolve(host);\n                    cacheIP </span>= addresses[0<span style=\"color: rgba(0, 0, 0, 1);\">].getHostAddress();\n                } </span><span style=\"color: rgba(0, 0, 255, 1);\">catch</span><span style=\"color: rgba(0, 0, 0, 1);\"> (UnknownHostException e) {\n                    e.printStackTrace();\n                }\n                HostAndPort finalAddress </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> hostAndPort;\n\n                </span><span style=\"color: rgba(0, 0, 255, 1);\">if</span><span style=\"color: rgba(0, 0, 0, 1);\"> (hostAndPort.hostText.equals(cacheIP))\n                    finalAddress </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> HostAndPort.of(host, hostAndPort.getPort());\n                </span><span style=\"color: rgba(0, 0, 255, 1);\">return</span><span style=\"color: rgba(0, 0, 0, 1);\"> finalAddress;\n            }\n        };\n\n        MappingSocketAddressResolver resolver </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> MappingSocketAddressResolver.create(DnsResolvers.JVM_DEFAULT,\n                <span style=\"background-color: rgba(255, 204, 0, 1);\">mappingFunction</span>);\n        ClientResources res </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> DefaultClientResources.builder()\n                .socketAddressResolver(resolver).build();\n        RedisURI redisURI </span>= RedisURI.Builder.redis(host).withSsl(<span style=\"color: rgba(0, 0, 255, 1);\">true</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n                .withPassword(password)\n                .withClientName(</span>\"LettuceClient\"<span style=\"color: rgba(0, 0, 0, 1);\">)\n                .withPort(</span>6380<span style=\"color: rgba(0, 0, 0, 1);\">)\n                .build();\n        RedisClusterClient redisClient </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> RedisClusterClient.create(<span style=\"background-color: rgba(255, 204, 0, 1);\">res</span>, redisURI);\n        </span><span style=\"color: rgba(0, 128, 0, 1);\">//</span><span style=\"color: rgba(0, 128, 0, 1);\"> Cluster specific settings for optimal reliability.</span>\n        ClusterTopologyRefreshOptions refreshOptions =<span style=\"color: rgba(0, 0, 0, 1);\"> ClusterTopologyRefreshOptions.builder()\n                .enablePeriodicRefresh(Duration.ofSeconds(</span>5<span style=\"color: rgba(0, 0, 0, 1);\">))\n                .dynamicRefreshSources(</span><span style=\"color: rgba(0, 0, 255, 1);\">false</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n                .adaptiveRefreshTriggersTimeout(Duration.ofSeconds(</span>5<span style=\"color: rgba(0, 0, 0, 1);\">))\n                .enableAllAdaptiveRefreshTriggers().build();\n        redisClient.setOptions(ClusterClientOptions.builder()\n                .socketOptions(SocketOptions.builder()\n                        .keepAlive(</span><span style=\"color: rgba(0, 0, 255, 1);\">true</span><span style=\"color: rgba(0, 0, 0, 1);\">)\n                        .build())\n                .topologyRefreshOptions(refreshOptions).build());\n                \n        StatefulRedisClusterConnection</span>&lt;String, String&gt; connection =<span style=\"color: rgba(0, 0, 0, 1);\"> redisClient.connect();\n        RedisAdvancedClusterCommands</span>&lt;String, String&gt; syncCommands =<span style=\"color: rgba(0, 0, 0, 1);\"> connection.sync();\n        RedisAdvancedClusterAsyncCommands</span>&lt;String, String&gt; asyncCommands =<span style=\"color: rgba(0, 0, 0, 1);\"> connection.async();\n\n        String pingResponse </span>=<span style=\"color: rgba(0, 0, 0, 1);\"> syncCommands.ping();\n        System.out.println(</span>\"Ping response: \" +<span style=\"color: rgba(0, 0, 0, 1);\"> pingResponse);\n\n        syncCommands.set(</span>\"mykey\", \"Hello, Redis Cluster!\"<span style=\"color: rgba(0, 0, 0, 1);\">);\n        String value </span>= syncCommands.get(\"mykey\"<span style=\"color: rgba(0, 0, 0, 1);\">);\n        System.out.println(</span>\"Retrieved value: \" +<span style=\"color: rgba(0, 0, 0, 1);\"> value);\n\n        connection.close();\n\n        redisClient.shutdown();\n\n    }\n}</span></pre>\n</div>\n<h2>ä»£ç æµç¨‹å›¾</h2>\n<p>åŸºäºAIæ¨¡å‹è§£è¯»ä»¥ä¸Šä»£ç åï¼Œåˆ†æå‡ºæ¥çš„ä»£ç æµç¨‹å›¾</p>\n<p><img alt=\"image\" class=\"lazyload\" height=\"256\" width=\"666\" /></p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<h1>å‚è€ƒèµ„æ–™</h1>\n<div class=\"markdown-heading\" dir=\"auto\">\n<p class=\"heading-element\" dir=\"auto\">Best Practices for using Azure Cache for Redis with Lettuce ï¼š<a href=\"https://github.com/Azure/AzureCacheForRedis/blob/main/Lettuce%20Best%20Practices.md\" rel=\"noopener nofollow\" target=\"_blank\">https://github.com/Azure/AzureCacheForRedis/blob/main/Lettuce%20Best%20Practices.md</a></p>\n<div>&nbsp;</div>\n<a class=\"anchor\" href=\"https://github.com/Azure/AzureCacheForRedis/blob/main/Lettuce%20Best%20Practices.md#best-practices-for-using-azure-cache-for-redis-with-lettuce\" id=\"user-content-best-practices-for-using-azure-cache-for-redis-with-lettuce\" rel=\"noopener nofollow\"></a></div>\n</div>\n<div id=\"MySignature\">\n    <div style=\"background: #1c5f55; height: 36px; width: 618px; padding: 14px 5px 0px 3px;\">\n  <p style=\"font-weight: bold; color: white;\">å½“åœ¨å¤æ‚çš„ç¯å¢ƒä¸­é¢ä¸´é—®é¢˜ï¼Œæ ¼ç‰©ä¹‹é“éœ€ï¼šæµŠè€Œé™ä¹‹å¾æ¸…ï¼Œå®‰ä»¥åŠ¨ä¹‹å¾ç”Ÿã€‚ äº‘ä¸­ï¼Œæ°æ˜¯å¦‚æ­¤!</p>\n</div>\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-10 12:02</span>&nbsp;\n<a href=\"https://www.cnblogs.com/lulight\">è·¯è¾¹ä¸¤ç›ç¯</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">52</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    },
    {
      "title": "æ£’æ£’ç³–å›¾ï¼šå½“æ¡å½¢å›¾é‡ä¸Šæç®€ç¾å­¦",
      "link": "https://www.cnblogs.com/wang_yb/p/19464212",
      "published": "",
      "description": "<h1 class=\"postTitle\">\n                <a class=\"postTitle2 vertical-middle\" href=\"https://www.cnblogs.com/wang_yb/p/19464212\" id=\"cb_post_title_url\" title=\"å‘å¸ƒäº 2026-01-10 08:42\">\n    <span>æ£’æ£’ç³–å›¾ï¼šå½“æ¡å½¢å›¾é‡ä¸Šæç®€ç¾å­¦</span>\n    \n\n</a>\n\n            </h1>\n            <div class=\"clear\"></div>\n            <div class=\"postBody\">\n                <div class=\"blogpost-body cnblogs-markdown\" id=\"cnblogs_post_body\">\n<p><strong>æ£’æ£’ç³–å›¾</strong>ï¼ˆLollipop Chartï¼‰å¯ä»¥çœ‹ä½œæ˜¯æ¡å½¢å›¾çš„ä¸€ç§â€œè½»ç›ˆç‰ˆâ€å˜ä½“ï¼šå®ƒç”¨ä¸€æ ¹ä»åŸºå‡†çº¿å»¶ä¼¸å‡ºæ¥çš„â€œæ£’â€ï¼Œå¹¶åœ¨æœ«ç«¯ä»¥ä¸€ä¸ªâ€œç³–â€ï¼ˆåœ†ç‚¹ï¼‰æ¥è¡¨ç¤ºæ•°å€¼ï¼Œå–ä»£äº†ä¼ ç»Ÿçš„çŸ©å½¢æ¡ã€‚</p>\n<p>è¿™ç§å›¾è¡¨ä¼ è¾¾çš„ä¿¡æ¯ä¸æ¡å½¢å›¾æ˜¯ä¸€æ ·çš„ï¼Œä½†å®ƒæ›´æ³¨é‡çªå‡ºæ•°æ®ç‚¹çš„ä½ç½®ï¼Œæ•´ä½“çœ‹èµ·æ¥æ›´åŠ æ¸…æ–°ã€ç°ä»£ã€‚</p>\n<p>ä»Šå¤©ï¼Œæˆ‘ä»¬ä¸€èµ·æ¢ç´¢æ£’æ£’ç³–å›¾çš„ä¼˜åŠ¿ï¼Œå¹¶é€šè¿‡ä»£ç å®ç°ï¼Œäº²æ‰‹æ‰“é€ ä¸€ä¸ªå±äºè‡ªå·±çš„æ£’æ£’ç³–å›¾ï¼</p>\n<h1 id=\"è®¾è®¡åŸç†\">è®¾è®¡åŸç†</h1>\n<p>è®¾è®¡æ£’æ£’ç³–å›¾çš„åˆè¡·æœ‰ä¸¤ä¸ªæ–¹é¢ï¼š</p>\n<p>é¦–å…ˆï¼Œé€šè¿‡å‡å°‘å›¾å½¢ä¸­çš„â€œå¢¨æ°´â€ä½¿ç”¨é‡ï¼Œåœ¨é¢å¯¹å¤§é‡ç±»åˆ«æˆ–æ•°å€¼æ™®éè¾ƒé«˜çš„æƒ…å†µä¸‹ï¼Œé¿å…äº†æ¡å½¢å›¾è¿‡äºå¯†é›†å¯èƒ½å¸¦æ¥çš„<strong>è§†è§‰å‹è¿«æ„Ÿ</strong>å’Œ<strong>æ‚ä¹±æ— ç« </strong>çš„æ„Ÿè§‰ï¼›</p>\n<p>å…¶æ¬¡ï¼Œè¿™æ ·çš„è®¾è®¡èƒ½å¤Ÿæ›´å¥½åœ°å¼•å¯¼è§‚å¯Ÿè€…çš„æ³¨æ„åŠ›é›†ä¸­åœ¨å„ä¸ªæ•°æ®ç‚¹çš„å…·ä½“ä½ç½®åŠå…¶ä¹‹é—´çš„å·®å¼‚ä¸Šï¼Œéå¸¸é€‚åˆç”¨æ¥è¿›è¡Œæ’åæˆ–è€…å¯¹æ¯”åˆ†æã€‚</p>\n<p><strong>æ£’æ£’ç³–å›¾</strong>ä¸<strong>æ¡å½¢å›¾</strong>åœ¨åŠŸèƒ½ä¸Šæ˜¯ç­‰ä»·çš„ï¼Œä¹Ÿå¹¶ä¸æ€»æ˜¯ä¼˜äºæ¡å½¢å›¾ã€‚</p>\n<p>å½“å¤„ç†å¤§é‡ç±»åˆ«ã€æ¡æŸ±éå¸¸é«˜ä¸”ç›¸äº’ä¹‹é—´è·ç¦»è¾ƒè¿‘çš„æ•°æ®æ—¶ï¼Œæ£’æ£’ç³–å›¾ä¼šæ˜¾å¾—æ›´åŠ æ˜“äºé˜…è¯»ç†è§£ï¼›</p>\n<p>ç„¶è€Œï¼Œåœ¨éœ€è¦å¼ºè°ƒç»å¯¹æ•°é‡æˆ–æ˜¯å¸Œæœ›è·å¾—æœ€ä¸ºç›´è§‚é•¿åº¦æ¯”è¾ƒçš„æƒ…å†µä¸‹ï¼Œæ¡å½¢å›¾ä¾ç„¶æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</p>\n<h1 id=\"å®ç°åŸç†\">å®ç°åŸç†</h1>\n<p><strong>æ£’æ£’ç³–å›¾</strong>åœ¨<code>matplotlib</code>åº“ä¸­æ²¡æœ‰ç›´æ¥å¯¹åº”çš„ç±»ã€‚</p>\n<p>ä¸è¿‡ï¼Œå®ƒçš„å®ç°åŸç†éå¸¸ç®€å•ï¼Œé€šè¿‡ç»„åˆä½¿ç”¨ <code>matplotlib</code> ä¸­çš„ä¸¤ä¸ªåŸºæœ¬ç»˜å›¾åŠŸèƒ½å°±å¯ä»¥å®ç°ï¼š</p>\n<ol>\n<li><strong>ç»˜åˆ¶çº¿æ¡</strong> (<code>plt.vlines</code>)ï¼šè¿™æ˜¯æ„æˆæ£’æ£’ç³–â€œæ£å­â€éƒ¨åˆ†çš„å…³é”®ã€‚</li>\n</ol>\n<p><code>plt.vlines</code> å‡½æ•°ç”¨äºåœ¨å›¾è¡¨ä¸Šç»˜åˆ¶å‚ç›´çº¿æ®µã€‚é€šè¿‡æŒ‡å®šæ¯ä¸ªæ•°æ®ç‚¹çš„ x åæ ‡ã€çº¿æ¡çš„èµ·å§‹ç‚¹ï¼ˆé€šå¸¸æ˜¯ 0ï¼‰å’Œç»“æŸç‚¹ï¼ˆå³å¯¹åº”æ•°æ®çš„ y å€¼ï¼‰ï¼Œå°±å¯ä»¥ç”»å‡ºä» x è½´å»¶ä¼¸åˆ°æ•°æ®å€¼çš„çº¿æ¡ã€‚</p>\n<ol start=\"2\">\n<li><strong>ç»˜åˆ¶åœ†ç‚¹</strong> (<code>plt.scatter</code>)ï¼šè¿™æ˜¯æ„æˆæ£’æ£’ç³–â€œç³–â€éƒ¨åˆ†çš„å…³é”®ã€‚</li>\n</ol>\n<p><code>plt.scatter</code> å‡½æ•°ç”¨äºç»˜åˆ¶æ•£ç‚¹å›¾ã€‚é€šè¿‡å°†æ¯ä¸ªæ•°æ®ç‚¹çš„ x åæ ‡å’Œ y åæ ‡ï¼ˆå³æ•°æ®å€¼ï¼‰ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œå°±å¯ä»¥åœ¨æ¯æ¡çº¿çš„é¡¶ç«¯ç»˜åˆ¶ä¸€ä¸ªåœ†ç‚¹ã€‚</p>\n<p>æ€»çš„æ¥è¯´ï¼Œ<strong>å®ç°åŸç†</strong>å°±æ˜¯ï¼šç”¨çº¿æ¡è¡¨ç¤ºæ•°å€¼çš„å¤§å°ï¼Œç”¨åœ†ç‚¹å¼ºè°ƒæ•°å€¼çš„ç»ˆç‚¹ä½ç½®ï¼Œä¸¤è€…ç»“åˆå°±å½¢æˆäº†è§†è§‰ä¸Šç±»ä¼¼æ£’æ£’ç³–çš„å›¾è¡¨ã€‚</p>\n<p>è¿™ç§ç»„åˆæ–¹å¼ä½¿å¾—å›¾è¡¨æ¯”å®å¿ƒçš„æ¡å½¢å›¾æ›´ç®€æ´ï¼ŒåŒæ—¶åˆèƒ½æ¸…æ™°åœ°ä¼ è¾¾æ•°æ®ä¿¡æ¯ã€‚</p>\n<p>ä¸‹ä¸€èŠ‚çš„ç¤ºä¾‹ä¸­ï¼Œå°†ä¼šæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨<code>matplotlib</code>æ¥ç»˜åˆ¶<strong>æ£’æ£’ç³–å›¾</strong>ã€‚</p>\n<h1 id=\"åº”ç”¨ç¤ºä¾‹\">åº”ç”¨ç¤ºä¾‹</h1>\n<p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬é€šè¿‡å®é™…çš„å¯¹æ¯”ç¤ºä¾‹ï¼Œç›´è§‚åœ°æ„Ÿå—æ£’æ£’ç³–å›¾ä¸ä¼ ç»Ÿæ¡å½¢å›¾çš„ä¸åŒè¡¨ç°ã€‚</p>\n<h2 id=\"é€‚åˆæ£’æ£’ç³–å›¾çš„åœºæ™¯\">é€‚åˆæ£’æ£’ç³–å›¾çš„åœºæ™¯</h2>\n<pre><code class=\"language-python\"># åˆ›å»ºæ›´å¤šç±»åˆ«çš„æµ‹è¯•æ•°æ®\n# æ¨¡æ‹Ÿä¸åŒæœˆä»½ä¸­æ¯å¤©çš„æŸä¸ªæŒ‡æ ‡ï¼ˆä¾‹å¦‚ï¼šæ¯æ—¥å¹³å‡æ­¥æ•°ï¼Œå•ä½ï¼šåƒæ­¥ï¼‰\ndays = [f\"Day {i}\" for i in range(1, 21)]  # ç”Ÿæˆ 20 å¤©çš„æ•°æ®\nnp.random.seed(42)  # è®¾ç½®éšæœºç§å­ï¼Œç¡®ä¿æ¯æ¬¡è¿è¡Œç»“æœä¸€è‡´\n# ç”Ÿæˆ 1 åˆ° 5 ä¹‹é—´çš„éšæœºæ•°å€¼ä½œä¸ºç¤ºä¾‹æ•°æ®\nvalues = np.round(np.random.uniform(1.0, 5.0, size=len(days)), 1)\n\n# --- åˆ›å»ºå­å›¾ ---\nfig, (ax1, ax2) = plt.subplots(2, 1, figsize=(12, 10))  # è°ƒæ•´ä¸ºå‚ç›´å¸ƒå±€ï¼Œæ–¹ä¾¿æ¯”è¾ƒ\n\n# --- ç»˜åˆ¶æ¡å½¢å›¾ (ä¸Šå›¾) ---\nbars = ax1.bar(days, values, color=\"skyblue\", edgecolor=\"navy\", linewidth=0.7)\nax1.set_title(\"æ¡å½¢å›¾ (Bar Chart) - æ¯æ—¥æ­¥æ•°\", fontsize=14)\nax1.set_ylabel(\"æ•°å€¼ (åƒæ­¥)\")\n# ax1.set_xlabel('æ—¥æœŸ') # xè½´æ ‡ç­¾å·²åœ¨ä¸‹æ–¹å›¾ä¸­\nax1.grid(axis=\"y\", linestyle=\"--\", alpha=0.7)\n# åœ¨æ¡å½¢å›¾ä¸Šæ·»åŠ æ•°å€¼æ ‡ç­¾\nfor bar, val in zip(bars, values):\n    height = bar.get_height()\n    ax1.text(\n        bar.get_x() + bar.get_width() / 2.0,\n        height + 0.05,\n        f\"{val}\",\n        ha=\"center\",\n        va=\"bottom\",\n        fontsize=8,\n    )  # æ ‡ç­¾æ—‹è½¬90åº¦èŠ‚çœç©ºé—´\n\n# --- ç»˜åˆ¶æ£’æ£’ç³–å›¾ (ä¸‹å›¾) ---\n# 1. ç»˜åˆ¶çº¿æ¡\nax2.vlines(x=range(len(days)), ymin=0, ymax=values, color=\"navy\", linewidth=2)\n# 2. åœ¨çº¿æ¡é¡¶éƒ¨ç»˜åˆ¶åœ†ç‚¹\nax2.scatter(x=range(len(days)), y=values, color=\"red\", s=50, zorder=3)\n# 3. æ·»åŠ æ•°å€¼æ ‡ç­¾\nfor i, val in enumerate(values):\n    ax2.text(i, val + 0.1, f\"{val}\", ha=\"center\", va=\"bottom\", fontsize=8)\n\nax2.set_title(\"æ£’æ£’ç³–å›¾ (Lollipop Chart) - æ¯æ—¥æ­¥æ•°\", fontsize=14)\nax2.set_ylabel(\"æ•°å€¼ (åƒæ­¥)\")\nax2.set_xlabel(\"æ—¥æœŸ\")\nax2.set_xticks(range(len(days)))\nax2.set_xticklabels(days, rotation=45, ha=\"right\")  # æ—‹è½¬xè½´æ ‡ç­¾ä»¥ä¾¿é˜…è¯»\nax2.grid(axis=\"y\", linestyle=\"--\", alpha=0.7)\nax2.set_ylim(0, max(values) * 1.1)\n\n# --- æ˜¾ç¤ºå›¾å½¢ ---\nplt.tight_layout()  # è°ƒæ•´å­å›¾é—´è·\nplt.show()\n</code></pre>\n\n<p><img alt=\"\" src=\"https://img2024.cnblogs.com/blog/83005/202601/83005-20260110084120492-216729079.png\" /></p>\n<p>è¿™ä¸ªç¤ºä¾‹ä½¿ç”¨äº†20ä¸ªæ•°æ®ç±»åˆ«ï¼ˆDay 1 åˆ° Day 20ï¼‰ã€‚</p>\n<p>ä½ å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æ¡å½¢å›¾ä¸­ï¼Œè®¸å¤šè“è‰²çš„æ¡å½¢ç´§å¯†åœ°æ’åˆ—åœ¨ä¸€èµ·ï¼Œè§†è§‰ä¸Šæ˜¾å¾—æœ‰äº›æ‹¥æŒ¤ã€‚</p>\n<p>è€Œåœ¨æ£’æ£’ç³–å›¾ä¸­ï¼Œçº¿æ¡å’Œåœ†ç‚¹ä½¿å¾—æ•°æ®ç‚¹ä¹‹é—´çš„å…³ç³»æ›´åŠ æ¸…æ™°ï¼Œæ•´ä½“è§†è§‰æ•ˆæœæ›´è½»ç›ˆï¼Œæ›´å®¹æ˜“æ¯”è¾ƒå„ä¸ªæ•°å€¼çš„å¤§å°å’Œè¯†åˆ«æ¨¡å¼ã€‚</p>\n<h2 id=\"é€‚åˆä¼ ç»Ÿæ¡å½¢å›¾çš„åœºæ™¯\">é€‚åˆä¼ ç»Ÿæ¡å½¢å›¾çš„åœºæ™¯</h2>\n<pre><code class=\"language-python\"># åˆ›å»ºæ›´é€‚åˆæ¡å½¢å›¾çš„æµ‹è¯•æ•°æ®\n# æ¨¡æ‹ŸæŸå…¬å¸è¿ç»­12ä¸ªæœˆçš„é”€å”®é¢ï¼ˆå•ä½ï¼šä¸‡å…ƒï¼‰\nmonths = [\n    \"1æœˆ\",\n    \"2æœˆ\",\n    \"3æœˆ\",\n    \"4æœˆ\",\n    \"5æœˆ\",\n    \"6æœˆ\",\n    \"7æœˆ\",\n    \"8æœˆ\",\n    \"9æœˆ\",\n    \"10æœˆ\",\n    \"11æœˆ\",\n    \"12æœˆ\",\n]\n# ç”Ÿæˆæœ‰ä¸€å®šè¶‹åŠ¿å’Œæ³¢åŠ¨çš„é”€å”®é¢æ•°æ®ï¼Œä¾‹å¦‚æœ‰å­£èŠ‚æ€§é«˜å³°\nsales = [120, 110, 135, 140, 155, 170, 185, 180, 160, 150, 145, 165]\n\n# --- åˆ›å»ºå­å›¾ ---\nfig, (ax1, ax2) = plt.subplots(1, 2, figsize=(16, 6))\n\n# --- ç»˜åˆ¶æ¡å½¢å›¾ (å·¦å›¾) ---\nbars = ax1.bar(months, sales, color=\"lightsteelblue\", edgecolor=\"black\", linewidth=0.7)\nax1.set_title(\"æ¡å½¢å›¾ (Bar Chart - æœˆä»½é”€å”®é¢)\", fontsize=14)\nax1.set_ylabel(\"é”€å”®é¢ (ä¸‡å…ƒ)\")\nax1.set_xlabel(\"æœˆä»½\")\nax1.grid(axis=\"y\", linestyle=\"--\", alpha=0.7)\n# åœ¨æ¡å½¢å›¾ä¸Šæ·»åŠ æ•°å€¼æ ‡ç­¾\nfor bar, s in zip(bars, sales):\n    height = bar.get_height()\n    ax1.text(\n        bar.get_x() + bar.get_width() / 2.0,\n        height + 2,\n        f\"{s}\",\n        ha=\"center\",\n        va=\"bottom\",\n        fontsize=9,\n    )\n\n# --- ç»˜åˆ¶æ£’æ£’ç³–å›¾ (å³å›¾) ---\nax2.vlines(x=range(len(months)), ymin=0, ymax=sales, color=\"gray\", linewidth=2)\nax2.scatter(x=range(len(months)), y=sales, color=\"coral\", s=50, zorder=3)\nfor i, s in enumerate(sales):\n    ax2.text(i, s + 3, f\"{s}\", ha=\"center\", va=\"bottom\", fontsize=9)\n\nax2.set_title(\"æ£’æ£’ç³–å›¾ (Lollipop Chart - æœˆä»½é”€å”®é¢)\", fontsize=14)\nax2.set_ylabel(\"é”€å”®é¢ (ä¸‡å…ƒ)\")\nax2.set_xlabel(\"æœˆä»½\")\nax2.set_xticks(range(len(months)))\nax2.set_xticklabels(months, rotation=45)  # æ—‹è½¬xè½´æ ‡ç­¾ä»¥é˜²é‡å \nax2.grid(axis=\"y\", linestyle=\"--\", alpha=0.7)\nax2.set_ylim(0, max(sales) * 1.1)\n\n# --- æ˜¾ç¤ºå›¾å½¢ ---\nplt.tight_layout()\nplt.show()\n</code></pre>\n\n<p><img alt=\"\" src=\"https://img2024.cnblogs.com/blog/83005/202601/83005-20260110084120515-917001944.png\" /></p>\n<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæ•°æ®ä»£è¡¨çš„æ˜¯è¿ç»­çš„æœˆä»½ï¼Œæ•°å€¼æœ¬èº«ä»£è¡¨çš„æ˜¯é”€å”®é¢ï¼Œè¿™æ˜¯ä¸€ä¸ªâ€œé‡â€çš„æ¦‚å¿µã€‚</p>\n<p>æ¡å½¢å›¾çš„å®å¿ƒå—èƒ½è®©äººç«‹åˆ»æ„Ÿå—åˆ°å“ªä¸ªæœˆä»½çš„é”€å”®é¢æ›´é«˜ï¼Œæ•´ä½“çš„åˆ†å¸ƒå’Œå¯¹æ¯”å…³ç³»ä¸€ç›®äº†ç„¶ã€‚</p>\n<p>è€Œæ£’æ£’ç³–å›¾è™½ç„¶ä¹Ÿå±•ç¤ºäº†æ•°æ®ï¼Œä½†çº¿æ¡å’Œåœ†ç‚¹çš„ç»„åˆåœ¨è§†è§‰ä¸Šä¸å¦‚å®å¿ƒæ¡å½¢é‚£æ ·èƒ½ç›´æ¥ä¼ è¾¾â€œé‡â€çš„æ„Ÿè§‰ï¼Œå°¤å…¶æ˜¯åœ¨æ•°å€¼å·®å¼‚ä¸æ˜¯ç‰¹åˆ«å·¨å¤§æ—¶ï¼Œå¯¹æ¯”æ•ˆæœä¼šç¨é€Šäºæ¡å½¢å›¾ã€‚</p>\n<h1 id=\"æ€»ç»“\">æ€»ç»“</h1>\n<p><strong>æ£’æ£’ç³–å›¾</strong>å°±åƒæ•°æ®å¯è§†åŒ–ä¸–ç•Œä¸­çš„\"å°‘å³æ˜¯å¤š\"å“²å­¦ä½“ç°ã€‚</p>\n<p>å®ƒä¸æ˜¯è¦å–ä»£ä¼ ç»Ÿæ¡å½¢å›¾ï¼Œè€Œæ˜¯ä¸ºæ•°æ®å¯è§†åŒ–å·¥å…·ç®±å¢åŠ äº†ä¸€ä¸ªæœ‰ä»·å€¼çš„é€‰é¡¹ã€‚</p>\n<p>å°±åƒä¸åŒçš„ç”»ç¬”é€‚åˆä¸åŒçš„ç»˜ç”»é£æ ¼ï¼Œä¸åŒçš„å›¾è¡¨ç±»å‹ä¹Ÿé€‚åˆä¸åŒçš„æ•°æ®æ•…äº‹ã€‚</p>\n<p><strong>æ£’æ£’ç³–å›¾</strong>çš„çœŸæ­£ä¼˜åŠ¿åœ¨äºå®ƒæ”¹å˜äº†æ•°æ®çš„<strong>\"è®²è¿°æ–¹å¼\"</strong>ã€‚</p>\n<p>å®ƒä¸è¯´ï¼š\"è¿™æ˜¯æ‰€æœ‰ä¿¡æ¯ï¼Œä½ è‡ªå·±æ‰¾é‡ç‚¹\"ï¼Œè€Œæ˜¯è¯´ï¼š\"çœ‹è¿™é‡Œï¼Œè¿™äº›æ˜¯å…³é”®ç‚¹\"ã€‚</p>\n<p>è¿™ç§ç„¦ç‚¹å¯¼å‘çš„ç‰¹æ€§ï¼Œä½¿å¾—æ£’æ£’ç³–å›¾åœ¨ç°ä»£å¿«èŠ‚å¥çš„æ•°æ®æ²Ÿé€šä¸­è¶Šæ¥è¶Šå—æ¬¢è¿ã€‚</p>\n<p>è®¾è®¡å¯è§†åŒ–æ—¶ï¼Œæˆ‘ä»¬ä¸å¦¨é—®é—®è‡ªå·±ï¼šæˆ‘æƒ³è¦è§‚ä¼—é¦–å…ˆçœ‹åˆ°ä»€ä¹ˆï¼Ÿå¦‚æœæ˜¯ç²¾ç¡®çš„æ•°å€¼ç‚¹å’Œæ¸…æ™°çš„æ’åï¼Œé‚£ä¹ˆæ£’æ£’ç³–å›¾å¯èƒ½æ˜¯ä½ çš„ç†æƒ³é€‰æ‹©ã€‚</p>\n\n</div>\n<div class=\"clear\"></div>\n\n            </div>\n            <div class=\"postDesc\">posted @ \n<span id=\"post-date\">2026-01-10 08:42</span>&nbsp;\n<a href=\"https://www.cnblogs.com/wang_yb\">wang_yb</a>&nbsp;\né˜…è¯»(<span id=\"post_view_count\">255</span>)&nbsp;\nè¯„è®º(<span id=\"post_comment_count\">0</span>)&nbsp;\n&nbsp;\n<a href=\"\">æ”¶è—</a>&nbsp;\n<a href=\"\">ä¸¾æŠ¥</a>\n</div>"
    }
  ]
}