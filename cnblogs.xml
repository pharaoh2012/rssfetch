<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åå®¢å­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2026-01-20T01:17:41.083Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åå®¢å­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ Sdcb Chats 1.8ï¼åä¸æ¬¡åºå±éæï¼å½»åºå°æ¨¡åæä¾åè§£è¦ ]]></title>
    <link>https://www.cnblogs.com/sdcb/p/19503012/20260119-chats-180</link>
    <guid>db2ffdaaa3e6d5ba4590b215b6a2ce4d</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/sdcb/p/19503012/20260119-chats-180" title="åå¸äº 2026-01-20 08:45">
    <span role="heading" aria-level="2">Sdcb Chats 1.8ï¼åä¸æ¬¡åºå±éæï¼å½»åºå°æ¨¡åæä¾åè§£è¦</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>è¿æ¯åä¸ç¯è¡¥æ¡£æç« ï¼Chatså·²ç»åå¸äº1.10ï¼ä½2025å¹´11æ5æ¥åå¸ç1.8çæ¬å¯¹æä¸ªäººæ¥è¯´æä¹éå¡ï¼å ä¸ºå®å½»åºæ¹åäºé¡¹ç®å¯¹âæ¨¡åæä¾åâçæ¯ææ¹å¼ï¼ä»âåæ­»å¨ä»£ç éâåæäºâå®å¨éç½®åâï¼ä¸ºåç»­çå¯ç»´æ¤æ§åæ©å±æ§æä¸äºåå®åºç¡ã</p>
<p>å¦æä½ è¿ä¸äºè§£ <strong>Sdcb Chats</strong>ï¼ç®åè¯´ï¼è¿æ¯ä¸ä¸ªæ¯æå¤å®¶ä¸»æµæ¨¡åæå¡åç AI ç½å³ãå®ä¸åªè½è®©ä½ å¨ä¸ä¸ªç»ä¸çé¢éèåç®¡çæææ¨¡åï¼åæ¶ä¹å¼å®¹æ å API åè®®ï¼æ¯æ Docker ä¸é®é¨ç½²ã</p>
<p>è¿ç¯æç« èè <strong>Chats 1.8 ç³»åï¼1.8.0 + 1.8.1ï¼</strong>ãå®ä¸åâå ä¸ä¸ªæ°æé®âé£æ ·è½»æ¾ï¼èæ¯åäºå¤§éâå°åºå·¥ç¨âï¼æâæ¨¡åæä¾åæ¯æâä»éæåèè¡¨è¿ç§»å°äºæ¨¡åå®ä¾æ¬èº«ï¼å¹¶ä¸è¡¥ä¸äºå¤§éç¨æ·è½ç´æ¥æç¥å°çä½éªåçº§ã</p>
<hr>
<h2 id="18-çæ ¸å¿ä»éæåèè¡¨å°æ¨¡åå®ä¾çº§éç½®">1.8 çæ ¸å¿ï¼ä»âéæåèè¡¨âå°âæ¨¡åå®ä¾çº§éç½®â</h2>
<p>å° chats 1.7.2 åå¸ä»¥æ¥ï¼å·²ç»æ¯ææ 18 ä¸ªæ¨¡åæä¾åï¼æå½æ¶ä¸ºè¿ 18 å®¶æ¨¡åæä¾åæ¯ä¸ä¸ªæ¨¡åé½åäºä¿¡æ¯åæ°æ®è·è¸ªï¼æ¾å°äº ModelReference è¡¨ï¼è¿ä¸ªè¡¨æ 297 æ¡è®°å½äºï¼åå¤§æ¨¡åæä¾åå·å¤§æ¨¡åçéåº¦è¶æ¥è¶å¿«ï¼æ¨¡åæ´æ°æ¢ä»£ä¹è¶æ¥è¶é¢ç¹ï¼è¦å¯æç»­å°ç»´æ¤è¿ä¸ªè¡¨æ¯éå¸¸å°é¾çã</p>
<p><img src="https://img2024.cnblogs.com/blog/233608/202601/233608-20260119170804080-2002986397.png" alt="" loading="lazy"></p>
<p>é¤æ­¤ä¹å¤ï¼ä»£ç ä¸­è¿æå¤§éæ ¹æ®æ¨¡ååç§°åæ­»çé»è¾ï¼è¿å¯¼è´è¶æ¥è¶é¾ä»¥ç»´æ¤ãæåé¡¹ç®çåä½ç»´æ¤èè®¨è®ºè¿è®¸å¤æ¬¡ï¼æè®¸å¤ä¸åçæè§ï¼æçè¯´å¯ä»¥ç»§ç»­æ²¿ç¨è¿ç§åæ­»çæ¹å¼ï¼æçè¯´åºè¯¥åæéç½®åçæ¹å¼ï¼ä½æè§å¾å¯æç»­çç»´æ¤è½åææ¯æå¯¹ chats é¡¹ç®æéè¦çæ¿è¯ºï¼æä»¥æå³å®å¨ 1.8 çæ¬éå½»åºéææ¨¡åæä¾åçæ¯ææ¹å¼ï¼åæå®å¨éç½®åçæ¹å¼ï¼è¿æ ·æªæ¥æ è®ºæ¯æ°å¢æ¨¡åæä¾åï¼è¿æ¯è°æ´å·²ææ¨¡åçæ¯æé»è¾ï¼é½å¯ä»¥éè¿éç½®æ¥å®æï¼èä¸éè¦å¨ä»£ç ãè¿ä¸ªæ¹å¨è½ç¶å¨ç­æåå¢å äºä¸å°å·¥ä½éï¼ä½æç¸ä¿¡ä»é¿è¿æ¥çï¼è¿ä¼å¤§å¤§æåé¡¹ç®çå¯ç»´æ¤æ§åæ©å±æ§ã</p>
<p>æ´ææ¯ä¸ç¹å°è¯´ï¼<strong>1.8.0 æâæ¨¡åè½åéç½®âä» <code>ModelReference</code> è¿ç§éæåèè¡¨ï¼è¿ç§»å°äº <code>Model</code>ï¼æ¨¡åå®ä¾ï¼æ¬èº«</strong>ââæ¨¡åä¸åä¾èµâå¼ç¨ä¸æ¡åºå®æ¨¡æ¿âï¼èæ¯æ¯ä¸ªæ¨¡åå®ä¾é½æ¥æå®æ´ãå¯ç¼è¾ãå¯éªè¯çè½åéç½®ã</p>
<p><img src="https://img2024.cnblogs.com/blog/233608/202601/233608-20260119170804780-1304764941.png" alt="" loading="lazy"></p>
<h3 id="18-ä¸ªæ¨¡åè½åå­æ®µè½å°-modelç»äºè½çæ­£æå®ä¾å®å¶">18 ä¸ªâæ¨¡åè½åå­æ®µâè½å° Modelï¼ç»äºè½çæ­£âæå®ä¾å®å¶â</h3>
<p>è¿æ¬¡è¿ç§»ä¸æ¯å£å¤´ä¸çâéç½®åâï¼èæ¯å®æå®çæ°æ®åºåæ´ï¼å¨ <code>src/scripts/db-migration/1.8/1.8.0.sql</code> éï¼<code>Model</code> è¡¨æ°å¢äºä¸æ¹è½åå­æ®µï¼AllowSearch/AllowVision/AllowToolCall/æ¸©åº¦èå´/ä¸ä¸æçªå£/æå¤§è¾åº token/æ¨çéé¡¹/å¾çå°ºå¯¸/API ç±»åç­ï¼ï¼å¹¶ä¸æ¸çäºå¤å¼ éæåèè¡¨ï¼<code>ModelReference</code>ã<code>ModelProvider</code>ã<code>Tokenizer</code>ã<code>CurrencyRate</code>ã<code>ReasoningResponseKind</code> â¦â¦ï¼ã</p>
<p><img src="https://img2024.cnblogs.com/blog/233608/202601/233608-20260119170805164-1145274511.png" alt="" loading="lazy"></p>
<h3 id="ç¬¬ä¸ç§-api-ç±»åimagegenerationå¾åæ¨¡åç»äºåæ­£è¨é¡º">ç¬¬ä¸ç§ API ç±»åï¼ImageGenerationï¼å¾åæ¨¡åç»äºâåæ­£è¨é¡ºâï¼</h3>
<p>1.8.0 æ°å¢äº <code>ApiType.ImageGeneration</code>ï¼æå¾åçæä»âåå¼ºå¼å®¹âçé»è¾éæäºåºæ¥ï¼ChatCompletion / Response / ImageGeneration ä¸åå¤©ä¸ï¼<code>ChatFactory</code> ä¹æ <code>ApiType</code> åæ´¾å°ä¸åå®ç°ã</p>
<p><img src="https://img2024.cnblogs.com/blog/233608/202601/233608-20260119170805662-834816800.avif" alt="" loading="lazy"></p>
<h3 id="æ¨¡åéªè¯æ¡æ¶æå¡«ééç½®çåæåå µä½">æ¨¡åéªè¯æ¡æ¶ï¼æâå¡«ééç½®âçåæåå µä½</h3>
<p>å½è½åéç½®åæâæ¯ä¸ªæ¨¡åå®ä¾ 18 ä¸ªå­æ®µé½å¯ç¼è¾âä¹åï¼é ç¨æ·èªè§æ¾ç¶ä¸ç°å®ãæä»¥ 1.8.0 å äº <code>UpdateModelRequest</code> çéªè¯æ¡æ¶ï¼åå«èªå®ä¹éªè¯ç¹æ§ååæµï¼ï¼ææ¸©åº¦èå´ãtoken ä¸éãå­æ®µç»ååæ³æ§é½ç³»ç»åäºã</p>
<p><img src="https://img2024.cnblogs.com/blog/233608/202601/233608-20260119170806121-2000732051.avif" alt="" loading="lazy"></p>
<h3 id="å¿«éæ·»å æ¨¡åæéç½®å¾å¤å­æ®µçæ©æ¦éä¸æ¥">å¿«éæ·»å æ¨¡åï¼æâéç½®å¾å¤å­æ®µâçæ©æ¦éä¸æ¥</h3>
<p>ä¸ºäºå¯¹å²âå­æ®µåå¤å¯¼è´çéç½®ææ¬âï¼1.8.0 å¨åå°åäº Quick Add/æ¹éæ·»å æ¨¡åçæµç¨ä¼åï¼å¹¶è¡¥ä¸äºé»è®¤éç½®ï¼<code>src/FE/constants/modelDefaults.ts</code> éè½çå°ä¸äºé»è®¤è½å/èå´ç­ç¥ï¼ã</p>
<p><img src="https://img2024.cnblogs.com/blog/233608/202601/233608-20260119170806489-55622397.avif" alt="" loading="lazy"></p>
<h3 id="å¾åé¾è·¯éæä»æåè§£æå¨å°-imagesharp--å¨å±é¢è§">å¾åé¾è·¯éæï¼ä»âæåè§£æå¨âå° ImageSharp + å¨å±é¢è§</h3>
<p>1.8.0 è¿æå¾åå¤çè¿æ¡é¾è·¯æ´ä½éæäºä¸éï¼åç«¯ç¨ ImageSharp æ¿ä»£äºæåè§£æ/åæ¢é»è¾ï¼ä»£ç éç´æ¥å°äºä¸å¤§æªï¼ï¼åç«¯æ°å¢äºå¨å± <code>ImagePreview</code> ç»ä»¶ï¼æ¯æç¼©æ¾å¨ç»ãé®çå¯¼èªåæ´é¡ºæ»çæµè§ä½éªã</p>
<p><img src="https://img2024.cnblogs.com/blog/233608/202601/233608-20260119170806876-1841292448.avif" alt="" loading="lazy"></p>
<h3 id="éª¨æ¶å±ä¸æéå è½½æç­å¾åæå¯é¢æ">éª¨æ¶å±ä¸æéå è½½ï¼æâç­å¾âåæâå¯é¢æâ</h3>
<p>1.8.0 å¨èå¤©æ¶æ¯å è½½ãç®¡çåå°çæ¨¡åç®¡çç­é¡µé¢è¡¥äºéª¨æ¶å±ï¼å¹¶åäºæéå è½½/æ¸è¿å¼æ¸²æï¼è¿ä¸æ¯æ§è½âåå¿«äºå¤å° msâçé®é¢ï¼èæ¯ç¨æ·æç¥ä¸ä»âå¡ä½äºâåæâæ­£å¨å è½½âã</p>
<p><img src="https://img2024.cnblogs.com/blog/233608/202601/233608-20260119170807288-1746826065.avif" alt="" loading="lazy"></p>
<hr>
<h2 id="181å¨æ¶æåå¥½ä¹åæä½éªä¹æ å°ä½">1.8.1ï¼å¨âæ¶æåå¥½âä¹åï¼æâä½éªä¹æ å°ä½â</h2>
<p>å¦æè¯´ 1.8.0 æ¯å°åºï¼é£ä¹ 1.8.1 æ´åæ¯æå¸¸ç¨è·¯å¾é½éæ°æç£¨äºä¸éï¼æéãæ¨çåå®¹å±ç¤ºãæä»¶é¢è§ãèå¤©åè¡¨æ§è½â¦â¦è¿äºé½æ¯ä½ æ¯å¤©ç¨ Chats æ¶è½ç«å»æç¥å°çååã</p>
<h3 id="å¨æ°çç¨æ·-æ¨¡åæéç®¡çç»äºè½è§æ¨¡åææäº">å¨æ°çâç¨æ·-æ¨¡åæéâç®¡çï¼ç»äºè½è§æ¨¡åææäº</h3>
<p>1.8.1 æ°å¢äº <code>/admin/user-models</code>ï¼æç¨æ·ç»´åº¦ç®¡çï¼ï¼åæ¶å¨æ¨¡åç®¡çé¡µä¹å¢å äºâææ¨¡åç»´åº¦ç®¡çç¨æ·âçå¥å£ãæ´å³é®çæ¯å®çäº¤äºè®¾è®¡ï¼<strong>URL ä½ä¸ºç¶æå¯ä¸æ°æ®æº</strong>ï¼ç­é/æç´¢/å±å¼ç¶æé½è½åäº«ãå·æ°ä¸ä¸¢ã</p>
<p><img src="https://img2024.cnblogs.com/blog/233608/202601/233608-20260119170807703-1850645716.png" alt="" loading="lazy"><br>
<img src="https://img2024.cnblogs.com/blog/233608/202601/233608-20260119170808024-210681632.avif" alt="" loading="lazy"></p>
<h3 id="æ¨çåå®¹çå½å¨æè¿½è¸ª--èªå¨æå å±å¹ç»äºä¸è¢«æèå æ»¡">æ¨çåå®¹âçå½å¨æè¿½è¸ª + èªå¨æå âï¼å±å¹ç»äºä¸è¢«æèå æ»¡</h3>
<p>æ¨çæ¨¡åè¶æ¥è¶å¤ï¼æ¨çåå®¹è¶æ¥è¶é¿ï¼UI ä¸è½åªâå±ç¤ºâââè¿å¾å¸®ç¨æ·âç®¡çæ³¨æåâã1.8.1 ç» <code>ReasoningContent</code> å¢å äº <code>finished</code> è¯­ä¹ï¼æ¨çè¿è¡ä¸­èªå¨å±å¼ãç»æåèªå¨æå ï¼å·¥å·è°ç¨åºåä¹åäºèªå¨æå ä¸å¨ç»ï¼ä¸å°éç¨æ·æå¨æä½ä¼åçº§ã</p>
<p><img src="https://img2024.cnblogs.com/blog/233608/202601/233608-20260119170808347-1492521170.avif" alt="" loading="lazy"></p>
<h3 id="filepreview-ç»ä»¶éæéä»¶å±ç¤ºä¸åååä¸å¥">FilePreview ç»ä»¶éæï¼éä»¶å±ç¤ºä¸åâååä¸å¥â</h3>
<p>1.8.1 å¼å¥äºç»ä¸ç <code>FilePreview</code> ç»ä»¶ï¼å¾ç/è§é¢/é³é¢ç´æ¥é¢è§ï¼ææ¡£ç±»æ¾ç¤ºå¾æ +æä»¶å+ä¸è½½æé®ï¼åæ¶åç«¯ææä»¶å¤çä» Controller ä¸æ²å°äº Service å±ï¼ç±»åæ£æ¥ä¹æ´éä¸­ã</p>
<p><img src="https://img2024.cnblogs.com/blog/233608/202601/233608-20260119170808792-1929118479.avif" alt="" loading="lazy"></p>
<h3 id="èå¤©åè¡¨ç¼å­æå¼å°±å¿«ä¸ç¹å·æ°ä¹ç¨³ä¸ç¹">èå¤©åè¡¨ç¼å­ï¼æå¼å°±å¿«ä¸ç¹ï¼å·æ°ä¹ç¨³ä¸ç¹</h3>
<p>èå¤©åè¡¨ä¸æ¯ä»ä¹âé·åè½âï¼ä½å®å³å®äºä½ æ¯å¤©æå¼ Chats çç¬¬ä¸æåã1.8.1 éæ°å¢äº <code>chatCache.ts</code>ï¼ä»¥ç¨æ·åç»å®ç¼å­é®ã24 å°æ¶è¿æãç»åºèªå¨æ¸çï¼å¹¶éåå¹¶è¡ API å è½½ï¼è®©é¦å±æ´âææâã</p>
<p><img src="https://img2024.cnblogs.com/blog/233608/202601/233608-20260119170809126-410299424.png" alt="" loading="lazy"></p>
<h3 id="æä¾åä¾§tokenpony-å å¥azure-openai-æ´åä¸º-azure-ai-foundry">æä¾åä¾§ï¼TokenPony å å¥ï¼Azure OpenAI æ´åä¸º Azure AI Foundry</h3>
<p>1.8.1 æ°å¢äº TokenPonyï¼ID=19ï¼ï¼åæ¶æ Azure OpenAI çå½åæ´æ°ä¸º Azure AI Foundryï¼æä¸¾å¼ä¸åï¼å±äºä»£ç å±éå½åï¼ï¼å¹¶è¡¥äºä¸ä¸ªå°è¿ç§»èæ¬æ¸ç Azure Host éç <code>api-version</code> åæ°ï¼<code>src/scripts/db-migration/1.8/1.8.1.sql</code>ã</p>
<p><img src="https://img2024.cnblogs.com/blog/233608/202601/233608-20260119170809460-172595794.png" alt="" loading="lazy"></p>
<h3 id="å¼å®¹æ§ä¸ç¨³å®æ§openai-26-åçº§åæ¨çåå®¹è§£æä¿®å¤">å¼å®¹æ§ä¸ç¨³å®æ§ï¼OpenAI 2.6 åçº§åæ¨çåå®¹è§£æä¿®å¤</h3>
<p>1.8.1 è¿å¤çäºä¸ä¸ªå¾âç°å®âçé®é¢ï¼OpenAI å®¢æ·ç«¯åçº§å° 2.6.0 åï¼æ¨çåå®¹çè§£æ/è§£ç åºç°å¼å®¹æ§é®é¢ï¼å¯¼è´é¨åæ¨çæ®µæ æ³æ­£ç¡®è¯»åãè¿ä¸ªç¹ä¸æ¾ç¼ï¼ä½å®ç´æ¥å½±åä½ å¯¹æ¨çæ¨¡åçä¿¡ä»»æï¼æä»¥ä¹è¢«çº³å¥ 1.8.1 éä¿®æäºã</p>
<hr>
<h2 id="åçº§æé18-ç³»åéè¦æå¨è·-sql-server-è¿ç§»èæ¬">åçº§æéï¼1.8 ç³»åéè¦æå¨è· SQL Server è¿ç§»èæ¬</h2>
<p>å 1.7 ä¸æ ·ï¼Sdcb Chats çæ°æ®åºåæ´ <strong>ä¸æ¯æèªå¨æ°æ®è¿ç§»</strong>ãåçº§å° 1.8 æ¶è¯·å¡å¿åå¤ä»½æ°æ®åºï¼å¹¶æå¨æ§è¡è¿ç§»èæ¬ï¼</p>
<ul>
<li>1.8.0ï¼<code>src/scripts/db-migration/1.8/1.8.0.sql</code></li>
<li>1.8.1ï¼<code>src/scripts/db-migration/1.8/1.8.1.sql</code>ï¼æ¸ç Azure AI Foundry ç Host åæ°ï¼</li>
</ul>
<p>å¦æä½ ç¨çæ¯ SQLite/Postgresâ¦â¦èè§ç©ï¼æèæ¬ä¸¢ç» AI åæ¹ï¼åè¾¹è·è¾¹ä¿®ï¼æèè½æ¥åå åºçè¯ï¼è®© Chats å¯å¨æ¶èªå¨å»ºæ°è¡¨ç»æä¹è¡ã</p>
<hr>
<p>æè°¢å¤§å®¶çéè¯»ï¼åæ¬¢çæåè¯·ç»æçGithubé¡¹ç®ä¸ä¸ªstarï¼<a href="https://github.com/sdcb/chats" target="_blank" rel="noopener nofollow">https://github.com/sdcb/chats</a><br>
å¦æä½ å¥½å¥çè¯ï¼è¿æ¯å®æ´çæ´æ°æ¥å¿ï¼<a href="https://github.com/sdcb/chats/blob/main/doc/zh-CN/release-notes/README.md" target="_blank" rel="noopener nofollow">https://github.com/sdcb/chats/blob/main/doc/zh-CN/release-notes/README.md</a><br>
æä»ä¹æ³æ³ä¹æ¬¢è¿å¨è¯è®ºåºçè¨äº¤æµï¼ä¹æ¬¢è¿å å¥æç Chatså¾®ä¿¡ç¾¤ï¼<br>
<img src="https://io.starworks.cc:88/cv-public/2026/chats-wxg-qr.png" alt="" loading="lazy"></p>
<p>ï¼å¦æä½ æ´åæ¬¢ç¨QQï¼å¯ä»¥ç¨QQç¾¤ï¼<strong>498452653</strong>ï¼æä»¬ä¸èµ·æ¢ç´¢æ´å¤AIææ¯ç¡¬æ ¸ç©æ³ã</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-20 08:45">2026-01-20 08:45</span>&nbsp;
<a href="https://www.cnblogs.com/sdcb">.NETéªæä½</a>&nbsp;
éè¯»(<span id="post_view_count">50</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19503012);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19503012', targetLink: 'https://www.cnblogs.com/sdcb/p/19503012/20260119-chats-180', title: 'Sdcb Chats 1.8ï¼åä¸æ¬¡åºå±éæï¼å½»åºå°æ¨¡åæä¾åè§£è¦' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ èçåºç¡(ä¹)ï¼è¯¦è§£èç GAPãSDPãATTãGATT çåå²èæ¯ä¸è®¾è®¡å²å­¦ ]]></title>
    <link>https://www.cnblogs.com/liwen01/p/19492724</link>
    <guid>56c817d4cc9b383e432c3ca1c6e92c9a</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/liwen01/p/19492724" title="åå¸äº 2026-01-20 08:42">
    <span role="heading" aria-level="2">èçåºç¡(ä¹)ï¼è¯¦è§£èç GAPãSDPãATTãGATT çåå²èæ¯ä¸è®¾è®¡å²å­¦</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p class="js_darkmode__1" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__2">liwen01 2026.01.01</strong></p>
<h2 class="js_darkmode__3" data-tool="mdniceç¼è¾å¨"><span class="js_darkmode__4">åè¨</span></h2>
<p class="js_darkmode__5" data-tool="mdniceç¼è¾å¨">æä»¬ç°å¨ä½¿ç¨çèçï¼å®ä¸æ¯ä¸è¹´èå°±çï¼å®ç»åäºä»<strong class="js_darkmode__6">çµç¼æ¿ä»£è</strong>ï¼ç»å¸èçï¼å°&nbsp;<strong class="js_darkmode__7">ä¸ç©äºèåºç³</strong>ï¼ä½åèèçï¼çæ¼åã</p>
<p class="js_darkmode__8" data-tool="mdniceç¼è¾å¨">è¦çè§£&nbsp;<code class="js_darkmode__9">SDP</code>ã<code class="js_darkmode__10">GAP</code>ã<code class="js_darkmode__11">ATT</code>ã<code class="js_darkmode__12">GATT</code>&nbsp;è¿äºç±»ä¼¼éå çåè®®ï¼éè¦åå°èçææ¯åå±çåå²èæ¯åè®¾è®¡å²å­¦ã</p>
<h2 class="js_darkmode__13" data-tool="mdniceç¼è¾å¨"><span class="js_darkmode__14">ï¼ä¸ï¼åå²èæ¯</span></h2>
<h3 class="js_darkmode__15" data-tool="mdniceç¼è¾å¨"><span class="js_darkmode__16">ï¼1ï¼æ©ææ çº¿éä¿¡çæ¥ç§æå½</span></h3>
<p class="js_darkmode__17" data-tool="mdniceç¼è¾å¨">å¨èçæ åè¯çä¹åï¼ä¸ååå®¶å¯¹<strong class="js_darkmode__18">å¦ä½åç°å¯¹æ¹</strong>ã<strong class="js_darkmode__19">å¦ä½å å¯</strong>ã<strong class="js_darkmode__20">å¦ä½è¿æ¥</strong>æä¸åççè§£ãå¦ææ²¡æä¸ä¸ªç»ä¸çæ¡æ¶ï¼A åå®¶çææºå¯è½æ ¹æ¬æä¸å° B åå®¶çè³æºã</p>
<p class="js_darkmode__21" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__22">GAP</strong>&nbsp;(Generic Access Profile) çå­å¨æ¯ä¸ºäºå®ä¹<strong class="js_darkmode__23">éç¨çè¡ä¸ºåå</strong>ï¼è®¾è®¡ç®çæä¸¤ä¸ªï¼</p>
<p class="js_darkmode__24" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__25">ï¼Aï¼æ ååæµç¨</strong>ï¼å®è§å®äºææèçè®¾å¤å¿é¡»å¦ä½ææå¼ï¼å¹¿æ­ï¼ãå¦ä½äº¤æ¢åçï¼åç°ï¼ä»¥åå¦ä½å»ºç«å¤äº¤å³ç³»ï¼è¿æ¥ï¼ã</p>
<p class="js_darkmode__26" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__27">ï¼Bï¼è§£è¦</strong>ï¼å®è®©ä¸å±åºç¨ä¸éè¦å³å¿åºå±çç©çè·³é¢æé¾è·¯å±ç¶æè½¬æ¢ï¼åªéç¥éèªå·±æ¯<strong class="js_darkmode__28">ä¸­å¿è®¾å¤</strong>ï¼Centralï¼è¿æ¯&nbsp;<strong class="js_darkmode__29">å¤å´è®¾å¤</strong>ï¼Peripheralï¼ã</p>
<h3 class="js_darkmode__30" data-tool="mdniceç¼è¾å¨"><span class="js_darkmode__31">ï¼2ï¼è§£å³ç»å¸èçä¸å¡ç¹æé®é¢</span></h3>
<img src="https://img2024.cnblogs.com/blog/555985/202601/555985-20260116161205390-1764873844.png" alt="image">
<p class="js_darkmode__33" data-tool="mdniceç¼è¾å¨">ç»å¸èçï¼BR/EDRï¼çè®¾è®¡åè¡·æ¯åä»£åç§çµç¼ï¼ä¸²å£çº¿ãæå°çº¿ãè³æºçº¿ï¼ã</p>
<p class="js_darkmode__34" data-tool="mdniceç¼è¾å¨">å æ­¤ï¼å®æ¿è½½äºéå¸¸å¤çç¹å®åè®®ï¼Profilesï¼ï¼å¦ HFPï¼éè¯ï¼ãA2DPï¼é³ä¹ï¼ãSPPï¼ä¸²å£ï¼ã</p>
<p class="js_darkmode__35" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__36">SDP</strong>&nbsp;(Service Discovery Protocol) å°±æ¯èçä¸çéç<strong class="js_darkmode__37">é»é¡µæå¡</strong>ï¼è®¾è®¡ç®çä¹æä¸¤ä¸ªï¼</p>
<p class="js_darkmode__38" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__39">ï¼Aï¼å¨ææ¥è¯¢ï¼</strong>&nbsp;ç»å¸èçè®¾å¤éå¸¸åè½å¤æï¼å½ææºè¿æ¥é³ç®±æ¶ï¼å®ä¸ç¥éè¿ä¸ªé³ç®±æ¯å¦å¸¦éº¦åé£ï¼HFPï¼ï¼ä¹ä¸ç¥å¶é³è´¨ç­çº§ï¼A2DPï¼ã</p>
<p class="js_darkmode__40" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__41">ï¼Bï¼æéå»ºç«ï¼</strong>&nbsp;éè¿ SDPï¼è®¾å¤å¯ä»¥åæ¥è¯¢å¯¹æ¹æ¯æåªäºæå¡ï¼è·åè¿æ¥è¿äºæå¡æéç<strong class="js_darkmode__42">ç«¯å£å·</strong>ï¼å¦ RFCOMM ééï¼ï¼ç¶ååå»ºç«çæ­£çä¸å¡è¿æ¥ï¼èçäºç³»ç»èµæºã</p>
<h3 class="js_darkmode__43" data-tool="mdniceç¼è¾å¨"><span class="js_darkmode__44">ï¼3ï¼è§£å³BLEæè´åèé®é¢</span></h3>
<img src="https://img2024.cnblogs.com/blog/555985/202601/555985-20260116161608250-1350751949.png" alt="image">
<p class="js_darkmode__46" data-tool="mdniceç¼è¾å¨">2010å¹´å·¦å³ï¼èç 4.0 (BLE) é®ä¸ãæ­¤æ¶çè®¾è®¡ç®æ åäºï¼ä¸åæ¯ä¼ è¾é«å¸¦å®½çé³é¢ï¼èæ¯ä¼ è¾æå°çæ°æ®ï¼å¦æ¸©åº¦ãå¿çï¼ï¼ä¸è¦æ±ä¸é¢çº½æ£çµæ± è½ç¨ä¸å¹´ã</p>
<p class="js_darkmode__47" data-tool="mdniceç¼è¾å¨">ç»å¸èççåè®®æ ï¼åæ¬ SDPï¼å¯¹äºè¿äºå°ä¼ æå¨æ¥è¯´å¤ªéãå¤ªè´¹çµäºã</p>
<p class="js_darkmode__48" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__49">ä¸ºäºæè´ççµï¼èçè®¾è®¡èæåºäº ATT å GATT çç»åï¼</strong></p>
<p class="js_darkmode__50" data-tool="mdniceç¼è¾å¨">ä¼ æå¨æ°æ®éå¸¸éå¸¸ç®åï¼å°±æ¯ä¸ä¸ªæ°å¼ï¼ï¼æ¯å¦æ¸©åº¦æ¹¿åº¦ä¼ æå¨ã</p>
<p class="js_darkmode__51" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__52">ï¼Aï¼ATT (Attribute Protocol)ï¼æç®çæ¬è¿å·¥</strong></p>
<p class="js_darkmode__53" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__54">ATT</strong>&nbsp;å¼äºå¤æçæ¡æï¼å°æææ°æ®ç®åä¸º<strong class="js_darkmode__55">å±æ§ï¼Attributeï¼</strong>ãå®åªè´è´£æç®åçæä½ï¼è¯»ãåãéç¥ãå®åæ¯ä¸ä¸ªé«æçä»åºæ¬è¿å·¥ï¼åªè®¤<strong class="js_darkmode__56">è´§æ¶å·ï¼Handleï¼</strong>ï¼ä¸é®æ°æ®èåçé»è¾ã</p>
<p class="js_darkmode__57" data-tool="mdniceç¼è¾å¨">ä½æ¯ATTçå±æ§ï¼Attributeï¼å¤ªåºå±äºï¼ä¸å  handle å¾é¾ç®¡çï¼æä»¥å°±æäºGATT ã</p>
<p class="js_darkmode__58" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__59">ï¼Bï¼GATT (Generic Attribute Profile)ï¼é»è¾çæ¶æå¸</strong></p>
<p class="js_darkmode__60" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__61">GATT</strong>&nbsp;çç®çæ¯å¨ ATT ä¹ä¸å»ºç«äºä¸å¥å±çº§ç»æï¼Service &gt; Characteristicï¼ï¼æ ATT ç¸å³çå±æ§æåã</p>
<p class="js_darkmode__62" data-tool="mdniceç¼è¾å¨">GATT æ¯å£°æå¼çï¼å®ä¸éè¦å SDP é£æ ·è¿è¡å¤æçå¨æäº¤äºï¼èæ¯éè¿ç®åçå±æ§åè¡¨ç´æ¥åè¯å¯¹æ¹ï¼<strong class="js_darkmode__63">æç 0x0012 è´§æ¶æ¾çæ¯å¿çæ°æ®</strong></p>
<h2 class="js_darkmode__64" data-tool="mdniceç¼è¾å¨"><span class="js_darkmode__65">ï¼äºï¼GAPï¼Generic Access Profileï¼</span></h2>
<img src="https://img2024.cnblogs.com/blog/555985/202601/555985-20260116161618653-435478667.png" alt="image">
<p class="js_darkmode__67" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__68">GAP</strong>ï¼Generic Access Profileï¼éç¨è®¿é®éç½®æä»¶ï¼æ¯èçåè®®æ ä¸­æåºç¡ãæéè¦çéç½®æä»¶ä¹ä¸ã</p>
<p class="js_darkmode__69" data-tool="mdniceç¼è¾å¨">å¯ä»¥æå®çåæ¯èçè®¾å¤ç<strong class="js_darkmode__70">èº«ä»½è¯</strong>å<strong class="js_darkmode__71">å¤äº¤å®</strong>ãå®å®ä¹äºè®¾å¤å¦ä½äºç¸åç°ãå»ºç«è¿æ¥ä»¥åç¡®ä¿åºæ¬çäºæä½æ§ã</p>
<h3 class="js_darkmode__72" data-tool="mdniceç¼è¾å¨"><span class="js_darkmode__73">ï¼1ï¼GAP çæ ¸å¿ä½ç¨</span></h3>
<p class="js_darkmode__74" data-tool="mdniceç¼è¾å¨">ä¸ºç¡®ä¿ä¸åååçè®¾å¤è½å¤äºç¸åç°å¹¶å»ºç«è¿æ¥ï¼GAP çæ ¸å¿ä½ç¨æ4ä¸ªï¼</p>
<p class="js_darkmode__75" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__76">ï¼Aï¼æ¨¡å¼ä¸è¿ç¨ (Modes and Procedures)ï¼</strong>&nbsp;è®¾å¤å¦ä½è¢«åç°ï¼å¹¿æ­ï¼ä»¥åå¦ä½åç°å«äººï¼æ«æï¼ã</p>
<p class="js_darkmode__77" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__78">ï¼Bï¼è§è² (Roles)ï¼</strong>&nbsp;å®ä¹è®¾å¤å¨èçç½ç»ä¸­çèº«ä»½ï¼å¦ææºæ¯ Centralï¼æç¯æ¯ Peripheralï¼ã</p>
<p class="js_darkmode__79" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__80">ï¼Cï¼å®å¨ (Security)ï¼</strong>&nbsp;å®ä¹å®å¨çº§å«åéå¯¹æ¨¡å¼çåºç¡ã</p>
<p class="js_darkmode__81" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__82">ï¼Dï¼æ°æ®æ ¼å¼ (Data Formats)ï¼</strong>&nbsp;å®ä¹å¹¿æ­æ°æ®åæ«æååºæ°æ®çéç¨æ ¼å¼ã</p>
<h3 class="js_darkmode__83" data-tool="mdniceç¼è¾å¨"><span class="js_darkmode__84">ï¼2ï¼GAP åå¤§æ ¸å¿è§è²(Roles)</span></h3>
<p class="js_darkmode__85" data-tool="mdniceç¼è¾å¨">å¨è¿æ¥å»ºç«ä¹åï¼GAP é¦åå®ä¹äºè®¾å¤å¨é¾è·¯å±è¡¨ç°åºç<strong class="js_darkmode__86">èº«ä»½</strong>ãè¿å³å®äºè°è´è´£åä¿¡å·ï¼è°è´è´£æ¾ä¿¡å·ã</p>
<p class="js_darkmode__87" data-tool="mdniceç¼è¾å¨">å¨ä½åèèç (BLE) ä¸­ï¼GAP å®ä¹äºåç§ç¹å®çè§è²ãè¿äºè§è²å³å®äºé¾è·¯å± (Link Layer) çç¶æã</p>
<p class="js_darkmode__88" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__89">ï¼Aï¼Broadcasterï¼å¹¿æ­èï¼ï¼</strong>&nbsp;ä»åéå¹¿æ­æ°æ®ï¼<strong class="js_darkmode__90">ä¸æ¯æ</strong>å»ºç«è¿æ¥ï¼æ¯å¦ï¼æ¸©åº¦ä¼ æå¨ãBeaconãæ­¤æ¶é¾è·¯å±å¤äº Advertising State ç¶æã</p>
<p class="js_darkmode__91" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__92">ï¼Bï¼Observerï¼è§å¯èï¼ï¼</strong>&nbsp;ä»æ«æå¹¿æ­æ°æ®ï¼<strong class="js_darkmode__93">ä¸æ¯æ</strong>åèµ·è¿æ¥ï¼æ¯å¦ï¼ä»ç¨äºæ°æ®ééçç½å³ï¼æ­¤æ¶é¾è·¯å±å¤äº Scanning State ç¶æã</p>
<p class="js_darkmode__94" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__95">ï¼Cï¼Peripheralï¼å¤è®¾ï¼ï¼</strong>&nbsp;åéå¹¿æ­ï¼<strong class="js_darkmode__96">æ¯æ</strong>è¢«è¿æ¥ãéå¸¸æ¯æ°æ®æä¾æ¹ï¼éå¸¸æ¯æ§è½åéãå¯¹åèææçè®¾å¤ï¼æ¯å¦ï¼æºè½æç¯ãå¿çå¸¦ãæºè½éã</p>
<p class="js_darkmode__97" data-tool="mdniceç¼è¾å¨">æ­¤æ¶é¾è·¯å±å¤äºAdvertising / Connection (Slave) ç¶æ</p>
<p class="js_darkmode__98" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__99">ï¼Dï¼Centralï¼ä¸­å¿è®¾å¤ï¼ï¼</strong>&nbsp;æ«æå¹¿æ­ï¼<strong class="js_darkmode__100">åèµ·</strong>è¿æ¥ãéå¸¸æ¯æ§å¶æ¹åæ°æ®å¤çæ¹,ä¸è¬æ¥ææ´å¼ºå¤çè½ååçµéçè®¾å¤,æ¯å¦ï¼æºè½ææºãå¹³æ¿çµèã</p>
<p class="js_darkmode__101" data-tool="mdniceç¼è¾å¨">æ­¤æ¶é¾è·¯å±å¤äºScanning / Connection (Master) ç¶æ</p>
<p class="js_darkmode__102" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__103">æ³¨æ</strong>ï¼ ä¸ä¸ªè®¾å¤å¯ä»¥å¨ä¸åæ¶é´åæ¢ä¸åè§è²ï¼çè³å¨ V5.x ä¸­éè¿å¤éè¿æ¥ææåæ¶æ®æ¼ä¸åè§è²ã</p>
<h3 class="js_darkmode__104" data-tool="mdniceç¼è¾å¨"><span class="js_darkmode__105">ï¼3ï¼GAP çæä½æ¨¡å¼ãè¿ç¨ãè¿æ¥åæ°</span></h3>
<p class="js_darkmode__106" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__107">ï¼Aï¼åç°æ¨¡å¼ (Discoverability Modes)</strong>&nbsp;:æä¸ç§åç°æ¨¡å¼ï¼</p>
<p class="js_darkmode__108" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__109">ä¸å¯è¢«åç°æ¨¡å¼ (Non-Discoverable Mode)ï¼</strong>&nbsp;è®¾å¤ä¸åéå¹¿æ­ï¼æèåéçå¹¿æ­ä¸æ¯æè¢«åç°ï¼ä»ç¨äºç»´æç°æè¿æ¥æå¹¿æ­ç¹å®éåç°æ°æ®ï¼ã</p>
<p class="js_darkmode__110" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__111">æéå¯åç°æ¨¡å¼ (Limited Discoverable Mode)ï¼</strong>&nbsp;è®¾å¤å¨ç­æ¶é´åï¼éå¸¸æè¶æ¶éå¶ï¼å¯è¢«åç°ãå¸¸ç¨äºæä¸æé®åçéå¯¹ç¶æã</p>
<p class="js_darkmode__112" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__113">ä¸è¬å¯åç°æ¨¡å¼ (General Discoverable Mode)ï¼</strong>&nbsp;è®¾å¤å¨å¾é¿ä¸æ®µæ¶é´åé½å¯ä»¥è¢«åç°ãè¿æ¯å¤§å¤æ°æ¶è´¹çµå­äº§åçé»è®¤ç¶æã</p>
<p class="js_darkmode__114" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__115">ï¼Bï¼è¿æ¥æ¨¡å¼ (Connectability Modes)</strong>&nbsp;æä¸ç§:</p>
<p class="js_darkmode__116" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__117">ä¸å¯è¿æ¥ (Non-Connectable)ï¼</strong>&nbsp;ä»å¹¿æ­æ°æ®ï¼æç»è¿æ¥è¯·æ±ã</p>
<p class="js_darkmode__118" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__119">å®åå¯è¿æ¥ (Directed Connectable)ï¼</strong>&nbsp;ä»æ¥åæ¥èªç¹å®ï¼å·²ç»å®ï¼è®¾å¤çè¿æ¥è¯·æ±ï¼ç¨äºå¿«ééè¿ã</p>
<p class="js_darkmode__120" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__121">æ åå¯è¿æ¥ (Undirected Connectable)ï¼</strong>&nbsp;æ¥åä»»ä½è®¾å¤çè¿æ¥è¯·æ±ã</p>
<p class="js_darkmode__122" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__123">ï¼Cï¼åç°è¿ç¨ (Discovery Procedures)</strong></p>
<p class="js_darkmode__124" data-tool="mdniceç¼è¾å¨">ä½ä¸ºä¸­å¿è®¾å¤ï¼Centralï¼æè§å¯èï¼Observerï¼ï¼GAP å®ä¹äºå¦ä½å»åç°å¨å´è®¾å¤ï¼</p>
<p class="js_darkmode__125" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__126">æéåç°è¿ç¨ (Limited Discovery Procedure)ï¼</strong>&nbsp;ä»è¿æ»¤å¹¶æ¾ç¤ºå¤äº<strong class="js_darkmode__127">æéå¯åç°æ¨¡å¼</strong>çè®¾å¤ã</p>
<p class="js_darkmode__128" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__129">ä¸è¬åç°è¿ç¨ (General Discovery Procedure)ï¼</strong>&nbsp;åç°ææå¯åç°çè®¾å¤ã</p>
<p class="js_darkmode__130" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__131">ï¼Dï¼è¿æ¥åæ° (Connection Parameters)</strong></p>
<p class="js_darkmode__132" data-tool="mdniceç¼è¾å¨">å¨ GAP ä¸­ï¼å®ä¹äºä¸­å¿è®¾å¤åå¤å´è®¾å¤å»ºç«è¿æ¥æ¶å¿é¡»ååçå³é®åæ°ãè¿äºåæ°ç´æ¥å½±å<strong class="js_darkmode__133">åè</strong>å<strong class="js_darkmode__134">æ°æ®ååé</strong>ã</p>
<p class="js_darkmode__135" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__136">è¿æ¥é´é (Connection Interval)ï¼</strong>&nbsp;ä¸¤æ¬¡éä¿¡ä¹é´çæ¶é´é´éï¼7.5ms ~ 4.0sï¼ã</p>
<p class="js_darkmode__137" data-tool="mdniceç¼è¾å¨">é´éè¶ç­ï¼éåº¦è¶å¿«ä½èçµï¼é´éè¶é¿ï¼è¶ççµã</p>
<p class="js_darkmode__138" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__139">å¤å´è®¾å¤å»¶è¿ (Peripheral Latency/Slave Latency)ï¼</strong>&nbsp;åè®¸å¤å´è®¾å¤å¨æ²¡ææ°æ®åéæ¶è·³è¿è¿æ¥äºä»¶çæ¬¡æ°ãè¿å¯¹ä½åèè³å³éè¦ã</p>
<p class="js_darkmode__140" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__141">çç£è¶æ¶ (Supervision Timeout)ï¼</strong>&nbsp;å¦æè¶è¿è¿ä¸ªæ¶é´æ²¡æéä¿¡ï¼è¿æ¥è¢«è§ä¸ºæ­å¼ã</p>
<p class="js_darkmode__142" data-tool="mdniceç¼è¾å¨">å¨èç 5.3 å¼å¥äº Connection Subrating (è¿æ¥å­éç)ï¼è½ç¶è¿ä¸»è¦æ¯é¾è·¯å±çåè½ï¼</p>
<p class="js_darkmode__143" data-tool="mdniceç¼è¾å¨">ä½å¨ GAP å±é¢ï¼å®åè®¸è®¾å¤å¨ä¿æä½å ç©ºæ¯ï¼ççµï¼çåæ¶ï¼è½å¤æ´å¿«éå°åæ¢å°é«å ç©ºæ¯ï¼é«æ§è½ï¼æ¨¡å¼ï¼èæ éå®å¨éæ°ååè¿æ¥åæ°ã</p>
<h3 class="js_darkmode__144" data-tool="mdniceç¼è¾å¨"><span class="js_darkmode__145">ï¼4ï¼GAP ä¸åºå±ï¼Link Layerï¼çåè°é»è¾</span></h3>
<img src="https://img2024.cnblogs.com/blog/555985/202601/555985-20260116161632014-1638310985.png" alt="image" style="display: block; margin-left: auto; margin-right: auto">
<p class="js_darkmode__147" data-tool="mdniceç¼è¾å¨">å¨æ¶æå¾ä¸­ï¼GAP ä½äº&nbsp;<strong class="js_darkmode__148">L2CAP</strong>&nbsp;å&nbsp;<strong class="js_darkmode__149">Link Layer (LL)</strong>&nbsp;ä¹ä¸ãå®çç®¡çæä»¤æ¯èªä¸èä¸ä¸è¾¾çï¼</p>
<p class="js_darkmode__150" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__151">GAP åæä»¤ï¼</strong>&nbsp;åºç¨å±åè¯ GAP&nbsp;<strong class="js_darkmode__152">æè¦è¿æ¥é£å°åä¸º 'Apple Watch' çè®¾å¤</strong>ã</p>
<p class="js_darkmode__153" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__154">GAP è°åº¦ï¼</strong>&nbsp;GAP æ£æ¥å½åéç½®ï¼å¹¶å½ä»¤ Link Layer è¿å¥&nbsp;<strong class="js_darkmode__155">Initiating Stateï¼åèµ·ç¶æï¼</strong>ã</p>
<p class="js_darkmode__156" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__157">LL æ§è¡ï¼</strong>&nbsp;Link Layer å¨ç©ºä¸­çå¬å¯¹æ¹çå¹¿æ­åï¼å¹¶å¨æç­ççªå£æåå®ææ¡æã</p>
<p class="js_darkmode__158" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__159">GAP åé¦ï¼</strong>&nbsp;è¿æ¥æååï¼GAP ä¼éç¥ä¸å±ï¼å¦ GATT æåºç¨å±ï¼ï¼<strong class="js_darkmode__160">é¾è·¯å·²å»ºç«ï¼å¯ä»¥å¼å§ä¼ è¾æ°æ®äº</strong>ã</p>
<h3 class="js_darkmode__161" data-tool="mdniceç¼è¾å¨"><span class="js_darkmode__162">ï¼5ï¼ä¸ºä»ä¹æç¯è®¾å¤è½ççµ</span></h3>
<p class="js_darkmode__163" data-tool="mdniceç¼è¾å¨">è¿éæä»¬ä»¥èçæç¯æ¥ä¸¾ä¾ï¼ä»æç¯çåå§åãè¿æ¥ãè¿å¥éé»æãè°æ´ è¿ä¸ªå¨ææ¥çå®æ¯å¦ä½è¿è¡åèç®¡ççã</p>
<p class="js_darkmode__164" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__165">åå§åï¼</strong>&nbsp;æç¯ GAP è®¾ç½®ä¸º&nbsp;<strong class="js_darkmode__166">Peripheral</strong>ï¼æ¯ 1 ç§åä¸æ¬¡å¹¿æ­ã</p>
<p class="js_darkmode__167" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__168">è¿æ¥ï¼</strong>&nbsp;ææº&nbsp;<strong class="js_darkmode__169">Central</strong>&nbsp;åç°æç¯ï¼GAP å»ºç«è¿æ¥ï¼åå§è¿æ¥é´éè®¾ä¸º&nbsp;<strong class="js_darkmode__170">30ms</strong>ï¼ä¸ºäºå¿«éåæ­¥æ°æ®ï¼ã</p>
<p class="js_darkmode__171" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__172">è¿å¥éé»æï¼</strong>&nbsp;æ°æ®åæ­¥å®äºï¼App è¿å¥åå°ãæ­¤æ¶ææº GAP åèµ·<strong class="js_darkmode__173">è¿æ¥åæ°æ´æ°è¯·æ±</strong>ã</p>
<p class="js_darkmode__174" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__175">è°æ´ï¼</strong>&nbsp;è¿æ¥é´éè¢«æé¿å°&nbsp;<strong class="js_darkmode__176">500ms</strong>ï¼ä¸è®¾ç½®äº&nbsp;<strong class="js_darkmode__177">Slave Latency = 10</strong>ãè¿æå³çæç¯å³ä½¿æ¯ 500ms è¯¥éæ¥ä¸æ¬¡ï¼ä½å¦ææ²¡æ°æ®ï¼å®å¯ä»¥è¿ç»­<strong class="js_darkmode__178">ç¡</strong>&nbsp;10 æ¬¡ï¼ä¹å°±æ¯ 5 ç§éæè·ææºéä¿¡ä¸æ¬¡ã</p>
<p class="js_darkmode__179" data-tool="mdniceç¼è¾å¨">ç»æå°±æ¯ï¼è¿ç§ç± GAP åè°çåæ°è°æ´ï¼è®©ä½ çæç¯ç»­èªä» 3 å¤©å»¶é¿å°äº 20 å¤©ã</p>
<h2 class="js_darkmode__180" data-tool="mdniceç¼è¾å¨"><span class="js_darkmode__181">ï¼ä¸ï¼SDP (Service Discovery Protocol)</span></h2>
<img src="https://img2024.cnblogs.com/blog/555985/202601/555985-20260116161648229-1416782711.png" alt="image" style="display: block; margin-left: auto; margin-right: auto">
<p class="js_darkmode__183" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__184">SDP</strong>&nbsp;(Service Discovery Protocol) æ¯ éå¸èç(BR/EDR)è®¾å¤ç&nbsp;<strong class="js_darkmode__185">é»é¡µçµè¯ç°¿</strong>ã</p>
<p class="js_darkmode__186" data-tool="mdniceç¼è¾å¨">å¨ä¸¤ä¸ª<strong class="js_darkmode__187">éå¸èç</strong>è®¾å¤å»ºç«è¿æ¥åï¼å¿é¡»éè¿ SDP æ¥æ¥è¯¢å¯¹æ¹ï¼<strong class="js_darkmode__188">ä½ å°åºæ¯æåªäºåè½ï¼æä¹è¿æ¥è¿äºåè½ï¼</strong></p>
<h3 class="js_darkmode__189" data-tool="mdniceç¼è¾å¨"><span class="js_darkmode__190">ï¼1ï¼SDP çæ ¸å¿æ¦å¿µä¸éç¨èå´</span></h3>
<p class="js_darkmode__191" data-tool="mdniceç¼è¾å¨">SDP æä¾äºä¸ç§æºå¶ï¼åè®¸å®¢æ·ç«¯åºç¨ç¨åºåç°æå¡å¨åºç¨ç¨åºæä¾çæå¡ä»¥åè¿äºæå¡çå±æ§ã</p>
<p class="js_darkmode__192" data-tool="mdniceç¼è¾å¨">å®ä¸å®ä¹å·ä½çæå¡æä½ï¼é£æ¯åä¸ª Profile çäºï¼ï¼åªè´è´£åç°ã</p>
<p class="js_darkmode__193" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__194">éè¦åæ</strong>ï¼ SDP ä¸»è¦ç¨äº èçç»å¸ (BR/EDR) ææ¯ï¼è½ç¶ BLE è®¾å¤ä¸»è¦ç¨ GATTï¼ä½åæ¨¡è®¾å¤ï¼Dual Modeï¼åæ¶æ¯æ Classic å BLEï¼ä¾ç¶å¿é¡»å®ç° SDP æ ä»¥æ¯æç»å¸èçé¨åçåè½ã</p>
<h3 class="js_darkmode__195" data-tool="mdniceç¼è¾å¨"><span class="js_darkmode__196">ï¼2ï¼SDP æ¶æä¸è§è² (Architecture &amp; Roles)</span></h3>
<img src="https://img2024.cnblogs.com/blog/555985/202601/555985-20260116161702037-464956041.png" alt="image" style="display: block; margin-left: auto; margin-right: auto">
<p class="js_darkmode__198" data-tool="mdniceç¼è¾å¨">SDP éç¨ç®åç&nbsp;<strong class="js_darkmode__199">Client-Server (å®¢æ·ç«¯-æå¡å¨)</strong>&nbsp;æ¨¡åï¼</p>
<p class="js_darkmode__200" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__201">SDP Server (æå¡ç«¯)ï¼</strong>&nbsp;éå¸¸æ¯æä¾æå¡çè®¾å¤ï¼å¦èçé³ç®±ï¼ï¼å®ç»´æ¤ä¸ä¸ªæå¡è®°å½æ°æ®åºã</p>
<p class="js_darkmode__202" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__203">SDP Client (å®¢æ·ç«¯)ï¼</strong>&nbsp;éå¸¸æ¯æ³è¦ä½¿ç¨æå¡çè®¾å¤ï¼å¦ææºï¼ï¼å®åæå¡ç«¯åèµ·æ¥è¯¢ã</p>
<p class="js_darkmode__204" data-tool="mdniceç¼è¾å¨">å¸¸è§çæ¥è¯¢æ¹å¼æï¼</p>
<p class="js_darkmode__205" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__206">æå¡æç´¢ (Service Search)ï¼</strong>&nbsp;å®¢æ·ç«¯é®ï¼ä½ è¿éææ¯æ UUID ä¸º 0x110Bï¼é³é¢æ¥æ¶ï¼çæå¡åï¼</p>
<p class="js_darkmode__207" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__208">å±æ§è·å (Service Attribute)ï¼</strong>&nbsp;å®¢æ·ç«¯é®ï¼å¯¹äºè¿ä¸ªé³é¢æå¡ï¼ä½ çè¿æ¥ééæ¯å¤å°ï¼</p>
<p class="js_darkmode__209" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__210">æå¡æµè§ (Service Browsing)ï¼</strong>&nbsp;å®¢æ·ç«¯è¯·æ±æ¥çæå¡å¨ä¸ææå¯å¬å¼çæå¡åè¡¨ã</p>
<h3 class="js_darkmode__211" data-tool="mdniceç¼è¾å¨"><span class="js_darkmode__212">ï¼3ï¼SDP çæ ¸å¿ç»ä»¶ãæ°æ®æ¨¡å</span></h3>
<p class="js_darkmode__213" data-tool="mdniceç¼è¾å¨">SDP æå¡å¨ç»´æ¤çæ°æ®åºç±ä¸ç³»å Service Records (æå¡è®°å½) ç»æã</p>
<p class="js_darkmode__214" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__215">ï¼1ï¼Service Record (æå¡è®°å½)</strong></p>
<img src="https://img2024.cnblogs.com/blog/555985/202601/555985-20260116161715276-1451476449.png" alt="image" style="display: block; margin-left: auto; margin-right: auto">
<p class="js_darkmode__217" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__218">Service Record Handle:</strong>&nbsp; æ¯ä¸ä¸ªæå¡ï¼å¦<strong class="js_darkmode__219">åæéè¯</strong>ã<strong class="js_darkmode__220">ä¸²å£éä¿¡</strong>ï¼é½å¯¹åºä¸æ¡è®°å½ï¼è¿æ¯ SDP æå¡å¨åéç»æä¸ä¸ªæå¡çç´¢å¼å·ã</p>
<p class="js_darkmode__221" data-tool="mdniceç¼è¾å¨">å¨ä¸å°è®¾å¤ï¼Serverï¼ä¸ï¼æ¯ä¸ä¸ªæå¡è®°å½é½æä¸ä¸ªå¯ä¸çå¥æï¼é¿åº¦ä¸º32ä½ï¼ç§°ä¸º Handleã</p>
<p class="js_darkmode__222" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__223">åéè§å</strong>ï¼ èå´æ¯ 0x00000000 å° 0xFFFFFFFFãéå¸¸ 0x00000000 æ¯ä¿çç» SDP æå¡æ¬èº«çã</p>
<p class="js_darkmode__224" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__225">ï¼2ï¼Service Attributes (æå¡å±æ§)</strong></p>
<img src="https://img2024.cnblogs.com/blog/555985/202601/555985-20260116161727144-2105630239.png" alt="image" style="display: block; margin-left: auto; margin-right: auto">
<p class="js_darkmode__227" data-tool="mdniceç¼è¾å¨">æ¯æ¡è®°å½åå«å¤ä¸ªå±æ§ï¼æè¿°è¯¥æå¡çç»èãå±æ§ç±&nbsp;<strong class="js_darkmode__228">Attribute ID</strong>&nbsp;å&nbsp;<strong class="js_darkmode__229">Attribute Value</strong>&nbsp;ç»æã</p>
<p class="js_darkmode__230" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__231">Attribute ID</strong>&nbsp; (å±æ§ ID)ï¼ å®ä¹äºè¯¥å±æ§çå«ä¹ï¼ç±èç SIG ç»ä¸è§å®ï¼ä¾å¦ï¼</p>
<ul class="list-paddingleft-1 js_darkmode__232">
<li><code class="js_darkmode__234">0x0001</code>ï¼å§ç»ä»£è¡¨&nbsp;<code class="js_darkmode__235">ServiceClassIDList</code>ï¼æå¡ç±»å«åè¡¨ï¼ã</li>
<li><code class="js_darkmode__237">0x0100</code>ï¼å§ç»ä»£è¡¨&nbsp;<code class="js_darkmode__238">ServiceName</code>ï¼æå¡åç§°ï¼ã</li>
</ul>
<p class="js_darkmode__239" data-tool="mdniceç¼è¾å¨">å®¢æ·ç«¯éè¿è¿ä¸ª ID åè¯æå¡å¨ï¼è¯·æè¿ä¸ªæå¡ç ServiceNameï¼0x0100ï¼ åè¯æã</p>
<p class="js_darkmode__240" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__241">Attribute Value</strong>&nbsp;(å±æ§å¼) ï¼ è¿æ¯æå·ä½çæ°æ®ï¼å®çæ ¼å¼å« Data Elementï¼å¯ä»¥æ¯ä¸ä¸ªæ´æ°ãä¸ä¸ªå­ç¬¦ä¸²ãä¸ä¸ªå¸å°å¼ï¼çè³æ¯ä¸ä¸ªåµå¥çåè¡¨ã</p>
<p class="js_darkmode__242" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__243">ï¼3ï¼UUID (éç¨å¯ä¸æ è¯ç¬¦)</strong></p>
<p class="js_darkmode__244" data-tool="mdniceç¼è¾å¨">UUID è¿æ¯ SDP ççµé­ï¼å®æ¯ä¸ä¸ªå¨çå¯ä¸çæ ç­¾ï¼ç¨æ¥æ è¯<strong class="js_darkmode__245">è¿å°±æ¯ A2DP é³é¢</strong>æ<strong class="js_darkmode__246">è¿å°±æ¯ä¸²å£åè®®</strong>ã</p>
<p class="js_darkmode__247" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__248">å³é®ç¹</strong>ï¼ UUID éå¸¸æ¯ä½ä¸º<strong class="js_darkmode__249">Attribute Value</strong>çä¸é¨ååºç°çã</p>
<p class="js_darkmode__250" data-tool="mdniceç¼è¾å¨">æ¯å¦å¨&nbsp;<code class="js_darkmode__251">ServiceClassIDList</code>&nbsp;è¿ä¸ªå±æ§ï¼ID ä¸º&nbsp;<code class="js_darkmode__252">0x0001</code>ï¼éï¼å®çå¼éå¸¸å°±æ¯ä¸ä¸ª UUIDï¼å¦&nbsp;<code class="js_darkmode__253">0x110B</code>&nbsp;ä»£è¡¨ A2DP Audio Sinkï¼ã</p>
<p class="js_darkmode__254" data-tool="mdniceç¼è¾å¨">ä¸è¬16ä½ UUIDï¼ç®ç­çï¼ç¨äºå®æ¹æ åæå¡ï¼128ä½ UUIDï¼å®æ´çï¼ç¨äºååèªå®ä¹æå¡ã</p>
<p class="js_darkmode__255" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__256">ï¼4ï¼HandleãAttribute IDãValueãUUID çåºå«</strong></p>
<p class="js_darkmode__257" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__258">Handle</strong>&nbsp;(32ä½)<strong class="js_darkmode__259">ï¼</strong>æ¾å°é£ä¸ªæå¡è®°å½çé¥åã</p>
<p class="js_darkmode__260" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__261">Attribute ID</strong>&nbsp;(16ä½)ï¼ææä½ æ³çè®°å½éçåªä¸é¡¹ã</p>
<p class="js_darkmode__262" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__263">Attribute Value</strong>ï¼é£ä¸é¡¹éå­çå®éæ°æ®ã</p>
<p class="js_darkmode__264" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__265">UUID</strong>ï¼å­å¨æ°æ®éç<strong class="js_darkmode__266">æ åèº«ä»½æ ç­¾</strong>ã</p>
<h3 class="js_darkmode__267" data-tool="mdniceç¼è¾å¨"><span class="js_darkmode__268">ï¼4ï¼SDP åè®®è¿ç¨ (Protocol Procedures)</span></h3>
<p class="js_darkmode__269" data-tool="mdniceç¼è¾å¨">SDP å®ä¹äºä¸ç§ä¸»è¦ç PDU (åè®®æ°æ®åå) äº¤äºæ¨¡å¼ï¼è¿è¡å¨ L2CAP åè®®ä¹ä¸ï¼éå¸¸ä½¿ç¨ PSM&nbsp;<code class="js_darkmode__270">0x0001</code>ï¼ã</p>
<p class="js_darkmode__271" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__272">ï¼Aï¼Service Search Transaction (æå¡æç´¢)</strong></p>
<img src="https://img2024.cnblogs.com/blog/555985/202601/555985-20260116161746937-210164031.png" alt="image" style="display: block; margin-left: auto; margin-right: auto">
<p class="js_darkmode__274" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__275">Client é®:</strong>&nbsp;ä½ ææ¯æ UUID ä¸º&nbsp;<code class="js_darkmode__276">0x1101</code>&nbsp;(Serial Port) çæå¡åï¼</p>
<p class="js_darkmode__277" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__278">Server ç­:</strong>&nbsp;æï¼å¯¹åºç Service Record Handle æ¯&nbsp;<code class="js_darkmode__279">0x00010005</code>ã</p>
<p class="js_darkmode__280" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__281">ç¨é:</strong>&nbsp;ä»è·åè®°å½çå¥æï¼ä¸è·åå·ä½ç»èã</p>
<p class="js_darkmode__282" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__283">ï¼Bï¼Service Attribute Transaction (å±æ§è·å)</strong></p>
<img src="https://img2024.cnblogs.com/blog/555985/202601/555985-20260116161807388-333043667.png" alt="image" style="display: block; margin-left: auto; margin-right: auto">
<p class="js_darkmode__285" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__286">Client é®:</strong>&nbsp;è¯·ç»æ Handle ä¸º&nbsp;<code class="js_darkmode__287">0x00010005</code>&nbsp;çææå±æ§ï¼æèç¹å®å±æ§ï¼å¦åè®®åè¡¨ï¼ã</p>
<p class="js_darkmode__288" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__289">Server ç­:</strong>&nbsp;è¿æ¯å±æ§åè¡¨ï¼ID&nbsp;<code class="js_darkmode__290">0x0001</code>&nbsp;æ¯...ï¼ID&nbsp;<code class="js_darkmode__291">0x0004</code>&nbsp;æ¯...</p>
<p class="js_darkmode__292" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__293">ç¨é:</strong>&nbsp;å·²ç¥å¥æï¼è·åè¯¦ç»ä¿¡æ¯ã</p>
<p class="js_darkmode__294" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__295">ï¼Cï¼Service Search Attribute Transaction (æç´¢å¹¶è·å)</strong></p>
<img src="https://img2024.cnblogs.com/blog/555985/202601/555985-20260116161820643-1809280923.png" alt="image" style="display: block; margin-left: auto; margin-right: auto">
<p class="js_darkmode__297" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__298">Client é®:</strong>&nbsp;æ¥æ¾æ¯æ UUID&nbsp;<code class="js_darkmode__299">0x1101</code>&nbsp;çæå¡ï¼å¹¶ç´æ¥æå®ä»¬çåè®®åè¡¨å±æ§åç»æã</p>
<p class="js_darkmode__300" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__301">Server ç­:</strong>&nbsp;æ¾å°äºï¼è¿æ¯æ°æ®...</p>
<p class="js_darkmode__302" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__303">ç¨é:</strong>&nbsp;<strong class="js_darkmode__304">æé«æçæ¹å¼</strong>ï¼ä¸æ¬¡äº¤äºå®ææç´¢åè¯»åï¼åå°ç©ºä¸­äº¤äºæ¶é´ã</p>
<h2 class="js_darkmode__305" data-tool="mdniceç¼è¾å¨"><span class="js_darkmode__306">ï¼åï¼ATT (Attribute Protocol)</span></h2>
<img src="https://img2024.cnblogs.com/blog/555985/202601/555985-20260116161831665-1799709478.png" alt="image" style="display: block; margin-left: auto; margin-right: auto">
<p class="js_darkmode__308" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__309">ATT</strong>&nbsp;(Attribute Protocol) æ¯èçä½åè (BLE) ä¸çç&nbsp;<strong class="js_darkmode__310">æ¬è¿å·¥</strong>ãå®æ¯ BLE éä¿¡çæåºå±æ°æ®ä¼ è¾åè®®ã</p>
<p class="js_darkmode__311" data-tool="mdniceç¼è¾å¨">ä¸å±ç GATT (Generic Attribute Profile) å ä¹ææçæä½ï¼è¯»ãåãéç¥ï¼é½æ¯éè¿ ATT åè®®å®ä¹ç PDU (åè®®æ°æ®åå) æ¥å®æçã</p>
<h3 class="js_darkmode__312" data-tool="mdniceç¼è¾å¨"><span class="js_darkmode__313">ï¼1ï¼ATT çæ ¸å¿æ¶æä¸è§è²</span></h3>
<p class="js_darkmode__314" data-tool="mdniceç¼è¾å¨">ATT å®ä¹äºä¸¤ä¸ªæ ¸å¿è§è²ï¼è¿ä¸¤ä¸ªè§è²å®å¨ç¬ç«äº GAP ç<strong class="js_darkmode__315">ä¸»æº/ä»æº</strong>æ<strong class="js_darkmode__316">ä¸­å¿/å¤å´</strong>è§è²ã</p>
<p class="js_darkmode__317" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__318">æå¡å¨ (Server):</strong>:æ°æ®ææè,å®å­å¨äºææçç¶æãæ°æ®åéç½®ä¿¡æ¯ï¼å³<strong class="js_darkmode__319">å±æ§</strong>ï¼ãå®éå¸¸æ¯ä¼ æå¨è®¾å¤ï¼å¦å¿çå¸¦ãæ¸©åº¦è®¡ï¼ã</p>
<p class="js_darkmode__320" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__321">æ³¨æ</strong>ï¼å¨å¤§å¤æ°æåµä¸ï¼BLE å¤å´è®¾å¤ (Peripheral) åå½ ATT Serverï¼ä½è¿å¹¶ä¸æ¯å¼ºå¶çã</p>
<p class="js_darkmode__322" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__323">å®¢æ·ç«¯</strong>&nbsp;(Client)ï¼æ°æ®è¯·æ±èï¼å®åæå¡å¨åèµ·è¯·æ±ï¼æèæ¥æ¶æå¡å¨æ¨éçæ°æ®ãéå¸¸æ¯ææºãç½å³æå¹³æ¿çµèã</p>
<h3 class="js_darkmode__324" data-tool="mdniceç¼è¾å¨"><span class="js_darkmode__325">ï¼2ï¼ATT çå±æ§ï¼æ°æ®ååï¼</span></h3>
<p class="js_darkmode__326" data-tool="mdniceç¼è¾å¨">ATT å±ä¼ è¾çæå°åä½å°±æ¯&nbsp;<strong class="js_darkmode__327">Attribute</strong>&nbsp;(å±æ§)ãæå¡å¨æ¬è´¨ä¸å°±æ¯ä¸ä¸ªå·¨å¤§çå±æ§åè¡¨ï¼Attribute Tableï¼ãæ¯ä¸ä¸ªå±æ§é½ç±ä»¥ä¸åä¸ªåç´ ç»æï¼</p>
<p class="js_darkmode__328" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__329">Attribute Handle</strong>ï¼handle é¿åº¦16bitï¼å®æ¯å±æ§ç<strong class="js_darkmode__330">å°å</strong>æç´¢å¼ãå®¢æ·ç«¯éè¿å¥ææ¥æ¾å°å®è¦è¯»åçæ°æ®ãèå´ï¼0x0001 ~ 0xFFFFã</p>
<p class="js_darkmode__331" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__332">Attribute Type</strong>&nbsp;ï¼å®ä¹è¿å°åºæ¯ä»ä¹æ°æ®ãä½¿ç¨ UUID æ è¯ï¼å¦ 0x2800 ä»£è¡¨<strong class="js_darkmode__333">æå¡å£°æ</strong>ï¼0x2A37 ä»£è¡¨<strong class="js_darkmode__334">å¿çæµéå¼</strong>ï¼ã</p>
<p class="js_darkmode__335" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__336">Attribute Value</strong>&nbsp;ï¼å®éçæ°æ®è½½ä½ãé¿åº¦å¯åï¼0 ~ 512 å­èï¼ã</p>
<p class="js_darkmode__337" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__338">Attribute Permissions</strong>ï¼å®ä¹è°å¯ä»¥è®¿é®è¯¥å±æ§ï¼è¯»/å/å å¯è¦æ±ï¼ãæ³¨æï¼æéä¸éè¿ç©ºä¸­ä¼ è¾ï¼ä»å­å¨äºæå¡å¨åé¨é»è¾ä¸­ã</p>
<h3 class="js_darkmode__339" data-tool="mdniceç¼è¾å¨"><span class="js_darkmode__340">ï¼3ï¼ATT PDU ç±»å (éä¿¡æ¹å¼)</span></h3>
<p class="js_darkmode__341" data-tool="mdniceç¼è¾å¨">ATT åè®®å®ä¹äº 6 ç§åºæ¬çéä¿¡äº¤äºæ¨¡å¼ (PDU Types)ãçè§£è¿ 6 ç§æ¨¡å¼æ¯çè§£ BLE æ°æ®æµçå³é®ã</p>
<p class="js_darkmode__342" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__343">ï¼Aï¼è¯·æ±</strong>&nbsp;(<strong class="js_darkmode__344">Request</strong>) ç± Client -&gt; Serverï¼å®¢æ·ç«¯åéè¯·æ±ï¼<strong class="js_darkmode__345">å¿é¡»</strong>ç­å¾æå¡å¨åå¤ååºï¼æ¯å¦ï¼ææºè¯»åæç¯çµé (<code class="js_darkmode__346">Read Request</code>)ã ç¹ç¹æ¯ï¼ä¸²è¡ï¼æ¢ï¼ä½å¯é ã</p>
<p class="js_darkmode__347" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__348">ï¼Bï¼ååº</strong>(<strong class="js_darkmode__349">Response</strong>)ï¼ç± Server -&gt; Clientï¼æå¡å¨å¯¹è¯·æ±çåå¤ï¼æ¯å¦ï¼æç¯åå¤çµéå¼ (<code class="js_darkmode__350">Read Response</code>)ã</p>
<p class="js_darkmode__351" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__352">ï¼Cï¼å½ä»¤</strong>&nbsp;(<strong class="js_darkmode__353">Command</strong>)ï¼ç± Client -&gt; Server ãå®¢æ·ç«¯åéæ°æ®ï¼<strong class="js_darkmode__354">ä¸éè¦</strong>æå¡å¨åå¤ãä¹å« "Write without Response"ãæ¯å¦ï¼ææºå¿«éåæºè½ç¯æ³¡åéè°è²æä»¤ã</p>
<p class="js_darkmode__355" data-tool="mdniceç¼è¾å¨">ç¹ç¹æ¯ï¼ç±åºå±é¾è·¯å±ä¿è¯æ°æ®å°è¾¾ï¼åºç¨å±ä¸ç¡®è®¤ï¼éåº¦æå¿«</p>
<p class="js_darkmode__356" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__357">ï¼Dï¼éç¥</strong>&nbsp;(<strong class="js_darkmode__358">Notification</strong>)ï¼ ç± Server -&gt; Clientãæå¡å¨ä¸»å¨æ¨éæ°æ®ï¼<strong class="js_darkmode__359">ä¸éè¦</strong>å®¢æ·ç«¯ç¡®è®¤ãæ¯å¦ï¼å¿çå¸¦æ¯ç§æ¨éä¸æ¬¡å®æ¶å¿çãç¹ç¹æ¯ï¼æå¸¸ç¨çæ°æ®ä¸æ¥æ¹å¼ï¼ååéé«ã</p>
<p class="js_darkmode__360" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__361">ï¼Eï¼æç¤º</strong>&nbsp;(<strong class="js_darkmode__362">Indication</strong>)ï¼ç±Server -&gt; Clientãæå¡å¨ä¸»å¨æ¨éæ°æ®ï¼<strong class="js_darkmode__363">å¿é¡»</strong>ç­å¾å®¢æ·ç«¯åå¤ç¡®è®¤ãå¨æ¶å°ç¡®è®¤åï¼æå¡å¨ä¸è½åä¸ä¸æ¡ãæ¯å¦ï¼è¡ç³ä»ªåéè¡ç³ç»æï¼æ°æ®è³å³éè¦ï¼å¿é¡»ç¡®ä¿å¯¹æ¹åºç¨å±æ¶å°äºï¼ã</p>
<p class="js_darkmode__364" data-tool="mdniceç¼è¾å¨">ç¹ç¹æ¯ï¼æ¢ï¼ä½å¨åºç¨å±æå¶å¯é </p>
<p class="js_darkmode__365" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__366">ï¼Fï¼ç¡®è®¤</strong>&nbsp;(<strong class="js_darkmode__367">Confirmation</strong>)ï¼ç± Client -&gt; Serverãæ¯å®¢æ·ç«¯æ¶å°æç¤º (Indication) åçåå¤ã</p>
<h3 class="js_darkmode__368" data-tool="mdniceç¼è¾å¨"><span class="js_darkmode__369">ï¼4ï¼å¢å¼ºå ATT (Enhanced ATT, EATT)</span></h3>
<p class="js_darkmode__370" data-tool="mdniceç¼è¾å¨">å¢å¼ºå ATT (Enhanced ATT, EATT) è¿æ¯ä»èç 5.2 å¼å¥å¹¶å¨ V5.3 ä¸­ç»§ç»­å¼ºåçéè¦ç¹æ§ã</p>
<p class="js_darkmode__371" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__372">ä¼ ç» ATT (Legacy ATT):</strong>&nbsp;æ¯<strong>é¡ºåº (Sequential)</strong>çãå¦æä½ åéäºä¸ä¸ª Read Requestï¼å¨æ¶å° Read Response ä¹åï¼ä½ ä¸è½åéä»»ä½å¶ä»è¯·æ±ã</p>
<p class="js_darkmode__373" data-tool="mdniceç¼è¾å¨">è¿å°±ååè¡éï¼å®¹æé æé»å¡ï¼Head-of-Line Blockingï¼ã</p>
<p class="js_darkmode__374" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__375">å¢å¼ºå ATT (EATT):</strong>&nbsp;å®è¿è¡å¨ L2CAP çå¢å¼ºååºäºä¿¡ç¨çæµéæ§å¶ (Enhanced Credit Based Flow Control) æ¨¡å¼ä¹ä¸ã</p>
<p class="js_darkmode__376" data-tool="mdniceç¼è¾å¨">å®çç¹ç¹æ¯ï¼</p>
<ul class="list-paddingleft-1 js_darkmode__377">
<li><strong class="js_darkmode__379">æ¯æå¹¶å (Concurrent):</strong>&nbsp;åè®¸åæ¶æ§è¡å¤ä¸ª ATT äºå¡ã</li>
<li><strong class="js_darkmode__381">ä½å»¶è¿ï¼</strong>&nbsp;ä¼åçº§é«çå½ä»¤ä¸ä¼è¢«åé¢æ­£å¨å¤ççå¤§æ°æ®åé»å¡ã</li>
<li><strong class="js_darkmode__383">MTU:</strong>&nbsp;EATT ç MTU æ¯ç¬ç«éç½®çï¼éå¸¸æ´çµæ´»ã</li>
</ul>
<p class="js_darkmode__384" data-tool="mdniceç¼è¾å¨">å¨ V5.3 è®¾å¤ä¸­ï¼å¦æåæ¹é½æ¯æ EATTï¼è®¾å¤å°ä¼åå»ºç« EATT ä¿¡éä»¥æåç¨æ·ä½éªï¼å¦é³é¢æµä¼ è¾æ¶çåæ¶æ§å¶æä½ï¼ã</p>
<h3 class="js_darkmode__385" data-tool="mdniceç¼è¾å¨"><span class="js_darkmode__386">ï¼5ï¼ATT MTU (æå¤§ä¼ è¾åå)</span></h3>
<img src="https://img2024.cnblogs.com/blog/555985/202601/555985-20260116161848815-585472060.png" alt="image" style="display: block; margin-left: auto; margin-right: auto">
<p class="js_darkmode__388" data-tool="mdniceç¼è¾å¨">ATT_MTU å³å®äºå¨ä¸ä¸ªæ°æ®åä¸­æå¤è½ä¼ å¤å°å­èçææè½½è·ãé»è®¤å¼ä¸º 23 å­è (BLE 4.0)ã</p>
<p class="js_darkmode__389" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__390">å¸åå¼ï¼</strong>&nbsp;ä¸º247 å­è (å¸¸è§ç DLE æ©å±åæ°å¼) æ 512 å­è (æå¤§)ã</p>
<p class="js_darkmode__391" data-tool="mdniceç¼è¾å¨">ATTè¿æ¥å»ºç«åï¼å®¢æ·ç«¯éå¸¸ä¼åèµ·&nbsp;<code class="js_darkmode__392">Exchange MTU Request</code>ï¼åæ¹ååä½¿ç¨ä¸¤èæ¯æçè¾å°å¼ã</p>
<h2 class="js_darkmode__393" data-tool="mdniceç¼è¾å¨"><span class="js_darkmode__394">ï¼äºï¼GATT (Generic Attribute Profile)</span></h2>
<img src="https://img2024.cnblogs.com/blog/555985/202601/555985-20260116161900151-965016108.png" alt="image" style="display: block; margin-left: auto; margin-right: auto">
<p class="js_darkmode__396" data-tool="mdniceç¼è¾å¨">å¦æ ATT æ¯è´è´£è¿è¾æ°æ®ç<strong class="js_darkmode__397">å¡è½¦</strong>ï¼é£ä¹&nbsp;<strong class="js_darkmode__398">GATT</strong>&nbsp;(Generic Attribute Profile) å°±æ¯å®ä¹è´§ç©å¦ä½æåãå­æ¾ãåç±»ä»¥åå¦ä½è¿è¡å­åæä½ç<strong class="js_darkmode__399">ä»åºç®¡çè§è</strong>ã</p>
<h3 class="js_darkmode__400" data-tool="mdniceç¼è¾å¨"><span class="js_darkmode__401">ï¼1ï¼GATT æ ¸å¿æ¦å¿µä¸è§è² (Roles)</span></h3>
<p class="js_darkmode__402" data-tool="mdniceç¼è¾å¨">GATT å®ä¹äºä¸¤ä¸ªå¨æ°æ®äº¤æ¢ä¸­å®å¨ä¸åçè§è²ãè¯·æ³¨æï¼è¿ä¸é¾è·¯å±çä¸»æº (Central/Master) åä»æº (Peripheral/Slave) æ¦å¿µæ¯ç¬ç«çï¼å°½ç®¡éå¸¸å­å¨æç§æ å°å³ç³»ã</p>
<p class="js_darkmode__403" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__404">GATT Server (æå¡ç«¯):</strong>&nbsp;æ¥ææ°æ®å¹¶æ¥åæ°æ®è®¿é®è¯·æ±çè®¾å¤ãå®çèè´£æ¯å­å¨æ°æ®ï¼Services å Characteristicsï¼ï¼ååº Client çè¯»/åè¯·æ±ï¼æä¸»å¨å Client æ¨éæ°æ®ãæ¯å¦æºè½æç¯(å­æå¿çæ°æ®)</p>
<p class="js_darkmode__405" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__406">GATT Client (å®¢æ·ç«¯):</strong>&nbsp;åèµ·å½ä»¤åè¯·æ±ï¼è¯å¾è¯»åæåå¥æ°æ®çè®¾å¤ãå®çèè´£æ¯æ§è¡æå¡åç° (Service Discovery)ï¼åèµ·è¯»åæä½ï¼æ¥æ¶ Server æ¨éçæ°æ®ãæ¯å¦æºè½ææºï¼æ³è¦è¯»åæç¯çå¿çï¼ã</p>
<h3 class="js_darkmode__407" data-tool="mdniceç¼è¾å¨"><span class="js_darkmode__408">ï¼2ï¼GATT æ°æ®å±çº§ç»æ (Hierarchy)</span></h3>
<img src="https://img2024.cnblogs.com/blog/555985/202601/555985-20260116161916556-43068230.png" alt="image">
<p class="js_darkmode__410" data-tool="mdniceç¼è¾å¨">GATT æéè¦çè´¡ç®æ¯å®ä¹äºä¸¥æ ¼çæ°æ®å±çº§ç»æï¼ä½¿å¾ä¸åååçè®¾å¤å¯ä»¥äºç¸çè§£ã</p>
<p class="js_darkmode__411" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__412">ï¼Aï¼Profile (éç½®æä»¶)</strong>&nbsp;Profile å®éä¸ä¸æ¯ GATT åè®®æ¬èº«å®ä¹çå®ä½ï¼èæ¯ç± Bluetooth SIG æååå®ä¹ç<strong class="js_darkmode__413">éå</strong>ãä¸ä¸ª Profile å¯è½åå«ä¸ä¸ªæå¤ä¸ª Serviceã</p>
<p class="js_darkmode__414" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__415">ï¼Bï¼Service (æå¡)</strong>&nbsp;:Service æ¯æ°æ®åç¸å³è¡ä¸ºçé»è¾éåï¼ç¨äºå®ç°ç¹å®çåè½æç¹æ§ãè¿éåä¸ç§æå¡ï¼</p>
<p class="js_darkmode__416" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__417">Primary Service (é¦è¦æå¡):</strong>&nbsp;æ´é²è®¾å¤ä¸»è¦åè½çæå¡ã</p>
<p class="js_darkmode__418" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__419">Secondary Service (æ¬¡è¦æå¡):</strong>&nbsp;ä»ä½ä¸ºè¢«å¼ç¨çè¾å©æå¡ï¼è¾å°è§ï¼ã</p>
<p class="js_darkmode__420" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__421">Include Service (å¼ç¨æå¡):</strong>&nbsp;ä¸ä¸ªæå¡å¯ä»¥å¼ç¨å¦ä¸ä¸ªæå¡ï¼ç±»ä¼¼äºç¼ç¨ä¸­ç&nbsp;<code class="js_darkmode__422"><a class="wx_topic_link" data-topic="1">#include</a></code>ï¼ï¼ä¾å¦<strong class="js_darkmode__423">è·æ­¥æå¡</strong>å¯è½å¼ç¨<strong class="js_darkmode__424">å¿çæå¡</strong>ã</p>
<p class="js_darkmode__425" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__426">ï¼Cï¼Characteristic (ç¹å¾)</strong>&nbsp;:Characteristic æ¯ GATT ä¸­æå°çé»è¾æ°æ®ååï¼åå«å®éçæ°æ®å¼ãå®ç±ä¸ä¸ªä¸»è¦é¨åç»æï¼</p>
<p class="js_darkmode__427" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__428">Declaration (å£°æ):</strong>&nbsp;åå«å±æ§ï¼è¯»ãåãéç¥ç­ï¼ãHandleï¼å¥æï¼å UUIDã</p>
<p class="js_darkmode__429" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__430">Value (å¼):</strong>&nbsp;å®éçæ°æ®ï¼ä¾å¦ï¼å¿çå¼&nbsp;<code class="js_darkmode__431">0x48</code>ï¼ã</p>
<p class="js_darkmode__432" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__433">Descriptor (æè¿°ç¬¦):</strong>&nbsp;ï¼å¯éï¼å³äºç¹å¾çé¢å¤ä¿¡æ¯ã</p>
<p class="js_darkmode__434" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__435">ï¼Dï¼Descriptor (æè¿°ç¬¦)</strong>&nbsp;:å¯¹ Characteristic çè¿ä¸æ­¥æè¿°æéç½®ã</p>
<p class="js_darkmode__436" data-tool="mdniceç¼è¾å¨">æèåç Descriptor æ¯&nbsp;<strong class="js_darkmode__437">CCCD (Client Characteristic Configuration Descriptor)<strong class="js_darkmode__438">ãClient å¿é¡»åå¥è¿ä¸ªæè¿°ç¬¦æ¥</strong>å¼å¯</strong>&nbsp;Server çéç¥ (Notify) ææç¤º (Indicate) åè½ã</p>
<h3 class="js_darkmode__439" data-tool="mdniceç¼è¾å¨"><span class="js_darkmode__440">ï¼3ï¼GATT æ ¸å¿æä½æµç¨ (GATT Procedures)</span></h3>
<p class="js_darkmode__441" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__442">ï¼Aï¼éç½®ä¸åç° (Discovery)</strong></p>
<img src="https://img2024.cnblogs.com/blog/555985/202601/555985-20260116161949206-724330768.png" alt="image" style="display: block; margin-left: auto; margin-right: auto">
<p class="js_darkmode__444" data-tool="mdniceç¼è¾å¨">Client è¿æ¥ Server åï¼éå¸¸ä¸ç¥é Server æä»ä¹åè½ï¼éè¦è¿è¡åç°ï¼</p>
<ul class="list-paddingleft-1 js_darkmode__445">
<li>
<p class="js_darkmode__447"><strong class="js_darkmode__448">Discover Primary Services:</strong>&nbsp;æ¾åºè®¾å¤æ¯æçææä¸»è¦æå¡ã</p>
</li>
<li>
<p class="js_darkmode__450"><strong class="js_darkmode__451">Discover Characteristics:</strong>&nbsp;æ¾åºæä¸ªæå¡ä¸æåªäºç¹å¾ã</p>
</li>
<li>
<p class="js_darkmode__453"><strong class="js_darkmode__454">Discover Descriptors:</strong>&nbsp;æ¾åºç¹å¾ä¸æåªäºæè¿°ç¬¦ã</p>
</li>
<li>
<p class="js_darkmode__456"><strong class="js_darkmode__457">Exchange MTU:</strong>&nbsp;ååæå¤§ä¼ è¾ååï¼ä»¥å³å®ä¸æ¬¡è½ä¼ å¤å°å­èï¼èç 4.2/5.0+ ä¹åéå¸¸éè¦ï¼ä»¥æé«ååéï¼ã</p>
</li>
</ul>
<p class="js_darkmode__458" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__459">ï¼Bï¼æ°æ®è¯»å (Client -&gt; Server)</strong></p>
<img src="https://img2024.cnblogs.com/blog/555985/202601/555985-20260116162000883-391759881.png" alt="image">
<ul class="list-paddingleft-1 js_darkmode__461">
<li><strong class="js_darkmode__463">Read Characteristic Value:</strong>&nbsp;è¯»åæä¸ªå¥æçå¼ã</li>
<li><strong class="js_darkmode__465">Read Blob:</strong>&nbsp;è¯»åé¿æ°æ®ççæ®µï¼å½æ°æ®è¶è¿ MTU æ¶ï¼ã</li>
<li><strong class="js_darkmode__467">Read Multiple:</strong>&nbsp;ä¸æ¬¡æ§è¯»åå¤ä¸ªå¥æçå¼ã</li>
</ul>
<p class="js_darkmode__468" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__469">ï¼Cï¼æ°æ®åå¥ (Client -&gt; Server)</strong></p>
<img src="https://img2024.cnblogs.com/blog/555985/202601/555985-20260116162012058-1758124561.png" alt="image" style="display: block; margin-left: auto; margin-right: auto">
<ul class="list-paddingleft-1 js_darkmode__471">
<li><strong class="js_darkmode__473">Write Request:</strong>&nbsp;Client åå¥æ°æ®ï¼Server&nbsp;<strong class="js_darkmode__474">å¿é¡»åå¤</strong>&nbsp;(Ack)ãå¯é ï¼ä½æ¢ã</li>
<li><strong class="js_darkmode__476">Write Command (Write without Response):</strong>&nbsp;Client åå¥æ°æ®ï¼Server&nbsp;<strong class="js_darkmode__477">ä¸åå¤</strong>ãéåº¦å¿«ï¼ç¨äºé«ååéåºæ¯ï¼å¦ OTA åçº§ï¼ã</li>
<li><strong class="js_darkmode__479">Signed Write:</strong>&nbsp;å¸¦æç­¾åçåå¥ï¼ç¨äºæªå å¯è¿æ¥ä½éè¦è®¤è¯çåºæ¯ã</li>
</ul>
<p class="js_darkmode__480" data-tool="mdniceç¼è¾å¨"><strong class="js_darkmode__481">ï¼Dï¼æå¡å¨åèµ·çæ°æ®æ¨é (Server -&gt; Client)</strong></p>
<img src="https://img2024.cnblogs.com/blog/555985/202601/555985-20260116162012058-1758124561.png" alt="image" style="display: block; margin-left: auto; margin-right: auto">
<p class="js_darkmode__483" data-tool="mdniceç¼è¾å¨">è¿æ¯ BLE ä½åèçå³é®ï¼Client ä¸éè¦ä¸ç´è½®è¯¢ (Polling)ï¼èæ¯è®¢éåç­å¾ Server æ¨éã</p>
<ul class="list-paddingleft-1 js_darkmode__484">
<li><strong class="js_darkmode__486">Notification (éç¥):</strong>&nbsp;Server åéæ°æ®ç» Clientï¼Client&nbsp;<strong class="js_darkmode__487">ä¸åå¤</strong>ãéåº¦å¿«ï¼ä½å¦æä¸¢åä¸ä¼éä¼ ã</li>
<li><strong class="js_darkmode__489">Indication (æç¤º):</strong>&nbsp;Server åéæ°æ®ç» Clientï¼Client&nbsp;<strong class="js_darkmode__490">å¿é¡»åå¤</strong>&nbsp;Confirmationãå¯é ï¼ä½å¨æ¶å°åå¤å Server ä¸è½åä¸ä¸æ¡ï¼éåº¦è¾æ¢ã</li>
</ul>
<p class="js_darkmode__491" data-tool="mdniceç¼è¾å¨">æ³¨æï¼ è¦å¯ç¨ Notification æ Indicationï¼Client å¿é¡»åå¨å¯¹åºç CCCD (æè¿°ç¬¦) ä¸­åå¥ç¹å®çå¼ã</p>
<h2 class="js_darkmode__492" data-tool="mdniceç¼è¾å¨"><span class="js_darkmode__493">ç»å°¾</span></h2>
<p class="js_darkmode__494" data-tool="mdniceç¼è¾å¨">éçä½åèèççæ®åï¼Host å±çæ¹è¿è¶æ¥è¶è¶åäº<strong class="js_darkmode__495">é«æç</strong>å<strong class="js_darkmode__496">ä½å»¶è¿</strong>ãçè§£ GAP çè¿æ¥ç®¡çãATT çåå­æä½ä»¥å GATT çå±çº§è§£æï¼æ¯å¼åé«æ§è½èçäº§åçåºæ¬ã</p>
<p class="js_darkmode__497" data-tool="mdniceç¼è¾å¨">å¸æè¿ç¯æç« è½æå©äºä½ æ´å¥½å°çè§£èçåè®®æ åå¶å·¥ä½åçã</p>
<center data-tool="mdniceç¼è¾å¨">------------------End------------------</center><center data-tool="mdniceç¼è¾å¨">å¦éè·åæ´å¤åå®¹</center><center data-tool="mdniceç¼è¾å¨">è¯·å³æ³¨<span style="color: rgba(0, 0, 255, 1); font-size: large">&nbsp;liwen01&nbsp;</span>å¬ä¼å·</center>
<div>
<div class="appmsg_card_context wx_profile_card wx-root wx_tap_card wx_card_root common-webchat">
<div class="wx_profile_card_inner">
<div class="wx_profile_card_bd">
<div class="wx_profile weui-flex">
<div class="wx_profile_bd weui-flex weui-flex__item">
<div class="weui-flex__item">
<div class="wx_profile_nickname_wrp">&nbsp;</div>
<div id="js_a11y_wx_profile_tips" class="wx_profile_tips">&nbsp;</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-20 08:42">2026-01-20 08:42</span>&nbsp;
<a href="https://www.cnblogs.com/liwen01">liwen01</a>&nbsp;
éè¯»(<span id="post_view_count">25</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19492724);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19492724', targetLink: 'https://www.cnblogs.com/liwen01/p/19492724', title: 'èçåºç¡(ä¹)ï¼è¯¦è§£èç GAPãSDPãATTãGATT çåå²èæ¯ä¸è®¾è®¡å²å­¦' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ å­ç¬¦ä¸²åå²å¹¶å±å¼æè¡¨æ ¼çSQLå®ç°æ¹æ³ ]]></title>
    <link>https://www.cnblogs.com/davablog/p/19497701</link>
    <guid>bc87f38c1f604197e791df8052827e78</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/davablog/p/19497701" title="åå¸äº 2026-01-20 08:08">
    <span role="heading" aria-level="2">å­ç¬¦ä¸²åå²å¹¶å±å¼æè¡¨æ ¼çSQLå®ç°æ¹æ³</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h1>ä¸ãåºæ¯æ¡ä¾</h1>
<div>å¨æ°æ®å¼åç±»é¡¹ç®ä¸­ï¼å¸¸å¸¸ä¼éå°éè¦å°å­ç¬¦ä¸²è¿è¡åå²å¹¶å±å¼æè¡¨æ ¼çåºæ¯ï¼å¦ä»¥ä¸ä¸¤ç§å¸¸è§çæ¡ä¾ï¼</div>
<ol>
<li>æ ç­¾ç±»åæ°æ®ï¼å¦å°åå·¥æ ç­¾ç±»åçæ°æ®
<div class="cnblogs_code">
<pre><span style="color: rgba(128, 128, 128, 1)">-</span><span style="color: rgba(0, 0, 0, 1)"> æè½ï¼JavaãSpringãå¾®æå¡ãé¡¹ç®ç®¡ç
</span><span style="color: rgba(128, 128, 128, 1)">-</span><span style="color: rgba(0, 0, 0, 1)"> é¡¹ç®ç»éªï¼çµåãéèãæè²<br></span><span style="color: rgba(128, 128, 128, 1)">-</span> å·¥ä½é£æ ¼ï¼#æ§è¡åå¼º #è·¨é¨é¨åä½ #æ°æ®é©±å¨</pre>
</div>
</li>
<li>åç±»å±çº§æ°æ®ï¼å¦å°ç»ç»é¨é¨å±çº§æ°æ®ï¼â/éå¢/åå¬å¸/ä¿¡æ¯ææ¯é¨/æ°æ®å¢éâ</li>
</ol>
<p>é¤æ­¤ä¹å¤ï¼å¨ä¸äºç¹å®çä¸å¡åºæ¯ä¸­ï¼å¦è¯å¸åºæ¯ä¸­ï¼éè¦å°ä¸ç¬åè´­åçº¦æ¶åå°çå¤ä¸ªè´¨æ¼å¸è¿è¡æåï¼æåæ¯ä¸ªè´¨æ¼å¸æè´¨æ¼æ°éåå¯¹åºæ åå¸è½¬æ¢æ¯ä¾ï¼ï¼æ°æ®ç¤ºä¾å¦ä¸ï¼</p>
<p><img alt="image" loading="lazy" style="border: 1px solid rgba(0, 0, 0, 1)" data-src="https://img2024.cnblogs.com/blog/775688/202601/775688-20260119065856546-767732563.png" class="lazyload"></p>
<p>&nbsp;å¦å¤ï¼APIè¯·æ±çè¿åçæ°æ®å¤ä¸ºåç»æåçå­å¸åè¡¨æ°æ®ï¼éè¦å°æ¯è¡æ°æ®ä»åè¡¨ä¸­è¿è¡æååºæ¥åè¿è¡åç»­çå¤çï¼å¦ä»¥ä¸æ°æ®ï¼</p>
<div class="cnblogs_code">
<pre>{"data"<span style="color: rgba(0, 0, 0, 1)">: [<br>ãã {</span>"AMOUNT":-9000,"SUB_TYPE_NAME":"åºå¸åé","BRANCH_NAME":"é¶è¡é´","TYPE_NAME":"æ¶å¥","BUSI_DATE":"20250831","PROJECT_NAME":"è°æ´1æåéä½£é-24****MTN001"<span style="color: rgba(0, 0, 0, 1)">},
    {</span>"AMOUNT":-1075.61,"SUB_TYPE_NAME":"åºå¸åé","BRANCH_NAME":"é¶è¡é´","TYPE_NAME":"æ¶å¥","BUSI_DATE":"20250531","PROJECT_NAME":"è°æ´è®¡æ1æå3æåéä½£é"<span style="color: rgba(0, 0, 0, 1)">}
    ],
</span>"success":<span style="color: rgba(0, 0, 255, 1)">true</span><span style="color: rgba(0, 0, 0, 1)">
}</span></pre>
</div>
<h1>äºï¼åç±»ä¸»æµSQLæ¹è¨å®ç°æ¹æ³</h1>
<p>éå¯¹è¿ç±»åºæ¯ï¼ç®åæ²¡ææ åSQLå½æ°æ¯æå®ç°è¯¥åè½ãåç±»SQLæ¹è¨éè¿èªå®ä¹æ¹æ³è¿è¡æ¯æï¼ä»¥ä¸æ¯å¸¸ç¨çå®ç°æ¹æ³ã</p>
<div id="tvoo-1768690884647">
<h2>Spark/Hive SQL</h2>
</div>
<div>éç¨split + explodeï¼ååçº§çposexplodeï¼ãä»¥ä¸ä¸ºæµè¯æ¡ä¾ï¼</div>
<div><img alt="0" style="border: 1px solid rgba(0, 0, 0, 1)" data-media-type="image" data-src="https://img2024.cnblogs.com/blog/775688/202601/775688-20260118070655712-975963190.png" class="lazyload"></div>
<div>&nbsp;å©ç¨è¯¥æ¹æ³å¯ä»¥è½»æ¾çåè´­è´¨æ¼å¸è¿è¡æåå¤çï¼</div>
<div>
<p><img alt="image" width="905" height="265" loading="lazy" style="border: 1px solid rgba(0, 0, 0, 1)" data-src="https://img2024.cnblogs.com/blog/775688/202601/775688-20260118080901807-752219295.png" class="lazyload"></p>
</div>
<h2 id="hxy0-1768690884655">PostgreSQL</h2>
<div>æä¸¤ç§æ¹æ³ï¼</div>
<div>æ¹æ³ä¸ï¼é¦åå©ç¨string_to_arrayå°å­ç¬¦ä¸²åå²ææ°ç»ï¼ç¶åå©ç¨unnestå°æ°ç»æ©å±æè¡¨</div>
<div><img alt="image" width="455" height="140" loading="lazy" style="border: 1px solid rgba(0, 0, 0, 1)" data-src="https://img2024.cnblogs.com/blog/775688/202601/775688-20260119063315068-1351464652.png" class="lazyload"></div>
<div>æ¹æ³äºï¼ç´æ¥å©ç¨regexp_split_to_tableå°å­ç¬¦ä¸²åå²å¹¶è½¬æ¢æè¡¨</div>
<div><img alt="image" width="457" height="151" loading="lazy" style="border: 1px solid rgba(0, 0, 0, 1)" data-src="https://img2024.cnblogs.com/blog/775688/202601/775688-20260119063224154-1557241955.png" class="lazyload"></div>
<div>
<div class="cnblogs_code"><img id="code_img_closed_384da3ac-fe03-4ded-b878-03d509f19394" class="code_img_closed lazyload" data-src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif"><img id="code_img_opened_384da3ac-fe03-4ded-b878-03d509f19394" class="code_img_opened lazyload" style="display: none" data-src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif">
<div id="cnblogs_code_open_384da3ac-fe03-4ded-b878-03d509f19394" class="cnblogs_code_hide">
<pre><span style="color: rgba(0, 0, 255, 1)">select</span> string_to_array(<span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">apple,banana,orange</span><span style="color: rgba(255, 0, 0, 1)">'</span>, <span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">,</span><span style="color: rgba(255, 0, 0, 1)">'</span>) <span style="color: rgba(0, 0, 255, 1)">as</span><span style="color: rgba(0, 0, 0, 1)"> item;
</span><span style="color: rgba(0, 0, 255, 1)">select</span> string_to_array(<span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">apple|banana|orange</span><span style="color: rgba(255, 0, 0, 1)">'</span>, <span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">|</span><span style="color: rgba(255, 0, 0, 1)">'</span>) <span style="color: rgba(0, 0, 255, 1)">as</span><span style="color: rgba(0, 0, 0, 1)"> item;
</span><span style="color: rgba(0, 0, 255, 1)">select</span> unnest(string_to_array(<span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">apple,banana,orange</span><span style="color: rgba(255, 0, 0, 1)">'</span>, <span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">,</span><span style="color: rgba(255, 0, 0, 1)">'</span>)) <span style="color: rgba(0, 0, 255, 1)">as</span><span style="color: rgba(0, 0, 0, 1)"> item;

</span><span style="color: rgba(0, 0, 255, 1)">select</span> regexp_split_to_array(<span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">apple|banana|orange</span><span style="color: rgba(255, 0, 0, 1)">'</span>, <span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">\|</span><span style="color: rgba(255, 0, 0, 1)">'</span>) <span style="color: rgba(0, 0, 255, 1)">as</span><span style="color: rgba(0, 0, 0, 1)"> item;
</span><span style="color: rgba(0, 0, 255, 1)">select</span> regexp_split_to_table(<span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">apple|banana|orange</span><span style="color: rgba(255, 0, 0, 1)">'</span>, <span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">\|</span><span style="color: rgba(255, 0, 0, 1)">'</span>) <span style="color: rgba(0, 0, 255, 1)">as</span> item;</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
</div>
<h2 id="AoqL-1768690884660">Oracle</h2>
<div>å©ç¨connect by + Levelæ¥å®ç°</div>
<div>
<p><img alt="0" data-media-type="image" data-src="https://img2024.cnblogs.com/blog/775688/202601/775688-20260118070655946-682988581.png" class="lazyload"></p>
<div class="cnblogs_code"><img id="code_img_closed_0763077f-3809-4cd8-a83d-7e204a54ea87" class="code_img_closed lazyload" data-src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif"><img id="code_img_opened_0763077f-3809-4cd8-a83d-7e204a54ea87" class="code_img_opened lazyload" style="display: none" data-src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif">
<div id="cnblogs_code_open_0763077f-3809-4cd8-a83d-7e204a54ea87" class="cnblogs_code_hide">
<pre><span style="color: rgba(0, 0, 255, 1)">WITH</span> CTE_DATA <span style="color: rgba(0, 0, 255, 1)">AS</span><span style="color: rgba(0, 0, 0, 1)"> (
    </span><span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">tom</span><span style="color: rgba(255, 0, 0, 1)">'</span> <span style="color: rgba(0, 0, 255, 1)">AS</span> NAME, <span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">apple,banana,cherry</span><span style="color: rgba(255, 0, 0, 1)">'</span> <span style="color: rgba(0, 0, 255, 1)">AS</span> FRUIT <span style="color: rgba(0, 0, 255, 1)">FROM</span><span style="color: rgba(0, 0, 0, 1)"> DUAL
)
</span><span style="color: rgba(0, 0, 255, 1)">SELECT</span> NAME, REGEXP_SUBSTR(FRUIT, <span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">[^,]+</span><span style="color: rgba(255, 0, 0, 1)">'</span>, <span style="color: rgba(128, 0, 0, 1); font-weight: bold">1</span>, <span style="color: rgba(0, 0, 255, 1)">LEVEL</span>) <span style="color: rgba(0, 0, 255, 1)">AS</span><span style="color: rgba(0, 0, 0, 1)"> FRUIT
</span><span style="color: rgba(0, 0, 255, 1)">FROM</span><span style="color: rgba(0, 0, 0, 1)"> CTE_DATA
CONNECT </span><span style="color: rgba(0, 0, 255, 1)">BY</span> REGEXP_SUBSTR(FRUIT, <span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">[^,]+</span><span style="color: rgba(255, 0, 0, 1)">'</span>, <span style="color: rgba(128, 0, 0, 1); font-weight: bold">1</span>, <span style="color: rgba(0, 0, 255, 1)">LEVEL</span>) <span style="color: rgba(0, 0, 255, 1)">IS</span> <span style="color: rgba(128, 128, 128, 1)">NOT</span> <span style="color: rgba(0, 0, 255, 1)">NULL</span><span style="color: rgba(0, 0, 0, 1)">
;</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
</div>
<h2 id="7fPr-1768690884678">MySQL</h2>
<div>5.x+çæ¬åªè½ä½¿ç¨æ°å­è¾å©è¡¨+SUBSTRING_INDEXã</div>
<div>
<p><img alt="image" width="926" height="360" loading="lazy" style="border: 1px solid rgba(0, 0, 0, 1)" data-src="https://img2024.cnblogs.com/blog/775688/202601/775688-20260120063945417-1094574372.png" class="lazyload"></p>
</div>
<div>
<div class="cnblogs_code"><img id="code_img_closed_2f00195d-6b1a-4823-9aaf-ce74dfcdb1ee" class="code_img_closed lazyload" data-src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif"><img id="code_img_opened_2f00195d-6b1a-4823-9aaf-ce74dfcdb1ee" class="code_img_opened lazyload" style="display: none" data-src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif">
<div id="cnblogs_code_open_2f00195d-6b1a-4823-9aaf-ce74dfcdb1ee" class="cnblogs_code_hide">
<pre><span style="color: rgba(0, 0, 255, 1)">CREATE</span> <span style="color: rgba(0, 0, 255, 1)">TABLE</span> <span style="color: rgba(0, 0, 255, 1)">IF</span> <span style="color: rgba(128, 128, 128, 1)">NOT</span> <span style="color: rgba(128, 128, 128, 1)">EXISTS</span> numbers (n <span style="color: rgba(0, 0, 255, 1)">INT</span> <span style="color: rgba(0, 0, 255, 1)">PRIMARY</span> <span style="color: rgba(0, 0, 255, 1)">KEY</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 0, 255, 1)">INSERT</span> <span style="color: rgba(0, 0, 255, 1)">INTO</span><span style="color: rgba(0, 0, 0, 1)"> numbers
</span><span style="color: rgba(0, 0, 255, 1)">SELECT</span> a.N <span style="color: rgba(128, 128, 128, 1)">+</span> b.N <span style="color: rgba(128, 128, 128, 1)">*</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">10</span> <span style="color: rgba(128, 128, 128, 1)">+</span> c.N <span style="color: rgba(128, 128, 128, 1)">*</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">100</span> <span style="color: rgba(128, 128, 128, 1)">+</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">1</span> <span style="color: rgba(0, 0, 255, 1)">AS</span><span style="color: rgba(0, 0, 0, 1)"> n
</span><span style="color: rgba(0, 0, 255, 1)">FROM</span> (<span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">0</span> <span style="color: rgba(0, 0, 255, 1)">AS</span> N <span style="color: rgba(0, 0, 255, 1)">UNION</span> <span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">1</span> <span style="color: rgba(0, 0, 255, 1)">UNION</span> <span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">2</span> <span style="color: rgba(0, 0, 255, 1)">UNION</span> <span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">3</span> <span style="color: rgba(0, 0, 255, 1)">UNION</span> <span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">4</span> <span style="color: rgba(0, 0, 255, 1)">UNION</span> <span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">5</span> <span style="color: rgba(0, 0, 255, 1)">UNION</span> <span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">6</span> <span style="color: rgba(0, 0, 255, 1)">UNION</span> <span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">7</span> <span style="color: rgba(0, 0, 255, 1)">UNION</span> <span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">8</span> <span style="color: rgba(0, 0, 255, 1)">UNION</span> <span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">9</span><span style="color: rgba(0, 0, 0, 1)">) a
</span><span style="color: rgba(0, 0, 255, 1)">CROSS</span> <span style="color: rgba(128, 128, 128, 1)">JOIN</span> (<span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">0</span> <span style="color: rgba(0, 0, 255, 1)">AS</span> N <span style="color: rgba(0, 0, 255, 1)">UNION</span> <span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">1</span> <span style="color: rgba(0, 0, 255, 1)">UNION</span> <span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">2</span> <span style="color: rgba(0, 0, 255, 1)">UNION</span> <span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">3</span> <span style="color: rgba(0, 0, 255, 1)">UNION</span> <span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">4</span> <span style="color: rgba(0, 0, 255, 1)">UNION</span> <span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">5</span> <span style="color: rgba(0, 0, 255, 1)">UNION</span> <span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">6</span> <span style="color: rgba(0, 0, 255, 1)">UNION</span> <span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">7</span> <span style="color: rgba(0, 0, 255, 1)">UNION</span> <span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">8</span> <span style="color: rgba(0, 0, 255, 1)">UNION</span> <span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">9</span><span style="color: rgba(0, 0, 0, 1)">) b
</span><span style="color: rgba(0, 0, 255, 1)">CROSS</span> <span style="color: rgba(128, 128, 128, 1)">JOIN</span> (<span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">0</span> <span style="color: rgba(0, 0, 255, 1)">AS</span> N <span style="color: rgba(0, 0, 255, 1)">UNION</span> <span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">1</span> <span style="color: rgba(0, 0, 255, 1)">UNION</span> <span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">2</span> <span style="color: rgba(0, 0, 255, 1)">UNION</span> <span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">3</span> <span style="color: rgba(0, 0, 255, 1)">UNION</span> <span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">4</span> <span style="color: rgba(0, 0, 255, 1)">UNION</span> <span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">5</span> <span style="color: rgba(0, 0, 255, 1)">UNION</span> <span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">6</span> <span style="color: rgba(0, 0, 255, 1)">UNION</span> <span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">7</span> <span style="color: rgba(0, 0, 255, 1)">UNION</span> <span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">8</span> <span style="color: rgba(0, 0, 255, 1)">UNION</span> <span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">9</span><span style="color: rgba(0, 0, 0, 1)">) c;
</span><span style="color: rgba(0, 128, 128, 1)">--</span><span style="color: rgba(0, 128, 128, 1)"> ä½¿ç¨æ°å­è¡¨åå²</span>
<span style="color: rgba(0, 0, 255, 1)">SELECT</span><span style="color: rgba(0, 0, 0, 1)">
SUBSTRING_INDEX(
SUBSTRING_INDEX(</span><span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">a,b,c,d</span><span style="color: rgba(255, 0, 0, 1)">'</span>, <span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">,</span><span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(0, 0, 0, 1)">, numbers.n),
</span><span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">,</span><span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(0, 0, 0, 1)">,
</span><span style="color: rgba(128, 128, 128, 1)">-</span><span style="color: rgba(128, 0, 0, 1); font-weight: bold">1</span><span style="color: rgba(0, 0, 0, 1)">
) </span><span style="color: rgba(0, 0, 255, 1)">AS</span><span style="color: rgba(0, 0, 0, 1)"> part
</span><span style="color: rgba(0, 0, 255, 1)">FROM</span><span style="color: rgba(0, 0, 0, 1)"> numbers
</span><span style="color: rgba(0, 0, 255, 1)">WHERE</span> numbers.n <span style="color: rgba(128, 128, 128, 1)">&lt;=</span> LENGTH(<span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">a,b,c,d</span><span style="color: rgba(255, 0, 0, 1)">'</span>) <span style="color: rgba(128, 128, 128, 1)">-</span> LENGTH(<span style="color: rgba(255, 0, 255, 1)">REPLACE</span>(<span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">a,b,c,d</span><span style="color: rgba(255, 0, 0, 1)">'</span>, <span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">,</span><span style="color: rgba(255, 0, 0, 1)">'</span>, <span style="color: rgba(255, 0, 0, 1)">''</span>)) <span style="color: rgba(128, 128, 128, 1)">+</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">1</span>;</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>8.0+çæ¬å¯ä½¿ç¨json_table</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">SELECT</span><span style="color: rgba(0, 0, 0, 1)"> 
    o.order_id,
    j.product_id
</span><span style="color: rgba(0, 0, 255, 1)">FROM</span><span style="color: rgba(0, 0, 0, 1)"> orders o
</span><span style="color: rgba(128, 128, 128, 1)">JOIN</span><span style="color: rgba(0, 0, 0, 1)"> JSON_TABLE(
    CONCAT(</span><span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">["</span><span style="color: rgba(255, 0, 0, 1)">'</span>, <span style="color: rgba(255, 0, 255, 1)">REPLACE</span>(o.product_ids, <span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">,</span><span style="color: rgba(255, 0, 0, 1)">'</span>, <span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">","</span><span style="color: rgba(255, 0, 0, 1)">'</span>), <span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">"]</span><span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(0, 0, 0, 1)">),
    </span><span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">$[*]</span><span style="color: rgba(255, 0, 0, 1)">'</span> COLUMNS (product_id <span style="color: rgba(0, 0, 255, 1)">INT</span> PATH <span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">$</span><span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(0, 0, 0, 1)">)
) </span><span style="color: rgba(0, 0, 255, 1)">AS</span> j;</pre>
</div>
<h2 id="AoqL-1768690884660">SQL Server</h2>
</div>
<div>æ©æçæ¬æ åç½®å½æ°ï¼åªè½éè¿èªå®ä¹è¡¨å¼å½æ°ï¼TVFï¼æèXMLæ¹æ³</div>
<div>
<div class="cnblogs_code"><img id="code_img_closed_f7b1138f-107e-4278-9ae3-23f7365d8755" class="code_img_closed lazyload" data-src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif"><img id="code_img_opened_f7b1138f-107e-4278-9ae3-23f7365d8755" class="code_img_opened lazyload" style="display: none" data-src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif">
<div id="cnblogs_code_open_f7b1138f-107e-4278-9ae3-23f7365d8755" class="cnblogs_code_hide">
<pre><span style="color: rgba(0, 0, 255, 1)">CREATE</span> <span style="color: rgba(0, 0, 255, 1)">FUNCTION</span><span style="color: rgba(0, 0, 0, 1)"> dbo.SplitString
(
    </span><span style="color: rgba(0, 128, 0, 1)">@String</span> <span style="color: rgba(0, 0, 255, 1)">NVARCHAR</span>(<span style="color: rgba(255, 0, 255, 1)">MAX</span><span style="color: rgba(0, 0, 0, 1)">),
    </span><span style="color: rgba(0, 128, 0, 1)">@Delimiter</span> <span style="color: rgba(0, 0, 255, 1)">CHAR</span>(<span style="color: rgba(128, 0, 0, 1); font-weight: bold">1</span><span style="color: rgba(0, 0, 0, 1)">)
)
</span><span style="color: rgba(0, 0, 255, 1)">RETURNS</span> <span style="color: rgba(0, 128, 0, 1)">@Results</span> <span style="color: rgba(0, 0, 255, 1)">TABLE</span><span style="color: rgba(0, 0, 0, 1)"> 
(
    ID </span><span style="color: rgba(0, 0, 255, 1)">INT</span> <span style="color: rgba(255, 0, 255, 1)">IDENTITY</span>(<span style="color: rgba(128, 0, 0, 1); font-weight: bold">1</span>,<span style="color: rgba(128, 0, 0, 1); font-weight: bold">1</span><span style="color: rgba(0, 0, 0, 1)">),
    Value </span><span style="color: rgba(0, 0, 255, 1)">NVARCHAR</span>(<span style="color: rgba(255, 0, 255, 1)">MAX</span><span style="color: rgba(0, 0, 0, 1)">)
)
</span><span style="color: rgba(0, 0, 255, 1)">AS</span>
<span style="color: rgba(0, 0, 255, 1)">BEGIN</span>
    <span style="color: rgba(0, 0, 255, 1)">DECLARE</span> <span style="color: rgba(0, 128, 0, 1)">@pos</span> <span style="color: rgba(0, 0, 255, 1)">INT</span> <span style="color: rgba(128, 128, 128, 1)">=</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">0</span>
    <span style="color: rgba(0, 0, 255, 1)">DECLARE</span> <span style="color: rgba(0, 128, 0, 1)">@slice</span> <span style="color: rgba(0, 0, 255, 1)">NVARCHAR</span>(<span style="color: rgba(255, 0, 255, 1)">MAX</span><span style="color: rgba(0, 0, 0, 1)">)

    </span><span style="color: rgba(0, 0, 255, 1)">IF</span> <span style="color: rgba(128, 128, 128, 1)">RIGHT</span>(<span style="color: rgba(0, 128, 0, 1)">@String</span>, <span style="color: rgba(128, 0, 0, 1); font-weight: bold">1</span>) <span style="color: rgba(128, 128, 128, 1)">!=</span> <span style="color: rgba(0, 128, 0, 1)">@Delimiter</span>
        <span style="color: rgba(0, 0, 255, 1)">SET</span> <span style="color: rgba(0, 128, 0, 1)">@String</span> <span style="color: rgba(128, 128, 128, 1)">=</span> <span style="color: rgba(0, 128, 0, 1)">@String</span> <span style="color: rgba(128, 128, 128, 1)">+</span> <span style="color: rgba(0, 128, 0, 1)">@Delimiter</span>

    <span style="color: rgba(0, 0, 255, 1)">WHILE</span> <span style="color: rgba(255, 0, 255, 1)">CHARINDEX</span>(<span style="color: rgba(0, 128, 0, 1)">@Delimiter</span>, <span style="color: rgba(0, 128, 0, 1)">@String</span>) <span style="color: rgba(128, 128, 128, 1)">&gt;</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">0</span>
    <span style="color: rgba(0, 0, 255, 1)">BEGIN</span>
        <span style="color: rgba(0, 0, 255, 1)">SET</span> <span style="color: rgba(0, 128, 0, 1)">@pos</span> <span style="color: rgba(128, 128, 128, 1)">=</span> <span style="color: rgba(255, 0, 255, 1)">CHARINDEX</span>(<span style="color: rgba(0, 128, 0, 1)">@Delimiter</span>, <span style="color: rgba(0, 128, 0, 1)">@String</span><span style="color: rgba(0, 0, 0, 1)">)
        </span><span style="color: rgba(0, 0, 255, 1)">SET</span> <span style="color: rgba(0, 128, 0, 1)">@slice</span> <span style="color: rgba(128, 128, 128, 1)">=</span> <span style="color: rgba(128, 128, 128, 1)">LEFT</span>(<span style="color: rgba(0, 128, 0, 1)">@String</span>, <span style="color: rgba(0, 128, 0, 1)">@pos</span> <span style="color: rgba(128, 128, 128, 1)">-</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">1</span><span style="color: rgba(0, 0, 0, 1)">)
        
        </span><span style="color: rgba(0, 0, 255, 1)">INSERT</span> <span style="color: rgba(0, 0, 255, 1)">INTO</span> <span style="color: rgba(0, 128, 0, 1)">@Results</span> (Value) <span style="color: rgba(0, 0, 255, 1)">VALUES</span> (<span style="color: rgba(0, 128, 0, 1)">@slice</span><span style="color: rgba(0, 0, 0, 1)">)
        </span><span style="color: rgba(0, 0, 255, 1)">SET</span> <span style="color: rgba(0, 128, 0, 1)">@String</span> <span style="color: rgba(128, 128, 128, 1)">=</span> <span style="color: rgba(255, 0, 255, 1)">STUFF</span>(<span style="color: rgba(0, 128, 0, 1)">@String</span>, <span style="color: rgba(128, 0, 0, 1); font-weight: bold">1</span>, <span style="color: rgba(0, 128, 0, 1)">@pos</span>, <span style="color: rgba(255, 0, 0, 1)">''</span><span style="color: rgba(0, 0, 0, 1)">)
    </span><span style="color: rgba(0, 0, 255, 1)">END</span>
    
    <span style="color: rgba(0, 0, 255, 1)">RETURN</span>
<span style="color: rgba(0, 0, 255, 1)">END</span>

<span style="color: rgba(0, 128, 128, 1)">--</span><span style="color: rgba(0, 128, 128, 1)"> ä½¿ç¨ç¤ºä¾</span>
<span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(128, 128, 128, 1)">*</span> <span style="color: rgba(0, 0, 255, 1)">FROM</span> dbo.SplitString(<span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">å¼ ä¸,æå,çäº</span><span style="color: rgba(255, 0, 0, 1)">'</span>, <span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">,</span><span style="color: rgba(255, 0, 0, 1)">'</span>)</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<div class="cnblogs_code"><img id="code_img_closed_3ed525c1-7f6f-49ac-9b5f-2bc138b81373" class="code_img_closed lazyload" data-src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif"><img id="code_img_opened_3ed525c1-7f6f-49ac-9b5f-2bc138b81373" class="code_img_opened lazyload" style="display: none" data-src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif">
<div id="cnblogs_code_open_3ed525c1-7f6f-49ac-9b5f-2bc138b81373" class="cnblogs_code_hide">
<pre><span style="color: rgba(0, 0, 255, 1)">DECLARE</span> <span style="color: rgba(0, 128, 0, 1)">@str</span> <span style="color: rgba(0, 0, 255, 1)">NVARCHAR</span>(<span style="color: rgba(128, 0, 0, 1); font-weight: bold">100</span>) <span style="color: rgba(128, 128, 128, 1)">=</span> <span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">è¹æ|é¦è|æ©å­</span><span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 0, 255, 1)">DECLARE</span> <span style="color: rgba(0, 128, 0, 1)">@separator</span> <span style="color: rgba(0, 0, 255, 1)">CHAR</span>(<span style="color: rgba(128, 0, 0, 1); font-weight: bold">1</span>) <span style="color: rgba(128, 128, 128, 1)">=</span> <span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">|</span><span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(0, 0, 0, 1)">;

</span><span style="color: rgba(0, 0, 255, 1)">SELECT</span> 
    <span style="color: rgba(255, 0, 255, 1)">LTRIM</span>(<span style="color: rgba(255, 0, 255, 1)">RTRIM</span>(m.n.value(<span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">.[1]</span><span style="color: rgba(255, 0, 0, 1)">'</span>, <span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">NVARCHAR(100)</span><span style="color: rgba(255, 0, 0, 1)">'</span>))) <span style="color: rgba(0, 0, 255, 1)">AS</span><span style="color: rgba(0, 0, 0, 1)"> SplitValue
</span><span style="color: rgba(0, 0, 255, 1)">FROM</span><span style="color: rgba(0, 0, 0, 1)"> 
    (</span><span style="color: rgba(0, 0, 255, 1)">SELECT</span> <span style="color: rgba(255, 0, 255, 1)">CAST</span>(<span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">&lt;x&gt;</span><span style="color: rgba(255, 0, 0, 1)">'</span> <span style="color: rgba(128, 128, 128, 1)">+</span> <span style="color: rgba(255, 0, 255, 1)">REPLACE</span>(<span style="color: rgba(0, 128, 0, 1)">@str</span>, <span style="color: rgba(0, 128, 0, 1)">@separator</span>, <span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">&lt;/x&gt;&lt;x&gt;</span><span style="color: rgba(255, 0, 0, 1)">'</span>) <span style="color: rgba(128, 128, 128, 1)">+</span> <span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">&lt;/x&gt;</span><span style="color: rgba(255, 0, 0, 1)">'</span> <span style="color: rgba(0, 0, 255, 1)">AS</span> XML)) <span style="color: rgba(0, 0, 255, 1)">AS</span><span style="color: rgba(0, 0, 0, 1)"> t(x)
</span><span style="color: rgba(0, 0, 255, 1)">CROSS</span><span style="color: rgba(0, 0, 0, 1)"> APPLY 
    x.nodes(</span><span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">/x</span><span style="color: rgba(255, 0, 0, 1)">'</span>) <span style="color: rgba(0, 0, 255, 1)">AS</span> m(n);</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>2016ä¹åççæ¬å¯ä½¿ç¨åçæ¹æ³STRING_SPLIT</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)">--</span><span style="color: rgba(0, 128, 128, 1)">å¸¦åºå·ççæ¬ï¼SQL Server 2022+ï¼</span>
<span style="color: rgba(0, 0, 255, 1)">SELECT</span><span style="color: rgba(0, 0, 0, 1)"> value, ordinal
</span><span style="color: rgba(0, 0, 255, 1)">FROM</span> STRING_SPLIT(<span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">a,b,c</span><span style="color: rgba(255, 0, 0, 1)">'</span>, <span style="color: rgba(255, 0, 0, 1)">'</span><span style="color: rgba(255, 0, 0, 1)">,</span><span style="color: rgba(255, 0, 0, 1)">'</span>, <span style="color: rgba(128, 0, 0, 1); font-weight: bold">1</span>) <span style="color: rgba(0, 128, 128, 1)">--</span><span style="color: rgba(0, 128, 128, 1)"> ç¬¬ä¸ä¸ªåæ°å¯ç¨åºå·</span></pre>
</div>
</div>
<h1>ä¸ãç»è®º</h1>
<div>ããSpark SQLãPostgreSQLææ¹ä¾¿ï¼æè·¯ä¹æ¯è¾ç¸ä¼¼ï¼é½æ¯åå°å­ç¬¦ä¸²æåæ°ç»ï¼ç¶åæ©å±æè¡¨ãSQLServeræ°çæ¬å®ç°è¾ä¸ºæ¹æ³ï¼ç´æ¥ä¸ä¸ªå½æ°æå®ãOracleå©ç¨å¶connect byæ¥å®ç°ï¼ä¹ç¸å¯¹ä¾¿æ·ï¼åªæ¯ç¸å¯¹ä¸»æµSQLæ¹è¨æ¯è¾å°ä¼ä¸ç¹ãMysqlæ°çæ¬ç¸å¯¹æ¹ä¾¿ä¸ç¹ï¼èçæ¬éè¦è¾å©è¡¨å¢å ç»´æ¤ææ¬ã</div>
<h1>åãåèé¾æ¥</h1>
<div><a href="https://www.kimi.com/share/19bd8855-80d2-8885-8000-00003449be16" target="_blank" rel="noopener nofollow">https://www.kimi.com/share/19bd8855-80d2-8885-8000-00003449be16</a></div>
<div><a href="https://www.kimi.com/share/19bd8885-e842-8472-8000-000042aa28d0" target="_blank" rel="noopener nofollow">https://www.kimi.com/share/19bd8885-e842-8472-8000-000042aa28d0</a></div>
<div><a href="https://chat.deepseek.com/share/h9bv2i75c90jcfz3uo" target="_blank" rel="noopener nofollow">https://chat.deepseek.com/share/h9bv2i75c90jcfz3uo</a></div>
<div><a href="http://blog.itpub.net/16436858/viewspace-624191/" rel="noopener nofollow">http://blog.itpub.net/16436858/viewspace-624191/</a></div>
<div>&nbsp;</div>
<div>&nbsp;</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-20 08:09">2026-01-20 08:08</span>&nbsp;
<a href="https://www.cnblogs.com/davablog">å¤§æ±ªçæ°æ®ä¹è·¯</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19497701);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19497701', targetLink: 'https://www.cnblogs.com/davablog/p/19497701', title: 'å­ç¬¦ä¸²åå²å¹¶å±å¼æè¡¨æ ¼çSQLå®ç°æ¹æ³' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ unityæ§è½ä¼å-å®éå¼åä¸­éè¦æ³¨æçç¹ ]]></title>
    <link>https://www.cnblogs.com/pipicfan/p/19503936</link>
    <guid>6a1ed8bf94a8c71916718dc35bfc0126</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/pipicfan/p/19503936" title="åå¸äº 2026-01-19 22:55">
    <span role="heading" aria-level="2">unityæ§è½ä¼å-å®éå¼åä¸­éè¦æ³¨æçç¹</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p><strong>unityæ§è½ä¼å-å®éå¼åä¸­éè¦æ³¨æçç¹</strong></p>
<p><a id="heading_0"></a><strong>æ§è½ä¼åå»ºè®®</strong></p>
<p>å¨è¿è¡ä¸é¢ä¼åä¹åï¼å»ºè®®åä½¿ç¨ <strong>Unity Profiler</strong> å®ä½çå®çç¶é¢ã</p>
<p><strong>ä¼åæ ¸å¿ååï¼</strong></p>
<p><strong>è½ç¼å­çå°±ç¼å­</strong>ï¼åéãç»ä»¶ãæè´¨ï¼ã</p>
<p><strong>è½ä¸æ´æ°å°±ä¸æ´æ°</strong>ï¼éä½ update é¢çï¼ä½¿ç¨äºä»¶é©±å¨æCoroutineï¼ã</p>
<p><strong>é¿åå¨å¾ªç¯ä¸­åéåå­</strong>ï¼åå° new å³é®å­ï¼ä½¿ç¨å¯¹è±¡æ± ï¼ã</p>
<p><a id="heading_1"></a><strong>1.å¤ææ°å­¦è®¡ç®ï¼æ¯å¦meshé¡¶ç¹æ°æ®çåå»ºï¼å¤§å°åå½ä¸åå±æ§é½éå¸¸èè´¹ CPUï¼é½æ¶åè®¡ç®å¹³æ¹æ ¹ï¼</strong></p>
<p>å¯ä»¥ä½¿ç¨å¯¹è±¡æ± æ¥ç©ºé´æ¢æ¶é´å¤çï¼æ¶åå¼æ ¹å·çç¨å¹³æ¹æ¯è¾</p>
<p><img src="https://img2024.cnblogs.com/blog/357310/202601/357310-20260119225507554-1515541958.png"></p>
<p><a id="heading_2"></a><strong>2.shaderçåæ¹å¤ç</strong></p>
<p><img src="https://img2024.cnblogs.com/blog/357310/202601/357310-20260119230139424-582581237.png"></p>
<p><img src="https://img2024.cnblogs.com/blog/357310/202601/357310-20260119230139503-1658596290.png"></p>
<p><a id="heading_3"></a><strong>3.ä¸äºListï¼Vectorä¸è¦ç¨éåï¼èæ¯æå®å®çå¤§å°</strong></p>
<p><img src="https://img2024.cnblogs.com/blog/357310/202601/357310-20260119230139380-946016432.png"></p>
<p><a id="heading_4"></a><strong>4.ä¸è¦åupdateéé¢å»å¤§éè°ç¨Componentï¼æ°æå®¹æå¿½ç¥éè¦ï¼</strong></p>
<p><img src="https://img2024.cnblogs.com/blog/357310/202601/357310-20260119225506870-1113031628.png"></p>
<p><a id="heading_5"></a><strong>5.ä¼åå­ç¬¦ä¸²å¯¹æ¯</strong></p>
<p><img src="https://img2024.cnblogs.com/blog/357310/202601/357310-20260119230139483-820107562.png"></p>
<p><img src="https://img2024.cnblogs.com/blog/357310/202601/357310-20260119230139441-648476313.png"></p>
<p><a id="heading_6"></a><strong>6.å¸¸éçå­ç¬¦ä¸²åæç±»çæååé</strong></p>
<p><img src="https://img2024.cnblogs.com/blog/357310/202601/357310-20260119225506734-1746349249.png"></p>
<p><a id="heading_7"></a><strong>7.è£åªå¼æï¼å»æé³é¢</strong></p>
<p><img src="https://img2024.cnblogs.com/blog/357310/202601/357310-20260119225507500-1539839110.png"></p>
<p><a id="heading_8"></a><strong>8.è£åªå¼æï¼å»æç©çï¼æ³¨ææ­¤æ¶åæ¬åå´çé½ä¸è½ä½¿ç¨</strong></p>
<p><img src="https://img2024.cnblogs.com/blog/357310/202601/357310-20260119230139347-1887459637.png"></p>
<p><a id="heading_9"></a><strong>9.åºå®å¸§çï¼åå°å¸§ç</strong></p>
<p><img src="https://img2024.cnblogs.com/blog/357310/202601/357310-20260119230139518-121341222.png"></p>
<p><a id="heading_10"></a><strong>10.é¿åä½¿ç¨æç®±è£ç®±</strong></p>
<p>å¨C#ä¸­ï¼è£ç®±ï¼Boxingï¼åæç®±ï¼Unboxingï¼æ¯æå¼ç±»åä¸å¼ç¨ç±»åä¹é´çè½¬æ¢ãè£ç®±æ¯å°å¼ç±»åè½¬æ¢ä¸ºå¯¹è±¡ç±»åï¼éå¸¸æ¯å°å¼ç±»ååè£å¨å ä¸ï¼ï¼èæç®±åæ¯ä»å¯¹è±¡ç±»åè¿åä¸ºå¼ç±»åã</p>
<p><a id="heading_11"></a><strong>è£ç®±ï¼Boxingï¼å¼é</strong></p>
<p><strong>åå­åé</strong>ï¼</p>
<p>è£ç®±è¿ç¨ä¸­ï¼ä¼å¨å ä¸åéåå­æ¥å­å¨å¼ç±»åçæ°æ®ãå åå­çåééå¸¸æ¯æ åå­çåéæ¢ï¼å ä¸ºå åå­éè¦å¤çåå¾åæ¶ï¼Garbage Collectionï¼ï¼èä¸å åå­åéæ¶åæ´å¤çç®¡çæä½ã</p>
<p><strong>æ°æ®å¤å¶</strong>ï¼</p>
<p>è£ç®±éè¦å°å¼ç±»åçæ°æ®ä»æ ä¸å¤å¶å°æ°åéçå å¯¹è±¡ä¸­ãè¿æ¶åå°æ°æ®çå¤å¶æä½ï¼å¢å äºé¢å¤çå¼éã</p>
<p><strong>åå¾åæ¶</strong>ï¼</p>
<p>è£ç®±äº§ççå å¯¹è±¡æç»ä¼ç±åå¾åæ¶å¨ï¼GCï¼åæ¶ãåå¾åæ¶æ¯ä¸ä¸ªèæ¶çè¿ç¨ï¼ä¼å½±ååºç¨ç¨åºçæ§è½ã</p>
<p><a id="heading_12"></a><strong>æç®±ï¼Unboxingï¼å¼é</strong></p>
<p><strong>ç±»åæ£æ¥</strong>ï¼</p>
<p>æç®±è¿ç¨ä¸­ï¼éè¦è¿è¡ç±»åæ£æ¥ï¼ä»¥ç¡®ä¿å¯¹è±¡ç¡®å®æ¯é¢æçå¼ç±»åãè¿æ¶åå°è¿è¡æ¶çç±»ååæ°æ®è®¿é®åæ£æ¥ï¼å¢å äºå¼éã</p>
<p><strong>æ°æ®å¤å¶</strong>ï¼</p>
<p>æç®±éè¦å°å ä¸çæ°æ®å¤å¶åæ ä¸ãè¿åæ ·æ¶åæ°æ®çå¤å¶æä½ï¼å¸¦æ¥äºé¢å¤çæ§è½å¼éã</p>
<p><a id="heading_13"></a><strong>é¿åè£ç®±åæç®±çæ¹æ³</strong></p>
<p><strong>ä½¿ç¨æ³å</strong>ï¼æ³åå¯ä»¥åå°è£ç®±åæç®±çéè¦ï¼å ä¸ºæ³åå¯ä»¥å¨ç¼è¯æ¶ç¡®å®ç±»åï¼èä¸éè¦å¨è¿è¡æ¶è¿è¡ç±»åè½¬æ¢ï¼ä½æ¯æ³åå¸¦æ¥å¦ä¸ä¸ªé®é¢ï¼å³è½¬æ¢ä¸ºil2cppçæ¶åï¼ä»£ç ä¼è¨èï¼è¿ä¸ªåé¢å¯ä»¥åè¯´</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ä½¿ç¨æ³åé¿åè£ç®±åæç®±</span>
List&lt;intnumbers = <span style="color: rgba(0, 0, 255, 1)">new</span> List&lt;<span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)">();
numbers.Add(</span><span style="color: rgba(128, 0, 128, 1)">42</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 0, 255, 1)">int</span> number = numbers[<span style="color: rgba(128, 0, 128, 1)">0</span>];</pre>
</div>
<p>&nbsp;</p>
<br>
<p><strong>é¿åé¢ç¹çå¼ç±»åå°å¼ç¨ç±»åçè½¬æ¢</strong>ï¼å¨è®¾è®¡ç¨åºæ¶ï¼å°½éåå°å¼ç±»åä¸å¼ç¨ç±»åä¹é´çè½¬æ¢ãå¦æå¯è½ï¼å°½éä½¿ç¨å¼ç±»åæ¬èº«æ¥è¿è¡è®¡ç®åå¤çã</p>
<p><strong>ä½¿ç¨structèä¸æ¯ç±»</strong>ï¼å¨æäºæåµä¸ï¼å¯ä»¥ä½¿ç¨structæ¥ä»£æ¿ç±»ï¼å ä¸ºstructæ¯å¼ç±»åï¼ä¸éè¦è£ç®±åæç®±ã</p>
<p><strong>é¿åæ¥å£è°ç¨</strong>ï¼æ¥å£è°ç¨éå¸¸éè¦è£ç®±ï¼ç¹å«æ¯å¨æ¥å£æ¥åå¼ç±»ååæ°æ¶ãå°½éé¿åå¨æ¥å£æ¹æ³ä¸­ä½¿ç¨å¼ç±»ååæ°</p>
<p><a id="heading_14"></a><strong>11.GameObject.Instantiate  å SetParent</strong></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)"> 1</span> <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> ESDRoadEdgePool
</span><span style="color: rgba(0, 128, 128, 1)"> 2</span> <span style="color: rgba(0, 0, 0, 1)">{
</span><span style="color: rgba(0, 128, 128, 1)"> 3</span>     <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">public int amountToPool = 100; </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æ± ä¸­å¯¹è±¡çæ°é </span>
<span style="color: rgba(0, 128, 128, 1)"> 4</span>     <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">int</span> amountToPool = <span style="color: rgba(128, 0, 128, 1)">25</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)"> 5</span>     
<span style="color: rgba(0, 128, 128, 1)"> 6</span>     pooledObjects = <span style="color: rgba(0, 0, 255, 1)">new</span> List&lt;GameObject&gt;<span style="color: rgba(0, 0, 0, 1)">();
</span><span style="color: rgba(0, 128, 128, 1)"> 7</span> 
<span style="color: rgba(0, 128, 128, 1)"> 8</span>     <span style="color: rgba(0, 0, 255, 1)">for</span> (<span style="color: rgba(0, 0, 255, 1)">int</span> i = <span style="color: rgba(128, 0, 128, 1)">0</span>; i &lt; amountToPool; i++<span style="color: rgba(0, 0, 0, 1)">)
</span><span style="color: rgba(0, 128, 128, 1)"> 9</span> <span style="color: rgba(0, 0, 0, 1)">    {
</span><span style="color: rgba(0, 128, 128, 1)">10</span>         GameObject obj = Instantiate(objectToPool); <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> å®ä¾åå¯ä»¥ç¼©å</span>
<span style="color: rgba(0, 128, 128, 1)">11</span>         obj.SetActive(<span style="color: rgba(0, 0, 255, 1)">false</span>);                       <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> å¯ä»¥é¢åè®¾ç½®é¢å¶ä½çactiveSelf</span>
<span style="color: rgba(0, 128, 128, 1)">12</span>         obj.transform.parent = <span style="color: rgba(0, 0, 255, 1)">this</span>.transform;      <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> å¯ä»¥åå¹¶å°Instantiateä¸­</span>
<span style="color: rgba(0, 128, 128, 1)">13</span> <span style="color: rgba(0, 0, 0, 1)">        pooledObjects.Add(obj);
</span><span style="color: rgba(0, 128, 128, 1)">14</span>         
<span style="color: rgba(0, 128, 128, 1)">15</span>            
<span style="color: rgba(0, 128, 128, 1)">16</span>         GameObject obj =<span style="color: rgba(0, 0, 0, 1)"> Instantiate(objectToPool, transform);
</span><span style="color: rgba(0, 128, 128, 1)">17</span> <span style="color: rgba(0, 0, 0, 1)">        pooledObjects.Add(obj);
</span><span style="color: rgba(0, 128, 128, 1)">18</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">19</span> }</pre>
</div>
<p>&nbsp;</p>
<p><a id="heading_15"></a><strong>12.åµå¥å¾ªç¯ä¸­new Vector3ç­</strong></p>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">ã</pre>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)"> 1</span> <span style="color: rgba(0, 0, 255, 1)">for</span>(<span style="color: rgba(0, 0, 255, 1)">int</span> i = <span style="color: rgba(128, 0, 128, 1)">0</span>; i &lt; count; i++<span style="color: rgba(0, 0, 0, 1)">)
</span><span style="color: rgba(0, 128, 128, 1)"> 2</span> <span style="color: rgba(0, 0, 0, 1)">{
</span><span style="color: rgba(0, 128, 128, 1)"> 3</span> <span style="color: rgba(0, 0, 0, 1)">    ...
</span><span style="color: rgba(0, 128, 128, 1)"> 4</span>     Vector2 p1l_uv = <span style="color: rgba(0, 0, 255, 1)">new</span> Vector2(offest.x, uvStart /<span style="color: rgba(0, 0, 0, 1)"> 10f);
</span><span style="color: rgba(0, 128, 128, 1)"> 5</span>     Vector2 p1r_uv = <span style="color: rgba(0, 0, 255, 1)">new</span> Vector2(offest.y, uvStart /<span style="color: rgba(0, 0, 0, 1)"> 10f);
</span><span style="color: rgba(0, 128, 128, 1)"> 6</span>     Vector2 p2l_uv = <span style="color: rgba(0, 0, 255, 1)">new</span> Vector2(offest.x, (uvStart + distance) / <span style="color: rgba(128, 0, 128, 1)">10</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)"> 7</span>     Vector2 p2r_uv = <span style="color: rgba(0, 0, 255, 1)">new</span> Vector2(offest.y, (uvStart + distance) / <span style="color: rgba(128, 0, 128, 1)">10</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)"> 8</span> <span style="color: rgba(0, 0, 0, 1)">    ...
</span><span style="color: rgba(0, 128, 128, 1)"> 9</span> <span style="color: rgba(0, 0, 0, 1)">}
</span><span style="color: rgba(0, 128, 128, 1)">10</span> 
<span style="color: rgba(0, 128, 128, 1)">11</span> <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> å¯ä»¥å°å¯¹è±¡åå»ºæªå°å¾ªç¯å¤è¿è¡å¤ç¨</span>
<span style="color: rgba(0, 128, 128, 1)">12</span> 
<span style="color: rgba(0, 128, 128, 1)">13</span> Vector2 p1l_uv = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> Vector2();
</span><span style="color: rgba(0, 128, 128, 1)">14</span> Vector2 p1r_uv = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> Vector2();
</span><span style="color: rgba(0, 128, 128, 1)">15</span> Vector2 p2l_uv = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> Vector2();
</span><span style="color: rgba(0, 128, 128, 1)">16</span> Vector2 p2r_uv = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> Vector2();
</span><span style="color: rgba(0, 128, 128, 1)">17</span> 
<span style="color: rgba(0, 128, 128, 1)">18</span> <span style="color: rgba(0, 0, 255, 1)">for</span>(<span style="color: rgba(0, 0, 255, 1)">int</span> i = <span style="color: rgba(128, 0, 128, 1)">0</span>; i &lt; count; i++<span style="color: rgba(0, 0, 0, 1)">)
</span><span style="color: rgba(0, 128, 128, 1)">19</span> <span style="color: rgba(0, 0, 0, 1)">{
</span><span style="color: rgba(0, 128, 128, 1)">20</span> <span style="color: rgba(0, 0, 0, 1)">    ...
</span><span style="color: rgba(0, 128, 128, 1)">21</span>     <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> åæ¶å¯ä»¥ä½¿ç¨Vector3.Setæ¥ä¸æ¬¡æ§å¯¹åéçæ¯ä¸ªåéè¿è¡èµå¼</span>
<span style="color: rgba(0, 128, 128, 1)">22</span>     p1l_uv.Set(offest.x, uvStart /<span style="color: rgba(0, 0, 0, 1)"> 10f);
</span><span style="color: rgba(0, 128, 128, 1)">23</span>     p1r_uv.Set(offest.y, uvStart /<span style="color: rgba(0, 0, 0, 1)"> 10f);
</span><span style="color: rgba(0, 128, 128, 1)">24</span>     p2l_uv.Set(offest.x, (uvStart + distance) / <span style="color: rgba(128, 0, 128, 1)">10</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">25</span>     p2r_uv.Set(offest.y, (uvStart + distance) / <span style="color: rgba(128, 0, 128, 1)">10</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">26</span> <span style="color: rgba(0, 0, 0, 1)">    ...
</span><span style="color: rgba(0, 128, 128, 1)">27</span> }</pre>
</div>
<p>&nbsp;</p>
</div>
<p><a id="heading_16"></a><strong>13.æ¯å¸§å¾ªç¯è°ç¨çè®¡ç®é»è¾ï¼å¯ä»¥ä½¿ç¨å¯¹è±¡æ± æ¿ä»£</strong></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)"> 1</span> <span style="color: rgba(0, 0, 255, 1)">for</span> (<span style="color: rgba(0, 0, 255, 1)">int</span> i = <span style="color: rgba(128, 0, 128, 1)">0</span>; i &lt; len - <span style="color: rgba(128, 0, 128, 1)">1</span>; i++<span style="color: rgba(0, 0, 0, 1)">)
</span><span style="color: rgba(0, 128, 128, 1)"> 2</span> <span style="color: rgba(0, 0, 0, 1)">{
</span><span style="color: rgba(0, 128, 128, 1)"> 3</span> <span style="color: rgba(0, 0, 0, 1)">    ...
</span><span style="color: rgba(0, 128, 128, 1)"> 4</span>     SquareCell cell = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> SquareCell();
</span><span style="color: rgba(0, 128, 128, 1)"> 5</span> <span style="color: rgba(0, 0, 0, 1)">    ...
</span><span style="color: rgba(0, 128, 128, 1)"> 6</span> <span style="color: rgba(0, 0, 0, 1)"> }
</span><span style="color: rgba(0, 128, 128, 1)"> 7</span>  
<span style="color: rgba(0, 128, 128, 1)"> 8</span>  <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> å å¥å¯¹è±¡æ± </span>
<span style="color: rgba(0, 128, 128, 1)"> 9</span>  <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> SquareCellPool
</span><span style="color: rgba(0, 128, 128, 1)">10</span> <span style="color: rgba(0, 0, 0, 1)"> {
</span><span style="color: rgba(0, 128, 128, 1)">11</span>     <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">static</span><span style="color: rgba(0, 0, 0, 1)"> SquareCell Allocate()
</span><span style="color: rgba(0, 128, 128, 1)">12</span> <span style="color: rgba(0, 0, 0, 1)">    {
</span><span style="color: rgba(0, 128, 128, 1)">13</span>         <span style="color: rgba(0, 0, 255, 1)">if</span> (pool.TryDequeue(<span style="color: rgba(0, 0, 255, 1)">out</span> <span style="color: rgba(0, 0, 255, 1)">var</span><span style="color: rgba(0, 0, 0, 1)"> cell))
</span><span style="color: rgba(0, 128, 128, 1)">14</span> <span style="color: rgba(0, 0, 0, 1)">        {
</span><span style="color: rgba(0, 128, 128, 1)">15</span>             totalCount--<span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">16</span>             <span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> cell;
</span><span style="color: rgba(0, 128, 128, 1)">17</span> <span style="color: rgba(0, 0, 0, 1)">        }
</span><span style="color: rgba(0, 128, 128, 1)">18</span>     
<span style="color: rgba(0, 128, 128, 1)">19</span>         <span style="color: rgba(0, 0, 255, 1)">for</span> (<span style="color: rgba(0, 0, 255, 1)">int</span> i = <span style="color: rgba(128, 0, 128, 1)">0</span>; i &lt; poolInterval; i++<span style="color: rgba(0, 0, 0, 1)">)
</span><span style="color: rgba(0, 128, 128, 1)">20</span> <span style="color: rgba(0, 0, 0, 1)">        {
</span><span style="color: rgba(0, 128, 128, 1)">21</span>             SquareCell newCell = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> SquareCell();
</span><span style="color: rgba(0, 128, 128, 1)">22</span> <span style="color: rgba(0, 0, 0, 1)">            pool.Enqueue(newCell);
</span><span style="color: rgba(0, 128, 128, 1)">23</span>             totalCount++<span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">24</span> <span style="color: rgba(0, 0, 0, 1)">        }
</span><span style="color: rgba(0, 128, 128, 1)">25</span>     
<span style="color: rgba(0, 128, 128, 1)">26</span>         <span style="color: rgba(0, 0, 255, 1)">if</span> (totalCount &gt; <span style="color: rgba(128, 0, 128, 1)">65535</span><span style="color: rgba(0, 0, 0, 1)">)
</span><span style="color: rgba(0, 128, 128, 1)">27</span> <span style="color: rgba(0, 0, 0, 1)">        {
</span><span style="color: rgba(0, 128, 128, 1)">28</span>             Debug.LogError(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Pool Out of Count!</span><span style="color: rgba(128, 0, 0, 1)">"</span> +<span style="color: rgba(0, 0, 0, 1)"> totalCount);
</span><span style="color: rgba(0, 128, 128, 1)">29</span>             <span style="color: rgba(0, 0, 255, 1)">return</span> <span style="color: rgba(0, 0, 255, 1)">null</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">30</span> <span style="color: rgba(0, 0, 0, 1)">        }
</span><span style="color: rgba(0, 128, 128, 1)">31</span>         cell =<span style="color: rgba(0, 0, 0, 1)"> pool.Dequeue();
</span><span style="color: rgba(0, 128, 128, 1)">32</span>         totalCount--<span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">33</span>         <span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> cell;
</span><span style="color: rgba(0, 128, 128, 1)">34</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">35</span>  }</pre>
</div>
<p>&nbsp;</p>
<br>
<p><a id="heading_17"></a><strong>14.Shaderä¸­å¤çé»è¾è½ä¸ä½¿ç¨é«ç²¾åº¦å¯ä»¥ä½¿ç¨ä½ç²¾åº¦ç</strong></p>
<p><img src="https://img2024.cnblogs.com/blog/357310/202601/357310-20260119225508259-375921676.png"></p>
<p><img src="https://img2024.cnblogs.com/blog/357310/202601/357310-20260119225507827-2125826982.png"></p>
<p><a id="heading_18"></a><strong>15.é¿å Camera.main</strong></p>
<p>å¨ Unity ä¸­ï¼Camera.main å®éä¸æ¯è°ç¨äº GameObject.FindWithTag("MainCamera")ï¼è¿æ¯ä¸ä¸ªéå¸¸èæ¶çæä½</p>
<p><img src="https://img2024.cnblogs.com/blog/357310/202601/357310-20260119225502907-593523569.png"></p>
<p>åç°unityææ¡£éé¢,è¿åå¶å®ä¹æ¯åäºç¼å­gameobject</p>
<p><img src="https://img2024.cnblogs.com/blog/357310/202601/357310-20260119225506505-1590491376.jpg"></p>
<p>ä½æ¯ç¼å­è¯å®è¿æ¯æå¿«ç,å ä¸ºgameobjectä¹æå¼é</p>
<p><strong>æ¬ææ¡£ä¼éç»­è¡¥åæ´æ°ï¼ä¼åæ æ­¢å¢</strong></p>
</div>
<div id="MySignature" role="contentinfo">
    æèªè±ª ææ¯ä¸åè½¯ä»¶å·¥ç¨å¸ã
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.004861111111111111" data-date-updated="2026-01-19 23:02">2026-01-19 22:55</span>&nbsp;
<a href="https://www.cnblogs.com/pipicfan">pipicfan</a>&nbsp;
éè¯»(<span id="post_view_count">52</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19503936);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19503936', targetLink: 'https://www.cnblogs.com/pipicfan/p/19503936', title: 'unityæ§è½ä¼å-å®éå¼åä¸­éè¦æ³¨æçç¹' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ DeploySharp å¨é¢æ¯æ YOLO26 ç³»åï¼å©åå¼åèå¿«éé¨ç½²è½å°åºç¨ ]]></title>
    <link>https://www.cnblogs.com/guojin-blogs/p/19503930</link>
    <guid>6040d6e8c484fd1a8328096051f44c9f</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/guojin-blogs/p/19503930" title="åå¸äº 2026-01-19 22:47">
    <span role="heading" aria-level="2">DeploySharp å¨é¢æ¯æ YOLO26 ç³»åï¼å©åå¼åèå¿«éé¨ç½²è½å°åºç¨</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/2933426/202601/2933426-20260119224728680-943487144.png" alt="DeploySharp å¨é¢æ¯æ YOLO26 ç³»åï¼å©åå¼åèå¿«éé¨ç½²è½å°åºç¨" class="desc_img">
        DeploySharpæ¯ä¸ä¸ªä¸ä¸ºC#å¼åèè®¾è®¡çè·¨å¹³å°æ¨¡åé¨ç½²æ¡æ¶ï¼å¨é¢æ¯æYOLOv26ç³»åæ¨¡åï¼åæ¬ç®æ æ£æµãå®ä¾åå²ãå§¿æä¼°è®¡åæè½¬æ¡æ£æµãè¯¥æ¡æ¶æä¾å¤å¼ææ¯æ(OpenVINO/ONNX Runtime/TensorRT)ãä¸¤ç§å¾åå¤çåºéæ©(ImageSharp/OpenCvSharp)ä»¥åè·¨å¹³å°è¿è¡æ¶å¼å®¹æ§ãéè¿æ¨¡ååæ¶æåNuGetåçæï¼å¼åèå¯ä»¥å¿«éé¨ç½²YOLOv26æ¨¡åï¼å®ç°ä»æ¨¡åå è½½å°æ¨çæ§è¡çç«¯å°ç«¯è§£å³æ¹æ¡ãé¡¹ç®å¼æºä¸æ¯æå¤ç§ç¡¬ä»¶è®¾å¤ï¼ä¸ºè®¡ç®æºè§è§åºç¨è½å°æä¾é«æå·¥å·ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="deploysharp-å¨é¢æ¯æ-yolo26-ç³»åå©åå¼åèå¿«éé¨ç½²è½å°åºç¨">DeploySharp å¨é¢æ¯æ YOLO26 ç³»åï¼å©åå¼åèå¿«éé¨ç½²è½å°åºç¨</h1>
<h2 id="ä¸deploysharp-ç®ä»">ä¸ãDeploySharp ç®ä»</h2>
<p>DeploySharp æ¯ä¸ä¸ªä¸ä¸º C# å¼åèè®¾è®¡çè·¨å¹³å°æ¨¡åé¨ç½²æ¡æ¶ï¼æ¨å¨æä¾ä»æ¨¡åå è½½ãéç½®ç®¡çå°æ¨çæ§è¡çç«¯å°ç«¯è§£å³æ¹æ¡ãè¯¥é¡¹ç®ç± æ¤é¢ç®ç®è¾å¼åå¹¶å¼æºï¼éµå¾ª Apache 2.0 è®¸å¯åè®®ï¼ç®åå¨ GitHub ä¸è·å¾äºå¹¿æ³å³æ³¨ã</p>
<p>DeploySharp éç¨äºæ¸æ°çæ¨¡ååæ¶æè®¾è®¡ï¼</p>
<ul>
<li><strong>æ ¹å½åç©ºé´</strong>ï¼<code>DeploySharp</code> ä½ä¸ºç»ä¸å¥å£ï¼éææ¨¡åå è½½ãæ¨çæ§è¡ç­æ ¸å¿åè½</li>
<li><strong>å­å½åç©ºé´</strong>ï¼éè¿ <code>DeploySharp.Engine</code>ã<code>DeploySharp.Data</code>ã<code>DeploySharp.Model</code> ç­å­å½åç©ºé´å®ç°æ¨¡åååå±</li>
<li><strong>æ³åè®¾è®¡</strong>ï¼å³é®ç±»éç¨æ³åè®¾è®¡ï¼æ¯æå¾åå¤çãåç±»ãæ£æµç­å¤ä»»å¡æ åæ°æ®äº¤äº</li>
</ul>
<p><strong>é¡¹ç®å°å</strong>ï¼</p>
<pre><code>https://github.com/guojin-yan/DeploySharp.git
</code></pre>
<h3 id="1-å¤å¼ææ¯æ">1. å¤å¼ææ¯æ</h3>
<p>DeploySharp åçæ¯æä¸ç§ä¸»æµæ¨çå¼æï¼</p>
<table>
<thead>
<tr>
<th>æ¨çå¼æ</th>
<th>ç¶æ</th>
<th>æ¯æè®¾å¤</th>
<th>æ§è½ç¹ç¹</th>
</tr>
</thead>
<tbody>
<tr>
<td>OpenVINO</td>
<td>å®æ</td>
<td>CPUãGPU0(éæ¾)ãGPU1(ç¬æ¾)ãNPU</td>
<td>Intel ç¡¬ä»¶ä¼å</td>
</tr>
<tr>
<td>ONNX Runtime</td>
<td>å®æ</td>
<td>CPUãGPU(CUDA/DML)</td>
<td>è·¨å¹³å°å¼å®¹æ§å¥½</td>
</tr>
<tr>
<td>TensorRT</td>
<td>å®æ</td>
<td>GPU(TensorRT)</td>
<td>NVIDIA GPU æè´æ§è½</td>
</tr>
</tbody>
</table>
<h3 id="2-å¾åå¤çæ¯æ">2. å¾åå¤çæ¯æ</h3>
<p>æ¡æ¶æä¾äºä¸¤ç§å¾åå¤çåºçéæ©ï¼</p>
<table>
<thead>
<tr>
<th>å¾åå¤çåº</th>
<th>ç¹ç¹</th>
<th>éç¨åºæ¯</th>
</tr>
</thead>
<tbody>
<tr>
<td>ImageSharp</td>
<td>çº¯ C# å®ç°ï¼è·¨å¹³å°å¼å®¹æ§å¥½ï¼æ åçä¾èµ</td>
<td>è·¨å¹³å°åºç¨ãWeb åºç¨</td>
</tr>
<tr>
<td>OpenCvSharp</td>
<td>OpenCV ç C# å°è£ï¼åè½å¼ºå¤§ï¼æ§è½ä¼å¼</td>
<td>æ¡é¢åºç¨ãé«æ§è½åºæ¯</td>
</tr>
</tbody>
</table>
<h3 id="3-è·¨å¹³å°è¿è¡æ¶æ¯æ">3. è·¨å¹³å°è¿è¡æ¶æ¯æ</h3>
<p>DeploySharp å¼å®¹äºå¹¿æ³ç .NET è¿è¡æ¶ç¯å¢ï¼</p>
<ul>
<li>.NET Framework 4.8 / 4.8.1</li>
<li>.NET Core 3.1</li>
<li>.NET 5.0</li>
<li>.NET 6.0</li>
<li>.NET 7.0</li>
<li>.NET 8.0</li>
<li>.NET 9.0</li>
<li>.NET 10.0</li>
</ul>
<h3 id="4-nuget-åçæ">4. NuGet åçæ</h3>
<h4 id="41-æ ¸å¿å">4.1 æ ¸å¿å</h4>
<table>
<thead>
<tr>
<th>åå</th>
<th>æè¿°</th>
<th>NuGet é¾æ¥</th>
</tr>
</thead>
<tbody>
<tr>
<td>JYPPX.DeploySharp</td>
<td>DeploySharp API æ ¸å¿åº</td>
<td><a href="https://www.nuget.org/packages/JYPPX.DeploySharp/" target="_blank" rel="noopener nofollow"><img alt="NuGet" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2933426/202601/2933426-20260119224218431-401814297.svg" class="lazyload"></a></td>
</tr>
</tbody>
</table>
<p><strong>æ ¸å¿ååè½</strong>ï¼</p>
<ul>
<li>æ¨çå¼ææ½è±¡æ¥å£</li>
<li>æ°æ®ç»æå®ä¹</li>
<li>æ¨¡åéç½®åºç±»</li>
<li>æ§è½åæå·¥å·</li>
<li>æ¥å¿ç³»ç»</li>
<li>å¯è§ååºç¡åè½</li>
</ul>
<h4 id="42-å¾åå¤çæ©å±å">4.2 å¾åå¤çæ©å±å</h4>
<table>
<thead>
<tr>
<th>åå</th>
<th>æè¿°</th>
<th>NuGet é¾æ¥</th>
</tr>
</thead>
<tbody>
<tr>
<td>JYPPX.DeploySharp.ImageSharp</td>
<td>ä½¿ç¨ ImageSharp çå¾åå¤çæ©å±</td>
<td><a href="https://www.nuget.org/packages/JYPPX.DeploySharp.ImageSharp/" target="_blank" rel="noopener nofollow"><img alt="NuGet" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2933426/202601/2933426-20260119224218358-1487507805.svg" class="lazyload"></a></td>
</tr>
<tr>
<td>JYPPX.DeploySharp.OpenCvSharp</td>
<td>ä½¿ç¨ OpenCvSharp çå¾åå¤çæ©å±</td>
<td><a href="https://www.nuget.org/packages/JYPPX.DeploySharp.OpenCvSharp/" target="_blank" rel="noopener nofollow"><img alt="NuGet" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2933426/202601/2933426-20260119224218283-1019493165.svg" class="lazyload"></a></td>
</tr>
</tbody>
</table>
<p><strong>æ©å±ååè½</strong>ï¼</p>
<ul>
<li>å¾åå è½½åä¿å­</li>
<li>å¾åé¢å¤çå®ç°</li>
<li>å¯è§ååè½å®ç°</li>
<li>æ¹éå¤çæ¯æ</li>
</ul>
<h3 id="5--æ¨¡åæ¯æåè¡¨">5.  æ¨¡åæ¯æåè¡¨</h3>
<p>æªè³ç®åï¼DeploySharp å·²ç»å®æäºä»¥ä¸æ¨¡åçå°è£ï¼æ´å¤æ¨¡åæç»­æ´æ°ä¸­ï¼</p>
<table>
<thead>
<tr>
<th style="text-align: center">Model Name</th>
<th style="text-align: center">Model Type</th>
<th style="text-align: center">OpenVINO</th>
<th style="text-align: center">ONNX Runtime</th>
<th style="text-align: center">TensorRT</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center"><strong>YOLOv5</strong></td>
<td style="text-align: center">Detection</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
</tr>
<tr>
<td style="text-align: center"><strong>YOLOv5</strong></td>
<td style="text-align: center">Segmentation</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
</tr>
<tr>
<td style="text-align: center"><strong>YOLOv6</strong></td>
<td style="text-align: center">Detection</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
</tr>
<tr>
<td style="text-align: center"><strong>YOLOv7</strong></td>
<td style="text-align: center">Detection</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
</tr>
<tr>
<td style="text-align: center"><strong>YOLOv8</strong></td>
<td style="text-align: center">Detection</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
</tr>
<tr>
<td style="text-align: center"><strong>YOLOv8</strong></td>
<td style="text-align: center">Segmentation</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
</tr>
<tr>
<td style="text-align: center"><strong>YOLOv8</strong></td>
<td style="text-align: center">Pose</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
</tr>
<tr>
<td style="text-align: center"><strong>YOLOv8</strong></td>
<td style="text-align: center">Oriented Bounding Boxes</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
</tr>
<tr>
<td style="text-align: center"><strong>YOLOv9</strong></td>
<td style="text-align: center">Detection</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
</tr>
<tr>
<td style="text-align: center"><strong>YOLOv9</strong></td>
<td style="text-align: center">Segmentation</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
</tr>
<tr>
<td style="text-align: center"><strong>YOLOv10</strong></td>
<td style="text-align: center">Detection</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
</tr>
<tr>
<td style="text-align: center"><strong>YOLOv11</strong></td>
<td style="text-align: center">Detection</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
</tr>
<tr>
<td style="text-align: center"><strong>YOLOv11</strong></td>
<td style="text-align: center">Segmentation</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
</tr>
<tr>
<td style="text-align: center"><strong>YOLOv11</strong></td>
<td style="text-align: center">Pose</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
</tr>
<tr>
<td style="text-align: center"><strong>YOLOv11</strong></td>
<td style="text-align: center">Oriented Bounding Boxes</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
</tr>
<tr>
<td style="text-align: center"><strong>YOLOv12</strong></td>
<td style="text-align: center">Detection</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
</tr>
<tr>
<td style="text-align: center"><strong>Anomalib</strong></td>
<td style="text-align: center">Segmentation</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
</tr>
<tr>
<td style="text-align: center"><strong>PP-YOLOE</strong></td>
<td style="text-align: center">Detection</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
</tr>
<tr>
<td style="text-align: center"><strong>DEIMv2</strong></td>
<td style="text-align: center">Detection</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
</tr>
<tr>
<td style="text-align: center"><strong>RFDETR</strong></td>
<td style="text-align: center">Detection</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
</tr>
<tr>
<td style="text-align: center"><strong>RFDETR</strong></td>
<td style="text-align: center">Segmentation</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
</tr>
<tr>
<td style="text-align: center"><strong>RTDETR</strong></td>
<td style="text-align: center">Detection</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
</tr>
<tr>
<td style="text-align: center"><strong>YOLO26</strong></td>
<td style="text-align: center">Detection</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
</tr>
<tr>
<td style="text-align: center"><strong>YOLO26</strong></td>
<td style="text-align: center">Segmentation</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
</tr>
<tr>
<td style="text-align: center"><strong>YOLO26</strong></td>
<td style="text-align: center">Pose</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
</tr>
<tr>
<td style="text-align: center"><strong>YOLO26</strong></td>
<td style="text-align: center">Oriented Bounding Boxes</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
<td style="text-align: center">â</td>
</tr>
</tbody>
</table>
<h2 id="äºdeploysharp-å¯¹-yolov26-çå¨é¢æ¯æ">äºãDeploySharp å¯¹ YOLOv26 çå¨é¢æ¯æ</h2>
<p>DeploySharp æ¡æ¶ä¸º YOLOv26 ç³»åæ¨¡åæä¾äºå¨æ¹ä½çæ¯æï¼æ¶µçäºç®æ æ£æµãå®ä¾åå²ãå§¿æä¼°è®¡åæè½¬æ¡æ£æµåç§ä¸»è¦ä»»å¡ç±»åã</p>
<h3 id="21-æ¯æç-yolov26-æ¨¡åç±»å">2.1 æ¯æç YOLOv26 æ¨¡åç±»å</h3>
<table>
<thead>
<tr>
<th>æ¨¡åç±»å</th>
<th>åè½æè¿°</th>
<th>æä¸¾å¼</th>
<th>éç½®ç±»</th>
</tr>
</thead>
<tbody>
<tr>
<td>YOLOv26Det</td>
<td>ç®æ æ£æµ</td>
<td><code>ModelType.YOLOv26Det</code></td>
<td><code>Yolov26DetConfig</code></td>
</tr>
<tr>
<td>YOLOv26Seg</td>
<td>å®ä¾åå²</td>
<td><code>ModelType.YOLOv26Seg</code></td>
<td><code>Yolov26SegConfig</code></td>
</tr>
<tr>
<td>YOLOv26Pose</td>
<td>äººä½å§¿æä¼°è®¡</td>
<td><code>ModelType.YOLOv26Pose</code></td>
<td><code>Yolov26PoseConfig</code></td>
</tr>
<tr>
<td>YOLOv26Obb</td>
<td>æè½¬æ¡æ£æµ</td>
<td><code>ModelType.YOLOv26Obb</code></td>
<td><code>Yolov26ObbConfig</code></td>
</tr>
</tbody>
</table>
<h3 id="22-æ¶æè®¾è®¡">2.2 æ¶æè®¾è®¡</h3>
<p>DeploySharp ä¸º YOLOv26 æä¾äºä¸å±æ¶æè®¾è®¡ï¼</p>
<h4 id="æ¥å£å±-iyolov26xxxmodel">æ¥å£å± (IYolov26XxxModel)</h4>
<p>å¨æ ¸å¿åº <code>DeploySharp</code> ä¸­å®ä¹äºç»ä¸çæ¥å£ï¼</p>
<pre><code class="language-csharp">// YOLOv26 æ£æµæ¥å£
// IYolov26DetModel ç»§æ¿èª IYolov10DetModel
// è¿ç§è®¾è®¡ä½¿å¾ YOLOv26 å¯ä»¥å¤ç¨ YOLOv10 çæçå®ç°
public abstract class IYolov26DetModel : IYolov10DetModel
{
    /// &lt;summary&gt;
    /// æé å½æ°ï¼æ¥æ¶æ¨¡åéç½®
    /// &lt;/summary&gt;
    /// &lt;param name="config"&gt;YOLOv26 æ£æµæ¨¡åéç½®å¯¹è±¡&lt;/param&gt;
    public IYolov26DetModel(Yolov26DetConfig config) : base(config)
    {
        // ä½¿ç¨æ¥å¿ç³»ç»è®°å½æ¨¡ååå§åä¿¡æ¯
        MyLogger.Log.Info($"Initializing {this.GetType().Name}, Config:\n{config}");
    }
}
</code></pre>
<h4 id="éç½®å±-yolov26xxxconfig">éç½®å± (Yolov26XxxConfig)</h4>
<p>æ¯ç§æ¨¡åç±»åé½æå¯¹åºçéç½®ç±»ï¼æä¾çµæ´»çåæ°è®¾ç½®ï¼</p>
<pre><code class="language-csharp">// YOLOv26 æ£æµéç½®ç±»
// ç»§æ¿èª Yolov10DetConfigï¼å¤ç¨ YOLOv10 çæçéç½®
public class Yolov26DetConfig : Yolov10DetConfig
{
    /// &lt;summary&gt;
    /// é»è®¤æé å½æ°
    /// &lt;/summary&gt;
    public Yolov26DetConfig() { }

    /// &lt;summary&gt;
    /// å¸¦æ¨¡åè·¯å¾çæé å½æ°
    /// èªå¨è®¾ç½®åççé»è®¤åæ°
    /// &lt;/summary&gt;
    /// &lt;param name="modelPath"&gt;æ¨¡åæä»¶è·¯å¾&lt;/param&gt;
    public Yolov26DetConfig(string modelPath)
    {
		...
    }
}
</code></pre>
<h4 id="å®ç°å±-yolov26xxxmodel">å®ç°å± (Yolov26XxxModel)</h4>
<p>åå«æä¾ ImageSharp å OpenCvSharp ä¸¤ç§å®ç°ï¼å¼åèå¯ä»¥æ ¹æ®éæ±éæ©ã</p>
<h3 id="23-ç±»ç»§æ¿å³ç³»å¾">2.3 ç±»ç»§æ¿å³ç³»å¾</h3>
<pre><code>YoloDetConfig (åºç±»)
    âââ Yolov8DetConfig
    âââ Yolov10DetConfig
    âââ Yolov26DetConfig (ç»§æ¿èª Yolov10DetConfig)

YoloModel (åºç±»)
    âââ Yolov8DetModel
    âââ Yolov10DetModel
    âââ Yolov26DetModel (ç»§æ¿èª Yolov10DetModel)
</code></pre>
<p>è¿ç§ç»§æ¿è®¾è®¡çä¼å¿ï¼</p>
<ol>
<li><strong>ä»£ç å¤ç¨</strong>ï¼YOLOv26 å¯ä»¥å¤ç¨ YOLOv10 çæçå®ç°</li>
<li><strong>ä¸è´æ§</strong>ï¼ä¿æä¸å¶ä» YOLO çæ¬ç API ä¸è´æ§</li>
<li><strong>æç»´æ¤</strong>ï¼å±äº«çä»£ç é»è¾éä¸­ç®¡ç</li>
</ol>
<h2 id="ä¸yolov26-ç®æ æ£æµä»£ç å®ç°">ä¸ãYOLOv26 ç®æ æ£æµä»£ç å®ç°</h2>
<h3 id="31-ä½¿ç¨-imagesharp-ä½ä¸ºå¾åå¤çåº--tensorrt-æ¨çåç«¯">3.1 ä½¿ç¨ ImageSharp ä½ä¸ºå¾åå¤çåº + TensorRT æ¨çåç«¯</h3>
<h4 id="1nuget-åå®è£">ï¼1ï¼NuGet åå®è£</h4>
<p>ä½¿ç¨ ImageSharp ä½ä¸ºå¾åå¤çåºãTensorRT ä½ä¸ºæ¨çåç«¯æ¶ï¼éè¦å®è£ä»¥ä¸æ ¸å¿åï¼</p>
<p><strong>DeploySharp åºç¡åºåæ©å±åº</strong>ï¼</p>
<pre><code>JYPPX.DeploySharp
JYPPX.DeploySharp.ImageSharp
</code></pre>
<p><strong>TensorRT Runtime åº</strong>ï¼</p>
<pre><code>JYPPX.TensorRT.CSharp.API.runtime.win-x64.cuda11
æ
JYPPX.TensorRT.CSharp.API.runtime.win-x64.cuda12
</code></pre>
<p><strong>æ³¨æ</strong>ï¼TensorRT Runtime åºççæ¬éæ ¹æ®æ¬å°è®¾å¤å®è£ç CUDA çæ¬è¿è¡éæ©ã</p>
<h4 id="2ä»£ç å®ç°">ï¼2ï¼ä»£ç å®ç°</h4>
<p>ä»¥ä¸ä»£ç å¯ç´æ¥å¤å¶è¿è¡ï¼</p>
<pre><code class="language-csharp">using DeploySharp.Model;       // å¼å¥æ¨¡åç¸å³å®ä¹
using DeploySharp.Data;        // å¼å¥æ°æ®å¤çç¸å³
using DeploySharp.Engine;      // å¼å¥æ¨çå¼ææ ¸å¿
using DeploySharp;             // å¼å¥ DeploySharp ä¸»åº
using SixLabors.ImageSharp;    // ImageSharp å¾åå¤çåº
using SixLabors.ImageSharp.PixelFormats; // ImageSharp åç´ æ ¼å¼

namespace DeploySharp.ImageSharp.Demo
{
    /// &lt;summary&gt;
    /// YOLO26ç®æ æ£æµæ¼ç¤ºç±»
    /// è¯¥ç±»å±ç¤ºäºå¦ä½å è½½ TensorRT å¼ææä»¶ï¼å¯¹å¾åè¿è¡æ¨çå¹¶å¯è§åç»æã
    /// &lt;/summary&gt;
    public class YOLOv26DetDemo
    {
        public static void Run()
        {
            // ==========================================
            // 1. è·¯å¾éç½®
            // ==========================================
            
            // æ¨¡åä¸è½½æç¤ºï¼æ¨¡ååæµè¯å¾çå¯ä»¥åå¾QQç¾¤(945057948)ä¸è½½
            // è®¾ç½® .engine æä»¶è·¯å¾ã
            // æ³¨æï¼TensorRT ç .engine æä»¶æ¯ç¡¬ä»¶ç¸å³çï¼å³å¨ RTX 3090 ä¸çæç engine éå¸¸ä¸è½å¨ RTX 4090 ä¸è¿è¡ã
            string modelPath = @"D:\Program Files\TensorRT-10.13.0.35-cu11\bin\yolo26s.engine";
            
            // è®¾ç½®å¾æ¨ççå¾çè·¯å¾
            string imagePath = @"E:\Data\image\bus.jpg";
            // ==========================================
            // 2. æ¨¡åéç½®åå§å
            // ==========================================
            
            // åå»º  YOLO26 çéç½®å¯¹è±¡ï¼ä¼ å¥æ¨¡åè·¯å¾
            Yolov26DetConfig config = new Yolov26DetConfig(modelPath);
            
            // è®¾ç½®æå¤§æ¹å¤çå¤§å°ã
            // å³ä½¿åªæ¨çä¸å¼ å¾çï¼è®¾ç½®éå½ç BatchSize ææ¶ä¹è½å©ç¨ GPU å¹¶è¡è½åã
            // æ­¤å¤è®¾ä¸º 2 è¡¨ç¤ºå¼æåé¨æå¤§å¯ä»¥ä¸æ¬¡å¤ç 2 å¼ å¾ï¼ä½è¦é¦åä¿è¯æ¨¡åæ¯æã
            config.MaxBatchSize = 2;
            
            // æ¾å¼æå®æ¨çåç«¯ä¸º TensorRTã
            // DeploySharp æ¯æå¤ç§åç«¯ï¼å¦ ONNX Runtime, OpenVINO ç­ï¼ï¼è¿éå¼ºå¶ä½¿ç¨ TensorRT ä»¥è·å¾æä½³æ§è½ã
            config.SetTargetInferenceBackend(InferenceBackend.TensorRT);
            // ==========================================
            // 3. ç±»å«å­å¸å®ä¹
            // ==========================================
            
            // COCO æ°æ®éç 80 ä¸ªç±»å«åç§°åè¡¨
            // YOLO æ¨¡åéå¸¸è¾åºçæ¯ç±»å«çç´¢å¼ï¼0-79ï¼ï¼æä»¬éè¦å°å¶æ å°ä¸ºäººç±»å¯è¯»çå­ç¬¦ä¸²ã
            List&lt;string&gt; d = new List&lt;string&gt; { "person", "bicycle", "car", "motorcycle", "airplane", "bus",
                "train", "truck", "boat", "traffic light", "fire hydrant", "stop sign", "parking meter", "bench",
                "bird", "cat", "dog", "horse", "sheep", "cow", "elephant", "bear", "zebra", "giraffe", "backpack",
                "umbrella", "handbag", "tie", "suitcase", "frisbee", "skis", "snowboard", "sports ball", "kite",
                "baseball bat", "baseball glove", "skateboard", "surfboard", "tennis racket", "bottle", "wine glass",
                "cup", "fork", "knife", "spoon", "bowl", "banana", "apple", "sandwich", "orange", "broccoli", "carrot",
                "hot dog", "pizza", "donut", "cake", "chair", "couch", "potted plant", "bed", "dining table", "toilet",
                "tv", "laptop", "mouse", "remote", "keyboard", "cell phone", "microwave", "oven", "toaster", "sink",
                "refrigerator", "book", "clock", "vase", "scissors", "teddy bear", "hair drier", "toothbrush" };
            // å°åè¡¨è½¬æ¢ä¸ºå­å¸ï¼Key ä¸ºç´¢å¼ï¼Value ä¸ºç±»å«åç§°
            Dictionary&lt;int, string&gt; CategoryDict = new Dictionary&lt;int, string&gt;();
            for (int i = 0; i &lt; d.Count; i++)
            {
                CategoryDict[i] = d[i];
            }
            
            // å°ç±»å«å­å¸èµå¼ç»éç½®å¯¹è±¡ï¼ç¨äºåç»­ç»æè§£æ
            config.CategoryDict = CategoryDict;
            // ==========================================
            // 4. æ¨¡åå®ä¾å
            // ==========================================
            
            // æ ¹æ®éç½®åå§åæ£æµå¨æ¨¡åã
            // æ­¤æ­¥éª¤ä¼å è½½ engine æä»¶å°åå­ï¼å¹¶åå§å GPU ä¸ä¸æã
            Yolov26DetModel model = new Yolov26DetModel(config);
            
            // ä½¿ç¨ SixLabors.ImageSharp å è½½å¾çã
            // Image.Load ä¼èªå¨æ ¹æ®æä»¶æ©å±åè§£ç å¾çã
            var img = Image.Load(imagePath);
            // ==========================================
            // 5. æ¨¡åæ¨çä¸æ§è½æµè¯
            // ==========================================
            
            // æ§è¡ç¬¬ä¸æ¬¡æ¨çã
            // æ³¨æï¼TensorRT çé¦æ¬¡æ¨çéå¸¸åå« Kernel åå§åç­å¼éï¼éåº¦ä¼æ¯åç»­æ¨çæ¢ã
            DetResult[] result = model.Predict(img);
            
            // æ§è¡ç¬¬äºæ¬¡æ¨çã
            // è¿æ¬¡æ¨ççæ¶é´æ´è½ä»£è¡¨æ¨¡åå¨å®éåºæ¯ä¸­çå¹³åæ¨çéåº¦ã
            result = model.Predict(img);
            
            // æ§è¡ç¬¬ä¸æ¬¡æ¨çï¼å¯éï¼ï¼ç¨äºè¿ä¸æ­¥åå¹³åå¼æç¡®ä¿ç¨³å®æ§ã
            result = model.Predict(img);
            
            // æå°æ¨çæ§è½åæè®°å½ã
            // è¿éå¸¸ä¼è¾åºé¢å¤çãæ¨çãåç«¯å¤çåé¶æ®µçèæ¶ï¼æ¯«ç§çº§ï¼ã
            model.ModelInferenceProfiler.PrintAllRecords();
            
            // åå§åä¸ä¸ªåè¡¨ï¼è½ç¶æ¬ä¾æªç´æ¥ä½¿ç¨ï¼ä½å¨å¤çå¤å¾ç»ææ¶å¯è½ä¼ç¨å°ã
            List&lt;Image&lt;Rgb24&gt;&gt; resultsMat = new List&lt;Image&lt;Rgb24&gt;&gt;();
            // ==========================================
            // 6. ç»æå¯è§åä¸ä¿å­
            // ==========================================
            
            // å°æ¨çç»æç»å¶å¨åå¾ä¸ã
            // Visualize.DrawDetResult ä¼æ ¹æ® DetResult ä¸­çåæ åç½®ä¿¡åº¦ç»æ¡åæå­ã
            // éè¦å° img å¼ºå¶è½¬æ¢ä¸º Image&lt;Rgb24&gt;ï¼å ä¸º DrawDetResult éå¸¸éè¦ç¹å®çåç´ æ ¼å¼ã
            var resultImg = Visualize.DrawDetResult(result, (Image&lt;Rgb24&gt;)img, new VisualizeOptions(1.0f));
            // ä¿å­å¸¦ææ£æµæ¡çå¾çå°å½åç®å½ä¸ã
            // æä»¶ååå«éç½®çæ¨¡åç±»åï¼ä¾¿äºåºåä¸åæ¨¡åçç»æã
            resultImg.Save(@$"./result_{config.ModelType}.jpg");
        }
    }
}
</code></pre>
<h4 id="3ä»£ç è¯¦è§£">ï¼3ï¼ä»£ç è¯¦è§£</h4>
<ol>
<li>
<p><strong>éç½®æ¨¡ååæ°</strong>ï¼</p>
<pre><code class="language-csharp">Yolov26DetConfig config = new Yolov26DetConfig(modelPath);
config.MaxBatchSize = 2;
config.SetTargetInferenceBackend(InferenceBackend.TensorRT);
</code></pre>
<ul>
<li>åå»ºéç½®å¯¹è±¡ï¼ä½¿ç¨ TensorRT å¼æè¿è¡æ¨ç</li>
<li>è®¾ç½®æå¤§æ¹éå¤§å°ä¸º 2ï¼æ¯ææå¤ 2 å¼ å¾ççæ¹éæ¨ç</li>
</ul>
</li>
<li>
<p><strong>åå»ºæ¨¡åå®ä¾</strong>ï¼</p>
<pre><code class="language-csharp">Yolov26DetModel model = new Yolov26DetModel(config);
</code></pre>
<p>æ¨¡åå®ä¾åæ¶ä¼èªå¨å è½½ .engine æä»¶å¹¶åå§å TensorRT å¼æã</p>
</li>
<li>
<p><strong>æ§è¡æ¨ç</strong>ï¼</p>
<pre><code class="language-csharp">DetResult[] result = model.Predict(img);
</code></pre>
<p><code>Predict()</code> æ¹æ³è¿åæ£æµç»ææ°ç»ï¼æ¯ä¸ªåç´ åå«è¾¹çæ¡ãç½®ä¿¡åº¦åç±»å«ä¿¡æ¯ã</p>
</li>
<li>
<p><strong>æ§è½åæ</strong>ï¼</p>
<pre><code class="language-csharp">model.ModelInferenceProfiler.PrintAllRecords();
</code></pre>
<p>æå°è¯¦ç»çæ§è½ç»è®¡ï¼åæ¬é¢å¤çãæ¨çãåå¤çåé¶æ®µçèæ¶ã</p>
</li>
</ol>
<h4 id="4ç»æå±ç¤º">ï¼4ï¼ç»æå±ç¤º</h4>
<p>æ§å¶å°æå°è¾åºï¼</p>
<p><img alt="image-20260116231024791" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2933426/202601/2933426-20260119224216033-1151573796.png" class="lazyload"></p>
<p>æ¨çç»æå¾çï¼</p>
<p><img alt="result_YOLOv26Det" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2933426/202601/2933426-20260119224216113-1777698764.jpg" class="lazyload"></p>
<h3 id="32-ä½¿ç¨-opencvsharpåå¾åå¤çåºonnx-runtimeæ¨çåç«¯">3.2 ä½¿ç¨ OpenCvSharpåå¾åå¤çåº+ONNX Runtimeæ¨çåç«¯</h3>
<h4 id="1nuget-åå®è£-1">ï¼1ï¼NuGet åå®è£</h4>
<p>ä½¿ç¨ OpenCvSharp ä½ä¸ºå¾åå¤çåºãONNX Runtime ä½ä¸ºæ¨çåç«¯æ¶ï¼éè¦å®è£ä»¥ä¸æ ¸å¿åï¼</p>
<p><strong>DeploySharp åºç¡åºåæ©å±åº</strong>ï¼</p>
<pre><code>JYPPX.DeploySharp
JYPPX.DeploySharp.OpenCvSharp
</code></pre>
<p><strong>OpenCvSharp Runtime åº</strong>ï¼</p>
<pre><code>OpenCvSharp4.runtime.win
</code></pre>
<p><strong>å¯éå éå</strong>ï¼ONNX Runtime æ¯æå¤ç§æ¨çå éæ¹å¼ï¼é¤é»è®¤ CPU å éå¤ï¼å¯æ ¹æ®éæ±å®è£ä»¥ä¸ NuGet åï¼</p>
<table>
<thead>
<tr>
<th>å éæ¹å¼</th>
<th>NuGet åå</th>
</tr>
</thead>
<tbody>
<tr>
<td>OpenVINO å é</td>
<td>Intel.ML.OnnxRuntime.OpenVino</td>
</tr>
<tr>
<td>DirectML å é</td>
<td>Microsoft.AI.DirectML</td>
</tr>
<tr>
<td>CUDA å é</td>
<td>Microsoft.ML.OnnxRuntime.Gpu</td>
</tr>
</tbody>
</table>
<p>æ´å¤å éæ¹å¼è¯·åè ONNX Runtime å®æ¹ææ¡£ãæ¬èä»¥ DirectML ä¸ºä¾è¿è¡æ¼ç¤ºã</p>
<h4 id="2ä»£ç å®ç°-1">ï¼2ï¼ä»£ç å®ç°</h4>
<p>æ¨çä»£ç å¦ä¸æç¤ºï¼å¯ç´æ¥å¤å¶è¿è¡ï¼</p>
<pre><code class="language-csharp">using OpenCvSharp;            // å¼å¥ OpenCvSharpï¼ç¨äºå¾åçè¯»åãæ¾ç¤ºåç©éµæä½
using DeploySharp.Model;      // å¼å¥æ¨¡åå®ä¹åéç½®ç±»
using DeploySharp.Data;       // å¼å¥æ°æ®å¤çç¸å³çç±»
using DeploySharp.Engine;     // å¼å¥æ¨çå¼ææ ¸å¿æ¥å£åæä¸¾
using DeploySharp;            // å¼å¥ DeploySharp ä¸»åºåå¯è§åå·¥å·
namespace DeploySharp.OpenCvSharp.Demo
{
    /// &lt;summary&gt;
    ///  YOLO26 ç®æ æ£æµæ¼ç¤º (åºäº ONNX Runtime + OpenCvSharp)
    /// æ¬ç¤ºä¾å±ç¤ºäºå¦ä½å è½½ ONNX æ¨¡åï¼å¹¶éç½®ä½¿ç¨ DirectML å¨ GPU ä¸è¿è¡æ¨çã
    /// &lt;/summary&gt;
    public class Yolov26DetDemo
    {
        public static void Run()
        {
            // ==========================================
            // 1. è·¯å¾éç½®
            // ==========================================
            
            // æ¨¡åä¸è½½æç¤ºï¼æ¨¡ååæµè¯å¾çå¯ä»¥åå¾QQç¾¤(945057948)ä¸è½½
            // æ³¨æï¼æ­¤å¤å è½½çæ¯æ åç .onnx æ¨¡åæä»¶ï¼èä¸æ¯ TensorRT ç .engine æä»¶ã
            // ONNX æ¨¡åå·æè¯å¥½çè·¨å¹³å°ç¹æ§ã
            string modelPath = @"E:\Model\yolov28\yolo26s.onnx";
            
            // è®¾ç½®å¾æ£æµçå¾çè·¯å¾
            string imagePath = @"E:\Data\image\bus.jpg";
            // ==========================================
            // 2. æ¨¡åéç½®ä¸æ¨çåç«¯è®¾ç½®
            // ==========================================
            
            // åå»º  YOLO26 çéç½®å¯¹è±¡ï¼ä¼ å¥æ¨¡åè·¯å¾
            Yolov26DetConfig config = new Yolov26DetConfig(modelPath);
            
            // [å³é®æ­¥éª¤] è®¾ç½®æ¨çåç«¯ä¸º ONNX Runtimeã
            // è¿æå³çæ¨¡åå°éè¿ ONNX Runtime è¿è¡å è½½åæ§è¡ï¼èä¸æ¯ TensorRTã
            config.SetTargetInferenceBackend(InferenceBackend.OnnxRuntime);
            
            // è®¾ç½®ç®æ è®¾å¤ç±»åä¸º GPU 0ã
            // è¿æ¯ä¸ä¸ªé»è¾è®¾å®ï¼å·ä½æ§è¡åå³äº ONNX Runtime çæä¾ç¨åºã
            config.SetTargetDeviceType(DeviceType.GPU0);
            
            // [å³é®æ­¥éª¤] è®¾ç½® ONNX Runtime çå·ä½æ§è¡æä¾ç¨åºä¸º DML (DirectML)ã
            // DirectML æ¯ Windows ä¸çé«æ§è½ç¡¬ä»¶å éæ¥å£ï¼æ¯æ AMDãNVIDIA å Intel æ¾å¡ã
            // å¦æä¸å è¿ä¸è¡ï¼ONNX Runtime å¯è½é»è®¤ä½¿ç¨ CPU è¿è¡æ¨çï¼éåº¦è¾æ¢ã
            config.SetTargetOnnxRuntimeDeviceType(OnnxRuntimeDeviceType.DML);
            // ==========================================
            // 3. ç±»å«å­å¸å®ä¹ (COCO 80ç±»)
            // ==========================================
            
            // å®ä¹ COCO æ°æ®éç 80 ä¸ªç±»å«åç§°
            // è¿äºåç§°å°ç¨äºå¨ç»æå¯è§åæ¶æ æ³¨æ£æµå°çç©ä½
            List&lt;string&gt; d = new List&lt;string&gt; { "person", "bicycle", "car", "motorcycle", "airplane", "bus",
                "train", "truck", "boat", "traffic light", "fire hydrant", "stop sign", "parking meter", "bench",
                "bird", "cat", "dog", "horse", "sheep", "cow", "elephant", "bear", "zebra", "giraffe", "backpack",
                "umbrella", "handbag", "tie", "suitcase", "frisbee", "skis", "snowboard", "sports ball", "kite",
                "baseball bat", "baseball glove", "skateboard", "surfboard", "tennis racket", "bottle", "wine glass",
                "cup", "fork", "knife", "spoon", "bowl", "banana", "apple", "sandwich", "orange", "broccoli", "carrot",
                "hot dog", "pizza", "donut", "cake", "chair", "couch", "potted plant", "bed", "dining table", "toilet",
                "tv", "laptop", "mouse", "remote", "keyboard", "cell phone", "microwave", "oven", "toaster", "sink",
                "refrigerator", "book", "clock", "vase", "scissors", "teddy bear", "hair drier", "toothbrush" };
            // æå»º&lt;ç´¢å¼, ç±»å«å&gt;å­å¸
            Dictionary&lt;int, string&gt; CategoryDict = new Dictionary&lt;int, string&gt;();
            for (int i = 0; i &lt; d.Count; i++)
            {
                CategoryDict[i] = d[i];
            }
            
            // å°ç±»å«å­å¸èµå¼ç»éç½®å¯¹è±¡
            config.CategoryDict = CategoryDict;
            // ==========================================
            // 4. æ¨¡ååå§å
            // ==========================================
            
            // å®ä¾åæ¨¡åï¼ä¼ å¥éç½®ã
            // æ­¤æ¶ DeploySharp ä¼æ ¹æ®éç½®å è½½ ONNX æ¨¡åï¼å¹¶åå§å DirectML ä¼è¯ã
            Yolov26DetModel model = new Yolov26DetModel(config);
            
            // ä½¿ç¨ OpenCvSharp è¯»åå¾çå° Mat å¯¹è±¡ä¸­
            // Mat æ¯ OpenCV ä¸­ç¨äºå­å¨å¾åæ°æ®çæ ¸å¿ç©éµç»æ
            Mat img = Cv2.ImRead(imagePath);
            // ==========================================
            // 5. æ¨¡åæ¨ç (é¢ç­ä¸æµè¯)
            // ==========================================
            
            // æ§è¡å¤æ¬¡æ¨çã
            // ç¬¬ä¸æ¬¡æ¨çéå¸¸åå«æ¨¡åå è½½ãåå­åéç­åå§åå¼éï¼èæ¶è¾é¿ã
            Result[] result = model.Predict(img);
            
            // åç»­æ¨çç¨äºæµè¯ç¨³å®çæ¨çéåº¦ã
            result = model.Predict(img);
            result = model.Predict(img);
            result = model.Predict(img);
            
            // æå°æ§è½åæè®°å½ã
            // è¿å°è¾åºæ¨çè¿ç¨ä¸­åé¶æ®µï¼å¦é¢å¤çãæ¨çæ§è¡ãåå¤çï¼çèæ¶ç»è®¡ã
            model.ModelInferenceProfiler.PrintAllRecords();
            
            // åå§ååè¡¨ï¼ç¨äºå­å¨å¤çåçå¾åï¼æ¬ä¾ä¸»è¦ç¨äºæ¼ç¤ºï¼
            List&lt;Mat&gt; resultsMat = new List&lt;Mat&gt;();
            // ==========================================
            // 6. ç»æå¯è§åä¸æ¾ç¤º
            // ==========================================
            
            // è°ç¨å¯è§åå·¥å·ï¼å°æ£æµæ¡ï¼ç©å½¢æ¡ï¼åç±»å«æ ç­¾ç»å¶å¨åå¾ä¸ã
            // VisualizeOptions(1.0f) å¯è½æå®äºç¼©æ¾æ¯ä¾æå­ä½å¤§å°ç­åæ°ã
            var resultImg = Visualize.DrawDetResult(result, img, new VisualizeOptions(1.0f));
            
            // å°ç»å¶å¥½çå¾åå å¥åè¡¨
            resultsMat.Add(resultImg);
            
            // ä½¿ç¨ OpenCV ççªå£æ¾ç¤ºç»æå¾åã
            // "image" æ¯çªå£çæ é¢ã
            Cv2.ImShow("image", resultImg);
            
            // ç­å¾æé®è¾å¥ã
            // åæ° 0 è¡¨ç¤ºæ éæç­å¾ï¼ç´å°ç¨æ·æä¸é®çä»»æé®ã
            // è¿æ¯ä¸ºäºé²æ­¢æ§å¶å°ç¨åºæ§è¡å®æ¯åçªå£ç«å³éªéã
            Cv2.WaitKey();
        }
    
    }
}
</code></pre>
<h4 id="3ä»£ç è¯¦è§£-1">ï¼3ï¼ä»£ç è¯¦è§£</h4>
<p>ä¸è¿°ä»£ç ä¸ 3.1 èçä»£ç ç»æåºæ¬ç¸ä¼¼ï¼ä¸»è¦åºå«å¨äºæ¨çåç«¯çéç½®ï¼</p>
<ol>
<li>
<p><strong>è®¾ç½®æ¨çåç«¯ä¸º ONNX Runtime</strong>ï¼</p>
<pre><code class="language-csharp">config.SetTargetInferenceBackend(InferenceBackend.OnnxRuntime);
</code></pre>
</li>
<li>
<p><strong>è®¾ç½®æ¨çè®¾å¤ä¸º GPU</strong>ï¼æ­¤å¤ä½¿ç¨ç¬æ¾è®¾å¤ï¼ï¼</p>
<pre><code class="language-csharp">config.SetTargetDeviceType(DeviceType.GPU0);
</code></pre>
</li>
<li>
<p><strong>éç½® DirectML å é</strong>ï¼DirectML æ¯ Windows ä¸çé«æ§è½ç¡¬ä»¶å éæ¥å£ï¼æ¯æ AMDãNVIDIA å Intel æ¾å¡ï¼ä½¿ç¨ç®åä¸æ éå¤æéç½®ã</p>
<pre><code class="language-csharp">config.SetTargetOnnxRuntimeDeviceType(OnnxRuntimeDeviceType.DML);
</code></pre>
</li>
</ol>
<h4 id="4ç»æå±ç¤º-1">ï¼4ï¼ç»æå±ç¤º</h4>
<p>æ§å¶å°è¾åºå¦ä¸ãä½¿ç¨ DirectML è°ç¨æ¾å¡å éï¼è½å¨éåº¦ä¸ä¸ TensorRT ç¸æ¯ææå·®è·ï¼ä½å¶éç½®ç®åãæ éå¤æè®¾ç½®çä¼å¿ä¾ç¶ææ¾ï¼éåå¿«éå¼åéªè¯ã</p>
<p><img alt="image-20260116221718516" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2933426/202601/2933426-20260119224216095-1465134082.png" class="lazyload"></p>
<h3 id="33-ä½¿ç¨-opencvsharp-ä½ä¸ºå¾åå¤çåº--openvino-æ¨çåç«¯">3.3 ä½¿ç¨ OpenCvSharp ä½ä¸ºå¾åå¤çåº + OpenVINO æ¨çåç«¯</h3>
<h4 id="1nuget-åå®è£-2">ï¼1ï¼NuGet åå®è£</h4>
<p>ä½¿ç¨ OpenCvSharp ä½ä¸ºå¾åå¤çåºãOpenVINO ä½ä¸ºæ¨çåç«¯æ¶ï¼éè¦å®è£ä»¥ä¸æ ¸å¿åï¼</p>
<p><strong>DeploySharp åºç¡åºåæ©å±åº</strong>ï¼</p>
<pre><code>JYPPX.DeploySharp
JYPPX.DeploySharp.OpenCvSharp
</code></pre>
<p><strong>Runtime åº</strong>ï¼</p>
<pre><code>OpenCvSharp4.runtime.win
OpenVINO.runtime.win
</code></pre>
<h4 id="2ä»£ç å®ç°-2">ï¼2ï¼ä»£ç å®ç°</h4>
<p>æ¨çä»£ç å¦ä¸æç¤ºï¼å¯ç´æ¥å¤å¶è¿è¡ï¼</p>
<pre><code class="language-csharp">using OpenCvSharp;            // å¼å¥ OpenCvSharpï¼ç¨äºå¾åçè¯»åãæ¾ç¤ºåç©éµæä½
using DeploySharp.Model;      // å¼å¥æ¨¡åå®ä¹åéç½®ç±»
using DeploySharp.Data;       // å¼å¥æ°æ®å¤çç¸å³çç±»
using DeploySharp.Engine;     // å¼å¥æ¨çå¼ææ ¸å¿æ¥å£åæä¸¾
using DeploySharp;            // å¼å¥ DeploySharp ä¸»åºåå¯è§åå·¥å·
namespace DeploySharp.OpenCvSharp.Demo
{
    /// &lt;summary&gt;
    ///  YOLO26 ç®æ æ£æµæ¼ç¤º (åºäºOpenVINO  + OpenCvSharp)
    /// &lt;/summary&gt;
    public class Yolov26DetDemo
    {
        public static void Run()
        {
            // ==========================================
            // 1. è·¯å¾éç½®
            // ==========================================
            
            // æ¨¡åä¸è½½æç¤ºï¼æ¨¡ååæµè¯å¾çå¯ä»¥åå¾QQç¾¤(945057948)ä¸è½½
            // æ³¨æï¼æ­¤å¤å è½½çæ¯æ åç .onnx æ¨¡åæä»¶ï¼èä¸æ¯ TensorRT ç .engine æä»¶ã
            // ONNX æ¨¡åå·æè¯å¥½çè·¨å¹³å°ç¹æ§ã
            string modelPath = @"E:\Model\yolov28\yolo26s.onnx";
            
            // è®¾ç½®å¾æ£æµçå¾çè·¯å¾
            string imagePath = @"E:\Data\image\bus.jpg";
            // ==========================================
            // 2. æ¨¡åéç½®
            // ==========================================
            
            // åå»º YOLO26Det çéç½®å¯¹è±¡ï¼ä¼ å¥æ¨¡åè·¯å¾
            Yolov26DetConfig config = new Yolov26DetConfig(modelPath);
            
            // ==========================================
            // 3. ç±»å«å­å¸å®ä¹ (COCO 80ç±»)
            // ==========================================
            
            // å®ä¹ COCO æ°æ®éç 80 ä¸ªç±»å«åç§°
            // è¿äºåç§°å°ç¨äºå¨ç»æå¯è§åæ¶æ æ³¨æ£æµå°çç©ä½
            List&lt;string&gt; d = new List&lt;string&gt; { "person", "bicycle", "car", "motorcycle", "airplane", "bus",
                "train", "truck", "boat", "traffic light", "fire hydrant", "stop sign", "parking meter", "bench",
                "bird", "cat", "dog", "horse", "sheep", "cow", "elephant", "bear", "zebra", "giraffe", "backpack",
                "umbrella", "handbag", "tie", "suitcase", "frisbee", "skis", "snowboard", "sports ball", "kite",
                "baseball bat", "baseball glove", "skateboard", "surfboard", "tennis racket", "bottle", "wine glass",
                "cup", "fork", "knife", "spoon", "bowl", "banana", "apple", "sandwich", "orange", "broccoli", "carrot",
                "hot dog", "pizza", "donut", "cake", "chair", "couch", "potted plant", "bed", "dining table", "toilet",
                "tv", "laptop", "mouse", "remote", "keyboard", "cell phone", "microwave", "oven", "toaster", "sink",
                "refrigerator", "book", "clock", "vase", "scissors", "teddy bear", "hair drier", "toothbrush" };
            // æå»º&lt;ç´¢å¼, ç±»å«å&gt;å­å¸
            Dictionary&lt;int, string&gt; CategoryDict = new Dictionary&lt;int, string&gt;();
            for (int i = 0; i &lt; d.Count; i++)
            {
                CategoryDict[i] = d[i];
            }
            
            // å°ç±»å«å­å¸èµå¼ç»éç½®å¯¹è±¡
            config.CategoryDict = CategoryDict;
            // ==========================================
            // 4. æ¨¡ååå§å
            // ==========================================
            
            // å®ä¾åæ¨¡åï¼ä¼ å¥éç½®ã
            // æ­¤æ¶ DeploySharp ä¼æ ¹æ®éç½®å è½½ ONNX æ¨¡åï¼å¹¶åå§å DirectML ä¼è¯ã
            Yolov26DetModel model = new Yolov26DetModel(config);
            
            // ä½¿ç¨ OpenCvSharp è¯»åå¾çå° Mat å¯¹è±¡ä¸­
            // Mat æ¯ OpenCV ä¸­ç¨äºå­å¨å¾åæ°æ®çæ ¸å¿ç©éµç»æ
            Mat img = Cv2.ImRead(imagePath);
            // ==========================================
            // 5. æ¨¡åæ¨ç (é¢ç­ä¸æµè¯)
            // ==========================================
            
            // æ§è¡å¤æ¬¡æ¨çã
            // ç¬¬ä¸æ¬¡æ¨çéå¸¸åå«æ¨¡åå è½½ãåå­åéç­åå§åå¼éï¼èæ¶è¾é¿ã
            Result[] result = model.Predict(img);
            
            // åç»­æ¨çç¨äºæµè¯ç¨³å®çæ¨çéåº¦ã
            result = model.Predict(img);
            result = model.Predict(img);
            result = model.Predict(img);
            
            // æå°æ§è½åæè®°å½ã
            // è¿å°è¾åºæ¨çè¿ç¨ä¸­åé¶æ®µï¼å¦é¢å¤çãæ¨çæ§è¡ãåå¤çï¼çèæ¶ç»è®¡ã
            model.ModelInferenceProfiler.PrintAllRecords();
            
            // åå§ååè¡¨ï¼ç¨äºå­å¨å¤çåçå¾åï¼æ¬ä¾ä¸»è¦ç¨äºæ¼ç¤ºï¼
            List&lt;Mat&gt; resultsMat = new List&lt;Mat&gt;();
            // ==========================================
            // 6. ç»æå¯è§åä¸æ¾ç¤º
            // ==========================================
            
            // è°ç¨å¯è§åå·¥å·ï¼å°æ£æµæ¡ï¼ç©å½¢æ¡ï¼åç±»å«æ ç­¾ç»å¶å¨åå¾ä¸ã
            // VisualizeOptions(1.0f) å¯è½æå®äºç¼©æ¾æ¯ä¾æå­ä½å¤§å°ç­åæ°ã
            var resultImg = Visualize.DrawDetResult(result, img, new VisualizeOptions(1.0f));
            
            // å°ç»å¶å¥½çå¾åå å¥åè¡¨
            resultsMat.Add(resultImg);
            
            // ä½¿ç¨ OpenCV ççªå£æ¾ç¤ºç»æå¾åã
            // "image" æ¯çªå£çæ é¢ã
            Cv2.ImShow("image", resultImg);
            
            // ç­å¾æé®è¾å¥ã
            // åæ° 0 è¡¨ç¤ºæ éæç­å¾ï¼ç´å°ç¨æ·æä¸é®çä»»æé®ã
            // è¿æ¯ä¸ºäºé²æ­¢æ§å¶å°ç¨åºæ§è¡å®æ¯åçªå£ç«å³éªéã
            Cv2.WaitKey();
        }
    
    }
}
</code></pre>
<h4 id="3ä»£ç è¯¦è§£-2">ï¼3ï¼ä»£ç è¯¦è§£</h4>
<p>ä¸è¿°ä»£ç ä¸ 3.2 èçä»£ç ç»æåºæ¬ç¸ä¼¼ãä½¿ç¨ OpenVINO ä½ä¸ºæ¨çåç«¯æ¶ï¼éå¸¸æ éé¢å¤è®¾ç½®ï¼å ä¸º DeploySharp é»è®¤æ¯æ OpenVINOã</p>
<p>è¥è®¾å¤éå¤è±ç¹å°çéææ¾å¡ãç¬ç«æ¾å¡æ NPUï¼å¯éè¿ä»¥ä¸ä»£ç æå®æ¨çè®¾å¤ä»¥è·å¾æ´å¥½çæ§è½ï¼</p>
<pre><code class="language-csharp">config.SetTargetInferenceBackend(InferenceBackend.OpenVINO);
config.SetTargetDeviceType(DeviceType.GPU0);   // è®¾ç½®è®¾å¤ä¸ºéæ¾
// æ
config.SetTargetDeviceType(DeviceType.GPU1);  // è®¾ç½®æ¨çè®¾å¤ä¸ºç¬ç«æ¾å¡
// æ
config.SetTargetDeviceType(DeviceType.NPU);  // è®¾ç½®æ¨çè®¾å¤ä¸º NPU
</code></pre>
<h4 id="4ç»æå±ç¤º-2">ï¼4ï¼ç»æå±ç¤º</h4>
<p>æ§å¶å°è¾åºå¦ä¸ãä½¿ç¨ OpenVINO å¨ CPU ä¸è¿è¡æ¨çæ¶ï¼è½å è®¾å¤éå¶æ¨çéåº¦æéï¼ä½ OpenVINO å·²æ¯ CPU ç¯å¢ä¸æ¨çéåº¦æå¿«çå·¥å·ä¹ä¸ï¼ä¸éç½®ç®åï¼å¨é¢æ¯æè±ç¹å°å¨ç³»è®¾å¤ï¼æ¬¢è¿å¼åèä½¿ç¨ã</p>
<p><img alt="image-20260116223936848" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2933426/202601/2933426-20260119224216075-1452741264.png" class="lazyload"></p>
<h2 id="åyolov26-å®ä¾åå²">åãYOLOv26 å®ä¾åå²</h2>
<h3 id="41-ä»£ç ä½¿ç¨ç¤ºä¾">4.1 ä»£ç ä½¿ç¨ç¤ºä¾</h3>
<pre><code class="language-csharp">using OpenCvSharp;            // å¼å¥ OpenCvSharpï¼ç¨äºå¾åè¯»åãæ¾ç¤ºåç©éµæä½
using DeploySharp.Model;      // å¼å¥æ¨¡åéç½®ç¸å³çç±»
using DeploySharp.Data;       // å¼å¥æ°æ®ç»æå®ä¹ç¸å³çç±»
using DeploySharp.Engine;     // å¼å¥æ¨çå¼ææ ¸å¿æ¥å£
using DeploySharp;            // å¼å¥ DeploySharp ä¸»åºåå¯è§åå·¥å·

namespace DeploySharp.OpenCvSharp.Demo
{
    /// &lt;summary&gt;
    /// YOLO26Seg å®ä¾åå²æ¼ç¤ºç±»
    /// æ¬ç¤ºä¾å±ç¤ºå¦ä½å è½½ TensorRT å¼ææä»¶ï¼å¯¹å¾åè¿è¡å®ä¾åå²æ¨çï¼å¹¶å°æ©ç ç»å¶å¨åå¾ä¸ã
    /// &lt;/summary&gt;
    public class Yolov26SegDemo
    {
        public static void Run()
        {
            // ==========================================
            // 1. è·¯å¾éç½®
            // ==========================================
            
            // æ¨¡åä¸è½½æç¤ºï¼æ¨¡ååæµè¯å¾çå¯ä»¥åå¾QQç¾¤(945057948)ä¸è½½
            // è®¾ç½® TensorRT å¼ææä»¶è·¯å¾ã
            // æ³¨æï¼è¿éä½¿ç¨çæ¯ .engine æä»¶ï¼å®æ¯éå¯¹ç¹å® GPU å TensorRT çæ¬ç¼è¯çã
            // æä»¶åä¸­ç '-seg' è¡¨ç¤ºè¿æ¯ä¸ä¸ªå¸¦æåå²å¤´çå®ä¾åå²æ¨¡åã
            string modelPath = @"D:\Program Files\TensorRT-10.13.0.35-cu11\bin\yolo26s-seg.engine";
            
            // è®¾ç½®å¾æ¨ççå¾çè·¯å¾
            string imagePath = @"E:\Data\image\bus.jpg";


            // ==========================================
            // 2. æ¨¡åéç½®ä¸åå§å
            // ==========================================
            
            // åå»º YOLO26Seg (å®ä¾åå²) çéç½®å¯¹è±¡ï¼ä¼ å¥æ¨¡åè·¯å¾
            Yolov26SegConfig config = new Yolov26SegConfig(modelPath);
            
            // [å³é®è®¾ç½®] æå®æ¨çåç«¯ä¸º TensorRTã
            // å©ç¨ TensorRT å¯ä»¥å¨ NVIDIA GPU ä¸è·å¾æé«çæ¨çéåº¦ã
            config.SetTargetInferenceBackend(InferenceBackend.TensorRT);
            
            // å®ä¾åæ¨¡åã
            // æ­¤æ¶ä¼å è½½å¼ææä»¶ï¼åå§å GPU æ¾å­ä¸ä¸æã
            Yolov26SegModel model = new Yolov26SegModel(config);


            // ==========================================
            // 3. å¾åå è½½
            // ==========================================
            
            // ä½¿ç¨ OpenCvSharp è¯»åå¾çã
            // img æ¯ä¸ä¸ª Mat å¯¹è±¡ï¼åå«äºå¾åçåç´ æ°æ®ã
            Mat img = Cv2.ImRead(imagePath);


            // ==========================================
            // 4. æ¨¡åæ¨ç (é¢ç­ä¸æ§è½æµè¯)
            // ==========================================
            
            // æ§è¡ç¬¬ä¸æ¬¡æ¨çã
            // é¦æ¬¡è¿è¡éå¸¸åå«æ¨¡åå è½½ãæ¾å­åéç­å¼éï¼èæ¶è¾é¿ã
            var result = model.Predict(img);
            
            // æ§è¡åç»­å¤æ¬¡æ¨çã
            // è¿æ¯ä¸ºäºæé¤åå§åå¼éï¼æµè¯æ¨¡åå¨ç¨³å®ç¶æä¸çæ¨çéåº¦ã
            result = model.Predict(img);
            result = model.Predict(img);
            result = model.Predict(img);
            
            // æå°æ¨çæ§è½åæè®°å½ã
            // è¿å°è¾åºé¢å¤çãæ¨çè®¡ç®ãåå¤çï¼åæ¬æ©ç çæï¼åé¶æ®µçèæ¶ã
            model.ModelInferenceProfiler.PrintAllRecords();


            // ==========================================
            // 5. ç»æå¯è§å
            // ==========================================
            
            // è°ç¨å¯è§åå·¥å·ï¼ç»å¶åå²ç»æã
            // æ³¨æè¿éä½¿ç¨çæ¯ DrawSegResult (ç»å¶åå²ç»æ)ï¼èä¸æ¯ DrawDetResult (ç»å¶æ£æµæ¡)ã
            // è¯¥å½æ°ä¼å°æ£æµå°çç©ä½æ¡ãç±»å«æ ç­¾ä»¥åå½©è²çåéææ©ç ç»å¶å¨åå¾ä¸ã
            var resultImg = Visualize.DrawSegResult(result, img, new VisualizeOptions(1.0f));
            
            // ä½¿ç¨ OpenCV çªå£æ¾ç¤ºæ¸²æåçç»æå¾åã
            Cv2.ImShow("image", resultImg);
            
            // ç­å¾æé®è¾å¥ï¼é²æ­¢çªå£éªéã
            Cv2.WaitKey();
        }
    }
}

</code></pre>
<h3 id="42-ä»£ç è¯¦è§£">4.2 ä»£ç è¯¦è§£</h3>
<ol>
<li>
<p><strong>åå»ºåå²éç½®</strong>ï¼</p>
<pre><code class="language-csharp">Yolov26SegConfig config = new Yolov26SegConfig(modelPath);
config.SetTargetInferenceBackend(InferenceBackend.TensorRT);
</code></pre>
<p><code>Yolov26SegConfig</code> æ¯ YOLOv26 åå²æ¨¡åçéç½®ç±»ã</p>
</li>
<li>
<p><strong>æ§è¡åå²æ¨ç</strong>ï¼</p>
<pre><code class="language-csharp">var result = model.Predict(img);
</code></pre>
<p>åå²æ¨çè¿å <code>SegResult[]</code> æ°ç»ï¼æ¯ä¸ªåç´ åå«è¾¹çæ¡ãç½®ä¿¡åº¦ãç±»å«ååå²æ©ç ã</p>
</li>
<li>
<p><strong>å¯è§ååå²ç»æ</strong>ï¼</p>
<pre><code class="language-csharp">var resultImg = Visualize.DrawSegResult(result, img, new VisualizeOptions(1.0f));
</code></pre>
<p><code>DrawSegResult</code> ä¼ä¸ºæ¯ä¸ªæ£æµå°çå¯¹è±¡ç»å¶ä¸åé¢è²çæ©ç ï¼å å å¨åå¾ä¸ã</p>
</li>
</ol>
<h3 id="43-åå²ç»æå±ç¤º">4.3 åå²ç»æå±ç¤º</h3>
<h4 id="æ§å¶å°è¾åº">æ§å¶å°è¾åº</h4>
<p>ä»¥ä¸ä¸å¼ æªå¾åå«å±ç¤ºäºå¨ TensorRT GPUãONNX Runtime(DirectML) GPUãOpenVINO CPU è®¾å¤ä¸çæ¨çæ§è½ãä¸åå¼æåæä¼å¿ï¼å¼åèå¯æ ¹æ®èªèº«ç¡¬ä»¶ç¯å¢éæ©æéåçæ¹æ¡ã</p>
<p><strong>TensorRT GPUï¼</strong></p>
<p><img alt="image-20260116231515663" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2933426/202601/2933426-20260119224216136-1621920571.png" class="lazyload"></p>
<p><strong>ONNX Runtime (DirectML) GPUï¼</strong></p>
<p><img alt="image-20260116231805014" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2933426/202601/2933426-20260119224216083-1971673963.png" class="lazyload"></p>
<p><strong>OpenVINO CPUï¼</strong></p>
<p><img alt="image-20260116231630904" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2933426/202601/2933426-20260119224216090-1735473904.png" class="lazyload"></p>
<h4 id="æ¨çç»æç»å¶">æ¨çç»æç»å¶</h4>
<p>ä¸å¾ä¸ºå®æ¹é¢è®­ç»æ¨¡åå¯¼åºåçæ¨çç»æç¤ºä¾ï¼</p>
<p><img alt="image-20260116231431298" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2933426/202601/2933426-20260119224216155-703981459.png" class="lazyload"></p>
<h2 id="äºyolov26-äººä½å§¿æä¼°è®¡">äºãYOLOv26 äººä½å§¿æä¼°è®¡</h2>
<h3 id="51-åè½ä»ç»">5.1 åè½ä»ç»</h3>
<p>YOLO26 Pose æ¨¡åç¨äºæ£æµäººä½å³é®ç¹ï¼éå¸¸æ¯æ 17 ä¸ªå³é®ç¹ï¼å¤´é¨ãé¢é¨ãè©èãæèãæèãèé¨ãèçãèè¸ç­ï¼ã</p>
<p><strong>å³é®ç¹å®ä¹</strong>ï¼COCO æ ¼å¼ï¼ï¼</p>
<table>
<thead>
<tr>
<th>å³é®ç¹</th>
<th>åç§°</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>nose</td>
<td>é¼»å­</td>
</tr>
<tr>
<td>1</td>
<td>left_eye</td>
<td>å·¦ç¼</td>
</tr>
<tr>
<td>2</td>
<td>right_eye</td>
<td>å³ç¼</td>
</tr>
<tr>
<td>3</td>
<td>left_ear</td>
<td>å·¦è³</td>
</tr>
<tr>
<td>4</td>
<td>right_ear</td>
<td>å³è³</td>
</tr>
<tr>
<td>5</td>
<td>left_shoulder</td>
<td>å·¦è©</td>
</tr>
<tr>
<td>6</td>
<td>right_shoulder</td>
<td>å³è©</td>
</tr>
<tr>
<td>7</td>
<td>left_elbow</td>
<td>å·¦è</td>
</tr>
<tr>
<td>8</td>
<td>right_elbow</td>
<td>å³è</td>
</tr>
<tr>
<td>9</td>
<td>left_wrist</td>
<td>å·¦è</td>
</tr>
<tr>
<td>10</td>
<td>right_wrist</td>
<td>å³è</td>
</tr>
<tr>
<td>11</td>
<td>left_hip</td>
<td>å·¦é«</td>
</tr>
<tr>
<td>12</td>
<td>right_hip</td>
<td>å³é«</td>
</tr>
<tr>
<td>13</td>
<td>left_knee</td>
<td>å·¦è</td>
</tr>
<tr>
<td>14</td>
<td>right_knee</td>
<td>å³è</td>
</tr>
<tr>
<td>15</td>
<td>left_ankle</td>
<td>å·¦è¸</td>
</tr>
<tr>
<td>16</td>
<td>right_ankle</td>
<td>å³è¸</td>
</tr>
</tbody>
</table>
<h3 id="52-ä»£ç ä½¿ç¨ç¤ºä¾">5.2 ä»£ç ä½¿ç¨ç¤ºä¾</h3>
<pre><code class="language-csharp">using OpenCvSharp;            // å¼å¥ OpenCvSharpï¼ç¨äºå¾åçè¯»åãæ¾ç¤ºåç©éµæä½
using DeploySharp.Model;      // å¼å¥æ¨¡åå®ä¹åéç½®ç±»
using DeploySharp.Data;       // å¼å¥æ°æ®ç»æç¸å³çç±»
using DeploySharp.Engine;     // å¼å¥æ¨çå¼ææ ¸å¿æ¥å£
using DeploySharp;            // å¼å¥ DeploySharp ä¸»åºåå¯è§åå·¥å·
using System;                 // å¼å¥ System å½åç©ºé´ä»¥ä½¿ç¨ Console

namespace DeploySharp.OpenCvSharp.Demo
{
    /// &lt;summary&gt;
    /// YOLO26Pose å§¿æä¼°è®¡æ¼ç¤ºç±»
    /// æ¬ç¤ºä¾å±ç¤ºäºå¦ä½å è½½ ONNX æ¨¡åè¿è¡äººä½å³é®ç¹æ£æµï¼å¹¶å¯è§åéª¨éª¼è¿æ¥ã
    /// &lt;/summary&gt;
    public class Yolov26PoseDemo
    {
        public static void Run()
        {
            // ==========================================
            // 1. è·¯å¾éç½®
            // ==========================================
            
            // æ¨¡åä¸è½½æç¤ºï¼æ¨¡ååæµè¯å¾çå¯ä»¥åå¾QQç¾¤(945057948)ä¸è½½
            // è®¾ç½® ONNX æ¨¡åæä»¶è·¯å¾ã
            // '-pose' åç¼è¡¨ç¤ºè¿æ¯ä¸ä¸ªä¸é¨ç¨äºå§¿æä¼°è®¡ï¼å³é®ç¹æ£æµï¼çæ¨¡åã
            string modelPath = @"E:\Model\yolov28\yolo26s-pose.onnx";
            
            // è®¾ç½®å¾æ¨ççå¾çè·¯å¾
            string imagePath = @"E:\Data\image\demo_9.jpg";


            // ==========================================
            // 2. æ¨¡åéç½®ä¸åå§å
            // ==========================================
            
            // åå»º YOLO26Pose (å§¿æä¼°è®¡) çéç½®å¯¹è±¡ï¼ä¼ å¥æ¨¡åè·¯å¾
            Yolov26PoseConfig config = new Yolov26PoseConfig(modelPath);
            
            // [å³é®è®¾ç½®] è®¾ç½®æ¨çåç«¯ä¸º ONNX Runtimeã
            // è¿ä½¿å¾æ¨¡åå¯ä»¥è·¨å¹³å°è¿è¡ï¼ä¸ä»éäº NVIDIA GPUï¼åå³äº ONNX Runtime çå®è£æä¾ç¨åºï¼ã
            config.SetTargetInferenceBackend(InferenceBackend.OnnxRuntime);
            
            // å®ä¾åå§¿æä¼°è®¡æ¨¡åã
            // æ¨¡åå è½½æ¶ä¼è§£æ ONNX å¾ç»æï¼åå¤å¥½è¾å¥è¾åºèç¹ã
            Yolov26PoseModel model = new Yolov26PoseModel(config);


            // ==========================================
            // 3. å¾åå è½½
            // ==========================================
            
            // ä½¿ç¨ OpenCvSharp è¯»åå¾çã
            Mat img = Cv2.ImRead(imagePath);


            // ==========================================
            // 4. æ¨¡åæ¨çä¸ç»ææ¥ç
            // ==========================================
            
            // æ§è¡æ¨çã
            // ç¬¬ä¸æ¬¡æ¨çéå¸¸è¾æ¢ï¼åå«åå§åå¼éã
            var result = model.Predict(img);
            
            // æ§è¡å¤æ¬¡æ¨çä»¥æµè¯ç¨³å®ç¶æä¸çæ§è½ã
            result = model.Predict(img);
            result = model.Predict(img);
            result = model.Predict(img);
            
            // æå°ç¬¬ä¸ä¸ªç»æçè¯¦ç»ä¿¡æ¯å°æ§å¶å°ã
            // å§¿æä¼°è®¡ç Result å¯¹è±¡éå¸¸åå«æ£æµæ¡ä¿¡æ¯ä»¥åä¸ä¸ªå³é®ç¹æ°ç»ã
            // è¿ä¸è¡æå©äºå¼åèè°è¯ï¼æ¥çæ¨¡åè¾åºçåå§æ°æ®ç»æã
            Console.WriteLine(result[0].ToString());
            
            // æå°æ§è½åæè®°å½ï¼æ¥çåé¶æ®µèæ¶ã
            model.ModelInferenceProfiler.PrintAllRecords();


            // ==========================================
            // 5. ç»æå¯è§å
            // ==========================================
            
            // è°ç¨å¯è§åå·¥å·ï¼ç»å¶å§¿æä¼°è®¡ç»æã
            // æ³¨æè¿éä½¿ç¨çæ¯ DrawPosesï¼å®ä¼èªå¨å°è¯å«åºçå³é®ç¹ï¼å¦ç¼çãè©èãèé¨ç­ï¼
            // ç¨åç¹æ åºï¼å¹¶æ ¹æ®äººä½ç»æè¿æ¥æéª¨æ¶ã
            // VisualizeOptions(1.0f) å¯è½æå®äºç»å¶æ¶ççº¿æ¡ç²ç»æå­ä½ç¼©æ¾æ¯ä¾ã
            var resultImg = Visualize.DrawPoses(result, img, new VisualizeOptions(1.0f));
            
            // æ¾ç¤ºç»æå¾åã
            Cv2.ImShow("image", resultImg);
            
            // ç­å¾æé®ï¼é²æ­¢çªå£éªéã
            Cv2.WaitKey();
        }
    }
}

</code></pre>
<h3 id="53-ä»£ç è¯¦è§£">5.3 ä»£ç è¯¦è§£</h3>
<ol>
<li>
<p><strong>åå»ºå§¿æä¼°è®¡éç½®</strong>ï¼</p>
<pre><code class="language-csharp">Yolov26PoseConfig config = new Yolov26PoseConfig(modelPath);
config.SetTargetInferenceBackend(InferenceBackend.OnnxRuntime);
</code></pre>
<p><code>Yolov26PoseConfig</code> æ¯ YOLOv26 å§¿æä¼°è®¡æ¨¡åçéç½®ç±»ã</p>
</li>
<li>
<p><strong>æ§è¡å§¿æä¼°è®¡æ¨ç</strong>ï¼</p>
<pre><code class="language-csharp">var result = model.Predict(img);
</code></pre>
<p>å§¿æä¼°è®¡æ¨çè¿å <code>KeyPointResult[]</code> æ°ç»ï¼æ¯ä¸ªåç´ åå«äººä½è¾¹çæ¡ãç½®ä¿¡åº¦å 17 ä¸ªå³é®ç¹åæ ã</p>
</li>
<li>
<p><strong>å¯è§åå§¿æä¼°è®¡ç»æ</strong>ï¼</p>
<pre><code class="language-csharp">var resultImg = Visualize.DrawPoses(result, img, new VisualizeOptions(1.0f));
</code></pre>
<p><code>DrawPoses</code> ä¼ç»å¶äººä½éª¨æ¶ï¼è¿æ¥å³é®ç¹ï¼åå³é®ç¹æ è®°ã</p>
</li>
</ol>
<h3 id="54-ç»æå±ç¤º">5.4 ç»æå±ç¤º</h3>
<h4 id="æ§å¶å°è¾åº-1">æ§å¶å°è¾åº</h4>
<p>ä»¥ä¸æªå¾å±ç¤ºäºå¨ ONNX Runtime CPU è®¾å¤ä¸çæ¨çæ§è½ï¼</p>
<p><img alt="image-20260116232926313" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2933426/202601/2933426-20260119224216086-1934712350.png" class="lazyload"></p>
<h4 id="æ¨çç»æç»å¶-1">æ¨çç»æç»å¶</h4>
<p>ä¸å¾ä¸ºå®æ¹é¢è®­ç»æ¨¡åå¯¼åºåçæ¨çç»æç¤ºä¾ï¼</p>
<p><img alt="image-20260116232942723" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2933426/202601/2933426-20260119224216045-652558304.png" class="lazyload"></p>
<h2 id="å­yolov26-æè½¬æ¡æ£æµ">å­ãYOLOv26 æè½¬æ¡æ£æµ</h2>
<p>YOLOv26 OBB (Oriented Bounding Box) æ¨¡åç¨äºæ£æµæè½¬ç©ä½ï¼çæå¸¦ææè½¬è§åº¦çè¾¹çæ¡ãè¿å¯¹äºæ£æµèªç©ºå½±åä¸­çå»ºç­ç©ãé¥æå¾åä¸­çè½¦è¾ç­åºæ¯éå¸¸éè¦ã</p>
<h3 id="61-ä»£ç ä½¿ç¨ç¤ºä¾">6.1 ä»£ç ä½¿ç¨ç¤ºä¾</h3>
<p>ä»¥ä¸ä»£ç æ¼ç¤ºå¦ä½ä½¿ç¨ TensorRT å¼æè¿è¡æè½¬ç®æ æ£æµï¼</p>
<pre><code class="language-csharp">using OpenCvSharp;            // å¼å¥ OpenCvSharpï¼ç¨äºå¾åè¯»åãæ¾ç¤ºåç»å¾
using DeploySharp.Model;      // å¼å¥æ¨¡åéç½®ç¸å³çç±»
using DeploySharp.Data;       // å¼å¥æ°æ®ç»æå®ä¹ç¸å³çç±»
using DeploySharp.Engine;     // å¼å¥æ¨çå¼ææ ¸å¿æ¥å£
using DeploySharp;            // å¼å¥ DeploySharp ä¸»åºåå¯è§åå·¥å·
namespace DeploySharp.OpenCvSharp.Demo
{
    /// &lt;summary&gt;
    /// YOLOv26 OBB æè½¬ç®æ æ£æµæ¼ç¤ºç±»
    /// æ¬ç¤ºä¾å±ç¤ºå¦ä½å è½½ TensorRT å¼ææä»¶ï¼å¯¹å¾åè¿è¡æè½¬ç®æ æ£æµï¼å¹¶ç»å¶æè½¬æ¡ã
    /// &lt;/summary&gt;
    public class Yolov26ObbDemo
    {
        public static void Run()
        {
            // ==========================================
            // 1. è·¯å¾éç½®
            // ==========================================
            
            // æ¨¡åä¸è½½æç¤ºï¼æ¨¡ååæµè¯å¾çå¯ä»¥åå¾ QQ ç¾¤ï¼945057948ï¼ä¸è½½
            // '-obb' è¡¨ç¤ºè¯¥æ¨¡åç¨äºè¾åºæè½¬è¾¹çæ¡
            string modelPath = @"D:\Program Files\TensorRT-10.13.0.35-cu11\bin\yolo26s-obb.engine";
            
            // è®¾ç½®å¾æ¨ççå¾çè·¯å¾
            // plane.png æ¯æè½¬ç®æ æ£æµçç»å¸æµè¯å¾ï¼é£æºåæºåªéå¸¸åå«åç§è§åº¦çé£æºï¼ã
            string imagePath = @"E:\Data\image\plane.png";
            // ==========================================
            // 2. æ¨¡åéç½®ä¸åå§å
            // ==========================================
            
            // åå»º YOLOv26 OBB (æè½¬ç®æ æ£æµ) çéç½®å¯¹è±¡ï¼ä¼ å¥æ¨¡åè·¯å¾
            Yolov26ObbConfig config = new Yolov26ObbConfig(modelPath);
            
            // [å³é®è®¾ç½®] æå®æ¨çåç«¯ä¸º TensorRTã
            // è¿å°è°ç¨ NVIDIA GPU è¿è¡é«æ§è½è®¡ç®ã
            // æ³¨æï¼å ä¸ºä½¿ç¨çæ¯ .engine æä»¶ï¼æä»¥å¿é¡»éæ© TensorRT åç«¯ã
            config.SetTargetInferenceBackend(InferenceBackend.TensorRT);
            
            // å®ä¾åæè½¬ç®æ æ£æµæ¨¡åã
            Yolov26ObbModel model = new Yolov26ObbModel(config);
            // ==========================================
            // 3. å¾åå è½½
            // ==========================================
            
            // ä½¿ç¨ OpenCvSharp è¯»åå¾çã
            Mat img = Cv2.ImRead(imagePath);
            // ==========================================
            // 4. æ¨¡åæ¨ç
            // ==========================================
            
            // æ§è¡æ¨çã
            var result = model.Predict(img);
            
     
            // å¦æéè¦æµè¯çº¯æ¨çéåº¦ï¼æé¤åå§åå¼éï¼ï¼å¯ä»¥åæ¶æ³¨éè¿è¡å¤æ¬¡å¾ªç¯ã
            result = model.Predict(img);
            result = model.Predict(img);
            result = model.Predict(img);
            
            // æå°æ§è½åæè®°å½ã
            // è¿å°æ¾ç¤ºé¢å¤çãTensorRT æ¨çãåå¤çï¼åå« OBB è§£ç ï¼çèæ¶ã
            model.ModelInferenceProfiler.PrintAllRecords();
            // ==========================================
            // 5. ç»æå¯è§å
            // ==========================================
            
            // è°ç¨å¯è§åå·¥å·ï¼ç»å¶æè½¬æ£æµç»æã
            // DrawObbResult ä¼æ ¹æ®æ£æµå°ç x, y, w, h å angle (è§åº¦) ç»å¶æè½¬ç©å½¢ã
            var resultImg = Visualize.DrawObbResult(result, img, new VisualizeOptions(1.0f));
            
            // [å¯é] è°æ´å¾çå¤§å°ä»¥éåºå±å¹
            // èªæå¾éå¸¸åè¾¨çå¾å¤§ï¼å¯ä»¥ç¼©å°æ¾ç¤ºã
            //Cv2.Resize(resultImg, resultImg, new Size(resultImg.Width / 4, resultImg.Height / 4));
            
            // æ¾ç¤ºç»æå¾åã
            Cv2.ImShow("image", resultImg);
            
            // ç­å¾æé®ï¼é²æ­¢çªå£éªéã
            Cv2.WaitKey();
        }
    }
}
</code></pre>
<h3 id="62-ä»£ç è¯¦è§£">6.2 ä»£ç è¯¦è§£</h3>
<ol>
<li>
<p><strong>åå»ºæè½¬æ¡æ£æµéç½®</strong>ï¼</p>
<pre><code class="language-csharp">Yolov26ObbConfig config = new Yolov26ObbConfig(modelPath);
config.SetTargetInferenceBackend(InferenceBackend.TensorRT);
</code></pre>
<p><code>Yolov26ObbConfig</code> æ¯ YOLOv26 æè½¬æ¡æ£æµæ¨¡åçéç½®ç±»ã</p>
</li>
<li>
<p><strong>æ§è¡æè½¬æ¡æ£æµæ¨ç</strong>ï¼</p>
<pre><code class="language-csharp">ObbResult[] result = model.Predict(img);
</code></pre>
<p>æè½¬æ¡æ£æµæ¨çè¿å <code>ObbResult[]</code> æ°ç»ï¼æ¯ä¸ªåç´ åå«ä¸­å¿ç¹ãå®½åº¦ãé«åº¦ãæè½¬è§åº¦åç±»å«ä¿¡æ¯ã</p>
</li>
<li>
<p><strong>å¯è§åæè½¬æ¡æ£æµç»æ</strong>ï¼</p>
<pre><code class="language-csharp">var resultImg = Visualize.DrawObbResult(result, img, new VisualizeOptions(1.0f));
</code></pre>
<p><code>DrawObbResult</code> ä¼ç»å¶æè½¬çè¾¹çæ¡ï¼åè¾¹å½¢ï¼ï¼èä¸æ¯æ®éçè½´å¯¹é½ç©å½¢ã</p>
</li>
</ol>
<h3 id="63-æè½¬æ¡æ£æµç»æå±ç¤º">6.3 æè½¬æ¡æ£æµç»æå±ç¤º</h3>
<h4 id="æ§å¶å°è¾åº-2">æ§å¶å°è¾åº</h4>
<p>ä»¥ä¸æªå¾å±ç¤ºäºå¨ TensorRT GPU è®¾å¤ä¸çæ¨çæ§è½ï¼</p>
<p><img alt="image-20260116233931296" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2933426/202601/2933426-20260119224216069-834053624.png" class="lazyload"></p>
<h4 id="æ¨çç»æç»å¶-2">æ¨çç»æç»å¶</h4>
<p>ä¸å¾ä¸ºå®æ¹é¢è®­ç»æ¨¡åå¯¼åºåçæ¨çç»æç¤ºä¾ï¼</p>
<p><img alt="image-20260116233543902" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2933426/202601/2933426-20260119224216106-230750162.png" class="lazyload"></p>
<h2 id="ä¸è·¨å¼ææ¯æ">ä¸ãè·¨å¼ææ¯æ</h2>
<p>DeploySharp åçæ¯æ OpenVINOãONNX RuntimeãTensorRT ä¸å¤§ä¸»æµæ¨çå¼æï¼ä¸ºå¼åèå¨ CPUãGPUãNPU ç­ä¸åç¡¬ä»¶è®¾å¤ä¸é¨ç½²æ¨¡åæä¾äºæå¨é¢çè§£å³æ¹æ¡ãéæç YOLOv26 ç³»åé»è®¤æ¯ææææ¨çå¼æï¼å¼åèå¯æ ¹æ®å®éç¡¬ä»¶ç¯å¢éæ©æä¼çæ¨çæ¹æ¡ã</p>
<h3 id="71-å¼ææ§è½å¯¹æ¯">7.1 å¼ææ§è½å¯¹æ¯</h3>
<table>
<thead>
<tr>
<th>å¼æ</th>
<th>ä¼å¿</th>
<th>éç¨åºæ¯</th>
<th>æ§è½ç¹ç¹</th>
</tr>
</thead>
<tbody>
<tr>
<td>OpenVINO</td>
<td>Intel ç¡¬ä»¶ä¼åï¼æ¯æå¤ç§è®¾å¤ï¼CPUãGPU0ãGPU1ãNPUï¼</td>
<td>Intel CPUãIntel GPUãNPU</td>
<td>Intel ç¡¬ä»¶å é</td>
</tr>
<tr>
<td>ONNX Runtime</td>
<td>å¹¿æ³æ¯æï¼è·¨å¹³å°ï¼å¼å®¹æ§å¥½</td>
<td>CPUãGPU(CUDA/DML)ãç§»å¨ç«¯</td>
<td>å¹³è¡¡æ§è½ä¸å¼å®¹æ§</td>
</tr>
<tr>
<td>TensorRT</td>
<td>NVIDIA GPU æè´æ§è½ï¼ç»è¿ä¸é¨ä¼å</td>
<td>NVIDIA GPU é«æ§è½åºæ¯</td>
<td>æä½³ GPU æ§è½</td>
</tr>
</tbody>
</table>
<h3 id="72-å¼æéæ©å»ºè®®">7.2 å¼æéæ©å»ºè®®</h3>
<p>æ ¹æ®ç¡¬ä»¶ç¯å¢ååºç¨åºæ¯éæ©åéçæ¨çå¼æï¼</p>
<table>
<thead>
<tr>
<th>ç¡¬ä»¶ç¯å¢</th>
<th>æ¨èå¼æ</th>
<th>è¯´æ</th>
</tr>
</thead>
<tbody>
<tr>
<td>Intel CPU/GPU</td>
<td>OpenVINO</td>
<td>Intel ç¡¬ä»¶ä¼åï¼æ§è½æä½³</td>
</tr>
<tr>
<td>NVIDIA GPU</td>
<td>TensorRT</td>
<td>æè´æ§è½ï¼éåé«é¢æ¨ç</td>
</tr>
<tr>
<td>NVIDIA GPU (éè¦çµæ´»æ§)</td>
<td>ONNX Runtime (CUDA)</td>
<td>å¼å®¹æ§å¥½ï¼æäºåæ¢</td>
</tr>
<tr>
<td>éç¨ CPU</td>
<td>ONNX Runtime</td>
<td>è·¨å¹³å°å¼å®¹æ§å¥½</td>
</tr>
</tbody>
</table>
<h3 id="73-å¼æåæ¢ç¤ºä¾">7.3 å¼æåæ¢ç¤ºä¾</h3>
<pre><code class="language-csharp">// åæ¢å° OpenVINO
config.SetTargetInferenceBackend(InferenceBackend.OpenVINO);
config.TargetDeviceType = DeviceType.CPU;

// åæ¢å° ONNX Runtime (CUDA)
config.SetTargetInferenceBackend(InferenceBackend.OnnxRuntime);
config.TargetDeviceType = DeviceType.GPU;

// åæ¢å° TensorRT
config.SetTargetInferenceBackend(InferenceBackend.TensorRT);
config.TargetDeviceType = DeviceType.GPU;
</code></pre>
<p><strong>æ³¨æ</strong>ï¼åæ¢æ¨çå¼æå¯è½éè¦éæ°å è½½æ¨¡åï¼å»ºè®®å¨åºç¨å¯å¨æ¶ç¡®å®ä½¿ç¨çå¼æã</p>
<h2 id="å«æ§è½ä¼åå»ºè®®">å«ãæ§è½ä¼åå»ºè®®</h2>
<h3 id="81-é¢ç­æºå¶">8.1 é¢ç­æºå¶</h3>
<p>é¦æ¬¡æ¨çéå¸¸è¾æ¢ï¼å ä¸ºéè¦å è½½æ¨¡åãåå§åæ¨çå¼æãç¼è¯è®¡ç®å¾ç­ãå»ºè®®æ§è¡å æ¬¡é¢ç­æ¨çã</p>
<pre><code class="language-csharp">// é¢ç­æ¨¡åï¼æ§è¡ 3 æ¬¡æ¨çï¼
for (int i = 0; i &lt; 3; i++)
{
    model.Predict(img);
}

// å®éæ¨ç
var result = model.Predict(img);
</code></pre>
<h3 id="82-æ¹éæ¨ç">8.2 æ¹éæ¨ç</h3>
<p>å¯¹äºå¤§éå¾åï¼ä½¿ç¨æ¹éæ¨çå¯ä»¥æé«ååéï¼åææ¯æ¨¡åæ¯æå¤ Batch Sizeã</p>
<pre><code class="language-csharp">// è®¾ç½®æ¹éå¤§å°ä¸º 4
config.InferBatch = 4;

// åå¤æ¹éå¾å
var imageList = new List&lt;Image&lt;Rgb24&gt;&gt;();
imageList.Add(Image.Load&lt;Rgb24&gt;(@"path1.jpg"));
imageList.Add(Image.Load&lt;Rgb24&gt;(@"path2.jpg"));
imageList.Add(Image.Load&lt;Rgb24&gt;(@"path3.jpg"));
imageList.Add(Image.Load&lt;Rgb24&gt;(@"path4.jpg"));

// æ§è¡æ¹éæ¨ç
var results = model.Predict(imageList);
</code></pre>
<h3 id="83-è®¾å¤éæ©">8.3 è®¾å¤éæ©</h3>
<p>æ ¹æ®ç¡¬ä»¶éæ©æä¼è®¾å¤ï¼</p>
<pre><code class="language-csharp">// Intel ç¯å¢ï¼ä½¿ç¨ OpenVINO
config.SetTargetInferenceBackend(InferenceBackend.OpenVINO);

// NVIDIA ç¯å¢ï¼ä½¿ç¨ TensorRT æ ONNX Runtime (CUDA)
config.SetTargetInferenceBackend(InferenceBackend.TensorRT);
config.TargetDeviceType = DeviceType.GPU;
</code></pre>
<h2 id="ä¹æ»ç»">ä¹ãæ»ç»</h2>
<p>DeploySharp å¯¹ YOLOv26 ç³»åæä¾äºå¨é¢èæ·±å¥çæ¯æï¼åæ¬ï¼</p>
<ol>
<li><strong>åç§ä»»å¡ç±»åå¨è¦ç</strong>ï¼æ£æµãåå²ãå§¿æä¼°è®¡ãæè½¬æ¡æ£æµ</li>
<li><strong>åå¾åå¤çåºæ¯æ</strong>ï¼ImageSharp å OpenCvSharp</li>
<li><strong>ä¸æ¨çå¼æå¼å®¹</strong>ï¼OpenVINOãONNX RuntimeãTensorRT</li>
<li><strong>å®åçéç½®ç³»ç»</strong>ï¼çµæ´»çåæ°è®¾ç½®</li>
<li><strong>è¯¦ç»çæ§è½åæ</strong>ï¼åç½®æ§è½åæå¨</li>
<li><strong>ä¸°å¯çå¯è§åéé¡¹</strong>ï¼æ¯æå¤ç§ç»æå±ç¤ºæ¹å¼</li>
</ol>
<p>YOLOv26 çç®åçè¾åºæ ¼å¼åä¼åçæ¶æï¼ç»å DeploySharp çå°è£åä¼åï¼ä½¿å¾å¼åèå¯ä»¥è½»æ¾å°å° YOLOv26 éæå°åç§ C# åºç¨ä¸­ï¼æå»ºé«æãåç¡®çè®¡ç®æºè§è§è§£å³æ¹æ¡ã</p>
<p>éç YOLO ç³»åçæç»­åå±ï¼DeploySharp ä¹å°æç»­è·è¿ï¼ä¸ºå¼åèæä¾ææ°æ¨¡åçæ¯æãæå¾ YOLOv26 åæªæ¥çæ¬çæ´å¤åæ°åçªç ´ã</p>
<h2 id="ææ¯æ¯æ">ææ¯æ¯æ</h2>
<p>å¦æé®é¢æå»ºè®®ï¼æ¬¢è¿éè¿ä»¥ä¸æ¹å¼äº¤æµï¼</p>
<ul>
<li>ð§ <strong>GitHub Issues</strong>ï¼å¨é¡¹ç®ä»åºæ Issue æ Pull Request</li>
<li>ð¬ <strong>QQ äº¤æµç¾¤</strong>ï¼å å¥ <strong>945057948</strong>ï¼åå¤æ´æ¹ä¾¿æ´å¿«å¦</li>
</ul>
<p><img alt="QQç¾¤äºç»´ç " loading="lazy" data-src="https://img2024.cnblogs.com/blog/2933426/202601/2933426-20260119224216068-1852063019.png" class="lazyload"></p>
<hr>
<p><em>ä½èï¼Guojin Yan</em><br>
<em>çæ¬ï¼0.0.6.1</em><br>
<em>æåæ´æ°ï¼2026å¹´1æ</em></p>
<hr>
<p><strong>ãæç« å£°æã</strong></p>
<p>æ¬æä¸»è¦åå®¹åºäºä½èçç ç©¶ä¸å®è·µï¼é¨åè¡¨è¿°åå©AIå·¥å·è¿è¡äºè¾å©ä¼åãç±äºææ¯å±éæ§ï¼æä¸­å¯è½å­å¨éè¯¯æçæ¼ä¹å¤ï¼æ³è¯·åä½è¯»èæ¹è¯ææ­£ãå¦æåå®¹æ æä¸­ä¾µç¯äºæ¨çæçï¼è¯·åæ¶éè¿å¬ä¼å·åå°ä¸æä»¬èç³»ï¼æä»¬å°ç¬¬ä¸æ¶é´æ ¸å®å¹¶å¦¥åå¤çãæè°¢æ¨ççè§£ä¸æ¯æï¼</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-19 22:48">2026-01-19 22:47</span>&nbsp;
<a href="https://www.cnblogs.com/guojin-blogs">æ¤é¢ç®ç®è¾</a>&nbsp;
éè¯»(<span id="post_view_count">60</span>)&nbsp;
è¯è®º(<span id="post_comment_count">1</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19503930);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19503930', targetLink: 'https://www.cnblogs.com/guojin-blogs/p/19503930', title: 'DeploySharp å¨é¢æ¯æ YOLO26 ç³»åï¼å©åå¼åèå¿«éé¨ç½²è½å°åºç¨' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨äºï¼èªç¶è¯­è¨å¤ç  ç¬¬äºå¨ï¼è¯åµå¥ï¼äºï¼è¯åµå¥æ¨¡ååç ]]></title>
    <link>https://www.cnblogs.com/Goblinscholar/p/19503620</link>
    <guid>51a18bd2704cdccd189bbf21e0747ad0</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Goblinscholar/p/19503620" title="åå¸äº 2026-01-19 20:35">
    <span role="heading" aria-level="2">å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨äºï¼èªç¶è¯­è¨å¤ç  ç¬¬äºå¨ï¼è¯åµå¥ï¼äºï¼è¯åµå¥æ¨¡ååç</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>æ­¤åç±»ç¨äºè®°å½å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨çå­¦ä¹ ç¬è®°ã<br>
è¯¾ç¨ç¸å³ä¿¡æ¯é¾æ¥å¦ä¸ï¼</p>
<ol>
<li>åè¯¾ç¨è§é¢é¾æ¥ï¼<a href="https://www.bilibili.com/video/BV1FT4y1E74V?buvid=XU762317353676D786954061C192FE625463B&amp;from_spmid=playlist.playlist-detail.0.0&amp;is_story_h5=false&amp;mid=zqernykrmpf7XfIorMR%2FnA%3D%3D&amp;plat_id=116&amp;share_from=ugc&amp;share_medium=android&amp;share_plat=android&amp;share_session_id=ce0bc526-db69-428a-962e-c65ed8c267bc&amp;share_source=COPY&amp;share_tag=s_i&amp;spmid=united.player-video-detail.0.0&amp;timestamp=1713085655&amp;unique_k=DfBgvFW&amp;up_id=8654113&amp;vd_source=e035e9878d32f414b4354b839a4c31a4" target="_blank" rel="noopener nofollow">[åè¯­å­å¹]å´æ©è¾¾æ·±åº¦å­¦ä¹ deeplearning.ai</a></li>
<li>githubè¯¾ç¨èµæï¼å«è¯¾ä»¶ä¸ç¬è®°:<a href="https://github.com/robbertliu/deeplearning.ai-andrewNG" target="_blank" rel="noopener nofollow">å´æ©è¾¾æ·±åº¦å­¦ä¹ æå­¦èµæ</a></li>
<li>è¯¾ç¨éå¥ç»ä¹ ï¼ä¸­è±ï¼ä¸ç­æ¡ï¼<a href="https://blog.csdn.net/u013733326/article/details/79827273" target="_blank" rel="noopener nofollow">å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾åä¹ é¢ä¸ç­æ¡</a></li>
</ol>
<p>æ¬ç¯ä¸ºç¬¬äºè¯¾çç¬¬äºå¨åå®¹ï¼<a href="https://www.bilibili.com/video/BV1FT4y1E74V?spm_id_from=333.788.videopod.episodes&amp;vd_source=e035e9878d32f414b4354b839a4c31a4&amp;p=166" target="_blank" rel="noopener nofollow">2.4</a>å°<a href="https://www.bilibili.com/video/BV1FT4y1E74V?spm_id_from=333.788.videopod.episodes&amp;vd_source=e035e9878d32f414b4354b839a4c31a4&amp;p=167" target="_blank" rel="noopener nofollow">2.5</a>çåå®¹ä»¥åä¸äºç¸å³ç¥è¯çè¡¥åã</p>
<hr>
<p>æ¬å¨ä¸ºç¬¬äºè¯¾çç¬¬äºå¨åå®¹ï¼ä¸ CV ç¸å¯¹åºçï¼è¿ä¸è¯¾ææåå®¹çä¸­å¿åªæä¸ä¸ªï¼<strong>èªç¶è¯­è¨å¤çï¼Natural Language Processingï¼NLPï¼</strong>ã<br>
åºç¨å¨æ·±åº¦å­¦ä¹ éï¼å®æ¯ä¸é¨ç¨æ¥è¿è¡<strong>ææ¬ä¸åºåä¿¡æ¯å»ºæ¨¡</strong>çæ¨¡ååææ¯ï¼æ¬è´¨ä¸æ¯å¨å¨è¿æ¥ç½ç»ä¸ç»è®¡è¯­è¨æ¨¡ååºç¡ä¸çä¸æ¬¡âç»æåç¹åâï¼ä¹æ¯äººå·¥æºè½ä¸­<strong>æè´´è¿äººç±»æç»´è¡¨è¾¾æ¹å¼</strong>çéè¦ç ç©¶æ¹åä¹ä¸ã<br>
<strong>è¿ä¸æ´èè¯¾åæ ·æ¶åå¤§ééè¦åå¤æ¶åçåå®¹ï¼æ¨ªè·¨æºå¨å­¦ä¹ ãæ¦çç»è®¡ãçº¿æ§ä»£æ°ä»¥åè¯­è¨å­¦ç´è§ã</strong><br>
è¯­è¨ä¸åå¾åé£æ ·âç´è§å¯è§âï¼æ´å¤æ¯æ½è±¡ç¬¦å·ä¸ä¸ä¸æå³ç³»çç»åï¼å æ­¤<strong>çè§£é¨æ§åèæ´é«</strong>ã<br>
å æ­¤ï¼æåæ ·ä¼å°½éè¡¥è¶³å¿è¦çèæ¯ç¥è¯ï¼å°½å¯è½ç¨æ¯å»åå®ä¾éä½çè§£é¾åº¦ã<br>
æ¬å¨çåå®¹å³äºè¯åµå¥ï¼æ¯ä¸ç§<strong>ç¸å¯¹äºç¬ç­ç¼ç ï¼æ´è½ä¿çè¯­ä¹ä¿¡æ¯çææ¬ç¼ç æ¹å¼</strong>ãéè¿è¯åµå¥ï¼æ¨¡åä¸ååªæ¯âè®°ä½âè¯æ¬èº«ï¼èæ¯è½å¤<strong>åºäºè¯­ä¹å³ç³»è¿è¡æ³å</strong>ï¼å¨ä¸å®ç¨åº¦ä¸å®ç°ç±»ä¼¼â<strong>ä¸¾ä¸åä¸</strong>âçææãè¯åµå¥æ¯ NLP é¢åä¸­æéè¦çåºç¡ææ¯ä¹ä¸ã</p>
<p>æ¬ç¯çåå®¹å³äº<strong>è¯åµå¥æ¨¡ååç</strong>ï¼æ¯äºè§£åºç¡åå®¹åçä¸ä¸æ­¥å¼å¥ã</p>
<h1 id="1-è¯åµå¥ç©éµ">1. è¯åµå¥ç©éµ</h1>
<p>å¨<a href="https://www.cnblogs.com/Goblinscholar/p/19494158" target="_blank">ä¸ä¸ç¯</a>ä¸­ï¼æä»¬ç¥ééè¿è¯åµå¥å¯ä»¥å®ç°è¯æ±çç¹å¾åè¡¨ç¤ºï¼è¿ç§åºåä¿¡æ¯ç¼ç æ¹å¼ç¸æ¯ç¬ç­ç¼ç ä¸ä»èçº¦äºå­å¨åæ¶é´ææ¬ï¼èä¸å¯ä»¥éåè¯æ±çè¯­ä¹æ¥æåæ¨¡åæ§è½ã<br>
é£ä¹è¦å¦ä½è®­ç»ä¸ä¸ªå¯ä»¥è¾åºå¯¹è¯æ±åéç¼ç çè¯åµå¥æ¨¡åå¢ï¼<br>
å®éä¸ï¼è¯åµå¥æ¨¡åçåçåæä»¬ä¹åä»ç»è¿ç<a href="https://www.cnblogs.com/Goblinscholar/p/19423276" target="_blank">å¾åé£æ ¼è½¬æ¢</a>æäºç±»ä¼¼ï¼å°±åå¶é¦åè¦éæºåå§åç®æ å¾åä¸æ ·ï¼è¯åµå¥æ¨¡åçç¬¬ä¸æ­¥ï¼å¹¶ä¸æ¯âçè§£è¯­ä¹âï¼èæ¯<strong>åç»æ¯ä¸ªè¯ä¸ä¸ªå¯ä»¥è¢«å­¦ä¹ çæ°å¼è½½ä½</strong>ã<br>
å·ä½æ¥è¯´æ¯è¿æ ·çï¼<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260119203403821-212247932.png" alt="image" loading="lazy"></p>
<p>å¦å¾æç¤ºï¼åè®¾æä»¬çè¯è¡¨å¤§å°ä¸º <span class="math inline">\(|V|\)</span>ï¼è¯åéç»´åº¦è®¾ä¸º <span class="math inline">\(d\)</span>ï¼é£ä¹è¯åµå¥æ¬è´¨ä¸å°±æ¯ä¸ä¸ªç©éµï¼æ¯ä¸è¡å¯¹åºè¯è¡¨ä¸­çä¸ä¸ªè¯ï¼æä»¬ç§°ä¹ä¸º<strong>è¯åµå¥ç©éµ</strong>ã</p>
<p></p><div class="math display">\[\mathbf{E}
=
\begin{bmatrix}
v_{1,1} &amp; v_{1,2} &amp; v_{1,3} &amp; \cdots &amp; v_{1,d} \\
v_{2,1} &amp; v_{2,2} &amp; v_{2,3} &amp; \cdots &amp; v_{2,d} \\
v_{3,1} &amp; v_{3,2} &amp; v_{3,3} &amp; \cdots &amp; v_{3,d} \\
\vdots  &amp; \vdots  &amp; \vdots  &amp; \ddots &amp; \vdots  \\
v_{|V|,1} &amp; v_{|V|,2} &amp; v_{|V|,3} &amp; \cdots &amp; v_{|V|,d}
\end{bmatrix}
\]</div><p></p><p>è¿ééè¦å¼ºè°çæ¯ï¼å¨è¯¾ç¨ä¸­ï¼å´æ©è¾¾èå¸å¸¸å¨è¯åµå¥ç©éµä¸­ä½¿ç¨ååéæ¥è¡¨ç¤ºè¯åéï¼ä»¥å¹éç©éµä¹æ³ççº¦å®ãä½å¨å®éå·¥ç¨ä»£ç ä¸­ï¼éå¸¸è§ä½è¡åéï¼ç©éµè¡å¯¹åºè¯åéï¼ã<strong>è¿åªæ¯çº¦å®é®é¢</strong>ï¼åå³äºå®ç°æ¹å¼ï¼æå­¦ä¸­ååéä¾¿äºå¬å¼æ¨å¯¼ï¼ä»£ç ä¸­è¡åéæ´é«æãäºè§£åï¼æ ¹æ®åºæ¯éæ©å³å¯ã<br>
åå°æ­£é¢ï¼å¨æ¨¡ååå§åé¶æ®µï¼è¯åµå¥ç©éµ<strong>å¹¶ä¸åå«ä»»ä½è¯­ä¹ä¿¡æ¯</strong>ï¼éå¸¸éç¨éæºåå§åï¼æèæä»åå¼ä¸º 0 çæ­£æåå¸ã<br>
æä»¬ä¹åå°±è¯´è¿ï¼è¯åéå¹¶ä¸æ¯æä»¬æå·¥è®¾å®çï¼èæ¯å¨æ¨¡åå­¦ä¹ å¾å°çï¼å¨æä»¬å®æè¯åµå¥ç©éµçåå§ååï¼<strong>è¯åµå¥æ¨¡åçç®çå°±æ¯ä¸æ­ä¼ æ­åä¼åè¯åµå¥ç©éµï¼å¾å°å¯¹è¯­ä¹ç¼ç åççè¯åé</strong>ï¼ä»èè¿è¡ä¸ä¸æ­¥åºç¨ã</p>
<p>å°è¿éå°±ä¼åç°ï¼å­¦ä¹ è¯åµå¥ç©éµçè¿ç¨åå¾åé£æ ¼è½¬æ¢çè¿ç¨éå¸¸ç¸ä¼¼ï¼ä¸å¼å§æ¯éæºåªå£°ï¼ä½å¨æå¤±å½æ°ççº¦æä¸ï¼éæ­¥å­¦ä¹ å¾å°ç»æåãææä¹çç»æã</p>
<p>å¨å®æè¯åµå¥ç©éµçåå§ååï¼<strong>æ¨¡åè®­ç»çæ ¸å¿ä»»å¡å°±æ¯è®¾è®¡åççä¸ä¸æé¢æµç®æ ï¼è®©ç©éµä¸­æ¯ä¸è¡ï¼è¯åéï¼éæ­¥è°æ´ä½ç½®ï¼ä»èæºå¸¦è¯­ä¹ä¿¡æ¯ã</strong></p>
<h1 id="2-æ©æè¯åµå¥æ¨¡å">2. æ©æè¯åµå¥æ¨¡å</h1>
<p>å¨ 2003 å¹´ï¼ä¸ç¯è®ºæ <a href="https://www.jmlr.org/papers/volume3/bengio03a/bengio03a.pdf" target="_blank" rel="noopener nofollow">A Neural Probabilistic Language Model</a>ï¼é¦æ¬¡å±ç¤ºäºä¸ä¸ªç¥ç»ç½ç»è¯­è¨æ¨¡åï¼å®ä¸ä»é¢æµä¸ä¸ä¸ªè¯çæ¦çåå¸ï¼è¿éè¿ä¸ä¸ªåµå¥å±å°è¯ç´¢å¼æ å°ä¸ºå®å¼åéãè¿äºåéæä¸ºäºè¯çç¨ å¯è¡¨ç¤ºï¼ä¹å°±æ¯æä»¬ä»å¤©æè¯´ç<strong>è¯åµå¥ï¼word embeddingsï¼</strong>ã<br>
å°½ç®¡å½æ¶è®ºæä¸­å¹¶æ²¡æç´æ¥ä½¿ç¨âword embeddingâè¿ä¸ªæ¯è¯­ï¼ä½å¶æ ¸å¿ææ³ï¼<strong>éè¿ç¥ç»ç½ç»å­¦ä¹ è¯çåå¸å¼åéè¡¨ç¤º</strong>ââæ­£æ¯ç°ä»£è¯åµå¥æ¨¡åççè®ºæºå¤´ã</p>
<h2 id="21-è¯åµå¥æ¨¡ååç">2.1 è¯åµå¥æ¨¡ååç</h2>
<p>è¿ä¸é¨åæä»¬å±å¼ä¸ä¸ï¼ç¨æ©æçæ¨¡åä»ç»ä¸ä¸æç»å¸çä¸ç±»è¯åµå¥æ¨¡åï¼<strong>é¢æµåè¯åµå¥æ¨¡å</strong>çåºæ¬é»è¾ï¼<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260119202257923-2120601282.png" alt="image.png" loading="lazy"><br>
å¾ä¸­ç®è¦æè¿°äºè¯¥æ¨¡åçä¼ æ­é»è¾ï¼è¡¥åä¸äºç»èå¦ä¸ï¼</p>
<ol>
<li><strong>åµå¥å±ï¼Embedding Layerï¼</strong>ï¼å¨å¾ä¸­çå·¦åé¨åï¼å®æçæ¯<strong>å­å¨è¯åµå¥ç©éµåæ ¹æ®ç´¢å¼æ¥æ¾æºå¶æåè¯åé</strong>çå·¥ä½ï¼æä»¬ç§°å®æè¿é¨ååå®¹çç»æä¸º<strong>åµå¥å±</strong>ã</li>
<li><strong>çªå£å¤§å° <span class="math inline">\(t\)</span></strong>ï¼è¿æ¯ä¸ä¸ªè¶åæ°ï¼å½é¢æµåºåä¸­ç¬¬ <span class="math inline">\(n\)</span> ä¸ªè¯æ±æ¶ï¼æä»¬ä½¿ç¨å¶ä¹å <span class="math inline">\(t\)</span> ä¸ªè¯æ±ä½ä¸ºåºåä¿¡æ¯ã<strong>å¨ç°ä»£ï¼åæå¦æä¸è¶³ <span class="math inline">\(t\)</span> ä¸ªï¼åä¼ä½¿ç¨ç¹æ®ç¬¦å·å¡«åã</strong></li>
<li><strong>èåæ´æ°</strong>ï¼å¨ååä¼ æ­è¿ç¨ä¸­ï¼<strong>åµå¥å±åç½ç»çå¶ä»åæ°åæ¶æ´æ°</strong>ãè¿æå³çæ¯æ¬¡çå°è®­ç»æ ·æ¬ï¼åµå¥ç©éµä¸­æ¶åç<strong>è¯åéä¼åç½ç»åæ°ä¸èµ·æ²¿æ¢¯åº¦æ¹åè°æ´</strong>ï¼ä½¿å¶æ´æå©äºä¸ä¸ä¸ªè¯çé¢æµã</li>
</ol>
<p>é£è¯åéå·ä½æ¯æä¹æ´æ°æ¥å­¦ä¹ è¯­ä¹çå¢ï¼æä»¬å±å¼è¯´è¯´ï¼</p>
<h2 id="22-è¯åéçè¯­ä¹å­¦ä¹ ">2.2 è¯åéçè¯­ä¹å­¦ä¹ </h2>
<p>ä¸¾ä¸ªä¾å­æ¥çè§£ä¸ä¸è¯åéçæ´æ°é»è¾ï¼<br>
åè®¾è®­ç»è¯­æä¸­åºç°äºè®¸å¤å³äºæ°´æçå¥å­ï¼æ¯å¦ï¼</p>
<pre><code>I like to eat apple.
She bought a banana yesterday.
Orange juice is tasty.
</code></pre>
<p>ç°å¨ï¼æ¨¡åçä»»å¡æ¯<strong>æ ¹æ®ä¸ä¸æé¢æµä¸ä¸ä¸ªè¯</strong>ãå½çå°å¥å­ <code>"I like to eat apple"</code> æ¶ï¼æ¨¡åä¼é¢æµä¸ä¸ä¸ªè¯å¯è½æ¯ <code>"apple"</code>ã<br>
è¿æ¶ï¼ååä¼ æ­æ¶ï¼æ¨¡åä¼è°æ´ <strong>âappleâå¯¹åºçè¯åé</strong>ä»¥åä¸ä¸æä¸­å¶ä»è¯çåéï¼ä½¿å¾ç½ç»æ´å®¹ææ­£ç¡®é¢æµ <code>"apple"</code>ã</p>
<p>åçï¼å½è®­ç»æ ·æ¬ä¸­åºç° <code>"banana"</code> æ <code>"orange"</code> æ¶ï¼è¿äºè¯çåéä¹ä¼å ä¸ºç¸ä¼¼çä¸ä¸æèè¢«è°æ´å°<strong>ç¸äºé è¿çä½ç½®</strong>ï¼<code>"apple"</code>, <code>"banana"</code>, <code>"orange"</code> <strong>è¿äºåç±»åçè¯å¸¸åºç°å¨ç±»ä¼¼çä¸ä¸æ</strong>ï¼å¦ eatãjuiceãlike ç­ï¼<br>
æç»æ¨¡åéè¿æ¢¯åº¦æ´æ°ï¼è®©è¿äºè¯åéå¨åéç©ºé´ä¸­<strong>å½¼æ­¤é è¿</strong>ï¼ä»èèªç¶ææå°è¯­ä¹ç¸ä¼¼æ§ã</p>
<p>è¿æ ·çææå°±æ¯ï¼å³ä½¿æ¨¡åä»æªæ¾å¼åç¥âå®ä»¬é½æ¯æ°´æâï¼è¯åéä¹ä¼å ä¸ºä¸ä¸ææ¨¡å¼ç¸ä¼¼èèªå¨èéå¨ä¸èµ·ï¼å½¢æ<strong>è¯­ä¹ç°ï¼semantic clusterï¼</strong>ï¼å³åéç©ºé´ä¸­ï¼è¯­ä¹ç¸è¿çè¯èªç¶èå¨ä¸èµ·å½¢æçç¾¤ä½ã<br>
è¿æ¶ï¼é¢å¯¹ä¸é¢è¿ä¸¤å¥è¯ï¼</p>
<pre><code>è®­ç»ï¼I like orange juice.
æµè¯ï¼I love apple _____. 
</code></pre>
<p>æ¨¡åå³ä½¿<strong>æ²¡è§è¿æµè¯è¯­å¥ï¼ä¹å¯ä»¥éè¿<code>"love å like"</code>ã<code>"apple å orange"</code> å¨åéç©ºé´çè·ç¦»ç¸è¿å¾å°æ´å¯é çç­æ¡ï¼ä»èæé«æ¨¡åæ§è½ã</strong></p>
<p>ç¨ä¸å¥è¯æ»ç»ä¸ä¸ï¼<strong>åç±»åçè¯æ±å¾å¾åºç°å¨ç¸ä¼¼çä¸ä¸æä¸­ï¼å æ­¤å¨æ´æ°åæ´å ç¸ä¼¼ï¼æç»å¨åéç©ºé´ä¸­å½¢æè¯­ä¹ç°ï¼æå¤§å¢å¼ºäºæ¨¡åçæ³åè½åã</strong></p>
<p>ä½ ä¼åç°ï¼<strong>å¨è¯åµå¥æ¨¡åä¸­ï¼è¯åéçè¯­ä¹ç»æå¹¶ä¸æ¯æ¾å¼æç»æ¨¡åçï¼èæ¯å¨ä¸ä¸æé¢æµä»»å¡ä¸­èªç¶èç¶å­¦å°çï¼æ¨¡åå¹¶æ²¡æä¸é¨å»âè®­ç»åéç¼ç âï¼èæ¯å¨é¢æµä¸­è®©ç¸ä¼¼çè¯ä¸æ­é è¿ã</strong><br>
åæ ·æ¯å¯¹æ°æ®è¿è¡ç¼ç ï¼è¯åµå¥åæä»¬ä¹åä»ç»ç<a href="https://www.cnblogs.com/Goblinscholar/p/19418306" target="_blank">äººè¸è¯å«</a>åææä¸åã</p>
<p>å½ç¶ï¼æ¢ç¶æ¯æ©ææ¨¡åï¼èªç¶æå¼å¾ä¼åçå°æ¹ï¼æä»¬ç»§ç»­ï¼</p>
<h2 id="23-æ©æè¯åµå¥æ¨¡åçå±é">2.3 æ©æè¯åµå¥æ¨¡åçå±é</h2>
<p>å°½ç®¡ A Neural Probabilistic Language Model æåæåºäºéè¿ç¥ç»ç½ç»å­¦ä¹ è¯åéçæè·¯ï¼ä½ä½ä¸ºæ©ææ¨¡åï¼å®å¨å®éåºç¨åçè®ºä¸å­å¨ä¸äºææ¾çå±éæ§ï¼</p>
<table>
<thead>
<tr>
<th>å±éç±»å«</th>
<th>å·ä½è¯´æ</th>
<th>å½±å</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>è®¡ç®å¼éå¤§</strong></td>
<td>è¾å¥æ¯ <span class="math inline">\(t\)</span> ä¸ªè¯ç¬ç­åéæ¼æ¥ï¼è¾åºæ¯è¯è¡¨å¤§å° <span class="math inline">\(V\)</span> ç softmax</td>
<td>è¯è¡¨å¤§æ¶è®¡ç®éé«ï¼è®­ç»é¢æµéåº¦æ¢</td>
</tr>
<tr>
<td><strong>ä¸ä¸æçªå£åºå®</strong></td>
<td>æ¯æ¬¡é¢æµåªä½¿ç¨å <span class="math inline">\(t\)</span> ä¸ªè¯</td>
<td>æ æ³ææé¿è·ç¦»ä¾èµï¼è¯­ä¹å»ºæ¨¡åé</td>
</tr>
<tr>
<td><strong>æ¢¯åº¦æ´æ°æçä½</strong></td>
<td>åµå¥ç©éµåç½ç»åæ°åæ¶æ´æ°ï¼æ¯ä¸ªæ ·æ¬åªæ¶åé¨åè¯åé</td>
<td>æ¶ææ¢ï¼ä½é¢è¯åéè´¨éä¸ç¨³å®</td>
</tr>
<tr>
<td><strong>æ²¡ææ¾å¼å»ºæ¨¡è¯­ä¹è§å¾</strong></td>
<td>è¯­ä¹ç¸ä¼¼æ§å®å¨ä¾èµä¸ä¸æå±ç°</td>
<td>ç¨æè¯æä½é¢è¯åéè´¨éå·®ï¼æ³åè½åæéï¼æ æ³å¤çå¤ä¹è¯</td>
</tr>
</tbody>
</table>
<p>å æ­¤ï¼ä¸ºäºè§£å³è¿äºé®é¢ï¼èªç¶æäººåææ°çææ¯åæ¨¡åï¼æä»¬å¨ä¹åå ç¯å°±æ¥è¯¦ç»ä»ç»è¿äºåå®¹ã</p>
<h1 id="3-æ»ç»">3. æ»ç»</h1>
<table>
<thead>
<tr>
<th>æ¦å¿µ</th>
<th>åç</th>
<th>æ¯å»</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>è¯åµå¥ç©éµï¼Embedding Matrixï¼</strong></td>
<td>å°è¯è¡¨ä¸­æ¯ä¸ªè¯æ å°ä¸ºå¯å­¦ä¹ çç¨ å¯åéï¼ç©éµè¡ï¼æåï¼å¯¹åºè¯åéãåå§åéæºææ­£æåå¸ï¼éè¿æ¢¯åº¦æ´æ°å­¦ä¹ è¯­ä¹ä¿¡æ¯ã</td>
<td>ç±»ä¼¼å¾åé£æ ¼è½¬æ¢ä¸­çâéæºåªå£°å¾åâï¼éæ­¥å¨è®­ç»ä¸­å½¢æç»æåå¾åã</td>
</tr>
<tr>
<td><strong>åµå¥å±ï¼Embedding Layerï¼</strong></td>
<td>å­å¨è¯åµå¥ç©éµå¹¶æä¾ç´¢å¼æ¥æ¾åè½ï¼å°è¯ç´¢å¼æ å°ä¸ºè¯åéã</td>
<td>å°±åä¸æ¬âè¯åéå­å¸âï¼æ ¹æ®ç´¢å¼ç´æ¥æ¥å°å¯¹åºçåéã</td>
</tr>
<tr>
<td><strong>ä¸ä¸æé¢æµè®­ç»</strong></td>
<td>å©ç¨å <span class="math inline">\(t\)</span> ä¸ªè¯é¢æµä¸ä¸ä¸ªè¯ï¼éè¿ååä¼ æ­æ´æ°åµå¥ç©éµåç½ç»åæ°ï¼ä½¿è¯­ä¹ç¸ä¼¼çè¯åéé è¿ã</td>
<td>å¥½æ¯è®©æ°´æç±»è¯ï¼apple, banana, orangeï¼å¨åéç©ºé´éèªç¶èæä¸ç°ï¼éè¿ç¸ä¼¼ä¸ä¸æå­¦ä¹ å®ä»¬çå³ç³»ã</td>
</tr>
<tr>
<td><strong>è¯­ä¹ç°ï¼Semantic Clusterï¼</strong></td>
<td>å¨åéç©ºé´ä¸­ï¼è¯­ä¹ç¸è¿çè¯èªç¶èéï¼ææè¯æ±ä¹é´çè¯­ä¹å³ç³»ã</td>
<td>è¯åéåæåä¸æ ·ï¼å¸¸å¨åä¸åå­ï¼ä¸ä¸æï¼åºç°å°±é è¿å¨ä¸èµ·ã</td>
</tr>
<tr>
<td><strong>æ©æè¯åµå¥æ¨¡åå±é</strong></td>
<td>è®¡ç®å¼éå¤§ï¼softmax over å¤§è¯è¡¨ï¼ä¸ä¸æçªå£åºå®ã æ¢¯åº¦æ´æ°æçä½ ãæ æ¾å¼è¯­ä¹å»ºæ¨¡ï¼å¦å¤ä¹è¯ï¼ã</td>
<td>æ¨¡ååèå¼æ¼å­æ¸¸æï¼æçä½ä¸åªè½çå°å±é¨ä¿¡æ¯ï¼é¾ä»¥ææè¿è·ç¦»æå¤æè§å¾ã</td>
</tr>
</tbody>
</table>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.041666666666666664" data-date-updated="2026-01-19 21:35">2026-01-19 20:35</span>&nbsp;
<a href="https://www.cnblogs.com/Goblinscholar">å¥å¸æå­¦è</a>&nbsp;
éè¯»(<span id="post_view_count">24</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19503620);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19503620', targetLink: 'https://www.cnblogs.com/Goblinscholar/p/19503620', title: 'å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨äºï¼èªç¶è¯­è¨å¤ç  ç¬¬äºå¨ï¼è¯åµå¥ï¼äºï¼è¯åµå¥æ¨¡ååç' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ä½¿ç¨ AI ç¼ç¨å·¥å·çä¸ç¹å®è·µä½ä¼ï¼ä¸ºä»ä¹è¦åå°å¯¹è¯è½®æ¬¡ãä¸æ¬¡æéæ±è¯´æ¸æ¥ ]]></title>
    <link>https://www.cnblogs.com/YpEng-Codeme/p/19503631</link>
    <guid>1da4d3af9b24c856cf268384e7bc1b0e</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/YpEng-Codeme/p/19503631" title="åå¸äº 2026-01-19 20:25">
    <span role="heading" aria-level="2">ä½¿ç¨ AI ç¼ç¨å·¥å·çä¸ç¹å®è·µä½ä¼ï¼ä¸ºä»ä¹è¦åå°å¯¹è¯è½®æ¬¡ãä¸æ¬¡æéæ±è¯´æ¸æ¥</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        å¨ä½¿ç¨ CursorãChatGPT ç­ AI ç¼ç¨å·¥å·çè¿ç¨ä¸­ï¼æéæ¸æè¯å°ï¼
ç¸æ¯å¤è½®å¯¹è¯ä¸æ­ä¿®è¡¥éæ±ï¼ç¨æ´å°çå¯¹è¯è½®æ¬¡ä¸æ¬¡æ§æè¿°æ¸æ¥æ ¸å¿éæ±ï¼
åèæ´å®¹æå¾å°ç¬¦åé¢æçå®ç°ã
æ¬æç»åå®éä½¿ç¨ç»éªï¼åæäºå¯¹è¯è½®æ¬¡è¿å¤å¯¼è´ç»æåç¦»çåå ï¼
ä»¥åå¨ä»ä¹æåµä¸åºå½éæ°ç¼è¾é®é¢èä¸æ¯ç»§ç»­å¯¹è¯ä¿®è¡¥ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="ä½¿ç¨-ai-ç¼ç¨å·¥å·çä¸ç¹å®è·µä½ä¼ä¸ºä»ä¹è¦åå°å¯¹è¯è½®æ¬¡ä¸æ¬¡æéæ±è¯´æ¸æ¥">ä½¿ç¨ AI ç¼ç¨å·¥å·çä¸ç¹å®è·µä½ä¼ï¼ä¸ºä»ä¹è¦åå°å¯¹è¯è½®æ¬¡ãä¸æ¬¡æéæ±è¯´æ¸æ¥</h1>
<h2 id="ä¸èæ¯">ä¸ãèæ¯</h2>
<p>éç CursorãCopilotãChatGPT ç­ AI ç¼ç¨å·¥å·å¨æ¥å¸¸å¼åä¸­çæ®åï¼<br>
è¶æ¥è¶å¤çå¼åèå¼å§å°è¯ç¨ AI æ¥å®æï¼</p>
<ul>
<li>åä¸ªåè½æ¨¡å</li>
<li>å°åç³»ç»åå</li>
<li>éå¤æ§ææ¨¡æ¿åä»£ç </li>
</ul>
<p>æèªå·±å¨å®éä½¿ç¨è¿äºå·¥å·çè¿ç¨ä¸­ï¼ä¹éæ¸å½¢æäºä¸äºä½¿ç¨ä¹ æ¯ã<br>
å¶ä¸­<strong>æéè¦çä¸ç¹ä½ä¼æ¯ï¼</strong></p>
<blockquote>
<p><strong>å¨è®© AI åä»£ç æ¶ï¼åºå°½éåå°å¯¹è¯è½®æ¬¡ï¼ç¨å°½å¯è½æ¸æ°ãå®æ´çæè¿°ä¸æ¬¡æ§è¯´ææ ¸å¿éæ±ã</strong></p>
</blockquote>
<p>è¿ç¯æç« ä¸»è¦è®°å½æå¨å®è·µä¸­æ»ç»åºçåå ãç»éªä»¥åéç¨è¾¹çã</p>
<hr>
<h2 id="äºå¸¸è§çéè¯¯ä½¿ç¨æ¹å¼">äºãå¸¸è§çéè¯¯ä½¿ç¨æ¹å¼</h2>
<p>å¨åå¼å§ä½¿ç¨ AI ç¼ç¨å·¥å·æ¶ï¼æï¼ä»¥åèº«è¾¹ä¸å°åäºï¼é½ä¼ä¸æè¯éç¨ç±»ä¼¼ä¸é¢çæ¹å¼ï¼</p>
<ol>
<li>åæè¿°ä¸ä¸ªæ¯è¾æ¨¡ç³çéæ±</li>
<li>ç AI çæçä»£ç </li>
<li>åç°ä¸ç¬¦åé¢æ</li>
<li>ç»§ç»­å¨å½åå¯¹è¯ä¸­è¡¥åæä¿®æ¹éæ±</li>
<li>éå¤ä¸è¿°è¿ç¨</li>
</ol>
<p>è¿ç§æ¹å¼å¨<strong>ç®åé®é¢</strong>ä¸éå¸¸æ²¡ä»ä¹é®é¢ï¼<br>
ä½å¨ä»¥ä¸åºæ¯ä¸­ï¼å¾å®¹æåºç°åå·®ï¼</p>
<ul>
<li>æ¨¡åä¹é´å­å¨å³è</li>
<li>åè½æååä¾èµå³ç³»</li>
<li>æè¾å¤éå«çº¦æï¼æ§è½ãæ©å±æ§ãç»æç­ï¼</li>
</ul>
<p>æç»ç»æå¾å¾æ¯ï¼</p>
<blockquote>
<p><strong>ä»£ç è¶æ¥è¶âè¡¥ä¸åâï¼æ´ä½å®ç°éæ¸åç¦»æåçç®æ ã</strong></p>
</blockquote>
<hr>
<h2 id="ä¸ä¸ºä»ä¹å¯¹è¯è½®æ¬¡è¶å¤ç»æè¶å®¹æåç¦»">ä¸ãä¸ºä»ä¹å¯¹è¯è½®æ¬¡è¶å¤ï¼ç»æè¶å®¹æåç¦»ï¼</h2>
<h3 id="31-æ¨¡åçè§£æ¯ä¸ä¸æé©±å¨ç">3.1 æ¨¡åçè§£æ¯âä¸ä¸æé©±å¨âç</h3>
<p>AI æ¨¡åå¹¶ä¸æ¯åäººä¸æ ·âå§ç»è®°å¾æåçç®æ âï¼èæ¯ï¼</p>
<ul>
<li>åºäºå½åä¸ä¸æè¿è¡æ¦çæ¨æ­</li>
<li>æ´å¾åäºæ»¡è¶³<strong>æè¿ä¸è½®å¯¹è¯ä¸­çæ¾å¼è¦æ±</strong></li>
</ul>
<p>å½æä»¬ä¸æ­è¿½å æ°æä»¤æ¶ï¼</p>
<ul>
<li>æ°éæ±å¯è½ä¸æ§éæ±å­å¨éæ§å²çª</li>
<li>æ¨¡åä¼å°è¯âå±é¨ä¿®è¡¥âï¼èä¸æ¯æ´ä½éæ</li>
</ul>
<p>ä¹èä¹ä¹ï¼æåçè®¾è®¡ç®æ å°±ä¼è¢«éæ¸ç¨éã</p>
<hr>
<h3 id="32-äººå¨è¡¥åéæ±æ¶å¾å¾æ¯å±é¨è§è§">3.2 äººå¨è¡¥åéæ±æ¶ï¼å¾å¾æ¯âå±é¨è§è§â</h3>
<p>å¨å¤è½®å¯¹è¯ä¸­ï¼äººéå¸¸æ¯å¨<strong>éå¯¹å½åä¸æ»¡æçç¹è¿è¡ä¿®æ­£</strong>ï¼ä¾å¦ï¼</p>
<ul>
<li>âè¿éè½ä¸è½æ¢æå¼æ­¥ï¼â</li>
<li>âè¿ä¸ªå­æ®µæä¸æ³è¦äºâ</li>
<li>âè¿ä¸ªå½æ°åå ä¸ä¸ªåæ°â</li>
</ul>
<p>ä½é®é¢å¨äºï¼</p>
<ul>
<li>è¿äºä¿®æ¹<strong>å¯è½å½±åå¶å®æ¨¡å</strong></li>
<li>AI å¹¶ä¸ç¥éä½ æ¯å¦æ¥åè¿å¸¦åå</li>
<li>ä½ èªå·±ä¹æªå¿å¨å½ä¸èèå°äºææå½±å</li>
</ul>
<p>æç»å°±ä¼åºç°ï¼</p>
<ul>
<li>åè½è½è·</li>
<li>ç»æå´è¶æ¥è¶å¥æª</li>
</ul>
<hr>
<h3 id="33-æ¨¡åéå¶--é®é¢æè§£æ¹å¼çå å æåº">3.3 æ¨¡åéå¶ + é®é¢æè§£æ¹å¼çå å æåº</h3>
<p>åç¦»é¢æï¼å¾å¾ä¸æ¯åä¸åå é æçï¼èæ¯ï¼</p>
<ul>
<li>æ¨¡åå¨é¿å¯¹è¯ä¸­çæ½è±¡è½åä¸é</li>
<li>äººå¨æé®æ¶éæ¸åæâä¿® bug å¼æé®â</li>
<li>ç¼ºä¹ä¸æ¬¡âå¨å±è§è§âçéæ°æ ¡å</li>
</ul>
<p>è¿ä¸ç¹å å å¨ä¸èµ·ï¼å°±å¾å®¹æè®©ç»æèµ°åã</p>
<hr>
<h2 id="åæ´æ¨èçä½¿ç¨æ¹å¼å°è½®æ¬¡--é«è´¨éè¾å¥">åãæ´æ¨èçä½¿ç¨æ¹å¼ï¼å°è½®æ¬¡ + é«è´¨éè¾å¥</h2>
<h3 id="41-ä¸æ¬¡æ§æè¿°æ¸æ¥æ ¸å¿éæ±">4.1 ä¸æ¬¡æ§æè¿°æ¸æ¥âæ ¸å¿éæ±â</h3>
<p>è¿éè¯´çâä¸æ¬¡æ§âï¼å¹¶ä¸æ¯è¦æ±æææç»èé½åæ­»ï¼èæ¯è³å°è¦è¯´ææ¸æ¥ï¼</p>
<ul>
<li>è¿ä¸ªæ¨¡å/ç³»ç»<strong>è¦è§£å³ä»ä¹é®é¢</strong></li>
<li>æåªäºæ ¸å¿åè½</li>
<li>åè½ä¹é´æ¯å¦æå³è</li>
<li>åªäºç¹æ¯<strong>ä¸è½éææ¹å¨ççº¦æ</strong></li>
</ul>
<p>ç¤ºä¾æè·¯ï¼</p>
<pre><code class="language-text">æè¦å®ç°ä¸ä¸ª XXX ç³»ç»ï¼ä¸»è¦åå« A / B / C ä¸ä¸ªåè½ã
å¶ä¸­ï¼
- A å B ä¹é´å­å¨ä¾èµå³ç³»
- C çå®ç°ä¸è½å½±å A çè°ç¨æ¹å¼
- æ§è½ä¼åçº§é«äºä»£ç ç®æ´æ§
</code></pre>
<hr>
<h3 id="42-æ¥åéæ ¸å¿é®é¢çéæ­¥ä¼å">4.2 æ¥åâéæ ¸å¿é®é¢âçéæ­¥ä¼å</h3>
<p>å¨ä¸æ¬¡é«è´¨éæè¿°åï¼AI çæçç»æéå¸¸ä¼ï¼</p>
<ul>
<li>æ ¸å¿ç»æåºæ¬æ­£ç¡®</li>
<li>åè½é»è¾å¤§ä½ç¬¦åé¢æ</li>
<li>ç»èä¸å­å¨ä¸äºå°é®é¢</li>
</ul>
<p>è¿äºå°é®é¢éå¸¸åæ¬ï¼</p>
<ul>
<li>å½åä¸å¤ä¼é</li>
<li>å±é¨ä»£ç ä¸å¤ç®æ´</li>
<li>æ ·å¼æç¾è§é®é¢</li>
</ul>
<p>ð <strong>è¿äºé®é¢æ¯éåéè¿âå°éè¿½å å¯¹è¯âæ¥ä¼åçã</strong></p>
<hr>
<h2 id="äºä»ä¹æ¶ååºè¯¥åæ­¢å¯¹è¯éæ°ç¼è¾é®é¢">äºãä»ä¹æ¶ååºè¯¥âåæ­¢å¯¹è¯ï¼éæ°ç¼è¾é®é¢âï¼</h2>
<p>è¿æ¯ä¸ä¸ªéå¸¸å³é®çå¤æ­ç¹ã</p>
<h3 id="51-æç¡®åºè¯¥éæ¥çä¸äºä¿¡å·">5.1 æç¡®åºè¯¥éæ¥çä¸äºä¿¡å·</h3>
<p>å¦æåºç°ä»¥ä¸æåµä¹ä¸ï¼<strong>å¼ºçå»ºè®®éæ°ç¼è¾éæ±ï¼èä¸æ¯ç»§ç»­å¯¹è¯ä¿®è¡¥</strong>ï¼</p>
<ul>
<li>æ°éæ±ä¼å½±åå¤ä¸ªå·²æåè½</li>
<li>ä¿®æ¹ä¸ä¸ªåè½ï¼ä¼è¿å¸¦å½±åå¶å®æ¨¡å</li>
<li>ä½ åç°èªå·±å¨âæè¡¥ä¸âèä¸æ¯å¨è®¾è®¡</li>
<li>ä½ å·²ç»å¾é¾ç¨ä¸å¥è¯è¯´æå½åä»£ç ç»æ</li>
</ul>
<p>æ­¤æ¶ç»§ç»­å¯¹è¯ï¼å¤§æ¦çåªä¼è®©é®é¢æ´å¤æã</p>
<hr>
<h3 id="52-æ­£ç¡®çåæ³">5.2 æ­£ç¡®çåæ³</h3>
<p>æ´å¥½çæ¹å¼æ¯ï¼</p>
<ol>
<li>åæ­¢å½åå¯¹è¯</li>
<li>åé¡¾å½åä»£ç åçå®éæ±</li>
<li>å¨<strong>æ°çå¯¹è¯ä¸­éæ°æ´çæè¿°</strong></li>
<li>æä¹åæ´é²åºçç¼ºé·æç¡®åè¿å»</li>
</ol>
<p>ä¾å¦ï¼</p>
<pre><code class="language-text">å¨ä¹åçå®ç°ä¸­ï¼æåç° A å B çè®¾è®¡å­å¨è¦åé®é¢ã
è¿æ¬¡å¸æï¼
- æç¡®æå A / B çèè´£
- ä¿è¯åç»­æ©å± C åè½æ¶ä¸éè¦ä¿®æ¹ A
</code></pre>
<hr>
<h2 id="å­å³äºä¸æ¬¡æ§æè¿°åçµæ´»è°æ´çå¹³è¡¡">å­ãå³äºâä¸æ¬¡æ§æè¿°âåâçµæ´»è°æ´âçå¹³è¡¡</h2>
<p>éè¦å¼ºè°çæ¯ï¼</p>
<blockquote>
<p><strong>åå°å¯¹è¯è½®æ¬¡ â  ä¸æ¬¡æ§æä¸ååå°æè´å®ç¾</strong></p>
</blockquote>
<p>æ´åççå¹³è¡¡æ¯ï¼</p>
<ul>
<li>æ ¸å¿è®¾è®¡ãå³é®çº¦æï¼ä¸æ¬¡è¯´ææ¸æ¥</li>
<li>éæ ¸å¿ç»èãä½éªä¼åï¼åè®¸å°éè°æ´</li>
<li>ç»ææ§ç¼ºé·ãç³»ç»æ§é®é¢ï¼ç´æ¥éæ¥</li>
</ul>
<p>æ AI å½æä¸ä¸ªï¼</p>
<blockquote>
<p><strong>æ§è¡è½åå¾å¼ºï¼ä½ä¸å·å¤å¨å±èªçè½åçå©æ</strong></p>
</blockquote>
<p>èä¸æ¯ä¸ä¸ªä¼èªå¨âå¸®ä½ çº åâçé«çº§å·¥ç¨å¸ã</p>
<hr>
<h2 id="ä¸æ»ç»">ä¸ãæ»ç»</h2>
<p>ç»åèªå·±çå®éä½¿ç¨ç»éªï¼æç®åå½¢æçç»è®ºæ¯ï¼</p>
<ol>
<li>AI ç¼ç¨å·¥å·éå¸¸ä¾èµè¾å¥è´¨é</li>
<li>å¯¹è¯è½®æ¬¡è¶å¤ï¼è¶å®¹æåç¦»æåç®æ </li>
<li>æ ¸å¿é®é¢åºä¸æ¬¡æ§æè¿°æ¸æ¥</li>
<li>ç»ææ§é®é¢ä¸è¦éè¿âè¡¥ä¸å¼å¯¹è¯âä¿®å¤</li>
<li>éæ°ç¼è¾é®é¢ï¼å¾å¾æ¯ç»§ç»­å¯¹è¯æ´é«æ</li>
</ol>
<p>åç»­æä¹ä¼ç»åå·ä½æ¡ä¾ï¼åæ¬éè¯¯ç¤ºèåæ­£ç¡®ç¤ºèï¼è¿ä¸æ­¥è¡¥åè¯´æã</p>
<hr>
<blockquote>
<p><strong>è¿ç¯æç« å¹¶ä¸æ¯å¦å®å¤è½®å¯¹è¯çä»·å¼ï¼èæ¯å¸æå¨åéçåºæ¯ä¸ï¼ç¨æ´åççæ¹å¼ä½¿ç¨ AIã</strong></p>
</blockquote>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-19 20:26">2026-01-19 20:25</span>&nbsp;
<a href="https://www.cnblogs.com/YpEng-Codeme">YounGp_oo</a>&nbsp;
éè¯»(<span id="post_view_count">73</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19503631);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19503631', targetLink: 'https://www.cnblogs.com/YpEng-Codeme/p/19503631', title: 'ä½¿ç¨ AI ç¼ç¨å·¥å·çä¸ç¹å®è·µä½ä¼ï¼ä¸ºä»ä¹è¦åå°å¯¹è¯è½®æ¬¡ãä¸æ¬¡æéæ±è¯´æ¸æ¥' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ WebDatasetä½¿ç¨æåï¼æå»ºé«ææ·±åº¦å­¦ä¹ æ°æ®ç®¡é ]]></title>
    <link>https://www.cnblogs.com/aurora-zzm/p/19503592/webdataset_usage</link>
    <guid>872fb46da917430f3bbb05c343847e17</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/aurora-zzm/p/19503592/webdataset_usage" title="åå¸äº 2026-01-19 20:04">
    <span role="heading" aria-level="2">WebDatasetä½¿ç¨æåï¼æå»ºé«ææ·±åº¦å­¦ä¹ æ°æ®ç®¡é</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<blockquote>
<p>å¨æ·±åº¦å­¦ä¹ é¡¹ç®å®è·µä¸­ï¼æ°æ®å è½½å¾å¾æä¸ºéå¶è®­ç»éåº¦çå³é®ç¶é¢ãå½æ°æ®éè§æ¨¡è¾¾å°æ°ç¾ä¸çè³æ°åäº¿æ ·æ¬æ¶ï¼ä¼ ç»çæä»¶ç³»ç»éæºè®¿é®æ¹å¼ä¼å¯¼è´I/Oæçæ¥å§ä¸éï¼è®©æè´µçGPUèµæºå¤äºé²ç½®ç­å¾ç¶æãWebDatasetéè¿<strong>æµå¼å¤ç</strong>å<strong>é¡ºåºè¯»å</strong>çè®¾è®¡çå¿µï¼å¯ä»¥æå¤§æåæ°æ®å è½½æ§è½ã</p>
</blockquote>
<h2 id="ä»ä¹æ¯webdataset">ä»ä¹æ¯WebDatasetï¼</h2>
<p>WebDatasetæ¯ä¸ä¸ªåºäºTARå½æ¡£æ ¼å¼çæ·±åº¦å­¦ä¹ æ°æ®å è½½åºï¼ä¸ä¸ºå¤çè¶å¤§è§æ¨¡æ°æ®éèè®¾è®¡ãå¶æ ¸å¿ææ³æ¯å°<strong>å¤§éå°æä»¶æåæè¾å¤§çTARæä»¶</strong>ï¼éè¿é¡ºåºè¯»åæ¿ä»£éæºè®¿é®ï¼æå¤§æåI/Oæçã</p>
<p>æ¬è´¨ä¸ï¼<em><strong>wdsæ ¼å¼æä»¶å°±æ¯éµå¾ªäºé¢å¤çº¦å®çtaræä»¶ï¼å¹¶ä¸ä¸è¬ä¸åç¼©ï¼ä½¿å¾å¯ä»¥å®ç°æµå¼è¯»åã</strong></em></p>
<h3 id="ä¸ä¼ ç»æ¹å¼çå¯¹æ¯">ä¸ä¼ ç»æ¹å¼çå¯¹æ¯</h3>
<table>
<thead>
<tr>
<th>ç¹æ§</th>
<th>ä¼ ç»æä»¶ç³»ç»</th>
<th>WebDataset</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>è®¿é®æ¨¡å¼</strong></td>
<td>éæºè®¿é®ï¼é«å»¶è¿</td>
<td>é¡ºåºè¯»åï¼é«åå</td>
</tr>
<tr>
<td><strong>å­å¨æç</strong></td>
<td>æä»¶ç³»ç»åæ°æ®å¼éå¤§</td>
<td>TARå®¹å¨åå°åæ°æ®</td>
</tr>
<tr>
<td><strong>åå¸å¼æ¯æ</strong></td>
<td>éè¦å¤æåè°æºå¶</td>
<td>å¤©ç¶æ¯æåçåæ°æ®å¹¶è¡</td>
</tr>
<tr>
<td><strong>ç½ç»ä¼ è¾</strong></td>
<td>å°æä»¶ä¼ è¾æçä½</td>
<td>å¤§æä»¶æµå¼ä¼ è¾</td>
</tr>
<tr>
<td><strong>ä½¿ç¨ä¾¿æ·æ§</strong></td>
<td>éè¦è§£ååé¢å¤ç</td>
<td>ç´æ¥è¯»åï¼æ éè§£å</td>
</tr>
</tbody>
</table>
<h2 id="webdatasetçæ ¸å¿åç">WebDatasetçæ ¸å¿åç</h2>
<h3 id="é¡ºåºè¯»åçä¼å¿">é¡ºåºè¯»åçä¼å¿</h3>
<p>ä¼ ç»æ·±åº¦å­¦ä¹ æ°æ®éç±æ°ç¾ä¸ä¸ªå°æä»¶ç»æï¼è®­ç»æ¶éè¦éæºè®¿é®è¿äºæä»¶ãæºæ¢°ç¡¬ççéæºè¯»åéåº¦éå¸¸åªæé¡ºåºè¯»åç1/100ï¼å³ä½¿åºæç¡¬çä¹å­å¨ææ¾å·®è·ãWebDatasetéè¿å°ç¸å³æä»¶æåæTARå½æ¡£ï¼å°éæºI/Oè½¬æ¢ä¸ºé¡ºåºI/Oï¼ååå©ç¨ç°ä»£å­å¨ç³»ç»çååè½åã</p>
<h3 id="åçæºå¶">åçæºå¶</h3>
<p>WebDatasetå°å¤§æ°æ®éåå²ä¸ºå¤ä¸ªTARæä»¶ï¼åçï¼ï¼æ¯ä¸ªåçåå«æ°åä¸ªæ ·æ¬ãè¿ç§è®¾è®¡å¸¦æ¥å¤éå¥½å¤ï¼</p>
<ul>
<li><strong>å¹¶è¡å è½½</strong>ï¼ä¸ååçå¯ç±ä¸åå·¥ä½è¿ç¨å¹¶è¡è¯»å</li>
<li><strong>åå¸å¼è®­ç»</strong>ï¼æ¯ä¸ªè®­ç»èç¹å¯å¤çä¸åçåçå­é</li>
<li><strong>å®¹éæ§</strong>ï¼åä¸ªåçæåä¸å½±åæ´ä¸ªæ°æ®é</li>
</ul>
<h3 id="æ ·æ¬ç»ç»è§è">æ ·æ¬ç»ç»è§è</h3>
<p>WebDatasetéµå¾ªä¸¥æ ¼çå½åçº¦å®ï¼<em><strong>åä¸æ ·æ¬çæææä»¶å±äº«ç¸åçåç¼keyï¼éè¿æ©å±ååºåæ°æ®ç±»åã</strong></em></p>
<blockquote>
<p>åç¼keyï¼taræä»¶åé¨ï¼æä¸ªæä»¶çè·¯å¾çç¬¬ä¸ä¸ªå¥ç¹ä¹åçé¨å</p>
</blockquote>
<p>æä»¶å¯ä»¥æå¤ä¸ªåç¼ï¼çè³æ²¡æåç¼ï¼è¿æ ·å¨å­å¸ä¸­çé®å°±æ¯ç©ºå­ç¬¦ï¼ï¼èä¸ç¸ååç¼keyçï¼åä¸æ ·æ¬ä¸­çï¼æä»¶æ°éå¯ä»¥ä¸åºå®ã<br>
ç¤ºä¾TARæä»¶åå®¹ç»æï¼</p>
<pre><code>images17/image194.left.jpg  
images17/image194.right.jpg  
images17/image194.json  
images17/image12.left.jpg  
images17/image12.json  
images3/image14  
</code></pre>
<p>è¯»åä¹åï¼ä¼å¾å°åè¿æ ·çå­å¸</p>
<pre><code class="language-python">[
{ â__key__â: âimages17/image194â, âleft.jpgâ: bâ...â, âright.jpgâ: bâ...â, âjsonâ: bâ...â}  
{ â__key__â: âimages17/image12â, âleft.jpgâ: bâ...â, âjsonâ: bâ...â}  
{ â__key__â: âimages3/image14â, ââ: bââ}  
]
</code></pre>
<h2 id="åå»ºwebdatasetæ ¼å¼æ°æ®é">åå»ºWebDatasetæ ¼å¼æ°æ®é</h2>
<h3 id="ä½¿ç¨tarwriter-api">ä½¿ç¨TarWriter API</h3>
<pre><code class="language-python">import webdataset as wds
import json

def create_webdataset(output_path, samples):
    """åå»ºWebDatasetæ ¼å¼æ°æ®é"""
    with wds.TarWriter(output_path) as sink:
        for i, (image_data, label, metadata) in enumerate(samples):
            sink.write({
                "__key__": f"sample{i:06d}",      # æ ·æ¬å¯ä¸æ è¯
                "jpg": image_data,               # å¾åæ°æ®ï¼å­èæ ¼å¼ï¼
                "cls": str(label).encode(),      # ç±»å«æ ç­¾
                "json": json.dumps(metadata).encode()  # åæ°æ®
            })
</code></pre>
<h2 id="è¯»ååå¤çwebdatasetæ°æ®é">è¯»ååå¤çWebDatasetæ°æ®é</h2>
<h3 id="åºç¡æ°æ®ç®¡é">åºç¡æ°æ®ç®¡é</h3>
<pre><code class="language-python">import webdataset as wds
import torch
from torchvision import transforms

# å®ä¹æ°æ®é¢å¤ç
preprocess = transforms.Compose([
    transforms.RandomResizedCrop(224),
    transforms.RandomHorizontalFlip(),
    transforms.ToTensor(),
    transforms.Normalize(mean=[0.485, 0.456, 0.406], 
                         std=[0.229, 0.224, 0.225])
])

# åå»ºWebDatasetæ°æ®ç®¡é
dataset = (wds.WebDataset("dataset-{000000..000099}.tar")  # 100ä¸ªåç
    .shuffle(1000)                    # æ ·æ¬çº§æä¹±
    .decode("pil")                    # è§£ç ä¸ºPILå¾å
    .to_tuple("jpg", "cls")           # æåå¾ååæ ç­¾
    .map_tuple(preprocess, lambda x: int(x))  # åºç¨é¢å¤ç
    .batched(32)                      # æ¹å¤ç
	)

# åå»ºDataLoader
dataloader = torch.utils.data.DataLoader(
    dataset, 
    batch_size=None,  # æ¹å¤çå·²å¨ç®¡éä¸­å®æ
    num_workers=4
)
</code></pre>
<h3 id="é«çº§æ°æ®å¤çæå·§">é«çº§æ°æ®å¤çæå·§</h3>
<p>WebDatasetæ¯æå¤æçæ°æ®å¤çç®¡éï¼åæ¬å¤æ¨¡ææ°æ®èååå¨æå¢å¼ºï¼</p>
<pre><code class="language-python">def create_advanced_pipeline():
    """åå»ºé«çº§æ°æ®å¤çç®¡é"""
    
    # å¾åå¢å¼º
    image_augmentation = transforms.Compose([
        transforms.RandomChoice([
            transforms.ColorJitter(brightness=0.2, contrast=0.2),
            transforms.GaussianBlur(3),
            transforms.RandomAffine(degrees=15, scale=(0.9, 1.1))
        ]),
        transforms.RandomHorizontalFlip(),
    ])
    
    # ææ¬é¢å¤ç
    def text_preprocessing(text_bytes):
        text = text_bytes.decode("utf-8").lower().strip()
        # åºç¨ææ¬æ¸æ´ååè¯é»è¾
        return text
    
    dataset = (wds.WebDataset("multimodal-{000000..000050}.tar")
        .shuffle(5000)  # å¤§ç¼å²åºæé«éæºæ§
        .decode("pil", handler=wds.warn_and_continue)  # éè¯¯å¤ç
        .rename(image="jpg;png;jpeg", text="txt;json", caption="caption;text")
        .map_dict(  # å¯¹ä¸åå­æ®µåºç¨ä¸åå¤ç
            image=image_augmentation,
            text=text_preprocessing,
            caption=text_preprocessing
        )
        .to_tuple("image", "text", "caption")  # å¤æ¨¡æè¾åº
        .batched(16, partial=False)  # ç²¾ç¡®æ¹å¤§å°æ§å¶
    )
    
    return dataset
</code></pre>
<h2 id="åå¸å¼è®­ç»éæ">åå¸å¼è®­ç»éæ</h2>
<h3 id="åæºå¤gpuè®­ç»">åæºå¤GPUè®­ç»</h3>
<pre><code class="language-python">import webdataset as wds
import torch.distributed as dist

def setup_distributed_training():
    """è®¾ç½®åå¸å¼è®­ç»ç¯å¢"""
    
    # åå§åè¿ç¨ç»
    dist.init_process_group(backend="nccl")
    local_rank = int(os.environ["LOCAL_RANK"])
    world_size = dist.get_world_size()
    
    # æ ¹æ®rankéç½®è®¾å¤
    torch.cuda.set_device(local_rank)
    
    return local_rank, world_size

def create_distributed_loader(url_pattern, batch_size=32):
    """åå»ºåå¸å¼æ°æ®å è½½å¨"""
    
    local_rank, world_size = setup_distributed_training()
    
    dataset = (wds.WebDataset(
            url_pattern, 
            resampled=True,  # å¯ç¨ééæ ·ä»¥æ¯ææ éæ°æ®æµ
            nodesplitter=wds.split_by_node,
            splitter=wds.split_by_worker
        )
        .shuffle(1000)
        .decode("pil")
        .to_tuple("jpg", "cls")
        .batched(batch_size)
    )
    
    loader = wds.WebLoader(
        dataset,
        batch_size=None,
        num_workers=4,
        shuffle=False  # æä¹±å·²å¨æ°æ®ç®¡éä¸­å¤ç
    )
    
    # è®¾ç½®epoché¿åº¦
    loader = loader.with_epoch(10000)  # æ¯ä¸ªepochå¤ç10000ä¸ªæ¹æ¬¡
    
    return loader
</code></pre>
<h3 id="å¤èç¹è®­ç»éç½®">å¤èç¹è®­ç»éç½®</h3>
<p>å¯¹äºè·¨å¤ä¸ªæå¡å¨çè®­ç»ä»»å¡ï¼WebDatasetæä¾å®æ´çå¤èç¹æ¯æï¼</p>
<pre><code class="language-python">def multi_node_training_setup():
    """å¤èç¹è®­ç»éç½®"""
    
    dataset = (wds.WebDataset("dataset-{000000..012345}.tar")
        .shuffle(10000)
        .decode("torchrgb")  # ç´æ¥è§£ç ä¸ºPyTorchå¼ é
        .split_by_node  # èªå¨æèç¹åå²æ°æ®
        .split_by_worker  # æå·¥ä½è¿ç¨åå²
        .to_tuple("image", "label")
        .batched(64)
    )
    
    # ä½¿ç¨WebLoaderä¼åæ§è½
    loader = wds.WebLoader(
        dataset,
        batch_size=None,
        num_workers=8,
        persistent_workers=True  # ä¿æå·¥ä½è¿ç¨æ´»è·
    )
    
    return loader
</code></pre>
<h2 id="æ§è½ä¼åæä½³å®è·µ">æ§è½ä¼åæä½³å®è·µ</h2>
<h3 id="åçç­ç¥ä¼å">åçç­ç¥ä¼å</h3>
<p>åçå¤§å°å¯¹æ§è½ææ¾èå½±åï¼å»ºè®®æ ¹æ®å­å¨ç±»åéæ©ï¼</p>
<ul>
<li><strong>æ¬å°ç¡¬ç</strong>ï¼256MB-1GB/åç</li>
<li><strong>ç½ç»å­å¨</strong>ï¼1-4GB/åç</li>
<li><strong>äºå¯¹è±¡å­å¨</strong>ï¼4-16GB/åç</li>
</ul>
<pre><code class="language-python">def optimize_shard_size(base_url, target_size_mb=1024):
    """æ ¹æ®ç®æ å¤§å°ä¼ååçç­ç¥"""
    # è®¡ç®æ ·æ¬å¹³åå¤§å°
    sample_size = estimate_average_sample_size()
    samples_per_shard = (target_size_mb * 1024 * 1024) // sample_size
    
    return f"{base_url}-{{000000..999999}}.tar", samples_per_shard
</code></pre>
<h3 id="ç¼å­ç­ç¥">ç¼å­ç­ç¥</h3>
<p>å¯¹äºè¿ç¨æ°æ®éï¼ä½¿ç¨ç¼å­å¯ä»¥æ¾èåå°ç½ç»ä¼ è¾ï¼</p>
<pre><code class="language-python">dataset = (wds.WebDataset("https://example.com/dataset-{000000..000999}.tar")
    .cache_dir("./cache")  # æ¬å°ç¼å­ç®å½
    .cache_size(10 * 1024 ** 3)  # 10GBç¼å­å¤§å°
    .shuffle(10000)
    .decode("pil")
)
</code></pre>
<h3 id="åå­ä¼åæå·§">åå­ä¼åæå·§</h3>
<p>å¤çè¶å¤§å¾åæè§é¢æ¶ï¼ä½¿ç¨æµå¼è§£ç é¿ååå­æº¢åºï¼</p>
<pre><code class="language-python">def streamed_video_processing():
    """æµå¼è§é¢å¤çé¿ååå­æº¢åº"""
    
    dataset = (wds.WebDataset("video-dataset.tar")
        .shuffle(100)
        .decode("rgb8", handler=wds.ignore_and_continue)  # æµå¼è§£ç 
        .map(video_frame_sampling)  # å¸§éæ ·
        .slice(0, 100)  # éå¶åºåé¿åº¦
        .batched(1)  # è§é¢æ¹å¤çå¤§å°ä¸º1
    )
    
    return dataset
</code></pre>
<h2 id="æéæé¤ä¸è°è¯">æéæé¤ä¸è°è¯</h2>
<h3 id="å¸¸è§é®é¢è§£å³">å¸¸è§é®é¢è§£å³</h3>
<ol>
<li><strong>åå­ä¸è¶³</strong>ï¼åå°æ¹å¤§å°æä½¿ç¨æµå¼è§£ç </li>
<li><strong>æ°æ®å è½½æ¢</strong>ï¼å¢å åçå¤§å°æè°æ´å·¥ä½è¿ç¨æ°</li>
<li><strong>æ ·æ¬ä¸å¹é</strong>ï¼æ£æ¥TARæä»¶ä¸­åä¸æ ·æ¬çæä»¶å½åä¸è´æ§</li>
</ol>
<h3 id="è°è¯æå·§">è°è¯æå·§</h3>
<pre><code class="language-python"># å¯ç¨è¯¦ç»æ¥å¿
import os
os.environ["WDS_VERBOSE_CACHE"] = "1"
os.environ["GOPEN_VERBOSE"] = "1"

# æ£æ¥æ°æ®æ ·æ¬
dataset = wds.WebDataset("dataset.tar")
for sample in dataset.take(5):  # åªåå5ä¸ªæ ·æ¬
    print("Sample keys:", list(sample.keys()))
    for key, value in sample.items():
        print(f"{key}: {type(value)}, size: {len(value) if hasattr(value, '__len__') else 'N/A'}")
</code></pre>
<h2 id="éæºè¯»å">éæºè¯»å</h2>
<p>è½ç¶wdsæ ¼å¼æ¯ä¸ºäºæµå¼è¯»åèè®¾è®¡çï¼éæºè¯»åæäºè¿èå¶ä½¿ç¨çå¿µï¼ä½æ¯åªè½æµå¼è¯»åä¹æäºä¸æ¹ä¾¿ãæ¯å¦å½æ³éæºæ¥æ¾ç¬¬nä¸ªæ ·æ¬ï¼æ¯å¦bad caseï¼æ¶ï¼éæºè¯»åè¿æ¯æ´å æ¹ä¾¿å¿«æ·ã<br>
å¨å®è£å®æ¹çwebdataset pythonåºæ¶ï¼è¿ä¼åæ­¥å®è£ wids è¿ä¸ªåºï¼ä¼å¯ä»¥å¸®å©wdsæ ¼å¼æ°æ®éå®ç°éæºè¯»åã<a href="https://www.bing.com/ck/a?!&amp;&amp;p=8c306290ed0a41aeda3ad41f03f82846e4e663c8ea4b25152258d8546b6dc558JmltdHM9MTc2ODc4MDgwMA&amp;ptn=3&amp;ver=2&amp;hsh=4&amp;fclid=18e4bf87-a076-62ee-3329-aa52a19c6398&amp;u=a1aHR0cHM6Ly9weXBpLm9yZy9wcm9qZWN0L3dpZHMv&amp;ntb=1" target="_blank" rel="noopener nofollow">wids Â· PyPI</a> ä¸­ç»åºäºä¸ä¸ªDEMO.</p>
<p>ä½æ¯å¦æå¯ä»¥è·åæ ·æ¬æå¨taræä»¶è·¯å¾åkeyï¼ç´æ¥åºäºwebdatasetçæ¥å£è¯»åä¹ä¸ä¼å¾æ¢ï¼ä¸åºè¯¥ä½¿ç¨widsï¼å¦å¤ï¼æåç°widsçç¸å³èµæå¾å°ï¼ï¼å¾ä¹é½ä¸æ´æ°äºï¼å®æ¹å¥½åä¹ä¸å¨æè¿ä¸ªåè½ï¼æèªå·±å°è¯äºä¸ä¸æè§æä¹ä¸å¤§ã</p>
<h2 id="ç»è®º">ç»è®º</h2>
<p>WebDatasetéè¿åæ°çæµå¼æ°æ®å è½½èå¼ï¼å½»åºè§£å³äºå¤§è§æ¨¡æ·±åº¦å­¦ä¹ è®­ç»ä¸­çæ°æ®I/Oç¶é¢ãå¶æ ¸å¿ä¼å¿å¨äºï¼</p>
<ol>
<li><strong>åè¶æ§è½</strong>ï¼é¡ºåºè¯»åç¸æ¯éæºè®¿é®å¸¦æ¥3-10åçæ§è½æå</li>
<li><strong>åå¸å¼åå¥½</strong>ï¼å¤©ç¶æ¯æå¤èç¹ãå¤GPUè®­ç»åºæ¯</li>
<li><strong>çµæ´»æ§</strong>ï¼æ¯æä»»ææ°æ®ç±»ååå¤æçå¤æ¨¡æåºæ¯</li>
<li><strong>æç¨æ§</strong>ï¼ä¸PyTorchçææ ç¼éæï¼APIè®¾è®¡ç®æ´ç´è§</li>
</ol>
<p>éçæ·±åº¦å­¦ä¹ æ°æ®éè§æ¨¡çä¸æ­å¢é¿ï¼WebDatasetå·²æä¸ºå¤çTBçº§çè³PBçº§æ°æ®çæ åå·¥å·ãææ¡WebDatasetçä½¿ç¨æå·§ï¼å¯¹äºæå»ºé«æãå¯æ©å±çæ·±åº¦å­¦ä¹ ç³»ç»è³å³éè¦ã</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-19 20:05">2026-01-19 20:04</span>&nbsp;
<a href="https://www.cnblogs.com/aurora-zzm">ä¸èæ±æ¹</a>&nbsp;
éè¯»(<span id="post_view_count">25</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19503592);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19503592', targetLink: 'https://www.cnblogs.com/aurora-zzm/p/19503592/webdataset_usage', title: 'WebDatasetä½¿ç¨æåï¼æå»ºé«ææ·±åº¦å­¦ä¹ æ°æ®ç®¡é' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ AIæ°æå¥é¨ï¼10åéç¨Spring AIæé ä½ çç¬¬ä¸ä¸ªæºè½å¿çå¨è¯¢å¸ ]]></title>
    <link>https://www.cnblogs.com/freshman118/p/19503473</link>
    <guid>0a4c5e4039bd9a9318b3e105d4f5df5e</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/freshman118/p/19503473" title="åå¸äº 2026-01-19 18:57">
    <span role="heading" aria-level="2">AIæ°æå¥é¨ï¼10åéç¨Spring AIæé ä½ çç¬¬ä¸ä¸ªæºè½å¿çå¨è¯¢å¸</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>å¤§å®¶å¥½ï¼ææ¯ä½ ä»¬ç AI ææ¯åå¯¼ãä»å¤©å¸¦æ¥ä¸ç¯è¶çº§å®ç¨ç Spring AI ä¸ææç¨ï¼ä¸ä¸ºé¶åºç¡ç AI ç±å¥½èè®¾è®¡ãæ éé«æ·±ææ¯èæ¯ï¼åªé 10 åéï¼ä½ å°±è½åå»ºä¸ä¸ªè½å¯¹è¯çæºè½ä½ï¼</p>
<h2 id="ä»ä¹æ¯-spring-ai">ä»ä¹æ¯ Spring AIï¼</h2>
<p>Spring AI æ¯ Spring çæä¸­ç¨äºç®å AI åºç¨å¼åçæ¡æ¶ï¼è®©å¼åèè½è½»æ¾éæå¤§è¯­è¨æ¨¡åãä»å¤©ç Demo å°åºäºé¿éäºç DashScope å¹³å°ï¼åå»ºä¸ä¸ªä¸ä¸çå¿çå¨è¯¢å¸æºè½ä½ã</p>
<h2 id="ç¯å¢åå¤">ç¯å¢åå¤</h2>
<p>é¦åï¼æä»¬éè¦åå»ºä¸ä¸ª Spring é¡¹ç®ãæ¨èä½¿ç¨ IDEA å¼åå·¥å·ï¼</p>
<ol>
<li>æå¼ IDEAï¼éæ©æ°å»º Spring é¡¹ç®</li>
</ol>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1463469/202601/1463469-20260119183448837-976143561.png" class="lazyload"></p>
<ol>
<li>è®¾ç½® Spring Boot çæ¬ä»¥åä¾èµ</li>
</ol>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1463469/202601/1463469-20260119183448708-1298325751.png" class="lazyload"></p>
<ol>
<li>é¡¹ç®åå»ºæååï¼è¿å¥ä¸ä¸æ­¥</li>
</ol>
<h2 id="æ·»å å³é®ä¾èµ">æ·»å å³é®ä¾èµ</h2>
<p>å¨é¡¹ç®ç pom.xml æä»¶ä¸­ï¼æ·»å ä»¥ä¸ä¸¤ä¸ªæ ¸å¿ä¾èµï¼</p>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;com.alibaba.cloud.ai&lt;/groupId&gt;
    &lt;artifactId&gt;spring-ai-alibaba-agent-framework&lt;/artifactId&gt;
    &lt;version&gt;1.1.0.0-M5&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.alibaba.cloud.ai&lt;/groupId&gt;
    &lt;artifactId&gt;spring-ai-alibaba-starter-dashscope&lt;/artifactId&gt;
    &lt;version&gt;1.1.0.0-M5&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>è¿ä¸¤ä¸ªä¾èµåå«æä¾äºæºè½ä½æ¡æ¶å DashScope æ¨¡åçæ¯æã</p>
<h2 id="ç¼åæ ¸å¿ä»£ç ">ç¼åæ ¸å¿ä»£ç </h2>
<p>å¨ com.jackson.aiagent åä¸åå»º AgentExample.java æä»¶ï¼</p>
<pre><code class="language-java">package com.jackson.aiagent;

// å¯¼å¥å¿è¦çç±»
public class AgentExample {
    public static void main(String[] args) throws Exception {
        // 1. åå»ºæ¨¡åå®ä¾ï¼è®°å¾æ¿æ¢æä½ èªå·±çAPI Keyï¼
        DashScopeApi dashScopeApi = DashScopeApi.builder()
                .apiKey("sk-309xxxxxxxxxxxxxxxxxxxxxxxx")
                .build();
        ChatModel chatModel = DashScopeChatModel.builder()
                .dashScopeApi(dashScopeApi)
                .build();

        // 2. åå»ºæºè½ä½è§è²
        ReactAgent agent = ReactAgent.builder()
                .name("æºè½å¿çå¨è¯¢å¸")
                .model(chatModel)
                .instruction("ä½ æ¯ä¸å10å¹´ç»éªçèµæ·±å¿çå¨è¯¢å¸.")
                .build();

        // 3. ä¸æºè½ä½å¯¹è¯
        var response = agent.call("æéçæäºä»ä¹çç¶ï¼è¯¥å¦ä½ç¼è§£ï¼");
        System.out.println(response.getText());
    }
}
</code></pre>
<h2 id="è¿è¡ä½ çç¬¬ä¸ä¸ª-ai-æºè½ä½">è¿è¡ä½ çç¬¬ä¸ä¸ª AI æºè½ä½</h2>
<p>ä»£ç ç¼åå®æåï¼ç´æ¥è¿è¡ main æ¹æ³ãä½ ä¼çå°æ§å¶å°è¾åºç±»ä¼¼ä»¥ä¸åå®¹ï¼</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1463469/202601/1463469-20260119183448703-1412029219.png" class="lazyload"></p>
<h2 id="ææ¯è¦ç¹è§£æ">ææ¯è¦ç¹è§£æ</h2>
<ul>
<li>â<strong>API Key éç½®</strong>âï¼éè¦å° DashScope å¹³å°ç³è¯·èªå·±ç API Key</li>
<li>â<strong>æºè½ä½å®å¶</strong>âï¼éè¿ instruction åæ°å®ä¹æºè½ä½çä¸ä¸èæ¯</li>
<li>â<strong>å¯¹è¯äº¤äº</strong>âï¼ä½¿ç¨ call æ¹æ³å³å¯ä¸æºè½ä½è¿è¡å¯¹è¯</li>
</ul>
<h2 id="æå±æè·¯">æå±æè·¯</h2>
<p>è¿ä¸ª Demo è½ç¶ç®åï¼ä½å·²ç»åå«äº AI æºè½ä½çæ ¸å¿è¦ç´ ãä½ å¯ä»¥å°è¯ï¼</p>
<ul>
<li>æ´æ¢ä¸åçä¸ä¸è§è²ï¼å¦æ³å¾é¡¾é®ãç¼ç¨å©æç­ï¼</li>
<li>è®¾è®¡æ´å¤æçå¯¹è¯æµç¨</li>
<li>éæå° Web åºç¨ä¸­æä¾å¨çº¿æå¡</li>
</ul>
<h2 id="æ»ç»">æ»ç»</h2>
<p>éè¿è¿ä¸ªæç¨ï¼æä»¬è§è¯äº Spring AI çå¼ºå¤§ä¹å¤ââç¨æç®çä»£ç å®ç°æºè½å¯¹è¯åè½ãä½ä¸º AI æ°æï¼è¿æ¯ä¸ä¸ªå®ç¾çèµ·ç¹ãæªæ¥ä½ å¯ä»¥å¨æ­¤åºç¡ä¸æ¢ç´¢æ´å¤æç AI åºç¨åºæ¯ã</p>
<p><strong>å¨æè¯è¯å§ï¼</strong> å¨è¯è®ºåºåäº«ä½ çç¬¬ä¸ä¸ªæºè½ä½ä½åï¼éå°é®é¢éæ¶æé®å¦~</p>
<hr>
<p><em>æ¬æåºäºææ¯ææ¡£æ´çï¼éå AI å¥é¨å­¦ä¹ ãå®éå¼åä¸­è¯·åèå®æ¹ææ°ææ¡£ã</em></p>
<p>_Reference: _https://github.com/alibaba/spring-ai-alibaba</p>

</div>
<div id="MySignature" role="contentinfo">
    <p>æ¬ææ¥èªåå®¢å­ï¼ä½èï¼<a href="https://www.cnblogs.com/freshman118/" target="_blank">90åå°éèå¸</a>ï¼è½¬è½½è¯·æ³¨æåæé¾æ¥ï¼<a href="https://www.cnblogs.com/freshman118/p/19503473" target="_blank">https://www.cnblogs.com/freshman118/p/19503473</a></p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-19 18:57">2026-01-19 18:57</span>&nbsp;
<a href="https://www.cnblogs.com/freshman118">90åå°éèå¸</a>&nbsp;
éè¯»(<span id="post_view_count">62</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19503473);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19503473', targetLink: 'https://www.cnblogs.com/freshman118/p/19503473', title: 'AIæ°æå¥é¨ï¼10åéç¨Spring AIæé ä½ çç¬¬ä¸ä¸ªæºè½å¿çå¨è¯¢å¸' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ [python] python-docx-templateæ¨¡æ¿åWordææ¡£çææå ]]></title>
    <link>https://www.cnblogs.com/luohenyueji/p/19503461</link>
    <guid>9916d943f68805f7e3422cd64ba6a3e5</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/luohenyueji/p/19503461" title="åå¸äº 2026-01-19 18:51">
    <span role="heading" aria-level="2">[python] python-docx-templateæ¨¡æ¿åWordææ¡£çææå</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>python-docxåºçæ ¸å¿åè½æ¯ç¨åºååå»ºå¨æ°çWordææ¡£ï¼ä½å¨åºäºå·²ææ¨¡æ¿æ¿æ¢å¶é¨ååå®¹æ¶ï¼å¶æä½ä¼éå¸¸ç¹çãç¨æ·éè¦åè§£æææ¡£ç»æãå®ä½å·ä½ä½ç½®ãæå¨æ¿æ¢åå®¹ï¼å¹¶ç»´æ¤åææ ¼å¼ä¸å¸å±ï¼å¯¼è´å¼åæçè¾ä½ãç¸å³ä½¿ç¨æ¹æ³å¯åèï¼<a href="https://www.cnblogs.com/luohenyueji/p/19479110" target="_blank">åºäºpython-docxåºçWordææ¡£èªå¨å¤çå¨è§£</a>ã</p>
<p>python-docx-templateæ­£æ¯ä¸ºè§£å³è¿ä¸çç¹èè®¾è®¡çãå®åé´Jinja2æ¨¡æ¿å¼æçæè·¯ï¼åè®¸å¨Wordææ¡£ä¸­ç´æ¥æå¥ç±»ä¼¼<code>{{variable}}</code>çå ä½ç¬¦ï¼éåä»ç¨å è¡ä»£ç å³å¯å®ææ°æ®å¡«åï¼æ éå³å¿åºå±ææ¡£ç»æï¼å®ç¾ééåºäºæ¨¡æ¿ä¿®æ¹ææ¡£çåºæ¯ã</p>
<p><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5Bpython%5D%20python-docx-template%E6%A8%A1%E6%9D%BF%E5%8C%96Word%E6%96%87%E6%A1%A3%E7%94%9F%E6%88%90%E6%8C%87%E5%8C%97/imgs/1.jpg" alt="" loading="lazy"></p>
<p>python-docx-templateåºäºpython-docxå®ç°ææ¡£è¯»ååè½ï¼å¹¶åå©jinja2æä¾çµæ´»çæ¨¡æ¿æ ç­¾æ¯æï¼å¶è®¾è®¡æè·¯å¦ä¸ï¼</p>
<ol>
<li>
<p>ç¨Wordå¶ä½æ¨¡æ¿<br>
å¨Microsoft Wordä¸­èªç±è®¾è®¡ææ¡£æ ¼å¼ï¼å¦æå¥å¾çãè®¾ç½®é¡µçé¡µèãè°æ´è¡¨æ ¼æ ·å¼ï¼ååå©ç¨Wordå¼ºå¤§çæçåè½ã</p>
</li>
<li>
<p>æå¥æ¨¡æ¿åé<br>
å¨éè¦å¨æåå®¹çä½ç½®ï¼ç´æ¥è¾å¥Jinja2é£æ ¼çæ ç­¾ï¼ä¾å¦<code>{{company_name}}</code>æ<code>{%for item in list%}</code>ã</p>
</li>
<li>
<p>ä¿å­ä¸ºæ¨¡æ¿æä»¶<br>
å°ææ¡£ä¿å­ä¸ºæ®éç.docxæä»¶ï¼è¯¥æä»¶å³æä¸ºå¯å¤ç¨çæ¨¡æ¿ã</p>
</li>
<li>
<p>ç¨Pythonæ¹éçæ<br>
å è½½æ¨¡æ¿å¹¶ä¼ å¥å­å¸æå¯¹è±¡ï¼python-docx-templateä¼èªå¨æ¿æ¢æ ç­¾ï¼çææç»ææ¡£ã</p>
</li>
</ol>
<p>python-docx-templateçå®æ¹ä»£ç ä»åºå°åä¸ºï¼<a href="https://github.com/elapouya/python-docx-template" target="_blank" rel="noopener nofollow">python-docx-template</a>ï¼è¯¦ç»ææ¡£å¯åéï¼<a href="https://docxtpl.readthedocs.io/" target="_blank" rel="noopener nofollow">python-docx-template doc</a>ãæ¬æä½¿ç¨çpython-docx-templateçæ¬ä¸º0.20.2ï¼å®è£å½ä»¤å¦ä¸ï¼</p>
<blockquote>
<p>pip install docxtpl</p>
</blockquote>
<p>å¶ä¸­ï¼docxtplæ¯python-docx-templateåºçæ­£å¼åååç§°ï¼äºèæä»£åä¸å·¥å·ã</p>
<p></p><div class="toc"><div class="toc-container-header">ç®å½</div><ul><li><a href="#1-ä½¿ç¨è¯´æ" rel="noopener nofollow">1 ä½¿ç¨è¯´æ</a><ul><li><a href="#11-æ ¸å¿æ¦å¿µ" rel="noopener nofollow">1.1 æ ¸å¿æ¦å¿µ</a><ul><li><a href="#111-æ ç­¾è¯´æ" rel="noopener nofollow">1.1.1 æ ç­¾è¯´æ</a></li><li><a href="#112-å¸¸è§åç´ " rel="noopener nofollow">1.1.2 å¸¸è§åç´ </a></li></ul></li><li><a href="#12-å¤æåç´ " rel="noopener nofollow">1.2 å¤æåç´ </a><ul><li><a href="#121-å¯ææ¬" rel="noopener nofollow">1.2.1 å¯ææ¬</a></li><li><a href="#122-å¯ææ¬æ®µè½" rel="noopener nofollow">1.2.2 å¯ææ¬æ®µè½</a></li><li><a href="#123-æµ®å¨å¯¹è±¡" rel="noopener nofollow">1.2.3 æµ®å¨å¯¹è±¡</a></li><li><a href="#124-å­ææ¡£" rel="noopener nofollow">1.2.4 å­ææ¡£</a></li></ul></li><li><a href="#13-è¡¥åæä½" rel="noopener nofollow">1.3 è¡¥åæä½</a><ul><li><a href="#131-è½¬ä¹æä½" rel="noopener nofollow">1.3.1 è½¬ä¹æä½</a></li><li><a href="#132-è·åæªå®ä¹åé" rel="noopener nofollow">1.3.2 è·åæªå®ä¹åé</a></li><li><a href="#133-jinjaèªå®ä¹è¿æ»¤å¨" rel="noopener nofollow">1.3.3 Jinjaèªå®ä¹è¿æ»¤å¨</a></li><li><a href="#134-microsoft-word-2016ç¹æ®è¡ä¸ºè¯´æ" rel="noopener nofollow">1.3.4 Microsoft Word 2016ç¹æ®è¡ä¸ºè¯´æ</a></li></ul></li></ul></li><li><a href="#2-åè" rel="noopener nofollow">2 åè</a></li></ul></div><p></p>
<h1 id="1-ä½¿ç¨è¯´æ">1 ä½¿ç¨è¯´æ</h1>
<h2 id="11-æ ¸å¿æ¦å¿µ">1.1 æ ¸å¿æ¦å¿µ</h2>
<h3 id="111-æ ç­¾è¯´æ">1.1.1 æ ç­¾è¯´æ</h3>
<p>python-docx-templateåè®¸å¨Wordææ¡£ä¸­ä½¿ç¨Jinja2æ ç­¾åè¿æ»¤å¨ãä½ä¸ºç¡®ä¿å¶å¨Wordä¸­æ­£å¸¸è¿ä½ï¼ééµå¾ªè¥å¹²éå¶ã</p>
<p>å¸¸è§Jinja2æ ç­¾ä»è½å¨åä¸æ®µè½åä¸åä¸ææ¬è¿è¡ä¸­ä½¿ç¨ï¼è¥éæ§å¶æ®µè½ãè¡¨æ ¼è¡æåå«æ ·å¼çå®æ´ææ¬è¿è¡ï¼åå¿é¡»ä½¿ç¨åç»­ç« èä»ç»çå¤æåç´ æ ç­¾è¯­æ³ã</p>
<p>ä¸¾ä¾èè¨ï¼è¥åå»ºä¸ä¸ªææå­ç¬¦æ ·å¼ç¸åçæ®µè½ï¼Wordåé¨åªä¼çæä¸ä¸ªææ¬è¿è¡å¯¹è±¡ãä½è¥å¨è¯¥æ®µè½ä¸­å°é¨åæå­è®¾ç½®ä¸ºå ç²ï¼Wordä¼å°åæææ¬è¿è¡æåä¸ºä¸ä¸ªç¬ç«é¨åï¼åå«å¯¹åºæ®éæ ·å¼ãå ç²æ ·å¼åæ¢å¤åçæ®éæ ·å¼ã</p>
<p><strong>æ ç­¾</strong></p>
<p>è¥è¦å¯¹æ®µè½ãè¡¨æ ¼è¡ãè¡¨æ ¼åä»¥åææ¬æ®µè¿è¡ç®¡çï¼éä½¿ç¨ä»¥ä¸ä¸ç¨è¯­æ³ï¼</p>
<ul>
<li>æ®µè½æ ç­¾ï¼<code>{%p jinja2_tag %}</code></li>
<li>è¡¨æ ¼è¡æ ç­¾ï¼<code>{%tr jinja2_tag %}</code></li>
<li>è¡¨æ ¼åæ ç­¾ï¼<code>{%tc jinja2_tag %}</code></li>
<li>ææ¬æ®µæ ç­¾ï¼<code>{%r jinja2_tag %}</code></li>
</ul>
<p>è¿äºä»¥<code>{% %}</code>åè£¹çåå®¹æ¯Jinja2æ¨¡æ¿è¯­æ³æ ç­¾ï¼å¼æä¼è¯å«å¹¶æ§è¡å¶ä¸­çé»è¾ãä¸ä¸ªå®æ´çæ¨¡æ¿æ ç­¾åºæ¬ç»æå¦ä¸ï¼</p>
<pre><code>{% æä»¤å³é®å­ åæ°/æ¡ä»¶ %}  // èµ·å§æ ç­¾
åå®¹                      // è¢«æ ç­¾æ§å¶çææ¬
{% ç»æå³é®å­ %}          // ç»ææ ç­¾
</code></pre>
<p>éè¿æ­¤ç±»æ ç­¾ï¼python-docx-templateå¯èªå¨å°æ åJinja2æ ç­¾ï¼å³å»é¤åç¼<code>p</code>ã<code>tr</code>ã<code>tc</code>ã<code>r</code>åçåå®¹ï¼ç²¾ç¡®åµå¥å°ææ¡£XMLæºç çç¸åºä½ç½®ã</p>
<p><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5Bpython%5D%20python-docx-template%E6%A8%A1%E6%9D%BF%E5%8C%96Word%E6%96%87%E6%A1%A3%E7%94%9F%E6%88%90%E6%8C%87%E5%8C%97/imgs/2.jpg" alt="" loading="lazy"></p>
<p>åè®¾æ¨¡æ¿åå®¹å¦ä¸ï¼</p>
<pre><code>{%p if display_paragraph %}
ä¸æ®µæå¤æ®µææ¬åå®¹
{%p endif %}
</code></pre>
<p>æ è®ºdisplay_paragraphåéåå¼å¦ä½ï¼é¦å°¾ä¸¤ä¸ªåå«<code>{%p ... %}</code>æ ç­¾çæ®µè½ï¼é½ä¸ä¼åºç°å¨æç»çæçdocxææ¡£ä¸­ã<br>
åªæå½display_paragraphçå¼ä¸ºTrueæ¶ï¼ä»¥ä¸åå®¹æä¼è¢«ä¿çå¨çæçææ¡£éï¼</p>
<pre><code>ä¸æ®µæå¤æ®µææ¬åå®¹
</code></pre>
<p>å¯¹äºæ¨¡æ¿éçæ ç­¾æ ¼å¼ééµå¾ªå¦ä¸è¦æ±ï¼å¦åæ æ³çææ­£ç¡®ç»æï¼</p>
<ul>
<li>èµ·å§æ ç­¾åéç¬¦åå¿é¡»å ç©ºæ ¼ï¼ç»ææ ç­¾åéç¬¦åå¿é¡»å ç©ºæ ¼ï¼
<ul>
<li>éè¯¯ç¤ºä¾ï¼<pre><code>{%if something%}
{%pif display_paragraph%}
</code></pre>
</li>
<li>æ­£ç¡®ç¤ºä¾ï¼<pre><code>{% if something %}
{%p if display_paragraph %}
</code></pre>
</li>
</ul>
</li>
<li>åä¸æ®µè½ãè¡ãåæææ¬æ®µåï¼ç¦æ­¢è¿ç»­ä½¿ç¨æ ç­¾åéç¬¦ï¼
<ul>
<li>éè¯¯ç¤ºä¾ï¼<pre><code>{%p{%tr{%tc{%r
</code></pre>
</li>
</ul>
</li>
<li>æ ç­¾ä¸åå®¹ä¸å¯åå¨åä¸è¡ï¼éæ¢è¡æçï¼
<ul>
<li>éè¯¯ç¤ºä¾ï¼<pre><code>{%p if display_paragraph %}Here is my paragraph {%p endif %}
</code></pre>
</li>
<li>æ­£ç¡®ç¤ºä¾ï¼<pre><code>{%p if display_paragraph %}
Here is my paragraph
{%p endif %}
</code></pre>
</li>
</ul>
</li>
</ul>
<h3 id="112-å¸¸è§åç´ ">1.1.2 å¸¸è§åç´ </h3>
<p><strong>æ¾ç¤ºåé</strong></p>
<p>Jinja2æ¨¡æ¿éï¼å¯ä»¥ç¨åå¤§æ¬å·æ¥æ¾ç¤ºåéï¼</p>
<pre><code>{{ &lt;åéå&gt; }}
</code></pre>
<p>å¦æåéæ¯æ®éå­ç¬¦ä¸²ï¼å­ç¬¦ä¸²éçç¹æ®ç¬¦å·ä¼èªå¨è½¬æ¢æå¯¹åºçæ ¼å¼ï¼</p>
<ul>
<li><code>\n</code> â æ¢è¡</li>
<li><code>\a</code> â åæ®µ</li>
<li><code>\t</code> â å¶è¡¨ç¬¦ï¼æä¸ä¸ Tab é®çææï¼</li>
<li><code>\f</code> â åé¡µç¬¦</li>
</ul>
<p>å¦æåéæ¯å¯ææ¬ï¼RichTextï¼å¯¹è±¡ï¼å¿é¡»å¨åéååå ä¸ä¸ª<code>r</code>ï¼æç¡®è¡¨ç¤ºè¦æ¸²æè¿ä¸ªå¯ææ¬åå®¹ï¼</p>
<pre><code>{{r &lt;åéå&gt; }}
</code></pre>
<p>æ³¨æï¼<code>r</code>è¦ç´§è·å¨å·¦å¤§æ¬å·çåé¢ã</p>
<p>æ­¤å¤ï¼åéåä¸­ç¦æ­¢ç´æ¥ä½¿ç¨<code>&lt;</code>,<code>&gt;</code>, <code>&amp;</code>è¿ç±»å­ç¬¦ï¼é¤éç¨äºè½¬ä¹è¯­æ³ã</p>
<p><strong>æ³¨é</strong></p>
<p>å¯ä»¥å¨æ¨¡æ¿ä¸­æ·»å ç±»Jinja2é£æ ¼çæ³¨éï¼æ³¨éä¸ä¼è¢«æ¸²æå°æç»æä»¶ï¼</p>
<pre><code>{#p è¿æ¯ä¸ä¸ªæ®µè½ç±»åçæ³¨é #}
{#tr è¿æ¯ä¸ä¸ªè¡¨æ ¼è¡ç±»åçæ³¨é #}
{#tc è¿æ¯ä¸ä¸ªè¡¨æ ¼ååæ ¼ç±»åçæ³¨é #}
</code></pre>
<p>å¨æ§è¡å¦ä¸ä»£ç å¯¹æ¨¡æ¿æä»¶è¿è¡æ¸²ææä½æ¶ï¼æ¨¡æ¿ä¸­åæçæææ³¨éä¿¡æ¯åä¼è¢«æ¸é¤ï¼ä¸ä¼ä¿çå¨æç»çæ¸²æç»æä¸­ï¼</p>
<pre><code class="language-python"># https://github.com/elapouya/python-docx-template/blob/master/tests/comments.py
from docxtpl import DocxTemplate
import os

# data: https://github.com/elapouya/python-docx-template/blob/master/tests/templates/comments_tpl.docx
tpl = DocxTemplate("templates/comments_tpl.docx")

tpl.render({})
os.makedirs("output",exist_ok=True)
tpl.save("output/comments.docx")
</code></pre>
<p><strong>ææ¬çæåä¸åå¹¶</strong></p>
<p>è¥åå«Jinja2æ ç­¾çææ¬è¿é¿ï¼ä¼å¯¼è´å¯è¯»æ§ä¸éï¼ä¾å¦ï¼</p>
<pre><code>æçæ¿å­ä½äº{% if living_in_town %}åå¸åºå{% else %}ä¹¡æå°åº{% endif %}ï¼æéå¸¸åæ¬¢å®ã
</code></pre>
<p>åå©<code>{%-</code>è¯­æ³ï¼å¯å°Jinja2æ ç­¾ä¸ä¸ä¸è¡åå®¹åå¹¶ï¼åæ¶åå©<code>-%}</code>è¯­æ³ï¼å¯å°Jinja2æ ç­¾ä¸ä¸ä¸è¡åå®¹åå¹¶ãæ­¤æ¶å¯ä½¿ç¨åè½¦é®ï¼Enterï¼æShift+Enterå¯¹ææ¬è¿è¡æåæçï¼åéè¿ä¸è¿°çæ ç­¾è¯­æ³å°æååçåå®¹åå¹¶ä¸ºä¸ä¸ªæ´ä½ï¼ç¤ºä¾å¦ä¸ï¼</p>
<pre><code>æçæ¿å­ä½äº
{%- if living_in_town -%}
åå¸åºå
{%- else -%}
ä¹¡æå°åº
{%- endif -%}
ï¼æéå¸¸åæ¬¢å®ã
</code></pre>
<p>æ¸²æä»£ç å¦ä¸ï¼</p>
<pre><code class="language-python">from docxtpl import DocxTemplate
tpl = DocxTemplate("template.docx")
context = {"living_in_town": True}

tpl.render(context)
tpl.save("output/output.docx")
</code></pre>
<p><strong>è¡¨æ ¼</strong></p>
<p>å¯ä»¥ä½¿ç¨<code>colspan</code>æ ç­¾å®ç°è¡¨æ ¼ååæ ¼çæ°´å¹³åå¹¶ï¼</p>
<pre><code>{% colspan &lt;var&gt; %}
</code></pre>
<p><code>&lt;var&gt;</code>å¿é¡»ä¸ºæ´æ°ï¼ç¨äºæå®éè¦åå¹¶çåæ°ãä¹å¯éè¿Jinja2æ¨¡æ¿å¼æèªå¨è®¡ç®ï¼å¦åç½®è¿æ»¤å¨countéè¿ç®¡éç¬¦|æ¥æ¶col_labelsï¼ç¨äºç»è®¡å¶åç´ æ°éï¼</p>
<pre><code>{% colspan col_labels|count %}
</code></pre>
<p>ä»¥ä¸ç¤ºä¾å±ç¤ºäºå¦ä½å©ç¨<code>colspan</code>æ ç­¾ã<code>tr</code>å<code>tc</code>æ ç­¾å¨æå¡«åä¸ä¸ªè¡¨æ ¼ï¼</p>
<pre><code class="language-python"># https://github.com/elapouya/python-docx-template/blob/master/tests/dynamic_table.py
from docxtpl import DocxTemplate
import os
# data: https://github.com/elapouya/python-docx-template/blob/master/tests/templates/dynamic_table_tpl.docx
tpl = DocxTemplate("templates/dynamic_table_tpl.docx")

context = {
    "col_labels": ["fruit", "vegetable", "stone", "thing"],
    "tbl_contents": [
        {"label": "yellow", "cols": ["banana", "capsicum", "pyrite", "taxi"]},
        {"label": "red", "cols": ["apple", "tomato", "cinnabar", "doubledecker"]},
        {"label": "green", "cols": ["guava", "cucumber", "aventurine", "card"]},
    ],
}

tpl.render(context)
os.makedirs("output",exist_ok=True)
tpl.save("output/dynamic_table.docx")
</code></pre>
<p>ä¹å¯ä»¥å¨forå¾ªç¯ä¸­å®ç°ååæ ¼æ°´å¹³åå¹¶ï¼</p>
<pre><code>{% hm %}
</code></pre>
<p>ä»¥ä¸ä»£ç å±ç¤ºäºå¦ä½å©ç¨<code>hm</code>æ ç­¾å®ç°ååæ ¼æ°´å¹³åå¹¶ï¼</p>
<pre><code class="language-python"># https://github.com/elapouya/python-docx-template/blob/master/tests/horizontal_merge.py
from docxtpl import DocxTemplate
import os
# data: https://github.com/elapouya/python-docx-template/blob/master/tests/templates/horizontal_merge_tpl.docx
tpl = DocxTemplate("templates/horizontal_merge_tpl.docx")
tpl.render({})
os.makedirs("output",exist_ok=True)
tpl.save("output/horizontal_merge.docx")
</code></pre>
<p>æ­¤å¤ï¼è¿å¯ä»¥å¨forå¾ªç¯ä¸­å®ç°ååæ ¼åç´åå¹¶ï¼</p>
<pre><code>{% vm %}
</code></pre>
<p>ä»¥ä¸ç¤ºä¾å±ç¤ºäºå¦ä½å®ç°è¡¨æ ¼ååæ ¼çåç´åå¹¶ææï¼</p>
<pre><code class="language-python"># https://github.com/elapouya/python-docx-template/blob/master/tests/vertical_merge.py
from docxtpl import DocxTemplate

# data: https://github.com/elapouya/python-docx-template/blob/master/tests/templates/vertical_merge_tpl.docx
tpl = DocxTemplate("templates/vertical_merge_tpl.docx")

context = {
    "items": [
        {"desc": "Python interpreters", "qty": 2, "price": "FREE"},
        {"desc": "Django projects", "qty": 5403, "price": "FREE"},
        {"desc": "Guido", "qty": 1, "price": "100,000,000.00"},
    ],
    "total_price": "100,000,000.00",
    "category": "Book",
}

tpl.render(context)
tpl.save("output/vertical_merge.docx")
</code></pre>
<p>è¥éè¦ä¿®æ¹è¡¨æ ¼ååæ ¼çèæ¯è²ï¼å¿é¡»å°ä»¥ä¸æ ç­¾æ¾ç½®å¨ååæ ¼åå®¹çæå¼å¤´ä½ç½®ï¼</p>
<pre><code>{% cellbg &lt;var&gt; %}
</code></pre>
<p><code>&lt;var&gt;</code>å¿é¡»å¡«åé¢è²çåå­è¿å¶ç¼ç ï¼ä¸æ éåå«äºå·ï¼#ï¼ã</p>
<h2 id="12-å¤æåç´ ">1.2 å¤æåç´ </h2>
<p><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5Bpython%5D%20python-docx-template%E6%A8%A1%E6%9D%BF%E5%8C%96Word%E6%96%87%E6%A1%A3%E7%94%9F%E6%88%90%E6%8C%87%E5%8C%97/imgs/3.jpg" alt="" loading="lazy"></p>
<h3 id="121-å¯ææ¬">1.2.1 å¯ææ¬</h3>
<p>å¯ææ¬ï¼Rich Textï¼æ¯ç¸å¯¹äºçº¯ææ¬ï¼Plain Textï¼èè¨çä¸ç§ææ¬æ ¼å¼ãå®ä¸ä»åå«æå­åå®¹ï¼è¿æ¯æä¸ºæå­æ·»å åç§æ ¼å¼å±æ§åå¤åªä½åç´ ï¼ä»èåç°åºæ´ä¸ºä¸°å¯çè§è§ææãè¿ç§æ ¼å¼çç¼è¾åå¤çä¹å¯ä»¥éè¿å¨Microsoft Wordè½¯ä»¶ä¸­é¢åå®ä¹å­ç¬¦æ ·å¼æ¥å®ç°ã</p>
<p>å¨python-docx-templateä¸­ä½¿ç¨å¯ææ¬çæ­¥éª¤å¦ä¸ï¼</p>
<ol>
<li>å¨Wordæ¨¡æ¿ä¸­ï¼ä¸ºå¯ææ¬å®ä¹ä¸ä¸ªå ä½ç¬¦ãä¾å¦ï¼ä½¿ç¨<code>{{r rich_text_var}}</code>ï¼å¶ä¸­çrè¡¨ç¤ºå¯ææ¬ã</li>
<li>å¨Pythonä»£ç ä¸­ï¼å©ç¨RichTextç±»æå»ºå¸¦ææ ¼å¼çææ¬åå®¹ã</li>
<li>æ¸²ææ¨¡æ¿æ¶ï¼å ä½ç¬¦ä¼è¢«æ¿æ¢ä¸ºå¯ææ¬åå®¹ï¼å¹¶ä¿çææå·²å®ä¹çæ ¼å¼æ ·å¼ã</li>
</ol>
<p>å¨ä»£ç ä¸­ä½¿ç¨RichTextç±»æ¶ï¼è¿å¯éè¿ä»¥ä¸æ è®°æ§å¶ææ¬æ ¼å¼ï¼</p>
<ul>
<li>æ¢è¡ï¼<code>\n</code>ï¼</li>
<li>æ¢æ®µï¼<code>\a</code>ï¼</li>
<li>åé¡µï¼<code>\f</code>ã</li>
</ul>
<p>ä»¥ä¸ä¸ºçæå¯ææ¬Wordææ¡£çç¤ºä¾ï¼</p>
<pre><code class="language-python"># https://github.com/elapouya/python-docx-template/blob/master/tests/richtext.py
from docxtpl import DocxTemplate, RichText

# data: https://github.com/elapouya/python-docx-template/blob/master/tests/templates/richtext_tpl.docx
tpl = DocxTemplate("templates/richtext_tpl.docx")

rt = RichText()

# åå¯ææ¬å¯¹è±¡ä¸­æ·»å åå®¹ï¼ä¾æ¬¡æ¼ç¤ºä¸åçææ¬æ ¼å¼è®¾ç½®
rt.add("a rich text", style="myrichtextstyle")  # ä½¿ç¨èªå®ä¹æ ·å¼
rt.add(" with ")                                
rt.add("some italic", italic=True)              # æä½ææ¬
rt.add(" and ")
rt.add("some violet", color="#ff00ff")          # ç´«è²ææ¬ï¼åå­è¿å¶é¢è²ç ï¼
rt.add(" and ")
rt.add("some striked", strike=True)             # å é¤çº¿ææ¬
rt.add(" and ")
rt.add("some Highlighted", highlight="#ffff00") # é»è²é«äº®ææ¬
rt.add(" and ")
rt.add("some small", size=14)                   # å°å­å·ææ¬ï¼14ç£ï¼
rt.add(" or ")
rt.add("big", size=60)                          # å¤§å­å·ææ¬ï¼60ç£ï¼
rt.add(" text.")
rt.add("\nYou can add an hyperlink, here to ")
# æ·»å å¸¦è¶é¾æ¥çææ¬ï¼build_url_id ç¨äºåå»ºURLæ è¯å¹¶å³èå°æå®é¾æ¥
rt.add("bing", url_id=tpl.build_url_id("http://bing.com"))
rt.add("\nEt voilÃ  ! ")
# æ¼ç¤ºæ¢è¡ç¬¦ææ
rt.add("\n1st line")
rt.add("\n2nd line")
rt.add("\n3rd line")
# \a ç¨äºåå»ºæ°æ®µè½
rt.add("\aA new paragraph : &lt;cool&gt;\a")
# \f ç¨äºæå¥åé¡µç¬¦
rt.add("--- A page break here (see next page) ---\f")

# å¾ªç¯æ¼ç¤ºä¸åç±»åçä¸åçº¿æ ·å¼
for ul in [
    "single",       # åä¸åçº¿
    "double",       # åä¸åçº¿
    "thick",        # ç²ä¸åçº¿
    "dotted",       # ç¹ä¸åçº¿
    "dash",         # ç­åçº¿ä¸åçº¿
    "dotDash",      # ç¹åçº¿ä¸åçº¿
    "dotDotDash",   # åç¹åçº¿ä¸åçº¿
    "wave",         # æ³¢æµªçº¿ä¸åçº¿
]:
    rt.add("\nUnderline : " + ul + " \n", underline=ul)

# æ¼ç¤ºä¸åå­ä½çè®¾ç½®
rt.add("\nFonts :\n", underline=True)
rt.add("Arial\n", font="Arial")                
rt.add("Courier New\n", font="Courier New")    
rt.add("Times New Roman\n", font="Times New Roman") 

# æ¼ç¤ºä¸æ åä¸æ ææ¬
rt.add("\n\nHere some")
rt.add("superscript", superscript=True)        # ä¸æ ææ¬
rt.add(" and some")
rt.add("subscript", subscript=True)            # ä¸æ ææ¬

# åå»ºä¸ä¸ªæ°çå¯ææ¬å¯¹è±¡ï¼å¹¶å°ä¹ååå»ºçrtå¯¹è±¡åµå¥å¶ä¸­ï¼å®ç°å¯ææ¬åµå¥
rt_embedded = RichText("an example of ")
rt_embedded.add(rt)

# æå»ºæ¸²æä¸ä¸æï¼å°åµå¥çå¯ææ¬å¯¹è±¡èµå¼ç»æ¨¡æ¿ä¸­ç "example" åé
context = {
    "example": rt_embedded,
}

# å°ä¸ä¸ææ°æ®æ¸²æå°Wordæ¨¡æ¿ä¸­
tpl.render(context)
# ä¿å­æ¸²æåçWordææ¡£å°æå®è·¯å¾
tpl.save("output/richtext.docx")
</code></pre>
<h3 id="122-å¯ææ¬æ®µè½">1.2.2 å¯ææ¬æ®µè½</h3>
<p>è¥è¦ç²¾ç»æ§å¶åä¸ªæ®µè½çæ ·å¼ï¼å¯å¨ä»£ç ä¸­ä½¿ç¨<code>RichTextParagraph()</code>æ<code>RP()</code>å¯¹è±¡ãæ­¤å¯¹è±¡ééè¿<code>{{p &lt;var&gt; }}</code>è¯­æ³æ·»å è³æ¨¡æ¿ãç¤ºä¾ä»£ç å¦ä¸ï¼</p>
<pre><code class="language-python"># https://github.com/elapouya/python-docx-template/blob/master/tests/richtextparagraph.py
from docxtpl import DocxTemplate, RichText, RichTextParagraph

# data: https://github.com/elapouya/python-docx-template/blob/master/tests/templates/richtext_paragraph_tpl.docx
tpl = DocxTemplate("templates/richtext_paragraph_tpl.docx")

# åå»ºå¯ææ¬æ®µè½å¯¹è±¡ç»åä¸åæ ·å¼çæ®µè½
rtp = RichTextParagraph()
# åå»ºå¯ææ¬å¯¹è±¡ï¼ç¨äºè®¾ç½®ææ¬çå­ç¬¦æ ·å¼
rt = RichText()

# åå¯ææ¬æ®µè½ä¸­æ·»å ææ¬ï¼å¹¶æå®èªå®ä¹æ ·å¼myrichparastyle
rtp.add(
    "The rich text paragraph function allows paragraph styles to be added to text",
    parastyle="myrichparastyle",
)
# æ·»å ææ¬å¹¶ä½¿ç¨åç½®æ®µè½æ ·å¼IntenseQuote
rtp.add("Any built in paragraph style can be used", parastyle="IntenseQuote")
# æ·»å ææ¬å¹¶ä½¿ç¨èªå®ä¹æ ·å¼createdStyle
rtp.add(
    "or you can add your own, unlocking all style options", parastyle="createdStyle"
)
# æ·»å ææ¬å¹¶ä½¿ç¨é»è®¤æ®éæ®µè½æ ·å¼normal
rtp.add(
    "To use, just create a style in your template word doc with the formatting you want "
    "and call it in the code.",
    parastyle="normal",
)

# æ¼ç¤ºä¸ååè¡¨æ ·å¼çä½¿ç¨
rtp.add("This allows for the use of")
rtp.add("custom bullet\apoints", parastyle="SquareBullet")  # æ¹å½¢é¡¹ç®ç¬¦å·æ ·å¼
rtp.add("Numbered Bullet Points", parastyle="BasicNumbered")  # æ°å­ç¼å·æ ·å¼
rtp.add("and Alpha Bullet Points.", parastyle="alphaBracketNumbering")  # å­æ¯ç¼å·æ ·å¼

# æ¼ç¤ºææ¬å¯¹é½æ¹å¼çè®¾ç½®
rtp.add("You can", parastyle="normal")  # é»è®¤å·¦å¯¹é½
rtp.add("set the", parastyle="centerAlign")  # åºç¨èªå®ä¹æ ·å¼å±ä¸­å¯¹é½
rtp.add("text alignment", parastyle="rightAlign")  # åºç¨èªå®ä¹æ ·å¼å³å¯¹é½

# æ¼ç¤ºè¡é´è·æ ·å¼ï¼ç´§åè¡é´è·
rtp.add(
    "as well as the spacing between lines of text. Like this for example, "
    "this text has very tight spacing between the lines.\aIt also has no space between "
    "paragraphs of the same style.",
    parastyle="TightLineSpacing",
)
# æ¼ç¤ºè¡é´è·æ ·å¼ï¼å®½è¡é´è·
rtp.add(
    "Unlike this one, which has extra large spacing between lines for when you want to "
    "space things out a bit or just write a little less.",
    parastyle="WideLineSpacing",
)
# æ¼ç¤ºæ®µè½èæ¯è²æ ·å¼ï¼ç»¿è²èæ¯
rtp.add(
    "You can also set the background colour of a line.", parastyle="LineShadingGreen"
)

# æå»ºå¯ææ¬å­ç¬¦ä¸²ï¼æ¼ç¤ºå­ç¬¦çº§æ ·å¼
rt.add("This works with ")
rt.add("Rich ", bold=True)  # å ç²
rt.add("Text ", italic=True)  # æä½
rt.add("Strings", underline="single")  # åä¸åçº¿
rt.add(" too.")

# å°å¯ææ¬å¯¹è±¡æ·»å å°å¯ææ¬æ®µè½ä¸­ï¼å¹¶æå®æ¹å½¢é¡¹ç®ç¬¦å·æ ·å¼
rtp.add(rt, parastyle="SquareBullet")

# æå»ºæ¸²æä¸ä¸æï¼å°å¯ææ¬æ®µè½å¯¹è±¡ç»å®å°æ¨¡æ¿ä¸­çexampleåé
context = {
    "example": rtp,
}

# å°ä¸ä¸ææ°æ®æ¸²æå° Word æ¨¡æ¿ä¸­
tpl.render(context)
# ä¿å­æ¸²æåç Word ææ¡£å°æå®è·¯å¾
tpl.save("output/richtext_paragraph.docx")
</code></pre>
<h3 id="123-æµ®å¨å¯¹è±¡">1.2.3 æµ®å¨å¯¹è±¡</h3>
<p><strong>å¾çæå¥</strong></p>
<p>å¯å¨ææ¡£ä¸­å¨ææå¥åå¼ æå¤å¼ å¾çï¼å½åå·²æ¯æJPEGåPNGæ ¼å¼ãåªéå¨æ¨¡æ¿ä¸­ä½¿ç¨<code>{{ &lt;var&gt; }}</code>æ ¼å¼çæ ç­¾å³å¯ãå¾çåµå¥ä»£ç å¦ä¸ï¼</p>
<pre><code class="language-python">myimage = InlineImage(tpl, image_descriptor='test_files/python_logo.png', width=Mm(20), height=Mm(10))
</code></pre>
<p>ä½¿ç¨æ¶åºä¼ å¥æ¨¡æ¿å¯¹è±¡ä¸å¾çæä»¶è·¯å¾ï¼å®½é«ä¸ºå¯éåæ°ãå®½åº¦åé«åº¦ééè¿<code>Mm</code>ï¼æ¯«ç±³ï¼ã<code>Inches</code>ï¼è±å¯¸ï¼æ <code>Pt</code>ï¼ç£ï¼ç­ç±»è¿è¡åä½å®ä¹ãç¤ºä¾ä»£ç å¦ä¸ï¼</p>
<pre><code class="language-python"># https://github.com/elapouya/python-docx-template/blob/master/tests/inline_image.py
from docxtpl import DocxTemplate, InlineImage
from docx.shared import Mm
import jinja2
# data: https://github.com/elapouya/python-docx-template/blob/master/tests/templates/inline_image_tpl.docx
tpl = DocxTemplate("templates/inline_image_tpl.docx")

# å®ä¹æ¸²ææ¨¡æ¿æéçä¸ä¸ææ°æ®
context = {
    # åªè®¾ç½®å®½æèé«ï¼åå¾çèªéåºåå
    "myimage": InlineImage(tpl, "templates/python_logo.png", width=Mm(20)),
    # æå¨æå®å®½é«åº¦
    "myimageratio": InlineImage(
        tpl, "templates/python_jpeg.jpg", width=Mm(30), height=Mm(60)
    ),
    # å®ä¹å¾ç+æè¿°
    "frameworks": [
        {
            "image": InlineImage(tpl, "templates/django.png", height=Mm(10)),
            "desc": "The web framework for perfectionists with deadlines",
        },
        {
            "image": InlineImage(tpl, "templates/zope.png", height=Mm(10)),
            "desc": "Zope is a leading Open Source Application Server "
            "and Content Management Framework",
        },
        {
            "image": InlineImage(tpl, "templates/pyramid.png", height=Mm(10)),
            "desc": "Pyramid is a lightweight Python web framework aimed at taking "
            "small web apps into big web apps.",
        },
        {
            "image": InlineImage(tpl, "templates/bottle.png", height=Mm(10)),
            "desc": "Bottle is a fast, simple and lightweight WSGI micro web-framework "
            "for Python",
        },
        {
            "image": InlineImage(tpl, "templates/tornado.png", height=Mm(10)),
            "desc": "Tornado is a Python web framework and asynchronous networking "
            "library.",
        },
    ],
}

# autoescapeæ¯å¦å¼å¯èªå¨è½¬ä¹ï¼ææ¨¡æ¿åéä¸­çç¹æ®å­ç¬¦è½¬æ¢ææ å®³çHTMå®ä½
jinja_env = jinja2.Environment(autoescape=True)
# ä½¿ç¨ä¸ä¸ææ°æ®åèªå®ä¹çjinja2ç¯å¢æ¸²æWordæ¨¡æ¿
tpl.render(context, jinja_env)
tpl.save("output/inline_image.docx")
</code></pre>
<p><strong>æ¿æ¢ææ¡£ä¸­çå¾ç</strong></p>
<p>å¯å¯¹ææ¡£ä¸­çç°æå¾çè¿è¡æ¿æ¢ï¼å·ä½æä½å¦ä¸ï¼åå¨æ¨¡æ¿ä¸­æå¥ä¸å¼ å ä½å¾ï¼æå¸¸è§æµç¨æ¸²ææ¨¡æ¿ï¼ä¹ååå°å ä½å¾æ¿æ¢ä¸ºç®æ å¾çãè¯¥æ¹æ³æ¯ææ¹éå¤çææ¡£åçææåªä½æä»¶ï¼ä¸æ¿æ¢åçå¾çå°ç»´æåå ä½å¾ççºµæ¨ªæ¯ãå¨æ¨¡æ¿ä¸­æå¥å¾çæ¶ï¼åªéæå®æä»¶åå³å¯ãè¯¥æ¿æ¢æä½åæ¶å¯¹é¡µçãé¡µèåæ­£æåºåçæã</p>
<p>ä¾å¦ï¼æ¿æ¢å ä½å¾<code>dummy_header_pic.jpg</code>çè¯­æ³ç¤ºä¾å¦ä¸ï¼</p>
<pre><code class="language-python">tpl.replace_pic('dummy_header_pic.jpg', 'header_pic_i_want.jpg')
</code></pre>
<p>æ³¨æï¼å¨å°å¾çæå¨æå¥Wordæ¨¡æ¿æ¶ï¼æäºçæ¬çWordä¼èªå¨å¯¹å¶éå½åå¹¶å­å¨ãè¿å¯¼è´å¾çå¨docxæä»¶åçå®éæä»¶åä¸åæä»¶åå®å¨ä¸åï¼ä»èå¯è½å¼åæ¾ä¸å°å¾ççé®é¢ãè¥ä¸ç¡®å®å¾ççå·ä½ä½ç½®ï¼å¯å°docxæä»¶è§ä¸ºzipåç¼©åè¿è¡è§£åï¼éåå¨<code>word\document.xml</code>æä»¶ä¸­ï¼éè¿æ¥æ¾<code>pic:nvPicPr</code>èç¹æ¥å®ä½å¾çä¿¡æ¯ãå·ä½æ­¥éª¤å¯åèï¼<a href="https://blog.csdn.net/qq_42780731/article/details/106946284" target="_blank" rel="noopener nofollow">pythonä½¿ç¨docxtplåºå¯¹å¾çè¿è¡æ¿æ¢</a>ã</p>
<p>å¨æ¾å°ç®æ å¾çå¯¹åºç<code>pic:nvPicPr</code>èç¹åï¼å¶<code>name</code>å±æ§çå¼å³ä¸ºå¾çå¨ææ¡£ä¸­å®éå­å¨çæä»¶åãæ­¤å¤çæä»¶åå¯è½ä¸åå«å¾çæ ¼å¼åç¼ï¼æ¿æ¢å¾ççç¤ºä¾ä»£ç å¯è½å¦ä¸ï¼</p>
<pre><code class="language-python">tpl.replace_pic('Picture 1','header_pic_i_want.jpg')
</code></pre>
<h3 id="124-å­ææ¡£">1.2.4 å­ææ¡£</h3>
<p>æ¨¡æ¿åéå¯åå«å¤æçå­ææ¡£å¯¹è±¡ï¼ä¸è½éè¿python-docxçææ¡£æä½æ¹æ³ä»é¶æå»ºãå·ä½æ­¥éª¤ä¸ºï¼åä»æ¨¡æ¿å¯¹è±¡ä¸­è·åå­ææ¡£å¯¹è±¡ï¼åå°å¶å½ä½python-docxææ¡£å¯¹è±¡ä½¿ç¨ãè¯¥åè½éè¦å®è£é¢å¤ä¾èµï¼</p>
<blockquote>
<p>pip install "docxtpl[subdoc]"</p>
</blockquote>
<p>ä»¥ä¸ä»£ç å±ç¤ºäºå¦ä½åå»ºå­ææ¡£ï¼å¹¶å°è¯¥å­ææ¡£åµå¥å°ä¸»æ¨¡æ¿ä¸­ï¼æç»çæå¹¶ä¿å­æ°çææ¡£ï¼</p>
<pre><code class="language-python"># https://github.com/elapouya/python-docx-template/blob/master/tests/subdoc.py
from docxtpl import DocxTemplate
from docx.shared import Inches

# data: https://github.com/elapouya/python-docx-template/blob/master/tests/templates/subdoc_tpl.docx
# 1. å è½½Wordæ¨¡æ¿æä»¶ï¼æå®æ¨¡æ¿æä»¶è·¯å¾ï¼
tpl = DocxTemplate("templates/subdoc_tpl.docx")

# 2. åå»ºä¸ä¸ªæ°çå­ææ¡£å¯¹è±¡
sd = tpl.new_subdoc()

# 3. åä¸ææ¡£ä¸­æ·»å æ®µè½åå®¹
p = sd.add_paragraph("This is a sub-document inserted into a bigger one")
p = sd.add_paragraph("It has been ")
# ä¸ºææ¬çæ®µè®¾ç½®èªå®ä¹æ ·å¼
p.add_run("dynamically").style = "dynamic"
p.add_run(" generated with python by using ")
# ä¸ºææ¬çæ®µè®¾ç½®æä½æ ·å¼
p.add_run("python-docx").italic = True
p.add_run(" library")

# 4. åä¸ææ¡£æ·»å æ é¢
sd.add_heading("Heading, level 1", level=1)
# åä¸ææ¡£æ·»å å¸¦æ ·å¼çæ®µè½ï¼IntenseQuoteæ ·å¼ä¸ºåç½®æ ·å¼ï¼
sd.add_paragraph("This is an Intense quote", style="IntenseQuote")

# 5. åä¸ææ¡£æå¥å¾ç
sd.add_paragraph("A picture :")
sd.add_picture("templates/python_logo.png", width=Inches(1.25))

# 6. åä¸ææ¡£æå¥è¡¨æ ¼
sd.add_paragraph("A Table :")
# åå»ºè¡¨æ ¼ï¼åå§1è¡3åï¼ä½ä¸ºè¡¨å¤´ï¼
table = sd.add_table(rows=1, cols=3)
# è·åè¡¨å¤´ååæ ¼å¹¶è®¾ç½®åå®¹
hdr_cells = table.rows[0].cells
hdr_cells[0].text = "Qty"
hdr_cells[1].text = "Id"
hdr_cells[2].text = "Desc"

# å®ä¹è¡¨æ ¼æ°æ®
recordset = ((1, 101, "Spam"), (2, 42, "Eggs"), (3, 631, "Spam,spam, eggs, and ham"))
# å¾ªç¯æ·»å æ°æ®è¡å°è¡¨æ ¼
for item in recordset:
    row_cells = table.add_row().cells
    row_cells[0].text = str(item[0])  # æ°éï¼è½¬ä¸ºå­ç¬¦ä¸²ï¼
    row_cells[1].text = str(item[1])  # IDï¼è½¬ä¸ºå­ç¬¦ä¸²ï¼
    row_cells[2].text = item[2]       # æè¿°

context = {
    "mysubdoc": sd,
}

tpl.render(context)
tpl.save("output/subdoc.docx")
</code></pre>
<p>æ­¤å¤èªpython-docx-template V0.12.0çæ¬èµ·ï¼æ¯æå°å·²æç.docxæä»¶ä½ä¸ºå­ææ¡£è¿è¡åå¹¶ï¼å¦ä¸æç¤ºï¼</p>
<pre><code class="language-python"># https://github.com/elapouya/python-docx-template/blob/master/tests/merge_docx.py
from docxtpl import DocxTemplate

# data: https://github.com/elapouya/python-docx-template/blob/master/tests/templates
tpl = DocxTemplate("templates/merge_docx_master_tpl.docx")
sd = tpl.new_subdoc("templates/merge_docx_subdoc.docx")

context = {
    "mysubdoc": sd,
}

tpl.render(context)
tpl.save("output/merge_docx.docx")
</code></pre>
<h2 id="13-è¡¥åæä½">1.3 è¡¥åæä½</h2>
<p><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5Bpython%5D%20python-docx-template%E6%A8%A1%E6%9D%BF%E5%8C%96Word%E6%96%87%E6%A1%A3%E7%94%9F%E6%88%90%E6%8C%87%E5%8C%97/imgs/4.jpg" alt="" loading="lazy"></p>
<h3 id="131-è½¬ä¹æä½">1.3.1 è½¬ä¹æä½</h3>
<p>é»è®¤æåµä¸ï¼python-docx-templateä¸ä¼å¯¹åå®¹è¿è¡è½¬ä¹ãè¿æ¯å ä¸ºå¨ä½¿ç¨æ¨¡æ¿è¯­æ³ä¿®æ¹Wordææ¡£æ¶ï¼åºå±å®éä¸æ¯å¨å¤çXMLç»æï¼èå<code>&lt;</code>ã<code>&gt;</code> å<code>&amp;</code>è¿æ ·çå­ç¬¦å¨XMLä¸­å·æç¹æ®å«ä¹ï¼å¿é¡»ç»è¿è½¬ä¹æè½æ­£ç¡®æ¾ç¤ºãä»¥ä¸æä¾å ç§å®ç°è½¬ä¹çæ¹æ³ï¼</p>
<ol>
<li>
<p>ä¸ä¸æå®ä¹æ¶ä½¿ç¨<code>R()</code>åè£¹åå®¹ï¼æ¨¡æ¿ä¸­æ·»å <code>r</code>æ è®°ï¼</p>
<pre><code class="language-python">context = { 'var': R('my text') }
</code></pre>
<p>æ¨¡æ¿ä¸­åæ³ï¼<code>{{r &lt;var&gt; }}</code></p>
</li>
<li>
<p>ä¸ä¸æä¿æåå§å­ç¬¦ä¸²ï¼æ¨¡æ¿ä¸­ä½¿ç¨<code>|e</code>è¿æ»¤å¨ï¼</p>
<pre><code class="language-python">context = { 'var':'my text' }
</code></pre>
<p>æ¨¡æ¿ä¸­åæ³ï¼<code>{{ &lt;var&gt;|e }}</code></p>
</li>
<li>
<p>ä¸ä¸æä½¿ç¨<code>escape()</code>å½æ°å¤çåå®¹ï¼æ¨¡æ¿ç´æ¥å¼ç¨ï¼</p>
<pre><code class="language-python">context = { 'var': escape('my text') }
</code></pre>
<p>æ¨¡æ¿ä¸­åæ³ï¼<code>{{ &lt;var&gt; }}</code></p>
</li>
<li>
<p>è°ç¨<code>render</code>æ¹æ³æ¶å¯ç¨èªå¨è½¬ä¹ï¼é»è®¤å¼ä¸º<code>autoescape=False</code>ï¼</p>
<pre><code class="language-python">tpl.render(context, autoescape=True)
</code></pre>
</li>
</ol>
<p>å¨ææ¡£ä¸­æå¥ä»£ç æ¸åæ¶ï¼å¦æéè¦åæ¶è½¬ä¹ææ¬å¹¶å¤çæ¢è¡ç¬¦ï¼<code>\n</code>ï¼ãæ®µè½ç¬¦ï¼<code>\a</code>ï¼åæ¢é¡µç¬¦ï¼<code>\f</code>ï¼ï¼å¯ä»¥å¨Pythonä»£ç ä¸­ä½¿ç¨<code>Listing</code>ç±»ã</p>
<p>ä¾å¦ï¼</p>
<pre><code class="language-python">context = { 
    'mylisting': Listing('the listing\nwith\nsome\nlines \a and some paragraph \a and special chars : &lt;&gt;&amp;') 
}
</code></pre>
<p>å¨æ¨¡æ¿ä¸­ç´æ¥å¼ç¨å³å¯ï¼</p>
<pre><code>{{ mylisting }}
</code></pre>
<p>ä½¿ç¨<code>Listing()</code>è½å¤ä¿æå½åå­ç¬¦æ ·å¼ï¼é¤ééå°<code>\a</code>åéç¬¦ï¼å®ä¼å¨è¯¥ä½ç½®å¼å§ä¸ä¸ªæ°çæ®µè½ã</p>
<p>ä½¿ç¨ç¤ºä¾å¦ä¸ï¼</p>
<pre><code class="language-python"># https://github.com/elapouya/python-docx-template/blob/master/tests/escape.py
from docxtpl import DocxTemplate, R, Listing
# data: https://github.com/elapouya/python-docx-template/blob/master/tests/templates/escape_tpl.docx
tpl = DocxTemplate("templates/escape_tpl.docx")

context = {
    "myvar": R(
        '"less than" must be escaped : &lt;, this can be done with RichText() or R()'
    ),
    "myescvar": 'It can be escaped with a "|e" jinja filter in the template too : &lt; ',
    "nlnp": R(
        "Here is a multiple\nlines\nstring\aand some\aother\aparagraphs",
        color="#ff00ff",
    ),
    "mylisting": Listing("the listing\nwith\nsome\nlines\nand special chars : &lt;&gt;&amp; ..."),
    "page_break": R("\f"),
    "new_listing": """
This is a new listing
Here is a \t tab\a
Here is a page break : \f
That's it
""",
    "some_html": (
        "HTTP/1.1 200 OK\n"
        "Server: Apache-Coyote/1.1\n"
        "Cache-Control: no-store\n"
    ),
}

tpl.render(context)
tpl.save("output/escape.docx")
</code></pre>
<p>æ­¤å¤ï¼è¥éå¨æç»çæçWordææ¡£ä¸­æ¾ç¤ºç±Jinja2æ¸²æåçç¹æ®å­ç¬¦<code>%</code>ã<code>{</code>æ<code>}</code>ï¼å¯ä»¥ä½¿ç¨ä»¥ä¸æ¹å¼è¿è¡è½¬ä¹ï¼</p>
<ul>
<li>æ¾ç¤º<code>%%</code> â ä½¿ç¨<code>{_% %_}</code></li>
<li>æ¾ç¤º<code>{{ }}</code> â ä½¿ç¨<code>{_{ }_}</code></li>
</ul>
<h3 id="132-è·åæªå®ä¹åé">1.3.2 è·åæªå®ä¹åé</h3>
<p>è¦è·åæ¨¡æ¿æ¸²ææ¶æéçæªå®ä¹åéï¼å¯ä»¥æç§ä»¥ä¸æ­¥éª¤æä½ï¼</p>
<pre><code class="language-python">from docxtpl import DocxTemplate
tpl = DocxTemplate('template.docx')

context = {'name': 'å¼ ä¸', 'age': 30}
# æ³¨æï¼departmentåéæªå®ä¹

# æ£æµç¼ºå¤±åé
missing = tpl.get_undeclared_template_variables(context=context)
print(f"ç¼ºå¤±çåé: {missing}")

# è·åææåéï¼ä¸ä¼ contextï¼
all_vars = tpl.get_undeclared_template_variables()
print(f"æ¨¡æ¿ææåé: {all_vars}")
</code></pre>
<p>æ¨¡æ¿ææ¡£çåå®¹åå«ï¼</p>
<pre><code>å§åï¼{{name}}
å¹´é¾ï¼{{age}}
é¨é¨ï¼{{department}}
</code></pre>
<p>è¥æªä¼ é <code>context</code> åæ°ï¼è¯¥æ¹æ³å°è¿åæ¨¡æ¿ä¸­ææéè¦èµå¼çåéåçéåãæ­¤ç»æå¯ç¨äºåç¨æ·æç¤ºè¾å¥ï¼æåå¥æä»¶ä¾åç»­æå¨å¤çã</p>
<h3 id="133-jinjaèªå®ä¹è¿æ»¤å¨">1.3.3 Jinjaèªå®ä¹è¿æ»¤å¨</h3>
<p>Python-docx-templateçrenderæ¹æ³æ¯æä¸ä¸ªå¯éåæ°jinja_envï¼ä½ä¸ºå¶ç¬¬äºä¸ªåæ°ãéè¿ä¼ éèªå®ä¹çJinjaç¯å¢å¯¹è±¡ï¼å¯ä»¥å®ç°èªå®ä¹è¿æ»¤å¨çæ·»å ï¼ä»èçµæ´»æ©å±æ°æ®å¤çé»è¾ãä»¥ä¸ä¸ºå·ä½ç¤ºä¾ã</p>
<p>æ¨¡æ¿wordåå®¹å¦ä¸ï¼</p>
<pre><code>=== å§åå±ç¤ºå¯¹æ¯ ===
åå§åå­: {{ name }}
æ¹æ³A (Pythonå¤ç): {{ name_upper }}
æ¹æ³B (æ¨¡æ¿è¿æ»¤å¨): {{ name|upper }}
</code></pre>
<p>å¯¹åºçPythonæ¸²æä»£ç ï¼</p>
<pre><code class="language-python">from docxtpl import DocxTemplate
import jinja2

# åå¤æ°æ®
data = {'name': 'zhangsan'}

# Pythonä¸­å¤ç
data['name_upper'] = data['name'].upper()

# å®ä¹è¿æ»¤å¨
def my_upper(text):
    return text.upper()

doc = DocxTemplate("template.docx")

#åå»ºç¯å¢å¹¶æ³¨åè¿æ»¤å¨
env = jinja2.Environment()
env.filters['upper'] = my_upper 

doc.render(data, env) 
doc.save("output/compare.docx")
print(f"åå§æ°æ®: {data['name']}")
print(f"Pythonå¤çç»æ: {data['name_upper']}")
print(f"æ¨¡æ¿è¿æ»¤å¨ç»æ: {data['name'].upper()}")
</code></pre>
<h3 id="134-microsoft-word-2016ç¹æ®è¡ä¸ºè¯´æ">1.3.4 Microsoft Word 2016ç¹æ®è¡ä¸ºè¯´æ</h3>
<p>MS Word 2016ä¼å¿½ç¥ææ¡£ä¸­çå¶è¡¨ç¬¦ï¼è¿æ¯è¯¥çæ¬ç¹æçæåµãç±»ä¼¼LibreOfficeæWordPadç­å¶ä»ç¼è¾å·¥å·åæ æ­¤é®é¢ãåæ ·ï¼ä»¥Jinja2æ ç­¾å¼å¤´ä¸å¸¦æåå¯¼ç©ºæ ¼çè¡ï¼å¶ç©ºæ ¼ä¹ä¼è¢«å¿½ç¥ã</p>
<p>ä¸ºè§£å³ä¸è¿°é®é¢ï¼å¯ä½¿ç¨<code>RichText</code>è¿è¡å¤çï¼</p>
<pre><code class="language-python">tpl.render({
    'test_space_r': RichText('          '),
    'test_tabs_r': RichText(5 * '\t'),
})
</code></pre>
<p>å¨æ¨¡æ¿ä¸­ï¼éè¿<code>{{r ... }}</code>è¯­æ³è°ç¨ï¼</p>
<pre><code>{{r test_space_r}} ç©ºæ ¼å°è¢«ä¿ç
{{r test_tabs_r}} å¶è¡¨ç¬¦å°æ­£å¸¸æ¾ç¤º
</code></pre>
<h1 id="2-åè">2 åè</h1>
<ul>
<li><a href="https://www.cnblogs.com/luohenyueji/p/19479110" target="_blank">åºäºpython-docxåºçWordææ¡£èªå¨å¤çå¨è§£</a></li>
<li><a href="https://github.com/elapouya/python-docx-template" target="_blank" rel="noopener nofollow">python-docx-template</a></li>
<li><a href="https://docxtpl.readthedocs.io/" target="_blank" rel="noopener nofollow">python-docx-template doc</a></li>
<li><a href="https://blog.csdn.net/qq_42780731/article/details/106946284" target="_blank" rel="noopener nofollow">pythonä½¿ç¨docxtplåºå¯¹å¾çè¿è¡æ¿æ¢</a></li>
</ul>

</div>
<div id="MySignature" role="contentinfo">
    <p>æ¬ææ¥èªåå®¢å­ï¼ä½èï¼<a href="https://www.cnblogs.com/luohenyueji/" target="_blank">è½ççå¯å</a>ï¼è½¬è½½è¯·æ³¨æåæé¾æ¥ï¼<a href="https://www.cnblogs.com/luohenyueji/p/19503461" target="_blank">https://www.cnblogs.com/luohenyueji/p/19503461</a></p>

<div style="text-align:center">
    <img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/wechat/content/%E5%8A%A0%E6%B2%B9%E9%B8%AD.gif">
</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-19 18:51">2026-01-19 18:51</span>&nbsp;
<a href="https://www.cnblogs.com/luohenyueji">è½ççå¯å</a>&nbsp;
éè¯»(<span id="post_view_count">28</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19503461);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19503461', targetLink: 'https://www.cnblogs.com/luohenyueji/p/19503461', title: '[python] python-docx-templateæ¨¡æ¿åWordææ¡£çææå' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
        </channel>
        </rss>