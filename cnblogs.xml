<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åå®¢å­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2026-02-18T20:33:13.169Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åå®¢å­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ æ¥å£æµè¯åºç¡æ¦å¿µ ]]></title>
    <link>https://www.cnblogs.com/xi-yongqi/p/19623710</link>
    <guid>3b539c434a161ea1424a78d2c6076062</guid>
    <description>
    <![CDATA[ 
		<h1 class="postTitle">
			<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xi-yongqi/p/19623710" title="åå¸äº 2026-02-18 23:43">
    <span role="heading" aria-level="2">æ¥å£æµè¯åºç¡æ¦å¿µ</span>
    

</a>

		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h3 id="æ¥å£æµè¯">æ¥å£æµè¯</h3>
<h4 id="æ¥å£çæ¦å¿µ">æ¥å£çæ¦å¿µ</h4>
<ul>
<li>æ¥å£â¼è¬æ¥è¯´æä¸¤ç§ï¼â¼ç§æ¯ç¨åºåé¨çæ¥å£ï¼â¼ç§æ¯ç³»ç»å¯¹å¤çæ¥å£ã</li>
<li>ç¨åºåé¨çæ¥å£ï¼æ¹æ³ä¸æ¹æ³ä¹é´ï¼æ¨¡åä¸æ¨¡åä¹é´çäº¤äºï¼ç¨åºåé¨æåºçæ¥å£ï¼æ¯å¦è´´å§ç³»ç»ï¼æç»å½æ¨¡åãåå¸æ¨¡åç­ç­ï¼é£ä½ è¦åå¸å°±å¿é¡»åç»å½ï¼è¦åå¸å°±å¾ç»å½ï¼é£ä¹è¿ä¸¤ä¸ªæ¨¡åå°±å¾æäº¤äºï¼å®å°±ä¼æåºâ¼ä¸ªæ¥â¼ï¼ä¾åé¨ç³»ç»è¿è¡è°ç¨ã</li>
<li>ç³»ç»å¯¹å¤çæ¥å£ï¼æ¯å¦ä½ è¦ä»å«çâ½¹ç«ææå¡å¨ä¸è·åèµæºæä¿¡æ¯ï¼å«äººè¯å®ä¸ä¼ææ°æ®åºå±äº«ç»ä½ ï¼ä»åªè½ç»ä½ æä¾â¼ä¸ªä»ä»¬åå¥½çæ¹æ³æ¥è·åæ°æ®ï¼ä½ å¼ç¨ä»æä¾çæ¥å£å°±è½ä½¿ç¨ä»åå¥½çâ½æ³ï¼ä»èè¾¾å°æ°æ®å±äº«çâ½¬çï¼æ¯å¦è¯´å±ä»¬ç¨çappãç½åè¿äºå®å¨è¿â¾æ°æ®å¤ççæ¶åé½æ¯éè¿æ¥â¼æ¥è¿è¡è°ç¨çã</li>
<li>æ¥å£ç±»åæå¾å¤ï¼å¦HTTPAPIæ¥å£ãRPCç­ç­ã</li>
</ul>
<h4 id="æ¥å£æµè¯-1">æ¥å£æµè¯</h4>
<h5 id="æ¦å¿µ">æ¦å¿µ</h5>
<ul>
<li>æ¥å£æµè¯æ¯æµè¯ç³»ç»ç»ä»¶é´æ¥å£çâ¼ç§æµè¯ãæ¥â¼æµè¯ä¸»è¦â½¤äºæ£æµå¤é¨ç³»ç»ä¸ç³»ç»ä¹é´ä»¥ååé¨åä¸ªå­ç³»ç»ä¹é´çäº¤äºç¹ãæµè¯çéç¹æ¯è¦æ£æ¥æ°æ®çäº¤æ¢ï¼ä¼ éåæ§å¶ç®¡çè¿ç¨ï¼ä»¥åç³»ç»é´çç¸äºé»è¾ä¾èµå³ç³»ç­ã</li>
<li>ç®èè¨ä¹ï¼æè°æ¥â¼æµè¯å°±æ¯éè¿æµè¯ä¸åæåµä¸çâ¼åä¸ä¹ç¸åºçåºåä¿¡æ¯æ¥å¤æ­æ¥å£æ¯å¦ç¬¦åææ»¡è¶³ç¸åºçåè½æ§ãå®å¨æ§è¦æ±ã</li>
</ul>
<h5 id="æ¥å£ç»æ">æ¥å£ç»æ</h5>
<ul>
<li>æ¥å£ææ¡£ç¤ºä¾ï¼<a href="https://developers.weixin.qq.com/minigame/dev/api-backend/open-api/access-token/auth.getAccessToken.html" target="_blank" rel="noopener nofollow">https://developers.weixin.qq.com/minigame/dev/api-backend/open-api/access-token/auth.getAccessToken.html</a></li>
<li>ç±æ¥å£ææ¡£å¯ç¥ï¼æ¥å£è³å°åºæè¯·æ±å°åãè¯·æ±â½æ³ãè¯·æ±åæ°ï¼â¼åååºåï¼ç»æï¼é¨åæ¥å£æè¯·æ±å¤´ header ã</li>
</ul>
<h5 id="æ¥å£æµè¯éè¦æ§">æ¥å£æµè¯éè¦æ§</h5>
<ul>
<li>å¯ä»¥åç°å¾å¤å¨é¡µé¢ä¸æä½åç°ä¸äºçbug</li>
<li>æ£æ¥ç³»ç»çå¼å¸¸å¤çè½å</li>
<li>æ£æ¥ç³»ç»çå®å¨æ§ãç¨³å®æ§</li>
<li>åç«¯éä¾¿åï¼æ¥å£æµå¥½äºï¼åç«¯ä¸ç¨å</li>
</ul>
<h5 id="å¦ä½æ§è¡æ¥å£æµè¯">å¦ä½æ§è¡æ¥å£æµè¯</h5>
<ul>
<li>å¨è¿è¡æ¥å£æµè¯åï¼è¿éè¦äºè§£ä»¥ä¸åå®¹</li>
</ul>
<ol>
<li><a href="https://www.cnblogs.com/xi-yongqi/p/19161070" target="_blank">getåpostè¯·æ±</a></li>
<li>httpç¶æç ï¼</li>
</ol>
<ul>
<li>æ¯ååºâ¼ä¸ªhttpè¯·æ±ä¹åï¼é½ä¼æâ¼ä¸ªååºï¼httpæ¬â¾ä¼æâ¼ä¸ªç¶æç ï¼æ¥æ è¯è¿ä¸ªè¯·æ±æ¯å¦æåï¼å¸¸è§çç¶æç æä»¥ä¸å ç§ï¼
<ul>
<li>2å¼å¤´çé½è¡¨ç¤ºè¿ä¸ªè¯·æ±åéæåï¼æå¸¸è§çå°±æ¯200ï¼å°±ä»£è¡¨è¿ä¸ªè¯·æ±æ¯okçï¼æå¡å¨ä¹è¿åäºã</li>
<li>3å¼å¤´çä»£è¡¨éå®åï¼å¸¸è§çæ301æ°¸ä¹éå®åï¼302ä¸´æ¶éå®åã</li>
<li>400ä»£è¡¨å®¢â¼¾ç«¯åéçè¯·æ±æè¯­æ³éè¯¯ï¼401ä»£è¡¨è®¿é®çé¡µé¢æ²¡æææï¼403è¡¨ç¤ºæ²¡ææéè®¿é®è¿ä¸ªé¡µé¢ï¼404ä»£è¡¨æ²¡æè¿ä¸ªé¡µé¢</li>
<li>5å¼å¤´çä»£è¡¨æå¡å¨æå¼å¸¸ï¼500ä»£è¡¨æå¡å¨åé¨å¼å¸¸ï¼504ä»£è¡¨æå¡å¨ç«¯è¶æ¶ï¼æ²¡è¿åç»æ</li>
</ul>
</li>
<li>æ¥å£æµè¯åä¸¤æ­¥èµ°ï¼éè¿æ¥å£è®¾è®¡ç¨ä¾+ç»åä¸å¡é»è¾æ¥è®¾è®¡ç¨ä¾</li>
</ul>
<h3 id="æ¥å£èªå¨åæµè¯">æ¥å£èªå¨åæµè¯</h3>
<h4 id="æ¦å¿µ-1">æ¦å¿µ</h4>
<ul>
<li>æ¥å£èªå¨åæ¯éè¿å¯¹æ¥å£è¿è¡æµè¯åæ¨¡æï¼ä»¥ç¡®ä¿è½¯ä»¶ç³»ç»åé¨çåä¸ªç»ä»¶è½å¤æ­£ç¡®å°ç¸äºéä¿¡åäº¤æ¢æ°æ®ãæ¥å£èªå¨åæµè¯å¯ä»¥æ¾èæâ¾¼æµè¯æçååç¡®æ§ãå ä¸ºæ¥â¼æµè¯ä¸æ³¨äºæµè¯ç³»ç»åé¨çé»è¾åæ°æ®ä¼ è¾ï¼èä¸æ¯åUIæµè¯é£æ ·å³æ³¨â½¤â¼¾çæä½åäº¤äºãåæ¶ï¼ç±äºæ¥å£æµè¯ç´æ¥éå¯¹ç³»ç»åé¨çç»æååè½ï¼å¯ä»¥æ´å®¹æå°åç°åå®ä½é®é¢ï¼åå°æµè¯ææ¬åæ¶é´ã</li>
</ul>
<h4 id="æ¥å£èªå¨åæµç¨">æ¥å£èªå¨åæµç¨</h4>
<ol>
<li>éæ±åæ</li>
</ol>
<ul>
<li>åæè¯·æ±ï¼æç¡®æ¥å£çURLãè¯·æ±æ¹æ³ï¼å¦getãpostãPUTãDELETEç­ï¼ãè¯·æ±å¤´ãè¯·æ±åæ°åè¯·æ±ä½ç­ä¿¡æ¯ã</li>
<li>åæååºï¼ç¡®å®æ¥å£è¿åçæ°æ®æ ¼å¼ãç¶æç ä»¥åå¯è½çéè¯¯ä¿¡æ¯ã</li>
</ul>
<ol start="2">
<li>æéèªå¨åæ¥å£</li>
</ol>
<ul>
<li>æ ¹æ®é¡¹ç®çæ¶é´ãäººåå®æåæ¥å£çå¤æåº¦ï¼æééåèªå¨åæµè¯çæ¥å£ã</li>
<li>ä¼åéæ©æ ¸å¿ä¸å¡æ¥å£ãé¢ç¹ä½¿ç¨çæ¥å£ä»¥åå®¹æåºéçæ¥â¼è¿è¡èªå¨åæµè¯ã
<ul>
<li>åè½å¤æåº¦ï¼ä¼åéæ©åè½å¤æãé»è¾åâ½å¤çæ¥å£è¿è¡èªå¨åæµè¯ãä¾å¦ï¼æ¶åå¤ç§æ¯ä»æ¹å¼ãå¤ç§è®¢åç¶æè½¬æ¢çè®¢åç®¡çæ¥å£ï¼â¼¿å¨æµè¯é¾ä»¥å¨é¢è¦çææåºæ¯ï¼â¾å¨åæµè¯å¯ä»¥æ´é«æå°è¿è¡æµè¯.</li>
<li>é«é£é©åè½ï¼éæ©å¯¹ä¸å¡å½±åâ¼¤ãé£é©é«çæ¥å£è¿è¡èªå¨åæµè¯ï¼ç¡®ä¿å¶ç¨³å®æ§åå¯é æ§ãä¾å¦ï¼æ¶åèµéæä½çâ½ä»æ¥å£ï¼â¼æ¦åºç°é®é¢å¯è½å¯¼è´ä¸¥éçç»æµæå¤±ï¼å æ­¤éè¦è¿è¡ååçèªå¨åæµè¯ã</li>
<li>éå¤æ§é«ï¼å¯¹äºéè¦é¢ç¹æ§è¡çæµè¯ä»»å¡ï¼å¦åå½æµè¯ä¸­çæ¥å£æµè¯ï¼èªå¨åæµè¯å¯ä»¥é¿åéå¤æå¨æµè¯çç¹çåä½æï¼æé«æµè¯æçã</li>
</ul>
</li>
</ul>
<ol start="3">
<li>è®¾è®¡èªå¨åæµè¯ç¨ä¾</li>
</ol>
<ul>
<li>å¦æå¨åè½æµè¯é¶æ®µå·²ç»è®¾è®¡äºæµè¯ç¨ä¾ï¼å¯ä»¥ç´æ¥æ¿æ¥ä½¿ç¨ã</li>
<li>æ ¹æ®æ¥å£éæ±ååè½ï¼è®¾è®¡æ­£åæµè¯ç¨ä¾ï¼æ­£å¸¸åºæ¯ï¼åååæµè¯ç¨ä¾ï¼å¼å¸¸åºæ¯ï¼ï¼åæ¬è¾¹çå¼æµè¯ãåæ°ç»åæµè¯ç­ã</li>
</ul>
<ol start="4">
<li>æ­å»ºèªå¨åæµè¯ç¯å¢</li>
</ol>
<ul>
<li>éæ©åéçç¼ç¨è¯­è¨ï¼å¦PythonãJavaç­ï¼åå¼åç¯å¢ï¼å¦PyCharmãIntelliJ IDEAç­ï¼æ¥å®ç°èªå¨åæµè¯ã</li>
<li>ä»¥Pythonä¸ºä¾ï¼å®è£å¿è¦çä¾èµåºï¼å¦requestsç¨äºåéHTTPè¯·æ±ï¼pytestç¨äºæµè¯æ¡æ¶ã</li>
</ul>
<ol start="5">
<li>è®¾è®¡èªå¨åæ§è¡æ¡æ¶</li>
</ol>
<ul>
<li>è®¾è®¡â¼ä¸ªæ¡æ¶æ¥æ§è¡æµè¯â½¤ä¾ï¼åæ¬æ¥åçæãåæ°åå¤çåç¨ä¾æ§è¡é»è¾ã</li>
</ul>
<ol start="6">
<li>ç¼åä»£ç </li>
</ol>
<ul>
<li>æ ¹æ®è®¾è®¡å¥½çæµè¯ç¨ä¾åæ¡æ¶ç¼åèªå¨åæµè¯èæ¬ã</li>
</ul>
<ol start="7">
<li>æ§è¡ç¨ä¾</li>
</ol>
<ul>
<li>ä½¿ç¨æµè¯æ¡æ¶ï¼å¦unittestãpytestï¼æ¥æ§è¡ç¼åçæµè¯ç¨ä¾ã</li>
</ul>
<ol start="8">
<li>çææµè¯æ¥å</li>
</ol>
<ul>
<li>æµè¯å®æåï¼çææµè¯æ¥åãå¯ä»¥ä½¿ç¨å·¥å·å¦HtmlTestRunneræAllureæ¥çææäºéè¯»çæ¥åã</li>
</ul>
<h3 id="èªå¨åæµè¯æ¡æ¶---pytest">èªå¨åæµè¯æ¡æ¶---pytest</h3>
<h4 id="pytestä»ç»">pytestä»ç»</h4>
<ul>
<li>pytest æ¯â¼ä¸ªéå¸¸æµè¡ä¸é«æçPythonæµè¯æ¡æ¶ï¼å®æä¾äºä¸°å¯çåè½åçµæ´»çç¨æ³ï¼ä½¿å¾ç¼ååè¿è¡æµè¯ç¨ä¾åå¾ç®åèé«æã</li>
<li><a href="https://docs.pytest.org/en/stable/getting-started.html" target="_blank" rel="noopener nofollow">pytestå®æ¹ææ¡£</a></li>
</ul>
<h4 id="pytestç¨ä¾è¿è¡è§å">pytestç¨ä¾è¿è¡è§å</h4>
<ol>
<li>æä»¶åå¿é¡»ä»¥ test_ å¼å¤´æè _test ç»å°¾</li>
<li>æµè¯ç±»å¿é¡»ä»¥ Test å¼å¤´ï¼å¹¶ä¸ä¸è½æ <strong>init</strong> æ¹æ³ã</li>
<li>æµè¯æ¹æ³å¿é¡»ä»¥ test å¼å¤´</li>
<li>Pythonç±»ä¸­ä¸å¯ä»¥æ·»å initæ¹æ³</li>
</ol>
<ul>
<li>ç±äº pytest çæµè¯æ¶éæºå¶ï¼æµè¯ç±»ä¸­ä¸å¯ä»¥å®ä¹ <strong>init</strong> æ¹æ³ã pytest éç¨èªå¨åç°æºå¶æ¥æ¶éæµè¯ç¨ä¾ãå®ä¼èªå¨å®ä¾åæµè¯ç±»å¹¶è°ç¨å¶ææä»¥ test ç»å°¾çæ¹æ³ä½ä¸ºæµè¯ç¨ä¾ãå¦ææµè¯ç±»ä¸­å®ä¹äº <strong>init</strong> æ¹æ³ï¼é£ä¹å½ pytest å®ä¾åè¯¥ç±»æ¶ï¼ <strong>init</strong> æ¹æ³ä¼è¢«è°â½¤ï¼è¿å¯è½ä¼æ©çæµè¯ç±»çå®éæµè¯é»è¾ï¼å¹¶å¼â¼é¢å¤çå¯ä½ç¨ï¼å½±åæµè¯ç»æçåç¡®æ§ã</li>
</ul>
<h4 id="pytestå½ä»¤åæ°">pytestå½ä»¤åæ°</h4>
<ul>
<li>pytest æä¾äºä¸°å¯çå½ä»¤è¡éé¡¹æ¥æ§å¶æµè¯çæ§è¡ãä»¥ä¸æ¯â¼äºå¸¸ç¨çpytest å½ä»¤è¡åæ°åå¶ä½¿ç¨è¯´æã</li>
</ul>
<table>
<thead>
<tr>
<th>å½ä»¤</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>pytest</td>
<td>å¨å½åç®å½åå¶å­ç®å½ä¸­æç´¢å¹¶è¿è¡æµè¯ã</td>
</tr>
<tr>
<td>pytest -v</td>
<td>å¢å è¾åºçè¯¦ç»ç¨åº¦</td>
</tr>
<tr>
<td>pytest -s</td>
<td>æ¾ç¤ºæµè¯ä¸­çprintè¯­å¥</td>
</tr>
<tr>
<td>pytest test_module.py</td>
<td>è¿è¡æå®çæµè¯æ¨¡åã</td>
</tr>
<tr>
<td>pytest test_dir/</td>
<td>è¿è¡æå®ç®å½ä¸çæææµè¯ã</td>
</tr>
<tr>
<td>pytest -k <keyword></keyword></td>
<td>åªè¿è¡æµè¯ååå«æå®å³é®å­çæµè¯ã</td>
</tr>
<tr>
<td>pytest -m <marker></marker></td>
<td>åªè¿è¡æ è®°ä¸ºæå®æ è®°çæµè¯ã</td>
</tr>
<tr>
<td>pytest -q</td>
<td>åå°è¾åºçè¯¦ç»ç¨åº¦ã</td>
</tr>
</tbody>
</table>
<h4 id="pytestéç½®æä»¶">pytestéç½®æä»¶</h4>
<ul>
<li>å¨å½åé¡¹ç®ä¸åå»º pytest.ini æä»¶ï¼è¯¥æä»¶ä¸º pytest çéç½®æä»¶ï¼ä»¥ä¸ä¸ºå¸¸è§çéç½®éé¡¹ï¼</li>
</ul>
<table>
<thead>
<tr>
<th>åæ°</th>
<th>è§£é</th>
</tr>
</thead>
<tbody>
<tr>
<td>addopts</td>
<td>æå®å¨å½ä»¤è¡ä¸­é»è®¤åå«çéé¡¹ã</td>
</tr>
<tr>
<td>testpaths</td>
<td>æå®æç´¢æµè¯çç®å½ã</td>
</tr>
<tr>
<td>python_files</td>
<td>æå®åç°æµè¯æ¨¡åæ¶ä½¿ç¨çæä»¶å¹éæ¨¡å¼ã</td>
</tr>
<tr>
<td>python_classes</td>
<td>æå®åç°æµè¯ç±»æ¶ä½¿ç¨çç±»ååç¼ææ¨¡å¼ã</td>
</tr>
<tr>
<td>python_functions</td>
<td>æå®åç°æµè¯å½æ°åæ¹æ³æ¶ä½¿ç¨çå½æ°ååç¼ææ¨¡å¼ã</td>
</tr>
<tr>
<td>norecursedirs</td>
<td>æå®å¨æç´¢æµè¯æ¶åºè¯¥é¿åéå½è¿å¥çç®å½æ¨¡å¼ã</td>
</tr>
<tr>
<td>markers</td>
<td>å®ä¹æµè¯æ è®°ï¼ç¨äºæ è®°æµè¯ç¨ä¾ã</td>
</tr>
</tbody>
</table>
<ul>
<li>ç¤ºä¾ï¼è¯¦ç»è¾åº cases åä¸æä»¶åä»¥ test_ å¼å¤´ä¸æ¹æ³åä»¥ Test å¼å¤´çææç¨ä¾</li>
</ul>
<pre><code class="language-.ini">[pytest]
addopts = -vs
testpaths = ./cases
python_files = test_*.py
python_classes = Test*
</code></pre>
<ul>
<li>éç½®å¥½ pytest.ini æä»¶åï¼å½ä»¤è¡æ§è¡ pytest å½ä»¤å³å¯ï¼æ éåé¢å¤æå®å¶ä»åæ°</li>
</ul>
<h4 id="ååç½®">ååç½®</h4>
<ul>
<li>å¨æµè¯æ¡æ¶ä¸­ï¼ååç½®æ¯æå¨æ§è¡æµè¯ç¨ä¾ååæµè¯ç¨ä¾åæ§è¡â¼äºé¢å¤çæä½ï¼è¿äºæä½å¯ä»¥ç¨äºè®¾ç½®æµè¯ç¯å¢ãåå¤æµè¯æ°æ®ç­ï¼ä»¥ç¡®ä¿æµè¯çå¯é æ§</li>
<li>pytest æ¡æ¶æä¾ä¸ç§æ¹æ³åååç½®çæä½ï¼
<ul>
<li>setup_method å teardown_method ï¼è¿ä¸¤ä¸ªæ¹æ³ç¨äºç±»ä¸­çæ¯ä¸ªæµè¯æ¹æ³çåç½®ååç½®æä½ã</li>
<li>setup_class å teardown_class ï¼è¿ä¸¤ä¸ªæ¹æ³ç¨äºæ´ä¸ªæµè¯ç±»çåç½®ååç½®æä½ã</li>
<li>fixture ï¼è¿æ¯ pytest æ¨èçæ¹å¼æ¥å®ç°æµè¯ç¨ä¾çåç½®ååç½®æä½ã fixture æä¾äºæ´çµæ´»çæ§å¶åæ´å¼ºå¤§çåè½ã</li>
</ul>
</li>
</ul>
<h4 id="åæ°å">åæ°å</h4>
<ul>
<li>åæ°åè®¾è®¡æ¯èªå¨åè®¾è®¡ä¸­çâ¼ä¸ªéè¦ç»æé¨åï¼å®éè¿å®ä¹è®¾è®¡åæ°åè§åï¼ä½¿å¾è®¾è®¡è¿ç¨æ´å çµæ´»åå¯æ§ãpytestä¸­åç½®ç pytest.mark.parametrize è£é¥°å¨åè®¸å¯¹æµè¯å½æ°çåæ°è¿è¡åæ°åã</li>
<li>å¨ç¨ä¾ä¸ä½¿ç¨åæ°å</li>
</ul>
<pre><code class="language-python">import pytest
@pytest.mark.parametrize("test_input,expected", [("3+5", 8), ("2+4", 6), 
("6*9", 42)])
def test_eval(test_input, expected):
 assert eval(test_input) == expected
</code></pre>
<ul>
<li>@parametrize è£é¥°å¨å®ä¹äºä¸ä¸ªä¸åç (test_input,expected) åç»ï¼ä»¥ä¾¿test_eval å½æ°å°ä¾æ¬¡ä½¿â½¤å®ä»¬è¿è¡ä¸æ¬¡ã</li>
<li>å¨ç±»ä¸ä½¿ç¨åæ°å</li>
</ul>
<pre><code class="language-python">import pytest
@pytest.mark.parametrize("n,expected", [(1, 2), (3, 4)])
class TestClass:
 def test_simple_case(self, n, expected):
 assert n + 1 == expected
 def test_weird_simple_case(self, n, expected):
 assert (n * 1) + 1 == expected
</code></pre>
<ul>
<li>è¦å¯¹æ¨¡åä¸­çæææµè¯è¿è¡åæ°åï¼å¯ä»¥å° pytestmark å¨å±åéèµå¼</li>
</ul>
<pre><code class="language-python">import pytest
pytestmark = pytest.mark.parametrize("n,expected", [(1, 2), (3, 4)])
class TestClass:
 def test_simple_case(self, n, expected):
 assert n + 1 == expected
 def test_weird_simple_case(self, n, expected):
 assert (n * 1) + 1 == expected
</code></pre>
<p><strong>é¤äºä½¿ç¨ @parametrize æ·»å åæ°åå¤ï¼ pytest.fixture() åè®¸å¯¹ fixture å½æ°è¿è¡åæ°åã</strong></p>
<ul>
<li>èªå®ä¹åæ°åæ°æ®æº</li>
</ul>
<pre><code class="language-python">def data_provider():
 return ["a", "b"]
# å®ä¹â¼ä¸ªæµè¯å½æ°ï¼å®ä¾èµäºä¸â¾¯å½æ°çè¿åå¼ 
@pytest.mark.parametrize("data", data_provider())
def test_data(data):
 assert data != None
 print(f"Testing with data provider: {data}")
</code></pre>


</div>
<div class="clear"></div>

		</div>
		<div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-18 23:43">2026-02-18 23:43</span>&nbsp;
<a href="https://www.cnblogs.com/xi-yongqi">æä¼æ¿é£å»</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19623710);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19623710', targetLink: 'https://www.cnblogs.com/xi-yongqi/p/19623710', title: 'æ¥å£æµè¯åºç¡æ¦å¿µ' })">ä¸¾æ¥</a>
</div>
	 ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ AI å­¦ä¹ ç¬è®°ï¼Agent çåºç¡åºç¨ ]]></title>
    <link>https://www.cnblogs.com/owlman/p/19623216</link>
    <guid>3ab4031921348db14bb19443c10ebff8</guid>
    <description>
    <![CDATA[ 
        <h2 class="post-title">
            <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/owlman/p/19623216" title="åå¸äº 2026-02-18 16:09">
    <span role="heading" aria-level="2">AI å­¦ä¹ ç¬è®°ï¼Agent çåºç¡åºç¨</span>
    

</a>

        </h2>
        <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<blockquote>
<p>[!NOTE] ç¬è®°è¯´æ</p>
<p>è¿ç¯ç¬è®°å¯¹åºçæ¯ã[[å³äº AI çå­¦ä¹ è·¯çº¿å¾]]ãä¸æä¸­æè§åçç¬¬åä¸ªå­¦ä¹ é¶æ®µãå¶ä¸­è®°å½äºæå­¦ä¹  AI Agent çå·¥ä½åçï¼å¹¶å°å¶åºç¨äºå®éå·¥ä½åºæ¯çå¨è¿ç¨ï¼ä»¥åå¨è¯¥è¿ç¨ä¸­æè·å¾çå¿å¾ä½ä¼ãåæ ·çï¼è¿äºåå®¹ä¹å°æä¸ºæ AI ç³»åç¬è®°çä¸é¨åï¼è¢«å­å¨å¨æ¬äºº Github ä¸ç<a href="https://github.com/owlman/CS_StudyNotes" target="_blank" rel="noopener nofollow">è®¡ç®æºå­¦ä¹ ç¬è®°åº</a>ä¸­ï¼å¹¶äºä»¥é¿æç»´æ¤ã</p>
</blockquote>
<h2 id="ai-agent-ç®ä»">AI Agent ç®ä»</h2>
<p>å¨çè§£äº LLM å¨çäº§ç¯å¢ä¸­ææ®æ¼çè§è²ä¹åï¼åå­¦èä»¬æ¥ä¸æ¥è¦æèçé®é¢æ¯ï¼å¦ä½è®©å®åä¸å°èªå·±çå®éå·¥ä½ä¸­ï¼å°ç®åä¸ºæ­¢ï¼æªè³ 2026 å¹´ 2 æï¼ï¼è¿ä¸ªé®é¢æå·å¯è¡æ§çè§£å³æ¹æ¡æ¯ï¼æå»ºå¹¶ä½¿ç¨ AI Agentã</p>
<h3 id="ä¸ºä»ä¹éè¦-ai-agent">ä¸ºä»ä¹éè¦ AI Agent</h3>
<p>å¨æ©æï¼å¤§å¤æ°ç¨æ·æ¯éè¿ Web ç«¯æç§»å¨ç«¯çå³æ¶éä¿¡åºç¨ï¼ä¸»è¦ä»¥ææ¬èå¤©çæ¹å¼æ¥ä½¿ç¨ LLM çï¼ä¾å¦ ChatGPTãè±åç­ï¼ãè¿ç±»åºç¨æ¬è´¨ä¸æ¯åºäº HTTP API æå»ºçäººæºäº¤äºçé¢ï¼å¶ä¸»è¦äº¤äºæ¨¡å¼æ¯âè¾å¥ææ¬âçæææ¬âçå¾è¿è¿ç¨ãæä»¬ä¹åå¨ã[[LLM çé¨ç½²ä¸æµè¯]]ãä¸æä¸­åºäº PyTest æ¡æ¶ç¼åçæµè¯ç¨ä¾ï¼å®éä¸æ¨¡æçå°±æ¯è¿ç§äº¤äºæ¨¡å¼ã</p>
<p>å°½ç®¡ï¼è¿ç±»åºç¨æå¤§å°éä½äº LLM çä½¿ç¨é¨æ§ï¼ä½¿å¶æä¸ºäºä¸ç§è½æ åæ®éç¨æ·çæºè½é®ç­å·¥å·ï¼ä½ AI æè½å¸¦æ¥ççäº§åä¹å¨å¾å¤§ç¨åº¦ä¸è¢«å±éå¨äºè¿ç§å³æ¶éä¿¡å¼çäº¤äºæ¨¡å¼ä¸­ãå ä¸ºå¨è¿ç§äº¤äºæ¨¡å¼ä¸ï¼LLM åªè½æ ¹æ®ç¨æ·å½åçè¾å¥æ¥çæææ¬ç»æï¼æ æ³ä¸»å¨è®¿é®æ¬å°ç¯å¢ãè°ç¨ç³»ç»èµæºææ§è¡å®éä»»å¡ãæ´éè¦çæ¯ï¼LLM å¨è¿ç§æ¨¡å¼ä¸å¹¶ä¸å¤äºä¸ä¸ªæç»­è¿è¡çæ§å¶ç»æä¹ä¸­ï¼å®åªå¨æ¶å°è¯·æ±æ¶ååºä¸æ¬¡æ§ååºï¼æ æ³è´è´£å·ä½çå·¥ä½æµç¨ä¸ç¶æç®¡çã</p>
<p>è¯æ³ä¸ä¸ï¼å¦æ LLM å·²ç»å·å¤äºå¤æçä»»å¡è§åä¸æ§è¡è½åï¼æä»¬å´æå®éå¶å¨èå¤©çªå£ä¸­ï¼è¿å²ä¸æ¯å¤ªæµªè´¹äºï¼æ­£æ¯ä¸ºäºé¿åè¿ç§æµªè´¹ï¼å¹¶èµäº LLM å¨ç¹å®ç¯å¢ä¸­âæ§è¡æä½âçè½åï¼AI çç ç©¶èä»¬éæ°å®¡è§äº AI Agent è¿ä¸å¨ 20 ä¸çºª 80-90 å¹´ä»£å°±å·²ç»å½¢æä½ç³»çæ¦å¿µï¼å¹¶å¨å·¥ç¨å®è·µé¢åç»äºå®å¨æ°çå®ç°å½¢å¼ã</p>
<p>å³äº AI Agent è¿ä¸ªæ¦å¿µï¼è¯»èå¯ä»¥åèæä¹åå¨ã[[å³äº AI çå­¦ä¹ è·¯çº¿å¾]]ãä¸­æ¨èçãäººå·¥æºè½ï¼ç°ä»£æ¹æ³ãä¸ä¹¦ç»åºçå®ä¹ï¼åæå¦ä¸ï¼</p>
<blockquote>
<p>An agent is anything that can perceive its environment through sensors and act upon that environment through actuators.</p>
<p>ç¿»è¯è¿æ¥å°±æ¯ï¼</p>
<p>ä»»ä½è½å¤éè¿ä¼ æå¨æç¥ç¯å¢ï¼å¹¶éè¿æ§è¡å¨å¯¹ç¯å¢äº§çå½±åçå®ä½ï¼é½å¯ä»¥ç§°ä¸º Agentã</p>
</blockquote>
<p>è¿ä¸ªå®ä¹æä¸ºäºåæ¥ææ AI Agent åºç¨ççè®ºåºç¡ãç±æ­¤ä¹å¯ä»¥çåºï¼AI Agent çæ ¸å¿åè½å¹¶ä¸æ¯æå LLM æ¬èº«çæºè½æ°´å¹³ï¼èæ¯èµäºå®ä¸å¤é¨ç³»ç»äº¤äºçè½åï¼ä½¿å¶è½å¤åä¸å°çå®çå·¥ä½æµç¨ä¹ä¸­ãä»æ¬è´¨ä¸æ¥è¯´ï¼è¿å¶å®æ¯ AI åºç¨å¨å®¢æ·ç«¯æ¹é¢çä¸æ¬¡è§è²è½¬åï¼å®ç°å¨ä»åçº¯çç­é¢å·¥å·è¢«è½¬åæäºä¸ä¸ªå¯ä»¥åä¸ä»»å¡æ§è¡çç³»ç»ç»ä»¶ãå¨ç¹å®çåºç¨åºæ¯ä¸­ï¼è¿ç§æ¶æä¸çè½¬åä¸ºå·¥ä½æµç¨çèªå¨åæä¾äºå¯è¡çå·¥ç¨è·¯å¾ã</p>
<h3 id="ai-agent-çå·¥ä½åç">AI Agent çå·¥ä½åç</h3>
<p>ä¸é¢ï¼è®©æä»¬æ¥äºè§£ä¸ä¸ AI Agent å·ä½æ¯æä¹å·¥ä½çãå¨ä¼ ç»èå¤©å¼ç AI åºç¨ä¸­ï¼æä»¬å¯ä»¥å°å¶åºæ¬çæ§è¡æ¨¡å¼ç®åæ¦æ¬ä¸ºï¼</p>
<blockquote>
<p>ç¨æ·è¾å¥ â æ¨¡åæ¨ç â è¾åºç»æ â ç»æ</p>
</blockquote>
<p>è¿ç§æ§è¡æ¨¡å¼æ¬è´¨ä¸æ¯ä¸æ¬¡æ§çè¯·æ±âååºï¼request-responseï¼ç»æãå³å¨è¿ç§æ§è¡æ¨¡å¼ä¸ï¼LLM ä¼å¨æ¥æ¶å°ç¨æ·è¾å¥åçæææ¬ï¼ç¶åå°±ç«å³éåºå½åå·¥ä½æµç¨ï¼ä¸ååä¸åç»­ç¶æç®¡çäºãAI Agent ä¸è¿ç±»åºç¨çæ ¸å¿å·®å¼å°±å¨äºï¼å®å¨æ§è¡æ¨¡å¼ä¸­å¼å¥äºä¸ä¸ªå¯æç»­è¿è¡çæ§å¶å¾ªç¯ï¼control loopï¼ãè¿ç§å¾ªç¯ç»æå° LLM ä»è¢«å¨æ¥æ¶ç¨æ·è¾å¥çææ¬çæå¨ï¼è½¬åæäºç¨äºé©±å¨æ´ä¸ªç¨åºæ§è¡ç»æçå³ç­ç»ä»¶ãæ¢è¨ä¹ï¼Agent çå­å¨å° AI åºç¨çåºæ¬æ§è¡æ¨¡å¼ä»âè¯·æ±âååºâè½¬åæäºä¸é¢è¿æ ·ä¸ä¸ªâæç¥âå³ç­âæ§è¡âçå¾ªç¯ç»æï¼</p>
<blockquote>
<p>æç¥ç¯å¢ â çæå³ç­ â æ§è¡å¨ä½ â æ´æ°ç¯å¢ç¶æ â åæ¬¡æç¥</p>
</blockquote>
<p>è¿ä¸ªå¾ªç¯ç»æä¼æç»­è¿è¡ä¸å»ï¼ç´å°ä»»å¡å®æææ»¡è¶³ç»æ­¢æ¡ä»¶ãä»è¯¥æ§è¡æ¨¡å¼å¯ä»¥çåºï¼ä¸ä¸ªå¸åç AI Agent åºç¨éå¸¸åå«ä»¥ä¸å ä¸ªæ ¸å¿ç»ä»¶ï¼</p>
<ul>
<li><strong>LLM</strong>ï¼è¯¥ç»ä»¶è´è´£çè§£å½åä»»å¡ç®æ ãåæä¸ä¸æç¶æå¹¶çæä¸ä¸æ­¥è¡å¨å³ç­ï¼ä¸è´è´£ç´æ¥æ§è¡å¤é¨æä½ï¼</li>
<li><strong>å·¥å·æ¥å£</strong>ï¼è¯¥ç»ä»¶è´è´£å° LLM çæçç»æåæä»¤è½¬æ¢ä¸ºå®éå¯æ§è¡çæä½ï¼ä¾å¦ï¼è°ç¨ APIãè®¿é®æ°æ®åºãè¯»åæä»¶ãæ§è¡ç³»ç»å½ä»¤ãè§¦åå¤é¨æå¡ç­ãå®ä»¬éå¸¸ç±å¼åèå®ä¹ï¼å¹¶éè¿å½æ°è°ç¨ææä»¶æºå¶æ´é²ç»æ¨¡åï¼</li>
<li><strong>ç¶æç®¡ç</strong>ï¼è¯¥ç»ä»¶è´è´£ç»´æ¤ä»»å¡çä¸­é´ç¶æï¼ä¾å¦ï¼å½åä»»å¡è¿åº¦ãå·²æ§è¡æ­¥éª¤ãå¤é¨ç¯å¢ååãåå²å³ç­è®°å½ç­ãè¿äºç¶æéå¸¸ä¼è¢«å­å¨å¨åå­åéãæ°æ®åºãåéå­å¨ãæä»¶ç³»ç»ç­ä»è´¨ä¸­ï¼å¦æç¼ºä¹ææçç¶æç®¡çæºå¶ï¼æä»¬å°±é¾ä»¥æå»ºä¸ä¸ªçæ­£ç Agent åºç¨ï¼</li>
<li><strong>æ§å¶å¨</strong>ï¼è¯¥ç»ä»¶è´è´£é©±å¨å¾ªç¯ãå¤æ­æ¯å¦ç»§ç»­æ§è¡ãè§£ææ¨¡åè¾åºãè°ç¨å¯¹åºå·¥å·ãå¤çå¼å¸¸ä¸å¤±è´¥éè¯ãä»æ¶æè§åº¦æ¥çï¼æ§å¶å¨å¯è¢«è§ä¸º Agent ç³»ç»çâéª¨æ¶âï¼è LLM åªæ¯å¶ä¸­çå³ç­æ¨¡åã</li>
</ul>
<p>åºäºä»¥ä¸æ ¸å¿ç»ä»¶ï¼æä»¬å°±å¯ä»¥ç®åå°å½çº³åºä¸ä¸ª Agent åºç¨çå·¥ä½æµç¨ï¼å¶ä¸»è¦æ­¥éª¤å¦ä¸ï¼</p>
<ol>
<li>æ¥æ¶ä»»å¡ç®æ </li>
<li>å°ç®æ ä¸å½åç¶æè¾å¥ LLM</li>
<li>LLM è¾åºä¸ä¸æ­¥è¡å¨è®¡åï¼éå¸¸ä¸ºç»æåæ ¼å¼ï¼</li>
<li>æ§å¶å¨è§£æè¾åº</li>
<li>è°ç¨ç¸åºå·¥å·æ§è¡</li>
<li>æ´æ°ç¶æ</li>
<li>å¤æ­æ¯å¦å®æä»»å¡</li>
<li>è¥æªå®æï¼åè¿å¥ä¸ä¸è½®å¾ªç¯</li>
</ol>
<p>ä»å·¥ç¨è§åº¦æ¥çï¼AI Agent æ¯ä¸ç§æ°çç³»ç»æ¶ææ¨¡å¼ï¼å®éè¿æç»­è¿è¡çæ§å¶å¾ªç¯ï¼ä½¿æ¨¡åè½å¤åä¸çå®ä»»å¡çæ§è¡è¿ç¨ï¼èä¸ä»ä»æ¯çæææ¬ç»æã</p>
<h2 id="ai-agent-çä½¿ç¨æ¹æ³">AI Agent çä½¿ç¨æ¹æ³</h2>
<p>å¨äºè§£äºä½¿ç¨ AI Agent çå¿è¦æ§åå¶å·¥ä½åçä¹åï¼æ¥ä¸æ¥å°±å¯ä»¥æ­£å¼å¼å§ç ç©¶å¦ä½å°å®è¿ç¨å°èªå·±çæ¥å¸¸å·¥ä½ä¸­äºãèå½æä»¬è¦è®¨è®º AI Agent å¨å®éå·¥ä½ä¸­çä½¿ç¨æ¹æ³æ¶ï¼é¦åéè¦åç­çé®é¢æ¯âå®è¿è¡å¨åªéãç±è°æ§å¶ãæ¿æä»ä¹è´£ä»»âãä¸åçè¿è¡å½¢æï¼å³å®äºå®å¨å·¥ç¨ç³»ç»ä¸­çè§è²è¾¹çãä¸é¢ï¼è®©æä»¬æç§"è¿è¡å¨åªé"è¿ä¸ªç»´åº¦åä¸ç±»æ¥ä»ç» AI Agent çä½¿ç¨æ¹æ³ï¼ä»¥åå®ä»¬å¨è¿äºåºç¨åºæ¯ä¸­ææ¿æçä»»å¡è§è²ã</p>
<h3 id="å½ä»¤è¡å·¥å·å-agent">å½ä»¤è¡å·¥å·å Agent</h3>
<p>å¯¹äºå¤§å¤æ°å¼åèèè¨ï¼ä»¥å½ä»¤è¡å·¥å·çå½¢å¼ä½¿ç¨ AI Agent æ¯ä¸ç§æ´ç¬¦åå·¥ç¨ç´è§çæ¹å¼ãå®è¿è¡å¨çæçç»ç«¯ç¯å¢ä¸­ï¼å¯ä»¥ç´æ¥è®¿é®æä»¶ç³»ç»ä¸ç³»ç»å½ä»¤ï¼å æ­¤çèµ·æ¥ç±»ä¼¼äºèªå¨åèæ¬ãå½ç¶äºï¼ä¸ä¼ ç»èæ¬ä¸åçæ¯ï¼AI Agent çåé¨å³ç­è·¯å¾å¹¶éé¢åç¼åï¼èæ¯ç± LLM å¨å¾ªç¯ç»æä¸­å¨æçæãè¿ç±» AI Agent åºç¨çå¸åä»£è¡¨æ¯ <a href="https://github.com/anthropics/claude-code" target="_blank" rel="noopener nofollow">Claude Code</a>ï¼ç®ååç±»çä¸»æµåºç¨è¿åæ¬ <a href="https://github.com/anomalyco/opencode" target="_blank" rel="noopener nofollow">OpenCode</a>ã<a href="https://github.com/openai/codex" target="_blank" rel="noopener nofollow">Codex CLI</a>ã<a href="https://github.com/google-gemini/gemini-cli" target="_blank" rel="noopener nofollow">Gemini CLI</a>ã<a href="https://github.com/iflow-ai/iflow-cli" target="_blank" rel="noopener nofollow">iFlow CLI</a> ç­ãä¸é¢ï¼æä»¬é¦åè¦åçå°±æ¯ï¼åå°è¿äºå·¥å·å®è£å°èªå·±æå¨çæä½ç³»ç»ä¸­ã</p>
<h4 id="å®è£ä¸éç½®">å®è£ä¸éç½®</h4>
<p>å½ä»¤è¡å·¥å·å Agent çå®è£æ¹å¼å¶å®æ¯éå¸¸ç®åçãå ä¸ºï¼è½ç¶å®ä»¬åèªéå¯¹ MacOS/Linux/Windows ç³»ç»æä¾äºä¸åç bash/powershell å®è£èæ¬ï¼æèåºäº homeberw/pacman/scoop ç­éå¯¹ä¸åæä½ç³»ç»å¹³å°çåç®¡çå¨å®è£å½ä»¤ï¼ä½åºæ¬é½æä¾äºåºäº NPM è¿ä¸åç®¡çå¨çè·¨å¹³å°å®è£æ¹å¼ãæä»¥ï¼è¯»èå¨å¤§å¤æ°æåµä¸é½å¯ä»¥æç§ä»¥ä¸æ­¥éª¤æ¥å®è£å¹¶ä½¿ç¨è¿äºå·¥å·ï¼</p>
<ol>
<li>
<p>ç¡®ä¿èªå·±æå¨çæä½ç³»ç»ä¸­å·²ç»å®è£äºçæ¬å¨ 20.0.0 ä¹ä¸ç Node.js è¿è¡ç¯å¢ï¼å¶ä¸­èªå¸¦äº NPM åç®¡çå¨ï¼</p>
</li>
<li>
<p>å¨ç®¡çåæéä¸æ§è¡<code>npm install -g &lt;agent-name&gt;@&lt;version&gt;</code>å½ä»¤ï¼å¨è¿éï¼<code>&lt;agent-name&gt;</code>å¯ä»¥éè¿æ¥è¯¢ç¸å³å·¥å·çå®æ¹ç½ç«æ¥è·å¾ï¼è<code>&lt;version&gt;</code>åé¤äºå¯ä»¥æ¯æä»¬å¨å·¥å·å®ç½ä¸­æ¥å°çå·ä½çæ¬å·ä¹å¤ï¼ä¹å¯ä»¥ç¨<code>latest</code>æ¥è¡¨ç¤ºææ°çæ¬ãä¾å¦ï¼å¦ææä»¬éè¦å®è£ææ°çæ¬ç OpenCodeï¼å°±åªéè¦å¨å½ä»¤è¡ç»ç«¯ä¸­ä½¿ç¨ç®¡çåæéæ§è¡<code>npm install -g opencode@latest</code>å½ä»¤å³å¯ã</p>
</li>
</ol>
<p>å¨å®è£å®æä¹åï¼æä»¬å°±å¯ä»¥ç¨ CLI å TUI ä¸¤ç§æ¹å¼æ¥ä½¿ç¨è¿ç§å½ä»¤è¡å·¥å·åç Agent äºãå¶ä¸­ï¼TUI çæ¹å¼å·²ç»è¢«å¤§å®¶æçç¥ï¼å®å®éä¸å°±æ¯ä¸ä¸ªåºäºå½ä»¤è¡çé¢çäº¤äºå¼ç¨åºï¼è¿ä½æ¹å¼ç±»ä¼¼äº Python Shell æ Node.js REPLï¼æ¥æå±äºèªå·±çç¬ç«çº¿ç¨ãä¾å¦å¨å®è£å® OpenCode ä¹åï¼æä»¬åªéè¦ç´æ¥å¨å½ä»¤è¡ç»ç«¯ä¸­è¾å¥<code>opencode</code>å½ä»¤ï¼å¦ææ³å»¶ç»­ä¹åä¸ OpenCode çä¼è¯ï¼è¿å¨è¯¥å½ä»¤åé¢å ä¸ä¸ä¸ª<code>--continue</code>æ<code>-c</code>åæ°ï¼ï¼å°±å¯ä»¥å¯å¨å®ç TUI çé¢äºï¼å·ä½å¦å¾ 1 æç¤ºï¼</p>

<p><img alt="img" loading="lazy" data-src="https://img2024.cnblogs.com/blog/691082/202602/691082-20260218160322816-1525296787.png" class="lazyload"></p>
<p><strong>å¾ 1</strong>ï¼OpenCode TUI çé¢</p>
<p>å¨åæ¬¡è¿å¥ä¸æ¬¡çé¢æ¶ï¼æä»¬å¯ä»¥å¯¹èªå·±ä½¿ç¨ç AI Agent è¿è¡ä¸äºåºæ¬çéç½®ï¼è¿äºå·¥å·çéç½®æ¹å¼åºæ¬ä¸æ¯å¤§åå°å¼çãä¸è¬æ¥è¯´ï¼æä»¬ä¼åä½¿ç¨<code>/model</code>å½ä»¤è®¾ç½®ä»¥ä¸èªå·±é»è®¤è¦ä½¿ç¨ç LLMï¼ä¾å¦æ¨å¨å¾ 2 ä¸­æçå°çå°±æ¯ OpenCode ç LLM éæ©çé¢ï¼</p>

<p><img alt="img" loading="lazy" data-src="https://img2024.cnblogs.com/blog/691082/202602/691082-20260218160253302-210062309.png" class="lazyload"></p>
<p><strong>å¾ 2</strong>ï¼OpenCode LLM éæ©çé¢</p>
<p>éå¸¸æåµä¸ï¼å¨éæ© LLM ä¹åï¼è¿äº AI Agent ä¼è¦æ±æä»¬æä¾ä¸ä¸ª API Keyï¼ç¨äºå¨è°ç¨ LLM æ¶è¿è¡èº«ä»½éªè¯ãè¿ä¸ª API key å¯ä»¥éè¿ç»å½æä»¬å¨ç¸åº LLM å®ç½çä¸ªäººè´¦æ·æ¥è·å¾ãä¾å¦ï¼æå¨è¿ééæ©ä½¿ç¨çæ¯æºæ®ç GLM æ¨¡åï¼å°±éè¦ç»å½å°<a href="https://bigmodel.cn/" target="_blank" rel="noopener nofollow">æºæ® AI çå®ç½</a>ï¼å¹¶ä¸º OpenCode åå»ºä¸ä¸ªä¸å±ç API Keyï¼å¦å¾ 3 æç¤ºï¼</p>

<p><img alt="img" loading="lazy" data-src="https://img2024.cnblogs.com/blog/691082/202602/691082-20260218160222119-632981045.png" class="lazyload"></p>
<p><strong>å¾ 3</strong>ï¼åå»ºæºæ® AI ç API Key</p>
<p>æ¥ä¸æ¥ï¼æä»¬å°±åªéè¦å°ä¸è¿° API Key å¤å¶å° OpenCode æç¤ºè¾å¥ key çä½ç½®ï¼å¹¶éæ©å·ä½è¦ä½¿ç¨ç GLM çæ¬å¹¶ç¡®è®¤å³å¯ãå®æè¿äºéç½®ä¹åï¼æä»¬å°±å¯ä»¥éè¿ä¸ä¸ª AI Agent ççâHello Worldâæµè¯æ¥ç¡®è®¤å®æ¯å¦å·²ç»å¯ä»¥æ­£å¸¸å·¥ä½äºï¼å¦å¾ 4 æç¤ºï¼</p>

<p><img alt="img" loading="lazy" data-src="https://img2024.cnblogs.com/blog/691082/202602/691082-20260218160150344-1916655373.png" class="lazyload"></p>
<p><strong>å¾ 4</strong>ï¼OpenCode Hello World æµè¯</p>
<p>å¦æ AI Agent è¿åäºç±»ä¼¼ä¸é¢è¿æ ·çä¿¡æ¯ï¼å°±æå³çæä»¬å·²ç»å¯ä»¥å¼å§ä½¿ç¨å®è¿è¡å®éçå·¥ä½äºãé¤æ­¤ä¹å¤ï¼å¦ææä»¬è¿æ³å¯¹ AI Agent è¿è¡ä¸äºæ´å¤æçéç½®ï¼ä¾å¦å¼ºå¶å®åªç¨ä¸­ææ¥æ¾ç¤ºæèè¿ç¨ï¼ä»¥ååç­çåå®¹ï¼ä¹å¯ä»¥éæ©å¨èªå·±çç¨æ·ç®å½ä¸ä¸ºå¶åå»ºä¸ä¸ªå¨å±çæç¤ºè¯æä»¶ãä»¥ OpenCode ä¸ºä¾ï¼å¶å·ä½æ­¥éª¤å¦ä¸ï¼</p>
<ol>
<li>
<p>æ ¹æ®èªå·±æå¨çæä½ç³»ç»ä¸º OpenCode åå»ºä¸ä¸ªå¨å±éç½®ç®å½ãå¨é»è®¤æåµä¸ï¼è¯¥ç®å½çè·¯å¾åºè¯¥ä¸º<code>~/.config/opencode</code>ï¼å¶ä¸­<code>~</code>è¡¨ç¤ºæä»¬çç¨æ·ç®å½ã</p>
</li>
<li>
<p>å¨è¯¥ç®å½ä¸åå»ºä¸ä¸ªåä¸º<code>AGENTS.md</code>çæç¤ºè¯æä»¶ï¼å¹¶å¨å¶ä¸­è¾å¥ä»¥ä¸åå®¹ï¼</p>
<pre><code class="language-markdown"># Agent éç½®

## è¯­è¨è®¾ç½®
- **é»è®¤è¯­è¨**: ä¸­æ
- **å¼ºå¶ä½¿ç¨ä¸­æ**: æ¯

## æä»¤
- ææåç­å¿é¡»ä½¿ç¨ä¸­æ
- æææèè¿ç¨ä¹æ¾ç¤ºä¸­æ
- é¤éç¨æ·æç¡®è¦æ±ä½¿ç¨å¶ä»è¯­è¨æé®ï¼å¦åä¿æä¸­æåç­
</code></pre>
</li>
</ol>
<p>å½ç¶äºï¼æä»¬æ´å¤æ¶åä¼å¸æä¸è¿°æç¤ºè¯æä»¶åªéå¯¹å½åé¡¹ç®ææï¼è¿å¯ä»¥è¿è¡æ´å¤ä¸ªæ§åçéç½®ãä¸ºæ­¤ï¼æä»¬ä¹å¯ä»¥éæ©å¨è¯¥é¡¹ç®çæ ¹ç®å½ä¸æå¼ OpenCode TUIï¼ç¶åå¨å¶ä¸­éè¿æ§è¡<code>/init</code>å½ä»¤æ¥åå»ºä¸ä¸ªéå¯¹å½åé¡¹ç®ç<code>AGENTS.md</code>æä»¶ï¼å¹¶å°ä¸è¿°åå®¹å¤å¶å°è¯¥æä»¶ä¸­å³å¯ï¼è¯¥å½ä»¤çå·ä½ææå¦å¾ 5 æç¤ºï¼</p>

<p><img alt="img" loading="lazy" data-src="https://img2024.cnblogs.com/blog/691082/202602/691082-20260218160119508-1547442074.png" class="lazyload"></p>
<p><strong>å¾ 5</strong>ï¼OpenCode çé¡¹ç®åå§åå½ä»¤</p>
<p>è³äºå¶ä» AI Agentï¼è½ç¶ä¼å¨å¨å±éç½®ç®å½ä¸æç¤ºè¯æä»¶ä¸æåèªçåç§°ï¼ä½åºç¨çå·¥ä½æµ/æºå¶åºæ¬æ¯å¤§åå°å¼çï¼ç¨æ·åªéç®åæ¥è¯¢ä¸ä¸å®ä»¬çå®æ¹ææ¡£ï¼å°±å¯ä»¥è½»æ¾åå°ä¸¾ä¸åä¸çï¼ä¾å¦éè¿å¿«éæ¥è¯¢ Claude Code çå®æ¹ææ¡£ï¼ç«å³å°±ä¼ç¥éå®çå¨å±æç¤ºè¯æä»¶è·¯å¾ä¸º<code>~/.claude/claude.md</code>ã</p>
<blockquote>
<p>é¡ºä¾¿è¯´ä¸å¥é¢å¤è¯ï¼è½ç¶ Claude Code å¨åæ¹é¢é½ä¸º AI Agent åºç¨å»ºç«äºæ¥è¿äºæ åçå·¥ä½æµ/æºå¶ï¼ä½èèå°å¶å®æ¹çæäºåæ³ä¼ç»ä¸­æç¨æ·å¸¦æ¥è¯¸å¤æ²¡å¿è¦çé¢å¤éç½®ï¼æå¨æ¥ä¸æ¥è¿æ¯ä¼ä»¥ OpenCode ä¸ºä¾è¿è¡è¯´æãå¦æè¯»èæ³åå®äºè§£ Claude Code çæäºå·ä½ç¨æ³ï¼ä¹å¯åèæ¬æå¨âåèèµæâä¸èä¸­æä¾çè§é¢æç¨ï¼ãClaude Code æç¨ãã</p>
</blockquote>
<h4 id="åºæ¬æä½æ¹å¼">åºæ¬æä½æ¹å¼</h4>
<p>ä¸é¢ï¼è®©æä»¬æ¥å·ä½ä»ç»ä¸ä¸å½ä»¤è¡å·¥å·å Agent çåºæ¬æä½æ¹å¼ï¼æ­£å¦ä¹åæè¯´ï¼è¿ç±»å½ä»¤è¡å·¥å·éå¸¸æ CLI å TUI ä¸¤ç§ä½¿ç¨æ¹å¼ï¼TUI ä¼åç¬æå¼ä¸ä¸ªå·¥ä½çº¿ç¨æ¥æ§è¡äº¤äºå¼æä½ï¼éå¸¸ç¨äºæ§è¡ä¸äºéè¦ä½¿ç¨å¤è½®æç¤ºè¯äº¤äºï¼å¹¶ç¡®è®¤åå®¹çå¤æä»»å¡ãå æ­¤ï¼è¿äº Agent åºç¨ç TUI å¾å¾è³å°ä¼æä¾âè®¡åï¼planï¼âåâæå»ºï¼buildï¼âä¸¤ä¸ªæ¨¡å¼ï¼ä¸ªå« Agent è¿ä¼æä¾âèªå¨ï¼autoï¼âä¹ç±»çç¬¬ä¸ç§æ¨¡å¼ï¼æèå¨æ¨¡å¼åç§°ä¸å­å¨å·®å¼ï¼ä½å¶å¨åºæ¬ä½¿ç¨é»è¾ä¸æ¯ä¸è´çï¼ï¼å¶ä¸­ï¼âè®¡åâæ¨¡å¼éå¸¸æ²¡ææ§è¡å¤é¨å½ä»¤çæéï¼ä¸»è¦ç¨äºä¸ LLM æ§è¡å¤è½®äº¤äºï¼å¹¶ç¡®è®¤æä¸æä»»å¡çè§£å³æ¹æ¡ãä¾å¦å¨ä¹åå±ç¤ºç OpenCode TUI ä¸­ï¼è¯»èå¯ä»¥å¨å¶è¾å¥æ¡çä¸æ¹çå°ï¼å®é»è®¤å¤äºâæå»ºâæ¨¡å¼ãç°å¨ï¼æä»¬å¯ä»¥éè¿è¾å¥<code>&lt;tab&gt;</code>é®æ¥å°å¶åæ¢å°âè®¡åâæ¨¡å¼ï¼ç¶ååè¯çè®©å®æ§è¡âä½¿ç¨ Python ç¼åå¹¶æ§è¡ä¸ä¸ª hello world ç¨åºâçæä½ï¼å°±ä¼å¾å°ç±»ä¼¼å¾ 5 çè¾åºï¼</p>

<p><img alt="img" loading="lazy" data-src="https://img2024.cnblogs.com/blog/691082/202602/691082-20260218160040673-1077571178.png" class="lazyload"></p>
<p><strong>å¾ 6</strong>ï¼OpenCode çè®¡åæ¨¡å¼</p>
<p>æ­£å¦è¯»èæè§ï¼ç°å¨ OpenCode TUI è¾å¥æ¡ä¸é¢æç¤ºå¶å½åå¤äºâè®¡åâæ¨¡å¼ï¼å¹¶ä¸åè¯ç¨æ·èªå·±å½åä¸è½ç¼è¾æä»¶åæ§è¡ç¨åºï¼ç¶åå¼å§ä¸ç¨æ·è®¨è®ºä»»å¡çå·ä½è§£å³æ¹æ¡ãèå½æä»¬åæ¢å°âæå»ºâæ¨¡å¼æ¶ï¼OpenCode å°±ä¼ç´æ¥æ§è¡è¿ä¸ªè§£å³æ¹æ¡ï¼å¹¶è¾åºç±»ä¼¼å¾ 7 çç»æï¼</p>

<p><img alt="img" loading="lazy" data-src="https://img2024.cnblogs.com/blog/691082/202602/691082-20260218160004275-1878144736.png" class="lazyload"></p>
<p><strong>å¾ 7</strong>ï¼OpenCode çæå»ºæ¨¡å¼</p>
<p>å½ç¶äºï¼å°±ä¸é¢è¿ç§ä»éä¸å¥ç®ç­çæç¤ºè¯å°±å¯ä»¥å®æçä»»å¡èè¨ï¼æä»¬å®éä¸æ´éåä½¿ç¨ CLI çæ¹å¼æ¥æ§è¡ãè¿ç§æ¹å¼åè®¸æä»¬å¨ bash/powershell è¿ç±»å½ä»¤è¡ç»ç«¯ç¨åºæå¨çå½åçº¿ç¨ä¸­ç´æ¥æ§è¡ AI Agentï¼å¹¶è¾åºç»æãä¾å¦ï¼å¦ææä»¬æ³ä½¿ç¨ OpenCode CLI çæ¹å¼æ¥ç¼åå¹¶æ§è¡ä¸é¢é£ä¸ª Python ç¨åºï¼å¯ä»¥ç´æ¥å¨å½ä»¤è¡ç»ç«¯ä¸­è¾å¥<code>opencode run "ä½¿ç¨ Python ç¼åå¹¶æ§è¡ä¸ä¸ª hello world ç¨åº"</code>å½ä»¤ï¼å¹¶å¾å°ç±»ä¼¼å¾ 8 çè¾åºï¼</p>

<p><img alt="img" loading="lazy" data-src="https://img2024.cnblogs.com/blog/691082/202602/691082-20260218155937910-1298759938.png" class="lazyload"></p>
<p><strong>å¾ 8</strong>ï¼OpenCode ç CLI æ¨¡å¼</p>
<p>å¦è¯»èæè§ï¼ä¸è¿°å½ä»¤ç´æ¥å¨ powershell æå¨çå½åçº¿ç¨ä¸­è¾åºäº OpenCode çæ§è¡ç»æãè¿æ ·åçå¥½å¤ï¼é¤äºé¿åå ä¸äºç®åçä»»å¡åå¤å¯å¨åå³é­ OpenCode TUI ä¹å¤ï¼å¨å¿è¦æåµä¸è¿å¯ä»¥ä½¿ç¨ Shell/Python è¿æ ·çèæ¬è¯­è¨æ¥å®ç°å¯¹ AI Agent åºç¨çæ¹éè°ç¨ï¼ä¾å¦ï¼å¦ææä»¬æ³ä½¿ç¨ Python èæ¬æ¹éè°ç¨ OpenCode CLI æ¥æ§è¡ 5 ä¸ªä¸åçä»»å¡ï¼å°±å¯ä»¥åä¸é¢è¿æ ·ç¼åä¸ä¸ªç®åç Python èæ¬ï¼</p>
<pre><code class="language-python">import subprocess

tasks = [
    "ä½¿ç¨ Python ç¼åå¹¶æ§è¡ä¸ä¸ª hello world ç¨åº",
    "ä½¿ç¨ Python ç¼åå¹¶æ§è¡ä¸ä¸ªè®¡ç®ææ³¢é£å¥æ°åçç¨åº",
    "ä½¿ç¨ Python ç¼åå¹¶æ§è¡ä¸ä¸ªè®¡ç®é¶ä¹çç¨åº",
    "ä½¿ç¨ Python ç¼åå¹¶æ§è¡ä¸ä¸ªè®¡ç®ç´ æ°çç¨åº",
    "ä½¿ç¨ Python ç¼åå¹¶æ§è¡ä¸ä¸ªè®¡ç®åææ°çç¨åº",
]

for task in tasks:
    try:
        result = subprocess.run(
            ["opencode", "run", task],
            capture_output=True,
            text=True,
            check=True,
            timeout=120
        )
        print(f"ä»»å¡æå: {task}")
        print(result.stdout)
    except subprocess.CalledProcessError as e:
        print(f"ä»»å¡å¤±è´¥: {task}")
        print(e.stderr)
    except subprocess.TimeoutExpired:
        print(f"ä»»å¡è¶æ¶: {task}")
</code></pre>
<p>é¤äº<code>opencode run</code>å½ä»¤ä¹å¤ï¼æä»¬è¿å¯ä»¥éè¿æ§è¡<code>opencode -h</code>å½ä»¤æ¥æ¥çå¶ä»å¯ç¨ CLI æ¹å¼æ§è¡ç OpenCode æä½ï¼å¦å¾ 9 æç¤ºï¼</p>

<p><img alt="img" loading="lazy" data-src="https://img2024.cnblogs.com/blog/691082/202602/691082-20260218155909459-1029247200.png" class="lazyload"></p>
<p><strong>å¾ 9</strong>ï¼OpenCode ç CLI å¸®å©ä¿¡æ¯</p>
<p>è½ç¶ï¼ä¸é¢è¿ç§å¤æ¬¡è°ç¨<code>opencode run</code>å½ä»¤çåæ³ï¼å¨æäºç¹å®çæåµä¸å¹¶ä¸æ¯æä½³çä»»å¡ç¼ææ¹å¼ãä¾å¦å¨æäºæ¶åï¼åå°ææçéæ±åå¥ä¸ä¸ª Markdown ææ¡£ä¸­ï¼åå°å¶ä½ä¸ºæç¤ºè¯ä¸æ¬¡æ§åç» AI Agent å¯è½ä¼æ¯ä¸ç§æ´åéçåæ³ãä½æ¯ï¼æä»¬å¯ä»¥åºäºè¿ä¸æè·¯åå±åºè®¸å¤æ´å¤æç AI Agent å·¥ä½æµï¼ä¾å¦å©ç¨é¨ç½²å¨æå¡ç«¯ç Agent æ¥æä½è¿äºå½ä»¤è¡å·¥å·åç Agentãä¸é¢ï¼å°±è®©æä»¬åºäº OpenClaw è¿ä¸å¯é¨ç½²æå¡åç AI Agent æ¥äºè§£ä¸ä¸è¿ä¸å·¥ä½æµçå·ä½å®ç°æ¹å¼ã</p>
<h3 id="å¯é¨ç½²æå¡å-agent">å¯é¨ç½²æå¡å Agent</h3>
<p>å¦ææä»¬å°å½ä»¤è¡å·¥å·åç AI Agent è§ä¸ºä¸ç§å¢å¼ºåçèªå¨åå·¥å·ï¼é£ä¹ä»¥ OpenClaw ä¸ºä»£è¡¨çãå¯å¨æå¡ç«¯é¨ç½²ç AI Agent åå°±æ¯ä¸ç§ç³»ç»çº§æ§è¡ååï¼äºèçå·®å¼ä¸»è¦å¨äºè¿è¡å½¢æä¸ç³»ç»è¾¹çãå·ä½æ¥è¯´å°±æ¯ï¼å½ä»¤è¡å·¥å·å Agent çè¿è¡æ¹å¼éå¸¸æ¯ï¼</p>
<ul>
<li>è¢«ç¨æ·è§¦å</li>
<li>æ§è¡ä¸è½®æå¤è½®ä»»å¡</li>
<li>è¾åºç»æ</li>
<li>éåºè¿ç¨</li>
</ul>
<p>èå¯é¨ç½²æå¡å Agent åå·æä»¥ä¸å®å¨ä¸åçç¹å¾ï¼</p>
<ul>
<li>å¸¸é©»è¿è¡</li>
<li>éè¿ HTTP / RPC / WebSocket ç­æ¹å¼å¯¹å¤æä¾è½å</li>
<li>æç»­ç»´æ¤ä¼è¯ç¶æ</li>
<li>æ¯æå¤ç¨æ·å¹¶åè®¿é®</li>
<li>å¯ä»¥è¢«å¶ä»ç³»ç»è°ç¨</li>
</ul>
<p>å¨è¿ç§å½¢æä¸ï¼Agent å°±ä¸åæ¯ä¸ä¸ªåè½ç±»ä¼¼äºèªå¨åèæ¬çå¢å¼ºåå·¥å·äºï¼å®æä¸ºäºå¸¸é©»å¨æä½ç³»ç»ä¸­çä¸ä¸ªæå¡ç»ä»¶ãå·ä½æ¥è¯´ï¼å¦æä»ç¨åºæ¶æçè§åº¦æ¥çï¼è¿ä¸¤ç§ Agent çå·®å«ä¸»è¦ä½ç°å¨ä»¥ä¸å ä¸ªæ¹é¢ï¼</p>
<ol>
<li>
<p>çå½å¨æç®¡çï¼å½ä»¤è¡å·¥å·å Agent ççå½å¨æéå¸¸æ¯ä¸æ¬¡æ§çï¼æ§è¡å®æå³éæ¯ï¼èå¯é¨ç½²æå¡å Agent åå·æé¿çå½å¨æï¼éè¦èèå¥åº·æ£æ¥ãæ¥å¿ç®¡çãå¼å¸¸æ¢å¤æºå¶ã</p>
</li>
<li>
<p>ä¼è¯ä¸ç¶æç®¡çï¼å½ä»¤è¡å·¥å·å Agent çç¶æéå¸¸ä¹æ¯ä¸æ¬¡æ§çï¼èå¯é¨ç½²æå¡å Agent åéè¦ç»´æ¤ä¼è¯ç¶æï¼è¿æå³çå®éè¦æ¯æç¨æ·çº§ä¼è¯éç¦»ãé¿æä¸ä¸æå­å¨ãè®°å¿æºå¶ï¼Memoryï¼ä»¥åå¤é¨æ°æ®åºæ¯æã</p>
</li>
<li>
<p>å¤ Agent ç¼æè½åï¼ä¸æ¦ Agent ä»¥ç³»ç»æå¡ç»ä»¶çå½¢å¼å­å¨ï¼å®å°±å¯ä»¥è°ç¨å¶ä» Agentï¼è¢«å¶ä» Agent è°ç¨ï¼åä¸æ´å¤æçä»»å¡é¾ãä¾å¦åè¿æ ·ï¼</p>
<pre><code class="language-plaintext">ç¨æ·è¯·æ±
â
è°åº¦ Agent
â
åæ Agent â ä»£ç çæ Agent â æµè¯ Agent
â
ç»ææ±æ»
</code></pre>
<p>è¿ç§æ§è¡ç»ææ¾ç¶å·²ç»ä¸åæ¯åçº¯çå·¥å·è°ç¨ï¼å®å³æ³¨çå®éä¸å·²ç»æ¯ä»»å¡çç¼æä¸è°åº¦äºãè¿ä¹å°±æå³çï¼æä»¬éè¦å¨æå¡åç Agent ä¸­å¼å¥ä»»å¡éåãæ¶æ¯éåãå¼æ­¥ä»»å¡è°åº¦ç³»ç»ç­æºå¶ã</p>
</li>
</ol>
<p>ä¸é¢ï¼è®©æä»¬ä»¥ OpenClaw ä¸ºä¾æ¥å·ä½ä»ç»ä¸ä¸ä½¿ç¨è¿ç§æå¡å Agent çä¸äºåºæ¬å·¥ä½æµãåè®¾ï¼æä»¬ç°å¨æ³ä½¿ç¨ OpenClaw ææ¥ OpenCode æ¥å®æä¸ä¸ªç®åçç½ç«éæä»»å¡ï¼éå¸¸éè¦æç§ä»¥ä¸æ­¥éª¤æ¥å®æã</p>
<h4 id="æ­¥éª¤-1å®è£å¹¶éç½®ä¸ä¸ª-openclaw-æå¡">æ­¥éª¤ 1ï¼å®è£å¹¶éç½®ä¸ä¸ª OpenClaw æå¡</h4>
<p>æ­£å¦ä¹åæè¯´ï¼OpenClaw æ¬è´¨ä¸æ¯ä¸ä¸ªç³»ç»æå¡ï¼è¿æå³çåä¸äºè¦èµäºå®è¾å¤§çæä½æéï¼åºäºå®å¨æ¹é¢çèèï¼æä¸ªäººä¸å»ºè®®ç¨æ·å°å¶å®è£å¨èªå·±æ¥å¸¸çå·¥ä½è®¾å¤ä¸ãå¦å¤ï¼å¦ææ³æå¤§éåº¦å°åæ¥ OpenClaw çåè½ï¼æå¥½è¦è½è®©å®é¿æ¶é´æç»­è¿è¡ï¼å¹¶æ§è¡ä¸å®ç¨åº¦çå®éè®¾å¤ç®¡çè½åãå æ­¤ï¼æä»¬å¨å®è£ OpenClaw æ¶éå¸¸éè¦æ§è¡çæä½å¦ä¸ï¼</p>
<ul>
<li>
<p>éç½®å¥½ä¸å°å¯ä¸æä»¬æ¥å¸¸å·¥ä½è®¾å¤ç¸è¿éçç¬ç«è®¡ç®æºï¼å¦æä»ç¨äºå­¦ä¹ ç®çï¼ä¹å¯ä»¥æ¯ä¸å°èææºï¼ï¼å¹¶å¨å¶ä¸­å®è£å¥½æä½ç³»ç»ä¸ Node.js 22.x ä»¥ä¸çæ¬çè¿è¡ç¯å¢ã</p>
</li>
<li>
<p>å¨è¿å°ç¬ç«è®¡ç®æºä¸æå¼å½ä»¤è¡ç»ç«¯ï¼å¹¶æ§è¡<code>npm install -g openclaw@latest</code>å½ä»¤æ¥å®è£ OpenClawãå½ç¶äºï¼è¿æ¯ä½¿ç¨è·¨å¹³å°çæ¹å¼ãå¦æè¯»èä¸æ³ä½¿ç¨ NPMï¼ä¹å¯ä»¥éè¿ç´æ¥æ§è¡ bash/powershell çå®è£èæ¬æ¥å®æè¿ä¸ªæä½ï¼ç¸å³å½ä»¤å¦ä¸ï¼</p>
<pre><code class="language-bash"># MacOS/Linux ç³»ç»ä¸ä½¿ç¨ bash èæ¬å®è£ï¼
curl -fsSL https://openclaw.ai/install.sh | bash
# Windows ç³»ç»ä¸ä½¿ç¨ powershell èæ¬å®è£ï¼
iwr -useb https://openclaw.ai/install.ps1 | iex
</code></pre>
</li>
<li>
<p>å¾å®è£å®æä¹åï¼ç»§ç»­æ§è¡<code>openclaw onboard --install-daemon</code>å½ä»¤æ¥å¯å¨æ°æå®è£åå¯¼ï¼å¦å¾ 10 æç¤ºï¼ï¼è¿ä¸æ­¥å®è£ OpenClaw çæå¡ç«¯ç»ä»¶ï¼ä¾å¦é£ä¹¦æºå¨äººãWhatsApp æºå¨äººç­ï¼ï¼å³äºè¿æ¹é¢çåå®¹ï¼è¯»èå¯åèæ¬æå¨âåèèµæâä¸èä¸­æä¾çè§é¢æç¨ï¼ãOpenClaw +é£ä¹¦çå·¥å·æµæ­å»ºè¿ç¨ãã</p>

<p><img alt="img" loading="lazy" data-src="https://img2024.cnblogs.com/blog/691082/202602/691082-20260218155800997-2144742020.png" class="lazyload"></p>
<p><strong>å¾ 10</strong>ï¼OpenClaw çå®è£åå¯¼</p>
</li>
<li>
<p>å¨éç½®å®ç¸å³æå¡ç«¯ç»ä»¶ä¹åï¼æä»¬è¿éè¦éè¿æ§è¡å¦ä¸å½ä»¤æ¥éç½® OpenClaw ç Gateway ç½å³ï¼</p>
<pre><code class="language-bash">openclaw channels login
openclaw gateway --port 18789
</code></pre>
<p>å¨è¿éï¼<code>--port</code>åæ°ç¨äºæå® OpenClaw Gateway ççå¬ç«¯å£ï¼å¦æè¯»èå¸æä½¿ç¨é»è®¤ç 18789 ç«¯å£ï¼åå¯ä»¥çç¥è¯¥åæ°ã</p>
</li>
<li>
<p>å¾ Gateway å¯å¨ä¹åï¼æä»¬å°±å¯ä»¥ä½¿ç¨æµè§å¨æå¼<code>http://localhost:18789</code>æ¥è®¿é® OpenClaw ç Web ç«¯äºï¼å¦ææä»¬è½çå°å¦å¾ 11 æç¤ºççé¢ï¼å°±è¯´æ OpenClaw å·²ç»æåå®è£å¹¶å®æäºåæ­¥çéç½®å·¥ä½ã</p>
  
<p><img alt="img" loading="lazy" data-src="https://img2024.cnblogs.com/blog/691082/202602/691082-20260218155717170-227815528.png" class="lazyload"></p>
<p><strong>å¾ 11</strong>ï¼OpenClaw ç Web ç«¯</p>
</li>
</ul>
<h4 id="æ­¥éª¤-2éç½®-openclaw-è°ç¨-opencode-çæ¹å¼">æ­¥éª¤ 2ï¼éç½® OpenClaw è°ç¨ OpenCode çæ¹å¼</h4>
<p>æªæ­¢å°ç®åä¸ºæ­¢ï¼æä»¬ä¸»è¦æ<strong>ä¸¤ç§æ¹å¼</strong>å¯ä»¥è®© OpenClaw ä½¿ç¨ OpenCode æ¥è¿æ¥ LLM å¹¶æ§è¡æå®çä»»å¡ãå¦æç¨æ·å·²è´­ä¹°äº OpenCode çå®æ¹æ¨¡åæå¡ï¼å³ OpenCode Zenï¼ï¼å¯ä»¥éæ©ç´æ¥ä½¿ç¨ OpenClaw èªå¸¦ç Zen æä»¶æ¥è°ç¨ OpenCodeï¼è¿ç§æ¹å¼çå·ä½æä½å¦ä¸ï¼</p>
<ul>
<li>
<p>åè·åå° OpenCode Zen ç API Keyï¼ç¶åéè¿æ§è¡å¦ä¸å½ä»¤ä¹ä¸ï¼å°å¶æ·»å å° OpenClaw çéç½®ä¸­ï¼</p>
<pre><code class="language-bash"># ä½¿ç¨äº¤äºå¼å½ä»¤ï¼è¿éè¦æ ¹æ®è¯¥å½ä»¤çæç¤ºè¾å¥ä½ ç API Key
openclaw onboard --auth-choice opencode-zen
# æéäº¤äºå¼å½ä»¤ï¼ç´æ¥å° API Key ä½ä¸ºåæ°ä¼ å¥
openclaw onboard --opencode-zen-api-key "&lt;ä½ ç API Key&gt;"
</code></pre>
</li>
<li>
<p>å¦æéè¦çè¯ï¼è¿å¯ä»¥éè¿æ§è¡å¦ä¸å½ä»¤æ¥è®¾ç½®èªå·±è¦ä½¿ç¨çé»è®¤æ¨¡åï¼</p>
<pre><code class="language-bash">openclaw config set agents.defaults.model.primary "opencode/claude-opus-4-6"
</code></pre>
</li>
</ul>
<p>å½ç¶äºï¼éæ©ä¸è¿°æ¹å¼éè¦ç¨æ·ä¸è®¡è¾æéè®¡è´¹æå¸¦æ¥çå¼éãå¦ææä»¬æ³ä½¿ç¨åè´¹ç LLM çè¯ï¼è­¬å¦  kimi-k2.5-freeï¼ï¼ä¹å¯ä»¥éè¿ç» OpenClaw å®è£ <code>opencode-to-openai</code>è¿æ ·çç¬¬ä¸æ¹æä»¶æ¥å®ç°ãè¿ç¬¬äºç§æ¹å¼çå·ä½æä½å¦ä¸ï¼</p>
<ul>
<li>
<p>å®è£<code>opencode-to-openai</code>æä»¶ï¼è¿éè¦éè¿æ§è¡å¦ä¸å½ä»¤æ¥å®æï¼</p>
<pre><code class="language-bash">git clone https://github.com/dxxzst/opencode-to-openai
cd opencode-to-openai
openclaw plugins install .
</code></pre>
</li>
<li>
<p>å®è£å®æåï¼éè¦æ§è¡å¦ä¸å½ä»¤æ¥éå¯ OpenClawï¼å¹¶ç¡®ä¿æä»¶å·²å¯ç¨ï¼</p>
<pre><code class="language-bash">openclaw gateway restart
</code></pre>
<p>å¨è¿éï¼å¦ææä»¬å¨ OpenClaw ä¸­å¯ç¨äºæä»¶ç½ååï¼å°±è¿éè¦éè¿æ§è¡å¦ä¸å½ä»¤å°è¯¥å å¥è¯¥ç½ååï¼</p>
<pre><code class="language-bash">openclaw config get plugins.allow --json
# åè®¾è¿å ["a","b"]

openclaw config set plugins.allow '["a","b","opencode-to-openai"]' --json
openclaw gateway restart
</code></pre>
</li>
<li>
<p>åæ­¥æ¨¡åå¹¶è®¤è¯ LLM æå¡ï¼è¿éè¦éè¿æ§è¡å¦ä¸å½ä»¤æ¥å®æï¼</p>
<pre><code class="language-bash">openclaw models auth login --provider opencode-to-openai --method local
</code></pre>
<p>å¦æä½ æ³é¡ºä¾¿è®¾ç½®é»è®¤æ¨¡åï¼</p>
<pre><code class="language-bash">openclaw models auth login --provider opencode-to-openai --method local --set-default
</code></pre>
</li>
<li>
<p>éæ©æ¨¡åï¼è¿éè¦éè¿æ§è¡å¦ä¸å½ä»¤æ¥å®æï¼</p>
<pre><code class="language-bash">openclaw models set opencode-to-openai/opencode/kimi-k2.5-free
</code></pre>
<p>å¨è¿éï¼å¦ææå¿å¯¹ LLM çè¯·æ±ä¼è¢«å¡ä½ï¼ä¹å¯ä»¥ç¨<code>useIsolatedHome=false</code>è¿ä¸ªæä»¶éç½®è®© OpenCode ä½¿ç¨çå® HOMEï¼å·ä½éç½®å½ä»¤å¦ä¸ï¼</p>
<pre><code class="language-bash">openclaw config set plugins.opencode-to-openai.useIsolatedHome false
</code></pre>
</li>
</ul>
<h4 id="æ­¥éª¤-3ä¸-openclaw-è¿è¡å¯¹è¯">æ­¥éª¤ 3ï¼ä¸ OpenClaw è¿è¡å¯¹è¯</h4>
<p>å¦æä¸è¿°æä½ä¸åé¡ºå©ï¼æä»¬å°±å¯ä»¥å¨æ­¥éª¤ 1 ä¸­éç½®å¥½ç Web ç«¯æé£ä¹¦ä¹ç±»çåºç¨ä¸­æå¼ä¸ OpenClaw çå¯¹è¯çªå£ï¼éè¿åéæç¤ºè¯æ¥è°åº¦ OpenCode å®æç¸å³ä»»å¡äºï¼å¦å¾ 12 æç¤ºï¼</p>

<p><img alt="img" loading="lazy" data-src="https://img2024.cnblogs.com/blog/691082/202602/691082-20260218155645024-1895778692.png" class="lazyload"></p>
<p><strong>å¾ 12</strong>ï¼ä¸ OpenClaw çå¯¹è¯çªå£</p>
<p>å½ç¶äºï¼å¦ææ³è®©æç¤ºè¯åæ¥å°æå¤§çä½ç¨ï¼å¹¶å¨çäº§ç¯å¢ä¸­å®éä½¿ç¨ OpenClaw/OpenCode æ¥å®æå·ä½çé¡¹ç®ä»»å¡ï¼æä»¬è¿éè¦åéç½®ä¸ä¸ OpenClaw/OpenCode ææ¥å¥ç MCP æå¡å Agent Skills æºå¶äºãå³äºè¿é¨åçåå®¹ï¼æå°ä¼å¨ã[[Agent çè¿é¶åºç¨]]ãè¿ä¸ç¯ç¬è®°ä¸­è¿è¡è¯¦ç»ä»ç»ã</p>
<h2 id="ç»æè¯­">ç»æè¯­</h2>
<p>å¨å®æäºå¯¹ AI Agent çå­¦ä¹ ä¸å®è·µä¹åï¼ææä¸ºææ¾çä½ä¼ä¹ä¸æ¯ï¼Agent å¹¶æ²¡æè®©ç³»ç»åå¾æ´ç®åï¼åèè®©ç³»ç»çè¾¹çåå¾æ´å æ¸æ°ãä¸ä¼ ç»çèªå¨åèæ¬æå·¥å·ä¸åï¼Agent å¹¶ä¸æ¯ä¸ç»åºå®è§åçéåï¼èæ¯ä¸ä¸ªåºäºè¯­è¨æ¨¡åè¿è¡ä»»å¡çè§£ãè§åä¸æ§è¡çç³»ç»ç»ä»¶ãè¿æå³çï¼å¨å¾å¤åºæ¯ä¸ï¼å®æåçå¹¶ä¸æ¯âæé¢æè¿è¡âï¼èæ¯âå°½åå®æä»»å¡âã</p>
<p>æ­£å å¦æ­¤ï¼Agent çå¼å¥å¹¶æ²¡æåå¼±äººç±»å¨ç³»ç»ä¸­çä½ç¨ï¼åèå¯¹äººçå¤æ­è½åæåºäºæ´é«è¦æ±ï¼<br>
æä»¬éè¦è½å¤çè§£ Agent å¨åä»ä¹ãä¸ºä»ä¹è¿ä¹åï¼ä»¥åå¨ä»ä¹æåµä¸åºè¯¥ä»å¥ãä¿®æ­£çè³ä¸­æ­¢å®çè¡ä¸ºãä»è¿ä¸ªè§åº¦æ¥çï¼å­¦ä¹ åä½¿ç¨ AI Agentï¼å¹¶ä¸æå³çææ§å¶æå®å¨äº¤ç» AIï¼èæ¯å­¦ä¼å¦ä½å¨ä¸ä¸ªç± AI åä¸æ§è¡çç³»ç»ä¸­ï¼éæ°å®ä½äººçèè´£ä¸è¾¹çãè¿ä¹æ­£æ¯æ¬å­¦ä¹ é¶æ®µçæ ¸å¿ç®æ ã</p>
<h2 id="åèèµæ">åèèµæ</h2>
<ul>
<li>
<p>å®æ¹ææ¡£ï¼</p>
<ul>
<li><a href="https://code.claude.com/docs/zh-CN/overview?utm_source=copilot.com" target="_blank" rel="noopener nofollow">Claude Code å®æ¹ææ¡£</a></li>
<li><a href="https://opencode.doczh.com/docs/" target="_blank" rel="noopener nofollow">OpenCode å®æ¹ææ¡£</a></li>
<li><a href="https://claude.com/blog/extending-claude-capabilities-with-skills-mcp-servers" target="_blank" rel="noopener nofollow">åºäº Agent skills å MCP æå¡çååå·¥ä½æµ</a></li>
<li><a href="https://docs.openclaw.ai/zh-CN" target="_blank" rel="noopener nofollow">OpenClaw å®æ¹ææ¡£</a></li>
</ul>
</li>
<li>
<p>è§é¢æç¨ï¼</p>
<ul>
<li>Claude Code æç¨ï¼<a href="https://www.youtube.com/watch?v=AT4b9kLtQCQ" target="_blank" rel="noopener nofollow">YouTube é¾æ¥</a> / <a href="https://www.bilibili.com/video/BV14rzQB9EJj" target="_blank" rel="noopener nofollow">Bilibili é¾æ¥</a></li>
<li>OpenClaw +é£ä¹¦çå·¥å·æµæ­å»ºè¿ç¨ï¼<a href="https://www.youtube.com/watch?v=giv63OtX720" target="_blank" rel="noopener nofollow">YouTube é¾æ¥</a> / <a href="https://www.bilibili.com/video/BV1rvcpzDEsH" target="_blank" rel="noopener nofollow">Bilibili é¾æ¥</a></li>
</ul>
</li>
</ul>


</div>
<div class="clear"></div>

        <p class="postfoot">
            posted on 
<span id="post-date" data-last-update-days="0.03680555555555556" data-date-updated="2026-02-18 17:02">2026-02-18 16:09</span>&nbsp;
<a href="https://www.cnblogs.com/owlman">åæ°</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19623216);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19623216', targetLink: 'https://www.cnblogs.com/owlman/p/19623216', title: 'AI å­¦ä¹ ç¬è®°ï¼Agent çåºç¡åºç¨' })">ä¸¾æ¥</a>

        </p>
     ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ .NET 10 & C# 14 New Features æ°å¢åè½ä»ç»-æ©å±æåExtension Members ]]></title>
    <link>https://www.cnblogs.com/tianqing/p/19622970</link>
    <guid>bc8bac31afaf466b5cd870058cb2a1d7</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/tianqing/p/19622970" title="åå¸äº 2026-02-18 11:20">
    <span role="heading" aria-level="2">.NET 10 &amp; C# 14 New Features æ°å¢åè½ä»ç»-æ©å±æåExtension Members</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p class="p1"><span class="s1">C# 14 å¼å¥äºå¯¹æ©å±æåï¼Extension Membersï¼çå¢å¼ºæ¯æï¼æ¬è´¨ä¸æ¯å¯¹ä¼ ç»âæ©å±æ¹æ³âæ¨¡åçä¸æ¬¡è¯­è¨çº§åçº§ï¼ä½¿å¶å¯ä»¥å®ä¹çä¸åä»éäºæ¹æ³ï¼</span></p>
<p class="p1"><span class="s1">èæ¯å¯ä»¥æ©å±æ´å¤æåå½¢æï¼ä¾å¦å±æ§ãè¿ç®ç¬¦ç­ï¼ã</span></p>
<p class="p1"><strong><span class="s1" style="font-size: 16px">ä¸ãä»æ©å±æ¹æ³å°æ©å±æå</span></strong></p>
<p class="p1">æ©å¨ <a><span class="s1">C# 3.0</span></a> ä¸­ï¼å°±å¼å¥äºâæ©å±æ¹æ³ï¼Extension Methodsï¼âï¼å¶åºå±æºå¶æ¯ï¼</p>
<ul>
<li>
<p class="p1"><span class="s1">å¿é¡»å®ä¹å¨ static class</span></p>
</li>
<li>
<p class="p1">æ¹æ³å¿é¡»æ¯ <span class="s1">static</span></p>
</li>
<li>
<p class="p1">ç¬¬ä¸ä¸ªåæ°ä½¿ç¨ <span class="s1">this T</span></p>
</li>
</ul>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">static</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> StringExtensions
{
    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">static</span> <span style="color: rgba(0, 0, 255, 1)">bool</span> IsNullOrEmptyEx(<span style="color: rgba(0, 0, 255, 1)">this</span> <span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)"> value)
        </span>=&gt; <span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)">.IsNullOrEmpty(value);
}</span></pre>
</div>
<p>ä»æ¬è´¨ä¸çï¼</p>
<blockquote>ç¼è¯å¨å¨è¯­æ³å±é¢åâç³åå¤çâï¼æç»ä»ç¶æ¯éææ¹æ³è°ç¨ã</blockquote>
<p><span class="s1">LINQå°±æ¯æå¤§çåºç¨åºæ¯ã</span></p>
<p><strong><span class="s1" style="font-size: 16px">äºãC# 14ä¸­å¼å¥æ©å±æååç¤ºä¾è¯´æ</span></strong></p>
<p class="p1">C# 14 åè®¸å¨æ´èªç¶çè¯­æ³ç»æä¸­å£°ææ©å±æåï¼ä¸åå±éäºâéæç±» + this åæ°âæ¨¡å¼ï¼èæ¯æ¯æç±»ä¼¼ï¼</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">static</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> Enumerable
{
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Extension block</span>
    extension&lt;TSource&gt;(IEnumerable&lt;TSource&gt; source) <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> extension members for IEnumerable&lt;TSource&gt;</span>
<span style="color: rgba(0, 0, 0, 1)">    {
        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Extension property:</span>
        <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">bool</span> IsEmpty =&gt; !<span style="color: rgba(0, 0, 0, 1)">source.Any();

        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Extension method:</span>
        <span style="color: rgba(0, 0, 255, 1)">public</span> IEnumerable&lt;TSource&gt; Where(Func&lt;TSource, <span style="color: rgba(0, 0, 255, 1)">bool</span>&gt;<span style="color: rgba(0, 0, 0, 1)"> predicate) { ... }
    }

    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> extension block, with a receiver type only</span>
    extension&lt;TSource&gt;(IEnumerable&lt;TSource&gt;) <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> static extension members for IEnumerable&lt;Source&gt;</span>
<span style="color: rgba(0, 0, 0, 1)">    {
        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> static extension method:</span>
        <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">static</span> IEnumerable&lt;TSource&gt; Combine(IEnumerable&lt;TSource&gt; first, IEnumerable&lt;TSource&gt;<span style="color: rgba(0, 0, 0, 1)"> second) { ... }

        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> static extension property:</span>
        <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">static</span> IEnumerable&lt;TSource&gt; Identity =&gt; Enumerable.Empty&lt;TSource&gt;<span style="color: rgba(0, 0, 0, 1)">();

        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> static user defined operator:</span>
        <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">static</span> IEnumerable&lt;TSource&gt; <span style="color: rgba(0, 0, 255, 1)">operator</span> + (IEnumerable&lt;TSource&gt; left, IEnumerable&lt;TSource&gt; right) =&gt;<span style="color: rgba(0, 0, 0, 1)"> left.Concat(right);
    }
}</span></pre>
</div>
<p class="p1"><span class="s1">å®ä¹çæ¯ä¸ä¸ª extension block<span class="s1">ï¼ç®æ ç±»åæ¯ï¼IEnumerable&lt;TSource&gt;</span></span></p>
<p class="p1">ä»£ç åæä¸¤ç±» extension blockï¼ãã</p>
<ol start="1">
<li>
<p class="p1"><strong>å®ä¾æ©å±æå</strong></p>
</li>
<li>
<p class="p1"><strong>éææ©å±æå</strong></p>
</li>
</ol>
<p>â  å®ä¾æ©å±æåï¼extension&lt;TSource&gt;(IEnumerable&lt;TSource&gt; source)&nbsp;</p>
<ul>
<li>
<p class="p1"><span class="s1">source æ¯æ¥æ¶èï¼receiverï¼</span></p>
</li>
<li>
<p class="p1"><span class="s1">ç±»ä¼¼æ§è¯­æ³ç this IEnumerable&lt;TSource&gt; source</span></p>
</li>
<li>
<p class="p1">ä½è¯­æ³æ´æ¥è¿çæ­£âä¸ºç±»åæ·»å æåâ</p>
</li>
</ul>
<p>&nbsp;æ©å±å±æ§ï¼public bool IsEmpty =&gt; !source.Any();</p>
<p class="p1">&nbsp;ç¼è¯å¨ä¼çæï¼public static bool get_IsEmpty&lt;TSource&gt;(IEnumerable&lt;TSource&gt; source)</p>
<p class="p1">&nbsp;ä»£ç è°ç¨ï¼list.IsEmpty</p>
<p class="p1">&nbsp;ä¼è¢«ç¼è¯ä¸ºï¼Enumerable.get_IsEmpty(list)</p>
<p class="p1">&nbsp;å¶æ¬è´¨ä»ç¶æ¯ï¼</p>
<blockquote>éææ¹æ³ + è¯­æ³ç³ç»å®</blockquote>
<p class="p1">ä½å¨è¯­ä¹å±é¢ï¼å®å·²ç»ä¸åæ¯âå·¥å·æ¹æ³âï¼èæ¯âç±»åè½åâã</p>
<p class="p1">æ©å±æ¹æ³ï¼public IEnumerable&lt;TSource&gt; Where(Func&lt;TSource, bool&gt; predicate)</p>
<p class="p1">å³å¢å¼ºåæLINQçWhereåè½</p>
<p class="p1"><span class="s1">å¦æç³»ç»ä¸­å·²æ System.Linq.Enumerable.Where<span class="s1">ï¼</span></span></p>
<ul>
<li>
<p class="p1">å®ä¾æåä¼å</p>
</li>
<li>
<p class="p1">ç¶åææ¯ extension block</p>
</li>
<li>
<p class="p1">åæ¯ using å¼å¥çæ©å±æ¹æ³</p>
</li>
</ul>
<p>&nbsp;ä¸ä¼ç ´åå·²æ APIï¼åªæ¯åä¸åééã</p>
<p class="p1">â¡ éææ©å±æå</p>
<p class="p1">extension&lt;TSource&gt;(IEnumerable&lt;TSource&gt;)</p>
<p class="p1">è¿éæ²¡æ receiver åéåã</p>
<blockquote>ä¸ºç±»åæ¬èº«æ·»å âéææ©å±æåâ</blockquote>
<p class="p1">æ¾ä¸ä¸ªéææ©å±æ¹æ³</p>
<p class="p1">public static IEnumerable&lt;TSource&gt; Combine(...)</p>
<p class="p1">ä»£ç è°ç¨ï¼IEnumerable&lt;int&gt;.Combine(a, b);</p>
<p class="p1">ç¼è¯å¨ä¼è½¬åä¸ºï¼Enumerable.Combine(a, b);</p>
<p class="p1">åçä¸ä¸ªéææ©å±å±æ§</p>
<p class="p1">public static IEnumerable&lt;TSource&gt; Identity</p>
<p class="p1">ä»£ç è°ç¨ï¼IEnumerable&lt;int&gt;.Identity</p>
<p class="p1">è¿å¨æ§æ©å±æ¹æ³ä½ç³»ä¸­æ¯æ æ³è¡¨è¾¾çã</p>
<p class="p1">åçä¸ä¸ªæ©å±è¿ç®ç¬¦</p>
<p class="p1">public static IEnumerable&lt;TSource&gt; operator +</p>
<p class="p1">è¿æ¯ C# 14 çéå¤§å¢å¼ºç¹ãç°å¨ä½ å¯ä»¥åï¼</p>
<p class="p1">var result = list1 + list2;</p>
<p class="p1">ç­ä»·äºï¼Enumerable.op_Addition(list1, list2);</p>
<p class="p1"><strong><span style="font-size: 16px">ä¸ãåºå±ç¼è¯æºå¶</span></strong></p>
<p class="p1">&nbsp;<strong>ä¸ä¿®æ¹ CLR åæ°æ®</strong></p>
<ul>
<li>
<p class="p1"><span class="s1">ä¸æ¹å IEnumerable&lt;T&gt;</span></p>
</li>
<li>
<p class="p1">ä¸å¢å çå®æå</p>
</li>
</ul>
<p>&nbsp;<strong>IL ä»ç¶æ¯éææ¹æ³</strong></p>
<p>&nbsp; &nbsp;æææåé½ä¼çæï¼&nbsp;public static ...</p>
<p class="p1">&nbsp;<strong>è¯­ä¹ç»å®ç±ç¼è¯å¨å®æ</strong></p>
<p class="p1">æ©å±æåè§£æè§åï¼</p>
<ol start="1">
<li>
<p class="p1">å®ä¾çå®æå</p>
</li>
<li>
<p class="p1">å namespace extension block</p>
</li>
<li>
<p class="p1">using å¯¼å¥ extension block</p>
</li>
</ol>
<p>&nbsp;<strong><span style="font-size: 16px">åãä¸ä¼ ç»æ©å±æ¹æ³å¯¹æ¯</span></strong></p>
<p>&nbsp; &nbsp;<img src="https://img2024.cnblogs.com/blog/23525/202602/23525-20260218111804828-477864692.png" alt="image" width="657" height="246" loading="lazy"></p>
<p>åæ¶ï¼é¶è¿è¡æ¶å¼éã</p>
<ul>
<li>
<p class="p1">æ åå°</p>
</li>
<li>
<p class="p1">æ å¨æä»£ç</p>
</li>
<li>
<p class="p1">æ è£é¥°å¨</p>
</li>
<li>
<p class="p1">æ è¿è¡æ¶æ³¨å¥</p>
</li>
</ul>
<p>&nbsp;å®å¨ç¼è¯æç»å®ã</p>
<blockquote>ç¼è¯å¨çº§è¯­ä¹å¢å¼ºï¼ä¸æ¹åè¿è¡æ¶ç±»åç»æã</blockquote>
<p>&nbsp;</p>
<p>&nbsp;ä»¥ä¸åäº«ç»å¤§å®¶ã</p>
<p>&nbsp;</p>
<p>å¨å½åº</p>
<p>20260218</p>
<p class="p1">&nbsp;</p>
<p class="p1">&nbsp;</p>
<p class="p1">&nbsp;</p>
<p class="p1">&nbsp;</p>
<p>&nbsp;</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-18 11:20">2026-02-18 11:20</span>&nbsp;
<a href="https://www.cnblogs.com/tianqing">Eric zhou</a>&nbsp;
éè¯»(<span id="post_view_count">87</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19622970);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19622970', targetLink: 'https://www.cnblogs.com/tianqing/p/19622970', title: '.NET 10 &amp;amp; C# 14 New Features æ°å¢åè½ä»ç»-æ©å±æåExtension Members' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ è¿ä¹è¡ï¼æé®å¨ä½æ¨¡å¼è¯å«ä¹è½ç¨è´å¶æ¯ï¼ ]]></title>
    <link>https://www.cnblogs.com/pie-o/p/19622890</link>
    <guid>10e839a954de85c63a427df5aa16167e</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/pie-o/p/19622890" title="åå¸äº 2026-02-18 10:38">
    <span role="heading" aria-level="2">è¿ä¹è¡ï¼æé®å¨ä½æ¨¡å¼è¯å«ä¹è½ç¨è´å¶æ¯ï¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        åºäºæ´ç´ è´å¶æ¯å¯¹æé®å¨ä½è¿è¡æ¨¡å¼è¯å«çä¸æ¬¡å­¦ä¹ å®éª
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<blockquote>
<p><a href="https://bbs.21ic.com/icview-3503975-1-1.html" target="_blank" rel="noopener nofollow">é¦åäº21icè®ºå</a></p>
</blockquote>
<h2 id="åè¨">åè¨</h2>
<p>ä¹åå­¦ä¹ äºè´å¶æ¯æ´æ°çç¸å³åå®¹ï¼æ­£å¥½ç°å¨ä¹å¨ç©å¼åæ¿ï¼æ¿å­ä¸é¢æå ä¸ªå°çåå»æé®ï¼ä¸è¬è¯å«æé®å¨ä½çåæ³å°±å¾ç®åï¼ä¸æ¯ä¸­æ­å°±æ¯æ¥è¯¢ï¼åºæ¬é½æ¯é è¾¹æ²¿æèçµå¹³çç¶ææ¥è¿è¡çï¼è¿ä¸å¥å°±å¾æ èï¼æ²¡æå®ç°çæ¬²æï¼æä»¥æ³ç¨ç¹ä¸ä¸æ ·çæ¹æ³ã</p>
<p>è¿å°±æäºæ¬çæç« çåºç°ï¼åºäº<code>æ´ç´ è´å¶æ¯åç±»</code>ï¼ä½¿ç¨æ»å¨çªå£ææçµå¹³åºåï¼æåç¹å¾è¿è¡æ¨¡å¼è¯å«ï¼çæ³æåµä¸è¯å«æææ æ çï¼ä½æ¯åºç°è¾¹çä»¥åæ··åçæåµï¼ææä¸è¨é¾å°½ï¼ç®åæ°´å¹³ä¸å¤ï¼è¿åºè¯¥ä¹æ¯åç»­éè¦è§£å³çä¸»è¦é®é¢äºã</p>
<h2 id="ææ¯è¦ç¹">ææ¯è¦ç¹</h2>
<h3 id="æ ¸å¿åç">æ ¸å¿åç</h3>
<ol>
<li>è´å¶æ¯å®ç</li>
</ol>
<p>æ¬æå®ç°çæ¹æ³åºäºæ´ç´ è´å¶æ¯åç±»å¨ï¼ä¸»è¦å°±æ¯ä¸¤æ¹é¢åå®¹ï¼<code>è´å¶æ¯å®ç</code>ä¸<code>æ¡ä»¶ç¬ç«åè®¾</code>ï¼æ¶åçæ¦å¿µæ<strong>åéªæ¦ç</strong>ã<strong>åéªæ¦ç</strong>å<strong>æ¡ä»¶æ¦ç</strong>ï¼å¶ä¸­åéªåæ¡ä»¶æ¦çé½æ¯æååå¤å¥½çï¼å¯ä»¥æ¯ä¸»è§ç»éªçï¼ä¹å¯ä»¥æ¯ç»è®¡éåçï¼èè´å¶æ¯å®çä¸­çæ¡ä»¶æ¦ç(ä¸æ¯åéªæ¦ç)ï¼åç§°ä¸ºä¼¼ç¶æ¦çã</p>
<p>è¿ä¸ªæ¹æ³çåºæ¬ææ³æ¯ï¼å¯¹äºç»å®çå¾åç±»é¡¹(å°±æ¯çªå£ä¸­ççµå¹³åºå)ï¼æ±è§£å½è¿ä¸ªå¾åç±»é¡¹åºç°æ¶ï¼åä¸ª<strong>å·²ç»å®ä¹è¿</strong>çæ¨¡å¼ç±»å«åºç°çæ¦çï¼åªä¸ªæ¦çæå¤§ï¼é£ä¹è¿ä¸ªå¾åç±»é¡¹å°±å±äºåªä¸ªæ¨¡å¼ã</p>
<p>å¨å¼å§åç±»ä¹åéè¦ä¸äºå¿è¦çåå¤å·¥ä½ï¼</p>
<ul>
<li>å®ä¹æåªäºæ¨¡å¼ç±»å«ï¼è¿äºæ¨¡å¼è¾¹çè¦æç¡®ï¼ä¸ç¶ä¸å®¹æåæç¹å¾</li>
<li>å®ä¹è¿äºæ¨¡å¼çç¹å¾å±æ§ï¼è¿äºå±æ§å¨ä¸åæ¨¡å¼ä¸çè¡¨ç°æ¯ä¸åçï¼è¿æ¯è¯å«çå³é®ï¼å¯¹åºäºè´å¶æ¯å®çä¸­çä¼¼ç¶æ¦ç</li>
</ul>
<ol start="2">
<li>æ»å¨çªå£</li>
</ol>
<p>è¿éççªå£æ¯å®æ¶æ´æ°ççªå£ï¼èæ°æ®ç§»åºï¼æ°æ°æ®å å¥ï¼æ»å¨çªå£ç¡®å®çµå¹³åºåæ°æ®çèå´ï¼åªæå¤å¨çªå£ä¸­çåºåæ°æ®æä¼å¾å°ç¹å¾æåçæºä¼ï¼å®çé¿åº¦ä¸åºåçæ¶é´é¿åº¦ææ¯ä¾ï¼ä¹å°±æ¯è¯´éæ ·é¢çä¼å½±åå°çªå£æ¶ææ§ã</p>
<p>å®éè¦èèçé®é¢æ¯æä¹ææå°å®æ´çä¿¡å·ï¼å¯¹åºäºæ»å¨çæ­¥é¿ï¼ä»¥åç¹å¾æåçå¨æã</p>
<h3 id="åºæ¬æ­¥éª¤">åºæ¬æ­¥éª¤</h3>
<p>éè¿ä»¥ä¸æ­¥éª¤å®ç°æé®å¨ä½æ¨¡å¼è¯å«ï¼</p>
<ol>
<li><strong>æ»å¨çªå£éé</strong>ï¼ä½¿ç¨åºå®å¤§å°çæ»å¨çªå£æç»­ééæé®ç¶ææ°æ®</li>
<li><strong>ç¹å¾æå</strong>ï¼ä»çªå£æ°æ®ä¸­æåå¤ä¸ªç»´åº¦çç¹å¾</li>
<li><strong>æ¦çè®¡ç®</strong>ï¼åºäºåéªæ¦çå<strong>ä¼¼ç¶æ¦ç</strong>è®¡ç®åéªæ¦ç</li>
<li><strong>æ¨¡å¼å¤æ­</strong>ï¼æ ¹æ®åéªæ¦çå<strong>éå¼</strong>ç¡®å®å½åæé®æ¨¡å¼</li>
</ol>
<h2 id="å·ä½å®ç°">å·ä½å®ç°</h2>
<p>ä¸ºäºéªè¯è®¾æ³çå¯è¡æ§ï¼éè¿é»è¾åæä»ªè®°å½æé®çå¼èçµå¹³ååï¼ä½çµå¹³è¡¨ç¤ºæé®æä¸ï¼é«çµå¹³è¡¨ç¤ºæ æé®å¨ä½ï¼éæ ·ç1MHzï¼æ¶é¿20sï¼å¨åé¢çå®éªä¸­ï¼è®¤ä¸ºåºåæ¯è¿ç»­çï¼è¿å°±æ¯çµå¹³åºåçæ¥æºï¼å·ä½åºåå¦ä¸å¾æç¤ºï¼</p>
<p><img alt="" loading="lazy" data-src="https://fastly.jsdelivr.net/gh/bucketio/img14@main/2026/02/17/1771293682747-d81c3402-eb3d-4b28-adba-763adf4d2ca0.png" class="lazyload"></p>
<p>ä¸é¢è®°å½çæ°æ®å¯ä»¥ä½ä¸ºä¸ä¸ªæ ·æ¬ï¼æéè¿è§å¯åæµéç¡®å®äºå ç§æ¨¡å¼ï¼ä»¥åä¸äºå¸®å©è¯å«çç¹å¾å±æ§ï¼å¨å®éªè¿ç¨ä¸­ä½¿ç¨<code>python</code>è¿è¡äºæ¹æ³éªè¯ã</p>
<h3 id="æ¨¡å¼å®ä¹">æ¨¡å¼å®ä¹</h3>
<p>æå¨è®¾è®¡è¿ç¨ä¸­å®ä¹äºåç§æé®æ¨¡å¼ï¼åå«å¦ä¸ï¼</p>
<ul>
<li><strong>æ æ</strong>ï¼æ æææé®å¨ä½</li>
<li><strong>åå»</strong>ï¼åæ¬¡ç­ææé®å¨ä½</li>
<li><strong>åå»</strong>ï¼å¿«éè¿ç»­ä¸¤æ¬¡æé®å¨ä½</li>
<li><strong>é¿æ</strong>ï¼æç»­æ¶é´è¾é¿çæé®å¨ä½</li>
</ul>
<p>å¨ä½çå®æ½é½æ¯éè¿ä¸ä¸ªåæé®æ¥è¿è¡çï¼å¶ä¸­åå»ååå»æ¶åå°çµå¹³çè¾å¿«éååï¼æ¯è¯å«çé¾ç¹</p>
<h3 id="ç¹å¾éæ©">ç¹å¾éæ©</h3>
<p>åºäºå¯¹æåçç¹å¾åæ¬ï¼</p>
<ul>
<li><strong>é«çµå¹³å æ¯</strong>ï¼çªå£åé«çµå¹³ä¿¡å·çæ¯ä¾</li>
<li><strong>ä¸åæ²¿æ°é</strong>ï¼ä¿¡å·ä»ä½å°é«çè½¬æ¢æ¬¡æ°</li>
<li><strong>ä¸éæ²¿æ°é</strong>ï¼ä¿¡å·ä»é«å°ä½çè½¬æ¢æ¬¡æ°</li>
<li><strong>æé¿è¿ç»­é«çµå¹³æç»­æ¶é´</strong>ï¼çªå£åæç»­é«çµå¹³çæé¿æ¶é´</li>
</ul>
<h3 id="æ¦çæ¨¡å">æ¦çæ¨¡å</h3>
<ul>
<li><strong>åéªæ¦ç</strong>ï¼åå§åè®¾åç§æ¨¡å¼ç­æ¦çåºç°ï¼å³æ¯ä¸ªæ¨¡å¼çåéªé½æ¯0.25ãå¹¶ä¸åä¸è¬çè´å¶æ¯æ¹æ³ä¸åçæ¯ï¼å¨å®ç°è¿ç¨ä¸­è®¤ä¸ºåéªæ¯ä¸éè¦æ´æ°çï¼ä¹å°±æ¯å¨æ¯ä¸æ¬¡è¯å«æ¶è®¤ä¸ºæ¯ä¸ªæ¨¡å¼é½æ¯<strong>ç­æ¦ç</strong>åºç°çï¼æ²¡æè½¬ç§»æ¦çæèåå²å ç´ å½±å</li>
<li><strong>ä¼¼ç¶æ¦ç</strong>ï¼åºäº<strong>ç¹å¾åå¸åæ°</strong>è®¡ç®è§æµå°å½åç¹å¾çæ¦çï¼å¶ä¸­çåå¸åæ°æ¯æ ¹æ®å®éææçåºåæ°æ®æ¥è®¾è®¡çï¼æ¦çåå¸æ¨¡åéç¨æ­£æåå¸æ¥<strong>è¿ä¼¼</strong>ï¼éè¦åå¼åæ åå·®ï¼ç»ä¸ä½¿ç¨<em>æ¦çå¯åº¦</em>è¡¨è¾¾ä¼¼ç¶ç»æ
<ul>
<li>é«çµå¹³å æ¯çåå¸åæ°
<ul>
<li>æ æï¼0.05ï¼0.2</li>
<li>åå»ï¼0.2ï¼0.2</li>
<li>åå»ï¼0.3ï¼0.2</li>
<li>é¿æï¼0.9ï¼0.2</li>
</ul>
</li>
<li>(ä¸åæ²¿/ä¸éæ²¿)æ°éçåå¸åæ°
<ul>
<li>æ æï¼0.1ï¼0.3</li>
<li>åå»ï¼1ï¼0.3</li>
<li>åå»ï¼2ï¼0.3</li>
<li>é¿æï¼0.7ï¼0.3</li>
</ul>
</li>
<li>æé¿é«çµå¹³æç»­æ¶é´çåå¸åæ°
<ul>
<li>æ æï¼0ï¼2</li>
<li>åå»ï¼0.2ï¼5</li>
<li>åå»ï¼0.17ï¼3</li>
<li>é¿æï¼0.9ï¼10</li>
</ul>
</li>
</ul>
</li>
<li><strong>åéªæ¦ç</strong>ï¼ä½¿ç¨è´å¶æ¯å¬å¼è®¡ç®åæ¨¡å¼çåéªæ¦çï¼åè®¡ç®æåçç¹å¾å¨æ¯ä¸ªæ¨¡å¼ä¸ç<em>èåä¼¼ç¶</em>ï¼åºäºæ¡ä»¶ç¬ç«åè®¾ï¼å¯ä»¥ç´æ¥ç¸ä¹ï¼ç¶åè®¡ç®åéªå¹¶å½ä¸åå¯å¾æç»çæ¦çè¡¨</li>
</ul>
<h3 id="ä»£ç å®ç°">ä»£ç å®ç°</h3>
<ol>
<li>æ°æ®ééä¸é¢å¤ç</li>
</ol>
<p>æé»è¾åæä»ªä¸­çæ°æ®å¯¼åºä¸ºcsvæä»¶ï¼ä»£ç é¦åå®ç°äº&nbsp;read_sigrok_csv_simple&nbsp;å½æ°ï¼ç¨äºè¯»å sigrok CSV æ ¼å¼çæé®æ°æ®ï¼</p>
<pre><code class="language-python">def&nbsp;read_sigrok_csv_simple(filename):

&nbsp;&nbsp;&nbsp;&nbsp;time_data&nbsp;=&nbsp;[]
&nbsp;&nbsp;&nbsp;&nbsp;signal_data&nbsp;=&nbsp;[]

&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;open(filename,&nbsp;'r',&nbsp;newline='')&nbsp;as&nbsp;csvfile:

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reader&nbsp;=&nbsp;csv.reader(csvfile)

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;row&nbsp;in&nbsp;reader:

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;è·³è¿æ³¨éè¡åç©ºè¡

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;row&nbsp;or&nbsp;row[0].startswith(';'):

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;ç¡®ä¿è¡æä¸¤ä¸ªå

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;len(row)&nbsp;&gt;=&nbsp;2:

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time_val&nbsp;=&nbsp;float(row[0])

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data_val&nbsp;=&nbsp;float(row[1])

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time_data.append(time_val)

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal_data.append(data_val)

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;ValueError:

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;è·³è¿æ æ³è½¬æ¢ä¸ºæ°å­çè¡

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue

&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;time_data,&nbsp;signal_data
</code></pre>
<p>è¯¥å½æ°è¯»å CSV æä»¶ä¸­çæ¶é´æ³åä¿¡å·å¼ï¼è¿åä¸¤ä¸ªåè¡¨åå«å­å¨æ¶é´æ°æ®åä¿¡å·æ°æ®ï¼éè¿plotè¾åºéæ ·çæ°æ®å¾å¦ä¸æç¤ºï¼</p>
<p><img alt="" loading="lazy" data-src="https://fastly.jsdelivr.net/gh/bucketio/img0@main/2026/02/17/1771293729251-6f4bcd36-9a3b-40e6-beb1-e25327a680c4.png" class="lazyload"></p>
<ol start="2">
<li>è¯å«å¨ç±»è®¾è®¡</li>
</ol>
<p>æ ¸å¿å®ç°æ¯&nbsp;BayesianButtonRecognizer&nbsp;ç±»ï¼ç¨äºå®ç°åºäºè´å¶æ¯åç±»çæé®æ¨¡å¼è¯å«ï¼</p>
<pre><code class="language-python">class&nbsp;BayesianButtonRecognizer:

&nbsp;&nbsp;&nbsp;&nbsp;"""åºäºæ»å¨çªå£åè´å¶æ¯æ´æ°çæé®æ¨¡å¼è¯å«å¨"""

&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__init__(self,&nbsp;window_size=20,&nbsp;sample_interval=0.01,&nbsp;

&nbsp;&nbsp;&nbsp;&nbsp;threshold=0.7):

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"""

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åå§åè¯å«å¨

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args:

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window_size:&nbsp;æ»å¨çªå£å¤§å°

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sample_interval:&nbsp;éæ ·é´é(ç§)

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;threshold:&nbsp;å¤å®éå¼

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"""

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.window_size&nbsp;=&nbsp;window_size

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.sample_interval&nbsp;=&nbsp;sample_interval

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.threshold&nbsp;=&nbsp;threshold

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;æ»å¨çªå£å­å¨æè¿çè§æµåºå

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.window&nbsp;=&nbsp;deque(maxlen=window_size)

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;æ¨¡å¼ç±»å«

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.modes&nbsp;=&nbsp;['æ æ',&nbsp;'åå»',&nbsp;'åå»',&nbsp;'é¿æ']

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;åéªæ¦ç&nbsp;-&nbsp;åå§ç­å¯è½

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.prior&nbsp;=&nbsp;np.array([0.25,&nbsp;0.25,&nbsp;0.25,&nbsp;0.25])

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;ç¹å¾æåç¸å³çåæ°(åä½:éæ ·ç¹æ°)

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.short_press_max&nbsp;=&nbsp;15&nbsp;&nbsp;#&nbsp;ç­ææå¤§æç»­æ¶é´

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.long_press_min&nbsp;=&nbsp;30&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;é¿ææå°æç»­æ¶é´&nbsp;&nbsp;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.double_click_interval&nbsp;=&nbsp;10&nbsp;&nbsp;#&nbsp;åå»é´ééå¼

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;åå§åç¹å¾åå¸åæ°(åºäºç©ççè§£é¢è®¾)

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self._init_feature_distributions()

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;ç¹å¾æé

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.featwight={

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"æ æ":np.array([1.2,0.8,0.8,1.2]),

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"åå»":np.array([1,1.2,1.2,1]),

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"åå»":np.array([1,1.2,1.2,0.8]),

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"é¿æ":np.array([1.2,0.8,0.8,1.2])

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</code></pre>
<ol start="3">
<li>ç¹å¾åå¸åå§å</li>
</ol>
<p>è¯å«å¨åå§åæ¶è®¾ç½®äºåæ¨¡å¼ä¸ç¹å¾çæ¦çåå¸åæ°ï¼</p>
<pre><code class="language-python">def&nbsp;_init_feature_distributions(self):

&nbsp;&nbsp;&nbsp;&nbsp;"""åå§ååæ¨¡å¼ä¸ç¹å¾çæ¦çåå¸åæ°"""

&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;é«çµå¹³å æ¯çåå¸åæ°

&nbsp;&nbsp;&nbsp;&nbsp;self.high_ratio_params&nbsp;=&nbsp;{

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'æ æ':&nbsp;0.05,&nbsp;&nbsp;&nbsp;#&nbsp;æ ææ¶é«çµå¹³å æ¯å¾ä½

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'åå»':&nbsp;0.2,&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;åå»æ¶æç­æé«çµå¹³

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'åå»':&nbsp;0.3,&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;åå»æ¶é«çµå¹³å æ¯ç¨é«

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'é¿æ':&nbsp;0.9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;é¿ææ¶é«çµå¹³å æ¯å¾é«

&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;ä¸åæ²¿æ°éçåå¸åæ°

&nbsp;&nbsp;&nbsp;&nbsp;self.rise_count_params&nbsp;=&nbsp;{

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'æ æ':&nbsp;0.1,&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;æ ææ¶å ä¹æ ä¸åæ²¿

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'åå»':&nbsp;1,&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;åå»æ¶æ1ä¸ªä¸åæ²¿

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'åå»':&nbsp;2,&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;åå»æ¶æ2ä¸ªä¸åæ²¿&nbsp;&nbsp;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'é¿æ':&nbsp;0.7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;é¿ææ1ä¸ªä¸åæ²¿

&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;æé¿é«çµå¹³æç»­æ¶é´çåå¸åæ°(æ­£æåå¸:åå¼,æ åå·®)

&nbsp;&nbsp;&nbsp;&nbsp;self.max_duration_params&nbsp;=&nbsp;{

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'æ æ':&nbsp;(0,&nbsp;2),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;æ ææ¶æç»­æ¶é´å¾ç­

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'åå»':&nbsp;(0.2,&nbsp;5),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;åå»ä¸­ç­æç»­æ¶é´

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'åå»':&nbsp;(0.17,&nbsp;3),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;åå»æ¯æ¬¡æä¸æ¶é´ç­

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'é¿æ':&nbsp;(0.9,&nbsp;10)&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;é¿ææç»­æ¶é´é¿

&nbsp;&nbsp;&nbsp;&nbsp;}
</code></pre>
<ol start="4">
<li>ç¹å¾æå</li>
</ol>
<p>ä»æ»å¨çªå£æ°æ®ä¸­æåç¹å¾ï¼å¶ä¸­é«çµå¹³å æ¯æ¯éè¿æ±åºåå¹³åå¼æ¥è·å¾çï¼ç¶åè¾¹æ²¿è®¡æ°å¯¹åºäºè®°å½åºåè·³åæ°éï¼æé¿é«çµå¹³æ¶é´éè¿è®°å½è¿ç»­é«çµå¹³æ¶é¿è·åï¼</p>
<pre><code class="language-python">def&nbsp;extract_features(self,&nbsp;window_data):

&nbsp;&nbsp;&nbsp;&nbsp;"""ä»æ»å¨çªå£æ°æ®ä¸­æåç¹å¾"""

&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;len(window_data)&nbsp;==&nbsp;0:

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;None

&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;=&nbsp;np.array(window_data)

&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;ç¹å¾1:&nbsp;é«çµå¹³å æ¯

&nbsp;&nbsp;&nbsp;&nbsp;high_ratio&nbsp;=&nbsp;np.mean(data)

&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;ç¹å¾2:&nbsp;ä¸åæ²¿æ°é(0-&gt;1çåå)

&nbsp;&nbsp;&nbsp;&nbsp;rises&nbsp;=&nbsp;0

&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;in&nbsp;range(1,&nbsp;len(data)):

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;data[i-1]&nbsp;==&nbsp;0&nbsp;and&nbsp;data[i]&nbsp;==&nbsp;1:

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rises&nbsp;+=&nbsp;1

&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;ç¹å¾3:&nbsp;ä¸éæ²¿æ°é(1-&gt;0çåå)

&nbsp;&nbsp;&nbsp;&nbsp;falls&nbsp;=&nbsp;0

&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;in&nbsp;range(1,&nbsp;len(data)):

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;data[i-1]&nbsp;==&nbsp;1&nbsp;and&nbsp;data[i]&nbsp;==&nbsp;0:

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;falls&nbsp;+=&nbsp;1

&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;ç¹å¾4:&nbsp;æé¿è¿ç»­é«çµå¹³æç»­æ¶é´

&nbsp;&nbsp;&nbsp;&nbsp;max_duration&nbsp;=&nbsp;0

&nbsp;&nbsp;&nbsp;&nbsp;current_duration&nbsp;=&nbsp;0

&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;val&nbsp;in&nbsp;data:

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;val&nbsp;==&nbsp;1:

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;current_duration&nbsp;+=&nbsp;1

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max_duration&nbsp;=&nbsp;max(max_duration,&nbsp;current_duration)

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;current_duration&nbsp;=&nbsp;0

&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'high_ratio':&nbsp;high_ratio,

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'rise_count':&nbsp;rises,&nbsp;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'fall_count':&nbsp;falls,

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'max_duration':&nbsp;max_duration

&nbsp;&nbsp;&nbsp;&nbsp;}
</code></pre>
<ol start="5">
<li>ä¼¼ç¶æ¦çè®¡ç®</li>
</ol>
<p>è®¡ç®ç»å®æ¨¡å¼ä¸è§æµå°ç¹å¾å¼çä¼¼ç¶æ¦çï¼å³æ¡ä»¶æ¦çï¼éè¿ä¸é¢å®ä¹çåå¸åæ°ï¼ä½¿ç¨<code>æ­£æåå¸</code>è¿ä¼¼ï¼å¨pythonä¸­éè¿<code>stats.norm.pdf</code>æ±ç¹å¾å¯¹åºæ¯ä¸ªæ¨¡å¼çä¼¼ç¶ç¨åº¦ï¼ç¶ååºäºæ¡ä»¶ç¬ç«çåè®¾ï¼æ±è§£èåä¼¼ç¶ï¼è¡¨ç¤ºæ ·æ¬å¯¹æä¸æ¨¡å¼çæç»ä¼¼ç¶ç»æï¼</p>
<pre><code class="language-python">def&nbsp;calculate_likelihood(self,&nbsp;features,&nbsp;mode):

&nbsp;&nbsp;&nbsp;&nbsp;"""è®¡ç®ç»å®æ¨¡å¼ä¸è§æµå°ç¹å¾å¼çä¼¼ç¶æ¦ç"""

&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;features&nbsp;is&nbsp;None:

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1.0&nbsp;&nbsp;#&nbsp;æ ç¹å¾æ¶è¿åä¸­æ§ä¼¼ç¶

&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;ä½¿ç¨æ¦çå¯åº¦å½æ°è®¡ç®åç¹å¾çä¼¼ç¶

&nbsp;&nbsp;&nbsp;&nbsp;likelihoods&nbsp;=&nbsp;[]

&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;1.&nbsp;é«çµå¹³å æ¯çä¼¼ç¶

&nbsp;&nbsp;&nbsp;&nbsp;target_ratio&nbsp;=&nbsp;self.high_ratio_params[mode]

&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;ä½¿ç¨æ­£æåå¸è¿ä¼¼,&nbsp;æ åå·®æ ¹æ®ç»éªè®¾å®

&nbsp;&nbsp;&nbsp;&nbsp;like_ratio&nbsp;=&nbsp;stats.norm.pdf(features['high_ratio'],&nbsp;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target_ratio,&nbsp;0.2)

&nbsp;&nbsp;&nbsp;&nbsp;likelihoods.append(like_ratio&nbsp;+&nbsp;1e-10)&nbsp;&nbsp;#&nbsp;é¿åé¶

&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;2.&nbsp;ä¸åæ²¿æ°éçä¼¼ç¶

&nbsp;&nbsp;&nbsp;&nbsp;target_rises&nbsp;=&nbsp;self.rise_count_params[mode]

&nbsp;&nbsp;&nbsp;&nbsp;like_rises&nbsp;=&nbsp;stats.norm.pdf(features['rise_count'],&nbsp;

&nbsp;&nbsp;&nbsp;&nbsp;target_rises,0.3)

&nbsp;&nbsp;&nbsp;&nbsp;likelihoods.append(like_rises&nbsp;+&nbsp;1e-10)

&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;3.&nbsp;ä¸éæ²¿(åä¸åæ²¿)æ°éçä¼¼ç¶

&nbsp;&nbsp;&nbsp;&nbsp;target_falls&nbsp;=&nbsp;self.rise_count_params[mode]

&nbsp;&nbsp;&nbsp;&nbsp;like_falls&nbsp;=&nbsp;stats.norm.pdf(features['fall_count'],&nbsp;

&nbsp;&nbsp;&nbsp;&nbsp;target_falls,0.3)

&nbsp;&nbsp;&nbsp;&nbsp;likelihoods.append(like_falls&nbsp;+&nbsp;1e-10)

&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;4.&nbsp;æé¿æç»­æ¶é´çä¼¼ç¶(ä½¿ç¨æ­£æåå¸)

&nbsp;&nbsp;&nbsp;&nbsp;target_dur,&nbsp;std_dur&nbsp;=&nbsp;self.max_duration_params[mode]

&nbsp;&nbsp;&nbsp;&nbsp;target_dur&nbsp;*=&nbsp;self.window_size

&nbsp;&nbsp;&nbsp;&nbsp;like_duration&nbsp;=&nbsp;stats.norm.pdf(features['max_duration'],&nbsp;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target_dur,&nbsp;std_dur)

&nbsp;&nbsp;&nbsp;&nbsp;likelihoods.append(like_duration&nbsp;+&nbsp;1e-10)

&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;ç»ååç¹å¾çä¼¼ç¶(åè®¾ç¹å¾æ¡ä»¶ç¬ç«)

&nbsp;&nbsp;&nbsp;&nbsp;total_likelihood&nbsp;=&nbsp;np.prod(np.array(likelihoods))

&nbsp;&nbsp;&nbsp;&nbsp;print("ç¹å¾å¨mode[%s]çä¼¼ç¶ï¼"%{mode},likelihoods,"æç»èåä¼¼ç¶:%.

&nbsp;&nbsp;&nbsp;&nbsp;3f"%total_likelihood)

&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;total_likelihood
</code></pre>
<ol start="6">
<li>æ»å¨çªå£æ´æ°</li>
</ol>
<pre><code class="language-python">def&nbsp;slide_window(self,io_state):

&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;ç§»é¤ææ§çå¼

&nbsp;&nbsp;&nbsp;&nbsp;self.window.popleft()

&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;å°æ°è§æµå¼å å¥æ»å¨çªå£

&nbsp;&nbsp;&nbsp;&nbsp;self.window.append(io_state)
</code></pre>
<ol start="7">
<li>ä¿¡å¿µæ´æ°ä¸æ¨¡å¼å¤æ­</li>
</ol>
<p>è®¡ç®å®æ ·æ¬å¯¹æ¯ä¸ªæ¨¡å¼çä¼¼ç¶åï¼å°±äºåéªæ¦çç¸ä¹ï¼å°±å¾å°äºåéªæ¦çï¼ç¶åå½ä¸åå¾å°æç»ç»æï¼åæ¶ä½¿ç¨éå¼å¤å®æºå¶ï¼å½æå¤§åéªè¶è¿å¤å®éå¼åï¼æä¼è¯å«å·ä½æ¨¡å¼ï¼å¦åå°±æ¯ä¸ç¡®å®</p>
<pre><code class="language-python">def&nbsp;update_belief(self,&nbsp;io_state):

&nbsp;&nbsp;&nbsp;&nbsp;"""æ ¹æ®æ°è§æµå¼æ´æ°ä¿¡å¿µ"""

&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;æåå½åçªå£çç¹å¾

&nbsp;&nbsp;&nbsp;&nbsp;features&nbsp;=&nbsp;self.extract_features(self.window)

&nbsp;&nbsp;&nbsp;&nbsp;print("ç¹å¾æåï¼",features)

&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;è®¡ç®åæ¨¡å¼çä¼¼ç¶

&nbsp;&nbsp;&nbsp;&nbsp;likelihoods&nbsp;=&nbsp;np.array([self.calculate_likelihood(features,&nbsp;

&nbsp;&nbsp;&nbsp;&nbsp;mode)&nbsp;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;mode&nbsp;in&nbsp;self.modes])

&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;è´å¶æ¯æ´æ°:&nbsp;åéª&nbsp;â&nbsp;ä¼¼ç¶&nbsp;Ã&nbsp;åéª

&nbsp;&nbsp;&nbsp;&nbsp;unnormalized_posterior&nbsp;=&nbsp;likelihoods&nbsp;*&nbsp;self.prior

&nbsp;&nbsp;&nbsp;&nbsp;evidence&nbsp;=&nbsp;np.sum(unnormalized_posterior)

&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;evidence&nbsp;&gt;&nbsp;0:

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;posterior&nbsp;=&nbsp;unnormalized_posterior&nbsp;/&nbsp;evidence

&nbsp;&nbsp;&nbsp;&nbsp;else:

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;posterior&nbsp;=&nbsp;self.prior.copy()

&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;æ´æ°åéª(ç¨äºä¸ä¸æ¬¡è¿­ä»£)

&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;self.prior&nbsp;=&nbsp;posterior

&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;å¤æ­å½åæ¨¡å¼

&nbsp;&nbsp;&nbsp;&nbsp;best_mode_idx&nbsp;=&nbsp;np.argmax(posterior)

&nbsp;&nbsp;&nbsp;&nbsp;best_prob&nbsp;=&nbsp;posterior[best_mode_idx]

&nbsp;&nbsp;&nbsp;&nbsp;print("åéªï¼",posterior)

&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;best_prob&nbsp;&gt;&nbsp;self.threshold:

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;detected_mode&nbsp;=&nbsp;self.modes[best_mode_idx]

&nbsp;&nbsp;&nbsp;&nbsp;else:

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;detected_mode&nbsp;=&nbsp;'ä¸ç¡®å®'

&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;detected_mode,&nbsp;posterior
</code></pre>
<ol start="8">
<li>ä¸»å½æ°ä¸æ¼ç¤º</li>
</ol>
<p>å ä¸ºå®ä¹äºé«çµå¹³ä¸ºææçµå¹³ï¼ä½å®éä¸­ä½çµå¹³ï¼æèè¯´ä¸éæ²¿æ¯æé®å¨ä½çååºï¼æä»¥å¤çæ°æ®åºåæ¶åäºç¸åºçååå¤çã</p>
<pre><code class="language-python">if&nbsp;__name__&nbsp;==&nbsp;"__main__":

&nbsp;&nbsp;&nbsp;&nbsp;DeltaT&nbsp;=&nbsp;0.01 # éæ ·é´é

&nbsp;&nbsp;&nbsp;&nbsp;UnitTime&nbsp;=&nbsp;1e-06 # åå§æ°æ®ç¹çæ¶åº

&nbsp;&nbsp;&nbsp;&nbsp;SampleInterval&nbsp;=&nbsp;math.floor(DeltaT&nbsp;/&nbsp;UnitTime)

&nbsp;&nbsp;&nbsp;&nbsp;filename&nbsp;=&nbsp;"key_data_20s_all.csv"&nbsp;&nbsp;#&nbsp;é»è¾åæä»ªå¯¼åºçæ°æ®

&nbsp;&nbsp;&nbsp;&nbsp;recognizer&nbsp;=&nbsp;BayesianButtonRecognizer(window_size=100,&nbsp;

&nbsp;&nbsp;&nbsp;&nbsp;threshold=0.8)

&nbsp;&nbsp;&nbsp;&nbsp;recognizer.reset()

&nbsp;&nbsp;&nbsp;&nbsp;time_data,&nbsp;signal_data&nbsp;=&nbsp;read_sigrok_csv_simple(filename)

&nbsp;&nbsp;&nbsp;&nbsp;print(f"æåè¯»åæ°æ®ï¼å±&nbsp;{len(time_data)}&nbsp;ä¸ªæ°æ®ç¹")

&nbsp;&nbsp;&nbsp;&nbsp;print(f"æ¶é´èå´:&nbsp;{time_data[0]}s&nbsp;å°&nbsp;{time_data[-1]}s")

&nbsp;&nbsp;&nbsp;&nbsp;plt.figure(1)

&nbsp;&nbsp;&nbsp;&nbsp;sample_data&nbsp;=&nbsp;[]

&nbsp;&nbsp;&nbsp;&nbsp;res_data&nbsp;=&nbsp;[]

&nbsp;&nbsp;&nbsp;&nbsp;sample_num&nbsp;=&nbsp;math.floor(len(signal_data)&nbsp;/&nbsp;SampleInterval)

&nbsp;&nbsp;&nbsp;&nbsp;print("sample&nbsp;size&nbsp;is:",sample_num)

&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;in&nbsp;range(sample_num-1):

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sample_data.append(int(not&nbsp;signal_data[SampleInterval*i]))

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;recognizer.slide_window(int(not&nbsp;signal_data

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[SampleInterval*i]))

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;i%recognizer.window_size==0:

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res,postrior=recognizer.update_belief(i)

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(res&nbsp;not&nbsp;in["ä¸ç¡®å®","æ æ"]):

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res_data.append(res)

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print("win[%d]:"%i,res)

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plt.plot(recognizer.window)

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plt.show()

&nbsp;&nbsp;&nbsp;&nbsp;plt.figure(1)

&nbsp;&nbsp;&nbsp;&nbsp;plt.plot(sample_data)

&nbsp;&nbsp;&nbsp;&nbsp;plt.show()

&nbsp;&nbsp;&nbsp;&nbsp;print(res_data)
</code></pre>
<p>å½çªå£ä¸­æ ·æ¬åºåæ¯çæ³æåµæ¶ï¼è¯å«ææç¸å½å¥½ï¼</p>
<p>æ ææ ·æ¬ç¤ºä¾ï¼</p>
<p><img alt="" loading="lazy" data-src="https://fastly.jsdelivr.net/gh/bucketio/img16@main/2026/02/17/1771293783552-374386fd-51ad-4ecc-90cb-c38b2aa5a203.png" class="lazyload"></p>
<p>ä¸å¾æ¯ä¸ä¸ªæ ææé®æ ·æ¬åºåå¾ï¼ä¿ææ æçµå¹³ï¼æ²¡æè¾¹æ²¿ååãä¸å¾ç»åºäºè¯å«çè¿ç¨åç»æï¼</p>
<p><img alt="" loading="lazy" data-src="https://fastly.jsdelivr.net/gh/bucketio/img13@main/2026/02/17/1771293803151-94e9e91f-21ff-4ccc-995a-e4dee84ed04b.png" class="lazyload"></p>
<p>å¯ä»¥çå°ç¹å¾æåçä¿¡æ¯æ¯æ­£ç¡®çï¼é«çµå¹³å æ¯ä¸º0ï¼è¾¹æ²¿è®¡æ°ä¸º0ï¼æé¿é«çµå¹³å»¶æ¶ä¸º0ï¼å¨åä¸ªæ¨¡å¼çä¼¼ç¶åè¡¨ä¸­ï¼ç»åºäºå¯¹åºçä¼¼ç¶ç»æï¼åæ¶ä»åæ°æ®å¯¹æ¯æ¥çï¼ä¹å¯ä»¥ç´æ¥ä»æ°å¼ä¸çåºæ ·æ¬ç¹å¾æ´åååªä¸ªæ¨¡å¼ï¼æç»çåéªç»æï¼ç¡®å®æ¯æ ææ¨¡å¼çæ¦çæé«ï¼å³å¤å®çªå£ä¸­çåºåä¸ºæ æã</p>
<p>åå»æ ·æ¬ç¤ºä¾ï¼</p>
<p><img alt="" loading="lazy" data-src="https://fastly.jsdelivr.net/gh/bucketio/img12@main/2026/02/17/1771293891198-b35c3126-6cdb-4e0c-aa8d-866bb50f0abb.png" class="lazyload"></p>
<p>ä¸å¾æ¯ä¸ä¸ªåå»æé®æ ·æ¬åºåå¾ï¼æè¾¹æ²¿ååï¼ä¸ä¸ªä¸åæ²¿ï¼ä¸ä¸ªä¸éæ²¿ï¼é«çµå¹³å æ¯å¤§çº¦0.2ãä¸å¾ç»åºäºè¯å«çè¿ç¨åç»æï¼</p>
<p><img alt="" loading="lazy" data-src="https://fastly.jsdelivr.net/gh/bucketio/img18@main/2026/02/17/1771293913887-243f48a3-b10e-4539-a556-b64928912fe1.png" class="lazyload"></p>
<p>å¯ä»¥çå°ç¹å¾æåçä¿¡æ¯æ¯æ­£ç¡®çï¼æç»çè¯å«ç»æä¹æ¯æ­£ç¡®ç</p>
<p>åå»æ ·æ¬ç¤ºä¾ï¼</p>
<p><img alt="" loading="lazy" data-src="https://fastly.jsdelivr.net/gh/bucketio/img1@main/2026/02/17/1771293929485-ba56eac4-b956-455e-91a9-60a337f17f6d.png" class="lazyload"></p>
<p>ä¸å¾æ¯ä¸ä¸ªåå»æ ·æ¬çç¤ºä¾å¾ï¼å¯ä»¥çå°ç±ä¸¤ä¸ªé«çµå¹³ç»æï¼ä¸å¾ç»åºè¯å«è¿ç¨åç»æï¼</p>
<p><img alt="" loading="lazy" data-src="https://fastly.jsdelivr.net/gh/bucketio/img1@main/2026/02/17/1771293960527-ad7cc398-d923-41ef-8d6f-ad712670b32d.png" class="lazyload"></p>
<p>å¯ä»¥çåºç¹å¾æåä¿¡æ¯æ­£ç¡®ï¼æä¸¤ä¸ªä¸åæ²¿åä¸¤ä¸ªä¸éæ²¿ï¼ç¶åæç»çåéªæ¦çä¸­ä¹æ¯åå»çæ¦çæå¤§ï¼å¹¶ä¸è¶è¿éå¼å¤å®æ­£ç¡®ã</p>
<p>ä¸é¢ç»åºä¸äºå ä¸ºä¿¡å·å®æ´æ§ç¼ºå¤±é æçè¯¯å¤ç¤ºä¾ã</p>
<p>è¾¹çåå»æåµç¤ºä¾ï¼</p>
<p><img alt="" loading="lazy" data-src="https://fastly.jsdelivr.net/gh/bucketio/img16@main/2026/02/17/1771293978238-9f37d07c-3bc9-4da7-9aa1-b1e750afd69f.png" class="lazyload"></p>
<p>ä¸å¾ä¸­å¯ä»¥çåºå¾ææ¾æ¯ä¸ä¸ªåå»çå¨ä½ï¼ä½æ¯ç±äºçªå£é¿åº¦åºå®çåå ï¼å¯¼è´ä¸é¨ååºåç¼ºå¤±ï¼ä¸å¾ç»åºè¯å«ç»æï¼</p>
<p><img alt="" loading="lazy" data-src="https://fastly.jsdelivr.net/gh/bucketio/img13@main/2026/02/17/1771293991565-251bfdcd-4f0c-4384-bad2-ec45caef56a4.png" class="lazyload"></p>
<p>ç¹å¾æåçä¿¡æ¯åæ¯æ­£ç¡®çï¼è¯å«åºä¸éæ²¿åªæ1ä¸ªï¼å¨è®¡ç®ä¼¼ç¶è¿ç¨ä¸­ï¼ç¸åºä½ç½®çä¼¼ç¶ç»æä¹ååºäºè¿ä¸ç¹ï¼æç»çåéªè¡¨ä¸­å¯ä»¥çå°åä¸¤ä¸ªå¤§çæ¦çæ¯åå»ååå»ï¼ä½æ¯é½æ²¡è¶è¿éå¼ï¼æä»¥å¤å®ä¸ºä¸ç¡®å®</p>
<p>è¾¹çåå»æåµç¤ºä¾ï¼</p>
<p><img alt="" loading="lazy" data-src="https://fastly.jsdelivr.net/gh/bucketio/img11@main/2026/02/17/1771294007027-42bf15d6-a5f4-439c-9b7e-9373e29bb1e6.png" class="lazyload"></p>
<p>å¯ä»¥çåºè¿ä¸ªæåµåæ¯åå»ï¼ä½æ¯å®éä¸æ¯ä¸æ®µé¿æåºåï¼ä¸å¾ç»åºè¯å«è¿ç¨ï¼</p>
<p><img alt="" loading="lazy" data-src="https://fastly.jsdelivr.net/gh/bucketio/img11@main/2026/02/17/1771294043631-9760e86e-65e2-4318-ba9a-a81f8662083f.png" class="lazyload"></p>
<p>ç¹å¾ä¿¡æ¯æåæ¯æ­£ç¡®çï¼ç¶åä¼¼ç¶ç»æé½åä½ï¼è¡¨ç¤ºä¸ååæä¸ä¸ªæ¨¡å¼ï¼ä½å¨æç»çåéªç»æä¸­åå»çåéªæ¦çå¼å¸¸çé«ï¼åºè¯¥æ¯å¨å½ä¸åè¿ç¨ä¸­ï¼åå»æ¦çå æ¯æ¯å¶ä»æ¦çå¤§å¾å¤å¯¼è´çï¼è¿ä¹æ¯åæ ·çé®é¢ï¼ä¹å°±æ¯ä¿¡å·å®æ´æ§ç¼ºå¤±å¯¼è´äºè¯¯å¤</p>
<h2 id="æ»ç»">æ»ç»</h2>
<p>å¨è¿æ¬¡å®éªä¸­ï¼åºäºæ´ç´ è´å¶æ¯åç±»æ¹æ³ï¼éè¿<em>æ»å¨çªå£</em>ééæ°æ®ãæåå¤ç»´åº¦ç¹å¾ãè®¡ç®æ¦çåå¸ååºç¨è´å¶æ¯æ´æ°ï¼å­¦å°äºä¸å°ï¼ä¹èåäºå¾å¤åå®¹ï¼ç®æ¯ä¸æ¬¡ä¸å°çå­¦ä¹ ä½éªå§ï¼è½ç¶ç®åæµè¯ä¸æ¥æææéï¼è¿æ æ³çæ­£ç¨å¨é¡¹ç®ä¸­ï¼ä¹æ»ç»äºä¸äºä¸è¶³çå°æ¹ã</p>
<p>æ¯å¦ä¿¡å·å®æ´æ§ä¿è¯ä¸äºï¼ä¸åç¹å¾å±æ§å¯¹ä¸åæ¨¡å¼çæéå®éå¹¶ä¸ä¸è´ç­ï¼è¿äºé½æ¯éè¦è§£å³çé®é¢ï¼è½ç¶å¯¹ç°å¨çææ¥è¯´å¾å°é¾ï¼ä½æ¢ç´¢æ°æ¹æ³çè¿ç¨è¿æ¯è®åæ¬¢çï¼ä¹å¯è½æ¯å¯¹ç°ææ¹æ³çå®¡ç¾ç²å³å¯¼è´çå§ã</p>
<p>ä½æä¸è¯´ä¸ï¼ä¼ ç»çæ¹æ³ï¼è¿æ¯ç®åé«æçï¼ä¹ä¸æ¶åå°ä»ä¹æ°å­¦çåå®¹ï¼å¨å­é»è¾å å¤æ­å°±å¯ä»¥æå®äºï¼çæ¯çæ¶çååã</p>


</div>
<div id="MySignature" role="contentinfo">
    <p>æ¬ææ¥èªåå®¢å­ï¼ä½èï¼<a href="https://www.cnblogs.com/pie-o/" target="_blank">pie_thn</a>ï¼è½¬è½½è¯·æ³¨æåæé¾æ¥ï¼<a href="https://www.cnblogs.com/pie-o/p/19622890" target="_blank">https://www.cnblogs.com/pie-o/p/19622890</a></p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-18 10:39">2026-02-18 10:38</span>&nbsp;
<a href="https://www.cnblogs.com/pie-o">pie_thn</a>&nbsp;
éè¯»(<span id="post_view_count">43</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19622890);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19622890', targetLink: 'https://www.cnblogs.com/pie-o/p/19622890', title: 'è¿ä¹è¡ï¼æé®å¨ä½æ¨¡å¼è¯å«ä¹è½ç¨è´å¶æ¯ï¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Linuxä¸GNU Autotoolså·¥å·åºç¡æç¨ ]]></title>
    <link>https://www.cnblogs.com/ttkwzyttk/p/19621799</link>
    <guid>211199ac9516fe01bae0ab80ebf6ac1b</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ttkwzyttk/p/19621799" title="åå¸äº 2026-02-17 17:24">
    <span role="heading" aria-level="2">Linuxä¸GNU Autotoolså·¥å·åºç¡æç¨</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        æ¬åå®¢ä»ç»äºLinuxä¸GNU Autotoolså·¥å·çåºç¡ç¨æ³ï¼æ¶µçäºautoconfãautomakeç­å·¥å·çåè½åä½ç¨ãéè¿å®ä¾æ¼ç¤ºï¼è®²è§£äºå¦ä½ä½¿ç¨autoconfçæéç½®èæ¬ï¼ä»¥åå¦ä½éè¿automakeåMakefile.amå®å¶æå»ºè¿ç¨ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>å¯¹äºæä»¬å¹³æ¶åçå°çæµè¯Demoç¨åºï¼å¯è½èªå·±æå¨ç¼åä¸ä¸ª<code>Makefile</code>æä»¶å°±å¯ä»¥ç¼è¯æ´ä¸ªé¡¹ç®äºï¼ä½æ¯å¯¹äºä¸äºå¤§åçå·¥ç¨ï¼åå«å¤ä¸ªæºç æä»¶å¤¹ãå¤´æä»¶æä»¶å¤¹ãåºæä»¶æä»¶å¤¹ï¼å¦ææä»¬æ¯ä¸ªæºç æä»¶ç<code>Makefile</code>æä»¶é½èªå·±å»ç¼åä¼éå¸¸ç¹çï¼æä»¥è¿æ¶åéè¦ä¸äºèªå¨åå·¥å·æ¥å¸®å©æä»¬ç®åé¡¹ç®çæå»ºï¼è¿éæ¯è¾ä¸»æµçæä¸¤ç§å·¥å·ä¸ä¸ªæ¯GNUä¸çAutotoolså·¥å·ï¼ä¸ä¸ªæ¯CMakeå·¥å·ã</p>
<p>Autotoolså·¥å·æ¯ä¸äºçæ¬æ¯è¾èçå·¥å·äºï¼éçäºå¾å¤é®é¢ï¼åæ¬ä»çè¯­æ³å¤æ(m4å®è¯­è¨)ï¼æ¶åçå·¥å·ç§ç±»å¤ªå¤ï¼çæç<code>configure</code>èæ¬éå¸¸åºå¤§ç­é®é¢ï¼å¨2000å¹´ååºç°çæ°ä¸ä»£æå»ºç³»ç»åæ¬CMakeãMesonãNinjaç­è½å¤ææè§£å³Autotoolsçåå²çé¾æçï¼å¹¶ä¸è¯­æ³æ´å ç°ä»£åãçæéåº¦æ´å¿«ãé£æä»¬ä¸ºä»ä¹è¿è¦å­¦ä¹ äºè§£Autotoolså¢ï¼å ä¸ºåå²åå ï¼æ©å¹´å¾å¤çå¼æºè½¯ä»¶é½æ¯ä½¿ç¨çAutotoolsæ¥æå»ºçï¼å¹¶ä¸Autotoolsç®åå¨GNUä½ç³»ä¸­è¿æ¯å¤§éä½¿ç¨ï¼å¹¶ä¸å¨åµå¥å¼Linuxä¸­éå¸¸å¸¸è§ï¼èä¸å¨ä¸äºèççCé¡¹ç®ä¸­ä¹éå¸¸å¸¸è§ï¼æä»¥è¿æ¯éå¸¸æå¿è¦äºè§£Autotoolsã</p>
<p>è¿éç»åºå®æ¹çAutotoolsçææ¡£è¿æ¥ <a href="https://www.gnu.org/software/autoconf/" target="_blank" rel="noopener nofollow">https://www.gnu.org/software/autoconf/</a></p>
<h1 id="ä¸autotoolså·¥å·è¯¦ç»ä»ç»">ä¸ãAutotoolså·¥å·è¯¦ç»ä»ç»</h1>
<h2 id="11-autotoolså·¥å·ç»æ">1.1 Autotoolså·¥å·ç»æ</h2>
<p>GNU Autotoolså¹¶ä¸æ¯ä¸ä¸ªå·¥å·ï¼èæ¯ç±ä¸ç³»åçå·¥å·åéç»æï¼å¨ç°å¦ä»çLinuxåè¡çä¸­ï¼å¤§æ¦çæ¯èªå¸¦è¿äºå·¥å·çï¼å¦ææ²¡æå¯ä»¥èªè¡ä¸è½½</p>
<ul>
<li><code>autoscan</code>ï¼è¿ä¸ªå·¥å·ä¸»è¦æ¯ç¨æ¥æ«ææ¥æ¾æºä»£ç ç®å½ä¸çæºæä»¶ç¨æ¥çæ<code>configure.scan</code>æä»¶ã<code>configure.scan</code>æä»¶æ¯èªå¨çæçæ¨¡æ¿ï¼éé¢åå«äºä¸äºç³»ç»éç½®çåºæ¬éé¡¹é½æ¯ä¸äºå®å®ä¹ï¼è¿äºå®éè¿<code>autoconf</code>å·¥å·å¤çåä¼åææ£æ¥ç³»ç»ç¹æ§ãç¯å¢åéçshellèæ¬ï¼æä»¬å¯ä»¥æ ¹æ®è¿ä¸ªæ¨¡æ¿ä¿®æ¹ï¼æåå°<code>configure.scan</code>éæ°å½åä¸º<code>configure.ac</code>æä»¶</li>
<li><code>aclocal</code>ï¼è¿ä¸ªå·¥å·æ¯ä¸ä¸ª<code>perl</code>èæ¬ç¨åºï¼ä»ä¸»è¦ç¨æ¥æ ¹æ®ä¸ä¸æ­¥ç<code>configure.ac</code>æä»¶çåå®¹ï¼èªå¨çæ<code>aclocal.m4</code>æä»¶</li>
<li><code>autoconf</code>ï¼è¿ä¸ªå·¥å·ä¼ä½¿ç¨<code>configure.ac</code>æä»¶æ¥çæåç§°ä¸º<code>configure</code>çshellèæ¬æä»¶ç¨æ¥æ£æ¥ç³»ç»ç¹æ§ä¸ç¯å¢åéï¼è¿è¡è¿ä¸ªèæ¬æä»¶ä¹åï¼å°±ä¼çæ<code>Makefile</code>æä»¶ï¼ä¹åæä»¬å°±å¯ä»¥æ§è¡<code>make</code>å<code>make install</code>å½ä»¤äº</li>
<li><code>autoheader</code>ï¼è¿ä¸ªå·¥å·ä¸»è¦æ¯ç¨æ¥èªå¨çæ<code>config.h.in</code>æä»¶çï¼å½æä»¬æ§è¡äº<code>./configure</code>ä¹åï¼ä¼çæä¸ä¸ª<code>config.h</code>æä»¶ï¼å¨è°ç¨<code>autoheader</code>å·¥å·ä¹åï¼å°±ä¼çæ<code>config.h.in</code>æä»¶</li>
<li><code>automake</code>ï¼ä½¿ç¨<code>automake</code>æ¥äº§ç<code>Makefile.in</code>æä»¶ï¼éè¦æ³¨æçæ¯<code>Makefile.in</code>æ¯ç±<code>Makefile.am</code>çæçè¿ä¸ªéè¦æä»¬æå¨æ¥ç¼å</li>
</ul>
<p>è¿éå¯ä»¥æ³¨æå°ï¼æåå·¥å·ç¨å°çæä»¶é½æ¯ä»¥<code>.in</code>ç»å°¾çæä»¶ï¼è¿äºæä»¶ç¸å½äºæä»¬æåéè¦çç®æ æä»¶çè¾å¥æä»¶</p>
<h2 id="12-configureèæ¬å¶ä½æµç¨">1.2 <code>configure</code>èæ¬å¶ä½æµç¨</h2>
<p>è¿ååå®¹å¯ä»¥åè <a href="https://www.gnu.org/savannah-checkouts/gnu/autoconf/manual/autoconf-2.72/autoconf.html" target="_blank" rel="noopener nofollow">https://www.gnu.org/savannah-checkouts/gnu/autoconf/manual/autoconf-2.72/autoconf.html</a> ææ¡£çç¬¬ä¸ç« åå®¹ï¼è¯¦ç»éè¿°äº<code>configure</code>èæ¬çå¶ä½æµç¨ï¼ä¸é¢ç®åä»ç»ä¸ä¸ï¼ä»¥ä¸å¾æµç¨å¾ä¸­ï¼å¸¦<code>*</code>çæ¯æ§è¡çå½ä»¤ï¼å¸¦<code>[]</code>çè¡¨ç¤ºå¯éé¡¹</p>
<p><img src="https://img2024.cnblogs.com/blog/2652772/202602/2652772-20260217172209097-1180976358.png" alt="Pasted image 20260216122316.png" loading="lazy"><br>
é¦åæ ¹æ®ææ¡£ä¸­çè¿ä¸ªæµç¨å¾ï¼å¯ä»¥çè§ç¨æä»¬çæºæä»¶ï¼éè¿<code>autoscan</code>å½ä»¤çæ<code>configure.scan</code>æä»¶ï¼ç¶åæä»¬åä¿®æ¹è¿ä¸ªæ¨¡æ¿ï¼çææä»¬ç<code>configure.ac</code>æä»¶ï¼å¨éè¿<code>autoconf</code>å½ä»¤çæ<code>configure</code>èæ¬çæ¶åï¼<code>aclocal.m4</code>å<code>acsite.m4</code>è¿ä¸¤ä¸ªæä»¶ä¸ºå¯éé¡¹ï¼å¦ææä»¬åç»­éè¦ä½¿ç¨<code>automake</code>å·¥å·ï¼é£ä¹è¿éè¦å¨æ§è¡<code>autoconf</code>åä½¿ç¨<code>aclocal</code>å·¥å·çæ<code>aclocal.m4</code>æä»¶</p>
<p>å¨æ§è¡<code>autoconf</code>å½ä»¤çåæ¶ï¼æä»¬å¯ä»¥éæ©ä½¿ç¨<code>autoheader</code>æ¥çæ<code>config.h.in</code>æä»¶ãè¿ä¸ªæä»¶çä½ç¨æ¯ä¸º configure æä¾ä¸ä¸ªæ¨¡æ¿ï¼åè¯å®åªäºå®éè¦æ ¹æ®ç³»ç»ç¯å¢è¿è¡æ£æµï¼ä»èçææç»ç<code>config.h</code>æä»¶ï¼ä¾ä»£ç å¨æ¡ä»¶ç¼è¯ä¸­ä½¿ç¨ï¼åéä¼è¯¦ç»è®²è§£è¿é¨ååå®¹ã</p>
<p>å¦ææä»¬è¿éè¦ä½¿ç¨<code>automake</code>å·¥å·æ¥çæ<code>Makefile.in</code>æä»¶ï¼é£ä¹éè¦å¨<code>autoscan</code>çæäº<code>configure.ac</code>æä»¶ä¹åè¿½å ä»¥ä¸çæµç¨<br>
<img src="https://img2024.cnblogs.com/blog/2652772/202602/2652772-20260217172209304-1030423812.png" alt="Pasted image 20260216132616.png" loading="lazy"><br>
ç¬¬ä¸æ­¥ï¼æä»¬éè¦ä½¿ç¨<code>aclocal</code>å½ä»¤æ¥çæ<code>aclocal.m4</code>æä»¶ï¼æäºè¿ä¸ªæä»¶ä¹åï¼æä»¬å¨çæ<code>configure</code>çæ¶åä¼ä½¿ç¨å°è¿ä¸ªæä»¶ï¼ç¶åç¬¬äºæ­¥æä»¬éè¦èªå·±ç¼åä¸ä¸ª<code>Makefile.am</code>æä»¶ï¼ç¶åæ§è¡<code>automake</code>å½ä»¤æ¥çæ<code>Makefile.in</code></p>
<p>åå®ä¸è¿°ä¸¤ä¸ªæµç¨ä¹åï¼æä»¬å°±å¯ä»¥å¾å°ä¸¤ä¸ªå³é®æä»¶äºä¸ä¸ªæ¯<code>configure</code>èæ¬æä»¶ï¼ä¸ä¸ªæ¯<code>Makefile.in</code>æ¨¡æ¿æä»¶ï¼å¨éè¿ä»¥ä¸æµç¨ï¼çææåç<code>Makefile</code>æä»¶<br>
<img src="https://img2024.cnblogs.com/blog/2652772/202602/2652772-20260217172209082-1911362763.png" alt="Pasted image 20260216133225.png" loading="lazy"><br>
ç´æ¥æ§è¡<code>configure</code>èæ¬æä»¶ï¼èæ¬ä¼å»æ¾<code>config.h.in</code>å<code>Makefile.in</code>æä»¶è¿è¡æä»¶çæï¼æåçæ<code>config.h</code>å<code>Makefile</code>æä»¶ï¼ä¹åæä»¬å°±å¯ä»¥æ§è¡<code>make</code>å½ä»¤æ¥ç¼è¯å·¥ç¨äº</p>
<p>å¯è½è¿éä¸ä¸ªå¾çå³ç³»æ¯è¾æ··ä¹±ï¼åé¢ä¼éè¿ä¸ä¸ªå·¥ç¨ä¸çå®ä¾ï¼æ¥å·ä½æ¼ç¤º<code>Autotools</code>çä½¿ç¨ä»¥åæµç¨</p>
<h2 id="13-autoheaderå·¥å·ä¸confighinæä»¶">1.3 <code>autoheader</code>å·¥å·ä¸<code>config.h.in</code>æä»¶</h2>
<p>åé¢æä»¬æå°äºä½¿ç¨<code>autoconf</code>çæ<code>configure</code>çåæ¶ï¼å¯ä»¥ä½¿ç¨<code>autoheader</code>æ¥çæ<code>config.h.in</code>æä»¶ï¼è¿ä¸ªæä»¶å°åºæ¯ç¨æ¥å¹²ä»ä¹çå¢ï¼è¿ä¸å°èè¯¦ç»è®²è§£ä¸ä¸ã</p>
<p>ä¾å¦ï¼ç°å¨æä¸ä¸ªåºæ¯ï¼æä»¬çåºç¨ä»£ç éè¦è·¨å¹³å°ï¼å¨ Linux ç¯å¢ä¸ï¼ä¼ä½¿ç¨å° <code>&lt;unistd.h&gt;</code> å¤´æä»¶ãä¸åç³»ç»å¯è½æ¯å¦å­å¨è¿ä¸ªå¤´æä»¶ä¸åï¼å æ­¤æä»¬å¸æéè¿èªå¨åçæ¹å¼è¿è¡æ£æµåééãæä»¬éè¦åå¨<code>configure.ac</code>æä»¶ä¸­æ·»å éç½®é¡¹</p>
<pre><code>AC_INIT([example], [1.0])
AC_CONFIG_HEADERS([config.h])
AC_CHECK_HEADERS([unistd.h])
AC_OUTPUT
</code></pre>
<ul>
<li><code>AC_CONFIG_HEADERS([config.h])</code>ï¼åè¯ Autotools æç»éè¦çæ <code>config.h</code> æä»¶</li>
<li><code>AC_CHECK_HEADERS([unistd.h])</code>ï¼åç¥ Autotools éè¦æ£æµç³»ç»æ¯å¦æ <code>&lt;unistd.h&gt;</code>ï¼å¹¶çæç¸åºå® <code>HAVE_UNISTD_H</code></li>
</ul>
<p>å½æä»¬å¨<code>configure.ac</code>ä¸­æ·»å äºè¿äºéé¡¹ä¹åï¼å¯ä»¥è¿è¡<code>autoheader</code>å½ä»¤æ¥çæ<code>config.h.in</code>ï¼è¿æ¶çæ¨¡æ¿æä»¶ä¸­ä¼æä»¥ä¸è¿æ ·çè®°å½</p>
<pre><code>/* Define to 1 if you have the &lt;unistd.h&gt; header file. */
#undef HAVE_UNISTD_H
</code></pre>
<ul>
<li>æ³¨æï¼<code>#undef HAVE_UNISTD_H</code> åªæ¯å ä½å®ï¼å¼è¿æ²¡æç¡®å®</li>
<li>è¿ä¸ªå®çåå­æ¯ç± AC_CHECK_HEADERS èªå¨çæç</li>
</ul>
<p>æäº<code>config.h.in</code>æä»¶ä¹åï¼å¦ææä»¬è¿è¡äº<code>./configure</code>åï¼å·¥å·ä¼æ£æµç³»ç»ä¸­æ¯å¦æ<code>&lt;unistd.h&gt;</code>æ ¹æ®æç»ç»ææ¥çæ<code>config.h</code>å¤´æä»¶ï¼å¦æåå«æé£ä¹å¨<code>config.h</code>æä»¶ä¸­ï¼å°±ä¼å¤åº</p>
<pre><code class="language-c">#define HAVE_UNISTD_H 1

//å¦ææ²¡æè¯¥å¤´æä»¶çè¯
/* #undef HAVE_UNISTD_H */
</code></pre>
<p>åç»­æä»¬å°±å¯ä»¥éè¿åå«<code>config.h</code>æä»¶æ¥è¿è¡æ¡ä»¶ç¼è¯äºï¼è¿æ ·ä»£ç å¯ä»¥å¨ä¸åå¹³å°ä¸èªå¨ééï¼èä¸éè¦æå¨ä¿®æ¹</p>
<pre><code class="language-c">#include "config.h"

#ifdef HAVE_UNISTD_H
#include &lt;unistd.h&gt;
#endif

int main() {
#ifdef HAVE_UNISTD_H
    write(1, "unistd.h exists\n", 16);
#else
    printf("unistd.h not found\n");
#endif
    return 0;
}
</code></pre>
<p>æ»ç»ï¼</p>
<ul>
<li><code>config.h.in</code> = <strong>æ¨¡æ¿æä»¶</strong>ï¼ååºå¾æ£æµçå®</li>
<li><code>./configure</code> = <strong>ç³»ç»æ£æµå¨</strong>ï¼ææ¨¡æ¿å®å¡«ä¸å®éå¼</li>
<li><code>config.h</code> = <strong>æç»å®å®ä¹æä»¶</strong>ï¼ä»£ç æ¡ä»¶ç¼è¯ä½¿ç¨</li>
<li>æ¡ä»¶ç¼è¯è¯­å¥ (<code>#ifdef</code>) æ°¸è¿éè¦å¼åèå¨ä»£ç éèªå·±å</li>
</ul>
<h1 id="äºautotoolså®ä¾åæ">äºãAutotoolså®ä¾åæ</h1>
<p>è¿ä¸ç« èä¸»è¦æ¯å¯¹autotoolsçå·ä½ä½¿ç¨ä¸¾ä¾ã</p>
<p><strong>ç¬¬ä¸æ­¥</strong>ï¼åå»ºdemoå·¥ç¨é¡¹ç®ï¼æ°å»ºäºä¸ä¸ªæºç æä»¶å¤¹ï¼åå»ºä¸ä¸ªcæä»¶ï¼ç¼åäºä¸ä¸ªç®åçä»£ç ã<br>
<img src="https://img2024.cnblogs.com/blog/2652772/202602/2652772-20260217172209096-1334942740.png" alt="Pasted image 20260216140420.png" loading="lazy"></p>
<p><strong>ç¬¬äºæ­¥</strong>ï¼çæ<code>configure.ac</code>æä»¶ãå¨æºç è·¯å¾ä¸æ§è¡äº<code>autoscan</code>å½ä»¤ä¹åï¼å¯ä»¥çè§<code>configure.scan</code>æä»¶å·²ç»çæåºæ¥äº<br>
<img src="https://img2024.cnblogs.com/blog/2652772/202602/2652772-20260217172209334-698108259.png" alt="Pasted image 20260216141414.png" loading="lazy"><br>
å¯ä»¥æå¼è¿ä¸ªæä»¶æ¥çï¼å°±æ¯ä¸äºåè½å®å®ä¹<br>
<img src="https://img2024.cnblogs.com/blog/2652772/202602/2652772-20260217172209314-113774963.png" alt="Pasted image 20260216141527.png" loading="lazy"><br>
å®è§£éï¼</p>
<ul>
<li><code>AC_PREREQ()</code>å®å£°ææ¬æä»¶è¦æ±çautoconfçæ¬ï¼æ¬ä¾ä½¿ç¨ççæ¬ä¸º2.71</li>
<li><code>AC_INIT()</code>ä¸­åå«çæ¯: è½¯ä»¶åçåå­ï¼çæ¬ï¼ä½èçèç³»æ¹å¼(ä¸è¬æ¯Email)</li>
<li><code>AC_CONFIG_SRCDIR</code>å®ç¨æ¥ä¾¦æµææå®çæºç æä»¶æ¯å¦å­å¨ï¼æ¥ç¡®å®æºç ç®å½çæææ§ãæ­¤å¤ä¸ºå½åç®å½ä¸çtest.cï¼å¦ææå¤ä¸ªæºæä»¶çè¯éæ©ä¸ä¸ªä¸»è¦çæä»¶ï¼éå¸¸æ¯ <code>main.c</code> æå¶ä»ä»£è¡¨æºä»£ç ä½ç½®çæä»¶ã</li>
<li><code>AC_CONFIG_HEADER</code>å®ç¨äºçæconfig.hæä»¶ï¼ä»¥ä¾¿autoheaderä½¿ç¨</li>
<li><code>AC_PROG_CC</code>ç¨æ¥æå®ç¼è¯å¨ï¼å¦æä¸æå®ï¼éç¨é»è®¤gccã æ¯å¦: AC_PROG_CC(gcc)</li>
<li><code>AC_OUTPUT</code>ç¨æ¥è®¾å® configure æè¦äº§ççæä»¶ï¼å¦ææ¯makefileï¼configureä¼æå®æ£æ¥åºæ¥çç»æå¸¦å¥makefile.inæä»¶äº§çåéçmakefileãä½¿ç¨Automakeæ¶ï¼è¿éè¦ä¸äºå¶ä»çåæ°ï¼è¿äºé¢å¤çå®ç¨aclocalå·¥å·äº§ç</li>
</ul>
<p>è¿äºå®å¯ä»¥ç´æ¥å° <a href="https://www.gnu.org/savannah-checkouts/gnu/autoconf/manual/autoconf-2.72/autoconf.html#Making-configure-Scripts" target="_blank" rel="noopener nofollow">https://www.gnu.org/savannah-checkouts/gnu/autoconf/manual/autoconf-2.72/autoconf.html#Making-configure-Scripts</a> å®æ¹ææ¡£ä¸­å»æ¥è¯¢</p>
<p>æåä¿®æ¹è¿ä¸ªæ¨¡æ¿æä»¶ï¼å¡«å¥èªå·±çè½¯ä»¶ä¿¡æ¯ï¼å¹¶å°<code>configure.scan</code>éå½åä¸º<code>configure.ac</code>æä»¶<br>
<img src="https://img2024.cnblogs.com/blog/2652772/202602/2652772-20260217172209315-856118383.png" alt="Pasted image 20260216160011.png" loading="lazy"><br>
è¿éæå ç¹éè¦æ³¨æï¼ç¬¬ä¸å°±æ¯æ³¨æå¡«åå¥½èªå·±è½¯ä»¶çä¿¡æ¯ï¼ç¬¬äºå°±æ¯å¦ææä»¬åç»­è¦ä½¿ç¨<code>automake</code>å·¥å·çè¯ï¼éè¦æ·»å ä¸è¡<code>AM_INIT_AUTOMAKE</code>ï¼å¹¶ä¸éè¦æå®æå»ºè¡ä¸ºå¸¸ç¨çéé¡¹ä¸º<code>[foreign]</code>å¦æä¸æå®çè¯ï¼å°±æ¯<code>[gnu]</code>ä¸¥æ ¼æ¨¡å¼ï¼ä¼æ£æ¥AUTHORSãNEWSãREADMEãChangeLogãCOPYINGãINSTALLç­æä»¶ï¼å¦æç¼ºå¤±çè¯ï¼åç»­ä½¿ç¨<code>automake</code>å°±ä¼æ¥éï¼è¿æ¯æè¸©çä¸ä¸ªåï¼å¯¹äºç°ä»£çé¡¹ç®ï¼å¤§å¤æ°ä½¿ç¨<code>git</code>ä»£ç ç®¡çï¼å¯¹äºè¿äºæä»¶æä¸äºæ¯ä¸å¿è¦çï¼æä»¥è¿éå¯ä»¥å³é­GNU strictæ¨¡å¼ï¼å¦æä½ éè¦ä½¿ç¨GNUçä¸¥æ ¼æ¨¡å¼çè¯ï¼åå»ºè¿äºæéæä»¶å°±å¯ä»¥è§£å³æ¥éãç¬¬ä¸ç¹å°±æ¯è®°å¾æ·»å è¾åºæä»¶åè¡¨çå®<code>AC_CONFIG_FILES([æä»¶å])</code>è¿ä¸ç¹ç¼è¾å¥½ä¹åï¼ä¸ä¸ªåºç¡ç<code>configure.ac</code>å°±ç¼è¾å¥½äº</p>
<p><strong>ç¬¬ä¸æ­¥</strong>ï¼çæ<code>aclocal.m4</code>æä»¶ï¼å ä¸ºæä»¬åç»­è¦ä½¿ç¨å°<code>automake</code>å·¥å·ï¼éè¦ä¾èµ<code>aclocal.m4</code>æä»¶ï¼æä»¥è¿ä¸æ­¥éè¿<code>aclocal</code>æ¥çæ<code>aclocal.m4</code>æä»¶<br>
<img src="https://img2024.cnblogs.com/blog/2652772/202602/2652772-20260217172209281-1527369101.png" alt="Pasted image 20260216144207.png" loading="lazy"></p>
<p>å¯ä»¥çè§æ§è¡äº<code>aclocal</code>ä¹åï¼<code>aclocal.m4</code>æä»¶æåè¾åºäº</p>
<p><strong>ç¬¬åæ­¥</strong>ï¼çæ<code>config.h.in</code>æä»¶ï¼å ä¸ºæä»¬å¨<code>configure</code>ä¸­ä½¿ç¨äºå®æ£æ¥ï¼éè¦è¾åº<code>config.h</code>ï¼æä»¥æä»¬éè¦åçæ<code>config.h.in</code><br>
<img src="https://img2024.cnblogs.com/blog/2652772/202602/2652772-20260217172209256-1503264093.png" alt="Pasted image 20260216144505.png" loading="lazy"><br>
æ§è¡<code>autoheader</code>å½ä»¤ä¹åï¼<code>config.h.in</code>ä¹æåçæäº</p>
<p><strong>ç¬¬äºæ­¥</strong>ï¼çæ<code>configure</code>æä»¶ï¼ä½¿ç¨<code>autoconf</code>å½ä»¤å¾å°<code>configure</code>èæ¬æä»¶<br>
<img src="https://img2024.cnblogs.com/blog/2652772/202602/2652772-20260217172209281-1821923245.png" alt="Pasted image 20260216145556.png" loading="lazy"><br>
å¦æè¿æ¶åæä»¬ç´æ¥è¿è¡è¿ä¸ªèæ¬ï¼å¯ä»¥åç°ï¼ç¼ºå°<code>install-sh</code>èæ¬ï¼è¿ä¸ªèæ¬å°±æ¯éè¿<code>automake</code>æ¥çæç<br>
<img src="https://img2024.cnblogs.com/blog/2652772/202602/2652772-20260217172209052-662252426.png" alt="Pasted image 20260216145731.png" loading="lazy"></p>
<p><strong>ç¬¬å­æ­¥</strong>ï¼ç¼å<code>Makefile.am</code>æä»¶ï¼æ§è¡<code>automake</code>å½ä»¤ãè¿éåªåäºä¸ä¸ªæ¯è¾ç®åç<code>Makefile.am</code>è¿è¡æµè¯<br>
<img src="https://img2024.cnblogs.com/blog/2652772/202602/2652772-20260217172209025-2002039184.png" alt="Pasted image 20260216161303.png" loading="lazy"><br>
<code>Makefile.am</code>æä»¶ç¼åè§èéå¸¸éè¦ï¼è¿éæåºæè¸©å°çå¦å¤ä¸ä¸ªåï¼<code>Makefile.am</code>æä»¶ä¸­çè¿ä¸¤ä¸ªå®å®ä¹ï¼å¿é¡»å¾è§èå¦åä¹ä¼çåºéè¯¯æèè­¦åã</p>
<p><code>bin_PROGRAMS</code>çå«ä¹æ¯çæä¸ä¸ªå¯æ§è¡æä»¶ testï¼å¹¶å¨ <code>make install</code> æ¶å®è£å°<code>$(bindir)</code>ï¼ä¸è¬æåµä¸<code>$(bindir) = /usr/local/bin</code><br>
<code>test_SOURCES</code>çç»æä¸º<code>&lt;ç®æ å&gt;_SOURCES</code>ç®æ åå¿é¡»å<code>bin_PROGRAMS</code>çç¨åºåå®å¨ä¸è´ï¼å¦å Automake ä¼æ¥é</p>
<p>é¤äº<code>bin_PROGRAMS</code>è¿æå¶ä»Automakeåé¨å·²ç»å®ä¹å¥½çå®è£ç®å½åé</p>
<table>
<thead>
<tr>
<th>åé</th>
<th>å®è£ç®å½</th>
</tr>
</thead>
<tbody>
<tr>
<td>bin_PROGRAMS</td>
<td>$(bindir) â /usr/local/bin</td>
</tr>
<tr>
<td>sbin_PROGRAMS</td>
<td>$(sbindir)</td>
</tr>
<tr>
<td>libexec_PROGRAMS</td>
<td>$(libexecdir)</td>
</tr>
<tr>
<td>noinst_PROGRAMS</td>
<td>ä¸å®è£ï¼åªç¼è¯</td>
</tr>
<tr>
<td>check_PROGRAMS</td>
<td>æµè¯ç¨åº</td>
</tr>
<tr>
<td>å·ä½å¶ä»å®çåè½ï¼å¤§å®¶å¯ä»¥æ¥çå®æ¹çææ¡£ï¼è¿ç¯æç« ä¸»è¦æ¯autotoolså·¥å·çä½¿ç¨ï¼è¿éå°±ä¸æ·±å¥åæåºå±äº</td>
<td></td>
</tr>
</tbody>
</table>
<p>è¿æä¸ä¸ªéè¦æ³¨æçç¹æ¯ï¼å¦ææä»¬è¿æ¶åç´æ¥ä½¿ç¨<code>automake</code>å½ä»¤ï¼ä¼æç¤ºæ¥éï¼å·¥å·ä¹å¯¹æä»¬ç»§ç»­äºæç¤ºéè¦å ä¸<code>--add-missing</code>éé¡¹ï¼æ·»å éé¡¹--add-missing å¯ä»¥è®©automakeå·¥å·èªå¨æ·»å å¿è¦çèæ¬æä»¶ï¼è¿éä¹å¯ä»¥çè§å¦æ<code>AM_INIT_AUTOMAKE</code>æ²¡æå³é­GNUçä¸¥æ ¼æ¨¡å¼ï¼ä¼æ¥åºç¼ºå¤±å¿è¦æä»¶çéè¯¯ãè¿éæ¯å ä¸ºè¿å¼ å¾æ¯æ²¡æä¿®æ¹çæ¶åæªåçï¼ä¿®æ¹ä¹åææ²¡æéæ°<code>automake</code><br>
<img src="https://img2024.cnblogs.com/blog/2652772/202602/2652772-20260217172209349-1310847039.png" alt="Pasted image 20260216150528.png" loading="lazy"><br>
å ä¸è¯¥éé¡¹ï¼å¹¶ä¿®æ¹äº<code>AM_INIT_AUTOMAKE</code>ä¹åï¼åæ¬¡æ§è¡<code>automake</code>å½ä»¤æ§è¡æåï¼å¹¶æåçæ<code>Makefile.in</code>æä»¶å<code>install-sh</code>æä»¶<br>
<img src="https://img2024.cnblogs.com/blog/2652772/202602/2652772-20260217172209051-539778253.png" alt="Pasted image 20260216151252.png" loading="lazy"></p>
<p><strong>ç¬¬ä¸æ­¥</strong>ï¼æ§è¡<code>configure</code>èæ¬ï¼æ´å·<code>Makfile.in</code>ã<code>config.h.in</code>çææåçæä»¶ã<br>
<img src="https://img2024.cnblogs.com/blog/2652772/202602/2652772-20260217172209360-2035713464.png" alt="Pasted image 20260216163034.png" loading="lazy"><br>
å¯ä»¥çè§æåçæäº<code>config.status</code>ä»¥å<code>Makefile</code>æä»¶ï¼æå¼è¯¥<code>Makefile</code>æä»¶ï¼å¯ä»¥çè§çæäº700å¤è¡<br>
<img src="https://img2024.cnblogs.com/blog/2652772/202602/2652772-20260217172209182-33307432.png" alt="Pasted image 20260216164053.png" loading="lazy"><br>
æä»¬éå¸¸ç®åçä¸ä¸ªä»£ç ï¼<code>autotools</code>å·¥å·ç»æä»¬çæäº700å¤è¡ç<code>Makefile</code>æä»¶ï¼å¶ä¸­å¤§éçä»£ç é½æ¯ç¨æ¥æ£æµç¯å¢åç¼è¯å¨ç¸å³çåå®¹ãæäº<code>Makefile</code>ä¹åï¼æä»¬å°±å¯ä»¥ç´æ¥ä½¿ç¨<code>make</code>å½ä»¤æ¥ç¼è¯äº<br>
<img src="https://img2024.cnblogs.com/blog/2652772/202602/2652772-20260217172209147-1035686151.png" alt="Pasted image 20260216164308.png" loading="lazy"><br>
å¹¶ä¸çæäºå¯¹åºçå¯æ§è¡æä»¶ï¼åæ¶æä»¬å¯ä»¥æ§è¡<code>make install</code>è¿è¡ç³»ç»å®è£ï¼é»è®¤å®è£å°<code>/user/local/bin</code>ä¸ï¼éè¦æ³¨æçæ¯ä½¿ç¨<code>make install</code>æ¶éè¦æéã<br>
<img src="https://img2024.cnblogs.com/blog/2652772/202602/2652772-20260217172209129-81980537.png" alt="Pasted image 20260216164615.png" loading="lazy"></p>
<p>æä»¬å¯ä»¥ä½¿ç¨<code>make dist</code>ç¨æ¥çæä¸ä¸ªæºç åç¼©åï¼æ¿å°è¿ä¸ªåä¹åï¼æä»¬å°±å¯ä»¥å°å·¥ç¨åå¸ç»å«äººæèåå¸æreleaseçæ¬äº<br>
<img src="https://img2024.cnblogs.com/blog/2652772/202602/2652772-20260217172209359-157961370.png" alt="Pasted image 20260216164748.png" loading="lazy"><br>
è³æ­¤æ´ä¸ª<code>Autotools</code>æåºæ¬çæµç¨ä¸ç¨æ³å°±ç»æäºï¼å½ç¶å¨å®éå¼åå½ä¸­ï¼æä»¬ä¸å¯è½åªæä¸ä¸ªæºæä»¶ï¼ä¹åçåå®¢ä¼å¯¹å®éå·¥ç¨é¡¹ç®æåµä¸¾ä¾ä¸åæã</p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-17 17:25">2026-02-17 17:24</span>&nbsp;
<a href="https://www.cnblogs.com/ttkwzyttk">ttkwzyttk</a>&nbsp;
éè¯»(<span id="post_view_count">49</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19621799);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19621799', targetLink: 'https://www.cnblogs.com/ttkwzyttk/p/19621799', title: 'Linuxä¸GNU Autotoolså·¥å·åºç¡æç¨' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ é¶ä»£ç é¶åºç¡ï¼å°çº¢ä¹¦MCPå¨èªå¨åè¿è¥ãä¿å§çº§å®è£æç¨ã ]]></title>
    <link>https://www.cnblogs.com/ChenAI-TGF/p/19621617</link>
    <guid>0279bb2fb9f8db58b64386b8bd2f9842</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ChenAI-TGF/p/19621617" title="åå¸äº 2026-02-17 13:49">
    <span role="heading" aria-level="2">é¶ä»£ç é¶åºç¡ï¼å°çº¢ä¹¦MCPå¨èªå¨åè¿è¥ãä¿å§çº§å®è£æç¨ã</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        å°çº¢ä¹¦MCPèªå¨åå·¥å·é¨ç½²æå æè¦ï¼æ¬æè¯¦ç»ä»ç»å¦ä½å¿«éé¨ç½²å°çº¢ä¹¦MCPèªå¨åè¿è¥å·¥å·ãéè¿ä¸è½½é¢ç¼è¯å®è£åï¼å®æNode.jsç¯å¢éç½®åï¼è¿è¡ç»å½å·¥å·è·åcookies.jsonè®¤è¯æä»¶ï¼å¯å¨MCPä¸»æå¡å¹¶éªè¯è¿æ¥ãæåæ¥å¥Cursorç¼è¾å¨å®ç°èªç¶è¯­è¨æ§å¶ï¼æ¼ç¤ºäºè´¦å·ç¶ææ£æ¥åå¾æåå¸ç­æ ¸å¿åè½ãæ´ä¸ªè¿ç¨æ éå¤æéç½®ï¼éåæ°æå¿«éå®ç°å°çº¢ä¹¦åå®¹èªå¨åç®¡çã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>@</p><div class="toc"><div class="toc-container-header">ç®å½</div><ul><li><a href="#ä¸åè¨" rel="noopener nofollow">ä¸ãåè¨</a></li><li><a href="#äºåå¤å·¥ä½" rel="noopener nofollow">äºãåå¤å·¥ä½</a><ul><li><a href="#21-ç³»ç»ç¯å¢è¯´æ" rel="noopener nofollow">2.1 ç³»ç»ç¯å¢è¯´æ</a></li><li><a href="#22-å¿è£ä¾èµä»2ä¸ªæç®" rel="noopener nofollow">2.2 å¿è£ä¾èµï¼ä»2ä¸ªï¼æç®ï¼</a><ul><li><a href="#1nodejsç¨äºmcpè¿æ¥éªè¯" rel="noopener nofollow">ï¼1ï¼Node.jsï¼ç¨äºMCPè¿æ¥éªè¯ï¼</a></li><li><a href="#2ç½ç»ç¯å¢" rel="noopener nofollow">ï¼2ï¼ç½ç»ç¯å¢</a></li></ul></li><li><a href="#23-ä¸è½½å°çº¢ä¹¦mcpå®è£å" rel="noopener nofollow">2.3 ä¸è½½å°çº¢ä¹¦MCPå®è£å</a></li></ul></li><li><a href="#ä¸é¨ç½²å°çº¢ä¹¦mcpæå¡" rel="noopener nofollow">ä¸ãé¨ç½²å°çº¢ä¹¦MCPæå¡</a><ul><li><a href="#31-è§£åå®è£åå¹¶ç¡®è®¤æä»¶ç»æ" rel="noopener nofollow">3.1 è§£åå®è£åå¹¶ç¡®è®¤æä»¶ç»æ</a></li><li><a href="#32-è¿è¡ç»å½å·¥å·å®æå°çº¢ä¹¦è®¤è¯" rel="noopener nofollow">3.2 è¿è¡ç»å½å·¥å·å®æå°çº¢ä¹¦è®¤è¯</a></li><li><a href="#33-å¯å¨mcpä¸»æå¡" rel="noopener nofollow">3.3 å¯å¨MCPä¸»æå¡</a></li><li><a href="#34-éªè¯mcpæå¡æ¯å¦æ­£å¸¸" rel="noopener nofollow">3.4 éªè¯MCPæå¡æ¯å¦æ­£å¸¸</a></li></ul></li><li><a href="#åæ¥å¥cursorç¼è¾å¨" rel="noopener nofollow">åãæ¥å¥Cursorç¼è¾å¨</a><ul><li><a href="#41-æ¾å°cursorçmcpéç½®æä»¶" rel="noopener nofollow">4.1 æ¾å°CursorçMCPéç½®æä»¶</a></li><li><a href="#42-éç½®mcpè¿æ¥ä¿¡æ¯" rel="noopener nofollow">4.2 éç½®MCPè¿æ¥ä¿¡æ¯</a></li><li><a href="#43-éªè¯cursorä¸mcpçè¿æ¥" rel="noopener nofollow">4.3 éªè¯Cursorä¸MCPçè¿æ¥</a></li></ul></li><li><a href="#äºcursorä¸­ä½¿ç¨å°çº¢ä¹¦mcpå®æ" rel="noopener nofollow">äºãCursorä¸­ä½¿ç¨å°çº¢ä¹¦MCPå®æ</a><ul><li><a href="#51-åºç¡åè½æ£æ¥ç»å½ç¶æ" rel="noopener nofollow">5.1 åºç¡åè½ï¼æ£æ¥ç»å½ç¶æ</a></li><li><a href="#52-æ ¸å¿åè½åå¸å°çº¢ä¹¦å¾æ" rel="noopener nofollow">5.2 æ ¸å¿åè½ï¼åå¸å°çº¢ä¹¦å¾æ</a><ul><li><a href="#æ­¥éª¤1åå¤åå¸ç´ æ" rel="noopener nofollow">æ­¥éª¤1ï¼åå¤åå¸ç´ æ</a></li><li><a href="#æ­¥éª¤2å¨cursorä¸­åéåå¸æä»¤" rel="noopener nofollow">æ­¥éª¤2ï¼å¨Cursorä¸­åéåå¸æä»¤</a></li><li><a href="#æ­¥éª¤3æ¥çåå¸ç»æ" rel="noopener nofollow">æ­¥éª¤3ï¼æ¥çåå¸ç»æ</a></li></ul></li><li><a href="#53-å¶ä»å¸¸ç¨åè½è°ç¨" rel="noopener nofollow">5.3 å¶ä»å¸¸ç¨åè½è°ç¨</a></li></ul></li><li><a href="#å­å¸¸è§é®é¢ä¸è§£å³æ¹æ¡" rel="noopener nofollow">å­ãå¸¸è§é®é¢ä¸è§£å³æ¹æ¡</a><ul><li><a href="#é®é¢1ç»å½å·¥å·è¿è¡åæ å¼¹çªä¸è½½æµè§å¨å¤±è´¥" rel="noopener nofollow">é®é¢1ï¼ç»å½å·¥å·è¿è¡åæ å¼¹çª/ä¸è½½æµè§å¨å¤±è´¥</a></li><li><a href="#é®é¢2cursoræç¤ºæ æ³è¿æ¥å°mcpæå¡" rel="noopener nofollow">é®é¢2ï¼Cursoræç¤ºãæ æ³è¿æ¥å°MCPæå¡ã</a></li><li><a href="#é®é¢3åå¸å¾ææç¤ºå¾çè·¯å¾éè¯¯" rel="noopener nofollow">é®é¢3ï¼åå¸å¾ææç¤ºãå¾çè·¯å¾éè¯¯ã</a></li><li><a href="#é®é¢4è´¦å·è¢«è¸¢ä¸çº¿" rel="noopener nofollow">é®é¢4ï¼è´¦å·è¢«è¸¢ä¸çº¿</a></li></ul></li><li><a href="#ä¸æ»ç»" rel="noopener nofollow">ä¸ãæ»ç»</a></li></ul></div><br>
<img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202602/3724025-20260217134826390-1997227127.png" class="lazyload"><p></p>
<h1 id="ä¸åè¨">ä¸ãåè¨</h1>
<p>å°çº¢ä¹¦MCPï¼xiaohongshu-mcpï¼æ¯ä¸æ¬¾è½å®ç°å°çº¢ä¹¦èªå¨åè¿è¥çå·¥å·ï¼æ¯æç»å½éªè¯ãå¾æ/è§é¢åå¸ãè¯è®ºäºå¨ãç¨æ·ä¿¡æ¯æ¥è¯¢ç­æ ¸å¿åè½ãç¸æ¯æºç ç¼è¯ãDockeré¨ç½²ï¼<strong>ä¸è½½é¢ç¼è¯å®è£å</strong>æ¯æå¿«æ·çæ¹å¼ï¼æ ééç½®å¼åç¯å¢ï¼æ°æä¹è½å¿«éä¸æã</p>
<p><img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202602/3724025-20260217134826481-1730190254.png" class="lazyload"></p>
<p>æ¬æå°å¨ç¨åºäºãå®è£åä¸è½½ãçæ¹å¼ï¼ææææä½ å®æå°çº¢ä¹¦MCPçé¨ç½²ãæ¥å¥Cursorç¼è¾å¨ï¼å¹¶æ¼ç¤ºæ ¸å¿åè½çä½¿ç¨ï¼è®©ä½ è½»æ¾å®ç°å°çº¢ä¹¦åå®¹çèªå¨åç®¡çã</p>
<h1 id="äºåå¤å·¥ä½">äºãåå¤å·¥ä½</h1>
<h2 id="21-ç³»ç»ç¯å¢è¯´æ">2.1 ç³»ç»ç¯å¢è¯´æ</h2>
<p>æ¯æçç³»ç»çæ¬ï¼è¯·å¯¹åºä¸è½½ï¼ï¼</p>
<ul>
<li>macOSï¼Apple Siliconï¼arm64ï¼/ Intelï¼amd64ï¼</li>
<li>Windowsï¼x64ï¼Windows 10/11 åå¯ï¼</li>
<li>Linuxï¼x64</li>
</ul>
<p><img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202602/3724025-20260217134826268-607533091.png" class="lazyload"></p>
<h2 id="22-å¿è£ä¾èµä»2ä¸ªæç®">2.2 å¿è£ä¾èµï¼ä»2ä¸ªï¼æç®ï¼</h2>
<h3 id="1nodejsç¨äºmcpè¿æ¥éªè¯">ï¼1ï¼Node.jsï¼ç¨äºMCPè¿æ¥éªè¯ï¼</h3>
<p>æ è®ºåªä¸ªç³»ç»ï¼å»ºè®®éè¿å®æ¹æ¨èæ¹å¼å®è£Node.js LTSçæ¬ï¼ç¡®ä¿ç¯å¢åéèªå¨éç½®ï¼</p>
<ul>
<li>Windowsï¼æå¼ãç®¡çåå½ä»¤è¡ãæ§è¡<pre><code class="language-bash">winget install OpenJS.NodeJS.LTS
</code></pre>
</li>
<li>macOS/Linuxï¼åè <a href="https://nodejs.org/zh-cn/download/" target="_blank" rel="noopener nofollow">Node.jså®æ¹ä¸è½½é¡µ</a> å®è£LTSçæ¬</li>
</ul>
<h3 id="2ç½ç»ç¯å¢">ï¼2ï¼ç½ç»ç¯å¢</h3>
<p>é¦æ¬¡è¿è¡ä¼èªå¨ä¸è½½æ å¤´æµè§å¨ï¼çº¦150MBï¼ï¼éç¡®ä¿ç½ç»éçï¼åç»­æ ééå¤ä¸è½½ã</p>
<h2 id="23-ä¸è½½å°çº¢ä¹¦mcpå®è£å">2.3 ä¸è½½å°çº¢ä¹¦MCPå®è£å</h2>
<ol>
<li>æå¼ <a href="https://github.com/xpzouying/xiaohongshu-mcp/releases" target="_blank" rel="noopener nofollow">xiaohongshu-mcpçGitHub Releasesé¡µé¢</a></li>
<li>æ ¹æ®èªå·±çç³»ç»ä¸è½½å¯¹åºå®è£åï¼
<ul>
<li>Windows x64ï¼<code>xiaohongshu-mcp-windows-amd64.zip</code></li>
<li>macOS Apple Siliconï¼<code>xiaohongshu-mcp-darwin-arm64.zip</code></li>
<li>macOS Intelï¼<code>xiaohongshu-mcp-darwin-amd64.zip</code></li>
<li>Linux x64ï¼<code>xiaohongshu-mcp-linux-amd64.zip</code></li>
</ul>
</li>
<li>ä¸è½½å®æåï¼å°åç¼©åè§£åå°ä»»æç®å½ï¼å»ºè®®è·¯å¾ä¸å«ä¸­æ/ç©ºæ ¼ï¼æ¯å¦ <code>D:\xiaohongshu-mcp</code> æ <code>/Users/ä½ çç¨æ·å/xiaohongshu-mcp</code>ï¼ã</li>
</ol>
<p><img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202602/3724025-20260217134826250-1736615909.png" class="lazyload"></p>
<p>æ³¨æcookies.jsonæ¯ç»å½ä¹åæä¼æçï¼ååè§£åå®åªä¼ææåèµ·æ¥çè¿ä¸¤ä¸ª</p>
<h1 id="ä¸é¨ç½²å°çº¢ä¹¦mcpæå¡">ä¸ãé¨ç½²å°çº¢ä¹¦MCPæå¡</h1>
<h2 id="31-è§£åå®è£åå¹¶ç¡®è®¤æä»¶ç»æ">3.1 è§£åå®è£åå¹¶ç¡®è®¤æä»¶ç»æ</h2>
<p>è§£ååç®å½åä¼åå«ä¸¤ä¸ªæ ¸å¿æä»¶ï¼ä»¥Windowsä¸ºä¾ï¼ï¼</p>
<ul>
<li><code>xiaohongshu-login-windows-amd64.exe</code>ï¼ç»å½å·¥å·ï¼å¿åè¿è¡ï¼</li>
<li><code>xiaohongshu-mcp-windows-amd64.exe</code>ï¼MCPä¸»æå¡ç¨åº</li>
</ul>
<blockquote>
<p>å¶ä»ç³»ç»å¯¹åºæä»¶ï¼macOSæ¯<code>xiaohongshu-login-darwin-arm64</code>/<code>xiaohongshu-mcp-darwin-arm64</code>ï¼Linuxæ¯<code>xiaohongshu-login-linux-amd64</code>/<code>xiaohongshu-mcp-linux-amd64</code>ã</p>
</blockquote>
<h2 id="32-è¿è¡ç»å½å·¥å·å®æå°çº¢ä¹¦è®¤è¯">3.2 è¿è¡ç»å½å·¥å·å®æå°çº¢ä¹¦è®¤è¯</h2>
<p>è¿æ¯æ ¸å¿æ­¥éª¤ï¼MCPæå¡ä¾èµç»å½åçCookiesæè½æ­£å¸¸å·¥ä½ï¼</p>
<ol>
<li>æå¼ç»ç«¯/å½ä»¤è¡ï¼è¿å¥è§£åç®å½ï¼
<ul>
<li>Windowsï¼å¨è§£åæä»¶å¤¹ç©ºç½å¤å³é® â ãå¨ç»ç«¯ä¸­æå¼ã</li>
<li>macOS/Linuxï¼æå¼ç»ç«¯ï¼æ§è¡ <code>cd /ä½ çè§£åè·¯å¾/xiaohongshu-mcp</code></li>
</ul>
</li>
<li>è¿è¡ç»å½å·¥å·ï¼
<ul>
<li>Windowsï¼<pre><code class="language-bash">./xiaohongshu-login-windows-amd64.exe
</code></pre>
</li>
<li>macOS/Linuxï¼<pre><code class="language-bash">chmod +x xiaohongshu-login-darwin-arm64  # èµäºæ§è¡æéï¼ä»é¦æ¬¡ï¼
./xiaohongshu-login-darwin-arm64
</code></pre>
</li>
</ul>
</li>
<li>ç»å½æµç¨ï¼
<ul>
<li>è¿è¡åä¼èªå¨ä¸è½½æ å¤´æµè§å¨ï¼èå¿ç­å¾ï¼ï¼</li>
<li>å¼¹åºå°çº¢ä¹¦ç»å½é¡µé¢ï¼æ«ç /ææºå·ç»å½åå¯ï¼ï¼</li>
<li>ç»å½æååï¼ç»ç«¯ä¼æç¤ºãç»å½æåãï¼å¹¶èªå¨çæ <code>cookies.json</code> æä»¶ï¼ä¿å­å¨å½åç®å½ï¼åå¿å é¤ï¼ã</li>
</ul>
</li>
</ol>
<p><img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202602/3724025-20260217134826456-357020171.png" class="lazyload"></p>
<blockquote>
<p>â ï¸ éè¦æéï¼å°çº¢ä¹¦è´¦å·ä¸åè®¸å¤ç½é¡µç«¯ç»å½ï¼ç»å½MCPåï¼ä¸è¦å¨å¶ä»æµè§å¨ç»å½åä¸è´¦å·ï¼å¦åä¼è¢«è¸¢ä¸çº¿ï¼ææºAppç»å½ä¸åå½±åï¼ã</p>
</blockquote>
<h2 id="33-å¯å¨mcpä¸»æå¡">3.3 å¯å¨MCPä¸»æå¡</h2>
<p>ç»å½æååï¼ç»§ç»­å¨ç»ç«¯æ§è¡ä»¥ä¸å½ä»¤å¯å¨MCPæå¡ï¼</p>
<ul>
<li>Windowsï¼<pre><code class="language-bash"># æ å¤´æ¨¡å¼ï¼æ æµè§å¨çé¢ï¼æ¨èçäº§ä½¿ç¨ï¼
./xiaohongshu-mcp-windows-amd64.exe

# éæ å¤´æ¨¡å¼ï¼ææµè§å¨çé¢ï¼è°è¯ç¨ï¼
./xiaohongshu-mcp-windows-amd64.exe -headless=false
</code></pre>
</li>
<li>macOS/Linuxï¼<pre><code class="language-bash">chmod +x xiaohongshu-mcp-darwin-arm64  # èµäºæ§è¡æéï¼ä»é¦æ¬¡ï¼
# æ å¤´æ¨¡å¼
./xiaohongshu-mcp-darwin-arm64
# éæ å¤´æ¨¡å¼
./xiaohongshu-mcp-darwin-arm64 -headless=false
</code></pre>
</li>
</ul>
<p>å¯å¨æåçæ å¿ï¼ç»ç«¯æ æ¥éï¼ä¸æ¾ç¤ºãMCPæå¡å¯å¨æåï¼ç«¯å£ï¼18060ãï¼é»è®¤ç«¯å£18060ï¼è¯·å¿å ç¨ï¼ã<br>
<img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202602/3724025-20260217134826366-1928280314.png" class="lazyload"></p>
<h2 id="34-éªè¯mcpæå¡æ¯å¦æ­£å¸¸">3.4 éªè¯MCPæå¡æ¯å¦æ­£å¸¸</h2>
<p>æ§è¡ä»¥ä¸å½ä»¤éªè¯æå¡å¯ç¨æ§ï¼</p>
<pre><code class="language-bash">npx @modelcontextprotocol/inspector
</code></pre>
<p><img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202602/3724025-20260217134826236-865946138.png" class="lazyload"><br>
<img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202602/3724025-20260217134826278-100637996.png" class="lazyload"><br>
å·¦ä¸è§<strong>Transport Type</strong>ä¸ææ¡ï¼æSTDIOæ¹æ<strong>Streamable HTTP</strong>ï¼<br>
æ¹å®åçé¢ä¼åºç°URLè¾å¥æ¡ï¼æhttp://localhost:18060/mcpå¡«å°è¿ä¸ª <strong>URL æ¡é</strong>ï¼<br>
ç¹å»å·¦ä¾§ç<strong>Connect</strong>æé®ã<br>
æåæ å¿ï¼<strong>å·¦ä¸è§æ¾ç¤ºConnected</strong><img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202602/3724025-20260217134826448-859099986.png" class="lazyload"></p>
<p>ç¹å»ä¸­é´çList Tools<br>
ä¸­é´åºåå è½½åºå°çº¢ä¹¦ MCP çææå·¥å· / è½ååè¡¨ã<br>
<img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202602/3724025-20260217134826275-1832051686.png" class="lazyload"></p>
<h1 id="åæ¥å¥cursorç¼è¾å¨">åãæ¥å¥Cursorç¼è¾å¨</h1>
<p>Cursoræ¯æ¯æMCPåè®®çAIç¼è¾å¨ï¼æ¥å¥åå¯ç´æ¥å¨Cursorä¸­éè¿èªç¶è¯­è¨è°ç¨å°çº¢ä¹¦MCPçææåè½ï¼æ éæå¨åæ¥å£è¯·æ±ã</p>
<h2 id="41-æ¾å°cursorçmcpéç½®æä»¶">4.1 æ¾å°CursorçMCPéç½®æä»¶</h2>
<ol>
<li>æå¼Cursorç¼è¾å¨ï¼</li>
<li>ç¡®è®¤CursorçMCPéç½®ç®å½ï¼
<ul>
<li>æ ¸å¿éç½®æä»¶è·¯å¾åèï¼<code>.cursor/mcp.json</code>ï¼å¯å¨Cursorçãè®¾ç½®âMCPãä¸­æ¾å°éç½®å¥å£ï¼æç´æ¥å¨é¡¹ç®æ ¹ç®å½åå»ºè¯¥æä»¶ï¼ã</li>
</ul>
</li>
</ol>
<p><img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202602/3724025-20260217134826297-2001856026.png" class="lazyload"><br>
<img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202602/3724025-20260217134828063-439635824.png" class="lazyload"></p>
<h2 id="42-éç½®mcpè¿æ¥ä¿¡æ¯">4.2 éç½®MCPè¿æ¥ä¿¡æ¯</h2>
<p>åå»º/ç¼è¾ <code>.cursor/mcp.json</code> æä»¶ï¼åå¥ä»¥ä¸åå®¹ï¼</p>
<pre><code class="language-json">{
    "mcpServers": {
        "xiaohongshu-mcp": {
            "url": "http://localhost:18060/mcp",
            "description": "å°çº¢ä¹¦åå®¹åå¸æå¡ - MCP Streamable HTTP"
        }
    }
}
</code></pre>
<p>ä¿å­æä»¶åï¼éå¯Cursorè®©éç½®çæã</p>
<p><img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202602/3724025-20260217134826211-705245728.png" class="lazyload"></p>
<h2 id="43-éªè¯cursorä¸mcpçè¿æ¥">4.3 éªè¯Cursorä¸MCPçè¿æ¥</h2>
<ol>
<li>æå¼Cursorï¼æ°å»ºä¸ä¸ªå¯¹è¯çªå£ï¼</li>
<li>å¨è¾å¥æ¡ä¸­è¾å¥ï¼<code>æ£æ¥å°çº¢ä¹¦MCPçç»å½ç¶æ</code>ï¼</li>
<li>åéæä»¤åï¼Cursorä¼èªå¨è°ç¨å°çº¢ä¹¦MCPçãæ£æ¥ç»å½ç¶æãåè½ï¼è¿åãå½åè´¦å·å·²ç»å½ãå³ä»£è¡¨æ¥å¥æåã</li>
</ol>
<h1 id="äºcursorä¸­ä½¿ç¨å°çº¢ä¹¦mcpå®æ">äºãCursorä¸­ä½¿ç¨å°çº¢ä¹¦MCPå®æ</h1>
<h2 id="51-åºç¡åè½æ£æ¥ç»å½ç¶æ">5.1 åºç¡åè½ï¼æ£æ¥ç»å½ç¶æ</h2>
<p>å¨Cursorå¯¹è¯æ¡ä¸­è¾å¥ï¼</p>
<pre><code>æ£æ¥æçå°çº¢ä¹¦è´¦å·ç»å½ç¶æ
</code></pre>
<p>åéåï¼MCPä¼è¿åå½åè´¦å·çç»å½ç¶æï¼å·²ç»å½/æªç»å½ï¼ï¼å¦ææªç»å½ï¼ééæ°è¿è¡ç»å½å·¥å·ã</p>
<p><img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202602/3724025-20260217134826496-2091563314.png" class="lazyload"><br>
<img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202602/3724025-20260217134826184-11959037.png" class="lazyload"></p>
<h2 id="52-æ ¸å¿åè½åå¸å°çº¢ä¹¦å¾æ">5.2 æ ¸å¿åè½ï¼åå¸å°çº¢ä¹¦å¾æ</h2>
<h3 id="æ­¥éª¤1åå¤åå¸ç´ æ">æ­¥éª¤1ï¼åå¤åå¸ç´ æ</h3>
<ul>
<li>æ¬å°å¾çï¼å°å¾çæ¾å°MCPè§£åç®å½ç <code>images</code> æä»¶å¤¹ï¼æ²¡æåæ°å»ºï¼ï¼</li>
<li>ææ¡ï¼æ é¢ï¼â¤20å­ï¼+ æ­£æï¼â¤1000å­ï¼+ æ ç­¾ï¼å¯éï¼ã</li>
</ul>
<h3 id="æ­¥éª¤2å¨cursorä¸­åéåå¸æä»¤">æ­¥éª¤2ï¼å¨Cursorä¸­åéåå¸æä»¤</h3>
<pre><code>@xiaohongshu-mcp åå¸ä¸ç¯å°çº¢ä¹¦å¾æï¼æ é¢ï¼ãæ°æå¿ççMCPé¨ç½²æç¨ãï¼æ­£æï¼ãæ éç¼è¯æºç ï¼ä¸è½½å®è£åå°±è½é¨ç½²å°çº¢ä¹¦MCPï¼éCursoræ¥å¥å¨æµç¨ï½ãï¼å¾çä½¿ç¨æ¬å°è·¯å¾ï¼/Users/ä½ çç¨æ·å/xiaohongshu-mcp/images/æç¨å°é¢.jpgï¼æ·»å æ ç­¾ï¼#MCP #å°çº¢ä¹¦èªå¨å #Cursor
</code></pre>
<blockquote>
<p>æ³¨æï¼</p>
<ul>
<li>å¾çè·¯å¾éåç»å¯¹è·¯å¾ï¼Windowsç¤ºä¾ï¼<code>D:\xiaohongshu-mcp\images\æç¨å°é¢.jpg</code>ï¼ï¼</li>
<li>æ é¢åæ­£æéç¬¦åå°çº¢ä¹¦å­æ°éå¶ï¼æ é¢â¤20å­ï¼æ­£æâ¤1000å­ï¼ã</li>
</ul>
</blockquote>
<p><img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202602/3724025-20260217134826498-377358087.png" class="lazyload"></p>
<h3 id="æ­¥éª¤3æ¥çåå¸ç»æ">æ­¥éª¤3ï¼æ¥çåå¸ç»æ</h3>
<p>åéæä»¤åï¼Cursorä¼è¿ååå¸è¿åº¦ï¼æååå¯å¨å°çº¢ä¹¦Appä¸­æ¥çåå¸çç¬è®°ã</p>
<h2 id="53-å¶ä»å¸¸ç¨åè½è°ç¨">5.3 å¶ä»å¸¸ç¨åè½è°ç¨</h2>
<ul>
<li>åå¸è§é¢ï¼<pre><code>@xiaohongshu-mcp åå¸å°çº¢ä¹¦è§é¢ï¼æ é¢ï¼ãMCPé¨ç½²å®ææ¼ç¤ºãï¼æ­£æï¼ãææææä½ é¨ç½²å°çº¢ä¹¦MCPï½ãï¼è§é¢è·¯å¾ï¼/Users/ä½ çç¨æ·å/xiaohongshu-mcp/videos/æ¼ç¤º.mp4
</code></pre>
</li>
<li>è·åç¨æ·ä¸ªäººä¸»é¡µï¼<pre><code>@xiaohongshu-mcp è·åç¨æ·IDä¸º123456çå°çº¢ä¹¦ä¸ªäººä¸»é¡µä¿¡æ¯
</code></pre>
</li>
<li>åè¡¨è¯è®ºï¼<pre><code>@xiaohongshu-mcp ç»å¸å­IDä¸º741852çå°çº¢ä¹¦ç¬è®°åè¡¨è¯è®ºï¼ãæç¨è¶å®ç¨ï¼ã
</code></pre>
</li>
</ul>
<h1 id="å­å¸¸è§é®é¢ä¸è§£å³æ¹æ¡">å­ãå¸¸è§é®é¢ä¸è§£å³æ¹æ¡</h1>
<h2 id="é®é¢1ç»å½å·¥å·è¿è¡åæ å¼¹çªä¸è½½æµè§å¨å¤±è´¥">é®é¢1ï¼ç»å½å·¥å·è¿è¡åæ å¼¹çª/ä¸è½½æµè§å¨å¤±è´¥</h2>
<ul>
<li>åå ï¼ç½ç»éå¶ææéä¸è¶³ï¼</li>
<li>è§£å³æ¹æ¡ï¼
<ol>
<li>ç¡®ä¿ç½ç»è½è®¿é®å¤ç½ï¼æåæ¢ç½ç»éè¯ï¼</li>
<li>Windowséä»¥ç®¡çåèº«ä»½è¿è¡ç»ç«¯ï¼macOS/Linuxéèµäºæä»¶æ§è¡æéï¼<code>chmod +x æä»¶å</code>ï¼ã</li>
</ol>
</li>
</ul>
<h2 id="é®é¢2cursoræç¤ºæ æ³è¿æ¥å°mcpæå¡">é®é¢2ï¼Cursoræç¤ºãæ æ³è¿æ¥å°MCPæå¡ã</h2>
<ul>
<li>åå ï¼MCPæå¡æªå¯å¨/ç«¯å£è¢«å ç¨/éç½®æä»¶è·¯å¾éè¯¯ï¼</li>
<li>è§£å³æ¹æ¡ï¼
<ol>
<li>æ£æ¥MCPæå¡æ¯å¦æ­£å¸¸è¿è¡ï¼ç»ç«¯æ¯å¦æ¾ç¤ºç«¯å£18060ï¼ï¼</li>
<li>ç¡®è®¤ <code>.cursor/mcp.json</code> ä¸­çURLæ¯ <code>http://localhost:18060/mcp</code>ï¼</li>
<li>æ£æ¥18060ç«¯å£æ¯å¦è¢«å ç¨ï¼Windowsï¼<code>netstat -ano | findstr 18060</code>ï¼macOS/Linuxï¼<code>lsof -i:18060</code>ï¼ï¼å ç¨åå³é­å¯¹åºè¿ç¨ã</li>
</ol>
</li>
</ul>
<h2 id="é®é¢3åå¸å¾ææç¤ºå¾çè·¯å¾éè¯¯">é®é¢3ï¼åå¸å¾ææç¤ºãå¾çè·¯å¾éè¯¯ã</h2>
<ul>
<li>åå ï¼å¾çè·¯å¾ä¸æ¯ç»å¯¹è·¯å¾/æªæ¾å°æå®ç®å½ï¼</li>
<li>è§£å³æ¹æ¡ï¼
<ol>
<li>ä½¿ç¨ç»å¯¹è·¯å¾ï¼å¦ <code>D:\xiaohongshu-mcp\images\test.jpg</code>ï¼ï¼</li>
<li>ç¡®ä¿å¾çæä»¶å­å¨ï¼ä¸è·¯å¾æ ä¸­æ/ç©ºæ ¼ã</li>
</ol>
</li>
</ul>
<h2 id="é®é¢4è´¦å·è¢«è¸¢ä¸çº¿">é®é¢4ï¼è´¦å·è¢«è¸¢ä¸çº¿</h2>
<ul>
<li>åå ï¼åä¸è´¦å·å¨å¶ä»ç½é¡µç«¯ç»å½ï¼</li>
<li>è§£å³æ¹æ¡ï¼
<ol>
<li>éåºå¶ä»ç½é¡µç«¯çå°çº¢ä¹¦ç»å½ï¼</li>
<li>éæ°è¿è¡ç»å½å·¥å·ï¼éæ°çæCookiesã</li>
</ol>
</li>
</ul>
<h1 id="ä¸æ»ç»">ä¸ãæ»ç»</h1>
<p>éè¿ãä¸è½½å®è£åãçæ¹å¼é¨ç½²å°çº¢ä¹¦MCPï¼å¨ç¨æ ééç½®å¤æçå¼åç¯å¢ï¼å¦GolangãDockerï¼ï¼æ°æä¹è½å¨10åéåå®æé¨ç½²ãæ¥å¥Cursoråï¼å¯ç´æ¥éè¿èªç¶è¯­è¨è°ç¨MCPçææåè½ï¼å®ç°å°çº¢ä¹¦ç»å½éªè¯ãå¾æ/è§é¢åå¸ãè¯è®ºäºå¨ç­èªå¨åæä½ã</p>
<p>â ï¸ é£é©æç¤ºï¼è¯¥å·¥å·ä»ç¨äºå­¦ä¹ åä¸ªäººåæ³è¿è¥ï¼è¯·å¿ç¨äºè¿è§æä½ï¼Cookiesè¿æåééæ°ç»å½ï¼æ­£å¸¸ä½¿ç¨ä¸ä¸ä¼å¯¼è´è´¦å·å°ç¦ã</p>
<p>å¦æå¨é¨ç½²è¿ç¨ä¸­éå°é®é¢ï¼å¯åèé¡¹ç®çå®æ¹ææ¡£ï¼<a href="https://github.com/xpzouying/xiaohongshu-mcp" target="_blank" rel="noopener nofollow">xiaohongshu-mcp README</a>ï¼ï¼æå¨GitHub Issuesä¸­æé®ã</p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-17 13:49">2026-02-17 13:49</span>&nbsp;
<a href="https://www.cnblogs.com/ChenAI-TGF">TTGF</a>&nbsp;
éè¯»(<span id="post_view_count">112</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19621617);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19621617', targetLink: 'https://www.cnblogs.com/ChenAI-TGF/p/19621617', title: 'é¶ä»£ç é¶åºç¡ï¼å°çº¢ä¹¦MCPå¨èªå¨åè¿è¥ãä¿å§çº§å®è£æç¨ã' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ [æè§£LangChainæ§è¡å¼æ]éæä¸ä¸æå¨Pregelä¸­çåºç¨ ]]></title>
    <link>https://www.cnblogs.com/jaydenai/p/19621105/static-context-in-pregel</link>
    <guid>e06b092fffece272e4cf73ce32b9ce89</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/jaydenai/p/19621105/static-context-in-pregel" title="åå¸äº 2026-02-17 08:23">
    <span role="heading" aria-level="2">[æè§£LangChainæ§è¡å¼æ]éæä¸ä¸æå¨Pregelä¸­çåºç¨</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        å¨ Pregel æ¨¡åä¸­ï¼éæä¸ä¸ææ¯ä¸ä¸ªä¸é¨è®¾è®¡çä¾èµæ³¨å¥å®¹å¨ãå®çåºç°æ¯ä¸ºäºè§£å³å¨å¤æçå¾è®¡ç®ä¸­ï¼å¦ä½ä¼éå°å¤çâä¸å±äºå¾ç¶æï¼ä½Nodeè¿è¡åå¿é¡»ä¾èµçå¤é¨ç¯å¢ä¿¡æ¯âè¿ä¸çç¹ãè¿äºæ°æ®å·æä¸ä¸ªå±åçæ§è´¨ï¼é£å°±æ¯å¨æ´ä¸ªè¿è¡çå½å¨æååªè¯»ä¸åºå®ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>å¨ Pregel æ¨¡åä¸­ï¼éæä¸ä¸ææ¯ä¸ä¸ªä¸é¨è®¾è®¡çä¾èµæ³¨å¥å®¹å¨ãå®çåºç°æ¯ä¸ºäºè§£å³å¨å¤æçå¾è®¡ç®ä¸­ï¼å¦ä½ä¼éå°å¤çâä¸å±äºå¾ç¶æï¼ä½Nodeè¿è¡åå¿é¡»ä¾èµçå¤é¨ç¯å¢ä¿¡æ¯âè¿ä¸çç¹ãè¿äºæ°æ®å·æä¸ä¸ªå±åçæ§è´¨ï¼é£å°±æ¯å¨æ´ä¸ªè¿è¡çå½å¨æååªè¯»ä¸åºå®ï¼æ¯å¦ï¼</p>
<ul>
<li>èº«ä»½ä¿¡æ¯ï¼å½ååèµ·è¯·æ±çuser_idãorg_idã</li>
<li>å¤é¨å®¢æ·ç«¯ï¼å·²å®ä¾åçdb_connectionãredis_clientãvector_storeã</li>
<li>ç­ç¥çº¦æï¼å½åä»»å¡çsafety_levelæbudget_limitã</li>
</ul>
<p>éæä¸ä¸ææ¯ Pregel è¿è¡æ¶æä¾çä¸ä¸ªç±»åå®å¨çç¯å¢åéå®¹å¨ãå®å°æ§è¡ç¯å¢ï¼Contextï¼ä¸ä¸å¡è½¨è¿¹ï¼Stateï¼ç©çéç¦»ï¼ä½¿å¾å¤§å Agent ç³»ç»çæ¶ææ´å æ¨¡ååï¼ä¹æ´å®¹æå¨å¤æççäº§ç¯å¢ä¸è¿è¡æµè¯åè°è¯ã</p>
<p>ä¸åäºä»¥å¾å­å¸å½¢å¼çéç½®ï¼éæä¸ä¸æéç¨å¼ºç±»å Schema å®ä¹æ¹æ³ãç±äºå¶éæåªè¯»çç¹æ§ï¼å®å¨æ´ä¸ªçå½å¨æåä¿æä¸è´æ§ãéæä¸ä¸æå·æ<code>åæ¬¡è¿è¡éå®</code>æºå¶ï¼è¿ä¿è¯Pregelå¯¹è±¡ä¸æ¦è¢«è°ç¨ï¼ä¸ä¸æå¯¹è±¡å¨ææNodeãææ Superstepä¸­å¼ç¨çæ¯åä¸ä¸ªåå­å°åãå®ç<code>éæä¹å</code>ç¹æ§è¿ä¸æ­¥ç¡®ä¿å®ä¸ä¼è¢«åå¥Checkpointï¼æä»¥å½Pregelå ä¸ºéè¯¯åæ­¢å¹¶ä»æ­ç¹æ¢å¤æ¶ï¼æä»¬å¿é¡»éæ°æä¾ä¸ä¸ªç¸åçä¸ä¸æå¯¹è±¡ãç»¼ä¸æç¤ºï¼éæä¸ä¸æä½ä¸ºéåºååçãè¿è¡æ¶ç<code>æè·¯æ³¨å¥</code>èå­å¨ã</p>
<p>éæä¸ä¸æå¨Pregelè¢«ä½ä¸º<code>Runtime</code>çä¸é¨åæ¥ä¼ éçãå¦ä¸æç¤ºçRuntimeç±»çæ³ååæ°ConextTæçå°±æ¯éæä¸ä¸ææ°æ®ç±»åãé¤äºè¿åè¯¥ä¸ä¸æç<code>context</code>å­æ®µï¼Runtimeè¿å·æé¢å¤ä¸ä¸ªå­æ®µåå«è¿åç¨äºé¿æå­å¨ç<code>store</code>å­æ®µï¼è¿åä¸ä¸ªBaseStoreå¯¹è±¡ï¼ãå®ç°âcustomâæµæ¨¡å¼ç<code>stream_writer</code>å­æ®µï¼è¿åä¸ä¸ªStreamWriterå¯¹è±¡ï¼ï¼ä»¥åæä¾å½åä¼è¯ä¸ä¸ä¸ªè¿åå¼ç<code>previous</code>å­æ®µã</p>
<pre><code class="language-python">@dataclass(**_DC_KWARGS)
class Runtime(Generic[ContextT]):
    context: ContextT = field(default=None
    store: BaseStore | None = field(default=None)
    stream_writer: StreamWriter = field(default=_no_op_stream_writer)
    previous: Any = field(default=None)
</code></pre>
<p>Pregelèç¹çå¤çå½æ°è¯»åéæä¸ä¸ææ¯è¾ç¹çï¼ä»¥ä¸ºé¤äºæ¿è½½è¾å¥çåæ°ï¼ä¸è¬æ¯ä¸ä¸ªå­å¸ï¼ï¼æä»¬åªè½é¢å¤å®ä¹ä¸ä¸ª<code>RunnableConfig</code>ç±»åçåæ°ï¼æå³çåºæ¬ä¸åºåå§è¾å¥å¤çå¶ä»ä»»å¡ä¿¡æ¯é½å¾ä»è¿ä¸ªRunnableConfigéç½®ä¸­æåãRunnableConfigæ¯ä¸ä¸ªå­å¸ï¼æä»¥æä»¬è¦æåæéæ°æ®çåææ¯å¾é¢åç¥éå¯¹ç¨å¾Keyãè¿æ ·è®¾è®¡ä¹è½çè§£ï¼å ä¸ºLangGraph.Pregeå¨æ´ä¸ª<code>LangChainå®å®</code>ä¸­ä½ä¸º<code>æ§è¡å¼æ</code>èå­å¨ï¼å®ç¸å½äºLangChainä½ç³»ç<code>åæ ¸</code>ãPregelæä¾çAPIæ¬å°±ä¸æ¯éå¯¹Agentåºç¨å¼åèï¼å¯¹å¼åèåå¥½ä¸æ¯Pregelå¾è®¾è®¡ç®æ ï¼ä¿æè¿ä¸ªåæ ¸è¶³å¤ç®æ´æ´éè¦ã</p>
<p>RunnableConfigå¯¹è±¡ä¼è´¯ç©¿æ´ä¸ªPregelå¼æçæ§è¡ï¼ä¸æ¸¸æµç¨å©ç¨è¿ä¸ªå®åä¸æ¸¸ä¼ éæéçç»ä»¶åæ§å¶ä¿¡æ¯ï¼ä¼ éçä¿¡æ¯å¤§é½è¢«è³äº<code>configurable</code>å­èç¹ä¸ãå¦æå¯¹åºçKeyä»¥<code>__pregel_</code>ä½ä¸ºåç¼ï¼è¡¨ç¤ºè¯¥æ¡ç®å¶å®æ¯ç±Pregelåé¨ä½¿ç¨çãRuntimeå¯¹åºçKeyä¸º<code>__pregel_runtime</code>ã</p>
<p>å¦ä¸è¿ä¸ªä¾å­æ¼ç¤ºäºå¦ä½å£°æãæå®åè¯»åéæä¸ä¸æãæä»¬å®ä¹ä¸ä¸ªæ¿è½½åºæ¬ç¨æ·ä¿¡æ¯çUserInfoæ°æ®ç±»åä½ä¸ºéæä¸ä¸æçSchemaãä½ä¸ºPregelå¯ä¸çNodeï¼å¶å¤çå½æ°æä¾äºä¸ä¸ª<code>RunnableConfig</code>ç±»åçåæ°ï¼æä»¬ä»ä¸­æä¾ä½ä¸ºè¿è¡æ¶çRuntimeå¯¹è±¡ï¼è¿èå¾å°ä½ä¸ºéæä¸ä¸æçUserInfoå¯¹è±¡ã</p>
<pre><code class="language-python">from langchain_core.runnables import RunnableConfig
from langgraph.pregel import Pregel, NodeBuilder
from typing import Any, Literal
from langgraph.channels import LastValue
from langgraph.runtime import Runtime
from dataclasses import dataclass

@dataclass
class UserInfo:
    id: str
    name: str
    gender: Literal["male", "female"]

def handle(args: dict[str, Any], config: RunnableConfig) -&gt; str:
    runtime: Runtime = config["configurable"]["__pregel_runtime"]
    return runtime.context.__repr__()

node = (NodeBuilder()
    .subscribe_only("start")
    .write_to("output")
    .do(handle))
    
app = Pregel(
    nodes={"body": node},
    channels={"start": LastValue(None), "output": LastValue(str)},
    input_channels=["start"],
    output_channels=["output"],
    context_schema=UserInfo,
)

user = UserInfo(id="123", name="Alice", gender="female")
result = app.invoke(input={"start": None}, context=user)
assert result["output"] == user.__repr__()
</code></pre>
<p>å¨åå»ºPregelå¯¹è±¡çæ¶åï¼ä½ä¸ºéæä¸ä¸æçUserInfoç±»åç´æ¥ä»¥æé å½æ°ç<code>context_schema</code>åæ°è¿è¡å£°æãå¨è°ç¨å¶<code>invoke</code>æ¹æ³çæ¶åå°±éè¿contextåæ°å°æå®çUserInfoå¯¹è±¡ä½ä¸ºéæä¸ä¸æä¼ éãéæä¸ä¸æçè®¾è®¡åè¡·å°±æ¯ä¸ºäºè§é¿åºååçéå¶ãå®åè®¸æä»¬å°å¤æçãééçº§çãå¸¦æå¤é¨ä¾èµçå¯¹è±¡çç´æ¥æ³¨å¥ï¼èä¸ä¼ç ´å Pregel æ¨¡åå¯¹<code>ç¶æä¸è´æ§</code>å<code>å¯æä¹å</code>çè¦æ±ã</p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-17 08:23">2026-02-17 08:23</span>&nbsp;
<a href="https://www.cnblogs.com/jaydenai">JaydenAI</a>&nbsp;
éè¯»(<span id="post_view_count">46</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19621105);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19621105', targetLink: 'https://www.cnblogs.com/jaydenai/p/19621105/static-context-in-pregel', title: '[æè§£LangChainæ§è¡å¼æ]éæä¸ä¸æå¨Pregelä¸­çåºç¨' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ OpenClaw+OpenViking + NVIDIA API éç½®æç¨ ]]></title>
    <link>https://www.cnblogs.com/swizard/p/19622926</link>
    <guid>f666ac2f677d945355ac420bb03a9781</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/swizard/p/19622926" title="åå¸äº 2026-02-18 10:56">
    <span role="heading" aria-level="2">OpenClaw+OpenViking + NVIDIA API éç½®æç¨</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<blockquote>
<p>æ¬æç¨ä»ç»å¦ä½å¨ OpenClaw ç¯å¢ä¸­éç½® OpenVikingï¼ä½¿ç¨ NVIDIA NIM API ä½ä¸º Embedding å VLM åç«¯ã</p>
</blockquote>
<h2 id="ä»ä¹æ¯-openviking">ä»ä¹æ¯ OpenVikingï¼</h2>
<p>OpenViking æ¯ç«å±±å¼æå¼æºç <strong>AI Agent ä¸ä¸ææ°æ®åº</strong>ãå®ç¨"èææä»¶ç³»ç»"çæ¹å¼ç®¡ç Agent çè®°å¿ãèµæºåæè½ï¼æä¾ï¼</p>
<ul>
<li><strong>åå±ä¸ä¸æ</strong>ï¼L0æè¦ / L1æ¦è§ / L2å¨æï¼æéå è½½èç Token</li>
<li><strong>è¯­ä¹æç´¢</strong>ï¼èåç®å½å®ä½ä¸åéæ£ç´¢</li>
<li><strong>èªå¨æè¦</strong>ï¼VLM èªå¨çæææ¡£æè¦åæ¦è§</li>
<li><strong>ä¼è¯è®°å¿</strong>ï¼èªå¨æåå¯¹è¯ä¸­çé¿æè®°å¿</li>
</ul>
<p>GitHub: <a href="https://github.com/volcengine/OpenViking" target="_blank" rel="noopener nofollow">https://github.com/volcengine/OpenViking</a></p>
<h2 id="åç½®æ¡ä»¶">åç½®æ¡ä»¶</h2>
<ul>
<li>Python 3.9+</li>
<li>NVIDIA NIM API Keyï¼<a href="https://build.nvidia.com/" target="_blank" rel="noopener nofollow">åè´¹æ³¨å</a>ï¼</li>
<li>ç¨³å®çç½ç»è¿æ¥</li>
</ul>
<hr>
<h2 id="ç¬¬ä¸æ­¥å®è£-openviking">ç¬¬ä¸æ­¥ï¼å®è£ OpenViking</h2>
<pre><code class="language-bash">pip install openviking
</code></pre>
<hr>
<h2 id="ç¬¬äºæ­¥åå»ºéç½®æä»¶">ç¬¬äºæ­¥ï¼åå»ºéç½®æä»¶</h2>
<p>åå»ºç®å½åéç½®æä»¶ï¼</p>
<pre><code class="language-bash">mkdir -p ~/.openviking
</code></pre>
<p>ç¼è¾ <code>~/.openviking/ov.conf</code>ï¼</p>
<pre><code class="language-json">{
  "embedding": {
    "dense": {
      "api_base": "https://integrate.api.nvidia.com/v1",
      "api_key": "ä½ çNVIDIA_API_KEY",
      "provider": "openai",
      "dimension": 4096,
      "model": "nvidia/nv-embed-v1"
    }
  },
  "vlm": {
    "api_base": "https://integrate.api.nvidia.com/v1",
    "api_key": "ä½ çNVIDIA_API_KEY",
    "provider": "openai",
    "model": "meta/llama-3.3-70b-instruct"
  }
}
</code></pre>
<h3 id="éç½®è¯´æ">éç½®è¯´æ</h3>
<table>
<thead>
<tr>
<th>åæ°</th>
<th>è¯´æ</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>api_base</code></td>
<td>NVIDIA NIM API ç«¯ç¹</td>
</tr>
<tr>
<td><code>api_key</code></td>
<td>ä» NVIDIA Build å¹³å°è·å</td>
</tr>
<tr>
<td><code>dimension</code></td>
<td>Embedding ç»´åº¦ï¼nv-embed-v1 åºå®ä¸º 4096</td>
</tr>
<tr>
<td><code>embedding.model</code></td>
<td>æ¨èä½¿ç¨ <code>nvidia/nv-embed-v1</code>ï¼å¯¹ç§°æ¨¡åï¼ä¸éè¦ input_type åæ°ï¼</td>
</tr>
<tr>
<td><code>vlm.model</code></td>
<td>ç¨äºçææè¦çè¯­è¨æ¨¡åï¼æ¨è <code>meta/llama-3.3-70b-instruct</code></td>
</tr>
</tbody>
</table>
<h3 id="ä¸ºä»ä¹ä¸ç¨-kimi-k25">ä¸ºä»ä¹ä¸ç¨ kimi-k2.5ï¼</h3>
<p>NVIDIA ä¸çæ¨çæ¨¡åï¼å¦ kimi-k2.5ï¼è¿åç <code>content</code> å­æ®µä¸ºç©ºï¼åå®¹å¨ <code>reasoning</code> å­æ®µéãOpenViking æææ åç <code>message.content</code> æ ¼å¼ï¼æä»¥è¦ç¨éæ¨çæ¨¡åã</p>
<h3 id="å¦ä½è·å-nvidia-api-key">å¦ä½è·å NVIDIA API Key</h3>
<ol>
<li>è®¿é® <a href="https://build.nvidia.com/" target="_blank" rel="noopener nofollow">https://build.nvidia.com/</a></li>
<li>ç»å½/æ³¨åè´¦å·</li>
<li>ç¹å»å³ä¸è§ç¨æ·å â API Keys â Generate Key</li>
<li>å¤å¶ä¿å­ï¼åªæ¾ç¤ºä¸æ¬¡ï¼</li>
</ol>
<hr>
<h2 id="ç¬¬ä¸æ­¥è®¾ç½®ç¯å¢åé">ç¬¬ä¸æ­¥ï¼è®¾ç½®ç¯å¢åé</h2>
<pre><code class="language-bash">export OPENVIKING_CONFIG_FILE=~/.openviking/ov.conf
</code></pre>
<p>å»ºè®®æ·»å å° <code>~/.bashrc</code>ï¼</p>
<pre><code class="language-bash">echo 'export OPENVIKING_CONFIG_FILE=~/.openviking/ov.conf' &gt;&gt; ~/.bashrc
source ~/.bashrc
</code></pre>
<hr>
<h2 id="ç¬¬åæ­¥éªè¯å®è£">ç¬¬åæ­¥ï¼éªè¯å®è£</h2>
<p>åå»ºæµè¯èæ¬ <code>test_openviking.py</code>ï¼</p>
<pre><code class="language-python">import openviking as ov

# åå§åå®¢æ·ç«¯ï¼æ°æ®å­å¨å¨å½åç®å½ç openviking_data æä»¶å¤¹
client = ov.SyncOpenViking(path="./openviking_data")

try:
    client.initialize()
    print("â OpenViking åå§åæåï¼")
    
    # æ·»å ä¸ä¸ªæµè¯æä»¶
    result = client.add_resource(path="./your_file.md")
    print(f"æ·»å æä»¶: {result}")
    
    # ç­å¾å¤çå®æ
    print("ç­å¾å¤ç...")
    client.wait_processed()
    print("â å¤çå®æï¼")
    
    # æç´¢æµè¯
    results = client.find("æµè¯å³é®è¯", limit=3)
    print(f"\næç´¢ç»æ:")
    for r in results.resources:
        print(f"  {r.uri} (score: {r.score:.4f})")
    
    client.close()
    print("\nð OpenViking éç½®æåï¼")

except Exception as e:
    print(f"éè¯¯: {e}")
    import traceback
    traceback.print_exc()
</code></pre>
<p>è¿è¡ï¼</p>
<pre><code class="language-bash">python test_openviking.py
</code></pre>
<hr>
<h2 id="ç¬¬äºæ­¥æ ¸å¿-api-ç¨æ³">ç¬¬äºæ­¥ï¼æ ¸å¿ API ç¨æ³</h2>
<h3 id="æ·»å èµæº">æ·»å èµæº</h3>
<pre><code class="language-python"># æ·»å åä¸ªæä»¶
result = client.add_resource(path="./docs/readme.md")

# æ·»å  URL
result = client.add_resource(path="https://example.com/article.html")
</code></pre>
<h3 id="ç®å½æµè§">ç®å½æµè§</h3>
<pre><code class="language-python"># ååºæ ¹ç®å½
ls_result = client.ls("viking://resources")

# ååºå­ç®å½
ls_result = client.ls("viking://resources/my_project")
</code></pre>
<h3 id="è¯­ä¹æç´¢">è¯­ä¹æç´¢</h3>
<pre><code class="language-python"># æç´¢ç¸å³åå®¹
results = client.find("å¦ä½éç½® embedding", limit=5)

for r in results.resources:
    print(f"URI: {r.uri}")
    print(f"Score: {r.score}")
    print(f"Content: {client.read(r.uri)[:200]}...")
</code></pre>
<h3 id="è·åæè¦æ¦è§">è·åæè¦/æ¦è§</h3>
<pre><code class="language-python"># L0 å±ï¼ä¸å¥è¯æè¦
abstract = client.abstract("viking://resources/my_project")

# L1 å±ï¼è¯¦ç»æ¦è§
overview = client.overview("viking://resources/my_project")
</code></pre>
<h3 id="è¯»ååå®¹">è¯»ååå®¹</h3>
<pre><code class="language-python"># è¯»åå®æ´åå®¹ï¼L2 å±ï¼
content = client.read("viking://resources/my_project/readme.md")
</code></pre>
<hr>
<h2 id="å¸¸è§é®é¢">å¸¸è§é®é¢</h2>
<h3 id="q-embedding-ç»´åº¦ä¸å¹é">Q: Embedding ç»´åº¦ä¸å¹é</h3>
<p><strong>éè¯¯</strong>: <code>Dense vector dimension mismatch: expected 2048, got 4096</code></p>
<p><strong>è§£å³</strong>: å¨éç½®æä»¶ä¸­æç¡®æå® <code>dimension: 4096</code>ï¼å¹é <code>nvidia/nv-embed-v1</code> çè¾åºç»´åº¦ã</p>
<h3 id="q-vlm-è¿å-nonetype-éè¯¯">Q: VLM è¿å NoneType éè¯¯</h3>
<p><strong>éè¯¯</strong>: <code>'NoneType' object is not subscriptable</code></p>
<p><strong>åå </strong>: ä½¿ç¨äºæ¨çæ¨¡åï¼å¦ kimi-k2.5ï¼ï¼å¶è¿åæ ¼å¼ä¸ OpenViking ä¸å¼å®¹ã</p>
<p><strong>è§£å³</strong>: æ¢ç¨æ åæ¨¡åå¦ <code>meta/llama-3.3-70b-instruct</code>ã</p>
<h3 id="q-nvidia-api-æ¥é-input_type-required">Q: NVIDIA API æ¥é input_type required</h3>
<p><strong>éè¯¯</strong>: <code>'input_type' parameter is required for asymmetric models</code></p>
<p><strong>åå </strong>: æäº Embedding æ¨¡åï¼å¦ nv-embedqa-e5-v5ï¼æ¯éå¯¹ç§°æ¨¡åï¼éè¦æå® query æ documentã</p>
<p><strong>è§£å³</strong>: ä½¿ç¨å¯¹ç§°æ¨¡å <code>nvidia/nv-embed-v1</code>ï¼ä¸éè¦ input_typeã</p>
<h3 id="q-æä»¶åå²çª">Q: æä»¶åå²çª</h3>
<p><strong>éè¯¯</strong>: <code>directory already exists: /resources/ç¬¬01ç« </code></p>
<p><strong>åå </strong>: OpenViking ç¨æä»¶åï¼ä¸å«è·¯å¾ï¼ä½ä¸º URIï¼ä¸åç®å½ä¸çååæä»¶ä¼å²çªã</p>
<p><strong>è§£å³</strong>:</p>
<ul>
<li>æ¹æ¡ä¸ï¼éå½åæä»¶ï¼ä½¿ç¨å¯ä¸åç§°</li>
<li>æ¹æ¡äºï¼åæ¹å¯¼å¥ï¼é¿ååæ¶æ·»å ååæä»¶</li>
<li>æ¹æ¡ä¸ï¼ç­å¾å®æ¹ä¿®å¤æ­¤è®¾è®¡é®é¢</li>
</ul>
<hr>
<h2 id="ä¸ºä»ä¹ç¨-openvikingæ¿ä»£-openclaw-é»è®¤ç-qmd-è®°å¿åç«¯">ä¸ºä»ä¹ç¨ OpenVikingï¼ââæ¿ä»£ OpenClaw é»è®¤ç qmd è®°å¿åç«¯</h2>
<h3 id="openclaw-ç°æè®°å¿æ¹æ¡çå±é">OpenClaw ç°æè®°å¿æ¹æ¡çå±é</h3>
<p>OpenClaw é»è®¤ä½¿ç¨ <code>qmd</code> ä½ä¸ºè®°å¿åç«¯ï¼éåæå¨ç»´æ¤ç <code>MEMORY.md</code> å <code>memory/*.md</code> æä»¶ãè¿å¥æ¹æ¡å¤ç¨ï¼ä½æå ä¸ªçç¹ï¼</p>
<ol>
<li><strong>æç´¢ç²¾åº¦æé</strong> â qmd åºäºç®ååéå¹éï¼ç¼ºä¹å±æ¬¡åçè§£</li>
<li><strong>æå¨ç»´æ¤ææ¬é«</strong> â è®°å¿æä»¶éè¦äººå·¥æ´çï¼å®¹æéæ¼</li>
<li><strong>ç¼ºä¹èªå¨æè¦</strong> â Agent éè¦è¯»åæ´ä¸ªæä»¶æè½äºè§£åå®¹</li>
<li><strong>æ æ³ç®¡çå¤§éææ¡£</strong> â å½ workspace æä»¶å¾å¤æ¶ï¼qmd ä¸å¤ç¨</li>
</ol>
<h3 id="openviking-çä¼å¿">OpenViking çä¼å¿</h3>
<table>
<thead>
<tr>
<th>è½å</th>
<th>qmd</th>
<th>OpenViking</th>
</tr>
</thead>
<tbody>
<tr>
<td>è¯­ä¹æç´¢</td>
<td>â åºç¡</td>
<td>â ç®å½éå½ + è¯­ä¹èå</td>
</tr>
<tr>
<td>èªå¨æè¦</td>
<td>â</td>
<td>â L0/L1/L2 ä¸å±</td>
</tr>
<tr>
<td>ç»æåæµè§</td>
<td>â</td>
<td>â èææä»¶ç³»ç»</td>
</tr>
<tr>
<td>Token èç</td>
<td>â</td>
<td>â æéå è½½</td>
</tr>
<tr>
<td>ä¼è¯è®°å¿èªå¨æå</td>
<td>â</td>
<td>â èªå¨æåé¿æè®°å¿</td>
</tr>
</tbody>
</table>
<h3 id="éææ¹å¼">éææ¹å¼</h3>
<h4 id="æ¹å¼ä¸ä½ä¸º-openclaw-çè¡¥åè®°å¿æ¨è">æ¹å¼ä¸ï¼ä½ä¸º OpenClaw çè¡¥åè®°å¿ï¼æ¨èï¼</h4>
<p>ä¿ç qmd ä½ä¸ºæ¥å¸¸è½»éè®°å¿ï¼ç¨ OpenViking ç®¡çå¤§åææ¡£åºï¼</p>
<pre><code class="language-python"># æ workspace éçä¹¦ç±ãé¡¹ç®ææ¡£ç­å¤§åèµæºå¯¼å¥ OpenViking
import glob, openviking as ov

client = ov.SyncOpenViking(path="./openviking_data")
client.initialize()

for f in glob.glob("./books/**/*.md", recursive=True):
    client.add_resource(path=f)

for f in glob.glob("./docs/**/*.md", recursive=True):
    client.add_resource(path=f)

client.wait_processed()
client.close()
</code></pre>
<p>Agent å·¥ä½æµï¼</p>
<ol>
<li>æ¥å¸¸å¯¹è¯ â qmd è®°å¿ï¼è½»éãå¿«éï¼</li>
<li>éè¦æ¥éææ¡£ â OpenViking è¯­ä¹æç´¢ï¼ç²¾åãåå±ï¼</li>
<li>Sub-agent åä½/ç ç©¶ â OpenViking æä¾ä¸ä¸æï¼èç Tokenï¼</li>
</ol>
<h4 id="æ¹å¼äºå®å¨æ¿ä»£-qmd">æ¹å¼äºï¼å®å¨æ¿ä»£ qmd</h4>
<p>å° OpenClaw çææè®°å¿æä»¶ä¹å¯¼å¥ OpenVikingï¼</p>
<pre><code class="language-python"># å¯¼å¥è®°å¿æä»¶
for f in glob.glob("./memory/*.md"):
    client.add_resource(path=f)

# å¯¼å¥ workspace ææ markdown
for f in glob.glob("./**/*.md", recursive=True):
    client.add_resource(path=f)
</code></pre>
<blockquote>
<p>â ï¸ ç®å OpenViking è¿ä¸è½ç´æ¥ä½ä¸º OpenClaw ç <code>memory.backend</code> éç½®é¡¹ãéè¦éè¿ skill ç CLI å·¥å·é´æ¥è°ç¨ãæªæ¥å¦æ OpenClaw æ¯æèªå®ä¹è®°å¿åç«¯æä»¶ï¼å¯ä»¥æ´æ·±åº¦éæã</p>
</blockquote>
<h4 id="æ¹å¼ä¸ç»-sub-agent-æä¾ä¸ä¸æ">æ¹å¼ä¸ï¼ç» Sub-agent æä¾ä¸ä¸æ</h4>
<p>åä¹¦ãåç ç©¶ç­ä»»å¡æ¶ï¼sub-agent å¯ä»¥åæç´¢ OpenViking è·åç¸å³ä¸ä¸æï¼èä¸æ¯ææ´æ¬ä¹¦å¡è¿ promptï¼</p>
<pre><code class="language-bash"># Sub-agent åæç´¢ç¸å³åå®¹
python3 scripts/viking.py search "æ­¦æ¾çæ§æ ¼åæ" --limit 3

# ç¶ååªè¯»åæç¸å³çæ®µè½
python3 scripts/viking.py read viking://resources/ç¬¬01ç« /å¼ ä¸çåäº.md
</code></pre>
<p>è¿æ ·ä¸ä¸ª sub-agent åªéè¦å è½½å å token çç¸å³åå®¹ï¼èä¸æ¯æ´æ¬ä¹¦ç 10 ä¸+ tokenã</p>
<h3 id="å·²å°è£ç-openclaw-skill">å·²å°è£ç OpenClaw Skill</h3>
<p>æä»¬å·²ç»æ OpenViking å°è£ä¸º OpenClaw skillï¼å®è£å Agent å¯ä»¥ç´æ¥ä½¿ç¨ï¼</p>
<pre><code class="language-bash"># å®è£ skill
git clone https://github.com/swizardlv/openclaw_openviking_skill.git
cp -r openclaw_openviking_skill/openviking ~/.openclaw/workspace/skills/
</code></pre>
<p>Skill æä¾çå½ä»¤ï¼</p>
<table>
<thead>
<tr>
<th>å½ä»¤</th>
<th>åè½</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>viking.py add &lt;file&gt;</code></td>
<td>ç´¢å¼æä»¶</td>
</tr>
<tr>
<td><code>viking.py add-dir &lt;dir&gt;</code></td>
<td>æ¹éç´¢å¼ç®å½</td>
</tr>
<tr>
<td><code>viking.py search &lt;query&gt;</code></td>
<td>è¯­ä¹æç´¢</td>
</tr>
<tr>
<td><code>viking.py ls [uri]</code></td>
<td>æµè§èµæº</td>
</tr>
<tr>
<td><code>viking.py abstract &lt;uri&gt;</code></td>
<td>è·åæè¦</td>
</tr>
<tr>
<td><code>viking.py overview &lt;uri&gt;</code></td>
<td>è·åæ¦è§</td>
</tr>
<tr>
<td><code>viking.py read &lt;uri&gt;</code></td>
<td>è¯»åå¨æ</td>
</tr>
<tr>
<td><code>viking.py info</code></td>
<td>æ¥çéç½®ç¶æ</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="éå½å¯ç¨ç-nvidia-embedding-æ¨¡å">éå½ï¼å¯ç¨ç NVIDIA Embedding æ¨¡å</h2>
<table>
<thead>
<tr>
<th>æ¨¡å</th>
<th>ç»´åº¦</th>
<th>ç±»å</th>
<th>è¯´æ</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>nvidia/nv-embed-v1</code></td>
<td>4096</td>
<td>å¯¹ç§°</td>
<td>â æ¨èï¼æ é input_type</td>
</tr>
<tr>
<td><code>nvidia/nv-embedqa-e5-v5</code></td>
<td>1024</td>
<td>éå¯¹ç§°</td>
<td>éè¦ input_type åæ°</td>
</tr>
<tr>
<td><code>nvidia/llama-3.2-nv-embedqa-1b-v2</code></td>
<td>2048</td>
<td>éå¯¹ç§°</td>
<td>éè¦ input_type åæ°</td>
</tr>
<tr>
<td><code>nvidia/nv-embedcode-7b-v1</code></td>
<td>4096</td>
<td>å¯¹ç§°</td>
<td>éåä»£ç </td>
</tr>
</tbody>
</table>
<hr>
<h2 id="éå½å¯ç¨ç-nvidia-chat-æ¨¡åç¨äº-vlm">éå½ï¼å¯ç¨ç NVIDIA Chat æ¨¡åï¼ç¨äº VLMï¼</h2>
<table>
<thead>
<tr>
<th>æ¨¡å</th>
<th>è¯´æ</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>meta/llama-3.3-70b-instruct</code></td>
<td>â æ¨èï¼æ åæ ¼å¼</td>
</tr>
<tr>
<td><code>meta/llama-3.1-70b-instruct</code></td>
<td>ç¨³å®çæ¬</td>
</tr>
<tr>
<td><code>meta/llama-3.1-8b-instruct</code></td>
<td>è½»éç</td>
</tr>
<tr>
<td><code>mistralai/mistral-large</code></td>
<td>Mistral ç³»å</td>
</tr>
</tbody>
</table>
<blockquote>
<p>â ï¸ é¿åä½¿ç¨æ¨çæ¨¡åï¼å¦ kimi-k2.5ãdeepseek-r1ï¼ï¼å®ä»¬è¿åçæ ¼å¼ä¸ OpenViking ä¸å¼å®¹ã</p>
</blockquote>
<hr>
<h2 id="åèé¾æ¥">åèé¾æ¥</h2>
<ul>
<li>OpenViking å®ç½: <a href="https://www.openviking.ai" target="_blank" rel="noopener nofollow">https://www.openviking.ai</a></li>
<li>OpenViking GitHub: <a href="https://github.com/volcengine/OpenViking" target="_blank" rel="noopener nofollow">https://github.com/volcengine/OpenViking</a></li>
<li>NVIDIA NIM API: <a href="https://build.nvidia.com/" target="_blank" rel="noopener nofollow">https://build.nvidia.com/</a></li>
<li>NVIDIA API ææ¡£: <a href="https://docs.api.nvidia.com/nim/" target="_blank" rel="noopener nofollow">https://docs.api.nvidia.com/nim/</a></li>
</ul>
<hr>
<p><em>æ¬æç¨åºäº OpenViking 0.1.17 å NVIDIA NIM API æµè¯éè¿ã</em></p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-18 10:57">2026-02-18 10:56</span>&nbsp;
<a href="https://www.cnblogs.com/swizard">Swizard</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19622926);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19622926', targetLink: 'https://www.cnblogs.com/swizard/p/19622926', title: 'OpenClaw+OpenViking + NVIDIA API éç½®æç¨' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Maui å®è·µï¼è¶£è° map çåå¼ç¹æï¼èç Go çè®¾è®¡åè ]]></title>
    <link>https://www.cnblogs.com/zhally/p/19622722</link>
    <guid>f56c58e2dfaae2fb583652f280a96e41</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/zhally/p/19622722" title="åå¸äº 2026-02-18 10:05">
    <span role="heading" aria-level="2">Maui å®è·µï¼è¶£è° map çåå¼ç¹æï¼èç Go çè®¾è®¡åè</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="maui-å®è·µè¶£è°-map-çåå¼ç¹æèç-go-çè®¾è®¡åè">Maui å®è·µï¼è¶£è° map çåå¼ç¹æï¼èç Go çè®¾è®¡åè</h1>
<p>åå å¤ç¾¤æ  2026.2.18</p>
<p>é¿ææ·±è Go å¼åçå¼åèï¼å¤§å¤è½ä½ä¼å° Go ç¼è¯å¨çæè´åå¶ââå®ä¸åå¶ä»è¯­è¨é£è¬çµæ´»å¥æ¾ï¼åèåä¸ä½ä¸¥è°¨çæ¶æå¸ï¼å¯¹è¯­æ³è¾¹çãè¯­ä¹ä¸è´æ§æçè¿ä¹èå»çè¦æ±ãå¶ä¸­ï¼å½æ°ç­¾åçåæ§çº¦æä¸éè½½ç¹æ§çç¼ºå¤±ï¼æ¯ Go æå·è¾¨è¯åº¦çè®¾è®¡ä¹ä¸ï¼ä½å¯ç¬ map çåå¼æä½ï¼Go ç¼è¯å¨å´æç ´äºèªå·±å®ä¸çè§åï¼èµäºäºå¶ç¬ä¸ä»½çè¯­æ³ç¹æã</p>
<p>Go çå½æ°ç­¾åè§åï¼æ¯ Go è¯­æ³ä½ç³»çæ ¸å¿åºç³ï¼ä¹æ¯å¶åºå«äº C# ç­è¯­è¨çå³é®ãå¨ Go ä¸­ï¼å½æ°ç­¾åçå®ä¹æä¸ºä¸¥æ ¼ï¼å®æ´åå«ä¸é¨åï¼å½æ°åãåæ°åè¡¨ï¼åæ°çç±»åãæ°éãé¡ºåºå¿é¡»å®å¨ä¸è´ï¼ãè¿åå¼åè¡¨ï¼è¿åå¼çç±»åãæ°éãé¡ºåºåæ ·ä¸å¯åå·®ï¼ãæ¢å¥è¯è¯´ï¼åªè¦è¿ä¸èä¸­æä»»ä½ä¸å¤ä¸åï¼å³ä¾¿å½æ°åä¸è´ï¼å¨ Go ç¼è¯å¨ç¼ä¸­ä¹æ¯ä¸¤ä¸ªå®å¨ç¬ç«çå½æ°ã</p>
<p>æ´å³é®çæ¯ï¼ Go æç¡®ä¸æ¯æå½æ°éè½½ï¼Function Overloadingï¼ââè¿ä¸ç¹ä¸ C# å½¢æäºé²æå¯¹æ¯ãå¨ C# ä¸­ï¼å¼åèå¯ä»¥å®ä¹å¤ä¸ªååå½æ°ï¼åªè¦å®ä»¬çåæ°åè¡¨ï¼åæ°æ°éãç±»åãé¡ºåºï¼ä¸åï¼ç¼è¯å¨å°±è½éè¿å½æ°ç­¾åèªå¨å¹éè°ç¨ï¼çè³å¯ä»¥éè¿å¯éåæ°ãåæ°é»è®¤å¼ç­ç¹æ§ï¼è¿ä¸æ­¥ç®åååå½æ°çè°ç¨é»è¾ãæ¯å¦å¨ C# ä¸­ï¼æä»¬å¯ä»¥è¿æ ·å®ä¹éè½½å½æ°ï¼</p>
<pre><code class="language-csharp">// éè½½1ï¼æ åæ°ï¼è¿åé»è®¤å¼
public int GetValue() { return 0; }
// éè½½2ï¼å¸¦åæ°ï¼è¿åæå®å¼
public int GetValue(int key) { return key * 2; }
// éè½½3ï¼åæ°ç±»åä¸åï¼è¿åå¼ç±»åä¸è´
public int GetValue(string key) { return int.Parse(key); }
</code></pre>
<p>è¿ç§è®¾è®¡å¨å¤æä¸å¡åºæ¯ä¸­è½ææåå°å½æ°ååä½ï¼æåä»£ç å¯è¯»æ§ãä½ Go å´ä¸»å¨æ¾å¼äºè¿ä¸ç¹æ§ï¼æ ¸å¿åå å¨äº Go è¿½æ±è¯­æ³ç®æ´ãè¯­ä¹æ¸æ°ãæ æ­§ä¹ââéè½½çä¼¼çµæ´»ï¼å®åä¼å¢å ç¼è¯å¨çè§£æææ¬ï¼ä¹å¯è½è®©å¼åèå¨è°ç¨æ¶é·å¥éæ§å¹éçå°æï¼å°¤å¶å¨å¤åç¨ãé«å¹¶ååºæ¯ä¸ï¼ç®æ´æ æ­§ä¹çè¯­æ³è½å¤§å¹éä½è°è¯ææ¬ã</p>
<p>åå° Go çè¯­æ³è§åä¸­ï¼å½æ°ç­¾åçåæ§çº¦æä½ç°å¾æ·æ¼å°½è´ãæ¯å¦æä»¬å®ä¹ä¸¤ä¸ªååå½æ°ï¼ä»è¿åå¼æ°éä¸åï¼</p>
<pre><code class="language-go">// å½æ°1ï¼åè¿åå¼
func getInfo() *subscriberInfo { return nil }
// å½æ°2ï¼åè¿åå¼ï¼ä¸å½æ°1åå
func getInfo() (*subscriberInfo, bool) { return nil, false }
</code></pre>
<p>è¿æ®µä»£ç ä¼ç´æ¥ç¼è¯æ¥éï¼ç¼è¯å¨ä¼æç¡®æç¤ºfunction getInfo redeclared in this blockââå¨ Go çè§åéï¼è¿æ¯å¸åçéå¤å£°æï¼åªæè¿åå¼ä¸åï¼ä¹ç»ä¸åè®¸ãè¿ç§æ­»æ¿ççº¦æï¼è´¯ç©¿äº Go çæ´ä¸ªè¯­æ³ä½ç³»ï¼å´å¯ç¬å¨ map åå¼æ¶ï¼è¢«ç¼è¯å¨æææç ´ã</p>
<p>Go ä¸­mapçåå¼æä½ï¼å­å¨ä¸¤ç§å®å¨åæ³çè¯­æ³å½¢å¼ï¼è¿å¨å¶ä»ä»»ä½è¯­æ³åºæ¯ä¸­é½æ¯ä¸å¯æ³è±¡çãä»¥æä»¬ä¹åå®ç°çæ¶æ¯è®¢éç³»ç»ä¸­ç<code>m.subscriberInfos</code>ï¼ç±»åä¸º<code>map[MsgType]*subscriberInfo</code>ï¼ä¸ºä¾ï¼ç¬¬ä¸ç§æ¯åè¿åå¼åå¼ï¼</p>
<pre><code class="language-go">info := m.subscriberInfos[msgType]
</code></pre>
<p>ç¬¬äºç§æ¯åè¿åå¼åå¼ï¼é¢å¤è·å key çå­å¨æ§æ è®°ï¼</p>
<pre><code class="language-go">info, exists := m.subscriberInfos[msgType]
</code></pre>
<p>ä»å½æ°ç­¾åçè§åº¦æ¥çï¼è¿ç¸å½äºåä¸ä¸ªæä½ï¼æ¥æä¸¤ä¸ªä¸åçè¿åå¼ç­¾åï¼è¥æ¯æ¾å¨æ®éå½æ°ä¸­ï¼æ©å·²è¿åäº Go çè¯­æ³è§åãä½å¯¹äº mapï¼ç¼è¯å¨å´åäºç¹æ®ééââè¿å¹¶é Go è¯­æ³ççæ¼ï¼èæ¯ç¼è¯å¨ä¸ºé«é¢åºæ¯éèº«æé çè¯­æ³ç¹æï¼æ¬è´¨ä¸æ¯ä¸ç§å°è£å¥½çè¯­æ³ç³ã</p>
<p>è¿ç§ç¹æçè®¾è®¡ï¼æ°æ°è´´åäºå®éå¼åä¸­çé«é¢éæ±ï¼ä¹é¿åäºå¼åèé·å¥åä½çæ ¡éªé»è¾ãæèªå·±çæ¶æ¯è®¢éç³»ç»ä¸­ï¼è¿ç§ééçä»·å¼ä½ç°å¾æ·æ¼å°½è´ï¼</p>
<pre><code class="language-go">	// åå§åå½åMsgTypeçè®¢éèä¿¡æ¯ï¼é¦æ¬¡è®¢éæ¶ï¼
	if _, exists := m.subscriberInfos[msgType]; !exists {
		m.subscriberInfos[msgType] = &amp;subscriberInfo{
			subIDs: make(map[uint64]bool), // åå§åææIDéå
		}
	}
	info := m.subscriberInfos[msgType] // æ¿å°å½åMsgTypeçè®¢éèä¿¡æ¯
</code></pre>
<p>å¨ Register æ¹æ³ä¸­ï¼éè¿åç½®æ ¡éªï¼è¥ msgType ä¸å­å¨ï¼ååå§åå¹¶æå¥ mapï¼ç¡®ä¿äº msgType ä¸å®å­å¨äº<code>m.subscriberInfos</code>ä¸­ï¼æ­¤æ¶ä½¿ç¨åè¿åå¼åå¼ï¼æ¢è½ç®åä»£ç ï¼åè½é¿åæ ç¨åéçåä½ã</p>
<p>èå¨ cancel å½æ°ä¸­ï¼</p>
<pre><code class="language-go">var once sync.Once // ä¿è¯åæ¶é»è¾ä»æ§è¡ä¸æ¬¡
cancel := func() { // è¿åç»ç¨æ·çåæ¶å½æ°
    once.Do(func() { // æ ¸å¿ï¼ä¸ç®¡ç¨æ·è°å¤å°æ¬¡cancelï¼è¿éåªæ§è¡ä¸æ¬¡
        // åéï¼ä¿®æ¹è®¢éèä¿¡æ¯ï¼éæä»é
        m.Lock()
        defer m.Unlock()

        // æ ¡éª1ï¼å½åMsgTypeçè®¢éèä¿¡æ¯æ¯å¦å­å¨ï¼é²æ­¢å·²éæ¯ååæ¶ï¼
        info, infoExists := m.subscriberInfos[msgType]
        // æ ¡éª2ï¼å½åsubIDæ¯å¦å¨ææéåä¸­ï¼é²è¶æ/éå¤åæ¶ï¼
        if !infoExists || !info.subIDs[subID] {
            log.Printf("ã%sãè®¢éèID:%dåæ¶å¤±è´¥ï¼éææè®¢éèï¼", msgType, subID)
            return // æ ¡éªå¤±è´¥ï¼ç´æ¥è¿åï¼ä¸æ§è¡åç»­é»è¾
        }

        // æ­¥éª¤aï¼ç§»é¤å½åè®¢éèçIDï¼åæ¶èªå·±çè®¢éï¼
        delete(info.subIDs, subID)
        // æ­¥éª¤bï¼è®¢éæ°-1
        info.count--
        log.Printf("ã%sãè®¢éèID:%déåºï¼å½åè®¢éæ°ï¼%d", msgType, subID, info.count)

        // æ­¥éª¤cï¼ææè®¢éèé½åæ¶ â éæ¯Channel+æ¸çä¿¡æ¯
        if info.count == 0 {
            close(m.globalChannels[msgType])          // å³é­Channelï¼çå¬åç¨èªå¨éåº
            delete(m.globalChannels, msgType)         // ç§»é¤Channelæ å°ï¼éæ¾èµæº
            delete(m.subscriberInfos, msgType)        // ç§»é¤è®¢éèä¿¡æ¯ï¼éæ¾èµæº
            log.Printf("ã%sãæåä¸ä½è®¢éèéåºï¼éæ¯å¨å±Channel", msgType)
        }
    })
}
</code></pre>
<p>ç±äº msgType å¯è½å·²è¢«éæ¯ï¼ææè®¢éèåæ¶åï¼msgType ä¼ä» map ä¸­å é¤ï¼ï¼æä»¬æ æ³ä¿è¯ key çå­å¨æ§ï¼æ­¤æ¶ä½¿ç¨åè¿åå¼åå¼ï¼éè¿ exists æ è®°å¤æ­ key æ¯å¦ææï¼æ¢è½å®å¨è·å valueï¼åè½é¿å nil æéè§£å¼ç¨å¯¼è´ç panicï¼å®ç°äºç®æ´ä¸å®å¨çå¹³è¡¡ã</p>
<p>æ·±å¥åºå±æ¥çï¼ç¼è¯å¨å¨å¤ç map åå¼æ¶ï¼ä¼æ ¹æ®æ¥æ¶æ¹å¼èªå¨ééé»è¾ï¼å½ä½¿ç¨åè¿åå¼æ¶ï¼ç¼è¯å¨ä»æ§è¡ key æ¥æ¾-è¿å value çé»è¾ï¼è¥ key ä¸å­å¨ï¼åè¿åå¯¹åº value ç±»åçé¶å¼ï¼å¦<code>*subscriberInfo</code>çé¶å¼ä¸º nilï¼ï¼å½ä½¿ç¨åè¿åå¼æ¶ï¼ç¼è¯å¨ä¼åå¤æ­ key æ¯å¦å­å¨ï¼åè¿å value + å­å¨æ§æ è®°ï¼ç¸å½äºå°å¼åèæå¨ç¼åçæ ¡éªé»è¾ï¼åç½®å°äºè¯­æ³å±é¢ï¼æ¢æåäºå¼åæçï¼åä¿è¯äºä»£ç çé²æ£æ§ã</p>
<p>å¼å¾æ³¨æçæ¯ï¼è¿ä»½ç¹æå·ææå¼ºçæä»æ§ââä»éå¯¹ map åå¼ï¼å¶ä»æ°æ®ç±»åï¼æ°ç»ãåçãç»æä½ç­ï¼åä¸å·å¤ãæ¯å¦æ°ç»åå¼ï¼è¥å°è¯ä½¿ç¨åè¿åå¼<code>v, exists := arr[0]</code>ï¼ä¼ç´æ¥ç¼è¯æ¥éï¼æ®éå½æ°è°ç¨è¥å°è¯çç¥è¿åå¼ï¼å¦å½æ°è¿åä¸¤ä¸ªå¼ï¼å´åªæ¥æ¶ä¸ä¸ªï¼ï¼åæ ·ä¼è¢«ç¼è¯å¨æç»ãè¿ç§åºå«å¯¹å¾ï¼æ°æ°ä½ç°äº Go çè®¾è®¡é»è¾ï¼ä¸æä¸ååççµæ´»ï¼åªéå¯¹é«é¢åºæ¯åä¼åï¼å¶ä½åºæ¯ä¸¥æ ¼éµå®è¯­æ³è§åï¼å¼é¡¾æçä¸ä¸è´æ§ã</p>
<p>å¯¹æ¯C#çéè½½ç¹æ§ï¼ Go çè¿ç§è®¾è®¡çä¼¼ç¬¨æï¼å®åæ¯ä¸ç§åèââæ¾å¼éè½½å¸¦æ¥ççµæ´»ï¼æ¢æ¥äºè¯­æ³çç®æ´ãè§£æçé«æåè¯­ä¹çæ æ­§ä¹ï¼èç»mapèµäºåå¼ç¹æï¼åæ¯å¨ä¸ç ´åæ´ä½è§åçåæä¸ï¼å¯¹é«é¢åºæ¯çç²¾åééãè¿ç§åå¶ä¸­ççµæ´»ï¼æ­£æ¯ Go è½å¤å¨é«å¹¶åãåç«¯å¼åä¸­è±é¢èåºçæ ¸å¿åå ä¹ä¸ã</p>
<p>å¯¹äºèµæ·± Go å¼åèèè¨ï¼map çè¿ä»½ç¹ææ©å·²ä¸æ¯ä»ä¹ç§å¯ï¼èæ¯æ¥å¸¸å¼åä¸­é«æé¿åçå·¥å·ãå®èåèççï¼æ¯ Go ç¼è¯å¨éé¢æ ç§ä¹ä¸çç»è´èéï¼ä¹æ¯ Go å¤§éè³ç®è®¾è®¡å²å­¦ççå¨è¯ éââè§ç©æ¯ä¸ºäºä¿è¯ä¸è´æ§ï¼èç¹ææ¯ä¸ºäºè§£å³å®éé®é¢ï¼äºèå¹¶è¡ä¸æï¼æé å°±äº Go ç®æ´ãé«æãå¯é çç¹æ§ã</p>
<p>æ¯ç«ï¼å¥½çè¯­è¨è®¾è®¡ï¼ä»æ¥ä¸æ¯é¢é¢ä¿±å°ï¼èæ¯åèæéï¼ç¼è¯å¨çç¹æï¼ä»æ¥ä¸æ¯ç ´åè§åï¼èæ¯ä¼åä½éªââè¿ä¹æ¯ map çåå¼ç¹æï¼è½è¢«èµæ·±å¼åèå¹¿æ³è®¤å¯çæ ¸å¿åå ã</p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.029861111111111113" data-date-updated="2026-02-18 10:48">2026-02-18 10:05</span>&nbsp;
<a href="https://www.cnblogs.com/zhally">zhally</a>&nbsp;
éè¯»(<span id="post_view_count">12</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19622722);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19622722', targetLink: 'https://www.cnblogs.com/zhally/p/19622722', title: 'Maui å®è·µï¼è¶£è° map çåå¼ç¹æï¼èç Go çè®¾è®¡åè' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ [æè§£LangChainæ§è¡å¼æ]åºäºCheckpointçæä¹å ]]></title>
    <link>https://www.cnblogs.com/jaydenai/p/19622525/checkpoint-persistent</link>
    <guid>71dc6c2a205cf26f822dd1fb29e740ec</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/jaydenai/p/19622525/checkpoint-persistent" title="åå¸äº 2026-02-18 08:40">
    <span role="heading" aria-level="2">[æè§£LangChainæ§è¡å¼æ]åºäºCheckpointçæä¹å</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        PregelåºäºCheckpointçæä¹åæºå¶æ¯å®ç°Agentåºç¨`é«å¯ç¨æ§`å`é¿æè®°å¿`çåºç¡ï¼å®æ¬è´¨ä¸æ¯å° ä¸æ­ååæ¨è¿çå¾å¨âSuperstepâä¹é´å°å¶ç¶æåºåçè¿ç¨ãåå¾å¤æ°æ®åºæä¹åç±»ä¼¼ï¼Pregeléç¨`åºäºå¨éæ°æ®çç¶æå¿«ç§+åºäºå¢éæ´æ°çæä½æ¥å¿`çæä¹åç­ç¥ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>PregelåºäºCheckpointçæä¹åæºå¶æ¯å®ç°Agentåºç¨<code>é«å¯ç¨æ§</code>å<code>é¿æè®°å¿</code>çåºç¡ï¼å®æ¬è´¨ä¸æ¯å° ä¸æ­ååæ¨è¿çå¾å¨âSuperstepâä¹é´å°å¶ç¶æåºåçè¿ç¨ãåå¾å¤æ°æ®åºæä¹åç±»ä¼¼ï¼Pregeléç¨<code>åºäºå¨éæ°æ®çç¶æå¿«ç§+åºäºå¢éæ´æ°çæä½æ¥å¿</code>çæä¹åç­ç¥ã</p>
<h2 id="1-æä¹åchannelç¶æ">1. æä¹åChannelç¶æ</h2>
<p>Pregelå°ç¶æâçæ­»âå¨Channelä¸ï¼è¿ä½¿æä¹ååå¾å¾ç®åï¼å®åªè¦éå¯¹æ¯ä¸ªSuperstepå°æ¯ä¸ªChannelç¶æå­ä¸æ¥å°±å¯ä»¥äºãä¸ºäºæé«æ§è½ï¼å®åªéè¦èèæè¿æ´æ°çChannelï¼èç¡®Channelæ¯å¦æ´æ°å¯ä»¥å©ç¨å®ççæ¬æ¥å³å®ãæ¯ä¸ªChannelé½å·æä¸ä¸ªä¸æ­æ´æ°ççæ¬ï¼å¦ææä¸ªChannelå¨æä¸ªSuperstepåæè¿æ´æ°ï¼çæ¬ä¼å¾åæ´æ¿ãè³äºè¿ä¸ªçæ¬éç¨ä½ç§æ ¼å¼ï¼å·ä½å¦ä½ç®¡çï¼æ§è¡å¼æå°å¶ä¸æ¾å°å·ä½çCheckpointerå®ç°ä¸­ã</p>
<p>ä½ä¸ºCheckpointerçåºç±»ï¼<code>BaseCheckpointSaver</code>å°åºäºæ´æ°å¿«ç§çå­å¨å®ç°å¨å¦ä¸æç¤ºç<code>put</code>æ¹æ³ä¸­ãå¾æä¹åçæ°æ®è¢«å°è£å¨ä¸ä¸ª<code>Checkpoint</code>å¯¹è±¡ä¸­ä»¥<code>checkpoint</code>åæ°ä¼ å¥è¯¥æ¹æ³ï¼<code>config</code>å<code>metadata</code>åæ°æä¾æè¿°è¯¥Checkpointçéç½®ååæ°æ®ï¼è<code>new_versions</code>ä»¥ä¸ä¸ªå­å¸çå½¢å¼æä¾äºæ¶åçæ¯ä¸ªChannelççæ¬ãconfigåæ°æä¾çRunnableConfigä¸»è¦æä¾æ è¯å½åè°ç¨ä¼è¯ç<code>Thread ID</code>å<code>Checkpointå½åç©ºé´</code>ãæ¹æ³ä¼è¿åçRunnableConfigå¯¹è±¡ä¸è¬ä¼æºå¸¦<code>Thread ID</code>ã<code>Checkpointå½åç©ºé´</code>å<code>Checkpoint ID</code>ã</p>
<pre><code class="language-python">class BaseCheckpointSaver(Generic[V]):
    def put(
        self,
        config: RunnableConfig,
        checkpoint: Checkpoint,
        metadata: CheckpointMetadata,
        new_versions: ChannelVersions,
    ) -&gt; RunnableConfig

    async def aput(
        self,
        config: RunnableConfig,
        checkpoint: Checkpoint,
        metadata: CheckpointMetadata,
        new_versions: ChannelVersions,
    ) -&gt; RunnableConfig
    â¦
ChannelVersions = dict[str, str | int | float]
</code></pre>
<h3 id="11-checkpointmetadata">1.1 CheckpointMetadata</h3>
<p>æè¿°Checkpointåæ°æ®ç<code>CheckpointMetadata</code>ç±»åå®ä¹å¦ä¸ï¼å¶ä¸ä¸ªæåææäºå¾æ§è¡çè°±ç³»è¿½è¸ªï¼Lineage Trackingï¼åæ§å¶æµå¯¼èªçæ ¸å¿ãå®ä»¬ä¸åä¸ä¸å¡é»è¾è®¡ç®ï¼ä½å³å®äºå¦ä½ç®¡çãåæº¯åå®¡è®¡å¾çç¶æã</p>
<pre><code class="language-python">class CheckpointMetadata(TypedDict, total=False):
    source: Literal["input", "loop", "update", "fork"]
    step: int
    parents: dict[str, str]
</code></pre>
<p>CheckpointMetadataç<code>step</code>å­æ®µè¿åSuperstepç¼å·ï¼ä»£è¡¨å½åCheckpointå¨é»è¾æ¶é´è½´ä¸çä½ç½®ã<code>source</code>å­æ®µå®ä¹äºå½åè¿ä¸ªCheckpointæ¯ç±åªç§ç±»åçæä½è§¦åçæçï¼å®æ¯çè§£å¾<code>çå½åç¨</code>çå³é®ï¼å·ä½çéé¡¹åæ¬ï¼</p>
<ul>
<li>
<p>input: é¦æ¬¡è°ç¨invokeæstreamæ¹æ³æ¶è§¦åï¼ä»£è¡¨å¾çâåä¸ç¹âãè¿æ¯ç±å¤é¨åå§æ°æ®è¾å¥äº§ççç¬¬ä¸ä¸ªCheckpointï¼Superstepåºå·ä¸º -1ï¼ï¼</p>
</li>
<li>
<p>loopï¼åé¨æ ¹æ® Node å Channel çè®¢éå³ç³»è¿è¡è¿­ä»£æ¶è§¦åï¼ä»£è¡¨å¾å¨æ­£å¸¸æ§è¡æµç¨ä¸­çèªå¨åæµè½¬ãå¤§å¤æ°ä¸­é´æ­¥éª¤ç source é½æ¯æ­¤å¼ã</p>
</li>
<li>
<p>updateï¼ç¨æ·æå¨è°ç¨äºupdate_stateæ¹æ³æ¶è§¦åï¼ä»£è¡¨ä¸ç§âéèªç¶âçç¶æåæ´ãè¿éå¸¸ç¨äºäººä¸ºå¹²é¢ãä¿®æ­£æ°æ®æå¨ä¸­æ­åæ³¨å¥ä¿¡æ¯ã</p>
</li>
<li>
<p>fork: å½ç¨æ·ä»åå²ä¸­çæä¸ªéææ°Checkpointéæ°å¯å¨æ§è¡æ¶è§¦åï¼ä»£è¡¨å¾äº§çäºåæ¯ãå®æ è®°äºæ§è¡æµä»ä¸»çº¿è±ç¦»ï¼å¼å¯äºä¸ä¸ªç¬ç«çæ¶é´çº¿ã</p>
</li>
</ul>
<p>CheckpointMetadataç<code>parents</code>å­æ®µè¿åä¸ä¸ªå­å¸ï¼è®°å½äºå½åCheckpointä¸ä¹åCheckpointä¹é´çææå³ç³»ï¼å¶ç»æéå¸¸ä¸ºéå¸¸å½¢å¼ä¸ºdict[namespace, parent_checkpoint_id]ãç±äº éç¨å¢éæä¹åï¼å½æä»¬éè¦æ¢å¤ä¸ä¸ªå®æ´çç¶æè§å¾æ¶ï¼å¼æå¿é¡»ç¥éå»åªéæ¾é£äºæ²¡åå¨çæ°æ®ï¼parentså­å¸æä¾äºåæº¯è·¯å¾ãå¦æå½å Checkpoint æ²¡æ æä¸ªChannelçå¼ï¼å¼æå°±ä¼æ ¹æ®parentsæå¼ï¼è·³è½¬å°ç¶çº§Checkpointå»æ¥æ¾ï¼ç´å°æ¾å°è¯¥ Channelæè¿ä¸æ¬¡è¢«æ´æ°ççæ¬ã</p>
<p>å¨åå«å­å¾çå¤æåºæ¯ä¸­ï¼parentså­æ®µä¼è®°å½ç¶å¾å½åç©ºé´å¯¹åºçCheckpoint IDï¼ç¡®ä¿ç¶å­å¾ä¹é´çç¶æé»è¾è½å¤è·¨å±çº§å¯¹é½ãå½sourceä¸ºâforkâæ¶ï¼parentså­æ®µæåçæ¯é£ä¸ªè¢«ååçåå²ç¹ï¼èä¸æ¯æ¶é´çº¿ä¸çç©çåä¸ä¸ªç¹ã</p>
<p>å½æä»¬æ¥çä¸ä¸ªCheckpointMetadataå¯¹è±¡æ¶ï¼å¯ä»¥æå»ºåºå¦ä¸é»è¾ï¼è¿ä¸ªç¶ææ¯ç±äº<code>source</code>äº§ççï¼ç®åå¤äºç¬¬<code>step</code>æ­¥ãå¦æä½ æ³ç¥éè¿ä¸ªç¶æä»ä½èæ¥ï¼æèæ³æ¾åé£äºæ²¡åçæ°æ®ï¼è¯·æ ¹æ®<code>parents</code>åè¡¨ååè¿½æº¯ã</p>
<h3 id="12-channelçæ¬">1.2 Channelçæ¬</h3>
<p>æ§è¡å¼æå°Channelçæ¬çæ ¼å¼åæåä¸æ¾ç»å·ä½çCheckpointerå®ç°ï¼å®ä»¬éè¿éåå¦ä¸è¿ä¸ª<code>get_next_version</code>æ¹æ³æä¾æä¸ªChannelçä¸ä¸ä¸ªçæ¬ãå¦æè¡¨ç¤ºå½åçæ¬çcurrentåæ°ä¸ºNoneï¼è¯¥æ¹æ³ä¼è¿åChannelçåå§çæ¬ã</p>
<pre><code class="language-python">class BaseCheckpointSaver(Generic[V]):
    def get_next_version(self, current: V | None, channel: None) -&gt; V
</code></pre>
<p>ä»¥InMemorySaverä¸ºä¾ï¼å®ä¼å°Channelçæ¬æ ¼å¼åæä¸ä¸ªç±51ä¸ªå­ç¬¦ç»æçå­ç¬¦ä¸²ï¼å·ä½æ ¼å¼ä¸º<code>f"{sequence:032}.{random:016}"</code>ãsequenceä»1å¼å§éå¢ï¼ä»£è¡¨äºâç©çç¶æçæ¼è¿é¡ºåºâãå¨é¡ºåºæ§è¡æ¶åæ äºSuperstepçè¿åº¦ï¼ä½æ¯å¨éå°äººä¸ºå¹²é¢ãä¸­æ­ãååæéè¯çæåµä¸ï¼ç©çåºåå·ä»è½åæ âå­ççæ¬¡æ°âãSuperstepåºå·åæ çæ¯âç®æ³è¿­ä»£çæ·±åº¦âï¼æä»¥ä¸è½å°ä¸¤èç­åèµ·æ¥ï¼åèæ¯å¤§äºæç­äºSuperstepåºå·çã</p>
<p>ârandomâé¨åæ¯ä¸ä¸ª0-1ä¹é´çéæºæ°ãå¦æè¯´Channelçæ¬å 32 ä½ï¼ç¬¬ä¸é¨åï¼æ¯æ¶é´è½´ä¸ç<code>å¤§å»åº¦</code>ï¼é£ä¹è¿ç¬¬äºé¨åå°±æ¯ç¡®ä¿ç¶æå¨å¾®è§å±é¢ç»å¯¹å¯ä¸ä¸å¯è¿½æº¯ç<code>é²ä¼ªç </code>ãç±äº CPU å¤çéåº¦æå¿«ï¼å¤ä¸ªå¹¶è¡ä»»å¡å¯è½å¨æç­çå¾®ç§çº§æ¶é´åå°è¯è§¦ååå¥ãå¦æä»ä¾é å 32 ä½çéå¢åºåå·ï¼å¨Superstepåé¨çå¤æ¬¡åå¥å¯è½ä¼å ä¸ºåºåå·æ¥ä¸åéå¢æå¨é«å¹¶åä¸äº§çå²çªãç¬¬äºé¨ååå«çéæºæ°ï¼æºèªæµ®ç¹æ°çå°æ°ä½ï¼ç¡®ä¿äºå³ä½¿ç¬¬ä¸é¨åç¸åï¼ç©çä¸ç Checkpoint ID ä¹æ¯å¨çå¯ä¸çï¼è¿ä¿è¯äºUUID çº§å«çç¢°æå®å¨æ§ã</p>
<p>ä»æ¯æ<code>æ¶é´æè¡</code>ä¸<code>ç¶æåå</code>çè§åº¦æ¥çï¼ç¬¬äºé¨åå°±æ¾å¾æ´å éè¦äºãå½æä»¬ä»æä¸ªåå²ç¹éå¯æ¶æµç¨æ¶ï¼åè®¾ä»åå²ä¸çâ00...001âå¤åååºä¸¤æ¡ä¸åçæ§è¡è·¯å¾ï¼ä¸¤æ¡è·¯å¾çåºåå·å¯è½é½ä¼éå¢å°â00...002âï¼ä½éè¿ç¬¬äºé¨åçéæºéæºå¼ï¼ç³»ç»è½ä»¥å¦ä¸å½¢å¼ç©çéç¦»è¿ä¸¤æ¡è·¯å¾ãæä»¥çæ¬çç¬¬äºé¨åçåå®¹ä¸ä»ä»ä¸ºäºè§£å³å²çªèå­å¨ï¼å®ä½¿å¾æä¹åå±å¯ä»¥åæ¶å­å¨åä¸é»è¾æ­¥ä¸çå¤ä¸ªå¹³è¡å®å®èä¸ä¼åçè¦çã</p>
<ul>
<li>è·¯å¾ A: 00...002.0.8494...</li>
<li>è·¯å¾ B: 00...002.0.1234...</li>
</ul>
<p>æçå®ç°ä¼ä¸¥æ ¼éç¨ç±»ä¼¼äº<code>{ sequence}.{step_index}.{random_entropy}</code>è¿æ ·çä¸æ®µå¼ççæ¬æ ¼å¼åï¼ç¬¬äºé¨åéå¸¸åå«äº.0. æ.1.è¿æ ·çåç¼ï¼å®è¿å¼å·å¦ä¸çåè½ï¼</p>
<ul>
<li>å­å¾å¯¼èªï¼å½ä¸»å¾è°ç¨å­å¾æ¶ï¼å­å¾äº§ççCheckpointä¼éè¿ç¬¬äºé¨åçç¹å®ä½æ¥æ è¯å®å±äºåªä¸ªç¶çº§ä»»å¡çâé»è¾åæ¯âã</li>
<li>ä»»å¡ç´¢å¼ï¼å¨åä¸ä¸ªSuperstepä¸­ï¼å¦æä¸ä¸ªNodeäº§çäºå¤æ¡Pending Writeï¼ç¬¬äºé¨åå¯ä»¥ç¨æ¥ç´¢å¼è¿äºåå¥çååæ¬¡åºï¼ç¡®ä¿å¨æ¢å¤åå¹¶æ¶ä¸ä¼éä½ã</li>
</ul>
<h3 id="13-checkpoint">1.3 Checkpoint</h3>
<p>å¦ä¸æç¤ºçæ¯Checkpointç±»åçå®ä¹ãå®ç<code>v</code>å­æ®µè¡¨ç¤ºå³å®Checkpointç»æççæ¬å·ï¼ç¨äºååå¼å®¹æ§ãå¦ææªæ¥æ¹åäºå­å¨æ ¼å¼ï¼è¿è¡æ¶ä¼æ ¹æ®è¿ä¸ªå¼å³å®å¦ä½æ­£ç¡®å°ååºååæ§æ°æ®ã<code>id</code>å<code>ts</code>åå«è¡¨ç¤ºCheckpointçå¯ä¸æ è¯åçææ¶é´æ³ã<code>updated_channels</code>å­æ®µè¿åçæ¬Superstepåæ¶åæ´æ°çChannelåè¡¨ãå¼ææ ¹æ®è®¢éå®ä»¬çNodeæ¥åå»ºä¸ä¸æ­¥æ§è¡çä»»å¡ã<code>channel_values</code>å­æ®µå­å¨äºâæ¶åæ´æ°âçæ¯ä¸ªChannelçæ´æ°å¼ã<code>channel_versions</code>å­æ®µè¿åææChannelççæ¬ã</p>
<pre><code class="language-python">class Checkpoint(TypedDict):
    v : int
    id : str
    ts : str		
    channel_values : dict[str, Any]
    channel_versions : ChannelVersions
    versions_seen : dict[str, ChannelVersions]
    updated_channels : list[str] | None
</code></pre>
<p>Nodeå¹¶ä¸è½å®æ¶è§å¯å°Channelçååï¼<code>versions_seen</code>å­æ®µä»¥<code>{ "Nodeå": { "ä¾èµChannelå": "çæ¬ID" } }</code>è¿æ ·çç»æè¿åæ¯ä¸ªNodeæ§è¡æ¶æè½âçå°âçChannelçæ¬ï¼ å®è®°å½äºNodeå®æè®¡ç®æ¶çåç½®æ¡ä»¶ãå¨ä¸­æ­æ¢å¤æ¶ï¼å¼æå¯¹æ¯<code>versions_seen</code>ï¼å¦æNodeçå°çè¾å¥çæ¬æ²¡åï¼ä¸å®å·²ç»æäºè¾åºè®°å½ï¼é£ä¹å°±æ ééå¤æ§è¡ï¼æä»¥è¿æ¯å®ç°å æä¸è´æ§åå¹ç­æ§çå³é®ãå¦ä¸çJSONæ¯ç±Pregelçæçä¸ä¸ªCheckpointå¯¹è±¡åºåååçç»æã</p>
<pre><code class="language-json">{
  "v": 4,
  "ts": "2026-01-18T13:42:07.542155+00:00",
  "id": "1f0f4737-b4b1-6bbb-8001-1e44d720a9df",
  "channel_versions": {
    "foo": "00000000000000000000000000000001.0.6943525017042773",
    "bar": "00000000000000000000000000000002.0.24038201058058928",
    "baz": "00000000000000000000000000000003.0.8444674692332181"
  },

  "versions_seen": {
    "__input__": {},
    "foo": { "foo": "00000000000000000000000000000001.0.6943525017042773" },
    "bar": { "bar": "00000000000000000000000000000002.0.24038201058058928" }
  },

  "updated_channels": [ "baz" ],
  "channel_values": {
    "foo": "begin",
    "bar": "bar",
    "baz": "baz"
  }
}
</code></pre>
<h3 id="14å­å¨ç»æ">1.4	å­å¨ç»æ</h3>
<p>æ¥ä¸æ¥ï¼æä»¬ä»¥<code>InMemorySaver</code>ä¸ºä¾ççCheckpointä¼éç¨ææ ·çå­å¨ç»æï¼ä»¥åä»¥æ­¤ç»æåºç¡çè¯»åæ¹å¼ãInMemorySaveéå¯¹Checkpointçå­å¨æ¶åä¸¤ä¸ªå­å¸ãä¸ä¸ªåä¸º<code>blobs</code>çå­å¸ç¨äºå­å¨Channelçè·è½½åå®¹ï¼å¼ï¼ï¼éç¨çKeyæ¯ç±<code>Thread ID</code>ã<code>Checkpointå½åç©ºé´</code>ã<code>Channelåç§°</code>å<code>çæ¬</code>ææçååç»ãå¦ä¸ä¸ªåä¸º<code>storage</code>çå­å¸æ¶ä¸ä¸ªå·æåå±ç»æçå­å¸ï¼å·ä½ç±»åä¸º<code>defaultdict[str, dict[str, dict[str, tuple[tuple[str, bytes], tuple[str, bytes], str | None]]]]</code>ï¼æ¯ä¸å±å­å¸çKeyé¡¶å¦ä¸ãæä»¬å¯ä»¥è®¤ä¸ºblobsç¨äºå­å¨æ°æ®ï¼storageä¸ºç´¢å¼è¡¨ã</p>
<table>
<thead>
<tr>
<th style="text-align: left">å±çº§</th>
<th style="text-align: left">Key ç±»å</th>
<th style="text-align: left">è¯´æ</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">ç¬¬ä¸å±</td>
<td style="text-align: left">Thread_id</td>
<td style="text-align: left">ä¼è¯éç¦»ï¼åºåä¸åçç¨æ·æå¯¹è¯æµ</td>
</tr>
<tr>
<td style="text-align: left">ç¬¬äºå±</td>
<td style="text-align: left">Checkpoint_ns</td>
<td style="text-align: left">å½åç©ºé´éç¦»ï¼æ¯æå­å¾æä¸åæ¨¡åçç¬ç«ç¶æç©ºé´</td>
</tr>
<tr>
<td style="text-align: left">ç¬¬ä¸å±</td>
<td style="text-align: left">checkpoint_id</td>
<td style="text-align: left">çæ¬éç¦»ï¼ç¨äºå®ä½ç¹å®çæ¬çå¿«ç§</td>
</tr>
</tbody>
</table>
<p>æåä¸å±å­å¸çå¼æ¯ä¸ä¸ªä¸åç»<code>tuple[tuple[str, bytes], tuple[str, bytes], str | None]</code>ï¼å®ä»¬å°æ°æ®åºåååå­å¨ï¼ä»¥ç¡®ä¿åå­ä¸­çæ°æ®æ¯ä¸å¯åä¸æäºå¤å¶çï¼ä¸ä¸ªé¨ååæ¬ï¼</p>
<ul>
<li>tuple[str, bytes]ï¼åä¸é¨åè¡¨ç¤ºçåºååç±»åï¼éå¸¸æ¯jsonæmsgpackï¼ï¼ç¬¬äºé¨åè¡¨ç¤ºç»è¿åºåååçCheckpointå¯¹è±¡ï¼ç±äºå·ä½çå¼å·²ç»å­å¨å¨blobsä¸­äºï¼æä»¥æ­¤æ¶çCheckpointçchannel_valueså­æ®µå·²ç»è¢«ç§»é¤ï¼ãè¿éä¸åå­å¨ Python å­å¸å¯¹è±¡ï¼èæ¯å­å¨å­èæµãè¿æ¨¡æäºæ°æ®åºå­åè¿ç¨ï¼å¹¶é²æ­¢äºNodeå¨åå­ä¸­æå¤ä¿®æ¹å·²å­ççç¶æï¼å®ç°å¯¹è±¡çæ·±åº¦éç¦»ã</li>
<li>tuple[str, bytes]ï¼Checkpointåæ°æ®ï¼åä¸é¨ååæ ·è¡¨ç¤ºåºååç±»åï¼ç¬¬äºé¨åä¸ºç»è¿åºåååçCheckpointMetadataå¯¹è±¡ã</li>
<li>str | Noneï¼ç¶çº§checkpoint_idï¼è¿éçParentä¸æ¯å¦ä»¥å­å¾å½¢å¼æ§è¡æ²¡æå³ç³»ï¼è¿éä»£è¡¨ä½ä¸ºè°ç¨èçNodeï¼ï¼InMemorySaverå¯ä»¥éè¿è¿ä¸ª IDå¨åå­ä¸­é¡ºçé¾æ¡åä¸è¿½æº¯ï¼ä»èå¨æ¢å¤æ¶åå¹¶å¢éç¶æã</li>
</ul>
<h2 id="2-æä¹åpending-write">2. æä¹åPending Write</h2>
<p>Checkpointæ¯å¨Superstepæåç»ææ¶éå¯¹Channelç¶æåå»ºçï¼å®å¹¶ä¸è½åæ ä¸ä¸ªå°æªç»æSuperstepåççå®ç¶æãPregelå¨æ§è¡è¿ç¨ä¸­å¯ä»¥è½åºç°ä¸å¯é¢æçéè¯¯ï¼æèéè¦äººä¸ºä»å¥å¯¼è´å¯é¢æçä¸­æ­ï¼å¹¶è¡æ§è¡çä»»å¡å°±ä¼åºç°é¨åé¨åæåãé¨åå¤±è´¥åä¸­æ­çæåµãå¯¹äºæåæ§è¡çæä½ï¼å®ä»¬éå¯¹ç®æ Channelçåå¥å¹¶æ²¡æéè¿ä¸ä¸ªCheckpointåºå®ä¸æ¥ï¼ä»ä»å±äºä¸ä¸ª<code>Pending Write</code>ãå¦æè¿ç§ä¸­é´ç¶ææ²¡æè¢«æä¹åï¼ç­ä¸æ¬¡æ¢å¤æ§è¡çæ¶åï¼æ¬æ¥å·²ç»æåæ§è¡çä»»å¡è¿ä¼éå¤æ§è¡ï¼è¿æ¯æ æ³æ¥åçã</p>
<p>å¦ææä¸ªä»»å¡æ¶åå°å¤æ¬¡äººä¸ºä¸­æ­ï¼æ¯æ¬¡æ¢å¤æ§è¡é½éè¦æä¾<code>Resume Value</code>ãå¦æè¿äºResume Valueæ²¡ææä¹åï¼é£ä¹æ¯æ¬¡æ¢å¤è°ç¨æä¾çResume Valueæ°¸è¿é½ä¼æä¾ç»ç¬¬ä¸ä¸ªä¸­æ­ï¼å¤æ¬¡ä¸­æ­æ ¹æ¬å°±æ²¡æ³å®ç°ï¼æä»¥æä¾çResume Valueä¹éè¦ä»¥Pending Writeçå½¢å¼å­å¨ä¸æ¥ã</p>
<p>æä¹åä¸ä»ä»éè¦å°Superstepå®ææ¶å°Channelçç¶æä»¥Checkpointåºå®ä¸æ¥ï¼è¿éè¦å°æ¶åå°çææPending Writeæç§ååé¡ºåºè®°å½ä¸æ¥ãPending Writeä¸ä»ä»éäºæè¿°æåä»»å¡éå¯¹ç®æ Channelçåå¥åä¾åºæä¾Resume Valueï¼ä»»å¡å¨æ§è¡ä¸­æåºçå¼å¸¸åä¸­æ­ä¹ä¼ä»¥Pending Writeçå½¢å¼è¢«è®°å½ä¸æ¥ã</p>
<p>å®éä¸è¿ç§åºäºå¨éåºç¡æ°æ®åå¢éæä½æ¥å¿ç¸ç»åçæä¹åå½¢å¼ï¼å¨å¾å¤åå­æ°æ®åºä¸­å¾å°äºå¹¿æ³çåºç¨ãä»¥Redisä¸ºä¾ï¼å®ä¼éç¨ç¸åºçç­ç¥æ¯éä¸æ®µæ¶é´å°å½åæ¶é´ç¹çåå­å¿«ç§ä»¥<code>RDB</code>å½¢å¼åºåä¸æ¥ï¼åæ¶éå¯¹æ°æ®åºæä½çæ¯ä¸ªæä½é½ä¼æç§æ¶é´é¡ºåºä»¥<code>AOL</code>çå½¢å¼å­å¨ä¸æ¥ãå¯¹äºPregelæ¥è¯´ï¼Checkpointå°±æ¯RDBï¼Pending Wrteså°±æ¯AOLãå½Pregelä»¥æ¢å¤å½¢å¼æ§è¡çæ¶åï¼å®ä¼åæåå¹¶åºç¨æå®çCheckpointå¿«ç§ï¼ç¶åå¯¹ç¶æä¸ºæåæ§è¡çPending Writeè¿è¡éæ¾å°±è½æ¢å¤ä¸­æ­æ¶çç¶æã</p>
<p>éå¯¹Pending Writeçæä¹åéè¿è°ç¨BaseCheckpointSaverå¦ä¸æç¤ºçput_writes/aput_writesæ¹æ³å®æãPending Writeçæä¹åæ¯åºäºä»»å¡è¿è¡çï¼æä»¥æä»¬éè¦æå®ä»»å¡çIDåè·¯å¾ãconfigåæ°æä¾RunnableConfigå¯¹è±¡æºå¸¦äºæéçThread IDï¼ Checkpointå½åç©ºé´åCheckpoint IDãå·ä½éå¯¹ChannelçPending Writeç±writesåæ°æä¾çï¼ è¿æ¯ä¸ä¸ªç±Channelåç§°åå¼çäºåç»ç»æçåºåã</p>
<pre><code class="language-python">class BaseCheckpointSaver(Generic[V]):
    def put_writes(
        self,
        config: RunnableConfig,
        writes: Sequence[tuple[str, Any]],
        task_id: str,
        task_path: str = "",
    ) -&gt; None
    async def aput_writes(
        self,
        config: RunnableConfig,
        writes: Sequence[tuple[str, Any]],
        task_id: str,
        task_path: str = "",
    ) -&gt; None
</code></pre>
<p>å¯¹äºInMemorySaveræ¥è¯´ï¼å®å°PendingWriteå­å¨äºä¸ä¸ªç»æä¸º<code>defaultdict[tuple[str, str, str], dict[tuple[str, int], tuple[str, str, tuple[str, bytes], str]]]</code>çä¸¤å±å­å¸ä¸­ãç¬¬ä¸å±å­å¸çKeyä¸º<code>Thread ID</code>ï¼ <code>Checkpointå½åç©ºé´</code>å<code>Checkpoint ID</code>ä¸åç»ãç¬¬äºå±åç»çç¬¬ä¸ä¸ªé¨åä¸ºTask IDï¼ç¬¬äºé¨åæ¯å½åPending Writeå¨writesåºåä¸­çç´¢å¼ãçæ­£å­å¨çåå®¹æ¯ç±å¦ä¸åé¨åç»æçåç»ï¼</p>
<ul>
<li>task_idï¼åä½å­å¨ä»»å¡ IDï¼ä¾¿äºå¿«éæ£ç´¢ã</li>
<li>channelï¼ Channelçåç§°ã</li>
<li>tuple[str, bytes]ï¼åé¨åè¡¨ç¤ºåºååæ ¼å¼ï¼å¦"json"æ"pickle"ï¼ãåä¸é¨åä¸ºåºåååçå­èã</li>
<li>task_pathï¼ä»»å¡å¨å¾ç»æä¸­çå®æ´è·¯å¾ã</li>
</ul>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-18 08:41">2026-02-18 08:40</span>&nbsp;
<a href="https://www.cnblogs.com/jaydenai">JaydenAI</a>&nbsp;
éè¯»(<span id="post_view_count">24</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19622525);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19622525', targetLink: 'https://www.cnblogs.com/jaydenai/p/19622525/checkpoint-persistent', title: '[æè§£LangChainæ§è¡å¼æ]åºäºCheckpointçæä¹å' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
        </channel>
        </rss>