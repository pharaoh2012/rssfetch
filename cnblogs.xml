<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åå®¢å­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2026-02-10T13:15:29.955Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åå®¢å­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ OData åè®®çæºè½åè¯­ä¹äºæä½ ]]></title>
    <link>https://www.cnblogs.com/shanyou/p/19601411</link>
    <guid>6e705b1a67313985bd02087bca7f30a1</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/shanyou/p/19601411" title="åå¸äº 2026-02-10 20:39">
    <span role="heading" aria-level="2">OData åè®®çæºè½åè¯­ä¹äºæä½</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        query-craft-mcp åå½äº LLM ä¸ OData æå¡ä¹é´çè¯­ä¹æ¡¥æ¢ï¼è§£å³ OData v4 è¯­æ³å¤æä¸å¯¹å¤§å°åææçé®é¢
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>å¨å½ä»å¤æå¤åçä¼ä¸æ°å­åè½¬åè¿ç¨ä¸­ï¼æ°æ®åè®®çæ ååä¸äºæä½æ§å·²æä¸ºæ¯æä¸å¡ææ·æ§ä¸å³ç­æºè½çæ ¸å¿åºç³ãå¼æ¾æ°æ®åè®®ï¼Open Data Protocolï¼ç®ç§° ODataï¼ä½ä¸ºä¸ç§åºäº REST æ¶æé£æ ¼çå¼æ¾åè®®ï¼èª 2007 å¹´ç±å¾®è½¯å¬å¸ï¼Microsoftï¼åèµ·ä»¥æ¥ï¼ç»åäºä»ç§æè§èå°å¨çå¬è®¤å½éæ åçåä¸½èåãOData çæ ¸å¿ç®æ å¨äºæä¾ä¸ç§æ ååçæ¹å¼æ¥åå»ºåæ¶è´¹å¯æ¥è¯¢ä¸äºæä½ç Web APIï¼ä»èæç ´æ°æ®å­¤å²ï¼æåè·¨ç³»ç»æ°æ®çå±äº«ä»·å¼ã</p>
<h2 id="ä¸odata-åè®®çåå²èæ¯ä¸è®¾è®¡å²å­¦"><strong>ä¸ãOData åè®®çåå²èæ¯ä¸è®¾è®¡å²å­¦</strong></h2>
<p>OData çèµ·æºå¯ä»¥è¿½æº¯å° Web 2.0 æ¶ä»£å¯¹æ°æ®äº¤æ¢ç®ä¾¿æ§çè¿«åéæ±ãæ©æçä¼ä¸æå¡ä¸»è¦ä¾èµäº SOAP ç­åºäºå¨ä½çåè®®ï¼è¿ç±»åè®®è½ç¶ä¸¥è°¨ä½è¿äºæ²éä¸é¾ä»¥å¨ç°ä»£ Web ç¯å¢ä¸­çµæ´»é¨ç½²ãä¸ºäºè§£å³è¿äºææï¼å¾®è½¯æåæ¨åºäº OData v1.0 è³ v3.0 çæ¬ï¼å¹¶å°å¶ç½®äºå¾®è½¯å¼æ¾è§èæ¿è¯ºï¼Microsoft Open Specification Promiseï¼ä¹ä¸ãéçåè®®çæçï¼OData éæ¸æ­¥å¥æ ååè½¨éï¼v4.0 çæ¬æ­£å¼éè¿ OASIS èççæ ååå®¡æ ¸ï¼å¹¶æç»è·å¾ ISO/IEC çæ¹åï¼ISO/IEC 20802-1:2016ï¼ï¼ç¡®ç«äºå¶å¨ RESTful API é¢åçæå¨å°ä½ã</p>
<h3 id="æ ¸å¿è®¾è®¡åå"><strong>æ ¸å¿è®¾è®¡åå</strong></h3>
<p>OData çè®¾è®¡å²å­¦æ·±æ·±ææ ¹äº REST ååï¼åæ¶åå¨è¯­ä¹è¡¨è¾¾ä¸è¿è¡äºæ¾èå¢å¼ºãåæå¶è®¾è®¡ååï¼å¯ä»¥åç°äºä¸ªå³é®ç»´åº¦ï¼è¿äºç»´åº¦å±åææäºå¶å¨ä¼ä¸çº§åºç¨ä¸­çé§æ§ï¼</p>
<table>
<thead>
<tr>
<th style="text-align: left">æ ¸å¿åå</th>
<th style="text-align: left">æè¿°ä¸å®è·µå«ä¹</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left"><strong>éµå¾ª REST åå</strong></td>
<td style="text-align: left">å»ºç«å¨ HTTPãAtomPub å JSON ä¹ä¸ï¼ä½¿ç¨ URI æ è¯èµæºï¼å©ç¨æ å HTTP æ¹æ³æ§è¡æä½ã</td>
</tr>
<tr>
<td style="text-align: left"><strong>ä¿æç®åæ§</strong></td>
<td style="text-align: left">ä¼åè§£å³ 80% çéç¨åºæ¯ï¼ä¸ºå¤æéæ±æä¾å¯æ©å±æ§ï¼ç¡®ä¿åºç¡åè§æå¡çæå»ºé¨æ§è¾ä½ã</td>
</tr>
<tr>
<td style="text-align: left"><strong>å¢éå¼æå»º</strong></td>
<td style="text-align: left">åè®¸å¼åèä»æç®åçåªè¯»æå¡å¼å§ï¼éçä¸å¡éæ±éæ­¥å¼å¥æ¥è¯¢ãè¿æ»¤ãæåºååå¥è½åã</td>
</tr>
<tr>
<td style="text-align: left"><strong>é«åº¦å¯æ©å±æ§</strong></td>
<td style="text-align: left">æ¯æå¨ä¸ç ´åæ¢æå®¢æ·ç«¯å¼å®¹æ§çåæä¸ï¼å¼å¥ç¹å®é¢åçåè½æ©å±ï¼ç¡®ä¿æç»­æ¼è¿ã</td>
</tr>
<tr>
<td style="text-align: left"><strong>æ°æ®æºæ å³æ§</strong></td>
<td style="text-align: left">ä¸é¢è®¾åºå±æ°æ®å­å¨ææ¯ï¼æ è®ºæ¯å³ç³»åæ°æ®åºãæä»¶ç³»ç»è¿æ¯åå®¹ç®¡çç³»ç»ï¼åå¯ç»ä¸æ å°ã</td>
</tr>
</tbody>
</table>
<p>éè¿è¿ç§é«åº¦æ½è±¡çè®¾è®¡ï¼OData ä¸ä»ä»æ¯ä¸ä¸ªæ°æ®ä¼ è¾æ ¼å¼ï¼æ´æ¯ä¸ä¸ªå³äºå¦ä½æå»ºâå¥½âAPI çæä½³å®è·µéåãå®è®©å¼åèè½å¤å°ç²¾åéä¸­å¨ä¸å¡é»è¾ä¸ï¼èæ éä¸ºè¯·æ±/ååºå¤´ãç¶æç ãåªä½ç±»åæ URL çº¦å®ç­çç¢çææ¯ç»èå³ç¥ã</p>
<h2 id="äºå®ä½æ°æ®æ¨¡å-edm-ä¸åæ°æ®é©±å¨æ¶æ"><strong>äºãå®ä½æ°æ®æ¨¡å (EDM) ä¸åæ°æ®é©±å¨æ¶æ</strong></h2>
<p>OData ä¸ä¼ ç» RESTful API ææ¬è´¨çåºå«å¨äºå¶å¯¹âæ°æ®æ¨¡åâçæ¾å¼å®ä¹ãè¿ç§å®ä¹éè¿å®ä½æ°æ®æ¨¡åï¼Entity Data Model, EDMï¼å®ç°ï¼å®æ¯ OData è¯­ä¹äºæä½æ§ççµé­ã</p>
<h3 id="å®ä½æ°æ®æ¨¡åçç»æè¦ç´ "><strong>å®ä½æ°æ®æ¨¡åçç»æè¦ç´ </strong></h3>
<p>EDM åç¨äºå®ä½-èç³»ï¼ERï¼æ¨¡åçæ¦å¿µï¼å®ä¹äºä¸ä¸ªæ½è±¡çæ¦å¿µæ¨¡åæ¥æè¿°æå¡æ´é²çææèµæºãå¶æ ¸å¿ç»æé¨ååæ¬å®ä½éï¼EntitySetsï¼ãå®ä½ï¼Entitiesï¼ãå¤æç±»åï¼ComplexTypesï¼åæ éç±»åï¼Scalar Typesï¼ã</p>
<ol>
<li><strong>å®ä½ä¸å®ä½é</strong>ï¼å®ä½æ¯å·æå¯ä¸æ è¯ç¬¦ï¼Keyï¼çç»æåè®°å½ï¼éå¸¸å¯¹åºæ°æ®åºä¸­çä¸è¡ãå®ä½éåæ¯åç±»å®ä½çéåï¼ç±»ä¼¼äºæ°æ®åºè¡¨ãå¼å¾æ³¨æçæ¯ï¼ä¸ä¸ªå®ä½ç±»åå¯ä»¥å­å¨äºå¤ä¸ªå·æä¸ååç§°çå®ä½éä¸­ï¼è¿ä¸ºå¼åèæä¾äºæå¤§ççµæ´»æ§ã</li>
<li><strong>æ éç±»å</strong>ï¼EDM æ¥æä¸å¥åç½®çå¼ºç±»åç³»ç»ï¼ææå±æ§å¿é¡»å±äºé¢å®ä¹çæ éç±»åï¼å¦ Edm.String, Edm.Int32, Edm.DateTimeOffsetï¼ãè¿ç§å¼ºç±»åçº¦æç¡®ä¿äºè·¨å¹³å°ãè·¨è¯­è¨çæ°æ®äº¤æ¢å·æé«åº¦çä¸è´æ§ã</li>
<li><strong>å¤æç±»å</strong>ï¼åè®¸å°ä¸ç»æ éå±æ§ç»åå¨ä¸èµ·ï¼å½¢æå¯éç¨çç»æï¼ä½å¶æ¬èº«ä¸å·å¤å¯ä¸æ è¯ï¼å¿é¡»ä¾éäºå®ä½å­å¨ã</li>
<li><strong>å¯¼èªå±æ§ (Navigation Properties)</strong>ï¼æè¿°äºå®ä½ä¹é´çå³èå³ç³»ãéè¿å¯¼èªå±æ§ï¼å®¢æ·ç«¯å¯ä»¥ä»ä¸ä¸ªå®ä½è·³è½¬å°å¦ä¸ä¸ªç¸å³èçå®ä½æå®ä½éï¼è¿ææäº OData å¼ºå¤§çå¾å¯¼èªè½åã</li>
</ol>
<h3 id="æå¡ææ¡£ä¸åæ°æ®ææ¡£çä»·å¼"><strong>æå¡ææ¡£ä¸åæ°æ®ææ¡£çä»·å¼</strong></h3>
<p>ä¸ºäºå®ç°å®¢æ·ç«¯çâèªåç°âè½åï¼æ¯ä¸ä¸ª OData æå¡é½å¿é¡»æä¾ä¸¤ä¸ªæ ¸å¿ææ¡£ï¼</p>
<ul>
<li><strong>æå¡ææ¡£ (Service Document)</strong>ï¼ä½äºæå¡æ ¹è·¯å¾ï¼å¦ <a href="http://host/service/%EF%BC%89%EF%BC%8C%E5%88%97%E5%87%BA%E6%89%80%E6%9C%89%E5%8F%AF%E7%94%A8%E7%9A%84%E5%AE%9E%E4%BD%93%E9%9B%86%E3%80%81%E5%87%BD%E6%95%B0%E5%92%8C%E5%8D%95%E4%BE%8B%EF%BC%8C%E4%B8%BA%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%8F%90%E4%BE%9B%E5%AF%BC%E8%88%AA%E7%9A%84%E5%85%A5%E5%8F%A3%E7%82%B9%E3%80%82" target="_blank" rel="noopener nofollow">http://host/service/ï¼ï¼ååºææå¯ç¨çå®ä½éãå½æ°ååä¾ï¼ä¸ºå®¢æ·ç«¯æä¾å¯¼èªçå¥å£ç¹ã</a></li>
<li><strong>åæ°æ®ææ¡£ (Metadata Document)</strong>ï¼ä½äº $metadata è·¯å¾ä¸ï¼éç¨éç¨æ¶æå®ä¹è¯­è¨ï¼CSDLï¼ç¼åãå®æ¯æå¡çâè¯´æä¹¦âï¼è¯¦ç»æè¿°äºæ¯ç§ç±»åçå±æ§ãé®ãå¯¼èªè·¯å¾åæ¯æçæä½ã</li>
</ul>
<p>è¿ç§åæ°æ®é©±å¨çæ¶æä½¿å¾éç¨å·¥å·ï¼å¦ ExcelãPower BIãSalesforce Connect ç­ï¼è½å¤ä»éè¿è§£æ $metadata å³å¯çè§£æå¡çå¨é¨ç»æï¼ä»èå®ç°é¶éç½®çæ°æ®éæã</p>
<h2 id="ä¸ç³»ç»æ¥è¯¢éé¡¹url-é©±å¨çæ°æ®åæè½å"><strong>ä¸ãç³»ç»æ¥è¯¢éé¡¹ï¼URL é©±å¨çæ°æ®åæè½å</strong></h2>
<p>OData æä»¤ä¸çç§°éçç¹æ§æ¯å¶æä¸ºä¸°å¯çæ¥è¯¢è¯­è¨ãéè¿å¨ URL ä¸­éå ç³»ç»æ¥è¯¢éé¡¹ï¼ä»¥ $ ç¬¦å·å¼å¤´ï¼ï¼å®¢æ·ç«¯å¯ä»¥ç²¾ç¡®æ§å¶æå¡å¨è¿åçæ°æ®åå®¹åæ ¼å¼ï¼ä»èæå¤§å°ç¼è§£äº REST æ¶æä¸­å¸¸è§çâè¿åº¦è·åâï¼Over-fetchingï¼åâè·åä¸è¶³âï¼Under-fetchingï¼é®é¢ã</p>
<h3 id="åºç¡æ¥è¯¢æä½"><strong>åºç¡æ¥è¯¢æä½</strong></h3>
<p>ä¸è¡¨æ»ç»äº OData ä¸­æå¸¸ç¨çç³»ç»æ¥è¯¢éé¡¹åå¶åè½ï¼</p>
<table>
<thead>
<tr>
<th style="text-align: left">æ¥è¯¢éé¡¹</th>
<th style="text-align: left">åè½è¯´æ</th>
<th style="text-align: left">å¸åç¤ºä¾</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">$filter</td>
<td style="text-align: left">åºäºé»è¾è¡¨è¾¾å¼ç­éæ°æ®ã</td>
<td style="text-align: left">Products?$filter=Price lt 10 and startswith(Name,'M')</td>
</tr>
<tr>
<td style="text-align: left">$select</td>
<td style="text-align: left">æå®è¿åçå±æ§å­æ®µï¼ä¼åå¸¦å®½ã</td>
<td style="text-align: left">Customers?$select=Name,Email</td>
</tr>
<tr>
<td style="text-align: left">$expand</td>
<td style="text-align: left">åµå¥è¿åå³èå®ä½ï¼åå°å¾è¿è¯·æ±ã</td>
<td style="text-align: left">Orders?$expand=OrderItems</td>
</tr>
<tr>
<td style="text-align: left">$orderby</td>
<td style="text-align: left">å¯¹ç»æè¿è¡æåºï¼æ¯æå¤å­æ®µã</td>
<td style="text-align: left">Products?$orderby=Price desc, Name</td>
</tr>
<tr>
<td style="text-align: left">$top / $skip</td>
<td style="text-align: left">å®ç°å®¢æ·ç«¯åé¡µï¼éå¶è¿åæ¡æ°æè·³è¿å N æ¡ã</td>
<td style="text-align: left">Employees?$top=10&amp;$skip=20</td>
</tr>
<tr>
<td style="text-align: left">$count</td>
<td style="text-align: left">è¿åå¹éæ¡ä»¶çè®°å½æ»æ° ã</td>
<td style="text-align: left">Invoices?$count=true</td>
</tr>
<tr>
<td style="text-align: left">$search</td>
<td style="text-align: left">æ§è¡å¨ææç´¢ï¼éç¨äºéç»æåæ°æ®ã</td>
<td style="text-align: left">Products?$search=waterproof</td>
</tr>
</tbody>
</table>
<h3 id="æ°æ®èåæ©å±-apply"><strong>æ°æ®èåæ©å± ($apply)</strong></h3>
<p>å¨ OData v4.0 ä¸­ï¼åè®®å¼å¥äº $apply æ©å±ï¼å° OData ä»ç®åç CRUD åè®®æåå°äºåæååè®®çé«åº¦ãéè¿ $applyï¼å®¢æ·ç«¯å¯ä»¥å¨æå¡ç«¯æ§è¡ç±»ä¼¼äº SQL GROUP BY çæä½ã</p>
<p>æ°æ®èåçæ ¸å¿å¨äºä¸ç³»åè½¬æ¢ï¼Transformationsï¼çé¡ºåºæ§è¡ãä¾å¦ï¼groupby è½¬æ¢å°è¾å¥éååä¸ºå¤ä¸ªå­éï¼è aggregate åå¯¹è¿äºå­éåºç¨èåå½æ°ï¼å¦ sum, average, min, max, countdistinctï¼ã</p>
<p>è¿ç§è½¬æ¢æµæ¨¡å¼æ¯ææåº¦å¤æçæ¥è¯¢ãä¾å¦ï¼âææè®¡ç®æ¯ç§äº§åçå¹³åéå®é¢âå¯ä»¥éè¿å¤å±èåå®ç°ï¼é¦åæäº§ååæä»½è¿è¡ groupby å¹¶æ±åï¼ç¶åå¯¹ç»æåæ¬¡æäº§åè¿è¡ groupby å¹¶æ±å¹³åå¼ ãè¿ç§é¾å¼å¤çè½åä½¿å¾ OData è½å¤èä»»è½»éçº§çåä¸æºè½éæ±ã</p>
<h2 id="åå¹¶æ§å¶ä¸æ§è½ä¼åç­ç¥"><strong>åãå¹¶æ§å¶ä¸æ§è½ä¼åç­ç¥</strong></h2>
<p>å¨ä¼ä¸çº§é«å¹¶åç¯å¢ä¸ï¼ç¡®ä¿æ°æ®ä¸è´æ§ä¸ç³»ç»ååºéåº¦æ¯è¯ä»·åè®®ä¼å£çå³é®ææ ãOData éè¿ä¸ç³»åç²¾å¦çè®¾è®¡æä¾äºå·¥ä¸çº§çè§£å³æ¹æ¡ã</p>
<h3 id="ä¹è§å¹¶åæ§å¶ä¸-etag"><strong>ä¹è§å¹¶åæ§å¶ä¸ ETag</strong></h3>
<p>ç±äº OData åºäºæ ç¶æç HTTP åè®®ï¼ä¼ ç»çæ²è§éï¼Pessimistic Lockingï¼ä¼æå¤§æå®³æ©å±æ§å¹¶å¯¼è´æ­»é 16ãå æ­¤ï¼OData æ¨èå¹¶å®ç°äºåºäºå®ä½æ ç­¾ï¼ETagï¼çä¹è§å¹¶åæ§å¶ã</p>
<p>å½æå¡å¨è¿åå®ä½æ¶ï¼ä¼å¨ååºå¤´æåæ°æ®ä¸­åå«ä¸ä¸ª ETagï¼å®éå¸¸æ¯å®ä½åå®¹æçæ¬å·çåå¸å¼ãå½å®¢æ·ç«¯å°è¯æ´æ°è¯¥å®ä½æ¶ï¼å¿é¡»å¨ If-Match è¯·æ±å¤´ä¸­æºå¸¦è¯¥ ETagãå¦ææå¡å¨åç°å­å¨ä¸­çå½å ETag ä¸å®¢æ·ç«¯æä¾çä¸ä¸è´ï¼åè¯´æå¨å®¢æ·ç«¯è¯»åä¹åï¼è¯¥è®°å½å·²è¢«å¶ä»è¿ç¨ä¿®æ¹ï¼æ­¤æ¶æå¡å¨ä¼è¿å 412 Precondition Failedã</p>
<p>è¿ä¸æºå¶å¨ SAP CAPãASP.NET Web API ç­ä¸»æµæ¡æ¶ä¸­å¾å°äºèªå¨åå¤çãä¾å¦ï¼å¨ SAP CAP ä¸­ï¼ä»éä¸ºå±æ§æ·»å  @odata.etag æ³¨è§£ï¼æ¡æ¶å³å¯èªå¨å®ææ ¡éªé»è¾ï¼æ¾èéä½äºå¼åææ¬ã</p>
<h3 id="æ§è½å éå¨æ¹å¤çä¸æå¡ç«¯åé¡µ"><strong>æ§è½å éå¨ï¼æ¹å¤çä¸æå¡ç«¯åé¡µ</strong></h3>
<ol>
<li><strong>æ¹å¤ç ($batch)</strong>ï¼$batch åè®¸å°å¤ä¸ªç¬ç«çè¯»åè¯·æ±åå¹¶ä¸ºä¸ä¸ª HTTP POST è¯·æ±ãåææ¾ç¤ºï¼è¿ä¸ä»åå°äºç½ç»å¾è¿æ¶é´ï¼RTTï¼ï¼è¿è½å¨æ´æ°æä½ä¸­å©ç¨åä¸çåå­å·¥ä½ååï¼Atomic Unit of Workï¼ï¼ä»èåå°æ°æ®åºäºå¡å¼éå CPU å ç¨ 11ã</li>
<li><strong>æå¡ç«¯åé¡µ ($skiptoken)</strong>ï¼ä¸ç®åçåç§»éåé¡µï¼$skipï¼ä¸åï¼æå¡ç«¯åé¡µå©ç¨ $skiptoken è¿åä¸ä¸ªä¸éæçä»¤çï¼è¯¥ä»¤çéå¸¸å¯¹åºæ°æ®åºæ¸¸æ æä¸ä¸æ¬¡æ¥è¯¢çæåä¸æ¡è®°å½çé®å¼ 12ãå¯¹äºå¤§åæ°æ®éï¼$skiptoken çæ¥è¯¢éåº¦è¿é«äº $skipï¼å ä¸ºå®é¿åäºæ°æ®åºå¼ææ«æå¹¶ä¸¢å¼ååºè®°å½çæ§è½æè 12ã</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align: left">ä¼åææ¯</th>
<th style="text-align: left">ä¸»è¦æ¶ç</th>
<th style="text-align: left">éç¨åºæ¯</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left"><strong>$batch</strong></td>
<td style="text-align: left">åå° RTTï¼ä¿è¯åå­æ§ã</td>
<td style="text-align: left">æ¹éæ´æ°éå³èå®ä½ï¼åå°ç§»å¨ç«¯çµéæè ã</td>
</tr>
<tr>
<td style="text-align: left"><strong>$expand</strong></td>
<td style="text-align: left">è§£å³ N+1 æ¥è¯¢é®é¢ã</td>
<td style="text-align: left">è·åä¸»è¡¨åå¶æç»è¡ï¼å¦è®¢åä¸é¡¹ï¼ã</td>
</tr>
<tr>
<td style="text-align: left"><strong>$select</strong></td>
<td style="text-align: left">åå° Payload ä½ç§¯ã</td>
<td style="text-align: left">ä»è·å ID ååç§°ç¨äºå±ç¤ºåè¡¨ã</td>
</tr>
<tr>
<td style="text-align: left"><strong>$skiptoken</strong></td>
<td style="text-align: left">ç¨³å®é«æçå¤§æ°æ®éåé¡µã</td>
<td style="text-align: left">æ éæ»å¨åè¡¨ï¼å¤§åæ¥è¡¨å¯¼åºã</td>
</tr>
<tr>
<td style="text-align: left"><strong>GZIP åç¼©</strong></td>
<td style="text-align: left">æ¾èåå°ç½ç»æµéã</td>
<td style="text-align: left">ææçäº§ç¯å¢ç OData æå¡ 20ã</td>
</tr>
</tbody>
</table>
<h2 id="äº-æºè½åéæmodel-context-protocol-mcp-ä¸-odata-çåå"><strong>äºã æºè½åéæï¼Model Context Protocol (MCP) ä¸ OData çåå</strong></h2>
<p>éçå¤§è¯­è¨æ¨¡åï¼LLMï¼æä¸ºä¼ä¸çäº§åçæ ¸å¿ï¼API åè®®çâæºå¨å¯çè§£æ§âåå¾è³å³éè¦ãOData çåæ°æ®é©±å¨ç¹æ§ä½¿å¶æä¸º LLM è½å°æçæ³çåå£¤ã</p>
<h3 id="è¯­ä¹æ¥å°-semantic-grounding-çææ"><strong>è¯­ä¹æ¥å° (Semantic Grounding) çææ</strong></h3>
<p>LLM å¨çææ¥è¯¢è¯­å¥æ¶å¸¸é¢ä¸´âå¹»è§âé®é¢ï¼å³çæä¸å­å¨çå®ä½åæå±æ§åãOData çåæ°æ®ææ¡£æä¾äºä¸ä¸ªå®ç¾çåèåæ ç³»ï¼Grounding Layerï¼ãéè¿æä¾å¼ºç±»åç EDM æè¿°ï¼æ¨¡åå¯ä»¥åç¡®è·ç¥ç³»ç»è¾¹çï¼çæçæ¥è¯¢è¯­å¥ï¼å¦ Text-to-ODataï¼å¶åç¡®çè¿é«äºéç»æåç REST APIã</p>
<h3 id="model-context-protocol-mcp-çå´èµ·"><strong>Model Context Protocol (MCP) çå´èµ·</strong></h3>
<p>Model Context Protocol æ¯ 2024 å¹´åºæ¨åºçå¼æºæ åï¼æ¨å¨è¿æ¥ AI å©æä¸å¤é¨åºç¨ ,MC æå¡å¨ä½ä¸º AI çâæå®âï¼å¯ä»¥å®æ¶è·åå¤é¨ç³»ç»çä¸ä¸æãç±äº OData æå¡èªå¸¦æºå¨å¯è¯»çåæ°æ®ï¼å° OData æå¡è½¬æ¢ä¸º MCP èç¹æå¤§å°éä½äº AI ä»£çï¼Agentï¼ä¸ä¼ä¸æ°æ®äº¤äºçææ¬ ã</p>
<h4 id="æ·±åº¦è°ç query-craft-mcp-åå¶ææ¯æ¶æ"><strong>æ·±åº¦è°ç ï¼Query-Craft-MCP åå¶ææ¯æ¶æ</strong></h4>
<p>ç± AM10101010 å¼åç query-craft-mcp æ¯è¿ä¸é¢åçåéå·¥å·ãå®åå½äº LLM ä¸ OData æå¡ä¹é´çè¯­ä¹æ¡¥æ¢ï¼è§£å³ OData v4 è¯­æ³å¤æä¸å¯¹å¤§å°åææçé®é¢ã</p>
<p>æ ¹æ®å¯¹è¯¥é¡¹ç®çæ·±å¥åæï¼å¶ææ¯å®ç°åå«ä»¥ä¸æ ¸å¿è½åï¼</p>
<ol>
<li><strong>åæ°æ®æç¥çæ</strong>ï¼è¯¥å·¥å·ä½¿ç¨ .NET 9 SDK å Microsoft.OData.Edm åºè§£æ $metadata XMLï¼å¨åå­ä¸­æå»ºå®ä½ãå±æ§ãé®åå¯¼èªé¾æ¥çç´¢å¼ãè¿ç¡®ä¿äº AI æ¥æ¶å°ç context æ¯åºäºçå®æ¶æçï¼ä»æ ¹æ¬ä¸æ¶é¤äºå¹»è§ã</li>
<li><strong>å¯¼èªè·¯å¾åç° (BFS ç®æ³)</strong>ï¼è¿æ¯ Query-Craft-MCP çä¸å¤§äº®ç¹ãå®å®ç°äºä¸ä¸ªåºäºå¹¿åº¦ä¼åæç´¢ï¼BFSï¼çéåå¨ï¼è½å¤èªå¨æ¾å°è¿æ¥ä¸¤ä¸ªç¸å³å®ä½çæç­ $expand é¾ãä¾å¦ï¼å½ç¨æ·è¯¢é®âæ¾ç¤ºè´­ä¹°è¿ç¹å®äº§åçå®¢æ·âæ¶ï¼AI è½å¤èªå¨æ¨å¯¼åº Orders/OrderDetails/Product çå¯¼èªè·¯å¾ï¼èæ éå¼åèæå¨ç¼åå¤æç join é»è¾ã</li>
<li><strong>è¿è¡åéªè¯</strong>ï¼å·¥å·å¨å°çæçæ¥è¯¢åéå°çæ­£çæ°æ®æºä¹åï¼ä¼æ ¹æ®åå­ä¸­çç´¢å¼è¿è¡è¯­æ³åè¯­ä¹éªè¯ï¼æ¦æªç±»åä¸å¹éæå±æ§ä¸å­å¨ç­éè¯¯ã</li>
<li><strong>å®¢æ·ç«¯è¾å©èå</strong>ï¼éå¯¹æäºä»æ¯æåºç¡ v4 åè½èä¸æ¯æé«çº§ $apply æ©å±çæå¡å¨ï¼Query-Craft-MCP æä¾äºå®¢æ·ç«¯èåå¼æï¼å¯ä»¥å¨æ¬å°å¯¹ç»æéæ§è¡ GROUP BY, SUM, AVG ç­ç»è®¡æä½ ã</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align: left">å·¥å·åç§°</th>
<th style="text-align: left">æ ¸å¿èè´£</th>
<th style="text-align: left">å¨ AI å·¥ä½æµä¸­çè§è²</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">list-entities</td>
<td style="text-align: left">æ´é²å®ä½æ¸åã</td>
<td style="text-align: left">å¸®å© LLM è¯å«å½åä¸å¡åºæ¯æ¶åçå¯¹è±¡ã</td>
</tr>
<tr>
<td style="text-align: left">find-navigation-path</td>
<td style="text-align: left">è·¯å¾æ¨å¯¼ã</td>
<td style="text-align: left">è§£å³è·¨è¡¨/è·¨å®ä½çå³ç³»é¾æ¥é®é¢ã</td>
</tr>
<tr>
<td style="text-align: left">validate-query</td>
<td style="text-align: left">è´¨éææ§ã</td>
<td style="text-align: left">åå½è¯­ä¹ç¼è¯å¨ï¼ç¡®ä¿çæç OData è¯­æ³æ­£ç¡®ã</td>
</tr>
<tr>
<td style="text-align: left">execute-odata-query</td>
<td style="text-align: left">æ°æ®æ£ç´¢ã</td>
<td style="text-align: left">æ§è¡çæ­£ç HTTP è¯·æ±å¹¶å° JSON è¿åç» AIã</td>
</tr>
</tbody>
</table>
<h2 id="ç»è®ºæ°æ®äºæä½çæ ååé«å°"><strong>ç»è®ºï¼æ°æ®äºæä½çæ ååé«å°</strong></h2>
<p>éè¿å¯¹ OData çæ·±åº¦è°ç ï¼æä»¬å¯ä»¥æ¸æ°å°çå°ï¼å®ä¸ä»ä»æ¯ä¸ä¸ªè¿å»çä¼ä¸æ åï¼æ´æ¯ä¸ä¸ªé¢åæªæ¥çè¯­ä¹äºæä½æ¡æ¶ãå¶å¼ºç±»åç EDM æ¶æï¼ä¸ºå½ä»å¤§è¯­è¨æ¨¡åçâè½å°âæä¾äºæç¨³åºçè¯­ä¹éç¹ï¼èå¶ä¸°å¯çæ¥è¯¢ä¸èåè½åï¼åä¸ºä¼ä¸ä½ä»£ç å¹³å°åèªå¨å Agent çæå»ºæä¾äºå³æå³ç¨çåæå¼æã</p>
<p>OData å¨éèãä¾åºé¾åæ ¸å¿ ERP ç­å¯¹æ°æ®ä¸¥è°¨æ§è¦æ±æé«çåºæ¯ä¸ï¼å¶å°ä½ä¾ç¶ä¸å¯æ¿ä»£ãå¯¹äºå¯»æ±æå»ºâAI Readyâæ°æ®æ¶æçä¼ä¸èè¨ï¼éæ©å¹¶ä¼å OData æå¡ï¼éåå¦ Query-Craft-MCP è¿æ ·çæºè½åä¸­é´ä»¶ï¼å°æ¯éå¾è¯­ä¹æºè½æ¶ä»£çå¿ç»ä¹è·¯ã</p>
<p>æªæ¥çç«äºå°ä¸åä»ä»æ¯æ°æ®çè§æ¨¡ä¹äºï¼èæ¯æ°æ®âè¢«çè§£âçéåº¦ä¸åç¡®åº¦ä¹äºãOData åè®®åå¶èåçåæ°æ®ç²¾ç¥ï¼æ­£æ¯è¿åºç«èµä¸­çå³é®èè´æã</p>
<h4 id="å¼ç¨çèä½"><strong>å¼ç¨çèä½</strong></h4>
<ol>
<li>Open Data Protocol - Wikipedia <a href="https://en.wikipedia.org/wiki/Open_Data_Protocol" target="_blank" rel="noopener nofollow">https://en.wikipedia.org/wiki/Open_Data_Protocol</a></li>
<li>OData - the Best Way to RESTï¼ <a href="https://www.odata.org/" target="_blank" rel="noopener nofollow">https://www.odata.org/</a></li>
<li>OData overview  <a href="https://learn.microsoft.com/en-us/odata/overview" target="_blank" rel="noopener nofollow">https://learn.microsoft.com/en-us/odata/overview</a></li>
<li>Model-driven Development of OData Services, è®¿é®æ¶é´ä¸º äºæ 10, 2026ï¼ <a href="https://modeling-languages.com/model-driven-development-of-odata-services/" target="_blank" rel="noopener nofollow">https://modeling-languages.com/model-driven-development-of-odata-services/</a></li>
<li>QueryCraft | MCP Servers - LobeHub <a href="https://lobehub.com/nl/mcp/am10101010-query-craft-mcp" target="_blank" rel="noopener nofollow">https://lobehub.com/nl/mcp/am10101010-query-craft-mcp</a></li>
<li>Why AI in Analytics Needs Metadata - GoodData,  <a href="https://www.gooddata.com/blog/why-ai-in-analytics-needs-metadata/" target="_blank" rel="noopener nofollow">https://www.gooddata.com/blog/why-ai-in-analytics-needs-metadata/</a></li>
<li>Optimizing an LLM-Based Clinical Data Querying System Using Metadata Enrichment and Task Decomposition   <a href="https://www.medrxiv.org/content/10.64898/2025.12.22.25342863v1.full.pdf" target="_blank" rel="noopener nofollow">https://www.medrxiv.org/content/10.64898/2025.12.22.25342863v1.full.pdf</a></li>
<li>Optimizing an LLM-Based Clinical Data Querying System Using Metadata Enrichment and Task Decomposition | medRxiv <a href="https://www.medrxiv.org/content/10.64898/2025.12.22.25342863v1" target="_blank" rel="noopener nofollow">https://www.medrxiv.org/content/10.64898/2025.12.22.25342863v1</a></li>
<li>The Model Context Protocol's impact on 2025 | Thoughtworks United States, è®¿é®æ¶é´ä¸º äºæ 10, 2026ï¼ <a href="https://www.thoughtworks.com/en-us/insights/blog/generative-ai/model-context-protocol-mcp-impact-2025" target="_blank" rel="noopener nofollow">https://www.thoughtworks.com/en-us/insights/blog/generative-ai/model-context-protocol-mcp-impact-2025</a></li>
</ol>


</div>
<div id="MySignature" role="contentinfo">
    <p>æ¬¢è¿å¤§å®¶æ«æä¸é¢äºç»´ç æä¸ºæçå®¢æ·ï¼æ¶ä½ ä¸äº</p>
<img src="https://images.cnblogs.com/cnblogs_com/shanyou/57459/o_220125090408_%E9%82%80%E8%AF%B7%E4%BA%8C%E7%BB%B4%E7%A0%81-258px.jpeg" width="170">
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-10 20:40">2026-02-10 20:39</span>&nbsp;
<a href="https://www.cnblogs.com/shanyou">å¼ åå</a>&nbsp;
éè¯»(<span id="post_view_count">5</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19601411);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19601411', targetLink: 'https://www.cnblogs.com/shanyou/p/19601411', title: 'OData åè®®çæºè½åè¯­ä¹äºæä½' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ SEALå¨åæå å¯CKKSæ¹æ¡å¥é¨è¯¦è§£ ]]></title>
    <link>https://www.cnblogs.com/zhaoweiwei/p/19577832/CKKS</link>
    <guid>03015066f59c9f000f9b729b9827f881</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/zhaoweiwei/p/19577832/CKKS" title="åå¸äº 2026-02-10 18:21">
    <span role="heading" aria-level="2">SEALå¨åæå å¯CKKSæ¹æ¡å¥é¨è¯¦è§£</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        æ¬æä»¥å¾®è½¯çå¼æºå¨åæåºSEALä¸­CKKSæ¹æ¡ä¸ºåç§ï¼ä¾æ¬¡ä»ç»äºCKKSæ¹æ¡ç¸å³çæ ¸å¿åçï¼ä»¥åæ¹æ¡å®æ½æ åæµç¨ï¼æåç»åºäºä¸ä¸ªä¸ä¸ªç®åçSEALåºCKKSæ¹æ¡ç¤ºä¾ç¨åºï¼å¹¶ç»åºç¸åºçè¿è¡ç»æã
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p align="left">CKKSï¼CheonâKimâKimâSongï¼æ¯2017å¹´è®ºæãHomomorphic Encryption for Arithmetic of Approximate Numbersãä¸­æåºçè¿ä¼¼è®¡ç®åæå å¯ç®æ³ï¼è®ºæçä½èæ¯Cheonç­åä½é©å½ç ç©¶èï¼å¦ä»è¯¥æ¹æ¡å·²ç»æ¯é¢åæµ®ç¹/å¤æ°è¿ä¼¼åæè®¡ç®çä¸»æµæ¹æ¡ï¼å¹¿æ³åºç¨äºå¯ææºå¨å­¦ä¹ ãæ°å¼è®¡ç®åºæ¯ãä¸åäºä»¥å¾åæå å¯ç®æ³ä¸­æè¿½æ±çè§£å¯ç»æåææå®å¨ä¸è´ï¼CKKSç®æ³çç®æ æ¯åè¿ä¼¼è®¡ç®ãè¿å¹¶ä¸åç¦»éæ±ï¼å ä¸ºç°å®çæ´»ä¸­å¤§é¨åè¿ç®ï¼é¢å¯¹çæ¯å®æ°ï¼å¤æ°ï¼ï¼èå®æ°ï¼å¤æ°ï¼çè¿ç®ï¼å¾å¾åªéè¦ä¿çä¸é¨åæææ°å­å³å¯ãæ­¤å¤ï¼åè®¸è¯¯å·®ï¼æ¾å®½åç¡®æ§çéå¶ï¼ä½¿å¾CKKSå¯¹æ¯äºå¶ä»åºäºLWE/RLWEé¾é¢çåææ¹æ¡ï¼ç»èæäºè¾å¤§çç®åï¼è®¡ç®æçä¹æäºå¾å¤§æåã</p>
<h1>1 æ ¸å¿åç</h1>
<h2>1.1 ç¼ç ä¸åµå¥åç</h2>
<p align="left">CKKSçæ ¸å¿åæ°æ¯è§èåµå¥ï¼Canonical Embeddingï¼ï¼å°ç¯Rä¸çå¤é¡¹å¼ä¸å¤æ°ç©ºé´C<sup>N/2</sup>ååæ å°ï¼</p>
<p align="left">ï¼1ï¼å¤é¡¹å¼<em>f(x)âR</em>å¯éè¿ååå¤é¡¹å¼çæ ¹æ å°ä¸ºN/2ç»´å¤æ°åé</p>
<p align="left">ï¼2ï¼å¤æ°åéå¯ååæ å°ä¸ºç¯ä¸å¤é¡¹å¼ï¼å®ç°åéæ°æ®ä¸å¤é¡¹å¼çæ æè½¬æ¢</p>
<p align="left">ï¼3ï¼ç»åç¼©æ¾å å­Î=2<sup>k</sup>ï¼å°æµ®ç¹æ°æ¾å¤§ä¸ºæ´æ°ï¼ééæéåè¿ç®</p>
<p align="left">æ§½ä½æ°é=N/2ï¼ä¾å¦N=8192æ¶ï¼åå¯æå¯æå4096ä¸ªæµ®ç¹æ°å¹¶è¡è¿ç®ãRæ¯ååå¤é¡¹å¼ç¯ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260209110608893-1701884716.png" alt="image" width="353" height="34" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>ç¯ä¸­çåç´ æ¯ç³»æ°æ¯æ´æ°ï¼ä¸¥æ ¼æ¥è¯´æ¯å®æ°ï¼çNæ¬¡å¤é¡¹å¼ã</p>
<p align="left">C<sup>N/2</sup>æ¯N/2ç»´å¤æ°åéææçç¯ï¼å®éé¢çåç´ æ¯N/2ç»´å¤æ°åéãè§èåµå¥æ¯ç¯åæï¼ä¿æç¯å æ³ä¸ä¹æ³çååä¸ä¸æ å°ï¼ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260209120035570-1372830017.png" alt="image" width="150" height="32" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>è®¾Î¶<sub>j</sub> = e<sup>i(2j+1)Ï/N</sup>ï¼j = 0,1,...,N-1æ¯x<sup>N</sup> + 1 = 0ï¼å³x<sup>N</sup> = -1 = e<sup>iÏ</sup>çNä¸ªåæ ¹ï¼åÏä»å·¦å°å³è¡¨ç¤ºä¸ºï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260209120224137-710695710.png" alt="image" width="474" height="40" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>Ïæä»¥ä¸å³é®æ§è´¨ï¼</p>
<p>ï¼1ï¼å æ³æ å°ä¸ºåéå æ³ï¼å³Ï(f+g) =&nbsp;Ï(f) +&nbsp;Ï(g)</p>
<p>ï¼2ï¼ä¹æ³æ å°ä¸ºåééåç´ ä¹æ³ï¼Hadamardç§¯ï¼Ï(fâ¢g) =&nbsp;Ï(f)&nbsp;â¢&nbsp;Ï(g)</p>
<p>ï¼3ï¼åå°ï¼å¯éï¼</p>
<p>å¯ä»¥ä»åéè¿åå¤é¡¹å¼ï¼éæ å°ï¼ï¼æ¥ä¸æ¥ä»¥N=8ä¸ºä¾ï¼ä»æ­£åä¸¤ä¸ªæ¹é¢è¿è¡åæã</p>
<h3>1 æ­£åæ å°ï¼canomical embedding R-&gt;C<sup>4</sup>ï¼</h3>
<p>å½N=8æ¶ï¼ç¯è¡¨ç¤ºä¸ºï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260209120812481-583938144.png" alt="image" width="193" height="27" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>ç¯ä¸­çåç´ ä¸ºå¤é¡¹å¼ï¼f(x)=a<sub>0</sub>+a<sub>1</sub>x+a<sub>2</sub>x<sup>2</sup>+...+a<sub>7</sub>x<sup>7</sup>ï¼x<sup>8</sup>+1=0çåæ ¹ä¸ºï¼x=e<sup>i(2k+1)Ï/8</sup>ï¼k=0,1,...,7ï¼ç±åæ ¹çå±è½­å¯ç¥ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260210101831409-1941165188.png" alt="image" width="270" height="262" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p align="left">åæ­£åæ å°å°å¤é¡¹å¼æ å°ä¸ºå¤æ°åéï¼è¡¨ç¤ºä¸ºï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260209121233176-213381444.png" alt="image" width="445" height="35" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>ä»¥ä¸åªåå4ä¸ªæ ¹ï¼å ä¸ºç±äºå±è½­æï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260209121546561-1996158330.png" alt="image" width="333" height="32" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>ä»¥å¤é¡¹å¼f(x) = 1 + 2x + 3x2ä¸ºä¾ï¼è®¡ç®ç¬¬ä¸ä¸ªæ§½ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260209121709917-1592425942.png" alt="image" width="571" height="99" loading="lazy" style="display: block; margin-left: auto; margin-right: auto">åçå¯å¾4ç»´åéçå¶ä»åéï¼ä»èå®æå¤é¡¹å¼åå¤åéçæ å°ï¼Ï(f) = (z<sub>0</sub>,z<sub>1</sub>,z<sub>2</sub>,z<sub>3</sub>)âC<sup>4</sup>ãè¿ä¸æ­¥æ¬è´¨ä¸å°±æ¯FFTçååé¨åï¼ð(ð¥)æ8ä¸ªå®èªç±åº¦ï¼èå¤åéçèµ·æ¥åªæ4ä¸ªèªç±åº¦ï¼ä½æ¯å ä¸ºð§<sub>i</sub>æ¯å¤æ°ï¼å®æ¬èº«æ2ä¸ªå®èªç±åº¦ï¼æä»¥æ»ä½ä¸æ¥è¯´å¤åéæ4x2=8ä¸ªå®èªç±åº¦ã</p>
<h3>2 éåæ å°ï¼C<sup>4</sup>-&gt;Rï¼</h3>
<p>éåæ å°å°å¤æ°åéæ å°ä¸ºå¤é¡¹å¼ï¼ç±(z<sub>0</sub>,z<sub>1</sub>,z<sub>2</sub>,z<sub>3</sub>)âC<sup>4</sup>æ¢å¤ä¸ä¸ªå¤é¡¹å¼ï¼æé é¿åº¦ä¸º8çâé¢ååéâï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260209150228446-1761094550.png" alt="image" width="298" height="29" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>å¯ä¸å¤é¡¹å¼f(x)æ»¡è¶³ï¼f(Î¶<sub>k</sub>) = z<sub>k</sub>ï¼k = 0,1,2,...,7ï¼å©ç¨Lagrangeæå¼ï¼å·¥ç¨ä¸å¯¹åºinverse FFTï¼å³å¯å¾å°ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260209150615101-1539219155.png" alt="image" width="351" height="28" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>å¶ä¸­ææa<sub>i</sub>âRãè¿éçååæ å°æ­£æ¯CKKS Encode/Decodeå¨åçäºï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260209150904927-1228266632.png" alt="" width="637" height="234" style="display: block; margin-left: auto; margin-right: auto"></p>
<h2>1.2 ç¼©æ¾å å­ï¼Scaleï¼åè¿ä¼¼è®¡ç®</h2>
<p>CKKSä¸è¿½æ±ç»å¯¹ç²¾ç¡®ï¼è§£å¯ç»æä¸åå§ææå­å¨æå°ç²¾åº¦è¯¯å·®ï¼è¯¯å·®å¯æ§ä¸è¿ä½äºæºå¨å­¦ä¹ /æ°å¼åæçå®¹å¿éå¼ï¼è¿æ¯æçä¸å®ç¨æ§çå¹³è¡¡è®¾è®¡ï¼ä¸ºäºå®ç°è¯¥ç®æ å¼å¥äºç¼©æ¾å å­ï¼ç¼©æ¾å å­å¨âæå®/å¤æ°åµå¥æ´æ°å¤é¡¹å¼ç¯âæ¶ï¼ç±âç¼©æ¾+èå¥âä¸å¯é¿åå¼å¥äºç²¾åº¦è¯¯å·®ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260209151018659-2008326500.png" alt="image" width="300" height="29" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>ä»ä»¥N=8ä¸ºä¾è¯´æç¸åºæµç¨ï¼åæ¬æ å°</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260209151905200-426056642.png" alt="image" width="485" height="33" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>æ¯ä¸å¯¹é¶è¯¯å·®çä¸¥æ ¼åå°ï¼ä½æ¯CKKSè¦åä¸ä»¶âéæ³çäºâï¼éåæ å°ç±å®/å¤æ°è½¬æ¢ææ´ç³»æ°å¤é¡¹å¼ï¼å°±æ¯ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260209152020759-2070476129.png" alt="image" width="488" height="34" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>æä½æ¬èº«å°±ä¸å¯è½ç²¾ç¡®å®æï¼åå å¾ç®åï¼å·¦è¾¹æ¯è¿ç»­åï¼å³è¾¹æ¯ç¦»æ£æ ¼ï¼CKKSçè§£å³æ¹æ¡æ¯è¿è¡âç¼©æ¾+èå¥ï¼è¯¯å·®æºå¤´ï¼âï¼é¦åå¼å¥ä¸ä¸ªscale Îï¼å¨æ å°åå¯¹å¤åéè¿è¡ç¼©æ¾ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260209153919946-1630554091.png" alt="" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>è¿ä¸æ­¥åªæ¯æ¾å¤§å¹¶æ²¡æå¼å¥è¯¯å·®ï¼æ¥ä¸æ¥è¿è¡éembeddingï¼IFFTï¼å¾å°å®ç³»æ°å¤é¡¹å¼ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260209153919937-1690109536.png" alt="" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>çè®ºä¸è¿ä¸æ­¥ä»ç¶æ¯ç²¾ç¡®çï¼ä½æ¯å¨è¿è¡éåä¸æ­¥èå¥å°æ´ç³»æ°æ¶ä¼äº§çè¯¯å·®ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260209153919914-412330373.png" alt="" style="display: block; margin-left: auto; margin-right: auto"></p>
<p align="left">ä»¤ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260209152958825-135711869.png" alt="image" width="225" height="33" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>å¶ä¸­e(x)çæ¯ä¸ªç³»æ°é½æ»¡è¶³|e<sub>i</sub>|â¤1/2ï¼å½æ å°åslotç©ºé´æ¶ï¼ä¼å¯¹m(x)ååcanonical embeddingï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260209153222424-1033559120.png" alt="image" width="186" height="29" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>èï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260209153258782-1352680454.png" alt="image" width="276" height="33" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>æä»¥ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260209153349080-2016492421.png" alt="image" width="502" height="32" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>å¶ä¸­Îµ<sub>k</sub> = e(Î¶<sub>k</sub>)ï¼æåä¼é¤äºscale Îï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260209153623063-989735394.png" alt="image" width="440" height="59" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>è¿å°±æ¯CKKSçâè¿ä¼¼âï¼å¯¹æ¯BFVä¸­çâèå¥âï¼ä»ä»¬çå«ä¹å®å¨ä¸åï¼</p>
<p>BFVçèå¥æ¯ï¼</p>
<p align="left">å¨æ¨¡tæä¹ä¸ï¼åæ´æ°æ·»å åªå£°ï¼åæâæ´æ°+å°åªå£°âæ å°ååä¸ä¸ªæ´æ°ï¼åªè¦åªå£°åæ§è¯¥è¿ç¨å°±æ¯ä¹åæä½çç²¾ç¡®éæä½ã</p>
<p align="left">CKKSçèå¥æ¯ï¼</p>
<p align="left">æâè¿ç»­å®æ°âæ å°å°æè¿çæ´æ°ï¼åææ´æ°æ å°åå®æ°ï¼è¯¥è¿ç¨å¹¶ä¸æ¯ä¹åæä½çç²¾ç¡®éæä½ï¼æä»¥äº§çâè¿ä¼¼âã</p>
<p>ä¸å¥è¯ï¼BFVéroundç¨äºâçº éâï¼CKKSéroundç¨äºâè¿ä¼¼âãå¨SEALä¸­å¸¸ç¨2^40ï¼ç²¾åº¦ä¸åªå£°è¾¾å°å¹³è¡¡ã</p>
<h2>1.3 åªå£°ç®¡ç</h2>
<p>å¨CKKSä¸­ï¼åªå£°ç®¡çä¸»è¦ä¾é Rescalingï¼éç¼©æ¾ï¼æºå¶ï¼å®éåRNSé¾ï¼å®ç°äºå¯¹åªå£°çâé¶æ¢¯å¼âç²¾åæ§å¶ã</p>
<h3>1 CKKSåªå£°çç»æé¨å</h3>
<p>CKKSçåªå£°eå¹¶ä¸æ¯åä¸æ¥æºï¼å®æ¯ç±ä¸é¨åå å èæçï¼</p>
<p><strong>åå§åªå£°ï¼e<sub>rlwe</sub>ï¼ï¼</strong>å å¯æ¶å¼å¥çç¦»æ£é«æ¯åªå£°ï¼ç¨äºä¿éå®å¨æ§ã</p>
<p><strong>ç¼ç è¯¯å·®ï¼e<sub>enc</sub>ï¼ï¼</strong>å°æµ®ç¹æ°ç¼©æ¾å¹¶èå¥å°æ´æ°å¤é¡¹å¼æ¶åæ°çæå¤±ã</p>
<p><strong>è®¡ç®è¯¯å·®ï¼e<sub>comp</sub>ï¼ï¼</strong>åæä¹æ³åéçº¿æ§åå¼å¥çåªå£°ã</p>
<p>å¨CKKSä¸­ï¼æä»¬ä¸åºåâåªå£°âåâè¯¯å·®âãç¼©æ¾å å­Î<span class="math-inline" data-math="\Delta" data-index-in-node="34">å³å®äºææçç²¾åº¦ï¼èåªå£°åªè¦ä¸ä¾µèå°Î<span class="math-inline" data-math="\Delta" data-index-in-node="60">å®ä¹çææä½ï¼è®¡ç®å°±æ¯å¯é çã</span></span></p>
<h3><span class="math-inline" data-math="\Delta" data-index-in-node="34"><span class="math-inline" data-math="\Delta" data-index-in-node="60">2 æ ¸å¿æºå¶ï¼Rescalingï¼éç¼©æ¾ï¼</span></span></h3>
<p><span class="math-inline" data-math="\Delta" data-index-in-node="34"><span class="math-inline" data-math="\Delta" data-index-in-node="60">å½æä»¬åä¸æ¬¡åæä¹æ³ï¼(m<sub>1</sub>â¢Î)x(m<sub>2</sub>â¢Î) = (m<sub>1</sub>â¢m<sub>2</sub>)â¢Î<sup>2</sup>ï¼æ­¤æ¶ï¼ç¼©æ¾å å­ä»ÎåæäºÎ<sup>2</sup>ï¼å¦æä¸å¤çï¼è¿ç»­ä¹æ³ä¼å¯¼è´æ°å¼è¿éçç¸ï¼è¶åºæ¨¡æ°qçèå´ãæ­¤æ¶å°å¯æé¤äºä¸ä¸ªRNSç´ æ°q<sub>l</sub>ï¼éå¸¸è®¾q<sub>l</sub>âÎï¼ï¼å¹¶è¿è¡èå¥ï¼</span></span></p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260210175745316-581058742.png" alt="image" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>ç»æï¼</p>
<p>ï¼1ï¼ç¼©æ¾å å­åå½ï¼Î<sup>2</sup>/q<sub>l</sub>&nbsp;â Îï¼ææä½åå°äºæ­£ç¡®çä½ç½®ã</p>
<p>ï¼2ï¼åªå£°åæ­¥ç¼©åï¼åæ¬çåªå£°eä¹è¢«é¤äºäºq<sub>l</sub>ï¼æ°åªå£°ä¸ºï¼e/q<sub>l</sub>+èå¥è¯¯å·®</p>
<p>å¯è§Rescalingä¸ä»æè¨èçæ°å¼æåæ¥ï¼åæ¶é¡ºææå¢é¿çåªå£°ä¹ææ¯ä¾ç¼©å°äºã</p>
<h3><span class="math-inline" data-math="\Delta" data-index-in-node="34"><span class="math-inline" data-math="\Delta" data-index-in-node="60">3 RNSé¾ä¸å±ï¼Levelsï¼çåªå£°æ§å¶</span></span></h3>
<p><span class="math-inline" data-math="\Delta" data-index-in-node="34"><span class="math-inline" data-math="\Delta" data-index-in-node="60">å¨å®éå®ç°ä¸­ï¼æ¨¡æ°Qè¢«åè§£ä¸ºQ=q<sub>0</sub>â¢q<sub>1</sub>â¢...â¢q<sub>L</sub>ï¼æ¯ä¸å±è®¡ç®é½å¯¹åºé¾ä¸­çä¸ä¸ªç´ æ°ã<br></span></span></p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260210181153276-276909400.png" alt="image" width="469" height="186" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>&nbsp;ä»¥ä¸æ¯ä¸å±Rescalingé½ä¼åææ»æ¨¡æ°Qççº¦pæ¯ç¹ï¼åè®¾Î=2<sup>p</sup>ï¼ï¼å½RNSé¾åªå©ä¸æåä¸ä¸ªç´ æ°q<sub>0</sub>æ¶ï¼æ æ³åè¿è¡Rescalingï¼æ­¤æ¶ååä¹æ³ï¼åªå£°å°æ æ³è¢«ç¼©å°ï¼ä¼è¿éè¦çæææææä½ãåè®¾Qä¸º600bitï¼Îä¸º40bitï¼Qè½æ¯æçº¦600/40=15å±ä¹æ³ï¼ç®å°ç¬¬15å±æ¶ï¼æ¨¡æ°åªå©40bitå·¦å³ï¼æ­¤æ¶åªå£°åæææ··å¨ä¸èµ·ï¼æ æ³ååãä¸BFVçåºå«ï¼BFVçåªå£°ç®¡çæ¯ä¸ºäºä¿ä½âæ´æ°çç»å¯¹åç¡®âï¼CKKSçåªå£°ç®¡çæ¯ä¸ºäºä¿ä½âæµ®ç¹æ°çææç²¾åº¦âã</p>
<h1>2 CKKSæ åæµç¨åå</h1>
<p>ä»¥SEALåºä¸ºä¾ï¼å®æ´æµç¨åä¸º5ä¸ªé¶æ®µã</p>
<h2>2.1 ç³»ç»åå§åä¸åæ°çæ</h2>
<p><strong>è¾å¥åæ°ï¼</strong></p>
<p>å¤é¡¹å¼æ¨¡æ¬¡æ°Nï¼2çæ´æ°å¹ï¼</p>
<p>æ¨¡æ°é¾ç³»æ°{q<sub>1</sub>,q<sub>2</sub>,...,q<sub>L</sub>}ï¼éååºåï¼å³å®è¿ç®æ·±åº¦ï¼</p>
<p>ç¼©æ¾å å­Î=2<sup>k</sup>ï¼æ§å¶è®¡ç®ç²¾åº¦ï¼</p>
<p>é«æ¯åªå£°åå¸Ïï¼RLWEåºç¡åªå£°ï¼</p>
<p><strong>è¾åºåæ°ï¼</strong></p>
<p>åæ³çSEALä¸ä¸æ</p>
<h2>2.2 å¯é¥çæ</h2>
<p>åºäºRLWEé®é¢çæå¯é¥ç»ï¼ç§é¥ç»å¯¹ä¿å¯ï¼å¬é¥/è¾å©å¯é¥å¯å¬å¼ååã</p>
<p>ï¼1ï¼ç§é¥sk</p>
<p>éæºéæ ·å°èæ°å¤é¡¹å¼ï¼skâR<sub>2</sub>ï¼ç³»æ°ä»ä¸º-1/0/1ï¼</p>
<p>ï¼2ï¼å¬é¥<em>pk=(b,a)</em></p>
<p>aï¼ç¯ä¸éæºå¤é¡¹å¼</p>
<p>bï¼b=-(aÂ·sk + e)ï¼å¶ä¸­eæ¯é«æ¯åªå£°å¤é¡¹å¼</p>
<p>ï¼3ï¼éçº¿æ§åå¯é¥rlk</p>
<p>&nbsp;ç¨äºå¯æä¹æ³åçç»´åº¦åç¼©ï¼ç±ç§é¥å å¯æ´¾çï¼æå¡å¨æ§è¡éçº¿æ§åæ¶ä½¿ç¨ã</p>
<p>ï¼4ï¼æè½¬å¯é¥rot_kï¼å¯éï¼</p>
<p>ç¨äºå¯ææ§½ä½æè½¬ï¼å®ç°åéæ°æ®éæãæ±åç­é«é¶è¿ç®ã</p>
<h2>2.3 ç¼ç ä¸å å¯</h2>
<h3><strong>æ­¥éª¤1 ææç¼ç ï¼æµ®ç¹æ°/å¤æ°-&gt;å¤é¡¹å¼ï¼</strong></h3>
<p>è¯¥æ­¥ä¼å°å®æ°/å¤æ°åézâC<sup>N/2</sup>è½¬æ¢ä¸ºææå¤é¡¹å¼ã</p>
<p>ï¼1ï¼æé å¯¹ç§°åéï¼Symmetry Constructionï¼</p>
<p>å¨è¿è¡åæ¢åï¼é¦åæé ä¸ä¸ªé¿åº¦ä¸ºNçåéZï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260210103120361-1359664060.png" alt="image" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>åéçåé¨é¨åæ¯ååé¨åçå±è½­ï¼è¿ç§å¯¹ç§°æ§ä¿è¯äºä¸ä¸æ­¥IFFTåºæ¥çå¤é¡¹å¼ç³»æ°å¨é¨æ¯å®æµ®ç¹æ°ã</p>
<p>ï¼2ï¼æ­£ååµå¥éåæ¢ï¼IFFTï¼</p>
<p>å°é¿åº¦ä¸ºNçå¯¹ç§°åéZè¿è¡éåæ¢ï¼å¾å°ä¸ä¸ªå¤é¡¹å¼p(x)ï¼å¶ç³»æ°a<sub>i</sub>çè®ºä¸åºè¯¥æ¯å®æ°ï¼ç±äºæµ®ç¹æ°è®¡ç®ç²¾åº¦é®é¢ï¼å¯è½ä¼ææå°çèé¨ï¼éå¸¸ç´æ¥èå¼ï¼ã</p>
<p>ï¼3ï¼ç¼©æ¾ä¸èå¥ï¼Scaling &amp; Roundingï¼</p>
<p>å¯¹å®æµ®ç¹æ°ç³»æ°è¿è¡æä½ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260210103703414-337958342.png" alt="image" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>ç±æ­¤å¾å°äºç³»æ°ä¸ºå®æ´æ°çå¤é¡¹å¼ptã</p>
<p>ä»¥N=4ä¸ºä¾ï¼åè®¾z=(3,4)ï¼åé¦åå¯¹zè¿è¡æ©å±Z=(3,4,4,3)ï¼å ä¸º3å4å¯ä»¥çä½æ¯èé¨ä¸ºé¶çå¤æ°ï¼æä»¥Zåéååé¨åçå±è½­åååé¨åå®å¨ç¸åãæ¥ä¸æ¥ç®æ æ¯å°Zæ å°ä¸ºå¤é¡¹å¼p(x)=a<sub>0</sub>+a<sub>1</sub>x+a<sub>2</sub>x<sup>2</sup>+a<sub>3</sub>x<sup>3</sup>ï¼å³éè¦æ¾å°å¤é¡¹å¼çå®ç³»æ°a<sub>0</sub>ï¼a<sub>1</sub>ï¼a<sub>2</sub>ï¼a<sub>3</sub>ãå¨CKKSä¸­ï¼ä½¿ç¨x<sup>4</sup>+1=0çåä½æ ¹ï¼å®ä»¬æ¯ï¼Î¶<sub>0</sub> = e<sup>iÏ/4</sup>ï¼Î¶<sub>1</sub>&nbsp;= e<sup>i3Ï/4</sup>ï¼Î¶<sub>2</sub>&nbsp;= e<sup>i5Ï/4</sup>ï¼Î¶<sub>3</sub>&nbsp;= e<sup>i7Ï/4</sup>ï¼Î¶<sub>2</sub>åÎ¶<sub>3</sub>æ¯Î¶<sub>1</sub>åÎ¶<sub>0</sub>çå±è½­ï¼åå¯¹äºå¤é¡¹å¼p(x)æ»¡è¶³ï¼p(Î¶<sub>0</sub>) = y<sub>0</sub> = 3ï¼p(Î¶<sub>1</sub>) = y<sub>1</sub> = 4ï¼p(Î¶<sub>2</sub>) = y<sub>2</sub> = 4ï¼p(Î¶<sub>3</sub>) = y<sub>3</sub> = 3ï¼å¯ä»¥å©ç¨IFFTéåæ¢ç³»æ°å¬å¼è¿è¡æ±è§£ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260210120409880-138792570.png" alt="image" width="178" height="76" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>ä¾æ¬¡è®¡ç®åä¸ªç³»æ°ï¼</p>
<p><strong>è®¡ç®a<sub>0</sub>ï¼</strong></p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260210120540550-839957814.png" alt="image" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p><strong>è®¡ç®a<sub>1</sub>ï¼</strong></p>
<p>ç±ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260210124216470-303321074.png" alt="image" width="627" height="52" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>å¯ç¥ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260210125922014-1456750365.png" alt="image" width="766" height="68" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p><strong>è®¡ç®a<sub>2</sub>ï¼</strong></p>
<p>ç±äºÎ¶<sub>0</sub><sup>-2</sup>&nbsp;= -iï¼Î¶<sub>1</sub><sup>-2</sup>&nbsp;= iï¼Î¶<sub>2</sub><sup>-2</sup>&nbsp;= -iï¼Î¶<sub>3</sub><sup>-2</sup>&nbsp;= iï¼å¯ç¥ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260210123340956-1412279352.png" alt="image" width="371" height="44" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p><strong>è®¡ç®a<sub>3</sub>ï¼</strong></p>
<p>ç±ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260210140541152-203458374.png" alt="image" width="628" height="50" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>å¯ç¥ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260210140632043-718239368.png" alt="image" width="760" height="70" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>ä»¥ä¸å¤é¡¹å¼ç³»æ°çè®¡ç®è¿ç¨å¯ä»¥çå°ï¼ç³»æ°ä¸­çèé¨ä¼å ä¸ºå±è½­å¯¹ç§°å®å¨æµæ¶ï¼åªå©å®é¨ï¼å¾å°å¤é¡¹å¼æ¯p(x)=3.5-0.3535x+0.3535x<sup>3</sup>ï¼åç»­å°å¨æ­¤å¤é¡¹å¼çåºç¡ä¸å¯¹é½ç³»æ°è¿è¡æ¾å¤§åèå¥å®æç¼ç æµç¨ã</p>
<h3>æ­¥éª¤2 å¯æå å¯ï¼ææ-&gt;å¯æï¼</h3>
<p>ç¼ç åçææå¤é¡¹å¼ptè¢«è½¬æ¢ä¸ºä¸ä¸ªåå«ä¸¤ä¸ªå¤é¡¹å¼çå¯æå¯¹(c<sub>0</sub>,c<sub>1</sub>)ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260210104930702-266110462.png" alt="image" width="325" height="116" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>å¾ä¸­aï¼bæ¯å¬é¥å¯¹å¿çä¸¤é¨åï¼uæ¯å°èæ°éæºå¤é¡¹å¼ï¼e<sub>0</sub>ï¼e<sub>1</sub>æ¯é«æ¯åªå£°å¤é¡¹å¼ï¼Qæ¯å¯æå¤§æ¨¡æ°ã</p>
<h2>2.4 å¯æåæè¿ç®</h2>
<p>æ¯æå æ³ãæ éä¹ãå¯æä¹ãæè½¬ãæ±åç­è¿ç®ï¼æ¯CKKSçæ ¸å¿è½åã</p>
<h3>1 å¯æå æ³ï¼åæå ï¼</h3>
<p>è¾å¥ï¼ä¸¤ä¸ªåç»´åº¦å¯æct=(ct<sub>0</sub>,ct<sub>1</sub>)ï¼ct'=(ct<sub>0</sub>',ct<sub>1</sub>')</p>
<p>è¾åºï¼ct<sub>add</sub>=(ct<sub>0</sub>+ct<sub>0</sub>',ct<sub>1</sub>+ct<sub>1</sub>')</p>
<p>ç¹æ§ï¼æ ç»´åº¦è¨èï¼æ ééçº¿æ§åï¼åªå£°çº¿æ§å å ï¼è¿ç®åç¼©æ¾å å­ä¿æä¸åã</p>
<h3>2 å¯æä¹æ³ï¼åæä¹ï¼</h3>
<p>åå§ä¹æ³ï¼ä¸¤ä¸ªäºåç»å¯æç¸ä¹ï¼è¾åºä¸åç»å¯æct<sub>mult</sub>=(c<sub>0</sub>,c<sub>1</sub>,c<sub>2</sub>)ï¼å¶ä¸­c<sub>0</sub>=ct<sub>0</sub>â¢ct<sub>0</sub>'ï¼c<sub>1</sub>=ct<sub>0</sub>â¢ct<sub>1</sub>'+ct<sub>1</sub>â¢ct<sub>0</sub>'ï¼c<sub>2</sub>=ct<sub>1</sub>â¢ct<sub>1</sub>'ã</p>
<p>éçº¿æ§åï¼ä½¿ç¨éçº¿æ§åå¯é¥rlkï¼å°ä¸åç»åç¼©åæ åäºåç»ï¼æ¢å¤å¯æç»æ</p>
<p>éç¼©æ¾ï¼ä¹æ³åï¼ç¼©æ¾å å­åæÎ<sup>2</sup>ï¼ä¸ºäºé²æ­¢æ°å¼çç¸ï¼ä¼å°å¯æé¤äºÎå¹¶èå¥</p>
<p>æ¨¡åæ¢ï¼éä½æ¨¡æ°ï¼åæ­¥ç¼©æ¾æ°æ®ï¼åç¼©åªå£°ï¼ä¿è¯åç»­è¿ç®å¯è¡æ§</p>
<p>ç¹æ§ï¼åªå£°ææ°çº§å¢é¿ï¼å¿é¡»éåéçº¿æ§å+æ¨¡åæ¢ä½¿ç¨ã</p>
<h3>3 é«é¶è¿ç®</h3>
<p align="left">æ éä¹æ³ï¼å¯æä¸å¬å¼å¸¸æ°ç¸ä¹ï¼æ éå¯é¥</p>
<p align="left">æ§½ä½æè½¬ï¼ç§»å¨åä¸ªæ§½ä½æ°æ®ï¼éåæè½¬å¯é¥ä½¿ç¨</p>
<p align="left">æ§½ä½æ±åï¼æ¹éæ°æ®èåï¼éç¨äºç»è®¡è®¡ç®</p>
<h2>2.5 è§£å¯ä¸è§£ç </h2>
<h3>1 å¯æè§£å¯</h3>
<p>è¾å¥ï¼å¯æct=(ct<sub>0</sub>,ct<sub>1</sub>)ãç§é¥sk</p>
<p>è¾åºï¼è§£ç åææå¤é¡¹å¼</p>
<p>è§£å¯å¬å¼ï¼pt<sub>dec</sub> = ct<sub>0</sub> + ct<sub>1</sub>â¢sk = uâ¢(-(aâ¢sk + e<sub>pk</sub>))+e<sub>0</sub>+pt + (uâ¢a+e<sub>1</sub>)â¢sk = pt + e<sub>0</sub> + e<sub>1</sub>â¢sk - uâ¢e<sub>pk</sub>ï¼æåé¨åå¯ä»¥çä½æ¯æ»åªå£°ï¼åæï¼pt<sub>dec</sub> = pt + e<sub>total</sub>ã</p>
<h3>2 ææè§£ç </h3>
<p align="left">ï¼1ï¼å»é¤æ¨¡æ°æ å°ï¼å°å¤é¡¹å¼è½¬æ¢ä¸ºå¤æ°åé</p>
<p align="left">ï¼2ï¼é¤äºç¼©æ¾å å­Îï¼è¿åä¸ºåå§å°ºåº¦çæµ®ç¹æ°</p>
<p align="left">ï¼3ï¼èå¼èé¨ï¼å®æ°åºæ¯ï¼ï¼å¾å°æç»è®¡ç®ç»æ</p>
<h1>3 ä»£ç ç¤ºä¾</h1>
<p>ä»¥ä¸æ¯SEALåºCKKSåæå å¯æ¹æ¡ç¤ºä¾ä»£ç ï¼</p>
<div class="cnblogs_code"><img src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" id="code_img_closed_9af04663-7ada-4354-b3f4-bb029e2f6e7d" class="code_img_closed"><img src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" id="code_img_opened_9af04663-7ada-4354-b3f4-bb029e2f6e7d" class="code_img_opened" style="display: none">
<div id="cnblogs_code_open_9af04663-7ada-4354-b3f4-bb029e2f6e7d" class="cnblogs_code_hide">
<pre>#include <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">seal/seal.h</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">
#include </span>&lt;iostream&gt;<span style="color: rgba(0, 0, 0, 1)">
#include </span>&lt;vector&gt;<span style="color: rgba(0, 0, 0, 1)">
#include </span>&lt;iomanip&gt;

<span style="color: rgba(0, 0, 255, 1)">using</span> <span style="color: rgba(0, 0, 255, 1)">namespace</span><span style="color: rgba(0, 0, 0, 1)"> seal;
</span><span style="color: rgba(0, 0, 255, 1)">using</span> <span style="color: rgba(0, 0, 255, 1)">namespace</span><span style="color: rgba(0, 0, 0, 1)"> std;

</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> å·¥å·å½æ°ï¼æå°æµ®ç¹åéï¼æ ¼å¼åè¾åºç»æ</span>
<span style="color: rgba(0, 0, 255, 1)">void</span> print_vector(<span style="color: rgba(0, 0, 255, 1)">const</span> vector&lt;<span style="color: rgba(0, 0, 255, 1)">double</span>&gt;&amp; vec, <span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">string</span>&amp; title, size_t print_size = <span style="color: rgba(128, 0, 128, 1)">5</span><span style="color: rgba(0, 0, 0, 1)">) {
    cout </span>&lt;&lt; title &lt;&lt; <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">: </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">;
    size_t limit </span>=<span style="color: rgba(0, 0, 0, 1)"> min(print_size, vec.size());
    </span><span style="color: rgba(0, 0, 255, 1)">for</span> (size_t i = <span style="color: rgba(128, 0, 128, 1)">0</span>; i &lt; limit; ++<span style="color: rgba(0, 0, 0, 1)">i) {
        cout </span>&lt;&lt; <span style="color: rgba(0, 0, 255, 1)">fixed</span> &lt;&lt; setprecision(<span style="color: rgba(128, 0, 128, 1)">3</span>) &lt;&lt; vec[i] &lt;&lt; <span style="color: rgba(128, 0, 0, 1)">"</span> <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">;
    }
    </span><span style="color: rgba(0, 0, 255, 1)">if</span> (vec.size() &gt; limit) cout &lt;&lt; <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">...</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">;
    cout </span>&lt;&lt;<span style="color: rgba(0, 0, 0, 1)"> endl;
}

</span><span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> main() {
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ===================== 1. CKKS æ¹æ¡åæ°éç½® =====================
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> å¤é¡¹å¼æ¨¡æ¬¡æ°ï¼å³å®å®å¨ç­çº§ãæ§½ä½æ°éãè®¡ç®æ§è½ï¼å¿é¡»æ¯2çå¹</span>
    size_t poly_modulus_degree = <span style="color: rgba(128, 0, 128, 1)">8192</span><span style="color: rgba(0, 0, 0, 1)">;
    EncryptionParameters </span><span style="color: rgba(0, 0, 255, 1)">params</span><span style="color: rgba(0, 0, 0, 1)">(scheme_type::ckks);
    </span><span style="color: rgba(0, 0, 255, 1)">params</span><span style="color: rgba(0, 0, 0, 1)">.set_poly_modulus_degree(poly_modulus_degree);

    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> éç½®ç³»æ°æ¨¡æ°é¾ï¼CKKSæ ¸å¿ï¼éè¿æ¨¡åæ¢æ§å¶åªå£°åè®¡ç®æ·±åº¦
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 60, 40, 40, 60 è¡¨ç¤ºæ¨¡æ°é¾åæ®µï¼æ¯æ2å±ä¹æ³è¿ç®</span>
    <span style="color: rgba(0, 0, 255, 1)">params</span><span style="color: rgba(0, 0, 0, 1)">.set_coeff_modulus(CoeffModulus::Create(
        poly_modulus_degree, { </span><span style="color: rgba(128, 0, 128, 1)">60</span>, <span style="color: rgba(128, 0, 128, 1)">40</span>, <span style="color: rgba(128, 0, 128, 1)">40</span>, <span style="color: rgba(128, 0, 128, 1)">60</span><span style="color: rgba(0, 0, 0, 1)"> }
    ));

    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> åå§åSEALä¸ä¸æï¼éªè¯åæ°åæ³æ§</span>
    SEALContext context(<span style="color: rgba(0, 0, 255, 1)">params</span><span style="color: rgba(0, 0, 0, 1)">);
    cout </span>&lt;&lt; <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">SEAL CKKS åæ°åå§åå®æï¼å¤é¡¹å¼æ¨¡æ¬¡æ°: </span><span style="color: rgba(128, 0, 0, 1)">"</span> &lt;&lt; poly_modulus_degree &lt;&lt;<span style="color: rgba(0, 0, 0, 1)"> endl;
    cout </span>&lt;&lt; <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">å¯ç¨æ§½ä½æ°éï¼åå¯æå¯æåæ°æ®éï¼: </span><span style="color: rgba(128, 0, 0, 1)">"</span>
        &lt;&lt; context.get_context_data(context.first_parms_id())-&gt;parms().poly_modulus_degree() / <span style="color: rgba(128, 0, 128, 1)">2</span> &lt;&lt;<span style="color: rgba(0, 0, 0, 1)"> endl;

    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ===================== 2. å¯é¥çæ =====================
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> å¯é¥çæå¨ï¼åºäºä¸ä¸æçæå¬ç§é¥ãéçº¿æ§åå¯é¥</span>
<span style="color: rgba(0, 0, 0, 1)">    KeyGenerator keygen(context);

    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ç§é¥ï¼æ ¸å¿æºå¯ï¼ä»å®¢æ·ç«¯ææï¼</span>
    SecretKey secret_key =<span style="color: rgba(0, 0, 0, 1)"> keygen.secret_key();
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> å¬é¥ï¼å¬å¼ååï¼ç¨äºå å¯ï¼</span>
<span style="color: rgba(0, 0, 0, 1)">    PublicKey public_key;
    keygen.create_public_key(public_key);
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> éçº¿æ§åå¯é¥ï¼å¯æä¹æ³ååç¼©å¯æç»´åº¦ï¼å¿éï¼</span>
<span style="color: rgba(0, 0, 0, 1)">    RelinKeys relin_keys;
    keygen.create_relin_keys(relin_keys);

    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ===================== 3. æ ¸å¿ç»ä»¶åå§å =====================
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> å å¯å¨ï¼ä½¿ç¨å¬é¥å å¯ææ</span>
<span style="color: rgba(0, 0, 0, 1)">    Encryptor encryptor(context, public_key, secret_key);
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> è§£å¯å¨ï¼ä½¿ç¨ç§é¥è§£å¯å¯æ</span>
<span style="color: rgba(0, 0, 0, 1)">    Decryptor decryptor(context, secret_key);
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> CKKSç¼ç å¨ï¼å®ç°æµ®ç¹æ° â ææå¤é¡¹å¼ è½¬æ¢</span>
<span style="color: rgba(0, 0, 0, 1)">    CKKSEncoder encoder(context);
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> åæè¿ç®å¨ï¼æ§è¡å¯æå åä¹ãéçº¿æ§åç­æä½</span>
<span style="color: rgba(0, 0, 0, 1)">    Evaluator evaluator(context);

    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ç¼©æ¾å å­ï¼CKKSç¨äºæ§å¶æµ®ç¹è®¡ç®ç²¾åº¦çæ ¸å¿åæ°</span>
    <span style="color: rgba(0, 0, 255, 1)">double</span> scale = pow(<span style="color: rgba(128, 0, 128, 1)">2.0</span>, <span style="color: rgba(128, 0, 128, 1)">40</span><span style="color: rgba(0, 0, 0, 1)">);
    cout </span>&lt;&lt; <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">CKKS ç¼©æ¾å å­: 2^40</span><span style="color: rgba(128, 0, 0, 1)">"</span> &lt;&lt; endl &lt;&lt;<span style="color: rgba(0, 0, 0, 1)"> endl;

    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ===================== 4. æé æææµ®ç¹åé =====================</span>
    vector&lt;<span style="color: rgba(0, 0, 255, 1)">double</span>&gt; x = { <span style="color: rgba(128, 0, 128, 1)">1.1</span>, <span style="color: rgba(128, 0, 128, 1)">2.2</span>, <span style="color: rgba(128, 0, 128, 1)">3.3</span>, <span style="color: rgba(128, 0, 128, 1)">4.4</span><span style="color: rgba(0, 0, 0, 1)"> };
    vector</span>&lt;<span style="color: rgba(0, 0, 255, 1)">double</span>&gt; y = { <span style="color: rgba(128, 0, 128, 1)">5.5</span>, <span style="color: rgba(128, 0, 128, 1)">6.6</span>, <span style="color: rgba(128, 0, 128, 1)">7.7</span>, <span style="color: rgba(128, 0, 128, 1)">8.8</span><span style="color: rgba(0, 0, 0, 1)"> };
    print_vector(x, </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">åå§åé x</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
    print_vector(y, </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">åå§åé y</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);

    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ===================== 5. ææç¼ç  + å å¯ =====================</span>
<span style="color: rgba(0, 0, 0, 1)">    Plaintext plain_x, plain_y;
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> å°æµ®ç¹åéç¼ç ä¸ºCKKSæææ ¼å¼ï¼æå®ç¼©æ¾å å­</span>
<span style="color: rgba(0, 0, 0, 1)">    encoder.encode(x, scale, plain_x);
    encoder.encode(y, scale, plain_y);

    Ciphertext cipher_x, cipher_y;
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> å å¯ææä¸ºå¯æ</span>
<span style="color: rgba(0, 0, 0, 1)">    encryptor.encrypt(plain_x, cipher_x);
    encryptor.encrypt(plain_y, cipher_y);
    cout </span>&lt;&lt; <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">\nææç¼ç ãå å¯å®æï¼å¯æxæ°æ®å¤§å°: </span><span style="color: rgba(128, 0, 0, 1)">"</span> &lt;&lt; cipher_x.size() &lt;&lt;<span style="color: rgba(0, 0, 0, 1)"> endl;

    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ===================== 6. å¯æåæè¿ç® =====================
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 6.1 å¯æå æ³ï¼cipher_add = x + y</span>
<span style="color: rgba(0, 0, 0, 1)">    Ciphertext cipher_add;
    evaluator.add(cipher_x, cipher_y, cipher_add);
    cout </span>&lt;&lt; <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">å¯æå æ³è¿ç®å®æ</span><span style="color: rgba(128, 0, 0, 1)">"</span> &lt;&lt;<span style="color: rgba(0, 0, 0, 1)"> endl;

    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 6.2 å¯æä¹æ³ï¼cipher_mult = x * y</span>
<span style="color: rgba(0, 0, 0, 1)">    Ciphertext cipher_mult;
    evaluator.multiply(cipher_x, cipher_y, cipher_mult);
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ä¹æ³åå¯æç»´åº¦è¨èï¼æ§è¡éçº¿æ§ååç¼©åæ åæ ¼å¼</span>
<span style="color: rgba(0, 0, 0, 1)">    evaluator.relinearize_inplace(cipher_mult, relin_keys);
    cout </span>&lt;&lt; <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">å¯æä¹æ³ + éçº¿æ§åå®æ</span><span style="color: rgba(128, 0, 0, 1)">"</span> &lt;&lt;<span style="color: rgba(0, 0, 0, 1)"> endl;

    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ===================== 7. å¯æè§£å¯ + è§£ç  =====================</span>
<span style="color: rgba(0, 0, 0, 1)">    Plaintext plain_add_result, plain_mult_result;
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> è§£å¯è¿ç®ç»æå¯æ</span>
<span style="color: rgba(0, 0, 0, 1)">    decryptor.decrypt(cipher_add, plain_add_result);
    decryptor.decrypt(cipher_mult, plain_mult_result);

    vector</span>&lt;<span style="color: rgba(0, 0, 255, 1)">double</span>&gt;<span style="color: rgba(0, 0, 0, 1)"> result_add, result_mult;
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> è§£ç ä¸ºæµ®ç¹åé</span>
<span style="color: rgba(0, 0, 0, 1)">    encoder.decode(plain_add_result, result_add);
    encoder.decode(plain_mult_result, result_mult);

    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ===================== 8. ç»æè¾åº =====================</span>
    cout &lt;&lt; <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">\n==================== è¿ç®ç»æå¯¹æ¯ ====================</span><span style="color: rgba(128, 0, 0, 1)">"</span> &lt;&lt;<span style="color: rgba(0, 0, 0, 1)"> endl;
    print_vector(result_add, </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">å¯æå æ³è§£å¯ç»æ</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
    print_vector(result_mult, </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">å¯æä¹æ³è§£å¯ç»æ</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);

    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> è®¡ç®ææåºåå¼ç¨äºå¯¹æ¯</span>
    vector&lt;<span style="color: rgba(0, 0, 255, 1)">double</span>&gt;<span style="color: rgba(0, 0, 0, 1)"> true_add, true_mult;
    </span><span style="color: rgba(0, 0, 255, 1)">for</span> (size_t i = <span style="color: rgba(128, 0, 128, 1)">0</span>; i &lt; x.size(); ++<span style="color: rgba(0, 0, 0, 1)">i) {
        true_add.push_back(x[i] </span>+<span style="color: rgba(0, 0, 0, 1)"> y[i]);
        true_mult.push_back(x[i] </span>*<span style="color: rgba(0, 0, 0, 1)"> y[i]);
    }
    print_vector(true_add, </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ææå æ³åºåå¼</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
    print_vector(true_mult, </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ææä¹æ³åºåå¼</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);

    </span><span style="color: rgba(0, 0, 255, 1)">return</span> <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">;
}</span></pre>
</div>
<span class="cnblogs_code_collapse">CKKS</span></div>
<p>ä»£ç è¿è¡ææå¦ä¸ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/465567/202602/465567-20260210171421384-92773903.png" alt="image" width="483" height="272" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>&nbsp;</p>
<h1>4 åè</h1>
<p>1&nbsp;<a href="https://zhuanlan.zhihu.com/p/366965077" target="_blank" rel="noopener nofollow">https://zhuanlan.zhihu.com/p/366965077</a></p>
<p>2&nbsp;<a href="https://blog.csdn.net/WaitMrAnt/article/details/140950613" target="_blank" rel="noopener nofollow">https://blog.csdn.net/WaitMrAnt/article/details/140950613</a></p>
<p>3&nbsp;<a href="https://zhuanlan.zhihu.com/p/619856459" target="_blank" rel="noopener nofollow">https://zhuanlan.zhihu.com/p/619856459</a></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-10 18:22">2026-02-10 18:21</span>&nbsp;
<a href="https://www.cnblogs.com/zhaoweiwei">weiwei22844</a>&nbsp;
éè¯»(<span id="post_view_count">11</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19577832);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19577832', targetLink: 'https://www.cnblogs.com/zhaoweiwei/p/19577832/CKKS', title: 'SEALå¨åæå å¯CKKSæ¹æ¡å¥é¨è¯¦è§£' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Avalonia.Controls.DataGridèªå¨åå¹¶å ]]></title>
    <link>https://www.cnblogs.com/kevin-Y/p/19600957</link>
    <guid>814cd0c2f9161f7dcb38a3e0d370da0d</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/kevin-Y/p/19600957" title="åå¸äº 2026-02-10 17:59">
    <span role="heading" aria-level="2">Avalonia.Controls.DataGridèªå¨åå¹¶å</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>Winformå¨ç¨çDataGridViewä¿®æ¹ä¸ºéè¿çº¿æ¡åéæçæ¹å¼å®ç°äºåå¹¶åçææãä¸æ®µæ¶é´ä¹å¨çæAvalonia.Controls.DataGridæ¯å¦ä¹æç±»ä¼¼çåæ³ãä¸ç´æ²¡æå¿æå»çé£äºä»£ç ï¼æ°´å¹³æéï¼å®å¨æä¸æXML/Contentä¸ç±»å¦ä½å®ç°ç»å¶åå®¹çãåçAIçå¸®å©ç»äºè½è¯çå»ä¿®æ¹äºã</p>
<p>è®©AIä»DataGridçä»¥ä¸æ¹æ³å¥æ</p>
<div class="cnblogs_code">
<pre>        <span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">void</span><span style="color: rgba(0, 0, 0, 1)"> AddNewCellPrivate(DataGridRow row, DataGridColumn column)
        {
            DataGridCell newCell </span>= <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> DataGridCell();
            PopulateCellContent(
                isCellEdited: </span><span style="color: rgba(0, 0, 255, 1)">false</span><span style="color: rgba(0, 0, 0, 1)">,
                dataGridColumn: column,
                dataGridRow: row,
                dataGridCell: newCell);
            </span><span style="color: rgba(0, 0, 255, 1)">if</span> (row.OwningGrid != <span style="color: rgba(0, 0, 255, 1)">null</span><span style="color: rgba(0, 0, 0, 1)">)
            {
                newCell.OwningColumn </span>=<span style="color: rgba(0, 0, 0, 1)"> column;
                newCell.IsVisible </span>=<span style="color: rgba(0, 0, 0, 1)"> column.IsVisible;
                </span><span style="color: rgba(0, 0, 255, 1)">if</span> (row.OwningGrid.CellTheme <span style="color: rgba(0, 0, 255, 1)">is</span><span style="color: rgba(0, 0, 0, 1)"> {} cellTheme)
                {
                    newCell.SetValue(ThemeProperty, cellTheme, BindingPriority.Template);
                }
            }
            row.Cells.Insert(column.Index, newCell);
            
            </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æºè½AutoMergeé»è¾ï¼æ¯è¾å½åè¡åä¸ä¸è¡çæ°æ®
            </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">ApplySmartAutoMerge(row, column, newCell);</span>
        }</pre>
</div>
<p>æååç°ï¼DataGridå¹¶æ²¡æä¸ºæ¯è¡æ°æ®åå»ºDataGridRow/DataGridCellï¼ä¸è¿ä¼å¤ç¨è¿äºåå»ºåºæ¥çDataGridCellæ¾å¶ä»è¡çæ°æ®ãå°±æ¯è¯´ä¸é¢çæ¹æ³åªæ¯å¼å§çæ¾ç¤ºåå®¹æ¯å¯é¢æµçã</p>
<p>å¤æ¬¡å°è¯åï¼åç°ç»å¶åé½ä¼è°ç¨DataGridCellçEnsureGridLineæ¹æ³ï¼äºæ¯å°åå¹¶çä»£ç ä¸»è¦æ¾å¨å¶ä¸­</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">internal</span> <span style="color: rgba(0, 0, 255, 1)">void</span><span style="color: rgba(0, 0, 0, 1)"> EnsureGridLine(DataGridColumn lastVisibleColumn)
{
    </span><span style="color: rgba(0, 0, 255, 1)">if</span> (OwningGrid != <span style="color: rgba(0, 0, 255, 1)">null</span> &amp;&amp; _rightGridLine != <span style="color: rgba(0, 0, 255, 1)">null</span><span style="color: rgba(0, 0, 0, 1)">)
    {
        </span><span style="color: rgba(0, 0, 255, 1)">if</span> (OwningGrid.VerticalGridLinesBrush != <span style="color: rgba(0, 0, 255, 1)">null</span> &amp;&amp; OwningGrid.VerticalGridLinesBrush !=<span style="color: rgba(0, 0, 0, 1)"> _rightGridLine.Fill)
        {
            _rightGridLine.Fill </span>=<span style="color: rgba(0, 0, 0, 1)"> OwningGrid.VerticalGridLinesBrush;
        }
        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">å¿½ç¥å¶ä»ä»£ç <br>    
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> è°ç¨DataGridçCheckCellToMergeæ¹æ³</span>
    <span style="color: rgba(0, 0, 255, 1)">var</span> (isSameAsPrevious, isSameAsNext) = OwningGrid?.CheckCellToMerge(<span style="color: rgba(0, 0, 255, 1)">this</span>) ?? (<span style="color: rgba(0, 0, 255, 1)">false</span>, <span style="color: rgba(0, 0, 255, 1)">false</span><span style="color: rgba(0, 0, 0, 1)">);    
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æ ¹æ®ä¸åçç»åæåµå¤çåºè¾¹æ¡åéæåº¦</span>
<span style="color: rgba(0, 0, 0, 1)">    HandleMergeResult(isSameAsPrevious, isSameAsNext);
}</span></pre>
</div>
<p>è³æ­¤ï¼DataGridå³å®å¦ä½åå¹¶ï¼è¿åå½åè¡ä¸ä¸ä¸è¡åä¸ä¸è¡çæ°æ®æ¯å¦å¯ä»¥åå¹¶ï¼ç°å¨åªæ¯ç®åçæ¯è¾å½ååçåå®¹æ¯å¦ä¸è´ï¼ã</p>
<p><img src="https://img2024.cnblogs.com/blog/12683/202602/12683-20260210174136165-1383757098.png" alt="simplemerge" width="704" height="551" loading="lazy"></p>
<p>æä¸ä¸ªå°å°çé®é¢ï¼å¨æ»å¨æ¶åå¹¶åå¯è½ä¼æ¾ç¤ºç©ºç½ãè½è¯´å¨ç¨çwinformççdatagridviewä¹æè¿ä¸ªå°é®é¢ãä½æ°çä¸è¥¿å¤å°æç¹æ¹è¿ï¼å¯¹å§ãäºæ¯æåAIååºè¦æ±ãæå¤§çå¸®å©å°±æ¯å¤æ­æ¯å¦æ¯å½åæ¾ç¤ºçç¬¬ä¸åçæ¹æ³äºã</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
<span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> å¤æ­æå®è¡æ¯å¦ä¸ºå¯è§åºåçç¬¬ä¸è¡
</span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
<span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;param name="row"&gt;</span><span style="color: rgba(0, 128, 0, 1)">è¦æ£æ¥çè¡</span><span style="color: rgba(128, 128, 128, 1)">&lt;/param&gt;</span>
<span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;returns&gt;</span><span style="color: rgba(0, 128, 0, 1)">trueè¡¨ç¤ºæ¯å¯è§åºåçç¬¬ä¸è¡ï¼falseè¡¨ç¤ºä¸æ¯</span><span style="color: rgba(128, 128, 128, 1)">&lt;/returns&gt;</span>
<span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">bool</span><span style="color: rgba(0, 0, 0, 1)"> IsFirstVisibleRow(DataGridRow row)
{
    </span><span style="color: rgba(0, 0, 255, 1)">if</span> (_rowsPresenter == <span style="color: rgba(0, 0, 255, 1)">null</span> || row == <span style="color: rgba(0, 0, 255, 1)">null</span><span style="color: rgba(0, 0, 0, 1)">)
        </span><span style="color: rgba(0, 0, 255, 1)">return</span> <span style="color: rgba(0, 0, 255, 1)">false</span><span style="color: rgba(0, 0, 0, 1)">;
        
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> éåå¯è§åºåçææè¡ï¼æ¾å°ç´¢å¼æå°çè¡</span>
    <span style="color: rgba(0, 0, 255, 1)">int</span> firstVisibleRowIndex = <span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)">.MaxValue;
    </span><span style="color: rgba(0, 0, 255, 1)">foreach</span> (Control element <span style="color: rgba(0, 0, 255, 1)">in</span><span style="color: rgba(0, 0, 0, 1)"> _rowsPresenter.Children)
    {
        </span><span style="color: rgba(0, 0, 255, 1)">if</span> (element <span style="color: rgba(0, 0, 255, 1)">is</span> DataGridRow visibleRow &amp;&amp;<span style="color: rgba(0, 0, 0, 1)"> visibleRow.IsVisible)
        {
            firstVisibleRowIndex </span>=<span style="color: rgba(0, 0, 0, 1)"> Math.Min(firstVisibleRowIndex, visibleRow.Index);
        }
    }
    
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> å¦ææå®è¡ç´¢å¼ç­äºå¯è§åºåæå°ç´¢å¼ï¼åä¸ºç¬¬ä¸è¡</span>
    <span style="color: rgba(0, 0, 255, 1)">return</span> row.Index ==<span style="color: rgba(0, 0, 0, 1)"> firstVisibleRowIndex;
}</span></pre>
</div>
<p>äººå·¥åæååç°ï¼DataGridCellçEnsureGridLineä¸ç¥ä¸ºä½åªæ¯lastVisibleColumnæè°ç¨ï¼å¹¶ä¸æ¯è¡ä¸­çå¨é¨åãæ»å¨çå·æ°ç±DataGridCellsPresenteråèµ·ï¼çä»¥ä¸æ¹æ³</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">internal</span> <span style="color: rgba(0, 0, 255, 1)">void</span><span style="color: rgba(0, 0, 0, 1)"> EnsureFillerVisibility()
{
    DataGridFillerColumn fillerColumn </span>=<span style="color: rgba(0, 0, 0, 1)"> OwningGrid.ColumnsInternal.FillerColumn;
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">å¿½ç¥å¶ä»ä»£ç 

    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> This must be done after the Filler visibility is determined.  This also must be done
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> regardless of whether or not the filler visibility actually changed values because
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> we could scroll in a cell that didn't have EnsureGridLine called yet</span>
    DataGridColumn lastVisibleColumn =<span style="color: rgba(0, 0, 0, 1)"> OwningGrid.ColumnsInternal.LastVisibleColumn;
    </span><span style="color: rgba(0, 0, 255, 1)">if</span> (lastVisibleColumn != <span style="color: rgba(0, 0, 255, 1)">null</span><span style="color: rgba(0, 0, 0, 1)">)
    {
        DataGridCell cell </span>=<span style="color: rgba(0, 0, 0, 1)"> OwningRow.Cells[lastVisibleColumn.Index];
        cell.EnsureGridLine(lastVisibleColumn);</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">ä¸ç¥éä¸ºä»ä¹åªæ¯æåä¸åéè¦æ§è¡ã</span>
<span style="color: rgba(0, 0, 0, 1)">    }

    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æ£æ¥æ¯å¦ä¸ºé¦è¡æ¾ç¤ºï¼å¦ææ¯åæ¸é¤åå¹¶ååæ ¼çéæåº¦</span>
    <span style="color: rgba(0, 0, 255, 1)">bool</span> isFirstVisualRow = (OwningGrid?.IsFirstVisibleRow(OwningRow) == <span style="color: rgba(0, 0, 255, 1)">true</span><span style="color: rgba(0, 0, 0, 1)">);
    </span><span style="color: rgba(0, 0, 255, 1)">foreach</span> (DataGridCell cell <span style="color: rgba(0, 0, 255, 1)">in</span><span style="color: rgba(0, 0, 0, 1)"> OwningRow.Cells)
    {
        cell</span>?.ClearMergeOpacity(isFirstVisualRow);<span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">å¦çæ¶åï¼å¯è½éè¦æ¢å¤éæåº¦</span>
<span style="color: rgba(0, 0, 0, 1)">    }
}</span></pre>
</div>
<p>å¥½äºï¼è¿å°±æ¯å¨é¨ä¿®æ¹ãä»£ç å¨gitee</p>
<p><a href="https://gitee.com/kevin2y/Avalonia.Controls.DataGrid/tree/feature/auto-merge-enhancement" target="_blank" rel="noopener nofollow">https://gitee.com/kevin2y/Avalonia.Controls.DataGrid/tree/feature/auto-merge-enhancement</a></p>
<p>&nbsp;</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-10 17:59">2026-02-10 17:59</span>&nbsp;
<a href="https://www.cnblogs.com/kevin-Y">çå½ä½éªä¹kevin-Y</a>&nbsp;
éè¯»(<span id="post_view_count">30</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19600957);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19600957', targetLink: 'https://www.cnblogs.com/kevin-Y/p/19600957', title: 'Avalonia.Controls.DataGridèªå¨åå¹¶å' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ è®°å½ä¸æ¬¡bugï¼ä¸å¯è§å­ç¬¦/é¶å®½å­ç¬¦ ]]></title>
    <link>https://www.cnblogs.com/Az1r/p/19600679</link>
    <guid>2e12c4185c2e464147238c438eac14fc</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Az1r/p/19600679" title="åå¸äº 2026-02-10 16:59">
    <span role="heading" aria-level="2">è®°å½ä¸æ¬¡bugï¼ä¸å¯è§å­ç¬¦/é¶å®½å­ç¬¦</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h3 id="1-ç°è±¡">1. ç°è±¡</h3>
<p>å¨å¤ç CSV æä»¶å¯¼å¥æ¶ï¼ä½ å¯è½éå°è¿è¿ç§âçµå¼äºä»¶âï¼</p>
<ul>
<li>CSV æä»¶ç¬¬ä¸åå« <code>tag_id</code>ã</li>
<li>ç¨åºç¨ <code>encoding/csv</code> è¯»è¿ Map åï¼å°è¯ç¨ <code>mp["tag_id"]</code> åå¼ã</li>
<li>ç»æï¼ æ°¸è¿è¿åç©ºå¼ï¼ä½æå°æ´ä¸ª Map æ¶ï¼èç¼ç Key ç¡®å®æ¯ <code>tag_id</code>ã</li>
<li>èè¿å¶å®æ¯ä½ éå°äº<strong>é¶å®½å­ç¬¦</strong>ï¼ ãZWNBSPãã</li>
</ul>
<details>
<summary>ç¹å»æ¥çä»£ç </summary>
<pre><code>package main

import (
	"bytes"
	"encoding/csv"
	"fmt"
	"strings"
	"unicode"
)

/*
  [æ¨¡æ CSV è¡¨æ ¼ç»æ]
  æä»¶ç¼ç : UTF-8 with BOM (å­èæµå¼å¤´åå« \xef\xbb\xbf)

  |  åå (Header)   |  æ°æ® (Row 1)  |
  |-----------------|---------------|
  | [ZWNBSP]tag_id  |      1        |
  |      name       |    Popular    |

  æ³¨ï¼[ZWNBSP] å¨ç¼è¾å¨å Excel ä¸­å®å¨ä¸å¯è§ï¼ä½å¨åå­ä¸­å  3 ä¸ªå­èã
*/

func main() {
	// 1. æ¨¡æ CSV åå®¹ï¼æå¨å¨å¼å¤´å å¥ UTF-8 BOM (\xef\xbb\xbf)
	content := "\xef\xbb\xbf" + "tag_id,name\n1,Gemini"

	// 2. è§£æ CSV
	reader := csv.NewReader(bytes.NewBufferString(content))
	records, _ := reader.ReadAll()

	// 3. æå»º Map
	header := records[0]
	row := records[1]
	mp := make(map[string]string)
	for i, colName := range header {
		mp[colName] = row[i]
	}

	// 4. å°è¯éè¿æ åå­ç¬¦ä¸² Key è¯»å
	targetKey := "tag_id"
	val, exists := mp[targetKey]

	/*
	   [é¢è®¡æå°ç»æ]

	   --- ç»ææ¼ç¤º ---
	   ç´æ¥æå° Map: map[tag_id:1 name:Gemini]  &lt;-- èç¼çå®å¨æ­£å¸¸
	   å°è¯è¯»å Key [tag_id]: æå? false, å¼:     &lt;-- å®éä¸æ¾ä¸å°ï¼å ä¸ºå¤åºæ¥ç 3 å­èå¨ä½ç¥

	   --- çç¸æ­ç§ (åå­è¿å¶å¯¹æ¯) ---
	   Map éç Key (Hex): efbbbf7461675f6964  &lt;-- åé¢å¤åºäº efbbbf (ZWNBSP)
	   ä»£ç éç Key (Hex): 7461675f6964        &lt;-- çº¯åç tag_id
	*/

	fmt.Println("--- ç»ææ¼ç¤º ---")
	fmt.Printf("ç´æ¥æå° Map: %v\n", mp)
	fmt.Printf("å°è¯è¯»å Key [%s]: æå? %v, å¼: %s\n", targetKey, exists, val)

	fmt.Println("\n--- çç¸æ­ç§ (åå­è¿å¶å¯¹æ¯) ---")
	for k := range mp {
		if strings.Contains(k, "tag_id") {
			fmt.Printf("Map éç Key (Hex): %x\n", k)
			fmt.Printf("ä»£ç éç Key (Hex): %x\n", targetKey)
		}
	}

	// 5. ä½¿ç¨æ¸æ´å½æ°ä¿®å¤
	fmt.Println("\n--- ä¿®å¤åå°è¯ ---")
	cleanMp := make(map[string]string)
	for i, colName := range header {
		cleanMp[CleanString(colName)] = row[i]
	}
	_, existsNow := cleanMp[targetKey]
	fmt.Printf("æ¸æ´åè¯»å Key [%s]: æå? %v\n", targetKey, existsNow)
}

// CleanString æ¯å¤ç CSV ååçâå¼ºåå»æ±¡åâ
func CleanString(s string) string {
	// ç§»é¤ BOM åç¼å¹¶åé¤ææä¸å¯è§å­ç¬¦
	return strings.Map(func(r rune) rune {
		if unicode.IsGraphic(r) {
			return r
		}
		return -1
	}, strings.TrimPrefix(s, "\xef\xbb\xbf"))
}
</code></pre>
</details>
<p>é¶å®½å­ç¬¦ = çä¸è§çå­ç¬¦,ä½å®ççå¨ææ¬éã</p>
<h3 id="2-åæ">2. åæ</h3>
<h4 id="ä¸ºä»ä¹ä¼æè¿ç§å­ç¬¦"><strong>ä¸ºä»ä¹ä¼æè¿ç§å­ç¬¦ï¼</strong></h4>
<p>è¿ç±»é®é¢éå¸¸ç± <strong>BOM (Byte Order Mark)</strong> å¼èµ·ã</p>
<ul>
<li>
<p><strong>æ¥æºï¼</strong> å½ä½ ä½¿ç¨ Windows Excel å¦å­ä¸º UTF-8 æ ¼å¼æ¶ï¼æé£ä¹¦è¡¨æ ¼ä¿å­ä¸ºcsvæä»¶æ¶ï¼Excel ä¼å¨æä»¶æå¼å¤´èªå¨æ·»å  <code>0xEF 0xBB 0xBF</code> ä¸ä¸ªå­èã</p>
</li>
<li>
<p><strong>æ¬è´¨ï¼</strong> å¨ Unicode ä¸­ï¼è¿è¢«ç§°ä¸º <strong>ZWNBSP</strong>ï¼Zero Width No-Break Spaceï¼é¶å®½ä¸æ¢è¡ç©ºæ ¼ï¼<code>U+FEFF</code>ï¼ãå®çè®¾è®¡åè¡·æ¯æ è®°å­èåºï¼ä½å¨ç°ä»£ UTF-8 ç¯å¢ä¸ï¼å®å¾å¾åæäºâæ°æ®æè´¨âã</p>
</li>
</ul>
<h4 id="ä¸ºä»ä¹-go-æ æ³å¹é"><strong>ä¸ºä»ä¹ Go æ æ³å¹éï¼</strong></h4>
<p>Go ç <code>map[string]string</code> æ¥æ¾æ¯åºäº<strong>å­èæµ</strong>çç²¾ç¡®å¹éã</p>
<ul>
<li>
<p><strong>é¢æ Keyï¼</strong> <code>[116 97 103 95 105 100]</code> (å³ <code>tag_id</code>)</p>
</li>
<li>
<p><strong>å®éç Keyï¼</strong> <code>[239 187 191 116 97 103 95 105 100]</code> (å³ <code>\ufefftag_id</code>)</p>
</li>
</ul>
<p>å¸¸è§çé¶å®½å­ç¬¦ï¼</p>
<table>
<thead>
<tr>
<th><strong>åç§°</strong></th>
<th><strong>Unicode</strong></th>
<th><strong>ä½ç¨è¯´æ</strong></th>
<th><strong>å¯¹ç¨åºçå¹²æ°</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>é¶å®½æ æ­è¡ç©ºæ ¼ (ZWNBSP/BOM)</strong></td>
<td><code>\uFEFF</code></td>
<td>é²æ­¢èªå¨æ¢è¡ï¼å¨æä»¶å¤´ä½ä¸º BOM æ è®°ç¼ç </td>
<td><strong>æå¸¸è§</strong>ãå¯¼è´ CSV é¦å Key æ æ³è¯»åã</td>
</tr>
<tr>
<td><strong>é¶å®½ç©ºæ ¼ (ZWSP)</strong></td>
<td><code>\u200B</code></td>
<td>ç¨äºåéé¿åè¯ä»¥ä¾¿å¨å¿è¦æ¶æ¢è¡</td>
<td>æå¥å¨å­ç¬¦ä¸²ä¸­é´ï¼å¯¼è´ <code>len()</code> é¿åº¦å¢å ã</td>
</tr>
<tr>
<td><strong>é¶å®½è¿æ¥ç¬¦ (ZWJ)</strong></td>
<td><code>\u200D</code></td>
<td>ç¨äºç»åå¤ä¸ª Emojiï¼å¦ ð¨âð©âð§ï¼æå¤ææå­</td>
<td>å¼ºè¡è¿æ»¤ä¼å¯¼è´ç»å Emoji è¢«æè§£ã</td>
</tr>
<tr>
<td><strong>é¶å®½éè¿æ¥ç¬¦ (ZWNJ)</strong></td>
<td><code>\u200C</code></td>
<td>ææ­å­ç¬¦è¿åï¼å¸¸è§äºé¿æä¼¯è¯­ãå°åº¦æï¼</td>
<td>æ¹åææ¬çäºè¿å¶è¡¨ç¤ºã</td>
</tr>
<tr>
<td><strong>å·¦å³æå­æ¹åç¬¦ (LRM/RLM)</strong></td>
<td><code>\u200E</code> / <code>\u200F</code></td>
<td>æ··åæçæ¶æ§å¶æå­ä»å·¦å¾å³æä»å³å¾å·¦</td>
<td>å¯¼è´å­ç¬¦ä¸²æ¯è¾é»è¾å¤±æã</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="3-è§£å³">3. è§£å³</h3>
<pre><code>package main

import (
	"regexp"
)

// ç¨æ­£åå¹éå¸¸è§çé¶å®½å­ç¬¦åºé´
var reZeroWidth = regexp.MustCompile(`[\u200B-\u200D\uFEFF\u200E\u200F]`)

func SafeClean(s string) string {
	return reZeroWidth.ReplaceAllString(strings.TrimSpace(s), "")
}
</code></pre>


</div>
<div id="MySignature" role="contentinfo">
    <p>æ¬ææ¥èªåå®¢å­ï¼ä½èï¼<a href="https://www.cnblogs.com/Az1r/" target="_blank">æ±æ°´ä¸ºç«­</a>ï¼è½¬è½½è¯·æ³¨æåæé¾æ¥ï¼<a href="https://www.cnblogs.com/Az1r/p/19600679" target="_blank">https://www.cnblogs.com/Az1r/p/19600679</a></p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-10 17:00">2026-02-10 16:59</span>&nbsp;
<a href="https://www.cnblogs.com/Az1r">æ±æ°´ä¸ºç«­</a>&nbsp;
éè¯»(<span id="post_view_count">115</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19600679);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19600679', targetLink: 'https://www.cnblogs.com/Az1r/p/19600679', title: 'è®°å½ä¸æ¬¡bugï¼ä¸å¯è§å­ç¬¦/é¶å®½å­ç¬¦' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ä¸å¤©ä¸ä¸ªPythonåºï¼wheel - Python æåçè½®å­ï¼é«æååå©å¨ ]]></title>
    <link>https://www.cnblogs.com/min2k/p/19600605</link>
    <guid>00e2a25babb25b6d444c752530c16044</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/min2k/p/19600605" title="åå¸äº 2026-02-10 16:36">
    <span role="heading" aria-level="2">ä¸å¤©ä¸ä¸ªPythonåºï¼wheel - Python æåçè½®å­ï¼é«æååå©å¨</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="wheel---python-æåçè½®å­é«æååå©å¨">wheel - Python æåçè½®å­ï¼é«æååå©å¨</h1>
<h2 id="ä¸ä»ä¹æ¯wheel">ä¸ãä»ä¹æ¯wheelï¼</h2>
<p><strong>wheel</strong> æ¯ä¸ä¸ªç¨äº Python åååçæ åæ ¼å¼åå·¥å·ç Python åºã<br>
å®å¯ä»¥å¸®å©ä½ ï¼</p>
<ul>
<li>åå»º <code>.whl</code> æä»¶ï¼è¿æ¯ä¸ç§å³è£å³ç¨çååæ ¼å¼ã</li>
<li>å®ç°æ´å¿«éãæ´å¯é çåå®è£ã</li>
<li>é¿åå¨å®è£è¿ç¨ä¸­è¿è¡æºä»£ç ç¼è¯ï¼ä»èç®åä¾èµç®¡çã</li>
<li>ç¡®ä¿ä¸åç³»ç»é´çäºè¿å¶å¼å®¹æ§ï¼å¨æäºæåµä¸ï¼ã</li>
</ul>
<h2 id="äºåºç¨åºæ¯">äºãåºç¨åºæ¯</h2>
<p><strong>wheel</strong> å¹¿æ³åºç¨äºä»¥ä¸å®éåºæ¯ï¼</p>
<ul>
<li><strong>å¿«éé¨ç½²</strong>: å½ä½ éè¦å°ä¸ä¸ª Python åºç¨æåºå¿«éé¨ç½²å°å¤ä¸ªç¯å¢ä¸­æ¶ï¼<code>wheel</code> æä»¶å¯ä»¥æ¾èå å¿«å®è£éåº¦ã</li>
<li><strong>æå»ºç§æ PyPI</strong>: å¦æä½ å¨ä¼ä¸åé¨ç»´æ¤ä¸ä¸ªç§æç PyPI ä»åºï¼éå¸¸ä¼å°åé¨åºæåæ <code>wheel</code> æä»¶ä»¥ä¾¿äºåå·¥å®è£ã</li>
<li><strong>æç»­éæ/æç»­é¨ç½² (CI/CD)</strong>: å¨ CI/CD ç®¡éä¸­ï¼çæååå <code>wheel</code> æä»¶æ¯é¨ç½² Python é¡¹ç®çå¸¸è§æ­¥éª¤ï¼å¯ä»¥æé«æå»ºæçã</li>
<li><strong>è·¨å¹³å°åå</strong>: å¯¹äºåå« C æ©å±ç Python åºï¼<code>wheel</code> å¯ä»¥é¢ç¼è¯è¿äºæ©å±ï¼é¿åç¨æ·å¨å®è£æ¶è¿è¡ç¼è¯ï¼åå°å®è£å¤±è´¥çå¯è½æ§ã</li>
</ul>
<h2 id="ä¸å¦ä½å®è£">ä¸ãå¦ä½å®è£</h2>
<ol>
<li>ä½¿ç¨ pip å®è£</li>
</ol>
<pre><code class="language-bash">pip install wheel

# å¦æå®è£æ¢çè¯ï¼æ¨èä½¿ç¨å½åéåæº
pip install wheel -i https://www.python64.cn/pypi/simple/
</code></pre>
<ol start="2">
<li>ä½¿ç¨ <a href="https://www.min2k.com/tools/python-run/" target="_blank" rel="noopener nofollow">PythonRun</a> å¨çº¿è¿è¡ä»£ç ï¼æ éæ¬å°å®è£ï¼</li>
</ol>
<h2 id="åç¤ºä¾ä»£ç ">åãç¤ºä¾ä»£ç </h2>
<p>æ£æ¥ wheel åæ¯å¦å¯ç¨ï¼å¹¶æ¼ç¤ºå¦ä½åå»ºä¸ä¸ªç®åç wheel æä»¶ï¼æ¦å¿µæ§ï¼ã</p>
<pre><code class="language-python">import os
import subprocess

# æ£æ¥å½åPythonç¯å¢æ¯å¦å®è£äºwheel
try:
    import wheel
    wheel_installed = True
except ImportError:
    wheel_installed = False

if wheel_installed:
    print("Wheel is installed and ready to use.")
    # å®éåå»º wheel æä»¶éè¦ä¸ä¸ª setuptools é¡¹ç®ç»æ
    # è¿éæä»¬åªæ¨¡æä¸ä¸ªç®åçæ£æ¥ï¼ä¸å®éæå»ºå¤æçwheel
    print("To build a wheel, you typically use 'python setup.py bdist_wheel'.")

    # ç®åæ¡ä»¶å¤æ­ï¼å¦æå®è£äºï¼å°±æç¤ºç¨æ·
    if wheel.__version__:
        print(f"Wheel version: {wheel.__version__}")
    else:
        print("Could not determine wheel version.")

else:
    print("Wheel is not installed. Please install it using 'pip install wheel'.")

</code></pre>
<p>ä½¿ç¨ <a href="https://www.min2k.com/tools/python-run/?code=import%20os%0Aimport%20subprocess%0A%0A%23%20%E6%A3%80%E6%9F%A5%E5%BD%93%E5%89%8DPython%E7%8E%AF%E5%A2%83%E6%98%AF%E5%90%A6%E5%AE%89%E8%A3%85%E4%BA%86wheel%0Atry%3A%0A%20%20%20%20import%20wheel%0A%20%20%20%20wheel_installed%20%3D%20True%0Aexcept%20ImportError%3A%0A%20%20%20%20wheel_installed%20%3D%20False%0A%0Aif%20wheel_installed%3A%0A%20%20%20%20print%28%22Wheel%20is%20installed%20and%20ready%20to%20use.%22%29%0A%20%20%20%20%23%20%E5%AE%9E%E9%99%85%E5%88%9B%E5%BB%BA%20wheel%20%E6%96%87%E4%BB%B6%E9%9C%80%E8%A6%81%E4%B8%80%E4%B8%AA%20setuptools%20%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%0A%20%20%20%20%23%20%E8%BF%99%E9%87%8C%E6%88%91%E4%BB%AC%E5%8F%AA%E6%A8%A1%E6%8B%9F%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E6%A3%80%E6%9F%A5%EF%BC%8C%E4%B8%8D%E5%AE%9E%E9%99%85%E6%9E%84%E5%BB%BA%E5%A4%8D%E6%9D%82%E7%9A%84wheel%0A%20%20%20%20print%28%22To%20build%20a%20wheel%2C%20you%20typically%20use%20'python%20setup.py%20bdist_wheel'.%22%29%0A%0A%20%20%20%20%23%20%E7%AE%80%E5%8D%95%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD%EF%BC%9A%E5%A6%82%E6%9E%9C%E5%AE%89%E8%A3%85%E4%BA%86%EF%BC%8C%E5%B0%B1%E6%8F%90%E7%A4%BA%E7%94%A8%E6%88%B7%0A%20%20%20%20if%20wheel.__version__%3A%0A%20%20%20%20%20%20%20%20print%28f%22Wheel%20version%3A%20%7Bwheel.__version__%7D%22%29%0A%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20print%28%22Could%20not%20determine%20wheel%20version.%22%29%0A%0Aelse%3A%0A%20%20%20%20print%28%22Wheel%20is%20not%20installed.%20Please%20install%20it%20using%20'pip%20install%20wheel'.%22%29%0A" target="_blank" rel="noopener nofollow">PythonRun</a> å¨çº¿è¿è¡è¿æ®µä»£ç ï¼ç»æå¦ä¸ï¼</p>
<pre><code class="language-text">Wheel is installed and ready to use.
To build a wheel, you typically use 'python setup.py bdist_wheel'.
Wheel version: 0.38.4
</code></pre>
<p>ä½¿ç¨ <a href="https://www.min2k.com/tools/mermaid/?code=flowchart%20TB%0A%20%20start%28%28Start%29%29%20--%3E%20A%7BImport%20wheel%20module%3F%7D%3B%0A%20%20A%20--%20Yes%20--%3E%20B%5BSet%20wheel_installed%20%3D%20True%5D%3B%0A%20%20A%20--%20No%20--%3E%20C%5BSet%20wheel_installed%20%3D%20False%5D%3B%0A%20%20B%20--%3E%20D%7BIs%20wheel_installed%20True%3F%7D%3B%0A%20%20C%20--%3E%20D%3B%0A%20%20D%20--%20Yes%20--%3E%20E%5BPrint%20%22Wheel%20is%20installed...%22%5D%3B%0A%20%20E%20--%3E%20F%5BPrint%20building%20instruction%5D%3B%0A%20%20F%20--%3E%20G%7Bwheel.__version__%20exists%3F%7D%3B%0A%20%20G%20--%20Yes%20--%3E%20H%5BPrint%20wheel%20version%5D%3B%0A%20%20G%20--%20No%20--%3E%20I%5BPrint%20%22Could%20not%20determine%20version%22%5D%3B%0A%20%20D%20--%20No%20--%3E%20J%5BPrint%20%22Wheel%20is%20not%20installed...%22%5D%3B%0A%20%20H%20--%3E%20end%28%28End%29%29%3B%0A%20%20I%20--%3E%20end%3B%0A%20%20J%20--%3E%20end%3B" target="_blank" rel="noopener nofollow">MermaidGo</a> ç»å¶ç¤ºä¾ä»£ç çæµç¨å¾ï¼ç»æå¦ä¸ï¼</p>
<p><img alt="MermerGoçwheelæµç¨å¾" loading="lazy" data-src="https://img2024.cnblogs.com/blog/70894/202602/70894-20260210163518230-465434968.jpg" class="lazyload"></p>
<h2 id="äºå­¦ä¹ èµæº">äºãå­¦ä¹ èµæº</h2>
<ol>
<li>å¼æºé¡¹ç®ï¼<a href="https://github.com/pypa/wheel" target="_blank" rel="noopener nofollow">wheel</a></li>
<li>ä¸­æèªè¿°ï¼<a href="https://www.python64.cn/readme/wheel/" target="_blank" rel="noopener nofollow">REMDME</a></li>
<li>å¨çº¿è¿è¡ï¼<a href="https://www.min2k.com/tools/python-run/" target="_blank" rel="noopener nofollow">PythonRun</a></li>
</ol>
<blockquote>
<p>å¦æè¿ç¯æç« å¯¹ä½ æå¸®å©ï¼æ¬¢è¿ç¹èµãæ¶èãè½¬åï¼<br>
å­¦ä¹ è¿ç¨ä¸­æä»»ä½é®é¢ï¼æ¬¢è¿å¨è¯è®ºåºçè¨äº¤æµï½</p>
</blockquote>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-10 16:37">2026-02-10 16:36</span>&nbsp;
<a href="https://www.cnblogs.com/min2k">æç¼ç¨</a>&nbsp;
éè¯»(<span id="post_view_count">32</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19600605);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19600605', targetLink: 'https://www.cnblogs.com/min2k/p/19600605', title: 'ä¸å¤©ä¸ä¸ªPythonåºï¼wheel - Python æåçè½®å­ï¼é«æååå©å¨' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ KMPæ¨¡å¼å¹éç®æ³ââè¯¦ç»è®²è§£ãæ¸æ°ææ ]]></title>
    <link>https://www.cnblogs.com/CodingCat-jiumi/p/19555666</link>
    <guid>d876a5fa62007cd3c0f2c0860171271b</guid>
    <description>
    <![CDATA[ 
		<h2>
			<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/CodingCat-jiumi/p/19555666" title="åå¸äº 2026-02-10 16:30">
    <span role="heading" aria-level="2">KMPæ¨¡å¼å¹éç®æ³ââè¯¦ç»è®²è§£ãæ¸æ°ææ</span>
    

</a>

		</h2>
		    <div id="cnblogs_post_description" style="display: none">
        
        KMPç®æ³æ¯ç±D.E. KnuthãJ.H. MorrisåV.R. Pratt(å¶ä¸­KnuthåPrattå±åç ç©¶, Mor-risç¬ç«ç ç©¶)åè¡¨ä¸ä¸ªæ¨¡å¼å¹éç®æ³ï¼KMPç®æ³çæå¤§ç¹ç¹ä½¿å¾å®å¨å¤çå¤§éææ¬å¹éçé®é¢æ¶ï¼æ¯æ´åæä¸¾ç®æ³ææ´å¥½çæ§è½ã
å³äºå­ç¬¦ä¸²å¹éï¼æ¯å­ç¬¦ä¸²å¾éè¦çç¥è¯ç¹ï¼ä¹æ¯é¢è¯ç¬è¯çé«é¢èç¹ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="kmpç®æ³ä»ç»">KMPç®æ³ä»ç»</h2>
<p>KMPç®æ³æ¯ç±D.E. KnuthãJ.H. MorrisåV.R. Pratt(å¶ä¸­KnuthåPrattå±åç ç©¶,  Mor-risç¬ç«ç ç©¶)åè¡¨ä¸ä¸ªæ¨¡å¼å¹éç®æ³ï¼KMPç®æ³çæå¤§ç¹ç¹ä½¿å¾å®å¨å¤çå¤§éææ¬å¹éçé®é¢æ¶ï¼æ¯æ´åæä¸¾ç®æ³ææ´å¥½çæ§è½ã</p>
<p>å³äºå­ç¬¦ä¸²å¹éï¼æ¯å­ç¬¦ä¸²å¾éè¦çç¥è¯ç¹ï¼ä¹æ¯é¢è¯ç¬è¯çé«é¢èç¹ãLeetcodeçç¬¬28é¢å°±æ¯èæ¥å­ç¬¦ä¸²å¹éç®æ³ãå¦å¤æ¬ææ¯æ¥çäºãå¤§è¯æ°æ®ç»æãè¿æ¬ä¹¦åçæ»ç»ï¼åæ¶nextæ°ç»é¨åä¹åèäºè¿ç¯åå®¢<a href="https://blog.csdn.net/gmynebula/article/details/125239503" target="_blank" rel="noopener nofollow">KMPç®æ³ä¸­nextæ°ç»çè®¡ç®</a>ã</p>
<p>KMPæ¯ç±åºç¡çå­ç¬¦ä¸²å¹éBFç®æ³æ¹è¿èæ¥ç</p>
<h2 id="kmpæ¨¡å¼å¹éç®æ³åç">KMPæ¨¡å¼å¹éç®æ³åç</h2>
<p>ç®æ ä¸²ï¼ä¸»ä¸²ï¼ S = "heloohello", æ¨¡å¼ä¸²ï¼å­ä¸²ï¼ T = "hello"ãæä»¬è¦ä»ä¸»ä¸² S ä¸­æ¾å°å­ä¸² T çä½ç½®ãå¦æä½¿ç¨BFç®æ³ï¼æ­¥éª¤å¦ä¸å¾æç¤ºã</p>
<div align="center">
<img width="60%" data-src="https://img2024.cnblogs.com/blog/2488203/202601/2488203-20260130194755726-596048542.png" class="lazyload">
</div>
<p>å¨ â  ä¸­å½ S å T ä¸å¹éæ¶ï¼BFç®æ³çæä½æ¯ä¸»ä¸² S åéå° i-j+1ï¼ä»æ¬æ¬¡å¹éçåå§ä½ç½®åç§»ä¸ä½ï¼å¾ä¸­æ­¥éª¤â¡çä½ç½®ï¼ï¼å¹éä¸² T åéå° j = 0 (åå§ä½ç½®ï¼, ç¶åæ§è¡ â¡â¢â£â¤â¥ æ­¥ä¾æ¬¡è¿è¡å¹éï¼ä½ææè¿äºæ­¥éª¤ä¸å®é½æ¯å¿éçåï¼</p>
<p>å¨æ­¥éª¤ â  ä¸­ï¼åçæ¨¡å¼ä¸² Tï¼åä¸ä¸ªå­ç¬¦åä¸ç¸ç­ï¼'h' != 'e' != 'l'ï¼ï¼åæ¶S å T ä¸²åä¸ä¸ªå­ç¬¦åç¸å¹éï¼é£ä¹æ¨¡å¼ä¸² T çé¦å­ç¬¦'h' èªç¶ä¸å¯è½åä¸»ä¸² S çç¬¬äºãä¸ä½å­ç¬¦ç¸ç­ãæä»¥æ­¥éª¤â¡â¢é½æ¯å¤ä½çãè¿æ¯KMPç®æ³çå³é®æå¨ï¼å¦ææä»¬ç¥é T ä¸²ä¸­åªäºå­ç¬¦ç¸ç­ï¼ä¹æ¯å³é®ç¹ï¼åç»­ä¼è®²ï¼ï¼é£ä¹æäºæ­¥éª¤å°±å¯ä»¥çç¥ã</p>
<div align="center">
<img width="50%" data-src="https://img2024.cnblogs.com/blog/2488203/202601/2488203-20260130194814708-2146798970.png" class="lazyload">
</div>
<p>å æ­¤åªéè¦ä¿çâ â£â¤â¥çæ­¥éª¤å³å¯ãä»ä¸å¾å¯ä»¥çåºï¼æé i æ¯ä¸æ¯ä¸ç´æ²¡æåæº¯ï¼è¿å°±æ¯KMPçå¦å¤æå¨ãå¨KMPä¸­ï¼æé i æ°¸è¿ä¸ä¼åæº¯ï¼åªææåæ¨¡å¼ä¸²çæé j ä¼åçåæº¯ãå¨æ¬ä¾ä¸­ j æ¯æ¬¡é½åéå°é¦åç´ ï¼æä»¬åä¸¾ä¸ä¸ªä¾å­ï¼çç j ä¼æä¹ååã</p>
<div align="center">
<img width="60%" data-src="https://img2024.cnblogs.com/blog/2488203/202601/2488203-20260130195618623-1249784837.png" class="lazyload">
</div>
<p>ç¬¬äºä¸ªä¾å­ï¼</p>
<p>ç®æ ä¸²ï¼ä¸»ä¸²ï¼ S = "abcababca", æ¨¡å¼ä¸²ï¼å­ä¸²ï¼ T = "abcabx"ãBFç®æ³æ§è¡è¿ç¨å¦ä¸å¾æç¤ºï¼å¨æ­¥éª¤ â  ä¸­å5ä¸ªå­ç¬¦å®å¨ç¸ç­ï¼æ ¹æ®ä¸ä¸ä¸ªä¾å­çç»éªï¼å·²ç¥æ¨¡å¼ä¸²Tä¸­ç¬¬ä¸ä½å­ç¬¦ä¸ç¬¬äºä½ãç¬¬ä¸ä½ä¸ç­ï¼åç»­ä¼æ ¹æ®next[]æ°ç»è®¡ç®å¾åºï¼ï¼æ­¥éª¤ â¡â¢ é½æ¯å¤ä½çï¼ç´æ¥çç¥ã</p>
<div align="center">
<img width="60%" data-src="https://img2024.cnblogs.com/blog/2488203/202601/2488203-20260130195738650-30570371.png" class="lazyload">
</div>
<p>ä¸ä¸ä¸ªä¾å­ä¸åçæ¯ï¼è¿éçæ¨¡å¼ä¸² T çé¦ä½å­ç¬¦ 'a' ä¸ T ç¬¬åä½ç 'a' ç¸ç­ï¼ç¬¬äºä½ç 'b' ä¸ç¬¬äºä½ç 'b' ç¸ç­ï¼èå¨ â  ä¸­,ç¬¬åä½ç 'a' ç¬¬äºä½ç 'b' å·²ç»ä¸ä¸»ä¸² S ä¸­çç¸åºä½ç½®æ¯è¾è¿äºï¼æ¯ç¸ç­çãå æ­¤å¯ä»¥æ­å®,T çé¦å­ç¬¦ 'a'ãç¬¬äºä½çå­ç¬¦ 'b' ä¸ S çç¬¬åä½å­ç¬¦åç¬¬äºä½å­ç¬¦è¯å®ä¹æ¯ç¸ç­çï¼æä»¥ â£â¤ è¿ä¸¤ä¸ªæ¯è¾å¾åºå­ç¬¦ç¸ç­çæ­¥éª¤ä¹å¯ä»¥çç¥ã</p>
<div align="center">
<img width="60%" data-src="https://img2024.cnblogs.com/blog/2488203/202601/2488203-20260130195818970-1710847471.png" class="lazyload">
</div>
<p>æ»ç»ä¸é¢ä¸¤ä¸ªä¾å­ï¼å¨KMPç®æ³ä¸­ï¼<strong>ä¸»ä¸²ç i å¼</strong>æ¯<strong>ä¸éè¦åæº¯</strong>çãæä»¥æä»¬åªéè¦èèååç j å¼ï¼æ¨¡å¼ä¸² j å¼çååéè¿è§å¯å¯ä»¥åç°ï¼å½ä¸»ä¸²åæ¨¡å¼ä¸²ä¸å¹éæ¶ï¼ä¸ä¸æ­¥ j è¯¥æååªä¸ªåç´ <strong>åªä¸æ¨¡å¼ä¸² T æ¬èº«æå³ç³»</strong>ãå½åç°æç¸åçå­ç¬¦ï¼j çååä¹å°±ä¼ä¸åã</p>
<p>å¨KMPä¸­ï¼å½ä¸»ä¸²åæ¨¡å¼ä¸²ä¸å¹éæ¶, ä¸ä¸æ­¥ j å¼çå¤å°åå³äºå½åå­ç¬¦ä¹åçä¸²çååç¼çç¸ä¼¼åº¦ã</p>
<h2 id="nextæ°ç»">nextæ°ç»</h2>
<h3 id="åºç¡ç¥è¯">åºç¡ç¥è¯</h3>
<p>å¨æä»¬è®¡ç®nextæ°ç»ä¹åï¼æä»¬åè®²è§£ä¸äºåºç¡ç¥è¯ã</p>
<ul>
<li>åç¼ï¼å­ç¬¦ä¸²çå¼å¤´ï¼ä¾å¦å­ç¬¦ä¸²abcdçåç¼ä¸ºa, ab, abc, abcdãå¨KMPç®æ³ä¸­ä½¿ç¨çåç¼ä¸ºçåç¼ï¼æ¢ä¸åæ¬åå­ç¬¦ä¸²abcdçåç¼ãï¼çåç¼ï¼a, ab, abcï¼</li>
<li>åç¼ï¼å­ç¬¦ä¸²çç»å°¾ï¼å¨KMPç®æ³ä¸­åæ ·ä½¿ç¨çæ¯çåç¼(bcd,cd,d)ã</li>
<li>æé¿å¬å±ååç¼ï¼æé¿çç¸ç­çåç¼ä¸åç¼ï¼ä¾å¦å­ç¬¦ä¸²ABCxyzABCçæé¿å¬å±ååç¼ä¸ºABC
<ul>
<li>ABCXYABCççåç¼ï¼Aï¼AB, <strong>ABC</strong>, ABCx, ABCxy, ABCxyz, ABCxyzA, ABCxyzAB</li>
<li>ABCXYABCççåç¼ï¼BCxyzABC, CxyzABC, xyzABC, yzABC, zABC, <strong>ABC</strong>, BC, C</li>
</ul>
</li>
<li>åç¼è¡¨ï¼å­å¨æ¯ä¸ä¸ªåç¼çæé¿å¬å±ååç¼çé¿åº¦ã<br>
ä¸¾ä¾ï¼è¥æ¨¡å¼ä¸² T="abaaabaaca"ã</li>
</ul>
<div align="center">
<img width="50%" data-src="https://img2024.cnblogs.com/blog/2488203/202601/2488203-20260130195927819-1913854677.png" class="lazyload">
</div>
<ul>
<li>nextæ°ç»ï¼æ T ä¸²åä¸ªä½ç½®ç j çååå®ä¹ä¸ºæ°ç» nextï¼next çé¿åº¦å°±æ¯ T ä¸²çé¿åº¦ãä¸»ä¸²åæ¨¡å¼ä¸²ä¸å¹éæ¶ï¼ä¸ä¸æ­¥ j çå¼ç± next[j] å³å®ãä¾å¦ç®æ ä¸² S="abcaba", T="aba", æ ¹æ®åç¼è¡¨æ±åº next=[-1,0 0], å½ j=2 æ¶åçä¸å¹é, next[2]=0, ä¸ä¸æ­¥ j å°ç­äº 0 è¿è¡å­ç¬¦å¹éã</li>
</ul>
<div align="center">
<img alt="ç»å¾13.png" width="50%" data-src="https://img2024.cnblogs.com/blog/2488203/202601/2488203-20260130194937697-1022022891.png" class="lazyload">
</div>
<h3 id="åç¼è¡¨ånextæ°ç»çå³ç³»">åç¼è¡¨ånextæ°ç»çå³ç³»</h3>
<p>åç¼è¡¨å­å¨æ¯ä¸ä¸ªåç¼çæé¿å¬å±ååç¼çé¿åº¦ï¼nextæ°ç»å­å¨çæ¯æ¨¡å¼ä¸²åå³ç§»å¨å°nextå¼çä½ç½®ï¼è¿ä¸ªå¼ä¸åç¼çæé¿å¬å±ååç¼çé¿åº¦æå³ï¼æä»¥nextæ°ç»æ¯å¯ä»¥ç±åç¼è¡¨çæçã<br>
ç¨åç¼è¡¨çæä¸ä¸ªnextæ°ç»å¾å®¹æï¼å°åç¼è¡¨æ¯ä¸ä½é½ååç§»å¨1ä½ï¼æåä¸ä½èå»ï¼å¹¶å¨ç¬¬ä¸ä½è¡¥ä¸ä¸ª-1å°±å¾å°äºnextæ°ç»ã</p>
<div align="center">
<img alt="ç»å¾14.png" width="50%" data-src="https://img2024.cnblogs.com/blog/2488203/202601/2488203-20260130194959450-1960892099.png" class="lazyload">
</div>
<p>å¦ææåå­¦ä¸çè§£è¿ä¸ªå³ç³»è¿å¯ä»¥çä¸ä¸æå¨æ¨çè¿ç¨ï¼<br>
T="abaaabaaca"</p>
<ol>
<li>ä½ç½®0ä¸çåç´ aåé¢æ²¡æå­ä¸²ï¼ä»¤next[0]=-1</li>
<li>ä½ç½®1ä¸çåç´ båé¢çå­ç¬¦ä¸²ä¸º"a"ï¼å­ç¬¦ä¸²"a"æ²¡ææé¿å¬å±ååç¼ï¼next[1]=0</li>
<li>ä½ç½®2ä¸çåç´ aåé¢çå­ç¬¦ä¸²ä¸º"ab","ab"æ²¡ææé¿å¬å±ååç¼ï¼next[2]=0</li>
<li>ä½ç½®3ä¸çåç´ aåé¢çå­ç¬¦ä¸²ä¸º"aba"ï¼æé¿å¬å±ååç¼ä¸º"a"ï¼next[3]=1</li>
<li>ä½ç½®4ä¸çåç´ aåé¢çå­ç¬¦ä¸²ä¸º"abaa"ï¼æé¿å¬å±ååç¼ä¸º"a"ï¼next[4]=1</li>
<li>ä½ç½®5ä¸çåç´ båé¢çå­ç¬¦ä¸²ä¸º"abaaa"ï¼æé¿å¬å±ååç¼ä¸º"a"ï¼next[5]=1</li>
<li>ä½ç½®6ä¸çåç´ aåé¢çå­ç¬¦ä¸²ä¸º"abaaab"ï¼æé¿å¬å±ååç¼ä¸º"ab"ï¼next[6]=2</li>
<li>ä½ç½®7ä¸çåç´ aåé¢çå­ç¬¦ä¸²ä¸º"abaaaba"ï¼æé¿å¬å±ååç¼ä¸º"aba"ï¼next[7]=3</li>
<li>ä½ç½®8ä¸çåç´ aåé¢çå­ç¬¦ä¸²ä¸º"abaaabaa"ï¼æé¿å¬å±ååç¼ä¸º"abaa"ï¼next8]=4</li>
<li>ä½ç½®9ä¸çåç´ aåé¢çå­ç¬¦ä¸²ä¸º"abaaabac"ï¼æ²¡ææé¿å¬å±ååç¼ï¼next[9]=0</li>
</ol>
<p>åæ¶å¨<a href="https://blog.csdn.net/gmynebula/article/details/125239503" target="_blank" rel="noopener nofollow">KMPç®æ³ä¸­nextæ°ç»çè®¡ç®</a>è¿ç¯åå®¢ä¸­æå°äºä¸ä¸ªå°æ¹ï¼ä¸ºä»ä¹æäºnextæ°ç»æ¯0,1å¼å¤´ï¼èæäºnextæ°ç»æ¯-1,0å¼å¤´ï¼</p>
<blockquote>
<p>-1,0å¼å¤´ä¸0, 1å¼å¤´çnextæ°ç»æ¬è´¨æ¯ä¸æ ·çãå®éä¸ï¼ä»¥0, 1å¼å¤´çnextæ°ç»å°±æ¯ä»¥-1,0å¼å¤´çnextæ°ç»æ¯ä¸é¡¹å 1å¾å°çãåºç°è¿ç§æåµçåå å¨äºæ¨¡å¼ä¸²èµ·å§çç´¢å¼å¼ï¼å¨ç¨åºä¸­ï¼ä¸ä¸ªæ°ç»çç´¢å¼çèµ·å§å¼ä¸º0ï¼ç¶èå¨èè¯åä¹¦ä¸­ç»çæ¨¡å¼ä¸²èµ·å§å¼æ¯å¤ä»1å¼å§ãæä»¥å¨èè¯ä¸­éå°çnextæ°ç»éå¸¸æ¯ä»¥0, 1å¼å¤´ï¼èä¸äºç¨åºææç¨ä¸­çnextæ°ç»æ¯ä»¥-1, 0å¼å¤´ã<br><br>
æ³¨ï¼å¨èè¯ä¸­éå¸¸ä¼ç»æ¨¡å¼ä¸²çç´¢å¼ï¼æèä¼ç»nextå¼çåä¸¤é¡¹ï¼å¨ç­é¢æ¶è¦æç§é¢ç®ä¸­çè¦æ±ånextæ°ç»ã</p>
</blockquote>
<h2 id="ä»£ç å®ç°">ä»£ç å®ç°</h2>
<p>nextæ°ç»çä»£ç å®ç°, å¯ä»¥è®¡ç®åºå½åå¹éä¸² T ç next æ°ç»</p>
<pre><code class="language-cpp">void get_next(string T, int *next) {
	next[0] = -1;
	int i = 0;
	int j = -1;
	
	while(i &lt; T.size() - 1) {
		//T[i]è¡¨ç¤ºåç¼çåä¸ªå­ç¬¦
		//T[j]è¡¨ç¤ºåç¼çåä¸ªå­ç¬¦
		if(j == -1 || T[i] == T[j]){//
			++i;
			++j;
			next[i] = j;
		} else {
			//å¦æå­ç¬¦ä¸ç¸åï¼åjå¼åæº¯
			j = next[j];
		}
	}
}
</code></pre>
<p>KMPä»£ç å®ç°</p>
<pre><code class="language-cpp">int KMP(string S, string T) {
    int ans = -1;
    // iç¨äºéåä¸»ä¸²S
    int i = 0;
    // jç¨äºéåå¹éä¸²T
    int j = 0;
    int next[255]; // è¿éåå§é¿åº¦ä¸º255,éèªè¡è°æ´
    // å¯¹Tååæï¼å¾å°nextæ°ç»
    get_next(T, next);
    while (i &lt; S.size()) {
        // å¹éæååç»§ç»­åä¸ä¸ä¸ªå­ç¬¦è¿è¡å¹é
        if (j == -1 || S[i] == T[j]) {
            ++i;
            ++j;
        }
        // å¹éå¤±è´¥è¿è¡åæº¯
        else {
            // jåæº¯å°åéçä½ç½®
            j = next[j];
        }
        if (j == T.size()) {
            ans = i - T.size();
            break;
        }
    }
    return ans;
}
</code></pre>
<h2 id="æ¶é´å¤æåº¦">æ¶é´å¤æåº¦</h2>
<p>ä»¤ n ä¸ºä¸»ä¸²é¿åº¦ï¼m ä¸ºè¦å¹éçå­ä¸²é¿åº¦ã</p>
<p>å¯¹äºGet_nextå½æ°æ¥è¯´ï¼æ¶é´å¤æåº¦ä¸ºO(m)ï¼å ä¸ºiå¼ä¸åæº¯ï¼æä»¥ä½¿å¾KMPç®æ³æçå¾å°æé«ï¼å¨KMPå½æ°ä¸­whileå¾ªç¯çæ¶é´å¤æåº¦ä¸ºO(n)ï¼å æ­¤æ´ä¸ªç®æ³çæ¶é´å¤æåº¦ä¸ºO(n + m)ã</p>
<p>KMPç®æ³ä»å½æ¨¡å¼ä¸ä¸»ä¸²ä¹é´å­å¨è®¸å¤âé¨åå¹éâæ¶ï¼æä¼ä½ç°åºå®çä¼å¿ï¼å¦åä¸¤èå·®å¼ä¸ææ¾ã</p>


</div>
<div class="clear"></div>

		<p class="postfoot">
			posted on 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-10 16:31">2026-02-10 16:30</span>&nbsp;
<a href="https://www.cnblogs.com/CodingCat-jiumi">ctxIQä¸º0</a>&nbsp;
éè¯»(<span id="post_view_count">19</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19555666);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19555666', targetLink: 'https://www.cnblogs.com/CodingCat-jiumi/p/19555666', title: 'KMPæ¨¡å¼å¹éç®æ³ââè¯¦ç»è®²è§£ãæ¸æ°ææ' })">ä¸¾æ¥</a>

		</p>
	 ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ å¨ç½æç®åç OpenClaw é¨ç½²æç¨ï¼5 åéæ¥æä½ ç AI åå·¥ ]]></title>
    <link>https://www.cnblogs.com/yupi/p/19600386</link>
    <guid>057780cd5e559f5e1bb8d0d151b6a824</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/yupi/p/19600386" title="åå¸äº 2026-02-10 15:58">
    <span role="heading" aria-level="2">å¨ç½æç®åç OpenClaw é¨ç½²æç¨ï¼5 åéæ¥æä½ ç AI åå·¥</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/2225420/202602/2225420-20260210155738305-451805846.png" alt="å¨ç½æç®åç OpenClaw é¨ç½²æç¨ï¼5 åéæ¥æä½ ç AI åå·¥" class="desc_img">
        æè¿ OpenClawï¼ç± ClawdBot æ¹åï¼æ¯ççç«ï¼å®æ¯ä¸ä¸ªè½æä½çµèå¹²æ´»ç AI æ°å­åå·¥ãè½å¸®ä½ è¯»åæä»¶ãç¼åç¨åºãæ§è¡ä»»å¡ï¼7Ã24 å°æ¶ä¸ä¼æ¯ãèä¸ä½ éæ¶éå°æåºææºå°±è½ææ§å®ï¼è®©å®å¸®ä½ å¹²æ´»ã
æå¿«çãå»çå¼å®è£ OpenClaw çæ¹æ³è¿å°±æ¥äºï¼
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p class="md-end-block md-heading"><span class="md-plain md-expand"><span style="font-size: 14px">å¤§å®¶å¥½ï¼ææ¯ç¨åºåé±¼ç®ã</span></span></p>
<p class="md-end-block md-p"><span class="md-plain">æè¿ OpenClawï¼ç± ClawdBot æ¹åï¼æ¯ççç«ï¼<span class="md-pair-s "><strong>å®æ¯ä¸ä¸ªè½æä½çµèå¹²æ´»ç AI æ°å­åå·¥</strong><span class="md-plain">ãè½å¸®ä½ è¯»åæä»¶ãç¼åç¨åºãæ§è¡ä»»å¡ï¼7Ã24 å°æ¶ä¸ä¼æ¯ãèä¸ä½ éæ¶éå°æåºææºå°±è½ææ§å®ï¼è®©å®å¸®ä½ å¹²æ´»ã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209164642002.png"><img data-src="https://pic.yupi.icu/1/image-20260209164642002.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç½åä¹æ¯æ OpenClaw ç©åºè±æ¥äºï¼</span></p>
<ul class="ul-list" data-mark="-">
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">æäººè®©å®èªå¨æ¸çä¸ä¸å°é®ä»¶ï¼æ¶ä»¶ç®±ç´æ¥å¹²æ 45%ï¼çä¸å åä¸ªå°æ¶çæ´çæ¶é´</span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">æäººç¨å®æ¢æ¼å±ä¼é¨ç¥¨åæºç¥¨ï¼è®¾å¥½æ¡ä»¶è®©å®æ¯éå ç§å·ä¸æ¬¡ï¼å·å°å°±èªå¨ä¸å</span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">æäººèººå¨åºä¸ï¼éè¿ææºé¥æ§å®ææ´ä¸ªç½ç«éåäºä¸é</span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">è¿æäººè®©å®åæ¶è·å¤æ¡èªå¨åä»»å¡ï¼ä¸è¾¹ç¯çãä¸è¾¹åæ¥æ¥ãä¸è¾¹èªå¨åç¾¤æ¶æ¯</span></p>
</li>
</ul>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1769787147424-a18c9870-08a0-4540-aa64-a5730fde09d7-20260209164709778.png"><img data-src="https://pic.yupi.icu/1/1769787147424-a18c9870-08a0-4540-aa64-a5730fde09d7-20260209164709778.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">æ´ç¦»è°±çæ¯ï¼è¹æç Mac Miniï¼å°±æ¯é£ä¸ªå·´æå¤§çå°ä¸»æºï¼ç«ç¶å ä¸º OpenClaw <span class="md-pair-s "><strong>ç´æ¥åæ­è´§äº</strong><span class="md-plain">ï¼å ä¸ºå¾å¤äººæ³ä¹°ä¸å° 24 å°æ¶ä¸å³æºçå°çµèè· OpenClawï¼è®©å®å½èªå·±ç AI æå·¥äººã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1769787905203-6959e978-c81e-40dd-b86d-1043896faf20-20260209164722700.png"><img data-src="https://pic.yupi.icu/1/1769787905203-6959e978-c81e-40dd-b86d-1043896faf20-20260209164722700.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">è¿ç©æååºçæ¶åï¼å¥³æåå°±é®æï¼çèµ·æ¥å¥½åå®³åï¼ä½ è½å¸®æä¹æ´ä¸ä¸ªåï¼</span></p>
<p class="md-end-block md-p"><span class="md-plain">æææå´ï¼ä¸æ´ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">å¥¹ç»äºæä¸å·´æï¼æ´ä¸æ´ï¼</span></p>
<p class="md-end-block md-p"><span class="md-plain">æä¸è¸å§å±ï¼å«æ´å«æ´ï¼åç­ç­ï¼ä¸å®ä¼ææ´ç®åçå®è£æ¹æ³åºæ¥çã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209164815234.png"><img data-src="https://pic.yupi.icu/1/image-20260209164815234.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">æç¶ï¼æ²¡è®©æç­å¤ªä¹ï¼æå¿«çãå»çå¼å®è£ OpenClaw çæ¹æ³æ¥äºï¼</span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">æä¹å®è£ OpenClaw</span></h2>
<p class="md-end-block md-p"><span class="md-plain">å¾å¤äººä»¥ä¸ºæ³ç© OpenClaw å°±å¾ä¹°ä¸å°å®ä½çµè 24 å°æ¶å¼çãä½å¶å®å®å¨æ²¡å¿è¦ï¼<span class="md-pair-s "><strong>ä¸å°äºæå¡å¨å°±è½æå®</strong><span class="md-plain">ï¼èä¸æ´ç¨³å®ãä¸ææ­çµæ­ç½ãéæ¶éå°ç¨ææºå°±è½ææ¥å®å¹²æ´»ã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">å°±å¨ 2 æ 8 æ¥ï¼ç¾åº¦æºè½äºæ¨åºäº <span class="md-pair-s "><strong>OpenClaw æéç®æé¨ç½²æ¹æ¡</strong><span class="md-plain">ãåªæä½ å®å¨æ²¡æç¼ç¨åºç¡ï¼åªéè¦ç¹å ä¸é¼ æ ï¼å åéåå°±è½æ¥æèªå·±ç AI æ°å­åå·¥ãè¿æ¯æåç§ä¸»æµ AI å¤§æ¨¡åä¸é®åæ¢ï¼çè³è½ç´æ¥æ OpenClaw æ¥å¥ QQãé£ä¹¦ãééãä¼ä¸å¾®ä¿¡ï¼<span class="md-pair-s "><strong>å¨ææºä¸åæ¡æ¶æ¯å°±è½ææ¥ AI å¹²æ´»</strong><span class="md-plain">ã</span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209170321021.png"><img data-src="https://pic.yupi.icu/1/image-20260209170321021.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">æ¥ä¸æ¥æå¸¦å¤§å®¶å®æä¸ä¸ï¼å»ºè®®æ¶èå¤ç¨ â­ï¸ã</span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">æææé¨ç½² OpenClaw</span></h2>
<p class="md-end-block md-p"><span class="md-pair-s "><strong>1ï¼æä¸å°äºæå¡å¨</strong></span></p>
<p class="md-end-block md-p"><span class="md-plain">ä½ å¯ä»¥æäºæå¡å¨çè§£æ <span class="md-pair-s "><strong>ä¸å°æ¾å¨æºæ¿éççµè</strong><span class="md-plain">ï¼24 å°æ¶ä¸å³æºãä¸æ­ç½ï¼ä½ éæ¶éå°é½è½è¿ç¨è¿ä¸å»ç¨å®ã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">ååäº«ä¸ç§æç®åè·åæå¡å¨çæ¹æ³ï¼æå¼ç¾åº¦æºè½äºä¸º OpenClaw ç¹å¶çãæç®é¨ç½²é¡µé¢ãï¼åªé <span class="md-pair-s "><strong>0.01 å</strong><span class="md-plain">ï¼å°±è½æ¢è´­å°ä¸å° <span class="md-pair-s "><strong>2æ ¸4G4M</strong><span class="md-plain"> çè½»éåºç¨æå¡å¨ï¼åè´¹ä½éª 1 ä¸ªæã</span></span></span></span></span></p>
<blockquote>
<p class="md-end-block md-p"><span class="md-plain">æè·¯ï¼<span class="md-link md-pair-s"><a href="https://cloud.baidu.com/product/BCC/moltbot.html" rel="noopener nofollow">https://cloud.baidu.com/product/BCC/moltbot.html</a></span></span></p>
</blockquote>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209143722677.png"><img data-src="https://pic.yupi.icu/1/image-20260209143722677.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">è¿ä¸ªæ´»å¨æ¯æ¯å¤©ééçï¼æ°èç¨æ·é½è½åä¸ï¼æ²¡æ³å°æè¿æ°ä¸éï¼ç¾æ¯è¢«æèå°äºååï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209143544557.png"><img data-src="https://pic.yupi.icu/1/image-20260209143544557.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç¨ç­çå»ï¼æå¡å¨å°±åå§åå®æäºã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209143600373.png"><img data-src="https://pic.yupi.icu/1/image-20260209143600373.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç¹å»ãä¸é®é¨ç½²OpenClawãæé®ï¼å°±è½è·³è½¬å°æå¡å¨ç®¡çé¡µé¢ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">å¦æä½ æ²¡ææååä¸æ´»å¨ï¼ä¹ä¸è¦ç°å¿ï¼å¯ä»¥è¿å¥è½»éåºç¨æå¡å¨æ§å¶å°ï¼æå¨åå»ºä¸å°æå¡å¨ã</span></p>
<blockquote>
<p class="md-end-block md-p"><span class="md-plain">æè·¯ï¼<span class="md-link md-pair-s"><a href="https://console.bce.baidu.com/ls/#/ls/instance/create" rel="noopener nofollow">https://console.bce.baidu.com/ls/#/ls/instance/create</a></span></span></p>
</blockquote>
<p class="md-end-block md-p"><span class="md-plain">æ³¨æï¼éåä¸å®è¦éæ© <span class="md-pair-s "><strong>OpenClaw</strong><span class="md-plain"> åºç¨éåï¼å¥é¤éæ© <span class="md-pair-s "><strong>2 æ ¸ 4GB</strong><span class="md-plain"> å°±å¦¥å¦¥å¤ç¨äºã</span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209144440798.png"><img data-src="https://pic.yupi.icu/1/image-20260209144440798.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç»ç®ä¹åä¼èªå¨åå»ºæå¡å¨ï¼ç¶åè·åé¢ä¸æ ·ï¼è½å¤è¿å¥å°æå¡å¨ç®¡çé¡µé¢ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">åå°è¿ä¸æ­¥ï¼ç¸å½äºä½ å·²ç»è·å¾äºä¸ä½ âå³å°å¥èâ ç AI åå·¥ã</span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-pair-s "><strong>2ï¼ä¸é®å¼éç¸å³æå¡</strong></span></p>
<p class="md-end-block md-p"><span class="md-plain">å¨æå¡å¨ç®¡çé¡µé¢ä¸­ï¼ç¹å» <span class="md-pair-s "><strong>åºç¨ç®¡ç</strong><span class="md-plain"> Tabã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">é¡µé¢ä¼æç¤ºä½ éè¦å¼éåå¸å¤§æ¨¡åãäºå©æç­å ä¸ªæå¡ãä¸ç¨ä¸ä¸ªä¸ªå»æ¾ï¼ç´æ¥ç¹ <span class="md-pair-s "><strong>ä¸é®å¼é</strong><span class="md-plain">ï¼åæåè®®å°±æå®äºã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209144927875.png"><img data-src="https://pic.yupi.icu/1/image-20260209144927875.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-pair-s "><strong>3ï¼æ¾éé²ç«å¢ç«¯å£</strong></span></p>
<p class="md-end-block md-p"><span class="md-plain">å¦æä½ æ³è¦è®¿é®å·²ç»é¨ç½²ç OpenClaw ç½é¡µæ§å¶å°ï¼éè¦æ¾éæå¡å¨é²ç«å¢ç 18789 ç«¯å£ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ç¹å» <span class="md-pair-s "><strong>ä¸é®æ¾è¡</strong><span class="md-plain"> æé®å°±å¥½ï¼</span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209145239379.png"><img data-src="https://pic.yupi.icu/1/image-20260209145239379.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-pair-s "><strong>4ï¼éæ© AI æ¨¡å</strong></span></p>
<p class="md-end-block md-p"><span class="md-plain">æ¥ä¸æ¥ï¼ä¸ºä½ ç AI åå·¥æä¾ä¸ä¸ªèªæçå¤§èå§~</span></p>
<p class="md-end-block md-p"><span class="md-plain">å¯ä»¥ç´æ¥å¨é¡µé¢ä¸æéæ©ä½ æ³è¦çæ¨¡åï¼å½äº§çä¸»æµå¤§æ¨¡ååºæ¬é½æ¯æï¼æ¯å¦ DeepSeekï¼ï¼éå®ç¹å» <span class="md-pair-s "><strong>åºç¨</strong><span class="md-plain"> å°±è¡ã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209145623840.png"><img data-src="https://pic.yupi.icu/1/image-20260209145623840.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç³»ç»ä¼èªå¨å¸®ä½ åå»ºè°ç¨å¤§æ¨¡åç API å¯é¥ï¼å¹¶ä¸æéç½®å¨é¨æå®ã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209145857028.png"><img data-src="https://pic.yupi.icu/1/image-20260209145857028.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç­æ§è¡æåï¼ä½ ç OpenClaw å°±å¯ä»¥æ­£å¸¸ä½¿ç¨äºã</span></p>
<p class="md-end-block md-p"><span class="md-plain">åå°è¿éï¼æ­åï¼ä½ ç AI æ°å­åå·¥å·²ç»æ­£å¼å¥èï¼</span></p>
<p class="md-end-block md-p"><span class="md-plain">ååå èµ·æ¥ä¹å°±å åéï¼èä¸æ´ä¸ªè¿ç¨éå¸¸å»çå¼ãå¹³å°ççæ¯å¾ç§é¡¾å°ç½äºï¼çæå¤æä½ä¸æ­¥å°±æç¨æ·åéæã</span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-pair-s "><strong>5ï¼è·ä½ ç AI åå·¥èèå¤©</strong></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç¹å»é¡µé¢ä¸æ¹ç <span class="md-pair-s "><strong>è·åç½ç«å°å</strong><span class="md-plain">ï¼</span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209150158108.png"><img data-src="https://pic.yupi.icu/1/image-20260209150158108.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç¶åæå¼é¾æ¥è¿å¥ OpenClaw ç½é¡µç«¯ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209150316824.png"><img data-src="https://pic.yupi.icu/1/image-20260209150316824.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç°å¨ä½ å°±å¯ä»¥ç´æ¥å¨ç½é¡µä¸è· OpenClaw å¯¹è¯äºï¼æ¯å¦åç»ä»åä¸ªåå­å§ï¼æè¿éå«ä»ä¸ºãé±¼ç®çå¤©èãï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209150631021.png"><img data-src="https://pic.yupi.icu/1/image-20260209150631021.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">å¯ä»¥çå°ï¼AI èªå¨æ´æ°äºèªå·±çèº«ä»½ï¼å¹¶ä¸ä¼ä¸ç´ä¿çè¿æ®µè®°å¿ãä¹åï¼ä½ å¯ä»¥éè¿ä¸æ­å°å¯¹è¯æ¥è®­ç» AIï¼è®©ä»æä¸ºä½ æå¾åçå©æã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ä¸è¿è¯è¯´åæ¥ï¼æ»ä¸è½æ¯æ¬¡æ³æ¾ AI å¸®å¿é½è·å»å¼çµèãæå¼æµè§å¨è®¿é®ç½é¡µå§ï¼é£ä¹å¤ªéº»ç¦äºã</span></p>
<p class="md-end-block md-p"><span class="md-plain">æä¹è½éæ¶èç³»å°æç AI åå·¥å¢ï¼</span></p>
<p class="md-end-block md-p"><span class="md-plain">ç­æ¡å½ç¶æ¯ï¼<span class="md-pair-s "><strong>éè¿ææºç» AI åå·¥åæ¶æ¯</strong><span class="md-plain">ã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">å ä¹ææèå¤©è½¯ä»¶é½è½æ¥å OpenClaw è¿ä½ AI åå·¥ï¼æ¯å¦ QQãä¼ä¸å¾®ä¿¡ãééãé£ä¹¦ç­ç­ãä¸é¢æå°±ä»¥æ´éåä¸ªäººç¨æ·ç QQ ä¸ºä¾ï¼ç»å¤§å®¶æ¼ç¤ºå¦ä½å¨ææºä¸é¥æ§ AI å¹²æ´»ã</span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">å¨ææº QQ ä¸é¥æ§ AI å¹²æ´»</span></h2>
<p class="md-end-block md-p"><span class="md-plain">å¦æä½ ä½¿ç¨ç¾åº¦æºè½äºå®è£ OpenClawï¼é£ä¹æ¥å¥ QQ å°±éå¸¸ç®åäºï¼å æ­¥å°±æå®ã</span></p>
<p class="md-end-block md-p"><span class="md-pair-s "><strong>1ï¼åå»º QQ æºå¨äºº</strong></span></p>
<p class="md-end-block md-p"><span class="md-plain">æå¼ <span class="md-meta-i-c  md-link"><a href="https://q.qq.com/" rel="noopener nofollow"><span class="md-plain">QQ å¼æ¾å¹³å°</span></a><span class="md-plain">ï¼æ³¨åå¹¶ç»å½ï¼</span></span></span></p>
<blockquote>
<p class="md-end-block md-p"><span class="md-plain">æè·¯ï¼<span class="md-link md-pair-s"><a href="https://q.qq.com/" rel="noopener nofollow">https://q.qq.com</a></span></span></p>
</blockquote>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209151938145.png"><img data-src="https://pic.yupi.icu/1/image-20260209151938145.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç»å½æååï¼ç¹å» âæºå¨äººâ Tabï¼åå»ºä¸ä¸ªæ°çæºå¨äººï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209152043823.png"><img data-src="https://pic.yupi.icu/1/image-20260209152043823.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç»ä½ çæºå¨äººè®¾ç½®ä¸ä¸ªç±ç§°åå¯ç±çå¤´åå§ï¼ä¾¿äºä¹åå¨ QQ ä¸­æ¾å°ä»ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209152207016.png"><img data-src="https://pic.yupi.icu/1/image-20260209152207016.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-pair-s "><strong>2ï¼è®¾ç½®æºå¨äºº</strong></span></p>
<p class="md-end-block md-p"><span class="md-plain">åå»ºå®æåï¼è¿å¥æºå¨äººçå¼åç®¡çé¡µé¢ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209152253262.png"><img data-src="https://pic.yupi.icu/1/image-20260209152253262.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">æ¾å° <span class="md-pair-s "><strong>AppID</strong><span class="md-plain"> å <span class="md-pair-s "><strong>AppSecret</strong><span class="md-plain">ï¼å¤å¶ä¿å­å¥½ï¼ç­ä¼è¦ç¨ã</span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209152347726.png"><img data-src="https://pic.yupi.icu/1/image-20260209152347726.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">è¿è¦æä½ äºæå¡å¨ç <span class="md-pair-s "><strong>å¬ç½ IP</strong><span class="md-plain"> æ·»å å° IP ç½ååéï¼ç¶åä¿å­ã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209152537553.png"><img data-src="https://pic.yupi.icu/1/image-20260209152537553.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">äºæå¡å¨çå¬ç½ IP å¨ç¾åº¦æºè½äºçæå¡å¨ç®¡çé¡µé¢å°±è½çå°ï¼æ³¨æä¸è¦æ´é²ç»å«äººå¦ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209152435791.png"><img data-src="https://pic.yupi.icu/1/image-20260209152435791.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-pair-s "><strong>3ï¼å¡«åæ¶æ¯å¹³å°éç½®</strong></span></p>
<p class="md-end-block md-p"><span class="md-plain">å¨ç¾åº¦æºè½äºçæå¡å¨ç®¡çé¡µé¢ï¼æ¾å° <span class="md-pair-s "><strong>æ¶æ¯å¹³å°éç½®</strong><span class="md-plain">ï¼ä¸æéæ© <span class="md-pair-s "><strong>QQ</strong><span class="md-plain">ï¼æåæç AppID å AppSecret å¡«è¿å»ï¼ç¹ <span class="md-pair-s "><strong>åºç¨</strong><span class="md-plain">ï¼ç­å®æ§è¡å®å°±å¥½äºã</span></span></span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209152729389.png"><img data-src="https://pic.yupi.icu/1/image-20260209152729389.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-pair-s "><strong>4ï¼æ·»å è®¿é®æºå¨äººçæé</strong></span></p>
<p class="md-end-block md-p"><span class="md-plain">åå° QQ å¼æ¾å¹³å°ï¼å¨æ²ç®±éç½®éç»ä½ ç QQ è´¦å·ï¼æè QQ ç¾¤ï¼æ·»å è®¿é®æºå¨äººçæéï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209152928094.png"><img data-src="https://pic.yupi.icu/1/image-20260209152928094.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç¶åç¨ QQ æ«ç æ·»å æºå¨äººå°±è¡äºï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209153102382.png"><img data-src="https://pic.yupi.icu/1/image-20260209153102382.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç°å¨ï¼ä½ å¯ä»¥ç´æ¥å¨ QQ ä¸è·ä½ ç AI æ°å­åå·¥èå¤©äºï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209153537993.png"><img data-src="https://pic.yupi.icu/1/image-20260209153537993.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ä¹åï¼ä½ åªéè¦èººå¨åºä¸æå¼ QQï¼å°±è½ææ¥è¿ç¨æå¡å¨ä¸ç AI å¹²æ´»ï¼å·´éå¾æ¿~</span></p>
<p class="md-end-block md-p"><span class="md-plain">é¤äº QQï¼OpenClaw è¿æ¯ææ¥å¥é£ä¹¦ãééãä¼ä¸å¾®ä¿¡ï¼éç½®æ¹å¼é½å·®ä¸å¤ï¼æéè¦çåå­¦å¯ä»¥çå®æ¹æç¨ï¼</span></p>
<ul class="ul-list" data-mark="-">
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">OpenClaw æ¥å¥ééï¼<span class="md-link md-pair-s"><a href="https://cloud.baidu.com/doc/LS/s/wml9dlyfu" rel="noopener nofollow">https://cloud.baidu.com/doc/LS/s/wml9dlyfu</a></span></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">OpenClaw æ¥å¥é£ä¹¦ï¼<span class="md-link md-pair-s"><a href="https://cloud.baidu.com/doc/LS/s/2ml9dnf3j" rel="noopener nofollow">https://cloud.baidu.com/doc/LS/s/2ml9dnf3j</a></span></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">OpenClaw æ¥å¥ä¼ä¸å¾®ä¿¡ï¼<span class="md-link md-pair-s"><a href="https://cloud.baidu.com/doc/LS/s/Nml9dk84r" rel="noopener nofollow">https://cloud.baidu.com/doc/LS/s/Nml9dk84r</a></span></span></p>
</li>
</ul>
<p class="md-end-block md-p"><span class="md-plain">ä¸è¿å«å¯¹ä»æå¤ªé«çè¦æ±ï¼ä½ è¦æ¯ç°å¨å°±ç»ä»å¤æçä»»å¡ï¼å¯è½å®ä¼ âé¿å·´é¿å·´âï¼èµåæºéã</span></p>
<p class="md-end-block md-p"><span class="md-plain">æ¯å¦æé®ä»ä¸ä¸ªéå¸¸ç®åçé®é¢ï¼ä»ç«ç¶åç»ææ¥äºä¸ªéï¼ç¶åè¯´èªå·±æ²¡æèç½æç´¢åè½ï¼ï¼ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/30d2456023e115b5aa37b5d0c34274fe.jpg"><img data-src="https://pic.yupi.icu/1/30d2456023e115b5aa37b5d0c34274fe.jpg" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">è¦æ³è®© AI åå¾æ´å¼ºï¼å°±éè¦ç¨å° Skills äºã</span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">ç»ä½ ç AI åå·¥è£æè½å</span></h2>
<p class="md-end-block md-p"><span class="md-plain">Skills çå¨ç§°æ¯ Agent Skillsï¼ä¹å¨ AI åå¿ç«å¾ä¸å¡ç³æ¶ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ç®åæ¥è¯´ï¼å®å°±æ¯ç» AI è£å¤çæè½åï¼éé¢æç²¾å¿è®¾è®¡çæç¤ºè¯ãä»£ç èæ¬ãè¿æåç§èµæºæä»¶ï¼è®© AI è½å¨ç¹å®ä»»å¡ä¸è¡¨ç°å¾æ´ä¸ä¸ãæ¯å¦ä½ ç» AI è£ä¸ª PPT å¶ä½ Skillsï¼ä»å°±ä¼å PPT äºã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ä½ å¯ä»¥éè¿ç» OpenClaw å®è£æè½åï¼æ¥å¢å¼ºä»çè½åã</span></p>
<p class="md-end-block md-p"><span class="md-pair-s "><strong>æä¹è·ååå®è£æè½å¢ï¼</strong></span></p>
<p class="md-end-block md-p"><span class="md-plain">å¦æä½ ä½¿ç¨ç¾åº¦æºè½äºå®è£ OpenClawï¼å®è£æè½å°±éå¸¸ç®åäºã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ç¾åº¦åå¸æè¿æèªå®¶ç AI è½åæåæäº Skillï¼å¹¶ä¸ä¸æ¶å°äº OpenClaw çæè½ååº <span class="md-meta-i-c  md-link"><a href="https://clawhub.ai/skills" rel="noopener nofollow"><span class="md-plain">ClawHub</span></a><span class="md-plain">ï¼ç®åä¸å±æ 6 æ¬¾å®æ¹ Skillãåæ¬ç¾åº¦æç´¢ãç¾åº¦ç¾ç§ãå­¦æ¯æ£ç´¢ãAI ç»æ¬çæãæºè½ PPT çæãåå¸æ·±åº¦ç ç©¶ Agentã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç´æ¥è¿å¥å°æå¡å¨ç®¡çé¡µé¢ç Skills éç½®ï¼å°±è½å»çå¼æç´¢åå®è£æè½äºï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209154028274.png"><img data-src="https://pic.yupi.icu/1/image-20260209154028274.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">æ¯å¦æå®è£äºç¾åº¦æç´¢åç¾åº¦ç¾ç§ Skillsï¼è¿ä¸¤åé½æ¯ç¾åº¦çç¹é¿ï¼éåç¨æ¥æç´¢å½åçä¿¡æ¯æºã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209154152546.png"><img data-src="https://pic.yupi.icu/1/image-20260209154152546.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">æ·»å  Skills å®æåï¼è¿å¥å° OpenClaw ç®¡çé¡µé¢ç Skills éç½®ä¸­ï¼å¯ä»¥çå°æè½å®è£æåï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209160408078.png"><img data-src="https://pic.yupi.icu/1/image-20260209160408078.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç¶åæè®©ãé±¼ç®çå¤©èãå¸®ææç´¢ âç¨åºåé±¼ç®âï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/8a535406f294c23379ee79b0a703b645.jpg"><img data-src="https://pic.yupi.icu/1/8a535406f294c23379ee79b0a703b645.jpg" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">è¿æ¬¡çç»æé è°±å¤äºï¼å¨ OpenClaw ç½é¡µå¯¹è¯æ¡ä¸­ï¼å¯ä»¥çå° AI è°ç¨äºç¾åº¦æç´¢æè½ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209160023370.png"><img data-src="https://pic.yupi.icu/1/image-20260209160023370.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">é¤äºä¸è¿°å®è£æè½çæ¹å¼å¤ï¼ä½ è¿å¯ä»¥ç»å½æå¡å¨ï¼è¾å¥ä¸è¡å½ä»¤æ¥æå¨å®è£æè½ï¼</span></p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span>npx clawhub@latest install [skillåç§°]</span></pre>
<p class="md-end-block md-p"><span class="md-plain">ä¸è¿æä¼°è®¡éç¨åºåæåä»¬æ¯ä¸ç¥éæä¹æä½æå¡å¨çï¼å®å¨æ²¡å³ç³»ï¼æ¯ç«ç°å¨å·²ç»æ¯ AI æ¶ä»£äºï¼å¹²åè¿èªå·±å¨ææä½æå¡å¨ï¼ç´æ¥è®© AI èªå·±è£ä¸å°±å®äºï¼</span></p>
<p class="md-end-block md-p"><span class="md-plain">æè· OpenClaw è¯´äºå¥ï¼</span></p>
<blockquote>
<p class="md-end-block md-p"><span class="md-plain">å¸®æå®è£ç¼ç¨å¨ç»å¶ä½æè½</span></p>
</blockquote>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209160913210.png"><img data-src="https://pic.yupi.icu/1/image-20260209160913210.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">å®ä¸å¼å§å¯è½ä¼æç»æèä¸å¤ªçè§£ï¼æ²¡å³ç³»ï¼ç¨å¾®å¼å¯¼ä¸ä¸å°±è¡ï¼</span></p>
<blockquote>
<p class="md-end-block md-p"><span class="md-plain">æå°±è¦ä½ æ¥æä½æå¡å¨å¸®æå®è£</span></p>
</blockquote>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209161210072.png"><img data-src="https://pic.yupi.icu/1/image-20260209161210072.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">è¿æ¬¡ï¼ä»æåå®æäºä»»å¡ãè®© AI èªå·±ç»èªå·±è£æè½ï¼ææ¯ AI æ¶ä»£è¯¥æçæä½æ¹å¼ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">å¦æä½ æ³æ¢ç´¢æ´å¤æè½ï¼å¯ä»¥å» <span class="md-meta-i-c  md-link"><a href="https://clawhub.ai/skills" rel="noopener nofollow"><span class="md-plain">ClawHub</span></a><span class="md-plain"> éä¸éã</span></span></span></p>
<blockquote>
<p class="md-end-block md-p"><span class="md-plain">æè·¯ï¼<span class="md-link md-pair-s"><a href="https://clawhub.ai/" rel="noopener nofollow">https://clawhub.ai</a></span></span></p>
</blockquote>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209173015903.png"><img data-src="https://pic.yupi.icu/1/image-20260209173015903.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ä¸è¿é±¼ç®å»ºè®®å¤§å®¶è°¨æå®è£ Skillsï¼éå¿è¦ä¸å®è£ãéå®æ¹ä¸å®è£ï¼æ¯ç« Skills æ¯äººä¸ºå¶ä½çï¼å¯è½ä¼å­å¨å®å¨éæ£ã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/c1eca273aeeaf86ff3d2a0e7daa55459.png"><img data-src="https://pic.yupi.icu/1/c1eca273aeeaf86ff3d2a0e7daa55459.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">æäº OpenClaw è½å¹²å¥</span></h2>
<p class="md-end-block md-p"><span class="md-plain">æä¼°è®¡å¾å¤åå­¦æ­å»ºå® OpenClaw å¯è½å°±æé£å¿äºï¼æèä¸ç¥é OpenClaw å°åºè½åäºä»ä¹ãæä»¥æè¿éåäº«å ä¸ªæ¯è¾å®ç¨çç©æ³ï¼å¤§å®¶å¯ä»¥ç´æ¥æä½ä¸ã</span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h3 class="md-end-block md-heading"><span class="md-plain">1ãAI å¸®ä½ è¿½ç­ç¹</span></h3>
<p class="md-end-block md-p"><span class="md-plain">æå¨ QQ ä¸è· OpenClaw è¯´äºä¸å¥ï¼å¸®æè·å AI ç¸å³çèµè®¯ç­ç¹ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">è¿äºä¸ä¼å¿ï¼å®åäºæä¸ä»½æ´æ´é½é½çç­ç¹æè¦ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/ce2501ffae6c213e1b07f570ac32464b.jpg"><img data-src="https://pic.yupi.icu/1/ce2501ffae6c213e1b07f570ac32464b.jpg" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ä»¥åæå¯è½è¦å°ç½ä¸å·å·æ°é»ï¼ç°å¨åæ¡æ¶æ¯å°±æå®äº~</span></p>
<p class="md-end-block md-p"><span class="md-plain">å¦æéè¦çè¯ï¼ä½ è¿å¯ä»¥è®©å®è·ä¸ªå®æ¶ä»»å¡ï¼æ¯å¦è®¾å® âæ¯å¤©æ©ä¸ 8 ç¹å¸®ææä¸ä¸ OpenClaw ç¤¾åºææ²¡ææ°çç©æ³âï¼å®å°±é»é»å¸®ä½ ç¯çï¼ææ¶æ¯ç¬¬ä¸æ¶é´æ¨ç»ä½ ã</span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h3 class="md-end-block md-heading"><span class="md-plain">2ãçµæè®°å½å¨</span></h3>
<p class="md-end-block md-p"><span class="md-plain">ææ¶èµ°å¨è·¯ä¸ï¼æå¯è½ä¼çªç¶æä¸äºå¥½çæ³æ³ãæèçªç¶æ³èµ·äºæä»¶äºæï¼ä¸ºäºé²æ­¢å¿è®°ï¼å°±ä¼æå¼ææºå¤å¿å½è®°ä¸æ¥ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ä¹èä¹ä¹ï¼è®°çåå®¹è¶æ¥è¶å¤ï¼å¯¼è´å¾å¤è®°ä¸æ¥çåå®¹ä¹è¢«å¿½ç¥äºã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ç°å¨ï¼æå¯ä»¥ç´æ¥æ OpenClaw å½åæ¯æçè¶çº§å¤å¿å½ï¼åç» AI è®¾å®ä¸ä¸ªè§è²ï¼æ¯å¦åè¯å® âä½ æ¯ä¸ä¸ªçµæè®°å½å¨âï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209180148160.png"><img data-src="https://pic.yupi.icu/1/image-20260209180148160.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ä¹åæä»»ä½æå¿è®°çæ³æ³æäºæï¼ç´æ¥æåºææºå¨ QQ ä¸è· AI è¯´ä¸å¥å°±è¡äºã</span></p>
<p class="md-end-block md-p"><span class="md-plain">OpenClaw è·æ®éå¤å¿å½ä¸ä¸æ ·ï¼å®ä¸åªæ¯å¸®ä½ è®°ï¼è¿ä¼å¸®ä½ ä¿®æ­£éå«å­ååç±»æ´çï¼èä¸æ°¸è¿ä¸ä¼å¿äºï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209180446618.png"><img data-src="https://pic.yupi.icu/1/image-20260209180446618.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h3 class="md-end-block md-heading"><span class="md-plain">3ãéèº«æºå¸¦çè¶çº§ç¨åºå</span></h3>
<p class="md-end-block md-p"><span class="md-plain">è¿åºè¯¥æ¯æè®©ç¨åºåæåä»¬å´å¥çåºæ¯äºã</span></p>
<p class="md-end-block md-p"><span class="md-plain">å ä¸º OpenClaw æ¯è·å¨æå¡å¨ä¸çï¼å®è½ç´æ¥å¨æå¡å¨ä¸åä»£ç ãè¿è¡ç¨åºãé¨ç½²æå¡ï¼åå®ä½ å°±è½ç´æ¥ç¨ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">æ¯å¦æå¨åå°éçæ¶åï¼ç´æ¥æåºææºï¼å¨ QQ ä¸è· OpenClaw è¯´ä¸å¥ï¼</span></p>
<blockquote>
<p class="md-end-block md-p"><span class="md-plain">å¸®æåä¸ä¸ªç½é¡µå°å·¥å·ï¼è½ä¸ä¼ å¾çåæ¹éåç¼©ï¼æ¯æè°æ´åç¼©è´¨éï¼åå®ç´æ¥é¨ç½²å°æå¡å¨ä¸è®©æè½è®¿é®ã</span></p>
</blockquote>
<p class="md-end-block md-p"><span class="md-plain">è¿äºå åéï¼AI åå¤æï¼å·¥å·åå¥½äºï¼å·²ç»é¨ç½²ä¸çº¿ï¼ç´æ¥è®¿é® XX å°åå°±è½ç¨ã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209183510372.png"><img data-src="https://pic.yupi.icu/1/image-20260209183510372.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">æ²¡éï¼å°±åäºæ¡æ¶æ¯ï¼ä¸ä¸ªè½ç¨çå¨çº¿å·¥å·å°±åºæ¥äºï¼è·åé­æ¯ä¼¼çã</span></p>
<blockquote>
<p class="md-end-block md-p"><span class="md-plain">æ³¨æï¼å¦ææ æ³è®¿é®ï¼å¯è½æ¯å ä¸ºæ²¡æç»æå¡å¨çé²ç«å¢å¼æ¾å¯¹åºç«¯å£ã</span></p>
</blockquote>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209183750274.png"><img data-src="https://pic.yupi.icu/1/image-20260209183750274.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ä¹åä½ æäºä»»ä½çµæï¼çè³é½ä¸éè¦æåºçµèï¼å¨ç¨éè¿ææºè· AI å¯¹è¯ï¼å°±è½åé åºå¯è¿è¡çé¡¹ç®ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">è¿ç§æè§ï¼æä¹è¯´å¢ï¼æç¹é¢éä¾ åå³å¿äºã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209182902058.png"><img data-src="https://pic.yupi.icu/1/image-20260209182902058.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">æå</span></h2>
<p class="md-end-block md-p"><span class="md-plain">çå°è¿éï¼ç¸ä¿¡å¤§å®¶å·²ç»è½æåå°ï¼<span class="md-pair-s "><strong>OpenClaw çä¸æé¨æ§å·²ç»è¢«ç ¸å°å°æ¿ä¸äº</strong><span class="md-plain">ã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">åªè¦è±å åéï¼å°±è½æ¥æç§äººç AI æ°å­åå·¥ï¼ä¹åä½ å¨ææºä¸åæ¡ QQ æ¶æ¯ï¼å°±è½è®© AI å¸®ä½ æä¿¡æ¯ãç®¡æä»¶ãåä»£ç ãåè°ç ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ä¸ç®¡ä½ æ¯ç¨åºåãå­¦çãè¿æ¯æ®éä¸ç­æï¼æé½å»ºè®®ä½ å»è¯è¯ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">æååè´´ä¸ä¸å®æ¹çé¨ç½²æç¨ï¼ç¹å»éè¯»åæå¯ä»¥ç´æ¥è·³è½¬ã</span></p>
<blockquote>
<p class="md-end-block md-p"><span class="md-plain">æä½æåï¼<span class="md-link md-pair-s"><a href="https://cloud.baidu.com/doc/LS/s/6ml9f3cvl" rel="noopener nofollow">https://cloud.baidu.com/doc/LS/s/6ml9f3cvl</a></span></span></p>
</blockquote>
<p class="md-end-block md-p"><span class="md-plain">ä¹æ¬¢è¿å¤§å®¶å¤å¤åäº«ä½ ç OpenClaw ç©æ³ï¼è¯è®ºåºè§~</span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">æ´å¤ç¼ç¨å­¦ä¹ èµæº</span></h2>
<ul class="ul-list" data-mark="-">
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/course" rel="noopener nofollow"><span class="md-plain">Javaåç«¯ç¨åºåå¿åé¡¹ç®å®ææç¨+æ¯è®¾ç½ç«</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/" rel="noopener nofollow"><span class="md-plain">ç¨åºååè´¹ç¼ç¨å­¦ä¹ äº¤æµç¤¾åºï¼èªå­¦å¿å¤ï¼</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/course/cv" rel="noopener nofollow"><span class="md-plain">ç¨åºåä¿å§çº§æ±èåç®åæåï¼æ¾å·¥ä½å¿å¤ï¼</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.mianshiya.com/" rel="noopener nofollow"><span class="md-plain">ç¨åºååè´¹é¢è¯å·é¢ç½ç«å·¥å·ï¼æ¾å·¥ä½å¿å¤ï¼</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640584449888772098" rel="noopener nofollow"><span class="md-plain">ææ°Javaé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + Javaæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640586673306091521" rel="noopener nofollow"><span class="md-plain">ææ°Pythoné¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + Pythonæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640586014108303362" rel="noopener nofollow"><span class="md-plain">ææ°åç«¯é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + åç«¯æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640586867363954689" rel="noopener nofollow"><span class="md-plain">ææ°æ°æ®ç»æåç®æ³é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + ç®æ³æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1644279832026075138" rel="noopener nofollow"><span class="md-plain">ææ°C++é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ãC++æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1641797333479903234" rel="noopener nofollow"><span class="md-plain">ææ°æ°æ®åºé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + æ°æ®åºæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640589994284695553" rel="noopener nofollow"><span class="md-plain">ææ°Redisé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + Redisæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1641035880439271426" rel="noopener nofollow"><span class="md-plain">ææ°è®¡ç®æºåºç¡å¥é¨å­¦ä¹ è·¯çº¿ + è®¡ç®æºåºç¡æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1641366118197153793" rel="noopener nofollow"><span class="md-plain">ææ°å°ç¨åºå¥é¨å­¦ä¹ è·¯çº¿ + å°ç¨åºå¼åæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="http://sqlmother.yupi.icu/" rel="noopener nofollow"><span class="md-plain">ææ°SQLé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + SQLæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640586295529324545" rel="noopener nofollow"><span class="md-plain">ææ°Linuxé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + Linuxæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640588753362108417" rel="noopener nofollow"><span class="md-plain">ææ°Git/GitHubé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + Gitæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640587909942099969" rel="noopener nofollow"><span class="md-plain">ææ°æä½ç³»ç»é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + æä½ç³»ç»æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640588119619551233" rel="noopener nofollow"><span class="md-plain">ææ°è®¡ç®æºç½ç»é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + è®¡ç®æºç½ç»æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640588392073150465" rel="noopener nofollow"><span class="md-plain">ææ°è®¾è®¡æ¨¡å¼é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + è®¾è®¡æ¨¡å¼æç¨</span></a></span></p>
</li>
<li class="md-list-item md-focus-container">
<p class="md-end-block md-p md-focus"><span class="md-meta-i-c md-link md-expand"><a href="https://www.code-nav.cn/post/1640648711119892481" rel="noopener nofollow"><span class="md-plain">ææ°è½¯ä»¶å·¥ç¨é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + è½¯ä»¶å·¥ç¨æç¨</span></a></span></p>
</li>
</ul>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-10 15:58">2026-02-10 15:58</span>&nbsp;
<a href="https://www.cnblogs.com/yupi">ç¨åºåé±¼ç®</a>&nbsp;
éè¯»(<span id="post_view_count">217</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19600386);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19600386', targetLink: 'https://www.cnblogs.com/yupi/p/19600386', title: 'å¨ç½æç®åç OpenClaw é¨ç½²æç¨ï¼5 åéæ¥æä½ ç AI åå·¥' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Oracle ADGç¯å¢VIPé«å¯ç¨é¨ç½²å®æ ]]></title>
    <link>https://www.cnblogs.com/liuziyi1/p/19599671</link>
    <guid>00d0f51570699c04d4b2940db8708a70</guid>
    <description>
    <![CDATA[ 
		<h2>
			<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/liuziyi1/p/19599671" title="åå¸äº 2026-02-10 14:33">
    <span role="heading" aria-level="2">Oracle ADGç¯å¢VIPé«å¯ç¨é¨ç½²å®æ</span>
    

</a>

		</h2>
		<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>å¨Oracle ADGé«å¯ç¨æ¶æä¸­ï¼éç½®èæIPï¼VIPï¼æ¯æ ¸å¿ä¼åææ®µä¹ä¸ï¼å¶æ ¸å¿ç®çæ¯å®ç°ADGä¸»å¤åæ¢åï¼ä¸å¡åºç¨æ éä¿®æ¹æ°æ®æºIPï¼å¤§å¹éä½ä¸å¡ä¸­æ­æ¶é¿ï¼è¿ä¸è®¾è®¡æè·¯åæ ·éç¨äºå¶ä»æ°æ®åºçHAæ¶æãæ¬æ¬¡å®æå´ç»Oracle ADGä¸»å¤èç¹å®æVIPèªå¨åæ¢èæ¬é¨ç½²ï¼åæ¶è§£å³äºèæ¬è¿è¡ä¸­suæä½æ¥å¿æç»­åå¥/var/log/messageså¯¼è´æ¥å¿æ éè¨èçé®é¢ï¼<strong>ç¸åç½å¡éç½®çä¸»å¤ä¸¤å°æå¡å¨ï¼èæ¬é¨ç½²ä¸è¿è¡éç½®å®å¨ä¸è´</strong>ï¼ä»¥ä¸ä¸ºè¯¦ç»å®ææ­¥éª¤ã</p>
<h2 id="ä¸ç¯å¢æ£æ¥ç¡®è®¤å¬ç½ä¸å¡ç½å¡">ä¸ãç¯å¢æ£æ¥ï¼ç¡®è®¤å¬ç½ä¸å¡ç½å¡</h2>
<p>æ¬æ¬¡å®æä¸­ä¸å¡å¬ç½ç½å¡ä¸ºens33ï¼éè¿<code>ip a</code>å½ä»¤æ£æ¥ç½å¡ä¿¡æ¯ï¼ç¡®è®¤ç½å¡ç¶æååæIPéç½®ï¼ä¸ºåç»­VIPç»å®ååå¤ã</p>
<pre><code class="language-bash">[root@euler01 etc]# ip a
# å³é®è¾åºï¼ens33ç½å¡UPç¶æï¼ç»å®ç©çIP 192.168.X.X/24
</code></pre>
<h2 id="äºvipèªå¨åæ¢èæ¬é¨ç½²">äºãVIPèªå¨åæ¢èæ¬é¨ç½²</h2>
<p>æ¬æ¬¡é¨ç½²åå«ä¸¤ä¸ªæ ¸å¿èæ¬ï¼<code>vip_check.sh</code>ä¸ºå¿è·³æ£æµèæ¬ï¼å®ç°å®æ¶è°ç¨æ ¸å¿èæ¬ï¼<code>vip_dg.sh</code>ä¸ºæ ¸å¿é»è¾èæ¬ï¼æ ¹æ®æ°æ®åºOPEN_MODEç¶æèªå¨ç»å®/å¸è½½VIPï¼åæ¶éç½®èæ¬éç³»ç»èªå¯å¨ï¼ç¡®ä¿æå¡å¨éå¯åVIPé«å¯ç¨åè½æ­£å¸¸ã</p>
<h3 id="21-éç½®ç³»ç»èªå¯å¨">2.1 éç½®ç³»ç»èªå¯å¨</h3>
<p>ä¿®æ¹<code>/etc/rc.local</code>æ·»å èæ¬å¯å¨å½ä»¤ï¼åæ¶èµäºrc.localå¯æ§è¡æéï¼ä¿è¯ç³»ç»å¯å¨æ¶èªå¨è¿è¡VIPæ£æµèæ¬ã</p>
<pre><code class="language-bash"># ç¼è¾èªå¯å¨æä»¶ï¼æ·»å èæ¬åå°è¿è¡å½ä»¤
[root@euler01 etc]# cat /etc/rc.local
æ·»å ï¼/etc/vip_check.sh &gt; /dev/null 2&gt;&amp;1 &amp;

# èµäºå¯æ§è¡æé
[root@euler01 etc]# chmod +x /etc/rc.d/rc.local
[root@euler01 etc]# ll /etc/rc.d/rc.local
-rwxr-xr-x. 1 root root 510 Dec 2 09:48 /etc/rc.d/rc.local
</code></pre>
<h3 id="22-ç¼åå¿è·³æ£æµèæ¬vip_checksh">2.2 ç¼åå¿è·³æ£æµèæ¬ï¼vip_check.sh</h3>
<p>è¯¥èæ¬ä¸ºæ­»å¾ªç¯å®æ¶èæ¬ï¼æ¯3ç§è°ç¨ä¸æ¬¡æ ¸å¿èæ¬<code>vip_dg.sh</code>ï¼å®ç°VIPç¶æçå®æ¶æ£æµï¼èæ¬å­æ¾è·¯å¾<code>/etc/vip_check.sh</code>ã</p>
<pre><code class="language-bash">[root@euler01 etc]# cat /etc/vip_check.sh
#!/bin/bash
step=3
while true; do
    /etc/vip_dg.sh &gt; /dev/null 2&gt;&amp;1
    sleep $step
done
</code></pre>
<h3 id="23-ç¼åæ ¸å¿é»è¾èæ¬vip_dgsh">2.3 ç¼åæ ¸å¿é»è¾èæ¬ï¼vip_dg.sh</h3>
<p>è¯¥èæ¬ä¸ºVIPåæ¢æ ¸å¿é»è¾ï¼éè¿æ¥è¯¢Oracleæ°æ®åº<code>v$database</code>è§å¾ç<code>open_mode</code>å¤æ­ä¸»å¤ç¶æï¼ä¸»åºä¸ºWRITEæ¨¡å¼ï¼ï¼åæ¶æ£æ¥VIPï¼192.168.207.39ï¼æ¯å¦ç»å®ï¼å®ç°<strong>ä¸»åºèªå¨ç»å®VIPãå¤åºèªå¨å¸è½½VIP</strong>ï¼å¹¶éè¿arpingå¹¿æ­æ´æ°ç½ç»arpè¡¨ï¼ç¡®ä¿VIPç½ç»å¯è¾¾ï¼èæ¬å­æ¾è·¯å¾<code>/etc/vip_dg.sh</code>ã</p>
<pre><code class="language-bash">[root@euler01 etc]# cat /etc/vip_dg.sh
#!/bin/bash
# æ¥è¯¢æ°æ®åºæ¯å¦ä¸ºWRITEæ¨¡å¼ï¼ä¸»åºï¼ï¼è¿å1åä¸ºä¸»åºï¼0åä¸ºå¤åº
dbstats=`su - oracle -c "echo -e 'set pagesize 0\nselect open_mode from v\\$database;' | sqlplus -S / as sysdba"|grep WRITE|wc -l`
# æ£æ¥VIP 192.168.X.Xæ¯å¦å·²ç»å®å¨ens33:1
ip=`/usr/sbin/ip a|grep ens33:1|wc -l`

if [[ "${dbstats}" -eq 1 ]] ; then
    # ä¸»åºï¼æªç»å®VIPåæ§è¡ç»å®ï¼å¹¶åéarpå¹¿æ­
    if [[ "${ip}" -eq 0 ]]; then
    /usr/sbin/ifconfig ens33:1 192.168.X.X netmask 255.255.255.0 up
    /usr/sbin/arping -I ens33 -b -s 192.168.X.X 192.168.X.X -c 3
    fi
else
    # å¤åºï¼å·²ç»å®VIPåæ§è¡å¸è½½
    if [[ "${ip}" -gt 0 ]]; then
    /usr/sbin/ifconfig ens33:1 down
    fi
fi
</code></pre>
<h2 id="ä¸èæ¬è¿è¡åºç¡æµè¯">ä¸ãèæ¬è¿è¡åºç¡æµè¯</h2>
<p>å®æèæ¬é¨ç½²åï¼éå¯æå¡å¨éªè¯èæ¬èªå¯å¨ãVIPç»å®ç¶æï¼ç¡®è®¤åºç¡åè½æ­£å¸¸ã</p>
<h3 id="31-éªè¯èæ¬è¿ç¨è¿è¡">3.1 éªè¯èæ¬è¿ç¨è¿è¡</h3>
<p>æå¡å¨éå¯åï¼éè¿<code>ps -ef</code>å½ä»¤æ£æ¥VIPèæ¬è¿ç¨ï¼ç¡®è®¤è¿ç¨æ­£å¸¸åå°è¿è¡ã</p>
<pre><code class="language-bash">[root@euler01 etc]# ps -ef|grep vip
</code></pre>
<h3 id="32-éªè¯ä¸»åºvipç»å®ç¶æ">3.2 éªè¯ä¸»åºVIPç»å®ç¶æ</h3>
<p>ä¸»åºèç¹ä¸ï¼éè¿<code>ip a</code>å½ä»¤æ£æ¥ï¼ç¡®è®¤æµ®å¨VIP 192.168.X.Xæåç»å®å¨ens33:1å­ç½å¡ä¸ï¼VIPç¶ææ­£å¸¸ã</p>
<pre><code class="language-bash">[root@euler01 etc]# ip a
# å³é®è¾åºï¼ens33:1å­ç½å¡ç»å®VIP 192.168.X.X/24
</code></pre>
<h2 id="åé®é¢è§£å³å±è½suæä½æ¥å¿è¾åº">åãé®é¢è§£å³ï¼å±è½suæä½æ¥å¿è¾åº</h2>
<p>èæ¬è¿è¡ä¸­ï¼<code>vip_dg.sh</code>æ¯3ç§æ§è¡ä¸æ¬¡<code>su - oracle</code>æä½ï¼ç³»ç»ä¼å°è¯¥æä½æ¥å¿æç»­åå¥<code>/var/log/messages</code>ï¼é¿æè¿è¡ä¼å¯¼è´æ¥å¿æä»¶æ éå¢å¤§ï¼æ¬æ¬¡éè¿ä¿®æ¹rsyslogéç½®ï¼å±è½suæä½çauthç±»æ¥å¿è¾åºè³messagesã</p>
<h3 id="41-æ£æ¥rsyslogæå¡ç¶æ">4.1 æ£æ¥rsyslogæå¡ç¶æ</h3>
<p>ç¡®è®¤rsyslogæå¡æ­£å¸¸è¿è¡ï¼è¯¥æå¡ä¸ºç³»ç»æ¥å¿æ ¸å¿æå¡ï¼ä¿®æ¹å¶éç½®å¯å®ç°æ¥å¿è¿æ»¤ã</p>
<pre><code class="language-bash">[root@euler01 etc]# systemctl status rsyslog
# å³é®è¾åºï¼Active: active (running)ï¼æå¡æ­£å¸¸è¿è¡
</code></pre>
<h3 id="42-ä¿®æ¹rsyslogéç½®æä»¶">4.2 ä¿®æ¹rsyslogéç½®æä»¶</h3>
<p>ç¼è¾<code>/etc/rsyslog.conf</code>ï¼å¨messagesæ¥å¿çéç½®è¡ä¸­æ·»å <code>auth.none</code>ï¼è¡¨ç¤ºå±è½authç±»æ¥å¿è¾åºè³è¯¥æä»¶ã</p>
<pre><code class="language-bash">[root@euler01 etc]# vi /etc/rsyslog.conf
# ä¿®æ¹å
*.info;mail.none;authpriv.none;cron.none /var/log/messages
# ä¿®æ¹å
*.info;mail.none;authpriv.none;cron.none;auth.none /var/log/messages

# éªè¯ä¿®æ¹ç»æ
[root@euler01 etc]# cat /etc/rsyslog.conf|grep auth.*
*.info;mail.none;authpriv.none;cron.none;auth.none /var/log/messages
</code></pre>
<h3 id="43-éå¯rsyslogæå¡å¹¶éªè¯">4.3 éå¯rsyslogæå¡å¹¶éªè¯</h3>
<p>éå¯rsyslogæå¡ä½¿éç½®çæï¼éåéè¿<code>tail -f</code>å®æ¶æ¥çmessagesæ¥å¿ï¼ç¡®è®¤æ æ°çsuæä½æ¥å¿è¾åºï¼é®é¢è§£å³ã</p>
<pre><code class="language-bash"># éå¯æå¡
[root@euler01 etc]# systemctl restart rsyslog

# éªè¯æ¥å¿ï¼æ suè®°å½è¾åº
[root@euler01 etc]# tail -f /var/log/messages
# ä»æ¾ç¤ºrsyslogæå¡éå¯æ¥å¿ï¼æ su[xxxx]: (to oracle) root on noneç¸å³è®°å½
</code></pre>
<h2 id="äºæç»éªè¯éè¿vipè¿æ¥æ°æ®åº">äºãæç»éªè¯ï¼éè¿VIPè¿æ¥æ°æ®åº</h2>
<p>ä»¥Oracleç¨æ·èº«ä»½ï¼éè¿æµ®å¨VIP 192.168.X.Xè¿æ¥æ°æ®åºï¼éªè¯VIPç½ç»å¯è¾¾ãæ°æ®åºæ­£å¸¸è®¿é®ï¼ç¡®è®¤æ´ä¸ªVIPé«å¯ç¨é¨ç½²æµç¨çæã</p>
<pre><code class="language-bash">[root@euler01 etc]# su - oracle
[oracle@euler01 ~]$ sqlplus zyjc/zyjc@192.168.X.X:1521/cm

SQL*Plus: Release 11.2.0.4.0 Production on Tue Dec 2 13:10:18 2025
Copyright (c) 1982, 2013, Oracle.  All rights reserved.

Connected to:
Oracle Database 11g Enterprise Edition Release 11.2.0.4.0 - 64bit Production
With the Partitioning, OLAP, Data Mining and Real Application Testing options
</code></pre>
<h2 id="å­å®ææ»ç»">å­ãå®ææ»ç»</h2>
<ol>
<li>æ¬æ¬¡é¨ç½²çVIPèªå¨åæ¢èæ¬åºäºæ°æ®åºOPEN_MODEç¶æå®ç°ä¸»å¤èªå¨åæ¢ï¼ä¸»å¤èç¹ç½å¡éç½®ä¸è´æ¶ï¼èæ¬å¯å®å¨å¤ç¨ï¼éä½é¨ç½²ææ¬ï¼</li>
<li>å¿è·³èæ¬æ¯3ç§æ£æµä¸æ¬¡ï¼å¼é¡¾æ£æµå®æ¶æ§ä¸ç³»ç»èµæºæ¶èï¼arpingå¹¿æ­ç¡®ä¿VIPåæ¢åç½ç»å³æ¶å¯è¾¾ï¼</li>
<li>éè¿å¨rsyslogéç½®ä¸­æ·»å <code>auth.none</code>ï¼ç²¾åå±è½suæä½çauthç±»æ¥å¿ï¼é¿åmessagesæ¥å¿è¨èï¼ä¿éç³»ç»æ¥å¿ç®¡çè§èï¼</li>
<li>æ´ä¸ªé¨ç½²å®ç°äºOracle ADGæ¶æä¸VIPçæ äººå·¥å¹²é¢èªå¨åæ¢ï¼ä¸å¡åºç¨éè¿VIPè¿æ¥æ°æ®åºï¼ä¸»å¤åæ¢æ¶æ éä¿®æ¹æ°æ®æºéç½®ï¼å¤§å¹ç¼©ç­ä¸å¡ä¸­æ­æ¶é´ã</li>
</ol>


</div>
<div class="clear"></div>

		<p class="postfoot">
			posted on 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-10 14:33">2026-02-10 14:33</span>&nbsp;
<a href="https://www.cnblogs.com/liuziyi1">åå­æ¯</a>&nbsp;
éè¯»(<span id="post_view_count">10</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19599671);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19599671', targetLink: 'https://www.cnblogs.com/liuziyi1/p/19599671', title: 'Oracle ADGç¯å¢VIPé«å¯ç¨é¨ç½²å®æ' })">ä¸¾æ¥</a>

		</p>
	 ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ C++ STL å­¦ä¹ ç¬è®°ï¼ä¸ï¼ï¼vector å»éçä¸ç§å®ç°æ¹æ³è¯¦è§£ ]]></title>
    <link>https://www.cnblogs.com/GeophysicsWorker/p/19599636</link>
    <guid>dff50a589460b997c38fcf8264e81b47</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/GeophysicsWorker/p/19599636" title="åå¸äº 2026-02-10 14:29">
    <span role="heading" aria-level="2">C++ STL å­¦ä¹ ç¬è®°ï¼ä¸ï¼ï¼vector å»éçä¸ç§å®ç°æ¹æ³è¯¦è§£</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        å¨C++å¼åä¸­ï¼`vector`å»éæ¯æå¸¸è§çæ°æ®å¤çéæ±ãæ¬æå°è¯¦ç»ä»ç»ä½¿ç¨C++æ ååºä¸­ç`sort()`,`unique()`, `erase()`å½æ°ç»åå®ç°å®¹å¨vectorå»éï¼ æ¬ç¬è®°ä¸»è¦ä»ç»ä¸ç§å®ç°æ¹æ³ï¼ï¼1ï¼åºç¡æ°æ®ç±»åå»éï¼ï¼2ï¼èªå®ä¹ç»æä½ä½¿ç¨`sort`+`unique` å»éï¼ï¼3ï¼ä½¿ç¨`set` å»éï¼å¸®å©å¼åèæ ¹æ®ä¸ååºæ¯éæ©æä¼æ¹æ¡ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="c-stl-å­¦ä¹ ç¬è®°ä¸vector-å»éçä¸ç§å®ç°æ¹æ³è¯¦è§£">C++ STL å­¦ä¹ ç¬è®°ï¼ä¸ï¼ï¼vector å»éçä¸ç§å®ç°æ¹æ³è¯¦è§£</h1>
<p>â        å¨C++å¼åä¸­ï¼<code>vector</code>å»éæ¯æå¸¸è§çæ°æ®å¤çéæ±ãæ¬æå°è¯¦ç»ä»ç»ä½¿ç¨C++æ ååºä¸­ç<code>sort()</code>,<code>unique()</code>, <code>erase()</code>å½æ°ç»åå®ç°å®¹å¨vectorå»éï¼ æ¬ç¬è®°ä¸»è¦ä»ç»ä¸ç§å®ç°æ¹æ³ï¼ï¼1ï¼åºç¡æ°æ®ç±»åå»éï¼ï¼2ï¼èªå®ä¹ç»æä½ä½¿ç¨<code>sort</code>+<code>unique</code> å»éï¼ï¼3ï¼ä½¿ç¨<code>set</code> å»éï¼å¸®å©å¼åèæ ¹æ®ä¸ååºæ¯éæ©æä¼æ¹æ¡ã</p>
<h2 id="11--åºç¡æ°æ®ç±»åå»é">1.1  åºç¡æ°æ®ç±»åå»é</h2>
<p>â       <code>unique()</code>å½æ°ä½ç¨æ¯å»æå®¹å¨ä¸­ç¸é»åç´ çéå¤åç´ ï¼ç¶åè¿åæåç¬¬ä¸ä¸ªéå¤åç´ çè¿­ä»£å¨ã<code>unique()</code>å®è´¨ä¸æ¯ä¸ä¸ª<strong>ä¼ªå»é¤</strong>ï¼å®å¹¶ä¸æ¯çæ­£æéå¤çåç´ å é¤ï¼èæ¯ç¨ä¸éå¤çåç´ æéå¤çåç´ <strong>è¦ç</strong>äºï¼æä»¥æ»é¿åº¦å¶å®æ¯ä¸åçã</p>
<p>â       å æ­¤å¨å©ç¨unique()å½æ°åéè¦å¯¹å®¹å¨åçæ°æ®æåºï¼å¯ä»¥éè¿sort()å½æ°å®ç°ãsort()å½æ°çä½ç¨æ¯å¯¹å®¹å¨æå®èå´åçåç´ ææå®æ ¼å¼è¿è¡æåºï¼é»è®¤ä»å°å°å¤§ãå¨å©ç¨unique()å½æ°åéè¦æ¦é¤ä»è¿åçè¿­ä»£å¨å¯¹äºçåç´ å°æååç´ çææçåç´ ï¼å¯ä»¥éè¿erase()å½æ°å®ç°ãerase()å½æ°çä½ç¨æ¯æ¦é¤å®¹å¨æå®èå´åçåç´ ãç»¼ä¸æå±ï¼å»é¤çä¸»è¦æè·¯ï¼åç¨<code>sort</code>æåºï¼è®©éå¤åç´ ç¸é»ï¼ãåå¯ä¸ï¼ç¨<code>unique</code> æéå¤åç´ ç§»å°å®¹å¨çæ«å°¾ï¼ãæåç¨<code>erase()</code>äºå é¤æåé¢çé£æ®µâéå¤âåç´ ãå¯¹äº</p>
<p>â       å¯¹äºåºç¡ç±»åæ°æ®ï¼å¦<code>int</code>,<code>float</code>ç­ï¼ï¼æç®åç´æ¥çæ¹æ³æ¯ä½¿ç¨ä¸è¿°ç<code>sort</code>+<code>unique</code>+<code>erase</code>ç»åãä¸é¢æ¯<strong>ä»£ç æ¡ä¾å®ç°</strong>ï¼</p>
<pre><code class="language-C++">#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;algorithm&gt;

using namespace std;

int main() {
    vector&lt;int&gt; vec = {1, 2, 3, 2, 1, 4, 5, 4};
    
    cout &lt;&lt; "å»éå: ";
    for (int num : vec) cout &lt;&lt; num &lt;&lt; " ";
    cout &lt;&lt; endl;

    // æåºåå»é
    sort(vec.begin(), vec.end());
    vec.erase(unique(vec.begin(), vec.end()), vec.end());

    cout &lt;&lt; "å»éå: ";
    for (int num : vec) cout &lt;&lt; num &lt;&lt; " ";
    cout &lt;&lt; endl;

    return 0;
}
</code></pre>
<p>å¶ä¸­æ³¨æï¼</p>
<ul>
<li><code>sort()</code>å½æ°çå¤´æä»¶ï¼<code>#include&lt;algorithm&gt;</code></li>
<li><code>unique()</code>å½æ°çå¤´æä»¶ï¼<code>#include&lt;iostream&gt;</code></li>
<li><code>erase()</code>å½æ°çå¤´æä»¶ï¼<code>#include&lt;vector&gt;</code></li>
</ul>
<h2 id="12-èªå®ä¹ç»æä½å»é">1.2 èªå®ä¹ç»æä½å»é</h2>
<p>â        å¦å¤å¯¹äºå®¹å¨ä¸­ï¼å¦ç»æä½ãç±»å¯¹è±¡ç­ï¼ä¸ºäºå®ç°å»éæä½ï¼è¿å¯ä»¥éè¿å¯¹<code>sort</code>ç®æ³éè¦éè½½<code>&lt;</code>æä½ç¬¦æå®ä¹æ¯è¾å½æ°ï¼å¯¹<code>unique</code>ç®æ³éè¦éè½½<code>==</code>æä½ç¬¦ï¼éè¿å¯¹å¶ä¸­çæä¸ä¸ªæååéè¿è¡æä½æ¥å®ç°ï¼ç¶åéç¨<code>sort</code>+<code>unique</code>+<code>erase</code>ãå¶<strong>ä»£ç å®ç°å¦ä¸</strong>ï¼</p>
<pre><code class="language-C++">#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;algorithm&gt;
using namespace std;

struct Person {
    string name;
    int age;
    
    // å®ä¹ç¸ç­è¿ç®ç¬¦
    bool operator==(const Person&amp; other) const {
        return name == other.name &amp;&amp; age == other.age;
    }
};

// å®ä¹æ¯è¾å½æ°
bool comparePerson(const Person&amp; a, const Person&amp; b) {
    if (a.name != b.name) return a.name &lt; b.name;
    return a.age &lt; b.age;
}

int main() {
    vector&lt;Person&gt; people = {
        {"Alice", 25},
        {"Bob", 30},
        {"Alice", 25},
        {"Charlie", 35},
        {"Bob", 30}
    };

    cout &lt;&lt; "å»éå:\n";
    for (const auto&amp; p : people) 
        cout &lt;&lt; p.name &lt;&lt; " (" &lt;&lt; p.age &lt;&lt; ")\n";

    sort(people.begin(), people.end(), comparePerson);
    people.erase(unique(people.begin(), people.end()), people.end());

    cout &lt;&lt; "\nå»éå:\n";
    for (const auto&amp; p : people) 
        cout &lt;&lt; p.name &lt;&lt; " (" &lt;&lt; p.age &lt;&lt; ")\n";

    return 0;
}
</code></pre>
<p>â    <strong>å¶ä¸­å³é®ç¹ï¼</strong></p>
<ul>
<li>
<p>å¿é¡»å®ä¹<code>operator==</code>ç¨äº<code>unique</code>å¤æ­ç¸ç­ï¼</p>
</li>
<li>
<p>ä»£ç ç®ä»ï¼ä½ä¼æ¹ååå§é¡ºåºï¼</p>
</li>
<li>
<p>å¯¹äºå¤§åæ°æ®éåï¼å©ç¨setçéåå»éæ´é«æï¼</p>
</li>
</ul>
<h2 id="13-ä½¿ç¨setè¿è¡å»é">1.3 ä½¿ç¨setè¿è¡å»é</h2>
<p>â      å¯¹vectorçå»éæä½è¿å¯ä»¥å©ç¨setå®¹å¨çç¹æ§å®ç°ï¼æè·¯æ¯è¾ç®åï¼å¯¹äºèªå®ä¹ç±»åï¼å¯ä»¥ä½¿ç¨setèªå¨å»éçç¹æ§ï¼éè¦å®ä¹<code>operator&lt;</code>è¿ç®ç¬¦ãå¶<strong>æ¡ä¾ä»£ç å¦ä¸</strong>ï¼</p>
<pre><code class="language-C++">#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;set&gt;
using namespace std;

struct Product {
    string id;
    double price;
    
    // å®ä¹å°äºè¿ç®ç¬¦
    bool operator&lt;(const Product&amp; other) const {
        if (id != other.id) return id &lt; other.id;
        return price &lt; other.price;
    }
};

int main() {
    vector&lt;Product&gt; products = {
        {"P1001", 99.99},
        {"P1002", 199.99},
        {"P1001", 99.99},
        {"P1003", 299.99},
        {"P1002", 199.99}
    };

    cout &lt;&lt; "å»éå:\n";
    for (const auto&amp; p : products) 
        cout &lt;&lt; p.id &lt;&lt; " ($" &lt;&lt; p.price &lt;&lt; ")\n";

    // ä½¿ç¨setå»é
    set&lt;Product&gt; uniqueProducts(products.begin(), products.end());
    products.assign(uniqueProducts.begin(), uniqueProducts.end());

    cout &lt;&lt; "\nå»éå:\n";
    for (const auto&amp; p : products) 
        cout &lt;&lt; p.id &lt;&lt; " ($" &lt;&lt; p.price &lt;&lt; ")\n";

    return 0;
}
</code></pre>
<p><strong>å¶å³é®ç¹å¦ä¸</strong>ï¼</p>
<ul>
<li>
<p>setåºäº<code>operator&lt;</code>èªå¨æåºåå»éï¼</p>
</li>
<li>
<p>ä»£ç ç®æ´ï¼ä½ä¼æ¹ååå§é¡ºåº</p>
</li>
<li>
<p>å¯¹äºå¤§åæ°æ®éï¼setæ¹æ³å¯è½æ´é«æ</p>
</li>
</ul>
<h2 id="æ¹æ³æ¯è¾">æ¹æ³æ¯è¾</h2>
<table>
<thead>
<tr>
<th style="text-align: left">æ¹æ³</th>
<th style="text-align: left">éç¨åºæ¯</th>
<th style="text-align: left">æ¶é´å¤æåº¦</th>
<th style="text-align: left">ä»£ç å¤æåº¦</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">sort+unique</td>
<td style="text-align: left">åºç¡æ°æ®ç±»å</td>
<td style="text-align: left">O(n log n) + O(n)</td>
<td style="text-align: left">ä½</td>
</tr>
<tr>
<td style="text-align: left">èªå®ä¹ç»æä½sort+unique</td>
<td style="text-align: left">éè¦ä¿æé¡ºåºçèªå®ä¹ç±»å</td>
<td style="text-align: left">O(n log n) + O(n)</td>
<td style="text-align: left">ä¸­</td>
</tr>
<tr>
<td style="text-align: left">setå»é</td>
<td style="text-align: left">ä¸éè¦ä¿æé¡ºåºçèªå®ä¹ç±»å</td>
<td style="text-align: left">O(n log n)</td>
<td style="text-align: left">ä½</td>
</tr>
</tbody>
</table>
<h2 id="åèèµæ">åèèµæ</h2>
<p><a href="https://comate.baidu.com/zh/page/ejyuh54s6yz" target="_blank" rel="noopener nofollow">C++ä¸­vectorå»éçä¸ç§å®ç°æ¹æ³è¯¦è§£_æå¿å¿«ç </a></p>
<p><a href="https://blog.csdn.net/hyl1181/article/details/108983656" target="_blank" rel="noopener nofollow">STLä¹vectorå»éä¸æ­¥æ²ï¼å©ç¨uniqueå½æ°ï¼_vector unique-CSDNåå®¢</a></p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.0006944444444444445" data-date-updated="2026-02-10 14:30">2026-02-10 14:29</span>&nbsp;
<a href="https://www.cnblogs.com/GeophysicsWorker">GeoFXR</a>&nbsp;
éè¯»(<span id="post_view_count">17</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19599636);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19599636', targetLink: 'https://www.cnblogs.com/GeophysicsWorker/p/19599636', title: 'C++ STL å­¦ä¹ ç¬è®°ï¼ä¸ï¼ï¼vector å»éçä¸ç§å®ç°æ¹æ³è¯¦è§£' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ è§£å Pythonï¼å³äºæéãGIL ä¸å¼æ­¥åæ ¸ ]]></title>
    <link>https://www.cnblogs.com/kaiux/p/19598962</link>
    <guid>a25c11cf45795bc42947d9f00f5f1b04</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/kaiux/p/19598962" title="åå¸äº 2026-02-10 12:01">
    <span role="heading" aria-level="2">è§£å Pythonï¼å³äºæéãGIL ä¸å¼æ­¥åæ ¸</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/1158182/202602/1158182-20260210120046308-982867969.png" alt="è§£å Pythonï¼å³äºæéãGIL ä¸å¼æ­¥åæ ¸" class="desc_img">
        æ¬æä»¥ C++ ç³»ç»è§è§ï¼è§£æ Python çåºå±åçãæ·±åº¦åæ `PyObject` åå­å¸å±ãGIL çåå­æ§å¹»è§å `asyncio` ç epoll æ¬è´¨ãéè¿ C++ æ©å±æç ´è¾¹çï¼æ­ç¤ºâè¶æ°´è¯­è¨âå¦ä½éè¿çºç²åæ ¸è®¡ç®ï¼æ¢åæè´çè°åº¦æçä¸çæåæ­ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p><img src="https://img2024.cnblogs.com/blog/1158182/202602/1158182-20260210120115327-1286094950.jpg" alt="python_overview" loading="lazy"></p>
<h2 id="1-ai-æ¶ä»£çæ°å­è¶æ°´-the-necessity-in-ai-era">1. AI æ¶ä»£çâæ°å­è¶æ°´â (The Necessity in AI Era)</h2>
<h3 id="11-çæä½çåæ­ä½ä¸º-c-çé«å±æä»¤æé-ip">1.1. çæä½çåæ­ï¼ä½ä¸º C++ çé«å±æä»¤æé (IP)</h3>
<p>ä»»ä½å¯¹è®¡ç®æºä½ç³»ç»ææè®¤ç¥çå¼åèé½æ¸æ¥ï¼Python çåçæ§è½æ¯ç¾é¾çº§çãå®æ¬è´¨ä¸æ¯ä¸ä¸ªåºäºæ çèææºï¼æ¯ä¸ä¸ªæ´æ°å æ³ (<code>a + b</code>) é½è¦ç»åç±»åæ£æ¥ãå¼ç¨è®¡æ°æ´æ° (<code>Py_INCREF/DECREF</code>) åå·¨å¤§çåæ´¾å¼éãå¦æä½ è¯å¾ç¨çº¯ Python å»åç©éµä¹æ³ï¼CPU çåæ¯é¢æµåå (Branch Predictor) ä¼è¢«ä½ æä¹±æ ç« çæä»¤æµæå¾ä¸å¡ç³æ¶ï¼L1/L2 Cache ä¹ä¼å ä¸ºæ£è½å¨å ä¸ç <code>PyObject</code> èé¢ç¹å¤±æã</p>
<p><strong>ç¶èï¼AI ä¸éè¦ Python å»åè®¡ç®ï¼AI åªéè¦ Python å»âä¸ä»¤âã</strong></p>
<p>å¨ PyTorch æ TensorFlow çæ¶æä¸­ï¼Python ä»£ç æ®æ¼çè§è²å®éä¸æ¯<strong>æ§å¶å¹³é¢ (Control Plane)</strong>ï¼è C++/CUDA ææ¯<strong>æ°æ®å¹³é¢ (Data Plane)</strong>ãå½ä½ åä¸ <code>z = torch.matmul(x, y)</code> æ¶ï¼Python è§£éå¨æåçä»ä»æ¯æå»ºè®¡ç®å¾ãè¿è¡åæ°æ ¡éªï¼ç¶åå°æä»¤æéï¼Instruction Pointerï¼çæ§å¶æéè¿ C ABI (Application Binary Interface) ç§»äº¤ç»åºå±ç C++ å¨æåºã</p>
<p>ä¸æ¦è¿å¥åºå±ï¼SIMD æä»¤éãAVX-512 çè³ GPU ç Tensor Cores ä¾¿æ¥ç®¡äºä¸åãæ­¤æ¶ï¼Python çé£ç¹è§£éå¨å¼éå¨èæ¶æ°æ¯«ç§çè³æ°ç§çç©éµè¿ç®é¢åï¼å®å¨å¯ä»¥å¿½ç¥ä¸è®¡ï¼Amdahl's Law çåååºç¨ï¼ã</p>
<p><strong>Trade-off åæï¼</strong></p>
<ul>
<li><strong>çºç²ï¼</strong> åçº¿ç¨æ éè®¡ç®æ§è½ï¼ææ¢ï¼ã</li>
<li><strong>æ¢åï¼</strong> æè´ç C/C++ äºæä½æ§ãPython æ¯å¯ä¸ä¸ä¸ªè½è®© C++ å¼åèæå°âåæ¯å¨åä¼ªä»£ç ï¼ä½è½æ ç¼è°ç¨ <code>.so</code> åºâçè¯­è¨ãå®æ¯ AI åºç¡è®¾æ½ï¼C++ï¼ä¸ä¸å¡é»è¾ï¼Human Logicï¼ä¹é´æèçâè¶æ°´å±âã</li>
</ul>
<p>è¿ç§åå±æ¶æçè³å¯¼è´äº AI åºç¡è®¾æ½çè¿ä¸æ­¥ä¸æ²ãä¸ºäºé¿å Python å¨æ°æ®é¢å¤çï¼å¦ TokenizerãImage Decodeï¼é¶æ®µæä¸ºç¶é¢ï¼ç°å¨çè¶å¿æ¯å°æ´ä¸ªæ°æ®å è½½ç®¡çº¿ï¼DataLoaderï¼ä¹ä¸æ²å° C++ æ Rust ä¸­ï¼ä¾å¦ NVIDIA DALI æ HuggingFace Tokenizersï¼ãPython éæ¸éåä¸ºçº¯ç²¹çéç½®è¯­è¨åè¶æ°´å±ã</p>
<h3 id="12-ä»è®¡ç®å°ååio-å¯éåçèå©">1.2. ä»è®¡ç®å°ååï¼IO å¯éåçèå©</h3>
<p>å¨ä¼ ç»çé«æ§è½è®¡ç® (HPC) æ¶ä»£ï¼æä»¬ä¸ºäºåå°çº³ç§çº§çå»¶è¿ï¼ä¸ææåæ±ç¼ä¼åä¸ä¸æåæ¢ (Context Switch)ãä½å¨ LLM é©±å¨ç Agent æ¶ä»£ï¼ç¶é¢åçäºè´¨çè½¬ç§»ã</p>
<p>ä¸ä¸ªå¸åç RAG (Retrieval-Augmented Generation) æµç¨æ ChatBI ç³»ç»ï¼å¶ 90% ççå½å¨æå¤äº <strong>Wait ç¶æ</strong>ï¼</p>
<ol>
<li>ç­å¾åéæ°æ®åºæ£ç´¢ (Network I/O)ã</li>
<li>ç­å¾ LLM API Token çæ (Network I/O)ã</li>
<li>ç­å¾æ°æ®åº SQL æ§è¡ç»æ (Network I/O)ã</li>
</ol>
<p>æ­¤æ¶ï¼CPU å¹¶ä¸æ¯å¨è®¡ç®ï¼èæ¯å¨æèµ·ãå¦æä½¿ç¨ C++ï¼ä½ éè¦å¤çå¤æç <code>epoll</code>ãåè°å°ç±æèåç¨åºï¼å¦ <code>boost::asio</code> æ C++20 coroutinesï¼ï¼å¼åææ¬æé«ã</p>
<p>Python å¨è¿éçä¼å¿å¨äºå¶<strong>æ½è±¡ææ¬æä½</strong>ãè½ç¶ Python ç GIL (Global Interpreter Lock) è­åæ­èï¼ä½å¨ IO å¯éååºæ¯ä¸ï¼OS ççº¿ç¨è°åº¦å¨æè Python ç <code>asyncio</code> äºä»¶å¾ªç¯ï¼Event Loopï¼è½å¾å¥½å°æ©ç CPU çç©ºé²ãæä»¬ä¸åå³æ³¨ TLB (Translation Lookaside Buffer) çå·æ°å¼éï¼èæ¯å³æ³¨å¦ä½ç¨æå°çä»£ç è¡æ°ï¼ç¼ææå¤æç API è°ç¨é¾è·¯ã</p>
<h3 id="13-ä»£ç å®ç°">1.3. ä»£ç å®ç°</h3>
<h4 id="131-åºæ¯ä¸æµå¼å¤çä¸åå­åå¥½-the-generator">1.3.1. åºæ¯ä¸ï¼æµå¼å¤çä¸åå­åå¥½ (The Generator)</h4>
<p>å¨ C++ ä¸­ï¼ä¸ºäºé¿åä¸æ¬¡æ§å è½½ 10GB çæ¥å¿æä»¶å¯¼è´ OOM (Out of Memory)ï¼æä»¬éè¦æå Buffer ç®¡çåè¿­ä»£å¨ãå¨ Python ä¸­ï¼<code>yield</code> å³é®å­æ¬è´¨ä¸æ¯ä¸ä¸ª<strong>ç¨æ·æçæ å¸§æèµ· (Stack Frame Suspension)</strong>ãå®åè®¸å½æ°å¨ä¿æå±é¨åéç¶æçæåµä¸æåæ§è¡ï¼å°æ§å¶æäº¤è¿ç»è°ç¨èï¼è¿æ¯ä¸ç§æå¶å»ä»·çâä¸ä¸æåæ¢âã</p>
<pre><code class="language-python">import time
import os

def raw_log_streamer(file_path: str, block_size: int = 4096):
    """
    æ¨¡æ C++ ç Buffered Readerã
    ä¸ä¸æ¬¡æ§è¯»åæ´ä¸ªæä»¶ï¼èæ¯å©ç¨ Generator æºå¶
    å¨ç¨æ·ææèµ·æ å¸§ï¼å®ç° Lazy Loadingã
    """
    # è¿éç file_obj å®éä¸æ¯å¯¹åºå±æä»¶æè¿°ç¬¦ (fd) çå°è£
    with open(file_path, 'rb') as f:
        while True:
            # è§¦å syscall: read()
            chunk = f.read(block_size)
            if not chunk:
                break
            # æ­¤æ¶å½æ°ç Stack Frame è¢«å»ç»ï¼
            # æä»¤æé IP æåä¸ä¸è¡ï¼å±é¨åéä¿çå¨å åå­ç PyFrameObject ä¸­
            yield chunk 

# ä½¿ç¨åºæ¯ï¼å¤çå·¨å¤§çæ°æ®éèä¸ç¸æ RAM
# è¿ç§åæ³å¨å¤ç AI æ°æ® Pipeline (å¦ DataLoader) æ¶æ¯æ åèå¼
# for data in raw_log_streamer("large_dataset.bin"):
#     process(data)

</code></pre>
<h4 id="132-åºæ¯äºåæ ¸æåæ¢-vs-ç¨æ·æè°åº¦-threading-vs-asyncio">1.3.2. åºæ¯äºï¼åæ ¸æåæ¢ vs ç¨æ·æè°åº¦ (Threading vs Asyncio)</h4>
<p>ä½ä¸ºç³»ç»å¼åèï¼ä½ å¿é¡»æç½ <code>threading</code> å <code>asyncio</code> çæ¬è´¨åºå«ï¼</p>
<ul>
<li><strong>Threading:</strong> æ å°å° OS çåççº¿ç¨ (pthreads)ãåæ¢éè¦åæ ¸ä»å¥ (Kernel Trap)ï¼æ¶åå¯å­å¨ä¿å­ãTLB å·æ°ï¼å¼éæè´µãä¸åå¶äº GILï¼Python å¤çº¿ç¨æ æ³å©ç¨å¤æ ¸ã</li>
<li><strong>Asyncio:</strong> åçº¿ç¨åçäºä»¶å¾ªç¯ãåæ¢åªæ¯ç®åçå½æ°æéè·³è½¬ (User-space switching)ï¼ <strong>é¶åæ ¸ä¸ä¸æåæ¢å¼é (Zero Kernel Context Switch Overhead)</strong>ã<em>(æ³¨ï¼è½ç¶é¿åäºæè´µç syscallï¼ä½ Python è§£éå¨æ¬èº«çå­èç åæ´¾ä¾ç¶æææ¬ï¼ä½å¨é«å¹¶å IO é¢åï¼è¿éå¸¸æ¯åç®çã)</em></li>
</ul>
<p>ä»¥ä¸ä»£ç ç´è§å±ç¤ºäºå¨ IO å¯éåä»»å¡ä¸­ï¼ä¸ºä»ä¹æä»¬éè¦ä»âçº¿ç¨æç»´âè½¬åâåç¨æç»´âã</p>
<pre><code class="language-python">import threading
import asyncio
import time

# æ¨¡æä¸ä¸ªé«å»¶è¿ç IO æä½ (ä¾å¦ç­å¾ LLM è¿å token)
# å¨ C++ è§è§ï¼è¿å°±æ¯ä¸ä¸ªå¯¼è´å½åçº¿ç¨è¢«æèµ·å° Wait Queue çæä½
IO_DELAY = 1.0 
TASK_COUNT = 50

def heavy_io_task_sync(idx):
    # é»å¡å¼ IOï¼çº¿ç¨è¢« OS æèµ·
    time.sleep(IO_DELAY) 

async def heavy_io_task_async(idx):
    # éé»å¡ IOï¼æ§å¶æäº¤è¿ç» Event Loopï¼
    # ä»ä»æ¯å¨ epoll/kqueue æ³¨åäºä¸ä¸ªäºä»¶
    await asyncio.sleep(IO_DELAY)

def run_threading():
    start = time.perf_counter()
    threads = []
    for i in range(TASK_COUNT):
        t = threading.Thread(target=heavy_io_task_sync, args=(i,))
        t.start()
        threads.append(t)
    
    for t in threads:
        t.join()
    print(f"[Threading] Completed {TASK_COUNT} tasks in {time.perf_counter() - start:.4f}s")
    # ä»£ä»·ï¼åå»ºäº 50 ä¸ª OS çº¿ç¨ï¼ä¸ä¸æåæ¢å¼éå¤§ï¼åå­å ç¨é« (æ¯ä¸ªçº¿ç¨é»è®¤æ å¤§å° ~8MB)

async def run_asyncio():
    start = time.perf_counter()
    tasks = [heavy_io_task_async(i) for i in range(TASK_COUNT)]
    # ææçä»»å¡å¨ä¸ä¸ª OS çº¿ç¨åå®æï¼æ åæ ¸æåæ¢
    await asyncio.gather(*tasks)
    print(f"[Asyncio]   Completed {TASK_COUNT} tasks in {time.perf_counter() - start:.4f}s")

if __name__ == "__main__":
    print(f"--- Benchmarking IO Concurrency (Tasks: {TASK_COUNT}) ---")
    run_threading()
    asyncio.run(run_asyncio())

"""
é¢æè¾åºç»æ (Trade-off æ¾èæè§):
--- Benchmarking IO Concurrency (Tasks: 50) ---
[Threading] Completed 50 tasks in 1.0xxx s (å ä¸æ¾èççº¿ç¨åå»ºåè°åº¦å¼é)
[Asyncio]   Completed 50 tasks in 1.00xx s (å ä¹ä»åéäºææ¢çé£ä¸ª IO)
"""

</code></pre>
<h3 id="14-æ»ç»">1.4. æ»ç»</h3>
<p>Python ä¸å¿«ï¼ä½å®è®©âå¿«âåå¾å®¹æè®¿é®ãæ¥ä¸æ¥æä»¬å°æ·±å¥æ¢è®¨ Python åå­ç®¡ççè³ææ¶å»ï¼ <strong>å¼ç¨è®¡æ°æºå¶ (Reference Counting) ä¸åå¾åæ¶ (GC) çä»£éåè¯´</strong>ï¼å¹¶åæä¸ºä½å¨æäºé«æ§è½åºæ¯ä¸ï¼æä»¬éè¦æå¨å¹²é¢è¿ä¸æºå¶ä»¥é¿å "Stop-the-World"ã</p>
<h2 id="2-åè®®å±æ¾å¼çæ§å¶-explicit-resource-management">2. åè®®å±ââæ¾å¼çæ§å¶ (Explicit Resource Management)</h2>
<p>å¦æè¯´ C++ çå²å­¦æ¯âä½ æ²¡æè°ç¨çä¸è¥¿å°±ä¸éè¦ä»åºä»£ä»·âï¼é£ä¹ Python çå²å­¦åæ¯âä¸ºäºå¼åæçï¼ä½ å¿é¡»æ¥åè¿è¡æ¶å¼éâãå¨èµæºç®¡çåæ§å¶æµè¿ä¸å±ï¼è¿ç§ Trade-off è¡¨ç°å¾æ·æ¼å°½è´ã</p>
<h3 id="21-raii-ç-python-æ å°ä»éå¼ææå°æ¾å¼ä¸ä¸æ">2.1. RAII ç Python æ å°ï¼ä»éå¼ææå°æ¾å¼ä¸ä¸æ</h3>
<p>å¨ C++ ä¸­ï¼RAII (Resource Acquisition Is Initialization) æ¯èµæºç®¡ççé»éæ³åãæä»¬ä¾èµæ å¯¹è±¡çç¡®å®æ§çå½å¨æï¼å½ <code>std::lock_guard</code> ç¦»å¼ä½ç¨åæ¶ï¼ææå½æ° <code>~lock_guard()</code> ä¼èªå¨éæ¾äºæ¥éãè¿ä¸åé½åçå¨ç¼è¯æç¡®å®çæ±ç¼æä»¤ä¸­ï¼é¶è¿è¡æ¶å¼éã</p>
<p>ä½å¨ Python ä¸­ï¼ä½ é¢å¯¹çæ¯ä¸ä¸ªå¸¦ GC çè¿è¡æ¶ã<strong>å¯¹è±¡ççå½å¨æä¸ä½ç¨åæ¯è§£è¦ç</strong>ã<br>
å½ä½ åä¸ <code>f = open("file.txt")</code> åï¼å³ä½¿å½æ°è¿åï¼<code>f</code> æåç <code>PyObject</code> ä¹å¯è½å ä¸ºå¼ç¨è®¡æ°æªå½é¶ï¼ä¾å¦è¢«é­åæè·ï¼ææ¯å¤äºå¾ªç¯å¼ç¨ä¸­ç­å¾ GC æ«æï¼èè¿è¿ä¸è°ç¨ <code>__del__</code>ã</p>
<p><strong>åºå±ççç¸ï¼</strong> ä¾èµ <code>__del__</code> ç®¡çæä»¶å¥æææ°æ®åºè¿æ¥æ¯ç³»ç»ç¼ç¨ä¸­çèªæè¡ä¸ºãä½ æ æ³é¢æµ GC ä½æ¶åçï¼Stop-the-Worldï¼ï¼è¿æå³çä½ çæä»¶æè¿°ç¬¦ (fd) å¯è½ä¼è¢«èå°½ã</p>
<p>ä¸ºäºè§£å³è¿ä¸ªé®é¢ï¼Python å¼å¥äº <strong>ä¸ä¸æç®¡çå¨åè®® (Context Manager Protocol)</strong>ââå³ <code>with</code> è¯­å¥ã</p>
<h4 id="211-åè®®è§£æ__enter__-ä¸-__exit__">2.1.1. åè®®è§£æï¼<code>__enter__</code> ä¸ <code>__exit__</code></h4>
<p><code>with</code> è¯­å¥æ¬è´¨ä¸æ¯ç¼è¯å¨æ³¨å¥ç <code>try...finally</code> åçè¯­æ³ç³ï¼ä½å®å°èµæºç®¡ççé»è¾å°è£å°äºå¯¹è±¡åé¨ã</p>
<ul>
<li><strong><code>__enter__(self)</code></strong>: å¯¹åº C++ çæé é»è¾ãåéèµæºï¼è¿åå¥æã</li>
<li><strong><code>__exit__(self, exc_type, exc_val, exc_tb)</code></strong>: å¯¹åº C++ çææé»è¾ãæ è®ºä»£ç åæ¯æ­£å¸¸ç»æè¿æ¯æåºå¼å¸¸ï¼VM é½ä¼å¼ºå¶è·³è½¬å°è¿éã</li>
</ul>
<p><strong>ä»£ç å®ç°ï¼æåä¸ä¸ªåå­çº§éå«å£«</strong></p>
<p>è®©æä»¬ç¨ Python å®ç°ä¸ä¸ªç±»ä¼¼ C++ <code>std::lock_guard</code> çæºå¶ãæ³¨æç <code>__exit__</code> å¦ä½å¤çå¼å¸¸ä¼ æ­ââè¿æ¯ C++ ææå½æ°éå¸¸æåé¿åçï¼æææåºå¼å¸¸ä¼å¯¼è´ <code>std::terminate</code>ï¼ï¼èå¨ Python ä¸­å´æ¯æ§å¶æµçä¸é¨åã</p>
<pre><code class="language-python">import threading
from types import TracebackType
from typing import Optional, Type

class ScopedLock:
    """
    æ¨¡æ C++ std::lock_guard ç RAII è¡ä¸ºã
    åºå±å¯¹åº opcode: SETUP_WITH -&gt; ... -&gt; WITH_EXCEPT_START / CALL_FUNCTION (__exit__)
    """
    __slots__ = ('_lock',) # åå­ä¼åï¼ç¦æ­¢ __dict__ï¼ä»åéæéå¤§å°çåå­

    def __init__(self, lock: threading.Lock):
        self._lock = lock

    def __enter__(self):
        # å¯¹åº lock.acquire()ï¼é»å¡ç´å°è·å¾é
        # è¿åå¼ç»å®å° with ... as target ç target
        self._lock.acquire()
        return self 

    def __exit__(self, 
                 exc_type: Optional[Type[BaseException]], 
                 exc_val: Optional[BaseException], 
                 exc_tb: Optional[TracebackType]):
        # å¯¹åº lock.release()
        # è¿æ¯ä¸ä¸ªç¡®å®æ§çæ¸çç¹ï¼ä¸ä¾èµ GC
        self._lock.release()
        
        # Trade-off: 
        # å¦æè¿å Trueï¼å¼å¸¸è¢«åå¬ï¼ç±»ä¼¼ catch {...}ï¼ã
        # å¦æè¿å False æ Noneï¼å¼å¸¸ç»§ç»­åä¸ä¼ æ­ï¼Rethrowï¼ã
        if exc_type:
            print(f"[System Logic] Detecting Unwind: {exc_type.__name__}")
            # è¿éå¯ä»¥éæ©å¤çå¼å¸¸ï¼æèè®©å®ç»§ç»­å¯¼è´æ å±å¼
        return False

# Usage
lock = threading.Lock()
with ScopedLock(lock):
    # Critical Section
    print("In Critical Section")
    # å³ä½¿è¿éåç 1/0 å¼å¸¸ï¼_lock.release() ä¾ç¶ä¼è¢«ç²¾åæ§è¡

</code></pre>
<p>ä»å­èç è§åº¦çï¼<code>with</code> è¯­å¥çæäº <code>SETUP_WITH</code> æä»¤ï¼å®å° <code>__exit__</code> æ¹æ³åå¥<strong>è¿è¡æ¶æ  (Evaluation Stack)</strong>ãè¿æ¯ C++ çç¼è¯å¨éææå¥ææè°ç¨è¦éå¾å¤ï¼ä½å®èµäºäºè¿è¡æ¶å¨æå¤çå¼å¸¸ççµæ´»æ§ã</p>
<h3 id="22-ç¶ææºçé­æ³çæå¨-generators-ä¸æ å¸§æä¹å">2.2. ç¶ææºçé­æ³ï¼çæå¨ (Generators) ä¸æ å¸§æä¹å</h3>
<p>å¨ Java ä¸­ï¼å¦æä½ æ³å®ç°ä¸ä¸ªæ°æ§è¿­ä»£å¨ï¼Iteratorï¼ï¼ä½ éå¸¸éè¦å®ä¹ä¸ä¸ªç±»ï¼ç»´æ¤ <code>currentIndex</code> ç¶æï¼å¹¶å®ç° <code>hasNext()</code> å <code>next()</code>ãè¿æ¯ä¸ç§<strong>æ¾å¼çç¶ææº</strong>ç»´æ¤ã</p>
<p>Python ç Generator åå¼å¥äºä¸ç§æ´é«é¶çæ½è±¡ï¼<strong>éå¼ç¶ææº</strong>ï¼æèæ´åç¡®å°è¯´ï¼<strong>ç¨æ·æçæ å¸§æèµ·</strong>ã</p>
<h4 id="221-æ ¸å¿å·®å¼c-æ -vs-python-æ ">2.2.1. æ ¸å¿å·®å¼ï¼C æ  vs. Python æ </h4>
<p>çè§£ Generator çå³é®å¨äºçè§£ Python çå½æ°è°ç¨æ¨¡åï¼</p>
<ol>
<li><strong>C Stack (ç³»ç»æ ):</strong> Python è§£éå¨ï¼Cç¨åºï¼èªèº«çå½æ°è°ç¨æ ã</li>
<li><strong>Python Stack (èææ ):</strong> Python ä»£ç æ§è¡æ¶çæ å¸§ (<code>PyFrameObject</code>) é¾è¡¨ã</li>
</ol>
<p>å³é®ç¹æ¥äºï¼<strong><code>PyFrameObject</code> æ¯åéå¨å ï¼Heapï¼ä¸çå¯¹è±¡</strong>ã</p>
<p>å½ä½ è°ç¨ä¸ä¸ªæ®éå½æ°æ¶ï¼Python åå»ºä¸ä¸ª Frameï¼æ§è¡å®åéæ¯ã<br>
ä½å½ä½ è°ç¨ä¸ä¸ª Generator å½æ°æ¶ï¼</p>
<ol>
<li>Python åå»ºä¸ä¸ª Frameã</li>
<li>éå° <code>yield</code> å³é®å­æ¶ï¼è§£éå¨<strong>æå</strong>è¯¥ Frame çæ§è¡ã</li>
<li><strong>ä¿å­æä»¤æé (f_lasti)</strong>ï¼è®°å½å½åæ§è¡å°äºåªæ¡å­èç ã</li>
<li><strong>ä¿å­æä½æ°æ </strong>ï¼è®°å½å½åçä¸´æ¶åéã</li>
<li>å°æ§å¶æè¿åç»è°ç¨èï¼ä½<strong>ä¸éæ¯è¯¥ Frame</strong>ã</li>
</ol>
<p>è¿æå³çï¼Generator æ¬è´¨ä¸æ¯ä¸ä¸ª<strong>éé¸äºçå½å¨æçæ å¸§</strong>ã</p>
<h4 id="222-ä»£ç å®ç°çª¥æ¢æèµ·çåæ ¸">2.2.2. ä»£ç å®ç°ï¼çª¥æ¢æèµ·çåæ ¸</h4>
<p>æä»¬å¯ä»¥éè¿ <code>inspect</code> æ¨¡åç´æ¥è§å¯è¿ä¸ªâåµå°¸âæ å¸§çåé¨ç¶æãè¿å¨ C++ ä¸­éè¦ GDB æè½åå°ï¼èå¨ Python ä¸­ï¼è¿æ¯è¯­è¨ç¹æ§çä¸é¨åã</p>
<pre><code class="language-python">import inspect

def stateful_execution():
    """
    ä¸ä¸ªç®åççæå¨ï¼æ¼ç¤ºæ å¸§çæèµ·ä¸æ¢å¤ã
    """
    x = 10          # å±é¨åéï¼å­å¨å¨ f_locals
    yield x         # ç¬¬ä¸æ¬¡æèµ·ï¼ä¿å­ IPï¼è¿å 10
    
    x += 5
    y = "System"
    yield x + 10    # ç¬¬äºæ¬¡æèµ·ï¼è¿å 25
    
    return "EOF"    # æåº StopIteration

# 1. åå»ºçæå¨å¯¹è±¡ï¼æ­¤æ¶å½æ°ä½åçä»£ç ä¸è¡é½è¿æ²¡æ§è¡
gen = stateful_execution()

# 2. ç¬¬ä¸æ¬¡æ¿æ´»
val1 = next(gen)
print(f"Yielded: {val1}")

# --- Hardcore Inspection ---
# è·åçæå¨å³èçæ å¸§å¯¹è±¡ (PyFrameObject)
frame = gen.gi_frame

print(f"\n[Frame Inspection]")
print(f"Instruction Pointer (f_lasti): {frame.f_lasti}") # å½åå­èç åç§»é
print(f"Local Variables (f_locals):  {frame.f_locals}") # {'x': 10}

# 3. æ¢å¤æ§è¡
# è§£éå¨è¯»å frame.f_lastiï¼æ¢å¤ CPU å¯å­å¨ç¶æï¼ç»§ç»­æ§è¡
val2 = next(gen)
print(f"\nYielded: {val2}")
print(f"Local Variables Updated:     {gen.gi_frame.f_locals}") # {'x': 15, 'y': 'System'}

</code></pre>
<h4 id="223-è¿åæä¹ä»è¿­ä»£å¨å°åç¨">2.2.3. è¿åæä¹ï¼ä»è¿­ä»£å¨å°åç¨</h4>
<p>è¿ç§æºå¶çæ·±è¿æä¹å¨äºï¼å®è®©<strong>å¼æ­¥ç¼ç¨</strong>æä¸ºå¯è½ã</p>
<p>å¦æ <code>yield</code> ä¸ä»è½äº§åºå¼ï¼è¿è½æ¥æ¶å¼ï¼éè¿ <code>gen.send()</code>ï¼ï¼é£ä¹è¿ä¸ªå½æ°å°±åæäºä¸ä¸ªå¯ä»¥éè¿æ¶æ¯ä¼ éè¿è¡åä½ç<strong>åç¨ (Coroutine)</strong>ã</p>
<ul>
<li><strong>Java Iterator:</strong> ä»ä»æ¯æ°æ®ççäº§èã</li>
<li><strong>Python Generator:</strong> æ¯ä¸ä¸ªæ¥æç¬ç«æ ç©ºé´ãå¯ä»¥æåãå¯ä»¥æ¢å¤ãå¯ä»¥äº¤äºç<strong>å¾®çº¿ç¨</strong>ã</li>
</ul>
<p>å¨ Python 3.5 ä¹åï¼<code>@asyncio.coroutine</code> æ­£æ¯å©ç¨ <code>yield from</code> å®ç°çãèå¨ Python 3.5 ä¹åï¼<code>async/await</code> åªæ¯å°è¿ç§åºäºçæå¨çåç§é»é­æ³åè£æäºåçè¯­æ³ï¼åºå±ç <code>PyFrameObject</code> è°åº¦é»è¾ä¾ç¶æ¯ä¸èç¸æ¿çã</p>
<p><strong>Trade-off åæï¼</strong></p>
<ul>
<li><strong>æ§è½æèï¼</strong> æ¯æ¬¡ <code>yield</code> åæ¢å¤ç¡®å®æ¯ç®åç C æééå¢è¦æ¢ï¼æ¶å Python å¯¹è±¡å­åï¼ã</li>
<li><strong>æ¶ææ¶çï¼</strong> ä½ ç¨åæ­¥çä»£ç é»è¾ï¼çº¿æ§ç <code>for</code>, <code>while</code>ï¼ï¼ååºäºæå¶å¤æçå¼æ­¥æµå¼å¤çé»è¾ãå¨å¤çæ°ä»¥äº¿è®¡ç AI Token æµæ¶ï¼è¿ç§åå­åå¥½ä¸é»è¾æ¸æ°çæ½è±¡ï¼æ¯æ ä»·çã</li>
</ul>
<h2 id="3-æ·éå±è¢«å¨çè°åº¦-the-reality-of-gil">3. æ·éå±ââè¢«å¨çè°åº¦ (The Reality of GIL)</h2>
<h3 id="31-åå­å®å¨çæè¡¡c-è§è§ä¸ç-ob_refcnt">3.1. åå­å®å¨çæè¡¡ï¼C++ è§è§ä¸ç <code>ob_refcnt</code></h3>
<p>å¨ C++ ä¸­ï¼æä»¬ä½¿ç¨ <code>std::shared_ptr</code> æ¥ç®¡çå¼ç¨è®¡æ°ãä¸ºäºä¿è¯çº¿ç¨å®å¨ï¼<code>std::shared_ptr</code> çå¼ç¨è®¡æ°æä½ï¼<code>incref</code>/<code>decref</code>ï¼åé¨å¿é¡»ä½¿ç¨åå­æä½ï¼Atomic Operationsï¼ï¼éå¸¸å¯¹åºæ±ç¼æä»¤ <code>LOCK XADD</code>ã</p>
<p><strong>Trade-off çæ ¸å¿ï¼</strong><br>
åå­æä½ä¸æ¯åè´¹çãå¨å¤æ ¸ CPU ä¸ï¼åå­æä½ä¼å¯¼è´ç¼å­ä¸è´æ§æµéï¼Cache Coherence Trafficï¼æ¿å¢ï¼è¿æ¯æ®éçåå­è¯»åè¦æ¢ä¸ä¸ªæ°éçº§ã</p>
<p>Python çè®¾è®¡èé¢ä¸´ä¸ä¸ªéæ©ï¼</p>
<ol>
<li><strong>ç»ç²åº¦éï¼Fine-grained Lockingï¼ï¼</strong> è®©æ¯ä¸ª <code>PyObject</code> èªå¸¦ä¸ä¸ª <code>std::mutex</code>ï¼æèä½¿ç¨åå­æä½æ´æ°å¼ç¨è®¡æ°ã</li>
</ol>
<ul>
<li><em>åæï¼</em> åçº¿ç¨æ§è½ä¸é 30%~50%ï¼åå²å®æµæ°æ®ï¼ãå ä¸ºå³ä½¿å¨åçº¿ç¨ä¸ï¼ä½ ä¹å¿é¡»æ¯ä»åå­æä½çæè´µå¼éã</li>
</ul>
<ol start="2">
<li><strong>å·¨éï¼Coarse-grained Lockingï¼ï¼</strong> å¼å¥ä¸æå¨å±çå¤§éï¼GILï¼ï¼ä¿æ¤æ´ä¸ªè§£éå¨ç¶æã</li>
</ol>
<ul>
<li><em>åæï¼</em> å¤æ ¸å¹¶åæä¸ºæ³¡å½±ï¼å¤çº¿ç¨æ²¦ä¸ºå¹¶åï¼Concurrencyï¼èéå¹¶è¡ï¼Parallelismï¼ã</li>
<li><em>æ¶çï¼</em> åçº¿ç¨æå¶é«æï¼æ éå¼éï¼ï¼C æ©å±ç¼åæå¶ç®åï¼é»è®¤ä¸éè¦èèçº¿ç¨å®å¨ï¼ã</li>
</ul>
<p>Python éæ©äºåèãGIL æ¬è´¨ä¸æ¯ä¸ä¸ª <strong>äºæ¥é (Mutex)</strong>ï¼å®ä¿æ¤çä¸æ¯ä½ çåéï¼èæ¯ <code>PyObject</code> ç»æä½ä¸­ç <code>ob_refcnt</code> å­æ®µä»¥åè§£éå¨çå¨å±ç¶æã</p>
<blockquote>
<p><strong>C++ ç¨åºåçé¡¿æï¼</strong><br>
GIL çå­å¨ï¼æ¯ä¸ºäºè®© CPython ç <code>malloc</code> å <code>free</code>ï¼å³ <code>Py_INCREF</code>/<code>Py_DECREF</code>ï¼å¨ä¸ä½¿ç¨åå­æä»¤çæåµä¸ï¼ä¾ç¶è½ä¿æåå­çä¸è´æ§ã</p>
</blockquote>
<h3 id="32-ç«ææ¡ä»¶ççç¸åå­æ§çå¹»è§">3.2. ç«ææ¡ä»¶ççç¸ï¼åå­æ§çå¹»è§</h3>
<p>å¾å¤åå­¦èè¯¯ä»¥ä¸ºï¼âæ¢ç¶æ GILï¼åä¸æ¶å»åªæä¸ä¸ªçº¿ç¨å¨è·ï¼é£æå°±ä¸éè¦éäºãâ<br>
è¿æ¯å¤§éç¹éçã</p>
<p><strong>GIL ä¿è¯çæ¯å­èç ï¼Bytecodeï¼æ§è¡çåå­æ§ï¼èä¸æ¯ä¸å¡é»è¾çåå­æ§ã</strong></p>
<p>æä½ç³»ç»ï¼æè Python è§£éå¨åé¨çè°åº¦å¨ï¼å¯ä»¥å¨<strong>ä»»æä¸¤ä¸ªå­èç ä¹é´</strong>è¿è¡ä¸ä¸æåæ¢ãå¦æä½ çä¸å¡é»è¾ç±å¤æ¡å­èç ç»æï¼é£ä¹å¨ä¸­é´è¢«åèµ°å°±æ¯å¿ç¶åççã</p>
<h4 id="321-ä»£ç å®ç°è§£å-n--1">3.2.1. ä»£ç å®ç°ï¼è§£å <code>n += 1</code></h4>
<p>å¨ C++ ä¸­ï¼<code>n++</code> éå¸¸ä¹ä¸æ¯åå­çï¼é¤éç¨ <code>std::atomic&lt;int&gt;</code>ï¼ï¼å®å¯¹åº <code>Read-Modify-Write</code> ä¸ä¸ªæ­¥éª¤ãPython ä¸­äº¦ç¶ï¼ä½æ´å å¤æã</p>
<p>è®©æä»¬ç¨ <code>dis</code> æ¨¡åæ¥çç <code>n += 1</code> å¨åºå±å°åºåçäºä»ä¹ã</p>
<pre><code class="language-python">import dis
import threading

n = 0

def race_condition():
    global n
    # è¿ä¸è¡çä¼¼ç®åçä»£ç ï¼å¨ VM ç¼éæ¯ 4 æ¡æä»¤
    n += 1

print(f"--- Bytecode Disassembly for 'n += 1' ---")
dis.dis(race_condition)

</code></pre>
<p><strong>è¾åºåæï¼æ±ç¼è§è§ï¼ï¼</strong></p>
<pre><code class="language-text">  7           0 LOAD_GLOBAL              0 (n)    &lt;-- Step 1: è¯»å n å°æ é¡¶
              2 LOAD_CONST               1 (1)    &lt;-- Step 2: åå¥å¸¸æ° 1
              4 INPLACE_ADD                       &lt;-- Step 3: æ§è¡å æ³
              6 STORE_GLOBAL             0 (n)    &lt;-- Step 4: åå n

</code></pre>
<p><strong>ç¾é¾åççç¬é´ï¼</strong></p>
<ol>
<li><strong>çº¿ç¨ A</strong> æ§è¡äº <code>LOAD_GLOBAL</code>ï¼æ¿å°äº <code>n=0</code>ï¼æ¾å¥èªå·±çæ å¸§ã</li>
<li><strong>GIL éæ¾ï¼</strong> (å¯è½æ¯æ¶é´çå°äºï¼Python 3.2+ é»è®¤ <code>sys.getswitchinterval()</code> ä¸º 5ms)ã</li>
<li><strong>çº¿ç¨ B</strong> è·å¾ GILï¼æ§è¡å®æ´ç <code>n += 1</code>ãæ­¤æ¶åå­ä¸­ç <code>n</code> åæäº 1ã</li>
<li><strong>GIL éæ°è¢«çº¿ç¨ A è·åã</strong></li>
<li><strong>çº¿ç¨ A</strong> ç»§ç»­æ§è¡ <code>INPLACE_ADD</code>ãæ³¨æï¼å®æ éç <code>n</code> ä¾ç¶æ¯ 0ï¼å ä¸ºå®æ¯ä»èªå·±çæ å¸§ä¸­è¯»åæä½æ°ï¼èä¸æ¯éæ°å»åå­è¯»ï¼ã</li>
<li><strong>çº¿ç¨ A</strong> è®¡ç® <code>0 + 1 = 1</code>ã</li>
<li><strong>çº¿ç¨ A</strong> æ§è¡ <code>STORE_GLOBAL</code>ï¼æ <code>1</code> åå¥åå­ï¼è¦çäºçº¿ç¨ B çç»æã</li>
</ol>
<p><strong>ç»æï¼</strong> ä¸¤ä¸ªçº¿ç¨åå äºä¸æ¬¡ï¼ç»æåºè¯¥æ¯ 2ï¼ä½å®éæ¯ 1ãè¿å°±æ¯å¸åç <strong>Lost Update</strong> é®é¢ã</p>
<h4 id="322-å¤æ ¸æ¶ä»£çæ¤èªæåº-the-convoy-effect">3.2.2. å¤æ ¸æ¶ä»£çâæ¤èªæåºâ (The Convoy Effect)</h4>
<p>å¨åæ ¸æ¶ä»£ï¼GIL åªæ¯ç®åçåæ¶å¤ç¨ãä½å¨å¤æ ¸ CPU ä¸ï¼æåµä¼åå¾æ´ç³ã</p>
<p>å½ææ GIL ççº¿ç¨ A éæ¾éï¼ä¾å¦å ä¸º I/O æå¼ºå¶åæ¢ï¼æ¶ï¼OS å¯è½ä¼åæ¶å¤éçº¿ç¨ BãC å Dãå®ä»¬ä¼å¨ä¸åç CPU æ ¸å¿ä¸éæ¥ï¼ç¯çäºæ¢è¿æå¯ä¸çéãç»æåªæ B æ¢å°äºï¼C å D äºæ¢å¤±è´¥ï¼åæ¬¡è¢« OS æèµ·ã</p>
<p>è¿ç§ <strong>âå¤é-äºæ¢-å¤±è´¥-æèµ·â</strong> çå¾ªç¯ä¼å¯¼è´ä¸¥éç CPU æå¨ (Thrashing)ãè¿ä¹æ¯ä¸ºä»ä¹å¨è®¡ç®å¯éåä»»å¡ä¸­ï¼Python å¤çº¿ç¨å¾å¾æ¯åçº¿ç¨è¿è¦æ¢ââæä»¬ä¸ä»æ²¡æå©ç¨å¤æ ¸ï¼åèæµªè´¹äºå¤§éç CPU å¨æå¨ OS çè°åº¦å¼éä¸ã</p>
<h4 id="323-ä¸ºä»ä¹å¿é¡»ä½¿ç¨-threadinglock">3.2.3. ä¸ºä»ä¹å¿é¡»ä½¿ç¨ <code>threading.Lock</code>ï¼</h4>
<p>å¨ Python ä¸­ä½¿ç¨ <code>threading.Lock</code>ï¼å®éä¸æ¯å¨åºç¨å±å¼å¥äºç¬¬äºæéã</p>
<pre><code class="language-python">lock = threading.Lock()

def safe_increment():
    global n
    # ç³è¯·éï¼å¦ææ¿ä¸å°ï¼çº¿ç¨è¿å¥é»å¡ç¶æï¼GIL èªå¨éæ¾ç»å«äºº
    with lock:
        # ä¸´çåº (Critical Section)
        # å³ä½¿ GIL å¨è¿ééæ¾ï¼å¶ä»çº¿ç¨ä¹æ æ³è¿å¥è¿ä¸ªä»£ç å
        # å ä¸ºå®ä»¬æ¿ä¸å°åºç¨å±ç lock
        n += 1

</code></pre>
<p><strong>åºå±é»è¾ï¼</strong></p>
<ul>
<li><strong>GIL</strong> ä¿æ¤çæ¯ <code>ob_refcnt</code> ä¸ä¹±å¥ï¼é²æ­¢è§£éå¨å´©æºï¼ã</li>
<li><strong>threading.Lock</strong> ä¿æ¤çæ¯ <code>n</code> çå¼ç¬¦åé¢æï¼é²æ­¢ä¸å¡é»è¾éè¯¯ï¼ã</li>
</ul>
<h3 id="33-io-éæ¾ä¸-cpu-å¯éåçæ­»å±">3.3. I/O éæ¾ä¸ CPU å¯éåçæ­»å±</h3>
<p>æä»¬å¸¸è¯´âPython å¤çº¿ç¨éå I/O å¯éåâï¼å¶åºå±æºçå¨äºï¼</p>
<p>å½ Python æ§è¡ç³»ç»è°ç¨ï¼å¦ <code>read()</code>, <code>write()</code>, <code>recv()</code>, <code>sleep()</code>ï¼æ¶ï¼C ä»£ç ä¼å¨è°ç¨é»å¡ç C å½æ°ä¹åï¼<strong>ä¸»å¨éæ¾ GIL</strong>ï¼è°ç¨ <code>Py_BEGIN_ALLOW_THREADS</code> å®ï¼ã</p>
<pre><code class="language-c">/* CPython æºç ä¼ªä»£ç  (socket module) */
static PyObject *
sock_recv(PySocketSockObject *s, PyObject *args)
{
    // ... è§£æåæ° ...
    
    // éæ¾ GILï¼åè®¸å¶ä» Python çº¿ç¨è¿è¡
    Py_BEGIN_ALLOW_THREADS
    
    // é»å¡çç³»ç»è°ç¨ï¼æ­¤æ¶ CPU ä¸å¨ Python æé
    count = recv(s-&gt;sock_fd, buffer, len, flags);
    
    // éæ°è·å GILï¼åå¤è¿å Python å¯¹è±¡
    Py_END_ALLOW_THREADS
    
    // ... åè£ç»æ ...
    return result;
}

</code></pre>
<p>è¿æå³çï¼å½ä¸ä¸ªçº¿ç¨å¨ç­ç½ç»åæ¶ï¼å¦ä¸ä¸ªçº¿ç¨å¯ä»¥æ¿å° GIL å»è· Python ä»£ç ãè¿å°±æ¯ä¸ºä»ä¹å¨ç¬è«ãWeb æå¡ä¸­ï¼Python çå¤çº¿ç¨ä¾ç¶ææã</p>
<p>ä½å¦ææ¯ <strong>CPU å¯éå</strong>ï¼å¦å¾åå¤çãç©éµè®¡ç®ï¼ï¼çº¿ç¨ä¸ä¼ä¸»å¨éæ¾ GILï¼åªè½ç­å¾è§£éå¨å¼ºå¶åæ¢ï¼Check Intervalï¼ãè¿ä¸ä»æ æ³å©ç¨å¤æ ¸ï¼åèå ä¸ºé¢ç¹çéäºæ¢ï¼Lock Contentionï¼åä¸ä¸æåæ¢ï¼å¯¼è´å¤çº¿ç¨æ¯åçº¿ç¨è¿è¦æ¢ï¼</p>
<h2 id="4-è¿åå±ä¸»å¨çåä½-cooperative-concurrency">4. è¿åå±ââä¸»å¨çåä½ (Cooperative Concurrency)</h2>
<h3 id="41-ä»çæå¨å°åç¨æ æ çèå©ä¸ä»£ä»·">4.1. ä»çæå¨å°åç¨ï¼æ æ çèå©ä¸ä»£ä»·</h3>
<p>å¨ C++20 å¼å¥ Coroutines ä¹åï¼æä»¬ä¹ æ¯ç¨ç¶ææºæååè°ãPython çåç¨æ¬è´¨ä¸å°±æ¯<strong>ç¼è¯å¨èªå¨çæçæéç¶ææº</strong>ã</p>
<h4 id="411-æ ¸å¿å¯¹å³python-stackless-vs-go-stackful">4.1.1. æ ¸å¿å¯¹å³ï¼Python (Stackless) vs. Go (Stackful)</h4>
<ul>
<li>
<p><strong>Go (Goroutine):</strong><br>
Go è¿è¡æ¶ä¸ºæ¯ä¸ª Goroutine åéä¸ä¸ª<strong>çå®çãå¯å¢é¿çæ </strong>ï¼åå§çº¦ 2KBï¼ãå½ Goroutine é»å¡æ¶ï¼Go çè°åº¦å¨ä¿å­å½åçå¯å­å¨ç¶æï¼SP, PC ç­ï¼å°è¯¥æ ä¸­ï¼ç¶ååæ¢å°å¦ä¸ä¸ª Goroutineãè¿å ä¹ç­åäºç¨æ·æçº¿ç¨ã</p>
</li>
<li>
<p><em>ä¼ç¹ï¼</em> æ­¤æ¶ï¼ä»£ç æ¯åæ­¥åçï¼åºå±æ¯å¼æ­¥è·çãä½ ä¸éè¦ <code>await</code>ï¼å ä¸ºè°åº¦å¨æ¯éå¼çã</p>
</li>
<li>
<p><em>ç¼ºç¹ï¼</em> æ¯ä¸ª Goroutine é½æåå­å¼éï¼è½å°ä½æï¼ï¼ä¸éè¦å¤æçè¿è¡æ¶è°åº¦å¨ã</p>
</li>
<li>
<p><strong>Python (Coroutine):</strong><br>
Python çåç¨è¢«ç§°ä¸º <strong>æ æ åç¨ (Stackless)</strong>ãä½è¿å¹¶ä¸æå³çå®æ²¡ææ ï¼èæ¯æå® <strong>ä¸ä¿ç C è¯­è¨å±é¢çç³»ç»è°ç¨æ </strong>ã<br>
å½ä½  <code>await</code> æ¶ï¼Python ä»ä»æ¯å°å½åçèææºæ å¸§ (<code>PyFrameObject</code>ï¼ä¸ä¸ªåéå¨å ä¸çå¯¹è±¡) æèµ·ï¼å¹¶å° C æ åéï¼Unwindï¼å° Event Loopãç¸æ¯ä¹ä¸ï¼Go ç Goroutine æ¯ <strong>ææ ç (Stackful)</strong>ï¼å®æ¥æç¬ç«çãå¯å¨ææ©å®¹çè¿ç»­åå­ç©ºé´ï¼åå§çº¦ 2KBï¼ï¼è½ä¿å­å®æ´çè°ç¨é¾è·¯ç¶æã</p>
</li>
</ul>
<h4 id="412-å¼æ­¥çä¼ ææ§-function-coloring">4.1.2. å¼æ­¥çâä¼ ææ§â (Function Coloring)</h4>
<p>è¿å°±æ¯ä¸ºä»ä¹ Python çå¼æ­¥å·æ<strong>ä¼ ææ§</strong>ï¼<br>
å¦æå½æ° A è°ç¨äºå¼æ­¥å½æ° B (<code>await B()</code>)ï¼é£ä¹ A èªèº«å¿é¡»åæå¼æ­¥å½æ° (<code>async def A()</code>)ã</p>
<p><strong>åºå±é»è¾ï¼</strong><br>
å ä¸º Python æ²¡æç¬ç«çåç¨æ ï¼å®æ æ³å¨æ®éå½æ°ç C æ å¸§ä¸­é´æåãåªæè¢«æ è®°ä¸º <code>async</code> çå½æ°ï¼å³çæå¨ï¼ï¼æå·å¤âæå-æ¢å¤âçå­èç æä»¤ (<code>YIELD_FROM</code> / <code>SEND</code>)ã</p>
<p>è¿æ¯ä¸ä¸ªå·¨å¤§ç Trade-offï¼</p>
<ul>
<li><strong>çºç²ï¼</strong> å¼åä½éªçå²è£ï¼åæ­¥ä»£ç æ æ³ç´æ¥å¤ç¨å¼æ­¥åºï¼ã</li>
<li><strong>æ¢åï¼</strong> æè´çè½»éçº§ãåå»ºä¸ä¸ª Python åç¨å ä¹åªæ¶èä¸ä¸ª Python å¯¹è±¡çåå­ï¼ä¸åæ¢å¼éä»ä¸ºä¸æ¬¡å½æ°è°ç¨ï¼å®å¨ä¸æ¶åå¯å­å¨ä¿å­æå¤æçæ æ·è´ã</li>
</ul>
<h3 id="42-event-loop-çåæ ¸reactor-æ¨¡å¼ç-python-å®ç°">4.2. Event Loop çåæ ¸ï¼Reactor æ¨¡å¼ç Python å®ç°</h3>
<p>å¥å» <code>asyncio</code> åä¸½çå°è£ï¼å¶æ ¸å¿åªæ¯ä¸ä¸ªæ­»å¾ªç¯ï¼ä¸æ­æ¥è¯¢æä½ç³»ç»åæ ¸ï¼âåªäºæä»¶æè¿°ç¬¦ (fd) åå¤å¥½äºï¼â</p>
<p>è¿æ­£æ¯ç»å¸ç <strong>Reactor æ¨¡å¼</strong>ã</p>
<p>å¨ Linux ä¸ï¼è¿å¯¹åº <code>epoll_wait</code>ï¼å¨ macOS/BSD ä¸ï¼æ¯ <code>kevent</code>ï¼å¨ Windows ä¸ï¼æ¯ <code>IOCP</code>ã</p>
<h4 id="421-ä»£ç å®ç°æåä¸ä¸ª-mini-asyncio">4.2.1. ä»£ç å®ç°ï¼æåä¸ä¸ª mini-asyncio</h4>
<p>ä¸ºäºè¯æ <code>asyncio</code> æ²¡æä»»ä½é»é­æ³ï¼æä»¬å°ç»è¿ <code>asyncio</code> åºï¼ç´æ¥ä½¿ç¨ <code>selectors</code> æ¨¡åï¼å¯¹ <code>epoll</code>/<code>kqueue</code> çä½çº§å°è£ï¼æ¥å®ç°ä¸ä¸ªå¼æ­¥è¿è¡æ¶ã</p>
<p><strong>C++ å¼åèè¯·æ³¨æï¼</strong> ä¸é¢çä»£ç å±ç¤ºäºå¦ä½å°âåè°å°ç±âéè¿çæå¨åå¹³æâåæ­¥å¤è§âã</p>
<pre><code class="language-python">import selectors
import socket
import time
from collections import deque

# 1. å¨å±äºä»¶å¾ªç¯ (The Reactor)
selector = selectors.DefaultSelector()
task_queue = deque() # å°±ç»ªä»»å¡éå

class Future:
    """
    å¯¹åº C++ std::future æ JavaScript Promiseã
    å®æ¯å¼æ­¥æä½ç»æçå ä½ç¬¦ã
    """
    def __init__(self):
        self.result = None
        self._callbacks = []

    def set_result(self, value):
        self.result = value
        for cb in self._callbacks:
            cb(self)

    def __await__(self):
        # é­æ³æå¨ï¼yield self åè¯ Task "æè¿æ²¡å¥½ï¼è¯·æèµ·"
        yield self 
        return self.result

def async_socket_read(sock):
    """
    ä¸ä¸ªæ¨¡æçä½çº§å¼æ­¥ socket è¯»åã
    """
    f = Future()

    def on_readable():
        f.set_result(sock.recv(4096))
        # è¯»åå®æ¯ï¼ä» epoll ä¸­æ³¨é
        selector.unregister(sock)

    # æ³¨åå° epoll/kqueueï¼å½ sock å¯è¯»æ¶ï¼è°ç¨ on_readable
    # C++ å¯¹åº: epoll_ctl(epfd, EPOLL_CTL_ADD, fd, &amp;event)
    selector.register(sock, selectors.EVENT_READ, on_readable)
    
    # ç«å³è¿å Futureï¼ä¸é»å¡
    return f

class Task:
    """
    é©±å¨åç¨æ§è¡çå®¹å¨ã
    ç±»ä¼¼äº asyncio.Taskã
    """
    def __init__(self, coro):
        self.coro = coro
        self.step() # å¯å¨åç¨

    def step(self, future=None):
        try:
            # æ¢å¤åç¨æ§è¡ï¼send(result)
            if future is None:
                next_future = self.coro.send(None)
            else:
                next_future = self.coro.send(future.result)
            
            # åç¨éå°äº awaitï¼è¿åäºä¸ä¸ª Future
            # æä»¬ç»è¿ä¸ª Future å ä¸ªåè°ï¼ä¸æ¦å®å®æäºï¼å°±ç»§ç»­ step()
            next_future._callbacks.append(self.step)
            
        except StopIteration:
            # åç¨æ§è¡å®æ¯
            pass

# --- ä¸å¡é»è¾ (User Code) ---
# æ³¨æï¼async def æ¬è´¨ä¸æ¯çæå¨å·¥å
async def fetch_url(url):
    # æ¨¡æå»ºç« socket
    sock = socket.socket()
    sock.setblocking(False)
    try:
        sock.connect(('example.com', 80))
    except BlockingIOError:
        pass # æ­£å¸¸ç°è±¡
    
    # åé HTTP è¯·æ±
    req = f"GET / HTTP/1.0\r\nHost: example.com\r\n\r\n".encode()
    # ç®åçï¼è¿éå¶å®ä¹åºè¯¥ await write
    sock.send(req) 

    print(f"[{url}] Waiting for data...")
    
    # å³é®ç¹ï¼await æèµ·å½åæ å¸§ï¼äº¤åºæ§å¶æ
    # æ­¤æ¶ï¼Event Loop å¯ä»¥å»å¤çå¶ä» Task
    data = await async_socket_read(sock)
    
    print(f"[{url}] Received {len(data)} bytes")

# --- é©±å¨å± (Event Loop Driver) ---
def run_loop():
    # åå»ºä¸¤ä¸ªå¹¶åä»»å¡
    Task(fetch_url("Task-A"))
    Task(fetch_url("Task-B"))

    print("--- Event Loop Started ---")
    while True:
        # 1. é»å¡ç­å¾ IO äºä»¶ (epoll_wait)
        # å¦ææ²¡æ IO å°±ç»ªï¼CPU ä½¿ç¨çä¸º 0
        events = selector.select()
        
        # 2. å¤çäºä»¶ (Callback Dispatch)
        for key, mask in events:
            callback = key.data
            callback()
        
        # ç®åçéåºæ¡ä»¶
        if not selector.get_map():
            break
    print("--- Event Loop Finished ---")

if __name__ == "__main__":
    run_loop()

</code></pre>
<h4 id="422-æ·±åº¦è§£ææ§å¶æµçç¿»è½¬">4.2.2. æ·±åº¦è§£æï¼æ§å¶æµçç¿»è½¬</h4>
<ol>
<li><strong>Callback (C é£æ ¼):</strong> ææçé»è¾è¢«ææ£å¨ <code>on_readable</code>, <code>on_writable</code> ç­åè°å½æ°ä¸­ï¼ç¶æç»´æ¤æå¶çè¦ï¼å¿é¡»æ¾å¼ä¼ é context æéï¼ã</li>
<li><strong>Coroutine (Python é£æ ¼):</strong></li>
</ol>
<ul>
<li><code>await</code> å³é®å­å° <code>async_socket_read</code> ç <code>Future</code> æç» Event Loopã</li>
<li>Event Loop å° <code>Task.step</code> æ³¨åä¸ºåè°ã</li>
<li>å½ <code>epoll</code> å¤éæ¶ï¼éè¿åè°è§¦å <code>Task.step</code>ã</li>
<li><code>Task.step</code> è°ç¨ <code>coro.send()</code>ï¼<strong>æ¢å¤</strong> ä¹åæèµ·ç <code>fetch_url</code> æ å¸§ã</li>
</ul>
<p><strong>å¯¹ C++ ç¨åºåçå¯ç¤ºï¼</strong><br>
Python ç <code>asyncio</code> å®éä¸æ¯å¨åçº¿ç¨åå®ç°äºä¸ä¸ª<strong>éæ¢å å¼æä½ç³»ç»</strong>ã<code>Task</code> æ¯è¿ç¨ï¼<code>Future</code> æ¯ç³»ç»è°ç¨ï¼è <code>Event Loop</code> å°±æ¯åæ ¸è°åº¦å¨ã</p>
<h2 id="5-ç ´å±å±æç ´è¾¹ç-extending-with-c">5. ç ´å±å±ââæç ´è¾¹ç (Extending with C++)</h2>
<p>å¨åå ç« ä¸­ï¼æä»¬ææçä¼åé½å¨ Python èææºçå´å¢ä¹åï¼æ è®ºæ¯ <code>asyncio</code> çç¨æ·æè°åº¦ï¼è¿æ¯ <code>multiprocessing</code> çè¿ç¨é´éä¿¡ï¼æ¬è´¨ä¸é½æ¯å¨è§é¿ GILã</p>
<p>ä½å¨è¿ä¸ç« ï¼æä»¬è¦æ­£é¢<strong>å»ç©¿</strong>è¿å µå¢ãæä»¬å°ç¼å C++ æ©å±ï¼ä¸»å¨éæ¾ GILï¼è®© Python çº¿ç¨éåä¸ºåçº¯ç C++ çº¿ç¨ï¼ä»èåæ¦¨åº CPU çæ¯ä¸ä¸ªæ¶éå¨æã</p>
<p>å½ä½ ç Profilerï¼æ§è½åæå¨ï¼æ¾ç¤ºç¶é¢ä¸åæ¯ IO ç­å¾ï¼èæ¯ CPU ç <code>ALU</code>ï¼ç®æ¯é»è¾ååï¼æ»¡è½½æ¶ï¼ä»»ä½ Python å±é¢çä¼åï¼åæ¬ PyPyï¼é½æ¯éé´æçãæ­¤æ¶ï¼å¯ä¸çåºè·¯æ¯å°è®¡ç®å¯éååæ ¸ä¸æ²å° C++ã</p>
<h3 id="51-éæ¾-gil-çèºæ¯ä»ææèå°æè§è">5.1. éæ¾ GIL çèºæ¯ï¼ä»ææèå°æè§è</h3>
<p>æä»¬å¨ç¬¬ä¸ç« æå°ï¼Python è§£éå¨æ¯ä¸ä¸ªå·¨å¤§çç¶ææºï¼GIL ä¿æ¤çè¿ä¸ªç¶ææºçä¸è´æ§ãä½æ¯ï¼<strong>å¦æä½ çä»£ç ä¸æ¶åä»»ä½ Python å¯¹è±¡ï¼PyObjectï¼çæä½ï¼ä½ å°±ä¸éè¦ GILã</strong></p>
<p>æ¯å¦ï¼ç©éµä¹æ³ãå¾åç¼è§£ç ãå¤æçæ°å¼ç§¯åãè¿äºæä½åªéè¦åå§çåå­æéï¼<code>double*</code>, <code>uint8_t*</code>ï¼ã</p>
<h4 id="511-åè®®py_begin_allow_threads">5.1.1. åè®®ï¼<code>Py_BEGIN_ALLOW_THREADS</code></h4>
<p>å¨ C-API å±é¢ï¼Python æä¾äºä¸¤ä¸ªå®æ¥æå¨æ§å¶ GILï¼</p>
<ol>
<li><strong><code>Py_BEGIN_ALLOW_THREADS</code></strong>:</li>
</ol>
<ul>
<li>ä¿å­å½åçº¿ç¨çä¸ä¸æï¼Thread Stateï¼ã</li>
<li><strong>éæ¾äºæ¥é (Release Mutex)</strong>ã</li>
<li>æ­¤æ¶ï¼å¶ä» Python çº¿ç¨å¯ä»¥æ¢å  GIL å¹¶æ§è¡å­èç ã</li>
<li><strong>è­¦åï¼</strong> å¨æ­¤å®ä¹åï¼ä¸¥ç¦è®¿é®ä»»ä½ <code>PyObject</code>ï¼å¦åä¼å¯¼è´ç«å³ç Segfault ææ´éè½çå æåã</li>
</ul>
<ol start="2">
<li><strong><code>Py_END_ALLOW_THREADS</code></strong>:</li>
</ol>
<ul>
<li><strong>é»å¡ç­å¾</strong>ï¼ç´å°éæ°è·å¾äºæ¥éã</li>
<li>æ¢å¤çº¿ç¨ä¸ä¸æã</li>
<li>ç»§ç»­å¤ç Python å¯¹è±¡ï¼å¦å° C++ ç»æåè£æ <code>PyFloat</code>ï¼ã</li>
</ul>
<p>è¿å°±åæ¯å½ä½ ï¼C++ ä»£ç ï¼éè¦å»è¿è¡ä¸åºæ¼«é¿çé­å³ä¿®ç¼ï¼ç¹éè®¡ç®ï¼æ¶ï¼ä½ ä¸»å¨äº¤åºäºä»¤çï¼GILï¼ï¼åè¯è§£éå¨ï¼âä½ ä»¬åç©ï¼æç®å®äºååæ¥æéãâ</p>
<h3 id="52-å®æ-pybind11raii-é£æ ¼çééæ¾">5.2. å®æ Pybind11ï¼RAII é£æ ¼çééæ¾</h3>
<p>ç´æ¥å C-API æå¶ç¹çä¸å®¹æåºéï¼å¼ç¨è®¡æ°å°ç±ï¼ãç°ä»£ C++ å¼åèåºé¦é <code>pybind11</code>ãå®å©ç¨ C++ ç RAII æºå¶ï¼å° GIL çéæ¾å°è£å¾ä¼éä¸å®å¨ã</p>
<h4 id="521-åºæ¯å¤çº¿ç¨èç¹å¡æ´æ¨¡æ-cpu-bound">5.2.1. åºæ¯ï¼å¤çº¿ç¨èç¹å¡æ´æ¨¡æ (CPU Bound)</h4>
<p>åè®¾æä»¬éè¦è®¡ç®  çè¿ä¼¼å¼ï¼è¿æ¯ä¸ä¸ªçº¯è®¡ç®ä»»å¡ã</p>
<p><strong>C++ Extension (<code>cpu_bound.cpp</code>):</strong></p>
<pre><code class="language-cpp">#include &lt;pybind11/pybind11.h&gt;
#include &lt;random&gt;
#include &lt;thread&gt;
#include &lt;vector&gt;

namespace py = pybind11;

// çº¯ C++ é»è¾ï¼ä¸ä¾èµä»»ä½ Python å¤´æä»¶
double monte_carlo_pi(size_t samples) {
    std::random_device rd;
    std::mt19937 gen(rd());
    std::uniform_real_distribution&lt;&gt; dis(0.0, 1.0);

    size_t inside_circle = 0;
    for (size_t i = 0; i &lt; samples; ++i) {
        double x = dis(gen);
        double y = dis(gen);
        if (x * x + y * y &lt;= 1.0) {
            inside_circle++;
        }
    }
    return 4.0 * inside_circle / samples;
}

// åè£å±
double heavy_computation(size_t samples) {
    // 1. è¿å¥ C++ ä¸çï¼ææ GIL
    
    // 2. éæ¾ GIL (RAII)
    // æé å½æ°è°ç¨ PyEval_SaveThread()ï¼ææå½æ°è°ç¨ PyEval_RestoreThread()
    // å¨è¿ä¸ªä½ç¨ååï¼Python è§£éå¨å¯ä»¥å¹¶åè¿è¡å¶ä» Python çº¿ç¨ï¼
    py::gil_scoped_release release; 

    // 3. æ§è¡ç¹éç CPU è®¡ç®
    // æ­¤æ¶ OS å¯ä»¥å¨å¤æ ¸ä¸å¹¶è¡è°åº¦è¿ä¸ªçº¿ç¨
    double result = monte_carlo_pi(samples);

    // 4. ç¦»å¼ä½ç¨åï¼èªå¨éæ°è·å GIL
    return result; 
}

PYBIND11_MODULE(fast_calc, m) {
    m.def("compute_pi", &amp;heavy_computation, "Calculate Pi without GIL");
}

</code></pre>
<h4 id="522-python-ä¾§ççæ­£å¹¶è¡">5.2.2. Python ä¾§ççæ­£å¹¶è¡</h4>
<p>ç°å¨ï¼æä»¬åå° Pythonãæäº <code>py::gil_scoped_release</code>ï¼Python ç <code>threading</code> æ¨¡åå°ä¸åæ¯âä¼ªå¤çº¿ç¨âã</p>
<pre><code class="language-python">import threading
import time
import fast_calc # æä»¬ç¼è¯å¥½ç C++ æ©å±

SAMPLES = 10_000_000
THREAD_COUNT = 4

def worker():
    # å½è¿å¥ fast_calc.compute_pi åé¨æ¶ï¼
    # GIL è¢«éæ¾ï¼è¯¥çº¿ç¨åæäºä¸ä¸ªçº¯ç²¹ç OS çº¿ç¨ (Native Thread)
    # å®å¯ä»¥è·æ»¡ä¸ä¸ªç©ç CPU æ ¸å¿
    pi = fast_calc.compute_pi(SAMPLES)

def run_benchmark():
    start = time.perf_counter()
    threads = []
    
    # å¯å¨ 4 ä¸ªçº¿ç¨
    for _ in range(THREAD_COUNT):
        t = threading.Thread(target=worker)
        t.start()
        threads.append(t)
        
    for t in threads:
        t.join()
        
    end = time.perf_counter()
    print(f"Total time: {end - start:.4f}s")

# ç»æé¢æµï¼
# å¦æä¸éæ¾ GILï¼èæ¶çº¦ç­äº sum(T_i)ï¼å ä¸ºæ¯ä¸²è¡æ§è¡ã
# éæ¾ GIL åï¼  èæ¶çº¦ç­äº max(T_i)ï¼å®ç°çæ­£ç 4 åå é (Amdahl's Law åè®¸èå´å)ã

</code></pre>
<h3 id="53-æ°æ®ä¼ è¾çéå½¢ç¨buffer-protocol-ä¸åå­å¸å±">5.3. æ°æ®ä¼ è¾çéå½¢ç¨ï¼Buffer Protocol ä¸åå­å¸å±</h3>
<p>éæ¾ GIL è§£å³äº<strong>è®¡ç®</strong>çç¶é¢ï¼ä½å¦æä½ çæ°æ®è¿å¨ Python å ä¸ï¼æ¯å¦ä¸å¼  4K å¾çï¼ï¼å¦ä½ä¼ ç» C++ï¼</p>
<p>å¦æä½ ç®åå°å®ä¹å½æ°ä¸º <code>void foo(std::vector&lt;double&gt; v)</code>ï¼<code>pybind11</code> ä¼å°½èå°½è´£å°éå Python åè¡¨ï¼è§£åæ¯ä¸ª <code>PyFloatObject</code>ï¼å¹¶åç<strong>æ·±æ·è´</strong>å°æ°æ®å¤å¶å° C++ çå ä¸ãè¿ä¸ä»æ¶åå·¨å¤§ç <code>malloc</code> å¼éï¼è¿ç ´åäº CPU ç¼å­å±é¨æ§ã</p>
<p><strong>è§£å³æ¹æ¡ï¼ç¼å²åè®® (Buffer Protocol)</strong></p>
<p>Python ç <code>memoryview</code>ãNumPy ç <code>ndarray</code> é½å®ç°äº Buffer Protocolãå®åè®¸ C++ ç´æ¥è®¿é® Python å¯¹è±¡çåºå±åå­åï¼Raw Bufferï¼ï¼å®ç° <strong>Zero-Copy</strong>ã</p>
<p>ç¶èï¼è¿ééèçä¸ä¸ªå·¨å¤§çé·é±ï¼<strong>åå­è¿ç»­æ§ (Contiguity)</strong>ã</p>
<p>Python çåçæä½ï¼å¦ <code>img[:, ::2]</code>ï¼æ¯<strong>é¶æ·è´</strong>çï¼å®ä»ä»æ¯ä¿®æ¹äºåæ°æ®ä¸­ç <strong>Strides (æ­¥é¿)</strong>ï¼èä¸ä¼éæ°æååå­ãå¦æä½ ç´æ¥æè¿ä¸ªåççæéæ¿æ¥å½æè¿ç»­æ°ç»éåï¼ä½ ä¼è¯»å°éè¯¯çæ°æ®ï¼çè³å¼å Segmentation Faultã</p>
<p>å æ­¤ï¼ä¸¥è°¨ç C++ æ©å±å¿é¡»æ£æ¥åå­å¸å±ã</p>
<h4 id="531-ä»£ç å®ç°å®å¨çé«æ§è½å¾ååè²">5.3.1. ä»£ç å®ç°ï¼å®å¨çé«æ§è½å¾ååè²</h4>
<pre><code class="language-cpp">#include &lt;pybind11/pybind11.h&gt;
#include &lt;pybind11/numpy.h&gt;
#include &lt;stdexcept&gt;

namespace py = pybind11;

// C++ æ¥æ¶ NumPy æ°ç»ï¼é¶æ·è´ (Zero-Copy)
// æ³¨æï¼py::array_t&lt;uint8_t&gt; åªæ¯ä¸ä¸ªåè£å¨ï¼å¹¶ä¸æ¥ææ°æ®çæææ
void process_image(py::array_t&lt;uint8_t&gt; input_array) {
    // 1. è¯·æ±ç¼å²åºä¿¡æ¯ (Buffer Info)
    // è¿ä¼æ¥è¯¢å¯¹è±¡ç __buffer__ æ¥å£
    py::buffer_info buf = input_array.request();

    // 2. ç»´åº¦æ£æ¥
    if (buf.ndim != 2) {
        throw std::runtime_error("Number of dimensions must be 2");
    }

    // 3. [å³é®ç³»ç»çº§æ£æ¥] åå­å¸å±éªè¯
    // Python çåçå¯è½äº§çä¸è¿ç»­åå­ (Non-contiguous Memory)ã
    // åªæå½ Row Stride == Width * ElementSize ä¸ Col Stride == ElementSize æ¶ï¼
    // æä»¬æè½å°å¶è§ä¸ºä¸ç»´çº¿æ§æ°ç»å¤çã
    auto expected_stride_row = buf.shape[1] * sizeof(uint8_t);
    auto expected_stride_col = sizeof(uint8_t);

    if (buf.strides[0] != expected_stride_row || buf.strides[1] != expected_stride_col) {
        // éå°è¿ç§æåµï¼éå¸¸æä¸¤ç§éæ©ï¼
        // A. æåºå¼å¸¸ï¼å¼ºè¿«ç¨æ·å¨ Python ç«¯åè°ç¨ .copy() æ np.ascontiguousarray()
        // B. å¨ C++ ç«¯æå¨å¤ç stridesï¼æ§è½ç¥ä½ï¼ä½å¼å®¹æ§å¥½ï¼
        // è¿éä¸ºäºæ¼ç¤ºæè´æ§è½ï¼æä»¬éæ© Aï¼æç»å¤çéè¿ç»­åå­
        throw std::runtime_error("Input array must be C-style contiguous (no slices allowed)");
    }

    // 4. è·åè£¸æé (Raw Pointer)
    // æ­¤æ¶æä»¬å¯ä»¥å®å¨å°åæä½ C æ°ç»ä¸æ ·æä½å®
    uint8_t* ptr = static_cast&lt;uint8_t*&gt;(buf.ptr);
    size_t rows = buf.shape[0];
    size_t cols = buf.shape[1];
    size_t total_elements = rows * cols;

    // 5. éæ¾ GIL å¹¶å¨éè®¡ç®
    // è¿æ¯ä¸ä¸ªçº¯ç²¹çåå­è¯»åæä½ï¼ä¸æ¶åä»»ä½ Python API
    {
        py::gil_scoped_release release;
        
        // ç¼è¯å¨ç°å¨çèªå¨åéå (Auto-Vectorization) å¯ä»¥è½»æä¼åè¿ä¸ªå¾ªç¯
        // çæ SIMD æä»¤ (å¦ AVX2)
        for (size_t i = 0; i &lt; total_elements; ++i) {
            ptr[i] = 255 - ptr[i]; // åè²æä½
        }
    }
    // ä½ç¨åç»æï¼èªå¨éæ°è·å GIL
}

PYBIND11_MODULE(fast_img, m) {
    m.def("process_image", &amp;process_image, "Invert image colors (Zero-Copy, release GIL)");
}

</code></pre>
<p><strong>Python ä¾§è°ç¨ç¤ºä¾ï¼</strong></p>
<pre><code class="language-python">import numpy as np
import fast_img

# åå»ºä¸ä¸ª 4K å¾å (3840x2160)
img = np.random.randint(0, 256, (2160, 3840), dtype=np.uint8)

# Case 1: æ­£å¸¸è°ç¨ (åå­è¿ç»­)
# èæ¶ï¼C++ ä¹å°±æ¯æ¯«ç§çº§ï¼Python å¾ªç¯åéè¦æ°ç§
fast_img.process_image(img) 

# Case 2: åçè°ç¨ (åå­ä¸è¿ç»­)
# slice = img[:, ::2] 
# fast_img.process_image(slice) 
# -&gt; RuntimeError: Input array must be C-style contiguous

</code></pre>
<p>éè¿è¿ç§æ¹å¼ï¼æä»¬ä¸ä»å©ç¨äº C++ çæ§è½ï¼è¿ä¿è¯äºç³»ç»ç<strong>é²æ£æ§ (Robustness)</strong>ãè¿ææ¯ç³»ç»æ¶æå¸å¨å¤çè·¨è¯­è¨äºæä½æ¶åºæçæç»´æ¹å¼ã</p>
<h3 id="54-æ»ç»æ¶æå¸çæç»ææ©">5.4. æ»ç»ï¼æ¶æå¸çæç»ææ©</h3>
<p>è³æ­¤ï¼æä»¬ä»åºå±çå­èç ï¼Generatorï¼è®²å°äºåå­ç®¡çï¼Ref Countingï¼ï¼åå°å¹¶åæ¨¡åï¼Asyncio vs GILï¼ï¼æåæç ´äºè¯­è¨çè¾¹çï¼C++ Extensionï¼ã</p>
<p>ä½ä¸ºä¸ä¸ªç³»ç»çº§å¼åèï¼ä½¿ç¨ Python çæä½³å§¿å¿å¹¶éæå®å½ä½âèæ¬âï¼èæ¯æå®å½ä½<strong>è¶æ°´</strong>ï¼</p>
<ol>
<li><strong>æ§å¶æµ (Python):</strong> å¤çå¤æçä¸å¡é»è¾ãéç½®è§£æãREST API ç¼æãå©ç¨å¶å¨æç¹æ§åä¸°å¯ççæã</li>
<li><strong>æ°æ®æµ (C++/Rust):</strong> å¤çç¹éçè®¡ç®ãå¤§è§æ¨¡åå­æä½ãä½å»¶è¿ IOãå©ç¨å¶å¯¹ç¡¬ä»¶çææ§åã</li>
</ol>
<p><strong>Python is slow, but your Architecture doesn't have to be.</strong></p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-10 12:01">2026-02-10 12:01</span>&nbsp;
<a href="https://www.cnblogs.com/kaiux">å¿µé£é¶å£¹</a>&nbsp;
éè¯»(<span id="post_view_count">3</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19598962);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19598962', targetLink: 'https://www.cnblogs.com/kaiux/p/19598962', title: 'è§£å Pythonï¼å³äºæéãGIL ä¸å¼æ­¥åæ ¸' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
        </channel>
        </rss>