<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åšå®¢å›­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2025-12-23T15:15:30.334Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åšå®¢å›­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ Flinkæºç é˜…è¯»ï¼šçŠ¶æ€ç®¡ç† ]]></title>
    <link>https://www.cnblogs.com/Jackeyzhe/p/19389264</link>
    <guid>4f7ca851b49f4e4c2d63ce955b59e45d</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Jackeyzhe/p/19389264" title="å‘å¸ƒäº 2025-12-23 21:44">
    <span role="heading" aria-level="2">Flinkæºç é˜…è¯»ï¼šçŠ¶æ€ç®¡ç†</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/1828322/202512/1828322-20251223214418733-1509708883.png" alt="Flinkæºç é˜…è¯»ï¼šçŠ¶æ€ç®¡ç†" class="desc_img">
        å‰é¢æˆ‘ä»¬ä»‹ç»äº† Flink çŠ¶æ€çš„åˆ†ç±»å’Œåº”ç”¨ã€‚ä»Šå¤©ä»æºç å±‚é¢å†çœ‹ä¸€ä¸‹ Flink æ˜¯å¦‚ä½•ç®¡ç†çŠ¶æ€çš„ã€‚
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>å‰é¢æˆ‘ä»¬ä»‹ç»äº† Flink çŠ¶æ€çš„åˆ†ç±»å’Œåº”ç”¨ã€‚ä»Šå¤©ä»æºç å±‚é¢å†çœ‹ä¸€ä¸‹ Flink æ˜¯å¦‚ä½•ç®¡ç†çŠ¶æ€çš„ã€‚</p>
<h3 id="state-æ¦‚è¿°">State æ¦‚è¿°</h3>
<p>å…³äº State çš„è¯¦ç»†ä»‹ç»å¯ä»¥å‚è€ƒ <a href="https://jackeyzhe.github.io/2025/08/04/Flink%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%9A%E7%8A%B6%E6%80%81%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%BA%94%E7%94%A8/" target="_blank" rel="noopener nofollow">Flinkå­¦ä¹ ç¬”è®°ï¼šçŠ¶æ€ç±»å‹å’Œåº”ç”¨</a> å’Œ <a href="https://jackeyzhe.github.io/2025/08/24/Flink%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%9A%E7%8A%B6%E6%80%81%E5%90%8E%E7%AB%AF/" target="_blank" rel="noopener nofollow">Flinkå­¦ä¹ ç¬”è®°ï¼šçŠ¶æ€åç«¯</a>è¿™ä¸¤ç¯‡æ–‡ç« ï¼Œä¸ºäº†æ–¹é¢é˜…è¯»ï¼Œè¿™é‡Œæˆ‘ä»¬å†ç®€å•ä»‹ç»ä¸€ä¸‹ã€‚</p>
<h4 id="state-ä½¿ç”¨">State ä½¿ç”¨</h4>
<p>State æ˜¯ Flink åšå¤æ‚é€»è¾‘æ‰€ä¾èµ–çš„æ ¸å¿ƒç»„ä»¶ã€‚å®ƒçš„åˆ†ç±»å¦‚ä¸‹</p>
<p><img alt="State åˆ†ç±»" loading="lazy" data-src="https://res.cloudinary.com/dxydgihag/image/upload/v1754928263/Blog/flink/4/%E7%8A%B6%E6%80%81%E5%88%86%E7%B1%BB.png" class="lazyload"></p>
<p>å¸¸è§çš„æ˜¯ Keyed State å’Œ Operator Stateï¼ŒKeyed State ä½œç”¨äº KeyedStream ä¸Šï¼ŒOperator State å¯ä»¥ä½œç”¨äºæ‰€æœ‰çš„ Operator ä¸Šã€‚Keyed State ä½¿ç”¨æ—¶ï¼Œéœ€è¦å…ˆåˆ›å»º StateDescriptorï¼Œç„¶åå†è°ƒç”¨ getState è·å–ã€‚</p>
<pre><code class="language-java">ValueStateDescriptor&lt;Tuple2&lt;Long, Long&gt;&gt; descriptor =
        new ValueStateDescriptor&lt;&gt;(
                "average",
                TypeInformation.of(new TypeHint&lt;Tuple2&lt;Long, Long&gt;&gt;() {}));
ValueState&lt;Tuple2&lt;Long, Long&gt;&gt; sum = getRuntimeContext().getState(descriptor);
</code></pre>
<p>Opeartor State çš„è·å–æ–¹å¼ä¸ Keyed State ç±»ä¼¼ï¼Œéƒ½éœ€è¦ StateDescriptorã€‚Operator State åœ¨å®šä¹‰æ—¶éœ€è¦å®ç° CheckpointedFunctionã€‚</p>
<h4 id="state-å­˜å‚¨">State å­˜å‚¨</h4>
<p>State Backend ç”¨æ¥ç®¡ç† State å­˜å‚¨ï¼Œæ ¹æ®å­˜å‚¨æ ¼å¼å’Œå­˜å‚¨ç±»å‹çš„ç»„åˆï¼Œå¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼š</p>
<ol>
<li>
<p>MemoryStateBackendï¼šHashMapStateBackend å’Œ JobManagerCheckpointStorage çš„ç»„åˆï¼Œå³å°† State ä»¥ Java å¯¹è±¡çš„å½¢å¼å­˜å‚¨åœ¨ JobManager å†…å­˜ä¸­ã€‚</p>
</li>
<li>
<p>FsStateBackendï¼šHashMapStateBackend å’Œ FileSystemCheckpointStorage çš„ç»„åˆï¼Œå°† State ä»¥ Java å¯¹è±¡çš„å½¢å¼å­˜å‚¨åœ¨è¿œç«¯æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚</p>
</li>
<li>
<p>RocksDBStateBackendï¼šEmbeddedRocksDBStateBackend å’Œ FileSystemCheckpointStorage çš„ç»„åˆï¼ŒState åºåˆ—åŒ–åå­˜å‚¨åœ¨ RocksDBã€‚</p>
</li>
</ol>
<h3 id="åˆ›å»º-state-backend">åˆ›å»º State Backend</h3>
<p>åˆ›å»º State Backend çš„å…¥å£åœ¨ StreamTaskï¼ŒStreamTask æ˜¯ Flink éƒ¨ç½²å’Œè¿è¡Œåœ¨ TaskManager çš„åŸºæœ¬å•å…ƒã€‚</p>
<p>åœ¨ StreamTask çš„ invoke æ–¹æ³•ä¸­ï¼Œä¼šå…ˆè°ƒç”¨ restoreStateAndGates æ–¹æ³•å»åˆ›å»º State Backendã€‚å®Œæ•´çš„è°ƒç”¨é“¾è·¯å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><img alt="stateBackend" loading="lazy" data-src="https://res.cloudinary.com/dxydgihag/image/upload/v1764852973/Blog/flink/12/statebackend.png" class="lazyload"></p>
<p>åœ¨ streamOperatorStateContext æ–¹æ³•ä¸­ï¼Œåˆ†åˆ«è°ƒç”¨äº† keyedStatedBackend å’Œ operatorStateBackend æ¥åˆ›å»ºä¸¤ç§ State Backendã€‚</p>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹ keyedStateBackend çš„é€»è¾‘ã€‚</p>
<pre><code class="language-java">protected &lt;K, R extends Disposable &amp; Closeable&gt; R keyedStatedBackend(
        TypeSerializer&lt;K&gt; keySerializer,
        String operatorIdentifierText,
        PrioritizedOperatorSubtaskState prioritizedOperatorSubtaskStates,
        CloseableRegistry backendCloseableRegistry,
        MetricGroup metricGroup,
        double managedMemoryFraction,
        StateObject.StateObjectSizeStatsCollector statsCollector,
        KeyedStateBackendCreator&lt;K, R&gt; keyedStateBackendCreator)
        throws Exception {

    if (keySerializer == null) {
        return null;
    }

    ......

    final KeyGroupRange keyGroupRange =
            KeyGroupRangeAssignment.computeKeyGroupRangeForOperatorIndex(
                    taskInfo.getMaxNumberOfParallelSubtasks(),
                    taskInfo.getNumberOfParallelSubtasks(),
                    taskInfo.getIndexOfThisSubtask());

    // Now restore processing is included in backend building/constructing process, so we need
    // to make sure
    // each stream constructed in restore could also be closed in case of task cancel, for
    // example the data
    // input stream opened for serDe during restore.
    CloseableRegistry cancelStreamRegistryForRestore = new CloseableRegistry();
    backendCloseableRegistry.registerCloseable(cancelStreamRegistryForRestore);
    BackendRestorerProcedure&lt;R, KeyedStateHandle&gt; backendRestorer =
            new BackendRestorerProcedure&lt;&gt;(
                    (stateHandles) -&gt; {
                        KeyedStateBackendParametersImpl&lt;K&gt; parameters =
                                new KeyedStateBackendParametersImpl&lt;&gt;(...);
                        return keyedStateBackendCreator.create(...),
                                parameters);
                    },
                    backendCloseableRegistry,
                    logDescription);

    try {
        return backendRestorer.createAndRestore(
                prioritizedOperatorSubtaskStates.getPrioritizedManagedKeyedState(),
                statsCollector);
    } finally {
        if (backendCloseableRegistry.unregisterCloseable(cancelStreamRegistryForRestore)) {
            IOUtils.closeQuietly(cancelStreamRegistryForRestore);
        }
    }
}
</code></pre>
<p>è¿™é‡Œçš„åˆ›å»ºè¿‡ç¨‹ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå…ˆæ˜¯è·å– KeyGroupRangeï¼Œå®ƒè¡¨ç¤ºçš„æ˜¯å½“å‰ Operator ä¸Šå¤„ç†çš„ key çš„èŒƒå›´ã€‚ç„¶åå°±æ˜¯åˆ›å»º StateBackend å®ä¾‹ï¼Œè¿™é‡Œé€šè¿‡ BackendRestorerProcedure å°è£…ç»Ÿä¸€çš„æ¢å¤ã€å¼‚å¸¸å¤„ç†å’Œèµ„æºæ¸…ç†é€»è¾‘ã€‚operatorStateBackend æ–¹æ³•çš„é€»è¾‘ç›¸æ¯”è¾ƒæ¥è¯´ï¼Œåªæ˜¯å°‘äº† KeyGroupRange çš„å¤„ç†ï¼Œç›´æ¥åˆ›å»º StateBackend å®ä¾‹ã€‚</p>
<h3 id="åˆ›å»ºå’Œä½¿ç”¨-state">åˆ›å»ºå’Œä½¿ç”¨ State</h3>
<h4 id="åˆ›å»º-keyedstate">åˆ›å»º KeyedState</h4>
<p>KeyedState æ˜¯é€šè¿‡è°ƒç”¨ StreamingRuntimeContext.getState æ–¹æ³•è·å–çš„ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹å®Œæ•´çš„è°ƒç”¨æµç¨‹ã€‚</p>
<p><img alt="getState" loading="lazy" data-src="https://res.cloudinary.com/dxydgihag/image/upload/v1765164156/Blog/flink/12/getstate.png" class="lazyload"></p>
<p>åœ¨è°ƒç”¨ getState è¿™äº›æ–¹æ³•æ—¶ï¼Œéƒ½ä¼šå…ˆè°ƒç”¨ keyedStateStore æä¾›çš„æ–¹æ³•ï¼Œå®ƒæ˜¯ Flink æä¾›çš„ä¸€ä¸ªå°è£… keyedStateBackend çš„æ¥å£ã€‚è°ƒç”¨æµç¨‹çš„æœ€åï¼Œæ˜¯è°ƒç”¨ keyedStateBackend ä¸­çš„ createOrUpdateInternalState æ–¹æ³•ï¼ˆè¿™é‡Œæˆ‘ä»¬ä»¥ HeapStateBackend ä¸ºä¾‹ï¼‰ã€‚</p>
<pre><code class="language-java">public &lt;N, SV, SEV, S extends State, IS extends S&gt; IS createOrUpdateInternalState(
        @Nonnull TypeSerializer&lt;N&gt; namespaceSerializer,
        @Nonnull StateDescriptor&lt;S, SV&gt; stateDesc,
        @Nonnull StateSnapshotTransformFactory&lt;SEV&gt; snapshotTransformFactory,
        boolean allowFutureMetadataUpdates)
        throws Exception {
    StateTable&lt;K, N, SV&gt; stateTable =
            tryRegisterStateTable(
                    namespaceSerializer,
                    stateDesc,
                    getStateSnapshotTransformFactory(stateDesc, snapshotTransformFactory),
                    allowFutureMetadataUpdates);

    @SuppressWarnings("unchecked")
    IS createdState = (IS) createdKVStates.get(stateDesc.getName());
    if (createdState == null) {
        StateCreateFactory stateCreateFactory = STATE_CREATE_FACTORIES.get(stateDesc.getType());
        if (stateCreateFactory == null) {
            throw new FlinkRuntimeException(stateNotSupportedMessage(stateDesc));
        }
        createdState =
                stateCreateFactory.createState(stateDesc, stateTable, getKeySerializer());
    } else {
        StateUpdateFactory stateUpdateFactory = STATE_UPDATE_FACTORIES.get(stateDesc.getType());
        if (stateUpdateFactory == null) {
            throw new FlinkRuntimeException(stateNotSupportedMessage(stateDesc));
        }
        createdState = stateUpdateFactory.updateState(stateDesc, stateTable, createdState);
    }

    createdKVStates.put(stateDesc.getName(), createdState);
    return createdState;
}


private static final Map&lt;StateDescriptor.Type, StateCreateFactory&gt; STATE_CREATE_FACTORIES =
        Stream.of(
                        Tuple2.of(
                                StateDescriptor.Type.VALUE,
                                (StateCreateFactory) HeapValueState::create),
                        Tuple2.of(
                                StateDescriptor.Type.LIST,
                                (StateCreateFactory) HeapListState::create),
                        Tuple2.of(
                                StateDescriptor.Type.MAP,
                                (StateCreateFactory) HeapMapState::create),
                        Tuple2.of(
                                StateDescriptor.Type.AGGREGATING,
                                (StateCreateFactory) HeapAggregatingState::create),
                        Tuple2.of(
                                StateDescriptor.Type.REDUCING,
                                (StateCreateFactory) HeapReducingState::create))
                .collect(Collectors.toMap(t -&gt; t.f0, t -&gt; t.f1));
</code></pre>
<p>è¿™é‡Œé¦–å…ˆæ˜¯æ³¨å†Œäº†ä¸€ä¸ª StateTableï¼Œè¿™ä¸ªæ˜¯ State ä¸­ä¸€ä¸ªéå¸¸é‡è¦çš„æˆå‘˜å˜é‡ï¼Œå®ƒå†…éƒ¨æ˜¯ä¸€ä¸ªç±»ä¼¼ Map çš„ç»“æ„ï¼Œç”¨æ¥ä¿å­˜ key å’Œ key çš„çŠ¶æ€ã€‚</p>
<p>STATE_CREATE_FACTORIES è¿™ä¸ªå˜é‡ä¿å­˜äº†ä¸åŒç±»å‹çš„ State å’Œå®ƒå¯¹åº”çš„åˆ›å»ºæ–¹æ³•ï¼ŒåŒç† STATE_UPDATE_FACTORIES ä¿å­˜çš„æ˜¯ä¸åŒ State å¯¹åº”çš„ æ›´æ–°æ–¹æ³•ã€‚</p>
<h4 id="åˆ›å»º-operatorstate">åˆ›å»º OperatorState</h4>
<p>çœ‹å®Œäº† KeyedState çš„åˆ›å»ºè¿‡ç¨‹åï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸‹ OperatorState çš„åˆ›å»ºè¿‡ç¨‹ã€‚</p>
<p>OperatorState çš„åˆ›å»ºæ–¹æ³•æ˜¯é€šè¿‡ FunctionInitializationContext å…ˆè·å–åˆ° OperatorStateStoreï¼Œå®ƒä¸ KeyedStateStore ç±»ä¼¼ï¼Œéƒ½æ˜¯å¯¹ StateBackend çš„æ–¹æ³•è¿›è¡Œäº†å°è£…ã€‚</p>
<pre><code class="language-java">@Override
public void initializeState(FunctionInitializationContext context) throws Exception {
    ListStateDescriptor&lt;Tuple2&lt;String, Integer&gt;&gt; descriptor =
            new ListStateDescriptor&lt;&gt;(
                    "buffered-elements",
                    TypeInformation.of(new TypeHint&lt;Tuple2&lt;String, Integer&gt;&gt;() {}));

    checkpointedState = context.getOperatorStateStore().getListState(descriptor);

    if (context.isRestored()) {
        for (Tuple2&lt;String, Integer&gt; element : checkpointedState.get()) {
            bufferedElements.add(element);
        }
    }
}
</code></pre>
<p>OperatorStateStore çš„ getListState æ–¹æ³•ä¸­ï¼Œç›´æ¥åˆ›å»ºå‡ºäº† PartitionableListStateï¼ŒåŒæ—¶ä¹Ÿåšäº†ä¸€äº›ç¼“å­˜æ“ä½œã€‚</p>
<pre><code class="language-java">private &lt;S&gt; ListState&lt;S&gt; getListState(
        ListStateDescriptor&lt;S&gt; stateDescriptor, OperatorStateHandle.Mode mode)
        throws StateMigrationException {

    ......
    PartitionableListState&lt;S&gt; partitionableListState =
            (PartitionableListState&lt;S&gt;) registeredOperatorStates.get(name);

    if (null == partitionableListState) {
        // no restored state for the state name; simply create new state holder

        partitionableListState =
                new PartitionableListState&lt;&gt;(
                        new RegisteredOperatorStateBackendMetaInfo&lt;&gt;(
                                name, partitionStateSerializer, mode));

        registeredOperatorStates.put(name, partitionableListState);
    } else {
        ......
    }

    accessedStatesByName.put(name, partitionableListState);
    return partitionableListState;
}
</code></pre>
<p>PartitionableListState å†…éƒ¨æœ‰ä¸€ä¸ª ArrayList ç”¨äºä¿å­˜æ•°æ®ã€‚</p>
<h4 id="ä½¿ç”¨-keyedstate">ä½¿ç”¨ KeyedState</h4>
<p>äº†è§£å®Œ State çš„åˆ›å»ºä¹‹åï¼Œæ¥ä¸‹æ¥å°±æ˜¯ State çš„ä½¿ç”¨äº†ã€‚æˆ‘ä»¬ä»¥ HeapValueState ä¸ºä¾‹æ¥çœ‹å¦‚ä½•è·å– Stateã€‚</p>
<pre><code class="language-java">// HeapValueState ç±»
public V value() {
    final V result = stateTable.get(currentNamespace);

    if (result == null) {
        return getDefaultValue();
    }

    return result;
}
</code></pre>
<p>åœ¨ HeapValueState ç±»çš„ value æ–¹æ³•ä¸­ï¼Œç›´æ¥è°ƒç”¨ StateTable çš„ get æ–¹æ³•ï¼Œæœ€ç»ˆè°ƒç”¨çš„æ˜¯ CopyOnWriteStateMap çš„ get æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¸ HashMap çš„ get æ–¹æ³•æ¯”è¾ƒç±»ä¼¼ã€‚</p>
<pre><code class="language-java">public S get(K key, N namespace) {

    final int hash = computeHashForOperationAndDoIncrementalRehash(key, namespace);
    final int requiredVersion = highestRequiredSnapshotVersion;
    final StateMapEntry&lt;K, N, S&gt;[] tab = selectActiveTable(hash);
    int index = hash &amp; (tab.length - 1);

    for (StateMapEntry&lt;K, N, S&gt; e = tab[index]; e != null; e = e.next) {
        final K eKey = e.key;
        final N eNamespace = e.namespace;
        if ((e.hash == hash &amp;&amp; key.equals(eKey) &amp;&amp; namespace.equals(eNamespace))) {

            // copy-on-write check for state
            if (e.stateVersion &lt; requiredVersion) {
                // copy-on-write check for entry
                if (e.entryVersion &lt; requiredVersion) {
                    e = handleChainedEntryCopyOnWrite(tab, hash &amp; (tab.length - 1), e);
                }
                e.stateVersion = stateMapVersion;
                e.state = getStateSerializer().copy(e.state);
            }

            return e.state;
        }
    }

    return null;
}
</code></pre>
<h4 id="ä½¿ç”¨-operatorstate">ä½¿ç”¨ OperatorState</h4>
<p>OperatorState åº•å±‚ä½¿ç”¨çš„æ˜¯ PartitionableListStateï¼Œå‰é¢ä¹Ÿæåˆ°äº†ï¼Œå®ƒçš„å†…éƒ¨ç”¨äº†ä¸€ä¸ª ArrayList æ¥ä¿å­˜æ•°æ®ï¼Œå¯¹äº OperatorState çš„å„ç§æ“ä½œä¹Ÿéƒ½æ˜¯æ¥æ“ä½œè¿™ä¸ª ArrayListã€‚</p>
<pre><code class="language-java">@Override
public void clear() {
    internalList.clear();
}

@Override
public Iterable&lt;S&gt; get() {
    return internalList;
}

@Override
public void add(S value) {
    Preconditions.checkNotNull(value, "You cannot add null to a ListState.");
    internalList.add(value);
}

@Override
public void update(List&lt;S&gt; values) {
    internalList.clear();

    addAll(values);
}

@Override
public void addAll(List&lt;S&gt; values) {
    Preconditions.checkNotNull(values, "List of values to add cannot be null.");
    if (!values.isEmpty()) {
        for (S value : values) {
            checkNotNull(value, "Any value to add to a list cannot be null.");
            add(value);
        }
    }
}
</code></pre>
<h3 id="æ€»ç»“">æ€»ç»“</h3>
<p>æœ¬æ–‡å¯¹ State çš„ç›¸å…³ä»£ç è¿›è¡Œäº†æ¢³ç†ã€‚åŒ…æ‹¬ StateBackend çš„åˆ›å»ºï¼ŒKeyedState å’Œ OperatorState çš„åˆ›å»ºå’Œä½¿ç”¨ã€‚State å’Œ Checkpoint ä¸¤è€…éœ€è¦ç»“åˆä½¿ç”¨ï¼Œå› æ­¤åé¢æˆ‘ä»¬ä¼šå†æ¢³ç† Checkpoint çš„ç›¸å…³ä»£ç ã€‚</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-23 21:45">2025-12-23 21:44</span>&nbsp;
<a href="https://www.cnblogs.com/Jackeyzhe">Jackeyzhe</a>&nbsp;
é˜…è¯»(<span id="post_view_count">12</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19389264);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19389264', targetLink: 'https://www.cnblogs.com/Jackeyzhe/p/19389264', title: 'Flinkæºç é˜…è¯»ï¼šçŠ¶æ€ç®¡ç†' })">ä¸¾æŠ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ä¸ç”¨ Typora çš„ html å¯¼å‡ºåŠŸèƒ½ï¼Œæ‰‹æ“çº¯ HTML5 è½¬æ¢å™¨ ]]></title>
    <link>https://www.cnblogs.com/zhally/p/19389248</link>
    <guid>58655b7150a432539f646e50690a7abd</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/zhally/p/19389248" title="å‘å¸ƒäº 2025-12-23 21:38">
    <span role="heading" aria-level="2">ä¸ç”¨ Typora çš„ html å¯¼å‡ºåŠŸèƒ½ï¼Œæ‰‹æ“çº¯ HTML5 è½¬æ¢å™¨</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="ä¸ç”¨-typora-çš„-html-å¯¼å‡ºåŠŸèƒ½æ‰‹æ“çº¯-html5-è½¬æ¢å™¨">ä¸ç”¨ Typora çš„ html å¯¼å‡ºåŠŸèƒ½ï¼Œæ‰‹æ“çº¯ HTML5 è½¬æ¢å™¨</h1>
<p>åŸåˆ› å¤ç¾¤æ— 2025.12.23</p>
<h2 id="ä¸€ç¼˜èµ·">ä¸€ã€ç¼˜èµ·</h2>
<p>æˆ‘æ—¥å¸¸å·¥ä½œä½¿ç”¨ Typoraï¼Œ ä¸€æ¬¾å¾ˆå¥½çš„ Markdown ç¼–è¾‘å™¨ã€‚å»ºç½‘ç«™ï¼Œå†™åšæ–‡ï¼Œç”¨ Typora æ‰“åº•ç¨¿ã€‚ç„¶åå¯¼å‡ºæˆ html æ ¼å¼æ–‡ä»¶ï¼Œæ‰€è§å³æ‰€å¾—ï¼Œä¸€ä¸ªé™æ€ç½‘ç«™å°±æˆäº†ï¼</p>
<p>ä¸è¿‡ï¼ŒTypora è‡ªå¸¦çš„ HTML å¯¼å‡ºåŠŸèƒ½å­˜åœ¨æ ¸å¿ƒç¼ºé™·ï¼šå¤¹å¸¦ Typora  ç¼–è¾‘å™¨ UI å†—ä½™ä»£ç ã€HTML è¯­ä¹‰ä¸åˆè§„ã€ä¾èµ–éæ ‡å‡†åŒ–æ ·å¼ä½“ç³»ã€å¯¼å‡ºæ–‡ä»¶ä½“ç§¯å¤§ã€å¯ç»´æŠ¤æ€§å·®ã€‚åŸºäºæ­¤ï¼Œæˆ‘ä»¬æ‰‹æ“çº¯HTML5è½¬æ¢å™¨ï¼Œæ ¸å¿ƒç›®æ ‡ï¼š</p>
<ol>
<li>å‰”é™¤ UI å†—ä½™ï¼Œä»…ä¿ç•™ Markdown å†…å®¹æ¸²æŸ“é€»è¾‘ï¼›</li>
<li>çº¯ ES6+ åŸç”Ÿå®ç°ï¼Œæ— ç¬¬ä¸‰æ–¹åº“ä¾èµ–ï¼›</li>
<li>ç¬¦åˆHTML5è¯­ä¹‰æ ‡å‡†ï¼›</li>
<li>è¿˜åŸ Typora çº¯ Markdown å†…å®¹çš„æ¸²æŸ“é£æ ¼ã€‚</li>
</ol>
<h2 id="äºŒçº¯-es6-å®ç°æ— ç¬¬ä¸‰æ–¹åº“">äºŒã€çº¯ ES6+ å®ç°ï¼Œæ— ç¬¬ä¸‰æ–¹åº“</h2>
<h3 id="21-æ ¸å¿ƒä¼˜åŠ¿">2.1 æ ¸å¿ƒä¼˜åŠ¿</h3>
<ul>
<li>è½»é‡åŒ–ï¼šäº§ç‰©ä»…åŒ…å«æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼Œæ— å†—ä½™ä¾èµ–ä»£ç ï¼Œä½“ç§¯è¾ƒ Typora å¯¼å‡ºç¼©å‡ 80% ä»¥ä¸Šï¼›</li>
<li>å¯æ§æ€§ï¼šå…¨æµç¨‹æŒæ§ Markdown è¯­æ³•è§£æã€HTML é‡æ„ã€æ ·å¼ç”Ÿæˆï¼›</li>
<li>æ— ä¾èµ–é£é™©ï¼šé¿å…ç¬¬ä¸‰æ–¹åº“ç‰ˆæœ¬è¿­ä»£ã€å…¼å®¹æ€§é—®é¢˜ï¼Œè½¬æ¢å™¨é•¿æœŸç¨³å®šå¯ç”¨ã€‚</li>
</ul>
<h3 id="22-es6-æ ¸å¿ƒç‰¹æ€§åº”ç”¨">2.2 ES6+ æ ¸å¿ƒç‰¹æ€§åº”ç”¨</h3>
<table>
<thead>
<tr>
<th>ES6+ç‰¹æ€§</th>
<th>åº”ç”¨åœºæ™¯</th>
<th>ä»·å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ¨¡å—åŒ–ï¼ˆES Moduleï¼‰</td>
<td>æ‹†åˆ†è§£æã€å·¥å…·ã€å…¥å£æ¨¡å—</td>
<td>è§£è€¦ä»£ç ï¼Œä¾¿äºç»´æŠ¤</td>
</tr>
<tr>
<td>æ¨¡æ¿å­—ç¬¦ä¸²</td>
<td>HTML/CSSç”Ÿæˆ</td>
<td>æ›¿ä»£å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œæå‡å¯è¯»æ€§</td>
</tr>
<tr>
<td>æ­£åˆ™è¡¨è¾¾å¼å¢å¼º</td>
<td>Markdownè§£æã€åˆè§„ä¿®å¤</td>
<td>ç²¾å‡†åŒ¹é…è¯­æ³•ï¼Œè§£å†³åå‘å¼•ç”¨å†²çª</td>
</tr>
</tbody>
</table>
<h2 id="ä¸‰æ•´ä½“æ¶æ„è®¾è®¡">ä¸‰ã€æ•´ä½“æ¶æ„è®¾è®¡</h2>
<h3 id="31-ç›®å½•ç»“æ„">3.1 ç›®å½•ç»“æ„</h3>
<pre><code>md2html/
â”œâ”€â”€ index.html        // äº¤äº’ç•Œé¢ï¼ˆMDè¾“å…¥ã€HTMLé¢„è§ˆ/å¯¼å‡ºï¼‰
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ app.js        // å…¥å£ï¼ˆDOMæ“ä½œã€è½¬æ¢/ä¸‹è½½é€»è¾‘ï¼‰
â”‚   â”œâ”€â”€ utils.js      // å·¥å…·å‡½æ•°ï¼ˆæ ¼å¼åŒ–ã€æç¤ºï¼‰
â”‚   â””â”€â”€ marked.es6.js // MDæ ¸å¿ƒè§£æï¼ˆåˆè§„ä¿®å¤æ ¸å¿ƒï¼‰
â””â”€â”€ css/  
    â”œâ”€â”€ style.css     // è½¬æ¢å™¨ç•Œé¢æ ·å¼
    â”œâ”€â”€ concise.css   // ç®€æ´ç‰ˆMDæ¸²æŸ“æ ·å¼
    â””â”€â”€ typora.css    // Typoraçº¯å†…å®¹æ¸²æŸ“æ ·å¼
</code></pre>
<h3 id="32-æ ¸å¿ƒæµç¨‹">3.2 æ ¸å¿ƒæµç¨‹</h3>
<div class="mermaid">flowchart TD
    A[MDè¾“å…¥] --&gt; B[marked.es6.jsè§£æï¼ˆåˆè§„ä¿®å¤ï¼‰]
    B --&gt; C[utils.jsæ ¼å¼åŒ–]
    C --&gt; D[app.jsç”ŸæˆHTML/ä¸‹è½½]
    D --&gt; E[é¢„è§ˆ/å¯¼å‡ºçº¯HTML5æ–‡ä»¶]
</div><h2 id="å››æ ¸å¿ƒæŠ€æœ¯ç‚¹">å››ã€æ ¸å¿ƒæŠ€æœ¯ç‚¹</h2>
<h3 id="41-åŸºäºæ­£åˆ™çš„-markdown-è¯­æ³•è§£æ">4.1 åŸºäºæ­£åˆ™çš„ Markdown è¯­æ³•è§£æ</h3>
<p>æ”¾å¼ƒç¬¬ä¸‰æ–¹åº“ï¼Œé€šè¿‡ç²¾å‡†çš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…Markdownæ ¸å¿ƒè¯­æ³•ï¼Œæ˜¯å®ç°â€œçº¯åŸç”Ÿâ€çš„åŸºç¡€ã€‚</p>
<p>æ ¸å¿ƒæ€è·¯ä¸ºï¼šæŒ‰â€œå—çº§è¯­æ³•ï¼ˆæ ‡é¢˜ã€åˆ—è¡¨ã€è¡¨æ ¼ï¼‰â†’ è¡Œå†…è¯­æ³•ï¼ˆåŠ ç²—ã€é“¾æ¥ã€ä»£ç ï¼‰â€çš„é¡ºåºè§£æï¼Œç¡®ä¿è¯­æ³•åµŒå¥—çš„æ­£ç¡®æ€§ã€‚</p>
<p>ç¤ºä¾‹ï¼šè¡¨æ ¼è¯­æ³•è§£ææ­£åˆ™</p>
<pre><code class="language-javascript">// è§£æè¡¨æ ¼
const parseTables = (md, options) =&gt; {
    if (!md.includes('|') || md.includes('&lt;table&gt;')) return md;

    const tableRegex = /^(\|.*\|)\n(\|[-:| ]*\|)\n((?:\|.*\|\n?)+)/gm;
    return md.replace(tableRegex, (match, headerLine, separatorLine, bodyLines) =&gt; {
        const alignments = separatorLine.split('|')
            .filter(cell =&gt; cell.trim() !== '')
            .map(cell =&gt; {
                const trimCell = cell.trim();
                return trimCell.startsWith(':') &amp;&amp; trimCell.endsWith(':') ? 'center' :
                       trimCell.startsWith(':') ? 'left' :
                       trimCell.endsWith(':') ? 'right' : 'left';
            });

        const headerCells = headerLine.split('|').filter(cell =&gt; cell.trim() !== '');
        let headerHtml = '&lt;thead&gt;&lt;tr&gt;';
        headerCells.forEach((cell, index) =&gt; {
            const align = alignments[index] || 'left';
            const inlineContent = parseInlineOnly(cell, options);
            headerHtml += `&lt;th class="text-${align}"&gt;${inlineContent}&lt;/th&gt;`;
        });
        headerHtml += '&lt;/tr&gt;&lt;/thead&gt;';

        const bodyRows = bodyLines.split('\n').filter(row =&gt; row.trim() !== '');
        let bodyHtml = '&lt;tbody&gt;';
        bodyRows.forEach(row =&gt; {
            const cells = row.split('|').filter(cell =&gt; cell.trim() !== '');
            bodyHtml += '&lt;tr&gt;';
            cells.forEach((cell, index) =&gt; {
                const align = alignments[index] || 'left';
                const inlineContent = parseInlineOnly(cell, options);
                bodyHtml += `&lt;td class="text-${align}"&gt;${inlineContent}&lt;/td&gt;`;
            });
            bodyHtml += '&lt;/tr&gt;';
        });
        bodyHtml += '&lt;/tbody&gt;';

        return `&lt;table&gt;${headerHtml}${bodyHtml}&lt;/table&gt;`;
    });
};
</code></pre>
<h3 id="42-htmlè¯­ä¹‰åˆè§„åŒ–é‡æ„">4.2 HTMLè¯­ä¹‰åˆè§„åŒ–é‡æ„</h3>
<p>ä¾‹å¦‚ï¼ŒTypora å¯¼å‡ºçš„<code>&lt;ul&gt;/&lt;ol&gt;</code>è¢«<code>&lt;p&gt;</code>åŒ…è£¹ï¼Œæ¢è¡Œç”Ÿæˆç©º<code>&lt;p&gt;</code>æ ‡ç­¾ï¼Œè¿åHTMLè¯­ä¹‰è§„èŒƒã€‚</p>
<p>æ ¸å¿ƒé€»è¾‘ï¼šè§£æåˆ—è¡¨æ—¶ä»…ç”Ÿæˆ<code>&lt;li&gt;</code>å­å…ƒç´ ï¼Œæ®µè½è§£ææ’é™¤åˆ—è¡¨æ ‡ç­¾ï¼Œé¿å…è¯¯åˆ¤ã€‚</p>
<pre><code class="language-javascript">// marked.es6.js æ ¸å¿ƒä¿®å¤ä»£ç 
const parseLists = (md) =&gt; {
    // ç”Ÿæˆçº¯&lt;li&gt;ï¼Œç§»é™¤å¤šä½™æ¢è¡Œ
    let listItems = md.replace(/^( {0,3})(-|\*|\+)\s+(.*?$)/gm, (_, indent, marker, text) =&gt; {
        const inlineContent = parseInlineOnly(text).replace(/\n+/g, ' ');
        return `${indent}&lt;li&gt;${inlineContent}&lt;/li&gt;`;
    });
    // åŒ…è£¹åˆ—è¡¨å®¹å™¨ï¼Œæ¸…ç†æ¢è¡Œå¹²æ‰°
    return listItems.replace(/((?: {0,3}&lt;li&gt;[\s\S]*?&lt;\/li&gt;\s*)+)/gm, (_, items) =&gt; {
        const cleanItems = items.replace(/\n+/g, '').replace(/&gt;\s+&lt;/g, '&gt;&lt;');
        return /[-*+]/.test(_) ? `&lt;ul&gt;${cleanItems}&lt;/ul&gt;` : `&lt;ol&gt;${cleanItems}&lt;/ol&gt;`;
    });
};

// æ®µè½è§£ææ’é™¤åˆ—è¡¨æ ‡ç­¾ï¼Œé¿å…ç©º&lt;p&gt;
const parseParagraphs = (md) =&gt; {
    const paraRegex = /^(?!&lt;(ul|ol|li)&gt;)(?!&lt;\/(ul|ol|li)&gt;)([^&lt;\n]+?)(?=\n{2,}|$)/gm;
    return md.replace(paraRegex, (_, __, ___, content) =&gt; {
        const trimmed = content?.trim().replace(/\n+/g, ' ') || '';
        return trimmed ? `&lt;p&gt;${trimmed}&lt;/p&gt;` : '';
    });
};
</code></pre>
<h3 id="43-ä»…ä¿ç•™-typora--å†…å®¹æ¸²æŸ“æ ¸å¿ƒæ ·å¼">4.3 ä»…ä¿ç•™ Typora  å†…å®¹æ¸²æŸ“æ ¸å¿ƒæ ·å¼</h3>
<p>Typora å¯¼å‡ºæ ·å¼åŒ…å«ç¼–è¾‘å™¨ UI è§„åˆ™ï¼Œå†—ä½™ä¸”éæ ‡å‡†åŒ–ï¼Œäºˆä»¥å‰¥ç¦»ã€‚åŸºäºTyporaåŸç”Ÿçš„Markdownæ¸²æŸ“é£æ ¼ï¼Œæ„å»ºæ¨¡å—åŒ–çš„CSSä½“ç³»ï¼š</p>
<pre><code class="language-css">/* typora.css æ ¸å¿ƒä»£ç  */
:root {
    --typora-text-color: #333;
    --typora-heading-color: #2c3e50;
    --typora-code-bg: #f8f8f8;
    --typora-table-border: #ddd;
}
/* æš—é»‘æ¨¡å¼é€‚é… */
@media (prefers-color-scheme: dark) {
    :root {
        --typora-text-color: #e0e0e0;
        --typora-code-bg: #2d2d2d;
        --typora-table-border: #444;
    }
}
/* åˆ—è¡¨åˆè§„å…œåº• */
ul&gt;li, ol&gt;li { margin: 0.4em 0; }
ul&gt;br, ol&gt;br, ul&gt;p, ol&gt;p { display: none; }
/* è¡¨æ ¼å¯¹é½ç±» */
.text-left { text-align: left !important; }
.text-center { text-align: center !important; }
.text-right { text-align: right !important; }
</code></pre>
<h3 id="44-åŸç”Ÿ-es6-æ¨¡å—åŒ–æ•´åˆ">4.4 åŸç”Ÿ ES6+ æ¨¡å—åŒ–æ•´åˆ</h3>
<pre><code class="language-javascript">// app.js æ ¸å¿ƒé€»è¾‘
import { parseMarkdown } from './marked.es6.js';
import { formatHtml, showAlert } from './utils.js';

// è½¬æ¢é€»è¾‘
dom.convertBtn.addEventListener('click', () =&gt; {
    const mdContent = dom.mdInput.value.trim();
    if (!mdContent) return showAlert('è¯·è¾“å…¥Markdownå†…å®¹');
    
    // æ ¸å¿ƒæµç¨‹ï¼šè§£æï¼ˆåˆè§„ï¼‰â†’ æ ¼å¼åŒ– â†’ é¢„è§ˆ/å¯¼å‡º
    const htmlFragment = parseMarkdown(mdContent); // ç”Ÿæˆå³åˆè§„
    const finalHtml = formatHtml(`&lt;!DOCTYPE html&gt;
&lt;html lang="zh-CN"&gt;
&lt;head&gt;&lt;meta charset="UTF-8"&gt;&lt;link rel="stylesheet" href="./css/typora.css"&gt;&lt;/head&gt;
&lt;body&gt;${htmlFragment}&lt;/body&gt;&lt;/html&gt;`);
    
    dom.preview.innerHTML = htmlFragment;
    dom.htmlCode.value = finalHtml;
    dom.downloadBtn.disabled = false;
});
</code></pre>
<h2 id="äº”ä½¿ç”¨è¯´æ˜">äº”ã€ä½¿ç”¨è¯´æ˜</h2>
<ol>
<li>æŒ‰æŒ‡å®šç›®å½•ç»“æ„å­˜æ”¾æ–‡ä»¶ï¼Œç¡®ä¿<code>js/</code>å’Œ<code>css/</code>å­æ–‡ä»¶å¤¹è·¯å¾„æ­£ç¡®ï¼›</li>
<li>ç”¨æ”¯æŒES6æ¨¡å—çš„æµè§ˆå™¨ï¼ˆChrome/Firefox/Edgeï¼‰æ‰“å¼€<code>index.html</code>ï¼›</li>
<li>è¾“å…¥Markdownå†…å®¹ï¼Œå‹¾é€‰â€œä¿ç•™ Typora åŸæ ¼å¼â€ï¼Œç‚¹å‡»â€œè½¬æ¢ä¸º HTML5â€ï¼›</li>
<li>é¢„è§ˆåŒºæŸ¥çœ‹æ•ˆæœï¼Œç‚¹å‡»â€œä¸‹è½½ HTML æ–‡ä»¶â€è·å–ç¬¦åˆ HTML5 è§„èŒƒçš„æ–‡ä»¶ã€‚</li>
</ol>
<h2 id="å…­æ€»ç»“">å…­ã€æ€»ç»“</h2>
<ol>
<li>æ ¸å¿ƒä»·å€¼ï¼šç²¾å‡†è§£å†³ Typora å¯¼å‡ºçš„ç¼–è¾‘å™¨UIæ ·å¼å†—ä½™ç—›ç‚¹ï¼Œç”Ÿæˆçº¯å†…å®¹çš„ç¬¦åˆ HTML5 è§„èŒƒçš„æ–‡ä»¶ï¼›</li>
<li>æŠ€æœ¯äº®ç‚¹ï¼šçº¯ ES6+ åŸç”Ÿå®ç°ï¼›</li>
<li>ä¼˜åŠ¿ï¼šè½»é‡åŒ–ã€å¯æ§æ€§å¼ºã€è·¨ç¯å¢ƒå…¼å®¹ï¼Œå¯ç›´æ¥éƒ¨ç½²ä½¿ç”¨ã€‚</li>
</ol>
<p>æœ¬æ–¹æ¡ˆæºä»£ç å¼€æºï¼ŒæŒ‰ç…§ MIT åè®®è®¸å¯ã€‚åœ°å€ï¼š <a href="https://github.com/xiaql/md2html5" target="_blank" rel="noopener nofollow">xiaql/md2html5: A typora to pure html5 converter</a></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-23 21:39">2025-12-23 21:38</span>&nbsp;
<a href="https://www.cnblogs.com/zhally">zhally</a>&nbsp;
é˜…è¯»(<span id="post_view_count">14</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19389248);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19389248', targetLink: 'https://www.cnblogs.com/zhally/p/19389248', title: 'ä¸ç”¨ Typora çš„ html å¯¼å‡ºåŠŸèƒ½ï¼Œæ‰‹æ“çº¯ HTML5 è½¬æ¢å™¨' })">ä¸¾æŠ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ æµé‡æ´ªå³°å†²ä¸å®çš„ç§˜å¯†ï¼šæ­ç§˜ç³»ç»Ÿè¿‡è½½ä¿æŠ¤çš„æ ¸å¿ƒé˜²çº¿ ]]></title>
    <link>https://www.cnblogs.com/poemyang/p/19389175</link>
    <guid>9290c5fbceb53775fbac0cc2690c58c1</guid>
    <description>
    <![CDATA[ 
        <h2 class="post-title">
            <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/poemyang/p/19389175" title="å‘å¸ƒäº 2025-12-23 21:16">
    <span role="heading" aria-level="2">æµé‡æ´ªå³°å†²ä¸å®çš„ç§˜å¯†ï¼šæ­ç§˜ç³»ç»Ÿè¿‡è½½ä¿æŠ¤çš„æ ¸å¿ƒé˜²çº¿</span>
    

</a>

        </h2>
        <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>ç³»ç»Ÿæµé‡å¦‚æ½®æ±èˆ¬æ¶¨è½ï¼Œç¬æ—¶çš„æ´ªå³°å¯èƒ½å°†æœ€åšå›ºçš„ç³»ç»Ÿå†²å®ã€‚å¦‚ä½•ç¡®ä¿æ ¸å¿ƒæœåŠ¡åœ¨æé™å‹åŠ›ä¸‹ä¾ç„¶ç¨³å¦‚ç£çŸ³ï¼Ÿç­”æ¡ˆåœ¨äºæ„å»ºä¸€å¥—åˆ†å±‚ååŒã€åŠ¨æ€å¼¹æ€§çš„è¿‡è½½ä¿æŠ¤æœºåˆ¶ã€‚è¿™å¹¶éå•ä¸€æŠ€æœ¯çš„å †ç Œï¼Œè€Œæ˜¯ä¸€é—¨èæ±‡äº†é¢„åˆ¤ã€éš”ç¦»ã€è°ƒåº¦ä¸è‡ªæ„ˆçš„ç³»ç»Ÿå·¥ç¨‹è‰ºæœ¯ã€‚<br>
æœ¬æ–‡å°†æ·±å…¥å‰–æè¿™å¥—å¤šå±‚é˜²æŠ¤ä½“ç³»çš„æ„å»ºä¹‹é“ï¼šä»æœ€å¤–å±‚çš„æµé‡è°ƒåº¦ï¼ˆè´Ÿè½½å‡è¡¡ï¼‰ï¼Œåˆ°ç²¾ç»†åŒ–çš„è¯·æ±‚ç®¡æ§ï¼ˆé™æµï¼‰ï¼Œå†åˆ°ä¿éšœæ ¸å¿ƒä¸šåŠ¡çš„â€œä¸¢è½¦ä¿å¸…â€ç­–ç•¥ï¼ˆé™çº§ä¸ç†”æ–­ï¼‰ï¼Œæœ€ç»ˆè¿ˆå‘æ™ºèƒ½åŒ–çš„è‡ªæˆ‘è°ƒèŠ‚ï¼ˆè‡ªé€‚åº”é™æµï¼‰ã€‚è¿™äº›æœºåˆ¶ç¯ç¯ç›¸æ‰£ï¼Œå®æ—¶è”åŠ¨ï¼Œæ—¨åœ¨ç³»ç»Ÿèµ„æºè€—å°½å‰ï¼Œå»ºç«‹èµ·ä¸€é“æœ‰åºçš„é˜²çº¿ï¼Œç¡®ä¿å…³é”®ä¸šåŠ¡åœ¨æµé‡é£æš´ä¸­ä¾ç„¶èƒ½å¤ŸæŒç»­ç¨³å®šåœ°åˆ›é€ ä»·å€¼ã€‚</p>
<p><strong>è¿‡è½½åŸå› ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬çš„ç³»ç»Ÿä¼šå µè½¦ï¼Ÿ</strong><br>
ç³»ç»Ÿè¿‡è½½ï¼ˆSystem Overloadï¼‰ï¼Œå¦‚åŒåŸå¸‚äº¤é€šåœ¨é«˜å³°æœŸé™·å…¥ç˜«ç—ªï¼Œå…¶æœ¬è´¨æ˜¯è¯·æ±‚å‹åŠ›ä¸å¤„ç†èƒ½åŠ›ä¹‹é—´åŠ¨æ€å¹³è¡¡çš„æ‰“ç ´ã€‚åœ¨ç³»ç»Ÿè®¾è®¡é˜¶æ®µï¼Œéœ€å…¨é¢è¯„ä¼°å…¶å¤„ç†èƒ½åŠ›ï¼Œå…·ä½“æ¶µç›–æ¯ç§’å¤„ç†èƒ½åŠ›ã€è¯·æ±‚å³°å€¼ã€å¹³å‡å¤„ç†æ—¶å»¶ç­‰å…³é”®æŒ‡æ ‡ã€‚è¿™äº›æŒ‡æ ‡ä¸ä»…æœ‰åŠ©äºé¢„ä¼°ç³»ç»Ÿçš„æœ€å¤§å¤„ç†èƒ½åŠ›ï¼Œè¿˜èƒ½ä¸ºç¡®å®šæ‰€éœ€æœºå™¨æ•°é‡ä»¥åŠæ˜¯å¦è¿›è¡Œæ‰©å®¹æä¾›å¯é ä¾æ®ã€‚ç„¶è€Œï¼Œåœ¨å®é™…è¯„ä¼°ä¸­ï¼Œå¾€å¾€ä»…èšç„¦äºè¯·æ±‚é‡å³°å€¼ï¼Œå´å¿½ç•¥äº†ç³»ç»Ÿå¤„ç†èƒ½åŠ›çš„åŠ¨æ€å˜åŒ–ã€‚ç°å®ä¸­ï¼Œç³»ç»Ÿçš„å¤„ç†èƒ½åŠ›å¹¶éæ’å®šä¸å˜ï¼Œå®ƒä¼šå› å†…éƒ¨æŸè€—å’Œå¤–éƒ¨ä¾èµ–è€ŒåŠ¨æ€è¡°å‡ã€‚å®é™…ä¸Šï¼Œç³»ç»Ÿå¤„ç†èƒ½åŠ›çš„é™ä½åŒæ ·ä¼šå¼•å‘è¿‡è½½é—®é¢˜ã€‚<br>
ç³»ç»Ÿè¿‡è½½çš„åŸå› ä¸»è¦å¯å½’ä¸ºä¸¤ç±»ï¼šç¡¬ä»¶ç³»ç»Ÿæé™èƒ½åŠ›è¢«çªç ´å’Œè½¯ä»¶ç³»ç»Ÿæé™èƒ½åŠ›è¢«è¶…è¶Šã€‚ç”±äºç¡¬ä»¶èƒ½åŠ›è¢«è¶…è¶Šçš„æƒ…å†µç›¸å¯¹è¾ƒå°‘ï¼Œå› æ­¤æ›´åº”é‡ç‚¹å…³æ³¨è½¯ä»¶ç³»ç»Ÿï¼ŒåŒ…æ‹¬æ“ä½œç³»ç»Ÿå’Œåº”ç”¨è½¯ä»¶ã€‚æ“ä½œç³»ç»Ÿè´Ÿè´£ç»Ÿä¸€è°ƒé…ä¸ç®¡ç†ç¡¬ä»¶èµ„æºï¼Œè€Œåº”ç”¨ç³»ç»Ÿåˆ™é€šè¿‡ç³»ç»Ÿè°ƒç”¨ä½¿ç”¨è¿™äº›èµ„æºã€‚å½“èµ„æºä½¿ç”¨è¶…å‡ºæ“ä½œç³»ç»Ÿçš„æ‰¿å—é™åº¦æ—¶ï¼Œç³»ç»Ÿçš„æ•´ä½“å¤„ç†èƒ½åŠ›å°†æ€¥å‰§é™ä½ã€‚åº”ç”¨ç³»ç»Ÿçš„ç“¶é¢ˆé€šå¸¸è¡¨ç°ä¸ºä»¥ä¸‹å››ç§ç±»å‹ï¼Œä¸”æŸäº›åº”ç”¨ç³»ç»Ÿå¯èƒ½åŒæ—¶å­˜åœ¨å¤šä¸ªç“¶é¢ˆå› ç´ ã€‚<br>
â€Œ 1ï¼‰å¤„ç†å™¨ç“¶é¢ˆï¼šå¯†é›†çš„è®¡ç®—ä»»åŠ¡ï¼ˆå¦‚å¤æ‚ç®—æ³•ã€åŠ è§£å¯†ï¼‰ã€é¢‘ç¹çš„çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œéƒ½ä¼šå°†å¤„ç†å™¨åˆ©ç”¨ç‡æ¨å‘100%ï¼Œå¯¼è‡´æ–°è¯·æ±‚æ’é˜Ÿç­‰å¾…ï¼Œå“åº”æ—¶é—´æ€¥å‰§æ‹‰é•¿ã€‚<br>
2ï¼‰å†…å­˜ç“¶é¢ˆï¼šé¢‘ç¹çš„åƒåœ¾å›æ”¶ï¼ˆGC Pauseï¼‰ä¼šå†»ç»“åº”ç”¨ï¼Œè€Œæ“ä½œç³»ç»Ÿå±‚é¢çš„å†…å­˜äº¤æ¢ï¼ˆSwappingï¼‰æ›´æ˜¯å°†å¤„ç†é€Ÿåº¦ä»çº³ç§’çº§æ‹–æ…¢è‡³æ¯«ç§’çº§ï¼Œå¯¹æ€§èƒ½é€ æˆæ¯ç­æ€§æ‰“å‡»ã€‚<br>
â€Œ 3ï¼‰ç½‘ç»œI/Oï¼šå¸¦å®½è€—å°½ã€ç½‘ç»œå»¶è¿Ÿï¼Œæˆ–æ˜¯è¿æ¥æ•°ï¼ˆå¦‚æ–‡ä»¶å¥æŸ„ï¼‰è¢«å æ»¡ï¼Œå¯¼è‡´æ— æ³•å»ºç«‹æ–°çš„è¯·æ±‚è¿æ¥ã€‚<br>
4ï¼‰ç£ç›˜I/Oï¼šå¤§é‡çš„æ•°æ®åº“è¯»å†™ã€æ—¥å¿—è®°å½•ã€æ–‡ä»¶æ“ä½œï¼Œç‰¹åˆ«æ˜¯éšæœºI/Oï¼Œä¼šæ˜¾è‘—é™ä½ç£ç›˜ååç‡ï¼Œæ‹–æ…¢æ•´ä¸ªä¸šåŠ¡æµç¨‹ã€‚</p>
<p><strong>è¿‡è½½è§£å†³ç­–ç•¥</strong><br>
é¢å¯¹ç³»ç»Ÿè¿‡è½½ï¼Œè§£å†³æ€è·¯å¯å½’ä¸ºä¸¤å¤§æ–¹å‘ï¼šâ€œå¼€æºâ€ä¸â€œèŠ‚æµâ€ã€‚â€œå¼€æºâ€æ—¨åœ¨æå‡ç³»ç»Ÿçš„æ‰¿è½½ä¸Šé™ï¼Œè€Œâ€œèŠ‚æµâ€åˆ™æ˜¯åœ¨èµ„æºæœ‰é™çš„å‰æä¸‹ï¼Œæ™ºæ…§åœ°ç®¡ç†å’Œè°ƒåº¦è¿›å…¥ç³»ç»Ÿçš„è¯·æ±‚ã€‚ä¸€ä¸ªæˆç†Ÿçš„ç³»ç»Ÿï¼Œå¾€å¾€æ˜¯è¿™ä¸¤ç§ç­–ç•¥çš„æœ‰æœºç»“åˆã€‚<br>
å¼€æºç­–ç•¥æ˜¯æŒ‡æå‡ç³»ç»Ÿæ‰¿è½½åŠ›ã€‚è¿™æ˜¯æœ€ç›´è§‚çš„åº”å¯¹æ–¹å¼ï¼Œæ ¸å¿ƒæ˜¯å¢åŠ ç³»ç»Ÿå¯ç”¨çš„ç‰©ç†æˆ–è™šæ‹Ÿèµ„æºã€‚<br>
1ï¼‰æ‰©å®¹ï¼ˆScalingï¼‰ï¼š ç›´æ¥å¢åŠ ç¡¬ä»¶æŠ•å…¥ï¼Œåˆ†ä¸ºå‚ç›´æ‰©å®¹ï¼ˆå‡çº§å•æœºé…ç½®ï¼‰å’Œæ°´å¹³æ‰©å®¹ï¼ˆå¢åŠ æ›´å¤šæœåŠ¡å™¨èŠ‚ç‚¹ï¼‰ã€‚æ‰©å®¹èƒ½ç«‹ç«¿è§å½±åœ°æå‡å¤„ç†èƒ½åŠ›ï¼Œä½†æˆæœ¬é«˜æ˜‚ï¼Œä¸”èµ„æºç»ˆæœ‰ä¸Šé™ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒæ— æ³•è§£å†³ç”±è½¯ä»¶è®¾è®¡ç¼ºé™·ï¼ˆå¦‚é”ç«äº‰ã€æ…¢æŸ¥è¯¢ï¼‰å¼•å‘çš„ç“¶é¢ˆã€‚<br>
2ï¼‰è´Ÿè½½å‡è¡¡ï¼ˆLoad Balancingï¼‰ï¼š å®ƒæ˜¯æ°´å¹³æ‰©å®¹çš„å¿…ç„¶æ­æ¡£ã€‚é€šè¿‡æ™ºèƒ½çš„è°ƒåº¦ç®—æ³•ï¼Œå°†è¯·æ±‚æµé‡å‡åŒ€åœ°åˆ†å‘åˆ°åç«¯å„ä¸ªæœåŠ¡èŠ‚ç‚¹ï¼Œé¿å…å•ç‚¹è¿‡è½½ï¼Œæœ€å¤§åŒ–åˆ©ç”¨æ•´ä¸ªé›†ç¾¤çš„å¤„ç†èƒ½åŠ›ã€‚<br>
èŠ‚æµç­–ç•¥æ˜¯æŒ‡ä¼˜åŒ–è¯·æ±‚å¤„ç†æµã€‚å½“â€œå¼€æºâ€è¾¾åˆ°æé™æˆ–ä¸ç¬¦åˆæˆæœ¬æ•ˆç›Šæ—¶ï¼Œâ€œèŠ‚æµâ€ä¾¿æˆä¸ºä¿éšœç³»ç»ŸéŸ§æ€§çš„å…³é”®ã€‚å®ƒä¸å†è¿½æ±‚å¤„ç†æ‰€æœ‰è¯·æ±‚ï¼Œè€Œæ˜¯é€‰æ‹©æ€§åœ°å¤„ç†ï¼Œç¡®ä¿æ ¸å¿ƒåŠŸèƒ½ä¸å—å½±å“ã€‚<br>
1ï¼‰æµé‡æ§åˆ¶ï¼ˆTraffic Shapingï¼‰ï¼š è¿™æ˜¯è¿‡è½½ä¿æŠ¤çš„æ ¸å¿ƒæ‰‹æ®µï¼Œé€šè¿‡é™æµã€æ’é˜Ÿç­‰æ–¹å¼ï¼Œä¸»åŠ¨æ§åˆ¶è¿›å…¥ç³»ç»Ÿçš„è¯·æ±‚é€Ÿç‡ï¼Œé˜²æ­¢æµé‡æ´ªå³°ç›´æ¥å†²å‡»åç«¯æœåŠ¡ã€‚å®ƒåƒä¸€ä¸ªæ™ºèƒ½é˜€é—¨ï¼Œç¡®ä¿æ°´æµå¹³ç¨³å¯æ§ã€‚<br>
2ï¼‰æœåŠ¡é™çº§ï¼ˆGraceful Degradationï¼‰ï¼š è¿™æ˜¯ä¸€ç§â€œèˆè½¦ä¿å¸…â€çš„æ™ºæ…§ã€‚åœ¨ç³»ç»Ÿå‹åŠ›å·¨å¤§æ—¶ï¼Œæœ‰ç­–ç•¥åœ°å…³é—­æˆ–ç®€åŒ–éæ ¸å¿ƒåŠŸèƒ½ï¼ˆå¦‚å•†å“æ¨èã€ç”¨æˆ·è¯„è®ºï¼‰ï¼Œå°†å®è´µçš„ç³»ç»Ÿèµ„æºé›†ä¸­ç”¨äºä¿éšœæ ¸å¿ƒä¸šåŠ¡æµç¨‹ï¼ˆå¦‚ä¸‹å•ã€æ”¯ä»˜ï¼‰çš„ç¨³å®šã€‚<br>
å°½ç®¡æ‰©å®¹å’Œè´Ÿè½½å‡è¡¡æ˜¯æ„å»ºé«˜å¹¶å‘ç³»ç»Ÿçš„åŸºç¡€ï¼Œä½†å®ƒä»¬æ›´åƒæ˜¯æé«˜äº†å ¤åçš„é«˜åº¦ã€‚è€ŒçœŸæ­£çš„è¿‡è½½ä¿æŠ¤ï¼Œåˆ™æ˜¯åœ¨æ´ªæ°´æ¥ä¸´æ—¶ï¼Œå¦‚ä½•ç§‘å­¦åœ°æ³„æ´ªã€å¯¼æµï¼Œç¡®ä¿å¤§åæœ¬èº«å’Œå…¶å®ˆæŠ¤çš„æ ¸å¿ƒåŒºåŸŸå®‰ç„¶æ— æ™ã€‚è¿™æ­£æ˜¯â€œèŠ‚æµâ€ç­–ç•¥çš„ä»·å€¼æ‰€åœ¨ã€‚</p>
<p><strong>è¿‡è½½ä¿æŠ¤çš„æ ¸å¿ƒä»·å€¼</strong><br>
ä¼ ç»Ÿç³»ç»Ÿè®¾è®¡çš„ç†æƒ³æ˜¯æ°¸ä¸å¤±è´¥ï¼Œä½†è¿™åœ¨çœŸå®å¤æ‚çš„ç³»ç»Ÿä¸–ç•Œä¸­ä¸åˆ‡å®é™…ã€‚è¿‡è½½ä¿æŠ¤æ‰¿è®¤å¤±è´¥çš„å¿…ç„¶æ€§ï¼Œå¹¶å°†è®¾è®¡çš„ç„¦ç‚¹ä»â€œå¦‚ä½•é¿å…å¤±è´¥â€è½¬ç§»åˆ°â€œå½“å¤±è´¥å‘ç”Ÿæ—¶ï¼Œå¦‚ä½•å¯æ§åœ°ã€æœ‰é¢„è§æ€§åœ°åº”å¯¹â€ã€‚å®ƒç”¨æœ‰åºçš„é™çº§å–ä»£æ— åºçš„å´©æºƒï¼Œç”¨å¯é¢„æœŸçš„å±€éƒ¨ä¸å¯ç”¨æ¢å–æ•´ä½“ç³»ç»Ÿçš„ç¨³å®šã€‚<br>
åœ¨æ²¡æœ‰ä¿æŠ¤çš„æƒ…å†µä¸‹ï¼Œè¿‡è½½æ„å‘³ç€æ‰€æœ‰è¯·æ±‚ä¸€åŒå˜æ…¢ï¼Œæœ€ç»ˆä¸€åŒå¤±è´¥ï¼Œç³»ç»Ÿé™·å…¥æ··æ²Œã€‚è€Œè¿‡è½½ä¿æŠ¤æœºåˆ¶ï¼Œå¦‚åŒä¸€ä½å†·é™çš„è°ƒåº¦å‘˜ï¼Œå®ƒæ ¹æ®é¢„è®¾çš„ä¼˜å…ˆçº§å’Œè§„åˆ™ï¼Œå†³å®šäº†å“ªäº›è¯·æ±‚è¢«ç«‹å³å¤„ç†ï¼Œå“ªäº›éœ€è¦æ’é˜Ÿç­‰å¾…ï¼Œå“ªäº›è¢«ç¤¼è²Œåœ°æ‹’ç»ã€‚è¿™ç§æœºåˆ¶å°†æ··ä¹±çš„æµé‡å†²å‡»æ³¢ï¼Œè½¬åŒ–ä¸ºä¸€ä¸ªæœ‰åºçš„ã€å¯ç®¡ç†çš„ä¸šåŠ¡å¤„ç†é˜Ÿåˆ—ã€‚<br>
åœ¨ç³»ç»Ÿé¢ä¸´è¿‡è½½æ—¶ï¼Œé¦–è¦ä»»åŠ¡æ˜¯åœ¨æœ‰é™èµ„æºæ¡ä»¶ä¸‹ï¼Œé€šè¿‡ä¼˜åŒ–å’Œä¿æŠ¤ç­–ç•¥ï¼Œç¡®ä¿ç³»ç»Ÿçš„å…³é”®åŠŸèƒ½èƒ½å¤Ÿç¨³å®šè¿è¡Œã€‚ä¾‹å¦‚ï¼Œå¯å¯¹ç³»ç»Ÿçš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œä¼˜å…ˆçº§æ’åºï¼Œæ˜ç¡®å“ªäº›åŠŸèƒ½æ˜¯è‡³å…³é‡è¦çš„ï¼Œå“ªäº›åŠŸèƒ½åœ¨å¿…è¦æ—¶å¯æš‚æ—¶å…³é—­æˆ–é™çº§ã€‚åŒæ—¶ï¼Œè®¾å®šåˆç†çš„é˜ˆå€¼å’Œè§„åˆ™ï¼Œä»¥ä¾¿åœ¨ç³»ç»Ÿè¿‡è½½æ—¶ï¼Œèƒ½å¤Ÿè‡ªåŠ¨ä¸¢å¼ƒè¶…å‡ºå¤„ç†èƒ½åŠ›çš„è¯·æ±‚ã€‚<br>
ä¸€åˆ‡æŠ€æœ¯ç­–ç•¥éƒ½ä¸ºä¸šåŠ¡æœåŠ¡ã€‚è¿‡è½½ä¿æŠ¤çš„ç»ˆæç›®æ ‡ï¼Œæ˜¯åœ¨èµ„æºæé™çš„è¾¹ç¼˜ï¼Œå°†æ¯ä¸€åˆ†è®¡ç®—åŠ›éƒ½ç”¨åœ¨â€œåˆ€åˆƒâ€ä¸Šï¼Œç¡®ä¿æ”¯ä»˜ã€ä¸‹å•ç­‰æ ¸å¿ƒåŠŸèƒ½ç•…é€šæ— é˜»ã€‚å¯¹ç”¨æˆ·è€Œè¨€ï¼Œä¸€ä¸ªèƒ½æ˜ç¡®å‘ŠçŸ¥â€œç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åå†è¯•â€çš„ç³»ç»Ÿï¼Œè¿œæ¯”ä¸€ä¸ªæ°¸è¿œåœ¨åŠ è½½ä¸­ã€æœ€ç»ˆè¶…æ—¶çš„ç³»ç»Ÿæ›´å€¼å¾—ä¿¡èµ–ã€‚</p>
<p><strong>æœªå®Œå¾…ç»­</strong></p>
<p><strong>å¾ˆé«˜å…´ä¸ä½ ç›¸é‡ï¼å¦‚æœä½ å–œæ¬¢æœ¬æ–‡å†…å®¹ï¼Œè®°å¾—å…³æ³¨å“¦!!!</strong></p>

</div>
<div id="MySignature" role="contentinfo">
    <p>æœ¬æ–‡æ¥è‡ªåšå®¢å›­ï¼Œä½œè€…ï¼š<a href="https://www.cnblogs.com/poemyang/" target="_blank">poemyang</a>ï¼Œè½¬è½½è¯·æ³¨æ˜åŸæ–‡é“¾æ¥ï¼š<a href="https://www.cnblogs.com/poemyang/p/19389175" target="_blank">https://www.cnblogs.com/poemyang/p/19389175</a></p>
</div>
<div class="clear"></div>

        <p class="postfoot">
            posted on 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-23 21:16">2025-12-23 21:16</span>&nbsp;
<a href="https://www.cnblogs.com/poemyang">poemyang</a>&nbsp;
é˜…è¯»(<span id="post_view_count">20</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19389175);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19389175', targetLink: 'https://www.cnblogs.com/poemyang/p/19389175', title: 'æµé‡æ´ªå³°å†²ä¸å®çš„ç§˜å¯†ï¼šæ­ç§˜ç³»ç»Ÿè¿‡è½½ä¿æŠ¤çš„æ ¸å¿ƒé˜²çº¿' })">ä¸¾æŠ¥</a>

        </p>
     ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Kafkaå…¥é—¨å¿…çŸ¥æ¦‚å¿µâ€”â€”Topicã€åˆ†åŒºã€Offsetã€æ¶ˆè´¹ç»„çš„åä½œæœºåˆ¶ä¸å½±å“ ]]></title>
    <link>https://www.cnblogs.com/shiyuelp/p/19389157</link>
    <guid>25e522bbeafcc3a94dfbcb00adc2117e</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/shiyuelp/p/19389157" title="å‘å¸ƒäº 2025-12-23 21:10">
    <span role="heading" aria-level="2">Kafkaå…¥é—¨å¿…çŸ¥æ¦‚å¿µâ€”â€”Topicã€åˆ†åŒºã€Offsetã€æ¶ˆè´¹ç»„çš„åä½œæœºåˆ¶ä¸å½±å“</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p><strong>å†™åœ¨å‰é¢ï¼Œæœ¬äººç›®å‰å¤„äºæ±‚èŒä¸­ï¼Œå¦‚æœ‰åˆé€‚å†…æ¨å²—ä½ï¼Œè¯·åŠ ï¼šlpshiyue æ„Ÿè°¢</strong></p>
<blockquote>
<p>ç†è§£Kafkaçš„æ ¸å¿ƒæ¦‚å¿µå¦‚åŒæŒæ¡åˆ†å¸ƒå¼ç³»ç»Ÿçš„é€šç”¨è¯­è¨€ï¼Œè¿™äº›åŸºç¡€ç»„ä»¶çš„é«˜æ•ˆåä½œæ­£æ˜¯Kafkaæµ·é‡æ•°æ®å¤„ç†èƒ½åŠ›çš„æºæ³‰</p>
</blockquote>
<p>åœ¨æ¶ˆæ¯é˜Ÿåˆ—é€‰å‹æ¡†æ¶ä¸­ï¼ŒKafkaä»¥å…¶é«˜ååã€å¯æ‰©å±•æ¶æ„æˆä¸ºå¤§æ•°æ®åœºæ™¯çš„é¦–é€‰ã€‚ç„¶è€Œï¼Œè¦çœŸæ­£å‘æŒ¥Kafkaçš„æ½œåŠ›ï¼Œå¿…é¡»æ·±å…¥ç†è§£å…¶æ ¸å¿ƒæ¦‚å¿µä¹‹é—´çš„åä½œå…³ç³»ã€‚æœ¬æ–‡å°†å…¨é¢è§£æTopicã€åˆ†åŒºã€Offsetå’Œæ¶ˆè´¹ç»„å››å¤§æ ¸å¿ƒæ¦‚å¿µï¼Œæ­ç¤ºå®ƒä»¬å¦‚ä½•å…±åŒæ„å»ºKafkaçš„é«˜æ€§èƒ½æ¶æ„ã€‚</p>
<h2 id="1-kafkaæ¶æ„æ¦‚è§ˆä¸è®¾è®¡å“²å­¦">1 Kafkaæ¶æ„æ¦‚è§ˆä¸è®¾è®¡å“²å­¦</h2>
<h3 id="11-åˆ†å±‚æ¶æ„ä¸æ•°æ®æµ">1.1 åˆ†å±‚æ¶æ„ä¸æ•°æ®æµ</h3>
<p>Kafkaé‡‡ç”¨<strong>ç”Ÿäº§è€…-æ¶ˆè´¹è€…</strong>ç»å…¸æ¶æ„ï¼Œæ•´ä½“å¯åˆ†ä¸ºé€»è¾‘ä¸‰å±‚ï¼šç”Ÿäº§è€…å±‚è´Ÿè´£æ¶ˆæ¯å‘é€ï¼ŒBrokeré›†ç¾¤å±‚å¤„ç†æ¶ˆæ¯å­˜å‚¨ä¸è·¯ç”±ï¼Œæ¶ˆè´¹è€…å±‚å®ç°æ¶ˆæ¯æ¶ˆè´¹ã€‚è¿™ç§æ¸…æ™°çš„åˆ†å±‚æ¶æ„ä½¿å¾—Kafkaèƒ½å¤Ÿé«˜æ•ˆå¤„ç†æµ·é‡æ¶ˆæ¯æµã€‚</p>
<p>Kafkaçš„è®¾è®¡å“²å­¦å›´ç»•<strong>åˆ†å¸ƒå¼ã€å¯æ‰©å±•å’Œé«˜åå</strong>å±•å¼€ã€‚ä¸ä¼ ç»Ÿæ¶ˆæ¯ç³»ç»Ÿä¸åŒï¼ŒKafkaå°†æ¶ˆæ¯æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œé€šè¿‡é¡ºåºI/Oå’Œé›¶æ‹·è´æŠ€æœ¯å®ç°é«˜æ€§èƒ½ã€‚è¿™ç§è®¾è®¡ä½¿Kafkaæ—¢èƒ½ä½œä¸ºæ¶ˆæ¯é˜Ÿåˆ—ï¼Œåˆèƒ½ä½œä¸ºå­˜å‚¨ç³»ç»Ÿä½¿ç”¨ï¼Œæ”¯æŒæ¶ˆæ¯å›æº¯å’Œé‡å¤æ¶ˆè´¹ã€‚</p>
<h3 id="12-ç‰©ç†å­˜å‚¨ä¸é€»è¾‘è§†å›¾çš„åˆ†ç¦»">1.2 ç‰©ç†å­˜å‚¨ä¸é€»è¾‘è§†å›¾çš„åˆ†ç¦»</h3>
<p>Kafkaåˆ›æ–°æ€§åœ°å®ç°äº†<strong>é€»è¾‘Topicä¸ç‰©ç†åˆ†åŒºçš„åˆ†ç¦»</strong>ã€‚Topicä½œä¸ºé€»è¾‘æ¦‚å¿µï¼Œæ–¹ä¾¿ä¸šåŠ¡åˆ†ç±»ï¼›è€Œåˆ†åŒºä½œä¸ºç‰©ç†æ¦‚å¿µï¼Œå®ç°äº†æ•°æ®çš„åˆ†å¸ƒå¼å­˜å‚¨å’Œå¹¶è¡Œå¤„ç†ã€‚è¿™ç§åˆ†ç¦»æ˜¯Kafkaé«˜æ‰©å±•æ€§çš„å…³é”®ï¼Œå…è®¸é›†ç¾¤é€šè¿‡å¢åŠ åˆ†åŒºå’ŒBrokeræ¥çº¿æ€§æ‰©å±•ååé‡ã€‚</p>
<p><strong>åˆ†åŒºæœºåˆ¶</strong>å°†æ¯ä¸ªTopicåˆ’åˆ†ä¸ºå¤šä¸ªæœ‰åºçš„æ—¥å¿—åºåˆ—ï¼Œåˆ†å¸ƒåœ¨ä¸åŒBrokerä¸Šã€‚å½“ç”Ÿäº§è€…å‘é€æ¶ˆæ¯æ—¶ï¼Œå®é™…ä¸Šæ˜¯å°†æ¶ˆæ¯å†™å…¥ç‰¹å®šTopicçš„ç‰¹å®šåˆ†åŒºï¼›æ¶ˆè´¹è€…ä¹Ÿæ˜¯ä»ç‰¹å®šåˆ†åŒºè¯»å–æ¶ˆæ¯ã€‚è¿™ç§è®¾è®¡æ—¢ä¿è¯äº†åˆ†åŒºå†…æ¶ˆæ¯é¡ºåºï¼Œåˆé€šè¿‡å¹¶è¡Œå¤„ç†æå‡äº†æ•´ä½“ååé‡ã€‚</p>
<h2 id="2-topicä¸åˆ†åŒºæ•°æ®åˆ†å¸ƒçš„æ ¸å¿ƒæœºåˆ¶">2 Topicä¸åˆ†åŒºï¼šæ•°æ®åˆ†å¸ƒçš„æ ¸å¿ƒæœºåˆ¶</h2>
<h3 id="21-topicçš„é€»è¾‘æŠ½è±¡ä¸ç‰©ç†å®ç°">2.1 Topicçš„é€»è¾‘æŠ½è±¡ä¸ç‰©ç†å®ç°</h3>
<p><strong>Topicæ˜¯æ¶ˆæ¯çš„é€»è¾‘å®¹å™¨</strong>ï¼Œç±»ä¼¼äºæ•°æ®åº“ä¸­çš„è¡¨ã€‚ç”Ÿäº§è€…å°†æ¶ˆæ¯å‘é€åˆ°æŒ‡å®šTopicï¼Œæ¶ˆè´¹è€…ä»Topicè®¢é˜…æ¶ˆæ¯ã€‚Topicæœ¬èº«ä¸å­˜å‚¨æ•°æ®ï¼Œè€Œæ˜¯é€šè¿‡å…¶ä¸‹çš„åˆ†åŒºå®é™…æ‰¿è½½æ¶ˆæ¯ã€‚</p>
<p>æ¯ä¸ªTopicç”±ä¸€ä¸ªæˆ–å¤šä¸ª<strong>åˆ†åŒºï¼ˆPartitionï¼‰</strong> ç»„æˆï¼Œåˆ†åŒºæ˜¯Kafkaå¹¶è¡Œå¤„ç†çš„åŸºæœ¬å•ä½ã€‚åˆ†åŒºåœ¨ç‰©ç†ä¸Šå¯¹åº”ç£ç›˜ä¸Šçš„ç›®å½•ï¼Œå‘½åè§„åˆ™ä¸º<code>&lt;topic_name&gt;-&lt;partition_id&gt;</code>ã€‚ä¾‹å¦‚ï¼Œåä¸º"user_behavior"çš„Topicè‹¥æœ‰3ä¸ªåˆ†åŒºï¼Œåˆ™å¯¹åº”ä¸‰ä¸ªç›®å½•ï¼šuser_behavior-0ã€user_behavior-1ã€user_behavior-2ã€‚</p>
<h3 id="22-åˆ†åŒºç­–ç•¥ä¸æ¶ˆæ¯è·¯ç”±">2.2 åˆ†åŒºç­–ç•¥ä¸æ¶ˆæ¯è·¯ç”±</h3>
<p>Kafkaæä¾›çµæ´»çš„åˆ†åŒºç­–ç•¥ï¼Œå†³å®šæ¶ˆæ¯å¦‚ä½•è·¯ç”±åˆ°ç‰¹å®šåˆ†åŒºã€‚<strong>é»˜è®¤åˆ†åŒºç­–ç•¥</strong>åŸºäºKeyçš„å“ˆå¸Œå€¼ï¼šå½“æ¶ˆæ¯æŒ‡å®šKeyæ—¶ï¼Œä½¿ç”¨<code>hash(key) % åˆ†åŒºæ•°</code>è®¡ç®—ç›®æ ‡åˆ†åŒºï¼›æœªæŒ‡å®šKeyæ—¶ï¼Œé‡‡ç”¨è½®è¯¢ç­–ç•¥å‡åŒ€åˆ†å¸ƒã€‚</p>
<pre><code class="language-java">// åˆ†åŒºç­–ç•¥æ ¸å¿ƒé€»è¾‘ç¤ºä¾‹
List&lt;PartitionInfo&gt; partitions = cluster.partitionsForTopic(topic);
if (key != null) {
    // æŒ‰Keyå“ˆå¸Œåˆ†åŒºï¼Œä¿è¯åŒä¸€Keyçš„æ¶ˆæ¯è¿›å…¥åŒä¸€åˆ†åŒº
    return Math.abs(key.hashCode()) % partitions.size();
} else {
    // è½®è¯¢ç­–ç•¥ï¼Œå‡åŒ€åˆ†å¸ƒ
    return nextRoundRobinIndex() % partitions.size();
}
</code></pre>
<p><strong>åˆ†åŒºç­–ç•¥çš„é€‰æ‹©ç›´æ¥å½±å“æ¶ˆæ¯é¡ºåºæ€§å’Œè´Ÿè½½å‡è¡¡</strong>ã€‚æŒ‰Keyå“ˆå¸Œåˆ†åŒºä¿è¯ç›¸åŒKeyçš„æ¶ˆæ¯é¡ºåºå¤„ç†ï¼Œé€‚åˆéœ€è¦ä¿åºçš„åœºæ™¯ï¼›è½®è¯¢ç­–ç•¥åˆ™æä¾›æ›´å¥½çš„è´Ÿè½½å‡è¡¡ï¼Œé€‚åˆæ— é¡ºåºè¦æ±‚çš„åœºæ™¯ã€‚</p>
<h3 id="23-åˆ†åŒºæ•°é‡çš„æƒè¡¡è‰ºæœ¯">2.3 åˆ†åŒºæ•°é‡çš„æƒè¡¡è‰ºæœ¯</h3>
<p>åˆ†åŒºæ•°é‡æ˜¯Kafkaæ€§èƒ½è°ƒä¼˜çš„å…³é”®å‚æ•°ã€‚<strong>åˆ†åŒºè¿‡å°‘</strong>ä¼šå¯¼è‡´æ— æ³•å……åˆ†åˆ©ç”¨é›†ç¾¤å¹¶è¡Œèƒ½åŠ›ï¼›<strong>åˆ†åŒºè¿‡å¤š</strong>åˆ™å¢åŠ å…ƒæ•°æ®å¼€é”€å’ŒRebalanceæˆæœ¬ã€‚</p>
<p>å®è·µç»éªŒè¡¨æ˜ï¼Œåˆ†åŒºæ•°é‡åº”å½“ä¸æ¶ˆè´¹è€…æ•°é‡ç›¸åŒ¹é…ï¼Œä¸”è€ƒè™‘æœªæ¥æ‰©å±•éœ€æ±‚ã€‚é€šå¸¸å»ºè®®å•ä¸ªBrokerçš„åˆ†åŒºæ€»æ•°ä¸è¶…è¿‡2000-4000ä¸ªï¼Œä»¥é¿å…æ–‡ä»¶å¥æŸ„å’Œå†…å­˜å¼€é”€è¿‡å¤§ã€‚</p>
<h2 id="3-æ¶ˆè´¹è€…ç»„ä¸è´Ÿè½½å‡è¡¡æœºåˆ¶">3 æ¶ˆè´¹è€…ç»„ä¸è´Ÿè½½å‡è¡¡æœºåˆ¶</h2>
<h3 id="31-æ¶ˆè´¹è€…ç»„æ¨¡å‹åŠå…¶ä¼˜åŠ¿">3.1 æ¶ˆè´¹è€…ç»„æ¨¡å‹åŠå…¶ä¼˜åŠ¿</h3>
<p><strong>æ¶ˆè´¹è€…ç»„ï¼ˆConsumer Groupï¼‰</strong> æ˜¯Kafkaå®ç°è´Ÿè½½å‡è¡¡å’Œå®¹é”™çš„æ ¸å¿ƒæœºåˆ¶ã€‚ç»„å†…å¤šä¸ªæ¶ˆè´¹è€…å®ä¾‹å…±åŒæ¶ˆè´¹ä¸€ä¸ªæˆ–å¤šä¸ªTopicï¼Œæ¯ä¸ªåˆ†åŒºåœ¨åŒä¸€æ—¶é—´åªèƒ½è¢«ç»„å†…ä¸€ä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹ã€‚</p>
<p>æ¶ˆè´¹è€…ç»„æ¨¡å‹åŒæ—¶æ”¯æŒ<strong>å‘å¸ƒ-è®¢é˜…</strong>å’Œ<strong>ç‚¹å¯¹ç‚¹</strong>ä¸¤ç§æ¶ˆæ¯æ¨¡å¼ï¼šå½“ä¸åŒåº”ç”¨ä½¿ç”¨ä¸åŒGroup IDæ—¶ï¼Œå®ç°å¹¿æ’­æ•ˆæœï¼›å½“åŒä¸€åº”ç”¨å¤šä¸ªå®ä¾‹ä½¿ç”¨ç›¸åŒGroup IDæ—¶ï¼Œå®ç°è´Ÿè½½å‡è¡¡ã€‚</p>
<h3 id="32-rebalanceæœºåˆ¶ä¸åˆ†åŒºåˆ†é…">3.2 Rebalanceæœºåˆ¶ä¸åˆ†åŒºåˆ†é…</h3>
<p><strong>Rebalanceæ˜¯æ¶ˆè´¹è€…ç»„çš„æ ¸å¿ƒåè°ƒæœºåˆ¶</strong>ï¼Œåœ¨ä»¥ä¸‹æƒ…å†µä¸‹è§¦å‘ï¼šæ¶ˆè´¹è€…åŠ å…¥æˆ–ç¦»å¼€ç»„ã€Topicåˆ†åŒºæ•°å˜åŒ–ã€è®¢é˜…Topicå˜åŒ–ã€‚Rebalanceè¿‡ç¨‹åŒ…æ‹¬ä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li><strong>Joiné˜¶æ®µ</strong>ï¼šæ‰€æœ‰æ¶ˆè´¹è€…å‘åè°ƒè€…æ³¨å†Œ</li>
<li><strong>Syncé˜¶æ®µ</strong>ï¼šç»„Leaderè®¡ç®—åˆ†é…æ–¹æ¡ˆå¹¶åŒæ­¥ç»™æ‰€æœ‰æˆå‘˜</li>
<li><strong>æ‰§è¡Œé˜¶æ®µ</strong>ï¼šæ¶ˆè´¹è€…å¼€å§‹ä»åˆ†é…çš„åˆ†åŒºæ¶ˆè´¹</li>
</ol>
<p>Kafkaæä¾›å¤šç§<strong>åˆ†åŒºåˆ†é…ç­–ç•¥</strong>ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯éœ€æ±‚ï¼š</p>
<ul>
<li><strong>Rangeç­–ç•¥</strong>ï¼ˆé»˜è®¤ï¼‰ï¼šæŒ‰Topicç»´åº¦é¡ºåºåˆ†é…ï¼Œå¯èƒ½å¯¼è‡´è´Ÿè½½ä¸å‡</li>
<li><strong>RoundRobinç­–ç•¥</strong>ï¼šæ‰€æœ‰åˆ†åŒºè½®è¯¢åˆ†é…ï¼Œè´Ÿè½½æ›´å‡è¡¡</li>
<li><strong>Stickyç­–ç•¥</strong>ï¼šå°½é‡å‡å°‘åˆ†åŒºç§»åŠ¨ï¼Œå‡å°‘Rebalanceå¼€é”€</li>
</ul>
<h3 id="33-æ¶ˆè´¹è€…ä½ç§»ç®¡ç†">3.3 æ¶ˆè´¹è€…ä½ç§»ç®¡ç†</h3>
<p><strong>Offsetæ˜¯æ¶ˆè´¹è€…åœ¨åˆ†åŒºä¸­çš„æ¶ˆè´¹ä½ç½®</strong>ï¼Œæ˜¯åˆ†åŒºå†…æ¶ˆæ¯çš„å”¯ä¸€æ ‡è¯†ã€‚Kafkaå°†ä½ç§»ä¿¡æ¯å­˜å‚¨åœ¨ç‰¹æ®Šçš„<code>__consumer_offsets</code> Topicä¸­ï¼Œé»˜è®¤50ä¸ªåˆ†åŒºï¼Œé€šè¿‡<code>Math.abs(groupId.hashCode()) % 50</code>è®¡ç®—å­˜å‚¨ä½ç½®ã€‚</p>
<p>ä½ç§»æäº¤æ–¹å¼å½±å“æ¶ˆæ¯å¤„ç†çš„<strong>ç²¾ç¡®ä¸€æ¬¡æ€§</strong>è¯­ä¹‰ï¼š</p>
<ul>
<li><strong>è‡ªåŠ¨æäº¤</strong>ï¼šç®€å•ä½†å¯èƒ½é‡å¤æ¶ˆè´¹æˆ–ä¸¢å¤±æ¶ˆæ¯</li>
<li><strong>æ‰‹åŠ¨æäº¤</strong>ï¼šæ›´ç²¾ç¡®æ§åˆ¶ï¼Œæ”¯æŒåŒæ­¥å’Œå¼‚æ­¥æ–¹å¼</li>
</ul>
<h2 id="4-å‰¯æœ¬æœºåˆ¶ä¸é«˜å¯ç”¨æ€§">4 å‰¯æœ¬æœºåˆ¶ä¸é«˜å¯ç”¨æ€§</h2>
<h3 id="41-leader-followeræ¶æ„">4.1 Leader-Followeræ¶æ„</h3>
<p>Kafkaé€šè¿‡<strong>å‰¯æœ¬æœºåˆ¶</strong>ä¿è¯æ•°æ®é«˜å¯ç”¨ã€‚æ¯ä¸ªåˆ†åŒºæœ‰å¤šä¸ªå‰¯æœ¬ï¼Œåˆ†ä¸ºLeaderå’ŒFollowerä¸¤ç§è§’è‰²ã€‚Leaderå¤„ç†æ‰€æœ‰è¯»å†™è¯·æ±‚ï¼ŒFollowerä»LeaderåŒæ­¥æ•°æ®ã€‚å½“Leaderå¤±æ•ˆæ—¶ï¼ŒKafkaä»ISRï¼ˆIn-Sync Replicasï¼‰ä¸­é€‰æ‹©æ–°çš„Leaderã€‚</p>
<p><strong>ISRæœºåˆ¶</strong>ç»´æŠ¤ä¸Leaderä¿æŒåŒæ­¥çš„å‰¯æœ¬é›†åˆã€‚Followerå¿…é¡»å®šæœŸå‘Leaderå‘é€å¿ƒè·³ï¼Œè‹¥è¶…è¿‡<code>replica.lag.time.max.ms</code>ï¼ˆé»˜è®¤10ç§’ï¼‰æœªåŒæ­¥ï¼Œåˆ™è¢«ç§»å‡ºISRã€‚è¿™ç§è®¾è®¡æ—¢ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼Œåˆæä¾›æ•…éšœè½¬ç§»èƒ½åŠ›ã€‚</p>
<h3 id="42-æ•°æ®å¯é æ€§é…ç½®">4.2 æ•°æ®å¯é æ€§é…ç½®</h3>
<p>ç”Ÿäº§è€…å¯é€šè¿‡<strong>ackså‚æ•°</strong>é…ç½®æ•°æ®å¯é æ€§çº§åˆ«ï¼š</p>
<ul>
<li><strong>acks=0</strong>ï¼šæ— ç¡®è®¤ï¼Œæœ€é«˜ååä½†å¯èƒ½ä¸¢å¤±æ•°æ®</li>
<li><strong>acks=1</strong>ï¼šLeaderç¡®è®¤ï¼Œå‡è¡¡é€‰æ‹©</li>
<li><strong>acks=all</strong>ï¼šæ‰€æœ‰ISRå‰¯æœ¬ç¡®è®¤ï¼Œæœ€å¯é </li>
</ul>
<p>åœ¨è¦æ±‚é«˜å¯é æ€§çš„åœºæ™¯ä¸­ï¼Œå»ºè®®é…ç½®<code>acks=all</code>å¹¶è®¾ç½®<code>min.insync.replicas</code>ï¼ˆé»˜è®¤1ï¼‰ï¼Œç¡®ä¿å†™å…¥å¤šä¸ªå‰¯æœ¬åæ‰è¿”å›æˆåŠŸã€‚</p>
<h2 id="5-æ ¸å¿ƒæ¦‚å¿µçš„ååŒæ•ˆåº”">5 æ ¸å¿ƒæ¦‚å¿µçš„ååŒæ•ˆåº”</h2>
<h3 id="51-å››è€…åä½œçš„é«˜æ€§èƒ½å¥¥ç§˜">5.1 å››è€…åä½œçš„é«˜æ€§èƒ½å¥¥ç§˜</h3>
<p>Topicã€åˆ†åŒºã€Offsetå’Œæ¶ˆè´¹ç»„å››ä¸ªæ¦‚å¿µç›¸äº’åä½œï¼Œå½¢æˆKafkaé«˜æ€§èƒ½çš„åŸºçŸ³ï¼š<strong>Topicæä¾›é€»è¾‘åˆ†ç±»ï¼Œåˆ†åŒºå®ç°å¹¶è¡Œå¤„ç†ï¼ŒOffsetè®°å½•æ¶ˆè´¹è¿›åº¦ï¼Œæ¶ˆè´¹ç»„ä¿éšœè´Ÿè½½å‡è¡¡</strong>ã€‚</p>
<p>è¿™ç§åä½œæœºåˆ¶çš„å®é™…æ•ˆæœä½“ç°åœ¨ï¼š<strong>æ¨ªå‘æ‰©å±•èƒ½åŠ›</strong>é€šè¿‡å¢åŠ åˆ†åŒºå’Œæ¶ˆè´¹è€…å®ç°ï¼›<strong>å®¹é”™æ€§</strong>é€šè¿‡å‰¯æœ¬æœºåˆ¶ä¿éšœï¼›<strong>æ¶ˆæ¯é¡ºåºæ€§</strong>åœ¨åˆ†åŒºå†…å¾—åˆ°ä¿è¯ï¼›<strong>è´Ÿè½½å‡è¡¡</strong>é€šè¿‡æ¶ˆè´¹ç»„è‡ªåŠ¨å®ç°ã€‚</p>
<h3 id="52-å®é™…åº”ç”¨ä¸­çš„é…ç½®ç­–ç•¥">5.2 å®é™…åº”ç”¨ä¸­çš„é…ç½®ç­–ç•¥</h3>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œéœ€è¦æ ¹æ®ä¸šåŠ¡ç‰¹ç‚¹åˆç†é…ç½®è¿™äº›æ¦‚å¿µå‚æ•°ï¼š<strong>é«˜åååœºæ™¯</strong>å¯å¢åŠ åˆ†åŒºæ•°å¹¶ä½¿ç”¨è½®è¯¢ç­–ç•¥ï¼›<strong>ä¿åºè¦æ±‚é«˜</strong>çš„åœºæ™¯åº”é‡‡ç”¨Keyå“ˆå¸Œåˆ†åŒºï¼›<strong>å®¹é”™è¦æ±‚é«˜</strong>éœ€é…ç½®å¤šå‰¯æœ¬å’Œacks=allã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå…¸å‹ç”µå•†å¹³å°çš„Kafkaé…ç½®ç¤ºä¾‹ï¼š</p>
<pre><code class="language-yaml"># è®¢å•Topicé…ç½®
order.topic.partitions: 12        # åŒ¹é…æ¶ˆè´¹è€…æ•°é‡
order.topic.replication: 3        # é«˜å¯ç”¨é…ç½®
order.consumer.group: order-processors
order.consume.threads: 12         # ä¸åˆ†åŒºæ•°åŒ¹é…

# æ—¥å¿—Topicé…ç½®  
log.topic.partitions: 24          # é«˜ååéœ€æ±‚
log.topic.replication: 2           # å¯æ¥å—ä¸€å®šæ•°æ®ä¸¢å¤±
log.consumer.group: log-analyzers
</code></pre>
<h2 id="6-å®è·µä¸­çš„å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ">6 å®è·µä¸­çš„å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 id="61-æ•°æ®å€¾æ–œä¸çƒ­ç‚¹åˆ†åŒº">6.1 æ•°æ®å€¾æ–œä¸çƒ­ç‚¹åˆ†åŒº</h3>
<p><strong>æ•°æ®å€¾æ–œ</strong>æ˜¯å¸¸è§é—®é¢˜ï¼Œè¡¨ç°ä¸ºéƒ¨åˆ†åˆ†åŒºè´Ÿè½½è¿‡é«˜ã€‚è§£å†³æ–¹æ¡ˆåŒ…æ‹¬ï¼šä½¿ç”¨æ›´å‡åŒ€çš„Keyåˆ†å¸ƒã€é‡‡ç”¨è½®è¯¢ç­–ç•¥ã€å¢åŠ åˆ†åŒºæ•°æˆ–å®ç°è‡ªå®šä¹‰åˆ†åŒºç­–ç•¥ã€‚</p>
<h3 id="62-rebalanceé£æš´ä¸æ¶ˆè´¹è€…ç¨³å®šæ€§">6.2 Rebalanceé£æš´ä¸æ¶ˆè´¹è€…ç¨³å®šæ€§</h3>
<p><strong>é¢‘ç¹Rebalance</strong>ä¼šå¯¼è‡´æ¶ˆè´¹è€…é¢‘ç¹åœé¡¿ã€‚ä¼˜åŒ–æ–¹æ¡ˆåŒ…æ‹¬ï¼šè°ƒæ•´<code>session.timeout.ms</code>å’Œ<code>heartbeat.interval.ms</code>å‚æ•°ã€ä½¿ç”¨Stickyåˆ†é…ç­–ç•¥ã€é¿å…æ¶ˆè´¹è€…é¢‘ç¹å¯åœã€‚</p>
<h3 id="63-ä½ç§»ç®¡ç†çš„æœ€ä½³å®è·µ">6.3 ä½ç§»ç®¡ç†çš„æœ€ä½³å®è·µ</h3>
<p>ä½ç§»ç®¡ç†ä¸å½“å¯èƒ½å¯¼è‡´<strong>é‡å¤æ¶ˆè´¹æˆ–æ¶ˆæ¯ä¸¢å¤±</strong>ã€‚å»ºè®®é‡‡ç”¨æ‰‹åŠ¨æäº¤ä½ç§»ï¼Œåœ¨æ¶ˆæ¯å¤„ç†å®ŒæˆååŒæ­¥æäº¤ï¼Œå¹¶åœ¨æ¶ˆè´¹è€…é‡å¯æ—¶ä»æ­£ç¡®ä½ç½®å¼€å§‹æ¶ˆè´¹ã€‚</p>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>Kafkaçš„æ ¸å¿ƒæ¦‚å¿µä½“ç³»æ„æˆäº†ä¸€ä¸ªå®Œæ•´çš„é«˜æ€§èƒ½æ¶ˆæ¯å¤„ç†ç”Ÿæ€ç³»ç»Ÿã€‚Topicä¸åˆ†åŒºçš„åˆ†ç¦»å®ç°äº†é€»è¾‘ä¸ç‰©ç†çš„è§£è€¦ï¼Œæ¶ˆè´¹ç»„æœºåˆ¶æä¾›äº†çµæ´»çš„è´Ÿè½½å‡è¡¡æ–¹æ¡ˆï¼ŒOffsetç®¡ç†ç¡®ä¿äº†æ¶ˆæ¯å¤„ç†çš„å¯é æ€§ï¼Œå‰¯æœ¬æœºåˆ¶ä¿éšœäº†ç³»ç»Ÿçš„é«˜å¯ç”¨æ€§ã€‚</p>
<p>ç†è§£è¿™äº›æ¦‚å¿µä¸ä»…æœ‰åŠ©äºæ­£ç¡®ä½¿ç”¨Kafkaï¼Œæ›´èƒ½ä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡æä¾›é‡è¦å¯ç¤ºã€‚<strong>åˆ†å¸ƒå¼ç³»ç»Ÿçš„æœ¬è´¨æ˜¯é€šè¿‡åˆ†ç‰‡å®ç°æ‰©å±•ï¼Œé€šè¿‡å‰¯æœ¬å®ç°å®¹é”™ï¼Œé€šè¿‡åè°ƒæœºåˆ¶å®ç°ä¸€è‡´æ€§</strong>â€”â€”è¿™æ­£æ˜¯Kafkaæ¶æ„æ€æƒ³çš„ç²¾é«“ã€‚</p>
<p>éšç€ä¸šåŠ¡è§„æ¨¡çš„å¢é•¿ï¼Œå¯¹è¿™äº›æ ¸å¿ƒæ¦‚å¿µçš„æ·±å…¥ç†è§£å°†å¸®åŠ©å¼€å‘è€…åœ¨æ€§èƒ½ã€å¯é æ€§å’Œå¤æ‚åº¦ä¹‹é—´æ‰¾åˆ°æœ€ä½³å¹³è¡¡ç‚¹ï¼Œæ„å»ºçœŸæ­£ç¨³å®šé«˜æ•ˆçš„æ•°æ®å¤„ç†å¹³å°ã€‚</p>
<hr>
<p><strong>ğŸ“š ä¸‹ç¯‡é¢„å‘Š</strong><br>
ã€Šå¯é æ€§ä¸é¡ºåºæ€§ä¿éšœâ€”â€”å¹‚ç­‰ã€äº‹åŠ¡ä¸Exactly-onceè¯­ä¹‰çš„é€‚ç”¨è¾¹ç•Œã€‹â€”â€” æˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ï¼š</p>
<ul>
<li>ğŸ”„ <strong>å¹‚ç­‰ç”Ÿäº§åŸç†</strong>ï¼šPIDã€åºåˆ—å·ä¸Brokerå»é‡æœºåˆ¶çš„ååŒå·¥ä½œ</li>
<li>âš¡ <strong>äº‹åŠ¡æ¶ˆæ¯æœºåˆ¶</strong>ï¼šè·¨åˆ†åŒºåŸå­å†™å…¥ä¸æŒä¹…åŒ–ä¿è¯çš„å®ç°è·¯å¾„</li>
<li>ğŸ¯ <strong>Exactly-onceè¯­ä¹‰</strong>ï¼šæµå¤„ç†åœºæ™¯ä¸‹çš„ç²¾ç¡®ä¸€æ¬¡æ€§äº¤ä»˜ä¿éšœ</li>
<li>ğŸ“Š <strong>æ€§èƒ½ä¸å¯é æ€§æƒè¡¡</strong>ï¼šä¸åŒå¯é æ€§çº§åˆ«çš„ååé‡å½±å“é‡åŒ–åˆ†æ</li>
<li>ğŸ›¡ï¸ <strong>å®è·µé…ç½®æŒ‡å—</strong>ï¼šç”Ÿäº§è€…ACKã€ISRé…ç½®ä¸æ•…éšœæ¢å¤çš„æœ€ä½³å®è·µ</li>
</ul>
<p><strong>ç‚¹å‡»å…³æ³¨ï¼ŒæŒæ¡Kafkaæ•°æ®å¯é æ€§çš„æ ¸å¿ƒæŠ€æœ¯ï¼</strong></p>
<blockquote>
<p><strong>ä»Šæ—¥è¡ŒåŠ¨å»ºè®®</strong>ï¼š</p>
<ol>
<li>å®¡æŸ¥ç°æœ‰Kafka Topicçš„åˆ†åŒºé…ç½®ï¼Œç¡®ä¿ä¸æ¶ˆè´¹è€…æ•°é‡åŒ¹é…</li>
<li>è¯„ä¼°æ•°æ®åˆ†å¸ƒæƒ…å†µï¼Œè¯†åˆ«å¯èƒ½çš„çƒ­ç‚¹åˆ†åŒºé—®é¢˜</li>
<li>ä¼˜åŒ–æ¶ˆè´¹è€…ç»„é…ç½®ï¼Œå‡å°‘ä¸å¿…è¦çš„Rebalanceæ“ä½œ</li>
<li>å»ºç«‹ä½ç§»ç›‘æ§æœºåˆ¶ï¼Œç¡®ä¿æ¶ˆæ¯æ¶ˆè´¹è¿›åº¦å¯è§‚æµ‹</li>
</ol>
</blockquote>

</div>
<div id="MySignature" role="contentinfo">
    è¿›é˜¶ä¹‹è·¯ï¼Œç¥æŒ¡æ€ç¥ä½›æŒ¡æ€ä½›ï¼Œæ¬¢è¿å¤§å®¶ä¸€èµ·åŠ ï¼±ï¼±ç¾¤å…±åŒè®¨è®ºæˆé•¿ï¼Œç¾¤å·ï¼š<a href="https://jq.qq.com/?_wv=1027&amp;k=4AiobC0" target="view_window">620095084</a>
<br>
æ¬¢è¿æœç´¢å…³æ³¨å¾®ä¿¡å…¬ä¼—å· åŸºç¡€å…¨çŸ¥é“ ï¼šJavaBasis ï¼Œç¬¬ä¸€æ—¶é—´é˜…è¯»æœ€æ–°æ–‡ç« 
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-23 21:11">2025-12-23 21:10</span>&nbsp;
<a href="https://www.cnblogs.com/shiyuelp">åæœˆå—åŸ</a>&nbsp;
é˜…è¯»(<span id="post_view_count">14</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19389157);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19389157', targetLink: 'https://www.cnblogs.com/shiyuelp/p/19389157', title: 'Kafkaå…¥é—¨å¿…çŸ¥æ¦‚å¿µâ€”â€”Topicã€åˆ†åŒºã€Offsetã€æ¶ˆè´¹ç»„çš„åä½œæœºåˆ¶ä¸å½±å“' })">ä¸¾æŠ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹å››ï¼šè®¡ç®—æœºè§†è§‰  ç¬¬ä¸‰å‘¨ï¼šæ£€æµ‹ç®—æ³• ï¼ˆäºŒï¼‰ç›®æ ‡æ£€æµ‹ç®—æ³• ]]></title>
    <link>https://www.cnblogs.com/Goblinscholar/p/19389081</link>
    <guid>d861b65450e2a1bf99d423d32b8fb709</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Goblinscholar/p/19389081" title="å‘å¸ƒäº 2025-12-23 20:53">
    <span role="heading" aria-level="2">å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹å››ï¼šè®¡ç®—æœºè§†è§‰  ç¬¬ä¸‰å‘¨ï¼šæ£€æµ‹ç®—æ³• ï¼ˆäºŒï¼‰ç›®æ ‡æ£€æµ‹ç®—æ³•</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>æ­¤åˆ†ç±»ç”¨äºè®°å½•å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹çš„å­¦ä¹ ç¬”è®°ã€‚<br>
è¯¾ç¨‹ç›¸å…³ä¿¡æ¯é“¾æ¥å¦‚ä¸‹ï¼š</p>
<ol>
<li>åŸè¯¾ç¨‹è§†é¢‘é“¾æ¥ï¼š<a href="https://www.bilibili.com/video/BV1FT4y1E74V?buvid=XU762317353676D786954061C192FE625463B&amp;from_spmid=playlist.playlist-detail.0.0&amp;is_story_h5=false&amp;mid=zqernykrmpf7XfIorMR%2FnA%3D%3D&amp;plat_id=116&amp;share_from=ugc&amp;share_medium=android&amp;share_plat=android&amp;share_session_id=ce0bc526-db69-428a-962e-c65ed8c267bc&amp;share_source=COPY&amp;share_tag=s_i&amp;spmid=united.player-video-detail.0.0&amp;timestamp=1713085655&amp;unique_k=DfBgvFW&amp;up_id=8654113&amp;vd_source=e035e9878d32f414b4354b839a4c31a4" target="_blank" rel="noopener nofollow">[åŒè¯­å­—å¹•]å´æ©è¾¾æ·±åº¦å­¦ä¹ deeplearning.ai</a></li>
<li>githubè¯¾ç¨‹èµ„æ–™ï¼Œå«è¯¾ä»¶ä¸ç¬”è®°:<a href="https://github.com/robbertliu/deeplearning.ai-andrewNG" target="_blank" rel="noopener nofollow">å´æ©è¾¾æ·±åº¦å­¦ä¹ æ•™å­¦èµ„æ–™</a></li>
<li>è¯¾ç¨‹é…å¥—ç»ƒä¹ ï¼ˆä¸­è‹±ï¼‰ä¸ç­”æ¡ˆï¼š<a href="https://blog.csdn.net/u013733326/article/details/79827273" target="_blank" rel="noopener nofollow">å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾åä¹ é¢˜ä¸ç­”æ¡ˆ</a></li>
</ol>
<p>æœ¬ç¯‡ä¸ºç¬¬å››è¯¾çš„ç¬¬ä¸‰å‘¨å†…å®¹ï¼Œ<a href="https://www.bilibili.com/video/BV1FT4y1E74V?spm_id_from=333.788.videopod.episodes&amp;vd_source=e035e9878d32f414b4354b839a4c31a4&amp;p=132" target="_blank" rel="noopener nofollow">3.3</a>åˆ°<a href="https://www.bilibili.com/video/BV1FT4y1E74V?spm_id_from=333.788.videopod.episodes&amp;vd_source=e035e9878d32f414b4354b839a4c31a4&amp;p=134" target="_blank" rel="noopener nofollow">3.5</a>çš„å†…å®¹ã€‚</p>
<hr>
<p>æœ¬å‘¨ä¸ºç¬¬å››è¯¾çš„ç¬¬ä¸‰å‘¨å†…å®¹ï¼Œè¿™ä¸€è¯¾æ‰€æœ‰å†…å®¹çš„ä¸­å¿ƒåªæœ‰ä¸€ä¸ªï¼š<strong>è®¡ç®—æœºè§†è§‰</strong>ã€‚åº”ç”¨åœ¨æ·±åº¦å­¦ä¹ é‡Œï¼Œå°±æ˜¯ä¸“é—¨ç”¨æ¥è¿›è¡Œå›¾å­¦ä¹ çš„æ¨¡å‹å’ŒæŠ€æœ¯ï¼Œæ˜¯åœ¨ä¹‹å‰å…¨è¿æ¥åŸºç¡€ä¸Šçš„â€œç‰¹åŒ–â€ï¼Œä¹Ÿæ˜¯ç›¸å…³ä¸“ä¸šé‡Œçš„ä¸€ä¸ªé‡è¦ç ”ç©¶å¤§ç±»ã€‚<br>
<strong>è¿™ä¸€æ•´èŠ‚è¯¾éƒ½å­˜åœ¨å¤§é‡éœ€è¦åå¤ç†è§£çš„å†…å®¹å’Œæœºå™¨å­¦ä¹ ã€æ•°å­¦åŸºç¡€ã€‚</strong> å› æ­¤æˆ‘ä¼šå°½å¯èƒ½çš„è¡¥è¶³åŸºç¡€ï¼Œç”¨æ¯”å–»å’Œå®ä¾‹æ¥æ¼”ç¤ºæ¯ä¸ªéƒ¨åˆ†ï¼Œä»è€Œå¸®åŠ©ç†è§£ã€‚<br>
ç¬¬ä¸‰å‘¨çš„å†…å®¹å°†ä»<strong>å›¾åƒåˆ†ç±»</strong>è¿›ä¸€æ­¥æ‹“å±•åˆ°<strong>ç›®æ ‡æ£€æµ‹ï¼ˆObject Detectionï¼‰</strong> è¿™ä¸€æ›´å…·æŒ‘æˆ˜æ€§çš„è®¡ç®—æœºè§†è§‰ä»»åŠ¡ã€‚<br>
ä¸åˆ†ç±»ä»»åŠ¡åªéœ€å›ç­”â€œå›¾ä¸­æœ‰ä»€ä¹ˆâ€ä¸åŒï¼Œç›®æ ‡æ£€æµ‹éœ€è¦åŒæ—¶è§£å†³â€œ <strong>æœ‰ä»€ä¹ˆ</strong>â€ä»¥åŠâ€œ<strong>åœ¨ä»€ä¹ˆä½ç½®</strong>â€ä¸¤ä¸ªé—®é¢˜ï¼Œå› æ­¤åœ¨æ¨¡å‹ç»“æ„è®¾è®¡ã€è®­ç»ƒæ–¹å¼å’Œè¯„ä»·æ ‡å‡†ä¸Šéƒ½æ›´ä¸ºå¤æ‚ã€‚<br>
æœ¬ç¯‡çš„å†…å®¹å…³äºç›®æ ‡æ£€æµ‹ç®—æ³•ã€‚</p>
<h1 id="1-æ£€æµ‹ç®—æ³•10å¯¹çª—å£åˆ†ç±»">1. æ£€æµ‹ç®—æ³•1.0ï¼šå¯¹çª—å£åˆ†ç±»</h1>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œæƒ³è¦å®ç°ç›®æ ‡æ£€æµ‹ï¼Œé¦–å…ˆå°±è¦å®Œæˆ<strong>ç›®æ ‡è¯†åˆ«</strong>ã€‚<br>
åªæœ‰å½“æ¨¡å‹èƒ½å¤Ÿå›ç­”â€œ<strong>è¦æ‰¾ä»€ä¹ˆ</strong>â€åï¼Œæˆ‘ä»¬æ‰æœ‰å¯èƒ½è¿›ä¸€æ­¥è®©å®ƒå›ç­”â€œ<strong>å®ƒåœ¨å“ªé‡Œ</strong>â€ã€‚</p>
<p>åœ¨æ—©æœŸï¼Œäººä»¬å¹¶æ²¡æœ‰ä¸€å¥—ä¸“é—¨ä¸ºâ€œæ£€æµ‹â€è®¾è®¡çš„ç½‘ç»œç»“æ„ï¼Œäºæ˜¯æœ‰äººæå‡ºäº†è¿™æ ·ä¸€ç§æƒ³æ³•ï¼š<strong>æ—¢ç„¶åˆ†ç±»ç½‘ç»œå·²ç»å¾ˆæˆç†Ÿï¼Œé‚£èƒ½ä¸èƒ½æŠŠâ€œæ‰¾ä½ç½®â€è¿™ä¸ªé—®é¢˜ï¼Œè½¬åŒ–æˆä¸€å †â€œåˆ†ç±»é—®é¢˜â€ï¼Ÿ</strong></p>
<p>è€Œå®ç°è¿™ç§é€»è¾‘çš„å…·ä½“åšæ³•å°±æ˜¯<strong>æ»‘åŠ¨çª—å£ï¼ˆSliding Windowï¼‰</strong>ã€‚<br>
åœ¨è¿™ç§æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ª<strong>å›ºå®šå¤§å°çš„çª—å£</strong>åœ¨æ•´å¼ å›¾åƒä¸Šä»å·¦åˆ°å³ã€ä»ä¸Šåˆ°ä¸‹ä¸æ–­<strong>æ»‘åŠ¨</strong>ï¼ŒæŠŠå›¾åƒè£å‰ªæˆä¸€å—ä¸€å—çš„å°åŒºåŸŸã€‚<br>
ç„¶åï¼Œå°†æ¯ä¸€ä¸ªçª—å£éƒ½å•ç‹¬é€å…¥ä¸€ä¸ªå·²ç»è®­ç»ƒå¥½çš„<strong>å›¾åƒåˆ†ç±»ç½‘ç»œ</strong>ä¸­ï¼Œåˆ¤æ–­è¿™ä¸ªçª—å£é‡Œâ€œæœ‰æ²¡æœ‰ç›®æ ‡â€ã€‚<br>
å¦‚æœæŸä¸ªçª—å£è¢«åˆ†ç±»å™¨åˆ¤æ–­ä¸ºâ€œæ±½è½¦â€â€œè¡Œäººâ€ç­‰ç›®æ ‡ç±»åˆ«ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è®¤ä¸ºï¼š<strong>ç›®æ ‡å°±å‡ºç°åœ¨è¿™ä¸ªçª—å£æ‰€å¯¹åº”çš„ä½ç½®ä¸Šã€‚</strong><br>
å°±åƒè¿™æ ·ï¼š<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202512/3708248-20251223205038950-257158416.png" alt="image.png" loading="lazy"></p>
<p>ä»æ•´ä½“ä¸Šçœ‹ï¼Œè¿™ç§æ£€æµ‹æµç¨‹å¯ä»¥è¢«ç†è§£ä¸ºï¼š</p>
<ol>
<li>ç”¨æ»‘åŠ¨çª—å£ <strong>æšä¸¾å¯èƒ½çš„ä½ç½®</strong></li>
<li>ç”¨åˆ†ç±»ç½‘ç»œ <strong>åˆ¤æ–­æ¯ä¸ªä½ç½®æ˜¯ä»€ä¹ˆ</strong></li>
<li>å°†è¢«åˆ¤å®šä¸ºç›®æ ‡çš„çª—å£ä½ç½®ï¼Œä½œä¸ºæœ€ç»ˆçš„æ£€æµ‹ç»“æœ</li>
</ol>
<p>ä½†æ˜¾ç„¶ï¼Œå³ä½¿å‡è®¾åˆ†ç±»å™¨å®Œå…¨å‡†ç¡®ï¼Œè¿™ç§ç®—æ³•ä»æœ‰å®ƒçš„ä¸è¶³ä¹‹å¤„ã€‚<br>
å¯¹äºæ»‘åŠ¨çª—å£ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®å®ƒçš„<strong>å°ºå¯¸å’Œæ­¥é•¿</strong>æ¥è°ƒæ•´å®ƒåœ¨å›¾åƒä¸­çš„è¿åŠ¨è½¨è¿¹ï¼Œè¿™ç§å›ºå®šçš„è®¾ç½®éƒ½ååˆ†æ­»æ¿ï¼Œä¸”åŒæ—¶å¾ˆéš¾å…¼é¡¾<strong>ä¸åŒå¤§å°ç›®æ ‡çš„å®Œæ•´è¦†ç›–</strong>ã€‚<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202512/3708248-20251223205039012-1879118197.png" alt="image.png" loading="lazy"></p>
<p>å› æ­¤ï¼Œä½ ä¼šå‘ç°è¿™ç§æ£€æµ‹æ–¹æ³•å…¶å®æ˜¯ä¸€ç§â€œå–å·§â€ï¼Œå®ƒæœ¬è´¨ä¸Šå¹¶æ²¡æœ‰â€œç›´æ¥å­¦ä½ç½®â€ï¼Œè€Œæ˜¯é€šè¿‡<strong>å¤§é‡çš„å±€éƒ¨åˆ†ç±»ç»“æœ</strong>ï¼Œé—´æ¥æ‹¼å‡‘å‡ºç›®æ ‡çš„ä½ç½®ï¼Œåœ¨ä¾èµ–å•ç‹¬è®­ç»ƒçš„åˆ†ç±»å™¨å‡†ç¡®ç‡çš„å‰æä¸‹è¿˜éœ€è¦æå¤§çš„è®¡ç®—é‡ã€‚<br>
äºæ˜¯ä¸‹ä¸€æ­¥æ”¹è¿›å‡ºç°äº†ã€‚</p>
<h1 id="2-æ£€æµ‹ç®—æ³•20å¯¹æ•´å¹…å›¾åƒåº”ç”¨å·ç§¯">2. æ£€æµ‹ç®—æ³•2.0ï¼šå¯¹æ•´å¹…å›¾åƒåº”ç”¨å·ç§¯</h1>
<p>ä¸ºäº†æ›´å¥½åœ°è¿›è¡Œç›®æ ‡æ£€æµ‹ï¼Œé¢å¯¹ 1.0 ä¸­å‡ºç°çš„æå¤§è®¡ç®—é‡é—®é¢˜ï¼Œäººä»¬è¿ç”¨æ•°å­¦é€»è¾‘ï¼Œå‘ç°äº†è¿™æ ·ä¸€ç§æƒ…å†µï¼š<strong>å½“ä¸ºäº†æ›´ç²¾å‡†çš„æ£€æµ‹è€Œåº”ç”¨æ›´å°æ­¥é•¿çš„çª—å£æ—¶ï¼Œç›¸é‚»çš„çª—å£å­˜åœ¨å…¬å…±åŒºåŸŸï¼Œè®©éƒ¨åˆ†è®¡ç®—é‡å¤è¿›è¡Œã€‚</strong><br>
<img src="https://img2024.cnblogs.com/blog/3708248/202512/3708248-20251223205041096-1719506100.png" alt="image.png" loading="lazy"><br>
è€Œå¦‚æœä¸å¸Œæœ›å‡ºç°å…¬å…±åŒºåŸŸï¼Œé‚£å°±åˆè¦å¢å¤§æ­¥é•¿è‡³å’Œå°ºå¯¸åŒå¤§å°ï¼Œå°±åˆå›åˆ°äº†æ¼æ£€å°ç›®æ ‡ã€å®šä½ä¸ç²¾ç¡®çš„é—®é¢˜ã€‚<br>
æœ‰æ²¡æœ‰ä¸€ç§åŠæ³•ï¼Œ<strong>æ—¢èƒ½äº«æœ‰å°æ­¥é•¿å¸¦æ¥çš„ç²¾ç¡®åº¦ï¼Œåˆèƒ½è®©é‡å¤è®¡ç®—çš„ç»“æœå¤ç”¨ä»è€ŒåŠå‡å°è®¡ç®—é‡å‘¢ï¼Ÿ</strong><br>
æœ‰çš„å…„å¼Ÿï¼Œæœ‰çš„ã€‚</p>
<p>åœ¨ 2014 å¹´ï¼Œä¸€ç¯‡åä¸º <a href="https://arxiv.org/pdf/1312.6229" target="_blank" rel="noopener nofollow">OverFeat: Integrated Recognition, Localization and Detection using Convolutional Networks</a> çš„è®ºæ–‡å‘è¡¨ï¼Œæå‡ºäº†ä¸€ä¸ªåˆ©ç”¨å·ç§¯ç¥ç»ç½‘ç»œåŒæ—¶å®ç°<strong>åˆ†ç±»ã€å®šä½å’Œæ£€æµ‹</strong>çš„ç»Ÿä¸€æ¡†æ¶ã€‚<br>
è€Œç›¸æ¯” 1.0 ç®—æ³•ï¼Œ2.0 æœ€å¤§çš„æ”¹å˜å°±æ˜¯<strong>ä¸å†æŠŠæ¯ä¸ªçª—å£è£å‡ºæ¥é€è¿›ç½‘ç»œï¼Œè€Œæ˜¯ç›´æ¥æŠŠæ•´å¼ å›¾åƒé€è¿›ç½‘ç»œï¼Œè®©å·ç§¯å±‚è‡ªåŠ¨å®Œæˆâ€œæ»‘åŠ¨ + ç‰¹å¾æå–â€çš„è¿‡ç¨‹ï¼Œç›´æ¥è¾“å‡ºå›¾åƒå„éƒ¨åˆ†çš„åˆ†ç±»ç»“æœã€‚</strong></p>
<p>æˆ‘ä»¬æ¥è¯¦ç»†å±•å¼€è¿™ä¸€éƒ¨åˆ†ï¼š</p>
<h2 id="21-ä¿®æ”¹ç½‘ç»œç»“æ„é€‚åº”è¾“å‡ºè¦æ±‚">2.1 ä¿®æ”¹ç½‘ç»œç»“æ„é€‚åº”è¾“å‡ºè¦æ±‚</h2>
<p>æ˜ç¡®äº†ç›®æ ‡ä¹‹åï¼Œä½ ä¼šå‘ç°ï¼Œä¸åŒäºåŸæœ¬ä½¿ç”¨å…¨è¿æ¥å±‚è¾“å‡ºä¸€ç»´åˆ†ç±»ç»“æœï¼Œç°åœ¨æˆ‘ä»¬å¸Œæœ›<strong>è®©è¾“å‡ºä¸ºä¸€ä¸ªäºŒç»´ç‰¹å¾å›¾ï¼Œå›¾ä¸­æ¯ä¸€ä¸ªå…ƒç´ å°±ä»£è¡¨ä¸€ä¸ªçª—å£çš„åˆ†ç±»ç»“æœ</strong>ã€‚<br>
å°±åƒè¿™æ ·ï¼š<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202512/3708248-20251223205039801-1655184845.png" alt="image.png" loading="lazy"></p>
<p>å› æ­¤ï¼Œç°åœ¨æˆ‘ä»¬éœ€è¦ä¿®æ”¹ç½‘ç»œç»“æ„ï¼Œ<strong>ä½¿ç”¨å·ç§¯å±‚å–ä»£åŸæœ¬çš„å…¨è¿æ¥å±‚ï¼Œä¿è¯è¾“å‡ºåŒæ ·ä¸ºç‰¹å¾å›¾</strong>ã€‚<br>
è€Œè¦åˆç†åœ°å®ç°è¿™ä¸€éƒ¨åˆ†ï¼Œé¦–å…ˆï¼Œå°±è¦äº†è§£<strong>å¦‚ä½•ç”¨å·ç§¯å±‚ç­‰æ•ˆä»£æ›¿å…¨è¿æ¥å±‚</strong>ã€‚</p>
<p>å…ˆè¯´ç»“è®ºï¼š<strong>ä½¿ç”¨å’Œè¾“å…¥ç‰¹å¾å›¾å°ºå¯¸ç­‰å¤§å°çš„å·ç§¯æ ¸</strong>ã€‚<br>
å°±åƒè¿™æ ·ï¼š<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202512/3708248-20251223205039223-13958052.png" alt="image.png" loading="lazy"></p>
<p>å†å±•å¼€è¯´è¯´åŸç†ï¼š<br>
åœ¨åˆ†ç±»ç½‘ç»œä¸­ï¼Œå½“ç‰¹å¾æå–éƒ¨åˆ†ç»“æŸåï¼Œè¾“å…¥å…¨è¿æ¥å±‚çš„ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªå½¢çŠ¶ä¸º  <span class="math inline">\(H \times W \times C\)</span>  çš„ç‰¹å¾å›¾ã€‚<br>
å…¨è¿æ¥å±‚åšçš„äº‹æƒ…ï¼Œæœ¬è´¨ä¸Šæ˜¯ï¼š  <strong>æŠŠè¿™æ•´ä¸ªç‰¹å¾å›¾â€œæ‘Šå¹³â€ï¼Œç„¶åä¸ä¸€ç»„æƒé‡åšä¸€æ¬¡çº¿æ€§ç»„åˆï¼Œè¾“å‡ºä¸€ä¸ªç»“æœã€‚</strong><br>
å¦‚æœç”¨å…¬å¼è¡¨ç¤ºï¼Œå°±æ˜¯ï¼š</p>
<p></p><div class="math display">\[y = \sum_{i,j,k} w_{i,j,k} \cdot x_{i,j,k} + b
\]</div><p></p><p>æ¢ä¸€ä¸ªè§’åº¦çœ‹ï¼Œè¿™ä¸ªè¿‡ç¨‹å…¶å®éå¸¸åƒä»€ä¹ˆï¼Ÿ  â€”â€”<strong>ç”¨ä¸€ä¸ªå’Œè¾“å…¥ç‰¹å¾å›¾å°ºå¯¸å®Œå…¨ä¸€è‡´çš„å·ç§¯æ ¸ï¼Œåœ¨ç‰¹å¾å›¾ä¸Šåšä¸€æ¬¡å·ç§¯ã€‚</strong><br>
å› æ­¤ï¼Œå½“å·ç§¯æ ¸çš„å°ºå¯¸ç­‰äºè¾“å…¥ç‰¹å¾å›¾çš„ç©ºé—´å°ºå¯¸æ—¶ï¼š</p>
<ul>
<li>å·ç§¯æ ¸åªä¼šåœ¨è¾“å…¥ä¸Šâ€œæ»‘åŠ¨â€ä¸€æ¬¡ã€‚</li>
<li>å·ç§¯è¾“å‡ºè‡ªç„¶å°±æ˜¯ä¸€ä¸ª <span class="math inline">\(1 \times 1\)</span> çš„ç»“æœã€‚</li>
<li>è¿™ä¸ªç»“æœä¸å…¨è¿æ¥å±‚çš„è¾“å‡ºåœ¨æ•°å­¦å½¢å¼ä¸Šæ˜¯<strong>å®Œå…¨ç­‰ä»·çš„</strong>ã€‚</li>
</ul>
<p>å› æ­¤å¯ä»¥å¾—åˆ°ä¸€ä¸ªç›´è§‚çš„ç»“è®ºï¼š<strong>å…¨è¿æ¥å±‚å¯ä»¥è¢«çœ‹ä½œä¸€ç§ç‰¹æ®Šå½¢å¼çš„å·ç§¯å±‚ã€‚</strong><br>
ç°åœ¨ï¼Œæˆ‘ä»¬å°±äº†è§£äº†å¦‚ä½•ä¿®æ”¹æˆ‘ä»¬åŸæœ¬ä¸€ç›´ä½¿ç”¨çš„å…¨è¿æ¥å±‚ä½œä¸ºè¾“å‡ºå±‚çš„ç½‘ç»œç»“æ„ï¼Œä»è€Œé€‚åº”è¾“å‡ºä¸ºå¸¦æœ‰ç©ºé—´ç»“æ„çš„ç‰¹å¾å›¾çš„è¦æ±‚ã€‚<br>
ç°åœ¨ï¼Œå°±æ¥çœ‹çœ‹ï¼Œè¾“å…¥æ•´å¹…å›¾åƒè¿›å…¥å®Œå–„åçš„ç½‘ç»œå¾—åˆ°åˆ†ç±»è¾“å‡ºçš„å…·ä½“è¿‡ç¨‹ã€‚</p>
<h2 id="22-çª—å£åœ¨ç½‘ç»œä¸­çš„ä¼ æ’­">2.2 çª—å£åœ¨ç½‘ç»œä¸­çš„ä¼ æ’­</h2>
<p>æˆ‘ä»¬å°±ç”¨è¯¾ç¨‹é‡Œçš„ä¾‹å­æ¥æ¼”ç¤ºä¸€ä¸‹ç½‘ç»œå¦‚ä½•ä¸€æ¬¡è¾“å‡ºæ•´å¹…å›¾åƒå„ä¸ªçª—å£çš„åˆ†ç±»ç»“æœï¼š<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202512/3708248-20251223205055320-655995691.png" alt="image.png" loading="lazy"></p>
<p>ä½ ä¼šå‘ç°ï¼Œå¾—ç›Šäºå·ç§¯æ“ä½œçš„ç‰¹æ€§ï¼Œè¾“å…¥å›¾åƒçš„å±€éƒ¨ç‰¹å¾æœ¬èº«å°±åœ¨ä¼ æ’­ä¸­è¢«ä¸€æ­¥æ­¥é›†ä¸­ï¼Œ<strong>ç¬¬ä¸€å±‚ç‰¹å¾å›¾ä¸­çš„æ¯ä¸€ä¸ªåƒç´ ï¼Œæœ¬èº«å°±å¯¹åº”ç€è¾“å…¥å›¾åƒä¸­çš„ä¸€ä¸ªå°çª—å£</strong>ã€‚<br>
è€Œéšç€ç½‘ç»œä¸æ–­åŠ æ·±ï¼Œå·ç§¯å±‚ä¸æ–­å †å ï¼Œæ¯ä¸€ä¸ªç‰¹å¾ç‚¹æ‰€å¯¹åº”çš„è¾“å…¥åŒºåŸŸä¸æ–­å˜å¤§ã€‚<br>
æœ€ç»ˆï¼Œåœ¨é è¿‘è¾“å‡ºå±‚çš„ä½ç½®ï¼Œç‰¹å¾å›¾ä¸­çš„<strong>ä¸€ä¸ªä½ç½®</strong>å®é™…ä¸Šå·²ç»â€œè¦†ç›–â€äº†è¾“å…¥å›¾åƒä¸­çš„ä¸€ä¸ª<strong>è¾ƒå¤§çª—å£åŒºåŸŸ</strong>ã€‚<br>
åªä¸è¿‡ç°åœ¨çª—å£ä¸å†ç”±æˆ‘ä»¬æ‰‹åŠ¨è£å‰ªï¼Œè€Œæ˜¯ç”±ç½‘ç»œç»“æ„<strong>å†³å®š</strong>ã€‚</p>
<h2 id="23-æ‹“å±•ç‰¹å¾å›¾è¾“å‡ºçš„æ ‡ç­¾é—®é¢˜">2.3 æ‹“å±•ï¼šç‰¹å¾å›¾è¾“å‡ºçš„æ ‡ç­¾é—®é¢˜</h2>
<p>åˆ°è¿™é‡Œï¼Œæˆ‘æƒ³ä½ å¯èƒ½ä¼šæœ‰è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼š<strong>æˆ‘ä»¬è™½ç„¶æ”¹å˜äº†ç½‘ç»œç»“æ„ï¼Œä½†æ˜¯æˆ‘ä»¬è¿™æ—¶ä½¿ç”¨çš„è¿˜æ˜¯åŸæœ¬åˆ†ç±»å™¨çš„æ•°æ®ï¼Œå³å¯¹ä¸€å¹…å›¾åƒçš„æ ‡ç­¾åªæœ‰ä¸€ä¸ª0æˆ–1æ¥è¡¨ç¤ºå›¾åƒé‡Œæ˜¯å¦å­˜åœ¨ç›®æ ‡ã€‚ç°åœ¨æˆ‘ä»¬ä¿®æ”¹äº†è¾“å‡ºæ ¼å¼ï¼Œæ˜¯å¦éœ€è¦ä¹Ÿä¿®æ”¹æ ‡ç­¾ï¼Œæ”¹ä¸ºç»™æ¯ä¸ªçª—å£æ‰“æ ‡ç­¾ï¼Ÿ</strong><br>
<strong>ç­”æ¡ˆæ˜¯ä¸ç”¨ã€‚</strong><br>
ä¸ºä»€ä¹ˆï¼Ÿ<br>
è™½ç„¶åœ¨è®­ç»ƒé˜¶æ®µï¼Œç½‘ç»œæ¥æ”¶åˆ°çš„ä»ç„¶åªæ˜¯<strong>å›¾åƒçº§åˆ«çš„åˆ†ç±»æ ‡ç­¾</strong>ï¼Œä½†ç”±äºè¾“å‡ºå·²ç»è¢«å±•å¼€ä¸ºä¸€ä¸ªå¸¦ç©ºé—´ç»“æ„çš„ç‰¹å¾å›¾ï¼Œè¿™ä¸ªæ ‡ç­¾ä¼šè¢«<strong>éšå¼åœ°çº¦æŸåˆ°æ•´å¼ ç‰¹å¾å›¾ä¸Š</strong>ï¼šåªè¦æŸä¸€ä¸ªä½ç½®å¯¹åº”çš„çª—å£èƒ½å¤Ÿæ­£ç¡®å“åº”ç›®æ ‡ç±»åˆ«ï¼Œè¿™ä¸€æ¬¡é¢„æµ‹å°±è¢«è®¤ä¸ºæ˜¯â€œæˆåŠŸçš„â€ã€‚</p>
<p>æ¢å¥è¯è¯´ï¼Œå·ç§¯åŒ–ä¹‹åçš„åˆ†ç±»ç½‘ç»œï¼Œå¹¶ä¸æ˜¯åœ¨å­¦ä¹ â€œè¿™æ•´å¼ å›¾åƒæ˜¯ä¸æ˜¯ç›®æ ‡â€ï¼Œè€Œæ˜¯åœ¨å­¦ä¹ ï¼š<strong>â€œåœ¨è¿™å¼ å›¾åƒçš„å“ªäº›ä½ç½®ï¼Œå­˜åœ¨ä¸€ä¸ªå¯ä»¥è¢«è¯†åˆ«ä¸ºç›®æ ‡çš„çª—å£â€ã€‚</strong></p>
<p>æœ‰äº›æŠ½è±¡ï¼Œæˆ‘ä»¬å¯ä»¥æ¥çœ‹ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼š<br>
å‡è®¾è®­ç»ƒé›†ä¸­æœ‰ä¸€å¼ å›¾ç‰‡ï¼Œå†…å®¹æ˜¯ä¸€è¾†æ±½è½¦ï¼Œæ•´å¼ å›¾åƒçš„<strong>å”¯ä¸€æ ‡ç­¾</strong>å°±æ˜¯ã€Œcarã€ã€‚<br>
å½“è¿™å¼ å›¾åƒè¢«é€å…¥å·ç§¯åŒ–åçš„ç½‘ç»œæ—¶ï¼Œè¾“å‡ºçš„ä¸å†æ˜¯ä¸€ä¸ªæ ‡é‡ï¼Œè€Œæ˜¯ä¸€ä¸ª <span class="math inline">\(H' \times W'\)</span> çš„åˆ†ç±»ç‰¹å¾å›¾ï¼Œå…¶ä¸­<strong>æ¯ä¸€ä¸ªä½ç½®</strong>éƒ½å¯¹åº”è¾“å…¥å›¾åƒä¸­çš„ä¸€ä¸ªçª—å£ã€‚<br>
åœ¨åˆå§‹è®­ç»ƒé˜¶æ®µï¼Œè¿™å¼ ç‰¹å¾å›¾ä¸Šçš„ç»å¤§å¤šæ•°ä½ç½®ï¼Œè¾“å‡ºçš„åˆ†ç±»ç»“æœå…¶å®éƒ½æ˜¯é”™è¯¯çš„ï¼š</p>
<ul>
<li>æœ‰çš„ä½ç½®è¦†ç›–çš„æ˜¯èƒŒæ™¯</li>
<li>æœ‰çš„ä½ç½®åªè¦†ç›–äº†æ±½è½¦çš„ä¸€éƒ¨åˆ†</li>
<li>è¿˜æœ‰çš„ä½ç½®ç”šè‡³åªåŒ…å«å¤©ç©ºæˆ–é“è·¯</li>
</ul>
<p>ä½†è¿™å¹¶ä¸ä¼šç ´åè®­ç»ƒè¿‡ç¨‹ã€‚<br>
å› ä¸ºæ­¤æ—¶ç½‘ç»œçš„ç›®æ ‡å¹¶ä¸æ˜¯è¦æ±‚æ¯ä¸€ä¸ªä½ç½®éƒ½é¢„æµ‹ä¸º carï¼Œ<strong>è€Œæ˜¯è‡³å°‘å­˜åœ¨æŸä¸€ä¸ªä½ç½®ï¼Œå…¶å¯¹åº”çš„çª—å£èƒ½å¤Ÿå¯¹ car ç±»åˆ«äº§ç”Ÿè¶³å¤Ÿå¼ºçš„å“åº”ã€‚</strong></p>
<p><strong>æ›´å‡†ç¡®åœ°è¯´ï¼Œåœ¨è®­ç»ƒé˜¶æ®µï¼Œå¹¶ä¸æ˜¯ç›´æ¥å°†æ•´ä¸ª <span class="math inline">\(H' \times W'\)</span> çš„è¾“å‡ºç‰¹å¾å›¾ä¸å›¾åƒçº§æ ‡ç­¾é€ä½ç½®å¯¹é½è®¡ç®—æŸå¤±ã€‚</strong><br>
ç½‘ç»œé€šå¸¸ä¼šå…ˆåœ¨ç©ºé—´ç»´åº¦ä¸Šè¿›è¡Œä¸€æ¬¡èšåˆæ“ä½œï¼ˆæœ€å¸¸è§çš„æ˜¯å–æœ€å¤§å“åº”ï¼‰ï¼Œå°†æ•´å¼ ç‰¹å¾å›¾å‹ç¼©ä¸ºä¸€ä¸ªæ ‡é‡é¢„æµ‹ï¼Œå†ä¸å›¾åƒçº§æ ‡ç­¾è®¡ç®—åˆ†ç±»æŸå¤±ã€‚<br>
è¿™ç§è®­ç»ƒæ–¹å¼å¯ä»¥è¢«ç†è§£ä¸ºä¸€ç§<strong>å¼±ç›‘ç£å­¦ä¹ </strong>ï¼š<br>
<strong>åªè¦è¾“å‡ºç‰¹å¾å›¾ä¸­å­˜åœ¨æŸä¸€ä¸ªç©ºé—´ä½ç½®ï¼Œå¯¹ç›®æ ‡ç±»åˆ«äº§ç”Ÿäº†è¶³å¤Ÿå¼ºçš„å“åº”ï¼Œè¿™å¼ å›¾åƒå°±è¢«è®¤ä¸ºé¢„æµ‹æ­£ç¡®ã€‚</strong><br>
<img src="https://img2024.cnblogs.com/blog/3708248/202512/3708248-20251223205038766-641170151.png" alt="image.png" loading="lazy"></p>
<p>åœ¨åå‘ä¼ æ’­è¿‡ç¨‹ä¸­ï¼Œæ¢¯åº¦ä¸»è¦ä¼šé€šè¿‡è¿™äº›é«˜å“åº”ä½ç½®å›ä¼ ï¼Œä»è€Œæ¨åŠ¨ç½‘ç»œé€æ¸å¼ºåŒ–é‚£äº›<strong>ç¡®å®è¦†ç›–äº†å®Œæ•´ç›®æ ‡æˆ–å…³é”®åˆ¤åˆ«åŒºåŸŸçš„ç©ºé—´ä½ç½®</strong>ï¼Œè€Œå¯¹èƒŒæ™¯åŒºåŸŸçš„å“åº”è‡ªç„¶è¢«å‹ä½ã€‚</p>
<p>æœ€ç»ˆï¼Œåœ¨è¾“å‡ºç‰¹å¾å›¾ä¸Šï¼Œä½ ä¼šçœ‹åˆ°ï¼šåªæœ‰å°‘æ•°å‡ ä¸ªä½ç½®å¯¹ car ç±»åˆ«äº§ç”Ÿæ˜æ˜¾é«˜å“åº”ï¼Œè€Œè¿™äº›ä½ç½®æ°å¥½è½åœ¨æ±½è½¦æ‰€åœ¨çš„åŒºåŸŸé™„è¿‘ã€‚<br>
æ­¤æ—¶ï¼Œè™½ç„¶è®­ç»ƒæ ‡ç­¾å§‹ç»ˆåªæ˜¯ä¸€ä¸ªâ€œå›¾åƒçº§æ ‡ç­¾â€ï¼Œä½†ç½‘ç»œå·²ç»<strong>è‡ªåŠ¨å­¦ä¼šäº†åœ¨ç©ºé—´ç»´åº¦ä¸ŠåŒºåˆ†â€œå“ªé‡Œå€¼å¾—å“åº”â€</strong>ã€‚</p>
<p>äºæ˜¯æˆ‘ä»¬å°±è§£å†³äº† 1.0 ç®—æ³•å¯¼è‡´çš„æå¤§è®¡ç®—é‡é—®é¢˜ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œå°±æ˜¯å›ºå®šå°ºå¯¸çš„çª—å£ä»æ— æ³•å®ç°å¯¹ç›®æ ‡çš„è¾ƒç²¾å‡†å®šä½ã€‚<br>
æ€ä¹ˆè§£å†³ï¼Ÿæ¥çœ‹çœ‹ 3.0 ç®—æ³•ã€‚</p>
<h1 id="3-æ£€æµ‹ç®—æ³•30yolo-ç®—æ³•">3. æ£€æµ‹ç®—æ³•3.0ï¼šYOLO ç®—æ³•</h1>
<p><strong>YOLO ç®—æ³•æ˜¯ç›®å‰çœŸæ­£ä¸»æµçš„ç®—æ³•ä¹‹ä¸€</strong>ï¼Œä½ å¯ä»¥åœ¨ç›®å‰å‡ ä¹ç›®æ ‡æ£€æµ‹çš„æ‰€æœ‰é¢†åŸŸçœ‹åˆ°å®ƒçš„èº«å½±ï¼Œæ—¶è‡³ä»Šæ—¥ï¼Œå®ƒä»åœ¨ä¸æ–­åœ°æ›´æ–°ã€‚</p>
<p>è™½ç„¶åœ¨ 2.0 ä¸­ï¼Œçª—å£å·²ç»ä¸å†ç”±äººæ‰‹å·¥æ»‘åŠ¨ï¼Œè€Œæ˜¯ç”±ç½‘ç»œç»“æ„éšå¼å†³å®šï¼Œä½†æœ¬è´¨å¹¶æ²¡æœ‰å˜ï¼š<br>
ç½‘ç»œè¾“å‡ºçš„æ˜¯ï¼š <strong>â€œè¿™ä¸ªçª—å£é‡Œæœ‰æ²¡æœ‰ç›®æ ‡â€</strong>ï¼Œè€Œä¸æ˜¯ï¼š<strong>â€œç›®æ ‡åœ¨å“ªé‡Œã€æ˜¯ä»€ä¹ˆã€è¾¹ç•Œåœ¨å“ªã€‚â€</strong></p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ2.0 çš„ç½‘ç»œä¼šå‘Šè¯‰ä½ ï¼š â€œè¿™é‡Œå¤§æ¦‚æœ‰ä¸ª carâ€ï¼Œä½†ä¸ä¼šç›´æ¥å‘Šè¯‰ä½ ï¼šâ€œcar çš„ä¸­å¿ƒåœ¨è¿™ï¼Œå®½é«˜æ˜¯å¤šå°‘ã€‚â€<br>
å®ƒçš„å®šä½å‡†ç¡®åº¦é—®é¢˜ä»ç„¶å­˜åœ¨ä¸”ä¸å¯å¿½è§†ã€‚<br>
äºæ˜¯ï¼Œåœ¨ 2015 å¹´ï¼Œä¸€ç¯‡åä¸º<a href="https://homes.cs.washington.edu/~ali/papers/YOLO.pdf" target="_blank" rel="noopener nofollow">You Only Look Once</a>çš„è®ºæ–‡è¢«å‘è¡¨ï¼Œå®ƒçš„æ ¸å¿ƒè§‚ç‚¹å°±æ˜¯ï¼š<strong>èƒ½ä¸èƒ½è®©ç½‘ç»œåˆ«å†çº ç»“â€œçª—å£â€ï¼Œè€Œæ˜¯ç›´æ¥é¢„æµ‹ç›®æ ‡æœ¬èº«ï¼Ÿ</strong></p>
<p>è®ºæ–‡æœ¬èº«è¾ƒä¸ºå¤æ‚ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ YOLO ç›¸å¯¹ 1.0ã€2.0 æœ€å…³é”®çš„æ”¹å˜:<strong>è§„èŒƒç›®æ ‡æ£€æµ‹ä»»åŠ¡çš„æ ‡ç­¾</strong>ã€‚</p>
<p>YOLO ç®—æ³•æœ¬èº«ä¸ºç›®æ ‡æ£€æµ‹ä»»åŠ¡æå‡ºäº†ä¸“ç”¨çš„æ ‡ç­¾ï¼Œæ­£æ˜¯æˆ‘ä»¬åœ¨<a href="https://www.cnblogs.com/Goblinscholar/p/19384242" target="_blank">ä¸Šä¸€ç¯‡ä¸­</a>ä»‹ç»çš„â€œ<strong>ä½ç½®ä¿¡æ¯</strong>â€ã€‚<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202512/3708248-20251223205057400-299808113.png" alt="image.png" loading="lazy"></p>
<ol>
<li><span class="math inline">\(p_c\)</span>ï¼šè¡¨ç¤º<strong>å½“å‰å›¾åƒä¸­æ˜¯å¦å­˜åœ¨éœ€è¦æ£€æµ‹çš„ç›®æ ‡</strong>ï¼Œè¿™æ˜¯ä¸€ä¸ªäºŒå€¼å˜é‡ï¼Œé€šå¸¸å–å€¼ä¸º <span class="math inline">\(0\)</span> æˆ– <span class="math inline">\(1\)</span>ã€‚<br>
å½“ <span class="math inline">\(p_c = 1\)</span> æ—¶ï¼Œè¡¨ç¤ºå›¾åƒä¸­ç¡®å®å­˜åœ¨ç›®æ ‡ï¼Œæ­¤æ—¶åç»­çš„ä½ç½®ä¿¡æ¯å’Œç±»åˆ«ä¿¡æ¯æ‰æ˜¯â€œæœ‰æ•ˆâ€çš„ï¼›<br>
å½“ <span class="math inline">\(p_c = 0\)</span> æ—¶ï¼Œè¡¨ç¤ºå›¾åƒä¸­ä¸å­˜åœ¨ç›®æ ‡ï¼Œ<strong>å…¶ä½™å‚æ•°é€šå¸¸è¢«å¿½ç•¥æˆ–ç½®ä¸º 0ã€‚</strong></li>
<li><span class="math inline">\(b_x,b_y,b_h,b_w\)</span> :è¡¨ç¤ºæ£€æµ‹ç›®æ ‡çš„<strong>ä½ç½®ä¿¡æ¯</strong>ã€‚</li>
<li><span class="math inline">\(c_n\)</span>ï¼šè¡¨ç¤ºç›®æ ‡æ‰€å±çš„<strong>ç±»åˆ«ä¿¡æ¯</strong>ã€‚<br>
åœ¨äºŒåˆ†ç±»é—®é¢˜ä¸­ï¼Œå®ƒå¯ä»¥æ˜¯ä¸€ä¸ªæ ‡é‡ï¼›<br>
åœ¨å¤šåˆ†ç±»é—®é¢˜ä¸­ï¼Œé€šå¸¸é‡‡ç”¨ <strong>ç‹¬çƒ­ç¼–ç </strong> çš„å½¢å¼ï¼Œç”¨ä¸€ä¸ªå‘é‡æ¥è¡¨ç¤ºç›®æ ‡å±äºå“ªä¸€ç±»ã€‚</li>
</ol>
<p>è§„èŒƒå¥½æ ‡ç­¾æœ¬èº«åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ç®—æ³•å¦‚ä½•ä½¿ç”¨æ ‡ç­¾ï¼š<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202512/3708248-20251223205038504-641386161.png" alt="image.png" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/3708248/202512/3708248-20251223205147720-180508610.png" alt="image.png" loading="lazy"><br>
å› æ­¤ï¼Œä¸€ä¸ªæ ·æœ¬åœ¨ <span class="math inline">\(S \times S\)</span> ç½‘æ ¼åˆ’åˆ†ä¸‹ï¼Œå…¶æ ‡ç­¾å¼ é‡ç»´åº¦ä¸ºï¼š</p>
<p></p><div class="math display">\[S \times S \times (5 + c_n) 
\]</div><p></p><p>çœ‹åˆ°è¿™é‡Œï¼Œä½ å¯èƒ½ä¼šç–‘æƒ‘ï¼Œ<strong>åˆ’åˆ†ç½‘æ ¼çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ä»¬æœ€å¼€å§‹è¯´ YOLO é¿å¼€äº†çª—å£åˆæ˜¯æŒ‡ä»€ä¹ˆï¼Ÿ</strong><br>
åˆ«æ€¥ï¼Œå…³é”®ç‚¹å°±åœ¨äºæˆ‘ä»¬åˆšåˆšè§„èŒƒçš„æ–°æ ‡ç­¾ï¼š<span class="math inline">\(b_x,b_y,b_h,b_w\)</span> ã€‚<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202512/3708248-20251223205053651-1469789459.png" alt="image.png" loading="lazy"><br>
ä½ ä¼šå‘ç°ï¼Œé€šè¿‡å‡ ä¸ªä½ç½®ä¿¡æ¯å‚æ•°ï¼Œ<strong>æˆ‘ä»¬è™½ç„¶åˆ’åˆ†äº†ç½‘æ ¼ï¼Œä½†æ˜¯ç½‘æ ¼å´ä¸ä¼šåƒçª—å£çš„æ­¥é•¿ä¸€æ ·é™åˆ¶ç›®æ ‡çš„è¾¹ç•Œæ¡†ï¼Œæ¯ä¸ªç½‘æ ¼å•å…ƒç›¸å½“äºä¸€ä¸ªé¢„æµ‹å•å…ƒæ¥é¢„æµ‹ä¸­å¿ƒç‚¹åœ¨æœ¬å•å…ƒæ ¼é‡Œçš„ç›®æ ‡çš„ç±»åˆ«å’Œè¾¹ç•Œæ¡†ã€‚</strong><br>
ç°åœ¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç»§ç»­åº”ç”¨ 2.0 ä¸­çš„ç½‘ç»œ,è°ƒæ•´è¾“å‡ºç‰¹å¾å›¾ä¸ºæ–°çš„æ ‡ç­¾ç»´åº¦,å³å¯ä»¥æ­¤è®¡ç®—æŸå¤±å¹¶åå‘ä¼ æ’­äº†ã€‚<br>
ä½ ä¼šå‘ç°ï¼ŒYOLO çš„æ ¸å¿ƒä¼˜åŠ¿æ˜¯ï¼š</p>
<ul>
<li>ä¸å†æšä¸¾çª—å£ï¼Œä¸å†é‡å¤è®¡ç®—ã€‚</li>
<li>æ¯ä¸ªç½‘æ ¼å•å…ƒç‹¬ç«‹è´Ÿè´£é¢„æµ‹ç›®æ ‡ï¼ŒåŒæ—¶è¾“å‡ºè¾¹ç•Œæ¡†å’Œç±»åˆ«ã€‚</li>
<li>è®­ç»ƒæ—¶å³å¯ç«¯åˆ°ç«¯ä¼˜åŒ–ï¼Œé¢„æµ‹é˜¶æ®µä¸€æ¬¡å‰å‘ä¼ æ’­å®Œæˆæ•´å›¾æ£€æµ‹ã€‚</li>
</ul>
<p>å¯ä»¥è¯´ï¼ŒYOLO çš„æå‡ºè®©â€œæ£€æµ‹â€çœŸæ­£ä»â€œåˆ†ç±»çš„å»¶ä¼¸â€è„±ç¦»å‡ºæ¥ï¼Œæˆä¸ºè®¡ç®—æœºè§†è§‰é¢†åŸŸçš„æ ¸å¿ƒä»»åŠ¡ä¹‹ä¸€ï¼Œå®ƒçš„å†…å®¹è¿˜æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬é‡åˆ°å†æ…¢æ…¢å±•å¼€ã€‚</p>
<h1 id="4æ€»ç»“">4.æ€»ç»“</h1>
<table>
<thead>
<tr>
<th>æ¦‚å¿µ</th>
<th>åŸç†</th>
<th>æ¯”å–»</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>1.0 æ»‘åŠ¨çª—å£æ£€æµ‹</strong></td>
<td>ä½¿ç”¨å›ºå®šå¤§å°çª—å£åœ¨å›¾åƒä¸Šæ»‘åŠ¨ï¼Œå°†æ¯ä¸ªçª—å£é€å…¥åˆ†ç±»ç½‘ç»œåˆ¤æ–­æ˜¯å¦åŒ…å«ç›®æ ‡ï¼›é€šè¿‡å±€éƒ¨åˆ†ç±»ç»“æœé—´æ¥æ‹¼å‡‘ç›®æ ‡ä½ç½®</td>
<td>å°±åƒç”¨æ”¾å¤§é•œé€å—æ£€æŸ¥æ•´å¼ å›¾ï¼Œæ‰¾åˆ°ç›®æ ‡å†æ ‡è®°ä½ç½®</td>
</tr>
<tr>
<td><strong>é—®é¢˜</strong></td>
<td>è®¡ç®—é‡å·¨å¤§ï¼Œæ¯ä¸ªçª—å£éƒ½è¦å•ç‹¬å¤„ç†ï¼›å®šä½ç²¾åº¦ä¾èµ–åˆ†ç±»ç»“æœæ‹¼å‡‘</td>
<td>ç¿»é˜…æ•´æœ¬ä¹¦å¯»æ‰¾å…³é”®è¯ï¼Œæ¯é¡µéƒ½è¦ä»”ç»†çœ‹ä¸€é</td>
</tr>
<tr>
<td><strong>2.0 å·ç§¯åŒ–æ£€æµ‹</strong></td>
<td>å°†æ•´å¹…å›¾åƒé€å…¥å·ç§¯ç½‘ç»œï¼Œå·ç§¯å±‚è‡ªåŠ¨å®Œæˆæ»‘åŠ¨å’Œç‰¹å¾æå–ï¼Œè¾“å‡ºäºŒç»´ç‰¹å¾å›¾è¡¨ç¤ºå„ä½ç½®åˆ†ç±»ç»“æœï¼›å…¨è¿æ¥å±‚å¯è¢«ç­‰æ•ˆå·ç§¯æ›¿ä»£</td>
<td>ä¸ç”¨é€é¡µæ£€æŸ¥ï¼Œè€Œæ˜¯æ‰«ææ•´æœ¬ä¹¦ï¼Œè‡ªåŠ¨æ ‡è®°å‡ºç°å…³é”®è¯çš„åŒºåŸŸ</td>
</tr>
<tr>
<td><strong>çª—å£åœ¨ç‰¹å¾å›¾ä¸­ä¼ æ’­</strong></td>
<td>éšç€å·ç§¯å±‚å †å ï¼Œæ¯ä¸ªç‰¹å¾å›¾ä½ç½®å¯¹åº”è¾“å…¥å›¾åƒçš„ä¸€ä¸ªå¤§çª—å£åŒºåŸŸï¼›è®­ç»ƒé˜¶æ®µé‡‡ç”¨å¼±ç›‘ç£ï¼Œåªéœ€éƒ¨åˆ†é«˜å“åº”ä½ç½®é¢„æµ‹æ­£ç¡®å³å¯</td>
<td>å°çª—å£ä¿¡æ¯é€æ¸æ±‡èšï¼Œåƒæ”¾å¤§é•œè‡ªåŠ¨è·Ÿè¸ªå…³é”®åŒºåŸŸ</td>
</tr>
<tr>
<td><strong>æ ‡ç­¾è®¾è®¡</strong></td>
<td>è¾“å‡ºç‰¹å¾å›¾ä½¿ç”¨å›¾åƒçº§æ ‡ç­¾ï¼Œå·ç§¯ç½‘ç»œè‡ªåŠ¨å­¦ä¼šç©ºé—´ä½ç½®å“åº”ï¼Œæ— éœ€å¯¹æ¯ä¸ªçª—å£æ‰‹å·¥æ ‡æ³¨</td>
<td>ç»™æ•´æœ¬ä¹¦ä¸€ä¸ªä¸»é¢˜æ ‡ç­¾ï¼Œç½‘ç»œè‡ªåŠ¨æ‰¾åˆ°ç›¸å…³ç« èŠ‚</td>
</tr>
<tr>
<td><strong>3.0 YOLO</strong></td>
<td>ç½‘ç»œç›´æ¥é¢„æµ‹æ¯ä¸ªç½‘æ ¼å•å…ƒå†…ç›®æ ‡çš„ç±»åˆ«å’Œè¾¹ç•Œæ¡†ï¼›ç«¯åˆ°ç«¯è®­ç»ƒï¼Œä¸å†ä¾èµ–æ»‘åŠ¨çª—å£æˆ–é‡å¤è®¡ç®—</td>
<td>æ¯ä¸ªç½‘æ ¼åƒä¸€ä¸ªå°æ¢å‘˜ï¼Œç›´æ¥å‘Šè¯‰ä½ ç›®æ ‡åœ¨è¿™é‡Œï¼Œå¹¶ç”»å‡ºè½®å»“</td>
</tr>
<tr>
<td><strong>YOLO æ ‡ç­¾è§„èŒƒ</strong></td>
<td>æ¯ä¸ªç½‘æ ¼åŒ…å« <span class="math inline">\(p_c\)</span>ï¼ˆæ˜¯å¦æœ‰ç›®æ ‡ï¼‰ã€<span class="math inline">\(b_x,b_y,b_h,b_w\)</span>ï¼ˆè¾¹ç•Œæ¡†ä½ç½®ï¼‰ã€<span class="math inline">\(c_n\)</span>ï¼ˆç±»åˆ«ï¼‰ï¼›è¾“å‡ºç»´åº¦ <span class="math inline">\(S \times S \times (5 + c_n)\)</span></td>
<td>æ¯ä¸ªå°æ¢å‘˜æºå¸¦å®Œæ•´ä¿¡æ¯å¡ç‰‡ï¼ŒæŠ¥å‘Šç›®æ ‡ä½ç½®å’Œç±»å‹</td>
</tr>
</tbody>
</table>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-23 20:54">2025-12-23 20:53</span>&nbsp;
<a href="https://www.cnblogs.com/Goblinscholar">å“¥å¸ƒæ—å­¦è€…</a>&nbsp;
é˜…è¯»(<span id="post_view_count">16</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19389081);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19389081', targetLink: 'https://www.cnblogs.com/Goblinscholar/p/19389081', title: 'å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹å››ï¼šè®¡ç®—æœºè§†è§‰  ç¬¬ä¸‰å‘¨ï¼šæ£€æµ‹ç®—æ³• ï¼ˆäºŒï¼‰ç›®æ ‡æ£€æµ‹ç®—æ³•' })">ä¸¾æŠ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ å‰ç«¯ TypeScript å…¥é—¨2 ]]></title>
    <link>https://www.cnblogs.com/pengjiali/p/19387524</link>
    <guid>df9fd7c6255c638659648393e00cf2a6</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/pengjiali/p/19387524" title="å‘å¸ƒäº 2025-12-23 18:31">
    <span role="heading" aria-level="2">å‰ç«¯ TypeScript å…¥é—¨2</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="å‰ç«¯-typescript-å…¥é—¨2">å‰ç«¯ TypeScript å…¥é—¨2</h1>
<p>åœ¨<a href="https://www.cnblogs.com/pengjiali/p/18104072" target="_blank">ä¸Šä¸€ç¯‡</a>ä¸­ï¼Œæˆ‘ä»¬äº†è§£äº† TS å¸¸ç”¨è¯­æ³•ï¼Œä½†æ˜¯åœ¨Vue3é¡¹ç›®å®é™…å¼€å‘ä¸­ï¼Œä¼šå‘ç°å¾ˆå¤š TS ä»£ç çœ‹ä¸æ‡‚ã€‚æœ¬ç¯‡ä»¥å®é™… Vue3 é¡¹ç›®ä¸ºä¾‹ï¼ŒæŠ½å–å‡ºå…¶ä¸­ç»å¤§å¤šæ•° TS å¸¸è§å†™æ³•ï¼Œå¿«é€Ÿè¿›å…¥å®æˆ˜ã€‚</p>
<h2 id="ä¸€api-å±‚çš„-typescript-ç”¨æ³•">ä¸€ã€API å±‚çš„ TypeScript ç”¨æ³•</h2>
<h3 id="11-å®šä¹‰æ¥å£æ•°æ®ç»“æ„interface">1.1 å®šä¹‰æ¥å£æ•°æ®ç»“æ„ï¼ˆinterfaceï¼‰</h3>
<p>åœ¨é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>interface</code> å®šä¹‰åç«¯è¿”å›çš„æ•°æ®ç»“æ„ã€‚</p>
<pre><code class="language-typescript">// src/api/system/user/profile.ts
export interface ProfileVO {
  id: number
  username: string
  nickname: string
  dept: {
    id: number
    name: string
  }
  // roles æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„é‡Œçš„æ¯ä¸€é¡¹éƒ½æ˜¯åŒ…å« id å’Œ name ä¸¤ä¸ªå­—æ®µçš„å¯¹è±¡
  roles: {
    id: number
    name: string
  }[]
  posts: {
    id: number
    name: string
  }[]
  email: string
  sex: number
  status: number
  remark: string
  createTime: Date
}
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li><code>[]</code> è¡¨ç¤ºæ•°ç»„ç±»å‹ï¼Œå¦‚ <code>roles: {...}[]</code> è¡¨ç¤ºè§’è‰²æ•°ç»„</li>
<li>åµŒå¥—å¯¹è±¡ç›´æ¥åœ¨ interface ä¸­å®šä¹‰ï¼Œå¦‚ <code>dept: { id: number; name: string }</code></li>
<li><code>Date</code> ç±»å‹è¡¨ç¤ºæ—¥æœŸæ—¶é—´</li>
</ul>
<h3 id="12-å¯é€‰å±æ€§ä¸è”åˆç±»å‹">1.2 å¯é€‰å±æ€§ä¸è”åˆç±»å‹</h3>
<pre><code class="language-typescript">// src/api/system/user/profile.ts
export interface UserProfileUpdateReqVO {
  nickname?: string // ? è¡¨ç¤ºå¯é€‰å±æ€§
  email?: string
  mobile?: string
  sex?: number
  avatar?: string
}

// src/api/system/sms/smsLog/index.ts
export interface SmsLogVO {
  id: number | null // è”åˆç±»å‹ï¼šå¯ä»¥æ˜¯ number æˆ– null
  channelId: number | null
  templateParams: Map&lt;string, object&gt; | null 
  sendStatus: number | null
  sendTime: Date | null
}
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li><code>?</code> è¡¨ç¤ºè¯¥å±æ€§å¯é€‰ï¼Œå¯ä»¥ä¸ä¼ </li>
<li><code>|</code> è¡¨ç¤ºè”åˆç±»å‹ï¼Œå€¼å¯ä»¥æ˜¯å¤šç§ç±»å‹ä¹‹ä¸€</li>
<li><code>null</code> å’Œ <code>undefined</code> å¸¸ç”¨äºè¡¨ç¤ºç©ºå€¼</li>
<li><code> Map&lt;string, object&gt;</code>: é”®æ˜¯ stringã€å€¼æ˜¯ object çš„ Map</li>
</ul>
<h3 id="13-æ¥å£ç»§æ‰¿extends">1.3 æ¥å£ç»§æ‰¿ï¼ˆextendsï¼‰</h3>
<pre><code class="language-typescript">// src/api/system/tenant/index.ts
export interface TenantPageReqVO extends PageParam {
  name?: string
  contactName?: string
  contactMobile?: string
  status?: number
  createTime?: Date[]
}
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li><code>extends PageParam</code> ç»§æ‰¿äº†åˆ†é¡µå‚æ•°ï¼ˆpageNo, pageSizeï¼‰</li>
<li>ç»§æ‰¿åå¯ä»¥æ·»åŠ è‡ªå·±çš„å±æ€§</li>
<li><code>PageParam</code> æ˜¯å…¨å±€ç±»å‹ï¼Œå®šä¹‰åœ¨ <code>types/global.d.ts</code></li>
</ul>
<pre><code class="language-typescript">// global.d.ts
export {}
declare global {
  interface PageParam {
    pageSize?: number
    pageNo?: number
  }
}
</code></pre>
<p>TypeScript æ˜¯å¦‚ä½•æ‰¾åˆ°è¿™ä¸ª global.d.ts çš„ï¼š</p>
<pre><code class="language-json">{
  "compilerOptions": {
    // å‘Šè¯‰ TSï¼šç±»å‹å£°æ˜æ–‡ä»¶çš„æ ¹ç›®å½•åœ¨è¿™ä¸¤ä¸ªåœ°æ–¹ï¼š
    "typeRoots": ["./node_modules/@types/", "./types"]
  },
  // å‚ä¸ç¼–è¯‘/ç±»å‹æ£€æŸ¥çš„æ–‡ä»¶åŒ…æ‹¬ types ç›®å½•ä¸‹æ‰€æœ‰ .d.ts
  "include": [
    "src",
    "types/**/*.d.ts",
    "src/types/auto-imports.d.ts",
    "src/types/auto-components.d.ts"
  ]
}
</code></pre>
<h3 id="14-api-å‡½æ•°çš„ç±»å‹æ ‡æ³¨">1.4 API å‡½æ•°çš„ç±»å‹æ ‡æ³¨</h3>
<pre><code class="language-typescript">// src/api/system/user/index.ts
// æŸ¥è¯¢ç”¨æˆ·è¯¦æƒ… - å‚æ•°å’Œè¿”å›å€¼éƒ½æœ‰ç±»å‹
export const getUser = (id: number) =&gt; {
  return request.get({ url: '/system/user/get?id=' + id })
}

// æ–°å¢ç”¨æˆ· - data å‚æ•°ç±»å‹ä¸º UserVO
export const createUser = (data: UserVO) =&gt; {
  return request.post({ url: '/system/user/create', data })
}

// ä¿®æ”¹ç”¨æˆ·
export const updateUser = (data: UserVO) =&gt; {
  return request.put({ url: '/system/user/update', data })
}

// æ‰¹é‡åˆ é™¤ - å‚æ•°æ˜¯æ•°å­—æ•°ç»„
export const deleteUserList = (ids: number[]) =&gt; {
  return request.delete({ url: '/system/user/delete-list', params: { ids: ids.join(',') } })
}
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li>å‚æ•°ç±»å‹å†™åœ¨å‚æ•°ååé¢ï¼š<code>(id: number)</code></li>
<li>å¯¹è±¡ç±»å‹å‚æ•°ç”¨ interfaceï¼š<code>(data: UserVO)</code></li>
<li>æ•°ç»„ç±»å‹ï¼š<code>ids: number[]</code></li>
</ul>
<h3 id="15-asyncawait-ä¸-promise-ç±»å‹">1.5 async/await ä¸ Promise ç±»å‹</h3>
<pre><code class="language-typescript">// src/api/system/post/index.ts
// å¼‚æ­¥è¿”å›ä¸€ä¸ª Promiseï¼Œè¿™ä¸ª Promise æœ€ç»ˆä¼š resolve æˆ PostVO å¯¹è±¡ç»„æˆçš„æ•°ç»„ã€‚
// è¿”å› Promise&lt;PostVO[]&gt;ã€‚
export const getSimplePostList = async (): Promise&lt;PostVO[]&gt; =&gt; {
  return await request.get({ url: '/system/post/simple-list' })
}

// æŸ¥è¯¢è¯¦æƒ…
export const getPost = async (id: number) =&gt; {
  return await request.get({ url: '/system/post/get?id=' + id })
}

// åˆ é™¤
export const deletePost = async (id: number) =&gt; {
  return await request.delete({ url: '/system/post/delete?id=' + id })
}
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li><code>async</code> å‡½æ•°è‡ªåŠ¨è¿”å› Promise</li>
<li><code>Promise&lt;PostVO[]&gt;</code> æ˜ç¡®è¿”å›çš„æ•°æ®ç±»å‹</li>
<li><code>await</code> ç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆ</li>
</ul>
<h2 id="äºŒstorepiniaå±‚çš„-typescript-ç”¨æ³•">äºŒã€Storeï¼ˆPiniaï¼‰å±‚çš„ TypeScript ç”¨æ³•</h2>
<h3 id="21-å®šä¹‰-store-çš„-state-ç±»å‹">2.1 å®šä¹‰ Store çš„ State ç±»å‹</h3>
<pre><code class="language-typescript">// src/store/modules/user.ts
export interface CompanyVO {
  pid: string
  companyName: string
  isDefault: number
}

interface UserVO {
  id: number
  avatar: string
  nickname: string
  deptId: number
  companyList: CompanyVO[]
  sex?: number
  position?: string
}

interface UserInfoVO {
  permissions: Set&lt;string&gt; // Set ç±»å‹
  roles: string[]
  isSetUser: boolean
  user: UserVO
}

export const useUserStore = defineStore('admin-user', {
  state: (): UserInfoVO =&gt; ({
    permissions: new Set&lt;string&gt;(),
    roles: [],
    isSetUser: false,
    user: {
      id: 0,
      avatar: '',
      nickname: '',
      deptId: 0,
      companyList: []
    }
  })
  // ... getters å’Œ actions
})
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li><code>state: (): UserInfoVO =&gt; (...)</code> å®šä¹‰ state è¿”å›ç±»å‹æ˜¯ UserInfoVOã€‚ä¸»è¦æ˜¯ä¸ºäº†ç±»å‹æ£€æŸ¥å’Œæç¤ºï¼Œä¸ä¸€å®šä¼šè¢«ä½ æ˜¾å¼â€œæ‹¿å‡ºæ¥ç”¨â€ã€‚</li>
<li><code>Set&lt;string&gt;</code> è¡¨ç¤ºå­—ç¬¦ä¸²é›†åˆã€‚Set ä¸­çš„å€¼å¿…é¡»æ˜¯ string ç±»å‹ã€‚</li>
</ul>
<h3 id="22-getters-çš„ç±»å‹">2.2 Getters çš„ç±»å‹</h3>
<pre><code class="language-typescript">// src/store/modules/user.ts
export const useUserStore = defineStore('admin-user', {
  // ... state
  getters: {
    getPermissions(): Set&lt;string&gt; {
      return this.permissions
    },
    getRoles(): string[] {
      return this.roles
    },
    getIsSetUser(): boolean {
      return this.isSetUser
    },
    getUser(): UserVO {
      return this.user
    }
  }
})
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li>getter å‡½æ•°åé¢æ ‡æ³¨è¿”å›ç±»å‹</li>
<li>ä½¿ç”¨ <code>this</code> è®¿é—® state</li>
</ul>
<h3 id="23-actions-çš„ç±»å‹æ ‡æ³¨">2.3 Actions çš„ç±»å‹æ ‡æ³¨</h3>
<pre><code class="language-typescript">// src/store/modules/user.ts
export const useUserStore = defineStore('admin-user', {
  // ... state, getters
  actions: {
    async setUserInfoAction() {
      if (!getAccessToken()) {
        this.resetState()
        return null
      }
      let userInfo = wsCache.get(CACHE_KEY.USER)
      if (!userInfo) {
        userInfo = await getInfo()
      }
      this.permissions = new Set(userInfo.permissions || [])
      this.roles = userInfo.roles
      this.user = userInfo.user
    },

    async setUserAvatarAction(avatar: string) {
      const userInfo = wsCache.get(CACHE_KEY.USER)
      this.user.avatar = avatar
      userInfo.user.avatar = avatar
      wsCache.set(CACHE_KEY.USER, userInfo)
    },

    async loginOut() {
      try {
        await loginOut()
      } catch (error) {
        console.error('ç™»å‡ºæ¥å£è°ƒç”¨å¤±è´¥:', error)
      } finally {
        removeToken()
        deleteUserCache()
        this.resetState()
      }
    }
  }
})
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li>action å‡½æ•°å‚æ•°éœ€è¦ç±»å‹ï¼š<code>(avatar: string)</code></li>
<li>async action è¿”å› Promise</li>
<li>é€šè¿‡ <code>this</code> ä¿®æ”¹ state</li>
</ul>
<h3 id="24-map-ç±»å‹çš„ä½¿ç”¨">2.4 Map ç±»å‹çš„ä½¿ç”¨</h3>
<pre><code class="language-typescript">// src/store/modules/mall/kefu.ts
interface MallKefuInfoVO {
  conversationList: KeFuConversationRespVO[]
  conversationMessageList: Map&lt;number, KeFuMessageRespVO[]&gt; // Map ç±»å‹
}

export const useMallKefuStore = defineStore('mall-kefu', {
  state: (): MallKefuInfoVO =&gt; ({
    conversationList: [],
    conversationMessageList: new Map&lt;number, KeFuMessageRespVO[]&gt;()
  }),
  getters: {
    // è¿”å›å‡½æ•°çš„ getter
    getConversationMessageList(): (conversationId: number) =&gt; KeFuMessageRespVO[] | undefined {
      return (conversationId: number) =&gt; this.conversationMessageList.get(conversationId)
    }
    /*
    ç­‰ä»·ï¼š
    type GetMsgFn = (conversationId: number) =&gt; KeFuMessageRespVO[] | undefined

    getConversationMessageList(): GetMsgFn {
      return (conversationId: number) =&gt; this.conversationMessageList.get(conversationId)
    }
    */
  },
  actions: {
    saveMessageList(conversationId: number, messageList: KeFuMessageRespVO[]) {
      this.conversationMessageList.set(conversationId, messageList)
    }
  }
})
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li><code>Map&lt;number, KeFuMessageRespVO[]&gt;</code> é”®æ˜¯ numberï¼Œå€¼æ˜¯æ•°ç»„</li>
<li>getter å¯ä»¥è¿”å›å‡½æ•°</li>
<li>ä½¿ç”¨ <code>.get()</code> å’Œ <code>.set()</code> æ“ä½œ Map</li>
<li><code>(conversationId: number) =&gt; KeFuMessageRespVO[] | undefined</code>: ç±»å‹æ˜¯å‡½æ•°ï¼Œè¿”å›å€¼æ˜¯KeFuMessageRespVO[]æˆ–undefined</li>
</ul>
<h3 id="25-å¤æ‚-state-å®šä¹‰">2.5 å¤æ‚ State å®šä¹‰</h3>
<pre><code class="language-typescript">// src/store/modules/app.ts
interface AppState {
  breadcrumb: boolean
  breadcrumbIcon: boolean
  collapse: boolean
  uniqueOpened: boolean
  hamburger: boolean
  screenfull: boolean
  size: boolean
  locale: boolean
  message: boolean
  tagsView: boolean
  tagsViewImmerse: boolean
  tagsViewIcon: boolean
  logo: boolean
  fixedHeader: boolean
  greyMode: boolean
  pageLoading: boolean
  layout: LayoutType
  title: string
  userInfo: string
  isDark: boolean
  currentSize: ElementPlusSize
  sizeMap: ElementPlusSize[]
  mobile: boolean
  footer: boolean
  theme: ThemeTypes
  fixedMenu: boolean
}

export const useAppStore = defineStore('app', {
  state: (): AppState =&gt; {
    return {
      userInfo: 'userInfo',
      sizeMap: ['default', 'large', 'small'],
      mobile: false,
      title: import.meta.env.VITE_APP_TITLE,
      pageLoading: false
      // ... å…¶ä»–å±æ€§
    }
  }
})
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li>å¸ƒå°”ç±»å‹å±æ€§é›†ä¸­å®šä¹‰</li>
<li>è‡ªå®šä¹‰ç±»å‹ï¼š<code>LayoutType</code>, <code>ElementPlusSize</code>, <code>ThemeTypes</code></li>
<li>ä½¿ç”¨ <code>import.meta.env</code> è·å–ç¯å¢ƒå˜é‡</li>
</ul>
<h2 id="ä¸‰viewsvue-ç»„ä»¶å±‚çš„-typescript-ç”¨æ³•">ä¸‰ã€Viewsï¼ˆVue ç»„ä»¶ï¼‰å±‚çš„ TypeScript ç”¨æ³•</h2>
<h3 id="31-defineoptions-å’Œ-ref">3.1 defineOptions å’Œ ref</h3>
<pre><code class="language-typescript">// src/views/system/role/index.vue
&lt;script lang="ts" setup&gt;
import * as RoleApi from '@/api/system/role'

defineOptions({ name: 'SystemRole' })

const message = useMessage() // æ¶ˆæ¯å¼¹çª—
const { t } = useI18n() // å›½é™…åŒ–

const loading = ref(true)  // å¸ƒå°”å€¼
const total = ref(0)       // æ•°å­—
const list = ref([])       // æ•°ç»„
&lt;/script&gt;
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li><code>defineOptions</code> å®šä¹‰ç»„ä»¶é€‰é¡¹</li>
<li><code>ref</code> è‡ªåŠ¨æ¨æ–­ç±»å‹</li>
<li>ä¸éœ€è¦æ˜¾å¼æ ‡æ³¨ç®€å•ç±»å‹</li>
</ul>
<h3 id="32-æ˜ç¡®-ref-ç±»å‹">3.2 æ˜ç¡® ref ç±»å‹</h3>
<pre><code class="language-typescript">// src/views/system/user/index.vue
&lt;script lang="ts" setup&gt;
import * as UserApi from '@/api/system/user'

const loading = ref(true)
const total = ref(0)
const list = ref([])  // å¯ä»¥æ¨æ–­ï¼Œä½†ä¸æ˜ç¡®

// æ›´å¥½çš„å†™æ³•ï¼šæ˜ç¡®ç±»å‹
const loading = ref&lt;boolean&gt;(true)
const total = ref&lt;number&gt;(0)
const list = ref&lt;UserApi.UserVO[]&gt;([])  // æ˜ç¡®æ˜¯ UserVO æ•°ç»„
const companyTreeData = ref&lt;Tree[]&gt;([])  // Tree æ˜¯å…¨å±€ç±»å‹
&lt;/script&gt;
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li><code>ref&lt;ç±»å‹&gt;(åˆå§‹å€¼)</code> æ˜ç¡®ç±»å‹</li>
<li>æ•°ç»„ç±»å‹ï¼š<code>ref&lt;UserVO[]&gt;([])</code></li>
<li>ä½¿ç”¨å¯¼å…¥çš„ API ç±»å‹</li>
</ul>
<h3 id="33-reactive-å®šä¹‰å¤æ‚å¯¹è±¡">3.3 reactive å®šä¹‰å¤æ‚å¯¹è±¡</h3>
<pre><code class="language-typescript">// src/views/system/user/index.vue
&lt;script lang="ts" setup&gt;
const queryParams = reactive({
  pageNo: 1,
  pageSize: 10,
  username: undefined,
  mobile: undefined,
  status: undefined,
  deptId: undefined,
  createTime: []
})
&lt;/script&gt;
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li><code>reactive</code> ç”¨äºå¤æ‚å¯¹è±¡</li>
<li>è‡ªåŠ¨æ¨æ–­ç±»å‹</li>
<li>é€‚åˆæŸ¥è¯¢å‚æ•°å¯¹è±¡</li>
</ul>
<h3 id="34-defineprops-ç±»å‹å®šä¹‰">3.4 defineProps ç±»å‹å®šä¹‰</h3>
<pre><code class="language-typescript">// src/views/system/user/UserForm.vue
&lt;script lang="ts" setup&gt;
// æ–¹å¼ 1ï¼šä½¿ç”¨ defineProps&lt;&gt;()
const props = defineProps&lt;{
  companyTreeData?: any[]
  fixedCompany?: { name: string; pid: number } | null
}&gt;()

// è®¿é—® props
const companyTreeData = computed(() =&gt; props.companyTreeData || [])
const fixedCompany = computed(() =&gt; props.fixedCompany || null)
&lt;/script&gt;
</code></pre>
<pre><code class="language-typescript">// src/views/system/companyTree/detail.vue
&lt;script setup lang="ts"&gt;
import { ref, defineProps } from 'vue'

// æ–¹å¼ 2ï¼šå®šä¹‰å¸¦é»˜è®¤å€¼çš„ props
const props = defineProps({
  title: {
    type: String,
    default: ''
  }
})
&lt;/script&gt;
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li><code>defineProps&lt;{}&gt;()</code> æ³›å‹æ–¹å¼å®šä¹‰ props</li>
<li>å¯é€‰å±æ€§ç”¨ <code>?</code></li>
<li>è”åˆç±»å‹ï¼š<code>{ name: string; pid: number } | null</code></li>
<li><code>computed</code> åŒ…è£… props è¿›è¡Œè®¡ç®—</li>
</ul>
<p>definePropsè¯­æ³•ï¼š</p>
<pre><code class="language-typescript">// å­©å­æ²¡è„¾æ°”
defineProps(['persons'])

// æ¥æ”¶+é™åˆ¶ç±»å‹
defineProps&lt;{persons:Persons}&gt;()

// æ¥æ”¶+é™åˆ¶ç±»å‹+é™åˆ¶å¿…è¦æ€§ â€”â€” å¯ä»¥ä¸ä¼ 
defineProps&lt;{persons?:Persons}&gt;()

// æ¥æ”¶+é™åˆ¶ç±»å‹+é™åˆ¶å¿…è¦æ€§+é»˜è®¤å€¼
import {withDefaults} from 'vue'
withDefaults(defineProps&lt;{persons?:Persons}&gt;(), {
  persons: () =&gt; []
})
</code></pre>
<h3 id="35-defineemits-ç±»å‹å®šä¹‰">3.5 defineEmits ç±»å‹å®šä¹‰</h3>
<pre><code class="language-typescript">// src/views/system/user/CompanyTree.vue
&lt;script lang="ts" setup&gt;
// å®šä¹‰ emit ç±»å‹
const emits = defineEmits&lt;{
  (e: 'node-click', row: any): void
}&gt;()

// è§¦å‘äº‹ä»¶
const handleNodeClick = (row: any) =&gt; {
  emits('node-click', row)
}
&lt;/script&gt;
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li><code>(e: 'äº‹ä»¶å', å‚æ•°: ç±»å‹): void</code></li>
<li>å¯ä»¥å®šä¹‰å¤šä¸ªäº‹ä»¶</li>
<li>ä½¿ç”¨ <code>emits('äº‹ä»¶å', å‚æ•°)</code> è§¦å‘</li>
</ul>
<p>å£°æ˜ä¸€ä¸ªåä¸º 'node-click'çš„äº‹ä»¶çš„ä¸‰ç§å†™æ³•ï¼ˆåŒºåˆ«æ˜¯ç±»å‹æ£€æŸ¥ä¸¥æ ¼ç¨‹åº¦ï¼‰ï¼š</p>
<pre><code class="language-typescript">defineEmits(['node-click'])

// å®šä¹‰ä¸€ä¸ªåä¸º 'node-click'â€‹ çš„äº‹ä»¶ã€‚è¿™æ˜¯ä¸€ä¸ªå‡½æ•°ç­¾åå½¢å¼çš„å®šä¹‰
(e: 'node-click', row: any): void

const emit = defineEmits&lt;{
  // æ–°è¯­æ³•ï¼š'äº‹ä»¶å': [å‚æ•°1ç±»å‹, å‚æ•°2ç±»å‹?]
  'node-click': [row: any]  
}&gt;();
</code></pre>
<h3 id="36-formrules-è¡¨å•éªŒè¯ç±»å‹">3.6 FormRules è¡¨å•éªŒè¯ç±»å‹</h3>
<pre><code class="language-typescript">// src/views/system/user/ResetPasswordForm.vue
&lt;script lang="ts" setup&gt;
import { FormRules } from 'element-plus'

const formData = ref({
  id: undefined as number | undefined,
  username: '',
  password: ''
})

const formRules = reactive&lt;FormRules&gt;({
  password: [
    { required: true, message: 'æ–°å¯†ç ä¸èƒ½ä¸ºç©º', trigger: 'blur' },
    { min: 6, max: 16, message: 'å¯†ç é•¿åº¦ä¸º 6-16 ä½', trigger: 'blur' },
    {
      pattern: /^(...$/,
      message: 'å¯†ç éœ€åŒ…å«...',
      trigger: 'blur'
    }
  ]
})
&lt;/script&gt;
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li><code>FormRules</code> æ¥è‡ª element-plus</li>
<li><code>reactive&lt;FormRules&gt;</code> å®šä¹‰éªŒè¯è§„åˆ™</li>
<li><code>as number | undefined</code> ç±»å‹æ–­è¨€ã€‚æ‰‹åŠ¨å‘Šè¯‰ TS è¿™ä¸ªå€¼çš„ç±»å‹æ˜¯ number | undefinedï¼ˆè”åˆç±»å‹ï¼‰ã€‚</li>
<li><code>id: undefined as number | undefined</code> åˆå§‹å€¼æ˜¯ undefinedï¼Œä½†åé¢å¯èƒ½ä¼šè¢«èµ‹å€¼æˆ numberï¼Œæ‰€ä»¥ç±»å‹æ ‡æ³¨ä¸º number | undefined</li>
</ul>
<h3 id="37-ç»„ä»¶-ref-ç±»å‹">3.7 ç»„ä»¶ ref ç±»å‹</h3>
<pre><code class="language-typescript">// src/views/system/user/index.vue
&lt;script lang="ts" setup&gt;
import { ElTree } from 'element-plus'

const treeRef = ref&lt;InstanceType&lt;typeof ElTree&gt;&gt;()

// è°ƒç”¨ç»„ä»¶æ–¹æ³•
treeRef.value?.filter(val)
&lt;/script&gt;
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li><code>InstanceType&lt;typeof ElTree&gt;</code> è·å–ç»„ä»¶å®ä¾‹ç±»å‹
<ul>
<li>ref<t>()ï¼šåˆ›å»ºä¸€ä¸ªå“åº”å¼å¼•ç”¨ï¼Œç±»å‹æ˜¯ T</t></li>
<li>T å°±æ˜¯ InstanceType<typeof eltree=""></typeof></li>
<li>typeof ElTreeï¼šè·å– ElTree ç»„ä»¶çš„æ„é€ å‡½æ•°ç±»å‹</li>
<li>InstanceType<typeof eltree="">ï¼šä»æ„é€ å‡½æ•°ç±»å‹ä¸­æå–å®ä¾‹ç±»å‹</typeof></li>
</ul>
</li>
<li><code>?.</code> å¯é€‰é“¾æ“ä½œç¬¦ï¼Œé¿å… undefined æŠ¥é”™</li>
</ul>
<h3 id="38-computed-è®¡ç®—å±æ€§ç±»å‹">3.8 computed è®¡ç®—å±æ€§ç±»å‹</h3>
<pre><code class="language-typescript">// src/views/system/user/UserForm.vue
&lt;script lang="ts" setup&gt;
const props = defineProps&lt;{
  companyTreeData?: any[]
}&gt;()

// è‡ªåŠ¨æ¨æ–­è¿”å›ç±»å‹
const companyTreeData = computed(() =&gt; props.companyTreeData || [])

// æ˜ç¡®è¿”å›ç±»å‹
const isValid = computed&lt;boolean&gt;(() =&gt; {
  return formData.value.password.length &gt;= 8
})
&lt;/script&gt;
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li><code>computed(() =&gt; {})</code> è‡ªåŠ¨æ¨æ–­</li>
<li><code>computed&lt;ç±»å‹&gt;(() =&gt; {})</code> æ˜ç¡®ç±»å‹</li>
</ul>
<h2 id="å››å…¨å±€ç±»å‹å®šä¹‰types">å››ã€å…¨å±€ç±»å‹å®šä¹‰ï¼ˆtypesï¼‰</h2>
<h3 id="41-å…¨å±€å·¥å…·ç±»å‹">4.1 å…¨å±€å·¥å…·ç±»å‹</h3>
<pre><code class="language-typescript">// types/global.d.ts
declare global {
  // å‡½æ•°ç±»å‹
  interface Fn&lt;T = any&gt; {
    (...arg: T[]): T
  }

  // å¯ç©ºç±»å‹
  /*
  - type Xxx = ...ï¼šå’Œ ype Message = number | string ä¸€æ ·ï¼Œéƒ½æ˜¯èµ·ä¸€ä¸ªç±»å‹åˆ«å
  - Tï¼šæ˜¯ä¸€ä¸ªç±»å‹å‚æ•°ï¼Œå ä½çš„ï¼Œä¸æ˜¯å…·ä½“ç±»å‹
  - ç¤ºä¾‹ï¼š
    - type Nullable&lt;T&gt; = T | null
    - type A = Nullable&lt;string&gt;   // string | null
    - type B = Nullable&lt;number&gt;   // number | null
  */
  type Nullable&lt;T&gt; = T | null

  // å…ƒç´ å¼•ç”¨ç±»å‹ã€‚å£°æ˜ä¸€ä¸ªâ€œå¯ä»¥ä¸º null çš„ DOM å¼•ç”¨ç±»å‹â€ï¼ŒT å¿…é¡»æ˜¯ HTMLElement çš„å­ç±»å‹ï¼Œé»˜è®¤ç”¨ HTMLDivElementã€‚
  type ElRef&lt;T extends HTMLElement = HTMLDivElement&gt; = Nullable&lt;T&gt;

  // è®°å½•ç±»å‹ï¼ˆå¯¹è±¡ï¼‰
  /*
    å¦‚æœä¸è€ƒè™‘ null/undefined çš„è¾¹ç•Œæƒ…å†µï¼Œå¯ä»¥ç®€åŒ–æˆï¼š
    type Recordable&lt;T = any, K = string&gt; = Record&lt;K, T&gt;

    - Record&lt;K, V&gt; æ˜¯ TypeScript å†…ç½®çš„å·¥å…·ç±»å‹
      - ä¸€ä¸ªå¯¹è±¡ï¼Œé”®çš„ç±»å‹æ˜¯ Kï¼Œå€¼çš„ç±»å‹æ˜¯ V
      - ç¤ºä¾‹ï¼š
        type User = Record&lt;string, any&gt;
        // ç­‰ä»·äºï¼š{ [key: string]: any }

        const user: User = {
          name: 'å¼ ä¸‰',
          age: 18,
          job: 'å·¥ç¨‹å¸ˆ'
        }
    - æ¡ä»¶ç±»å‹ï¼šK extends null | undefined ? string : K
      - å¦‚æœ K æ˜¯ null æˆ– undefined â†’ é”®ç±»å‹ç”¨ string
      - å¦åˆ™ â†’ é”®ç±»å‹å°±ç”¨ K æœ¬èº«
    - æœ€ç»ˆç»“æœï¼šRecord&lt;é”®ç±»å‹, T&gt;
  */
  type Recordable&lt;T = any, K = string&gt; = Record&lt;K extends null | undefined ? string : K, T&gt;

  // ç»„ä»¶å¼•ç”¨ç±»å‹
  /*
    åšä¸€å±‚è¯­ä¹‰å°è£…ï¼Œè®©ä»£ç æ›´æ¸…æ™°ã€‚

    ä¸ç”¨åˆ«åï¼š
      const dialogRef = ref&lt;InstanceType&lt;typeof ElDialog&gt;&gt;()
      const tableRef = ref&lt;InstanceType&lt;typeof ElTable&gt;&gt;()
    ç”¨åˆ«åï¼ˆç”¨ ComponentRefï¼‰ï¼š
      const dialogRef = ref&lt;ComponentRef&lt;typeof ElDialog&gt;&gt;()
      const tableRef = ref&lt;ComponentRef&lt;typeof ElTable&gt;&gt;()
  */
  type ComponentRef&lt;T&gt; = InstanceType&lt;T&gt;

  // åˆ†é¡µå‚æ•°
  interface PageParam {
    pageSize?: number
    pageNo?: number
  }

  // åˆ†é¡µç»“æœ
  interface PageResult&lt;T&gt; {
    list: T
    total: number
  }

  // æ ‘ç»“æ„
  interface Tree {
    id: number
    name: string
    children?: Tree[] | any[]
  }
}
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li><code>declare global</code> å£°æ˜å…¨å±€ç±»å‹</li>
<li>æ³›å‹ç±»å‹ï¼š<code>Nullable&lt;T&gt;</code>, <code>PageResult&lt;T&gt;</code></li>
<li>åœ¨ä»»ä½•æ–‡ä»¶ä¸­éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨</li>
</ul>
<h3 id="42-è¡¨å•-schema-ç±»å‹">4.2 è¡¨å• Schema ç±»å‹</h3>
<pre><code class="language-typescript">// src/types/form.d.ts
export type FormValueType = string | number | string[] | number[] | boolean | undefined | null

export type FormItemProps = {
  labelWidth?: string | number
  required?: boolean
  rules?: Recordable
  error?: string
  showMessage?: boolean
  inlineMessage?: boolean
  style?: CSSProperties
}

export type FormSchema = {
  field: string
  label?: string
  labelMessage?: string
  colProps?: ColProps
  /*
    å®šä¹‰ä¸€ä¸ªå¯é€‰å±æ€§ componentPropsï¼Œå®ƒçš„ç±»å‹æ˜¯ä¸¤ä¸ªç±»å‹çš„äº¤å‰
      - componentProps?ï¼šå¯é€‰å±æ€§
      - { slots?: Recordable } &amp; ComponentPropsï¼šäº¤å‰ç±»å‹ï¼ˆ&amp;ï¼‰
      - äº¤å‰ç¤ºä¾‹ï¼š
        type A = { name: string }
        type B = { age: number }
        type C = A &amp; B  // { name: string; age: number }

        const obj: C = {
          name: 'å¼ ä¸‰',
          age: 18
        }
      - { slots?: Recordable } &amp; ComponentProps
        - å¿…é¡»åŒ…å« ComponentProps é‡Œçš„æ‰€æœ‰å±æ€§
        - åŒæ—¶å¯ä»¥æœ‰ä¸€ä¸ªå¯é€‰çš„ slots å±æ€§ï¼Œç±»å‹æ˜¯ Recordableï¼ˆä¹Ÿå°±æ˜¯ Record&lt;string, any&gt;ï¼‰
  */
  componentProps?: { slots?: Recordable } &amp; ComponentProps
  formItemProps?: FormItemProps
  component?: ComponentName
  value?: FormValueType
  hidden?: boolean
  // è¿”å›å€¼æ˜¯ AxiosPromise&lt;T&gt;ï¼ˆä¹Ÿå°±æ˜¯ Promise&lt;AxiosResponse&lt;T&gt;&gt;ï¼‰ï¼Œresolve çš„å€¼æ˜¯ AxiosResponse&lt;T&gt;ï¼Œè€Œ response.data çš„ç±»å‹æ˜¯ Tã€‚
  api?: &lt;T = any&gt;() =&gt; AxiosPromise&lt;T&gt;
}
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li><code>type</code> å®šä¹‰ç±»å‹åˆ«å</li>
<li>è”åˆç±»å‹ï¼š<code>string | number | boolean</code></li>
<li>æ³›å‹å‡½æ•°ï¼š<code>&lt;T = any&gt;() =&gt; AxiosPromise&lt;T&gt;</code></li>
</ul>
<h2 id="äº”å®ç”¨å·¥å…·å‡½æ•°çš„-typescript">äº”ã€å®ç”¨å·¥å…·å‡½æ•°çš„ TypeScript</h2>
<h3 id="51-å‡½æ•°å‚æ•°å’Œè¿”å›å€¼ç±»å‹">5.1 å‡½æ•°å‚æ•°å’Œè¿”å›å€¼ç±»å‹</h3>
<pre><code class="language-typescript">// src/utils/index.ts

// å­—ç¬¦ä¸²è½¬æ¢
export const humpToUnderline = (str: string): string =&gt; {
  return str.replace(/([A-Z])/g, '-$1').toLowerCase()
}

// è®¾ç½® CSS å˜é‡
export const setCssVar = (prop: string, val: any, dom = document.documentElement) =&gt; {
  dom.style.setProperty(prop, val)
}

// æ•°ç»„æŸ¥æ‰¾ï¼ˆæ³›å‹å‡½æ•°ï¼‰
export const findIndex = &lt;T = Recordable&gt;(ary: Array&lt;T&gt;, fn: Fn): number =&gt; {
  if (ary.findIndex) {
    return ary.findIndex(fn)
  }
  let index = -1
  ary.some((item: T, i: number, ary: Array&lt;T&gt;) =&gt; {
    const ret: T = fn(item, i, ary)
    if (ret) {
      index = i
      return ret
    }
  })
  return index
}
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li><code>(å‚æ•°: ç±»å‹): è¿”å›ç±»å‹ =&gt; {}</code></li>
<li>æ³›å‹å‡½æ•°ï¼š<code>&lt;T = Recordable&gt;</code></li>
<li>é»˜è®¤å‚æ•°ï¼š<code>dom = document.documentElement</code></li>
</ul>
<h3 id="52-æ—¶é—´æ ¼å¼åŒ–å‡½æ•°">5.2 æ—¶é—´æ ¼å¼åŒ–å‡½æ•°</h3>
<pre><code class="language-typescript">// src/utils/index.ts
export function formatTime(time: Date | number | string, fmt: string) {
  if (!time) return ''
  else {
    const date = new Date(time)
    const o = {
      'M+': date.getMonth() + 1,
      'd+': date.getDate(),
      'H+': date.getHours(),
      'm+': date.getMinutes(),
      's+': date.getSeconds(),
      'q+': Math.floor((date.getMonth() + 3) / 3),
      S: date.getMilliseconds()
    }
    // ... æ ¼å¼åŒ–é€»è¾‘
    return fmt
  }
}
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li>è”åˆç±»å‹å‚æ•°ï¼š<code>Date | number | string</code></li>
<li>å¯¹è±¡å­—é¢é‡ç±»å‹è‡ªåŠ¨æ¨æ–­</li>
</ul>
<h3 id="53-æ•°å­—å’Œé‡‘é¢å¤„ç†">5.3 æ•°å­—å’Œé‡‘é¢å¤„ç†</h3>
<pre><code class="language-typescript">// src/utils/index.ts

// æ•°ç»„æ±‚å’Œ
export const getSumValue = (values: number[]): number =&gt; {
  return values.reduce((prev, curr) =&gt; {
    const value = Number(curr)
    if (!Number.isNaN(value)) {
      return prev + curr
    } else {
      return prev
    }
  }, 0)
}

// å…ƒè½¬åˆ†
export const yuanToFen = (amount: string | number): number =&gt; {
  return convertToInteger(amount)
}

// åˆ†è½¬å…ƒ
export const fenToYuan = (price: string | number): string =&gt; {
  return formatToFraction(price)
}

// ERP æ ¼å¼åŒ–æ•°å­—
export const erpNumberFormatter = (num: number | string | undefined, digit: number) =&gt; {
  if (num == null) {
    return ''
  }
  if (typeof num === 'string') {
    num = parseFloat(num)
  }
  if (isNaN(num)) {
    return ''
  }
  return num.toFixed(digit)
}
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li>å‚æ•°æ”¯æŒå¤šç§ç±»å‹ï¼š<code>string | number</code></li>
<li>è¿”å›å€¼ç±»å‹æ˜ç¡®ï¼š<code>: number</code> æˆ– <code>: string</code></li>
<li><code>undefined</code> å¤„ç†</li>
</ul>
<h2 id="å…­hooksç»„åˆå¼å‡½æ•°çš„-typescript">å…­ã€Hooksï¼ˆç»„åˆå¼å‡½æ•°ï¼‰çš„ TypeScript</h2>
<h3 id="61-usetable-hook">6.1 useTable Hook</h3>
<pre><code class="language-typescript">// src/hooks/web/useTable.ts
interface ResponseType&lt;T = any&gt; {
  list: T[]
  total?: number
}

interface UseTableConfig&lt;T = any&gt; {
  getListApi: (option: any) =&gt; Promise&lt;T&gt;
  delListApi?: (option: any) =&gt; Promise&lt;T&gt;
  exportListApi?: (option: any) =&gt; Promise&lt;T&gt;
  response?: ResponseType
  defaultParams?: Recordable
  props?: TableProps
}

interface TableObject&lt;T = any&gt; {
  pageSize: number
  currentPage: number
  total: number
  tableList: T[]
  params: any
  loading: boolean
  exportLoading: boolean
  currentRow: Nullable&lt;T&gt;
}
/*
  - reactive&lt;TableObject&lt;T&gt;&gt; è¡¨ç¤ºåˆ›å»ºä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œå®ƒçš„ç±»å‹æ˜¯ TableObject&lt;T&gt;
  - åˆå§‹å€¼æ˜¯ { pageSize: 10, ... }ï¼Œå¿…é¡»ç¬¦åˆ TableObject&lt;T&gt; çš„ç»“æ„
*/
export const useTable = &lt;T = any&gt;(config?: UseTableConfig&lt;T&gt;) =&gt; {
  const tableObject = reactive&lt;TableObject&lt;T&gt;&gt;({
    pageSize: 10,
    currentPage: 1,
    total: 10,
    tableList: [],
    params: {
      ...(config?.defaultParams || {})
    },
    loading: true,
    exportLoading: false,
    currentRow: null
  })

  const paramsObj = computed(() =&gt; {
    return {
      ...tableObject.params,
      pageSize: tableObject.pageSize,
      pageNo: tableObject.currentPage
    }
  })

  const methods = {
    getList: async () =&gt; {
      tableObject.loading = true
      const res = await config?.getListApi(unref(paramsObj)).finally(() =&gt; {
        tableObject.loading = false
      })
      if (res) {
        // ä¸ç®¡ res åŸæœ¬æ˜¯ä»€ä¹ˆç±»å‹ï¼Œæˆ‘å¼ºåˆ¶æŠŠå®ƒå½“æˆ ResponseType æ¥ç”¨
        tableObject.tableList = (res as unknown as ResponseType).list
        tableObject.total = (res as unknown as ResponseType).total ?? 0
      }
    }
    // ... å…¶ä»–æ–¹æ³•
  }

  return {
    tableObject,
    methods
  }
}
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li>æ³›å‹ Hookï¼š<code>&lt;T = any&gt;</code></li>
<li>æ¥å£å®šä¹‰é…ç½®å’ŒçŠ¶æ€</li>
<li><code>reactive&lt;ç±»å‹&gt;</code> å®šä¹‰å“åº”å¼å¯¹è±¡</li>
<li>åŒé‡ç±»å‹æ–­è¨€ï¼š<code>as unknown as ResponseType</code>ï¼Œ
<ul>
<li>å…ˆæ–­è¨€æˆ unknown</li>
<li>å†æ–­è¨€æˆ ResponseType</li>
<li>ç”¨æ¥å¼ºåˆ¶è½¬æ¢åŸæœ¬ä¸å…¼å®¹çš„ç±»å‹ï¼Œç»•è¿‡ TS æ£€æŸ¥</li>
</ul>
</li>
</ul>
<h3 id="62-ç»„ä»¶å¼•ç”¨ç±»å‹">6.2 ç»„ä»¶å¼•ç”¨ç±»å‹</h3>
<pre><code class="language-typescript">// src/hooks/web/useTable.ts
import { ElTable } from 'element-plus'
/*
  å®ƒæ˜¯Table ç»„ä»¶å®ä¾‹ + TableExpose æ¥å£çš„äº¤å‰ç±»å‹
  æ—¢æ˜¯ Table ç»„ä»¶çš„å®ä¾‹ï¼ŒåˆåŒ…å« TableExpose é‡Œå®šä¹‰çš„æ–¹æ³•ã€‚ç­‰ä»·äºï¼š
  type TableRef = InstanceType&lt;typeof Table&gt; &amp; TableExpose
*/
const tableRef = ref&lt;typeof Table &amp; TableExpose&gt;()
const elTableRef = ref&lt;ComponentRef&lt;typeof ElTable&gt;&gt;()

const register = (ref: typeof Table &amp; TableExpose, elRef: ComponentRef&lt;typeof ElTable&gt;) =&gt; {
  tableRef.value = ref
  elTableRef.value = elRef
}
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li><code>typeof</code> è·å–ç±»å‹</li>
<li><code>&amp;</code> äº¤å‰ç±»å‹ï¼ˆåŒæ—¶æ»¡è¶³å¤šä¸ªç±»å‹ï¼‰</li>
<li><code>ComponentRef&lt;T&gt;</code> ç»„ä»¶å®ä¾‹ç±»å‹</li>
</ul>
<p>typeof ç”¨æ³•ï¼š</p>
<pre><code class="language-typescript">function createUser(name: string, age: number) {
  return {
    name,
    age,
    sayHello() {
      console.log(`Hi, I'm ${name}`)
    }
  }
}

type CreateUserFn = typeof createUser

const myCreateUser: CreateUserFn = (n, a) =&gt; {
  return { age: a, sayHello() {} }  // âŒ æŠ¥é”™ã€‚ç¼ºå°‘name
}
</code></pre>
<h2 id="ä¸ƒå¸¸è§ç±»å‹ä½¿ç”¨æŠ€å·§">ä¸ƒã€å¸¸è§ç±»å‹ä½¿ç”¨æŠ€å·§</h2>
<h3 id="71-ç±»å‹æ–­è¨€">7.1 ç±»å‹æ–­è¨€</h3>
<pre><code class="language-typescript">// æ–­è¨€ä¸ºç‰¹å®šç±»å‹
const value = someValue as string

// å…ˆæ–­è¨€ä¸º unknownï¼Œå†æ–­è¨€ä¸ºç›®æ ‡ç±»å‹
const data = res as unknown as ResponseType

// è¡¨å•æ•°æ®çš„ç±»å‹æ–­è¨€
/*
  - formData.value.idï¼šæŸä¸ªè¡¨å•æ•°æ®çš„ id å­—æ®µ
  - undefinedï¼šèµ‹çš„å€¼æ˜¯ undefined
  - as number | undefinedï¼šå‘Šè¯‰ TSï¼Œè¿™ä¸ª id çš„ç±»å‹æ˜¯ number | undefined

  å¦‚æœç›´æ¥å†™ï¼šformData.value.id = undefinedï¼ŒTS å¯èƒ½æ¨æ–­ id çš„ç±»å‹æ˜¯ undefinedï¼Œåé¢ä½ æƒ³ç»™å®ƒèµ‹æ•°å­—æ—¶ä¼šæŠ¥é”™

  å…¶å®ä¸ç”¨æ–­è¨€ï¼šid: number | undefined
*/
formData.value.id = undefined as number | undefined
</code></pre>
<h3 id="72-å¯é€‰é“¾å’Œç©ºå€¼åˆå¹¶">7.2 å¯é€‰é“¾å’Œç©ºå€¼åˆå¹¶</h3>
<pre><code class="language-typescript">// å¯é€‰é“¾ï¼š?.
treeRef.value?.filter(val)
config?.getListApi(params)

// ç©ºå€¼åˆå¹¶ï¼š??
const total = response.total ?? 0
const lang = wsCache.get(CACHE_KEY.LANG) || 'zh-CN'
</code></pre>
<h3 id="73-æ•°ç»„å’Œå¯¹è±¡çš„ç±»å‹">7.3 æ•°ç»„å’Œå¯¹è±¡çš„ç±»å‹</h3>
<pre><code class="language-typescript">// æ•°ç»„ç±»å‹
const list: string[] = []
const roles: number[] = [1, 2, 3]
const users: UserVO[] = []

// å¯¹è±¡ç±»å‹
const obj: { [key: string]: any } = {}
const params: Recordable = {}

// Map å’Œ Set
const map = new Map&lt;string, UserVO&gt;()
const set = new Set&lt;string&gt;()
</code></pre>
<h3 id="74-å‡½æ•°ç±»å‹">7.4 å‡½æ•°ç±»å‹</h3>
<pre><code class="language-typescript">// å‡½æ•°ç±»å‹å®šä¹‰
/*
  Callback æ˜¯ä¸€ä¸ªå‡½æ•°ç±»å‹ï¼Œè¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸€ä¸ª data å‚æ•°ï¼ˆä»»æ„ç±»å‹ï¼‰ï¼Œä¸è¿”å›ä»»ä½•å€¼
    - (data: any) =&gt; voidï¼šè¿™æ˜¯ä¸€ä¸ªå‡½æ•°ç±»å‹
    - ç¤ºä¾‹ï¼š
      type Callback = (data: any) =&gt; void

      // 1. å®šä¹‰ä¸€ä¸ªç¬¦åˆ Callback ç±»å‹çš„å‡½æ•°
      const handleSuccess: Callback = (data) =&gt; {
        console.log('æˆåŠŸ:', data)
      }
*/
type Callback = (data: any) =&gt; void
type ApiFunction = (params: any) =&gt; Promise&lt;any&gt;

// ç®­å¤´å‡½æ•°
const handleClick = (id: number): void =&gt; {
  console.log(id)
}

// async å‡½æ•°
const fetchData = async (id: number): Promise&lt;UserVO&gt; =&gt; {
  const res = await api.getUser(id)
  return res
}
</code></pre>
<h2 id="å…«é¡¹ç›®ä¸­çš„é«˜çº§-typescript-ç”¨æ³•">å…«ã€é¡¹ç›®ä¸­çš„é«˜çº§ TypeScript ç”¨æ³•</h2>
<h3 id="81-æ³›å‹çº¦æŸ">8.1 æ³›å‹çº¦æŸ</h3>
<pre><code class="language-typescript">// çº¦æŸæ³›å‹å¿…é¡»åŒ…å«æŸäº›å±æ€§
/*
  K extends keyof Tï¼šK å¿…é¡»æ˜¯ T çš„é”®ä¹‹ä¸€ã€‚
  - ä¸å®‰å…¨çš„å†™æ³•ï¼š
    function getPropertyUnsafe(obj: any, key: string) {
      return obj[key]  // è¿”å›å€¼ç±»å‹æ˜¯ anyï¼Œä¸å®‰å…¨
    }

    const value = getPropertyUnsafe(user, 'xxx')  // âœ… ä¸æŠ¥é”™ï¼Œä½†è¿è¡Œæ—¶å¯èƒ½ undefined
*/
function getProperty&lt;T, K extends keyof T&gt;(obj: T, key: K) {
  return obj[key]
}

// ä½¿ç”¨ç¤ºä¾‹
const user = { name: 'å¼ ä¸‰', age: 20 }
const name = getProperty(user, 'name') // OK
const gender = getProperty(user, 'gender') // é”™è¯¯ï¼šgender ä¸åœ¨ user ä¸­
</code></pre>
<h3 id="82-å·¥å…·ç±»å‹">8.2 å·¥å…·ç±»å‹</h3>
<pre><code class="language-typescript">// Partialï¼šæ‰€æœ‰å±æ€§å˜ä¸ºå¯é€‰
/*
  // åŸå§‹ç±»å‹
  interface UserVO {
    id: number
    name: string
  }

  // ä½¿ç”¨ Partial
  type PartialUser = Partial&lt;UserVO&gt;

  // ç­‰ä»·äºæ‰‹åŠ¨å†™ï¼š
  type PartialUser = {
    id?: number
    name?: string
  }
*/
type PartialUser = Partial&lt;UserVO&gt;

// Requiredï¼šæ‰€æœ‰å±æ€§å˜ä¸ºå¿…å¡«
type RequiredUser = Required&lt;UserVO&gt;

// Pickï¼šé€‰æ‹©éƒ¨åˆ†å±æ€§
type UserBasic = Pick&lt;UserVO, 'id' | 'username' | 'nickname'&gt;

// Omitï¼šæ’é™¤éƒ¨åˆ†å±æ€§
type UserWithoutPassword = Omit&lt;UserVO, 'password'&gt;

// Recordï¼šåˆ›å»ºå¯¹è±¡ç±»å‹
/*
  ä½¿ç”¨ TypeScript å†…ç½®å·¥å…·ç±»å‹ Record&lt;K, V&gt; åˆ›å»ºä¸€ä¸ª"é”®å€¼å¯¹æ˜ å°„"ç±»å‹
    - Record&lt;K, V&gt;ï¼šåˆ›å»ºä¸€ä¸ªå¯¹è±¡ç±»å‹
    - Record&lt;number, UserVO&gt;
    
  ç­‰ä»·äºæ‰‹åŠ¨å†™ï¼š
    type UserMap = {
      [key: number]: UserVO
    }

  ç¤ºä¾‹ï¼š
    interface UserVO {
      id: number
      name: string
      email: string
    }

    type UserMap = Record&lt;number, UserVO&gt;

    // ä½¿ç”¨
    const users: UserMap = {
      1: { id: 1, name: 'å¼ ä¸‰', email: 'zhang@example.com' },
      2: { id: 2, name: 'æå››', email: 'li@example.com' },
      100: { id: 100, name: 'ç‹äº”', email: 'wang@example.com' }
    }

    // è®¿é—®
    const user1 = users[1]      // UserVO ç±»å‹
    const user2 = users[2]      // UserVO ç±»å‹

    // âŒ é”®å¿…é¡»æ˜¯ number
    const invalid: UserMap = {
      'abc': { id: 1, name: 'å¼ ä¸‰', email: 'zhang@example.com' }  // æŠ¥é”™
    }
*/
type UserMap = Record&lt;number, UserVO&gt;
</code></pre>
<h3 id="83-æ¡ä»¶ç±»å‹">8.3 æ¡ä»¶ç±»å‹</h3>
<pre><code class="language-typescript">// æ ¹æ®æ¡ä»¶é€‰æ‹©ç±»å‹
type IsString&lt;T&gt; = T extends string ? true : false

// ä½¿ç”¨ç¤ºä¾‹
type A = IsString&lt;string&gt; // true
type B = IsString&lt;number&gt; // false

// é¡¹ç›®ä¸­çš„ä½¿ç”¨
type Recordable&lt;T = any, K = string&gt; = Record&lt;K extends null | undefined ? string : K, T&gt;
</code></pre>
<h3 id="84-æ¨¡æ¿å­—é¢é‡ç±»å‹">8.4 æ¨¡æ¿å­—é¢é‡ç±»å‹</h3>
<pre><code class="language-typescript">// åŠ¨æ€ç”Ÿæˆç±»å‹
type EventName = 'click' | 'change' | 'input'
// Capitalize&lt;T&gt; æ˜¯ TS å†…ç½®å·¥å…·ç±»å‹ï¼štype A = Capitalize&lt;'click'&gt;   // 'Click'
type EventHandler = `on${Capitalize&lt;EventName&gt;}`
// ç»“æœï¼š'onClick' | 'onChange' | 'onInput'
</code></pre>
<h2 id="ä¹å®æˆ˜æ¡ˆä¾‹">ä¹ã€å®æˆ˜æ¡ˆä¾‹</h2>
<h3 id="æ¡ˆä¾‹-1ç”¨æˆ·ç®¡ç†é¡µé¢">æ¡ˆä¾‹ 1ï¼šç”¨æˆ·ç®¡ç†é¡µé¢</h3>
<pre><code class="language-typescript">// src/views/system/user/index.vue
&lt;script lang="ts" setup&gt;
import * as UserApi from '@/api/system/user'
import * as CompanyApi from '@/api/system/company'

defineOptions({ name: 'SystemUser' })

const message = useMessage()
const { t } = useI18n()

// åˆ—è¡¨çŠ¶æ€
const loading = ref&lt;boolean&gt;(true)
const total = ref&lt;number&gt;(0)
const list = ref&lt;UserApi.UserVO[]&gt;([])
const companyTreeData = ref&lt;Tree[]&gt;([])

// æŸ¥è¯¢å‚æ•°
const queryParams = reactive({
  pageNo: 1,
  pageSize: 10,
  username: undefined as string | undefined,
  mobile: undefined as string | undefined,
  status: undefined as number | undefined,
  deptId: undefined as number | undefined,
  createTime: [] as Date[]
})

// è·å–ç”¨æˆ·åˆ—è¡¨
const getList = async () =&gt; {
  loading.value = true
  try {
    const data = await UserApi.getUserPage(queryParams)
    list.value = data.list
    total.value = data.total
  } finally {
    loading.value = false
  }
}

// åˆ é™¤ç”¨æˆ·
const handleDelete = async (id: number) =&gt; {
  await message.delConfirm()
  await UserApi.deleteUser(id)
  message.success(t('common.delSuccess'))
  await getList()
}

// ç»„ä»¶æŒ‚è½½ååŠ è½½æ•°æ®
onMounted(() =&gt; {
  getList()
})
&lt;/script&gt;
</code></pre>
<h3 id="æ¡ˆä¾‹-2è¡¨å•ç»„ä»¶">æ¡ˆä¾‹ 2ï¼šè¡¨å•ç»„ä»¶</h3>
<pre><code class="language-typescript">// src/views/system/user/UserForm.vue
&lt;script lang="ts" setup&gt;
import { FormRules } from 'element-plus'
import * as UserApi from '@/api/system/user'
import * as PostApi from '@/api/system/post'

const { t } = useI18n()
const message = useMessage()

// Props
const props = defineProps&lt;{
  companyTreeData?: any[]
  fixedCompany?: { name: string; pid: number } | null
}&gt;()

// Emits
const emits = defineEmits&lt;{
  (e: 'success'): void
}&gt;()

// è¡¨å•æ•°æ®
const formData = ref&lt;UserApi.UserVO&gt;({
  id: undefined,
  username: '',
  nickname: '',
  password: '',
  deptId: undefined,
  postIds: [],
  email: '',
  mobile: '',
  sex: undefined,
  status: 0
})

// è¡¨å•éªŒè¯è§„åˆ™
const formRules = reactive&lt;FormRules&gt;({
  username: [{ required: true, message: 'ç”¨æˆ·åä¸èƒ½ä¸ºç©º', trigger: 'blur' }],
  nickname: [{ required: true, message: '...', trigger: 'blur' }],
  password: [
    { required: true, message: 'å¯†ç ä¸èƒ½ä¸ºç©º', trigger: 'blur' },
    { min: 8, max: 16, message: '...', trigger: 'blur' }
  ],
  email: [
    { required: true, message: 'é‚®ç®±ä¸èƒ½ä¸ºç©º', trigger: 'blur' },
    { type: 'email', message: '...', trigger: 'blur' }
  ],
  mobile: [
    { required: true, message: 'æ‰‹æœºå·ä¸èƒ½ä¸ºç©º', trigger: 'blur' },
    { pattern: /^1[3-9]\d{9}$/, message: '...', trigger: 'blur' }
  ]
})

const formRef = ref()
const dialogVisible = ref&lt;boolean&gt;(false)
const formLoading = ref&lt;boolean&gt;(false)
const formType = ref&lt;'create' | 'update'&gt;('create')
const postList = ref&lt;PostApi.PostVO[]&gt;([])

// æ‰“å¼€è¡¨å•
const open = async (type: 'create' | 'update', id?: number) =&gt; {
  dialogVisible.value = true
  formType.value = type
  resetForm()

  if (id) {
    formLoading.value = true
    try {
      formData.value = await UserApi.getUser(id)
    } finally {
      formLoading.value = false
    }
  }

  // åŠ è½½å²—ä½åˆ—è¡¨
  postList.value = await PostApi.getSimplePostList()
}

// æäº¤è¡¨å•
const submitForm = async () =&gt; {
  const form = unref(formRef)
  if (!form) return

  await form.validate()
  formLoading.value = true
  try {
    const data = unref(formData)
    if (formType.value === 'create') {
      await UserApi.createUser(data)
      message.success(t('common.createSuccess'))
    } else {
      await UserApi.updateUser(data)
      message.success(t('common.updateSuccess'))
    }
    dialogVisible.value = false
    emits('success')
  } finally {
    formLoading.value = false
  }
}

// é‡ç½®è¡¨å•
const resetForm = () =&gt; {
  formData.value = {
    id: undefined,
    username: '',
    nickname: '',
    password: '',
    deptId: undefined,
    postIds: [],
    email: '',
    mobile: '',
    sex: undefined,
    status: 0
  }
  formRef.value?.resetFields()
}

defineExpose({ open })
&lt;/script&gt;
</code></pre>
<h3 id="æ¡ˆä¾‹-3pinia-store">æ¡ˆä¾‹ 3ï¼šPinia Store</h3>
<pre><code class="language-typescript">// src/store/modules/dict.ts
import { defineStore } from 'pinia'
import { store } from '../index'
import { DictDataVO } from '@/api/system/dict/types'
import { CACHE_KEY, useCache } from '@/hooks/web/useCache'
import { getSimpleDictDataList } from '@/api/system/dict/dict.data'

const { wsCache } = useCache('sessionStorage')

export interface DictValueType {
  value: any
  label: string
  clorType?: string
  cssClass?: string
}

export interface DictTypeType {
  dictType: string
  dictValue: DictValueType[]
}

export interface DictState {
  dictMap: Map&lt;string, any&gt;
  isSetDict: boolean
}

export const useDictStore = defineStore('dict', {
  state: (): DictState =&gt; ({
    dictMap: new Map&lt;string, any&gt;(),
    isSetDict: false
  }),

  getters: {
    getDictMap(): Recordable {
      const dictMap = wsCache.get(CACHE_KEY.DICT_CACHE)
      if (dictMap) {
        this.dictMap = dictMap
      }
      return this.dictMap
    },
    getIsSetDict(): boolean {
      return this.isSetDict
    }
  },

  actions: {
    async setDictMap() {
      const dictMap = wsCache.get(CACHE_KEY.DICT_CACHE)
      if (dictMap) {
        this.dictMap = dictMap
        this.isSetDict = true
      } else {
        const res = await getSimpleDictDataList()
        const dictDataMap = new Map&lt;string, any&gt;()

        res.forEach((dictData: DictDataVO) =&gt; {
          const enumValueObj = dictDataMap[dictData.dictType]
          if (!enumValueObj) {
            dictDataMap[dictData.dictType] = []
          }

          dictDataMap[dictData.dictType].push({
            value: dictData.value,
            label: dictData.label,
            colorType: dictData.colorType,
            cssClass: dictData.cssClass
          })
        })

        this.dictMap = dictDataMap
        this.isSetDict = true
        wsCache.set(CACHE_KEY.DICT_CACHE, dictDataMap, { exp: 60 })
      }
    },

    getDictByType(type: string) {
      if (!this.isSetDict) {
        this.setDictMap()
      }
      return this.dictMap[type]
    },

    async resetDict() {
      wsCache.delete(CACHE_KEY.DICT_CACHE)
      await this.setDictMap()
    }
  }
})

export const useDictStoreWithOut = () =&gt; {
  return useDictStore(store)
}
</code></pre>
<h2 id="åå¸¸è§é”™è¯¯å’Œè§£å†³æ–¹æ¡ˆ">åã€å¸¸è§é”™è¯¯å’Œè§£å†³æ–¹æ¡ˆ</h2>
<h3 id="é”™è¯¯-1ç±»å‹-xxx-ä¸Šä¸å­˜åœ¨å±æ€§-yyy">é”™è¯¯ 1ï¼šç±»å‹ "xxx" ä¸Šä¸å­˜åœ¨å±æ€§ "yyy"</h3>
<pre><code class="language-typescript">// é”™è¯¯ç¤ºä¾‹
const user = { name: 'å¼ ä¸‰' }
console.log(user.age) // é”™è¯¯ï¼šç±»å‹"{name: string}"ä¸Šä¸å­˜åœ¨å±æ€§"age"

// è§£å†³æ–¹æ¡ˆ 1ï¼šå®šä¹‰å®Œæ•´ç±»å‹
interface User {
  name: string
  age?: number // å¯é€‰å±æ€§
}
const user: User = { name: 'å¼ ä¸‰' }
console.log(user.age) // OK

// è§£å†³æ–¹æ¡ˆ 2ï¼šç±»å‹æ–­è¨€
console.log((user as any).age) // OKï¼Œä½†ä¸æ¨è
</code></pre>
<h3 id="é”™è¯¯-2ç±»å‹-undefined-ä¸èƒ½èµ‹å€¼ç»™ç±»å‹-xxx">é”™è¯¯ 2ï¼šç±»å‹ "undefined" ä¸èƒ½èµ‹å€¼ç»™ç±»å‹ "xxx"</h3>
<pre><code class="language-typescript">// é”™è¯¯ç¤ºä¾‹
const formData = ref&lt;UserVO&gt;({}) // é”™è¯¯

// è§£å†³æ–¹æ¡ˆï¼šå±æ€§è®¾ä¸ºå¯é€‰æˆ–æä¾›é»˜è®¤å€¼
const formData = ref&lt;Partial&lt;UserVO&gt;&gt;({}) // ä½¿ç”¨ Partial

// æˆ–è€…æä¾›å®Œæ•´é»˜è®¤å€¼
const formData = ref&lt;UserVO&gt;({
  id: undefined,
  username: '',
  nickname: ''
})
</code></pre>
<h3 id="é”™è¯¯-3å‚æ•°-xxx-éšå¼å…·æœ‰-any-ç±»å‹">é”™è¯¯ 3ï¼šå‚æ•° "xxx" éšå¼å…·æœ‰ "any" ç±»å‹</h3>
<pre><code class="language-typescript">// é”™è¯¯ç¤ºä¾‹
const handleClick = (item) =&gt; {
  // é”™è¯¯
  console.log(item.id)
}

// è§£å†³æ–¹æ¡ˆï¼šæ˜¾å¼æ ‡æ³¨ç±»å‹
const handleClick = (item: UserVO) =&gt; {
  console.log(item.id)
}
</code></pre>
<h3 id="é”™è¯¯-4æ— æ³•è°ƒç”¨å¯èƒ½æ˜¯-undefined-çš„å¯¹è±¡">é”™è¯¯ 4ï¼šæ— æ³•è°ƒç”¨å¯èƒ½æ˜¯ "undefined" çš„å¯¹è±¡</h3>
<pre><code class="language-typescript">// é”™è¯¯ç¤ºä¾‹
formRef.value.validate() // é”™è¯¯ï¼šå¯èƒ½æ˜¯ undefined

// è§£å†³æ–¹æ¡ˆ 1ï¼šå¯é€‰é“¾
formRef.value?.validate()

// è§£å†³æ–¹æ¡ˆ 2ï¼šåˆ¤æ–­åè°ƒç”¨
if (formRef.value) {
  formRef.value.validate()
}

// è§£å†³æ–¹æ¡ˆ 3ï¼šéç©ºæ–­è¨€ï¼ˆç¡®å®šä¸ä¸ºç©ºæ—¶ä½¿ç”¨ï¼‰
// æˆ‘å‘ TypeScript ä¿è¯ï¼šåœ¨è¿™é‡Œ formRef.value ä¸€å®šä¸æ˜¯ null æˆ– undefinedï¼Œä½ æ”¾å¿ƒå½“æˆéç©ºæ¥ç”¨ã€‚
formRef.value!.validate()
</code></pre>
<h2 id="åä¸€æœ€ä½³å®è·µæ€»ç»“">åä¸€ã€æœ€ä½³å®è·µæ€»ç»“</h2>
<h3 id="1-ç±»å‹å®šä¹‰åŸåˆ™">1. ç±»å‹å®šä¹‰åŸåˆ™</h3>
<ul>
<li>âœ… ä¼˜å…ˆä½¿ç”¨ <code>interface</code> å®šä¹‰å¯¹è±¡ç»“æ„</li>
<li>âœ… ä½¿ç”¨ <code>type</code> å®šä¹‰è”åˆç±»å‹ã€äº¤å‰ç±»å‹</li>
<li>âœ… ç®€å•ç±»å‹å¯ä»¥è®© TS è‡ªåŠ¨æ¨æ–­</li>
<li>âœ… å¤æ‚ç±»å‹æ˜ç¡®æ ‡æ³¨</li>
</ul>
<h3 id="2-api-å±‚">2. API å±‚</h3>
<ul>
<li>âœ… ä¸ºæ¯ä¸ªæ¥å£å®šä¹‰ VO/DTO ç±»å‹</li>
<li>âœ… API å‡½æ•°å‚æ•°å’Œè¿”å›å€¼æ ‡æ³¨ç±»å‹</li>
<li>âœ… ä½¿ç”¨ <code>async/await</code> å’Œ <code>Promise&lt;T&gt;</code></li>
</ul>
<h3 id="3-store-å±‚">3. Store å±‚</h3>
<ul>
<li>âœ… å®šä¹‰ Stateã€Gettersã€Actions çš„ç±»å‹</li>
<li>âœ… ä½¿ç”¨ <code>interface</code> å®šä¹‰ State ç»“æ„</li>
<li>âœ… Getters æ˜ç¡®è¿”å›ç±»å‹</li>
<li>âœ… Actions å‚æ•°æ ‡æ³¨ç±»å‹</li>
</ul>
<h3 id="4-views-å±‚">4. Views å±‚</h3>
<ul>
<li>âœ… ä½¿ç”¨ <code>ref&lt;T&gt;()</code> æˆ– <code>reactive&lt;T&gt;()</code> æ ‡æ³¨ç±»å‹</li>
<li>âœ… <code>defineProps&lt;{}&gt;()</code> å®šä¹‰ Props ç±»å‹</li>
<li>âœ… <code>defineEmits&lt;{}&gt;()</code> å®šä¹‰ Emits ç±»å‹</li>
<li>âœ… ä½¿ç”¨ <code>FormRules</code> å®šä¹‰è¡¨å•éªŒè¯</li>
</ul>
<h3 id="5-å·¥å…·å‡½æ•°">5. å·¥å…·å‡½æ•°</h3>
<ul>
<li>âœ… å‚æ•°å’Œè¿”å›å€¼éƒ½è¦æ ‡æ³¨ç±»å‹</li>
<li>âœ… å¤æ‚å‡½æ•°ä½¿ç”¨æ³›å‹</li>
<li>âœ… è”åˆç±»å‹å¤„ç†å¤šç§è¾“å…¥</li>
</ul>
<h3 id="6-é”™è¯¯å¤„ç†">6. é”™è¯¯å¤„ç†</h3>
<ul>
<li>âœ… ä½¿ç”¨å¯é€‰é“¾ <code>?.</code> é¿å… undefined é”™è¯¯</li>
<li>âœ… ä½¿ç”¨ç©ºå€¼åˆå¹¶ <code>??</code> æä¾›é»˜è®¤å€¼</li>
<li>âœ… é€‚æ—¶ä½¿ç”¨ç±»å‹æ–­è¨€ <code>as</code></li>
<li>âš ï¸ é¿å…è¿‡åº¦ä½¿ç”¨ <code>any</code></li>
</ul>
<h2 id="é™„å½•å¸¸ç”¨ç±»å‹é€ŸæŸ¥è¡¨">é™„å½•ï¼šå¸¸ç”¨ç±»å‹é€ŸæŸ¥è¡¨</h2>
<table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>è¯´æ˜</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>string</code></td>
<td>å­—ç¬¦ä¸²</td>
<td><code>const name: string = 'å¼ ä¸‰'</code></td>
</tr>
<tr>
<td><code>number</code></td>
<td>æ•°å­—</td>
<td><code>const age: number = 20</code></td>
</tr>
<tr>
<td><code>boolean</code></td>
<td>å¸ƒå°”å€¼</td>
<td><code>const loading: boolean = true</code></td>
</tr>
<tr>
<td><code>array</code></td>
<td>æ•°ç»„</td>
<td><code>const list: string[] = []</code></td>
</tr>
<tr>
<td><code>object</code></td>
<td>å¯¹è±¡</td>
<td><code>const obj: { id: number } = { id: 1 }</code></td>
</tr>
<tr>
<td><code>any</code></td>
<td>ä»»æ„ç±»å‹</td>
<td><code>const data: any = {}</code></td>
</tr>
<tr>
<td><code>unknown</code></td>
<td>æœªçŸ¥ç±»å‹</td>
<td><code>const data: unknown = {}</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td>æ— è¿”å›å€¼</td>
<td><code>const fn = (): void =&gt; {}</code></td>
</tr>
<tr>
<td><code>null</code></td>
<td>ç©º</td>
<td><code>const data: null = null</code></td>
</tr>
<tr>
<td><code>undefined</code></td>
<td>æœªå®šä¹‰</td>
<td><code>const data: undefined = undefined</code></td>
</tr>
<tr>
<td><code>never</code></td>
<td>æ°¸ä¸è¿”å›</td>
<td><code>const fn = (): never =&gt; { throw new Error() }</code></td>
</tr>
<tr>
<td><code>Promise&lt;T&gt;</code></td>
<td>Promise</td>
<td><code>const fn = (): Promise&lt;string&gt; =&gt; {}</code></td>
</tr>
<tr>
<td><code>Ref&lt;T&gt;</code></td>
<td>Vue Ref</td>
<td><code>const count = ref&lt;number&gt;(0)</code></td>
</tr>
<tr>
<td><code>ComputedRef&lt;T&gt;</code></td>
<td>Vue Computed</td>
<td><code>const double = computed&lt;number&gt;(() =&gt; count.value * 2)</code></td>
</tr>
<tr>
<td><code>Nullable&lt;T&gt;</code></td>
<td>å¯ç©ºç±»å‹</td>
<td><code>const id: Nullable&lt;number&gt; = null</code></td>
</tr>
<tr>
<td><code>Recordable</code></td>
<td>å¯¹è±¡</td>
<td><code>const obj: Recordable = {}</code></td>
</tr>
<tr>
<td><code>PageParam</code></td>
<td>åˆ†é¡µå‚æ•°</td>
<td><code>const params: PageParam = { pageNo: 1, pageSize: 10 }</code></td>
</tr>
</tbody>
</table>
<p><strong>ç»“æŸè¯­</strong></p>
<p>æœ¬æ–‡æ¡£è¦†ç›–äº†é¡¹ç›®ä¸­ <code>ç»å¤§å¤šæ•°</code> çš„ TypeScript ä½¿ç”¨åœºæ™¯ã€‚å»ºè®®ï¼š</p>
<ol>
<li>å…ˆç†è§£åŸºç¡€æ¦‚å¿µï¼ˆinterfaceã€typeã€æ³›å‹ï¼‰</li>
<li>åœ¨å®é™…ç¼–å†™ä»£ç æ—¶å‚è€ƒå¯¹åº”ç« èŠ‚</li>
<li>é‡åˆ°é”™è¯¯æ—¶æŸ¥çœ‹"å¸¸è§é”™è¯¯å’Œè§£å†³æ–¹æ¡ˆ"</li>
<li>å¤šçœ‹é¡¹ç›®ä»£ç ï¼Œæ¨¡ä»¿å­¦ä¹ </li>
</ol>
<p>TypeScript çš„æ ¸å¿ƒæ˜¯<strong>ç±»å‹å®‰å…¨</strong>ï¼Œåˆç†ä½¿ç”¨ç±»å‹å¯ä»¥ï¼š</p>
<ul>
<li>âœ… å‡å°‘è¿è¡Œæ—¶é”™è¯¯</li>
<li>âœ… æå‡ä»£ç å¯ç»´æŠ¤æ€§</li>
<li>âœ… æä¾›æ›´å¥½çš„ IDE æ™ºèƒ½æç¤º</li>
<li>âœ… è®©ä»£ç æ›´åŠ è§„èŒƒ</li>
</ul>

</div>
<div id="MySignature" role="contentinfo">
    <section class="m-reprintStatement" style="white-space:normal;/* é˜²æ­¢break-allä¸nowrapçŸ›ç›¾ */word-break:break-all;">
    ä½œè€…ï¼š<a href="https://www.cnblogs.com/pengjiali/" target="_blank">å½­åŠ æ</a><br>
    å‡ºå¤„ï¼š<a href="https://www.cnblogs.com/pengjiali/p/19387524" target="_blank">https://www.cnblogs.com/pengjiali/p/19387524</a><br>
    æœ¬æ–‡ç‰ˆæƒå½’ä½œè€…å’Œåšå®¢å›­å…±æœ‰,æ¬¢è¿è½¬è½½,ä½†æœªç»ä½œè€…åŒæ„å¿…é¡»ä¿ç•™æ­¤æ®µå£°æ˜,ä¸”åœ¨æ–‡ç« é¡µé¢æ˜æ˜¾ä½ç½®ç»™å‡ºåŸæ–‡è¿æ¥ã€‚
</section>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-23 18:31">2025-12-23 18:31</span>&nbsp;
<a href="https://www.cnblogs.com/pengjiali">å½­åŠ æ</a>&nbsp;
é˜…è¯»(<span id="post_view_count">7</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19387524);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19387524', targetLink: 'https://www.cnblogs.com/pengjiali/p/19387524', title: 'å‰ç«¯ TypeScript å…¥é—¨2' })">ä¸¾æŠ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ æŠ€æœ¯ç®¡ç†ï¼šäº§å“ç»ç†PMå’ŒæŠ€æœ¯å¼€å‘äººå‘˜RDä¹‹é—´å¸¸è§çš„çŸ›ç›¾æœ‰å“ªäº› ]]></title>
    <link>https://www.cnblogs.com/jiujuan/p/19388306</link>
    <guid>5d55360566c0e669469b2b49ea69fd28</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/jiujuan/p/19388306" title="å‘å¸ƒäº 2025-12-23 17:35">
    <span role="heading" aria-level="2">æŠ€æœ¯ç®¡ç†ï¼šäº§å“ç»ç†PMå’ŒæŠ€æœ¯å¼€å‘äººå‘˜RDä¹‹é—´å¸¸è§çš„çŸ›ç›¾æœ‰å“ªäº›</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>äº§å“ç»ç†PMå’ŒæŠ€æœ¯å¼€å‘äººå‘˜RDä¹‹é—´å¸¸è§çš„çŸ›ç›¾æœ‰å“ªäº›ï¼ŒåŠä¸€äº›è§£å†³æ–¹æ³•ç®€ä»‹ã€‚</p>
<h2 id="ä¸€éœ€æ±‚é¢‘ç¹å˜æ›´">ä¸€ï¼šéœ€æ±‚é¢‘ç¹å˜æ›´</h2>
<p>åœ¨è½¯ä»¶äº§å“å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå˜æ›´ä¸€äº›éœ€æ±‚æ˜¯æ— æ³•é¿å…çš„ï¼Œä½†é¢‘ç¹çš„éœ€æ±‚å˜æ›´ï¼Œä¸ä»…è®©å¼€å‘å›¢é˜Ÿç–²äºåº”å¯¹ä¸æ–­å˜åŒ–çš„éœ€æ±‚ï¼Œä¸¥é‡å½±å“é¡¹ç›®å®Œæˆçš„è¿›åº¦ï¼Œè¿˜ä¼šå½±å“å¼€å‘å›¢é˜Ÿäººå‘˜çš„å£«æ°”ã€‚</p>
<p>åœ¨å‰é¢çš„<a href="https://www.cnblogs.com/jiujuan/p/18794416" target="_blank">æ–‡ç« </a>ä¸­ä¹Ÿè®¨è®ºè¿‡ä¸€äº›éœ€æ±‚é¢‘ç¹å˜æ›´çš„æƒ…å†µå’Œå¤„ç†çš„ç®€è¦æ–¹æ³•ã€‚</p>
<p>ä¸‹é¢è¿›è¡Œéœ€æ±‚é¢‘ç¹å˜æ›´çš„åŸå› è¯¦ç»†åˆ†æã€‚</p>
<ol>
<li><strong>éœ€æ±‚ç®¡ç†æ··ä¹±</strong></li>
</ol>
<p>äº§å“ç»ç†å¯¹äºéœ€æ±‚çš„ç®¡ç†å¾ˆæ··ä¹±ï¼Œæ²¡æœ‰ä¸€ä¸ªç»Ÿä¸€çš„æ ‡å‡†ï¼Œé›†ä¸­ç®¡ç†éœ€æ±‚çš„åœ°æ–¹ï¼Œæ¯”å¦‚ç”¨æŸä¸€ä¸ªè½¯ä»¶æˆ–å·¥å…·æ¥å»ºç«‹éœ€æ±‚æ± ï¼Œå¹¶åˆ†é—¨åˆ«ç±»ï¼Œé‡è¦ç¨‹åº¦ç­‰è¿›è¡Œåˆ†ç±»ç®¡ç†ã€‚</p>
<ol start="2">
<li><strong>é¢†å¯¼ã€è€æ¿æƒ³æ³•å˜äº†</strong></li>
</ol>
<p>é¢†å¯¼æˆ–è€æ¿çš„æƒ³æ³•è·³è·ƒï¼Œæ—©ä¸Šçœ‹äº†ä¸€ä¸ª App çš„åŠŸèƒ½è§‰å¾—å¥½ï¼Œä¸‹åˆå°±è®©å›¢é˜ŸåŠ ä¸Šã€‚æˆ–è€…è€æ¿ç›´æ¥å¹²é¢„ç»†èŠ‚ï¼šâ€œè¿™ä¸ªæŒ‰é’®é¢œè‰²æˆ‘ä¸å–œæ¬¢ï¼Œæ”¹ä¸€ä¸‹â€ï¼ŒåŠ å¡éœ€æ±‚ã€‚</p>
<p>æˆ–è€…ï¼Œå®ƒä»¬çªç„¶æƒ³åˆ°äº†ä¸€ä¸ªå¥½çš„æƒ³æ³•æˆ–åŠŸèƒ½ï¼Œè¦æ±‚é©¬ä¸Šå®ç°ã€‚</p>
<ol start="3">
<li><strong>å¸‚åœºç«äº‰ç¯å¢ƒå˜äº†</strong></li>
</ol>
<p>å…¬å¸çªç„¶å‘ç°ç«äº‰å¯¹æ‰‹çš„äº§å“ä¸Šçº¿äº†ä¸€ä¸ªæ€æ‰‹çº§åŠŸèƒ½ï¼Œæˆ–è€…æ”¹å˜äº†è¡¥è´´ç­–ç•¥ï¼Œæˆ‘å¸å¿…é¡»ç«‹å³è·Ÿè¿›ï¼Œå¦åˆ™ä¼šæµå¤±å¤§é‡ç”¨æˆ·ã€‚</p>
<p>è¿™ç§éœ€æ±‚å˜æ›´ç¡®å®æ˜¯ç´§æ€¥ã€ä¼˜å…ˆçº§é«˜çš„éœ€æ±‚ã€‚</p>
<p>è¿˜æœ‰æ¢ç´¢å‹çš„é¡¹ç›®ï¼Œéœ€æ±‚é¢‘ç¹å˜æ›´ä¸å¯é¿å…ã€‚éœ€è¦ä¸æ–­çš„æ¢ç´¢æ¥åŠ æ·±å¯¹ç”¨æˆ·ã€å¯¹å¸‚åœºçš„è®¤çŸ¥ã€‚æœ‰ä¸€ä¸ªè®¤çŸ¥å¾ªç¯ï¼Œä¸æ–­åŠ æ·±çš„è¿‡ç¨‹ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯ç²¾ç›Šåˆ›ä¸šçš„ä¸€ä¸ªè¿‡ç¨‹ã€‚MVP -&gt; åº¦é‡ -&gt; åé¦ˆï¼Œç„¶åè¿›è¡Œä¼˜åŒ–ï¼Œç„¶åå¾ªç¯ã€‚</p>
<ol start="4">
<li><strong>ç”¨æˆ·åé¦ˆä¸æ•°æ®éªŒè¯</strong></li>
</ol>
<p>äº§å“åŠŸèƒ½ä¸Šçº¿ç°åº¦æµ‹è¯•åï¼Œå‘ç°æ•°æ®æƒ¨æ·¡ï¼Œæˆ–è€…ç”¨æˆ·åé¦ˆæå·®ã€‚åŸæ¥çš„å‡è®¾è¢«æ¨ç¿»ï¼Œå¿…é¡»ç«‹å³è°ƒæ•´äº¤äº’æˆ–é€»è¾‘ã€‚</p>
<p>è¿™ç§åŸºäºæ•°æ®æˆ–ç”¨æˆ·åé¦ˆçš„éœ€æ±‚å˜æ›´ï¼Œæ˜¯æœ‰å¿…è¦çš„ã€‚</p>
<p>è¿™ç§åœ¨åˆ›ä¸šå…¬å¸åˆæœŸ MVP éªŒè¯é˜¶æ®µç”¨çš„å¾ˆå¤šï¼Œå¯èƒ½ä¸€ä¸ª APP çš„æ–¹å‘è¦æ”¹å¾ˆå¤šæ¬¡ï¼Œæ‰èƒ½æ‰¾åˆ°åˆé€‚çš„ PMF ã€‚è¿™ç§æƒ…å†µéœ€æ±‚å˜æ›´æ˜¯æ— æ³•é¿å…çš„ã€‚</p>
<p>å…¶å®ï¼Œè¿™ä¹Ÿæ˜¯æ•æ·å¼€å‘çš„åˆå¿ƒã€‚</p>
<ol start="5">
<li><strong>PM è€ƒè™‘éœ€æ±‚åœºæ™¯ä¸å…¨</strong></li>
</ol>
<p>äº§å“ç»ç†åœ¨ç¼–å†™éœ€æ±‚æ–‡æ¡£çš„æ—¶å€™ï¼Œåªè€ƒè™‘äº†éƒ¨åˆ†åœºæ™¯éœ€æ±‚ï¼Œæ²¡æœ‰è€ƒè™‘å…¨æ‰€æœ‰åœºæ™¯çš„éœ€æ±‚ã€‚æˆ–è€…åªè€ƒè™‘äº†æ­£å¸¸çš„æµç¨‹ï¼Œæ²¡æœ‰è€ƒè™‘å…¨å¼‚å¸¸çš„æµç¨‹ã€‚</p>
<p>å½“å¼€å‘äººå‘˜ç¼–å†™ä»£ç æ—¶å€™ï¼Œå¯èƒ½ä¼šå¯Ÿè§‰éœ€æ±‚æ–‡æ¡£æè¿°éœ€æ±‚ä¸å…¨ã€‚ ç­‰ç­‰è¿™äº›éƒ½ä¼šå¯¼è‡´éœ€æ±‚å˜æ›´ã€‚</p>
<ol start="6">
<li><strong>ä¸šåŠ¡æˆ–å¸‚åœºåŠ éœ€æ±‚</strong></li>
</ol>
<p>ä¸šåŠ¡éƒ¨é—¨æˆ–å¸‚åœºéƒ¨é—¨æ—¶ä¸æ—¶çš„åŠ ä¸€äº›éœ€æ±‚è¿›æ¥ã€‚</p>
<h3 id="è§£å†³æ–¹æ³•">è§£å†³æ–¹æ³•</h3>
<ul>
<li>
<p>ç”¨å¯è§†åŒ–æ’æœŸçœ‹æ¿ï¼Œè®©ç›¸å…³æ–¹çœ‹åˆ°éœ€æ±‚å˜æ›´çš„å½±å“</p>
</li>
<li>
<p>é‡è¦çš„éœ€æ±‚å˜æ›´ï¼Œéœ€è¦éœ€æ±‚è¯„å®¡å§”å‘˜ä¼šè¯„å®¡ï¼Œè¯„å®¡å˜æ›´æµç¨‹</p>
</li>
<li>
<p>å»ºç«‹éœ€æ±‚å˜æ›´å½±å“è¯„ä¼°æœºåˆ¶ï¼ˆæ—¶é—´ / é£é™© / æˆæœ¬ / éœ€è¦ç‰ºç‰²çš„åˆ©ç›Šï¼‰</p>
</li>
<li>
<p>æ•æ·å¼€å‘æ¨¡å¼ï¼Œæ¯”å¦‚ scrum ï¼Œkanban ç­‰å¼€å‘æ–¹æ³•ã€‚</p>
</li>
<li>
<p>äº§å“ç»ç†å¤šæ€è€ƒä¸€ä¸‹åæµç¨‹æ€ä¹ˆåŠï¼Œå‡ºç°å¼‚å¸¸æ€ä¹ˆåŠã€‚ æ‰€æœ‰éœ€æ±‚è¦ç»è¿‡äº§å“ç»ç†è¿‡æ»¤å’Œä¼˜åŒ–ã€‚</p>
</li>
</ul>
<p>å¯ä»¥ç”¨ scrumï¼Œkanbanï¼Œç²¾ç›Šäº§å“å¼€å‘æ–¹æ³•æ¥è§£å†³ã€‚</p>
<h2 id="äºŒéœ€æ±‚æ¨¡ç³Šä¸æ¸…æ™°">äºŒï¼šéœ€æ±‚æ¨¡ç³Šã€ä¸æ¸…æ™°</h2>
<p>äº§å“ç»ç†å¯èƒ½ç”¨æŠ½è±¡æè¿°ä»£æ›¿å…·ä½“è§„åˆ™ï¼ˆå¦‚â€œç”¨æˆ·ä½“éªŒè¦æµç•…â€â€œæŒ‰é’®è¦æ˜¾çœ¼â€ï¼‰ï¼Œæˆ–æœªæ˜ç¡®è¾¹ç•Œæ¡ä»¶ï¼ˆå¦‚â€œæ”¯ä»˜å¤±è´¥æ—¶çš„æç¤ºè¯­â€ï¼‰ã€‚ä¾‹å¦‚ï¼š<br>
éœ€æ±‚æ–‡æ¡£ä»…å†™â€œæ”¯æŒæ‰¹é‡å¯¼å…¥æ•°æ®â€ï¼Œä½†æœªè¯´æ˜æ–‡ä»¶æ ¼å¼ã€å¤§å°é™åˆ¶ã€é”™è¯¯æ ¡éªŒè§„åˆ™ï¼›</p>
<p>éœ€æ±‚æè¿°ä¸æ¸…æ™°ï¼Œå¼€å‘äººå‘˜å°±éœ€è¦åå¤è¿½é—®ç»†èŠ‚ï¼ŒçŒœæµ‹äº§å“ç»ç†çš„æ„å›¾ï¼Œæœ€ç»ˆå®ç°æ•ˆæœå¯èƒ½ä¸é¢„æœŸä¸ç¬¦ã€‚</p>
<p>ä¸‹é¢è¿›è¡Œè¯¦ç»†åŸå› åˆ†æã€‚</p>
<ol>
<li><strong>ä¸€å¥è¯éœ€æ±‚æˆ–äº§å“ç»ç†æ²¡æƒ³æ¸…æ¥š</strong></li>
</ol>
<p>ä¸€å¥è¯éœ€æ±‚ï¼Œè€æ¿ã€ä¸šåŠ¡éƒ¨é—¨ç­‰ç­‰ç›¸å…³éƒ¨é—¨æˆ–äººå‘˜æçš„ä¸€å¥è¯éœ€æ±‚ï¼Œæ¯”å¦‚ â€œå¤§æ¦‚å°±æ˜¯è¿™ä¸ªæ„æ€â€ï¼Œâ€œå…ˆåšå‡ºæ¥çœ‹çœ‹â€ï¼Œâ€œéœ€è¦ä¸€ä¸ªç»Ÿè®¡åŠŸèƒ½â€ ç­‰è¯è¯­ã€‚</p>
<p>è€æ¿æˆ–ä¸šåŠ¡éƒ¨é—¨æŠŠè¿™ç§ä¸€å¥è¯çš„æ¨¡ç³Šæƒ³æ³•å½“æˆäº†å¼€å‘äººå‘˜èƒ½æ‰§è¡Œçš„å¼€å‘éœ€æ±‚ã€‚</p>
<p>ä»éœ€æ±‚åˆ°å¼€å‘ï¼Œè¿™ä¸­é—´æœ‰ä¸€äº›æ­¥éª¤å’Œæµç¨‹ï¼Œå†æ€ä¹ˆçœç•¥ä¸­é—´æ­¥éª¤ï¼Œä¹Ÿè¦ç»è¿‡äº§å“ç»ç†æŠŠè¿™æ ·çš„ä¸€å¥è¯éœ€æ±‚å†™å‡ºä¸€ä¸ªå¯ä¾›å¼€å‘æ‰§è¡Œçš„å¼€å‘éœ€æ±‚ã€‚</p>
<blockquote>
<p>ç”¨æˆ·éœ€æ±‚ï¼ˆç”¨æˆ·ï¼‰ -&gt; äº§å“åŠŸèƒ½éœ€æ±‚ï¼ˆäº§å“ç»ç†ï¼‰ -&gt; å¯æ‰§è¡Œçš„å¼€å‘éœ€æ±‚ï¼ˆæŠ€æœ¯å¼€å‘ï¼‰ã€‚</p>
</blockquote>
<p>å¯¹äºä¸€ä¸ªéœ€æ±‚ï¼Œäº§å“ç»ç†è¦è€ƒè™‘ï¼š</p>
<ul>
<li>ç”¨æˆ·çš„æœ¬è´¨é—®é¢˜æ˜¯ä»€ä¹ˆ - åˆ†ææœ¬è´¨é—®é¢˜</li>
<li>äº§å“ç›®æ ‡ - è¦è§£å†³ç”¨æˆ·ä»€ä¹ˆé—®é¢˜</li>
<li>å®ç°æ–¹æ¡ˆ - æ€ä¹ˆè§£å†³</li>
</ul>
<ol start="2">
<li><strong>æŠŠç”¨æˆ·è¯´çš„æ–¹æ¡ˆæˆ–ç›®æ ‡å½“æˆéœ€æ±‚</strong></li>
</ol>
<p>æœ€è‘—åçš„ä¸€ä¸ªä¾‹å­å°±æ˜¯ç¦ç‰¹é€ è½¦çš„ä¾‹å­ã€‚åœ¨å½“æ—¶çš„æ—¶ç©ºç¯å¢ƒä¸‹ï¼Œé—®ä¸€ä¸ªäººæ›´å¥½çš„äº¤é€šå·¥å…·æ—¶æ˜¯ä»€ä¹ˆï¼Ÿç”¨æˆ·ä¼šå›ç­”ï¼šæ›´å¿«çš„é©¬è½¦ã€‚ç”¨æˆ·ä¸ºä»€ä¹ˆä¼šè¿™æ ·å›ç­”ï¼Ÿå› ä¸ºå½“æ—¶å¾ˆå¤šäººæ²¡è§è¿‡æ±½è½¦ï¼Œä½†æ˜¯è§è¿‡é©¬è½¦ã€‚</p>
<p>â€œæ›´å¿«çš„é©¬è½¦â€ï¼Œå…¶å®æ˜¯ä¸€ä¸ªæ–¹æ¡ˆã€‚è¿™ä¸æ˜¯ä¸€ä¸ªéœ€æ±‚ï¼Œå¦‚æœå½“æˆäº†éœ€æ±‚ï¼Œé‚£ä¹ˆç¦ç‰¹å°±ä¼šå»é€ æ›´å¿«çš„é©¬è½¦è€Œä¸ä¼šé€ ç¦ç‰¹æ±½è½¦ã€‚</p>
<p>é‚£ç”¨æˆ·çš„æœ¬è´¨éœ€æ±‚æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>æ˜¯ä» A åœ°å¿«é€Ÿçš„ç§»åŠ¨åˆ° B åœ°ã€‚æ˜¯å¿«é€Ÿæ–¹ä¾¿çš„åˆ°è¾¾ç›®çš„åœ°ã€‚é©¬è½¦åªæ˜¯å…¶ä¸­ä¸€ç§äº¤é€šå·¥å…·ï¼ŒåŠæ˜¯ä¸€ç§æ»¡è¶³ç”¨æˆ·éœ€æ±‚çš„æ–¹æ¡ˆã€‚è€Œæ±½è½¦æ˜¯ä¸€ç§åˆ›æ–°çš„æ–¹æ¡ˆï¼Œæ›´å¥½çš„æ–¹æ¡ˆã€‚</p>
<p>æˆ‘ä»¬è¦ä»”ç»†æ€è€ƒç”¨æˆ·çš„æœ¬è´¨éœ€æ±‚æ˜¯ä»€ä¹ˆï¼Ÿè€Œä¸å…‰å¬ç”¨æˆ·è¯´ã€‚</p>
<p>æ²¡æœ‰æ»¡è¶³æœ¬è´¨éœ€æ±‚çš„å¥½æ–¹æ¡ˆï¼Œå¯èƒ½ä¼šå¯¼è‡´æ–¹æ¡ˆä¿®æ”¹å¢å¤šã€‚</p>
<ol start="3">
<li><strong>è¾¹ç•Œæ¡ä»¶å’Œå¼‚å¸¸æƒ…å†µæœªå®šä¹‰</strong></li>
</ol>
<p>äº§å“ç»ç†åªå…³æ³¨äº†ä¸»æµç¨‹ï¼Œå¯¹äºä¸€äº›å¼‚å¸¸æƒ…å†µæˆ–è¾¹ç•Œæ¡ä»¶ï¼Œæœªè€ƒè™‘åˆ°ã€‚</p>
<p>äº§å“ç»ç†çš„æ€ç»´è¦å…»æˆå¥½ä¹ æƒ¯ï¼Œè¦è€ƒè™‘æ­£å¸¸çš„æµç¨‹ï¼ŒåŒæ—¶ä¹Ÿè¦è€ƒè™‘å¼‚å¸¸æƒ…å†µçš„æµç¨‹ã€‚</p>
<h3 id="è§£å†³æ–¹æ³•-1">è§£å†³æ–¹æ³•</h3>
<ol>
<li><strong>æ ‡å‡†åŒ–éœ€æ±‚ç»“æ„æˆ–æ¨¡æ¿</strong></li>
</ol>
<p>æ ‡å‡†åŒ–éœ€æ±‚æœ€å°ç»“æ„ï¼š1ã€ç›®æ ‡&amp;èƒŒæ™¯ 2ã€ç”¨æˆ·åœºæ™¯ 3ã€æ ¸å¿ƒè§„åˆ™ 4ã€è¾¹ç•Œ&amp;å¼‚å¸¸ 5ã€éªŒæ”¶æ ‡å‡†</p>
<ol start="2">
<li><strong>ç”¨æˆ·æ•…äº‹æ¢³ç†éœ€æ±‚</strong></li>
</ol>
<p>ä¸€ä¸ªå®Œæ•´çš„ç”¨æˆ·æ•…äº‹ï¼Œåº”è¯¥åŒ…å«ä¸‰éƒ¨åˆ†å†…å®¹ï¼šç”¨æˆ·ã€åŠŸèƒ½ã€ä»·å€¼ã€‚</p>
<ul>
<li>ç”¨æˆ·ï¼šæ˜¯è°è¦ç”¨è¿™ä¸ªåŠŸèƒ½ï¼›</li>
<li>åŠŸèƒ½ï¼šå…·ä½“æ˜¯ä»€ä¹ˆåŠŸèƒ½ï¼›</li>
<li>ä»·å€¼ï¼šé€šè¿‡è¿™ä¸ªåŠŸèƒ½ï¼Œç”¨æˆ·èƒ½è·å¾—ä»€ä¹ˆä»·å€¼ï¼›</li>
</ul>
<p>æœ€åç”¨ç”¨æˆ·æ•…äº‹åœ°å›¾ä¸²è”èµ·æ¥æ‰€æœ‰çš„ç”¨æˆ·æ•…äº‹ã€‚ç”¨ç”¨æˆ·æ•…äº‹åœ°å›¾å¸®åŠ©æˆ‘ä»¬ç¡®å®šç›®æ ‡ç”¨æˆ·ã€éœ€æ±‚çš„èŒƒå›´ã€äº§å“ä»·å€¼å’Œéœ€æ±‚ä¼˜å…ˆçº§ã€‚æ›´æ·±åˆ»çš„ç†è§£ç”¨æˆ·éœ€æ±‚ã€‚</p>
<ol start="3">
<li><strong>ç”¨ä¾‹ï¼ˆUse Caseï¼‰åˆ†æéœ€æ±‚</strong></li>
</ol>
<p>ç”¨ä¾‹æ˜¯ä¸€ç§æè¿°éœ€æ±‚çš„æ–¹æ³•ï¼Œç”¨ä¾‹æè¿°äº†åœ¨ä¸åŒçš„æ¡ä»¶ä¸‹ï¼Œç³»ç»Ÿå¯¹å‚ä¸è€…çš„è¯·æ±‚åšå‡ºçš„å“åº”ã€‚ç”¨ä¾‹é€šå¸¸é€šè¿‡ä¸€ä¸ªå‚ä¸è€…ï¼ˆActorï¼‰ï¼ˆè°ï¼Ÿï¼‰å‘ç³»ç»Ÿåšå‡ºè¯·æ±‚ï¼ˆè¦åšä»€ä¹ˆï¼Ÿï¼‰ï¼Œç³»ç»Ÿæ ¹æ®å‚ä¸è€…çš„è¯·æ±‚ï¼Œåœ¨ä¸åŒçš„æ¡ä»¶ä¸‹ï¼Œæ‰§è¡ŒæŸä¸€è¡Œä¸ºåºåˆ—ï¼ˆç³»ç»Ÿæ€ä¹ˆæ»¡è¶³ï¼Ÿï¼‰ã€‚</p>
<p>æ¯ä¸€ä¸ªè¡Œä¸ºåºåˆ—å¯ä»¥ç§°ä¹‹ä¸ºä¸€ä¸ªåœºæ™¯ï¼ˆScenarioï¼‰ï¼Œä¸€ä¸ªç”¨ä¾‹åŒ…å«å¤šä¸ªåœºæ™¯ã€‚åœºæ™¯ä¹Ÿå¯ä»¥ç§°ä¹‹ä¸ºç”¨ä¾‹çš„ä¸€ä¸ªå®ä¾‹ï¼ˆInstanceï¼‰ã€‚</p>
<ol start="4">
<li><strong>éœ€æ±‚è¯„å®¡</strong></li>
</ol>
<p>éœ€æ±‚è¯„å®¡å§”å‘˜ä¼šå¯¹éœ€æ±‚è¿›è¡Œè¯„å®¡ã€‚</p>
<p>ä¸Šé¢2å¤§ç±»å°±æ˜¯å¯¹éœ€æ±‚çš„åˆ†ç±»å’Œæ€ä¹ˆè¿›è¡Œéœ€æ±‚åˆ†æï¼Œæ‰èƒ½è·å¾—ç”¨æˆ·æœ¬è´¨çš„éœ€æ±‚ï¼Œè¿›è€Œç»™å‡ºå¥½çš„äº§å“è§£å†³æ–¹æ¡ˆã€‚</p>
<h2 id="ä¸‰æ’æœŸå’Œè¿›åº¦è¯„ä¼°åˆ†æ­§">ä¸‰ï¼šæ’æœŸå’Œè¿›åº¦è¯„ä¼°åˆ†æ­§</h2>
<p>äº§å“ç»ç†å’Œå¼€å‘äººå‘˜åœ¨æ’æœŸä¸è¿›åº¦è¯„ä¼°ä¸Šçš„åˆ†æ­§æ˜¯äº§å“å¼€å‘å›¢é˜Ÿä¸­æœ€å¸¸è§é—®é¢˜ä¹‹ä¸€ã€‚æ ¸å¿ƒåŸå› æ˜¯åŒæ–¹ç«™çš„è§†è§’ã€å…³æ³¨çš„é‡ç‚¹å’Œæ‰¿æ‹…çš„é£é™©å®Œå…¨ä¸åŒã€‚</p>
<p>åœ¨è¿›è¡Œä»»åŠ¡æ’æœŸçš„æ—¶å€™ï¼Œäº§å“ç»ç†å¸Œæœ›äº§å“åŠŸèƒ½èƒ½å¤Ÿå¿«é€Ÿä¸Šçº¿ï¼ŒæŠ¢å ç”¨æˆ·å¸‚åœºï¼Œå€¾å‘äºå‹ç¼©å¼€å‘æ—¶é—´ã€‚</p>
<p>è€ŒæŠ€æœ¯å¼€å‘åˆ™æ˜¯åŸºäºå®é™…çš„å¼€å‘ä»»åŠ¡ã€å¼€å‘æµç¨‹æœ‰å¤šå°‘ä¸ªæ­¥éª¤æ¥è¿›è¡Œè¯„ä¼°ï¼Œæ¯”å¦‚æŠ€æœ¯æ¶æ„è®¾è®¡ã€å†™ä»£ç ã€è”è°ƒã€æµ‹è¯•ã€ä¿®å¤bugã€ä¼˜åŒ–ä»£ç ç­‰æ­¥éª¤ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<p>æ¯”å¦‚äº§å“ç»ç†è¦æ±‚ 2 å‘¨å†…ä¸Šçº¿ï¼Œä½†æ˜¯å¼€å‘è¯„ä¼°å®é™…ä¸Šçº¿æ—¶é—´éœ€è¦ 4 å‘¨ï¼Œå› ä¸ºè¿˜å¼€å‘æµç¨‹æ‰€æœ‰æ­¥éª¤ï¼Œè¿˜æœ‰å…¶å®ƒä¾èµ–é¡¹ã€‚</p>
<p>ä¸‹é¢å¯¹å„æ–¹é¢åŸå› è¯¦ç»†åˆ†æï¼š</p>
<table>
<thead>
<tr>
<th>æ–¹é¢</th>
<th>PM çš„è§†è§’ä¸åŠ¨æœº</th>
<th>RD çš„è§†è§’ä¸åŠ¨æœº</th>
<th>å¯¼è‡´çš„åˆ†æ­§è¡¨ç°</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ç›®æ ‡å¯¼å‘</strong></td>
<td>å•†ä¸šé©±åŠ¨ï¼šå°½å¿«ä¸Šçº¿æŠ¢å å¸‚åœºã€æ»¡è¶³é«˜å±‚æœŸæœ›ã€å“åº”ç«äº‰ã€‚</td>
<td>æŠ€æœ¯é©±åŠ¨ï¼šç¡®ä¿å®ç°è´¨é‡ã€å¯ç»´æŠ¤æ€§ã€é¿å…æŠ€æœ¯å€ºã€é™ä½åæœŸç»´æŠ¤æˆæœ¬ã€‚</td>
<td>PM è§‰å¾— RD ä¼°æ—¶å¤ªä¿å®ˆã€æ‹–è¿›åº¦ï¼›RD è§‰å¾— PM ä¼°æ—¶å¤ªä¹è§‚ã€ä¸åˆ‡å®é™…ã€‚</td>
</tr>
<tr>
<td><strong>ä¿¡æ¯ä¸å¯¹ç§°</strong></td>
<td>æ›´äº†è§£å¸‚åœºã€ç”¨æˆ·åé¦ˆã€ç«å“åŠ¨æ€ã€ä¸šåŠ¡ä»·å€¼ï¼Œä½†å¯¹åº•å±‚æŠ€æœ¯å®ç°ç»†èŠ‚äº†è§£æœ‰é™ã€‚</td>
<td>æ›´äº†è§£æŠ€æœ¯éš¾åº¦ã€æ½œåœ¨é£é™©ã€å†å²é—ç•™é—®é¢˜ã€ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œä½†å¯¹å•†ä¸šç´§è¿«æ€§å’Œå¸‚åœºç«äº‰æ¿€çƒˆçš„æ„ŸçŸ¥è¾ƒå¼±ã€‚</td>
<td>PM å¸¸ä½ä¼°æŠ€æœ¯å¤æ‚åº¦ï¼›RD å¸¸å¿½ç•¥å•†ä¸šå‹åŠ›ã€‚</td>
</tr>
<tr>
<td><strong>é£é™©è®¤çŸ¥</strong></td>
<td>é£é™©ä¸»è¦åœ¨â€œé”™è¿‡å¸‚åœºçª—å£â€â€œç”¨æˆ·æµå¤±â€â€œé«˜å±‚é—®è´£â€ã€‚</td>
<td>é£é™©ä¸»è¦åœ¨â€œç³»ç»Ÿå´©æºƒâ€â€œæŠ€æœ¯å€ºçˆ†ç‚¸â€â€œä¸Šçº¿ååŠ ç­ä¿®å¤â€â€œè¢«èƒŒé”…â€ã€‚</td>
<td>PM æ„¿æ„æ‰¿æ‹…ä¸€å®šæŠ€æœ¯é£é™©æ¢é€Ÿåº¦ï¼›RD å€¾å‘ä¿å®ˆé¿å…è¿‡å¤šçš„é£é™©ã€‚</td>
</tr>
<tr>
<td><strong>ä¼°æ—¶ç»éªŒ</strong></td>
<td>ä¼°æ—¶å¤šåŸºäºå†å²ç±»ä¼¼åŠŸèƒ½æˆ–ç›´è§‰ï¼Œå®¹æ˜“é—æ¼è¾¹ç¼˜æ¡ˆä¾‹å’ŒæŠ€æœ¯ç»†èŠ‚ã€‚</td>
<td>ä¼°æ—¶åŸºäºå…·ä½“å®ç°è·¯å¾„ã€ä»£ç é‡ã€æµ‹è¯•è¦†ç›–ã€é›†æˆéš¾åº¦ï¼Œå¸¸ä¼šé¢„ç•™ç¼“å†²ï¼ˆbufferï¼‰æ—¶é—´ç»™çªå‘æƒ…å†µã€‚</td>
<td>PM ç»™çš„ deadline å¸¸æ¯” RD ä¼°æ—¶çŸ­ 30%-100%ã€‚</td>
</tr>
<tr>
<td><strong>æ¿€åŠ±æœºåˆ¶</strong></td>
<td>ç»©æ•ˆå¸¸ä¸â€œæŒ‰æ—¶ä¸Šçº¿â€â€œåŠŸèƒ½äº¤ä»˜æ•°é‡â€æŒ‚é’©ã€‚</td>
<td>ç»©æ•ˆå¸¸ä¸â€œbug ç‡â€â€œä»£ç è´¨é‡â€â€œç³»ç»Ÿç¨³å®šæ€§â€æŒ‚é’©ã€‚</td>
<td>PM æœ‰åŠ¨åŠ›å‹ç¼©æ—¶é—´ï¼ŒRD æœ‰åŠ¨åŠ›é¢„ç•™ä½™åœ°ã€‚</td>
</tr>
</tbody>
</table>
<h3 id="è§£å†³æ–¹æ³•-2">è§£å†³æ–¹æ³•</h3>
<ol>
<li><strong>ä¸‰äººä¼°æ—¶æ³•ï¼šPM+RD+TL/æ¶æ„å¸ˆå…±åŒä¼°æ—¶</strong></li>
</ol>
<p>PMï¼ˆäº§å“ç»ç†ï¼‰æä¾›ä¸šåŠ¡èƒŒæ™¯å’Œéœ€æ±‚ä¼˜å…ˆçº§ï¼ŒRDï¼ˆæŠ€æœ¯å¼€å‘ï¼‰è¯¦ç»†æ‹†è§£æŠ€æœ¯éœ€æ±‚ä¸ºæ›´å°çš„å¼€å‘ä»»åŠ¡å¹¶ä¼°æ—¶ï¼ŒTLï¼ˆTeam Leaderï¼‰ æˆ–æ¶æ„å¸ˆæŠŠå…³å„ç§é£é™©ã€‚ä¸‰äººè®¨è®ºï¼Œè¾¾æˆå…±è¯†åè®°å½•ä¸ºæ­£å¼ä¼°æ—¶ï¼Œä»»ä½•ä¸€æ–¹åæœŸä¸å¾—å•æ–¹é¢ä¿®æ”¹ã€‚é¿å… PM å•æ–¹é¢æ‹è„‘è¢‹å†³å®šé¡¹ç›® deadlineï¼Œæˆ– RD å•æ–¹é¢ä¿å®ˆä¼°æ—¶ã€‚</p>
<ol start="2">
<li><strong>è§„åˆ’æ‰‘å…‹</strong></li>
</ol>
<p>è¯¦ç»†çš„æ‰‘å…‹ç‰Œä¼°æ—¶å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« ï¼š<a href="https://www.cnblogs.com/jiujuan/p/18585259" target="_blank">æ•æ·å¼€å‘ï¼šç”¨æˆ·æ•…äº‹ä¼°ç®—ä¼°æ—¶æ–¹æ³•ä»‹ç»</a></p>
<ol start="3">
<li>
<p><strong>å·¥å…·ä¸æµç¨‹å±‚é¢ï¼šç”¨å®¢è§‚æ–¹æ³•æ›¿ä»£ä¸»è§‚åˆ¤æ–­</strong></p>
<ul>
<li>ä»»åŠ¡æ‹†è§£åˆ°é¢—ç²’åº¦è¶³å¤Ÿç»†ï¼šè¦æ±‚æ¯ä¸ªç”¨æˆ·æ•…äº‹æ‹†è§£åˆ°å­ä»»åŠ¡ä¸è¶…è¿‡ 1-2 äººå¤©ï¼Œé¿å…å¤§ä»»åŠ¡å¯¼è‡´ä¼°æ—¶åå·®å·¨å¤§ã€‚</li>
<li>é¢„ç•™ç¼“å†²æ—¶é—´å¹¶æ˜¾å¼åŒ–ï¼šåœ¨è¿­ä»£è®¡åˆ’ä¸­æ˜ç¡®é¢„ç•™ 20%-30% çš„ç¼“å†²æ—¶é—´ï¼ˆBufferï¼‰ï¼Œç”¨äºå¤„ç†æœªçŸ¥é£é™©ã€bug ä¿®å¤ç­‰ã€‚ç¼“å†²æ—¶é—´ç”±å›¢é˜Ÿå…±åŒå†³å®šï¼Œä¸è®¡å…¥å•ä¸ªä»»åŠ¡ä¼°æ—¶ã€‚</li>
<li>æŠ€æœ¯é¢„ç ”ä»»åŠ¡ï¼šå¯¹æŠ€æœ¯ä¸ç¡®å®šæ€§é«˜çš„éœ€æ±‚ï¼Œå…ˆå®‰æ’ 1-3 å¤©çš„æŠ€æœ¯é¢„ç ”ä»»åŠ¡è¿›è¡ŒæŠ€æœ¯éªŒè¯å’Œç²¾å‡†ä¼°æ—¶ï¼Œå†è¿›å…¥æ­£å¼å¼€å‘ã€‚å¤§å¹…é™ä½åæœŸå‘ç°åšä¸äº†æˆ–å·¥æ—¶ç¿»å€çš„æƒ…å†µã€‚</li>
<li>é‡Œç¨‹ç¢‘å…±åŒç¡®è®¤ï¼šè®¾ç½®åŠŸèƒ½é‡Œç¨‹ç¢‘ï¼ˆPM å…³å¿ƒï¼‰å’ŒæŠ€æœ¯é‡Œç¨‹ç¢‘ï¼ˆRD å…³å¿ƒï¼‰ï¼Œå¦‚â€œæ¥å£è”è°ƒå®Œæˆâ€â€œæ€§èƒ½æµ‹è¯•é€šè¿‡â€ç­‰ï¼ŒåŒè½¨å¹¶è¡Œç¡®è®¤è¿›åº¦ã€‚è¿™é‡Œ PM çœ‹åˆ°åŠŸèƒ½è¿›åº¦ï¼ŒRD çœ‹åˆ°æŠ€æœ¯é£é™©è¢«æ§åˆ¶ã€‚</li>
</ul>
</li>
<li>
<p><strong>å…¬å¼€é€æ˜çš„è¿›åº¦çœ‹æ¿</strong></p>
<p>ä½¿ç”¨ Jiraã€Trelloã€TAPD ç­‰æ•æ·æˆ–kanbanå·¥å…·å®æ—¶å±•ç¤ºä»»åŠ¡çŠ¶æ€ã€é˜»å¡ä»»åŠ¡ã€å‰©ä½™å·¥æ—¶ï¼Œæ‰€æœ‰äººå¯è§ã€‚PM çœ‹åˆ°çœŸå®è¿›åº¦ï¼ŒRD æ„Ÿå—åˆ°è¢«ä¿¡ä»»è€Œéè¢«å‚¬ä¿ƒã€‚</p>
</li>
<li>
<p><strong>è¿›åº¦åå·®é¢„è­¦æœºåˆ¶</strong></p>
<p>æ¯å‘¨çš„ä¸­é—´æ—¶é—´è¿›è¡Œä¸€æ¬¡è¿›åº¦å¥åº·æ£€æŸ¥ï¼Œå¦‚æœæŸä»»åŠ¡åå·® &gt;20%ï¼Œç«‹å³å¤ç›˜åŸå› å¹¶è§£å†³ï¼Œè€Œä¸æ˜¯ç­‰åˆ°è¿­ä»£æœ€åæ‰æš´æ¼å‡ºæ¥ï¼Œè¿›è€Œçˆ†å‘å†²çªã€‚</p>
</li>
</ol>
<h2 id="å››ä¼˜å…ˆçº§é¢‘ç¹è°ƒæ•´">å››ï¼šä¼˜å…ˆçº§é¢‘ç¹è°ƒæ•´</h2>
<p>éœ€æ±‚å¼€å‘ä¼˜å…ˆçº§é¢‘ç¹è°ƒæ•´æ˜¯äº§å“ç»ç†ä¸æŠ€æœ¯å¼€å‘ä¹‹é—´æœ€ç ´åå¼€å‘èŠ‚å¥çš„çŸ›ç›¾ç‚¹ä¹‹ä¸€ã€‚è¿™ä¸ªçŸ›ç›¾ç‚¹çš„æœ¬è´¨åŸå› ä¹‹ä¸€æ˜¯å•†ä¸šç¯å¢ƒçš„ä¸ç¡®å®šæ€§ä¸æŠ€æœ¯å¼€å‘éœ€è¦ç¡®å®šæ€§ä¹‹é—´çš„å†²çªï¼ŒåŠ ä¸Šç»„ç»‡æœºåˆ¶ä¸æˆç†Ÿï¼Œå¯¼è‡´è°ƒæ•´æˆæœ¬æœ€åå…¨éƒ¨è½¬å«åˆ°æŠ€æœ¯å¼€å‘ä¸Šã€‚å› ä¸ºæ•´ä¸ªäº§å“è½¯ä»¶å¼€å‘åˆ°è½åœ°ï¼ŒæŠ€æœ¯å¼€å‘åœ¨æœ€åº•å±‚ã€‚</p>
<p>ä¸‹é¢è¿›è¡Œè¯¦ç»†åŸå› åˆ†æã€‚</p>
<ol>
<li><strong>å•†ä¸šç¯å¢ƒé«˜åº¦ä¸ç¡®å®š</strong></li>
</ol>
<p>æ ¹æ®å‰é¢çš„åˆ†æäº†è§£åˆ°ï¼Œéœ€æ±‚è°ƒæ•´ï¼Œæœ‰ç”¨æˆ·åé¦ˆæ•°æ®å’Œæ„è§ã€ç«äº‰å¯¹æ‰‹çš„åŠ¨ä½œã€å¸‚åœºå˜åŒ–ã€é«˜å±‚çš„æ„è§ã€ç›‘æ§æ•°æ®æŒ‡æ ‡æ³¢åŠ¨ç­‰å„ç§å˜åŒ–ï¼Œè¿™äº›ç»„æˆäº†ä¸€ä¸ªå•†ä¸šç›¸å…³çš„ç¯å¢ƒã€‚</p>
<p>è¿™äº›å˜åŒ–éƒ½ä¼šå¯¼è‡´éœ€æ±‚çš„å˜åŒ–ï¼Œä¸ºäº†é€‚åº”å¸‚åœºå’Œå•†ä¸šç¯å¢ƒçš„å˜åŒ–ï¼Œä¼šå¯¼è‡´å‰æœŸçš„éœ€æ±‚ä¼˜å…ˆçº§å˜åŒ–ã€‚</p>
<ol start="2">
<li><strong>ä¸šåŠ¡ç›®æ ‡ä¸ç¨³å®šæˆ–ä¸æ¸…æ™°</strong></li>
</ol>
<p>å…¬å¸çš„æˆ˜ç•¥ä¸æ¸…æ™°ï¼Œä¸šåŠ¡ç›®æ ‡ä¸æ¸…æ™°ï¼Œè§‰å¾—éƒ½æ˜¯æœºä¼šï¼Œéœ€è¦é¢‘ç¹çš„ä¿®æ”¹éœ€æ±‚æ¥æ¢ç´¢æ–°æœºä¼šã€‚</p>
<p>è¿™ä¸ªéœ€è¦é«˜å±‚èƒ½ç»™å‡ºæ¸…æ™°çš„æˆ˜ç•¥æ–¹å‘ï¼Œç„¶åæ ¹æ®è¿™ä¸ªåˆ¶å®šéƒ¨é—¨çš„ä¸šåŠ¡æ–¹å‘ã€‚</p>
<p>å¦‚æœæ˜¯æ¢ç´¢å‹çš„é¡¹ç›®ï¼Œé‚£ä¹ˆè¿™ä¸ªè°ƒæ•´æ˜¯ä¸å¯é¿å…çš„ã€‚å› ä¸ºäº§å“æ–¹å‘ä¸ç¡®å®šï¼Œæ‰€æœ‰è¦é€šè¿‡è°ƒæ•´äº§å“éœ€æ±‚æ¥æ¢ç´¢ï¼Œå¯¼è‡´éœ€æ±‚ä¿®æ”¹ã€ä¼˜å…ˆçº§è°ƒæ•´ã€‚</p>
<ol start="3">
<li><strong>PM çœ¼é‡Œçš„è°ƒæ•´æˆæœ¬è®¤çŸ¥åå·®</strong></li>
</ol>
<p>äº§å“ç»ç†çš„ä¸€å¥è¯ï¼šæŠŠè¿™ä¸ªåŠŸèƒ½å¾€åæ”¾ä¸€æ”¾ã€‚PM çš„ä»»åŠ¡å°±å®Œæˆäº†ã€‚ä½†åˆ°äº†æŠ€æœ¯å¼€å‘è¿™é‡Œï¼Œå¯èƒ½æ¶‰åŠä»£ç å›æ»šã€åˆ†æ”¯åˆå¹¶ã€ä»£ç é‡æ„ã€æµ‹è¯•ç”¨ä¾‹åºŸå¼ƒå’Œé‡å†™ç­‰ç­‰ã€‚2 è€…è°ƒæ•´çš„æˆæœ¬ä¸ä¸€æ ·ã€‚</p>
<ol start="4">
<li><strong>PM è§’è‰²è¢«åŠ¨ ä¸æ•¢æ‹’ç»éœ€æ±‚</strong></li>
</ol>
<p>é¢å¯¹è€æ¿ã€é«˜å±‚ã€é”€å”®ç­‰çš„éœ€æ±‚ï¼Œä¸æ•¢æ‹’ç»ä¸åˆç†çš„éœ€æ±‚ï¼Œåªèƒ½è¢«åŠ¨æ¥å—éœ€æ±‚ã€‚</p>
<p>è¿™æ—¶äº§å“ç»ç†èƒ½åŠ›è¦åŠ å¼ºï¼Œä¸èƒ½åªæ˜¯ä¸ªæ‰§è¡Œçš„è§’è‰²ï¼Œè¿˜éœ€è¦åŠ å¼ºå­¦ä¹ ï¼Œè¦èƒ½åˆ†æéœ€æ±‚ï¼Œæ‡‚å¾—éœ€æ±‚çš„é‡è¦ç¨‹åº¦ï¼Œè§„åˆ’éœ€æ±‚ä¼˜å…ˆçº§çš„èƒ½åŠ›ã€‚</p>
<h3 id="è§£å†³æ–¹æ³•-3">è§£å†³æ–¹æ³•</h3>
<ol>
<li><strong>éœ€æ±‚ç¼“å†²æ± </strong></li>
</ol>
<p>æ‰€æœ‰æ–°æƒ³æ³•ã€ç”¨æˆ·åé¦ˆã€çªå‘éœ€æ±‚ã€è€æ¿éœ€æ±‚ç­‰å…ˆè¿›å…¥éœ€æ±‚ç¼“å†²æ± ï¼Œå®šæœŸï¼ˆæ¯å‘¨æˆ–åŒå‘¨ï¼‰é›†ä½“è¯„å®¡æ˜¯å¦è¿›å…¥å½“å‰ Roadmapã€‚é¿å…æ‰€æœ‰äººéšæ—¶ç›´æ¥æ’å…¥é«˜ä¼˜å…ˆçº§éœ€æ±‚</p>
<p>åœ¨ scrum æ¡†æ¶ä¸­æœ‰ä¸€ä¸ªäº§å“éœ€æ±‚å¾…åŠåˆ—è¡¨ï¼Œè¿™ä¸ªå°±ç›¸å½“äºéœ€æ±‚ç¼“å†²æ± ã€‚è¿™ä¸ªäº§å“éœ€æ±‚å¾…åŠåˆ—è¡¨è¿˜æœ‰éœ€æ±‚ä¼˜å…ˆçº§è¯„ä¼°ã€éœ€æ±‚è¯¦ç»†è¯´æ˜ç­‰ï¼Œè¿™é‡Œå­˜æ”¾æ‰€æœ‰æ¥æºçš„éœ€æ±‚ã€‚</p>
<p>Scrum ä¸­çš„ Product Backlog(äº§å“å¾…åŠåˆ—è¡¨) è¯¦ç»†ä»‹ç»å¯ä»¥çœ‹ä¸‹é¢è¿™ç¯‡æ–‡ç« ï¼š</p>
<ul>
<li><a href="https://www.cnblogs.com/jiujuan/p/18559611" target="_blank">æ•æ·å¼€å‘ï¼šScrum ä¸­çš„ Product Backlog(äº§å“å¾…åŠåˆ—è¡¨) è¯¦ç»†ä»‹ç»</a></li>
</ul>
<p>è¿™ä¸ªå¾…åŠåˆ—è¡¨çš„ç‰¹ç‚¹ï¼š1ã€éœ€æ±‚ä¼˜å…ˆçº§æ’åº 2ã€åŠ¨æ€å˜åŒ–ï¼Œéšæ—¶æ›´æ–°åˆ—è¡¨å†…å®¹ 3ã€éœ€æ±‚ç»†èŠ‚è¯¦æƒ… 4ã€é€æ˜æ€§ 5ã€å·¥ä½œé›†-å®ç°äº§å“ç›®æ ‡æ‰€éœ€å®Œæˆçš„æ‰€æœ‰å·¥ä½œé¡¹çš„é›†åˆã€‚</p>
<ol start="2">
<li><strong>å»ºç«‹ä¼˜å…ˆçº§æ²»ç†æœºåˆ¶</strong></li>
</ol>
<p>æ¯å­£åº¦ï¼ˆæˆ–æ¯ 2-4 å‘¨ï¼‰ç”± PM + RD Leader + é«˜å±‚å…±åŒè¯„å®¡å¹¶é”å®š Roadmapï¼Œé”å®šååŸåˆ™ä¸Šä¸å…è®¸æ’å…¥æ–°éœ€æ±‚æˆ–å¤§å¹…è°ƒæ•´ä¼˜å…ˆçº§ã€‚</p>
<p>è¿˜æœ‰æ•æ·æ¡†æ¶ Scrum å¼€å‘æ–¹æ³•é‡Œçš„ Sprint è®¡åˆ’ä¼šè®®æ¥å†³å®šæ¯ä¸€ä¸ª Sprint å¼€å‘å‘¨æœŸï¼ˆ2 - 4 å‘¨ï¼‰é‡Œçš„å¼€å‘ä»»åŠ¡ã€‚</p>
<p>ä¼˜å…ˆçº§è¯„ä¼°çš„æ–¹æ³•å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« ï¼š <a href="https://www.cnblogs.com/jiujuan/p/18559611" target="_blank">æ•æ·å¼€å‘ï¼šScrum ä¸­çš„ Product Backlog(äº§å“å¾…åŠåˆ—è¡¨) è¯¦ç»†ä»‹ç»</a></p>
<ol start="3">
<li><strong>å†»ç»“çª—å£ + ä¾‹å¤–é€šé“</strong></li>
</ol>
<p>å½“å‰è¿­ä»£å‰åŠæ®µï¼ˆä¾‹å¦‚ Sprint å‰ 60% æ—¶é—´ï¼‰ä¸å…è®¸è°ƒæ•´ä¼˜å…ˆçº§ï¼ŒååŠæ®µåªå…è®¸ä¿®å¤ä¸¥é‡ bug çš„è°ƒæ•´ã€‚çœŸæ­£ç´§æ€¥éœ€æ±‚èµ°â€œä¾‹å¤–é€šé“â€ï¼Œéœ€é«˜å±‚æ‰¹å‡†å¹¶è¡¥å¿ï¼ˆå¦‚å»¶é•¿è¿­ä»£æˆ–å‡å°‘å…¶ä»–åŠŸèƒ½ï¼‰ã€‚</p>
<ol start="4">
<li><strong>ç•™å‡ºå¼¹æ€§ç©ºé—´</strong></li>
</ol>
<p>æ¯ä¸ªè¿­ä»£åªè§„åˆ’ 70%-80% å®¹é‡ï¼Œå‰©ä½™ 20%-30% ä½œä¸ºå¼¹æ€§å®¹é‡æ—¶é—´ï¼Œä¸“é—¨ç”¨äºå¤„ç†çªå‘é«˜ä¼˜å…ˆçº§éœ€æ±‚æˆ–ä¼˜å…ˆçº§è°ƒæ•´ã€‚å½“çœŸæœ‰ç´§æ€¥éœ€æ±‚æ—¶ï¼Œæœ‰ç©ºé—´å®¹çº³ï¼Œè€Œä¸æ‰“ä¹±æ—¢æœ‰è®¡åˆ’ã€‚</p>
<ol start="5">
<li><strong>åœè½¦ä½æœºåˆ¶</strong></li>
</ol>
<p>è¢«æš‚åœçš„åŠŸèƒ½ç»Ÿä¸€æ”¾è¿›åœè½¦ä½çœ‹æ¿ï¼Œ</p>
<ul>
<li>è®°å½•æš‚åœåŸå› </li>
<li>å·²æŠ•å…¥å·¥æ—¶</li>
<li>é¢„è®¡æ¢å¤æ—¶é—´</li>
</ul>
<p>å®šæœŸå¤ç›˜æ˜¯å¦æ¢å¤æˆ–å½»åº•ä¸‹çº¿ã€‚é¿å…åŠŸèƒ½æ— é™æœŸæ‚¬è€Œæœªå†³ï¼Œå‡å°‘ RD å¿ƒç†è´Ÿæ‹…ã€‚</p>
<ol start="6">
<li><strong>é«˜å±‚èƒ½æƒ³æ¸…æ¥šå…¬å¸æˆ˜ç•¥æ–¹å‘</strong></li>
</ol>
<p>é«˜å±‚èƒ½ç»™å‡ºæ¸…æ™°çš„æˆ˜ç•¥æ–¹å‘ï¼Œç„¶åæ ¹æ®è¿™ä¸ªåˆ¶å®šéƒ¨é—¨çš„ä¸šåŠ¡æ–¹å‘ã€‚</p>
<p>å¦‚æœæ˜¯æ¢ç´¢å‹çš„é¡¹ç›®ï¼Œé‚£ä¹ˆè¿™ä¸ªè°ƒæ•´æ˜¯ä¸å¯é¿å…çš„ã€‚</p>
<h2 id="äº”å¼€å‘èµ„æºå†²çª">äº”ï¼šå¼€å‘èµ„æºå†²çª</h2>
<p>åœ¨ä¸€ä¸ªè½¯ä»¶äº§å“å¼€å‘å…¬å¸ï¼ŒæŠ€æœ¯å¼€å‘äººå‘˜çš„æ•°é‡åœ¨ä¸€å®šæ—¶é—´å†…æ˜¯æ’å®šçš„ã€‚äº§å“ç»ç†å¯èƒ½åŒæ—¶æ¨è¿›å¤šä¸ªé¡¹ç›®æˆ–åŠŸèƒ½çš„å¼€å‘ï¼ŒåŒæ—¶å¼€å‘å¤šä¸ªé¡¹ç›®æˆ–åŠŸèƒ½éœ€è¦æ›´å¤šçš„å¼€å‘äººå‘˜ï¼Œä½†æ˜¯å¼€å‘äººå‘˜çš„äººåŠ›ã€æ—¶é—´å´æ˜¯æœ‰é™çš„ï¼Œå¼€å‘çš„æ€»äº§èƒ½æ˜¯ä¸€å®šé‡çš„ã€‚è¿™å°±å¯¼è‡´äº†å¼€å‘èµ„æºå†²çªã€‚</p>
<p>è¯¦ç»†åŸå› åˆ†æï¼š</p>
<p>åœ¨å…¬å¸å±‚é¢ï¼Œç¼ºå°‘æ•´ä½“èµ„æºè§„åˆ’ï¼Œé«˜å±‚ä¸æ–­ç«‹é¡¹æ–°é¡¹ç›®ï¼Œå´æ²¡æœ‰æ‰©å……æŠ€æœ¯å¼€å‘å›¢é˜Ÿäººå‘˜æ•°é‡ã€‚äº§å“ç»ç†åˆè¢«é«˜å±‚é€¼ç€ï¼Œè§‰å¾—å“ªä¸ªé¡¹ç›®éƒ½å¾ˆé‡è¦ã€‚å¹¶è¡Œé¡¹ç›®è¿‡å¤šè¶…è¿‡äº†æŠ€æœ¯å›¢é˜Ÿå®é™…èƒ½æ‰¿å—çš„å®¹é‡ï¼Œå°±è¦æ±‚é€šè¿‡åŠ ç­æ¥å¼¥è¡¥äººå‘˜ä¸è¶³å¯¼è‡´è¿›åº¦æ…¢æƒ…å†µï¼Œé•¿æ—¶é—´çš„è¯ä¼šä¸ä»…ä¼šæ‹–æ…¢é¡¹ç›®è¿›åº¦ï¼Œè¿˜ä¼šæ‹–ç´¯å¼€å‘å›¢é˜Ÿçš„å£«æ°”ã€‚</p>
<p>åœ¨é¡¹ç›®å‹çš„è½¯ä»¶å¼€å‘å…¬å¸ï¼Œé”€å”®æˆ–ä¸šåŠ¡ä¸ºäº†ç­¾å•ï¼Œå‘å®¢æˆ·æ‰¿è¯ºè¿‡æ—©çš„äº¤ä»˜æ—¶é—´ï¼Œè€Œé«˜å±‚ä¸ºäº†ä¸šç»©æŒ‡æ ‡ä¸æ–­æ¥æ–°é¡¹ç›®ã€‚è¿™æ ·ä¹Ÿä¼šå¯¼è‡´å¼€å‘ä»»åŠ¡è¿‡å¤šã€‚</p>
<p>è¿˜æœ‰å…¬å¸çš„äº§å“ç»ç†ä¹‹é—´ç¼ºä¹åè°ƒï¼Œéƒ½è®¤ä¸ºè‡ªå·±çš„é¡¹ç›®é‡è¦ï¼Œè¦æ±‚ç»™åˆ°è¶³å¤Ÿçš„å¼€å‘èµ„æºã€‚æŠ€æœ¯å¼€å‘å‘¢ï¼Œè¢«å¤šä¸ªäº§å“ç»ç†æ‹‰å»å¹²é¡¹ç›®ï¼Œè¿™æ ·å¯¼è‡´å¼€å‘äººå‘˜ä»»åŠ¡è¿‡å¤šã€‚<br>
å…¬å¸å±‚é¢ç¼ºä¹é¡¹ç›®ä¼˜å…ˆçº§ã€é‡è§†ç¨‹åº¦çš„åè°ƒæœºåˆ¶ã€‚</p>
<p>ä¸€ä¸ªå¼€å‘äººå‘˜åŒæ—¶å¹¶è¡Œå¼€å‘å¤šä¸ªä»»åŠ¡ï¼Œæ¯å¤©ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œä¼šå¯¼è‡´ä»»åŠ¡ç”Ÿäº§åŠ›ä¸‹é™å¾ˆå¤šï¼Œæœ‰çš„ç ”ç©¶æ˜¾ç¤ºå¤šä»»åŠ¡ä¼šå¯¼è‡´ç”Ÿäº§åŠ›ä¸‹é™ 40%ã€‚å†åŠ ä¸Šæ¯å¤©è¢«ä¸åŒä¼šè®®æ‰“æ–­ï¼Œä¸“æ³¨æ—¶é—´ç¢ç‰‡åŒ–ï¼Œæ•ˆç‡æ›´ä½ã€‚</p>
<h3 id="è§£å†³æ–¹æ³•-4">è§£å†³æ–¹æ³•</h3>
<ol>
<li><strong>åœ¨å…¬å¸å±‚é¢å»ºç«‹èµ„æºè§„åˆ’ä¸æ²»ç†æœºåˆ¶</strong></li>
</ol>
<p>æ¯å­£åº¦ç”±æŠ€æœ¯è´Ÿè´£äººï¼ˆCTO/æŠ€æœ¯VPï¼‰ç‰µå¤´ï¼Œåšä¸€æ¬¡å¼€å‘èµ„æºå®¹é‡ç›˜ç‚¹ï¼šç»Ÿè®¡æ‰€æœ‰æŠ€æœ¯å¼€å‘çš„å¯ç”¨äººå¤©ï¼Œæ‰£é™¤å‡æœŸã€åŸ¹è®­ã€ç»´æŠ¤ç­‰ï¼ˆé€šå¸¸åªç®— 70%-80% æœ‰æ•ˆå®¹é‡ï¼‰ï¼Œå¾—å‡ºå…¨å…¬å¸æ€»å®¹é‡ã€‚å†æ ¹æ®ä¸šåŠ¡ç›®æ ‡å†³å®šèƒ½åŒæ—¶æ”¯æ’‘å‡ ä¸ªé¡¹ç›®ã€‚è¶…å‡ºå®¹é‡çš„æ–°é¡¹ç›®å¿…é¡»æ¨è¿Ÿæˆ–æ‹’ç»</p>
<ol start="2">
<li><strong>åœ¨å…¬å¸å±‚é¢å»ºç«‹é¡¹ç›®ç«‹é¡¹å®¡æŸ¥å§”å‘˜ä¼š</strong></li>
</ol>
<p>æ–°é¡¹ç›®ç«‹é¡¹å¿…é¡»ç»è¿‡é¡¹ç›®å®¡æŸ¥ä¼šï¼ˆå« PMã€RD Leaderã€è´¢åŠ¡ã€é«˜å±‚ï¼‰ï¼Œè¯„ä¼°æ‰€éœ€èµ„æºã€å•†ä¸šä»·å€¼ã€ä¼˜å…ˆçº§ã€‚åªæœ‰åœ¨å®¹é‡å…è®¸çš„æƒ…å†µä¸‹æ‰èƒ½æ‰¹å‡†ã€‚</p>
<ol start="3">
<li><strong>é¡¹ç›®å¼€å‘é€æ˜åŒ–å’Œä¼˜å…ˆçº§ç»Ÿä¸€</strong></li>
</ol>
<p>åˆ©ç”¨å·¥å…·æˆ–æ–¹æ³•ï¼ŒæŠŠé¡¹ç›®çš„éœ€æ±‚ç»Ÿä¸€è¿›å…¥ä¸€ä¸ª Backlogï¼Œæ¯”å¦‚ scrumæˆ–kanban çš„ product backlog å¾…åŠåˆ—è¡¨ï¼Œä¼˜å…ˆçº§ç”±å¤šä¸ªäººæ¥è¯„ä¼°ã€‚</p>
<p>ä¸€ä¸ªæŠ€æœ¯å¼€å‘äººå‘˜åœ¨ä¸€ä¸ªè¿­ä»£å‘¨æœŸï¼ˆ2 - 4å‘¨ï¼‰å†…ï¼Œåªåˆ†é…ä¸€ä¸ªä¸»è¦é¡¹ç›®ï¼Œå æ¯”çº¦ä¸º â‰¥70%ï¼Œå°‘è·¨å¤šä¸ªé¡¹ç›®ï¼Œå°ä»»åŠ¡å æ¯”ä¸è¦è¶…è¿‡ â‰¥20%ã€‚</p>
<ol start="4">
<li><strong>å®¹é‡é¢„ç•™æœºåˆ¶</strong></li>
</ol>
<p>æ¯ä¸ªå›¢é˜Ÿ/ä¸ªäººé¢„ç•™ 10%-30% å®¹é‡ç”¨äºï¼šçº¿ä¸Šé—®é¢˜bugä¿®å¤ã€æŠ€æœ¯å€ºã€çªå‘ä»»åŠ¡ã€‚å„ç§éšå½¢ä»»åŠ¡æœ‰äº†åˆç†æ—¶é—´æ¥å®Œæˆã€‚</p>
<ol start="5">
<li><strong>èµ„æºçœ‹æ¿ä¸è´Ÿè½½é¢„è­¦</strong></li>
</ol>
<p>ä½¿ç”¨ Jiraã€Trelloç­‰å·¥å…·å®æ—¶å±•ç¤ºæ¯ä¸ªäººè´Ÿè½½ï¼Œè®¾ç½®é˜ˆå€¼ï¼ˆå¦‚ &gt;100% çº¢è‰²é¢„è­¦ï¼‰ï¼Œè‡ªåŠ¨é€šçŸ¥é¢†å¯¼ã€‚</p>
<p>è¿˜æœ‰å°±æ˜¯åŠ é€Ÿæ‹›è˜æˆ–åŸ¹å…»ã€å¤–åŒ…åˆä½œã€‚</p>
<p>è¿˜å¯ä»¥åœ¨ç»©æ•ˆæŒ‡æ ‡ä¸Šæƒ³åŠæ³•ã€‚</p>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>äº§å“ç»ç†å’ŒæŠ€æœ¯å¼€å‘äººå‘˜ï¼Œå…¶å®éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„ç›®æ ‡ï¼Œé‚£å°±æ˜¯æŠŠäº§å“åšå¥½ï¼Œåªæ˜¯å„è‡ªçš„åˆ†å·¥ä¸åŒã€‚</p>
<p>ä»–ä»¬ä¹‹é—´çš„å…³ç³»åº”æ˜¯åä½œä¼™ä¼´è€Œéå¯¹ç«‹é¢ï¼Œäº§å“ç»ç†å®šä¹‰åšä»€ä¹ˆå’Œä¸ºä»€ä¹ˆåšï¼ŒæŠ€æœ¯å¼€å‘äººå‘˜ç”¨æŠ€æœ¯è§£å†³æ€ä¹ˆåšå’Œå…·ä½“åšå‡ºæ¥ï¼Œå…±åŒä¸ºç”¨æˆ·åˆ›é€ ä»·å€¼ï¼Œä¸ºå…¬å¸ä¸šåŠ¡å‘å±•è´¡çŒ®åŠ›é‡ã€‚</p>
<h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<ul>
<li>ã€Šæœ‰æ•ˆéœ€æ±‚åˆ†æã€‹ä½œè€…: å¾é”‹  <a href="https://book.douban.com/subject/26952983/" target="_blank" rel="noopener nofollow">https://book.douban.com/subject/26952983/</a></li>
<li>æ•æ·å¼€å‘ï¼šç”¨æˆ·æ•…äº‹ä¼°ç®—ä¼°æ—¶æ–¹æ³•ä»‹ç» <a href="https://www.cnblogs.com/jiujuan/p/18585259" target="_blank">https://www.cnblogs.com/jiujuan/p/18585259</a></li>
<li>æ•æ·å¼€å‘ï¼šScrum ä¸­çš„ Product Backlog(äº§å“å¾…åŠåˆ—è¡¨) è¯¦ç»†ä»‹ç»-å¾…åŠåˆ—è¡¨ç®¡ç†ã€ç”¨æˆ·æ•…äº‹ã€ä¼˜å…ˆçº§è¯„ä¼°ç­‰ç­‰ <a href="https://www.cnblogs.com/jiujuan/p/18559611" target="_blank">https://www.cnblogs.com/jiujuan/p/18559611</a></li>
<li>ã€Šç²¾ç›Šäº§å“å¼€å‘æ‰‹å†Œã€‹<a href="https://book.douban.com/subject/36458020/" target="_blank" rel="noopener nofollow">https://book.douban.com/subject/36458020/</a></li>
</ul>

</div>
<div id="MySignature" role="contentinfo">
    == just do it ==
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.015277777777777777" data-date-updated="2025-12-23 17:57">2025-12-23 17:35</span>&nbsp;
<a href="https://www.cnblogs.com/jiujuan">ä¹å·</a>&nbsp;
é˜…è¯»(<span id="post_view_count">84</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">1</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19388306);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19388306', targetLink: 'https://www.cnblogs.com/jiujuan/p/19388306', title: 'æŠ€æœ¯ç®¡ç†ï¼šäº§å“ç»ç†PMå’ŒæŠ€æœ¯å¼€å‘äººå‘˜RDä¹‹é—´å¸¸è§çš„çŸ›ç›¾æœ‰å“ªäº›' })">ä¸¾æŠ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ å‘Šåˆ«â€œæ„å¤§åˆ©é¢æ¡â€ï¼šFastAPI ç”Ÿäº§çº§æ¶æ„çš„æœ€ä½³å®è·µæŒ‡å— ]]></title>
    <link>https://www.cnblogs.com/swizard/p/19388173</link>
    <guid>3439f999b23080923284def43195200a</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/swizard/p/19388173" title="å‘å¸ƒäº 2025-12-23 17:18">
    <span role="heading" aria-level="2">å‘Šåˆ«â€œæ„å¤§åˆ©é¢æ¡â€ï¼šFastAPI ç”Ÿäº§çº§æ¶æ„çš„æœ€ä½³å®è·µæŒ‡å—</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h2 data-path-to-node="4">1. å¼•è¨€ï¼šç”±äºâ€œå¤ªå¿«â€è€Œå¸¦æ¥çš„çƒ¦æ¼</h2>
<p data-path-to-node="5">ä½ æ˜¯å¦ç»å†è¿‡è¿™æ ·çš„åœºæ™¯ï¼Ÿ</p>
<p data-path-to-node="6">å‘¨äº”ä¸‹åˆï¼Œä½ å…´è‡´å‹ƒå‹ƒåœ°ç”¨ <code data-path-to-node="6" data-index-in-node="13">pip install fastapi</code> å¼€å¯äº†ä¸€ä¸ªæ–°é¡¹ç›®ã€‚<code data-path-to-node="6" data-index-in-node="42">main.py</code> é‡Œåªæœ‰ 20 è¡Œä»£ç ï¼Œä¸€åˆ‡éƒ½è·‘å¾—é£å¿«ï¼Œä½ è§‰å¾—è‡ªå·±åƒä¸ªé£ä¸€æ ·çš„ç”·å­ã€‚</p>
<p data-path-to-node="7">ç„¶è€Œï¼Œä¸¤å‘¨åï¼Œæƒ…å†µå˜äº†ã€‚</p>
<p data-path-to-node="8">é‚£ä¸ªæ›¾ç»æ¸…ç§€çš„ <code data-path-to-node="8" data-index-in-node="8">main.py</code> è†¨èƒ€åˆ°äº† 2000 è¡Œã€‚æ•°æ®åº“è¿æ¥ã€Pydantic æ¨¡å‹ã€è·¯ç”±é€»è¾‘ã€é‰´æƒä»£ç å…¨éƒ¨çº ç¼ åœ¨ä¸€èµ·ã€‚ä½ æƒ³ä¿®æ”¹ä¸€ä¸ªç”¨æˆ·çš„ APIï¼Œç»“æœä¸å°å¿ƒå¼„å´©äº†å•†å“çš„æŸ¥è¯¢åŠŸèƒ½ã€‚æ­¤æ—¶çš„ä½ ï¼Œé¢å¯¹ç€å±å¹•ä¸Šé‚£ä¸€å¨â€œæ„å¤§åˆ©é¢æ¡ä»£ç â€ï¼ˆSpaghetti Codeï¼‰ï¼Œåªæƒ³æŠŠå®ƒå…³æ‰å›å®¶ç¡è§‰ã€‚</p>
<p data-path-to-node="9"><strong data-path-to-node="9" data-index-in-node="0">FastAPI çš„â€œå¿«â€æ˜¯åŒåˆƒå‰‘ã€‚</strong> å®ƒä¸å¼ºåˆ¶ä½ éµå¾ªç‰¹å®šçš„ç»“æ„ï¼Œä½†è¿™ä¸ä»£è¡¨ä½ ä¸éœ€è¦ç»“æ„ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥è°ˆè°ˆå¦‚ä½•é€šè¿‡<strong data-path-to-node="9" data-index-in-node="56">åˆç†çš„æ¶æ„æ¨¡å¼</strong>å’Œ<strong data-path-to-node="9" data-index-in-node="64">æœ€ä½³å®è·µ</strong>ï¼Œå°†ä½ çš„ FastAPI é¡¹ç›®æ‰“é€ æˆä¸€åº§ç¨³å›ºã€å¯æ‰©å±•çš„æ‘©å¤©å¤§æ¥¼ã€‚</p>
<hr data-path-to-node="10">
<h2 data-path-to-node="11">2. æ¦‚å¿µæ‹†è§£ï¼šå¦‚æœä½ æ˜¯å…¬å¸çš„ CEO</h2>
<p data-path-to-node="12">ä¸ºäº†ç†è§£ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦åˆ†å±‚æ¶æ„ï¼Œæˆ‘ä»¬æ¥æ‰“ä¸ªæ¯”æ–¹ã€‚</p>
<p data-path-to-node="13">æƒ³è±¡ä½ å¼€äº†ä¸€å®¶åˆåˆ›å…¬å¸ï¼ˆè¿™å°±æ˜¯ä½ çš„ Appï¼‰ã€‚</p>
<ul data-path-to-node="14">
<li>
<p data-path-to-node="14,0,0"><strong data-path-to-node="14,0,0" data-index-in-node="0">åˆåˆ›é˜¶æ®µï¼ˆå•æ–‡ä»¶æ¨¡å¼ï¼‰</strong>ï¼šæ•´ä¸ªå…¬å¸åªæœ‰ä½ ä¸€ä¸ªäººã€‚ä½ æ˜¯ CEOï¼Œä¹Ÿæ˜¯é”€å”®ï¼Œè¿˜æ˜¯ä¿æ´é˜¿å§¨ã€‚æ‰€æœ‰äº‹æƒ…ä½ éƒ½äº²åŠ›äº²ä¸ºï¼ˆæ‰€æœ‰é€»è¾‘éƒ½åœ¨ <code data-path-to-node="14,0,0" data-index-in-node="60">main.py</code>ï¼‰ã€‚è¿™åœ¨åˆ›ä¸šåˆæœŸï¼ˆDemoï¼‰æ²¡é—®é¢˜ï¼Œæ•ˆç‡æé«˜ã€‚</p>
</li>
<li>
<p data-path-to-node="14,1,0"><strong data-path-to-node="14,1,0" data-index-in-node="0">æ‰©å¼ é˜¶æ®µï¼ˆç”Ÿäº§çº§æ¶æ„ï¼‰</strong>ï¼šä¸šåŠ¡åšå¤§äº†ï¼Œä½ ä¸èƒ½å†è‡ªå·±æ‰«åœ°äº†ã€‚ä½ éœ€è¦ç»„å»ºéƒ¨é—¨ï¼š</p>
<ul data-path-to-node="14,1,1">
<li>
<p data-path-to-node="14,1,1,0,0"><strong data-path-to-node="14,1,1,0,0" data-index-in-node="0">é”€å”®éƒ¨</strong> ä¸“é—¨è´Ÿè´£æ‹‰å®¢ï¼ˆ<code data-path-to-node="14,1,1,0,0" data-index-in-node="11">Routers</code>ï¼šå¤„ç†è·¯ç”±è¯·æ±‚ï¼‰ã€‚</p>
</li>
<li>
<p data-path-to-node="14,1,1,1,0"><strong data-path-to-node="14,1,1,1,0" data-index-in-node="0">åå‹¤éƒ¨</strong> ä¸“é—¨è´Ÿè´£ç‰©èµ„ï¼ˆ<code data-path-to-node="14,1,1,1,0" data-index-in-node="11">Schemas</code>ï¼šå®šä¹‰æ•°æ®æ ¼å¼ï¼‰ã€‚</p>
</li>
<li>
<p data-path-to-node="14,1,1,2,0"><strong data-path-to-node="14,1,1,2,0" data-index-in-node="0">æŠ€æœ¯éƒ¨</strong> ä¸“é—¨è´Ÿè´£åº•å±‚è®¾æ–½ï¼ˆ<code data-path-to-node="14,1,1,2,0" data-index-in-node="13">Database</code> / <code data-path-to-node="14,1,1,2,0" data-index-in-node="24">CRUD</code>ï¼šå¤„ç†æ•°æ®åº“äº¤äº’ï¼‰ã€‚</p>
</li>
<li>
<p data-path-to-node="14,1,1,3,0"><strong data-path-to-node="14,1,1,3,0" data-index-in-node="0">å¤–åŒ…å›¢é˜Ÿ</strong> éšå«éšåˆ°ï¼ŒæŒ‰éœ€æœåŠ¡ï¼ˆ<code data-path-to-node="14,1,1,3,0" data-index-in-node="15">Dependencies</code>ï¼šä¾èµ–æ³¨å…¥ï¼‰ã€‚</p>
</li>
</ul>
</li>
</ul>
<p data-path-to-node="15"><strong data-path-to-node="15" data-index-in-node="0">è¿™å°±æ˜¯æˆ‘ä»¬ä»Šå¤©è¦è®²çš„æ ¸å¿ƒï¼šå…³æ³¨ç‚¹åˆ†ç¦»ï¼ˆSeparation of Concernsï¼‰ã€‚</strong></p>
<p data-path-to-node="16">FastAPI æä¾›äº†ä¸¤ä¸ªæœ€å¼ºå¤§çš„æ­¦å™¨æ¥å®ç°è¿™ä¸€ç›®æ ‡ï¼š<strong data-path-to-node="16" data-index-in-node="27">APIRouterï¼ˆéƒ¨é—¨æ‹†åˆ†ï¼‰</strong> å’Œ <strong data-path-to-node="16" data-index-in-node="45">Dependency Injectionï¼ˆæŒ‰éœ€æœåŠ¡ï¼‰</strong>ã€‚</p>
<hr data-path-to-node="17">
<h2 data-path-to-node="18">3. åŠ¨æ‰‹å®æˆ˜ï¼šé‡æ„ä½ çš„ <code data-path-to-node="18" data-index-in-node="13">main.py</code></h2>
<p data-path-to-node="19">æˆ‘ä»¬è¦åšçš„ç¬¬ä¸€ä»¶äº‹ï¼Œå°±æ˜¯è‚¢è§£é‚£ä¸ªè‡ƒè‚¿çš„ <code data-path-to-node="19" data-index-in-node="20">main.py</code>ã€‚</p>
<h3 data-path-to-node="20">3.1 ç†æƒ³çš„æ–‡ä»¶ç»“æ„</h3>
<p data-path-to-node="21">ä¸è¦æŠŠé¸¡è›‹æ”¾åœ¨ä¸€ä¸ªç¯®å­é‡Œã€‚ä¸€ä¸ªæ ‡å‡†çš„ç”Ÿäº§çº§ç›®å½•ç»“æ„åº”è¯¥é•¿è¿™æ ·ï¼š</p>
<div class="code-block ng-tns-c3098535048-82 ng-animate-disabled ng-trigger ng-trigger-codeBlockRevealAnimation" data-hveid="0" data-ved="0CAAQhtANahgKEwivp_eBq9ORAxUAAAAAHQAAAAAQgQE">
<div class="code-block-decoration header-formatted gds-title-s ng-tns-c3098535048-82 ng-star-inserted"><span class="ng-tns-c3098535048-82">Plaintext</span>
<div class="buttons ng-tns-c3098535048-82 ng-star-inserted">&nbsp;</div>
</div>
<div class="formatted-code-block-internal-container ng-tns-c3098535048-82">
<div class="animated-opacity ng-tns-c3098535048-82">
<pre class="ng-tns-c3098535048-82 highlighter-hljs"><code>/app
    /routers      # é”€å”®éƒ¨ï¼šå¤„ç†è·¯å¾„å’Œè¯·æ±‚
        users.py
        items.py
    /schemas      # åå‹¤éƒ¨ï¼šPydantic æ¨¡å‹ï¼ˆæ•°æ®å¥‘çº¦ï¼‰
        user.py
        item.py
    /crud         # æŠ€æœ¯éƒ¨ï¼šæ•°æ®åº“æ“ä½œé€»è¾‘
        user.py
    /core         # æ ¸å¿ƒé…ç½®
        config.py
    main.py       # CEOï¼šç»Ÿç­¹å…¨å±€</code></pre>
</div>
</div>
</div>
<h3 data-path-to-node="23">3.2 è·¯ç”±æ‹†åˆ†ï¼ˆAPIRouterï¼‰</h3>
<p data-path-to-node="24">å‡è®¾æˆ‘ä»¬è¦æŠŠç”¨æˆ·ç›¸å…³çš„é€»è¾‘æ‹†å‡ºå»ã€‚</p>
<p data-path-to-node="25"><strong data-path-to-node="25" data-index-in-node="0">ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºåˆ†éƒ¨ï¼ˆapp/routers/users.pyï¼‰</strong></p>
<div class="code-block ng-tns-c3098535048-83 ng-animate-disabled ng-trigger ng-trigger-codeBlockRevealAnimation" data-hveid="0" data-ved="0CAAQhtANahgKEwivp_eBq9ORAxUAAAAAHQAAAAAQggE">
<div class="code-block-decoration header-formatted gds-title-s ng-tns-c3098535048-83 ng-star-inserted"><span class="ng-tns-c3098535048-83">Python</span>
<div class="buttons ng-tns-c3098535048-83 ng-star-inserted">&nbsp;</div>
</div>
<div class="formatted-code-block-internal-container ng-tns-c3098535048-83">
<div class="animated-opacity ng-tns-c3098535048-83">
<pre class="ng-tns-c3098535048-83 highlighter-hljs"><code>from fastapi import APIRouter

# è¿™é‡Œçš„ prefix="/users" æ„å‘³ç€æ‰€æœ‰åœ¨è¿™ä¸ªè·¯ç”±ä¸‹çš„è·¯å¾„éƒ½ä¼šè‡ªåŠ¨åŠ ä¸Š /users å‰ç¼€
# tags=["users"] ç”¨äºåœ¨ Swagger UI æ–‡æ¡£ä¸­åˆ†ç»„
router = APIRouter(prefix="/users", tags=["users"])

@router.get("/")
async def read_users():
    return [{"username": "Rick"}, {"username": "Morty"}]

@router.get("/me")
async def read_user_me():
    return {"username": "fakecurrentuser"}</code></pre>
</div>
</div>
</div>
<p data-path-to-node="27"><strong data-path-to-node="27" data-index-in-node="0">ç¬¬äºŒæ­¥ï¼šæ€»éƒ¨æ±‡æŠ¥ï¼ˆapp/main.pyï¼‰</strong></p>
<p data-path-to-node="28">CEO éœ€è¦çŸ¥é“æœ‰å“ªäº›éƒ¨é—¨å­˜åœ¨ã€‚</p>
<div class="code-block ng-tns-c3098535048-84 ng-animate-disabled ng-trigger ng-trigger-codeBlockRevealAnimation" data-hveid="0" data-ved="0CAAQhtANahgKEwivp_eBq9ORAxUAAAAAHQAAAAAQgwE">
<div class="code-block-decoration header-formatted gds-title-s ng-tns-c3098535048-84 ng-star-inserted"><span class="ng-tns-c3098535048-84">Python</span>
<div class="buttons ng-tns-c3098535048-84 ng-star-inserted">&nbsp;</div>
</div>
<div class="formatted-code-block-internal-container ng-tns-c3098535048-84">
<div class="animated-opacity ng-tns-c3098535048-84">
<pre class="ng-tns-c3098535048-84 highlighter-hljs"><code>from fastapi import FastAPI
from app.routers import users, items # å‡è®¾ä½ ä¹Ÿæœ‰ items

app = FastAPI()

# å°†åˆ†éƒ¨çš„è·¯ç”±æ³¨å†Œåˆ°ä¸»åº”ç”¨ä¸­
app.include_router(users.router)
# app.include_router(items.router) 

@app.get("/")
async def root():
    return {"message": "Hello World"}</code></pre>
</div>
</div>
</div>
<p data-path-to-node="30"><strong data-path-to-node="30" data-index-in-node="0">ä»£ç è§£æï¼š</strong></p>
<ul data-path-to-node="31">
<li>
<p data-path-to-node="31,0,0"><code data-path-to-node="31,0,0" data-index-in-node="0">APIRouter</code> å°±åƒæ˜¯ä¸€ä¸ªå¾®å‹çš„ <code data-path-to-node="31,0,0" data-index-in-node="19">FastAPI</code> å®ä¾‹ã€‚</p>
</li>
<li>
<p data-path-to-node="31,1,0"><code data-path-to-node="31,1,0" data-index-in-node="0">app.include_router</code> å°±åƒæ˜¯æ’çº¿æ¿ï¼ŒæŠŠå„ä¸ªæ¨¡å—çš„æ’å¤´æ’åˆ°ä¸»ç”µæºä¸Šã€‚</p>
</li>
<li>
<p data-path-to-node="31,2,0"><strong data-path-to-node="31,2,0" data-index-in-node="0">ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Ÿ</strong> ä½ çš„ <code data-path-to-node="31,2,0" data-index-in-node="11">main.py</code> å†æ¬¡å˜å›äº†æ¸…çˆ½çš„çŠ¶æ€ï¼Œè€Œä¸”å¤šäººåä½œæ—¶ï¼Œä½ å†™ <code data-path-to-node="31,2,0" data-index-in-node="41">users</code>ï¼Œæˆ‘å†™ <code data-path-to-node="31,2,0" data-index-in-node="50">items</code>ï¼Œäº’ä¸å†²çªã€‚</p>
</li>
</ul>
<hr data-path-to-node="32">
<h2 data-path-to-node="33">4. è¿›é˜¶æ·±æ½œï¼šä¸‰ä¸ªä½ å¿…é¡»éµå®ˆçš„â€œå†›è§„â€</h2>
<p data-path-to-node="34">ä»…ä»…æ‹†åˆ†æ–‡ä»¶è¿˜ä¸å¤Ÿï¼Œè¿™é‡Œæœ‰ä¸‰ä¸ªåŒºåˆ†â€œæ–°æ‰‹â€å’Œâ€œè€é¸Ÿâ€çš„å…³é”®ç»†èŠ‚ã€‚</p>
<h3 data-path-to-node="35">å†›è§„ä¸€ï¼šè¾“å…¥ä¸è¾“å‡ºæ¨¡å‹åˆ†ç¦» (DTO Pattern)</h3>
<p data-path-to-node="36">å¾ˆå¤šæ–°æ‰‹ä¼šç›´æ¥æŠŠæ•°æ®åº“æ¨¡å‹ï¼ˆORM Modelï¼‰è¿”å›ç»™å‰ç«¯ï¼Œè¿™æ˜¯<strong data-path-to-node="36" data-index-in-node="32">å¤§å¿Œ</strong>ï¼è¿™ä¼šå¯¼è‡´ä½ æŠŠç”¨æˆ·çš„å¯†ç å“ˆå¸Œå€¼ä¹Ÿä¸€å¹¶æ³„éœ²å‡ºå»ã€‚</p>
<p data-path-to-node="37"><strong data-path-to-node="37" data-index-in-node="0">æœ€ä½³å®è·µ</strong>ï¼šä½¿ç”¨ä¸åŒçš„ Pydantic æ¨¡å‹åˆ†åˆ«å¯¹åº”â€œè¯·æ±‚â€å’Œâ€œå“åº”â€ã€‚</p>
<div class="code-block ng-tns-c3098535048-85 ng-animate-disabled ng-trigger ng-trigger-codeBlockRevealAnimation" data-hveid="0" data-ved="0CAAQhtANahgKEwivp_eBq9ORAxUAAAAAHQAAAAAQhAE">
<div class="code-block-decoration header-formatted gds-title-s ng-tns-c3098535048-85 ng-star-inserted"><span class="ng-tns-c3098535048-85">Python</span>
<div class="buttons ng-tns-c3098535048-85 ng-star-inserted">&nbsp;</div>
</div>
<div class="formatted-code-block-internal-container ng-tns-c3098535048-85">
<div class="animated-opacity ng-tns-c3098535048-85">
<pre class="ng-tns-c3098535048-85 highlighter-hljs"><code># app/schemas/user.py
from pydantic import BaseModel, EmailStr

# 1. ç”¨æˆ·æ³¨å†Œæ—¶å¡«å†™çš„ï¼ˆåŒ…å«å¯†ç ï¼‰
class UserCreate(BaseModel):
    username: str
    password: str 
    email: EmailStr

# 2. è¿”å›ç»™å‰ç«¯å±•ç¤ºçš„ï¼ˆç»å¯¹ä¸èƒ½åŒ…å«å¯†ç ï¼ï¼‰
class UserResponse(BaseModel):
    id: int
    username: str
    email: EmailStr

    class Config:
        from_attributes = True # å…è®¸ä» ORM æ¨¡å‹è¯»å–æ•°æ®</code></pre>
</div>
</div>
</div>
<p data-path-to-node="39">åœ¨è·¯ç”±ä¸­ä½¿ç”¨ï¼š</p>
<div class="code-block ng-tns-c3098535048-86 ng-animate-disabled ng-trigger ng-trigger-codeBlockRevealAnimation" data-hveid="0" data-ved="0CAAQhtANahgKEwivp_eBq9ORAxUAAAAAHQAAAAAQhQE">
<div class="code-block-decoration header-formatted gds-title-s ng-tns-c3098535048-86 ng-star-inserted"><span class="ng-tns-c3098535048-86">Python</span>
<div class="buttons ng-tns-c3098535048-86 ng-star-inserted">&nbsp;</div>
</div>
<div class="formatted-code-block-internal-container ng-tns-c3098535048-86">
<div class="animated-opacity ng-tns-c3098535048-86">
<pre class="ng-tns-c3098535048-86 highlighter-hljs"><code>@router.post("/", response_model=UserResponse) # æ˜ç¡®å‘Šè¯‰ FastAPI ä½¿ç”¨å“ªä¸ªæ¨¡å‹è¿‡æ»¤è¿”å›å€¼
async def create_user(user: UserCreate):
    # è¿™é‡Œå¤„ç†åˆ›å»ºé€»è¾‘...
    # return db_user_object 
    # FastAPI ä¼šè‡ªåŠ¨æ ¹æ® UserResponse è¿‡æ»¤æ‰ db_user_object ä¸­çš„ password å­—æ®µ
    pass</code></pre>
</div>
</div>
</div>
<h3 data-path-to-node="41">å†›è§„äºŒï¼šä¾èµ–æ³¨å…¥æ˜¯ä½ çš„æ•‘å‘½ç¨»è‰ (Dependency Injection)</h3>
<p data-path-to-node="42">ä¸è¦åœ¨å…¨å±€èŒƒå›´å†…åˆå§‹åŒ–æ•°æ®åº“è¿æ¥æˆ–å¤æ‚çš„é€»è¾‘å¯¹è±¡ã€‚ä½¿ç”¨ <code data-path-to-node="42" data-index-in-node="28">Depends</code>ã€‚</p>
<p data-path-to-node="43"><strong data-path-to-node="43" data-index-in-node="0">é”™è¯¯ç¤ºèŒƒï¼ˆå…¨å±€å˜é‡ï¼‰ï¼š</strong></p>
<div class="code-block ng-tns-c3098535048-87 ng-animate-disabled ng-trigger ng-trigger-codeBlockRevealAnimation" data-hveid="0" data-ved="0CAAQhtANahgKEwivp_eBq9ORAxUAAAAAHQAAAAAQhgE">
<div class="code-block-decoration header-formatted gds-title-s ng-tns-c3098535048-87 ng-star-inserted"><span class="ng-tns-c3098535048-87">Python</span>
<div class="buttons ng-tns-c3098535048-87 ng-star-inserted">&nbsp;</div>
</div>
<div class="formatted-code-block-internal-container ng-tns-c3098535048-87">
<div class="animated-opacity ng-tns-c3098535048-87">
<pre class="ng-tns-c3098535048-87 highlighter-hljs"><code>db = SessionLocal() # å±é™©ï¼è¿æ¥å¯èƒ½æ–­å¼€ï¼Œæˆ–è€…åœ¨å¹¶å‘æ—¶æ··ä¹±

@app.get("/users")
def get_users():
    return db.query(User).all()</code></pre>
</div>
</div>
</div>
<p data-path-to-node="45"><strong data-path-to-node="45" data-index-in-node="0">æ­£ç¡®ç¤ºèŒƒï¼ˆä¾èµ–æ³¨å…¥ï¼‰ï¼š</strong></p>
<div class="code-block ng-tns-c3098535048-88 ng-animate-disabled ng-trigger ng-trigger-codeBlockRevealAnimation" data-hveid="0" data-ved="0CAAQhtANahgKEwivp_eBq9ORAxUAAAAAHQAAAAAQhwE">
<div class="code-block-decoration header-formatted gds-title-s ng-tns-c3098535048-88 ng-star-inserted"><span class="ng-tns-c3098535048-88">Python</span>
<div class="buttons ng-tns-c3098535048-88 ng-star-inserted">&nbsp;</div>
</div>
<div class="formatted-code-block-internal-container ng-tns-c3098535048-88">
<div class="animated-opacity ng-tns-c3098535048-88">
<pre class="ng-tns-c3098535048-88 highlighter-hljs"><code># app/dependencies.py
def get_db():
    db = SessionLocal()
    try:
        yield db
    finally:
        db.close() # ç¡®ä¿è¯·æ±‚ç»“æŸåå…³é—­è¿æ¥

# åœ¨è·¯ç”±ä¸­ä½¿ç”¨
from fastapi import Depends
from sqlalchemy.orm import Session

@router.get("/users")
def get_users(db: Session = Depends(get_db)): # åªæœ‰åœ¨è¿™ä¸ªè¯·æ±‚è¿›æ¥æ—¶ï¼Œæ‰ä¼šåˆ›å»ºè¿æ¥
    return crud.get_users(db)</code></pre>
</div>
</div>
</div>
<p data-path-to-node="47"><strong data-path-to-node="47" data-index-in-node="0">ä¸ºä»€ä¹ˆï¼Ÿ</strong></p>
<ol start="1" data-path-to-node="48">
<li>
<p data-path-to-node="48,0,0"><strong data-path-to-node="48,0,0" data-index-in-node="0">å®‰å…¨æ€§</strong>ï¼š<code data-path-to-node="48,0,0" data-index-in-node="4">finally</code> å—ç¡®ä¿äº†å³ä½¿å‘ç”Ÿé”™è¯¯ï¼Œæ•°æ®åº“è¿æ¥ä¹Ÿèƒ½æ­£ç¡®å…³é—­ã€‚</p>
</li>
<li>
<p data-path-to-node="48,1,0"><strong data-path-to-node="48,1,0" data-index-in-node="0">å¯æµ‹è¯•æ€§</strong>ï¼šå†™å•å…ƒæµ‹è¯•æ—¶ï¼Œä½ å¯ä»¥è½»æ¾åœ°ç”¨ <code data-path-to-node="48,1,0" data-index-in-node="20">app.dependency_overrides</code> æŠŠçœŸå®çš„æ•°æ®åº“æ›¿æ¢æˆ Mock å¯¹è±¡ï¼Œè€Œä¸éœ€è¦å» hack å…¨å±€å˜é‡ã€‚</p>
</li>
</ol>
<h3 data-path-to-node="49">å†›è§„ä¸‰ï¼šé…ç½®ç®¡ç†ä¸è¦ç¡¬ç¼–ç </h3>
<p data-path-to-node="50">ä¸è¦æŠŠ <code data-path-to-node="50" data-index-in-node="4">SECRET_KEY</code> æˆ–æ•°æ®åº“ URL å†™æ­»åœ¨ä»£ç é‡Œã€‚ä½¿ç”¨ <code data-path-to-node="50" data-index-in-node="34">pydantic-settings</code> è¯»å–ç¯å¢ƒå˜é‡ã€‚</p>
<div class="code-block ng-tns-c3098535048-89 ng-animate-disabled ng-trigger ng-trigger-codeBlockRevealAnimation" data-hveid="0" data-ved="0CAAQhtANahgKEwivp_eBq9ORAxUAAAAAHQAAAAAQiAE">
<div class="code-block-decoration header-formatted gds-title-s ng-tns-c3098535048-89 ng-star-inserted"><span class="ng-tns-c3098535048-89">Python</span>
<div class="buttons ng-tns-c3098535048-89 ng-star-inserted">&nbsp;</div>
</div>
<div class="formatted-code-block-internal-container ng-tns-c3098535048-89">
<div class="animated-opacity ng-tns-c3098535048-89">
<pre class="ng-tns-c3098535048-89 highlighter-hljs"><code># app/core/config.py
from pydantic_settings import BaseSettings

class Settings(BaseSettings):
    database_url: str
    secret_key: str
    debug: bool = False

    class Config:
        env_file = ".env"

settings = Settings()</code></pre>
</div>
</div>
</div>
<p data-path-to-node="52">è¿™æ ·ï¼Œä½ çš„ä»£ç åœ¨å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒä¹‹é—´åˆ‡æ¢æ—¶ï¼Œåªéœ€è¦æ›´æ¢ <code data-path-to-node="52" data-index-in-node="34">.env</code> æ–‡ä»¶ï¼Œè€Œä¸éœ€è¦æ”¹åŠ¨ä»»ä½•ä¸€è¡Œä»£ç ã€‚</p>
<hr data-path-to-node="53">
<h2 data-path-to-node="54">5. æ€»ç»“ä¸å»¶ä¼¸</h2>
<h3 data-path-to-node="55">æ€»ç»“</h3>
<p data-path-to-node="56">FastAPI çš„æœ€ä½³å®è·µæ ¸å¿ƒåœ¨äº**â€œç§©åºâ€**ï¼š</p>
<ol start="1" data-path-to-node="57">
<li>
<p data-path-to-node="57,0,0">ä½¿ç”¨ <strong data-path-to-node="57,0,0" data-index-in-node="3">APIRouter</strong> æ‹†åˆ†ä¸šåŠ¡é€»è¾‘ï¼Œåˆ«è®© <code data-path-to-node="57,0,0" data-index-in-node="23">main.py</code> æˆä¸ºåƒåœ¾åœºã€‚</p>
</li>
<li>
<p data-path-to-node="57,1,0">ä¸¥æ ¼åŒºåˆ† <strong data-path-to-node="57,1,0" data-index-in-node="5">Pydantic Schemas</strong>ï¼ˆè¾“å…¥/è¾“å‡ºï¼‰å’Œ <strong data-path-to-node="57,1,0" data-index-in-node="30">ORM Models</strong>ï¼ˆæ•°æ®åº“ï¼‰ï¼Œä¿æŠ¤æ•°æ®å®‰å…¨ã€‚</p>
</li>
<li>
<p data-path-to-node="57,2,0">åˆ©ç”¨ <strong data-path-to-node="57,2,0" data-index-in-node="3">Dependency Injection</strong> ç®¡ç†æ•°æ®åº“ä¼šè¯å’Œå…±äº«é€»è¾‘ï¼Œæå‡å¯æµ‹è¯•æ€§ã€‚</p>
</li>
</ol>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-23 17:19">2025-12-23 17:18</span>&nbsp;
<a href="https://www.cnblogs.com/swizard">Swizard</a>&nbsp;
é˜…è¯»(<span id="post_view_count">48</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19388173);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19388173', targetLink: 'https://www.cnblogs.com/swizard/p/19388173', title: 'å‘Šåˆ«â€œæ„å¤§åˆ©é¢æ¡â€ï¼šFastAPI ç”Ÿäº§çº§æ¶æ„çš„æœ€ä½³å®è·µæŒ‡å—' })">ä¸¾æŠ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ç³Ÿç³•ï¼Œæˆ‘å®ç°çš„k8s informerå¥½åƒæ˜¯ä¾æ‰˜ç­”è¾© ]]></title>
    <link>https://www.cnblogs.com/JulianHuang/p/19388140</link>
    <guid>0841d0a7a612c4f680ff9d6f90888af7</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/JulianHuang/p/19388140" title="å‘å¸ƒäº 2025-12-23 17:12">
    <span role="heading" aria-level="2">ğŸš€ç³Ÿç³•ï¼Œæˆ‘å®ç°çš„k8s informerå¥½åƒæ˜¯ä¾æ‰˜ç­”è¾©</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>ğŸ’¡ ç³Ÿç³•ï¼Œk8s informeræˆ‘å¥½åƒæ‹‰ä¸€å¨å¤§çš„</p>
<p>è¿‘æ®µæ—¶é—´åœ¨åšäº‘åŸç”ŸAIç®—åŠ›å¹³å°ï¼Œä¹‹å‰æåˆ°ä½¿ç”¨k8s informeræœºåˆ¶ç®¡æ§å¤šæ¸ é“æäº¤çš„è®­ç»ƒä»»åŠ¡ã€‚</p>
<p><img src="https://img2024.cnblogs.com/blog/587720/202512/587720-20251223171050915-2063071702.png" alt="image" loading="lazy"></p>
<p>ä¸Šé¢ç¬¬4ç‚¹ï¼š</p>
<p>informerä¼šç›‘å¬é€šè¿‡cliå’Œç½‘é¡µportalæäº¤çš„jobï¼Œ å›æ˜¾åˆ°portalå¹³å°ï¼Œå¹¶åœ¨jobå‘ç”ŸçŠ¶æ€å˜æ›´æ—¶é€šçŸ¥ç”¨æˆ·ã€‚</p>
<h2 id="1-informeræ˜¯å®ç°å£°æ˜å¼controllerè®¾è®¡çš„æ ¸å¿ƒ">1. informeræ˜¯å®ç°å£°æ˜å¼controllerè®¾è®¡çš„æ ¸å¿ƒ</h2>
<p>k8sé‡‡ç”¨å£°æ˜å¼è®¾è®¡ï¼Œ ä»¥ç»“æœä¸ºå¯¼å‘ï¼Œ å®ç°è¿™ä¸€å…³é”®èƒ½åŠ›çš„ç»„ä»¶æ˜¯k8så„ç§controllerï¼š</p>
<p>å®šä¹‰æŸå¯¹è±¡çš„æœŸæœ›çŠ¶æ€ï¼Œå®æ—¶ç›‘æ§å¹¶è¾¾æˆè¿™ä¸ªçŠ¶æ€ï¼ˆè°ƒè°Reconcileï¼‰ å°±æ˜¯æ§åˆ¶å™¨åšçš„äº‹æƒ…ï¼Œ No signal was sent. No webhook firedã€‚</p>
<p>informeræ˜¯k8s client-goåº“çš„ä¸€éƒ¨åˆ†ï¼š</p>
<ul>
<li>â‘  ç›‘å¬èµ„æº</li>
<li>â‘¡ å¹¶æœ¬åœ°ç¼“å­˜</li>
<li>â‘¢ é€šçŸ¥ä¸Šå±‚åº”ç”¨å‘ç”Ÿäº†ä¸€äº›äº‹ä»¶ï¼ˆjobåˆ›å»ºã€job pendingã€jobè¿è¡Œã€jobå®Œæˆ/å¤±è´¥ï¼‰</li>
</ul>
<p>å‡å°‘äº†apiserverçš„è°ƒç”¨æµé‡ã€ä¼˜åŒ–æ€§èƒ½ã€ååº”å¼è‡ªåŠ¨åŒ–è¿ç»´  ï¼ˆæˆ‘å½“å‰çš„éœ€æ±‚æœ‰ç‚¹ç±»ä¼¼äºååº”å¼è‡ªåŠ¨åŒ–è¿ç»´ğŸ˜„ï¼‰ã€‚</p>
<h2 id="2-informeræ ¸å¿ƒä½¿ç”¨æµç¨‹">2. informeræ ¸å¿ƒä½¿ç”¨æµç¨‹</h2>
<p>è¿è¡Œä¸€ä¸ªå®Œæ•´çš„informerï¼š list ---&gt; watch ---&gt; cache---&gt; reactã€‚</p>
<p><img src="https://img2024.cnblogs.com/blog/587720/202512/587720-20251223171110014-1231938720.png" alt="image" loading="lazy"></p>
<p>â‘  ä»apiserveræ‹‰å–æŒ‡å®šçš„gvrèµ„æº, å½¢æˆé¦–æ¬¡èµ„æºå¿«ç…§</p>
<p>â‘¡ æŒç»­ç›‘å¬èµ„æºçš„å˜æ›´äº‹ä»¶è¿›deltaFIFOé˜Ÿåˆ—ï¼Œè¿™é‡Œæ˜¯é€šè¿‡HTTP/1.1 çš„<code>Chunked Transfer Encoding</code>ï¼ˆåˆ†å—ä¼ è¾“ç¼–ç ï¼‰æ¥å®ç°çš„</p>
<p>â‘¢ é€šè¿‡ä¸Šè¿°â‘ â‘¡ä¸¤æ­¥å¾—åˆ°èµ„æºçš„æœ€æ–°çŠ¶æ€å¹¶ç¼“å­˜ï¼Œæ³¨æ„ï¼Œç¼“å­˜çš„æ˜¯èµ„æºå¯¹è±¡ï¼Œè€Œä¸æ˜¯èµ„æºå˜æ›´äº‹ä»¶ï¼Œ å¦å¤–æ˜¯çº¿ç¨‹å®‰å…¨çš„å­˜å‚¨ã€‚</p>
<p>â‘£ äº‹ä»¶å¤„ç†ï¼Œåº”ç”¨åœ¨ä¸šåŠ¡å±‚é¢çš„åŠ¨ä½œï¼Œå¯ä»¥å†™æ—¥å¿—ï¼Œå¯ä»¥åšcontrollerçš„ReconcileåŠ¨ä½œã€‚</p>
<p>å¼€å‘è€…ä¸»è¦è€ƒé‡åœ¨<code>reactï¼ˆEventHandlerï¼‰</code>é˜¶æ®µï¼Œå…¶ä½™èƒ½åŠ›client-go sdkä¼šæä¾›ã€‚</p>
<p>apiserver--&gt;reflector(æ‹‰å–/ç›‘å¬)--&gt;DeltaFiFO(é˜Ÿåˆ—)--&gt; Processï¼ˆå¤„ç†ï¼‰--&gt;Handlerï¼ˆç”¨æˆ·ä»£ç ï¼‰</p>
<h3 id="21-watchæœºåˆ¶-chunked-transfer-encoding">2.1 Watchæœºåˆ¶ï¼š chunked transfer encoding</h3>
<p>åˆ†å—ä¼ è¾“èƒ½åŠ›æ˜¯http1.1 å¸¸è§åŠŸèƒ½ï¼Œä¸éœ€è¦åƒwebsocketé‚£æ ·å‡çº§åè®®åˆ°å¸§æ ¼å¼ï¼Œhttpè¿æ¥ä¸­æ¯ä¸ªäº‹ä»¶æ˜¯ç‹¬ç«‹çš„ï¼Œç›´åˆ°è¿æ¥å…³é—­ã€‚</p>
<p>è¯·æ±‚spiserveræ—¶æŸ¥è¯¢å‚æ•°åŠ ä¸Š<code>watch=true</code>, ä¼šæç¤ºæœåŠ¡å™¨æœ¬æ¬¡æ˜¯ç›‘å¬è¯·æ±‚<br>
å“åº”æ ¸å¿ƒç‰¹å¾æ˜¯å“åº”å¤´åŒ…å«<code>Transfer-Encoding: chunked</code></p>
<p>éªŒè¯</p>
<pre><code>ç»ˆç«¯1ï¼škubectl proxy --port=8081  ï¼š åœ¨ä¸»æœºä¸Š8081ç«¯å£ä»£ç†aiserveræœåŠ¡

ç»ˆç«¯2ï¼š curl "http://localhost:8081/api/v1/namespaces/team-a/pods?watch=true"  --verbose
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/587720/202512/587720-20251223171121777-240153264.png" alt="image" loading="lazy"></p>
<p>åœ¨client-go sdkä¸­ä¼šä¸ºinformer watchå»ºç«‹ç¨³å®šçš„é•¿è¿æ¥ï¼ˆæ–­çº¿é‡è¿ã€é‡è¯•ç­‰ï¼‰</p>
<h2 id="3-ä¸€ä¸ªå¸¸è§„çš„informerå®è·µ">3. ä¸€ä¸ªå¸¸è§„çš„informerå®è·µ</h2>
<p>åˆ©ç”¨kubeconfigåˆ›å»ºinformerï¼ˆç»‘å®šgvrï¼‰ï¼Œ å¯åŠ¨informerï¼ˆå¸¦ç»ˆæ­¢ä¿¡é“ï¼‰</p>
<pre><code>package main

import (
	"fmt"
	"time"

	v1 "k8s.io/api/core/v1"
	"k8s.io/apimachinery/pkg/fields"
	"k8s.io/client-go/kubernetes"
	"k8s.io/client-go/tools/cache"
	"k8s.io/client-go/tools/clientcmd"
)

func main() {
	config, _ := clientcmd.BuildConfigFromFlags("", "/home/user/.kube/config")
	clientset, _ := kubernetes.NewForConfig(config)

	podInformer := cache.NewSharedIndexInformer(
		cache.NewListWatchFromClient(
			clientset.CoreV1().RESTClient(),
			"pods",
			v1.NamespaceAll,
			fields.Everything(),
		),
		&amp;v1.Pod{},
		time.Minute*10, // resync å‘¨æœŸ
		cache.Indexers{ // cacheä¸Šçš„å¿«é€Ÿè¿‡æ»¤å™¨
			"byNode": func(obj interface{}) ([]string, error) {
				pod := obj.(*v1.Pod)
				return []string{pod.Spec.NodeName}, nil
			}},
	)

	podInformer.AddEventHandler(cache.ResourceEventHandlerFuncs{
		DeleteFunc: func(obj interface{}) {
			pod := obj.(*v1.Pod)
			fmt.Printf("[DELETED] Pod: %s/%s\n", pod.Namespace, pod.Name)
		},
	})

	// å¯åŠ¨ informer (å¿…é¡»åœ¨ç‹¬ç«‹goroutineä¸­ï¼Œå› ä¸ºRunæ–¹æ³•æ˜¯åŒæ­¥æ–¹æ³•)
	stopCh := make(chan struct{})
	defer close(stopCh)
	go func() {
		fmt.Println("Starting PodInformer...")
		podInformer.Run(stopCh) // åŒæ­¥æ–¹æ³•ï¼Œä¼šé˜»å¡ç›´åˆ° stopCh å…³é—­
		fmt.Println("PodInformer stopped")
	}()

	//  ç­‰å¾…ç¼“å­˜åŒæ­¥å°±ç»ª
	if !cache.WaitForCacheSync(stopCh, podInformer.HasSynced) {
		panic("failed to wait for cache sync")
	}
	&lt;-stopCh
}
</code></pre>
<ul>
<li>
<p>informeræœ‰<code>resync</code>æœºåˆ¶ï¼š å‘¨æœŸæ€§é‡æ”¾æ•°æ®ï¼Œç›®çš„æ˜¯ä¸ºä¸šåŠ¡æä¾›è¡¥å¿æœºä¼šï¼Œä¸Šé¢è®¾ç½®äº†10åˆ†é’Ÿé‡æ”¾å‘¨æœŸ, =0æˆ–è€…ä¸è®¾ç½®åˆ™ä¸é‡æ”¾ã€‚</p>
</li>
<li>
<p>ä½¿ç”¨<code>cache.NewListWatchFromClient</code>è®¾ç½®äº†informerçš„<code>local cache</code>ï¼Œ å¼€å‘è€…å¯ä»¥ç›´æ¥æŠŠ<code>local cache</code>å½“æˆç›‘å¬å¯¹è±¡çš„é›†åˆ,client-goä¼šç¡®ä¿local cacheæ­£ç¡®åæ˜ å½“å‰çš„èµ„æºå¯¹è±¡ã€‚</p>
</li>
<li>
<p><code>informer.Run(stopCh)</code> æ˜¯ä¸€ä¸ªåŒæ­¥çš„å‡½æ•°ï¼ŒæŒç»­æ‰§è¡Œlist-watch-cache-reactè¿™ä¸ªå¼•æ“ï¼Œ åœ¨åº”ç”¨å±‚é¢éœ€è¦ä»¥å­goroutineå½¢å¼ï¼Œclient-goå¦æœ‰informerå·¥å‚ï¼ŒinformerFactory.Start(stopCh) å†…éƒ¨ä¹Ÿæ˜¯å¯åç¨‹ï¼Œè¿™é‡Œä¹Ÿè¦è®¤è¯†åˆ°ä¿¡é“stopChåœ¨golangä¸­çš„é€šä¿¡ä½œç”¨ã€‚</p>
</li>
</ul>
<blockquote>
<p>ä¸ºåŠ å¿«è¿™ä¸ªinformer cacheè®¿é—®é€Ÿåº¦ï¼Œè¿˜å¯ä»¥ç»™è¿™ä¸ªcacheåŠ ä¸Šç´¢å¼•å™¨<code>Indexers</code>, åé¢å¯ç›´æ¥ä½¿ç”¨ç´¢å¼•å™¨è®¿é—®cacheã€‚</p>
</blockquote>
<h3 id="31-æ‹‰äº†ä¸€å¨å¤§çš„">3.1 æ‹‰äº†ä¸€å¨å¤§çš„</h3>
<p>å¦‚æœæŠŠä¸šåŠ¡éœ€æ±‚éƒ½åšåœ¨EventHandleré‡Œé¢ï¼Œé•¿æ­¤ä»¥å¾€ä¼šæ‹‰ä¸€å¨å¤§çš„ã€‚</p>
<p>é¦–å…ˆè¿™æ˜¯ä¸€ä¸ª<strong>äº‹ä»¶é˜Ÿåˆ—æ¶ˆè´¹æ¨¡å‹</strong>ï¼ŒAdd/Update/Deleteå˜æ›´äº‹ä»¶æ˜¯ä»ä¸€ä¸ªå«<code>deltaFIFO</code>é˜Ÿåˆ—ä¸­popå‡ºæ¥çš„ï¼Œ æ—¢ç„¶æ˜¯é˜Ÿåˆ—æ¨¡å‹ï¼Œé‚£ä¹ˆé˜Ÿåˆ—æ¶ˆè´¹çš„é«˜å¯ç”¨ã€é«˜æ€§èƒ½ã€å¯æ‰©å±•é—®é¢˜å°±é¿å…ä¸äº†ï¼š</p>
<ul>
<li>
<p>äº‹ä»¶éœ€è¦åŒæ­¥æŒ¨ä¸ªå¤„ç†ï¼Œå¦åˆ™æ§åˆ¶å™¨ä¾§æ‹¿åˆ°çš„æœ€ç»ˆèµ„æºçŠ¶æ€å¯èƒ½ä¸å¯¹ï¼Œé‚£ä¹ˆè¿™ç§æŒ¨ä¸ªå¤„ç†ä¹Ÿå°±è°ˆä¸ä¸Šé«˜æ€§èƒ½ã€‚</p>
</li>
<li>
<p>ä½†æ˜¯åº”ç”¨åˆæ˜¯å¤šå®ä¾‹éƒ¨ç½²ï¼Œ å¤šä¸ªinformeréƒ½èµ°åŒæ ·çš„list-watch-cache-reactæµç¨‹ï¼Œ å®¢è§‚ä¸Šå›´ç»•informer deltaFIIOåˆå½¢æˆå¤šç”Ÿäº§è€…=&gt;å¤šæ¶ˆè´¹è€…æ¨¡å‹ï¼Œè¿™ç§å±€é¢EventHandlerå°±è¦è€ƒé‡å¹‚ç­‰å’Œèµ„æºä¸€è‡´æ€§é—®é¢˜ã€‚</p>
</li>
<li>
<p>é˜Ÿåˆ—å¸¸è§„çš„é«˜å¯ç”¨è€ƒé‡ï¼šâ‘  æ¶ˆè´¹è€…å®•æœºæ—¶äº‹ä»¶ä¸¢å¤±  â‘¡ æ¶ˆè´¹å¤±è´¥å¦‚ä½•é‡è¯•ï¼ˆé‡è¯•åˆæœ‰å¹‚ç­‰æ€§é—®é¢˜ï¼‰</p>
</li>
<li>
<p>informeræœ‰<code>resync</code>æœºåˆ¶ï¼šä¼šå¯¹<code>local cache</code>ä¸­çš„èµ„æºæ„é€ <code>onUpdateäº‹ä»¶</code>ï¼Œä¹Ÿä¼šèµ°EventHandler, æ‰€ä»¥EventHandleråšçš„å¾ˆé‡ï¼Œä¼šå¾ˆéº»çƒ¦ã€‚</p>
</li>
</ul>
<p>å¦‚æœä¸šåŠ¡é€»è¾‘å¾ˆé‡æˆ–è€…å¼ºä¾èµ–é‡è¯•ï¼Œæ¨èä¸Š<code>[workQueue](https://pkg.go.dev/k8s.io/client-go@v0.35.0/util/workqueue "workQueue")</code>, æ”¯æŒä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<ul>
<li>
<p>å…¬å¹³ï¼šæŒ‰æ·»åŠ é¡ºåºå¤„ç†å…ƒç´ </p>
</li>
<li>
<p>å…ƒç´ å»é‡ï¼šå•ä¸ªitemä¸ä¼šè¢«å¹¶å‘æ¶ˆè´¹å¤šæ¬¡ï¼›å¦‚æœä¸€ä¸ªitemåœ¨æ¶ˆè´¹å‰è¢«å¤šæ¬¡æ·»åŠ ï¼Œå®ƒåªä¼šè¢«æ¶ˆè´¹ä¸€æ¬¡</p>
</li>
<li>
<p>å¤šä¸ªæ¶ˆè´¹è€…å’Œç”Ÿäº§è€…ï¼Œ æ”¯æŒæ¶ˆè´¹æ—¶é‡æ’</p>
</li>
<li>
<p>å…³é—­é€šçŸ¥</p>
</li>
</ul>
<h2 id="4-controllerè°ƒè°è®¾è®¡">4. <a href="https://medium.com/@dhruvbhl/informers-listers-workqueues-the-brain-behind-your-controller-f5b0967026de" title="controllerè°ƒè°è®¾è®¡" target="_blank" rel="noopener nofollow">controllerè°ƒè°è®¾è®¡</a></h2>
<p>å­¦ä¹ controllerçš„è®¾è®¡ï¼šé™¤äº†informerï¼Œè¿˜æä¾›äº†é¢å¤–çš„å·¥å…·ï¼Œå¸®åŠ©å¼€å‘è€…é«˜æ•ˆæ„ŸçŸ¥æœ€æ–°çš„èµ„æºï¼Œæ‰§è¡Œè°ƒè°å·¥ä½œã€‚</p>
<table>
<thead>
<tr>
<th>package</th>
<th>role</th>
</tr>
</thead>
<tbody>
<tr>
<td>informer</td>
<td>Eyes(watch and cache them)</td>
</tr>
<tr>
<td>lister</td>
<td>Memory(read from lcoal cache)</td>
</tr>
<tr>
<td>workQueue</td>
<td>task list (reconcile work)</td>
</tr>
</tbody>
</table>
<p><img src="https://img2024.cnblogs.com/blog/587720/202512/587720-20251223171139498-1459677859.png" alt="image" loading="lazy"></p>
<pre><code>type PodController struct {
	clientset kubernetes.Interface
	queue     workqueue.TypedRateLimitingInterface[string]
	informer  cache.SharedIndexInformer
	indexer   cache.Indexer
}

func NewPodController(clientset kubernetes.Interface) *PodController {
	// åˆ›å»º Pod informer
	podInformer := cache.NewSharedIndexInformer(
		cache.NewListWatchFromClient(
			clientset.CoreV1().RESTClient(),
			"pods",
			v1.NamespaceAll,
			fields.Everything(),
		),
		&amp;v1.Pod{},
		time.Minute*10, // resync å‘¨æœŸ
		cache.Indexers{
			"byNode": func(obj interface{}) ([]string, error) {
				pod := obj.(*v1.Pod)
				return []string{pod.Spec.NodeName}, nil
			}},
	)

	// åˆ›å»ºæ§åˆ¶å™¨
	controller := &amp;PodController{
		clientset: clientset,
		queue: workqueue.NewTypedRateLimitingQueue(
			workqueue.DefaultTypedControllerRateLimiter[string]( "string"),
		),
		informer: podInformer,
		indexer:  podInformer.GetIndexer(),
	}

	// æ³¨å†Œäº‹ä»¶å¤„ç†å™¨
	podInformer.AddEventHandler(cache.ResourceEventHandlerFuncs{
		AddFunc:    controller.handleAdd,
		UpdateFunc: controller.handleUpdate,
		DeleteFunc: controller.handleDelete,
	})

	return controller
}
</code></pre>
<h3 id="--informers-the-eyes-on-the-cluster">â‘   Informers: The Eyes on the Cluster</h3>
<p>informeræ˜¯ä¸€ä¸ªç®¡é“ï¼Œå½“å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¯¥informerç®¡é“å¯ç¡®ä¿ï¼š</p>
<ul>
<li>æœ¬åœ°ç¼“å­˜local cacheå·²æ›´æ–°</li>
<li>ä»»ä½•å·²æ³¨å†Œçš„äº‹ä»¶å¤„ç†ç¨‹åº(add/update/delete)éƒ½ä¼šæ”¶åˆ°é€šçŸ¥</li>
</ul>
<p>informerä¸ä¼šç›´æ¥è°ƒç”¨æ§åˆ¶å™¨çš„Reconcileæ–¹æ³•ï¼Œäº‹ä»¶å¤„ç†ç¨‹åºçš„å”¯ä¸€å·¥ä½œæ˜¯å°†<code>key (namespace/name)</code>å…¥é˜Ÿï¼ˆworkQueueï¼‰</p>
<blockquote>
<p>ä¸ºä»€ä¹ˆä½¿ç”¨keyï¼Ÿ<br>
èµ„æºå¯¹è±¡å˜åŒ–å¾ˆå¿«â†’é”®æ›´ç¨³å®šâ†’æ›´é€‚åˆæ•°æ®å»é‡ã€‚</p>
</blockquote>
<pre><code>func (c *PodController) handleAdd(obj interface{}) {
	key, err := cache.MetaNamespaceKeyFunc(obj)
	if err != nil {
		klog.Errorf("Couldn't get key for object %+v: %v", obj, err)
		return
	}
	c.queue.Add(key)
}
</code></pre>
<h3 id="-keyä¸€æ—¦å…¥é˜Ÿå°±ç”±workqueueæ¥ç®¡">â‘¡ keyä¸€æ—¦å…¥é˜Ÿï¼Œå°±ç”±workQueueæ¥ç®¡</h3>
<ul>
<li>å»é‡</li>
<li>é‡è¯•ã€å‡ºé˜Ÿæ¶ˆè´¹å¤±è´¥é‡æ’ï¼š é˜Ÿåˆ—è¡Œä¸ºå¢å¼ºç³»ç»Ÿå¯ç”¨æ€§</li>
<li>é™é€Ÿï¼š å¼¹æ€§è®¾è®¡ï¼Œå¢å¼ºå¯ç”¨æ€§å’Œæ•ˆç‡</li>
</ul>
<h3 id="-listerå…¶å®å°±æ˜¯indexersç´¢å¼•å™¨">â‘¢ listerï¼šå…¶å®å°±æ˜¯Indexersç´¢å¼•å™¨</h3>
<p>ä½¿ç”¨listerä»local cache è¯»å–æœ€æ–°çš„èµ„æºçŠ¶æ€ï¼ˆä¸éœ€è¦ä»api serverè¯»å–ï¼‰ï¼Œ</p>
<p>æœ€ç»ˆæ‰§è¡Œæ§åˆ¶å™¨çš„<code>Reconcile</code>é€»è¾‘ã€‚</p>
<p><img src="https://img2024.cnblogs.com/blog/587720/202512/587720-20251223171158516-1068437746.png" alt="image" loading="lazy"></p>
<p>é€šè¿‡<code>workQueue</code>å°†æ¶æ„ä»åŸºäºèµ„æºäº‹ä»¶çš„é˜Ÿåˆ—è½¬æ¢ä¸ºåŸºäºèµ„æºçš„é˜Ÿåˆ— ã€‚</p>
<p>æ³¨æ„ï¼šè¿™ä¸ªæ—¶å€™çš„workQueueæœ‰äº‹ä»¶å‹ç¼©çš„æ•ˆæœï¼š åœ¨è¢«æ¶ˆè´¹ä¹‹å‰ï¼Œå¦‚æœè¯¥èµ„æºæœ‰å¤šä¸ªå˜æ›´äº‹ä»¶ï¼Œåªä¼šä¿ç•™é¦–æ¬¡å…¥é˜Ÿï¼ˆæ›´æ–°æ—¶é—´æˆ³ï¼‰ã€‚</p>
<p>è¿™éå¸¸é€‚åˆæ§åˆ¶å™¨çš„å£°æ˜å¼è®¾è®¡ï¼šControllerä¸å…³å¿ƒå¯¹è±¡å¦‚ä½•åˆ°è¾¾å½“å‰çŠ¶æ€ï¼Œåªå…³å¿ƒå½“å‰çŠ¶æ€æ˜¯å¦ä¸æœŸæœ›çŠ¶æ€ä¸€è‡´ï¼Œå¹¶é‡‡å–è¡ŒåŠ¨ä½¿å…¶ä¸€è‡´ã€‚</p>
<pre><code>func (c *PodController) Run(workers int, stopCh &lt;-chan struct{}) {
	defer c.queue.ShutDown()

	klog.Info("Starting Pod controller")

	go c.informer.Run(stopCh)

	if !cache.WaitForCacheSync(stopCh, c.informer.HasSynced) {
		klog.Error("Timed out waiting for caches to sync")
		return
	}

	for i := 0; i &lt; workers; i++ {
		go wait.Until(c.runWorker, time.Second, stopCh)
	}

	&lt;-stopCh
	klog.Info("Stopping Pod controller")
}

func (c *PodController) runWorker() {
	for c.processNextWorkItem() {
	}
}

func (c *PodController) processNextWorkItem() bool {
	key, quit := c.queue.Get()
	if quit {
		return false
	}

	defer c.queue.Done(key)

	err := c.syncPod(key)
	if err != nil {
		klog.Errorf("Error syncing pod %s: %v", key, err)
		c.queue.AddRateLimited(key)
		return true
	}

	c.queue.Forget(key)
	return true
}

func main() {
	// åˆ›å»º clientset
	// config, _ := rest.InClusterConfig()

	homepath := homedir.HomeDir()
	kubeconfig := filepath.Join(homepath, ".kube", "config")
	config, err := clientcmd.BuildConfigFromFlags("", kubeconfig) // é›†ç¾¤å¤–è®¤è¯è®¿é—® apiserver
	if err != nil {
		klog.Errorf("Error building kubeconfig: %v", err)
	}
	clientset, _ := kubernetes.NewForConfig(config)

	controller := NewPodController(clientset)
	stopCh := make(chan struct{})
	controller.Run(3, stopCh)
}
</code></pre>
<hr>
<h3 id="41--å±ä¸Šé›•èŠ±">4.1  å±ä¸Šé›•èŠ±</h3>
<p>ä¸Šæ–‡äº§ç”Ÿçš„"ä¸€å¨å¤§çš„"æ˜¯ä¸€ä¸ªé‡åº¦çš„äº‹ä»¶å¤„ç†è¡Œä¸ºï¼šsyncåˆ°mysqlå¹¶åšå‡ºé€šçŸ¥ã€‚</p>
<p>å’±å°±ç¼ºä¸€ä¸ªé˜Ÿåˆ—ï¼Œå¯ä»¥ä½¿ç”¨workQueueï¼Œ ä½†æ˜¯æœ¬æ¬¡éœ€æ±‚è¦è·Ÿè¸ªæ¯æ¬¡çŠ¶æ€å˜æ›´ï¼Œäºæ˜¯è¦è§„é¿workQueueçš„äº‹ä»¶å‹ç¼©æ•ˆæœã€‚</p>
<p>äºæ˜¯æœ¬æ¬¡å°†(åŸèµ„æºkey+ èµ„æºç‰ˆæœ¬+ èµ„æºçŠ¶æ€)æ•´ä½“ä½œä¸ºå…¥é˜Ÿå…ƒç´ ã€‚</p>
<pre><code> item := QueueItem{
        Key:     fmt.Sprintf("%s/%s", pod.Namespace, pod.Name),
        Version: pod.ResourceVersion,
        Status ï¼š pod.Statusï¼Œ
    }
</code></pre>
<p>åˆ©ç”¨é˜Ÿåˆ—å‰Šå³°å¡«è°·ï¼Œæ»¡è¶³äº†ä¸šåŠ¡çš„éœ€æ±‚å’Œé«˜å¯ç”¨ã€å¯æ‰©å±•è¦æ±‚ã€‚</p>
<p>æ³¨æ„å‡ºé˜Ÿæ¶ˆè´¹æ—¶ä»è¦ä¿è¯å¹‚ç­‰æ“ä½œï¼Œ å¯é‡‡ç”¨ï¼ˆèµ„æºkey+èµ„æºversion) ä½œä¸ºå¹‚ç­‰é”®å®ç°å¹‚ç­‰çš„åˆ¤å®šã€‚</p>
<p>è¿™å°±æ˜¯æŸä¼ä¸šé¡¹ç›®å±ä¸Šé›•èŠ±çš„ç»å†ï¼Œ è€é¸Ÿè½»å–·ã€‚</p>
<p>ğŸ¤– ğŸš€ ğŸ‘‘ ğŸ› ï¸ ğŸ’¡ ğŸŒŸ ğŸ¤– â˜• ğŸ”— ğŸ“„ ğŸ“– ğŸŒ ğŸ’¼ ğŸ—£ï¸<br>
ğŸ³ğŸšœğŸ‘ğŸ”ğŸ˜„ğŸŒ</p>

</div>
<div id="MySignature" role="contentinfo">
    <hr style="FILTER: alpha(opacity=100,finishopacity=0,style=3)" width="80%" color="#987cb9" size="3">
<div style="text-align:center;">
<p>æœ¬æ–‡æ¥è‡ªåšå®¢å›­ï¼Œä½œè€…ï¼š{æœ‰æ€åº¦çš„é©¬ç”²}ï¼Œè½¬è½½è¯·æ³¨æ˜åŸæ–‡é“¾æ¥ï¼š<a href="https://www.cnblogs.com/JulianHuang/p/19388140" target="_blank">https://www.cnblogs.com/JulianHuang/p/19388140</a></p>
<strong style="color: red; ">æ¬¢è¿å…³æ³¨æˆ‘çš„åŸåˆ›æŠ€æœ¯ã€èŒåœºå…¬ä¼—å·ï¼Œ åŠ å¥½å‹è°ˆå¤©è¯´åœ°ï¼Œä¸€èµ·è¿›åŒ–</strong>
<div><img style="width: 250px;height:250px;" src="https://blog-static.cnblogs.com/files/JulianHuang/QR.gif"> </div>

</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-23 17:12">2025-12-23 17:12</span>&nbsp;
<a href="https://www.cnblogs.com/JulianHuang">ç ç”²å“¥ä¸å·</a>&nbsp;
é˜…è¯»(<span id="post_view_count">20</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19388140);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19388140', targetLink: 'https://www.cnblogs.com/JulianHuang/p/19388140', title: '&amp;#128640;ç³Ÿç³•ï¼Œæˆ‘å®ç°çš„k8s informerå¥½åƒæ˜¯ä¾æ‰˜ç­”è¾©' })">ä¸¾æŠ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ å…¨æ ˆå¼€å‘å®æˆ˜ï¼šWPF+FFmpeg+GISï¼Œæ‰“é€ å·¥ä¸šçº§é›·è¾¾æ¢æµ‹ç»ˆç«¯ ]]></title>
    <link>https://www.cnblogs.com/yuanchenhui/p/19387990/radar-client</link>
    <guid>ad1d092c16677ff6b01d44d7afffb1ad</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/yuanchenhui/p/19387990/radar-client" title="å‘å¸ƒäº 2025-12-23 16:52">
    <span role="heading" aria-level="2">å…¨æ ˆå¼€å‘å®æˆ˜ï¼šWPF+FFmpeg+GISï¼Œæ‰“é€ å·¥ä¸šçº§é›·è¾¾æ¢æµ‹ç»ˆç«¯</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        æœ¬æ–‡ä¸ºç‹¬ç«‹å¼€å‘çš„å·¥ä¸šçº§é›·è¾¾æ¢æµ‹ç»ˆç«¯æŠ€æœ¯å®è·µæ€»ç»“ã€‚äº§å“åŸºäº WPFã€FFmpegã€OpenCVã€GMap.NETã€Vortice ç­‰æŠ€æœ¯æ ˆï¼Œç»“åˆ GPU åŠ é€Ÿç»˜å›¾ï¼Œæ”¯æŒ TCP/UDP åŒåè®®é€šä¿¡ä¸å¤šè®¾å¤‡è”åŠ¨ï¼Œæ ¸å¿ƒåŠŸèƒ½æ¶µç›–é›·è¾¾èˆªè¿¹å¯è§†åŒ–ã€æ™ºèƒ½åŒºåŸŸé¢„è­¦ã€å†å²æ•°æ®å›æ”¾ã€ç¦»çº¿åœ°å›¾ä¸‹è½½ç­‰ï¼Œå¯ç²¾å‡†æ»¡è¶³å¤šåœºæ™¯ç›‘æµ‹éœ€æ±‚ï¼Œå±•ç°å…¨æ ˆå¼€å‘ä¸æŠ€æœ¯è½åœ°èƒ½åŠ›
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p><span style="font-size: 16px">ã€€ã€€åœ¨å·¥ä¸šè½¯ä»¶å›½äº§åŒ–ä¸æ™ºèƒ½åŒ–å‡çº§çš„æµªæ½®ä¸­ï¼Œå°†å¤æ‚æŠ€æœ¯è½¬åŒ–ä¸ºè´´åˆåœºæ™¯çš„å®ç”¨è§£å†³æ–¹æ¡ˆï¼Œæ˜¯æŠ€æœ¯å¼€å‘è€…çš„æ ¸å¿ƒä»·å€¼æ‰€åœ¨ã€‚è¿‘æœŸç‹¬ç«‹å®Œæˆäº†ä¸€æ¬¾å·¥ä¸šçº§é›·è¾¾æ¢æµ‹ç»ˆç«¯çš„å…¨æµç¨‹å¼€å‘ï¼Œä»æ¶æ„è®¾è®¡ã€æ ¸å¿ƒç¼–ç åˆ°åŠŸèƒ½è½åœ°å…¨ç¨‹è‡ªä¸»æŠŠæ§ï¼Œèåˆ WPF ç•Œé¢å¼€å‘ã€å¤šåè®®é€šä¿¡ã€GIS å¯è§†åŒ–ã€GPU åŠ é€Ÿç»˜å›¾ç­‰å…³é”®æŠ€æœ¯ï¼Œæ—¢æ»¡è¶³ä¸“ä¸šåœºæ™¯çš„é«˜ç²¾åº¦éœ€æ±‚ï¼Œä¹Ÿå®ç°äº†æ˜“ç”¨æ€§ä¸æ‰©å±•æ€§çš„å¹³è¡¡ï¼Œåœ¨æ­¤åˆ†äº«é¡¹ç›®çš„æŠ€æœ¯äº®ç‚¹ä¸åŠŸèƒ½çªç ´ã€‚</span></p>
<p><span style="font-size: 16px"><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/245753/202512/245753-20251223164820636-1827158504.png" class="lazyload"></span></p>
<h2 class="header-iWP5WJ auto-hide-last-sibling-br"><span style="font-size: 16px">ä¸€ã€æ¶æ„è®¾è®¡ï¼šæ¨¡å—åŒ– + é«˜å…¼å®¹ï¼Œç­‘ç‰¢ç¨³å®šæ ¹åŸº</span></h2>
<div class="auto-hide-last-sibling-br paragraph-pP9ZLC paragraph-element br-paragraph-space"><span style="font-size: 16px">ã€€ã€€ç³»ç»Ÿé‡‡ç”¨æ¨¡å—åŒ–æ¶æ„è®¾è®¡ï¼Œå°†æ ¸å¿ƒåŠŸèƒ½æ‹†è§£ä¸ºå‚æ•°é…ç½®ã€æ•°æ®é‡‡é›†ã€æ™ºèƒ½å¤„ç†ã€å¯è§†åŒ–å±•ç¤ºã€ç¦»çº¿é€‚é…äº”å¤§æ¨¡å—ï¼Œå„æ¨¡å—ç‹¬ç«‹è¿è¡Œä¸”æ— ç¼è¡”æ¥ï¼Œæ—¢ä¿è¯äº†ç³»ç»Ÿç¨³å®šæ€§ï¼Œä¹Ÿä¸ºåç»­åŠŸèƒ½æ‹“å±•é¢„ç•™äº†çµæ´»ç©ºé—´ã€‚</span></div>
<div class="auto-hide-last-sibling-br paragraph-pP9ZLC paragraph-element br-paragraph-space"><span style="font-size: 16px">åœ¨å…¼å®¹æ€§ä¸åº•å±‚æŠ€æœ¯é€‰å‹ä¸Šå®ç°å¤šé‡çªç ´ï¼š</span></div>
<ul class="auto-hide-last-sibling-br">
<li><span style="font-size: 16px">ç•Œé¢å¼€å‘ï¼šé‡‡ç”¨ WPF æ¡†æ¶æ­å»ºäº¤äº’ç•Œé¢ï¼Œå…¼é¡¾è§†è§‰ç¾è§‚ä¸æ“ä½œæµç•…æ€§ï¼Œæ”¯æŒè‡ªå®šä¹‰æ§ä»¶å¸ƒå±€ä¸æ ·å¼é€‚é…ï¼Œè®©å¤æ‚åŠŸèƒ½çš„æ“ä½œé€»è¾‘æ›´æ¸…æ™°ç›´è§‚ï¼›</span></li>
<li><span style="font-size: 16px">GIS åœ°å›¾é€‚é…ï¼šé›†æˆ<a class="link-bJL8ai" href="https://gmap.net/" target="_blank" rel="noopener nofollow">GMap.NET</a>æ§ä»¶å®ç°åœ°å›¾åŠ è½½ä¸äº¤äº’ï¼Œæ”¯æŒåœ¨çº¿é«˜å¾·å«æ˜Ÿåœ°å›¾æ¥å…¥ä¸æœ¬åœ°ç¦»çº¿åœ°å›¾å­˜å‚¨ï¼Œå¯ç²¾å‡†å‘ˆç°åœ°ç†åæ ‡ã€è·ç¦»æµ‹ç®—ç­‰ç©ºé—´æ•°æ®ï¼›</span></li>
<li><span style="font-size: 16px">å¤šåè®®é€šä¿¡ï¼šåŸç”Ÿæ”¯æŒ TCP/UDP åŒåè®®é€šä¿¡ï¼Œå¯æ— ç¼å¯¹æ¥é›·è¾¾ä¸»æœºã€å…‰ç”µè®¾å¤‡ã€ADS-B è®¾å¤‡åŠè§†é¢‘å¤§å±ï¼Œæ•°æ®ä¼ è¾“å»¶è¿Ÿæ§åˆ¶åœ¨æ¯«ç§’çº§ï¼Œç¡®ä¿æŒ‡ä»¤ä¸‹å‘ä¸æ•°æ®å›ä¼ çš„å®æ—¶åŒæ­¥ï¼›</span></li>
<li><span style="font-size: 16px">è§†é¢‘è§£æèƒ½åŠ›ï¼šæ•´åˆ FFmpeg ä¸ OpenCV æŠ€æœ¯ï¼Œå®ç°å…‰ç”µè®¾å¤‡å›ä¼ è§†é¢‘çš„é«˜æ•ˆè§£ç ä¸å®æ—¶å±•ç¤ºï¼Œæ”¯æŒè§†é¢‘ç”»é¢ä¸é›·è¾¾èˆªè¿¹çš„è”åŠ¨æ ‡æ³¨ï¼ŒåŠ©åŠ›ç›®æ ‡ç²¾å‡†è¯†åˆ«ã€‚</span></li>
</ul>
<h2 class="header-iWP5WJ auto-hide-last-sibling-br"><span style="font-size: 16px">äºŒã€æ ¸å¿ƒæŠ€æœ¯äº®ç‚¹ï¼šç¡¬æ ¸æŠ€æœ¯èµ‹èƒ½åŠŸèƒ½è½åœ°</span></h2>
<h3 class="header-iWP5WJ auto-hide-last-sibling-br"><span style="font-size: 16px">1. å¯è§†åŒ–å¼•æ“ï¼šGPU åŠ é€Ÿ + ä¸“ä¸šç»„ä»¶ï¼Œå¤æ‚æ•°æ®ç›´è§‚å‘ˆç°</span></h3>
<div class="auto-hide-last-sibling-br paragraph-pP9ZLC paragraph-element br-paragraph-space"><span style="font-size: 16px">ã€€ã€€ä¸ºè§£å†³å·¥ä¸šçº§ç›‘æµ‹åœºæ™¯ä¸­æ•°æ®é‡å¤§ã€å¯è§†åŒ–è¦æ±‚é«˜çš„ç—›ç‚¹ï¼Œæ„å»ºäº†é«˜æ•ˆçš„å¯è§†åŒ–å¼•æ“ï¼š</span></div>
<ul class="auto-hide-last-sibling-br">
<li><span style="font-size: 16px">GPU åå°ç»˜å›¾ï¼šé‡‡ç”¨ GPU åŠ é€Ÿç»˜å›¾æŠ€æœ¯ï¼Œå®ç°æµ·é‡èˆªè¿¹æ•°æ®çš„å®æ—¶æ¸²æŸ“ï¼Œæ”¯æŒä¸‡çº§èˆªè¿¹å¹¶è¡Œå±•ç¤ºæ— å¡é¡¿ï¼Œèˆªè¿¹åˆ·æ–°é¢‘ç‡ä¸æ•°æ®é‡‡é›†é¢‘ç‡åŒæ­¥ï¼›</span></li>
<li><span style="font-size: 16px">çƒ­åŠ›å›¾ç²¾å‡†ç”Ÿæˆï¼šåŸºäº Vortice å›¾å½¢åº“å¼€å‘çƒ­åŠ›å›¾åŠŸèƒ½ï¼Œé€šè¿‡çº¢è‰²æ¢¯åº¦æ–‘å—ç›´è§‚å‘ˆç°èˆªè¿¹å¯†åº¦åˆ†å¸ƒï¼Œé¢œè‰²è¶Šæ·±ä»£è¡¨ç›®æ ‡æ´»åŠ¨è¶Šé¢‘ç¹ï¼Œçƒ­åŠ›å€¼è®¡ç®—æ”¯æŒè‡ªå®šä¹‰ç»Ÿè®¡æ—¶é•¿ï¼ˆ10-60 åˆ†é’Ÿå¯é…ç½®ï¼‰ï¼›</span></li>
<li><span style="font-size: 16px">åˆ†å±‚å¯è§†åŒ–è®¾è®¡ï¼šç»¿è‰²çº¿æ¡è®°å½•ç›®æ ‡å†å²è¿åŠ¨è·¯å¾„ï¼Œé»„è‰²ç‚¹ä½æ ‡è¯†å½“å‰å®æ—¶ä½ç½®ï¼Œé«˜åº¦ï¼ˆhï¼Œå•ä½ï¼šç±³ï¼‰ã€é€Ÿåº¦ï¼ˆsï¼Œå•ä½ï¼šç±³ / ç§’ï¼‰ç­‰å…³é”®å‚æ•°å®æ—¶æ ‡æ³¨ï¼Œé€‰ä¸­ç›®æ ‡è‡ªåŠ¨é«˜äº®ä¸ºçº¢è‰²ï¼Œå…¨é‡æ•°æ®ä¸€é”®æº¯æºï¼›</span></li>
<li><span style="font-size: 16px">é¼ æ ‡å®šä½è¾…åŠ©ï¼šç»“åˆ<a class="link-bJL8ai" href="https://gmap.net/" target="_blank" rel="noopener nofollow">GMap.NET</a>çš„åœ°ç†ä¿¡æ¯å¤„ç†èƒ½åŠ›ï¼Œå®æ—¶æ˜¾ç¤ºé¼ æ ‡æ‰€åœ¨ä½ç½®çš„ç»çº¬åº¦ã€åˆ°é›·è¾¾çš„ç›´çº¿è·ç¦»ä¸æ–¹ä½è§’åº¦ï¼Œä¸ºç°åœºå†³ç­–æä¾›ç²¾å‡†æ•°æ®æ”¯æ’‘ã€‚</span></li>
</ul>
<h3 class="header-iWP5WJ auto-hide-last-sibling-br"><span style="font-size: 16px">2. å¤šæºæ•°æ®èåˆï¼šè®¾å¤‡è”åŠ¨ + æ™ºèƒ½å¤„ç†ï¼Œç›‘æµ‹ç»´åº¦å…¨é¢è¦†ç›–</span></h3>
<div class="auto-hide-last-sibling-br paragraph-pP9ZLC paragraph-element br-paragraph-space"><span style="font-size: 16px">ç³»ç»Ÿå…·å¤‡å¼ºå¤§çš„æ•°æ®é‡‡é›†ä¸å¤„ç†èƒ½åŠ›ï¼Œå®ç°å¤šç»´åº¦ç›‘æµ‹é—­ç¯ï¼š</span></div>
<ul class="auto-hide-last-sibling-br">
<li><span style="font-size: 16px">å¤šè®¾å¤‡æ— ç¼å¯¹æ¥ï¼šæ”¯æŒé›·è¾¾ã€ADS-Bã€å…‰ç”µè®¾å¤‡å¤šæºæ•°æ®æ¥å…¥ï¼ŒåŒæ­¥è·å–ç›®æ ‡çš„ä½ç½®ã€é«˜åº¦ã€é€Ÿåº¦ã€ç±»å‹ã€æ–œè·ã€æ–¹ä½è§’ç­‰æ ¸å¿ƒå‚æ•°ï¼Œå½¢æˆå®Œæ•´çš„ç›®æ ‡ä¿¡æ¯ç”»åƒï¼›</span></li>
<li><span style="font-size: 16px">è§†é¢‘ä¸é›·è¾¾æ•°æ®è”åŠ¨ï¼šé€šè¿‡ FFmpeg è§£ç å…‰ç”µè§†é¢‘æµï¼Œç»“åˆ OpenCV çš„å›¾åƒå¤„ç†èƒ½åŠ›ï¼Œå®ç°è§†é¢‘ç”»é¢ä¸­ç›®æ ‡ä¸é›·è¾¾èˆªè¿¹çš„ç²¾å‡†åŒ¹é…ï¼Œè®©ç›‘æµ‹ä» â€œæ•°æ®è¿½è¸ªâ€ å‡çº§ä¸º â€œè§†è§‰ç¡®è®¤â€ï¼›</span></li>
<li><span style="font-size: 16px">æ™ºèƒ½èˆªè¿¹å¤„ç†ï¼šä¼˜åŒ–èˆªè¿¹è·Ÿè¸ªç®—æ³•ï¼Œè‡ªåŠ¨æ ‡è®°è¶…æ—¶å¤±è”ç›®æ ‡ï¼Œèˆªè¿¹è¯†åˆ«è¯¯å·®ç‡æ§åˆ¶åœ¨æä½æ°´å¹³ï¼ŒåŒæ—¶æ”¯æŒèˆªè¿¹æ˜¾ç¤ºç‚¹æ•°ã€æ¶ˆå¤±è¶…æ—¶æ—¶é—´è‡ªå®šä¹‰ï¼Œé€‚é…ä¸åŒåœºæ™¯ç›‘æµ‹éœ€æ±‚ï¼›</span></li>
<li><span style="font-size: 16px">ç‰¹æ®Šç›®æ ‡è¯†åˆ«ï¼šé’ˆå¯¹é¸Ÿç±»ç­‰ç‰¹æ®Šç›®æ ‡è®¾è®¡ä¸“å±æ ‡è¯†ï¼Œç»“åˆé›·è¾¾å›æ³¢å¹…åº¦ã€ä¿¡å™ªæ¯”ç­‰å‚æ•°ï¼Œå®ç°ç›®æ ‡ç±»å‹çš„ç²¾å‡†åˆ†ç±»ï¼Œé€‚é…ç”Ÿæ€ç›‘æµ‹ç­‰ç»†åˆ†åœºæ™¯ã€‚</span></li>
</ul>
<h3 class="header-iWP5WJ auto-hide-last-sibling-br"><span style="font-size: 16px">3. æ™ºèƒ½é¢„è­¦ + çµæ´»é€‚é…ï¼šåœºæ™¯åŒ–åŠŸèƒ½æ»¡è¶³å¤šå…ƒéœ€æ±‚</span></h3>
<div class="auto-hide-last-sibling-br paragraph-pP9ZLC paragraph-element br-paragraph-space"><span style="font-size: 16px">æ·±åº¦è´´åˆå·¥ä¸šåœºæ™¯çš„å®é™…è¯‰æ±‚ï¼Œå®ç°ä¸ªæ€§åŒ–ä¸å®ç”¨æ€§çš„ç»Ÿä¸€ï¼š</span></div>
<ul class="auto-hide-last-sibling-br">
<li><span style="font-size: 16px">è‡ªå®šä¹‰é¢„è­¦ä½“ç³»ï¼šæ”¯æŒ 3 ä¸ªç‹¬ç«‹é¢„è­¦åŒºåŸŸé…ç½®ï¼Œå¯é€šè¿‡åæ ‡è¾“å…¥æˆ–åœ°å›¾é€‰ç‚¹åˆ’å®šèŒƒå›´ï¼Œç›®æ ‡è¿›å…¥åè‡ªåŠ¨è§¦å‘é—ªçƒã€å£°éŸ³æŠ¥è­¦ï¼ŒåŒæ—¶è‡ªåŠ¨é€‰ä¸­ç›®æ ‡ï¼Œé£é™©é˜²æ§ç²¾å‡†é«˜æ•ˆï¼›</span></li>
<li><span style="font-size: 16px">é¢„è­¦å‚æ•°ç²¾ç»†åŒ–ï¼šå¯çµæ´»è®¾ç½®é¢„è­¦åŒºåŸŸçš„é«˜åº¦ä¸Šä¸‹é™ï¼ˆ0-500 ç±³å¯é…ç½®ï¼‰ã€è·ç¦»é˜ˆå€¼ï¼ˆ300/600/900 ç±³ä¸‰æ¡£å¯é€‰ï¼‰ï¼Œæ”¯æŒé¢„è­¦ç­‰çº§é¢œè‰²è‡ªå®šä¹‰ï¼ˆé€šè¿‡ RGB + é€æ˜åº¦å€¼è°ƒæ•´ï¼‰ï¼Œè§†è§‰åŒºåˆ†æ›´æ¸…æ™°ï¼›</span></li>
<li><span style="font-size: 16px">å†å²æ•°æ®å›æº¯ï¼šæ”¯æŒæœ¬åœ°.bin æ ¼å¼é›·è¾¾æ•°æ®æ–‡ä»¶è¯»å–ï¼Œå¯è‡ªç”±è°ƒæ•´å›æ”¾é€Ÿåº¦ã€è®¾å®šèˆªè¿¹æ˜¾ç¤ºæ•°é‡ï¼Œè¿›åº¦æ¡ä¸æ—¶é—´æˆ³åŒæ­¥è”åŠ¨ï¼Œç²¾å‡†è·³è½¬å›æ”¾èŠ‚ç‚¹ï¼Œä¾¿äºåæœŸå¤ç›˜åˆ†æï¼›</span></li>
<li><span style="font-size: 16px">ç¦»çº¿åœ°å›¾é€‚é…ï¼šé€šè¿‡<a class="link-bJL8ai" href="https://gmap.net/" target="_blank" rel="noopener nofollow">GMap.NET</a>çš„ç¦»çº¿åœ°å›¾ç®¡ç†åŠŸèƒ½ï¼Œæ”¯æŒè‡ªå®šä¹‰åŒºåŸŸå®½åº¦ / é«˜åº¦ï¼ˆå•ä½ï¼šåƒç±³ï¼‰ï¼ŒæŒ‰éœ€é€‰æ‹©åœ°å›¾å±‚çº§ï¼ˆ6-18 çº§ï¼Œçº§åˆ«è¶Šé«˜ç²¾åº¦è¶Šé«˜ï¼‰ä¸‹è½½å­˜å‚¨ï¼Œæ— ç½‘ç»œç¯å¢ƒä¸‹ä¹Ÿèƒ½ç¨³å®šä½¿ç”¨ã€‚</span></li>
</ul>
<h3 class="header-iWP5WJ auto-hide-last-sibling-br"><span style="font-size: 16px">4. ç²¾ç»†åŒ–æ§åˆ¶ï¼šæŒ‰éœ€å®šåˆ¶ï¼Œæ“ä½œä½“éªŒæ›´é«˜æ•ˆ</span></h3>
<div class="auto-hide-last-sibling-br paragraph-pP9ZLC paragraph-element br-paragraph-space"><span style="font-size: 16px">æä¾›å…¨æ–¹ä½çš„æ˜¾ç¤ºæ§åˆ¶é€‰é¡¹ï¼Œè®©ç•Œé¢çµæ´»é€‚é…ä¸åŒä½¿ç”¨åœºæ™¯ï¼š</span></div>
<ul class="auto-hide-last-sibling-br">
<li><span style="font-size: 16px">ç»„ä»¶æ˜¾ç¤ºå¼€å…³ï¼šå¯è‡ªç”±æ§åˆ¶ç›®æ ‡åˆ—è¡¨ã€å…‰ç”µè§†é¢‘çª—å£ã€æ—¥å¿—çª—å£ã€é¢„è­¦åŒºåŸŸæ ‡è¯†ç­‰ç»„ä»¶çš„æ˜¾ç¤º / éšè—ï¼Œå‡å°‘å†—ä½™ä¿¡æ¯å¹²æ‰°ï¼›</span></li>
<li><span style="font-size: 16px">ä¿¡æ¯å±•ç¤ºå®šåˆ¶ï¼šæ”¯æŒèˆªè¿¹é€Ÿåº¦ã€ç›®æ ‡ç±»å‹ã€çƒ­åŠ›å›¾æç¤ºç­‰ç»†èŠ‚ä¿¡æ¯çš„æŒ‰éœ€å¼€å¯ï¼Œåœ°å›¾æ ‡æ³¨ç¼©æ”¾å€æ•°å¯è°ƒèŠ‚ï¼ˆå½“å‰é»˜è®¤ 1.4 å€ï¼‰ï¼Œé€‚é…ä¸åŒæ“ä½œä¹ æƒ¯ï¼›</span></li>
<li><span style="font-size: 16px">å¤šè§†å›¾åˆ‡æ¢ï¼šç›®æ ‡åˆ—è¡¨ä¸ç„¦ç‚¹ä¿¡æ¯åŒå‘åˆ‡æ¢ï¼Œæ—¢æ”¯æŒå…¨å±€èˆªè¿¹æ•°æ®æ¦‚è§ˆï¼ˆå«ç¼–å·ã€æ–œè·ã€æ–¹ä½ã€è·Ÿè¸ªæ¬¡æ•°ç­‰ 11 é¡¹å‚æ•°ï¼‰ï¼Œä¹Ÿå¯èšç„¦å•ä¸ªç›®æ ‡çš„è¯¦ç»†å‚æ•°ï¼Œæ“ä½œçµæ´»é«˜æ•ˆï¼›</span></li>
<li><span style="font-size: 16px">é…ç½®ä¸€é”®ä¿å­˜ï¼šæ‰€æœ‰å‚æ•°é…ç½®æ”¯æŒä¸€é”®ä¿å­˜ï¼Œé‡å¯å³æ—¶ç”Ÿæ•ˆï¼ŒåŒ…å«é›·è¾¾è½¬è§’è¡¥å¿ã€åœ°å›¾æš—å¤œæ¨¡å¼äº®åº¦ã€ç»Ÿè®¡æ—¶é—´é—´éš”ç­‰æ ¸å¿ƒå‚æ•°ï¼Œæ— éœ€ä¸“ä¸šæŠ€æœ¯å¹²é¢„å³å¯å®Œæˆç³»ç»Ÿè°ƒè¯•ã€‚</span></li>
</ul>
<h2 class="header-iWP5WJ auto-hide-last-sibling-br"><span style="font-size: 16px">ä¸‰ã€æŠ€æœ¯å®åŠ›æ²‰æ·€ï¼šå…¨æ ˆå¼€å‘èƒ½åŠ›çš„é›†ä¸­ä½“ç°</span></h2>
<div class="auto-hide-last-sibling-br paragraph-pP9ZLC paragraph-element br-paragraph-space"><span style="font-size: 16px">è¿™æ¬¾ç»ˆç«¯çš„è½åœ°ï¼Œæ˜¯æˆ‘åœ¨å¤šé¢†åŸŸæŠ€æœ¯èƒ½åŠ›ä¸å·¥ç¨‹æ€ç»´çš„é›†ä¸­å®è·µï¼š</span></div>
<ul class="auto-hide-last-sibling-br">
<li><span style="font-size: 16px">è·¨æŠ€æœ¯æ ˆèåˆï¼šç†Ÿç»ƒè¿ç”¨ WPF ç•Œé¢å¼€å‘ã€<a class="link-bJL8ai" href="https://gmap.net/" target="_blank" rel="noopener nofollow">GMap.NET</a>&nbsp;GIS æ§ä»¶ã€FFmpeg/OpenCV è§†é¢‘å¤„ç†ã€Vortice å›¾å½¢åº“ã€GPU åŠ é€Ÿç»˜å›¾ã€å¤šåè®®ç½‘ç»œé€šä¿¡ç­‰æ ¸å¿ƒæŠ€æœ¯ï¼Œå®ç°ä»ç¡¬ä»¶å¯¹æ¥åˆ°åº•å±‚ç®—æ³•çš„å…¨æ ˆè¦†ç›–ï¼›</span></li>
<li><span style="font-size: 16px">é—®é¢˜è§£å†³èƒ½åŠ›ï¼šæ”»å…‹å¤šè®¾å¤‡åè®®å…¼å®¹ã€æµ·é‡èˆªè¿¹å¹¶è¡Œæ¸²æŸ“ã€è§†é¢‘ä¸é›·è¾¾æ•°æ®è”åŠ¨ã€ç¦»çº¿ç¯å¢ƒé€‚é…ç­‰è¡Œä¸šç—›ç‚¹ï¼Œç¡®ä¿ç³»ç»Ÿåœ¨å¤æ‚åœºæ™¯ä¸‹çš„ç¨³å®šè¿è¡Œï¼›</span></li>
<li><span style="font-size: 16px">æ€§èƒ½ä¼˜åŒ–èƒ½åŠ›ï¼šé€šè¿‡ GPU åŠ é€Ÿã€ç®—æ³•ä¼˜åŒ–ã€æ•°æ®ç¼“å­˜ç­‰æŠ€æœ¯æ‰‹æ®µï¼Œå°†ç³»ç»Ÿå“åº”å»¶è¿Ÿæ§åˆ¶åœ¨æ¯«ç§’çº§ï¼Œæ”¯æŒé•¿æ—¶é—´è¿ç»­è¿è¡Œæ— å†…å­˜æ³„æ¼ï¼›</span></li>
<li><span style="font-size: 16px">äº§å“åŒ–æ€ç»´ï¼šå…¼é¡¾æŠ€æœ¯å…ˆè¿›æ€§ä¸ç”¨æˆ·æ˜“ç”¨æ€§ï¼Œé…å¥—å®Œæ•´çš„æ“ä½œè¯´æ˜æ–‡æ¡£ï¼Œæ¯ä¸ªåŠŸèƒ½æ¨¡å—éƒ½å›´ç»•å®é™…ä½¿ç”¨åœºæ™¯è®¾è®¡ï¼Œå®ç° â€œä¸“ä¸šä¸å¤æ‚ã€ç²¾å‡†ä¸ç¹çâ€ çš„æ ¸å¿ƒç›®æ ‡ã€‚</span></li>
</ul>
<div class="auto-hide-last-sibling-br paragraph-pP9ZLC paragraph-element br-paragraph-space"><span style="font-size: 16px">ã€€ã€€åœ¨å·¥ä¸šè½¯ä»¶å¼€å‘é¢†åŸŸï¼Œå§‹ç»ˆåšæŒä»¥æŠ€æœ¯ä¸ºåŸºçŸ³ã€ä»¥åœºæ™¯ä¸ºå¯¼å‘ï¼Œé€šè¿‡æŒç»­çš„å®è·µä¸è¿­ä»£ï¼Œä¸æ–­æå‡å¤æ‚ç³»ç»Ÿçš„è®¾è®¡ä¸è½åœ°èƒ½åŠ›ã€‚æœªæ¥å°†ç»§ç»­èšç„¦å·¥ä¸šçº§è½¯ä»¶çš„æ™ºèƒ½åŒ–ã€å›½äº§åŒ–æ–¹å‘ï¼Œæ¢ç´¢æ›´å¤šæŠ€æœ¯ä¸åœºæ™¯çš„èåˆå¯èƒ½ï¼Œç”¨æ‰å®çš„æŠ€æœ¯å®åŠ›ä¸ºä¸åŒåœºæ™¯æä¾›é«˜æ•ˆã€ç¨³å®šçš„è§£å†³æ–¹æ¡ˆã€‚</span></div>
</div>
<div id="MySignature" role="contentinfo">
    ä¸“æ³¨C#ã€C++ã€‚æ“…é•¿WPFã€WinFormã€QTç­‰æŠ€æœ¯ã€‚
ç ”ç©¶ofdå¤šå¹´ï¼Œå¼€å‘äº†ä¸€äº›åˆ—äº§å“ã€‚
æŠ€æœ¯äº¤æµQQç¾¤ï¼š565438497ã€‚
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-23 16:52">2025-12-23 16:52</span>&nbsp;
<a href="https://www.cnblogs.com/yuanchenhui">æºä¹‹ç¼˜-ä¸“æ³¨WPFå¼€å‘</a>&nbsp;
é˜…è¯»(<span id="post_view_count">156</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19387990);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19387990', targetLink: 'https://www.cnblogs.com/yuanchenhui/p/19387990/radar-client', title: 'å…¨æ ˆå¼€å‘å®æˆ˜ï¼šWPF+FFmpeg+GISï¼Œæ‰“é€ å·¥ä¸šçº§é›·è¾¾æ¢æµ‹ç»ˆç«¯' })">ä¸¾æŠ¥</a>
</div>
         ]]>
    </description>
    </item>
        </channel>
        </rss>