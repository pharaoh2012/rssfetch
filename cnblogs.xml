<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åå®¢å­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2026-01-13T04:37:16.443Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åå®¢å­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ vueä½¿ç¨hå½æ°å°è£dialogç»ä»¶ï¼ä»¥å½ä»¤çå½¢å¼ä½¿ç¨dialogç»ä»¶ ]]></title>
    <link>https://www.cnblogs.com/IwishIcould/p/19147850</link>
    <guid>56b4e89dad859f4533e32025a0c3e728</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/IwishIcould/p/19147850" title="åå¸äº 2026-01-13 09:10">
    <span role="heading" aria-level="2">vueä½¿ç¨hå½æ°å°è£dialogç»ä»¶ï¼ä»¥å½ä»¤çå½¢å¼ä½¿ç¨dialogç»ä»¶</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h4 id="åºæ¯">åºæ¯</h4>
<p>æäºæ¶åæä»¬çé¡µé¢æ¯æå¾å¤çå¼¹çª<br>
å¦ææä»¬æè¿äºå¼¹çªé½åhtmlä¸­ä¼æä¸å¤§å¨<br>
å æ­¤ï¼æä»¬éè¦æå¼¹çªå°è£æå½ä»¤å¼çå½¢å¼</p>
<h4 id="å½ä»¤å¼å¼¹çª">å½ä»¤å¼å¼¹çª</h4>
<pre><code>// ä½¿ç¨å¼¹çªçç»ä»¶
&lt;template&gt;
  &lt;div&gt;
    &lt;el-button @click="openMask"&gt;ç¹å»å¼¹çª&lt;/el-button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import childTest from '@/components/childTest.vue'
import { renderDialog } from '@/hooks/dialog'
function openMask(){
  // ç¬¬1ä¸ªåæ°ï¼è¡¨ç¤ºçæ¯ç»ä»¶ï¼ä½ åå¼¹çªä¸­çç»ä»¶
  // ç¬¬2ä¸ªåæ°ï¼è¡¨ç¤ºçç»ä»¶å±æ§ï¼æ¯å¦ï¼ç¡®è®¤æé®çåç§°ç­
  // ç¬¬3ä¸ªåæ°ï¼è¡¨ç¤ºçæ¨¡ææ¡çå±æ§ãæ¯å¦ï¼æ¨¡æå®½çå®½åº¦ï¼æ é¢åç§°ï¼æ¯å¦å¯ç§»å¨
  renderDialog(childTest,{},{title:'æµè¯å¼¹çª'})
}
&lt;/script&gt;
</code></pre>
<pre><code>// å°è£çå¼¹çª
import { createApp, h } from "vue";
import { ElDialog } from "element-plus";
export function renderDialog(component:any,props:any, modalProps:any){
 const dialog  = h(
    ElDialog,   // æ¨¡ææ¡ç»ä»¶
    {
      ...modalProps, // æ¨¡ææ¡å±æ§
      modelValue:true, // æ¨¡ææ¡æ¯å¦æ¾ç¤º
    }, // å ä¸ºæ¯æ¨¡ææ¡ç»ä»¶ï¼è¯å®æ¯æ¨¡ææ¡çå±æ§
    {
      default:()=&gt;h(component, props ) // ææ§½ï¼el-dialogä¸çåå®¹
    }
  )
 console.log(dialog)
  // åå»ºä¸ä¸ªæ°ç Vue åºç¨å®ä¾ãè¿ä¸ªåºç¨å®ä¾æ¯ç¬ç«çï¼ä¸ä¸»åºç¨åç¦»ã
  const app = createApp(dialog)
  const div = document.createElement('div')
  document.body.appendChild(div)
  app.mount(div)
}
</code></pre>
<pre><code>//childTest.vue ç»ä»¶
&lt;template&gt;
  &lt;div&gt;
    &lt;span&gt;It's a modal Dialog&lt;/span&gt;
    &lt;el-form :model="form" label-width="auto" style="max-width: 600px"&gt;
    &lt;el-form-item label="Activity name"&gt;
      &lt;el-input v-model="form.name" /&gt;
    &lt;/el-form-item&gt;
    &lt;el-form-item label="Activity zone"&gt;
      &lt;el-select v-model="form.region" placeholder="please select your zone"&gt;
        &lt;el-option label="Zone one" value="shanghai" /&gt;
        &lt;el-option label="Zone two" value="beijing" /&gt;
      &lt;/el-select&gt;
    &lt;/el-form-item&gt;
  &lt;/el-form&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script setup lang="ts"&gt;
import { ref,reactive } from 'vue'
const dialogVisible = ref(true)
const form = reactive({
  name: '',
  region: '',
})
const onSubmit = () =&gt; {
  console.log('submit!')
}
&lt;/script&gt;
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1425695/202510/1425695-20251017145322240-379014905.png" alt="01" loading="lazy"></p>
<h4 id="ä¸ºå¥å¼¹çªä¸­çè¡¨åä¸è½å¤æ­£å¸¸å±ç¤ºå¢">ä¸ºå¥å¼¹çªä¸­çè¡¨åä¸è½å¤æ­£å¸¸å±ç¤ºå¢ï¼</h4>
<p>å¨æ§å¶å°ä¼æä¸é¢çæç¤ºä¿¡æ¯ï¼<br>
Failed to resolve component:<br>
el-form If this is a native custom element,<br>
make sure to exclude it from component resolution via compilerOptions.isCustomElement<br>
ç¿»è¯è¿æ¥å°±æ¯<br>
æ æ³è§£æç»ä»¶ï¼el-formå¦æè¿æ¯ä¸ä¸ªåçèªå®ä¹åç´ ï¼<br>
è¯·ç¡®ä¿éè¿ compilerOptions.isCustomElement å°å¶ä»ç»ä»¶è§£æä¸­æé¤</p>
<p><img src="https://img2024.cnblogs.com/blog/1425695/202510/1425695-20251017145524776-326631892.png" alt="02" loading="lazy"></p>
<p>å¶å®å°±æ¯è¯´ï¼æéæ°åå»ºäºä¸ä¸ªæ°çapp,è¿ä¸ªappä¸­æ²¡ææ³¨åç»ä»¶ã<br>
å æ­¤ä¼è­¦åï¼é¡µé¢æ¸²æä¸åºæ¥ã</p>
<pre><code>// æéæ°åå»ºäºä¸ä¸ªappï¼è¿ä¸ªappä¸­æ²¡ææ³¨å element-plus ç»ä»¶ã
const app = createApp(dialog)
</code></pre>
<p>ç°å¨æä»¬éæ°æ³¨åelement-plusç»ä»¶ã<br>
åç¡®çè¯´ï¼æä»¬è¦æ³¨å childTest.vue ç»ä»¶ä½¿ç¨å°çä¸è¥¿</p>
<h4 id="ç»æ°åå»ºçappåºç¨æ³¨åchildtestç»ä»¶ä½¿ç¨å°çä¸è¥¿">ç»æ°åå»ºçappåºç¨æ³¨åchildTestç»ä»¶ä½¿ç¨å°çä¸è¥¿</h4>
<p>æä»¬å°ä¼å¨è¿ä¸ªå½ä»¤å¼å¼¹çªä¸­éæ°æ³¨åéè¦ä½¿ç¨å°çç»ä»¶</p>
<pre><code>// å°è£çå¼¹çª
import { createApp, h } from "vue";
import { ElDialog } from "element-plus";
// å¼å¥ç»ä»¶åæ ·å¼
import ElementPlus from "element-plus";
// import "element-plus/dist/index.css";
export function renderDialog(component:any,props:any, modalProps:any){
 const dialog  = h(
    ElDialog,   // æ¨¡ææ¡ç»ä»¶
    {
      ...modalProps, // æ¨¡ææ¡å±æ§
      modelValue:true, // æ¨¡ææ¡æ¾ç¤º
    }, // å ä¸ºæ¯æ¨¡ææ¡ç»ä»¶ï¼è¯å®æ¯æ¨¡ææ¡çå±æ§
    {
      default:()=&gt;h(component, props ) // ææ§½ï¼el-dialogä¸çåå®¹
    }
  )
 console.log(dialog)
  // åå»ºä¸ä¸ªæ°ç Vue åºç¨å®ä¾ãè¿ä¸ªåºç¨å®ä¾æ¯ç¬ç«çï¼ä¸ä¸»åºç¨åç¦»ã
  const app = createApp(dialog)
  // å¨æ°å®ä¾ä¸­æ³¨å Element Plus, è¿å¼¹çªä¸­çç»ä»¶å°±å¯ä»¥æ­£å¸¸æ¾ç¤ºäº
  app.use(ElementPlus);
  const div = document.createElement('div')
  document.body.appendChild(div)
  app.mount(div)
}
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1425695/202510/1425695-20251017150030012-288792935.png" alt="03" loading="lazy"></p>
<p>ç°å¨æä»¬åç°å¯ä»¥æ­£å¸¸å±ç¤ºå¼¹çªä¸­çè¡¨åäºãå ä¸ºæä»¬æ³¨åäºelement-plusç»ä»¶ã<br>
ä½æ¯æä»¬åç°ååç°äºå¦å¤ä¸ä¸ªé®é¢ã<br>
å¼¹çªåºé¨æ²¡æåæ¶åç¡®è®¤æé®ã<br>
éè¦æä»¬åæ¬¡éè¿hå½æ°æ¥åå»º</p>
<h4 id="å³äºä½¿ç¨createappåå»ºæ°çåºç¨å®ä¾">å³äºä½¿ç¨createAppåå»ºæ°çåºç¨å®ä¾</h4>
<p>å¨Vue 3ä¸­ï¼æä»¬å¯ä»¥ä½¿ç¨ createApp æ¥åå»ºæ°çåºç¨å®ä¾<br>
ä½æ¯è¿æ ·ä¼åå»ºä¸ä¸ªå®å¨ç¬ç«çåºç¨<br>
å®ä¸ä¼å±äº«ä¸»åºç¨çç»ä»¶ãæä»¶ç­ã<br>
å æ­¤æä»¬éè¦éæ°æ³¨å</p>
<h4 id="å¼¹çªåºé¨æ°å¢åæ¶åç¡®è®¤æé®">å¼¹çªåºé¨æ°å¢åæ¶åç¡®è®¤æé®</h4>
<p>æä»¬å°ä¼ä½¿ç¨hå½æ°ä¸­çææ§½æ¥åå»ºåºé¨çåæ¶æé®</p>
<pre><code>// å°è£çå¼¹çª
import { createApp, h } from "vue";
import { ElDialog, ElButton, ElForm, ElFormItem, ElInput, ElSelect, ElOption } from "element-plus";
import ElementPlus from "element-plus";

export function renderDialog(component: any, props: any, modalProps: any) {
  // åå»ºå¼¹çªå®ä¾
  const dialog = h(
    ElDialog,
    {
      ...modalProps,
      modelValue: true,
    },
    {
      // ä¸»è¦åå®¹ææ§½
      default: () =&gt; h(component, props),
      // åºé¨ææ§½
      footer:() =&gt;h(
        'div',
        { class: 'dialog-footer' },
        [
          h(
            ElButton, 
            {
              onClick: () =&gt; {
                console.log('åæ¶')
              }
            },
            () =&gt; 'åæ¶'
          ),
          h(
            ElButton,
            { 
              type: 'primary',
              onClick: () =&gt; {
                console.log('ç¡®å®')
              }
            },
            () =&gt; 'ç¡®å®'
          )
        ]
      )
    }
  );
  // åå»ºä¸ä¸ªæ°ç Vue åºç¨å®ä¾ãè¿ä¸ªåºç¨å®ä¾æ¯ç¬ç«çï¼ä¸ä¸»åºç¨åç¦»ã
  const app = createApp(dialog)
  // å¨æ°å®ä¾ä¸­æ³¨å Element Plus, è¿å¼¹çªä¸­çç»ä»¶å°±å¯ä»¥æ­£å¸¸æ¾ç¤ºäº
  app.use(ElementPlus);
  const div = document.createElement('div')
  document.body.appendChild(div)
  app.mount(div)
}
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1425695/202510/1425695-20251017150758182-172077623.png" alt="04" loading="lazy"></p>
<h4 id="ç¹å»å³é­å¼¹çªæ¶éè¦ç§»é¤ä¹ååå»ºçdiv">ç¹å»å³é­å¼¹çªæ¶ï¼éè¦ç§»é¤ä¹ååå»ºçdiv</h4>
<p>å¸è½½çåæ¶éè¦ææä»¬åå»ºçdivåç´ ç§»é¤ï¼å¦åé¡µé¢ä¸ä¼åºç°å¾å¤divã<br>
2ä¸ªå°æ¹éè¦ç§»é¤ï¼1,ç¹å»ç¡®è®¤æé®ã 2,ç¹å»å¶ä»å°æ¹çå³é­<br>
<img src="https://img2024.cnblogs.com/blog/1425695/202510/1425695-20251017150936490-1107995889.png" alt="05" loading="lazy"></p>
<h4 id="å³é­å¼¹çªæ­£ç¡®éæ¯ç¸å³ç»ä»¶">å³é­å¼¹çªæ­£ç¡®éæ¯ç¸å³ç»ä»¶</h4>
<pre><code>// å°è£çå¼¹çª
import { createApp, h } from "vue";
import { ElDialog, ElButton, ElForm, ElFormItem, ElInput, ElSelect, ElOption } from "element-plus";
import ElementPlus from "element-plus";

export function renderDialog(component: any, props: any, modalProps: any) {
  console.log('111')
  // åå»ºå¼¹çªå®ä¾
  const dialog = h(
    ElDialog,
    {
      ...modalProps,
      modelValue: true,
      onClose: ()=&gt; {
        console.log('å³é­çåè°')
        app.unmount() // è¿æ ·å¸è½½ä¼è®©å¨ç»æ¶å¤±
        // å¸è½½çåæ¶éè¦ææä»¬åå»ºçdivåç´ ç§»é¤ï¼å¦åé¡µé¢ä¸ä¼åºç°å¾å¤div
        document.body.removeChild(div)
      }
    },
    {
      // ä¸»è¦åå®¹ææ§½
      default: () =&gt; h(component, props),
      // åºé¨ææ§½
      footer:() =&gt;h(
        'div',
        { 
          class: 'dialog-footer',
         
        },
        [
          h(
            ElButton, 
            {
              onClick: () =&gt; {
                console.log('ç¹å»åæ¶æé®')
                // å¸è½½ä¸ä¸ªå·²æè½½çåºç¨å®ä¾ãå¸è½½ä¸ä¸ªåºç¨ä¼è§¦åè¯¥åºç¨ç»ä»¶æ åææç»ä»¶çå¸è½½çå½å¨æé©å­ã
                app.unmount() // è¿æ ·å¸è½½ä¼è®©å¨ç»æ¶å¤±
                // å¸è½½çåæ¶éè¦ææä»¬åå»ºçdivåç´ ç§»é¤ï¼å¦åé¡µé¢ä¸ä¼åºç°å¾å¤div
                document.body.removeChild(div)
              }
            },
            () =&gt; 'åæ¶'
          ),
          h(
            ElButton,
            { 
              type: 'primary',
              onClick: () =&gt; {
                console.log('ç¡®å®')
              }
            },
            () =&gt; 'ç¡®å®'
          )
        ]
      )
    }
  );
  // åå»ºä¸ä¸ªæ°ç Vue åºç¨å®ä¾ãè¿ä¸ªåºç¨å®ä¾æ¯ç¬ç«çï¼ä¸ä¸»åºç¨åç¦»ã
  const app = createApp(dialog)
  // å¨æ°å®ä¾ä¸­æ³¨å Element Plus, è¿å¼¹çªä¸­çç»ä»¶å°±å¯ä»¥æ­£å¸¸æ¾ç¤ºäº
  app.use(ElementPlus);
  // è¿ä¸ªdivåç´ å¨å¨éæ¯åºç¨æ¶éè¦è¢«ç§»é¤å
  const div = document.createElement('div')
  document.body.appendChild(div)
  app.mount(div)
}
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1425695/202510/1425695-20251017151046536-220748441.png" alt="06" loading="lazy"></p>
<h4 id="ç¹å»ç¡®è®¤æé®æ¶éªè¯è§å">ç¹å»ç¡®è®¤æé®æ¶éªè¯è§å</h4>
<p>æäºæ¶åï¼æä»¬å¼¹çªä¸­çè¡¨åæ¯éè¦è¿è¡è§åæ ¡éªçã<br>
æä»¬ä¸é¢æ¥å®ç°è¿ä¸ªåè½ç¹<br>
ä¼ éçç»ä»¶</p>
<pre><code>&lt;template&gt;
  &lt;el-form
    ref="ruleFormRef"
    style="max-width: 600px"
    :model="ruleForm"
    :rules="rules"
    label-width="auto"
  &gt;
    &lt;el-form-item label="Activity name" prop="name"&gt;
      &lt;el-input v-model="ruleForm.name" /&gt;
    &lt;/el-form-item&gt;
    &lt;el-form-item label="Activity zone" prop="region"&gt;
      &lt;el-select v-model="ruleForm.region" placeholder="Activity zone"&gt;
        &lt;el-option label="Zone one" value="shanghai" /&gt;
        &lt;el-option label="Zone two" value="beijing" /&gt;
      &lt;/el-select&gt;
    &lt;/el-form-item&gt;
    
    &lt;el-form-item label="Activity time" required&gt;
      &lt;el-col :span="11"&gt;
        &lt;el-form-item prop="date1"&gt;
          &lt;el-date-picker
            v-model="ruleForm.date1"
            type="date"
            aria-label="Pick a date"
            placeholder="Pick a date"
            style="width: 100%"
          /&gt;
        &lt;/el-form-item&gt;
      &lt;/el-col&gt;
      &lt;el-col class="text-center" :span="2"&gt;
        &lt;span class="text-gray-500"&gt;-&lt;/span&gt;
      &lt;/el-col&gt;
      &lt;el-col :span="11"&gt;
        &lt;el-form-item prop="date2"&gt;
          &lt;el-time-picker
            v-model="ruleForm.date2"
            aria-label="Pick a time"
            placeholder="Pick a time"
            style="width: 100%"
          /&gt;
        &lt;/el-form-item&gt;
      &lt;/el-col&gt;
    &lt;/el-form-item&gt;

    &lt;el-form-item label="Resources" prop="resource"&gt;
      &lt;el-radio-group v-model="ruleForm.resource"&gt;
        &lt;el-radio value="Sponsorship"&gt;Sponsorship&lt;/el-radio&gt;
        &lt;el-radio value="Venue"&gt;Venue&lt;/el-radio&gt;
      &lt;/el-radio-group&gt;
    &lt;/el-form-item&gt;
    &lt;el-form-item label="Activity form" prop="desc"&gt;
      &lt;el-input v-model="ruleForm.desc" type="textarea" /&gt;
    &lt;/el-form-item&gt;

  &lt;/el-form&gt;
&lt;/template&gt;

&lt;script lang="ts" setup&gt;
import { reactive, ref } from 'vue'

import type { FormInstance, FormRules } from 'element-plus'

interface RuleForm {
  name: string
  region: string
  date1: string
  date2: string
  resource: string
  desc: string
}
const ruleFormRef = ref&lt;FormInstance&gt;()
const ruleForm = reactive&lt;RuleForm&gt;({
  name: 'Hello',
  region: '',
  date1: '',
  date2: '',
  resource: '',
  desc: '',
})
const rules = reactive&lt;FormRules&lt;RuleForm&gt;&gt;({
  name: [
    { required: true, message: 'Please input Activity name', trigger: 'blur' },
    { min: 3, max: 5, message: 'Length should be 3 to 5', trigger: 'blur' },
  ],
  region: [
    {
      required: true,
      message: 'Please select Activity zone',
      trigger: 'change',
    },
  ],
  date1: [
    {
      type: 'date',
      required: true,
      message: 'Please pick a date',
      trigger: 'change',
    },
  ],
  date2: [
    {
      type: 'date',
      required: true,
      message: 'Please pick a time',
      trigger: 'change',
    },
  ],
  resource: [
    {
      required: true,
      message: 'Please select activity resource',
      trigger: 'change',
    },
  ],
  desc: [
    { required: true, message: 'Please input activity form', trigger: 'blur' },
  ],
})

const submitForm = async () =&gt; {
  if (!ruleFormRef.value) {
    console.error('ruleFormRef is not initialized')
    return false
  }
  try {
    const valid = await ruleFormRef.value.validate()
    if (valid) {
      console.log('è¡¨åæ ¡éªéè¿', ruleForm)
      return Promise.resolve(ruleForm)
    }
  } catch (error) {
    // ä¸ºå¥submitFormä¸­ï¼validçå¼æ¯falseä¼æ§è¡catch ï¼
    // el-form ç»ä»¶ç validate æ¹æ³çå·¥ä½æºå¶å¯¼è´çã validate æ¹æ³å¨è¡¨åéªè¯å¤±è´¥æ¶ä¼æåºå¼å¸¸
    console.error('err', error)
    return false
    /**
     * ä¸é¢è¿æ ·åä¸ºå¥çé¢ä¼æ¥éå¢ï¼
     * return Promise.reject(error)
     * å½è¡¨åéªè¯å¤±è´¥æ¶ï¼ruleFormRef.value.validate() ä¼æåºä¸ä¸ªå¼å¸¸ã
     * è½ç¶ä½ ç¨äº try...catch æè·è¿ä¸ªå¼å¸¸ï¼å¹¶ä¸å¨ catch åä¸­éè¿ return Promise.reject(error) è¿åäºä¸ä¸ªè¢«æç»ç Promise
     * ä½å¦æè°ç¨ submitForm çå°æ¹æ²¡ææ­£ç¡®å°å¤çè¿ä¸ªè¢«æç»ç Promiseï¼å³æ²¡æä½¿ç¨ .catch() æè await æ¥æ¥æ¶éè¯¯ï¼ï¼
     * é£ä¹æµè§å¨æ§å¶å°å°±ä¼æ¾ç¤ºä¸ä¸ª "Uncaught (in promise)" éè¯¯ã
     * å¨ catch ä¸­åæ¬¡ return Promise.reject(error) æ¯å¤ä½çï¼ ç´æ¥return false
     * */ 
    /**
     * å¦æä½ è¿æ ·å
     * throw error ç´æ¥æåºéè¯¯å³å¯
     * é£ä¹å°±éè¦åè°ç¨submitFormçå°æ¹æè·å¼å¸¸
     * */  
  }
}

defineExpose({
  submitForm:submitForm
})
&lt;/script&gt;
</code></pre>
<pre><code>// å°è£çå¼¹çª
import { createApp, h, ref } from "vue";
import { ElDialog, ElButton, ElForm, ElFormItem, ElInput, ElSelect, ElOption } from "element-plus";
import ElementPlus from "element-plus";

export function renderDialog(component: any, props: any, modalProps: any) {
  const instanceElement = ref()
  console.log('111', instanceElement) 
  // åå»ºå¼¹çªå®ä¾
  const dialog = h(
    ElDialog,
    {
      ...modalProps,
      modelValue: true,
      onClose: ()=&gt; {
        console.log('å³é­çåè°')
        app.unmount() // è¿æ ·å¸è½½ä¼è®©å¨ç»æ¶å¤±
        // å¸è½½çåæ¶éè¦ææä»¬åå»ºçdivåç´ ç§»é¤ï¼å¦åé¡µé¢ä¸ä¼åºç°å¾å¤div
        document.body.removeChild(div)
      }
    },
    {
      // ä¸»è¦åå®¹ææ§½,è¿éçrefå¿é¡»æ¥æ¶ä¸ä¸ªref
      default: () =&gt; h(component, {...props, ref: instanceElement}),
      // åºé¨ææ§½
      footer:() =&gt;h(
        'div',
        { 
          class: 'dialog-footer',
         
        },
        [
          h(
            ElButton, 
            {
              onClick: () =&gt; {
                console.log('ç¹å»åæ¶æé®')
                // å¸è½½ä¸ä¸ªå·²æè½½çåºç¨å®ä¾ãå¸è½½ä¸ä¸ªåºç¨ä¼è§¦åè¯¥åºç¨ç»ä»¶æ åææç»ä»¶çå¸è½½çå½å¨æé©å­ã
                app.unmount() // è¿æ ·å¸è½½ä¼è®©å¨ç»æ¶å¤±
                // å¸è½½çåæ¶éè¦ææä»¬åå»ºçdivåç´ ç§»é¤ï¼å¦åé¡µé¢ä¸ä¼åºç°å¾å¤div
                document.body.removeChild(div)
              }
            },
            () =&gt; 'åæ¶'
          ),
          h(
            ElButton,
            { 
              type: 'primary',
              onClick: () =&gt; {
                instanceElement?.value?.submitForm().then((res:any) =&gt;{
                  console.log('å¾å°çå¼',res)
                })
                console.log('ç¡®å®')
              }
            },
            () =&gt; 'ç¡®å®'
          )
        ]
      )
    }
  );
  // åå»ºä¸ä¸ªæ°ç Vue åºç¨å®ä¾ãè¿ä¸ªåºç¨å®ä¾æ¯ç¬ç«çï¼ä¸ä¸»åºç¨åç¦»ã
  const app = createApp(dialog)
  // å¨æ°å®ä¾ä¸­æ³¨å Element Plus, è¿å¼¹çªä¸­çç»ä»¶å°±å¯ä»¥æ­£å¸¸æ¾ç¤ºäº
  app.use(ElementPlus);
  // è¿ä¸ªdivåç´ å¨å¨éæ¯åºç¨æ¶éè¦è¢«ç§»é¤å
  const div = document.createElement('div')
  document.body.appendChild(div)
  app.mount(div)
}
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1425695/202510/1425695-20251017153103678-1920669946.png" alt="07" loading="lazy"><br>
å³é®çç¹ï¼éè¿refæ¿å°childTestç»ä»¶ä¸­çæ¹æ³ï¼childTestè¦æ´é²éè¦çæ¹æ³</p>
<h4 id="å¦ä½æè¡¨åä¸­çæ°æ®æ´é²åºå»">å¦ä½æè¡¨åä¸­çæ°æ®æ´é²åºå»</h4>
<p>å¯ä»¥éè¿åè°å½æ°çæ¹å¼ææ°æ®æ´é²åºå»åã</p>
<pre><code>// å°è£çå¼¹çª
import { createApp, h, ref } from "vue";
import { ElDialog, ElButton, ElForm, ElFormItem, ElInput, ElSelect, ElOption } from "element-plus";
import ElementPlus from "element-plus";

export function renderDialog(component: any, props: any, modalProps: any, onConfirm: (data: any) =&gt; any ) {
  // ç¬¬4ä¸ªåæ°æ¯åè°å½æ°
  const instanceElement = ref()
  console.log('111', instanceElement) 
  // åå»ºå¼¹çªå®ä¾
  const dialog = h(
    ElDialog,
    {
      ...modalProps,
      modelValue: true,
      onClose: ()=&gt; {
        console.log('å³é­çåè°')
        app.unmount() // è¿æ ·å¸è½½ä¼è®©å¨ç»æ¶å¤±
        // å¸è½½çåæ¶éè¦ææä»¬åå»ºçdivåç´ ç§»é¤ï¼å¦åé¡µé¢ä¸ä¼åºç°å¾å¤div
        document.body.removeChild(div)
      }
    },
    {
      // ä¸»è¦åå®¹ææ§½,è¿éçrefå¿é¡»æ¥æ¶ä¸ä¸ªref
      default: () =&gt; h(component, {...props, ref: instanceElement}),
      // åºé¨ææ§½
      footer:() =&gt;h(
        'div',
        { 
          class: 'dialog-footer',
         
        },
        [
          h(
            ElButton, 
            {
              onClick: () =&gt; {
                console.log('ç¹å»åæ¶æé®')
                // å¸è½½ä¸ä¸ªå·²æè½½çåºç¨å®ä¾ãå¸è½½ä¸ä¸ªåºç¨ä¼è§¦åè¯¥åºç¨ç»ä»¶æ åææç»ä»¶çå¸è½½çå½å¨æé©å­ã
                app.unmount() // è¿æ ·å¸è½½ä¼è®©å¨ç»æ¶å¤±
                // å¸è½½çåæ¶éè¦ææä»¬åå»ºçdivåç´ ç§»é¤ï¼å¦åé¡µé¢ä¸ä¼åºç°å¾å¤div
                document.body.removeChild(div)
              }
            },
            () =&gt; 'åæ¶'
          ),
          h(
            ElButton,
            { 
              type: 'primary',
              onClick: () =&gt; {
                // submitForm è°ç¨è¡¨åç»ä»¶ä¸­éè¦éªè¯æèæ´é²åºå»çæ°æ®
                instanceElement?.value?.submitForm().then((res:any) =&gt;{
                  console.log('å¾å°çå¼',res)
                  // éªè¯éè¿åè°ç¨åè°å½æ°ä¼ éæ°æ®ï¼ å¦éªè¯å¤±è´¥ï¼res çå¼æå¯è½æ¯ä¸ä¸ªfalseã
                  onConfirm(res)
                  // æä¹æè¿ä¸ªäºä»¶ä¼ éåºå»ï¼è®©ä½¿ç¨çæ¶åç¥éç¹å»äºç¡®è®¤å¹¶ä¸ç¥ééªè¯éè¿äº
                }).catch((error: any) =&gt; {
                  // éªè¯å¤±è´¥æ¶ä¹å¯ä»¥ä¼ ééè¯¯ä¿¡æ¯
                  console.log('éªè¯å¤±è´¥', error)
                })
                console.log('ç¡®å®')
              }
            },
            () =&gt; 'ç¡®å®'
          )
        ]
      )
    }
  );
  // åå»ºä¸ä¸ªæ°ç Vue åºç¨å®ä¾ãè¿ä¸ªåºç¨å®ä¾æ¯ç¬ç«çï¼ä¸ä¸»åºç¨åç¦»ã
  const app = createApp(dialog)
  // å¨æ°å®ä¾ä¸­æ³¨å Element Plus, è¿å¼¹çªä¸­çç»ä»¶å°±å¯ä»¥æ­£å¸¸æ¾ç¤ºäº
  app.use(ElementPlus);
  // è¿ä¸ªdivåç´ å¨å¨éæ¯åºç¨æ¶éè¦è¢«ç§»é¤å
  const div = document.createElement('div')
  document.body.appendChild(div)
  app.mount(div)
}
</code></pre>
<pre><code>&lt;template&gt;
  &lt;div&gt;
    &lt;el-button @click="openMask"&gt;ç¹å»å¼¹çª&lt;/el-button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import childTest from '@/components/childTest.vue'
import { renderDialog } from '@/hooks/dialog'
import { getCurrentInstance } from 'vue';
const currentInstance = getCurrentInstance();
function openMask(){
  console.log('currentInstance',currentInstance)
  renderDialog(childTest,{},{title:'æµè¯å¼¹çª', width: '700'}, (res)=&gt;{
    console.log('éè¿åè°å½æ°è¿åå¼', res)
  })
}
&lt;/script&gt;
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1425695/202510/1425695-20251017153517135-614116266.png" alt="08" loading="lazy"></p>
<h4 id="ç¹å»ç¡®å®æ¶ä¸å¡å®æåå³é­å¼¹çª">ç¹å»ç¡®å®æ¶ï¼ä¸å¡å®æåå³é­å¼¹çª</h4>
<p>ç°å¨æ³è¦ç¹å»ç¡®å®ï¼ç­ä¸å¡å¤çå®æä¹åï¼æå³é­å¼¹çªã<br>
éè¦å¨ä½¿ç¨å®æä¸å¡çæ¶åè¿åä¸ä¸ªpromiseï¼è®©å°è£çå¼¹çªè°ç¨è¿ä¸ªpromise<br>
è¿æ ·å°±å¯ä»¥ç¥éä»ä¹æ¶åå³é­å¼¹çªäº</p>
<pre><code>// å°è£çå¼¹çª
import { createApp, h, ref } from "vue";
import { ElDialog, ElButton, ElForm, ElFormItem, ElInput, ElSelect, ElOption } from "element-plus";
import ElementPlus from "element-plus";

export function renderDialog(component: any, props: any, modalProps: any, onConfirm: (data: any) =&gt; any ) {
  // ç¬¬4ä¸ªåæ°æ¯åè°å½æ°
  const instanceElement = ref()
  console.log('111', instanceElement) 
  // åå»ºå¼¹çªå®ä¾
  const dialog = h(
    ElDialog,
    {
      ...modalProps,
      modelValue: true,
      onClose: ()=&gt; {
        console.log('å³é­çåè°')
        app.unmount() // è¿æ ·å¸è½½ä¼è®©å¨ç»æ¶å¤±
        // å¸è½½çåæ¶éè¦ææä»¬åå»ºçdivåç´ ç§»é¤ï¼å¦åé¡µé¢ä¸ä¼åºç°å¾å¤div
        document.body.removeChild(div)
      }
    },
    {
      // ä¸»è¦åå®¹ææ§½,è¿éçrefå¿é¡»æ¥æ¶ä¸ä¸ªref
      default: () =&gt; h(component, {...props, ref: instanceElement}),
      // åºé¨ææ§½
      footer:() =&gt;h(
        'div',
        { 
          class: 'dialog-footer',
         
        },
        [
          h(
            ElButton, 
            {
              onClick: () =&gt; {
                console.log('ç¹å»åæ¶æé®')
                // å¸è½½ä¸ä¸ªå·²æè½½çåºç¨å®ä¾ãå¸è½½ä¸ä¸ªåºç¨ä¼è§¦åè¯¥åºç¨ç»ä»¶æ åææç»ä»¶çå¸è½½çå½å¨æé©å­ã
                app.unmount() // è¿æ ·å¸è½½ä¼è®©å¨ç»æ¶å¤±
                // å¸è½½çåæ¶éè¦ææä»¬åå»ºçdivåç´ ç§»é¤ï¼å¦åé¡µé¢ä¸ä¼åºç°å¾å¤div
                document.body.removeChild(div)
              }
            },
            () =&gt; 'åæ¶'
          ),
          h(
            ElButton,
            { 
              type: 'primary',
              onClick: () =&gt; {
                // submitForm è°ç¨è¡¨åç»ä»¶ä¸­éè¦éªè¯æèæ´é²åºå»çæ°æ®
                instanceElement?.value?.submitForm().then((res:any) =&gt;{
                  console.log('å¾å°çå¼',res)
                  // éªè¯éè¿åè°ç¨åè°å½æ°ä¼ éæ°æ®ï¼å¦éªè¯å¤±è´¥ï¼res çå¼æå¯è½æ¯ä¸ä¸ªfalseã
                  const callbackResult = onConfirm(res);
                  // å¦æåè°å½æ°è¿åçæ¯ Promiseï¼åç­å¾ä¸å¡å®æååå³é­å¼¹çª
                  if (callbackResult instanceof Promise) {
                    // æ³¨æè¿éçfinallyï¼è¿æ ·åå¨æå¡åºç°å¼å¸¸çæ¶åä¼æé®é¢,è¿éæ¯æé®é¢çï¼éè¦ä¼å
                    // æ³¨æè¿éçfinallyï¼è¿æ ·åå¨æå¡åºç°å¼å¸¸çæ¶åä¼æé®é¢,è¿éæ¯æé®é¢çï¼éè¦ä¼å
                    callbackResult.finally(() =&gt; { 
                      // å¼¹çªå³é­é»è¾
                      app.unmount()
                      document.body.removeChild(div)
                    });
                  } else {
                    // å¦æä¸æ¯ Promiseï¼ç«å³å³é­å¼¹çª
                    app.unmount()
                    document.body.removeChild(div)
                  }
                }).catch((error: any) =&gt; {
                  // éªè¯å¤±è´¥æ¶ä¹å¯ä»¥ä¼ ééè¯¯ä¿¡æ¯
                  console.log('éªè¯å¤±è´¥', error)
                })
              }
            },
            () =&gt; 'ç¡®å®'
          )
        ]
      )
    }
  );
  // åå»ºä¸ä¸ªæ°ç Vue åºç¨å®ä¾ãè¿ä¸ªåºç¨å®ä¾æ¯ç¬ç«çï¼ä¸ä¸»åºç¨åç¦»ã
  const app = createApp(dialog)
  // å¨æ°å®ä¾ä¸­æ³¨å Element Plus, è¿å¼¹çªä¸­çç»ä»¶å°±å¯ä»¥æ­£å¸¸æ¾ç¤ºäº
  app.use(ElementPlus);
  // è¿ä¸ªdivåç´ å¨å¨éæ¯åºç¨æ¶éè¦è¢«ç§»é¤å
  const div = document.createElement('div')
  document.body.appendChild(div)
  app.mount(div)
}
</code></pre>
<pre><code>&lt;template&gt;
  &lt;div&gt;
    &lt;el-button @click="openMask"&gt;ç¹å»å¼¹çª&lt;/el-button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import childTest from '@/components/childTest.vue'
import { renderDialog } from '@/hooks/dialog'
import { getCurrentInstance } from 'vue';
const currentInstance = getCurrentInstance();
function openMask(){
  console.log('currentInstance',currentInstance)
  renderDialog(childTest,{},{title:'æµè¯å¼¹çª', width: '700'}, (res)=&gt;{
    console.log('éè¿åè°å½æ°è¿åå¼', res)
    // è¿éè¿åä¸ä¸ªpromiseå¯¹è±¡ï¼è¿æ ·å°±å¯ä»¥è®©ä¸å¡å®æåæå³é­å¼¹çª
    return fetch("https://dog.ceo/api/breed/pembroke/images/random")
     .then((res) =&gt; {
       return res.json();
     })
     .then((res) =&gt; {
        console.log('è·åçå¾çå°åä¸ºï¼', res.message);
     });
  })
}
&lt;/script&gt;
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1425695/202510/1425695-20251017153933776-969209851.png" alt="09" loading="lazy"></p>
<h4 id="ä¼åä¸å¡ç»ä»¶">ä¼åä¸å¡ç»ä»¶</h4>
<pre><code>// å°è£çå¼¹çª
import { createApp, h, ref } from "vue";
import { ElDialog, ElButton, ElForm, ElFormItem, ElInput, ElSelect, ElOption } from "element-plus";
import ElementPlus from "element-plus";

export function renderDialog(component: any, props: any, modalProps: any, onConfirm: (data: any) =&gt; any ) {
  // å³é­å¼¹çªï¼é¿åéå¤ä»£ç 
  const closeDialog = () =&gt; {
    // æåæ¶å³é­å¼¹çª
    app.unmount();
    // æ£æ¥divæ¯å¦ä»ç¶å­å¨ä¸ä¸ºbodyçå­åç´ ,å¦èå¯è½åºç°å¼å¸¸
    if (div &amp;&amp; div.parentNode) {
      document.body.removeChild(div)
    }
  }
  // ç¬¬4ä¸ªåæ°æ¯åè°å½æ°
  const instanceElement = ref()
  console.log('111', instanceElement) 
  // åå»ºå¼¹çªå®ä¾
  const dialog = h(
    ElDialog,
    {
      ...modalProps,
      modelValue: true,
      onClose: ()=&gt; {
        console.log('å³é­çåè°')
        app.unmount() // è¿æ ·å¸è½½ä¼è®©å¨ç»æ¶å¤±
        // å¸è½½çåæ¶éè¦ææä»¬åå»ºçdivåç´ ç§»é¤ï¼å¦åé¡µé¢ä¸ä¼åºç°å¾å¤div
        document.body.removeChild(div)
      }
    },
    {
      // ä¸»è¦åå®¹ææ§½,è¿éçrefå¿é¡»æ¥æ¶ä¸ä¸ªref
      default: () =&gt; h(component, {...props, ref: instanceElement}),
      // åºé¨ææ§½
      footer:() =&gt;h(
        'div',
        { 
          class: 'dialog-footer',
         
        },
        [
          h(
            ElButton, 
            {
              onClick: () =&gt; {
                console.log('ç¹å»åæ¶æé®')
                // å¸è½½ä¸ä¸ªå·²æè½½çåºç¨å®ä¾ãå¸è½½ä¸ä¸ªåºç¨ä¼è§¦åè¯¥åºç¨ç»ä»¶æ åææç»ä»¶çå¸è½½çå½å¨æé©å­ã
                app.unmount() // è¿æ ·å¸è½½ä¼è®©å¨ç»æ¶å¤±
                // å¸è½½çåæ¶éè¦ææä»¬åå»ºçdivåç´ ç§»é¤ï¼å¦åé¡µé¢ä¸ä¼åºç°å¾å¤div
                document.body.removeChild(div)
              }
            },
            () =&gt; 'åæ¶'
          ),
          h(
            ElButton,
            { 
              type: 'primary',
              onClick: () =&gt; {
                // submitForm è°ç¨è¡¨åç»ä»¶ä¸­éè¦éªè¯æèæ´é²åºå»çæ°æ®
                instanceElement?.value?.submitForm().then((res:any) =&gt;{
                  console.log('å¾å°çå¼',res)
                  // éªè¯éè¿åè°ç¨åè°å½æ°ä¼ éæ°æ®ï¼å¦éªè¯å¤±è´¥ï¼res çå¼æå¯è½æ¯ä¸ä¸ªfalseã
                  const callbackResult = onConfirm(res);
                  // å¦æåè°å½æ°è¿åçæ¯ Promiseï¼åç­å¾ä¸å¡å®æååå³é­å¼¹çª
                  if (callbackResult instanceof Promise) {
                   
                     callbackResult.then(() =&gt; {
                      if(res){
                        console.log('111')
                        closeDialog()
                      }
                    }).catch(error=&gt;{
                      console.log('222')
                      console.error('åè°å½æ°æ§è¡åºé,å¦:ç½ç»éè¯¯', error);
                      // éè¯¯æåµä¸ä¹å³é­å¼¹çª
                      closeDialog()
                    });
                  } else {
                    // å¦æä¸æ¯ Promiseï¼å¹¶ä¸éªè¯æ¶éè¿äºçãç«å³å³é­å¼¹çª
                    console.log('333', res)
                    if(res){
                      closeDialog()
                    }
                  }
                }).catch((error: any) =&gt; {
                  console.log('44444')
                  // éªè¯å¤±è´¥æ¶ä¹å¯ä»¥ä¼ ééè¯¯ä¿¡æ¯
                  console.log('éªè¯å¤±è´¥', error)
                })
              }
            },
            () =&gt; 'ç¡®å®'
          )
        ]
      )
    }
  );
  // åå»ºä¸ä¸ªæ°ç Vue åºç¨å®ä¾ãè¿ä¸ªåºç¨å®ä¾æ¯ç¬ç«çï¼ä¸ä¸»åºç¨åç¦»ã
  const app = createApp(dialog)
  // å¨æ°å®ä¾ä¸­æ³¨å Element Plus, è¿å¼¹çªä¸­çç»ä»¶å°±å¯ä»¥æ­£å¸¸æ¾ç¤ºäº
  app.use(ElementPlus);
  // è¿ä¸ªdivåç´ å¨å¨éæ¯åºç¨æ¶éè¦è¢«ç§»é¤å
  const div = document.createElement('div')
  document.body.appendChild(div)
  app.mount(div)
}
</code></pre>
<pre><code>&lt;template&gt;
  &lt;div&gt;
    &lt;el-button @click="openMask"&gt;ç¹å»å¼¹çª&lt;/el-button&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script setup lang="ts"&gt;
import childTest from '@/components/childTest.vue'
import { renderDialog } from '@/hooks/dialog'
import { getCurrentInstance } from 'vue';
const currentInstance = getCurrentInstance();
function openMask(){
  console.log('currentInstance',currentInstance)
  renderDialog(childTest,{},{title:'æµè¯å¼¹çª', width: '700'}, (res)=&gt;{
    console.log('éè¿åè°å½æ°è¿åå¼', res)
      // è¿éè¿åä¸ä¸ªpromiseå¯¹è±¡ï¼è¿æ ·å°±å¯ä»¥è®©ä¸å¡å®æåæå³é­å¼¹çª
      return fetch("https://dog.ceo/api/breed/pembroke/images/random")
      .then((res) =&gt; {
        return res.json();
      })
      .then((res) =&gt; {
          console.log('è·åçå¾çå°åä¸ºï¼', res.message);
      });
  })
}
&lt;/script&gt;
</code></pre>
<p>ç¼å°çå°ä¼ä¼´å¯è½å·²ç»åç°äºè¿ä¸æ®µä»£ç ã<br>
1ï¼éªè¯ä¸éè¿ä¼ä¹ä¼è§¦åå¸è½½å¼¹çª<br>
2ï¼callbackResult.finallyæ¯ä¸åéç<br>
3.<br>
<img src="https://img2024.cnblogs.com/blog/1425695/202510/1425695-20251017160228378-793571991.png" alt="image" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/1425695/202510/1425695-20251017154924223-2023334538.png" alt="10" loading="lazy"></p>
<h4 id="æç»çä»£ç ">æç»çä»£ç </h4>
<pre><code>// å°è£çå¼¹çª
import { createApp, h, ref } from "vue";
import { ElDialog, ElButton, ElForm, ElFormItem, ElInput, ElSelect, ElOption } from "element-plus";
import ElementPlus from "element-plus";

export function renderDialog(component: any, props: any, modalProps: any, onConfirm: (data: any) =&gt; any ) {
  // å³é­å¼¹çªï¼é¿åéå¤ä»£ç 
  const closeDialog = () =&gt; {
    // æåæ¶å³é­å¼¹çª
    app.unmount();
    // æ£æ¥divæ¯å¦ä»ç¶å­å¨ä¸ä¸ºbodyçå­åç´ ,å¦èå¯è½åºç°å¼å¸¸
    if (div &amp;&amp; div.parentNode) {
      document.body.removeChild(div)
    }
  }
  // ç¬¬4ä¸ªåæ°æ¯åè°å½æ°
  const instanceElement = ref()
  console.log('111', instanceElement) 
  const isLoading = ref(false)
  // åå»ºå¼¹çªå®ä¾
  const dialog = h(
    ElDialog,
    {
      ...modalProps,
      modelValue: true,
      onClose: ()=&gt; {
        isLoading.value = false
        console.log('å³é­çåè°')
        app.unmount() // è¿æ ·å¸è½½ä¼è®©å¨ç»æ¶å¤±
        // å¸è½½çåæ¶éè¦ææä»¬åå»ºçdivåç´ ç§»é¤ï¼å¦åé¡µé¢ä¸ä¼åºç°å¾å¤div
        document.body.removeChild(div)
      }
    },
    {
      // ä¸»è¦åå®¹ææ§½,è¿éçrefå¿é¡»æ¥æ¶ä¸ä¸ªref
      default: () =&gt; h(component, {...props, ref: instanceElement}),
      // åºé¨ææ§½,noShowFooterBoolæ¯true,ä¸æ¾ç¤ºï¼ falseçæ¾ç¤ºåºé¨ 
      footer: props.noShowFooterBool ? null : () =&gt;h(
        'div',
        { 
          class: 'dialog-footer',
        },
        [
          h(
            ElButton, 
            {
              onClick: () =&gt; {
                console.log('ç¹å»åæ¶æé®')
                // å¸è½½ä¸ä¸ªå·²æè½½çåºç¨å®ä¾ãå¸è½½ä¸ä¸ªåºç¨ä¼è§¦åè¯¥åºç¨ç»ä»¶æ åææç»ä»¶çå¸è½½çå½å¨æé©å­ã
                app.unmount() // è¿æ ·å¸è½½ä¼è®©å¨ç»æ¶å¤±
                // å¸è½½çåæ¶éè¦ææä»¬åå»ºçdivåç´ ç§»é¤ï¼å¦åé¡µé¢ä¸ä¼åºç°å¾å¤div
                document.body.removeChild(div)
              }
            },
            () =&gt; props.cancelText || 'åæ¶'
          ),
          h(
            ElButton,
            { 
              type: 'primary',
              loading: isLoading.value,
              onClick: () =&gt; {
                isLoading.value = true
                // submitForm è°ç¨è¡¨åç»ä»¶ä¸­éè¦éªè¯æèæ´é²åºå»çæ°æ®
                instanceElement?.value?.submitForm().then((res:any) =&gt;{
                  if(!res){
                    isLoading.value = false
                  }
                  console.log('å¾å°çå¼',res)
                  // éªè¯éè¿åè°ç¨åè°å½æ°ä¼ éæ°æ®ï¼å¦éªè¯å¤±è´¥ï¼res çå¼æå¯è½æ¯ä¸ä¸ªfalseã
                  const callbackResult = onConfirm(res);
                  // å¦æåè°å½æ°è¿åçæ¯ Promiseï¼åç­å¾ä¸å¡å®æååå³é­å¼¹çª
                  if (callbackResult instanceof Promise) {
                     callbackResult.then(() =&gt; {
                      if(res){
                        console.log('111')
                        closeDialog()
                      }else{
                        isLoading.value = false
                      }
                    }).catch(error=&gt;{
                      console.log('222')
                      console.error('åè°å½æ°æ§è¡åºé,å¦:ç½ç»éè¯¯', error);
                      // éè¯¯æåµä¸ä¹å³é­å¼¹çª
                      closeDialog()
                    });
                  } else {
                    // å¦æä¸æ¯ Promiseï¼å¹¶ä¸éªè¯æ¶éè¿äºçãç«å³å³é­å¼¹çª
                    console.log('333', res)
                    if(res){
                      closeDialog()
                    }else{
                      isLoading.value = false
                    }
                  }
                }).catch((error: any) =&gt; {
                  console.log('44444')
                   isLoading.value = false
                  // éªè¯å¤±è´¥æ¶ä¹å¯ä»¥ä¼ ééè¯¯ä¿¡æ¯
                  console.log('éªè¯å¤±è´¥', error)
                })
              }
            },
            () =&gt; props.confirmText ||  'ç¡®å®'
          )
        ]
      ) 
    }
  );
  // åå»ºä¸ä¸ªæ°ç Vue åºç¨å®ä¾ãè¿ä¸ªåºç¨å®ä¾æ¯ç¬ç«çï¼ä¸ä¸»åºç¨åç¦»ã
  const app = createApp(dialog)
  // å¨æ°å®ä¾ä¸­æ³¨å Element Plus, è¿å¼¹çªä¸­çç»ä»¶å°±å¯ä»¥æ­£å¸¸æ¾ç¤ºäº
  app.use(ElementPlus);
  // è¿ä¸ªdivåç´ å¨å¨éæ¯åºç¨æ¶éè¦è¢«ç§»é¤å
  const div = document.createElement('div')
  document.body.appendChild(div)
  app.mount(div)
}
</code></pre>
<pre><code>&lt;template&gt;
  &lt;div&gt;
    &lt;el-button @click="openMask"&gt;ç¹å»å¼¹çª&lt;/el-button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import childTest from '@/components/childTest.vue'
import { renderDialog } from '@/hooks/dialog'
import { getCurrentInstance } from 'vue';
const currentInstance = getCurrentInstance();
function openMask(){
  console.log('currentInstance',currentInstance)
  const otherProps =  {cancelText:'åæ¶å', confirmText: 'ç¡®è®¤å',showFooterBool:true }
  const dialogSetObject = {title:'æµè¯å¼¹çªå', width: '700', draggable: true}
  renderDialog(childTest,otherProps,dialogSetObject, (res)=&gt;{
    console.log('éè¿åè°å½æ°è¿åå¼', res)
    // è¿éè¿åä¸ä¸ªpromiseå¯¹è±¡ï¼è¿æ ·å°±å¯ä»¥è®©ä¸å¡å®æåæå³é­å¼¹çª
    return fetch("https://dog.ceo/api/breed/pembroke/images/random")
    .then((res) =&gt; {
      return res.json();
    })
    .then((res) =&gt; {
        console.log('è·åçå¾çå°åä¸ºï¼', res.message);
    });
  })
}
&lt;/script&gt;

&lt;style lang="scss" scoped&gt;

&lt;/style&gt;
</code></pre>
<pre><code>&lt;template&gt;
  &lt;el-form
    ref="ruleFormRef"
    style="max-width: 600px"
    :model="ruleForm"
    :rules="rules"
    label-width="auto"
  &gt;
    &lt;el-form-item label="Activity name" prop="name"&gt;
      &lt;el-input v-model="ruleForm.name" /&gt;
    &lt;/el-form-item&gt;
    &lt;el-form-item label="Activity zone" prop="region"&gt;
      &lt;el-select v-model="ruleForm.region" placeholder="Activity zone"&gt;
        &lt;el-option label="Zone one" value="shanghai" /&gt;
        &lt;el-option label="Zone two" value="beijing" /&gt;
      &lt;/el-select&gt;
    &lt;/el-form-item&gt;
    
    &lt;el-form-item label="Activity time" required&gt;
      &lt;el-col :span="11"&gt;
        &lt;el-form-item prop="date1"&gt;
          &lt;el-date-picker
            v-model="ruleForm.date1"
            type="date"
            aria-label="Pick a date"
            placeholder="Pick a date"
            style="width: 100%"
          /&gt;
        &lt;/el-form-item&gt;
      &lt;/el-col&gt;
      &lt;el-col class="text-center" :span="2"&gt;
        &lt;span class="text-gray-500"&gt;-&lt;/span&gt;
      &lt;/el-col&gt;
      &lt;el-col :span="11"&gt;
        &lt;el-form-item prop="date2"&gt;
          &lt;el-time-picker
            v-model="ruleForm.date2"
            aria-label="Pick a time"
            placeholder="Pick a time"
            style="width: 100%"
          /&gt;
        &lt;/el-form-item&gt;
      &lt;/el-col&gt;
    &lt;/el-form-item&gt;

  
    &lt;el-form-item label="Resources" prop="resource"&gt;
      &lt;el-radio-group v-model="ruleForm.resource"&gt;
        &lt;el-radio value="Sponsorship"&gt;Sponsorship&lt;/el-radio&gt;
        &lt;el-radio value="Venue"&gt;Venue&lt;/el-radio&gt;
      &lt;/el-radio-group&gt;
    &lt;/el-form-item&gt;
    &lt;el-form-item label="Activity form" prop="desc"&gt;
      &lt;el-input v-model="ruleForm.desc" type="textarea" /&gt;
    &lt;/el-form-item&gt;

  &lt;/el-form&gt;
&lt;/template&gt;

&lt;script lang="ts" setup&gt;
import { reactive, ref } from 'vue'

import type { FormInstance, FormRules } from 'element-plus'

interface RuleForm {
  name: string
  region: string

  date1: string
  date2: string


  resource: string
  desc: string
}


const ruleFormRef = ref&lt;FormInstance&gt;()
const ruleForm = reactive&lt;RuleForm&gt;({
  name: 'Hello',
  region: '',
  date1: '',
  date2: '',
  resource: '',
  desc: '',
})



const rules = reactive&lt;FormRules&lt;RuleForm&gt;&gt;({
  name: [
    { required: true, message: 'Please input Activity name', trigger: 'blur' },
    { min: 3, max: 5, message: 'Length should be 3 to 5', trigger: 'blur' },
  ],
  region: [
    {
      required: true,
      message: 'Please select Activity zone',
      trigger: 'change',
    },
  ],
  date1: [
    {
      type: 'date',
      required: true,
      message: 'Please pick a date',
      trigger: 'change',
    },
  ],
  date2: [
    {
      type: 'date',
      required: true,
      message: 'Please pick a time',
      trigger: 'change',
    },
  ],
  resource: [
    {
      required: true,
      message: 'Please select activity resource',
      trigger: 'change',
    },
  ],
  desc: [
    { required: true, message: 'Please input activity form', trigger: 'blur' },
  ],
})

const submitForm = async () =&gt; {
  if (!ruleFormRef.value) {
    console.error('ruleFormRef is not initialized')
    return false
  }
  try {
    const valid = await ruleFormRef.value.validate()
    if (valid) {
      // éªè¯éè¿åï¼å°±ä¼å¯ä»¥æä½ éè¦çæ°æ®æ´é²åºå»
      return Promise.resolve(ruleForm)
    }
  } catch (error) {
    // ä¸ºå¥submitFormä¸­ï¼validçå¼æ¯falseä¼æ§è¡catch ï¼
    // el-form ç»ä»¶ç validate æ¹æ³çå·¥ä½æºå¶å¯¼è´çã validate æ¹æ³å¨è¡¨åéªè¯å¤±è´¥æ¶ä¼æåºå¼å¸¸
    console.error('err', error)
    return false
    /**
     * ä¸é¢è¿æ ·åä¸ºå¥çé¢ä¼æ¥éå¢ï¼
     * return Promise.reject(error)
     * å½è¡¨åéªè¯å¤±è´¥æ¶ï¼ruleFormRef.value.validate() ä¼æåºä¸ä¸ªå¼å¸¸ã
     * è½ç¶ä½ ç¨äº try...catch æè·è¿ä¸ªå¼å¸¸ï¼å¹¶ä¸å¨ catch åä¸­éè¿ return Promise.reject(error) è¿åäºä¸ä¸ªè¢«æç»ç Promise
     * ä½å¦æè°ç¨ submitForm çå°æ¹æ²¡ææ­£ç¡®å°å¤çè¿ä¸ªè¢«æç»ç Promiseï¼å³æ²¡æä½¿ç¨ .catch() æè await æ¥æ¥æ¶éè¯¯ï¼ï¼
     * é£ä¹æµè§å¨æ§å¶å°å°±ä¼æ¾ç¤ºä¸ä¸ª "Uncaught (in promise)" éè¯¯ã
     * å¨ catch ä¸­åæ¬¡ return Promise.reject(error) æ¯å¤ä½çï¼ ç´æ¥return false
     * */ 
    /**
     * å¦æä½ è¿æ ·å
     * throw error ç´æ¥æåºéè¯¯å³å¯
     * é£ä¹å°±éè¦åè°ç¨submitFormçå°æ¹æè·å¼å¸¸
     * */  
  }
}

defineExpose({
  submitForm:submitForm
})
&lt;/script&gt;

</code></pre>

</div>
<div id="MySignature" role="contentinfo">
    <div style="width:818px;background:#f5f5f5; padding: 10px 10px 10px 10px; border: 1px dashed rgb(224, 224, 224); font-family: å¾®è½¯éé»; font-size: 13px;">
            <h1 style="font-size: 24px;"> éè§é®é¢ï¼è¿æ¯ä½ æé¿çæºä¼ï¼å¦æä½ è½å¤è§£å³ï¼è¿å°±æ¯æ¶è·ã </h1>
		    <div style="padding:10px">
		        ä½èï¼<a href="https://www.cnblogs.com/IwishIcould/" target="_blank">ææ¥åé£æç¸è¯</a> <br>
		        åºå¤ï¼<a href="https://www.cnblogs.com/IwishIcould/">https://www.cnblogs.com/IwishIcould/</a> <br>
                        <p> æ³é®é®é¢ï¼æèµäºåå¾®çåä¸»ï¼æ±æ±ä½ å¤æ³¨ä¸ä¸çæ£æ£æèå¾®ä¿¡ï¼è¿æ ·æå¥½èç³»ä½ ï¼(ã£â¢ÌÏâ¢Ì)ã£ââ¾â¾ï¼</p>
		        <p>å¦æè§å¾è¿ç¯æç« å¯¹ä½ æå°å°çå¸®å©çè¯ï¼è®°å¾å¨å³ä¸è§ç¹ä¸ªâæ¨èâå¦ï¼æèå³æ³¨åä¸»ï¼å¨æ­¤æè°¢ï¼</p>
		        <p> ä¸æ°´åå±±æ»æ¯æï¼æèµ5æ¯ä¹°è¾£æ¡è¡ä¸è¡ï¼æä»¥å¦æä½ å¿æè¿æ¯è¾é«å´ï¼ä¹æ¯å¯ä»¥æ«ç æèµåä¸»(ã£â¢ÌÏâ¢Ì)ã£ââ¾â¾ï¼</p>
                        <p> æ³é®é®é¢ï¼æèµäºåå¾®çåä¸»ï¼æ±æ±ä½ å¤æ³¨ä¸ä¸çæ£æ£æèå¾®ä¿¡ï¼è¿æ ·æå¥½èç³»ä½ ï¼(ã£â¢ÌÏâ¢Ì)ã£ââ¾â¾ï¼</p>
				<div style="display: flex;">
					<div style="margin-right: 100px;text-align: center;">
						<img src="//images.cnblogs.com/cnblogs_com/IwishIcould/1900124/t_201214043958æ¯ä»å®æ¶æ¬¾ç .jpg?a=1607924145179">
						<div>
							æ¯ä»å®
						</div>
					</div>
					<div style="text-align: center;">
						<img src="//images.cnblogs.com/cnblogs_com/IwishIcould/1900124/t_20121604194271E6E296CCB71A007F4E22073D5EB64A.jpg">
						<div>å¾®ä¿¡</div>
					</div>
				</div>
		        æ¬æçæå½ä½èææï¼æ¬¢è¿è½¬è½½ï¼æªç»ä½èåæé¡»ä¿çæ­¤æ®µå£°æï¼å¨æç« é¡µé¢ææ¾ä½ç½®ç»åºåæè¿æ¥ <br>
		        å¦ææä¸­æä»ä¹éè¯¯ï¼æ¬¢è¿æåºãä»¥åæ´å¤çäººè¢«è¯¯å¯¼ã <br>
               
		    </div>
           
            
		</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-13 09:11">2026-01-13 09:10</span>&nbsp;
<a href="https://www.cnblogs.com/IwishIcould">åé£ææ¥æç¸è¯</a>&nbsp;
éè¯»(<span id="post_view_count">63</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19147850);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19147850', targetLink: 'https://www.cnblogs.com/IwishIcould/p/19147850', title: 'vueä½¿ç¨hå½æ°å°è£dialogç»ä»¶ï¼ä»¥å½ä»¤çå½¢å¼ä½¿ç¨dialogç»ä»¶' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ 2025æ»ç»ç¯ï¼å¿ç¢çæ¥å­éè¶è¿35å²ï¼å¼å¯ä¸ä¸ä¸ªå¾ç¨ ]]></title>
    <link>https://www.cnblogs.com/SunSpring/p/19469874</link>
    <guid>2ff0687fa37bca8083908313f4091d7b</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/SunSpring/p/19469874" title="åå¸äº 2026-01-13 08:42">
    <span role="heading" aria-level="2">2025æ»ç»ç¯ï¼å¿ç¢çæ¥å­éè¶è¿35å²ï¼å¼å¯ä¸ä¸ä¸ªå¾ç¨</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>ââ2025ååæ°å¹´å·²ç¶æ¥è¿ï¼å¹´åçå·¥ä½è®¡åä»»å¡åºæ¬ä¹å®æäºï¼æ¶ä¸æ¶ç¿»çå­å­çæå¿éå·é²è®°å½ä¸ä¸è¿å»çæ¶åï¼ä»¥ä¾¿å¤å¹´åæ¾å¯»æ¾ç»çè®°å¿ã</p>
<h1 id="2024">2024</h1>
<p>ââçäºä¸åå®¢æ´æ°ï¼ä¸ä¸æ¬¡æ´æ°è¿æ¯å¨2024å¹´ä¸æä»½ï¼ä¹å°±æ¯è¿ä¸æ¬¡ï¼ææ´æ°å®äºéå­¦ä¸é.net coreç³»åï¼æèè¯´æ¯.net5+ãå ä¸ºé£ä¸ªæ¶åcoreå·²ç»åºæ¬ä¸åæäºï¼ç®æ¯ç»èªå·±ç.net åäºæåä¸æ¬¡çå¤çã</p>
<p><img src="https://img2024.cnblogs.com/blog/993045/202601/993045-20260112093913561-1455228171.png" alt="image" loading="lazy"></p>
<p>ââç¿»çæä¹åçæç« å¤§æ¦äºè§£ï¼æä¹åçå·¥ä½åºæ¬ä¸æ¯åwinformæ¡é¢å¼åçï¼å ä¸ºææå¨çé¨é¨æ¯ä¸ä¸ªæ°æ®çäº§å å·¥çé¨é¨ï¼éè¦åä¸äºæ¡é¢ç¨åºè¿è¡æ°æ®å å·¥åå¤çï¼åæ¬æ¥ä¸äºæ«æè®¾å¤ï¼è¿æ°æ¯winformçä¸»æåºãå·®ä¸å¤5å¹´æ²¡æåè¿.netåç«¯å¼åäºå§ï¼å½æ¶æèªå·±ææ¯è½åæä»¥åéå­¦äºä¸é.net5+,åæ¬DDDé¢åé©±å¨çç­é¨ä¸è¥¿ãä½å½è¿å°±æ¯è¿è¬å¥½ç¬ï¼ææè¿ä¸¤å¹´åºæ¬è¿C#å¼åé½æ²¡æä¹åäº,èæè¿å å¤©çå°å­å­éé¢çåç§å´èµ·ï¼æ´æ¯ææ¦ä¸åãåå¤´çå·²ç»35çèªå·±å·²ç»ä¸åæ¯å½åé£ä¸ªé£åº¦ç¿©ç¿©çå°å¹´äºï¼å¾å¤äºæé½æ¯éäºç©ãéæ¶ä»£åå±çï¼æä»¬è¦æååçç¼åï¼èä¸æ¯è¸èºä¸åï¼æ³èµ·ãä¸ä»£å®å¸ãéé¢å®«ç¾½ç°çä¸å¥å°è¯âäººè¦å¾è¿çï¼è¿äºå±±ï¼ç¼çå°±å¼éäºâã</p>
<h1 id="2024-1">2024</h1>
<p>ââæ¶é´æ¨åå°2024å¹´å¹´åï¼æç§é«å±çç»ç»è°æ´åæç¥è®¡åè¿è¡é¨é¨æåéç»ï¼ç±äºææå¨é¨é¨çç»çåææ¯ç»çå¨é½å»äºå¶ä»æ°æç«çé¨é¨æä»»é¢å¯¼ï¼ææèµ·äºåé¨é¨çææ¯è´è´£äººãè½ç¶æä»¬æ°æ®çäº§é¨é¨æ100æ¥å·äººï¼ä½æ¯åç¨åºçåªæ10å¤ä¸ªäººï¼æä»¥ææ¯è¿åç®¡ççäººä¸æ¯å¤ªå¤å¥½ï¼ä¹åå°±å¼å§äºæ°çå·¥ä½å¾ç¨ï¼ä¹å°±æ¯ä¸ºå¥è¿2å¹´æé½æ²¡æåæç« äºï¼ç¡®å®æ²¡ææ¶é´åç²¾åã</p>
<p>ââç±äºé¨é¨éç»ï¼æ½èµ°äºä¸é¨ååé¨é¨çäººï¼éè¦æ°æä¸äºäººãèä¸ç±äºè°æ´çå¤ªæ¥ï¼é¨é¨äº¤æ¥ä¸å¨å°±å®æäºï¼æ»å±çäº¤æ¥ææ¡£åªæåä¸ªä»åºçå°ååä»åºéé¢çreadmeãä»å½åçå°ç»è´è´£äººå°é¨é¨è´è´£äººï¼2024å¹´çä¸å¹´éè¦è½¬åè§è²ï¼ç¬¬ä¸è¦ç®¡çå¢éï¼ç¬¬äºèªå·±è¿è¦ä¸åºåå²éãç±äºä¹åå¾å¤å­ç³»ç»é½æ¯javaåçï¼å¹¶ä¸å¤å¹´çç¼ç¼è¡¥è¡¥è¿è¡èµ·æ¥å·²ç»æ¯ä¸å ªéè´ï¼æä»¥åé¢å¯¼åäºæ±æ¥ï¼å¯¹æ´ä¸ªç³»ç»è¿è¡éæåæ´åï¼åºäºæ¯è¾å°çåå¨åç¨³å®ï¼å³å®è¿æ¯å¨åæ¥çjavaä½ç³»åè¿è¡éæãä¹åå°±æ¯ç»å»ºå¢éãæ¶æè®¾è®¡ãåææ¡£ãç»ååå¾ãå¥½å¨ç³»ç»æ¶æè®¾è®¡ä¸éè¦å»æ£ææ¯ç»èï¼æä»¥javaææ¯ä¹ä¸éè¦å¤ªç²¾éï¼ä¸å®¶ä¹è¨ï¼ï¼æ´ä¸ªç³»ç»éç¨äºå¾®æå¡çæ¶æï¼åºç¨ç«¯æwebãwinformå®¢æ·ç«¯ï¼ç¨spring cloudä½ä¸ºåºåº§ï¼nacosåæå¡æ³¨ååç°ï¼éåèªå·±è®¾è®¡çç»ä¸é´æç®¡çï¼æ´ååä¸ªä¸å¡ç³»ç»å°ä¸ä¸ªä½ç³»ä¸­ã</p>
<p><img src="https://img2024.cnblogs.com/blog/993045/202601/993045-20260112111159622-659126833.png" alt="image" loading="lazy"></p>
<p>ââä¹åç®¡çè¿ç¨é½æ¯åºäºshowdocææ¡£ï¼ç±äºäººæ°æ¯è¾å°å¤§å®¶å¾é¾ç¨èµ·æ¥ç®¡çå·¥å·ãè½ç¶æä»¬å¼åçæ¯åé¨ç³»ç»ï¼ä½æ¯è®¿é®éå¹¶åéï¼åæ¬ç³»ç»å¤æåº¦è¿æ¯å¾é«çï¼å¹¶ä¸å¼åå·¥ä½éæ¯è¾å¤§ï¼æä»¥é¡¹ç®æåæå°±å¼å¥äºç¦éè¿è¡é¨é¨é¡¹ç®ç®¡çãä¹åå°±æ¯å¨ä¸é¢åææ¡£ï¼åè¯å®¡ãåè§£ä»»å¡ãæµè¯ãéªæ¶ãåå¨å¨æçå¼åæµç¨ãåæå°±æ¯å¤©å¤©å ç­æ¾ææ¯æ¹æ¡ï¼çåæ¥ç³»ç»çé»è¾ï¼æ³æ¹é éææ¹æ¡ï¼å¹¶ä¸è¿è¦ç»ååå¾ï¼å ä¸ºæ²¡æé¡¹ç®ç»çåäº§åç»çè§è²ï¼ãåæ¥å°å¼åé¶æ®µè¿è¦å¸¦å¤´éææ ¸å¿æå¡åæ¨¡åï¼éè¦æ´æ·±å¥ä¸ç¹å­¦ä¹ spring bootï¼ï¼å¥½å¨javaçè¯­æ³åC#ç±»ä¼¼ï¼ä½æ¯å®è¯è¯´C#çè¯­æ³è¿æ¯åæjavaçãå¨æ´ä¸ªç³»ç»éæçè¿ç¨ä¸­æ¹é äºä¸äºçç¹ï¼æ¯å¦åæ¥çjavaå®æ¶ä»»å¡scheduledï¼å¾å¤åå°è·çä»»å¡é½æ¯ä»¥è¿ç§ç¼ç æ¹å¼åçï¼æ¯æ¬¡è¦è°æ´ç­ç¥é½éè¦æ¹é ä»£ç åæéå¯ï¼åé¢å¼å¥äºxxjobä»»å¡è°åº¦çæ¹å¼å°±çµæ´»äºå¾å¤ãåæ¬æµç¨æå¡ï¼æ©ææ¯æ ¹æ®æµç¨å¼æactivityæ¹é çï¼æ¯æ¬¡éå¯è¦åä¸ªå°æ¶æè½å è½½å®ï¼åé¢å¼å¥äºcamundaï¼æ´ä¸ªç³»ç»æ¹é é½æ¨å¨è§£å³å®éç»´æ¤åå¼åææ¬ï¼å®å¨æ¯å¡å®åæ³ã</p>
<p>ââ2024å¹´å¹´åºç³»ç»æ­£å¼åæ¢ä¸çº¿ï¼ç®åç¨³å®è¿è¡1å¹´ï¼è¿å¨æç»­ä¼ååæ¹é ãå¨2024å¹´ä¸å¹´éå¯¹äºææ¯çè®¤è¯åæäºä¸ä¸ªç¿»å¤©è¦å°çååï¼ä»¥ååwinformçæ¶åæ²¡ææè¿è¿ä¹å¤ä¸­é´ä»¶ãç³»ç»éæãä»å¾®æå¡ï¼spring cloudãé¿éå·´å·´nacosï¼ãç»ä¸é´æç³»ç»ï¼èªå·±æ¹é çï¼ãåå¸å¼æä»¶å­å¨ï¼minioï¼ãåå¸å¼æ°æ®åºï¼tidbï¼ãä»»å¡è°åº¦ï¼xxjobï¼ãæµç¨å¼æï¼camundaï¼ãåå¸å¼å¨ææç´¢å¼æï¼ESï¼ãhadoopãsparkç­ç­å¨é½æ¸äºä¸éãåæ¥è§éä¹å¤æè¿ä¹å¤ç²¾å½©çåå®¹ï¼è®°å¾2024å¹´å¹´ä¼ä¸ç±äºå ç­å¤ªå¤ï¼è¿å¾äºä¸ä¸ªâæä½³å·çâå¥ï¼</p>
<h1 id="2025">2025</h1>
<p>ââæ¶é´æ¥å°2025å¹´ï¼ç»§ç»­æ··æï¼ç±äºå·¥ä½çä¸äºè½¬åï¼ä¸ä»è¦å­¦ä¼ç®¡çå¢éï¼å¸¦å¨å¢éæ°å´ååå¼ä»¬ä¸èµ·å®æå¹³å°çæç»­ä¼åè¿æ¥æ°çä»»å¡è¾å¥ï¼å³å¿å¢éæåçç¶æï¼å¶å®åççå·¥ä½è®¡åä»»å¡ï¼å¬å¹³çç»©æèæ ¸ãå¯¹ä¸è¿è¦æ±æ¥å·¥ä½ï¼äºåæ¶é´ï¼äºåèµæºï¼åè°å¤é¨åä½ï¼å¼åç§ä¼è®®ãæéè¦çæ¯è¦å¨é¨é¨æ¬èº«çç°ç¶åé¢å¯¼çææä¸­æ¾å°å¹³è¡¡ï¼æé´å¤æ¬¡é­å°é¢å¯¼æ¹è¯è¦æå¼æ ¼å±ãå®è§æèï¼è¿é¨åæºçº ç»çï¼æä¹æ²¡æè§å¾èªææ ¼å±æå¤ä½ï¼ææ¶åä¹ä¸çè§£ä»ä»¬è¦çæ ¼å±æ¯ä»ä¹ï¼ï¼åæ¬ä¸äºäººçå»æ¿å°è±¡ï¼åªè½å¼ç¨é£å¥puaåè¨ï¼å¨æ§è¡ä¸­çè§£ï¼å¨çè§£ä¸­æ§è¡ã</p>
<p>ââ2025ä¹æ¯AIçªé£çè¿çä¸å¹´ï¼è¿ä¸å¹´æå¤ªå¤çææ¯åæ³æ³å¯ä»¥ç¨AIå»å®ç°ï¼æä»¥æä»¬åå¨åæ¥åºç¡ä¸åå©ç¾åº¦å¼æºé¡¹ç®ï¼é£æ¡¨PaddlePaddleï¼OCRè¿è¡æ¹é åçº§ï¼å°æ°æ®çææµç¨ä¸­çé¨åæ°æ®éè¿è®­ç»æ£æµåOCRèªå¨æåãç¶ååå»å­¦ä¹ äºä¸äºAIçåºç¡ç¥è¯ï¼å½ç¶åªæ¯äºè§£ä¸äºåºç¡çæ¦å¿µååçï¼ä»¥æ¹ä¾¿åä¸é¨åAIçåäºäº¤æµçæ¶åå¨åä¸é¢éã</p>
<p>ââä¸ç¥ä¸è§ï¼ä¹å³å°35å²ï¼åé¦è¿å»ä»¿ä½è½»èå·²è¿ä¸éå±±ï¼å¯¹äºæªæ¥ææ²¡æå¤ªå¤çç¦èï¼åºè¯¥ç¸ä¿¡èªå·±çé§æ§ãæä¹ç»éé£ç§è¿æ°å¥½å®¶åº­å¥½çäººï¼åºçåæï¼ä¸è·¯åå°½åç§ç£¨é¾ï¼èä»å·²è¶³å¤ä»å®¹ï¼ææ¶å¸¸å¨æ³è¿ä¹å¤å¹´çæ·¬ç¼ï¼å³ä½¿æç°å¨å¤±ä¸ï¼æä¹ç¸ä¿¡è½æ¾å°å¦å¤ä¸æ¡åºè·¯ï¼å¨å«çå°æ¹ç»§ç»­ä¿æè¿ä»½é§æ§ãæä»æ¥ä¸å±éäºæä»ä¹ææ¯ï¼å¦æææ¯æ¾ä¸å°å·¥ä½ï¼ææèä¼æ¢ä¸ä¸ªè¡ä¸ï¼å ä¸ºæçäººçè¿éè¦æ´å¤çä½éªï¼ç®åç¥æ¾åè°ãä½æ¯ç¨åºåçèå¿ãæèé®é¢çæè·¯ãè§£å³é®é¢çæ¹æ³ææ³å¨å¶ä»äºæä¸é¢ä¹æ¯ä¸ä»½å®è´µçç»éªå§ã</p>
<p>ââ2025å¹´ç±äºå¢ééæ¸æçï¼å¾å¤äºæå¯ä»¥æ¾å¿äº¤ç»ä¸äºææå½çåå­¦ï¼æè¿è¶åª³å¦å¿å¨å¿æååºé¨æç©ºï¼å¨å¿æåæåª³å¦å¿ä¸æå¸¦å¤§ï¼ç°å¨8å²äºå¯ä»¥å¤¸å¼ çè¯´æ²¡è®©å«äººå¸¦è¿ä¸å¤©ï¼å¶ä¸­çç´¯åªæèªå·±ç¥éï¼ï¼å¤ä¹ èäºä¸ä¸ªåºçä¸ä¸ä¸­çº§èµæ ¼è¯ä¹¦ï¼ä¸»è¦æ¯æä»¬æ¯å­¦æ¯æ°æ®å¤çåååºçï¼å æ­¤è¿ä¸ªè¯ä¹¦æ¯ä»¥èä»£å­¦ï¼æå¼ææ¯å»äºè§£ä¸å¡åè¡ä¸ã<br>
<img src="https://img2024.cnblogs.com/blog/993045/202601/993045-20260112154713746-264838872.png" alt="image" loading="lazy"></p>
<h1 id="éæ³">éæ³</h1>
<p>ââè¿ä¸¤å¹´ç»æææ·±çæåå°±æ¯ææ¯å®æ¬èº«å¹¶ä¸æ¯ä»ä¹å¼é±çä¸è¥¿ï¼æ²¡å¿è¦æ±çä»ä¹ææ¯ä¸æ¾ï¼æ´ä½åµAIå æï¼ææ¯æ¥æ°æå¼ãæ°æ°æ¯è´£ä»»å¿ãä¸è¿å¿ãå¬å¿ãæ²éè½åãè¡¨è¾¾è½åãåæå°é¾çè½åææ¯æä»¬çç»¼åè½åï¼è¿ç§è½åæ¾å°ä»»ä½å°æ¹åæ ·éç¨ãæç°å¨ææçå°±æ¯åä¸ä¸ªä¸è¥¿çæ¶åå¾å¤äººçç¬¬ä¸æç»ªå°±æ¯çé¾æç»ªï¼ä¸è¥¿è¿æ²¡äºè§£æ¸æ¥å°±å¼å§å¼ºè°è¿ä¸ªä¸è¥¿æå¤å¤§çé¾åº¦ï¼å¾å¤ä¸è¥¿å¶å®æ²¡ææ³è±¡çé£ä¹é¾ï¼å¾å¤ä¸ªå°é¾çå³å£æä¹æ¯è¿æ ·æè¿æ¥çï¼æ¿å°äºæç¬¬ä¸è¦å¡æ¯å»äºè§£å»è¯ä¼°ç¶ååååºãè¿ææ²éè½åï¼äºæçåé¦è½åï¼åäºäºæè¦åæ¶åé¦ï¼ä¸ç®¡ä½ æå¥½äºæ²¡æå¥½ï¼ä»»å¡çé¶æ®µæ§ææï¼ææ¥é®é¢çé¶æ®µæ§åå¤ï¼äºææ¨è¿é¶æ®µæ§åæ­¥ãå¦æå¨ä½ æ²¡æåæ¶ç»æçæåµä¸è¿äºä¸è¥¿ä¸å®è¦åå¥½ï¼ä¸ç¶å¢éæèç¨æ·æ ¹æ¬ä¸ç¥éä»ä¹æåµï¼è³äºä½ æå¥½åè¯´ç¨äºä»ä¹çé¼çææ¯è§£å³çï¼å¯¹æ¯èµ·ï¼é£ä¸æ¯å«äººå³å¿çä¸è¥¿ãæä»¥æè¯´è¿äºä¸è¥¿è¿è¿æ¯ä½ ä¸ç ä»ä¹ææ¯æ´éè¦ï¼è¯´å¥ä¸å¥½å¬çï¼å¤§å¤æ°å²ä½ä¸éè¦ä½ å»åç§ç ï¼ä¹ä¸éè¦ä»ä¹é«æ·±çææ¯ï¼ææ¶é´è±å¨ç³»ç»æ§åé»è¾æ§ç¨³å¥æ§çæåæ¯ä½ ç¨å¥æ·«æå·§æ´å¥½ã</p>
<h1 id="ä¸ä½">ä¸ä½</h1>
<p>ââ ä¸æ¬¡æ»ç»å¤çè¿æ¯2022å¹´ï¼è¿ä¸¤å¹´æ¶åä¸æèè¿ï¼ä»¿ä½è¿å¨æ¨å¤©ã<br>
<img src="https://img2024.cnblogs.com/blog/993045/202601/993045-20260112142839100-880997885.png" alt="image" loading="lazy"></p>
<p>ââå½æ¶åå°åå±äºä¸äºä¸ä½ç±å¥½ï¼ç´¯çåæ¶ä¹è¦å»éæ¾åå²æ·¡çæ´»çæ èï¼è¿éç»ä¸æ¯ä»ä¹å¿çµé¸¡æ±¤ï¼ç»å¸¸çå°å«äººé»ç¼èªä¾çè§é¢éé¢ä¸å å¼¹å¹æèè¯è®ºè¯´èªå·±11ç¹ä¸ç­å·²ç»ç´¯çåæ­»äºï¼è¿è¦å»é»ç¼ï¼è¯´å«äººæ¯å®¶åº­å¥½å·¥ä½é²ï¼è½ç¶ä¸æé¤è¿ç§æåµï¼ä¹è½çè§£å¤§å®¶å¯¹è¿ä¸ªä¸çæä¸å¬å¹³çæ±æ¨ï¼å¤§ç¯å¢çæ±æ¨ï¼ä½æ¯è¿äºçä¸æ¯ä¸»è¦å ç´ ï¼å¯¹äºèº«å¿å¥åº·çäººæ¥è¯´åï¼ï¼æä¸å¹´å ç­å ç¾ä¸ªå°æ¶è¿æ¯å¬å¸ä¸ç­æå¡è®¡æ¶åçï¼å¹³æ¶è¿è¦å¸¦å¨ï¼ææ¶åå å®ç­æçè³ç´æ¥ä»å¬å¸è·åå»ï¼å¤§æ¦æ7-8å¬éçè·ç¦»ãé£å¥è¯æä¹è¯´æ¥çæ¶é´å°±æ³æµ·ç»µéçæ°´ï¼æ¤ä¸æ¤æ»æ¯æçï¼æä»¥2025å¹´çè·æ­¥ä¾ç¶åæçï¼è·äºäººççé¦åºåé©¬ï¼å¹³æ¶è·éå¾å°ï¼å½å¤©è®¡åç ´2å°±è¡ï¼èµéä¸è¿åçéåº¦è·ï¼å¦æä¹åæç»éªæ¾å¼è·åºè¯¥è½ç ´1ï¼35çã<br>
<img src="https://img2024.cnblogs.com/blog/993045/202601/993045-20260112145603592-1170949636.png" alt="image" loading="lazy"><img src="https://img2024.cnblogs.com/blog/993045/202601/993045-20260112143828854-1961766154.png" alt="image" loading="lazy"></p>
<p>ââå»å¹´è¿åå±äºä¸ä¸ªç±å¥½ï¼éé±¼ãåºæ¬ä¸æ¯å¤éï¼å ä¸ºç½å¤©è¦ç§é¡¾å¨å¿ï¼è¾å¯¼ä½ä¸ï¼è¿ä¸ªç±å¥½ç®åå¯¹èº«ä½è¿æ¯ä¸åå¥½ï¼ç¬å¤ä¸å¤ªè¡ï¼æè¿æç¹ä¸ç¾T_Tï¼è¿æ¯è¦åå¶ä¸ä¸ãå¦å¤åè¯å¤§å®¶ä¸ä¸ªä¸å¥½çæ¶æ¯ï¼æç¨0.6ççº¿éäºä¸æ¡æ¥è¿3æ¤çé²¤é±¼ï¼éäºåä¸ªå¤å°æ¶åååãå¦å¤è¿å­¦äºè·¯äºï¼æä¸ç¨åæ²é¢äº®çä¸­äºä¸æ¡é»é±¼ï¼ä½ è½ç¸ä¿¡åãè¿ä¹åæå·¥ä½ä¸æ ·ï¼ä»ä¹é½æ¿æå»å°è¯ï¼èä¸æ¯æè°çå°éãè·¯äºï¼çè³ç§å¤©æè¿å»ä¹°äºæºªæµç«¿ï¼å¸¦èå©å¨å¿å»æºªæµéé©¬å£ï¼<br>
<img src="https://img2024.cnblogs.com/blog/993045/202601/993045-20260112145711100-1373990262.png" alt="image" loading="lazy"><img src="https://img2024.cnblogs.com/blog/993045/202601/993045-20260112145451228-886334634.png" alt="image" loading="lazy"></p>
<h1 id="2026">2026</h1>
<p>ââ2026æ²¡æä»ä¹æè®¸åæ¹åï¼ä¸ç¥éåä¼æåªäºæ°çææåæºéï¼ä½äºæèè¨æé½ç§åå¨æ¶ï¼ç¶åè®¤çå»å¯¹å¾ä¾¿æ¯ï¼ä¸è´¬ä½ä»äººï¼ä¸æ¬é«èªå·±ï¼ä¹å¸æå¤§å®¶é½è½æ©æ¥æ¾å°èªå·±åå¿çé£ä»½èå¥åå®éã</p>

</div>
<div id="MySignature" role="contentinfo">
    <div id="Copyright">
<p>ä½èï¼<a title="author" href="https://www.cnblogs.com/SunSpring" target="_blank">å­æ³</a></p>
<p>åºå¤ï¼<a href="https://www.cnblogs.com/SunSpring/p/19469874" target="_blank">https://www.cnblogs.com/SunSpring/p/19469874</a></p>
<p>å¦æä½ åæ¬¢æç« æ¬¢è¿ç¹å»æ¨èï¼ä½ çé¼å±å¯¹æå¾æç¨ï¼</p>
<p>æ¬æçæå½ä½èææï¼è½¬è½½éå¨æç« é¡µé¢ææ¾ä½ç½®ç»åºåæé¾æ¥ã</p>
</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-13 08:43">2026-01-13 08:42</span>&nbsp;
<a href="https://www.cnblogs.com/SunSpring">XSpringSun</a>&nbsp;
éè¯»(<span id="post_view_count">290</span>)&nbsp;
è¯è®º(<span id="post_comment_count">2</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19469874);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19469874', targetLink: 'https://www.cnblogs.com/SunSpring/p/19469874', title: '2025æ»ç»ç¯ï¼å¿ç¢çæ¥å­éè¶è¿35å²ï¼å¼å¯ä¸ä¸ä¸ªå¾ç¨' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ è·¨è¶ææ¯é¸¿æ²ï¼Aspire èµè½ JavaScript ä¸ Node.js å¼åèçæ·±åº¦çæèå ]]></title>
    <link>https://www.cnblogs.com/shanyou/p/19474912</link>
    <guid>05c395c733a451c756569fae75da831d</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/shanyou/p/19474912" title="åå¸äº 2026-01-13 07:18">
    <span role="heading" aria-level="2">è·¨è¶ææ¯é¸¿æ²ï¼Aspire èµè½ JavaScript ä¸ Node.js å¼åèçæ·±åº¦çæèå</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="è·¨è¶ææ¯é¸¿æ²aspire-èµè½-javascript-ä¸-nodejs-å¼åèçæ·±åº¦çæèå"><strong>è·¨è¶ææ¯é¸¿æ²ï¼Aspire èµè½ JavaScript ä¸ Node.js å¼åèçæ·±åº¦çæèå</strong></h1>
<h2 id="1-æè¦"><strong>1. æè¦</strong></h2>
<p>å¨äºåçåºç¨å¼åçæ¼è¿åç¨ä¸­ï¼ææ¯æ çå¼ææ§å§ç»æ¯ä¸ä¸ªæ ¸å¿ç¹å¾ãé¿æä»¥æ¥ï¼ä¼ä¸çº§åºç¨å¼åå¾å¾åç°åºâåæ¨¡ITâçç¹å¾ï¼åç«¯æå¡ä¾èµäº.NET çæç³»ç»çå¼ºç±»åãé«æ§è½åä¼ä¸çº§ç¨³å¥æ§ï¼èåç«¯äº¤äºä¸é¨åå¾®æå¡åå¹¿æ³éç¨ JavaScript/TypeScript çæç³»ç»ççµæ´»æ§ä¸åºå¤§ç¤¾åºèµæºãè¿ç§å¤è¯­è¨ï¼Polyglotï¼æ¶æè½ç¶å¨åè½ä¸äºè¡¥ï¼ä½å¨å¼åè¿ç»´ï¼DevOpsï¼çâåå¾ªç¯ï¼Inner Loopï¼âä¸­å´å¶é äºæ¾èçæ©æ¦ãå¼åèå¸¸å¸¸éè¦å¨ Visual Studio çè°è¯å¨ãå¤æç Docker Compose YAML æä»¶ãæ£ä¹±ç Shell èæ¬ä»¥åæå¨ç»´æ¤ç .env ç¯å¢åéæä»¶ä¹é´é¢ç¹åæ¢ã</p>
<p>éç.NET Aspire 13.0 çæ¬çåå¸ï¼Microsoft å¯¹è¿ä¸çç¹ç»åºäºç³»ç»æ§çååºãç¹å«æ¯å¯¹äº JavaScript å Node.js å¼åèèè¨ï¼Aspire ä¸åæ¯ä¸ä¸ªä»éäº.NET åé¨çå·¥å·ï¼èæ¯ä¸å¥æ ååçåºç¡è®¾æ½å³ä»£ç ï¼Infrastructure as Code, IaCï¼è§£å³æ¹æ¡ã</p>
<p>Aspire éè¿ä¸å¤§æ ¸å¿æ¯æ±éå¡äº JavaScript å¼åä½éªï¼</p>
<ol>
<li><strong>ä»£ç åç¼æï¼Orchestration as Codeï¼</strong>ï¼å©ç¨ C# çå¼ºç±»åç¹æ§æå»º AppHostï¼æ¿ä»£èå¼±çèæ¬åéç½®ï¼ç»ä¸ç®¡ç Node.js åºç¨ãåç«¯æ¡æ¶ï¼React/Vue/Angularï¼ä»¥åä¾èµæå¡ï¼Redis, PostgreSQLï¼ççå½å¨æ 2ã</li>
<li><strong>å¨é¾è·¯å¯è§æµæ§ï¼Universal Observabilityï¼</strong>ï¼éè¿ OpenTelemetry æ åçæ·±åº¦éæï¼Aspire Dashboard ä¸º Node.js åºç¨æä¾äºå¼ç®±å³ç¨çåå¸å¼è¿½è¸ªãæ¥å¿èåä¸ææ çæ§ï¼æ¶é¤äºè·¨è¯­è¨è°è¯çç²åº 4ã</li>
<li><strong>æ ååæå¡åç°ï¼Standardized Service Discoveryï¼</strong>ï¼éè¿ services__ å ConnectionStrings__ ç­æ ååç¯å¢åéæ³¨å¥æºå¶ï¼è§£å³äºæ¬å°å¼åä¸çäº§ç¯å¢ä¹é´çéç½®æ¼ç§»é®é¢ï¼ä½¿ JavaScript åºç¨è½å¤æ ç¼å¯¹æ¥åç«¯æå¡ 1ã</li>
</ol>
<p>æ¬æå°æ·±å¥æ¢è®¨ä»ä¼ ç»ç AddNpmApp å°ç°ä»£åç AddJavaScriptApp çæ¶ææ¼è¿ï¼è¯¦è¿° ReactãAngularãVue ç­ä¸»æµæ¡æ¶çéææ¨¡å¼ï¼å¹¶æä¾å³äºçäº§ç¯å¢é¨ç½²ä¸äºåçå¯¹æ¥çæç¥æ§å»ºè®®ã</p>
<h2 id="2-åå¸å¼ç³»ç»å¼åä¸­çå¤è¯­è¨å°å¢ä¸ç ´å±"><strong>2. åå¸å¼ç³»ç»å¼åä¸­çå¤è¯­è¨å°å¢ä¸ç ´å±</strong></h2>
<p>è¦æ·±å»çè§£.NET Aspire å¯¹ JavaScript å¼åèçä»·å¼ï¼é¦åå¿é¡»åæå½åæ··åææ¯æ å¼åä¸­å­å¨çç³»ç»æ§ææãç°ä»£åå¸å¼ç³»ç»ä¸åæ¯åä¸çåä½åºç¨ï¼èæ¯ç±åç«¯åé¡µåºç¨ï¼SPAï¼ãåç«¯ API ç½å³ãå¾®æå¡è®¡ç®ååä»¥åå¤ç§æ°æ®å­å¨è®¾æ½ææçå¤æææç½ç»ã</p>
<h3 id="21-åå¾ªç¯ä¸­çç¢çåæ©æ¦"><strong>2.1 âåå¾ªç¯âä¸­çç¢çåæ©æ¦</strong></h3>
<p>å¨ä¼ ç»çå¨æ å¼åæµç¨ä¸­ï¼ä¸åå¼åèå¦æéè¦æå»ºä¸ä¸ªåå« React åç«¯ãNode.js ä¸­é´å± BFFï¼Backend for Frontendï¼ä»¥å.NET Core æ ¸å¿è®¡ç®æå¡çåºç¨ï¼éå¸¸é¢ä¸´çæé«çè®¤ç¥è´è·ä¸æä½å¤ææ§ã</p>
<ul>
<li><strong>å¯å¨æµç¨çå²è£</strong>ï¼å¼åèéè¦åå«æå¼å¤ä¸ªç»ç«¯çªå£ãå¨ä¸ä¸ªçªå£ä¸­è¿è¡ npm run dev å¯å¨åç«¯ï¼å¨å¦ä¸ä¸ªçªå£è¿è¡ dotnet run å¯å¨åç«¯ï¼åæ¶è¿éè¦ç¡®ä¿ Docker å®¹å¨ä¸­çæ°æ®åºå·²ç»å°±ç»ªãè¿ç§æå¨çãéåå­æ§çå¯å¨è¿ç¨ææå¯¼è´æå¡é´çç«ææ¡ä»¶ï¼Race Conditionsï¼ï¼ä¾å¦ API å¨æ°æ®åºåå¤å¥½ä¹åå°±å¼å§å°è¯è¿æ¥ï¼å¯¼è´å¯å¨å¤±è´¥ ã</li>
<li><strong>éç½®ç®¡ççæ··ä¹±</strong>ï¼ç«¯å£å²çªæ¯æ¥å¸¸å¼åä¸­çå¸¸æãå½åç«¯ç¡¬ç¼ç äº localhost:3000 èåç«¯å ç¨äºåä¸ç«¯å£ï¼æèå½å¤ä¸ªå¾®æå¡éè¦äºç¸éä¿¡æ¶ï¼å¼åèå¿é¡»æå¨ç»´æ¤ä¸å¼ å¤æçç«¯å£æ å°è¡¨ï¼å¹¶å°å¶åæ­¥å°åä¸ªé¡¹ç®ç .env æ appsettings.json æä»¶ä¸­ãä¸æ¦åºç¡è®¾æ½åçååï¼å¦ä»æ¬å° Redis åæ¢å°äºç«¯å®ä¾ï¼ï¼éç½®æä»¶çåæ­¥å¾å¾æ»åï¼å¼åâéç½®æ¼ç§»âã</li>
<li><strong>ä¾èµå³ç³»çéæ§å</strong>ï¼å¨ docker-compose.yml ä¸­ï¼æå¡é´çä¾èµå³ç³»éå¸¸éè¿ depends_on å®ä¹ï¼ä½è¿ä»æ§å¶å¯å¨é¡ºåºï¼æ æ³è¿è¡æ·±åº¦çå¥åº·æ£æ¥ï¼Health Checksï¼ãNode.js æå¡å¾å¾å¨ TCP ç«¯å£æå¼æ¶å°±è¢«è®¤ä¸ºâå¥åº·âï¼ä½å®éä¸æ°æ®åºè¿æ¥æ± å¯è½å°æªåå§åã</li>
</ul>
<p>.NET Aspire çæ ¸å¿çå¿µæ¯å°è¿ç§âç¼æé»è¾âä»éæç YAML éç½®æåä¸ºå¨æç C# ä»£ç ãéè¿ AppHost é¡¹ç®ï¼å¼åèå¯ä»¥ä»¥ç¼ç¨æ¹å¼å®ä¹âåç«¯ä¾èµäºåç«¯ï¼åç«¯ä¾èµäºæ°æ®åºâï¼å¹¶ç± Aspire å¼æèªå¨å¤çå¯å¨é¡ºåºãç«¯å£åéä¸è¿æ¥å­ç¬¦ä¸²æ³¨å¥ï¼ä»èå®ç°âä¸é® F5âå¯å¨æ´ä¸ªåå¸å¼ç¯å¢ã</p>
<h3 id="22-å¯è§æµæ§çæ°æ®å­¤å²"><strong>2.2 å¯è§æµæ§çæ°æ®å­¤å²</strong></h3>
<p>å¨å¤è¯­è¨ç¯å¢ä¸­ï¼è°è¯é®é¢å¾å¾æ¼åæä¸åºâä¾¦æ¢æ¸¸æâãå½ç¨æ·å¨ React åç«¯ç¹å»æé®ç±äºè¶æ¶æ¥éæ¶ï¼é®é¢å¯è½åºå¨ Node.js å±çäºä»¶å¾ªç¯é»å¡ï¼ä¹å¯è½æºäº.NET åç«¯çæ°æ®åºæ­»éãå¨ç¼ºä¹ç»ä¸å¯è§æµæ§å¹³å°çæåµä¸ï¼å¼åèåªè½åå«æ¥çæµè§å¨ç Console æ¥å¿ãNode.js çç»ç«¯è¾åºä»¥å.NET çè°è¯çªå£ãè¿äºæ¥å¿çæ¶é´æ³ä¸ç»ä¸ï¼ä¸ç¼ºä¹å³è IDï¼Trace IDï¼ï¼ä½¿å¾è·¨æå¡è¿½è¸ªå ä¹ä¸å¯è½ã</p>
<p>OpenTelemetryï¼OTELï¼è½ç¶æä¾äºè¡ä¸æ åï¼ä½å¨ä¸åè¯­è¨æ ä¸­çéç½®é¨æ§æé«ãJavaScript å¼åèéè¦æå¨å¼å¥æ°åä¸ª NPM åæ¥éç½® TracerãMeter å LoggerãAspire éè¿æä¾é¢éç½®ç Dashboard åæ ååç OTLPï¼OpenTelemetry Protocolï¼ç«¯ç¹ï¼æå¤§å°éä½äºè¿ä¸é¨æ§ï¼ä½¿å¾ JavaScript åºç¨çé¥æµæ°æ®è½å¤ä¸.NET æå¡çæ°æ®å¨åä¸è§å¾ä¸­å³èå±ç¤º ã</p>
<h3 id="23-å¼åä¸çäº§ç¯å¢çé¸¿æ²"><strong>2.3 å¼åä¸çäº§ç¯å¢çé¸¿æ²</strong></h3>
<p>æ¬å°å¼åç¯å¢å¾å¾éç¨ç´æ¥è¿æ¥ï¼Direct Connectionï¼æ¨¡å¼ï¼èçäº§ç¯å¢åä¾èµäº Kubernetes ç DNS æå¡åç°æ Azure çæç®¡æ è¯ãè¿ç§å·®å¼å¯¼è´ä»£ç ä¸­åæ¥çå¤§éç if (process.env.NODE_ENV === 'production') å¤æ­é»è¾ãAspire çæå¡åç°æºå¶æ¨å¨æ¹å¹³è¿ä¸å·®å¼ï¼å®å¨æ¬å°å¼åæ¶éè¿ç¯å¢åéæ¨¡æçäº§ç¯å¢çæå¡åç°è¡ä¸ºï¼ä½¿å¾ JavaScript ä»£ç å¨ä¸åç¯å¢ä¸­å¯ä»¥ä¿æä¸è´ 6ã</p>
<h2 id="3-æ¶ææ¼è¿ä»-nodejs-æä»¶å°-javascript-ä¸ç­å¬æ°"><strong>3. æ¶ææ¼è¿ï¼ä» Node.js æä»¶å° JavaScript ä¸ç­å¬æ°</strong></h2>
<p>.NET Aspire å¯¹ JavaScript çæçæ¯æå¹¶éä¸è¹´èå°±ï¼èæ¯ç»åäºä¸æ¬¡æ·±å»çæ¶æéæãçè§£è¿ä¸æ¼è¿è¿ç¨ï¼å¯¹äºä»æ©æé¢è§çè¿ç§»å° Aspire 13.0 æ­£å¼ççå¢éè³å³éè¦ã</p>
<h3 id="31-æ©æå°è¯addnodeapp-ä¸-addnpmapp-çå±éæ§"><strong>3.1 æ©æå°è¯ï¼AddNodeApp ä¸ AddNpmApp çå±éæ§</strong></h3>
<p>å¨ Aspire 13 ä¹åççæ¬ï¼å¦ Aspire 8 æ 9 é¢è§çï¼ä¸­ï¼JavaScript æ¯æä¸»è¦éè¿ Aspire.Hosting.NodeJs NuGet åæä¾ãè¯¥é¶æ®µçè®¾è®¡æè·¯ä¸»è¦å´ç» Node.js è¿è¡æ¶å±å¼ï¼æä¾äºä¸¤ä¸ªæ ¸å¿ APIï¼</p>
<ul>
<li><strong>AddNodeApp</strong>ï¼ç¨äºç´æ¥æ§è¡ç¹å®ç JavaScript æä»¶ï¼å¦ node server.jsï¼ãè¿ç§æ¹å¼éç¨äºç®åçèæ¬ä»»å¡ï¼ä½é¾ä»¥åºå¯¹ç°ä»£åç«¯å·¥ç¨å¤æçæå»ºæµç¨ 11ã</li>
<li><strong>AddNpmApp</strong>ï¼ç¨äºæ§è¡ package.json ä¸­å®ä¹çèæ¬ï¼å¦ npm run startï¼ãè¿å¨å½æ¶æ¯éæåç«¯åºç¨çä¸»è¦æ¹å¼ã</li>
</ul>
<p>ç¶èï¼éçç¤¾åºåé¦çç§¯ç´¯ï¼è¿ç§è®¾è®¡çå±éæ§éæ¸æ´é²ï¼</p>
<ol>
<li><strong>åç®¡çå¨çå¼ºç»å®</strong>ï¼API å½åæç¤ºäºå¯¹ NPMï¼Node Package Managerï¼çå¼ºå¶ä¾èµãç¶èï¼ç°ä»£ JavaScript çæä¸­ï¼Yarn å pnpm å å¶æ´å¿«çå®è£éåº¦åå¯¹ Monorepo çæ´å¥½æ¯æï¼å·²å æ®åå£æ±å±±ãAddNpmApp æ æ³åçæ¯æè¿äºå·¥å·ï¼å¼åèä¸å¾ä¸éè¿å¤æçåæ°ç»è¿éå¶ã</li>
<li><strong>åæ°ä¼ éçåµå</strong>ï¼å¨ AddNpmApp ä¸­ï¼å½ä»¤è¡åæ°éå¸¸ä½ä¸ºæé å½æ°çä¸é¨åä¼ éãè¿ä½¿å¾å¨è¿è¡æ¶å¨æè°æ´åæ°åå¾å°é¾ï¼ä¹ä¸ç¬¦åæµçæ¥å£ï¼Fluent Interfaceï¼çè®¾è®¡ç¾å­¦ ã</li>
<li><strong>æå»ºè¯­ä¹çç¼ºå¤±</strong>ï¼æ§ç API é¾ä»¥åºåâå¼åæ¨¡å¼âä¸âçäº§æå»ºâãä¾å¦ï¼Next.js åºç¨å¨å¯å¨åéè¦åæ§è¡æå»ºè¿ç¨çæ .next ç®å½ï¼æ§ç API ç»å¸¸å è·³è¿æå»ºæ­¥éª¤èå¯¼è´å¯å¨å¤±è´¥ ã</li>
</ol>
<h3 id="32-ç°ä»£èå¼aspire-13-ä¸-addjavascriptapp"><strong>3.2 ç°ä»£èå¼ï¼Aspire 13 ä¸ AddJavaScriptApp</strong></h3>
<p>Aspire 13.0 æ å¿ç JavaScript æ¯æçå¨é¢æçãå¾®è½¯å°åæ¥ç Aspire.Hosting.NodeJs åéæå¹¶éå½åä¸º Aspire.Hosting.JavaScriptï¼å¼å¥äºå¨æ°ç AddJavaScriptApp API ä½ä¸ºéç¨åºç¡ 11ãè¿ä¸åé©ä¸ä»ä»æ¯å½åçæ´æ¹ï¼æ´æ¯åºå±è®¾è®¡å²å­¦çè½¬åã</p>
<h4 id="321-æºè½åç®¡çå¨æ¢æµintelligent-package-manager-detection"><strong>3.2.1 æºè½åç®¡çå¨æ¢æµï¼Intelligent Package Manager Detectionï¼</strong></h4>
<p>æ°ç AddJavaScriptApp éç¨äºä¸ç§âçº¦å®ä¼äºéç½®âçç­ç¥ãå½ç¼æå¨å¯å¨æ¶ï¼å®ä¼èªå¨æ«æç®æ é¡¹ç®çç®å½ç»æï¼å¯»æ¾éæä»¶ï¼Lock Filesï¼ä»¥ç¡®å®åºä½¿ç¨çåç®¡çå¨ï¼</p>
<ul>
<li>è¥åç° yarn.lockï¼èªå¨ä½¿ç¨ Yarnã</li>
<li>è¥åç° pnpm-lock.yamlï¼èªå¨ä½¿ç¨ pnpmã</li>
<li>è¥åç° package-lock.jsonï¼åä½¿ç¨ npmã</li>
</ul>
<p>è¿ç§æºè½æ¢æµæºå¶æ¶é¤äºå¼åèå¨ C# ä»£ç ä¸­æ¾å¼æå®åç®¡çå¨çéæ±ï¼ä½¿å¾ AppHost ä»£ç æ´å ç®æ´ä¸ä¸å·ä½å®ç°è§£è¦ ã</p>
<h4 id="322-ç¡®å®æ§æå»ºä¸çå½å¨æç®¡ç"><strong>3.2.2 ç¡®å®æ§æå»ºä¸çå½å¨æç®¡ç</strong></h4>
<p>ä¸ºäºè§£å³âå¨ææºå¨ä¸è½è¿è¡âçé®é¢ï¼Aspire 13 å¼å¥äºç¡®å®æ§å®è£ï¼Deterministic Installï¼æºå¶ãå¨åå¸ï¼Publishï¼æ¨¡å¼ä¸ï¼Aspire ä¼èªå¨ä½¿ç¨ååç®¡çå¨çä¸¥æ ¼å®è£å½ä»¤ï¼å¦ npm ci, yarn install --frozen-lockfileï¼ï¼ç¡®ä¿ä¾èµçæ¬ä¸éæä»¶å®å¨ä¸è´ã</p>
<p>æ­¤å¤ï¼çå½å¨æç®¡çè¢«ç»åä¸ºæç¡®çé¶æ®µï¼</p>
<ul>
<li><strong>å¼åé¶æ®µï¼Developmentï¼</strong>ï¼é»è®¤æ§è¡ dev èæ¬ï¼æ¯æç­éè½½ï¼HMRï¼ã</li>
<li><strong>åå¸é¶æ®µï¼Publishingï¼</strong>ï¼é»è®¤æ§è¡ build èæ¬ï¼å¹¶èªå¨çæä¼åçå¤é¶æ®µ Dockerfile ã</li>
</ul>
<h4 id="323-api-å¯¹æ¯åæ"><strong>3.2.3 API å¯¹æ¯åæ</strong></h4>
<p>ä¸è¡¨æ»ç»äºä»æ§çå°æ°ç API çå³é®å·®å¼ï¼å±ç¤ºäºåè½éçæ©å±ä¸è§èåã</p>
<table>
<thead>
<tr>
<th style="text-align: left">ç¹æ§ç»´åº¦</th>
<th style="text-align: left">Legacy (AddNpmApp)</th>
<th style="text-align: left">Modern (AddJavaScriptApp)</th>
<th style="text-align: left">å¤æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left"><strong>NuGet åå</strong></td>
<td style="text-align: left">Aspire.Hosting.NodeJs</td>
<td style="text-align: left">Aspire.Hosting.JavaScript</td>
<td style="text-align: left">æ§åå·²åºå¼ä¸åç»´æ¤ 16</td>
</tr>
<tr>
<td style="text-align: left"><strong>åç®¡çå¨æ¯æ</strong></td>
<td style="text-align: left">ä»é NPM (é»è®¤)</td>
<td style="text-align: left">èªå¨æ¢æµ (NPM, Yarn, pnpm)</td>
<td style="text-align: left">äº¦å¯éè¿ .WithYarn() å¼ºå¶æå® 13</td>
</tr>
<tr>
<td style="text-align: left"><strong>åæ°ä¼ éæ¹å¼</strong></td>
<td style="text-align: left">æé å½æ°åæ° args</td>
<td style="text-align: left">æ©å±æ¹æ³ .WithArgs()</td>
<td style="text-align: left">å®ç°äºå³æ³¨ç¹åç¦» 1</td>
</tr>
<tr>
<td style="text-align: left"><strong>æå»ºç­ç¥</strong></td>
<td style="text-align: left">åºç¡å®¹å¨å</td>
<td style="text-align: left">æºè½å¤é¶æ®µ Dockerfile çæ</td>
<td style="text-align: left">åºäº .nvmrc æ£æµ Node çæ¬ 15</td>
</tr>
<tr>
<td style="text-align: left"><strong>Vite éæ</strong></td>
<td style="text-align: left">éç¤¾åºå·¥å·åæ¯æ</td>
<td style="text-align: left">åçåç½® (AddViteApp)</td>
<td style="text-align: left">åå«ç«¯å£èªå¨ååä¸ HMR ä¼å 13</td>
</tr>
<tr>
<td style="text-align: left"><strong>èæ¬èªå®ä¹</strong></td>
<td style="text-align: left">è¾ä¸ºåé</td>
<td style="text-align: left">.WithRunScript() / .WithBuildScript()</td>
<td style="text-align: left">çµæ´»ééä¸åç¯å¢éæ± 17</td>
</tr>
</tbody>
</table>
<h2 id="4-ç¼ææ ¸å¿apphost-ä¸­ç-javascript-éæå®æ"><strong>4. ç¼ææ ¸å¿ï¼AppHost ä¸­ç JavaScript éæå®æ</strong></h2>
<p>å¨.NET Aspire æ¶æä¸­ï¼AppHost é¡¹ç®æ®æ¼çâååºç¨ï¼Meta-Applicationï¼âçè§è²ãå®ä¸åå«ä¸å¡é»è¾ï¼èæ¯ç¨ C# ä»£ç æè¿°æ´ä¸ªåå¸å¼ç³»ç»çææç»æãå¯¹äº JavaScript å¼åèèè¨ï¼è¿æå³çå¯ä»¥ç¨ä¸ç§å¼ºç±»åçãç¼è¯æ¶æ£æ¥çæ¹å¼æ¥æ¿ä»£èå¼±ç YAML éç½®ã</p>
<h3 id="41-åºç¡èµæºæ³¨å"><strong>4.1 åºç¡èµæºæ³¨å</strong></h3>
<p>éæä¸ä¸ªç°æç JavaScript åºç¨ï¼ä¾å¦ä¸ä¸ª React åç«¯æ Express åç«¯ï¼çç¬¬ä¸æ­¥æ¯å¨ AppHost ç Program.cs ä¸­æ³¨åè¯¥èµæºã</p>
<p>C#</p>
<p>var builder = DistributedApplication.CreateBuilder(args);</p>
<p>// æ³¨åä¸ä¸ªåºäº Node.js çåç«¯é¡¹ç®<br>
// "frontend" æ¯èµæºåç§°ï¼å°å¨æå¡åç°ä¸­ä½ä¸ºä¸»æºåä½¿ç¨<br>
// "../my-react-app" æ¯åå« package.json çç¸å¯¹è·¯å¾<br>
var frontend = builder.AddJavaScriptApp("frontend", "../my-react-app")<br>
.WithHttpEndpoint(port: 3000, targetPort: 3000, name: "http") // éç½®åé¨ä¸å¤é¨ç«¯å£æ å°<br>
.WithExternalHttpEndpoints(); // åè®¸ä»å®¿ä¸»æºæµè§å¨è®¿é®</p>
<p>å¨è¿æ®µä»£ç ä¸­ï¼</p>
<ul>
<li><strong>èµæºæ è¯</strong>ï¼"frontend" å­ç¬¦ä¸²ä¸ä»ä»æ¯ä¸ä¸ªæ ç­¾ï¼å®å¨ Aspire çåé¨ DNS ææå¡åç°æºå¶ä¸­æ³¨åäºä¸ä¸ªæ¡ç®ãå¶ä»æå¡å¯ä»¥éè¿è¿ä¸ªåç§°æ¾å°è¯¥åºç¨ã</li>
<li><strong>ç½ç»éç½®</strong>ï¼WithHttpEndpoint å®ä¹äºå®¹å¨æè¿ç¨çå¬çç«¯å£ãtargetPort æ¯ Node.js è¿ç¨å®éçå¬çç«¯å£ï¼è port æ¯å®¿ä¸»æºæ å°çç«¯å£ãAspire ä¼èªå¨å¤ç Docker çç«¯å£è½¬åè§åã</li>
</ul>
<h3 id="42-ä¾èµæ³¨å¥ä¸è¿æ¥ç¼æ"><strong>4.2 ä¾èµæ³¨å¥ä¸è¿æ¥ç¼æ</strong></h3>
<p>Aspire æå¼ºå¤§çåè½ä¹ä¸æ¯éå¼è¿æ¥ç®¡çãéè¿ .WithReference() æ¹æ³ï¼å¯ä»¥å°ä¸ä¸ªèµæºçè¿æ¥ä¿¡æ¯æ³¨å¥å°å¦ä¸ä¸ªèµæºçè¿è¡ç¯å¢ä¸­ãè¿ç§æºå¶å¯¹äº Node.js åºç¨åæ ·ææã</p>
<p>åè®¾æä»¬æä¸ä¸ª Redis ç¼å­æå¡åä¸ä¸ª PostgreSQL æ°æ®åºï¼Node.js API éè¦è¿æ¥å®ä»¬ï¼</p>
<p>C#</p>
<p>// å®ä¹åºç¡è®¾æ½èµæº<br>
var redis = builder.AddRedis("cache");<br>
var postgres = builder.AddPostgres("db").AddDatabase("maindb");</p>
<p>// å®ä¹ Node.js åç«¯æå¡<br>
var nodeApi = builder.AddJavaScriptApp("node-api", "../backend")<br>
.WithReference(redis)      // æ³¨å¥ Redis è¿æ¥ä¸²<br>
.WithReference(postgres);  // æ³¨å¥ Postgres è¿æ¥ä¸²</p>
<p>å½ nodeApi å¯å¨æ¶ï¼Aspire ä¼è®¡ç®åº redis å postgres çè¿æ¥å­ç¬¦ä¸²ï¼å¹¶å°å¶ä½ä¸ºç¯å¢åéæ³¨å¥å° nodeApi çè¿ç¨ä¸­ã</p>
<ul>
<li>å¯¹äº Redisï¼Node.js è¿ç¨ä¼æ¶å°åä¸º ConnectionStrings__cache çç¯å¢åéã</li>
<li>å¯¹äº Postgresï¼ä¼æ¶å° ConnectionStrings__maindbã</li>
</ul>
<p>è¿ç§æºå¶å®å¨è§£è¦äºä»£ç ä¸éç½®ãNode.js ä»£ç æ éç¥éæ°æ®åºæ¯å¨æ¬å°å®¹å¨ä¸­è¿è¡ï¼è¿æ¯å¨ Azure çæç®¡æå¡ä¸­è¿è¡ï¼å®åªéè¦è¯»åæ åçç¯å¢åéå³å¯ ã</p>
<h3 id="43-èæ¬åæ°ä¸èªå®ä¹å¯å¨é»è¾"><strong>4.3 èæ¬åæ°ä¸èªå®ä¹å¯å¨é»è¾</strong></h3>
<p>å®éçä¼ä¸çº§åºç¨å¾å¾éè¦å¤æçå¯å¨åæ°ãAspire 13 åºå¼äºæé å½æ°ä¼ åï¼è½¬èä½¿ç¨æ´æ¸æ°çæµå¼ APIã</p>
<p><strong>åºæ¯</strong>ï¼ä½ éè¦ä»¥è°è¯æ¨¡å¼å¯å¨åç«¯ï¼å¹¶ä¼ éç¹å®çæ å¿ä½ã</p>
<p>C#</p>
<p>var backend = builder.AddJavaScriptApp("backend", "../express-app")<br>
.WithRunScript("start:debug") // æå®è¿è¡ package.json ä¸­ç "start:debug" èæ¬<br>
.WithArgs("--verbose", "--region", "us-east"); // ä¼ éé¢å¤çå½ä»¤è¡åæ°</p>
<p>æ­¤å¤ï¼Aspire é¼å±å°å¤æçåæ°é»è¾å°è£å¨ package.json ç scripts èç¹ä¸­ï¼ä¿æ AppHost çç®æ´æ§ãä¾å¦ï¼å¨ package.json ä¸­å®ä¹ "dev:custom": "vite --port 3000 --host"ï¼ç¶åå¨ Aspire ä¸­è°ç¨ .WithRunScript("dev:custom") 1ãè¿ç§åæ³å°å´äº JavaScript çæçä¹ æ¯ï¼é¿åäºå¨ C# ä»£ç ä¸­ç¡¬ç¼ç è¿å¤ç Shell å½ä»¤é»è¾ã</p>
<h2 id="5-æå¡åç°ä¸ç¯å¢éç½®æ åå"><strong>5. æå¡åç°ä¸ç¯å¢éç½®æ åå</strong></h2>
<p>å¨å¾®æå¡æ¶æä¸­ï¼æå¡åç°ï¼Service Discoveryï¼æ¯æ ¸å¿é¾é¢ãå½.NET åç«¯æå¡çç«¯å£ç± Aspire å¨æåéæ¶ï¼Node.js åç«¯å¦ä½ç¥éè¯¥ååªéåéè¯·æ±ï¼Aspire æä¾äºä¸å¥åºäºç¯å¢åéçæ ååè®®ã</p>
<h3 id="51-services__-å½åçº¦å®"><strong>5.1 services__ å½åçº¦å®</strong></h3>
<p>å½ JavaScript èµæºéè¿ .WithReference(apiProject) å¼ç¨äºä¸ä¸ª.NET é¡¹ç®æ¶ï¼Aspire ä¼çæéµå¾ªç¹å®å½åè§èçç¯å¢åéãå¨ Aspire 13 ä¸­ï¼ä¸ºäºæ´å¥½å°æ¯æå¤è¯­è¨ç¯å¢ï¼è¿å¥è§èè¿è¡äºä¼åã</p>
<p>åè®¾ AppHost éç½®å¦ä¸ï¼</p>
<p>C#</p>
<p>var api = builder.AddProject&lt;Projects.MyApi&gt;("api-service");<br>
var frontend = builder.AddJavaScriptApp("frontend", "../web").WithReference(api);</p>
<p>Node.js åç«¯å¯ä»¥éè¿ä»¥ä¸æ¹å¼è·å API ç URLï¼</p>
<ol>
<li><strong>æ ååé®å</strong>ï¼ç¯å¢åééå¸¸æ ¼å¼ä¸º services__{resourceName}__{endpointName}__{index}ã
<ul>
<li>ä¾å¦ï¼services__api-service__https__0 å¯è½å¯¹åº <a href="https://localhost:7234" target="_blank" rel="noopener nofollow">https://localhost:7234</a>ã</li>
<li>Aspire 13 å¼å¥äºæ´ç®åçå«åæºå¶ï¼ä½¿å¾ç´æ¥è¯»å process.env['services__api-service__https__0'] æä¸ºå¯è½ 19ã</li>
</ul>
</li>
<li>ä»£ç å®ç°ç¤ºä¾ï¼<br>
å¨ Node.js ä»£ç ä¸­ï¼ä¾å¦ Next.js ç API Route æ Express æå¡ï¼ï¼<br>
JavaScript<br>
const apiUrl = process.env['services__api-service__https__0'];<br>
const response = await fetch(`${apiUrl}/weatherforecast`);</li>
</ol>
<p>è¿ç§æºå¶ç¡®ä¿äºæ è®ºæ¯æ¬å°è°è¯ï¼Localhost ç«¯å£ï¼è¿æ¯çäº§é¨ç½²ï¼Kubernetes Service åç§°ï¼ï¼ä»£ç é»è¾ä¿æä¸åãå¨ Kubernetes ä¸­ï¼Aspire çé¨ç½²å·¥å·ä¼å°è¯¥ç¯å¢åéçå¼è®¾ç½®ä¸ºéç¾¤åç DNS åç§°ï¼å¦ <a href="http://api-service.default.svc.cluster.local" target="_blank" rel="noopener nofollow">http://api-service.default.svc.cluster.local</a>ï¼6ã</p>
<h3 id="52-è¿æ¥å­ç¬¦ä¸²çå¤ææ§"><strong>5.2 è¿æ¥å­ç¬¦ä¸²çå¤ææ§</strong></h3>
<p>æ°æ®åºè¿æ¥å­ç¬¦ä¸²å¨ä¸åè¯­è¨ä¸­æä¸åçæ ¼å¼åå¥½ã</p>
<ul>
<li><strong>.NET</strong> ä¹ æ¯ä½¿ç¨åå·åéçé®å¼å¯¹ï¼Server=myServer;Database=myDB;User Id=myUser;Password=myPassword;ã</li>
<li><strong>Node.js/Python</strong> éå¸¸åå¥½ URI æ ¼å¼ï¼postgres://myUser:myPassword@myServer/myDBã</li>
</ul>
<p>Aspire 13 å¼å¥äºè¿æ¥å±æ§çæ ååæ´é²æºå¶ãèµæºç°å¨ä¼æ´é² HostName, Port, UserName ç­ç¬ç«å±æ§ï¼ä»¥åéå¯¹ç¹å®è¯­è¨ä¼åçè¿æ¥å­ç¬¦ä¸²æ ¼å¼ï¼å¦ JdbcConnectionString ä¾ Java ä½¿ç¨ï¼ãå¯¹äº Node.jsï¼Aspire ä¼å°è¯æå»ºç¬¦åå¸¸è§é©±å¨ï¼å¦ pg, mongooseï¼é¢æçè¿æ¥å­ç¬¦ä¸²ï¼æèå¼åèå¯ä»¥éè¿ç»åç¬ç«çç¯å¢åéæ¥æå»ºæéçæ ¼å¼ ãè¿ä¸æ¹è¿æå¤§å°åå°äºå¨ JavaScript ä»£ç ä¸­ç¼åæ­£åè¡¨è¾¾å¼æ¥è§£æ.NET é£æ ¼è¿æ¥å­ç¬¦ä¸²ççè¦ã</p>
<h2 id="6-åç«¯æ¡æ¶æ·±åº¦éæreact-vue-angular-ä¸-vite"><strong>6. åç«¯æ¡æ¶æ·±åº¦éæï¼React, Vue, Angular ä¸ Vite</strong></h2>
<p>ç°ä»£åç«¯å¼åé«åº¦ä¾èµäºæå»ºå·¥å·é¾ãAspire ä¸ä»ä»æ¯å°åç«¯è§ä¸ºä¸ä¸ªéææä»¶æå¡å¨ï¼èæ¯æ·±åº¦ä»å¥å¶æå»ºä¸è°è¯è¿ç¨ï¼ç¹å«æ¯éå¯¹ Vite è¿ä¸è¡ä¸æ åå·¥å·çä¼åã</p>
<h3 id="61-addviteappè§£å³-hmr-é¾é¢"><strong>6.1 AddViteAppï¼è§£å³ HMR é¾é¢</strong></h3>
<p>Vite çç­æ¨¡åæ¿æ¢ï¼HMRï¼ä¾èµäº WebSocket è¿æ¥ãå¨å®¹å¨åæç¼æç¯å¢ä¸­ï¼å¦æç«¯å£æ å°ä¸æ­£ç¡®ï¼HMR å¾å¾ä¼å¤±æï¼å¯¼è´å¼åèæ¯æ¬¡ä¿®æ¹ä»£ç åé½éè¦æå¨å·æ°æµè§å¨ã</p>
<p>Aspire 13 å° AddViteApp æåä¸ºæ ¸å¿åè½ãå®ä¸ä»ä»æ¯ AddJavaScriptApp çå«åï¼è¿åå«ç¹å®çé»è¾æ¥éç½® Vite çå¼åæå¡å¨ï¼</p>
<ol>
<li><strong>ç«¯å£èªå¨åå</strong>ï¼ç¡®ä¿ Aspire åéçå¤é¨ç«¯å£ä¸ Vite éç½®ççå¬ç«¯å£ä¸è´ã</li>
<li><strong>ä»£çéç½®</strong>ï¼å®è½èªå¨å¤ç API è¯·æ±çè½¬åï¼è§£å³è·¨åï¼CORSï¼é®é¢ã</li>
</ol>
<p>C#</p>
<p>// ä¸é¨éå¯¹ Vite é¡¹ç®çä¼åéæ<br>
builder.AddViteApp("web-frontend", "../react-project")<br>
.WithReference(apiService) // åè®¸åç«¯å¼ç¨åç«¯ API<br>
.WithHttpEndpoint(port: 5173); // éå® Vite é»è®¤ç«¯å£</p>
<h3 id="62-åæ¡æ¶éæç»å"><strong>6.2 åæ¡æ¶éæç»å</strong></h3>
<p>è½ç¶ AddJavaScriptApp æ¯éç¨çï¼ä½å¨éæä¸åæ¡æ¶æ¶ä»éæ³¨æç¹å®ç»èï¼</p>
<ul>
<li>React &amp; Vue (åºäº Vite)ï¼<br>
æ¨èä½¿ç¨ AddViteAppãå¨ä»£ç ä¸­è®¿é®åç«¯ API å°åæ¶ï¼éå¸¸éè¦å¨ vite.config.js ä¸­éç½® proxyï¼æèå¨ React ç»ä»¶ä¸­éè¿ import.meta.env è¯»åç± Aspire æ³¨å¥çç¯å¢åéï¼æ³¨æï¼Vite é»è®¤åªæ´é²ä»¥ VITE_ å¼å¤´çåéï¼å æ­¤å¯è½éè¦å¨å¯å¨èæ¬ä¸­åä¸å±è½¬æ¥ï¼å° services__api è½¬ä¸º VITE_API_URLï¼ã</li>
<li>Angularï¼<br>
Angular CLI ä¾ç¶ä½¿ç¨ Webpack æ esbuildãéå¸¸ä½¿ç¨ AddJavaScriptApp å¹¶æå® npm startãAngular ç proxy.conf.json å¯ä»¥éç½®ä¸ºè¯»åç¯å¢åéï¼ä»èå° /api è¯·æ±è½¬åå° Aspire ç®¡ççåç«¯æå¡ ã</li>
<li>Next.js / Nuxt (æå¡ç«¯æ¸²æ SSR)ï¼<br>
SSR æ¡æ¶å·æåéæ§ï¼æ¢æè¿è¡å¨æµè§å¨ç«¯çä»£ç ï¼ä¹æè¿è¡å¨ Node.js æå¡ç«¯çä»£ç ã
<ul>
<li><strong>æå¡ç«¯ï¼API Routes/Server Actionsï¼</strong>ï¼å¯ä»¥ç´æ¥è¯»å process.env.services__... ä¸åç«¯å¾®æå¡ææ°æ®åºéä¿¡ãè¿æ¯ Aspire éæä¸­æå¼ºå¤§çåºæ¯ï¼å ä¸º Next.js åç«¯å®å¨èå¥äºåç½æå¡ç½æ ¼ã</li>
<li><strong>å®¢æ·ç«¯</strong>ï¼ä¾ç¶éè¦éè¿ç¯å¢åéæ´é²å¬å± URLã</li>
<li><em>æ³¨æ</em>ï¼Next.js æå»ºæ¶éè¦ .next ç®å½ãä½¿ç¨æ§ç AddNpmApp æ¶å¸¸å ç¼ºå°æå»ºæ­¥éª¤åºéï¼æ°ç AddJavaScriptApp å¨åå¸æ¨¡å¼ä¸ä¼èªå¨æ§è¡ npm run buildï¼å®ç¾è§£å³äºæ­¤é®é¢ ã</li>
</ul>
</li>
</ul>
<h2 id="7-å¨æ å¯è§æµæ§opentelemetry-æ¶æè§£æ"><strong>7. å¨æ å¯è§æµæ§ï¼OpenTelemetry æ¶æè§£æ</strong></h2>
<p>Aspire çææçº§åè½å¨äºå¶ç»ä¸ç Dashboardãå¯¹äº JavaScript å¼åèï¼è¿æå³çæ éæ­å»º JaegerãPrometheus æ Grafanaï¼å³å¯å¨æ¬å°è·å¾ä¼ä¸çº§çå¯è§æµæ§ä½éªã</p>
<h3 id="71-æ°æ®ééé¾è·¯"><strong>7.1 æ°æ®ééé¾è·¯</strong></h3>
<p>Aspire Dashboard éç¨ OTLPï¼OpenTelemetry Protocolï¼æ¥æ¶æ°æ®ãä¸.NET åºç¨éè¿ AddServiceDefaults() èªå¨æ³¨å¥é¥æµä¸åï¼Node.js åºç¨éè¦æ¾å¼éç½® OpenTelemetry SDKã</p>
<p>æ°æ®æµåå¦ä¸ï¼</p>
<ol>
<li><strong>Node.js åºç¨</strong>ï¼éæ OTEL SDKï¼éé Tracesï¼è¿½è¸ªï¼ãMetricsï¼ææ ï¼å Logsï¼æ¥å¿ï¼ã</li>
<li><strong>OTLP Exporter</strong>ï¼éè¿ gRPC åè®®å°æ°æ®åéåºå»ã</li>
<li><strong>Aspire ä»£ç/Dashboard</strong>ï¼æ¥æ¶æ°æ®å¹¶å¯è§åã</li>
</ol>
<h3 id="72-nodejs-ç«¯éç½®å®æ"><strong>7.2 Node.js ç«¯éç½®å®æ</strong></h3>
<p>è¦å¨ Node.js ä¸­æ¥å¥ Aspireï¼å³é®å¨äºéç½® OTLP Exporter æå Aspire æä¾çç«¯ç¹ãAspire ä¼èªå¨æ³¨å¥ç¯å¢åé OTEL_EXPORTER_OTLP_ENDPOINTï¼éå¸¸ä¸º <a href="http://localhost:4317" target="_blank" rel="noopener nofollow">http://localhost:4317</a>ï¼ã</p>
<p><strong>å¿éç NPM ä¾èµ</strong>ï¼</p>
<p>Bash</p>
<p>npm install @opentelemetry/sdk-node \<br>
@opentelemetry/auto-instrumentations-node \<br>
@opentelemetry/exporter-trace-otlp-grpc \<br>
@opentelemetry/exporter-metrics-otlp-grpc \<br>
@opentelemetry/exporter-logs-otlp-grpc</p>
<p><strong>åå§åä»£ç ï¼instrumentation.jsï¼</strong> 22ï¼</p>
<p>JavaScript</p>
<details>
<summary>ç¹å»æ¥çä»£ç </summary>
<pre><code>
const { NodeSDK } \= require('@opentelemetry/sdk-node');  
const { OTLPTraceExporter } \= require('@opentelemetry/exporter-trace-otlp-grpc');  
const { OTLPMetricExporter } \= require('@opentelemetry/exporter-metrics-otlp-grpc');  
const { OTLPLogExporter } \= require('@opentelemetry/exporter-logs-otlp-grpc');  
const { getNodeAutoInstrumentations } \= require('@opentelemetry/auto-instrumentations-node');

const sdk \= new NodeSDK({  
  serviceName: 'node-service', // æå¡åç§°ï¼å°å¨ Dashboard ä¸­æ¾ç¤º  
  traceExporter: new OTLPTraceExporter(), // èªå¨è¯»å OTEL\_EXPORTER\_OTLP\_ENDPOINT  
  metricExporter: new OTLPMetricExporter(),  
  logExporter: new OTLPLogExporter(),  
  instrumentations: \[getNodeAutoInstrumentations()\], // èªå¨éé HTTP, Express, PG ç­åºçæ°æ®  
});

sdk.start();
</code></pre>
</details>
<p>éè¿è¿æ®µä»£ç ï¼Node.js åºç¨ååºçæ¯ä¸ä¸ª HTTP è¯·æ±ãæ°æ®åºæ¥è¯¢é½ä¼çæ Trace Spanï¼å¹¶èªå¨åéå° Dashboardãå¼åèå¯ä»¥å¨ Dashboard ä¸­çå°ä¸ä¸ªè¯·æ±ä» React åç«¯ååºï¼ç»è¿ Node.js ä¸­é´å±ï¼æç»å°è¾¾.NET åç«¯çå®æ´çå¸å¾ï¼Waterfall Viewï¼24ã</p>
<h3 id="73-ç¬ç«æ¨¡å¼standalone-dashboard"><strong>7.3 ç¬ç«æ¨¡å¼ï¼Standalone Dashboardï¼</strong></h3>
<p>å¯¹äºçº¯ JavaScript å¢éï¼å³ä¾¿ä¸ä½¿ç¨.NET ç¼æåè½ï¼ä¹å¯ä»¥å©ç¨ Aspire DashboardãAspire Dashboard å¯ä»¥ä½ä¸ºç¬ç«ç Docker å®¹å¨è¿è¡ï¼è¿å¯¹äºä»éè¦çæ§å·¥å·ç Node.js å¼åèæå·å¸å¼åã</p>
<p><strong>è¿è¡å½ä»¤</strong> 4ï¼</p>
<p>Bash</p>
<p>docker run --rm -it -d \<br>
-p 18888:18888 \<br>
-p 4317:18889 \<br>
--name aspire-dashboard \<br>
mcr.microsoft.com/dotnet/aspire-dashboard:latest</p>
<p>å¨æ­¤æ¨¡å¼ä¸ï¼JavaScript å¼åèåªéå°æ¬å°ç¯å¢åé OTEL_EXPORTER_OTLP_ENDPOINT è®¾ç½®ä¸º <a href="http://localhost:4317" target="_blank" rel="noopener nofollow">http://localhost:4317</a>ï¼å³å¯å©ç¨è¿ä¸ªåè´¹ãè½»éä¸åè½å¼ºå¤§çå¯è§åå·¥å·ï¼æ éé¨ç½²å¤æç ELK æ Prometheus æ  ã</p>
<h2 id="8-çäº§é¨ç½²ä¸äºåçå¯¹æ¥"><strong>8. çäº§é¨ç½²ä¸äºåçå¯¹æ¥</strong></h2>
<p>âåå¾ªç¯âçä¼åæç»æ¯ä¸ºäºæå¡äºâå¤å¾ªç¯âçé¨ç½²ãAspire çè®¾è®¡ç®æ æ¯å®ç°ä»æ¬å°å¼åå°äºç«¯é¨ç½²çå¹³æ»è¿æ¸¡ã</p>
<h3 id="81-èªå¨å-dockerfile-çæ"><strong>8.1 èªå¨å Dockerfile çæ</strong></h3>
<p>å¨å° JavaScript åºç¨é¨ç½²å° Kubernetes æ Azure Container Apps æ¶ï¼ç¼å Dockerfile æ¯ä¸é¡¹ç¹çä¸å®¹æåºéçå·¥ä½ï¼ä¾å¦å¿è®°å¤å¶éæä»¶å¯¼è´çæ¬ä¸ä¸è´ï¼ææªè¿è¡å¤é¶æ®µæå»ºå¯¼è´éåè¿å¤§ï¼ã</p>
<p>Aspire 13 å¨æ§è¡åå¸å½ä»¤ï¼dotnet publishï¼æ¶ï¼ä¼åæ JavaScript é¡¹ç®ï¼</p>
<ul>
<li>è¯»å .nvmrc æ package.json ä¸­ç engines å­æ®µç¡®å® Node.js çæ¬ã</li>
<li>èªå¨çæå¤é¶æ®µï¼Multi-stageï¼Dockerfileï¼
<ol>
<li><strong>æå»ºé¶æ®µ</strong>ï¼å®è£å¨é¨ä¾èµï¼è¿è¡ npm run buildã</li>
<li><strong>è¿è¡é¶æ®µ</strong>ï¼ä»å¤å¶æå»ºäº§ç©ï¼å¦ dist æ .nextï¼åçäº§ä¾èµï¼node_modulesï¼ï¼éè¿ node å½ä»¤å¯å¨ ã</li>
</ol>
</li>
</ul>
<p>è¿ç§èªå¨åæºå¶ç¡®ä¿äºçäº§éåéµå¾ªæä½³å®è·µï¼åæ¶æå¤§å°éä½äºåç«¯å¼åèå¯¹å®¹å¨ææ¯çè®¤ç¥é¨æ§ã</p>
<h3 id="82-azure-developer-cli-azd-éæ"><strong>8.2 Azure Developer CLI (azd) éæ</strong></h3>
<p>å¾®è½¯æä¾ç azd å·¥å·æ·±åº¦éæäº Aspire æ¨¡åãå½å¼åèæ§è¡ azd up æ¶ï¼</p>
<ol>
<li><strong>èµæºæ å°</strong>ï¼Aspire æ¨¡åä¸­ç AddRedis ä¼è¢«æ å°ä¸º Azure Redis Cache å®ä¾ï¼AddJavaScriptApp æ å°ä¸º Azure Container Apps æå¡ã</li>
<li><strong>éç½®æ³¨å¥</strong>ï¼æ¬å°å¼åæ¶çç¯å¢åéæ³¨å¥é»è¾å¨äºç«¯ä¾ç¶ææãazd ä¼èªå¨å°äºç«¯æ°æ®åºçè¿æ¥å­ç¬¦ä¸²éç½®å°å®¹å¨åºç¨ç Secret ä¸­ï¼å¹¶ä½ä¸ºç¯å¢åéæ³¨å¥ã</li>
<li><strong>æå¡åç°</strong>ï¼å¨ Azure Container Apps ç¯å¢ä¸­ï¼æå¡é´éè¿åé¨ DNS éä¿¡ï¼Aspire ç¡®ä¿æ³¨å¥ç services__ åéæåæ­£ç¡®çäºç«¯ DNS åç§° 6ã</li>
</ol>
<p>è¿æå³çï¼å¼åèå¨æ¬å°ç¼åç process.env ä»£ç ï¼æ éä»»ä½ä¿®æ¹å³å¯å¨ Azure äºç«¯æ­£å¸¸å·¥ä½ã</p>
<h2 id="9-ç»è®ºä¸å±æ"><strong>9. ç»è®ºä¸å±æ</strong></h2>
<p>.NET Aspire 13.0 çåå¸æ å¿çå¾®è½¯å¼åå·¥å·é¾çä¸æ¬¡éè¦æç¥è½¬åãéè¿å° JavaScript æåä¸ºä¸ç­å¬æ°ï¼Aspire æ¿è®¤å¹¶æ¥æ±äºå¤è¯­è¨å¼åçç°å®ã</p>
<p>å¯¹äº <strong>JavaScript å¼åè</strong>èè¨ï¼Aspire æä¾äºï¼</p>
<ul>
<li><strong>ç»æå</strong>ï¼ç¨ç±»åå®å¨çä»£ç æ¿ä»£æ··ä¹±çèæ¬ï¼ç®¡çå¤æçå¾®æå¡ä¾èµã</li>
<li><strong>éæå</strong>ï¼éè¿ OpenTelemetry å Dashboardï¼è®©é»çè¬çè·¨æå¡è°ç¨åå¾æ¸æ°å¯è§ã</li>
<li><strong>ä¸è´æ§</strong>ï¼ç»ä¸äºæ¬å°ä¸çäº§ç¯å¢çæå¡åç°ä¸éç½®æ¨¡å¼ï¼æ¶é¤äºç¯å¢å·®å¼å¸¦æ¥ç Bugã</li>
</ul>
<p>å°½ç®¡å¼å¥ C# ç¼åç AppHost å¯¹çº¯ JS å¢éå¯è½å­å¨ä¸å®çå­¦ä¹ æ²çº¿ï¼ä½å¶å¸¦æ¥çæ¶ææ²»çæ¶çââç¹å«æ¯å¨æ¶åæ°æ®åºãç¼å­ãæ¶æ¯éåç­å¤æä¾èµçåºæ¯ä¸ââæ¯å·¨å¤§çãAspire ä¸ä»ä»æ¯ä¸ä¸ªå·¥å·ï¼å®ä¸ºæå»ºå¯ç»´æ¤ãå¯è§æµãæäºé¨ç½²çäºåçåºç¨æä¾äºä¸å¥æ ååçåèæ¶æã</p>
<p>éçç¤¾åºå·¥å·åï¼Community Toolkitï¼å¯¹ DenoãBun ç­æ°å´è¿è¡æ¶çæ¯æä¸æ­æ©å± ï¼ä»¥åå¯¹ Python ç­æ°æ®ç§å­¦è¯­è¨æ¯æçæ·±åï¼.NET Aspire æ­£éæ­¥æ¼åä¸ºä¸ä¸ªéç¨çå¤è¯­è¨äºåçåºç¨ä¸­æ¢ï¼ä¸ºä¸åææ¯èæ¯çå¼åèæ­å»ºèµ·åä½çæ¡¥æ¢ã</p>
<h4 id="å¼ç¨çæç« "><strong>å¼ç¨çæç« </strong></h4>
<ol>
<li>What's new in Aspire 13, <a href="https://aspire.dev/whats-new/aspire-13/" target="_blank" rel="noopener nofollow">https://aspire.dev/whats-new/aspire-13/</a></li>
<li>.NET Aspire 5: Orchestration and Service Discovery <a href="https://www.daveabrock.com/2025/09/16/net-aspire-5-orchestration-and-service-discovery/" target="_blank" rel="noopener nofollow">https://www.daveabrock.com/2025/09/16/net-aspire-5-orchestration-and-service-discovery/</a></li>
<li>Building a Full-Stack App with React and Aspire: A Step-by-Step ..., <a href="https://devblogs.microsoft.com/dotnet/new-aspire-app-with-react/" target="_blank" rel="noopener nofollow">https://devblogs.microsoft.com/dotnet/new-aspire-app-with-react/</a></li>
<li>Standalone Aspire dashboard | Aspire <a href="https://learn.microsoft.com/en-us/dotnet/aspire/fundamentals/dashboard/standalone" target="_blank" rel="noopener nofollow">https://learn.microsoft.com/en-us/dotnet/aspire/fundamentals/dashboard/standalone</a></li>
<li>Build Better Apps with .NET Aspire - Complete Beginner's Guide &amp; Tutorial <a href="https://www.youtube.com/watch?v=e36NEWqO7GQ" target="_blank" rel="noopener nofollow">https://www.youtube.com/watch?v=e36NEWqO7GQ</a></li>
<li>Deploy an Aspire project to Azure Container Apps using `azd` (in-depth guide),<a href="https://learn.microsoft.com/en-us/dotnet/aspire/deployment/azd/aca-deployment-azd-in-depth" target="_blank" rel="noopener nofollow">https://learn.microsoft.com/en-us/dotnet/aspire/deployment/azd/aca-deployment-azd-in-depth</a></li>
<li>Aspire: The Cloud-Native Framework That Finally Makes Distributed .NET Development Easy <a href="https://dev.to/mashrulhaque/its-4-pm-and-your-microservices-still-wont-start-a-guide-to-net-aspire-4h7b" target="_blank" rel="noopener nofollow">https://dev.to/mashrulhaque/its-4-pm-and-your-microservices-still-wont-start-a-guide-to-net-aspire-4h7b</a></li>
<li>Simplifying Distributed Systems: Jason Taylor Shows How .NET Aspire Makes the Complex Feel Effortless <a href="https://blog.jetbrains.com/dotnet/2025/10/29/simplifying-distributed-systems-dotnet-aspire-jason-taylor/" target="_blank" rel="noopener nofollow">https://blog.jetbrains.com/dotnet/2025/10/29/simplifying-distributed-systems-dotnet-aspire-jason-taylor/</a></li>
<li>Client Side JavaScript OpenTelemetry Integration with .NET Aspire <a href="https://www.youtube.com/watch?v=9Cn5WDvmWtg" target="_blank" rel="noopener nofollow">https://www.youtube.com/watch?v=9Cn5WDvmWtg</a></li>
<li>.Net Aspire Automatic Naming when Deploying to Azure Container Apps : r/dotnet - Reddit <a href="https://www.reddit.com/r/dotnet/comments/1g8r70o/net_aspire_automatic_naming_when_deploying_to/" target="_blank" rel="noopener nofollow">https://www.reddit.com/r/dotnet/comments/1g8r70o/net_aspire_automatic_naming_when_deploying_to/</a></li>
<li>[Breaking change]: Aspire.Hosting.NodeJs library breaks Â· Issue #5444 Â· dotnet/docs-aspire, <a href="https://github.com/dotnet/docs-aspire/issues/5444" target="_blank" rel="noopener nofollow">https://github.com/dotnet/docs-aspire/issues/5444</a></li>
<li>JavaScriptHostingExtensions Class (Aspire.Hosting) - Microsoft Learn,  <a href="https://learn.microsoft.com/en-us/dotnet/api/aspire.hosting.javascripthostingextensions?view=dotnet-aspire-13.0" target="_blank" rel="noopener nofollow">https://learn.microsoft.com/en-us/dotnet/api/aspire.hosting.javascripthostingextensions?view=dotnet-aspire-13.0</a></li>
<li>Aspire 13 - Aspireify anything | Aspire Blog - Microsoft Dev Blogs,   <a href="https://devblogs.microsoft.com/aspire/aspire13/" target="_blank" rel="noopener nofollow">https://devblogs.microsoft.com/aspire/aspire13/</a></li>
<li>AddNpmApp does not build Next.js app before starting â missing '.next' build directory Â· Issue #10045 Â· dotnet/aspire <a href="https://github.com/dotnet/aspire/issues/10045" target="_blank" rel="noopener nofollow">https://github.com/dotnet/aspire/issues/10045</a></li>
<li>Aspire 13 Launches: A New Era for Polyglot Cloud-Native Development - HexMaster's Blog,  <a href="https://hexmaster.nl/posts/aspire-13-launches-a-new-era/" target="_blank" rel="noopener nofollow">https://hexmaster.nl/posts/aspire-13-launches-a-new-era/</a></li>
<li>Aspire.Hosting.NodeJs 9.5.2 - NuGet, è®¿é®æ¶é´ä¸º ä¸æ 13, 2026ï¼ <a href="https://www.nuget.org/packages/Aspire.Hosting.NodeJS" target="_blank" rel="noopener nofollow">https://www.nuget.org/packages/Aspire.Hosting.NodeJS</a></li>
<li>JavaScript integration | Aspire <a href="https://aspire.dev/integrations/frameworks/javascript/" target="_blank" rel="noopener nofollow">https://aspire.dev/integrations/frameworks/javascript/</a></li>
<li>How to Deploy a .NET + React Full Stack App to Azure with Aspire 13 <a href="https://juliocasal.com/blog/how-to-deploy-a-net-react-full-stack-app-to-azure-with-aspire-13" target="_blank" rel="noopener nofollow">https://juliocasal.com/blog/how-to-deploy-a-net-react-full-stack-app-to-azure-with-aspire-13</a></li>
<li>Using Node/Express (like Astro) with .NET Aspire (AstroAspire Basic)  <a href="https://agramont.net/blog/astroaspire-using-node-express-astro-with-dotnet-aspire/" target="_blank" rel="noopener nofollow">https://agramont.net/blog/astroaspire-using-node-express-astro-with-dotnet-aspire/</a></li>
<li>What's new in Aspire 13.1,  <a href="https://aspire.dev/whats-new/aspire-13-1/" target="_blank" rel="noopener nofollow">https://aspire.dev/whats-new/aspire-13-1/</a></li>
<li>.NET Aspire with React/NextJS (or any other Node.js) | by Bruno Adao - Medium,  <a href="https://medium.com/@adamtrip/net-aspire-with-react-nextjs-or-any-other-node-js-ef99f398815f" target="_blank" rel="noopener nofollow">https://medium.com/@adamtrip/net-aspire-with-react-nextjs-or-any-other-node-js-ef99f398815f</a></li>
<li>Aspire Documentation 20250421 | PDF | C Sharp (Programming Language) - <a href="https://www.scribd.com/document/853097207/NET-Aspire-Documentation-20250421" target="_blank" rel="noopener nofollow">https://www.scribd.com/document/853097207/NET-Aspire-Documentation-20250421</a></li>
<li>Use the Aspire dashboard with Node.js apps,<a href="https://aspire.dev/dashboard/standalone-for-nodejs/" target="_blank" rel="noopener nofollow">https://aspire.dev/dashboard/standalone-for-nodejs/</a></li>
<li>Microsoft Orleans and .NET Aspire <a href="https://www.mishraajay.in/blog/orleans-aspire" target="_blank" rel="noopener nofollow">https://www.mishraajay.in/blog/orleans-aspire</a></li>
<li>Observing Spin Apps with OpenTelemetry and the .NET Aspire Dashboard, <a href="https://dev.to/fermyon/observing-spin-apps-with-opentelemetry-and-the-net-aspire-dashboard-3mmp" target="_blank" rel="noopener nofollow">https://dev.to/fermyon/observing-spin-apps-with-opentelemetry-and-the-net-aspire-dashboard-3mmp</a></li>
<li>Visualize OpenTelemetry Data in Seconds with Aspire Dashboard for JavaScript Developers <a href="https://www.youtube.com/watch?v=YKraN1ZETpw" target="_blank" rel="noopener nofollow">https://www.youtube.com/watch?v=YKraN1ZETpw</a></li>
<li>CommunityToolkit/Aspire: A community project with additional components and extensions for Aspire <a href="https://github.com/CommunityToolkit/Aspire" target="_blank" rel="noopener nofollow">https://github.com/CommunityToolkit/Aspire</a></li>
</ol>

</div>
<div id="MySignature" role="contentinfo">
    <p>æ¬¢è¿å¤§å®¶æ«æä¸é¢äºç»´ç æä¸ºæçå®¢æ·ï¼æ¶ä½ ä¸äº</p>
<img src="https://images.cnblogs.com/cnblogs_com/shanyou/57459/o_220125090408_%E9%82%80%E8%AF%B7%E4%BA%8C%E7%BB%B4%E7%A0%81-258px.jpeg" width="170">
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-13 07:19">2026-01-13 07:18</span>&nbsp;
<a href="https://www.cnblogs.com/shanyou">å¼ åå</a>&nbsp;
éè¯»(<span id="post_view_count">194</span>)&nbsp;
è¯è®º(<span id="post_comment_count">3</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19474912);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19474912', targetLink: 'https://www.cnblogs.com/shanyou/p/19474912', title: 'è·¨è¶ææ¯é¸¿æ²ï¼Aspire èµè½ JavaScript ä¸ Node.js å¼åèçæ·±åº¦çæèå' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ 2026 å¹´ PHP 8.4 ä¾ç¶éè¦ï¼è·³å° 8.5 ä¹åä½ è¯¥ææ¡çç¹æ§ ]]></title>
    <link>https://www.cnblogs.com/catchadmin/p/19474910</link>
    <guid>70ca1367c5b0cc3c197d3efeef776700</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/catchadmin/p/19474910" title="åå¸äº 2026-01-13 07:17">
    <span role="heading" aria-level="2">2026 å¹´ PHP 8.4 ä¾ç¶éè¦ï¼è·³å° 8.5 ä¹åä½ è¯¥ææ¡çç¹æ§</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="2026-å¹´-php-84-ä¾ç¶éè¦è·³å°-85-ä¹åä½ è¯¥ææ¡çç¹æ§">2026 å¹´ PHP 8.4 ä¾ç¶éè¦ï¼è·³å° 8.5 ä¹åä½ è¯¥ææ¡çç¹æ§</h1>
<h2 id="ä¸ºä»ä¹-php-84-å¨-2026-å¹´ä»ç¶ç¸å³">ä¸ºä»ä¹ PHP 8.4 å¨ 2026 å¹´ä»ç¶ç¸å³</h2>
<p>å¦æä½ çå¢éè®¡å"ä»å¹´ä¸ PHP 8.5"ï¼å¾å¯è½ä¼åèå° PHP 8.4ââä¸ç®¡ä½ æ¿ä¸æ¿æã</p>
<p>æ èä½éè¦çåå æ¯ï¼æ¯æçªå£ã</p>
<p>æ ¹æ®å®æ¹ PHP æ¯ææ¶é´è¡¨ï¼PHP 8.4ï¼2024 å¹´ 11 æ 21 æ¥åå¸ï¼ä»å¤äºæ´»è·æ¯ææï¼ç´å° 2026 å¹´ 12 æ 31 æ¥ï¼å®å¨ä¿®å¤æç»­å° 2028 å¹´ 12 æ 31 æ¥ã</p>
<p>è¿è®© 8.4 å¨ 2026 å¹´åæä¸ºä¸ä¸ªåççåºçº¿ï¼ç¹å«æ¯å¯¹äºä» 8.2/8.3 åçº§ãæ³é¿å"è·³å¤ªè¿ãåå¤ªå¤"çå¢éã</p>
<p>ä½æææçåå æ¯ææ¯å±é¢çï¼PHP 8.4 ææéå¡äºæ¥å¸¸ OOP é£æ ¼ãå®å¼å¥çç¹æ§åå°äºæ ·æ¿ä»£ç ï¼è®©"å¹²åç DTO"å"å®å¨çé¢åå¯¹è±¡"æ´åæ¯è¯­è¨åçæ¯æçä¸è¥¿ï¼</p>
<ul>
<li>Property hooksï¼å¤´æ¡åè½ï¼</li>
<li>éå¯¹ç§°å±æ§å¯è§æ§ï¼è¯»èµ·æ¥æ¯ publicï¼åèµ·æ¥æ¯ privateï¼</li>
<li>ä¸äºçæ´»è´¨éæ¹è¿ï¼æ°ç»ãå¼ç¨å·¥å·ãDOM ç­ï¼</li>
</ul>
<p>å¦æä½ å¨ 8.4 ä¸ååäºè¿äºï¼åçº§å° 8.5 å¾å¾æè§å"æ·»å ä¸äºå¥½ä¸è¥¿"ï¼èä¸æ¯"ææ´ä¸ª PHP åæ³ç°ä»£å"ã</p>
<p>æä»¥è¿ç¯æç« å¯ä»¥å½ä½åºçº¿ç¥è¯ï¼å¦æä½ è¿æ²¡ä¸ 8.4ï¼è¿æ¯ä½ ä¸º 8.5 ååå¤åºè¯¥ç¥éçââä½ä¸ä¼åæå®æ´çåçº§æ¸åã</p>
<p><a href="https://catchadmin.com/post/2026-01/php-3-biggest-strengths-2026" target="_blank" rel="noopener nofollow">åæ 2026 å¹´ PHP 8.4 ä¾ç¶éè¦ï¼è·³å° 8.5 ä¹åä½ è¯¥ææ¡çç¹æ§</a></p>
<h2 id="property-hooksæ¯ä»ä¹ä¸ºä»ä¹éè¦ä»ä¹æ¶åå¼å¾ç¨">Property hooksï¼æ¯ä»ä¹ãä¸ºä»ä¹éè¦ãä»ä¹æ¶åå¼å¾ç¨</h2>
<p>Property hooks æ¯ PHP 8.4 å¼å¥çã</p>
<p>å®è®©ä½ å¯ä»¥ç´æ¥å¨å±æ§ä¸éå  get å/æ set é»è¾ãå¯ä»¥çè§£ä¸º"è®¿é®å¨æ¹æ³"ï¼ä½ä¸éè¦åï¼</p>
<ul>
<li><code>getFoo(): string</code></li>
<li><code>setFoo(string $foo): void</code></li>
<li>å ä¸ç§æç backing å­æ®µ</li>
<li>å ä¸å¨æé å½æ°åå·¥åééå¤çé¢å¤ä¸åé</li>
</ul>
<h3 id="å¿æºæ¨¡å">å¿æºæ¨¡å</h3>
<p>å¸¦ hook çå±æ§ä»ç¶æ¯å±æ§ãä½ è¿æ¯ç¨æ­£å¸¸æ¹å¼è¯»åå®ï¼</p>
<pre><code class="language-php">$user-&gt;email = "  ADMIN@EXAMPLE.COM  ";
echo $user-&gt;email;
</code></pre>
<p>ä½å¨åºå±ï¼å¼ææè¯»åè·¯ç±å° hookã</p>
<p>å®æ´å½¢å¼ç hook é¿è¿æ ·ï¼</p>
<pre><code class="language-php">class Example
{
    private bool $modified = false;
    public string $foo = 'default value' {
        get {
            if ($this-&gt;modified) {
                return $this-&gt;foo . ' (modified)';
            }
            return $this-&gt;foo;
        }
        set(string $value) {
            $this-&gt;foo = strtolower($value);
            $this-&gt;modified = true;
        }
    }
}
</code></pre>
<p>è¿æ¯æåéçç¤ºä¾ï¼å±ç¤ºäºæ ¸å¿ææ³ï¼ä¿çå±æ§è¯­æ³ï¼åæ¶è·å¾éä¸­åçè¡ä¸ºã</p>
<h3 id="backed-property-vs-virtual-propertyå®¹ææ¼æçé¨å">Backed property vs virtual propertyï¼å®¹ææ¼æçé¨åï¼</h3>
<p>Property hooks å¯ä»¥åå»ºä¸¤"ç§"å±æ§ï¼</p>
<ul>
<li><strong>Backed property</strong>ï¼å¨å¯¹è±¡ä¸­æå­å¨çåå­ï¼æ®éå±æ§ï¼ï¼hook æä½ backing valueã</li>
<li><strong>Virtual property</strong>ï¼æ²¡æ backing å­å¨ââæ¯æ´¾ç/è®¡ç®çï¼åä¼ªè£æ <code>$area</code> ç <code>getArea()</code>ã</li>
</ul>
<p>æåè§£éè¯´ï¼å¦æä¸¤ä¸ª hook é½æ²¡æç¨ç²¾ç¡®è¯­æ³å¼ç¨ <code>$this-&gt;propertyName</code>ï¼å±æ§å°±æ¯ virtual çï¼virtual å±æ§ä¸å åå­ç©ºé´ã</p>
<p>ä¸ä¸ªå¹²åç virtual property ç¤ºä¾ï¼</p>
<pre><code class="language-php">class Rectangle
{
    public function __construct(
        public int $h,
        public int $w,
    ) {}
    public int $area {
        get =&gt; $this-&gt;h * $this-&gt;w;
    }
}
$r = new Rectangle(4, 5);
echo $r-&gt;area;     // 20
$r-&gt;area = 30;     // Error: no set operation defined
</code></pre>
<p>è¿åºæ¬ä¸æ¯ä¸ä¸ªè®¡ç®å getterââä½è¯»èµ·æ¥åå±æ§ã</p>
<h3 id="ææç¨çå®éæ¨¡å¼">ææç¨çå®éæ¨¡å¼</h3>
<p>ä¸æ³¨äºçæ­£è½åå° bug åæ ·æ¿ä»£ç çæ¨¡å¼ã</p>
<p><strong>æ¨¡å¼ Aï¼å¨ setter ä¸­è§èåè¾å¥ï¼trimãå¤§å°åè½¬æ¢ç­ï¼</strong></p>
<p>ç»å¸åºæ¯ï¼é®ç®±ãç¨æ·åãslugãä½ æ³æ¥åæä¹±è¾å¥ä½å­å¨è§èåçå¼ã</p>
<pre><code class="language-php">final class UserProfile
{
    public string $email {
        set =&gt; strtolower(trim($value));
    }
}
</code></pre>
<p>å¨ç®åå½¢å¼ä¸­ï¼è¡¨è¾¾å¼ç»ææä¸ºå­å¨ç backing valueã</p>
<p>è¿å·²ç»å¾æç¨äºï¼ä½çäº§ä»£ç éå¸¸è¿éè¦éªè¯ã</p>
<p><strong>æ¨¡å¼ Bï¼å¨è¾¹çå¤éªè¯ä¸åéï¼å°½æ©æåºï¼</strong></p>
<p>ä¾å¦ï¼å¼ºå¶"ç¨æ·åè³å° 3 ä¸ªå­ç¬¦"å¹¶è§èåç©ºæ ¼ã</p>
<pre><code class="language-php">final class UserProfile
{
    public string $username {
        set {
            $v = trim($value);
            if ($v === '') {
                throw new InvalidArgumentException('Username cannot be empty.');
            }
            if (strlen($v) &lt; 3) {
                throw new InvalidArgumentException('Username is too short.');
            }
            $this-&gt;username = $v;
        }
    }
}
</code></pre>
<p>è¿è®©ä¸åéç´§æ¨çå±æ§ï¼èä¸æ¯æ£è½å¨æ§å¶å¨ãè¯·æ±éªè¯å¨åæé å½æ°åå¤ã</p>
<p>PHP è¿ç§»æåçè³å±ç¤ºäºç±»ä¼¼ç"éªè¯ç¶åèµå¼"æ¨¡å¼ã</p>
<p><strong>æ¨¡å¼ Cï¼æ´¾ç/virtual ç"å±ç¤º"å±æ§</strong></p>
<p>å¸¸è§ç DTO éæ±ï¼æ´é² fullName ä½ä¸å­å¨å®ã</p>
<pre><code class="language-php">final class Person
{
    public function __construct(
        public string $first,
        public string $last,
    ) {}
    public string $fullName {
        get =&gt; "{$this-&gt;first} {$this-&gt;last}";
    }
}
</code></pre>
<p>Virtual property æéåçåºæ¯ï¼</p>
<ul>
<li>ç¡®å®æ§çï¼</li>
<li>è®¡ç®ææ¬ä½ï¼</li>
<li>ä½ æ°¸è¿ä¸æ³"set"å®ä»¬ã</li>
</ul>
<p>å¯¹äºåå²ä¸æ»¥ç¨é­æ¯ <code>__get()</code> çå¢éï¼è¿æ¯ä¸ä¸ªå¹²åçåºçº¿ã</p>
<p><strong>æ¨¡å¼ Dï¼"è®¡ç®ä¸æ¬¡ï¼ä¹åç¼å­"ï¼è°¨æä½¿ç¨ï¼</strong></p>
<p>ææ¶è®¡ç®å¼å¾æè´µï¼è§£æãæå»ºå¯¹è±¡ï¼ãä½ å¯ä»¥å¨å¯¹è±¡åé¨ç¼å­å®ã</p>
<pre><code class="language-php">final class RequestContext
{
    private ?array $cachedClaims = null;
    public function __construct(
        public string $jwt,
    ) {}
    public array $claims {
        get {
            if ($this-&gt;cachedClaims !== null) {
                return $this-&gt;cachedClaims;
            }
            // åè®¾ parseJwt() åç­¾åæ£æ¥ãbase64 è§£ç ç­
            $this-&gt;cachedClaims = $this-&gt;parseJwt($this-&gt;jwt);
            return $this-&gt;cachedClaims;
        }
    }
    private function parseJwt(string $jwt): array
    {
        // ...
        return [];
    }
}
</code></pre>
<p>è¿å¾æ¹ä¾¿ï¼ä½ä¹æ¯ hook å¯è½åå¾"å¤ªé­æ³"çå°æ¹ãå¦æä½ æéæ´»èå¨ <code>$obj-&gt;claims</code> åé¢ï¼å¯è½ä¼è®©è°ç¨èæå¤ãåªå¨äººä½å·¥å­¦çæ­£è¶è¿ææ¬æ¶ä½¿ç¨è¿ä¸ªæ¨¡å¼ã</p>
<h3 id="hooks--æé å½æ°æåä¸ä¸ªå¾®å¦çå">Hooks + æé å½æ°æåï¼ä¸ä¸ªå¾®å¦çå</h3>
<p>PHP åè®¸å¨æåçå±æ§ä¸ä½¿ç¨ hookï¼ä½æä¸ä¸ªéè¦è§åï¼ä¼ ç»æé å½æ°çå¼å¿é¡»å¹éå±æ§å£°æçç±»åââä¸ç®¡ä½ ç set hook å¯è½æ¥åä»ä¹ã</p>
<p>ä¹å°±æ¯è¯´ä½ å¯ä»¥åï¼</p>
<ul>
<li>å±æ§ç±»åï¼<code>DateTimeInterface</code></li>
<li>set hook æ¥åï¼<code>string|DateTimeInterface</code></li>
</ul>
<p>â¦ä½å¦æä½ ç¨æåï¼æé å½æ°åæ°ç±»åä»ç¶æ¯ <code>DateTimeInterface</code>ã</p>
<p>å¦æä½ ççæ³"æé å½æ°éä¹åè®¸ string"ï¼ä½ å¯è½éè¦å·¥åæéæåçæé å½æ°åæ°ã</p>
<h3 id="éè¦éå¶property-hooks-ä¸è½å-readonly-ä¸èµ·ç¨">éè¦éå¶ï¼property hooks ä¸è½å readonly ä¸èµ·ç¨</h3>
<p>è¿å¯¹åæ¬¢ä¸å¯åå¯¹è±¡çå¢éå¾éè¦ã</p>
<p>æåæç¡®è¯´æï¼property hooks ä¸ readonly å±æ§ä¸å¼å®¹ã</p>
<p>æä»¥å¦æä½ çé£æ ¼æ¯"å°å¤é½æ¯ä¸å¯åå¼å¯¹è±¡"ï¼hooks ä¸è½æ¿ä»£é£ä¸ªãHooks æ´éåçåºæ¯æ¯ï¼</p>
<ul>
<li>DTO å request/response å¯¹è±¡</li>
<li>éç½®å¯¹è±¡</li>
<li>åé¨å¯åä½éè¦æ¤æ çé¢åå¯¹è±¡</li>
</ul>
<p>ï¼ä¸ä¸èä¼è®²ç¨éå¯¹ç§°å¯è§æ§å®ç°"åä¸å¯å DTO"ãï¼</p>
<h3 id="å¦ä¸ä¸ªéå¶å¼ç¨åé´æ¥ä¿®æ¹å¯è½åä½ ">å¦ä¸ä¸ªéå¶ï¼å¼ç¨åé´æ¥ä¿®æ¹å¯è½åä½ </h3>
<p>Hooks æ¦æªè¯»åï¼è¿å¯è½ä¸å¼ç¨å²çªââç¹å«æ¯æ°ç»åç´ åå¥ï¼</p>
<pre><code class="language-php">$obj-&gt;arr['k'] = 'v';
</code></pre>
<p>ææ¡£è­¦åè¯´ï¼è·åå¼ç¨æé´æ¥ä¿®æ¹å¯è½ç»è¿ set hookï¼å¹¶æ¦è¿°äºçº¦æï¼å¦ <code>&amp;get</code> è¡ä¸ºï¼ååè®¸çæåµã</p>
<p>å®ç¨æåï¼</p>
<ul>
<li>å¦æè°ç¨èç»å¸¸ä¿®æ¹åç´ ï¼é¿åå¨æ°ç»å±æ§ä¸ç¨ hookã</li>
<li>ä¼åç¨"æ¿æ¢æ´ä¸ªæ°ç»"æ¨¡å¼ï¼<code>$obj-&gt;tags = [...$obj-&gt;tags, $newTag];</code>ï¼ï¼è¿è¡¨ç°å¾åæ®é setã</li>
</ul>
<h3 id="ä»ä¹æ¶åä¸åºè¯¥ç¨-property-hooks">ä»ä¹æ¶åä¸åºè¯¥ç¨ property hooks</h3>
<p>Hooks å¾æ£â¦â¦ç´å°å®ä»¬ä¸æ¯ãå¨ä»¥ä¸æåµé¿åï¼</p>
<ul>
<li>"hook body"å¼å§åçæ­£çç¼æï¼IOãç½ç»è°ç¨ãæ¥å¿ï¼ã</li>
<li>è°è¯åå¾ä¸æ¸æ°ï¼"ä¸ºä»ä¹è¯»è¿ä¸ªå±æ§ä¼è®¿é®æ°æ®åºï¼"ï¼ã</li>
<li>ä½ çå¢ééè¦å³é®è¡ä¸ºææ¾å¼çè°ç¨ç¹ã</li>
</ul>
<p>ä¸ä¸ªæç¨çè§åï¼property hooks æéåå®ç°<strong>å±é¨ä¸åéåå±é¨è½¬æ¢</strong>ââçæ­£å±äºå±æ§æ¬èº«çé»è¾ã</p>
<h2 id="å¶ä»å½±åæ¥å¸¸å·¥ä½ç-php-84-ç¹æ§æä½ çæ­£ä¼ç¨ç">å¶ä»å½±åæ¥å¸¸å·¥ä½ç PHP 8.4 ç¹æ§ï¼æä½ çæ­£ä¼ç¨çï¼</h2>
<p>PHP 8.4 ä¸åªæ hooksãä¸æ³¨äºä»¥ä¸ç±»åçç¹æ§ï¼</p>
<ul>
<li>åå°æ ·æ¿ä»£ç ï¼</li>
<li>åå° bugï¼</li>
<li>æè®©ä»£ç æ´å®¹æçè§£ã</li>
</ul>
<h3 id="ç¹æ§éå¯¹ç§°å±æ§å¯è§æ§public-è¯»åéå">ç¹æ§ï¼éå¯¹ç§°å±æ§å¯è§æ§ï¼public è¯»ãåéåï¼</h3>
<p>éå¯¹ç§°å¯è§æ§è®©ä½ å¯ä»¥ä¸ºè¯»ååè®¾ç½®ä¸åçå¯è§æ§ã</p>
<p>ç¤ºä¾ï¼</p>
<pre><code class="language-php">final class Money
{
    public function __construct(
        public private(set) string $currency,
        public private(set) int $cents,
    ) {}
}
</code></pre>
<p>è°ç¨èå¯ä»¥è¯»ï¼</p>
<pre><code class="language-php">echo $m-&gt;cents;
</code></pre>
<p>ä½ä¸è½åï¼</p>
<pre><code class="language-php">$m-&gt;cents = 500; // Error outside the class
</code></pre>
<p>è¿ç§»æåéæäºè§åï¼ç¬¬ä¸ä¸ªå¯è§æ§æ¯ get-visibilityï¼ç¬¬äºä¸ªæ§å¶ set-visibilityï¼get visibility ä¸è½æ¯ set visibility æ´çªã</p>
<p>è¿å¯¹ DTO å¾éè¦ï¼å®ç»ä½ ä¸ç§"å¤§é¨åä¸å¯å"çé£æ ¼ï¼èä¸å¿éç¨å®æ´çå¼å¯¹è±¡æ¹æ³ã</p>
<h3 id="ç»åéå¯¹ç§°å¯è§æ§--property-hooks">ç»åéå¯¹ç§°å¯è§æ§ + property hooks</h3>
<p>è¿ä¸ªç»åç»å¸¸æ¿ä»£ç»å¸ç"ç§æå±æ§ + getter + setter"ã</p>
<pre><code class="language-php">final class UserInput
{
    public private(set) string $email {
        set =&gt; strtolower(trim($value));
    }
    public private(set) string $name {
        set {
            $v = trim($value);
            if ($v === '') {
                throw new InvalidArgumentException('Name is required.');
            }
            $this-&gt;name = $v;
        }
    }
}
</code></pre>
<ul>
<li>è¯»æ¯ publicï¼å¯¹æ¨¡æ¿ãåºååå¨ãè°è¯åå¥½ï¼</li>
<li>åæ¯åæ§çï¼å¯¹ä¸åéåå¥½ï¼</li>
<li>æ ·æ¿ä»£ç ä¿æä½</li>
</ul>
<h3 id="ç¹æ§æ°æ°ç»è¾å©å½æ°array_findarray_find_keyarray_anyarray_all">ç¹æ§ï¼æ°æ°ç»è¾å©å½æ°ï¼array_findãarray_find_keyãarray_anyãarray_allï¼</h3>
<p>PHP 8.4 æ°å¢äºæ°ç»æç´¢/æ£æ¥å½æ°ã</p>
<p><strong>array_find å array_find_key</strong></p>
<pre><code class="language-php">$users = [
    ['id' =&gt; 1, 'active' =&gt; false],
    ['id' =&gt; 2, 'active' =&gt; true],
    ['id' =&gt; 3, 'active' =&gt; false],
];

$first = array_find($users, fn ($u) =&gt; $u['active'] === true);
// ['id' =&gt; 2, 'active' =&gt; true]
</code></pre>
<p>å¦ææ²¡æ¾å°ï¼è¿å <code>null</code>ââä½å¦æ<strong>å¼æ¬èº«</strong>å°±æ¯ <code>null</code>ï¼ä½ æä¹åºå"æ¾å° null"å"æ²¡æ¾å°"ï¼</p>
<p>ä½ å¯ä»¥ç¨ <code>array_find_key()</code> æ¥é¿åæ­§ä¹ï¼å ä¸º key ä¸è½æ¯ nullï¼ã</p>
<pre><code class="language-php">$key = array_find_key($users, fn ($u) =&gt; $u['active'] === true);
if ($key === null) {
    // ççæ²¡æ¾å°
}
$firstActive = $users[$key];
</code></pre>
<p><strong>array_any å array_all çèµ·æ¥ç®åââç´å°å®ä»¬æ¶é¤äºåªé³</strong></p>
<p>ä¾å¦ï¼å¼ºå¶ææä¸ä¼ çæä»¶é½å¨å¤§å°éå¶åã</p>
<pre><code class="language-php">$ok = array_all($files, fn ($f) =&gt; $f['size'] &lt;= 5_000_000);
if (!$ok) {
    throw new RuntimeException('One or more files are too large.');
}
</code></pre>
<p>è¿æ¿ä»£äºæ¯ä¸ªäººé½åå¾ç¥æä¸åç foreach + æ å¿åéã</p>
<h3 id="ç¹æ§deprecated-attribute-ç¨äºç¨æ·æå¼ç¨">ç¹æ§ï¼#[Deprecated] attribute ç¨äºç¨æ·æå¼ç¨</h3>
<p>PHP ä¸ç´æåé¨å¼ç¨æºå¶ï¼ä½ PHP 8.4 éè¿ <code>#[Deprecated]</code> attribute æ´é²äºä¸ä¸ªå¹²åçç¨æ·æçæ¬ã</p>
<p>æåè¯´ï¼ä½¿ç¨å·²å¼ç¨çåè½ä¼è§¦å <code>E_USER_DEPRECATED</code>ã</p>
<p>ç¤ºä¾ï¼</p>
<pre><code class="language-php">#[\Deprecated(message: "Use slugify() instead", since: "2026-01")]
function make_slug(string $s): string
{
    return strtolower(trim($s));
}

function slugify(string $s): string
{
    // çæ­£çå®ç°
    return strtolower(trim($s));
}

make_slug("Hello World");
</code></pre>
<p>è¿å¯¹å¢éæ¥è¯´è¢«ä½ä¼°äºï¼å®ç»ä½ ä¸ä¸ªæ ååçæ¹å¼æ¥ï¼</p>
<ul>
<li>æ è®°æ§çè¾å©å½æ°ï¼</li>
<li>æå¯¼åé¨è¿ç§»ï¼</li>
<li>å¨ CI æ¥å¿ä¸­æ´é²å¼ç¨ä½¿ç¨æåµã</li>
</ul>
<h3 id="ç¹æ§æ¯æ-html5-çæ°-dom-apiå¨-dom-å½åç©ºé´ä¸­">ç¹æ§ï¼æ¯æ HTML5 çæ° DOM APIï¼å¨ Dom å½åç©ºé´ä¸­ï¼</h3>
<p>å¦æä½ å¨ PHP ä¸­è§£æè¿ HTMLï¼ç¬åãæ¸çãè¿ç§»èæ¬ï¼ï¼PHP 8.4 æ¯ä¸æ¬¡ææä¹çåçº§ã</p>
<p>8.4 åå¸å¬åä»ç»äºå¸¦ææ åå¼å®¹ HTML5 è§£æçæ° DOM APIãDom å½åç©ºé´ä¸­çæ°ç±»ï¼ä»¥åæ¹ä¾¿çæ¥è¯¢è¾å©å½æ°ã</p>
<p>å¬åä¸­çç¤ºä¾å±ç¤ºäºï¼</p>
<ul>
<li><code>Dom\HTMLDocument::createFromString(...)</code></li>
<li><code>querySelector(...)</code></li>
<li><code>classList-&gt;contains(...)</code></li>
</ul>
<p>ä¸ä¸ªå®éç¨ä¾ï¼å®å¨å°æ£æµ"canonical"é¾æ¥æ ç­¾ã</p>
<pre><code class="language-php">$doc = Dom\HTMLDocument::createFromString($html, LIBXML_NOERROR);
$canonical = $doc-&gt;querySelector('link[rel="canonical"]');
$url = $canonical?-&gt;getAttribute('href');
</code></pre>
<p>å¯¹äºç®åä»»å¡ï¼è¿æ¯ç»å¸ç DOMDocument + DOMXPath ç»åå¥½ç¨å¾å¤ï¼å®åå°äºæ²¡äººæ³ç»´æ¤ç"XPath æå¤§å©é¢"èæ¬ã</p>
<h3 id="ç¹æ§pdo-é©±å¨ç¹å®å­ç±»æ´ç²¾ç¡®ç-api">ç¹æ§ï¼PDO é©±å¨ç¹å®å­ç±»ï¼æ´ç²¾ç¡®ç APIï¼</h3>
<p>PHP 8.4 å¼å¥äºé©±å¨ç¹å®ç PDO å­ç±»ï¼å¦ <code>Pdo\MySql</code>ã<code>Pdo\Pgsql</code>ã<code>Pdo\Sqlite</code> ç­ï¼å¹¶å¨åå¸å¬åä¸­å±ç¤ºäºæ°çè¿æ¥é£æ ¼ã</p>
<p>å¨ PHP 8.4 ç¤ºä¾ä¸­ï¼</p>
<ul>
<li><code>PDO::connect(...)</code> è¿å <code>Pdo\Sqlite</code></li>
<li>é©±å¨ç¹å®æ¹æ³åªå­å¨äºç¸å³çå°æ¹</li>
</ul>
<p>è¿æ¹åäºæ­£ç¡®æ§å IDE æ¯æï¼ç¹å«æ¯å¨æµè¯åçäº§æ··ç¨ä¸åé©±å¨çä»£ç åºä¸­ã</p>
<h3 id="éå lazy-objectsä¸»è¦ç¨äºæ¡æ¶ååºç¡è®¾æ½ä»£ç ">éå ï¼Lazy objectsï¼ä¸»è¦ç¨äºæ¡æ¶ååºç¡è®¾æ½ä»£ç ï¼</h3>
<p>PHP 8.4 è¿å¼å¥äº lazy objects æ¦å¿µï¼åå§åè¢«å»¶è¿å°è®¿é®æ¶æè¿è¡çå¯¹è±¡ãè¿ç§»æåæç¡®æåºæ¡æ¶å¯ä»¥å©ç¨å®ä»¬æ¥å»¶è¿è·åä¾èµææ°æ®ã</p>
<p>å®çè³å±ç¤ºäºä½¿ç¨ <code>ReflectionClass::newLazyGhost(...)</code> çæ ¸å¿æºå¶ã</p>
<p>è¿ä¸æ¯ä½ å¨æ¥å¸¸åºç¨ä»£ç ä¸­ä¼å¤©å¤©ç¨çä¸è¥¿ï¼ä½å¦æä½ åï¼</p>
<ul>
<li>DI å®¹å¨ï¼</li>
<li>ORMï¼</li>
<li>ä»£çå±ï¼</li>
<li>æå¯¹æ§è½ææç bootstrapï¼</li>
</ul>
<p>â¦å¼å¾ç¥éå®çå­å¨ï¼å ä¸ºä½ ä¼å¨çæç³»ç»åé¨çå°å®ã</p>
<h2 id="php-84-å¦ä½æ¹å-oop-é£æ ¼å°¤å¶æ¯-dto">PHP 8.4 å¦ä½æ¹å OOP é£æ ¼ï¼å°¤å¶æ¯ DTOï¼</h2>
<p>å¦æä½ å PHP å¾å¤å¹´ï¼ä½ å¯è½ç»åè¿è³å°ä¸ç§ DTO é£æ ¼ï¼</p>
<ol>
<li>"å°å¤é½æ¯ public å±æ§"</li>
<li>"ææä¸è¥¿é½æ¯ç§æå±æ§ + getter/setter"</li>
<li>"readonly æåå±æ§"ï¼å¥½ç¨ï¼ä½æ­»æ¿ï¼</li>
</ol>
<p>PHP 8.4 å¢å äºç¬¬åç§ï¼éå¸¸å®ç¨ï¼</p>
<ul>
<li>public è¯»ï¼</li>
<li>åæ§åï¼</li>
<li>ä¸åéé è¿æ°æ®ã</li>
</ul>
<h3 id="84-ä¹åå¸¸è§ç-dto-æ ·æ¿ä»£ç ">8.4 ä¹åï¼å¸¸è§ç DTO æ ·æ¿ä»£ç </h3>
<pre><code class="language-php">final class CreateUserCommand
{
    private string $email;
    private string $name;
    public function __construct(string $email, string $name)
    {
        $this-&gt;email = strtolower(trim($email));
        $this-&gt;name = trim($name);
        if ($this-&gt;name === '') {
            throw new InvalidArgumentException('Name is required.');
        }
    }
    public function email(): string { return $this-&gt;email; }
    public function name(): string { return $this-&gt;name; }
}
</code></pre>
<p>æ²¡ä»ä¹é®é¢ãåªæ¯éå¤ï¼ç¹å«æ¯å¨å åä¸ªæ¶æ¯å¯¹è±¡ä¸ã</p>
<h3 id="84-ä¹åpublic-è¯»--private-å--hooks">8.4 ä¹åï¼"public è¯» + private å + hooks"</h3>
<pre><code class="language-php">final class CreateUserCommand
{
    public private(set) string $email {
        set =&gt; strtolower(trim($value));
    }
    public private(set) string $name {
        set {
            $v = trim($value);
            if ($v === '') {
                throw new InvalidArgumentException('Name is required.');
            }
            $this-&gt;name = $v;
        }
    }
    public function __construct(string $email, string $name)
    {
        $this-&gt;email = $email;
        $this-&gt;name = $name;
    }
}
</code></pre>
<p>ä½ å¾å°ï¼</p>
<ul>
<li>å¼ºç±»å</li>
<li>éä¸­åçè§èå/éªè¯</li>
<li>Public å¯è¯»æ§ï¼å¨æ¨¡æ¿ãæ¥å¿ãåºååå¨ä¸­æ¹ä¾¿ï¼</li>
<li>æ²¡æè®¿é®å¨æ ·æ¿</li>
</ul>
<p>èä¸ä½ ä»ç¶å¯ä»¥ç¨æµè¯ä¿æä¸¥æ ¼ã</p>
<h3 id="ä¸ä¸ªç°å®çdto--æ´¾çå±æ§æ¨¡å¼">ä¸ä¸ªç°å®ç"DTO + æ´¾çå±æ§"æ¨¡å¼</h3>
<pre><code class="language-php">final class Address
{
    public function __construct(
        public private(set) string $line1,
        public private(set) ?string $line2,
        public private(set) string $city,
    ) {}
    public string $singleLine {
        get =&gt; trim($this-&gt;line1 . ' ' . ($this-&gt;line2 ?? '') . ', ' . $this-&gt;city);
    }
}
</code></pre>
<p>ä½ å¯ä»¥ä¿æå­å¨å­æ®µå¹²åï¼å¹¶æä¾ä¸ä¸ªåå¥½çæ´¾çå­æ®µèä¸å¼å¥é¢å¤æ¹æ³ã</p>
<h3 id="readonly-ä»ç¶èåºçåºæ¯">readonly ä»ç¶èåºçåºæ¯</h3>
<p>å ä¸º hooks ä¸è½å readonly ä¸èµ·ç¨ï¼ä¸å¯åå¼å¯¹è±¡ä»ç¶ä¾èµï¼</p>
<ul>
<li>readonly æåå±æ§</li>
<li>å·¥å</li>
<li>æ¾å¼ç <code>withX()</code> æ¹æ³ï¼å¨ PHP 8.5 éæ´å¥½ç¨äºï¼ä½é£æ¯å¦ä¸ç¯æç« çäºï¼</li>
</ul>
<p>æä»¥å¾å¤å¢éçå®éåå·¥æ¯ï¼</p>
<ul>
<li><strong>å¼å¯¹è±¡</strong>ï¼readonly + æ¾å¼è¡ä¸º</li>
<li><strong>DTO / å½ä»¤ / è¯·æ±</strong>ï¼éå¯¹ç§°å¯è§æ§ + hooks</li>
</ul>
<h2 id="ç»å¸¸å½±åæµè¯ci-çç®ç­å¼å®¹æ§è¯´æ">ç»å¸¸å½±åæµè¯/CI çç®ç­å¼å®¹æ§è¯´æ</h2>
<p>è¿ä¸èææç®ç­ï¼ä½æ¯è½çæ¶é´çé£ç§ç®ç­ã</p>
<h3 id="éè¯¯æ¥åçº§å«e_strict-æ²¡äº">éè¯¯æ¥åçº§å«ï¼E_STRICT æ²¡äº</h3>
<p>PHP 8.4 ç§»é¤äº E_STRICT éè¯¯çº§å«ï¼E_STRICT å¸¸éå·²å¼ç¨ã</p>
<p>å¦æä½ æéçä»£ç æéç½®å¼ç¨äº E_STRICTï¼å¯è½ä¼çå° CI è¡ä¸ºååã</p>
<h3 id="jit-éç½®é»è®¤å¼åäºopcache">JIT éç½®é»è®¤å¼åäºï¼OPcacheï¼</h3>
<p>PHP 8.4 ä¸­ JIT éç½®çé»è®¤å¼åäºï¼</p>
<ul>
<li>ä» <code>opcache.jit=tracing</code> å <code>opcache.jit_buffer_size=0</code></li>
<li>å° <code>opcache.jit=disable</code> å <code>opcache.jit_buffer_size=64M</code></li>
</ul>
<p>è¿ä¸ä¼æ¹å"JIT é»è®¤å³é­"ï¼ä½å¯è½å½±åä¹ååªåæ¢å¶ä¸­ä¸ä¸ªå¼çç¯å¢ã</p>
<h3 id="ä¸äºæ©å±åå¾æ´ä¸¥æ ¼ç±»ååå¸¸évalueerrorè¡ä¸ºåæ´">ä¸äºæ©å±åå¾æ´ä¸¥æ ¼ï¼ç±»ååå¸¸éãValueErrorãè¡ä¸ºåæ´ï¼</h3>
<p>8.4 ä¸å¼å®¹åè¡¨ä¸­çä¸äºä¾å­ï¼</p>
<ul>
<li>å ä¸ªæ©å±ç±»å¸¸éç°å¨æç±»åï¼DateãIntlãPDOãReflectionãSPLãSqliteãXMLReaderï¼ã</li>
<li>ä¸äºå½æ°ç°å¨æ ValueError èä¸æ¯éé»æ¥åæ æè¾å¥ï¼å¦ <code>round()</code> æ ææ¨¡å¼ã<code>str_getcsv()</code> æ æåéç¬¦é¿åº¦ï¼ã</li>
<li>SimpleXML è¿­ä»£è¡ä¸ºåäºä»¥é¿åæå¤ç rewindï¼ä¹åå¯è½å¯¼è´æ éå¾ªç¯ï¼ã</li>
<li>æ ¹æ®é©±å¨ï¼ä¸äº PDO å±æ§ç°å¨è¡¨ç°ä¸ºå¸å°èéæ´æ°ã</li>
</ul>
<p>è¿äºæ¯é£ç§é¤éä½ å°½æ©å¨ 8.4 ä¸è¿è¡æµè¯å¥ä»¶ï¼å¦åä¼è¡¨ç°ä¸º"éæºæµè¯å¤±è´¥"çåæ´ã</p>
<h2 id="å°åè¿ç§»éç¨-php-84-çå°æ­¥éª¤æ éå¤§éæ">å°åè¿ç§»ï¼éç¨ PHP 8.4 çå°æ­¥éª¤ï¼æ éå¤§éæ</h2>
<p>å¦æä½ è¿æ²¡ä¸ 8.4ââæèä¸äºä½æ²¡ç¨è¿äºç¹æ§ââè¿æ¯ä¸ä¸ªéå¸¸ææçå®å¨é¡ºåºã</p>
<h3 id="æ­¥éª¤-1åæ-84-å å°-ciå³ä½¿çäº§è¿æ²¡åå¤å¥½">æ­¥éª¤ 1ï¼åæ 8.4 å å° CIï¼å³ä½¿çäº§è¿æ²¡åå¤å¥½</h3>
<p>ç¡®ä¿ä½ è½å¨ 8.4 ä¸è¿è¡æµè¯å¥ä»¶èä¸åºæå¤ãæè­¦ååå¼ç¨å½ä½ä¿¡å·ã</p>
<h3 id="æ­¥éª¤-2åªå¨æ°ä»£ç ä¸­éç¨-array_find--array_any--array_all">æ­¥éª¤ 2ï¼åªå¨æ°ä»£ç ä¸­éç¨ array_find / array_any / array_all</h3>
<p>ä¸è¦éææ´ä¸ªä»£ç åºãåªæ¯ä¸è¦ååæ°ç"foreach-with-break"å¾ªç¯ï¼é¤éå®ä»¬ççæ´æ¸æ°ã</p>
<h3 id="æ­¥éª¤-3å¯¹æ°ç-dto-åè¯·æ±å¯¹è±¡ä½¿ç¨éå¯¹ç§°å¯è§æ§">æ­¥éª¤ 3ï¼å¯¹æ°ç DTO åè¯·æ±å¯¹è±¡ä½¿ç¨éå¯¹ç§°å¯è§æ§</h3>
<p>è¿æ¯ä½é£é©çï¼ä½ ä¸»è¦æ¯æ¹åå±æ§å£°æå¹¶æ¶é¤ä¸ç±»æå¤ä¿®æ¹ã</p>
<h3 id="æ­¥éª¤-4å¨ææ¾æ¿ä»£æ ·æ¿ä»£ç çå°æ¹æ·»å -property-hooks">æ­¥éª¤ 4ï¼å¨ææ¾æ¿ä»£æ ·æ¿ä»£ç çå°æ¹æ·»å  property hooks</h3>
<p>ä»ä»¥ä¸å¼å§ï¼</p>
<ul>
<li>trim åå¤§å°åè§èåï¼</li>
<li>ç®åéªè¯ï¼</li>
<li>æ´¾çå±æ§ã</li>
</ul>
<p>ä¸å¼å§é¿åå¨ hooks éæ¾éé»è¾ã</p>
<h3 id="æ­¥éª¤-5ç¨-deprecated-è¿è¡åé¨-api-æ¸ç">æ­¥éª¤ 5ï¼ç¨ #[Deprecated] è¿è¡åé¨ API æ¸ç</h3>
<p>ç¨æ¸æ°çæ¶æ¯æ è®°æ§æ¹æ³åè¾å©å½æ°ãå¨ CI æ¥å¿ä¸­è·è¸ªä½¿ç¨æåµãè®©å¼ç¨å¯æä½ã</p>
<h3 id="æ­¥éª¤-6åªå¨èæ¬æéç¦»æ¨¡åä¸­éç¨æ°-dom-api">æ­¥éª¤ 6ï¼åªå¨èæ¬æéç¦»æ¨¡åä¸­éç¨æ° DOM API</h3>
<p>å¦æä½ çåºç¨å HTML è§£æï¼æ° API å¯è½æ¯å¾å¤§çæ¹è¿ââä½ä¸å¼å§ä¿æéç¨èå´åéã</p>
<h3 id="æ­¥éª¤-7æ-lazy-objects-çç»æ¡æ¶åºç¡è®¾æ½å±">æ­¥éª¤ 7ï¼æ lazy objects çç»æ¡æ¶/åºç¡è®¾æ½å±</h3>
<p>ç¥éè¿ä¸ªç¹æ§å­å¨ãä¸è¦å¼ºè¡å¡è¿åºç¨ä»£ç ï¼é¤éä½ æéå¸¸å·ä½çæ§è½ææ¶æåå ã</p>
<h2 id="éå¾-php-85-çæ¡¥æ¢ä¸ºä»ä¹-84-è®©ä¸ä¸æ­¥æ´å®¹æ">éå¾ PHP 8.5 çæ¡¥æ¢ï¼ä¸ºä»ä¹ 8.4 è®©ä¸ä¸æ­¥æ´å®¹æï¼</h2>
<p>ä¸æ¦ä½ çå¢éçæäº PHP 8.4 ç"ç°ä»£åºçº¿"ï¼</p>
<ul>
<li>DTO å ä¸ºéå¯¹ç§°å¯è§æ§ + hooks åå¾æ´å¹²å</li>
<li>å¼ç¨ç­ç¥å ä¸º <code>#[Deprecated]</code> åå¾æ´ç³»ç»å</li>
<li>æ°ç»éåä»£ç å¯ä»¥ç¨åçè¾å©å½æ°è¡¨è¾¾å¾æ´æ¸æ°</li>
<li>HTML è§£æåå·¥å·èæ¬åå¾ä¸é£ä¹çè¦</li>
</ul>
<p>è¿ä¸ªåºçº¿åå°äºè¿ç§»å° PHP 8.5 çæ©æ¦ï¼å ä¸ºä½ å·²ç»ç°ä»£åäºä»£ç åºä¸­å¯¹è±¡åæ¥å¸¸å·¥å·çåæ³ãPHP 8.5 å°±ä¸åæ¯"è¿½èµ¶"ï¼èæ¯éæ©æ§å°éç¨æ¹è¿ã</p>
<h2 id="ç»è®º">ç»è®º</h2>
<p>PHP 8.4 ä¸æ¯ä¸ä¸ª"è·³è¿å®ï¼ç´æ¥ä¸ 8.5"ççæ¬ãå¨ 2026 å¹´ï¼å®ä»ç¶æ¯ä¸ä¸ªææºçåºçº¿ï¼å ä¸ºå®åæ¯æãå¹¿æ³ç¸å³ï¼èä¸å®æ¹åäºæ¥å¸¸ PHP çäººä½å·¥å­¦ââå°¤å¶æ¯å¨ OOP å¯éçä»£ç åºä¸­ã</p>
<p>å¦æä½ ä»è¿ç¯åé¡¾ä¸­åªå¸¦èµ°ä¸ä»¶äºï¼é£å°±æ¯ property hooksââä½è¦å¸¦çæå¾ä½¿ç¨ï¼</p>
<ul>
<li>ç¨å®ä»¬åä¸åéãè§èååå¹²åçæ´¾çå¼ï¼</li>
<li>æå®ä»¬åéå¯¹ç§°å¯è§æ§éå¯¹åå®ç¨ç DTOï¼</li>
<li>è®© hooks ä¿ææ èï¼å¾å¥½çæ¹åï¼ã</li>
</ul>
<p>è¿ä¸ªç»åè®©ä½ ä»å¤©å°±ææ´å¹²åç 8.4 ä»£ç åºââä»¥ååå¤å¥½æ¶éå¾ 8.5 çæ´å¹³æ»è·¯å¾ã</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-13 07:17">2026-01-13 07:17</span>&nbsp;
<a href="https://www.cnblogs.com/catchadmin">JaguarJack</a>&nbsp;
éè¯»(<span id="post_view_count">5</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19474910);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19474910', targetLink: 'https://www.cnblogs.com/catchadmin/p/19474910', title: '2026 å¹´ PHP 8.4 ä¾ç¶éè¦ï¼è·³å° 8.5 ä¹åä½ è¯¥ææ¡çç¹æ§' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ç¡¬æ ¸å®ç¨ï¼Windowsä¸ä½¿ç¨ PowerShell ç¼åå±åç½è®¾å¤æ«æå¨ ]]></title>
    <link>https://www.cnblogs.com/zjw-blog/p/19474721</link>
    <guid>1217ae8d20af4f4c953d08dac6d6f5a7</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/zjw-blog/p/19474721" title="åå¸äº 2026-01-13 03:29">
    <span role="heading" aria-level="2">ç¡¬æ ¸å®ç¨ï¼Windowsä¸ä½¿ç¨ PowerShell ç¼åå±åç½è®¾å¤æ«æå¨</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h3 id="åè¨">åè¨</h3>
<p>å¨è¿è¡ç½ç»è°è¯æè®¾å¤ç®¡çæ¶ï¼æä»¬ç»å¸¸éè¦ç¥éå±åç½åæåªäºè®¾å¤å¨çº¿ãä¼ ç»ç <code>ping</code> å½ä»¤éä¸ªæ«æå¤ªæ¢ï¼èä¸ä¸çæ«æå·¥å·åæ¾å¾å¤§æå°ç¨ãä»å¤©ï¼æä»¬éè¿ä¸æ®µ PowerShell èæ¬ï¼å©ç¨ç½ç»åè®®çåºå±ç¹æ§ï¼æé ä¸ä¸ªå±åç½æ«æå·¥å·ã</p>
<hr>
<h3 id="åçåæä¸ºä»ä¹è¿ä¸ªèæ¬æ¯æ®é-ping-æ´å¿«æ´å">åçåæï¼ä¸ºä»ä¹è¿ä¸ªèæ¬æ¯æ®é Ping æ´å¿«ãæ´åï¼</h3>
<p>å¤§å¤æ°äººè®¤ä¸ºæ«æå±åç½å°±æ¯ç®åå°ç»æ¯ä¸ª IP åé Ping åãä½è¿ç§æ¹å¼æä¸¤å¤§å¼ç«¯ï¼</p>
<ol>
<li><strong>æçä½</strong>ï¼ç­å¾ä¸å¨çº¿çè®¾å¤è¶æ¶ä¼èè´¹å¤§éæ¶é´ã</li>
<li><strong>ä¸åç¡®</strong>ï¼è®¸å¤è®¾å¤ï¼å¦å¼å¯é²ç«å¢ç Windows çµèï¼ä¼ç¦æ ICMP åæ¾ï¼å¯¼è´ææå¨çº¿å´æ¾ç¤ºâç¦»çº¿âã</li>
</ol>
<p>æ¬èæ¬éç¨äº <strong>âå¼æ­¥æ¢æµ + ARP è¡¨è§£æâ</strong> çåéæºå¶ï¼å¶å·¥ä½åçæµç¨å¾å¦ä¸ï¼</p>
<h4 id="1-å¼æ­¥æ¢æµasynchronous-probing">1. å¼æ­¥æ¢æµï¼Asynchronous Probingï¼</h4>
<p>èæ¬å¹¶æ²¡æç­å¾æ¯ä¸ä¸ª Ping çç»æãå®ä½¿ç¨ <code>SendPingAsync</code> åç½æ®µåçææ 254 ä¸ª IP å°åå¿«éæåºæ¢æµåã</p>
<ul>
<li><strong>ç®ç</strong>ï¼æä»¬å¹¶ä¸å¨ä¹è¿äºåæ¯å¦ççæ¶å°äºåå¤ï¼å¶çæ­£çç®çæ¯<strong>è§¦åæä½ç³»ç»ç ARP å¹¿æ­</strong>ã</li>
</ul>
<h4 id="2-arp-åè®®çå¦ç¨">2. ARP åè®®çå¦ç¨</h4>
<p>å½ä½ ççµèå°è¯åå±åç½åæä¸ª IP åéæ°æ®æ¶ï¼å®é¦åéè¦ç¥éå¯¹æ¹ç MAC å°åï¼ç©çå°åï¼ãå³ä¾¿å¯¹æ¹é²ç«å¢æ¦æªäº Ping åï¼åªè¦è¯¥è®¾å¤å­å¨ï¼å®éå¸¸ä¹ä¼å¯¹ ARP è¯·æ±ååºååºã</p>
<ul>
<li><strong>ARP è¡¨</strong>ï¼ä¸æ¦è®¾å¤ååºï¼å®ç IP å MAC å°åå°±ä¼è¢«è®°å½å¨æä½ç³»ç»ç ARP ç¼å­è¡¨ä¸­ã</li>
</ul>
<h4 id="3-ç¶æå¤å®ç®æ³">3. ç¶æå¤å®ç®æ³</h4>
<p>èæ¬éè¿ <code>Get-NetNeighbor</code> æ£æ¥ç³»ç»ç ARP è®°å½ï¼å°ç¶æåä¸ºä¸ç±»å¤å®ï¼</p>
<ul>
<li><strong>Ping å¨çº¿</strong>ï¼è®¾å¤ååºäº ICMPã</li>
<li><strong>ARP å¨çº¿</strong>ï¼è®¾å¤è½ä¸ååº Pingï¼ä½å¨ ARP è¡¨ä¸­ç¶æä¸º <code>Reachable</code> æ <code>Stale</code>ã</li>
<li><strong>ç¦»çº¿</strong>ï¼ARP è¡¨æ è®°å½ææ¾ç¤ºç¼å­å¤±æã</li>
</ul>
<hr>
<h3 id="å®æ´ä»£ç ">å®æ´ä»£ç </h3>
<details>
<summary>ç¹å»æ¥ç PowerShell èæ¬ä»£ç </summary>
<pre><code class="language-bash">Write-Host "==========================================" -ForegroundColor Green
Write-Host "         å±åç½è®¾å¤æ«æå¨         " -ForegroundColor Green
Write-Host "==========================================" -ForegroundColor Green

# -----------------------------
# å¨çº¿æ£æµå½æ°ï¼æ ¸å¿ï¼
# -----------------------------
function Test-DeviceOnline {
    param([string]$IP)
    $arp = Get-NetNeighbor -IPAddress $IP -ErrorAction SilentlyContinue
    if (-not $arp) {
        return @{ Online = $false; Reason = "æ ARP" }
    }
    if ($arp.State -in 'Reachable','Stale','Delay','Probe') {
        if (Test-Connection $IP -Count 1 -Quiet -ErrorAction SilentlyContinue) {
            return @{ Online = $true; Reason = "Ping" }
        }
        return @{ Online = $true; Reason = "ARPå¨çº¿" }
    }
    return @{ Online = $false; Reason = "ç¼å­å¤±æ" }
}

# -----------------------------
# 1. è·å IPv4 ç½å¡
# -----------------------------
$adapters = Get-NetIPAddress -AddressFamily IPv4 |
Where-Object {
    $_.IPAddress -notmatch '^127\.|^169\.254\.' -and
    $_.PrefixLength -eq 24
}

if (-not $adapters) {
    Write-Host "æªåç°å¯ç¨ IPv4 ç½å¡" -ForegroundColor Red
    Read-Host
    exit
}

# -----------------------------
# 2. çæç½æ®µ
# -----------------------------
$networks = $adapters.IPAddress |
ForEach-Object {
    if ($_ -match '^(\d+\.\d+\.\d+)\.\d+$') {
        "$($Matches[1]).0/24"
    }
} | Select-Object -Unique

# -----------------------------
# 3. éæ©ç½æ®µ
# -----------------------------
if ($networks.Count -eq 1) {
    $network = $networks[0]
    Write-Host "`nä»æ£æµå°ä¸ä¸ªç½æ®µï¼èªå¨ä½¿ç¨ï¼$network" -ForegroundColor Yellow
}
else {
    do {
        Write-Host "`næ£æµå°å¤ä¸ªç½æ®µï¼è¯·éæ©è¦æ«æçç½æ®µï¼" -ForegroundColor Cyan
        for ($i = 0; $i -lt $networks.Count; $i++) {
            Write-Host "[$($i + 1)] $($networks[$i])"
        }

        $choice = Read-Host "è¯·è¾å¥ç¼å· (1-$($networks.Count))"
        $valid  = [int]::TryParse($choice, [ref]$null) -and
                  $choice -ge 1 -and
                  $choice -le $networks.Count

        if (-not $valid) {
            Write-Host "è¾å¥æ æï¼è¯·éæ°éæ©ã" -ForegroundColor Red
        }
    } until ($valid)

    $network = $networks[$choice - 1]
}

$prefix = $network -replace '\.0/24',''

# -----------------------------
# 4. å¿«éå»ºç« ARP è¡¨
# -----------------------------
Write-Host "`n[1/2] æ­£å¨åç½æ®µ $network åéæ¢æµå (Ping)..." -ForegroundColor Cyan
foreach ($i in 1..254) {
    $p = New-Object System.Net.NetworkInformation.Ping
    [void]$p.SendPingAsync("$prefix.$i", 800)
}
Start-Sleep -Seconds 1

# -----------------------------
# 5. è·åæ¬æº IP â MAC
# -----------------------------
$localMapping = @{}
Get-NetIPAddress -AddressFamily IPv4 |
Where-Object { $_.IPAddress -notmatch '^127\.|^169\.254\.' } |
ForEach-Object {
    $adapter = Get-NetAdapter -InterfaceIndex $_.InterfaceIndex -ErrorAction SilentlyContinue
    if ($adapter) {
        $localMapping[$_.IPAddress] = $adapter.MacAddress.Replace("-", ":").ToUpper()
    }
}

# -----------------------------
# 6. è§£æ ARP è¡¨
# -----------------------------
$arpRegex = '(?&lt;IP&gt;\d{1,3}(\.\d{1,3}){3})\s+(?&lt;MAC&gt;([0-9a-f]{2}[:-]){5}[0-9a-f]{2})'
$globalArp = arp -a

$potentialIPs = @()
foreach ($line in $globalArp) {
    if ($line -match $arpRegex) {
        $ip  = $Matches.IP
        $mac = $Matches.MAC.ToUpper().Replace("-", ":")

        if ($ip.StartsWith("$prefix.") -and
            -not $localMapping.ContainsKey($ip) -and
            $ip -notmatch '\.255$') {

            $potentialIPs += [PSCustomObject]@{
                IP  = $ip
                MAC = $mac
            }
        }
    }
}

# -----------------------------
# 7. æå»ºç»æ
# -----------------------------
$finalList = @()

# æ¬æº
foreach ($ip in $localMapping.Keys) {
    if ($ip.StartsWith("$prefix.")) {
        $finalList += [PSCustomObject]@{
            IP       = "$ip*"
            MAC      = $localMapping[$ip]
            IsOnline = $true
            Reason   = "æ¬æº"
            RawIP    = $ip
        }
    }
}

Write-Host "[2/2] æ­£å¨å¤æ­è®¾å¤å¨çº¿ç¶æ..." -ForegroundColor Cyan

foreach ($dev in $potentialIPs | Select-Object -Unique IP, MAC) {
    $result = Test-DeviceOnline $dev.IP
    $finalList += [PSCustomObject]@{
        IP       = $dev.IP
        MAC      = $dev.MAC
        IsOnline = $result.Online
        Reason   = $result.Reason
        RawIP    = $dev.IP
    }
}

# -----------------------------
# 8. è¾åº
# -----------------------------
Write-Host "`n============== æ«æç»æ ==============" -ForegroundColor Cyan

$sorted = $finalList | Sort-Object {[version]$_.RawIP}

foreach ($item in $sorted) {
    $status = if ($item.IsOnline) {
		switch ($item.Reason) {
			"Ping"     { "å¨çº¿" }
			"ARPå¨çº¿"  { "å¨çº¿ï¼æªååº Pingï¼" }
			"æ¬æº"     { "æ¬æº" }
			default    { "å¨çº¿" }
		}
	} else {
		switch ($item.Reason) {
			"ç¼å­å¤±æ" { "ç¦»çº¿ï¼ç¼å­å¤±æï¼" }
			default    { "ç¦»çº¿" }
		}
	}


    $line = "{0,-20} {1,-22} {2}" -f $item.IP, $item.MAC, $status

    if ($item.IsOnline) {
        Write-Host $line -ForegroundColor Green
    } else {
        Write-Host $line -ForegroundColor DarkGray
    }
}

$online = ($finalList | Where-Object { $_.IsOnline }).Count
$total  = $finalList.Count

Write-Host "`næ«æå®æï¼$online / $total å°è®¾å¤å¨çº¿" -ForegroundColor Green
Write-Host "`næä»»æé®éåº..."
$null = [System.Console]::ReadKey()
</code></pre>
</details>
<h3 id="æ ¸å¿ä»£ç äº®ç¹è¯´æ">æ ¸å¿ä»£ç äº®ç¹è¯´æ</h3>
<h4 id="ç½æ®µèªå¨è¯å«">ç½æ®µèªå¨è¯å«</h4>
<p>èæ¬ä¼èªå¨æé¤ <code>127.0.0.1</code>ï¼åç¯å°åï¼å <code>169.254.x.x</code>ï¼èªå¨ç§æ IPï¼ï¼å¹¶æºè½è¯å«å½åæ´»è·çç½æ®µï¼æ éç¨æ·æå¨è¾å¥ IP èå´ã</p>
<h4 id="ç»æç¾åè¾åº">ç»æç¾åè¾åº</h4>
<p>ä¸ºäºæåä½¿ç¨ä½éªï¼èæ¬ä½¿ç¨äºæ ¼å¼åæä½ç¬¦ <code>-f</code>ï¼</p>
<pre><code class="language-bash">$line = "{0,-20} {1,-22} {2}" -f $item.IP, $item.MAC, $status
</code></pre>
<p>å®å¯ä»¥ç¡®ä¿è¾åºç IPãMAC å°ååç¶æå¨æ§å¶å°ä¸­å®ç¾å¯¹é½ï¼å¹¶ä½¿ç¨ç»¿è²ï¼å¨çº¿ï¼åç°è²ï¼ç¦»çº¿ï¼è¿è¡è§è§åºåã</p>
<hr>
<h3 id="å¦ä½ä½¿ç¨">å¦ä½ä½¿ç¨ï¼</h3>
<ol>
<li>å°èæ¬ä»£ç ç²è´´è¿ç¼è¾å¨ï¼æä¿å­ä¸º <code>.ps1</code> æä»¶ï¼,ç¼ç <code>UTF8 BOM</code>ãä¹å¯éè¿<a href="https://files.cnblogs.com/files/zjw-blog/LANScanner%E5%B1%80%E5%9F%9F%E7%BD%91%E6%89%AB%E6%8F%8F%E5%99%A8.zip" target="_blank">LANScannerå±åç½æ«æå¨.zip</a>é¾æ¥è¿è¡ä¸è½½</li>
<li>ä½¿ç¨powershell.exeè¿è¡ï¼å»ºè®®ä½¿ç¨powershell<a href="https://www.cnblogs.com/zjw-blog/p/19449891" target="_blank">æä»¶å³è</a>åç´æ¥è¿è¡ã</li>
</ol>
<h3 id="è¿è¡æªå¾">è¿è¡æªå¾</h3>
<p><img src="https://img2024.cnblogs.com/blog/1745057/202601/1745057-20260113032751492-35872645.png" alt="å¾ç" loading="lazy"></p>
<h3 id="æ»ç»">æ»ç»</h3>
<p>è¿ä¸ªèæ¬ä¸ä»æ¯ä¸ä¸ªå·¥å·ï¼æ´æ¯å¯¹ <strong>Layer 2ï¼æ°æ®é¾è·¯å±ï¼</strong> å <strong>Layer 3ï¼ç½ç»å±ï¼</strong> ååå·¥ä½çä¸æ¬¡å®è·µãéè¿å©ç¨ç³»ç»åºå±ç ARP ç¼å­ï¼æä»¬å®ç°äºæ¯ä¼ ç»æ«æå¨æ´é«æãæ´å·ç©¿éåçæ¢æµææã</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.006944444444444444" data-date-updated="2026-01-13 03:39">2026-01-13 03:29</span>&nbsp;
<a href="https://www.cnblogs.com/zjw-blog">é¨ä¸­éæ³</a>&nbsp;
éè¯»(<span id="post_view_count">201</span>)&nbsp;
è¯è®º(<span id="post_comment_count">1</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19474721);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19474721', targetLink: 'https://www.cnblogs.com/zjw-blog/p/19474721', title: 'ç¡¬æ ¸å®ç¨ï¼Windowsä¸ä½¿ç¨ PowerShell ç¼åå±åç½è®¾å¤æ«æå¨' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ .NET ç£çç®¡ç-ææ¯æ¹æ¡éå ]]></title>
    <link>https://www.cnblogs.com/kybs0/p/19473484</link>
    <guid>ae5e2d66d51b941bdd17307ab0e5e253</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/kybs0/p/19473484" title="åå¸äº 2026-01-12 23:50">
    <span role="heading" aria-level="2">.NET ç£çç®¡ç-ææ¯æ¹æ¡éå</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>å¨å®¶åº­ä»¥åä¼ä¸åºæ¯ä¸çç½ç»ç£çäº§åï¼ä½¿ç¨Iscsiåéè¦å¯¹ç£çè¿è¡ç®¡çãä¸åWindowsçæ¬ãå®è£ç¬¬ä¸æ¹è½¯ä»¶ï¼å¯¼è´æ¯ä¸ªCç«¯ç¨æ·çè¿è¡ç¯å¢ä¸åï¼å¯¹ç£ççç®¡çå¸¦æ¥ä¸å®çä½¿ç¨å¹²æ°</p>
<p>æ¬æä»ç»ä¸ç£çç®¡ççå ç§æ¹æ¡ä»¥åå­å¨çä¸äºé®é¢</p>
<p>å¯¹ç£çç®¡çä¸»è¦æä»¥ä¸æä½å¥å£/æ¹å¼ï¼</p>
<ol>
<li>Powershell</li>
<li>Diskpart</li>
<li>WMI</li>
<li>WIN32(IOCTL)</li>
</ol>
<p>ä¸é¢ä»ç»ä¸åèä¹é´çå³ç³»ä»¥åæä¾èµçwindowsç³»ç»æå¡</p>
<h1>Windowsç£çç®¡çæå¡ä¾èµå±çº§</h1>
<p>ä»æä½ç³»ç»è§åº¦çï¼è¿å ç§æ¹å¼ç¼ç¨/æä½å¥å£æ¯å´ç»åä¸å¥åæ ¸ä¸æå¡å æ çä¸åâå£³âï¼å®æ<strong>å¥å¨å°è£</strong></p>
<p>ä»é«å°ä½ï¼ä¾æ¬¡åä¸windowsä¸»è¦çç£çç¸å³å¥å£åæå¡</p>
<p>1. GUI/å·¥å·å±</p>
<p>MMC -&nbsp;Windowsç³»ç»ç£çç®¡çå·¥å·ï¼å¦æéè¦å¿«éæ¥çåæä½ç£çååºçè¯ï¼å¯ä»¥ç¨è¿ä¸ª</p>
<p><img src="https://img2024.cnblogs.com/blog/685541/202601/685541-20260112154249299-1528163380.png" alt="image" width="529" height="270" loading="lazy"></p>
<p>ä»¥åStorage Spaces GUI - Windowsç³»ç»è®¾ç½®å­å¨ç®¡ç</p>
<p><img src="https://img2024.cnblogs.com/blog/685541/202601/685541-20260112154850543-1013979831.png" alt="image" width="533" height="306" loading="lazy"><img src="https://img2024.cnblogs.com/blog/685541/202601/685541-20260112155107194-71293024.png" alt="image" width="403" height="305" loading="lazy"></p>
<p>è¿ä¿©ä¸ªå·¥å·ä¸»è¦æ¯ä½¿ç¨WMIç¸å³æä½æ¥å®ç°</p>
<p>2. èæ¬/å½ä»¤å±</p>
<p>Powershellç£çç®¡çå½ä»¤</p>
<p>diskpartç£çç®¡çå½ä»¤</p>
<p>CIMç£çç®¡çå½ä»¤</p>
<p>3. API/ç®¡çæ¥å£å±</p>
<p>WMIæå¡ï¼Winmgmtï¼Windows Management Instrumentationï¼ï¼ä½¿ç¨Win32_DiskDrive ç­</p>
<p><img src="https://img2024.cnblogs.com/blog/685541/202601/685541-20260112181124821-2050380879.png" alt="image" loading="lazy"></p>
<p>ç£çç®¡çæå¡ï¼Virtual Diskï¼VDSè¿ç¨åç§°vds.exe</p>
<p><img src="https://img2024.cnblogs.com/blog/685541/202601/685541-20260112180656866-1672546299.png" alt="image" loading="lazy"></p>
<p>ç£çå­å¨æå¡ï¼Microsoft Storage Spaces SMP</p>
<p><img src="https://img2024.cnblogs.com/blog/685541/202601/685541-20260112163817548-1975243303.png" alt="image" loading="lazy"></p>
<p>4. åæ ¸/é©±å¨/IOCTLå±</p>
<p>Storage Management Providerï¼ç³»ç»ç»ä»¶ï¼ä¸æ¯åç¬æå¡å¯è§<br>IOCTLï¼ Win32APIãDevicerIoControl</p>
<p>ç£çç±»é©±å¨ï¼disk.sysï¼ãå·ç®¡çå¨ï¼volmgr/vdsciï¼ãæä»¶ç³»ç»é©±å¨ï¼NTFS/ReFSï¼</p>
<p><strong>èä¸é¢è¯´çåç§æ¹æ¡ï¼ä¾èµçåºå±æå¡ï¼</strong></p>
<p>PowerShell åºäº WMI / Storage Management APIå°è£ï¼ä¾èµçç»ä»¶æå¤ï¼WinmgmtãMicrosoft Storage Spaces SMPãStorage ServiceãVDSç­<br>WMI/CIM æé¨åæ¯èµ° VDS / Storage APIï¼æé¨åç´æ¥è°ç¨åºå±é©±å¨ï¼ä¸»è¦ä¾èµï¼Winmgmtæå¡</p>
<p>diskpart åé¨æ¯è°ç¨ VDS / Storage API / IOCTLï¼ä¾èµç¸å¯¹è¾å°ï¼VDSæå¡ç­</p>
<p>Win32 IOCTL æ¯æåºå±ï¼ç¨æ·æå¯è¾¾ï¼çæ¥å£ï¼ä¸ä¾èµä¸å±æ¡æ¶</p>
<p>æ¯å¦ä¸æ¹çWMIæå¡ä¸å­å¨ï¼ä¼å¯¼è´powershellç£çæ¥è¯¢ä¸å°ï¼WMIç£çæ¥è¯¢ä¸å°ï¼ä½diskpartè®¿é®æ­£å¸¸ï¼</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)"> 1</span> PS C:\Users\yudong04&gt; G<span style="color: rgba(0, 0, 255, 1)">et-Disk</span>
<span style="color: rgba(0, 128, 128, 1)"> 2</span> PS C:\Users\yudong04&gt; <span style="color: rgba(0, 0, 255, 1)">Get-CimInstance</span> -Namespace root/Microsoft/Windows/Storage -<span style="color: rgba(0, 0, 0, 1)">ClassName MSFT_Disk
</span><span style="color: rgba(0, 128, 128, 1)"> 3</span> PS C:\Users\yudong04&gt;<span style="color: rgba(0, 0, 0, 1)"> diskpart
</span><span style="color: rgba(0, 128, 128, 1)"> 4</span> 
<span style="color: rgba(0, 128, 128, 1)"> 5</span> Microsoft DiskPart çæ¬ 10.0.26100.1150
<span style="color: rgba(0, 128, 128, 1)"> 6</span> 
<span style="color: rgba(0, 128, 128, 1)"> 7</span> <span style="color: rgba(0, 0, 0, 1)">Copyright (C) Microsoft Corporation.
</span><span style="color: rgba(0, 128, 128, 1)"> 8</span> å¨è®¡ç®æºä¸: GIH-D-24762
<span style="color: rgba(0, 128, 128, 1)"> 9</span> 
<span style="color: rgba(0, 128, 128, 1)">10</span> DISKPART&gt;<span style="color: rgba(0, 0, 0, 1)"> list disk
</span><span style="color: rgba(0, 128, 128, 1)">11</span> 
<span style="color: rgba(0, 128, 128, 1)">12</span>   ç£ç <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)">##  ç¶æ           å¤§å°     å¯ç¨     Dyn  Gpt</span>
<span style="color: rgba(0, 128, 128, 1)">13</span>   --------  -------------  -------  -------  ---  ---
<span style="color: rgba(0, 128, 128, 1)">14</span>   ç£ç 0    èæº             3726 GB  1024 KB        *
<span style="color: rgba(0, 128, 128, 1)">15</span>   ç£ç 1    èæº             3726 GB  1024 KB        *
<span style="color: rgba(0, 128, 128, 1)">16</span>   ç£ç 2    èæº             2794 GB      0 B        *
<span style="color: rgba(0, 128, 128, 1)">17</span>   ç£ç 3    èæº              931 GB      0 B        *
<span style="color: rgba(0, 128, 128, 1)">18</span>   ç£ç 4    èæº              465 GB  1024 KB        *
<span style="color: rgba(0, 128, 128, 1)">19</span>   ç£ç 5    èæº             1863 GB      0<span style="color: rgba(0, 0, 0, 1)"> B
</span><span style="color: rgba(0, 128, 128, 1)">20</span>   ç£ç 6    èæº             7452 GB      0 B        *</pre>
</div>
<p><span style="font-size: 14px">è¿æMicrosoft Storage Spaces SMPæå¡è¢«ç¬¬ä¸æ¹è½¯ä»¶ç¦ç¨ï¼å¯¼è´Powershell Get-Diskè·åç»æä¸ºç©ºï¼</span></p>
<p><img src="https://img2024.cnblogs.com/blog/685541/202601/685541-20260112205453476-213941181.png" alt="image" width="1009" height="554" loading="lazy"></p>
<p><span style="font-size: 14px">ä¸é¢å¯¹åä¸ªæ¨¡åå±å¼ä»ç»ä¸</span></p>
<h1>Powershellç£çç®¡ç</h1>
<p>ä¸é¢è¯´äºï¼PowerShellä½¿ç¨ Storage Management API + æ°ç WMI/CIM ç±»ï¼ç£çå½ä»¤æ¬è´¨æ¯å¯¹è¿äº WMI ç±»çåè£ãå±çº§å¦ä¸ï¼</p>
<p>PowerShell cmdlet<br>-&gt; MSFT_* WMI ç±» (CIM)ãWMIæå¡Winmgmt<br>-&gt; Storage Management Provider<br>-&gt; åæ ¸é©±å¨ (disk.sys, partmgr.sys, volmgr.sys)<br>-&gt; è®¾å¤ç¡¬ä»¶</p>
<p>powershellæä»¥ä¸æ¥æ¾ä¸»è¦å½ä»¤ï¼</p>
<p>Get-Disk - æ¥æ¾ç£ç</p>
<p>Get-Partition - æ¥æ¾ååº</p>
<p>Get-Volume - æ¥æ¾å·</p>
<p>Get-Disk | Where-Object -FilterScript {&nbsp; $_.BusType -Eq "iSCSI" -and $_.SerialNumber -Eq "8fa461f8-9436-4260-8191-789b23859757"} - æ¥æ¾æå®Iscsiåè®®ç£ç</p>
<p><img src="https://img2024.cnblogs.com/blog/685541/202601/685541-20260112162810665-890504091.png" alt="image" loading="lazy"></p>
<p>æä½ç£çå½ä»¤ï¼æ¯å¦åå§åGPTç£çï¼Initialize-Disk -PartitionStyle GPT -PassThru | New-Partition -UseMaximumSize | Format-Volume -FileSystem:NTFS -NewFileSystemLabel:æµè¯ç -Confirm:$false -Force</p>
<p>Powershellå½ä»¤å æç¨æ§ï¼éå¸¸éåèæ¬èªå¨åãç¨æ·çº§çä½¿ç¨ãä½éå¸¸ä¸ç¨æ·ç¯å¢æå³ï¼æ¢ä¸ªç¨æ·ææ¢å°æºå¨å°±ç»å¸¸è¡¨ç°ä¸åï¼æ¯å¦ï¼å¡å¾ä¹ãè¶æ¶ãç´æ¥æ¥éãç£ççå°±æ¯æ¥è¯¢ä¸å°</p>
<p>å ä¸ªåå ï¼</p>
<p>WMI / CIM è°ç¨è¶æ¶</p>
<ul>
<li>WMI æå¡å¡ä½ãå­å¨é©±å¨ååºæ¢</li>
<li>ç½ç»/é²ç«å¢å¯¼è´è¿ç¨è°ç¨è¶æ¶</li>










</ul>
<p>ç¡¬ä»¶IOè¶æ¶</p>
<ul>
<li>åç / å U ç / USB æ©å±åè´¨éé®é¢</li>
<li>å¤§ééæ°å°è¯ I/O å¯¼è´æä½æ´ä½æå¾å¾é¿</li>









</ul>
<p>å·ä½åºæ¯ï¼åç°å¬å¸åé¨æä¸ªé¨é¨åçpowershellå½ä»¤è¶æ¶æ¦çå¾å¤ï¼å ä¸ºè¿äºè®¾å¤é½å¨è·è½¯ä»¶ååæµè¯ãããå¯¼è´ç£çè·åå½ä»¤ï¼å¾å®¹æè¶æ¶</p>
<p>è¿æäºç¹æ®æåµï¼æå¡å¼å¸¸åºç°çæåµæ¯è¾å¤ãå¦WMIæå¡ï¼ä»¥ä¸æ¯ä¿®å¤æåæ¡ä¾ï¼</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)"> 1</span> PS C:\Users\yudong04&gt; <span style="color: rgba(0, 0, 255, 1)">Get-WmiObject</span><span style="color: rgba(0, 0, 0, 1)"> Win32_OperatingSystem
</span><span style="color: rgba(0, 128, 128, 1)"> 2</span> <span style="color: rgba(0, 0, 255, 1)">Get-WmiObject</span><span style="color: rgba(0, 0, 0, 1)"> : æ æç±» âWin32_OperatingSystemâ
</span><span style="color: rgba(0, 128, 128, 1)"> 3</span> æå¨ä½ç½® è¡:1 å­ç¬¦: 1
<span style="color: rgba(0, 128, 128, 1)"> 4</span> + <span style="color: rgba(0, 0, 255, 1)">Get-WmiObject</span><span style="color: rgba(0, 0, 0, 1)"> Win32_OperatingSystem
</span><span style="color: rgba(0, 128, 128, 1)"> 5</span> +<span style="color: rgba(0, 0, 0, 1)"> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
</span><span style="color: rgba(0, 128, 128, 1)"> 6</span>     + CategoryInfo          : InvalidType: (:) [<span style="color: rgba(0, 0, 255, 1)">Get-WmiObject</span><span style="color: rgba(0, 0, 0, 1)">], ManagementException
</span><span style="color: rgba(0, 128, 128, 1)"> 7</span>     +<span style="color: rgba(0, 0, 0, 1)"> FullyQualifiedErrorId : GetWMIManagementException,Microsoft.PowerShell.Commands.GetWmiObjectCommand
</span><span style="color: rgba(0, 128, 128, 1)"> 8</span> 
<span style="color: rgba(0, 128, 128, 1)"> 9</span> PS C:\Users\yudong04&gt; net stop winmgmt /<span style="color: rgba(0, 0, 0, 1)">y
</span><span style="color: rgba(0, 128, 128, 1)">10</span> <span style="color: rgba(0, 0, 0, 1)">Windows Management Instrumentation æå¡æ­£å¨åæ­¢.
</span><span style="color: rgba(0, 128, 128, 1)">11</span> <span style="color: rgba(0, 0, 0, 1)">Windows Management Instrumentation æå¡å·²æååæ­¢ã
</span><span style="color: rgba(0, 128, 128, 1)">12</span> 
<span style="color: rgba(0, 128, 128, 1)">13</span> PS C:\Users\yudong04&gt; winmgmt /<span style="color: rgba(0, 0, 0, 1)">resetrepository
</span><span style="color: rgba(0, 128, 128, 1)">14</span> <span style="color: rgba(0, 0, 0, 1)">WMI å­å¨åºå·²éç½®
</span><span style="color: rgba(0, 128, 128, 1)">15</span> 
<span style="color: rgba(0, 128, 128, 1)">16</span> PS C:\Users\yudong04&gt; <span style="color: rgba(0, 0, 255, 1)">Get-WmiObject</span><span style="color: rgba(0, 0, 0, 1)"> Win32_OperatingSystem
</span><span style="color: rgba(0, 128, 128, 1)">17</span> 
<span style="color: rgba(0, 128, 128, 1)">18</span> 
<span style="color: rgba(0, 128, 128, 1)">19</span> <span style="color: rgba(0, 0, 0, 1)">SystemDirectory : C:\WINDOWS\system32
</span><span style="color: rgba(0, 128, 128, 1)">20</span> <span style="color: rgba(0, 0, 0, 1)">Organization    : Online Game Dept
</span><span style="color: rgba(0, 128, 128, 1)">21</span> BuildNumber     : 26100
<span style="color: rgba(0, 128, 128, 1)">22</span> <span style="color: rgba(0, 0, 0, 1)">RegisteredUser  : Windows ç¨æ·
</span><span style="color: rgba(0, 128, 128, 1)">23</span> SerialNumber    : 00329-00000-00003-<span style="color: rgba(0, 0, 0, 1)">AA238
</span><span style="color: rgba(0, 128, 128, 1)">24</span> Version         : 10.0.26100</pre>
</div>
<p>è¿æMicrosoft Storage Spaces SMPæå¡ï¼å¦æGet-Diskæ¿ä¸å°ç£çï¼å®ä½å®¢æ·é®é¢åç°å¾å¤§å¯è½æ¯è¿ä¸ªæå¡å¼å¸¸äºãéå¯ä¸ä¸å³å¯</p>
<h1>WMI/CIMç£çç®¡ç</h1>
<p>WMIç¸å³å½ä»¤ï¼éè¦æåä¸ºä¿©é¨åï¼WIN32_*ç»å¸ç±»ï¼ä»¥åMSFT_*æ°çStorageWMIç±»</p>
<p><strong>ç»å¸ç±»ï¼</strong></p>
<ul>
<li>Win32_DiskDrive</li>
<li>Win32_DiskPartition</li>
<li>Win32_LogicalDisk</li>
<li>Win32_Volume</li>
</ul>
<p>æ©æè®¾è®¡ï¼å¾å¤æ¯éè¿åæ ¸ API + IOCTL å VDS å®ç°ãä¸»è¦ç¨äºæ¥è¯¢ï¼ä¿®æ¹æä½æé</p>
<p>ä¾èµæå¡ï¼WinmgmtãRPCSSï¼RPCæå¡ï¼ãä»¥åå°éä¾èµVDS</p>
<p><strong>StorageWmiç±»</strong></p>
<ul>
<li>MSFT_Disk</li>
<li>MSFT_Partition</li>
<li>MSFT_Volume</li>
<li>MSFT_StoragePool</li>
<li>MSFT_VirtualDisk</li>
</ul>
<p>è¿æ¯Windows8ä¹åçæ°å­å¨ç®¡çWMIæ¥å£ï¼è¯¦è§å®ç½ææ¡£ï¼<a href="https://learn.microsoft.com/en-us/windows-hardware/drivers/storage/storage-management-api-classes" rel="noopener nofollow">Storage Management API Classes - Windows drivers | Microsoft Learn</a>, ä¾èµå±çº§ï¼</p>
<p>WMI (MSFT_* ç±»)<br>  -&gt; Storage Management Provider<br>     -&gt; IOCTL -&gt; disk.sys / partmgr.sys / ...</p>
<p>å·ä½ä¾èµçæå¡ï¼Winmgmtï¼WMI æå¡ï¼</p>
<p>WMI æ¯âç®¡çæ°æ®æ¨¡å + æ¥å£âï¼æ¬èº«ä¸æ¯ä¸ä¸ªç£çç®¡çâæ¹æ¡âï¼èæ¯å¾å¤æ¹æ¡çåºç¡æ¥å£ãç¸å¯¹Powershell Storageç®¡çï¼ç®æ¯æ¯è¾ç¨³å®åä¾èµè¾å°çäº</p>
<p>ç´æ¥ä½¿ç¨.NETéè¿WMIè·åè¯¦ç»çç£çåè¡¨æ°æ®ï¼ä»£ç å¦ä¸ï¼</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)"> 1</span>     <span style="color: rgba(0, 0, 255, 1)">public</span> OperateResult&lt;List&lt;LocalDisk&gt;&gt;<span style="color: rgba(0, 0, 0, 1)"> GetDisks()
</span><span style="color: rgba(0, 128, 128, 1)"> 2</span> <span style="color: rgba(0, 0, 0, 1)">    {
</span><span style="color: rgba(0, 128, 128, 1)"> 3</span>         <span style="color: rgba(0, 0, 255, 1)">var</span> disks = <span style="color: rgba(0, 0, 255, 1)">new</span> List&lt;LocalDisk&gt;<span style="color: rgba(0, 0, 0, 1)">();
</span><span style="color: rgba(0, 128, 128, 1)"> 4</span>         <span style="color: rgba(0, 0, 255, 1)">try</span>
<span style="color: rgba(0, 128, 128, 1)"> 5</span> <span style="color: rgba(0, 0, 0, 1)">        {
</span><span style="color: rgba(0, 128, 128, 1)"> 6</span>             <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Win32_DiskDrive: ç©çç£ç</span>
<span style="color: rgba(0, 128, 128, 1)"> 7</span>             <span style="color: rgba(0, 0, 255, 1)">using</span> (<span style="color: rgba(0, 0, 255, 1)">var</span> searcher = <span style="color: rgba(0, 0, 255, 1)">new</span> ManagementObjectSearcher(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">SELECT * FROM Win32_DiskDrive</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">))
</span><span style="color: rgba(0, 128, 128, 1)"> 8</span>             <span style="color: rgba(0, 0, 255, 1)">using</span> (<span style="color: rgba(0, 0, 255, 1)">var</span> driveCollection =<span style="color: rgba(0, 0, 0, 1)"> searcher.Get())
</span><span style="color: rgba(0, 128, 128, 1)"> 9</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)">10</span>                 <span style="color: rgba(0, 0, 255, 1)">foreach</span> (ManagementObject drive <span style="color: rgba(0, 0, 255, 1)">in</span><span style="color: rgba(0, 0, 0, 1)"> driveCollection)
</span><span style="color: rgba(0, 128, 128, 1)">11</span> <span style="color: rgba(0, 0, 0, 1)">                {
</span><span style="color: rgba(0, 128, 128, 1)">12</span>                     <span style="color: rgba(0, 0, 255, 1)">var</span> diskInfo = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> LocalDisk();
</span><span style="color: rgba(0, 128, 128, 1)">13</span> 
<span style="color: rgba(0, 128, 128, 1)">14</span>                     <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 1. ç£çç¼å· PhysicalDriveN
</span><span style="color: rgba(0, 128, 128, 1)">15</span>                     <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Win32_DiskDrive.DeviceID ä¸è¬ä¸º "\\.\PHYSICALDRIVE0"</span>
<span style="color: rgba(0, 128, 128, 1)">16</span>                     <span style="color: rgba(0, 0, 255, 1)">var</span> deviceId = (drive[<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">DeviceID</span><span style="color: rgba(128, 0, 0, 1)">"</span>] <span style="color: rgba(0, 0, 255, 1)">as</span> <span style="color: rgba(0, 0, 255, 1)">string</span>) ?? <span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)">.Empty;
</span><span style="color: rgba(0, 128, 128, 1)">17</span>                     <span style="color: rgba(0, 0, 255, 1)">var</span> diskNumber =<span style="color: rgba(0, 0, 0, 1)"> ParsePhysicalDriveNumber(deviceId);
</span><span style="color: rgba(0, 128, 128, 1)">18</span>                     diskInfo.Number =<span style="color: rgba(0, 0, 0, 1)"> diskNumber;
</span><span style="color: rgba(0, 128, 128, 1)">19</span> 
<span style="color: rgba(0, 128, 128, 1)">20</span>                     <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 2. åºåå· (ä¸åååæ ¼å¼ä¸ç»ä¸ï¼ææ¶éè¦ Win32_PhysicalMedia)</span>
<span style="color: rgba(0, 128, 128, 1)">21</span>                     diskInfo.SerialNumber = (drive[<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">SerialNumber</span><span style="color: rgba(128, 0, 0, 1)">"</span>] <span style="color: rgba(0, 0, 255, 1)">as</span> <span style="color: rgba(0, 0, 255, 1)">string</span>)?.Trim() ?? <span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)">.Empty;
</span><span style="color: rgba(0, 128, 128, 1)">22</span> 
<span style="color: rgba(0, 128, 128, 1)">23</span>                     <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 3. DeviceName</span>
<span style="color: rgba(0, 128, 128, 1)">24</span>                     diskInfo.DeviceName = (drive[<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Model</span><span style="color: rgba(128, 0, 0, 1)">"</span>] <span style="color: rgba(0, 0, 255, 1)">as</span> <span style="color: rgba(0, 0, 255, 1)">string</span>)?.Trim() ?? <span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)">.Empty;
</span><span style="color: rgba(0, 128, 128, 1)">25</span> 
<span style="color: rgba(0, 128, 128, 1)">26</span>                     <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 4. åªè¯»/å¨çº¿ç¶æï¼WMI å¹¶æ²¡æéå¸¸æ åçå­æ®µï¼è¿éç¨ç²ç¥æ å°ï¼
</span><span style="color: rgba(0, 128, 128, 1)">27</span>                     <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">   Win32_DiskDrive.Status: "OK" / "Error" / "Degraded" ...</span>
<span style="color: rgba(0, 128, 128, 1)">28</span>                     diskInfo.IsOffline =<span style="color: rgba(0, 0, 0, 1)"> GetOffline(diskNumber);
</span><span style="color: rgba(0, 128, 128, 1)">29</span> 
<span style="color: rgba(0, 128, 128, 1)">30</span>                     <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æ²¡æç´æ¥ readonly æ è®°ï¼åé»è®¤ä¸º falseï¼
</span><span style="color: rgba(0, 128, 128, 1)">31</span>                     <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> å¦éæ´ç²¾ç¡®å¯ä»¥éè¿ Win32_Volume æ DeviceIoControl è·åã</span>
<span style="color: rgba(0, 128, 128, 1)">32</span>                     diskInfo.IsReadOnly =<span style="color: rgba(0, 0, 0, 1)"> GetReadonly(diskNumber);
</span><span style="color: rgba(0, 128, 128, 1)">33</span> 
<span style="color: rgba(0, 128, 128, 1)">34</span>                     <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 5. æ»çº¿ç±»åï¼æ²¡æ STORAGE_BUS_TYPE æä¸¾ï¼ä½¿ç¨ InterfaceType ç²ç¥æ å°ï¼</span>
<span style="color: rgba(0, 128, 128, 1)">35</span>                     <span style="color: rgba(0, 0, 255, 1)">var</span> interfaceType = (drive[<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">InterfaceType</span><span style="color: rgba(128, 0, 0, 1)">"</span>] <span style="color: rgba(0, 0, 255, 1)">as</span> <span style="color: rgba(0, 0, 255, 1)">string</span>)?<span style="color: rgba(0, 0, 0, 1)">.Trim();
</span><span style="color: rgba(0, 128, 128, 1)">36</span>                     diskInfo.BusType =<span style="color: rgba(0, 0, 0, 1)"> MapBusType(interfaceType, diskInfo.DeviceName);
</span><span style="color: rgba(0, 128, 128, 1)">37</span> 
<span style="color: rgba(0, 128, 128, 1)">38</span>                     <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 6. ç£çå®¹é (å­è -&gt; GB)
</span><span style="color: rgba(0, 128, 128, 1)">39</span>                     <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Win32_DiskDrive.Size ä¸ºå­èæ°ï¼stringï¼</span>
<span style="color: rgba(0, 128, 128, 1)">40</span>                     <span style="color: rgba(0, 0, 255, 1)">if</span> (drive[<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Size</span><span style="color: rgba(128, 0, 0, 1)">"</span>] != <span style="color: rgba(0, 0, 255, 1)">null</span> &amp;&amp; <span style="color: rgba(0, 0, 255, 1)">long</span>.TryParse(drive[<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Size</span><span style="color: rgba(128, 0, 0, 1)">"</span>].ToString(), <span style="color: rgba(0, 0, 255, 1)">out</span> <span style="color: rgba(0, 0, 255, 1)">long</span><span style="color: rgba(0, 0, 0, 1)"> sizeBytes))
</span><span style="color: rgba(0, 128, 128, 1)">41</span> <span style="color: rgba(0, 0, 0, 1)">                    {
</span><span style="color: rgba(0, 128, 128, 1)">42</span>                         diskInfo.DiskSize =<span style="color: rgba(0, 0, 0, 1)"> sizeBytes;
</span><span style="color: rgba(0, 128, 128, 1)">43</span> <span style="color: rgba(0, 0, 0, 1)">                    }
</span><span style="color: rgba(0, 128, 128, 1)">44</span> 
<span style="color: rgba(0, 128, 128, 1)">45</span>                     <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 7. è·åæè½½ç¹åå·²ç¨å®¹éï¼éè¿ 3 å¼  WMI å³èè¡¨ï¼
</span><span style="color: rgba(0, 128, 128, 1)">46</span>                     <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Win32_DiskDrive -&gt; Win32_DiskDriveToDiskPartition -&gt; Win32_DiskPartition -&gt;
</span><span style="color: rgba(0, 128, 128, 1)">47</span>                     <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Win32_LogicalDiskToPartition -&gt; Win32_LogicalDisk</span>
<span style="color: rgba(0, 128, 128, 1)">48</span> <span style="color: rgba(0, 0, 0, 1)">                    FillMountPathsAndUsedSize(diskInfo, drive);
</span><span style="color: rgba(0, 128, 128, 1)">49</span> <span style="color: rgba(0, 0, 0, 1)">                    disks.Add(diskInfo);
</span><span style="color: rgba(0, 128, 128, 1)">50</span> 
<span style="color: rgba(0, 128, 128, 1)">51</span>                     diskInfo.Tag =<span style="color: rgba(0, 0, 0, 1)"> GetVolumeLabel(diskInfo.MountPaths.FirstOrDefault());
</span><span style="color: rgba(0, 128, 128, 1)">52</span> <span style="color: rgba(0, 0, 0, 1)">                }
</span><span style="color: rgba(0, 128, 128, 1)">53</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)">54</span> 
<span style="color: rgba(0, 128, 128, 1)">55</span>             <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;List&lt;LocalDisk&gt;&gt;.ToSuccess(disks.OrderBy(i =&gt;<span style="color: rgba(0, 0, 0, 1)"> i.Number).ToList());
</span><span style="color: rgba(0, 128, 128, 1)">56</span> <span style="color: rgba(0, 0, 0, 1)">        }
</span><span style="color: rgba(0, 128, 128, 1)">57</span>         <span style="color: rgba(0, 0, 255, 1)">catch</span><span style="color: rgba(0, 0, 0, 1)"> (Exception ex)
</span><span style="color: rgba(0, 128, 128, 1)">58</span> <span style="color: rgba(0, 0, 0, 1)">        {
</span><span style="color: rgba(0, 128, 128, 1)">59</span>             <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;List&lt;LocalDisk&gt;&gt;<span style="color: rgba(0, 0, 0, 1)">.ToError(ex.Message);
</span><span style="color: rgba(0, 128, 128, 1)">60</span> <span style="color: rgba(0, 0, 0, 1)">        }
</span><span style="color: rgba(0, 128, 128, 1)">61</span>     }</pre>
</div>
<p>éå¸¦çä¸äºå±æ§è·åå½æ°ï¼</p>
<div class="cnblogs_code"><img src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" id="code_img_closed_ac2201cc-0955-4850-bc5f-4794df011a32" class="code_img_closed"><img src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" id="code_img_opened_ac2201cc-0955-4850-bc5f-4794df011a32" class="code_img_opened" style="display: none">
<div id="cnblogs_code_open_ac2201cc-0955-4850-bc5f-4794df011a32" class="cnblogs_code_hide">
<pre><span style="color: rgba(0, 128, 128, 1)">  1</span>     <span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">int</span> ParsePhysicalDriveNumber(<span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)"> deviceId)
</span><span style="color: rgba(0, 128, 128, 1)">  2</span> <span style="color: rgba(0, 0, 0, 1)">    {
</span><span style="color: rgba(0, 128, 128, 1)">  3</span>         <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> "\\.\PHYSICALDRIVE0" -&gt; 0</span>
<span style="color: rgba(0, 128, 128, 1)">  4</span>         <span style="color: rgba(0, 0, 255, 1)">if</span> (<span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)">.IsNullOrWhiteSpace(deviceId))
</span><span style="color: rgba(0, 128, 128, 1)">  5</span>             <span style="color: rgba(0, 0, 255, 1)">return</span> -<span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">  6</span> 
<span style="color: rgba(0, 128, 128, 1)">  7</span>         <span style="color: rgba(0, 0, 255, 1)">var</span> upper =<span style="color: rgba(0, 0, 0, 1)"> deviceId.ToUpperInvariant();
</span><span style="color: rgba(0, 128, 128, 1)">  8</span>         <span style="color: rgba(0, 0, 255, 1)">var</span> idx = upper.LastIndexOf(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">PHYSICALDRIVE</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, StringComparison.Ordinal);
</span><span style="color: rgba(0, 128, 128, 1)">  9</span>         <span style="color: rgba(0, 0, 255, 1)">if</span> (idx &lt; <span style="color: rgba(128, 0, 128, 1)">0</span>) <span style="color: rgba(0, 0, 255, 1)">return</span> -<span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)"> 10</span> 
<span style="color: rgba(0, 128, 128, 1)"> 11</span>         <span style="color: rgba(0, 0, 255, 1)">var</span> numPart = upper.Substring(idx + <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">PHYSICALDRIVE</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">.Length);
</span><span style="color: rgba(0, 128, 128, 1)"> 12</span>         <span style="color: rgba(0, 0, 255, 1)">if</span> (<span style="color: rgba(0, 0, 255, 1)">int</span>.TryParse(numPart, NumberStyles.Integer, CultureInfo.InvariantCulture, <span style="color: rgba(0, 0, 255, 1)">out</span> <span style="color: rgba(0, 0, 255, 1)">var</span><span style="color: rgba(0, 0, 0, 1)"> num))
</span><span style="color: rgba(0, 128, 128, 1)"> 13</span>             <span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> num;
</span><span style="color: rgba(0, 128, 128, 1)"> 14</span> 
<span style="color: rgba(0, 128, 128, 1)"> 15</span>         <span style="color: rgba(0, 0, 255, 1)">return</span> -<span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)"> 16</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)"> 17</span> 
<span style="color: rgba(0, 128, 128, 1)"> 18</span>     <span style="color: rgba(0, 0, 255, 1)">private</span> StorageBusType MapBusType(<span style="color: rgba(0, 0, 255, 1)">string</span> interfaceType, <span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)"> deviceName)
</span><span style="color: rgba(0, 128, 128, 1)"> 19</span> <span style="color: rgba(0, 0, 0, 1)">    {
</span><span style="color: rgba(0, 128, 128, 1)"> 20</span>         <span style="color: rgba(0, 0, 255, 1)">if</span> (<span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)">.IsNullOrEmpty(interfaceType))
</span><span style="color: rgba(0, 128, 128, 1)"> 21</span>             <span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> StorageBusType.Unknown;
</span><span style="color: rgba(0, 128, 128, 1)"> 22</span> 
<span style="color: rgba(0, 128, 128, 1)"> 23</span>         <span style="color: rgba(0, 0, 255, 1)">switch</span><span style="color: rgba(0, 0, 0, 1)"> (interfaceType.ToUpperInvariant())
</span><span style="color: rgba(0, 128, 128, 1)"> 24</span> <span style="color: rgba(0, 0, 0, 1)">        {
</span><span style="color: rgba(0, 128, 128, 1)"> 25</span>             <span style="color: rgba(0, 0, 255, 1)">case</span> <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">SCSI</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">:
</span><span style="color: rgba(0, 128, 128, 1)"> 26</span>                 <span style="color: rgba(0, 0, 255, 1)">if</span> (deviceName.Contains(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">SCSI</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">))
</span><span style="color: rgba(0, 128, 128, 1)"> 27</span> <span style="color: rgba(0, 0, 0, 1)">                {
</span><span style="color: rgba(0, 128, 128, 1)"> 28</span>                     <span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> StorageBusType.Iscsi;
</span><span style="color: rgba(0, 128, 128, 1)"> 29</span> <span style="color: rgba(0, 0, 0, 1)">                }
</span><span style="color: rgba(0, 128, 128, 1)"> 30</span>                 <span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> StorageBusType.Scsi;
</span><span style="color: rgba(0, 128, 128, 1)"> 31</span>             <span style="color: rgba(0, 0, 255, 1)">case</span> <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">IDE</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">:
</span><span style="color: rgba(0, 128, 128, 1)"> 32</span>             <span style="color: rgba(0, 0, 255, 1)">case</span> <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ATA</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">:
</span><span style="color: rgba(0, 128, 128, 1)"> 33</span>                 <span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> StorageBusType.Ata;
</span><span style="color: rgba(0, 128, 128, 1)"> 34</span>             <span style="color: rgba(0, 0, 255, 1)">case</span> <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">USB</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">:
</span><span style="color: rgba(0, 128, 128, 1)"> 35</span>                 <span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> StorageBusType.Usb;
</span><span style="color: rgba(0, 128, 128, 1)"> 36</span>             <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> å¯æ ¹æ®éè¦æ©å±æ å°</span>
<span style="color: rgba(0, 128, 128, 1)"> 37</span>             <span style="color: rgba(0, 0, 255, 1)">default</span><span style="color: rgba(0, 0, 0, 1)">:
</span><span style="color: rgba(0, 128, 128, 1)"> 38</span>                 <span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> StorageBusType.Unknown;
</span><span style="color: rgba(0, 128, 128, 1)"> 39</span> <span style="color: rgba(0, 0, 0, 1)">        }
</span><span style="color: rgba(0, 128, 128, 1)"> 40</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)"> 41</span> 
<span style="color: rgba(0, 128, 128, 1)"> 42</span>     <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
<span style="color: rgba(0, 128, 128, 1)"> 43</span>     <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> å¡«å MountPathsï¼çç¬¦ï¼å DiskUsedSizeï¼GBï¼
</span><span style="color: rgba(0, 128, 128, 1)"> 44</span>     <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
<span style="color: rgba(0, 128, 128, 1)"> 45</span>     <span style="color: rgba(0, 0, 255, 1)">private</span><span style="color: rgba(0, 0, 0, 1)"> OperateResult FillMountPathsAndUsedSize(LocalDisk diskInfo, ManagementObject diskDrive)
</span><span style="color: rgba(0, 128, 128, 1)"> 46</span> <span style="color: rgba(0, 0, 0, 1)">    {
</span><span style="color: rgba(0, 128, 128, 1)"> 47</span>         <span style="color: rgba(0, 0, 255, 1)">long</span> totalUsedBytes = <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)"> 48</span> 
<span style="color: rgba(0, 128, 128, 1)"> 49</span>         <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> éè¿ Win32_DiskDriveToDiskPartition å³èå°ååº</span>
<span style="color: rgba(0, 128, 128, 1)"> 50</span>         <span style="color: rgba(0, 0, 255, 1)">using</span> (<span style="color: rgba(0, 0, 255, 1)">var</span> partitionRel = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> ManagementObjectSearcher(
</span><span style="color: rgba(0, 128, 128, 1)"> 51</span>                    <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ASSOCIATORS OF {Win32_DiskDrive.DeviceID='</span><span style="color: rgba(128, 0, 0, 1)">"</span> + diskDrive[<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">DeviceID</span><span style="color: rgba(128, 0, 0, 1)">"</span>] +
<span style="color: rgba(0, 128, 128, 1)"> 52</span>                    <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">'} WHERE AssocClass = Win32_DiskDriveToDiskPartition</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">))
</span><span style="color: rgba(0, 128, 128, 1)"> 53</span>         <span style="color: rgba(0, 0, 255, 1)">using</span> (<span style="color: rgba(0, 0, 255, 1)">var</span> partitions =<span style="color: rgba(0, 0, 0, 1)"> partitionRel.Get())
</span><span style="color: rgba(0, 128, 128, 1)"> 54</span> <span style="color: rgba(0, 0, 0, 1)">        {
</span><span style="color: rgba(0, 128, 128, 1)"> 55</span>             <span style="color: rgba(0, 0, 255, 1)">foreach</span> (ManagementObject partition <span style="color: rgba(0, 0, 255, 1)">in</span><span style="color: rgba(0, 0, 0, 1)"> partitions)
</span><span style="color: rgba(0, 128, 128, 1)"> 56</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)"> 57</span>                 <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> éè¿ Win32_LogicalDiskToPartition å³èå°é»è¾ç£çï¼çç¬¦ï¼</span>
<span style="color: rgba(0, 128, 128, 1)"> 58</span>                 <span style="color: rgba(0, 0, 255, 1)">using</span> (<span style="color: rgba(0, 0, 255, 1)">var</span> logicalRel = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> ManagementObjectSearcher(
</span><span style="color: rgba(0, 128, 128, 1)"> 59</span>                            <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ASSOCIATORS OF {Win32_DiskPartition.DeviceID='</span><span style="color: rgba(128, 0, 0, 1)">"</span> + partition[<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">DeviceID</span><span style="color: rgba(128, 0, 0, 1)">"</span>] +
<span style="color: rgba(0, 128, 128, 1)"> 60</span>                            <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">'} WHERE AssocClass = Win32_LogicalDiskToPartition</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">))
</span><span style="color: rgba(0, 128, 128, 1)"> 61</span>                 <span style="color: rgba(0, 0, 255, 1)">using</span> (<span style="color: rgba(0, 0, 255, 1)">var</span> logicalDisks =<span style="color: rgba(0, 0, 0, 1)"> logicalRel.Get())
</span><span style="color: rgba(0, 128, 128, 1)"> 62</span> <span style="color: rgba(0, 0, 0, 1)">                {
</span><span style="color: rgba(0, 128, 128, 1)"> 63</span>                     <span style="color: rgba(0, 0, 255, 1)">foreach</span> (ManagementObject logicalDisk <span style="color: rgba(0, 0, 255, 1)">in</span><span style="color: rgba(0, 0, 0, 1)"> logicalDisks)
</span><span style="color: rgba(0, 128, 128, 1)"> 64</span> <span style="color: rgba(0, 0, 0, 1)">                    {
</span><span style="color: rgba(0, 128, 128, 1)"> 65</span>                         <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> è®¡ç®å·²ç¨ç©ºé´</span>
<span style="color: rgba(0, 128, 128, 1)"> 66</span>                         <span style="color: rgba(0, 0, 255, 1)">if</span> (logicalDisk[<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Size</span><span style="color: rgba(128, 0, 0, 1)">"</span>] != <span style="color: rgba(0, 0, 255, 1)">null</span> &amp;&amp;
<span style="color: rgba(0, 128, 128, 1)"> 67</span>                             logicalDisk[<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">FreeSpace</span><span style="color: rgba(128, 0, 0, 1)">"</span>] != <span style="color: rgba(0, 0, 255, 1)">null</span> &amp;&amp;
<span style="color: rgba(0, 128, 128, 1)"> 68</span>                             <span style="color: rgba(0, 0, 255, 1)">long</span>.TryParse(logicalDisk[<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Size</span><span style="color: rgba(128, 0, 0, 1)">"</span>].ToString(), <span style="color: rgba(0, 0, 255, 1)">out</span> <span style="color: rgba(0, 0, 255, 1)">long</span> volSize) &amp;&amp;
<span style="color: rgba(0, 128, 128, 1)"> 69</span>                             <span style="color: rgba(0, 0, 255, 1)">long</span>.TryParse(logicalDisk[<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">FreeSpace</span><span style="color: rgba(128, 0, 0, 1)">"</span>].ToString(), <span style="color: rgba(0, 0, 255, 1)">out</span> <span style="color: rgba(0, 0, 255, 1)">long</span><span style="color: rgba(0, 0, 0, 1)"> free))
</span><span style="color: rgba(0, 128, 128, 1)"> 70</span> <span style="color: rgba(0, 0, 0, 1)">                        {
</span><span style="color: rgba(0, 128, 128, 1)"> 71</span>                             totalUsedBytes += (volSize -<span style="color: rgba(0, 0, 0, 1)"> free);
</span><span style="color: rgba(0, 128, 128, 1)"> 72</span> <span style="color: rgba(0, 0, 0, 1)">                        }
</span><span style="color: rgba(0, 128, 128, 1)"> 73</span> <span style="color: rgba(0, 0, 0, 1)">                    }
</span><span style="color: rgba(0, 128, 128, 1)"> 74</span> <span style="color: rgba(0, 0, 0, 1)">                }
</span><span style="color: rgba(0, 128, 128, 1)"> 75</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)"> 76</span> <span style="color: rgba(0, 0, 0, 1)">        }
</span><span style="color: rgba(0, 128, 128, 1)"> 77</span> 
<span style="color: rgba(0, 128, 128, 1)"> 78</span>         diskInfo.DiskUsedSize =<span style="color: rgba(0, 0, 0, 1)">totalUsedBytes;
</span><span style="color: rgba(0, 128, 128, 1)"> 79</span> 
<span style="color: rgba(0, 128, 128, 1)"> 80</span>         <span style="color: rgba(0, 0, 255, 1)">try</span>
<span style="color: rgba(0, 128, 128, 1)"> 81</span> <span style="color: rgba(0, 0, 0, 1)">        {
</span><span style="color: rgba(0, 128, 128, 1)"> 82</span>             <span style="color: rgba(0, 0, 255, 1)">var</span> paths =<span style="color: rgba(0, 0, 0, 1)"> GetAccessPaths(diskInfo.Number);
</span><span style="color: rgba(0, 128, 128, 1)"> 83</span>             <span style="color: rgba(0, 0, 255, 1)">var</span> filtedPaths = paths.Where(i =&gt; !i.StartsWith(<span style="color: rgba(128, 0, 0, 1)">@"</span><span style="color: rgba(128, 0, 0, 1)">\\?\Volume</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">)).ToList();
</span><span style="color: rgba(0, 128, 128, 1)"> 84</span>             diskInfo.MountPaths =<span style="color: rgba(0, 0, 0, 1)"> filtedPaths;
</span><span style="color: rgba(0, 128, 128, 1)"> 85</span>             <span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> OperateResult.ToSuccess();
</span><span style="color: rgba(0, 128, 128, 1)"> 86</span> <span style="color: rgba(0, 0, 0, 1)">        }
</span><span style="color: rgba(0, 128, 128, 1)"> 87</span>         <span style="color: rgba(0, 0, 255, 1)">catch</span><span style="color: rgba(0, 0, 0, 1)"> (Exception e)
</span><span style="color: rgba(0, 128, 128, 1)"> 88</span> <span style="color: rgba(0, 0, 0, 1)">        {
</span><span style="color: rgba(0, 128, 128, 1)"> 89</span>            <span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> OperateResult.ToError(e);
</span><span style="color: rgba(0, 128, 128, 1)"> 90</span> <span style="color: rgba(0, 0, 0, 1)">        }
</span><span style="color: rgba(0, 128, 128, 1)"> 91</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)"> 92</span>     <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
<span style="color: rgba(0, 128, 128, 1)"> 93</span>     <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> è·åç£ççææè®¿é®è·¯å¾
</span><span style="color: rgba(0, 128, 128, 1)"> 94</span>     <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
<span style="color: rgba(0, 128, 128, 1)"> 95</span>     <span style="color: rgba(0, 0, 255, 1)">private</span> List&lt;<span style="color: rgba(0, 0, 255, 1)">string</span>&gt; GetAccessPaths(<span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> diskNumber)
</span><span style="color: rgba(0, 128, 128, 1)"> 96</span> <span style="color: rgba(0, 0, 0, 1)">    {
</span><span style="color: rgba(0, 128, 128, 1)"> 97</span>         ManagementScope scope = <span style="color: rgba(0, 0, 255, 1)">new</span> ManagementScope(<span style="color: rgba(128, 0, 0, 1)">@"</span><span style="color: rgba(128, 0, 0, 1)">\\.\root\Microsoft\Windows\Storage</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)"> 98</span> <span style="color: rgba(0, 0, 0, 1)">        scope.Connect();
</span><span style="color: rgba(0, 128, 128, 1)"> 99</span>         <span style="color: rgba(0, 0, 255, 1)">string</span> query = $<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">SELECT * FROM MSFT_Partition WHERE DiskNumber = {diskNumber}</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">100</span>         <span style="color: rgba(0, 0, 255, 1)">using</span> ManagementObjectSearcher searcher = <span style="color: rgba(0, 0, 255, 1)">new</span> ManagementObjectSearcher(scope, <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> ObjectQuery(query));
</span><span style="color: rgba(0, 128, 128, 1)">101</span>         <span style="color: rgba(0, 0, 255, 1)">var</span> pathList = <span style="color: rgba(0, 0, 255, 1)">new</span> List&lt;<span style="color: rgba(0, 0, 255, 1)">string</span>&gt;<span style="color: rgba(0, 0, 0, 1)">();
</span><span style="color: rgba(0, 128, 128, 1)">102</span>         <span style="color: rgba(0, 0, 255, 1)">foreach</span> (<span style="color: rgba(0, 0, 255, 1)">var</span> partition <span style="color: rgba(0, 0, 255, 1)">in</span> searcher.Get().Cast&lt;ManagementObject&gt;<span style="color: rgba(0, 0, 0, 1)">())
</span><span style="color: rgba(0, 128, 128, 1)">103</span> <span style="color: rgba(0, 0, 0, 1)">        {
</span><span style="color: rgba(0, 128, 128, 1)">104</span>             <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> è·å AccessPaths å±æ§ï¼æ°ç»ï¼</span>
<span style="color: rgba(0, 128, 128, 1)">105</span>             <span style="color: rgba(0, 0, 255, 1)">var</span> accessPaths = partition[<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">AccessPaths</span><span style="color: rgba(128, 0, 0, 1)">"</span>] <span style="color: rgba(0, 0, 255, 1)">as</span> <span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)">[];
</span><span style="color: rgba(0, 128, 128, 1)">106</span>             <span style="color: rgba(0, 0, 255, 1)">if</span> (accessPaths == <span style="color: rgba(0, 0, 255, 1)">null</span><span style="color: rgba(0, 0, 0, 1)">)
</span><span style="color: rgba(0, 128, 128, 1)">107</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)">108</span>                 <span style="color: rgba(0, 0, 255, 1)">continue</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">109</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)">110</span> <span style="color: rgba(0, 0, 0, 1)">            pathList.AddRange(accessPaths);
</span><span style="color: rgba(0, 128, 128, 1)">111</span> <span style="color: rgba(0, 0, 0, 1)">        }
</span><span style="color: rgba(0, 128, 128, 1)">112</span>         <span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> pathList;
</span><span style="color: rgba(0, 128, 128, 1)">113</span>     }</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>éåç£çåè¡¨ï¼4åçèæ¶æ¥è¿1sï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/685541/202601/685541-20260112202253746-677311477.png" alt="image" loading="lazy"></p>
<h1>DiskPartç£çç®¡ç</h1>
<p>diskpart æ¯ åç Win32 å½ä»¤è¡å·¥å·ï¼åé¨å¤§è´éè¿ï¼</p>
<ul>
<li>VDS / Storage Management APIï¼èç³»ç»ï¼</li>
<li>æ°ç³»ç»ä¸ï¼ä¸é¨ååè½ç±æ°ç Storage API æ¥ç®¡</li>
<li>åå¾ä¸è¿æ¯ IOCTL è°ç¨åæ ¸é©±å¨</li>
</ul>
<p>è°ç¨å±çº§å¦ä¸ï¼diskpart.exe<br>  -&gt; VDS / Storage Management API<br>     -&gt; åæ ¸é©±å¨ (disk.sys, partmgr.sys, volmgr.sys)<br>        -&gt; è®¾å¤ç¡¬ä»¶</p>
<p>diskpartå¸¸ç¨å½ä»¤åè¡¨ï¼</p>
<ul>
<li>list disk</li>
<li>select disk 1</li>
<li>detail disk</li>
<li>list partition</li>
<li>list volume</li>









</ul>
<p><img src="https://img2024.cnblogs.com/blog/685541/202601/685541-20260112202413306-148039174.png" alt="image" loading="lazy"></p>
<p>DiskPartå¯¹WMIå¹¶ä¸å¼ºä¾èµï¼åºæ¬ä¸ä¾èµæå¡å°±ä¸ä¸ªVirtual Diskäºï¼æä½ä¹æ¯è¾ç®åãä½ç¼ºç¹ä¹æ¯è¾ææ¾ï¼è®¿é®æ§è½æ¯è¾å·®ãç£çæä½ä½¿ç¨Powersehellè°ç¨diskpartå½ä»¤åºæ¬ä¹å¨sçº§ä»¥ä¸</p>
<h1>Win32 IOCTLç£çç®¡ç</h1>
<p>IOCTLæ¯æéè¿ç´æ¥è°ç¨ Windows API DeviceIoControl å¯¹ç£çãå·ãæä»¶å¥æåéæ§å¶ç ï¼</p>
<ul>
<li>IOCTL_DISK_*</li>
<li>IOCTL_STORAGE_*</li>
<li>FSCTL_*ï¼éå¯¹æä»¶ç³»ç»ï¼</li>









</ul>
<p>IOCTLææ¡£ï¼<a href="https://learn.microsoft.com/zh-cn/windows/win32/api/ioapiset/nf-ioapiset-deviceiocontrol" rel="noopener nofollow">deviceIoControl å½æ° (ioapiset.h) - Win32 apps | Microsoft Learn</a>ã<a href="https://learn.microsoft.com/zh-cn/windows/win32/api/winioctl/" rel="noopener nofollow">Winioctl.h æ å¤´ - Win32 apps | Microsoft Learn</a></p>
<p>ç£çç®¡çè¯¦ç»ææ¡£ï¼<a href="https://learn.microsoft.com/zh-cn/windows/win32/fileio/disk-management" rel="noopener nofollow">ç£çç®¡ç - Win32 apps | Microsoft Learn</a></p>
<p>WIN32æ¹æ¡ï¼ä¸ä¾èµ VDS / WMI ç­ä¸å±æ¡æ¶</p>
<p>ä»ä¾èµï¼</p>
<ul>
<li>Win32 å­ç³»ç» + åæ ¸ I/O æ </li>
<li>å¯¹åºçè®¾å¤é©±å¨ï¼disk.sys, storport.sys, nvme.sys ç­ï¼</li>









</ul>
<p>éè¦åºäºWIN32APIä¸å±å±å¤çç»èï¼æ¯å¦è·åç£çåè¡¨ï¼</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)"> 1</span>     <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
<span style="color: rgba(0, 128, 128, 1)"> 2</span>     <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> éè¿ç£çç¼å·è·ååºåå·SerialNumber
</span><span style="color: rgba(0, 128, 128, 1)"> 3</span>     <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
<span style="color: rgba(0, 128, 128, 1)"> 4</span>     <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;param name="diskNumber"&gt;</span><span style="color: rgba(0, 128, 0, 1)">ç£çç¼å·</span><span style="color: rgba(128, 128, 128, 1)">&lt;/param&gt;</span>
<span style="color: rgba(0, 128, 128, 1)"> 5</span>     <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;param name="volumeMaps"&gt;&lt;/param&gt;</span>
<span style="color: rgba(0, 128, 128, 1)"> 6</span>     <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;returns&gt;&lt;/returns&gt;</span>
<span style="color: rgba(0, 128, 128, 1)"> 7</span>     <span style="color: rgba(0, 0, 255, 1)">private</span> OperateResult&lt;LocalDisk&gt; GetDiskInfoByDiskNumber(<span style="color: rgba(0, 0, 255, 1)">int</span> diskNumber, Dictionary&lt;<span style="color: rgba(0, 0, 255, 1)">int</span>, List&lt;<span style="color: rgba(0, 0, 255, 1)">string</span>&gt;&gt;<span style="color: rgba(0, 0, 0, 1)"> volumeMaps)
</span><span style="color: rgba(0, 128, 128, 1)"> 8</span> <span style="color: rgba(0, 0, 0, 1)">    {
</span><span style="color: rgba(0, 128, 128, 1)"> 9</span>         <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">éä¸ªå°è¯ PhysicalDrive0..N</span>
<span style="color: rgba(0, 128, 128, 1)">10</span>         <span style="color: rgba(0, 0, 255, 1)">string</span> physicalDrive = <span style="color: rgba(128, 0, 0, 1)">@"</span><span style="color: rgba(128, 0, 0, 1)">\\.\PhysicalDrive</span><span style="color: rgba(128, 0, 0, 1)">"</span> +<span style="color: rgba(0, 0, 0, 1)"> diskNumber;
</span><span style="color: rgba(0, 128, 128, 1)">11</span>         IntPtr hDisk =<span style="color: rgba(0, 0, 0, 1)"> CreateFile(
</span><span style="color: rgba(0, 128, 128, 1)">12</span> <span style="color: rgba(0, 0, 0, 1)">            physicalDrive,
</span><span style="color: rgba(0, 128, 128, 1)">13</span> <span style="color: rgba(0, 0, 0, 1)">            GENERIC_READ,
</span><span style="color: rgba(0, 128, 128, 1)">14</span>             FILE_SHARE_READ | FILE_SHARE_WRITE |<span style="color: rgba(0, 0, 0, 1)"> FILE_SHARE_DELETE,
</span><span style="color: rgba(0, 128, 128, 1)">15</span> <span style="color: rgba(0, 0, 0, 1)">            IntPtr.Zero,
</span><span style="color: rgba(0, 128, 128, 1)">16</span> <span style="color: rgba(0, 0, 0, 1)">            OPEN_EXISTING,
</span><span style="color: rgba(0, 128, 128, 1)">17</span>             <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">,
</span><span style="color: rgba(0, 128, 128, 1)">18</span> <span style="color: rgba(0, 0, 0, 1)">            IntPtr.Zero);
</span><span style="color: rgba(0, 128, 128, 1)">19</span>         <span style="color: rgba(0, 0, 255, 1)">try</span>
<span style="color: rgba(0, 128, 128, 1)">20</span> <span style="color: rgba(0, 0, 0, 1)">        {
</span><span style="color: rgba(0, 128, 128, 1)">21</span>             <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ä¸å­å¨è¿ä¸ªç©ççï¼æèæ æéï¼,å¿½ç¥æ­¤å¼å¸¸</span>
<span style="color: rgba(0, 128, 128, 1)">22</span>             <span style="color: rgba(0, 0, 255, 1)">if</span> (hDisk ==<span style="color: rgba(0, 0, 0, 1)"> INVALID_HANDLE_VALUE)
</span><span style="color: rgba(0, 128, 128, 1)">23</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)">24</span>                 <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;LocalDisk&gt;<span style="color: rgba(0, 0, 0, 1)">.ToSuccess();
</span><span style="color: rgba(0, 128, 128, 1)">25</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)">26</span>             <span style="color: rgba(0, 0, 255, 1)">var</span> diskInfo = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> LocalDisk();
</span><span style="color: rgba(0, 128, 128, 1)">27</span>             diskInfo.Number =<span style="color: rgba(0, 0, 0, 1)"> diskNumber;
</span><span style="color: rgba(0, 128, 128, 1)">28</span> 
<span style="color: rgba(0, 128, 128, 1)">29</span>             <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">è·åç£çåºç¡ä¿¡æ¯</span>
<span style="color: rgba(0, 128, 128, 1)">30</span>             <span style="color: rgba(0, 0, 255, 1)">var</span> getDiskPropertiesResult =<span style="color: rgba(0, 0, 0, 1)"> GetDiskProperties(hDisk);
</span><span style="color: rgba(0, 128, 128, 1)">31</span>             <span style="color: rgba(0, 0, 255, 1)">if</span> (!<span style="color: rgba(0, 0, 0, 1)">getDiskPropertiesResult.Success)
</span><span style="color: rgba(0, 128, 128, 1)">32</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)">33</span>                 <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;LocalDisk&gt;.ToError($<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Get disk {physicalDrive} properties failed, {getDiskPropertiesResult.Message}</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, getDiskPropertiesResult.Exception, getDiskPropertiesResult.Code);
</span><span style="color: rgba(0, 128, 128, 1)">34</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)">35</span>             <span style="color: rgba(0, 0, 255, 1)">var</span> diskProperties =<span style="color: rgba(0, 0, 0, 1)"> getDiskPropertiesResult.Data;
</span><span style="color: rgba(0, 128, 128, 1)">36</span>             diskInfo.SerialNumber =<span style="color: rgba(0, 0, 0, 1)"> diskProperties.SerialNumber;
</span><span style="color: rgba(0, 128, 128, 1)">37</span>             diskInfo.DeviceName =<span style="color: rgba(0, 0, 0, 1)"> diskProperties.DeviceName;
</span><span style="color: rgba(0, 128, 128, 1)">38</span>             diskInfo.BusType =<span style="color: rgba(0, 0, 0, 1)"> diskProperties.BusType;
</span><span style="color: rgba(0, 128, 128, 1)">39</span> 
<span style="color: rgba(0, 128, 128, 1)">40</span>             <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">æ¯å¦åªè¯»/èæº</span>
<span style="color: rgba(0, 128, 128, 1)">41</span>             <span style="color: rgba(0, 0, 255, 1)">var</span> diskAttributesResult =<span style="color: rgba(0, 0, 0, 1)"> GetDiskAttributes(hDisk);
</span><span style="color: rgba(0, 128, 128, 1)">42</span>             <span style="color: rgba(0, 0, 255, 1)">if</span> (!<span style="color: rgba(0, 0, 0, 1)">diskAttributesResult.Success)
</span><span style="color: rgba(0, 128, 128, 1)">43</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)">44</span>                 <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;LocalDisk&gt;.ToError($<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Get disk {diskProperties.DeviceName} attributes failed, {diskAttributesResult.Message}</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, diskAttributesResult.Exception, diskAttributesResult.Code);
</span><span style="color: rgba(0, 128, 128, 1)">45</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)">46</span>             <span style="color: rgba(0, 0, 255, 1)">var</span> diskStorageAttributes =<span style="color: rgba(0, 0, 0, 1)"> diskAttributesResult.Data;
</span><span style="color: rgba(0, 128, 128, 1)">47</span>             diskInfo.IsReadOnly =<span style="color: rgba(0, 0, 0, 1)"> diskStorageAttributes.IsReadOnly;
</span><span style="color: rgba(0, 128, 128, 1)">48</span>             diskInfo.IsOffline =<span style="color: rgba(0, 0, 0, 1)"> diskStorageAttributes.IsOffline;
</span><span style="color: rgba(0, 128, 128, 1)">49</span> 
<span style="color: rgba(0, 128, 128, 1)">50</span>             <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">ç£çå®¹é</span>
<span style="color: rgba(0, 128, 128, 1)">51</span>             <span style="color: rgba(0, 0, 255, 1)">var</span> getDiskSizeResult =<span style="color: rgba(0, 0, 0, 1)"> GetDiskSize(hDisk);
</span><span style="color: rgba(0, 128, 128, 1)">52</span>             diskInfo.DiskSize =<span style="color: rgba(0, 0, 0, 1)"> getDiskSizeResult.Data;
</span><span style="color: rgba(0, 128, 128, 1)">53</span> 
<span style="color: rgba(0, 128, 128, 1)">54</span>             <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">è·åååºä¿¡æ¯</span>
<span style="color: rgba(0, 128, 128, 1)">55</span>             <span style="color: rgba(0, 0, 255, 1)">var</span> partitionInfoResult =<span style="color: rgba(0, 0, 0, 1)"> GetPartitionInfo(hDisk);
</span><span style="color: rgba(0, 128, 128, 1)">56</span>             <span style="color: rgba(0, 0, 255, 1)">if</span> (!<span style="color: rgba(0, 0, 0, 1)">partitionInfoResult.Success)
</span><span style="color: rgba(0, 128, 128, 1)">57</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)">58</span>                 <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;LocalDisk&gt;.ToError($<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Get disk {diskProperties.DeviceName} partition failed, {partitionInfoResult.Message}</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, partitionInfoResult.Exception, partitionInfoResult.Code);
</span><span style="color: rgba(0, 128, 128, 1)">59</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)">60</span>             <span style="color: rgba(0, 0, 255, 1)">var</span> diskPartitionInfo =<span style="color: rgba(0, 0, 0, 1)"> partitionInfoResult.Data;
</span><span style="color: rgba(0, 128, 128, 1)">61</span>             diskInfo.PartitionStyle =<span style="color: rgba(0, 0, 0, 1)"> (DiskPartitionStyle)diskPartitionInfo.PartitionStyle;
</span><span style="color: rgba(0, 128, 128, 1)">62</span>             diskInfo.PartitionCount =<span style="color: rgba(0, 0, 0, 1)"> diskPartitionInfo.PartitionCount;
</span><span style="color: rgba(0, 128, 128, 1)">63</span>             <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">åºç¡æ°æ®åºåå¤§å°</span>
<span style="color: rgba(0, 128, 128, 1)">64</span>             diskInfo.DiskAllocateSize = diskPartitionInfo.Partitions.FirstOrDefault(i =&gt; i.PartitionType.ToUpper() == <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">EBD0A0A2-B9E5-4433-87C0-68B6B72699C7</span><span style="color: rgba(128, 0, 0, 1)">"</span>)?.PartitionLength ?? <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">65</span> 
<span style="color: rgba(0, 128, 128, 1)">66</span>             <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">æè½½è·¯å¾</span>
<span style="color: rgba(0, 128, 128, 1)">67</span>             <span style="color: rgba(0, 0, 255, 1)">if</span> (volumeMaps.TryGetValue(diskNumber, <span style="color: rgba(0, 0, 255, 1)">out</span> <span style="color: rgba(0, 0, 255, 1)">var</span> mounts) &amp;&amp; mounts != <span style="color: rgba(0, 0, 255, 1)">null</span><span style="color: rgba(0, 0, 0, 1)">)
</span><span style="color: rgba(0, 128, 128, 1)">68</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)">69</span>                 diskInfo.MountPaths =<span style="color: rgba(0, 0, 0, 1)"> mounts;
</span><span style="color: rgba(0, 128, 128, 1)">70</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)">71</span>             <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">è·åå·æ åç§°</span>
<span style="color: rgba(0, 128, 128, 1)">72</span>             <span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)"> (diskInfo.MountPaths.Any())
</span><span style="color: rgba(0, 128, 128, 1)">73</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)">74</span>                 <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">éè¿ä»»æä¸ä¸ªmountPathè·å</span>
<span style="color: rgba(0, 128, 128, 1)">75</span>                 <span style="color: rgba(0, 0, 255, 1)">var</span> mountPath =<span style="color: rgba(0, 0, 0, 1)"> diskInfo.MountPaths.First();
</span><span style="color: rgba(0, 128, 128, 1)">76</span>                 <span style="color: rgba(0, 0, 255, 1)">var</span> getVolumeInfoResult =<span style="color: rgba(0, 0, 0, 1)"> GetVolumeInfo(mountPath);
</span><span style="color: rgba(0, 128, 128, 1)">77</span>                 diskInfo.Tag = getVolumeInfoResult.Data?.VolumeLabel ?? <span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)">.Empty;
</span><span style="color: rgba(0, 128, 128, 1)">78</span>                 diskInfo.FileSystemType = getVolumeInfoResult.Data?.FileSystemType ?? <span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)">.Empty;
</span><span style="color: rgba(0, 128, 128, 1)">79</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)">80</span>             <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">ç£çå·²ä½¿ç¨å¤§å°</span>
<span style="color: rgba(0, 128, 128, 1)">81</span>             <span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)"> (diskInfo.MountPaths.Any())
</span><span style="color: rgba(0, 128, 128, 1)">82</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)">83</span>                 <span style="color: rgba(0, 0, 255, 1)">long</span> diskUsedSize = <span style="color: rgba(128, 0, 128, 1)">0L</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">84</span>                 <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">éè¿ææmountPathç¸å ,è·åç£çå·²ä½¿ç¨å¤§å°</span>
<span style="color: rgba(0, 128, 128, 1)">85</span>                 <span style="color: rgba(0, 0, 255, 1)">foreach</span> (<span style="color: rgba(0, 0, 255, 1)">var</span> mountPath <span style="color: rgba(0, 0, 255, 1)">in</span><span style="color: rgba(0, 0, 0, 1)"> diskInfo.MountPaths)
</span><span style="color: rgba(0, 128, 128, 1)">86</span> <span style="color: rgba(0, 0, 0, 1)">                {
</span><span style="color: rgba(0, 128, 128, 1)">87</span>                     <span style="color: rgba(0, 0, 255, 1)">var</span> usageByMountPathResult =<span style="color: rgba(0, 0, 0, 1)"> GetDiskSizeUsageByMountPath(mountPath);
</span><span style="color: rgba(0, 128, 128, 1)">88</span>                     diskUsedSize += usageByMountPathResult.Data?.UsedBytes ?? <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">89</span> <span style="color: rgba(0, 0, 0, 1)">                }
</span><span style="color: rgba(0, 128, 128, 1)">90</span>                 diskInfo.DiskUsedSize =<span style="color: rgba(0, 0, 0, 1)"> diskUsedSize;
</span><span style="color: rgba(0, 128, 128, 1)">91</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)">92</span>             <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;LocalDisk&gt;<span style="color: rgba(0, 0, 0, 1)">.ToSuccess(diskInfo);
</span><span style="color: rgba(0, 128, 128, 1)">93</span> <span style="color: rgba(0, 0, 0, 1)">        }
</span><span style="color: rgba(0, 128, 128, 1)">94</span>         <span style="color: rgba(0, 0, 255, 1)">finally</span>
<span style="color: rgba(0, 128, 128, 1)">95</span> <span style="color: rgba(0, 0, 0, 1)">        {
</span><span style="color: rgba(0, 128, 128, 1)">96</span> <span style="color: rgba(0, 0, 0, 1)">            CloseHandle(hDisk);
</span><span style="color: rgba(0, 128, 128, 1)">97</span> <span style="color: rgba(0, 0, 0, 1)">        }
</span><span style="color: rgba(0, 128, 128, 1)">98</span>     }</pre>
</div>
<p>å¶ä¸­ç£çå±æ§è·åç»èï¼å°±ä¸å±ç¤ºäºï¼</p>
<div class="cnblogs_code"><img src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" id="code_img_closed_ed064c18-3858-41af-a354-0d53b9fb10bf" class="code_img_closed"><img src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" id="code_img_opened_ed064c18-3858-41af-a354-0d53b9fb10bf" class="code_img_opened" style="display: none">
<div id="cnblogs_code_open_ed064c18-3858-41af-a354-0d53b9fb10bf" class="cnblogs_code_hide">
<pre><span style="color: rgba(0, 128, 128, 1)">  1</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">  2</span>         <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> è·åææç£ç
</span><span style="color: rgba(0, 128, 128, 1)">  3</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">  4</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;returns&gt;&lt;/returns&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">  5</span>         <span style="color: rgba(0, 0, 255, 1)">public</span> OperateResult&lt;List&lt;LocalDisk&gt;&gt;<span style="color: rgba(0, 0, 0, 1)"> GetDisks()
</span><span style="color: rgba(0, 128, 128, 1)">  6</span> <span style="color: rgba(0, 0, 0, 1)">        {
</span><span style="color: rgba(0, 128, 128, 1)">  7</span>             <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 1. åæ¿å· -&gt; å·æå±çç©çç£çå· + çç¬¦/æè½½ç¹</span>
<span style="color: rgba(0, 128, 128, 1)">  8</span>             <span style="color: rgba(0, 0, 255, 1)">var</span> getVolumesResult =<span style="color: rgba(0, 0, 0, 1)"> GetAllVolumeMountPaths();
</span><span style="color: rgba(0, 128, 128, 1)">  9</span>             <span style="color: rgba(0, 0, 255, 1)">if</span> (!<span style="color: rgba(0, 0, 0, 1)">getVolumesResult.Success)
</span><span style="color: rgba(0, 128, 128, 1)"> 10</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)"> 11</span>                 <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;List&lt;LocalDisk&gt;&gt;<span style="color: rgba(0, 0, 0, 1)">.ToError(getVolumesResult.Message, getVolumesResult.Exception, getVolumesResult.Code);
</span><span style="color: rgba(0, 128, 128, 1)"> 12</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)"> 13</span>             <span style="color: rgba(0, 0, 255, 1)">var</span> volumeMaps =<span style="color: rgba(0, 0, 0, 1)"> getVolumesResult.Data;
</span><span style="color: rgba(0, 128, 128, 1)"> 14</span> 
<span style="color: rgba(0, 128, 128, 1)"> 15</span>             <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 2. è·åç£çåè¡¨</span>
<span style="color: rgba(0, 128, 128, 1)"> 16</span>             <span style="color: rgba(0, 0, 255, 1)">var</span> diskList = <span style="color: rgba(0, 0, 255, 1)">new</span> List&lt;LocalDisk&gt;<span style="color: rgba(0, 0, 0, 1)">();
</span><span style="color: rgba(0, 128, 128, 1)"> 17</span>             <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æ ¹æ®å·ä¿¡æ¯æ¨ä¸ä¸ªæå¤§ç£çå·ï¼åæ¶è³å°æ¥è¯¢16 ä¸ª</span>
<span style="color: rgba(0, 128, 128, 1)"> 18</span>             <span style="color: rgba(0, 0, 255, 1)">int</span> maxDiskNumberCount = Math.Max(volumeMaps.Max(i =&gt; i.Key), <span style="color: rgba(128, 0, 128, 1)">16</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)"> 19</span>             <span style="color: rgba(0, 0, 255, 1)">for</span> (<span style="color: rgba(0, 0, 255, 1)">int</span> diskNumber = <span style="color: rgba(128, 0, 128, 1)">0</span>; diskNumber &lt;= maxDiskNumberCount; diskNumber++<span style="color: rgba(0, 0, 0, 1)">)
</span><span style="color: rgba(0, 128, 128, 1)"> 20</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)"> 21</span>                 <span style="color: rgba(0, 0, 255, 1)">var</span> getDiskResult =<span style="color: rgba(0, 0, 0, 1)"> GetDiskInfoByDiskNumber(diskNumber, volumeMaps);
</span><span style="color: rgba(0, 128, 128, 1)"> 22</span>                 <span style="color: rgba(0, 0, 255, 1)">if</span> (!<span style="color: rgba(0, 0, 0, 1)">getDiskResult.Success)
</span><span style="color: rgba(0, 128, 128, 1)"> 23</span> <span style="color: rgba(0, 0, 0, 1)">                {
</span><span style="color: rgba(0, 128, 128, 1)"> 24</span>                     <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">ç»ææ¥è¯¢</span>
<span style="color: rgba(0, 128, 128, 1)"> 25</span>                     <span style="color: rgba(0, 0, 255, 1)">if</span> (diskNumber == maxDiskNumberCount - <span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">)
</span><span style="color: rgba(0, 128, 128, 1)"> 26</span> <span style="color: rgba(0, 0, 0, 1)">                    {
</span><span style="color: rgba(0, 128, 128, 1)"> 27</span>                         <span style="color: rgba(0, 0, 255, 1)">return</span> getDiskResult.ToResult&lt;List&lt;LocalDisk&gt;&gt;<span style="color: rgba(0, 0, 0, 1)">();
</span><span style="color: rgba(0, 128, 128, 1)"> 28</span> <span style="color: rgba(0, 0, 0, 1)">                    }
</span><span style="color: rgba(0, 128, 128, 1)"> 29</span>                     <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">ç»§ç»­æ¥è¯¢å¶å®</span>
<span style="color: rgba(0, 128, 128, 1)"> 30</span>                     <span style="color: rgba(0, 0, 255, 1)">continue</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)"> 31</span> <span style="color: rgba(0, 0, 0, 1)">                }
</span><span style="color: rgba(0, 128, 128, 1)"> 32</span>                 <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">å¯è½ä¸ºç©º</span>
<span style="color: rgba(0, 128, 128, 1)"> 33</span>                 <span style="color: rgba(0, 0, 255, 1)">if</span> (getDiskResult.Data == <span style="color: rgba(0, 0, 255, 1)">null</span><span style="color: rgba(0, 0, 0, 1)">)
</span><span style="color: rgba(0, 128, 128, 1)"> 34</span> <span style="color: rgba(0, 0, 0, 1)">                {
</span><span style="color: rgba(0, 128, 128, 1)"> 35</span>                     <span style="color: rgba(0, 0, 255, 1)">continue</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)"> 36</span> <span style="color: rgba(0, 0, 0, 1)">                }
</span><span style="color: rgba(0, 128, 128, 1)"> 37</span> <span style="color: rgba(0, 0, 0, 1)">                diskList.Add(getDiskResult.Data);
</span><span style="color: rgba(0, 128, 128, 1)"> 38</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)"> 39</span> 
<span style="color: rgba(0, 128, 128, 1)"> 40</span>             <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;List&lt;LocalDisk&gt;&gt;<span style="color: rgba(0, 0, 0, 1)">.ToSuccess(diskList);
</span><span style="color: rgba(0, 128, 128, 1)"> 41</span> <span style="color: rgba(0, 0, 0, 1)">        }
</span><span style="color: rgba(0, 128, 128, 1)"> 42</span> 
<span style="color: rgba(0, 128, 128, 1)"> 43</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
<span style="color: rgba(0, 128, 128, 1)"> 44</span>         <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> è·åææç£çå·çæè½½è·¯å¾ä¿¡æ¯
</span><span style="color: rgba(0, 128, 128, 1)"> 45</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;remarks&gt;</span><span style="color: rgba(0, 128, 0, 1)">éè¿æä¸¾å·ï¼å¹¶ä½¿ç¨ IOCTL_STORAGE_GET_DEVICE_NUMBER æ å°å°è®¾å¤å·ã</span><span style="color: rgba(128, 128, 128, 1)">&lt;/remarks&gt;</span>
<span style="color: rgba(0, 128, 128, 1)"> 46</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
<span style="color: rgba(0, 128, 128, 1)"> 47</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;returns&gt;</span><span style="color: rgba(0, 128, 0, 1)">PhysicalDiskNumber -&gt; å¯¹åºçæææè½½è·¯å¾ï¼çç¬¦ãæè½½ç¹ï¼</span><span style="color: rgba(128, 128, 128, 1)">&lt;/returns&gt;</span>
<span style="color: rgba(0, 128, 128, 1)"> 48</span>         <span style="color: rgba(0, 0, 255, 1)">private</span> OperateResult&lt;Dictionary&lt;<span style="color: rgba(0, 0, 255, 1)">int</span>, List&lt;<span style="color: rgba(0, 0, 255, 1)">string</span>&gt;&gt;&gt;<span style="color: rgba(0, 0, 0, 1)"> GetAllVolumeMountPaths()
</span><span style="color: rgba(0, 128, 128, 1)"> 49</span> <span style="color: rgba(0, 0, 0, 1)">        {
</span><span style="color: rgba(0, 128, 128, 1)"> 50</span>             <span style="color: rgba(0, 0, 255, 1)">var</span> diskDict = <span style="color: rgba(0, 0, 255, 1)">new</span> Dictionary&lt;<span style="color: rgba(0, 0, 255, 1)">int</span>, List&lt;<span style="color: rgba(0, 0, 255, 1)">string</span>&gt;&gt;<span style="color: rgba(0, 0, 0, 1)">();
</span><span style="color: rgba(0, 128, 128, 1)"> 51</span> 
<span style="color: rgba(0, 128, 128, 1)"> 52</span>             <span style="color: rgba(0, 0, 255, 1)">int</span> maxPath = <span style="color: rgba(128, 0, 128, 1)">1024</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)"> 53</span>             <span style="color: rgba(0, 0, 255, 1)">var</span> volNameSb = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> StringBuilder(maxPath);
</span><span style="color: rgba(0, 128, 128, 1)"> 54</span>             IntPtr findVolumeHandle = FindFirstVolumeW(volNameSb, (<span style="color: rgba(0, 0, 255, 1)">uint</span><span style="color: rgba(0, 0, 0, 1)">)volNameSb.Capacity);
</span><span style="color: rgba(0, 128, 128, 1)"> 55</span>             <span style="color: rgba(0, 0, 255, 1)">try</span>
<span style="color: rgba(0, 128, 128, 1)"> 56</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)"> 57</span>                 <span style="color: rgba(0, 0, 255, 1)">if</span> (findVolumeHandle == (IntPtr)(-<span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">))
</span><span style="color: rgba(0, 128, 128, 1)"> 58</span> <span style="color: rgba(0, 0, 0, 1)">                {
</span><span style="color: rgba(0, 128, 128, 1)"> 59</span>                     <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;Dictionary&lt;<span style="color: rgba(0, 0, 255, 1)">int</span>, List&lt;<span style="color: rgba(0, 0, 255, 1)">string</span>&gt;&gt;&gt;<span style="color: rgba(0, 0, 0, 1)">.ToSuccess(diskDict);
</span><span style="color: rgba(0, 128, 128, 1)"> 60</span> <span style="color: rgba(0, 0, 0, 1)">                }
</span><span style="color: rgba(0, 128, 128, 1)"> 61</span>                 <span style="color: rgba(0, 0, 255, 1)">while</span> (<span style="color: rgba(0, 0, 255, 1)">true</span><span style="color: rgba(0, 0, 0, 1)">)
</span><span style="color: rgba(0, 128, 128, 1)"> 62</span> <span style="color: rgba(0, 0, 0, 1)">                {
</span><span style="color: rgba(0, 128, 128, 1)"> 63</span>                     <span style="color: rgba(0, 0, 255, 1)">string</span> volumeName =<span style="color: rgba(0, 0, 0, 1)"> volNameSb.ToString();
</span><span style="color: rgba(0, 128, 128, 1)"> 64</span>                     <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> volumeName: \\?\Volume{GUID}\
</span><span style="color: rgba(0, 128, 128, 1)"> 65</span> 
<span style="color: rgba(0, 128, 128, 1)"> 66</span>                     <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æå¼å·è®¾å¤</span>
<span style="color: rgba(0, 128, 128, 1)"> 67</span>                     <span style="color: rgba(0, 0, 255, 1)">string</span> volumePathForDevice = volumeName.TrimEnd(<span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">\\</span><span style="color: rgba(128, 0, 0, 1)">'</span>); <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> \\?\Volume{GUID}</span>
<span style="color: rgba(0, 128, 128, 1)"> 68</span>                     IntPtr hVolume =<span style="color: rgba(0, 0, 0, 1)"> CreateFile(
</span><span style="color: rgba(0, 128, 128, 1)"> 69</span> <span style="color: rgba(0, 0, 0, 1)">                        volumePathForDevice,
</span><span style="color: rgba(0, 128, 128, 1)"> 70</span>                         <span style="color: rgba(128, 0, 128, 1)">0</span>, <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> åªéè¦ IOCTLï¼ä¸è¯»å</span>
<span style="color: rgba(0, 128, 128, 1)"> 71</span>                         FILE_SHARE_READ |<span style="color: rgba(0, 0, 0, 1)"> FILE_SHARE_WRITE,
</span><span style="color: rgba(0, 128, 128, 1)"> 72</span> <span style="color: rgba(0, 0, 0, 1)">                        IntPtr.Zero,
</span><span style="color: rgba(0, 128, 128, 1)"> 73</span> <span style="color: rgba(0, 0, 0, 1)">                        OPEN_EXISTING,
</span><span style="color: rgba(0, 128, 128, 1)"> 74</span>                         <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">,
</span><span style="color: rgba(0, 128, 128, 1)"> 75</span> <span style="color: rgba(0, 0, 0, 1)">                        IntPtr.Zero);
</span><span style="color: rgba(0, 128, 128, 1)"> 76</span> 
<span style="color: rgba(0, 128, 128, 1)"> 77</span>                     <span style="color: rgba(0, 0, 255, 1)">uint</span>? diskNumber = <span style="color: rgba(0, 0, 255, 1)">null</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)"> 78</span> 
<span style="color: rgba(0, 128, 128, 1)"> 79</span>                     <span style="color: rgba(0, 0, 255, 1)">if</span> (hVolume != (IntPtr)(-<span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">))
</span><span style="color: rgba(0, 128, 128, 1)"> 80</span> <span style="color: rgba(0, 0, 0, 1)">                    {
</span><span style="color: rgba(0, 128, 128, 1)"> 81</span>                         <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> å STORAGE_DEVICE_NUMBER</span>
<span style="color: rgba(0, 128, 128, 1)"> 82</span>                         <span style="color: rgba(0, 0, 255, 1)">uint</span> size = (<span style="color: rgba(0, 0, 255, 1)">uint</span>)Marshal.SizeOf&lt;STORAGE_DEVICE_NUMBER&gt;<span style="color: rgba(0, 0, 0, 1)">();
</span><span style="color: rgba(0, 128, 128, 1)"> 83</span>                         IntPtr outBuf = Marshal.AllocHGlobal((<span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)">)size);
</span><span style="color: rgba(0, 128, 128, 1)"> 84</span>                         <span style="color: rgba(0, 0, 255, 1)">try</span>
<span style="color: rgba(0, 128, 128, 1)"> 85</span> <span style="color: rgba(0, 0, 0, 1)">                        {
</span><span style="color: rgba(0, 128, 128, 1)"> 86</span>                             <span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)"> (DeviceIoControl(
</span><span style="color: rgba(0, 128, 128, 1)"> 87</span> <span style="color: rgba(0, 0, 0, 1)">                                    hVolume,
</span><span style="color: rgba(0, 128, 128, 1)"> 88</span> <span style="color: rgba(0, 0, 0, 1)">                                    IOCTL_STORAGE_GET_DEVICE_NUMBER,
</span><span style="color: rgba(0, 128, 128, 1)"> 89</span> <span style="color: rgba(0, 0, 0, 1)">                                    IntPtr.Zero,
</span><span style="color: rgba(0, 128, 128, 1)"> 90</span>                                     <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">,
</span><span style="color: rgba(0, 128, 128, 1)"> 91</span> <span style="color: rgba(0, 0, 0, 1)">                                    outBuf,
</span><span style="color: rgba(0, 128, 128, 1)"> 92</span> <span style="color: rgba(0, 0, 0, 1)">                                    size,
</span><span style="color: rgba(0, 128, 128, 1)"> 93</span>                                     <span style="color: rgba(0, 0, 255, 1)">out</span> <span style="color: rgba(0, 0, 255, 1)">uint</span><span style="color: rgba(0, 0, 0, 1)"> bytesReturned,
</span><span style="color: rgba(0, 128, 128, 1)"> 94</span> <span style="color: rgba(0, 0, 0, 1)">                                    IntPtr.Zero))
</span><span style="color: rgba(0, 128, 128, 1)"> 95</span> <span style="color: rgba(0, 0, 0, 1)">                            {
</span><span style="color: rgba(0, 128, 128, 1)"> 96</span>                                 STORAGE_DEVICE_NUMBER devNum = Marshal.PtrToStructure&lt;STORAGE_DEVICE_NUMBER&gt;<span style="color: rgba(0, 0, 0, 1)">(outBuf);
</span><span style="color: rgba(0, 128, 128, 1)"> 97</span>                                 <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> DeviceType ä¸º FILE_DEVICE_DISK(0x07) ä¸è¬è¡¨ç¤ºç©çç£ç</span>
<span style="color: rgba(0, 128, 128, 1)"> 98</span>                                 diskNumber =<span style="color: rgba(0, 0, 0, 1)"> devNum.DeviceNumber;
</span><span style="color: rgba(0, 128, 128, 1)"> 99</span> <span style="color: rgba(0, 0, 0, 1)">                            }
</span><span style="color: rgba(0, 128, 128, 1)">100</span> <span style="color: rgba(0, 0, 0, 1)">                        }
</span><span style="color: rgba(0, 128, 128, 1)">101</span>                         <span style="color: rgba(0, 0, 255, 1)">finally</span>
<span style="color: rgba(0, 128, 128, 1)">102</span> <span style="color: rgba(0, 0, 0, 1)">                        {
</span><span style="color: rgba(0, 128, 128, 1)">103</span> <span style="color: rgba(0, 0, 0, 1)">                            Marshal.FreeHGlobal(outBuf);
</span><span style="color: rgba(0, 128, 128, 1)">104</span> <span style="color: rgba(0, 0, 0, 1)">                            CloseHandle(hVolume);
</span><span style="color: rgba(0, 128, 128, 1)">105</span> <span style="color: rgba(0, 0, 0, 1)">                        }
</span><span style="color: rgba(0, 128, 128, 1)">106</span> <span style="color: rgba(0, 0, 0, 1)">                    }
</span><span style="color: rgba(0, 128, 128, 1)">107</span> 
<span style="color: rgba(0, 128, 128, 1)">108</span>                     <span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)"> (diskNumber.HasValue)
</span><span style="color: rgba(0, 128, 128, 1)">109</span> <span style="color: rgba(0, 0, 0, 1)">                    {
</span><span style="color: rgba(0, 128, 128, 1)">110</span>                         <span style="color: rgba(0, 0, 255, 1)">if</span> (!diskDict.TryGetValue((<span style="color: rgba(0, 0, 255, 1)">int</span>)diskNumber.Value, <span style="color: rgba(0, 0, 255, 1)">out</span> <span style="color: rgba(0, 0, 255, 1)">var</span><span style="color: rgba(0, 0, 0, 1)"> list))
</span><span style="color: rgba(0, 128, 128, 1)">111</span> <span style="color: rgba(0, 0, 0, 1)">                        {
</span><span style="color: rgba(0, 128, 128, 1)">112</span>                             list = <span style="color: rgba(0, 0, 255, 1)">new</span> List&lt;<span style="color: rgba(0, 0, 255, 1)">string</span>&gt;<span style="color: rgba(0, 0, 0, 1)">();
</span><span style="color: rgba(0, 128, 128, 1)">113</span>                             diskDict[(<span style="color: rgba(0, 0, 255, 1)">int</span>)diskNumber.Value] =<span style="color: rgba(0, 0, 0, 1)"> list;
</span><span style="color: rgba(0, 128, 128, 1)">114</span> <span style="color: rgba(0, 0, 0, 1)">                        }
</span><span style="color: rgba(0, 128, 128, 1)">115</span>                         <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> è·åå·çæè½½è·¯å¾åè¡¨ï¼å¯è½æå¤ä¸ªï¼</span>
<span style="color: rgba(0, 128, 128, 1)">116</span>                         <span style="color: rgba(0, 0, 255, 1)">var</span> getMountPathsResult =<span style="color: rgba(0, 0, 0, 1)"> GetMountPathsForVolume(volumeName);
</span><span style="color: rgba(0, 128, 128, 1)">117</span>                         <span style="color: rgba(0, 0, 255, 1)">if</span> (!<span style="color: rgba(0, 0, 0, 1)">getMountPathsResult.Success)
</span><span style="color: rgba(0, 128, 128, 1)">118</span> <span style="color: rgba(0, 0, 0, 1)">                        {
</span><span style="color: rgba(0, 128, 128, 1)">119</span>                             <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;Dictionary&lt;<span style="color: rgba(0, 0, 255, 1)">int</span>, List&lt;<span style="color: rgba(0, 0, 255, 1)">string</span>&gt;&gt;&gt;.ToError($<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ç£ç{diskNumber}å·æè½½è·¯å¾è·åå¤±è´¥, {getMountPathsResult.Message}</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, getMountPathsResult.Exception, getMountPathsResult.Code);
</span><span style="color: rgba(0, 128, 128, 1)">120</span> <span style="color: rgba(0, 0, 0, 1)">                        }
</span><span style="color: rgba(0, 128, 128, 1)">121</span>                         <span style="color: rgba(0, 0, 255, 1)">foreach</span> (<span style="color: rgba(0, 0, 255, 1)">var</span> mp <span style="color: rgba(0, 0, 255, 1)">in</span><span style="color: rgba(0, 0, 0, 1)"> getMountPathsResult.Data)
</span><span style="color: rgba(0, 128, 128, 1)">122</span> <span style="color: rgba(0, 0, 0, 1)">                        {
</span><span style="color: rgba(0, 128, 128, 1)">123</span>                             <span style="color: rgba(0, 0, 255, 1)">if</span> (!<span style="color: rgba(0, 0, 0, 1)">list.Contains(mp))
</span><span style="color: rgba(0, 128, 128, 1)">124</span> <span style="color: rgba(0, 0, 0, 1)">                                list.Add(mp);
</span><span style="color: rgba(0, 128, 128, 1)">125</span> <span style="color: rgba(0, 0, 0, 1)">                        }
</span><span style="color: rgba(0, 128, 128, 1)">126</span> <span style="color: rgba(0, 0, 0, 1)">                    }
</span><span style="color: rgba(0, 128, 128, 1)">127</span> 
<span style="color: rgba(0, 128, 128, 1)">128</span>                     <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ä¸ä¸å·</span>
<span style="color: rgba(0, 128, 128, 1)">129</span> <span style="color: rgba(0, 0, 0, 1)">                    volNameSb.Clear();
</span><span style="color: rgba(0, 128, 128, 1)">130</span> <span style="color: rgba(0, 0, 0, 1)">                    volNameSb.EnsureCapacity(maxPath);
</span><span style="color: rgba(0, 128, 128, 1)">131</span> 
<span style="color: rgba(0, 128, 128, 1)">132</span>                     <span style="color: rgba(0, 0, 255, 1)">if</span> (!FindNextVolumeW(findVolumeHandle, volNameSb, (<span style="color: rgba(0, 0, 255, 1)">uint</span><span style="color: rgba(0, 0, 0, 1)">)volNameSb.Capacity))
</span><span style="color: rgba(0, 128, 128, 1)">133</span> <span style="color: rgba(0, 0, 0, 1)">                    {
</span><span style="color: rgba(0, 128, 128, 1)">134</span>                         <span style="color: rgba(0, 0, 255, 1)">int</span> err =<span style="color: rgba(0, 0, 0, 1)"> Marshal.GetLastWin32Error();
</span><span style="color: rgba(0, 128, 128, 1)">135</span>                         <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ERROR_NO_MORE_FILES</span>
<span style="color: rgba(0, 128, 128, 1)">136</span>                         <span style="color: rgba(0, 0, 255, 1)">if</span> (err == <span style="color: rgba(128, 0, 128, 1)">18</span><span style="color: rgba(0, 0, 0, 1)">)
</span><span style="color: rgba(0, 128, 128, 1)">137</span>                             <span style="color: rgba(0, 0, 255, 1)">break</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">138</span> 
<span style="color: rgba(0, 128, 128, 1)">139</span>                         <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;Dictionary&lt;<span style="color: rgba(0, 0, 255, 1)">int</span>, List&lt;<span style="color: rgba(0, 0, 255, 1)">string</span>&gt;&gt;&gt;.ToWin32Error(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">query disk volumes failed</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, err);
</span><span style="color: rgba(0, 128, 128, 1)">140</span> <span style="color: rgba(0, 0, 0, 1)">                    }
</span><span style="color: rgba(0, 128, 128, 1)">141</span> <span style="color: rgba(0, 0, 0, 1)">                }
</span><span style="color: rgba(0, 128, 128, 1)">142</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)">143</span>             <span style="color: rgba(0, 0, 255, 1)">catch</span><span style="color: rgba(0, 0, 0, 1)"> (Exception ex)
</span><span style="color: rgba(0, 128, 128, 1)">144</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)">145</span>                 <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;Dictionary&lt;<span style="color: rgba(0, 0, 255, 1)">int</span>, List&lt;<span style="color: rgba(0, 0, 255, 1)">string</span>&gt;&gt;&gt;.ToError(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">query disk volumes error</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, ex);
</span><span style="color: rgba(0, 128, 128, 1)">146</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)">147</span>             <span style="color: rgba(0, 0, 255, 1)">finally</span>
<span style="color: rgba(0, 128, 128, 1)">148</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)">149</span> <span style="color: rgba(0, 0, 0, 1)">                FindVolumeClose(findVolumeHandle);
</span><span style="color: rgba(0, 128, 128, 1)">150</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)">151</span>             <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;Dictionary&lt;<span style="color: rgba(0, 0, 255, 1)">int</span>, List&lt;<span style="color: rgba(0, 0, 255, 1)">string</span>&gt;&gt;&gt;<span style="color: rgba(0, 0, 0, 1)">.ToSuccess(diskDict);
</span><span style="color: rgba(0, 128, 128, 1)">152</span> <span style="color: rgba(0, 0, 0, 1)">        }
</span><span style="color: rgba(0, 128, 128, 1)">153</span> 
<span style="color: rgba(0, 128, 128, 1)">154</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">155</span>         <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> è·åååºä¿¡æ¯
</span><span style="color: rgba(0, 128, 128, 1)">156</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">157</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;param name="hDisk"&gt;&lt;/param&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">158</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;returns&gt;&lt;/returns&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">159</span>         <span style="color: rgba(0, 0, 255, 1)">private</span> OperateResult&lt;DiskPartitionInfo&gt;<span style="color: rgba(0, 0, 0, 1)"> GetPartitionInfo(IntPtr hDisk)
</span><span style="color: rgba(0, 128, 128, 1)">160</span> <span style="color: rgba(0, 0, 0, 1)">        {
</span><span style="color: rgba(0, 128, 128, 1)">161</span>             <span style="color: rgba(0, 0, 255, 1)">int</span> outSize = Marshal.SizeOf&lt;DRIVE_LAYOUT_INFORMATION_EX&gt;() + <span style="color: rgba(128, 0, 128, 1)">128</span> * <span style="color: rgba(128, 0, 128, 1)">64</span>; <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ç»å¤ä¸ç¹ç©ºé´</span>
<span style="color: rgba(0, 128, 128, 1)">162</span>             IntPtr outBuffer =<span style="color: rgba(0, 0, 0, 1)"> Marshal.AllocHGlobal(outSize);
</span><span style="color: rgba(0, 128, 128, 1)">163</span> 
<span style="color: rgba(0, 128, 128, 1)">164</span>             <span style="color: rgba(0, 0, 255, 1)">try</span>
<span style="color: rgba(0, 128, 128, 1)">165</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)">166</span>                 <span style="color: rgba(0, 0, 255, 1)">if</span> (!<span style="color: rgba(0, 0, 0, 1)">DeviceIoControl(
</span><span style="color: rgba(0, 128, 128, 1)">167</span> <span style="color: rgba(0, 0, 0, 1)">                        hDisk,
</span><span style="color: rgba(0, 128, 128, 1)">168</span> <span style="color: rgba(0, 0, 0, 1)">                        IOCTL_DISK_GET_DRIVE_LAYOUT_EX,
</span><span style="color: rgba(0, 128, 128, 1)">169</span> <span style="color: rgba(0, 0, 0, 1)">                        IntPtr.Zero,
</span><span style="color: rgba(0, 128, 128, 1)">170</span>                         <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">,
</span><span style="color: rgba(0, 128, 128, 1)">171</span> <span style="color: rgba(0, 0, 0, 1)">                        outBuffer,
</span><span style="color: rgba(0, 128, 128, 1)">172</span>                         (<span style="color: rgba(0, 0, 255, 1)">uint</span><span style="color: rgba(0, 0, 0, 1)">)outSize,
</span><span style="color: rgba(0, 128, 128, 1)">173</span>                         <span style="color: rgba(0, 0, 255, 1)">out</span><span style="color: rgba(0, 0, 0, 1)"> _,
</span><span style="color: rgba(0, 128, 128, 1)">174</span> <span style="color: rgba(0, 0, 0, 1)">                        IntPtr.Zero))
</span><span style="color: rgba(0, 128, 128, 1)">175</span> <span style="color: rgba(0, 0, 0, 1)">                {
</span><span style="color: rgba(0, 128, 128, 1)">176</span>                     <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;DiskPartitionInfo&gt;.ToWin32Error(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">DeviceIoControl.IOCTL_DISK_GET_DRIVE_LAYOUT_EX failed</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, Marshal.GetLastWin32Error());
</span><span style="color: rgba(0, 128, 128, 1)">177</span> <span style="color: rgba(0, 0, 0, 1)">                }
</span><span style="color: rgba(0, 128, 128, 1)">178</span> 
<span style="color: rgba(0, 128, 128, 1)">179</span>                 <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> åªåç»æå¼å¤´</span>
<span style="color: rgba(0, 128, 128, 1)">180</span>                 <span style="color: rgba(0, 0, 255, 1)">var</span> layout = Marshal.PtrToStructure&lt;DRIVE_LAYOUT_INFORMATION_EX_HEADER&gt;<span style="color: rgba(0, 0, 0, 1)">(outBuffer);
</span><span style="color: rgba(0, 128, 128, 1)">181</span>                 <span style="color: rgba(0, 0, 255, 1)">var</span> partitionInfo = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> DiskPartitionInfo()
</span><span style="color: rgba(0, 128, 128, 1)">182</span> <span style="color: rgba(0, 0, 0, 1)">                {
</span><span style="color: rgba(0, 128, 128, 1)">183</span>                     PartitionCount = (<span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)">)layout.PartitionCount,
</span><span style="color: rgba(0, 128, 128, 1)">184</span>                     PartitionStyle =<span style="color: rgba(0, 0, 0, 1)"> layout.PartitionStyle,
</span><span style="color: rgba(0, 128, 128, 1)">185</span>                     DiskId =<span style="color: rgba(0, 0, 0, 1)"> layout.Gpt.DiskId,
</span><span style="color: rgba(0, 128, 128, 1)">186</span>                     StartingUsableOffset =<span style="color: rgba(0, 0, 0, 1)"> layout.Gpt.StartingUsableOffset,
</span><span style="color: rgba(0, 128, 128, 1)">187</span>                     UsableLength =<span style="color: rgba(0, 0, 0, 1)"> layout.Gpt.UsableLength,
</span><span style="color: rgba(0, 128, 128, 1)">188</span>                     MaxPartitionCount =<span style="color: rgba(0, 0, 0, 1)"> layout.Gpt.MaxPartitionCount
</span><span style="color: rgba(0, 128, 128, 1)">189</span> <span style="color: rgba(0, 0, 0, 1)">                };
</span><span style="color: rgba(0, 128, 128, 1)">190</span>                 <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æåç¬¬ä¸ä¸ª PARTITION_INFORMATION_EX çæéï¼</span>
<span style="color: rgba(0, 128, 128, 1)">191</span> 
<span style="color: rgba(0, 128, 128, 1)">192</span>                 IntPtr pCurrent = IntPtr.Add(outBuffer, Marshal.SizeOf&lt;DRIVE_LAYOUT_INFORMATION_EX&gt;<span style="color: rgba(0, 0, 0, 1)">());
</span><span style="color: rgba(0, 128, 128, 1)">193</span>                 <span style="color: rgba(0, 0, 255, 1)">int</span> partSize = Marshal.SizeOf&lt;PARTITION_INFORMATION_EX&gt;<span style="color: rgba(0, 0, 0, 1)">();
</span><span style="color: rgba(0, 128, 128, 1)">194</span>                 <span style="color: rgba(0, 0, 255, 1)">for</span> (<span style="color: rgba(0, 0, 255, 1)">int</span> i = <span style="color: rgba(128, 0, 128, 1)">0</span>; i &lt; layout.PartitionCount; i++<span style="color: rgba(0, 0, 0, 1)">)
</span><span style="color: rgba(0, 128, 128, 1)">195</span> <span style="color: rgba(0, 0, 0, 1)">                {
</span><span style="color: rgba(0, 128, 128, 1)">196</span>                     <span style="color: rgba(0, 0, 255, 1)">var</span> part = Marshal.PtrToStructure&lt;PARTITION_INFORMATION_EX&gt;<span style="color: rgba(0, 0, 0, 1)">(pCurrent);
</span><span style="color: rgba(0, 128, 128, 1)">197</span>                     <span style="color: rgba(0, 0, 255, 1)">var</span> item = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> PartitionEntryInfo
</span><span style="color: rgba(0, 128, 128, 1)">198</span> <span style="color: rgba(0, 0, 0, 1)">                    {
</span><span style="color: rgba(0, 128, 128, 1)">199</span>                         PartitionNumber = (<span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)">)part.PartitionNumber,
</span><span style="color: rgba(0, 128, 128, 1)">200</span>                         StartingOffset =<span style="color: rgba(0, 0, 0, 1)"> part.StartingOffset,
</span><span style="color: rgba(0, 128, 128, 1)">201</span>                         PartitionLength =<span style="color: rgba(0, 0, 0, 1)"> part.PartitionLength,
</span><span style="color: rgba(0, 128, 128, 1)">202</span>                         PartitionType =<span style="color: rgba(0, 0, 0, 1)"> part.Gpt.PartitionType.ToString(),
</span><span style="color: rgba(0, 128, 128, 1)">203</span>                         PartitionName =<span style="color: rgba(0, 0, 0, 1)"> part.Gpt.Name
</span><span style="color: rgba(0, 128, 128, 1)">204</span> <span style="color: rgba(0, 0, 0, 1)">                    };
</span><span style="color: rgba(0, 128, 128, 1)">205</span> 
<span style="color: rgba(0, 128, 128, 1)">206</span> <span style="color: rgba(0, 0, 0, 1)">                    partitionInfo.Partitions.Add(item);
</span><span style="color: rgba(0, 128, 128, 1)">207</span>                     pCurrent =<span style="color: rgba(0, 0, 0, 1)"> IntPtr.Add(pCurrent, partSize);
</span><span style="color: rgba(0, 128, 128, 1)">208</span> <span style="color: rgba(0, 0, 0, 1)">                }
</span><span style="color: rgba(0, 128, 128, 1)">209</span> 
<span style="color: rgba(0, 128, 128, 1)">210</span>                 <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;DiskPartitionInfo&gt;<span style="color: rgba(0, 0, 0, 1)">.ToSuccess(partitionInfo);
</span><span style="color: rgba(0, 128, 128, 1)">211</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)">212</span>             <span style="color: rgba(0, 0, 255, 1)">finally</span>
<span style="color: rgba(0, 128, 128, 1)">213</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)">214</span> <span style="color: rgba(0, 0, 0, 1)">                Marshal.FreeHGlobal(outBuffer);
</span><span style="color: rgba(0, 128, 128, 1)">215</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)">216</span> <span style="color: rgba(0, 0, 0, 1)">        }
</span><span style="color: rgba(0, 128, 128, 1)">217</span> 
<span style="color: rgba(0, 128, 128, 1)">218</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">219</span>         <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> è·åç£çéæå±æ§
</span><span style="color: rgba(0, 128, 128, 1)">220</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">221</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;param name="hDisk"&gt;&lt;/param&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">222</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;returns&gt;&lt;/returns&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">223</span>         <span style="color: rgba(0, 0, 255, 1)">private</span> OperateResult&lt;DiskStorageProperty&gt;<span style="color: rgba(0, 0, 0, 1)"> GetDiskProperties(IntPtr hDisk)
</span><span style="color: rgba(0, 128, 128, 1)">224</span> <span style="color: rgba(0, 0, 0, 1)">        {
</span><span style="color: rgba(0, 128, 128, 1)">225</span>             <span style="color: rgba(0, 0, 255, 1)">var</span> storageProperties = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> DiskStorageProperty();
</span><span style="color: rgba(0, 128, 128, 1)">226</span>             <span style="color: rgba(0, 0, 255, 1)">var</span> query = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> STORAGE_PROPERTY_QUERY
</span><span style="color: rgba(0, 128, 128, 1)">227</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)">228</span>                 PropertyId =<span style="color: rgba(0, 0, 0, 1)"> STORAGE_PROPERTY_ID.StorageDeviceProperty,
</span><span style="color: rgba(0, 128, 128, 1)">229</span>                 QueryType =<span style="color: rgba(0, 0, 0, 1)"> STORAGE_QUERY_TYPE.PropertyStandardQuery,
</span><span style="color: rgba(0, 128, 128, 1)">230</span>                 AdditionalParameters = <span style="color: rgba(0, 0, 255, 1)">new</span> <span style="color: rgba(0, 0, 255, 1)">byte</span>[<span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">]
</span><span style="color: rgba(0, 128, 128, 1)">231</span> <span style="color: rgba(0, 0, 0, 1)">            };
</span><span style="color: rgba(0, 128, 128, 1)">232</span>             <span style="color: rgba(0, 0, 255, 1)">uint</span> allocSize = <span style="color: rgba(128, 0, 128, 1)">1024</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">233</span>             IntPtr buffer = Marshal.AllocHGlobal((<span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)">)allocSize);
</span><span style="color: rgba(0, 128, 128, 1)">234</span>             <span style="color: rgba(0, 0, 255, 1)">try</span>
<span style="color: rgba(0, 128, 128, 1)">235</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)">236</span>                 <span style="color: rgba(0, 0, 255, 1)">if</span> (!<span style="color: rgba(0, 0, 0, 1)">DeviceIoControl(
</span><span style="color: rgba(0, 128, 128, 1)">237</span> <span style="color: rgba(0, 0, 0, 1)">                        hDisk,
</span><span style="color: rgba(0, 128, 128, 1)">238</span> <span style="color: rgba(0, 0, 0, 1)">                        IOCTL_STORAGE_QUERY_PROPERTY,
</span><span style="color: rgba(0, 128, 128, 1)">239</span>                         <span style="color: rgba(0, 0, 255, 1)">ref</span><span style="color: rgba(0, 0, 0, 1)"> query,
</span><span style="color: rgba(0, 128, 128, 1)">240</span>                         (<span style="color: rgba(0, 0, 255, 1)">uint</span>)Marshal.SizeOf&lt;STORAGE_PROPERTY_QUERY&gt;<span style="color: rgba(0, 0, 0, 1)">(),
</span><span style="color: rgba(0, 128, 128, 1)">241</span> <span style="color: rgba(0, 0, 0, 1)">                        buffer,
</span><span style="color: rgba(0, 128, 128, 1)">242</span> <span style="color: rgba(0, 0, 0, 1)">                        allocSize,
</span><span style="color: rgba(0, 128, 128, 1)">243</span>                         <span style="color: rgba(0, 0, 255, 1)">out</span> <span style="color: rgba(0, 0, 255, 1)">var</span><span style="color: rgba(0, 0, 0, 1)"> bytesReturned,
</span><span style="color: rgba(0, 128, 128, 1)">244</span> <span style="color: rgba(0, 0, 0, 1)">                        IntPtr.Zero))
</span><span style="color: rgba(0, 128, 128, 1)">245</span> <span style="color: rgba(0, 0, 0, 1)">                {
</span><span style="color: rgba(0, 128, 128, 1)">246</span>                     <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">è¯»åå¤±è´¥</span>
<span style="color: rgba(0, 128, 128, 1)">247</span>                     <span style="color: rgba(0, 0, 255, 1)">int</span> err =<span style="color: rgba(0, 0, 0, 1)"> Marshal.GetLastWin32Error();
</span><span style="color: rgba(0, 128, 128, 1)">248</span>                     <span style="color: rgba(0, 0, 255, 1)">if</span> (err == ERROR_INSUFFICIENT_BUFFER &amp;&amp; bytesReturned &gt;<span style="color: rgba(0, 0, 0, 1)"> allocSize)
</span><span style="color: rgba(0, 128, 128, 1)">249</span> <span style="color: rgba(0, 0, 0, 1)">                    {
</span><span style="color: rgba(0, 128, 128, 1)">250</span>                         <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> éæ°åéæ´å¤§ç¼å²åº</span>
<span style="color: rgba(0, 128, 128, 1)">251</span> <span style="color: rgba(0, 0, 0, 1)">                        Marshal.FreeHGlobal(buffer);
</span><span style="color: rgba(0, 128, 128, 1)">252</span>                         allocSize =<span style="color: rgba(0, 0, 0, 1)"> bytesReturned;
</span><span style="color: rgba(0, 128, 128, 1)">253</span>                         buffer = Marshal.AllocHGlobal((<span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)">)allocSize);
</span><span style="color: rgba(0, 128, 128, 1)">254</span>                         <span style="color: rgba(0, 0, 255, 1)">if</span> (!<span style="color: rgba(0, 0, 0, 1)">DeviceIoControl(
</span><span style="color: rgba(0, 128, 128, 1)">255</span> <span style="color: rgba(0, 0, 0, 1)">                                hDisk,
</span><span style="color: rgba(0, 128, 128, 1)">256</span> <span style="color: rgba(0, 0, 0, 1)">                                IOCTL_STORAGE_QUERY_PROPERTY,
</span><span style="color: rgba(0, 128, 128, 1)">257</span>                                 <span style="color: rgba(0, 0, 255, 1)">ref</span><span style="color: rgba(0, 0, 0, 1)"> query,
</span><span style="color: rgba(0, 128, 128, 1)">258</span>                                 (<span style="color: rgba(0, 0, 255, 1)">uint</span>)Marshal.SizeOf&lt;STORAGE_PROPERTY_QUERY&gt;<span style="color: rgba(0, 0, 0, 1)">(),
</span><span style="color: rgba(0, 128, 128, 1)">259</span> <span style="color: rgba(0, 0, 0, 1)">                                buffer,
</span><span style="color: rgba(0, 128, 128, 1)">260</span> <span style="color: rgba(0, 0, 0, 1)">                                allocSize,
</span><span style="color: rgba(0, 128, 128, 1)">261</span>                                 <span style="color: rgba(0, 0, 255, 1)">out</span><span style="color: rgba(0, 0, 0, 1)"> bytesReturned,
</span><span style="color: rgba(0, 128, 128, 1)">262</span> <span style="color: rgba(0, 0, 0, 1)">                                IntPtr.Zero))
</span><span style="color: rgba(0, 128, 128, 1)">263</span> <span style="color: rgba(0, 0, 0, 1)">                        {
</span><span style="color: rgba(0, 128, 128, 1)">264</span>                             <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">éæ°åéç¼å²åºï¼è¯»åå¤±è´¥</span>
<span style="color: rgba(0, 128, 128, 1)">265</span>                             <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;DiskStorageProperty&gt;.ToWin32Error(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">DeviceIoControl.IOCTL_STORAGE_QUERY_PROPERTY execute failed after adjust buffer size</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, Marshal.GetLastWin32Error());
</span><span style="color: rgba(0, 128, 128, 1)">266</span> <span style="color: rgba(0, 0, 0, 1)">                        }
</span><span style="color: rgba(0, 128, 128, 1)">267</span> <span style="color: rgba(0, 0, 0, 1)">                    }
</span><span style="color: rgba(0, 128, 128, 1)">268</span>                     <span style="color: rgba(0, 0, 255, 1)">else</span>
<span style="color: rgba(0, 128, 128, 1)">269</span> <span style="color: rgba(0, 0, 0, 1)">                    {
</span><span style="color: rgba(0, 128, 128, 1)">270</span>                         <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;DiskStorageProperty&gt;.ToWin32Error(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">DeviceIoControl.IOCTL_STORAGE_QUERY_PROPERTY execute failed</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, err);
</span><span style="color: rgba(0, 128, 128, 1)">271</span> <span style="color: rgba(0, 0, 0, 1)">                    }
</span><span style="color: rgba(0, 128, 128, 1)">272</span> <span style="color: rgba(0, 0, 0, 1)">                }
</span><span style="color: rgba(0, 128, 128, 1)">273</span> 
<span style="color: rgba(0, 128, 128, 1)">274</span>                 <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> è³å°è¦åå« Version/Size/å ä¸ª offset</span>
<span style="color: rgba(0, 128, 128, 1)">275</span>                 <span style="color: rgba(0, 0, 255, 1)">if</span> (bytesReturned &lt; <span style="color: rgba(128, 0, 128, 1)">24</span><span style="color: rgba(0, 0, 0, 1)">)
</span><span style="color: rgba(0, 128, 128, 1)">276</span>                     <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;DiskStorageProperty&gt;.ToError($<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">DeviceIoControl.IOCTL_STORAGE_QUERY_PROPERTY execute success but bytesReturned {bytesReturned} is lower than 24</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">277</span> 
<span style="color: rgba(0, 128, 128, 1)">278</span>                 <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> --- è¯»åå¤´é¨åºå®å­æ®µï¼æå®æ¹ C ç»ææå·¥åç§»ï¼---
</span><span style="color: rgba(0, 128, 128, 1)">279</span>                 <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Size    (ULONG) at offset 0x04</span>
<span style="color: rgba(0, 128, 128, 1)">280</span>                 <span style="color: rgba(0, 0, 255, 1)">uint</span> size = (<span style="color: rgba(0, 0, 255, 1)">uint</span>)Marshal.ReadInt32(buffer, <span style="color: rgba(128, 0, 128, 1)">4</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">281</span>                 <span style="color: rgba(0, 0, 255, 1)">if</span> (size &gt; bytesReturned) size =<span style="color: rgba(0, 0, 0, 1)"> bytesReturned;
</span><span style="color: rgba(0, 128, 128, 1)">282</span> 
<span style="color: rgba(0, 128, 128, 1)">283</span>                 <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ç£çåºåå·ï¼å Get-Disk ç SerialNumber</span>
<span style="color: rgba(0, 128, 128, 1)">284</span>                 <span style="color: rgba(0, 0, 255, 1)">uint</span> serialOffset = (<span style="color: rgba(0, 0, 255, 1)">uint</span>)Marshal.ReadInt32(buffer, <span style="color: rgba(128, 0, 128, 1)">0x18</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">285</span>                 <span style="color: rgba(0, 0, 255, 1)">string</span> serialRaw =<span style="color: rgba(0, 0, 0, 1)"> ReadAnsiStringSafe(buffer, size, serialOffset);
</span><span style="color: rgba(0, 128, 128, 1)">286</span>                 <span style="color: rgba(0, 0, 255, 1)">string</span> serialClean =<span style="color: rgba(0, 0, 0, 1)"> CleanSerialString(serialRaw);
</span><span style="color: rgba(0, 128, 128, 1)">287</span>                 storageProperties.SerialNumber =<span style="color: rgba(0, 0, 0, 1)"> serialClean;
</span><span style="color: rgba(0, 128, 128, 1)">288</span> 
<span style="color: rgba(0, 128, 128, 1)">289</span>                 <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ç£çåå/åç§°ç¸å³</span>
<span style="color: rgba(0, 128, 128, 1)">290</span>                 <span style="color: rgba(0, 0, 255, 1)">uint</span> vendorOffset = (<span style="color: rgba(0, 0, 255, 1)">uint</span>)Marshal.ReadInt32(buffer, <span style="color: rgba(128, 0, 128, 1)">0x0C</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">291</span>                 <span style="color: rgba(0, 0, 255, 1)">uint</span> productOffset = (<span style="color: rgba(0, 0, 255, 1)">uint</span>)Marshal.ReadInt32(buffer, <span style="color: rgba(128, 0, 128, 1)">0x10</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">292</span>                 <span style="color: rgba(0, 0, 255, 1)">uint</span> revisionOffset = (<span style="color: rgba(0, 0, 255, 1)">uint</span>)Marshal.ReadInt32(buffer, <span style="color: rgba(128, 0, 128, 1)">0x14</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">293</span>                 storageProperties.Vendor =<span style="color: rgba(0, 0, 0, 1)"> ReadAnsiStringSafe(buffer, size, vendorOffset);
</span><span style="color: rgba(0, 128, 128, 1)">294</span>                 storageProperties.Product =<span style="color: rgba(0, 0, 0, 1)"> ReadAnsiStringSafe(buffer, size, productOffset);
</span><span style="color: rgba(0, 128, 128, 1)">295</span>                 storageProperties.Version =<span style="color: rgba(0, 0, 0, 1)"> ReadAnsiStringSafe(buffer, size, revisionOffset);
</span><span style="color: rgba(0, 128, 128, 1)">296</span>                 storageProperties.DeviceName = $<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">{storageProperties.Vendor} {storageProperties.Product}</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">297</span>                 <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> BusType</span>
<span style="color: rgba(0, 128, 128, 1)">298</span>                 <span style="color: rgba(0, 0, 255, 1)">uint</span> busTypeOffset = (<span style="color: rgba(0, 0, 255, 1)">uint</span>)Marshal.ReadInt32(buffer, <span style="color: rgba(128, 0, 128, 1)">0x1C</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">299</span>                 storageProperties.BusType = Enum.IsDefined(<span style="color: rgba(0, 0, 255, 1)">typeof</span>(StorageBusType), (<span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)">)busTypeOffset)
</span><span style="color: rgba(0, 128, 128, 1)">300</span>                     ?<span style="color: rgba(0, 0, 0, 1)"> (StorageBusType)busTypeOffset
</span><span style="color: rgba(0, 128, 128, 1)">301</span> <span style="color: rgba(0, 0, 0, 1)">                    : StorageBusType.Unknown;
</span><span style="color: rgba(0, 128, 128, 1)">302</span>                 <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;DiskStorageProperty&gt;<span style="color: rgba(0, 0, 0, 1)">.ToSuccess(storageProperties);
</span><span style="color: rgba(0, 128, 128, 1)">303</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)">304</span>             <span style="color: rgba(0, 0, 255, 1)">catch</span><span style="color: rgba(0, 0, 0, 1)"> (Exception ex)
</span><span style="color: rgba(0, 128, 128, 1)">305</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)">306</span>                 <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;DiskStorageProperty&gt;<span style="color: rgba(0, 0, 0, 1)">.ToError(ex);
</span><span style="color: rgba(0, 128, 128, 1)">307</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)">308</span>             <span style="color: rgba(0, 0, 255, 1)">finally</span>
<span style="color: rgba(0, 128, 128, 1)">309</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)">310</span> <span style="color: rgba(0, 0, 0, 1)">                Marshal.FreeHGlobal(buffer);
</span><span style="color: rgba(0, 128, 128, 1)">311</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)">312</span> <span style="color: rgba(0, 0, 0, 1)">        }
</span><span style="color: rgba(0, 128, 128, 1)">313</span> 
<span style="color: rgba(0, 128, 128, 1)">314</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">315</span>         <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> è·åç£çå¤§å°ï¼Bytesï¼
</span><span style="color: rgba(0, 128, 128, 1)">316</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">317</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;param name="hDisk"&gt;&lt;/param&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">318</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;returns&gt;&lt;/returns&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">319</span>         <span style="color: rgba(0, 0, 255, 1)">public</span> OperateResult&lt;<span style="color: rgba(0, 0, 255, 1)">long</span>&gt;<span style="color: rgba(0, 0, 0, 1)"> GetDiskSize(IntPtr hDisk)
</span><span style="color: rgba(0, 128, 128, 1)">320</span> <span style="color: rgba(0, 0, 0, 1)">        {
</span><span style="color: rgba(0, 128, 128, 1)">321</span>             <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ç¨ä¸ä¸ªè¶³å¤å¤§çç¼å²åºï¼ä¸è¬ 1024 å­èè¶³å¤</span>
<span style="color: rgba(0, 128, 128, 1)">322</span>             <span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">int</span> bufferSize = <span style="color: rgba(128, 0, 128, 1)">1024</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">323</span>             IntPtr buffer =<span style="color: rgba(0, 0, 0, 1)"> Marshal.AllocHGlobal(bufferSize);
</span><span style="color: rgba(0, 128, 128, 1)">324</span>             <span style="color: rgba(0, 0, 255, 1)">try</span>
<span style="color: rgba(0, 128, 128, 1)">325</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)">326</span>                 <span style="color: rgba(0, 0, 255, 1)">bool</span> ok =<span style="color: rgba(0, 0, 0, 1)"> DeviceIoControl(
</span><span style="color: rgba(0, 128, 128, 1)">327</span> <span style="color: rgba(0, 0, 0, 1)">                    hDisk,
</span><span style="color: rgba(0, 128, 128, 1)">328</span> <span style="color: rgba(0, 0, 0, 1)">                    IOCTL_DISK_GET_DRIVE_GEOMETRY_EX,
</span><span style="color: rgba(0, 128, 128, 1)">329</span> <span style="color: rgba(0, 0, 0, 1)">                    IntPtr.Zero,
</span><span style="color: rgba(0, 128, 128, 1)">330</span>                     <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">,
</span><span style="color: rgba(0, 128, 128, 1)">331</span> <span style="color: rgba(0, 0, 0, 1)">                    buffer,
</span><span style="color: rgba(0, 128, 128, 1)">332</span>                     (<span style="color: rgba(0, 0, 255, 1)">uint</span><span style="color: rgba(0, 0, 0, 1)">)bufferSize,
</span><span style="color: rgba(0, 128, 128, 1)">333</span>                     <span style="color: rgba(0, 0, 255, 1)">out</span> <span style="color: rgba(0, 0, 255, 1)">var</span><span style="color: rgba(0, 0, 0, 1)"> bytesReturned,
</span><span style="color: rgba(0, 128, 128, 1)">334</span> <span style="color: rgba(0, 0, 0, 1)">                    IntPtr.Zero);
</span><span style="color: rgba(0, 128, 128, 1)">335</span>                 <span style="color: rgba(0, 0, 255, 1)">if</span> (!<span style="color: rgba(0, 0, 0, 1)">ok)
</span><span style="color: rgba(0, 128, 128, 1)">336</span>                     <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;<span style="color: rgba(0, 0, 255, 1)">long</span>&gt;.ToError(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">DeviceIoControl.IOCTL_DISK_GET_DRIVE_GEOMETRY_EX failed</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, Marshal.GetLastWin32Error());
</span><span style="color: rgba(0, 128, 128, 1)">337</span>                 <span style="color: rgba(0, 0, 255, 1)">if</span> (bytesReturned &lt; Marshal.SizeOf&lt;DISK_GEOMETRY_EX&gt;<span style="color: rgba(0, 0, 0, 1)">())
</span><span style="color: rgba(0, 128, 128, 1)">338</span>                     <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;<span style="color: rgba(0, 0, 255, 1)">long</span>&gt;.ToSuccess(<span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">339</span> 
<span style="color: rgba(0, 128, 128, 1)">340</span>                 <span style="color: rgba(0, 0, 255, 1)">var</span> geomEx = Marshal.PtrToStructure&lt;DISK_GEOMETRY_EX&gt;<span style="color: rgba(0, 0, 0, 1)">(buffer);
</span><span style="color: rgba(0, 128, 128, 1)">341</span>                 <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;<span style="color: rgba(0, 0, 255, 1)">long</span>&gt;<span style="color: rgba(0, 0, 0, 1)">.ToSuccess(geomEx.DiskSize);
</span><span style="color: rgba(0, 128, 128, 1)">342</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)">343</span>             <span style="color: rgba(0, 0, 255, 1)">catch</span><span style="color: rgba(0, 0, 0, 1)"> (Exception e)
</span><span style="color: rgba(0, 128, 128, 1)">344</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)">345</span>                 <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;<span style="color: rgba(0, 0, 255, 1)">long</span>&gt;<span style="color: rgba(0, 0, 0, 1)">.ToError(e);
</span><span style="color: rgba(0, 128, 128, 1)">346</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)">347</span>             <span style="color: rgba(0, 0, 255, 1)">finally</span>
<span style="color: rgba(0, 128, 128, 1)">348</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)">349</span> <span style="color: rgba(0, 0, 0, 1)">                Marshal.FreeHGlobal(buffer);
</span><span style="color: rgba(0, 128, 128, 1)">350</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)">351</span> <span style="color: rgba(0, 0, 0, 1)">        }
</span><span style="color: rgba(0, 128, 128, 1)">352</span> 
<span style="color: rgba(0, 128, 128, 1)">353</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">354</span>         <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> è·åç£çæ©å±å±æ§
</span><span style="color: rgba(0, 128, 128, 1)">355</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">356</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;param name="hDisk"&gt;&lt;/param&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">357</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;returns&gt;&lt;/returns&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">358</span>         <span style="color: rgba(0, 0, 255, 1)">private</span> OperateResult&lt;DiskStorageAttribues&gt;<span style="color: rgba(0, 0, 0, 1)"> GetDiskAttributes(IntPtr hDisk)
</span><span style="color: rgba(0, 128, 128, 1)">359</span> <span style="color: rgba(0, 0, 0, 1)">        {
</span><span style="color: rgba(0, 128, 128, 1)">360</span>             <span style="color: rgba(0, 0, 255, 1)">try</span>
<span style="color: rgba(0, 128, 128, 1)">361</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)">362</span>                 <span style="color: rgba(0, 0, 255, 1)">int</span> getSize = Marshal.SizeOf&lt;GET_DISK_ATTRIBUTES&gt;<span style="color: rgba(0, 0, 0, 1)">();
</span><span style="color: rgba(0, 128, 128, 1)">363</span>                 <span style="color: rgba(0, 0, 255, 1)">var</span> getAttr = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> GET_DISK_ATTRIBUTES
</span><span style="color: rgba(0, 128, 128, 1)">364</span> <span style="color: rgba(0, 0, 0, 1)">                {
</span><span style="color: rgba(0, 128, 128, 1)">365</span>                     Version = (<span style="color: rgba(0, 0, 255, 1)">uint</span>)getSize, <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> å³é®ï¼Version = sizeof(GET_DISK_ATTRIBUTES)</span>
<span style="color: rgba(0, 128, 128, 1)">366</span>                     Reserved1 = <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">,
</span><span style="color: rgba(0, 128, 128, 1)">367</span>                     Attributes = <span style="color: rgba(128, 0, 128, 1)">0</span>
<span style="color: rgba(0, 128, 128, 1)">368</span> <span style="color: rgba(0, 0, 0, 1)">                };
</span><span style="color: rgba(0, 128, 128, 1)">369</span> 
<span style="color: rgba(0, 128, 128, 1)">370</span>                 <span style="color: rgba(0, 0, 255, 1)">if</span> (!<span style="color: rgba(0, 0, 0, 1)">DeviceIoControl_DiskAttributes(
</span><span style="color: rgba(0, 128, 128, 1)">371</span> <span style="color: rgba(0, 0, 0, 1)">                        hDisk,
</span><span style="color: rgba(0, 128, 128, 1)">372</span> <span style="color: rgba(0, 0, 0, 1)">                        IOCTL_DISK_GET_DISK_ATTRIBUTES,
</span><span style="color: rgba(0, 128, 128, 1)">373</span>                         <span style="color: rgba(0, 0, 255, 1)">ref</span><span style="color: rgba(0, 0, 0, 1)"> getAttr,
</span><span style="color: rgba(0, 128, 128, 1)">374</span>                         (<span style="color: rgba(0, 0, 255, 1)">uint</span><span style="color: rgba(0, 0, 0, 1)">)getSize,
</span><span style="color: rgba(0, 128, 128, 1)">375</span>                         <span style="color: rgba(0, 0, 255, 1)">ref</span><span style="color: rgba(0, 0, 0, 1)"> getAttr,
</span><span style="color: rgba(0, 128, 128, 1)">376</span>                         (<span style="color: rgba(0, 0, 255, 1)">uint</span><span style="color: rgba(0, 0, 0, 1)">)getSize,
</span><span style="color: rgba(0, 128, 128, 1)">377</span>                         <span style="color: rgba(0, 0, 255, 1)">out</span><span style="color: rgba(0, 0, 0, 1)"> _,
</span><span style="color: rgba(0, 128, 128, 1)">378</span> <span style="color: rgba(0, 0, 0, 1)">                        IntPtr.Zero))
</span><span style="color: rgba(0, 128, 128, 1)">379</span> <span style="color: rgba(0, 0, 0, 1)">                {
</span><span style="color: rgba(0, 128, 128, 1)">380</span>                     <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;DiskStorageAttribues&gt;.ToWin32Error(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">IOCTL_DISK_GET_DISK_ATTRIBUTES å¤±è´¥</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, Marshal.GetLastWin32Error());
</span><span style="color: rgba(0, 128, 128, 1)">381</span> <span style="color: rgba(0, 0, 0, 1)">                }
</span><span style="color: rgba(0, 128, 128, 1)">382</span>                 <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">ç£çæ©å±å±æ§</span>
<span style="color: rgba(0, 128, 128, 1)">383</span>                 <span style="color: rgba(0, 0, 255, 1)">var</span> diskStorageAttributes = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> DiskStorageAttribues();
</span><span style="color: rgba(0, 128, 128, 1)">384</span>                 diskStorageAttributes.IsOffline = (getAttr.Attributes &amp; DISK_ATTRIBUTE_OFFLINE) != <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">385</span>                 diskStorageAttributes.IsReadOnly = (getAttr.Attributes &amp; DISK_ATTRIBUTE_READ_ONLY) != <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">386</span>                 <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;DiskStorageAttribues&gt;<span style="color: rgba(0, 0, 0, 1)">.ToSuccess(diskStorageAttributes);
</span><span style="color: rgba(0, 128, 128, 1)">387</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)">388</span>             <span style="color: rgba(0, 0, 255, 1)">catch</span><span style="color: rgba(0, 0, 0, 1)"> (Exception ex)
</span><span style="color: rgba(0, 128, 128, 1)">389</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)">390</span>                 <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;DiskStorageAttribues&gt;<span style="color: rgba(0, 0, 0, 1)">.ToError(ex);
</span><span style="color: rgba(0, 128, 128, 1)">391</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)">392</span> <span style="color: rgba(0, 0, 0, 1)">        }
</span><span style="color: rgba(0, 128, 128, 1)">393</span> 
<span style="color: rgba(0, 128, 128, 1)">394</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">395</span>         <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> éè¿ä»»ææè½½è·¯å¾ï¼çç¬¦ãç®å½æè½½ç¹ãVolume GUIDï¼è·åå·å¤§å°ä¸ä½¿ç¨é
</span><span style="color: rgba(0, 128, 128, 1)">396</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">397</span>         <span style="color: rgba(0, 0, 255, 1)">private</span> OperateResult&lt;DiskSizeUsage&gt; GetDiskSizeUsageByMountPath(<span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)"> mountPath)
</span><span style="color: rgba(0, 128, 128, 1)">398</span> <span style="color: rgba(0, 0, 0, 1)">        {
</span><span style="color: rgba(0, 128, 128, 1)">399</span>             <span style="color: rgba(0, 0, 255, 1)">if</span> (<span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)">.IsNullOrWhiteSpace(mountPath))
</span><span style="color: rgba(0, 128, 128, 1)">400</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)">401</span>                 <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;DiskSizeUsage&gt;.ToError($<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">parameter {nameof(mountPath)} is empty</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">402</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)">403</span> 
<span style="color: rgba(0, 128, 128, 1)">404</span>             <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ç¡®ä¿è·¯å¾æ«å°¾æåææ å¯¹æäºåºæ¯æ´ç¨³å¦¥</span>
<span style="color: rgba(0, 128, 128, 1)">405</span>             <span style="color: rgba(0, 0, 255, 1)">if</span> (!mountPath.EndsWith(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">\\</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">))
</span><span style="color: rgba(0, 128, 128, 1)">406</span>                 mountPath += <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">\\</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">407</span> 
<span style="color: rgba(0, 128, 128, 1)">408</span>             <span style="color: rgba(0, 0, 255, 1)">if</span> (!<span style="color: rgba(0, 0, 0, 1)">GetDiskFreeSpaceExW(mountPath,
</span><span style="color: rgba(0, 128, 128, 1)">409</span>                     <span style="color: rgba(0, 0, 255, 1)">out</span> <span style="color: rgba(0, 0, 255, 1)">var</span><span style="color: rgba(0, 0, 0, 1)"> freeAvailable,
</span><span style="color: rgba(0, 128, 128, 1)">410</span>                     <span style="color: rgba(0, 0, 255, 1)">out</span> <span style="color: rgba(0, 0, 255, 1)">var</span><span style="color: rgba(0, 0, 0, 1)"> totalBytes,
</span><span style="color: rgba(0, 128, 128, 1)">411</span>                     <span style="color: rgba(0, 0, 255, 1)">out</span> <span style="color: rgba(0, 0, 255, 1)">var</span><span style="color: rgba(0, 0, 0, 1)"> totalFreeBytes))
</span><span style="color: rgba(0, 128, 128, 1)">412</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)">413</span>                 <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;DiskSizeUsage&gt;.ToError(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">GetDiskFreeSpaceExW failed</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, Marshal.GetLastWin32Error());
</span><span style="color: rgba(0, 128, 128, 1)">414</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)">415</span> 
<span style="color: rgba(0, 128, 128, 1)">416</span>             <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;DiskSizeUsage&gt;.ToSuccess(<span style="color: rgba(0, 0, 255, 1)">new</span> DiskSizeUsage((<span style="color: rgba(0, 0, 255, 1)">long</span>)totalBytes, (<span style="color: rgba(0, 0, 255, 1)">long</span><span style="color: rgba(0, 0, 0, 1)">)totalFreeBytes));
</span><span style="color: rgba(0, 128, 128, 1)">417</span> <span style="color: rgba(0, 0, 0, 1)">        }
</span><span style="color: rgba(0, 128, 128, 1)">418</span> 
<span style="color: rgba(0, 128, 128, 1)">419</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">420</span>         <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> éè¿æè½½è·¯å¾è·åå·ä¿¡æ¯
</span><span style="color: rgba(0, 128, 128, 1)">421</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">422</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;param name="mountPath"&gt;</span><span style="color: rgba(0, 128, 0, 1)">çç¬¦, e.g. "E:\\"</span><span style="color: rgba(128, 128, 128, 1)">&lt;/param&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">423</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;returns&gt;&lt;/returns&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">424</span>         <span style="color: rgba(0, 0, 255, 1)">private</span> OperateResult&lt;VolumeInfo&gt; GetVolumeInfo(<span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)"> mountPath)
</span><span style="color: rgba(0, 128, 128, 1)">425</span> <span style="color: rgba(0, 0, 0, 1)">        {
</span><span style="color: rgba(0, 128, 128, 1)">426</span>             <span style="color: rgba(0, 0, 255, 1)">var</span> volumeName = <span style="color: rgba(0, 0, 255, 1)">new</span> StringBuilder(<span style="color: rgba(128, 0, 128, 1)">256</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">427</span>             <span style="color: rgba(0, 0, 255, 1)">var</span> fileSystemType = <span style="color: rgba(0, 0, 255, 1)">new</span> StringBuilder(<span style="color: rgba(128, 0, 128, 1)">256</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">428</span> 
<span style="color: rgba(0, 128, 128, 1)">429</span>             <span style="color: rgba(0, 0, 255, 1)">if</span> (!mountPath.EndsWith(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">\\</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">))
</span><span style="color: rgba(0, 128, 128, 1)">430</span>                 mountPath += <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">\\</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">431</span>             <span style="color: rgba(0, 0, 255, 1)">var</span> success =<span style="color: rgba(0, 0, 0, 1)"> GetVolumeInformationW(
</span><span style="color: rgba(0, 128, 128, 1)">432</span> <span style="color: rgba(0, 0, 0, 1)">                mountPath,
</span><span style="color: rgba(0, 128, 128, 1)">433</span> <span style="color: rgba(0, 0, 0, 1)">                volumeName, volumeName.Capacity,
</span><span style="color: rgba(0, 128, 128, 1)">434</span>                 <span style="color: rgba(0, 0, 255, 1)">out</span> _, <span style="color: rgba(0, 0, 255, 1)">out</span> _, <span style="color: rgba(0, 0, 255, 1)">out</span><span style="color: rgba(0, 0, 0, 1)"> _,
</span><span style="color: rgba(0, 128, 128, 1)">435</span> <span style="color: rgba(0, 0, 0, 1)">                fileSystemType, fileSystemType.Capacity);
</span><span style="color: rgba(0, 128, 128, 1)">436</span>             <span style="color: rgba(0, 0, 255, 1)">if</span> (!<span style="color: rgba(0, 0, 0, 1)">success)
</span><span style="color: rgba(0, 128, 128, 1)">437</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)">438</span>                 <span style="color: rgba(0, 0, 255, 1)">int</span> err =<span style="color: rgba(0, 0, 0, 1)"> Marshal.GetLastWin32Error();
</span><span style="color: rgba(0, 128, 128, 1)">439</span>                 <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;VolumeInfo&gt;.ToWin32Error($<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">GetVolumeInformationW get {mountPath} volume info failed</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, err);
</span><span style="color: rgba(0, 128, 128, 1)">440</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)">441</span> 
<span style="color: rgba(0, 128, 128, 1)">442</span>             <span style="color: rgba(0, 0, 255, 1)">var</span> volumeInfo = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> VolumeInfo()
</span><span style="color: rgba(0, 128, 128, 1)">443</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)">444</span>                 VolumeLabel =<span style="color: rgba(0, 0, 0, 1)"> volumeName.ToString(),
</span><span style="color: rgba(0, 128, 128, 1)">445</span>                 FileSystemType =<span style="color: rgba(0, 0, 0, 1)"> fileSystemType.ToString()
</span><span style="color: rgba(0, 128, 128, 1)">446</span> <span style="color: rgba(0, 0, 0, 1)">            };
</span><span style="color: rgba(0, 128, 128, 1)">447</span>             <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;VolumeInfo&gt;<span style="color: rgba(0, 0, 0, 1)">.ToSuccess(volumeInfo);
</span><span style="color: rgba(0, 128, 128, 1)">448</span> <span style="color: rgba(0, 0, 0, 1)">        }
</span><span style="color: rgba(0, 128, 128, 1)">449</span> 
<span style="color: rgba(0, 128, 128, 1)">450</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">451</span>         <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> éè¿æè½½è·¯å¾è·åç£çä¿¡æ¯
</span><span style="color: rgba(0, 128, 128, 1)">452</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;para&gt;</span><span style="color: rgba(0, 128, 0, 1)">åè·åç£çåè¡¨ï¼åç­é</span><span style="color: rgba(128, 128, 128, 1)">&lt;/para&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">453</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">454</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;param name="mountPath"&gt;&lt;/param&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">455</span>         <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;returns&gt;&lt;/returns&gt;</span>
<span style="color: rgba(0, 128, 128, 1)">456</span>         <span style="color: rgba(0, 0, 255, 1)">public</span> OperateResult&lt;LocalDisk&gt; GetDiskByMountPath(<span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)"> mountPath)
</span><span style="color: rgba(0, 128, 128, 1)">457</span> <span style="color: rgba(0, 0, 0, 1)">        {
</span><span style="color: rgba(0, 128, 128, 1)">458</span>             <span style="color: rgba(0, 0, 255, 1)">var</span> getDisksResult =<span style="color: rgba(0, 0, 0, 1)"> GetDisks();
</span><span style="color: rgba(0, 128, 128, 1)">459</span>             <span style="color: rgba(0, 0, 255, 1)">if</span> (!<span style="color: rgba(0, 0, 0, 1)">getDisksResult.Success)
</span><span style="color: rgba(0, 128, 128, 1)">460</span> <span style="color: rgba(0, 0, 0, 1)">            {
</span><span style="color: rgba(0, 128, 128, 1)">461</span>                 <span style="color: rgba(0, 0, 255, 1)">return</span> getDisksResult.ToResult&lt;LocalDisk&gt;<span style="color: rgba(0, 0, 0, 1)">();
</span><span style="color: rgba(0, 128, 128, 1)">462</span> <span style="color: rgba(0, 0, 0, 1)">            }
</span><span style="color: rgba(0, 128, 128, 1)">463</span> 
<span style="color: rgba(0, 128, 128, 1)">464</span>             <span style="color: rgba(0, 0, 255, 1)">var</span> iscsiDisks = getDisksResult.Data.FirstOrDefault(i =&gt;<span style="color: rgba(0, 0, 0, 1)"> i.MountPaths.Contains(mountPath));
</span><span style="color: rgba(0, 128, 128, 1)">465</span>             <span style="color: rgba(0, 0, 255, 1)">return</span> OperateResult&lt;LocalDisk&gt;<span style="color: rgba(0, 0, 0, 1)">.ToSuccess(iscsiDisks);
</span><span style="color: rgba(0, 128, 128, 1)">466</span>         }</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>åæ ·çéåç£çåè¡¨ï¼4åï¼ï¼é¦æ¬¡èæ¶20msï¼äºæ¬¡æ¥è¯¢ä»7msï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/685541/202601/685541-20260112203649643-1418202473.png" alt="image" loading="lazy"></p>
<p>å°è£WIN32ï¼å¼å¸¸ç åªæåºç¡çWin32Exceptionå¼å¸¸ç ï¼ä¸åPowershell Storageæç¸å¯¹ä¸å±æ´å¤çä¸å¡å¼å¸¸ç åå¼å¸¸æè¿°é£ä¹å¥½çè§£ã</p>
<p>æ¯å¦å¥æCreateFileå¤±è´¥,GetLastErrorå¼å¸¸ç æ¯&nbsp;0x00000002ï¼è½¬æ¢Win32Exceptionæè¿°ï¼âç³»ç»æ¾ä¸å°æå®çæä»¶âãé¬¼ç¥éæ¯å¥é®é¢ãããç»åä¸ä¸æï¼æç¥éåæ¥ç£çIsOfflineç¶ææ¯æ æ³æ¥æ¾å·ãä¹æ æ³åå»ºååºè®¿é®å¥æ</p>
<p>&nbsp;</p>
<p><strong>åå°.NETç£çç®¡çæ¹æ¡éåï¼</strong></p>
<p>æ²¡æå¤æçCç«¯ç¯å¢çè¯ãä»è¿ç»´ç­åºå®åºæ¯ï¼ç£çç®¡çæä½å¯ä»¥ä½¿ç¨Powersshell</p>
<p>å¯¹ç£çæä½è¦æ±ç¨³å®ãä½åæ³å¿«éå®ç°åè½ï¼è¾å°çç£çåè½è°ç¨ï¼æ¨èWMI</p>
<p>å¯¹ç£çæä½è¦æ±ç¨³å®ãæ§è½è¦æ±é«ï¼åäº§åçº§çå­å¨è½¯ä»¶ï¼æ¨èWIN32</p>
<p>&nbsp;</p>
<p>ç£çç¸å³çå¶å®æç« ï¼</p>
<p><a href="https://www.cnblogs.com/kybs0/p/18701464">Windows æ¬å°èæç£ç - åå®åææ¸2188 - åå®¢å­</a></p>
<a href="https://www.cnblogs.com/kybs0/p/18712317">Windows ç½ç»å­å¨ISCSIä»ç» - åå®åææ¸2188 - åå®¢å­</a><br>
<p><a href="https://www.cnblogs.com/kybs0/p/18766881">ç½ç»èæå­å¨ Iscsiå®ç°æ¹æ¡ - åå®åææ¸2188 - åå®¢å­</a></p>
</div>
<div id="MySignature" role="contentinfo">
    <div>ä½èï¼<a href="http://www.cnblogs.com/kybs0/" target="_blank">åå®åææ¸2188</a></div>
<div>åºå¤ï¼<a href="http://www.cnblogs.com/kybs0/" target="_blank">http://www.cnblogs.com/kybs0/</a></div>
<div>è®©å­¦ä¹ æä¸ºä¹ æ¯ï¼åè®¾æå¤©å°±æéå¤§æºéç­çä½ ï¼ä½ åå¤å¥½äºä¹</div>
<div>æ¬æçæå½ä½èååå®¢å­å±æï¼æ¬¢è¿è½¬è½½ï¼ä½æªç»ä½èåæå¿é¡»å¨æç« é¡µé¢ç»åºåæè¿æ¥ï¼å¦åä¿çè¿½ç©¶æ³å¾è´£ä»»çæå©ã </div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.4" data-date-updated="2026-01-13 09:26">2026-01-12 23:50</span>&nbsp;
<a href="https://www.cnblogs.com/kybs0">åå®åææ¸2188</a>&nbsp;
éè¯»(<span id="post_view_count">137</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19473484);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19473484', targetLink: 'https://www.cnblogs.com/kybs0/p/19473484', title: '.NET ç£çç®¡ç-ææ¯æ¹æ¡éå' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ å¹¶åï¼å¹¶è¡ä¸å¼æ­¥ ]]></title>
    <link>https://www.cnblogs.com/kklldog/p/19474533</link>
    <guid>7bbf19a360ac9d73f48557c00d34a6b4</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/kklldog/p/19474533" title="åå¸äº 2026-01-12 23:33">
    <span role="heading" aria-level="2">å¹¶åï¼å¹¶è¡ä¸å¼æ­¥</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>å¨æä¸ä¸ç¯é¢ä¸ºãä¸ºä»ä¹å¼æ­¥å¨IOæä½ä¸æææä¹ãçæç« åå¸åï¼æ¶å°äºå¾å¤åå­¦çåé¦ä¸æ¢è®¨ãå¨æ·±å¥äº¤æµåï¼æåç°ä¸ä¸ªæ®éçå°æç¹æµ®ç°åºæ¥ï¼å¶æ ¹æºå¨äºæ··æ·äºâå¹¶åâãâå¹¶è¡âä¸âå¼æ­¥âï¼ç¹å«æ¯ä¸æè¯å°å°å¼æ­¥ç­åäºå©ç¨å¤æ ¸CPUè¿è¡å¹¶è¡å¤çã</p>
<p>ä¸ºäºå½»åºæ¾æ¸è¿äºåºç¡ä½è³å³éè¦çæ¦å¿µï¼æä»¬æ·±å¥åæçè®ºååå¹¶ä¸åæ¶æå¼æä»¬æ¥å¸¸ä½¿ç¨çç°ä»£æ¡æ¶ï¼å¦.NETï¼ä¸­çå·ä½å®ç°ï¼è¿å¾å¾ä¼è¯¯å¯¼ï¼ï¼ä»¥è¾¨æå¹¶åï¼Concurrencyï¼ã<strong>å¹¶è¡ï¼parallelï¼åå¼æ­¥ï¼Asynchronousï¼</strong>è¿ä¸ä¸ªæ ¸å¿æ¦å¿µã</p>
<h2 id="æ ¸å¿æ¦å¿µè§£æ">æ ¸å¿æ¦å¿µè§£æ</h2>
<h3 id="ä»ä¹æ¯å¹¶åconcurrency">ä»ä¹æ¯å¹¶åï¼Concurrencyï¼ï¼</h3>
<p><img src="https://static.xbaby.xyz/blog/concurrency.jpg" alt="" loading="lazy"></p>
<ul>
<li>
<p>å®ä¹ï¼ å¹¶åæ¯æä¸ä¸ªç³»ç»æè½åå¨ä¸æ®µæ¶é´åå¤çå¤ä¸ªä»»å¡ãè¿äºä»»å¡çæ§è¡å¨å®è§ä¸æ¯éå çï¼ä½å¨å¾®è§ä¸æ¯éè¿ä»»å¡çäº¤æ¿æ§è¡å®ç°çã</p>
</li>
<li>
<p>ç²¾é«ï¼ Goè¯­è¨ä¹ç¶ Rob Pike å¯¹æ­¤æéå¸¸ç²¾è¾çè®ºè¿°ï¼âConcurrency is about dealing with lots of things at once.âï¼å¹¶åæ¯å³äºå¤çå¤ä»¶äºæçè½åï¼ãè¿éçå³é®è¯æ¯âdealing withâï¼å¤çï¼ï¼å®å¼ºè°çæ¯ä¸ç§ç¨åºç»æï¼ä½¿å¶è½å¤åºå¯¹åç®¡çå¤ä¸ªä»»å¡æµã</p>
</li>
<li>
<p>ä¸¾ä¾è¯´æï¼ ä¸ä¸ªé¤åçªç¶æ¥äºä¸ä¸ªå®¢äººï¼ä½é¤ååªæä¸ä¸ªæå¡åãä»æå¡åçè§åº¦æ¥çï¼ä»éè¦åæ¶æå¡è¿äºå®¢äººãå½ç¶è¿æ¯å®è§ä¸çåæ¶ï¼å ä¸ºæå¡åæ§è¡äºä»¶çéåº¦æ¯å¨æ¯å¤ªæ¢äºã</p>
</li>
</ul>
<h3 id="ä»ä¹æ¯å¹¶è¡parallel">ä»ä¹æ¯å¹¶è¡ï¼parallelï¼ï¼</h3>
<p><img src="https://static.xbaby.xyz/blog/%E5%B9%B6%E8%A1%8C.jpg" alt="" loading="lazy"></p>
<ul>
<li>
<p>å®ä¹ï¼ å¹¶è¡æ¯æç³»ç»è½å¤å¨åä¸ç©çæ¶å»çæ­£å°åæ¶æ§è¡å¤ä¸ªä»»å¡ã</p>
</li>
<li>
<p>åæï¼ å¹¶è¡å¿é¡»ä¾èµäºå¤æ ¸CPUãå¨å¤æ ¸å¤çå¨ä¸ï¼æ¯ä¸ªæ ¸å¿å¯ä»¥å¨å®å¨ç¸åçæ¶å»ç¬ç«å°æ§è¡ä¸ä¸ªä¸åçä»»å¡æä»¤ï¼å®ç°ç©çæä¹ä¸çâåæ¶âã</p>
</li>
<li>
<p>ç²¾é«ï¼ åæ ·å¼ç¨ Rob Pike çè®ºè¿°è¿è¡å¯¹æ¯ï¼âparallel is about doing lots of things at once.âï¼å¹¶è¡æ¯å³äºå®æå¤ä»¶äºæçè½åï¼ãè¿éçå³é®è¯æ¯âdoingâï¼å®æï¼ï¼å¼ºè°çæ¯ç©çä¸çåæ¶æ§è¡ï¼æ¯çæ­£æä¹ä¸çâä¸èµ·åâã</p>
</li>
<li>
<p>ä¸¾ä¾ï¼ è¿æ¯é¤åçä¾å­ï¼ä¸ä¸ªé¤åçªç¶æ¥äºä¸ä¸ªå®¢äººï¼é¤åè¿æ¬¡æ3ä¸ªæå¡åï¼æ¯ä¸ªæå¡åæ­£å¥½æå¡ä¸ä½å®¢äººãè¿å°±æ¯å¹¶è¡ã</p>
</li>
</ul>
<h3 id="ä»ä¹æ¯å¼æ­¥asynchronous">ä»ä¹æ¯å¼æ­¥ï¼Asynchronousï¼ï¼</h3>
<p><img src="https://static.xbaby.xyz/blog/async.jpg" alt="" loading="lazy"></p>
<ul>
<li>
<p>å®ä¹ï¼ å¼æ­¥æ¯ä¸ç§ç¼ç¨æ¨¡åææ¨¡å¼ï¼å¶æ ¸å¿ææ³æ¯éé»å¡ï¼Non-blockingï¼ãå®æè¿°çæ¯ä¸ç§è°ç¨è¡ä¸ºï¼å°¤å¶å¨å¤çèæ¶çI/Oæä½æ¶ï¼å¦ç½ç»è¯·æ±ãæ°æ®åºæ¥è¯¢ãæä»¶è¯»åï¼æ¾å¾è³å³éè¦ã</p>
</li>
<li>
<p>æºå¶ï¼ å½ä¸ä¸ªçº¿ç¨åèµ·ä¸ä¸ªå¼æ­¥I/Oæä½æ¶ï¼ä¾å¦ï¼å¨.NETä¸­è°ç¨ await client.GetStringAsync(...)ï¼ï¼å®å¹¶ä¸ä¼åå°é»å¡ç­å¾ãå®éåççè¿ç¨æ¯ï¼</p>
</li>
</ul>
<ol>
<li>è¯¥çº¿ç¨åæä½ç³»ç»ååºI/Oè¯·æ±ï¼ç¶åç«å³è¿åã</li>
<li>è¿ä¸ªå®è´µççº¿ç¨è¢«éæ¾åçº¿ç¨æ± ï¼å¯ä»¥ç«å³å»å¤çå¶ä»çå·¥ä½ï¼æ¯å¦ååºå¦ä¸ä¸ªç¨æ·çè¯·æ±ãCPUå®å¨æ²¡æè¢«é²ç½®ã</li>
<li>I/Oæä½ç±ç¡¬ä»¶ï¼å¦ç½å¡ãç£çæ§å¶å¨ï¼ç¬ç«å®æã</li>
<li>å½æä½å®æåï¼ç¡¬ä»¶ä¼åCPUåéä¸ä¸ªä¸­æ­ä¿¡å·ã</li>
<li>æä½ç³»ç»æè·è¿ä¸ªä¸­æ­ï¼å¹¶å°ä¸ä¸ªå®æäºä»¶æå¥éåã</li>
<li>çº¿ç¨æ± ä¸­çæä¸ªå¯ç¨çº¿ç¨ä¼ååºè¿ä¸ªäºä»¶ï¼å¹¶ä»ä¹å await çå°æ¹ç»§ç»­æ§è¡åç»­ä»£ç ã</li>
</ol>
<ul>
<li>
<p>ç®çï¼ å¼æ­¥çä¸»è¦ç®æ æ¯é¿åå¨ç­å¾I/Oå¯éåæä½æ¶æµªè´¹æè´µççº¿ç¨èµæºï¼ä»èç¨å°éççº¿ç¨å®ç°æé«çç³»ç»ååéåå¯ä¼¸ç¼©æ§ï¼ä¾å¦ï¼å¤çæåä¸ä¸çå¹¶åç½ç»è¿æ¥ï¼ãå®å³æ³¨çæ¯è°ç¨æ¹ççº¿ç¨æ¯å¦è¢«é»å¡ï¼èéä»»å¡æ¯å¦å¨å¤æ ¸ä¸åæ¶è¿è¡ã</p>
</li>
<li>
<p>è¯¯åºæ¾æ¸ï¼ âAsynchronous is not Concurrency.âï¼å¼æ­¥ä¸æ¯å¹¶åï¼ãè¿æ¯ä¸ä¸ªæå¶éè¦çåºåãå¼æ­¥æ¯ä¸ç§åè®¸ä»£ç ä»¥éçº¿æ§ï¼å¤ä»»å¡è§åº¦ï¼é¡ºåºæ­£ç¡®æ§è¡çå±æ§ï¼å®è½å¤ç¨æ¥å®ç°å¹¶åï¼ä½å¶æ¬èº«å¹¶éå¹¶åãå¼æ­¥å¯ä»¥å¨åçº¿ç¨ä¸å®ç°ï¼ä¸ä¸ªçº¿ç¨åèµ·è¯·æ±åå»åå«çäºï¼ï¼èå¹¶è¡åå¿é¡»æ¯å¤ä¸ªçº¿ç¨å¨å¤ä¸ªCPUæ ¸å¿ä¸åæ¶æ§è¡ã</p>
</li>
<li>
<p>ä¸¾ä¾ï¼ è¿æ¯é¤åçä¾å­ï¼ä¸ä¸ªé¤ååæ¶æ¥äºä¸ä¸ªå®¢äººï¼ä¸ä¸ªæå¡åæ¯äººä¸ä¸ªå®¢äººãæå¡åå¨ä¸å®ååæä¸¤ä¸ªéæ©ï¼</p>
</li>
</ul>
<ol>
<li>åæ­¥ï¼å¨åå¨é¨å£å»ç­ï¼ç´å°åºé¤åéå°å®¢äººæ¡ä¸ã</li>
<li>å¼æ­¥ï¼ä¸ååé©¬ä¸å»æ¥å¾å¶ä»å®¢äººæèå¤çå¶ä»äºæï¼ç­åå¨å¯¹è®²æºééç¥èç§å¥½äºæå»åé¤éé¤ã</li>
</ol>
<p><em>ï¼ï¼ï¼è¿éè¯·å¤§å®¶æ³¨æ ï¼ï¼ï¼ï¼</em></p>
<blockquote>
<p>å¼æ­¥æ¨¡åæä»¬å¼ºè°çæ¯è¿ä¸ªæå¡åè¢«éæ¾åºæ¥äºï¼ä»æ´å çµæ´»çè°åº¦ï¼ä»å¯ä»¥åæ´å¤çäºæ¥æé«é¤åçè¿è¡æçãè³äºåå¨åèè¿ä»¶äºæ¯ä¸ä¸ªå¨å¸æ¥åï¼è¿æ¯åä¸ªå¨å¸æ¥åé£æ¯å¦ä½æ´å¿«çåèçé®é¢ãè¿è·å¼æ­¥è¿æ¯åæ­¥æ²¡æå³ç³»ãåæ­¥æ¨¡å¼ä¸åèè¿ä»¶äºä¹å¯ä»¥è¯·åä¸ªå¨å¸æ¥åèå å¿«åºé¤çéåº¦ã</p>
</blockquote>
<h2 id="ä¸èçå³ç³»ä¸åºå«">ä¸èçå³ç³»ä¸åºå«</h2>
<p>ä¸ºäºæ´ç´è§å°çè§£å®ä»¬ï¼æä»¬å¯ä»¥éè¿ä¸ä¸ªè¡¨æ ¼æ¥å¯¹æ¯ï¼</p>
<table>
<thead>
<tr>
<th style="text-align: left">ç»´åº¦</th>
<th style="text-align: left">å¹¶å (Concurrency)</th>
<th style="text-align: left">å¹¶è¡ (parallel)</th>
<th style="text-align: left">å¼æ­¥ (Asynchronous)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left"><strong>æ ¸å¿ææ³</strong></td>
<td style="text-align: left">äº¤æ¿æ§è¡ï¼é»è¾ä¸åæ¶ï¼</td>
<td style="text-align: left">åæ¶æ§è¡ï¼ç©çä¸åæ¶ï¼</td>
<td style="text-align: left">éé»å¡ä¸åè°/ç»­å»¶</td>
</tr>
<tr>
<td style="text-align: left"><strong>CPUè¦æ±</strong></td>
<td style="text-align: left">åæ ¸å³å¯</td>
<td style="text-align: left">å¿é¡»å¤æ ¸</td>
<td style="text-align: left">ä¸æ ¸å¿æ°æ ç´æ¥å³ç³»</td>
</tr>
<tr>
<td style="text-align: left"><strong>å¤çæ¹å¼</strong></td>
<td style="text-align: left">OSè°åº¦å¨æ¶é´åç</td>
<td style="text-align: left">å¤æ ¸ç©çæ§è¡</td>
<td style="text-align: left">åèµ·I/Oåéæ¾çº¿ç¨</td>
</tr>
<tr>
<td style="text-align: left"><strong>è§£å³é®é¢</strong></td>
<td style="text-align: left">åºå¯¹é»è¾ä¸éè¦åæ¶å¤çå¤ä»»å¡çåºæ¯</td>
<td style="text-align: left">æåè®¡ç®å¯éåä»»å¡çæ§è¡æç</td>
<td style="text-align: left">é¿åI/Oå¯éåä»»å¡é»å¡ï¼æåç³»ç»ååé</td>
</tr>
</tbody>
</table>
<h2 id="æ»ç»">æ»ç»</h2>
<p>æ»èè¨ä¹ï¼å¹¶åãå¹¶è¡åå¼æ­¥æ¯ä»ä¸åç»´åº¦æè¿°ä»»å¡æ§è¡æ¹å¼çæ¦å¿µãå¹¶åæ¯ä¸ç§ç¨åºè®¾è®¡ç»æï¼ä½¿å¶è½å¤é»è¾ä¸å¤çå¤ä¸ªä»»å¡ï¼å¹¶è¡æ¯å©ç¨ç¡¬ä»¶ï¼å¤æ ¸CPUï¼å¨ç©çä¸åæ¶æ§è¡å¤ä¸ªä»»å¡çè®¡ç®è½åï¼èå¼æ­¥æ¯ä¸ç§ç¼ç¨èå¼ï¼éè¿éé»å¡IOè°ç¨æ¥æè´å°æé«ç³»ç»èµæºçå©ç¨çã</p>
<h2 id="å³æ³¨æçå¬ä¼å·ä¸èµ·ç©è½¬ææ¯">å³æ³¨æçå¬ä¼å·ä¸èµ·ç©è½¬ææ¯</h2>
<p><img src="https://static.xbaby.xyz/qrcode.jpg" alt="" loading="lazy"></p>

</div>
<div id="MySignature" role="contentinfo">
    <div id="AllanboltSignature">        
<p id="PSignature" style="border-top: #e0e0e0 1px dashed; border-right: #e0e0e0 1px dashed; border-bottom: #e0e0e0 1px dashed; border-left: #e0e0e0 1px dashed; padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 10px; font-family: å¾®è½¯éé»; font-size: 11px">       
QQç¾¤ï¼1022985150 VXï¼kklldog ä¸èµ·æ¢è®¨å­¦ä¹ .NETææ¯
<br>
ä½èï¼<a href="http://www.cnblogs.com/kklldog" target="_blank">Agile.Zhou(kklldog)</a>            
<br> 
åºå¤ï¼<a href="http://www.cnblogs.com/kklldog/" target="_blank">http://www.cnblogs.com/kklldog/</a>
<br>æ¬æçæå½ä½èååå®¢å­å±æï¼æ¬¢è¿è½¬è½½ï¼ä½æªç»ä½èåæå¿é¡»ä¿çæ­¤æ®µå£°æï¼ä¸å¨æç« é¡µé¢ææ¾ä½ç½®ç»åºåæè¿æ¥ï¼å¦åä¿çè¿½ç©¶æ³å¾è´£ä»»çæå©ã
 </p>  
</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-12 23:33">2026-01-12 23:33</span>&nbsp;
<a href="https://www.cnblogs.com/kklldog">Agile.Zhou</a>&nbsp;
éè¯»(<span id="post_view_count">102</span>)&nbsp;
è¯è®º(<span id="post_comment_count">1</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19474533);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19474533', targetLink: 'https://www.cnblogs.com/kklldog/p/19474533', title: 'å¹¶åï¼å¹¶è¡ä¸å¼æ­¥' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨äºï¼èªç¶è¯­è¨å¤ç  ç¬¬ä¸å¨ï¼å¾ªç¯ç¥ç»ç½ç» ï¼å­ï¼é¿ç­æè®°å¿ LSTM ]]></title>
    <link>https://www.cnblogs.com/Goblinscholar/p/19474433</link>
    <guid>6ab25167f20ce9f74a70f8eb27ecc473</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Goblinscholar/p/19474433" title="åå¸äº 2026-01-12 22:25">
    <span role="heading" aria-level="2">å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨äºï¼èªç¶è¯­è¨å¤ç  ç¬¬ä¸å¨ï¼å¾ªç¯ç¥ç»ç½ç» ï¼å­ï¼é¿ç­æè®°å¿ LSTM</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>æ­¤åç±»ç¨äºè®°å½å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨çå­¦ä¹ ç¬è®°ã<br>
è¯¾ç¨ç¸å³ä¿¡æ¯é¾æ¥å¦ä¸ï¼</p>
<ol>
<li>åè¯¾ç¨è§é¢é¾æ¥ï¼<a href="https://www.bilibili.com/video/BV1FT4y1E74V?buvid=XU762317353676D786954061C192FE625463B&amp;from_spmid=playlist.playlist-detail.0.0&amp;is_story_h5=false&amp;mid=zqernykrmpf7XfIorMR%2FnA%3D%3D&amp;plat_id=116&amp;share_from=ugc&amp;share_medium=android&amp;share_plat=android&amp;share_session_id=ce0bc526-db69-428a-962e-c65ed8c267bc&amp;share_source=COPY&amp;share_tag=s_i&amp;spmid=united.player-video-detail.0.0&amp;timestamp=1713085655&amp;unique_k=DfBgvFW&amp;up_id=8654113&amp;vd_source=e035e9878d32f414b4354b839a4c31a4" target="_blank" rel="noopener nofollow">[åè¯­å­å¹]å´æ©è¾¾æ·±åº¦å­¦ä¹ deeplearning.ai</a></li>
<li>githubè¯¾ç¨èµæï¼å«è¯¾ä»¶ä¸ç¬è®°:<a href="https://github.com/robbertliu/deeplearning.ai-andrewNG" target="_blank" rel="noopener nofollow">å´æ©è¾¾æ·±åº¦å­¦ä¹ æå­¦èµæ</a></li>
<li>è¯¾ç¨éå¥ç»ä¹ ï¼ä¸­è±ï¼ä¸ç­æ¡ï¼<a href="https://blog.csdn.net/u013733326/article/details/79827273" target="_blank" rel="noopener nofollow">å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾åä¹ é¢ä¸ç­æ¡</a></li>
</ol>
<p>æ¬ç¯ä¸ºç¬¬äºè¯¾çç¬¬ä¸å¨åå®¹ï¼<a href="https://www.bilibili.com/video/BV1FT4y1E74V/?spm_id_from=333.788.videopod.episodes&amp;vd_source=e035e9878d32f414b4354b839a4c31a4&amp;p=160" target="_blank" rel="noopener nofollow">1.10</a>çåå®¹ä»¥åä¸äºç¸å³åºç¡çè¡¥åã</p>
<hr>
<p>æ¬å¨ä¸ºç¬¬äºè¯¾çç¬¬ä¸å¨åå®¹ï¼ä¸ CV ç¸å¯¹åºçï¼è¿ä¸è¯¾ææåå®¹çä¸­å¿åªæä¸ä¸ªï¼<strong>èªç¶è¯­è¨å¤çï¼Natural Language Processingï¼NLPï¼</strong>ã<br>
åºç¨å¨æ·±åº¦å­¦ä¹ éï¼å®æ¯ä¸é¨ç¨æ¥è¿è¡<strong>ææ¬ä¸åºåä¿¡æ¯å»ºæ¨¡</strong>çæ¨¡ååææ¯ï¼æ¬è´¨ä¸æ¯å¨å¨è¿æ¥ç½ç»ä¸ç»è®¡è¯­è¨æ¨¡ååºç¡ä¸çä¸æ¬¡âç»æåç¹åâï¼ä¹æ¯äººå·¥æºè½ä¸­<strong>æè´´è¿äººç±»æç»´è¡¨è¾¾æ¹å¼</strong>çéè¦ç ç©¶æ¹åä¹ä¸ã<br>
<strong>è¿ä¸æ´èè¯¾åæ ·æ¶åå¤§ééè¦åå¤æ¶åçåå®¹ï¼æ¨ªè·¨æºå¨å­¦ä¹ ãæ¦çç»è®¡ãçº¿æ§ä»£æ°ä»¥åè¯­è¨å­¦ç´è§ã</strong><br>
è¯­è¨ä¸åå¾åé£æ ·âç´è§å¯è§âï¼æ´å¤æ¯æ½è±¡ç¬¦å·ä¸ä¸ä¸æå³ç³»çç»åï¼å æ­¤<strong>çè§£é¨æ§åèæ´é«</strong>ã<br>
å æ­¤ï¼æåæ ·ä¼å°½éè¡¥è¶³å¿è¦çèæ¯ç¥è¯ï¼å°½å¯è½ç¨æ¯å»åå®ä¾éä½çè§£é¾åº¦ã<br>
æ¬ç¯çåå®¹å³äº<strong>é¿ç­æè®°å¿ LSTM</strong>ï¼å®å GRU ä¸æ ·ï¼æ¯æåç¼è§£ RNN çé¿è·ç¦»ä¾èµé®é¢ä¸æµè¡è³ä»çææ¯ã</p>
<h1 id="1-ä»ä¹æ¯-lstmlong-short-term-memory">1. ä»ä¹æ¯ LSTMï¼Long Short-Term Memoryï¼ï¼</h1>
<p>å¨ <a href="https://www.cnblogs.com/Goblinscholar/p/19463351" target="_blank">GRU</a> ä¸­ï¼æä»¬å·²ç»çå°ï¼<strong>éè¿é¨æ§æºå¶å¯¹ä¿¡æ¯æµè¿è¡éæ©æ§æ§å¶ï¼ç¡®å®å¯ä»¥æ¾èç¼è§£ä¼ ç» RNN çé¿è·ç¦»ä¾èµé®é¢</strong>ã<br>
æ è®ºæ¯æ´æ°é¨å¯¹åå²ä¿¡æ¯çä¿çï¼è¿æ¯éç½®é¨å¯¹å½åè¾å¥çå¼ºè°ï¼æ¬è´¨ä¸é½æ¯å¨åç­åä¸ä¸ªé®é¢ï¼<strong>åªäºä¿¡æ¯å¼å¾è¢«ç»§ç»­ä¼ éï¼åªäºå¯ä»¥è¢«éå¿ã</strong></p>
<p>ç¶èï¼ä»æ´é¿æ¶é´è·¨åº¦çå»ºæ¨¡éæ±æ¥çï¼GRU <strong>ä»ç¶å­å¨ä¸ä¸ªç»æä¸çå±é</strong>ï¼å®ä¾ç¶åªæ<strong>åä¸çéèç¶æ</strong>æ¥åæ¶æ¿æâç­æè®¡ç®ç»æâåâé¿æè®°å¿è½½ä½âè¿ä¸¤ç§è§è²ã<br>
è¿æå³çï¼<strong>å³ä¾¿å¼å¥äºé¨æ§æºå¶ï¼ä¸åæ¶é´å°ºåº¦çä¿¡æ¯ä»ç¶è¢«è¿«æ··åå¨åä¸æ¡ç¶æééä¸­ä¼ é</strong>ï¼å¨æé¿åºåæç²¾ç»æ¶åºæ§å¶çåºæ¯ä¸ï¼è¿ç§è¦åä»å¯è½éå¶æ¨¡åçè¡¨è¾¾è½åã</p>
<p>è<strong>LSTM</strong>ä¾¿è½åºå¯¹è¿ç±»é®é¢ï¼æ©å¨ <strong>1997</strong> å¹´ï¼Hochreiter å Schmidhuber å¨è®ºæï¼<a href="https://www.bioinf.jku.at/publications/older/2604.pdf" target="_blank" rel="noopener nofollow">Long Short-Term Memory</a>ä¸­ï¼ä¾¿ä»çè®ºå±é¢ç³»ç»æ§å°åæäº RNN ä¸­æ¢¯åº¦æ¶å¤±çé®é¢ï¼å¹¶ç»åºäºä¸ç§<strong>ç»ææ§è§£å³æ¹æ¡</strong>ï¼éè¿æ¾å¼å¼å¥ä¸æ¡<strong>ä¸é¨ç¨äºé¿æä¿¡æ¯ä¼ éçè®°å¿ååï¼cell stateï¼</strong>ï¼å¹¶éåç²¾ç»è®¾è®¡çé¨æ§ç»æï¼ä½¿å¾å³é®ä¿¡æ¯å¯ä»¥å¨é¿æ¶é´è·¨åº¦åå ä¹ä¸åå¹²æ°å°ååä¼ æ­ã</p>
<p>è¿éè¦è¯´æä¸ç¹ï¼ä½ ä¼åç°ï¼ä»æ¶é´é¡ºåºä¸çï¼<strong>LSTM çæåºæ©äº GRU</strong>ã<br>
LSTM æ¯ææ©ä»ç»æå±é¢ç³»ç»æ§è§£å³ RNN é¿è·ç¦»ä¾èµé®é¢çé¨æ§å¾ªç¯ååã<br>
è<strong>å¨ä¸ä¸ç¯æä»¬è¯´ GRU å¯ä»¥çä½ LSTM çä¸ç§ç®åå½¢å¼</strong>ï¼æ­£æ¯å ä¸ºå®å¨ LSTM çåºç¡ä¸åå¹¶äºé¨åé¨æ§ç»æï¼åæ¶äºæ¾å¼çè®°å¿ååï¼ç¨æ´ç´§åçå½¢å¼å®ç°äºç¸ä¼¼çå»ºæ¨¡ç®æ ã</p>
<p>ä¹æ­£å ä¸ºè¿ç§ç®åï¼GRU å¨åæ°æ°éãè®¡ç®å¼éä»¥åå·¥ç¨å®ç°å¤æåº¦ä¸é½æ´ä¸ºåå¥½ã<br>
å æ­¤ï¼å¨è®¸å¤å®éä»»å¡ä¸­ï¼å½åºåé¿åº¦å¹¶æªæç«¯æé¿ï¼æå¯¹é¿æè®°å¿çç²¾ç»æ§å¶è¦æ±ä¸é«æ¶ï¼<strong>GRU å¾å¾è½å¤ä»¥æ´ä½çææ¬è·å¾ä¸ LSTM æ¥è¿çæ§è½</strong>ãè¿ä¹æ¯ä¸ºä»ä¹ï¼å°½ç®¡ LSTM å¨çè®ºä¸å·å¤æ´å¼ºçè¡¨è¾¾ä¸è®°å¿è½åï¼<strong>ç»ææ´ç®åç GRU ä»ç¶å¨å¤§é NLP ä¸æ¶åºå»ºæ¨¡åºæ¯ä¸­è¢«å¹¿æ³éç¨</strong>ã</p>
<p>åæ ·ç®åè¿äºè¿åå²ï¼ä¸é¢æä»¬æ¥å±å¼ä»ç»ã</p>
<h2 id="11-gru-ççè®ºå±é">1.1 GRU ççè®ºå±é</h2>
<p>å¨ GRU ä¸­ï¼æä»¬å·²ç»çå°ï¼éè¿å¼å¥æ´æ°é¨åéç½®é¨ï¼æ¨¡åä¸åè¢«å¨å°âè®°ä½ä¸åâï¼èæ¯å­¦ä¼äº<strong>éæ©æ§ä¿çä¸éæ©æ§ä½¿ç¨åå²ä¿¡æ¯</strong>ã<br>
è¿ä½¿å¾ RNN å¨é¿åºåå»ºæ¨¡ä¸­çè¡¨ç°å¾å°äºæ¾èæ¹åã</p>
<p>ä½å¦ææä»¬ç»§ç»­è¿½é®ä¸ä¸ªé®é¢ï¼<strong>è¿äºè¢«âç²¾å¿ç­éâçåå²ä¿¡æ¯ï¼å°åºè¢«å­æ¾å¨åªéï¼</strong><br>
ç­æ¡æ¯ï¼<strong>ä»ç¶å¨åä¸ä¸ªéèç¶æéã</strong></p>
<p>ä¹å°±æ¯è¯´ï¼å¨ GRU ä¸­ï¼éèç¶ææ¢æ¿æ<strong>å½åè®¡ç®ç»æ</strong>ï¼åæ¿æ<strong>é¿æè®°å¿è½½ä½</strong>ã<br>
è¿æ ·åçç»æå°±æ¯æä»¬ååæå°çï¼ææä¿¡æ¯ï¼æ è®ºæ¶é´å°ºåº¦é¿ç­ï¼æç»é½è¦âæ¤âå¨åä¸ä¸ªåéä¸­ä¼ éï¼å¯è½éå¶æ¨¡åçè¡¨è¾¾è½åã</p>
<p>å¨å¤æ°ä»»å¡ä¸­ï¼è¿å·²ç»è¶³å¤ææï¼ä½å¨<strong>æé¿åºåãç²¾ç»æ¶åºæ§å¶æé¿æè¯­ä¹ä¸è´æ§è¦æ±å¾é«</strong>çåºæ¯ä¸ï¼è¿ç§âæ··åå­å¨âä»ç¶å¯è½æä¸ºç¶é¢ã<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260112222201121-1094822425.png" alt="image.png" loading="lazy"></p>
<h2 id="12-lstm-çè®°å¿ç»è">1.2 LSTM çè®°å¿ç»è</h2>
<p>å®éä¸ï¼LSTM çè®¾è®¡å°±è½å¾å¥½çè§£å³ååçæ··åå­å¨é®é¢ã<br>
å®å¼å¥äºä¸ä¸ª<strong>ç»æå±é¢çæ¹å</strong>ï¼<strong>ä¸åè®©åä¸ä¸ªç¶æåæ¶è´è´£âé¿æè®°å¿âåâç­æè®¡ç®âã</strong></p>
<p>ä¸ºæ­¤ï¼LSTM æç¡®åºåäºä¸¤æ¡ä¿¡æ¯ééï¼</p>
<ul>
<li><strong>ç»èç¶æï¼cell stateï¼ <span class="math inline">\(c^{}\)</span></strong>  â ä¸é¨è´è´£<strong>é¿æä¿¡æ¯çå­å¨ä¸ä¼ éã</strong></li>
<li><strong>éèç¶æï¼hidden stateï¼ <span class="math inline">\(a^{}\)</span></strong>  â è´è´£<strong>å½åæ¶å»çè¾åºä¸ç­æè®¡ç®ã</strong></li>
</ul>
<p>ä½ å¯ä»¥æå®çè§£ä¸ºï¼</p>
<blockquote>
<p>éèç¶ææ¯âå½åèå­éå¨æ³ä»ä¹âï¼<br>
ç»èç¶ææ¯âä¸æ¡å ä¹ä¸è¢«ææ°çé¿æå¤å¿å½âã</p>
</blockquote>
<p>è¿ä¹æ¯ LSTM åå­ä¸­ <strong>Long Short-Term</strong> çå«ä¹ï¼  <strong>é¿æä¿¡æ¯ï¼Long-Termï¼åç­æä¿¡æ¯ï¼Short-Termï¼å¨ç»æä¸è¢«æ¾å¼åºåäºã</strong><br>
<img src="https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260112222133456-1134110847.png" alt="image.png" loading="lazy"><br>
æä¸ªæ¯æ¹æ¥æ»ç» GRU å LSTM çå·®å«ï¼GRUåæ¯å¨<strong>ä¸å¼ çº¸ä¸åå¤ä¿®æ¹åå®¹</strong>ï¼LSTMååæ¯<strong>åç¬åå¤äºä¸æ¬ç¬è®°æ¬</strong>ã</p>
<h2 id="13-lstm-çé¨æ§æºå¶">1.3 LSTM çé¨æ§æºå¶</h2>
<p>æ¢ç¶å¼å¥äºä¸é¨çè®°å¿ç»èæ¥ä½ä¸º LSTM ä¸­ç<strong>é¿æè®°å¿éé</strong>ï¼æ°çé®é¢èªç¶åºç°äºï¼è¿æ¡è®°å¿ï¼ä»ä¹æ¶åè¯¥ä¿çï¼ ä»ä¹æ¶åè¯¥æ´æ°ï¼ä»ä¹æ¶åè¯¥è¾åºç»å½åè®¡ç®ä½¿ç¨ï¼</p>
<p>ç­æ¡ä¾ç¶æ¯ï¼<strong>é¨æ§æºå¶</strong>ã<br>
ç®åæ¥è¯´ï¼LSTM éè¿ä¸éé¨æ¥ç²¾ç»æ§å¶é¿æè®°å¿ï¼</p>
<ol>
<li><strong>éå¿é¨ï¼Forget Gateï¼</strong>ï¼å³å®æ§è®°å¿ä¿çå¤å°ã</li>
<li><strong>è¾å¥é¨ï¼Input Gateï¼</strong>ï¼å³å®æ°ä¿¡æ¯åå¥å¤å°ã</li>
<li><strong>è¾åºé¨ï¼Output Gateï¼</strong>ï¼å³å®å½åæ¶å»å¯¹å¤æ´é²å¤å°è®°å¿ã</li>
</ol>
<p><img src="https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260112222316186-1000139547.png" alt="image.png" loading="lazy"></p>
<p>ä¹æ­£æ¯å ä¸ºè¿äºé¨çå­å¨ï¼ <strong>cell state æè½å¤å¨æ¶é´ç»´åº¦ä¸ç¨³å®æµå¨ï¼èä¸è¢«é¢ç¹æ¹å</strong>ã<br>
æäº GRU çåºç¡åï¼æä»¬å°±ä¸ååç¬éä¸ªå±å¼æ¯éé¨çè¯­ä¹äºï¼å¨ä¸é¢çå®ç°é¨ååæ¥è¯¦ç»å±å¼å®ä»¬çä½ç¨é»è¾ã</p>
<h1 id="2-å¦ä½å®ç°-lstm">2. å¦ä½å®ç° LSTMï¼</h1>
<p>å¨ä¹åç GRU ä¸­ï¼æä»¬å·²ç»çå°ï¼<strong>é¨æ§çæ¬è´¨ä¸æ¯å¢å å¤æåº¦ï¼èæ¯ä¸ºâä¿¡æ¯æ¯å¦ç»§ç»­å­å¨âæä¾å¯å­¦ä¹ çéæ©æã</strong></p>
<p>LSTM å¨è¿ä¸ªææ³ä¸æ´è¿ä¸æ­¥ï¼å®ä¸åè¯å¾è®©<strong>åä¸ä¸ªç¶æ</strong>åæ¶æ¿æâé¿æè®°å¿âåâå½åè®¡ç®âï¼ èæ¯<strong>æ¾å¼å¼å¥äºä¸æ¡å ä¹çº¿æ§ä¼ æ­çé¿æè®°å¿ééââç»èç¶æ <span class="math inline">\(c^{\langle t \rangle}\)</span></strong>ï¼å¹¶éè¿éå¿é¨ï¼è¾å¥é¨åè¾åºé¨æ¥æ§å¶ç»èç¶æã<br>
äºè§£äºåºæ¬åçåï¼ç°å¨å°±æ¥ççï¼å¨ä¸ä¸ªæ¶é´æ­¥ <span class="math inline">\(t\)</span>ï¼ä¸ä¸ªæ å LSTM ååæ¯å¦ä½å®ç°çã<br>
å®éä¸ï¼å®åªæ¯æ¯ GRU å¤äºäºæ­¥éª¤ï¼å¨æäº GRU çåºç¡åï¼LSTM çå®ç°å¹¶ä¸é¾çè§£ï¼åæåºå®çååç»æå¾å¦ä¸ï¼<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260112222130915-556405424.png" alt="image.png" loading="lazy"><br>
è¦å¼ºè°çè¿æ¯æä»¬ä»ç»çè®¡ç®é¡ºåºæ¯<strong>é»è¾ä¸çååé¡ºåº</strong>ï¼å®éä¸å¾å¤æ­¥éª¤é½æ¯å¯ä»¥åæ­¥è®¡ç®çã</p>
<h2 id="21-è®¡ç®éå¿é¨forget-gate">2.1 è®¡ç®éå¿é¨ï¼Forget Gateï¼</h2>
<p>LSTM çç¬¬ä¸æ­¥ï¼æ¯è®¡ç® <strong>éå¿é¨</strong> <span class="math inline">\(f^{\langle t \rangle}\)</span>ã</p>
<p>å®çä½ç¨å°±ç¸å½äº GRU çéç½®é¨ï¼<strong>å¯¹ä¸ä¸æ¶å»çç»èç¶æ <span class="math inline">\(c^{\langle t-1 \rangle}\)</span> è¿è¡âææ¯ä¾ä¿çâã</strong><br>
ä½è¦æ³¨æï¼è¿éæ¯â<strong>ç»èç¶æ</strong>â èä¸æ¯ â<strong>éèç¶æ</strong>âã<br>
è¿ç¨å¦ä¸ï¼<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260112222131252-989637007.png" alt="image.png" loading="lazy"><br>
è®¡ç®å¬å¼è¿æ¯æ¯çº¿æ§ç»åï¼</p>
<p></p><div class="math display">\[f^{\langle t \rangle}  
= sigmoid\big( W_{xf} x^{\langle t \rangle} + W_{af} a^{\langle t-1 \rangle} + b_f \big)  
\]</div><p></p><p>éå¿é¨å¼çå«ä¹æ¯è¿æ ·çï¼</p>
<ul>
<li><span class="math inline">\(f^{\langle t \rangle}_i \approx 1\)</span>ï¼ç¬¬ <span class="math inline">\(i\)</span> ä¸ªè®°å¿ååå ä¹<strong>å®å¨ä¿ç</strong>ã</li>
<li><span class="math inline">\(f^{\langle t \rangle}_i \approx 0\)</span>ï¼ç¬¬ <span class="math inline">\(i\)</span> ä¸ªè®°å¿ååè¢«<strong>ä¸»å¨éå¿</strong>ã</li>
</ul>
<p>è¿éåºç°äºæ°çåå®¹éè¦è¯´æï¼<strong>ç»èç¶æ <span class="math inline">\(c^{\langle t \rangle}\)</span> ä¸éèç¶æ <span class="math inline">\(a^{\langle t \rangle}\)</span> å¨ç»´åº¦ä¸æ¯ä¸è´ç</strong>ã<br>
è¥éèç¶ææ¯ä¸ä¸ª <span class="math inline">\(d\)</span> ç»´åéï¼é£ä¹ç»èç¶æåæ ·åå« <span class="math inline">\(d\)</span> ä¸ª<strong>è®°å¿åå</strong>ã<br>
å æ­¤ï¼éå¿é¨ <span class="math inline">\(f^{\langle t \rangle}\)</span> çæ¯ä¸ä¸ªåé <span class="math inline">\(f_i^{\langle t \rangle}\)</span>ï¼å¹¶ä¸æ¯æ§å¶âä¸æ´æ®µè®°å¿âï¼èæ¯<strong>ç¬ç«æ§å¶ç¬¬ <span class="math inline">\(i\)</span> ä¸ªè®°å¿ååå¨æ¶é´ç»´åº¦ä¸çä¿çæ¯ä¾</strong>ã</p>
<p>åç»åä¸ä¸ GRU ï¼ä½ ä¼åç°ï¼è¿æ®µé»è¾å¨GRUä¸­ä»¥éç½®é¨çå½¢å¼å®æ´ä¿çäºã</p>
<h2 id="22-è®¡ç®è¾å¥é¨input-gate">2.2 è®¡ç®è¾å¥é¨ï¼Input Gateï¼</h2>
<p>LSTM çç¬¬äºæ­¥ï¼æ¯è®¡ç® <strong>è¾å¥é¨</strong> <span class="math inline">\(i^{\langle t \rangle}\)</span>ã</p>
<p>å®çä½ç¨æ¯ï¼<strong>å³å®å½åæ­¥çæçæ°ä¿¡æ¯æå¤å°å¯ä»¥åå¥ç»èç¶æ <span class="math inline">\(c^{\langle t \rangle}\)</span></strong>ã<br>
æ¢å¥è¯è¯´ï¼å®æ§å¶äºâæ°è®°å¿æ´æ°æ¯ä¾âï¼å¨åè½ä¸ç±»ä¼¼ GRU çæ´æ°é¨ï¼ä½å¨ LSTM ä¸­ï¼å®åªè´è´£ <strong>æ°ä¿¡æ¯åå¥</strong>ï¼èåå²ä¿¡æ¯ä¿çç±éå¿é¨æ§å¶ã</p>
<p>è¿ç¨å¦ä¸ï¼<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260112222315717-85455316.png" alt="image.png" loading="lazy"><br>
å¬å¼è¡¨ç¤ºä¸ºï¼</p>
<p></p><div class="math display">\[i^{\langle t \rangle} = sigmoid\big( W_{xi} x^{\langle t \rangle} + W_{ai} a^{\langle t-1 \rangle} + b_i \big)  
\]</div><p></p><p>è¾å¥é¨å¼çè¯­ä¹åæ ·æ¸æ°ï¼</p>
<ul>
<li><span class="math inline">\(i_i^{\langle t \rangle} \approx 1\)</span>ï¼ç¬¬ <span class="math inline">\(i\)</span> ä¸ªè®°å¿ååå ä¹<strong>å¨é¨æ¥æ¶æ°ä¿¡æ¯</strong>ã</li>
<li><span class="math inline">\(i_i^{\langle t \rangle} \approx 0\)</span>ï¼ç¬¬ <span class="math inline">\(i\)</span> ä¸ªè®°å¿ååå ä¹<strong>ä¸åå¥æ°ä¿¡æ¯</strong>ã</li>
</ul>
<p>åæ ·å°ï¼è¾å¥é¨ <span class="math inline">\(i^{\langle t \rangle}\)</span> ä¸ç»èç¶æ <span class="math inline">\(c^{\langle t \rangle}\)</span> çç»´åº¦ä¸è´ï¼æ¯ä¸ªåéç¬ç«æ§å¶å¯¹åºè®°å¿ååçåå¥æ¯ä¾ã<br>
è¿æ ·åå¯ä»¥ä¿è¯ <strong>é¿æè®°å¿å¨æ¶é´ç»´åº¦ä¸æ¢ä¿çéè¦ä¿¡æ¯ï¼åæéæ´æ°æ°åå®¹</strong>ï¼å®ç°æ´ç²¾ç»çè®°å¿ç®¡çã</p>
<h2 id="23-è®¡ç®åéç»èç¶æcandidate-cell-state">2.3 è®¡ç®åéç»èç¶æï¼Candidate Cell Stateï¼</h2>
<p>è¿æ¯è¦åå¼ºè°ä¸ç¹ï¼è¿æ¯â<strong>åéç»èç¶æ</strong>âï¼ä¸æ¯â<strong>åééèç¶æ</strong>âãå°è¿ä¸æ­¥ï¼éèç¶æè¿æ²¡æåºåºã</p>
<p>å¨è®¡ç®å®è¾å¥é¨ <span class="math inline">\(i^{\langle t \rangle}\)</span> ä¹åï¼LSTM çä¸ä¸æ­¥æ¯çæ <strong>åéç»èç¶æ</strong> <span class="math inline">\(\tilde{c}^{\langle t \rangle}\)</span>ã<br>
å®çä½ç¨æ¯ï¼<strong>è¡¨ç¤ºå½åæ­¥çæ°ä¿¡æ¯åå®¹</strong>ï¼ç±å½åè¾å¥ <span class="math inline">\(x^{\langle t \rangle}\)</span> åä¸ä¸æ¶å»éèç¶æ <span class="math inline">\(a^{\langle t-1 \rangle}\)</span> å±åå³å®ï¼ä½å°æªåå¥ç»èç¶æ <span class="math inline">\(c^{\langle t \rangle}\)</span>ã<br>
æ¢å¥è¯è¯´ï¼åéç»èç¶æå°±æ¯ <strong>åå¤å¥½å¯ä»¥åå¥çâæ°è®°å¿â</strong>ã<br>
è®¡ç®è¿ç¨å¦ä¸ï¼<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260112222130982-1988780214.png" alt="image.png" loading="lazy"></p>
<p>å¬å¼è¡¨ç¤ºä¸ºï¼</p>
<p></p><div class="math display">\[\tilde{c}^{\langle t \rangle} = \tanh\big( W_{xc} x^{\langle t \rangle} + W_{ac} a^{\langle t-1 \rangle} + b_c \big)  
\]</div><p></p><p>å°åä¸ä¸æ­¥ä½ å°±ä¼åç°ï¼åéç¶ææ¬èº«å¹¶ä¸ç´æ¥å½±åæç»è¾åºï¼å®åªæ¯è¡¨ç¤ºâæå¤å°æ°è®°å¿âï¼è<strong>è¾å¥é¨ <span class="math inline">\(i^{\langle t \rangle}\)</span></strong> æå³å®âåå¥å¤å°æ°è®°å¿âã<br>
è¿æ®µè®¾è®¡ä¸åäº GRUï¼<strong>LSTM å°âæ°ä¿¡æ¯çæâåâæ°ä¿¡æ¯åå¥âæç¡®åç¦»</strong>ï¼æ¹ä¾¿éè¿é¨æ§ç²¾ç»æ§å¶è®°å¿æ´æ°ã</p>
<h2 id="24-æ´æ°ç»èç¶æ">2.4 æ´æ°ç»èç¶æ</h2>
<p>ç°å¨æä»¬å·²ç»æäºè¿æ ·ä¸è¥¿ï¼</p>
<ul>
<li>ä¸ä¸æ¶å»çç»èç¶æ <span class="math inline">\(c^{\langle t-1 \rangle}\)</span>ï¼æ§é¿æè®°å¿ï¼</li>
<li>éå¿é¨ <span class="math inline">\(f^{\langle t \rangle}\)</span>ï¼ä¿çæ¯ä¾ï¼</li>
<li>è¾å¥é¨ <span class="math inline">\(i^{\langle t \rangle}\)</span> ä¸åéè®°å¿ <span class="math inline">\(\tilde{c}^{\langle t \rangle}\)</span>ï¼æ°ä¿¡æ¯ï¼<br>
LSTM ä¼ç¨ä¸é¢è¿ä¸ª<strong>æ ¸å¿å¬å¼</strong>æ¥æ´æ°é¿æè®°å¿ï¼</li>
</ul>
<p></p><div class="math display">\[c^{\langle t \rangle}  
= f^{\langle t \rangle} \odot c^{\langle t-1 \rangle}
+ i^{\langle t \rangle} \odot \tilde{c}^{\langle t \rangle}  
\]</div><p></p><p><img src="https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260112222315839-1698415516.png" alt="image.png" loading="lazy"></p>
<p>è¿ä¸ªå¬å¼çæä¹ä¹éå¸¸ç´è§ï¼</p>
<ul>
<li>ç¬¬ä¸é¡¹ï¼<strong>ä¿çå¤å°æ§è®°å¿</strong>ã</li>
<li>ç¬¬äºé¡¹ï¼<strong>åå¥å¤å°æ°è®°å¿</strong>ã<br>
ä¹æ­£æ¯å ä¸ºè¿éå­å¨ä¸æ¡è¿ä¼¼âç´éâçè·¯å¾ï¼è®©æ¢¯åº¦å¯ä»¥ç´æ¥ä» <span class="math inline">\(c^{\langle t \rangle}\)</span> åä¼ å° <span class="math inline">\(c^{\langle t-1 \rangle}\)</span> ï¼ <strong>ç»èç¶ææè½å¨æ¶é´ç»´åº¦ä¸ç¨³å®ä¼ æ­ï¼æ¢¯åº¦ä¹ä¸å®¹æè¡°åã</strong></li>
</ul>
<h2 id="35-è®¡ç®è¾åºé¨output-gate">3.5 è®¡ç®è¾åºé¨ï¼Output Gateï¼</h2>
<p>éè¦ç¹å«å¼ºè°çæ¯ï¼  <strong>ç»èç¶æå¹¶ä¸ç´æ¥ä½ä¸ºæ¨¡åè¾åºã</strong><br>
å¨ä¹åå æ­¥å®æäºå¯¹ç»èç¶æçæ´æ°ï¼æä»¬å°è¿éæå¼å§è¿è¡<strong>ä¸æ¨¡åè¾åºç¸å³çéèç¶æè®¡ç®</strong>ã</p>
<p>å¨æ´æ°å®ç»èç¶æ <span class="math inline">\(c^{\langle t \rangle}\)</span> ä¹åï¼LSTM çä¸ä¸æ­¥æ¯è®¡ç® <strong>è¾åºé¨</strong> <span class="math inline">\(o^{\langle t \rangle}\)</span><br>
è¾åºé¨çä½ç¨æ¯ï¼<strong>æ§å¶ç»èç¶æä¸­çä¿¡æ¯æå¤å°è¢«âæ´é²âç»ä¸ä¸å±æä¸ä¸æ¶é´æ­¥ä½¿ç¨</strong>ã<br>
æ¢å¥è¯è¯´ï¼è¾åºé¨å³å®äºâé¿æè®°å¿ééä¸­çä¿¡æ¯å¦ä½å½±åå½åè®¡ç®âã</p>
<p>è®¡ç®è¿ç¨å·²ç»çäºå¾å¤éäºï¼<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260112222316249-153285731.png" alt="image.png" loading="lazy"><br>
é¨çè®¡ç®é½æ¯ç¸åçï¼å¬å¼ä¸ºï¼</p>
<p></p><div class="math display">\[o^{\langle t \rangle} = sigmoid\big( W_{xo} x^{\langle t \rangle} + W_{ao} a^{\langle t-1 \rangle} + b_o \big)  
\]</div><p></p><ul>
<li>å½ <span class="math inline">\(o_i^{\langle t \rangle} \approx 1\)</span> æ¶ï¼ç¬¬ <span class="math inline">\(i\)</span> ä¸ªè®°å¿ååçé¿æä¿¡æ¯å ä¹<strong>å¨é¨æ´é²</strong>ç»éèç¶æã</li>
<li>å½ <span class="math inline">\(o_i^{\langle t \rangle} \approx 0\)</span> æ¶ï¼ç¬¬ <span class="math inline">\(i\)</span> ä¸ªè®°å¿ååçé¿æä¿¡æ¯å ä¹<strong>å®å¨å±è½</strong>ã</li>
</ul>
<h2 id="36-æ´æ°éèç¶æ">3.6 æ´æ°éèç¶æ</h2>
<p>æäºè¾åºé¨ <span class="math inline">\(o^{\langle t \rangle}\)</span> åæ´æ°åçç»èç¶æ <span class="math inline">\(c^{\langle t \rangle}\)</span> åï¼å°±å¯ä»¥çæå½åæ¶å»çéèç¶æ <span class="math inline">\(a^{\langle t \rangle}\)</span>ï¼è¿ä¹æ¯ LSTM çå®éè¾åºï¼ç¨äºä¼ éå°ä¸ä¸æ¶é´æ­¥æä¸ä¸å±ç½ç»ã<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260112222131324-2047519086.png" alt="image.png" loading="lazy"></p>
<p>çæå¬å¼ä¸ºï¼</p>
<p></p><div class="math display">\[a^{\langle t \rangle} = o^{\langle t \rangle} \odot \tanh(c^{\langle t \rangle})  
\]</div><p></p><p>æç»ï¼è¾åºé¨ä¸ç»èç¶æãéèç¶æç»´åº¦ä¸è´ï¼<strong>æ¯ä¸ªåéç¬ç«æ§å¶å¯¹åºè®°å¿ååçè¾åº</strong>ï¼å®ç°å¯¹é¿æè®°å¿ç<strong>éæ©æ§è¯»å</strong>ã<br>
æåï¼çå°é¿æè®°å¿ï¼ä½ å¯è½ä¼åæ¬¡æ³å° GRU ä¸­ä¸ä»æé¿æè®°å¿ï¼è¿æç­æè®°å¿ï¼é£ LSTM çç­æè®°å¿è¢«éå«å¨åªä¸æ­¥äºï¼<br>
å®éä¸ï¼å¨ LSTM ä¸­ï¼ç­æè®°å¿ <strong>å°±æ¯å½åæ­¥çéèç¶æ <span class="math inline">\(a^{\langle t \rangle}\)</span></strong>ï¼å®ä¼ä¼ ç»ä¸ä¸æ¶é´æ­¥æä¸ä¸å±åä¸è®¡ç®ï¼èä¸å GRU é£æ ·æé¿æè®°å¿åç­æè®°å¿åå¹¶å¨åä¸ç¶æä¸­ã</p>
<p>è³æ­¤ï¼ä¸ä¸ª LSTM ååè®¡ç®å°±å®æäºã</p>
<h2 id="37-å°ç»lstm-çå®æ´è®¡ç®æµç¨">3.7 å°ç»ï¼LSTM çå®æ´è®¡ç®æµç¨</h2>
<p>å¨æ¶é´æ­¥ <span class="math inline">\(t\)</span>ï¼ä¸ä¸ªæ å LSTM ååçè®¡ç®é¡ºåºå¯ä»¥æ»ç»ä¸ºï¼</p>
<ol>
<li><strong>éå¿é¨</strong>ï¼å³å®æ§è®°å¿ä¿çå¤å°ã</li>
</ol>
<p></p><div class="math display">\[    f^{\langle t \rangle}  
    = \sigma(W_{xf} x^{\langle t \rangle} + W_{af} a^{\langle t-1 \rangle} + b_f)  
\]</div><p></p><ol start="2">
<li><strong>è¾å¥é¨</strong>ï¼å³å®æ°ä¿¡æ¯åå¥å¤å°ã</li>
</ol>
<p></p><div class="math display">\[    i^{\langle t \rangle}  
    = \sigma(W_{xi} x^{\langle t \rangle} + W_{ai} a^{\langle t-1 \rangle} + b_i)  
\]</div><p></p><ol start="3">
<li><strong>åéè®°å¿</strong>ï¼çææ°è®°å¿åå®¹ã</li>
</ol>
<p></p><div class="math display">\[    \tilde{c}^{\langle t \rangle}  
    = \tanh(W_{xc} x^{\langle t \rangle} + W_{ac} a^{\langle t-1 \rangle} + b_c)  
\]</div><p></p><ol start="4">
<li><strong>æ´æ°ç»èç¶æ</strong>ï¼é¿æè®°å¿èåã</li>
</ol>
<p></p><div class="math display">\[    c^{\langle t \rangle}  
    = f^{\langle t \rangle} \odot c^{\langle t-1 \rangle}
    

+ i^{\langle t \rangle} \odot \tilde{c}^{\langle t \rangle}  
\]</div><p></p><ol start="5">
<li><strong>è¾åºé¨ä¸éèç¶æ</strong>ï¼çæå½åè¾åºã</li>
</ol>
<p></p><div class="math display">\[o^{\langle t \rangle}  
= \sigma(W_{xo} x^{\langle t \rangle} + W_{ao} a^{\langle t-1 \rangle} + b_o)  
\]</div><p></p><p></p><div class="math display">\[ a^{\langle t \rangle}  
 = o^{\langle t \rangle} \odot \tanh(c^{\langle t \rangle})  
\]</div><p></p><p>è³æ­¤ï¼è¿ä¸¤ç¯æä»¬å®æäºå¯¹é¨æ§æºå¶çä¸äºç¸å³ææ¯çäºè§£ï¼ä½ ä¼åç°ï¼é¨æ§æºå¶å¹¶æ²¡æåæ°ç½ç»æ¬èº«çç»æï¼èæ¯éè¿ç½ç»å³ç³»åè®¡ç®é»è¾ä¸ºå¨è¿æ¥å±èµäºäºå¨æ°çè¯­ä¹ï¼<strong>å®ç°äºå¯¹è®°å¿çéæ©æ§ä¿çãæ´æ°ä¸è¾åº</strong>ã<br>
è¿ç§è®¾è®¡çå·§å¦ä¹å¤å¨äºï¼ç½ç»å¯ä»¥èªä¸»å³å®åªäºä¿¡æ¯å¼å¾é¿æè®°å¿ï¼åªäºä¿¡æ¯åªç¨äºå½åè®¡ç®ï¼ä½¿æ¢¯åº¦å¨æ¶é´ç»´åº¦ä¸ç¨³å®ä¼ æ­ï¼åæ¶è®©æ¨¡åè½å¤ç²¾ç»ç®¡çç­æä¸é¿æè®°å¿ï¼ä»èæ¾èæååºåæ°æ®å»ºæ¨¡çè½åã<br>
åæ¶ï¼ä¹ç»äºæä»¬å³äºåæ°çæ°ççµæï¼<strong>ä¸è¦ä¸å³å¢å å¤æç»æï¼èæ¯èµäºå·²ææºå¶æ°çè¯­ä¹ä¸æ§å¶è½åã</strong></p>
<h1 id="3-æ»ç»">3. æ»ç»</h1>
<table>
<thead>
<tr>
<th>æ¦å¿µ</th>
<th>åç</th>
<th>æ¯å»</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>LSTMï¼Long Short-Term Memoryï¼</strong></td>
<td>ä¸ºäºè§£å³ RNN/GRU å¨é¿åºåä¸­é¿æä¾èµçé®é¢ï¼å¼å¥<strong>æ¾å¼çè®°å¿ååï¼cell stateï¼</strong>ï¼å¹¶éå<strong>éå¿é¨ãè¾å¥é¨ãè¾åºé¨</strong>è¿è¡ç²¾ç»æ§å¶ï¼å®ç°é¿æä¿¡æ¯çç¨³å®ä¼ éã</td>
<td>éèç¶æåâå½åèå­éå¨æ³ä»ä¹âï¼ç»èç¶æåâä¸æ¬å ä¹ä¸è¢«ææ°çé¿æå¤å¿å½âã</td>
</tr>
<tr>
<td><strong>GRU çå±é</strong></td>
<td>GRU åªæåä¸éèç¶æï¼æ¢æ¿æç­æè®¡ç®ï¼åæ¿æé¿æè®°å¿ï¼ä½¿ä¸åæ¶é´å°ºåº¦çä¿¡æ¯æ··åå¨åä¸åéä¸­ï¼é¿åºåæç²¾ç»æ¶åºåºæ¯å¯è½åéã</td>
<td>GRU åæ¯å¨âä¸å¼ çº¸ä¸åå¤ä¿®æ¹åå®¹âï¼é¿æä¸ç­æä¿¡æ¯æ··åå­å¨ã</td>
</tr>
<tr>
<td><strong>ç»èç¶æï¼Cell State <span class="math inline">\(c^{\langle t \rangle}\)</span>ï¼</strong></td>
<td>ä¸é¨å­å¨é¿æä¿¡æ¯ï¼å¯è¿ä¼¼çº¿æ§ä¼ æ­ï¼æ¢¯åº¦ä¸ææ¶å¤±ãéè¿éå¿é¨æ§å¶ä¿çï¼è¾å¥é¨æ§å¶åå¥ã</td>
<td>âé¿æå¤å¿å½âï¼å¯ä»¥é¿æä¿å­å³é®ä¿¡æ¯ï¼ä¸è¢«é¢ç¹æ¹åã</td>
</tr>
<tr>
<td><strong>éèç¶æï¼Hidden State <span class="math inline">\(a^{\langle t \rangle}\)</span>ï¼</strong></td>
<td>è¡¨ç¤ºå½åæ¶å»çè¾åºåç­æè®¡ç®ç»æï¼ä¼ éå°ä¸ä¸æ¶é´æ­¥æä¸ä¸å±ã</td>
<td>âèå­éå½åæ­£å¨å¤ççåå®¹âã</td>
</tr>
<tr>
<td><strong>éå¿é¨ï¼Forget Gate <span class="math inline">\(f^{\langle t \rangle}\)</span>ï¼</strong></td>
<td>å³å®æ§è®°å¿ä¿çæ¯ä¾ï¼<span class="math inline">\(f^{\langle t \rangle} \odot c^{\langle t-1 \rangle}\)</span>ã</td>
<td>âå³å®æåªäºæ§ä¿¡æ¯ä¿çä¸æ¥ï¼åªäºä¸¢æâã</td>
</tr>
<tr>
<td><strong>è¾å¥é¨ï¼Input Gate <span class="math inline">\(i^{\langle t \rangle}\)</span>ï¼</strong></td>
<td>å³å®æ°ä¿¡æ¯åå¥æ¯ä¾ï¼<span class="math inline">\(i^{\langle t \rangle} \odot \tilde{c}^{\langle t \rangle}\)</span>ã</td>
<td>âå³å®æ°è®°å¿åå¥å¤å°å°é¿æå¤å¿å½âã</td>
</tr>
<tr>
<td><strong>åéç»èç¶æï¼<span class="math inline">\(\tilde{c}^{\langle t \rangle}\)</span>ï¼</strong></td>
<td>å½åæ­¥çæçæ°ä¿¡æ¯ï¼ç±å½åè¾å¥ä¸ä¸ä¸éèç¶æè®¡ç®ï¼ä½å°æªåå¥ç»èç¶æã</td>
<td>âåå¤å¥½å¯ä»¥åå¥çæ°è®°å¿âã</td>
</tr>
<tr>
<td><strong>æ´æ°ç»èç¶æï¼<span class="math inline">\(c^{\langle t \rangle}\)</span>ï¼</strong></td>
<td>ç»åéå¿é¨ä¸è¾å¥é¨æ´æ°é¿æè®°å¿ï¼<span class="math inline">\(c^{\langle t \rangle} = f^{\langle t \rangle} \odot c^{\langle t-1 \rangle} + i^{\langle t \rangle} \odot \tilde{c}^{\langle t \rangle}\)</span>ã</td>
<td>âæ§å¤å¿å½ä¿çå¤å° + æ°ä¿¡æ¯åå¥å¤å°âã</td>
</tr>
<tr>
<td><strong>è¾åºé¨ï¼Output Gate <span class="math inline">\(o^{\langle t \rangle}\)</span>ï¼</strong></td>
<td>å³å®ç»èç¶ææ´é²ç»éèç¶æçæ¯ä¾ï¼<span class="math inline">\(a^{\langle t \rangle} = o^{\langle t \rangle} \odot \tanh(c^{\langle t \rangle})\)</span>ã</td>
<td>âå³å®é¿æè®°å¿ä¸­åªäºåå®¹ç°å¨è¢«ä½¿ç¨âã</td>
</tr>
<tr>
<td><strong>ç­æè®°å¿</strong></td>
<td>LSTM çç­æè®°å¿å³å½åæ¶å»çéèç¶æ <span class="math inline">\(a^{\langle t \rangle}\)</span>ï¼ç¨äºè®¡ç®å½åè¾åºåä¸ä¸æ­¥ä¼ éã</td>
<td>âèå­éå½åæ³çä¸è¥¿âã</td>
</tr>
<tr>
<td><strong>é¿æè®°å¿</strong></td>
<td>LSTM çé¿æè®°å¿å³ç»èç¶æ <span class="math inline">\(c^{\langle t \rangle}\)</span>ï¼ç¨³å®ä¼ éå³é®åå²ä¿¡æ¯ï¼æ¢¯åº¦ä¸ææ¶å¤±ã</td>
<td>âé¿æå¤å¿å½âï¼å¯è·¨æ¶é´æ­¥ä¿å­ä¿¡æ¯ã</td>
</tr>
</tbody>
</table>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-12 22:26">2026-01-12 22:25</span>&nbsp;
<a href="https://www.cnblogs.com/Goblinscholar">å¥å¸æå­¦è</a>&nbsp;
éè¯»(<span id="post_view_count">43</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19474433);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19474433', targetLink: 'https://www.cnblogs.com/Goblinscholar/p/19474433', title: 'å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨äºï¼èªç¶è¯­è¨å¤ç  ç¬¬ä¸å¨ï¼å¾ªç¯ç¥ç»ç½ç» ï¼å­ï¼é¿ç­æè®°å¿ LSTM' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ .NETå¨åã12æç¬¬2æ 2025-12-14ã ]]></title>
    <link>https://www.cnblogs.com/InCerry/p/-/dotnet_week_25_12_2</link>
    <guid>8cb3f6820902f8e7babbabe8e6de8366</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/InCerry/p/-/dotnet_week_25_12_2" title="åå¸äº 2026-01-12 21:32">
    <span role="heading" aria-level="2">.NETå¨åã12æç¬¬2æ 2025-12-14ã</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="å½åæç« ">å½åæç« </h2>
<h3 id="avalonia-å®ç°è·¨å¹³å°çè§é¢ä¼è®®windowslinuxä¿¡å">Avalonia å®ç°è·¨å¹³å°çè§é¢ä¼è®®ï¼WindowsãLinuxãä¿¡åï¼</h3>
<p><a href="https://www.cnblogs.com/shawshank/p/19305884" target="_blank">https://www.cnblogs.com/shawshank/p/19305884</a></p>
<p>Avalonia 11 çåå¸æ¾èæåäº .NET çæä¸­çè·¨å¹³å° UI å¼åè½åï¼ç¹å«æ¯æä¾äºé«è´¨éç Fluent 2 é£æ ¼æ§ä»¶ãæç« ä»ç»äºç¨ Avalonia æ¡æ¶å¼åçè·¨å¹³å°è§é¢ä¼è®®ç³»ç» Demoï¼æ¯æå¤ç§åè½ï¼å¦è§é¢ä¼è®®ãå±å¹åäº«åçµå­ç½æ¿ï¼å¹¶ä¿è¯è¯­é³è´¨éåå¨æè°èç¼ç ãå¼åç¯å¢åºäº Visual Studio 2022 ä¸.NET 8.0ï¼ä½¿ç¨ C#ç¼åãé¡¹ç®åä¸ºæå¡ç«¯ä¸å®¢æ·ç«¯ï¼æ¶åéè¦ç±»åææ¯ç»èï¼å±ç¤ºäºå®éåºç¨çå¯è¡æ§ä¸åæ¯ã</p>
<h3 id="avalonia-ui-çæ¼è¿é»è¾ä¸-qt-çææ·±åº¦å¯¹æ¯">Avalonia UI çæ¼è¿é»è¾ä¸ Qt çææ·±åº¦å¯¹æ¯</h3>
<p><a href="https://www.cnblogs.com/shanyou/p/19329439" target="_blank">https://www.cnblogs.com/shanyou/p/19329439</a></p>
<p>æ¬ææ¢è®¨è·¨å¹³å°å¾å½¢ç¨æ·çé¢çåå±ï¼éç¹åæ Mike James ä» Qt å° Avalonia çææ¯è½¬åãåå²ä¸ï¼å¼åèå¨é«æä¸æ§è½é´ä¸¾æ­¥ç»´è°ï¼Qt ä»¥å¶æ§è½å æ®ä¸»å¯¼å°ä½ãéç.NET çæçå´èµ·ï¼å¼åèæ¸´æä¸ä¸ªå· C#ä¼å¿çè·¨å¹³å°æ¡æ¶ãå¾®è°çææ¯ä½¿ Avalonia åºè¿èçï¼å±ç°åºä¸ Qt å¨æ¸²æãç¶æç®¡çç­æ¹é¢çæ¾èå·®å¼ãæç« è¿æ¢è®¨äº Avalonia çåä¸åè·¯å¾ï¼éè¿æ ¸å¿å¼æºä¸åä¸é­æºçç»åï¼ææ Qt å¨å¸åºçå°ä½ã</p>
<h3 id="wpf-æ°æææç¨ä¸---èµ°ä¸åºæ°ææå«æ¾æ">WPF æ°æææç¨ï¼ä¸ï¼ - èµ°ä¸åºæ°ææå«æ¾æ</h3>
<p><a href="https://www.cnblogs.com/leaf-7-scouts/p/19336808" target="_blank">https://www.cnblogs.com/leaf-7-scouts/p/19336808</a></p>
<p>æ¬æä»ç»äº WPF ä¸­ XAML çåºç¡è¯­æ³ä¸ç»ä»¶ï¼å¼ºè°äº XAML ä½ä¸ºå£°ææ§æ è®°è¯­è¨çç®åä½ç¨ãæä¸­è¯¦ç»è§£éäºå¯¹è±¡åç´ çç¨æ³ï¼åæ¬èªé­ååæå¯¹æ ç­¾çè¯­æ³ï¼ä»¥åå¦ä½ä¸ºæ§ä»¶è®¾ç½®å±æ§ãä½èä½¿ç¨ç®åæäºçç¤ºä¾ï¼å±ç°äºæé®åææ¬æ¡çç¨æ³ï¼å¹¶æåºäºéåå±æ§çæ¦å¿µï¼åºåäºæ¾å¼åéå¼åæ³ãæ´ä½ä¸ï¼æç« ä»¥éä¿ææçæ¹å¼ä»ç»äº XAML çåºç¡ç¥è¯ï¼éååå­¦èå­¦ä¹ ã</p>
<h3 id="net-10-ç½ç»æ¹è¿httpå®å¨ä¸ç½ç»åè¯­çå¨é¢åçº§">.NET 10 ç½ç»æ¹è¿ï¼HTTPãå®å¨ä¸ç½ç»åè¯­çå¨é¢åçº§</h3>
<p><a href="https://www.cnblogs.com/powertoolsteam/p/19330426" target="_blank">https://www.cnblogs.com/powertoolsteam/p/19330426</a></p>
<p>.NET 10 æä¾äºå¤é¡¹ç½ç»æ¹è¿ï¼åæ¬æå¡å¨è¯ä¹¦éªè¯ä¼åãæ°ç HTTP å¨è¯ QUERY å WebSocketStream æ½è±¡å±ãWinHttpHandler ç®åæ¯æåºäºæå¡å¨ IP å°åçè¯ä¹¦ç¼å­æºå¶ï¼å¢å¼ºæ§è½ãQUERY æ¹æ³åè®¸å¨è¯·æ±ä½ä¸­åéæ¥è¯¢ï¼éç¨äºè¶é¿ URI çåºæ¯ãWebSocketStream ç®åäºææ¬åäºè¿å¶åè®®çæ°æ®å¤çï¼æ¯æå¤ç§åè®®ãåæ¶ï¼.NET 10 å¨ OSX ä¸å¼å¥äºå®¢æ·ç«¯ TLS 1.3 æ¯æï¼éè¿ AppContext å¼å³å¯ç¨ï¼æåäºå®å¨æ§ãæ´ä½ä¸ï¼è¿äºæ´æ°æåäºå¼åèçç½ç»ç¼ç¨è½åã</p>
<h3 id="å«åè¯´-winform-åçå·¥ä¸è½¯ä»¶ä¸äºè¿äºå¼æºåºè®©å®é¢å¼ææ»¡äº¤äºæµç">å«åè¯´ WinForm åçå·¥ä¸è½¯ä»¶ä¸äºï¼è¿äºå¼æºåºè®©å®é¢å¼ææ»¡ãäº¤äºæµç</h3>
<p><a href="https://www.cnblogs.com/1312mn/p/19321609" target="_blank">https://www.cnblogs.com/1312mn/p/19321609</a></p>
<p>WinForm ä½ä¸º.NET çæä¸­æçå¯é çæ¡é¢å¼åæ¡æ¶ï¼å°½ç®¡å­å¨è§è§åäº¤äºéå¶ï¼ä½å¨ä¼ä¸ç®¡çãå·¥ä¸æ§å¶ç­é¢åä¾ç¶å¹¿æ³åºç¨ãä¸ºäºæå UI ææï¼å¼åèå¯åå©ç¬¬ä¸æ¹å¼æº UI åºï¼è¿äºåºå¨ä¸æ¹å WinForm æ ¸å¿ç»æçåæä¸ï¼éè¿æ§ä»¶éç»åä¼åå¸å±ï¼ä½¿ä¼ ç»æ¡æ¶çåæ°çãæä¸­ä»ç»ç ReaLTaiizor æ§ä»¶åºï¼æä¾ä¸°å¯çç¤ºä¾åå¼å®¹ççæ¬ï¼è½å¿«éåå»ºé«è´¨éçåºç¨çé¢ï¼éä½ç°ä»£åæ¹é çææ¯é¨æ§ã</p>
<h3 id="åäº«-4-æ¬¾åºäº-c-ç¼åå®ç¨å¼æºç-visual-studio-æ©å±æä»¶">åäº« 4 æ¬¾åºäº C# ç¼åãå®ç¨ãå¼æºç Visual Studio æ©å±æä»¶</h3>
<p><a href="https://www.cnblogs.com/Can-daydayup/p/19328798" target="_blank">https://www.cnblogs.com/Can-daydayup/p/19328798</a></p>
<p>EFCore.Visualizer æ¯ä¸æ¬¾ç¨äºå¨ Visual Studio ä¸­å¯è§å EF Core æ¥è¯¢è®¡åçå·¥å·ï¼æ¯æå¤ç§æ°æ®åºãEF Core Power Tools æä¾æ°æ®åºååå·¥ç¨åæ¨¡åå¯è§ååè½ï¼éä½å¼åé¨æ§ãAntDeploy æ¯ä¸æ¬¾å¼æºé¨ç½²æä»¶ï¼æ¯æå¤å¹³å°åå¸ãFileEncoding æä»¶å¯å®æ¶æ¾ç¤ºææ¡£ç¼ç ï¼ç®åç¼ç ç®¡çãææé¡¹ç®åæ¶å½å¨ C#/.NET ä¼ç§é¡¹ç®ç²¾éä¸­ï¼æ¹ä¾¿å¼åèè·åææ°å¨æåæä½³å®è·µã</p>
<h3 id="è¾è®¯äº-edgeone-pages-æç®¡-blazor-wasm">è¾è®¯äº EdgeOne Pages æç®¡ Blazor Wasm</h3>
<p><a href="https://www.cnblogs.com/CKExp/p/19319722" target="_blank">https://www.cnblogs.com/CKExp/p/19319722</a></p>
<p>æ¬æä»ç»äºå¦ä½ä½¿ç¨ Blazor WebAssembly å¨è¾è®¯äº EdgeOne Pages ä¸é¨ç½²éæç½ç«ãEdgeOne Pages ä¸ Github Pages ç¸ä¼¼ï¼æä¾åè´¹çéæç«ç¹é¨ç½²æå¡ãä½èæè¿°äºåå»º Blazor WebAssembly é¡¹ç®çè¿ç¨ï¼ä¸ä¼ ä»£ç è³ Githubï¼å¹¶ä½¿ç¨ Github Actions è¿è¡èªå¨æå»ºåé¨ç½²ãç¨ yml æä»¶éç½®äºæå»ºå·¥ä½æµï¼æ­¥éª¤åæ¬è®¾ç½®.NET ç¯å¢ååå¸é¡¹ç®ï¼æç»å°æå»ºåçæä»¶æ¨éè³ Github Pagesãæç« é»è¾æ¸æ°ï¼åå«å·ä½çæä»¤åç¤ºä¾ï¼éåå¼åèåèã</p>
<h3 id="net-8-å¾®æå¡æ¡æ¶é¿ä»ä¹æ ·éæ-ai-æºè½ä½å¤ç§æ·èªå¨è°åº¦ä¸å®æ¶éä¿¡">.NET 8 å¾®æå¡æ¡æ¶é¿ä»ä¹æ ·ï¼éæ AI æºè½ä½ãå¤ç§æ·ãèªå¨è°åº¦ä¸å®æ¶éä¿¡</h3>
<p><a href="https://www.cnblogs.com/1312mn/p/19273206" target="_blank">https://www.cnblogs.com/1312mn/p/19273206</a></p>
<p>è¯¥æç« ä»ç»äºåºäº .NET 8 çå¾®æå¡èææ¶ï¼å³ NetCoreKevinï¼æ¨å¨å¸®å©å¿«éæ­å»ºæ¯æå¤ç§æ·ä¸åå¸å¼é¨ç½²çç³»ç»ãæç« å¼ºè°é¡¹ç®åºç¨é¢åé©±å¨è®¾è®¡ï¼DDDï¼ï¼ååç«¯åç¦»æ¶æï¼å¹¶éæå¤ç§å¸¸ç¨åè½å¦å®å¨è®¤è¯ãå¤äºå­å¨ä¸ AI è½åãææ¯äº®ç¹åæ¬è·¨æå¡äºä»¶éä¿¡ãRedis ç¼å­å Quartz å®æ¶ä»»å¡ãè¯¦ç»æä¾äºé¡¹ç®å¯å¨éç½®åä¸ææç¨ï¼å¸®å©å¢éå¿«éå®ç° SaaS ç±»ç³»ç»çå¼åä¸é¨ç½²ã</p>
<h3 id="ä¸åéå®ç°net-ä¸é£ä¹¦é¿è¿æ¥ç-websocket-æ¶æ">ä¸åéå®ç°.NET ä¸é£ä¹¦é¿è¿æ¥ç WebSocket æ¶æ</h3>
<p><a href="https://www.cnblogs.com/mudtools/p/19320597" target="_blank">https://www.cnblogs.com/mudtools/p/19320597</a></p>
<p>æ¬æä»ç»äºå¦ä½å¨.NET ç¯å¢ä¸­å®ç°é£ä¹¦ WebSocket é¿è¿æ¥ï¼å¼ºè°äºé¿è¿æ¥ç¸å¯¹äºä¼ ç» Webhook çä¼å¿ï¼ç¹å«æ¯å¨å¼åææ¬åå®æ¶æ§æ¹é¢ãæä¸­éè¿°äºé£ä¹¦å¹³å°æ¯æçå¤ç§äºä»¶ç±»åï¼å¹¶æ¢è®¨äº Mud.Feishu æ¶æçäºä»¶å¤çè®¾è®¡ï¼éç¨ç­ç¥æ¨¡å¼ä»¥å®ç°é«æçäºä»¶å¤çæºå¶ãå·ä½ç¤ºä¾å±ç¤ºäºå¦ä½åå»ºç¨æ·åå¤çæ¶æ¯æ¥æ¶äºä»¶ï¼å¼ºè°äºæ¸æ°çåä¸èè´£ãå¯æµè¯æ§ä»¥åå¨æéæ©å¤çç­ç¥çéè¦æ§ã</p>
<h3 id="åæµæ°æ®åäº«cç-threadpoolsetmaxthreads-éç½®æå¤§çº¿ç¨æ°å°åºå¯¹æ§è½æå¤å¤§å½±å">ãåæµæ°æ®åäº«ãC#ç <code>ThreadPool.SetMaxThreads()</code> éç½®æå¤§çº¿ç¨æ°å°åºå¯¹æ§è½æå¤å¤§å½±å</h3>
<p><a href="https://www.cnblogs.com/ahfuzhang/p/19340661" target="_blank">https://www.cnblogs.com/ahfuzhang/p/19340661</a></p>
<p>æç« å±ç¤ºäºéè¿ async æ¹æ³å Kestrel åºæä¾ HTTP æå¡çå¼ºå¤§æ§è½ï¼æåºçº¿ç¨æ± çº¿ç¨æ°ä¸ CPU æ ¸æ°çå³ç³»ãæ§è½éè¿è°æ´çº¿ç¨æ± çæå°åæå¤§çº¿ç¨æ°å¾ä»¥ä¼åãå®éªè¡¨æï¼çº¿ç¨æ± çæä½³è¡¨ç°éè¦æå¤§çº¿ç¨æ°ä¸æ ¸æ°ä¸è´ï¼è¿å¤æè¿å°é½ä¼éä½æ§è½ãä½¿ç¨ Kestrel åºå¼åç HTTP 1.1 echo æå¡å¨ï¼è¿è¡å¨ Docker ç¯å¢ä¸­ï¼å±ç¤ºäºå¶é«æçå¼æ­¥å¤çè½åãå®éªæ°æ®æä¾äºä¸åçº¿ç¨è®¾ç½®ä¸çæ§è½ææ ï¼éªè¯äºä½èçè§ç¹ã</p>
<h3 id="cai-ç³»å6-cç¦»çº¿å®ç°é«æ-ocr">C#AI ç³»å(6): C#ç¦»çº¿å®ç°é«æ OCR</h3>
<p><a href="https://www.cnblogs.com/luojin765/p/19346320" target="_blank">https://www.cnblogs.com/luojin765/p/19346320</a></p>
<p>æ¬æä»ç»äºå¦ä½å¨ C#ä¸­ä½¿ç¨ Tesseract å®ç° OCRãTesseract æ¯ä¸ä¸ªå¼ºå¤§çå¼æºåå­¦å­ç¬¦è¯å«å¼æï¼æ¯æè¶è¿ 100 ç§è¯­è¨ãä½èæä¾äºå½ä»¤è¡å Wrapper ä¸¤ç§è°ç¨æ¹å¼ï¼å¹¶éç¹è¯´æäºä½¿ç¨ Wrapper æ¹æ³ï¼éè¿ç®æ´çåè¡ä»£ç å®ç° OCRãè¯»èéæååå¤å¥½è®­ç»æ¨¡åï¼å¹¶å¯éæ©åæ¶å è½½å¤ç§è¯­è¨æ¨¡åãæ¬æä¹è¯¦ç»æè¿°äºå¼ææ¨¡å¼åé¡µé¢åå²æ¨¡å¼çéæ©ï¼å¸®å©ç¨æ·ä¼å OCR ææãé¡¹ç®èµæºå·²å¼æºï¼æ¬¢è¿å­¦ä¹ äº¤æµã</p>
<h3 id="maf-å¿«éå¥é¨6æ··åç¼æå·¥ä½æµ">MAF å¿«éå¥é¨ï¼6ï¼æ··åç¼æå·¥ä½æµ</h3>
<p><a href="https://www.cnblogs.com/edisontalk/p/-/quick-start-on-maf-chatper06" target="_blank">https://www.cnblogs.com/edisontalk/p/-/quick-start-on-maf-chatper06</a></p>
<p>æ¬æä»ç»äºå¨ MAF ä¸­æ··åä½¿ç¨ Executor å Agent çå·¥ä½æµï¼éç¹å¨äºéå¯¹åå®¹å®¡æ ¸çæ¡ä¾ãExecutor è´è´£ç¡®å®æ§é»è¾å¤çï¼å¦æ°æ®éªè¯ï¼è Agent ç¨äº AI æºè½å³ç­ï¼å·æä¸ç¡®å®æ§ãæç« æä¾äºä¸ä¸ªå·ä½å®ä¾ï¼ä½¿ç¨.NET æ§å¶å°åºç¨éç½®ç¸å³ NuGet åï¼å¹¶å±ç¤ºäºå¦ä½è¯»å API ä¿¡æ¯åå®ä¹æ°æ®ä¼ è¾æ¨¡åãéè¿å·ä½çä»£ç ç¤ºä¾ï¼æ¸æ¥è¯´æäºå·¥ä½æµçæå»ºè¿ç¨ï¼éåå¼åèå­¦ä¹ åå®è·µã</p>
<h3 id="cå®ç°ä¸è±-mc-éè®¯åè®®åº4c-å¸§-æ ¼å¼-1">C#å®ç°ä¸è± MC éè®¯åè®®åºï¼4C å¸§-æ ¼å¼ 1ï¼</h3>
<p><a href="https://www.cnblogs.com/dragonet-Z/p/19318911" target="_blank">https://www.cnblogs.com/dragonet-Z/p/19318911</a></p>
<p>æ¬æä»ç»äº C#å®ç°çä¸è± MC éè®¯åè®®åºï¼ä½¿ç¨ VS2022 .NET Standard 2.0 å¼åãéè¿ä¸²å£å®ç° PC ä¸ PLC çéè®¯ï¼æ¯æ QnA å¼å®¹ 4C å¸§æ ¼å¼ 1 çå¼æ­¥è¯»åæä½ãMC åè®®æ¯ä¸ä¸è± PLC éè®¯çå¬å¼åè®®ï¼è½å¤éè¿ä¸åæ¨¡åè¯»å PLC çç¶æãæç« è¯¦ç»è¯´æäº MC åè®®çéä¿¡æ¡æ¶ãæ°æ®åå®¹åæä»¤ãè¿æä¾äºåæ ¡éªå®ç°ä»£ç ï¼å¸®å©å¼åèè°è¯ãæä¸­éæç¸å³æåé¾æ¥ï¼ä¾¿äºæ·±å¥äºè§£åè®®ãæåå¼ºè°åè®®åè½å¼ºå¤§ï¼ä»è¦çåºç¡åå®¹ã</p>
<h3 id="ef-corecode-firstæ¹æ¡ä¸ä»¥ç¼ç¨æ¹å¼çæè¿ç§»">ãEF CoreãâCode Firstâæ¹æ¡ä¸ä»¥ç¼ç¨æ¹å¼çæè¿ç§»</h3>
<p><a href="https://www.cnblogs.com/tcjiaan/p/19345236" target="_blank">https://www.cnblogs.com/tcjiaan/p/19345236</a></p>
<p>è¿ç§»ï¼Migrationsï¼æ¯ç¨äºåå»ºåä¿®è®¢æ°æ®åºçæºå¶ãå®éè¿çæä¸ç³»å .NET ç±»æ¥è¡¨ç¤ºæ°æ®åºçä¸åçæ¬ãå¼åèå¯ä»¥å¨è¿äºçæ¬ä¹é´åè¿æåéï¼ä»¥ä¿®æ¹æ°æ®åºç»æèéæ°æ®ãç¡®ä¿åå»ºæ°æ®åºçæ¹æ³ä¸è½åç»­ä¿®æ¹ï¼èè¿ç§»ä¼ä¿å­è¿ç§»çæ¬ä¿¡æ¯ãå¼åèå¯ä»¥èªå®ä¹è¿ç§»å½åæ¹å¼ï¼å¹¶éè¿å®ç° IMigrationsIdGenerator æ¥å£æ¥å®å¶å½åãè¿ç§»ç±å¤ç§æä½ç»æï¼éè¿çæ SQL è¯­å¥å®ç°æ°æ®åºä¿®æ¹ãè¿ä¸ªè¿ç¨ä¸°å¯ä¸å®ç¨ï¼å¯¹å¼åèæå·å¸®å©ã</p>
<h3 id="net-10-ç½ç»å æ æ·±åº¦æ¶æè§£æhttp3æ§è½ä¼åä¸åéå­å å¯çèåæ¼è¿">.NET 10 ç½ç»å æ æ·±åº¦æ¶æè§£æï¼HTTP/3ãæ§è½ä¼åä¸åéå­å å¯çèåæ¼è¿</h3>
<p><a href="https://www.cnblogs.com/shanyou/p/19350080/dotnet10network" target="_blank">https://www.cnblogs.com/shanyou/p/19350080/dotnet10network</a></p>
<p>éç.NET 10 çæ¨åºï¼å¾®è½¯éæ°å®ä¹äºäºåçæ¶ä»£çç½ç»éä¿¡æ åãè¯¥çæ¬èç¦ç°ä»£ãé«æåå¼åèåå¥½ï¼æ¯æ HTTP/3 å QUIC åè®®ï¼è§£å³äºé¿æå­å¨çéå¤´é»å¡é®é¢ï¼å¹¶å¼å¥åéå­å å¯ç®æ³ï¼å¢å¼ºäºå®å¨æ§åæ§è½ãéè¿ JIT ç¼è¯å¨ä¼ååèµæºç®¡çï¼.NET 10 å¨é«å¹¶ååºæ¯ä¸è¡¨ç°åºè²ãæ°ç System.Net.Quic åºä½ä¸ºæ ¸å¿ç»ä»¶ï¼æé«äºæµçç¬ç«æ§åç½ç»ä¼ è¾æçï¼ç®åäºå¼åèçä½éªï¼æ å¿ç.NET çææ¯éå¤§è¿æ­¥ã</p>
<h3 id="net-å¾®æå¡ç½å³æ³¨ååç®¡çåºäº-consul--nginx-å®ç°">.Net å¾®æå¡ç½å³æ³¨ååç®¡çï¼åºäº Consul + Nginx å®ç°ï¼</h3>
<p><a href="https://www.cnblogs.com/net-kevin-li/p/19332353" target="_blank">https://www.cnblogs.com/net-kevin-li/p/19332353</a></p>
<p>æç« è¯¦ç»ä»ç»äºå¦ä½åºäº Consul å Nginx å®ç°.NET å¾®æå¡çç½å³æ³¨åä¸ç®¡çãå®éè¿°äºå¾®æå¡æ¶æä¸­ API ç½å³çåè½ãConsul çæå¡æ³¨åä¸åç°ä»¥å Nginx çå¨æè·¯ç±éç½®ãæç« è¿æå°å¥åº·æ£æ¥ä¸æéè½¬ç§»æºå¶ï¼ä»¥åè´è½½åè¡¡ç­ç¥çä¼åãæåï¼æ¶åå®å¨ä¸è®¤è¯çéæï¼å±ç¤ºäºå®éçä»£ç ç¤ºä¾åéç½®ï¼å·æå®ç¨æ§åææ¯æ·±åº¦ã</p>
<h3 id="å¨net-ä¸­å®ç°ä¸åºå¤ç§æ·single-database-multi-tenancyæ¨¡å¼ä¸»è¦éè¿å±äº«æ°æ®åºä½éç¦»æ°æ®çæ¹å¼å®ç°">å¨.NET ä¸­å®ç°ä¸åºå¤ç§æ·ï¼Single Database Multi-Tenancyï¼æ¨¡å¼ï¼ä¸»è¦éè¿å±äº«æ°æ®åºä½éç¦»æ°æ®çæ¹å¼å®ç°ã</h3>
<p><a href="https://www.cnblogs.com/net-kevin-li/p/19327739" target="_blank">https://www.cnblogs.com/net-kevin-li/p/19327739</a></p>
<p>æ¬æè®¨è®ºäºå¨.NET ä¸­å®ç°ä¸åºå¤ç§æ·æ¨¡å¼çæ¹æ³ï¼ä»ç»äºå±äº«æ°æ®åºåæ°æ®éç¦»çå®ç°æ¹æ¡ãæç« è¯¦ç»éè¿°äºååç«¯åç¦»è®¾è®¡ãé¢åé©±å¨è®¾è®¡åå¤çº§ç¼å­æºå¶ç­æ¶æç¹æ§ãåå®¹æ¶å CAP äºä»¶æ»çº¿ãSignalR å®æ¶éä¿¡åä»»å¡è°åº¦ç­æ ¸å¿ææ¯ãè¿æè¿°äºå¦ä½éè¿ç§æ· ID åãå¨æ Schema åè¡çº§å®å¨ç­ç¥å®ç°æ°æ®éç¦»ï¼æåºäºéè¿å­ååæ JWT è¿è¡ç§æ·è¯å«çæ¹æ¡ãæ­¤å¤ï¼æç« å»ºè®®äºæ§è½ä¼åæ¹æ¡ï¼å¦ç´¢å¼ä¼ååæ°æ®åçã</p>
<h3 id="opencvsharpå­¦ä¹ è¿éæ§æ£æµçä½¿ç¨">OpenCVSharpï¼å­¦ä¹ è¿éæ§æ£æµçä½¿ç¨</h3>
<p><a href="https://www.cnblogs.com/mingupupu/p/19344713" target="_blank">https://www.cnblogs.com/mingupupu/p/19344713</a></p>
<p>è¿éæ§æ£æµæ¯è®¡ç®æºè§è§ä¸­çå¾åå¤çææ¯ï¼ç¨äºæ è®°äºå¼å¾åçç¸äºè¿æ¥åç´ åºåãè¯¥ææ¯éå¸¸ç¨ä½å¶ä»å¾åå¤ççåç½®æ­¥éª¤ï¼è½ç»è®¡ç©ä½æ°éï¼ä½åºç¨åºæ¯æéãé¦åå°å¾åç°åº¦åï¼åè¿è¡äºå¼åå¤çãä½¿ç¨ OpenCVSharp åºä¸­ç Cv2.AdaptiveThreshold å½æ°ï¼å¯ä»¥å¯¹åç§ä¸åçå¾åè¿è¡å±é¨èªéåºçäºå¼åï¼ä»èæ´åç¡®å°è¿è¡è¿éåºåæ£æµãè¯¥æ¹æ³éè¿è®¡ç®å±é¨åºåçå¹³åå¼å¨æè°æ´éå¼ï¼éåºä¸åäº®åº¦çåºåãå¨å±éå¼å¤çå¨å¤ææåµä¸ææè¾å·®ãæ´ä½åå®¹å±ç¤ºäºå¾åå¤ççæ ¸å¿ææ¯ååºç¨ã</p>
<h3 id="solon-ai-å¼åå­¦ä¹ -19---ç»å-solon-flow-å®ç°-react-ææ">Solon AI å¼åå­¦ä¹  19 - ç»å Solon Flow å®ç° ReAct ææ</h3>
<p><a href="https://www.cnblogs.com/noear/p/19328690" target="_blank">https://www.cnblogs.com/noear/p/19328690</a></p>
<p>Solon Flow æ¯ä¸ä¸ªéç¨çæµç¨ç¼æå¼æï¼ä½¿ç¨ YAML æ JSON è¿è¡éç½®ãè¯¥ç¤ºä¾å±ç¤ºäºå¦ä½éè¿ LLM ç¼åæç« å¹¶è¿è¡äººå·¥å®¡æ ¸çæµç¨ãæµç¨å¼å§æ¶ï¼Agent ç¼ååç¨¿ï¼æ¥çè¿å¥å®¡æ ¸ç¯èãå¦æå®¡æ ¸ä¸éè¿ï¼ç¨æ·å¯ä»¥æä¾åé¦ï¼Agent æ ¹æ®åé¦ä¿®æ¹åå®¹ï¼åæ¬¡è¿å¥å®¡æ ¸ãæç»ï¼æµç¨å¨è·å¾æ¹åæè¾¾å°æå¤§ä¿®æ¹æ¬¡æ°åç»æãä»£ç é¨åå±ç¤ºäº Agent çå®ç°ï¼åæ¬åç¨¿ç¼åååé¦å¤ççé»è¾ãæ´ä½ä¸ï¼è¯¥æµç¨é«æå®ç°äºäººæºäº¤äºä¸åå®¹å®¡æ ¸çç»åã</p>
<h3 id="maui-åºæ¨èä¸mauiicons">MAUI åºæ¨èä¸ï¼MAUIIcons</h3>
<p><a href="https://www.cnblogs.com/sesametech-dotnet/p/19349735" target="_blank">https://www.cnblogs.com/sesametech-dotnet/p/19349735</a></p>
<p>MAUIIcons æ¯ä¸ä¸ªä¸º Maui æä¾çå¾æ éååºï¼éæ FluentãMaterialãCupertino å FontAwesome å¾æ ãç¨æ·è½ä¾¿æ·å°å¨ MAUI åºç¨ä¸­ä½¿ç¨è¿äºå¾æ ãä¸ºäºä½¿ç¨è¯¥åºï¼éè¦å¨ nuget ä¸ä¸è½½ï¼å¹¶å¨ MauiProgram.cs ä¸­æ·»å ä»£ç è¿è¡åå§åãæ­¤å¤ï¼æä¸­ä»ç»äºå¦ä½å¨ XAML ä¸­ä½¿ç¨å¾æ ï¼å¹¶æä¾äºæ°æ®ç»å®çç¤ºä¾ãè¥éç¼è¯éè¯¯ï¼å¯ä»¥éè¿åå»º MauiIcon å®ä¾è§£å³ãè¯¥ææäºçè§£ï¼ä¸åå«å®ç¨ç¤ºä¾ã</p>
<h3 id="åå»ºæé³æ°å·åäº«ç¥è¯æ¨å¹¿å¼æºé¡¹ç®">åå»ºæé³æ°å·åäº«ç¥è¯æ¨å¹¿å¼æºé¡¹ç®</h3>
<p><a href="https://www.cnblogs.com/fanliang11/p/19332240" target="_blank">https://www.cnblogs.com/fanliang11/p/19332240</a></p>
<p>ä½èæ¯ä¸åæ¥æäºåå¹´å¼åç»éªç 85 åï¼å§ç»åæ.NET ææ¯ï¼å°½ç®¡é¢ä¸´è¯¸å¤ææãä»åäº«äºèªå·±å¯¹äº§åå¼åçç­æï¼åä¿¡æç»ä¼åå¾æåãåæ¶ï¼ä»å¼è®¾äºä¸ä¸ªæ°çæé³å·ï¼å¸æéè¿ç´æ­æå¨ç²ä¸åå®£ä¼ äº§åï¼è¿æå°ç´æ­äºå¨çç®çå¨äºå­¦ä¹ äº¤æµã</p>
<blockquote>
<p>æ¬å¨å½éå¨åæªæ´æ°ï¼æçç©º</p>
</blockquote>
<h2 id="ä»æ¥äººç©">ä»æ¥äººç©</h2>
<p><strong>æ¥å°æ¯Â·å®ä¸å°¼Â·çæ¥å¾·Â·éå°</strong><a href="https://zh.wikipedia.org/wiki/%E7%88%B5%E5%A3%AB" target="_blank" rel="noopener nofollow">çµå£«</a>ï¼è±è¯­ï¼Sir <strong>Charles Antony Richard Hoare</strong>ï¼ç¼©åä¸º C. A. R. Hoareï¼1934 å¹´ 1 æ 11 æ¥âï¼ï¼æµç§°ä¸º<strong>ä¸å°¼Â·éå°</strong>ï¼è±è¯­ï¼<strong>Tony Hoare</strong>ï¼ä¸è¯<strong>æå°¼Â·éå°</strong>ï¼ï¼çäº<a href="https://zh.wikipedia.org/wiki/%E5%A4%A7%E8%8B%B1%E5%B8%9D%E5%9C%8B" target="_blank" rel="noopener nofollow">å¤§è±å¸å½</a><a href="https://zh.wikipedia.org/wiki/%E8%8B%B1%E5%B1%AC%E9%8C%AB%E8%98%AD" target="_blank" rel="noopener nofollow">é¡å°</a><a href="https://zh.wikipedia.org/wiki/%E5%8F%AF%E5%80%AB%E5%9D%A1" target="_blank" rel="noopener nofollow">å¯ä¼¦å¡</a>ï¼ä»<a href="https://zh.wikipedia.org/wiki/%E6%96%AF%E9%87%8C%E8%98%AD%E5%8D%A1" target="_blank" rel="noopener nofollow">æ¯éå°å¡</a>ï¼ï¼è±å½<a href="https://zh.wikipedia.org/wiki/%E8%A8%88%E7%AE%97%E6%A9%9F%E7%A7%91%E5%AD%B8%E5%AE%B6" target="_blank" rel="noopener nofollow">è®¡ç®æºç§å­¦å®¶</a>ï¼<a href="https://zh.wikipedia.org/wiki/%E5%9B%BE%E7%81%B5%E5%A5%96" target="_blank" rel="noopener nofollow">å¾çµå¥</a>å¾ä¸»ãä»è®¾è®¡äº<a href="https://zh.wikipedia.org/wiki/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F" target="_blank" rel="noopener nofollow">å¿«éæåº</a><a href="https://zh.wikipedia.org/wiki/%E6%BC%94%E7%AE%97%E6%B3%95" target="_blank" rel="noopener nofollow">ç®æ³</a>ã<a href="https://zh.wikipedia.org/wiki/%E9%9C%8D%E5%B0%94%E9%80%BB%E8%BE%91" target="_blank" rel="noopener nofollow">éå°é»è¾</a>ã<a href="https://zh.wikipedia.org/wiki/%E9%80%9A%E4%BF%A1%E9%A1%BA%E5%BA%8F%E8%BF%9B%E7%A8%8B" target="_blank" rel="noopener nofollow">éä¿¡é¡ºåºè¿ç¨</a>ã</p>
<p>ä¸å°¼Â·éå°çç¶äº²æ¯ä¸ä½å¬å¡åï¼æå¡äº<a href="https://zh.wikipedia.org/wiki/%E8%8B%B1%E5%B1%AC%E9%8C%AB%E8%98%AD" target="_blank" rel="noopener nofollow">è±å±é¡å°</a>ãå¶æ¯äº²æ¯è¶å­ä¸»äººçå¥³å¿ã</p>
<p>ä¸å°¼Â·éå°å¨å¯ä¼¦å¡åºçï¼å¨è±å½æ¬ååæè²ã1956 å¹´ï¼å¨<a href="https://zh.wikipedia.org/wiki/%E7%89%9B%E6%B4%A5%E5%A4%A7%E5%AD%B8" target="_blank" rel="noopener nofollow">çæ´¥å¤§å­¦</a><a href="https://zh.wikipedia.org/wiki/%E7%89%9B%E6%B4%A5%E5%A4%A7%E5%AD%B8%E5%A2%A8%E9%A0%93%E5%AD%B8%E9%99%A2" target="_blank" rel="noopener nofollow">å¢¨é¡¿å­¦é¢</a>åå¾<a href="https://zh.wikipedia.org/wiki/%E8%A5%BF%E6%B4%8B%E5%8F%A4%E5%85%B8%E5%AD%B8" target="_blank" rel="noopener nofollow">è¥¿æ´å¤å¸å­¦</a><a href="https://zh.wikipedia.org/wiki/%E5%AD%B8%E5%A3%AB" target="_blank" rel="noopener nofollow">å­¦å£«</a>å­¦ä½ã<a href="https://zh.wikipedia.org/wiki/%E6%9D%B1%E5%B0%BC%C2%B7%E9%9C%8D%E7%88%BE#cite_note-MCreg-1" target="_blank" rel="noopener nofollow">[1]</a>å¨å¤§å­¦æ¯ä¸åï¼è¿å¥<a href="https://zh.wikipedia.org/wiki/%E8%8B%B1%E5%9C%8B%E7%9A%87%E5%AE%B6%E6%B5%B7%E8%BB%8D" target="_blank" rel="noopener nofollow">è±å½çå®¶æµ·å</a>æåµå½¹ 18 ä¸ªæï¼<a href="https://zh.wikipedia.org/wiki/%E6%9D%B1%E5%B0%BC%C2%B7%E9%9C%8D%E7%88%BE#cite_note-MCreg-1" target="_blank" rel="noopener nofollow">[1]</a>å¨æ­¤å­¦ä¼<a href="https://zh.wikipedia.org/wiki/%E4%BF%84%E8%AA%9E" target="_blank" rel="noopener nofollow">ä¿è¯­</a>ã<a href="https://zh.wikipedia.org/wiki/%E6%9D%B1%E5%B0%BC%C2%B7%E9%9C%8D%E7%88%BE#cite_note-Hoare_autobio-2" target="_blank" rel="noopener nofollow">[2]</a>1958 å¹´éä¼åï¼åå°çæ´¥å¤§å­¦ï¼ç è¯»ç»è®¡å­¦ï¼åå¾å­¦å£«åå­¦ä½ã<a href="https://zh.wikipedia.org/wiki/%E6%9D%B1%E5%B0%BC%C2%B7%E9%9C%8D%E7%88%BE#cite_note-MCreg-1" target="_blank" rel="noopener nofollow">[1]</a>å¨æ­¤æé´ï¼å¼å§å­¦ä¹ ç¨å¼è®¾è®¡ï¼ä»è·ç<a href="https://zh.wikipedia.org/w/index.php?title=Leslie_Fox&amp;action=edit&amp;redlink=1" target="_blank" rel="noopener nofollow">Leslie Fox</a>å­¦ä¹ <a href="https://zh.wikipedia.org/w/index.php?title=Autocode&amp;action=edit&amp;redlink=1" target="_blank" rel="noopener nofollow">Autocode</a>ãä¸ºäºè¿ä¸æ­¥å­¦ä¹ <a href="https://zh.wikipedia.org/wiki/%E4%BF%84%E8%AA%9E" target="_blank" rel="noopener nofollow">ä¿è¯­</a>ï¼ä»ä»¥<a href="https://zh.wikipedia.org/wiki/%E8%8B%B1%E5%9C%8B%E6%96%87%E5%8C%96%E5%8D%94%E6%9C%83" target="_blank" rel="noopener nofollow">è±å½æååä¼</a>çäº¤æ¢å­¦çèº«ä»½ï¼è³<a href="https://zh.wikipedia.org/wiki/%E8%98%87%E8%81%AF" target="_blank" rel="noopener nofollow">èè</a><a href="https://zh.wikipedia.org/wiki/%E8%8E%AB%E6%96%AF%E7%A7%91%E5%9C%8B%E7%AB%8B%E5%A4%A7%E5%AD%B8" target="_blank" rel="noopener nofollow">è«æ¯ç§å½ç«å¤§å­¦</a>çå­¦ï¼<a href="https://zh.wikipedia.org/wiki/%E6%9D%B1%E5%B0%BC%C2%B7%E9%9C%8D%E7%88%BE#cite_note-MCreg-1" target="_blank" rel="noopener nofollow">[1]</a>è·é<a href="https://zh.wikipedia.org/wiki/%E5%AE%89%E5%BE%B7%E9%9B%B7%C2%B7%E6%9F%AF%E7%88%BE%E8%8E%AB%E5%93%A5%E6%B4%9B%E5%A4%AB" target="_blank" rel="noopener nofollow">å®å¾·é·Â·æ¯å°è«å¥æ´å¤«</a>å­¦ä¹ æ°å­¦ï¼å¹¶ç ç©¶<a href="https://zh.wikipedia.org/wiki/%E6%A9%9F%E5%99%A8%E7%BF%BB%E8%AD%AF" target="_blank" rel="noopener nofollow">æºå¨ç¿»è¯</a>ã<a href="https://zh.wikipedia.org/wiki/%E6%9D%B1%E5%B0%BC%C2%B7%E9%9C%8D%E7%88%BE#cite_note-Hoare_autobio-2" target="_blank" rel="noopener nofollow">[2]</a></p>
<p>1960 å¹´ï¼å¨<a href="https://zh.wikipedia.org/wiki/%E8%8E%AB%E6%96%AF%E7%A7%91%E5%9C%8B%E7%AB%8B%E5%A4%A7%E5%AD%B8" target="_blank" rel="noopener nofollow">è«æ¯ç§å½ç«å¤§å­¦</a>åå¾<a href="https://zh.wikipedia.org/wiki/%E5%8D%9A%E5%A3%AB%E5%AD%A6%E4%BD%8D" target="_blank" rel="noopener nofollow">åå£«å­¦ä½</a>åï¼ä»»èäºä¼¦æ¦<a href="https://zh.wikipedia.org/w/index.php?title=%E8%89%BE%E7%95%A5%E7%89%B9%E5%85%84%E5%BC%9F%E5%85%AC%E5%8F%B8&amp;action=edit&amp;redlink=1" target="_blank" rel="noopener nofollow">è¾ç¥ç¹åå¼å¬å¸</a>ï¼Elliott Brothers Ltdï¼ï¼å¼ååºç¬¬ä¸ä¸ªåç¨ç<a href="https://zh.wikipedia.org/wiki/ALGOL_60" target="_blank" rel="noopener nofollow">ALGOL 60</a>ç¼è¯å¨ï¼å¾å¿«å°±æä¸ºå¬å¸çé¦å¸­å·¥ç¨å¸ã</p>
<p>1968 å¹´ï¼æä¸º<a href="https://zh.wikipedia.org/wiki/%E8%B2%9D%E7%88%BE%E6%B3%95%E6%96%AF%E7%89%B9%E5%A5%B3%E7%8E%8B%E5%A4%A7%E5%AD%B8" target="_blank" rel="noopener nofollow">è´å°æ³æ¯ç¹å¥³çå¤§å­¦</a>çææã1977 å¹´åå°<a href="https://zh.wikipedia.org/wiki/%E7%89%9B%E6%B4%A5%E5%A4%A7%E5%AD%B8" target="_blank" rel="noopener nofollow">çæ´¥å¤§å­¦</a>æä»»ææãç°ä¸ºçæ´¥å¤§å­¦è£èªææï¼å¹¶å¨åæ¡¥<a href="https://zh.wikipedia.org/wiki/%E5%BE%AE%E8%BB%9F%E7%A0%94%E7%A9%B6%E9%99%A2" target="_blank" rel="noopener nofollow">å¾®è½¯ç ç©¶é¢</a>æä»»ç ç©¶åã</p>
<p><img src="https://img2024.cnblogs.com/blog/997046/202601/997046-20260112213059697-501020170.jpg" alt="æ¥å°æ¯Â·å®ä¸å°¼Â·çæ¥å¾·Â·éå°çµå£«" loading="lazy"></p>
<h2 id="c-net-äº¤æµç¾¤">C# .NET äº¤æµç¾¤</h2>
<p>ç¸ä¿¡å¤§å®¶å¨å¼åä¸­ç»å¸¸ä¼éå°ä¸äºæ§è½é®é¢ï¼è¦äºæ²¡æææçå·¥å·å»åç°æ§è½ç¶é¢ï¼æèæ¯åç°ç¶é¢ä»¥åä¸ç¥éè¯¥å¦ä½ä¼åãä¹åä¸ç´æè¯»èæåè¯¢é®ææ²¡æææ¯äº¤æµç¾¤ï¼ä½æ¯ç±äºåç§åå ä¸ç´é½æ²¡åå»ºï¼ç°å¨å¾é«å´çå¨è¿éå®£å¸ï¼æåå»ºäºä¸ä¸ªä¸é¨äº¤æµ.NET æ§è½ä¼åç»éªçç¾¤ç»ï¼ä¸»é¢åæ¬ä½ä¸éäºï¼</p>
<ul>
<li>å¦ä½æ¾å°.NET æ§è½ç¶é¢ï¼å¦ä½¿ç¨ APMãdotnet tools ç­å·¥å·</li>
<li>.NET æ¡æ¶åºå±åççå®ç°ï¼å¦åå¾åæ¶å¨ãJIT ç­ç­</li>
<li>å¦ä½ç¼åé«æ§è½ç.NET ä»£ç ï¼åªäºå°æ¹å­å¨æ§è½é·é±</li>
</ul>
<p>å¸æè½ææ´å¤å¿åéåæåå å¥ï¼åäº«ä¸äºå·¥ä½ä¸­éå°ç.NET é®é¢åå®è´µçåæä¼åç»éªã<strong>ç®åä¸ç¾¤å·²æ»¡ï¼ç°å¨å¼æ¾äºç¾¤ã</strong>å¯ä»¥å æ vxï¼ææä½ è¿ç¾¤: <strong>ls1075</strong> å¦å¤ä¹åå»ºäº <strong>QQ Group</strong>: 687779078ï¼æ¬¢è¿å¤§å®¶å å¥ã</p>
<h3 id="æ¬å¨ç¾¤èåæ">æ¬å¨ç¾¤èåæ</h3>
<p><img src="https://img2024.cnblogs.com/blog/997046/202601/997046-20260112213059747-418753626.jpg" alt="image-20260112212730495" loading="lazy"></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-12 21:33">2026-01-12 21:32</span>&nbsp;
<a href="https://www.cnblogs.com/InCerry">InCerry</a>&nbsp;
éè¯»(<span id="post_view_count">145</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19474329);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19474329', targetLink: 'https://www.cnblogs.com/InCerry/p/-/dotnet_week_25_12_2', title: '.NETå¨åã12æç¬¬2æ 2025-12-14ã' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ä¸ºä»ä¹æçäººè¯´âè¶èæç»´è¶åºåâï¼æä¹æè½å·å¤æé¿åæç»´ï¼ ]]></title>
    <link>https://www.cnblogs.com/jiujuan/p/19473443</link>
    <guid>479822263c1bd1690f8774de1e4e49ff</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/jiujuan/p/19473443" title="åå¸äº 2026-01-12 18:25">
    <span role="heading" aria-level="2">ä¸ºä»ä¹æçäººè¯´âè¶èæç»´è¶åºåâï¼æä¹æè½å·å¤æé¿åæç»´ï¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="ä¸åè¨ä¸ºä»ä¹æçäººè¯´è¶èæç»´è¶åºå">ä¸ï¼åè¨ï¼ä¸ºä»ä¹æçäººè¯´è¶èæç»´è¶åºå</h2>
<p>å¨æ¥å¸¸çæ´»ä¸­ï¼æä»¬å¸¸å¸¸å¬å°è¿æ ·çè¯´æ³ï¼"äººèäºå°±åå¾åºæ§äº"ã"å¹´è½»äººçæ³æ³å°±æ¯çµæ´»"ã"ä¸­å¹´ä¹åå­¦ä¹ è½åå°±ä¸éäº"ã</p>
<p>è¿äºè§å¿µæ ¹æ·±èåºï¼ä»¥è³äºè®¸å¤äººå°å¹´é¾å¢é¿ä¸æç»´åºåç»ä¸ç­å·ï¼è®¤ä¸ºéçå²æçæ¨ç§»ï¼æ¹ååæé¿åå¾è¶æ¥è¶ä¸å¯è½ã</p>
<p>ç¶èï¼æ¯å¦ç¦å¤§å­¦å¿çå­¦å®¶å¡ç½å°Â·å¾·é¦åçç ç©¶å½»åºé¢ è¦äºè¿ä¸ä¼ ç»è®¤ç¥ï¼å¥¹æåºç"æé¿åæç»´"æ¦å¿µæ­ç¤ºäºä¸ä¸ªä»¤äººæ¯å¥çäºå®ï¼<br>
<strong>å¤§èå·æç»èº«å¯å¡æ§ï¼æç»´æ¨¡å¼çéæ©åå³äºæä»¬å¯¹å¾è½ååææçæåº¦ï¼èéä¸å¯æ¹åçççå®¿å½</strong>ã</p>
<p>æé¿åæç»´çæ ¸å¿ä¿¡å¿µï¼è½åæ¯å¯å¡çã</p>
<blockquote>
<p>è®¤ä¸ºäººçææºåè½åä¸æ¯å¤©ççåºå®å¼ï¼ææºåè½åæ¯å¯ä»¥éè¿åå¤©åªåï¼éè¿å»æç»ä¹ åç­ç¥æ¹è¿ï¼å¹¶é¿æåæï¼æ¯è½å¤ä¸æ­åå±æé«çã</p>
</blockquote>
<p>ä¸ä¹ç¸å¯¹çæ¯"åºå®åæç»´"ââç¸ä¿¡äººçåºæ¬è½åæ¯å¤©çåºå®å¼ãé¾ä»¥æ¹åçã</p>
<p>è¿ä¸¤ç§æç»´æ¨¡å¼å¹¶éç®åçæ§æ ¼æ ç­¾ï¼èæ¯å½±åçæä»¬å¨äººçé¶æ®µååºéæ©ãä¸ä¸ªæ¥ææé¿åæç»´çäººï¼ä¼å°æ«æè§ä¸ºå­¦ä¹ æºä¼ï¼å°æ¹è¯å½ä½åé¦ï¼å°åªåè§ä¸ºéåä¸æ­æé¿çå¿ç»ä¹è·¯ãèåºå®åæç»´çäººï¼åé¿ææï¼å°å¤±è´¥è§ä¸ºèªèº«ä¸è¶³ï¼åå¨èªå·±çèéåºã</p>
<h2 id="äºä¸¤ç§æç»´çç§å­¦åæ">äºï¼ä¸¤ç§æç»´çç§å­¦åæ</h2>
<h3 id="ç¥ç»ç§å­¦çè§åº¦æ¥ç">ç¥ç»ç§å­¦çè§åº¦æ¥ç</h3>
<p>æé¿åæç»´çé©å½æ§å¨äºå®å¯¹"è½å"è¿ä¸æ¦å¿µçéæ°å®ä¹ãä¼ ç»è§å¿µå¾å¾å°è½åè§ä¸ºæç§åºå®çå®¹å¨ââä½ çæ¥æå¤å¤§å®¹éï¼è¿è¾å­åºæ¬å°±å±éå¨è¿ä¸ªèå´åãå¾·é¦åçç ç©¶è¡¨æï¼è¿ç§è§£éæ¯çé¢çãäºå®ä¸ï¼äººç±»çå¤§èåè®¤ç¥è½åæ´åæ¯ä¸ççææï¼èéä¸ä¸ªæéçå®¹å¨ãè¿ççææè½å¤ä¸æ­æ©å±ãæ·±ååéæ°ç»ç»ï¼å¶æ½åè¿è¶æä»¬éå¸¸ææ³è±¡çèå´ã</p>
<p>ä»ç¥ç»ç§å­¦çè§åº¦æ¥çï¼å¤§èçå¯å¡æ§æ¯ç»èº«çã</p>
<p>è½ç¶å¤§èå¨éå°å¹´æ¶æç¡®å®ç»åçå§ççéå¡è¿ç¨ï¼ç¥ç»åä¹é´ççªè§¦è¿æ¥ç»åçå¤§è§æ¨¡çä¿®åªãè¿æ¥åå¼ºåï¼ä½è¿å¹¶ä¸æå³çæå¹´åå¤§èå°±å¤±å»äºæ¹åçè½åã</p>
<p>æ°çç¥ç»è¿æ¥å¯ä»¥å¨ä»»ä½å¹´é¾å½¢æï¼æ°çæè½å¯ä»¥è¢«å­¦ä¹ ï¼æ°çä¹ æ¯å¯ä»¥è¢«å¹å»ãåæ¡¥å¤§å­¦çä¸é¡¹ç ç©¶è¿½è¸ªäºæå¹´äººå¨å­¦ä¹ æ°æè½æ¶çå¤§èååï¼åç°å³ä½¿æ¯äºåå²ä»¥ä¸çæå¹´äººï¼å¨å­¦ä¹ å¤ææè½ï¼å¦æèææ°çè¯­è¨ï¼æ¶ï¼å¤§èç®å±çç»æä¹ä¼åçå¯æµéçååãè¿æå³çå¤§èå®åè®ºæ¬èº«å°±æ¯ä¸ä¸ªéè¦è¢«æå¼çåºå®åæç»´ã</p>
<h3 id="åºå®åæç»´å¿çè§åº¦æ¥ç">åºå®åæç»´å¿çè§åº¦æ¥ç</h3>
<p>çè§£åºå®åæç»´çè¿ä½æºå¶ï¼å¯¹äºæç ´å®è³å³éè¦ã</p>
<p>åºå®åæç»´å¹¶éç®åçä¸æ¿ææ¹åï¼èæ¯ä¸å¥å¤æçå¿çé²å¾¡ç³»ç»ã</p>
<p>è¿ä¸ªç³»ç»å¨æä»¬é¢å¯¹ææãæ«æåä¸ç¡®å®æ§æ¶èªå¨å¯å¨ï¼å¶æ ¸å¿åè½æ¯ä¿æ¤æä»¬çèªææ¦å¿µåèªå°ãå½æä»¬æ¥æåºå®åæç»´æ¶ï¼æ¯ä¸æ¬¡å¤±è´¥é½ä¸ä»ä»æ¯ä¸æ¬¡æ«æï¼èæ¯å¯¹èªæä»·å¼çå¦å®ï¼æ¯ä¸æ¬¡ææé½ä¸ä»ä»æ¯å­¦ä¹ æºä¼ï¼èæ¯æ´é²èªèº«ä¸è¶³çé£é©ã</p>
<p>å æ­¤ï¼åºå®åæç»´çäººä¼å¾åäºéæ©å®å¨çãè½å¤è¯æèªå·±è½åçä»»å¡ï¼åé¿é£äºå¯è½å¯¼è´å¤±è´¥çææã</p>
<p>è¿ç§æç»´æ¨¡å¼çå½¢æå¾å¾å¯ä»¥è¿½æº¯å°ç«¥å¹´æ¶æçç»åã<br>
å½ç¶æ¯åèå¸è¿åº¦å¼ºè°ç»æèéè¿ç¨ï¼å½æåè¢«å®ä¹ä¸º"èµ¢"èå¤±è´¥è¢«å®ä¹ä¸º"ä¸¢è¸"ï¼å½åªåè¢«è§ä¸ºå¤©èµä¸è¶³çæ å¿æ¶ï¼å¿ç«¥å°±éæ¸å½¢æäºå³äºè½ååæåçåºå®åä¿¡å¿µã</p>
<p>è¿äºä¿¡å¿µä¸æ¦ååï¼å°±ä¼æä¸ºè¿æ»¤ä¸çä¿¡æ¯çééââåæ ·çç»åä¼è¢«ä¸åæç»´æ¨¡å¼çäººååºæªç¶ä¸åçè§£è¯»ã</p>
<h2 id="ä¸ä¸¤ç§ä¸åæç»´çè¡¨ç°">ä¸ï¼ä¸¤ç§ä¸åæç»´çè¡¨ç°</h2>
<p>ä¸ä¸ªæ¥ææé¿åæç»´çäººéå°ä¸ä¼çäºæï¼ä¼æ³ï¼"æè¿æ²¡ææ¡è¿ä¸ªï¼ä½æå¯ä»¥éè¿ç»ä¹ æ¥æé«"ï¼èä¸ä¸ªæ¥æåºå®åæç»´çåå¯è½æ³ï¼"æå°±æ¯ä¸æé¿è¿ä¸ªï¼è¿æ¯å¤©çç"ã</p>
<p>è¿ç§è®¤ç¥å·®å¼ä¼å¨å¤å¹´åäº§çå·¨å¤§çç´¯ç§¯æåºï¼å½±åå­¦ä¸ãèä¸ãäººéå³ç³»åä»¥åççæ´»æåº¦ã</p>
<p>å¨å­¦ä¹ ä¸æé¿ç»´åº¦ä¸ï¼æ¥ææé¿åæç»´çäººå°éè¯¯è§ä¸ºå®è´µçåé¦ï¼å°å°é¾è§ä¸ºæé¿çå¬ååãä»ä»¬ç¸ä¿¡"ä¸ä¼"åªæ¯"ææ¶è¿ä¸ä¼"ï¼å æ­¤æ´æ¿æèµ°åºèéåºï¼æ¥åææã</p>
<p>å¨äººéå³ç³»ä¸­ï¼æé¿åæç»´å¸®å©äººä»¬å°å²çªè§ä¸ºçè§£åæ·±åå³ç³»çæºä¼ï¼èéè¯æå¯¹æ¹æ¯éçè¯æ®ã</p>
<p><strong>éè¦å¼ºè°çæ¯ï¼æé¿åæç»´å¹¶ä¸æå³çç²ç®ä¹è§æå¿½è§ç°å®</strong>ã</p>
<p>æé¿åæç»´æ¯å³äºè¿ç¨çæç»´ââå®æ¿è®¤å½åçç¶æï¼è®¤å¯åªåçä»·å¼ï¼ç¸ä¿¡æ¹è¿çå¯è½æ§ï¼åæ¶èè¸å®å°éåè¡å¨ã</p>
<p>ä¸¤ç§æç»´å¯¹æ¯å¾ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/650581/202601/650581-20260112193839386-1115149159.png" alt="æé¿åæç»´ååºå®åæç»´å¯¹æ¯å¾" loading="lazy"><br>
ï¼å¾çæ¥èªï¼å¡ç½å°Â·å¾·é¦åãç»èº«æé¿ãï¼</p>
<h2 id="åæ¯ä»ä¹é»ç¢äºæé¿åæç»´å½¢æ">åï¼æ¯ä»ä¹é»ç¢äºæé¿åæç»´å½¢æï¼</h2>
<h3 id="æ©ææè²çå½±å">æ©ææè²çå½±å</h3>
<p>ç«¥å¹´ç»åå¯¹æç»´æ¨¡å¼çå¡é å·æéå¤§çå½±åï¼è¿ç§å½±åå¾å¾å¨æä»¬è¿æ æ³ç¨è¯­è¨è¡¨è¾¾çæ¶åå°±å·²ç»å¼å§ã</p>
<p>å¿çå­¦å®¶è¯å«åºå ç§å¸åçæè²è¡ä¸ºï¼å®ä»¬å¨æ æä¸­å¼ºåäºåºå®åæç»´ã</p>
<p>ç¬¬ä¸ç§æ¯è¿åº¦èµç¾å¤©èµèéåªåãå½å­©å­å®ææä»¶äºæ¶ï¼å¦ææäººçåé¦éä¸­å¨âä½ çèªæâãâä½ çæå¤©èµâä¸ï¼å­©å­å°±ä¼å°è¿äºå¤å¨çãä¸å¯æ§çç¹è´¨ä¸èªæä»·å¼èç³»èµ·æ¥ãè¿æå³çå½ä»ä»¬éå°å°é¾æ¶ï¼ä¼æå¿å¤±å»èªæçæ ç­¾ï¼ä»èåé¿ææã</p>
<p>ç¬¬äºç§æ¯å°å¤±è´¥ä¸èº«ä»½ç­åãå¦æå­©å­å¨å¤±è´¥æ¶å¬å°çæ¯âä½ æä¹è¿ä¹ç¬¨âãâä½ ä¸è¡âè¿æ ·çè¯ï¼ä»ä»¬å°±ä¼å°å¤±è´¥ååä¸ºèªæå®ä¹çä¸é¨åï¼èä¸æ¯ä¸ä¸ªå¯ä»¥æ¹åçç¶æã</p>
<p>æè²ç¯å¢ä¸­çè¯ä»·ä½ç³»ä¹èµ·çå³é®ä½ç¨ãå½å­¦æ ¡åç¤¾ä¼é«åº¦å¼ºè°æ ååèè¯æç»©ãå½å­¦çè¢«æååæ¯è¾ãå½æ­£ç¡®ç­æ¡è¢«è¿åº¦å¼ºè°æ¶ï¼å­¦çå°±å­¦ä¼äºå³æ³¨ç»æèéè¿ç¨ï¼å³æ³¨è¯æèªå·±èéæåèªå·±ã</p>
<p>è¿ç§ç¯å¢ä¸ï¼å³ä½¿å£å¤´ä¸å¼ºè°è¿ç¨æ¯ç»æéè¦ï¼å®éè¡å¨ä¼ éçä¿¡æ¯å´æªç¶ç¸åãå­©å­ä»¬æ¯éå¸¸æéçä¿¡æ¯æ¥æ¶èï¼ä»ä»¬è½å¤ä»æäººè¡ä¸ºçç»å¾®å·®å«ä¸­ï¼å¤æ­ä»ä¹ææ¯çæ­£è¢«éè§çã</p>
<p>ç ç©¶è¡¨æï¼å¨å¼ºè°åªååè¿æ­¥çç¯å¢ä¸­æé¿çå­©å­ï¼ä¸ä»å­¦ä¸è¡¨ç°æ´å¥½ï¼èä¸é¢å¯¹æ«ææ¶æ´å åé§ï¼æ´æ¿æè¿½æ±æææ§çç®æ ã</p>
<p>å®¶åº­æ°å´ä¸­çéæ§ä¿¡æ¯åæ ·éè¦ã</p>
<p>å¦æç¶æ¯æ¬èº«ææåºå®åæç»´ââä¾å¦ç»å¸¸è¡¨è¾¾"æå°±æ¯ä¸æé¿æ°å­¦"æ"äººèäºå­¦ä¸äºæ°ä¸è¥¿"ââå­©å­å°±ä¼å¨è³æ¿¡ç®æä¸­å¸æ¶è¿äºè§å¿µã</p>
<p>æ´å¾®å¦çæ¯ï¼ç¶æ¯å¦ä½å¯¹å¾èªå·±çéè¯¯åå¤±è´¥ï¼ä¼ç´æ¥å½±åå­©å­å¯¹å¾è¿äºé®é¢çæ¹å¼ãå¦æç¶æ¯å¨ç¯éæ¶è¡¨ç°åºèªè´£ãç¾è»æé²å¾¡ï¼å­©å­å°±ä¼å°è¿äºæç»ªååºæ¨¡å¼ååã</p>
<p>ç¸åï¼å¦æç¶æ¯è½å¤å¹³éå°æ¿è®¤éè¯¯å¹¶è®¨è®ºæ¹è¿æ¹æ³ï¼å­©å­å°±å­¦ä¼äºä»¥æé¿åçæ¹å¼å¯¹å¾å¤±è¯¯ã</p>
<h3 id="å¤§èåè²ä¸è®¤ç¥åå">å¤§èåè²ä¸è®¤ç¥åå</h3>
<p>å¤§èåè²çå¤ææ§ä¸ºçè§£æç»´æ¨¡å¼æä¾äºç¥ç»çç©å­¦çåºç¡ã</p>
<p>åé¢å¶ç®å±ââè´è´£æ§è¡åè½ãè®¡åãå²å¨æ§å¶åæ½è±¡æç»´çå¤§èåºåââæ¯äººç±»å¤§èä¸­æææççåºåä¹ä¸ãå®çåè²ä»éæ¥æå¼å§ï¼ä¸ç´å»¶ç»­å°äºåäºå²å·¦å³ã</p>
<p>è¿æå³çå¹´è½»äººå¨å¤æ­ãè§ååè°èæç»ªæ¹é¢çè½åç¡®å®ä¸æå¹´äººå­å¨å·®å¼ï¼è¿å¨ä¸å®ç¨åº¦ä¸è§£éäºä¸ºä»ä¹éå°å¹´ææ¶ä¼ååºå²å¨çå³å®ãç¶èï¼è¿å¹¶ä¸æå³çå¹´è½»äººçæç»´å°±æ¯åºåçï¼æ°æ°ç¸åï¼éå°å¹´å¤§èçé«åº¦å¯å¡æ§ä½¿å¾è¿ä¸ªé¶æ®µæ¯å¹å»æé¿åæç»´çç»ä½³æ¶æºã</p>
<p>éçå¹´é¾å¢é¿ï¼å¤§èç¡®å®ä¼ç»åä¸äºååï¼æå¹´åï¼å¤§èä»ç¶ä¿æçå¯å¡æ§ï¼å°½ç®¡å¶è¿ä½æ¹å¼ä¸å¹´è½»æ¶æææä¸åã</p>
<p>èå¹´å¤§èå¨æäºæ¹é¢çè³å·æä¼å¿ï¼ç ç©¶è¡¨æï¼èå¹´äººå¨æ´åå¤æä¿¡æ¯ãæç»ªè°èåå©ç¨å·²æç¥è¯æ¹é¢å¾å¾è¡¨ç°åºè²ã</p>
<p>æè°çè®¤ç¥è¡°éå¨å¾å¤§ç¨åº¦ä¸æ¯å¯ä»¥è¢«çæ´»æ¹å¼å ç´ æå½±åçââåæ¬è®¤ç¥æ´»å¨ãç¤¾ä¼åä¸ãä½è²é»ç¼åé¥®é£ç­ãæ´éè¦çæ¯ï¼å¤§èçå¯å¡æ§æ¯åºåç¹å¼æ§çï¼è¿æå³çç¹å®ç±»åçè®­ç»å¯ä»¥å¨ç¸åºåºåå¢å¼ºåè½ï¼å³ä½¿å¨å¶ä»åºåå¯è½åºç°å¹´é¾ç¸å³ååçæåµä¸ä¹æ¯å¦æ­¤ã</p>
<p>å¼å¾å¼ºè°çæ¯ï¼ç¥ç»å¯å¡æ§æ¯ååçãå¤§èä¸ä»ä¼å ä¸ºä¸ä½¿ç¨è"çé"ï¼ä¹ä¼å ä¸ºç§¯æä½¿ç¨èåå±ãè¿è¢«ç§°ä¸º"ç¨è¿åºé"ååï¼å¨è®¤ç¥å¿çå­¦åç¥ç»ç§å­¦ä¸­æçååçå®è¯æ¯æã</p>
<p>æé¿åæç»´æ¬è´¨ä¸æ¯ä¸ç§å¯¹å¤§èå¯å¡æ§çä¿¡å¿µçä¸ç§âå©ç¨âãå½æä»¬ç¸ä¿¡æ¹åæ¯å¯è½çï¼æä»¬å°±ä¼æå¥åªåå»å®ç°æ¹åï¼èè¿ç§æå¥æ¬èº«åä¼ä¿è¿å®éçç¥ç»ååï¼å½¢æè¯æ§å¾ªç¯ã</p>
<h3 id="å¿çé²å¾¡æºå¶ä¸èéåºä¾èµ">å¿çé²å¾¡æºå¶ä¸èéåºä¾èµ</h3>
<p>ä»å¿çå­¦è§åº¦æ¥çï¼åºå®åæç»´å¨å¾å¤§ç¨åº¦ä¸æ¯ä¸ç§é²å¾¡æºå¶ãå®ä¿æ¤æä»¬ååå¤±è´¥åæ«æå¸¦æ¥ççè¦æè§ï¼ç»´æ¤æä»¬çèªæå½¢è±¡åèªå°ã</p>
<p>å½æä»¬å®³æå¤±è´¥æ¶ï¼åºå®åæç»´åè¯æä»¬ï¼"è¿ä¸æ¯çæ­£çæï¼åªæ¯æè¿æ²¡å±ç°åºæçæ½å"ï¼æè"å¦ææå°è¯äºä½å¤±è´¥äºï¼é£æè¯´ææççä¸è¡"ãéè¿åé¿ææï¼æä»¬é¿åäºå¤±è´¥çé£é©ï¼ä½ä¹åæ¶æç»äºæé¿çæºä¼ã</p>
<p>è¿ç§é²å¾¡æºå¶å¨ç­æåç¡®å®è½å¤åå°ç¦èåä¸éï¼ä½å¨é¿æä¸­å´å¯¼è´äºè½åçåæ»åæ½åçæµªè´¹ã</p>
<p>èéåºæ¯å¦ä¸ä¸ªéè¦çæ¦å¿µãæä»¬é½æä¸ç§å¾åï¼å°±æ¯åçå¨è®©æä»¬æå°å®å¨åçæçèå´åã</p>
<p>è¿ç§å¾åæ¬èº«å¹¶éé®é¢ï¼å®æ¯äººç±»è¿åè¿ç¨ä¸­å½¢æçæ­£å¸¸æºå¶ââå¨è¿å¤æ¶ä»£ï¼åé©ç¦»å¼çæçç¯å¢å¾å¾æå³çå±é©ã</p>
<p>ç¶èï¼å¨ç°ä»£ç¤¾ä¼ä¸­ï¼è¿åº¦ä¾èµèéåºä¼å¯¼è´æé¿åæ»ã</p>
<p>èéåºçé®é¢ä¸å¨äºå®æ¬èº«ï¼èå¨äºæä»¬ç¨å®ä½ä¸ºåé¿æé¿ææçåå£ãæä»¬å¯è½æ»¡è¶³äºå¤ç¨çæè½ï¼åé¿ç²¾éæéçå¤§éç»ä¹ ï¼æ»¡è¶³äºè¿å¾å»çå³ç³»ï¼åé¿å»ºç«æ´æ·±è¿æ¥æéçèå¼±åå¦è¯ï¼æ»¡è¶³äºå¯è¡çè§£å³æ¹æ¡ï¼åé¿å¯»æ¾æ´ä¼æ¹æ¡æéçåæ°åé£é©æ¿æã</p>
<p>èº«ä»½è®¤åçåºåæ¯åºå®åæç»´çæ·±å±è¡¨ç°ã</p>
<p>å½æä»¬å°èªå·±å®ä¹ä¸º"ææ¯æç§äºº"æ¶ï¼è¿ç§å®ä¹å°±æä¸ºäºèªæéå¶çæ¡æ¶ã"ææ¯ä¸ä¸ªä¸æé¿æ°å­¦çäºº"ã"ææ¯ä¸ä¸ªååçäºº"ã"ææ¯ä¸ä¸ªæ²¡æåé åçäºº"ââè¿äºèªæå®ä¹ä¸æ¦å½¢æï¼å°±ä¼æå¯¼æä»¬éæ©æ§å°æ¥è§¦é£äº"ç¬¦å"æä»¬èº«ä»½çä¿¡æ¯åç»éªï¼åé¿é£äºå¯è½æææä»¬èº«ä»½çå¯è½æ§ã</p>
<p>æé¿åæç»´è¦æ±æä»¬æç ´è¿ç§èº«ä»½åºåï¼è®¤è¯å°èº«ä»½ä¸æ¯åºå®çæ ç­¾ï¼èæ¯å¯ä»¥ä¸æ­æ©å±åéæ°å®ä¹çã</p>
<h2 id="äºæä¹çªç ´éç¢æåªäºæ¹æ³">äºï¼æä¹çªç ´éç¢ï¼æåªäºæ¹æ³ï¼</h2>
<h3 id="è®¤ç¥éæä»åå¨å¯¹è¯å¼å§">è®¤ç¥éæï¼ä»åå¨å¯¹è¯å¼å§</h3>
<p>æé¿åæç»´çæ ¸å¿å¨äºæä»¬å¦ä½è§£è¯»èªå·±çç»åââç¹å«æ¯é£äºå°é¾åææçæ¶å»ã</p>
<p>è®¤ç¥éææ¯ä¸ç§ç³»ç»æ§çæ¹æ³ï¼å¸®å©æä»¬è¯å«åæ¹åé£äºå¼ºååºå®åæç»´çåå¨å¯¹è¯ã</p>
<p>è¿ä¸ªè¿ç¨å§äºå¯¹èªææç»´çè§å¯ãæä»¬éè¦å­¦ä¼æ³¨æå°èªå·±ä»ä¹æ¶åå¨ä½¿ç¨åºå®åæç»´çè¯­è¨ââ"æå°±æ¯ä¸æé¿è¿ä¸ª"ã"è¿è¯ææä¸è¡"ã"å¦ææå°è¯äºä½å¤±è´¥äºå¤ªä¸¢äººäº"ãä¸æ¦è¯å«åºè¿äºæç»´æ¨¡å¼ï¼æä»¬å°±å¯ä»¥ææè¯å°ææåéæå®ä»¬ã</p>
<p>è®¤ç¥éæçå·ä½ææ¯åæ¬å ä¸ªå±æ¬¡ã</p>
<ul>
<li>
<p>é¦åæ¯è¯æ®æ£éªââå½æä»¬äº§ç"æä¸æé¿è¿ä¸ª"çæç»´æ¶ï¼é®èªå·±ï¼è¿ä¸ªç»è®ºçè¯æ®æ¯ä»ä¹ï¼æä»ä¹è¯æ®ä¸è¿ä¸ªç»è®ºçç¾ï¼éå¸¸æä»¬ä¼åç°ï¼åºå®åæç»´çç»è®ºæ¯åºäºå°æ°è´é¢ç»åï¼èå¿½è§äºæ­£é¢ç»ååæ¹åçå¯è½æ§ã</p>
</li>
<li>
<p>å¶æ¬¡æ¯å½å éå¡ââå°å¤±è´¥å½å äºå¯æ§å ç´ ï¼å¦åªåç¨åº¦ãç­ç¥éæ©ï¼èéä¸å¯æ§å ç´ ï¼å¦å¤©èµãè¿æ°ï¼ï¼è¿æ ·å¤±è´¥å°±åæäºå¯ä»¥æ¹è¿çé®é¢ï¼èéåºå®çèº«ä»½ç¹å¾ã</p>
</li>
<li>
<p>ç¬¬ä¸æ¯æ¡æ¶è½¬æ¢ââå°"æåä¸å°"è½¬æ¢ä¸º"æææ¶è¿åä¸å°"ï¼å°"è¿å¤ªé¾äº"è½¬æ¢ä¸º"è¿éè¦æ´å¤æ¶é´åç»ä¹ "ï¼å°"å¤±è´¥æ¯åäº"è½¬æ¢ä¸º"å¤±è´¥æä¾äºå­¦ä¹ çæºä¼"ã</p>
</li>
</ul>
<p>å»ºç«æ¯ææ§çèªæå¯¹è¯æ¯è®¤ç¥éæçæç»­å®è·µã</p>
<p>å½æä»¬ç¯éæéå°å°é¾æ¶ï¼åå¨çæ¹è¯å£°é³å¾å¾ä¼å å§çè¦åé²å¾¡ï¼èé¼å±åæ¯æçå£°é³åè½ä¿è¿å­¦ä¹ åæé¿ãæé¿åæç»´è¦æ±æä»¬å°è¿ç§æ¯ææ§çå£°é³ååï¼æä¸ºé¢å¯¹æææ¶çé»è®¤ååºãè¿éè¦å»æç»ä¹ ï¼å°±åå¹å»ä»»ä½æ°ä¹ æ¯ä¸æ ·ã</p>
<h3 id="è¡ä¸ºæ¹åè¡å¨å¡é æç»´">è¡ä¸ºæ¹åï¼è¡å¨å¡é æç»´</h3>
<p>æç»´åè¡å¨æ¯ç¸äºå½±åçââæ¹åå¶ä¸­ä¸ä¸ªå¾å¾ä¼å¯¼è´å¦ä¸ä¸ªçæ¹åãä»ä»å¨è®¤ç¥ä¸çè§£æé¿åæç»´æ¯ä¸å¤çï¼æä»¬éè¦éè¿è¡ä¸ºæ¥å¼ºååæ·±åå®ã</p>
<p>éæ©æææ§ä»»å¡æ¯å¹å»æé¿åæç»´æç´æ¥çè¡ä¸ºæ¹å¼ãå½æä»¬ä¸»å¨éæ©é£äºéè¦åªåååææè½å®æçä»»å¡æ¶ï¼æä»¬å°±å¨ç¨è¡å¨åèªå·±è¯æï¼è½åæ¯å¯ä»¥åå±çï¼åªåæ¯ææçãè¿ç§è¡ä¸ºäº§ççæ°æ®æ¯ä»»ä½è¨è¯­é½æ´æè¯´æåã</p>
<p>å·ä½æ¥è¯´ï¼å¯ä»¥ä»å°å¤å¼å§ãéæ©ä¸ä¸ªä½ è®¤ä¸ºèªå·±"ä¸æé¿"çé¢åï¼æå¥æ¶é´åç²¾åå»å­¦ä¹ åç»ä¹ ãæ³¨æè§å¯è¿ä¸ªè¿ç¨ä¸­çååââæåçæè§ãéæ¸çè¿æ­¥ãéå°çå°é¾åçªç ´ã</p>
<p>è¿ç§äº²èº«ä½éªæ¯çè®ºæ´è½è¯´æä½ ï¼è½åç¡®å®æ¯å¯ä»¥åå±çãéè¦çæ¯éæ©éåº¦ææçä»»å¡ââå¤ªå®¹æçä»»å¡æ æ³ä¿è¿æé¿ï¼å¤ªé¾çä»»å¡å¯è½å¯¼è´æ«è´¥ãæä½³çéæ©æ¯é£äºéè¦åªåä½ä¸æ¯ä¸å¯è½å®æçä»»å¡ã</p>
<p>å»ºç«åé¦å¾ªç¯æ¯å¦ä¸ä¸ªéè¦çè¡ä¸ºç­ç¥ãæé¿åæç»´éè¦åæ¶ãåç¡®çåé¦æ¥è°æ´åªåçæ¹åãä»ä»åªåæ¯ä¸å¤çââæä»¬éè¦ç¥éåªåæ¯å¦ææï¼åªééè¦è°æ´ã</p>
<p>è¿æå³çä¸»å¨å¯»æ±åé¦ï¼æ è®ºæ¯æ¥èªèå¸ãåäºãæåè¿æ¯èªæåæãè®°å½è¿å±ãåé¡¾ç®æ è¾¾ææåµãè¯å®å°è¯ä¼°èªå·±çè¡¨ç°ââè¿äºé½æ¯å»ºç«ææåé¦å¾ªç¯çæ¹æ³ãæ²¡æåé¦ï¼æä»¬å¯è½åªæ¯å¨éå¤æ æçåªåï¼æèéè¿äºæ¹è¿çæºä¼ã</p>
<h3 id="ä¹ æ¯å»æå°æé¿ä¹ æ¯å">ä¹ æ¯å»æï¼å°æé¿ä¹ æ¯å</h3>
<p>æé¿åæç»´å¦æåªæ¯å¶å°çè§æï¼å¶æææ¯æéçã</p>
<p>çæ­£çæä¹æ¹åéè¦å°æé¿åæç»´è½¬åä¸ºèªå¨çä¹ æ¯ãè¿éè¦çè§£ä¹ æ¯çè¿ä½æºå¶ââä¹ æ¯ç±è§¦åãè¡ä¸ºåå¥å±ä¸é¨åç»æãè®¾è®¡æ¯ææé¿åæç»´çä¹ æ¯ï¼æå³çå°æé¿å¯¼åçè¡ä¸ºä¸ç§¯æçææä½éªèç³»èµ·æ¥ï¼ä½¿å¶éæ¸èªå¨åã</p>
<p>å·ä½çæ¹æ³åæ¬å»ºç«å®æåæçä¹ æ¯ã</p>
<p>æ¯å¨ææ¯æè±æ¶é´åé¡¾èªå·±çå­¦ä¹ åæé¿ï¼éå°äºä»ä¹ææï¼ä»ä¸­å­¦å°äºä»ä¹ï¼ä¸æ¬¡å¯ä»¥å¦ä½æ¹è¿ï¼è¿ç§åæä¸ä»æä¾åé¦ï¼è¿å¼ºåäºæé¿æ¯éè¦çãå¼å¾å³æ³¨çè¿ä¸ä¿¡å¿µã</p>
<p>è®°å½æé¿æ¥å¿ä¹æ¯ç±»ä¼¼çæ¹æ³ââè®°å½é£äºå°é¾æ¶å»ãå¦ä½åºå¯¹çãä»ä¸­è·å¾äºä»ä¹ãè¿äºè®°å½æä¸ºå¯è§çæé¿è¯æ®ï¼å¯ä»¥ç¨æ¥å¯¹æåºå®åæç»´çæ¶æç»è®ºã</p>
<p>å°æé¿è¯­è¨èå¥æ¥å¸¸äº¤æµä¹å¾éè¦ã</p>
<p>æ³¨æèªå·±ä½¿ç¨çè¯­è¨ï¼ç¹å«æ¯å¯¹ä»äººï¼ç¹å«æ¯å­©å­åå­¦çï¼çåé¦ãç¨"ä½ éè¿åªåæé«äº"ä»£æ¿"ä½ çèªæ"ï¼ç¨"ä½ è¿æ²¡ææ¡è¿ä¸ªæå·§ï¼ä½æä»¬ä¸èµ·æ¥æ¾æ¹æ³"ä»£æ¿"ä½ ä¸è¡"ã</p>
<p>è¿ç§è¯­è¨ä¸ä»å½±åä»äººï¼ä¹éæ¸æ¹åèªå·±çæç»´ä¹ æ¯ãå¨å­©å­æè²ä¸­ï¼è¿ä¸ç¹å°¤ä¸ºéè¦ââç¶æ¯åèå¸ä½¿ç¨çè¯­è¨ç±»åå¯ä»¥å¡é å­©å­çæç»´æ¨¡å¼ã</p>
<h3 id="ç¯å¢è®¾è®¡åé æ¯ææ§çæç³»ç»">ç¯å¢è®¾è®¡ï¼åé æ¯ææ§çæç³»ç»</h3>
<p>ç¯å¢å¯¹æç»´æ¨¡å¼çå½±åå¾å¾è¢«ä½ä¼°ã</p>
<p>æä»¬æå¤çç©çç¯å¢ãç¤¾äº¤ç¯å¢åæåç¯å¢æç»­ä¸æ­å°åæä»¬ä¼ éä¿¡æ¯ï¼å½±åæä»¬çæç»´åè¡ä¸ºã</p>
<p>è®¾è®¡ä¸ä¸ªæ¯ææé¿åæç»´çç¯å¢ï¼æå³çææè¯å°åé é£äºé¼å±å­¦ä¹ ãæ¥åææãéè§æé¿çæ¡ä»¶ãè¿ä¸ä»åæ¬ç©çç¯å¢çå®æï¼æ´éè¦çæ¯ç¤¾äº¤ç¯å¢çæå»ºã</p>
<p>ç©çç¯å¢çè®¾è®¡å¯ä»¥ä¿è¿æé¿åæç»´ãå±ç¤ºèªå·±æä»äººæé¿è¿ç¨çç©åï¼å¦æ©æçä½ååç°å¨çä½åçå¯¹æ¯ï¼ãæ¾ç½®æ¿å±æ§çä¹¦ç±åèµæãåé å¯ä»¥ä¸æ³¨å­¦ä¹ ååé çç©ºé´ââè¿äºé½å¨æ å½¢ä¸­ä¼ éçæé¿çä¿¡æ¯ãç¸åï¼è¿åå¼ºè°æå°±åæåçç¯å¢å¯è½å¼ºååºå®åæç»´ï¼å ä¸ºå®ä»¬å¼ºè°çæ¯ç»æèéè¿ç¨ã</p>
<p>ç¤¾äº¤ç¯å¢çè®¾è®¡åæ ·å³é®ãå¯»æ¾åå»ºç«é£äºéè§æé¿ãæ¯ææ¹åçç¤¾ç¾¤ââå­¦ä¹ å°ç»ãå´è¶£ç¤¾ç¾¤ãå¯¼å¸å³ç³»ç­ãå¨è¿äºç¤¾ç¾¤ä¸­ï¼åäº«å°é¾åå¤±è´¥æ¯è¢«é¼å±çï¼åªååè¿æ­¥æ¯è¢«è®¤å¯çï¼æ°å°è¯æ¯è¢«æ¯æçãç¸åï¼é£äºå¼ºåæ¯è¾ãç«äºåèªææ ç­¾çç¤¾äº¤ç¯å¢ä¼å¼ºååºå®åæç»´ã</p>
<h2 id="å­ç»èº«æé¿ä¸æä¹">å­ï¼ç»èº«æé¿ä¸æä¹</h2>
<h3 id="æ´å¤§è§è§ä¸çç»èº«æé¿">æ´å¤§è§è§ä¸çç»èº«æé¿</h3>
<p>æé¿åæç»´ä¸æ¯ä¸ä¸ªéè¦å¨æä¸ªå¹´é¾é¶æ®µå®æçä»»å¡ï¼èæ¯è´¯ç©¿æ´ä¸ªçå½å¨æçæç»­å®è·µã</p>
<p>çæ­£çè§£æé¿åæç»´æå³çè®¤è¯å°ï¼æ è®ºå¤äºä»ä¹å¹´é¾ï¼æ è®ºå·²ç»åå¾äºä»ä¹æå°±ï¼æ»ææ´å¤å¯ä»¥å­¦ä¹ ãåå±åè´¡ç®çç©ºé´ã</p>
<p>è¿ç§è®¤è¯æ¬èº«å°±å·æè§£æ¾æ§ââå®è§£é¤äº"å·²ç»å¤ªæäº"æ"å·²ç»è¶³å¤å¥½äº"çèªæéå¶ï¼è®©çå½ä¿æå¼æ¾åå¯è½ã</p>
<p>ä»æ´åçè§è§æ¥çï¼äººççåä¸ªé¶æ®µä¸æ¯å½¼æ­¤å²è£çï¼èæ¯ç¸äºèç³»ãç¸äºä¸°å¯çã</p>
<p>éå¹´æ¶æçç­æååé©ãä¸­å¹´æ¶æçæ·±åº¦åæºæ§ãèå¹´æ¶æçæ²æ·åè¶è¶ââè¿äºåè´¨å¯ä»¥ç¸äºæ¸éï¼åé åºç¬ç¹ççå½å½¢æã</p>
<p>ä¸ä¸ªæ¥ææé¿åæç»´çå¹´è½»äººå¯ä»¥å¹å»èå¹´äººçæ²ç¨³åè¿è§ï¼ä¸ä¸ªæ¥ææé¿åæç»´çä¸­å¹´äººå¯ä»¥ä¿æå¹´è½»äººçå¥½å¥åå¼æ¾ï¼ä¸ä¸ªæ¥ææé¿åæç»´çèå¹´äººå¯ä»¥è´¡ç®å¹´è½»äººçæ´»åååé åã</p>
<p>è¿ç§è·¨å¹´é¾çåè´¨æ´åï¼æ¯æé¿åæç»´å¨çå½å±é¢çæé«ä½ç°ã</p>
<h3 id="æé¿åæç»´ä¸æä¹å»ºæ">æé¿åæç»´ä¸æä¹å»ºæ</h3>
<p>æé¿åæç»´çæ·±å±ä»·å¼ä¸ä»å¨äºæé«è½ååæå°±ï¼æ´å¨äºå»ºæææä¹çäººçã</p>
<p>å½æä»¬ç¸ä¿¡æ¹åæ¯å¯è½çï¼æä»¬å°±ä¸ä¼è¢«å½åçå°å¢æå®ä¹ï¼å°±è½å¤çå°æªæ¥çå¯è½æ§ï¼å°±æè½åå¨å°é¾ä¸­æ¾å°æä¹ã</p>
<p>è¿ç§æä¹å»ºæçè½åæ¯å¿çå¥åº·åäººçæ»¡æåº¦çæ ¸å¿è¦ç´ ãç ç©¶è¡¨æï¼é£äºè½å¤å¨æ«æä¸­å¯»æ¾æä¹çäººï¼æ¯é£äºåªå³æ³¨ç»æçäººæ´æå¯è½ä»éå¢ä¸­æ¢å¤ï¼å¹¶å¨é¿æä¸­åå¾æ´å¥½çç»æã</p>
<p>æé¿åæç»´ä¹æå³çå¯¹çå½æ¬èº«çå¼æ¾æåº¦ã</p>
<p>æ¯ä¸ä¸ªäººçé¶æ®µé½æå¶ç¬ç¹çææåæºéï¼æ¯ä¸ä¸ªç»åââæ è®ºæ¯æåçè¿æ¯å¤±è´¥çââé½å¯ä»¥æä¸ºæé¿çç´ æãå½æä»¬ç¨è¿ç§ç¼åçå¾çæ´»æ¶ï¼çæ´»å°±ä¸åæ¯å¿é¡»ç¬è¿å»çé¶æ®µï¼èæ¯å¼å¾æ´»åºæ¥çæç¨ãè¿ç§æåº¦ä¸æ¯ç²ç®çä¹è§ï¼èæ¯åºäºå¯¹äººç±»æ½åçæ·±å»çè§£åä¿¡ä»»ã</p>
<h2 id="ä¸æåéæ°å®ä¹å¯è½æ§">ä¸ï¼æåï¼éæ°å®ä¹å¯è½æ§</h2>
<p>"è¶èè¶åºæ§"ä¸å¶è¯´æ¯ä¸ä¸ªä¸å¯é¿åçççå½è¿ï¼ä¸å¦è¯´æ¯ä¸ä¸ªèªæå®ç°çé¢è¨ã</p>
<p>å®ä¹æä»¥æµè¡ï¼æ¯å ä¸ºå®åæ äºè®¸å¤äººççå®ä½éªââä»ä»¬ç¡®å®æå°éçå¹´é¾å¢é¿ï¼æ¹ååå¾æ´å å°é¾ãç¶èï¼è¿ç§ä½éªçåå æ¯å¤æçï¼å¯è½åæ¬ä¹ æ¯çå¼ºåãèº«ä»½çåºåãç¤¾ä¼ææçååï¼ä»¥åå¤§èæäºå å·¥éåº¦çèªç¶ååãä½è¿äºåå å¹¶ä¸æå³çæé¿åæç»´æ¯ä¸å¯è½çï¼å®ä»¬åªæ¯æå³çæä»¬éè¦æ´å»æå°å¹å»åé»ç¼è¿ç§æç»´æ¨¡å¼ã</p>
<p>æé¿åæç»´æ¯ä¸ç§éæ©ââéæ©ç¸ä¿¡æ¹åæ¯å¯è½çï¼éæ©å°ææè§ä¸ºæºä¼ï¼éæ©ç¨è¿ç¨èéç»ææ¥å®ä¹èªå·±ãè¿ç§éæ©ä¸åå¹´é¾éå¶ãè½ç¶ä¸åå¹´é¾é¶æ®µé¢ä¸´çææä¸åï¼ä½æé¿çå¯è½æ§æ¯æ®éçãä¸ä¸ªäºåå²çäººå¯ä»¥éæ©ç»´æç°ç¶ï¼æç»å­¦ä¹ åæ¹åï¼ä¸ä¸ªä¸åå²çäººå¯ä»¥éæ©æ¥æ±æ°äºç©ï¼æç»­æé¿ååå±ãå³å®å ç´ ä¸æ¯å¹´é¾ï¼èæ¯å¯¹æé¿çæåº¦åæ¿è¯ºã</p>
<p>æç»ï¼æé¿åæç»´æ¯ä¸ç§å³äºäººçå¯è½æ§çä¿¡å¿µã</p>
<p>å®åè¯æä»¬ï¼äººä¸åºè¯¥è¢«ä»»ä½æ ç­¾æå®ä¹ââæ è®ºè¿ä¸ªæ ç­¾æ¯å¹´é¾ãè½åãèæ¯è¿æ¯è¿å»çç»åãè¿ç§ä¿¡å¿µä¸æ¯å¦è®¤éå¶ï¼èæ¯ç¸ä¿¡å¨éå¶ä¹ååä¹å¤ï¼é½å­å¨çæªè¢«åæçæ½åã</p>
<p>å¹å»åç»´ææé¿åæç»´ï¼å°±æ¯éæ©æ´»å¨è¿ç§å¯è½æ§çç©ºé´ä¸­ï¼ä¸æ­æ©å±èªå·±çè¾¹çï¼åæ¶æ¥çº³åçè§èªå·±ç¬ç¹ççå½æç¨ãå¨è¿ä¸ªæä¹ä¸ï¼æé¿åæç»´ä¸ä»æ¯ä¸ç§è®¤ç¥ç­ç¥ï¼æ´æ¯ä¸ç§çå½æåº¦ââä¸ç§å¯¹çå½çå¼æ¾ãå¥½å¥ååæ¢çæåº¦ã</p>
<h2 id="åè">åè</h2>
<ul>
<li>ãç»èº«æé¿ã<a href="https://book.douban.com/subject/27154533/" target="_blank" rel="noopener nofollow">https://book.douban.com/subject/27154533/</a></li>
<li>ãä¸å¼ºå¿çç¶æ¯ï¼æè²å­©å­è¦æå¿çå­¦ã<a href="https://book.douban.com/subject/37233750/" target="_blank" rel="noopener nofollow">https://book.douban.com/subject/37233750/</a></li>
<li>ãè®¤ç¥è§éã<a href="https://book.douban.com/subject/35193035/" target="_blank" rel="noopener nofollow">https://book.douban.com/subject/35193035/</a></li>
<li>å¦ä½ä»åºå®åæç»´è½¬åä¸ºæé¿åæç»´ï¼-ç¥ä¹é®ç­ï¼<a href="https://www.zhihu.com/question/21099982" target="_blank" rel="noopener nofollow">https://www.zhihu.com/question/21099982</a></li>
<li>ãå¯å¡çæï¼èªæåå±å¿çå­¦ç35å å¿ä¿®è¯¾ã<a href="https://book.douban.com/subject/35388653/" target="_blank" rel="noopener nofollow">https://book.douban.com/subject/35388653/</a></li>
</ul>

</div>
<div id="MySignature" role="contentinfo">
    == just do it ==
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.052083333333333336" data-date-updated="2026-01-12 19:40">2026-01-12 18:25</span>&nbsp;
<a href="https://www.cnblogs.com/jiujuan">ä¹å·</a>&nbsp;
éè¯»(<span id="post_view_count">156</span>)&nbsp;
è¯è®º(<span id="post_comment_count">1</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19473443);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19473443', targetLink: 'https://www.cnblogs.com/jiujuan/p/19473443', title: 'ä¸ºä»ä¹æçäººè¯´âè¶èæç»´è¶åºåâï¼æä¹æè½å·å¤æé¿åæç»´ï¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
        </channel>
        </rss>