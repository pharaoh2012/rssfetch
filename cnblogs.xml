<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åšå®¢å›­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2025-12-23T04:15:30.597Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åšå®¢å›­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ è®ºç´¢å¼•çš„é‡è¦æ€§ ]]></title>
    <link>https://www.cnblogs.com/zhuancloud/p/19386304</link>
    <guid>979c570a7d233b63a5c1ee0612e35918</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/zhuancloud/p/19386304" title="å‘å¸ƒäº 2025-12-23 12:14">
    <span role="heading" aria-level="2">è®ºç´¢å¼•çš„é‡è¦æ€§</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h1>å¼€ç¯‡å°æµ‹éªŒ</h1>
<p>ä¸‹é¢è¿™æ ·ä¸€ä¸ªå°SQL ä½ è¯¥æ€ä¹ˆæ ·æ·»åŠ æœ€ä¼˜ç´¢å¼•</p>
<p>ä¸¤ä¸ªè¡¨ä¸Šç°åœ¨åªæœ‰èšé›†ç´¢å¼•</p>
<p>bigproduct è¡¨ä¸Šå·²ç»æœ‰èšé›†ç´¢å¼• ProductID</p>
<p>bigtransactionhistory è¡¨ä¸Šå·²ç»æœ‰èšé›†ç´¢å¼• TransactionID</p>
<p><img src="https://img2024.cnblogs.com/blog/980582/202512/980582-20251223120456999-725818889.png" alt="b44130128656738d3f4b780d89ab2eac" loading="lazy"></p>
<p>&nbsp;</p>
<p>ä½ æ˜¯å¦ä¸€çœ¼å°±èƒ½çœ‹å‡ºæ¥å‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆå°†åœ¨æ–‡ç« ä¸­é€æ­¥æ­æ™“~~~</p>
<p><span style="font-size: 18px; color: rgba(128, 0, 128, 1)">ç®€å•ç²—æš´çš„æ·»åŠ ç´¢å¼•</span></p>
<p>é¦–å…ˆæˆ‘ä»¬çœ‹ä¸€ä¸‹æ²¡æœ‰ä¼˜åŒ–å‰çš„æ‰§è¡Œè®¡åˆ’</p>
<p><img src="https://img2024.cnblogs.com/blog/980582/202512/980582-20251223120641375-577465385.png" alt="ca7e2b86cd792b5d4d254d5f5d94ad86" loading="lazy"></p>
<p>&nbsp;</p>
<p>clustered index scan è¿™å…¶å®å°±æ˜¯è¡¨æ‰«æï¼Œä¸æ˜¯table scan åªæ˜¯å› ä¸ºè¡¨ä¸Šæœ‰èšé›†ç´¢å¼•<br><br></p>
<p>å¯ä»¥çœ‹å‡ºè¿™ä¸ªæŸ¥è¯¢ä¿©è¡¨éƒ½ä½¿ç”¨äº†è¡¨æ‰«æï¼</p>
<p><strong>where </strong><strong>æ¡ä»¶æ·»åŠ ç´¢å¼•</strong></p>
<p>é¦–å…ˆå¤§å¤šæ•°äººéƒ½çŸ¥é“ where æ¡ä»¶ä¸­çš„å­—æ®µéœ€è¦æ·»åŠ ç´¢å¼•! æˆ‘ä»¬æ·»åŠ ä¸€ä¸‹çœ‹çœ‹æ•ˆæœåˆ›å»º</p>
<p>åœ¨ bigproduct è¡¨ä¸Šåˆ›å»º name åˆ—ç´¢å¼•ï¼Œåœ¨bigtransactionhistoryè¡¨ä¸Šåˆ›å»ºTransactionDate åˆ—ç´¢å¼•ã€‚</p>
<p>å†æ¬¡æ‰§è¡Œè¯­å¥çœ‹ä¸€ä¸‹æ•ˆæœï¼</p>
<p>&nbsp;</p>
<p><img src="https://img2024.cnblogs.com/blog/980582/202512/980582-20251223120724790-1339715259.jpg" alt="530d49249ae3bf15365abcf4643f1f8c" loading="lazy"></p>
<p>&nbsp;</p>
<p><img src="https://img2024.cnblogs.com/blog/980582/202512/980582-20251223120744822-2049170817.png" alt="fabf0aadf5ac5e8beb9fac5fc3003a45" loading="lazy"></p>
<p>&nbsp;</p>
<p>æ·»åŠ whereç´¢å¼•ä»¥åå¯ä»¥çœ‹åˆ°ä»¥ä¸‹å‡ ä¸ªç°è±¡</p>
<ul class="list-paddingleft-1">
<li>
<p>bigproduct ä»åŸæ¥çš„clustered index scan å˜æˆ index seek</p>
</li>
<li>
<p>å¦å¤–å¤šå‡ºæ¥ä¸ªKEY Lookup(clustered)</p>
</li>
<li>
<p>bigproduct ä¸Šæ·»åŠ çš„ç´¢å¼•èµ·äº†ä½œç”¨ï¼Œé€»è¾‘è¯»bigproduct ç”± 601 å˜æˆ10ã€‚</p>
</li>
<li>
<p>bigtransactionhistory æ²¡å•¥å˜åŒ–å•Šè¿˜æ˜¯clustered index scan</p>
</li>
</ul>
<p>è§£é‡Šä¸€ä¸‹å‡ºç°çš„ç°è±¡ ï¼šé¦–å…ˆä¸€ç‚¹bigproduct è¾¹æ·»åŠ çš„whereæ¡ä»¶ç´¢å¼•ï¼Œèµ·åˆ°äº†ä½œç”¨ï¼Œæ‰§è¡Œçš„æ—¶å€™ä¸æ˜¯å…¨è¡¨æ‰«æäº†ï¼Œé€»è¾‘è¯»æœ‰æ˜æ˜¾çš„ä¸‹é™ï¼Œå‡ºç°çš„ KEY Lookup æ˜¯å› ä¸ºé€‰æ‹©ï¼ˆselectï¼‰çš„åˆ—ï¼Œåœ¨ç´¢å¼•ä¸­æ²¡æœ‰ï¼Œè€Œéœ€è¦é€šè¿‡èšé›†ç´¢å¼•å†æŸ¥æ‰¾ä¸€æ¬¡ï¼Œå†æ‰¾ä¸€æ¬¡ä¹Ÿæ„å‘³ç€å¤šä¸€éƒ¨åˆ†å¼€é”€ï¼é‚£ä¹ˆåŒæ ·æ·»åŠ äº†where æ¡ä»¶ç´¢å¼•çš„bigtransactionhistoryè¡¨ä¸ºä»€ä¹ˆæ²¡èµ·ä½œç”¨å‘¢ï¼Ÿé‚£æ˜¯å› ä¸ºSQLä¼˜åŒ–å™¨åœ¨é€‰æ‹©è®¡åˆ’çš„æ—¶å€™è®¤ä¸ºï¼Œä¸ä½¿ç”¨TransactionDate åˆ—ç´¢å¼•æŸ¥æ‰¾æ•ˆç‡ä¼šæ›´å¥½!</p>
<p>çœŸçš„ä¹ˆï¼Ÿæˆ‘ä»¬æ¥éªŒè¯ä¸€ä¸‹ï¼Œé€šè¿‡æŒ‡å®šé€‰æ‹©ç´¢å¼•ï¼Œæ¥è®©ä¼˜åŒ–å™¨é€‰æ‹©ç´¢å¼•æŸ¥æ‰¾ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/980582/202512/980582-20251223120817365-1926397905.jpg" alt="a27b79c2f98f8e77339b6c2820691ba2" loading="lazy"></p>
<p>&nbsp;</p>
<p><img src="https://img2024.cnblogs.com/blog/980582/202512/980582-20251223120831833-1982298943.png" alt="f05e632e55f36c304b12af2bd3444c92" loading="lazy"></p>
<p>&nbsp;å¼ºåˆ¶ä½¿ç”¨ç´¢å¼•ä»¥åï¼Œå¯ä»¥çœ‹å‡ºé€»è¾‘è¯»ç”± 14W å˜æˆ1961Wï¼Œè¯­å¥æ—¶é—´ä¹Ÿå˜å¾—å¾ˆé•¿ï¼Œè¿™å°±æ˜¯ä¼˜åŒ–å™¨ä¸ºä»€ä¹ˆä¸é€‰ç”¨ä½ åŠ çš„ç´¢å¼•ï¼ä¼˜åŒ–å™¨è¿˜æ˜¯å¾ˆæ™ºèƒ½çš„å§ã€‚</p>
<p>é«˜èƒ½é¢„è­¦ï¼šä¼˜åŒ–å™¨å¯ä¸æ˜¯ä»€ä¹ˆæ—¶å€™éƒ½è¿™ä¹ˆæ™ºèƒ½çš„...ç”±äºç¼“å­˜è®¡åˆ’æˆ–ä¼˜åŒ–å™¨æŠ½é£ç­‰åŸå› ï¼Œä¹Ÿä¼šå‡ºç°ä¼˜åŒ–å™¨ç”¨äº†è¿™ç§ç´¢å¼•ï¼Œå¯¼è‡´ä½ çš„è¯­å¥å¥‡æ…¢ï¼Œè¯»é£™å‡ç›´æ¥å½±å“åˆ°ä½ çš„å†…å­˜ã€ç£ç›˜ã€CPUèµ„æºï¼å¦å¤–å¦‚æœè¿™æ ·ä¸€æ¡è¯­å¥æ˜¯ç³»ç»Ÿä¸­ä¸€æ¡å¾ˆé¢‘ç¹è¿è¡Œçš„è¯­å¥ï¼Œä½ çš„ç³»ç»Ÿå°±æŒ‚äº†ï¼æ²¡é”™å°±æŒ‚äº†ï¼è¿™å°±æ˜¯å¼€ç¯‡æŠ›å‡ºçš„é—®é¢˜å°±æ˜¯å› ä¸ºä¸€æ¡è¯­å¥ï¼</p>
<p><strong>æ¶ˆç­</strong><strong>Key Lookup </strong><strong>æ·»åŠ </strong><strong>select </strong><strong>å­—æ®µ</strong></p>
<p>è¿™å°±æ˜¯ä¼ è¯´ä¸­çš„è¦†ç›–ç´¢å¼•ï¼</p>
<p>çœ‹åˆ°æ‰§è¡Œè®¡åˆ’ä¸­å­˜åœ¨Key Lookupã€€è€Œä¸”æ¶ˆè€—å æ¯”å¾ˆé«˜ï¼Œå¦‚ä¸Šé¢å¼ºåˆ¶ç´¢å¼•çš„è®¡åˆ’ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¦æƒ³åˆ°çš„ åœ¨ç´¢å¼•ä¸­åŒ…å«é‚£äº›SELECT çš„åˆ—ï¼å¦‚æœæ¶ˆè€—ä½ï¼Œé€»è¾‘è¯»å°‘ï¼Œå¦‚ä¸Šé¢bigproduct è¡¨ä¸­çš„Key Lookup å°±å¯ä»¥å¿½ç•¥ï¼ˆå¦‚æœä½ è¿½æ±‚å®Œç¾ï¼Œä¹Ÿä¸€æ ·ä¼˜åŒ–å°±å¯ä»¥äº†ï¼‰ã€‚</p>
<p>åŒ…å«åˆ—çš„å›¾å½¢åŒ–åˆ›å»ºï¼š@ç§‹ä»™ ç‰¹æ„ç»™ä½ çš„è¯´æ˜</p>
<p><img src="https://img2024.cnblogs.com/blog/980582/202512/980582-20251223120901669-431129901.png" alt="d3e35652e888862bf5ce375e2a02fb82" loading="lazy"></p>
<p>è¯­å¥åˆ›å»ºå°±æ˜¯ï¼š</p>
<p><img src="https://img2024.cnblogs.com/blog/980582/202512/980582-20251223120924631-188723058.png" alt="bbe701c20ca02bfb982aa5c37db8cfd8" loading="lazy"></p>
<p>ä¸‹é¢æˆ‘ä»¬æ·»åŠ ä¸€ä¸‹çœ‹çœ‹æ•ˆæœï¼š</p>
<p>&nbsp;</p>
<p><img src="https://img2024.cnblogs.com/blog/980582/202512/980582-20251223121001485-1463459080.jpg" alt="90d3a313bebda1b8554337aa18862e91" loading="lazy"></p>
<p>&nbsp;</p>
<p><img src="https://img2024.cnblogs.com/blog/980582/202512/980582-20251223121015442-2136458470.png" alt="f27448095c8648b6a608a7eb6c3dd77e" loading="lazy"></p>
<p>&nbsp;</p>
<p>æ·»åŠ select ç´¢å¼•å­—æ®µåå¯ä»¥çœ‹å‡ºçš„ç°è±¡ï¼š</p>
<ul class="list-paddingleft-1">
<li>
<p>ä¼˜åŒ–å™¨è‡ªå·±é€‰æ‹©äº†index seek</p>
</li>
<li>
<p>bigtransactionhistoryå æ¯”æœ€é«˜çš„Key Lookupæ¶ˆå¤±äº†</p>
</li>
<li>
<p>é€»è¾‘è¯»ç”±åŸæ¥æ— ç´¢å¼•çš„14Wå˜æˆ1W</p>
</li>
<li>
<p>bigtransactionhistoryè¡¨è¿˜æç¤ºç¼ºå°‘ç´¢å¼•ï¼Ÿ</p>
</li>
</ul>
<p>é€šè¿‡ä¼˜åŒ–ç´¢å¼•æ·»åŠ select å­—æ®µï¼Œæˆ‘ä»¬çœ‹å‡ºè¯­å¥åˆä¸€æ¬¡å¾—åˆ°äº†æå‡bigtransactionhistory ä»è¡¨æ‰«æå˜æˆç´¢å¼•æŸ¥æ‰¾ï¼Œé€»è¾‘è¯»ç”±14Wå˜æˆ 1Wï¼è¿™æ˜¯ä¸€ä¸ªè´¨çš„é£è·ƒå•Šï¼</p>
<p>CREATE NONCLUSTERED INDEXTransactionDateåŒ…å«ProductID_QuantityON[dbo].[bigTransactionHistory] ([TransactionDate])------INCLUDE å°±æ˜¯åŒ…å«åˆ—INCLUDE ([ProductID],[Quantity])GO</p>
<p>é‚£ä¸ºä»€ä¹ˆè¿˜æç¤ºç¼ºå°‘ç´¢å¼•å‘¢ï¼Ÿåˆ›å»ºä¸€ä¸‹è¯•è¯•å§ï¼</p>
<p><strong>ç´¢å¼•å†ä¼˜åŒ–åŠ å…¥è¡¨å…³è”åˆ—</strong></p>
<p>æŒ‰ç…§æç¤ºæˆ‘ä»¬åˆ›å»ºç´¢å¼•ï¼šå’Œä¸Šä¸€ä¸ªç´¢å¼•çš„ä¸åŒ ProductID åˆ—ç”±åŒ…å«åˆ—å˜æˆäº†ç´¢å¼•åˆ—ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/980582/202512/980582-20251223121101411-980327210.png" alt="287b334380012753900062827964990f" loading="lazy"></p>
<p>&nbsp;</p>
<p>æˆ‘ä»¬çœ‹ä¸€ä¸‹æ•ˆæœï¼š</p>
<p>&nbsp;</p>
<p><img src="https://img2024.cnblogs.com/blog/980582/202512/980582-20251223121123047-1821728972.png" alt="88760d389647159b33b8e1ce933c2fa0" loading="lazy"></p>
<p>&nbsp;</p>
<p><img src="https://img2024.cnblogs.com/blog/980582/202512/980582-20251223121135989-2002256099.png" alt="aa14f00db9b127ff440e7e6ae7713bba" loading="lazy"></p>
<p>&nbsp;</p>
<p>å†æ¬¡ä¼˜åŒ–ç´¢å¼•ä»¥åå¯ä»¥çœ‹åˆ°ä»¥ä¸‹å‡ ä¸ªç°è±¡</p>
<ul class="list-paddingleft-1">
<li>
<p>bigtransactionhistoryè¡¨è¿˜æ˜¯ç´¢å¼•æŸ¥æ‰¾index seek</p>
</li>
<li>
<p>bigtransactionhistoryä¾ç„¶æ²¡æœ‰äº†Key Lookup</p>
</li>
<li>
<p>ä¸¤è¡¨å…³è”çš„hash join å˜æˆäº†nested loops</p>
</li>
<li>
<p>å¹¶è¡Œè®¡åˆ’å˜æˆäº†ä¸²è¡Œ</p>
</li>
<li>
<p>é€»è¾‘è¯»åˆä»1W å˜æˆ18</p>
</li>
</ul>
<p>åˆä¸€æ¬¡è´¨çš„é£è·ƒï¼è¯»ä»åŸæ¥çš„14W å˜æˆ1W åˆå˜æˆ18ï¼Œè¿™æ ·å¤§å¤§å‡å°‘äº†å†…å­˜å’ŒIOçš„æ¶ˆè€—ï¼Œå¦å¤–å¹¶è¡Œè®¡åˆ’ä¹Ÿå˜æˆäº†ä¸²è¡Œï¼Œæ— ç–‘åˆå‡å°‘äº†å¤§é‡CPUçš„æ¶ˆè€—ï¼è¯­å¥æ—¶é—´ï¼Œæˆ‘æƒ³è¿™é‡Œå°±ä¸ç”¨å¤šè¯´äº†å§ï¼Ÿ</p>
<p>é«˜èƒ½é¢„è­¦ï¼šè¿™é‡Œæ‰€è¯´çš„hash joinï¼Œå¹¶è¡Œå˜ä¸²è¡Œï¼Œä¸æ‡‚çš„æœ‹å‹å¯ä»¥åœ¨ç™¾åº¦è‡ªè¡Œå­¦ä¹ ï¼Œè¿™é‡Œåªæ˜¯é’ˆå¯¹å½“å‰è¯­å¥çš„æƒ…å†µï¼Œä¸èƒ½ä¸€æ¦‚è€Œè®ºï¼</p>
<p><strong>ç²¾ç®€ä½ çš„ç´¢å¼•</strong></p>
<p>å¤§å®¶éƒ½çŸ¥é“ï¼Œç´¢å¼•ä¼šå¯¼è‡´updateã€insertã€deleteæ“ä½œå˜æ…¢ï¼é‚£ä¹ˆå°½é‡ç²¾ç®€ä½ çš„ç´¢å¼•å°±æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„è¯é¢˜äº†ï¼</p>
<p>ä¸Šé¢çš„ä¼˜åŒ–è¿‡ç¨‹ä¸­æˆ‘ä»¬åˆ›å»ºäº†å‡ ä¸ªç´¢å¼•ï¼Œä»¥bigTransactionHistoryä¸ºä¾‹æ¥çœ‹ä¸€ä¸‹ï¼š</p>
<p><img src="https://img2024.cnblogs.com/blog/980582/202512/980582-20251223121217953-1004101723.png" alt="a10260f123cbe86d9d08f309403aa708" loading="lazy"></p>
<p>&nbsp;</p>
<p>è„šæœ¬è¿™é‡Œå°±ä¸è´´äº†ï¼Œå…¶å®æˆ‘ä»¬æœ€ååˆ›å»ºçš„ç´¢å¼• ProductID_TransactionDateåŒ…å«Quantity å·²ç»åŒ…å«äº†å‰ä¸¤ä¸ªç´¢å¼•ï¼Œè€Œä¸”å¯ä»¥è¯´æ— è®ºä»»ä½•ç±»ä¼¼è¯­å¥éƒ½ä½¿ç”¨ProductID_TransactionDateåŒ…å«Quantity å°±å¯ä»¥äº†ï¼</p>
<p>é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æ¸…é™¤å‰ä¸¤ä¸ªç´¢å¼•ï¼</p>
<p>è‡³æ­¤è¯­å¥çš„ä¼˜åŒ–ç®—æ˜¯ç»“æŸäº†ï¼Œç•™ä¸‹çš„å°±æ˜¯bigproduct ä¾ç„¶æœ‰ä¸€ä¸ªKey Lookupå¯ä»¥ä¼˜åŒ–ï¼Œå¯ä»¥ä»¿ç…§ä¸Šé¢çš„ç»§ç»­ä¼˜åŒ–ï¼Œè¿™é‡Œå°±ä¸ç»†è¯´äº†ã€‚</p>
<p>è¿™å°±æ˜¯ç´¢å¼•çš„é‡è¦æ€§ï¼</p>
<p>å¼€ç¯‡å°æµ‹è¯•ä½ åšå¯¹äº†ä¹ˆï¼Ÿå¦‚æœæ²¡åšå¯¹é‚£ä¹ˆè¿™ä¹ˆè¯·ä½ è‡ªè¡Œæ¨¡æ‹Ÿä¸€ä¸ªåœºæ™¯å†ç°æœ¬ç¯‡çš„è¯é¢˜å§ï¼</p>
<h1>æ€»ç»“</h1>
<p>æ•°æ®åº“æ•´ä½“ç¼“æ…¢å¾€å¾€éƒ½æ˜¯å› ä¸ºç´¢å¼•é—®é¢˜å¯¼è‡´çš„ï¼Œä¸è¦å°çœ‹ä¸€æ¡è¯­å¥çš„å¨åŠ›ï¼Œä¸€æ¡é«˜é¢‘çš„è¯­å¥è¶³å¯ä»¥è®©ä½ çš„æ•°æ®åº“å½»åº•æ— æ³•å·¥ä½œã€‚åœ¨å’Œå¤§é‡çš„è¿ç»´äººå‘˜äº¤æµçš„è¿‡ç¨‹ä¸­å‘ç°ï¼Œå¯¹äºç´¢å¼•çš„é‡è¦æ€§æ°æ°æ²¡æœ‰è¶³å¤Ÿçš„é‡è§†ï¼Œä¸€æåˆ°ä¼˜åŒ–å°±æ˜¯ä¿®æ”¹SQLè¯­å¥ã€è¯»å†™åˆ†ç¦»ã€åˆ†å¸ƒå¼æ•°æ®åº“ç­‰èˆè¿‘æ±‚è¿œçš„æ–¹æ¡ˆï¼Œä¼˜åŒ–ç´¢å¼•æ‰æ˜¯å¯¹æ•°æ®åº“æœ€é«˜æ€§ä»·æ¯”çš„ä¼˜åŒ–ã€‚</p>
<p>&nbsp;</p>
<p>åŒ—äº¬æ ¼ç‘è¶‹åŠ¿ç§‘æŠ€æœ‰é™å…¬å¸æ˜¯èšç„¦äºæ•°æ®æœåŠ¡çš„é«˜æ–°æŠ€æœ¯ä¼ä¸šï¼Œæˆç«‹äº2008å¹´ï¼Œåˆ›å§‹å›¢é˜ŸåŠæ ¸å¿ƒæŠ€æœ¯äººå‘˜æ¥è‡ªå¾®è½¯å’Œé›…è™ã€‚å¾®è½¯æ•°æ®å¹³å°é•¿æœŸåˆä½œä¼™ä¼´ï¼Œå«å®å¥åº·æ•°æ®å¹³å°æˆ˜ç•¥åˆä½œä¼™ä¼´ã€‚é€šè¿‡äº§å“+æœåŠ¡åŒè½®é©±åŠ¨çš„ä¸šåŠ¡æ¨¡å¼ï¼Œ14å¹´é—´ç´¯è®¡æœåŠ¡4000+å®¢æˆ·ï¼Œè¦†ç›–äº’è”ç½‘ã€å¸‚æ”¿ã€äº¤é€šã€ç”µä¿¡ã€åŒ»ç–—ã€æ•™è‚²ã€ç”µåŠ›ã€åˆ¶é€ ä¸šç­‰å„ä¸ªé¢†åŸŸã€‚</p>
<p>&nbsp;</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-23 12:14">2025-12-23 12:14</span>&nbsp;
<a href="https://www.cnblogs.com/zhuancloud">æ ¼ç‘è¶‹åŠ¿æŠ€æœ¯å›¢é˜Ÿ</a>&nbsp;
é˜…è¯»(<span id="post_view_count">0</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19386304);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19386304', targetLink: 'https://www.cnblogs.com/zhuancloud/p/19386304', title: 'è®ºç´¢å¼•çš„é‡è¦æ€§' })">ä¸¾æŠ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ åå‘ä¼ æ’­ ]]></title>
    <link>https://www.cnblogs.com/tokepson/p/19364232</link>
    <guid>9582a51fcca2e442dfadaa0af5ec5026</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/tokepson/p/19364232" title="å‘å¸ƒäº 2025-12-23 11:31">
    <span role="heading" aria-level="2">åå‘ä¼ æ’­</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<blockquote>
<p>æ‡‚äº†æ‡‚äº†ï¼Œè¿˜æ˜¯è¿™æ ·å¥½ç†è§£ã€‚ã€‚ã€‚ã€‚é‚£ä¹ˆåå‘ä¼ æ’­çš„è®¡ç®—å‘¢ï¼Ÿé€šè¿‡y1, y2, y3 æ±‚å‡ºx1 ?</p>
</blockquote>
<hr>
<p>å¤ªå¥½äº†ï¼ç°åœ¨æˆ‘ä»¬æ¥æ¨å¯¼<strong>åå‘ä¼ æ’­</strong>çš„è®¡ç®—ã€‚è¿™æ˜¯æ·±åº¦å­¦ä¹ ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼</p>
<hr>
<h2 id="1-é—®é¢˜è®¾å®š"><strong>1. é—®é¢˜è®¾å®š</strong></h2>
<p>æˆ‘ä»¬æœ‰ä¸€ä¸ªç®€å•çš„ä¸‰å±‚ç»“æ„ï¼š</p>
<pre><code>è¾“å…¥ x â†’ çº¿æ€§å±‚ï¼ˆå¾— zï¼‰â†’ softmax â†’ äº¤å‰ç†µæŸå¤± L
</code></pre>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li>$ z = Wx + b $ï¼ˆä¸ºäº†ç®€åŒ–ï¼Œæˆ‘ä»¬å…ˆåªè€ƒè™‘ä» z å¼€å§‹çš„åå‘ä¼ æ’­ï¼‰</li>
<li>$ p = \text{softmax}(z) $</li>
<li>$ L = -\sum y_i \log p_i $</li>
</ul>
<p>æˆ‘ä»¬è¦æ±‚ $ \frac{\partial L}{\partial z_j} $ï¼Œä¹Ÿå°±æ˜¯æŸå¤±å¯¹<strong>åŸå§‹è¾“å‡º z</strong> çš„æ¢¯åº¦ã€‚</p>
<hr>
<h2 id="2-å·²çŸ¥å…³ç³»"><strong>2. å·²çŸ¥å…³ç³»</strong></h2>
<p>è®¾ç±»åˆ«æ•° $ C = 3 $ï¼Œåˆ™ï¼š</p>
<p></p><div class="math display">\[p_i = \frac{e^{z_i}}{\sum_{k=1}^C e^{z_k}}
\]</div><p></p><p></p><div class="math display">\[L = -\sum_{i=1}^C y_i \log p_i
\]</div><p></p><hr>
<h2 id="3-è®¡ç®—æ¢¯åº¦-"><strong>3. è®¡ç®—æ¢¯åº¦</strong> <span class="math inline">\(\frac{\partial L}{\partial z_j}\)</span></h2>
<p>è¿™æ˜¯ä¸€ä¸ª<strong>éå¸¸é‡è¦çš„ç»“æœ</strong>ï¼Œä¹Ÿæ˜¯ softmax ä¸äº¤å‰ç†µç»“åˆçš„ç¾å¦™ä¹‹å¤„ã€‚</p>
<p><strong>æ¨å¯¼è¿‡ç¨‹</strong>ï¼š</p>
<p></p><div class="math display">\[\frac{\partial L}{\partial z_j} = \sum_{i=1}^C \frac{\partial L}{\partial p_i} \cdot \frac{\partial p_i}{\partial z_j}
\]</div><p></p><p>ç¬¬ä¸€æ­¥ï¼š<span class="math inline">\(\frac{\partial L}{\partial p_i} = -\frac{y_i}{p_i}\)</span></p>
<p>ç¬¬äºŒæ­¥ï¼šéœ€è¦è®¡ç®— <span class="math inline">\(\frac{\partial p_i}{\partial z_j}\)</span>ï¼Œåˆ†ä¸¤ç§æƒ…å†µï¼š</p>
<ul>
<li><strong>å½“ $ i = j $æ—¶</strong>ï¼š</li>
</ul>
<p></p><div class="math display">\[\frac{\partial p_i}{\partial z_i} = p_i(1 - p_i)
\]</div><p></p><ul>
<li><strong>å½“ $ i \neq j $æ—¶</strong>ï¼š</li>
</ul>
<p></p><div class="math display">\[\frac{\partial p_i}{\partial z_j} = -p_i p_j
\]</div><p></p><p>ç°åœ¨ä»£å…¥ï¼š</p>
<p></p><div class="math display">\[\frac{\partial L}{\partial z_j} = \sum_{i=1}^C \left( -\frac{y_i}{p_i} \right) \cdot \frac{\partial p_i}{\partial z_j}
\]</div><p></p><p>åˆ†å¼€æ±‚å’Œï¼š</p>
<ol>
<li>å½“ <span class="math inline">\(i = j\)</span> æ—¶ï¼šé¡¹ä¸º <span class="math inline">\(-\frac{y_j}{p_j} \cdot p_j(1-p_j) = -y_j(1-p_j)\)</span></li>
<li>å½“ <span class="math inline">\(i \neq j\)</span> æ—¶ï¼šé¡¹ä¸º <span class="math inline">\(-\frac{y_i}{p_i} \cdot (-p_i p_j) = y_i p_j\)</span></li>
</ol>
<p>æ‰€ä»¥ï¼š</p>
<p></p><div class="math display">\[\frac{\partial L}{\partial z_j} = -y_j(1-p_j) + \sum_{i \neq j} y_i p_j
\]</div><p></p><p>æ³¨æ„ <span class="math inline">\(\sum_{i \neq j} y_i = 1 - y_j\)</span>ï¼ˆå› ä¸º y æ˜¯ one-hotï¼Œæ€»å’Œä¸º1ï¼‰</p>
<p>å› æ­¤ï¼š</p>
<p></p><div class="math display">\[\frac{\partial L}{\partial z_j} = -y_j + y_j p_j + p_j(1 - y_j)
\]</div><p></p><p></p><div class="math display">\[= -y_j + p_j(y_j + 1 - y_j)
\]</div><p></p><p></p><div class="math display">\[= p_j - y_j
\]</div><p></p><hr>
<h2 id="4-æœ€ç»ˆç®€æ´ç»“æœ"><strong>4. æœ€ç»ˆç®€æ´ç»“æœ</strong></h2>
<p></p><div class="math display">\[\boxed{\frac{\partial L}{\partial z_j} = p_j - y_j}
\]</div><p></p><p><strong>å¤ªæ¼‚äº®äº†ï¼</strong> è¿™ä¸ªç»“æœæ„å‘³ç€ï¼š</p>
<ul>
<li>æ¢¯åº¦ = <strong>é¢„æµ‹æ¦‚ç‡ - çœŸå®æ ‡ç­¾</strong></li>
<li>å¯¹äºçœŸå®ç±»åˆ«ï¼ˆ<span class="math inline">\(y_j=1\)</span>ï¼‰ï¼šæ¢¯åº¦ = <span class="math inline">\(p_j - 1\)</span>ï¼ˆè´Ÿæ•°ï¼Œéœ€è¦å¢å¤§ <span class="math inline">\(z_j\)</span>ï¼‰</li>
<li>å¯¹äºå…¶ä»–ç±»åˆ«ï¼ˆ<span class="math inline">\(y_j=0\)</span>ï¼‰ï¼šæ¢¯åº¦ = <span class="math inline">\(p_j - 0 = p_j\)</span>ï¼ˆæ­£æ•°ï¼Œéœ€è¦å‡å° <span class="math inline">\(z_j\)</span>ï¼‰</li>
</ul>
<hr>
<h2 id="5-ä¾‹å­éªŒè¯"><strong>5. ä¾‹å­éªŒè¯</strong></h2>
<p>ç”¨æˆ‘ä»¬åˆšæ‰çš„ä¾‹å­ï¼š</p>
<ul>
<li>$ z = [3.0, 1.0, -1.0] $</li>
<li>$ y = [1, 0, 0] $</li>
<li>$ p = [0.88, 0.12, 0.00] $</li>
</ul>
<p>æ¢¯åº¦ï¼š</p>
<p></p><div class="math display">\[\frac{\partial L}{\partial z} = p - y = [0.88-1, 0.12-0, 0.00-0] = [-0.12, 0.12, 0.00]
\]</div><p></p><p><strong>è§£é‡Š</strong>ï¼š</p>
<ul>
<li>å¯¹çœŸå®ç±»åˆ«ï¼ˆçŒ«ï¼‰ï¼šæ¢¯åº¦ -0.12 â†’ éœ€è¦ç¨å¾®å¢å¤§ <span class="math inline">\(z_0\)</span></li>
<li>å¯¹å…¶ä»–ç±»åˆ«ï¼ˆç‹—ï¼‰ï¼šæ¢¯åº¦ +0.12 â†’ éœ€è¦å‡å° <span class="math inline">\(z_1\)</span></li>
<li>å¯¹é¸Ÿï¼šæ¢¯åº¦ 0 â†’ ä¸éœ€è¦æ”¹å˜</li>
</ul>
<hr>
<h2 id="6-æ‰©å±•åˆ°-x-çš„æ¢¯åº¦"><strong>6. æ‰©å±•åˆ° x çš„æ¢¯åº¦</strong></h2>
<p>å¦‚æœæˆ‘ä»¬æœ‰ $ z = Wx + b $ï¼Œé‚£ä¹ˆï¼š</p>
<p></p><div class="math display">\[\frac{\partial L}{\partial x} = W^T \cdot \frac{\partial L}{\partial z}
\]</div><p></p><p>å› ä¸º $ \frac{\partial z}{\partial x} = W^T $ã€‚</p>
<hr>
<h2 id="æ€»ç»“åå‘ä¼ æ’­æµç¨‹"><strong>æ€»ç»“åå‘ä¼ æ’­æµç¨‹</strong>ï¼š</h2>
<ol>
<li>å‰å‘è®¡ç®—ï¼š$ z â†’ softmax â†’ p â†’ L = -\sum y_i \log p_i $</li>
<li>åå‘ä¼ æ’­ï¼š
<ul>
<li>$ \frac{\partial L}{\partial z} = p - y $ï¼ˆæå…¶ç®€æ´ï¼ï¼‰</li>
<li>ç„¶åç»§ç»­å‘åä¼ æ’­åˆ° $ W, b, x $</li>
</ul>
</li>
</ol>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ softmax + äº¤å‰ç†µåœ¨æ·±åº¦å­¦ä¹ ä¸­è¢«å¹¿æ³›ä½¿ç”¨â€”â€”æ¢¯åº¦è®¡ç®—æ—¢ç®€æ´åˆæ•°å€¼ç¨³å®šï¼</p>
<hr>
<h2 id="ç›¸å…³å‚è€ƒ">ç›¸å…³å‚è€ƒï¼š</h2>
<ul>
<li><a href="http://neuralnetworksanddeeplearning.com/chap2.html" target="_blank" rel="noopener nofollow">How the backpropagation algorithm works</a></li>
<li><a href="https://blog.csdn.net/qq_36803941/article/details/136191848?spm=1001.2101.3001.6650.2&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7EPaidSort-2-136191848-blog-107242858.235%5Ev43%5Epc_blog_bottom_relevance_base5&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7EPaidSort-2-136191848-blog-107242858.235%5Ev43%5Epc_blog_bottom_relevance_base5&amp;utm_relevant_index=4" target="_blank" rel="noopener nofollow">æ·±åº¦å­¦ä¹ ï¼šå®Œå…¨ç†è§£åå‘ä¼ æ’­ç®—æ³•ï¼ˆä¸€ï¼‰</a></li>
</ul>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-23 11:31">2025-12-23 11:31</span>&nbsp;
<a href="https://www.cnblogs.com/tokepson">TokE648</a>&nbsp;
é˜…è¯»(<span id="post_view_count">8</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19364232);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19364232', targetLink: 'https://www.cnblogs.com/tokepson/p/19364232', title: 'åå‘ä¼ æ’­' })">ä¸¾æŠ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ä½¿ç”¨Vite+ Lit æ„å»ºwebcomponent ç»„ä»¶ ]]></title>
    <link>https://www.cnblogs.com/mykai/p/19385542</link>
    <guid>2d17e781aad3c2b42395cebd1d0ec0ba</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/mykai/p/19385542" title="å‘å¸ƒäº 2025-12-23 11:08">
    <span role="heading" aria-level="2">ä½¿ç”¨Vite+ Lit æ„å»ºwebcomponent ç»„ä»¶</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="vitelitjs-æ„å»ºweb-component">Vite+Lit.js æ„å»ºWeb Component</h2>
<p><strong>web component</strong>ä½œä¸ºå‰ä¸€ä¸ªæ—¶ä»£çš„æ–¹æ¡ˆï¼Œåœ¨ç‰¹å®šåœºæ™¯ä¸‹ç¡®æœ‰ä¸ä¸€æ ·çš„å¦™ç”¨<br>
ï¼Œåœ¨ç»´æŠ¤<strong>å‰åç«¯ä¸åˆ†ç¦»</strong>çš„é¡¹ç›®ï¼Œweb component æ˜¯ä¸ºæ•°ä¸å¤šçš„é€‰æ‹©ï¼Œæ•´ç†ä¸€ä¸‹ä½¿ç”¨Lit æ„å»ºè‡ªå·±çš„web componentç»„ä»¶åº“ä¸ºä¼ ç»Ÿé¡¹ç›®ææé€Ÿçš„è¿‡ç¨‹ã€‚</p>
<h3 id="ä½¿ç”¨vite-åˆ›å»ºé¡¹ç›®">ä½¿ç”¨vite åˆ›å»ºé¡¹ç›®</h3>
<p>Vite é‡Œå¸¦äº†Litæ¨¡æ¿ï¼Œæˆ‘ä»¬è¿™é‡Œé€‰ç”¨Lit+tsæ¨¡æ¿<br>
<code>pnpm create vite</code></p>
<h5 id="ç›®å½•ç»“æ„">ç›®å½•ç»“æ„</h5>
<ul>
<li>src
<ul>
<li>hello
<ul>
<li>index.ts // å…·ä½“ç»„ä»¶</li>
</ul>
</li>
<li>index.ts // ç»„ä»¶æ”¶é›†</li>
</ul>
</li>
<li>vite.config.ts æ‰“åŒ…é…ç½®ï¼</li>
<li>index.ts // ç»„ä»¶æ³¨å…¥!</li>
</ul>
<blockquote>
<p>é€‚ç”¨äºæ„å»ºåŸºç¡€ç»„ä»¶åº“ï¼Œä¸é€‚ç”¨å¤ªå¤æ‚çš„é€»è¾‘ï¼Œåˆ©ç”¨web-components è‡ªå¸¦çš„æ ·å¼éš”ç¦»ç­‰ï¼Œå¯ä»¥å¾ˆå¥½çš„é¿å…è¢«ä¸Šä¸‹æ–‡å¹²æ‰°ã€‚</p>
</blockquote>
<h3 id="æ„å»ºæ‰“åŒ…é¡¹ç›®">æ„å»ºæ‰“åŒ…é¡¹ç›®</h3>
<h5 id="ç¼–å†™å…¥å£æ–‡ä»¶æ³¨å…¥ç»„ä»¶">ç¼–å†™å…¥å£æ–‡ä»¶ï¼Œæ³¨å…¥ç»„ä»¶</h5>
<pre><code>import * as allComponents from './src/main.ts'

const components = allComponents
const toKebabCase = (str: string): string =&gt; {
  return str
    .replace(/([a-z0-9])([A-Z])/g, '$1-$2')
    .replace(/([A-Z])([A-Z])(?=[a-z])/g, '$1-$2')
    .toLowerCase()
}
if (typeof window !== 'undefined') {
  (window as any).WebComponents = components
  
  Object.entries(components).forEach(([name, component]) =&gt; {
    const elementName = toKebabCase(name)
    const fullElementName = 'xk-' + elementName // è¿™é‡Œå®šä¹‰äº†å…¨å±€ç»„ä»¶åå¼€å¤´

    if (!customElements.get(fullElementName)) {
      customElements.define(fullElementName, component)
    } 
  })
}
</code></pre>
<blockquote>
<p>é™¤äº†ç»„ä»¶ï¼Œä¹Ÿå¯ä»¥åœ¨è¿™é‡Œæ³¨å…¥å…¨å±€æ–¹æ³•ç­‰</p>
</blockquote>
<h5 id="æ„å»ºæ‰“åŒ…è„šæœ¬">æ„å»ºæ‰“åŒ…è„šæœ¬</h5>
<p>ä½¿ç”¨vite æ¥æ„å»ºå¾ˆç®€å•ã€‚</p>
<pre><code class="language-ts">import { defineConfig } from 'vite'
import { resolve } from 'path'
import { fileURLToPath, URL } from 'node:url'

export default defineConfig({
  build: {
    lib: {
      entry: resolve(fileURLToPath(new URL('.', import.meta.url)), 'index.ts'),
      name: 'WebComponents',
      fileName: (format) =&gt; `lit-web-components.${format === 'es' ? 'js' : 'umd.js'}`,
      formats: ['es', 'umd']
    },
    outDir:"../dist/js", // æ‰“åŒ…è¾“å‡ºç›®å½•
    rollupOptions: {
      output: {
        extend: true,
        assetFileNames: 'lit-web-components.[ext]',
        manualChunks: undefined,
        compact: true, // ç´§å‡‘è¾“å‡º
      },
      treeshake: {
        moduleSideEffects: false,
        propertyReadSideEffects: false,
        tryCatchDeoptimization: false
      },
    },
    sourcemap: false, // ç§»é™¤ source map
    minify: 'terser',
    target: 'es2022',
    terserOptions: {
      compress: {
        drop_console: true, // ç§»é™¤æ‰€æœ‰ console
        drop_debugger: true, // ç§»é™¤ debugger
        pure_funcs: ['console.log', 'console.info', 'console.debug', 'console.warn'], // ç§»é™¤æŒ‡å®šçš„çº¯å‡½æ•°
        unused: true, // ç§»é™¤æœªä½¿ç”¨çš„ä»£ç 
        dead_code: true, // ç§»é™¤æ­»ä»£ç 
        conditionals: true, // ä¼˜åŒ–æ¡ä»¶è¯­å¥
        evaluate: true, // è®¡ç®—å¸¸é‡è¡¨è¾¾å¼
        booleans: true, // ä¼˜åŒ–å¸ƒå°”å€¼
        sequences: true, // è¿æ¥è¿ç»­è¯­å¥
        switches: true, // ç§»é™¤é‡å¤çš„ switch åˆ†æ”¯
        reduce_vars: true, // å‡å°‘å˜é‡å¼•ç”¨
        collapse_vars: true, // å†…è”å˜é‡
        passes: 3 // å¤šæ¬¡å‹ç¼©ä»¥è·å¾—æ›´å¥½çš„æ•ˆæœ
      },
      mangle: {
        toplevel: true, // æ··æ·†é¡¶çº§ä½œç”¨åŸŸ
        reserved: ['lit', 'LitElement', 'html', 'css', 'customElements'] // ä¿ç•™é‡è¦çš„åº“åç§°
      },
      format: {
        comments: false // ç§»é™¤æ‰€æœ‰æ³¨é‡Š
      }
    }
  },
  resolve: {
    alias: {
      '@': resolve(fileURLToPath(new URL('.', import.meta.url)), 'src')
    }
  }
}) 
</code></pre>
<h3 id="ç¼–å†™ä¸€ä¸ªç®€å•çš„ç»„ä»¶">ç¼–å†™ä¸€ä¸ªç®€å•çš„ç»„ä»¶</h3>
<blockquote>
<p>src/hello/index.ts</p>
</blockquote>
<pre><code class="language-ts">import { LitElement,html,css } from "lit";
import { property } from "lit/decorators.js";

export class Hello extends LitElement{
    @property({type:String})
    text='Hello,Web Component'

    @property({type:String})
    color='#222'
    static style=css`
    :host{

    }
    `
    render(){
        return html`
            &lt;span style="color:${this.color};"&gt;${this.text}&lt;/span&gt;
        `
    }
}
</code></pre>
<h5 id="åœ¨maints-é‡Œå¯¼å…¥">åœ¨main.ts é‡Œå¯¼å…¥</h5>
<pre><code class="language-ts">export {Hello} from "./hello/index"
</code></pre>
<h4 id="æ‰“åŒ…è¾“å‡ºç»“æœ">æ‰“åŒ…è¾“å‡ºç»“æœ</h4>
<p>lit-web-components.umd.js  16.92 kB â”‚ gzip: 6.44 kB<br>
æ³¨æ„ï¼šè¿™é‡ŒåŒ…å«äº†lit æœ¬èº«è¿™ä¸ªåº“ï¼Œ</p>
<h3 id="ä½¿ç”¨">ä½¿ç”¨</h3>
<blockquote>
<p>æ‰“åŒ…æ„å»ºå¸¦å…¥litæœ¬èº«çš„åº“ï¼ˆ<strong>å»ºè®®</strong>ï¼‰ ï¼Œä½¿ç”¨å°±å¾ˆç®€å•äº†</p>
</blockquote>
<pre><code> å¼•å…¥
&lt;script src="./js/lit-web-components.umd.js"&gt;&lt;/script&gt;    
ä½¿ç”¨
&lt;xk-hello color="red"&gt; &lt;/xk-hello&gt; &lt;/br&gt;
&lt;xk-hello text="hello world"&gt; &lt;/xk-hello&gt;

</code></pre>
<h4 id="è¾“å‡ºæ•ˆæœå’Œdom">è¾“å‡ºæ•ˆæœå’ŒDom</h4>
<p><img src="https://img2024.cnblogs.com/blog/2152650/202512/2152650-20251223104127644-462548091.png" alt="image" loading="lazy"></p>
<h3 id="å®é™…åº”ç”¨å’Œæ€è€ƒ">å®é™…åº”ç”¨å’Œæ€è€ƒ</h3>
<p>web component å¯ä»¥ä¸ºä¼ ç»Ÿçš„è€é¡¹ç›®æ³¨å…¥ç°ä»£åŒ–å¼€å‘èƒ½åŠ›ï¼ŒLit åˆ™å¤§å¤§å‡è½»äº†è¿™ä¸ªè¿‡ç¨‹ï¼Œç»è¿‡æˆ‘åœ¨é¡¹ç›®ä¸­çš„æ·±å…¥ä½¿ç”¨ï¼Œæ˜æ˜¾å¸¦æ¥çš„å¥½å¤„</p>
<ul>
<li><strong>æ ·å¼éš”ç¦»</strong>ï¼š è‡ªå¸¦çš„æ ·å¼éš”ç¦»å’Œè¡Œä¸ºï¼Œä¸ä¼šè¢«ä¹‹å‰çš„å…¬å…±cssç­‰å½±å“ã€‚å‡å°‘äº†<strong>å¿ƒæ™ºè´Ÿæ‹…</strong>ã€‚</li>
<li><strong>å¤ç”¨</strong>ï¼šæ²‰æ·€äº†ä¸€å¤§æ‰¹ç»„ä»¶ï¼Œå¿«é€Ÿæ„å»ºé¡µé¢ï¼Œç»Ÿä¸€äº†æ•´ç«™çš„äº¤äº’æ€§å’Œui ä¸€è‡´æ€§ã€‚</li>
<li><strong>è·¨æ¡†æ¶</strong>: åç»­å‡çº§æ¡†æ¶æ—¶ï¼Œä¹‹å‰çš„ç»„ä»¶ä¾ç„¶èƒ½ç”¨ã€‚å‡å°‘äº†å‡çº§æˆæœ¬ï¼Œè¿˜èƒ½ä¿æŒåŸæ¥çš„uiç»†èŠ‚ã€‚</li>
</ul>
<h3 id="ç¼ºç‚¹">ç¼ºç‚¹</h3>
<ul>
<li>é¢å¤–çš„å­¦ä¹ æˆæœ¬ï¼šå¯ä»¥ä½¿ç”¨ai æ¥å¼€å‘ç»´æŠ¤</li>
<li>SEOå½±å“ å¯¹äºç»„ä»¶å†…éƒ¨çš„ä¸€äº›éšè—å±æ€§ï¼Œå¯èƒ½ä¼šå½±å“SEOï¼šå»ºè®®å¢åŠ æè¿°ï¼Œå…³é”®å†…å®¹é€šè¿‡Slotå¯ä»¥æ¶ˆé™¤</li>
</ul>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>å¦‚æœæ— æ³•å¯¹å¤§å‹é¡¹ç›®é‡æ„ï¼Œå¤§å‹é¡¹ç›®å¼€å‘èµ·æ¥åˆå¾ˆç—›è‹¦ï¼Œå°è¯•webcomponent æ–¹æ¡ˆå§ã€‚å‡çº§å¹³æ»‘ï¼Œç»„ä»¶å¤ç”¨ï¼Œè¿˜æœ‰æ ·å¼éš”ç¦»ï¼Œæ’æ§½ç­‰ç°ä»£åŒ–æ¦‚å¿µã€‚</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-23 11:08">2025-12-23 11:08</span>&nbsp;
<a href="https://www.cnblogs.com/mykai">MyKai</a>&nbsp;
é˜…è¯»(<span id="post_view_count">23</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19385542);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19385542', targetLink: 'https://www.cnblogs.com/mykai/p/19385542', title: 'ä½¿ç”¨Vite+ Lit æ„å»ºwebcomponent ç»„ä»¶' })">ä¸¾æŠ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ vite7+deepseekæµå¼aiæ¨¡æ¿|vue3.5+deepseek3.2+markdownæ‰“å­—è¾“å‡ºaiåŠ©æ‰‹ ]]></title>
    <link>https://www.cnblogs.com/xiaoyan2017/p/19385909</link>
    <guid>bae9aa4667b7b08dfd6fd88728d55b79</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiaoyan2017/p/19385909" title="å‘å¸ƒäº 2025-12-23 11:06">
    <span role="heading" aria-level="2">vite7+deepseekæµå¼aiæ¨¡æ¿|vue3.5+deepseek3.2+markdownæ‰“å­—è¾“å‡ºaiåŠ©æ‰‹</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p><span style="font-size: 18px; font-family: å®‹ä½“, &quot;Songti SC&quot;; color: rgba(149, 20, 234, 1)">2026æœ€æ–°æ¬¾çˆ†è‚<span style="background-color: rgba(251, 217, 250, 1)">vite7.2+deepseek-v3.2+vant4+markdown</span>æµå¼æ‰“å­—è¾“å‡ºAIå¯¹è¯æ¨¡æ¿ã€‚</span></p>
<p><span style="font-size: 12px"><strong>vue3-mobile-deepseek</strong>ï¼šåŸºäº<span style="background-color: rgba(204, 255, 204, 1)">vue3.5+vite7.2+vant4+markdown+openai</span>æ·±åº¦é›†æˆ<strong>deepseek-v3.2</strong>èŠå¤©å¤§æ¨¡å‹ã€‚æ”¯æŒ<span style="background-color: rgba(255, 255, 153, 1)"><strong>æµ…è‰²+æ·±è‰²ä¸»é¢˜ã€streamæµå¼è¾“å‡ºã€ä»£ç é«˜äº®ã€å¤åˆ¶ä»£ç ã€katexå…¬å¼ã€mermaidå›¾è¡¨</strong></span>ç­‰åŠŸèƒ½ã€‚</span></p>
<p><img alt="æœªæ ‡é¢˜-2" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202512/1289798-20251223095028752-606844753.png" class="lazyload"></p>
<p><img alt="p2_2" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202512/1289798-20251223095502103-480557904.gif" class="lazyload"></p>
<h3>æŠ€æœ¯æ ˆ</h3>
<ul>
<li><span style="font-size: 12px">ç¼–è¾‘å™¨ï¼švscode</span></li>
<li><span style="font-size: 12px">æŠ€æœ¯æ¡†æ¶ï¼švite^7.2.4+vue^3.5.24+vue-router^4.6.4</span></li>
<li><span style="font-size: 12px">å¤§æ¨¡å‹æ¡†æ¶ï¼šdeepseek-v3.2 + openai</span></li>
<li><span style="font-size: 12px">UIç»„ä»¶åº“ï¼švant^4.9.21 (æœ‰èµvue3ç§»åŠ¨ç«¯ç»„ä»¶åº“)</span></li>
<li><span style="font-size: 12px">çŠ¶æ€ç®¡ç†ï¼špinia^3.0.4</span></li>
<li><span style="font-size: 12px">é«˜äº®æ’ä»¶ï¼šhighlight.js^11.11.1</span></li>
<li><span style="font-size: 12px">markdownè§£æï¼šmarkdown-it</span></li>
<li><span style="font-size: 12px">katexå…¬å¼ï¼š@mdit/plugin-katex^0.24.1</span></li>
<li><span style="font-size: 12px">æœ¬åœ°ç¼“å­˜ï¼špinia-plugin-persistedstate^4.7.1</span></li>
</ul>
<p><img alt="p3" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202512/1289798-20251223095301964-489954613.gif" class="lazyload"></p>
<p><img alt="p5" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202512/1289798-20251223100008878-2134758406.gif" class="lazyload"></p>
<h3>åŠŸèƒ½æ€§</h3>
<ol>
<li><span style="font-size: 12px">Vue3.5+DeepSeek-V3.2æµå¼æ‰“å­—è¾“å‡ºæ•ˆæœ</span></li>
<li><span style="font-size: 12px">åŸºäºVite7.2æ„å»ºï¼Œé›†æˆDeepSeek-Chatæ¨¡å‹ï¼Œæ€§èƒ½æ›´ä¼˜ï¼Œå¯¹è¯ä¸æ»‘æµç•…</span></li>
<li><span style="font-size: 12px">æ”¯æŒå„ç§ä»£ç é«˜äº®ï¼ˆ<strong>å¤åˆ¶ä»£ç +æ”¶ç¼©åŠŸèƒ½</strong>ï¼‰ï¼Œæ–¹ä¾¿å±•ç¤ºå’Œåˆ†äº«ä»£ç ç‰‡æ®µ</span></li>
<li><span style="font-size: 12px">æ”¯æŒè¾“å‡º<strong>Katexæ•°å­¦å…¬å¼ã€Mermaidå›¾è¡¨</strong></span></li>
<li><span style="font-size: 12px">ä½¿ç”¨vant4ç»„ä»¶åº“ï¼Œé£æ ¼ç»Ÿä¸€ï¼Œæ—¶å°šå¤§æ°”</span></li>
<li><span style="font-size: 12px">æ”¯æŒ<strong>ç§»åŠ¨ç«¯+PCç«¯750pxåƒç´ </strong>é€‚é…</span></li>
</ol>
<p><img alt="æœªæ ‡é¢˜-4" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202512/1289798-20251223100653751-1334957329.png" class="lazyload"></p>
<blockquote>
<h3><em>ç›®å‰vue3-deepseekæµå¼aiå¯¹è¯é¡¹ç›®å·²ç»æ›´æ–°åˆ°æˆ‘çš„åŸåˆ›ä½œå“é›†ï¼Œæ¬¢è¿ä¸‹è½½ä½¿ç”¨ã€‚</em></h3>
<p><span style="font-size: 12px"><a href="https://mall.bilibili.com/neul-next/detailuniversal/detail.html?isMerchant=1&amp;page=detailuniversal_detail&amp;saleType=10&amp;itemsId=11721604&amp;loadingShow=1&amp;noTitleBar=1&amp;msource=merchant_share" target="_blank" rel="noopener nofollow">Vue3+DeepSeek+Vant4æ™ºèƒ½èŠå¤©AIæµå¼å¯¹è¯æ¨¡æ¿</a></span></p>
</blockquote>
<h3>é¡¹ç›®æ¡†æ¶ç»“æ„</h3>
<p><span style="font-size: 12px">æ•´ä¸ªé¡¹ç›®ä½¿ç”¨æœ€æ–°<strong>vite7.2</strong>æ­å»ºé¡¹ç›®æ¨¡æ¿ï¼Œéµå¾ª<span style="background-color: rgba(204, 255, 204, 1)">vue3 setup</span>è¯­æ³•ç¼–ç ã€‚</span></p>
<p><img alt="360æˆªå›¾20251222233502584" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202512/1289798-20251223101243748-1689844727.png" class="lazyload"></p>
<h3>vue3ç¯å¢ƒå˜é‡.envé…ç½®</h3>
<p><span style="font-size: 12px">ç”³è¯·ä¸€ä¸ªdeepseek apikeyï¼Œæ›¿æ¢æ‰é¡¹ç›®æ ¹ç›®å½•ä¸‹<strong>.env</strong>æ–‡ä»¶é‡Œçš„keyå³å¯ç•…å¿«ä½“éªŒdeepseek-v3.2æµå¼è¾“å‡ºåŠŸèƒ½ã€‚</span></p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202512/1289798-20251223101608080-727506622.png" class="lazyload"></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 0, 1)"># title
VITE_APP_TITLE </span>= 'Vue3-DeepSeek-Chat'<span style="color: rgba(0, 0, 0, 1)">

# port é»˜è®¤http:</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">localhost:5173/</span>
VITE_PORT = 3001<span style="color: rgba(0, 0, 0, 1)">

# è¿è¡Œæ—¶è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
VITE_OPEN </span>= <span style="color: rgba(0, 0, 255, 1)">true</span><span style="color: rgba(0, 0, 0, 1)">

# å¼€å¯https
VITE_HTTPS </span>= <span style="color: rgba(0, 0, 255, 1)">false</span><span style="color: rgba(0, 0, 0, 1)">

# æ˜¯å¦åˆ é™¤ç”Ÿäº§ç¯å¢ƒ console
VITE_DROP_CONSOLE </span>= <span style="color: rgba(0, 0, 255, 1)">true</span><span style="color: rgba(0, 0, 0, 1)">

# DeepSeek APIé…ç½®
VITE_DEEPSEEK_API_KEY </span>=<span style="color: rgba(0, 0, 0, 1)"> æ›¿æ¢ä¸ºä½ çš„ API Key
VITE_DEEPSEEK_BASE_URL </span>= https:<span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">api.deepseek.com</span></pre>
</div>
<h3>é¡¹ç›®å…¥å£main.js</h3>
<div class="cnblogs_code">
<pre>import { createApp } from 'vue'<span style="color: rgba(0, 0, 0, 1)">
import </span>'./style.scss'<span style="color: rgba(0, 0, 0, 1)">
import App from </span>'./App.vue'

<span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> å¼•å…¥è·¯ç”±/çŠ¶æ€ç®¡ç†</span>
import Router from './router'<span style="color: rgba(0, 0, 0, 1)">
import Pinia from </span>'./pinia'<span style="color: rgba(0, 0, 0, 1)">

import Plugins from </span>'./plugins'<span style="color: rgba(0, 0, 0, 1)">

const app </span>=<span style="color: rgba(0, 0, 0, 1)"> createApp(App)

app
.use(Router)
.use(Pinia)
.use(Plugins)
.mount(</span>'#app')</pre>
</div>
<p><img alt="æœªæ ‡é¢˜-3" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202512/1289798-20251223101727948-845129722.png" class="lazyload"></p>
<p><img alt="015360æˆªå›¾20251222210330994" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202512/1289798-20251223102137659-2062357504.png" class="lazyload"></p>
<h3>é¡¹ç›®å¸ƒå±€ç»“æ„</h3>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202512/1289798-20251223102355099-271621583.png" class="lazyload"></p>
<p><span style="font-size: 12px">æ•´ä½“é¡¹ç›®ç»“æ„åˆ†ä¸º<strong>é¡¶éƒ¨å¯¼èˆªæ +èŠå¤©ä¼šè¯åŒº+åº•éƒ¨ç¼–è¾‘æ </strong>ä¸‰ä¸ªæ¨¡å—ã€‚</span></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">template</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
  <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">div </span><span style="color: rgba(255, 0, 0, 1)">class</span><span style="color: rgba(0, 0, 255, 1)">="flexbox flex-col"</span><span style="color: rgba(255, 0, 0, 1)"> style</span><span style="color: rgba(0, 0, 255, 1)">="height:100%;"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Toolbar </span><span style="color: rgba(255, 0, 0, 1)">:title</span><span style="color: rgba(0, 0, 255, 1)">="chatSession?.title"</span> <span style="color: rgba(0, 0, 255, 1)">/&gt;</span>

    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">div </span><span style="color: rgba(255, 0, 0, 1)">class</span><span style="color: rgba(0, 0, 255, 1)">="v3ai__scrollview flex1"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
      <span style="color: rgba(0, 128, 0, 1)">&lt;!--</span><span style="color: rgba(0, 128, 0, 1)"> Chatå¯¹è¯ </span><span style="color: rgba(0, 128, 0, 1)">--&gt;</span>
      <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">div </span><span style="color: rgba(255, 0, 0, 1)">v-if</span><span style="color: rgba(0, 0, 255, 1)">="chatSession &amp;&amp; !isEmpty(chatSession.data)"</span><span style="color: rgba(255, 0, 0, 1)"> class</span><span style="color: rgba(0, 0, 255, 1)">="v3ai__chatbot"</span><span style="color: rgba(255, 0, 0, 1)"> ref</span><span style="color: rgba(0, 0, 255, 1)">="scrollRef"</span><span style="color: rgba(255, 0, 0, 1)"> @scroll</span><span style="color: rgba(0, 0, 255, 1)">="onScroll"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">div </span><span style="color: rgba(255, 0, 0, 1)">class</span><span style="color: rgba(0, 0, 255, 1)">="v3ai__chatbot-sessions"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span><span style="color: rgba(0, 0, 0, 1)">
          ...
        </span><span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">div</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 128, 0, 1)">&lt;!--</span><span style="color: rgba(0, 128, 0, 1)"> æ»šåŠ¨åº•éƒ¨ </span><span style="color: rgba(0, 128, 0, 1)">--&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">div </span><span style="color: rgba(255, 0, 0, 1)">class</span><span style="color: rgba(0, 0, 255, 1)">="v3ai__scrollbottom"</span><span style="color: rgba(255, 0, 0, 1)"> :class</span><span style="color: rgba(0, 0, 255, 1)">="{'is-bottom': reachBottom}"</span><span style="color: rgba(255, 0, 0, 1)"> @click</span><span style="color: rgba(0, 0, 255, 1)">="scrollToBottom"</span><span style="color: rgba(0, 0, 255, 1)">&gt;&lt;</span><span style="color: rgba(128, 0, 0, 1)">i </span><span style="color: rgba(255, 0, 0, 1)">class</span><span style="color: rgba(0, 0, 255, 1)">="iconfont ai-arrD"</span><span style="color: rgba(0, 0, 255, 1)">&gt;&lt;/</span><span style="color: rgba(128, 0, 0, 1)">i</span><span style="color: rgba(0, 0, 255, 1)">&gt;&lt;/</span><span style="color: rgba(128, 0, 0, 1)">div</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
      <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">div</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
      <span style="color: rgba(0, 128, 0, 1)">&lt;!--</span><span style="color: rgba(0, 128, 0, 1)"> å¯¼è¯­ </span><span style="color: rgba(0, 128, 0, 1)">--&gt;</span>
      <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">div </span><span style="color: rgba(255, 0, 0, 1)">v-else class</span><span style="color: rgba(0, 0, 255, 1)">="v3ai__chatbot-intro"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">i </span><span style="color: rgba(255, 0, 0, 1)">class</span><span style="color: rgba(0, 0, 255, 1)">="logo iconfont ai-deepseek"</span><span style="color: rgba(0, 0, 255, 1)">&gt;&lt;/</span><span style="color: rgba(128, 0, 0, 1)">i</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">h3 </span><span style="color: rgba(255, 0, 0, 1)">class</span><span style="color: rgba(0, 0, 255, 1)">="name"</span><span style="color: rgba(0, 0, 255, 1)">&gt;&lt;</span><span style="color: rgba(128, 0, 0, 1)">span </span><span style="color: rgba(255, 0, 0, 1)">class</span><span style="color: rgba(0, 0, 255, 1)">="txt text-gradient"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>å—¨~ Vue3-DeepSeek<span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">span</span><span style="color: rgba(0, 0, 255, 1)">&gt;&lt;/</span><span style="color: rgba(128, 0, 0, 1)">h3</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">p </span><span style="color: rgba(255, 0, 0, 1)">class</span><span style="color: rgba(0, 0, 255, 1)">="desc"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>ä½ èº«è¾¹çš„æ™ºèƒ½å°å¸®æ‰‹ï¼Œæˆ‘å¯ä»¥å¸®ä½ æœç´¢ã€ç­”ç–‘ã€å†™ä½œï¼Œè¯·æŠŠä½ çš„ä»»åŠ¡äº¤ç»™æˆ‘å§~<span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">p</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">div </span><span style="color: rgba(255, 0, 0, 1)">class</span><span style="color: rgba(0, 0, 255, 1)">="prompt"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
          <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">p </span><span style="color: rgba(255, 0, 0, 1)">class</span><span style="color: rgba(0, 0, 255, 1)">="tip"</span><span style="color: rgba(0, 0, 255, 1)">&gt;&lt;</span><span style="color: rgba(128, 0, 0, 1)">span</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>ä½ å¯ä»¥è¿™æ ·é—®<span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">span</span><span style="color: rgba(0, 0, 255, 1)">&gt;&lt;</span><span style="color: rgba(128, 0, 0, 1)">span</span><span style="color: rgba(255, 0, 0, 1)"> @click</span><span style="color: rgba(0, 0, 255, 1)">="refreshPrompt"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>æ¢ä¸€æ¢<span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">i </span><span style="color: rgba(255, 0, 0, 1)">class</span><span style="color: rgba(0, 0, 255, 1)">="iconfont ai-shuaxin"</span><span style="color: rgba(0, 0, 255, 1)">&gt;&lt;/</span><span style="color: rgba(128, 0, 0, 1)">i</span><span style="color: rgba(0, 0, 255, 1)">&gt;&lt;/</span><span style="color: rgba(128, 0, 0, 1)">span</span><span style="color: rgba(0, 0, 255, 1)">&gt;&lt;/</span><span style="color: rgba(128, 0, 0, 1)">p</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
          <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">ul </span><span style="color: rgba(255, 0, 0, 1)">class</span><span style="color: rgba(0, 0, 255, 1)">="list"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
            <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">li </span><span style="color: rgba(255, 0, 0, 1)">v-for</span><span style="color: rgba(0, 0, 255, 1)">="(item,index) in promptList"</span><span style="color: rgba(255, 0, 0, 1)"> :key</span><span style="color: rgba(0, 0, 255, 1)">="index"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
              <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">div </span><span style="color: rgba(255, 0, 0, 1)">class</span><span style="color: rgba(0, 0, 255, 1)">="txt"</span><span style="color: rgba(255, 0, 0, 1)"> @click</span><span style="color: rgba(0, 0, 255, 1)">="changePrompt(item.prompt)"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>{{item.emoji}} {{item.prompt}}<span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">div</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
            <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">li</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
          <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">ul</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">div</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
      <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">div</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">div</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>

    <span style="color: rgba(0, 128, 0, 1)">&lt;!--</span><span style="color: rgba(0, 128, 0, 1)"> ç¼–è¾‘å™¨ </span><span style="color: rgba(0, 128, 0, 1)">--&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">ChatEditor </span><span style="color: rgba(255, 0, 0, 1)">ref</span><span style="color: rgba(0, 0, 255, 1)">="editorRef"</span><span style="color: rgba(255, 0, 0, 1)"> :value</span><span style="color: rgba(0, 0, 255, 1)">="promptValue"</span><span style="color: rgba(255, 0, 0, 1)"> :reachBottom</span><span style="color: rgba(0, 0, 255, 1)">="reachBottom"</span><span style="color: rgba(255, 0, 0, 1)"> :scrollBottom</span><span style="color: rgba(0, 0, 255, 1)">="scrollToBottom"</span> <span style="color: rgba(0, 0, 255, 1)">/&gt;</span>
  <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">div</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
<span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">template</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span></pre>
</div>
<p><img alt="p4" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202512/1289798-20251223102648231-1480552356.gif" class="lazyload"></p>
<h3>è‡ªå®šä¹‰katexå…¬å¼+mermaidå›¾è¡¨</h3>
<p><span style="font-size: 12px">åœ¨é¡µé¢å¼•å…¥katexå’Œmermaidæ’ä»¶ã€‚</span></p>
<div class="cnblogs_code">
<pre>import { imgSize } from '@mdit/plugin-img-size' <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æ”¯æŒå¸¦å°ºå¯¸å›¾ç‰‡</span>
import { katex } from "@mdit/plugin-katex"; <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æ”¯æŒæ•°å­¦å…¬å¼</span>
import 'katex/dist/katex.min.css'
<span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æ¸²æŸ“mermaidå›¾è¡¨</span>
import { markdownItMermaidPlugin } from '@/components/markdown/plugins/mermaidPlugin'</pre>
</div>
<p>æ¸²æŸ“markdownæµå¼</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Markdown
  </span><span style="color: rgba(255, 0, 0, 1)">:source</span><span style="color: rgba(0, 0, 255, 1)">="item.content"</span><span style="color: rgba(255, 0, 0, 1)">
  :html</span><span style="color: rgba(0, 0, 255, 1)">="true"</span><span style="color: rgba(255, 0, 0, 1)">
  :linkify</span><span style="color: rgba(0, 0, 255, 1)">="true"</span><span style="color: rgba(255, 0, 0, 1)">
  :typographer</span><span style="color: rgba(0, 0, 255, 1)">="true"</span><span style="color: rgba(255, 0, 0, 1)">
  :plugins</span><span style="color: rgba(0, 0, 255, 1)">="[
    imgSize,
    [katex, {delimiters: 'all'}],
    [markdownItMermaidPlugin, { ... }]
  ]"</span><span style="color: rgba(255, 0, 0, 1)">
  @copy</span><span style="color: rgba(0, 0, 255, 1)">="onCopy"</span>
<span style="color: rgba(0, 0, 255, 1)">/&gt;</span></pre>
</div>
<p>å°è£…ä¸€ä¸ªmermaidå›¾è¡¨è§£ææ’ä»¶</p>
<div class="cnblogs_code">
<pre>export const markdownItMermaidPlugin = (md, options) =&gt;<span style="color: rgba(0, 0, 0, 1)"> {
  const defaultFence </span>=<span style="color: rgba(0, 0, 0, 1)"> md.renderer.rules.fence
  md.renderer.rules.fence </span>= (...args) =&gt;<span style="color: rgba(0, 0, 0, 1)"> {
    const [tokens, idx] </span>=<span style="color: rgba(0, 0, 0, 1)"> args
    const token </span>=<span style="color: rgba(0, 0, 0, 1)"> tokens[idx]
    const lang </span>= token.info.replace(/\[.*\]/, '').trim() || ''

    <span style="color: rgba(0, 0, 255, 1)">if</span>(lang === 'mermaid'<span style="color: rgba(0, 0, 0, 1)">) {
      const code </span>=<span style="color: rgba(0, 0, 0, 1)"> token.content.trim()
      const hash </span>=<span style="color: rgba(0, 0, 0, 1)"> generateHash(code)
      const uuid </span>= `${hash}-${Date.now()}-${Math.random().toString(36).substring(2, 9<span style="color: rgba(0, 0, 0, 1)">)}`

      </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> å¦‚æœæœ‰ç¼“å­˜ï¼ŒåŠ è½½ç¼“å­˜å›¾è¡¨</span>
      <span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)">(renderCache.has(hash)) {
        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> console.log('åŠ è½½ç¼“å­˜mermaidå›¾è¡¨')</span>
        <span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> `
          ${ defaultFence(...args) }
          </span>&lt;div class="mermaid-container"&gt;${renderCache.get(hash)}&lt;/div&gt;
<span style="color: rgba(0, 0, 0, 1)">        `
      }
</span>
<span style="color: rgba(0, 0, 0, 1)">      nextTickRender(uuid)

      </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> `
        ${ defaultFence(...args) }
        </span>&lt;div class="mermaid-container" id="${uuid}" data-mermaid-hash="${hash}" data-mermaid-code="${encodeURIComponent(code)}"&gt;
          &lt;div class="mermaid-loading"&gt;ğŸ“ŠMermaid å›¾è¡¨åŠ è½½ä¸­...&lt;/div&gt;
        &lt;/div&gt;
<span style="color: rgba(0, 0, 0, 1)">      `
    }

    </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> defaultFence(...args)
  }

  </span><span style="color: rgba(0, 0, 255, 1)">function</span><span style="color: rgba(0, 0, 0, 1)"> nextTickRender(containerId) {
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> å¦‚æœå®¹å™¨å­˜åœ¨ï¼Œç›´æ¥æ¸²æŸ“</span>
    <span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)">(document.getElementById(containerId)) {
      renderMermaidDiagram(containerId)
      </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)">
    }
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ä½¿ç”¨MutationObserverç›‘å¬DOMæ›´æ–°</span>
    const observer = <span style="color: rgba(0, 0, 255, 1)">new</span> MutationObserver((mutations, ob) =&gt;<span style="color: rgba(0, 0, 0, 1)"> {
      const container </span>=<span style="color: rgba(0, 0, 0, 1)"> document.getElementById(containerId)
      </span><span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)">(container) {
        ob.disconnect()
        renderMermaidDiagram(containerId)
      }
    })
    observer.observe(document.body, {
      childList: </span><span style="color: rgba(0, 0, 255, 1)">true</span><span style="color: rgba(0, 0, 0, 1)">,
      subtree: </span><span style="color: rgba(0, 0, 255, 1)">true</span><span style="color: rgba(0, 0, 0, 1)">
    })
  }
  
  async </span><span style="color: rgba(0, 0, 255, 1)">function</span><span style="color: rgba(0, 0, 0, 1)"> renderMermaidDiagram(containerId) {
    const container </span>=<span style="color: rgba(0, 0, 0, 1)"> document.getElementById(containerId)
    </span><span style="color: rgba(0, 0, 255, 1)">if</span> (!<span style="color: rgba(0, 0, 0, 1)">container) {
      console.warn(`Mermaid container #${containerId} not found`)
      </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)">
    }
  
    const code </span>=<span style="color: rgba(0, 0, 0, 1)"> decodeURIComponent(container.dataset.mermaidCode)
    const hash </span>=<span style="color: rgba(0, 0, 0, 1)"> container.dataset.mermaidHash

    </span><span style="color: rgba(0, 0, 255, 1)">if</span> (!<span style="color: rgba(0, 0, 0, 1)">code) {
      </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)">
    }

    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æ£€æŸ¥ mermaid æ˜¯å¦å¯ç”¨</span>
    <span style="color: rgba(0, 0, 255, 1)">if</span> (<span style="color: rgba(0, 0, 255, 1)">typeof</span> window.mermaid === 'undefined'<span style="color: rgba(0, 0, 0, 1)">) {
      showError(container, </span>'Mermaid åº“æœªåŠ è½½!'<span style="color: rgba(0, 0, 0, 1)">)
      </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)">
    }
  
    </span><span style="color: rgba(0, 0, 255, 1)">try</span><span style="color: rgba(0, 0, 0, 1)"> {
      </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> é…ç½® mermaidï¼ˆå¦‚æœè¿˜æœªé…ç½®ï¼‰</span>
      <span style="color: rgba(0, 0, 255, 1)">if</span> (!<span style="color: rgba(0, 0, 0, 1)">window.mermaid.initialized) {
        window.mermaid.initialize({
          startOnLoad: </span><span style="color: rgba(0, 0, 255, 1)">false</span><span style="color: rgba(0, 0, 0, 1)">,
          theme: </span>'default'<span style="color: rgba(0, 0, 0, 1)">,
          securityLevel: </span>'loose'<span style="color: rgba(0, 0, 0, 1)">,</span><span style="color: rgba(0, 0, 0, 1)">
        })
        window.mermaid.initialized </span>= <span style="color: rgba(0, 0, 255, 1)">true</span><span style="color: rgba(0, 0, 0, 1)">
      }
  
      let svg
  
      </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æ£€æŸ¥ç¼“å­˜</span>
      <span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)">(renderCache.has(hash)) {
        svg </span>=<span style="color: rgba(0, 0, 0, 1)"> renderCache.get(hash)
      }</span><span style="color: rgba(0, 0, 255, 1)">else</span><span style="color: rgba(0, 0, 0, 1)"> {
        const { isValid } </span>=<span style="color: rgba(0, 0, 0, 1)"> await verifyMermaid(code)

        </span><span style="color: rgba(0, 0, 255, 1)">if</span>(!<span style="color: rgba(0, 0, 0, 1)">isValid) {
          showError(container, `</span>&lt;pre&gt;æ¸²æŸ“è¯­æ³•é”™è¯¯ï¼š\n${ code }\n&lt;/pre&gt;`)
          <span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)">
        }

        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ä½¿ç”¨å”¯ä¸€IDæ¸²æŸ“(é¿å…å›¾è¡¨å†²çª)</span>
        const {svg: renderedSvg} = await window.mermaid.render(`mermaid-<span style="color: rgba(0, 0, 0, 1)">${containerId}`, code)
        svg </span>=<span style="color: rgba(0, 0, 0, 1)"> renderedSvg
        renderCache.set(hash, svg)
      }

      </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æ›´æ–°å®¹å™¨å†…å®¹</span>
      container.innerHTML =<span style="color: rgba(0, 0, 0, 1)"> svg
      container.removeAttribute(</span>'data-mermaid-hash'<span style="color: rgba(0, 0, 0, 1)">)
      container.removeAttribute(</span>'data-mermaid-code'<span style="color: rgba(0, 0, 0, 1)">)

      </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> è§¦å‘å›è°ƒ</span>
      <span style="color: rgba(0, 0, 255, 1)">if</span>(options?<span style="color: rgba(0, 0, 0, 1)">.reachBottom) {
        options</span>?.onRender?<span style="color: rgba(0, 0, 0, 1)">.()
      }
    } </span><span style="color: rgba(0, 0, 255, 1)">catch</span><span style="color: rgba(0, 0, 0, 1)"> (error) {
      console.error(</span>'Mermaid æ¸²æŸ“å¤±è´¥:'<span style="color: rgba(0, 0, 0, 1)">, error)
      showError(container, `</span>&lt;pre&gt;æ¸²æŸ“å›¾è¡¨æ—¶å‡ºé”™: \n ${error.message}\n&lt;/pre&gt;`)
<span style="color: rgba(0, 0, 0, 1)">    }
  }
}</span></pre>
</div>
<p><img alt="001360æˆªå›¾20251222193621367" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202512/1289798-20251223103538181-209659643.png" class="lazyload"></p>
<p><img alt="001360æˆªå›¾20251222193715663" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202512/1289798-20251223103552216-1545436278.png" class="lazyload"></p>
<p><img alt="002360æˆªå›¾20251222193937688" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202512/1289798-20251223103612440-1597186190.png" class="lazyload"></p>
<p><img alt="004360æˆªå›¾20251222194733968" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202512/1289798-20251223103703349-1708451451.png" class="lazyload"></p>
<p><img alt="007360æˆªå›¾20251222201320598" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202512/1289798-20251223103717238-1614729462.png" class="lazyload"></p>
<p><img alt="005360æˆªå›¾20251222194921868" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202512/1289798-20251223103756064-1584305930.png" class="lazyload"></p>
<p><img alt="006360æˆªå›¾20251222195419077" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202512/1289798-20251223103816759-904170540.png" class="lazyload"></p>
<p><img alt="009360æˆªå›¾20251222202431855" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202512/1289798-20251223103852560-1881261749.png" class="lazyload"></p>
<p><img alt="010360æˆªå›¾20251222203811582" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202512/1289798-20251223103906992-975747501.png" class="lazyload"></p>
<p><img alt="012360æˆªå›¾20251222204251442" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202512/1289798-20251223103919280-136041562.png" class="lazyload"></p>
<p><img alt="013360æˆªå›¾20251222204308421" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202512/1289798-20251223104000680-1481731266.png" class="lazyload"></p>
<p><img alt="014360æˆªå›¾20251222204432469" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202512/1289798-20251223103939973-1523425268.png" class="lazyload"></p>
<p>æ”¯æŒè¿è¡Œåˆ°pcç«¯ä»¥750pxå®½åº¦æ˜¾ç¤ºé¡µé¢å¸ƒå±€ã€‚</p>
<p><img alt="015360æˆªå›¾20251222205211925" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202512/1289798-20251223104049841-876451429.png" class="lazyload"></p>
<p><img alt="015360æˆªå›¾20251222210111883" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202512/1289798-20251223104115293-1216317344.png" class="lazyload"></p>
<p><img alt="015360æˆªå›¾20251222210330996" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202512/1289798-20251223104139497-1047165356.png" class="lazyload"></p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202512/1289798-20251223104354641-1844699074.png" class="lazyload"></p>
<h3>vue3é›†æˆdeepseekæµå¼æ‰“å­—è¾“å‡º</h3>
<p><strong>éæµå¼è¯·æ±‚è¾“å‡º</strong></p>
<div class="cnblogs_code">
<pre>const completion =<span style="color: rgba(0, 0, 0, 1)"> await openai.chat.completions.create({
  messages: [
    {role: </span>'user'<span style="color: rgba(0, 0, 0, 1)">, content: editorValue}
  ],
  model: </span>'deepseek-chat', <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> deepseek-chatå¯¹è¯æ¨¡å‹ deepseek-reasoneræ¨ç†æ¨¡å‹</span>
  stream: <span style="color: rgba(0, 0, 255, 1)">false</span>, <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æµå¼è¾“å‡º</span>
  max_tokens: 8192, <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> é™åˆ¶ä¸€æ¬¡è¯·æ±‚ä¸­æ¨¡å‹ç”Ÿæˆ completion çš„æœ€å¤§ token æ•°(é»˜è®¤ä½¿ç”¨ 4096)</span>
  temperature: 0.4, <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ä¸¥è°¨é‡‡æ · è¶Šä½è¶Šä¸¥è°¨(é»˜è®¤1)</span>
<span style="color: rgba(0, 0, 0, 1)">})
</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> å¤„ç†è¿”å›æ•°æ®</span>
console.log(completion.choices[0].message.content)</pre>
</div>
<p><strong>æµå¼è¯·æ±‚è¾“å‡º</strong></p>
<p>ä¸Šä¸‹æ–‡å¤šè½®ä¼šè¯ã€‚</p>
<div class="cnblogs_code">
<pre>const completion =<span style="color: rgba(0, 0, 0, 1)"> await openai.chat.completions.create({
  </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> å•ä¸€ä¼šè¯</span>
  <span style="color: rgba(0, 128, 0, 1)">/*</span><span style="color: rgba(0, 128, 0, 1)"> messages: [
    {role: 'user', content: editorValue}
  ], </span><span style="color: rgba(0, 128, 0, 1)">*/</span>
  <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> å¤šè½®ä¼šè¯</span>
  messages: props.multiConversation ? historySession.value : [{role: 'user'<span style="color: rgba(0, 0, 0, 1)">, content: editorValue}],
  model: </span>'deepseek-chat', <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> deepseek-chatå¯¹è¯æ¨¡å‹ deepseek-reasoneræ¨ç†æ¨¡å‹</span>
  stream: <span style="color: rgba(0, 0, 255, 1)">true</span>, <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æµå¼è¾“å‡º</span>
  max_tokens: 8192, <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> é™åˆ¶ä¸€æ¬¡è¯·æ±‚ä¸­æ¨¡å‹ç”Ÿæˆ completion çš„æœ€å¤§ token æ•°(é»˜è®¤ä½¿ç”¨ 4096)</span>
  temperature: 0.4, <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ä¸¥è°¨é‡‡æ · è¶Šä½è¶Šä¸¥è°¨(é»˜è®¤1)</span>
})</pre>
</div>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> å¤„ç†æµå¼è¾“å‡º</span>
<span style="color: rgba(0, 0, 255, 1)">for</span><span style="color: rgba(0, 0, 0, 1)"> await (const chunk of completion) {
  </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æ£€æŸ¥æ˜¯å¦å·²ç»ˆæ­¢</span>
  <span style="color: rgba(0, 0, 255, 1)">if</span>(chatState.aborted) <span style="color: rgba(0, 0, 255, 1)">break</span><span style="color: rgba(0, 0, 0, 1)">

  const content </span>= chunk.choices[0]?.delta?<span style="color: rgba(0, 0, 0, 1)">.content
  </span><span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)">(content) {
    streamText </span>+=<span style="color: rgba(0, 0, 0, 1)"> content
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> é™åˆ¶æ›´æ–°é¢‘ç‡ï¼šæ¯100msæœ€å¤šæ›´æ–°ä¸€æ¬¡</span>
    const now =<span style="color: rgba(0, 0, 0, 1)"> Date.now()
    </span><span style="color: rgba(0, 0, 255, 1)">if</span>(now - lastUpdate &gt; 100<span style="color: rgba(0, 0, 0, 1)">) {
      lastUpdate </span>=<span style="color: rgba(0, 0, 0, 1)"> now
      requestAnimationFrame(() </span>=&gt;<span style="color: rgba(0, 0, 0, 1)"> {
        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ...</span>
<span style="color: rgba(0, 0, 0, 1)">      })
    }
  }
  </span><span style="color: rgba(0, 0, 255, 1)">if</span>(chunk.choices[0]?.finish_reason === 'stop'<span style="color: rgba(0, 0, 0, 1)">) {
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ç¡®ä¿æœ€ç»ˆå†…å®¹å®Œæ•´æ›´æ–°</span>
    ...<span style="color: rgba(0, 0, 0, 1)">
  }
}</span></pre>
</div>
<p>ç»¼ä¸Šå°±æ˜¯vite7.2+vue3å¯¹æ¥deepseekå®ç°æµå¼aiå¯¹è¯çš„ä¸€äº›é¡¹ç›®åˆ†äº«ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰ç‚¹å¸®åŠ©ï¼</p>
<p><strong>é™„ä¸Šå‡ ä¸ªæœ€æ–°é¡¹ç›®å®ä¾‹</strong></p>
<blockquote>
<p><span style="font-size: 12px"><a class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiaoyan2017/p/18853514" target="_blank">Uniapp-DeepSeekè·¨ä¸‰ç«¯AIåŠ©æ‰‹|uniapp+vue3+deepseek-v3æµå¼aièŠå¤©æ¨¡æ¿</a></span></p>
<p><span style="font-size: 12px"><a class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiaoyan2017/p/18795796" target="_blank">vue3-webseekç½‘é¡µç‰ˆAIé—®ç­”|Vite6+DeepSeek+Arcoæµå¼aièŠå¤©æ‰“å­—æ•ˆæœ</a></span></p>
<p><span style="font-size: 12px"><a class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiaoyan2017/p/19313982" target="_blank">æœ€æ–°ç‰ˆFlutter3.38+Dart3.10ä»¿å†™æŠ–éŸ³APPç›´æ’­+çŸ­è§†é¢‘+èŠå¤©åº”ç”¨ç¨‹åº</a></span></p>
<p><span style="font-size: 12px"><a class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiaoyan2017/p/19235565" target="_blank">Tauri2.9+Vue3æ¡Œé¢ç‰ˆOSç³»ç»Ÿ|vite7+tauri2+arcoDesignç”µè„‘ç«¯osåå°æ¨¡æ¿</a></span></p>
<p><span style="font-size: 12px"><a class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiaoyan2017/p/19116145" target="_blank">electron38-adminæ¡Œé¢ç«¯åå°|Electron38+Vue3+ElementPlusç®¡ç†ç³»ç»Ÿ</a></span></p>
<p><span style="font-size: 12px"><a class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiaoyan2017/p/19088804" target="_blank">Electron38-Wechatç”µè„‘ç«¯èŠå¤©|vite7+electron38ä»¿å¾®ä¿¡æ¡Œé¢ç«¯èŠå¤©ç³»ç»Ÿ</a></span></p>
<p><span style="font-size: 12px"><a class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiaoyan2017/p/19136187" target="_blank">Electron38-Vue3OSå®¢æˆ·ç«¯OSç³»ç»Ÿ|vite7+electron38+arcoæ¡Œé¢osåå°ç®¡ç†</a></span></p>
<p><span style="font-size: 12px"><a class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiaoyan2017/p/19181509" target="_blank">Tauri2-Vite7Adminå®¢æˆ·ç«¯ç®¡ç†åå°|tauri2.9+vue3+element-plusåå°ç³»ç»Ÿ</a></span></p>
<p><span style="font-size: 12px"><a class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiaoyan2017/p/19157445" target="_blank">Tauri2.8+Vue3èŠå¤©ç³»ç»Ÿ|vite7+tauri2+element-pluså®¢æˆ·ç«¯ä»¿å¾®ä¿¡èŠå¤©ç¨‹åº</a></span></p>
<p><span style="font-size: 12px"><a class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiaoyan2017/p/18962574" target="_blank">æœ€æ–°ç‰ˆuniapp+vue3+uv-uiè·¨ä¸‰ç«¯çŸ­è§†é¢‘+ç›´æ’­+èŠå¤©ã€H5+å°ç¨‹åº+Appç«¯ã€‘</a></span></p>
<p><span style="font-size: 12px"><a class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiaoyan2017/p/19031695" target="_blank">æœ€æ–°ç‰ˆuni-app+vue3+uv-uiè·¨ä¸‰ç«¯ä»¿å¾®ä¿¡appèŠå¤©åº”ç”¨ã€h5+å°ç¨‹åº+appç«¯ã€‘</a></span></p>
<p><span style="font-size: 12px"><a class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiaoyan2017/p/19018641" target="_blank">Flutter3-MacOSæ¡Œé¢OSç³»ç»Ÿ|flutter3.32+window_managerå®¢æˆ·ç«¯OSæ¨¡æ¿</a></span></p>
</blockquote>
<p><img alt="20190422-204556-c922" width="121" height="121" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202512/1289798-20251223105455421-2130771465.gif" class="lazyload"></p>
<p>&nbsp;</p>
</div>
<div id="MySignature" role="contentinfo">
    æœ¬æ–‡ä¸ºåšä¸»åŸåˆ›æ–‡ç« ï¼Œæœªç»åšä¸»å…è®¸ä¸å¾—è½¬è½½ï¼Œæ¬¢è¿å¤§å®¶ä¸€èµ·äº¤æµ QQï¼ˆ282310962ï¼‰ wxï¼ˆxy190310ï¼‰
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-23 11:06">2025-12-23 11:06</span>&nbsp;
<a href="https://www.cnblogs.com/xiaoyan2017">xiaoyan2017</a>&nbsp;
é˜…è¯»(<span id="post_view_count">15</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19385909);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19385909', targetLink: 'https://www.cnblogs.com/xiaoyan2017/p/19385909', title: 'vite7+deepseekæµå¼aiæ¨¡æ¿|vue3.5+deepseek3.2+markdownæ‰“å­—è¾“å‡ºaiåŠ©æ‰‹' })">ä¸¾æŠ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Javaå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ï¼ŒåŒºåˆ« ]]></title>
    <link>https://www.cnblogs.com/kakarotto-chen/p/19385864</link>
    <guid>44af6db22ea61c546306eb14b29a7acc</guid>
    <description>
    <![CDATA[ 
        <h2>
            <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/kakarotto-chen/p/19385864" title="å‘å¸ƒäº 2025-12-23 10:58">
    <span role="heading" aria-level="2">Javaå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ï¼ŒåŒºåˆ«</span>
    

</a>

        </h2>
        <div class="postbody">
            <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="-å•å…ƒæµ‹è¯•-vs-é›†æˆæµ‹è¯•">ğŸ“š <strong>å•å…ƒæµ‹è¯• vs é›†æˆæµ‹è¯•</strong></h2>
<h3 id="1-å•å…ƒæµ‹è¯•unit-test"><strong>1. å•å…ƒæµ‹è¯•ï¼ˆUnit Testï¼‰</strong></h3>
<p><strong>å®šä¹‰</strong>ï¼šæµ‹è¯•<strong>æœ€å°ä»£ç å•å…ƒ</strong>ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªæ–¹æ³•æˆ–ç±»ï¼‰ï¼Œ<strong>éš”ç¦»æ‰€æœ‰å¤–éƒ¨ä¾èµ–</strong>ã€‚</p>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>æµ‹è¯•å•ä¸ªç±»/æ–¹æ³•</li>
<li>æ‰€æœ‰ä¾èµ–éƒ½ç”¨Mockä»£æ›¿</li>
<li>ä¸å¯åŠ¨Springå®¹å™¨</li>
<li>è¿è¡Œæå¿«ï¼ˆæ¯«ç§’çº§ï¼‰</li>
<li>æ•°é‡æœ€å¤š</li>
</ul>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="language-java">// æµ‹è¯•OrderServiceçš„calculateTotalæ–¹æ³•
class OrderServiceTest {
    @Test
    void calculateTotal_ShouldReturnCorrectSum() {
        // 1. Mockæ‰€æœ‰ä¾èµ–
        DiscountService discountMock = mock(DiscountService.class);
        when(discountMock.calculate(any())).thenReturn(10.0);
        
        // 2. åˆ›å»ºè¢«æµ‹è¯•å¯¹è±¡ï¼ˆä¸é€šè¿‡Springï¼‰
        OrderService service = new OrderService(discountMock);
        
        // 3. è°ƒç”¨å¹¶éªŒè¯
        Order order = new Order(100.0);
        double total = service.calculateTotal(order);
        
        assertEquals(90.0, total);  // 100 - 10æŠ˜æ‰£
    }
}
</code></pre>
<h3 id="2-é›†æˆæµ‹è¯•integration-test"><strong>2. é›†æˆæµ‹è¯•ï¼ˆIntegration Testï¼‰</strong></h3>
<p><strong>å®šä¹‰</strong>ï¼šæµ‹è¯•<strong>å¤šä¸ªç»„ä»¶ååŒå·¥ä½œ</strong>ï¼ŒéªŒè¯å®ƒä»¬ä¹‹é—´çš„é›†æˆæ˜¯å¦æ­£ç¡®ã€‚</p>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>æµ‹è¯•ç»„ä»¶é—´äº¤äº’</li>
<li>å¯åŠ¨éƒ¨åˆ†æˆ–å…¨éƒ¨Springå®¹å™¨</li>
<li>å¯èƒ½è¿æ¥çœŸå®æ•°æ®åº“/å¤–éƒ¨æœåŠ¡</li>
<li>è¿è¡Œè¾ƒæ…¢ï¼ˆç§’çº§ï¼‰</li>
<li>æ•°é‡è¾ƒå°‘</li>
</ul>
<p><strong>å…¸å‹é›†æˆæµ‹è¯•</strong>ï¼š</p>
<pre><code class="language-java">@SpringBootTest  // â† å¯åŠ¨å®Œæ•´Spring Bootåº”ç”¨
class DolphinSchedulerApiDemoApplicationTests {
    @Autowired  // â† Springæ³¨å…¥çœŸå®bean
    WorkerGroupRequest workerGroupRequest;  // â† æµ‹è¯•è¿™ä¸ªbeanä¸å…¶ä»–ç»„ä»¶çš„é›†æˆ
    
    @Test
    void contextLoads() {
        // è°ƒç”¨çœŸå®æ–¹æ³•ï¼Œå¯èƒ½æ¶‰åŠï¼š
        // 1. WorkerGroupRequestå†…éƒ¨é€»è¾‘
        // 2. å®ƒä¾èµ–çš„å…¶ä»–Service
        // 3. å¯èƒ½çš„HTTPè°ƒç”¨ï¼ˆå¦‚æœç”¨äº†RestTemplateï¼‰
        // 4. æ•°æ®åº“æ“ä½œï¼ˆå¦‚æœç”¨äº†DAOï¼‰
        workerGroupRequest.getWorkerPaths();
    }
}
</code></pre>
<h2 id="-ä¸¤ç§æµ‹è¯•å¯¹æ¯”">ğŸ“Š <strong>ä¸¤ç§æµ‹è¯•å¯¹æ¯”</strong></h2>
<table>
<thead>
<tr>
<th>æ–¹é¢</th>
<th>å•å…ƒæµ‹è¯•</th>
<th>é›†æˆæµ‹è¯•</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>æµ‹è¯•èŒƒå›´</strong></td>
<td>å•ä¸ªç±»/æ–¹æ³•</td>
<td>å¤šä¸ªç»„ä»¶/æ¨¡å—</td>
</tr>
<tr>
<td><strong>å¤–éƒ¨ä¾èµ–</strong></td>
<td>å…¨éƒ¨Mock</td>
<td>éƒ¨åˆ†æˆ–å…¨éƒ¨çœŸå®</td>
</tr>
<tr>
<td><strong>Springå®¹å™¨</strong></td>
<td>ä¸å¯åŠ¨</td>
<td>å¯åŠ¨</td>
</tr>
<tr>
<td><strong>è¿è¡Œé€Ÿåº¦</strong></td>
<td>å¿«ï¼ˆmsçº§ï¼‰</td>
<td>æ…¢ï¼ˆsçº§ï¼‰</td>
</tr>
<tr>
<td><strong>æµ‹è¯•ç›®çš„</strong></td>
<td>éªŒè¯é€»è¾‘æ­£ç¡®æ€§</td>
<td>éªŒè¯é›†æˆæ­£ç¡®æ€§</td>
</tr>
<tr>
<td><strong>æ•°é‡æ¯”ä¾‹</strong></td>
<td>70-80%</td>
<td>20-30%</td>
</tr>
</tbody>
</table>
<h2 id="-æµ‹è¯•åˆ†æ">ğŸ”§ <strong>æµ‹è¯•åˆ†æ</strong></h2>
<h3 id="å½“å‰æƒ…å†µ"><strong>å½“å‰æƒ…å†µ</strong>ï¼š</h3>
<pre><code class="language-java">@SpringBootTest  // å¯åŠ¨æ•´ä¸ªåº”ç”¨ â†’ é›†æˆæµ‹è¯•
class DolphinSchedulerApiDemoApplicationTests {
    @Autowired  // Springæ³¨å…¥ â†’ é›†æˆæµ‹è¯•
    WorkerGroupRequest workerGroupRequest;
    
    @Test
    void contextLoads() {
        // æµ‹è¯•APIå®¢æˆ·ç«¯ä¸DolphinSchedulerçš„é›†æˆ
        // å¯èƒ½æ¶‰åŠï¼šç½‘ç»œè°ƒç”¨ã€JSONè§£æã€é”™è¯¯å¤„ç†ç­‰
    }
}
</code></pre>
<h3 id="åº”è¯¥æ”¹å—è¦çœ‹æµ‹è¯•ç›®çš„"><strong>åº”è¯¥æ”¹å—ï¼Ÿè¦çœ‹æµ‹è¯•ç›®çš„ï¼š</strong></h3>
<p><strong>æƒ…å†µ1ï¼šå¦‚æœä½ æ˜¯æƒ³æµ‹"WorkerGroupRequestä¸çœŸå®DolphinScheduleræœåŠ¡çš„äº¤äº’"</strong></p>
<pre><code class="language-java">// âœ… ä¿æŒé›†æˆæµ‹è¯•ï¼ˆéœ€è¦çœŸå®åç«¯ï¼‰
@SpringBootTest
class WorkerGroupIntegrationTest {
    @Autowired WorkerGroupRequest request;
    
    @Test
    void shouldConnectToRealDolphinScheduler() {
        // éªŒè¯æ˜¯å¦èƒ½çœŸæ­£è¿æ¥åˆ°éƒ¨ç½²çš„DolphinScheduler
        List&lt;String&gt; paths = request.getWorkerPaths();
        assertNotNull(paths);
        // å¯èƒ½è¿˜éœ€è¦éªŒè¯è·¯å¾„æ ¼å¼ç­‰
    }
}
</code></pre>
<p><strong>æƒ…å†µ2ï¼šå¦‚æœä½ æ˜¯æƒ³æµ‹"WorkerGroupRequestå†…éƒ¨çš„é€»è¾‘"</strong></p>
<pre><code class="language-java">// âœ… æ”¹ä¸ºå•å…ƒæµ‹è¯•ï¼ˆæ›´å¿«ã€æ›´ç¨³å®šï¼‰
class WorkerGroupRequestTest {
    
    @Test
    void parseWorkerPaths_ShouldHandleEmptyResponse() {
        // 1. Mock HTTPå®¢æˆ·ç«¯
        RestTemplate restTemplateMock = mock(RestTemplate.class);
        when(restTemplateMock.exchange(any(), any(), any(), eq(String.class)))
            .thenReturn(new ResponseEntity&lt;&gt;("[]", HttpStatus.OK));
        
        // 2. åˆ›å»ºæµ‹è¯•å¯¹è±¡
        WorkerGroupRequest request = new WorkerGroupRequest(restTemplateMock, "http://localhost");
        
        // 3. æµ‹è¯•å†…éƒ¨é€»è¾‘
        List&lt;String&gt; paths = request.getWorkerPaths();
        
        assertTrue(paths.isEmpty());
    }
    
    @Test
    void parseWorkerPaths_ShouldParseJsonCorrectly() {
        RestTemplate restTemplateMock = mock(RestTemplate.class);
        String jsonResponse = "[\"192.168.1.1:1234\", \"192.168.1.2:1234\"]";
        when(restTemplateMock.exchange(any(), any(), any(), eq(String.class)))
            .thenReturn(new ResponseEntity&lt;&gt;(jsonResponse, HttpStatus.OK));
        
        WorkerGroupRequest request = new WorkerGroupRequest(restTemplateMock, "http://localhost");
        
        List&lt;String&gt; paths = request.getWorkerPaths();
        
        assertEquals(2, paths.size());
        assertEquals("192.168.1.1:1234", paths.get(0));
    }
}
</code></pre>
<h2 id="-å…·ä½“å»ºè®®">ğŸ¯ <strong>å…·ä½“å»ºè®®</strong></h2>
<h3 id="æ–¹æ¡ˆaä¿æŒé›†æˆæµ‹è¯•ä½†è¦æ”¹è¿›"><strong>æ–¹æ¡ˆAï¼šä¿æŒé›†æˆæµ‹è¯•ï¼Œä½†è¦æ”¹è¿›</strong></h3>
<pre><code class="language-java">@SpringBootTest
// é™åˆ¶æµ‹è¯•èŒƒå›´ï¼ŒåŠ é€Ÿå¯åŠ¨
@AutoConfigureMockMvc
@TestPropertySource(locations = "classpath:test.properties")
class WorkerGroupRequestIntegrationTest {
    
    @Autowired
    private WorkerGroupRequest workerGroupRequest;
    
    @MockBean  // MockæŸäº›ä¸æƒ³çœŸå®è°ƒç”¨çš„ä¾èµ–
    private SomeExternalService externalService;
    
    @Test
    void getWorkerPaths_ShouldReturnListFromDolphinScheduler() {
        // é…ç½®Mockè¡Œä¸º
        when(externalService.someCall()).thenReturn("mocked");
        
        // æ‰§è¡Œæµ‹è¯•
        List&lt;String&gt; result = workerGroupRequest.getWorkerPaths();
        
        // æ›´ä¸“ä¸šçš„æ–­è¨€
        assertNotNull(result);
        assertFalse(result.isEmpty());
        // å¯ä»¥éªŒè¯ç‰¹å®šçš„ä¸šåŠ¡é€»è¾‘
    }
}
</code></pre>
<h3 id="æ–¹æ¡ˆbæ‹†åˆ†ä¸ºä¸¤ç§æµ‹è¯•"><strong>æ–¹æ¡ˆBï¼šæ‹†åˆ†ä¸ºä¸¤ç§æµ‹è¯•</strong></h3>
<pre><code class="language-java">// 1. å•å…ƒæµ‹è¯•ï¼šæµ‹é€»è¾‘ï¼ˆ80%çš„æµ‹è¯•ï¼‰
class WorkerGroupRequestUnitTest {
    // æµ‹è¯•å„ç§åœºæ™¯ï¼šæ­£å¸¸æƒ…å†µã€å¼‚å¸¸æƒ…å†µã€è¾¹ç•Œæƒ…å†µ
    @Test void testNormalCase() { ... }
    @Test void testEmptyResponse() { ... }
    @Test void testMalformedJson() { ... }
    @Test void testNetworkError() { ... }
}

// 2. é›†æˆæµ‹è¯•ï¼šæµ‹çœŸå®è¿æ¥ï¼ˆ20%çš„æµ‹è¯•ï¼‰
@SpringBootTest
class WorkerGroupRequestIntegrationTest {
    // åªæµ‹çœŸæ­£éœ€è¦é›†æˆéªŒè¯çš„éƒ¨åˆ†
    @Test void testRealConnection() { ... }
}
</code></pre>
<h3 id="æ–¹æ¡ˆcæ·»åŠ æµ‹è¯•é…ç½®"><strong>æ–¹æ¡ˆCï¼šæ·»åŠ æµ‹è¯•é…ç½®</strong></h3>
<p>åœ¨ <code>src/test/resources/application-test.yml</code>ï¼š</p>
<pre><code class="language-yaml"># æµ‹è¯•ä¸“ç”¨é…ç½®
dolphinscheduler:
  url: http://localhost:12345
  # æˆ–è€…ä½¿ç”¨æµ‹è¯•ä¸“ç”¨çš„MockæœåŠ¡å™¨
</code></pre>
<h2 id="-åˆ¤æ–­æ ‡å‡†">ğŸ“ <strong>åˆ¤æ–­æ ‡å‡†</strong></h2>
<p>é—®è‡ªå·±å‡ ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>
<p><strong>è¿™ä¸ªæµ‹è¯•éœ€è¦çœŸå®DolphinScheduleræœåŠ¡è¿è¡Œå—ï¼Ÿ</strong></p>
<ul>
<li>æ˜¯ â†’ é›†æˆæµ‹è¯•</li>
<li>å¦ â†’ å•å…ƒæµ‹è¯•</li>
</ul>
</li>
<li>
<p><strong>æµ‹è¯•å¤±è´¥æ˜¯å› ä¸ºæˆ‘çš„ä»£ç é€»è¾‘é—®é¢˜ï¼Œè¿˜æ˜¯å¤–éƒ¨æœåŠ¡é—®é¢˜ï¼Ÿ</strong></p>
<ul>
<li>ä»£ç é—®é¢˜ â†’ åº”è¯¥ç”¨å•å…ƒæµ‹è¯•</li>
<li>å¤–éƒ¨é—®é¢˜ â†’ é›†æˆæµ‹è¯•åˆç†</li>
</ul>
</li>
<li>
<p><strong>è¿™ä¸ªæµ‹è¯•è¿è¡Œé€Ÿåº¦é‡è¦å—ï¼Ÿ</strong></p>
<ul>
<li>è¦å¿«é€Ÿåé¦ˆ â†’ å•å…ƒæµ‹è¯•</li>
<li>å¯ä»¥æ¥å—è¾ƒæ…¢ â†’ é›†æˆæµ‹è¯•</li>
</ul>
</li>
</ol>
<h2 id="-ç»“è®º">âœ… <strong>ç»“è®º</strong></h2>
<p><strong>æµ‹è¯•ä½œä¸ºé›†æˆæµ‹è¯•æ˜¯åˆç†çš„</strong>ï¼Œç‰¹åˆ«æ˜¯ï¼š</p>
<ul>
<li>ä½ åœ¨å¼€å‘DolphinSchedulerå®¢æˆ·ç«¯</li>
<li>éœ€è¦éªŒè¯ä¸çœŸå®APIçš„äº¤äº’</li>
<li>æ—©æœŸå¼€å‘é˜¶æ®µéœ€è¦ç«¯åˆ°ç«¯éªŒè¯</li>
</ul>
<p><strong>ä½†å»ºè®®è¡¥å……å•å…ƒæµ‹è¯•</strong>æ¥è¦†ç›–å„ç§é€»è¾‘åˆ†æ”¯ï¼Œè¿™æ ·ï¼š</p>
<ol>
<li>å•å…ƒæµ‹è¯•ï¼šå¿«é€ŸéªŒè¯é€»è¾‘ï¼ˆå¼€å‘æ—¶é¢‘ç¹è¿è¡Œï¼‰</li>
<li>é›†æˆæµ‹è¯•ï¼šéªŒè¯çœŸå®é›†æˆï¼ˆæäº¤å‰æˆ–CIä¸­è¿è¡Œï¼‰</li>
</ol>
<p>ç°åœ¨å¯ä»¥è¿™æ ·åšï¼š</p>
<pre><code class="language-java">// ä¿æŒç°æœ‰çš„é›†æˆæµ‹è¯•
@SpringBootTest
class WorkerGroupIntegrationTest {
    // éªŒè¯çœŸå®è¿æ¥
}

// æ–°å¢å•å…ƒæµ‹è¯•
class WorkerGroupRequestUnitTest {
    // æµ‹è¯•æ‰€æœ‰å¯èƒ½çš„å“åº”å¤„ç†é€»è¾‘
    @Test void testParseResponse() { ... }
    @Test void testBuildUrl() { ... }
    @Test void testHandleError() { ... }
}
</code></pre>
<p>è¿™æ ·æ—¢æœ‰å¿«é€Ÿåé¦ˆçš„å•å…ƒæµ‹è¯•ï¼Œåˆæœ‰ä¿éšœé›†æˆçš„é›†æˆæµ‹è¯•ã€‚</p>

</div>
<div class="clear"></div>

        </div>
        <p class="postfoot">
            posted on 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-23 10:59">2025-12-23 10:58</span>&nbsp;
<a href="https://www.cnblogs.com/kakarotto-chen">C_C_èœå›­</a>&nbsp;
é˜…è¯»(<span id="post_view_count">0</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19385864);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19385864', targetLink: 'https://www.cnblogs.com/kakarotto-chen/p/19385864', title: 'Javaå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ï¼ŒåŒºåˆ«' })">ä¸¾æŠ¥</a>

        </p>
     ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Lit çš„å“åº”å¼ç³»ç»Ÿä¸ºä»€ä¹ˆè¿™ä¹ˆè½»ï¼Ÿâ€”â€”ä» ReactiveElement çš„è®¾è®¡è¯´èµ· ]]></title>
    <link>https://www.cnblogs.com/zxlh1529/p/19370810</link>
    <guid>adc38fbb8be4193bc15835723afd4b18</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/zxlh1529/p/19370810" title="å‘å¸ƒäº 2025-12-23 10:33">
    <span role="heading" aria-level="2">Lit çš„å“åº”å¼ç³»ç»Ÿä¸ºä»€ä¹ˆè¿™ä¹ˆè½»ï¼Ÿâ€”â€”ä» ReactiveElement çš„è®¾è®¡è¯´èµ·</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>åœ¨ä½¿ç”¨ Lit æ—¶ï¼Œå¾ˆå¤šäººéƒ½ä¼šæœ‰ä¸€ä¸ªç›´è§‚æ„Ÿå—ï¼š</p>
<blockquote>
<p><strong>â€œå®ƒå±…ç„¶æ²¡æœ‰çŠ¶æ€ç®¡ç†ç³»ç»Ÿï¼Ÿâ€</strong><br>
<strong>â€œä¹Ÿæ²¡æœ‰å¤æ‚çš„ä¾èµ–æ”¶é›†ï¼Ÿâ€</strong></p>
</blockquote>
<p>ä½†å®é™…ä½¿ç”¨ä¸‹æ¥å´å‘ç°ï¼š</p>
<ul>
<li>çŠ¶æ€æ›´æ–°æ˜¯æ­£ç¡®çš„</li>
<li>DOM æ›´æ–°æ˜¯ç²¾å‡†çš„</li>
<li>æ€§èƒ½éå¸¸ç¨³å®š</li>
</ul>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼š</p>
<blockquote>
<p><strong>Lit çš„å“åº”å¼ç³»ç»Ÿåˆ°åº•æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ</strong><br>
<strong>å®ƒä¸ºä»€ä¹ˆå¯ä»¥è¿™ä¹ˆè½»ï¼Ÿ</strong></p>
</blockquote>
<p>æœ¬æ–‡å°†ä» <strong>ReactiveElement çš„è®¾è®¡ç›®æ ‡ã€å®ç°æ–¹å¼ã€ä¸ Vue/React çš„æ ¹æœ¬å·®å¼‚</strong> ä¸‰ä¸ªè§’åº¦æ¥è§£é‡Šè¿™ä¸ªé—®é¢˜ã€‚</p>
<hr>
<h2 id="ä¸€å…ˆè¯´ç»“è®ºimportant">ä¸€ã€å…ˆè¯´ç»“è®ºï¼ˆImportantï¼‰</h2>
<p>åœ¨ Lit ä¸­ï¼š</p>
<blockquote>
<p><strong>å“åº”å¼ç³»ç»Ÿçš„èŒè´£ä¸æ˜¯â€œè®¡ç®—ä¾èµ–â€ï¼Œ</strong><br>
<strong>è€Œæ˜¯â€œè°ƒåº¦æ›´æ–°â€</strong></p>
</blockquote>
<p>è¿™æ˜¯ç†è§£ Lit å“åº”å¼ç³»ç»Ÿçš„ç¬¬ä¸€æŠŠé’¥åŒ™ã€‚</p>
<hr>
<h2 id="äºŒreactiveelement-åœ¨-lit-æ¶æ„ä¸­çš„ä½ç½®">äºŒã€ReactiveElement åœ¨ Lit æ¶æ„ä¸­çš„ä½ç½®</h2>
<p>å…ˆå›é¡¾ Lit çš„ç»§æ‰¿é“¾ï¼š</p>
<pre><code class="language-text">HTMLElement
  â””â”€â”€ ReactiveElement
        â””â”€â”€ LitElement
              â””â”€â”€ YourComponent
</code></pre>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li><strong>ReactiveElement</strong>ï¼šè´Ÿè´£å“åº”å¼å±æ€§ &amp; æ›´æ–°è°ƒåº¦</li>
<li><strong>LitElement</strong>ï¼šè´Ÿè´£ç”Ÿå‘½å‘¨æœŸ &amp; render è°ƒç”¨</li>
<li><strong>lit-html</strong>ï¼šè´Ÿè´£ DOM æ›´æ–°</li>
</ul>
<blockquote>
<p>ReactiveElement ä¸å…³å¿ƒ DOM<br>
å®ƒåªå…³å¿ƒï¼š<strong>ä»€ä¹ˆæ—¶å€™éœ€è¦æ›´æ–°</strong></p>
</blockquote>
<hr>
<h2 id="ä¸‰lit-çš„å“åº”å¼ç³»ç»Ÿåˆ°åº•å“åº”äº†ä»€ä¹ˆ">ä¸‰ã€Lit çš„å“åº”å¼ç³»ç»Ÿåˆ°åº•â€œå“åº”â€äº†ä»€ä¹ˆï¼Ÿ</h2>
<h3 id="31-lit-çš„å“åº”å¼å•ä½æ˜¯å±æ€§ä¸æ˜¯ä¾èµ–">3.1 Lit çš„å“åº”å¼å•ä½æ˜¯ã€Œå±æ€§ã€ï¼Œä¸æ˜¯ã€Œä¾èµ–ã€</h3>
<p>åœ¨ Vue ä¸­ï¼š</p>
<pre><code class="language-ts">effect(() =&gt; {
  div.textContent = state.count
})
</code></pre>
<ul>
<li>å“åº”çš„æ˜¯ <strong>ä¾èµ–å…³ç³»</strong></li>
<li>è‡ªåŠ¨è¿½è¸ª <code>state.count</code></li>
</ul>
<p>è€Œåœ¨ Lit ä¸­ï¼š</p>
<pre><code class="language-ts">@property()
count = 0
</code></pre>
<ul>
<li>å“åº”çš„æ˜¯ <strong>å±æ€§èµ‹å€¼è¡Œä¸º</strong></li>
<li>ä¸å­˜åœ¨ä¾èµ–æ”¶é›†</li>
</ul>
<hr>
<h3 id="32-æœ¬è´¨åŒºåˆ«">3.2 æœ¬è´¨åŒºåˆ«</h3>
<table>
<thead>
<tr>
<th>æ¡†æ¶</th>
<th>å“åº”å¼å…³æ³¨ç‚¹</th>
</tr>
</thead>
<tbody>
<tr>
<td>Vue</td>
<td>â€œè°ç”¨åˆ°äº†è¿™ä¸ªå€¼â€</td>
</tr>
<tr>
<td>React</td>
<td>â€œçŠ¶æ€æ˜¯å¦å‘ç”Ÿå˜åŒ–â€</td>
</tr>
<tr>
<td>Lit</td>
<td>â€œå±æ€§æ˜¯å¦è¢« setâ€</td>
</tr>
</tbody>
</table>
<p>Lit çš„é€‰æ‹©éå¸¸å…‹åˆ¶ã€‚</p>
<hr>
<h2 id="å››reactiveelement-çš„æ ¸å¿ƒæœºåˆ¶">å››ã€ReactiveElement çš„æ ¸å¿ƒæœºåˆ¶</h2>
<h3 id="41-property-åšäº†ä»€ä¹ˆ">4.1 @property åšäº†ä»€ä¹ˆ</h3>
<pre><code class="language-ts">@property({ type: Number })
count = 0
</code></pre>
<p>èƒŒåæœ¬è´¨æ˜¯ï¼š</p>
<ol>
<li>æŠŠå­—æ®µå˜æˆ getter / setter</li>
<li>åœ¨ setter ä¸­è°ƒç”¨ <code>requestUpdate</code></li>
</ol>
<hr>
<h3 id="42-ä¼ªä»£ç ç¤ºæ„">4.2 ä¼ªä»£ç ç¤ºæ„</h3>
<pre><code class="language-ts">set count(value) {
  const oldValue = this._count
  this._count = value
  this.requestUpdate('count', oldValue)
}
</code></pre>
<p>æ²¡æœ‰ Proxy<br>
æ²¡æœ‰ä¾èµ–æ”¶é›†<br>
æ²¡æœ‰ effect</p>
<hr>
<h2 id="äº”requestupdatelit-å“åº”å¼ç³»ç»Ÿçš„æ ¸å¿ƒ">äº”ã€requestUpdateï¼šLit å“åº”å¼ç³»ç»Ÿçš„æ ¸å¿ƒ</h2>
<h3 id="51-requestupdate-å¹¶ä¸ç«‹å³æ›´æ–°">5.1 requestUpdate å¹¶ä¸ç«‹å³æ›´æ–°</h3>
<pre><code class="language-ts">this.requestUpdate()
</code></pre>
<p>å®ƒåšçš„äº‹æƒ…æ˜¯ï¼š</p>
<ul>
<li>æ ‡è®°â€œéœ€è¦æ›´æ–°â€</li>
<li>æŠŠæ›´æ–°æ”¾å…¥ <strong>microtask é˜Ÿåˆ—</strong></li>
<li>åˆå¹¶å¤šæ¬¡æ›´æ–°</li>
</ul>
<hr>
<h3 id="52-æ‰¹é‡æ›´æ–°æœºåˆ¶">5.2 æ‰¹é‡æ›´æ–°æœºåˆ¶</h3>
<pre><code class="language-ts">this.count = 1
this.count = 2
this.count = 3
</code></pre>
<p>æœ€ç»ˆåªä¼šï¼š</p>
<pre><code class="language-text">render ä¸€æ¬¡
</code></pre>
<p>è¿™æ˜¯ Lit å“åº”å¼ç³»ç»Ÿ<strong>æœ€é‡è¦çš„æ€§èƒ½ä¿è¯</strong>ã€‚</p>
<hr>
<h3 id="53-æ›´æ–°è°ƒåº¦æµç¨‹">5.3 æ›´æ–°è°ƒåº¦æµç¨‹</h3>
<pre><code class="language-text">property set
  â†“
requestUpdate
  â†“
Promise.resolve().then()
  â†“
performUpdate
  â†“
render()
</code></pre>
<hr>
<h2 id="å…­ä¸ºä»€ä¹ˆ-lit-ä¸éœ€è¦ä¾èµ–æ”¶é›†">å…­ã€ä¸ºä»€ä¹ˆ Lit ä¸éœ€è¦ä¾èµ–æ”¶é›†ï¼Ÿ</h2>
<p>ç­”æ¡ˆéå¸¸å…³é”®ï¼š</p>
<blockquote>
<p><strong>å› ä¸º lit-html å·²ç»çŸ¥é“â€œå“ªé‡Œä¼šå˜â€</strong></p>
</blockquote>
<p>åœ¨å‰ä¸€ç¯‡ Part æ›´æ–°æœºåˆ¶ä¸­è®²è¿‡ï¼š</p>
<ul>
<li>DOM æ›´æ–°æ˜¯ç”± Part ç²¾ç¡®å®šä½çš„</li>
<li>render() æ¯æ¬¡éƒ½ä¼šé‡æ–°æ‰§è¡Œ</li>
<li>ä½†æ›´æ–°åªå‘ç”Ÿåœ¨è¡¨è¾¾å¼å¯¹åº”ä½ç½®</li>
</ul>
<p>å› æ­¤ï¼š</p>
<blockquote>
<p><strong>Lit ä¸éœ€è¦çŸ¥é“â€œä½ åœ¨æ¨¡æ¿ä¸­ç”¨äº†å“ªäº›å±æ€§â€</strong></p>
</blockquote>
<p>å®ƒåªéœ€è¦ä¿è¯ï¼š</p>
<ul>
<li>å±æ€§å˜åŒ– â†’ render æ‰§è¡Œ</li>
<li>render æ‰§è¡Œ â†’ Part ç²¾ç¡®æ›´æ–°</li>
</ul>
<hr>
<h2 id="ä¸ƒshouldupdatelit-ç»™ä½ çš„å”¯ä¸€åˆ¤æ–­ç‚¹">ä¸ƒã€shouldUpdateï¼šLit ç»™ä½ çš„â€œå”¯ä¸€åˆ¤æ–­ç‚¹â€</h2>
<pre><code class="language-ts">shouldUpdate(changedProperties) {
  return true
}
</code></pre>
<ul>
<li><code>changedProperties</code> æ˜¯ä¸€ä¸ª Map</li>
<li>è®°å½•äº†å“ªäº›å±æ€§å‘ç”Ÿäº†å˜åŒ–</li>
</ul>
<p>ä½ å¯ä»¥éå¸¸æ˜ç¡®åœ°æ§åˆ¶ï¼š</p>
<pre><code class="language-ts">shouldUpdate(changed) {
  return changed.has('count')
}
</code></pre>
<p>è¿™æ¯” Vue/React çš„ä¾èµ–ä¼˜åŒ–<strong>æ›´æ˜¾å¼ã€æ›´å¯æ§</strong>ã€‚</p>
<hr>
<h2 id="å…«lit-çš„ç”Ÿå‘½å‘¨æœŸä¸ºä»€ä¹ˆè¿™ä¹ˆå°‘">å…«ã€Lit çš„ç”Ÿå‘½å‘¨æœŸä¸ºä»€ä¹ˆè¿™ä¹ˆå°‘ï¼Ÿ</h2>
<p>Lit çš„ç”Ÿå‘½å‘¨æœŸå‡ ä¹å®Œå…¨å›´ç»•ã€Œæ›´æ–°ã€å±•å¼€ï¼š</p>
<pre><code class="language-ts">connectedCallback()
shouldUpdate()
willUpdate()
render()
updated()
</code></pre>
<p>æ²¡æœ‰ï¼š</p>
<ul>
<li>computed</li>
<li>watch</li>
<li>effect</li>
<li>memo</li>
</ul>
<p>å› ä¸ºï¼š</p>
<blockquote>
<p><strong>Lit ä¸è¯•å›¾ç®¡ç†ä½ çš„çŠ¶æ€<br>
å®ƒåªè´Ÿè´£æŠŠçŠ¶æ€å˜åŒ–â€œåæ˜ åˆ° DOMâ€</strong></p>
</blockquote>
<hr>
<h2 id="ä¹å’Œ-vue--react-çš„å“åº”å¼ç³»ç»Ÿå¯¹æ¯”">ä¹ã€å’Œ Vue / React çš„å“åº”å¼ç³»ç»Ÿå¯¹æ¯”</h2>
<h3 id="91-æ¶æ„å±‚é¢å¯¹æ¯”">9.1 æ¶æ„å±‚é¢å¯¹æ¯”</h3>
<table>
<thead>
<tr>
<th>ç»´åº¦</th>
<th>Lit</th>
<th>Vue</th>
<th>React</th>
</tr>
</thead>
<tbody>
<tr>
<td>å“åº”å¼åŸºç¡€</td>
<td>getter/setter</td>
<td>Proxy</td>
<td>setState</td>
</tr>
<tr>
<td>ä¾èµ–æ”¶é›†</td>
<td>âŒ</td>
<td>âœ…</td>
<td>âŒ</td>
</tr>
<tr>
<td>æ›´æ–°è°ƒåº¦</td>
<td>microtask</td>
<td>scheduler</td>
<td>scheduler</td>
</tr>
<tr>
<td>DOM æ›´æ–°</td>
<td>å®šç‚¹ Part</td>
<td>Diff</td>
<td>Diff</td>
</tr>
<tr>
<td>ç³»ç»Ÿå¤æ‚åº¦</td>
<td>æä½</td>
<td>é«˜</td>
<td>ä¸­</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="92-ä¸ºä»€ä¹ˆ-lit-å¯ä»¥è¿™ä¹ˆç®€å•">9.2 ä¸ºä»€ä¹ˆ Lit å¯ä»¥è¿™ä¹ˆâ€œç®€å•â€</h3>
<p>å› ä¸º Lit <strong>æ”¾å¼ƒäº†ä¸‰ä»¶äº‹</strong>ï¼š</p>
<ol>
<li>è‡ªåŠ¨ä¾èµ–è¿½è¸ª</li>
<li>çŠ¶æ€æ´¾ç”Ÿï¼ˆcomputedï¼‰</li>
<li>è·¨ç»„ä»¶çŠ¶æ€ç®¡ç†</li>
</ol>
<p>è¿™äº›éƒ½ä¸æ˜¯ç»„ä»¶åº•å±‚å¿…é¡»è§£å†³çš„é—®é¢˜ã€‚</p>
<hr>
<h2 id="ålit-å“åº”å¼ç³»ç»Ÿçš„é€‚ç”¨è¾¹ç•Œ">åã€Lit å“åº”å¼ç³»ç»Ÿçš„é€‚ç”¨è¾¹ç•Œ</h2>
<h3 id="101-éå¸¸é€‚åˆçš„åœºæ™¯">10.1 éå¸¸é€‚åˆçš„åœºæ™¯</h3>
<ul>
<li>UI ç»„ä»¶</li>
<li>Design System</li>
<li>è·¨æ¡†æ¶ç»„ä»¶</li>
<li>å¾®å‰ç«¯å­æ¨¡å—</li>
</ul>
<hr>
<h3 id="102-ä¸é€‚åˆçš„åœºæ™¯">10.2 ä¸é€‚åˆçš„åœºæ™¯</h3>
<ul>
<li>å¤§å‹åº”ç”¨çŠ¶æ€ç®¡ç†</li>
<li>å¤æ‚çŠ¶æ€æ´¾ç”Ÿé€»è¾‘</li>
<li>éœ€è¦å¤§é‡ computed / watch çš„ä¸šåŠ¡</li>
</ul>
<p>Lit çš„å“²å­¦æ˜¯ï¼š</p>
<blockquote>
<p><strong>æŠŠâ€œçŠ¶æ€å¤æ‚åº¦â€äº¤ç»™ä½¿ç”¨è€…æˆ–ä¸Šå±‚æ¶æ„</strong></p>
</blockquote>
<hr>
<h2 id="åä¸€a-very-important-æ€»ç»“">åä¸€ã€A Very Important æ€»ç»“</h2>
<blockquote>
<p><strong>Lit çš„å“åº”å¼ç³»ç»Ÿä¸æ˜¯â€œå¼±â€ï¼Œ<br>
è€Œæ˜¯â€œç›®æ ‡éå¸¸æ˜ç¡®â€</strong></p>
</blockquote>
<p>å®ƒåªåšä¸‰ä»¶äº‹ï¼š</p>
<ol>
<li>ç›‘å¬å±æ€§å˜åŒ–</li>
<li>åˆå¹¶æ›´æ–°</li>
<li>è§¦å‘ render</li>
</ol>
<p>è€Œå‰©ä¸‹çš„ä¸€åˆ‡ï¼Œéƒ½äº¤ç»™ï¼š</p>
<ul>
<li>JavaScript æœ¬èº«</li>
<li>æµè§ˆå™¨æœ¬èº«</li>
<li>åº”ç”¨æ¶æ„æœ¬èº«</li>
</ul>
<hr>
<h2 id="åäºŒæœ€å">åäºŒã€æœ€å</h2>
<p>åˆ°ç°åœ¨åº”è¯¥å¯ä»¥å·²ç»å®Œæ•´ç†è§£äº†ï¼š</p>
<ol>
<li>Lit çš„æ•´ä½“æ¶æ„</li>
<li>ä¸ºä»€ä¹ˆä¸éœ€è¦ Virtual DOM</li>
<li>lit-html çš„ Part æ›´æ–°æœºåˆ¶</li>
<li>ReactiveElement çš„å“åº”å¼è®¾è®¡</li>
</ol>
<p>å¦‚æœæŠŠè¿™äº›æ‹¼èµ·æ¥ï¼Œyou ä¼šå‘ç°ï¼š</p>
<blockquote>
<p><strong>Lit æ˜¯ä¸€ä¸ªâ€œæç«¯ç›¸ä¿¡æµè§ˆå™¨â€çš„ä½“ç³»</strong></p>
</blockquote>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-23 10:33">2025-12-23 10:33</span>&nbsp;
<a href="https://www.cnblogs.com/zxlh1529">å¹¼å„¿å›­æŠ€æœ¯å®¶</a>&nbsp;
é˜…è¯»(<span id="post_view_count">4</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19370810);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19370810', targetLink: 'https://www.cnblogs.com/zxlh1529/p/19370810', title: 'Lit çš„å“åº”å¼ç³»ç»Ÿä¸ºä»€ä¹ˆè¿™ä¹ˆè½»ï¼Ÿâ€”â€”ä» ReactiveElement çš„è®¾è®¡è¯´èµ·' })">ä¸¾æŠ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ä¸€æ¬¾è½»é‡çº§ WinForm å¼€æºæ§ä»¶åº“ï¼Œè®©è€ç•Œé¢ç§’å˜é«˜é¢œå€¼ ]]></title>
    <link>https://www.cnblogs.com/1312mn/p/19201142</link>
    <guid>3926d8443664d039008b88440c476ac3</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/1312mn/p/19201142" title="å‘å¸ƒäº 2025-12-23 10:25">
    <span role="heading" aria-level="2">ä¸€æ¬¾è½»é‡çº§ WinForm å¼€æºæ§ä»¶åº“ï¼Œè®©è€ç•Œé¢ç§’å˜é«˜é¢œå€¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="å‰è¨€">å‰è¨€</h2>
<p>ç”¨æˆ·ç•Œé¢çš„ç¾è§‚ä¸æ˜“ç”¨æ€§å§‹ç»ˆæ˜¯å¼€å‘å…³æ³¨çš„ç„¦ç‚¹ã€‚éšç€æŠ€æœ¯çš„ä¸æ–­è¿›æ­¥ï¼Œä¼ ç»Ÿçš„WinFormæ§ä»¶è™½ç„¶ç¨³å®šå¯é ï¼Œä½†åœ¨è§†è§‰æ•ˆæœä¸Šå¾€å¾€éš¾ä»¥æ»¡è¶³ç°ä»£ç”¨æˆ·å¯¹ç¾å­¦çš„è¿½æ±‚ã€‚</p>
<p>æœ¬æ–‡å°†ä»‹ç»ä¸€ä¸ªåŸºäº WinForm çš„è‡ªç»˜æ§ä»¶é¡¹ç›®ï¼Œæ‘†è„±åŸç”Ÿ WinForm æ§ä»¶çš„æ–¹æ–¹æ­£æ­£çš„æŒ‰é’®ã€ç°ç™½å•è°ƒçš„è¾“å…¥æ¡†ã€‚</p>
<h2 id="é¡¹ç›®ä»‹ç»">é¡¹ç›®ä»‹ç»</h2>
<p>ä¸€ä¸ªå¼€æºçš„WinFormè‡ªç»˜æ§ä»¶åº“ï¼Œé€šè¿‡è‡ªå®šä¹‰ç»˜åˆ¶æŠ€æœ¯ï¼Œä¸º WinForm åº”ç”¨ç¨‹åºæä¾›æ›´åŠ ä¸°å¯Œã€çµæ´»çš„ç•Œé¢å…ƒç´ ã€‚</p>
<p>é¡¹ç›®ä¸ä»…ç»§æ‰¿äº†WinFormæ§ä»¶çš„ç¨³å®šæ€§ä¸æ˜“ç”¨æ€§ï¼Œæ›´åœ¨è§†è§‰æ•ˆæœä¸Šå®ç°äº†è´¨çš„é£è·ƒï¼Œè®©WinFormåº”ç”¨ä¹Ÿèƒ½æ‹¥æœ‰åª²ç¾ç°ä»£UIæ¡†æ¶çš„è§†è§‰ä½“éªŒã€‚</p>
<h2 id="é¡¹ç›®åŠŸèƒ½">é¡¹ç›®åŠŸèƒ½</h2>
<p>é¡¹ç›®æ¶µç›–å¤šç§å¸¸ç”¨æ§ä»¶çš„è‡ªç»˜å®ç°ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºæŒ‰é’®ï¼ˆButtonï¼‰ã€é¢æ¿ï¼ˆPanelï¼‰ã€æ–‡æœ¬æ¡†ï¼ˆTextBoxï¼‰ç­‰ã€‚å…¶ä¸­ï¼Œæœ€ä¸ºå¼•äººæ³¨ç›®çš„å½“å±PPFlodPanelæ§ä»¶ï¼Œè¯¥æ§ä»¶åœ¨åŸæœ‰Panelçš„åŸºç¡€ä¸Šå¢åŠ äº†åŠ¨ç”»æ•ˆæœï¼Œä½¿å¾—é¢æ¿çš„å±•å¼€ä¸æŠ˜å è¿‡ç¨‹æ›´åŠ æµç•…è‡ªç„¶ï¼Œæå¤§åœ°æå‡ç”¨æˆ·ç•Œé¢çš„äº¤äº’ä½“éªŒã€‚</p>
<p>å¦å¤–ï¼ŒPPSkinè¿˜æ”¯æŒæ§ä»¶çš„çš®è‚¤å®šåˆ¶ï¼Œå¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚è½»æ¾æ›´æ¢æ§ä»¶çš„å¤–è§‚é£æ ¼ï¼Œå®ç°ç•Œé¢ä¸ªæ€§åŒ–ã€‚</p>
<h2 id="é¡¹ç›®ç‰¹ç‚¹">é¡¹ç›®ç‰¹ç‚¹</h2>
<p><strong>é«˜åº¦å¯å®šåˆ¶æ€§</strong></p>
<p>å¯¹æ§ä»¶çš„æ¯ä¸€ä¸ªç»†èŠ‚è¿›è¡Œå®šåˆ¶ï¼Œä»é¢œè‰²ã€å­—ä½“åˆ°è¾¹æ¡†æ ·å¼ï¼Œå‡å¯æ ¹æ®å®é™…éœ€æ±‚è¿›è¡Œè°ƒæ•´ã€‚</p>
<p><strong>åŠ¨ç”»æ•ˆæœä¸°å¯Œ</strong></p>
<p>é€šè¿‡å¼•å…¥åŠ¨ç”»æœºåˆ¶ï¼ŒPPSkinçš„æ§ä»¶åœ¨çŠ¶æ€å˜åŒ–æ—¶èƒ½å¤Ÿå±•ç°å‡ºæµç•…çš„è¿‡æ¸¡æ•ˆæœï¼Œå¢å¼ºäº†ç”¨æˆ·ç•Œé¢çš„åŠ¨æ€ç¾æ„Ÿã€‚</p>
<h2 id="é¡¹ç›®æŠ€æœ¯">é¡¹ç›®æŠ€æœ¯</h2>
<p>é€šè¿‡é‡å†™æ§ä»¶çš„OnPaintæ–¹æ³•ï¼Œä½¿ç”¨GDI+å›¾å½¢åº“è¿›è¡Œæ§ä»¶çš„ç»˜åˆ¶å·¥ä½œã€‚å¯ä»¥ç²¾ç¡®æ§åˆ¶æ¯ä¸€ä¸ªåƒç´ çš„ç»˜åˆ¶ï¼Œä»è€Œå®ç°é«˜åº¦å®šåˆ¶åŒ–çš„ç•Œé¢æ•ˆæœã€‚ä¸ºäº†å®ç°åŠ¨ç”»æ•ˆæœï¼ŒPè¿˜å¼•å…¥äº†å®šæ—¶å™¨ï¼ˆTimerï¼‰æœºåˆ¶ï¼Œé€šè¿‡å®šæ—¶è§¦å‘é‡ç»˜äº‹ä»¶æ¥æ›´æ–°æ§ä»¶çš„æ˜¾ç¤ºçŠ¶æ€ï¼Œè¥é€ å‡ºæµç•…çš„åŠ¨ç”»æ•ˆæœã€‚</p>
<pre><code class="language-csharp">private void Timer_bar_Tick(object sender, EventArgs e)
{
    ledBar1.Text = DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss.fff");
    Random random = new Random();
    ledBar1.NumColor = Color.FromArgb(random.Next(0, 255), random.Next(0, 255), random.Next(0, 255));

    foreach (Control c in tabPage3.Controls)
    {
        if (c is PPVScrollBarExt)
        {
            (c as PPVScrollBarExt).Value += 1;
            if ((c as PPVScrollBarExt).Value == ((c as PPVScrollBarExt).Maximum - (c as PPVScrollBarExt).VisibleValue))
            {
                (c as PPVScrollBarExt).Value = (c as PPVScrollBarExt).Minimum;
            }
        }
        if (c is PPHScrollBarExt)
        {
            (c as PPHScrollBarExt).Value += 1;
            if ((c as PPHScrollBarExt).Value == ((c as PPHScrollBarExt).Maximum - (c as PPHScrollBarExt).VisibleValue))
            {
                (c as PPHScrollBarExt).Value = (c as PPHScrollBarExt).Minimum;
            }
        }
        if (c is PPRoundProgressBar)
        {
            (c as PPRoundProgressBar).Value += 1;
            if ((c as PPRoundProgressBar).Value == (c as PPRoundProgressBar).Maximum)
            {
                (c as PPRoundProgressBar).Value = (c as PPRoundProgressBar).Minimum;
            }
        }

        if (c is PPProgressBar)
        {
            (c as PPProgressBar).Value += 1;
            if ((c as PPProgressBar).Value == (c as PPProgressBar).Maximum)
            {
                (c as PPProgressBar).Value = (c as PPProgressBar).Minimum;
            }
        }

        if (c is PPTrackBar)
        {
            (c as PPTrackBar).Value += 1;
            if ((c as PPTrackBar).Value == (c as PPTrackBar).MaxValue)
            {
                (c as PPTrackBar).Value = (c as PPTrackBar).MinValue;
            }
        }

        if (c is PPWaveProgressBar)
        {
            (c as PPWaveProgressBar).Value += 1;
            if ((c as PPWaveProgressBar).Value == (c as PPWaveProgressBar).Maximum)
            {
                (c as PPWaveProgressBar).Value = (c as PPWaveProgressBar).Minimum;
            }
        }
    }
}
</code></pre>
<h2 id="é¡¹ç›®æ•ˆæœ">é¡¹ç›®æ•ˆæœ</h2>
<p>å½“ç”¨æˆ·ç‚¹å‡»å±•å¼€æˆ–æŠ˜å æŒ‰é’®æ—¶ï¼Œé¢æ¿ä¼šä»¥ä¸€ç§ä¼˜é›…çš„æ–¹å¼é€æ¸å±•å¼€æˆ–æ”¶ç¼©ï¼Œæ•´ä¸ªè¿‡ç¨‹æµç•…æ— å¡é¡¿ï¼Œç»™äººä¸€ç§æ„‰æ‚¦çš„è§†è§‰ä½“éªŒã€‚</p>
<p><img src="https://img2024.cnblogs.com/blog/576536/202511/576536-20251107232412388-867672129.png" width="50%" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p><img src="https://img2024.cnblogs.com/blog/576536/202511/576536-20251107232401517-1560501345.png" width="50%" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p><img src="https://img2024.cnblogs.com/blog/576536/202511/576536-20251107232346894-1312855456.png" width="50%" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p><img src="https://img2024.cnblogs.com/blog/576536/202511/576536-20251107232339716-975949764.png" width="50%" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p><img src="https://img2024.cnblogs.com/blog/576536/202511/576536-20251107232330102-1359569775.png" width="50%" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p><img src="https://img2024.cnblogs.com/blog/576536/202511/576536-20251107232319426-192110568.png" width="50%" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p><img src="https://img2024.cnblogs.com/blog/576536/202511/576536-20251107232309764-645145512.png" width="50%" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p><img src="https://img2024.cnblogs.com/blog/576536/202511/576536-20251107232249108-1032944892.png" width="50%" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p><img src="https://img2024.cnblogs.com/blog/576536/202511/576536-20251107232301863-513407702.png" width="50%" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<h2 id="é¡¹ç›®æºç ">é¡¹ç›®æºç </h2>
<p>æºç ä¸­åŒ…å«è¯¦ç»†çš„æ³¨é‡Šä¸ç¤ºä¾‹ä»£ç ï¼Œæ–¹ä¾¿å¤§å®¶å¿«é€Ÿä¸Šæ‰‹å¹¶ç†è§£é¡¹ç›®çš„å®ç°åŸç†ã€‚</p>
<p>Giteeï¼š<a href="https://gitee.com/ppcc1596/PPSkin" target="_blank" rel="noopener nofollow">https://gitee.com/ppcc1596/PPSkin</a></p>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>åŸºäºWinFormçš„è‡ªç»˜æ§ä»¶åº“ï¼Œä»¥å…¶é«˜åº¦å¯å®šåˆ¶æ€§ã€ä¸°å¯Œçš„åŠ¨ç”»æ•ˆæœä»¥åŠè‰¯å¥½çš„å…¼å®¹æ€§ã€‚é€šè¿‡è‡ªå®šä¹‰ç»˜åˆ¶ï¼ŒæˆåŠŸæ‰“ç ´äº†ä¼ ç»ŸWinFormæ§ä»¶åœ¨è§†è§‰æ•ˆæœä¸Šçš„å±€é™ï¼Œä¸ºWinFormåº”ç”¨ç¨‹åºå¸¦æ¥äº†å…¨æ–°çš„ç•Œé¢ä½“éªŒã€‚</p>
<h2 id="å…³é”®è¯">å…³é”®è¯</h2>
<p>WinFormã€è‡ªç»˜æ§ä»¶ã€åŠ¨ç”»æ•ˆæœã€çš®è‚¤å®šåˆ¶ã€å¼€æºé¡¹ç›®ã€GDI+ã€å…¼å®¹æ€§ã€C#ã€.NET Frameworkã€UIå®šåˆ¶ã€è½»é‡çº§</p>
<h2 id="æœ€å">æœ€å</h2>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¸å¦¨ç‚¹ä¸ªèµæ”¯æŒä¸€ä¸‹ï¼ä½ çš„æ”¯æŒæ˜¯æˆ‘ç»§ç»­åˆ†äº«çŸ¥è¯†çš„åŠ¨åŠ›ã€‚å¦‚æœæœ‰ä»»ä½•ç–‘é—®æˆ–éœ€è¦è¿›ä¸€æ­¥çš„å¸®åŠ©ï¼Œæ¬¢è¿éšæ—¶ç•™è¨€ã€‚</p>
<p>ä¹Ÿå¯ä»¥åŠ å…¥å¾®ä¿¡å…¬ä¼—å·[DotNetæŠ€æœ¯åŒ ] ç¤¾åŒºï¼Œä¸å…¶ä»–çƒ­çˆ±æŠ€æœ¯çš„åŒè¡Œä¸€èµ·äº¤æµå¿ƒå¾—ï¼Œå…±åŒæˆé•¿ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/576536/202505/576536-20250527195524293-1794896295.png" width="50%" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.0006944444444444445" data-date-updated="2025-12-23 10:26">2025-12-23 10:25</span>&nbsp;
<a href="https://www.cnblogs.com/1312mn">å°ç ç¼–åŒ </a>&nbsp;
é˜…è¯»(<span id="post_view_count">45</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19201142);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19201142', targetLink: 'https://www.cnblogs.com/1312mn/p/19201142', title: 'ä¸€æ¬¾è½»é‡çº§ WinForm å¼€æºæ§ä»¶åº“ï¼Œè®©è€ç•Œé¢ç§’å˜é«˜é¢œå€¼' })">ä¸¾æŠ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ é«˜å¹¶å‘ä¸‹å¦‚ä½•é˜²æ­¢é‡å¤æäº¤è®¢å•ï¼Ÿ ]]></title>
    <link>https://www.cnblogs.com/12lisu/p/19385452</link>
    <guid>609f99fec6caf5bfcd4bfda848352fe1</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/12lisu/p/19385452" title="å‘å¸ƒäº 2025-12-23 10:09">
    <span role="heading" aria-level="2">é«˜å¹¶å‘ä¸‹å¦‚ä½•é˜²æ­¢é‡å¤æäº¤è®¢å•ï¼Ÿ</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="å‰è¨€">å‰è¨€</h2>
<p>å½“ä½ çš„ç”¨æˆ·ç–¯ç‹‚ç‚¹å‡»æäº¤æŒ‰é’®æ—¶ï¼Œä½ çš„ç³»ç»Ÿå‡†å¤‡å¥½è¿æ¥è¿™åœºâ€œè¿å‡»é£æš´â€äº†å—ï¼Ÿ</p>
<p>åœ¨ç”µå•†ç³»ç»Ÿçš„å®æˆ˜ä¸­ï¼Œæˆ‘è§è¿‡å¤ªå¤šå› é‡å¤æäº¤å¯¼è‡´çš„èµ„æŸäº‹æ•…â€”â€”ç”¨æˆ·ä¸€æ¬¡ç‚¹å‡»ï¼Œç³»ç»Ÿå´åˆ›å»ºäº†å¤šä¸ªè®¢å•ï¼Œå¯¼è‡´åº“å­˜é”™ä¹±ã€ç”¨æˆ·é‡å¤æ”¯ä»˜ã€å®¢æœæŠ•è¯‰çˆ†æ£šã€‚</p>
<p>æœ‰äº›å°ä¼™ä¼´åœ¨å·¥ä½œä¸­å¯èƒ½é‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯ï¼šå¤§ä¿ƒæœŸé—´ï¼Œç”¨æˆ·åé¦ˆâ€œæ˜æ˜åªç‚¹äº†ä¸€æ¬¡ï¼Œä¸ºä»€ä¹ˆæ‰£äº†ä¸¤æ¬¡æ¬¾ï¼Ÿâ€</p>
<p>å¼€å‘åŒå­¦æŸ¥äº†åŠå¤©æ—¥å¿—ï¼Œå‘ç°åŒä¸€ä¸ªç”¨æˆ·è¯·æ±‚åœ¨æ¯«ç§’çº§å†…çœŸçš„åˆ°è¾¾äº†æœåŠ¡å™¨ä¸¤æ¬¡ã€‚</p>
<p>ä»Šå¤©è¿™ç¯‡æ–‡ç« å°±è·Ÿå¤§å®¶èŠèŠé«˜å¹¶å‘ä¸‹é˜²æ­¢é‡å¤æäº¤è®¢å•ï¼Œå¸Œæœ›å¯¹ä½ ä¼šæœ‰æ‰€å¸®åŠ©ã€‚</p>
<h2 id="01-ä¸ºä»€ä¹ˆä¼šé‡å¤æäº¤">01 ä¸ºä»€ä¹ˆä¼šé‡å¤æäº¤ï¼Ÿ</h2>
<p>åœ¨æ·±å…¥è§£å†³æ–¹æ¡ˆå‰ï¼Œæˆ‘ä»¬å¿…é¡»ææ¸…æ¥šé‡å¤æäº¤æ˜¯å¦‚ä½•å‘ç”Ÿçš„ã€‚</p>
<p>å¸¸è§çš„åœºæ™¯æœ‰ï¼š</p>
<ol>
<li><strong>ç”¨æˆ·æ— æ„è¯†é‡å¤ç‚¹å‡»</strong>ï¼šç½‘ç»œå»¶è¿Ÿæ—¶ï¼Œç”¨æˆ·å¿ƒæ€¥å¤šæ¬¡ç‚¹å‡»æäº¤æŒ‰é’®</li>
<li><strong>å‰ç«¯é˜²æŠ–å¤±æ•ˆ</strong>ï¼šå‰ç«¯åšäº†é˜²æŠ–å¤„ç†ï¼Œä½†è¢«ç»•è¿‡æˆ–é…ç½®ä¸å½“</li>
<li><strong>ç½‘ç»œè¶…æ—¶é‡è¯•</strong>ï¼šè¯·æ±‚è¶…æ—¶åï¼Œå®¢æˆ·ç«¯æˆ–ç½‘å…³è‡ªåŠ¨é‡è¯•</li>
<li><strong>æ¶æ„æ”»å‡»</strong>ï¼šç«äº‰å¯¹æ‰‹æˆ–é»‘å®¢æ•…æ„é‡å¤æäº¤</li>
<li><strong>åç«¯å¤„ç†è¶…æ—¶</strong>ï¼šç¬¬ä¸€ä¸ªè¯·æ±‚å¤„ç†æ…¢ï¼Œå®¢æˆ·ç«¯ä»¥ä¸ºå¤±è´¥åˆå‘ä¸€æ¬¡</li>
</ol>
<p>æ¥çœ‹ä¸€ä¸ªå…¸å‹çš„ç”¨æˆ·æ“ä½œæµç¨‹ï¼Œä»¥åŠå…¶ä¸­å¯èƒ½å‘ç”Ÿé‡å¤çš„å„ä¸ªç¯èŠ‚ï¼š</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2238006/202512/2238006-20251223100838751-1951210640.png" class="lazyload"></p>
<p>ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œä»ç”¨æˆ·ç‚¹å‡»åˆ°è®¢å•è½åº“ï¼Œå‡ ä¹æ¯ä¸ªç¯èŠ‚éƒ½å¯èƒ½æˆä¸ºé‡å¤æäº¤çš„â€œæ¡ˆå‘ç°åœºâ€ã€‚</p>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬å°±é’ˆå¯¹è¿™äº›ç¯èŠ‚ï¼Œå±‚å±‚å¸ƒé˜²ã€‚</p>
<h2 id="02-ç¬¬ä¸€é“é˜²çº¿å‰ç«¯é˜²æŠ–ä¸æŒ‰é’®æ§åˆ¶">02 ç¬¬ä¸€é“é˜²çº¿ï¼šå‰ç«¯é˜²æŠ–ä¸æŒ‰é’®æ§åˆ¶</h2>
<p>è¿™æ˜¯æœ€ç›´è§‚ã€æˆæœ¬æœ€ä½çš„é˜²æŠ¤æªæ–½ã€‚</p>
<p>åŸåˆ™æ˜¯ï¼š<strong>åœ¨ç”¨æˆ·äº¤äº’å±‚é¢å°½é‡å‡å°‘æ— æ•ˆè¯·æ±‚</strong>ã€‚</p>
<h3 id="21-æŒ‰é’®çŠ¶æ€æ§åˆ¶">2.1 æŒ‰é’®çŠ¶æ€æ§åˆ¶</h3>
<pre><code class="language-javascript">// å‰ç«¯é˜²æŠ–å®ç°ç¤ºä¾‹ï¼ˆVue + Element UIï¼‰
&lt;template&gt;
  &lt;el-button 
    :loading="submitting" 
    :disabled="submitting"
    @click="handleSubmitOrder"
  &gt;
    {{ submitting ? 'æäº¤ä¸­...' : 'æäº¤è®¢å•' }}
  &lt;/el-button&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      submitting: false,
      submitToken: null // ç”¨äºæ ‡è¯†å½“å‰æäº¤çš„token
    }
  },
  methods: {
    async handleSubmitOrder() {
      if (this.submitting) {
        this.$message.warning('æ­£åœ¨æäº¤ï¼Œè¯·å‹¿é‡å¤ç‚¹å‡»')
        return
      }
      
      this.submitting = true
      
      try {
        // ç”Ÿæˆå”¯ä¸€tokenï¼Œç”¨äºåç«¯å¹‚ç­‰æ€§æ ¡éªŒ
        this.submitToken = this.generateSubmitToken()
        
        const result = await this.$api.order.submit({
          orderData: this.orderData,
          submitToken: this.submitToken
        })
        
        this.$message.success('è®¢å•æäº¤æˆåŠŸ')
        this.$router.push(`/order/detail/${result.orderId}`)
      } catch (error) {
        this.$message.error(`æäº¤å¤±è´¥: ${error.message}`)
        this.submitting = false // å¤±è´¥åé‡ç½®çŠ¶æ€
      }
    },
    
    generateSubmitToken() {
      // ç”Ÿæˆå”¯ä¸€æ ‡è¯†ï¼Œå¯ä»¥ç”¨UUIDæˆ–æ—¶é—´æˆ³+éšæœºæ•°
      return `order_submit_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`
    }
  }
}
&lt;/script&gt;
</code></pre>
<h3 id="22-è¯·æ±‚é˜²æŠ–ä¸æ‹¦æˆª">2.2 è¯·æ±‚é˜²æŠ–ä¸æ‹¦æˆª</h3>
<pre><code class="language-javascript">// ä½¿ç”¨axiosæ‹¦æˆªå™¨å®ç°è¯·æ±‚é˜²æŠ–
import axios from 'axios'

// å­˜å‚¨æ­£åœ¨è¿›è¡Œçš„è¯·æ±‚
const pendingRequests = new Map()

// ç”Ÿæˆè¯·æ±‚key
const generateReqKey = (config) =&gt; {
  const { method, url, params, data } = config
  return [method, url, JSON.stringify(params), JSON.stringify(data)].join('&amp;')
}

// è¯·æ±‚æ‹¦æˆªå™¨
axios.interceptors.request.use(config =&gt; {
  const key = generateReqKey(config)
  
  if (pendingRequests.has(key)) {
    // è¯·æ±‚å·²å­˜åœ¨ï¼Œå–æ¶ˆå½“å‰è¯·æ±‚
    config.cancelToken = new axios.CancelToken(cancel =&gt; {
      cancel(`é‡å¤è¯·æ±‚å·²è¢«æ‹¦æˆª: ${key}`)
    })
  } else {
    // æ–°è¯·æ±‚ï¼Œæ·»åŠ åˆ°pendingä¸­
    pendingRequests.set(key, config)
  }
  
  return config
})

// å“åº”æ‹¦æˆªå™¨
axios.interceptors.response.use(
  response =&gt; {
    const key = generateReqKey(response.config)
    pendingRequests.delete(key)
    return response
  },
  error =&gt; {
    if (axios.isCancel(error)) {
      console.log('è¯·æ±‚è¢«å–æ¶ˆ:', error.message)
      return Promise.reject(error)
    }
    
    // é”™è¯¯å¤„ç†å®Œæˆåï¼Œä¹Ÿè¦ä»pendingä¸­ç§»é™¤
    if (error.config) {
      const key = generateReqKey(error.config)
      pendingRequests.delete(key)
    }
    
    return Promise.reject(error)
  }
)
</code></pre>
<p><strong>å‰ç«¯é˜²æŠ¤å°ç»“</strong>ï¼š</p>
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šå®ç°ç®€å•ï¼Œèƒ½æ‹¦æˆªå¤§éƒ¨åˆ†ç”¨æˆ·æ— æ„è¯†çš„é‡å¤ç‚¹å‡»</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šå¯è¢«ç»•è¿‡ï¼ˆå¦‚ç›´æ¥è°ƒç”¨APIã€ç¦ç”¨JSã€ä½¿ç”¨Postmanç­‰å·¥å…·ï¼‰</li>
<li><strong>ç»“è®º</strong>ï¼šå‰ç«¯é˜²æŠ¤æ˜¯<strong>å¿…è¦ä½†ä¸å……åˆ†</strong>çš„æªæ–½ï¼Œç»ä¸èƒ½ä½œä¸ºå”¯ä¸€é˜²çº¿</li>
</ul>
<h2 id="03-ç¬¬äºŒé“é˜²çº¿åç«¯æ¥å£å¹‚ç­‰æ€§è®¾è®¡">03 ç¬¬äºŒé“é˜²çº¿ï¼šåç«¯æ¥å£å¹‚ç­‰æ€§è®¾è®¡</h2>
<p>å¹‚ç­‰æ€§æ˜¯è§£å†³é‡å¤æäº¤çš„<strong>æ ¸å¿ƒç†å¿µ</strong>ã€‚</p>
<p>æ‰€è°“å¹‚ç­‰ï¼Œå°±æ˜¯<strong>åŒä¸€ä¸ªæ“ä½œæ‰§è¡Œå¤šæ¬¡çš„ç»“æœä¸æ‰§è¡Œä¸€æ¬¡çš„ç»“æœç›¸åŒ</strong>ã€‚</p>
<h3 id="31-ä»€ä¹ˆæ˜¯å¹‚ç­‰æ€§">3.1 ä»€ä¹ˆæ˜¯å¹‚ç­‰æ€§ï¼Ÿ</h3>
<p>å¯¹äºè®¢å•æäº¤æ¥å£ï¼š</p>
<ul>
<li><strong>å¹‚ç­‰</strong>ï¼šæ— è®ºè°ƒç”¨1æ¬¡è¿˜æ˜¯Næ¬¡ï¼Œéƒ½åªåˆ›å»ºä¸€ä¸ªè®¢å•</li>
<li><strong>éå¹‚ç­‰</strong>ï¼šè°ƒç”¨Næ¬¡å¯èƒ½åˆ›å»ºNä¸ªè®¢å•</li>
</ul>
<h3 id="32-åŸºäºtokençš„å¹‚ç­‰å®ç°">3.2 åŸºäºTokençš„å¹‚ç­‰å®ç°</h3>
<p>è¿™æ˜¯æœ€å¸¸ç”¨çš„å¹‚ç­‰å®ç°æ–¹æ¡ˆï¼Œæµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>å®¢æˆ·ç«¯åœ¨æäº¤å‰ï¼Œå…ˆå‘åç«¯ç”³è¯·ä¸€ä¸ªå”¯ä¸€Token</li>
<li>æäº¤è®¢å•æ—¶æºå¸¦æ­¤Token</li>
<li>æœåŠ¡ç«¯æ£€æŸ¥Tokenæ˜¯å¦å·²ä½¿ç”¨è¿‡</li>
</ol>
<pre><code class="language-java">// å¹‚ç­‰æ€§TokenæœåŠ¡
@Service
public class IdempotentTokenService {
    
    @Autowired
    private RedisTemplate&lt;String, String&gt; redisTemplate;
    
    private static final String IDEMPOTENT_PREFIX = "idempotent:token:";
    private static final long TOKEN_EXPIRE_SECONDS = 300; // Tokenæœ‰æ•ˆæœŸ5åˆ†é’Ÿ
    
    /**
     * ç”Ÿæˆå¹‚ç­‰æ€§Token
     */
    public String generateToken(String userId) {
        String token = UUID.randomUUID().toString();
        String redisKey = IDEMPOTENT_PREFIX + userId + ":" + token;
        
        // å­˜å‚¨Tokenï¼Œè®¾ç½®è¿‡æœŸæ—¶é—´
        redisTemplate.opsForValue().set(
            redisKey, 
            "1", 
            TOKEN_EXPIRE_SECONDS, 
            TimeUnit.SECONDS
        );
        
        return token;
    }
    
    /**
     * æ£€æŸ¥å¹¶æ¶ˆè´¹Token
     * @return true: Tokenæœ‰æ•ˆä¸”æ¶ˆè´¹æˆåŠŸ; false: Tokenæ— æ•ˆæˆ–å·²æ¶ˆè´¹
     */
    public boolean checkAndConsumeToken(String userId, String token) {
        String redisKey = IDEMPOTENT_PREFIX + userId + ":" + token;
        
        // ä½¿ç”¨Luaè„šæœ¬ä¿è¯åŸå­æ€§
        String luaScript = """
            if redis.call('get', KEYS[1]) == '1' then
                redis.call('del', KEYS[1])
                return 1
            else
                return 0
            end
            """;
        
        DefaultRedisScript&lt;Long&gt; redisScript = new DefaultRedisScript&lt;&gt;();
        redisScript.setScriptText(luaScript);
        redisScript.setResultType(Long.class);
        
        Long result = redisTemplate.execute(
            redisScript, 
            Collections.singletonList(redisKey)
        );
        
        return result != null &amp;&amp; result == 1L;
    }
}

// ä½¿ç”¨AOPå®ç°å¹‚ç­‰æ€§æ ¡éªŒ
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface Idempotent {
    String key() default ""; // å¹‚ç­‰é”®ï¼Œæ”¯æŒSpELè¡¨è¾¾å¼
    long expireTime() default 300; // è¿‡æœŸæ—¶é—´ï¼Œç§’
}

@Aspect
@Component
public class IdempotentAspect {
    
    @Autowired
    private RedisTemplate&lt;String, String&gt; redisTemplate;
    
    @Around("@annotation(idempotent)")
    public Object around(ProceedingJoinPoint joinPoint, Idempotent idempotent) throws Throwable {
        // 1. è·å–æ–¹æ³•å‚æ•°
        Object[] args = joinPoint.getArgs();
        MethodSignature signature = (MethodSignature) joinPoint.getSignature();
        Method method = signature.getMethod();
        
        // 2. è§£æå¹‚ç­‰é”®ï¼ˆæ”¯æŒSpELï¼‰
        String keyExpression = idempotent.key();
        String redisKey = parseKey(keyExpression, method, args);
        
        // 3. å°è¯•è·å–åˆ†å¸ƒå¼é”ï¼ˆé˜²æ­¢å¹¶å‘è¯·æ±‚åŒæ—¶é€šè¿‡æ£€æŸ¥ï¼‰
        String lockKey = redisKey + ":lock";
        boolean lockAcquired = false;
        try {
            // å°è¯•åŠ é”
            lockAcquired = redisTemplate.opsForValue()
                .setIfAbsent(lockKey, "1", 10, TimeUnit.SECONDS);
            
            if (!lockAcquired) {
                throw new BusinessException("ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•");
            }
            
            // 4. æ£€æŸ¥Tokenæ˜¯å¦å·²ä½¿ç”¨
            Boolean exists = redisTemplate.hasKey(redisKey);
            if (Boolean.TRUE.equals(exists)) {
                // Tokenå·²ä½¿ç”¨ï¼Œç›´æ¥è¿”å›ä¹‹å‰çš„å¤„ç†ç»“æœï¼ˆè¿™é‡Œéœ€è¦æ ¹æ®å®é™…ä¸šåŠ¡è°ƒæ•´ï¼‰
                throw new BusinessException("è¯·å‹¿é‡å¤æäº¤è®¢å•");
            }
            
            // 5. æ‰§è¡Œä¸šåŠ¡é€»è¾‘
            Object result = joinPoint.proceed();
            
            // 6. æ ‡è®°Tokenå·²ä½¿ç”¨
            redisTemplate.opsForValue().set(
                redisKey, 
                "processed", 
                idempotent.expireTime(), 
                TimeUnit.SECONDS
            );
            
            return result;
            
        } finally {
            // é‡Šæ”¾é”
            if (lockAcquired) {
                redisTemplate.delete(lockKey);
            }
        }
    }
    
    private String parseKey(String expression, Method method, Object[] args) {
        // è¿™é‡Œå®ç°SpELè¡¨è¾¾å¼è§£æï¼Œè·å–å®é™…çš„å¹‚ç­‰é”®
        // ä¾‹å¦‚å¯ä»¥ä»å‚æ•°ä¸­æå–userId+orderToken
        return "parsed:key:from:expression";
    }
}

// åœ¨è®¢å•æäº¤æ¥å£ä¸Šä½¿ç”¨
@RestController
@RequestMapping("/order")
public class OrderController {
    
    @PostMapping("/submit")
    @Idempotent(key = "#request.userId + ':' + #request.submitToken", expireTime = 300)
    public ApiResponse&lt;OrderSubmitResult&gt; submitOrder(@RequestBody OrderSubmitRequest request) {
        // è¿™é‡Œæ˜¯çœŸæ­£çš„è®¢å•åˆ›å»ºé€»è¾‘
        OrderSubmitResult result = orderService.createOrder(request);
        return ApiResponse.success(result);
    }
}
</code></pre>
<h3 id="33-åŸºäºå”¯ä¸€ä¸šåŠ¡æ ‡è¯†çš„å¹‚ç­‰">3.3 åŸºäºå”¯ä¸€ä¸šåŠ¡æ ‡è¯†çš„å¹‚ç­‰</h3>
<p>é™¤äº†Tokenæ–¹æ¡ˆï¼Œè¿˜å¯ä»¥åˆ©ç”¨ä¸šåŠ¡çš„è‡ªç„¶å”¯ä¸€æ€§å®ç°å¹‚ç­‰ï¼š</p>
<pre><code class="language-java">@Service
public class OrderService {
    
    @Autowired
    private OrderMapper orderMapper;
    
    @Transactional
    public OrderSubmitResult createOrder(OrderSubmitRequest request) {
        // æ–¹æ³•1ï¼šå…ˆæŸ¥è¯¢æ˜¯å¦å­˜åœ¨
        Order existingOrder = orderMapper.selectByUniqueKey(
            request.getUserId(), 
            request.getProductId(), 
            request.getSubmitTime()
        );
        
        if (existingOrder != null) {
            // è®¢å•å·²å­˜åœ¨ï¼Œç›´æ¥è¿”å›
            return convertToResult(existingOrder);
        }
        
        // æ–¹æ³•2ï¼šåˆ©ç”¨æ•°æ®åº“å”¯ä¸€çº¦æŸ
        try {
            Order newOrder = buildOrder(request);
            orderMapper.insert(newOrder);
            return convertToResult(newOrder);
        } catch (DuplicateKeyException e) {
            // æ•è·å”¯ä¸€é”®å†²çªå¼‚å¸¸
            log.warn("è®¢å•é‡å¤æäº¤ï¼ŒuniqueKey={}", request.getUniqueKey());
            
            // æŸ¥è¯¢å·²åˆ›å»ºçš„è®¢å•å¹¶è¿”å›
            Order createdOrder = orderMapper.selectByUniqueKey(
                request.getUserId(), 
                request.getProductId(), 
                request.getSubmitTime()
            );
            
            if (createdOrder == null) {
                throw new BusinessException("è®¢å•å¤„ç†å¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•");
            }
            
            return convertToResult(createdOrder);
        }
    }
    
    // è®¢å•è¡¨å¯æ·»åŠ å”¯ä¸€ç´¢å¼•
    // ALTER TABLE t_order ADD UNIQUE KEY uk_user_product_time (user_id, product_id, submit_time);
}
</code></pre>
<p><strong>å¹‚ç­‰æ€§è®¾è®¡å°ç»“</strong>ï¼š</p>
<ul>
<li><strong>Tokenæ–¹æ¡ˆ</strong>ï¼šé€šç”¨æ€§å¼ºï¼Œé€‚åˆå¤§å¤šæ•°åœºæ™¯</li>
<li><strong>ä¸šåŠ¡æ ‡è¯†æ–¹æ¡ˆ</strong>ï¼šæ›´è‡ªç„¶ï¼Œä½†ä¾èµ–ä¸šåŠ¡çš„å¤©ç„¶å”¯ä¸€æ€§</li>
<li><strong>å…³é”®ç‚¹</strong>ï¼šæ‰€æœ‰å¹‚ç­‰æ€§æ£€æŸ¥<strong>å¿…é¡»åœ¨äº‹åŠ¡å¼€å§‹å‰å®Œæˆ</strong>ï¼Œå¦åˆ™å¯èƒ½å¤±æ•ˆ</li>
</ul>
<h2 id="04-ç¬¬ä¸‰é“é˜²çº¿æ•°æ®åº“å±‚é˜²æŠ¤">04 ç¬¬ä¸‰é“é˜²çº¿ï¼šæ•°æ®åº“å±‚é˜²æŠ¤</h2>
<p>æ•°æ®åº“æ˜¯æ•°æ®æŒä¹…åŒ–çš„æœ€åä¸€é“å…³å¡ï¼Œåœ¨è¿™é‡Œè®¾ç½®é˜²æŠ¤è‡³å…³é‡è¦ã€‚</p>
<h3 id="41-å”¯ä¸€çº¦æŸä¸ä¹è§‚é”">4.1 å”¯ä¸€çº¦æŸä¸ä¹è§‚é”</h3>
<pre><code class="language-sql">-- è®¢å•è¡¨è®¾è®¡ç¤ºä¾‹
CREATE TABLE `t_order` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®',
  `order_no` varchar(32) NOT NULL COMMENT 'è®¢å•å·ï¼Œä¸šåŠ¡å”¯ä¸€',
  `user_id` bigint(20) NOT NULL COMMENT 'ç”¨æˆ·ID',
  `product_id` bigint(20) NOT NULL COMMENT 'å•†å“ID',
  `quantity` int(11) NOT NULL COMMENT 'è´­ä¹°æ•°é‡',
  `amount` decimal(10,2) NOT NULL COMMENT 'è®¢å•é‡‘é¢',
  `status` tinyint(4) NOT NULL DEFAULT '1' COMMENT 'è®¢å•çŠ¶æ€ï¼š1-å¾…æ”¯ä»˜ï¼Œ2-å·²æ”¯ä»˜',
  `submit_token` varchar(64) DEFAULT NULL COMMENT 'æäº¤Tokenï¼Œç”¨äºå¹‚ç­‰',
  `version` int(11) NOT NULL DEFAULT '1' COMMENT 'ç‰ˆæœ¬å·ï¼Œç”¨äºä¹è§‚é”',
  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_order_no` (`order_no`), -- è®¢å•å·å”¯ä¸€
  UNIQUE KEY `uk_user_submit_token` (`user_id`, `submit_token`), -- æäº¤Tokenå”¯ä¸€
  UNIQUE KEY `uk_user_product_time` (`user_id`, `product_id`, `create_time`), -- ä¸šåŠ¡ç»´åº¦å”¯ä¸€
  KEY `idx_user_id` (`user_id`),
  KEY `idx_create_time` (`create_time`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='è®¢å•è¡¨';
</code></pre>
<h3 id="42-æ•°æ®åº“å±‚é¢çš„å¹‚ç­‰å®ç°">4.2 æ•°æ®åº“å±‚é¢çš„å¹‚ç­‰å®ç°</h3>
<pre><code class="language-java">// ä½¿ç”¨æ•°æ®åº“äº‹åŠ¡+å”¯ä¸€çº¦æŸä¿è¯æœ€ç»ˆä¸€è‡´æ€§
@Service
public class OrderServiceV2 {
    
    @Autowired
    private OrderMapper orderMapper;
    
    @Autowired
    private IdempotentTokenService tokenService;
    
    @Transactional(rollbackFor = Exception.class)
    public OrderSubmitResult submitOrderWithDBProtection(OrderSubmitRequest request) {
        String userId = request.getUserId();
        String submitToken = request.getSubmitToken();
        
        // 1. æ£€æŸ¥å¹‚ç­‰Tokenï¼ˆåœ¨äº‹åŠ¡å¤–å…ˆæ£€æŸ¥ä¸€æ¬¡ï¼‰
        if (!tokenService.checkAndConsumeToken(userId, submitToken)) {
            throw new BusinessException("è¯·å‹¿é‡å¤æäº¤è®¢å•");
        }
        
        try {
            // 2. ç”Ÿæˆè®¢å•å·ï¼ˆé›ªèŠ±ç®—æ³•ç­‰åˆ†å¸ƒå¼IDç”Ÿæˆå™¨ï¼‰
            String orderNo = generateOrderNo();
            
            // 3. åˆ›å»ºè®¢å•å¯¹è±¡
            Order order = new Order();
            order.setOrderNo(orderNo);
            order.setUserId(userId);
            order.setProductId(request.getProductId());
            order.setQuantity(request.getQuantity());
            order.setAmount(calculateAmount(request));
            order.setSubmitToken(submitToken);
            
            // 4. æ’å…¥è®¢å•ï¼ˆè¿™é‡Œä¾èµ–æ•°æ®åº“å”¯ä¸€çº¦æŸï¼‰
            orderMapper.insert(order);
            
            // 5. æ›´æ–°åº“å­˜ç­‰åç»­æ“ä½œ...
            updateProductStock(request.getProductId(), request.getQuantity());
            
            return new OrderSubmitResult(orderNo, "è®¢å•åˆ›å»ºæˆåŠŸ");
            
        } catch (DuplicateKeyException e) {
            // 6. å¤„ç†å”¯ä¸€çº¦æŸå†²çª
            log.warn("è®¢å•é‡å¤æäº¤ï¼ŒuserId={}, token={}", userId, submitToken);
            
            // æŸ¥è¯¢å·²åˆ›å»ºçš„è®¢å•
            Order existingOrder = orderMapper.selectBySubmitToken(userId, submitToken);
            if (existingOrder != null) {
                return new OrderSubmitResult(
                    existingOrder.getOrderNo(), 
                    "è®¢å•å·²åˆ›å»ºæˆåŠŸï¼Œè¯·å‹¿é‡å¤æäº¤"
                );
            }
            
            // ç†è®ºä¸Šä¸ä¼šèµ°åˆ°è¿™é‡Œï¼Œé™¤éæœ‰æç«¯æƒ…å†µ
            throw new BusinessException("è®¢å•å¤„ç†å¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•");
        }
    }
}
</code></pre>
<h2 id="05-ç¬¬å››é“é˜²çº¿åˆ†å¸ƒå¼é”">05 ç¬¬å››é“é˜²çº¿ï¼šåˆ†å¸ƒå¼é”</h2>
<p>åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œå¤šä¸ªå®ä¾‹å¯èƒ½åŒæ—¶å¤„ç†åŒä¸€ä¸ªè¯·æ±‚ï¼Œéœ€è¦åˆ†å¸ƒå¼é”æ¥ä¿è¯åªæœ‰ä¸€ä¸ªå®ä¾‹æ‰§è¡Œæ ¸å¿ƒé€»è¾‘ã€‚</p>
<h3 id="51-åŸºäºredisçš„åˆ†å¸ƒå¼é”">5.1 åŸºäºRedisçš„åˆ†å¸ƒå¼é”</h3>
<pre><code class="language-java">@Component
public class DistributedLockService {
    
    @Autowired
    private RedissonClient redissonClient;
    
    /**
     * å°è¯•è·å–åˆ†å¸ƒå¼é”
     * @param lockKey é”çš„key
     * @param waitTime ç­‰å¾…æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
     * @param leaseTime æŒæœ‰æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
     * @return é”å¯¹è±¡ï¼Œè·å–å¤±è´¥è¿”å›null
     */
    public RLock tryLock(String lockKey, long waitTime, long leaseTime) {
        RLock lock = redissonClient.getLock(lockKey);
        try {
            boolean acquired = lock.tryLock(waitTime, leaseTime, TimeUnit.MILLISECONDS);
            return acquired ? lock : null;
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
            return null;
        }
    }
    
    /**
     * è®¢å•æäº¤åˆ†å¸ƒå¼é”
     */
    public RLock lockForOrderSubmit(String userId, String submitToken) {
        String lockKey = String.format("order:submit:lock:%s:%s", userId, submitToken);
        return tryLock(lockKey, 100, 5000); // ç­‰å¾…100msï¼Œé”æŒæœ‰5ç§’
    }
}

// åœ¨è®¢å•æœåŠ¡ä¸­ä½¿ç”¨åˆ†å¸ƒå¼é”
@Service
public class OrderServiceV3 {
    
    @Autowired
    private DistributedLockService lockService;
    
    @Autowired
    private OrderMapper orderMapper;
    
    public OrderSubmitResult submitOrderWithDistributedLock(OrderSubmitRequest request) {
        String userId = request.getUserId();
        String submitToken = request.getSubmitToken();
        
        // 1. è·å–åˆ†å¸ƒå¼é”
        RLock lock = lockService.lockForOrderSubmit(userId, submitToken);
        if (lock == null) {
            throw new BusinessException("ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•");
        }
        
        try {
            // 2. æ£€æŸ¥æ˜¯å¦å·²å¤„ç†
            Order existingOrder = orderMapper.selectBySubmitToken(userId, submitToken);
            if (existingOrder != null) {
                return new OrderSubmitResult(
                    existingOrder.getOrderNo(), 
                    "è®¢å•å·²åˆ›å»ºæˆåŠŸï¼Œè¯·å‹¿é‡å¤æäº¤"
                );
            }
            
            // 3. æ‰§è¡Œä¸šåŠ¡é€»è¾‘
            return doCreateOrder(request);
            
        } finally {
            // 4. é‡Šæ”¾é”
            if (lock.isHeldByCurrentThread()) {
                lock.unlock();
            }
        }
    }
    
    private OrderSubmitResult doCreateOrder(OrderSubmitRequest request) {
        // å®é™…çš„è®¢å•åˆ›å»ºé€»è¾‘
        // è¿™é‡Œå·²ç»ä¿è¯äº†åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨å¤„ç†åŒä¸€ä¸ªæäº¤è¯·æ±‚
        // ...
    }
}
</code></pre>
<h3 id="52-åˆ†å¸ƒå¼é”çš„æ³¨æ„äº‹é¡¹">5.2 åˆ†å¸ƒå¼é”çš„æ³¨æ„äº‹é¡¹</h3>
<p>ä½¿ç”¨åˆ†å¸ƒå¼é”æ—¶è¦æ³¨æ„ï¼š</p>
<ol>
<li><strong>é”ç²’åº¦</strong>ï¼šä¸è¦å¤ªç²—ï¼ˆå½±å“æ€§èƒ½ï¼‰ä¹Ÿä¸è¦å¤ªç»†ï¼ˆå¢åŠ å¤æ‚åº¦ï¼‰</li>
<li><strong>é”è¶…æ—¶</strong>ï¼šå¿…é¡»è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´ï¼Œé˜²æ­¢æ­»é”</li>
<li><strong>é”ç»­æœŸ</strong>ï¼šå¯¹äºé•¿æ—¶é—´æ“ä½œï¼Œéœ€è¦å®ç°é”ç»­æœŸæœºåˆ¶</li>
<li><strong>å¯é‡å…¥æ€§</strong>ï¼šåŒä¸€ä¸ªçº¿ç¨‹å¯ä»¥é‡å¤è·å–é”</li>
<li><strong>å®¹é”™æ€§</strong>ï¼šRedisé›†ç¾¤æ•…éšœæ—¶è¦æœ‰é™çº§æ–¹æ¡ˆ</li>
</ol>
<h2 id="06-ç¬¬äº”é“é˜²çº¿å¼‚æ­¥å¤„ç†ä¸æ¶ˆæ¯é˜Ÿåˆ—">06 ç¬¬äº”é“é˜²çº¿ï¼šå¼‚æ­¥å¤„ç†ä¸æ¶ˆæ¯é˜Ÿåˆ—</h2>
<p>å¯¹äºé«˜å¹¶å‘åœºæ™¯ï¼Œå¯ä»¥é‡‡ç”¨å¼‚æ­¥å¤„ç†æ¨¡å¼ï¼Œå°†åŒæ­¥è¯·æ±‚è½¬ä¸ºå¼‚æ­¥ä»»åŠ¡ã€‚</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2238006/202512/2238006-20251223100906726-1694946967.png" class="lazyload"></p>
<p>å®ç°ä»£ç ç¤ºä¾‹ï¼š</p>
<pre><code class="language-java">// å¼‚æ­¥è®¢å•å¤„ç†å®ç°
@Component
public class AsyncOrderService {
    
    @Autowired
    private RocketMQTemplate rocketMQTemplate;
    
    @Autowired
    private RedisTemplate&lt;String, String&gt; redisTemplate;
    
    /**
     * å¼‚æ­¥æäº¤è®¢å•
     */
    public AsyncSubmitResult asyncSubmitOrder(OrderSubmitRequest request) {
        // 1. ç”Ÿæˆå”¯ä¸€è¯·æ±‚ID
        String requestId = generateRequestId(request.getUserId());
        
        // 2. å¿«é€ŸéªŒè¯ï¼ˆåº“å­˜ã€ç”¨æˆ·çŠ¶æ€ç­‰ï¼‰
        quickValidate(request);
        
        // 3. å°†è¯·æ±‚IDä¸ç”¨æˆ·å…³è”ï¼ˆç”¨äºæŸ¥è¯¢ç»“æœï¼‰
        String pendingKey = "order:pending:" + request.getUserId() + ":" + requestId;
        redisTemplate.opsForValue().set(pendingKey, "processing", 10, TimeUnit.MINUTES);
        
        // 4. å‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—
        OrderMessage message = new OrderMessage();
        message.setRequestId(requestId);
        message.setRequest(request);
        message.setTimestamp(System.currentTimeMillis());
        
        rocketMQTemplate.asyncSend(
            "ORDER_SUBMIT_TOPIC", 
            message, 
            new SendCallback() {
                @Override
                public void onSuccess(SendResult sendResult) {
                    log.info("è®¢å•æ¶ˆæ¯å‘é€æˆåŠŸ: {}", requestId);
                }
                
                @Override
                public void onException(Throwable throwable) {
                    log.error("è®¢å•æ¶ˆæ¯å‘é€å¤±è´¥: {}", requestId, throwable);
                    // å‘é€å¤±è´¥ï¼Œæ›´æ–°çŠ¶æ€
                    redisTemplate.opsForValue().set(
                        pendingKey, 
                        "failed", 
                        5, 
                        TimeUnit.MINUTES
                    );
                }
            }
        );
        
        // 5. ç«‹å³è¿”å›ï¼Œå‘ŠçŸ¥ç”¨æˆ·å¤„ç†ä¸­
        return new AsyncSubmitResult(requestId, "è®¢å•æäº¤æˆåŠŸï¼Œæ­£åœ¨å¤„ç†ä¸­");
    }
}

// æ¶ˆæ¯æ¶ˆè´¹è€…
@Component
@RocketMQMessageListener(
    topic = "ORDER_SUBMIT_TOPIC",
    consumerGroup = "order-submit-consumer-group"
)
public class OrderSubmitConsumer implements RocketMQListener&lt;OrderMessage&gt; {
    
    @Autowired
    private OrderMapper orderMapper;
    
    @Override
    public void onMessage(OrderMessage message) {
        String requestId = message.getRequestId();
        OrderSubmitRequest request = message.getRequest();
        
        // 1. å¹‚ç­‰æ£€æŸ¥ï¼ˆåŸºäºrequestIdï¼‰
        Order existing = orderMapper.selectByRequestId(requestId);
        if (existing != null) {
            log.info("è®¢å•å·²å¤„ç†ï¼Œè·³è¿‡: {}", requestId);
            return;
        }
        
        // 2. åˆ›å»ºè®¢å•
        Order order = createOrder(request, requestId);
        
        try {
            orderMapper.insert(order);
            log.info("è®¢å•åˆ›å»ºæˆåŠŸ: {}", order.getOrderNo());
            
            // 3. æ›´æ–°å¤„ç†çŠ¶æ€
            updateProcessingStatus(request.getUserId(), requestId, "success", order.getOrderNo());
            
        } catch (DuplicateKeyException e) {
            log.warn("è®¢å•é‡å¤ï¼ŒrequestId={}", requestId);
            // æŸ¥è¯¢å·²åˆ›å»ºçš„è®¢å•
            Order created = orderMapper.selectByRequestId(requestId);
            if (created != null) {
                updateProcessingStatus(request.getUserId(), requestId, "success", created.getOrderNo());
            }
        }
    }
}
</code></pre>
<h2 id="07-ç»¼åˆæ–¹æ¡ˆå¤šå±‚æ¬¡è”åˆé˜²æŠ¤">07 ç»¼åˆæ–¹æ¡ˆï¼šå¤šå±‚æ¬¡è”åˆé˜²æŠ¤</h2>
<p>åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šé‡‡ç”¨å¤šå±‚æ¬¡ã€ç«‹ä½“åŒ–çš„é˜²æŠ¤ç­–ç•¥ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç»¼åˆæ–¹æ¡ˆæµç¨‹å›¾ï¼š</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2238006/202512/2238006-20251223100921825-1853544980.png" class="lazyload"></p>
<p>è¿™ä¸ªå¤šå±‚æ¬¡æ–¹æ¡ˆä¸­ï¼Œæ¯ä¸€å±‚éƒ½æœ‰å…¶ç‰¹å®šä½œç”¨ï¼š</p>
<ul>
<li><strong>å‰ç«¯å±‚</strong>ï¼šç”¨æˆ·ä½“éªŒä¼˜åŒ–ï¼Œæ‹¦æˆªå¤§éƒ¨åˆ†æ— æ„è¯†é‡å¤</li>
<li><strong>ç½‘å…³å±‚</strong>ï¼šå®‰å…¨é˜²æŠ¤ï¼Œé˜²åˆ·ã€é™æµ</li>
<li><strong>ä¸šåŠ¡å±‚</strong>ï¼šæ ¸å¿ƒå¹‚ç­‰é€»è¾‘ï¼Œåˆ†å¸ƒå¼é”ä¿è¯å¹¶å‘å®‰å…¨</li>
<li><strong>æ•°æ®å±‚</strong>ï¼šæœ€ç»ˆä¿éšœï¼Œå”¯ä¸€çº¦æŸé˜²æ­¢æ•°æ®ä¸ä¸€è‡´</li>
<li><strong>å¼‚æ­¥å±‚</strong>ï¼šå‰Šå³°å¡«è°·ï¼Œæå‡ç³»ç»Ÿååé‡</li>
</ul>
<h2 id="08-å®æˆ˜ä¸åŒåœºæ™¯ä¸‹çš„æ–¹æ¡ˆé€‰æ‹©">08 å®æˆ˜ï¼šä¸åŒåœºæ™¯ä¸‹çš„æ–¹æ¡ˆé€‰æ‹©</h2>
<p>ä¸åŒçš„ä¸šåŠ¡åœºæ™¯éœ€è¦ä¸åŒçš„é˜²æŠ¤ç­–ç•¥ï¼Œè¿™é‡Œç»™å‡ºä¸€äº›å®è·µå»ºè®®ï¼š</p>
<h3 id="81-æ™®é€šç”µå•†è®¢å•">8.1 æ™®é€šç”µå•†è®¢å•</h3>
<pre><code class="language-java">// æ™®é€šç”µå•†è®¢å•æ¨èæ–¹æ¡ˆ
@Service  
public class StandardOrderService {
    
    // ç»¼åˆä½¿ç”¨ï¼šå‰ç«¯é˜²æŠ– + Tokenå¹‚ç­‰ + æ•°æ®åº“å”¯ä¸€çº¦æŸ
    public OrderSubmitResult submitStandardOrder(OrderSubmitRequest request) {
        // 1. å‚æ•°æ ¡éªŒ
        validateRequest(request);
        
        // 2. å¹‚ç­‰Tokenæ£€æŸ¥ï¼ˆRedisï¼‰
        if (!idempotentCheck(request.getUserId(), request.getSubmitToken())) {
            return getExistingOrderResult(request.getUserId(), request.getSubmitToken());
        }
        
        // 3. åˆ†å¸ƒå¼é”ï¼ˆé˜²å¹¶å‘ï¼‰
        RLock lock = acquireOrderLock(request.getUserId(), request.getProductId());
        try {
            // 4. åº“å­˜æ£€æŸ¥ç­‰ä¸šåŠ¡æ ¡éªŒ
            checkInventory(request.getProductId(), request.getQuantity());
            
            // 5. åˆ›å»ºè®¢å•ï¼ˆä¾èµ–æ•°æ®åº“å”¯ä¸€çº¦æŸï¼‰
            return createOrderInTransaction(request);
        } finally {
            lock.unlock();
        }
    }
}
</code></pre>
<h3 id="82-ç§’æ€è®¢å•">8.2 ç§’æ€è®¢å•</h3>
<pre><code class="language-java">// ç§’æ€è®¢å•éœ€è¦æ›´æè‡´çš„ä¼˜åŒ–
@Service
public class FlashSaleOrderService {
    
    // ç§’æ€æ–¹æ¡ˆï¼šå¼‚æ­¥å¤„ç† + åº“å­˜é¢„æ‰£ + æœ€ç»ˆä¸€è‡´æ€§
    public FlashSaleSubmitResult submitFlashSaleOrder(FlashSaleRequest request) {
        // 1. éªŒè¯ç”¨æˆ·èµ„æ ¼å’Œæ´»åŠ¨çŠ¶æ€ï¼ˆç¼“å­˜ä¸­æ£€æŸ¥ï¼‰
        if (!checkUserQualification(request.getUserId(), request.getActivityId())) {
            throw new BusinessException("æ‚¨ä¸å…·å¤‡å‚ä¸èµ„æ ¼");
        }
        
        // 2. é¢„æ‰£åº“å­˜ï¼ˆRedisåŸå­æ“ä½œï¼‰
        boolean stockDeducted = preDeductStock(
            request.getActivityId(), 
            request.getProductId(), 
            request.getUserId()
        );
        
        if (!stockDeducted) {
            throw new BusinessException("åº“å­˜ä¸è¶³");
        }
        
        // 3. ç”Ÿæˆå”¯ä¸€è¯·æ±‚ID
        String requestId = generateRequestId(request.getUserId(), request.getActivityId());
        
        // 4. å‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå¿«é€Ÿè¿”å›ï¼‰
        sendToMQ(request, requestId);
        
        // 5. ç«‹å³è¿”å›
        return new FlashSaleSubmitResult(requestId, "ç§’æ€è¯·æ±‚å·²æ¥å—ï¼Œå¤„ç†ä¸­");
    }
    
    // æ¶ˆè´¹è€…å¼‚æ­¥åˆ›å»ºè®¢å•
    @Transactional
    public void processFlashSaleOrder(FlashSaleRequest request, String requestId) {
        // è¿™é‡Œåªéœ€è¦å¤„ç†çœŸæ­£çš„è®¢å•åˆ›å»º
        // å› ä¸ºåº“å­˜å·²åœ¨Redisä¸­é¢„æ‰£ï¼Œåªéœ€ä¿è¯æœ€ç»ˆä¸€è‡´æ€§
        try {
            createOrder(request, requestId);
            // åŒæ­¥åº“å­˜åˆ°æ•°æ®åº“
            syncStockToDB(request.getProductId(), request.getActivityId());
        } catch (Exception e) {
            // å¤±è´¥æ—¶å›æ»šRedisåº“å­˜
            rollbackStockInRedis(request.getActivityId(), request.getProductId(), request.getUserId());
            throw e;
        }
    }
}
</code></pre>
<h2 id="10-æ€»ç»“">10 æ€»ç»“</h2>
<p>é˜²æ­¢é‡å¤æäº¤è®¢å•æ˜¯ä¸€ä¸ªç³»ç»Ÿå·¥ç¨‹ï¼Œéœ€è¦ä»å‰åˆ°åã€å¤šå±‚æ¬¡çš„é˜²æŠ¤ã€‚</p>
<p>è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹å…³é”®ç‚¹ï¼š</p>
<ol>
<li><strong>å‰ç«¯é˜²æŠ¤æ˜¯ä½“éªŒï¼Œä¸æ˜¯ä¿éšœ</strong>ï¼šæŒ‰é’®é˜²æŠ–ã€è¯·æ±‚æ‹¦æˆªèƒ½æ”¹å–„ç”¨æˆ·ä½“éªŒï¼Œä½†ä¸èƒ½ä½œä¸ºå”¯ä¸€é˜²çº¿ã€‚</li>
<li><strong>å¹‚ç­‰æ€§æ˜¯æ ¸å¿ƒç†å¿µ</strong>ï¼šæ— è®ºæ˜¯Tokenæ–¹æ¡ˆè¿˜æ˜¯ä¸šåŠ¡å”¯ä¸€æ ‡è¯†ï¼Œéƒ½è¦ä¿è¯åŒä¸€æ“ä½œæ‰§è¡Œå¤šæ¬¡çš„ç»“æœä¸€è‡´ã€‚</li>
<li><strong>åˆ†å¸ƒå¼é”è§£å†³å¹¶å‘é—®é¢˜</strong>ï¼šåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œé˜²æ­¢å¤šä¸ªå®ä¾‹åŒæ—¶å¤„ç†åŒä¸€è¯·æ±‚ã€‚</li>
<li><strong>æ•°æ®åº“æ˜¯æœ€åé˜²çº¿</strong>ï¼šå”¯ä¸€çº¦æŸã€ä¹è§‚é”ç­‰æœºåˆ¶èƒ½åœ¨åº”ç”¨å±‚é˜²æŠ¤å¤±æ•ˆæ—¶ä¿è¯æ•°æ®ä¸€è‡´æ€§ã€‚</li>
<li><strong>å¼‚æ­¥å¤„ç†æå‡åå</strong>ï¼šå¯¹äºé«˜å¹¶å‘åœºæ™¯ï¼Œå°†åŒæ­¥è¯·æ±‚è½¬ä¸ºå¼‚æ­¥å¤„ç†ï¼Œæé«˜ç³»ç»Ÿæ•´ä½“ååé‡ã€‚</li>
<li><strong>ç›‘æ§å‘Šè­¦å¿…ä¸å¯å°‘</strong>ï¼šæ²¡æœ‰ç›‘æ§çš„ç³»ç»Ÿå°±åƒæ²¡æœ‰ä»ªè¡¨çš„é£æœºï¼Œæ— æ³•å‘ç°é—®é¢˜å’Œä¼˜åŒ–æ€§èƒ½ã€‚</li>
</ol>
<p>åœ¨å®é™…æ¶æ„è®¾è®¡ä¸­ï¼Œæˆ‘é€šå¸¸å»ºè®®é‡‡ç”¨ <strong>"å‰ç«¯é˜²æŠ– + ç½‘å…³é™æµ + Tokenå¹‚ç­‰ + åˆ†å¸ƒå¼é” + æ•°æ®åº“å”¯ä¸€çº¦æŸ"</strong> çš„ç»¼åˆæ–¹æ¡ˆï¼Œå¯¹äºç§’æ€ç­‰æè‡´åœºæ™¯å†åŠ å…¥å¼‚æ­¥å¤„ç†ã€‚</p>
<p>æœ‰äº›å°ä¼™ä¼´å¯èƒ½ä¼šè§‰å¾—è¿™äº›é˜²æŠ¤æªæ–½å¤ªå¤æ‚ï¼Œå½±å“å¼€å‘æ•ˆç‡ã€‚</p>
<p>ä½†è¯·è®°ä½ï¼š<strong>é¢„é˜²çš„æˆæœ¬è¿œä½äºä¿®å¤çš„æˆæœ¬</strong>ã€‚</p>
<p>ä¸€æ¬¡é‡å¤æäº¤å¯¼è‡´çš„èµ„æŸäº‹æ•…ï¼Œå¯èƒ½å°±éœ€è¦æ•´ä¸ªå›¢é˜ŸåŠ ç­æ•°å‘¨æ¥ä¿®å¤æ•°æ®å’Œå®‰æŠšç”¨æˆ·ã€‚</p>
<p>æŠ€æœ¯æ–¹æ¡ˆæ²¡æœ‰é“¶å¼¹ï¼Œåªæœ‰æœ€é€‚åˆä¸šåŠ¡åœºæ™¯çš„å¹³è¡¡ã€‚</p>
<h2 id="æœ€åè¯´ä¸€å¥æ±‚å…³æ³¨åˆ«ç™½å«–æˆ‘">æœ€åè¯´ä¸€å¥(æ±‚å…³æ³¨ï¼Œåˆ«ç™½å«–æˆ‘)</h2>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œæˆ–è€…æœ‰æ‰€å¯å‘çš„è¯ï¼Œå¸®å¿™å…³æ³¨ä¸€ä¸‹æˆ‘çš„åŒåå…¬ä¼—å·ï¼šè‹ä¸‰è¯´æŠ€æœ¯ï¼Œæ‚¨çš„æ”¯æŒæ˜¯æˆ‘åšæŒå†™ä½œæœ€å¤§çš„åŠ¨åŠ›ã€‚</p>
<p>æ±‚ä¸€é”®ä¸‰è¿ï¼šç‚¹èµã€è½¬å‘ã€åœ¨çœ‹ã€‚</p>
<p>å…³æ³¨å…¬ä¼—å·ï¼šã€è‹ä¸‰è¯´æŠ€æœ¯ã€‘ï¼Œåœ¨å…¬ä¼—å·ä¸­å›å¤ï¼šè¿›å¤§å‚ï¼Œå¯ä»¥å…è´¹è·å–æˆ‘æœ€è¿‘æ•´ç†çš„10ä¸‡å­—çš„é¢è¯•å®å…¸ï¼Œå¥½å¤šå°ä¼™ä¼´é è¿™ä¸ªå®å…¸æ‹¿åˆ°äº†å¤šå®¶å¤§å‚çš„offerã€‚</p>
<p>æ›´å¤šé¡¹ç›®å®æˆ˜åœ¨æˆ‘çš„æŠ€æœ¯ç½‘ç«™ï¼š<a href="http://www.susan.net.cn/project" target="_blank" rel="noopener nofollow">http://www.susan.net.cn/project</a></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-23 10:10">2025-12-23 10:09</span>&nbsp;
<a href="https://www.cnblogs.com/12lisu">è‹ä¸‰è¯´æŠ€æœ¯</a>&nbsp;
é˜…è¯»(<span id="post_view_count">70</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">1</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19385452);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19385452', targetLink: 'https://www.cnblogs.com/12lisu/p/19385452', title: 'é«˜å¹¶å‘ä¸‹å¦‚ä½•é˜²æ­¢é‡å¤æäº¤è®¢å•ï¼Ÿ' })">ä¸¾æŠ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ã€è¯‘ã€‘Azure MCP æœåŠ¡å™¨ç°å·²å†…ç½®åˆ° Visual Studio 2026 ä¸­ï¼šæ™ºèƒ½ä½“å·¥ä½œæµçš„æ–°æ—¶ä»£ ]]></title>
    <link>https://www.cnblogs.com/MeteorSeed/p/19381988</link>
    <guid>82c69e158f71d89c99c3ff6284ab5fc8</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/MeteorSeed/p/19381988" title="å‘å¸ƒäº 2025-12-23 10:01">
    <span role="heading" aria-level="2">ã€è¯‘ã€‘Azure MCP æœåŠ¡å™¨ç°å·²å†…ç½®åˆ° Visual Studio 2026 ä¸­ï¼šæ™ºèƒ½ä½“å·¥ä½œæµçš„æ–°æ—¶ä»£</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p><span>ã€€ã€€ç®¡ç†äº‘èµ„æºé€šå¸¸æ„å‘³ç€è¦åŒæ—¶å¤„ç†å¤šä¸ªå·¥å…·ã€ç¼–å†™è‡ªå®šä¹‰è„šæœ¬ï¼Œè¿˜è¦åœ¨é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰å’Œäº‘ç®¡ç†é—¨æˆ·ä¹‹é—´åˆ‡æ¢å·¥ä½œç¯å¢ƒã€‚è¿™äº›é¢å¤–æ­¥éª¤ä¼šæ‹–æ…¢å¼€å‘é€Ÿåº¦ï¼Œä¹Ÿè®©é«˜æ•ˆæ„å»ºæ™ºèƒ½ä¸”å®‰å…¨çš„åº”ç”¨ç¨‹åºå˜å¾—æ›´åŠ å›°éš¾ã€‚</span></p>
<p><span>ã€€ã€€æˆ‘ä»¬å¾ˆé«˜å…´åœ°å®£å¸ƒï¼ŒAzure MCP æœåŠ¡å™¨å·¥å…·ç°å·²åœ¨ Visual Studio 2026 ä¸­å¼€ç®±å³ç”¨ï¼Œå°†æ™ºèƒ½äº‘è‡ªåŠ¨åŒ–ç›´æ¥å¼•å…¥æ‚¨ä¿¡èµ–çš„é›†æˆå¼€å‘ç¯å¢ƒä¸­ã€‚è¿™ç§é›†æˆä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿæ›´å¿«é€Ÿåœ°æ„å»ºæ™ºèƒ½ã€å®‰å…¨çš„åº”ç”¨ç¨‹åºï¼ŒåŒæ—¶é™ä½å¤æ‚æ€§å¹¶å¢å¼ºä¿¡å¿ƒã€‚</span></p>
<h1><span><span>ä¸ºä½•å¦‚æ­¤é‡è¦</span></span></h1>
<p><span>ã€€ã€€Azure MCP æœåŠ¡å™¨æ˜¯ä¸€ä¸ªåŸºäºæ ‡å‡† MCP åè®®<span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;p&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;text-align: left;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">çš„<span>æœåŠ¡å™¨ï¼Œå®ƒä½¿äººå·¥æ™ºèƒ½ä»£ç†èƒ½å¤Ÿé€šè¿‡è‡ªç„¶è¯­è¨€å®‰å…¨åœ°è®¿é—®å’Œç®¡ç† Azure èµ„æºï¼Œæ— éœ€è‡ªå®šä¹‰é›†æˆå°±èƒ½å¸®åŠ©å›¢é˜Ÿç®€åŒ–äº‘æ“ä½œå¹¶æé«˜å¼€å‘äººå‘˜çš„å·¥ä½œæ•ˆç‡ã€‚</span></span></span></p>
<p><span>ã€€ã€€Visual Studio 2026 è¢«è®¾è®¡ä¸ºä¸€æ¬¾åŸç”Ÿæ”¯æŒäººå·¥æ™ºèƒ½çš„é›†æˆå¼€å‘ç¯å¢ƒï¼Œè€Œ Azure MCP æœåŠ¡å™¨æ˜¯å…¶å®Œç¾çš„è¡¥å……ã€‚å€ŸåŠ©è¿™äº›å¼€ç®±å³ç”¨çš„ MCP å·¥å…·ï¼Œå¼€å‘äººå‘˜èƒ½å¤Ÿï¼š</span></p>
<p><span>ã€€ã€€- ä½¿ç”¨è‡ªç„¶è¯­è¨€ç”Ÿæˆä¸ Azure ç›¸å…³çš„ä»£ç å’Œ IaCã€‚</span></p>
<p><span>ã€€ã€€- æŸ¥è¯¢å’Œç®¡ç† Azure Kubernetes Service, Azure Container Apps, Cosmos DB, AI Foundry ç­‰èµ„æºã€‚</span></p>
<p><span>ã€€ã€€- åº”ç”¨ Azure æœ€ä½³å®è·µä»¥å®ç°ä¼ä¸šçº§å®‰å…¨æ€§ã€‚</span></p>
<p><span>ã€€ã€€- é€šè¿‡ç›´æ¥è®¿é—®æ—¥å¿—ã€è¯Šæ–­å’Œé¥æµ‹æ•°æ®ï¼Œè½»æ¾è¿›è¡Œè¯Šæ–­å’Œæ•…éšœæ’é™¤ã€‚</span></p>
<p><span>ã€€ã€€è¿™æ„å‘³ç€æ›´å°‘çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ã€æ›´å°‘çš„æ‰‹åŠ¨æ­¥éª¤ï¼Œä»¥åŠæ›´å¤šç”¨äºå¼€å‘ä¼˜ç§€è½¯ä»¶çš„æ—¶é—´ã€‚</span></p>
<h1><span><span>é™„åŠ çš„ Azure å¼€å‘å·¥å…·</span></span></h1>
<p><span>ã€€ã€€é™¤äº†æ ¸å¿ƒçš„ Azure MCP æœåŠ¡å™¨å·¥å…·å¤–ï¼ŒVisual Studio 2026 è¿˜æ¨å‡ºäº†ä¸€å¥—æ‰©å±•çš„ Azure å¼€å‘å·¥å…·ï¼Œæ—¨åœ¨ç®€åŒ–å’Œå¢å¼ºå¸¸è§çš„å·¥ä½œæµç¨‹ï¼š</span></p>
<p><span><span>ã€€ã€€- Automated CI/CD Setup&nbsp;ä¸º ASP.NETã€Blazor æˆ– Azure Functions é¡¹ç›®ç”Ÿæˆ Azure DevOps æˆ– GitHub Actions å·¥ä½œæµï¼ŒåŒ…å«å®Œæ•´çš„ YAML æ–‡ä»¶å’Œå®‰å…¨ç®¡ç†çš„å‡­æ®ã€‚</span></span></p>
<p><span><span>ã€€ã€€- Effortless Publishing&nbsp;åˆ›å»ºå¹¶éªŒè¯å‘å¸ƒé…ç½®æ–‡ä»¶ï¼Œé€‰æ‹©åˆé€‚çš„ Azure Web Appï¼Œç„¶åè¿›è¡Œéƒ¨ç½² â€”â€” æ‰€æœ‰æ“ä½œéƒ½å¯é€šè¿‡è‡ªç„¶è¯­è¨€æç¤ºå®Œæˆã€‚</span></span></p>
<p><span><span>ã€€ã€€- Azure CLI Command Generation&nbsp;éœ€è¦ Azure CLI å‘½ä»¤å—ï¼Ÿå°½ç®¡é—®ã€‚Copilot ä¼šå°†æ‚¨çš„æ„å›¾è½¬åŒ–ä¸ºç²¾ç¡®çš„ az å‘½ä»¤ã€‚</span></span></p>
<h1><span><span>å¼€å§‹ä½¿ç”¨</span></span></h1>
<p><span>ã€€ã€€1 ä¸‹è½½ Visual Studio 2026 æˆ– Visual Studio 2026&nbsp;<span>Insiders<span>ï¼Œå¹¶é€šè¿‡ Visual Studio&nbsp;<span>Installer&nbsp;<span>è¿›è¡Œå®‰è£…ã€‚</span></span></span></span></span></p>
<p><span>ã€€ã€€å¦‚æœå·²å®‰è£… Visual Studio 2026ï¼Œæ‰“å¼€å®‰è£…ç¨‹åºå¹¶é€‰æ‹©â€œModify â€ä»¥æŸ¥çœ‹å¯ç”¨çš„å·¥ä½œè´Ÿè½½ã€‚</span></p>
<p><span>ã€€ã€€2 åœ¨â€œWorkloadsâ€é€‰é¡¹å¡ä¸Šï¼Œé€‰æ‹©â€œAzure and AI developmentâ€å¹¶å¯ç”¨ GitHub Copilotã€‚</span></p>
<p><span>ã€€ã€€3 ç‚¹å‡»â€œInstall while downloadingâ€ä»¥å®Œæˆå®‰è£…ã€‚</span></p>
<p><span>ã€€ã€€4 å¯åŠ¨ Visual Studio 2026 å¹¶åˆ›å»ºæˆ–åŠ è½½é¡¹ç›®ã€‚</span></p>
<p><span>ã€€ã€€5 æ‰“å¼€ GitHub Copilot Chatã€‚</span></p>
<p><span>ã€€ã€€6 åœ¨èŠå¤©åŒºåŸŸï¼Œé€‰æ‹©â€œSelect toolsâ€æŒ‰é’®ï¼ˆä¸¤ä¸ªæ‰³æ‰‹å›¾æ ‡ï¼‰ä»¥æ˜¾ç¤ºå¯ç”¨å·¥å…·åˆ—è¡¨ã€‚é€šè¿‡å‹¾é€‰ Azure å’Œ Azure MCP Server çš„é¡¶çº§èŠ‚ç‚¹æ¥å¯ç”¨æ‰€æœ‰ Azure å·¥å…·ã€‚</span></p>
<p><span><img src="https://img2024.cnblogs.com/blog/270073/202512/270073-20251222135715292-2015048313.png" alt="20251222" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></span></p>
<h1><span><span>å°ç»“</span></span></h1>
<p><span>ã€€ã€€å°† Azure MCP é›†æˆåˆ° Visual Studio 2026 ä¸­ï¼Œæ ‡å¿—ç€å‘æ™ºèƒ½ä½“å·¥ä½œæµè¿ˆå‡ºäº†é‡è¦ä¸€æ­¥ â€”â€” åœ¨è¿™ç§å·¥ä½œæµä¸­ï¼Œäººå·¥æ™ºèƒ½é©±åŠ¨çš„è‡ªåŠ¨åŒ–ä¸å¼€å‘è€…çš„åˆ›é€ åŠ›ç›¸é‡ã€‚é€šè¿‡å‡å°‘æ‘©æ“¦å¹¶æ”¯æŒä¸ Azure è¿›è¡Œè‡ªç„¶è¯­è¨€äº¤äº’ï¼Œæˆ‘ä»¬æ­£å¸®åŠ©å¼€å‘è€…ä¸“æ³¨äºæœ€é‡è¦çš„äº‹æƒ…ï¼šæ„å»ºåˆ›æ–°ã€å®‰å…¨ä¸”å¯æ‰©å±•çš„åº”ç”¨ç¨‹åºã€‚</span></p>
<p><span>&nbsp;</span></p>
<p><span>åŸæ–‡é“¾æ¥ï¼šhttps://devblogs.microsoft.com/visualstudio/azure-mcp-server-now-built-in-with-visual-studio-2026-a-new-era-for-agentic-workflows/</span></p>
<p><span><img src="https://img2024.cnblogs.com/blog/270073/202508/270073-20250825145337681-1658462272.png" alt="me" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></span></p>
<p>&nbsp;</p>
</div>
<div id="MySignature" role="contentinfo">
    <blockquote>
<p><strong>ä½œè€…ï¼š</strong><a href="http://www.cnblogs.com/MeteorSeed">MeteorSeed</a></p>
<p><strong>æˆ‘å¸Œæœ›æ‚¨å–œæ¬¢è¿™ç¯‡åšæ–‡ï¼Œå¹¶ä¸€å¦‚æ—¢å¾€åœ°æ„Ÿè°¢æ‚¨é˜…è¯»å¹¶ä¸æœ‹å‹å’ŒåŒäº‹åˆ†äº«æˆ‘çš„åšæ–‡ã€‚</strong></p>
<p><strong>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</strong></p>
</blockquote>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-23 10:02">2025-12-23 10:01</span>&nbsp;
<a href="https://www.cnblogs.com/MeteorSeed">MeteorSeed</a>&nbsp;
é˜…è¯»(<span id="post_view_count">0</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19381988);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19381988', targetLink: 'https://www.cnblogs.com/MeteorSeed/p/19381988', title: 'ã€è¯‘ã€‘Azure MCP æœåŠ¡å™¨ç°å·²å†…ç½®åˆ° Visual Studio 2026 ä¸­ï¼šæ™ºèƒ½ä½“å·¥ä½œæµçš„æ–°æ—¶ä»£' })">ä¸¾æŠ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ã€é¢è¯•é¢˜ã€‘MySQL çš„è¦†ç›–ç´¢å¼•æ˜¯ä»€ä¹ˆï¼Ÿ ]]></title>
    <link>https://www.cnblogs.com/sun-10387834/p/19370857</link>
    <guid>67bfa96fc86eebbd60b6ee2a5f039d46</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/sun-10387834/p/19370857" title="å‘å¸ƒäº 2025-12-23 09:55">
    <span role="heading" aria-level="2">ã€é¢è¯•é¢˜ã€‘MySQL çš„è¦†ç›–ç´¢å¼•æ˜¯ä»€ä¹ˆï¼Ÿ</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="-mysql-è¦†ç›–ç´¢å¼•è¯¦è§£">ğŸ“š MySQL è¦†ç›–ç´¢å¼•è¯¦è§£</h1>
<h2 id="-ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼•">ğŸ¯ ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼•ï¼Ÿ</h2>
<p><strong>è¦†ç›–ç´¢å¼•</strong>æ˜¯æŒ‡ä¸€ä¸ªç´¢å¼•åŒ…å«äº†æŸ¥è¯¢æ‰€éœ€çš„æ‰€æœ‰å­—æ®µï¼ŒMySQL å¯ä»¥ç›´æ¥ä»ç´¢å¼•ä¸­è·å–æ•°æ®è€Œ<strong>æ— éœ€å›è¡¨</strong>æŸ¥è¯¢æ•°æ®è¡Œã€‚</p>
<h2 id="-æ ¸å¿ƒåŸç†">ğŸ” æ ¸å¿ƒåŸç†</h2>
<pre><code class="language-sql">-- ç¤ºä¾‹è¡¨ç»“æ„
CREATE TABLE users (
    id INT PRIMARY KEY,
    name VARCHAR(50),
    age INT,
    city VARCHAR(50),
    created_at DATETIME,
    INDEX idx_age_city_name (age, city, name)  -- å¤åˆç´¢å¼•
);

-- æƒ…å†µ1ï¼šéœ€è¦å›è¡¨
SELECT * FROM users WHERE age = 25;
-- è™½ç„¶ç”¨åˆ°äº†ç´¢å¼•ï¼Œä½†SELECT *éœ€è¦å›è¡¨è·å–æ‰€æœ‰å­—æ®µ

-- æƒ…å†µ2ï¼šè¦†ç›–ç´¢å¼•ï¼ˆæ— éœ€å›è¡¨ï¼‰
SELECT age, city, name FROM users WHERE age = 25;
-- æ‰€æœ‰éœ€è¦çš„å­—æ®µéƒ½åœ¨ç´¢å¼•ä¸­ï¼Œæ— éœ€è®¿é—®æ•°æ®è¡Œ
</code></pre>
<h2 id="-å·¥ä½œåŸç†å¯¹æ¯”">ğŸ“Š å·¥ä½œåŸç†å¯¹æ¯”</h2>
<h3 id="æ™®é€šç´¢å¼•æŸ¥è¯¢æµç¨‹"><strong>æ™®é€šç´¢å¼•æŸ¥è¯¢æµç¨‹</strong></h3>
<pre><code>1. é€šè¿‡ç´¢å¼•æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„è¡Œä¸»é”®
2. ä½¿ç”¨ä¸»é”®å›è¡¨æŸ¥è¯¢æ•°æ®è¡Œ
3. ä»æ•°æ®è¡Œä¸­å–å‡ºéœ€è¦çš„å­—æ®µ
</code></pre>
<h3 id="è¦†ç›–ç´¢å¼•æŸ¥è¯¢æµç¨‹"><strong>è¦†ç›–ç´¢å¼•æŸ¥è¯¢æµç¨‹</strong></h3>
<pre><code>1. é€šè¿‡ç´¢å¼•æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„ç´¢å¼•è®°å½•
2. ç›´æ¥ä»ç´¢å¼•è®°å½•ä¸­å–å‡ºéœ€è¦çš„å­—æ®µ
3. æ— éœ€å›è¡¨ï¼
</code></pre>
<h2 id="-åˆ¤æ–­æ˜¯å¦ä½¿ç”¨è¦†ç›–ç´¢å¼•">âœ… åˆ¤æ–­æ˜¯å¦ä½¿ç”¨è¦†ç›–ç´¢å¼•</h2>
<p>ä½¿ç”¨ <code>EXPLAIN</code> æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’ï¼š</p>
<pre><code class="language-sql">EXPLAIN SELECT age, city FROM users WHERE age = 25;
</code></pre>
<ul>
<li><strong>Extraåˆ—æ˜¾ç¤º</strong>ï¼š<code>Using index</code> âœ…ï¼ˆä½¿ç”¨è¦†ç›–ç´¢å¼•ï¼‰</li>
<li><strong>Extraåˆ—æ˜¾ç¤º</strong>ï¼š<code>Using index condition</code> âŒï¼ˆéœ€è¦å›è¡¨ï¼‰</li>
</ul>
<h2 id="-å®é™…åº”ç”¨ç¤ºä¾‹">ğŸ’¡ å®é™…åº”ç”¨ç¤ºä¾‹</h2>
<h3 id="ç¤ºä¾‹1ç†æƒ³çš„è¦†ç›–ç´¢å¼•"><strong>ç¤ºä¾‹1ï¼šç†æƒ³çš„è¦†ç›–ç´¢å¼•</strong></h3>
<pre><code class="language-sql">-- åˆ›å»ºè¦†ç›–ç´¢å¼•
CREATE INDEX idx_covering ON orders(user_id, status, amount, created_at);

-- æŸ¥è¯¢ï¼šæ‰€æœ‰éœ€è¦çš„å­—æ®µéƒ½åœ¨ç´¢å¼•ä¸­
SELECT user_id, status, amount 
FROM orders 
WHERE user_id = 100 AND status = 'paid';
-- âœ… å®Œå…¨è¦†ç›–ï¼ŒExtra: Using index
</code></pre>
<h3 id="ç¤ºä¾‹2éƒ¨åˆ†è¦†ç›–"><strong>ç¤ºä¾‹2ï¼šéƒ¨åˆ†è¦†ç›–</strong></h3>
<pre><code class="language-sql">-- å‡è®¾ç´¢å¼•ï¼šidx_name_age_city (name, age, city)
SELECT name, age FROM users WHERE name LIKE 'å¼ %';
-- âœ… è¦†ç›–ç´¢å¼•ï¼šåªæŸ¥è¯¢ç´¢å¼•åŒ…å«çš„å­—æ®µ

SELECT name, age, email FROM users WHERE name LIKE 'å¼ %';
-- âŒ éœ€è¦å›è¡¨ï¼šemailä¸åœ¨ç´¢å¼•ä¸­
</code></pre>
<h2 id="-è¦†ç›–ç´¢å¼•çš„ä¼˜åŠ¿">ğŸš€ è¦†ç›–ç´¢å¼•çš„ä¼˜åŠ¿</h2>
<table>
<thead>
<tr>
<th>ä¼˜åŠ¿</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>å‡å°‘I/O</strong></td>
<td>ç´¢å¼•é€šå¸¸æ¯”æ•°æ®è¡Œå°ï¼Œå‡å°‘ç£ç›˜è¯»å–</td>
</tr>
<tr>
<td><strong>é¿å…å›è¡¨</strong></td>
<td>æ— éœ€è®¿é—®æ•°æ®è¡Œï¼Œå‡å°‘éšæœºI/O</td>
</tr>
<tr>
<td><strong>åˆ©ç”¨ç´¢å¼•æ’åº</strong></td>
<td>å¦‚æœORDER BYå­—æ®µåœ¨ç´¢å¼•ä¸­ï¼Œå¯ç›´æ¥ä½¿ç”¨ç´¢å¼•æ’åº</td>
</tr>
<tr>
<td><strong>å‡å°‘å†…å­˜ä½¿ç”¨</strong></td>
<td>ç´¢å¼•æ•°æ®æ›´ç´§å‡‘ï¼Œç¼“å†²æ± æ•ˆç‡æ›´é«˜</td>
</tr>
</tbody>
</table>
<h3 id="æ€§èƒ½å¯¹æ¯”ç¤ºä¾‹"><strong>æ€§èƒ½å¯¹æ¯”ç¤ºä¾‹</strong></h3>
<pre><code class="language-sql">-- æ²¡æœ‰è¦†ç›–ç´¢å¼•ï¼š0.5ç§’
SELECT user_id, product_name 
FROM orders 
WHERE user_id = 1000;

-- æ·»åŠ è¦†ç›–ç´¢å¼•åï¼š0.02ç§’
CREATE INDEX idx_user_product ON orders(user_id, product_name);
SELECT user_id, product_name 
FROM orders 
WHERE user_id = 1000;  -- Extra: Using index
</code></pre>
<h2 id="ï¸-æ³¨æ„äº‹é¡¹å’Œé™åˆ¶">âš ï¸ æ³¨æ„äº‹é¡¹å’Œé™åˆ¶</h2>
<h3 id="1-ç´¢å¼•åˆ—é¡ºåºå¾ˆé‡è¦"><strong>1. ç´¢å¼•åˆ—é¡ºåºå¾ˆé‡è¦</strong></h3>
<pre><code class="language-sql">-- ç´¢å¼•ï¼šidx_a_b_c (a, b, c)

-- è¦†ç›–ç´¢å¼•ï¼šâœ…
SELECT a, b FROM users WHERE a = 1;

-- è¦†ç›–ç´¢å¼•ï¼šâœ…ï¼ˆcåœ¨WHEREä¸­ï¼‰
SELECT a, b FROM users WHERE a = 1 AND c = 2;

-- è¦†ç›–ç´¢å¼•ï¼šâŒï¼ˆç¼ºå°‘aï¼Œç´¢å¼•å¤±æ•ˆï¼‰
SELECT b, c FROM users WHERE b = 2;
</code></pre>
<h3 id="2-textblobå­—æ®µçš„é™åˆ¶"><strong>2. TEXT/BLOBå­—æ®µçš„é™åˆ¶</strong></h3>
<pre><code class="language-sql">-- å¯¹äºTEXT/BLOBå­—æ®µï¼Œå³ä½¿åŒ…å«åœ¨ç´¢å¼•ä¸­ä¹Ÿå¯èƒ½éœ€è¦å›è¡¨
CREATE INDEX idx_content ON articles(title, content(100));

SELECT title, content FROM articles WHERE title = 'MySQL';
-- å¯èƒ½æ— æ³•å®Œå…¨è¦†ç›–ï¼Œå–å†³äºå­˜å‚¨å¼•æ“å’Œé…ç½®
</code></pre>
<h3 id="3-ä¸»é”®çš„ç‰¹æ®Šæƒ…å†µ"><strong>3. ä¸»é”®çš„ç‰¹æ®Šæƒ…å†µ</strong></h3>
<pre><code class="language-sql">-- InnoDBäºŒçº§ç´¢å¼•è‡ªåŠ¨åŒ…å«ä¸»é”®
CREATE INDEX idx_age ON users(age);
-- å®é™…ä¸Šå­˜å‚¨çš„æ˜¯: (age, id)

-- è¿™äº›æŸ¥è¯¢å¯ä»¥ä½¿ç”¨è¦†ç›–ç´¢å¼•ï¼š
SELECT id FROM users WHERE age = 25;            -- âœ…
SELECT age, id FROM users WHERE age = 25;       -- âœ…
SELECT age FROM users WHERE age = 25;           -- âœ…
</code></pre>
<h2 id="-ä¼˜åŒ–å»ºè®®">ğŸ”§ ä¼˜åŒ–å»ºè®®</h2>
<h3 id="1-è®¾è®¡åˆé€‚çš„å¤åˆç´¢å¼•"><strong>1. è®¾è®¡åˆé€‚çš„å¤åˆç´¢å¼•</strong></h3>
<pre><code class="language-sql">-- æ ¹æ®æŸ¥è¯¢æ¨¡å¼è®¾è®¡ç´¢å¼•
-- å¸¸è§æŸ¥è¯¢ï¼š
SELECT user_id, order_date, total 
FROM orders 
WHERE user_id = ? AND status = 'completed' 
ORDER BY order_date DESC;

-- æœ€ä½³ç´¢å¼•ï¼š
CREATE INDEX idx_user_status_date_total 
ON orders(user_id, status, order_date DESC, total);
-- å®Œå…¨è¦†ç›–æŸ¥è¯¢éœ€æ±‚
</code></pre>
<h3 id="2-åˆ©ç”¨è¦†ç›–ç´¢å¼•ä¼˜åŒ–åˆ†é¡µ"><strong>2. åˆ©ç”¨è¦†ç›–ç´¢å¼•ä¼˜åŒ–åˆ†é¡µ</strong></h3>
<pre><code class="language-sql">-- ä½æ•ˆçš„åˆ†é¡µï¼ˆéœ€è¦å›è¡¨ï¼‰
SELECT * FROM users ORDER BY created_at LIMIT 100000, 20;

-- é«˜æ•ˆçš„åˆ†é¡µï¼ˆä½¿ç”¨è¦†ç›–ç´¢å¼•ï¼‰
SELECT id FROM users ORDER BY created_at LIMIT 100000, 20;
-- å…ˆé€šè¿‡è¦†ç›–ç´¢å¼•è·å–idï¼Œå†å…³è”æŸ¥è¯¢
SELECT u.* FROM users u
JOIN (
    SELECT id FROM users ORDER BY created_at LIMIT 100000, 20
) AS tmp ON u.id = tmp.id;
</code></pre>
<h3 id="3-ç›‘æ§è¦†ç›–ç´¢å¼•ä½¿ç”¨æƒ…å†µ"><strong>3. ç›‘æ§è¦†ç›–ç´¢å¼•ä½¿ç”¨æƒ…å†µ</strong></h3>
<pre><code class="language-sql">-- æŸ¥çœ‹ç´¢å¼•ä½¿ç”¨ç»Ÿè®¡
SELECT 
    OBJECT_SCHEMA,
    OBJECT_NAME,
    INDEX_NAME,
    ROWS_READ,
    ROWS_INSERTED,
    ROWS_UPDATED,
    ROWS_DELETED
FROM performance_schema.table_io_waits_summary_by_index_usage
WHERE OBJECT_SCHEMA = 'your_database';
</code></pre>
<h2 id="-æœ€ä½³å®è·µæ€»ç»“">ğŸ¯ æœ€ä½³å®è·µæ€»ç»“</h2>
<ol>
<li><strong>åˆ†ææŸ¥è¯¢æ¨¡å¼</strong>ï¼šæ‰¾å‡ºé«˜é¢‘æŸ¥è¯¢ï¼Œé’ˆå¯¹æ€§åˆ›å»ºè¦†ç›–ç´¢å¼•</li>
<li><strong>éµå¾ªæœ€å·¦å‰ç¼€åŸåˆ™</strong>ï¼šåˆç†å®‰æ’ç´¢å¼•åˆ—é¡ºåº</li>
<li><strong>é¿å…è¿‡åº¦ç´¢å¼•</strong>ï¼šæƒè¡¡æŸ¥è¯¢æ€§èƒ½ä¸å†™å…¥å¼€é”€</li>
<li><strong>å®šæœŸå®¡æŸ¥ç´¢å¼•</strong>ï¼šä½¿ç”¨ <code>pt-duplicate-key-checker</code> ç­‰å·¥å…·</li>
<li><strong>è€ƒè™‘å­˜å‚¨æˆæœ¬</strong>ï¼šå¤§å­—æ®µçš„è¦†ç›–ç´¢å¼•å¯èƒ½å ç”¨å¤§é‡ç©ºé—´</li>
</ol>
<h2 id="-æ€§èƒ½å½±å“ç¤ºä¾‹">ğŸ“ˆ æ€§èƒ½å½±å“ç¤ºä¾‹</h2>
<pre><code class="language-sql">-- æµ‹è¯•è¦†ç›–ç´¢å¼•æ•ˆæœ
SET profiling = 1;

-- æŸ¥è¯¢1ï¼šéœ€è¦å›è¡¨
SELECT * FROM large_table WHERE category = 'electronics';

-- æŸ¥è¯¢2ï¼šä½¿ç”¨è¦†ç›–ç´¢å¼•
SELECT id, category, name FROM large_table WHERE category = 'electronics';

SHOW PROFILES;
-- é€šå¸¸è¦†ç›–ç´¢å¼•æŸ¥è¯¢é€Ÿåº¦å¿«2-10å€
</code></pre>
<p>è¦†ç›–ç´¢å¼•æ˜¯ MySQL æŸ¥è¯¢ä¼˜åŒ–çš„é‡è¦æŠ€æœ¯ï¼Œåˆç†ä½¿ç”¨å¯ä»¥æ˜¾è‘—æå‡æŸ¥è¯¢æ€§èƒ½ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¤§é‡æ•°æ®çš„ OLTP ç³»ç»Ÿä¸­ã€‚</p>

</div>
<div id="MySignature" role="contentinfo">
    
<p>â¤ï¸ å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·ç‚¹èµæ”¯æŒï¼ ğŸ‘ åŒæ—¶æ¬¢è¿å…³æ³¨æˆ‘çš„åšå®¢ï¼Œè·å–æ›´å¤šç²¾å½©å†…å®¹ï¼</p>

<p>æœ¬æ–‡æ¥è‡ªåšå®¢å›­ï¼Œä½œè€…ï¼š<a href="https://www.cnblogs.com/sun-10387834/" target="_blank">ä½›ç¥–è®©æˆ‘æ¥å·¡å±±</a>ï¼Œè½¬è½½è¯·æ³¨æ˜åŸæ–‡é“¾æ¥ï¼š<a href="https://www.cnblogs.com/sun-10387834/p/19370857" target="_blank">https://www.cnblogs.com/sun-10387834/p/19370857</a></p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-23 09:56">2025-12-23 09:55</span>&nbsp;
<a href="https://www.cnblogs.com/sun-10387834">ä½›ç¥–è®©æˆ‘æ¥å·¡å±±</a>&nbsp;
é˜…è¯»(<span id="post_view_count">0</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19370857);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19370857', targetLink: 'https://www.cnblogs.com/sun-10387834/p/19370857', title: 'ã€é¢è¯•é¢˜ã€‘MySQL çš„è¦†ç›–ç´¢å¼•æ˜¯ä»€ä¹ˆï¼Ÿ' })">ä¸¾æŠ¥</a>
</div>
         ]]>
    </description>
    </item>
        </channel>
        </rss>