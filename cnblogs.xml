<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åå®¢å­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2025-12-25T04:35:26.810Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åå®¢å­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ å¨Python+FastAPIé¡¹ç®ä¸­ä½¿ç¨SqlAlchemyæä½æ°æ®çå ç§å¸¸è§æ¹å¼ ]]></title>
    <link>https://www.cnblogs.com/wuhuacong/p/19396612</link>
    <guid>8cbf510e9fa356f37d23a747d8c6ec5a</guid>
    <description>
    <![CDATA[ 
        <h2>
            <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/wuhuacong/p/19396612" title="åå¸äº 2025-12-25 11:59">
    <span role="heading" aria-level="2">å¨Python+FastAPIé¡¹ç®ä¸­ä½¿ç¨SqlAlchemyæä½æ°æ®çå ç§å¸¸è§æ¹å¼</span>
    

</a>

        </h2>
        <div class="postbody">
                <div id="cnblogs_post_description" style="display: none">
        
        å¨Python+FastAPIçåç«¯é¡¹ç®ä¸­ï¼æä»¬å¾å¾å¾å¤æ¶åéè¦å¯¹æ°æ®è¿è¡ç¸å³çå¤çï¼æ¬ç¯éç¬ä»ç»å¨Python+FastAPIé¡¹ç®ä¸­ä½¿ç¨SqlAlchemyæä½æ°æ®çå ç§å¸¸è§æ¹å¼ã
ä½¿ç¨ FastAPI, SQLAlchemy, Pydanticæå»ºåç«¯é¡¹ç®çæ¶åï¼å¶ä¸­æ°æ®åºè®¿é®éç¨SQLAlchemy çå¼æ­¥æ¹å¼å¤çãä¸è¬æä»¬å¨æä½æ°æ®åºæä½çæ¶åï¼éç¨åºç±»ç»§æ¿çæ¹å¼åå°éå¤ä»£ç ï¼æé«ä»£ç å¤ç¨æ§ãä¸è¿æä»¬å¨åæSQLAlchemyçæ¶åï¼æä»¬å¯ä»¥ç®åçæ¹å¼æ¥åæå ç§å¸¸è§çæ°æ®åºæä½æ¹å¼ï¼æ¥ä»ç»SQLAlchemyçå·ä½ä½¿ç¨ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>å¨Python+FastAPIçåç«¯é¡¹ç®ä¸­ï¼æä»¬å¾å¾å¾å¤æ¶åéè¦å¯¹æ°æ®è¿è¡ç¸å³çå¤çï¼æ¬ç¯éç¬ä»ç»å¨Python+FastAPIé¡¹ç®ä¸­ä½¿ç¨SqlAlchemyæä½æ°æ®çå ç§å¸¸è§æ¹å¼ã</p>
<p>ä½¿ç¨ FastAPI, SQLAlchemy, Pydanticæå»ºåç«¯é¡¹ç®çæ¶åï¼å¶ä¸­æ°æ®åºè®¿é®éç¨SQLAlchemy çå¼æ­¥æ¹å¼å¤çãä¸è¬æä»¬å¨æä½æ°æ®åºæä½çæ¶åï¼éç¨åºç±»ç»§æ¿çæ¹å¼åå°éå¤ä»£ç ï¼æé«ä»£ç å¤ç¨æ§ãä¸è¿æä»¬å¨åæSQLAlchemyçæ¶åï¼æä»¬å¯ä»¥ç®åçæ¹å¼æ¥åæå ç§å¸¸è§çæ°æ®åºæä½æ¹å¼ï¼æ¥ä»ç»SQLAlchemyçå·ä½ä½¿ç¨ã</p>
<h3>1ãSQLAlchemyä»ç»</h3>
<div><strong>SQLAlchemy</strong>&nbsp;æ¯ä¸ä¸ªåè½å¼ºå¤§ä¸çµæ´»ç Python SQL å·¥å·ååå¯¹è±¡å³ç³»æ å°ï¼ORMï¼åºãå®è¢«å¹¿æ³ç¨äºå¨ Python é¡¹ç®ä¸­å¤çå³ç³»åæ°æ®åºçåºæ¯ï¼æ¢æä¾äºé«çº§ç ORM åè½ï¼åä¿çäºå¯¹åºå± SQL è¯­å¥çå¼ºå¤§æ§å¶åã<code>SQLAlchemy</code>&nbsp;åè®¸å¼åèéè¿ Python ä»£ç ä¸æ°æ®åºè¿è¡äº¤äºï¼èæ éç´æ¥ç¼å SQL è¯­å¥ï¼åæ¶ä¹æ¯æç´æ¥ä½¿ç¨åç SQL è¿è¡å¤ææ¥è¯¢ãä¸é¢æ¯<strong>SQLAlchemy</strong>åæä»¬å¸¸è§æ°æ®åºå¯¹è±¡çå¯¹åºå³ç³»è¯´æã</div>
<div>Engine &nbsp;ããè¿æ¥å¯¹è±¡&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;é©±å¨å¼æ</div>
<div>Session ããè¿æ¥æ± &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;äºå¡ &nbsp;ç±æ­¤å¼å§æ¥è¯¢</div>
<div>Model &nbsp; ããè¡¨&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ç±»å®ä¹</div>
<div>Column &nbsp;ã&nbsp; å &nbsp;</div>
<div>Query &nbsp; ããè¥å¹²è¡ &nbsp; &nbsp; &nbsp; &nbsp; å¯ä»¥é¾å¼æ·»å å¤ä¸ªæ¡ä»¶</div>
<div>&nbsp;</div>
<div>å¨ä½¿ç¨SQLAlchemyæ¶ï¼éå¸¸ä¼å°å¶ä¸æ°æ®åºå¯¹è±¡å¯¹åºèµ·æ¥ã</div>
<div><strong>SQLAlchemy</strong>: ä½¿ç¨&nbsp;<code>Table</code>&nbsp;å¯¹è±¡æ&nbsp;<code>Declarative Base</code>&nbsp;ä¸­çç±»æ¥è¡¨ç¤ºã</div>
<div><strong>å¯¹åºå³ç³»</strong>: æ°æ®åºä¸­çæ¯ä¸ä¸ªè¡¨å¯¹åºäºSQLAlchemyä¸­çä¸ä¸ªç±»ï¼è¯¥ç±»ç»§æ¿èª&nbsp;<code>declarative_base()</code>ã</div>
<div>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">from</span> sqlalchemy <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> Column, Integer, String, create_engine
</span><span style="color: rgba(0, 0, 255, 1)">from</span> sqlalchemy.ext.declarative <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> declarative_base

Base </span>=<span style="color: rgba(0, 0, 0, 1)"> declarative_base()

</span><span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> User(Base):
    </span><span style="color: rgba(128, 0, 128, 1)">__tablename__</span> = <span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">users</span><span style="color: rgba(128, 0, 0, 1)">'</span>  <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> æ°æ®åºè¡¨å</span>
    id = Column(Integer, primary_key=<span style="color: rgba(0, 0, 0, 1)">True)
    name </span>=<span style="color: rgba(0, 0, 0, 1)"> Column(String)
    email </span>= Column(String)</pre>
</div>
<p><strong>æ°æ®åºå (Database Column)ï¼</strong>ä½¿ç¨&nbsp;<code>Column</code>&nbsp;å¯¹è±¡æ¥è¡¨ç¤ºãæ¯ä¸ªæ°æ®åºè¡¨ä¸­çåå¨SQLAlchemyä¸­è¡¨ç¤ºä¸º&nbsp;<code>Column</code>&nbsp;å¯¹è±¡ï¼å¹¶ä½ä¸ºç±»çå±æ§å®ä¹ã</p>
<div>
<div class="cnblogs_code">
<pre>id = Column(Integer, primary_key=<span style="color: rgba(0, 0, 0, 1)">True)
name </span>= Column(String(50))</pre>
</div>
<p><strong>æ°æ®åºè¡ (Database Row)ï¼</strong>æ¯ä¸ªæ°æ®åºè¡¨çä¸ä¸ªå®ä¾ï¼å¯¹è±¡ï¼ä»£è¡¨æ°æ®åºè¡¨ä¸­çä¸è¡ãå¨SQLAlchemyä¸­ï¼éè¿å®ä¾åæ¨¡åç±»æ¥è¡¨ç¤ºæ°æ®åºè¡¨ä¸­çä¸è¡ã</p>
<div>
<div class="cnblogs_code">
<pre>new_user = User(id=1, name=<span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">John Doe</span><span style="color: rgba(128, 0, 0, 1)">'</span>, email=<span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">john@example.com</span><span style="color: rgba(128, 0, 0, 1)">'</span>)</pre>
</div>
<p><strong>ä¸»é® (Primary Key)</strong>ï¼ä½¿ç¨&nbsp;<code>primary_key=True</code>&nbsp;åæ°å®ä¹ä¸»é®ã</p>
</div>
</div>
<div>
<div class="cnblogs_code">
<pre>id = Column(Integer, primary_key=True)</pre>
</div>
<p><strong>å¤é® (Foreign Key): </strong>ä½¿ç¨&nbsp;<code>ForeignKey</code>&nbsp;å¯¹è±¡æ¥è¡¨ç¤ºã</p>
<div>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">from</span> sqlalchemy <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> ForeignKey
</span><span style="color: rgba(0, 0, 255, 1)">from</span> sqlalchemy.orm <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> relationship

</span><span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> Address(Base):
    </span><span style="color: rgba(128, 0, 128, 1)">__tablename__</span> = <span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">addresses</span><span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(0, 0, 0, 1)">
    id </span>= Column(Integer, primary_key=<span style="color: rgba(0, 0, 0, 1)">True)
    user_id </span>= Column(Integer, ForeignKey(<span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">users.id</span><span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(0, 0, 0, 1)">))
    user </span>= relationship(<span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">User</span><span style="color: rgba(128, 0, 0, 1)">'</span>)</pre>
</div>
<p><strong>å³ç³» (Relationships): </strong>ä½¿ç¨&nbsp;<code>relationship</code>&nbsp;å¯¹è±¡æ¥è¡¨ç¤ºãæ°æ®åºä¸­è¡¨ä¸è¡¨ä¹é´çå³ç³»å¨SQLAlchemyä¸­éè¿&nbsp;<code>relationship</code>&nbsp;æ¥å®ä¹ã</p>
<div>
<div class="cnblogs_code">
<pre>addresses = relationship(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Address</span><span style="color: rgba(128, 0, 0, 1)">"</span>, back_populates=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">user</span><span style="color: rgba(128, 0, 0, 1)">"</span>)</pre>
</div>
<p>&nbsp;</p>
</div>
</div>
</div>
</div>
<h3>2ãå¸¸è§çåè¡¨å¤ç</h3>
<p>ä¸é¢æä»¬éè¿å¼æ­¥å¤ççæ¹å¼ï¼ä»ç»å¦ä½å¨åè¡¨ä¸­æä½ç¸å³çæ°æ®åºæ°æ®ã</p>
<div class="cnblogs_code">
<pre>async <span style="color: rgba(0, 0, 255, 1)">def</span> get(self, db: AsyncSession, id: Any) -&gt;<span style="color: rgba(0, 0, 0, 1)"> Any:
    </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(128, 0, 0, 1)">æ ¹æ®ä¸»é®è·åä¸ä¸ªå¯¹è±¡</span><span style="color: rgba(128, 0, 0, 1)">"""</span>

    <span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)"> isinstance(id, str):
        query </span>= select(self.model).filter(func.lower(self.model.id) ==<span style="color: rgba(0, 0, 0, 1)"> id.lower())
    </span><span style="color: rgba(0, 0, 255, 1)">else</span><span style="color: rgba(0, 0, 0, 1)">:
        query </span>= select(self.model).filter(self.model.id ==<span style="color: rgba(0, 0, 0, 1)"> id)

    result </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(query)
    item </span>=<span style="color: rgba(0, 0, 0, 1)"> result.scalars().first()

    </span><span style="color: rgba(0, 0, 255, 1)">return</span> item</pre>
</div>
<p>å¦ææä»¬éè¦å¼ºå¶å¯¹å¤é®çç±»åè¿è¡å¹éï¼å¦å¯¹äºPostgresqlçä¸¥æ ¼è¦æ±ï¼æ°æ®æ¯è¾çç±»åå¿é¡»ä¸è´ï¼ï¼é£ä¹æä»¬éè¦å¨åºç±»æèCRUDç±»åå§åçæ¶åï¼è·å¾å¯¹åºçä¸»é®ç±»åã</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> BaseCrud(Generic[ModelType, PrimaryKeyType, PageDtoType, DtoType]):
    </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(128, 0, 0, 1)">
    åºç¡CRUDæä½ç±»ï¼ä¼ å¥åæ°è¯´æï¼
    * `ModelType`: SQLAlchemy æ¨¡åç±»
    * `PrimaryKeyType`: éå®ä¸»é®çç±»å
    * `PageDtoType`: åé¡µæ¥è¯¢è¾å¥ç±»
    * `DtoType`: æ°æ®ä¼ è¾å¯¹è±¡ç±»ï¼å¦æ°å¢ãæ´æ°çåä¸ªå¯¹è±¡DTO
    </span><span style="color: rgba(128, 0, 0, 1)">"""</span>

    <span style="color: rgba(0, 0, 255, 1)">def</span> <span style="color: rgba(128, 0, 128, 1)">__init__</span><span style="color: rgba(0, 0, 0, 1)">(self, model: Type[ModelType]):
        </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(128, 0, 0, 1)">
        æ°æ®åºè®¿é®æä½çåºç±»å¯¹è±¡(CRUD).
        * `model`: A SQLAlchemy model class
        </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(0, 0, 0, 1)">
        
        self.model </span>= model  <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> æ¨¡åç±»å</span>

        <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> è¿è¡æè·åä¸»é®å­æ®µç±»å</span>
        <strong><span style="color: rgba(255, 0, 0, 1)">pk_column</span> =</strong><span style="color: rgba(0, 0, 0, 1)"><strong> inspect(model).primary_key[0]</strong>
       <span style="color: rgba(255, 0, 0, 1)"><strong> self._pk_type </strong></span></span><span style="color: rgba(255, 0, 0, 1)"><strong>= pk_column.type.python_type</strong></span>  <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> int / str</span></pre>
</div>
<p>å æ­¤å¯¹äºåè¡¨çGetæ¹æ³ï¼æä»¬ä¿®æ¹ä¸ï¼è®©ä»å¹éä¸»é®çç±»åè¿è¡æ¯è¾ï¼è¿æ ·è¿å¯¹äºä¸¥æ ¼ç±»åå¤æ­çPostgresqlä¹æ­£å¸¸å¹éäºã</p>
<div class="cnblogs_code">
<pre>    async <span style="color: rgba(0, 0, 255, 1)">def</span> get(self, db: AsyncSession, id: PrimaryKeyType) -&gt;<span style="color: rgba(0, 0, 0, 1)"> Optional[ModelType]:
        </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(128, 0, 0, 1)">æ ¹æ®ä¸»é®è·åä¸ä¸ªå¯¹è±¡</span><span style="color: rgba(128, 0, 0, 1)">"""</span>
        
        <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)">å¯¹idçä¸»é®è¿è¡ç±»åè½¬æ¢ï¼self._pk_typeå¨æé å½æ°çåå§åä¸­è·å</span>
        <span style="color: rgba(0, 0, 255, 1)">try</span><span style="color: rgba(0, 0, 0, 1)">:
            id </span>=<span style="color: rgba(0, 0, 0, 1)"> self._pk_type(id)
        </span><span style="color: rgba(0, 0, 255, 1)">except</span><span style="color: rgba(0, 0, 0, 1)"> Exception:
            </span><span style="color: rgba(0, 0, 255, 1)">raise</span> ValueError(f<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Invalid primary key type: {id}</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">)
        
        </span><span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)"> isinstance(id, str):
            query </span>= select(self.model).filter(func.lower(self.model.id) ==<span style="color: rgba(0, 0, 0, 1)"> id.lower())
        </span><span style="color: rgba(0, 0, 255, 1)">else</span><span style="color: rgba(0, 0, 0, 1)">:
            query </span>= select(self.model).filter(self.model.id ==<span style="color: rgba(0, 0, 0, 1)"> id)

        result </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(query)
        item </span>=<span style="color: rgba(0, 0, 0, 1)"> result.scalars().first()

        </span><span style="color: rgba(0, 0, 255, 1)">return</span> item</pre>
</div>
<p>å¯¹äºå é¤çæ°æ®ï¼æä»¬ä¹å¯ä»¥ç±»ä¼¼çå¤çå¯¹æ¯è¿è¡äºã</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">from</span> sqlalchemy.orm <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> Session, Query
</span><span style="color: rgba(0, 0, 255, 1)">from</span> sqlalchemy.ext.asyncio <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> AsyncSession
</span><span style="color: rgba(0, 0, 255, 1)">from</span> sqlalchemy <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> delete as sa_delete, update as sa_update

async </span><span style="color: rgba(0, 0, 255, 1)">def</span> delete_byid(self, db: AsyncSession, id: PrimaryKeyType) -&gt;<span style="color: rgba(0, 0, 0, 1)"> bool:
    </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(128, 0, 0, 1)">æ ¹æ®ä¸»é®å é¤ä¸ä¸ªå¯¹è±¡
    
    :param id: ä¸»é®å¼
    </span><span style="color: rgba(128, 0, 0, 1)">"""</span>
    
    <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)">å¯¹idçä¸»é®è¿è¡ç±»åè½¬æ¢ï¼self._pk_typeå¨æé å½æ°çåå§åä¸­è·å</span>
    <span style="color: rgba(0, 0, 255, 1)">try</span><span style="color: rgba(0, 0, 0, 1)">:
        id </span>=<span style="color: rgba(0, 0, 0, 1)"> self._pk_type(id)
    </span><span style="color: rgba(0, 0, 255, 1)">except</span><span style="color: rgba(0, 0, 0, 1)"> Exception:
        </span><span style="color: rgba(0, 0, 255, 1)">raise</span> ValueError(f<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Invalid primary key type: {id}</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">)
    
    del_query: sa_delete
    </span><span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)"> isinstance(id, str):
        del_query </span>=<span style="color: rgba(0, 0, 0, 1)"> sa_delete(self.model).where(
            func.lower(self.model.id) </span>==<span style="color: rgba(0, 0, 0, 1)"> id.lower()
        )
    </span><span style="color: rgba(0, 0, 255, 1)">else</span><span style="color: rgba(0, 0, 0, 1)">:
        del_query </span>= sa_delete(self.model).where(self.model.id ==<span style="color: rgba(0, 0, 0, 1)"> id)

    result </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(del_query)

    await db.commit()
    </span><span style="color: rgba(0, 0, 255, 1)">return</span> result.rowcount &gt; 0</pre>
</div>
<p>å¯¹äºæä¾å¤æ¡ä»¶çæ¥è¯¢æèè¿æ»¤ï¼æä»¬å¯ä»¥ä½¿ç¨<strong>where</strong>å½æ°æè<strong>filter</strong>å½æ°ï¼å¨ SQLAlchemy ä¸­ï¼<code>select(...).where(...)</code>&nbsp;å&nbsp;<code>select(...).filter(...)</code>&nbsp;é½ç¨äºæé æ¥è¯¢æ¡ä»¶ï¼å¦ä¸æç¤ºç­æã</p>
<div class="cnblogs_code">
<pre>query = select(self.model).where(self.model.id ==<span style="color: rgba(0, 0, 0, 1)"> id)

query </span>= select(self.model).filter(self.model.id == id)</pre>
</div>
<p>æä»¬å¯ä»¥éè¿sqlAlchemyçand_åor_å½æ°æ¥è¿è¡ç»åå¤ä¸ªæ¡ä»¶ã</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">from</span> sqlalchemy <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> ( Table,Column,and_,or_,asc,desc,select,func,distinct,text, Integer)

....
    match expression:
        case </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">and</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">:
            query </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(
                select(self.model)
               <span style="color: rgba(255, 0, 0, 1)"><strong> .filter(and_(</strong></span></span><span style="color: rgba(255, 0, 0, 1)"><strong>*</strong></span><span style="color: rgba(0, 0, 0, 1)"><span style="color: rgba(255, 0, 0, 1)"><strong>where_list))</strong></span>
                .order_by(</span>*<span style="color: rgba(0, 0, 0, 1)">order_by_list)
            )
        case </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">or</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">:
            query </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(
                select(self.model).<strong><span style="color: rgba(255, 0, 0, 1)">filter(or_(</span></strong></span><strong><span style="color: rgba(255, 0, 0, 1)">*where_list))</span></strong>.order_by(*<span style="color: rgba(0, 0, 0, 1)">order_by_list)
            )</span></pre>
</div>
<p>PythonçSqlAlchemyæä¾&nbsp;InstrumentedAttribute å¯¹è±¡æ¥æä½å¤ä¸ªæ¡ä»¶ï¼å¦æä»¬å¯¹äºä¸äºå¤æ¡ä»¶çå¤çï¼å¯ä»¥å©ç¨å®æ¥ä¼ éå¤ä¸ªåæ°ã</p>
<div class="cnblogs_code">
<pre>    async <span style="color: rgba(0, 0, 255, 1)">def</span><span style="color: rgba(0, 0, 0, 1)"> get_all_by_attributes(
        self, db: AsyncSession, </span>*attributes: InstrumentedAttribute, sorting: str = <span style="color: rgba(128, 0, 0, 1)">""</span><span style="color: rgba(0, 0, 0, 1)">
    ) </span>-&gt; List[ModelType] |<span style="color: rgba(0, 0, 0, 1)"> None:
        </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(128, 0, 0, 1)">æ ¹æ®ååç§°åå¼è·åç¸å³çå¯¹è±¡åè¡¨

        :param sorting: æ ¼å¼ï¼name asc æ name asc,age desc
        :param attributes: SQLAlchemy InstrumentedAttribute objectsï¼å¯ä»¥è¾å¥å¤ä¸ªæ¡ä»¶
        ä¾å­ï¼User.id != 1 æè User.username == "JohnDoe"
        </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(0, 0, 0, 1)">

        order_by_list </span>=<span style="color: rgba(0, 0, 0, 1)"> parse_sort_string(sorting, self.model)
        query </span>= select(self.model).filter(and_(*attributes)).order_by(*<span style="color: rgba(0, 0, 0, 1)">order_by_list)
        
        result </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(query)
        </span><span style="color: rgba(0, 0, 255, 1)">return</span> result.scalars().all()</pre>
</div>
<p>ä¾å¦ï¼å¯¹äº æ¨¡å&nbsp;Material å¯¹è±¡ï¼æä»¬å¯¹å®è¿è¡å¤ä¸ªæ¡ä»¶çæ¥è¯¢å¤çï¼å¦ä¸æç¤ºï¼çº¢è²é¨åä¸º *attributes: InstrumentedAttribute åæ°ã</p>
<div class="cnblogs_code">
<pre>items =<span style="color: rgba(0, 0, 0, 1)"> await super().get_all_by_attributes(
    db,
<span style="color: rgba(255, 0, 0, 1)"><strong>    Material.id </strong></span></span><span style="color: rgba(255, 0, 0, 1)"><strong>== vercol.id,
    Material.vercol == vercol.vercol,
    Material.ischecked == 0,
    Material.status ==</strong></span><span style="color: rgba(0, 0, 0, 1)"><span style="color: rgba(255, 0, 0, 1)"><strong> 0,</strong></span>
)</span></pre>
</div>
<p>åæ ·æä»¬å¯ä»¥å©ç¨å®æ¥è·åæ°éï¼æèå¤æ­å¤æ¡ä»¶çè®°å½æ¯å¦å­å¨ã</p>
<p><img src="https://img2024.cnblogs.com/blog/8867/202512/8867-20251225103430193-1873231330.png" alt="image" width="944" height="532" loading="lazy"></p>
<p>&nbsp;å¨æ°æ®æå¥æèæ´æ°çæä½ä¸­ï¼æä»¬å¯ä»¥æ¥åå¯¹è±¡ç±»åæèå­å¸ç±»åçåæ°å¯¹è±¡ï¼å æ­¤æ¹æ³å¦ä¸æç¤ºã</p>
<div class="cnblogs_code">
<pre>   async <span style="color: rgba(0, 0, 255, 1)">def</span> update(self, db: AsyncSession, obj_in: DtoType | dict[str, Any]) -&gt;<span style="color: rgba(0, 0, 0, 1)"> bool:
        </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(128, 0, 0, 1)">æ´æ°å¯¹è±¡
        
        :param obj_in: å¯¹è±¡è¾å¥æ°æ®,å¯ä»¥æ¯ DTO å¯¹è±¡æå­å¸
        </span><span style="color: rgba(128, 0, 0, 1)">"""</span>
        <span style="color: rgba(0, 0, 255, 1)">try</span><span style="color: rgba(0, 0, 0, 1)">:
            </span><span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)"> isinstance(obj_in, dict):
                obj_id </span>= obj_in.get(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">id</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">)
                </span><span style="color: rgba(0, 0, 255, 1)">if</span> obj_id <span style="color: rgba(0, 0, 255, 1)">is</span><span style="color: rgba(0, 0, 0, 1)"> None:
                    </span><span style="color: rgba(0, 0, 255, 1)">raise</span> ValueError(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">id is required for update</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">)
                update_data </span>=<span style="color: rgba(0, 0, 0, 1)"> obj_in
            </span><span style="color: rgba(0, 0, 255, 1)">else</span><span style="color: rgba(0, 0, 0, 1)">:
                obj_id </span>=<span style="color: rgba(0, 0, 0, 1)"> obj_in.id
                </span><span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> update_data = vars(obj_in)  </span>
                update_data = obj_in.model_dump(exclude_unset=<span style="color: rgba(0, 0, 0, 1)">True)

            query </span>= select(self.model).filter(self.model.id ==<span style="color: rgba(0, 0, 0, 1)"> obj_id)
            result </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(query)
            db_obj </span>=<span style="color: rgba(0, 0, 0, 1)"> result.scalars().first()

            </span><span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)"> db_obj:
                </span><span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> æ´æ°å¯¹è±¡å­æ®µ</span>
                <span style="color: rgba(0, 0, 255, 1)">for</span> field, value <span style="color: rgba(0, 0, 255, 1)">in</span><span style="color: rgba(0, 0, 0, 1)"> update_data.items():
                    </span><span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> è·³è¿ä»¥ "_" å¼å¤´çç§æå±æ§</span>
                    <span style="color: rgba(0, 0, 255, 1)">if</span> field.startswith(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">_</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">):
                        </span><span style="color: rgba(0, 0, 255, 1)">continue</span><span style="color: rgba(0, 0, 0, 1)">
                    setattr(db_obj, field, value)

                </span><span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> å¤çæ´æ°åçåè°å¤ç</span>
<span style="color: rgba(255, 0, 0, 1)"><strong>                self.on_before_update(update_data, db_obj)
                </strong></span><span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> æäº¤äºå¡</span>
<span style="color: rgba(0, 0, 0, 1)">                await db.commit()
                </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> True
            </span><span style="color: rgba(0, 0, 255, 1)">else</span><span style="color: rgba(0, 0, 0, 1)">:
                </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> False
        </span><span style="color: rgba(0, 0, 255, 1)">except</span><span style="color: rgba(0, 0, 0, 1)"> SQLAlchemyError as e:
            self.logger.error(f</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">update æä½åºç°éè¯¯: {e}</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">)
            await db.rollback()  </span><span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> ç¡®ä¿å¨åºéæ¶åæ»äºå¡</span>
            <span style="color: rgba(0, 0, 255, 1)">return</span> False</pre>
</div>
<p>æä»¬å¨æå¥æèæ´æ°æ°æ®çæ¶åï¼ä¸è¬ä¼é»è®¤æ´æ°ä¸äºå­æ®µï¼å¦åå»ºäººï¼åå»ºæ¥æãç¼è¾äººï¼ç¼è¾æ¥æç­ä¿¡æ¯ï¼æä»¬å¯ä»¥æå®åç¬ä½ä¸ºä¸ä¸ªå¯ä»¥ç»å­ç±»éåçå½æ°ï¼åºç±»åä¸äºé»è®¤çå¤çã</p>
<div class="cnblogs_code">
<pre>    <span style="color: rgba(0, 0, 255, 1)">def</span> on_before_update(self, update_data: dict[str, Any], db_obj: ModelType) -&gt;<span style="color: rgba(0, 0, 0, 1)"> None:
        </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(128, 0, 0, 1)">æ´æ°å¯¹è±¡åçåè°å½æ°ï¼å­ç±»å¯ä»¥éåæ­¤æ¹æ³

        å¯éè¿ setattr(db_obj, field, value) è®¾ç½®å­æ®µå¼
        </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(0, 0, 0, 1)">
        
        setattr(db_obj, </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">edittime</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, datetime.now())
        user :CurrentUserIns  </span>=<span style="color: rgba(0, 0, 0, 1)"> get_current_user()
        </span><span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)"> user:
            setattr(db_obj, </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">editor</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, user.fullname)
            setattr(db_obj, </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">editor_id</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, user.id)

            setattr(db_obj, </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">company_id</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, user.company_id)
            setattr(db_obj, </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">companyname</span><span style="color: rgba(128, 0, 0, 1)">"</span>, user.companyname)</pre>
</div>
<p>ææ¶åï¼å¦ææä»¬éè¦è·åæä¸ªå­æ®µééå¤çåè¡¨ï¼ç¨æ¥åä¸ºå¨æä¸æåè¡¨çæ°æ®ï¼é£ä¹æä»¬å¯ä»¥éè¿ä¸é¢å½æ°å°è£ä¸ã</p>
<div class="cnblogs_code">
<pre>    async <span style="color: rgba(0, 0, 255, 1)">def</span> get_field_list(self, db: AsyncSession, field_name: str) -&gt;<span style="color: rgba(0, 0, 0, 1)"> Iterable[str]:
        </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(128, 0, 0, 1)">è·åæå®å­æ®µå¼çå¯ä¸åè¡¨

        :param field_name: å­æ®µåç§°
        </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(0, 0, 0, 1)">

        field </span>=<span style="color: rgba(0, 0, 0, 1)"> getattr(self.model, field_name)
        query </span>=<span style="color: rgba(0, 0, 0, 1)"> select(distinct(field))
        result </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(query)
        </span><span style="color: rgba(0, 0, 255, 1)">return</span> result.scalars().all()</pre>
</div>
<p>&nbsp;</p>
<h3>3ãå¤è¡¨èåçå¤çæä½&nbsp;</h3>
<p>å¤è¡¨æä½ï¼ä¹æ¯æä»¬ç»å¸¸ç¢°å°çå¤çæ¹å¼ï¼å¦å¯¹äºå­å¸ç±»ååå­å¸é¡¹ç®ï¼ä»ä»¬æ¯ä¸¤ä¸ªè¡¨ï¼éè¦èåèµ·æ¥è·åæ°æ®ï¼é£ä¹å°±éè¦å¤è¡¨çèåæä½ã</p>
<p><img src="https://img2024.cnblogs.com/blog/8867/202512/8867-20251225110211988-1085898697.png" alt="image" width="238" height="326" loading="lazy"></p>
<p>&nbsp;å¦ä¸æ¯å­å¸CRUDç±»ä¸­ï¼èåå­å¸ç±»åè·åæ°æ®çè®°å½å¤çã</p>
<div class="cnblogs_code">
<pre>    async <span style="color: rgba(0, 0, 255, 1)">def</span> get_dict_by_typename(self, db: AsyncSession, dicttype_name: str) -&gt;<span style="color: rgba(0, 0, 0, 1)"> dict:
        </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(128, 0, 0, 1)">æ ¹æ®å­å¸ç±»ååç§°è·åææè¯¥ç±»åçå­å¸åè¡¨éå</span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(0, 0, 0, 1)">
        result </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(
            select(self.model)
            <span style="color: rgba(255, 0, 0, 1)"><strong>.join(DictType, DictType.id </strong></span></span><span style="color: rgba(255, 0, 0, 1)"><strong>== self.model.dicttype_id)</strong></span>  <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> å³èå­å¸ç±»åè¡¨</span>
            <strong><span style="color: rgba(255, 0, 0, 1)">.filter(DictType.name == dicttype_name)</span> </strong> <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> è¿æ»¤å­å¸ç±»ååç§°</span>
            .order_by(DictData.seq)  <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> æåº</span>
<span style="color: rgba(0, 0, 0, 1)">        )
        items </span>=<span style="color: rgba(0, 0, 0, 1)"> result.scalars().all()

        dict </span>=<span style="color: rgba(0, 0, 0, 1)"> {}
        </span><span style="color: rgba(0, 0, 255, 1)">for</span> info <span style="color: rgba(0, 0, 255, 1)">in</span><span style="color: rgba(0, 0, 0, 1)"> items:
            </span><span style="color: rgba(0, 0, 255, 1)">if</span> info.name <span style="color: rgba(0, 0, 255, 1)">not</span> <span style="color: rgba(0, 0, 255, 1)">in</span><span style="color: rgba(0, 0, 0, 1)"> dict:
                dict[info.name] </span>=<span style="color: rgba(0, 0, 0, 1)"> info.value

        </span><span style="color: rgba(0, 0, 255, 1)">return</span> dict</pre>
</div>
<p>å¦ææä»¬éè¦å¯¹æä¸ªè¡¨çéå½è·åæ åè¡¨ï¼å¯ä»¥å¦ä¸å¤ç</p>
<div class="cnblogs_code">
<pre>    async <span style="color: rgba(0, 0, 255, 1)">def</span> get_tree(self, db: AsyncSession, pid: str) -&gt;<span style="color: rgba(0, 0, 0, 1)"> list[DictType]:
        </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(128, 0, 0, 1)">è·åå­å¸ç±»åä¸çº§åè¡¨åå¶ä¸é¢çåå®¹</span><span style="color: rgba(128, 0, 0, 1)">"""</span>

        <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> ä½¿ç¨ä¸åè¿ç®ç¬¦å° pid è®¾ä¸º "-1"ï¼å¦æ pid æ¯ null æç©ºç½ï¼æä¿æåå¼</span>
        pid = <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">-1</span><span style="color: rgba(128, 0, 0, 1)">"</span> <span style="color: rgba(0, 0, 255, 1)">if</span> <span style="color: rgba(0, 0, 255, 1)">not</span> pid <span style="color: rgba(0, 0, 255, 1)">or</span> pid.strip() == <span style="color: rgba(128, 0, 0, 1)">""</span> <span style="color: rgba(0, 0, 255, 1)">else</span><span style="color: rgba(0, 0, 0, 1)"> pid
        result </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(
            select(self.model)
            .filter(self.model.pid </span>==<span style="color: rgba(0, 0, 0, 1)"> pid)
            .options(selectinload(DictType.children))
        )
        nodes </span>=<span style="color: rgba(0, 0, 0, 1)"> result.scalars().all()
        </span><span style="color: rgba(0, 0, 255, 1)">return</span> nodes</pre>
</div>
<p>æä»¬æ¥åè®¾ç¨æ·åæç« çç¤ºä¾è¡¨ç»æï¼ORM æ¨¡åï¼å¦ä¸æç¤ºã</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> User(Base):
    </span><span style="color: rgba(128, 0, 128, 1)">__tablename__</span> = <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">users</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">
    id </span>= Column(Integer, primary_key=True, index=<span style="color: rgba(0, 0, 0, 1)">True)
    name </span>=<span style="color: rgba(0, 0, 0, 1)"> Column(String)
    email </span>=<span style="color: rgba(0, 0, 0, 1)"> Column(String)
<span style="color: rgba(255, 0, 0, 1)">    articles </span></span><span style="color: rgba(255, 0, 0, 1)">= <strong>relationship</strong>("Article", back_populates="author")


</span><span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> Article(Base):
    </span><span style="color: rgba(128, 0, 128, 1)">__tablename__</span> = <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">articles</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">
    id </span>= Column(Integer, primary_key=True, index=<span style="color: rgba(0, 0, 0, 1)">True)
    title </span>=<span style="color: rgba(0, 0, 0, 1)"> Column(String)
    content </span>=<span style="color: rgba(0, 0, 0, 1)"> Column(Text)
<span style="color: rgba(255, 0, 0, 1)">    user_id </span></span><span style="color: rgba(255, 0, 0, 1)">= Column(Integer, <strong>ForeignKey</strong>("users.id"))
    author = <strong>relationship</strong>("User", back_populates="articles")</span></pre>
</div>
<p>æä»¬å¯ä»¥éè¿ä¸é¢å½æ°å¤çè·å¾ç¸å³çè®°å½éåã</p>
<div class="cnblogs_code">
<pre>async <span style="color: rgba(0, 0, 255, 1)">def</span><span style="color: rgba(0, 0, 0, 1)"> get_user_articles(db: AsyncSession):
    stmt </span>=<span style="color: rgba(0, 0, 0, 1)"> (
        select(User, Article)
        .<span style="color: rgba(255, 0, 0, 1)"><strong>join</strong></span>(Article, Article.user_id </span>==<span style="color: rgba(0, 0, 0, 1)"> User.id)
    )
    result </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(stmt)
    </span><span style="color: rgba(0, 0, 255, 1)">return</span> result.all()   <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> [<strong><span style="color: rgba(255, 0, 0, 1)">(User(), Article()), .</span></strong>..]</span></pre>
</div>
<p>å¦æéè¦å¯ä»¥ä½¿ç¨outer_joinå½æ°å¤ç</p>
<div class="cnblogs_code">
<pre>async <span style="color: rgba(0, 0, 255, 1)">def</span><span style="color: rgba(0, 0, 0, 1)"> get_users_with_articles(db: AsyncSession):
    stmt </span>=<span style="color: rgba(0, 0, 0, 1)"> (
        select(User, Article)
        .<span style="color: rgba(255, 0, 0, 1)"><strong>outerjoin</strong></span>(Article, Article.user_id </span>==<span style="color: rgba(0, 0, 0, 1)"> User.id)
    )
    result </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(stmt)
    </span><span style="color: rgba(0, 0, 255, 1)">return</span> result.all()  <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> ç¨æ·å³ä¾¿æ²¡ææç« ä¹ä¼åºç°</span></pre>
</div>
<p>&nbsp;</p>
<p>å¦ææä»¬éè¦è·åææç« çææç¨æ·ï¼å¦ä¸æç¤ºã</p>
<div class="cnblogs_code">
<pre>async <span style="color: rgba(0, 0, 255, 1)">def</span><span style="color: rgba(0, 0, 0, 1)"> get_users_with_articles(db: AsyncSession):
    stmt </span>= select(User).options(<span style="color: rgba(255, 0, 0, 1)"><strong>selectinload</strong></span>(User.articles))  <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> èªå¨ load å³è</span>
    result =<span style="color: rgba(0, 0, 0, 1)"> await db.execute(stmt)
    </span><span style="color: rgba(0, 0, 255, 1)">return</span> result.scalars().all()</pre>
</div>
<p><code data-start="1468" data-end="1482">selectinload</code> ä¼æ§è¡ä¸¤æ¬¡ SQLï¼ä½æçé«ï¼ä¸ä¼äº§çç¬å¡å°ç§¯ï¼éå¸¸éåéåæ¥è¯¢ã</p>
<p>å¤è¡¨é¾å¼ Joinçå¤çï¼å¯ä»¥è·å¾ä¸¤ä¸ªè¡¨çä¸åä¿¡æ¯è¿è¡ç»åã</p>
<div class="cnblogs_code">
<pre>async <span style="color: rgba(0, 0, 255, 1)">def</span><span style="color: rgba(0, 0, 0, 1)"> get_articles_with_author(db: AsyncSession):
    stmt </span>=<span style="color: rgba(0, 0, 0, 1)"> (
        select(Article.title, User.name.label(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">author</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">))
        .join(User, Article.user_id </span>==<span style="color: rgba(0, 0, 0, 1)"> User.id)
    )
    rows </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(stmt)
    </span><span style="color: rgba(0, 0, 255, 1)">return</span> <span style="color: rgba(255, 0, 0, 1)"><strong>rows.mappings().all()</strong></span>  <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> ä»¥ dict å½¢å¼è¿å [{'title':..., 'author':...}]</span></pre>
</div>
<p>å¸¦ç­éæ¡ä»¶ä¸åé¡µçå¤çå®ç°ï¼å¦ä¸æç¤º</p>
<div class="cnblogs_code">
<pre>async <span style="color: rgba(0, 0, 255, 1)">def</span> search_articles(db: AsyncSession, keyword: str, page: int = 1, size: int = 10<span style="color: rgba(0, 0, 0, 1)">):
    stmt </span>=<span style="color: rgba(0, 0, 0, 1)"> (
        select(Article, User.name.label(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">author</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">))
        .join(User)
        .filter(Article.title.contains(keyword))
        .offset((page </span>- 1) *<span style="color: rgba(0, 0, 0, 1)"> size)
        .limit(size)
    )
    result </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(stmt)
    </span><span style="color: rgba(0, 0, 255, 1)">return</span> result.mappings().all()</pre>
</div>
<p>&nbsp;</p>
<p>å¯¹äºæéç®¡çç³»ç»æ¥è¯´ï¼ä¸è¬æç¨æ·ãè§è²ï¼ä»¥åç¨æ·è§è²çä¸­é´è¡¨ï¼ä¸è¬æ¥è¯´ä»ä»¬çå³ç³»å¦ä¸</p>
<p><img src="https://img2024.cnblogs.com/blog/8867/202512/8867-20251225122040874-818263456.png" alt="image" width="729" height="363" loading="lazy"></p>
<p>&nbsp;å¨çé¢ä¸­ä¸è¬ä¼æä¾éæ©ç¨æ·çæä½å³èï¼å¦è§è²ä¸­ç»´æ¤ç¨æ·åè¡¨ã</p>
<p><img src="https://img2024.cnblogs.com/blog/8867/202512/8867-20251225121122302-651245416.png" alt="image" width="481" height="426" loading="lazy"></p>
<p>&nbsp;æä»¬æ¥ççè¿ä¸ªå¨SQLAlchemyæä½³å®è·µæ¯å¦ä½çæä½ã</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">from</span> sqlalchemy <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> Table, Column, Integer, ForeignKey
</span><span style="color: rgba(0, 0, 255, 1)">from</span> sqlalchemy.orm <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> relationship, Mapped, mapped_column
</span><span style="color: rgba(0, 0, 255, 1)">from</span> database <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> Base

</span><span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> --- ä¸­é´è¡¨åæ³ ---</span>
role_user =<span style="color: rgba(0, 0, 0, 1)"> Table(
    </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">role_user</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
    Base.metadata,
    Column(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">user_id</span><span style="color: rgba(128, 0, 0, 1)">"</span>, ForeignKey(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">users.id</span><span style="color: rgba(128, 0, 0, 1)">"</span>), primary_key=<span style="color: rgba(0, 0, 0, 1)">True),
    Column(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">role_id</span><span style="color: rgba(128, 0, 0, 1)">"</span>, ForeignKey(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">roles.id</span><span style="color: rgba(128, 0, 0, 1)">"</span>), primary_key=<span style="color: rgba(0, 0, 0, 1)">True)
)

</span><span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> User(Base):
    </span><span style="color: rgba(128, 0, 128, 1)">__tablename__</span> = <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">users</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">
    id: Mapped[int] </span>= mapped_column(primary_key=<span style="color: rgba(0, 0, 0, 1)">True)
    username: Mapped[str] </span>=<span style="color: rgba(0, 0, 0, 1)"> mapped_column()

    roles: Mapped[list[</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Role</span><span style="color: rgba(128, 0, 0, 1)">"</span>]] =<span style="color: rgba(0, 0, 0, 1)"> relationship(
        secondary</span>=<span style="color: rgba(0, 0, 0, 1)">role_user,
        back_populates</span>=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">users</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
        lazy</span>=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">selectin</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">
    )

</span><span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> Role(Base):
    </span><span style="color: rgba(128, 0, 128, 1)">__tablename__</span> = <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">roles</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">
    id: Mapped[int] </span>= mapped_column(primary_key=<span style="color: rgba(0, 0, 0, 1)">True)
    name: Mapped[str] </span>=<span style="color: rgba(0, 0, 0, 1)"> mapped_column()

    users: Mapped[list[User]] </span>=<span style="color: rgba(0, 0, 0, 1)"> relationship(
        secondary</span>=<span style="color: rgba(0, 0, 0, 1)">role_user,
        back_populates</span>=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">roles</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
        lazy</span>=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">selectin</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">
    )</span></pre>
</div>
<p>å¨ SQLAlchemy å£°æå¤å¯¹å¤å³ç³»æ¶ï¼<code data-start="22" data-end="33">secondary</code> åæ°æ¢å¯ä»¥å¡« <strong data-start="41" data-end="53">å­ç¬¦ä¸²å½¢å¼çè¡¨å</strong>ï¼ä¹å¯ä»¥å¡« <strong data-start="59" data-end="84">å·²ç»å®ä¹å¥½çä¸­é´è¡¨å¯¹è±¡ï¼Table å¯¹è±¡ï¼ã</strong></p>
<p><strong data-start="59" data-end="84">â  econdary="role_user" ââ ä½¿ç¨å­ç¬¦ä¸²è¡¨å</strong></p>
<div class="cnblogs_code">
<pre>roles = relationship(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Role</span><span style="color: rgba(128, 0, 0, 1)">"</span>, secondary=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">role_user</span><span style="color: rgba(128, 0, 0, 1)">"</span>, back_populates=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">users</span><span style="color: rgba(128, 0, 0, 1)">"</span>)</pre>
</div>
<p><strong>â¡ secondary=role_user ââ ä¼ å¥ä¸­é´è¡¨å¯¹è±¡ï¼æ¨èæ¹å¼ï¼</strong></p>
<div class="cnblogs_code">
<pre>role_user =<span style="color: rgba(0, 0, 0, 1)"> Table(
    </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">role_user</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
    Base.metadata,
    Column(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">user_id</span><span style="color: rgba(128, 0, 0, 1)">"</span>, ForeignKey(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">users.id</span><span style="color: rgba(128, 0, 0, 1)">"</span>), primary_key=<span style="color: rgba(0, 0, 0, 1)">True),
    Column(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">role_id</span><span style="color: rgba(128, 0, 0, 1)">"</span>, ForeignKey(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">roles.id</span><span style="color: rgba(128, 0, 0, 1)">"</span>), primary_key=<span style="color: rgba(0, 0, 0, 1)">True)
)

roles </span>= relationship(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Role</span><span style="color: rgba(128, 0, 0, 1)">"</span>, secondary=role_user, back_populates=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">users</span><span style="color: rgba(128, 0, 0, 1)">"</span>)</pre>
</div>
<p>å¯¹äºå¦æè·åå¯¹åºè§è²çç¨æ·è®°å½ï¼æä»¬å¯ä»¥éè¿ä¸é¢æ¹å¼è·åï¼éè¿è¿æ¥ä¸­é´è¡¨çæ¹å¼ï¼</p>
<div class="cnblogs_code">
<pre>async <span style="color: rgba(0, 0, 255, 1)">def</span> get_users_by_role(db: AsyncSession, role_id: int) -&gt;<span style="color: rgba(0, 0, 0, 1)"> list[User]:
    stmt </span>=<span style="color: rgba(0, 0, 0, 1)"> (
        select(User)
        .join(role_user, role_user.c.user_id </span>==<span style="color: rgba(0, 0, 0, 1)"> User.id)
        .where(role_user.c.role_id </span>==<span style="color: rgba(0, 0, 0, 1)"> role_id)
    )
    result </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(stmt)
    </span><span style="color: rgba(0, 0, 255, 1)">return</span> result.scalars().all()</pre>
</div>
<p>ä¹å¯ä»¥ä¸é¢çæ¹å¼è¿è¡å¤çï¼ä½¿ç¨ relationship any()ï¼ï¼æææ¯ä¸æ ·çã</p>
<div class="cnblogs_code">
<pre>select(User).filter(User.roles.any(id=role_id))</pre>
</div>
<p>å¦æéè¦åå¥ç¨æ·ãè§è²çå³èå³ç³»ï¼æä»¬å¯ä»¥ä½¿ç¨ä¸é¢æ¹æ³æ¥éè¿ä¸­é´è¡¨è¿è¡å¤æ­å¹¶åå¥è®°å½ã</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">from</span> sqlalchemy <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> select, insert

async </span><span style="color: rgba(0, 0, 255, 1)">def</span><span style="color: rgba(0, 0, 0, 1)"> add_users_to_role(db: AsyncSession, role_id: int, user_ids: list[int]):
    </span><span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> 1ï¸â£ æ¥è¯¢å·²æå³è user_id</span>
    stmt = select(role_user.c.user_id).where(role_user.c.role_id ==<span style="color: rgba(0, 0, 0, 1)"> role_id)
    res </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(stmt)
    existing_user_ids </span>= {row[0] <span style="color: rgba(0, 0, 255, 1)">for</span> row <span style="color: rgba(0, 0, 255, 1)">in</span><span style="color: rgba(0, 0, 0, 1)"> res.fetchall()}

    </span><span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> 2ï¸â£ è¿æ»¤åºæ°ç user_id</span>
    new_user_ids = [uid <span style="color: rgba(0, 0, 255, 1)">for</span> uid <span style="color: rgba(0, 0, 255, 1)">in</span> user_ids <span style="color: rgba(0, 0, 255, 1)">if</span> uid <span style="color: rgba(0, 0, 255, 1)">not</span> <span style="color: rgba(0, 0, 255, 1)">in</span><span style="color: rgba(0, 0, 0, 1)"> existing_user_ids]
    </span><span style="color: rgba(0, 0, 255, 1)">if</span> <span style="color: rgba(0, 0, 255, 1)">not</span><span style="color: rgba(0, 0, 0, 1)"> new_user_ids:
        </span><span style="color: rgba(0, 0, 255, 1)">return</span> 0  <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> æ²¡ææ°å¢</span>

    <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> 3ï¸â£ æ¹éæå¥</span>
    values = [{<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">user_id</span><span style="color: rgba(128, 0, 0, 1)">"</span>: uid, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">role_id</span><span style="color: rgba(128, 0, 0, 1)">"</span>: role_id} <span style="color: rgba(0, 0, 255, 1)">for</span> uid <span style="color: rgba(0, 0, 255, 1)">in</span><span style="color: rgba(0, 0, 0, 1)"> new_user_ids]
    stmt </span>=<span style="color: rgba(0, 0, 0, 1)"> insert(role_user).values(values)
    await db.execute(stmt)
    await db.commit()

    </span><span style="color: rgba(0, 0, 255, 1)">return</span> len(new_user_ids)</pre>
</div>
<p>å¦æåªæ¯åä¸ªè®°å½çæå¥ï¼å¯ä»¥å©ç¨ä¸é¢çæ¹å¼å¤çã</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">from</span> sqlalchemy <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> select, insert

async </span><span style="color: rgba(0, 0, 255, 1)">def</span> add_user_to_role(db: AsyncSession, role_id: int, user_id: int) -&gt;<span style="color: rgba(0, 0, 0, 1)"> bool:
    </span><span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> 1ï¸â£ æ£æ¥æ¯å¦å·²å­å¨å³è</span>
    stmt =<span style="color: rgba(0, 0, 0, 1)"> select(role_user).where(
        role_user.c.role_id </span>==<span style="color: rgba(0, 0, 0, 1)"> role_id,
        role_user.c.user_id </span>==<span style="color: rgba(0, 0, 0, 1)"> user_id
    )
    res </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(stmt)
    exists </span>=<span style="color: rgba(0, 0, 0, 1)"> res.first()

    </span><span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)"> exists:
        </span><span style="color: rgba(0, 0, 255, 1)">return</span> False  <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> å·²å­å¨ï¼ä¸åæå¥</span>

    <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> 2ï¸â£ æå¥è®°å½</span>
    stmt = insert(role_user).values(user_id=user_id, role_id=<span style="color: rgba(0, 0, 0, 1)">role_id)
    await db.execute(stmt)
    await db.commit()

    </span><span style="color: rgba(0, 0, 255, 1)">return</span> True</pre>
</div>
<p>ä»¥ä¸å°±æ¯å¯¹äºå¨Python+FastAPIçåç«¯é¡¹ç®ä¸­ä½¿ç¨SqlAlchemyæä½æ°æ®çå ç§å¸¸è§æ¹å¼ï¼åæ¬åè¡¨å¤çï¼å¤è¡¨å³èãä¸­é´è¡¨çæ°æ®ç»´æ¤åå®ä¹ç­åå®¹ï¼æ¯æä»¬å¨æä½å¸¸è§æ°æ®çæ¶åï¼ç»å¸¸ç¢°å°çå ç§æ¹å¼ã</p>
<p>å¸æä¸æå¯¹ä½ ææå¯ååå¸®å©ï¼æè°¢éè¯»ã</p>
</div>
<div id="MySignature" role="contentinfo">
    <div style="border-right-color: #cccccc; border-right-width: 1px; border-right-style: solid; padding-right: 5px; border-top-color: #cccccc; border-top-width: 1px; border-top-style: solid; padding-left: 4px; font-size: 13px; padding-bottom: 4px; border-left-color: #cccccc; border-left-width: 1px; border-left-style: solid; width: 98%; padding-top: 4px; border-bottom-color: #cccccc; border-bottom-width: 1px; border-bottom-style: solid; background-color: #eeeeee;">
    <img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align="top" alt="">
    <span style="color: #000000"><span class="Apple-tab-span" style="white-space: pre"></span>
     ä¸æ³¨äºä»£ç çæå·¥å·ã.Net/Python æ¡æ¶æ¶æåè½¯ä»¶å¼åï¼ä»¥ååç§Vue.jsçåç«¯ææ¯åºç¨ãèæWinformå¼åæ¡æ¶/æ··åå¼å¼åæ¡æ¶ãå¾®ä¿¡å¼åæ¡æ¶ãBootstrapå¼åæ¡æ¶ãABPå¼åæ¡æ¶ãSqlSugarå¼åæ¡æ¶ãPythonå¼åæ¡æ¶ç­æ¡æ¶äº§åã
     <br>&nbsp;&nbsp;è½¬è½½è¯·æ³¨æåºå¤ï¼æ°åäººï¼ä¼åèª&nbsp;&nbsp;<a href="http://www.iqidi.com/" target="_blank">http://www.iqidi.com</a>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
</div>
<div class="clear"></div>

        </div>
        <p class="postfoot">
            posted on 
<span id="post-date" data-last-update-days="0.015277777777777777" data-date-updated="2025-12-25 12:21">2025-12-25 11:59</span>&nbsp;
<a href="https://www.cnblogs.com/wuhuacong">ä¼åèª</a>&nbsp;
éè¯»(<span id="post_view_count">21</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19396612);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19396612', targetLink: 'https://www.cnblogs.com/wuhuacong/p/19396612', title: 'å¨Python+FastAPIé¡¹ç®ä¸­ä½¿ç¨SqlAlchemyæä½æ°æ®çå ç§å¸¸è§æ¹å¼' })">ä¸¾æ¥</a>

        </p>
     ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ å¥³åæéªå½åä¸è½ç¨Claude Codeï¼äºæ¯æç»å¥¹åäºä¸ä¸ª ]]></title>
    <link>https://www.cnblogs.com/yupi/p/19397182</link>
    <guid>b9be425a5b66ec6b613691adeeb47b09</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/yupi/p/19397182" title="åå¸äº 2025-12-25 11:28">
    <span role="heading" aria-level="2">å¥³åæéªå½åä¸è½ç¨Claude Codeï¼äºæ¯æç»å¥¹åäºä¸ä¸ª</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/2225420/202512/2225420-20251225112813033-1712384844.png" alt="å¥³åæéªå½åä¸è½ç¨Claude Codeï¼äºæ¯æç»å¥¹åäºä¸ä¸ª" class="desc_img">
        æè¿å¥³åå¼å§å­¦ä¹  AI ç¼ç¨äºï¼è¢«æå¸¦çï¼ï¼å¥¹å¬è¯´ Claude Code è¿ä¸ª AI ç¼ç¨å·¥å·å¾çæ°ï¼ç»æè¯äºä¸åç°å¾è¦å½å¤ç Claude è´¦å·æè½ç»éã
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p class="md-end-block md-heading"><span class="md-plain">å¤§å®¶å¥½ï¼ææ¯ç¨åºåé±¼ç®ãæè¿å¥³åå¼å§å­¦ä¹  AI ç¼ç¨äºï¼è¢«æå¸¦çï¼ï¼å¥¹å¬è¯´ Claude Code è¿ä¸ª AI ç¼ç¨å·¥å·å¾çæ°ï¼ç»æè¯äºä¸åç°å¾è¦å½å¤ç Claude è´¦å·æè½ç»éã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766562559951-d1371bb9-99d3-467a-aeec-421cd12eb3bb.png"><img data-src="https://pic.yupi.icu/1/1766562559951-d1371bb9-99d3-467a-aeec-421cd12eb3bb.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç¶åå¥¹å°±éªéªå§å§å°è·æåæ§½ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">å±ç°ç·ååçæ¶åå°äºï¼äºæ¯æå¼ç©ç¬å°è¯´ï¼å«é¾è¿äºï¼è¦ä¸æç»ä½ åä¸ä¸ª Claude Code ç®äºï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766562773776-4a34c38c-c95b-4eb9-8b02-81ca86133188.png"><img data-src="https://pic.yupi.icu/1/1766562773776-4a34c38c-c95b-4eb9-8b02-81ca86133188.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç»æï¼å¥¹å½çäºï¼</span></p>
<p class="md-end-block md-p"><span class="md-plain">æ â</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766562833168-97c7d4fc-bfe5-4a09-9215-dcfbdb546cb4.png"><img data-src="https://pic.yupi.icu/1/1766562833168-97c7d4fc-bfe5-4a09-9215-dcfbdb546cb4.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">æ²¡åæ³ï¼åªè½è¯ä¸è¯äºï¼æ¯ç«è°å¸æå£è¯èè¿ä¸¤å¤©è®©èªå®¶äººé¾è¿å¢ï¼</span></p>
<p class="md-end-block md-p"><span class="md-plain">æ­£å¥½è¿ä¸¤å¤©å½äº§ AI å¤§æ¨¡å GLM-4.7 åå¸äºï¼æçç½ä¸å¾å¤åä¸»é½å¨å¹ä»ä¹ âå½åæå¼ºçç¼ç¨æ¨¡åâãâæå¼ºçå¼æºæ¨¡åâãâClaude çæä½³å¹³æ¿âï¼çè³è¯´æ¯è¶è¿äº GPT-5.2 å Claude Sonnet 4.5ã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766563074181-1ee8e12d-2868-4b23-b993-c0e61800565e.png"><img data-src="https://pic.yupi.icu/1/1766563074181-1ee8e12d-2868-4b23-b993-c0e61800565e.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ä½ è¯´å½äº§æå¼ºä¹å°±ç®äºï¼è¶è¿ Claude è¿æè½ä¿¡ä¹ï¼</span></p>
<p class="md-end-block md-p"><span class="md-plain">é£æ­£å¥½ï¼æå°±å°è¯ç¨ GLM-4.7 æ¥åä¸ªèªå·±ç AI ç¼ç¨å·¥å·å§ï¼å¯¹æ  Claude Code é£ç§çï¼çç GLM-4.7 å°åºå æ¤å ä¸¤ã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766551074508-575a037d-174a-43d2-bbfe-e223082fc665.png"><img data-src="https://pic.yupi.icu/1/1766551074508-575a037d-174a-43d2-bbfe-e223082fc665.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">æ¥ä¸æ¥ï¼å°±è®©æä»¬ä¸èµ· <span class="md-pair-s "><strong>ç¨ GLM-4.7 + Claude Code</strong><span class="md-plain"> å¼åä¸ä¸ª <span class="md-pair-s "><strong>åºäº GLM-4.7 çä»¿ Claude Code</strong><span class="md-plain"> ç AI ç¼ç¨å·¥å·ã</span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">é¡¹ç®å¼å§åï¼åèµ·ä¸ä¸ªåå½å½çåå­ï¼å°±å« <span class="md-pair-s"><code>Yupi Code</code><span class="md-plain"> å§ï¼</span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">æ¥ä¸æ¥ï¼æä»¬å°éµå¾ªè¿å¥ãé±¼ç® AI Vibe Coding å¼åä»¿ Claude Code ç Yupi Codeãæµç¨ï¼ä¸åä¸è¡ä»£ç ï¼ä¸æ­¥ä¸æ­¥æ âClaude Codeâ ååºæ¥ï¼</span></p>
<ul class="ul-list" data-mark="-">
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">ç¯å¢åå¤ =&gt; å®è£å·¥å·åéç½®ç¯å¢ï¼è½å¤ Vibe Coding</span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">ææ¯è°ç  =&gt; ç¡®è®¤æ»¡è¶³çæéæ±</span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">è®¾è®¡å¼å =&gt; åæ¬æ¹æ¡è®¾è®¡ãçæä»£ç ãä¿®å¤ Bugï¼å¾å° MVP æå°å¯è¡äº§å</span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">çæ¬æ§å¶ =&gt; é²æ­¢åç»­æ¹å¨åºé®é¢</span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">ä¼åè½å =&gt; æ¯ææ´å¤å¯¹æ  Claude Code çåè½ï¼æ¯å¦èç½æç´¢ãæµå¼è¾åºãæ·±åº¦æèç­</span></p>
</li>
</ul>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766549738919-9e627293-954a-4f39-8625-d1dcb1835cbc.jpeg"><img data-src="https://pic.yupi.icu/1/1766549738919-9e627293-954a-4f39-8625-d1dcb1835cbc.jpeg" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">ç¯å¢åå¤</span></h2>
<p class="md-end-block md-p"><span class="md-plain">æºè°±ç GLM-4.7 å¼å®¹å¤æ¬¾ç¼ç å·¥å·ï¼é¤ Claude Code å¤ï¼è¿æ¯æ CursorãCline ç­ä¸»æµç¼ç å·¥å·ï¼çµæ´»ééå¤ç§å¼ååºæ¯ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ç» Claude Code æ¥å¥ GLM ä¹å¾ç®åï¼1 åéæå®ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">é¦åæå¼ç»ç«¯ï¼è¾å¥ä¸è¡å½ä»¤å®è£ Claude Codeï¼</span></p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span><span class="cm-builtin">npm&nbsp;install&nbsp;<span class="cm-attribute">-g&nbsp;@anthropic-ai/claude-code</span></span></span></pre>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">ç¶åæ§è¡ <span class="md-pair-s"><code>claude</code><span class="md-plain"> å½ä»¤æå¼ç¨åºï¼é»è®¤æ¯éè¦ç»å½ Claude è´¦å·çï¼å¦åæ æ³ä½¿ç¨ï¼</span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1764145940075-ace6fd24-a09c-41c0-b400-1cffc394fc8a.png"><img data-src="https://pic.yupi.icu/1/1764145940075-ace6fd24-a09c-41c0-b400-1cffc394fc8a.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">ä¸è¿æ²¡å³ç³»ï¼è®©æä»¬æå®èåç AI å¤§æ¨¡åæ¢æå½åç GLM-4.7ãé¦åè¿å¥ <span class="md-pair-s"><code>{ç¨æ·ç®å½}/.claude</code><span class="md-plain"> ç®å½ï¼åå»ºä¸ä¸ª <span class="md-pair-s"><code>settings.json</code><span class="md-plain"> éç½®æä»¶ï¼ </span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1764146110361-06e13de5-7de4-4fc5-9533-3651447d5e19.png"><img data-src="https://pic.yupi.icu/1/1764146110361-06e13de5-7de4-4fc5-9533-3651447d5e19.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">ç¶åä¿®æ¹éç½®æä»¶ä¸­çåå®¹å¦ä¸ï¼è®°å¾æ¿æ¢æä½ èªå·±ç API Keyï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1764146125955-3029843c-26b8-4628-b2b7-a9d8abb2aef1.png"><img data-src="https://pic.yupi.icu/1/1764146125955-3029843c-26b8-4628-b2b7-a9d8abb2aef1.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">API Key ç´æ¥å°æºè°±å¼åå¹³å°è·åå³å¯ï¼</span></p>
<p class="md-end-block md-p"><span class="md-plain">æè·¯ï¼<span class="md-link md-pair-s"><a href="https://bigmodel.cn/" rel="noopener nofollow">https://bigmodel.cn/</a></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766552195823-7f90ead2-3e07-4eb4-92e2-7ef12c591e61.png"><img data-src="https://pic.yupi.icu/1/1766552195823-7f90ead2-3e07-4eb4-92e2-7ef12c591e61.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">æ¥ä¸æ¥å°±å¯ä»¥æå¿«å°ä½¿ç¨äº~</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766549578200-7189d326-db17-4edd-9e27-2d9da3af06cf.png"><img data-src="https://pic.yupi.icu/1/1766549578200-7189d326-db17-4edd-9e27-2d9da3af06cf.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">é¤äºè¿ç§æ¹å¼å¤ï¼å®æ¹ææ¡£è¿æä¾äºæ´ç®åçæ¹å¼ï¼ç´æ¥ä½¿ç¨èªå¨åå©æï¼æç§æå¼å°±è½å®æç¯å¢éç½®ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766552079851-2cd903df-febb-4860-98fc-51c1143b4105.png"><img data-src="https://pic.yupi.icu/1/1766552079851-2cd903df-febb-4860-98fc-51c1143b4105.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">ææ¯è°ç </span></h2>
<p class="md-end-block md-p"><span class="md-plain">å¦æè¦å®å¨å©ç¨ AI å¼åé¡¹ç®ï¼æå ä¸ªé¾ç¹ï¼</span></p>
<ol class="ol-list" start="">
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">é¡¹ç®éè¦åå«å®æ´ååç«¯ï¼éè¦å¤§æ¨¡åæè¾å¼ºç <span class="md-pair-s "><strong>ç¼ç è½å</strong></span></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">éè¦è®©åç«¯é¡¹ç®å¯¹æ¥ AI å¤§æ¨¡åï¼æ¯ä¸ªå¤§æ¨¡åçæ¥å¥åå¼åæ¹å¼ä¸åï¼éè¦è®© AI <span class="md-pair-s "><strong>è¯»åææ¡£</strong><span class="md-plain"> çè§£ææ°çå¼åæ¹å¼</span></span></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">å¦ææ³è¦ä¼åçé¢ææï¼è¿éè¦ <span class="md-pair-s "><strong>å¾ççè§£è½å</strong><span class="md-plain">ï¼ç» AI ä¸å¼ å¾çå°±è½è®©å®è¿å</span></span></span></p>
</li>
</ol>
<p class="md-end-block md-p"><span class="md-plain">å¨æ­£å¼å¼ååï¼æä»¬è¦ç¡®è®¤ GLM-4.7 å Claude Code çéåè½å¤æ»¡è¶³è¿äºè½åè¦æ±ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">æ ¹æ®æºè°±å®æ¹ä»ç»ï¼Claude Code ä¸­åç½®äºæºè°±ä¸å±ç MCP å·¥å·ï¼ä¸éè¦å¼åèèªå·±å®è£ãåæ¬ <span class="md-pair-s "><strong>æç´¢åç½é¡µè¯»å</strong><span class="md-plain"> è½åãè½å¤ç´æ¥è§£ææªå¾/è®¾è®¡ç¨¿/æ¥éå¾ç <span class="md-pair-s "><strong>è§è§çè§£è½å</strong><span class="md-plain">ã</span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">è®©æä»¬ä¾æ¬¡æµè¯ä¸ä¸ï¼é¦åæ¯ç½é¡µæç´¢è½åï¼ç´§è·æ¶äºï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766541771159-00bcb3ee-422b-4895-9ab6-15e5ad44937e.png"><img data-src="https://pic.yupi.icu/1/1766541771159-00bcb3ee-422b-4895-9ab6-15e5ad44937e.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">æµè¯ç½é¡µè¯»åè½åï¼è®©å®æ¥è¯»åæä»¬ç¼ç¨å¯¼èªç½ç«çä¿¡æ¯ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766485091937-8555eddf-7301-4161-92d9-4f19251cf9d1.png"><img data-src="https://pic.yupi.icu/1/1766485091937-8555eddf-7301-4161-92d9-4f19251cf9d1.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">æµè¯å¾ççè§£è½åï¼æç» AI ä¼ äºä¸å¼  âä»å¤¯å°ææè¡æ¦çèæ¯å¾âï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766552716828-cc3c5015-a220-44c4-9c99-9ea6e6cc9a2e.png"><img data-src="https://pic.yupi.icu/1/1766552716828-cc3c5015-a220-44c4-9c99-9ea6e6cc9a2e.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">AI ççè§£è¿æ¯å¾åç¡®çï¼å·ä½æå­ä¹è¯»ååºæ¥äºã</span></p>
<p class="md-end-block md-p"><span class="md-plain">OKï¼å ä¸ªè½åé½æ»¡è¶³è¦æ±ï¼ä¸é¢è®©æä»¬è¿å¥æ¹æ¡è®¾è®¡åå¼åé¶æ®µã</span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">è®¾è®¡å¼å</span></h2>
<p class="md-end-block md-p"><span class="md-plain">ååå»ºä¸ä¸ªå¹²åçé¡¹ç®ç®å½ <span class="md-pair-s"><code>yupi-code</code><span class="md-plain">ï¼æå¼ç»ç«¯å¹¶è¿å¥è¯¥ç®å½ï¼</span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766545100781-86907b5b-56df-42de-a36f-21b2738102cd.png"><img data-src="https://pic.yupi.icu/1/1766545100781-86907b5b-56df-42de-a36f-21b2738102cd.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">ç¶åè¾å¥æç¤ºè¯ï¼</span></p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span>å¸®æå¼åä¸ä¸ªç±»ä¼¼ Claude Code çç»ç«¯ AI ç¼ç¨å·¥å·ï¼è½å¤ä½¿ç¨ GLM-4.7 æ¨¡åå¸®ç¨æ·åç­é®é¢åçæä»£ç </span></pre>
<p class="md-end-block md-p"><span class="md-plain">ä¸è¬æ¥è¯´ï¼æ´ä¸ªé¡¹ç®çç¬¬ä¸å¥æç¤ºè¯æ¯æéè¦çï¼å¦ææè¦å¼åä¸ä¸ªå¤æçåä¸é¡¹ç®ï¼è¯å®ä¼å¥½å¥½æç£¨ä¸ä¸è¿å¥æç¤ºè¯ï¼å°è¯´åä¸ªå ç¾å­ï¼ä¹åçè¿æ <span class="md-meta-i-c  md-link"><a href="https://mp.weixin.qq.com/s/cd7K9WQiOkP7AJglZ1b1Ng" rel="noopener nofollow"><span class="md-plain">AI ç¨åºåææ¯ç»åµåºé¡¹ç®</span></a><span class="md-plain"> çåå­¦åºè¯¥ç¥éï¼ã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766553004293-19edef3f-ab54-4275-83fa-d5d78ed1a8ce.png"><img data-src="https://pic.yupi.icu/1/1766553004293-19edef3f-ab54-4275-83fa-d5d78ed1a8ce.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ä½æµè¯ AI æ¨¡åæ¶ï¼æåæ¬¢åå¶éèè¡ä¹ï¼ç«å¨å¤§å¤æ°ç¨æ·çè§åº¦ï¼ææè¾å¥ä¸å¥ç®åçæç¤ºè¯ï¼çç AI è½ä¸è½å¼å¯¼ææ¥çææ»¡è¶³éæ±çé¡¹ç®ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">æç¶ï¼AI å¤æ­è¿æ¯ä¸ä¸ªå¤æçé¡¹ç®ï¼æ³è¦è¿å¥ <span class="md-pair-s "><strong>è®¡åæ¨¡å¼</strong><span class="md-plain"> ââ åæç¡®éæ±ãè®¾è®¡æ¹æ¡åå¼åã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766545143400-e5909edc-d015-4ed8-8a98-c1428a5807e4.png"><img data-src="https://pic.yupi.icu/1/1766545143400-e5909edc-d015-4ed8-8a98-c1428a5807e4.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">ç¶åæä»¬éè¦éè¿éæ©æ¥æç¡®éæ±ï¼å¹¶è®© AI çææ¹æ¡ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">Claude Code çäº¤äºåçè¿æ¯ä¸éçï¼åéæ©ç¼ç¨è¯­è¨ï¼å»ºè®®èèå®å®é AI æ¨èçç¬¬ä¸ä¸ªï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766545700277-0a92c7af-af6a-4bf3-b045-b35a8810fe82.png"><img data-src="https://pic.yupi.icu/1/1766545700277-0a92c7af-af6a-4bf3-b045-b35a8810fe82.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">æ¥ä¸æ¥æ¯éæ©é¡¹ç®è¦å·æçåè½ãå¦ææ¯ä»¥åï¼æå¯è½ä¼åè®© AI åªå¼ååºç¡å¯¹è¯åè½ï¼è·éæµç¨ååæ·»å å¶ä»åè½ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ä½ç°å¨æå¯¹ AI æäºæ´å¤çä¿¡å¿ï¼<span class="md-pair-s "><strong>å±å°±æææåè½å¨é½éä¸ï¼å¹²å°±å®äºï¼</strong></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766545748726-b5bcf0c2-1650-409d-9cfb-56874d80e7aa.png"><img data-src="https://pic.yupi.icu/1/1766545748726-b5bcf0c2-1650-409d-9cfb-56874d80e7aa.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">å¶ä»è®¾ç½®å°±ä¸å¤è¯´äºï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766545906676-50ffc0ba-404a-42e0-af0e-c4797a5d5d77.png"><img data-src="https://pic.yupi.icu/1/1766545906676-50ffc0ba-404a-42e0-af0e-c4797a5d5d77.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">éæ©å®æåï¼AI ç»åºäºè¯¦ç»çå®ç°è®¡åï¼ä¸å®è¦ä»ç»éè¯»ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766546189349-27a4a8d7-92c0-4cf4-931e-e98e304736c9.png"><img data-src="https://pic.yupi.icu/1/1766546189349-27a4a8d7-92c0-4cf4-931e-e98e304736c9.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">ä½ å¯ä»¥ç´æ¥æ§è¡ï¼æèç» AI è¿ä¸æ­¥çæå¯¼ãæ¯å¦æè®© AI çæçåºç¨å»è°ç¨æºè°± Coding Plan å¥é¤ç BASE URLï¼è½èçº¦ä¸äºææ¬ï¼å¹¶ä¸ç» AI æä¾äºä¸ä¸ªå®æ¹ç API ææ¡£ï¼ä¾¿äº AI çæåç¡®çä»£ç ã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766546246817-adc95f50-246d-4c9c-b0cd-35f6433c9b40.png"><img data-src="https://pic.yupi.icu/1/1766546246817-adc95f50-246d-4c9c-b0cd-35f6433c9b40.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">ç¡®è®¤åå¼å§æ§è¡ï¼AI ä¼åè°ç¨åç½®çå·¥å·æ¥æç´¢åè§£æææ¡£ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766546433884-517bb8d9-8eb0-4a44-bd9c-0b0591af4184.png"><img data-src="https://pic.yupi.icu/1/1766546433884-517bb8d9-8eb0-4a44-bd9c-0b0591af4184.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">ç¶å AI ååºäºä¸ä¸ª Todo Listï¼å¹¶ä¸ä¸æ­¥æ­¥çæä»£ç åææ¡£ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766546471145-170595b6-05b5-440e-a208-671c362eb002.png"><img data-src="https://pic.yupi.icu/1/1766546471145-170595b6-05b5-440e-a208-671c362eb002.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">è¿æé´å¦æä½ åç°æä¸¥éçé®é¢ï¼æ¯å¦åç° AI çæçä»£ç å·²ç»å®å¨åç¦»é¢æäºï¼é£ä¹å°±å°½æ©æåæèäººå·¥è¾å¥æç¤ºè¯æ¥å¼å¯¼ AIãå¦æåç° AI åªæ¯æä¸å°åä»£ç çæçä¸å¯¹ï¼æçå»ºè®®æ¯åå¿çï¼åæ­£æå AI å¤§æ¦çä¼èªå·±åç°é®é¢å¹¶ä¿®å¤ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">è¿äºå¤§æ¦åå åéåï¼AI çæå®æï¼è¿åè¯äºæä½¿ç¨æ¹æ³ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766546800949-d8f28864-141e-477e-af98-a25bf02d99e7.png"><img data-src="https://pic.yupi.icu/1/1766546800949-d8f28864-141e-477e-af98-a25bf02d99e7.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">å¯æææ ¹æ¬æå¾çï¼æç´æ¥æ API Key äº¤ç» AI å¸®æè¿è¡ä¸å°±å¥½äºï¼</span></p>
<p class="md-end-block md-p"><span class="md-plain">Vibe Coding å¼åæ¨¡å¼ä¸ï¼æå¤èªå·±åä¸ä»¶äºï¼é½æ¯å¯¹ AI çä¸å°éã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766553290398-ad4d9c90-f804-4f46-b040-c65f821897d0.png"><img data-src="https://pic.yupi.icu/1/1766553290398-ad4d9c90-f804-4f46-b040-c65f821897d0.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">è¾å¥æç¤ºè¯ï¼</span></p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span>æç API key æ¯ xxxxxxxï¼è¯·ä½ å¸®æè¿è¡</span></pre>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">ç¶åï¼ç¿»è½¦äºããã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766546943625-ae073ada-da33-429a-bbf8-a642f50204dd.png"><img data-src="https://pic.yupi.icu/1/1766546943625-ae073ada-da33-429a-bbf8-a642f50204dd.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">ä¸æï¼ç´æ¥è®© AI èªå·±æ£æ¥å¹¶ä¿®å¤éè¯¯ãèä¸ä¸ºäºä½¿ç¨æ¹ä¾¿ï¼åºè¯¥æä¾ä¸ä¸ªå¿«éå¯å¨èæ¬ï¼è½å¤è®©æåè¿è¡ Claude Code ä¸æ ·ï¼ä¸è¡å½ä»¤å¯å¨ AI ç¼ç¨å·¥å·ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">æç¤ºè¯ï¼</span></p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span>å¸®ææ£æ¥å¹¶ä¿®å¤é¡¹ç®ä¸­çéè¯¯ï¼å¹¶åå»ºä¸ä¸ªå¯ä»¥å Claude ä¸æ ·è®©ç¨æ·å¨å½ä»¤è¡è¾å¥ "yupicode" å°±è½å¯å¨ç¨åºçå¿«æ·èæ¬</span></pre>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">å åéåï¼AI ä¿®å¤å®æï¼å¹¶ä¸æä¾äºä¸ä¸ª <span class="md-pair-s"><code>yupicode</code><span class="md-plain"> èæ¬ï¼</span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766547157316-1e78081d-7d98-43c2-8fc6-37f40dcd1d81.png"><img data-src="https://pic.yupi.icu/1/1766547157316-1e78081d-7d98-43c2-8fc6-37f40dcd1d81.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">ææå¼ä¸ä¸ªæ°çç»ç«¯ï¼ç¶åè¿è¡ <span class="md-pair-s"><code>yupicode</code><span class="md-plain"> èæ¬ï¼å°è¯å AI å¯¹è¯ï¼</span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766488187720-0dedd977-3663-4146-8fc6-bd5e8d65a7ea.png"><img data-src="https://pic.yupi.icu/1/1766488187720-0dedd977-3663-4146-8fc6-bd5e8d65a7ea.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ä½ å«è¯´ï¼ææè¿ä¸éåï¼</span></p>
<p class="md-end-block md-p"><span class="md-plain">è¿å Claude Code ä¸æ ·æä¾äºä¸äºå½ä»¤ï¼æ¯å¦æ¸ç©ºå¯¹è¯åå²ãæ¥çå¸®å©ä¹ç±»çï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766488215355-476254ae-1fdd-44fe-94a7-939621a5b3f3.png"><img data-src="https://pic.yupi.icu/1/1766488215355-476254ae-1fdd-44fe-94a7-939621a5b3f3.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">çå°è¿éï¼ææè§é¡¹ç®å·²ç»åºæ¬å¯ç¨äºãå»ºè®®ç»é¡¹ç®ä¸ä¸ª Git æ¥çæ¬æ§å¶ï¼é²æ­¢åé¢çæ¹å¨åºé®é¢ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ä»ä¹ï¼ä½ ä¸ç¥é Git æ¯ä»ä¹ï¼</span></p>
<p class="md-end-block md-p"><span class="md-plain">æ²¡å³ç³»ï¼ç´æ¥äº¤ç» AI å§ï¼</span></p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span>ç°å¨é¡¹ç®å·²ç»åºæ¬å¯ç¨äºï¼å¸®ææäº¤ä¸ä¸ª git çæ¬ï¼é²æ­¢åç»­æ¹å¨åºé®é¢</span></pre>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766547719776-e4ca2495-158d-441e-b995-d2e3b475187b.png"><img data-src="https://pic.yupi.icu/1/1766547719776-e4ca2495-158d-441e-b995-d2e3b475187b.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">æµè¯ä¸æ¥ï¼ç®åç Yupi Code è¿æä¸äºä¸è¶³ä¹å¤ï¼æ¯å¦ä¸æ¯ææç´¢ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766488309079-9e05324c-b780-4476-b7a1-09e0b0a12ed4.png"><img data-src="https://pic.yupi.icu/1/1766488309079-9e05324c-b780-4476-b7a1-09e0b0a12ed4.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">æ¥ä¸æ¥å°±è®©æä»¬ä¼åé¡¹ç®ï¼å¢å æ´å¤ Claude Code æ¯æçè½åã</span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">ä¼åè½å</span></h2>
<p class="md-end-block md-p"><span class="md-plain">1ï¼åæ¥æ·»å ç½ç»æç´¢è½åï¼ç´æ¥ææºè°±çå®æ¹ææ¡£ç»å®ä¸¢è¿å»ãæç¤ºè¯å¦ä¸ï¼</span></p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span>ç°å¨å¥½åä¸æ¯æç½ç»æç´¢ï¼è¯·åè<br><span>https://docs.bigmodel.cn/api-reference/%E5%B7%A5%E5%85%B7-api/%E7%BD%91%E7%BB%9C%E6%90%9C%E7%B4%A2<br><span>ææ¡£ï¼å¢å ç½ç»æç´¢å·¥å·è°ç¨è½å</span></span></span></pre>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766547400820-047db1e2-dee7-4bb3-875c-3c3d03d7bf60.png"><img data-src="https://pic.yupi.icu/1/1766547400820-047db1e2-dee7-4bb3-875c-3c3d03d7bf60.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">å¾å¿« AI å°±æ·»å äºæ°åè½ï¼éæ°æå¼ yupicode æ¥éªè¯ä¸ï¼æ­£å¸¸çæäºï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766542072968-2a635280-4f04-41c7-9e72-b149b503b18e.png"><img data-src="https://pic.yupi.icu/1/1766542072968-2a635280-4f04-41c7-9e72-b149b503b18e.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">2ï¼ä¸é¢åä¼åä¸ AI åå¤çææï¼ç®åæ¯å¡ä¸ä¼å¿ç¶åç´æ¥è¾åºå®æ´åç­ï¼éè¦è°æ´ä¸ºæµå¼è¾åºçæå­æºææã</span></p>
<p class="md-end-block md-p"><span class="md-plain">æç¤ºè¯ï¼</span></p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span>æå¸æå¨ç­å¾ AI åå¤æ¶ï¼æä¸ä¸ªè½¬åçå°å¾æ ï¼å¹¶ä¸ AI çåå¤å¯ä»¥å®æ¶æµå¼è¾åº</span></pre>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">AI å¾å¿«å°±æå®äºï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766547560315-96b3044c-21d4-4017-b3b2-8e6c599fdfac.png"><img data-src="https://pic.yupi.icu/1/1766547560315-96b3044c-21d4-4017-b3b2-8e6c599fdfac.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">3ï¼GLM-4.7 è¿ä¸æ­¥å¼ºåäºäº¤éå¼æèè½åï¼å¼å¥ <span class="md-pair-s "><strong>ä¿çå¼æè</strong><span class="md-plain"> å <span class="md-pair-s "><strong>è½®çº§æè</strong><span class="md-plain">ï¼è®©å¤æä»»å¡æ§è¡æ´ç¨³ãæ´å¯æ§ãæä»¬ä¹åºè¯¥è®© Yupi Code è¾åºæ¨¡åçæèä¿¡æ¯ãå·¥å·è°ç¨ä¿¡æ¯ç­ç­ï¼å¸®å©ç¨æ·äºè§£æåµã</span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">è¾å¥æç¤ºè¯ï¼</span></p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span>å¸®æè¾åºæ¨¡åæèçä¿¡æ¯ãä»¥åå·¥å·è°ç¨ä¿¡æ¯ï¼ä½ å¯ä»¥éè¿å®æ¹ææ¡£æ¥äºè§£å¦ä½å¼å</span></pre>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766547838246-0de4e1a6-46e7-4fa0-9f69-2cc6c137d941.png"><img data-src="https://pic.yupi.icu/1/1766547838246-0de4e1a6-46e7-4fa0-9f69-2cc6c137d941.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">æµè¯ä¸ä¸ä¼ååçææï¼æ¯å¦ âä»ç»ä¸ä¸é±¼ç®ç AI å¯¼èªç½ç«âï¼è½å¾æ¸æ°å°çå°æèè¿ç¨ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766491085646-e55d65e2-f1f4-4de5-9b2e-a580f6671fab.png"><img data-src="https://pic.yupi.icu/1/1766491085646-e55d65e2-f1f4-4de5-9b2e-a580f6671fab.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">å¤§ååæ</span></h2>
<p class="md-end-block md-p"><span class="md-plain">å°è¿éï¼ä»¿ç§ Claude Code å¼åç Yupi Code å°±å·²ç»å®æäºï¼è®©æä»¬ç¨å®æ¥å¼åä¸ªå°ç½ç«è¯è¯ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">æ¯å¦æ¥ä¸ªå¨ç»å­¦ç®æ³ç Demoï¼æç¤ºè¯ï¼</span></p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span>å¸®æå¼åä¸ä¸ªå­¦ä¹ åæ³¡æåºç®æ³çå¨ç»ç½ç«ï¼ä½¿ç¨ Q çå¨æ¼«çé£æ ¼ååä¼å¡åæè§çéè²</span></pre>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766491627903-c7a8401b-a029-4f60-86c2-583459f60098.png"><img data-src="https://pic.yupi.icu/1/1766491627903-c7a8401b-a029-4f60-86c2-583459f60098.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">ææå¦å¾ï¼ç»é£è¿æ¯ä¸éçï¼ä½è¦æ¯ä¹åå¤§æ¨¡åè½èªå¨çæå¾çæç»å¹¶æ·»å å°ç½ç«ä¸­ï¼å°±æ´å¥½äºã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766492330648-78beb8fe-20f5-4577-9a5a-9c6844b15ba1.png"><img data-src="https://pic.yupi.icu/1/1766492330648-78beb8fe-20f5-4577-9a5a-9c6844b15ba1.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">åæ¥å¼åä¸ªä»¿çççµå­é»æ¿ï¼æç¤ºè¯ï¼</span></p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span>å¸®æå¼åä¸ä¸ªä»¿çççµå­é»æ¿ï¼ç¨æ·å¯ä»¥å¨ä¸é¢ç»ç»å¹¶å¯¼åºä¸ºå¾ç</span></pre>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766543009945-1be675f7-2cb1-43ce-9794-36cfa3cf9f87.png"><img data-src="https://pic.yupi.icu/1/1766543009945-1be675f7-2cb1-43ce-9794-36cfa3cf9f87.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">å£è¯èäºï¼é±¼ç®ç»å¤§å®¶ç»é¢å£è¯æ ï¼è¿éèµ ä¸ä¸ªå°ç¤¼ç©ï¼è¿æä¹è½ä¸ç®æ¯ç¨åºåçæµªæ¼«å¢~</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766548114861-81c8b4d2-b7fc-4134-8722-264edf56f229.png"><img data-src="https://pic.yupi.icu/1/1766548114861-81c8b4d2-b7fc-4134-8722-264edf56f229.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<div class="md-hr md-end-block"><hr></div>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">OKï¼è¿å°±æ¯æ <span class="md-pair-s "><strong>å©ç¨å½äº§ç AI å¤§æ¨¡å GLM-4.7 + Claude Code</strong><span class="md-plain"> å¼ååºä¸ä¸ª <span class="md-pair-s "><strong>åºäº GLM-4.7 ç Yupi Code</strong><span class="md-plain"> çå¨è¿ç¨äºã</span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">æèªå·±ä½éªä¸æ¥ï¼GLM-4.7 ç¸æ¯äºä¹åçå½åå¤§æ¨¡åï¼å¨å¤çå¤æä»»å¡çç¨³å®æ§ä¸æè¿æ­¥ï¼å³ä½¿éå°é®é¢ä¹ä¼èªå¨ä¿®å¤ï¼è®©æç»çæçä»£ç å¯è¿è¡ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">èä¸ GLM-4.7 è°ç¨å·¥å·çè½åä¹å¼ºåäºï¼å Claude Code ç­ AI ç¼ç¨å·¥å·æéåï¼ç´æ¥åç½®äºèç½æç´¢ãç½é¡µè¯»åãè§£éå¾çç­ AI ç¼ç¨å¸¸ç¨çè½åï¼ä¸éè¦èªå·±åå»æ¾ MCP æ¥å¢å¼ºäºã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ä¸å¾ä¸è¯´ï¼ä½ä¸ºä¸ç´å³æ³¨æºè°± AI çå¿ å®å¼åèï¼ççå¾è½æåå°ä»ä»¬è¿å ä¸ªææ¥å¨ AI ç¼ç¨æ¹åçåªåï¼æç¸ä¿¡å¤§å®¶ä¹æ¯æç®å±ç¹ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ä¸è¿æ¯ç«ç°å¨ç Yupi Code æ¯ AI ä¸ææ¢­çï¼è¿æå¾å¤è½ä¼åå®åçå°æ¹ãå¦æåé¢ææ¶é´ï¼å¤§å®¶ä¹æå´è¶£çè¯ï¼è¯´ä¸å®æä¼å¥½å¥½æç£¨æç£¨è¿ä¸ªå·¥å·æå®å¼æºåºæ¥ãæçç»æç®æ æ¯ï¼è®©åºäº <span class="md-pair-s "><strong>AI å¤§æ¨¡å GLM-4.7 + Claude Code</strong><span class="md-plain"> å¼åçåºäº <span class="md-pair-s "><strong>GLM-4.7 ç Yupi Code</strong><span class="md-plain"> ç¼ç¨å·¥å·ï¼è½å¤å¼ååºä¸ä¸ªåºäº <span class="md-pair-s "><strong>GLM-4.7 ç</strong><span class="md-plain"> ç¼ç¨å·¥å·ï¼æ¯å¦ Yupi Son Codeãæè®¤ä¸ºå¥½ç AI å·¥å·å°±æ¯è¦è½åå°æ éå¥å¨ï¼ç¯çèªä¸¾ï¼</span></span></span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766549948743-c5e1340a-5b3d-4419-b5df-c2fd4a5c2c7f.jpeg"><img data-src="https://pic.yupi.icu/1/1766549948743-c5e1340a-5b3d-4419-b5df-c2fd4a5c2c7f.jpeg" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">å¬ææå£°~</span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">æ´å¤ç¼ç¨å­¦ä¹ èµæº</span></h2>
<ul class="ul-list" data-mark="-">
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/course" rel="noopener nofollow"><span class="md-plain">Javaåç«¯ç¨åºåå¿åé¡¹ç®å®ææç¨+æ¯è®¾ç½ç«</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/" rel="noopener nofollow"><span class="md-plain">ç¨åºååè´¹ç¼ç¨å­¦ä¹ äº¤æµç¤¾åºï¼èªå­¦å¿å¤ï¼</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/course/cv" rel="noopener nofollow"><span class="md-plain">ç¨åºåä¿å§çº§æ±èåç®åæåï¼æ¾å·¥ä½å¿å¤ï¼</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.mianshiya.com/" rel="noopener nofollow"><span class="md-plain">ç¨åºååè´¹é¢è¯å·é¢ç½ç«å·¥å·ï¼æ¾å·¥ä½å¿å¤ï¼</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640584449888772098" rel="noopener nofollow"><span class="md-plain">ææ°Javaé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + Javaæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640586673306091521" rel="noopener nofollow"><span class="md-plain">ææ°Pythoné¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + Pythonæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640586014108303362" rel="noopener nofollow"><span class="md-plain">ææ°åç«¯é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + åç«¯æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640586867363954689" rel="noopener nofollow"><span class="md-plain">ææ°æ°æ®ç»æåç®æ³é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + ç®æ³æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1644279832026075138" rel="noopener nofollow"><span class="md-plain">ææ°C++é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ãC++æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1641797333479903234" rel="noopener nofollow"><span class="md-plain">ææ°æ°æ®åºé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + æ°æ®åºæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640589994284695553" rel="noopener nofollow"><span class="md-plain">ææ°Redisé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + Redisæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1641035880439271426" rel="noopener nofollow"><span class="md-plain">ææ°è®¡ç®æºåºç¡å¥é¨å­¦ä¹ è·¯çº¿ + è®¡ç®æºåºç¡æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1641366118197153793" rel="noopener nofollow"><span class="md-plain">ææ°å°ç¨åºå¥é¨å­¦ä¹ è·¯çº¿ + å°ç¨åºå¼åæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="http://sqlmother.yupi.icu/" rel="noopener nofollow"><span class="md-plain">ææ°SQLé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + SQLæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640586295529324545" rel="noopener nofollow"><span class="md-plain">ææ°Linuxé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + Linuxæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640588753362108417" rel="noopener nofollow"><span class="md-plain">ææ°Git/GitHubé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + Gitæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640587909942099969" rel="noopener nofollow"><span class="md-plain">ææ°æä½ç³»ç»é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + æä½ç³»ç»æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640588119619551233" rel="noopener nofollow"><span class="md-plain">ææ°è®¡ç®æºç½ç»é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + è®¡ç®æºç½ç»æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640588392073150465" rel="noopener nofollow"><span class="md-plain">ææ°è®¾è®¡æ¨¡å¼é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + è®¾è®¡æ¨¡å¼æç¨</span></a></span></p>
</li>
<li class="md-list-item md-focus-container">
<p class="md-end-block md-p md-focus"><span class="md-meta-i-c md-link md-expand"><a href="https://www.code-nav.cn/post/1640648711119892481" rel="noopener nofollow"><span class="md-plain">ææ°è½¯ä»¶å·¥ç¨é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + è½¯ä»¶å·¥ç¨æç¨</span></a></span></p>
</li>
</ul>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-25 11:29">2025-12-25 11:28</span>&nbsp;
<a href="https://www.cnblogs.com/yupi">ç¨åºåé±¼ç®</a>&nbsp;
éè¯»(<span id="post_view_count">98</span>)&nbsp;
è¯è®º(<span id="post_comment_count">1</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19397182);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19397182', targetLink: 'https://www.cnblogs.com/yupi/p/19397182', title: 'å¥³åæéªå½åä¸è½ç¨Claude Codeï¼äºæ¯æç»å¥¹åäºä¸ä¸ª' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ EvalScopeä½¿ç¨è¿ç¨ä¸­çé®é¢æ±æ» ]]></title>
    <link>https://www.cnblogs.com/oten/p/19397129</link>
    <guid>2a52722bd04c5ff502902202df064221</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/oten/p/19397129" title="åå¸äº 2025-12-25 11:23">
    <span role="heading" aria-level="2">EvalScopeä½¿ç¨è¿ç¨ä¸­çé®é¢æ±æ»</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="1-èªå®ä¹æ°æ®éä½¿ç¨æ¶çkeyerroré®é¢">1. èªå®ä¹æ°æ®éä½¿ç¨æ¶çKeyErroré®é¢</h2>
<h3 id="é®é¢æè¿°">é®é¢æè¿°</h3>
<p>ä½¿ç¨èªå®ä¹æ°æ®éè¯æµæ¶ï¼éç½®<code>tasks: ["CustomRetrieval"]</code>ä¼è§¦å<code>KeyError</code>ï¼æ¥éä¿¡æ¯å¦ä¸ï¼</p>
<pre><code>KeyError: "KeyError: 'CustomRetrieval' not found. Did you mean: EcomRetrieval?"
</code></pre>
<h3 id="èæ¯è¯´æ">èæ¯è¯´æ</h3>
<ul>
<li>EvalScopeå®æ¹ææ¡£æç¡®èªå®ä¹æ°æ®éè¯æµä»»å¡éæå®ä¸º<code>CustomRetrieval</code>ï¼</li>
<li><code>./outputs</code>ç®å½ä¸å·²å­å¨<code>CustomRetrieval</code>ç¸å³æ°æ®éï¼</li>
<li>ä¸ªäººçè§£ï¼è¯¥æ¥éä¸å½±åè¯æµç»æçæï¼ä»å¯¼è´æç»è¯æµæµç¨çæ±æ»è¡¨æ ¼æ æ³è¾åºï¼æ´ä½æ æ ¸å¿å½±åã</li>
</ul>
<h3 id="ç¸å³èæ¬">ç¸å³èæ¬</h3>
<pre><code class="language-python">BASE_TASK_CFG4 = {
    "work_dir": "./outputs/bge_m3_T2Retrieval_eng",
    "eval_backend": "RAGEval",
    "eval_config": {
        "tool": "MTEB",
        "model": [
            {
                "model_name_or_path": "/gpu/huangyl3/Embedding_eval/model/bge_m3",  # å¾ªç¯æ¶å¨æèµå¼
                "pooling_mode": None,
                "max_seq_length": 512,
                "prompt": "",
                "model_kwargs": {"torch_dtype": "auto"},
                "encode_kwargs": {"batch_size": 128},
                "hub": "modelscope"
            }
        ],
        "eval": {
            "tasks": ["CustomRetrieval"],
            "dataset_path": "/gpu/huangyl3/Embedding_eval/datas/T2Retrieval_eng/retrieval_data",
            "verbosity": 2,
            "overwrite_results": True,
            "top_k": 5
        },
    },
}

if __name__ == "__main__":
    run_task(task_cfg=BASE_TASK_CFG4)
</code></pre>
<h2 id="2-ä¸¤é¶æ®µæµè¯èæ¬æ£ç´¢éæ">2. ä¸¤é¶æ®µæµè¯èæ¬ï¼æ£ç´¢+éæï¼</h2>
<h3 id="ç¸å³èæ¬-1">ç¸å³èæ¬</h3>
<pre><code class="language-python">from evalscope.run import run_task
two_stage_task_cfg = {
    "work_dir": "./outputs/bge-reranker-v2-m3_T2Retrieval",
    "eval_backend": "RAGEval",
    "eval_config": {
        "tool": "MTEB",
        "model": [
            {
                "model_name_or_path": "/gpu/huangyl3/Embedding_eval/model/bge_m3",
                "is_cross_encoder": False,
                "max_seq_length": 512,
                "model_kwargs": {"torch_dtype": "auto"},
                "encode_kwargs": {
                    "batch_size": 64,
                },
            },
            {
                "model_name_or_path": "/gpu/huangyl3/Embedding_eval/model/bge-reranker-v2-m3",
                "is_cross_encoder": True,
                "max_seq_length": 512,
                "prompt": "ä¸ºè¿ä¸ªé®é¢çæä¸ä¸ªæ£ç´¢ç¨çè¡¨ç¤º",
                "model_kwargs": {"torch_dtype": "auto"},
                "encode_kwargs": {
                    "batch_size": 32,
                },
            },
        ],
        "eval": {
            "tasks": ["T2Retrieval"],
            "verbosity": 2,
            "overwrite_results": True,
            "top_k": 5
        },
    },
}
run_task(task_cfg=two_stage_task_cfg)
</code></pre>
<h2 id="3-model_kwargsä¸­torch_dtypeæ¥éé®é¢">3. model_kwargsä¸­torch_dtypeæ¥éé®é¢</h2>
<h3 id="é®é¢æè¿°-1">é®é¢æè¿°</h3>
<p>è¯æµ<code>gte-multilingual-mlm-base</code>ã<code>Qwen3-Embedding-0.6B</code>ã<code>bge-m3</code>æ¨¡åï¼éæ£ç´¢æ°æ®éè¯æµä»»å¡ï¼æ¶ï¼åéç½®<code>"model_kwargs": {"torch_dtype": "auto"}</code>ä¼è§¦åæ¥éï¼<br>
ä¸´æ¶è§£å³æ¹æ¡ï¼å°<code>torch_dtype: auto</code>ç¡¬æ¹ä¸º<code>dtype: float</code>å¯è§é¿æ¥éï¼ä½å¹¶éæä¼æ¹æ¡ã</p>
<h2 id="4-æ¹éè¯æµèæ¬çæ§è¡æ¥éé®é¢">4. æ¹éè¯æµèæ¬çæ§è¡æ¥éé®é¢</h2>
<h3 id="é®é¢æè¿°-2">é®é¢æè¿°</h3>
<p>æ¹éå¾ªç¯è¯æµå¤ä¸ªæ¨¡åæ¶ï¼ç¬¬ä¸ä¸ªæ¨¡åå¯æ­£å¸¸æ§è¡ï¼åç»­æ¨¡åä¼è§¦åæ¥éï¼ä»æ¹ä¸ºæä¸¾å¼åæ³å¯æ­£å¸¸æ¹éè¿è¡ï¼æ¥éåå ææªæç¡®ï¼éæå¯¼ã</p>
<h3 id="ç¸å³èæ¬-2">ç¸å³èæ¬</h3>
<pre><code class="language-python">import time
import datetime
from evalscope.run import run_task

# ===================== éç½®æ ¸å¿åæ° =====================
# å®ä¹éè¦æ¹éè¯æµçæ¨¡ååè¡¨ï¼æ¿æ¢ä¸ºä½ è¦æµçæ¨¡ååï¼
MODEL_LIST = [
    "iic/gte-multilingual-mlm-base",  # BGEç³»åç¤ºä¾
    "Qwen/Qwen3-Embedding-0.6B",  # å¤è¯­è¨åµå¥æ¨¡åç¤ºä¾
    "BAAI/bge-m3"  # GTE-largeç¤ºä¾
]


# åºç¡éç½®æ¨¡æ¿ï¼ä¸åå«model_name_or_pathï¼å¾ªç¯æ¶å¨æå¡«åï¼
BASE_TASK_CFG = {
    "work_dir": "/Users/hyl/PyCharmMiscProject/GAi/Embedding_eval/outputs",
    "eval_backend": "RAGEval",
    "eval_config": {
        "tool": "MTEB",
        "model": [
            {
                "model_name_or_path": "",  # å¾ªç¯æ¶å¨æèµå¼
                "pooling_mode": None,
                "max_seq_length": 512,
                "prompt": "",
                "model_kwargs": {"torch_dtype": "auto"},
                "encode_kwargs": {"batch_size": 128},
                "hub": "modelscope"
            }
        ],
        "eval": {
            "tasks": ["T2Retrieval"],
            "verbosity": 2,
            "overwrite_results": True,
            "top_k": 5,
            "hub": "modelscope"
        },
    },
}

# ===================== æ ¸å¿é»è¾ï¼å¾ªç¯è¯æµ + æä¸èªå¨æ§è¡ =====================
def run_batch_evaluation():
    # éåæ¨¡ååè¡¨ï¼éä¸ªæ§è¡è¯æµ
    for idx, model_name in enumerate(MODEL_LIST):
        try:
            # å¤å¶åºç¡éç½®ï¼é¿åä¿®æ¹åå­å¸
            task_cfg = BASE_TASK_CFG.copy()
            # å¨ææ¿æ¢æ¨¡åå
            task_cfg["eval_config"]["model"][0]["model_name_or_path"] = model_name

            # æå°å½åè¯æµè¿åº¦
            current_time = datetime.datetime.now().strftime("%Y-%m-%d %H:%M:%S")
            print(f"\n===== å¼å§è¯æµç¬¬ {idx + 1}/{len(MODEL_LIST)} ä¸ªæ¨¡å =====")
            print(f"æ¹æ¬¡æ¶é´ï¼{current_time}")
            print(f"æ¨¡ååï¼{model_name}")

            # è®°å½è¯æµå¼å§æ¶é´ï¼ç²¾ç¡®å°æ¯«ç§ï¼
            start_time = datetime.datetime.now()
            print(f"è¯æµå¼å§æ¶é´ï¼{start_time.strftime('%Y-%m-%d %H:%M:%S.%f')[:-3]}")  # ä¿çæ¯«ç§
            print("===========================\n")

            # æ§è¡è¯æµä»»å¡
            run_task(task_cfg=task_cfg)

            # è®°å½è¯æµç»ææ¶é´ï¼è®¡ç®æ»èæ¶
            end_time = datetime.datetime.now()
            duration = end_time - start_time
            # è½¬æ¢èæ¶ä¸º æ¶:å:ç§ æ ¼å¼ï¼æ»ç§æ°è½¬æ¶åç§ï¼
            hours = duration.seconds // 3600
            minutes = (duration.seconds % 3600) // 60
            seconds = duration.seconds % 60
            # ä¿çæ¯«ç§çèæ¶å­ç¬¦ä¸²
            duration_str = f"{hours}å°æ¶{minutes}åé{seconds}ç§ï¼æ»èæ¶ï¼{duration.total_seconds():.2f}ç§ï¼"

            # æå°å®ææç¤º + æ¶é´ç»è®¡
            print(f"\n===== æ¨¡å {model_name} è¯æµå®æ =====")
            print(f"è¯æµç»ææ¶é´ï¼{end_time.strftime('%Y-%m-%d %H:%M:%S.%f')[:-3]}")
            print(f"æ¬æ¬¡è¯æµæ»èæ¶ï¼{duration_str}")
            print("===========================\n")

            # å¯éï¼æ¨¡åé´é´éï¼é¿åé¢ç¹è¯·æ±ï¼æ¯å¦ä¼æ¯5åéï¼
            time.sleep(300)

        except Exception as e:
            # åä¸ªæ¨¡åè¯æµå¤±è´¥ï¼è®°å½éè¯¯å¹¶ç»§ç»­ä¸ä¸ä¸ª
            end_time = datetime.datetime.now()
            print(f"\n===== æ¨¡å {model_name} è¯æµå¤±è´¥ =====")
            print(f"å¤±è´¥æ¶é´ï¼{end_time.strftime('%Y-%m-%d %H:%M:%S.%f')[:-3]}")
            print(f"éè¯¯ä¿¡æ¯ï¼{str(e)}")
            print("ç»§ç»­è¯æµä¸ä¸ä¸ªæ¨¡å...\n")
            continue

# ===================== å¯å¨æ¹éè¯æµ =====================
if __name__ == "__main__":
    run_batch_evaluation()
</code></pre>
<h3 id="å¤æ³¨">å¤æ³¨</h3>
<p>æç»­æ´æ°.......</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.001388888888888889" data-date-updated="2025-12-25 11:25">2025-12-25 11:23</span>&nbsp;
<a href="https://www.cnblogs.com/oten">Oten</a>&nbsp;
éè¯»(<span id="post_view_count">15</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19397129);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19397129', targetLink: 'https://www.cnblogs.com/oten/p/19397129', title: 'EvalScopeä½¿ç¨è¿ç¨ä¸­çé®é¢æ±æ»' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ MySQL æ°æ®åºæ¥å¿æ»ç»(ä¸) ]]></title>
    <link>https://www.cnblogs.com/zhangwencheng/p/19388036</link>
    <guid>6eae8108cd12e9b9053637d1f86523f6</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/zhangwencheng/p/19388036" title="åå¸äº 2025-12-25 10:24">
    <span role="heading" aria-level="2">MySQL æ°æ®åºæ¥å¿æ»ç»(ä¸)</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h3 id="æ°æ®åºæå¡æ¥å¿æ¦è¿°ä»ç»">æ°æ®åºæå¡æ¥å¿æ¦è¿°ä»ç»</h3>
<p>ä»»ä½ä¸ç§æ°æ®åºä¸­ï¼é½ä¼æåç§åæ ·çæ¥å¿ï¼è®°å½è¿æ°æ®åºå·¥ä½çæ¹æ¹é¢é¢ï¼ä»¥å¸®å©æ°æ®åºç®¡çåè¿½è¸ªæ°æ®åºæ¾ç»åçè¿çåç§äºä»¶ï¼</p>
<p>ä¸»è¦æ¯éå¯¹æ°æ®åºserverå±äº§ççæ°æ®ä¿¡æ¯ï¼ä¸»è¦ç¨äºè®°å½åæ°æ®åºæå¡è¿è¡æ¬èº«æå³çæ¥å¿ãä»¥åSQLè¯­å¥æä½æ§è¡ç¸å³çæ¥å¿ï¼</p>
<h3 id="æ®åºæå¡æ¥å¿å¸¸ç¨åç±»">æ®åºæå¡æ¥å¿å¸¸ç¨åç±»</h3>
<p>å¨MySQLæ°æ®åºæå¡ä¸­ï¼æ4ç§ä¸åçæ¥å¿æ¯æå¸¸ç¨çæ¥å¿ç±»åï¼è¿äºæ¥å¿è®°å½è¿æ°æ®åºå¨ä¸åæ¹é¢çè¸ªè¿¹ï¼</p>
<p>æ¥å¿ä¿¡æ¯æ¥çæ¹æ³ï¼</p>
<pre><code class="language-sql">mysql&gt; show variables like '%log%';
+------------------------------------------------+---------------------------------------------+
| Variable_name                                  | Value                                       |
+------------------------------------------------+---------------------------------------------+
| general_log                                    | OFF                                         |
| general_log_file                               | /data/3306/data/wenC-01.log                 |
| log_error                                      | ./wenC-01.err                               |
| log_bin                                        | ON                                          |
| log_bin_basename                               | /data/3306/data/binlog                      |
| log_bin_index                                  | /data/3306/data/binlog.index                |
| slow_query_log                                 | OFF                                         |
| slow_query_log_file                            | /data/3306/data/wenC-01-slow.log            |
+------------------------------------------------+---------------------------------------------+
</code></pre>
<p>å¸¸ç¨æ¥å¿ä¿¡æ¯ä»ç»ï¼</p>
<table>
<thead>
<tr>
<th>åºå·</th>
<th>æ¥å¿åç§°</th>
<th>è§£éè¯´æ</th>
</tr>
</thead>
<tbody>
<tr>
<td>01</td>
<td>general_log</td>
<td>è¡¨ç¤ºæ¥è¯¢æ¥å¿ï¼éç¨æ¥å¿ï¼ï¼é»è®¤æ¥å¿ç¶æå¤äºå³é­ï¼å¯ä»¥è¿è¡å¨çº¿è°æ´éç½®<br>ä½ç¨ï¼è®°å½äºå®¢æ·ç«¯ä»ä¼è¯è¿æ¥å¼å§ï¼æ§è¡è¿çææSQLè¯­å¥ä¿¡æ¯ï¼</td>
</tr>
<tr>
<td>02</td>
<td>log_error</td>
<td>è¡¨ç¤ºéè¯¯æ¥å¿ï¼è¿è¡æ¥å¿ï¼ï¼é»è®¤æ¥å¿ç¶æå¤äºæ¿æ´»<br>ä½ç¨ï¼è®°å½äºæ°æ®åºæå¡å¯å¨ååæ­¢æ¶ï¼ä»¥åæå¡å¨å¨è¿è¡è¿ç¨ä¸­åçä»»ä½ä¸¥ééè¯¯æ¶çç¸å³ä¿¡æ¯ï¼</td>
</tr>
<tr>
<td>03</td>
<td>log_bin</td>
<td>è¡¨ç¤ºäºè¿å¶æ¥å¿ï¼binlogæ¥å¿ï¼ï¼é»è®¤æ¥å¿ç¶æå¤äºæ¿æ´»ï¼8.0ä¹åï¼<br>ä½ç¨ï¼è®°å½äºææçDDLè¯­å¥åDMLè¯­å¥ï¼ä½æ¯ä¸åæ¬æ°æ®åºæ¥è¯¢è¯­å¥ï¼è¯­å¥ä»¥äºä»¶çå½¢å¼ä¿å­ï¼æè¿°äºæ°æ®çæ´æ¹è¿ç¨ï¼æ­¤æ¥å¿å¯¹äºç¾é¾æ¶çæ°æ®æ¢å¤èµ·çæå¶éè¦çä½ç¨ã</td>
</tr>
<tr>
<td>04</td>
<td>slow_query_log</td>
<td>è¡¨ç¤ºæ¢æ¥è¯¢æ¥å¿ï¼è®°å½äºæææ§è¡æ¶é´è¶è¿åæ°long_query_timeè®¾ç½®å¼å¹¶ä¸æ«æè®°å½æ°å°äºmin_examined_row_limitçææSQLè¯­å¥çæ¥å¿ã</td>
</tr>
</tbody>
</table>
<h3 id="æ°æ®åºæå¡æ¥å¿ä¿¡æ¯éç½®">æ°æ®åºæå¡æ¥å¿ä¿¡æ¯éç½®</h3>
<h4 id="1åç±»æ¥å¿ä¿¡æ¯éç½®éç¨æ¥å¿general_log"><strong>1.åç±»æ¥å¿ä¿¡æ¯éç½®ï¼éç¨æ¥å¿ï¼general_logï¼</strong></h4>
<ul>
<li><strong>1_1 æ¥å¿ä¿¡æ¯åºæ¬éç½®ï¼</strong></li>
</ul>
<pre><code class="language-sql">general_log=OFF          
-- é»è®¤æ¥å¿åè½å¤äºå³é­ï¼å»ºè®®å¨éè¦åè°è¯å·¥ä½æ¶ï¼åè½æµè¯ãè¯­å¥å®¡è®¡ï¼å¯ä»¥æå¼ï¼
general_log_file=/data/3306/data/wenC-01.log  
-- å®ä¹æ¥å¿æä»¶å­å¨çè·¯å¾ä¿¡æ¯ï¼å»ºè®®æ¥å¿æä»¶è·¯å¾ä¸æ°æ®å­æ¾è·¯å¾è¿è¡åç¦»ï¼

# ä¿®æ¹æ¥å¿é»è®¤ç¶æï¼æ¿æ´»æ¥å¿ï¼ï¼
mysql &gt; set global general_log=1;
</code></pre>
<blockquote>
<p>è¯´æï¼ä¼ä¸çå®ç¯å¢ï¼ç±äºæ¥å¿è®°å½éæ¯è¾å¤§ï¼æä»¥ä¸å»ºè®®æå¼æ­¤æ¥å¿è®°å½åè½ï¼å¯ä»¥å¨æéè¦æ¶æå¼ï¼æ¯æå¨çº¿éç½®è°æ´ï¼</p>
</blockquote>
<h4 id="2åç±»æ¥å¿ä¿¡æ¯éç½®éè¯¯æ¥å¿log_error"><strong>2.åç±»æ¥å¿ä¿¡æ¯éç½®ï¼éè¯¯æ¥å¿ï¼log_errorï¼</strong></h4>
<ul>
<li><strong>2_1 æ¥å¿ä¿¡æ¯åºæ¬éç½®</strong></li>
</ul>
<pre><code class="language-sql">log_error=./wenC-01.err      
-- å®ä¹æ¥å¿æä»¶å­å¨çè·¯å¾ä¿¡æ¯ï¼å»ºè®®æ¥å¿æä»¶è·¯å¾ä¸æ°æ®å­æ¾è·¯å¾è¿è¡åç¦»ï¼

# ä¿®æ¹æ¥å¿å­å¨è·¯å¾ï¼æ°¸ä¹éç½®ï¼ï¼
[root@cheng ~]# vim /etc/my.cnf
log_error=/data/3306/log/wenC-01.err
-- éç½®æä»¶ç¼åå®æ¯åï¼éè¦éå¯æ°æ®åºæå¡çæ

# æ¨¡ææéæ¥å¿åºç¨
[root@cheng ~]# ll /data/3306/data/ibdata1 
-rw-r----- 1 mysql mysql 12582912 Nov 16 17:46 /data/3306/data/ibdata1
[root@cheng ~]# chmod 000 /data/3306/data/ibdata1
[root@cheng ~]# /etc/init.d/mysqld restart
Shutting down MySQL............................... SUCCESS! 
Starting MySQL......................................... ERROR! The server quit without updating PID file (/data/3306/data/wenC-01.pid).
[root@cheng ~]# tail -20 /data/3306/log/wenC-01.err
2022-11-21T01:20:47.735040Z 1 [ERROR] [MY-012271] [InnoDB] The innodb_system data file 'ibdata1' must be writable
2022-11-21T01:20:47.744091Z 1 [ERROR] [MY-012278] [InnoDB] The innodb_system data file 'ibdata1' must be writable
2022-11-21T01:20:47.744808Z 1 [ERROR] [MY-010334] [Server] Failed to initialize DD Storage Engine
2022-11-21T01:20:47.745739Z 0 [ERROR] [MY-010020] [Server] Data Dictionary initialization failed.
2022-11-21T01:20:47.746526Z 0 [ERROR] [MY-010119] [Server] Aborting
-- æ ¹æ®éè¯¯æ¥å¿çéè¯¯æç¤ºä¿¡æ¯ï¼è¿è¡éè¯¯ä¿¡æ¯è¿è¡åæï¼ä»èææ¥æéå¯è½åºç°çåå ï¼
</code></pre>
<blockquote>
<p>è¯´æï¼ä¼ä¸çå®ç¯å¢ï¼æ¥å¿å¤äºé»è®¤æ¿æ´»è®°å½ç¶æï¼å¯ä»¥ä½¿ç¨éè¯¯æ¥å¿ä¿¡æ¯åæéè¯æ­ï¼è®°å½éè¯¯ä¿¡æ¯çº§å«ä¸ºnote warning errorï¼</p>
</blockquote>
<h4 id="3åç±»æ¥å¿ä¿¡æ¯éç½®äºè¿å¶æ¥å¿log_bin"><strong>3.åç±»æ¥å¿ä¿¡æ¯éç½®ï¼äºè¿å¶æ¥å¿ï¼log_binï¼</strong></h4>
<p>å¨è¿è¡å¢éæ¢å¤æ°æ®æ¶ï¼éè¦åäºè§£ä»ä¹æ¯binlogæ¥å¿ï¼æ­¤æ¥å¿æä»¶å¶å®å°±æ¯ç¨äºè®°å½å¯¹æ°æ®åºè¿è¡æä½æ´æ¹çè¯­å¥ä¿¡æ¯çï¼</p>
<p>å¹¶ä¸è®°å½æ´æ¹çè¯­å¥ä¿¡æ¯ä»¥äºä»¶å½¢å¼è¿è¡è®°å½ï¼ä½æ¯éè¦æ³¨æçæ¯æ¥è¯¢ç¸å³çè¯­å¥æ¯ä¸ä¼è¢«è®°å½çï¼æ¯å¦ï¼selectãshowï¼</p>
<p>ç¶èä½ä¸ºææå¯¹æ°æ®åºçæ¹æä½äºä»¶ä¿¡æ¯é½ä¼è¢«è®°å½ï¼æ¯å¦ï¼insertãupdateãcreateãdropããã</p>
<p><strong>æ¥çæ°æ®åºbinlogæ¥å¿éç½®åæ°ï¼</strong></p>
<p>è¿å¥å°æ°æ®åºæå¡ç³»ç»ç¯å¢ä¸­ï¼å¯ä»¥ä½¿ç¨å½ä»¤è¿è¡æ¥çbinlogæ¥å¿åè½æ¯å¦å¼å¯ï¼</p>
<pre><code class="language-sql"># æªå¼å¯binlogæ¥å¿åè½æ¶ï¼æ¥çç³»ç»binlogåè½éç½®åæ°ç¶æ
mysql&gt; show variables like '%log_bin%';
+-----------------------------------------+-------+
| Variable_name                           | Value |
+-----------------------------------------+-------+
| log_bin                                 | OFF   |
| sql_log_bin                             | ON    |
+-----------------------------------------+-------+
3 rows in set (0.00 sec)
--- éè¿ä»¥ä¸è¾åºä¿¡æ¯å¯ä»¥çå°log_binä¸ºoffç¶æï¼è¡¨ç¤ºbinlogæ¥å¿åè½å°æªå¼å¯

# å·²å¼å¯binlogæ¥å¿åè½åï¼æ¥çç³»ç»binlogåè½éç½®åæ°ç¶æ
mysql&gt; show variables like '%log_bin%';
+-----------------------------------------+-------+
| Variable_name                           | Value |
+-----------------------------------------+-------+
| log_bin                                 | ON    |
| sql_log_bin                             | ON    |
+-----------------------------------------+-------+
3 rows in set (0.00 sec)
--- éè¿ä»¥ä¸è¾åºä¿¡æ¯å¯ä»¥çå°log_binä¸ºonç¶æï¼è¡¨ç¤ºbinlogæ¥å¿åè½å·²ç»å¼å¯
</code></pre>
<ul>
<li><strong>3_1 æ¥å¿ä¿¡æ¯åºæ¬éç½®</strong></li>
</ul>
<pre><code class="language-sql">server_id=6
-- è¿è¡ä¸»ä»æä½æ¶ï¼éè¦è¿è¡æ­¤ä¿¡æ¯éç½®ï¼
log_bin=ON      
-- é»è®¤æ¥å¿åè½å¤äºå³é­ç¶æ
log_bin_basename=/data/3306/data/binlog        
-- å®ä¹æ¥å¿æä»¶å­å¨çè·¯å¾ä¿¡æ¯ï¼å»ºè®®æ¥å¿æä»¶è·¯å¾ä¸æ°æ®å­æ¾è·¯å¾è¿è¡åç¦»ï¼

# éç½®ä¿¡æ¯ç®åæ¹å¼ï¼å¼å¯æ°æ®åºbinlogæ¥å¿è®°å½åè½
[root@cheng ~]# vim /etc/my.cnf
-- æ¿æ´»binlogæ¥å¿è®°å½åè½ï¼éè¦å¯¹æ°æ®åºæå¡éç½®æä»¶è¿è¡ç¼è¾ä¿®æ¹
[mysqld]
server_id=6
log_bin=/data/3306/binlog/mysql-bin
-- è¿è¡binlogæ¥å¿ç®å½è·¯å¾ä¿¡æ¯ä¿®æ¹æ¶ï¼éè¦åå»ºæå®çç®å½å¹¶è®¾ç½®æéä¿¡æ¯ï¼æåéè¦éæ°å¯å¨æ°æ®åºæå¡çæï¼
æè
log_bin=binlog
-- åªæ¯è®¾ç½®æ¥å¿åç§°ä¿¡æ¯ï¼æ¥å¿ä¼èªå¨ä¿å­å°æ°æ®åºæå¡æå®çæ°æ®ç®å½ä¸­ï¼

# éç½®æä»¶ä¿®æ¹åéè¦éå¯æ°æ®åºæå¡ï¼å è½½éç½®æä»¶æ¹å¨çä¿¡æ¯ï¼
[root@cheng ~]# /etc/init.d/mysqld restart 
[root@cheng ~]# ll -h /data/3306/data/binlog*
-rw-rw----. 1 mysql mysql 245 6æ  24 02:19 /data/3306/data/binlog.00000N
-rw-rw----. 1 mysql mysql   16 6æ  24 02:19 /data/3306/data/binlog.index
-- æ°æ®åºæå¡éå¯åï¼å·²ç»å¯ä»¥å¨æ°æ®åºçæ°æ®å­å¨ç®å½ä¸­ï¼çå°binlogæ¥å¿æä»¶çè¸ªå½±
</code></pre>
<blockquote>
<p>è¯´æï¼ä¼ä¸çå®ç¯å¢ï¼æ¥å¿å¤äºé»è®¤æ¿æ´»è®°å½ç¶æï¼å¯ä»¥ä½¿ç¨æ¥å¿ä¿¡æ¯è¿è¡ç¾é¾æ°æ®æ¢å¤ï¼ä»¥åå¯ä»¥ç¨äºå®ç°ä¸»ä»å¤å¶ï¼</p>
</blockquote>
<ul>
<li><strong>3_2 æ¥å¿éç½®ä¿¡æ¯æ©å±</strong><br>
åæ°å®æ¹èµæé¾æ¥ï¼<a href="https://dev.mysql.com/doc/refman/8.0/en/replication-options-binary-log.html" target="_blank" rel="noopener nofollow">https://dev.mysql.com/doc/refman/8.0/en/replication-options-binary-log.html</a></li>
</ul>
<pre><code class="language-sql"># åæ°ä¸ï¼sync_binlog è¡¨ç¤ºå·æ°æ¥å¿å°ç£çç­ç¥
mysql&gt; select @@sync_binlog;
+---------------------+
| @@sync_binlog       |
+---------------------+
|                   1 |
+---------------------+
1 row in set (0.00 sec)
-- å¨è¿è¡ä¸»ä»åæ­¥è¿ç¨çåä¸æ åçå¶ä¸­ä¸ä¸ª1çä¿¡æ¯éç½®ï¼ä¸»è¦æ¯æ§å¶ç¼å²åºéçbinlogæ¥å¿ä¿¡æ¯å¦ä½å·åå°ç£çä¸­ï¼
-- æ­¤åæ°ä¿¡æ¯æ¯æä¸ç§æ¹å¼è¿è¡éç½®çï¼
-- åæ°ä¿¡æ¯éç½®0ï¼è¡¨ç¤ºç±æä½ç³»ç»ç¼å­èªå·±å³å®ï¼ä»ä¹æ¶åå·æ°æ¥å¿å°ç£çä¸­ï¼
-- åæ°ä¿¡æ¯éç½®1ï¼è¡¨ç¤ºæ¯æ¬¡äºå¡æäº¤ï¼ç«å³å·æ°æ¥å¿å°ç£çä¸­ï¼(æ­¤æ¹å¼éç½®æ´å®å¨)
-- åæ°ä¿¡æ¯éç½®Nï¼è¡¨ç¤ºæ¯ç»äºå¡æäº¤ï¼æç§ç»çäºå¡æ¬¡æ°å®ä¹ï¼ç¡®å®å·æ°æ¥å¿å°ç£çä¸­çé¢æ¬¡ï¼ï¼å¯ä»¥ææåå°IOæ§è½æèï¼

# åæ°äºï¼binlog_format å®ä¹binlogæ¥å¿çæ ¼å¼ä¿¡æ¯
mysql&gt; select @@binlog_format;
+------------------------+
| @@binlog_format        |
+------------------------+
| ROW                    |
+------------------------+
1 row in set (0.00 sec)
-- å¨è¿è¡ä¸»ä»åæ­¥æ°æ®æ¢å¤æ¶ï¼æ­¤åæ°éç½®å¯è½ä¼å½±åæ°æ®æ¢å¤çä¸è´æ§é®é¢ï¼
-- æ­¤åæ°ä¿¡æ¯æ¯æä¸ç§æ¹å¼è¿è¡éç½®çï¼ç¡®å®äºä¸»ä»å¤å¶ççº§å«ï¼åªéå¯¹DMLè¯­å¥çæ¥å¿æææï¼
-- åæ°ä¿¡æ¯éç½® statementï¼SBRï¼ï¼è¯­å¥æ ¼å¼è®°å½binlogï¼
create database wenC;  -- DDL DCLè¯­å¥åªè½ä½¿ç¨statement è¡¨ç¤ºçå°±æ¯ååæ¬æ¬çè¯­å¥ä¿¡æ¯ï¼å³åä»ä¹å°±è®°å½ä»ä¹ï¼
-- åæ°ä¿¡æ¯éç½® rowï¼RBRï¼ï¼è¡æ ¼å¼è®°å½binlogï¼é»è®¤æ¨¡å¼ï¼
update t1 set a=10 where id&lt;10;    -- ä¼è®°å½è¡çååä¿¡æ¯ï¼å±äºåºå±çè®°å½ä¿¡æ¯ï¼å¯è½ä¼æå¤ä¸ªååæ¥å¿ä¿¡æ¯è®°å½
-- åæ°ä¿¡æ¯éç½® mixedï¼MBRï¼ï¼æ··åæ ¼å¼è®°å½binlog
    -- ç±æ°æ®åºæå¡èªè¡å³å®ï¼æ¯è®°å½è¯­å¥ä¿¡æ¯ï¼è¿æ¯è®°å½è¡çååä¿¡æ¯ï¼
</code></pre>
<p>SBRï¼statement-based replicationï¼ä¸RBRï¼Row-Based Replicationï¼è®°å½çä¼ç¼ºç¹åæï¼ï¼é¢è¯å¸¸è§é®é¢ï¼</p>
<table>
<thead>
<tr>
<th>è®°å½æ¹å¼</th>
<th>ä¼ç¹è¯´æ</th>
<th>ç¼ºç¹è¯´æ</th>
</tr>
</thead>
<tbody>
<tr>
<td>SBR</td>
<td>å¯è¯»æ§å¼ºï¼æ¥å¿éç¸å¯¹è¾å°ï¼</td>
<td>æ°æ®ä¿¡æ¯å¯è½ä¸åç¡®ï¼æ°æ®ä¸è´æ§ä¸è¶³</td>
</tr>
<tr>
<td>RBR</td>
<td>æ°æ®ä¿¡æ¯è®°å½æ´åç¡®ï¼æ°æ®ä¸è´æ§æ´å¼º</td>
<td>å¯è¯»æ§å¼±ï¼æ¥å¿éç¸å¯¹è¾å¤ï¼æ°æ®è®°å½åç¡®</td>
</tr>
<tr>
<td>ä¸¾ä¾è¯´æ</td>
<td>update t1 set a=10 where id&lt;10000;  è®°å½ä¸æ¡è¯­å¥å³å¯</td>
<td>insert into éæºæ°å½æ°;</td>
</tr>
<tr>
<td>ä¸¾ä¾è¯´æ</td>
<td>update t1 set a=10 where id&lt;10000;  è®°å½å¤æ¡è¯­å¥ä¿®æ¹ä¿¡æ¯ï¼çææ¥å¿</td>
<td>insert into éæºæ°å½æ°;</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>3_3 æ¥å¿ä¿¡æ¯æ¥çæ¹æ³ï¼</strong></li>
</ul>
<p>å¯ä»¥éè¿æ¥çæ¹å¼ï¼è·åbinlogæ¥å¿éçæ°æ®ä¿¡æ¯ï¼ä¸è¬å¨æ°æ®åºå¯å¨æ¶ï¼æ¥å¿è®°å½åè½å°±å¼å¯äºï¼</p>
<p>å¯ä»¥å©ç¨æ¥å¿ä¸­è®°å½ä¿¡æ¯ï¼å°æ°æ®åºæå¡çæ°æ®ä¿¡æ¯æ¢å¤å°æå®çæ¶é´ç¹ï¼åæ¶ä¹å¯ä»¥æ¯æä¸»ä»æ°æ®å¤å¶ï¼å¨å¶å®æºå¨ä¸åæ¾æ¥å¿ï¼ï¼</p>
<p><code>å¯¹äºbinlogæ¥å¿ä¿¡æ¯çæ¥çï¼ä¸»è¦ç®çæ¯ä¸ºäºæ¥åæ¥å¿äºä»¶ä¿¡æ¯çæªåæä½ï¼</code></p>
<p>æ¥çæ¹å¼ä¸ï¼ç¡®è®¤æ°æ®åºbinlogæ¥å¿æ°é</p>
<pre><code class="language-sql">mysql&gt; show binary logs;
+------------------+-------------+--------------+
| Log_name         | File_size   | Encrypted    |
+------------------+-------------+--------------+
| binlog.000001    |         156 | No           |
+------------------+-------------+--------------+
-- è·åæ°æ®åºæå¡è¿è¡è¿ç¨ä¸­ï¼ä½¿ç¨çbinlogæ¥å¿çæåµ

mysql&gt; flush logs;
Query OK, 0 rows affected (0.12 sec)
-- å¯ä»¥æ§è¡flushå·æ°å½ä»¤ï¼ä»èçææ°çbinlogæ¥å¿æä»¶ï¼ç±»ä¼¼äºå®ç°äºæ¥å¿åå²åè½ï¼
mysql&gt; show binary logs;
+------------------+-------------+--------------+
| Log_name         | File_size   | Encrypted    |
+------------------+-------------+--------------+
| binlog.000001    | 200         | No           |
| binlog.000002    | 156         | No           |
+------------------+-------------+--------------+
2 rows in set (0.00 sec)
</code></pre>
<p>æ¥çæ¹å¼äºï¼ç¡®è®¤æ°æ®åºbinlogæ¥å¿ç¶æ</p>
<pre><code class="language-sql">mysql&gt; create database test_binlog;
Query OK, 1 row affected (0.03 sec)
-- æ¨¡ææ°æ®æå¡æä¿®æ¹æä½
mysql&gt; select * from world.city limit 1;
Query OK, 1 row affected (0.03 sec)
-- æ¨¡ææ°æ®æå¡æä¿®æ¹æä½
mysql&gt; show binary logs;
+------------------+-------------+--------------+
| Log_name         | File_size   | Encrypted    |
+------------------+-------------+--------------+
| binlog.000001    |  200        | No           |
| binlog.000002    |  362        | No           |
+------------------+-------------+--------------+
2 rows in set (0.00 sec)
-- å¯ä»¥çå°binlogæ¥å¿çå­å¨éåçäºååï¼ä½æ¯å¨åæ¥è¯¢æä½æ¶ï¼binlogæ¥å¿çå­å¨éå¹¶æªåçåå

mysql&gt; show master status;
+------------------+------------+------------------+-----------------------+-------------------------+
| File             | Position   | Binlog_Do_DB     | Binlog_Ignore_DB      | Executed_Gtid_Set       |
+------------------+------------+------------------+-----------------------+-------------------------+
| binlog.000002    |  362       |                  |                       |                         |
+------------------+------------+------------------+-----------------------+-------------------------+
1 row in set (0.00 sec)
-- æ¥çè·åå½åä½¿ç¨çbinlogæ¥å¿æåµï¼ä»¥åäº§ççæ¥å¿éå­èå¤§å°ï¼
</code></pre>
<p>æ¥çæ¹å¼ä¸ï¼æ¥çæ°æ®åºbinlogæ¥å¿ä¿¡æ¯</p>
<pre><code class="language-sql">mysql&gt; show binlog events in 'binlog.000002';
-- binlogæ¥å¿ä¿¡æ¯æ¯ä»¥äºä»¶æ¹å¼è¿è¡è®°å½çï¼æä»¥æ¥å¿æ¥çè¿ç¨æ¯æ¥çäºä»¶ä¿¡æ¯
-- ä¸è¬binlogæ¥å¿çåä¸¤è¡ï¼è¡¨ç¤ºæ¥å¿æ ¼å¼å¤´ä¿¡æ¯ï¼æ¥å¿ç®åçæè¿°ä¿¡æ¯ï¼
-- ä¸è¬binlogæ¥å¿ä¸­çqueryä¿¡æ¯ï¼å°±æ¯å¯¹æ°æ®åºçæä½è¯­å¥ï¼å¶ä¸­åå«äºåå»ºæ°æ®åºçè¯­å¥ï¼
</code></pre>
<p>å·ä½binlogäºä»¶ä¿¡æ¯ï¼<br>
<img src="https://img2024.cnblogs.com/blog/1080590/202512/1080590-20251223170443956-396789651.png" alt="1669004768083" loading="lazy"></p>
<p>å·ä½binlogäºä»¶è®°å½ä¿¡æ¯åæï¼</p>
<table>
<thead>
<tr>
<th>åå·</th>
<th>åä¿¡æ¯</th>
<th>è§£éè¯´æ</th>
</tr>
</thead>
<tbody>
<tr>
<td>01</td>
<td>Log_name</td>
<td>è¡¨ç¤ºæå®æ¥ççbinlogæ¥å¿æä»¶åç§°ä¿¡æ¯</td>
</tr>
<tr>
<td>02</td>
<td>Pos</td>
<td>è¡¨ç¤ºbinlogæ¥å¿äºä»¶å¼å§çä½ç½®ç¹ï¼ç¨äºæªåäºè¿å¶æ¥å¿ä¿¡æ¯æ è¯</td>
</tr>
<tr>
<td>05</td>
<td>End_log_pos</td>
<td>è¡¨ç¤ºbinlogæ¥å¿äºä»¶ç»æçä½ç½®ç¹ï¼ç¨äºæªåäºè¿å¶æ¥å¿ä¿¡æ¯æ è¯</td>
</tr>
<tr>
<td>06</td>
<td>Info</td>
<td>è¡¨ç¤ºbinlogä¸­å·ä½çäºä»¶åå®¹ä¿¡æ¯</td>
</tr>
</tbody>
</table>
<p>æ¥çæ¹å¼åï¼ç­éæ°æ®åºbinlogæ¥å¿äºä»¶</p>
<pre><code class="language-sql"># æ¨¡æçæbinlogæ¥å¿äºä»¶ä¿¡æ¯
mysql&gt; source ~/world.sql;
mysql&gt; drop database world;
mysql&gt; source ~/world.sql;

# è·åå é¤æ°æ®åºçäºä»¶ä¿¡æ¯ï¼
# ç­éæ°æ®åºæ¥å¿æ¹å¼ä¸ï¼
[root@cheng data]# mysql -e "show binlog events in 'binlog.000002'"|grep "drop database"
binlog.000002	722789	Query	1	722896	drop database world /* xid=5363 */
-- è·åæå®äºä»¶ä¿¡æ¯äº§ççèµ·ç¹ä½ç½®åç»ç¹ä½ç½®ä¿¡æ¯ï¼

# ç­éæ°æ®åºæ¥å¿æ¹å¼äºï¼
mysql&gt; pager less
-- å¨æ°æ®åºä¸­å®ä¹pageråè½ï¼æ°æ®åºè¿æ¥ä¼è¯éåºå³å¤±æï¼
mysql&gt; show binlog events in 'binlog.000002';
-- æ­¤æ¶æ¥çæ¥å¿äºä»¶ä¿¡æ¯å·æäºç¿»é¡µåè½
/drop database
| binlog.000002 |  722789 | Query          |         1 |      722896 | drop database world /* xid=5363 */
mysql&gt; pager grep "drop database"
PAGER set to 'grep "drop database"'
-- è¡¨ç¤ºå¼å¯æ°æ®åºpagerçè¿æ»¤åè½
mysql&gt; show binlog events in 'binlog.000002';
| binlog.000002 |  722789 | Query          |         1 |      722896 | drop database world /* xid=5363 */ 
-- åæ¬¡æ¥çbinlogäºä»¶ä¿¡æ¯æ¶ï¼åªè¿æ»¤æ¾ç¤ºå é¤æ°æ®åºçæä½äºä»¶æ¥å¿
</code></pre>
<blockquote>
<p>è¯´æï¼å¨å®éçäº§ç¯å¢ä¸­ï¼è¥binlogæ¥å¿éæ¯è¾å¤§æ¶ï¼éè¦å¿«éè¿æ»¤å³é®æ¥å¿äºä»¶è¡ï¼å¯ä»¥ä½¿ç¨ä»¥ä¸æ¥çæ¥å¿æ¹æ³ï¼</p>
</blockquote>
<p><strong>è·åæ°æ®åºbinlogæ¥å¿è®°å½ä¿¡æ¯å¼å¸¸ï¼</strong></p>
<p>è¿è¡æ°æ®åºæå¡æ°æ®ä¿¡æ¯æ´æ¹æä½ï¼éåæ¥çbinlogæ¥å¿ä¿¡æ¯çååï¼</p>
<pre><code class="language-sql"># è¿è¡æ°æ®åºåå»ºæä½
mysql&gt; create database wenC;
mysql&gt; show databases;

# æ¥çè·åbinlogæ¥å¿è®°å½ä¿¡æ¯
[root@cheng ~]# mysqlbinlog /var/lib/mysql/binlog.000001 
mysqlbinlog: unknown variable 'default-character-set=utf8mb4'
-- ç±äºå¨æ°æ®åºå¨å®¢æ·ç«¯éç½®æä»¶ä¸­æ·»å äºdefault-character-set=utf8mb4å­ç¬¦ç¼ç ä¿¡æ¯ï¼å æ­¤é ææ æ³æ¥çbinlog
[root@cheng ~]# cat /etc/my.cnf.d/client.cnf 
[client]
#default-character-set=utf8mb4
[client-mariadb]
#default-character-set=utf8mb4
-- å¯ä»¥ä¸´æ¶è°æ´åå°å®¢æ·ç«¯çå­ç¬¦ç¼ç éç½®ä¿¡æ¯æ³¨éï¼
[root@cheng ~]# mysqlbinlog /var/lib/mysql/binlog.000001
... çç¥é¨åä¿¡æ¯ ...
# at 494
#220624  2:35:02 server id 1  end_log_pos 579 Query	thread_id=2	exec_time=0	error_code=0
SET TIMESTAMP=1656009302/*!*/;
create database wenC
/*!*/;
... çç¥é¨åä¿¡æ¯ ...
-- å¨binlogæ¥å¿æä»¶ä¸­ï¼å·²ç»è®°å½äºä¹åçåå»ºxiaoQçæ´æ¹æä½è®°å½ä¿¡æ¯
</code></pre>
<ul>
<li><strong>3_4 æ¥å¿ä¿¡æ¯åºç¨å®æ</strong></li>
</ul>
<p><strong>æ°æ®åºæ°æ®å¼å¸¸æ¢å¤ï¼ç®åæåµï¼</strong></p>
<p>å¨å®éçæç¯å¢ä¸­ï¼å¯ä»¥å©ç¨binlogæ¥å¿è®°å½çä¿¡æ¯æªåï¼å®ç°æ°æ®åºå¼å¸¸æåµä¸çæ°æ®ä¿¡æ¯æ¢å¤åè½ï¼</p>
<p>æ°æ®åºå¼å¸¸æ¢å¤æåµç¯å¢åå¤ï¼</p>
<pre><code class="language-sql"># åæ¢æ°çbinlogæ¥å¿æä»¶åæ¨¡ææ°æ®æ¢å¤
mysql&gt; flush logs;
Query OK, 0 rows affected (0.03 sec)
mysql&gt; show master status;
+------------------+------------+------------------+-----------------------+-------------------------+
| File             | Position   | Binlog_Do_DB     | Binlog_Ignore_DB      | Executed_Gtid_Set       |
+------------------+------------+------------------+-----------------------+-------------------------+
| binlog.000003    |  156       |                  |                       |                         |
+------------------+------------+------------------+-----------------------+-------------------------+
1 row in set (0.01 sec)
-- ç¡®è®¤å·²ç»å·æ°çæäºæ°çbinlogæ¥å¿æä»¶ï¼

# è¿è¡åºæ¬çæ°æ®åºSQLè¯­å¥æä½ï¼
mysql&gt; create database bindb;
mysql&gt; use bindb;
mysql&gt; create table t1 (id int);
mysql&gt; begin;
mysql&gt; insert into t1 values(1);
-- å¨æ²¡æè¿è¡äºå¡æäº¤åï¼æä½çäºå¡äºä»¶ä¿¡æ¯ï¼æ¯ä¸ä¼åºç°å¨binlogäºä»¶æ¥å¿ä¸­ç
mysql&gt; commit;
-- å¯¹äºæ°æ®åºçbinlogæ¥å¿ï¼åªä¼è®°å½äºå¡å·²ç»æäº¤çDMLè¯­å¥ä¿¡æ¯ï¼æ²¡ææäº¤çDMLè¯­å¥æ¯ä¸ä¼è¿è¡è®°å½çï¼
-- å¨æ¥å¿ä¸­ååçDMLè¯­å¥ä¿¡æ¯æ¯æ æ³è¯å«çï¼å ä¸ºè®°å½DMLæä½çè¯­å¥é»è®¤æ¯ä»¥ROWæ¨¡å¼è®°å½çï¼
</code></pre>
<p>æ°æ®åºäºè¿å¶æ¥å¿ä¿¡æ¯æ¥çæ¹æ³ï¼</p>
<pre><code class="language-sql">[root@cheng ~]# mysqlbinlog /data/3306/data/binlog.000003
-- å¯¹äºæ°æ®åºbinlogæ¥å¿ä¿¡æ¯ï¼æ¯æ æ³ç´æ¥æ¥çåå®¹ä¿¡æ¯ï¼éè¦å©ç¨ç¸å³å½ä»¤å·¥å·è¿è¡æ¥ç
# The proper term is pseudo_replica_mode, but we use this compatibility alias
# to make the statement usable on server versions 8.0.24 and older.
/*!50530 SET @@SESSION.PSEUDO_SLAVE_MODE=1*/;
/*!50003 SET @OLD_COMPLETION_TYPE=@@COMPLETION_TYPE,COMPLETION_TYPE=0*/;
DELIMITER /*!*/;
# at 4
#221121 13:12:59 server id 1  end_log_pos 125 CRC32 0xbb7d1fd1 	Start: binlog v 4, server v 8.0.26 created 221121 13:12:59
# Warning: this binlog is either in use or was not closed properly.
BINLOG '
2wh7Yw8BAAAAeQAAAH0AAAABAAQAOC4wLjI2AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAEwANAAgAAAAABAAEAAAAYQAEGggAAAAICAgCAAAACgoKKioAEjQA
CigB0R99uw==
'/*!*/;
# at 125
#221121 13:12:59 server id 1  end_log_pos 156 CRC32 0x04874c92 	Previous-GTIDs
# [empty]
-- binlogæ¥å¿æä»¶156ä¹åçåå®¹æ¯å¯ä»¥å¿½ç¥çï¼è¡¨ç¤ºæ¯æ¥å¿æä»¶çå¤´æ ¼å¼åå®¹ä¿¡æ¯
# at 156
#221121 13:16:19 server id 1  end_log_pos 233 CRC32 0xd73c14e1 	Anonymous_GTID	last_committed=0	sequence_number=1	rbr_only=no	original_committed_timestamp=1669007779100380	immediate_commit_timestamp=1669007779100380	transaction_length=188
# original_commit_timestamp=1669007779100380 (2022-11-21 13:16:19.100380 HKT)
# immediate_commit_timestamp=1669007779100380 (2022-11-21 13:16:19.100380 HKT)
/*!80001 SET @@session.original_commit_timestamp=1669007779100380*//*!*/;
/*!80014 SET @@session.original_server_version=80026*//*!*/;
/*!80014 SET @@session.immediate_server_version=80026*//*!*/;
SET @@SESSION.GTID_NEXT= 'ANONYMOUS'/*!*/;
-- binlogæ¥å¿æä»¶å·²äºä»¶å½¢å¼è¿è¡è®°å½ï¼ä¸»è¦å³æ³¨ä¸¤ä¸ªatåå®¹ä¹é´çä¿¡æ¯ï¼å³è¡¨ç¤ºçæ¯ä¸ä¸ªäºä»¶ä¿¡æ¯ï¼
# at 233
-- binlogæ¥å¿ä¸­ä¸ä¸ªäºä»¶çå¼å§ï¼å°±è¡¨ç¤ºä¸ä¸ä¸ªäºä»¶çç»æï¼å¨binlogä¸­è®°å½çäºä»¶æ¥å¿ä¿¡æ¯æ¯è¿ç»­çï¼
#221121 13:16:19 server id 1  end_log_pos 344 CRC32 0x624986f5 	Query	thread_id=11	exec_time=0	error_code=0	Xid = 10728
SET TIMESTAMP=1669007779/*!*/;
SET @@session.pseudo_thread_id=11/*!*/;
SET @@session.foreign_key_checks=1, @@session.sql_auto_is_null=0, @@session.unique_checks=1, @@session.autocommit=1/*!*/;
SET @@session.sql_mode=1168113696/*!*/;
SET @@session.auto_increment_increment=1, @@session.auto_increment_offset=1/*!*/;
/*!\C utf8mb4 *//*!*/;
SET @@session.character_set_client=255,@@session.collation_connection=255,@@session.collation_server=255/*!*/;
SET @@session.lc_time_names=0/*!*/;
SET @@session.collation_database=DEFAULT/*!*/;
/*!80011 SET @@session.default_collation_for_utf8mb4=255*//*!*/;
/*!80016 SET @@session.default_table_encryption=0*//*!*/;
create database bindb
/*!*/;
# at 344
</code></pre>
<p>binlogæ¥å¿åå®¹ä¸­ä¸»è¦å³æ³¨çä¿¡æ¯ï¼</p>
<ul>
<li><strong>éè¿æ¥å¿ä¿¡æ¯æ¥çDDLæä½è¯­å¥ä¿¡æ¯ï¼è®°å½æ¹å¼ SBRï¼</strong></li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/1080590/202512/1080590-20251223170554930-296167952.png" alt="1669015300339" loading="lazy"></p>
<ul>
<li><strong>éè¿æ¥å¿ä¿¡æ¯æ¥çDMLæä½è¯­å¥ä¿¡æ¯ï¼è®°å½æ¹å¼ RBRï¼</strong></li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/1080590/202512/1080590-20251223170614385-150887390.png" alt="1669015788023" loading="lazy"></p>
<p>ä»¥ä¸ROWæ¨¡å¼è®°å½çä¿¡æ¯æ¯å å¯æ¾ç¤ºï¼æ æ³ç´æ¥æ¥ççï¼å¯ä»¥ä½¿ç¨ä¸é¢å½ä»¤åæ°è¿è¡è·åè¯¦ç»ä¿¡æ¯ï¼</p>
<pre><code class="language-sql">[root@cheng ~]# mysqlbinlog --base64-output=decode-rows -vvv /data/3306/data/binlog.000003 
-- ä»¥ä¸æ·»å çåæ°ä¿¡æ¯ï¼è¡¨ç¤ºå°DMLçROWæ ¼å¼è¯­å¥ä¿¡æ¯ï¼è¿è¡æ ¼å¼åå¤çè¾åºï¼
# at 739
#221121 13:17:45 server id 1  end_log_pos 779 CRC32 0xb468b459 	Write_rows: table id 101 flags: STMT_END_F
### INSERT INTO `bindb`.`t1`
-- å©ç¨DMLè¯­å¥åçæå¥è¯­å¥ä¿¡æ¯å°±æ¾ç¤ºåºæ¥äº
### SET
###   @1=1 /* INT meta=0 nullable=1 is_null=0 */
-- ä»¥ä¸æ¥å¿è®°å½çä¿¡æ¯ï¼å¯ä»¥ç¨å½ä»¤å®ç°ï¼å¦ä¸ï¼
mysql &gt; insert into t1 set id=1;
ç­ä»·äº
mysql &gt; insert into t1 values(1);
</code></pre>
<p>æ°æ®åºæ¨¡æå¼å¸¸æåµç ´åæä½ï¼</p>
<pre><code class="language-sql">mysql&gt; drop database bindb;
-- æ¨¡æç ´åæ§æä½ï¼å é¤æ°æ®åº
</code></pre>
<p>æ°æ®åºå¼å¸¸æåµæ°æ®æ¢å¤æä½ï¼</p>
<pre><code class="language-sql"># éè¦æ¢å¤å»ºåºå¼å§ï¼å é¤ä¹åçæææä½ï¼å³ææbinlogæ¥å¿ä¿¡æ¯ï¼ï¼å®ç°æ¥å¿ä¿¡æ¯çæªå
mysql&gt; show binlog events in 'binlog.000002';
-- æ¥çæªåæ¥å¿ä¿¡æ¯äºä»¶åºåèå´
[root@cheng ~]# mysqlbinlog --start-position=233 --stop-position=1162 /data/3306/data/binlog.000003 &gt;/tmp/bin.sql
-- ä¾æ®binlogæ¥å¿çpositionå·ç ï¼å³å¯è·åå°æ³è¦æ¢å¤æ°æ®ä¿¡æ¯ï¼

# æ ¹æ®æªåçæ¥å¿ä¿¡æ¯ï¼è¿è¡æ°æ®åºæå¡æ°æ®æ¢å¤
mysql&gt; set sql_log_bin=0;
-- å»ºè®®å¨è¿è¡æ°æ®æ¥å¿æ¢å¤æ°æ®æ¶ï¼å°æ°æ®æ¢å¤æ¶æ§è¡çSQLè¯­å¥ä¿¡æ¯ï¼ä¸åbinlogæ¥å¿è®°å½ï¼
mysql&gt; source /tmp/bin.sql

# æ¥çç¡®è®¤æ°æ®ä¿¡æ¯æ¯å¦æ¢å¤
mysql&gt; use bindb;
mysql&gt; show tables;
mysql&gt; select * from t1;
</code></pre>
<blockquote>
<hr>
<hr>
</blockquote>
<h3 id="æ°æ®åºæ°æ®å¼å¸¸æ¢å¤">æ°æ®åºæ°æ®å¼å¸¸æ¢å¤</h3>
<h4 id="æåµä¸æ¥å¿æä»¶è¢«æ¸çè¿å¯è½å»ºåºè¯­å¥æå¨æ¥å¿å·²ç»ä¸¢å¤±">æåµä¸ï¼æ¥å¿æä»¶è¢«æ¸çè¿ï¼å¯è½å»ºåºè¯­å¥æå¨æ¥å¿å·²ç»ä¸¢å¤±</h4>
<p>é¡¹ç®èæ¯ï¼ä¸ä¸ªæ°æ®åºä¸å¹´åå°±åå»ºäºï¼ä½æ¯æ¥å¿ä¿¡æ¯åªè®°å½ä¸ä¸ªæï¼è¿ä¸ªåºè¢«è¯¯å é¤äºï¼</p>
<p>è§£å³æ¹æ¡ï¼</p>
<p>Aè®¡åï¼æè¿ä¸æ¬¡å¨å¤+å¨å¤ä¹åï¼è¯¯å é¤ä¹åææbinlogï¼è¿è¡ä¸åæ¢å¤ï¼ï¼<code>å¨å¤æ°æ®+å¢éæ°æ®</code>ï¼</p>
<p>Bè®¡åï¼å©ç¨å»¶æ¶ä»åºï¼è¿è¡æ°æ®æ¢å¤ï¼</p>
<h4 id="æåµäºæéæ¥å¿è·¨è¶å¤ä¸ªæä»¶å¦ä½è¿è¡æ¥å¿ä¿¡æ¯çæªå">æåµäºï¼æéæ¥å¿è·¨è¶å¤ä¸ªæä»¶ï¼å¦ä½è¿è¡æ¥å¿ä¿¡æ¯çæªå</h4>
<p>è§£å³æ¹æ¡ï¼</p>
<p>Aè®¡åï¼åªæpositionå·çæ¹å¼ï¼å¯ä»¥è¿è¡åæ®µæªåï¼è¿è¡åæ®µæ¢å¤æ°æ®ï¼</p>
<p>Bè®¡åï¼æ ¹æ®Datatimeæ¶é´ä¿¡æ¯æ¹å¼ï¼å¯è½ä¼åºç°åç¡®æ§ä¸é«çæåµï¼å ä¸ºæ¯ä¸ç§å¯è½æå¤ä¸ªäºä»¶äº§çï¼ï¼</p>
<p>Cè®¡åï¼å¯ç¨GTIDï¼å¨å±äºå¡IDï¼æ¹å¼ï¼æ è®ºè·¨è¶å¤å°ä¸ªæ¥å¿æä»¶ï¼æ¯ä¸ªäºå¡æä½çäºä»¶IDä¿¡æ¯é½æ¯å¯ä¸ä¸éå¢çï¼5.6+å¼å¥ï¼ï¼</p>
<p>å®è·µæä½ï¼</p>
<p><strong>Cè®¡åï¼åºäºGTIDæ¹å¼å¯¹binlogè¿è¡ç®¡çï¼å©ç¨GTIDå®ç°æ¥å¿æªåï¼</strong></p>
<p>æ°æ®åºå¼å¸¸æ¢å¤æåµç¯å¢åå¤ï¼</p>
<pre><code class="language-sql"># å·æ°æ°çbinlogæ¥å¿è¿è¡æä½
mysql&gt; flush logs;
-- çææ°çbinlogæ¥å¿ä¿¡æ¯

# ç¡®è®¤æ°çæ¥å¿ç¼å·æ¯å¦æ¯è¿ç»­ç
mysql&gt; create database test5;
mysql&gt; show binlog events in "binlog.000004"
-- å¯ä»¥çåºæ°çbinlogæ¥å¿æä»¶ä¸­ï¼è®°å½çgtidç¼å·ä¿¡æ¯æ¯å»¶ç»­äºä¸ä¸ä¸ªbinlogæ¥å¿gtidéåä¿¡æ¯ï¼ç»§ç»­è¿ç»­è¿è¡è®°å½ï¼

# è¿è¡åºæ¬çæ°æ®åºSQLè¯­å¥æä½ï¼
mysql&gt; create database gtdb;
mysql&gt; use gtdb;
mysql&gt; create table t1(id int);
mysql&gt; insert into t1 values(1);
mysql&gt; commit;
mysql&gt; insert into t1 values(2);
mysql&gt; commit;
mysql&gt; insert into t1 values(3);
mysql&gt; commit;

# è¿è¡binlogäºä»¶ä¿¡æ¯æ¥ç
mysql&gt; show binlog events in 'binlog.000004';
-- å¯ä»¥è·åä»¥ä¸çæ°æ®æä½äºä»¶ä¿¡æ¯ï¼
</code></pre>
<p>æ°æ®åºæ¨¡æå¼å¸¸æåµç ´åæä½ï¼</p>
<pre><code class="language-sql">mysql&gt; drop database gtdb;
-- æ¨¡æç ´åæ§æä½ï¼å é¤æ°æ®åº
</code></pre>
<p>æ°æ®åºå¼å¸¸æåµæ°æ®æ¢å¤æä½ï¼</p>
<pre><code class="language-sql"># æ ¹æ®æ¥å¿ä¿¡æ¯æ¥çç¸å³çäºä»¶æåµï¼è·åGTIDç¼å·èå´ï¼
mysql&gt; show binlog events in 'binlog.000004';

# éè¦æ¢å¤å»ºåºå¼å§ï¼å é¤ä¹åçæææä½ï¼å³ææbinlogæ¥å¿ä¿¡æ¯ï¼ï¼å®ç°æ¥å¿ä¿¡æ¯çæªå
[root@cheng ~]# mysqlbinlog --include-gtids='7afe4f8c-5e36-11ed-b083-000c29d44f34:3-7' /data/3306/data/binlog.000004 &gt;/tmp/gtid.sql
-- ä¾æ®binlogæ¥å¿çGTIDä¿¡æ¯ï¼å³å¯è·åå°æ³è¦æ¢å¤æ°æ®ä¿¡æ¯ï¼

# æ ¹æ®æªåçæ¥å¿ä¿¡æ¯ï¼è¿è¡æ°æ®åºæå¡æ°æ®æ¢å¤
mysql&gt; set sql_log_bin=0;
-- å»ºè®®å¨è¿è¡æ°æ®æ¥å¿æ¢å¤æ°æ®æ¶ï¼å°æ°æ®æ¢å¤æ¶æ§è¡çSQLè¯­å¥ä¿¡æ¯ï¼ä¸åbinlogæ¥å¿è®°å½ï¼æ¢å¤åå«å¿å¨æ¹ä¸º1ï¼
mysql&gt; source /tmp/gtid.sql
-- é»è®¤æ­¤æ¶æ¥éæ¢å¤å¤±è´¥ï¼å ä¸ºGTIDæªåçæ¥å¿æ¢å¤æ°æ®æ¶ï¼å·æå¹ç­æ§ï¼ç±äºbinlogä¸­å·²ç»è®°å½äº3-7çGTIDäºä»¶ä¿¡æ¯
mysql&gt; show master status;
+---------------+----------+--------------+------------------+------------------------------------------+
| File          | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set                        |
+---------------+----------+--------------+------------------+------------------------------------------+
| binlog.000004 |     1905 |              |                  | 7afe4f8c-5e36-11ed-b083-000c29d44f34:1-8 |
+---------------+----------+--------------+------------------+------------------------------------------+
1 row in set (0.00 sec)
-- éè¿æ¥çç¡®è®¤ï¼æ ¸å®æ¸æ¥binlogä¸­å·²ç»è®°å½äº3-7çGTIDäºä»¶ä¿¡æ¯

# å©ç¨GTIDæ¥å¿ä¿¡æ¯æ¢å¤æ¥éå¤çæ¹å¼ä¸ï¼å°ç³»ç»ä¸­æ¥å¿ä¸­çGTIDä¿¡æ¯æ¸é¤æï¼ä¸å»ºè®®ï¼
# å©ç¨GTIDæ¥å¿ä¿¡æ¯æ¢å¤æ¥éå¤çæ¹å¼äºï¼å é¤ä¸å¹ç­æ§å²çªçè®°å½ä¿¡æ¯
[root@cheng ~]# mysqlbinlog --skip-gtids --include-gtids='7afe4f8c-5e36-11ed-b083-000c29d44f34:3-7' /data/3306/data/binlog.000004 &gt;/tmp/gtid.sql
-- è¡¨ç¤ºè·³è¿gtidçæ£æ¥è¿ç¨ï¼å³æªåçæ¥å¿ä¸­ä¸åå«æGTIDçéç½®è¯­å¥ä¿¡æ¯ï¼èªç¶è§£å³äºå¹ç­æ§å²çªé®é¢ï¼
-- å¼å¯äºGTIDä¹åï¼ä¾ç¶å¯ä»¥ä½¿ç¨posæ¹å¼è¿è¡æ¥å¿ä¿¡æ¯æªåä¸æ¢å¤ï¼

# æ¥çç¡®è®¤æ°æ®ä¿¡æ¯æ¯å¦æ¢å¤
mysql&gt; use gtdb;
mysql&gt; show tables;
mysql&gt; select * from t1;
-- æ¥çtest1æ°æ®åºä¸­çt1è¡¨çæ°æ®ä¿¡æ¯æ¯å¦æ¢å¤

# æä½æ©å±ï¼å¯ä»¥å®ç°æé¤æå®gtidä¿¡æ¯ä¸åæ¥å¿è®°å½æªå
[root@cheng ~]# mysqlbinlog --exclude-gtids='7afe4f8c-5e36-11ed-b083-000c29d44f34:4'  --include-gtids='7afe4f8c-5e36-11ed-b083-000c29d44f34:3-7' /data/3306/data/binlog.000004 

# æä½æ©å±ï¼è·¨å¤æ¥å¿æä»¶ä¿¡æ¯æªå
[root@cheng ~]# mysqlbinlog --skip-gtids --include-gtids='7afe4f8c-5e36-11ed-b083-000c29d44f34:1-10' /data/3306/data/binlog.000001  /data/3306/data/binlog.000002 /data/3306/data/binlog.000003 &gt;/tmp/gtid.sql
</code></pre>
<ul>
<li><strong>GTIDæ¦å¿µä»ç»ï¼</strong></li>
</ul>
<p>GTIDï¼global transation idï¼ç§°ä¸ºå¨å±äºå¡ï¼äºä»¶ï¼IDï¼æ è¯binlogæ¥å¿è®°å½çå¯ä¸æ§ï¼</p>
<p>GTIDä¿¡æ¯çè¡¨ç¤ºæ¹å¼ï¼</p>
<table>
<thead>
<tr>
<th>è¡¨ç°å½¢å¼</th>
<th>å³é®å</th>
<th>è§£éè¯´æ</th>
</tr>
</thead>
<tbody>
<tr>
<td>server_uuid:N</td>
<td>server_uuid</td>
<td>è¡¨ç¤ºæ°æ®åºåå§åå¯å¨ä¹åï¼èªå¨çæçéæºæ°ä¿¡æ¯ï¼å¯ä¸çï¼</td>
</tr>
<tr>
<td></td>
<td>N</td>
<td>è¡¨ç¤ºç¬¬å ä¸ªç¸å³çäºå¡æäºä»¶ä¿¡æ¯ï¼ä¼ä¸æ­è¿è¡èªå¢</td>
</tr>
</tbody>
</table>
<p>server_uuidä¿¡æ¯æ¥çï¼</p>
<pre><code class="language-sql">mysql&gt; select @@server_uuid;
+---------------------------------------------------+
| @@server_uuid                                     |
+---------------------------------------------------+
| 7afe4f8c-5e36-11ed-b083-000c29d44f34              |
+---------------------------------------------------+
1 row in set (0.00 sec)
-- è¡¨ç¤ºæ°æ®åºæ¯æ¬¡åå§åä¹åèªå¨çæï¼ä¸å»ºè®®æå·¥è¿è¡ä¿®æ¹ï¼

[root@cheng ~]# cat /data/3306/data/auto.cnf 
[auto]
server-uuid=7afe4f8c-5e36-11ed-b083-000c29d44f34
-- å¨æ°æ®åºçæ°æ®ç®å½æä»¶ä¸­ä¹å¯ä»¥æ¥è¯¢å°
</code></pre>
<ul>
<li><strong>GTIDåè½ä½ç¨ï¼</strong></li>
</ul>
<p>å©ç¨GTIDæ¹å¼ç®¡çbinlogï¼å®è´¨ä¸å°±æ¯å¯¹äºæ°æ®åºçæ¯ä¸ªäºå¡äº§çäºä»¶ä¿¡æ¯æä¸å¯ä¸æ è¯ä¿¡æ¯ï¼idå·ï¼ï¼</p>
<p>å©ç¨GTIDæ¹å¼ç®¡çbinlogï¼ä¸»è¦ç®çæ¯å¤çæ°æ®åºä¸»ä»é®é¢ï¼è§£å³ä¸»ä»æ°æ®åºçæ°æ®ä¸è´æ§é®é¢ï¼</p>
<p>ç®åæè¿°ï¼æ è¯äºå¡çå¯ä¸æ§ï¼ä¿è¯æ¥å¿æ¢å¤æ¶çä¸è´æ§ï¼å¹¶ä¸å·å¤âå¹ç­æ§âï¼</p>
<ul>
<li><strong>GTIDåè½éç½®ï¼</strong></li>
</ul>
<p>GTIDåè½ç¸å³åæ°ä»ç»ï¼</p>
<pre><code class="language-sql"># GTIDåè½åæ°ä¿¡æ¯ä»ç»ï¼3ä¸ªéè¦çéç½®åæ°ï¼
mysql&gt; select @@gtid_mode;
+-------------------+
| @@gtid_mode       |
+-------------------+
| OFF               |
+-------------------+
1 row in set (0.00 sec)
-- è®¾ç½®æ¯å¦å¼å¯æ¾ç¤ºgtidä¿¡æ¯åè½ï¼å¨5.7ä¹åæ¯æä¸ªå¿åçgtidï¼æ¯æ°æ®åºç³»ç»èªå·±ç»´æ¤çï¼

mysql&gt; select @@enforce_gtid_consistency;
+-------------------------------------+
| @@enforce_gtid_consistency          |
+-------------------------------------+
| OFF                                 |
+-------------------------------------+
1 row in set (0.00 sec)
-- è®¾ç½®æ¯å¦å¼å¯GTIDå¼ºå¶ä¸è´æ§åè½
-- å¯¹æäº SQL ä¼æéå¶ï¼ä¾å¦ CREATE TABLE â¦ SELECT å¿é¡»å¾åæä¸¤æ¡è¯­å¥æ§è¡ã
-- OFFï¼    è¡¨ç¤ºäºå¡åè®¸è¿å GTID ä¸è´æ§ã
-- ONï¼     è¡¨ç¤ºäºå¡ä¸åè®¸è¿å GTID ä¸è´æ§ï¼æç¸å³ SQL ä¼ç´æ¥è¿åå¼å¸¸ã
-- WARNï¼è¡¨ç¤ºäºå¡åè®¸è¿å GTID ä¸è´æ§ï¼ä½ä¼å°è­¦åä¿¡æ¯è®°å½å° ERROR LOGã

mysql&gt; select @@log_slave_updates;
+----------------------------+
| @@log_slave_updates        |
+----------------------------+
|      1                     |
+----------------------------+
1 row in set, 1 warning (0.01 sec)
-- åéç½®ä¸»ä»æå³ï¼å¨8.0.26å¼å§ æ¨èéç½®log_replica_updatesæ¿ä»£log_slave_updatesåæ°ï¼
-- æ­¤åæ°è¡¨ç¤ºä»æå¡å¨ä»ä¸»æå¡å¨æ¥æ¶çæ´æ°ä¿¡æ¯ï¼æ¯å¦ä¹ä¼è®°å½å¨ä»æå¡å¨æ¬å°çäºè¿å¶æä»¶ä¸­
</code></pre>
<p>GTIDåè½ç¸å³åæ°æ¿æ´»ï¼</p>
<pre><code class="language-sql">[root@cheng ~]# vim /etc/my.cnf
[mysqld]
gtid_mode=on
enforce_gtid_consistency=1
log_slave_updates=on
-- éç½®æä»¶ä¿¡æ¯ä¿®æ¹å®æ¯åï¼éå¯æ°æ®åºæå¡ä½¿éç½®çæ
</code></pre>
<ul>
<li><strong>GTIDä¿¡æ¯æ¥çï¼</strong></li>
</ul>
<pre><code class="language-sql">mysql&gt; show master status;
+------------------+-----------+-------------------+-----------------------+-------------------------+
| File             | Position  | Binlog_Do_DB      | Binlog_Ignore_DB      | Executed_Gtid_Set       |
+------------------+-----------+-------------------+-----------------------+-------------------------+
| binlog.000004    |    156    |                   |                       |                         |
+------------------+-----------+-------------------+-----------------------+-------------------------+
1 row in set (0.03 sec)
-- å¨GTIDåè½è¢«æ¿æ´»åï¼å°±ä¼å¨Executed_Gtid_Setåä¸­æ¾ç¤ºGTIDéåä¿¡æ¯ï¼

mysql&gt; create database test3;
Query OK, 1 row affected (0.08 sec)
-- æ¨¡æåå»ºæ°æ®åºï¼äº§çæ°çäºä»¶ä¿¡æ¯
mysql&gt; show master status;
+------------------+----------+--------------+------------------+----------------------------------------+
| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set                      |
+------------------+----------+--------------+------------------+----------------------------------------+
| binlog.000004    |      344 |              |                  | 7afe4f8c-5e36-11ed-b083-000c29d44f34:1 |
+------------------+----------+--------------+------------------+----------------------------------------+
1 row in set (0.01 sec)
-- GTIDä¿¡æ¯éçæ°çäºä»¶äº§çï¼éä¹åçåå
mysql&gt; create database test4;
Query OK, 1 row affected (0.03 sec)
-- æ¨¡æåå»ºæ°æ®åºï¼äº§çæ°çäºä»¶ä¿¡æ¯
mysql&gt; show master status;
+---------------+----------+--------------+------------------+------------------------------------------+
| File          | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set                        |
+---------------+----------+--------------+------------------+------------------------------------------+
| binlog.000004 |      532 |              |                  | 7afe4f8c-5e36-11ed-b083-000c29d44f34:1-2 |
+---------------+----------+--------------+------------------+------------------------------------------+
1 row in set (0.00 sec)
-- GTIDä¿¡æ¯éçæ°çäºä»¶äº§çï¼éä¹åçåå

mysql&gt; show binlog events in 'binlog.000004';
+---------------+-----+----------------+-----------+-------------+-------------------------------------------------------------------+
| Log_name      | Pos | Event_type     | Server_id | End_log_pos | Info                                                              |
+---------------+-----+----------------+-----------+-------------+-------------------------------------------------------------------+
| binlog.000004 |   4 | Format_desc    |         1 |         125 | Server ver: 8.0.26, Binlog ver: 4                                 |
| binlog.000004 | 125 | Previous_gtids |         1 |         156 |                                                                   |
| binlog.000004 | 156 | Gtid           |         1 |         233 | SET @@SESSION.GTID_NEXT= '7afe4f8c-5e36-11ed-b083-000c29d44f34:1' |
| binlog.000004 | 233 | Query          |         1 |         344 | create database test3 /* xid=6 */                                 |
| binlog.000004 | 344 | Gtid           |         1 |         421 | SET @@SESSION.GTID_NEXT= '7afe4f8c-5e36-11ed-b083-000c29d44f34:2' |
| binlog.000004 | 421 | Query          |         1 |         532 | create database test4 /* xid=8 */                                 |
+---------------+-----+----------------+-----------+-------------+-------------------------------------------------------------------+
6 rows in set (0.00 sec)
-- å¨æ¯ä¸ªæ°æ®åºæä½äºä»¶ä¹åï¼ä¼æ¾ç¤ºGTIDçå¯ä¸æ è¯ä¿¡æ¯
</code></pre>
<h4 id="æåµä¸å¦ä½ä»æ¥å¿æä»¶ä¸­æ¢å¤ååºåè¡¨æèé¨åè¡æ°æ®ä¿¡æ¯">æåµä¸ï¼å¦ä½ä»æ¥å¿æä»¶ä¸­æ¢å¤ååºãåè¡¨ãæèé¨åè¡æ°æ®ä¿¡æ¯</h4>
<p>è§£å³æ¹æ¡ï¼</p>
<p>Aè®¡åï¼å¯ä»¥å©ç¨å½ä»¤åç¬æªåæä¸ªæ°æ®åºçæ¥å¿ä¿¡æ¯ï¼<code>mysqlbinlog -d world  xxx &gt; xxxx</code></p>
<p>Bè®¡åï¼å¯ä»¥åå©ç¬¬ä¸æ¹å·¥å·å®ç°åè¡¨æé¨åæ°æ®æ¢å¤ï¼<code>binlog2sqlï¼pythonï¼</code> è¿æ»¤æå®è¡¨æ°æ®æè¿æ»¤æå®è¡¨çé¨åæ°æ®ï¼</p>
<p>å®ææä½ï¼</p>
<p><strong>Aè®¡åï¼ååºæ¥å¿ä¿¡æ¯æªåï¼ä¼ä¸å®æè¿ç¨</strong>ï¼</p>
<p>æ°æ®åºå¼å¸¸æ¢å¤æåµç¯å¢åå¤ï¼</p>
<pre><code class="language-sql"># æ¥çè·åå½åbinlogæ¥å¿ç¶æä¿¡æ¯
mysql &gt; show master status;
+------------------+-----------+-------------------+-----------------------+-------------------------+
| File             | Position  | Binlog_Do_DB      | Binlog_Ignore_DB      | Executed_Gtid_Set       |
+------------------+-----------+-------------------+-----------------------+-------------------------+
| binlog.000003    |      1269 |                   |                       |                         |
+------------------+-----------+-------------------+-----------------------+-------------------------+

# è¿è¡åºæ¬çæ°æ®åºSQLè¯­å¥æä½ï¼
mysql&gt; create database test1;
mysql&gt; create table t1 (id int);
mysql&gt; insert into t1 values(1);
mysql&gt; insert into t1 values(2);
mysql&gt; commit;
mysql&gt; select * from t1;
+------+
| id     |
+------+
|      1 |
|      2 |
+------+
2 rows in set (0.00 sec)
-- åå»ºäºä¸ä¸ªtest1æ°æ®åºï¼å¹¶å¨æ°æ®åºä¸­åå»ºäºä¸ä¸ªè¡¨ï¼å¨è¡¨ä¸­æå¥äºä¸äºæ°æ®ä¿¡æ¯
mysql&gt; create database test2;
mysql&gt; use test2;
mysql&gt; create table t2 (id int);
mysql&gt; insert into t2 values(1);
mysql&gt; insert into t2 values(2);
mysql&gt; commit;
-- åå»ºäºä¸ä¸ªtest2æ°æ®åºï¼å¹¶å¨æ°æ®åºä¸­åå»ºäºä¸ä¸ªè¡¨ï¼å¨è¡¨ä¸­æå¥äºä¸äºæ°æ®ä¿¡æ¯
mysql&gt; use test1;
mysql&gt; insert into t1 values(3);
mysql&gt; insert into t1 values(4);
mysql&gt; use test2;
mysql&gt; insert into t2 values(3);
mysql&gt; insert into t2 values(4);
mysql&gt; commit;
mysql&gt; select * from test1.t1;
mysql&gt; select * from test2.t2;
-- éè¿æä½ä¸åçæ°æ®åºï¼ä»¥åä¸åçæ°æ®è¡¨ï¼å®ç°binlogæ¥å¿äºä»¶ä¿¡æ¯çäº¤å
</code></pre>
<p>æ°æ®åºæ¨¡æå¼å¸¸æåµç ´åæä½ï¼</p>
<pre><code class="language-sql">mysql&gt; drop database test1;
-- æ¨¡æç ´åæ§æä½ï¼å é¤æ°æ®åº
</code></pre>
<p>æ°æ®åºå¼å¸¸æåµæ°æ®æ¢å¤æä½ï¼</p>
<pre><code class="language-sql"># æ ¹æ®æ¥å¿ä¿¡æ¯æ¥çç¸å³çäºä»¶æåµ
mysql&gt; show binlog events in 'binlog.000003';

# éè¦æ¢å¤å»ºåºå¼å§ï¼å é¤ä¹åçæææä½ï¼å³ææbinlogæ¥å¿ä¿¡æ¯ï¼ï¼å®ç°æ¥å¿ä¿¡æ¯çæªå
[root@cheng ~]# mysqlbinlog --start-position=1346 --stop-position=4116 -d test1 /data/3306/data/binlog.000003 &gt;/tmp/bin.sql
-- ä¾æ®binlogæ¥å¿çpositionå·ç ï¼å³å¯è·åå°æ³è¦æ¢å¤æ°æ®ä¿¡æ¯ï¼å¹¶å©ç¨-dåæ°å¯¼åºæå®æ°æ®åºç¸å³æ°æ®ï¼

# æ ¹æ®æªåçæ¥å¿ä¿¡æ¯ï¼è¿è¡æ°æ®åºæå¡æ°æ®æ¢å¤
mysql&gt; set sql_log_bin=0;
-- å»ºè®®å¨è¿è¡æ°æ®æ¥å¿æ¢å¤æ°æ®æ¶ï¼å°æ°æ®æ¢å¤æ¶æ§è¡çSQLè¯­å¥ä¿¡æ¯ï¼ä¸åbinlogæ¥å¿è®°å½ï¼æ¢å¤åå«å¿å¨æ¹ä¸º1ï¼
mysql&gt; source /tmp/bin.sql

# æ¥çç¡®è®¤æ°æ®ä¿¡æ¯æ¯å¦æ¢å¤
mysql&gt; use test1;
mysql&gt; show tables;
mysql&gt; select * from t1;
-- æ¥çtest1æ°æ®åºä¸­çt1è¡¨çæ°æ®ä¿¡æ¯æ¯å¦æ¢å¤
mysql&gt; use test2;
mysql&gt; show tables;
mysql&gt; select * from t2;
-- æ¥çtest2æ°æ®åºä¸­çt2è¡¨çæ°æ®ä¿¡æ¯æ¯å¦ç ´å
</code></pre>
<p><strong>Bè®¡åï¼å¯ä»¥åå©ç¬¬ä¸æ¹å·¥å·å®ç°åè¡¨æé¨åæ°æ®æ¢å¤ï¼</strong></p>
<p>å©ç¨binlog2sqlå·¥å·å¯ä»¥å¤çä¸é¢çä¼ä¸éæ±ï¼æ­¤è½¯ä»¶æ¯å©ç¨pythonè¯­è¨å¼åçï¼ä¸»è¦ç¨æ¥å¤çbinlogæ¥å¿ä¿¡æ¯ï¼</p>
<p>ä»è½¯ä»¶åºç¨æ¹é¢æ¥è¯´ä¸»è¦åå«ä¸¤ä¸ªæ ¸å¿åè½ï¼</p>
<ul>
<li>å¯ä»¥åå¥½çå±ç¤ºæèç®¡çäºè¿å¶æ¥å¿ä¿¡æ¯ï¼binlogï¼ï¼è¿èå¯ä»¥è¿æ»¤åºåç¬è¡¨çä¿¡æ¯ï¼çè³è¡¨ä¸­æå®è¡çä¿¡æ¯ï¼</li>
<li>å¯ä»¥å¿«éçå®ç°DMLæä½è¯­å¥çéªååè½ï¼å³å®ç°éè¿æ¥å¿ä¿¡æ¯ç¿»è½¬æ¹å¼ï¼è¿è¡æ°æ®ä¿¡æ¯çæ¢å¤ï¼</li>
</ul>
<blockquote>
<p>è¯´æï¼binlog2sqlå·¥å·æ¯æ¨¡æäºä¸ä¸ªä»åºï¼è¿è¡æ¥å¿ä¿¡æ¯åæï¼éè¦ä¿è¯æ°æ®åºæå¡å¯å¨ç¶æï¼ä¸ä¸æ¯æç¦»çº¿æ¹å¼åææ¥å¿åå®¹ï¼</p>
</blockquote>
<p>æ°æ®åºå¼å¸¸æ¢å¤æåµç¯å¢åå¤ï¼</p>
<pre><code class="language-sql"># ä¸è½½ç¬¬ä¸æ¹æ¥å¿åæå·¥å·
[root@cheng ~]# cd /opt/
[root@cheng ~]# git clone https://github.com/danfengcao/binlog2sql.git
[root@cheng ~]# cd /opt/binlog2sql
-- æ­¤å·¥å·å¨mariadbä¸­å¯ä»¥éè¿æè¡¥ä¸æ¹å¼ï¼è¿è¡é¨ç½²å®è£ï¼ä½æ¯å¨mysql 8.0ä¸­ææ¶è¿æ²¡æéæï¼éè¦åç¬å®è£

# é¨ç½²ç¬¬ä¸æ¹å·¥å·è¿è¡ç¯å¢
[root@cheng ~]# yum install -y python3
[root@cheng ~]# pip3 install -r requirments.txt
[root@cheng ~]# pip3 show pymysql
[root@cheng ~]# pip3 install --upgrade pymysql    ï¼æ­¤æ­¥éª¤å¯ä»¥å¿½ç¥ï¼
-- ä»¥ä¸pip3ä¸è½½è½¯ä»¶ç¼æ¢ï¼å¯ä»¥ä¼åpip3ä¸è½½æº
-- ä¸è½½æºä¼åæ¹æ³ï¼https://developer.aliyun.com/mirror/pypi?spm=a2c6h.13651102.0.0.3e221b11H9Q7La

# å¨æå®æ°æ®åºä¸­åå»ºå¤ä¸ªæ°æ®è¡¨
mysql&gt; use test1;
mysql&gt; create table t11 (id int);
mysql&gt; insert into t11 values (1),(2);
mysql&gt; commit;
</code></pre>
<p>æ°æ®åºæ¥å¿ä¿¡æ¯å·¥å·åææ¥çï¼ï¼è§£ææ¥å¿äºä»¶SQLï¼</p>
<pre><code class="language-sql">[root@cheng binlog2sql]# python3 binlog2sql.py -h 10.0.0.101 -P3306 -uroot -p123456 -d test1 -t t1 --start-file='binlog.000003'
INSERT INTO `test1`.`t1`(`id`) VALUES (1); #start 1460 end 1704 time 2022-11-21 22:16:32 gtid 
INSERT INTO `test1`.`t1`(`id`) VALUES (2); #start 1735 end 1979 time 2022-11-21 22:16:35 gtid 
INSERT INTO `test1`.`t1`(`id`) VALUES (3); #start 2939 end 3183 time 2022-11-21 22:20:53 gtid 
INSERT INTO `test1`.`t1`(`id`) VALUES (4); #start 3214 end 3458 time 2022-11-21 22:22:19 gtid
[root@cheng binlog2sql-master]# python3 binlog2sql.py -h 10.0.0.101 -P3306 -uroot -p123456 -d test1 -t t11 --start-file='binlog.000003'
INSERT INTO `test1`.`t11`(`id`) VALUES (1); #start 4704 end 4954 time 2022-11-21 23:47:51 gtid 
INSERT INTO `test1`.`t11`(`id`) VALUES (2); #start 4704 end 4954 time 2022-11-21 23:47:51 gtid 
-- è¡¨çæ°æ®ä¿¡æ¯å¯¼åºåï¼å¯ä»¥ç´æ¥å¤å¶å½ä»¤ä¿¡æ¯æ¢å¤ï¼æèå¯¼åºsqlæä»¶è¿è¡å¯¼å¥æ¢å¤ï¼
</code></pre>
<p>æ°æ®åºæ¨¡æå¼å¸¸æåµç ´åæä½ï¼</p>
<pre><code class="language-sql"># å¨æå®æ°æ®åºçç¸åºæ°æ®è¡¨ä¸­åä¿®æ¹æä½
mysql&gt; use test1;
mysql&gt; update t1 set id=10 where id=1;
mysql&gt; commit;

# å¨æå®æ°æ®åºçç¸åºæ°æ®è¡¨ä¸­åå é¤æä½
mysql&gt; use test1;
mysql&gt; delete from t1 where id=3;
mysql&gt; commit;
</code></pre>
<p>æ°æ®åºæ¥å¿ä¿¡æ¯å·¥å·åææ¥çï¼ï¼è§£ææ¥å¿äºä»¶SQLï¼</p>
<pre><code class="language-sql">[root@cheng binlog2sql-master]# python3 binlog2sql.py -h 10.0.0.101 -P3306 -uroot -p123456 -d test1 -t t1 --start-file='binlog.000003'
INSERT INTO `test1`.`t1`(`id`) VALUES (1); #start 1460 end 1704 time 2022-11-21 22:16:32 gtid 
INSERT INTO `test1`.`t1`(`id`) VALUES (2); #start 1735 end 1979 time 2022-11-21 22:16:35 gtid 
INSERT INTO `test1`.`t1`(`id`) VALUES (3); #start 2939 end 3183 time 2022-11-21 22:20:53 gtid 
INSERT INTO `test1`.`t1`(`id`) VALUES (4); #start 3214 end 3458 time 2022-11-21 22:22:19 gtid 
UPDATE `test1`.`t1` SET `id`=10 WHERE `id`=1 LIMIT 1; #start 4985 end 5244 time 2022-11-21 23:52:33 gtid 
DELETE FROM `test1`.`t1` WHERE `id`=3 LIMIT 1; #start 5275 end 5519 time 2022-11-21 23:54:17 gtid 

# åªæ³æ¥çå é¤æä½ä¿¡æ¯
[root@cheng binlog2sql-master]# python3 binlog2sql.py -h 10.0.0.101 -P3306 -uroot -p123456 -d test1 -t t1 --sql-type=delete --start-file='binlog.000003'
DELETE FROM `test1`.`t1` WHERE `id`=3 LIMIT 1; #start 5275 end 5519 time 2022-11-21 23:54:17 gtid
-- sql-typeåæ°åªè½è¿æ»¤DMLç±»åè¯­å¥ä¿¡æ¯ï¼ä¸è¬å¸¸è§è¿æ»¤çæ¯ insert update delete

# åªæ³æ¥çä¿®æ¹æä½ä¿¡æ¯
[root@cheng binlog2sql-master]# python3 binlog2sql.py -h 10.0.0.101 -P3306 -uroot -p123456 -d test1 -t t1 --sql-type=update --start-file='binlog.000003'
UPDATE `test1`.`t1` SET `id`=10 WHERE `id`=1 LIMIT 1; #start 4985 end 5244 time 2022-11-21 23:52:33 gtid

# åªæ³æ¥çæå¥æä½ä¿¡æ¯
[root@cheng binlog2sql-master]# python3 binlog2sql.py -h 10.0.0.101 -P3306 -uroot -p123456 -d test1 -t t1 --sql-type=insert --start-file='binlog.000003'
INSERT INTO `test1`.`t1`(`id`) VALUES (1); #start 1460 end 1704 time 2022-11-21 22:16:32 gtid 
INSERT INTO `test1`.`t1`(`id`) VALUES (2); #start 1735 end 1979 time 2022-11-21 22:16:35 gtid 
INSERT INTO `test1`.`t1`(`id`) VALUES (3); #start 2939 end 3183 time 2022-11-21 22:20:53 gtid 
INSERT INTO `test1`.`t1`(`id`) VALUES (4); #start 3214 end 3458 time 2022-11-21 22:22:19 gtid
</code></pre>
<p>æ°æ®åºæ¥å¿ä¿¡æ¯å·¥å·åæ»æä½ï¼ï¼çææå®äºä»¶åæ»è¯­å¥-éªåæä½ï¼</p>
<p>åè®¾å¨æä¸ªä¼ä¸çåºç¨åºæ¯ä¸­ï¼æ3000ä¸è¡æ°æ®ï¼å ç¨200Gçå­å¨ç©ºé´ï¼å¶ä¸­è¯¯å é¤äº10è¡æ°æ®ä¿¡æ¯ï¼è¯·é®å¦ä½è¿è¡æ¢å¤æ°æ®ï¼</p>
<pre><code class="language-sql"># è¯¯å é¤æä½è¯­å¥åè½¬æä½
[root@cheng binlog2sql-master]# python3 binlog2sql.py -h 10.0.0.101 -P3306 -uroot -p123456 -d test1 -t t1 --sql-type=delete --start-file='binlog.000003'
DELETE FROM `test1`.`t1` WHERE `id`=3 LIMIT 1; #start 5275 end 5519 time 2022-11-21 23:54:17 gtid
-- è·åå é¤æä½è¯­å¥ä¿¡æ¯

[root@cheng binlog2sql-master]# python3 binlog2sql.py -h 10.0.0.101 -P3306 -uroot -p123456 -d test1 -t t1 --sql-type=delete --start-file='binlog.000003' -B
INSERT INTO `test1`.`t1`(`id`) VALUES (3); #start 5275 end 5519 time 2022-11-21 23:54:17 gtid
-- å¨è·åå é¤æä½è¯­å¥å½ä»¤åå  -B åæ°ï¼æ­£å¥½è·å¾äºåè½¬è¯­å¥çæä½ä¿¡æ¯

# è¯¯ä¿®æ¹æä½è¯­å¥åè½¬æä½
[root@cheng binlog2sql-master]# python3 binlog2sql.py -h 10.0.0.101 -P3306 -uroot -p123456 -d test1 -t t1 --sql-type=update --start-file='binlog.000003'
UPDATE `test1`.`t1` SET `id`=10 WHERE `id`=1 LIMIT 1; #start 4985 end 5244 time 2022-11-21 23:52:33 gtid 
-- è·åä¿®æ¹æä½è¯­å¥ä¿¡æ¯

[root@cheng binlog2sql-master]# python3 binlog2sql.py -h 10.0.0.101 -P3306 -uroot -p123456 -d test1 -t t1 --sql-type=update --start-file='binlog.000003' -B
UPDATE `test1`.`t1` SET `id`=1 WHERE `id`=10 LIMIT 1; #start 4985 end 5244 time 2022-11-21 23:52:33 gtid
-- å¨è·åä¿®æ¹æä½è¯­å¥å½ä»¤åå  -B åæ°ï¼æ­£å¥½è·å¾äºåè½¬è¯­å¥çæä½ä¿¡æ¯

# è¯¯æå¥æä½è¯­å¥åè½¬æä½
[root@cheng binlog2sql-master]# python3 binlog2sql.py -h 10.0.0.101 -P3306 -uroot -p123456 -d test1 -t t1 --sql-type=insert --start-file='binlog.000003'
INSERT INTO `test1`.`t1`(`id`) VALUES (1); #start 1460 end 1704 time 2022-11-21 22:16:32 gtid 
INSERT INTO `test1`.`t1`(`id`) VALUES (2); #start 1735 end 1979 time 2022-11-21 22:16:35 gtid 
INSERT INTO `test1`.`t1`(`id`) VALUES (3); #start 2939 end 3183 time 2022-11-21 22:20:53 gtid 
INSERT INTO `test1`.`t1`(`id`) VALUES (4); #start 3214 end 3458 time 2022-11-21 22:22:19 gtid 
-- è·åæå¥æä½è¯­å¥ä¿¡æ¯

[root@cheng binlog2sql-master]# python3 binlog2sql.py -h 10.0.0.101 -P3306 -uroot -p123456 -d test1 -t t1 --sql-type=insert --start-file='binlog.000003' -B
DELETE FROM `test1`.`t1` WHERE `id`=4 LIMIT 1; #start 3214 end 3458 time 2022-11-21 22:22:19 gtid
DELETE FROM `test1`.`t1` WHERE `id`=3 LIMIT 1; #start 2939 end 3183 time 2022-11-21 22:20:53 gtid
DELETE FROM `test1`.`t1` WHERE `id`=2 LIMIT 1; #start 1735 end 1979 time 2022-11-21 22:16:35 gtid
DELETE FROM `test1`.`t1` WHERE `id`=1 LIMIT 1; #start 1460 end 1704 time 2022-11-21 22:16:32 gtid
-- å¨è·åæå¥æä½è¯­å¥å½ä»¤åå  -B åæ°ï¼æ­£å¥½è·å¾äºåè½¬è¯­å¥çæä½ä¿¡æ¯
</code></pre>

</div>
<div id="MySignature" role="contentinfo">
    <!-- çæä¿æ¤ 
<div style="color: red; font-weight: bold; font-size: 15px;">
æ´å¤ææ°æç« ï¼<a href="https://juejin.cn/user/1383642897854980/posts">ãä¼ éé¨ã</a><br>
</div>
<br>
<div style="text-align:center;background-color:font-size: 24px; ">
-->
<div style="color: red; text-align: center; font-weight: bold; font-size: 15px;">
**********   å¦ææ¨è®¤ä¸ºè¿ç¯æç« è¿ä¸éæèæææ¶è·ï¼è¯·ç¹å»å³ä¸è§çãæ¨èã/ãèµå©ãæé®ï¼å ä¸ºæ¨çæ¯ææ¯æç»§ç»­åä½åäº«çæå¤§å¨åï¼   **********
</div>
<br>

<div style="background:LightBlue; color:#0; font-size: 15px;">
            ä½èï¼<a href="https://www.cnblogs.com/zhangwencheng">è®²æå¼ å­</a><br>
            åºå¤ï¼<a href="https://www.cnblogs.com/zhangwencheng">https://www.cnblogs.com/zhangwencheng</a><br>
            çæï¼æ¬æçæå½ä½èååå®¢å­å±æï¼æ¬¢è¿è½¬è½½ï¼ä½æªç»ä½èåæå¿é¡»ä¿çæ­¤æ®µå£°æï¼ä¸å¨æç« é¡µé¢ææ¾ä½ç½®ç»åº
             <a href="#" onclick="Curgo()" style="background:#b6ff00; color:#0; font-size:medium;">åæé¾æ¥</a>
    
</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-25 10:24">2025-12-25 10:24</span>&nbsp;
<a href="https://www.cnblogs.com/zhangwencheng">è®²æå¼ å­</a>&nbsp;
éè¯»(<span id="post_view_count">12</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19388036);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19388036', targetLink: 'https://www.cnblogs.com/zhangwencheng/p/19388036', title: 'MySQL æ°æ®åºæ¥å¿æ»ç»(ä¸)' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ãé¢è¯é¢ãMySQL çç´¢å¼ä¸æ¨æ¯ä»ä¹ï¼ ]]></title>
    <link>https://www.cnblogs.com/sun-10387834/p/19371453</link>
    <guid>381fcb534e44f14cb5d6e5692abe88bf</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/sun-10387834/p/19371453" title="åå¸äº 2025-12-25 09:09">
    <span role="heading" aria-level="2">ãé¢è¯é¢ãMySQL çç´¢å¼ä¸æ¨æ¯ä»ä¹ï¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="-ç§æ-mysql-ç´¢å¼ä¸æ¨">ð ç§æ MySQL ç´¢å¼ä¸æ¨</h1>
<h2 id="-ä¸å¥è¯æ¦æ¬">ð¯ ä¸å¥è¯æ¦æ¬</h2>
<p><strong>ç´¢å¼ä¸æ¨å°±æ¯è®©ç´¢å¼å¤å¹²ç¹æ´»ï¼å°ææ°æ°æ®è¡</strong></p>
<h2 id="-éä¿çè§£é">ð éä¿çè§£é</h2>
<p>æ³è±¡ä½ å¨ä¸å®¶å¤§å¬å¸æ¾åå·¥ä¿¡æ¯ï¼</p>
<h3 id="æ²¡æç´¢å¼ä¸æ¨ä¼ ç»æ¹å¼"><strong>æ²¡æç´¢å¼ä¸æ¨ï¼ä¼ ç»æ¹å¼ï¼</strong></h3>
<blockquote>
<p>ä½ ï¼äººäºå°å§å§ï¼æè¦æ¾<strong>å¹´é¾å¤§äº25å²</strong>çææåå·¥</p>
<p>äººäºï¼å¥½çï¼è¿æ¯500ä¸ªç¬¦åå¹´é¾è¦æ±çåå·¥ååï¼åªç»äºå·¥å·ï¼</p>
<p>ä½ ï¼æè¿éè¦ä»ä»¬æ¯<strong>åäº¬åå¬å¸ç</strong></p>
<p>äººäºï¼é£ä½ èªå·±å»æ¥è¿500ä¸ªäººçè¯¦ç»æ¡£æ¡å§</p>
<p>ä½ ï¼ð­ æè¦ç¿»500ä»½æ¡£æ¡ï¼ä¸ä¸ªä¸ªçæ¯ä¸æ¯åäº¬åå¬å¸ç</p>
</blockquote>
<p><strong>é®é¢</strong>ï¼ææå¯ä»¥å¨äººäºé£éå°±è¿æ»¤æï¼éè¦è®©ä½ æ¥500æ¬¡æ¡£æ¡</p>
<h3 id="æäºç´¢å¼ä¸æ¨ä¼åå"><strong>æäºç´¢å¼ä¸æ¨ï¼ä¼ååï¼</strong></h3>
<blockquote>
<p>ä½ ï¼äººäºå°å§å§ï¼æè¦æ¾<strong>å¹´é¾å¤§äº25å²</strong>ä¸æ¯<strong>åäº¬åå¬å¸</strong>çåå·¥</p>
<p>äººäºï¼å¥½çï¼æç´æ¥å¸®ä½ ç­éï¼è¿æ¯80ä¸ªç¬¦åè¦æ±çåå·¥åå</p>
<p>ä½ ï¼å¤ªå¥½äºï¼æåªéè¦æ¥80ä»½æ¡£æ¡</p>
</blockquote>
<p><strong>ææ</strong>ï¼äººäºï¼ç´¢å¼ï¼å¸®ä½ å®æäºé¢å¤ç­éï¼ä½ å°æ¥äº420æ¬¡æ¡£æ¡</p>
<h2 id="-å®éæ°æ®åºä¾å­">ð§ å®éæ°æ®åºä¾å­</h2>
<pre><code class="language-sql">-- åå·¥è¡¨ï¼ç´¢å¼å¨ (å¹´é¾, åå¬å¸)
CREATE TABLE åå·¥è¡¨ (
    å·¥å· INT PRIMARY KEY,
    å§å VARCHAR(50),
    å¹´é¾ INT,
    åå¬å¸ VARCHAR(50),
    å·¥èµ DECIMAL(10,2),
    INDEX idx_å¹´é¾_åå¬å¸ (å¹´é¾, åå¬å¸)
);

-- ä¼ ç»æ¥è¯¢ï¼æ²¡æç´¢å¼ä¸æ¨ï¼
SELECT * FROM åå·¥è¡¨ 
WHERE å¹´é¾ &gt; 25 
  AND åå¬å¸ LIKE 'åäº¬%';

-- æ§è¡è¿ç¨ï¼
-- 1. ç´¢å¼æ¾å°ææå¹´é¾&gt;25çè®°å½ï¼500æ¡ï¼
-- 2. æ¿ç500ä¸ªå·¥å·å»æ¥è¯¦ç»æ¡£æ¡ï¼500æ¬¡ï¼
-- 3. å¨500æ¡è¯¦ç»è®°å½ä¸­ç­é"åäº¬åå¬å¸"
</code></pre>
<pre><code class="language-sql">-- å¼å¯ç´¢å¼ä¸æ¨å
-- æ§è¡è¿ç¨ï¼
-- 1. ç´¢å¼æ¾å°ææå¹´é¾&gt;25çè®°å½ï¼500æ¡ï¼
-- 2. ç´¢å¼èªå·±åç­é"åå¬å¸ LIKE 'åäº¬%'"ï¼å©80æ¡ï¼
-- 3. åªæ¥80ä¸ªåå·¥çè¯¦ç»æ¡£æ¡
</code></pre>
<h2 id="-æ ¸å¿å¥½å¤">ð¡ æ ¸å¿å¥½å¤</h2>
<h3 id="1-åå°è·è¿æ¬¡æ°"><strong>1. åå°è·è¿æ¬¡æ°</strong></h3>
<ul>
<li>åæ¥ï¼è·500æ¬¡æ¡£æ¡å®¤</li>
<li>ç°å¨ï¼è·80æ¬¡æ¡£æ¡å®¤</li>
<li><strong>èç84%çè·è¿æ¶é´</strong></li>
</ul>
<h3 id="2-äººäºå°å§å§æ´èªæäº"><strong>2. äººäºå°å§å§æ´èªæäº</strong></h3>
<p>ä»¥åäººäºåªåæç®åçç­éï¼ç°å¨å¥¹è½åæ´å¤ï¼</p>
<ul>
<li>â å¯ä»¥å¤æ­ï¼<code>åå¬å¸ = 'åäº¬'</code></li>
<li>â å¯ä»¥å¤æ­ï¼<code>åå¬å¸ LIKE 'åäº¬%'</code></li>
<li>â å¯ä»¥å¤æ­ï¼<code>å¹´é¾ BETWEEN 20 AND 30</code></li>
<li>â ä¸è½å¤æ­ï¼<code>å·¥èµ &gt; 10000</code>ï¼å ä¸ºå·¥èµä¿¡æ¯å¨æ¡£æ¡éï¼</li>
</ul>
<h2 id="ï¸-ä»ä¹æåµä¸è½ç¨">ð·ï¸ ä»ä¹æåµä¸è½ç¨ï¼</h2>
<h3 id="è½ç¨çæåµ"><strong>è½ç¨çæåµ</strong></h3>
<pre><code class="language-sql">-- æåµ1ï¼ç´¢å¼éæçä¿¡æ¯ï¼äººäºèªå·±å°±è½å¤æ­
-- ç´¢å¼ï¼(å¹´é¾, åå¸)
SELECT * FROM ç¨æ· 
WHERE å¹´é¾ &gt; 20 
  AND åå¸ LIKE 'ä¸æµ·%';  -- â è½ç¨ï¼åå¸å¨ç´¢å¼é

-- æåµ2ï¼é¨åæ¡ä»¶å¨ç´¢å¼é
SELECT * FROM è®¢å 
WHERE ç¨æ·ID = 1001 
  AND ç¶æ = 'å·²æ¯ä»';  -- â è½ç¨ï¼ä¸¤ä¸ªé½å¨ç´¢å¼é
</code></pre>
<h3 id="ä¸è½ç¨çæåµ"><strong>ä¸è½ç¨çæåµ</strong></h3>
<pre><code class="language-sql">-- æåµ1ï¼è¦çä¿¡æ¯ç´¢å¼éå¨æï¼ä¸éè¦æ¥æ¡£æ¡
-- ç´¢å¼ï¼(å§å, å¹´é¾)
SELECT å§å, å¹´é¾ FROM åå·¥;  -- â ä¸éè¦ï¼ç´æ¥çååå°±è¡

-- æåµ2ï¼æ¡ä»¶ä¸å¨ç´¢å¼é
-- ç´¢å¼ï¼(å¹´é¾, åå¸)
SELECT * FROM ç¨æ· 
WHERE å¹´é¾ &gt; 20 
  AND å·¥èµ &gt; 10000;  -- â ä¸è½ç¨ï¼å·¥èµä¸å¨ç´¢å¼é
</code></pre>
<h2 id="-å®éææå¯¹æ¯">ð å®éææå¯¹æ¯</h2>
<h3 id="æµè¯æ°æ®"><strong>æµè¯æ°æ®</strong></h3>
<ul>
<li>åå·¥è¡¨ï¼100ä¸æ¡è®°å½</li>
<li>å¹´é¾&gt;25ï¼50ä¸äºº</li>
<li>åäº¬åå¬å¸ï¼5ä¸äºº</li>
</ul>
<h3 id="æ¥è¯¢éåº¦å¯¹æ¯"><strong>æ¥è¯¢éåº¦å¯¹æ¯</strong></h3>
<pre><code>ä¼ ç»æ¹å¼ï¼
â ç´¢å¼æ«æï¼æ¾å°50ä¸æ¡è®°å½ï¼å¾å¿«ï¼
â åè¡¨æ¥è¯¢ï¼æ¥50ä¸æ¬¡è¯¦ç»æ°æ®ï¼å¾æ¢ï¼ï¼
â åå­ç­éï¼å¨50ä¸æ¡éæ¾åäº¬çï¼ä¸è¬æ¢ï¼
â±ï¸ æ»èæ¶ï¼3.2ç§

ç´¢å¼ä¸æ¨ï¼
â ç´¢å¼æ«æ+ç­éï¼ç´æ¥æ¾å°5ä¸æ¡è®°å½ï¼ç¨æ¢ä¸ç¹ï¼
â åè¡¨æ¥è¯¢ï¼åªæ¥5ä¸æ¬¡è¯¦ç»æ°æ®ï¼å¿«å¾å¤ï¼ï¼
â±ï¸ æ»èæ¶ï¼0.8ç§
</code></pre>
<p><strong>æé4åï¼</strong></p>
<h2 id="-çæ´»åç±»æ¯">ð® çæ´»åç±»æ¯</h2>
<h3 id="ç±»æ¯1å¾ä¹¦é¦æ¾ä¹¦"><strong>ç±»æ¯1ï¼å¾ä¹¦é¦æ¾ä¹¦</strong></h3>
<pre><code>ä¼ ç»ï¼å¾ä¹¦ç®¡çååªæ"ä½è=é²è¿"æ¾ä¹¦ï¼æ¾å°100æ¬
      ä½ ä¸æ¬æ¬ç¿»çæ¯ä¸æ¯"å°è¯´ç±»"
      
ä¸æ¨ï¼åè¯ç®¡çå"ä½è=é²è¿ AND ç±»å«=å°è¯´"
      ç´æ¥ç»ä½ 30æ¬å°è¯´
</code></pre>
<h3 id="ç±»æ¯2å¤åç­é"><strong>ç±»æ¯2ï¼å¤åç­é</strong></h3>
<pre><code>ä¼ ç»ï¼ç¾å¢åæ"è·ç¦»&lt;3km"ç­éåº50å®¶åº
      ä½ åä¸å®¶å®¶çææ²¡æ"è¯å&gt;4.5"
      
ä¸æ¨ï¼ç´æ¥æç´¢"è·ç¦»&lt;3km AND è¯å&gt;4.5"
      ç´æ¥æ¾ç¤º15å®¶ç¬¦åçåº
</code></pre>
<h2 id="-ç®åæ»ç»">ð ç®åæ»ç»</h2>
<h3 id="ä¸å¥è¯è®°ä½ç´¢å¼ä¸æ¨"><strong>ä¸å¥è¯è®°ä½ç´¢å¼ä¸æ¨</strong></h3>
<ol>
<li><strong>è®©ç´¢å¼å¤å¹²æ´»</strong>ï¼ç´¢å¼ä¸åªæ¯æ¾ä½ç½®ï¼è¿è½åç­é</li>
<li><strong>åå°åè¡¨æ¬¡æ°</strong>ï¼ç­éå¥½äºåæ¥è¯¦ç»æ°æ®ï¼å°æ¥å¾å¤æ¬¡</li>
<li><strong>æ¡ä»¶è¦å¨ç´¢å¼é</strong>ï¼åªè½ç­éç´¢å¼ä¸­åå«çæ¡ä»¶</li>
</ol>
<h3 id="å¼å¯åæ¥ç"><strong>å¼å¯åæ¥ç</strong></h3>
<pre><code class="language-sql">-- é»è®¤å°±æ¯å¼å¯çï¼MySQL 5.6+ï¼
-- æ¥çææ²¡æç¨ä¸
EXPLAIN SELECT ...;
-- çå°"Using index condition"å°±æ¯ç¨äºç´¢å¼ä¸æ¨
</code></pre>
<h2 id="-ä»ä¹æ¶åæææ">ð¯ ä»ä¹æ¶åæææï¼</h2>
<table>
<thead>
<tr>
<th>åºæ¯</th>
<th>ææ</th>
<th>åå </th>
</tr>
</thead>
<tbody>
<tr>
<td>å¤§è¡¨ç­é</td>
<td>â­â­â­â­â­</td>
<td>åå°å¤§éåè¡¨</td>
</tr>
<tr>
<td>ç´¢å¼éæ©æ§é«</td>
<td>â­â­â­â­</td>
<td>è¿æ»¤æå¤§é¨åæ°æ®</td>
</tr>
<tr>
<td>æ¥è¯¢æ¡ä»¶å¤</td>
<td>â­â­â­</td>
<td>æåè¿æ»¤æ´ææ</td>
</tr>
<tr>
<td>å°è¡¨æ¥è¯¢</td>
<td>â­</td>
<td>æ¬æ¥å°±æ²¡å¤å°æ°æ®</td>
</tr>
</tbody>
</table>
<p><strong>ä¸å¥è¯</strong>ï¼æ°æ®éè¶å¤§ï¼ç­éæ¡ä»¶è¶å¤ï¼ç´¢å¼ä¸æ¨ææè¶ææ¾ï¼</p>
<h2 id="-æèé¢">ð¤ æèé¢</h2>
<p>å¦æä½ è¦æ¥ï¼</p>
<pre><code>"å¹´é¾&gt;30å²çåäº¬åå¬å¸ç¨åºå"
</code></pre>
<p>ä½ç´¢å¼åªæ <code>(å¹´é¾, åå¬å¸)</code>ï¼æ²¡æ<code>èä½</code>å­æ®µã</p>
<p>é®ï¼ç´¢å¼ä¸æ¨è½å¸®ä½ è¿æ»¤æä»ä¹ï¼ä»ä¹è¿æ»¤ä¸äºï¼</p>
<p><strong>ç­æ¡</strong>ï¼</p>
<ul>
<li>â è½è¿æ»¤ï¼å¹´é¾&gt;30 ä¸ åå¬å¸=åäº¬</li>
<li>â ä¸è½è¿æ»¤ï¼èä½=ç¨åºåï¼éè¦æ¥äºæ¡£æ¡æç¥éï¼</li>
</ul>
<p>æä»¥è¿æ¯ä¼åè¿æ»¤æéåäº¬åå¬å¸çï¼åæ¥æ¡£æ¡çæ¯ä¸æ¯ç¨åºåã</p>
<p>è¿å°±æ¯ç´¢å¼ä¸æ¨çæ ¸å¿ææ³ï¼<strong>è½æåè¿æ»¤çç»ä¸çå°åé¢</strong>ï¼</p>

</div>
<div id="MySignature" role="contentinfo">
    
<p>â¤ï¸ å¦æä½ åæ¬¢è¿ç¯æç« ï¼è¯·ç¹èµæ¯æï¼ ð åæ¶æ¬¢è¿å³æ³¨æçåå®¢ï¼è·åæ´å¤ç²¾å½©åå®¹ï¼</p>

<p>æ¬ææ¥èªåå®¢å­ï¼ä½èï¼<a href="https://www.cnblogs.com/sun-10387834/" target="_blank">ä½ç¥è®©ææ¥å·¡å±±</a>ï¼è½¬è½½è¯·æ³¨æåæé¾æ¥ï¼<a href="https://www.cnblogs.com/sun-10387834/p/19371453" target="_blank">https://www.cnblogs.com/sun-10387834/p/19371453</a></p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-25 09:09">2025-12-25 09:09</span>&nbsp;
<a href="https://www.cnblogs.com/sun-10387834">ä½ç¥è®©ææ¥å·¡å±±</a>&nbsp;
éè¯»(<span id="post_view_count">26</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19371453);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19371453', targetLink: 'https://www.cnblogs.com/sun-10387834/p/19371453', title: 'ãé¢è¯é¢ãMySQL çç´¢å¼ä¸æ¨æ¯ä»ä¹ï¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ RabbitMQåå¸è®¢éæ¨¡å¼å¤å®ä¾æ¶è´¹èé²æ­¢éå¤æ¶è´¹å®ç°æ¹å¼ ]]></title>
    <link>https://www.cnblogs.com/zhaorong/p/19392986</link>
    <guid>017a22fb98a13a53f6456320775c69a1</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/zhaorong/p/19392986" title="åå¸äº 2025-12-25 08:45">
    <span role="heading" aria-level="2">RabbitMQåå¸è®¢éæ¨¡å¼å¤å®ä¾æ¶è´¹èé²æ­¢éå¤æ¶è´¹å®ç°æ¹å¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/465891/202512/465891-20251224151919540-224874840.png" alt="RabbitMQåå¸è®¢éæ¨¡å¼å¤å®ä¾æ¶è´¹èé²æ­¢éå¤æ¶è´¹å®ç°æ¹å¼" class="desc_img">
        ä¸ä¸ç¯æç« ä¸­å·²ç»éè¿ä¸ä¸ªå®éçä¸å¡åºæ¯ç»åRabbitMQçåç§äº¤æ¢æºç±»åå¯¹RabbitMQåå¸è®¢éæ¨¡å¼åä¸æ¶è´¹èå¤ä¸ªå®ä¾å¦ä½é²æ­¢éå¤æ¶è´¹è¿ä¸ªé®é¢ç»åºäºè§£å³æ¹æ¡ãæ°´è¿ç¯çç®çä¸»è¦æ¯åç»åºä¸ä¸ªå¯ä»¥ç´æ¥æä½ä¸çä»£ç ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>ä¹¦æ¥ä¸åã</p>
<p><a href="https://zhaorong.me/archives/rabbitmq-topic-multiple-instance" target="_blank" rel="noopener nofollow">ä¸ä¸ç¯æç« </a>ä¸­å·²ç»éè¿ä¸ä¸ªå®éçä¸å¡åºæ¯ç»åRabbitMQçåç§äº¤æ¢æºç±»åå¯¹RabbitMQåå¸è®¢éæ¨¡å¼åä¸æ¶è´¹èå¤ä¸ªå®ä¾å¦ä½é²æ­¢éå¤æ¶è´¹è¿ä¸ªé®é¢ç»åºäºè§£å³æ¹æ¡ãç»å°¾çæ¶åæäºä¸ªåï¼æ°´è¿ç¯çç®çå°±æ¯è¦æè¿ä¸ªåå¡«ä¸ï¼ç»å¤§å®¶æä¾ä¸ä¸ªå¯ä»¥ç´æ¥æä½ä¸çä»£ç ã</p>
<p>åæä¸äºåæ°æåå¬å¸åºæ¥ï¼åé¢ä»£ç éé¢åéå°å°±ä¸éä¸ªè§£éäº</p>
<ul>
<li>RabbitMQä¸»æºå°å<code>127.0.0.1</code>ï¼å¦ææ¯é¨ç½²å¨å¶ä»æºå¨ä¸çï¼å°±æIPå°åæ¿æ¢æç¸åºçä¸»æºIPæèååã</li>
<li>å¦æä½¿ç¨é»è®¤ç«¯å£<code>5672</code>ï¼è¿æ¥å°åå¯ä»¥ä¸ç¨åï¼æ å°å°å¶ä»ç«¯å£çè¯å¨ä¸»æºå°åä¸é¢å ä¸ã</li>
<li>éç¨é»è®¤çç¨æ·ååå¯ç <code>guest</code>ï¼æ ¹æ®å·ä½æåµè¿è¡ç¸åºæ¿æ¢ã</li>
<li>é¢å®äº¤æ¢æºåç§°<code>demo.event</code>ï¼æ ¹æ®å·ä½æåµè¿è¡ç¸åºæ¿æ¢ã</li>
<li>é¢å®éååç§°<code>demo.event.queue</code>ï¼æ ¹æ®å·ä½æåµè¿è¡ç¸åºæ¿æ¢ã</li>
<li>éå<code>demo.event.queue</code>ä¸æä¸¤ä¸ªæ¶è´¹èï¼å¦å¤åçæä¸ä¸ªåªæä¸ä¸ªæ¶è´¹èçéæºåç§°éåã</li>
</ul>
<p>è¦è¾¾å°çææ</p>
<blockquote>
<p>çäº§èåéä¸æ¡æ¶æ¯å°äº¤æ¢æºdemo.eventï¼åç±äº¤æ¢æºååå°ç»å®ç»å®çéåä¸ï¼demo.event.queueéåä¸çæ¶è´¹è<strong>åªæä¸ä¸ª</strong>è½æ¶å°ï¼å¶ä»éæºéåçæ¶è´¹èï¼åªæä¸ä¸ªï¼ä¹è½æ¶å°æ¶æ¯ã</p>
</blockquote>
<h3 id="ä¸åå¤rabbitmqç¯å¢">ä¸ãåå¤RabbitMQç¯å¢</h3>
<p>ææ¯å¨dockerä¸é¨ç½²çï¼å°å®æ¹ç½ç«ä¸è½½Docker Desktopç´æ¥å®è£å°±å¯ä»¥äºï¼è¿éä¸åèµè¿°ãRabbitMQçç¯å¢åå¤ä¸æ¯æ¬ç¯çéç¹ï¼è¿éåªæä¾æåºæ¬çç¨æ³ï¼æå¶ä»éæ±å¯ä»¥ç¥è¿è¿ä¸ç« èï¼å»RabbitMQæèDockerå®ç½æç§ææ¡£éç½®å³å¯ã</p>
<h4 id="æåéå">æåéå</h4>
<p>æç¨çæ¯å¸¦ç®¡çåå°ç<code>rabbitmq:management</code>ã</p>
<p>æå¼æ§å¶å°/ç»ç«¯ï¼è¾å¥</p>
<pre><code class="language-bash">docker pull rabbitmq:management
</code></pre>
<h4 id="åå»ºvolumes">åå»ºVolumes</h4>
<pre><code class="language-bash">docker volume create rabbitmq
</code></pre>
<h4 id="åå»ºå®¹å¨">åå»ºå®¹å¨</h4>
<pre><code class="language-bash">docker run -d --name rabbitmq -p 4369:4369 -p 5671:5671 -p 5672:5672 -p 15671:15671 -p 15672:15672 -p 25672:25672 -p 15691:15691 -p 15692:15692 -v rabbitmq:/var/lib/rabbitmq rabbitmq:management
</code></pre>
<p>æ§è¡å®ä»¥ä¸ä»£ç åï¼å®¹å¨ä¼èªå¨å¯å¨ã</p>
<h3 id="äºnet--rabbitmqclient">äºã.net + RabbitMQ.Client</h3>
<p>ååå¤IDEï¼Visual StudioãVS CodeãRideré½å¯ä»¥ã</p>
<p>æè¿éç¨çLinqPadï¼è¿æ¯ä¸ä¸ªå¯ä»¥å¿«éæ§è¡C#ãVBãF#ä»£ç ååSQLçå·¥å·ï¼ä½¿ç¨Microsoft Roslynè¿è¡ç¼è¯ï¼æ¯æå¼å¥NuGetååä¸æ¹DLLæä»¶ï¼å¯ä»¥ç´æ¥è¿è¡Asp.Net Coreæå¡ãVer9å¼å§æ¯æmacOSï¼æ¸²æå±ç±ä¹åçWPFæ¹æäºAvaloniaUIãæéè¦çå¯ä»¥ä½¿ç¨ä¸é¢çé¾æ¥è´­ä¹°</p>
<p><a href="https://www.linqpad.net/Purchase.aspx?affiliate=8ucu28vs" target="_blank" rel="noopener nofollow">https://www.linqpad.net/Purchase.aspx?affiliate=8ucu28vs</a></p>
<h4 id="1ä¾èµå">1ãä¾èµå</h4>
<p>RabbitMQ.Client<br>
LinqPadéè¿èªå¸¦å·¥å·æ·»å ï¼æ­£ç»IDEéè¿NuGet ManagerãCLIå·¥å·æ·»å æèå¨csprojå¼å¥</p>
<pre><code class="language-xml">&lt;PackageReference Include="RabbitMQ.Client" Version="7.2.0" /&gt;
</code></pre>
<p>å¦æé¡¹ç®ä½¿ç¨éä¸­çæ¬ç®¡çï¼éè¦å¨Directory.Packages.propsæ·»å </p>
<pre><code class="language-xml">&lt;PackageVersion Include="RabbitMQ.Client" Version="7.2.0" /&gt;
</code></pre>
<p>ç¶åå¨å·ä½é¡¹ç®çcsprojæ·»å </p>
<pre><code class="language-xml">&lt;PackageReference Include="RabbitMQ.Client" /&gt;
</code></pre>
<p>éè¦æ³¨æçæ¯ï¼7.xä»¥åRabbitMQ.Clientåäºæ¯è¾å¤§çè°æ´ï¼ååçæ¹æ³é½æ¹æäºå¼æ­¥ï¼<code>EventingBasicConsumer</code>ä¹æ¢æäº<code>AsyncEventingBasicConsumer</code>ï¼ConsumerçReceiveäºä»¶åæäºReceivedAsyncï¼æ¯æå¼æ­¥äºä»¶å¤çã</p>
<h4 id="2çäº§èä»£ç ">2ãçäº§èä»£ç </h4>
<pre><code class="language-csharp">async Task Main()
{
	var factory = new ConnectionFactory { Uri = new Uri("amqp://guest:guest@127.0.0.1") };
	using (var connection = await factory.CreateConnectionAsync())
	{
		using (var channel = await connection.CreateChannelAsync())
		{
			await channel.ExchangeDeclareAsync(exchange: "demo.event", type: ExchangeType.Fanout, durable: true, autoDelete: true);

			while (true)
			{
				var message = Console.ReadLine();
				var body = Encoding.UTF8.GetBytes(message);
				var properties = new BasicProperties();
				await channel.BasicPublishAsync(exchange: "demo.event", routingKey: "", mandatory: true, basicProperties: properties, body: body, cancellationToken: default);
			}
		}
	}
}

// Define other methods, classes and namespaces here

</code></pre>
<h4 id="3æ¶è´¹èä»£ç ">3ãæ¶è´¹èä»£ç </h4>
<pre><code class="language-csharp">async Task Main()
{
	var factory = new ConnectionFactory { Uri = new Uri("amqp://guest:guest@127.0.0.1") };
	await using (var connection = await factory.CreateConnectionAsync())
	{
		using (var channel = await connection.CreateChannelAsync())
		{
			await channel.ExchangeDeclareAsync(exchange: "demo.event", type: ExchangeType.Fanout, durable: true, autoDelete: true);
			var queueName = await channel.QueueDeclareAsync("demo.event.queue", true, false, true).ContinueWith(task =&gt; task.Result.QueueName); // å®¢æ·ç«¯å¶å®éååç§°ã
			await channel.QueueBindAsync(queue: queueName,
							  exchange: "demo.event",
							  routingKey: "");
			Console.WriteLine(" [*] Waiting for logs.");

			var consumer = new AsyncEventingBasicConsumer(channel);
			consumer.ReceivedAsync += async (model, ea) =&gt;
			{
				var body = ea.Body.ToArray();
				var message = Encoding.UTF8.GetString(body);
				Console.WriteLine(" [x] {0}", message);
			};
			await channel.BasicConsumeAsync(queue: "", autoAck: true, consumer: consumer);
			Console.WriteLine(" Press [enter] to exit.");
			Console.ReadLine();
		}
	}
}

// Define other methods, classes and namespaces here

</code></pre>
<h4 id="3å¼å§æµè¯">3ãå¼å§æµè¯</h4>
<p>å¨LinqPadéé¢æ¯ä¸ªæ ç­¾çä»£ç æ¯å®å¨éç¦»çï¼æ æ³å¼ç¨ï¼æä»¥ä¸ºäºå¯å¨å¤ä¸ªæ¶è´¹èï¼æéè¦ææ¶è´¹èçä»£ç ååå¤å¶ä¸¤ä»½åºæ¥ãå¶ä¸­ä¸ä¸ªæ ç­¾æ</p>
<pre><code class="language-csharp">var queueName = await channel.QueueDeclareAsync("demo.event.queue", true, false, false).ContinueWith(task =&gt; task.Result.QueueName);
</code></pre>
<p>æ¹æ</p>
<pre><code class="language-csharp">var queueName = await channel.QueueDeclareAsync().ContinueWith(task =&gt; task.Result.QueueName); // ç±RabbitMQçæéååç§°
</code></pre>
<p>åè¿è¡ä¸ä¸ªæ¶è´¹èä»£ç å¼å§çå¬éåæ¶æ¯ãåè¿è¡çäº§èä»£ç ã</p>
<p><img src="https://qiniu-cdn.zhaorong.pro/images/image-20251224095706977.png" alt="image-20251224095706977" loading="lazy"></p>
<p>æ¶è´¹è1ãæ¶è´¹è2éååç§°é½æ¯æå¨æå®ç<code>demo.event.queue</code></p>
<p><img src="https://qiniu-cdn.zhaorong.pro/images/image-20251224100057698.png" alt="image-20251224100057698" loading="lazy"></p>
<p><img src="https://qiniu-cdn.zhaorong.pro/images/image-20251224100156036.png" alt="image-20251224100156036" loading="lazy"></p>
<p>æ¶è´¹è3éååç§°æ¯æå¡ç«¯çæç<code>amq.gen-vFbhNYiLf4wDdKNdmP2WzQ</code></p>
<p><img src="https://qiniu-cdn.zhaorong.pro/images/image-20251224100224317.png" alt="image-20251224100224317" loading="lazy"></p>
<p>å¨çäº§èåéä¸æ¡æ¶æ¯ Hello, World!ï¼æä»¬åçä¸æ¥æ¶æåµ</p>
<p><img src="https://qiniu-cdn.zhaorong.pro/images/image-20251224100318229.png" alt="image-20251224100318229" loading="lazy"></p>
<p><img src="https://qiniu-cdn.zhaorong.pro/images/image-20251224100336766.png" alt="image-20251224100336766" loading="lazy"></p>
<p><img src="https://qiniu-cdn.zhaorong.pro/images/image-20251224100354209.png" alt="image-20251224100354209" loading="lazy"></p>
<p>æ¶è´¹è1ã3æ¶å°æ¶æ¯ï¼æ¶è´¹è2æ²¡ææ¶å°ï¼ååä¸æ¡Second message.</p>
<p><img src="https://qiniu-cdn.zhaorong.pro/images/image-20251224100501768.png" alt="image-20251224100501768" loading="lazy"></p>
<p><img src="https://qiniu-cdn.zhaorong.pro/images/image-20251224100518730.png" alt="image-20251224100518730" loading="lazy"></p>
<p><img src="https://qiniu-cdn.zhaorong.pro/images/image-20251224100542351.png" alt="image-20251224100542351" loading="lazy"></p>
<p>æ¶è´¹è2ã3æ¶å°æ¶æ¯ï¼æ¶è´¹è1æ²¡ææ¶å°ã</p>
<p>ç»è®ºæ¯ï¼<strong>ç®æ è¾¾æã</strong></p>
<h3 id="ä¸java--maven--amqp-client">ä¸ãJava + Maven + amqp-client</h3>
<h3 id="1ä¾èµå-1">1ãä¾èµå</h3>
<p>com.rabbitmq:amqp-clientï¼çæ¬å·æ ¹æ®å®ééè¦éæ©</p>
<p>ä½¿ç¨Mavenå·¥å·å®è£æèç´æ¥å¨pom.xmléæ·»å </p>
<pre><code class="language-xml">&lt;dependencies&gt;
&nbsp;&nbsp;&lt;dependency&gt;
&nbsp; &nbsp;&nbsp;&lt;groupId&gt;com.rabbitmq&lt;/groupId&gt;
&nbsp; &nbsp;&nbsp;&lt;artifactId&gt;amqp-client&lt;/artifactId&gt;
&nbsp; &nbsp;&nbsp;&lt;version&gt;5.25.0&lt;/version&gt;
&nbsp;&nbsp;&lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>
<h4 id="2çäº§èä»£ç -1">2ãçäº§èä»£ç </h4>
<pre><code class="language-java">public class Main {
    public static void main(String[] args) throws Exception {
        var factory = new ConnectionFactory();
        factory.setHost("127.0.0.1");
        factory.setUsername("guest");
        factory.setPassword("guest");
        var connection = factory.newConnection();
        var channel = connection.createChannel();
        channel.exchangeDeclare("demo.event", "fanout", true, true, null);

        while (true) {
            var message = java.lang.IO.readln();
            var properties = new AMQP.BasicProperties.Builder().build();
            channel.basicPublish("demo.event", "", true, properties, message.getBytes());
            System.out.println(" [x] Sent '" + message + "'");
        }
    }
}
</code></pre>
<h4 id="3æ¶è´¹èä»£ç -1">3ãæ¶è´¹èä»£ç </h4>
<pre><code class="language-java">public class Main {
    public static void main(String[] args) throws Exception {
        String recipientName = args[0];
        String queueName = args.length &gt; 1 ? args[1] : "";

        var factory = new com.rabbitmq.client.ConnectionFactory();
        factory.setHost("127.0.0.1");
        factory.setUsername("guest");
        factory.setPassword("guest");

        var connection = factory.newConnection();
        var channel = connection.createChannel();
        channel.exchangeDeclare("demo.event", "fanout", true, true, null);
        if (queueName == null || queueName.isEmpty()) {
            queueName = channel.queueDeclare().getQueue();
        } else {
            queueName = channel.queueDeclare(queueName, true, false, true, null).getQueue();
        }

        System.out.println(recipientName + ": " + queueName);

        channel.queueBind(queueName, "demo.event", "");

        var consumer = new com.rabbitmq.client.DeliverCallback() {
            @Override
            public void handle(String consumerTag, com.rabbitmq.client.Delivery delivery)
                    throws java.io.IOException {
                var message = new String(delivery.getBody(), "UTF-8");
                System.out.println(" [x] Received '" + message + "'");
            }
        };

        channel.basicConsume(queueName, true, consumer, consumerTag -&gt; {
        });

    }
}
</code></pre>
<p>æ¶è´¹èå¿é¡»åå«ä¸ä¸ªå¥åï¼ç¨äºæå®å½åæ¶è´¹èçåç§°ï¼ç¬¬äºä¸ªåæ°å¯éï¼ç¨äºæå®éååç§°ï¼å¦æä¸æå®åç±æå¡å¨çæã</p>
<p>å ä¸ºåªæ¯åä¸ªdemoå¸®å©çè§£ï¼å¾ä¸ªæ¹ä¾¿è¿éé¢æ²¡æåä»»ä½çå°è£å¤çï¼é½æ¯ç´æ¥ç´å»çãå¶ä¸­æäºåæ°æ ¹æ®å®éåºç¨åºæ¯çµæ´»è°æ´ï¼æ¯å¦æ¯å¦èªå¨å é¤éååäº¤æ¢æºï¼æ¯å¦éè¦æä¹åæ¶æ¯ç­ç­ã</p>
<h4 id="3æµè¯ç»æ">3ãæµè¯ç»æ</h4>
<p>æä½æ­¥éª¤</p>
<ol>
<li>æ¶è´¹èä»£ç å¯¼åºæjarårecipient.jarã</li>
<li>éè¿ä»¥ä¸æä»¤å¯å¨ä¸ä¸ªæ¶è´¹èï¼å¶ä¸­æ¶è´¹è1ã2æå®éååç§°demo.event.queueã</li>
</ol>
<pre><code class="language-bash">java -jar recipient.jar æ¶è´¹è1 demo.event.queue
java -jar recipient.jar æ¶è´¹è2 demo.event.queue
java -jar recipient.jar æ¶è´¹è3
</code></pre>
<ol start="3">
<li>è¿è¡çäº§èç«¯ä»£ç å¹¶åéæ¶æ¯ã</li>
</ol>
<p>å·ä½çæªå¾æå°±ä¸è´´äºï¼ç»è®ºæ¯åä¸é¢.netçæ¬çä¸æ ·ã</p>
<h3 id="åè¡¥å">åãè¡¥å</h3>
<p>å ä¸ºRabbitMQæ¯è·å¼åå¹³å°æ å³çä¸­é´ä»¶ï¼çäº§èç«¯åæ¶è´¹èç«¯å¯ä»¥éç¨ä»»ä½è¯­è¨å¼åï¼å æ­¤ä¸é¢ä¸¤ç§è¯­è¨çä¾å­å¯ä»¥æ··åè¿è¡ï¼çäº§èç«¯ä¹å¯ä»¥åæ¶è¿è¡å¤ä¸ªï¼æææ¯ä¸æ ·çï¼ä¸è®ºåªç§è¯­è¨ç¼åçå®¢æ·ç«¯ï¼åªè¦queueç¸åRabbitMQå§ç»é½åªä¼éå®ä¸ä¸ªæ¶è´¹èå®ä¾è¿è¡æéã</p>
<p>ä¸ä¸ç¯ç®åè®²äºRabbitMQçåç§ä¸»è¦ Exchange ç±»åï¼å¶ä¸­æä¸ä¸ª<strong>Topic</strong>ç±»åï¼å®çç¹ç¹æ¯ä½¿ç¨ééç¬¦ï¼<code>*</code> å¹éä¸ä¸ªè¯ï¼<code>#</code> å¹éé¶ä¸ªæå¤ä¸ªè¯ï¼ä¸æ¶è´¹èçRoutingKeyè¿è¡æ¨¡å¼å¹éè·¯ç±ï¼èæä»¬çdemoéé¢éç¨ç<strong>Fanout</strong>ç±»åçç¹ç¹æ¯å®å¨å¿½ç¥RoutingKeyã</p>
<p>å±ä»¬æç´¢ä¸ä¸ªé®é¢ï¼ä»ä¹åºæ¯ä¸å¯ä»¥ç¨<strong>Fanout</strong>ãä»ä¹åºæ¯ä¸è¯¥ç¨<strong>Topic</strong>ï¼</p>
<hr>
<p><strong>ç¹å³æ³¨ï¼ä¸è¿·è·¯ã</strong></p>
<p>å¦ææ¨åæ¬¢è¿ç¯æç« ï¼è¯·ä¸è¦å¿è®°<strong>ç¹èµãå³æ³¨ãæå¸ãè½¬å</strong>ï¼è°¢è°¢ï¼å¦ææ¨æä»»ä½é«è§ï¼æ¬¢è¿å¨è¯è®ºåºçè¨è®¨è®ºâ¦â¦</p>
<p><img src="https://qiniu-cdn.zhaorong.pro/images/gongzhonghao.png" alt="å¬ä¼å·" loading="lazy"></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-25 08:46">2025-12-25 08:45</span>&nbsp;
<a href="https://www.cnblogs.com/zhaorong">ä¸­åäººæ°å±åå½ç¨åºå</a>&nbsp;
éè¯»(<span id="post_view_count">63</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19392986);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19392986', targetLink: 'https://www.cnblogs.com/zhaorong/p/19392986', title: 'RabbitMQåå¸è®¢éæ¨¡å¼å¤å®ä¾æ¶è´¹èé²æ­¢éå¤æ¶è´¹å®ç°æ¹å¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ææ64ä½WinFormåºç¨é½æ¯Chromiumæµè§å¨ ]]></title>
    <link>https://www.cnblogs.com/sunhui/p/19395609</link>
    <guid>436dd169ecb284551a455810689a738d</guid>
    <description>
    <![CDATA[ 
	<h1 class="postTitle"><a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/sunhui/p/19395609" title="åå¸äº 2025-12-25 08:04">
    <span role="heading" aria-level="2">ææ64ä½WinFormåºç¨é½æ¯Chromiumæµè§å¨</span>
    

</a>
</h1>
	    <div id="cnblogs_post_description" style="display: none">
        
        å¦ææ¨æ¯æ¡é¢åºç¨å¼åèï¼æèä¸ä¸ªWebåºç¨å¼åèï¼æ¨ä¼é¢å¯¹ä¸ä¸ªå¨æ°çè§è§ï¼é£å°±æ¯64ä½WinFormåºç¨ç´æ¥å¯ä»¥æä¸ºChromeä¸æ ·çæµè§å¨ï¼ä½æ¥ææ´å¤§çWebåå®¹ç»´åº¦ãè¿ä¸ä¸ªæè¿°ï¼å¹¶ä¸éè¦æ¨éæexeï¼ä»éè¦æ¨æ¢ä¸ä¸ªè§è§ï¼æ¨ä¼ä¸ä¼è§å¾éå¸¸çæè¶£ï¼
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p><span style="font-size: 2em">ä¸ºä»ä¹çº ç»ï¼</span></p>
<p>ææ64ä½<strong>WinForm/MFC/WPF</strong>åºç¨é½æ¯<strong>Chromium</strong>æµè§å¨ï¼è¿ä¸ä¸ªææ¯å®æäºâ<strong>éå¸ç«æ</strong>âæé´ï¼å ä¸ºå½æ¶æ äºå¯åï¼åªè½è¢«å°å¨å®¶éãé£ä¸ªæ¶æChromiumççæ¬æ¯M81ï¼å ä¸ºç«æä¸¥éï¼Chromeå¢éæ¾å¼äºM82ã83ï¼ç´æ¥åå¸äºM84ã</p>
<p>&nbsp;</p>
<p>ç´å°2022å¹´ï¼LLMå¼å§ç«çï¼è½¯ä»¶åºç¨é¢åå¼å§âæ´çâäºï¼æå¾å¤æåç§ä¸é®æï¼æä¹çLLMï¼å®è¯å®è¯´ï¼æå½æ¶å¯¹LLMä¸æ æç¥ï¼å¯¹å¶çäºè§£ä»ä»æ¯åçå¨çæ°é»çå±æ¬¡ãå»å¹´çæ¶åï¼ä¸ä¸ªå¶ç¶çæºä¼ï¼å¼å§ä½¿ç¨DeepSeekãChatGPTãäºæ¯æå°±å°è¿ä¸ä¸ªæ³æ³åå«æäº¤ç»è¿ä¸¤ä¸ªå¤§ç¥ï¼åççå®ä»¬ççæ³ãç»æéå¸¸çæææï¼å®ä»¬é¦åé½è®¤ä¸ºï¼âè¿å¤ªèè°¬ï¼äººå®¶èªå·±ç¼è¯çæ¡é¢åºç¨ï¼ä¾å¦ä¸ä¸ªWinFormåºç¨ï¼ä½ æä¹å¯ä»¥è¯´å®å°±æ¯â<strong>Chromiumæµè§å¨</strong>ââï¼ç´§æ¥çï¼å®ä»¬é½ä¼ä¸ºæåºä¸»æï¼å¹¶ä¸ç»æåäºå¾å¤âæ¹æ¡âï¼å¸®å©æå¦ä½å®ç°è¿ä¸ä¸ªç¦»å¥çæ³æ³ï¼å¶ä¸­ä¸å¦¨æä¸é¨åä»£ç ï¼çä¸å»âå¾æ­£ç»âï¼é¢æå¤§å¸çé£èã</p>
<p>&nbsp;</p>
<p>å¨ä¸ChatGPTãDeepSeeké¿è¾¾10ä¸ªæçä¸æ­æ²éä¹ä¸­ï¼æçç¡®å­¦ä¼äºå¾å¤ï¼ä¹çå°äºå¾å¤é¾ä»¥ç½®ä¿¡çäºæãå®ä»¬å¯¹<strong>Chromium Project</strong>è¿ä¸ä¸ªå°ºåº¦çé¡¹ç®ï¼ä¸ä½äº30000000è¡æºä»£ç ï¼çäºè§£æ·±åº¦ï¼å¶å®éå¸¸çè®©äººéæ¼ï¼è¿çç¡®ä¼è®©æä»¬çå°äºä»åå¿ç¶åççäºæï¼é£å°±æ¯ï¼èä¸è½¯ä»¶å¼åèä»åä¼é¢ä¸´çä»ä¹ï¼è¿ä¸ç§æåï¼ç»å¯¹ä¸æ¯å®ä»¬å¯ä»¥ä¸ºä½ âåä¸äºä»£ç âï¼èæ¯å®ä»¬å¾æå¯è½ä¼æ·±åº¦çæ¿ä»£ä½ ã</p>
<p>&nbsp;</p>
<p>âæ¡é¢åºç¨å³ç°ä»£æµè§å¨âï¼æ¯æè¿ä¸å¹´ä¸DeepSeekãChatGPTæ·±å¥æ²éçæç»è®¾æ³ãè½ç¶çä¸å»éå¸¸çç¦»ç»åéï¼ä½è¿å°±æ¯æä»¬å³å°é¢å¯¹çäºæãå¯¹å¾å¤å¼åèï¼ç¹å«æ¯WinFormãMFCè¿æ¹é¢çå¼åèï¼å¯¹è¿ä¸ä¸ªç»è®ºçæ³æ³æ¯ï¼</p>
<p>1ã æçåºç¨ï¼å¹¶æ²¡æåµå¥CEFãWebView2ï¼æä¹å¯è½æ¯âæµè§å¨âï¼</p>
<p>2ã ä½ å¹¶æ²¡ææçæºä»£ç ï¼ä½ å¦ä½è®©æçåºç¨æä¸ºççæ­£æ­£çæµè§å¨ï¼</p>
<p>3ã æèªå·±çåºç¨è¿è¡çå¾å¥½ï¼æä¸ºä»ä¹è¦è®©èªå·±çåºç¨æä¸ºæµè§å¨ï¼</p>
<p>å½ç¶ï¼è¿ä¼æå¾å¤å¾å¤çé®é¢ï¼å®å¨é½å¯ä»¥çè§£ãå¶å®ï¼è¿äºé®é¢ï¼æ¯ä¸ä¸ªå¾é¾åç­çé®é¢ãæä»¥æä¼æ¢ä¸ä¸ªè§è§ï¼é£å°±æ¯ï¼ä½ çåºç¨å¦æå°±æ¯æµè§å¨ï¼ä¼ä¸ºä½ å¸¦æ¥ä»ä¹ä»·å¼ï¼</p>
<p>1ã ChromeãEdgeçWebçæï¼ç´æ¥å°±æ¯ä½ åºç¨çæçä¸é¨åï¼è¿æ²¡ä»ä¹ä¸å¥½ï¼</p>
<p>2ã å½ä»æå¥½çAIãWebææ¯ï¼é½ä¼å¨ä½ çåºç¨ä¹ä¸­çè¡æ é»ï¼æ¨ä¼ä¸ä¼æç»ï¼</p>
<p>3ã ä½ çåºç¨å¯ä»¥ååçè°åº¦åç§åæ ·çåçåºç¨ç»ä»¶ãWebç»ä»¶ï¼ä¸ºä½ äº§çæ ç©·æ å°½çä»·å¼ï¼æ¨æå¯è½ä¸éè¦ï¼ä½æ¨çå®¢æ·ä¼éè¦ï¼æ¨çæåä¹ä¸æ ·ï¼</p>
<p>4ã æ¨çåºç¨ä¸éè¦ä¿®æ¹æºä»£ç ï¼æ¨çå·¥ä½æµç¨ä¸å¦æ¢å¾ï¼æ²¡æä»»ä½æ¹åï¼ä¸åçæ¯ï¼æ¨å¯ä»¥ç´æ¥ä¸ºæ¨ç¼è¯çexeåWebçæï¼å°±å¦åæ¨é¢å¯¹Chromeä¸æ¨¡ä¸æ ·ã</p>
<p>å½ç¶ï¼æ¨æ¯å¦æ¥åï¼æ¯å¦å¤ä¸åäºãåªä¸è¿ï¼å½æ¨çåºç¨äº¤ä»ç¨æ·çæ¶åï¼æ¨çå®¢æ·å¾å¯è½ä¼æ¿ææ¥åï¼å ä¸ºï¼ä»ä»¬çå¾å¤ä¸ç¼å¯è§çéæ±ï¼ä¼ç´æ¥å å å°æ¨çåºç¨ä¹ä¸ï¼æä»¥ï¼ä»ä»¬ä¼è®¤ä¸ºè¿æ¯æ¨ä¸ºä»ä»¬æä¾çâç¦å©âï¼èªç¶ä¼ä¸ºæ¨ç¹èµã</p>
<h1>æçåºç¨å·²ç»åµå¥äºCEF/WebView2</h1>
<p>è¿æ¯ä¸ä¸ªå¾å¥½çé®é¢ï¼æä»¬æ²¡æè´¬ä½CEFãWebView2ï¼æä»¬ä¼ä¸ç´ä¸ºè¿ä¸¤ä¸ªç»å¸ç¹èµãåå½©ãä¸åçæ¯ï¼è¿äºâå¤©è±æ¿âçº§å«çç¥å¨ï¼éè¦æ¨å¨è®¾è®¡é¶æ®µèè´¹ç²¾åï¼æ¨å¿é¡»éæ©ä¸ä¸ªåéççªä½ï¼å¹¶å¨è¿ä¸ä¸ªçªä½ä¹ä¸­ä¸ºå¶å¼è¾ä¸ä¸ªç¹æâç©å½¢âï¼å°å¶ééçè¿æ¥è¿æ¥ï¼åæ¶æ¨è¿éè¦ä¸ºå¶åç¹å«çåå§åãè®¾è®¡æ¥å£â¦â¦ãä½é®é¢æ¯ï¼å¦ææ¨çäº§åäº¤ä»äºä¹åï¼ç¨æ·å¸æå¨å¦å¤ä¸ä¸ªçªå£ä¹ä¸­æ¾ç¤ºä¸ä¸ªè®¾è®¡ç¯èæ²¡æçé¡µé¢ï¼æ¨ä¼æä¹åï¼æå¼æºä»£ç ãå å¥æ°çè®¾è®¡ãéæ°ç¼è¯ï¼</p>
<p>&nbsp;</p>
<p>ä¸ä¸ªæææçé®é¢æ¯ï¼æ¨åµå¥äºCEFç­ï¼æ§è½ä»£ä»·æ¯ä¸åäºï¼ä½æ¨è·å¾çå¹¶ä¸æ¯âæµè§å¨âï¼èä»ä»æ¯ä¸ä¸ªâæ°å­å±æ¿âï¼è¿ä¸ä¸ªè¯´æ³æ¥èªäºâDeepSeekâï¼ã</p>
<h1>ä½ çåºç¨åæ¬å°±æ¯æµè§å¨</h1>
<p>æ¨å¯è½ä¼å¥æªï¼å¦ææ¯ï¼ææä¹å°±ä¸ç¥éï¼é¾éè¯´ï¼æçåºç¨æ¯ä¸æ¶é£æºï¼èæä¸ç´å°å¶çä½æ¯åªæè½®å­çæ±½è½¦ï¼ä¸ç´å¨ç¨è½®å­é©±å¨ï¼è®©å¶å¨âéå°âä¸è¡èµ°ï¼èä¸ç´æ²¡æèµ·é£ï¼</p>
<p>&nbsp;</p>
<p>æè®¸ï¼è¿å°±æ¯æä»¬åãç±ä¸½ä¸æ¼«æ¸¸æ¡é¢å¼åå¥å¢è®°ãçåå ãå¶å®ï¼ç±ä¸½ä¸æ¯ä¸ç¸ä¿¡çï¼æä»¥å¥¹è®¾è®¡äºä¸ä¸ªâåä½å¼âçmyAppï¼å·ä½è¯¦è§â<a href="https://www.cnblogs.com/sunhui/p/19391507">ãç±ä¸½ä¸æ¼«æ¸¸æ¡é¢åºç¨å¼åå¥å¢è®°ãï¼1ï¼</a>âãç±ä¸½ä¸çmyAppï¼ä»æä¸ä¸ªWinFormçªä½Form1ï¼å¶ä¸­ä»åå«ä¸ä¸ªpanelï¼ä¸ä¸ªbuttonï¼ä¸è¡ä»£ç é½æ²¡åï¼</p>
<p align="center"><img src="https://img2024.cnblogs.com/blog/9494/202512/9494-20251225080336793-383572548.png" alt="">&nbsp;</p>
<p>å¥¹åçº¯çæ³æ³æ¯å¨è¿ä¸ä¸ªçªä½ä¹ä¸­ï¼âå½»åºå µæ­»âæ¾ç¤ºâWebé¡µé¢âçææå¯è½æ§ãç»æï¼å¥¹å¨è¿ä¸ä¸ªâä¸å¼ ç½çº¸âæ§è´¨çåºç¨ä¹ä¸­çå°äºæ ç©·æ å°½çå¯è½æ§ï¼</p>
<p align="center"><img src="https://img2024.cnblogs.com/blog/9494/202512/9494-20251225080336804-1237221424.png" alt="">&nbsp;</p>
<p>ä»¥åï¼</p>
<p align="center">&nbsp;</p>
<p align="center">&nbsp;<img src="https://img2024.cnblogs.com/blog/9494/202512/9494-20251225080336932-1861319022.png" alt=""></p>
<p align="center"><img src="https://img2024.cnblogs.com/blog/9494/202512/9494-20251225075612393-2073989663.png" alt="" width="802" height="523"></p>
<p>è¿æå³çï¼å¥¹æç®åççªä½ï¼æ¥æå¼ºå¤§çåºäºWebé»è¾ç»ååç§åæ ·âæ§ä»¶ãçªä½âçè½åãä¸ä»å¦æ­¤ï¼å¥¹çåºç¨ä¹ä¸­ï¼å¯ä»¥è®©ä½ ç´æ¥æé å½¢å½¢è²è²çâè¶çº§æµè§å¨çªå£âï¼</p>
<p align="center"><img src="https://img2024.cnblogs.com/blog/9494/202512/9494-20251225080336804-429645902.png" alt="">&nbsp;</p>
<p align="center"><img src="https://img2024.cnblogs.com/blog/9494/202512/9494-20251225080336824-1272716157.png" alt=""></p>
<p align="center"><img src="https://img2024.cnblogs.com/blog/9494/202512/9494-20251225080336822-1096573424.png" alt=""></p>
<p style="text-align: left" align="center">é£ä¹ï¼ä½ å¯ä»¥ç´æ¥åä»»ææ°éå¦ä¸æç¤ºçâè¶çº§é¡µé¢âï¼</p>
<p align="center"><img src="https://img2024.cnblogs.com/blog/9494/202512/9494-20251225080336906-980697868.png" alt="">&nbsp;</p>
<p>ç±ä¸½ä¸çå®éªï¼ç»æä»¬å¸¦æ¥ä¸ä¸ªæè¶£çé®é¢ï¼é£å°±æ¯ï¼æä»¬åºè¯¥å¦ä½é¢å¯¹è¿äºçªå¦å¶æ¥çâæ½è½âã</p>
<p>å½æä»¬å°è¿ä¸åæäº¤ç»DeepSeekãChatGPTçæ¶åï¼å®ä»¬æåè®¤ä¸ºè¿äºé½æ¯âææ°âçï¼å ä¸ºï¼å¨å®ä»¬çè®­ç»æ°æ®ä¹ä¸­ï¼å®å¨æ²¡æè¿äºã</p>
<p>&nbsp;</p>
<p>åæ¥ï¼éè¿ä¸æ­çåæ´âæç¤ºè¯âï¼å®ä»¬æè¯å°ï¼è¿å¤§æ¦æ¯âèè¯çæ°é²äºå¿âï¼å·®ä¸å¤å±äºâåå®¹æ¶ç°âãå¨æèµè½ãä¸å½ä¸çAIåå±è¶å¿âä¸è°èåâã</p>
<p>&nbsp;</p>
<p>æä»¬åºè¯¥æä¹é¢å¯¹æä»¬èªå·±ç¼è¯çæçexeï¼å¦ææä»¬ä»ä»è®¤ä¸ºï¼è¿äºexeå°±åºè¯¥å®ç¾çæ§è¡æä»¬âé¢è®¾çåºç¨é»è¾âï¼è¿ä¸ç¹å®å¨æ²¡æé®é¢ï¼ä½ä¼ä¸ä¼å°±æ­¤âå°å°âï¼å½ç¶ä¸æ¯ï¼æä»¥æä»¬ä¼ç«­å°½æè½ï¼ä¸ºæä»¬èªå·±çåºç¨å¢å åç§çµæ´»çâæä»¶æºå¶âï¼è¿ä¸ä»ä»æ¯æä»¬æè½çå±ç°ï¼ä¹æ¯ä½ç°ç¨æ·ä»·å¼çå³é®ã</p>
<p>&nbsp;</p>
<p>ä½ç°å¨ï¼æ°çé®é¢æ¥äºï¼ä½ çåºç¨æ¬èº«å°±æ¯åºè¯¥â<strong>å·¨å¤§çWebãAI</strong>âçæ¯æä½ï¼æ¨å°å¦ä½é¢å¯¹ï¼</p>
<h1>ææ64ä½WinFormåºç¨é½æ¯è¶çº§æµè§å¨ï¼æ éä¿®æ¹æºä»£ç ãä¸éè¦éæ°ç¼è¯</h1>
<p>è¿æ¯ä¸ä¸ªâè¿ä¹ç»å¯¹åâçç»è®ºï¼ä¸åå³äºæ¨å¦ä½åä»£ç ï¼ä»åå³äºæ¨å¦ä½å¯¹å¾æ¨çç¼è¯æå¾ãé£ä¹ï¼æ¨çæåº¦ä¼ä¸ä¼ååï¼è¿æ¯æä»¬è¿æä¼æäº¤çâå¼æºé¡¹ç®âï¼ä¹æ¯é¢å¯¹æ¥æ°æå¼çAIãWebææ¯ï¼ç»åºçä¸ä¸ªç­ç¥ãåºå¯¹æ¹å¼ã</p>
<p>&nbsp;</p>
<p>å¦ææµè§å¨å¸åºï¼ä»ä»ææ°éæä¸ºæéçç©å®¶ï¼ä¼ä¸ä¼éå¸¸çå¯å¯ï¼å¦æææçWinFormãMFCãWPFé½å¯ä»¥æ¯è¶³ä»¥åª²ç¾ChromeãEdgeçæµè§å¨ï¼ä½æ¥æçWebåå®¹ç»´åº¦æ´é«ï¼ä¼ä¸ä¼å¾æææã</p>
<p>&nbsp;</p>
<p>æµè§å¨æºå¶ï¼æ¬èº«ä¸æ¯å¯¡å¤´çç¹æï¼èæ¯ä½ ç¼è¯ä¹åexeçè¿è¡å½¢æä¹ä¸ï¼æ¯ä½ åºç¨çä¸ä¸ªå¯éæ©çâè§è²âï¼å°±å¦åä½ èªå·±æ¥æå¾å¤ä¸åçèº«ä»½ä¸æ ·ã</p>
<p>&nbsp;</p>
<p>å½ä½ æè¯å°ï¼ä½ çexeï¼ä¸ååæ§åè¶³ï¼èæ¯å¯ä»¥æ¥åé¢å¤çâææ¬âæè¿°æå¾ï¼è¿æå³çï¼ä½ å¯ä»¥ä¸ºä½ çexeæä¾âæç¤ºè¯âï¼å®ä»¬ä¼ä¸ºä½ âä½ç­âï¼è¿æ¯ä¸ç§âååæ²éâçæå¾ä½ç°ï¼è¿ä¸ä¸ªè½åï¼ä¸åºè¯¥æ¯ä¸»æµæµè§å¨ç¬äº«çï¼èæ¯ä¸ä¸ªâæ®æ âçæºå¶ï¼ä½ ä¸éè¦âç¥å¥çâä»£ç ï¼æ¨éè¦çä»ä»æ¯ä¸ä¸ªâè§è§å¾®è°âï¼å¦æ­¤ï¼æºè½æ¶ç°ï¼å°±ä¼è¿å¨å«å°ºã</p>
<h1>å¦ææ¨å¯¹âæ¡é¢å³æµè§å¨âæå´è¶£</h1>
<p>å¦ææ¨å¯¹64ä½æ¡é¢åºç¨å³æµè§å¨æå´è¶£ï¼å¯ä»¥å³æ³¨å¦ä¸è¶é¾æ¥ï¼</p>
<p>1ã <a href="https://www.cnblogs.com/sunhui/p/19391507">é®ä¸é´ï¼exeæ¯ä½ç©ï¼ç´æAIæ²é»ãWebå¯¡è¨ï¼1ï¼- åå®¢å­</a></p>
<p>2ã <a href="https://www.cnblogs.com/sunhui/p/19392696">é®ä¸é´ï¼exeæ¯ä½ç©ï¼ç´æAIæ²é»ãWebå¯¡è¨ ï¼2ï¼- åå®¢å­</a></p>
<p>3ã<a href="https://www.cnblogs.com/sunhui/p/19395909">é®ä¸é´ï¼exeæ¯ä½ç©ï¼ç´æAIæ²é»ãWebå¯¡è¨ï¼3ï¼ -&nbsp; åå®¢å­</a></p>
<p>ä»¥ååç»­çè¿è½½ï¼å¶ä¸­æä¸è½½å°åä»¥åç¸å³çç»èä»ç»ã</p>
</div>
<div class="clear"></div>

	<div class="postDesc">posted on 
<span id="post-date" data-last-update-days="0.12638888888888888" data-date-updated="2025-12-25 11:06">2025-12-25 08:04</span>&nbsp;
<a href="https://www.cnblogs.com/sunhui">Exe2WebBrowser</a>&nbsp;
éè¯»(<span id="post_view_count">376</span>)&nbsp;
è¯è®º(<span id="post_comment_count">3</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19395609);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19395609', targetLink: 'https://www.cnblogs.com/sunhui/p/19395609', title: 'ææ64ä½WinFormåºç¨é½æ¯Chromiumæµè§å¨' })">ä¸¾æ¥</a>
</div>
 ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ææ¡ PHP Attributes ä»èªå®ä¹åå»ºå°çäº§å®ç° ]]></title>
    <link>https://www.cnblogs.com/catchadmin/p/19395584</link>
    <guid>e7e08afd2472f75a68b7d40cc5745356</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/catchadmin/p/19395584" title="åå¸äº 2025-12-25 07:57">
    <span role="heading" aria-level="2">ææ¡ PHP Attributes ä»èªå®ä¹åå»ºå°çäº§å®ç°</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="ææ¡-php-attributes-ä»èªå®ä¹åå»ºå°çäº§å®ç°">ææ¡ PHP Attributes ä»èªå®ä¹åå»ºå°çäº§å®ç°</h1>
<h2 id="å¼è¨php-åæ°æ®ç¼ç¨çç°ä»£æ¶ä»£">å¼è¨:PHP åæ°æ®ç¼ç¨çç°ä»£æ¶ä»£</h2>
<p>PHP 8.0 å¼å¥äºåç Attributes(ä»¥åç§°ä¸ºæ³¨è§£),å½»åºæ¹åäºæä»¬ç¼åå£°æå¼ä»£ç çæ¹å¼ãAttributes å®ç°äºä¼éçåæ°æ®é©±å¨ç¼ç¨,ç¨ç»æåãç±»åå®å¨çå£°ææ¿ä»£äº docblock æ³¨è§£ãæ¬ç»¼åæåå°æ¢è®¨èªå®ä¹ AttributesãReflection API éæãåºäº Attribute çè·¯ç±ä»¥åéªè¯ç³»ç»ã</p>
<p><a href="https://catchadmin.com/post/2025-12/mastering-php-attributes-from-custom-creation-to-production-implementation" target="_blank" rel="noopener nofollow">åæé¾æ¥ ææ¡ PHP Attributes ä»èªå®ä¹åå»ºå°çäº§å®ç°</a></p>
<h2 id="ç¬¬ä¸é¨åèªå®ä¹-attributesæå»ºä½ èªå·±çåæ°æ®å±">ç¬¬ä¸é¨å:èªå®ä¹ Attributesââæå»ºä½ èªå·±çåæ°æ®å±</h2>
<h3 id="çè§£-php-attributes-åºç¡">çè§£ PHP Attributes åºç¡</h3>
<p>PHP Attributes æ¯ç¨ <code>#[Attribute]</code> æ è®°çç¹æ®ç±»,å¯ä»¥éå å°ç±»ãæ¹æ³ãå±æ§ãåæ°åå¸¸éä¸ãä¸æ³¨éä¸å,å®ä»¬æ¯ AST(æ½è±¡è¯­æ³æ )çä¸é¨å,å¯éè¿ Reflection è®¿é®ã</p>
<h3 id="åå»ºçäº§çº§èªå®ä¹-attribute">åå»ºçäº§çº§èªå®ä¹ Attribute</h3>
<p>è®©æä»¬ä¸ºä¼ä¸åºç¨æå»ºä¸ä¸ªå¨é¢çæ¥å¿ Attribute ç³»ç»:</p>
<pre><code class="language-php">&lt;?php

#[Attribute(Attribute::TARGET_METHOD | Attribute::TARGET_CLASS | Attribute::IS_REPEATABLE)]
class AuditLog
{
    public function __construct(
        public string $operation,
        public LogLevel $level = LogLevel::INFO,
        public bool $includeParameters = true,
        public bool $includeReturnValue = false,
        public array $sensitiveParameters = []
    ) {}
}

enum LogLevel: string
{
    case TRACE = 'trace';
    case DEBUG = 'debug';
    case INFO = 'info';
    case WARNING = 'warning';
    case ERROR = 'error';
    case CRITICAL = 'critical';
}
</code></pre>
<h3 id="è¿é¶ç¨æ³å±æ§çº§éªè¯-attribute">è¿é¶ç¨æ³:å±æ§çº§éªè¯ Attribute</h3>
<p>è¿æ¯ä¸ä¸ªç¨äºå±æ§çº§éªè¯çèªå®ä¹ Attribute,æ¯æå¤æè§å:</p>
<pre><code class="language-php">&lt;?php

#[Attribute(Attribute::TARGET_PROPERTY | Attribute::IS_REPEATABLE)]
class BusinessRule
{
    public function __construct(
        public string $ruleName,
        public string $errorMessage = '',
        public int $priority = 0
    ) {
        if (empty($this-&gt;errorMessage)) {
            $this-&gt;errorMessage = "Business rule '{$ruleName}' validation failed";
        }
    }
}

#[Attribute(Attribute::TARGET_PROPERTY)]
class CreditCardValidation extends BusinessRule
{
    public function __construct(
        public array $acceptedCardTypes = ['Visa', 'MasterCard', 'Amex'],
        public bool $requireCVV = true,
        string $errorMessage = 'Invalid credit card'
    ) {
        parent::__construct('CreditCardValidation', $errorMessage);
    }
}

#[Attribute(Attribute::TARGET_PROPERTY)]
class EmailValidation
{
    public function __construct(
        public bool $checkDNS = false,
        public array $allowedDomains = [],
        public string $errorMessage = 'Invalid email address'
    ) {}
}
</code></pre>
<h3 id="å®éåºç¨ç¤ºä¾">å®éåºç¨ç¤ºä¾</h3>
<pre><code class="language-php">&lt;?php

#[Attribute(Attribute::TARGET_METHOD)]
class Transaction
{
    public function __construct(
        public string $isolationLevel = 'SERIALIZABLE'
    ) {}
}

#[Attribute(Attribute::TARGET_METHOD)]
class RetryPolicy
{
    public function __construct(
        public int $maxAttempts = 3,
        public int $delayMilliseconds = 1000,
        public array $retryOnExceptions = []
    ) {}
}

class PaymentProcessor
{
    #[AuditLog(
        operation: 'ProcessPayment',
        level: LogLevel::CRITICAL,
        sensitiveParameters: ['creditCardNumber', 'cvv']
    )]
    #[Transaction(isolationLevel: 'SERIALIZABLE')]
    #[RetryPolicy(maxAttempts: 3, delayMilliseconds: 1000)]
    public function processPayment(
        float $amount,
        string $creditCardNumber,
        string $cvv
    ): PaymentResult {
        // Implementation
        return new PaymentResult();
    }
}
</code></pre>
<h2 id="ç¬¬äºé¨åreflection-apiå¨è¿è¡æ¶è¯»ååå¤ç-attributes">ç¬¬äºé¨å:Reflection APIââå¨è¿è¡æ¶è¯»ååå¤ç Attributes</h2>
<h3 id="åºç¡reflection-ä¸-attribute-åç°">åºç¡:Reflection ä¸ Attribute åç°</h3>
<p>PHP ç Reflection API æä¾äºå¼ºå¤§çå·¥å·æ¥å¨è¿è¡æ¶æ£æ¥åæä½ Attributesãè¿æ¯ä¸ä¸ªå¨é¢ç Attribute å¤çå¨:</p>
<pre><code class="language-php">&lt;?php

class AttributeProcessor
{
    /**
     * Get all attributes of a specific type from a class
     */
    public static function getClassAttributes(string $className, string $attributeClass): array
    {
        $reflection = new ReflectionClass($className);
        $attributes = $reflection-&gt;getAttributes($attributeClass, ReflectionAttribute::IS_INSTANCEOF);
        
        return array_map(fn($attr) =&gt; $attr-&gt;newInstance(), $attributes);
    }
    
    /**
     * Get attributes from all methods in a class
     */
    public static function getMethodAttributes(string $className, string $attributeClass): array
    {
        $reflection = new ReflectionClass($className);
        $result = [];
        
        foreach ($reflection-&gt;getMethods() as $method) {
            $attributes = $method-&gt;getAttributes($attributeClass, ReflectionAttribute::IS_INSTANCEOF);
            
            if (!empty($attributes)) {
                $result[$method-&gt;getName()] = array_map(
                    fn($attr) =&gt; $attr-&gt;newInstance(),
                    $attributes
                );
            }
        }
        
        return $result;
    }
    
    /**
     * Get attributes from properties
     */
    public static function getPropertyAttributes(string $className, string $attributeClass): array
    {
        $reflection = new ReflectionClass($className);
        $result = [];
        
        foreach ($reflection-&gt;getProperties() as $property) {
            $attributes = $property-&gt;getAttributes($attributeClass, ReflectionAttribute::IS_INSTANCEOF);
            
            if (!empty($attributes)) {
                $result[$property-&gt;getName()] = array_map(
                    fn($attr) =&gt; $attr-&gt;newInstance(),
                    $attributes
                );
            }
        }
        
        return $result;
    }
}
</code></pre>
<h3 id="æå»º-attribute-é©±å¨çæ¦æªå¨">æå»º Attribute é©±å¨çæ¦æªå¨</h3>
<p>è¿æ¯ä½¿ç¨ Reflection å®ç°å®¡è®¡æ¥å¿æ¦æªå¨çå®éç¤ºä¾:</p>
<pre><code class="language-php">&lt;?php

class AuditLogInterceptor
{
    private LoggerInterface $logger;
    
    public function __construct(LoggerInterface $logger)
    {
        $this-&gt;logger = $logger;
    }
    
    public function intercept(object $target, string $method, array $arguments): mixed
    {
        $reflection = new ReflectionMethod($target, $method);
        $attributes = $reflection-&gt;getAttributes(AuditLog::class);
        
        if (empty($attributes)) {
            return $target-&gt;$method(...$arguments);
        }
        
        foreach ($attributes as $attribute) {
            $auditLog = $attribute-&gt;newInstance();
            $this-&gt;logBefore($auditLog, $method, $arguments, $reflection);
        }
        
        $startTime = microtime(true);
        
        try {
            $result = $target-&gt;$method(...$arguments);
            $executionTime = microtime(true) - $startTime;
            
            foreach ($attributes as $attribute) {
                $auditLog = $attribute-&gt;newInstance();
                $this-&gt;logAfter($auditLog, $method, $result, $executionTime);
            }
            
            return $result;
        } catch (Throwable $e) {
            foreach ($attributes as $attribute) {
                $auditLog = $attribute-&gt;newInstance();
                $this-&gt;logError($auditLog, $method, $e);
            }
            throw $e;
        }
    }
    
    private function logBefore(AuditLog $audit, string $method, array $arguments, ReflectionMethod $reflection): void
    {
        $logData = [
            'operation' =&gt; $audit-&gt;operation,
            'method' =&gt; $method,
            'timestamp' =&gt; date('Y-m-d H:i:s'),
        ];
        
        if ($audit-&gt;includeParameters) {
            $params = $reflection-&gt;getParameters();
            $sanitizedArgs = [];
            
            foreach ($params as $index =&gt; $param) {
                $paramName = $param-&gt;getName();
                $value = $arguments[$index] ?? null;
                
                if (in_array($paramName, $audit-&gt;sensitiveParameters)) {
                    $sanitizedArgs[$paramName] = '***REDACTED***';
                } else {
                    $sanitizedArgs[$paramName] = $value;
                }
            }
            
            $logData['parameters'] = $sanitizedArgs;
        }
        
        $this-&gt;logger-&gt;log($audit-&gt;level-&gt;value, "Executing: {$audit-&gt;operation}", $logData);
    }
    
    private function logAfter(AuditLog $audit, string $method, mixed $result, float $executionTime): void
    {
        $logData = [
            'operation' =&gt; $audit-&gt;operation,
            'method' =&gt; $method,
            'execution_time' =&gt; round($executionTime * 1000, 2) . 'ms',
        ];
        
        if ($audit-&gt;includeReturnValue) {
            $logData['return_value'] = $result;
        }
        
        $this-&gt;logger-&gt;log($audit-&gt;level-&gt;value, "Completed: {$audit-&gt;operation}", $logData);
    }
    
    private function logError(AuditLog $audit, string $method, Throwable $e): void
    {
        $this-&gt;logger-&gt;log(LogLevel::ERROR-&gt;value, "Failed: {$audit-&gt;operation}", [
            'operation' =&gt; $audit-&gt;operation,
            'method' =&gt; $method,
            'error' =&gt; $e-&gt;getMessage(),
            'trace' =&gt; $e-&gt;getTraceAsString(),
        ]);
    }
}
</code></pre>
<h3 id="ä½¿ç¨-attributes-çå¨æä»£çæ¨¡å¼">ä½¿ç¨ Attributes çå¨æä»£çæ¨¡å¼</h3>
<pre><code class="language-php">&lt;?php

class AttributeProxy
{
    private object $target;
    private AuditLogInterceptor $interceptor;
    
    public function __construct(object $target, AuditLogInterceptor $interceptor)
    {
        $this-&gt;target = $target;
        $this-&gt;interceptor = $interceptor;
    }
    
    public function __call(string $method, array $arguments): mixed
    {
        $reflection = new ReflectionClass($this-&gt;target);
        
        if (!$reflection-&gt;hasMethod($method)) {
            throw new BadMethodCallException("Method {$method} does not exist");
        }
        
        $methodReflection = $reflection-&gt;getMethod($method);
        $attributes = $methodReflection-&gt;getAttributes(AuditLog::class);
        
        if (!empty($attributes)) {
            return $this-&gt;interceptor-&gt;intercept($this-&gt;target, $method, $arguments);
        }
        
        return $this-&gt;target-&gt;$method(...$arguments);
    }
}

// Usage
$processor = new PaymentProcessor();
$logger = new Logger();
$interceptor = new AuditLogInterceptor($logger);
$proxy = new AttributeProxy($processor, $interceptor);

// This call will be intercepted and logged
$result = $proxy-&gt;processPayment(100.00, '4111111111111111', '123');
</code></pre>
<h2 id="ç¬¬ä¸é¨åattribute-é©±å¨çè·¯ç±ç³»ç»">ç¬¬ä¸é¨å:Attribute é©±å¨çè·¯ç±ç³»ç»</h2>
<h3 id="è·¯ç±-attributes-å®ä¹">è·¯ç± Attributes å®ä¹</h3>
<pre><code class="language-php">&lt;?php

#[Attribute(Attribute::TARGET_METHOD | Attribute::TARGET_CLASS)]
class Route
{
    public function __construct(
        public string $path,
        public string $method = 'GET',
        public array $middleware = [],
        public ?string $name = null
    ) {}
}

#[Attribute(Attribute::TARGET_CLASS)]
class RoutePrefix
{
    public function __construct(
        public string $prefix,
        public array $middleware = []
    ) {}
}

#[Attribute(Attribute::TARGET_PARAMETER)]
class FromBody
{
    public function __construct(
        public ?string $validator = null
    ) {}
}

#[Attribute(Attribute::TARGET_PARAMETER)]
class FromQuery
{
    public function __construct(
        public ?string $name = null,
        public mixed $default = null
    ) {}
}

#[Attribute(Attribute::TARGET_PARAMETER)]
class FromRoute
{
    public function __construct(
        public string $parameter
    ) {}
}
</code></pre>
<h3 id="è·¯ç±æ³¨åå¨å®ç°">è·¯ç±æ³¨åå¨å®ç°</h3>
<pre><code class="language-php">&lt;?php

class RouteRegistry
{
    private array $routes = [];
    
    public function register(string $controllerClass): void
    {
        $reflection = new ReflectionClass($controllerClass);
        
        // Get class-level prefix and middleware
        $prefixAttributes = $reflection-&gt;getAttributes(RoutePrefix::class);
        $prefix = '';
        $classMiddleware = [];
        
        if (!empty($prefixAttributes)) {
            $routePrefix = $prefixAttributes[0]-&gt;newInstance();
            $prefix = $routePrefix-&gt;prefix;
            $classMiddleware = $routePrefix-&gt;middleware;
        }
        
        // Process each method
        foreach ($reflection-&gt;getMethods(ReflectionMethod::IS_PUBLIC) as $method) {
            $routeAttributes = $method-&gt;getAttributes(Route::class);
            
            foreach ($routeAttributes as $attribute) {
                $route = $attribute-&gt;newInstance();
                
                $fullPath = $prefix . $route-&gt;path;
                $middleware = array_merge($classMiddleware, $route-&gt;middleware);
                
                $this-&gt;routes[] = [
                    'method' =&gt; strtoupper($route-&gt;method),
                    'path' =&gt; $fullPath,
                    'controller' =&gt; $controllerClass,
                    'action' =&gt; $method-&gt;getName(),
                    'middleware' =&gt; $middleware,
                    'name' =&gt; $route-&gt;name,
                    'parameters' =&gt; $this-&gt;extractParameters($method),
                ];
            }
        }
    }
    
    private function extractParameters(ReflectionMethod $method): array
    {
        $parameters = [];
        
        foreach ($method-&gt;getParameters() as $param) {
            $paramInfo = [
                'name' =&gt; $param-&gt;getName(),
                'type' =&gt; $param-&gt;getType()?-&gt;getName(),
                'source' =&gt; 'auto',
            ];
            
            // Check for parameter attributes
            $fromBodyAttrs = $param-&gt;getAttributes(FromBody::class);
            $fromQueryAttrs = $param-&gt;getAttributes(FromQuery::class);
            $fromRouteAttrs = $param-&gt;getAttributes(FromRoute::class);
            
            if (!empty($fromBodyAttrs)) {
                $paramInfo['source'] = 'body';
                $paramInfo['validator'] = $fromBodyAttrs[0]-&gt;newInstance()-&gt;validator;
            } elseif (!empty($fromQueryAttrs)) {
                $fromQuery = $fromQueryAttrs[0]-&gt;newInstance();
                $paramInfo['source'] = 'query';
                $paramInfo['queryName'] = $fromQuery-&gt;name ?? $param-&gt;getName();
                $paramInfo['default'] = $fromQuery-&gt;default;
            } elseif (!empty($fromRouteAttrs)) {
                $fromRoute = $fromRouteAttrs[0]-&gt;newInstance();
                $paramInfo['source'] = 'route';
                $paramInfo['routeParam'] = $fromRoute-&gt;parameter;
            }
            
            $parameters[] = $paramInfo;
        }
        
        return $parameters;
    }
    
    public function getRoutes(): array
    {
        return $this-&gt;routes;
    }
    
    public function match(string $method, string $path): ?array
    {
        foreach ($this-&gt;routes as $route) {
            if ($route['method'] !== strtoupper($method)) {
                continue;
            }
            
            $pattern = $this-&gt;pathToRegex($route['path']);
            
            if (preg_match($pattern, $path, $matches)) {
                return [
                    'route' =&gt; $route,
                    'params' =&gt; array_filter($matches, 'is_string', ARRAY_FILTER_USE_KEY),
                ];
            }
        }
        
        return null;
    }
    
    private function pathToRegex(string $path): string
    {
        $pattern = preg_replace('/\{([a-zA-Z0-9_]+)\}/', '(?P&lt;$1&gt;[^/]+)', $path);
        return '#^' . $pattern . '$#';
    }
}
</code></pre>
<h3 id="æ§å¶å¨ç¤ºä¾">æ§å¶å¨ç¤ºä¾</h3>
<pre><code class="language-php">&lt;?php

#[RoutePrefix('/api/users', middleware: ['auth', 'api'])]
class UserController
{
    #[Route('/', method: 'GET', name: 'users.list')]
    public function index(
        #[FromQuery('page', default: 1)] int $page,
        #[FromQuery('limit', default: 20)] int $limit
    ): array {
        return [
            'users' =&gt; [],
            'page' =&gt; $page,
            'limit' =&gt; $limit,
        ];
    }
    
    #[Route('/{id}', method: 'GET', name: 'users.show')]
    public function show(#[FromRoute('id')] int $id): array
    {
        return ['user' =&gt; ['id' =&gt; $id]];
    }
    
    #[Route('/', method: 'POST', name: 'users.create')]
    public function create(
        #[FromBody(validator: UserValidator::class)] UserCreateRequest $request
    ): array {
        return ['user' =&gt; ['id' =&gt; 1]];
    }
    
    #[Route('/{id}', method: 'PUT', name: 'users.update')]
    public function update(
        #[FromRoute('id')] int $id,
        #[FromBody] UserUpdateRequest $request
    ): array {
        return ['user' =&gt; ['id' =&gt; $id]];
    }
    
    #[Route('/{id}', method: 'DELETE', name: 'users.delete')]
    public function delete(#[FromRoute('id')] int $id): array
    {
        return ['success' =&gt; true];
    }
}
</code></pre>
<h3 id="è·¯ç±è°åº¦å¨">è·¯ç±è°åº¦å¨</h3>
<pre><code class="language-php">&lt;?php

class Router
{
    private RouteRegistry $registry;
    private Container $container;
    
    public function __construct(RouteRegistry $registry, Container $container)
    {
        $this-&gt;registry = $registry;
        $this-&gt;container = $container;
    }
    
    public function dispatch(string $method, string $path): mixed
    {
        $match = $this-&gt;registry-&gt;match($method, $path);
        
        if ($match === null) {
            http_response_code(404);
            return ['error' =&gt; 'Route not found'];
        }
        
        $route = $match['route'];
        $routeParams = $match['params'];
        
        // Run middleware
        foreach ($route['middleware'] as $middleware) {
            $this-&gt;runMiddleware($middleware);
        }
        
        // Resolve controller
        $controller = $this-&gt;container-&gt;resolve($route['controller']);
        
        // Prepare method arguments
        $arguments = $this-&gt;prepareArguments($route['parameters'], $routeParams);
        
        // Call controller method
        return $controller-&gt;{$route['action']}(...$arguments);
    }
    
    private function prepareArguments(array $parameters, array $routeParams): array
    {
        $arguments = [];
        
        foreach ($parameters as $param) {
            $value = match($param['source']) {
                'body' =&gt; $this-&gt;getBodyParameter($param),
                'query' =&gt; $this-&gt;getQueryParameter($param),
                'route' =&gt; $routeParams[$param['routeParam']] ?? null,
                default =&gt; null,
            };
            
            $arguments[] = $value;
        }
        
        return $arguments;
    }
    
    private function getBodyParameter(array $param): mixed
    {
        $body = json_decode(file_get_contents('php://input'), true);
        
        if ($param['type'] &amp;&amp; class_exists($param['type'])) {
            $instance = new $param['type']();
            
            foreach ($body as $key =&gt; $value) {
                if (property_exists($instance, $key)) {
                    $instance-&gt;$key = $value;
                }
            }
            
            return $instance;
        }
        
        return $body;
    }
    
    private function getQueryParameter(array $param): mixed
    {
        $queryName = $param['queryName'] ?? $param['name'];
        return $_GET[$queryName] ?? $param['default'] ?? null;
    }
    
    private function runMiddleware(string $middleware): void
    {
        // Middleware implementation
    }
}
</code></pre>
<h2 id="ç¬¬åé¨åattribute-é©±å¨çéªè¯ç³»ç»">ç¬¬åé¨å:Attribute é©±å¨çéªè¯ç³»ç»</h2>
<h3 id="éªè¯-attributes">éªè¯ Attributes</h3>
<pre><code class="language-php">&lt;?php

#[Attribute(Attribute::TARGET_PROPERTY)]
class Required
{
    public function __construct(
        public string $message = 'This field is required'
    ) {}
}

#[Attribute(Attribute::TARGET_PROPERTY)]
class Length
{
    public function __construct(
        public ?int $min = null,
        public ?int $max = null,
        public string $message = ''
    ) {
        if (empty($this-&gt;message)) {
            if ($this-&gt;min &amp;&amp; $this-&gt;max) {
                $this-&gt;message = "Length must be between {$this-&gt;min} and {$this-&gt;max}";
            } elseif ($this-&gt;min) {
                $this-&gt;message = "Minimum length is {$this-&gt;min}";
            } elseif ($this-&gt;max) {
                $this-&gt;message = "Maximum length is {$this-&gt;max}";
            }
        }
    }
}

#[Attribute(Attribute::TARGET_PROPERTY)]
class Email
{
    public function __construct(
        public bool $checkDNS = false,
        public string $message = 'Invalid email address'
    ) {}
}

#[Attribute(Attribute::TARGET_PROPERTY)]
class Pattern
{
    public function __construct(
        public string $regex,
        public string $message = 'Invalid format'
    ) {}
}

#[Attribute(Attribute::TARGET_PROPERTY)]
class Range
{
    public function __construct(
        public ?float $min = null,
        public ?float $max = null,
        public string $message = ''
    ) {
        if (empty($this-&gt;message)) {
            if ($this-&gt;min !== null &amp;&amp; $this-&gt;max !== null) {
                $this-&gt;message = "Value must be between {$this-&gt;min} and {$this-&gt;max}";
            } elseif ($this-&gt;min !== null) {
                $this-&gt;message = "Minimum value is {$this-&gt;min}";
            } elseif ($this-&gt;max !== null) {
                $this-&gt;message = "Maximum value is {$this-&gt;max}";
            }
        }
    }
}

#[Attribute(Attribute::TARGET_PROPERTY)]
class InArray
{
    public function __construct(
        public array $allowedValues,
        public string $message = 'Invalid value'
    ) {}
}

#[Attribute(Attribute::TARGET_PROPERTY)]
class Url
{
    public function __construct(
        public array $allowedSchemes = ['http', 'https'],
        public string $message = 'Invalid URL'
    ) {}
}

#[Attribute(Attribute::TARGET_PROPERTY)]
class Date
{
    public function __construct(
        public string $format = 'Y-m-d',
        public string $message = 'Invalid date format'
    ) {}
}

#[Attribute(Attribute::TARGET_PROPERTY)]
class Unique
{
    public function __construct(
        public string $table,
        public string $column,
        public ?int $ignoreId = null,
        public string $message = 'This value already exists'
    ) {}
}

#[Attribute(Attribute::TARGET_PROPERTY)]
class CreditCard
{
    public function __construct(
        public array $types = ['visa', 'mastercard', 'amex', 'discover'],
        public string $message = 'Invalid credit card number'
    ) {}
}

#[Attribute(Attribute::TARGET_CLASS)]
class CompareFields
{
    public function __construct(
        public string $field1,
        public string $field2,
        public string $operator = '===',
        public string $message = 'Fields do not match'
    ) {}
}
</code></pre>
<h3 id="å¢å¼ºéªè¯å¨å®ç°">å¢å¼ºéªè¯å¨å®ç°</h3>
<pre><code class="language-php">&lt;?php

class EnhancedValidator
{
    private array $errors = [];
    
    public function validate(object $object): bool
    {
        $this-&gt;errors = [];
        $reflection = new ReflectionClass($object);
        
        // Validate properties
        foreach ($reflection-&gt;getProperties() as $property) {
            $this-&gt;validateProperty($object, $property);
        }
        
        // Validate class-level rules
        $this-&gt;validateClassRules($object, $reflection);
        
        return empty($this-&gt;errors);
    }
    
    private function validateProperty(object $object, ReflectionProperty $property): void
    {
        $property-&gt;setAccessible(true);
        $value = $property-&gt;getValue($object);
        $propertyName = $property-&gt;getName();
        
        foreach ($property-&gt;getAttributes() as $attribute) {
            $validator = $attribute-&gt;newInstance();
            
            $isValid = match($attribute-&gt;getName()) {
                Required::class =&gt; $this-&gt;validateRequired($value, $validator),
                Length::class =&gt; $this-&gt;validateLength($value, $validator),
                Email::class =&gt; $this-&gt;validateEmail($value, $validator),
                Pattern::class =&gt; $this-&gt;validatePattern($value, $validator),
                Range::class =&gt; $this-&gt;validateRange($value, $validator),
                InArray::class =&gt; $this-&gt;validateInArray($value, $validator),
                Url::class =&gt; $this-&gt;validateUrl($value, $validator),
                Date::class =&gt; $this-&gt;validateDate($value, $validator),
                CreditCard::class =&gt; $this-&gt;validateCreditCard($value, $validator),
                default =&gt; true,
            };
            
            if (!$isValid) {
                $this-&gt;errors[$propertyName][] = $validator-&gt;message;
            }
        }
    }
    
    private function validateRequired(mixed $value, Required $rule): bool
    {
        if (is_string($value)) {
            return trim($value) !== '';
        }
        return $value !== null &amp;&amp; $value !== '';
    }
    
    private function validateLength(mixed $value, Length $rule): bool
    {
        if ($value === null || $value === '') {
            return true;
        }
        
        $length = mb_strlen((string)$value);
        
        if ($rule-&gt;min !== null &amp;&amp; $length &lt; $rule-&gt;min) {
            return false;
        }
        
        if ($rule-&gt;max !== null &amp;&amp; $length &gt; $rule-&gt;max) {
            return false;
        }
        
        return true;
    }
    
    private function validateEmail(mixed $value, Email $rule): bool
    {
        if ($value === null || $value === '') {
            return true;
        }
        
        if (!filter_var($value, FILTER_VALIDATE_EMAIL)) {
            return false;
        }
        
        if ($rule-&gt;checkDNS) {
            $domain = substr(strrchr($value, "@"), 1);
            return checkdnsrr($domain, 'MX');
        }
        
        return true;
    }
    
    private function validatePattern(mixed $value, Pattern $rule): bool
    {
        if ($value === null || $value === '') {
            return true;
        }
        
        return preg_match($rule-&gt;regex, (string)$value) === 1;
    }
    
    private function validateRange(mixed $value, Range $rule): bool
    {
        if ($value === null || $value === '') {
            return true;
        }
        
        $numValue = (float)$value;
        
        if ($rule-&gt;min !== null &amp;&amp; $numValue &lt; $rule-&gt;min) {
            return false;
        }
        
        if ($rule-&gt;max !== null &amp;&amp; $numValue &gt; $rule-&gt;max) {
            return false;
        }
        
        return true;
    }
    
    private function validateInArray(mixed $value, InArray $rule): bool
    {
        if ($value === null || $value === '') {
            return true;
        }
        
        return in_array($value, $rule-&gt;allowedValues, true);
    }
    
    private function validateUrl(mixed $value, Url $rule): bool
    {
        if ($value === null || $value === '') {
            return true;
        }
        
        if (!filter_var($value, FILTER_VALIDATE_URL)) {
            return false;
        }
        
        $scheme = parse_url($value, PHP_URL_SCHEME);
        return in_array($scheme, $rule-&gt;allowedSchemes);
    }
    
    private function validateDate(mixed $value, Date $rule): bool
    {
        if ($value === null || $value === '') {
            return true;
        }
        
        $date = DateTime::createFromFormat($rule-&gt;format, (string)$value);
        return $date &amp;&amp; $date-&gt;format($rule-&gt;format) === $value;
    }
    
    private function validateCreditCard(mixed $value, CreditCard $rule): bool
    {
        if ($value === null || $value === '') {
            return true;
        }
        
        // Luhn algorithm
        $number = preg_replace('/\D/', '', (string)$value);
        $sum = 0;
        $length = strlen($number);
        
        for ($i = 0; $i &lt; $length; $i++) {
            $digit = (int)$number[$length - $i - 1];
            
            if ($i % 2 === 1) {
                $digit *= 2;
                if ($digit &gt; 9) {
                    $digit -= 9;
                }
            }
            
            $sum += $digit;
        }
        
        return $sum % 10 === 0;
    }
    
    private function validateClassRules(object $object, ReflectionClass $reflection): void
    {
        $attributes = $reflection-&gt;getAttributes(
            CompareFields::class,
            ReflectionAttribute::IS_INSTANCEOF
        );
        
        foreach ($attributes as $attribute) {
            $rule = $attribute-&gt;newInstance();
            
            $prop1 = $reflection-&gt;getProperty($rule-&gt;field1);
            $prop2 = $reflection-&gt;getProperty($rule-&gt;field2);
            
            $prop1-&gt;setAccessible(true);
            $prop2-&gt;setAccessible(true);
            
            $value1 = $prop1-&gt;getValue($object);
            $value2 = $prop2-&gt;getValue($object);
            
            $isValid = match($rule-&gt;operator) {
                '===' =&gt; $value1 === $value2,
                '==' =&gt; $value1 == $value2,
                '!==' =&gt; $value1 !== $value2,
                '!=' =&gt; $value1 != $value2,
                '&gt;' =&gt; $value1 &gt; $value2,
                '&gt;=' =&gt; $value1 &gt;= $value2,
                '&lt;' =&gt; $value1 &lt; $value2,
                '&lt;=' =&gt; $value1 &lt;= $value2,
                default =&gt; false,
            };
            
            if (!$isValid) {
                $this-&gt;errors['_class'][] = $rule-&gt;message;
            }
        }
    }
    
    public function getErrors(): array
    {
        return $this-&gt;errors;
    }
}
</code></pre>
<h3 id="å®éæ¨¡åç¤ºä¾">å®éæ¨¡åç¤ºä¾</h3>
<pre><code class="language-php">&lt;?php

#[CompareFields('password', 'confirmPassword', message: 'Passwords do not match')]
class UserRegistrationRequest
{
    #[Required]
    #[Length(min: 3, max: 50)]
    #[Pattern(
        regex: '/^[a-zA-Z0-9_]+$/',
        message: 'Username can only contain letters, numbers, and underscores'
    )]
    public string $username;
    
    #[Required]
    #[Email(checkDNS: true)]
    #[Unique(table: 'users', column: 'email')]
    public string $email;
    
    #[Required]
    #[Length(min: 8, max: 100)]
    #[Pattern(
        regex: '/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&amp;])[A-Za-z\d@$!%*?&amp;]/',
        message: 'Password must contain uppercase, lowercase, number, and special character'
    )]
    public string $password;
    
    #[Required]
    public string $confirmPassword;
    
    #[Required]
    #[Length(min: 2, max: 100)]
    public string $firstName;
    
    #[Required]
    #[Length(min: 2, max: 100)]
    public string $lastName;
    
    #[Date(format: 'Y-m-d')]
    public ?string $birthDate = null;
    
    #[Url(allowedSchemes: ['https'])]
    public ?string $website = null;
    
    #[Pattern(regex: '/^\+?[1-9]\d{1,14}$/', message: 'Invalid phone number')]
    public ?string $phone = null;
    
    #[InArray(allowedValues: ['male', 'female', 'other', 'prefer_not_to_say'])]
    public ?string $gender = null;
    
    #[Range(min: 18, max: 120)]
    public ?int $age = null;
}

class PaymentRequest
{
    #[Required]
    #[Range(min: 0.01, max: 999999.99)]
    public float $amount;
    
    #[Required]
    #[InArray(allowedValues: ['USD', 'EUR', 'GBP', 'JPY'])]
    public string $currency;
    
    #[Required]
    #[CreditCard(types: ['visa', 'mastercard'])]
    public string $cardNumber;
    
    #[Required]
    #[Pattern(regex: '/^\d{3,4}$/', message: 'Invalid CVV')]
    public string $cvv;
    
    #[Required]
    #[Pattern(regex: '/^(0[1-9]|1[0-2])\/\d{2}$/', message: 'Invalid expiry date (MM/YY)')]
    public string $expiryDate;
    
    #[Required]
    #[Length(min: 2, max: 100)]
    public string $cardholderName;
    
    #[Email]
    public ?string $receiptEmail = null;
}
</code></pre>
<h3 id="å¨æ§å¶å¨ä¸­ä½¿ç¨éªè¯">å¨æ§å¶å¨ä¸­ä½¿ç¨éªè¯</h3>
<pre><code class="language-php">&lt;?php

class RegistrationController
{
    private EnhancedValidator $validator;
    
    public function __construct()
    {
        $this-&gt;validator = new EnhancedValidator();
    }
    
    #[Route('/register', method: 'POST')]
    public function register(#[FromBody] UserRegistrationRequest $request): array
    {
        if (!$this-&gt;validator-&gt;validate($request)) {
            http_response_code(422);
            return [
                'success' =&gt; false,
                'errors' =&gt; $this-&gt;validator-&gt;getErrors(),
                'message' =&gt; 'Validation failed'
            ];
        }
        
        // Process registration
        $user = $this-&gt;createUser($request);
        
        return [
            'success' =&gt; true,
            'user' =&gt; $user,
            'message' =&gt; 'Registration successful'
        ];
    }
    
    private function createUser(UserRegistrationRequest $request): array
    {
        // Implementation
        return [
            'id' =&gt; 1,
            'username' =&gt; $request-&gt;username,
            'email' =&gt; $request-&gt;email,
        ];
    }
}
</code></pre>
<h2 id="è¿é¶æ¨¡å¼åæä½³å®è·µ">è¿é¶æ¨¡å¼åæä½³å®è·µ</h2>
<h3 id="attribute-ç»å">Attribute ç»å</h3>
<p>åå»ºå¯éç¨ç Attribute ç»:</p>
<pre><code class="language-php">&lt;?php

#[Attribute(Attribute::TARGET_PROPERTY)]
class StrongPassword
{
    public static function getRules(): array
    {
        return [
            new Required('Password is required'),
            new Length(min: 8, max: 100),
            new Pattern(
                regex: '/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&amp;])/',
                message: 'Password must meet complexity requirements'
            ),
        ];
    }
}

#[Attribute(Attribute::TARGET_PROPERTY)]
class PersonName
{
    public static function getRules(): array
    {
        return [
            new Required(),
            new Length(min: 2, max: 100),
            new Pattern(
                regex: '/^[a-zA-Z\s\'-]+$/',
                message: 'Name contains invalid characters'
            ),
        ];
    }
}
</code></pre>
<h3 id="ç¼å­-reflection-æ°æ®">ç¼å­ Reflection æ°æ®</h3>
<p>éè¿ç¼å­ Attribute åæ°æ®æ¥æåæ§è½:</p>
<pre><code class="language-php">&lt;?php

class AttributeCache
{
    private static array $cache = [];
    
    public static function getAttributes(string $className, string $attributeType): array
    {
        $key = "{$className}::{$attributeType}";
        
        if (!isset(self::$cache[$key])) {
            self::$cache[$key] = AttributeProcessor::getClassAttributes(
                $className,
                $attributeType
            );
        }
        
        return self::$cache[$key];
    }
    
    public static function getMethodAttributes(
        string $className,
        string $method,
        string $attributeType
    ): array {
        $key = "{$className}::{$method}::{$attributeType}";
        
        if (!isset(self::$cache[$key])) {
            $reflection = new ReflectionMethod($className, $method);
            self::$cache[$key] = array_map(
                fn($attr) =&gt; $attr-&gt;newInstance(),
                $reflection-&gt;getAttributes($attributeType, ReflectionAttribute::IS_INSTANCEOF)
            );
        }
        
        return self::$cache[$key];
    }
    
    public static function clear(): void
    {
        self::$cache = [];
    }
}
</code></pre>
<h3 id="attribute-é©±å¨çä¾èµæ³¨å¥">Attribute é©±å¨çä¾èµæ³¨å¥</h3>
<pre><code class="language-php">&lt;?php

#[Attribute(Attribute::TARGET_PROPERTY)]
class Inject
{
    public function __construct(
        public ?string $service = null
    ) {}
}

class Container
{
    private array $services = [];
    
    public function register(string $name, callable $factory): void
    {
        $this-&gt;services[$name] = $factory;
    }
    
    public function resolve(string $className): object
    {
        $reflection = new ReflectionClass($className);
        $instance = $reflection-&gt;newInstanceWithoutConstructor();
        
        foreach ($reflection-&gt;getProperties() as $property) {
            $attributes = $property-&gt;getAttributes(Inject::class);
            
            if (!empty($attributes)) {
                $inject = $attributes[0]-&gt;newInstance();
                $serviceName = $inject-&gt;service ?? $property-&gt;getType()-&gt;getName();
                
                if (isset($this-&gt;services[$serviceName])) {
                    $service = $this-&gt;services[$serviceName]($this);
                    $property-&gt;setAccessible(true);
                    $property-&gt;setValue($instance, $service);
                }
            }
        }
        
        return $instance;
    }
}

// Usage
class OrderService
{
    #[Inject]
    private DatabaseConnection $db;
    
    #[Inject(service: 'mailer')]
    private EmailService $emailService;
    
    #[Inject]
    private LoggerInterface $logger;
    
    public function createOrder(array $data): Order
    {
        $this-&gt;logger-&gt;info('Creating order');
        // Implementation
        return new Order();
    }
}
</code></pre>
<h2 id="æ§è½ä¼åæå·§">æ§è½ä¼åæå·§</h2>
<ol>
<li><strong>ç¼å­ Reflection ç»æ</strong>:Reflection å¼éè¾å¤§;ç¼å­ Attribute åæ°æ®</li>
<li><strong>ä½¿ç¨ IS_INSTANCEOF</strong>:æç´¢ Attributes æ¶ä½¿ç¨ç»§æ¿æ å¿</li>
<li><strong>å»¶è¿å è½½</strong>:ä»å¨éè¦æ¶å¤ç Attributes</li>
<li><strong>ç¼è¯è·¯ç±</strong>:å¨çäº§ç¯å¢ä¸­é¢ç¼è¯è·¯ç±è¡¨</li>
<li><strong>é¿åæ·±åº¦åµå¥</strong>:ä¿æ Attribute å¤çæµå±å</li>
</ol>
<h2 id="attributes-ä¸æ¿ä»£æ¹æ¡å¯¹æ¯">Attributes ä¸æ¿ä»£æ¹æ¡å¯¹æ¯</h2>
<table>
<thead>
<tr>
<th>ç¹æ§</th>
<th>Attributes</th>
<th>Docblock æ³¨è§£</th>
<th>éç½®æä»¶</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç±»åå®å¨</td>
<td>â ç¼è¯æ¶éªè¯</td>
<td>â å­ç¬¦ä¸²è§£æ</td>
<td>â ï¸ é¨åæ¯æ</td>
</tr>
<tr>
<td>IDE æ¯æ</td>
<td>â å®æ´æ¯æ</td>
<td>â ï¸ æéæ¯æ</td>
<td>â ï¸ æéæ¯æ</td>
</tr>
<tr>
<td>æ§è½</td>
<td>â OPcache ç¼å­</td>
<td>â ï¸ éè¦è§£æ</td>
<td>â å¯ç¼å­</td>
</tr>
<tr>
<td>å¯è¯»æ§</td>
<td>â å£°æå¼</td>
<td>â ï¸ æ³¨éæ··æ</td>
<td>â åç¦»ä»£ç </td>
</tr>
<tr>
<td>çµæ´»æ§</td>
<td>â é«åº¦çµæ´»</td>
<td>â ï¸ æé</td>
<td>â çµæ´»</td>
</tr>
</tbody>
</table>
<h2 id="ç»è¯­">ç»è¯­</h2>
<p>PHP Attributes ä»£è¡¨äºåæ°æ®ç¼ç¨çèå¼è½¬åãå®ä»¬æä¾:</p>
<ul>
<li><strong>ç±»åå®å¨</strong>:ç¼è¯æ¶éªè¯ Attribute ä½¿ç¨</li>
<li><strong>ç®æ´è¯­æ³</strong>:å£°æå¼ãå¯è¯»çä»£ç </li>
<li><strong>IDE æ¯æ</strong>:å®æ´çèªå¨è¡¥å¨åéæ</li>
<li><strong>æ§è½</strong>:è§£æä¸æ¬¡,ç± opcache ç¼å­</li>
<li><strong>çµæ´»æ§</strong>:éç¨äºç±»ãæ¹æ³ãå±æ§ãåæ°</li>
</ul>
<p>éè¿ææ¡èªå®ä¹ AttributesãReflection APIãåºäº Attribute çè·¯ç±åéªè¯æ¨¡å¼,ä½ å¯ä»¥è§£éå¼ºå¤§çæ¶ææ¨¡å¼,ä½¿ PHP åºç¨æ´æç»´æ¤ãå¯æµè¯ä¸ä¼éã</p>
<p>æ¬æä¸­çç¤ºä¾å±ç¤ºäºå¯ç¨äºçäº§çå®ç°,ä½ å¯ä»¥æ ¹æ®å·ä½éæ±è¿è¡è°æ´ãä»éªè¯ Attributes å¼å§,ç¶åéæ­¥éç¨è·¯ç±ä»¥åæ¥å¿åç¼å­ç­æ¨ªåå³æ³¨ç¹ã</p>
<p>è®°ä½:Attributes æ¯åæ°æ®ââå®ä»¬æè¿°ä½ çä»£ç ,ä½ä¸è½æ¿ä»£è¯å¥½çè®¾è®¡ãä½¿ç¨å®ä»¬æ¥åå°æ ·æ¿ä»£ç å¹¶å¢å¼ºè¡¨è¾¾å,èä¸æ¯ä½ä¸ºæ¸æ°æ¶æçæ¿ä»£åã</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-25 07:58">2025-12-25 07:57</span>&nbsp;
<a href="https://www.cnblogs.com/catchadmin">JaguarJack</a>&nbsp;
éè¯»(<span id="post_view_count">44</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19395584);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19395584', targetLink: 'https://www.cnblogs.com/catchadmin/p/19395584', title: 'ææ¡ PHP Attributes ä»èªå®ä¹åå»ºå°çäº§å®ç°' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ çµä¿¡å¬ç½IPV4è¢«æ¶åä¹åï¼å®¶åº­ç½ç»çâç»å°æ±çâæè¾è®° ]]></title>
    <link>https://www.cnblogs.com/sueyyyy/p/19394875</link>
    <guid>9eb79434e7539fefdf4ba77820b47466</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/sueyyyy/p/19394875" title="åå¸äº 2025-12-24 23:04">
    <span role="heading" aria-level="2">çµä¿¡å¬ç½IPV4è¢«æ¶åä¹åï¼å®¶åº­ç½ç»çâç»å°æ±çâæè¾è®°</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<blockquote>
<p>å¥½ä¹å¥½ä¹æ²¡åè¿åå®¢äºï¼æè¿å¿è¡æ¥æ½®ç»ä¸æ¥ççï¼ä¸è¿æ¢ç¶æ¥é½æ¥äºå°±é¡ºä¾¿åä¸ç¯åå®¢åèµ°å§ï¼æ³æ¥æ³å»æ²¡å¥å¥½ç´ æï¼éææè¿å®¶éç½ç»çæè¾è®°å½åäº«ä¸ä¸ã</p>
</blockquote>
<p>ä½ä¸ºä¸åè¦é¼ç åï¼æä¸ç´ä¿¡å¥è¡è§ï¼<strong>âä»£ç è½è·å°±ä¸è¦å¨ï¼æ¶æè½ç¨å°±å«éæâ</strong>ã<br>
è¿å å¹´æå®¶ççµä¿¡ç½ç»ä¸ç´ç¨³å¦èçï¼ææ¡ç¨ç¼ºç <strong>å¬ç½ IPv4</strong>ï¼å¨å°ç±³è·¯ç±å¨ä¸å¼ä¸ªç«¯å£è½¬åï¼éåDDNS+é²ç«å¢ç­ç¥ï¼å¨å¤è®¿é®å®¶éç Naså Mac miniï¼é£å«ä¸ä¸ªä¸è¬é¡ºæ»ä¸å®å¨ãé£æ¶åè§å¾è¿å·²ç»ä¸æ­¥å°ä½ï¼ä¸ç¨åæè¾äºã<br>
ç¶èï¼ä»å¹´4æï¼å¤©å¡äºã</p>
<h2 id="ç¬¬ä¸ç« å¤±å»-ipv4-çé£ä¸ªåæ">ç¬¬ä¸ç« ï¼å¤±å» IPv4 çé£ä¸ªåæ</h2>
<p>åç¹çæ±èçµä¿¡å¨æ²¡æä»»ä½é¢è­¦åéç¥çæåµä¸ï¼åæ¹é¢æ¶åäºæçå¬ç½ IPv4ãæçç WAN å£é£ä¸ª <code>100.73</code> å¼å¤´çåç½å°åï¼é·å¥äºæ²æã<br>
<img src="https://img2024.cnblogs.com/blog/2482940/202512/2482940-20251224222436013-1105168401.png" alt="image" width="1095" height="365" loading="lazy"><br>
ä½ä¸ºä¸ä¸ªä¸ä¿¡éªçäººï¼æå¼å§äºæ¼«é¿çç»´æä¹è·¯ãæå®¢æãæ¾çåºç»çãçè³ç¡¬çå¤´ç®å»å·¥ä¿¡é¨ãéç®¡å±ã12345æè¯ãç»æå¤§å®¶æçï¼å¾å°çåå¤åºå¥ä¸è´ï¼âèµæºæ¯ç«­ï¼ååä¸ºæç¡®è¡¨ç¤ºæè¯¥æå¡ï¼æ æ³åçâã<br>
æ²¡åæ³ï¼çæ´»è¿å¾ç»§ç»­ãè³èæ§ä¸è¿å¤§è¿ï¼æåªè½è¢«è¿«å¦¥åï¼è½¬åäº <strong>IPv6</strong>ã</p>
<h2 id="ç¬¬äºç« å¨äºèç½ä¸è£¸å¥çæ¥å­">ç¬¬äºç« ï¼å¨äºèç½ä¸âè£¸å¥âçæ¥å­</h2>
<p>å¥½å¨ipv6æ²¡æéå¶ï¼ç´æ¥å¼å¯è·¯ç±å¨çIPV6å°±è½ä½¿ç¨ãæéæ°æ¡èµ· <code>ddns-go</code>ï¼éååååè§£æã<br>
ä½è¿ç©æå¿æä¸ªå·¨å¤§çåââ<strong>å°ç±³è·¯ç±å¨ç IPv6 é²ç«å¢è®¾è®¡ç®ç´æ¯âåäººç±»â</strong>ãå®å°±åä¸ä¸ªåªæå¼å³é®çç¯æ³¡ï¼è¦ä¹å¨å¼ï¼å¤ç½å½»åºè¿ä¸æ¥ï¼ï¼è¦ä¹å¨å³ï¼å®¶éå¤§é¨æå¼ï¼ãä¸ºäºè½ç¨ï¼æè¢«è¿«éæ©äº<strong>å³é­é²ç«å¢</strong>ã<br>
å§ç»æå¿åªå¤©ä¼è¢«æ»å»ï¼å ä¸ºæç NASãåç½æå¡å®å¨æ¯å¨äºèç½ä¸<strong>âè£¸å¥â</strong>ãè¿å°±å¥½æ¯æåºé¨ä¸ç­ï¼å®¶éå¤§é¨ä¸ä»æ²¡éï¼çè³è¿é¨é½å¸äºï¼è°è·¯è¿é½è½å¾éçä¸ç¼ã<br>
èä¸è¿æ¹æ¡æå¶é¾ç¨ï¼å¬å¸åæå·´åç WiFi å¤§å¤è¿æ¯çº¯ IPv4 ç¯å¢ï¼å¯¼è´æå¨å¤é¢æ³è¿åå®¶ï¼è¿å¾åæææº WiFi æ­äºåæ 5Gã<strong>é£ä¸å»ï¼ææè§èªå·±åä¸ªæ¿çæºè½ææºçåå§äººã</strong></p>
<h2 id="ç¬¬ä¸ç« cloudflare-tunnel-ææçå½">ç¬¬ä¸ç« ï¼Cloudflare Tunnel ææçå½</h2>
<p>è¿ç§âè£¸å¥âä¸âä¾¿ç§âçæ¥å­ï¼æå¿å°äºåå å¤©ï¼ç»äºå³å®å¯¹æ¶æè¿è¡éæãé¦åç»åºçæ¯ <strong>Cloudflare Tunnel</strong>ï¼ç»åç½ç©¿æ¡è£¤å­ã</p>
<h3 id="-ç®è¦æ­¥éª¤">ð¨âð» ç®è¦æ­¥éª¤</h3>
<p>å¶å®è¿ç©æå¿éç½®èµ·æ¥æå¤å°ç®åï¼æ ¸å¿å°±ä¸æ­¥ï¼</p>
<ol>
<li><strong>æä¸ªååï¼</strong> æ¥å·¨èµï¼47åé±ä¸å¹´ï¼å¨spaceshipåä¹°äºä¸ªååï¼æç®¡å° Cloudflareã</li>
<li><strong>åç½é¨ç½²å®æ¤è¿ç¨ï¼</strong> å¨å®¶éç Mac Miniï¼æè NASï¼ä¸è£ä¸ª <code>cloudflared</code> æå¡ãè¿ç©æå¿å°±åä¸ªâå°éæææºâï¼ä¸»å¨å Cloudflare çæå¡å¨ææ´ã</li>
<li><strong>äºç«¯éç½®ï¼</strong> ç»å½ Cloudflare Zero Trust åå°ï¼å¨å¨é¼ æ ï¼æ <code>nas.mydomain.com</code> æååç½ç <code>http://192.168.31.199:5000</code>ã</li>
</ol>
<h3 id="-ææç«ç«¿è§å½±">ð ææç«ç«¿è§å½±</h3>
<ul>
<li><strong>ä¸ç¨å³é²ç«å¢äºï¼</strong> æèµ¶ç´§æå°ç±³é£ä¸ªâäººå·¥æºéâé²ç«å¢éæ°æå¼ï¼å¿éè¸å®å¤äºã</li>
<li><strong>å¼å®¹æ§æ æï¼</strong> å®å°±åä¸ªç¿»è¯å®ï¼æå¨å¤é¢å°±ç®ç¨åªæ IPv4 çç ´ç WiFiï¼ä¹è½éè¿ååé¡ºçè®¿é®å®¶éçæå¡ã(ä¸å¾ä¸è¯´CFçå®å¤§åäººåï¼åè´¹åè½é½è´¼å¤è´¼å¥½ç¨ï¼)<br>
<img src="https://img2024.cnblogs.com/blog/2482940/202512/2482940-20251224223703831-1192856318.png" alt="image" width="1477" height="600" loading="lazy"></li>
</ul>
<h2 id="ç¬¬åç« ææ»¡å¸¦å®½tailscale--æ¸¸æ">ç¬¬åç« ï¼ææ»¡å¸¦å®½ï¼Tailscale &amp; æ¸¸æï¼</h2>
<p>CF Tunnel è½ç¶ç¨³ï¼ä½æ¯ç«è¦ç»éå«äººçæå¡å¨ï¼ä¼ å¤§æä»¶æç¹æ¸©åæ°´ãå§ç»è¾¾ä¸å°åæ¥å¬ç½IPV6çéåº¦ï¼èä¸ï¼æè¿å¿éé¿èæ³æ <strong>è¿ç¨æ¸¸æä¸²æµ</strong>ãäºæ¯æåç¯ä¸äº <strong>Tailscale</strong>ã</p>
<h3 id="-ç®è¦æ­¥éª¤-1">ð¨âð» ç®è¦æ­¥éª¤</h3>
<p>Tailscale ä¸»æä¸ä¸ªâæ æâï¼ä½è¦ç©å¾å¥½ï¼å¾ç¨ç¹é­æ³ï¼</p>
<ol>
<li><strong>å¨åå®è£ï¼</strong> Mac MiniãææºãiPad å¨é¨è£ä¸ Tailscale å®¢æ·ç«¯å¹¶ç»å½ã</li>
<li><strong>å¼å¯å­ç½è·¯ç± (Subnet Router)ï¼</strong> è¿æ¯å³é®ãæå¨ Mac Mini çç»ç«¯æ²äºä¸è¡å½ä»¤ <code>advertise-routes=192.168.31.0/24</code>ãè¿ç¸å½äºåè¯ Tailscaleï¼âå»å¾æå®¶åç½çè·¯ï¼æçï¼å¤§å®¶æååç»æå°±è¡ãâ</li>
<li><strong>å®¢æ·ç«¯è®¾ç½®ï¼</strong> å¨ææº App éï¼æä¸ªèå¾å¾æ·±çå¼å³å« <strong>"Use Subnets"</strong>ï¼å¿é¡»æå®æå¼ï¼å¦åææºè¿æ¯ä¼å»å»å°èµ°æ¬å°ç½ç»ã</li>
</ol>
<p>è¿ä¸è¯ä¸è¦ç´§ï¼ç´æ¥æå¼äºæ°ä¸ççå¤§é¨ãææè®¶å°åç°ï¼<strong>Tailscale å±ç¶è½ç©¿éå°ç±³çé²ç«å¢ï¼</strong>å³ä½¿æå¼çé²ç«å¢ï¼åªè¦ä¸¤å¤´é½æ IPv6ï¼å®ä¿©ç«ç¶è½ç§ä¸é<strong>âææ´â</strong>æåï¼å»ºç« P2P ç´è¿ã<br>
<img src="https://img2024.cnblogs.com/blog/2482940/202512/2482940-20251224224255559-841000158.png" alt="image" width="1443" height="629" loading="lazy"></p>
<h3 id="-æ¸¸æä¸²æµéç½®-moonlight">ð® æ¸¸æä¸²æµéç½® (Moonlight)</h3>
<ul>
<li><strong>æå¡ç«¯ï¼</strong> PC å®è£ <strong>Sunshine</strong>ï¼æ¿ä»£èé»ç GameStreamï¼ï¼è®¾ç½®å¥½ç¨æ·åå¯ç ã</li>
<li><strong>å®¢æ·ç«¯ï¼</strong> ææºè£ <strong>Moonlight</strong>ï¼æå° PC åè¾ä¸ª PIN ç éå¯¹ã</li>
<li><strong>è°ä¼ï¼</strong> èèå°å®¶éä¸è¡å¸¦å®½åªæ 50Mï¼ææç çéæ­»å¨ <strong>60Mbps</strong>ï¼å¹¶å¼ºå¶å¼å¯ <strong>HEVC (H.265)</strong> ç¼ç ã</li>
</ul>
<p>å®æµå»¶è¿ 40msãå¨å¤ç´æ¥ä¸²æµåå®¶ï¼å¯¹æ¯Windowsèªå¸¦çè¿ç¨å·¥å·æµçåº¦ç®ç´å¥½å°é£èµ·ã</p>
<h2 id="ç¬¬äºç« æåçå¼ºè¿«çæ¶ç­-19216831x">ç¬¬äºç« ï¼æåçå¼ºè¿«çï¼æ¶ç­ 192.168.31.xï¼</h2>
<p>ææçææ¯é®é¢é½è§£å³äºï¼æåä¸ä¸ªæ½è±¡å¤§åç«ç¶æ¯ââ<strong>IP å²çª</strong>ã</p>
<p>å ä¸ºå°ç±³è·¯ç±é»è®¤ç½æ®µæ¯ <code>192.168.31.x</code>ï¼å¤é¢å¾å¤å¬å± WiFi ä¹æ¯è¿ä¸ªç½æ®µãç»å¸¸åºç°âæå¨å¤é¢è¿åå®¶ï¼ç³»ç»ä»¥ä¸ºæå¨è®¿é®æ¬å°âçè·¯ç±éä¹±ï¼å¯¼è´TailScaleæ æ³æ­£å¸¸èéã</p>
<p>ä¸ä¸åäºä¸ä¼ï¼æ¢ç¶æè¾äºï¼å°±æè¾å°åºãææå¨å®¶ç½æ®µè¿ç§»å°äºå·é¨ç <strong><code>192.168.81.x</code></strong>ã</p>
<blockquote>
<p><strong>â ï¸ é«å±æä½è­¦åï¼</strong><br>
å¨æ¹è·¯ç±å¨ IP ä¹åï¼<strong>è®°å¾ä¸å®è¦åæ NAS åæå¡å¨çéæ IP è§£ç»æ¹æ DHCPï¼OpenWrtãDockerç­éç½®äºåºå®ipçæå¡ä¹è¦è®°å¾ä¿®æ¹</strong> ãä¸ç¶å°±æ¯æ­ç½æ¨æ¡ï¼å¾æççµèãç½çº¿å»å¼±çµç®±éæç«ã</p>
</blockquote>
<hr>
<h2 id="ç°å¨çç¶æ">ç°å¨çç¶æ</h2>
<p>ç»è¿è¿å å¤©çç¯çæè¾ï¼ç°å¨çæ¶ææ¯ï¼</p>
<ul>
<li><strong>å®å¨ï¼</strong> å°ç±³é²ç«å¢å¨å¼ï¼ä¸åè£¸å¥ã</li>
<li><strong>å¥å£ï¼</strong>
<ul>
<li><strong>æ¥å¸¸è®¿é® (Web)ï¼</strong> èµ° Cloudflare Tunnelï¼å¨ç½éåã</li>
<li><strong>é«æ§è½è®¿é® (æ¸¸æ/ä¼ è¾)ï¼</strong> èµ° Tailscale IPv6 ç´è¿ï¼éåº¦ææ»¡ã</li>
</ul>
</li>
<li><strong>å¿æï¼</strong> æåº¦èéã</li>
</ul>
<p>è½ç¶å¤±å»äºå¬ç½ IPv4 å¾é¾åï¼ä½é¼çèªå·±æåºäºè¿ä¸å¥æ´ç°ä»£ãæ´å®å¨çæ¹æ¡ï¼ä¹ç®æ¯<strong>å ç¥¸å¾ç¦</strong>å§ãæè¾æ æ­¢å¢ï¼çå½ä¸æ¯ï¼æåä¸æ­¢ï¼</p>
<blockquote>
<p>å¤§å®¶å¦æå¯¹æ­¤æå´è¶£ææçé®çè¯ï¼æ¬¢è¿è¯è®ºçè¨ï¼æç©ºæåç¬åä¸äºæ´è¯¦ç»çæè¾æç¨ã</p>
</blockquote>

</div>
<div id="MySignature" role="contentinfo">
    <p><br>
æ¬åå®¢æç« åå·²æµè¯éªè¯ï¼æ¬¢è¿è¯è®ºãäº¤æµãç¹èµã<br>
é¨åæç« æ¥æºäºç½ç»ï¼å¦æä¾µæè¯·èç³»å é¤ã<br>
è½¬è½½è¯·æ³¨æåæé¾æ¥ï¼<a href="https://www.cnblogs.com/sueyyyy/p/19394875" target="_blank">https://www.cnblogs.com/sueyyyy/p/19394875</a></p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.005555555555555556" data-date-updated="2025-12-24 23:12">2025-12-24 23:04</span>&nbsp;
<a href="https://www.cnblogs.com/sueyyyy">å°è¯´ç¹è¯</a>&nbsp;
éè¯»(<span id="post_view_count">365</span>)&nbsp;
è¯è®º(<span id="post_comment_count">7</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19394875);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19394875', targetLink: 'https://www.cnblogs.com/sueyyyy/p/19394875', title: 'çµä¿¡å¬ç½IPV4è¢«æ¶åä¹åï¼å®¶åº­ç½ç»çâç»å°æ±çâæè¾è®°' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ èªéåºæ»¤æ³¢ç®æ³çFPGAå®ç°æè·¯ ]]></title>
    <link>https://www.cnblogs.com/y0011/p/19394755/bugao123</link>
    <guid>29fb21ce85634893a4140337a473703d</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/y0011/p/19394755/bugao123" title="åå¸äº 2025-12-24 22:50">
    <span role="heading" aria-level="2">èªéåºæ»¤æ³¢ç®æ³çFPGAå®ç°æè·¯</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h1><span style="font-size: 18px; font-family: é»ä½, &quot;Heiti SC&quot;">1ãåçç®ä»</span></h1>
<span style="font-family: å®ä½, &quot;Songti SC&quot;">ã<span style="font-size: 16px">ãåèç¸å³è®ºæï¼èªéåºæ»¤æ³¢å¨ä¸»è¦ç±FIRæ»¤æ³¢å¨æ¬ä½ãåæ°èªéåºè®¡ç®ä¸¤é¨åç»æãåæ°èªéåºè®¡ç®é¨åæ¯ç¨æ¥è¿­ä»£è®¡ç®æ»¤æ³¢å¨ç³»æ°çï¼å®çè¾å¥æ¯ææä¼°è®¡è¯¯å·®fãåå§æ°æ®éæ ·ä¿å­çåéUï¼è¾åºæ¯å¯åçFIRæ»¤æ³¢å¨ç³»æ°ãFIRæ»¤æ³¢å¨å°±æ¯ä¼ ç»çæéå²å»ååºæ»¤æ³¢å¨ï¼å¯ä»¥æ¯ä½éãé«éç­ç±»åãæè°æ»¤æ³¢å¨ç³»æ°å¯åï¼æçæ¯èªéåºç®æ³æ ¹æ®å¨æååçææä¼°è®¡è¯¯å·®fåè¾å¥åéUï¼ä¸åå°è¿è¡è¿­ä»£åæ´æ°FIRæ»¤æ³¢å¨ç³»æ°ãæäºèªéåºç®æ³ï¼FIRæ»¤æ³¢å¨å¯¹å¨æè¯¯å·®çååºä¼æ´å¿«ï¼çè®ºä¸åªå£°æå¶ææä¹æ´å¥½ã</span></span>
<p><img alt="image" loading="lazy" style="display: block; margin-left: auto; margin-right: auto" data-src="https://img2024.cnblogs.com/blog/2322209/202512/2322209-20251224223415195-1931702816.png" class="lazyload"></p>
<p style="text-align: center">å¾1 èªéåºæ»¤æ³¢å¨æ¶æ</p>
<p>ã<span style="font-size: 16px; font-family: å®ä½, &quot;Songti SC&quot;">ãèªéåºç®æ³æå¾å¤ç§ï¼å¶ä¸­LMSæå°åæ¹å·®èªéåºæ»¤æ³¢ç®æ³è®¡ç®éæ¯è¾å°ï¼æä»¥æéæ©å®ç¨å¨èªå·±çé¡¹ç®éã</span></p>
<p><span style="font-size: 16px; font-family: å®ä½, &quot;Songti SC&quot;">ããLMSèªéåºç®æ³å¬å¼ï¼</span></p>
<p>ãã<img alt="image" width="310" height="34" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2322209/202512/2322209-20251224223537551-730873467.png" class="lazyload"></p>
<p><span style="font-size: 16px; font-family: å®ä½, &quot;Songti SC&quot;">ããå¬å¼éç</span><img alt="image" width="28" height="19" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2322209/202512/2322209-20251224223627724-605275007.png" class="lazyload"><span style="font-size: 16px; font-family: å®ä½, &quot;Songti SC&quot;">å°±æ¯éè¦ä¸æ­è¿­ä»£çæ»¤æ³¢å¨ç³»æ°ï¼Mç»´åéï¼cåré½æ¯å¸¸æ°ï¼UTè¡¨ç¤ºUçè½¬ç½®ä¹æ¯Mç»´çåéï¼å¶ä»ç¬¦å·å¨å¾éé¢å·²ç»æ¯è¾æ¸æ¥ã</span><span style="font-size: 16px; font-family: å®ä½, &quot;Songti SC&quot;">è¿æ¯ä¸ç§å¯åæ´æ°æ­¥é¿çç®æ³ï¼å ä¸ºU<sup>T</sup>Uæ¯ååçã</span></p>
<p><span style="font-size: 16px; font-family: å®ä½, &quot;Songti SC&quot;">ããå¦æç¨åºå®æ­¥é¿ç®æ³ï¼é£ä¹å¬å¼å°±æ¯ï¼</span></p>
<p>ãã<img alt="image" width="247" height="19" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2322209/202512/2322209-20251224223840589-373588386.png" class="lazyload"></p>
<p><span style="font-size: 16px; font-family: å®ä½, &quot;Songti SC&quot;">ããè¿éé¢çhå°±æ¯æ­¥é¿ï¼ç¸å½äºæ¯ä¸ä¸ªåºå®çç³»æ°ã</span></p>
<p><span style="font-size: 16px; font-family: å®ä½, &quot;Songti SC&quot;">ããå¯åæ­¥é¿ç®æ³çå¥½å¤æ¯æ¶æå¿«ï¼æ»¤æ³¢å¨å»¶æ¶æ´å°ã</span></p>
<h1><span style="font-size: 18px">2ãå®ç°æµç¨</span></h1>
<p><span style="font-size: 16px; font-family: å®ä½, &quot;Songti SC&quot;">ããæç½äºåçï¼ä¸é¢åè®¾è®¡æ»¤æ³¢å¨çverilogå®ç°æ¹æ¡ã</span></p>
<p><span style="font-size: 16px; font-family: å®ä½, &quot;Songti SC&quot;">ããåæåé¢ç¬¬1ä¸ªå¬å¼ï¼æå æ³ãä¹æ³ãé¤æ³ï¼è¿æMç»´çåéãåè¿FPGAç®æ³çå¼åèåºè¯¥æä½ä¼ï¼åéåç©éµè®¡ç®å¨verilogéé¢ä¸å¤ªå¥½å®ç°ï¼ä¸è¬ä¼æå®è½¬åæåä¸ªåç´ çè®¡ç®ï¼ä¸ç¶ä¼å ç¨å¤ªå¤èµæºï¼æ¢ç§è¯´æ³å°±æ¯è¦æå¹¶è¡è®¡ç®æ¶æè½¬ææµæ°´çº¿å½¢å¼çè®¡ç®æ¶æãè¿éé¢è¿éè¦å³æ³¨çæ¯åæ°åéB(n)åè¾å¥åéU(n)ï¼å¦ä½è¡¨ç¤ºè¿ä¸¤ä¸ªå¨æååçåéï¼è¿æå°±æ¯å¦ä½è®¡ç®</span><img alt="image" width="30" height="19" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2322209/202512/2322209-20251224224406735-1867631142.png" class="lazyload">ã</p>
<p><span style="font-size: 16px; font-family: å®ä½, &quot;Songti SC&quot;">ããæéæ©ç¨FIFOè¡¨ç¤ºåé¢æå°çå ä¸ªMç»´åéï¼éè¦è®¡ç®æ¶å°±è¯»FIFOä¸­çæ°æ®ï¼è®¡ç®å®æä¹åæ´æ°FIFOãè³äº</span><img alt="image" width="30" height="19" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2322209/202512/2322209-20251224224204978-206877411.png" class="lazyload">&nbsp;<span style="font-size: 16px; font-family: å®ä½, &quot;Songti SC&quot;">ï¼æå¨æ¨å¯¼åå¯ä»¥çåºå®å¶å®å°±æ¯åéååç´ çå¹³æ¹åï¼å æ­¤ä¹å¯ä»¥ç¨FIFOéè¿ä¸æ­ç¼å­</span><img alt="image" width="39" height="21" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2322209/202512/2322209-20251224224244017-2033218557.png" class="lazyload"><span style="font-size: 16px; font-family: å®ä½, &quot;Songti SC&quot;">ä»¥åå¨æç´¯å çæ¹å¼å®ç°ã</span></p>
<p><span style="font-size: 16px; font-family: å®ä½, &quot;Songti SC&quot;">ããåºäºFIFOçèªéåºç®æ³æ¶æå¦ä¸å¾æç¤ºã</span></p>
<p>ãã</p>
<p><img alt="image" loading="lazy" style="display: block; margin-left: auto; margin-right: auto" data-src="https://img2024.cnblogs.com/blog/2322209/202512/2322209-20251224224011120-1768833243.png" class="lazyload"></p>
<p>&nbsp;</p>
<p><span style="font-size: 16px; font-family: å®ä½, &quot;Songti SC&quot;">ããå¾çç»çä¸å¤ªç®æ´ï¼ç¨æå­æè¿°ä¸ä¸å¨FPGAä¸­å®ç°çè¿ç¨ã</span></p>
<p><span style="font-size: 16px; font-family: å®ä½, &quot;Songti SC&quot;">ããç¬¬ä¸æ­¥ï¼ç³»ç»å¤ä½ååå¯¹<strong>FIFOA1</strong>å<strong>FIFOB1</strong>åå§åï¼ä¹å°±æ¯åç¼å­å¾å°ä¸ç»åéBååéUã</span></p>
<p><span style="font-size: 16px; font-family: å®ä½, &quot;Songti SC&quot;">ããç¬¬äºæ­¥ï¼åå§åç»æåï¼ç­å¾è¾å¥æ°æ®ï¼æ»¤æ³¢åï¼uåæ»¤æ³¢åæ°æ®u1æ´æ°ï¼ç¶åFIFOCtrlBæ¨¡åè¯»FIFOA1çæ°æ®å¹¶åä¸è®¡ç®æµæ°´çº¿ï¼å¨æç´¯å æ¨¡åè¯»FIFOCä»¥åæ°è¾å¥æ°æ®å®æç´¯å å¼æ´æ°å¹¶åä¸è®¡ç®æµæ°´çº¿ï¼FIFOCTRLUæ¨¡åè¯»FIFOB1æ°æ®åä¸è®¡ç®æµæ°´çº¿ã</span></p>
<p><span style="font-size: 16px; font-family: å®ä½, &quot;Songti SC&quot;">ããç¬¬ä¸æ­¥ï¼è®¡ç®æµæ°´çº¿å®æä¹æ³ãå æ³å¨é¨è®¡ç®è¿ç¨ï¼å¾å°ä¸ä¸ªæ°çåæ°B(n+1)ï¼FIFOCtrlBæè¿ä¸ªæ°åæ°åå¥FIFOA2ï¼ä»¥ä¾ä¸ä¸è½®è®¡ç®ä½¿ç¨ï¼åæ¶FIFOCTRLUæ¨¡åæä¸ä¸æ­¥åä¸è®¡ç®æµæ°´çº¿çæ°æ®åå¥FIFOB2ï¼ä¹æ¯ä¸ºäºä¸ä¸è½®æ¬¡è®¡ç®ä½¿ç¨ãç´å°FIFOA1ä¸­çåæ°è¯»å®äºä¹å°±æ¯è®¡ç®å®äºï¼ä¸æ­¤åæ¶FIFOB1ä¹è¢«è¯»ç©ºäºï¼ç¸åºçFIFOA2ãFIFOB2ä¹é½åå®æäºï¼è¿ä¸è½®è®¡ç®ç»æã</span></p>
<p><span style="font-size: 16px; font-family: å®ä½, &quot;Songti SC&quot;">ããä¸ä¸è½®è®¡ç®æ¶ï¼FIFOA1åFIFOA2äºæ¢è¯»åæ¬¡åºï¼FIFOB1ãFIFOB2äºæ¢è¯»åæ¬¡åºãå¾ªç¯å¾å¤ã</span></p>
<p><span style="font-size: 16px; font-family: å®ä½, &quot;Songti SC&quot;">ããç±äºåé½æ¯å¸¸æ°ï¼å æ­¤ä»£å¥å¸¸æ°åå°±çæäºé¤æ³å¨ï¼ç¨ä¹æ³ä»£æ¿ã</span></p>
<p><span style="font-size: 16px; font-family: å®ä½, &quot;Songti SC&quot;">ããèªéåºç®æ³æ¯æ»¤æ³¢å¨ææ ¸å¿æé¾çé¨åï¼æè¿é¨åçè¾åºç´æ¥æ¥å¥FIRæ»¤æ³¢å¨ï¼å°±å¯ä»¥å®ç°äºèªéåºFIRæ»¤æ³¢ãè³äºFIRæ»¤æ³¢å¨ï¼ç¨IPæ ¸å°±å¯ä»¥ï¼ä¸éè¦èªè¡è®¾è®¡ãå½ç¶ä¹å¯ä»¥èªå·±ç¨é»è¾åå æ³å¨ãä¹æ³å¨æ­å»ºFIRæ»¤æ³¢å¨ï¼è¿æ ·å¯æ§æ§æ´å¥½ï¼ä¸ç¶è¿è¦å»çè§£FIRçIPæ ¸çæ¥å£ååæ°çå«ä¹ï¼ä¹æºè´¹äºçã</span></p>
<p><span style="font-size: 16px; font-family: å®ä½, &quot;Songti SC&quot;">ããç®åå·²ç»æç§è¿ä¸ªæµç¨åå¥½äºverilogé»è¾ï¼åé¢ä¼ä»¿çæµè¯ï¼ä¸MATLABè®¡ç®çç»ææ¯è¾ä¸ä¸ï¼éªè¯è®¾è®¡æ¯å¦æ­£ç¡®ã</span></p>
</div>
<div id="MySignature" role="contentinfo">
    <p>æ¬ææ¥èªåå®¢å­ï¼ä½èï¼<a href="https://www.cnblogs.com/y0011/" target="_blank">ä¸é«å·¥ç¨å¸</a>ï¼è½¬è½½è¯·æ³¨æåæé¾æ¥ï¼<a href="https://www.cnblogs.com/y0011/p/19394755/bugao123" target="_blank">https://www.cnblogs.com/y0011/p/19394755/bugao123</a></p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.00625" data-date-updated="2025-12-24 22:59">2025-12-24 22:50</span>&nbsp;
<a href="https://www.cnblogs.com/y0011">ä¸é«å·¥ç¨å¸</a>&nbsp;
éè¯»(<span id="post_view_count">40</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19394755);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19394755', targetLink: 'https://www.cnblogs.com/y0011/p/19394755/bugao123', title: 'èªéåºæ»¤æ³¢ç®æ³çFPGAå®ç°æè·¯' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
        </channel>
        </rss>