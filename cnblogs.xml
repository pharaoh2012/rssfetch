<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åå®¢å­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2025-12-25T08:23:33.605Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åå®¢å­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ Webæ»é²-éªè¯ç å®å¨ç¯&æ¥å£æ»¥ç¨&è¯å«æä»¶&å¤ç¨ç»è¿ ]]></title>
    <link>https://www.cnblogs.com/Kurisu-Christina/p/19399846</link>
    <guid>db0efb850b6ab3b0468e50ae3c50eee7</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Kurisu-Christina/p/19399846" title="åå¸äº 2025-12-25 16:20">
    <span role="heading" aria-level="2">Webæ»é²-éªè¯ç å®å¨ç¯&amp;æ¥å£æ»¥ç¨&amp;è¯å«æä»¶&amp;å¤ç¨ç»è¿</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1>Webæ»é²-éªè¯ç å®å¨ç¯&amp;æ¥å£æ»¥ç¨&amp;è¯å«æä»¶&amp;å¤ç¨ç»è¿</h1><h3><a id="iTOTi"></a>ç¥è¯ç¹ï¼</h3><a id="u567a5017"></a><p>å¾çéªè¯ç -è¯å«æä»¶-ç»éçç ´&amp;æ¥å£æä¸¾</p><a id="u573b261c"></a><p>å¾çéªè¯ç -éå¤ä½¿ç¨-æAPPç­ä¿¡æ¥å£æ»¥ç¨</p><a id="QGYVL"></a><h2>ä¸ãå¾çéªè¯ç -è¯å«æä»¶-ç»éçç ´&amp;æ¥å£æä¸¾</h2><a id="hVGov"></a><p>éªè¯ç è¯å«ç»è¿ç­ææ¯éç¨äºï¼<br>å£ä»¤å­å¨çç ´ï¼æ¥å£æä¸¾è°ç¨ï¼ä»»æç¨æ·æ³¨åç­å®å¨é®é¢<br>éªè¯ç ç®åæºå¶-éªè¯ç è¿äºç®åå¯çç ´<br>éªè¯ç éå¤ä½¿ç¨-éªè¯ç éªè¯æºå¶å¯ç»è¿<br>éªè¯ç æºè½è¯å«-éªè¯ç å¾å½¢ç è¢«å¯è¯å«<br>éªè¯ç æ¥å£è°ç¨-éªè¯ç è§¦åæ¥å£å¯æä¸¾<br></p><a id="u85417f12"></a><p>æä»¶ä¸è¬å¯è¯å«çéªè¯ç é½æ¯è¾ææ¾å¥½è¯å«ï¼å¦æäººå·¥é½é¾ä»¥è¯å«ï¼é£ä¹æä»¶ä¸è¬å°±è¯å«ä¸äºäº</p><a id="ua3804699"></a><p><a id="u40d6e9fe"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162005031-1116227502.jpg"></p><a id="u3d4b9fdc"></a><p><a id="u61036382"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162005032-625705981.jpg"></p><a id="uaf985f44"></a><p>éªè¯ç å°åä¸è¬å¨F12æ¶é½ä¼çå°ï¼ç´æ¥è®¿é®å°±å¥½äº</p><a id="u06428d01"></a><p><a id="u811a4db2"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162005044-1455898389.jpg"></p><a id="dBGEK"></a><h3>ç»å½çç ´</h3><a id="WNKnF"></a><p>èªå¸¦ç½å«çï¼https://github.com/smxiazi/NEW_xp_CAPTCHA<br>1ãBurpå è½½æä»¶<br>2ãè¿è¡çå¬pyæä»¶<br>3ãè®¾ç½®æä»¶-éªè¯ç å°å<br>4ãæ°æ®åéªè¯ç å¡«å¥åæ°<br>5ãååçº¿ç¨è®¾ç½®1åå¼å§<br>æ¥å£æ¶è´¹çï¼https://github.com/smxiazi/xp_CAPTCHA<br>1ãBurpå è½½æä»¶<br>2ãæ³¨åæ¥å£å¸å·åå¼<br>3ãè®¾ç½®æä»¶-å¡«å¥å¸å·<br>4ãæ°æ®åéªè¯ç å¡«å¥åæ°<br>5ãååçº¿ç¨è®¾ç½®1åå¼å§<br></p><a id="HAWm2"></a><h4>èªå¸¦ç½å«ç</h4><a id="u076b03f6"></a><p>èæ¯ï¼è¦çç ´ä¸ä¸ªç»éçé¢çå¯ç ï¼å¹¶ä¸ä¼´éçéªè¯ç </p><a id="u9232e39f"></a><p>åå¨burpsuiteå¯¼å¥xia Paoæä»¶</p><a id="u903484db"></a><p><a id="u9c1b4aee"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162005133-938291717.jpg"></p><a id="u07b5f75a"></a><p>è¿è¡ç¨æ¥çå¬çpyæä»¶</p><a id="ubdf64903"></a><p><a id="u4d943952"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162004513-471419509.jpg"></p><a id="u6e35aae3"></a><p><a id="u3141bc3c"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162005014-1965344876.jpg"></p><a id="u64f3628e"></a><p><a id="u77def724"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162004503-1849766720.jpg"></p><a id="u9e67bf91"></a><p>è®¿é®æ¬å°8899ç«¯å£å¦ä¸ï¼</p><a id="u0fe724e2"></a><p><a id="u014ba556"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162004642-296406101.png"></p><a id="u02641c37"></a><p>ç¹å»ç»éæå</p><a id="u4c357df3"></a><p><a id="uaaf157cd"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162004550-1322353733.png"></p><a id="u421669cf"></a><p><a id="ubf33b2ac"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162004757-1175309258.jpg"></p><a id="u5c2cc569"></a><p><a id="u1c6f4ad8"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162004591-1638342338.jpg"></p><a id="ua0acbc6b"></a><p>ååçº¿ç¨è¦è®¾ç½®æ1ï¼å ä¸ºä¸ä¸ªéªè¯ç åªå¯¹åºä¸æ¬¡ç»å½ï¼</p><a id="u0e845c90"></a><p><a id="ue18ed941"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162004619-678640211.png"></p><a id="uf4435df4"></a><p>ç»æçé¿åº¦æ¯è¾</p><a id="ufda5ee3c"></a><p><a id="u8b7662fb"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162004553-1545908752.jpg"></p><a id="u00610ec1"></a><p><a id="u97889ce7"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162004647-829401766.jpg"></p><a id="uf7d4bb80"></a><a id="u6ed2f0e8"></a><p><a id="u04e7704a"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162004706-369647329.jpg"></p><a id="Sfdzh"></a><h4>æ¥å£æ¶è´¹ç</h4><a id="u8964963b"></a><p>åç½å«ççåºå«æ¯ä¸ç¨è®¾ç½®èªå·±çwebç«¯ï¼ç´æ¥ç¨æ¶è´¹çapiæ¥å£</p><a id="udc66b227"></a><p><a id="ud9207123"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162004640-723642622.jpg"></p><a id="u0b7cdb88"></a><p>æ³¨åæ¥å£è´¦å·åå¼</p><a id="u2d3e0c28"></a><p><a id="ud16174c7"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162005039-328817678.png"></p><a id="u5234b8b0"></a><p>è®¾ç½®æä»¶å¡«å¥è´¦å·å¯ç </p><a id="u29c4a091"></a><p><a id="uab3bf438"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162004815-1205628502.jpg"></p><a id="u2fc07aa8"></a><p><a id="u6979c8f6"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162004820-1708250927.jpg"></p><a id="ua9588e5b"></a><p>ä¹åçæä½åç½å«ççä¸æ ·</p><a id="u91471507"></a><a id="JhPTr"></a><h3>æ¥å£æä¸¾</h3><a id="u4718eea0"></a><p><a id="u1fc0adf2"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162004705-1522495131.jpg"></p><a id="u63055ff3"></a><p><a id="ufec5872e"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162004774-291662458.jpg"></p><a id="ud568e2a4"></a><p><a id="uc6a7ded4"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162005077-1980156999.jpg"></p><a id="uc27794e7"></a><p>å¦æå¾å½¢éªè¯ç è½å¤æ¹éè¯å«ï¼é£ä¹æ¯ä¸æ¯å°±ä¼å­å¨ç­ä¿¡è½°ç¸é£é©</p><a id="ue1d1cab6"></a><p>å¤å¶éªè¯ç å°åï¼å¹¶ä½¿ç¨bpè¯å«æä»¶è¿è¡çç ´</p><a id="u77b9958f"></a><p><a id="u3602110e"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162004797-922517630.jpg"></p><a id="u98e54061"></a><p><a id="u2d05831a"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162005064-134921660.png"></p><a id="u9b16cf94"></a><p><a id="ue12b6ac1"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162005076-583996366.jpg"></p><a id="u75046bf6"></a><p><a id="u72926567"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162005046-2143420325.jpg"></p><a id="u0a3fe315"></a><p><a id="u0087ba76"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162005036-1678249222.png"></p><a id="u114fa496"></a><p><a id="u9b6aa647"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162005016-1670535132.jpg"></p><a id="ua6f709bd"></a><a id="u29a6a4bd"></a><a id="WR1rX"></a><h2>äºãå¾çéªè¯ç -éå¤ä½¿ç¨-æAPPç­ä¿¡æ¥å£æ»¥ç¨</h2><a id="u8962ab6c"></a><p><a id="u11ca6da7"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162005014-774545068.png"></p><a id="uf1e670c1"></a><p><a id="u650fc436"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162005090-821222588.jpg"></p><a id="u4a86fc8c"></a><p>æè§å¯è½æ¯keyå¼å¯¼è´æä»¬ä¹è½åä¸¤æ¬¡ï¼é£æä»¬ækeyå æå¢</p><a id="u3cf2474c"></a><p><a id="u7c64e85d"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162005098-169656848.jpg"></p><a id="u17e999d7"></a><p><a id="u3ddfe16c"></a><img src="https://img2024.cnblogs.com/blog/3723860/202512/3723860-20251225162005088-1214899417.jpg"></p><a id="fVXiQ"></a><a id="u232145b7"></a>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-25 16:20">2025-12-25 16:20</span>&nbsp;
<a href="https://www.cnblogs.com/Kurisu-Christina">ç«ä¸åºé¥­</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19399846);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19399846', targetLink: 'https://www.cnblogs.com/Kurisu-Christina/p/19399846', title: 'Webæ»é²-éªè¯ç å®å¨ç¯&amp;amp;æ¥å£æ»¥ç¨&amp;amp;è¯å«æä»¶&amp;amp;å¤ç¨ç»è¿' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ åå«âè£¸å¥âä»£ç ï¼ç¨ Pydantic è®©ä½ ç Python æ°æ®åºè¥éæ±¤ ]]></title>
    <link>https://www.cnblogs.com/swizard/p/19399472</link>
    <guid>80eb9698ce0cc592cedb87feb576ed87</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/swizard/p/19399472" title="åå¸äº 2025-12-25 15:30">
    <span role="heading" aria-level="2">åå«âè£¸å¥âä»£ç ï¼ç¨ Pydantic è®©ä½ ç Python æ°æ®åºè¥éæ±¤</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h3 data-path-to-node="3">1. å¼è¨ï¼ç±âä¿¡ä»»âå¼åçè¡æ¡</h3>
<p data-path-to-node="4">ä½ä¸º Python å¼åèï¼ä½ ä¸å®ç»åè¿è¿æ ·ç<strong data-path-to-node="4" data-index-in-node="23">è³ææ¶å»</strong>ï¼</p>
<p data-path-to-node="5">ä½ æ­£å¨åä¸ä¸ªå¤çåç«¯ API æ°æ®çèæ¬ãåç«¯åè¯ä½ ï¼âæ¾å¿ï¼æä¼ä¼ ç»ä½ ä¸ä¸ªåå«ç¨æ· ID åå¹´é¾ç JSONãâ äºæ¯ä½ èªä¿¡å°åä¸ï¼</p>
<div class="code-block ng-tns-c3098535048-364 ng-animate-disabled ng-trigger ng-trigger-codeBlockRevealAnimation" data-hveid="0" data-ved="0CAAQhtANahgKEwjEu6WF_9ORAxUAAAAAHQAAAAAQsAk">
<div class="code-block-decoration header-formatted gds-title-s ng-tns-c3098535048-364 ng-star-inserted"><span class="ng-tns-c3098535048-364">Python</span>
<div class="buttons ng-tns-c3098535048-364 ng-star-inserted">&nbsp;</div>
</div>
<div class="formatted-code-block-internal-container ng-tns-c3098535048-364">
<div class="animated-opacity ng-tns-c3098535048-364">
<pre class="ng-tns-c3098535048-364 highlighter-hljs"><code>def process_user(data):
    # ç´æ¥è£¸è¯»å­å¸
    user_id = data['id'] 
    age = data['age'] + 1
    print(f"ç¨æ· {user_id} æå¹´ {age} å²")</code></pre>
</div>
</div>
</div>
<p data-path-to-node="7">ä»£ç ä¸çº¿ç¬¬ä¸å¤©ï¼å´©æºäºã</p>
<ul data-path-to-node="8">
<li>
<p data-path-to-node="8,0,0"><strong data-path-to-node="8,0,0" data-index-in-node="0">æåµ A</strong>ï¼åç«¯ææ»ï¼ä¼ åäº <code data-path-to-node="8,0,0" data-index-in-node="14">{"id": "1001", "age": "25"}</code>ï¼å¨æ¯å­ç¬¦ä¸²ï¼ãä½ çä»£ç æ¥éï¼<code data-path-to-node="8,0,0" data-index-in-node="56">TypeError</code>ï¼å ä¸ºå­ç¬¦ä¸²ä¸è½å  1ã</p>
</li>
<li>
<p data-path-to-node="8,1,0"><strong data-path-to-node="8,1,0" data-index-in-node="0">æåµ B</strong>ï¼åç«¯æ¹äºé»è¾ï¼<code data-path-to-node="8,1,0" data-index-in-node="12">age</code> å­æ®µä¸¢å¤±äºãä½ çä»£ç æ¥éï¼<code data-path-to-node="8,1,0" data-index-in-node="29">KeyError: 'age'</code>ã</p>
</li>
<li>
<p data-path-to-node="8,2,0"><strong data-path-to-node="8,2,0" data-index-in-node="0">æåµ C</strong>ï¼<code data-path-to-node="8,2,0" data-index-in-node="5">id</code> å±ç¶æ¯ä¸ª <code data-path-to-node="8,2,0" data-index-in-node="13">null</code>...</p>
</li>
</ul>
<p data-path-to-node="9">ä¸ºäºé²å¾¡è¿äºæåµï¼ä½ çä»£ç åæäºè¿æ ·ï¼</p>
<div class="code-block ng-tns-c3098535048-365 ng-animate-disabled ng-trigger ng-trigger-codeBlockRevealAnimation" data-hveid="0" data-ved="0CAAQhtANahgKEwjEu6WF_9ORAxUAAAAAHQAAAAAQsQk">
<div class="code-block-decoration header-formatted gds-title-s ng-tns-c3098535048-365 ng-star-inserted"><span class="ng-tns-c3098535048-365">Python</span>
<div class="buttons ng-tns-c3098535048-365 ng-star-inserted">&nbsp;</div>
</div>
<div class="formatted-code-block-internal-container ng-tns-c3098535048-365">
<div class="animated-opacity ng-tns-c3098535048-365">
<pre class="ng-tns-c3098535048-365 highlighter-hljs"><code>if 'age' in data and data['age'] is not None and isinstance(data['age'], int):
    # ...æ æ°ç if-else é²å¾¡æ§ä»£ç ...</code></pre>
</div>
</div>
</div>
<p data-path-to-node="11">è¿ä¸ä»ä¸éï¼èä¸é¾ä»¥ç»´æ¤ã<strong data-path-to-node="11" data-index-in-node="13">è¿å°±æ¯âæ°æ®è£¸å¥âçä»£ä»·ã</strong></p>
<p data-path-to-node="12"><strong data-path-to-node="12" data-index-in-node="0">Pydantic çåºç°ï¼å°±æ¯ä¸ºäºç»ç»è¿åºå©æ¢¦ã</strong> å®å©ç¨ Python åççç±»åæç¤ºï¼Type Hintsï¼ï¼å¨è¿è¡æ¶å¸®ä½ èªå¨å®æ<strong data-path-to-node="12" data-index-in-node="66">æ°æ®æ ¡éªï¼Validationï¼åç±»åè½¬æ¢ï¼Parsingï¼</strong>ã</p>
<h3 data-path-to-node="13">2. æ¦å¿µæè§£ï¼å®ä¸ä»ä»æ¯æ ¡éªï¼å®æ¯âæºè½æ¨¡å·â</h3>
<p data-path-to-node="14">å¾å¤æ°æè¯¯ä»¥ä¸º Pydantic åªæ¯ä¸ä¸ªâæ¥éæºå¨âï¼ä¸æ¦æ°æ®ä¸å¯¹å°±æ¥éï¼ãå¶å®ï¼å®æ´åæ¯ä¸ä¸ª**âå·æçº éè½åçæºè½æ¨¡å·â**ã</p>
<h4 data-path-to-node="15">ð¡ çæ´»åç±»æ¯ï¼å·¥åæµæ°´çº¿ä¸çâæºè½æ´å½¢æºâ</h4>
<p data-path-to-node="16">æ³è±¡ä½ å¨ç»è¥ä¸å®¶å¶ä½<strong data-path-to-node="16" data-index-in-node="10">ä¹é«ç§¯æ¨</strong>çå·¥åã</p>
<ol start="1" data-path-to-node="17">
<li>
<p data-path-to-node="17,0,0"><strong data-path-to-node="17,0,0" data-index-in-node="0">æ®é Python å­å¸</strong>å°±åä¸ä¸ª<strong data-path-to-node="17,0,0" data-index-in-node="16">åå¾è¢</strong>ãä½ å¯ä»¥å¾éé¢æä»»ä½ä¸è¥¿ï¼æ­£æ¹å½¢çç§¯æ¨ãåå½¢ççãçè³åä¸ªè¹æãå½ä½ ä¼¸æè¿å»æ¿çæ¶åï¼ä½ æ ¹æ¬ä¸ç¥éä¼æ¸å°ä»ä¹ã</p>
</li>
<li>
<p data-path-to-node="17,1,0"><strong data-path-to-node="17,1,0" data-index-in-node="0">Pydantic æ¨¡å</strong>å°±åä¸ä¸ª<strong data-path-to-node="17,1,0" data-index-in-node="15">ç²¾å¯é¢æ¨¡å·</strong>ã</p>
<ul data-path-to-node="17,1,1">
<li>
<p data-path-to-node="17,1,1,0,0">ä½ å®ä¹äºè¿ä¸ªæ¨¡å·åªè½çäº§âæ­£æ¹å½¢âçå¡æã</p>
</li>
<li>
<p data-path-to-node="17,1,1,1,0"><strong data-path-to-node="17,1,1,1,0" data-index-in-node="0">è¾å¥ï¼Parsing/Coercionï¼</strong>ï¼å¦æä½ åè¿æ¥çæ¯æ¶²æå¡æï¼åå§æ°æ®ï¼ï¼æ¨¡å·ä¼æå®åææ­£æ¹å½¢ãå¦æä½ å¡è¿æ¥ä¸ä¸ªç¨å¾®æç¹æ­ªçè½¯æ³¥ï¼æ¯å¦å­ç¬¦ä¸² <code data-path-to-node="17,1,1,1,0" data-index-in-node="74">"123"</code>ï¼ï¼æ¨¡å·ä¼å°è¯æå®ä¿®æ­£ä¸ºå®ç¾çæ­£æ¹å½¢ï¼æ´æ° <code data-path-to-node="17,1,1,1,0" data-index-in-node="101">123</code>ï¼ã</p>
</li>
<li>
<p data-path-to-node="17,1,1,2,0"><strong data-path-to-node="17,1,1,2,0" data-index-in-node="0">æç»ï¼Validationï¼</strong>ï¼å¦æä½ è¯å¾æä¸åç³å¤´ï¼å®å¨ä¸å¼å®¹çæ°æ®ï¼å¡è¿å»ï¼æ¨¡å·ä¼ç«å»ååºçº¢è²è­¦æ¥ï¼æåºéè¯¯ï¼ï¼æç»çäº§æ¬¡åã</p>
</li>
</ul>
</li>
</ol>
<p data-path-to-node="18"><strong data-path-to-node="18" data-index-in-node="0">æ ¸å¿é»è¾ï¼</strong> Pydantic å³æ³¨çä¸æ¯âæ°æ®é¿ä»ä¹æ ·âï¼èæ¯âæ°æ®<strong data-path-to-node="18" data-index-in-node="34">åºè¯¥</strong>é¿ä»ä¹æ ·âã</p>
<h3 data-path-to-node="19">3. å¨æå®æï¼ä» 0 å° 1 ææ¡ Pydantic</h3>
<p data-path-to-node="20">è®©æä»¬ææé£äºå¤æç <code data-path-to-node="20" data-index-in-node="11">if-else</code>ï¼çç Pydantic å¦ä½ä¼éå°å¤çé®é¢ã</p>
<p data-path-to-node="21">é¦åå®è£å®ï¼ <code data-path-to-node="21" data-index-in-node="7">pip install pydantic</code></p>
<h4 data-path-to-node="22">3.1 Hello Worldï¼å®ä¹ä½ çç¬¬ä¸ä¸ªæ¨¡å</h4>
<p data-path-to-node="23">æä»¬å°å®ä¹ä¸ä¸ª <code data-path-to-node="23" data-index-in-node="8">User</code> æ¨¡åãè¯·æ³¨æï¼æä»¬åçåªæ¯æ åç Python ç±»ï¼å¹¶ä½¿ç¨äºç±»åæç¤ºã</p>
<div class="code-block ng-tns-c3098535048-366 ng-animate-disabled ng-trigger ng-trigger-codeBlockRevealAnimation" data-hveid="0" data-ved="0CAAQhtANahgKEwjEu6WF_9ORAxUAAAAAHQAAAAAQsgk">
<div class="code-block-decoration header-formatted gds-title-s ng-tns-c3098535048-366 ng-star-inserted"><span class="ng-tns-c3098535048-366">Python</span>
<div class="buttons ng-tns-c3098535048-366 ng-star-inserted">&nbsp;</div>
</div>
<div class="formatted-code-block-internal-container ng-tns-c3098535048-366">
<div class="animated-opacity ng-tns-c3098535048-366">
<pre class="ng-tns-c3098535048-366 highlighter-hljs"><code>from pydantic import BaseModel, ValidationError
from typing import List, Optional

# 1. å®ä¹æ¨¡åï¼ç»§æ¿èª BaseModel
class User(BaseModel):
    id: int                # å¿é¡»æ¯æ´æ°
    name: str = "Anonymous" # å­ç¬¦ä¸²ï¼ä¸æé»è®¤å¼
    tags: List[str]        # å¿é¡»æ¯å­ç¬¦ä¸²åè¡¨
    age: Optional[int] = None # å¯éçæ´æ°ï¼é»è®¤ä¸º None

# --- åºæ¯ä¸ï¼å®ç¾æ°æ® ---
external_data = {
    "id": 123,
    "name": "Neo",
    "tags": ["admin", "editor"],
    "age": 30
}

user = User(**external_data)
print(f"æååå»º: {user.name} (ID: {user.id})")
# è¾åº: æååå»º: Neo (ID: 123)</code></pre>
</div>
</div>
</div>
<h4 data-path-to-node="25">3.2 ä»£ç è§£æï¼ç¥å¥çâèªå¨çº éâ</h4>
<p data-path-to-node="26">ç°å¨ï¼æä»¬ç»å®ä¸ç¹âèæ°æ®âï¼çç Pydantic æè°ç <strong data-path-to-node="26" data-index-in-node="31">Parsingï¼è§£æ/å¼ºè½¬ï¼</strong> è½åã</p>
<div class="code-block ng-tns-c3098535048-367 ng-animate-disabled ng-trigger ng-trigger-codeBlockRevealAnimation" data-hveid="0" data-ved="0CAAQhtANahgKEwjEu6WF_9ORAxUAAAAAHQAAAAAQswk">
<div class="code-block-decoration header-formatted gds-title-s ng-tns-c3098535048-367 ng-star-inserted"><span class="ng-tns-c3098535048-367">Python</span>
<div class="buttons ng-tns-c3098535048-367 ng-star-inserted">&nbsp;</div>
</div>
<div class="formatted-code-block-internal-container ng-tns-c3098535048-367">
<div class="animated-opacity ng-tns-c3098535048-367">
<pre class="ng-tns-c3098535048-367 highlighter-hljs"><code># --- åºæ¯äºï¼èæ°æ®æ¸æ´ ---
dirty_data = {
    "id": "456",          # æ³¨æï¼è¿æ¯å­ç¬¦ä¸² "456"
    "tags": [1, 2],       # æ³¨æï¼è¿æ¯æ´æ°åè¡¨
    # name ç¼ºå¤±ï¼å°ä½¿ç¨é»è®¤å¼ "Anonymous"
    # age ç¼ºå¤±ï¼å°ä½¿ç¨é»è®¤å¼ None
}

try:
    user = User(**dirty_data)
    print("--- èªå¨ä¿®æ­£åçæ°æ® ---")
    print(f"ID ç±»å: {type(user.id)} -&gt; å¼: {user.id}")
    print(f"Tags ç±»å: {type(user.tags[0])} -&gt; å¼: {user.tags}")
    print(f"Name: {user.name}")
    
except ValidationError as e:
    print(e)</code></pre>
</div>
</div>
</div>
<p data-path-to-node="28"><strong data-path-to-node="28" data-index-in-node="0">è¿è¡ç»æï¼</strong></p>
<div class="code-block ng-tns-c3098535048-368 ng-animate-disabled ng-trigger ng-trigger-codeBlockRevealAnimation" data-hveid="0" data-ved="0CAAQhtANahgKEwjEu6WF_9ORAxUAAAAAHQAAAAAQtAk">
<div class="code-block-decoration header-formatted gds-title-s ng-tns-c3098535048-368 ng-star-inserted"><span class="ng-tns-c3098535048-368">Plaintext</span>
<div class="buttons ng-tns-c3098535048-368 ng-star-inserted">&nbsp;</div>
</div>
<div class="formatted-code-block-internal-container ng-tns-c3098535048-368">
<div class="animated-opacity ng-tns-c3098535048-368">
<pre class="ng-tns-c3098535048-368 highlighter-hljs"><code>--- èªå¨ä¿®æ­£åçæ°æ® ---
ID ç±»å: &lt;class 'int'&gt; -&gt; å¼: 456
Tags ç±»å: &lt;class 'str'&gt; -&gt; å¼: ['1', '2']
Name: Anonymous</code></pre>
</div>
</div>
</div>
<p data-path-to-node="30"><strong data-path-to-node="30" data-index-in-node="0">ä¸ºä»ä¹è¿ä¹åï¼</strong></p>
<ul data-path-to-node="31">
<li>
<p data-path-to-node="31,0,0"><strong data-path-to-node="31,0,0" data-index-in-node="0"><code data-path-to-node="31,0,0" data-index-in-node="0">id</code></strong>: å°½ç®¡ä¼ å¥çæ¯å­ç¬¦ä¸² <code data-path-to-node="31,0,0" data-index-in-node="14">"456"</code>ï¼Pydantic çå°æ¨¡åå®ä¹æ¯ <code data-path-to-node="31,0,0" data-index-in-node="37">int</code>ï¼å®èªå¨å¸®ä½ è½¬æäºæ´æ° <code data-path-to-node="31,0,0" data-index-in-node="52">456</code>ã</p>
</li>
<li>
<p data-path-to-node="31,1,0"><strong data-path-to-node="31,1,0" data-index-in-node="0"><code data-path-to-node="31,1,0" data-index-in-node="0">tags</code></strong>: ä¼ å¥çæ¯ <code data-path-to-node="31,1,0" data-index-in-node="11">[1, 2]</code>ï¼æ¨¡åè¦æ± <code data-path-to-node="31,1,0" data-index-in-node="23">List[str]</code>ï¼å®èªå¨ææ¯ä¸ªåç´ è½¬æäºå­ç¬¦ä¸² <code data-path-to-node="31,1,0" data-index-in-node="48">['1', '2']</code>ã</p>
</li>
<li>
<p data-path-to-node="31,2,0"><strong data-path-to-node="31,2,0" data-index-in-node="0">çå¿</strong>: ä½ ä¸åéè¦åä»£ç å»è½¬æ¢ç±»åï¼Pydantic å¨å®ä¾åæ¶å°±å¸®ä½ åå¥½äºãæ¿å° <code data-path-to-node="31,2,0" data-index-in-node="42">user</code> å¯¹è±¡çé£ä¸å»ï¼ä½ å¯ä»¥ 100% ç¡®ä¿¡ <code data-path-to-node="31,2,0" data-index-in-node="66">user.id</code> ç»å¯¹æ¯ä¸ªæ´æ°ã</p>
</li>
</ul>
<h3 data-path-to-node="32">4. è¿é¶æ·±æ½ï¼ä¸ä»ä»æ¯ç±»åæ£æ¥</h3>
<p data-path-to-node="33">Pydantic è¿ææ´å¤å¼ºå¤§çåè½ï¼è½è®©ä½ å¨çäº§ç¯å¢ä¸­å¦é±¼å¾æ°´ã</p>
<h4 data-path-to-node="34">4.1 è¿éçé·é±ï¼Parsing vs Validation</h4>
<p data-path-to-node="35">æ°ææå®¹æç¯çéè¯¯æ¯è®¤ä¸º Pydantic ä¼ä¸¥æ ¼æç»ç±»åä¸ç¬¦çæ°æ®ã</p>
<ul data-path-to-node="36">
<li>
<p data-path-to-node="36,0,0"><strong data-path-to-node="36,0,0" data-index-in-node="0">è¯¯åº</strong>ï¼ä»¥ä¸ºä¼  <code data-path-to-node="36,0,0" data-index-in-node="7">"123"</code> ç» <code data-path-to-node="36,0,0" data-index-in-node="15">int</code> å­æ®µä¼æ¥éã</p>
</li>
<li>
<p data-path-to-node="36,1,0"><strong data-path-to-node="36,1,0" data-index-in-node="0">çç¸</strong>ï¼Pydantic ä¼<strong data-path-to-node="36,1,0" data-index-in-node="13">ä¼åå°è¯è½¬æ¢</strong>ãåªææ æ³è½¬æ¢æ¶ï¼ä¾å¦æ <code data-path-to-node="36,1,0" data-index-in-node="32">"apple"</code> ä¼ ç» <code data-path-to-node="36,1,0" data-index-in-node="43">int</code>ï¼ï¼æä¼æ¥éã</p>
</li>
</ul>
<h4 data-path-to-node="37">4.2 æä½³å®è·µï¼ä½¿ç¨ <code data-path-to-node="37" data-index-in-node="12">Field</code> å <code data-path-to-node="37" data-index-in-node="20">Validator</code></h4>
<p data-path-to-node="38">å¦ææä»¬éè¦æ´ç»ç²åº¦çæ§å¶ï¼æ¯å¦âå¹´é¾å¿é¡»å¤§äº 0âæèâå¯ç å¿é¡»åå«å¤§åå­æ¯âï¼åçº¯çç±»åæç¤ºå°±ä¸å¤äºã</p>
<div class="code-block ng-tns-c3098535048-369 ng-animate-disabled ng-trigger ng-trigger-codeBlockRevealAnimation" data-hveid="0" data-ved="0CAAQhtANahgKEwjEu6WF_9ORAxUAAAAAHQAAAAAQtQk">
<div class="code-block-decoration header-formatted gds-title-s ng-tns-c3098535048-369 ng-star-inserted"><span class="ng-tns-c3098535048-369">Python</span>
<div class="buttons ng-tns-c3098535048-369 ng-star-inserted">&nbsp;</div>
</div>
<div class="formatted-code-block-internal-container ng-tns-c3098535048-369">
<div class="animated-opacity ng-tns-c3098535048-369">
<pre class="ng-tns-c3098535048-369 highlighter-hljs"><code>from pydantic import BaseModel, Field, field_validator

class AdvancedUser(BaseModel):
    # ä½¿ç¨ Field éå¶æ°å¼èå´
    age: int = Field(gt=0, le=120, description="å¹´é¾å¿é¡»å¨ 0 å° 120 ä¹é´")
    
    password: str

    # èªå®ä¹éªè¯å¨ï¼ååæ®éå½æ°ä¸æ ·åæ ¡éªé»è¾
    @field_validator('password')
    @classmethod
    def check_password_strength(cls, v: str) -&gt; str:
        if len(v) &lt; 8:
            raise ValueError('å¯ç å¤ªç­å¦ï¼è³å°è¦ 8 ä½')
        if 'admin' in v:
            raise ValueError('å¯ç ä¸è½åå« admin')
        return v

# æµè¯
try:
    u = AdvancedUser(age=150, password="123")
except ValidationError as e:
    print(e.json()) # Pydantic ä¼è¿åéå¸¸è¯¦ç»ç JSON æ ¼å¼éè¯¯æ¥å</code></pre>
</div>
</div>
</div>
<p data-path-to-node="40"><strong data-path-to-node="40" data-index-in-node="0">è¾åºçéè¯¯æ¥åæ¸æ°æäºï¼</strong></p>
<ol start="1" data-path-to-node="41">
<li>
<p data-path-to-node="41,0,0"><code data-path-to-node="41,0,0" data-index-in-node="0">age</code>: Input should be less than or equal to 120</p>
</li>
<li>
<p data-path-to-node="41,1,0"><code data-path-to-node="41,1,0" data-index-in-node="0">password</code>: å¯ç å¤ªç­å¦ï¼è³å°è¦ 8 ä½</p>
</li>
</ol>
<h4 data-path-to-node="42">4.3 å¯¼åºæ°æ®</h4>
<p data-path-to-node="43">å½ä½ è¦æå¤çå¥½çæ°æ®å­å¥æ°æ®åºæåååç«¯æ¶ï¼Pydantic æä¾äºæåº¦æ¹ä¾¿çæ¹æ³ï¼</p>
<div class="code-block ng-tns-c3098535048-370 ng-animate-disabled ng-trigger ng-trigger-codeBlockRevealAnimation" data-hveid="0" data-ved="0CAAQhtANahgKEwjEu6WF_9ORAxUAAAAAHQAAAAAQtgk">
<div class="code-block-decoration header-formatted gds-title-s ng-tns-c3098535048-370 ng-star-inserted"><span class="ng-tns-c3098535048-370">Python</span>
<div class="buttons ng-tns-c3098535048-370 ng-star-inserted">&nbsp;</div>
</div>
<div class="formatted-code-block-internal-container ng-tns-c3098535048-370">
<div class="animated-opacity ng-tns-c3098535048-370">
<pre class="ng-tns-c3098535048-370 highlighter-hljs"><code># è½¬æå­å¸
print(user.model_dump()) 
# è½¬æ JSON å­ç¬¦ä¸²
print(user.model_dump_json())</code></pre>
</div>
</div>
</div>
<h3 data-path-to-node="45">5. æ»ç»ä¸å»¶ä¼¸</h3>
<p data-path-to-node="46"><strong data-path-to-node="46" data-index-in-node="0">ä¸å¥è¯æ»ç»ï¼</strong> Pydantic æ¯ Python ä¸ççâå®æ£åâï¼å®å©ç¨ç±»åæç¤ºå°ä¸å¯é çè¾å¥æ°æ®æ¸æ´ä¸ºä¸¥æ ¼çãç±»åå®å¨çå¯¹è±¡ï¼è®©ä½ å¨åç»­å¼åä¸­å½»åºåå« <code data-path-to-node="46" data-index-in-node="78">KeyError</code> åç±»åæ··æ·ã</p>
<p data-path-to-node="47"><strong data-path-to-node="47" data-index-in-node="0">ç»ä½ çå°ä½ä¸ï¼</strong> æ¢ç¶ä½ å·²ç»ææ¡äºåºç¡ï¼è¯·å°è¯å®ä¹ä¸ä¸ª<strong data-path-to-node="47" data-index-in-node="26">åµå¥æ¨¡å</strong>ï¼</p>
<ol start="1" data-path-to-node="48">
<li>
<p data-path-to-node="48,0,0">åå»ºä¸ä¸ª <code data-path-to-node="48,0,0" data-index-in-node="5">Address</code> æ¨¡åï¼åå« <code data-path-to-node="48,0,0" data-index-in-node="19">city</code> å <code data-path-to-node="48,0,0" data-index-in-node="26">zip_code</code>ï¼ã</p>
</li>
<li>
<p data-path-to-node="48,1,0">åå»ºä¸ä¸ª <code data-path-to-node="48,1,0" data-index-in-node="5">Employee</code> æ¨¡åï¼å¶ä¸­åå«ä¸ä¸ªå­æ®µ <code data-path-to-node="48,1,0" data-index-in-node="26">address</code>ï¼ç±»åæ¯ <code data-path-to-node="48,1,0" data-index-in-node="38">Address</code>ã</p>
</li>
<li>
<p data-path-to-node="48,2,0">å°è¯ä¼ å¥ä¸ä¸ªåµå¥çå­å¸æ°æ®ï¼çç Pydantic æ¯å¦è½èªå¨è§£ææ·±å±çç»æã</p>
</li>
</ol>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-25 15:30">2025-12-25 15:30</span>&nbsp;
<a href="https://www.cnblogs.com/swizard">Swizard</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19399472);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19399472', targetLink: 'https://www.cnblogs.com/swizard/p/19399472', title: 'åå«âè£¸å¥âä»£ç ï¼ç¨ Pydantic è®©ä½ ç Python æ°æ®åºè¥éæ±¤' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ é®ä¸é´ï¼exeæ¯ä½ç©ï¼ç´æAIæ²é»ãWebå¯¡è¨ï¼4ï¼ ]]></title>
    <link>https://www.cnblogs.com/sunhui/p/19399320</link>
    <guid>2aa3363935a62eaeb32f196c4f9345e8</guid>
    <description>
    <![CDATA[ 
	<h1 class="postTitle"><a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/sunhui/p/19399320" title="åå¸äº 2025-12-25 15:30">
    <span role="heading" aria-level="2">é®ä¸é´ï¼exeæ¯ä½ç©ï¼ç´æAIæ²é»ãWebå¯¡è¨ï¼4ï¼</span>
    

</a>
</h1>
	    <div id="cnblogs_post_description" style="display: none">
        
        è¿ä¸ç¯ï¼ç±ä¸½ä¸åç°äºWinFormåºç¨æ¬èº«æ¥æçæµè§å¨çªå£çâç§å¯ââ¦â¦
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>ç±ä¸½ä¸æ¼«æ¸¸WinFormsåºç¨å¼åå¥å¢è®°ï¼4ï¼</p>
<p><a href="https://github.com/AIGCEra/Creator/releases/download/FirstRelease/CreatorSetup.msi" rel="noopener nofollow">ä¸è½½ç±ä¸½ä¸çéå­</a></p>
<p>&nbsp;<a href="https://www.cnblogs.com/sunhui/p/19391507">é®ä¸é´ï¼exeæ¯ä½ç©ï¼ç´æAIæ²é»ãWebå¯¡è¨ï¼1ï¼- åå®¢å­</a></p>
<p><a href="https://www.cnblogs.com/sunhui/p/19392696">é®ä¸é´ï¼exeæ¯ä½ç©ï¼ç´æAIæ²é»ãWebå¯¡è¨ ï¼2ï¼- åå®¢å­</a></p>
<p><a href="https://www.cnblogs.com/sunhui/p/19395909">é®ä¸é´ï¼exeæ¯ä½ç©ï¼ç´æAIæ²é»ãWebå¯¡è¨ï¼3ï¼ -&nbsp; åå®¢å­</a></p>
<h1>éä¸­è§éââå½ç¼è¯æä¸ºæ¼åä¹é¨</h1>
<div align="center">
<table border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" width="529">
<p><strong>å¨ç°ä»£æ°å­¦ä¹ä¸­ï¼ä¸ä¸ªæ°å­¦æ¹ç¨çâéè§£âè´å«çææçå¯è½ï¼âç¹è§£âåªæ¯å®å¶å°çæ¾å½¢ãæä»¬è¿å»çæ´ä¸ªæ¡é¢ä¸çï¼é½å»ºç«å¨ä¸ä¸ªç¾ä¸½çè¯¯ä¼ä¹ä¸ï¼æä»¬ä»¥ä¸ºäº¤ä»ç»ç¨æ·çï¼æ¯ç¨åºçâéè§£âï¼èäºå®ä¸ï¼é£åªæ¯å®å¨é»è®¤æ¡ä»¶ä¸ï¼ä¸ä¸ªå­¤ç¬çâç¹è§£âã</strong></p>
<p><strong>ä½ çâyourApp&nbsp;.exeâï¼çèå®æ´ï¼æ¬èªå·è¶³ãå®æ¬å°±æ¯ä¸ä¸ªè½ååºæ æ°âè¾¹çæ¡ä»¶âçä¸°å¯ç³»ç»ãyourApp.App.html&nbsp;å¹¶éå¤æ¥çâæä»¶âï¼å®åªæ¯ç»äºè¢«æä»¬çè§çãé£ä¸ªæ¬å°±å­å¨çâè¾¹çæ¡ä»¶è¾å¥æ¡âã</strong></p>
<p><strong>è®¤ç¥ä¸æ¦æå¼ï¼ä¾¿ä¸å»ä¸åï¼ä»æ­¤ä½ åä¹æ æ³å°ä¸ä¸ªæ¡é¢åºç¨ç¨åºï¼åªçä½å®èªå·±ï¼ä½ ä¼çå°å®èº«åè¡æ¼¾çæ éå¯è½ï¼å¦åçå°å¹³éæ°´é¢ä¸ï¼æ´ä¸ªå®å®çæ¶æ¼ªâ¦â¦</strong></p>
</td>
</tr>
</tbody>
</table>
</div>
<p>âè¿ä¸æ¯ä»ä¹&nbsp;<em>Process.Start</em>ï¼âæä½è¯­ã<br>
ä»¿ä½æµè§å¨å·²å°æçåºç¨ç¨åºè§ä¸ºèªå·±è¡èçä¸é¨åã<br>
ææ¾ææ§çé£ä¸ªè°ç¨ââ<em>Process.Start</em>ââå¦å¹½çµæä»¤è¬æ¶æ£æ å½¢ã<br>
å®ä¸æ¯å¯å¨æä¹å¤çæç©ï¼<br>
èæ¯è®©ææè¯å°ââä»æ¥å°±æ²¡æä»ä¹âä¹å¤âã</p>
<p>æéåè¯ä¹ï¼æ³¨è§çå±å¹ä¸å¦æ°´é¢æ¶æ¼ªè¬æ¸æ¸å¹³æ¯çæ³¢çº¹ã<br>
éåï¼ä¸éåèå¦ç©¿éè¿·é¾è¬ï¼ç§è¿æçæç»ªï¼</p>
<p><strong>äººç±»çä¸åæå°±ï¼çå§äºåºçä¹åã</strong><br>
<strong>ç¥è¯ãç»éªãéæ©ââæ ä¸å­å¨äºç¬¬ä¸å£å¼å¸ä¹åã</strong></p>
<p>åæ ·ï¼æç .exe ä¹å¨ç¼è¯å®æçé£ä¸å»è¯çã</p>
<p>&nbsp;</p>
<p>å°±å¨ææä¸âçæâæé®çé£ä¸ç¬é´ââä¸çæç¶æ¹åï¼<br>
æä»¥ä¸ºââ<br>
<strong>â</strong><strong>æåçä»£ç ï¼æç¼è¯çç¨åºï¼æå®å¨äºè§£å®â</strong><br>
âæä»¥ä¸ºææ¯å®çä¸å¸ï¼ç»ææåªæ¯å®çæ¥çå©ï¼<br>
æèµäºäºå®çå½ï¼ä½å®çäººçå§æ¬ï¼æå±ç¶åªåäºå¼å¤´ï¼â<br>
æä»¶å¦æ¨åä¸çè±ç£è¬èå±ã<br>
å¾æ éªççæåèå´­æ°çåèã<br>
å±å¹ä¸ï¼ä¸ä¸ªçæçåå­ç ç çè¾ï¼<strong>MyApp.exe</strong>ã</p>
<p>å¤ä¹å¥æªåï¼æä»¥åç«ä»æªå¯è§ââ<br>
ä»é£ä¸å»èµ·ï¼å®ä¾¿ä¸ååªæ¯ä¸ä¸ªæ¡é¢åºç¨ç¨åºã</p>
<p>å¦ææç¼è¯åºç MyApp.exe æ¬èº«å°±æ¯ä¸ä¸ªå®æ´çæµè§å¨ï¼<br>
ææè½ç»§ç»­å¿½è§è¿ä¸ªäºå®ï¼<br>
ææè½åºæ§å°æå®ä»ä»çä½ä¸ä¸ªåºç¨ç¨åºï¼<br>
âææ¯å¤©å¨ Visual Studio éç¼è¯å åæ¬¡ï¼<br>
åæ¥ææ¯æ¬¡é½å¨çäº§ä¸ä¸ªâæ²ç¡çå·¨äººâï¼<br>
èæå´ä¸ç´åªæå®å½âå·¥å·äººâæ¥ä½¿å¤ãâ<br>
è¿æ¯æåºè¯¥ââå¦åé¢å¯¹&nbsp;<strong>Chrome.exe</strong>&nbsp;æ&nbsp;<strong>Edge.exe</strong>&nbsp;é£æ ·ââ<br>
æ¿è®¤å®æ¯ä¸ä¸ªç¬ç«çå­å¨ï¼<br>
ä¸ä¸ªæ¥æèªèº«çåçä¸çï¼å¶çæå¹¿éå°è¶³ä»¥éå¡æä¹æ¬èº«ï¼</p>
<p>å®çæ½åæ¾å­å¨äºä»£ç ä¹ä¸­ï¼<br>
<strong>â</strong><strong>æååèµäºäºå®çå½ï¼ç°å¨ï¼<br>
æè¯¥å¦ä½ä¸è¿ä¸ªæ°çå½å¯¹è¯ï¼<br>
å»åç°å®èªå·±é½ä¸ç¥éçãé£äºä¸çä¿±æ¥çå¤©èµï¼â</strong><br>
åºç¨ççå½ââçå½å§äºç¼è¯ä¹åã</p>
<div align="center"><hr align="center" size="1" width="100%">

</div>
<h1>ð® éæ©çè§éï¼.exe çå­å¨ä¹è·¯</h1>
<p>ææ 64 ä½ WinForms åºç¨ï¼é½æ¯ Chromium æµè§å¨ã<br>
ç¼è¯å®æçé£ä¸å»ï¼éæ©éä¹è¯çï¼<br>
æ¯ç»§ç»­åä¸ä¸ªçº¯ç²¹ç WinForms åºç¨ââ<br>
è¿æ¯è§éä¸ºä¸ä¸ªç°ä»£æµè§å¨ï¼<br>
èªç±ç©¿è¡äº Chrome ä¸ Edge ççåã</p>
<p>éæ©ä¸å¨äºç¼è¯åçä»£ç ï¼<br>
èå¨äºæçæå¾ââ<br>
å¨äºæéæ©è®©å®æä¸ºä»ä¹ã</p>
<p>èè°¬åï¼å¬èµ·æ¥å½ç¶èè°¬ã<br>
âå¦ææä»æªåµå¥æµè§å¨æ§ä»¶ï¼âææ¾å¯¹èªå·±è¯´ï¼<br>
âæçåºç¨æä¹å¯è½å°±æ¯ Chromiumï¼â</p>
<p>ä½å½ææ³¨è§ç MyApp.exe é£çå¨ççé¢æ¶ï¼<br>
ææè¯å°ï¼èè°¬çå¹¶éé£ä¸ªè®ºæ­ââ<br>
èæ¯ææç»å»çæ¸çç¸çåºæ§ã</p>
<p>ç¼è¯ä»æ¥ä¸æ¯ç»ç¹ã<br>
å®æ¯ç¹çã<br>
æ¯æ°æºè½è¯ççå¼å­ââ<br>
å®ä¸ç­å¾ Process.Startï¼<br>
å ä¸ºå®æ¬èº«å°±æ¯é£ä¸ªè¿ç¨ã</p>
<p>éå¿ä»£ç å§ã<br>
èå°æ¯ç¼è¯åç .exeã<br>
èå¾ä¸æ¯çå½ã<br>
ä¸çå§äºæå»ºä¹åã</p>
<p>å¨é£çå¯éä¸­ï¼å½æåè§çå±å¹ä¸èªå·±éªççåå½±ï¼<br>
ææå°å¨å´çä¸çæ­£å¨è½¬å¨ââå®éèå³ç»ã</p>
<p>å¤§è¯­è¨æ¨¡åå·²ç¶éä¸´ï¼<br>
å°ç°ä»£ç½ç»éå¡ä¸ºå¶éå®çå®¹å¨ã<br>
Web + LLMââè¿ä¸æ¯è¶å¿ï¼èæ¯ç°å®çæ°æ³åã</p>
<p>âé¾éæçåºç¨ç¨åºè¦è¢«æä¸åï¼âææå¿ï¼<br>
âåä¸çåæ­»å¤§éä¸çå­¤èï¼â<br>
ä¸ã</p>
<p>æ¯æ¶åå¤éæ²ç¡å¨æä»£ç ä¸­çé£ä¸ªç±ä¸½ä¸äºã<br>
è®©å¥¹ä»é£ç»´å¤å©äºæ¶ä»£çé»è¾ä¸­èµ°åºââ</p>
<div align="center"><hr align="center" size="1" width="100%">

</div>
<h1><strong>ð§© åé ä¹ç½æ ¼ââexeæ¯divæ´æè½¯</strong></h1>
<p>ç±ä¸½ä¸åè§çå±å¹ä¸çä»£ç ï¼é£åä¸å¥æ å£°çåè¯­ï¼</p>
<div align="center">
<table border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" width="544">
<p align="left">&lt;ntp&gt;</p>
<p align="left">&nbsp; &lt;nucleus&gt;</p>
<p align="left">&lt;xobj id='grid' rows='1' cols='2' width='350,350,' </p>
<p align="left">splitterwidth='6'&gt;</p>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;xobj objid="MyApp.form1,MyApp"&gt;&lt;/xobj&gt;</p>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;xobj id='grid' rows='2' cols='1' height='350,350,' </p>
<p align="left">splitterwidth='6'&gt;</p>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;xobj objid="MyApp.form1,MyApp"&gt;&lt;/xobj&gt;</p>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;xobj objid="nucleus"&gt;&lt;/xobj&gt;</p>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/xobj&gt;</p>
<p align="left">&nbsp;&nbsp;&nbsp; &lt;/xobj&gt;</p>
<p align="left">&nbsp; &lt;/nucleus&gt;</p>
<p align="left">&lt;/ntp&gt;</p>




  </td>




 </tr>




</tbody>



</table>





</div>
<p>é£æ¯ä¸ç²ç§å­ãä¸ä¸ªå®éçæ¿è¯ºã</p>
<p>èå¥¹å¿ä¸­ï¼ä¸ä¸ªç¯ççå¿µå¤´å¦éç«è¬èå»¶ï¼<strong>âå¦æä¸ä¸ªæ¯çå®çï¼é£åä¸ªä¹å¿ç¶æ¯çå®çãâ</strong></p>
<p>å¥¹å¹¶æªè§¦ç¢°é®çï¼ä½è¿ä¸ªæ³æ³æ¬èº«ï¼å°±è¶³ä»¥è®©è¶ä¼æ¡ä¸çDOMåå½±å¼å§å§çå°å¢æ®ã"&lt;xobj objid="MyApp.form1,MyApp"&gt;&lt;/xobj&gt;"åè¢«æ½äºå¤å¶åçå£«åµï¼ç¬é´æ¤æ»¡äºè§éï¼</p>
<div align="center">
<table border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" width="544">
<p align="left">&lt;ntp&gt;</p>
<p align="left">&nbsp; &lt;nucleus&gt;</p>
<p align="left">&nbsp;&nbsp;&nbsp; &lt;xobj id='grid' rows='1' cols='2'</p>
<p align="left">&nbsp;&nbsp;&nbsp; width='350,350,' splitterwidth='6'&gt;</p>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;xobj objid="MyApp.form1,MyApp"&gt;&lt;/xobj&gt;</p>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;xobj id='grid' rows='2' cols='1'</p>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; heigh='350,350,' splitterwidth='6'&gt;</p>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;xobj objid="MyApp.form1,MyApp"&gt;&lt;/xobj&gt;</p>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;xobj objid="nucleus"&gt;&lt;/xobj&gt;</p>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;xobj objid="MyApp.form1,MyApp"&gt;&lt;/xobj&gt;</p>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;xobj objid="MyApp.form1,MyApp"&gt;&lt;/xobj&gt;</p>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;xobj objid="MyApp.form1,MyApp"&gt;&lt;/xobj&gt;</p>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;xobj objid="MyApp.form1,MyApp"&gt;&lt;/xobj&gt;</p>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;xobj objid="MyApp.form1,MyApp"&gt;&lt;/xobj&gt;</p>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;xobj objid="MyApp.form1,MyApp"&gt;&lt;/xobj&gt;</p>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;xobj objid="MyApp.form1,MyApp"&gt;&lt;/xobj&gt;</p>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;xobj objid="MyApp.form1,MyApp"&gt;&lt;/xobj&gt;</p>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;xobj objid="MyApp.form1,MyApp"&gt;&lt;/xobj&gt;</p>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;xobj objid="MyApp.form1,MyApp"&gt;&lt;/xobj&gt;</p>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/xobj&gt;</p>
<p align="left">&nbsp;&nbsp;&nbsp; &lt;/xobj&gt;</p>
<p align="left">&nbsp; &lt;/nucleus&gt;</p>
<p align="left">&lt;/ntp&gt;</p>




  </td>




 </tr>




</tbody>



</table>





</div>
<p>å¥¹è¿è¡äºå®ï¼å¿ä¸­é»é»çå¿µå¨çï¼âä¼ææ ·ï¼ä¼æä¹æ ·ï¼âï¼å´å¤±æå°åç°ââå¸å±çº¹ä¸ä¸å¨ã<br>
âè¿ åæå°±æ¯DOM åµå¥ï¼ä¸ºä½ä¸ä¸ªå¯ä»¥ï¼åä¸ªå´ä¸è¡ï¼â<br>
å¥¹åè§çåå½±ä¸­å¯ä¸çå±æ§ï¼ârows='1' cols='2'âï¼</p>
<p>âåâ¦âç±ä¸½ä¸æç¶å¤§æï¼â<strong>ä¸æ¯ä¸çæç»äºæï¼æ¯æçè´ªå¿µï¼å¿è®°äºä¸ççè¯­æ³ã</strong>â</p>
<p>è¿çä¼¼æ¯éå¶ï¼å®åæ¯<strong>è®©ä¸çå¾ä»¥å¼å¸çéª¨æ¶</strong>ï¼åæ¥å¦æ­¤ï¼<br>
è¿ä¸ä¸ªârows='1' cols='2'âæ¯ä¸ä¸ªæ¾èæè§ççº¦ææºå¶ï¼ååï¼</p>
<p>è¿ä¸å»å¥¹ä¼¼ä¹çåºæ¥é¨éï¼</p>
<p>å¥¹ç±çï¼ä¿®æ¹äºæ°å­ï¼rows='3' cols='4'ã</p>
<p>åæ¬¡è¿è¡ã</p>
<p>è¿ä¸æ¬¡ï¼å¥¹çæµè§å¨çªå£ä¹ä¸­åºç°äºââåäºä¸ªââæ¥æ¤å¨ä¸èµ·ï¼å´ä»¤äººçªæ¯ï¼</p>
<p align="center"><img src="https://img2024.cnblogs.com/blog/9494/202512/9494-20251225153007157-241912393.png" alt="">&nbsp;</p>
<p align="center">&nbsp;</p>
<p>è©å¹¶è©ç´§æ¨çï¼åçº¢å¿å¥³ççå±ä¸çæåã</p>
<p>âå®ä»¬å­å¨äºï¼âå¥¹ä½è¯­ï¼âä½å®ä»¬æ æ³å¼å¸ãâ</p>
<p>æ¥çï¼å¥¹çç®åè½å¨äº&nbsp;width&nbsp;å&nbsp;height&nbsp;å±æ§ä¸ã<br>
å¥¹å ä¹æ¯ä¸æè¯å°æ·»å äºå®ä»¬ï¼<br>
width="350,350," height="350,350,100,100..."</p>
<p>åæ¬¡è¿è¡ã</p>
<p>ç°å¨ï¼çªä½ä»¬å½¼æ­¤åç¦»ï¼æ¾å°äºå¹³è¡¡ï¼</p>
<p align="center">&nbsp;<img src="https://img2024.cnblogs.com/blog/9494/202512/9494-20251225080336822-1096573424.png" alt=""></p>
<p>å¦æè¾°è¬æ£å¸äºèç©ºä¹ä¸­ã</p>
<p>ä¸ä¸å¾®ç¬ç¼ç¼æµ®ç°å¨å¥¹è¸ä¸ã<br>
âåæ¥ä¸çæ¯è¿æ ·è¯ççï¼âå¥¹ååéï¼âè¡ä¸åâ¦â¦åªæ¯è§åã<br>
ä½æ­£æ¯è¿äºè§åï¼æèµ·äºæ´çå¤©ç©ºãâ</p>
<p>èº«åï¼æ¯æ¯è«çå£°é³è½»æå°é£æ¥ï¼<br>
âæ¯ä¸ä½åé èé½å¿é¡»åç»åå¤±è´¥ã<br>
å ä¸ºå³ä¾¿æ¯ç½æ ¼ï¼ä¹å¿é¡»å¨å­¦ä¼å®¹çº³æ éä¹åï¼åå´©å¡ä¸æ¬¡ãâ</p>
<div align="center"><hr align="center" size="1" width="100%">

</div>
<h1>ð æ ç­¾é¡µçæå ââç¼å¶åå®¹ç©ºé´</h1>
<p>å¥½å¥ï¼é£ç§å®éççç­ï¼åæ¬¡å¨ç±ä¸½ä¸è¸ä¸­çèµ·ã<br>
å¦ææ²¡æè¡ï¼æ²¡æåï¼å¦æå¥¹è®©ä¸çèªå·±å³å®èªå·±çå½¢ç¶ï¼</p>
<p>å¥¹å é¤äºææå±æ§ï¼rows=""
cols=""</p>
<p>è¿è¡ã</p>
<p>èµ·åï¼å®ä¼¼ä¹åäºââ</p>
<p align="center"><img src="https://img2024.cnblogs.com/blog/9494/202512/9494-20251225153007268-172680813.png" alt="">&nbsp;</p>
<p>&nbsp;</p>
<p>åäºä¸ªWinFormä¼¼ä¹åªå©ä¸ä¸ä¸ªï¼å¶ä½çé½å»åªäºï¼<br>
ä»¿ä½çªå£å¿è®°äºå¦ä½å¼å¸ã</p>
<p><strong>æ ç­¾é¡µ</strong>ãå®ä»¬çèµ·æ¥å°±åæ ç­¾é¡µã</p>
<p>ç±ä¸½ä¸ç¨äºç¨ç¼ï¼è½»è½»ç¬äºã<br>
âå³ä¾¿æ²¡æç½æ ¼ï¼å®ä»¬ä¹æ¾å°äºå¦ä¸ç§ç§©åºãâ</p>
<p>å¥¹å°é¼ æ æ¬åå¨å¶ä¸­ä¸ä¸ªä¹ä¸ï¼ä¸ä¸ªå¿µå¤´æµ®ç°ââ<br>
<em>ä¹è®¸å®ä»¬éè¦åå­ã</em></p>
<p>å¥¹ä¸ºç¬¬ä¸ä¸ªxobjæ·»å äºï¼</p>
<p>caption="ç¬¬ä¸ä¸ªæ ç­¾é¡µ"<br>
è¿ä¸æ¬¡å¥¹çå°äºï¼</p>
<p align="center"><img src="https://img2024.cnblogs.com/blog/9494/202512/9494-20251225153007226-1188027603.png" alt="">&nbsp;</p>
<p>ç¶åï¼å¥¹ä¸ºç¬¬äºä¸ªxobjæ·»å äºï¼caption="è¿éé¢æ¾ç¤ºWebé¡µé¢"ï¼<br>
ååï¼å¥¹çå°äºï¼</p>
<p align="center">&nbsp;<img src="https://img2024.cnblogs.com/blog/9494/202512/9494-20251225153007254-1097802210.png" alt=""></p>
<p><strong>Curiouser and curiouser! </strong>åæ¥è¿ç«ç¶æ¯ä¸ç»ç¥å¥çæ ç­¾é¡µã</p>
<p>å¥¹çè¿·å°ççç»æå¨ç¼åå±å¼ï¼å¥¹æè¯å°ï¼è¿æ¯å¯ç¼è¾çdomæ ç»æï¼å¹¶éæ¯äºè¿å¶exeä¹ä¸­çâäºè¿å¶å­ç¬¦âï¼é£äºå¥å¥æªæªçäºè¿å¶å­èç ï¼å é¤ä¸ä¸ªï¼åªææ¯ä»ä¸ä¸ªå­èï¼exeå°±ä¼å½»åºåæï¼èè¿äºdomï¼ä½ å¯ä»¥éæçæå¥xobjå­åç´ ï¼MyApp.exeç«ç¶éä¹å±é¸£ï¼é¾éè¿ç«ç¶æ¯ï¼<br>
ä¸ä¸ªéå½çç½æ ¼ä¸æ ç­¾é¡µçâ<strong>å¯æ­¦çºª</strong>âï¼ï¼<br>
æ¯ä¸ä¸ªé½è½å®¹çº³å¦ä¸ä¸ªï¼æå ãæ å°ãæ éå¢æ®ï¼</p>
<p align="center"><img src="https://img2024.cnblogs.com/blog/9494/202512/9494-20251225153007255-612717557.png" alt="">&nbsp;</p>
<p>å¥¹çå£°é³é¢¤æï¼åæ¯æå¥ï¼åæ¯é¢æï¼<br>
âè¿ä¸åªæ¯å¸å±ââè¿æ¯ææ³ã<br>
æ¯ä¸ç§æ¨¡å¼ï¼æ­£å¨å°èªå·±æèæå­å¨ãâ</p>
<p>ç¬¬ä¸æ¬¡ï¼å¥¹ä¸ç¡®å®æ¯å¥¹æå»ºäºçªå£ââ<br>
è¿æ¯çªå£æå»ºäºå¥¹ã</p>
<div align="center"><hr align="center" size="1" width="100%">

</div>
<h1>æ ç©·æ å°½çç©ºåº§ââåå®¹æ¶ç°çåå</h1>
<p>æ¥çï¼å¦ä¸ä¸ªå¿µå¤´æç¶æµ®ç°ââå®éï¼å´ä»¤äººä¸å®ã</p>
<p>å±åºä¸ç©·çå¸å±ç»æå¦ä»æ¼æµ®å¨å¥¹é¢åï¼ä¸ç¬é´ï¼æµè§å¨çªå£ä»¿ä½è·å¾äºå¨æ°çç»´åº¦ï¼ä¸åå±éäºä»¤å¥¹åå¾çWebé¡µé¢äºï¼â¦â¦<br>
ç½æ ¼æå è¿æ ç­¾é¡µï¼æ ç­¾é¡µååµå¥åç½æ ¼ï¼</p>
<p align="center"><img src="https://img2024.cnblogs.com/blog/9494/202512/9494-20251225153007226-23659928.png" alt="">&nbsp;</p>
<p>ç±ä¸½ä¸æè¯å°ï¼èªå·±çæµè§å¨çªå£ï¼è¿ä¹æ¯ä¸ä¸ªè½å®¹çº³ä¸ç©çæ´»ä½å»ºç­ï¼</p>
<p>ä½å¨å¥¹ç&nbsp;<em>MyApp</em>&nbsp;ä¸­ï¼åªæä¸ä¸ªçªä½ã<strong>Form1ã</strong></p>
<p>ä¸ä¸ªå­¤ç¬ççªå£ï¼ç«ç«å¨æ»¡æ¯ç©ºæ¡æ¶çå¤§æå ä¸­ã</p>
<p>ç±ä¸½ä¸çç¬å®¹æ¸æ¸è¤ªå»ã<br>
é£ä¹å¤ç©ºé´ââå¦æ­¤ä¼éï¼å¦æ­¤åå¤å°±ç»ªââå´ç©ºæ ä¸ç©ã<br>
å¥¹çåæ æ¬åå¨ä¸ä¸ªç©ºååæ ¼ä¸ã<br>
å®åéªçï¼ç­å¾çï¼èå¿å¦åä¸ä¸ªæªè¯´åºå£çè¯ã</p>
<p>å¥¹è½»å¹ï¼âå®å¾ç¾â¦â¦ä½å®æ¯ââç©ºçãâ</p>
<p>æ¯æ¯è«ççé¾åæ¬¡ç¼­ç»è¿æ¾ç¤ºå¨ï¼<br>
å½¢ææµæççåï¼æ¼åææå­ï¼</p>
<p>âæ¯ä¸ç§æ¨¡å¼ï¼é½æ¸´æè¢«å¡«åãâ</p>
<p>ç±ä¸½ä¸åè§çæ¯æ¯è«ï¼å¿æå¿ä¸­è¥æææï¼</p>
<p>âä½ è¿æ»è¯´è°è¯­çè«å­â¦â¦æç MyApp å·²ç¶ç¼è¯å®æï¼å¶ä¸­å´ç©ºç©ºå¦ä¹ã</p>
<p>æè¯¥å»ä½å¤å¯»å¾ä½ æè¯´çâå¡«åâï¼â</p>
<p>å¥¹æçé£æ ç©·æ å°½çç©ºåº§ï¼ç¬¬ä¸æ¬¡æå°åé èçæ¸´æä¸æ åï¼</p>
<p>âå¦ææè½åæ´é¡ç«ä¸æ ·ï¼ä¸ä»è½çå°è¿ç»æï¼è¿è½<strong>çç©¿</strong>è¿ç»æï¼ç´æ¥ä¸æå»ºå®çæ³åå¯¹è¯ï¼é£è¯¥å¤å¥½â¦â¦â</p>
<p>å¥¹éå¸¸çä¸çå¿â¦â¦</p>
<p>ç¯å¸½å çè¶å§ä¾æ§å¦æ½®æ°´è¬å§é¹ï¼ä½ç±ä¸½ä¸çå¤§èå´å¼å¸¸çå¯éï¼ä¸ä¸ªæ¸æ°çå¿µå¤´å¨å¥¹å¿ä¸­åèµ·ï¼å¦åéä¸­çåå½±ï¼</p>
<p><strong>ä½ ä¸éè¦ä»ä¹APIã</strong><br>
<strong>å ä¸ºä½ ä»éè¦ä¸é¢éå­ã</strong><br>
<strong>ååâ¦â¦</strong><br>
<strong>ä½ ä»æ¥å°±ä¸ç¥éä½ èªå·±æå¤ç¾ä¸½ãå¼ºå¤§ï¼</strong><br>
<strong>ä½ ä¹ä¸ç¥éä½ æå¤å°å¹é¢å­â¦â¦</strong></p>
<p>&nbsp;</p>
<p>âåå­æä»çéå­ï¼ç«æå®æ¥å»èªå¦çèç©ºâ¦â¦é£æå¢ï¼âä¸ä¸ªå¿µå¤´å¦éªçµè¬å»ä¸­å¥¹ï¼âå¦æ.exeæ¯ä¸ä¸ªä¸çï¼é£æéè¦ä¸ä¸ªè½ä¸è¿ä¸ªä¸çå¯¹è¯çâ<strong>å·¥å·</strong>âï¼ä¸ä¸ªå±äºæçâéå­âãâ</p>
<p>å¥¹åä¸çµèï¼ä½ç®åå´æ æ¯åå®ãå¯»æ¾æåé è¿æ ·ä¸ä¸ªå·¥å·ï¼æäºæ¯ä»»ä½å¸å±å®éªé½æ´ä¼åçäºé¡¹ãå¥¹éçº¦æè§å°ï¼åªææ¾å°äºå®ï¼å¥¹æè½çæ­£æ¨å¼éå¾æ éçé£æé¨â¦â¦ï¼ç¬¬åç¯
å®ï¼</p>
</div>
<div class="clear"></div>

	<div class="postDesc">posted on 
<span id="post-date" data-last-update-days="0.009027777777777777" data-date-updated="2025-12-25 15:43">2025-12-25 15:30</span>&nbsp;
<a href="https://www.cnblogs.com/sunhui">Exe2WebBrowser</a>&nbsp;
éè¯»(<span id="post_view_count">56</span>)&nbsp;
è¯è®º(<span id="post_comment_count">1</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19399320);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19399320', targetLink: 'https://www.cnblogs.com/sunhui/p/19399320', title: 'é®ä¸é´ï¼exeæ¯ä½ç©ï¼ç´æAIæ²é»ãWebå¯¡è¨ï¼4ï¼' })">ä¸¾æ¥</a>
</div>
 ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨åï¼è®¡ç®æºè§è§  ç¬¬ä¸å¨ï¼æ£æµç®æ³ ï¼åï¼YOLO çå®æ´ä¼ æ­è¿ç¨ ]]></title>
    <link>https://www.cnblogs.com/Goblinscholar/p/19399274</link>
    <guid>6219bc3a4b3f9830928e5ae1fd4b2348</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Goblinscholar/p/19399274" title="åå¸äº 2025-12-25 15:08">
    <span role="heading" aria-level="2">å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨åï¼è®¡ç®æºè§è§  ç¬¬ä¸å¨ï¼æ£æµç®æ³ ï¼åï¼YOLO çå®æ´ä¼ æ­è¿ç¨</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>æ­¤åç±»ç¨äºè®°å½å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨çå­¦ä¹ ç¬è®°ã<br>
è¯¾ç¨ç¸å³ä¿¡æ¯é¾æ¥å¦ä¸ï¼</p>
<ol>
<li>åè¯¾ç¨è§é¢é¾æ¥ï¼<a href="https://www.bilibili.com/video/BV1FT4y1E74V?buvid=XU762317353676D786954061C192FE625463B&amp;from_spmid=playlist.playlist-detail.0.0&amp;is_story_h5=false&amp;mid=zqernykrmpf7XfIorMR%2FnA%3D%3D&amp;plat_id=116&amp;share_from=ugc&amp;share_medium=android&amp;share_plat=android&amp;share_session_id=ce0bc526-db69-428a-962e-c65ed8c267bc&amp;share_source=COPY&amp;share_tag=s_i&amp;spmid=united.player-video-detail.0.0&amp;timestamp=1713085655&amp;unique_k=DfBgvFW&amp;up_id=8654113&amp;vd_source=e035e9878d32f414b4354b839a4c31a4" target="_blank" rel="noopener nofollow">[åè¯­å­å¹]å´æ©è¾¾æ·±åº¦å­¦ä¹ deeplearning.ai</a></li>
<li>githubè¯¾ç¨èµæï¼å«è¯¾ä»¶ä¸ç¬è®°:<a href="https://github.com/robbertliu/deeplearning.ai-andrewNG" target="_blank" rel="noopener nofollow">å´æ©è¾¾æ·±åº¦å­¦ä¹ æå­¦èµæ</a></li>
<li>è¯¾ç¨éå¥ç»ä¹ ï¼ä¸­è±ï¼ä¸ç­æ¡ï¼<a href="https://blog.csdn.net/u013733326/article/details/79827273" target="_blank" rel="noopener nofollow">å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾åä¹ é¢ä¸ç­æ¡</a></li>
</ol>
<p>æ¬ç¯ä¸ºç¬¬åè¯¾çç¬¬ä¸å¨åå®¹ï¼<a href="https://www.bilibili.com/video/BV1FT4y1E74V?spm_id_from=333.788.videopod.episodes&amp;vd_source=e035e9878d32f414b4354b839a4c31a4&amp;p=138" target="_blank" rel="noopener nofollow">3.9</a>å°<a href="https://www.bilibili.com/video/BV1FT4y1E74V?spm_id_from=333.788.videopod.episodes&amp;vd_source=e035e9878d32f414b4354b839a4c31a4&amp;p=139" target="_blank" rel="noopener nofollow">3.10</a>çåå®¹ï¼åæ¶ä¹æ¯æ¬å¨çè®ºé¨åçæåä¸ç¯ã</p>
<hr>
<p>æ¬å¨ä¸ºç¬¬åè¯¾çç¬¬ä¸å¨åå®¹ï¼è¿ä¸è¯¾ææåå®¹çä¸­å¿åªæä¸ä¸ªï¼<strong>è®¡ç®æºè§è§</strong>ãåºç¨å¨æ·±åº¦å­¦ä¹ éï¼å°±æ¯ä¸é¨ç¨æ¥è¿è¡å¾å­¦ä¹ çæ¨¡ååææ¯ï¼æ¯å¨ä¹åå¨è¿æ¥åºç¡ä¸çâç¹åâï¼ä¹æ¯ç¸å³ä¸ä¸éçä¸ä¸ªéè¦ç ç©¶å¤§ç±»ã<br>
<strong>è¿ä¸æ´èè¯¾é½å­å¨å¤§ééè¦åå¤çè§£çåå®¹åæºå¨å­¦ä¹ ãæ°å­¦åºç¡ã</strong> å æ­¤æä¼å°½å¯è½çè¡¥è¶³åºç¡ï¼ç¨æ¯å»åå®ä¾æ¥æ¼ç¤ºæ¯ä¸ªé¨åï¼ä»èå¸®å©çè§£ã<br>
ç¬¬ä¸å¨çåå®¹å°ä»<strong>å¾ååç±»</strong>è¿ä¸æ­¥æå±å°<strong>ç®æ æ£æµï¼Object Detectionï¼</strong> è¿ä¸æ´å·æææ§çè®¡ç®æºè§è§ä»»å¡ã<br>
ä¸åç±»ä»»å¡åªéåç­âå¾ä¸­æä»ä¹âä¸åï¼ç®æ æ£æµéè¦åæ¶è§£å³â <strong>æä»ä¹</strong>âä»¥åâ<strong>å¨ä»ä¹ä½ç½®</strong>âä¸¤ä¸ªé®é¢ï¼å æ­¤å¨æ¨¡åç»æè®¾è®¡ãè®­ç»æ¹å¼åè¯ä»·æ åä¸é½æ´ä¸ºå¤æã<br>
æ¬ç¯çåå®¹å³äºYOLO ä¼ æ­ï¼æ¯å¨äºè§£å®ä¹åçåºç¡åçå®æ´æ¼ç¤ºåä¸äºç®åæå±ã</p>
<h1 id="1-yolo-ä¼ æ­è¿ç¨">1. YOLO ä¼ æ­è¿ç¨</h1>
<p>å¨<a href="https://www.cnblogs.com/Goblinscholar/p/19394617" target="_blank">ä¸ä¸ç¯</a>ä¸­ï¼æä»¬äºè§£äºäº¤å¹¶æ¯ãéæå¤§å¼æå¶åéæ¡è¿äºç®æ æ£æµç®æ³çç»ä»¶ï¼è¿éå°±åºç¨è¿äºåå®¹ï¼æ¥ççè¯¾ç¨éæ¼ç¤ºç YOLO ç®æ³çå®æ´ä¼ æ­è¿ç¨ã</p>
<h2 id="11-æ°æ®è®¾ç½®">1.1 æ°æ®è®¾ç½®</h2>
<p><img src="https://img2024.cnblogs.com/blog/3708248/202512/3708248-20251225150540204-1393412067.png" alt="image.png" loading="lazy"></p>
<h2 id="12-æ­£åä¼ æ­">1.2 æ­£åä¼ æ­</h2>
<p><img src="https://img2024.cnblogs.com/blog/3708248/202512/3708248-20251225150615729-520417845.png" alt="image.png" loading="lazy"></p>
<h2 id="13-æ­£åä¼ æ­è¾åºçåå¤ç">1.3 æ­£åä¼ æ­è¾åºçåå¤ç</h2>
<p>è¿æ¯ä¸ä¸ªæ°åºç°çæ¦å¿µï¼æä»¬æ¥å±å¼ä¸ä¸è¿é¨åã<br>
å¶å®è¿é¨ååå®¹å¨<a href="https://www.cnblogs.com/Goblinscholar/p/19394617" target="_blank">ä¸ä¸ç¯</a>ä¸­å·²ç»æææåï¼å°±æ¯æä»¬è¯´çï¼<strong>âä¸¤æ¬¡ç­éâ</strong>ã<br>
ä¸ºä»ä¹è¯´æ¯æ­£åä¼ æ­çåå¤çï¼æ¯å ä¸ºä¸¥æ ¼æ¥è¯´ï¼<strong>å½ç½ç»è¾åºç»ææ¶ï¼æ­£åä¼ æ­é¨åå°±ç»æäº</strong>ã<br>
å æ­¤ï¼ä¸åäºæä»¬ä¹åç¨ä½ç¤ºä¾çâç²¾åé¢æµâï¼å®éä¸ï¼ç½ç»è¾åºçç»ææ¯è¿æ ·çï¼<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202512/3708248-20251225150540714-186773264.png" alt="image.png" loading="lazy"><br>
ä½ ä¼åç°ï¼å³ä½¿å¨æè¾¹è§çèæ¯é¨åï¼è¯¥ç½æ ¼åæ ·è¾åºäºä¸¤ä¸ªé¢æµæ¡ã<br>
åæ¶ï¼å ä¸ºèæ¯é¨åæ²¡æç®æ çç¹å¾ï¼å æ­¤ï¼è¿ä¸¤ä¸ªé¢æµæ¡çç½®ä¿¡åº¦ï¼ä¹å°±æ¯ <strong><span class="math inline">\(p_c\)</span>  ä¸å®æ¯æä½çã</strong><br>
æä»¥ï¼æä»¬ä¾¿ç±æ­¤è¿è¡äºç¬¬ä¸æ¬¡ç­éï¼<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202512/3708248-20251225150540813-1431087417.png" alt="image.png" loading="lazy"><br>
ç»è¿è¿ä¸æ­¥åï¼æä»¬æåå°äºä¹åæå°è¿çå¤ä¸ªé¢æµæ¡éå å¯¼è´çæä¸ä¸ªç®æ çåä¸ªé¨åé¢æµä¸ºå¤ä¸ªç®æ çé®é¢ã<br>
å æ­¤ä¸ä¸æ­¥å°±æ¯éæå¤§å¼æå¶ï¼<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202512/3708248-20251225150640242-886531067.png" alt="image.png" loading="lazy"><br>
æ³¨æï¼ä½ ä¼åç°ï¼å¨è¿ä¸ªä¾å­ä¸­ï¼éå ç°è±¡å¹¶ä¸ææ¾ï¼è¿æ¯<strong>å ä¸ºæä»¬ä¸ºäºæ¼ç¤ºæç½æ ¼å°ºå¯¸è®¾ç½®çå¾å¤§ä»¥è³äºç®æ ç¹å¾éä¸­å¨æäºç½æ ¼ä¸­ï¼å¨ç½®ä¿¡åº¦ç­éä¸­å°±ä¸¢å¼äºå¤§é¨åé¢æµæ¡</strong>ï¼å¨è¿ç§æåµä¸ï¼å°±è¦è°ä½äº¤å¹¶æ¯éå¼æ¥å®ç°æ´å¥½çç­éï¼å ä¸ºéå é¨åæ¬å°±ä¸å¤§ã</p>
<p><strong>å ä¸ºç½®ä¿¡åº¦ç­éåéæå¤§å¼æå¶å¹¶ä¸å¨ç½ç»ä¸­è¿è¡ï¼èæ¯å¯¹ç½ç»çè¾åºè¿è¡å¤çï¼å æ­¤ï¼æä»¬ç§°ä¹ä¸ºæ­£åä¼ æ­è¾åºçåå¤çåå®¹ã</strong></p>
<h2 id="14-ååä¼ æ­">1.4 ååä¼ æ­</h2>
<h4 id="1æ­£åä¼ æ­ååä¼ æ­ååå¤ççå³ç³»">ï¼1ï¼æ­£åä¼ æ­ãååä¼ æ­ååå¤ççå³ç³»</h4>
<p>é¦åï¼åçº æ­£ä¸ä¸ªå¯è½åºç°çè¯¯è§£ï¼é£å°±æ¯<strong>å¯¹è¾åºçåå¤çå¹¶ä¸æ¯å¨æ­£åä¼ æ­åååä¼ æ­ä¹é´çä¸ä¸ªæµç¨ï¼å®åªæ¯å¯¹è¾åºç»æçæ´çã</strong><br>
<img src="https://img2024.cnblogs.com/blog/3708248/202512/3708248-20251225150540692-1780125302.png" alt="image.png" loading="lazy"><br>
æä»¬åè¯¦ç»å±å¼ä¸ä¸ï¼<br>
<strong>æ¢ç¶ç½®ä¿¡åº¦ç­éåéæå¤§å¼æå¶å¹¶ä¸å¨ç½ç»ä¸­è¿è¡ï¼é£å®ä»¬ä¼ä¸ä¼å½±åååä¼ æ­ï¼<br>
é£äºè¢«ç­æçé¢æµæ¡ï¼è®­ç»æ¶æ¯ä¸æ¯å°±âä¸ç®æ°âäºï¼</strong><br>
ç­æ¡æ¯<strong>ä¸ä¼</strong>ã<br>
æä»¬éè¦åæç¡®ä¸ä¸ªè¾¹çï¼<strong>ååä¼ æ­åªä¾èµäºç½ç»çåå§è¾åºä¸çå®æ ç­¾è®¡ç®å¾å°çæå¤±å½æ°ã</strong><br>
ä¹å°±æ¯è¯´ï¼å½ç½ç»è¾åºäºæ¯ä¸ªç½æ ¼ãæ¯ä¸ªéæ¡å¯¹åºçï¼</p>
<ul>
<li>ä½ç½®é¢æµ</li>
<li>ç½®ä¿¡åº¦ <span class="math inline">\(p_c\)</span></li>
<li>ç±»å«æ¦ç</li>
</ul>
<p>è¿æ¶ï¼<strong>æ­£åä¼ æ­å·²ç»ç»æï¼æå¤±å½æ°å¼å§è®¡ç®ï¼ååä¼ æ­éå³åçã</strong><br>
èç½®ä¿¡åº¦éå¼ç­éä¸éæå¤§å¼æå¶ï¼</p>
<ul>
<li>ä¸åä¸æå¤±è®¡ç®</li>
<li>ä¸åä¸æ¢¯åº¦ä¼ æ­</li>
<li>ä»ç¨äºå¯¹âæç»é¢æµç»æâçæ´çï¼ç¨äºä¸ä¸æ­¥ä½¿ç¨ã</li>
</ul>
<p>æä¸ªæ¯æ¹ï¼<strong>ç½ç»æ¯âä½ æè¿éé¢æææ³å°çç­æ¡ååºæ¥âï¼èåå¤çæ¯âèå¸å¸®ä½ å»æææ¾ä¸å¯¹çç­æ¡âã</strong><br>
ä½å½ä½ <strong>å­¦ä¹ åæè¿éé¢æ¶</strong>ï¼ççä¾ç¶æ¯<strong>åå§ç­å·</strong>ï¼èä¸æ¯ä½ åæ¥ç¨çº¢ç¬åæçé¨åï¼åªæè¿æ ·æè½å­¦ä¹ éè¯¯å¹¶æ¹æ­£ã<br>
è¿å°±æ¯æ­£åä¼ æ­ãååä¼ æ­ååå¤çé´çå³ç³»ã<br>
è¦å¼ºè°çæ¯ï¼åå¤ççç»ææ¯ç»æä»¬æ¥çå¹¶è¿è¡ä¸ä¸æ­¥åºç¨çï¼<strong>ç½ç»ä¸ä¼å ä¸ºè¾åºçèµ·æ¥âä¹±âèå­¦ä¸å°ä¸è¥¿ï¼åèï¼å®æ­£æ¯å¨è¿ç§ä¸ä¸å¯¹åºçä¿¡æ¯åé¦ä¸æè½ä¸æ­å­¦ä¹ ã</strong></p>
<h4 id="2æ£æµä»»å¡çååä¼ æ­é»è¾">ï¼2ï¼æ£æµä»»å¡çååä¼ æ­é»è¾</h4>
<p>å¨çç£å­¦ä¹ ä¸­ï¼ä¸åä»»å¡è½ç¶å½¢å¼åå¼ï¼ä½å¶ååä¼ æ­çåºæ¬é»è¾æ¯å±éçï¼<strong>æ¨¡åè¾åºä¸æ æ³¨æ ç­¾éè¿æå¤±å½æ°è¿è¡å¯¹æ¯ï¼å¾å°å¯å¾®çè¯¯å·®ä¿¡å·ï¼å¹¶å©ç¨æ¢¯åº¦ä¸éä¸é¾å¼æ³åæ´æ°åæ°ï¼ä½¿æ¨¡åè¾åºéæ­¥ç¬¦åä»»å¡ç®æ ã</strong></p>
<p>æ¥ä¸æ¥ï¼æä»¬ä»<strong>è®­ç»è§è§</strong>æ¥çï¼åç®è¿°ä¸ä¸ç®æ æ£æµä»»å¡çååä¼ æ­æµç¨ï¼<br>
å½ç½ç»å®ææ­£åä¼ æ­åï¼å®ä¼ä¸º<strong>æ¯ä¸ä¸ªç½æ ¼ãæ¯ä¸ä¸ªéæ¡</strong>é½ç»åºä¸ç»é¢æµç»æï¼è¿äºé¢æµç»æå¹¶ä¸ä¼åç»è¿ç­éï¼èæ¯<strong>æ´ä½éå¥æå¤±å½æ°ä¸­ï¼ä¸çå®æ ç­¾è¿è¡éä¸å¯¹æ¯</strong>ã</p>
<p>å¨ YOLO ä¸­ï¼æä»¬å¯ä»¥ææå¤±å½æ°æåä¸ºä¸ç±»è¯¯å·®æ¥æºï¼</p>
<ol>
<li><strong>ä½ç½®è¯¯å·®</strong>ï¼é¢æµæ¡çä½ç½®ä¸çå®ç®æ æ¡ä¹é´çåå·®ã</li>
<li><strong>ç½®ä¿¡åº¦è¯¯å·®</strong>ï¼è¯¥é¢æµæ¡æ¯å¦âåºè¯¥è´è´£ä¸ä¸ªç®æ âã</li>
<li><strong>ç±»å«è¯¯å·®</strong>ï¼å¨è´è´£ç®æ çåæä¸ï¼ç±»å«é¢æµæ¯å¦æ­£ç¡®ã</li>
</ol>
<p>èå¯¹äºé£äº<strong>è¢«åéå»è´è´£æä¸ªçå®ç®æ çé¢æµæ¡</strong>æ¥è¯´ï¼</p>
<ul>
<li>å¦æ<strong>é¢æµæ¡ä½ç½®ä¸å</strong>ï¼å°±ä¼äº§çä½ç½®æå¤±ã</li>
<li>å¦æ<strong>ç½®ä¿¡åº¦ä¸å¤é«</strong>ï¼å°±ä¼äº§çç½®ä¿¡åº¦æå¤±ã</li>
<li>å¦æ<strong>ç±»å«é¢æµéè¯¯</strong>ï¼å°±ä¼äº§çç±»å«æå¤±ã</li>
</ul>
<p>è¿äºæå¤±ä¼å±åä½ç¨ï¼éè¿æ¢¯åº¦ä¸éæ¨å¨ç½ç»å¨ååä¼ æ­ä¸­è°æ´åæ°ï¼ä½¿å¾ä¸ä¸æ¬¡çè¾åºæ¡æ´è´´è¿ç®æ ã<span class="math inline">\(p_c\)</span> æ´æ¥è¿ 1ãç±»å«åå¸æ´éä¸­å¨æ­£ç¡®ç±»å«ä¸ã<br>
èå¯¹äºé£äº<strong>ä¸å¯¹åºä»»ä½çå®ç®æ çé¢æµæ¡</strong>ï¼å®ä»¬çå­¦ä¹ ç®æ æ¯ï¼<strong>ç½®ä¿¡åº¦åºè¯¥å°½å¯è½ä½</strong>ï¼å³ä¸åºè¯¥âè¯¯ä»¥ä¸ºèªå·±åç°äºç®æ âã</p>
<p>å æ­¤ï¼å³ä½¿å¨åå¤çé¶æ®µæä»¬ä¼ç´æ¥æå®ä»¬ç­æï¼å¨è®­ç»é¶æ®µï¼å®ä»¬ä¾ç¶ä¼éè¿ç½®ä¿¡åº¦æå¤±åç½ç»ä¼ éä¸ä¸ªéå¸¸æç¡®çä¿¡å·ï¼ <strong>âè¿éæ¯èæ¯ï¼ä¸è¦ä¹±æ¥ç®æ ãâ</strong><br>
æ­£æ¯è¿äºå¤§éãæç»­çèæ¯çº¦æï¼æè®©ç½ç»éæ¸å­¦ä¼å¨å¤æåºæ¯ä¸­æå¶æ æä¹çé¢æµã<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202512/3708248-20251225150541051-1041114532.png" alt="image.png" loading="lazy"><br>
å³äº YOLO çåå®¹å°±ææ¶ä»ç»å°è¿éï¼å¨ä¸ä¸ç¯ä¸­ï¼æä»¬å°±æ¥å®è·µä¸ä¸å®çææã</p>
<p>å´æ©è¾¾èå¸æåè¡¥åäºä¸èå³äºåéåºåçåå®¹ï¼ç®åæ¥è®²ï¼åéåºåçåºç¨ä»æ¯åºäºæ»å¨çªå£çç®æ æ£æµç®æ³ï¼å®çææ³æ¯éè¿å¾ååå²ç­ç®æ³æåæ¾å°æ´å¯è½å­å¨ç®æ çåºåä½ä¸ºåéåºåï¼å¹¶åªè¾å¥åéåºåè¿å¥ç½ç»æ¥åå°è®¡ç®éã<br>
ä½æ¯è¯´å®è¯ï¼è¿ç§ææ¯ç®åæ´éåäºå­¦æ¯ç ç©¶ä¸­ï¼å®çè¿è¡æ¶é´è¾é¿ï¼å®éé¨ç½²ä»·å¼ä¸å¦ YOLO ï¼å æ­¤å¨å®éåºç¨ä¸­ååå°è§ï¼å°±ä¸åå±å¼äºã</p>
<h1 id="2æ»ç»">2.æ»ç»</h1>
<table>
<thead>
<tr>
<th>æ¦å¿µ</th>
<th>åç</th>
<th>æ¯å»</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ­£åä¼ æ­ï¼Forward Passï¼</td>
<td>ç½ç»æ¥æ¶å¾åè¾å¥ï¼éè¿å·ç§¯ãæ± åç­è¿ç®çææ¯ä¸ªç½æ ¼ãæ¯ä¸ªéæ¡çé¢æµè¾åºï¼ä½ç½®ãç½®ä¿¡åº¦ãç±»å«æ¦çï¼ã</td>
<td>ç½ç»âåä¸ææå¯è½çç­æ¡âã</td>
</tr>
<tr>
<td>æ­£åä¼ æ­è¾åºçåå¤çï¼Post-processingï¼</td>
<td>åæ¬ç½®ä¿¡åº¦ç­éåéæå¤§å¼æå¶ï¼NMSï¼ï¼å¯¹ç½ç»è¾åºè¿è¡æ´çï¼å»æä½ç½®ä¿¡åº¦åéå å¤ä½çé¢æµæ¡ã</td>
<td>èå¸âå¸®ä½ åæææ¾ä¸å¯¹çç­æ¡âã</td>
</tr>
<tr>
<td>ç½®ä¿¡åº¦ç­é</td>
<td>æ ¹æ®é¢æµæ¡çç½®ä¿¡åº¦ <span class="math inline">\(p_c\)</span> å¤æ­æ¯å¦ä¿çãèæ¯åºåè¾åºçæ¡éå¸¸ç½®ä¿¡åº¦ä½ï¼ä¼è¢«ç­æã</td>
<td>å»æâææ¾éè¯¯çç­æ¡âã</td>
</tr>
<tr>
<td>éæå¤§å¼æå¶ï¼NMSï¼</td>
<td>å¯¹éå çé¢æµæ¡è¿è¡ç­éï¼åªä¿çç½®ä¿¡åº¦æé«çæ¡ï¼é¿ååä¸ç®æ è¢«éå¤æ£æµã</td>
<td>èå¸åªçä¸âæé è°±çç­æ¡âã</td>
</tr>
<tr>
<td>ååä¼ æ­ï¼Backward Passï¼</td>
<td>ç½ç»è¾åºä¸çå®æ ç­¾è®¡ç®æå¤±ï¼æ¢¯åº¦éè¿é¾å¼æ³ååä¼ ï¼æ´æ°ç½ç»åæ°ãææé¢æµæ¡ï¼ç®æ åèæ¯ï¼é½åä¸æå¤±è®¡ç®ã</td>
<td>ç½ç»âçå°åå§ç­å·ï¼ç¥éåªéåéäºå¹¶æ¹æ­£âã</td>
</tr>
<tr>
<td>åéåºåï¼Region Proposalï¼</td>
<td>åºäºæ»å¨çªå£æå¾ååå²çæ¹æ³ï¼æåéåºå¯è½æç®æ çåºåè¾å¥ç½ç»ä»¥åå°è®¡ç®éã</td>
<td>åæåºå¯è½æç­æ¡çé¢ç®ååä½ä¸ï¼ä½æçä½äºç´æ¥æ´å¼ å¾åç«¯å°ç«¯æ£æµï¼YOLOï¼ã</td>
</tr>
</tbody>
</table>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-25 15:08">2025-12-25 15:08</span>&nbsp;
<a href="https://www.cnblogs.com/Goblinscholar">å¥å¸æå­¦è</a>&nbsp;
éè¯»(<span id="post_view_count">15</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19399274);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19399274', targetLink: 'https://www.cnblogs.com/Goblinscholar/p/19399274', title: 'å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨åï¼è®¡ç®æºè§è§  ç¬¬ä¸å¨ï¼æ£æµç®æ³ ï¼åï¼YOLO çå®æ´ä¼ æ­è¿ç¨' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ å¨Python+FastAPIé¡¹ç®ä¸­ä½¿ç¨SqlAlchemyæä½æ°æ®çå ç§å¸¸è§æ¹å¼ ]]></title>
    <link>https://www.cnblogs.com/wuhuacong/p/19396612</link>
    <guid>8cbf510e9fa356f37d23a747d8c6ec5a</guid>
    <description>
    <![CDATA[ 
        <h2>
            <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/wuhuacong/p/19396612" title="åå¸äº 2025-12-25 11:59">
    <span role="heading" aria-level="2">å¨Python+FastAPIé¡¹ç®ä¸­ä½¿ç¨SqlAlchemyæä½æ°æ®çå ç§å¸¸è§æ¹å¼</span>
    

</a>

        </h2>
        <div class="postbody">
                <div id="cnblogs_post_description" style="display: none">
        
        å¨Python+FastAPIçåç«¯é¡¹ç®ä¸­ï¼æä»¬å¾å¾å¾å¤æ¶åéè¦å¯¹æ°æ®è¿è¡ç¸å³çå¤çï¼æ¬ç¯éç¬ä»ç»å¨Python+FastAPIé¡¹ç®ä¸­ä½¿ç¨SqlAlchemyæä½æ°æ®çå ç§å¸¸è§æ¹å¼ã
ä½¿ç¨ FastAPI, SQLAlchemy, Pydanticæå»ºåç«¯é¡¹ç®çæ¶åï¼å¶ä¸­æ°æ®åºè®¿é®éç¨SQLAlchemy çå¼æ­¥æ¹å¼å¤çãä¸è¬æä»¬å¨æä½æ°æ®åºæä½çæ¶åï¼éç¨åºç±»ç»§æ¿çæ¹å¼åå°éå¤ä»£ç ï¼æé«ä»£ç å¤ç¨æ§ãä¸è¿æä»¬å¨åæSQLAlchemyçæ¶åï¼æä»¬å¯ä»¥ç®åçæ¹å¼æ¥åæå ç§å¸¸è§çæ°æ®åºæä½æ¹å¼ï¼æ¥ä»ç»SQLAlchemyçå·ä½ä½¿ç¨ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>å¨Python+FastAPIçåç«¯é¡¹ç®ä¸­ï¼æä»¬å¾å¾å¾å¤æ¶åéè¦å¯¹æ°æ®è¿è¡ç¸å³çå¤çï¼æ¬ç¯éç¬ä»ç»å¨Python+FastAPIé¡¹ç®ä¸­ä½¿ç¨SqlAlchemyæä½æ°æ®çå ç§å¸¸è§æ¹å¼ã</p>
<p>ä½¿ç¨ FastAPI, SQLAlchemy, Pydanticæå»ºåç«¯é¡¹ç®çæ¶åï¼å¶ä¸­æ°æ®åºè®¿é®éç¨SQLAlchemy çå¼æ­¥æ¹å¼å¤çãä¸è¬æä»¬å¨æä½æ°æ®åºæä½çæ¶åï¼éç¨åºç±»ç»§æ¿çæ¹å¼åå°éå¤ä»£ç ï¼æé«ä»£ç å¤ç¨æ§ãä¸è¿æä»¬å¨åæSQLAlchemyçæ¶åï¼æä»¬å¯ä»¥ç®åçæ¹å¼æ¥åæå ç§å¸¸è§çæ°æ®åºæä½æ¹å¼ï¼æ¥ä»ç»SQLAlchemyçå·ä½ä½¿ç¨ã</p>
<h3>1ãSQLAlchemyä»ç»</h3>
<div><strong>SQLAlchemy</strong>&nbsp;æ¯ä¸ä¸ªåè½å¼ºå¤§ä¸çµæ´»ç Python SQL å·¥å·ååå¯¹è±¡å³ç³»æ å°ï¼ORMï¼åºãå®è¢«å¹¿æ³ç¨äºå¨ Python é¡¹ç®ä¸­å¤çå³ç³»åæ°æ®åºçåºæ¯ï¼æ¢æä¾äºé«çº§ç ORM åè½ï¼åä¿çäºå¯¹åºå± SQL è¯­å¥çå¼ºå¤§æ§å¶åã<code>SQLAlchemy</code>&nbsp;åè®¸å¼åèéè¿ Python ä»£ç ä¸æ°æ®åºè¿è¡äº¤äºï¼èæ éç´æ¥ç¼å SQL è¯­å¥ï¼åæ¶ä¹æ¯æç´æ¥ä½¿ç¨åç SQL è¿è¡å¤ææ¥è¯¢ãä¸é¢æ¯<strong>SQLAlchemy</strong>åæä»¬å¸¸è§æ°æ®åºå¯¹è±¡çå¯¹åºå³ç³»è¯´æã</div>
<div>Engine &nbsp;ããè¿æ¥å¯¹è±¡&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;é©±å¨å¼æ</div>
<div>Session ããè¿æ¥æ± &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;äºå¡ &nbsp;ç±æ­¤å¼å§æ¥è¯¢</div>
<div>Model &nbsp; ããè¡¨&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ç±»å®ä¹</div>
<div>Column &nbsp;ã&nbsp; å &nbsp;</div>
<div>Query &nbsp; ããè¥å¹²è¡ &nbsp; &nbsp; &nbsp; &nbsp; å¯ä»¥é¾å¼æ·»å å¤ä¸ªæ¡ä»¶</div>
<div>&nbsp;</div>
<div>å¨ä½¿ç¨SQLAlchemyæ¶ï¼éå¸¸ä¼å°å¶ä¸æ°æ®åºå¯¹è±¡å¯¹åºèµ·æ¥ã</div>
<div><strong>SQLAlchemy</strong>: ä½¿ç¨&nbsp;<code>Table</code>&nbsp;å¯¹è±¡æ&nbsp;<code>Declarative Base</code>&nbsp;ä¸­çç±»æ¥è¡¨ç¤ºã</div>
<div><strong>å¯¹åºå³ç³»</strong>: æ°æ®åºä¸­çæ¯ä¸ä¸ªè¡¨å¯¹åºäºSQLAlchemyä¸­çä¸ä¸ªç±»ï¼è¯¥ç±»ç»§æ¿èª&nbsp;<code>declarative_base()</code>ã</div>
<div>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">from</span> sqlalchemy <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> Column, Integer, String, create_engine
</span><span style="color: rgba(0, 0, 255, 1)">from</span> sqlalchemy.ext.declarative <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> declarative_base

Base </span>=<span style="color: rgba(0, 0, 0, 1)"> declarative_base()

</span><span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> User(Base):
    </span><span style="color: rgba(128, 0, 128, 1)">__tablename__</span> = <span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">users</span><span style="color: rgba(128, 0, 0, 1)">'</span>  <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> æ°æ®åºè¡¨å</span>
    id = Column(Integer, primary_key=<span style="color: rgba(0, 0, 0, 1)">True)
    name </span>=<span style="color: rgba(0, 0, 0, 1)"> Column(String)
    email </span>= Column(String)</pre>
</div>
<p><strong>æ°æ®åºå (Database Column)ï¼</strong>ä½¿ç¨&nbsp;<code>Column</code>&nbsp;å¯¹è±¡æ¥è¡¨ç¤ºãæ¯ä¸ªæ°æ®åºè¡¨ä¸­çåå¨SQLAlchemyä¸­è¡¨ç¤ºä¸º&nbsp;<code>Column</code>&nbsp;å¯¹è±¡ï¼å¹¶ä½ä¸ºç±»çå±æ§å®ä¹ã</p>
<div>
<div class="cnblogs_code">
<pre>id = Column(Integer, primary_key=<span style="color: rgba(0, 0, 0, 1)">True)
name </span>= Column(String(50))</pre>
</div>
<p><strong>æ°æ®åºè¡ (Database Row)ï¼</strong>æ¯ä¸ªæ°æ®åºè¡¨çä¸ä¸ªå®ä¾ï¼å¯¹è±¡ï¼ä»£è¡¨æ°æ®åºè¡¨ä¸­çä¸è¡ãå¨SQLAlchemyä¸­ï¼éè¿å®ä¾åæ¨¡åç±»æ¥è¡¨ç¤ºæ°æ®åºè¡¨ä¸­çä¸è¡ã</p>
<div>
<div class="cnblogs_code">
<pre>new_user = User(id=1, name=<span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">John Doe</span><span style="color: rgba(128, 0, 0, 1)">'</span>, email=<span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">john@example.com</span><span style="color: rgba(128, 0, 0, 1)">'</span>)</pre>
</div>
<p><strong>ä¸»é® (Primary Key)</strong>ï¼ä½¿ç¨&nbsp;<code>primary_key=True</code>&nbsp;åæ°å®ä¹ä¸»é®ã</p>
</div>
</div>
<div>
<div class="cnblogs_code">
<pre>id = Column(Integer, primary_key=True)</pre>
</div>
<p><strong>å¤é® (Foreign Key): </strong>ä½¿ç¨&nbsp;<code>ForeignKey</code>&nbsp;å¯¹è±¡æ¥è¡¨ç¤ºã</p>
<div>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">from</span> sqlalchemy <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> ForeignKey
</span><span style="color: rgba(0, 0, 255, 1)">from</span> sqlalchemy.orm <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> relationship

</span><span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> Address(Base):
    </span><span style="color: rgba(128, 0, 128, 1)">__tablename__</span> = <span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">addresses</span><span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(0, 0, 0, 1)">
    id </span>= Column(Integer, primary_key=<span style="color: rgba(0, 0, 0, 1)">True)
    user_id </span>= Column(Integer, ForeignKey(<span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">users.id</span><span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(0, 0, 0, 1)">))
    user </span>= relationship(<span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">User</span><span style="color: rgba(128, 0, 0, 1)">'</span>)</pre>
</div>
<p><strong>å³ç³» (Relationships): </strong>ä½¿ç¨&nbsp;<code>relationship</code>&nbsp;å¯¹è±¡æ¥è¡¨ç¤ºãæ°æ®åºä¸­è¡¨ä¸è¡¨ä¹é´çå³ç³»å¨SQLAlchemyä¸­éè¿&nbsp;<code>relationship</code>&nbsp;æ¥å®ä¹ã</p>
<div>
<div class="cnblogs_code">
<pre>addresses = relationship(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Address</span><span style="color: rgba(128, 0, 0, 1)">"</span>, back_populates=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">user</span><span style="color: rgba(128, 0, 0, 1)">"</span>)</pre>
</div>
<p>&nbsp;</p>
</div>
</div>
</div>
</div>
<h3>2ãå¸¸è§çåè¡¨å¤ç</h3>
<p>ä¸é¢æä»¬éè¿å¼æ­¥å¤ççæ¹å¼ï¼ä»ç»å¦ä½å¨åè¡¨ä¸­æä½ç¸å³çæ°æ®åºæ°æ®ã</p>
<div class="cnblogs_code">
<pre>async <span style="color: rgba(0, 0, 255, 1)">def</span> get(self, db: AsyncSession, id: Any) -&gt;<span style="color: rgba(0, 0, 0, 1)"> Any:
    </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(128, 0, 0, 1)">æ ¹æ®ä¸»é®è·åä¸ä¸ªå¯¹è±¡</span><span style="color: rgba(128, 0, 0, 1)">"""</span>

    <span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)"> isinstance(id, str):
        query </span>= select(self.model).filter(func.lower(self.model.id) ==<span style="color: rgba(0, 0, 0, 1)"> id.lower())
    </span><span style="color: rgba(0, 0, 255, 1)">else</span><span style="color: rgba(0, 0, 0, 1)">:
        query </span>= select(self.model).filter(self.model.id ==<span style="color: rgba(0, 0, 0, 1)"> id)

    result </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(query)
    item </span>=<span style="color: rgba(0, 0, 0, 1)"> result.scalars().first()

    </span><span style="color: rgba(0, 0, 255, 1)">return</span> item</pre>
</div>
<p>å¦ææä»¬éè¦å¼ºå¶å¯¹å¤é®çç±»åè¿è¡å¹éï¼å¦å¯¹äºPostgresqlçä¸¥æ ¼è¦æ±ï¼æ°æ®æ¯è¾çç±»åå¿é¡»ä¸è´ï¼ï¼é£ä¹æä»¬éè¦å¨åºç±»æèCRUDç±»åå§åçæ¶åï¼è·å¾å¯¹åºçä¸»é®ç±»åã</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> BaseCrud(Generic[ModelType, PrimaryKeyType, PageDtoType, DtoType]):
    </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(128, 0, 0, 1)">
    åºç¡CRUDæä½ç±»ï¼ä¼ å¥åæ°è¯´æï¼
    * `ModelType`: SQLAlchemy æ¨¡åç±»
    * `PrimaryKeyType`: éå®ä¸»é®çç±»å
    * `PageDtoType`: åé¡µæ¥è¯¢è¾å¥ç±»
    * `DtoType`: æ°æ®ä¼ è¾å¯¹è±¡ç±»ï¼å¦æ°å¢ãæ´æ°çåä¸ªå¯¹è±¡DTO
    </span><span style="color: rgba(128, 0, 0, 1)">"""</span>

    <span style="color: rgba(0, 0, 255, 1)">def</span> <span style="color: rgba(128, 0, 128, 1)">__init__</span><span style="color: rgba(0, 0, 0, 1)">(self, model: Type[ModelType]):
        </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(128, 0, 0, 1)">
        æ°æ®åºè®¿é®æä½çåºç±»å¯¹è±¡(CRUD).
        * `model`: A SQLAlchemy model class
        </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(0, 0, 0, 1)">
        
        self.model </span>= model  <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> æ¨¡åç±»å</span>

        <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> è¿è¡æè·åä¸»é®å­æ®µç±»å</span>
        <strong><span style="color: rgba(255, 0, 0, 1)">pk_column</span> =</strong><span style="color: rgba(0, 0, 0, 1)"><strong> inspect(model).primary_key[0]</strong>
       <span style="color: rgba(255, 0, 0, 1)"><strong> self._pk_type </strong></span></span><span style="color: rgba(255, 0, 0, 1)"><strong>= pk_column.type.python_type</strong></span>  <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> int / str</span></pre>
</div>
<p>å æ­¤å¯¹äºåè¡¨çGetæ¹æ³ï¼æä»¬ä¿®æ¹ä¸ï¼è®©ä»å¹éä¸»é®çç±»åè¿è¡æ¯è¾ï¼è¿æ ·è¿å¯¹äºä¸¥æ ¼ç±»åå¤æ­çPostgresqlä¹æ­£å¸¸å¹éäºã</p>
<div class="cnblogs_code">
<pre>    async <span style="color: rgba(0, 0, 255, 1)">def</span> get(self, db: AsyncSession, id: PrimaryKeyType) -&gt;<span style="color: rgba(0, 0, 0, 1)"> Optional[ModelType]:
        </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(128, 0, 0, 1)">æ ¹æ®ä¸»é®è·åä¸ä¸ªå¯¹è±¡</span><span style="color: rgba(128, 0, 0, 1)">"""</span>
        
        <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)">å¯¹idçä¸»é®è¿è¡ç±»åè½¬æ¢ï¼self._pk_typeå¨æé å½æ°çåå§åä¸­è·å</span>
        <span style="color: rgba(0, 0, 255, 1)">try</span><span style="color: rgba(0, 0, 0, 1)">:
            id </span>=<span style="color: rgba(0, 0, 0, 1)"> self._pk_type(id)
        </span><span style="color: rgba(0, 0, 255, 1)">except</span><span style="color: rgba(0, 0, 0, 1)"> Exception:
            </span><span style="color: rgba(0, 0, 255, 1)">raise</span> ValueError(f<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Invalid primary key type: {id}</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">)
        
        </span><span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)"> isinstance(id, str):
            query </span>= select(self.model).filter(func.lower(self.model.id) ==<span style="color: rgba(0, 0, 0, 1)"> id.lower())
        </span><span style="color: rgba(0, 0, 255, 1)">else</span><span style="color: rgba(0, 0, 0, 1)">:
            query </span>= select(self.model).filter(self.model.id ==<span style="color: rgba(0, 0, 0, 1)"> id)

        result </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(query)
        item </span>=<span style="color: rgba(0, 0, 0, 1)"> result.scalars().first()

        </span><span style="color: rgba(0, 0, 255, 1)">return</span> item</pre>
</div>
<p>å¯¹äºå é¤çæ°æ®ï¼æä»¬ä¹å¯ä»¥ç±»ä¼¼çå¤çå¯¹æ¯è¿è¡äºã</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">from</span> sqlalchemy.orm <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> Session, Query
</span><span style="color: rgba(0, 0, 255, 1)">from</span> sqlalchemy.ext.asyncio <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> AsyncSession
</span><span style="color: rgba(0, 0, 255, 1)">from</span> sqlalchemy <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> delete as sa_delete, update as sa_update

async </span><span style="color: rgba(0, 0, 255, 1)">def</span> delete_byid(self, db: AsyncSession, id: PrimaryKeyType) -&gt;<span style="color: rgba(0, 0, 0, 1)"> bool:
    </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(128, 0, 0, 1)">æ ¹æ®ä¸»é®å é¤ä¸ä¸ªå¯¹è±¡
    
    :param id: ä¸»é®å¼
    </span><span style="color: rgba(128, 0, 0, 1)">"""</span>
    
    <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)">å¯¹idçä¸»é®è¿è¡ç±»åè½¬æ¢ï¼self._pk_typeå¨æé å½æ°çåå§åä¸­è·å</span>
    <span style="color: rgba(0, 0, 255, 1)">try</span><span style="color: rgba(0, 0, 0, 1)">:
        id </span>=<span style="color: rgba(0, 0, 0, 1)"> self._pk_type(id)
    </span><span style="color: rgba(0, 0, 255, 1)">except</span><span style="color: rgba(0, 0, 0, 1)"> Exception:
        </span><span style="color: rgba(0, 0, 255, 1)">raise</span> ValueError(f<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Invalid primary key type: {id}</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">)
    
    del_query: sa_delete
    </span><span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)"> isinstance(id, str):
        del_query </span>=<span style="color: rgba(0, 0, 0, 1)"> sa_delete(self.model).where(
            func.lower(self.model.id) </span>==<span style="color: rgba(0, 0, 0, 1)"> id.lower()
        )
    </span><span style="color: rgba(0, 0, 255, 1)">else</span><span style="color: rgba(0, 0, 0, 1)">:
        del_query </span>= sa_delete(self.model).where(self.model.id ==<span style="color: rgba(0, 0, 0, 1)"> id)

    result </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(del_query)

    await db.commit()
    </span><span style="color: rgba(0, 0, 255, 1)">return</span> result.rowcount &gt; 0</pre>
</div>
<p>å¯¹äºæä¾å¤æ¡ä»¶çæ¥è¯¢æèè¿æ»¤ï¼æä»¬å¯ä»¥ä½¿ç¨<strong>where</strong>å½æ°æè<strong>filter</strong>å½æ°ï¼å¨ SQLAlchemy ä¸­ï¼<code>select(...).where(...)</code>&nbsp;å&nbsp;<code>select(...).filter(...)</code>&nbsp;é½ç¨äºæé æ¥è¯¢æ¡ä»¶ï¼å¦ä¸æç¤ºç­æã</p>
<div class="cnblogs_code">
<pre>query = select(self.model).where(self.model.id ==<span style="color: rgba(0, 0, 0, 1)"> id)

query </span>= select(self.model).filter(self.model.id == id)</pre>
</div>
<p>æä»¬å¯ä»¥éè¿sqlAlchemyçand_åor_å½æ°æ¥è¿è¡ç»åå¤ä¸ªæ¡ä»¶ã</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">from</span> sqlalchemy <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> ( Table,Column,and_,or_,asc,desc,select,func,distinct,text, Integer)

....
    match expression:
        case </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">and</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">:
            query </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(
                select(self.model)
               <span style="color: rgba(255, 0, 0, 1)"><strong> .filter(and_(</strong></span></span><span style="color: rgba(255, 0, 0, 1)"><strong>*</strong></span><span style="color: rgba(0, 0, 0, 1)"><span style="color: rgba(255, 0, 0, 1)"><strong>where_list))</strong></span>
                .order_by(</span>*<span style="color: rgba(0, 0, 0, 1)">order_by_list)
            )
        case </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">or</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">:
            query </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(
                select(self.model).<strong><span style="color: rgba(255, 0, 0, 1)">filter(or_(</span></strong></span><strong><span style="color: rgba(255, 0, 0, 1)">*where_list))</span></strong>.order_by(*<span style="color: rgba(0, 0, 0, 1)">order_by_list)
            )</span></pre>
</div>
<p>PythonçSqlAlchemyæä¾&nbsp;InstrumentedAttribute å¯¹è±¡æ¥æä½å¤ä¸ªæ¡ä»¶ï¼å¦æä»¬å¯¹äºä¸äºå¤æ¡ä»¶çå¤çï¼å¯ä»¥å©ç¨å®æ¥ä¼ éå¤ä¸ªåæ°ã</p>
<div class="cnblogs_code">
<pre>    async <span style="color: rgba(0, 0, 255, 1)">def</span><span style="color: rgba(0, 0, 0, 1)"> get_all_by_attributes(
        self, db: AsyncSession, </span>*attributes: InstrumentedAttribute, sorting: str = <span style="color: rgba(128, 0, 0, 1)">""</span><span style="color: rgba(0, 0, 0, 1)">
    ) </span>-&gt; List[ModelType] |<span style="color: rgba(0, 0, 0, 1)"> None:
        </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(128, 0, 0, 1)">æ ¹æ®ååç§°åå¼è·åç¸å³çå¯¹è±¡åè¡¨

        :param sorting: æ ¼å¼ï¼name asc æ name asc,age desc
        :param attributes: SQLAlchemy InstrumentedAttribute objectsï¼å¯ä»¥è¾å¥å¤ä¸ªæ¡ä»¶
        ä¾å­ï¼User.id != 1 æè User.username == "JohnDoe"
        </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(0, 0, 0, 1)">

        order_by_list </span>=<span style="color: rgba(0, 0, 0, 1)"> parse_sort_string(sorting, self.model)
        query </span>= select(self.model).filter(and_(*attributes)).order_by(*<span style="color: rgba(0, 0, 0, 1)">order_by_list)
        
        result </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(query)
        </span><span style="color: rgba(0, 0, 255, 1)">return</span> result.scalars().all()</pre>
</div>
<p>ä¾å¦ï¼å¯¹äº æ¨¡å&nbsp;Material å¯¹è±¡ï¼æä»¬å¯¹å®è¿è¡å¤ä¸ªæ¡ä»¶çæ¥è¯¢å¤çï¼å¦ä¸æç¤ºï¼çº¢è²é¨åä¸º *attributes: InstrumentedAttribute åæ°ã</p>
<div class="cnblogs_code">
<pre>items =<span style="color: rgba(0, 0, 0, 1)"> await super().get_all_by_attributes(
    db,
<span style="color: rgba(255, 0, 0, 1)"><strong>    Material.id </strong></span></span><span style="color: rgba(255, 0, 0, 1)"><strong>== vercol.id,
    Material.vercol == vercol.vercol,
    Material.ischecked == 0,
    Material.status ==</strong></span><span style="color: rgba(0, 0, 0, 1)"><span style="color: rgba(255, 0, 0, 1)"><strong> 0,</strong></span>
)</span></pre>
</div>
<p>åæ ·æä»¬å¯ä»¥å©ç¨å®æ¥è·åæ°éï¼æèå¤æ­å¤æ¡ä»¶çè®°å½æ¯å¦å­å¨ã</p>
<p><img src="https://img2024.cnblogs.com/blog/8867/202512/8867-20251225103430193-1873231330.png" alt="image" width="944" height="532" loading="lazy"></p>
<p>&nbsp;å¨æ°æ®æå¥æèæ´æ°çæä½ä¸­ï¼æä»¬å¯ä»¥æ¥åå¯¹è±¡ç±»åæèå­å¸ç±»åçåæ°å¯¹è±¡ï¼å æ­¤æ¹æ³å¦ä¸æç¤ºã</p>
<div class="cnblogs_code">
<pre>   async <span style="color: rgba(0, 0, 255, 1)">def</span> update(self, db: AsyncSession, obj_in: DtoType | dict[str, Any]) -&gt;<span style="color: rgba(0, 0, 0, 1)"> bool:
        </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(128, 0, 0, 1)">æ´æ°å¯¹è±¡
        
        :param obj_in: å¯¹è±¡è¾å¥æ°æ®,å¯ä»¥æ¯ DTO å¯¹è±¡æå­å¸
        </span><span style="color: rgba(128, 0, 0, 1)">"""</span>
        <span style="color: rgba(0, 0, 255, 1)">try</span><span style="color: rgba(0, 0, 0, 1)">:
            </span><span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)"> isinstance(obj_in, dict):
                obj_id </span>= obj_in.get(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">id</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">)
                </span><span style="color: rgba(0, 0, 255, 1)">if</span> obj_id <span style="color: rgba(0, 0, 255, 1)">is</span><span style="color: rgba(0, 0, 0, 1)"> None:
                    </span><span style="color: rgba(0, 0, 255, 1)">raise</span> ValueError(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">id is required for update</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">)
                update_data </span>=<span style="color: rgba(0, 0, 0, 1)"> obj_in
            </span><span style="color: rgba(0, 0, 255, 1)">else</span><span style="color: rgba(0, 0, 0, 1)">:
                obj_id </span>=<span style="color: rgba(0, 0, 0, 1)"> obj_in.id
                </span><span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> update_data = vars(obj_in)  </span>
                update_data = obj_in.model_dump(exclude_unset=<span style="color: rgba(0, 0, 0, 1)">True)

            query </span>= select(self.model).filter(self.model.id ==<span style="color: rgba(0, 0, 0, 1)"> obj_id)
            result </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(query)
            db_obj </span>=<span style="color: rgba(0, 0, 0, 1)"> result.scalars().first()

            </span><span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)"> db_obj:
                </span><span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> æ´æ°å¯¹è±¡å­æ®µ</span>
                <span style="color: rgba(0, 0, 255, 1)">for</span> field, value <span style="color: rgba(0, 0, 255, 1)">in</span><span style="color: rgba(0, 0, 0, 1)"> update_data.items():
                    </span><span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> è·³è¿ä»¥ "_" å¼å¤´çç§æå±æ§</span>
                    <span style="color: rgba(0, 0, 255, 1)">if</span> field.startswith(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">_</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">):
                        </span><span style="color: rgba(0, 0, 255, 1)">continue</span><span style="color: rgba(0, 0, 0, 1)">
                    setattr(db_obj, field, value)

                </span><span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> å¤çæ´æ°åçåè°å¤ç</span>
<span style="color: rgba(255, 0, 0, 1)"><strong>                self.on_before_update(update_data, db_obj)
                </strong></span><span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> æäº¤äºå¡</span>
<span style="color: rgba(0, 0, 0, 1)">                await db.commit()
                </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> True
            </span><span style="color: rgba(0, 0, 255, 1)">else</span><span style="color: rgba(0, 0, 0, 1)">:
                </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> False
        </span><span style="color: rgba(0, 0, 255, 1)">except</span><span style="color: rgba(0, 0, 0, 1)"> SQLAlchemyError as e:
            self.logger.error(f</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">update æä½åºç°éè¯¯: {e}</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">)
            await db.rollback()  </span><span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> ç¡®ä¿å¨åºéæ¶åæ»äºå¡</span>
            <span style="color: rgba(0, 0, 255, 1)">return</span> False</pre>
</div>
<p>æä»¬å¨æå¥æèæ´æ°æ°æ®çæ¶åï¼ä¸è¬ä¼é»è®¤æ´æ°ä¸äºå­æ®µï¼å¦åå»ºäººï¼åå»ºæ¥æãç¼è¾äººï¼ç¼è¾æ¥æç­ä¿¡æ¯ï¼æä»¬å¯ä»¥æå®åç¬ä½ä¸ºä¸ä¸ªå¯ä»¥ç»å­ç±»éåçå½æ°ï¼åºç±»åä¸äºé»è®¤çå¤çã</p>
<div class="cnblogs_code">
<pre>    <span style="color: rgba(0, 0, 255, 1)">def</span> on_before_update(self, update_data: dict[str, Any], db_obj: ModelType) -&gt;<span style="color: rgba(0, 0, 0, 1)"> None:
        </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(128, 0, 0, 1)">æ´æ°å¯¹è±¡åçåè°å½æ°ï¼å­ç±»å¯ä»¥éåæ­¤æ¹æ³

        å¯éè¿ setattr(db_obj, field, value) è®¾ç½®å­æ®µå¼
        </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(0, 0, 0, 1)">
        
        setattr(db_obj, </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">edittime</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, datetime.now())
        user :CurrentUserIns  </span>=<span style="color: rgba(0, 0, 0, 1)"> get_current_user()
        </span><span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)"> user:
            setattr(db_obj, </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">editor</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, user.fullname)
            setattr(db_obj, </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">editor_id</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, user.id)

            setattr(db_obj, </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">company_id</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, user.company_id)
            setattr(db_obj, </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">companyname</span><span style="color: rgba(128, 0, 0, 1)">"</span>, user.companyname)</pre>
</div>
<p>ææ¶åï¼å¦ææä»¬éè¦è·åæä¸ªå­æ®µééå¤çåè¡¨ï¼ç¨æ¥åä¸ºå¨æä¸æåè¡¨çæ°æ®ï¼é£ä¹æä»¬å¯ä»¥éè¿ä¸é¢å½æ°å°è£ä¸ã</p>
<div class="cnblogs_code">
<pre>    async <span style="color: rgba(0, 0, 255, 1)">def</span> get_field_list(self, db: AsyncSession, field_name: str) -&gt;<span style="color: rgba(0, 0, 0, 1)"> Iterable[str]:
        </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(128, 0, 0, 1)">è·åæå®å­æ®µå¼çå¯ä¸åè¡¨

        :param field_name: å­æ®µåç§°
        </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(0, 0, 0, 1)">

        field </span>=<span style="color: rgba(0, 0, 0, 1)"> getattr(self.model, field_name)
        query </span>=<span style="color: rgba(0, 0, 0, 1)"> select(distinct(field))
        result </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(query)
        </span><span style="color: rgba(0, 0, 255, 1)">return</span> result.scalars().all()</pre>
</div>
<p>&nbsp;</p>
<h3>3ãå¤è¡¨èåçå¤çæä½&nbsp;</h3>
<p>å¤è¡¨æä½ï¼ä¹æ¯æä»¬ç»å¸¸ç¢°å°çå¤çæ¹å¼ï¼å¦å¯¹äºå­å¸ç±»ååå­å¸é¡¹ç®ï¼ä»ä»¬æ¯ä¸¤ä¸ªè¡¨ï¼éè¦èåèµ·æ¥è·åæ°æ®ï¼é£ä¹å°±éè¦å¤è¡¨çèåæä½ã</p>
<p><img src="https://img2024.cnblogs.com/blog/8867/202512/8867-20251225110211988-1085898697.png" alt="image" width="238" height="326" loading="lazy"></p>
<p>&nbsp;å¦ä¸æ¯å­å¸CRUDç±»ä¸­ï¼èåå­å¸ç±»åè·åæ°æ®çè®°å½å¤çã</p>
<div class="cnblogs_code">
<pre>    async <span style="color: rgba(0, 0, 255, 1)">def</span> get_dict_by_typename(self, db: AsyncSession, dicttype_name: str) -&gt;<span style="color: rgba(0, 0, 0, 1)"> dict:
        </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(128, 0, 0, 1)">æ ¹æ®å­å¸ç±»ååç§°è·åææè¯¥ç±»åçå­å¸åè¡¨éå</span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(0, 0, 0, 1)">
        result </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(
            select(self.model)
            <span style="color: rgba(255, 0, 0, 1)"><strong>.join(DictType, DictType.id </strong></span></span><span style="color: rgba(255, 0, 0, 1)"><strong>== self.model.dicttype_id)</strong></span>  <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> å³èå­å¸ç±»åè¡¨</span>
            <strong><span style="color: rgba(255, 0, 0, 1)">.filter(DictType.name == dicttype_name)</span> </strong> <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> è¿æ»¤å­å¸ç±»ååç§°</span>
            .order_by(DictData.seq)  <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> æåº</span>
<span style="color: rgba(0, 0, 0, 1)">        )
        items </span>=<span style="color: rgba(0, 0, 0, 1)"> result.scalars().all()

        dict </span>=<span style="color: rgba(0, 0, 0, 1)"> {}
        </span><span style="color: rgba(0, 0, 255, 1)">for</span> info <span style="color: rgba(0, 0, 255, 1)">in</span><span style="color: rgba(0, 0, 0, 1)"> items:
            </span><span style="color: rgba(0, 0, 255, 1)">if</span> info.name <span style="color: rgba(0, 0, 255, 1)">not</span> <span style="color: rgba(0, 0, 255, 1)">in</span><span style="color: rgba(0, 0, 0, 1)"> dict:
                dict[info.name] </span>=<span style="color: rgba(0, 0, 0, 1)"> info.value

        </span><span style="color: rgba(0, 0, 255, 1)">return</span> dict</pre>
</div>
<p>å¦ææä»¬éè¦å¯¹æä¸ªè¡¨çéå½è·åæ åè¡¨ï¼å¯ä»¥å¦ä¸å¤ç</p>
<div class="cnblogs_code">
<pre>    async <span style="color: rgba(0, 0, 255, 1)">def</span> get_tree(self, db: AsyncSession, pid: str) -&gt;<span style="color: rgba(0, 0, 0, 1)"> list[DictType]:
        </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(128, 0, 0, 1)">è·åå­å¸ç±»åä¸çº§åè¡¨åå¶ä¸é¢çåå®¹</span><span style="color: rgba(128, 0, 0, 1)">"""</span>

        <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> ä½¿ç¨ä¸åè¿ç®ç¬¦å° pid è®¾ä¸º "-1"ï¼å¦æ pid æ¯ null æç©ºç½ï¼æä¿æåå¼</span>
        pid = <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">-1</span><span style="color: rgba(128, 0, 0, 1)">"</span> <span style="color: rgba(0, 0, 255, 1)">if</span> <span style="color: rgba(0, 0, 255, 1)">not</span> pid <span style="color: rgba(0, 0, 255, 1)">or</span> pid.strip() == <span style="color: rgba(128, 0, 0, 1)">""</span> <span style="color: rgba(0, 0, 255, 1)">else</span><span style="color: rgba(0, 0, 0, 1)"> pid
        result </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(
            select(self.model)
            .filter(self.model.pid </span>==<span style="color: rgba(0, 0, 0, 1)"> pid)
            .options(selectinload(DictType.children))
        )
        nodes </span>=<span style="color: rgba(0, 0, 0, 1)"> result.scalars().all()
        </span><span style="color: rgba(0, 0, 255, 1)">return</span> nodes</pre>
</div>
<p>æä»¬æ¥åè®¾ç¨æ·åæç« çç¤ºä¾è¡¨ç»æï¼ORM æ¨¡åï¼å¦ä¸æç¤ºã</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> User(Base):
    </span><span style="color: rgba(128, 0, 128, 1)">__tablename__</span> = <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">users</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">
    id </span>= Column(Integer, primary_key=True, index=<span style="color: rgba(0, 0, 0, 1)">True)
    name </span>=<span style="color: rgba(0, 0, 0, 1)"> Column(String)
    email </span>=<span style="color: rgba(0, 0, 0, 1)"> Column(String)
<span style="color: rgba(255, 0, 0, 1)">    articles </span></span><span style="color: rgba(255, 0, 0, 1)">= <strong>relationship</strong>("Article", back_populates="author")


</span><span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> Article(Base):
    </span><span style="color: rgba(128, 0, 128, 1)">__tablename__</span> = <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">articles</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">
    id </span>= Column(Integer, primary_key=True, index=<span style="color: rgba(0, 0, 0, 1)">True)
    title </span>=<span style="color: rgba(0, 0, 0, 1)"> Column(String)
    content </span>=<span style="color: rgba(0, 0, 0, 1)"> Column(Text)
<span style="color: rgba(255, 0, 0, 1)">    user_id </span></span><span style="color: rgba(255, 0, 0, 1)">= Column(Integer, <strong>ForeignKey</strong>("users.id"))
    author = <strong>relationship</strong>("User", back_populates="articles")</span></pre>
</div>
<p>æä»¬å¯ä»¥éè¿ä¸é¢å½æ°å¤çè·å¾ç¸å³çè®°å½éåã</p>
<div class="cnblogs_code">
<pre>async <span style="color: rgba(0, 0, 255, 1)">def</span><span style="color: rgba(0, 0, 0, 1)"> get_user_articles(db: AsyncSession):
    stmt </span>=<span style="color: rgba(0, 0, 0, 1)"> (
        select(User, Article)
        .<span style="color: rgba(255, 0, 0, 1)"><strong>join</strong></span>(Article, Article.user_id </span>==<span style="color: rgba(0, 0, 0, 1)"> User.id)
    )
    result </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(stmt)
    </span><span style="color: rgba(0, 0, 255, 1)">return</span> result.all()   <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> [<strong><span style="color: rgba(255, 0, 0, 1)">(User(), Article()), .</span></strong>..]</span></pre>
</div>
<p>å¦æéè¦å¯ä»¥ä½¿ç¨outer_joinå½æ°å¤ç</p>
<div class="cnblogs_code">
<pre>async <span style="color: rgba(0, 0, 255, 1)">def</span><span style="color: rgba(0, 0, 0, 1)"> get_users_with_articles(db: AsyncSession):
    stmt </span>=<span style="color: rgba(0, 0, 0, 1)"> (
        select(User, Article)
        .<span style="color: rgba(255, 0, 0, 1)"><strong>outerjoin</strong></span>(Article, Article.user_id </span>==<span style="color: rgba(0, 0, 0, 1)"> User.id)
    )
    result </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(stmt)
    </span><span style="color: rgba(0, 0, 255, 1)">return</span> result.all()  <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> ç¨æ·å³ä¾¿æ²¡ææç« ä¹ä¼åºç°</span></pre>
</div>
<p>&nbsp;</p>
<p>å¦ææä»¬éè¦è·åææç« çææç¨æ·ï¼å¦ä¸æç¤ºã</p>
<div class="cnblogs_code">
<pre>async <span style="color: rgba(0, 0, 255, 1)">def</span><span style="color: rgba(0, 0, 0, 1)"> get_users_with_articles(db: AsyncSession):
    stmt </span>= select(User).options(<span style="color: rgba(255, 0, 0, 1)"><strong>selectinload</strong></span>(User.articles))  <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> èªå¨ load å³è</span>
    result =<span style="color: rgba(0, 0, 0, 1)"> await db.execute(stmt)
    </span><span style="color: rgba(0, 0, 255, 1)">return</span> result.scalars().all()</pre>
</div>
<p><code data-start="1468" data-end="1482">selectinload</code> ä¼æ§è¡ä¸¤æ¬¡ SQLï¼ä½æçé«ï¼ä¸ä¼äº§çç¬å¡å°ç§¯ï¼éå¸¸éåéåæ¥è¯¢ã</p>
<p>å¤è¡¨é¾å¼ Joinçå¤çï¼å¯ä»¥è·å¾ä¸¤ä¸ªè¡¨çä¸åä¿¡æ¯è¿è¡ç»åã</p>
<div class="cnblogs_code">
<pre>async <span style="color: rgba(0, 0, 255, 1)">def</span><span style="color: rgba(0, 0, 0, 1)"> get_articles_with_author(db: AsyncSession):
    stmt </span>=<span style="color: rgba(0, 0, 0, 1)"> (
        select(Article.title, User.name.label(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">author</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">))
        .join(User, Article.user_id </span>==<span style="color: rgba(0, 0, 0, 1)"> User.id)
    )
    rows </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(stmt)
    </span><span style="color: rgba(0, 0, 255, 1)">return</span> <span style="color: rgba(255, 0, 0, 1)"><strong>rows.mappings().all()</strong></span>  <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> ä»¥ dict å½¢å¼è¿å [{'title':..., 'author':...}]</span></pre>
</div>
<p>å¸¦ç­éæ¡ä»¶ä¸åé¡µçå¤çå®ç°ï¼å¦ä¸æç¤º</p>
<div class="cnblogs_code">
<pre>async <span style="color: rgba(0, 0, 255, 1)">def</span> search_articles(db: AsyncSession, keyword: str, page: int = 1, size: int = 10<span style="color: rgba(0, 0, 0, 1)">):
    stmt </span>=<span style="color: rgba(0, 0, 0, 1)"> (
        select(Article, User.name.label(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">author</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">))
        .join(User)
        .filter(Article.title.contains(keyword))
        .offset((page </span>- 1) *<span style="color: rgba(0, 0, 0, 1)"> size)
        .limit(size)
    )
    result </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(stmt)
    </span><span style="color: rgba(0, 0, 255, 1)">return</span> result.mappings().all()</pre>
</div>
<p>&nbsp;</p>
<p>å¯¹äºæéç®¡çç³»ç»æ¥è¯´ï¼ä¸è¬æç¨æ·ãè§è²ï¼ä»¥åç¨æ·è§è²çä¸­é´è¡¨ï¼ä¸è¬æ¥è¯´ä»ä»¬çå³ç³»å¦ä¸</p>
<p><img src="https://img2024.cnblogs.com/blog/8867/202512/8867-20251225122040874-818263456.png" alt="image" width="729" height="363" loading="lazy"></p>
<p>&nbsp;å¨çé¢ä¸­ä¸è¬ä¼æä¾éæ©ç¨æ·çæä½å³èï¼å¦è§è²ä¸­ç»´æ¤ç¨æ·åè¡¨ã</p>
<p><img src="https://img2024.cnblogs.com/blog/8867/202512/8867-20251225121122302-651245416.png" alt="image" width="481" height="426" loading="lazy"></p>
<p>&nbsp;æä»¬æ¥ççè¿ä¸ªå¨SQLAlchemyæä½³å®è·µæ¯å¦ä½çæä½ã</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">from</span> sqlalchemy <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> Table, Column, Integer, ForeignKey
</span><span style="color: rgba(0, 0, 255, 1)">from</span> sqlalchemy.orm <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> relationship, Mapped, mapped_column
</span><span style="color: rgba(0, 0, 255, 1)">from</span> database <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> Base

</span><span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> --- ä¸­é´è¡¨åæ³ ---</span>
role_user =<span style="color: rgba(0, 0, 0, 1)"> Table(
    </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">role_user</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
    Base.metadata,
    Column(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">user_id</span><span style="color: rgba(128, 0, 0, 1)">"</span>, ForeignKey(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">users.id</span><span style="color: rgba(128, 0, 0, 1)">"</span>), primary_key=<span style="color: rgba(0, 0, 0, 1)">True),
    Column(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">role_id</span><span style="color: rgba(128, 0, 0, 1)">"</span>, ForeignKey(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">roles.id</span><span style="color: rgba(128, 0, 0, 1)">"</span>), primary_key=<span style="color: rgba(0, 0, 0, 1)">True)
)

</span><span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> User(Base):
    </span><span style="color: rgba(128, 0, 128, 1)">__tablename__</span> = <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">users</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">
    id: Mapped[int] </span>= mapped_column(primary_key=<span style="color: rgba(0, 0, 0, 1)">True)
    username: Mapped[str] </span>=<span style="color: rgba(0, 0, 0, 1)"> mapped_column()

    roles: Mapped[list[</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Role</span><span style="color: rgba(128, 0, 0, 1)">"</span>]] =<span style="color: rgba(0, 0, 0, 1)"> relationship(
        secondary</span>=<span style="color: rgba(0, 0, 0, 1)">role_user,
        back_populates</span>=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">users</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
        lazy</span>=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">selectin</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">
    )

</span><span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> Role(Base):
    </span><span style="color: rgba(128, 0, 128, 1)">__tablename__</span> = <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">roles</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">
    id: Mapped[int] </span>= mapped_column(primary_key=<span style="color: rgba(0, 0, 0, 1)">True)
    name: Mapped[str] </span>=<span style="color: rgba(0, 0, 0, 1)"> mapped_column()

    users: Mapped[list[User]] </span>=<span style="color: rgba(0, 0, 0, 1)"> relationship(
        secondary</span>=<span style="color: rgba(0, 0, 0, 1)">role_user,
        back_populates</span>=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">roles</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
        lazy</span>=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">selectin</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">
    )</span></pre>
</div>
<p>å¨ SQLAlchemy å£°æå¤å¯¹å¤å³ç³»æ¶ï¼<code data-start="22" data-end="33">secondary</code> åæ°æ¢å¯ä»¥å¡« <strong data-start="41" data-end="53">å­ç¬¦ä¸²å½¢å¼çè¡¨å</strong>ï¼ä¹å¯ä»¥å¡« <strong data-start="59" data-end="84">å·²ç»å®ä¹å¥½çä¸­é´è¡¨å¯¹è±¡ï¼Table å¯¹è±¡ï¼ã</strong></p>
<p><strong data-start="59" data-end="84">â  econdary="role_user" ââ ä½¿ç¨å­ç¬¦ä¸²è¡¨å</strong></p>
<div class="cnblogs_code">
<pre>roles = relationship(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Role</span><span style="color: rgba(128, 0, 0, 1)">"</span>, secondary=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">role_user</span><span style="color: rgba(128, 0, 0, 1)">"</span>, back_populates=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">users</span><span style="color: rgba(128, 0, 0, 1)">"</span>)</pre>
</div>
<p><strong>â¡ secondary=role_user ââ ä¼ å¥ä¸­é´è¡¨å¯¹è±¡ï¼æ¨èæ¹å¼ï¼</strong></p>
<div class="cnblogs_code">
<pre>role_user =<span style="color: rgba(0, 0, 0, 1)"> Table(
    </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">role_user</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
    Base.metadata,
    Column(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">user_id</span><span style="color: rgba(128, 0, 0, 1)">"</span>, ForeignKey(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">users.id</span><span style="color: rgba(128, 0, 0, 1)">"</span>), primary_key=<span style="color: rgba(0, 0, 0, 1)">True),
    Column(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">role_id</span><span style="color: rgba(128, 0, 0, 1)">"</span>, ForeignKey(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">roles.id</span><span style="color: rgba(128, 0, 0, 1)">"</span>), primary_key=<span style="color: rgba(0, 0, 0, 1)">True)
)

roles </span>= relationship(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Role</span><span style="color: rgba(128, 0, 0, 1)">"</span>, secondary=role_user, back_populates=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">users</span><span style="color: rgba(128, 0, 0, 1)">"</span>)</pre>
</div>
<p>å¯¹äºå¦æè·åå¯¹åºè§è²çç¨æ·è®°å½ï¼æä»¬å¯ä»¥éè¿ä¸é¢æ¹å¼è·åï¼éè¿è¿æ¥ä¸­é´è¡¨çæ¹å¼ï¼</p>
<div class="cnblogs_code">
<pre>async <span style="color: rgba(0, 0, 255, 1)">def</span> get_users_by_role(db: AsyncSession, role_id: int) -&gt;<span style="color: rgba(0, 0, 0, 1)"> list[User]:
    stmt </span>=<span style="color: rgba(0, 0, 0, 1)"> (
        select(User)
        .join(role_user, role_user.c.user_id </span>==<span style="color: rgba(0, 0, 0, 1)"> User.id)
        .where(role_user.c.role_id </span>==<span style="color: rgba(0, 0, 0, 1)"> role_id)
    )
    result </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(stmt)
    </span><span style="color: rgba(0, 0, 255, 1)">return</span> result.scalars().all()</pre>
</div>
<p>ä¹å¯ä»¥ä¸é¢çæ¹å¼è¿è¡å¤çï¼ä½¿ç¨ relationship any()ï¼ï¼æææ¯ä¸æ ·çã</p>
<div class="cnblogs_code">
<pre>select(User).filter(User.roles.any(id=role_id))</pre>
</div>
<p>å¦æéè¦åå¥ç¨æ·ãè§è²çå³èå³ç³»ï¼æä»¬å¯ä»¥ä½¿ç¨ä¸é¢æ¹æ³æ¥éè¿ä¸­é´è¡¨è¿è¡å¤æ­å¹¶åå¥è®°å½ã</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">from</span> sqlalchemy <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> select, insert

async </span><span style="color: rgba(0, 0, 255, 1)">def</span><span style="color: rgba(0, 0, 0, 1)"> add_users_to_role(db: AsyncSession, role_id: int, user_ids: list[int]):
    </span><span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> 1ï¸â£ æ¥è¯¢å·²æå³è user_id</span>
    stmt = select(role_user.c.user_id).where(role_user.c.role_id ==<span style="color: rgba(0, 0, 0, 1)"> role_id)
    res </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(stmt)
    existing_user_ids </span>= {row[0] <span style="color: rgba(0, 0, 255, 1)">for</span> row <span style="color: rgba(0, 0, 255, 1)">in</span><span style="color: rgba(0, 0, 0, 1)"> res.fetchall()}

    </span><span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> 2ï¸â£ è¿æ»¤åºæ°ç user_id</span>
    new_user_ids = [uid <span style="color: rgba(0, 0, 255, 1)">for</span> uid <span style="color: rgba(0, 0, 255, 1)">in</span> user_ids <span style="color: rgba(0, 0, 255, 1)">if</span> uid <span style="color: rgba(0, 0, 255, 1)">not</span> <span style="color: rgba(0, 0, 255, 1)">in</span><span style="color: rgba(0, 0, 0, 1)"> existing_user_ids]
    </span><span style="color: rgba(0, 0, 255, 1)">if</span> <span style="color: rgba(0, 0, 255, 1)">not</span><span style="color: rgba(0, 0, 0, 1)"> new_user_ids:
        </span><span style="color: rgba(0, 0, 255, 1)">return</span> 0  <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> æ²¡ææ°å¢</span>

    <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> 3ï¸â£ æ¹éæå¥</span>
    values = [{<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">user_id</span><span style="color: rgba(128, 0, 0, 1)">"</span>: uid, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">role_id</span><span style="color: rgba(128, 0, 0, 1)">"</span>: role_id} <span style="color: rgba(0, 0, 255, 1)">for</span> uid <span style="color: rgba(0, 0, 255, 1)">in</span><span style="color: rgba(0, 0, 0, 1)"> new_user_ids]
    stmt </span>=<span style="color: rgba(0, 0, 0, 1)"> insert(role_user).values(values)
    await db.execute(stmt)
    await db.commit()

    </span><span style="color: rgba(0, 0, 255, 1)">return</span> len(new_user_ids)</pre>
</div>
<p>å¦æåªæ¯åä¸ªè®°å½çæå¥ï¼å¯ä»¥å©ç¨ä¸é¢çæ¹å¼å¤çã</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">from</span> sqlalchemy <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> select, insert

async </span><span style="color: rgba(0, 0, 255, 1)">def</span> add_user_to_role(db: AsyncSession, role_id: int, user_id: int) -&gt;<span style="color: rgba(0, 0, 0, 1)"> bool:
    </span><span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> 1ï¸â£ æ£æ¥æ¯å¦å·²å­å¨å³è</span>
    stmt =<span style="color: rgba(0, 0, 0, 1)"> select(role_user).where(
        role_user.c.role_id </span>==<span style="color: rgba(0, 0, 0, 1)"> role_id,
        role_user.c.user_id </span>==<span style="color: rgba(0, 0, 0, 1)"> user_id
    )
    res </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(stmt)
    exists </span>=<span style="color: rgba(0, 0, 0, 1)"> res.first()

    </span><span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)"> exists:
        </span><span style="color: rgba(0, 0, 255, 1)">return</span> False  <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> å·²å­å¨ï¼ä¸åæå¥</span>

    <span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> 2ï¸â£ æå¥è®°å½</span>
    stmt = insert(role_user).values(user_id=user_id, role_id=<span style="color: rgba(0, 0, 0, 1)">role_id)
    await db.execute(stmt)
    await db.commit()

    </span><span style="color: rgba(0, 0, 255, 1)">return</span> True</pre>
</div>
<p>å é¤ç¨æ·è§è²çå³èå³ç³»ï¼éè¿ä¸é¢å½æ°è¿è¡å¤çå³å¯</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">from</span> sqlalchemy <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> and_, or_, select
</span><span style="color: rgba(0, 0, 255, 1)">from</span> sqlalchemy <span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> delete as sa_delete, update as sa_update

    async </span><span style="color: rgba(0, 0, 255, 1)">def</span> remove_user(self, db: AsyncSession, role_id: int, user_id: int) -&gt;<span style="color: rgba(0, 0, 0, 1)"> bool:
        </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(128, 0, 0, 1)">ç§»é¤è§è²-ç¨æ·å³è</span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(0, 0, 0, 1)">
        stmt </span>=<span style="color: rgba(0, 0, 0, 1)"> sa_delete(user_role).where(
            and_(
                user_role.c.role_id </span>==<span style="color: rgba(0, 0, 0, 1)"> role_id,
                user_role.c.user_id </span>==<span style="color: rgba(0, 0, 0, 1)"> user_id,
            )
        )
        result </span>=<span style="color: rgba(0, 0, 0, 1)"> await db.execute(stmt)
        await db.commit()

        </span><span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)"> rowcount è¿åå é¤è¡æ°</span>
        <span style="color: rgba(0, 0, 255, 1)">return</span> result.rowcount &gt; 0</pre>
</div>
<p>&nbsp;</p>
<p>ä»¥ä¸å°±æ¯å¯¹äºå¨Python+FastAPIçåç«¯é¡¹ç®ä¸­ä½¿ç¨SqlAlchemyæä½æ°æ®çå ç§å¸¸è§æ¹å¼ï¼åæ¬åè¡¨å¤çï¼å¤è¡¨å³èãä¸­é´è¡¨çæ°æ®ç»´æ¤åå®ä¹ç­åå®¹ï¼æ¯æä»¬å¨æä½å¸¸è§æ°æ®çæ¶åï¼ç»å¸¸ç¢°å°çå ç§æ¹å¼ã</p>
<p>å¸æä¸æå¯¹ä½ ææå¯ååå¸®å©ï¼æè°¢éè¯»ã</p>
</div>
<div id="MySignature" role="contentinfo">
    <div style="border-right-color: #cccccc; border-right-width: 1px; border-right-style: solid; padding-right: 5px; border-top-color: #cccccc; border-top-width: 1px; border-top-style: solid; padding-left: 4px; font-size: 13px; padding-bottom: 4px; border-left-color: #cccccc; border-left-width: 1px; border-left-style: solid; width: 98%; padding-top: 4px; border-bottom-color: #cccccc; border-bottom-width: 1px; border-bottom-style: solid; background-color: #eeeeee;">
    <img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align="top" alt="">
    <span style="color: #000000"><span class="Apple-tab-span" style="white-space: pre"></span>
     ä¸æ³¨äºä»£ç çæå·¥å·ã.Net/Python æ¡æ¶æ¶æåè½¯ä»¶å¼åï¼ä»¥ååç§Vue.jsçåç«¯ææ¯åºç¨ãèæWinformå¼åæ¡æ¶/æ··åå¼å¼åæ¡æ¶ãå¾®ä¿¡å¼åæ¡æ¶ãBootstrapå¼åæ¡æ¶ãABPå¼åæ¡æ¶ãSqlSugarå¼åæ¡æ¶ãPythonå¼åæ¡æ¶ç­æ¡æ¶äº§åã
     <br>&nbsp;&nbsp;è½¬è½½è¯·æ³¨æåºå¤ï¼æ°åäººï¼ä¼åèª&nbsp;&nbsp;<a href="http://www.iqidi.com/" target="_blank">http://www.iqidi.com</a>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
</div>
<div class="clear"></div>

        </div>
        <p class="postfoot">
            posted on 
<span id="post-date" data-last-update-days="0.027083333333333334" data-date-updated="2025-12-25 12:38">2025-12-25 11:59</span>&nbsp;
<a href="https://www.cnblogs.com/wuhuacong">ä¼åèª</a>&nbsp;
éè¯»(<span id="post_view_count">27</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19396612);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19396612', targetLink: 'https://www.cnblogs.com/wuhuacong/p/19396612', title: 'å¨Python+FastAPIé¡¹ç®ä¸­ä½¿ç¨SqlAlchemyæä½æ°æ®çå ç§å¸¸è§æ¹å¼' })">ä¸¾æ¥</a>

        </p>
     ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ å¥³åæéªå½åä¸è½ç¨Claude Codeï¼äºæ¯æç»å¥¹åäºä¸ä¸ª ]]></title>
    <link>https://www.cnblogs.com/yupi/p/19397182</link>
    <guid>b9be425a5b66ec6b613691adeeb47b09</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/yupi/p/19397182" title="åå¸äº 2025-12-25 11:28">
    <span role="heading" aria-level="2">å¥³åæéªå½åä¸è½ç¨Claude Codeï¼äºæ¯æç»å¥¹åäºä¸ä¸ª</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/2225420/202512/2225420-20251225112813033-1712384844.png" alt="å¥³åæéªå½åä¸è½ç¨Claude Codeï¼äºæ¯æç»å¥¹åäºä¸ä¸ª" class="desc_img">
        æè¿å¥³åå¼å§å­¦ä¹  AI ç¼ç¨äºï¼è¢«æå¸¦çï¼ï¼å¥¹å¬è¯´ Claude Code è¿ä¸ª AI ç¼ç¨å·¥å·å¾çæ°ï¼ç»æè¯äºä¸åç°å¾è¦å½å¤ç Claude è´¦å·æè½ç»éã
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p class="md-end-block md-heading"><span class="md-plain">å¤§å®¶å¥½ï¼ææ¯ç¨åºåé±¼ç®ãæè¿å¥³åå¼å§å­¦ä¹  AI ç¼ç¨äºï¼è¢«æå¸¦çï¼ï¼å¥¹å¬è¯´ Claude Code è¿ä¸ª AI ç¼ç¨å·¥å·å¾çæ°ï¼ç»æè¯äºä¸åç°å¾è¦å½å¤ç Claude è´¦å·æè½ç»éã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766562559951-d1371bb9-99d3-467a-aeec-421cd12eb3bb.png"><img data-src="https://pic.yupi.icu/1/1766562559951-d1371bb9-99d3-467a-aeec-421cd12eb3bb.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç¶åå¥¹å°±éªéªå§å§å°è·æåæ§½ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">å±ç°ç·ååçæ¶åå°äºï¼äºæ¯æå¼ç©ç¬å°è¯´ï¼å«é¾è¿äºï¼è¦ä¸æç»ä½ åä¸ä¸ª Claude Code ç®äºï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766562773776-4a34c38c-c95b-4eb9-8b02-81ca86133188.png"><img data-src="https://pic.yupi.icu/1/1766562773776-4a34c38c-c95b-4eb9-8b02-81ca86133188.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç»æï¼å¥¹å½çäºï¼</span></p>
<p class="md-end-block md-p"><span class="md-plain">æ â</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766562833168-97c7d4fc-bfe5-4a09-9215-dcfbdb546cb4.png"><img data-src="https://pic.yupi.icu/1/1766562833168-97c7d4fc-bfe5-4a09-9215-dcfbdb546cb4.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">æ²¡åæ³ï¼åªè½è¯ä¸è¯äºï¼æ¯ç«è°å¸æå£è¯èè¿ä¸¤å¤©è®©èªå®¶äººé¾è¿å¢ï¼</span></p>
<p class="md-end-block md-p"><span class="md-plain">æ­£å¥½è¿ä¸¤å¤©å½äº§ AI å¤§æ¨¡å GLM-4.7 åå¸äºï¼æçç½ä¸å¾å¤åä¸»é½å¨å¹ä»ä¹ âå½åæå¼ºçç¼ç¨æ¨¡åâãâæå¼ºçå¼æºæ¨¡åâãâClaude çæä½³å¹³æ¿âï¼çè³è¯´æ¯è¶è¿äº GPT-5.2 å Claude Sonnet 4.5ã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766563074181-1ee8e12d-2868-4b23-b993-c0e61800565e.png"><img data-src="https://pic.yupi.icu/1/1766563074181-1ee8e12d-2868-4b23-b993-c0e61800565e.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ä½ è¯´å½äº§æå¼ºä¹å°±ç®äºï¼è¶è¿ Claude è¿æè½ä¿¡ä¹ï¼</span></p>
<p class="md-end-block md-p"><span class="md-plain">é£æ­£å¥½ï¼æå°±å°è¯ç¨ GLM-4.7 æ¥åä¸ªèªå·±ç AI ç¼ç¨å·¥å·å§ï¼å¯¹æ  Claude Code é£ç§çï¼çç GLM-4.7 å°åºå æ¤å ä¸¤ã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766551074508-575a037d-174a-43d2-bbfe-e223082fc665.png"><img data-src="https://pic.yupi.icu/1/1766551074508-575a037d-174a-43d2-bbfe-e223082fc665.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">æ¥ä¸æ¥ï¼å°±è®©æä»¬ä¸èµ· <span class="md-pair-s "><strong>ç¨ GLM-4.7 + Claude Code</strong><span class="md-plain"> å¼åä¸ä¸ª <span class="md-pair-s "><strong>åºäº GLM-4.7 çä»¿ Claude Code</strong><span class="md-plain"> ç AI ç¼ç¨å·¥å·ã</span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">é¡¹ç®å¼å§åï¼åèµ·ä¸ä¸ªåå½å½çåå­ï¼å°±å« <span class="md-pair-s"><code>Yupi Code</code><span class="md-plain"> å§ï¼</span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">æ¥ä¸æ¥ï¼æä»¬å°éµå¾ªè¿å¥ãé±¼ç® AI Vibe Coding å¼åä»¿ Claude Code ç Yupi Codeãæµç¨ï¼ä¸åä¸è¡ä»£ç ï¼ä¸æ­¥ä¸æ­¥æ âClaude Codeâ ååºæ¥ï¼</span></p>
<ul class="ul-list" data-mark="-">
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">ç¯å¢åå¤ =&gt; å®è£å·¥å·åéç½®ç¯å¢ï¼è½å¤ Vibe Coding</span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">ææ¯è°ç  =&gt; ç¡®è®¤æ»¡è¶³çæéæ±</span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">è®¾è®¡å¼å =&gt; åæ¬æ¹æ¡è®¾è®¡ãçæä»£ç ãä¿®å¤ Bugï¼å¾å° MVP æå°å¯è¡äº§å</span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">çæ¬æ§å¶ =&gt; é²æ­¢åç»­æ¹å¨åºé®é¢</span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">ä¼åè½å =&gt; æ¯ææ´å¤å¯¹æ  Claude Code çåè½ï¼æ¯å¦èç½æç´¢ãæµå¼è¾åºãæ·±åº¦æèç­</span></p>
</li>
</ul>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766549738919-9e627293-954a-4f39-8625-d1dcb1835cbc.jpeg"><img data-src="https://pic.yupi.icu/1/1766549738919-9e627293-954a-4f39-8625-d1dcb1835cbc.jpeg" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">ç¯å¢åå¤</span></h2>
<p class="md-end-block md-p"><span class="md-plain">æºè°±ç GLM-4.7 å¼å®¹å¤æ¬¾ç¼ç å·¥å·ï¼é¤ Claude Code å¤ï¼è¿æ¯æ CursorãCline ç­ä¸»æµç¼ç å·¥å·ï¼çµæ´»ééå¤ç§å¼ååºæ¯ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ç» Claude Code æ¥å¥ GLM ä¹å¾ç®åï¼1 åéæå®ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">é¦åæå¼ç»ç«¯ï¼è¾å¥ä¸è¡å½ä»¤å®è£ Claude Codeï¼</span></p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span><span class="cm-builtin">npm&nbsp;install&nbsp;<span class="cm-attribute">-g&nbsp;@anthropic-ai/claude-code</span></span></span></pre>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">ç¶åæ§è¡ <span class="md-pair-s"><code>claude</code><span class="md-plain"> å½ä»¤æå¼ç¨åºï¼é»è®¤æ¯éè¦ç»å½ Claude è´¦å·çï¼å¦åæ æ³ä½¿ç¨ï¼</span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1764145940075-ace6fd24-a09c-41c0-b400-1cffc394fc8a.png"><img data-src="https://pic.yupi.icu/1/1764145940075-ace6fd24-a09c-41c0-b400-1cffc394fc8a.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">ä¸è¿æ²¡å³ç³»ï¼è®©æä»¬æå®èåç AI å¤§æ¨¡åæ¢æå½åç GLM-4.7ãé¦åè¿å¥ <span class="md-pair-s"><code>{ç¨æ·ç®å½}/.claude</code><span class="md-plain"> ç®å½ï¼åå»ºä¸ä¸ª <span class="md-pair-s"><code>settings.json</code><span class="md-plain"> éç½®æä»¶ï¼ </span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1764146110361-06e13de5-7de4-4fc5-9533-3651447d5e19.png"><img data-src="https://pic.yupi.icu/1/1764146110361-06e13de5-7de4-4fc5-9533-3651447d5e19.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">ç¶åä¿®æ¹éç½®æä»¶ä¸­çåå®¹å¦ä¸ï¼è®°å¾æ¿æ¢æä½ èªå·±ç API Keyï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1764146125955-3029843c-26b8-4628-b2b7-a9d8abb2aef1.png"><img data-src="https://pic.yupi.icu/1/1764146125955-3029843c-26b8-4628-b2b7-a9d8abb2aef1.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">API Key ç´æ¥å°æºè°±å¼åå¹³å°è·åå³å¯ï¼</span></p>
<p class="md-end-block md-p"><span class="md-plain">æè·¯ï¼<span class="md-link md-pair-s"><a href="https://bigmodel.cn/" rel="noopener nofollow">https://bigmodel.cn/</a></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766552195823-7f90ead2-3e07-4eb4-92e2-7ef12c591e61.png"><img data-src="https://pic.yupi.icu/1/1766552195823-7f90ead2-3e07-4eb4-92e2-7ef12c591e61.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">æ¥ä¸æ¥å°±å¯ä»¥æå¿«å°ä½¿ç¨äº~</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766549578200-7189d326-db17-4edd-9e27-2d9da3af06cf.png"><img data-src="https://pic.yupi.icu/1/1766549578200-7189d326-db17-4edd-9e27-2d9da3af06cf.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">é¤äºè¿ç§æ¹å¼å¤ï¼å®æ¹ææ¡£è¿æä¾äºæ´ç®åçæ¹å¼ï¼ç´æ¥ä½¿ç¨èªå¨åå©æï¼æç§æå¼å°±è½å®æç¯å¢éç½®ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766552079851-2cd903df-febb-4860-98fc-51c1143b4105.png"><img data-src="https://pic.yupi.icu/1/1766552079851-2cd903df-febb-4860-98fc-51c1143b4105.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">ææ¯è°ç </span></h2>
<p class="md-end-block md-p"><span class="md-plain">å¦æè¦å®å¨å©ç¨ AI å¼åé¡¹ç®ï¼æå ä¸ªé¾ç¹ï¼</span></p>
<ol class="ol-list" start="">
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">é¡¹ç®éè¦åå«å®æ´ååç«¯ï¼éè¦å¤§æ¨¡åæè¾å¼ºç <span class="md-pair-s "><strong>ç¼ç è½å</strong></span></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">éè¦è®©åç«¯é¡¹ç®å¯¹æ¥ AI å¤§æ¨¡åï¼æ¯ä¸ªå¤§æ¨¡åçæ¥å¥åå¼åæ¹å¼ä¸åï¼éè¦è®© AI <span class="md-pair-s "><strong>è¯»åææ¡£</strong><span class="md-plain"> çè§£ææ°çå¼åæ¹å¼</span></span></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">å¦ææ³è¦ä¼åçé¢ææï¼è¿éè¦ <span class="md-pair-s "><strong>å¾ççè§£è½å</strong><span class="md-plain">ï¼ç» AI ä¸å¼ å¾çå°±è½è®©å®è¿å</span></span></span></p>
</li>
</ol>
<p class="md-end-block md-p"><span class="md-plain">å¨æ­£å¼å¼ååï¼æä»¬è¦ç¡®è®¤ GLM-4.7 å Claude Code çéåè½å¤æ»¡è¶³è¿äºè½åè¦æ±ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">æ ¹æ®æºè°±å®æ¹ä»ç»ï¼Claude Code ä¸­åç½®äºæºè°±ä¸å±ç MCP å·¥å·ï¼ä¸éè¦å¼åèèªå·±å®è£ãåæ¬ <span class="md-pair-s "><strong>æç´¢åç½é¡µè¯»å</strong><span class="md-plain"> è½åãè½å¤ç´æ¥è§£ææªå¾/è®¾è®¡ç¨¿/æ¥éå¾ç <span class="md-pair-s "><strong>è§è§çè§£è½å</strong><span class="md-plain">ã</span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">è®©æä»¬ä¾æ¬¡æµè¯ä¸ä¸ï¼é¦åæ¯ç½é¡µæç´¢è½åï¼ç´§è·æ¶äºï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766541771159-00bcb3ee-422b-4895-9ab6-15e5ad44937e.png"><img data-src="https://pic.yupi.icu/1/1766541771159-00bcb3ee-422b-4895-9ab6-15e5ad44937e.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">æµè¯ç½é¡µè¯»åè½åï¼è®©å®æ¥è¯»åæä»¬ç¼ç¨å¯¼èªç½ç«çä¿¡æ¯ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766485091937-8555eddf-7301-4161-92d9-4f19251cf9d1.png"><img data-src="https://pic.yupi.icu/1/1766485091937-8555eddf-7301-4161-92d9-4f19251cf9d1.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">æµè¯å¾ççè§£è½åï¼æç» AI ä¼ äºä¸å¼  âä»å¤¯å°ææè¡æ¦çèæ¯å¾âï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766552716828-cc3c5015-a220-44c4-9c99-9ea6e6cc9a2e.png"><img data-src="https://pic.yupi.icu/1/1766552716828-cc3c5015-a220-44c4-9c99-9ea6e6cc9a2e.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">AI ççè§£è¿æ¯å¾åç¡®çï¼å·ä½æå­ä¹è¯»ååºæ¥äºã</span></p>
<p class="md-end-block md-p"><span class="md-plain">OKï¼å ä¸ªè½åé½æ»¡è¶³è¦æ±ï¼ä¸é¢è®©æä»¬è¿å¥æ¹æ¡è®¾è®¡åå¼åé¶æ®µã</span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">è®¾è®¡å¼å</span></h2>
<p class="md-end-block md-p"><span class="md-plain">ååå»ºä¸ä¸ªå¹²åçé¡¹ç®ç®å½ <span class="md-pair-s"><code>yupi-code</code><span class="md-plain">ï¼æå¼ç»ç«¯å¹¶è¿å¥è¯¥ç®å½ï¼</span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766545100781-86907b5b-56df-42de-a36f-21b2738102cd.png"><img data-src="https://pic.yupi.icu/1/1766545100781-86907b5b-56df-42de-a36f-21b2738102cd.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">ç¶åè¾å¥æç¤ºè¯ï¼</span></p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span>å¸®æå¼åä¸ä¸ªç±»ä¼¼ Claude Code çç»ç«¯ AI ç¼ç¨å·¥å·ï¼è½å¤ä½¿ç¨ GLM-4.7 æ¨¡åå¸®ç¨æ·åç­é®é¢åçæä»£ç </span></pre>
<p class="md-end-block md-p"><span class="md-plain">ä¸è¬æ¥è¯´ï¼æ´ä¸ªé¡¹ç®çç¬¬ä¸å¥æç¤ºè¯æ¯æéè¦çï¼å¦ææè¦å¼åä¸ä¸ªå¤æçåä¸é¡¹ç®ï¼è¯å®ä¼å¥½å¥½æç£¨ä¸ä¸è¿å¥æç¤ºè¯ï¼å°è¯´åä¸ªå ç¾å­ï¼ä¹åçè¿æ <span class="md-meta-i-c  md-link"><a href="https://mp.weixin.qq.com/s/cd7K9WQiOkP7AJglZ1b1Ng" rel="noopener nofollow"><span class="md-plain">AI ç¨åºåææ¯ç»åµåºé¡¹ç®</span></a><span class="md-plain"> çåå­¦åºè¯¥ç¥éï¼ã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766553004293-19edef3f-ab54-4275-83fa-d5d78ed1a8ce.png"><img data-src="https://pic.yupi.icu/1/1766553004293-19edef3f-ab54-4275-83fa-d5d78ed1a8ce.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ä½æµè¯ AI æ¨¡åæ¶ï¼æåæ¬¢åå¶éèè¡ä¹ï¼ç«å¨å¤§å¤æ°ç¨æ·çè§åº¦ï¼ææè¾å¥ä¸å¥ç®åçæç¤ºè¯ï¼çç AI è½ä¸è½å¼å¯¼ææ¥çææ»¡è¶³éæ±çé¡¹ç®ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">æç¶ï¼AI å¤æ­è¿æ¯ä¸ä¸ªå¤æçé¡¹ç®ï¼æ³è¦è¿å¥ <span class="md-pair-s "><strong>è®¡åæ¨¡å¼</strong><span class="md-plain"> ââ åæç¡®éæ±ãè®¾è®¡æ¹æ¡åå¼åã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766545143400-e5909edc-d015-4ed8-8a98-c1428a5807e4.png"><img data-src="https://pic.yupi.icu/1/1766545143400-e5909edc-d015-4ed8-8a98-c1428a5807e4.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">ç¶åæä»¬éè¦éè¿éæ©æ¥æç¡®éæ±ï¼å¹¶è®© AI çææ¹æ¡ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">Claude Code çäº¤äºåçè¿æ¯ä¸éçï¼åéæ©ç¼ç¨è¯­è¨ï¼å»ºè®®èèå®å®é AI æ¨èçç¬¬ä¸ä¸ªï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766545700277-0a92c7af-af6a-4bf3-b045-b35a8810fe82.png"><img data-src="https://pic.yupi.icu/1/1766545700277-0a92c7af-af6a-4bf3-b045-b35a8810fe82.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">æ¥ä¸æ¥æ¯éæ©é¡¹ç®è¦å·æçåè½ãå¦ææ¯ä»¥åï¼æå¯è½ä¼åè®© AI åªå¼ååºç¡å¯¹è¯åè½ï¼è·éæµç¨ååæ·»å å¶ä»åè½ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ä½ç°å¨æå¯¹ AI æäºæ´å¤çä¿¡å¿ï¼<span class="md-pair-s "><strong>å±å°±æææåè½å¨é½éä¸ï¼å¹²å°±å®äºï¼</strong></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766545748726-b5bcf0c2-1650-409d-9cfb-56874d80e7aa.png"><img data-src="https://pic.yupi.icu/1/1766545748726-b5bcf0c2-1650-409d-9cfb-56874d80e7aa.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">å¶ä»è®¾ç½®å°±ä¸å¤è¯´äºï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766545906676-50ffc0ba-404a-42e0-af0e-c4797a5d5d77.png"><img data-src="https://pic.yupi.icu/1/1766545906676-50ffc0ba-404a-42e0-af0e-c4797a5d5d77.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">éæ©å®æåï¼AI ç»åºäºè¯¦ç»çå®ç°è®¡åï¼ä¸å®è¦ä»ç»éè¯»ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766546189349-27a4a8d7-92c0-4cf4-931e-e98e304736c9.png"><img data-src="https://pic.yupi.icu/1/1766546189349-27a4a8d7-92c0-4cf4-931e-e98e304736c9.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">ä½ å¯ä»¥ç´æ¥æ§è¡ï¼æèç» AI è¿ä¸æ­¥çæå¯¼ãæ¯å¦æè®© AI çæçåºç¨å»è°ç¨æºè°± Coding Plan å¥é¤ç BASE URLï¼è½èçº¦ä¸äºææ¬ï¼å¹¶ä¸ç» AI æä¾äºä¸ä¸ªå®æ¹ç API ææ¡£ï¼ä¾¿äº AI çæåç¡®çä»£ç ã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766546246817-adc95f50-246d-4c9c-b0cd-35f6433c9b40.png"><img data-src="https://pic.yupi.icu/1/1766546246817-adc95f50-246d-4c9c-b0cd-35f6433c9b40.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">ç¡®è®¤åå¼å§æ§è¡ï¼AI ä¼åè°ç¨åç½®çå·¥å·æ¥æç´¢åè§£æææ¡£ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766546433884-517bb8d9-8eb0-4a44-bd9c-0b0591af4184.png"><img data-src="https://pic.yupi.icu/1/1766546433884-517bb8d9-8eb0-4a44-bd9c-0b0591af4184.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">ç¶å AI ååºäºä¸ä¸ª Todo Listï¼å¹¶ä¸ä¸æ­¥æ­¥çæä»£ç åææ¡£ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766546471145-170595b6-05b5-440e-a208-671c362eb002.png"><img data-src="https://pic.yupi.icu/1/1766546471145-170595b6-05b5-440e-a208-671c362eb002.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">è¿æé´å¦æä½ åç°æä¸¥éçé®é¢ï¼æ¯å¦åç° AI çæçä»£ç å·²ç»å®å¨åç¦»é¢æäºï¼é£ä¹å°±å°½æ©æåæèäººå·¥è¾å¥æç¤ºè¯æ¥å¼å¯¼ AIãå¦æåç° AI åªæ¯æä¸å°åä»£ç çæçä¸å¯¹ï¼æçå»ºè®®æ¯åå¿çï¼åæ­£æå AI å¤§æ¦çä¼èªå·±åç°é®é¢å¹¶ä¿®å¤ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">è¿äºå¤§æ¦åå åéåï¼AI çæå®æï¼è¿åè¯äºæä½¿ç¨æ¹æ³ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766546800949-d8f28864-141e-477e-af98-a25bf02d99e7.png"><img data-src="https://pic.yupi.icu/1/1766546800949-d8f28864-141e-477e-af98-a25bf02d99e7.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">å¯æææ ¹æ¬æå¾çï¼æç´æ¥æ API Key äº¤ç» AI å¸®æè¿è¡ä¸å°±å¥½äºï¼</span></p>
<p class="md-end-block md-p"><span class="md-plain">Vibe Coding å¼åæ¨¡å¼ä¸ï¼æå¤èªå·±åä¸ä»¶äºï¼é½æ¯å¯¹ AI çä¸å°éã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766553290398-ad4d9c90-f804-4f46-b040-c65f821897d0.png"><img data-src="https://pic.yupi.icu/1/1766553290398-ad4d9c90-f804-4f46-b040-c65f821897d0.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">è¾å¥æç¤ºè¯ï¼</span></p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span>æç API key æ¯ xxxxxxxï¼è¯·ä½ å¸®æè¿è¡</span></pre>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">ç¶åï¼ç¿»è½¦äºããã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766546943625-ae073ada-da33-429a-bbf8-a642f50204dd.png"><img data-src="https://pic.yupi.icu/1/1766546943625-ae073ada-da33-429a-bbf8-a642f50204dd.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">ä¸æï¼ç´æ¥è®© AI èªå·±æ£æ¥å¹¶ä¿®å¤éè¯¯ãèä¸ä¸ºäºä½¿ç¨æ¹ä¾¿ï¼åºè¯¥æä¾ä¸ä¸ªå¿«éå¯å¨èæ¬ï¼è½å¤è®©æåè¿è¡ Claude Code ä¸æ ·ï¼ä¸è¡å½ä»¤å¯å¨ AI ç¼ç¨å·¥å·ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">æç¤ºè¯ï¼</span></p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span>å¸®ææ£æ¥å¹¶ä¿®å¤é¡¹ç®ä¸­çéè¯¯ï¼å¹¶åå»ºä¸ä¸ªå¯ä»¥å Claude ä¸æ ·è®©ç¨æ·å¨å½ä»¤è¡è¾å¥ "yupicode" å°±è½å¯å¨ç¨åºçå¿«æ·èæ¬</span></pre>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">å åéåï¼AI ä¿®å¤å®æï¼å¹¶ä¸æä¾äºä¸ä¸ª <span class="md-pair-s"><code>yupicode</code><span class="md-plain"> èæ¬ï¼</span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766547157316-1e78081d-7d98-43c2-8fc6-37f40dcd1d81.png"><img data-src="https://pic.yupi.icu/1/1766547157316-1e78081d-7d98-43c2-8fc6-37f40dcd1d81.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">ææå¼ä¸ä¸ªæ°çç»ç«¯ï¼ç¶åè¿è¡ <span class="md-pair-s"><code>yupicode</code><span class="md-plain"> èæ¬ï¼å°è¯å AI å¯¹è¯ï¼</span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766488187720-0dedd977-3663-4146-8fc6-bd5e8d65a7ea.png"><img data-src="https://pic.yupi.icu/1/1766488187720-0dedd977-3663-4146-8fc6-bd5e8d65a7ea.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ä½ å«è¯´ï¼ææè¿ä¸éåï¼</span></p>
<p class="md-end-block md-p"><span class="md-plain">è¿å Claude Code ä¸æ ·æä¾äºä¸äºå½ä»¤ï¼æ¯å¦æ¸ç©ºå¯¹è¯åå²ãæ¥çå¸®å©ä¹ç±»çï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766488215355-476254ae-1fdd-44fe-94a7-939621a5b3f3.png"><img data-src="https://pic.yupi.icu/1/1766488215355-476254ae-1fdd-44fe-94a7-939621a5b3f3.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">çå°è¿éï¼ææè§é¡¹ç®å·²ç»åºæ¬å¯ç¨äºãå»ºè®®ç»é¡¹ç®ä¸ä¸ª Git æ¥çæ¬æ§å¶ï¼é²æ­¢åé¢çæ¹å¨åºé®é¢ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ä»ä¹ï¼ä½ ä¸ç¥é Git æ¯ä»ä¹ï¼</span></p>
<p class="md-end-block md-p"><span class="md-plain">æ²¡å³ç³»ï¼ç´æ¥äº¤ç» AI å§ï¼</span></p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span>ç°å¨é¡¹ç®å·²ç»åºæ¬å¯ç¨äºï¼å¸®ææäº¤ä¸ä¸ª git çæ¬ï¼é²æ­¢åç»­æ¹å¨åºé®é¢</span></pre>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766547719776-e4ca2495-158d-441e-b995-d2e3b475187b.png"><img data-src="https://pic.yupi.icu/1/1766547719776-e4ca2495-158d-441e-b995-d2e3b475187b.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">æµè¯ä¸æ¥ï¼ç®åç Yupi Code è¿æä¸äºä¸è¶³ä¹å¤ï¼æ¯å¦ä¸æ¯ææç´¢ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766488309079-9e05324c-b780-4476-b7a1-09e0b0a12ed4.png"><img data-src="https://pic.yupi.icu/1/1766488309079-9e05324c-b780-4476-b7a1-09e0b0a12ed4.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">æ¥ä¸æ¥å°±è®©æä»¬ä¼åé¡¹ç®ï¼å¢å æ´å¤ Claude Code æ¯æçè½åã</span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">ä¼åè½å</span></h2>
<p class="md-end-block md-p"><span class="md-plain">1ï¼åæ¥æ·»å ç½ç»æç´¢è½åï¼ç´æ¥ææºè°±çå®æ¹ææ¡£ç»å®ä¸¢è¿å»ãæç¤ºè¯å¦ä¸ï¼</span></p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span>ç°å¨å¥½åä¸æ¯æç½ç»æç´¢ï¼è¯·åè<br><span>https://docs.bigmodel.cn/api-reference/%E5%B7%A5%E5%85%B7-api/%E7%BD%91%E7%BB%9C%E6%90%9C%E7%B4%A2<br><span>ææ¡£ï¼å¢å ç½ç»æç´¢å·¥å·è°ç¨è½å</span></span></span></pre>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766547400820-047db1e2-dee7-4bb3-875c-3c3d03d7bf60.png"><img data-src="https://pic.yupi.icu/1/1766547400820-047db1e2-dee7-4bb3-875c-3c3d03d7bf60.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">å¾å¿« AI å°±æ·»å äºæ°åè½ï¼éæ°æå¼ yupicode æ¥éªè¯ä¸ï¼æ­£å¸¸çæäºï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766542072968-2a635280-4f04-41c7-9e72-b149b503b18e.png"><img data-src="https://pic.yupi.icu/1/1766542072968-2a635280-4f04-41c7-9e72-b149b503b18e.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">2ï¼ä¸é¢åä¼åä¸ AI åå¤çææï¼ç®åæ¯å¡ä¸ä¼å¿ç¶åç´æ¥è¾åºå®æ´åç­ï¼éè¦è°æ´ä¸ºæµå¼è¾åºçæå­æºææã</span></p>
<p class="md-end-block md-p"><span class="md-plain">æç¤ºè¯ï¼</span></p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span>æå¸æå¨ç­å¾ AI åå¤æ¶ï¼æä¸ä¸ªè½¬åçå°å¾æ ï¼å¹¶ä¸ AI çåå¤å¯ä»¥å®æ¶æµå¼è¾åº</span></pre>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">AI å¾å¿«å°±æå®äºï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766547560315-96b3044c-21d4-4017-b3b2-8e6c599fdfac.png"><img data-src="https://pic.yupi.icu/1/1766547560315-96b3044c-21d4-4017-b3b2-8e6c599fdfac.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">3ï¼GLM-4.7 è¿ä¸æ­¥å¼ºåäºäº¤éå¼æèè½åï¼å¼å¥ <span class="md-pair-s "><strong>ä¿çå¼æè</strong><span class="md-plain"> å <span class="md-pair-s "><strong>è½®çº§æè</strong><span class="md-plain">ï¼è®©å¤æä»»å¡æ§è¡æ´ç¨³ãæ´å¯æ§ãæä»¬ä¹åºè¯¥è®© Yupi Code è¾åºæ¨¡åçæèä¿¡æ¯ãå·¥å·è°ç¨ä¿¡æ¯ç­ç­ï¼å¸®å©ç¨æ·äºè§£æåµã</span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">è¾å¥æç¤ºè¯ï¼</span></p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span>å¸®æè¾åºæ¨¡åæèçä¿¡æ¯ãä»¥åå·¥å·è°ç¨ä¿¡æ¯ï¼ä½ å¯ä»¥éè¿å®æ¹ææ¡£æ¥äºè§£å¦ä½å¼å</span></pre>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766547838246-0de4e1a6-46e7-4fa0-9f69-2cc6c137d941.png"><img data-src="https://pic.yupi.icu/1/1766547838246-0de4e1a6-46e7-4fa0-9f69-2cc6c137d941.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">æµè¯ä¸ä¸ä¼ååçææï¼æ¯å¦ âä»ç»ä¸ä¸é±¼ç®ç AI å¯¼èªç½ç«âï¼è½å¾æ¸æ°å°çå°æèè¿ç¨ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766491085646-e55d65e2-f1f4-4de5-9b2e-a580f6671fab.png"><img data-src="https://pic.yupi.icu/1/1766491085646-e55d65e2-f1f4-4de5-9b2e-a580f6671fab.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">å¤§ååæ</span></h2>
<p class="md-end-block md-p"><span class="md-plain">å°è¿éï¼ä»¿ç§ Claude Code å¼åç Yupi Code å°±å·²ç»å®æäºï¼è®©æä»¬ç¨å®æ¥å¼åä¸ªå°ç½ç«è¯è¯ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">æ¯å¦æ¥ä¸ªå¨ç»å­¦ç®æ³ç Demoï¼æç¤ºè¯ï¼</span></p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span>å¸®æå¼åä¸ä¸ªå­¦ä¹ åæ³¡æåºç®æ³çå¨ç»ç½ç«ï¼ä½¿ç¨ Q çå¨æ¼«çé£æ ¼ååä¼å¡åæè§çéè²</span></pre>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766491627903-c7a8401b-a029-4f60-86c2-583459f60098.png"><img data-src="https://pic.yupi.icu/1/1766491627903-c7a8401b-a029-4f60-86c2-583459f60098.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">ææå¦å¾ï¼ç»é£è¿æ¯ä¸éçï¼ä½è¦æ¯ä¹åå¤§æ¨¡åè½èªå¨çæå¾çæç»å¹¶æ·»å å°ç½ç«ä¸­ï¼å°±æ´å¥½äºã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766492330648-78beb8fe-20f5-4577-9a5a-9c6844b15ba1.png"><img data-src="https://pic.yupi.icu/1/1766492330648-78beb8fe-20f5-4577-9a5a-9c6844b15ba1.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">åæ¥å¼åä¸ªä»¿çççµå­é»æ¿ï¼æç¤ºè¯ï¼</span></p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span>å¸®æå¼åä¸ä¸ªä»¿çççµå­é»æ¿ï¼ç¨æ·å¯ä»¥å¨ä¸é¢ç»ç»å¹¶å¯¼åºä¸ºå¾ç</span></pre>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766543009945-1be675f7-2cb1-43ce-9794-36cfa3cf9f87.png"><img data-src="https://pic.yupi.icu/1/1766543009945-1be675f7-2cb1-43ce-9794-36cfa3cf9f87.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">å£è¯èäºï¼é±¼ç®ç»å¤§å®¶ç»é¢å£è¯æ ï¼è¿éèµ ä¸ä¸ªå°ç¤¼ç©ï¼è¿æä¹è½ä¸ç®æ¯ç¨åºåçæµªæ¼«å¢~</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766548114861-81c8b4d2-b7fc-4134-8722-264edf56f229.png"><img data-src="https://pic.yupi.icu/1/1766548114861-81c8b4d2-b7fc-4134-8722-264edf56f229.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<div class="md-hr md-end-block"><hr></div>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">OKï¼è¿å°±æ¯æ <span class="md-pair-s "><strong>å©ç¨å½äº§ç AI å¤§æ¨¡å GLM-4.7 + Claude Code</strong><span class="md-plain"> å¼ååºä¸ä¸ª <span class="md-pair-s "><strong>åºäº GLM-4.7 ç Yupi Code</strong><span class="md-plain"> çå¨è¿ç¨äºã</span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">æèªå·±ä½éªä¸æ¥ï¼GLM-4.7 ç¸æ¯äºä¹åçå½åå¤§æ¨¡åï¼å¨å¤çå¤æä»»å¡çç¨³å®æ§ä¸æè¿æ­¥ï¼å³ä½¿éå°é®é¢ä¹ä¼èªå¨ä¿®å¤ï¼è®©æç»çæçä»£ç å¯è¿è¡ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">èä¸ GLM-4.7 è°ç¨å·¥å·çè½åä¹å¼ºåäºï¼å Claude Code ç­ AI ç¼ç¨å·¥å·æéåï¼ç´æ¥åç½®äºèç½æç´¢ãç½é¡µè¯»åãè§£éå¾çç­ AI ç¼ç¨å¸¸ç¨çè½åï¼ä¸éè¦èªå·±åå»æ¾ MCP æ¥å¢å¼ºäºã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ä¸å¾ä¸è¯´ï¼ä½ä¸ºä¸ç´å³æ³¨æºè°± AI çå¿ å®å¼åèï¼ççå¾è½æåå°ä»ä»¬è¿å ä¸ªææ¥å¨ AI ç¼ç¨æ¹åçåªåï¼æç¸ä¿¡å¤§å®¶ä¹æ¯æç®å±ç¹ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ä¸è¿æ¯ç«ç°å¨ç Yupi Code æ¯ AI ä¸ææ¢­çï¼è¿æå¾å¤è½ä¼åå®åçå°æ¹ãå¦æåé¢ææ¶é´ï¼å¤§å®¶ä¹æå´è¶£çè¯ï¼è¯´ä¸å®æä¼å¥½å¥½æç£¨æç£¨è¿ä¸ªå·¥å·æå®å¼æºåºæ¥ãæçç»æç®æ æ¯ï¼è®©åºäº <span class="md-pair-s "><strong>AI å¤§æ¨¡å GLM-4.7 + Claude Code</strong><span class="md-plain"> å¼åçåºäº <span class="md-pair-s "><strong>GLM-4.7 ç Yupi Code</strong><span class="md-plain"> ç¼ç¨å·¥å·ï¼è½å¤å¼ååºä¸ä¸ªåºäº <span class="md-pair-s "><strong>GLM-4.7 ç</strong><span class="md-plain"> ç¼ç¨å·¥å·ï¼æ¯å¦ Yupi Son Codeãæè®¤ä¸ºå¥½ç AI å·¥å·å°±æ¯è¦è½åå°æ éå¥å¨ï¼ç¯çèªä¸¾ï¼</span></span></span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1766549948743-c5e1340a-5b3d-4419-b5df-c2fd4a5c2c7f.jpeg"><img data-src="https://pic.yupi.icu/1/1766549948743-c5e1340a-5b3d-4419-b5df-c2fd4a5c2c7f.jpeg" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">å¬ææå£°~</span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">æ´å¤ç¼ç¨å­¦ä¹ èµæº</span></h2>
<ul class="ul-list" data-mark="-">
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/course" rel="noopener nofollow"><span class="md-plain">Javaåç«¯ç¨åºåå¿åé¡¹ç®å®ææç¨+æ¯è®¾ç½ç«</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/" rel="noopener nofollow"><span class="md-plain">ç¨åºååè´¹ç¼ç¨å­¦ä¹ äº¤æµç¤¾åºï¼èªå­¦å¿å¤ï¼</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/course/cv" rel="noopener nofollow"><span class="md-plain">ç¨åºåä¿å§çº§æ±èåç®åæåï¼æ¾å·¥ä½å¿å¤ï¼</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.mianshiya.com/" rel="noopener nofollow"><span class="md-plain">ç¨åºååè´¹é¢è¯å·é¢ç½ç«å·¥å·ï¼æ¾å·¥ä½å¿å¤ï¼</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640584449888772098" rel="noopener nofollow"><span class="md-plain">ææ°Javaé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + Javaæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640586673306091521" rel="noopener nofollow"><span class="md-plain">ææ°Pythoné¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + Pythonæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640586014108303362" rel="noopener nofollow"><span class="md-plain">ææ°åç«¯é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + åç«¯æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640586867363954689" rel="noopener nofollow"><span class="md-plain">ææ°æ°æ®ç»æåç®æ³é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + ç®æ³æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1644279832026075138" rel="noopener nofollow"><span class="md-plain">ææ°C++é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ãC++æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1641797333479903234" rel="noopener nofollow"><span class="md-plain">ææ°æ°æ®åºé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + æ°æ®åºæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640589994284695553" rel="noopener nofollow"><span class="md-plain">ææ°Redisé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + Redisæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1641035880439271426" rel="noopener nofollow"><span class="md-plain">ææ°è®¡ç®æºåºç¡å¥é¨å­¦ä¹ è·¯çº¿ + è®¡ç®æºåºç¡æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1641366118197153793" rel="noopener nofollow"><span class="md-plain">ææ°å°ç¨åºå¥é¨å­¦ä¹ è·¯çº¿ + å°ç¨åºå¼åæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="http://sqlmother.yupi.icu/" rel="noopener nofollow"><span class="md-plain">ææ°SQLé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + SQLæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640586295529324545" rel="noopener nofollow"><span class="md-plain">ææ°Linuxé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + Linuxæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640588753362108417" rel="noopener nofollow"><span class="md-plain">ææ°Git/GitHubé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + Gitæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640587909942099969" rel="noopener nofollow"><span class="md-plain">ææ°æä½ç³»ç»é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + æä½ç³»ç»æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640588119619551233" rel="noopener nofollow"><span class="md-plain">ææ°è®¡ç®æºç½ç»é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + è®¡ç®æºç½ç»æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640588392073150465" rel="noopener nofollow"><span class="md-plain">ææ°è®¾è®¡æ¨¡å¼é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + è®¾è®¡æ¨¡å¼æç¨</span></a></span></p>
</li>
<li class="md-list-item md-focus-container">
<p class="md-end-block md-p md-focus"><span class="md-meta-i-c md-link md-expand"><a href="https://www.code-nav.cn/post/1640648711119892481" rel="noopener nofollow"><span class="md-plain">ææ°è½¯ä»¶å·¥ç¨é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + è½¯ä»¶å·¥ç¨æç¨</span></a></span></p>
</li>
</ul>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-25 11:29">2025-12-25 11:28</span>&nbsp;
<a href="https://www.cnblogs.com/yupi">ç¨åºåé±¼ç®</a>&nbsp;
éè¯»(<span id="post_view_count">199</span>)&nbsp;
è¯è®º(<span id="post_comment_count">2</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19397182);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19397182', targetLink: 'https://www.cnblogs.com/yupi/p/19397182', title: 'å¥³åæéªå½åä¸è½ç¨Claude Codeï¼äºæ¯æç»å¥¹åäºä¸ä¸ª' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ EvalScopeä½¿ç¨è¿ç¨ä¸­çé®é¢æ±æ» ]]></title>
    <link>https://www.cnblogs.com/oten/p/19397129</link>
    <guid>2a52722bd04c5ff502902202df064221</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/oten/p/19397129" title="åå¸äº 2025-12-25 11:23">
    <span role="heading" aria-level="2">EvalScopeä½¿ç¨è¿ç¨ä¸­çé®é¢æ±æ»</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="1-èªå®ä¹æ°æ®éä½¿ç¨æ¶çkeyerroré®é¢">1. èªå®ä¹æ°æ®éä½¿ç¨æ¶çKeyErroré®é¢</h2>
<h3 id="é®é¢æè¿°">é®é¢æè¿°</h3>
<p>ä½¿ç¨èªå®ä¹æ°æ®éè¯æµæ¶ï¼éç½®<code>tasks: ["CustomRetrieval"]</code>ä¼è§¦å<code>KeyError</code>ï¼æ¥éä¿¡æ¯å¦ä¸ï¼</p>
<pre><code>KeyError: "KeyError: 'CustomRetrieval' not found. Did you mean: EcomRetrieval?"
</code></pre>
<h3 id="èæ¯è¯´æ">èæ¯è¯´æ</h3>
<ul>
<li>EvalScopeå®æ¹ææ¡£æç¡®èªå®ä¹æ°æ®éè¯æµä»»å¡éæå®ä¸º<code>CustomRetrieval</code>ï¼</li>
<li><code>./outputs</code>ç®å½ä¸å·²å­å¨<code>CustomRetrieval</code>ç¸å³æ°æ®éï¼</li>
<li>ä¸ªäººçè§£ï¼è¯¥æ¥éä¸å½±åè¯æµç»æçæï¼ä»å¯¼è´æç»è¯æµæµç¨çæ±æ»è¡¨æ ¼æ æ³è¾åºï¼æ´ä½æ æ ¸å¿å½±åã</li>
</ul>
<h3 id="ç¸å³èæ¬">ç¸å³èæ¬</h3>
<pre><code class="language-python">BASE_TASK_CFG4 = {
    "work_dir": "./outputs/bge_m3_T2Retrieval_eng",
    "eval_backend": "RAGEval",
    "eval_config": {
        "tool": "MTEB",
        "model": [
            {
                "model_name_or_path": "/gpu/huangyl3/Embedding_eval/model/bge_m3",  # å¾ªç¯æ¶å¨æèµå¼
                "pooling_mode": None,
                "max_seq_length": 512,
                "prompt": "",
                "model_kwargs": {"torch_dtype": "auto"},
                "encode_kwargs": {"batch_size": 128},
                "hub": "modelscope"
            }
        ],
        "eval": {
            "tasks": ["CustomRetrieval"],
            "dataset_path": "/gpu/huangyl3/Embedding_eval/datas/T2Retrieval_eng/retrieval_data",
            "verbosity": 2,
            "overwrite_results": True,
            "top_k": 5
        },
    },
}

if __name__ == "__main__":
    run_task(task_cfg=BASE_TASK_CFG4)
</code></pre>
<h2 id="2-ä¸¤é¶æ®µæµè¯èæ¬æ£ç´¢éæ">2. ä¸¤é¶æ®µæµè¯èæ¬ï¼æ£ç´¢+éæï¼</h2>
<h3 id="ç¸å³èæ¬-1">ç¸å³èæ¬</h3>
<pre><code class="language-python">from evalscope.run import run_task
two_stage_task_cfg = {
    "work_dir": "./outputs/bge-reranker-v2-m3_T2Retrieval",
    "eval_backend": "RAGEval",
    "eval_config": {
        "tool": "MTEB",
        "model": [
            {
                "model_name_or_path": "/gpu/huangyl3/Embedding_eval/model/bge_m3",
                "is_cross_encoder": False,
                "max_seq_length": 512,
                "model_kwargs": {"torch_dtype": "auto"},
                "encode_kwargs": {
                    "batch_size": 64,
                },
            },
            {
                "model_name_or_path": "/gpu/huangyl3/Embedding_eval/model/bge-reranker-v2-m3",
                "is_cross_encoder": True,
                "max_seq_length": 512,
                "prompt": "ä¸ºè¿ä¸ªé®é¢çæä¸ä¸ªæ£ç´¢ç¨çè¡¨ç¤º",
                "model_kwargs": {"torch_dtype": "auto"},
                "encode_kwargs": {
                    "batch_size": 32,
                },
            },
        ],
        "eval": {
            "tasks": ["T2Retrieval"],
            "verbosity": 2,
            "overwrite_results": True,
            "top_k": 5
        },
    },
}
run_task(task_cfg=two_stage_task_cfg)
</code></pre>
<h2 id="3-model_kwargsä¸­torch_dtypeæ¥éé®é¢">3. model_kwargsä¸­torch_dtypeæ¥éé®é¢</h2>
<h3 id="é®é¢æè¿°-1">é®é¢æè¿°</h3>
<p>è¯æµ<code>gte-multilingual-mlm-base</code>ã<code>Qwen3-Embedding-0.6B</code>ã<code>bge-m3</code>æ¨¡åï¼éæ£ç´¢æ°æ®éè¯æµä»»å¡ï¼æ¶ï¼åéç½®<code>"model_kwargs": {"torch_dtype": "auto"}</code>ä¼è§¦åæ¥éï¼<br>
ä¸´æ¶è§£å³æ¹æ¡ï¼å°<code>torch_dtype: auto</code>ç¡¬æ¹ä¸º<code>dtype: float</code>å¯è§é¿æ¥éï¼ä½å¹¶éæä¼æ¹æ¡ã</p>
<h2 id="4-æ¹éè¯æµèæ¬çæ§è¡æ¥éé®é¢">4. æ¹éè¯æµèæ¬çæ§è¡æ¥éé®é¢</h2>
<h3 id="é®é¢æè¿°-2">é®é¢æè¿°</h3>
<p>æ¹éå¾ªç¯è¯æµå¤ä¸ªæ¨¡åæ¶ï¼ç¬¬ä¸ä¸ªæ¨¡åå¯æ­£å¸¸æ§è¡ï¼åç»­æ¨¡åä¼è§¦åæ¥éï¼ä»æ¹ä¸ºæä¸¾å¼åæ³å¯æ­£å¸¸æ¹éè¿è¡ï¼æ¥éåå ææªæç¡®ï¼éæå¯¼ã</p>
<h3 id="ç¸å³èæ¬-2">ç¸å³èæ¬</h3>
<pre><code class="language-python">import time
import datetime
from evalscope.run import run_task

# ===================== éç½®æ ¸å¿åæ° =====================
# å®ä¹éè¦æ¹éè¯æµçæ¨¡ååè¡¨ï¼æ¿æ¢ä¸ºä½ è¦æµçæ¨¡ååï¼
MODEL_LIST = [
    "iic/gte-multilingual-mlm-base",  # BGEç³»åç¤ºä¾
    "Qwen/Qwen3-Embedding-0.6B",  # å¤è¯­è¨åµå¥æ¨¡åç¤ºä¾
    "BAAI/bge-m3"  # GTE-largeç¤ºä¾
]


# åºç¡éç½®æ¨¡æ¿ï¼ä¸åå«model_name_or_pathï¼å¾ªç¯æ¶å¨æå¡«åï¼
BASE_TASK_CFG = {
    "work_dir": "/Users/hyl/PyCharmMiscProject/GAi/Embedding_eval/outputs",
    "eval_backend": "RAGEval",
    "eval_config": {
        "tool": "MTEB",
        "model": [
            {
                "model_name_or_path": "",  # å¾ªç¯æ¶å¨æèµå¼
                "pooling_mode": None,
                "max_seq_length": 512,
                "prompt": "",
                "model_kwargs": {"torch_dtype": "auto"},
                "encode_kwargs": {"batch_size": 128},
                "hub": "modelscope"
            }
        ],
        "eval": {
            "tasks": ["T2Retrieval"],
            "verbosity": 2,
            "overwrite_results": True,
            "top_k": 5,
            "hub": "modelscope"
        },
    },
}

# ===================== æ ¸å¿é»è¾ï¼å¾ªç¯è¯æµ + æä¸èªå¨æ§è¡ =====================
def run_batch_evaluation():
    # éåæ¨¡ååè¡¨ï¼éä¸ªæ§è¡è¯æµ
    for idx, model_name in enumerate(MODEL_LIST):
        try:
            # å¤å¶åºç¡éç½®ï¼é¿åä¿®æ¹åå­å¸
            task_cfg = BASE_TASK_CFG.copy()
            # å¨ææ¿æ¢æ¨¡åå
            task_cfg["eval_config"]["model"][0]["model_name_or_path"] = model_name

            # æå°å½åè¯æµè¿åº¦
            current_time = datetime.datetime.now().strftime("%Y-%m-%d %H:%M:%S")
            print(f"\n===== å¼å§è¯æµç¬¬ {idx + 1}/{len(MODEL_LIST)} ä¸ªæ¨¡å =====")
            print(f"æ¹æ¬¡æ¶é´ï¼{current_time}")
            print(f"æ¨¡ååï¼{model_name}")

            # è®°å½è¯æµå¼å§æ¶é´ï¼ç²¾ç¡®å°æ¯«ç§ï¼
            start_time = datetime.datetime.now()
            print(f"è¯æµå¼å§æ¶é´ï¼{start_time.strftime('%Y-%m-%d %H:%M:%S.%f')[:-3]}")  # ä¿çæ¯«ç§
            print("===========================\n")

            # æ§è¡è¯æµä»»å¡
            run_task(task_cfg=task_cfg)

            # è®°å½è¯æµç»ææ¶é´ï¼è®¡ç®æ»èæ¶
            end_time = datetime.datetime.now()
            duration = end_time - start_time
            # è½¬æ¢èæ¶ä¸º æ¶:å:ç§ æ ¼å¼ï¼æ»ç§æ°è½¬æ¶åç§ï¼
            hours = duration.seconds // 3600
            minutes = (duration.seconds % 3600) // 60
            seconds = duration.seconds % 60
            # ä¿çæ¯«ç§çèæ¶å­ç¬¦ä¸²
            duration_str = f"{hours}å°æ¶{minutes}åé{seconds}ç§ï¼æ»èæ¶ï¼{duration.total_seconds():.2f}ç§ï¼"

            # æå°å®ææç¤º + æ¶é´ç»è®¡
            print(f"\n===== æ¨¡å {model_name} è¯æµå®æ =====")
            print(f"è¯æµç»ææ¶é´ï¼{end_time.strftime('%Y-%m-%d %H:%M:%S.%f')[:-3]}")
            print(f"æ¬æ¬¡è¯æµæ»èæ¶ï¼{duration_str}")
            print("===========================\n")

            # å¯éï¼æ¨¡åé´é´éï¼é¿åé¢ç¹è¯·æ±ï¼æ¯å¦ä¼æ¯5åéï¼
            time.sleep(300)

        except Exception as e:
            # åä¸ªæ¨¡åè¯æµå¤±è´¥ï¼è®°å½éè¯¯å¹¶ç»§ç»­ä¸ä¸ä¸ª
            end_time = datetime.datetime.now()
            print(f"\n===== æ¨¡å {model_name} è¯æµå¤±è´¥ =====")
            print(f"å¤±è´¥æ¶é´ï¼{end_time.strftime('%Y-%m-%d %H:%M:%S.%f')[:-3]}")
            print(f"éè¯¯ä¿¡æ¯ï¼{str(e)}")
            print("ç»§ç»­è¯æµä¸ä¸ä¸ªæ¨¡å...\n")
            continue

# ===================== å¯å¨æ¹éè¯æµ =====================
if __name__ == "__main__":
    run_batch_evaluation()
</code></pre>
<h3 id="å¤æ³¨">å¤æ³¨</h3>
<p>æç»­æ´æ°.......</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.001388888888888889" data-date-updated="2025-12-25 11:25">2025-12-25 11:23</span>&nbsp;
<a href="https://www.cnblogs.com/oten">Oten</a>&nbsp;
éè¯»(<span id="post_view_count">15</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19397129);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19397129', targetLink: 'https://www.cnblogs.com/oten/p/19397129', title: 'EvalScopeä½¿ç¨è¿ç¨ä¸­çé®é¢æ±æ»' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ MySQL æ°æ®åºæ¥å¿æ»ç»(ä¸) ]]></title>
    <link>https://www.cnblogs.com/zhangwencheng/p/19388036</link>
    <guid>6eae8108cd12e9b9053637d1f86523f6</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/zhangwencheng/p/19388036" title="åå¸äº 2025-12-25 10:24">
    <span role="heading" aria-level="2">MySQL æ°æ®åºæ¥å¿æ»ç»(ä¸)</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h3 id="æ°æ®åºæå¡æ¥å¿æ¦è¿°ä»ç»">æ°æ®åºæå¡æ¥å¿æ¦è¿°ä»ç»</h3>
<p>ä»»ä½ä¸ç§æ°æ®åºä¸­ï¼é½ä¼æåç§åæ ·çæ¥å¿ï¼è®°å½è¿æ°æ®åºå·¥ä½çæ¹æ¹é¢é¢ï¼ä»¥å¸®å©æ°æ®åºç®¡çåè¿½è¸ªæ°æ®åºæ¾ç»åçè¿çåç§äºä»¶ï¼</p>
<p>ä¸»è¦æ¯éå¯¹æ°æ®åºserverå±äº§ççæ°æ®ä¿¡æ¯ï¼ä¸»è¦ç¨äºè®°å½åæ°æ®åºæå¡è¿è¡æ¬èº«æå³çæ¥å¿ãä»¥åSQLè¯­å¥æä½æ§è¡ç¸å³çæ¥å¿ï¼</p>
<h3 id="æ®åºæå¡æ¥å¿å¸¸ç¨åç±»">æ®åºæå¡æ¥å¿å¸¸ç¨åç±»</h3>
<p>å¨MySQLæ°æ®åºæå¡ä¸­ï¼æ4ç§ä¸åçæ¥å¿æ¯æå¸¸ç¨çæ¥å¿ç±»åï¼è¿äºæ¥å¿è®°å½è¿æ°æ®åºå¨ä¸åæ¹é¢çè¸ªè¿¹ï¼</p>
<p>æ¥å¿ä¿¡æ¯æ¥çæ¹æ³ï¼</p>
<pre><code class="language-sql">mysql&gt; show variables like '%log%';
+------------------------------------------------+---------------------------------------------+
| Variable_name                                  | Value                                       |
+------------------------------------------------+---------------------------------------------+
| general_log                                    | OFF                                         |
| general_log_file                               | /data/3306/data/wenC-01.log                 |
| log_error                                      | ./wenC-01.err                               |
| log_bin                                        | ON                                          |
| log_bin_basename                               | /data/3306/data/binlog                      |
| log_bin_index                                  | /data/3306/data/binlog.index                |
| slow_query_log                                 | OFF                                         |
| slow_query_log_file                            | /data/3306/data/wenC-01-slow.log            |
+------------------------------------------------+---------------------------------------------+
</code></pre>
<p>å¸¸ç¨æ¥å¿ä¿¡æ¯ä»ç»ï¼</p>
<table>
<thead>
<tr>
<th>åºå·</th>
<th>æ¥å¿åç§°</th>
<th>è§£éè¯´æ</th>
</tr>
</thead>
<tbody>
<tr>
<td>01</td>
<td>general_log</td>
<td>è¡¨ç¤ºæ¥è¯¢æ¥å¿ï¼éç¨æ¥å¿ï¼ï¼é»è®¤æ¥å¿ç¶æå¤äºå³é­ï¼å¯ä»¥è¿è¡å¨çº¿è°æ´éç½®<br>ä½ç¨ï¼è®°å½äºå®¢æ·ç«¯ä»ä¼è¯è¿æ¥å¼å§ï¼æ§è¡è¿çææSQLè¯­å¥ä¿¡æ¯ï¼</td>
</tr>
<tr>
<td>02</td>
<td>log_error</td>
<td>è¡¨ç¤ºéè¯¯æ¥å¿ï¼è¿è¡æ¥å¿ï¼ï¼é»è®¤æ¥å¿ç¶æå¤äºæ¿æ´»<br>ä½ç¨ï¼è®°å½äºæ°æ®åºæå¡å¯å¨ååæ­¢æ¶ï¼ä»¥åæå¡å¨å¨è¿è¡è¿ç¨ä¸­åçä»»ä½ä¸¥ééè¯¯æ¶çç¸å³ä¿¡æ¯ï¼</td>
</tr>
<tr>
<td>03</td>
<td>log_bin</td>
<td>è¡¨ç¤ºäºè¿å¶æ¥å¿ï¼binlogæ¥å¿ï¼ï¼é»è®¤æ¥å¿ç¶æå¤äºæ¿æ´»ï¼8.0ä¹åï¼<br>ä½ç¨ï¼è®°å½äºææçDDLè¯­å¥åDMLè¯­å¥ï¼ä½æ¯ä¸åæ¬æ°æ®åºæ¥è¯¢è¯­å¥ï¼è¯­å¥ä»¥äºä»¶çå½¢å¼ä¿å­ï¼æè¿°äºæ°æ®çæ´æ¹è¿ç¨ï¼æ­¤æ¥å¿å¯¹äºç¾é¾æ¶çæ°æ®æ¢å¤èµ·çæå¶éè¦çä½ç¨ã</td>
</tr>
<tr>
<td>04</td>
<td>slow_query_log</td>
<td>è¡¨ç¤ºæ¢æ¥è¯¢æ¥å¿ï¼è®°å½äºæææ§è¡æ¶é´è¶è¿åæ°long_query_timeè®¾ç½®å¼å¹¶ä¸æ«æè®°å½æ°å°äºmin_examined_row_limitçææSQLè¯­å¥çæ¥å¿ã</td>
</tr>
</tbody>
</table>
<h3 id="æ°æ®åºæå¡æ¥å¿ä¿¡æ¯éç½®">æ°æ®åºæå¡æ¥å¿ä¿¡æ¯éç½®</h3>
<h4 id="1åç±»æ¥å¿ä¿¡æ¯éç½®éç¨æ¥å¿general_log"><strong>1.åç±»æ¥å¿ä¿¡æ¯éç½®ï¼éç¨æ¥å¿ï¼general_logï¼</strong></h4>
<ul>
<li><strong>1_1 æ¥å¿ä¿¡æ¯åºæ¬éç½®ï¼</strong></li>
</ul>
<pre><code class="language-sql">general_log=OFF          
-- é»è®¤æ¥å¿åè½å¤äºå³é­ï¼å»ºè®®å¨éè¦åè°è¯å·¥ä½æ¶ï¼åè½æµè¯ãè¯­å¥å®¡è®¡ï¼å¯ä»¥æå¼ï¼
general_log_file=/data/3306/data/wenC-01.log  
-- å®ä¹æ¥å¿æä»¶å­å¨çè·¯å¾ä¿¡æ¯ï¼å»ºè®®æ¥å¿æä»¶è·¯å¾ä¸æ°æ®å­æ¾è·¯å¾è¿è¡åç¦»ï¼

# ä¿®æ¹æ¥å¿é»è®¤ç¶æï¼æ¿æ´»æ¥å¿ï¼ï¼
mysql &gt; set global general_log=1;
</code></pre>
<blockquote>
<p>è¯´æï¼ä¼ä¸çå®ç¯å¢ï¼ç±äºæ¥å¿è®°å½éæ¯è¾å¤§ï¼æä»¥ä¸å»ºè®®æå¼æ­¤æ¥å¿è®°å½åè½ï¼å¯ä»¥å¨æéè¦æ¶æå¼ï¼æ¯æå¨çº¿éç½®è°æ´ï¼</p>
</blockquote>
<h4 id="2åç±»æ¥å¿ä¿¡æ¯éç½®éè¯¯æ¥å¿log_error"><strong>2.åç±»æ¥å¿ä¿¡æ¯éç½®ï¼éè¯¯æ¥å¿ï¼log_errorï¼</strong></h4>
<ul>
<li><strong>2_1 æ¥å¿ä¿¡æ¯åºæ¬éç½®</strong></li>
</ul>
<pre><code class="language-sql">log_error=./wenC-01.err      
-- å®ä¹æ¥å¿æä»¶å­å¨çè·¯å¾ä¿¡æ¯ï¼å»ºè®®æ¥å¿æä»¶è·¯å¾ä¸æ°æ®å­æ¾è·¯å¾è¿è¡åç¦»ï¼

# ä¿®æ¹æ¥å¿å­å¨è·¯å¾ï¼æ°¸ä¹éç½®ï¼ï¼
[root@cheng ~]# vim /etc/my.cnf
log_error=/data/3306/log/wenC-01.err
-- éç½®æä»¶ç¼åå®æ¯åï¼éè¦éå¯æ°æ®åºæå¡çæ

# æ¨¡ææéæ¥å¿åºç¨
[root@cheng ~]# ll /data/3306/data/ibdata1 
-rw-r----- 1 mysql mysql 12582912 Nov 16 17:46 /data/3306/data/ibdata1
[root@cheng ~]# chmod 000 /data/3306/data/ibdata1
[root@cheng ~]# /etc/init.d/mysqld restart
Shutting down MySQL............................... SUCCESS! 
Starting MySQL......................................... ERROR! The server quit without updating PID file (/data/3306/data/wenC-01.pid).
[root@cheng ~]# tail -20 /data/3306/log/wenC-01.err
2022-11-21T01:20:47.735040Z 1 [ERROR] [MY-012271] [InnoDB] The innodb_system data file 'ibdata1' must be writable
2022-11-21T01:20:47.744091Z 1 [ERROR] [MY-012278] [InnoDB] The innodb_system data file 'ibdata1' must be writable
2022-11-21T01:20:47.744808Z 1 [ERROR] [MY-010334] [Server] Failed to initialize DD Storage Engine
2022-11-21T01:20:47.745739Z 0 [ERROR] [MY-010020] [Server] Data Dictionary initialization failed.
2022-11-21T01:20:47.746526Z 0 [ERROR] [MY-010119] [Server] Aborting
-- æ ¹æ®éè¯¯æ¥å¿çéè¯¯æç¤ºä¿¡æ¯ï¼è¿è¡éè¯¯ä¿¡æ¯è¿è¡åæï¼ä»èææ¥æéå¯è½åºç°çåå ï¼
</code></pre>
<blockquote>
<p>è¯´æï¼ä¼ä¸çå®ç¯å¢ï¼æ¥å¿å¤äºé»è®¤æ¿æ´»è®°å½ç¶æï¼å¯ä»¥ä½¿ç¨éè¯¯æ¥å¿ä¿¡æ¯åæéè¯æ­ï¼è®°å½éè¯¯ä¿¡æ¯çº§å«ä¸ºnote warning errorï¼</p>
</blockquote>
<h4 id="3åç±»æ¥å¿ä¿¡æ¯éç½®äºè¿å¶æ¥å¿log_bin"><strong>3.åç±»æ¥å¿ä¿¡æ¯éç½®ï¼äºè¿å¶æ¥å¿ï¼log_binï¼</strong></h4>
<p>å¨è¿è¡å¢éæ¢å¤æ°æ®æ¶ï¼éè¦åäºè§£ä»ä¹æ¯binlogæ¥å¿ï¼æ­¤æ¥å¿æä»¶å¶å®å°±æ¯ç¨äºè®°å½å¯¹æ°æ®åºè¿è¡æä½æ´æ¹çè¯­å¥ä¿¡æ¯çï¼</p>
<p>å¹¶ä¸è®°å½æ´æ¹çè¯­å¥ä¿¡æ¯ä»¥äºä»¶å½¢å¼è¿è¡è®°å½ï¼ä½æ¯éè¦æ³¨æçæ¯æ¥è¯¢ç¸å³çè¯­å¥æ¯ä¸ä¼è¢«è®°å½çï¼æ¯å¦ï¼selectãshowï¼</p>
<p>ç¶èä½ä¸ºææå¯¹æ°æ®åºçæ¹æä½äºä»¶ä¿¡æ¯é½ä¼è¢«è®°å½ï¼æ¯å¦ï¼insertãupdateãcreateãdropããã</p>
<p><strong>æ¥çæ°æ®åºbinlogæ¥å¿éç½®åæ°ï¼</strong></p>
<p>è¿å¥å°æ°æ®åºæå¡ç³»ç»ç¯å¢ä¸­ï¼å¯ä»¥ä½¿ç¨å½ä»¤è¿è¡æ¥çbinlogæ¥å¿åè½æ¯å¦å¼å¯ï¼</p>
<pre><code class="language-sql"># æªå¼å¯binlogæ¥å¿åè½æ¶ï¼æ¥çç³»ç»binlogåè½éç½®åæ°ç¶æ
mysql&gt; show variables like '%log_bin%';
+-----------------------------------------+-------+
| Variable_name                           | Value |
+-----------------------------------------+-------+
| log_bin                                 | OFF   |
| sql_log_bin                             | ON    |
+-----------------------------------------+-------+
3 rows in set (0.00 sec)
--- éè¿ä»¥ä¸è¾åºä¿¡æ¯å¯ä»¥çå°log_binä¸ºoffç¶æï¼è¡¨ç¤ºbinlogæ¥å¿åè½å°æªå¼å¯

# å·²å¼å¯binlogæ¥å¿åè½åï¼æ¥çç³»ç»binlogåè½éç½®åæ°ç¶æ
mysql&gt; show variables like '%log_bin%';
+-----------------------------------------+-------+
| Variable_name                           | Value |
+-----------------------------------------+-------+
| log_bin                                 | ON    |
| sql_log_bin                             | ON    |
+-----------------------------------------+-------+
3 rows in set (0.00 sec)
--- éè¿ä»¥ä¸è¾åºä¿¡æ¯å¯ä»¥çå°log_binä¸ºonç¶æï¼è¡¨ç¤ºbinlogæ¥å¿åè½å·²ç»å¼å¯
</code></pre>
<ul>
<li><strong>3_1 æ¥å¿ä¿¡æ¯åºæ¬éç½®</strong></li>
</ul>
<pre><code class="language-sql">server_id=6
-- è¿è¡ä¸»ä»æä½æ¶ï¼éè¦è¿è¡æ­¤ä¿¡æ¯éç½®ï¼
log_bin=ON      
-- é»è®¤æ¥å¿åè½å¤äºå³é­ç¶æ
log_bin_basename=/data/3306/data/binlog        
-- å®ä¹æ¥å¿æä»¶å­å¨çè·¯å¾ä¿¡æ¯ï¼å»ºè®®æ¥å¿æä»¶è·¯å¾ä¸æ°æ®å­æ¾è·¯å¾è¿è¡åç¦»ï¼

# éç½®ä¿¡æ¯ç®åæ¹å¼ï¼å¼å¯æ°æ®åºbinlogæ¥å¿è®°å½åè½
[root@cheng ~]# vim /etc/my.cnf
-- æ¿æ´»binlogæ¥å¿è®°å½åè½ï¼éè¦å¯¹æ°æ®åºæå¡éç½®æä»¶è¿è¡ç¼è¾ä¿®æ¹
[mysqld]
server_id=6
log_bin=/data/3306/binlog/mysql-bin
-- è¿è¡binlogæ¥å¿ç®å½è·¯å¾ä¿¡æ¯ä¿®æ¹æ¶ï¼éè¦åå»ºæå®çç®å½å¹¶è®¾ç½®æéä¿¡æ¯ï¼æåéè¦éæ°å¯å¨æ°æ®åºæå¡çæï¼
æè
log_bin=binlog
-- åªæ¯è®¾ç½®æ¥å¿åç§°ä¿¡æ¯ï¼æ¥å¿ä¼èªå¨ä¿å­å°æ°æ®åºæå¡æå®çæ°æ®ç®å½ä¸­ï¼

# éç½®æä»¶ä¿®æ¹åéè¦éå¯æ°æ®åºæå¡ï¼å è½½éç½®æä»¶æ¹å¨çä¿¡æ¯ï¼
[root@cheng ~]# /etc/init.d/mysqld restart 
[root@cheng ~]# ll -h /data/3306/data/binlog*
-rw-rw----. 1 mysql mysql 245 6æ  24 02:19 /data/3306/data/binlog.00000N
-rw-rw----. 1 mysql mysql   16 6æ  24 02:19 /data/3306/data/binlog.index
-- æ°æ®åºæå¡éå¯åï¼å·²ç»å¯ä»¥å¨æ°æ®åºçæ°æ®å­å¨ç®å½ä¸­ï¼çå°binlogæ¥å¿æä»¶çè¸ªå½±
</code></pre>
<blockquote>
<p>è¯´æï¼ä¼ä¸çå®ç¯å¢ï¼æ¥å¿å¤äºé»è®¤æ¿æ´»è®°å½ç¶æï¼å¯ä»¥ä½¿ç¨æ¥å¿ä¿¡æ¯è¿è¡ç¾é¾æ°æ®æ¢å¤ï¼ä»¥åå¯ä»¥ç¨äºå®ç°ä¸»ä»å¤å¶ï¼</p>
</blockquote>
<ul>
<li><strong>3_2 æ¥å¿éç½®ä¿¡æ¯æ©å±</strong><br>
åæ°å®æ¹èµæé¾æ¥ï¼<a href="https://dev.mysql.com/doc/refman/8.0/en/replication-options-binary-log.html" target="_blank" rel="noopener nofollow">https://dev.mysql.com/doc/refman/8.0/en/replication-options-binary-log.html</a></li>
</ul>
<pre><code class="language-sql"># åæ°ä¸ï¼sync_binlog è¡¨ç¤ºå·æ°æ¥å¿å°ç£çç­ç¥
mysql&gt; select @@sync_binlog;
+---------------------+
| @@sync_binlog       |
+---------------------+
|                   1 |
+---------------------+
1 row in set (0.00 sec)
-- å¨è¿è¡ä¸»ä»åæ­¥è¿ç¨çåä¸æ åçå¶ä¸­ä¸ä¸ª1çä¿¡æ¯éç½®ï¼ä¸»è¦æ¯æ§å¶ç¼å²åºéçbinlogæ¥å¿ä¿¡æ¯å¦ä½å·åå°ç£çä¸­ï¼
-- æ­¤åæ°ä¿¡æ¯æ¯æä¸ç§æ¹å¼è¿è¡éç½®çï¼
-- åæ°ä¿¡æ¯éç½®0ï¼è¡¨ç¤ºç±æä½ç³»ç»ç¼å­èªå·±å³å®ï¼ä»ä¹æ¶åå·æ°æ¥å¿å°ç£çä¸­ï¼
-- åæ°ä¿¡æ¯éç½®1ï¼è¡¨ç¤ºæ¯æ¬¡äºå¡æäº¤ï¼ç«å³å·æ°æ¥å¿å°ç£çä¸­ï¼(æ­¤æ¹å¼éç½®æ´å®å¨)
-- åæ°ä¿¡æ¯éç½®Nï¼è¡¨ç¤ºæ¯ç»äºå¡æäº¤ï¼æç§ç»çäºå¡æ¬¡æ°å®ä¹ï¼ç¡®å®å·æ°æ¥å¿å°ç£çä¸­çé¢æ¬¡ï¼ï¼å¯ä»¥ææåå°IOæ§è½æèï¼

# åæ°äºï¼binlog_format å®ä¹binlogæ¥å¿çæ ¼å¼ä¿¡æ¯
mysql&gt; select @@binlog_format;
+------------------------+
| @@binlog_format        |
+------------------------+
| ROW                    |
+------------------------+
1 row in set (0.00 sec)
-- å¨è¿è¡ä¸»ä»åæ­¥æ°æ®æ¢å¤æ¶ï¼æ­¤åæ°éç½®å¯è½ä¼å½±åæ°æ®æ¢å¤çä¸è´æ§é®é¢ï¼
-- æ­¤åæ°ä¿¡æ¯æ¯æä¸ç§æ¹å¼è¿è¡éç½®çï¼ç¡®å®äºä¸»ä»å¤å¶ççº§å«ï¼åªéå¯¹DMLè¯­å¥çæ¥å¿æææï¼
-- åæ°ä¿¡æ¯éç½® statementï¼SBRï¼ï¼è¯­å¥æ ¼å¼è®°å½binlogï¼
create database wenC;  -- DDL DCLè¯­å¥åªè½ä½¿ç¨statement è¡¨ç¤ºçå°±æ¯ååæ¬æ¬çè¯­å¥ä¿¡æ¯ï¼å³åä»ä¹å°±è®°å½ä»ä¹ï¼
-- åæ°ä¿¡æ¯éç½® rowï¼RBRï¼ï¼è¡æ ¼å¼è®°å½binlogï¼é»è®¤æ¨¡å¼ï¼
update t1 set a=10 where id&lt;10;    -- ä¼è®°å½è¡çååä¿¡æ¯ï¼å±äºåºå±çè®°å½ä¿¡æ¯ï¼å¯è½ä¼æå¤ä¸ªååæ¥å¿ä¿¡æ¯è®°å½
-- åæ°ä¿¡æ¯éç½® mixedï¼MBRï¼ï¼æ··åæ ¼å¼è®°å½binlog
    -- ç±æ°æ®åºæå¡èªè¡å³å®ï¼æ¯è®°å½è¯­å¥ä¿¡æ¯ï¼è¿æ¯è®°å½è¡çååä¿¡æ¯ï¼
</code></pre>
<p>SBRï¼statement-based replicationï¼ä¸RBRï¼Row-Based Replicationï¼è®°å½çä¼ç¼ºç¹åæï¼ï¼é¢è¯å¸¸è§é®é¢ï¼</p>
<table>
<thead>
<tr>
<th>è®°å½æ¹å¼</th>
<th>ä¼ç¹è¯´æ</th>
<th>ç¼ºç¹è¯´æ</th>
</tr>
</thead>
<tbody>
<tr>
<td>SBR</td>
<td>å¯è¯»æ§å¼ºï¼æ¥å¿éç¸å¯¹è¾å°ï¼</td>
<td>æ°æ®ä¿¡æ¯å¯è½ä¸åç¡®ï¼æ°æ®ä¸è´æ§ä¸è¶³</td>
</tr>
<tr>
<td>RBR</td>
<td>æ°æ®ä¿¡æ¯è®°å½æ´åç¡®ï¼æ°æ®ä¸è´æ§æ´å¼º</td>
<td>å¯è¯»æ§å¼±ï¼æ¥å¿éç¸å¯¹è¾å¤ï¼æ°æ®è®°å½åç¡®</td>
</tr>
<tr>
<td>ä¸¾ä¾è¯´æ</td>
<td>update t1 set a=10 where id&lt;10000;  è®°å½ä¸æ¡è¯­å¥å³å¯</td>
<td>insert into éæºæ°å½æ°;</td>
</tr>
<tr>
<td>ä¸¾ä¾è¯´æ</td>
<td>update t1 set a=10 where id&lt;10000;  è®°å½å¤æ¡è¯­å¥ä¿®æ¹ä¿¡æ¯ï¼çææ¥å¿</td>
<td>insert into éæºæ°å½æ°;</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>3_3 æ¥å¿ä¿¡æ¯æ¥çæ¹æ³ï¼</strong></li>
</ul>
<p>å¯ä»¥éè¿æ¥çæ¹å¼ï¼è·åbinlogæ¥å¿éçæ°æ®ä¿¡æ¯ï¼ä¸è¬å¨æ°æ®åºå¯å¨æ¶ï¼æ¥å¿è®°å½åè½å°±å¼å¯äºï¼</p>
<p>å¯ä»¥å©ç¨æ¥å¿ä¸­è®°å½ä¿¡æ¯ï¼å°æ°æ®åºæå¡çæ°æ®ä¿¡æ¯æ¢å¤å°æå®çæ¶é´ç¹ï¼åæ¶ä¹å¯ä»¥æ¯æä¸»ä»æ°æ®å¤å¶ï¼å¨å¶å®æºå¨ä¸åæ¾æ¥å¿ï¼ï¼</p>
<p><code>å¯¹äºbinlogæ¥å¿ä¿¡æ¯çæ¥çï¼ä¸»è¦ç®çæ¯ä¸ºäºæ¥åæ¥å¿äºä»¶ä¿¡æ¯çæªåæä½ï¼</code></p>
<p>æ¥çæ¹å¼ä¸ï¼ç¡®è®¤æ°æ®åºbinlogæ¥å¿æ°é</p>
<pre><code class="language-sql">mysql&gt; show binary logs;
+------------------+-------------+--------------+
| Log_name         | File_size   | Encrypted    |
+------------------+-------------+--------------+
| binlog.000001    |         156 | No           |
+------------------+-------------+--------------+
-- è·åæ°æ®åºæå¡è¿è¡è¿ç¨ä¸­ï¼ä½¿ç¨çbinlogæ¥å¿çæåµ

mysql&gt; flush logs;
Query OK, 0 rows affected (0.12 sec)
-- å¯ä»¥æ§è¡flushå·æ°å½ä»¤ï¼ä»èçææ°çbinlogæ¥å¿æä»¶ï¼ç±»ä¼¼äºå®ç°äºæ¥å¿åå²åè½ï¼
mysql&gt; show binary logs;
+------------------+-------------+--------------+
| Log_name         | File_size   | Encrypted    |
+------------------+-------------+--------------+
| binlog.000001    | 200         | No           |
| binlog.000002    | 156         | No           |
+------------------+-------------+--------------+
2 rows in set (0.00 sec)
</code></pre>
<p>æ¥çæ¹å¼äºï¼ç¡®è®¤æ°æ®åºbinlogæ¥å¿ç¶æ</p>
<pre><code class="language-sql">mysql&gt; create database test_binlog;
Query OK, 1 row affected (0.03 sec)
-- æ¨¡ææ°æ®æå¡æä¿®æ¹æä½
mysql&gt; select * from world.city limit 1;
Query OK, 1 row affected (0.03 sec)
-- æ¨¡ææ°æ®æå¡æä¿®æ¹æä½
mysql&gt; show binary logs;
+------------------+-------------+--------------+
| Log_name         | File_size   | Encrypted    |
+------------------+-------------+--------------+
| binlog.000001    |  200        | No           |
| binlog.000002    |  362        | No           |
+------------------+-------------+--------------+
2 rows in set (0.00 sec)
-- å¯ä»¥çå°binlogæ¥å¿çå­å¨éåçäºååï¼ä½æ¯å¨åæ¥è¯¢æä½æ¶ï¼binlogæ¥å¿çå­å¨éå¹¶æªåçåå

mysql&gt; show master status;
+------------------+------------+------------------+-----------------------+-------------------------+
| File             | Position   | Binlog_Do_DB     | Binlog_Ignore_DB      | Executed_Gtid_Set       |
+------------------+------------+------------------+-----------------------+-------------------------+
| binlog.000002    |  362       |                  |                       |                         |
+------------------+------------+------------------+-----------------------+-------------------------+
1 row in set (0.00 sec)
-- æ¥çè·åå½åä½¿ç¨çbinlogæ¥å¿æåµï¼ä»¥åäº§ççæ¥å¿éå­èå¤§å°ï¼
</code></pre>
<p>æ¥çæ¹å¼ä¸ï¼æ¥çæ°æ®åºbinlogæ¥å¿ä¿¡æ¯</p>
<pre><code class="language-sql">mysql&gt; show binlog events in 'binlog.000002';
-- binlogæ¥å¿ä¿¡æ¯æ¯ä»¥äºä»¶æ¹å¼è¿è¡è®°å½çï¼æä»¥æ¥å¿æ¥çè¿ç¨æ¯æ¥çäºä»¶ä¿¡æ¯
-- ä¸è¬binlogæ¥å¿çåä¸¤è¡ï¼è¡¨ç¤ºæ¥å¿æ ¼å¼å¤´ä¿¡æ¯ï¼æ¥å¿ç®åçæè¿°ä¿¡æ¯ï¼
-- ä¸è¬binlogæ¥å¿ä¸­çqueryä¿¡æ¯ï¼å°±æ¯å¯¹æ°æ®åºçæä½è¯­å¥ï¼å¶ä¸­åå«äºåå»ºæ°æ®åºçè¯­å¥ï¼
</code></pre>
<p>å·ä½binlogäºä»¶ä¿¡æ¯ï¼<br>
<img src="https://img2024.cnblogs.com/blog/1080590/202512/1080590-20251223170443956-396789651.png" alt="1669004768083" loading="lazy"></p>
<p>å·ä½binlogäºä»¶è®°å½ä¿¡æ¯åæï¼</p>
<table>
<thead>
<tr>
<th>åå·</th>
<th>åä¿¡æ¯</th>
<th>è§£éè¯´æ</th>
</tr>
</thead>
<tbody>
<tr>
<td>01</td>
<td>Log_name</td>
<td>è¡¨ç¤ºæå®æ¥ççbinlogæ¥å¿æä»¶åç§°ä¿¡æ¯</td>
</tr>
<tr>
<td>02</td>
<td>Pos</td>
<td>è¡¨ç¤ºbinlogæ¥å¿äºä»¶å¼å§çä½ç½®ç¹ï¼ç¨äºæªåäºè¿å¶æ¥å¿ä¿¡æ¯æ è¯</td>
</tr>
<tr>
<td>05</td>
<td>End_log_pos</td>
<td>è¡¨ç¤ºbinlogæ¥å¿äºä»¶ç»æçä½ç½®ç¹ï¼ç¨äºæªåäºè¿å¶æ¥å¿ä¿¡æ¯æ è¯</td>
</tr>
<tr>
<td>06</td>
<td>Info</td>
<td>è¡¨ç¤ºbinlogä¸­å·ä½çäºä»¶åå®¹ä¿¡æ¯</td>
</tr>
</tbody>
</table>
<p>æ¥çæ¹å¼åï¼ç­éæ°æ®åºbinlogæ¥å¿äºä»¶</p>
<pre><code class="language-sql"># æ¨¡æçæbinlogæ¥å¿äºä»¶ä¿¡æ¯
mysql&gt; source ~/world.sql;
mysql&gt; drop database world;
mysql&gt; source ~/world.sql;

# è·åå é¤æ°æ®åºçäºä»¶ä¿¡æ¯ï¼
# ç­éæ°æ®åºæ¥å¿æ¹å¼ä¸ï¼
[root@cheng data]# mysql -e "show binlog events in 'binlog.000002'"|grep "drop database"
binlog.000002	722789	Query	1	722896	drop database world /* xid=5363 */
-- è·åæå®äºä»¶ä¿¡æ¯äº§ççèµ·ç¹ä½ç½®åç»ç¹ä½ç½®ä¿¡æ¯ï¼

# ç­éæ°æ®åºæ¥å¿æ¹å¼äºï¼
mysql&gt; pager less
-- å¨æ°æ®åºä¸­å®ä¹pageråè½ï¼æ°æ®åºè¿æ¥ä¼è¯éåºå³å¤±æï¼
mysql&gt; show binlog events in 'binlog.000002';
-- æ­¤æ¶æ¥çæ¥å¿äºä»¶ä¿¡æ¯å·æäºç¿»é¡µåè½
/drop database
| binlog.000002 |  722789 | Query          |         1 |      722896 | drop database world /* xid=5363 */
mysql&gt; pager grep "drop database"
PAGER set to 'grep "drop database"'
-- è¡¨ç¤ºå¼å¯æ°æ®åºpagerçè¿æ»¤åè½
mysql&gt; show binlog events in 'binlog.000002';
| binlog.000002 |  722789 | Query          |         1 |      722896 | drop database world /* xid=5363 */ 
-- åæ¬¡æ¥çbinlogäºä»¶ä¿¡æ¯æ¶ï¼åªè¿æ»¤æ¾ç¤ºå é¤æ°æ®åºçæä½äºä»¶æ¥å¿
</code></pre>
<blockquote>
<p>è¯´æï¼å¨å®éçäº§ç¯å¢ä¸­ï¼è¥binlogæ¥å¿éæ¯è¾å¤§æ¶ï¼éè¦å¿«éè¿æ»¤å³é®æ¥å¿äºä»¶è¡ï¼å¯ä»¥ä½¿ç¨ä»¥ä¸æ¥çæ¥å¿æ¹æ³ï¼</p>
</blockquote>
<p><strong>è·åæ°æ®åºbinlogæ¥å¿è®°å½ä¿¡æ¯å¼å¸¸ï¼</strong></p>
<p>è¿è¡æ°æ®åºæå¡æ°æ®ä¿¡æ¯æ´æ¹æä½ï¼éåæ¥çbinlogæ¥å¿ä¿¡æ¯çååï¼</p>
<pre><code class="language-sql"># è¿è¡æ°æ®åºåå»ºæä½
mysql&gt; create database wenC;
mysql&gt; show databases;

# æ¥çè·åbinlogæ¥å¿è®°å½ä¿¡æ¯
[root@cheng ~]# mysqlbinlog /var/lib/mysql/binlog.000001 
mysqlbinlog: unknown variable 'default-character-set=utf8mb4'
-- ç±äºå¨æ°æ®åºå¨å®¢æ·ç«¯éç½®æä»¶ä¸­æ·»å äºdefault-character-set=utf8mb4å­ç¬¦ç¼ç ä¿¡æ¯ï¼å æ­¤é ææ æ³æ¥çbinlog
[root@cheng ~]# cat /etc/my.cnf.d/client.cnf 
[client]
#default-character-set=utf8mb4
[client-mariadb]
#default-character-set=utf8mb4
-- å¯ä»¥ä¸´æ¶è°æ´åå°å®¢æ·ç«¯çå­ç¬¦ç¼ç éç½®ä¿¡æ¯æ³¨éï¼
[root@cheng ~]# mysqlbinlog /var/lib/mysql/binlog.000001
... çç¥é¨åä¿¡æ¯ ...
# at 494
#220624  2:35:02 server id 1  end_log_pos 579 Query	thread_id=2	exec_time=0	error_code=0
SET TIMESTAMP=1656009302/*!*/;
create database wenC
/*!*/;
... çç¥é¨åä¿¡æ¯ ...
-- å¨binlogæ¥å¿æä»¶ä¸­ï¼å·²ç»è®°å½äºä¹åçåå»ºxiaoQçæ´æ¹æä½è®°å½ä¿¡æ¯
</code></pre>
<ul>
<li><strong>3_4 æ¥å¿ä¿¡æ¯åºç¨å®æ</strong></li>
</ul>
<p><strong>æ°æ®åºæ°æ®å¼å¸¸æ¢å¤ï¼ç®åæåµï¼</strong></p>
<p>å¨å®éçæç¯å¢ä¸­ï¼å¯ä»¥å©ç¨binlogæ¥å¿è®°å½çä¿¡æ¯æªåï¼å®ç°æ°æ®åºå¼å¸¸æåµä¸çæ°æ®ä¿¡æ¯æ¢å¤åè½ï¼</p>
<p>æ°æ®åºå¼å¸¸æ¢å¤æåµç¯å¢åå¤ï¼</p>
<pre><code class="language-sql"># åæ¢æ°çbinlogæ¥å¿æä»¶åæ¨¡ææ°æ®æ¢å¤
mysql&gt; flush logs;
Query OK, 0 rows affected (0.03 sec)
mysql&gt; show master status;
+------------------+------------+------------------+-----------------------+-------------------------+
| File             | Position   | Binlog_Do_DB     | Binlog_Ignore_DB      | Executed_Gtid_Set       |
+------------------+------------+------------------+-----------------------+-------------------------+
| binlog.000003    |  156       |                  |                       |                         |
+------------------+------------+------------------+-----------------------+-------------------------+
1 row in set (0.01 sec)
-- ç¡®è®¤å·²ç»å·æ°çæäºæ°çbinlogæ¥å¿æä»¶ï¼

# è¿è¡åºæ¬çæ°æ®åºSQLè¯­å¥æä½ï¼
mysql&gt; create database bindb;
mysql&gt; use bindb;
mysql&gt; create table t1 (id int);
mysql&gt; begin;
mysql&gt; insert into t1 values(1);
-- å¨æ²¡æè¿è¡äºå¡æäº¤åï¼æä½çäºå¡äºä»¶ä¿¡æ¯ï¼æ¯ä¸ä¼åºç°å¨binlogäºä»¶æ¥å¿ä¸­ç
mysql&gt; commit;
-- å¯¹äºæ°æ®åºçbinlogæ¥å¿ï¼åªä¼è®°å½äºå¡å·²ç»æäº¤çDMLè¯­å¥ä¿¡æ¯ï¼æ²¡ææäº¤çDMLè¯­å¥æ¯ä¸ä¼è¿è¡è®°å½çï¼
-- å¨æ¥å¿ä¸­ååçDMLè¯­å¥ä¿¡æ¯æ¯æ æ³è¯å«çï¼å ä¸ºè®°å½DMLæä½çè¯­å¥é»è®¤æ¯ä»¥ROWæ¨¡å¼è®°å½çï¼
</code></pre>
<p>æ°æ®åºäºè¿å¶æ¥å¿ä¿¡æ¯æ¥çæ¹æ³ï¼</p>
<pre><code class="language-sql">[root@cheng ~]# mysqlbinlog /data/3306/data/binlog.000003
-- å¯¹äºæ°æ®åºbinlogæ¥å¿ä¿¡æ¯ï¼æ¯æ æ³ç´æ¥æ¥çåå®¹ä¿¡æ¯ï¼éè¦å©ç¨ç¸å³å½ä»¤å·¥å·è¿è¡æ¥ç
# The proper term is pseudo_replica_mode, but we use this compatibility alias
# to make the statement usable on server versions 8.0.24 and older.
/*!50530 SET @@SESSION.PSEUDO_SLAVE_MODE=1*/;
/*!50003 SET @OLD_COMPLETION_TYPE=@@COMPLETION_TYPE,COMPLETION_TYPE=0*/;
DELIMITER /*!*/;
# at 4
#221121 13:12:59 server id 1  end_log_pos 125 CRC32 0xbb7d1fd1 	Start: binlog v 4, server v 8.0.26 created 221121 13:12:59
# Warning: this binlog is either in use or was not closed properly.
BINLOG '
2wh7Yw8BAAAAeQAAAH0AAAABAAQAOC4wLjI2AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAEwANAAgAAAAABAAEAAAAYQAEGggAAAAICAgCAAAACgoKKioAEjQA
CigB0R99uw==
'/*!*/;
# at 125
#221121 13:12:59 server id 1  end_log_pos 156 CRC32 0x04874c92 	Previous-GTIDs
# [empty]
-- binlogæ¥å¿æä»¶156ä¹åçåå®¹æ¯å¯ä»¥å¿½ç¥çï¼è¡¨ç¤ºæ¯æ¥å¿æä»¶çå¤´æ ¼å¼åå®¹ä¿¡æ¯
# at 156
#221121 13:16:19 server id 1  end_log_pos 233 CRC32 0xd73c14e1 	Anonymous_GTID	last_committed=0	sequence_number=1	rbr_only=no	original_committed_timestamp=1669007779100380	immediate_commit_timestamp=1669007779100380	transaction_length=188
# original_commit_timestamp=1669007779100380 (2022-11-21 13:16:19.100380 HKT)
# immediate_commit_timestamp=1669007779100380 (2022-11-21 13:16:19.100380 HKT)
/*!80001 SET @@session.original_commit_timestamp=1669007779100380*//*!*/;
/*!80014 SET @@session.original_server_version=80026*//*!*/;
/*!80014 SET @@session.immediate_server_version=80026*//*!*/;
SET @@SESSION.GTID_NEXT= 'ANONYMOUS'/*!*/;
-- binlogæ¥å¿æä»¶å·²äºä»¶å½¢å¼è¿è¡è®°å½ï¼ä¸»è¦å³æ³¨ä¸¤ä¸ªatåå®¹ä¹é´çä¿¡æ¯ï¼å³è¡¨ç¤ºçæ¯ä¸ä¸ªäºä»¶ä¿¡æ¯ï¼
# at 233
-- binlogæ¥å¿ä¸­ä¸ä¸ªäºä»¶çå¼å§ï¼å°±è¡¨ç¤ºä¸ä¸ä¸ªäºä»¶çç»æï¼å¨binlogä¸­è®°å½çäºä»¶æ¥å¿ä¿¡æ¯æ¯è¿ç»­çï¼
#221121 13:16:19 server id 1  end_log_pos 344 CRC32 0x624986f5 	Query	thread_id=11	exec_time=0	error_code=0	Xid = 10728
SET TIMESTAMP=1669007779/*!*/;
SET @@session.pseudo_thread_id=11/*!*/;
SET @@session.foreign_key_checks=1, @@session.sql_auto_is_null=0, @@session.unique_checks=1, @@session.autocommit=1/*!*/;
SET @@session.sql_mode=1168113696/*!*/;
SET @@session.auto_increment_increment=1, @@session.auto_increment_offset=1/*!*/;
/*!\C utf8mb4 *//*!*/;
SET @@session.character_set_client=255,@@session.collation_connection=255,@@session.collation_server=255/*!*/;
SET @@session.lc_time_names=0/*!*/;
SET @@session.collation_database=DEFAULT/*!*/;
/*!80011 SET @@session.default_collation_for_utf8mb4=255*//*!*/;
/*!80016 SET @@session.default_table_encryption=0*//*!*/;
create database bindb
/*!*/;
# at 344
</code></pre>
<p>binlogæ¥å¿åå®¹ä¸­ä¸»è¦å³æ³¨çä¿¡æ¯ï¼</p>
<ul>
<li><strong>éè¿æ¥å¿ä¿¡æ¯æ¥çDDLæä½è¯­å¥ä¿¡æ¯ï¼è®°å½æ¹å¼ SBRï¼</strong></li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/1080590/202512/1080590-20251223170554930-296167952.png" alt="1669015300339" loading="lazy"></p>
<ul>
<li><strong>éè¿æ¥å¿ä¿¡æ¯æ¥çDMLæä½è¯­å¥ä¿¡æ¯ï¼è®°å½æ¹å¼ RBRï¼</strong></li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/1080590/202512/1080590-20251223170614385-150887390.png" alt="1669015788023" loading="lazy"></p>
<p>ä»¥ä¸ROWæ¨¡å¼è®°å½çä¿¡æ¯æ¯å å¯æ¾ç¤ºï¼æ æ³ç´æ¥æ¥ççï¼å¯ä»¥ä½¿ç¨ä¸é¢å½ä»¤åæ°è¿è¡è·åè¯¦ç»ä¿¡æ¯ï¼</p>
<pre><code class="language-sql">[root@cheng ~]# mysqlbinlog --base64-output=decode-rows -vvv /data/3306/data/binlog.000003 
-- ä»¥ä¸æ·»å çåæ°ä¿¡æ¯ï¼è¡¨ç¤ºå°DMLçROWæ ¼å¼è¯­å¥ä¿¡æ¯ï¼è¿è¡æ ¼å¼åå¤çè¾åºï¼
# at 739
#221121 13:17:45 server id 1  end_log_pos 779 CRC32 0xb468b459 	Write_rows: table id 101 flags: STMT_END_F
### INSERT INTO `bindb`.`t1`
-- å©ç¨DMLè¯­å¥åçæå¥è¯­å¥ä¿¡æ¯å°±æ¾ç¤ºåºæ¥äº
### SET
###   @1=1 /* INT meta=0 nullable=1 is_null=0 */
-- ä»¥ä¸æ¥å¿è®°å½çä¿¡æ¯ï¼å¯ä»¥ç¨å½ä»¤å®ç°ï¼å¦ä¸ï¼
mysql &gt; insert into t1 set id=1;
ç­ä»·äº
mysql &gt; insert into t1 values(1);
</code></pre>
<p>æ°æ®åºæ¨¡æå¼å¸¸æåµç ´åæä½ï¼</p>
<pre><code class="language-sql">mysql&gt; drop database bindb;
-- æ¨¡æç ´åæ§æä½ï¼å é¤æ°æ®åº
</code></pre>
<p>æ°æ®åºå¼å¸¸æåµæ°æ®æ¢å¤æä½ï¼</p>
<pre><code class="language-sql"># éè¦æ¢å¤å»ºåºå¼å§ï¼å é¤ä¹åçæææä½ï¼å³ææbinlogæ¥å¿ä¿¡æ¯ï¼ï¼å®ç°æ¥å¿ä¿¡æ¯çæªå
mysql&gt; show binlog events in 'binlog.000002';
-- æ¥çæªåæ¥å¿ä¿¡æ¯äºä»¶åºåèå´
[root@cheng ~]# mysqlbinlog --start-position=233 --stop-position=1162 /data/3306/data/binlog.000003 &gt;/tmp/bin.sql
-- ä¾æ®binlogæ¥å¿çpositionå·ç ï¼å³å¯è·åå°æ³è¦æ¢å¤æ°æ®ä¿¡æ¯ï¼

# æ ¹æ®æªåçæ¥å¿ä¿¡æ¯ï¼è¿è¡æ°æ®åºæå¡æ°æ®æ¢å¤
mysql&gt; set sql_log_bin=0;
-- å»ºè®®å¨è¿è¡æ°æ®æ¥å¿æ¢å¤æ°æ®æ¶ï¼å°æ°æ®æ¢å¤æ¶æ§è¡çSQLè¯­å¥ä¿¡æ¯ï¼ä¸åbinlogæ¥å¿è®°å½ï¼
mysql&gt; source /tmp/bin.sql

# æ¥çç¡®è®¤æ°æ®ä¿¡æ¯æ¯å¦æ¢å¤
mysql&gt; use bindb;
mysql&gt; show tables;
mysql&gt; select * from t1;
</code></pre>
<blockquote>
<hr>
<hr>
</blockquote>
<h3 id="æ°æ®åºæ°æ®å¼å¸¸æ¢å¤">æ°æ®åºæ°æ®å¼å¸¸æ¢å¤</h3>
<h4 id="æåµä¸æ¥å¿æä»¶è¢«æ¸çè¿å¯è½å»ºåºè¯­å¥æå¨æ¥å¿å·²ç»ä¸¢å¤±">æåµä¸ï¼æ¥å¿æä»¶è¢«æ¸çè¿ï¼å¯è½å»ºåºè¯­å¥æå¨æ¥å¿å·²ç»ä¸¢å¤±</h4>
<p>é¡¹ç®èæ¯ï¼ä¸ä¸ªæ°æ®åºä¸å¹´åå°±åå»ºäºï¼ä½æ¯æ¥å¿ä¿¡æ¯åªè®°å½ä¸ä¸ªæï¼è¿ä¸ªåºè¢«è¯¯å é¤äºï¼</p>
<p>è§£å³æ¹æ¡ï¼</p>
<p>Aè®¡åï¼æè¿ä¸æ¬¡å¨å¤+å¨å¤ä¹åï¼è¯¯å é¤ä¹åææbinlogï¼è¿è¡ä¸åæ¢å¤ï¼ï¼<code>å¨å¤æ°æ®+å¢éæ°æ®</code>ï¼</p>
<p>Bè®¡åï¼å©ç¨å»¶æ¶ä»åºï¼è¿è¡æ°æ®æ¢å¤ï¼</p>
<h4 id="æåµäºæéæ¥å¿è·¨è¶å¤ä¸ªæä»¶å¦ä½è¿è¡æ¥å¿ä¿¡æ¯çæªå">æåµäºï¼æéæ¥å¿è·¨è¶å¤ä¸ªæä»¶ï¼å¦ä½è¿è¡æ¥å¿ä¿¡æ¯çæªå</h4>
<p>è§£å³æ¹æ¡ï¼</p>
<p>Aè®¡åï¼åªæpositionå·çæ¹å¼ï¼å¯ä»¥è¿è¡åæ®µæªåï¼è¿è¡åæ®µæ¢å¤æ°æ®ï¼</p>
<p>Bè®¡åï¼æ ¹æ®Datatimeæ¶é´ä¿¡æ¯æ¹å¼ï¼å¯è½ä¼åºç°åç¡®æ§ä¸é«çæåµï¼å ä¸ºæ¯ä¸ç§å¯è½æå¤ä¸ªäºä»¶äº§çï¼ï¼</p>
<p>Cè®¡åï¼å¯ç¨GTIDï¼å¨å±äºå¡IDï¼æ¹å¼ï¼æ è®ºè·¨è¶å¤å°ä¸ªæ¥å¿æä»¶ï¼æ¯ä¸ªäºå¡æä½çäºä»¶IDä¿¡æ¯é½æ¯å¯ä¸ä¸éå¢çï¼5.6+å¼å¥ï¼ï¼</p>
<p>å®è·µæä½ï¼</p>
<p><strong>Cè®¡åï¼åºäºGTIDæ¹å¼å¯¹binlogè¿è¡ç®¡çï¼å©ç¨GTIDå®ç°æ¥å¿æªåï¼</strong></p>
<p>æ°æ®åºå¼å¸¸æ¢å¤æåµç¯å¢åå¤ï¼</p>
<pre><code class="language-sql"># å·æ°æ°çbinlogæ¥å¿è¿è¡æä½
mysql&gt; flush logs;
-- çææ°çbinlogæ¥å¿ä¿¡æ¯

# ç¡®è®¤æ°çæ¥å¿ç¼å·æ¯å¦æ¯è¿ç»­ç
mysql&gt; create database test5;
mysql&gt; show binlog events in "binlog.000004"
-- å¯ä»¥çåºæ°çbinlogæ¥å¿æä»¶ä¸­ï¼è®°å½çgtidç¼å·ä¿¡æ¯æ¯å»¶ç»­äºä¸ä¸ä¸ªbinlogæ¥å¿gtidéåä¿¡æ¯ï¼ç»§ç»­è¿ç»­è¿è¡è®°å½ï¼

# è¿è¡åºæ¬çæ°æ®åºSQLè¯­å¥æä½ï¼
mysql&gt; create database gtdb;
mysql&gt; use gtdb;
mysql&gt; create table t1(id int);
mysql&gt; insert into t1 values(1);
mysql&gt; commit;
mysql&gt; insert into t1 values(2);
mysql&gt; commit;
mysql&gt; insert into t1 values(3);
mysql&gt; commit;

# è¿è¡binlogäºä»¶ä¿¡æ¯æ¥ç
mysql&gt; show binlog events in 'binlog.000004';
-- å¯ä»¥è·åä»¥ä¸çæ°æ®æä½äºä»¶ä¿¡æ¯ï¼
</code></pre>
<p>æ°æ®åºæ¨¡æå¼å¸¸æåµç ´åæä½ï¼</p>
<pre><code class="language-sql">mysql&gt; drop database gtdb;
-- æ¨¡æç ´åæ§æä½ï¼å é¤æ°æ®åº
</code></pre>
<p>æ°æ®åºå¼å¸¸æåµæ°æ®æ¢å¤æä½ï¼</p>
<pre><code class="language-sql"># æ ¹æ®æ¥å¿ä¿¡æ¯æ¥çç¸å³çäºä»¶æåµï¼è·åGTIDç¼å·èå´ï¼
mysql&gt; show binlog events in 'binlog.000004';

# éè¦æ¢å¤å»ºåºå¼å§ï¼å é¤ä¹åçæææä½ï¼å³ææbinlogæ¥å¿ä¿¡æ¯ï¼ï¼å®ç°æ¥å¿ä¿¡æ¯çæªå
[root@cheng ~]# mysqlbinlog --include-gtids='7afe4f8c-5e36-11ed-b083-000c29d44f34:3-7' /data/3306/data/binlog.000004 &gt;/tmp/gtid.sql
-- ä¾æ®binlogæ¥å¿çGTIDä¿¡æ¯ï¼å³å¯è·åå°æ³è¦æ¢å¤æ°æ®ä¿¡æ¯ï¼

# æ ¹æ®æªåçæ¥å¿ä¿¡æ¯ï¼è¿è¡æ°æ®åºæå¡æ°æ®æ¢å¤
mysql&gt; set sql_log_bin=0;
-- å»ºè®®å¨è¿è¡æ°æ®æ¥å¿æ¢å¤æ°æ®æ¶ï¼å°æ°æ®æ¢å¤æ¶æ§è¡çSQLè¯­å¥ä¿¡æ¯ï¼ä¸åbinlogæ¥å¿è®°å½ï¼æ¢å¤åå«å¿å¨æ¹ä¸º1ï¼
mysql&gt; source /tmp/gtid.sql
-- é»è®¤æ­¤æ¶æ¥éæ¢å¤å¤±è´¥ï¼å ä¸ºGTIDæªåçæ¥å¿æ¢å¤æ°æ®æ¶ï¼å·æå¹ç­æ§ï¼ç±äºbinlogä¸­å·²ç»è®°å½äº3-7çGTIDäºä»¶ä¿¡æ¯
mysql&gt; show master status;
+---------------+----------+--------------+------------------+------------------------------------------+
| File          | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set                        |
+---------------+----------+--------------+------------------+------------------------------------------+
| binlog.000004 |     1905 |              |                  | 7afe4f8c-5e36-11ed-b083-000c29d44f34:1-8 |
+---------------+----------+--------------+------------------+------------------------------------------+
1 row in set (0.00 sec)
-- éè¿æ¥çç¡®è®¤ï¼æ ¸å®æ¸æ¥binlogä¸­å·²ç»è®°å½äº3-7çGTIDäºä»¶ä¿¡æ¯

# å©ç¨GTIDæ¥å¿ä¿¡æ¯æ¢å¤æ¥éå¤çæ¹å¼ä¸ï¼å°ç³»ç»ä¸­æ¥å¿ä¸­çGTIDä¿¡æ¯æ¸é¤æï¼ä¸å»ºè®®ï¼
# å©ç¨GTIDæ¥å¿ä¿¡æ¯æ¢å¤æ¥éå¤çæ¹å¼äºï¼å é¤ä¸å¹ç­æ§å²çªçè®°å½ä¿¡æ¯
[root@cheng ~]# mysqlbinlog --skip-gtids --include-gtids='7afe4f8c-5e36-11ed-b083-000c29d44f34:3-7' /data/3306/data/binlog.000004 &gt;/tmp/gtid.sql
-- è¡¨ç¤ºè·³è¿gtidçæ£æ¥è¿ç¨ï¼å³æªåçæ¥å¿ä¸­ä¸åå«æGTIDçéç½®è¯­å¥ä¿¡æ¯ï¼èªç¶è§£å³äºå¹ç­æ§å²çªé®é¢ï¼
-- å¼å¯äºGTIDä¹åï¼ä¾ç¶å¯ä»¥ä½¿ç¨posæ¹å¼è¿è¡æ¥å¿ä¿¡æ¯æªåä¸æ¢å¤ï¼

# æ¥çç¡®è®¤æ°æ®ä¿¡æ¯æ¯å¦æ¢å¤
mysql&gt; use gtdb;
mysql&gt; show tables;
mysql&gt; select * from t1;
-- æ¥çtest1æ°æ®åºä¸­çt1è¡¨çæ°æ®ä¿¡æ¯æ¯å¦æ¢å¤

# æä½æ©å±ï¼å¯ä»¥å®ç°æé¤æå®gtidä¿¡æ¯ä¸åæ¥å¿è®°å½æªå
[root@cheng ~]# mysqlbinlog --exclude-gtids='7afe4f8c-5e36-11ed-b083-000c29d44f34:4'  --include-gtids='7afe4f8c-5e36-11ed-b083-000c29d44f34:3-7' /data/3306/data/binlog.000004 

# æä½æ©å±ï¼è·¨å¤æ¥å¿æä»¶ä¿¡æ¯æªå
[root@cheng ~]# mysqlbinlog --skip-gtids --include-gtids='7afe4f8c-5e36-11ed-b083-000c29d44f34:1-10' /data/3306/data/binlog.000001  /data/3306/data/binlog.000002 /data/3306/data/binlog.000003 &gt;/tmp/gtid.sql
</code></pre>
<ul>
<li><strong>GTIDæ¦å¿µä»ç»ï¼</strong></li>
</ul>
<p>GTIDï¼global transation idï¼ç§°ä¸ºå¨å±äºå¡ï¼äºä»¶ï¼IDï¼æ è¯binlogæ¥å¿è®°å½çå¯ä¸æ§ï¼</p>
<p>GTIDä¿¡æ¯çè¡¨ç¤ºæ¹å¼ï¼</p>
<table>
<thead>
<tr>
<th>è¡¨ç°å½¢å¼</th>
<th>å³é®å</th>
<th>è§£éè¯´æ</th>
</tr>
</thead>
<tbody>
<tr>
<td>server_uuid:N</td>
<td>server_uuid</td>
<td>è¡¨ç¤ºæ°æ®åºåå§åå¯å¨ä¹åï¼èªå¨çæçéæºæ°ä¿¡æ¯ï¼å¯ä¸çï¼</td>
</tr>
<tr>
<td></td>
<td>N</td>
<td>è¡¨ç¤ºç¬¬å ä¸ªç¸å³çäºå¡æäºä»¶ä¿¡æ¯ï¼ä¼ä¸æ­è¿è¡èªå¢</td>
</tr>
</tbody>
</table>
<p>server_uuidä¿¡æ¯æ¥çï¼</p>
<pre><code class="language-sql">mysql&gt; select @@server_uuid;
+---------------------------------------------------+
| @@server_uuid                                     |
+---------------------------------------------------+
| 7afe4f8c-5e36-11ed-b083-000c29d44f34              |
+---------------------------------------------------+
1 row in set (0.00 sec)
-- è¡¨ç¤ºæ°æ®åºæ¯æ¬¡åå§åä¹åèªå¨çæï¼ä¸å»ºè®®æå·¥è¿è¡ä¿®æ¹ï¼

[root@cheng ~]# cat /data/3306/data/auto.cnf 
[auto]
server-uuid=7afe4f8c-5e36-11ed-b083-000c29d44f34
-- å¨æ°æ®åºçæ°æ®ç®å½æä»¶ä¸­ä¹å¯ä»¥æ¥è¯¢å°
</code></pre>
<ul>
<li><strong>GTIDåè½ä½ç¨ï¼</strong></li>
</ul>
<p>å©ç¨GTIDæ¹å¼ç®¡çbinlogï¼å®è´¨ä¸å°±æ¯å¯¹äºæ°æ®åºçæ¯ä¸ªäºå¡äº§çäºä»¶ä¿¡æ¯æä¸å¯ä¸æ è¯ä¿¡æ¯ï¼idå·ï¼ï¼</p>
<p>å©ç¨GTIDæ¹å¼ç®¡çbinlogï¼ä¸»è¦ç®çæ¯å¤çæ°æ®åºä¸»ä»é®é¢ï¼è§£å³ä¸»ä»æ°æ®åºçæ°æ®ä¸è´æ§é®é¢ï¼</p>
<p>ç®åæè¿°ï¼æ è¯äºå¡çå¯ä¸æ§ï¼ä¿è¯æ¥å¿æ¢å¤æ¶çä¸è´æ§ï¼å¹¶ä¸å·å¤âå¹ç­æ§âï¼</p>
<ul>
<li><strong>GTIDåè½éç½®ï¼</strong></li>
</ul>
<p>GTIDåè½ç¸å³åæ°ä»ç»ï¼</p>
<pre><code class="language-sql"># GTIDåè½åæ°ä¿¡æ¯ä»ç»ï¼3ä¸ªéè¦çéç½®åæ°ï¼
mysql&gt; select @@gtid_mode;
+-------------------+
| @@gtid_mode       |
+-------------------+
| OFF               |
+-------------------+
1 row in set (0.00 sec)
-- è®¾ç½®æ¯å¦å¼å¯æ¾ç¤ºgtidä¿¡æ¯åè½ï¼å¨5.7ä¹åæ¯æä¸ªå¿åçgtidï¼æ¯æ°æ®åºç³»ç»èªå·±ç»´æ¤çï¼

mysql&gt; select @@enforce_gtid_consistency;
+-------------------------------------+
| @@enforce_gtid_consistency          |
+-------------------------------------+
| OFF                                 |
+-------------------------------------+
1 row in set (0.00 sec)
-- è®¾ç½®æ¯å¦å¼å¯GTIDå¼ºå¶ä¸è´æ§åè½
-- å¯¹æäº SQL ä¼æéå¶ï¼ä¾å¦ CREATE TABLE â¦ SELECT å¿é¡»å¾åæä¸¤æ¡è¯­å¥æ§è¡ã
-- OFFï¼    è¡¨ç¤ºäºå¡åè®¸è¿å GTID ä¸è´æ§ã
-- ONï¼     è¡¨ç¤ºäºå¡ä¸åè®¸è¿å GTID ä¸è´æ§ï¼æç¸å³ SQL ä¼ç´æ¥è¿åå¼å¸¸ã
-- WARNï¼è¡¨ç¤ºäºå¡åè®¸è¿å GTID ä¸è´æ§ï¼ä½ä¼å°è­¦åä¿¡æ¯è®°å½å° ERROR LOGã

mysql&gt; select @@log_slave_updates;
+----------------------------+
| @@log_slave_updates        |
+----------------------------+
|      1                     |
+----------------------------+
1 row in set, 1 warning (0.01 sec)
-- åéç½®ä¸»ä»æå³ï¼å¨8.0.26å¼å§ æ¨èéç½®log_replica_updatesæ¿ä»£log_slave_updatesåæ°ï¼
-- æ­¤åæ°è¡¨ç¤ºä»æå¡å¨ä»ä¸»æå¡å¨æ¥æ¶çæ´æ°ä¿¡æ¯ï¼æ¯å¦ä¹ä¼è®°å½å¨ä»æå¡å¨æ¬å°çäºè¿å¶æä»¶ä¸­
</code></pre>
<p>GTIDåè½ç¸å³åæ°æ¿æ´»ï¼</p>
<pre><code class="language-sql">[root@cheng ~]# vim /etc/my.cnf
[mysqld]
gtid_mode=on
enforce_gtid_consistency=1
log_slave_updates=on
-- éç½®æä»¶ä¿¡æ¯ä¿®æ¹å®æ¯åï¼éå¯æ°æ®åºæå¡ä½¿éç½®çæ
</code></pre>
<ul>
<li><strong>GTIDä¿¡æ¯æ¥çï¼</strong></li>
</ul>
<pre><code class="language-sql">mysql&gt; show master status;
+------------------+-----------+-------------------+-----------------------+-------------------------+
| File             | Position  | Binlog_Do_DB      | Binlog_Ignore_DB      | Executed_Gtid_Set       |
+------------------+-----------+-------------------+-----------------------+-------------------------+
| binlog.000004    |    156    |                   |                       |                         |
+------------------+-----------+-------------------+-----------------------+-------------------------+
1 row in set (0.03 sec)
-- å¨GTIDåè½è¢«æ¿æ´»åï¼å°±ä¼å¨Executed_Gtid_Setåä¸­æ¾ç¤ºGTIDéåä¿¡æ¯ï¼

mysql&gt; create database test3;
Query OK, 1 row affected (0.08 sec)
-- æ¨¡æåå»ºæ°æ®åºï¼äº§çæ°çäºä»¶ä¿¡æ¯
mysql&gt; show master status;
+------------------+----------+--------------+------------------+----------------------------------------+
| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set                      |
+------------------+----------+--------------+------------------+----------------------------------------+
| binlog.000004    |      344 |              |                  | 7afe4f8c-5e36-11ed-b083-000c29d44f34:1 |
+------------------+----------+--------------+------------------+----------------------------------------+
1 row in set (0.01 sec)
-- GTIDä¿¡æ¯éçæ°çäºä»¶äº§çï¼éä¹åçåå
mysql&gt; create database test4;
Query OK, 1 row affected (0.03 sec)
-- æ¨¡æåå»ºæ°æ®åºï¼äº§çæ°çäºä»¶ä¿¡æ¯
mysql&gt; show master status;
+---------------+----------+--------------+------------------+------------------------------------------+
| File          | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set                        |
+---------------+----------+--------------+------------------+------------------------------------------+
| binlog.000004 |      532 |              |                  | 7afe4f8c-5e36-11ed-b083-000c29d44f34:1-2 |
+---------------+----------+--------------+------------------+------------------------------------------+
1 row in set (0.00 sec)
-- GTIDä¿¡æ¯éçæ°çäºä»¶äº§çï¼éä¹åçåå

mysql&gt; show binlog events in 'binlog.000004';
+---------------+-----+----------------+-----------+-------------+-------------------------------------------------------------------+
| Log_name      | Pos | Event_type     | Server_id | End_log_pos | Info                                                              |
+---------------+-----+----------------+-----------+-------------+-------------------------------------------------------------------+
| binlog.000004 |   4 | Format_desc    |         1 |         125 | Server ver: 8.0.26, Binlog ver: 4                                 |
| binlog.000004 | 125 | Previous_gtids |         1 |         156 |                                                                   |
| binlog.000004 | 156 | Gtid           |         1 |         233 | SET @@SESSION.GTID_NEXT= '7afe4f8c-5e36-11ed-b083-000c29d44f34:1' |
| binlog.000004 | 233 | Query          |         1 |         344 | create database test3 /* xid=6 */                                 |
| binlog.000004 | 344 | Gtid           |         1 |         421 | SET @@SESSION.GTID_NEXT= '7afe4f8c-5e36-11ed-b083-000c29d44f34:2' |
| binlog.000004 | 421 | Query          |         1 |         532 | create database test4 /* xid=8 */                                 |
+---------------+-----+----------------+-----------+-------------+-------------------------------------------------------------------+
6 rows in set (0.00 sec)
-- å¨æ¯ä¸ªæ°æ®åºæä½äºä»¶ä¹åï¼ä¼æ¾ç¤ºGTIDçå¯ä¸æ è¯ä¿¡æ¯
</code></pre>
<h4 id="æåµä¸å¦ä½ä»æ¥å¿æä»¶ä¸­æ¢å¤ååºåè¡¨æèé¨åè¡æ°æ®ä¿¡æ¯">æåµä¸ï¼å¦ä½ä»æ¥å¿æä»¶ä¸­æ¢å¤ååºãåè¡¨ãæèé¨åè¡æ°æ®ä¿¡æ¯</h4>
<p>è§£å³æ¹æ¡ï¼</p>
<p>Aè®¡åï¼å¯ä»¥å©ç¨å½ä»¤åç¬æªåæä¸ªæ°æ®åºçæ¥å¿ä¿¡æ¯ï¼<code>mysqlbinlog -d world  xxx &gt; xxxx</code></p>
<p>Bè®¡åï¼å¯ä»¥åå©ç¬¬ä¸æ¹å·¥å·å®ç°åè¡¨æé¨åæ°æ®æ¢å¤ï¼<code>binlog2sqlï¼pythonï¼</code> è¿æ»¤æå®è¡¨æ°æ®æè¿æ»¤æå®è¡¨çé¨åæ°æ®ï¼</p>
<p>å®ææä½ï¼</p>
<p><strong>Aè®¡åï¼ååºæ¥å¿ä¿¡æ¯æªåï¼ä¼ä¸å®æè¿ç¨</strong>ï¼</p>
<p>æ°æ®åºå¼å¸¸æ¢å¤æåµç¯å¢åå¤ï¼</p>
<pre><code class="language-sql"># æ¥çè·åå½åbinlogæ¥å¿ç¶æä¿¡æ¯
mysql &gt; show master status;
+------------------+-----------+-------------------+-----------------------+-------------------------+
| File             | Position  | Binlog_Do_DB      | Binlog_Ignore_DB      | Executed_Gtid_Set       |
+------------------+-----------+-------------------+-----------------------+-------------------------+
| binlog.000003    |      1269 |                   |                       |                         |
+------------------+-----------+-------------------+-----------------------+-------------------------+

# è¿è¡åºæ¬çæ°æ®åºSQLè¯­å¥æä½ï¼
mysql&gt; create database test1;
mysql&gt; create table t1 (id int);
mysql&gt; insert into t1 values(1);
mysql&gt; insert into t1 values(2);
mysql&gt; commit;
mysql&gt; select * from t1;
+------+
| id     |
+------+
|      1 |
|      2 |
+------+
2 rows in set (0.00 sec)
-- åå»ºäºä¸ä¸ªtest1æ°æ®åºï¼å¹¶å¨æ°æ®åºä¸­åå»ºäºä¸ä¸ªè¡¨ï¼å¨è¡¨ä¸­æå¥äºä¸äºæ°æ®ä¿¡æ¯
mysql&gt; create database test2;
mysql&gt; use test2;
mysql&gt; create table t2 (id int);
mysql&gt; insert into t2 values(1);
mysql&gt; insert into t2 values(2);
mysql&gt; commit;
-- åå»ºäºä¸ä¸ªtest2æ°æ®åºï¼å¹¶å¨æ°æ®åºä¸­åå»ºäºä¸ä¸ªè¡¨ï¼å¨è¡¨ä¸­æå¥äºä¸äºæ°æ®ä¿¡æ¯
mysql&gt; use test1;
mysql&gt; insert into t1 values(3);
mysql&gt; insert into t1 values(4);
mysql&gt; use test2;
mysql&gt; insert into t2 values(3);
mysql&gt; insert into t2 values(4);
mysql&gt; commit;
mysql&gt; select * from test1.t1;
mysql&gt; select * from test2.t2;
-- éè¿æä½ä¸åçæ°æ®åºï¼ä»¥åä¸åçæ°æ®è¡¨ï¼å®ç°binlogæ¥å¿äºä»¶ä¿¡æ¯çäº¤å
</code></pre>
<p>æ°æ®åºæ¨¡æå¼å¸¸æåµç ´åæä½ï¼</p>
<pre><code class="language-sql">mysql&gt; drop database test1;
-- æ¨¡æç ´åæ§æä½ï¼å é¤æ°æ®åº
</code></pre>
<p>æ°æ®åºå¼å¸¸æåµæ°æ®æ¢å¤æä½ï¼</p>
<pre><code class="language-sql"># æ ¹æ®æ¥å¿ä¿¡æ¯æ¥çç¸å³çäºä»¶æåµ
mysql&gt; show binlog events in 'binlog.000003';

# éè¦æ¢å¤å»ºåºå¼å§ï¼å é¤ä¹åçæææä½ï¼å³ææbinlogæ¥å¿ä¿¡æ¯ï¼ï¼å®ç°æ¥å¿ä¿¡æ¯çæªå
[root@cheng ~]# mysqlbinlog --start-position=1346 --stop-position=4116 -d test1 /data/3306/data/binlog.000003 &gt;/tmp/bin.sql
-- ä¾æ®binlogæ¥å¿çpositionå·ç ï¼å³å¯è·åå°æ³è¦æ¢å¤æ°æ®ä¿¡æ¯ï¼å¹¶å©ç¨-dåæ°å¯¼åºæå®æ°æ®åºç¸å³æ°æ®ï¼

# æ ¹æ®æªåçæ¥å¿ä¿¡æ¯ï¼è¿è¡æ°æ®åºæå¡æ°æ®æ¢å¤
mysql&gt; set sql_log_bin=0;
-- å»ºè®®å¨è¿è¡æ°æ®æ¥å¿æ¢å¤æ°æ®æ¶ï¼å°æ°æ®æ¢å¤æ¶æ§è¡çSQLè¯­å¥ä¿¡æ¯ï¼ä¸åbinlogæ¥å¿è®°å½ï¼æ¢å¤åå«å¿å¨æ¹ä¸º1ï¼
mysql&gt; source /tmp/bin.sql

# æ¥çç¡®è®¤æ°æ®ä¿¡æ¯æ¯å¦æ¢å¤
mysql&gt; use test1;
mysql&gt; show tables;
mysql&gt; select * from t1;
-- æ¥çtest1æ°æ®åºä¸­çt1è¡¨çæ°æ®ä¿¡æ¯æ¯å¦æ¢å¤
mysql&gt; use test2;
mysql&gt; show tables;
mysql&gt; select * from t2;
-- æ¥çtest2æ°æ®åºä¸­çt2è¡¨çæ°æ®ä¿¡æ¯æ¯å¦ç ´å
</code></pre>
<p><strong>Bè®¡åï¼å¯ä»¥åå©ç¬¬ä¸æ¹å·¥å·å®ç°åè¡¨æé¨åæ°æ®æ¢å¤ï¼</strong></p>
<p>å©ç¨binlog2sqlå·¥å·å¯ä»¥å¤çä¸é¢çä¼ä¸éæ±ï¼æ­¤è½¯ä»¶æ¯å©ç¨pythonè¯­è¨å¼åçï¼ä¸»è¦ç¨æ¥å¤çbinlogæ¥å¿ä¿¡æ¯ï¼</p>
<p>ä»è½¯ä»¶åºç¨æ¹é¢æ¥è¯´ä¸»è¦åå«ä¸¤ä¸ªæ ¸å¿åè½ï¼</p>
<ul>
<li>å¯ä»¥åå¥½çå±ç¤ºæèç®¡çäºè¿å¶æ¥å¿ä¿¡æ¯ï¼binlogï¼ï¼è¿èå¯ä»¥è¿æ»¤åºåç¬è¡¨çä¿¡æ¯ï¼çè³è¡¨ä¸­æå®è¡çä¿¡æ¯ï¼</li>
<li>å¯ä»¥å¿«éçå®ç°DMLæä½è¯­å¥çéªååè½ï¼å³å®ç°éè¿æ¥å¿ä¿¡æ¯ç¿»è½¬æ¹å¼ï¼è¿è¡æ°æ®ä¿¡æ¯çæ¢å¤ï¼</li>
</ul>
<blockquote>
<p>è¯´æï¼binlog2sqlå·¥å·æ¯æ¨¡æäºä¸ä¸ªä»åºï¼è¿è¡æ¥å¿ä¿¡æ¯åæï¼éè¦ä¿è¯æ°æ®åºæå¡å¯å¨ç¶æï¼ä¸ä¸æ¯æç¦»çº¿æ¹å¼åææ¥å¿åå®¹ï¼</p>
</blockquote>
<p>æ°æ®åºå¼å¸¸æ¢å¤æåµç¯å¢åå¤ï¼</p>
<pre><code class="language-sql"># ä¸è½½ç¬¬ä¸æ¹æ¥å¿åæå·¥å·
[root@cheng ~]# cd /opt/
[root@cheng ~]# git clone https://github.com/danfengcao/binlog2sql.git
[root@cheng ~]# cd /opt/binlog2sql
-- æ­¤å·¥å·å¨mariadbä¸­å¯ä»¥éè¿æè¡¥ä¸æ¹å¼ï¼è¿è¡é¨ç½²å®è£ï¼ä½æ¯å¨mysql 8.0ä¸­ææ¶è¿æ²¡æéæï¼éè¦åç¬å®è£

# é¨ç½²ç¬¬ä¸æ¹å·¥å·è¿è¡ç¯å¢
[root@cheng ~]# yum install -y python3
[root@cheng ~]# pip3 install -r requirments.txt
[root@cheng ~]# pip3 show pymysql
[root@cheng ~]# pip3 install --upgrade pymysql    ï¼æ­¤æ­¥éª¤å¯ä»¥å¿½ç¥ï¼
-- ä»¥ä¸pip3ä¸è½½è½¯ä»¶ç¼æ¢ï¼å¯ä»¥ä¼åpip3ä¸è½½æº
-- ä¸è½½æºä¼åæ¹æ³ï¼https://developer.aliyun.com/mirror/pypi?spm=a2c6h.13651102.0.0.3e221b11H9Q7La

# å¨æå®æ°æ®åºä¸­åå»ºå¤ä¸ªæ°æ®è¡¨
mysql&gt; use test1;
mysql&gt; create table t11 (id int);
mysql&gt; insert into t11 values (1),(2);
mysql&gt; commit;
</code></pre>
<p>æ°æ®åºæ¥å¿ä¿¡æ¯å·¥å·åææ¥çï¼ï¼è§£ææ¥å¿äºä»¶SQLï¼</p>
<pre><code class="language-sql">[root@cheng binlog2sql]# python3 binlog2sql.py -h 10.0.0.101 -P3306 -uroot -p123456 -d test1 -t t1 --start-file='binlog.000003'
INSERT INTO `test1`.`t1`(`id`) VALUES (1); #start 1460 end 1704 time 2022-11-21 22:16:32 gtid 
INSERT INTO `test1`.`t1`(`id`) VALUES (2); #start 1735 end 1979 time 2022-11-21 22:16:35 gtid 
INSERT INTO `test1`.`t1`(`id`) VALUES (3); #start 2939 end 3183 time 2022-11-21 22:20:53 gtid 
INSERT INTO `test1`.`t1`(`id`) VALUES (4); #start 3214 end 3458 time 2022-11-21 22:22:19 gtid
[root@cheng binlog2sql-master]# python3 binlog2sql.py -h 10.0.0.101 -P3306 -uroot -p123456 -d test1 -t t11 --start-file='binlog.000003'
INSERT INTO `test1`.`t11`(`id`) VALUES (1); #start 4704 end 4954 time 2022-11-21 23:47:51 gtid 
INSERT INTO `test1`.`t11`(`id`) VALUES (2); #start 4704 end 4954 time 2022-11-21 23:47:51 gtid 
-- è¡¨çæ°æ®ä¿¡æ¯å¯¼åºåï¼å¯ä»¥ç´æ¥å¤å¶å½ä»¤ä¿¡æ¯æ¢å¤ï¼æèå¯¼åºsqlæä»¶è¿è¡å¯¼å¥æ¢å¤ï¼
</code></pre>
<p>æ°æ®åºæ¨¡æå¼å¸¸æåµç ´åæä½ï¼</p>
<pre><code class="language-sql"># å¨æå®æ°æ®åºçç¸åºæ°æ®è¡¨ä¸­åä¿®æ¹æä½
mysql&gt; use test1;
mysql&gt; update t1 set id=10 where id=1;
mysql&gt; commit;

# å¨æå®æ°æ®åºçç¸åºæ°æ®è¡¨ä¸­åå é¤æä½
mysql&gt; use test1;
mysql&gt; delete from t1 where id=3;
mysql&gt; commit;
</code></pre>
<p>æ°æ®åºæ¥å¿ä¿¡æ¯å·¥å·åææ¥çï¼ï¼è§£ææ¥å¿äºä»¶SQLï¼</p>
<pre><code class="language-sql">[root@cheng binlog2sql-master]# python3 binlog2sql.py -h 10.0.0.101 -P3306 -uroot -p123456 -d test1 -t t1 --start-file='binlog.000003'
INSERT INTO `test1`.`t1`(`id`) VALUES (1); #start 1460 end 1704 time 2022-11-21 22:16:32 gtid 
INSERT INTO `test1`.`t1`(`id`) VALUES (2); #start 1735 end 1979 time 2022-11-21 22:16:35 gtid 
INSERT INTO `test1`.`t1`(`id`) VALUES (3); #start 2939 end 3183 time 2022-11-21 22:20:53 gtid 
INSERT INTO `test1`.`t1`(`id`) VALUES (4); #start 3214 end 3458 time 2022-11-21 22:22:19 gtid 
UPDATE `test1`.`t1` SET `id`=10 WHERE `id`=1 LIMIT 1; #start 4985 end 5244 time 2022-11-21 23:52:33 gtid 
DELETE FROM `test1`.`t1` WHERE `id`=3 LIMIT 1; #start 5275 end 5519 time 2022-11-21 23:54:17 gtid 

# åªæ³æ¥çå é¤æä½ä¿¡æ¯
[root@cheng binlog2sql-master]# python3 binlog2sql.py -h 10.0.0.101 -P3306 -uroot -p123456 -d test1 -t t1 --sql-type=delete --start-file='binlog.000003'
DELETE FROM `test1`.`t1` WHERE `id`=3 LIMIT 1; #start 5275 end 5519 time 2022-11-21 23:54:17 gtid
-- sql-typeåæ°åªè½è¿æ»¤DMLç±»åè¯­å¥ä¿¡æ¯ï¼ä¸è¬å¸¸è§è¿æ»¤çæ¯ insert update delete

# åªæ³æ¥çä¿®æ¹æä½ä¿¡æ¯
[root@cheng binlog2sql-master]# python3 binlog2sql.py -h 10.0.0.101 -P3306 -uroot -p123456 -d test1 -t t1 --sql-type=update --start-file='binlog.000003'
UPDATE `test1`.`t1` SET `id`=10 WHERE `id`=1 LIMIT 1; #start 4985 end 5244 time 2022-11-21 23:52:33 gtid

# åªæ³æ¥çæå¥æä½ä¿¡æ¯
[root@cheng binlog2sql-master]# python3 binlog2sql.py -h 10.0.0.101 -P3306 -uroot -p123456 -d test1 -t t1 --sql-type=insert --start-file='binlog.000003'
INSERT INTO `test1`.`t1`(`id`) VALUES (1); #start 1460 end 1704 time 2022-11-21 22:16:32 gtid 
INSERT INTO `test1`.`t1`(`id`) VALUES (2); #start 1735 end 1979 time 2022-11-21 22:16:35 gtid 
INSERT INTO `test1`.`t1`(`id`) VALUES (3); #start 2939 end 3183 time 2022-11-21 22:20:53 gtid 
INSERT INTO `test1`.`t1`(`id`) VALUES (4); #start 3214 end 3458 time 2022-11-21 22:22:19 gtid
</code></pre>
<p>æ°æ®åºæ¥å¿ä¿¡æ¯å·¥å·åæ»æä½ï¼ï¼çææå®äºä»¶åæ»è¯­å¥-éªåæä½ï¼</p>
<p>åè®¾å¨æä¸ªä¼ä¸çåºç¨åºæ¯ä¸­ï¼æ3000ä¸è¡æ°æ®ï¼å ç¨200Gçå­å¨ç©ºé´ï¼å¶ä¸­è¯¯å é¤äº10è¡æ°æ®ä¿¡æ¯ï¼è¯·é®å¦ä½è¿è¡æ¢å¤æ°æ®ï¼</p>
<pre><code class="language-sql"># è¯¯å é¤æä½è¯­å¥åè½¬æä½
[root@cheng binlog2sql-master]# python3 binlog2sql.py -h 10.0.0.101 -P3306 -uroot -p123456 -d test1 -t t1 --sql-type=delete --start-file='binlog.000003'
DELETE FROM `test1`.`t1` WHERE `id`=3 LIMIT 1; #start 5275 end 5519 time 2022-11-21 23:54:17 gtid
-- è·åå é¤æä½è¯­å¥ä¿¡æ¯

[root@cheng binlog2sql-master]# python3 binlog2sql.py -h 10.0.0.101 -P3306 -uroot -p123456 -d test1 -t t1 --sql-type=delete --start-file='binlog.000003' -B
INSERT INTO `test1`.`t1`(`id`) VALUES (3); #start 5275 end 5519 time 2022-11-21 23:54:17 gtid
-- å¨è·åå é¤æä½è¯­å¥å½ä»¤åå  -B åæ°ï¼æ­£å¥½è·å¾äºåè½¬è¯­å¥çæä½ä¿¡æ¯

# è¯¯ä¿®æ¹æä½è¯­å¥åè½¬æä½
[root@cheng binlog2sql-master]# python3 binlog2sql.py -h 10.0.0.101 -P3306 -uroot -p123456 -d test1 -t t1 --sql-type=update --start-file='binlog.000003'
UPDATE `test1`.`t1` SET `id`=10 WHERE `id`=1 LIMIT 1; #start 4985 end 5244 time 2022-11-21 23:52:33 gtid 
-- è·åä¿®æ¹æä½è¯­å¥ä¿¡æ¯

[root@cheng binlog2sql-master]# python3 binlog2sql.py -h 10.0.0.101 -P3306 -uroot -p123456 -d test1 -t t1 --sql-type=update --start-file='binlog.000003' -B
UPDATE `test1`.`t1` SET `id`=1 WHERE `id`=10 LIMIT 1; #start 4985 end 5244 time 2022-11-21 23:52:33 gtid
-- å¨è·åä¿®æ¹æä½è¯­å¥å½ä»¤åå  -B åæ°ï¼æ­£å¥½è·å¾äºåè½¬è¯­å¥çæä½ä¿¡æ¯

# è¯¯æå¥æä½è¯­å¥åè½¬æä½
[root@cheng binlog2sql-master]# python3 binlog2sql.py -h 10.0.0.101 -P3306 -uroot -p123456 -d test1 -t t1 --sql-type=insert --start-file='binlog.000003'
INSERT INTO `test1`.`t1`(`id`) VALUES (1); #start 1460 end 1704 time 2022-11-21 22:16:32 gtid 
INSERT INTO `test1`.`t1`(`id`) VALUES (2); #start 1735 end 1979 time 2022-11-21 22:16:35 gtid 
INSERT INTO `test1`.`t1`(`id`) VALUES (3); #start 2939 end 3183 time 2022-11-21 22:20:53 gtid 
INSERT INTO `test1`.`t1`(`id`) VALUES (4); #start 3214 end 3458 time 2022-11-21 22:22:19 gtid 
-- è·åæå¥æä½è¯­å¥ä¿¡æ¯

[root@cheng binlog2sql-master]# python3 binlog2sql.py -h 10.0.0.101 -P3306 -uroot -p123456 -d test1 -t t1 --sql-type=insert --start-file='binlog.000003' -B
DELETE FROM `test1`.`t1` WHERE `id`=4 LIMIT 1; #start 3214 end 3458 time 2022-11-21 22:22:19 gtid
DELETE FROM `test1`.`t1` WHERE `id`=3 LIMIT 1; #start 2939 end 3183 time 2022-11-21 22:20:53 gtid
DELETE FROM `test1`.`t1` WHERE `id`=2 LIMIT 1; #start 1735 end 1979 time 2022-11-21 22:16:35 gtid
DELETE FROM `test1`.`t1` WHERE `id`=1 LIMIT 1; #start 1460 end 1704 time 2022-11-21 22:16:32 gtid
-- å¨è·åæå¥æä½è¯­å¥å½ä»¤åå  -B åæ°ï¼æ­£å¥½è·å¾äºåè½¬è¯­å¥çæä½ä¿¡æ¯
</code></pre>

</div>
<div id="MySignature" role="contentinfo">
    <!-- çæä¿æ¤ 
<div style="color: red; font-weight: bold; font-size: 15px;">
æ´å¤ææ°æç« ï¼<a href="https://juejin.cn/user/1383642897854980/posts">ãä¼ éé¨ã</a><br>
</div>
<br>
<div style="text-align:center;background-color:font-size: 24px; ">
-->
<div style="color: red; text-align: center; font-weight: bold; font-size: 15px;">
**********   å¦ææ¨è®¤ä¸ºè¿ç¯æç« è¿ä¸éæèæææ¶è·ï¼è¯·ç¹å»å³ä¸è§çãæ¨èã/ãèµå©ãæé®ï¼å ä¸ºæ¨çæ¯ææ¯æç»§ç»­åä½åäº«çæå¤§å¨åï¼   **********
</div>
<br>

<div style="background:LightBlue; color:#0; font-size: 15px;">
            ä½èï¼<a href="https://www.cnblogs.com/zhangwencheng">è®²æå¼ å­</a><br>
            åºå¤ï¼<a href="https://www.cnblogs.com/zhangwencheng">https://www.cnblogs.com/zhangwencheng</a><br>
            çæï¼æ¬æçæå½ä½èååå®¢å­å±æï¼æ¬¢è¿è½¬è½½ï¼ä½æªç»ä½èåæå¿é¡»ä¿çæ­¤æ®µå£°æï¼ä¸å¨æç« é¡µé¢ææ¾ä½ç½®ç»åº
             <a href="#" onclick="Curgo()" style="background:#b6ff00; color:#0; font-size:medium;">åæé¾æ¥</a>
    
</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-25 10:24">2025-12-25 10:24</span>&nbsp;
<a href="https://www.cnblogs.com/zhangwencheng">è®²æå¼ å­</a>&nbsp;
éè¯»(<span id="post_view_count">12</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19388036);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19388036', targetLink: 'https://www.cnblogs.com/zhangwencheng/p/19388036', title: 'MySQL æ°æ®åºæ¥å¿æ»ç»(ä¸)' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ éè¿ C# ä¸º PDF ææ¡£æ·»å çµå­ç­¾å ]]></title>
    <link>https://www.cnblogs.com/jazz-z/p/19396484</link>
    <guid>d8203d88f8baa6a8edc63f1671894d60</guid>
    <description>
    <![CDATA[ 
            <div class="postcontent">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>çµå­ç­¾åå¨ææ¡£åè§æ§ä¸å®å¨æ§ä¿éä¸­æ®æ¼çéè¦è§è²ï¼åºäº C# å¼å PDF çµå­ç­¾ååè½æ¯ä¼ä¸çº§ææ¡£å¤çåºæ¯çå¸¸è§éæ±ãSpire.PDF for .NET ä½ä¸ºå½äº§ PDF å¤çç±»åºï¼æ éä¾èµ Adobe Acrobat ç­ç¬¬ä¸æ¹è½¯ä»¶ï¼å³å¯ä¾¿æ·å®ç° PDF çµå­ç­¾åæ·»å ãæ¬æå°ä»ç»è¯¥ç±»åºçä½¿ç¨æ¹å¼ãPDF çµå­ç­¾åçå®ç°æµç¨ãè§£æå³é®ä»£ç åæ°ç­ã</p>
<h2 id="ä¸åç½®åå¤">ä¸ãåç½®åå¤</h2>
<h3 id="1-å®è£-net-åº">1. å®è£ .NET åº</h3>
<p>éè¿ NuGet åç®¡çå¨å¿«éå®è£ï¼</p>
<pre><code class="language-powershell">Install-Package Spire.PDF
</code></pre>
<h3 id="2-æ ¸å¿ä¾èµè¯´æ">2. æ ¸å¿ä¾èµè¯´æ</h3>
<p>å®ç°çµå­ç­¾åéä¾èµ <code>.pfx</code> æ ¼å¼çæ°å­è¯ä¹¦ï¼åå«ç§é¥ï¼ï¼</p>
<ul>
<li>æµè¯åºæ¯ï¼å¯éè¿ OpenSSLãWindows è¯ä¹¦ç®¡çå¨çæèªç­¾åè¯ä¹¦ï¼</li>
<li>çäº§åºæ¯ï¼éä½¿ç¨ CA æºæé¢åçåè§è¯ä¹¦ï¼ç¬¦åãçµå­ç­¾åæ³ãè¦æ±ï¼ï¼</li>
<li>è¯ä¹¦å è½½ï¼éè¿ <code>System.Security.Cryptography.X509Certificates.X509Certificate2</code> ç±»è§£æ .pfx æä»¶ï¼æ¯æ¬æ¬¡å®ç°çæ ¸å¿ä¾èµã</li>
</ul>
<h2 id="äºæ ¸å¿å®ç°é»è¾">äºãæ ¸å¿å®ç°é»è¾</h2>
<p><code>PdfOrdinarySignatureMaker</code> æ¯ Spire.PDF ä¸­é¢åæ®éçµå­ç­¾åçæ ¸å¿ç±»ï¼å¶æ ¸å¿æµç¨ä¸ºï¼<br>
å è½½ PDF ææ¡£ â è§£æ X.509 è¯ä¹¦â åå§åç­¾åå¨ â æ§è¡ç­¾å â ä¿å­ææ¡£ã</p>
<p>ä»¥ä¸åºäºè¯¥ç±»å®ç°åºç¡ç­¾ååè½ï¼å¹¶æ©å±æ·»å å¯è§ç­¾åç­è¿é¶ç¤ºä¾ã</p>
<h3 id="1-åºç¡çæ·»å åºç¡çµå­ç­¾åé»è®¤ä¸å¯è§">1. åºç¡çï¼æ·»å åºç¡çµå­ç­¾åï¼é»è®¤ä¸å¯è§ï¼</h3>
<p>éç¨äºä»ééªç­¾ãæ éè§è§æ è¯çåºæ¯ï¼æ ¸å¿ä»£ç éå¸¦è¯¦ç»æ³¨éï¼</p>
<pre><code class="language-csharp">using Spire.Pdf;
using Spire.Pdf.Interactive.DigitalSignatures;
using System;
using System.Security.Cryptography.X509Certificates;

namespace PdfDigitalSignature
{
    class BasicSignatureDemo
    {
        static void Main(string[] args)
        {
            try
            {
                // 1. å è½½å¾ç­¾åç PDF ææ¡£
                using (PdfDocument pdfDoc = new PdfDocument())
                {
                    pdfDoc.LoadFromFile("Input.pdf"); // æ¿æ¢ä¸ºå®éæä»¶è·¯å¾

                    // 2. å è½½æ°å­è¯ä¹¦ï¼æå®å¯é¥å­å¨ç­ç¥ï¼ééæå¡å¨/å®¢æ·ç«¯ç¯å¢ï¼
                    string certPath = "certificate.pfx"; // æ¿æ¢ä¸ºè¯ä¹¦å®éè·¯å¾
                    string certPassword = "abc123"; // æ¿æ¢ä¸ºè¯ä¹¦å¯ç 
                    X509Certificate2 cert = new X509Certificate2(
                        certPath,
                        certPassword,
                        // å³é®æ å¿ï¼ééæå¡å¨ç¯å¢+é¿åå¯é¥æä¹åï¼æåå®å¨æ§
                        X509KeyStorageFlags.MachineKeySet | X509KeyStorageFlags.EphemeralKeySet
                    );

                    // 3. åå§åç­¾åå¨å¹¶æ§è¡ç­¾å
                    PdfOrdinarySignatureMaker signMaker = new PdfOrdinarySignatureMaker(pdfDoc, cert);
                    // ç­¾ååç§°ï¼ç¨äºåç»­è¯å«/éªè¯ç­¾åï¼å»ºè®®å¯ä¸
                    signMaker.MakeSignature("Basic_Signature_001");

                    // 4. ä¿å­ç­¾ååçææ¡£
                    pdfDoc.SaveToFile("Signed_Basic.pdf");
                    Console.WriteLine("ä¸å¯è§ç­¾åæ·»å æåï¼");
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine($"ç­¾åå¤±è´¥ï¼{ex.Message}");
                // è¿é¶ï¼è®°å½å¼å¸¸è¯¦æï¼å¦å æ ï¼ä¾¿äºææ¥
                Console.WriteLine($"å¼å¸¸è¯¦æï¼{ex.StackTrace}");
            }
        }
    }
}
</code></pre>
<h3 id="2-è¿é¶çæ·»å å¯è§ç­¾å">2. è¿é¶çï¼æ·»å å¯è§ç­¾å</h3>
<p>å¨åºç¡ç­¾åä¸æ©å±è§è§æ è¯ï¼å«ç­¾åå¾çãææ¬ä¿¡æ¯ï¼ï¼éç¨äºéè¦ç´è§å±ç¤ºç­¾åçåºæ¯ï¼</p>
<pre><code class="language-csharp">using Spire.Pdf;
using Spire.Pdf.Interactive.DigitalSignatures;
using System;
using System.Drawing;
using System.Security.Cryptography.X509Certificates;

namespace PdfDigitalSignature
{
    class AdvancedSignatureDemo
    {
        static void Main(string[] args)
        {
            try
            {
                // 1. å è½½ PDF ææ¡£ï¼using èªå¨éæ¾èµæºï¼
                using (PdfDocument pdfDoc = new PdfDocument())
                {
                    pdfDoc.LoadFromFile("Input.pdf");

                    // 2. å è½½æ°å­è¯ä¹¦
                    string certPath = "certificate.pfx";
                    string certPassword = "abc123";
                    X509Certificate2 cert = new X509Certificate2(
                        certPath,
                        certPassword,
                        X509KeyStorageFlags.MachineKeySet | X509KeyStorageFlags.EphemeralKeySet
                    );

                    // 3. åå§åç­¾åå¨
                    PdfOrdinarySignatureMaker signMaker = new PdfOrdinarySignatureMaker(pdfDoc, cert);
                    PdfSignature signature = signMaker.Signature;

                    // 4. éç½®ç­¾ååä¿¡æ¯ï¼å°æ¾ç¤ºå¨ç­¾åå¤è§ä¸­ï¼
                    signature.Name = "XXç§ææéå¬å¸";       // ç­¾åèåç§°
                    signature.ContactInfo = "010-12345678"; // èç³»ä¿¡æ¯
                    signature.Location = "ä¸­å½Â·åäº¬";        // ç­¾åå°ç¹
                    signature.Reason = "ç¡®è®¤ææ¡£åå®¹åè§ææ";// ç­¾ååå 

                    // 5. éç½®ç­¾åå¯è§åå¤è§
                    PdfSignatureAppearance appearance = new PdfSignatureAppearance(signature);
                    // èªå®ä¹æ ç­¾ææ¬
                    appearance.NameLabel = "ç­¾åä¸»ä½ï¼";
                    appearance.ContactInfoLabel = "èç³»çµè¯ï¼";
                    appearance.LocationLabel = "ç­¾ç½²å°ç¹ï¼";
                    appearance.ReasonLabel = "ç­¾ç½²åå ï¼";
                    // æ·»å ç­¾åå¾çï¼æ¯æ PNG/JPG ç­æ ¼å¼ï¼
                    PdfImage signImage = PdfImage.FromFile("signature.png"); // æ¿æ¢ä¸ºç­¾åå¾çè·¯å¾
                    appearance.SignatureImage = signImage;
                    // å¸å±æ¨¡å¼ï¼å¾ç + ææ¬ï¼å¯éï¼SignImageOnly/ä»å¾çï¼SignDetailOnly/ä»ææ¬ï¼
                    appearance.GraphicMode = GraphicMode.SignImageAndSignDetail;

                    // 6. ç»å®å¤è§å¹¶æ·»å å°æå®ä½ç½®
                    signMaker.SignatureAppearance = appearance;
                    // è·åç®æ é¡µé¢ï¼ç¤ºä¾ï¼æåä¸é¡µï¼
                    PdfPageBase targetPage = pdfDoc.Pages[pdfDoc.Pages.Count - 1];
                    // MakeSignature åæ°è¯´æï¼ç­¾ååç§°ãç®æ é¡µé¢ãXåæ ãYåæ ãå®½åº¦ãé«åº¦ãå¤è§
                    signMaker.MakeSignature("Advanced_Signature_001", targetPage, 
                        54.0f, 330.0f, 280.0f, 90.0f, appearance);

                    // 7. ä¿å­ææ¡£
                    pdfDoc.SaveToFile("Signed_Advanced.pdf");
                    Console.WriteLine("å¯è§åç­¾åæ·»å æåï¼");
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine($"ç­¾åå¤±è´¥ï¼{ex.Message}");
                Console.WriteLine($"å¼å¸¸è¯¦æï¼{ex.StackTrace}");
            }
        }
    }
}
</code></pre>
<h2 id="ä¸å³é®åæ°ä¸ç±»è¯´æ">ä¸ãå³é®åæ°ä¸ç±»è¯´æ</h2>
<ul>
<li><code>PdfOrdinarySignatureMaker</code>ï¼æ ¸å¿ç­¾åå¨ç±»ï¼å³èPDFææ¡£ä¸ X.509 è¯ä¹¦ï¼æ§è¡ç­¾åæä½ã</li>
<li><code>X509Certificate2</code>ï¼å è½½ .pfx æ ¼å¼æ°å­è¯ä¹¦ï¼è§£æç§é¥ä¸å¬é¥ã</li>
<li><code>X509KeyStorageFlags</code>ï¼å¯é¥å­å¨æ å¿ï¼æ§å¶è¯ä¹¦å è½½çå­å¨åºä¸å¯é¥çå½å¨æ
<ul>
<li><code>MachineKeySet</code> ééæå¡å¨ç¯å¢</li>
<li><code>EphemeralKeySet</code> æåå®å¨æ§</li>
</ul>
</li>
<li><code>PdfSignatureAppearance</code>ï¼éç½®å¯è§ç­¾åçå¤è§ï¼åæ¬ç­¾åæ¡ä½ç½®ãææ¬ä¿¡æ¯ç­ã</li>
<li><code>GraphicMode</code>ï¼å¯è§ç­¾åå¸å±æ ·å¼ (åæ°: <code>SignImageOnly</code> (ä»å¾ç), <code>SignDetailOnly</code> ï¼ä»ææ¬ï¼, <code>SignImageAndSignDetail</code> ï¼å¾ç+ææ¬ï¼)</li>
<li><code>MakeSignature</code>ï¼æ§è¡ç­¾åæ¹æ³ã</li>
</ul>
<h2 id="åæ³¨æäºé¡¹">åãæ³¨æäºé¡¹</h2>
<ol>
<li>è¯ä¹¦å®å¨ï¼.pfx è¯ä¹¦åå«ç§é¥ï¼éå å¯å­å¨ï¼é¿åç¡¬ç¼ç å¯ç ï¼å»ºè®®éè¿éç½®æä»¶/å¯é¥ç®¡çæå¡ç®¡çï¼</li>
<li>æéééï¼æå¡å¨ç¯å¢ä¸å è½½è¯ä¹¦éèµäºåºç¨ç¨åºè¶³å¤çå¯é¥è®¿é®æéï¼é¿å <code>CryptographicException</code> ï¼</li>
<li>å¼å®¹æ§æµè¯ï¼ç­¾ååç PDF éå¨ Adobe AcrobatãWPSãæµè§å¨ç­ä¸»æµéè¯»å¨ä¸­éªè¯æ¾ç¤ºä¸ç­¾åæææ§ï¼</li>
</ol>
<h2 id="äºæ»ç»">äºãæ»ç»</h2>
<p>åºäº Spire.PDF for .NET ç C# å®ç°æ¹æ¡ï¼ä»¥ âè½»éåãä½é¨æ§ãæéæâ ä¸ºæ ¸å¿ä¼å¿ï¼ä»éæ°åè¡ä»£ç å³å¯å®æ PDF çµå­ç­¾åçåºç¡ä¸è¿é¶åè½ãè¯¥æ¹æ¡éé .NET Framework/.NET Core/.NET 5+ å¨æ¡æ¶ï¼è½å¿«éè½å°å°ä¼ä¸çº§ææ¡£å¤çç³»ç»ä¸­ãå¦éæ´é«çå®å¨æ§ä¸åè§æ§ï¼å¯ç»å CA è¯ä¹¦ãæ¶é´æ³æå¡è¿ä¸æ­¥æ©å±ã</p>

</div>
<div class="clear"></div>

            </div>
            <div class="itemdesc">
                åè¡¨äº 
<span id="post-date" data-last-update-days="0.14930555555555555" data-date-updated="2025-12-25 13:52">2025-12-25 10:17</span>&nbsp;
<a href="https://www.cnblogs.com/jazz-z">LAYONTHEGROUND</a>&nbsp;
éè¯»(<span id="post_view_count">126</span>)&nbsp;
è¯è®º(<span id="post_comment_count">3</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19396484);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19396484', targetLink: 'https://www.cnblogs.com/jazz-z/p/19396484', title: 'éè¿ C# ä¸º PDF ææ¡£æ·»å çµå­ç­¾å' })">ä¸¾æ¥</a>

            </div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ è¶è¶ SpringBoot 4.0äºåï¼OpenSolon v3.8, v3.7.4, v3.6.7 åå¸ ]]></title>
    <link>https://www.cnblogs.com/noear/p/19395962</link>
    <guid>d8ca29539875c279ca97152a9f252169</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/noear/p/19395962" title="åå¸äº 2025-12-25 09:23">
    <span role="heading" aria-level="2">è¶è¶ SpringBoot 4.0äºåï¼OpenSolon v3.8, v3.7.4, v3.6.7 åå¸</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        OpenSolon v3.8æ­£å¼åå¸ï¼å¸¦æ¥å¤é¡¹æ¶æçº§åçº§ãä½ä¸ºæ°ä¸ä»£Javaä¼ä¸çº§å¼åæ¡æ¶ï¼OpenSolonä»¥"å¿«éãå°å·§ãç®æ´"ä¸ºçå¿µï¼åæ¶8å¹´ç§¯ç´¯1.7ä¸æ¬¡ä»£ç æäº¤ï¼åå¹´ä¸è½½éè¾¾1200ä¸æ¬¡ãæ¬æ¬¡æ´æ°åæ¬ï¼è¶åééJava 25æ¯æScopedValueãAIé¢åå¢å¼ºMCPæ ç¶æéç¾¤æ¯æãéæFlowæµç¨å¼æä¸ºéç¨WorkflowServiceãä¼åSnELè¡¨è¾¾å¼å¼æä¸ç¼å­æ§è½ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="å¯¼å¼">å¯¼å¼</h2>
<p>ï¼å¬è¯´éå£ç Spring 7 å SpringBoot 4 æè¿åºäºå ä¸ªå¤§ Bugäºï¼ï¼ï¼åæ¶ 8 å¹´ç£¨ç ºï¼1.7 ä¸æ¬¡ä»£ç æäº¤ï¼9ä¸ªåä»åºï¼å ç¾ä¸ªæ¨¡åï¼20å¤ä¸ä»£ç éï¼ 1200 ä¸æ¬¡åå¹´ä¸è½½é ââ OpenSolonï¼å³ Solonï¼æ­£å¨éæ°å®ä¹ Java ä¼ä¸çº§åºç¨å¼åçæ§ä»·æ¯ã</p>
<p>ä»æ¥ï¼æä»¬æ­£å¼åå¸ OpenSolon v3.8 åå¶ LTS ç»´æ¤çæ¬ãæ¯ä¸æ¬¡æ¶æçº§çè·¨è¶ï¼ä» AI é¢åç MCP æ ç¶æéç¾¤æ¯æï¼å° Flow æµç¨å¼æçåå½éç¨åï¼åå°å¯¹ Java æ°çæ¬ï¼v25ï¼çè¶åå¸å±ï¼OpenSolon æç»­è·µè¡âå¿«éãå°å·§ãç®æ´âçåå¶ç¾å­¦ã</p>
<p>æ è®ºä½ æ¯è¿½æ±ç®åæ§ä»·æ¯çæè´ä¸»ä¹èï¼è¿æ¯æ­£å¨å¯»æ¾å®å¨å¯é çå½äº§åºåº§ï¼è¿æ¬¡æ´æ°é½å¼å¾ä½ å³æ³¨ã</p>
<ul>
<li>ãè¶åééã çåéé Java 25ï¼æ°å¢ ScopedValue ééæ¯æ</li>
<li>ãAI å¢å¼ºã solon-ai æ·±åº¦æ¯æ MCP æ ç¶æä¼è¯éç¾¤ä¸å¼æ­¥å·¥å·</li>
<li>ãæ¶æéæã solon-flow åå½éç¨æµç¨å¼æï¼æ¨åºå¨æ°ç WorkflowService å°è£ï¼</li>
<li>ãæ§è½ä¼åã å¨é¢ä¼åè¡¨è¾¾å¼å¼æï¼SnELï¼ä¸ç¼å­æ§è½ï¼æç»­ä¿æé«å¹¶åãçåå­çé¢åä¼å¿ã</li>
</ul>
<h2 id="opensolon-å¼æºæ¡æ¶ä¹ç§°solon">OpenSolon å¼æºæ¡æ¶ï¼ï¼ä¹ç§°ï¼Solonï¼</h2>
<p>OpenSolon æ¯æ°ä¸ä»£ï¼Java ä¼ä¸çº§åºç¨å¼åæ¡æ¶ã<strong>ä»é¶å¼å§æå»ºï¼No Java-EEï¼ï¼æçµæ´»çæ¥å£è§èä¸å¼æ¾çæ</strong>ãéç¨åç¨åå¥½ç Apache  2.0 å¼æºåè®®ï¼æ¯âæ­å·æ è³ç§ææéå¬å¸âå¼æºçæ ¹çº§é¡¹ç®ï¼æ¯ Java åºç¨å¼åççæåºåº§ï¼å¯æ¿æ¢ç¾å½åéå¬å¸ç Spring çæï¼ã</p>
<ul>
<li>è¿½æ±ï¼ å¿«éãå°å·§ãç®æ´</li>
<li>æå¡ï¼ åå¶ãé«æãå¼æ¾</li>
</ul>
<p>7å¹´å¼æºæ¶é´ï¼ç´¯è®¡ä»£ç æäº¤1.6ä¸æ¬¡ ï¼è¿åå¹´ä¸è½½é1200ä¸æ¬¡ã</p>
<ul>
<li>æéæå¯é¢æç<a href="https://solon.noear.org/article/687" target="_blank" rel="noopener nofollow">ãçæ¬åå¸ä¸é¿ææ¯æè®¡åï¼LTSï¼ã</a></li>
<li>æâ<a href="https://solon.noear.org/article/support" target="_blank" rel="noopener nofollow">ãç¤¾åºäº¤æµã</a>âåâ<a href="https://solon.noear.org/article/services" target="_blank" rel="noopener nofollow">ãä¼ä¸æå¡ã</a>âåéææ¯æ¯æ</li>
</ul>
<p>åæ¶æ¯æè¿è¡æ¶ç¯å¢ï¼ä¸åºäº java-ee æå»ºï¼æä»¥å¯ä»¥åæ¶å¼å®¹ï¼ï¼</p>
<ul>
<li>java8, java11, java17, java21, java25</li>
</ul>
<p>ç®åæå ä¸ªä¸»è¦çé¡¹ç®ä»åºï¼</p>
<table>
<thead>
<tr>
<th>ä»£ç ä»åº</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://gitee.com/opensolon/solon" target="_blank" rel="noopener nofollow">/opensolon/solon</a></td>
<td>Solon ,ä¸»ä»£ç ä»åº</td>
</tr>
<tr>
<td><a href="https://gitee.com/opensolon/solon-examples" target="_blank" rel="noopener nofollow">/opensolon/solon-examples</a></td>
<td>Solon ,å®ç½éå¥ç¤ºä¾ä»£ç ä»åº</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="https://gitee.com/opensolon/solon-expression" target="_blank" rel="noopener nofollow">/opensolon/solon-expression</a></td>
<td>Solon Expression ,ä»£ç ä»åº</td>
</tr>
<tr>
<td><a href="https://gitee.com/opensolon/solon-flow" target="_blank" rel="noopener nofollow">/opensolon/solon-flow</a></td>
<td>Solon Flow ,ä»£ç ä»åº</td>
</tr>
<tr>
<td><a href="https://gitee.com/opensolon/solon-ai" target="_blank" rel="noopener nofollow">/opensolon/solon-ai</a></td>
<td>Solon Ai ,ä»£ç ä»åº</td>
</tr>
<tr>
<td><a href="https://gitee.com/opensolon/solon-cloud" target="_blank" rel="noopener nofollow">/opensolon/solon-cloud</a></td>
<td>Solon Cloud ,ä»£ç ä»åº</td>
</tr>
<tr>
<td><a href="https://gitee.com/opensolon/solon-admin" target="_blank" rel="noopener nofollow">/opensolon/solon-admin</a></td>
<td>Solon Admin ,ä»£ç ä»åº</td>
</tr>
<tr>
<td><a href="https://gitee.com/opensolon/solon-integration" target="_blank" rel="noopener nofollow">/opensolon/solon-integration</a></td>
<td>Solon Integration ,ä»£ç ä»åº</td>
</tr>
<tr>
<td><a href="https://gitee.com/opensolon/solon-java17" target="_blank" rel="noopener nofollow">/opensolon/solon-java17</a></td>
<td>Solon Java17 ééä»åºï¼base java17ï¼</td>
</tr>
<tr>
<td><a href="https://gitee.com/opensolon/solon-java25" target="_blank" rel="noopener nofollow">/opensolon/solon-java25</a></td>
<td>Solon Java25 ééä»åºï¼base java25ï¼</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="https://gitee.com/opensolon/solon-gradle-plugin" target="_blank" rel="noopener nofollow">/opensolon/solon-gradle-plugin</a></td>
<td>Solon Gradle ,æä»¶ä»£ç ä»åº</td>
</tr>
<tr>
<td><a href="https://gitee.com/opensolon/solon-idea-plugin" target="_blank" rel="noopener nofollow">/opensolon/solon-idea-plugin</a></td>
<td>Solon Idea ,æä»¶ä»£ç ä»åº</td>
</tr>
<tr>
<td><a href="https://gitee.com/opensolon/solon-vscode-plugin" target="_blank" rel="noopener nofollow">/opensolon/solon-vscode-plugin</a></td>
<td>Solon VsCode ,æä»¶ä»£ç ä»åº</td>
</tr>
</tbody>
</table>
<h2 id="æä»ä¹ç¹ç¹ç¸å¯¹-java-spring-æ¹æ¡">æä»ä¹ç¹ç¹ï¼ç¸å¯¹ Java Spring æ¹æ¡ï¼ï¼</h2>
<p>OpenSolon å¯¹å½äº§ç®åéå¸¸åå¥½ï¼å¯¹ cpu å memory çéæ±è¿ä½äºåç±»æ¹æ¡ã</p>
<table>
<thead>
<tr>
<th>ç¹ç¹</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ´é«çè®¡ç®æ§ä»·æ¯</td>
<td>å¹¶åé« 700%ï¼åå­ç 50%</td>
</tr>
<tr>
<td>æ´å¿«çå¼åæç</td>
<td>ä»£ç å°ï¼å¥é¨ç®åï¼å¯å¨ï¼æè°è¯éå¯ï¼å¿« 10å</td>
</tr>
<tr>
<td>æ´å¥½ççäº§ä¸é¨ç½²ä½éª</td>
<td>æåå° 90%</td>
</tr>
<tr>
<td>æ´å¤§çå¼å®¹èå´</td>
<td>é java-ee æ¶æï¼åæ¶æ¯æ java8 ï½ java25ï¼graalvm native image</td>
</tr>
</tbody>
</table>
<p>ææ°ç techempower ï¼ç¬¬ä¸æ¹ç¥åæµè¯å¹³å°ï¼æµè¯æ°æ®ï¼</p>
<ul>
<li><a href="https://www.techempower.com/benchmarks/#hw=ph&amp;test=json%C2%A7ion=data-r23" target="_blank" rel="noopener nofollow">https://www.techempower.com/benchmarks/#hw=ph&amp;test=jsonÂ§ion=data-r23</a></li>
<li><a href="https://www.techempower.com/benchmarks/#hw=ph&amp;test=plaintext%C2%A7ion=data-r23" target="_blank" rel="noopener nofollow">https://www.techempower.com/benchmarks/#hw=ph&amp;test=plaintextÂ§ion=data-r23</a></li>
</ul>
<h2 id="é¡¹ç®æ¶æç¤ºæå¾å¨åºæ¯åºç¨å¼åæ¯æ">é¡¹ç®æ¶æç¤ºæå¾ï¼å¨åºæ¯åºç¨å¼åæ¯æï¼</h2>
<img width="700" data-src="https://solon.noear.org/img/369a9093918747df8ab0a5ccc314306a.png" class="lazyload">
<h2 id="v380-æ´æ°è¯´æ">v3.8.0 æ´æ°è¯´æ</h2>
<ul>
<li>æä»¶ <code>solon-flow</code> ç¬¬å­æ¬¡é¢è§</li>
<li>æ°å¢ <code>solon-flow-workflow</code> æä»¶ï¼æ¿ä»£ FlowStatefulServiceï¼</li>
<li>æ°å¢ <code>solon-java25</code> ä»åºï¼æä¾ ScopedValue ééï¼</li>
<li>æ·»å  <code>solon</code> ScopeLocal æ¥å£ï¼ç¨äº ThreadLocal å° ScopedValue å¼å®¹ï¼</li>
<li>æ·»å  <code>solon</code> Solon.start(Class, MultiMap) æ¹æ³</li>
<li>æ·»å  <code>solon</code> ThreadsUtil:newVirtualThreadFactory æ¹æ³</li>
<li>æ·»å  <code>solon</code> ContextHolder:currentWith æ¹æ³ï¼æ¿ä»£ currentSetï¼æ ä¸ºå¼ç¨ï¼</li>
<li>æ·»å  <code>solon</code> Controller:remoting å±æ§ï¼å¯æ¿ä»£ @Remoting æ³¨è§£ï¼</li>
<li>æ·»å  <code>solon</code> éä¾èµå³ç³»ç bean å¼æ­¥åå§åï¼<code>@Init(async=true)</code>ï¼</li>
<li>æ·»å  <code>solon</code> Stringable æ¥å£</li>
<li>æ·»å  <code>solon</code> 'env.use' éç½®æ¯æï¼ç¸å¯¹ 'env'ï¼å®ä¸ 'env.on' åä½æ¶ä¸ä¼å²çªï¼</li>
<li>æ·»å  <code>solon</code> 'server.session.cookieHttpOnly' éç½®æ¯æï¼é»è®¤ä¸º trueï¼</li>
<li>æ·»å  <code>solon</code> Context.cookieSet(...,httpOnly) æ¹æ³</li>
<li>æ·»å  <code>solon-test</code> HttpTester protocol åæ°æ¯æï¼æ¹ä¾¿ https æ http åæ¢æµè¯ï¼</li>
<li>æ·»å  <code>solon-serialization</code> JsonPropsUtil2.dateAsFormat æ·»å  java.sql.Timestamp ç±»åæ¯æ</li>
<li>æ·»å  <code>solon-config-yaml</code> ä¾èµ solon-config-snack4 é¿ååä¸ªå¼å¥æ¶å¿æ</li>
<li>æ·»å  <code>solon-net-httputils</code> HttpSslSupplierAnyï¼æ¹ä¾¿æ éå¶ç ssl ä½¿ç¨ï¼ä½ä¸å»ºè®®ï¼</li>
<li>æ·»å  <code>solon-web-rx</code> RxEntity ç±»ï¼æ¹ä¾¿å¯¹æ¥ mcp-sdkï¼</li>
<li>æ·»å  <code>solon-server</code> ä¼è¯ç¶æç cookie httpOnly éç½®ï¼é»è®¤ä¸º falseï¼</li>
<li>æ·»å  <code>solon-server-tomcat</code> ssl ééæ¯æ</li>
<li>æ·»å  <code>solon-security-validation</code> ValidatorFailureHandlerI18n æ¯æéªè¯æ³¨è§£çå½éåå¤ç<br>
æ·»å  <code>solon-expression</code> SnelParser ç±»ï¼ä¸º TemplateParser å EvaluateParser æä¾åºå¥å£åå ä½ç¬¦éç½®</li>
<li>æ·»å  <code>solon-flow</code> FlowContext:lastNode() æ¹æ³ï¼æåä¸ä¸ªè¿è¡çèç¹ï¼</li>
<li>æ·»å  <code>solon-flow</code> FlowContext:lastNodeId() æ¹æ³ï¼æåä¸ä¸ªè¿è¡çèç¹Idï¼</li>
<li>æ·»å  <code>solon-flow</code> Node.getMetaAs, Link.getMetaAs æ¹æ³</li>
<li>æ·»å  <code>solon-flow</code> NodeSpec:linkRemove æ¹æ³ï¼å¢å¼ºä¿®æ¹è½åï¼</li>
<li>æ·»å  <code>solon-flow</code> Graph:create(id,title,consumer) æ¹æ³</li>
<li>æ·»å  <code>solon-flow</code> Graph:copy(graph,consumer) æ¹æ³ï¼æ¹ä¾¿å¤å¶åä¿®æ¹ï¼</li>
<li>æ·»å  <code>solon-flow</code> GraphSpec:getNode(id) æ¹æ³</li>
<li>æ·»å  <code>solon-flow</code> GraphSpec:addLoop(id) æ¹æ³æ¿ä»£ addLoopingï¼åèæ ä¸ºå¼ç¨ï¼</li>
<li>æ·»å  <code>solon-flow</code> FlowEngine:eval(Graph, ..) ç³»åæ¹æ³</li>
<li>æ·»å  <code>solon-ai</code> FunctionPrompt:handleAsyncï¼ç¨äº mcp-server å¼æ­¥æ¯æï¼</li>
<li>æ·»å  <code>solon-ai</code> FunctionResource:handleAsyncï¼ç¨äº mcp-server å¼æ­¥æ¯æï¼</li>
<li>æ·»å  <code>solon-ai</code> FunctionTool:handleAsyncï¼ç¨äº mcp-server å¼æ­¥æ¯æï¼</li>
<li>æ·»å  <code>solon-ai-core</code> ChatMessage:toNdjson,fromNdjson æ¹æ³ï¼æ¿ä»£ ChatSession:toNdjson, loadNdjsonï¼ï¼æ°æ¹æ³æºå¶ä¸æ´èªç±</li>
<li>æ·»å  <code>solon-ai-core</code> ToolSchemaUtil.jsonSchema Publisher æ³åæ¯æ</li>
<li>æ·»å  <code>solon-ai-mcp</code> mcp-java-sdk v0.17 ééï¼æ¯æ 2025-06-18 çæ¬åè®®ï¼</li>
<li>æ·»å  <code>solon-ai-mcp</code> mcp-server å¼æ­¥æ¯æ</li>
<li>æ·»å  <code>solon-ai-mcp</code> mcp-server streamable_stateless æ¯æ</li>
<li>æ·»å  <code>solon-ai-mcp</code> Tool,Resource,Prompt å¯¹ org.reactivestreams.Publisher<x> å¼æ­¥è¿åæ¯æ</x></li>
<li>æ·»å  <code>solon-ai-mcp</code> McpServerHost æå¡å®¿ä¸»æ¥å£ï¼ç¨äºéç¦»æç¶æä¸æ ç¶ææå¡</li>
<li>æ·»å  <code>solon-ai-mcp</code> McpChannel.STREAMABLE_STATELESS ï¼æå¡ç«¯ï¼æ ç¶æä¼è¯</li>
<li>æ·»å  <code>solon-ai-mcp</code> McpClientProvider:customize æ¹æ³ï¼ç¨äºæ©å± roots, sampling ç­ï¼</li>
<li>æ·»å  <code>solon-ai-mcp</code> mcpServer McpAsyncServerExchange æ³¨å¥æ¯æï¼ç¨äºæ©å± roots, sampling ç­ï¼</li>
<li>ä¼å <code>solon</code> api-version çæ¬å¹é</li>
<li>ä¼å <code>solon</code> SnelUtil snel è¡¨è¾¾å¼ç¼ºåæ°æ¶å¼å¸¸æç¤ºï¼é¿åééåå­ï¼</li>
<li>ä¼å <code>solon</code> ParamWrap:getName æ¹ç¨ ParamSpec.getAliasãå  '@Param(name=xxx)' æ³¨è§£å¯çæ</li>
<li>ä¼å <code>solon-cache</code> CacheService ééæ²¡æ _cacheKeyHead éç½®æ¶ï¼åä¸å åç¼</li>
<li>ä¼å <code>solon-net-httputils</code> SslContextBuilder</li>
<li>ä¼å <code>solon-expression</code> EvaluateParser æ¯æå®ä¹å ä½ç¬¦ï¼å¯æ¯æ <code>{xxx}</code> è¡¨è¾¾å¼ï¼</li>
<li>ä¼å <code>solon-expression</code> TemplateParser æ¯æå®ä¹å ä½ç¬¦ï¼å¯æ¯æ <code>{xxx}</code> è¡¨è¾¾å¼ï¼</li>
<li>ä¼å <code>solon-expression</code> LRUCache æ§è½ï¼æé«ç¼å­æ§è½ï¼</li>
<li>ä¼å <code>solon-ai-dialect-openai</code> claude å¼å®¹æ§</li>
<li>ä¼å <code>solon-ai-mcp mcp</code> StreamableHttp æ¨¡å¼ä¸ æå¡ç«¯æ­£å¸¸è¿åæ¶ å®¢æ·ç«¯å¼å¸¸æ¥å¿æå°çæåµ* ä¼å <code>solon-flow</code> eval(Node startNode) å¤çï¼æ¹ä¸ºä» root å¼å§æ¢å¤å° start åå¼å§æ§è¡ï¼æ¢å¤è¿ç¨ä¸­ï¼ä¸ä¼æ§è¡ä»»å¡ï¼</li>
<li>ä¼å <code>solon-flow</code> FlowEngine:eval(Node startNode) å¤çï¼æ¹ä¸ºä» root å¼å§æ¢å¤å° start åå¼å§æ§è¡ï¼æ¢å¤è¿ç¨ä¸­ï¼ä¸ä¼æ§è¡ä»»å¡ï¼</li>
<li>è°æ´ <code>nami</code> NamiAttachment åæ¢ä¸º ScopeLocal æ¥å£å®ç°</li>
<li>è°æ´ <code>solon</code> ContextHolder åæ¢ä¸º ScopeLocal æ¥å£å®ç°</li>
<li>è°æ´ <code>solon</code> RunHolderï¼parallelExecutor æ¹ä¸º newFixedThreadPool</li>
<li>è°æ´ <code>solon-data</code> TranExecutorDefault åæ¢ä¸º ScopeLocal æ¥å£å®ç°</li>
<li>è°æ´ <code>local-solon-cloud-plugin</code> ç config å i18n æå¡ï¼å¦ææ²¡æ group éç½®ï¼åæä»¶ä¸å¸¦ group åç¼ï¼ä¹åé»è®¤ç»äº DEFAULT_GROUP ç»åï¼æ¾å¾å¤æï¼</li>
<li>è°æ´ <code>rocketmq-solon-clouud-plugin</code> çééï¼äºä»¶å±æ§ä¸åå  '!' ï¼å¹¶å¼å®¹æ§æ ¼å¼ï¼</li>
<li>è°æ´ <code>aliyun-ons-solon-clouud-plugin</code> çééï¼äºä»¶å±æ§ä¸åå  '!' ï¼å¹¶å¼å®¹æ§æ ¼å¼ï¼</li>
<li>è°æ´ <code>rocketmq5-solon-clouud-plugin</code> çééï¼äºä»¶å±æ§ä¸åå  '!' ï¼å¹¶å¼å®¹æ§æ ¼å¼ï¼ãæ·»å  sql92 è¿æ»¤æ¯æ</li>
<li>è°æ´ <code>solon-flow</code> ç§»é¤ Activity èç¹é¢è§å±æ§ "$imode" å "$omode"</li>
<li>è°æ´ <code>solon-flow</code> Activity èç¹æµåºæ¹ä¸ºèªç±æ¨¡å¼ï¼å¯ä»¥å¤çº¿æµåºï¼æ æ¡ä»¶ç´æ¥æµåºï¼ææ¡ä»¶æ£æµåæµåºï¼</li>
<li>è°æ´ <code>solon-flow</code> Node.getMeta æ¹æ³è¿åæ¹ä¸º Object ç±»åï¼å¹¶æ°å¢ getMetaAsï¼</li>
<li>è°æ´ <code>solon-flow</code> Evaluation:runTest æ¹ä¸º runCondition</li>
<li>è°æ´ <code>solon-flow</code> FlowContext:incrAdd,incrGet æ ä¸ºå¼ç¨ï¼ä¸ä¸ææ°æ®ä¸ºååªè½ç±è¾å¥ä¾§å³å®ï¼</li>
<li>è°æ´ <code>solon-flow</code> Condition æ´åä¸º ConditionDesc</li>
<li>è°æ´ <code>solon-flow</code> Task æ´åä¸º ConditionDesc</li>
<li>è°æ´ <code>solon-flow</code> XxxDecl å½åé£æ ¼æ¹ä¸º XxxSpec</li>
<li>è°æ´ <code>solon-flow</code> GraphDecl.parseByXxx å½åé£æ ¼æ¹ä¸º GraphSpec.fromXxx</li>
<li>è°æ´ <code>solon-flow</code> Graph.parseByXxx å½åé£æ ¼æ¹ä¸º Graph.fromXxx</li>
<li>è°æ´ <code>solon-ai-mcp</code> getResourceTemplatesãgetResources ä¸åå±äº«æ³¨å</li>
<li>è°æ´ <code>solon-ai-mcp</code> McpServerManager åé¨æ¥å£æ´åä¸º McpPrimitivesRegistry ï¼MCP åè¯­æ³¨åå¨ï¼</li>
<li>è°æ´ <code>solon-ai-mcp</code> McpClientProvider é»è®¤ä¸å¯ç¨å¿è·³æºå¶ï¼éç mcp-sdk çæçï¼server é½æå¿è·³æºå¶äºï¼</li>
<li>ä¿®å¤ <code>solon</code> IndexFiles è·¯å¾è¡¨è¾¾å¼çå¼å®¹é®é¢ï¼æ·»å è½¬æ¢ <code>*-&gt;@</code>ã<code>:-&gt;!</code>ï¼</li>
<li>ä¿®å¤ <code>solon</code> ParamWrap:getName å  '@Param(name=xxx)' æ³¨è§£æ¶æ²¡æçæçé®é¢ï¼v3.7.0 åºç°ï¼ãå¯¹ solon-cache ä¼æå½±å</li>
<li>ä¿®å¤ <code>solon-web-vertx</code> VxWebContext._requestBody å¦æä¸º null æä»¶ä¸ä¼ æ¶ä¼åºéçé®é¢</li>
<li>ä¿®å¤ <code>solon-docs-openapi2</code> è¿åç±»åä¸­æ³åå¤±æçé®é¢ï¼v3.7.0 åºç°ï¼</li>
<li>snack4 åä¸º 4.0.20</li>
<li>jackson åä¸º 2.19.2</li>
<li>liquor åä¸º 1.6.6</li>
<li>asm åä¸º 9.9</li>
</ul>
<h4 id="solon-ä»åºè¡¥åè¯´æ">solon ä»åºè¡¥åè¯´æ</h4>
<p>æ°ç¹æ§ï¼</p>
<pre><code class="language-java">public class Demo {
   static ScopeLocal&lt;String&gt; LOCAL = ScopeLocal.newInstance();

   public void test(){
       LOCAL.with("test", ()-&gt;{
           System.out.println(LOCAL.get());
       });
   }
}
</code></pre>
<h4 id="solon-ai-ä»åºè¡¥åè¯´æ">solon-ai ä»åºè¡¥åè¯´æ</h4>
<p>æ°ç¹æ§å±ç¤ºï¼1.MCP æ ç¶æä¼è¯ï¼STREAMABLE_STATELESSï¼å 2.CompletableFuture å¼æ­¥MCPå·¥å·</p>
<pre><code class="language-java">@McpServerEndpoint(channel = McpChannel.STREAMABLE_STATELESS, mcpEndpoint = "/mcp1")
public class McpServerTool {
    @ToolMapping(description = "æ¥è¯¢å¤©æ°é¢æ¥", returnDirect = true)
    public CompletableFuture&lt;String&gt; getWeather(@Param(description = "åå¸ä½ç½®") String location) {
        return CompletableFuture.completedFuture("æ´ï¼14åº¦");
    }
}
</code></pre>
<p>ä¼ è¾æ¹å¼å¯¹åºè¡¨ï¼ï¼æå¡ç«¯ä¸å®¢æ·ç«¯ï¼é¡»ä½¿ç¨å¯¹åºçä¼ è¾æ¹å¼æå¯éè®¯ï¼</p>
<table>
<thead>
<tr>
<th>æå¡ç«¯</th>
<th>å®¢æ·ç«¯</th>
<th>å¤æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>STDIO</td>
<td>STDIO</td>
<td></td>
</tr>
<tr>
<td>SSE</td>
<td>SSE</td>
<td></td>
</tr>
<tr>
<td>STREAMABLE</td>
<td>STREAMABLE</td>
<td></td>
</tr>
<tr>
<td>STREAMABLE_STATELESS</td>
<td>STREAMABLE</td>
<td>å¯¹ server éç¾¤å¾åå¥½</td>
</tr>
</tbody>
</table>
<ul>
<li>STREAMABLE_STATELESS éç¾¤ï¼ä¸éè¦ ip_hashï¼ä½âåè¯­âåååæ æ³éç¥ client</li>
</ul>
<h4 id="solon-flow-ä»åºè¡¥åè¯´æ">solon-flow ä»åºè¡¥åè¯´æ</h4>
<p>éè¦ååï¼</p>
<ul>
<li>åæ¶âæç¶æâãâæ ç¶æâæ¦å¿µã</li>
<li>solon-flow åå½éç¨æµç¨å¼æï¼åç¦»âæç¶æâçæ¦å¿µï¼ã</li>
<li>æ°å¢ solon-flow-workflow ä¸ºå·¥ä½æµæ§è´¨çå°è£ï¼æªæ¥å¯è½ä¼æ dataflow ç­ï¼ã</li>
</ul>
<p>å¼å®¹ååå¯¹ç§è¡¨ï¼</p>
<table>
<thead>
<tr>
<th>æ§åç§°</th>
<th>æ°åç§°</th>
<th>è¯´æ</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GraphDecl</code></td>
<td><code>GraphSpec</code></td>
<td>å¾å®ä¹</td>
</tr>
<tr>
<td><code>GraphDecl.parseByXxx</code></td>
<td><code>GraphSpec.fromXxx</code></td>
<td>å¾å®ä¹å è½½</td>
</tr>
<tr>
<td><code>Graph.parseByXxx</code></td>
<td><code>Graph.fromXxx</code></td>
<td>å¾å è½½</td>
</tr>
<tr>
<td><code>LinkDecl</code></td>
<td><code>LinkSpec</code></td>
<td>è¿æ¥å®ä¹</td>
</tr>
<tr>
<td><code>NodeDecl</code></td>
<td><code>NodeSpec</code></td>
<td>èç¹å®ä¹</td>
</tr>
<tr>
<td><code>Condition</code></td>
<td><code>ConditionDesc</code></td>
<td>æ¡ä»¶æè¿°</td>
</tr>
<tr>
<td><code>Task</code></td>
<td><code>TaskDesc</code></td>
<td>ä»»å¡æè¿°ï¼é¿åä¸ workflow çæ¦å¿µå²çªï¼</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>FlowStatefulService</code></td>
<td><code>WorkflowService</code></td>
<td>å·¥ä½æµæå¡</td>
</tr>
<tr>
<td><code>StatefulTask</code></td>
<td><code>Task</code></td>
<td>ä»»å¡</td>
</tr>
<tr>
<td><code>Operation</code></td>
<td><code>TaskAction</code></td>
<td>ä»»å¨å·¥ä½</td>
</tr>
<tr>
<td><code>TaskType</code></td>
<td><code>TaskState</code></td>
<td>ä»»å¡ç¶æ</td>
</tr>
</tbody>
</table>
<p>FlowStatefulService å° WorkflowService çæ¥å£ååå¯¹ç§è¡¨ï¼</p>
<table>
<thead>
<tr>
<th>æ§åç§°</th>
<th>æ°åç§°</th>
<th>è¯´æ</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>postOperation(..)</code></td>
<td><code>postTask(..)</code></td>
<td>æäº¤ä»»å¡</td>
</tr>
<tr>
<td><code>postOperationIfWaiting(..)</code></td>
<td><code>postTaskIfWaiting(..)</code></td>
<td>æäº¤ä»»å¡</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>evel(..)</code></td>
<td>/</td>
<td>æ§è¡</td>
</tr>
<tr>
<td><code>stepForward(..)</code></td>
<td>/</td>
<td>åæ­¥åè¿</td>
</tr>
<tr>
<td><code>stepBack(..)</code></td>
<td>/</td>
<td>åæ­¥åé</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>/</td>
<td><code>getState(..)</code></td>
<td>è·åç¶æ</td>
</tr>
</tbody>
</table>
<p>æ°ç¹æ§é¢è§ï¼Graph ç¡¬ç¼ç æ¹å¼ï¼åä¿®æ¹è½åå¢å¼ºï¼</p>
<pre><code class="language-java">//ç¡¬ç¼ç 
Graph graph = Graph.create("demo1", "ç¤ºä¾", spec -&gt; {
    spec.addStart("start").title("å¼å§").linkAdd("01");
    spec.addActivity("n1").task("@AaMetaProcessCom").linkAdd("end");
    spec.addEnd("end").title("ç»æ");
});

//ä¿®æ¹
Graph graphNew = Graph.copy(graph, spec -&gt; {
    spec.getNode("n1").linkRemove("end").linkAdd("n2"); //ç§»æ n1 è¿æ¥ï¼æ¹ä¸º n2 è¿æ¥
    spec.addActivity("n2").linkAdd("end");
});
</code></pre>
<p>æ°ç¹æ§é¢è§ï¼FlowContext:lastNodeId ï¼è®¡ç®çä¸­æ­ä¸æ¢å¤ï¼ãåèï¼<a href="https://solon.noear.org/article/1246" target="_blank" rel="noopener nofollow">https://solon.noear.org/article/1246</a></p>
<pre><code class="language-java">flowEngine.eval(graph, context.lastNodeId(), context);
//...ï¼ä»ä¸ä¸ä¸ªèç¹å¼å§æ§è¡ï¼
flowEngine.eval(graph, context.lastNodeId(), context);
</code></pre>
<p>æ°ç¹æ§é¢è§ï¼WorkflowServiceï¼æ¿ä»£ FlowStatefulServiceï¼</p>
<pre><code class="language-java">WorkflowService workflow = WorkflowService.of(engine, WorkflowDriver.builder()
        .stateController(new ActorStateController()) 
        .stateRepository(new InMemoryStateRepository()) 
        .build());


//1. ååºä»»å¡
Task task = workflow.getTask(graph, context);

//2. æäº¤ä»»å¡
workflow.postTask(task.getNode(), TaskAction.FORWARD, context);
</code></pre>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-25 09:24">2025-12-25 09:23</span>&nbsp;
<a href="https://www.cnblogs.com/noear">å¸¦åºçåæ¤</a>&nbsp;
éè¯»(<span id="post_view_count">15</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19395962);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19395962', targetLink: 'https://www.cnblogs.com/noear/p/19395962', title: 'è¶è¶ SpringBoot 4.0äºåï¼OpenSolon v3.8, v3.7.4, v3.6.7 åå¸' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
        </channel>
        </rss>