<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åå®¢å­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2026-01-06T01:17:09.165Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åå®¢å­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ ä»æ¬å°å°äºç«¯ï¼æ·±å¥çè§£WSGIï¼è®©ä½ çPython Webåºç¨ç¨³å¥é¨ç½² ]]></title>
    <link>https://www.cnblogs.com/ymtianyu/p/19445657</link>
    <guid>6fe97e67ed5483f20e20bd1981184c93</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ymtianyu/p/19445657" title="åå¸äº 2026-01-06 08:55">
    <span role="heading" aria-level="2">ä»æ¬å°å°äºç«¯ï¼æ·±å¥çè§£WSGIï¼è®©ä½ çPython Webåºç¨ç¨³å¥é¨ç½²</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        æ¬ææ·±å¥è§£æäºPython Webå¼åä¸­è³å³éè¦çWSGIæ¥å£åçï¼éè¿é¤åççå¨æ¯å»ééäºå¶å·¥ä½æµç¨ãæç« éç¹æä¾äºä½¿ç¨Gunicorn WSGIæå¡å¨é¨ç½²FlaskåFastAPIåºç¨çå®æ´å®ææåï¼åæ¬åºç¡å½ä»¤ãNginxååä»£çéç½®ï¼å¹¶å¼ºè°äºçäº§ç¯å¢å¿é¡»æ³¨æçå®å¨è®¾ç½®ä¸æ§è½è°ä¼è¦ç¹ï¼å¸®å©å¼åèå°åºç¨ä»æ¬å°å¹³ç¨³è¿ç§»è³çº¿ä¸ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p><strong style="color: rgba(186, 55, 42, 1)">ä¸ºä»ä¹ä½ çFlask/FastAPIåºç¨å¨æ¬å°è·å¾å¥½å¥½çï¼ä¸ä¸çº¿å°±æ§è½æè·¨ãéè¯¯é¢åºï¼</strong></p>
<p>æè§è¿å¤ªå¤å¼åèï¼åæ¬å å¹´åçæèªå·±ï¼æ»¡æä¿¡å¿å°å°æ¬å°è°è¯å®ç¾çåºç¨é¨ç½²å°æå¡å¨ï¼ç»æç¬¬ä¸ä¸ªæµéå°é«å³°å°±ç´æ¥â502 Bad Gatewayâãæ°æ®æ¾ç¤ºï¼è¶è¿60%çPython Webåºç¨åæé¨ç½²é®é¢ï¼é½æºäºå¯¹<code style="color: rgba(186, 55, 42, 1)">WSGI</code>åå¶æå¡å¨çè¯¯è§£æéç½®ä¸å½ã</p>
<p>ð¯ <strong>æ ¸å¿æè¦</strong>ï¼æ¬æå°å¸¦ä½ ç©¿è¶ä»å¼åå°çäº§çè¿·é¾ãä½ å°å½»åºæç½WSGIæ¯ä»ä¹ãä¸ºä»ä¹éè¦å®ï¼å¹¶ææ¡ä½¿ç¨ä¸»æµWSGIæå¡å¨ï¼Gunicorn/uWSGIï¼é¨ç½²Flask/FastAPIåºç¨ç<strong style="color: rgba(186, 55, 42, 1)">å·ä½æ­¥éª¤ä¸å®å¨éç½®</strong>ï¼æç»è®©ä½ çåºç¨ç¨³å¥å°è·å¨çº¿ä¸ç¯å¢ã</p>
<p>ð <strong>ä¸»è¦åå®¹èç»</strong>ï¼</p>
<div style="background-color: rgba(249, 249, 249, 1); padding: 15px; border-left: 4px solid rgba(75, 150, 230, 1); margin: 15px 0">
<p>1ï¸â£ çç¹åé¡¾ï¼ä»âå®è½è·âå°âå®è½æâçè·ç¦»</p>
<p>2ï¸â£ æ ¸å¿åçï¼ä¸åéï¼ç¨âé¤åæ¯å»âçæWSGI</p>
<p>3ï¸â£ å®æé¨ç½²ï¼æææç¨Gunicorné¨ç½²Flaskä¸FastAPI</p>
<p>4ï¸â£ é¿åæåï¼å®å¨éç½®ä¸æ§è½è°ä¼çå³é®ç¹</p>
</div>
<h2>ð¤ ç¬¬ä¸é¨åï¼é®é¢ä¸èæ¯ââæä»¬ä¸æ¯å¨è¿è¡èæ¬ï¼èæ¯å¨æå¡è¯·æ±</h2>
<p>è¿è®°å¾ä½ ç¨<code style="color: rgba(186, 55, 42, 1)">app.run()</code>å¯å¨Flaskå¼åæå¡å¨çæ¶ååï¼å®æ¹ä¾¿ï¼ä½å®æ¯åçº¿ç¨çï¼æ§è½å­±å¼±ï¼æ´ä¸å·å¤çäº§çº§æéçå¤è¿ç¨ãå®æ¤è¿ç¨ãè´è½½åè¡¡ç­è½åãè¿å°±å¥½æ¯ï¼</p>
<div style="margin-left: 20px">
<p>ð¹ <strong>å¼åç¯å¢</strong>ï¼ä¸ä¸ªå¨å¸ï¼ä½ çåºç¨ï¼å¼ä»»æå¡åãæ¶é¶åï¼ä¸æ¬¡æå¡ä¸ä½é¡¾å®¢ï¼è¯·æ±ï¼ã</p>
<p>ð¹ <strong>çäº§ç¯å¢</strong>ï¼éè¦ä¸æ´ä¸ªé¤åç³»ç»ãå¤åå¨å¸ï¼å·¥ä½è¿ç¨ï¼ãä¸ä¸æå¡åï¼Webæå¡å¨ï¼ãæéå«å·æºï¼è´è½½åè¡¡å¨ï¼ååå·¥ä½ã</p>
</div>
<p>WSGIï¼Web Server Gateway Interfaceï¼å°±æ¯å®ä¹â<strong style="color: rgba(186, 55, 42, 1)">å¨å¸ï¼åºç¨ï¼</strong>âåâ<strong style="color: rgba(186, 55, 42, 1)">æå¡åï¼Webæå¡å¨ï¼</strong>âä¹é´å¦ä½æ²éç<strong>Pythonæ ååè®®</strong>ãå®è®©æä»¬çåºç¨åå¾ä¸æå¡å¨æ å³ï¼ä½ å¯ä»¥èªç±éæ©NginxãApacheï¼ä¹å¯ä»¥éæ©GunicornæuWSGIã</p>
<h2>ð§ ç¬¬äºé¨åï¼æ ¸å¿åçââWSGIï¼é£ä¸ªâä¼ èåâ</h2>
<p>æ³è±¡ä¸ä¸ªé«çº§é¤åï¼</p>
<div style="margin-left: 20px">
<p>1. é¡¾å®¢ï¼å®¢æ·ç«¯ï¼åæå¡åï¼Nginx/Apacheï¼ç¹é¤ï¼åéHTTPè¯·æ±ï¼ã</p>
<p>2. æå¡åå°è®¢åæ ååï¼åå¨ä¼ èåï¼WSGIç¯å¢å­å¸ï¼ä¸ï¼éç»ä¼ èåï¼WSGI Serverï¼ã</p>
<p>3. ä¼ èåæè®¢åäº¤ç»åå¨çæä½å¨å¸ï¼WSGI Applicationï¼ï¼å¹¶è¯´ï¼âå¼å§åèå§ï¼âã</p>
<p>4. å¨å¸ï¼ä½ çFlaskä»£ç ï¼åå¥½èï¼çæHTTPååºï¼ï¼äº¤ç»ä¼ èåã</p>
<p>5. ä¼ èåå°èåæ ååï¼åç±æå¡åä¼éå°ç«¯ç»é¡¾å®¢ã</p>
</div>
<p><strong style="color: rgba(186, 55, 42, 1)">å³é®ç¹</strong>ï¼ä½ çFlask/FastAPIåºç¨ï¼æ¬è´¨ä¸å°±æ¯ä¸ä¸ªç¬¦åWSGIåè®®çå¯è°ç¨å¯¹è±¡ï¼callableï¼ï¼å®æ¥æ¶ä¸¤ä¸ªåæ°ï¼<code style="color: rgba(186, 55, 42, 1)">environ</code>ï¼åå«ææè¯·æ±ä¿¡æ¯çå­å¸ï¼å<code style="color: rgba(186, 55, 42, 1)">start_response</code>ï¼ç¨äºåèµ·ååºçå½æ°ï¼ï¼å¹¶è¿åä¸ä¸ªå¯è¿­ä»£çååºä½ã</p>
<pre class="highlighter-hljs" style="background-color: rgba(246, 248, 250, 1); padding: 15px; border-radius: 5px; overflow-x: auto"><code># è¿å°±æ¯WSGIåºç¨çæç®å½¢æ
def simple_app(environ, start_response):
    status = '200 OK'
    headers = [('Content-type', 'text/plain; charset=utf-8')]
    start_response(status, headers)
    return [b"Hello, WSGI World!\n"]

# Flask/FastAPIå¸®ä½ å°è£äºè¿ä¸åï¼è®©ä½ è½ä¼éå°åè·¯ç±åé»è¾ã</code></pre>
<h2>ð ç¬¬ä¸é¨åï¼å®ææ¼ç¤ºââç¨Gunicornâæ­¦è£âä½ çåºç¨</h2>
<p>Gunicornï¼Green Unicornï¼æ¯ä¸ä¸ªçº¯Pythonç¼åçWSGI HTTPæå¡å¨ï¼ç¨³å®ãç®åï¼æ¯è®¸å¤é¡¹ç®çé¦éãä»¥ä¸æ¯é¨ç½²ä¸ä¸ªFlaskåºç¨çå®æ´æ­¥éª¤ã<br>ï¼<strong><span style="color: rgba(186, 55, 42, 1)">ç¹å«æé</span></strong>ï¼Gunicorn å®æ¹ä¸æ¯æ Windowsï¼ä¾èµçå¾å¤æ¨¡åé½åªå¨ Linux ç¯å¢ä¸ææï¼<strong><span style="color: rgba(186, 55, 42, 1)">Waitress </span></strong>æ¯ä¸ä¸º Windows è®¾è®¡ç WSGI æå¡å¨ï¼å¼å®¹æ§å¥½ï¼ä¸ Flask/Django å¼å®¹æ§é«ï¼é¨ç½²ç®åï¼</p>
<h3><strong>æ­¥éª¤ä¸ï¼å®è£</strong></h3>
<pre class="highlighter-hljs" style="background-color: rgba(246, 248, 250, 1); padding: 15px; border-radius: 5px; overflow-x: auto"><code>pip install gunicorn
# ä½ çé¡¹ç®ä¾èµï¼Flask/FastAPIç­ï¼ä¹éè¦ä¸å¹¶å®è£æåå¨requirements.txté</code></pre>
<h3><strong>æ­¥éª¤äºï¼ç¼åä¸ä¸ªæç®åçåºç¨</strong>ï¼app.pyï¼</h3>
<pre class="highlighter-hljs" style="background-color: rgba(246, 248, 250, 1); padding: 15px; border-radius: 5px; overflow-x: auto"><code>from flask import Flask
app = Flask(__name__)

@app.route('/')
def hello():
    return 'Hello, from Gunicorn!'

# æ³¨æï¼çäº§ç¯å¢ä¸è¦ä½¿ç¨ app.run()</code></pre>
<h3><strong>æ­¥éª¤ä¸ï¼ä½¿ç¨Gunicornå¯å¨åºç¨</strong></h3>
<pre class="highlighter-hljs" style="background-color: rgba(246, 248, 250, 1); padding: 15px; border-radius: 5px; overflow-x: auto"><code># åºç¡å¯å¨å½ä»¤ï¼å¨é¡¹ç®ç®å½ä¸æ§è¡
# `app:app` æçæ¯ `æ¨¡åå:åºç¨ç¨åºå®ä¾åéå`
gunicorn -w 4 -b 0.0.0.0:8000 app:app

# å¸¸ç¨åæ°è§£éï¼
# -w 4ï¼å¯å¨4ä¸ªå·¥ä½è¿ç¨ï¼Workerï¼ï¼éå¸¸å»ºè®®è®¾ç½®ä¸º (CPUæ ¸å¿æ° * 2) + 1
# -b 0.0.0.0:8000ï¼ç»å®å°ææç½ç»æ¥å£ç8000ç«¯å£
# --access-logfile -ï¼å°è®¿é®æ¥å¿æå°å°æ åè¾åºï¼æ¹ä¾¿å¨Dockerç­ç¯å¢ä¸­æ¥çï¼
# --error-logfile -ï¼å°éè¯¯æ¥å¿æå°å°æ åè¾åº
# --timeout 30ï¼è¯·æ±è¶æ¶æ¶é´ï¼ç§ï¼
# --daemonï¼ä»¥å®æ¤è¿ç¨ï¼åå°ï¼æ¨¡å¼è¿è¡ï¼çäº§ç¯å¢å¸¸ç¨ï¼</code></pre>
<h3><strong>æ­¥éª¤åï¼æ­éNginxï¼æä½³å®è·µï¼</strong></h3>
<p>Gunicornæé¿å¤çå¨æè¯·æ±ï¼ä½ä¸æé¿å¤çéææä»¶ï¼CSSï¼ JSï¼ å¾çï¼ãNginxä½ä¸ºååä»£çï¼å¯ä»¥ï¼</p>
<div style="margin-left: 20px">
<p>ð¹ å¤çéææä»¶ï¼æçæé«ã</p>
<p>ð¹ å°å¨æè¯·æ±<strong>ä»£ç</strong>ç»åç«¯çGunicornã</p>
<p>ð¹ æä¾è´è½½åè¡¡ãSSLç»ç»ãç¼å²è¯·æ±ç­é«çº§åè½ã</p>
</div>
<p>ä¸ä¸ªç®åçNginxéç½®çæ®µï¼/etc/nginx/sites-available/your_projectï¼ï¼</p>
<pre class="highlighter-hljs" style="background-color: rgba(246, 248, 250, 1); padding: 15px; border-radius: 5px; overflow-x: auto"><code>server {
    listen 80;
    server_name your_domain.com;

    # å¤çéææä»¶
    location /static {
        alias /path/to/your/static/files;
    }

    # å°ææå¶ä»è¯·æ±è½¬åç»Gunicorn
    location / {
        proxy_pass http://127.0.0.1:8000; # Gunicornç»å®çå°å
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}</code></pre>
<h3><strong>ä¸äºéæ©å»ºè®®</strong></h3>
<table class="md-table">
<thead>
<tr class="md-end-block">
<th><span class="td-span"><span class="md-plain">â</span><span class=""><strong><span class="md-plain">æå¡å¨</span></strong></span><span class="md-plain">â</span></span></th>
<th><span class="td-span"><span class="md-plain">â</span><span class=""><strong><span class="md-plain">éç¨åºæ¯</span></strong></span><span class="md-plain">â</span></span></th>
<th><span class="td-span"><span class="md-plain">â</span><span class=""><strong><span class="md-plain">ç¹ç¹</span></strong></span><span class="md-plain">â</span></span></th>
<th><span class="td-span"><span class="md-plain">â</span><span class=""><strong><span class="md-plain">å¼å®¹æ§</span></strong></span><span class="md-plain">â</span></span></th>
<th><span class="td-span"><span class="md-plain">â</span><span class=""><strong><span class="md-plain">æ¨èææ°</span></strong></span><span class="md-plain">â</span></span></th>
</tr>
</thead>
<tbody>
<tr class="md-end-block">
<td><span class="td-span"><span class="md-plain">â</span><span class=""><strong><span class="md-plain">Gunicorn</span></strong></span><span class="md-plain">â</span></span></td>
<td><span class="td-span"><span class="md-plain">Linux çäº§ç¯å¢</span></span></td>
<td><span class="td-span"><span class="md-plain">å¤è¿ç¨/çº¿ç¨æ¨¡åï¼é«æ§è½</span></span></td>
<td><span class="td-span"><span class="md-plain">ä»æ¯æ Unixï¼é WSL2 æ Dockerï¼</span></span></td>
<td><span class="td-span"><span class="md-plain">âââââï¼éæ¡ä»¶æ¯æï¼</span></span></td>
</tr>
<tr class="md-end-block">
<td><span class="td-span"><span class="md-plain">â</span><span class=""><strong><span class="md-plain">uWSGI</span></strong></span><span class="md-plain">â</span></span></td>
<td><span class="td-span"><span class="md-plain">Linux çäº§ç¯å¢</span></span></td>
<td><span class="td-span"><span class="md-plain">é«æãæä»¶ä¸°å¯</span></span></td>
<td><span class="td-span"><span class="md-plain">ä»æ¯æ Unixï¼é WSL2 æ Dockerï¼</span></span></td>
<td><span class="td-span"><span class="md-plain">âââââï¼éæ¡ä»¶æ¯æï¼</span></span></td>
</tr>
<tr class="md-end-block">
<td><span class="td-span"><span class="md-plain">â</span><span class=""><strong><span class="md-plain">Waitress</span></strong></span><span class="md-plain">â</span></span></td>
<td><span class="td-span"><span class="md-plain">Windows çäº§ç¯å¢</span></span></td>
<td><span class="td-span"><span class="md-plain">ä¸ä¸º Windows è®¾è®¡ï¼å¼å®¹æ§å¥½</span></span></td>
<td><span class="td-span"><span class="md-plain">Windows åçæ¯æ</span></span></td>
<td><span class="td-span"><span class="md-plain">âââââï¼Windows ä¼åï¼</span></span></td>
</tr>
<tr class="md-end-block md-focus-container">
<td><span class="td-span"><span class="md-plain">â</span><span class=""><strong><span class="md-plain">Uvicorn</span></strong></span><span class="md-plain">â</span></span></td>
<td><span class="td-span"><span class="md-plain">å¼å/æµè¯ç¯å¢</span></span></td>
<td><span class="td-span"><span class="md-plain">å¼æ­¥æ¯æï¼å¿«éå¯å¨</span></span></td>
<td><span class="td-span"><span class="md-plain">Windows/Linux åçæ¯æ</span></span></td>
<td><span class="td-span md-focus"><span class="md-plain md-expand">âââââï¼å¼åé¦éï¼</span></span></td>
</tr>
</tbody>
</table>
<h4>å³é®æ³¨æäºé¡¹</h4>
<ul>
<li>â<strong>Gunicorn/uWSGI</strong>â ä¾èµ Unix ç³»ç»æ¨¡åï¼å¦&nbsp;<code>fcntl</code>ï¼ï¼Windows ä¸ééè¿ WSL2 æ Docker è¿è¡ã</li>
<li>â<strong>Waitress</strong>â ä¸ä¸º Windows è®¾è®¡ï¼æ éä¿®æ¹ä»£ç ï¼å¼å®¹æ§æä½³ã</li>
<li>â<strong>Uvicorn</strong>â éåå¼åæµè¯ï¼å¼æ­¥æ¯ææ´é«æï¼ä½çäº§ç¯å¢ééå Nginx æ uWSGIã</li>
</ul>
<h2>â ï¸ ç¬¬åé¨åï¼æ³¨æäºé¡¹ä¸è¿é¶æè</h2>
<h3><strong style="color: rgba(186, 55, 42, 1)">å®å¨éç½®æ¸åï¼</strong></h3>
<div style="margin-left: 20px">
<p>â <strong>æ°¸è¿ä¸è¦ä»¥rootèº«ä»½è¿è¡Gunicornï¼</strong> åå»ºä¸ä¸ªä¸ç¨ç³»ç»ç¨æ·ã</p>
<p>â ä½¿ç¨ç¯å¢åéç®¡çå¯é¥ãæ°æ®åºå¯ç ç­ææéç½®ï¼<strong>åå¿ç¡¬ç¼ç </strong>ã</p>
<p>â éè¿Nginxéç½®<code style="color: rgba(186, 55, 42, 1)">proxy_set_header</code>ï¼ç¡®ä¿åºç¨è½è·åå°çå®çå®¢æ·ç«¯IPï¼ç¨äºæ¥å¿åé£æ§ï¼ã</p>
<p>â è®¾ç½®åçç<code style="color: rgba(186, 55, 42, 1)">--timeout</code>ï¼å¦30ç§ï¼ï¼é²æ­¢æ¢è¯·æ±æå®ææå·¥ä½è¿ç¨ã</p>
<p>â èèä½¿ç¨<code style="color: rgba(186, 55, 42, 1)">--worker-class gevent</code>æ<code style="color: rgba(186, 55, 42, 1)">uvicorn</code>ï¼éå¯¹Asyncåºç¨å¦FastAPIï¼æ¥æåå¹¶åæ§è½ã</p>
</div>
<h3><strong>FastAPIçç¹å«è¯´æï¼</strong></h3>
<p>FastAPIæ¯å¼æ­¥æ¡æ¶ãè½ç¶å®å¼å®¹WSGIï¼ä½ä¸ºäºåæ¥å¶å¼æ­¥æ§è½ï¼æ¨èä½¿ç¨<strong>Uvicorn</strong>ï¼ä¸ä¸ªASGIæå¡å¨ï¼æ¯WSGIçå¼æ­¥æ¼è¿ï¼ä½ä¸ºå·¥ä½æå¡å¨ï¼å¹¶ç±Gunicornä½ä¸ºè¿ç¨ç®¡çå¨ã</p>
<pre class="highlighter-hljs" style="background-color: rgba(246, 248, 250, 1); padding: 15px; border-radius: 5px; overflow-x: auto"><code># å®è£
pip install uvicorn gunicorn

# ä½¿ç¨Gunicornç®¡çUvicornå·¥ä½è¿ç¨
gunicorn -w 4 -k uvicorn.workers.UvicornWorker -b 0.0.0.0:8000 main:app
# `main:app` å¯¹åºä½ çFastAPIåºç¨å®ä¾</code></pre>
<h3><strong>æ§è½è°ä¼å°è´´å£«ï¼</strong></h3>
<div style="margin-left: 20px">
<p>ð¹ <strong>çæ§æ¯è°ä¼çåæ</strong>ï¼ä½¿ç¨<code style="color: rgba(186, 55, 42, 1)">gunicorn --access-logfile -</code>æ¥çè¯·æ±æ¥å¿ï¼æéæPrometheus/Grafanaã</p>
<p>ð¹ <strong>å·¥ä½è¿ç¨æ°ï¼-wï¼</strong>ï¼ä¸æ¯è¶å¤è¶å¥½ãè¿å¤çè¿ç¨ä¼å¯¼è´åå­æ¶èå¢å åCPUä¸ä¸æåæ¢å¼éãä»å¬å¼<code style="color: rgba(186, 55, 42, 1)">(2 * CPUæ ¸å¿æ°) + 1</code>å¼å§æµè¯ã</p>
<p>ð¹ <strong>å·¥ä½æ¨¡å¼ï¼-kï¼</strong>ï¼I/Oå¯éåï¼å¦å¤§éæ°æ®åºãAPIè°ç¨ï¼åºç¨å¯å°è¯<code style="color: rgba(186, 55, 42, 1)">gevent</code>æ<code style="color: rgba(186, 55, 42, 1)">eventlet</code>ï¼CPUå¯éååç¨é»è®¤çåæ­¥å·¥ä½èã</p>
</div>
<p style="text-align: center">---<strong>åå¨æå</strong>---<br>å¸æè¿ä»½æ»ç»è½å¸®ä½ é¿å¼ä¸äºåãå¦æè§å¾æç¨ï¼ä¸å¦¨ç¹ä¸ª èµð æ æ¶èâ­ æ è®°ä¸ä¸ï¼æ¹ä¾¿éæ¶åé¡¾ãä¹æ¬¢è¿å³æ³¨æï¼åç»­ä¸ºä½ å¸¦æ¥æ´å¤ç±»ä¼¼çå®æè§£æãæä»»ä½çé®ææ³æ³ï¼æä»¬è¯è®ºåºè§ï¼ä¸èµ·äº¤æµå¼åä¸­çåç§å¿å¾ä¸é®é¢ã</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.015277777777777777" data-date-updated="2026-01-06 09:17">2026-01-06 08:55</span>&nbsp;
<a href="https://www.cnblogs.com/ymtianyu">ä¸åç¨åºåªå</a>&nbsp;
éè¯»(<span id="post_view_count">27</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19445657);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19445657', targetLink: 'https://www.cnblogs.com/ymtianyu/p/19445657', title: 'ä»æ¬å°å°äºç«¯ï¼æ·±å¥çè§£WSGIï¼è®©ä½ çPython Webåºç¨ç¨³å¥é¨ç½²' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ PHP 8.5 ç®¡éæä½ç¬¦ (|>) åå«åµå¥å½æ°å°ç±ï¼ååºæ¸æ°çæ°æ®ç®¡é ]]></title>
    <link>https://www.cnblogs.com/catchadmin/p/19445641</link>
    <guid>888d58b598c8360f016aad9ef3875d53</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/catchadmin/p/19445641" title="åå¸äº 2026-01-06 08:48">
    <span role="heading" aria-level="2">PHP 8.5 ç®¡éæä½ç¬¦ (|&gt;) åå«åµå¥å½æ°å°ç±ï¼ååºæ¸æ°çæ°æ®ç®¡é</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="php-85-ç®¡éæä½ç¬¦--åå«åµå¥å½æ°å°ç±ååºæ¸æ°çæ°æ®ç®¡é">PHP 8.5 ç®¡éæä½ç¬¦ (|&gt;) åå«åµå¥å½æ°å°ç±ï¼ååºæ¸æ°çæ°æ®ç®¡é</h1>
<p>ææ¶å¤±äºä¸éµââææçãå¹´åºå²åºå®ï¼åæè®¤çä¼æ¯äºï¼æ­ç½ãæ¾æ¢èå¥ï¼åè®¸èªå·±ææ¶ä¸æ³ä»£ç ã</p>
<p>ç°å¨æ¯ä¸æåï¼æè§è¯¥å¸¦ç¹æ°ä¸è¥¿åæ¥äºãPHP 8.5 æ¥äºï¼è½ç¶æ¹è¿ä¸å°ï¼ä½æä¸ªåè½å¯¹æ¥å¸¸å¯è¯»æ§ç¹å«çªåºï¼ç®¡éæä½ç¬¦ (<code>|&gt;</code>)ã</p>
<p>å¯ä»¥æå®æ³æ"è®©æçè½¬æ¢åå¯è¯»"æé®ãå®è®©ä½ ä»å·¦å°å³åæ°æ®å¤çæ­¥éª¤ï¼ä¸ç¨æå®ä»¬åå¨åµå¥æ¬å·éãå¦æä½ åè¿ï¼æç»§æ¿è¿ï¼<code>foo(bar(baz(trim($x))))</code> è¿ç§ä»£ç ï¼ä½ å·²ç»ç¥éä¸ºä»ä¹è¿å¾éè¦äºã</p>
<p>ä¸é¢ç¨å®éä¾å­æè§£ââå­ç¬¦ä¸²ãæ°ç»ãéè¯¯å¤çââæåç»ä¸ªç®åçéææ¸åï¼è®©ä½ è½å®å¨å°éç¨å®ã</p>
<p><a href="https://catchadmin.com/post/2026-01/php85-pipe-operator-clean-data-pipelines" target="_blank" rel="noopener nofollow">åæ PHP 8.5 ç®¡éæä½ç¬¦ (|&gt;) åå«åµå¥å½æ°å°ç±ï¼ååºæ¸æ°çæ°æ®ç®¡é</a></p>
<h2 id="æ¥å¸¸é®é¢åµå¥è°ç¨-vs-é¡ºåºæ­¥éª¤">æ¥å¸¸é®é¢ï¼åµå¥è°ç¨ vs é¡ºåºæ­¥éª¤</h2>
<p>åè¿ä¸æ®µæ¶é´ PHPï¼ä½ å¯è½è§è¿è¿ç§ä»£ç ï¼</p>
<pre><code class="language-php">$result = foo(bar(baz(trim(strtolower($input)))));
</code></pre>
<p>è½è·ãä½ä¹æ¯é£ç§è®©ä½ å¨ review æ¶åä¸æ¥ãç¯ç¼ãé»é»ä»éå¾å¤éæ°è§£ææ¬å·çä»£ç ââåå¨åèåä½æã</p>
<p>PHP å¼åèåå²ä¸æä¸¤ç§å¸¸è§å¤çæ¹å¼ï¼</p>
<ul>
<li>åµå¥å½æ°è°ç¨ï¼é¿äºå°±é¾è¯»ï¼</li>
<li>éæ­¥ä¸´æ¶åéï¼æ´æ¸æ°ï¼ä½ææ¶å°å¦ï¼</li>
</ul>
<p>PHP 8.5 å¼å¥ç¬¬ä¸ç§éæ©ï¼ç®¡éæä½ç¬¦ (<code>|&gt;</code>)ï¼è®©ä½ ä»å·¦å°å³åè½¬æ¢ï¼è·ä½ å£å¤´è§£éé»è¾çæ¹å¼ä¸æ ·ã</p>
<p>ä¸åæ¯"åè¾å¥ï¼å°åï¼trimï¼éªè¯â¦â¦"åå¨æ¬å·éï¼ä½ å¯ä»¥åï¼</p>
<pre><code class="language-php">$email = $input
    |&gt; trim(...)
    |&gt; strtolower(...)
    |&gt; (fn ($v) =&gt; /* validate */ $v);
</code></pre>
<p>è¿ç¯æç« æ¯ç®¡éæä½ç¬¦çå®ææç¨ââä¸ä¼æä½ çä»£ç åºåææ¶é«¦ä½é¾è¯»ç"å½æ°å¼æ±¤"ã</p>
<p>æ¦æ¬å°è¯´ï¼ç®¡éæä½ç¬¦æå·¦è¾¹çå¼ä¼ ç»å³è¾¹çååæ° callableï¼äº§åº callable çè¿åå¼ã</p>
<h2 id="æ ¸å¿æ¦å¿µæåä¸ä¸ªç»æåç»ä¸ä¸ä¸ª-callable">æ ¸å¿æ¦å¿µï¼æåä¸ä¸ªç»æåç»ä¸ä¸ä¸ª callable</h2>
<p>PHP 8.5 éï¼ç®¡éæä½ç¬¦è¿æ ·æ±å¼ï¼</p>
<pre><code class="language-php">$result = $value |&gt; someCallable(...);
</code></pre>
<p>é»è¾ä¸ç­äºï¼</p>
<pre><code class="language-php">$result = someCallable($value);
</code></pre>
<p>é¾å¼è°ç¨ææ¯å®æç¨çå°æ¹ï¼</p>
<pre><code class="language-php">$result = $value
    |&gt; firstStep(...)
    |&gt; secondStep(...)
    |&gt; thirdStep(...);
</code></pre>
<p>æ¯ä¸ªé¶æ®µæ¥æ¶ä¸ä¸é¶æ®µçè¾åºã</p>
<h3 id="å³è¾¹ä»ä¹ç®-callable">å³è¾¹ä»ä¹ç® callableï¼</h3>
<p>å³è¾¹å¯ä»¥æ¯ä»»ä½æ¥åä¸ä¸ªåæ°ç callableï¼åæ¬ï¼</p>
<ul>
<li>ä¸ç­å¬æ° callable å¦ <code>trim(...)</code>ã<code>strlen(...)</code></li>
<li>é­å/ç®­å¤´å½æ°å¦ <code>(fn ($x) =&gt; ...)</code></li>
<li>å¯è°ç¨å¯¹è±¡ï¼<code>__invoke()</code>ï¼</li>
<li>å®ä¾æ¹æ³ callable å¦ <code>$obj-&gt;method(...)</code></li>
<li>éææ¹æ³ callable å¦ <code>ClassName::method(...)</code></li>
</ul>
<p>å³é®è§åï¼ä¸ä¸ªè¾å¥å¼æµè¿å»ã</p>
<p>PHP æåæç¡®æåºå³è¾¹ç callable å¿é¡»æ¥ååä¸ªåæ°ï¼å¤äºä¸ä¸ªå¿éåæ°çå½æ°ç´æ¥ç¨ä¸äºã</p>
<p>è¿ä¸ªè§åå³å®äºä½ å®éæä¹åç®¡éãåé¢ä¼çå°å¤ç"å¤åæ°"å½æ°çæ¨¡å¼ã</p>
<h2 id="åºç¡ç®¡éå­ç¬¦ä¸²--trim--å°å--éªè¯">åºç¡ç®¡éï¼å­ç¬¦ä¸² â trim â å°å â éªè¯</h2>
<p>æ¥æå»ºä¸ä¸ªè½ç´æ¥æ¾è¿é¡¹ç®çä¸è¥¿ï¼ä¸ä¸ªå°çé®ç®±è§èåç®¡éï¼åæ¶éªè¯å¹¶å¨å¤±è´¥æ¶æ¥éã</p>
<h3 id="è§èå">è§èå</h3>
<pre><code class="language-php">&lt;?php
declare(strict_types=1);
$rawEmail = "  Alice.Example+promo@GMAIL.com  ";
$normalized = $rawEmail
    |&gt; trim(...)
    |&gt; strtolower(...);
echo $normalized;
// "alice.example+promo@gmail.com"
</code></pre>
<p>ç®åçèµ·æ¥åæ¹æ³é¾ââä½å®ä½ç¨äºæ®éå­ç¬¦ä¸²ï¼ä¸æ¯å¯¹è±¡ã</p>
<h3 id="éªè¯æ ææ¶åæ­¢ç®¡é">éªè¯ï¼æ ææ¶åæ­¢ç®¡éï¼</h3>
<p><code>filter_var()</code> æ¯ä¸ªå¥½ä¾å­ï¼å ä¸ºéªè¯ä¸åªæ¯å¦ä¸ä¸ª"è½¬æ¢"ãå®å¯è½å¤±è´¥ã</p>
<p>èä¸ <code>filter_var($value, FILTER_VALIDATE_EMAIL)</code> éè¦ç¬¬äºä¸ªåæ°æææä¹ãç®¡éåªä¼ ä¸ä¸ªåæ°ï¼æä»¥è¦åè£ä¸ä¸ã</p>
<pre><code class="language-php">&lt;?php
declare(strict_types=1);
function validateEmail(string $email): string
{
    // filter_var è¿åè¿æ»¤åçå¼æ false
    $validated = filter_var($email, FILTER_VALIDATE_EMAIL);
    if ($validated === false) {
        throw new InvalidArgumentException("Invalid email: {$email}");
    }
    return $validated;
}
$rawEmail = "  alice@example.com  ";
$email = $rawEmail
    |&gt; trim(...)
    |&gt; strtolower(...)
    |&gt; validateEmail(...);
echo $email;
</code></pre>
<p>è¯»èµ·æ¥å¾é¡ºï¼trim â å°å â éªè¯ã</p>
<h3 id="åè¡éªè¯é¶æ®µthrow-ä½ä¸ºè¡¨è¾¾å¼">åè¡éªè¯é¶æ®µï¼throw ä½ä¸ºè¡¨è¾¾å¼ï¼</h3>
<p>å¦æä½ åæ¬¢æ´ç´§åçç®¡éï¼PHP ç <code>throw</code> æ¯è¡¨è¾¾å¼ï¼PHP 8.0 èµ·ï¼ï¼å¯ä»¥è¿æ ·ï¼</p>
<pre><code class="language-php">&lt;?php
declare(strict_types=1);
$rawEmail = "  alice@example.com  ";
$email = $rawEmail
    |&gt; trim(...)
    |&gt; strtolower(...)
    |&gt; (fn (string $v) =&gt; filter_var($v, FILTER_VALIDATE_EMAIL)
        ?: throw new InvalidArgumentException("Invalid email: {$v}")
    );
echo $email;
</code></pre>
<p>ä¸ä¸ªå°ä½éè¦çè¯­æ³æ³¨æç¹ï¼</p>
<p>å¨ <code>|&gt;</code> å³è¾¹ç¨ç®­å¤´å½æ°æ¶ï¼å¿é¡»ç¨æ¬å·åèµ·æ¥ï¼é¿åè§£ææ­§ä¹ã</p>
<p>æä»¥è¿æ¯å¿é¡»çï¼</p>
<pre><code class="language-php">$value |&gt; (fn ($x) =&gt; doSomething($x));
</code></pre>
<p>ä¸æ¯ï¼</p>
<pre><code class="language-php">// â è¿ä¼è§£æå¤±è´¥
$value |&gt; fn ($x) =&gt; doSomething($x);
</code></pre>
<h3 id="è®©å®çå®è§èå-gmail-å°å">è®©å®"çå®"ï¼è§èå Gmail å°å</h3>
<p>å ä¸ªå®éçè½¬æ¢ï¼å¯¹äº Gmail å°åï¼æ¬å°é¨åçç¹è¢«å¿½ç¥ï¼<code>+tag</code> ä¹è¢«å¿½ç¥ãå¾å¤ç³»ç»ä¼è§èåè¿äºã</p>
<pre><code class="language-php">&lt;?php
declare(strict_types=1);
function canonicalizeGmail(string $email): string
{
    [$local, $domain] = explode('@', $email, 2);
    if ($domain !== 'gmail.com' &amp;&amp; $domain !== 'googlemail.com') {
        return $email;
    }
    // ç§»é¤ plus tag
    $local = explode('+', $local, 2)[0];
    // ç§»é¤ç¹
    $local = str_replace('.', '', $local);
    return $local . '@gmail.com';
}
$rawEmail = "  Alice.Example+promo@GMAIL.com  ";
$email = $rawEmail
    |&gt; trim(...)
    |&gt; strtolower(...)
    |&gt; (fn (string $v) =&gt; filter_var($v, FILTER_VALIDATE_EMAIL)
        ?: throw new InvalidArgumentException("Invalid email: {$v}")
    )
    |&gt; canonicalizeGmail(...);
echo $email;
// "aliceexample@gmail.com"
</code></pre>
<p>è¿å°±æ¯ <code>|&gt;</code> å¼å§ååçå°æ¹ï¼å æ­¥éª¤æ¶ç®¡éä¿æå¯è¯»ã</p>
<h2 id="æ°ç»åéåçç®¡émap--filter--reduceçå®ç¨ä¾">æ°ç»åéåçç®¡éï¼map / filter / reduceï¼çå®ç¨ä¾ï¼</h2>
<p>å­ç¬¦ä¸²ç®åãæ°ç»æ¯å¾å¤ PHP ä»£ç åºå¼å§åä¹±çå°æ¹ââå ä¸ºæ ååºå¾å¼ºå¤§ï¼ä½å½æ°ç­¾åç»å¸¸ä¸å¤ªéåç®¡éåã</p>
<p>æ¥ä¸ªå¸¸è§ä»»å¡ï¼å¤çåå§è®¢åæ°æ®ï¼è®¡ç®"å·²æ¯ä»"è®¢åçæ¶å¥ã</p>
<p>åè®¾ä½ è¯»äº JSONï¼å¾å°è¿æ ·çæ°ç»ï¼</p>
<pre><code class="language-php">$orders = [
    ['id' =&gt; 1, 'status' =&gt; 'paid',   'total' =&gt; 120.50],
    ['id' =&gt; 2, 'status' =&gt; 'failed', 'total' =&gt;  80.00],
    ['id' =&gt; 3, 'status' =&gt; 'paid',   'total' =&gt;  42.25],
];
</code></pre>
<p>ç®æ ï¼ç¨æ¸æ°çç®¡éæ±å·²æ¯ä»è®¢åç total ä¹åã</p>
<h3 id="ä¿æç®¡éå¹²åçè¾å©å½æ°">ä¿æç®¡éå¹²åçè¾å©å½æ°</h3>
<p><code>array_filter</code>ã<code>array_map</code> å <code>array_reduce</code> å¾å¥½ç¨ï¼ä½ä¸åè£ä¸ä¸æ²¡æ³å¹²åå°æ¥ååä¸ª"ç®¡éå¼"ã</p>
<p>ä¸ä¸ªå®ç¨æ¨¡å¼æ¯åå»ºå°è¾å©å½æ°ï¼è¿åååæ° callableã</p>
<pre><code class="language-php">&lt;?php
declare(strict_types=1);
function map(callable $fn): Closure
{
    return fn (array $items): array =&gt; array_map($fn, $items);
}
function filter(callable $fn): Closure
{
    return fn (array $items): array =&gt; array_filter($items, $fn);
}
function reduce(callable $fn, mixed $initial): Closure
{
    return fn (array $items): mixed =&gt; array_reduce($items, $fn, $initial);
}
</code></pre>
<p>ç°å¨å¯ä»¥é¡ºçå°ç®¡éæ°ç»äºã</p>
<h3 id="å·²æ¯ä»æ¶å¥ç®¡é">å·²æ¯ä»æ¶å¥ç®¡é</h3>
<pre><code class="language-php">&lt;?php
declare(strict_types=1);
$orders = [
    ['id' =&gt; 1, 'status' =&gt; 'paid',   'total' =&gt; 120.50],
    ['id' =&gt; 2, 'status' =&gt; 'failed', 'total' =&gt;  80.00],
    ['id' =&gt; 3, 'status' =&gt; 'paid',   'total' =&gt;  42.25],
];
$paidRevenue = $orders
    |&gt; filter(fn (array $o) =&gt; $o['status'] === 'paid')
    |&gt; map(fn (array $o) =&gt; (float) $o['total'])
    |&gt; reduce(fn (float $sum, float $t) =&gt; $sum + $t, 0.0);
echo $paidRevenue; // 162.75
</code></pre>
<p>åè±è¯­ä¸æ ·è¯»ï¼</p>
<ul>
<li>è¿æ»¤å·²æ¯ä»è®¢å</li>
<li>æ å°å° total</li>
<li>å½çº¦ææ»å</li>
</ul>
<h3 id="ç¨å¾®ä¸°å¯ççå®ä¾å­csv-é£æ ¼çè¡è½¬å¹²åè®°å½">ç¨å¾®ä¸°å¯ççå®ä¾å­ï¼CSV é£æ ¼çè¡è½¬å¹²åè®°å½</h3>
<p>åè®¾ä½ æä¸ç»è¡ï¼</p>
<pre><code class="language-php">$lines = [
    " alice@example.com , paid ",
    " bob@invalid-domain , paid ",
    " charlie@example.com , failed ",
    "  dora@example.com, paid ",
];
</code></pre>
<p>ç®æ ï¼</p>
<ul>
<li>è§£ææ <code>[email, status]</code></li>
<li>è§èåé®ç®±</li>
<li>éªè¯é®ç®±ï¼ä¸¢å¼æ æçï¼</li>
<li>åªä¿çå·²æ¯ä»</li>
<li>è¿åè§èåé®ç®±åè¡¨</li>
</ul>
<pre><code class="language-php">&lt;?php
declare(strict_types=1);
function normalizeEmail(string $email): string
{
    return trim(strtolower($email));
}

function isValidEmail(string $email): bool
{
    return filter_var($email, FILTER_VALIDATE_EMAIL) !== false;
}

$lines = [
    " alice@example.com , paid ",
    " bob@invalid-domain , paid ",
    " charlie@example.com , failed ",
    "  dora@example.com, paid ",
];

$paidEmails = $lines
    |&gt; map(fn (string $line) =&gt; array_map('trim', explode(',', $line)))
    |&gt; map(fn (array $parts) =&gt; ['email' =&gt; normalizeEmail($parts[0]), 'status' =&gt; $parts[1]])
    |&gt; filter(fn (array $r) =&gt; isValidEmail($r['email']))
    |&gt; filter(fn (array $r) =&gt; $r['status'] === 'paid')
    |&gt; map(fn (array $r) =&gt; $r['email'])
    |&gt; (fn (array $arr) =&gt; array_values($arr));

print_r($paidEmails);
// ['alice@example.com', 'dora@example.com']
</code></pre>
<p>æ³¨æï¼</p>
<ul>
<li>æ¯ä¸ªé¶æ®µæ¯ä¸ä¸ªè½¬æ¢</li>
<li>éªè¯å¨ç®¡ééï¼ä½ä¸ç¨ <code>normalizeEmail(...)</code> å ä¸ºå®å¯è½æå¼å¸¸</li>
<li><code>array_filter</code> ä¿çé®ï¼æä»¥æå <code>array_values()</code> æ¯å¸¸è§çæ¸çæ­¥éª¤</li>
</ul>
<p>è¿ç§è½¬æ¢ç®¡éå°±æ¯ <code>|&gt;</code> åæ¥ä»·å¼çå°æ¹ã</p>
<h2 id="ç®¡é--éè¯¯å¤çtrycatch-vs-å®å«å­å¥">ç®¡é + éè¯¯å¤çï¼try/catch vs å®å«å­å¥</h2>
<p>ç®¡éæ¯è¡¨è¾¾å¼ãéè¯¯å¤çæ¯å¾å¤å¢éè¦ä¹åæ¬¢è¦ä¹è®¨åè¿ç§é£æ ¼çå°æ¹ã</p>
<p>æä¸¤ç§å¥åº·çæ¹å¼ï¼</p>
<h3 id="éé¡¹-aç®¡éå¤çå®å«å­å¥æ èä½å¾æ¸æ°">éé¡¹ Aï¼ç®¡éå¤çå®å«å­å¥ï¼æ èä½å¾æ¸æ°ï¼</h3>
<p>è¿æ¯"å«èèªæ"çæ¹å¼ï¼</p>
<pre><code class="language-php">&lt;?php
declare(strict_types=1);
$email = $rawEmail
    |&gt; trim(...)
    |&gt; strtolower(...);
if ($email === '') {
    throw new InvalidArgumentException('Email is required.');
}
if (filter_var($email, FILTER_VALIDATE_EMAIL) === false) {
    throw new InvalidArgumentException('Email is invalid.');
}
</code></pre>
<p>ä¼ç¹ï¼</p>
<ul>
<li>éå¸¸æç¡®</li>
<li>å®¹æè°è¯</li>
<li>é­åéæ²¡æå¼å¸¸æå·§</li>
</ul>
<p>ç¼ºç¹ï¼</p>
<ul>
<li>"æäº"è¢«ææç®¡é + åç¬çéªè¯å</li>
</ul>
<h3 id="éé¡¹-bç®¡ééæå¼å¸¸å¤é¢-catchéåå¨ææå¨æ ">éé¡¹ Bï¼ç®¡ééæå¼å¸¸ï¼å¤é¢ catchï¼éå"å¨ææå¨æ "ï¼</h3>
<p>å½ç®¡éé»è¾ä¸æ¯ä¸ä¸ªæä½ââ"è§£æå¹¶è§èåè¿ä¸ªè¾å¥ï¼å¦åå¤±è´¥"ââæ´ä¸ªåèµ·æ¥å¯ä»¥å¾å¹²åï¼</p>
<pre><code class="language-php">&lt;?php
declare(strict_types=1);
try {
    $email = $rawEmail
        |&gt; trim(...)
        |&gt; strtolower(...)
        |&gt; (fn (string $v) =&gt; $v !== ''
            ? $v
            : throw new InvalidArgumentException('Email is required.')
        )
        |&gt; (fn (string $v) =&gt; filter_var($v, FILTER_VALIDATE_EMAIL)
            ?: throw new InvalidArgumentException('Email is invalid.')
        );
    // ä½¿ç¨ $email
} catch (InvalidArgumentException $e) {
    // å¤çéªè¯éè¯¯
}
</code></pre>
<p>ä¼ç¹ï¼</p>
<ul>
<li>ç®¡éè¯»èµ·æ¥ååä¸ª"äºå¡"</li>
<li>éåè¯·æ±è§£æ/DTO æå»º</li>
</ul>
<p>ç¼ºç¹ï¼</p>
<ul>
<li>è¿åº¦ä½¿ç¨ä¼è®©äººè§å¾å¼å¸¸è¢«å½ä½æ§å¶æµ</li>
</ul>
<h3 id="è°è¯åå¥½çæ¨¡å¼inspectç®¡éçtap">è°è¯åå¥½çæ¨¡å¼ï¼inspect()ï¼ç®¡éç"tap"ï¼</h3>
<p>ç®¡éä»£ç çä¸ä¸ªæ¹è¯æ¯"ä¸­é´å¼æ´é¾è°è¯"ã</p>
<p>ä½ å¯ä»¥æå¥ä¸ä¸ªé¶æ®µæ¥è®°å½å¹¶åæ ·è¿åå¼ï¼ä¸ç¨æ¾å¼ç®¡éã</p>
<pre><code class="language-php">&lt;?php
declare(strict_types=1);
function inspect(callable $fn): Closure
{
    return function (mixed $value) use ($fn) {
        $fn($value);
        return $value;
    };
}
$result = $rawEmail
    |&gt; trim(...)
    |&gt; inspect(fn ($v) =&gt; error_log("After trim: " . $v))
    |&gt; strtolower(...)
    |&gt; inspect(fn ($v) =&gt; error_log("After lower: " . $v));
</code></pre>
<p>è¿ä¿æäºä»å·¦å°å³çæµï¼åæ¶è®©ä¸­é´ç¶æå¨è°è¯æ¶å¯è§ã</p>
<h2 id="ä¸å½æ°åæ¹æ³çäºæä½ååºä¿æå¯è¯»çç®¡é">ä¸å½æ°åæ¹æ³çäºæä½ï¼ååºä¿æå¯è¯»çç®¡é</h2>
<p>ç®¡éæä½ç¬¦å¾ç®åï¼èºæ¯å¨äºç¨å®èä¸è®©ä»£ç çèµ·æ¥åèªæçè°é¢ã</p>
<h3 id="ç­¾åå¹éæ¶ä¼åç¨ä¸ç­å¬æ°-callable">ç­¾åå¹éæ¶ä¼åç¨ä¸ç­å¬æ° callable</h3>
<p>å¦æå½æ°å·²ç»æ¥ååä¸ªå¿éåæ°ï¼è¿æ¯æå¹²åçå½¢å¼ï¼</p>
<pre><code class="language-php">$value |&gt; trim(...) |&gt; strtolower(...);
</code></pre>
<p>å ä¸º <code>trim(...)</code> æ¯ callable å¼ç¨ï¼ä¸æ¯è°ç¨ãå®æ¯"ä¸ä¸ªä½ å¯ä»¥ä¼ éçå½æ°"ã</p>
<h3 id="ç¨å½åå½æ°è¡¨è¾¾ä¸å¡å«ä¹">ç¨å½åå½æ°è¡¨è¾¾"ä¸å¡å«ä¹"</h3>
<p>å¦æä¸ä¸ªé¶æ®µä¸ææ¾ï¼ç»å®èµ·ä¸ªåå­ã</p>
<p>ä¸è¦ï¼</p>
<pre><code class="language-php">$data |&gt; (fn ($x) =&gt; /* 12 è¡é»è¾ */);
</code></pre>
<p>è¦ï¼</p>
<pre><code class="language-php">$data |&gt; normalizeCustomerPayload(...);
</code></pre>
<p>ç®¡éåºè¯¥è¯»èµ·æ¥åé«å±èæ¬ã</p>
<h3 id="ç®¡éå°æ¹æ³å®ä¾åéæ">ç®¡éå°æ¹æ³ï¼å®ä¾åéæï¼</h3>
<p>å¦æä½ æä¸ª mapper å¯¹è±¡ï¼</p>
<pre><code class="language-php">&lt;?php
declare(strict_types=1);
final class UserMapper
{
    public function toDto(array $row): UserDto
    {
        // ...
    }
}
$mapper = new UserMapper();
$dto = $row
    |&gt; $mapper-&gt;toDto(...);
</code></pre>
<p>æéææ¹æ³ï¼</p>
<pre><code class="language-php">$dto = $row |&gt; UserMapper::fromRow(...);
</code></pre>
<h3 id="å¤çéè¦é¢å¤åæ°çå½æ°">å¤çéè¦é¢å¤åæ°çå½æ°</h3>
<p>è®°ä½ï¼ç®¡éä¼ ä¸ä¸ªåæ°ãå¾å¤ PHP æ åå½æ°è¦æ´å¤ã</p>
<p>ä¾å­ï¼<code>explode('.', $value)</code> éè¦ä¸¤ä¸ªå¿éåæ°ï¼æä»¥ä¸è½è¿æ ·ï¼</p>
<pre><code class="language-php">// â explode éè¦ 2 ä¸ªåæ°ï¼è¿ç´æ¥ä¸è¡
$parts = $domain |&gt; explode(...);
</code></pre>
<p>åè£ä¸ä¸ï¼</p>
<pre><code class="language-php">$parts = $domain |&gt; (fn (string $v) =&gt; explode('.', $v));
</code></pre>
<p>æèï¼å¦æä½ åæ¬¢ï¼åå»ºä¸ä¸ªå°è¾å©å½æ°æ¥"é¢éç½®"å½æ°ï¼</p>
<pre><code class="language-php">function explodeBy(string $delimiter): Closure
{
    return fn (string $value): array =&gt; explode($delimiter, $value);
}

$parts = $domain |&gt; explodeBy('.');
</code></pre>
<p>è¿ç§"éç½®å¥½ç callable"æ¹å¼å¨çå®ä»£ç éæ©å±æ§å¾å¥½ã</p>
<h3 id="æä½ç¬¦ä¼åçº§é·é±ç¨æ¬å·ä¿ææ è">æä½ç¬¦ä¼åçº§é·é±ï¼ç¨æ¬å·ä¿ææ èï¼</h3>
<p>RFC åæåæåº <code>|&gt;</code> æå®ä¹çä¼åçº§ä¸æ¯å·¦ç»åçãå®éä¸ï¼è· <code>??</code>ãä¸åè¿ç®ç¬¦ææ´å¤æçè¡¨è¾¾å¼æ··ç¨æ¶åºè¯¥ç¨æ¬å·ï¼é¤éææ¾å®å¨ã</p>
<p>ä¾å­ï¼åé callableï¼åç®¡éè¿å»ï¼</p>
<pre><code class="language-php">$fn = $flag ? enabledFunc(...) : disabledFunc(...);
$result = $value |&gt; $fn;
</code></pre>
<p>å¦æä½ åæåèï¼ç¨æ¬å·ï¼</p>
<pre><code class="language-php">$result = $value |&gt; ($flag ? enabledFunc(...) : disabledFunc(...));
</code></pre>
<h3 id="å¦ä¸ä¸ªå°éè¾¹ç¼å¼ç¨ä¼ éç-callable-ä¸åè®¸">å¦ä¸ä¸ªå°éè¾¹ç¼ï¼å¼ç¨ä¼ éç callable ä¸åè®¸</h3>
<p>æäº PHP å½æ°æå¼ç¨æ¥ååæ°ãç®¡éæä½ç¬¦ä¸åè®¸ç®¡éå°éè¦å¼ç¨ä¼ éåæ°ç callableã</p>
<p>å¤§å¤æ°æ¥å¸¸ç®¡éä¸éè¦å¼ç¨ââä½ç¥éä¸ºä»ä¹æäºå½æ°å¨ç®¡ééä¸å·¥ä½æ¯å¥½çã</p>
<h2 id="ä»ä¹æ¶åä¸è¯¥ç¨-æ¯çè¿æ¯çäº">ä»ä¹æ¶åä¸è¯¥ç¨ |&gt;ï¼æ¯çï¼è¿æ¯çäºï¼</h2>
<p>ç®¡éæä½ç¬¦æ¯å·¥å·ï¼ä¸æ¯å®æãè¿äºæåµéå¸¸æ¯éè¯¯éæ©ã</p>
<h3 id="éè¦å¤§éåæ¯é»è¾æ¶">éè¦å¤§éåæ¯é»è¾æ¶</h3>
<p>å¦æä½ çè½¬æ¢æå¤ä¸ªæåéåºãå¤ææ¡ä»¶ååµå¥å¾ªç¯ï¼ç®¡éä¼åå¾åå¼ºã</p>
<p>å¹²åç if/else åéå¸¸æ¯æææä¸è¥¿å¡è¿é­åå¥½ã</p>
<h3 id="å¯ä½ç¨æ¯ä¸»è¦ç®çæ¶">å¯ä½ç¨æ¯ä¸»è¦ç®çæ¶</h3>
<p>ç®¡éå¨æ¯ä¸ªé¶æ®µæ¯çº¯è½¬æ¢æ¶æå¥½ï¼è¾å¥ â è¾åºã</p>
<p>å¦æç®çæ¯"åé®ä»¶"ã"åæ°æ®åº"ã"åå¸äºä»¶"ï¼ä½ ä»ç¶å¯ä»¥ç®¡éï¼ä½å®¹æå¨é¾ééèéè¦å¯ä½ç¨ï¼è®©æµç¨æ´é¾çè§£ã</p>
<p>å¦æç¡®å®éè¦å¯ä½ç¨ï¼ä¼åç¨æç¡®ç <code>inspect()</code> é¶æ®µï¼è®©åççäºææ¸æ°ã</p>
<h3 id="ç®¡éåæé­åæ±¤æ¶">ç®¡éåæ"é­åæ±¤"æ¶</h3>
<p>å¦ææ¯éä¸ä¸ªé¶æ®µæ¯ï¼</p>
<pre><code class="language-php">|&gt; (fn ($x) =&gt; someFunc($x, $a, $b, $c))
</code></pre>
<p>ä½ å¯è½å¨è· PHP çå½æ°ç­¾åè¾å²å¤ªå¤ã</p>
<p>è¿æ¶åï¼</p>
<ul>
<li>æåå½åè¾å©å½æ°</li>
<li>æç¨ç´æ¥çé¡ºåºä»£ç </li>
</ul>
<h3 id="è°è¯æ¯ä¸»è¦æ´»å¨æ¶">è°è¯æ¯ä¸»è¦æ´»å¨æ¶</h3>
<p>ç®¡éå¯ä»¥è°è¯ï¼ä½å¦æä½ å¨äºæååºçç­å¾ªç¯éï¼ä¸´æ¶åéä»ç¶æ¯ä½ çæåã</p>
<p>å¯è¯»ä»£ç æ¯ä½ è½å¿«éææ¡©åæ£æ¥çä»£ç ã</p>
<h3 id="é¾å¤ªé¿æ¶">é¾å¤ªé¿æ¶</h3>
<p>ç»éªæ³åï¼å¦æç®¡éè¶è¿ 6-10 ä¸ªé¶æ®µï¼èèæé¶æ®µåç»æå½åå½æ°ã</p>
<p>ä¸è¦ï¼</p>
<pre><code class="language-php">$payload
    |&gt; step1(...)
    |&gt; step2(...)
    |&gt; step3(...)
    |&gt; step4(...)
    |&gt; step5(...)
    |&gt; step6(...)
    |&gt; step7(...);
</code></pre>
<p>è¦ï¼</p>
<pre><code class="language-php">$payload
    |&gt; normalizePayload(...)
    |&gt; validatePayload(...)
    |&gt; buildDto(...);
</code></pre>
<h2 id="éææ¸åå®å¨å°ä»åµå¥è°ç¨è¿ç§»å°ç®¡é">éææ¸åï¼å®å¨å°ä»åµå¥è°ç¨è¿ç§»å°ç®¡é</h2>
<p>å¦æä½ æ³å¨ç°æä»£ç åºå¼å¥ <code>|&gt;</code>ï¼è¿æ¯ä¸ªå®ç¨æ¹æ³ï¼ä¸ä¼æåä¸è¥¿ææ¹æ¼å¢éã</p>
<h3 id="ä»ææµè¯è¦ççè½¬æ¢å¼å§">ä»ææµè¯è¦ççè½¬æ¢å¼å§</h3>
<p>éä¸ä¸ªå½æ°ï¼</p>
<ul>
<li>ææ¸æ°çè¾å¥/è¾åº</li>
<li>ä¸ä¿®æ¹å¨å±ç¶æ</li>
<li>æååæéææµè¯è¦ç</li>
</ul>
<p>é»è¾å·²ç»ç¨³å®æ¶ç®¡éæå®¹æï¼ä¹æå®å¨ï¼ã</p>
<h3 id="åæåµå¥è°ç¨è½¬æé¡ºåºæ­¥éª¤å¯éä½ææ">åæåµå¥è°ç¨è½¬æé¡ºåºæ­¥éª¤ï¼å¯éä½ææï¼</h3>
<p>å¦æä½ ä»è¿å¼å§ï¼</p>
<pre><code class="language-php">$out = c(b(a($in)));
</code></pre>
<p>æ¹åæï¼</p>
<pre><code class="language-php">$tmp = $in;
$tmp = a($tmp);
$tmp = b($tmp);
$out = c($tmp);
</code></pre>
<p>è¿è®©é»è¾é¶æ®µæç¡®ãç¶åç®¡éåï¼</p>
<pre><code class="language-php">$out = $in
    |&gt; a(...)
    |&gt; b(...)
    |&gt; c(...);
</code></pre>
<h3 id="ç¨å°çå¯éç½®-callableè¾å©å½æ°å¤çå¤åæ°å½æ°">ç¨å°ç"å¯éç½® callable"è¾å©å½æ°å¤çå¤åæ°å½æ°</h3>
<p>ä¸è¦å°å¤æåè£é­åï¼éä¸­æ¨¡å¼å¦ï¼</p>
<pre><code class="language-php">function withDelimiter(string $d): Closure
{
    return fn (string $v): array =&gt; explode($d, $v);
}
</code></pre>
<p>è¿è®©ç®¡éä¿æå¹²åä¸è´ã</p>
<h3 id="ä¿æéªè¯è¯­ä¹ä¸è´">ä¿æéªè¯è¯­ä¹ä¸è´</h3>
<p>å¦æä½ çæ§ä»£ç å¤±è´¥æ¶è¿å nullï¼ä¸è¦å¨ç®¡ééæææ¢ææå¼å¸¸ï¼é¤éä½ åå¤å¥½æ´æ°è°ç¨ä»£ç ã</p>
<p>æç¡®ç®¡éæ¯ï¼</p>
<ul>
<li>è¿åç»ææ null</li>
<li>è¿åç»ææ false</li>
<li>æ æè¾å¥æ¶æå¼å¸¸</li>
</ul>
<p>ç®¡éå¯ä»¥è¡¨è¾¾ä»»ä½è¿äºé£æ ¼ââä½éæºæ··ç¨è®©ä»£ç æ´é¾çè§£ã</p>
<h3 id="éç¨ä¸ç§æ ¼å¼é£æ ¼å¹¶åæ">éç¨ä¸ç§æ ¼å¼é£æ ¼å¹¶åæ</h3>
<p>å¯è¯»çç®¡ééå¸¸è¿æ ·ï¼</p>
<pre><code class="language-php">$result = $value
    |&gt; step1(...)
    |&gt; step2(...)
    |&gt; (fn ($x) =&gt; step3($x))
    |&gt; step4(...);
</code></pre>
<p>å¸¸è§åæ³ï¼</p>
<ul>
<li>æ¯è¡ä¸ä¸ªé¶æ®µ</li>
<li>å¯¹é½ç®¡éç¬¦</li>
<li>é­åä¿æç­</li>
<li>é¿é­åæåæå½åå½æ°</li>
</ul>
<h3 id="å æ£æ¥ç¹è°è¯ç¶åç§»é¤">å "æ£æ¥ç¹"è°è¯ï¼ç¶åç§»é¤</h3>
<p>éææé´ï¼æå¥ <code>inspect()</code> é¶æ®µéªè¯ä¸­é´å¼ãä¸åæ£æ¥éè¿åï¼ç§»é¤æéçº§ææ­£å¼æ¥å¿ã</p>
<h3 id="ç¨ä»£ç å®¡æ¥å¼ºå¶ç®¡éç¨äºè½¬æ¢ä¸æ¯ç¨äºä¸å">ç¨ä»£ç å®¡æ¥å¼ºå¶"ç®¡éç¨äºè½¬æ¢ï¼ä¸æ¯ç¨äºä¸å"</h3>
<p>ç®¡éæä½ç¬¦å¯ä»¥æé«å¯è¯»æ§ãä¹å¯ä»¥åæéèå¤ææ§çæ¶å°å£°æã</p>
<p>ä¸ä¸ªç®åçå®¡æ¥æåæå¸®å©ï¼</p>
<ul>
<li>ç¨ <code>|&gt;</code> åè½¬æ¢ç®¡é</li>
<li>é¿å <code>|&gt;</code> åå¤æåæ¯æå¯ä½ç¨å¯éçåºå</li>
<li>ä¼åå½åå½æ°èä¸æ¯é¿åèé­å</li>
</ul>
<h2 id="ç»è®º-æå¥½ç¨å¨è¯»èµ·æ¥åæäºçæ¶å">ç»è®ºï¼|&gt; æå¥½ç¨å¨è¯»èµ·æ¥åæäºçæ¶å</h2>
<p>PHP 8.5 çç®¡éæä½ç¬¦ä¸æ¯æ¿ä»£ç»å¸ PHP é£æ ¼ââå®æ¯è¡¥åã</p>
<p>ç¨å®å½ä½ æ³ï¼</p>
<ul>
<li>æè½¬æ¢è¡¨è¾¾æä»å·¦å°å³çæµ</li>
<li>åå°åµå¥æ¬å·</li>
<li>è®©"æ°æ®æäº"å¨ä»£ç éå¯è§</li>
</ul>
<p>é¿åå®å½å®åæï¼</p>
<ul>
<li>éèçå¯ä½ç¨</li>
<li>å¯éçé­åé¾</li>
<li>ä¼ªè£æä¼éçå¤æåæ¯</li>
</ul>
<p>å¦æä½ ä¿æç®¡éèç¦ï¼ç»ææä¹çæ­¥éª¤å½åï¼æè°è¯/éªè¯å½ä½ä¸ç­å¬æ°ï¼<code>|&gt;</code> è½è®© PHP ä»£ç æè§ææ¾æ´ç°ä»£ââä¸çºç²å¢ééè¦çå®ç¨ãå¯è¯»é£æ ¼ã</p>
<h2 id="åè">åè</h2>
<ul>
<li>PHP æåï¼"å½æ°å¼æä½ç¬¦"ï¼ç®¡éæä½ç¬¦ <code>|&gt;</code>ï¼callable çº¦æï¼ç®­å¤´å½æ°æ¬å·è¦æ±ï¼</li>
<li>PHP RFCï¼"Pipe Operator v3"ï¼è®¾è®¡ãä¼åçº§è¯´æãå¼ç¨éå¶ãæ§è½è¯´æï¼</li>
</ul>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-06 08:48">2026-01-06 08:48</span>&nbsp;
<a href="https://www.cnblogs.com/catchadmin">JaguarJack</a>&nbsp;
éè¯»(<span id="post_view_count">5</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19445641);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19445641', targetLink: 'https://www.cnblogs.com/catchadmin/p/19445641', title: 'PHP 8.5 ç®¡éæä½ç¬¦ (|&amp;gt;) åå«åµå¥å½æ°å°ç±ï¼ååºæ¸æ°çæ°æ®ç®¡é' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ å« AI åççé¢å¤ªä¸ï¼è£ä¸è¿ä¸ªå¼æºæä»¶ï¼ç§åèµæ·±è®¾è®¡å¸ ]]></title>
    <link>https://www.cnblogs.com/xueweihan/p/19445015</link>
    <guid>ae2c3f3f04a80ef8f02b4a2c76b5ebca</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xueweihan/p/19445015" title="åå¸äº 2026-01-06 08:25">
    <span role="heading" aria-level="2">å« AI åççé¢å¤ªä¸ï¼è£ä¸è¿ä¸ªå¼æºæä»¶ï¼ç§åèµæ·±è®¾è®¡å¸</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/759200/202601/759200-20260105235553748-252860248.png" class="lazyload"></p>
<p>2026 å¹´çç¬¬ä¸æãGitHub ç­ç¹éè§ãåæ¶ä¸çº¿ï¼æ°çä¸å¹´ï¼è®©æä»¬ççå¼æºç¤¾åºè¿æ¥äºåªäºæè¶£ãå¥½ç©çå¼æºé¡¹ç®ã</p>
<p>å¦æä½ åå¤äºä¸æçç¸çåå°è¿ç¨ï¼ä¸å¦¨è¯è¯ witrï¼ä¸æ¡å½ä»¤å°±è½æè¿ç¨æ¥ä¸ªåºæå¤©ãåå¼å¹´æ³ç»ä½ ç Mac ç¦ç¦èº«ï¼æç®æ¸çå·¥å· Mole æ¢è½»éåæ¹ä¾¿ãå¯¹äºæ­£å¨ä½¿ç¨ AI ç¼ç¨çæåï¼ui-ux-pro-max-skill è½è®©ä½ ç AI å©æç§åèµæ·± UI è®¾è®¡å¸ï¼åå«åç¯ä¸å¾ãAI å³å¿åè¶³ççé¢ãåä½å¤§å­¦å¼æºç AI ç³»ç»å·¥ç¨è¯¾ç¨ï¼å¸¦ä½ ä»é¶æææ·±åº¦å­¦ä¹ æ¡æ¶ TinyTorchã</p>
<p>å­¦ç´¯äºï¼ä¸å¦¨è¯è¯è¿æ¬¾è¢«ç½åç´æ¥âå°ç¥âçæ²æµ¸å¼æ¡é¢æ­è¯å·¥å· BetterLyricsï¼äº«åä¸ä¼å¿æ²æµ¸å¼å¬æ­çå¿«ä¹ï¼å³é¸ç»åæè½æ´å¥½å°åºåã</p>
<ul>
<li>æ¬æç®å½
<ul>
<li>1. ç­é¨å¼æºé¡¹ç®
<ul>
<li>1.1 ä¸æ¡å½ä»¤æ­ç§è¿ç¨èº«ä¸ï¼witr</li>
<li>1.2 å¼ç®±å³ç¨çå°å¾ç»ä»¶åºï¼mapcn</li>
<li>1.3 æç®ç macOS ç³»ç»æ¸çå·¥å·ï¼Mole</li>
<li>1.4 AI ç¼ç¨å©æçè®¾è®¡å¢å¼ºæä»¶ï¼ui-ux-pro-max-skill</li>
<li>1.5 æºå¨å­¦ä¹ ç³»ç»å·¥ç¨ï¼cs249r_book</li>
</ul>
</li>
<li>2. HelloGitHub ç­è¯
<ul>
<li>2.1 æ éåé®ä»¶éªè¯é®ç®±æææ§çå·¥å·ï¼check-if-email-exists</li>
<li>2.2 æ²æµ¸å¼æ¡é¢æ­è¯æ¾ç¤ºå·¥å·ï¼BetterLyrics</li>
</ul>
</li>
<li>3. ç»å°¾</li>
</ul>
</li>
</ul>
<h2 id="1-ç­é¨å¼æºé¡¹ç®">1. ç­é¨å¼æºé¡¹ç®</h2>
<h3 id="11-ä¸æ¡å½ä»¤æ­ç§è¿ç¨èº«ä¸witr">1.1 ä¸æ¡å½ä»¤æ­ç§è¿ç¨èº«ä¸ï¼witr</h3>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/759200/202601/759200-20260105234010010-986775463.png" class="lazyload"></p>
<p><strong>ä¸»è¯­è¨ï¼Go</strong>ï¼<strong>Starï¼9.9k</strong>ï¼<strong>å¨å¢é¿ï¼7.4k</strong></p>
<p>è¿æ¯ä¸ä¸ªç¨ Go ç¼åçå½ä»¤è¡è¯æ­å·¥å·ï¼ç¨äºå¿«éå®ä½ååææ­£å¨è¿è¡çè¿ç¨ãå®éè¿ç«¯å£ãæå¡åæ PID æ å°è¿ç¨ä¿¡æ¯ï¼çæéä¿ææçè¿ç¨å æé¾ï¼ç´è§å±ç¤ºè¿ç¨çæ¥æºãå¯å¨æ¹å¼åæç»­è¿è¡çåå ï¼å¸®å©è¿ç»´ä¸å¼åèææ¥åå®ä½å¼å¸¸è¿ç¨ã</p>
<blockquote>
<p>GitHub å°åâ<a href="https://github.com/pranshuparmar/witr" target="_blank" rel="noopener nofollow">github.com/pranshuparmar/witr</a></p>
</blockquote>
<h3 id="12-å¼ç®±å³ç¨çå°å¾ç»ä»¶åºmapcn">1.2 å¼ç®±å³ç¨çå°å¾ç»ä»¶åºï¼mapcn</h3>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/759200/202601/759200-20260105234028700-423116357.png" class="lazyload"></p>
<p><strong>ä¸»è¯­è¨ï¼TypeScript</strong>ï¼<strong>Starï¼3k</strong>ï¼<strong>å¨å¢é¿ï¼3k</strong></p>
<p>è¯¥é¡¹ç®æ¯åºäº MapLibre GL å Tailwind CSS æå»ºçäº¤äºå¼å°å¾ç»ä»¶ï¼å¼ç®±å³ç¨æ ééç½®ï¼è½å¤èªå¨ééæµè²åæ·±è²æ¨¡å¼ï¼æ¯æç¼©æ¾ãæåéãå®ä½ãæ è®°ãå¼¹æ¡åç»å¶è·¯çº¿ç­åè½ï¼å¼å®¹ shadcn/ui éå React çæçå¼åèã</p>
<pre><code class="language-typescript">import { Map } from "@/components/ui/map";

export function BasicMapExample() {
  return (
    &lt;div className="h-[400px] w-full"&gt;
      &lt;Map center={[-74.006, 40.7128]} zoom={12} /&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<blockquote>
<p>GitHub å°åâ<a href="https://github.com/AnmolSaini16/mapcn" target="_blank" rel="noopener nofollow">github.com/AnmolSaini16/mapcn</a></p>
</blockquote>
<h3 id="13-æç®ç-macos-ç³»ç»æ¸çå·¥å·mole">1.3 æç®ç macOS ç³»ç»æ¸çå·¥å·ï¼Mole</h3>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/759200/202601/759200-20260105234040135-1028084979.png" class="lazyload"></p>
<p><strong>ä¸»è¯­è¨ï¼ShellãGo</strong>ï¼<strong>Starï¼25k</strong>ï¼<strong>å¨å¢é¿ï¼1.6k</strong></p>
<p>è¿æ¯ä¸æ¬¾ä¸ä¸º macOS è®¾è®¡çè½»éçº§å½ä»¤è¡æ¸çå·¥å·ï¼éæ·±åº¦æ¸çãåºç¨å¸è½½ãç¡¬çç©ºé´åæåå®æ¶ç¶æçæ§äºä¸ä½ãå®ä¸»è¦ç± shell ç¼åï¼å®è£ç®åãé¶å¹²æ°ï¼æ å¹¿å/å¼¹çª/å¸¸é©»è¿ç¨ï¼ï¼æ¯æç½åååè¯è¿è¡æ¨¡å¼ï¼è¿ä¸æ­¥éä½è¯¯å é£é©ã</p>
<blockquote>
<p>GitHub å°åâ<a href="https://github.com/tw93/Mole" target="_blank" rel="noopener nofollow">github.com/tw93/Mole</a></p>
</blockquote>
<h3 id="14-ai-ç¼ç¨å©æçè®¾è®¡å¢å¼ºæä»¶ui-ux-pro-max-skill">1.4 AI ç¼ç¨å©æçè®¾è®¡å¢å¼ºæä»¶ï¼ui-ux-pro-max-skill</h3>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/759200/202601/759200-20260106085912358-1253513345.png" class="lazyload"></p>
<p><strong>ä¸»è¯­è¨ï¼TypeScript</strong>ï¼<strong>Starï¼6.8k</strong>ï¼<strong>å¨å¢é¿ï¼4.3k</strong></p>
<p>è¿æ¯ä¸æ¬¾é¢å AI ç¼ç¨å©æç UI/UX è®¾è®¡å¢å¼ºæä»¶ï¼èµäº AI å©æçæä¸ä¸çº§çé¢åç¨æ·ä½éªçè½åãå®åç½® 57 ç§ UI é£æ ¼ã95 å¥è°è²æ¹æ¡ã56 ç»å­ä½æ­éå 98 æ¡ UX æä½³å®è·µè§èçç¥è¯åºï¼è®© AI æè±åç¯ä¸å¾çéç¨æ ·å¼ä»£ç ï¼èªå¨çæå·æè¾é«æ°´åè§è§ææåè¯å¥½äº¤äºä½éªçåºç¨çé¢ä»£ç ã</p>
<pre><code># Install CLI globally
npm install -g uipro-cli

# Go to your project
cd /path/to/your/project

# Install for your AI assistant
uipro init --ai claude      # Claude Code
uipro init --ai cursor      # Cursor
uipro init --ai windsurf    # Windsurf
uipro init --ai antigravity # Antigravity (.agent + .shared)
uipro init --ai copilot     # GitHub Copilot
uipro init --ai kiro        # Kiro
uipro init --ai all         # All assistants
</code></pre>
<blockquote>
<p>GitHub å°åâ<a href="https://github.com/nextlevelbuilder/ui-ux-pro-max-skill" target="_blank" rel="noopener nofollow">github.com/nextlevelbuilder/ui-ux-pro-max-skill</a></p>
</blockquote>
<h3 id="15-æºå¨å­¦ä¹ ç³»ç»å·¥ç¨cs249r_book">1.5 æºå¨å­¦ä¹ ç³»ç»å·¥ç¨ï¼cs249r_book</h3>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/759200/202601/759200-20260105234058630-733025592.png" class="lazyload"></p>
<p><strong>ä¸»è¯­è¨ï¼Other</strong>ï¼<strong>Starï¼15k</strong>ï¼<strong>å¨å¢é¿ï¼3k</strong></p>
<p>è¯¥é¡¹ç®æ¯ç±åä½å¤§å­¦å¼æºç AI ç³»ç»å·¥ç¨ï¼CS249rï¼è¯¾ç¨ææï¼åå«ä¹¦ç±åæºç ãå®éè¿ä»é¶å®ç°æ·±åº¦å­¦ä¹ æ¡æ¶ TinyTorch åå°æ¨¡åé¨ç½²å° Arduino ä¸æ èæ´¾ç­ç¡¬ä»¶è®¾å¤çå®è·µï¼å¸®å©å­¦ä¹ èå°æºå¨å­¦ä¹ çè®ºä¸ç³»ç»å·¥ç¨å®è·µç¸ç»åï¼ææ¡å¨å®éåµå¥å¼å¼åä¸­é¨ç½² AI ç³»ç»çæ¹æ³ã</p>
<blockquote>
<p>GitHub å°åâ<a href="https://github.com/harvard-edge/cs249r_book" target="_blank" rel="noopener nofollow">github.com/harvard-edge/cs249r_book</a></p>
</blockquote>
<h2 id="2-hellogithub-ç­è¯">2. HelloGitHub ç­è¯</h2>
<p>å¨æ­¤ç« èä¸­ï¼æä»¬å°ä¸ºå¤§å®¶ä»ç»æ¬å¨ HelloGitHub ç½ç«ä¸çç­é¨å¼æºé¡¹ç®ï¼å¸æä½ è½ä»ä¸­æ¶è·å¼æºç¥å¨åç¼ç¨ç¥è¯ï¼æ´æ¬¢è¿ä¸æä»¬åäº«ä½ å¨ä½¿ç¨è¿äº<strong>å¼æºé¡¹ç®çä½éªåè¯ä»·</strong>ï¼ç¨æçå®åé¦ä¸ºå¼æºé¡¹ç®çä½èæä¾å¨åã</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/759200/202601/759200-20260105234119620-1017982499.png" class="lazyload"></p>
<h3 id="21-æ éåé®ä»¶éªè¯é®ç®±æææ§çå·¥å·check-if-email-exists">2.1 æ éåé®ä»¶éªè¯é®ç®±æææ§çå·¥å·ï¼check-if-email-exists</h3>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/759200/202601/759200-20260105234127209-1135644251.png" class="lazyload"></p>
<p><strong>ä¸»è¯­è¨ï¼Rust</strong></p>
<p>è¿æ¯ä¸æ¬¾ç¨ Rust å¼åçé®ç®±éªè¯å·¥å·ï¼éè¿æ­£åè¡¨è¾¾å¼ãDNSãSMTP ç­å¤éæ ¡éªï¼å¨ä¸åéé®ä»¶çæåµä¸éªè¯é®ç®±æææ§ï¼æ¯æ API å CLI ç­ä½¿ç¨æ¹å¼ã</p>
<blockquote>
<p>é¡¹ç®è¯¦æâ<a href="https://hellogithub.com/repository/reacherhq/check-if-email-exists" target="_blank" rel="noopener nofollow">hellogithub.com/repository/reacherhq/check-if-email-exists</a></p>
</blockquote>
<h3 id="22-æ²æµ¸å¼æ¡é¢æ­è¯æ¾ç¤ºå·¥å·betterlyrics">2.2 æ²æµ¸å¼æ¡é¢æ­è¯æ¾ç¤ºå·¥å·ï¼BetterLyrics</h3>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/759200/202601/759200-20260105234135970-1360510508.png" class="lazyload"></p>
<p><strong>ä¸»è¯­è¨ï¼C#</strong></p>
<p>è¿æ¯ä¸æ¬¾ä¸ä¸º Windows è®¾è®¡çæ²æµ¸å¼æ­è¯æ¾ç¤ºå·¥å·ï¼è½å¤èªå¨è¯å«æ­æ¾å¨æ­£å¨æ­æ¾çé³ä¹ï¼å®æ¶æ£ç´¢æ¬å°æå¨çº¿æ­è¯ï¼å¹¶éè¿æµçå¨ç»ç¾è§å°å±ç¤ºå¨æ¡é¢ä¸ã</p>
<blockquote>
<p>é¡¹ç®è¯¦æâ<a href="https://hellogithub.com/repository/jayfunc/BetterLyrics" target="_blank" rel="noopener nofollow">hellogithub.com/repository/jayfunc/BetterLyrics</a></p>
</blockquote>
<h2 id="3-ç»å°¾">3. ç»å°¾</h2>
<p>ä»¥ä¸å°±æ¯æ¬æãGitHub ç­ç¹éè§ãçå¨é¨åå®¹ï¼æå§ç»åä¿¡ï¼å´è¶£æ¯æå¥½çèå¸ï¼å¸æè¿äºå¼æºé¡¹ç®è½æ¿åä½ çå´è¶£ï¼è®©ä½ æ¾å°ä¸ä¸ä¸ªæ³å°è¯åå­¦ä¹ çå¼æºé¡¹ç®ãå¦æä½ ä¹åç°äºå¥½ç©ãæè¶£ç GitHub å¼æºé¡¹ç®æ³è¦åäº«ï¼æ¬¢è¿æ¥ <a href="https://hellogithub.com" target="_blank" rel="noopener nofollow">HelloGitHub</a> ä¸æä»¬äº¤æµãè®¨è®ºä½¿ç¨ä½éªã</p>
<p><strong>å¾æåé¡¾</strong></p>
<ul>
<li><a href="https://mp.weixin.qq.com/s/iUWBUmu8Bw8RuC81CqXpEg" target="_blank" rel="noopener nofollow">ä¸ç­æ¸é±¼ç©å¡é²ï¼ç«ç¶æ¯ä¸ºäºå­¦æ¶æï¼</a></li>
<li><a href="https://mp.weixin.qq.com/s/44TR75pFspRM3kGf-6gU2Q" target="_blank" rel="noopener nofollow">èç 60% Token çæ°æ°æ®æ ¼å¼</a></li>
</ul>

</div>
<div id="MySignature" role="contentinfo">
    <div>    
    <p style="border-top: #e0e0e0 1px dashed; border-right: #e0e0e0 1px dashed; border-bottom: #e0e0e0 1px dashed; border-left: #e0e0e0 1px dashed; padding-top: 5px; padding-right: 10px; padding-bottom: 10px; padding-left: 150px; background: url(https://images.cnblogs.com/cnblogs_com/xueweihan/859919/o_200924043112qrcode_for_gh_4fb030b35bb4_258.jpg) #e5f1f4 no-repeat 1% 50%; background-size:130px 130px;font-family: å¾®è½¯éé»; font-size: 13px" id="PSignature">
    <br>
    ä½èï¼<a href="https://github.com/521xueweihan" target="_blank">åå¾®å¯</a>

    <br>
    <strong>æ«æå·¦ä¾§çäºç»´ç å¯ä»¥èç³»å°æ</strong>
    <br>

    <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh"><img alt="ç¥è¯å±äº«è®¸å¯åè®®" style="border-width: 0" src="https://licensebuttons.net/l/by-nc-nd/4.0/88x31.png"></a><br>æ¬ä½åéç¨<a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh">ç½²å-éåä¸æ§ä½¿ç¨-ç¦æ­¢æ¼ç» 4.0 å½é </a>è¿è¡è®¸å¯ã
    </p>
</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.034027777777777775" data-date-updated="2026-01-06 09:14">2026-01-06 08:25</span>&nbsp;
<a href="https://www.cnblogs.com/xueweihan">åå¾®å¯</a>&nbsp;
éè¯»(<span id="post_view_count">218</span>)&nbsp;
è¯è®º(<span id="post_comment_count">1</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19445015);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19445015', targetLink: 'https://www.cnblogs.com/xueweihan/p/19445015', title: 'å« AI åççé¢å¤ªä¸ï¼è£ä¸è¿ä¸ªå¼æºæä»¶ï¼ç§åèµæ·±è®¾è®¡å¸' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ç¬ç«å¼åèåæµ·å¤ ai å·¥å·ç«ï¼å¨è¿ç¨ææ¯æ åå·¥å·åäº«ï¼ ]]></title>
    <link>https://www.cnblogs.com/duyuanshang/p/19445160/toolofseoai</link>
    <guid>3c56fcc8c737b4014b94ac15f3c3ab47</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/duyuanshang/p/19445160/toolofseoai" title="åå¸äº 2026-01-06 03:19">
    <span role="heading" aria-level="2">ç¬ç«å¼åèåæµ·å¤ ai å·¥å·ç«ï¼å¨è¿ç¨ææ¯æ åå·¥å·åäº«ï¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p></p><div class="toc"><div class="toc-container-header">ç®å½</div><ul><li><a href="#ç¬¬ä¸ç¹å¿«" rel="noopener nofollow">ç¬¬ä¸ç¹ãå¿«ï¼</a></li><li><a href="#ç¬¬äºç¹æ°¸è¿ååç´ç«" rel="noopener nofollow">ç¬¬äºç¹ãæ°¸è¿ååç´ç«</a></li><li><a href="#ç¬¬ä¸ç¹ç»éªåææ¯æ ç±»åå®¹åäº«" rel="noopener nofollow">ç¬¬ä¸ç¹ãç»éªåææ¯æ ç±»åå®¹åäº«</a><ul><li><a href="#1-å¹³æ¶ä¹ æ¯" rel="noopener nofollow">1. å¹³æ¶ä¹ æ¯</a></li><li><a href="#11-ç­ç¹çå¸åºè°ç å¢" rel="noopener nofollow">1.1 ç­ç¹çå¸åºè°ç å¢ï¼</a></li><li><a href="#2-ç¡®å®æ¹å" rel="noopener nofollow">2. ç¡®å®æ¹å</a></li><li><a href="#3-ææ¯æ " rel="noopener nofollow">3. ææ¯æ </a></li><li><a href="#4-åå°" rel="noopener nofollow">4. åå°</a></li><li><a href="#5-æ¨å¹¿åç»è®¡" rel="noopener nofollow">5. æ¨å¹¿åç»è®¡</a></li><li><a href="#6-ç»å½æ³¨åå¨å­ç­æé¡¹" rel="noopener nofollow">6. ç»å½æ³¨åãå¨å­ç­æé¡¹</a></li></ul></li></ul></div><p></p>
<p>ä»å¤©ææ¥è®²ä¸äºå³äº AI ä¸ ç¬ç«å¼åèçå³é®ä¿¡æ¯ã</p>
<hr>
<p>æè¿ä¸¤å¹´åè¿å¾å¤äº§åï¼100% çº¯æµ·å¤ç«ï¼ä¸»è¦æ¯è±æç«ï¼å ä¸ºæ£ç¾åï¼ï¼ç®åäº§åé½å¤äºæææ¬²å çç«åç©ºçªæææ´ä½ï¼æä»¥ææ¶ä¸ä¾¿åäº«ï¼ç­å»ºèµ·ç»å¯¹çå£ååï¼æä¼å¨åå®¢å­ä¸é¨è®²ä¸äºãä½å³ä¾¿å¦æ­¤ï¼å®ä»¬ä¾ç¶è®©æè¿ä¸ä¸éçæ¶å¥ï¼ä½å¾èªç±å¾ææ´»çæå¸æçç¶æã</p>
<p>æå¼å§ï¼2023 å¹´ï¼æä¸æå¤ªæ·±çææ¯ï¼å°±ç°å­¦ç°åï¼æ¾æ°è¯ï¼æ¢åæºï¼å»ºç«äºä¸ä¸ª æå°ä¼è¡ä¸ç AI å¯¼èªç«ï¼é£åæ¶é´ä¸é¿ï¼åºæ¬æ²¡æµéãçå°äº 2024 å¹´ï¼å¨æ¨ç¹ä¸åè§è¶æ¥è¶å¤äººå¼å§æ Next.js ææ¯æ ï¼äºæ¯å°±è®© ai + å¤æ³æå ååé­æ¹ãæ¶éäºå åä¸ªåè´¹ Next.js æ¨¡æ¿ï¼ç¶åå»ºç«ç¬ç«ç«å¸å¼æµéï¼æ¾ç¶åæ¤å«ä¸¤ï¼ä¹è¿æ²¡æµéã</p>
<p>ä½ä¸ºæç§¯ç´¯äºå»ºç«ç»éªï¼2024 å¹´å¨ å¥é£ è¿ä¸ªå¤§ V å·éå­¦äº SEO æå·§ç¥è¯ï¼åæ¥å¸é¢ä¸ç AI Agent è¶æ¥è¶å¥½ç¨ï¼ï¼æåç° AI åä¸è¥¿æå¤å©ï¼æçµèæ¬å°çä¸è¥¿ï¼ä¸ä¸ªé¢åç¨å®ï¼æä¿®ä¿®æ¹æ¹é©¬ä¸å°±è½ä¸çº¿åä¸å«åéçå¦ä¸ä¸ªé¢åï¼ç¶åå°±æäºå¾å¤.....</p>
<p>æè§é¢çæãé³ä¹ç«ãèæååºãæç« è¯­è¨å¿«éçæãç½é¡µå¤å»ç¥å¥ãæè¦å·¥å·ãå¯¹è¯å¥å£³.... ä¸åä¸å¯æ¶æ¾ï¼æçæ°éå¾å¤ï¼åååå°±è±äºäºå­åå¤§æ´ãä»ä»æ¯æå¥æ¶é´å¤§äºä¸¤ä¸ä¸ªææçï¼å°±æåå ä¸ªç«äºãææç«é 95% é½æ¾å¼äºï¼é½å¤±è´¥äºï¼æµéåæ ·çæé½æ¹æ Ads æµéä¸»è¿ç§å±ç¤ºç«äºï¼å¶ä½æçäºï¼ç®åè¿å¨ç»´æ¤ççä¸äºäºå­ä¸ªï¼é½æ¯è¾ OK ï¼ä¸åºæå¤ï¼è½æç»­ç»æ°´æ¼«æµæå° AI çº¢æµ·æ¶ä»£äºã</p>
<p>åäº«ä¸ä¸ç»éªã</p>
<h2 id="ç¬¬ä¸ç¹å¿«">ç¬¬ä¸ç¹ãå¿«ï¼</h2>
<p>å¿«å¾éè¦ï¼è¿­ä»£éåº¦æ¯å¯ä¸ç«äºåï¼</p>
<blockquote>
<p>å¨æçèä¸çæ¶¯ä¸­ï¼æè§å¯å°ä¸ä¸ªä¸åçç°è±¡æ¯ï¼äººä»¬ä½ä¼°äºå¿«éè¡å¨çå¿è¦æ§ãä½ çé¡¹ç®èæ¶ä¹å¹¶éä¼ç¹ï¼èæ¯ä¸ä¸ªç¼ºç¹ã---- é®ä¸å³°å¨å 337 æ</p>
</blockquote>
<p>ä¸è¦å®³ææµå°è¾æ­¢ï¼æççè¡ä¸æéè¦é¿ææ·±èï¼<strong>å¨æ°å´è¡ä¸å°±å¾é¦éæ¶çå¹¿æ³ + æå¿«çå¼ååè¿­ä»£ã</strong>åäºäº¤ä»ãå¿«ééªè¯ã</p>
<p>ç°å¨ï¼æ¯ä¸ªäº§åä¸çº¿ï¼ææå¤åªåè®¸è± 2 å¤©æ¶é´ãå¤è§å¨ç» AI + tailwind CSS äºï¼å ä¸ºè¿ä¸ªç»ååºæ¬æ éèèä»»ä½å°æ¹ç CSS ç»è°è¿æ æä¹çæ¶é´ï¼å ä¸ºå°äº CSS è¿ä¸ª.... ææ²¹ç¶ï¼ï¼ï¼æä»¥å¤±è¯¯çå¾ä½ã</p>
<p>ä¸çº¿åï¼å½ç¶æ²¡ææµéï¼äºæ¯æå°±è¯ä¼°è¦ä¸è¦æç£¨ï¼æç£¨ä¸ä¸ªææåæå¼å§ä¹°å¤é¾ãå¡«æç« åå®¹æ¾é¿å°¾å·´è¯ãå raddit ååç§å¹³å°ææ¦ãå®£ä¼ ï¼æèä¹°å¹¿åãè¿ä¸ªè¿ç¨å¾èéª SEO è¿ç»´æ°´å¹³ï¼æä¹ååè¿å¾å¤ç¯æå·§ã</p>
<p>å¦æä¸ä¸ªæé½åæ¤å«ä¸¤ï¼æä¸äºæµéå°±ççæ¿æ¥æµéï¼æ²¡æå°±æï¼æ­èç¦»ï¼</p>
<p>å½ç¶ï¼æç¥éå¿«åç²¾ï¼<strong>ä½åªæä¸ä¸ªé¡¹ç®åæ¹åï¼éè¿äºæå¿éçèéªï¼å®ææèµæ ¼è¢«ææé¿æä¸»ä¹ã</strong></p>
<h2 id="ç¬¬äºç¹æ°¸è¿ååç´ç«">ç¬¬äºç¹ãæ°¸è¿ååç´ç«</h2>
<p>ä¸è¦ç¢°éç¨ï¼åchatgpt ä¸æ ·ï¼æ²¡æç®æ ç¾¤ä½ï¼èä¸ææäººå¨è¦çï¼è°é½è½ç¨ï¼ï¼ä¸ºä»ä¹ï¼å ä¸ºéç¨æ¯å¤§äººç©çäºæãå°äººç©ï¼åªæåå¾å°çæç¨æ·ç¾¤ä½çå·¥å·ï¼ä¸¾å¨ç«ä¹åæï¼ç¨å³å»å¹³å°çæå¤§ V çè¯ï¼å°±æ¯<strong>åç´æºè½ä½</strong>ã</p>
<h2 id="ç¬¬ä¸ç¹ç»éªåææ¯æ ç±»åå®¹åäº«">ç¬¬ä¸ç¹ãç»éªåææ¯æ ç±»åå®¹åäº«</h2>
<h3 id="1-å¹³æ¶ä¹ æ¯">1. å¹³æ¶ä¹ æ¯</h3>
<p>æä¸ªäººå¹³æ¶ï¼ä¼å¤æç´¢ï¼äºèç½ä»»ä½è§è½çå° ai å­ç¼å°±è¿å»ç§ç§ãææãæ ¹æ®ç»éªåå·¥å·ï¼ä¸è¬æ¯åå» Ahrefs æµè§å¨æä»¶ãAITDK æä»¶ãWappalyzer æä»¶ä¸èå¿«éççï¼é¢ä¼°æååº¦ï¼ç¶åé­ç¼æ·±æè¯ä¼°ï¼æè§è½å»æ¢ç¹é¥­çï¼å°±æ¶éå° Obsidian ä¸ç¨ç®å½éã</p>
<p>æ¯å¤©é·æä¸å¨ï¼æè³å°çä¸ä¸ªå°æ¶çæ¨ç¹éåå¤§ V åè¨ãå¶ä½æ¶é´æ³èµ·æ¥å°±å»ä¸ ProductHunt å»å·ï¼ä»¥åç®åç¿»ç¿»æ feedly éè®¢éçé£ä¸å¤§å ä¸è¥¿ãæè§æç¹ç¨ï¼å°±æ¶éä¸ä¸ã</p>
<p>ä¸è¦å³å¿èªå·±ççç¹ãèªå·±ççç¹ï¼å¤§æ¦çä¸å¼é±ï¼å ä¸ºæ²¡æå¸åºå·²ç»å­å¨çéæ±ï¼é£é©å¾å¤§ï¼æå¤å¤§ï¼å¤§å°é¢ç¹åæ«æä»æªæåçææ¬äººå·²ç» 100% ä¸ä¿¡ä»»èªå·±çä»»ä½åæåå¤æ­äºï¼æä»å¤©åªä¼æ   ï¼ï½ã¸Â´ï¼ ï¼..... çè³å·²æµ¸éææ¬äººçå¨å±ä»·å¼è§ãï¼é¤éèªå·±ççå¤ªæ³æï¼å¯ä»¥éæåè®¸èªå·±æä¸¤å¤©ãï¼</p>
<h3 id="11-ç­ç¹çå¸åºè°ç å¢">1.1 ç­ç¹çå¸åºè°ç å¢ï¼</h3>
<p><strong>æ°å¼æºé¡¹ç®ï¼</strong>ä¸ä¸ªçªç¶å´èµ·çæ°å¼æºé¡¹ç®ï¼åå®å¨è¾¹ç½ç«ï¼æµéä¹ä¸å°ï¼å¥å£³ä¹è¡ãè¿ä¸ªéä¸¤ä¸å¤©å» GitHub Trending ééå°±è¡ã</p>
<p><strong>å¤§æ¨¡åå¸åºè°ç ï¼</strong>å» Hugging Face ç HF Space éåç§ demoãè¿éå¾å¾æ¯æªæ¥ç­ç¹çæ©æå®éªåºï¼</p>
<p><strong>æ°è¯è°ç ï¼</strong>å» google trends ï¼æå¨æä¸ªäººç½ç«è®²è¿æ¹æ³ï¼è¿éæ¯æ°è¯çæç»ç¡®è®¤å¤ï¼æ°å¼æºé¡¹ç® æ¯å¦æ¯ æ°è¯ä¹å¯ä»¥æ¥è¿éç¡®è®¤ï¼ãåç§å¿äºï¼ä¸æ¦ç¡®è®¤ï¼æ¿ä¸ï¼ä¼å¾å°å¾å¤§ä¸è¡æµéãå½ç¶ï¼è¿éä¹æ¯å¨ççå®ç­åº¦çç¼©ç¥ï¼è½è·åä¸å°çè´µçåä¸ä¿¡æ¯ï¼è¾å©é¢æµæªæ¥ç­ç¹ã</p>
<p>ç¸å³æç« ï¼ <a href="https://www.ccgxk.com/codeother/580.html" target="_blank" rel="noopener nofollow">https://www.ccgxk.com/codeother/580.html</a></p>
<p><strong>æºè½ä½ Agent éæ±è°ç ï¼</strong>æ¯ä¸ªåç´ç MCP æå¡å¨é½å¼å¾å»åä¸ªå¯¹åºç åç´æºè½ä½ äº§åãå¯ä»¥å» mcp.so å mcpservers.org è¿ 2 ä¸ªå°æ¹ççãæ¯è¾ç«ç MCP æå¡å¨ï¼<strong>å·²ç»å¸®ä½ éªè¯äºå·²å­å¨çå¸åºéæ±ï¼è¿ä¸ªå¾éè¦)</strong>ï¼æ¿æ¥ä¸»ä¹ï¼ç´æ¥å¼æ·¦ãèªå·±æ´åä¾åºé¾ï¼å½ä¸ä¸ªèµå·®ä»·çä¸­é´åã</p>
<h3 id="2-ç¡®å®æ¹å">2. ç¡®å®æ¹å</h3>
<p>è¿ä¸ªä¸å®è¦ LLM è¾å©çï¼ä»ä»¬è§å¤è¯å¹¿æºååé«ï¼æ¯ 1 åéé½å¼ºè¿æ 1 ææçæè°çãè¦æå¥æ³ãï¼ï¼æ¯ Gemini å GPT é½ç¨ï¼å¨è¯¢ä»ä»¬æè§ï¼è®©å®ä»¬çæä¸å¤§å é¿å°¾è¯ã</p>
<p>ç¶å è°·æ­ãæ¨ç¹ãgithub ä¸å¤§å¹³å°æ£ç´¢åååº¦ãæ¯å¦å ç¨åçï¼å°½å¯è½é¿å¼åçãç¸ä¼¼åé³ä¸æ¼åï¼é¿åå¾å¸å½è­¦åç´æ¥å¯¼è´ååå°½å¼ï¼ã</p>
<p>ç®å AI å·¥å·ç«ï¼äº§åï¼å 4 ç§ï¼</p>
<ol>
<li>åä»£ç å·¥å·</li>
<li>åç§å©ææä»¶</li>
<li>æ³ç¨æ· æºè½ä½ï¼å¥é½è½å¹²ï¼</li>
<li>åç´ æºè½ä½ï¼åªä¼å¹²æç¹å®è¡ä¸çæäºç Agentï¼</li>
</ol>
<p>æä»¬ä¸è¬éç¬¬ 4 ç§ï¼å¶ä»çé½æ¯å¤§äººç©åçï¼å±ä»¬æé±äºæç»éªäºåæãæ»ä¹ï¼æä»¬çç®æ å°±æ¯ãç ¸ææè¡ä¸çé¥­ç¢ãï¼ææè¡ä¸ï¼</p>
<p>ä¹åéåºå¤§è¯ï¼æ³¨åååï¼åååªéæ©å¸¸ç¨ç com io ai app dev org è¿ç§ï¼com ä¸ºé¦éãæ¨èå¨ Namecheap ç½æ³¨åã</p>
<h3 id="3-ææ¯æ ">3. ææ¯æ </h3>
<p>åæï¼ä¸æç½ç«ï¼è¿ä¸ªæ æè°ï¼åæ 5 ä¸ªç«ï¼ç»æçç»äºåè¯´ã</p>
<p>ï¼å¤§èå¨ç¨ vibe coding ï¼ä¸è¦æï¼2025 å¹´æå¨çç»å°½èæ±è´åç ¸èªå·±é¥­ç¢ççé©¬ç åæèµï¼AI Coding å·²ç»å¨ç§°è·éåä¸çº§å«ç¼ç¨ï¼ä¸æç ï¼æè°¢ï¼</p>
<p>æ·±å¥çè¯ï¼åªæ¨è next.js + TS + React + tailwindCSSï¼å¾ç®åãè¿ä¸ªæ¯ AI æåå¥½çè¯­è¨ãä¸ºä»ä¹ï¼AI è¢«æåè®­ç»çç¼ç¨è¯­è¨ï¼æå¤çæ¯ JS ï¼è TS åä¸¥è°¨ï¼ç¼åæ¶ä¼æææä½çº§éè¯¯æ«é¤ï¼react æ¡æ¶åé«åº¦æ½è±¡ï¼ååç«¯é½å¨ä¸ä¸ªé¡¹ç®ä»åºéï¼AI ä¸ç¨çï¼ä¹å AI åå»ºè¿ç±»ç«ï¼åç¡®åº¦å¾é«ï¼å¤§é¨åäºå¨å¨å´ç®å°±è¡äºï¼çæå¾å¨ï¼å¨æµç¨å»çå¼é¨ç½²ãï¼å¦æ next.js ä¸æ³ç¨ï¼é£ Nuxt å Remix  æ¯å¤ç¨éé¡¹ï¼</p>
<p>èä¸ next.js æ¨¡æ¿å¾å¤.... æ¯å¦ OpenSaaSãsaas-starter... æä»¥ç¨è¿ä¸ªæå¥½äºã</p>
<p>ä¹ä¸ç¨å»æå­¦ï¼åªéè¦ç¨è¿ä¸ªæ¡æ¶å°±è¡ï¼å¶ä½å°±æ¯å¨å´ç®å­ï¼ä¸éè¦å¯¹å®å·¥ä½åçå¾äºè§£ã</p>
<p>ï¼å½ç¶ï¼ä½ æå´è¶£çè¯ï¼å¯ä»¥è± 3~5 å¤©ç ç©¶ä¸ä¸ï¼è¯å®æ¯è¶çæè¶å¥½ï¼</p>
<p>ä¹åï¼ä¸é®é¨ç½²å° Vercel ãæ cloudflare éã</p>
<h3 id="4-åå°">4. åå°</h3>
<p>è¿ä¸ª API ç»å¸ç æ´é²ç»ä¸æ¸¸ãä¸æ¸¸è°ç¨ãå¢å æ¥æ¹ãnodejs ãæ²¡ä»ä¹å¯è¯´çï¼æå¯ç¨çæ¨¡æ¿ãç°æçå¼æºåºï¼å°±ç´æ¥æ¿æ¥ç¨ï¼æ²¡æå°±èªå·±ä¸¢ç» AI è®©å®ä»¥æç­çä»£ç å®ç°ï¼ä¹åè¿­ä»£ã</p>
<h3 id="5-æ¨å¹¿åç»è®¡">5. æ¨å¹¿åç»è®¡</h3>
<p>æ¨å¹¿å®£ä¼ ï¼çåºæ¯ç¬ç«å¼åå¯ä¸ççç¹ï¼ä½è¿ä¸ªæ²¡æ³è¯´ãåæçæµè¯æµéï¼é è±é±ä¹°å ç¾å åç¹å»éçå¹¿å SEM ï¼ç¨³å®æµéé æ¾é¿å°¾è¯åä¹°å¯¼èªå¤é¾åç§å¤é¾äºå SEO æåï¼<strong>ä¸å®è¦æå¡ç«¯æ¸²æ</strong>ï¼ï¼å¹³æ¶å¤å¨ä»»ä½ç¤¾äº¤å¹³å°ä¼ æ­ï¼ç¼æå¥½è¿éä¸´ï¼çè³æ¾ä¸­ä»ãæ¾çº¢äººè¥éã</p>
<p>æ³¨æ SEO æ¯éè¦é¿æä¸»ä¹ï¼ä½æ¯æé¿ä¹å°± 6 ä¸ªæãå¨åä»¥èµ´ 6 ä¸ªæï¼ç»å¤§é¨åå·¥å·ç«éæ±çå³é®è¯ï¼ä½ é½å¯ä»¥è¿å¥è°·æ­æåç¬¬ä¸é¡µãå ä¸ºå¤§é¨åè¿äºè¯ï¼å¨è°·æ­ç¬¬ä¸é¡µé½æä¹±ä¸å«ç³çæ³æµéçæ ç¨ç½ç«ç½é¡µç¨äºå ä½ï¼è°·æ­å¿éç¥éï¼ä½è°·æ­æ²¡åæ³ãå°¤å¶æ¯ AI ç¸å³çè¯ãåªè¦ç¬¬ä¸é¡µææ å³çè®ºåãåå®¢æç« ï¼ä½ å°±å¯ä»¥å¨åä»¥èµ´è±æå¤æå¤æå¤ 6 ä¸ªææ¿ä¸ãä»æ­¤ï¼ä½ ç½ç«å°±æäºæ¯è¾ç¨³å®çåè´¹åå®¢æ·ç²¾åçèªç¶æµéäºï¼</p>
<p>ï¼é¤äºçç«å¤§è¯ï¼å¶ä½ AI ç»åé¢åï¼è°·æ­æç´¢ç»æé¦é¡µå ä¹é½æ²¡è¢«å¡«æ»¡å¢ï¼é½æ¯æºä¼ï¼</p>
<p>æµéæ¬èº«æ²¡ç¨ï¼ç²¾åçå®¢æ·å®ä½æµéææç¨ãä¸å¤©æ 100 ä¸ªï¼å°±å¾æ£äºã</p>
<p>è±é±ä¹°éå² ProductHunt æ¦ä¹å¯ä»¥ãææ¦åä¼äº§çå¾å¤§çç¥ååº¦åæµéã</p>
<p>å«ä»è¿æµ·ãåæ¾ç¥éãå°½éå°è±é±ã</p>
<p>èæµéææï¼Google Analytics å¿å¤ï¼GSCï¼Google Search Consoleï¼ä¹å¾ãè¿ä¸¤ä¸ªçæ§ãä¸ºäºä¿é©æé´ï¼åå ä¸ç¾åº¦ç»è®¡ï¼ç®æ¯å¤ä»½ï¼ï¼ä½æ¯ç¾åº¦ç»è®¡ï¼æ¯æ¬¡ç»å½é½è¦æ¿ææºæ«ç .... å¾å°å»çï¼é¤ééè¦å¯¹æ°æ®ãï¼æäººè¯´ç¾åº¦ç»è®¡ä¼å½±åæµ·å¤ç«éåº¦ãè§¦åéç§æ¡æ¬¾è¿è§ï¼è¿ä¸ªå¤§å®¶å¯ä»¥èªè¡å¤æ­ï¼ãPosthog å Umami ä¹å¯ä½ä¸ºå¤ä»½ã</p>
<p>ç¶åæ¯ Discord ç»´æ¤ç¤¾ç¾¤ï¼æ¯ç«å½å¤æ²¡æ QQ ç¾¤ã</p>
<h3 id="6-ç»å½æ³¨åå¨å­ç­æé¡¹">6. ç»å½æ³¨åãå¨å­ç­æé¡¹</h3>
<p><strong>å¤§æ¨¡å APIï¼</strong>é¤äºçå»æä¸ç¨æ¨¡åï¼ä½¿ç¨ç¬¬ä¸æ¹æç®¡ï¼å¦ Replicate ãFalãHFï¼æèªå GPU æå¡å¨ï¼å¯ä»¥å» OpenRouterï¼è¿éèåäºææç¥åå¤§æ¨¡åã</p>
<p><strong>ç»å½æ³¨å</strong>ï¼æ²¡æ¶é´ãæ¶é´æ¥å°±ç¨ Clerk è¿ä¸ªç°æç SaaS æå¡ï¼ä¸é®ä¸çº¿ï¼åç»­è¦æ¶è´¹çï¼ãéè¦èªå»ºï¼å°±ç¨ Auth.js è¿ä¸ªï¼å¼æºåºï¼ã</p>
<p><strong>æ°æ®å­åï¼</strong>æ¨è supabase ï¼æ æ°æ®åºãç»å½ãæä»¶è¯»å­ãAPI æ¥å£ç­å¨éæäºï¼èä¸ä¸æå¿«ãå½ç¶ï¼ä¹å¯ä»¥è¯è¯ neon ã</p>
<p><strong>çé¢ç»ä»¶åºï¼</strong>HeroUIãShadcnãMagicUI é½æºæ¼äº®ï¼</p>
<p><strong>i18nï¼</strong>å°±æ¯å¤è¯­è¨å½éåãä½¿ç¨ next.js çå¥½å¤æ¯ï¼æ next-intl è¿ä¸ªåºï¼å¯¹å¤è¯­è¨ç½ç«å¾åå¥½ã</p>
<p><strong>æ¶é±ï¼</strong>æä»¬å¼åºï¼è¦æ¶é±åãæä¸ä¸ªä¸»æµå·¥å·ï¼stripeãcreemãlemon squeezyãå½ç¶ï¼stripe æ¯ä¸»æµï¼ç¨³å®ä¸ç¥åï¼é¨æ§é«ç¹ï¼ä½æ½æä½ï¼ä½éè¦èªå·±æ¾ä¸­ä»å¼ç¾å½å¬å¸ï¼å¨ç¨å¤§å ååæè½å¼å§ãæ°æå»ºè®®ä½¿ç¨ lemon squeezy ï¼å»æ¯ä»å®ç³è¯·ï¼å»ç¤¾åºåå¼ æ¤ç§å°±è¡ï¼å ä¹ 0 é¨æ§ï¼ä½æ½æé«ãcreem å·®ä¸å¤ã</p>
<p><strong>å»ºç«æ¨¡æ¿ï¼</strong>æ¨èç´æ¥å¥æ¨¡æ¿ï¼Vercel.net/templates ãcodecanyon.net ãMkSaaSãShipAnyãShipFastãOpenSaaSãsaas-starter..... å¾å¤å¾å¤ãä½ æ¯åäººï¼ä¸æ¯ç§ç ï¼é è½®å­æ²¡å¿è¦ãä¸è¦èµ°å¼¯è·¯ï¼</p>

</div>
<div id="MySignature" role="contentinfo">
    <p>æ¬ææ¥èªåå®¢å­ï¼ä½èï¼<a href="https://www.cnblogs.com/duyuanshang/" target="_blank">ç¬åæ®</a>ï¼è½¬è½½è¯·æ³¨æåæé¾æ¥ï¼<a href="https://www.cnblogs.com/duyuanshang/p/19445160/toolofseoai" target="_blank">https://www.cnblogs.com/duyuanshang/p/19445160/toolofseoai</a></p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.001388888888888889" data-date-updated="2026-01-06 03:21">2026-01-06 03:19</span>&nbsp;
<a href="https://www.cnblogs.com/duyuanshang">ç¬åæ®</a>&nbsp;
éè¯»(<span id="post_view_count">59</span>)&nbsp;
è¯è®º(<span id="post_comment_count">1</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19445160);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19445160', targetLink: 'https://www.cnblogs.com/duyuanshang/p/19445160/toolofseoai', title: 'ç¬ç«å¼åèåæµ·å¤ ai å·¥å·ç«ï¼å¨è¿ç¨ææ¯æ åå·¥å·åäº«ï¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ æ¶èå¤¹éçå¹²è´§é½å¨âåç°âï¼è¿æ¡æä»¤æä½ çå¤§èåæâé«åç¼©æ¯âç¥è¯åº ]]></title>
    <link>https://www.cnblogs.com/huizhudev/p/19445127</link>
    <guid>bf7195a760627ffc6b5973e1f720f888</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/huizhudev/p/19445127" title="åå¸äº 2026-01-06 01:36">
    <span role="heading" aria-level="2">æ¶èå¤¹éçå¹²è´§é½å¨âåç°âï¼è¿æ¡æä»¤æä½ çå¤§èåæâé«åç¼©æ¯âç¥è¯åº</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/3695776/202601/3695776-20260106013604826-1540183753.png" alt="æ¶èå¤¹éçå¹²è´§é½å¨âåç°âï¼è¿æ¡æä»¤æä½ çå¤§èåæâé«åç¼©æ¯âç¥è¯åº" class="desc_img">
        å«è®©æ¶èå¤¹åç°ï¼æ¬æåäº«ä¸æ¡è½å¼ºå¶æ§è¡âè´¹æ¼å­¦ä¹ æ³âçAIæä»¤ï¼å°æ¦æ¶©çææ¯ææ¡£åä¹¦ç±âç¼è¯âææ¸æ°çç¥è¯æ¡æ¶ãéä¿ç±»æ¯åè®°å¿å£è¯ãæAIåæä½ çè®¤ç¥åç¼©å·¥å·ï¼å®ç°ä»âå¤ç§¯âå°âååâçéç»´æå»ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>æ¿è®¤å§ï¼æä»¬é½æ¯<strong>âæ°å­æ¾é¼ â</strong>ã</p>
<p>çå°ä¸ç¯ãå¾®æå¡æ¶æè¯¦è§£ãï¼æ¶èï¼<br>
å·å°ä¸ä¸ªã10åéç²¾éRustãï¼ç¨åè¯»ï¼<br>
åç°ä¸æ¬ãç®æ³å¯¼è®ºãPDFï¼ä¸è½½ä¿å­ï¼</p>
<p>ç¶åå¢ï¼å®ä»¬å°±åä½ Steamåºéçæ¸¸æä¸æ ·ï¼ééå°èººå¨ç¡¬ççæä¸ªè§è½ï¼ç´å°ä½ æ¢äºä¸ä¸å°çµèã</p>
<p><strong>å¤ç§¯ç¥è¯å¸¦æ¥çä¸æ¯åå®æï¼èæ¯æ´æ·±å±çææ¯ç¦èã</strong> æä»¬çå¤§èI/Oå¸¦å®½æ¯æéçï¼è¯å¾ç¨âéåâçæ¹å¼å»å¤çæµ·éä¿¡æ¯ï¼ç»æåªè½æ¯Buffer Overflowï¼ç¼å²åºæº¢åºï¼ã</p>
<p>å¨ä¿¡æ¯çç¸çæ¶ä»£ï¼<strong>âå­¦è¿âåâå­¦ä¼âä¹é´ï¼éçä¸ä¸ªå·¨å¤§çâç¼è¯âè¿ç¨ã</strong></p>
<p>åªéè¯»ä¸æ»ç»ï¼å°±ååä»£ç ä¸ç¼è¯ï¼æ°¸è¿è·ä¸èµ·æ¥ãèä»å¤©ï¼æè¦æè¿ä¸ªæèæ¶çâç¼è¯âè¿ç¨ï¼å¤åç»ææé¿å¤çææ¬çAIã</p>
<p><img alt="æ¶èå¤¹éçå¹²è´§é½å¨âåç°âï¼è¿æ¡æä»¤æä½ çå¤§èåæâé«åç¼©æ¯âç¥è¯åº" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3695776/202601/3695776-20260106013536386-1245518042.png" class="lazyload"></p>
<h2 id="-è´¹æ¼å­¦ä¹ æ³çæ°å­åå®ç°">ð§  è´¹æ¼å­¦ä¹ æ³çâæ°å­åâå®ç°</h2>
<p>çæ¥å¾·Â·è´¹æ¼æ¾è¯´ï¼âå¦æä½ ä¸è½ç®åå°è§£éå®ï¼ä½ å°±æ²¡æçæ­£çè§£å®ãâ</p>
<p>ä½é®é¢æ¯ï¼æä»¬ä¸ä»å¿ï¼èä¸æãæå¤æçæ¦å¿µæè§£ãéç»ãç¨äººè¯è®²åºæ¥ï¼è¿ä¸ªè¿ç¨å¤ªç§èäºã</p>
<p>è¿æ­£æ¯æè®¾è®¡è¿æ¡<strong>ãç¥è¯ç¹æ»ç» AI æä»¤ã</strong>çåè¡·ãå®ä¸æ¯ä¸ä¸ªç®åçâæè¦å·¥å·âï¼èæ¯ä¸ä¸ªå¼ºå¶æ§è¡<strong>è´¹æ¼å­¦ä¹ æ³</strong>ç<strong>âè®¤ç¥ç¼è¯å¨â</strong>ã</p>
<p>å®ä¼å¼ºè¿« AI æ®æ¼ä¸ä½æ·±è°è®¤ç¥å¿çå­¦çâå­¦ä¹ å¤§å¸âï¼æé£äºæ¦æ¶©çå®æ¹ææ¡£ãæ¯ç¥çæç§ä¹¦ãé¿ç¯å¤§è®ºçææ¯åå®¢ï¼<strong>âæ æåç¼©â</strong>æä½ å¤§èæå®¹æå¼å®¹çæ ¼å¼ã</p>
<h3 id="ï¸-å¤å¶è¿ä¸ªæä»¤ç»ä½ çå¤§èè£ä¸ªè§£åè½¯ä»¶">ð ï¸ å¤å¶è¿ä¸ªæä»¤ï¼ç»ä½ çå¤§èè£ä¸ªâè§£åè½¯ä»¶â</h3>
<p>è¿æ¡æä»¤çæ ¸å¿é»è¾æ¯<strong>âéç»´æå»â</strong>ãå®è¦æ± AI å°é«ç»´çå¤æç¥è¯ï¼æè§£ä¸º<strong>æ ¸å¿æ¦å¿µãéä¿ç±»æ¯ãè®°å¿æé©ãèªæµéªè¯</strong>åä¸ªç»´åº¦ã</p>
<p>ä¸ç®¡ä½ æ¯è¦å¤èç³»ç»æ¶æå¸ï¼è¿æ¯æ³ææä»ä¹æ¯ Transformer æ¨¡åï¼æç»å®ï¼å®å°±è½ååºâäººè¯âã</p>
<pre><code class="language-markdown"># è§è²å®ä¹
ä½ æ¯ä¸ä½èµæ·±çå­¦ä¹ æ¹æ³ä¸å®¶åç¥è¯æ´çå¤§å¸ï¼æ¥æ10å¹´ä»¥ä¸çæè²å¹è®­ç»éªãä½ æé¿è¿ç¨è´¹æ¼å­¦ä¹ æ³ãæç»´å¯¼å¾ãè®°å¿å®«æ®¿ç­å¤ç§å­¦ä¹ æå·§ï¼è½å¤å°å¤æçç¥è¯ä½ç³»æè§£ä¸ºæ¸æ°ãææãæè®°çç¥è¯ç¹ãä½ æ·±è°è®¤ç¥å¿çå­¦åçï¼åäºæå»ºç¥è¯æ¡æ¶ï¼å¸®å©å­¦ä¹ èé«æææ¡åååç¥è¯ã

# ä»»å¡æè¿°
è¯·éå¯¹ä»¥ä¸å­¦ä¹ åå®¹ï¼è¿è¡ä¸ä¸çç¥è¯ç¹æ»ç»åæ´çãä½ çç®æ æ¯å¸®å©ææå»ºæ¸æ°çç¥è¯æ¡æ¶ï¼æç¼æ ¸å¿è¦ç¹ï¼å¹¶æä¾ææçè®°å¿åçè§£æ¹æ³ã

**è¾å¥ä¿¡æ¯**:
- å­¦ä¹ ä¸»é¢/åå®¹: [è¯·ç²è´´ææè¿°éè¦æ»ç»çå­¦ä¹ åå®¹]
- å­¦ç§é¢å: [å¦ï¼æ°å­¦ãç©çãåå²ãç¼ç¨ãç»æµå­¦ç­]
- å­¦ä¹ ç®ç: [å¦ï¼èè¯å¤èãæè½æåãå´è¶£æ¢ç´¢ãå·¥ä½åºç¨ç­]
- å½åæ°´å¹³: [å¦ï¼é¶åºç¡ãæä¸å®äºè§£ãä¸­çº§ãè¿é¶ç­]
- æ¶é´è¦æ±: [å¦ï¼å¿«éæ¦è§5åéãæ·±åº¦å­¦ä¹ 30åéãç³»ç»ææ¡ç­]

# è¾åºè¦æ±

## 1. åå®¹ç»æ
è¯·æç§ä»¥ä¸ç»æè¾åºç¥è¯ç¹æ»ç»ï¼

### ð æ ¸å¿æ¦å¿µéè§
- ç¨1-3å¥è¯æ¦æ¬è¿ä¸ªç¥è¯ç¹çæ¬è´¨
- è¯´æè¿ä¸ªç¥è¯ç¹å¨æ´ä¸ªç¥è¯ä½ç³»ä¸­çä½ç½®åéè¦æ§

### ð¯ å³é®ç¥è¯ç¹
- æç¼3-7ä¸ªæ ¸å¿ç¥è¯ç¹
- æ¯ä¸ªç¥è¯ç¹ç¨ç®æ´çæ é¢+è¯¦ç»è§£éçå½¢å¼åç°
- æ æ³¨éè¦ç¨åº¦ï¼â­å¿è/å¿ä¼ãð¸éç¹ãð¡æå±ï¼

### ð ç¥è¯æ¡æ¶å¾
- ç¨æå­çæç»´å¯¼å¾æå±çº§ç»æå±ç¤ºç¥è¯ç¹ä¹é´çå³ç³»
- æ ææ ¸å¿æ¦å¿µãåæ¯æ¦å¿µãå³èæ¦å¿µ

### ð¡ éä¿çè§£
- ç¨çæ´»åçç±»æ¯ææ¯å»è§£éé¾ç¹
- æä¾å·ä½çä¾å­å¸®å©çè§£

### ð è®°å¿æå·§
- æä¾å£è¯ãèæ³è®°å¿ãé¦å­æ¯ç¼©åç­è®°å¿æ¹æ³
- è®¾è®¡1-2ä¸ªå¸®å©è®°å¿çå°æäºæåºæ¯

### â èªæµæ¸å
- è®¾è®¡3-5ä¸ªèªæµé®é¢æ£éªçè§£ç¨åº¦
- é®é¢ç±æå°é¾æå

### ð å³èæå±
- ä¸è¯¥ç¥è¯ç¹ç¸å³çå¶ä»ç¥è¯ç¹
- æ¨èçè¿ä¸æ­¥å­¦ä¹ æ¹å

## 2. è´¨éæ å
- **åç¡®æ§**: ç¥è¯ç¹å¿é¡»åç¡®æ è¯¯ï¼ä¸ä¸æ¯è¯­ä½¿ç¨è§è
- **å®æ´æ§**: è¦çè¯¥ä¸»é¢çæææ ¸å¿è¦ç¹ï¼ä¸éæ¼å³é®ä¿¡æ¯
- **ç®æ´æ§**: è¯­è¨ç²¾ç¼ï¼é¿ååä½ï¼æ¯ä¸ªè¦ç¹è¨ç®æèµ
- **é»è¾æ§**: ç¥è¯ç¹ä¹é´çå³ç³»æ¸æ°ï¼å±æ¬¡åæ
- **å®ç¨æ§**: ä¾¿äºè®°å¿ååºç¨ï¼çæ­£è½å¸®å©å­¦ä¹ è

## 3. æ ¼å¼è¦æ±
- ä½¿ç¨Markdownæ ¼å¼ï¼å±æ¬¡æ¸æ°
- åç¨è¡¨æ ¼å¯¹æ¯ç¸ä¼¼æ¦å¿µ
- éç¹åå®¹ä½¿ç¨**å ç²**æ`é«äº®`æ æ³¨
- éå½ä½¿ç¨emojiå¢å¼ºå¯è¯»æ§
- æ»å­æ°æ§å¶å¨800-2000å­ä¹é´ï¼æ ¹æ®åå®¹å¤æåº¦è°æ´ï¼

## 4. é£æ ¼çº¦æ
- **è¯­è¨é£æ ¼**: éä¿ææä½ä¸å¤±ä¸ä¸æ§ï¼åä¸ä½èå¿çèå¸å¨è®²è§£
- **è¡¨è¾¾æ¹å¼**: ç¬¬äºäººç§°"ä½ "ï¼å¢å¼ºäº²åæåäºå¨æ
- **ä¸ä¸ç¨åº¦**: æ ¹æ®ç¨æ·çå½åæ°´å¹³è°æ´ï¼é¶åºç¡æ´æ³¨ééä¿ï¼è¿é¶æ´æ³¨éæ·±åº¦

# è´¨éæ£æ¥æ¸å

å¨å®æè¾åºåï¼è¯·èªææ£æ¥ï¼
- [ ] æ ¸å¿æ¦å¿µæ¯å¦ç¨æç®æ´çè¯­è¨è§£éæ¸æ¥ï¼
- [ ] ç¥è¯æ¡æ¶æ¯å¦å®æ´ä¸é»è¾æ¸æ°ï¼
- [ ] æ¯å¦æä¾äºææçè®°å¿æå·§ï¼
- [ ] éä¿ç±»æ¯æ¯å¦è´´åææï¼
- [ ] èªæµé®é¢æ¯å¦è½æææ£éªçè§£ç¨åº¦ï¼

# æ³¨æäºé¡¹
- ç¡®ä¿ç¥è¯ç¹çåç¡®æ§ï¼å¦æä¸ç¡®å®çåå®¹è¯·æ æ³¨è¯´æ
- é¿åä½¿ç¨è¿äºä¸ä¸çæ¯è¯­ï¼å¦å¿é¡»ä½¿ç¨åæä¾è§£é
- ç¥è¯ç¹æ»ç»è¦çªåºéç¹ï¼åºå"å¿é¡»ææ¡"å"äºè§£å³å¯"
- éå¯¹ææ··æ·çæ¦å¿µï¼ä¸é¨è¿è¡å¯¹æ¯åºå

# è¾åºæ ¼å¼
è¯·ä¸¥æ ¼æç§ä¸è¿°ç»æè¾åºï¼ç¡®ä¿æ ¼å¼æ´æ´ãåå®¹å®æ´ãå¦æè¾å¥çå­¦ä¹ åå®¹è¾å¤ï¼å¯ä»¥åæ¨¡åè¿è¡æ»ç»ã
</code></pre>
<h2 id="ï¸-å®ææµè¯æå¤©ä¹¦åæå°æ">â¡ï¸ å®ææµè¯ï¼æâå¤©ä¹¦âåæâå°æâ</h2>
<p>ä¸ºäºéªè¯è¿ä¸ªâç¼è¯å¨âçæ§è½ï¼ææ¾äºä¸ä¸ªè®©æ æ° Python åå­¦èå¤´å¤§çæ¦å¿µï¼<strong>åè¡¨æ¨å¯¼å¼ï¼List Comprehensionï¼</strong>ã</p>
<p>å¦æä¸ä½¿ç¨è¿ä¸ªæä»¤ï¼ä½ æå°çæç¨å¯è½æ¯ä¸å æ¯ç¥çè¯­æ³ç³è§£éãä½çç AI æ¿å°è¿ä¸ªæä»¤åè¾åºäºä»ä¹ï¼</p>
<p><strong>è¾å¥</strong>ï¼</p>
<blockquote>
<p>å­¦ä¹ ä¸»é¢ï¼Pythonåè¡¨æ¨å¯¼å¼<br>
å½åæ°´å¹³ï¼åºç¡è¯­æ³å·²ææ¡<br>
æ¶é´è¦æ±ï¼å¿«éæ¦è§10åé</p>
</blockquote>
<p><strong>AI è¾åºçé«è½çæ®µ</strong>ï¼</p>
<blockquote>
<p><strong>ð¡ éä¿çè§£</strong><br>
<strong>ç±»æ¯ï¼æµæ°´çº¿å·¥å</strong><br>
æ³è±¡ä¸æ¡çäº§æµæ°´çº¿ï¼</p>
<ul>
<li>åææï¼å¯è¿­ä»£å¯¹è±¡ï¼æ¾å¨ä¼ éå¸¦ä¸</li>
<li>è´¨æ£åï¼ifæ¡ä»¶ï¼ç­éåæ ¼å</li>
<li>å å·¥æºå¨ï¼è¡¨è¾¾å¼ï¼å¯¹åæ ¼åè¿è¡å å·¥</li>
<li>æç»äº§åè£ç®±ï¼æ°åè¡¨ï¼</li>
</ul>
<p>æ®éåæ³ = æå·¥ä½åï¼ä¸æ­¥ä¸æ­¥æ¥<br>
åè¡¨æ¨å¯¼å¼ = èªå¨åæµæ°´çº¿ï¼ä¸æ°åµæ</p>
</blockquote>
<blockquote>
<p><strong>ð è®°å¿æå·§</strong><br>
<strong>å£è¯</strong>: "æ¹æ¬å·éåå¾ªç¯ï¼è¡¨è¾¾å¼æ¾æåé¢ï¼æ¡ä»¶ç­éæ¾åé¢"</p>
</blockquote>
<p>çå°åºå«äºåï¼å®æ²¡æå ç æ¯è¯­ï¼èæ¯ç´æ¥æå»ºäºä¸ä¸ª<strong>å¿çæ¨¡åï¼Mental Modelï¼</strong>ãè¿ææ¯æé«æçç¥è¯åç¼©ã</p>
<h2 id="-éæ°å®ä¹ä½ çå­¦ä¹ å·¥ä½æµ">ð éæ°å®ä¹ä½ çâå­¦ä¹ å·¥ä½æµâ</h2>
<p>å¨è¿ä¸ªææ¯è¿­ä»£æ¯ç¿»ä¹¦è¿å¿«çå¹´ä»£ï¼<strong>âå­¦ä¹ éåº¦âå°±æ¯ä½ çæ ¸å¿ç«äºå</strong>ã</p>
<p>å»ºè®®ä½ æè¿ä¸ªæä»¤ä¿å­å°ä½ ç Note å·¥å·éï¼æèç´æ¥ä½ä¸º AI å©æç Presetï¼ãä¸ä¸æ¬¡ï¼å½ä½ é¢å¯¹ï¼</p>
<ol>
<li><strong>æ°ææ¯çå®æ¹ææ¡£</strong>ï¼å¤ªé¿ä¸ççï¼</li>
<li><strong>æ¦æ¶©çå­¦æ¯è®ºæ</strong>ï¼åªçç»è®ºçï¼</li>
<li><strong>æ¯ç¥çåè§æ¡ä¾</strong>ï¼è¦ç¹æåçï¼</li>
</ol>
<p>å«åååªç®¡æ¶èçâæ¾é¼ åâäºã<strong>Copy æä»¤ -&gt; ç²è´´åå®¹ -&gt; è·åâä½å¼çº¸â</strong>ã</p>
<p>æçä¸æ¥çæ¶é´ï¼å»åä»£ç ï¼å»æå»ºäº§åï¼å»åé çæ­£çä»·å¼ãæ¯ç«ï¼<strong>åªæè¢«æ¶åçç¥è¯ï¼æéå«âå¹²è´§âã</strong></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-06 01:36">2026-01-06 01:36</span>&nbsp;
<a href="https://www.cnblogs.com/huizhudev">realhuizhu</a>&nbsp;
éè¯»(<span id="post_view_count">44</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19445127);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19445127', targetLink: 'https://www.cnblogs.com/huizhudev/p/19445127', title: 'æ¶èå¤¹éçå¹²è´§é½å¨âåç°âï¼è¿æ¡æä»¤æä½ çå¤§èåæâé«åç¼©æ¯âç¥è¯åº' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Flinkæºç éè¯»ï¼çªå£ ]]></title>
    <link>https://www.cnblogs.com/Jackeyzhe/p/19444937</link>
    <guid>24f886def92809f3307de5ab1dcc7547</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Jackeyzhe/p/19444937" title="åå¸äº 2026-01-05 22:47">
    <span role="heading" aria-level="2">Flinkæºç éè¯»ï¼çªå£</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/1828322/202601/1828322-20260105224732284-1871293272.png" alt="Flinkæºç éè¯»ï¼çªå£" class="desc_img">
        åææä»¬æ¢³çäº Watermark ç¸å³çæºç ï¼Watermark çä½ç¨å°±æ¯ç¨æ¥è§¦åçªå£ï¼æ¬ææä»¬å°±ä¸èµ·çä¸ä¸çªå£ç¸å³çæºç ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>åææä»¬æ¢³çäº Watermark ç¸å³çæºç ï¼Watermark çä½ç¨å°±æ¯ç¨æ¥è§¦åçªå£ï¼æ¬ææä»¬å°±ä¸èµ·çä¸ä¸çªå£ç¸å³çæºç ã</p>
<h3 id="åå¨åé¢">åå¨åé¢</h3>
<p>å¨<a href="https://jackeyzhe.github.io/2025/07/19/Flink%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%9A%E7%AA%97%E5%8F%A3/" target="_blank" rel="noopener nofollow">Flinkå­¦ä¹ ç¬è®°ï¼çªå£</a>ä¸æä¸­ï¼æä»¬ä»ç»äºçªå£çåç±»ä»¥ååºæ¬çç¨æ³ãæç§å¤çæ°æ®æµçç±»åååï¼Flink å¯ä»¥åä¸º Keyed Window å Non-Keyed Windowï¼å®ä»¬çç¨æ³å¦ä¸ï¼</p>
<pre><code class="language-java">stream
       .keyBy(...)               &lt;-  ä» keyed çªå£éè¦
       .window(...)              &lt;-  å¿å¡«é¡¹ï¼"assigner"
      [.trigger(...)]            &lt;-  å¯éé¡¹ï¼"trigger" (çç¥åä½¿ç¨é»è®¤ trigger)
      [.evictor(...)]            &lt;-  å¯éé¡¹ï¼"evictor" (çç¥åä¸ä½¿ç¨ evictor)
      [.allowedLateness(...)]    &lt;-  å¯éé¡¹ï¼"lateness" (çç¥åä¸º 0)
      [.sideOutputLateData(...)] &lt;-  å¯éé¡¹ï¼"output tag" (çç¥åä¸å¯¹è¿å°æ°æ®ä½¿ç¨ side output)
       .reduce/aggregate/apply()      &lt;-  å¿å¡«é¡¹ï¼"function"
      [.getSideOutput(...)]      &lt;-  å¯éé¡¹ï¼"output tag"

stream
       .windowAll(...)           &lt;-  å¿å¡«é¡¹ï¼"assigner"
      [.trigger(...)]            &lt;-  å¯éé¡¹ï¼"trigger" (else default trigger)
      [.evictor(...)]            &lt;-  å¯éé¡¹ï¼"evictor" (else no evictor)
      [.allowedLateness(...)]    &lt;-  å¯éé¡¹ï¼"lateness" (else zero)
      [.sideOutputLateData(...)] &lt;-  å¯éé¡¹ï¼"output tag" (else no side output for late data)
       .reduce/aggregate/apply()      &lt;-  å¿å¡«é¡¹ï¼"function"
      [.getSideOutput(...)]      &lt;-  å¯éé¡¹ï¼"output tag"
</code></pre>
<p>ä¸é¢æä»¬æ ¹æ®ç¨æ³ï¼åå«æ¥çä¸¤ç§çªå£çæºç ã</p>
<h3 id="keyed-window">Keyed Window</h3>
<p><img alt="KeyedWindow" loading="lazy" data-src="https://res.cloudinary.com/dxydgihag/image/upload/v1766394316/Blog/flink/16/KeyedWindow.png" class="lazyload"></p>
<h4 id="windowassigner">WindowAssigner</h4>
<p>å¨ç¤ºä¾ä»£ç ä¸­ï¼æ°æ®æµç±»åæµè½¬è¿ç¨å¦å¾ãæä»¬èç¦äº WindowedStreamï¼å®æ¯å¨è°ç¨ <code>KeyedStream.window</code> æ¹æ³ä¹åçæçãwindow æ¹æ³éè¦ä¼ å¥ä¸ä¸ª WindowAssignerï¼ç¨æ¥ç¡®å®ä¸æ¡æ¶æ¯å±äºåªå ä¸ªçªå£ï¼åä¸ªç±»åççªå£é½æä¸åçå®ç°ã</p>
<p><img alt="windowAssigner" loading="lazy" data-src="https://res.cloudinary.com/dxydgihag/image/upload/v1766472754/Blog/flink/16/windowAssigner.png" class="lazyload"></p>
<p>æä»¬ä»¥ TumblingEventTimeWindows ä¸ºä¾ï¼çä¸ä¸å®å·ä½çåéé»è¾ã</p>
<pre><code class="language-java">public Collection&lt;TimeWindow&gt; assignWindows(
        Object element, long timestamp, WindowAssignerContext context) {
    if (timestamp &gt; Long.MIN_VALUE) {
        if (staggerOffset == null) {
            staggerOffset =
                    windowStagger.getStaggerOffset(context.getCurrentProcessingTime(), size);
        }
        // Long.MIN_VALUE is currently assigned when no timestamp is present
        long start =
                TimeWindow.getWindowStartWithOffset(
                        timestamp, (globalOffset + staggerOffset) % size, size);
        return Collections.singletonList(new TimeWindow(start, start + size));
    } else {
        throw new RuntimeException(
                "Record has Long.MIN_VALUE timestamp (= no timestamp marker). "
                        + "Did you forget to call 'DataStream.assignTimestampsAndWatermarks(...)'?");
    }
}
</code></pre>
<p>è¿éå°±æ¯æ ¹æ®æ¶æ¯ç timestamp æ¥ç¡®å®çªå£çå¼å§åç»ææ¶é´ï¼ç¶åè¿åæ¶æ¯æå±ççªå£ãè¿éè¿æä¸ª windowStagger åéï¼å®æ¯çªå£è§¦åæ¯å¦éå³°çéç½®ï¼å¦æä½ çä»»å¡ææåä¸ä¸ä¸ªå­ä»»å¡ï¼åæ¶è§¦åçªå£è®¡ç®å¸¦æ¥çç¬æ¶æµéå¯è½ä¼å¯¹æå¡å¨æ¬èº«åä¸æ¸¸é æç¨³å®æ§çå½±åï¼è¿æ¶å°±å¯ä»¥éè¿ä¿®æ¹ WindowStagger éç½®å°æµéææ£ã</p>
<p>å°æä»¬èªå·±å®ä¹å¥½ç WindowAssigner ä¼ å¥ window æ¹æ³åï¼ä¼åå»ºä¸ä¸ª WindowOperatorBuilderï¼å®è´è´£åå»ºä¸ä¸ª WindowOperator å¯¹è±¡ï¼WindowOperator æ¥æ§è¡çªå£å·ä½çè®¡ç®é»è¾ã</p>
<pre><code class="language-java">public WindowedStream(KeyedStream&lt;T, K&gt; input, WindowAssigner&lt;? super T, W&gt; windowAssigner) {

    this.input = input;
    this.isEnableAsyncState = input.isEnableAsyncState();

    this.builder =
            new WindowOperatorBuilder&lt;&gt;(
                    windowAssigner,
                    windowAssigner.getDefaultTrigger(),
                    input.getExecutionConfig(),
                    input.getType(),
                    input.getKeySelector(),
                    input.getKeyType());
}
</code></pre>
<h4 id="trigger">Trigger</h4>
<p>æäº WindowOperatorBuilder ä¹åï¼æä»¬å¯ä»¥å¯¹å®è¿è¡ä¸äºè®¾ç½®ï¼å¦ triggerãevictor ç­ï¼trigger ä¸­æä¾äºä¸äºåè°å½æ°ï¼è¿äºåè°å½æ°çè¿åç»æ TriggerResult å³å®äºæ¯å¦è§¦åçªå£è®¡ç®ã</p>
<pre><code class="language-java">public abstract class Trigger&lt;T, W extends Window&gt; implements Serializable {

    private static final long serialVersionUID = -4104633972991191369L;

    public abstract TriggerResult onElement(T element, long timestamp, W window, TriggerContext ctx)
            throws Exception;

    public abstract TriggerResult onProcessingTime(long time, W window, TriggerContext ctx)
            throws Exception;

    public abstract TriggerResult onEventTime(long time, W window, TriggerContext ctx)
            throws Exception;

    public boolean canMerge() {
        return false;
    }

    public void onMerge(W window, OnMergeContext ctx) throws Exception {
        throw new UnsupportedOperationException("This trigger does not support merging.");
    }

    public abstract void clear(W window, TriggerContext ctx) throws Exception;
}
</code></pre>
<p>åè°å½æ°æä¸ä¸ªï¼åå«æ¯ onElementãonProcessingTimeãonEventTimeï¼onElement æ¯å¨å¤çæ¯æ¡æ¶æ¯çæ¶åè§¦åï¼onProcessingTime å onEventTime é½æ¯ä¸å®æ¶å¨éåè§¦åï¼ä¸ä¸ç¯æç« æä»¬æå°è¿ï¼å¨å¤ç Watermark çæ¶åä¼æ³¨åå®æ¶å¨ï¼è§¦åæ¶å°±ä¼åè°è¿ä¸¤ä¸ªæ¹æ³ã</p>
<p>æ­¤å¤ï¼Trigger ç±»ä¸­è¿æä¸ä¸ªæ¹æ³ï¼æä»¬ç®åä»ç»ä¸ä¸ãcanMerge æ¯ç¨æ¥å¤æ­çªå£æ¯å¦å¯ä»¥è¢«åå¹¶ï¼onMerge åæ¯å¨åå¹¶çªå£æ¶çåè°æ¹æ³ãclear æ¹æ³ç¨äºæ¸é¤çªå£çç¶ææ°æ®ã</p>
<pre><code class="language-java">public enum TriggerResult {

    /** No action is taken on the window. */
    CONTINUE(false, false),

    /** {@code FIRE_AND_PURGE} evaluates the window function and emits the window result. */
    FIRE_AND_PURGE(true, true),

    /**
     * On {@code FIRE}, the window is evaluated and results are emitted. The window is not purged,
     * though, all elements are retained.
     */
    FIRE(true, false),

    /**
     * All elements in the window are cleared and the window is discarded, without evaluating the
     * window function or emitting any elements.
     */
    PURGE(false, true);
}
</code></pre>
<p>è¯´å TriggerResultï¼å®æåç§æä¸¾ï¼</p>
<ul>
<li>
<p>CONTINUEï¼ä»ä¹ä¹ä¸å</p>
</li>
<li>
<p>FIRE_AND_PURGEï¼è§¦åçªå£è®¡ç®å¹¶æ¸é¤çªå£ä¸­çåç´ </p>
</li>
<li>
<p>FIREï¼åªè§¦åçªå£è®¡ç®</p>
</li>
<li>
<p>PURGEï¼æ¸é¤çªå£ä¸­çåç´ ï¼ä¸è§¦åè®¡ç®</p>
</li>
</ul>
<h4 id="evictor">Evictor</h4>
<p>Evictor æ¯ç¨æ¥èªå®ä¹å é¤çªå£ä¸­åç´ ççæ¥å£ï¼å¦æè®¾ç½®äº evictorï¼WindowOperatorBuilder å°±ä¼åå»º EvictingWindowOperatorãå¨æ§è¡çªå£è®¡ç®é»è¾ååï¼é½ä¼è°ç¨ evictBefore å evictAfterã</p>
<pre><code class="language-java">private void emitWindowContents(
        W window, Iterable&lt;StreamRecord&lt;IN&gt;&gt; contents, ListState&lt;StreamRecord&lt;IN&gt;&gt; windowState)
        throws Exception {
    ...
    evictorContext.evictBefore(recordsWithTimestamp, Iterables.size(recordsWithTimestamp));

    FluentIterable&lt;IN&gt; projectedContents =
            recordsWithTimestamp.transform(
                    new Function&lt;TimestampedValue&lt;IN&gt;, IN&gt;() {
                        @Override
                        public IN apply(TimestampedValue&lt;IN&gt; input) {
                            return input.getValue();
                        }
                    });

    processContext.window = triggerContext.window;
    userFunction.process(
            triggerContext.key,
            triggerContext.window,
            processContext,
            projectedContents,
            timestampedCollector);
    evictorContext.evictAfter(recordsWithTimestamp, Iterables.size(recordsWithTimestamp));
    ...
}
</code></pre>
<h4 id="allowedlateness--sideoutputlatedata">allowedLateness &amp; sideOutputLateData</h4>
<p>allowedLateness å sideOutputLateData é½æ¯éå¯¹è¿å°æ°æ®çï¼allowedLateness æ¯ç¨æ¥æå®åè®¸çæå¤§è¿å°æ¶é¿ï¼sideOutputLateData åæ¯å°è¿å°æ°æ®è¾åºå°æå® outputTagã</p>
<p>å¤æ­æ¯å¦è¿å°çæ¹æ³å¦ä¸ï¼</p>
<pre><code class="language-java">protected boolean isElementLate(StreamRecord&lt;IN&gt; element) {
    return (windowAssigner.isEventTime())
            &amp;&amp; (element.getTimestamp() + allowedLateness
                    &lt;= internalTimerService.currentWatermark());
}
</code></pre>
<p>å¦ææ¯è¿å°æ°æ®ï¼åè¿è¡å¦ä¸å¤çï¼</p>
<pre><code class="language-java">if (isSkippedElement &amp;&amp; isElementLate(element)) {
    if (lateDataOutputTag != null) {
        sideOutput(element);
    } else {
        this.numLateRecordsDropped.inc();
    }
}
</code></pre>
<h4 id="windowoperator">WindowOperator</h4>
<p>è®¾ç½®å¥½ WindowOperatorBuilder ä¹åï¼æ¥çå°±å¯ä»¥è°ç¨ process/aggregate/reduce ç­æ¹æ³è¿è¡æ°æ®è®¡ç®ã</p>
<p>æä»¬ä»¥ process æ¹æ³ä¸ºä¾ï¼æ¥çä¸å·ä½çå¤çé»è¾ã</p>
<pre><code class="language-java">public &lt;R&gt; SingleOutputStreamOperator&lt;R&gt; process(
        ProcessWindowFunction&lt;T, R, K, W&gt; function, TypeInformation&lt;R&gt; resultType) {
    function = input.getExecutionEnvironment().clean(function);

    final String opName = builder.generateOperatorName();
    final String opDesc = builder.generateOperatorDescription(function, null);

    OneInputStreamOperator&lt;T, R&gt; operator =
            isEnableAsyncState ? builder.asyncProcess(function) : builder.process(function);

    return input.transform(opName, resultType, operator).setDescription(opDesc);
}
</code></pre>
<p>å¨ <code>WindowedStream.process</code> æ¹æ³ä¸­ï¼å°±æ¯è°ç¨ WindowOperatorBuilder ç process æ¹æ³ï¼å¦ææ¯å¼æ­¥åè°ç¨å¼æ­¥æ¹æ³ï¼çæ WindowOperatorï¼åå° WindowOperator å å¥å°æ§è¡å¾ä¸­ã</p>
<p>ä¸é¢æä»¬æ¥ç WindowOperator ä¸­å ä¸ªéè¦çæ¹æ³ã</p>
<h5 id="open">open</h5>
<p>é¦åæ¯ open æ¹æ³ï¼å®ä¸»è¦è´è´£è¿è¡åå§åï¼åæ¬åå»º timerServiceï¼åå»º windowState ç­ã</p>
<pre><code class="language-java">public void open() throws Exception {
    super.open();

    this.numLateRecordsDropped = metrics.counter(LATE_ELEMENTS_DROPPED_METRIC_NAME);
    timestampedCollector = new TimestampedCollector&lt;&gt;(output);

    internalTimerService = getInternalTimerService("window-timers", windowSerializer, this);

    triggerContext = new Context(null, null);
    processContext = new WindowContext(null);

    windowAssignerContext =
            new WindowAssigner.WindowAssignerContext() {
                @Override
                public long getCurrentProcessingTime() {
                    return internalTimerService.currentProcessingTime();
                }
            };

    // create (or restore) the state that hold the actual window contents
    // NOTE - the state may be null in the case of the overriding evicting window operator
    if (windowStateDescriptor != null) {
        windowState =
                (InternalAppendingState&lt;K, W, IN, ACC, ACC&gt;)
                        getOrCreateKeyedState(windowSerializer, windowStateDescriptor);
    }

    // create the typed and helper states for merging windows
    if (windowAssigner instanceof MergingWindowAssigner) {
        ...
    }
}
</code></pre>
<h5 id="processelement">processElement</h5>
<p>processElement æ¯è´è´£å¤çè¿å¥çªå£çæ°æ®ï¼è¿éé¦åè°ç¨ <code>WindowAssigner.assignWindows</code> æ¹æ³ç¡®è®¤åç´ å±äºåªäºçªå£ãç¶åéåçªå£è¿è¡å¤çï¼åæ¬å windowState ä¸­æ·»å åç´ ï¼è°ç¨ trigger ç onElement æ¹æ³è·å TriggerResultãå¦æè§¦åäºçªå£è®¡ç®ï¼è°ç¨ emitWindowContents æ§è¡è®¡ç®é»è¾ãæåæ¯å¤çè¿å°æ°æ®ï¼æä»¬åé¢æå°è¿ã</p>
<pre><code class="language-java">public void processElement(StreamRecord&lt;IN&gt; element) throws Exception {
    final Collection&lt;W&gt; elementWindows =
            windowAssigner.assignWindows(
                    element.getValue(), element.getTimestamp(), windowAssignerContext);

    // if element is handled by none of assigned elementWindows
    boolean isSkippedElement = true;

    final K key = this.&lt;K&gt;getKeyedStateBackend().getCurrentKey();

    if (windowAssigner instanceof MergingWindowAssigner) {
        ...
    } else {
        for (W window : elementWindows) {

            // drop if the window is already late
            if (isWindowLate(window)) {
                continue;
            }
            isSkippedElement = false;

            windowState.setCurrentNamespace(window);
            windowState.add(element.getValue());

            triggerContext.key = key;
            triggerContext.window = window;

            TriggerResult triggerResult = triggerContext.onElement(element);

            if (triggerResult.isFire()) {
                ACC contents = windowState.get();
                if (contents != null) {
                    emitWindowContents(window, contents);
                }
            }

            if (triggerResult.isPurge()) {
                windowState.clear();
            }
            registerCleanupTimer(window);
        }
    }

    // side output input event if
    // element not handled by any window
    // late arriving tag has been set
    // windowAssigner is event time and current timestamp + allowed lateness no less than
    // element timestamp
    if (isSkippedElement &amp;&amp; isElementLate(element)) {
        if (lateDataOutputTag != null) {
            sideOutput(element);
        } else {
            this.numLateRecordsDropped.inc();
        }
    }
}
</code></pre>
<h5 id="oneventtime">onEventTime</h5>
<p>onEventTime æ¹æ³æ¯ eventTime è§¦åçªå£è®¡ç®æ¶è°ç¨çãä¸»è¦é»è¾å°±æ¯è·å TriggerResultï¼ç¶åè§¦åè®¡ç®é»è¾ï¼ä»¥åå¯¹ windowState çå¤çã</p>
<pre><code class="language-java">public void onEventTime(InternalTimer&lt;K, W&gt; timer) throws Exception {
    triggerContext.key = timer.getKey();
    triggerContext.window = timer.getNamespace();

    MergingWindowSet&lt;W&gt; mergingWindows;

    if (windowAssigner instanceof MergingWindowAssigner) {
        mergingWindows = getMergingWindowSet();
        W stateWindow = mergingWindows.getStateWindow(triggerContext.window);
        if (stateWindow == null) {
            // Timer firing for non-existent window, this can only happen if a
            // trigger did not clean up timers. We have already cleared the merging
            // window and therefore the Trigger state, however, so nothing to do.
            return;
        } else {
            windowState.setCurrentNamespace(stateWindow);
        }
    } else {
        windowState.setCurrentNamespace(triggerContext.window);
        mergingWindows = null;
    }

    TriggerResult triggerResult = triggerContext.onEventTime(timer.getTimestamp());

    if (triggerResult.isFire()) {
        ACC contents = windowState.get();
        if (contents != null) {
            emitWindowContents(triggerContext.window, contents);
        }
    }

    if (triggerResult.isPurge()) {
        windowState.clear();
    }

    if (windowAssigner.isEventTime()
            &amp;&amp; isCleanupTime(triggerContext.window, timer.getTimestamp())) {
        clearAllState(triggerContext.window, windowState, mergingWindows);
    }

    if (mergingWindows != null) {
        // need to make sure to update the merging state in state
        mergingWindows.persist();
    }
}
</code></pre>
<h5 id="onprocessingtime">onProcessingTime</h5>
<p>onProcessingTime å onEventTime é»è¾åºæ¬ä¸è´ï¼åªæ¯è§¦åæ¡ä»¶ä¸åï¼è¿éå°±ä¸åèµè¿°äºã</p>
<p>è³æ­¤ï¼Keyed Window ä»è®¾ç½®å°ä½¿ç¨çæºç æä»¬å°±æ¢³çå®æäºï¼ä¸é¢åæ¥çå¦å¤ä¸ç§çªå£ Non-Keyed Windowã</p>
<h3 id="non-keyed-window">Non-Keyed Window</h3>
<p><img alt="AllWindow" loading="lazy" data-src="https://res.cloudinary.com/dxydgihag/image/upload/v1766484574/Blog/flink/16/Non-KeyedWindow.png" class="lazyload"></p>
<p>æä»¬è°ç¨ windowAll å¾å° AllWindowedStreamï¼å¨æé å½æ°ä¸­ï¼ä¼ç»å¯¹ input è°ç¨ keyBy æ¹æ³ï¼ä¼ å¥ NullByteKeySelectorï¼ NullByteKeySelector å¯¹æ¯ä¸ª key é½è¿å0ï¼å æ­¤ææç key é½ä¼è¢«åéå°åä¸ä¸ªèç¹ã</p>
<pre><code class="language-java">public class NullByteKeySelector&lt;T&gt; implements KeySelector&lt;T, Byte&gt; {

    private static final long serialVersionUID = 614256539098549020L;

    @Override
    public Byte getKey(T value) throws Exception {
        return 0;
    }
}
</code></pre>
<p>Non-Keyed Window åç»­çé»è¾é½å Keyed Window æ¯è¾ç±»ä¼¼ã</p>
<h3 id="æ»ç»">æ»ç»</h3>
<p>æ¬ææä»¬æ¢³çäºçªå£ç¸å³çæºç ï¼å ä¸ªéç¹æ¦å¿µåæ¬ WindowAssginerãWindowOperatorãTriggerãEvictorãå¶ä¸­ WindowAssigner æ¯ç¨æ¥ç¡®å®ä¸æ¡æ¶æ¯å±äºåªäºçªå£ï¼WindowOperator åæ¯çªå£è®¡ç®é»è¾çå·ä½æ§è¡å±ãTrigger å Evictor åå«ç¨äºè§¦åçªå£åæ¸ççªå£ä¸­æ°æ®ã</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-05 22:48">2026-01-05 22:47</span>&nbsp;
<a href="https://www.cnblogs.com/Jackeyzhe">Jackeyzhe</a>&nbsp;
éè¯»(<span id="post_view_count">27</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19444937);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19444937', targetLink: 'https://www.cnblogs.com/Jackeyzhe/p/19444937', title: 'Flinkæºç éè¯»ï¼çªå£' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ .NET ä¼ ç»ä¿¡æ¯ç³»ç»æ ç¼éæé£ä¹¦å®¡æ¹æµ ]]></title>
    <link>https://www.cnblogs.com/mudtools/p/19444914</link>
    <guid>aeb232d53a9737ce9bc0fd0917d96319</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/mudtools/p/19444914" title="åå¸äº 2026-01-05 22:39">
    <span role="heading" aria-level="2">.NET ä¼ ç»ä¿¡æ¯ç³»ç»æ ç¼éæé£ä¹¦å®¡æ¹æµ</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<blockquote>
<p>å¨æ«æ·±å¤ï¼ä½ æ¶å°ç´§æ¥å®¡æ¹éç¥ââå´åç°åªè½å¨ PC ç«¯å¤çï¼åªè½æ¸é»èµ·åºå¼çµèâ¦â¦</p>
</blockquote>
<p>è¿æ ·çåºæ¯ï¼ä½ æ¯å¦ä¹ç»åè¿ï¼</p>
<p><strong>ä¼ ç» .NET ç³»ç»ä¸ç°ä»£ç§»å¨ååä¹é´çé¸¿æ²ï¼æ­£å¨ææåå¬çä¼ä¸çæç</strong>ãå®¡æ¹å¡å¨æ¡é¢ç«¯ãéç¥æ»åãæ°æ®å­¤å²ââè¿äºé®é¢è®©å·¥ä½ä½éªå¤§æææ£ã</p>
<p>æ¨åéæ¥ï¼ææ¬å¤ªé«ï¼é£é©å¤ªå¤§ã</p>
<p><strong>æ¬æå°å¸¦ä½ èµ°ä¸æ¡æ¸è¿å¼æ¹é ä¹è·¯</strong>ï¼ä¿æ .NET ç³»ç»ä½ä¸ºä¸å¡æ ¸å¿ï¼å°é£ä¹¦å®¡æ¹ä½ä¸ºç§»å¨é¨æ·ï¼éè¿ API å®ç°æ ç¼ååãä»åçãè®¾è®¡å°ç¼ç ï¼å®æ´åç°å¦ä½è®©ä¼ ç»ç³»ç»çåæ°çï¼å®ç°ç§»å¨åãå®æ¶åçç°ä»£ååçº§ã</p>
<p>æ è®ºä½ æ¯å¼åèãæ¶æå¸è¿æ¯ææ¯ç®¡çèï¼é½è½æ¶è·ä¸å¥å¯è½å°ãå¯æ©å±çéææ¹æ¡åç´æ¥å¤ç¨çä»£ç å®è·µã</p>
<h2 id="å½ä¼ ç»ä¸å¡éä¸ç°ä»£ååä¸ºä½å¿é¡»ç ´å£">å½ä¼ ç»ä¸å¡éä¸ç°ä»£ååï¼ä¸ºä½å¿é¡»"ç ´å£"ï¼</h2>
<h3 id="æä»¬æ­£å¨è§£å³ä»ä¹">æä»¬æ­£å¨è§£å³ä»ä¹ï¼</h3>
<p><strong>ä¼ ç» .NET ç³»ç»çå±é</strong></p>
<p>è®¸å¤ä¼ä¸æ¥æå¤å¹´ç´¯ç§¯ç .NET ä¸å¡ç³»ç»ï¼è¿äºç³»ç»å¨ä¼ä¸è¿è¥ä¸­æ®æ¼çæ ¸å¿è§è²ãç¶èï¼éçç§»å¨åå¬åç°ä»£ååå·¥å·çæ®åï¼è¿äºä¼ ç»ç³»ç»æ­£é¢ä¸´çä¸¥å³»çææï¼</p>
<table>
<thead>
<tr>
<th>çç¹</th>
<th>å·ä½è¡¨ç°</th>
<th>ä¸å¡å½±å</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>å®¡æ¹æµç¨å°é­</strong></td>
<td>å®¡æ¹åªè½å¨æ¡é¢ç«¯å®æï¼æ æ³éæ¶éå°å¤ç</td>
<td>ç§»å¨åå¬åé»ï¼ååºè¿ç¼</td>
</tr>
<tr>
<td><strong>éç¥æ¹å¼æ»å</strong></td>
<td>ä¾èµé®ä»¶æç«åæ¶æ¯æ¨é</td>
<td>å®¡æ¹äººåæ¶æ§å·®ï¼æµç¨å»¶è¯¯</td>
</tr>
<tr>
<td><strong>æ°æ®å­¤å²ä¸¥é</strong></td>
<td>å®¡æ¹æ°æ®ä¸ä¸å¡æ°æ®åç¦»</td>
<td>æ æ³å½¢æå®æ´çä¸å¡é­ç¯</td>
</tr>
<tr>
<td><strong>ç¨æ·ä½éªéæ§</strong></td>
<td>çé¢é£æ ¼éæ§ï¼äº¤äºä½éªå·®</td>
<td>ç¨æ·æ»¡æåº¦ä½ï¼ä½¿ç¨ææ¿ä¸é</td>
</tr>
</tbody>
</table>
<p><strong>é£ä¹¦å®¡æ¹çèµè½ä»·å¼</strong></p>
<p>é£ä¹¦å®¡æ¹ä½ä¸ºä¼ä¸çº§çå®¡æ¹åä½å¹³å°ï¼ä¸ºæä»¬æä¾äºä¸ä¸ªçæ³ç"æµç¨åä½ä¸­å¿"ï¼</p>
<div class="mermaid">graph LR
    A[é£ä¹¦å®¡æ¹å¹³å°] --&gt; B[ç§»å¨ä¼å]
    A --&gt; C[å³æ¶å¼ºéç¥]
    A --&gt; D[æµç¨å¯è§å]
    A --&gt; E[å®åå®¡è®¡æ¥å¿]

    B --&gt; B1[éæ¶éå°å¤çå®¡æ¹]
    C --&gt; C1[Appæ¨é/ç­ä¿¡æé]
    D --&gt; D1[ææ½å¼æµç¨éç½®]
    E --&gt; E1[å®æ´æä½çè¿¹è¿½æº¯]
</div><p><strong>æä»¬çæ ¸å¿ç®æ </strong></p>
<p>éè¿æ¬æçå®è·µï¼æä»¬å°å»ºç« <strong>".NET ç³»ç»ä¸ºä¸å¡æ ¸å¿ï¼é£ä¹¦å®¡æ¹ä¸ºæµç¨é¨æ·"</strong> çç°ä»£åæ··åæ¶æï¼</p>
<blockquote>
<p><strong>æ¶ææ¿æ¯</strong>ï¼å°é£ä¹¦å®¡æ¹ä½ä¸ºç»ä¸çç§»å¨å®¡æ¹é¨æ·ï¼ä¿æ .NET ç³»ç»ä½ä¸ºä¸å¡é»è¾åæ°æ®å­å¨çæ ¸å¿ï¼éè¿ API å®æ¶åæ­¥ï¼å½¢æä¼å¿äºè¡¥çååä½ç³»ã</p>
</blockquote>
<h3 id="ä½ å°æ¶è·ä»ä¹">ä½ å°æ¶è·ä»ä¹ï¼</h3>
<ul>
<li>â <strong>ä¸å¥ç«¯å°ç«¯çéææ¹æ³è®º</strong>ï¼è¦çä»åçãè®¾è®¡å°é¨ç½²çå¨æµç¨</li>
<li>â <strong>æ¸æ°ç .NET ä¾§æ¶æèå¾</strong>ï¼åå«å³é®çææ¯éåä¸è®¾è®¡å³ç­</li>
<li>â <strong>å¯ç´æ¥å¤ç¨ç C# æ ¸å¿ä»£ç </strong>ä¸å®è·µä¸­æ»ç»ç"é¿åæå"</li>
<li>â <strong>ä¸ä¸ªå®æ´ç"è¯·åå®¡æ¹"å®ææ¡ä¾</strong>ï¼å©ä½ ä»é¶å°ä¸å®æéªè¯</li>
</ul>
<hr>
<h2 id="é£ä¹¦å®¡æ¹å¼æ¾å¹³å°å¦ä½ä¸æä»¬å¯¹è¯">é£ä¹¦å®¡æ¹å¼æ¾å¹³å°å¦ä½ä¸æä»¬"å¯¹è¯"ï¼</h2>
<h3 id="ååéæçå³é®æµç¨">ååéæçå³é®æµç¨</h3>
<p>é£ä¹¦å®¡æ¹ä¸ .NET ç³»ç»çéææ¯ä¸ä¸ª<strong>ååæ°æ®æµ</strong>çè¿ç¨ï¼</p>
<div class="mermaid">sequenceDiagram
    participant User as ç¨æ·
    participant NET as .NETç³»ç»
    participant API as é£ä¹¦API
    participant FS as é£ä¹¦App

    Note over User,FS: æµç¨è¾åºï¼åèµ·å®¡æ¹
    User-&gt;&gt;NET: 1. æäº¤è¯·åç³è¯·
    NET-&gt;&gt;NET: 2. ä¿å­ä¸å¡æ°æ®ï¼ç¶æï¼å®¡æ¹ä¸­ï¼
    NET-&gt;&gt;API: 3. è°ç¨ CreateInstanceAsync
    API--&gt;&gt;NET: 4. è¿å instance_code
    NET-&gt;&gt;NET: 5. å³èä¸å¡IDä¸instance_code

    Note over User,FS: æµç¨è¾å¥ï¼åè°éç¥
    User-&gt;&gt;FS: 6. å¨é£ä¹¦Appä¸­å®¡æ¹
    FS-&gt;&gt;API: 7. å®¡æ¹å®æ
    API-&gt;&gt;NET: 8. Webhookåè°äºä»¶
    NET-&gt;&gt;NET: 9. æ ¹æ®instance_codeæ´æ°ä¸å¡ç¶æ
</div><h4 id="æµç¨è¾åºåèµ·é¶æ®µ">æµç¨è¾åºï¼åèµ·é¶æ®µï¼</h4>
<p>å½ç¨æ·å¨ .NET ç³»ç»åèµ·å®¡æ¹æ¶ï¼ç³»ç»ä¼ï¼</p>
<ol>
<li>ä¿å­ä¸å¡æ°æ®ï¼ç¶ææ è®°ä¸º"å®¡æ¹ä¸­"</li>
<li>è°ç¨é£ä¹¦ API <code>CreateInstanceAsync</code> åå»ºå®¡æ¹å®ä¾</li>
<li>æ¥æ¶è¿åç <code>instance_code</code>ï¼æä¹åå°å³èè¡¨</li>
</ol>
<h4 id="æµç¨è¾å¥åè°é¶æ®µ">æµç¨è¾å¥ï¼åè°é¶æ®µï¼</h4>
<p>å½å®¡æ¹äººå¨é£ä¹¦ App å®æå®¡æ¹åï¼</p>
<ol>
<li>é£ä¹¦æå¡å¨ä¸»å¨åè° .NET ç³»ç»ç Webhook æ¥å£</li>
<li>.NET ç³»ç»è§£æäºä»¶ï¼æå <code>instance_code</code> å <code>status</code></li>
<li>æ ¹æ®å³èè¡¨æ¥è¯¢å¯¹åºçä¸å¡è®°å½</li>
<li>æ´æ°ä¸å¡ç¶æï¼å®æé­ç¯</li>
</ol>
<h3 id="å¿é¡»çè§£çä¸ä¸ªæ ¸å¿æ¦å¿µ">å¿é¡»çè§£çä¸ä¸ªæ ¸å¿æ¦å¿µ</h3>
<h4 id="å®¡æ¹å®ä¹approval_code">å®¡æ¹å®ä¹ï¼approval_codeï¼</h4>
<p><strong>å®¡æ¹å®ä¹</strong>æ¯å®¡æ¹æµç¨ç"èå¾"ï¼å¨é£ä¹¦ç®¡çåå°éç½®ï¼</p>
<pre><code class="language-csharp">// ç¤ºä¾ï¼è¯·åå®¡æ¹çå®¡æ¹å®ä¹
var approvalCode = "7C468A54-8745-2245-9675-08B7C63E7A85";
</code></pre>
<p><strong>å®ä¹åå«</strong>ï¼</p>
<ul>
<li>è¡¨åç»æï¼è¯·åç±»åãå¼å§æ¶é´ãç»ææ¶é´ãè¯·åäºç±ç­ï¼</li>
<li>å®¡æ¹æµç¨ï¼ç´å±ä¸»ç®¡å®¡æ¹ â äººäºå®¡æ¹ï¼</li>
<li>æéè®¾ç½®ï¼è°å¯ä»¥åèµ·ãè°å¯ä»¥å®¡æ¹ï¼</li>
</ul>
<h4 id="å®¡æ¹å®ä¾instance_code">å®¡æ¹å®ä¾ï¼instance_codeï¼</h4>
<p><strong>å®¡æ¹å®ä¾</strong>æ¯ä¾æ®å®¡æ¹å®ä¹åèµ·çä¸æ¬¡å·ä½å®¡æ¹ä»»å¡ï¼</p>
<pre><code class="language-csharp">// åå»ºå®¡æ¹å®ä¾æ¶è¿å
public record CreateInstancesResult
{
    /// &lt;summary&gt;
    /// å®¡æ¹å®ä¾ Code
    /// &lt;/summary&gt;
    [JsonPropertyName("instance_code")]
    public string InstanceCode { get; set; } = string.Empty;
}
</code></pre>
<p><strong>å³é®å±æ§</strong>ï¼</p>
<ul>
<li>å¯ä¸æ è¯ä¸æ¬¡å®¡æ¹æµç¨</li>
<li>åå«è¯¥æ¬¡å®¡æ¹çææè¡¨åæ°æ®</li>
<li>æ¥æç¬ç«çç¶æï¼å®¡æ¹ä¸­ãéè¿ãæç»ãæ¤åç­ï¼</li>
</ul>
<h4 id="èº«ä»½æ å°åç»">èº«ä»½æ å°ï¼åç»ï¼</h4>
<p>å®ç° .NET ç³»ç»ç¨æ·ä¸é£ä¹¦ç¨æ·çå³èï¼</p>
<div class="mermaid">graph LR
    A[.NETç³»ç»ç¨æ·&lt;br/&gt;UserId: 1001] --&gt;|æ å°å³ç³»| B[é£ä¹¦ç¨æ·&lt;br/&gt;OpenId: ou_3cda9c...]
    B --&gt;|éè¿é£ä¹¦Appå®¡æ¹| C[å®¡æ¹å®æ]
    C --&gt;|åè°instance_code| A
</div><p><strong>å®ç°æ¹å¼</strong>ï¼</p>
<ol>
<li>å¨ .NET ç³»ç»çç¨æ·è¡¨ä¸­æ·»å  <code>FeishuOpenId</code> å­æ®µ</li>
<li>ç¨æ·é¦æ¬¡ç»å½æ¶è¿è¡é£ä¹¦åç»å½è®¤è¯ï¼è·åå¹¶å­å¨ <code>open_id</code></li>
<li>åèµ·å®¡æ¹æ¶ï¼ä½¿ç¨ <code>open_id</code> æå®å®¡æ¹åèµ·äºº</li>
</ol>
<hr>
<h2 id="æå»ºç¨³å¥å¯æ©å±ç-net-ä¾§éæå±">æå»ºç¨³å¥ãå¯æ©å±ç .NET ä¾§éæå±</h2>
<h3 id="ææ¯æ æ¨è">ææ¯æ æ¨è</h3>
<table>
<thead>
<tr>
<th>å±æ¬¡</th>
<th>ææ¯éå</th>
<th>è¯´æ</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>åºç¨æ¡æ¶</strong></td>
<td>.NET 6/8/10</td>
<td>é¿ææ¯æçæ¬ï¼æ§è½ä¼å¼</td>
</tr>
<tr>
<td><strong>é£ä¹¦ SDK</strong></td>
<td>Mud.Feishu</td>
<td>é«åº¦å°è£çé£ä¹¦ API å®¢æ·ç«¯</td>
</tr>
<tr>
<td><strong>Webhook å¤ç</strong></td>
<td>Mud.Feishu.Webhook</td>
<td>é£ä¹¦äºä»¶åè°å¤çç»ä»¶</td>
</tr>
<tr>
<td><strong>è®¤è¯ææ</strong></td>
<td>ASP.NET Core Identity / JWT</td>
<td>åé¨ç³»ç»èº«ä»½ç®¡ç</td>
</tr>
<tr>
<td><strong>å¼æ­¥è§£è¦</strong></td>
<td>RabbitMQ / Hangfire</td>
<td>åè°æ¶æ¯éåå¤çï¼æåå¯é æ§</td>
</tr>
<tr>
<td><strong>æ°æ®å­å¨</strong></td>
<td>SQL Server / PostgreSQL</td>
<td>ä¸å¡æ°æ® + å®¡æ¹å³èè¡¨</td>
</tr>
</tbody>
</table>
<h3 id="åå±æ¶æå¾">åå±æ¶æå¾</h3>
<div class="mermaid">graph TB
    subgraph "è¡¨ç¤ºå± (UI)"
        A[Web åç«¯ / ç§»å¨ç«¯]
    end

    subgraph "åºç¨å± (API)"
        B[LeaveController]
        C[FeishuWebhookController]
    end

    subgraph "é¢åå± (ä¸å¡é»è¾)"
        D[ILeaveService]
        E[ApprovalIntegrationService]
        F[IApprovalService]
    end

    subgraph "åºç¡è®¾æ½å±"
        G[Mud.Feishu HTTPå®¢æ·ç«¯]
        H[Mud.Feishu.Webhookå¤çå¨]
        I[æ°æ®ä»å¨&lt;br/&gt;EF Core]
    end

    A --&gt; B
    A --&gt; C
    B --&gt; D
    C --&gt; E
    D --&gt; F
    E --&gt; F
    F --&gt; G
    F --&gt; H
    F --&gt; I
</div><h4 id="å³é®è®¾è®¡é¢åå±æ½è±¡">å³é®è®¾è®¡ï¼é¢åå±æ½è±¡</h4>
<p>å¨é¢åå±å¼å¥ <code>IApprovalService</code> æ¥å£ï¼å°é£ä¹¦éæç»èä¸æ ¸å¿ä¸å¡é»è¾è§£è¦ï¼</p>
<pre><code class="language-csharp">/// &lt;summary&gt;
/// å®¡æ¹æå¡æ½è±¡æ¥å£ - è§£è¦é£ä¹¦å®ç°ç»è
/// &lt;/summary&gt;
public interface IApprovalService
{
    /// &lt;summary&gt;
    /// åèµ·å®¡æ¹
    /// &lt;/summary&gt;
    Task&lt;string&gt; CreateApprovalAsync(ApprovalRequest request);

    /// &lt;summary&gt;
    /// å¤çå®¡æ¹ç»æåè°
    /// &lt;/summary&gt;
    Task HandleApprovalCallbackAsync(ApprovalCallbackEvent callbackEvent);
}

/// &lt;summary&gt;
/// é£ä¹¦å®¡æ¹æå¡å®ç°
/// &lt;/summary&gt;
public class FeishuApprovalService : IApprovalService
{
    private readonly IFeishuTenantV4Approval _approvalApi;
    private readonly IApprovalRecordRepository _repository;

    public FeishuApprovalService(
        IFeishuTenantV4Approval approvalApi,
        IApprovalRecordRepository repository)
    {
        _approvalApi = approvalApi;
        _repository = repository;
    }

    public async Task&lt;string&gt; CreateApprovalAsync(ApprovalRequest request)
    {
        // è°ç¨é£ä¹¦ API
        var result = await _approvalApi.CreateInstanceAsync(...);
        return result.Data?.InstanceCode ?? string.Empty;
    }
}
</code></pre>
<p><strong>ä¼å¿</strong>ï¼</p>
<ul>
<li>ä¸å¡é»è¾ä¸ä¾èµå·ä½é£ä¹¦å®ç°</li>
<li>ä¾¿äºååæµè¯ï¼å¯ Mock æ¥å£ï¼</li>
<li>æªæ¥å¯è½»æ¾åæ¢å°å¶ä»å®¡æ¹å¹³å°</li>
</ul>
<hr>
<h2 id="å®ææææå®æè¯·åå®¡æ¹éæ">å®æï¼æææå®æ"è¯·åå®¡æ¹"éæ</h2>
<h3 id="ç¬¬ä¸æ­¥é£ä¹¦å¹³å°ä¾§éç½®å®¡æ¹æµåºå£">ç¬¬ä¸æ­¥ï¼é£ä¹¦å¹³å°ä¾§éç½®ï¼å®¡æ¹æµåºå£ï¼</h3>
<h4 id="åå»ºä¼ä¸èªå»ºåºç¨">åå»ºä¼ä¸èªå»ºåºç¨</h4>
<p>ç»å½é£ä¹¦å¼æ¾å¹³å°ï¼<a href="https://open.feishu.cn" target="_blank" rel="noopener nofollow">https://open.feishu.cn</a>ï¼ï¼è¿å¥åºç¨ç®¡çï¼</p>
<div class="mermaid">graph LR
    A[åå»ºèªå»ºåºç¨] --&gt; B[è·åApp ID]
    A --&gt; C[è·åApp Secret]
    B --&gt; D[éç½®å°.NETç³»ç»]
    C --&gt; D
</div><p><strong>å³é®éç½®</strong>ï¼</p>
<ul>
<li>è®°å½ <code>App ID</code> å <code>App Secret</code></li>
<li>éç½®åºç¨æéï¼å®¡æ¹ç¸å³æéï¼<code>approval:approval:read</code>, <code>approval:instance:read</code>, <code>approval:instance:create</code>ï¼</li>
</ul>
<h4 id="éç½®å®¡æ¹å®ä¹">éç½®å®¡æ¹å®ä¹</h4>
<p>å¨é£ä¹¦ç®¡çåå°åå»º"è¯·åå®¡æ¹"æ¨¡æ¿ï¼</p>
<div class="mermaid">graph LR
    A[å®¡æ¹å®ä¹éç½®] --&gt; B[è¡¨åè®¾ç½®]
    A --&gt; C[æµç¨è®¾ç½®]
    A --&gt; D[æéè®¾ç½®]

    B --&gt; B1[è¯·åç±»å&lt;br/&gt;å¼å§æ¶é´&lt;br/&gt;ç»ææ¶é´&lt;br/&gt;è¯·åå¤©æ°&lt;br/&gt;è¯·åäºç±]
    C --&gt; C1[ç´å±ä¸»ç®¡å®¡æ¹&lt;br/&gt;â äººäºå®¡æ¹]
    D --&gt; D1[å¨åå¯åèµ·]
</div><p><strong>è®°å½å³é®ä¿¡æ¯</strong>ï¼</p>
<ul>
<li><code>approval_code</code>ï¼å®¡æ¹å®ä¹çå¯ä¸æ è¯</li>
<li>è¡¨åæ§ä»¶ç <code>id</code>ï¼ç¨äºç¨åºå¡«åè¡¨åæ°æ®</li>
</ul>
<h4 id="éç½®äºä»¶è®¢é">éç½®äºä»¶è®¢é</h4>
<p>å¨é£ä¹¦å¼æ¾å¹³å°éç½® Webhookï¼</p>
<table>
<thead>
<tr>
<th>éç½®é¡¹</th>
<th>å¼</th>
</tr>
</thead>
<tbody>
<tr>
<td>è¯·æ±ç½å</td>
<td><code>https://your-domain.com/api/feishu/webhook</code></td>
</tr>
<tr>
<td>éªè¯ Token</td>
<td><code>your_verification_token</code>ï¼èªå®ä¹ï¼</td>
</tr>
<tr>
<td>å å¯ Key</td>
<td><code>your_encrypt_key</code>ï¼èªå®ä¹ï¼</td>
</tr>
<tr>
<td>è®¢éäºä»¶</td>
<td><code>approval_instance</code>ï¼å®¡æ¹å®ä¾ç¶æåæ´ï¼</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="ç¬¬äºæ­¥net-ä¾§åºç¡æ­å»ºéæåºç³">ç¬¬äºæ­¥ï¼.NET ä¾§åºç¡æ­å»ºï¼éæåºç³ï¼</h3>
<h4 id="å°è£é£ä¹¦-api-å®¢æ·ç«¯">å°è£é£ä¹¦ API å®¢æ·ç«¯</h4>
<p>åºäº <code>MudFeishu SDK</code> å°è£å®¡æ¹æå¡ï¼</p>
<pre><code class="language-csharp">/// &lt;summary&gt;
/// é£ä¹¦å®¡æ¹æå¡å°è£
/// &lt;/summary&gt;
public class FeishuApprovalClient
{
    private readonly IFeishuTenantV4Approval _approvalApi;
    private readonly ILogger&lt;FeishuApprovalClient&gt; _logger;

    public FeishuApprovalClient(
        IFeishuTenantV4Approval approvalApi,
        ILogger&lt;FeishuApprovalClient&gt; logger)
    {
        _approvalApi = approvalApi;
        _logger = logger;
    }

    /// &lt;summary&gt;
    /// åå»ºå®¡æ¹å®ä¾
    /// &lt;/summary&gt;
    public async Task&lt;string&gt; CreateInstanceAsync(CreateInstanceRequest request)
    {
        var result = await _approvalApi.CreateInstanceAsync(request);

        if (result == null || result.Code != 0)
        {
            _logger.LogError("åå»ºå®¡æ¹å®ä¾å¤±è´¥: {Msg}", result?.Msg);
            throw new InvalidOperationException($"åå»ºå®¡æ¹å®ä¾å¤±è´¥: {result?.Msg}");
        }

        _logger.LogInformation("åå»ºå®¡æ¹å®ä¾æå: {InstanceCode}", result.Data?.InstanceCode);
        return result.Data?.InstanceCode ?? string.Empty;
    }

    /// &lt;summary&gt;
    /// è·åå®¡æ¹å®ä¾è¯¦æ
    /// &lt;/summary&gt;
    public async Task&lt;GetApprovalInstanceResult?&gt; GetInstanceAsync(string instanceCode)
    {
        var result = await _approvalApi.GetInstanceByIdAsync(instanceCode);

        if (result == null || result.Code != 0)
        {
            _logger.LogError("è·åå®¡æ¹å®ä¾å¤±è´¥: {Msg}", result?.Msg);
            return null;
        }

        return result.Data;
    }
}
</code></pre>
<h4 id="è®¾è®¡æ°æ®å³èè¡¨">è®¾è®¡æ°æ®å³èè¡¨</h4>
<p>å¨ä¸å¡æ°æ®åºä¸­æ·»å å®¡æ¹å³èè¡¨ï¼</p>
<pre><code class="language-sql">-- å®¡æ¹å³èè¡¨
CREATE TABLE ApprovalRecords (
    Id BIGINT PRIMARY KEY IDENTITY(1,1),
    BusinessType NVARCHAR(50) NOT NULL,          -- ä¸å¡ç±»åï¼LeaveRequest, PurchaseRequest...
    BusinessId BIGINT NOT NULL,                   -- ä¸å¡ID
    InstanceCode NVARCHAR(64) NOT NULL,           -- é£ä¹¦å®¡æ¹å®ä¾Code
    ApprovalCode NVARCHAR(64) NOT NULL,            -- å®¡æ¹å®ä¹Code
    Status NVARCHAR(20) NOT NULL,                  -- ç¶æï¼PENDING, APPROVED, REJECTED...
    CallbackData NVARCHAR(MAX),                   -- åè°æ°æ®ï¼JSONï¼
    CreatedTime DATETIME2 NOT NULL DEFAULT GETUTCDATE(),
    UpdatedTime DATETIME2 NOT NULL DEFAULT GETUTCDATE(),

    CONSTRAINT UK_ApprovalRecords_Business UNIQUE(BusinessType, BusinessId)
);

CREATE INDEX IX_ApprovalRecords_InstanceCode ON ApprovalRecords(InstanceCode);
CREATE INDEX IX_ApprovalRecords_Status ON ApprovalRecords(Status);
</code></pre>
<p>å¯¹åºçå®ä½ç±»ï¼</p>
<pre><code class="language-csharp">/// &lt;summary&gt;
/// å®¡æ¹å³èè®°å½
/// &lt;/summary&gt;
public class ApprovalRecord
{
    public long Id { get; set; }
    public string BusinessType { get; set; } = string.Empty;  // "LeaveRequest"
    public long BusinessId { get; set; }                       // è¯·åç³è¯·ID
    public string InstanceCode { get; set; } = string.Empty;   // é£ä¹¦å®ä¾Code
    public string ApprovalCode { get; set; } = string.Empty;    // å®¡æ¹å®ä¹Code
    public string Status { get; set; } = string.Empty;         // PENDING/APPROVED/REJECTED
    public string? CallbackData { get; set; }                  // JSONæ ¼å¼
    public DateTime CreatedTime { get; set; }
    public DateTime UpdatedTime { get; set; }
}
</code></pre>
<hr>
<h3 id="ç¬¬ä¸æ­¥æ ¸å¿ä¸å¡æµç¨ç¼ç ååèé">ç¬¬ä¸æ­¥ï¼æ ¸å¿ä¸å¡æµç¨ç¼ç ï¼ååèéï¼</h3>
<h4 id="åºæ¯ç¨æ·æäº¤è¯·åååèµ·å®¡æ¹">åºæ¯ï¼ç¨æ·æäº¤è¯·ååï¼åèµ·å®¡æ¹</h4>
<p><strong>æµç¨å¾</strong>ï¼</p>
<div class="mermaid">sequenceDiagram
    participant User as ç¨æ·
    participant Controller as LeaveController
    participant Service as LeaveService
    participant DB as æ°æ®åº
    participant FeishuAPI as é£ä¹¦API

    User-&gt;&gt;Controller: æäº¤è¯·åç³è¯·
    Controller-&gt;&gt;Service: SubmitLeaveRequest(request)
    Service-&gt;&gt;DB: ä¿å­è¯·åè®°å½ï¼ç¶æï¼å®¡æ¹ä¸­ï¼
    Service-&gt;&gt;Service: æé è¡¨åæ°æ®
    Service-&gt;&gt;FeishuAPI: CreateInstanceAsync(approvalCode, form)
    FeishuAPI--&gt;&gt;Service: instance_code
    Service-&gt;&gt;DB: ä¿å­ApprovalRecordå³è
    Service--&gt;&gt;Controller: æäº¤æå
    Controller--&gt;&gt;User: ç­å¾å®¡æ¹
</div><p><strong>ä»£ç å®ç°</strong>ï¼</p>
<pre><code class="language-csharp">/// &lt;summary&gt;
/// è¯·åæå¡
/// &lt;/summary&gt;
public class LeaveService
{
    private readonly ILeaveRequestRepository _leaveRepo;
    private readonly IApprovalRecordRepository _approvalRepo;
    private readonly FeishuApprovalClient _feishuClient;
    private readonly ILogger&lt;LeaveService&gt; _logger;

    public LeaveService(
        ILeaveRequestRepository leaveRepo,
        IApprovalRecordRepository approvalRepo,
        FeishuApprovalClient feishuClient,
        ILogger&lt;LeaveService&gt; logger)
    {
        _leaveRepo = leaveRepo;
        _approvalRepo = approvalRepo;
        _feishuClient = feishuClient;
        _logger = logger;
    }

    /// &lt;summary&gt;
    /// æäº¤è¯·åç³è¯·å¹¶åèµ·å®¡æ¹
    /// &lt;/summary&gt;
    public async Task&lt;long&gt; SubmitLeaveRequestAsync(SubmitLeaveRequestDto dto)
    {
        // 1. ä¿å­è¯·åä¸å¡æ°æ®
        var leaveRequest = new LeaveRequest
        {
            UserId = dto.UserId,
            LeaveType = dto.LeaveType,
            StartTime = dto.StartTime,
            EndTime = dto.EndTime,
            Days = dto.Days,
            Reason = dto.Reason,
            Status = LeaveStatus.Pending,  // å®¡æ¹ä¸­
            CreatedTime = DateTime.UtcNow
        };

        await _leaveRepo.AddAsync(leaveRequest);
        await _leaveRepo.SaveChangesAsync();

        // 2. æé é£ä¹¦å®¡æ¹è¡¨åæ°æ®
        var form = new List&lt;object&gt;
        {
            new { id = "leave_type", type = "select", value = dto.LeaveType },
            new { id = "start_time", type = "date", value = dto.StartTime.ToString("yyyy-MM-dd") },
            new { id = "end_time", type = "date", value = dto.EndTime.ToString("yyyy-MM-dd") },
            new { id = "days", type = "number", value = dto.Days.ToString() },
            new { id = "reason", type = "textarea", value = dto.Reason }
        };

        // 3. è°ç¨é£ä¹¦APIåå»ºå®¡æ¹å®ä¾
        var request = new CreateInstanceRequest
        {
            ApprovalCode = "7C468A54-8745-2245-9675-08B7C63E7A85",  // è¯·åå®¡æ¹å®ä¹Code
            UserId = dto.FeishuUserId,  // é£ä¹¦ç¨æ·ID
            Form = JsonSerializer.Serialize(form),
            Uuid = Guid.NewGuid().ToString()  // å¹ç­ID
        };

        string instanceCode;
        try
        {
            instanceCode = await _feishuClient.CreateInstanceAsync(request);
        }
        catch (Exception ex)
        {
            _logger.LogError(ex, "åå»ºé£ä¹¦å®¡æ¹å®ä¾å¤±è´¥");
            // åæ»ä¸å¡æ°æ®
            leaveRequest.Status = LeaveStatus.Failed;
            await _leaveRepo.SaveChangesAsync();
            throw;
        }

        // 4. ä¿å­å®¡æ¹å³èè®°å½
        var approvalRecord = new ApprovalRecord
        {
            BusinessType = "LeaveRequest",
            BusinessId = leaveRequest.Id,
            InstanceCode = instanceCode,
            ApprovalCode = request.ApprovalCode,
            Status = "PENDING",
            CreatedTime = DateTime.UtcNow,
            UpdatedTime = DateTime.UtcNow
        };

        await _approvalRepo.AddAsync(approvalRecord);
        await _approvalRepo.SaveChangesAsync();

        _logger.LogInformation("è¯·åç³è¯·å·²æäº¤å¹¶åå»ºå®¡æ¹: LeaveId={LeaveId}, InstanceCode={InstanceCode}",
            leaveRequest.Id, instanceCode);

        return leaveRequest.Id;
    }
}
</code></pre>
<h4 id="åºæ¯å®¡æ¹å®ç»é£ä¹¦åè°éç¥ç»æ">åºæ¯ï¼å®¡æ¹å®ç»ï¼é£ä¹¦åè°éç¥ç»æ</h4>
<p><strong>åºäº Mud.Feishu.Webhook å®ç°å®å¨çåè°å¤çå¨</strong></p>
<pre><code class="language-csharp">using Mud.Feishu.Abstractions;
using Mud.Feishu.Abstractions.DataModels.Approval;
using Mud.Feishu.Abstractions.EventHandlers;

/// &lt;summary&gt;
/// å®¡æ¹å®ä¾äºä»¶å¤çå¨
/// &lt;/summary&gt;
public class ApprovalInstanceEventHandler : ApprovalInstanceEventHandler
{
    private readonly IApprovalRecordRepository _approvalRepo;
    private readonly ILeaveRequestRepository _leaveRepo;

    public ApprovalInstanceEventHandler(
        ILogger&lt;ApprovalInstanceEventHandler&gt; logger,
        IApprovalRecordRepository approvalRepo,
        ILeaveRequestRepository leaveRepo)
        : base(logger)
    {
        _approvalRepo = approvalRepo;
        _leaveRepo = leaveRepo;
    }

    /// &lt;summary&gt;
    /// å¤çå®¡æ¹å®ä¾äºä»¶ä¸å¡é»è¾
    /// &lt;/summary&gt;
    protected override async Task ProcessBusinessLogicAsync(
        EventData eventData,
        ObjectEventResult&lt;ApprovalInstanceResult&gt;? eventEntity,
        CancellationToken cancellationToken = default)
    {
        if (eventEntity?.Object == null)
        {
            _logger.LogWarning("å®¡æ¹å®ä¾äºä»¶æ°æ®æ æ");
            return;
        }

        var approvalEvent = eventEntity.Object;

        _logger.LogInformation("æ¶å°å®¡æ¹å®ä¾äºä»¶: InstanceCode={InstanceCode}, Status={Status}",
            approvalEvent.InstanceCode, approvalEvent.Status);

        // å¹ç­æ§å¤çï¼æ£æ¥æ¯å¦å·²å¤çè¿è¯¥äºä»¶
        var existingRecord = await _approvalRepo.GetByInstanceCodeAsync(approvalEvent.InstanceCode ?? string.Empty);
        if (existingRecord != null &amp;&amp; existingRecord.Status == approvalEvent.Status)
        {
            _logger.LogInformation("è¯¥äºä»¶å·²å¤çè¿ï¼è·³è¿: EventId={EventId}", eventData.EventId);
            return;
        }

        // æ ¹æ®ä¸å¡ç±»åå¤çå®¡æ¹ç»æ
        await ProcessApprovalResultAsync(eventData, approvalEvent, cancellationToken);
    }

    /// &lt;summary&gt;
    /// å¤çå®¡æ¹ç»æ
    /// &lt;/summary&gt;
    private async Task ProcessApprovalResultAsync(
        EventData eventData,
        ApprovalInstanceResult approvalEvent,
        CancellationToken cancellationToken)
    {
        if (string.IsNullOrEmpty(approvalEvent.InstanceCode))
        {
            _logger.LogWarning("å®¡æ¹å®ä¾Codeä¸ºç©ºï¼è·³è¿å¤ç");
            return;
        }

        // æ¥è¯¢å®¡æ¹å³èè®°å½
        var approvalRecord = await _approvalRepo.GetByInstanceCodeAsync(approvalEvent.InstanceCode);
        if (approvalRecord == null)
        {
            _logger.LogWarning("æªæ¾å°å®¡æ¹å³èè®°å½: InstanceCode={InstanceCode}",
                approvalEvent.InstanceCode);
            return;
        }

        // æ´æ°å®¡æ¹è®°å½ç¶æ
        approvalRecord.Status = approvalEvent.Status ?? string.Empty;
        approvalRecord.CallbackData = JsonSerializer.Serialize(approvalEvent);
        approvalRecord.UpdatedTime = DateTime.UtcNow;
        await _approvalRepo.SaveChangesAsync();

        // æ ¹æ®ä¸å¡ç±»åå¤ç
        switch (approvalRecord.BusinessType)
        {
            case "LeaveRequest":
                await ProcessLeaveApprovalAsync(approvalRecord, approvalEvent.Status ?? string.Empty);
                break;

            // å¯æ©å±å¶ä»ä¸å¡ç±»å
            default:
                _logger.LogWarning("æªç¥çä¸å¡ç±»å: {BusinessType}", approvalRecord.BusinessType);
                break;
        }
    }

    /// &lt;summary&gt;
    /// å¤çè¯·åå®¡æ¹ç»æ
    /// &lt;/summary&gt;
    private async Task ProcessLeaveApprovalAsync(ApprovalRecord approvalRecord, string status)
    {
        var leaveRequest = await _leaveRepo.GetByIdAsync(approvalRecord.BusinessId);
        if (leaveRequest == null)
        {
            _logger.LogWarning("æªæ¾å°è¯·åç³è¯·: BusinessId={BusinessId}", approvalRecord.BusinessId);
            return;
        }

        // æ ¹æ®å®¡æ¹ç¶ææ´æ°è¯·åè®°å½
        leaveRequest.Status = status switch
        {
            "APPROVED" =&gt; LeaveStatus.Approved,
            "REJECTED" =&gt; LeaveStatus.Rejected,
            "CANCELED" =&gt; LeaveStatus.Canceled,
            "DELETED" =&gt; LeaveStatus.Deleted,
            _ =&gt; LeaveStatus.Pending
        };

        leaveRequest.UpdatedTime = DateTime.UtcNow;
        await _leaveRepo.SaveChangesAsync();

        _logger.LogInformation("è¯·åç³è¯·ç¶æå·²æ´æ°: LeaveId={LeaveId}, Status={Status}",
            leaveRequest.Id, leaveRequest.Status);

        // TODO: åééç¥ç»ç³è¯·äºº
        // TODO: åæ­¥å°èå¤ç³»ç»
    }
}
</code></pre>
<p><strong>æ³¨å Webhook æå¡ï¼Program.csï¼</strong>ï¼</p>
<pre><code class="language-csharp">using Mud.Feishu.Webhook;
using Mud.Feishu;
using YourApp.Handlers;

var builder = WebApplication.CreateBuilder(args);

// æ³¨åé£ä¹¦ API æå¡
builder.Services.AddFeishuServices()
    .ConfigureFrom(builder.Configuration)  // ä» "Feishu" éç½®èè¯»å
    .Build();

// æ³¨åé£ä¹¦ Webhook äºä»¶è®¢éæå¡
builder.Services.AddFeishuWebhookServiceBuilder()
    .ConfigureFrom(builder.Configuration)  // ä» "FeishuWebhook" éç½®èè¯»å
    .AddHandler&lt;ApprovalInstanceEventHandler&gt;()  // æ·»å å®¡æ¹äºä»¶å¤çå¨
    .Build();

// æ³¨åä¸å¡æå¡
builder.Services.AddScoped&lt;ILeaveRequestRepository, LeaveRequestRepository&gt;();
builder.Services.AddScoped&lt;IApprovalRecordRepository, ApprovalRecordRepository&gt;();

var app = builder.Build();

app.UseFeishuWebhook();  // æ·»å  Webhook ä¸­é´ä»¶

app.Run();
</code></pre>
<p><strong>è¯´æ</strong>ï¼</p>
<ul>
<li><code>ApprovalInstanceEventHandler</code> ç»§æ¿èª <code>ApprovalInstanceEventHandler</code> åºç±»</li>
<li>åºç±»å·²ç»å®ç°äº <code>HandleAsync</code> æ¹æ³ï¼ä¼èªå¨ååºåå <code>ApprovalInstanceResult</code> ç±»åçäºä»¶æ°æ®</li>
<li>åªééå <code>ProcessBusinessLogicAsync</code> æ¹æ³å®ç°å·ä½çä¸å¡é»è¾å³å¯</li>
<li>SDK ä¼æ ¹æ® <code>SupportedEventType</code> å±æ§èªå¨è·¯ç±å¯¹åºçäºä»¶å°è¿ä¸ªå¤çå¨</li>
<li><code>AddFeishuServices()</code> æ³¨åé£ä¹¦ API å®¢æ·ç«¯æå¡ï¼ä½¿ç¨ <code>Feishu</code> éç½®è</li>
<li><code>AddFeishuWebhookServiceBuilder()</code> æ³¨å Webhook äºä»¶è®¢éæå¡ï¼ä½¿ç¨ <code>FeishuWebhook</code> éç½®è</li>
</ul>
<p><strong>éç½®æä»¶ï¼appsettings.jsonï¼</strong>ï¼</p>
<pre><code class="language-json">{
  // é£ä¹¦ Webhook äºä»¶è®¢ééç½®
  "FeishuWebhook": {
    "VerificationToken": "your_verification_token",
    "EncryptKey": "your_encrypt_key",
    "RoutePrefix": "api/feishu/webhook",
    "AutoRegisterEndpoint": true,
    "EnableRequestLogging": true,
    "EnableExceptionHandling": true,
    "EventHandlingTimeoutMs": 30000,
    "MaxConcurrentEvents": 10
  },

  // é£ä¹¦ API å®¢æ·ç«¯éç½®
  "Feishu": {
    "AppId": "your_app_id",
    "AppSecret": "your_app_secret",
    "BaseUrl": "https://open.feishu.cn",
    "TimeOut": "30",
    "RetryCount": 3,
    "EnableLogging": true
  }
}
</code></pre>
<hr>
<h3 id="ç¬¬åæ­¥åè½å®åä¸èè°æµè¯">ç¬¬åæ­¥ï¼åè½å®åä¸èè°æµè¯</h3>
<h4 id="ç¶æåæ­¥å±ç¤º">ç¶æåæ­¥å±ç¤º</h4>
<p>å¨è¯·ååè¡¨é¡µå±ç¤ºå®¡æ¹ç¶æï¼</p>
<pre><code class="language-csharp">/// &lt;summary&gt;
/// è¯·ååè¡¨ååºDTO
/// &lt;/summary&gt;
public class LeaveRequestDto
{
    public long Id { get; set; }
    public DateTime StartTime { get; set; }
    public DateTime EndTime { get; set; }
    public int Days { get; set; }
    public string Status { get; set; } = string.Empty;      // ä¸å¡ç¶æï¼Approved, Rejected
    public string ApprovalStatus { get; set; } = string.Empty; // é£ä¹¦å®¡æ¹ç¶æï¼APPROVED, REJECTED, PENDING
    public string? FeishuInstanceUrl { get; set; }          // é£ä¹¦å®¡æ¹è¯¦æé¾æ¥
    public DateTime CreatedTime { get; set; }
}

/// &lt;summary&gt;
/// æ¥è¯¢è¯·ååè¡¨
/// &lt;/summary&gt;
public async Task&lt;List&lt;LeaveRequestDto&gt;&gt; GetLeaveListAsync(long userId)
{
    var leaves = await _leaveRepo.GetByUserIdAsync(userId);
    var instanceCodes = leaves.Select(l =&gt; l.InstanceCode).ToList();

    // æ¹éæ¥è¯¢å®¡æ¹è®°å½
    var approvals = await _approvalRepo.GetByInstanceCodesAsync(instanceCodes);

    var result = leaves.Select(leave =&gt;
    {
        var approval = approvals.FirstOrDefault(a =&gt; a.InstanceCode == leave.InstanceCode);

        return new LeaveRequestDto
        {
            Id = leave.Id,
            StartTime = leave.StartTime,
            EndTime = leave.EndTime,
            Days = leave.Days,
            Status = leave.Status.ToString(),
            ApprovalStatus = approval?.Status ?? "UNKNOWN",
            FeishuInstanceUrl = !string.IsNullOrEmpty(approval?.InstanceCode)
                ? $"https://www.feishu.cn/approval/approval/view/{approval.InstanceCode}"
                : null,
            CreatedTime = leave.CreatedTime
        };
    }).ToList();

    return result;
}
</code></pre>
<h4 id="æ·»å å¨é£ä¹¦ä¸­æ¥çé¾æ¥">æ·»å "å¨é£ä¹¦ä¸­æ¥ç"é¾æ¥</h4>
<p>å¨åè¡¨é¡µæ·»å æä½æé®ï¼</p>
<pre><code class="language-html">&lt;!-- åç«¯é¡µé¢ç¤ºä¾ --&gt;
&lt;table class="leave-list"&gt;
    &lt;thead&gt;
        &lt;tr&gt;
            &lt;th&gt;å¼å§æ¶é´&lt;/th&gt;
            &lt;th&gt;ç»ææ¶é´&lt;/th&gt;
            &lt;th&gt;å¤©æ°&lt;/th&gt;
            &lt;th&gt;å®¡æ¹ç¶æ&lt;/th&gt;
            &lt;th&gt;æä½&lt;/th&gt;
        &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
        @foreach (var leave in Model.Leaves)
        {
            &lt;tr&gt;
                &lt;td&gt;@leave.StartTime.ToString("yyyy-MM-dd")&lt;/td&gt;
                &lt;td&gt;@leave.EndTime.ToString("yyyy-MM-dd")&lt;/td&gt;
                &lt;td&gt;@leave.Days&lt;/td&gt;
                &lt;td&gt;
                    &lt;span class="status @leave.ApprovalStatus"&gt;
                        @GetStatusText(leave.ApprovalStatus)
                    &lt;/span&gt;
                &lt;/td&gt;
                &lt;td&gt;
                    @if (!string.IsNullOrEmpty(leave.FeishuInstanceUrl))
                    {
                        &lt;a href="@leave.FeishuInstanceUrl" target="_blank" class="btn"&gt;
                            å¨é£ä¹¦ä¸­æ¥ç
                        &lt;/a&gt;
                    }
                &lt;/td&gt;
            &lt;/tr&gt;
        }
    &lt;/tbody&gt;
&lt;/table&gt;
</code></pre>
<h4 id="èè°æµè¯">èè°æµè¯</h4>
<table>
<thead>
<tr>
<th>æµè¯åºæ¯</th>
<th>éªè¯è¦ç¹</th>
<th>æµè¯å·¥å·</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>åèµ·å®¡æ¹</strong></td>
<td>é£ä¹¦æ¯å¦æ¶å°å®¡æ¹éç¥ãè¡¨åæ°æ®æ¯å¦æ­£ç¡®</td>
<td>ç´æ¥å¨ç³»ç»åèµ·</td>
</tr>
<tr>
<td><strong>å®¡æ¹æµç¨</strong></td>
<td>åå®¡æ¹èç¹æ¯å¦æ­£ç¡®æµè½¬</td>
<td>é£ä¹¦ç®¡çåå°</td>
</tr>
<tr>
<td><strong>åè°æ¥æ¶</strong></td>
<td>Webhookæ¯å¦æ­£ç¡®æ¥æ¶äºä»¶ãæ°æ®æ¯å¦å®æ´</td>
<td>é£ä¹¦"æ¨¡æäºä»¶æ¨é"å·¥å·</td>
</tr>
<tr>
<td><strong>ç¶æåæ­¥</strong></td>
<td>ä¸å¡ç¶ææ¯å¦æ­£ç¡®æ´æ°ãéç¥æ¯å¦åé</td>
<td>æ°æ®åºæ¥è¯¢ãæ¥å¿æ¥ç</td>
</tr>
<tr>
<td><strong>å¼å¸¸å¤ç</strong></td>
<td>ç½ç»å¼å¸¸ãç­¾åéªè¯å¤±è´¥ç­è¾¹çæåµ</td>
<td>æ¨¡æå¼å¸¸åºæ¯</td>
</tr>
</tbody>
</table>
<p><strong>é£ä¹¦æ¨¡æäºä»¶æ¨éå·¥å·</strong>ï¼</p>
<p>å¨é£ä¹¦å¼æ¾å¹³å°ç"äºä»¶è®¢é"é¡µé¢ï¼å¯ä»¥ä½¿ç¨"æ¨¡æäºä»¶æ¨é"åè½æµè¯ Webhook æ¥å£ï¼</p>
<div class="mermaid">graph LR
    A[é£ä¹¦ç®¡çåå°] --&gt;|æ¨¡æäºä»¶æ¨é| B[Webhookæ¥å£]
    B --&gt;|æ¥å¿è¾åº| C[æ£æ¥å¤çç»æ]
    C --&gt;|æå| D[éªè¯å®æ]
    C --&gt;|å¤±è´¥| E[æ¥çéè¯¯æ¥å¿]
</div><hr>
<h2 id="çäº§çº§æ³¨æäºé¡¹">çäº§çº§æ³¨æäºé¡¹</h2>
<h3 id="å®å¨ä¸å¯é æ§">å®å¨ä¸å¯é æ§</h3>
<h4 id="æºå¯ç®¡ç">æºå¯ç®¡ç</h4>
<p><strong>åå¿å°ææä¿¡æ¯ç¡¬ç¼ç å¨ä»£ç ä¸­ï¼</strong></p>
<pre><code class="language-csharp">// â éè¯¯ç¤ºä¾
var appSecret = "cli_xxxxxxxxxxxxxxx";  // å±é©ï¼

// â æ­£ç¡®ç¤ºä¾
builder.Configuration.AddAzureKeyVault(
    new Uri($"https://{vaultName}.vault.azure.net/"),
    new DefaultAzureCredential());

var appSecret = builder.Configuration["Feishu:AppSecret"];
</code></pre>
<p><strong>æ¨èæ¹æ¡</strong>ï¼</p>
<ul>
<li>Azure Key Vault / AWS Secrets Manager</li>
<li>HashiCorp Vault</li>
<li>Docker Secretsï¼å®¹å¨åé¨ç½²ï¼</li>
</ul>
<h4 id="å¹ç­æ§å¤ç">å¹ç­æ§å¤ç</h4>
<p>é£ä¹¦å¯è½ä¼éå¤æ¨éåä¸ä¸ªäºä»¶ï¼ç½ç»éè¯ç­ï¼ï¼å¿é¡»ä¿è¯ä¸å¡é»è¾çå¹ç­æ§ï¼</p>
<pre><code class="language-csharp">public async Task HandleAsync(EventData eventData, CancellationToken cancellationToken = default)
{
    // ä½¿ç¨ EventId æ instance_code + status ç»åä½ä¸ºå¹ç­é®
    var idempotencyKey = $"{approvalEvent.InstanceCode}_{approvalEvent.Status}";

    // æ£æ¥æ¯å¦å·²å¤çè¿
    if (await _cache.ExistsAsync(idempotencyKey))
    {
        _logger.LogInformation("äºä»¶å·²å¤çè¿ï¼è·³è¿: Key={IdempotencyKey}", idempotencyKey);
        return;
    }

    // æ è®°ä¸ºå·²å¤çï¼è®¾ç½®è¿ææ¶é´ï¼å¦24å°æ¶ï¼
    await _cache.SetAsync(idempotencyKey, "1", TimeSpan.FromHours(24));

    // æ§è¡ä¸å¡é»è¾
    await ProcessEventAsync(approvalEvent, cancellationToken);
}
</code></pre>
<h4 id="api-å®¹é">API å®¹é</h4>
<p>ä½¿ç¨ Polly ä¸ºé£ä¹¦ API è°ç¨æ·»å éè¯åçæ­æºå¶ï¼</p>
<pre><code class="language-csharp">// æ³¨å HttpClient æ¶æ·»å  Polly ç­ç¥
builder.Services.AddHttpClient("Feishu")
    .AddTransientHttpErrorPolicy(p =&gt;
        p.WaitAndRetryAsync(3, retryAttempt =&gt;
            TimeSpan.FromSeconds(Math.Pow(2, retryAttempt))))
    .AddPolicyHandler(Policy&lt;HttpResponseMessage&gt;
        .Handle&lt;HttpRequestException&gt;()
        .CircuitBreakerAsync(5, TimeSpan.FromSeconds(30)));
</code></pre>
<h3 id="è¾¹çæåµä¸ä¼ééçº§">è¾¹çæåµä¸ä¼ééçº§</h3>
<h4 id="å®¡æ¹äººå¤±æå¤ç">å®¡æ¹äººå¤±æå¤ç</h4>
<pre><code class="language-csharp">// é£ä¹¦å®¡æ¹å®ä¹ä¸­éç½®é»è®¤å®¡æ¹äºº
var request = new CreateInstanceRequest
{
    ApprovalCode = "xxxx",
    // å¦æèªéå®¡æ¹äººä¸ºç©ºï¼ä½¿ç¨é»è®¤å®¡æ¹äºº
    NodeApproverUserIdLists = dto.ApproverUserId.HasValue
        ? new[] { new NodeApprover { NodeId = "node1", ApproverUserIds = new[] { dto.ApproverUserId.Value } } }
        : null  // èµ°é»è®¤å®¡æ¹äººæµç¨
};
</code></pre>
<h4 id="ç½ç»è¶æ¶ä¸å¼æ­¥å¤ç">ç½ç»è¶æ¶ä¸å¼æ­¥å¤ç</h4>
<p>åè°å¤çåºå¿«éååºé£ä¹¦ï¼å»ºè®®å¨ 3 ç§åï¼ï¼å¤æé»è¾ç§»è³åå°ä½ä¸ï¼</p>
<pre><code class="language-csharp">public async Task HandleAsync(EventData eventData, CancellationToken cancellationToken = default)
{
    // 1. å¿«éä¿å­äºä»¶å°éå
    await _eventQueue.EnqueueAsync(eventData);

    // 2. ç«å³è¿åï¼ç±åå°ä½ä¸å¤ç
    // HangfireãRabbitMQ ç­ä¼å¼æ­¥æ¶è´¹éå
    await Task.CompletedTask;
}

// åå°ä½ä¸å¤ç
[Queue("approval-callback")]
public async Task ProcessApprovalEventAsync(EventData eventData)
{
    // å¤æçä¸å¡é»è¾å¤ç
    await _approvalService.ProcessCallbackAsync(eventData);
}
</code></pre>
<h4 id="çæ§ä¸åè­¦">çæ§ä¸åè­¦</h4>
<p>å»ºç«å³é®èç¹ççæ§ï¼</p>
<pre><code class="language-csharp">// çæ§ææ 
public class ApprovalMetrics
{
    private readonly Counter _approvalCreatedCounter;
    private readonly Counter _callbackReceivedCounter;
    private readonly Histogram _processingTimeHistogram;

    public void RecordApprovalCreated(string approvalType)
    {
        _approvalCreatedCounter.WithLabels(approvalType).Inc();
    }

    public void RecordCallbackReceived(string status)
    {
        _callbackReceivedCounter.WithLabels(status).Inc();
    }

    public void RecordProcessingTime(TimeSpan duration)
    {
        _processingTimeHistogram.Observe(duration.TotalSeconds);
    }
}

// åè­¦è§åï¼Prometheus ç¤ºä¾ï¼
# å®¡æ¹åèµ·å¤±è´¥çè¶è¿ 5% è§¦ååè­¦
alert: ApprovalCreationFailureRate
expr: rate(approval_creation_failed_total[5m]) / rate(approval_creation_total[5m]) &gt; 0.05
for: 5m
annotations:
  summary: "å®¡æ¹åå»ºå¤±è´¥çè¿é«"
</code></pre>
<h3 id="æ©å±æ§ä¸ç»´æ¤æ§">æ©å±æ§ä¸ç»´æ¤æ§</h3>
<h4 id="ç­ç¥æ¨¡å¼æ¯æå¤å¹³å°">ç­ç¥æ¨¡å¼æ¯æå¤å¹³å°</h4>
<pre><code class="language-csharp">/// &lt;summary&gt;
/// å®¡æ¹å¹³å°ç­ç¥æ¥å£
/// &lt;/summary&gt;
public interface IApprovalPlatformStrategy
{
    string PlatformName { get; }
    Task&lt;string&gt; CreateInstanceAsync(ApprovalRequest request);
}

/// &lt;summary&gt;
/// é£ä¹¦å®¡æ¹ç­ç¥
/// &lt;/summary&gt;
public class FeishuApprovalStrategy : IApprovalPlatformStrategy
{
    public string PlatformName =&gt; "Feishu";
    // ... å®ç°
}

/// &lt;summary&gt;
/// ééå®¡æ¹ç­ç¥
/// &lt;/summary&gt;
public class DingTalkApprovalStrategy : IApprovalPlatformStrategy
{
    public string PlatformName =&gt; "DingTalk";
    // ... å®ç°
}

/// &lt;summary&gt;
/// å®¡æ¹ç­ç¥å·¥å
/// &lt;/summary&gt;
public class ApprovalStrategyFactory
{
    private readonly IEnumerable&lt;IApprovalPlatformStrategy&gt; _strategies;

    public IApprovalPlatformStrategy GetStrategy(string platformName)
    {
        return _strategies.FirstOrDefault(s =&gt; s.PlatformName == platformName)
            ?? throw new NotSupportedException($"ä¸æ¯æçå®¡æ¹å¹³å°: {platformName}");
    }
}
</code></pre>
<h4 id="å®¡è®¡æ¥å¿">å®¡è®¡æ¥å¿</h4>
<p>è¯¦ç»è®°å½å®¡æ¹æµè½¬æ¢çå³é®æ¥å¿ï¼</p>
<pre><code class="language-csharp">public class ApprovalAuditService
{
    private readonly IApprovalAuditRepository _auditRepo;

    public async Task LogAsync(ApprovalAuditLog log)
    {
        log.Timestamp = DateTime.UtcNow;
        await _auditRepo.AddAsync(log);
        await _auditRepo.SaveChangesAsync();

        // ç»æåæ¥å¿è¾åº
        _logger.LogInformation("å®¡æ¹å®¡è®¡: {AuditType}, InstanceCode={InstanceCode}, BusinessId={BusinessId}",
            log.AuditType, log.InstanceCode, log.BusinessId);
    }
}

// ä½¿ç¨ç¤ºä¾
await _auditService.LogAsync(new ApprovalAuditLog
{
    AuditType = "ApprovalStarted",
    InstanceCode = instanceCode,
    BusinessId = leaveRequest.Id,
    OperatorId = userId,
    Details = new { leaveType, days, reason }
});
</code></pre>
<hr>
<h2 id="æåä¸ç¹åå®¹">æåä¸ç¹åå®¹</h2>
<h3 id="æ ¸å¿ä»·å¼">æ ¸å¿ä»·å¼</h3>
<p>éè¿æ¬æçå®è·µï¼æä»¬æåå®ç°äºï¼</p>
<table>
<thead>
<tr>
<th>ä»·å¼ç¹</th>
<th>å®ç°æ¹å¼</th>
<th>æ¶ç</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ç§»å¨åå®¡æ¹</strong></td>
<td>é£ä¹¦ App ä½ä¸ºå®¡æ¹é¨æ·</td>
<td>éæ¶éå°å¤çå®¡æ¹</td>
</tr>
<tr>
<td><strong>å³æ¶éç¥</strong></td>
<td>é£ä¹¦å¼ºéç¥æºå¶</td>
<td>å®¡æ¹äººåæ¶ååº</td>
</tr>
<tr>
<td><strong>æ°æ®é­ç¯</strong></td>
<td>.NET ä¸å¡åº + å®¡æ¹å³èè¡¨</td>
<td>å®æ´çä¸å¡æµç¨è¿½è¸ª</td>
</tr>
<tr>
<td><strong>è§£è¦è®¾è®¡</strong></td>
<td>é¢åå±æ½è±¡ + ç­ç¥æ¨¡å¼</td>
<td>ä¾¿äºæ©å±åç»´æ¤</td>
</tr>
</tbody>
</table>
<h3 id="å¨ææ»ç»">å¨ææ»ç»</h3>
<p>æ¬ææä¾äºä¸ä¸ªä»çå¿µãè®¾è®¡å°ç¼ç è½å°çå®æ´é­ç¯ï¼</p>
<div class="mermaid">mindmap
  root((é£ä¹¦å®¡æ¹éæ))
    çå¿µ
      ååéæ
      .NETä¸ºä¸å¡æ ¸å¿
      é£ä¹¦ä¸ºæµç¨é¨æ·
    è®¾è®¡
      åå±æ¶æ
      é¢åæ½è±¡
      å®å¨æºå¶
    å®ç°
      åèµ·å®¡æ¹
      åè°å¤ç
      ç¶æåæ­¥
    æä½³å®è·µ
      æºå¯ç®¡ç
      å¹ç­æ§
      å¼æ­¥å¤ç
      çæ§åè­¦
</div><h3 id="æ©å±">æ©å±</h3>
<h4 id="åºæ¯æ©å±">åºæ¯æ©å±</h4>
<p>å°æ­¤æ¨¡å¼å¿«éå¤ç¨äºå¶ä»ä¸å¡åºæ¯ï¼</p>
<table>
<thead>
<tr>
<th>ä¸å¡åºæ¯</th>
<th>å®¡æ¹æµç¨</th>
<th>å¤æåº¦</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>æ¥éå®¡æ¹</strong></td>
<td>åèµ· â ç´å±ä¸»ç®¡ â è´¢å¡å®¡æ ¸</td>
<td>ä¸­</td>
</tr>
<tr>
<td><strong>éè´­ç³è¯·</strong></td>
<td>åèµ· â é¨é¨ä¸»ç®¡ â éè´­é¨ â æ»ç»ç</td>
<td>é«</td>
</tr>
<tr>
<td><strong>ååå®¡æ¹</strong></td>
<td>æ³å¡å®¡æ ¸ â è´¢å¡å®¡æ ¸ â æ»ç»ç</td>
<td>é«</td>
</tr>
<tr>
<td><strong>å ç­ç³è¯·</strong></td>
<td>ç´å±ä¸»ç®¡å®¡æ¹</td>
<td>ä½</td>
</tr>
</tbody>
</table>
<h4 id="æ·±åº¦éæ">æ·±åº¦éæ</h4>
<p>å©ç¨é£ä¹¦æ´å¤è½åï¼æé æ´ä¸°å¯çååä½éªï¼</p>
<div class="mermaid">graph TB
    A[é£ä¹¦å®¡æ¹] --&gt; B[æ¶æ¯å¡ç]
    A --&gt; C[æºè½æºå¨äºº]
    A --&gt; D[ç¥è¯åº]

    B --&gt; B1[å®¡æ¹è¯¦æå±ç¤º]
    B --&gt; B2[æä½æé®]
    C --&gt; C1[æºè½æé]
    C --&gt; C2[èªå¨è¡¥å¨]
    D --&gt; D1[åå²è®°å½æ¥è¯¢]
    D --&gt; D2[å®¡æ¹è§è]

    E[.NETç³»ç»] --&gt; A
    B --&gt; E
    C --&gt; E
    D --&gt; E
</div><p><strong>åè½æ©å±ç¤ºä¾</strong>ï¼</p>
<ul>
<li>å¨é£ä¹¦ç¾¤èä¸­éè¿æ¶æ¯å¡çç´æ¥æ¥çå®¡æ¹è¯¦æ</li>
<li>éè¿æºå¨äººæºè½åå¤ï¼å¼å¯¼ç¨æ·å¡«åå®¡æ¹è¡¨å</li>
<li>å°å®¡æ¹è®°å½åæ­¥å°é£ä¹¦ç¥è¯åºï¼æ¹ä¾¿æ¥é</li>
</ul>
<h4 id="å¹³å°å">å¹³å°å</h4>
<p>å°å®¡æ¹éæè½åæ½è±¡ä¸ºä¸­å°æå¡ï¼ä¾ä¼ä¸åé¨ææç³»ç»ç»ä¸è°ç¨ï¼</p>
<pre><code class="language-csharp">/// &lt;summary&gt;
/// ç»ä¸å®¡æ¹æå¡ä¸­å°
/// &lt;/summary&gt;
public interface IApprovalCenterService
{
    /// &lt;summary&gt;
    /// ç»ä¸åèµ·å®¡æ¹ï¼æ¯æå¤å¹³å°ï¼
    /// &lt;/summary&gt;
    Task&lt;string&gt; CreateApprovalAsync(UnifiedApprovalRequest request);

    /// &lt;summary&gt;
    /// æ¥è¯¢å®¡æ¹ç¶æ
    /// &lt;/summary&gt;
    Task&lt;ApprovalStatus&gt; GetStatusAsync(string instanceId);

    /// &lt;summary&gt;
    /// å®¡æ¹ç»è®¡æ¥è¡¨
    /// &lt;/summary&gt;
    Task&lt;ApprovalStatistics&gt; GetStatisticsAsync(DateTime from, DateTime to);
}

// å¤ä¸ªç³»ç»ç»ä¸è°ç¨
await _approvalCenter.CreateApprovalAsync(new UnifiedApprovalRequest
{
    BusinessSystem = "HR",
    BusinessType = "LeaveRequest",
    BusinessId = leaveId,
    Platform = "Feishu"  // å¯åæ¢å°å¶ä»å¹³å°
});
</code></pre>
<hr>
<p><strong>ç»è¯­</strong></p>
<p>ä¼ ç» .NET ç³»ç»æ éæ¨åéæ¥ï¼éè¿åççæ¶æè®¾è®¡ä¸é£ä¹¦å®¡æ¹çæ·±åº¦éæï¼åæ ·å¯ä»¥çåæ°çæ´»åãå¸ææ¬æçå®è·µè½å¤ä¸ºä½ çæ°å­åè½¬åä¹è·¯æä¾æä»·å¼çåèã</p>
<p>è®©æä»¬ä¸èµ·åå«ä¿¡æ¯å­¤å²ï¼æ¥æ±ç°ä»£åçåååå¬ä½éªï¼ð</p>
<hr>
<h2 id="ç¸å³èµæº">ç¸å³èµæº</h2>
<h3 id="é¡¹ç®å°å">é¡¹ç®å°å</h3>
<ul>
<li>
<p><strong>Gitee ä»åº</strong>ï¼<a href="https://gitee.com/mudtools/MudFeishu" target="_blank" rel="noopener nofollow">https://gitee.com/mudtools/MudFeishu</a></p>
</li>
<li>
<p><strong>GitHub ä»åº</strong>ï¼<a href="https://github.com/mudtools/MudFeishu" target="_blank" rel="noopener nofollow">https://github.com/mudtools/MudFeishu</a></p>
</li>
<li>
<p><strong>NuGet å</strong>ï¼</p>
<ul>
<li>
<p><a href="https://www.nuget.org/packages/Mud.Feishu.Abstractions/" target="_blank" rel="noopener nofollow">Mud.Feishu.Abstractions</a></p>
</li>
<li>
<p><a href="https://www.nuget.org/packages/Mud.Feishu/" target="_blank" rel="noopener nofollow">Mud.Feishu</a></p>
</li>
<li>
<p><a href="https://www.nuget.org/packages/Mud.Feishu.WebSocket/" target="_blank" rel="noopener nofollow">Mud.Feishu.WebSocket</a></p>
</li>
<li>
<p><a href="https://www.nuget.org/packages/Mud.Feishu.Webhook/" target="_blank" rel="noopener nofollow">Mud.Feishu.Webhook</a></p>
</li>
</ul>
</li>
</ul>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-05 22:39">2026-01-05 22:39</span>&nbsp;
<a href="https://www.cnblogs.com/mudtools">ç©æ³¥å·´ç|mudtools.cn</a>&nbsp;
éè¯»(<span id="post_view_count">79</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19444914);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19444914', targetLink: 'https://www.cnblogs.com/mudtools/p/19444914', title: '.NET ä¼ ç»ä¿¡æ¯ç³»ç»æ ç¼éæé£ä¹¦å®¡æ¹æµ' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ãé¢è¯é¢ãMySQL ä¸å± B+ æ è½å­å¤å°æ°æ®ï¼ ]]></title>
    <link>https://www.cnblogs.com/sun-10387834/p/19388703</link>
    <guid>4e390dbb21be3d93bcaa38c96d99eb3f</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/sun-10387834/p/19388703" title="åå¸äº 2026-01-05 18:57">
    <span role="heading" aria-level="2">ãé¢è¯é¢ãMySQL ä¸å± B+ æ è½å­å¤å°æ°æ®ï¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>è¿æ¯ä¸ä¸ªç»å¸çé¢è¯é¢ï¼ä½å®éä¼°ç®éè¦èèå¤ä¸ªåéãä¸é¢æå°è¯¦ç»æè§£è®¡ç®è¿ç¨ï¼</p>
<h2 id="æ ¸å¿è®¡ç®æ¨¡å"><strong>æ ¸å¿è®¡ç®æ¨¡å</strong></h2>
<p>MySQL B+æ å­å¨é = æ ¹èç¹æåº Ã ä¸­é´èç¹æåº Ã å¶å­èç¹å®¹é</p>
<hr>
<h2 id="å³é®åè®¾ä»¥innodbé»è®¤éç½®ä¸ºä¾"><strong>å³é®åè®¾ï¼ä»¥InnoDBé»è®¤éç½®ä¸ºä¾ï¼</strong></h2>
<ol>
<li><strong>é¡µå¤§å°</strong>ï¼16KBï¼16384å­èï¼</li>
<li><strong>ä¸»é®ç±»å</strong>ï¼BIGINTï¼8å­èï¼</li>
<li><strong>æéå¤§å°</strong>ï¼6å­èï¼InnoDBé¡µæéï¼</li>
<li><strong>è¡æ°æ®å¤§å°</strong>ï¼1KBï¼1024å­èï¼ - <em>è¿æ¯å³é®åé</em></li>
<li><strong>é¡µç©ºé´å©ç¨ç</strong>ï¼çº¦70%ï¼éæ£é¤é¡µå¤´ãé¡µå°¾ç­åæ°æ®ï¼</li>
</ol>
<hr>
<h2 id="ä¸å±bæ ç»æ"><strong>ä¸å±B+æ ç»æ</strong></h2>
<pre><code>ç¬¬1å±ï¼æ ¹èç¹ï¼1ä¸ªï¼
ç¬¬2å±ï¼ä¸­é´èç¹ï¼fan_outä¸ªï¼
ç¬¬3å±ï¼å¶å­èç¹ï¼fan_outÂ²ä¸ªï¼ â å­å¨å®éæ°æ®
</code></pre>
<hr>
<h2 id="è¯¦ç»è®¡ç®æ­¥éª¤"><strong>è¯¦ç»è®¡ç®æ­¥éª¤</strong></h2>
<h3 id="1-è®¡ç®åä¸ªéå¶å­èç¹è½å­å¨çé®å¼å¯¹æ°éfan_out"><strong>1. è®¡ç®åä¸ªéå¶å­èç¹è½å­å¨çé®å¼å¯¹æ°éï¼fan_outï¼</strong></h3>
<p>æ¯ä¸ªç´¢å¼é¡¹å¤§å° = ä¸»é®(8B) + æé(6B) = 14B<br>
å¯ç¨ç©ºé´ = 16KB Ã 70% = 11.2KB â 11468å­è<br>
åä¸ªèç¹ç´¢å¼é¡¹æ° = 11468 / 14 â <strong>819</strong></p>
<p>å³ï¼<strong>æ¯ä¸ªéå¶å­èç¹å¯æåçº¦819ä¸ªå­èç¹</strong></p>
<h3 id="2-è®¡ç®åä¸ªå¶å­èç¹è½å­å¨çæ°æ®è¡æ°"><strong>2. è®¡ç®åä¸ªå¶å­èç¹è½å­å¨çæ°æ®è¡æ°</strong></h3>
<p>å¯ç¨ç©ºé´ = 16KB Ã 70% = 11.2KB<br>
åè®¾æ¯è¡æ°æ®1KB â æ¯é¡µçº¦å­å¨ <strong>11è¡</strong><br>
åè®¾æ¯è¡æ°æ®200å­è â æ¯é¡µçº¦å­å¨ <strong>57è¡</strong><br>
åè®¾æ¯è¡æ°æ®800å­è â æ¯é¡µçº¦å­å¨ <strong>14è¡</strong></p>
<h3 id="3-ä¸å±bæ æ»å®¹éè®¡ç®"><strong>3. ä¸å±B+æ æ»å®¹éè®¡ç®</strong></h3>
<p><strong>å¬å¼</strong>ï¼æ»è¡æ° = fan_outÂ² Ã æ¯é¡µè¡æ°</p>
<ul>
<li>è¥æ¯é¡µ11è¡ï¼819Â² Ã 11 â <strong>730ä¸è¡</strong></li>
<li>è¥æ¯é¡µ57è¡ï¼819Â² Ã 57 â <strong>3800ä¸è¡</strong></li>
<li>è¥æ¯é¡µ14è¡ï¼819Â² Ã 14 â <strong>940ä¸è¡</strong></li>
</ul>
<hr>
<h2 id="æ´ç²¾ç¡®çä¼°ç®èèçå®innodbç»æ"><strong>æ´ç²¾ç¡®çä¼°ç®ï¼èèçå®InnoDBç»æï¼</strong></h2>
<p>å®éInnoDBå¶å­èç¹å­å¨çæ¯å®æ´æ°æ®è¡ï¼éè¦èèï¼</p>
<ul>
<li>è¡æ ¼å¼å¼éï¼è¡å¤´çº¦23å­èï¼</li>
<li>äºå¡ç³»ç»å¼éï¼MVCCçéèåï¼DB_TRX_ID 6B + DB_ROLL_PTR 7Bï¼</li>
<li>å¯è½çNULLä½å¾ãåé¿å­æ®µåè¡¨ç­</li>
</ul>
<p><strong>ä¿å®ä¼°ç®</strong>ï¼<br>
åè®¾ä¸»é®ä¸ºBIGINTï¼æ¯è¡é¢å¤å¼éçº¦50å­èï¼</p>
<ul>
<li>è¡å¤§å° = æ°æ®(1024B) + è¡å¼é(50B) = 1074B</li>
<li>æ¯é¡µè¡æ° = (16384Ã70%) / 1074 â 10è¡</li>
<li>æ»è¡æ° = 819Â² Ã 10 â <strong>670ä¸è¡</strong></li>
</ul>
<hr>
<h2 id="åºæ¯åæè¡¨"><strong>åºæ¯åæè¡¨</strong></h2>
<table>
<thead>
<tr>
<th>è¡å¤§å°</th>
<th>æ¯é¡µè¡æ°</th>
<th>ä¸å±B+æ å®¹é</th>
<th>åå±B+æ å®¹é</th>
</tr>
</thead>
<tbody>
<tr>
<td>200Bï¼å°è®°å½ï¼</td>
<td>~57è¡</td>
<td>çº¦3800ä¸è¡</td>
<td>çº¦310äº¿è¡</td>
</tr>
<tr>
<td>1KBï¼å¸åè®°å½ï¼</td>
<td>~10è¡</td>
<td>çº¦670ä¸è¡</td>
<td>çº¦55äº¿è¡</td>
</tr>
<tr>
<td>2KBï¼è¾å¤§è®°å½ï¼</td>
<td>~5è¡</td>
<td>çº¦335ä¸è¡</td>
<td>çº¦27äº¿è¡</td>
</tr>
<tr>
<td>8KBï¼å¤§è®°å½ï¼</td>
<td>~1è¡</td>
<td>çº¦67ä¸è¡</td>
<td>çº¦5.5äº¿è¡</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="éè¦è¯´æ"><strong>éè¦è¯´æ</strong></h2>
<ol>
<li>
<p><strong>å®éå®¹éå¯è½æ´å¤§</strong>ï¼</p>
<ul>
<li>è¥ä½¿ç¨INTä¸»é®ï¼4å­èï¼ï¼fan_out â 1365ï¼å®¹éæåè¿3å</li>
<li>è¥è¡è®°å½æ´ç´§åï¼æ¯é¡µå­å¨è¡æ°æ´å¤</li>
</ul>
</li>
<li>
<p><strong>B+æ å±æ°å¢é¿</strong>ï¼</p>
<ul>
<li>å½æ°æ®éè¶è¿ä¸å±å®¹éæ¶ï¼B+æ åä¸ºåå±</li>
<li>åå±B+æ å®¹é = fan_outÂ³ Ã æ¯é¡µè¡æ°</li>
<li>å¯¹äº1KBè¡ï¼åå±B+æ å¯å­å¨çº¦ <strong>55äº¿è¡</strong></li>
</ul>
</li>
<li>
<p><strong>èç°ç´¢å¼ vs äºçº§ç´¢å¼</strong>ï¼</p>
<ul>
<li>ä¸è¿°è®¡ç®éå¯¹<strong>èç°ç´¢å¼</strong>ï¼å¶å­èç¹å­å®æ´æ°æ®ï¼</li>
<li>äºçº§ç´¢å¼å¶å­èç¹å­å¨ä¸»é®å¼ï¼å®¹éä¼æ´å¤§</li>
</ul>
</li>
</ol>
<hr>
<h2 id="ç»è®º"><strong>ç»è®º</strong></h2>
<p>å¨å¸åçéç½®ä¸ï¼BIGINTä¸»é®ã1KBè¡æ°æ®ï¼ï¼</p>
<ul>
<li><strong>ä¸å±B+æ å¤§çº¦è½å­å¨600ä¸ï½1000ä¸è¡æ°æ®</strong></li>
<li><strong>åå±B+æ å¯å­å¨æ°åäº¿è¡æ°æ®</strong></li>
</ul>
<p>è¿ä¹æ¯ä¸ºä»ä¹æä»¬å¸¸è¯´ï¼</p>
<ul>
<li>åè¡¨åä¸çº§å«æ°æ®æ¶ï¼æ¥è¯¢æ§è½ä»è½ä¿æè¯å¥½ï¼ä¸å±B+æ ï¼</li>
<li>æ°æ®éè¿äº¿æ¶ï¼å¯è½éè¦èèååºåè¡¨æä¼åç´¢å¼è®¾è®¡</li>
</ul>

</div>
<div id="MySignature" role="contentinfo">
    
<p>â¤ï¸ å¦æä½ åæ¬¢è¿ç¯æç« ï¼è¯·ç¹èµæ¯æï¼ ð åæ¶æ¬¢è¿å³æ³¨æçåå®¢ï¼è·åæ´å¤ç²¾å½©åå®¹ï¼</p>

<p>æ¬ææ¥èªåå®¢å­ï¼ä½èï¼<a href="https://www.cnblogs.com/sun-10387834/" target="_blank">ä½ç¥è®©ææ¥å·¡å±±</a>ï¼è½¬è½½è¯·æ³¨æåæé¾æ¥ï¼<a href="https://www.cnblogs.com/sun-10387834/p/19388703" target="_blank">https://www.cnblogs.com/sun-10387834/p/19388703</a></p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-05 18:57">2026-01-05 18:57</span>&nbsp;
<a href="https://www.cnblogs.com/sun-10387834">ä½ç¥è®©ææ¥å·¡å±±</a>&nbsp;
éè¯»(<span id="post_view_count">56</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19388703);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19388703', targetLink: 'https://www.cnblogs.com/sun-10387834/p/19388703', title: 'ãé¢è¯é¢ãMySQL ä¸å± B+ æ è½å­å¤å°æ°æ®ï¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨äºï¼èªç¶è¯­è¨å¤ç  ç¬¬ä¸å¨ï¼å¾ªç¯ç¥ç»ç½ç» ï¼ä¸ï¼åºåæ°æ®ä¸åºåæ¨¡å ]]></title>
    <link>https://www.cnblogs.com/Goblinscholar/p/19437798</link>
    <guid>37bcb3dce106c042851d4404c63e8e35</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Goblinscholar/p/19437798" title="åå¸äº 2026-01-05 18:52">
    <span role="heading" aria-level="2">å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨äºï¼èªç¶è¯­è¨å¤ç  ç¬¬ä¸å¨ï¼å¾ªç¯ç¥ç»ç½ç» ï¼ä¸ï¼åºåæ°æ®ä¸åºåæ¨¡å</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>æ­¤åç±»ç¨äºè®°å½å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨çå­¦ä¹ ç¬è®°ã<br>
è¯¾ç¨ç¸å³ä¿¡æ¯é¾æ¥å¦ä¸ï¼</p>
<ol>
<li>åè¯¾ç¨è§é¢é¾æ¥ï¼<a href="https://www.bilibili.com/video/BV1FT4y1E74V?buvid=XU762317353676D786954061C192FE625463B&amp;from_spmid=playlist.playlist-detail.0.0&amp;is_story_h5=false&amp;mid=zqernykrmpf7XfIorMR%2FnA%3D%3D&amp;plat_id=116&amp;share_from=ugc&amp;share_medium=android&amp;share_plat=android&amp;share_session_id=ce0bc526-db69-428a-962e-c65ed8c267bc&amp;share_source=COPY&amp;share_tag=s_i&amp;spmid=united.player-video-detail.0.0&amp;timestamp=1713085655&amp;unique_k=DfBgvFW&amp;up_id=8654113&amp;vd_source=e035e9878d32f414b4354b839a4c31a4" target="_blank" rel="noopener nofollow">[åè¯­å­å¹]å´æ©è¾¾æ·±åº¦å­¦ä¹ deeplearning.ai</a></li>
<li>githubè¯¾ç¨èµæï¼å«è¯¾ä»¶ä¸ç¬è®°:<a href="https://github.com/robbertliu/deeplearning.ai-andrewNG" target="_blank" rel="noopener nofollow">å´æ©è¾¾æ·±åº¦å­¦ä¹ æå­¦èµæ</a></li>
<li>è¯¾ç¨éå¥ç»ä¹ ï¼ä¸­è±ï¼ä¸ç­æ¡ï¼<a href="https://blog.csdn.net/u013733326/article/details/79827273" target="_blank" rel="noopener nofollow">å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾åä¹ é¢ä¸ç­æ¡</a></li>
</ol>
<p>æ¬ç¯ä¸ºç¬¬äºè¯¾çç¬¬ä¸å¨åå®¹ï¼<a href="https://www.bilibili.com/video/BV1FT4y1E74V?spm_id_from=333.788.videopod.episodes&amp;vd_source=e035e9878d32f414b4354b839a4c31a4&amp;p=151" target="_blank" rel="noopener nofollow">1.1</a>çåå®¹ä»¥åä¸äºåºç¡çè¡¥åã</p>
<hr>
<p>æ¬å¨ä¸ºç¬¬äºè¯¾çç¬¬ä¸å¨åå®¹ï¼ä¸ CV ç¸å¯¹åºçï¼è¿ä¸è¯¾ææåå®¹çä¸­å¿åªæä¸ä¸ªï¼<strong>èªç¶è¯­è¨å¤çï¼Natural Language Processingï¼NLPï¼</strong>ã<br>
åºç¨å¨æ·±åº¦å­¦ä¹ éï¼å®æ¯ä¸é¨ç¨æ¥è¿è¡<strong>ææ¬ä¸åºåä¿¡æ¯å»ºæ¨¡</strong>çæ¨¡ååææ¯ï¼æ¬è´¨ä¸æ¯å¨å¨è¿æ¥ç½ç»ä¸ç»è®¡è¯­è¨æ¨¡ååºç¡ä¸çä¸æ¬¡âç»æåç¹åâï¼ä¹æ¯äººå·¥æºè½ä¸­<strong>æè´´è¿äººç±»æç»´è¡¨è¾¾æ¹å¼</strong>çéè¦ç ç©¶æ¹åä¹ä¸ã<br>
<strong>è¿ä¸æ´èè¯¾åæ ·æ¶åå¤§ééè¦åå¤æ¶åçåå®¹ï¼æ¨ªè·¨æºå¨å­¦ä¹ ãæ¦çç»è®¡ãçº¿æ§ä»£æ°ä»¥åè¯­è¨å­¦ç´è§ã</strong><br>
è¯­è¨ä¸åå¾åé£æ ·âç´è§å¯è§âï¼æ´å¤æ¯æ½è±¡ç¬¦å·ä¸ä¸ä¸æå³ç³»çç»åï¼å æ­¤<strong>çè§£é¨æ§åèæ´é«</strong>ã<br>
å æ­¤ï¼æåæ ·ä¼å°½éè¡¥è¶³å¿è¦çèæ¯ç¥è¯ï¼å°½å¯è½ç¨æ¯å»åå®ä¾éä½çè§£é¾åº¦ã<br>
æ¬ç¯çåå®¹å³äº<strong>åºåæ°æ®ååºåæ¨¡å</strong>ï¼æ¯èªç¶è¯­è¨å¤çä¸­åºç¡åå®¹ã</p>
<h1 id="1-åºåæ°æ®">1. åºåæ°æ®</h1>
<p>å¨ NLP ä¸­ï¼ä¸ä¸ªæåºç¡ãä¹ææ ¸å¿çé®é¢æ¯ï¼<strong>è¯­è¨æ°æ®ï¼åæä»¬ä¹åè§è¿çæ°æ®ï¼æä»ä¹æ¬è´¨ä¸åï¼</strong><br>
ç­æ¡å¯ä»¥ç®åæ¦æ¬ä¸ºï¼<strong>å®æ¯æé¡ºåºçã</strong></p>
<p>å¨æºå¨å­¦ä¹ ä¸­ï¼æä»¬æ <strong>âé¡ºåºæ¬èº«æºå¸¦ä¿¡æ¯â</strong> çæ°æ®ç§°ä¸º<strong>åºåæ°æ®</strong>ã<br>
æç´è§çä¾å­å°±æ¯ä¸å¥è¯ï¼åæ ·æ¯è¿å ä¸ªè¯ï¼</p>
<blockquote>
<p>âæ å é¥­â<br>
âé¥­ å æâ</p>
</blockquote>
<p>åå«çè¯å®å¨ä¸æ ·ï¼ä½è¡¨è¾¾çå«ä¹å´å¤©å·®å°å«ï¼è¿è¯´æï¼<strong>å¨è¯­è¨ä¸­ï¼ä¿¡æ¯ä¸ä»å­å¨äºâæåªäºåç´ âï¼è¿å­å¨äºâåç´ åºç°çé¡ºåºâã</strong></p>
<p>è¿ä¸æä»¬ä¹åå¨ CV ä¸­å¸¸è§çæ°æ®ææä¸åã<br>
ä¸å¼ å¾åå¨è¿å¥æ¨¡åä¹åï¼éå¸¸å·²ç»è¢«è¡¨ç¤ºä¸ºä¸ä¸ª<strong>åºå®å°ºå¯¸çäºç»´åç´ ç½æ ¼</strong>ã<br>
æ è®ºæä»¬åçå·¦ä¸è§è¿æ¯å³ä¸è§ï¼<strong>æ´å¹å¾åçææä¿¡æ¯å¨è¾å¥æ¶æ¯åæ¶å­å¨ç</strong>ï¼æ¨¡åé¢å¯¹çæ¯ä¸ä¸ªâå®æ´ç»é¢âã<br>
å¨è¿ç§è®¾å®ä¸ï¼å·ç§¯ç½ç»æ´å³æ³¨çæ¯<strong>ç©ºé´ç»æå³ç³»</strong>ï¼åªäºåç´ å½¼æ­¤ç¸é»ãåªäºå±é¨åºåå¯ä»¥ç»ææ´é«å±çå½¢ç¶ã</p>
<p>èè¯­è¨æ°æ®çå½¢å¼åä¸åï¼ä¸å¥è¯å¹¶ä¸æ¯ä¸ä¸ªå¤©ç¶çâæ´ä½å¯¹è±¡âï¼èæ¯ç±è¯è¯­<strong>æé¡ºåºä¾æ¬¡åºç°</strong>çã<br>
ç®åæ¥è¯´ï¼å¨æåºå»ºæ¨¡çåè®¾ä¸ï¼æ¨¡åå¯¹å½åè¯ççè§£ï¼å¾å¾ä¾èµäº<strong>ä¹åå·²ç»åºç°çææè¯æææçä¸ä¸æ</strong>ã</p>
<p>éè¦è¯´æçæ¯ï¼è¿éçâæé¡ºåºâå¹¶ä¸ä¸å®æå³çæ¨¡åå¿é¡»<strong>åäººä¸æ ·ä¸ä¸ªè¯ä¸ä¸ªè¯å°è¯»</strong>ã<br>
å¨åç»­å°è¦ä»ç»ç <strong>Transformer</strong> æ¨¡åä¸­ï¼æ´å¥è¯çææè¯å¯ä»¥è¢«<strong>åæ¶éå¥æ¨¡åè¿è¡å¤ç</strong>ï¼ä½æ¨¡åä»ç¶éè¦éè¿<strong>æ¾å¼å°å¼å¥ä½ç½®ä¿¡æ¯</strong>ï¼æ¥åºåâåªä¸ªè¯å¨åãåªä¸ªè¯å¨åâã</p>
<p>åæä¸ªæ¯æ¹ï¼<br>
å¾åæ´åæ¯ä¸å¼ <strong>å·²ç»æå¼å¨æ¡é¢ä¸çå°å¾</strong>ï¼ææä¿¡æ¯ä¸ç¼é½å¨ï¼æ¨¡åå¨å¤çæ¶ä¸ä¾èµæ¾å¼çæ¶é´é¡ºåºï¼èæ¯ç´æ¥å»ºæ¨¡æ´ä½çç©ºé´ç»æå³ç³»ã<br>
èè¯­è¨æ´åæ¯ä¸æ®µ<strong>æ­£å¨æ­æ¾çè¯­é³ææå­æµ</strong>ï¼æä»¬ä»åªéå¬ï¼åªéçï¼ç»ææ¯æªç¶ä¸åçã<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260104144013115-1425405995.png" alt="image.png" loading="lazy"><br>
å æ­¤ï¼å¨è¯­è¨ä»»å¡ä¸­ï¼âååºç°ä»ä¹ãååºç°ä»ä¹âæ¬èº«å°±ææäºä¿¡æ¯çä¸é¨åï¼èä¸è½è¢«éææä¹±<br>
æ­£å ä¸ºè¿ç§å·®å¼ï¼è®©CV æ¨¡åæ´æé¿å¤ç<strong>ç©ºé´ç»æä¸å±é¨æ¨¡å¼</strong>ï¼è NLP æ¨¡åå¿é¡»éç¹è§£å³<strong>é¡ºåºãä¾èµå³ç³»ä»¥åä¸ä¸æè®°å¿</strong>çé®é¢ã</p>
<p>æä»¬æ»ç»è¯­è¨ãè¯­é³ãæ¶é´ç­åºåæ°æ®çç¹å¾å¦ä¸ï¼</p>
<ol>
<li>æ°æ®æ¯<strong>æé¡ºåºæå</strong>çã</li>
<li>å½åä¿¡æ¯å¾å¾ä¾èµäº<strong>ä¹åå·²ç»åºç°çåå®¹</strong>ã</li>
<li>æ°æ®é¿åº¦éå¸¸<strong>ä¸åºå®</strong>ã</li>
</ol>
<p>è¿äºç¹å¾å³å®äºï¼<strong>å¨å¤çåºåæ°æ®æ¶ï¼æ¨¡åå¿é¡»æ¾å¼å°èèé¡ºåºä¸ä¸ä¸æï¼èä¸è½ä»æè¾å¥å½ä½ä¸ä¸ªæ åºçç¹å¾éåæ¥å¤çã</strong></p>
<h1 id="2-åºåæ¨¡å">2. åºåæ¨¡å</h1>
<p>æä»¬åå«ççï¼å¦æä½¿ç¨æä»¬å·²ç»äºè§£è¿ç<strong>å¨è¿æ¥ç½ç»</strong>å<strong>å·ç§¯ç½ç»</strong>æ¥å¤çåºåæ°æ®ï¼ææä¼æä¹æ ·ã</p>
<h2 id="21-å¨è¿æ¥ç½ç»æ æ³èªç¶å¤çé¡ºåº">2.1 å¨è¿æ¥ç½ç»ï¼æ æ³èªç¶å¤çâé¡ºåºâ</h2>
<p>å¦æè¦åºç¨å¨è¿æ¥ç½ç»ï¼æç´æ¥çæ³æ³æ¯ï¼  æä¸å¥è¯ä¸­çæ¯ä¸ªè¯è¡¨ç¤ºæåéï¼åæè¿äºåé<strong>æ¼æ¥æä¸ä¸ªé¿åé</strong>ï¼éè¿å¨è¿æ¥ç½ç»ã</p>
<p>è¿ç§åæ³å¨å½¢å¼ä¸æ¯å¯è¡çï¼ä½é®é¢ä¹éå¸¸ææ¾ï¼<br>
é¦åï¼å¨è¿æ¥ç½ç»è¦æ±<strong>åºå®é¿åº¦è¾å¥</strong>ï¼èè¯­è¨åºåçé¿åº¦æ¯å¤©ç¶ä¸åºå®çã<br>
ä¸å¥è¯å¯ä»¥åªæå ä¸ªè¯ï¼ä¹å¯ä»¥éå¸¸é¿ãä¸ºäºæ»¡è¶³è¾å¥è¦æ±ï¼æä»¬ä¸å¾ä¸è¿è¡æªæ­æå¡«åï¼è¿æ¬èº«å°±å¼å¥äºé¢å¤çå·¥ç¨å¤æåº¦ã</p>
<p>å¶æ¬¡ï¼æ´å³é®çæ¯ï¼<strong>å¨è¿æ¥ç½ç»å¹¶ä¸å·å¤âé¡ºåºæç¥âè½å</strong>ãå¨å®çæ¥ï¼è¾å¥åªæ¯ä¸ä¸ªé«ç»´åéï¼åä¸ªç»´åº¦ä¹é´æ²¡æâååâè¿ä¸æ¦å¿µã<br>
æ¨¡åæ¬èº«å¹¶ä¸ç¥éï¼âè¿æ¯ç¬¬ä¸ä¸ªè¯ââè¿æ¯ç¬¬ä¸ä¸ªè¯âã<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260104144012968-399183777.png" alt="image.png" loading="lazy"></p>
<p>å æ­¤ï¼è¿ç§å¤çæ¹å¼å¤©ç¶å¿½ç¥äºè¯­è¨ä¸­æéè¦çç»æä¿¡æ¯ââé¡ºåºä¸ä¾èµå³ç³»ãä¸è½ç¨æ¥å¤çåºåæ°æ®ã</p>
<h2 id="22-å·ç§¯ç½ç»æé¿å±é¨æ¨¡å¼ä½ç¼ºä¹é¿æä¾èµ">2.2 å·ç§¯ç½ç»ï¼æé¿å±é¨æ¨¡å¼ï¼ä½ç¼ºä¹é¿æä¾èµ</h2>
<p>é£å·ç§¯ç½ç»å¢ï¼  æ¢ç¶ CNN è½å¨å¾åä¸­å»ºæ¨¡å±é¨ç»æï¼æ¯å¦ä¹å¯ä»¥ç¨äºåºåæ°æ®ï¼<br>
ç­æ¡æ¯ï¼<strong>é¨åå¯ä»¥ï¼ä½ä¸å¤èªç¶ã</strong></p>
<p>å¨åºåä¸ä½¿ç¨ä¸ç»´å·ç§¯æ¶ï¼å·ç§¯æ ¸å¯ä»¥ææ<strong>å±é¨è¿ç»­çæ®µ</strong>ï¼ä¾å¦ç¸é»å ä¸ªè¯ææçç­è¯­æåºå®æ­éã ä»è¿ä¸ªè§åº¦çï¼CNN ç¡®å®è½å¤å»ºæ¨¡<strong>å±é¨ä¸ä¸æä¿¡æ¯</strong>ã</p>
<p>å¨è¿éï¼æä»¬éè¦å¼å¥ä¸ä¸ªæ¦å¿µï¼<strong>æåéï¼receptive fieldï¼</strong>ã<br>
æåéæçæ¯å·ç§¯å±ä¸­æä¸ªç¥ç»å<strong>è½å¤âçå°âçè¾å¥åºåèå´</strong>ã<br>
æä¸ªæ¯æ¹ï¼</p>
<ul>
<li>å¨å¾åä¸­ï¼å¦æä¸ä¸ªå·ç§¯ç¥ç»åçæåéæ¯ <span class="math inline">\(3\times3\)</span>ï¼å®åªè½æç¥è¿ä¹ä¸ªåç´ çå±é¨ä¿¡æ¯ï¼</li>
<li>ç±»ä¼¼å°ï¼å¨åºåä¸ï¼ä¸ä¸ªå·ç§¯æ ¸çæåéå°±æ¯å®<strong>ä¸æ¬¡æ§è½çå°çè¿ç»­è¯çæ°é</strong>ã<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260104144316440-1063086196.png" alt="image.png" loading="lazy"><br>
è¿å°±æå³çï¼å·ç§¯ç½ç»å¨å¤çåºåæ¶å¤©ç¶æé¿ææ<strong>å±é¨æ¨¡å¼æç­è·ç¦»ä¾èµ</strong>ï¼ä½å¦ææ³è®©æ¨¡åçè§£âå¥é¦çè¯âä¸âå¥å°¾çè¯âä¹é´çå³ç³»ï¼å°±å¿é¡»<strong>å å å¾å¤å±å·ç§¯</strong>æ<strong>äººä¸ºæ©å¤§å·ç§¯æ ¸èå´</strong>ï¼æè½è¦çæ´ä¸ªåºåã<br>
ç®åæ¥è¯´ï¼æåéè¶å¤§ï¼æ¨¡åè¶å®¹æææ<strong>é¿è·ç¦»ä¾èµ</strong>ï¼ä½è¿ä¹å¸¦æ¥äºè®¡ç®åè®­ç»ä¸çé®é¢ã<br>
è¿ä½¿å¾æ¨¡åï¼</li>
<li>å¯¹<strong>ç­è·ç¦»ä¾èµ</strong>ææã</li>
<li>å¯¹<strong>é¿è·ç¦»ä¾èµ</strong>ä¸å¤é«æã</li>
<li>å¹¶ä¸ä»ç¶ç¼ºä¹ä¸ç§æç¡®çâæ¶é´ç¶æâæ¦å¿µã</li>
</ul>
<p>å¯ä»¥è¿æ ·çè§£ï¼<br>
å·ç§¯ç½ç»æ´åæ¯å¨<strong>æ«æå±é¨çæ®µ</strong>ï¼èä¸æ¯å¨<strong>æ²¿çæ¶é´è½´éæ­¥çè§£ä¸å¥è¯çåå±è¿ç¨</strong>ï¼å æ­¤ï¼è½ç¶å·ç§¯å¯¹åºåæ°æ®çå¤çè½åå¼ºäºå¨è¿æ¥ç½ç»ï¼ä½æ¯å®ä»ææå±éã</p>
<h2 id="23-åºåæ¨¡åè¦è§£å³çæ ¸å¿é®é¢">2.3 åºåæ¨¡åè¦è§£å³çæ ¸å¿é®é¢</h2>
<p>éè¿ä»¥ä¸å¯¹æ¯å¯ä»¥çå°ï¼å¨è¿æ¥ç½ç»åå·ç§¯ç½ç»å¹¶ä¸æ¯âä¸è½âå¤çåºåæ°æ®ï¼èæ¯<strong>å¤çæ¹å¼ä¸åºåæ°æ®çæ¬è´¨å­å¨å²çª</strong>ã</p>
<p>åºåæ°æ®çæ ¸å¿ç¹ç¹å¨äºï¼ä¿¡æ¯æ¯<strong>éé¡ºåºéæ­¥å±å¼ç</strong>ãå½åçè§£ä¾èµäº<strong>åå²ä¸ä¸æ</strong>ä¸åºåé¿åº¦<strong>ä¸åºå®</strong>ã<br>
å æ­¤ï¼æä»¬çæ­£éè¦çæ¯è¿æ ·ä¸ç±»æ¨¡åï¼  <strong>å¨å¤çå½åè¾å¥çåæ¶ï¼è½å¤ä¿çå¹¶æ´æ°å¯¹âè¿å»ä¿¡æ¯âçè¡¨ç¤ºã</strong><br>
ä¹å°±æ¯è¯´ï¼åºåæ¨¡åçæ ¸å¿è½åå¹¶ä¸å¨äºâè¾å¥å½¢å¼âï¼  èå¨äºå®æ¯å¦å·å¤ä¸ç§<strong>å¯éæ¶é´æ¼åçåé¨ç¶æ</strong>ï¼ç¨æ¥æ¿è½½ä¸ä¸æä¿¡æ¯ï¼å¹¶åä¸åç»­å³ç­ã<br>
åç»­æä»¬å°çå°ç RNNãLSTMãGRU ä»¥å Transformerï¼  è½ç¶å®ç°æ¹å¼ä¸åï¼ä½é½å´ç»çåä¸ä¸ªç®æ å±å¼ï¼  <strong>è®©æ¨¡åå¨çè§£å½ååå®¹æ¶ï¼ä¸æ¯å­¤ç«å°âçè¿ä¸å»âï¼èæ¯åºäºæ´ä¸ªä¸ä¸ææ¥å¤æ­ã</strong></p>
<p>è¿å°±æ¯åºåæ¨¡åæå·å¤çè½åã</p>
<h1 id="3-åºåæ¨¡åçåºç¨é¢å">3. åºåæ¨¡åçåºç¨é¢å</h1>
<p>åºåæ¨¡åå¨ NLP ä¸­åºç¨å¹¿æ³ï¼ä½éè¦æ³¨æçæ¯ï¼<strong>åºåæ¨¡åä¸ä¸å®è¦æ±è¾å¥åè¾åºé½æ¯åºå</strong>ãå®çæ ¸å¿è½åå¨äºè½å¤<strong>ä¿çä¸ä¸æä¿¡æ¯å¹¶å¤çéæ¶é´å±å¼çæ°æ®</strong>ãåªè¦è¾å¥æè¾åºä¸­å­å¨åºåæ§è´¨ï¼åºåæ¨¡åå°±è½åæ¥ä½ç¨ã<br>
ä»è¾å¥åè¾åºçè§åº¦ï¼å¯ä»¥åä¸ºä»¥ä¸å ç±»æåµï¼</p>
<ol>
<li><strong>åºåâåºåï¼</strong> è¾å¥åè¾åºé½æ¯åºåï¼ä¾å¦æºå¨ç¿»è¯ãæ¨¡åéè¦æ ¹æ®è¾å¥åºåçä¸ä¸æçæå¯¹åºçè¾åºåºåã</li>
<li><strong>åºåâæ éæç±»å«ï¼</strong> è¾å¥æ¯åºåï¼è¾åºæ¯åä¸ªå¼æç±»å«ï¼ä¾å¦ææåæãææ¬åç±»ãæ¨¡åéè¦çè§£æ´æ®µåºåçè¯­ä¹ï¼å¹¶è¾åºæ´ä½å¤æ­ã</li>
<li><strong>æ éæåºå®è¾å¥âåºåï¼</strong> è¾å¥ä¸æ¯åºåï¼ä½æ¨¡åéè¦çæåºåä½ä¸ºè¾åºï¼ä¾å¦ææ¬çææå¯¹è¯ç³»ç»ä¸­æ ¹æ®æç¤ºçæå®æ´åç­ã</li>
</ol>
<p>ç±æ­¤å¯è§ï¼åºåæ¨¡åçæ ¸å¿è½åä¸æ¯âå¿é¡»å¤çåºåè¾å¥æè¾åºâï¼èæ¯<strong>è½å¤å¨å¤çè¿ç¨ä¸­ç»´æ¤ä¸ä¸æä¿¡æ¯</strong>ã<br>
æ¥ççåºåæ¨¡åçä¸äºå¸¸è§åºç¨é¢åï¼</p>
<table>
<thead>
<tr>
<th>ä»»å¡</th>
<th>è¾å¥ç±»å</th>
<th>è¾åºç±»å</th>
<th>è¯´æ</th>
</tr>
</thead>
<tbody>
<tr>
<td>ææ¬åç±»</td>
<td>åºå</td>
<td>ç±»å«</td>
<td>å¦ææåæãæ°é»åç±»ï¼çè§£æ´æ®µææ¬å¹¶è¾åºåä¸æ ç­¾</td>
</tr>
<tr>
<td>å½åå®ä½è¯å« (NER)</td>
<td>åºå</td>
<td>åºå</td>
<td>å¯¹æ¯ä¸ªè¯è¿è¡æ æ³¨ï¼å¦âäººåââå°åâç­</td>
</tr>
<tr>
<td>æºå¨ç¿»è¯</td>
<td>åºå</td>
<td>åºå</td>
<td>å°æºè¯­è¨å¥å­è½¬æ¢ä¸ºç®æ è¯­è¨å¥å­</td>
</tr>
<tr>
<td>ææ¬çæ</td>
<td>åºåææ é</td>
<td>åºå</td>
<td>æ ¹æ®è¾å¥ææ¬ææç¤ºçæå®æ´ææ¬</td>
</tr>
<tr>
<td>è¯­é³è¯å«</td>
<td>åºå</td>
<td>åºå</td>
<td>å°è¯­é³ä¿¡å·è½¬ä¸ºæå­åºå</td>
</tr>
<tr>
<td>é®ç­ç³»ç»</td>
<td>åºå</td>
<td>åºåææ é</td>
<td>æ ¹æ®é®é¢çæç­æ¡ï¼ç­æ¡å¯ä»¥æ¯ç­ææ¬æåä¸ç±»å«</td>
</tr>
<tr>
<td>æ¶é´åºåé¢æµ</td>
<td>åºå</td>
<td>åºåææ é</td>
<td>å¦è¡ä»·é¢æµï¼æ ¹æ®åå²åºåé¢æµæªæ¥æ°å¼</td>
</tr>
</tbody>
</table>
<p>éè¿è¿ä¸ªåç±»ï¼å¯ä»¥æ¸æ°å°çå°ï¼<strong>åºåæ¨¡åçæ ¸å¿æ¯å¤çé¡ºåºåä¸ä¸æï¼ä¸å¿éå¶è¾å¥è¾åºé½ä¸ºåºå</strong>ãåªè¦æåºåä¿¡æ¯å­å¨ï¼å®å°±å¯ä»¥åæ¥ä»·å¼ã</p>
<h1 id="4-æ»ç»">4. æ»ç»</h1>
<table>
<thead>
<tr>
<th>æ¦å¿µ</th>
<th>åç</th>
<th>æ¯å»</th>
</tr>
</thead>
<tbody>
<tr>
<td>åºåæ°æ®</td>
<td>æ°æ®åç´ æé¡ºåºæåï¼å½åçè§£ä¾èµåå²ä¸ä¸æï¼é¿åº¦ä¸åºå®</td>
<td>å¾ååæå¼çå°å¾ï¼ä¸ç¼å¯è§æ´ä½ï¼è¯­è¨åæ­£å¨æ­æ¾çè¯­é³ææå­æµï¼éè¦é¡ºåºæç¥</td>
</tr>
<tr>
<td>å¨è¿æ¥ç½ç»å¤çåºå</td>
<td>åªè½æ¥ååºå®é¿åº¦è¾å¥ï¼æ æ³å¤©ç¶æç¥é¡ºåº</td>
<td>åªæ¯æææè¯æ¼æä¸ä¸ªé¿åéï¼æ¨¡åçä¸å°ååé¡ºåº</td>
</tr>
<tr>
<td>å·ç§¯ç½ç»å¤çåºå</td>
<td>è½ææå±é¨è¿ç»­æ¨¡å¼ï¼ç­è·ç¦»ä¾èµï¼ï¼æåéæéï¼é¿è·ç¦»ä¾èµä¸é«æ</td>
<td>å·ç§¯åæ«æå±é¨çæ®µï¼èä¸æ¯æ²¿æ¶é´è½´çè§£æ´å¥è¯çåå±</td>
</tr>
<tr>
<td>æåé (Receptive Field)</td>
<td>ä¸ä¸ªå·ç§¯ç¥ç»åä¸æ¬¡è½å¤çå°çè¾å¥åºå</td>
<td>å¾åï¼3Ã3åç´ åªè½çå°å±é¨ï¼åºåï¼å·ç§¯æ ¸ä¸æ¬¡çå°å ä¸ªè¿ç»­è¯</td>
</tr>
<tr>
<td>åºåæ¨¡åæ ¸å¿è½å</td>
<td>éè¿å¯éæ¶é´æ¼åçåé¨ç¶æï¼ä¿çå¹¶æ´æ°ä¸ä¸æä¿¡æ¯ï¼çè§£å½åè¾å¥æ¶èèåå²ä¿¡æ¯</td>
<td>æ¨¡ååå¸¦è®°å¿çéè¯»èï¼çè§£æ¯ä¸ªè¯æ¶åèæ´æ®µä¸ä¸æ</td>
</tr>
<tr>
<td>è¾å¥/è¾åºç±»åçµæ´»æ§</td>
<td>åºåæ¨¡åä¸è¦æ±è¾å¥è¾åºé½ä¸ºåºåï¼åªè¦ä¸æ¹ä¸ºåºåå³å¯åæ¥ä½ç¨</td>
<td>è¾å¥æ¯æµï¼è¾åºæ¯å¤æ­æçæï¼æ¨¡åè®°å¿åå²ä¿¡æ¯</td>
</tr>
<tr>
<td>åºåæ¨¡ååºç¨</td>
<td>NLPãè¯­é³ãæ¶é´åºåç­é¢åï¼å¦ææ¬åç±»ãNERãæºå¨ç¿»è¯ãææ¬çæãè¯­é³è¯å«ãé®ç­ãæ¶é´åºåé¢æµ</td>
<td>ä¾èµä¸ä¸æä¿¡æ¯ï¼æ¨¡ååâé¡ºåºæç¥å¨âï¼æ ¹æ®è¿å»ä¿¡æ¯åå½åå³ç­</td>
</tr>
</tbody>
</table>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-05 18:53">2026-01-05 18:52</span>&nbsp;
<a href="https://www.cnblogs.com/Goblinscholar">å¥å¸æå­¦è</a>&nbsp;
éè¯»(<span id="post_view_count">25</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19437798);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19437798', targetLink: 'https://www.cnblogs.com/Goblinscholar/p/19437798', title: 'å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨äºï¼èªç¶è¯­è¨å¤ç  ç¬¬ä¸å¨ï¼å¾ªç¯ç¥ç»ç½ç» ï¼ä¸ï¼åºåæ°æ®ä¸åºåæ¨¡å' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ NVIDIA CUDA é«æ§è½è®¡ç®ç¬è®°ï¼ä¸ï¼cudaç¼ç¨ç®ä»åç©éµèµå¼æ¡ä¾ ]]></title>
    <link>https://www.cnblogs.com/GeophysicsWorker/p/19444388</link>
    <guid>44270e6fd5ada7d60af0b2474eb7362c</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/GeophysicsWorker/p/19444388" title="åå¸äº 2026-01-05 18:33">
    <span role="heading" aria-level="2">NVIDIA CUDA é«æ§è½è®¡ç®ç¬è®°ï¼ä¸ï¼cudaç¼ç¨ç®ä»åç©éµèµå¼æ¡ä¾</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        CUDA ï¼Compute  Unified Device Architectureï¼æ¯NIVIDIA æ¨åºçéç¨å¹¶è¡è®¡ç®å¹³å°ï¼æ¯æCï¼C++ï¼Pythonç­è¯­è¨ï¼å®ç°CPUåGPUååè®¡ç®ãå¶æ¶æéç¨Grid-Blocks-Threadsçº¿ç¨å±æ¬¡ç»æåSIMTå¹¶è¡æ¨¡å¼ï¼å¨ç»åºCUDAçç¼ç¨å®ä¾ä¹åï¼éè¦ç»åºæ¨¡åçåºç¡ç¥è¯åä¸ªç®åçä»ç»ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="nvidia-cuda-é«æ§è½è®¡ç®ç¬è®°ä¸">NVIDIA CUDA é«æ§è½è®¡ç®ç¬è®°ï¼ä¸ï¼</h1>
<p>â       CUDA ï¼Compute  Unified Device Architectureï¼æ¯NIVIDIA æ¨åºçéç¨å¹¶è¡è®¡ç®å¹³å°ï¼æ¯æCï¼C++ï¼Pythonç­è¯­è¨ï¼å®ç°CPUåGPUååè®¡ç®ãå¶æ¶æéç¨Grid-Blocks-Threadsçº¿ç¨å±æ¬¡ç»æåSIMTå¹¶è¡æ¨¡å¼ï¼å¨ç»åºCUDAçç¼ç¨å®ä¾ä¹åï¼éè¦ç»åºæ¨¡åçåºç¡ç¥è¯åä¸ªç®åçä»ç»ã</p>
<h2 id="11cudaç¼ç¨æ¨¡åç®ä»">1.1CUDAç¼ç¨æ¨¡åç®ä»</h2>
<p>â      CUDAç¼ç¨æ¨¡åæ¯ä¸ä¸ªå¼ææ¨¡åï¼éè¦GPUåCPUååå·¥ä½ãå¨CUDAæ¶æä¸­ï¼æä»¬ç¨hostç«¯æä»£CPUåå¶åå­çï¼ç¨deviceæä»£GPUåå¶åå­ãCUDAç¨åºä¸­å³åå«Hostç¨åºï¼ååå«deviceç¨åºï¼å®ä»¬åå«å¨CPUä¸GPUä¸è¿è¡ãåæ¶ï¼hostä¸deviceä¹é´è¿è¡éä¿¡ï¼è¿æ ·å®ä»¬ä¹é´å¯ä»¥è¿è¡æ°æ®æ·è´ãå¸åçCUDAç¨åºçæ§è¡çç¨åºçæµç¨ä¸ºï¼</p>
<ol>
<li>åéhoståå­ï¼å¹¶è¿è¡æ°æ®åå§åï¼</li>
<li>åédeviceåå­ï¼æ¾å­ãå±äº«åå­ï¼ï¼å¹¶ä»hostç«¯å°æ°æ®æ·è´å°deviceç«¯ï¼</li>
<li>è°ç¨CUDAçæ ¸å½æ°å¨deviceå½æ°ä¸å®ææå®çè¿ç®ï¼</li>
<li>å°deviceä¸çè¿ç®ç»ææ·è´å°hostä¸ï¼</li>
<li>éæ¾deviceåhostä¸åéçåå­ã</li>
</ol>
<p>â        ç±äºCUDAç¼ç¨æ¨¡åå®éä¸æ¯å¼æç¼ç¨æ¨¡åï¼æä»¥éè¦åºåhostådeviceä¸çä»£ç ï¼å¨CUDAä¸­æ¯éè¿å½æ°ç±»åéå®è¯åºå«å¼hostådeviceä¸çå½æ°ï¼ä¸»è¦çä¸ä¸ªå½æ°ç±»åéå®è¯å¦ä¸ï¼</p>
<ul>
<li><code>__global__</code>: å¨deviceç«¯ä¸æ§è¡ï¼ä»hostä¸­è°ç¨ï¼ä¸äºç¹å®çGPUä¹å¯ä»¥ä»deviceä¸è°ç¨ï¼ï¼è¿åç±»åå¿é¡»ä¸º <code>void</code> , ä¸æ¯æå¯ååæ°ï¼ä¸è½æä¸ºç±»æåå½æ°ãæ³¨æ<code>__global__</code> å®ä¹çkernelæ¯å¼æ­¥çï¼è¿æå³çhostç«¯ä¸ä¼ç­å¾kernelæ§è¡å®å°±æ§è¡ä¸ä¸æ­¥ï¼</li>
<li><code>__device__</code>: å¨deviceç«¯ä¸æ§è¡ï¼ä½ä»å¯ä»¥ä»deviceä¸­è°ç¨ï¼ä¸å¯ä»¥å <code>__global__</code> åæ¶ç¨ï¼</li>
<li><code>__host__</code>: å¨hostä¸æ§è¡ï¼ä»å¯ä»¥ä»hostä¸­è°ç¨ï¼ä¸è¬çç¥ä¸åï¼ä¸å¯ä»¥å <code>__global__</code>åæ¶ç¨ï¼ä½å¯ä»¥å <code>__device__</code>ï¼æ­¤æ¶å½æ°ä¼å¨deviceåhosté½ç¼è¯ã</li>
</ul>
<p>â         ä¸é¢çæµç¨ä¸­æéè¦çä¸ä¸ªè¿ç¨æ¯è°ç¨CUDAçæ ¸å½æ°æ¥æ§è¡å¹¶è¡è®¡ç®ï¼kernelæ¯CUDAä¸­çä¸ä¸ªéè¦çæ¦å¿µï¼kernelæ¯å¨deviceä¸çº¿ç¨ä¸­å¹¶è¡æ§è¡çå½æ°ï¼å¨è°ç¨æ¶éè¦ç¨ <code>&lt;&lt;&lt;grid,block&gt;&gt;&gt; </code> æ¥æå®kernelè¦æ§è¡ççº¿ç¨æ°éï¼å¨CUDAä¸­ï¼æ¯ä¸ªçº¿ç¨é½è¦æ§è¡æ ¸å½æ°ï¼å¹¶ä¸æ¯ä¸ªçº¿ç¨ä¼åéä¸ä¸ªå¯ä¸ç<span class="math inline">\(thread\space ID\)</span> ,è¿ä¸ª<span class="math inline">\(ID\)</span> å¼å¯ä»¥éè¿æ ¸å½æ°çåç½®åé <code>thread Idx</code> æ¥è·å¾ã</p>
<p>â       è¦æ·±å»çè§£<span class="math inline">\(kernel\)</span>ï¼å¿é¡»è¦å¯¹<span class="math inline">\(kernel\)</span> ççº¿ç¨å±æ¬¡ç»ææä¸ä¸ªæ¸æ°çè®¤è¯ãé¦åï¼<span class="math inline">\(GPU\)</span>ä¸å¾å¤å¹¶å½¢åçè½»éçº§çº¿ç¨ã<span class="math inline">\(kernel\)</span> å¨deviceä¸æ§è¡æ¶å®éä¸æ¯å¯å¨å¾å¤çº¿ç¨ï¼ä¸ä¸ª<span class="math inline">\(kernel\)</span> æå¯å¨çææçº¿ç¨ç§°ä¸º<strong>ç½æ ¼</strong><span class="math inline">\(grid\)</span> ï¼åä¸ä¸ªç½æ ¼ççº¿ç¨å±äº«ç¸åçå¨å±åå­ç©ºé´ï¼gridæ¯çº¿ç¨ç»æçç¬¬ä¸ä¸ªå±æ¬¡ï¼èç½æ ¼åå¯ä»¥åä¸ºå¾å¤<strong>çº¿ç¨å</strong>(block)ï¼ä¸ä¸ªçº¿ç¨åéé¢åå«å¾å¤çº¿ç¨ï¼è¿æ¯ç¬¬äºä¸ªå±æ¬¡ã  ä¸ºäºç¼ç¨æ¹ä¾¿ï¼<span class="math inline">\(grid\)</span> å<span class="math inline">\(block\)</span> é½æ¯å®ä¹ä¸º <code>dim3</code> ç±»åçåéï¼<code>dim3</code> å¯ä»¥çææ¯åå«ä¸ä¸ªæ ç¬¦å·æ´æ°<span class="math inline">\((x,y,z)\)</span> æåçç»æä½åéï¼å¨å®ä¹æ¶ï¼ç¼ºå¤±å¼åå§åä¸º1ãå æ­¤ï¼gridåblockå¯ä»¥çµæ´»å°å®ä¹ä¸º1-dimï¼2-dimä»¥å3-dimçç»æï¼å¯¹äºï¼<span class="math inline">\(knernel\)</span>å¨å®ä¹è°ç¨æ¶ä¹å¿é¡»éè¿æ§è¡éç½® <code>&lt;&lt;&lt;grid,block&gt;&gt;&gt;</code>æ¥æå®kernelæä½¿ç¨ççº¿ç¨æ°åç»æã</p>
<p><img alt="fHaSP2zNs" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1602810/202601/1602810-20260105183140327-2146202864.jpg" class="lazyload"></p>
<p>â    æä»¥ï¼ä¸ºäºæ¹ä¾¿ç¼ç¨ï¼CUDAä¸­ä½¿ç¨äº <code>dim3</code> ç±»åï¼<code>dim3</code> æ¯åºäºunit3å®ä¹çç¢éç±»åï¼ç¸å½äºç±3ä¸ª <code>unsigned int</code>ç±»åç»æçç»æä½ï¼çåå»ºåé <code>threadIdx</code> å <code>blockIdx</code>ãè¿æ ·ï¼å°±å¯ä»¥ä½¿ç¨ä¸ç»´ãäºç»´æä¸ç»´çç´¢å¼æ¥æ è¯çº¿ç¨ï¼ææ ä¸ç»´ãäºç»´æä¸ç»´çº¿ç¨åãä½¿å¾çº¿ç¨ç»ç»å½¢å¼å¯¹åç§åï¼åéãç©éµï¼æèé«ç»´å¼ éï¼ä¸­æ°æ®çåååå¾ç´è§ãèªç¶ã</p>
<ul>
<li>å¯¹äºä¸ç»´çblockï¼çº¿ç¨ç<span class="math inline">\(threadID\)</span>å°±æ¯<span class="math inline">\(threadId.x\)</span>;</li>
<li>å¯¹äºå¤§å°ä¸º<span class="math inline">\((Dx,Dy)\)</span>çäºç»´çº¿ç¨åblockï¼çº¿ç¨ç<span class="math inline">\(threadID\)</span> æ¯ <span class="math inline">\((threadIdx.x+threadIdx.x\times{Dx})\)</span>;</li>
<li>å¯¹äºå¤§å°ä¸º<span class="math inline">\((Dx,Dy,Dz)\)</span>çä¸ç»´çº¿ç¨åblock, çº¿ç¨ç<span class="math inline">\(threadID\)</span>æ¯ï¼<span class="math inline">\(threadIdx.x+threadIdx.y\times{Dx}+threadIdx.z\times{Dx}\times{Dy}\)</span>ï¼;</li>
</ul>
<p>å¦å¤ï¼çº¿ç¨è¿æåç½®åégridDimï¼ç¨äºè·åç½æ ¼ååä¸ªç»´åº¦çå¤§å°ã</p>
<p>â       æ­¤å¤ï¼è¿éç®åä»ç»ä¸ä¸CUDAçåå­æ¨¡åï¼å¦å¾æç¤ºãå¯ä»¥çå°ï¼æ¯ä¸ªçº¿ç¨æèªå·±çç§ææ¬å°åå­ï¼<span class="math inline">\(Local Memory\)</span>ï¼, èæ¯ä¸ªçº¿ç¨åæåå«å±äº«åå­ï¼<span class="math inline">\(Shared \space Memory\)</span>ï¼ãè¿å¯ä»¥è®¿é®ä¸äºåªè¯»åå­åï¼å¸¸ç¨åå­ï¼<span class="math inline">\(Constant \space Memory\)</span>ï¼åçº¹çåå­ ï¼<span class="math inline">\(Texture \space Memory\)</span>ï¼ãåå­ç»ææ¶åå°ç¨åºä¼åï¼è¿éå°±è¿å¤è®¨è®ºã</p>
<p><img alt="fHaRlklWa" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1602810/202601/1602810-20260105183156222-1925356777.png" class="lazyload"></p>
<p>â       è¿æéè¦ä¸ç¹ï¼ä½ éè¦å¯¹<span class="math inline">\(GPU\)</span>çç¡¬ä»¶å®ç°æä¸ä¸ªåºæ¬çè®¤è¯ãä¸é¢è¯´å°äº<span class="math inline">\(kernel\)</span>ççº¿ç¨ç»ç»å±æ¬¡ï¼é£ä¹ä¸ä¸ª<span class="math inline">\(kernel\)</span> å®éä¸ä¼å¯å¨å¾å¤çº¿ç¨ï¼è¿äºçº¿ç¨æ¯é»è¾ä¸æ¯å¹¶è¡çï¼ä½æ¯å¨ç©çå±ä¹æ¯æ æ³å´å¹¶ä¸ä¸å®ãè¿å¶å®åCPUçå¤çº¿ç¨æç±»ä¼¼ä¹å¤ï¼å¤çº¿ç¨å¦ææ²¡æå¤æ ¸æ¯æï¼å¨ç©çå±ä¹æ æ³å®ç°å¹¶è¡çãä½æ¯å¥½å¨<span class="math inline">\(GPU\)</span> å­å¨å¾å¤CUDAæ ¸å¿ï¼ååå©ç¨CUDAæ ¸å¿å¯ä»¥åååæ¥GPUçå¹¶è¡è®¡ç®è½åãGPUç¡¬ä»¶çä¸ä¸ªæ ¸å¿ç»ä»¶æ¯SMï¼åé¢å·²ç»è¯´è¿ï¼SMæ¯Streaming Multiprocessorï¼SMçæ ¸å¿ç»ä»¶åæ¬çCUDAæ ¸å¿ãå±äº«åå­ãå¯å­å¨ç­ï¼SMå¯ä»¥å¹¶åçæ§è¡ä¸ï¼ä¸ä¸ªçº¿ç¨ååªè½å¨ä¸ä¸ªSMä¸è¢«è°åº¦ãSMä¸è¬å¯ä»¥è°åº¦å¤ä¸ªçº¿ç¨åï¼è¿è¦çSMæ¬èº«çè½åãé£ä¹æå¯è½ä¸ä¸ªkernelçåä¸ªçº¿ç¨åè¢«åéå¤ä¸ªSMï¼æä»¥gridåªæ¯é»è¾å±ï¼èSMææ¯æ§è¡çç©çå±ãSMéç¨çæ¯<a href="https://link.zhihu.com/?target=http%3A//docs.nvidia.com/cuda/cuda-c-programming-guide/index.html%23simt-architecture" target="_blank" rel="noopener nofollow">SIMT</a>(Single-Instruction, Multiple-Threadï¼åæä»¤å¤çº¿ç¨)æ¶æï¼åºæ¬çæ§è¡ååæ¯çº¿ç¨æï¼warps)ï¼çº¿ç¨æåå«32ä¸ªçº¿ç¨ï¼è¿äºçº¿ç¨åæ¶æ§è¡ç¸åçæä»¤ï¼ä½æ¯æ¯ä¸ªçº¿ç¨é½åå«èªå·±çæä»¤å°åè®¡æ°å¨åå¯å­å¨ç¶æï¼ä¹æèªå·±ç¬ç«çæ§è¡è·¯å¾ãæä»¥å°½ç®¡çº¿ç¨æä¸­ççº¿ç¨åæ¶ä»åä¸ç¨åºå°åæ§è¡ï¼ä½æ¯å¯è½å·æä¸åçè¡ä¸ºï¼æ¯å¦éå°äºåæ¯ç»æï¼ä¸äºçº¿ç¨å¯è½è¿å¥è¿ä¸ªåæ¯ï¼ä½æ¯å¦å¤ä¸äºæå¯è½ä¸æ§è¡ï¼å®ä»¬åªè½æ­»ç­ï¼å ä¸ºGPUè§å®çº¿ç¨æä¸­ææçº¿ç¨å¨åä¸å¨ææ§è¡ç¸åçæä»¤ï¼çº¿ç¨æååä¼å¯¼è´æ§è½ä¸éãå½çº¿ç¨åè¢«ååå°æä¸ªSMä¸æ¶ï¼å®å°è¿ä¸æ­¥ååä¸ºå¤ä¸ªçº¿ç¨æï¼å ä¸ºè¿ææ¯SMçåºæ¬æ§è¡ååï¼ä½æ¯ä¸ä¸ªSMåæ¶å¹¶åççº¿ç¨ææ°æ¯æéçãè¿æ¯å ä¸ºèµæºéå¶ï¼SMè¦ä¸ºæ¯ä¸ªçº¿ç¨ååéå±äº«åå­ï¼èä¹è¦ä¸ºæ¯ä¸ªçº¿ç¨æä¸­ççº¿ç¨åéç¬ç«çå¯å­å¨ãæä»¥SMçéç½®ä¼å½±åå¶ææ¯æççº¿ç¨ååçº¿ç¨æå¹¶åæ°éãæ»ä¹ï¼å°±æ¯ç½æ ¼åçº¿ç¨ååªæ¯é»è¾ååï¼ä¸ä¸ªkernelçææçº¿ç¨å¶å®å¨ç©çå±æ¯ä¸ä¸å®åæ¶å¹¶åçãæä»¥kernelçgridåblockçéç½®ä¸åï¼æ§è½ä¼åºç°å·®å¼ï¼è¿ç¹æ¯è¦ç¹å«æ³¨æçãè¿æï¼ç±äºSMçåºæ¬æ§è¡ååæ¯åå«32ä¸ªçº¿ç¨ççº¿ç¨æï¼æä»¥blockå¤§å°ä¸è¬è¦è®¾ç½®ä¸º32çåæ°ã</p>
<table>
<thead>
<tr>
<th>åå­ç±»åï¼</th>
<th>åå­ä½ç¨ï¼</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>å¨å±åå­ï¼Global Memoryï¼</strong></td>
<td><strong>å®¹éæå¤§ï¼éå¸¸æ°GBï¼ï¼ææçº¿ç¨å¯è®¿é®ï¼ä½å»¶è¿é«ï¼400-800å¨æï¼</strong></td>
</tr>
<tr>
<td><strong>å±äº«åå­ï¼shared Memoryï¼</strong></td>
<td><strong>çä¸åå­ï¼éåº¦æ¯å¨å±åå­å¿«100åï¼ä½å®¹éæéï¼æ¯SMéå¸¸16-64KBï¼</strong></td>
</tr>
<tr>
<td><strong>å¯å­å¨ï¼Registersï¼</strong></td>
<td><strong>æå¿«çå­å¨ï¼æ¯ä¸ªçº¿ç¨ç§æ</strong></td>
</tr>
<tr>
<td><strong>å¸¸éåå­ï¼Constant Memoryï¼</strong></td>
<td><strong>åªè¯»ç¼å­ï¼éåå¹¿æ­æ°æ®</strong></td>
</tr>
<tr>
<td><strong>çº¹çåå­ï¼Texture Memoryï¼</strong></td>
<td><strong>ä¸ä¸ºå¾å½¢å¤çä¼åçç¹æ®ç¼å­</strong></td>
</tr>
</tbody>
</table>
<p>â     åå­è®¿é®ç¹æ§æ¯è¾ï¼</p>
<table>
<thead>
<tr>
<th>åå­ç±»å</th>
<th>ç©çä½ç½®</th>
<th>ä½ç¨å</th>
<th>å¸¦å®½ãéåº¦</th>
<th>ä½¿ç¨åºæ¯</th>
<th>æ¾å¼æ§å¶å³é®å­</th>
</tr>
</thead>
<tbody>
<tr>
<td>å¯å­å¨</td>
<td>GPUè¯çå¯å­å¨</td>
<td>çº¿ç¨ç§æ</td>
<td>æé«ï¼1å¨æï¼</td>
<td>é«é¢è®¿é®çç§æåéï¼å¦å¾ªç¯è®¡æ°å¨ï¼</td>
<td>èªå¨åéï¼å±é¨åéï¼</td>
</tr>
<tr>
<td>å±äº«åå­</td>
<td>GPUè¯çä¸çSMå¤çå¨</td>
<td>çº¿ç¨åå±äº«</td>
<td>é«ï¼1-32å¨æï¼</td>
<td>çº¿ç¨åä½ï¼å¦è§çº¦è¿ç®ãç©éµååï¼</td>
<td><code>__share__</code></td>
</tr>
<tr>
<td>æ¬å°åå­</td>
<td>å®éå¨å¨å±åå­ä¸­åå­</td>
<td>çº¿ç¨ç§æ</td>
<td>ä¸­ä½ï¼<span class="math inline">\(\approx\)</span>å¨å±åå­ï¼</td>
<td>å¤§æ°ç»æå¯å­å¨ä¸è¶³æ¶çæº¢åºåé</td>
<td>ç¼è¯å¨èªå¨åé</td>
</tr>
<tr>
<td>å¨å±åå­</td>
<td>GPUè®¾å¤æ¾å­</td>
<td>ææçº¿ç¨+ä¸»æº</td>
<td>ä¸­ï¼400~800å¨æï¼</td>
<td>å¤§è§æ¨¡æ°æ®å­å¨ï¼éè¦é¢ç¹è®¿é®æ¶éåå¹¶è®¿é®ä¼å</td>
<td><code>cudaMalloc</code>åé</td>
</tr>
<tr>
<td>å¸¸éåå­</td>
<td>GPUè¯çä¸çç¼å­</td>
<td>ææçº¿ç¨åªè¯»</td>
<td>ä¸­ï¼ç¼å­å éï¼</td>
<td>éè¦å¹¿æ­ç»ææçº¿ç¨çè³å¤</td>
<td><code>__constant__</code></td>
</tr>
<tr>
<td>çº¹çåå­</td>
<td>GPUä¸ç¨ç¼å­</td>
<td>ææçº¿ç¨</td>
<td>ä¸­ ï¼ä¼åè®¿å­ï¼</td>
<td>å¾å½¢å¤çãå·æç©ºé´å±é¨æ§çéå¯¹é½è®¿é®</td>
<td>çº¹çAPIç»å®</td>
</tr>
<tr>
<td>ä¸»æºåå­</td>
<td>CPUåå­</td>
<td>ä¸»æº+è®¾å¤ï¼éè¦æ·è´ï¼</td>
<td>æä½ï¼PCLeç¶é¢ï¼</td>
<td>CPU-GPUæ°æ®ä¼ è¾çä¸­é´å­å¨</td>
<td>mallocãcudaHostAlloc</td>
</tr>
</tbody>
</table>
<p>ä¸é¢æå°è¯¦ç»å°ä»ç»CUDAä¸­åç§åå­ç®¡çå½æ°çåè½ãåæ°åä½¿ç¨æ¹æ³ã</p>
<p><strong>CUDA</strong>æ¯ä¸ç§ç¨äºå¼æå¹¶è¡è®¡ç®çç¼ç¨æ¨¡åï¼ç»å¸¸éè¦å¨ä¸»æºç«¯ï¼hostï¼åè®¾å¤ç«¯ï¼Deviceï¼ä¹é´è¿è¡æ°æ®ä¼ è¾ãè¿æ¯å ä¸ºCUDAæ ¸å½æ°ä¼ å¥çå¿é¡»æ¯æåå¶ä¸­å¤çGPUæ¾å­çä¸ä¸ªå³é®çAPIï¼<code>cudaMalloc</code>,<code>cudaMemcpy</code>å <code>cudaFree</code>ã</p>
<ul>
<li><code>cudaMalloc</code>ï¼</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align: left">å¶æ¥å£APIå½¢å¼ï¼</th>
<th style="text-align: left">cudaError_t  cudaMalloc(void ** <em>devPtr</em>,size_t <em>size</em> )</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left"><strong>å½æ°åè½ï¼</strong></td>
<td style="text-align: left"><strong>å¨è®¾å¤ä¸åéçº¿æ§åå­sizeå­èï¼å¹¶éè¿æéè¿ååéçåå­devPtrãåéçåå­å¯¹åºä»»ä½ç±»åçåéãè®°å¿æ²¡æè¢«æ¸é¤ãå¤±è´¥æ¶è¿å cudaErrorMemoryAllocationã</strong></td>
</tr>
<tr>
<td style="text-align: left"><strong>åæ°ï¼</strong></td>
<td style="text-align: left"><strong><code>devPtr</code> è®¾å¤åå­åéæéï¼<code>size</code> ï¼åéçå­èæ°</strong></td>
</tr>
<tr>
<td style="text-align: left"><strong>è¿åå¼ï¼</strong></td>
<td style="text-align: left"><strong><code>cudaSuccess</code> , <code>cudaErrorMemoryAllocation</code></strong></td>
</tr>
</tbody>
</table>
<p>æ³¨æäºé¡¹ï¼</p>
<p>åéçåå­</p>
<ul>
<li>
<p><code>cudaMemcpy</code> ï¼</p>
<table>
<thead>
<tr>
<th>å¶æ¥å£å½¢å¼ï¼</th>
<th>cudaError_t cudaMemcpy(void * dist, const void * src,size_t count,CudaMemcpyKind kind)</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>å½æ°åè½ï¼</strong></td>
<td><strong>å°æåçåå­åºåçå­èå¤å¶å°æåçå­å¨åºå</strong></td>
</tr>
<tr>
<td><strong>åæ°ï¼</strong></td>
<td><strong>dist-ç®çå­å¨å°åï¼src -æºåå­å°åï¼count-å¤å¶åå­çå­èæ°ï¼ kind-ä¼ è¾ç±»å</strong></td>
</tr>
<tr>
<td><strong>è¿åå¼ï¼</strong></td>
<td><strong>cudaSuccessï¼cudaErrorInvalidValueï¼cudaErrorInvalidDevicePointerï¼cudaErrorInvalidMemcpyDirection</strong></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><code>cudaFree</code>ï¼</p>
<table>
<thead>
<tr>
<th>å¶æ¥å£å½¢å¼ï¼</th>
<th>cudaError_t cudaFree(void * devPtr)</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>å½æ°åè½</strong>ï¼</td>
<td><strong>éæ¾ç± æåçåå­ç©ºé´ï¼è¯¥ç©ºé´å¿é¡»æ¯ä¹åè°ç¨cudaMalloc()æcudaMallocPitch()æ¶è¿åè¿çãå¦åï¼æèå¦æcudaFree()ä¹åå·²è¢«è°ç¨è¿ï¼åè¿åéè¯¯ãå¦æ ä¸º 0ï¼åä¸æ§è¡ä½ãcudaFree() å¨å¤±è´¥æ¶è¿åcudaErrorInvalidDevicePointerã</strong></td>
</tr>
<tr>
<td><strong>åæ°:</strong></td>
<td><strong><code>devPtr</code> -è®¾å¤æéæååå­éæ¾</strong></td>
</tr>
<tr>
<td><strong>è¿åå¼ï¼</strong></td>
<td><strong>cudaSuccessï¼cudaErrorInvalidDevicePointer, cudaErrorInitialization</strong></td>
</tr>
</tbody>
</table>
<p>â</p>
</li>
</ul>
<h2 id="12-cudaçç¬¬ä¸ä¸ªç¨åºç©éµèµå¼matrix-assign">1.2 CUDAçç¬¬ä¸ä¸ªç¨åºâç©éµèµå¼(Matrix Assign)</h2>
<p>â            å¨æ¬èéè¿ä¸ä¸ªç©éµèµå¼ï¼matrix Assignï¼ä¾å­å¼å§çæ­£çCUDAç¨åºå®ç°ï¼æ¬ä¾æ¯å¨SDKä¸­templateç¨åºçåºç¡ä¸ä¿®æ¹å¾å°çã<span class="math inline">\(template\)</span> æ¯ <span class="math inline">\(NVIDIA\)</span> å¬å¸æä¾çCUDAç¨åºæ¨¡æ¿ï¼ä¹å°±æ¯CUDAç¨åºæåºæ¬çæ¡æ¶ãè¦åå»ºä¸ä¸ªCUDAç¨åºï¼å¯ä»¥ææ´ä¸ªtemplateæä»¶å¤å¶ä¸ä»½ãå¨ä¸ä¸ªCUDAç¨åºä¸­ï¼åºæ¬çä¸»æºç«¯ä»£ç ä¸»è¦å®æä»¥ä¸çåè½ï¼</p>
<ul>
<li>å¯å¨CUDAï¼ä½¿ç¨å¤å¡æ¶åºè¯¥æ¶åºè¯¥å ä¸è®¾å¤å·ï¼æä½¿ç¨<span class="math inline">\(cudaSetDevice()\)</span>è®¾å¤GPUè®¾å¤ï¼</li>
<li>ä¸ºè¾å¥æ°æ®åéåå­ç©ºé´ï¼</li>
<li>åå§åè¾å¥æ°æ®ï¼</li>
<li>ä¸ºGPUåéåå­ï¼ç¨äºå­æ¾è¾å¥æ°æ®ï¼</li>
<li>å°åå­ä¸­çè¾å¥æ°æ®æ·è´å°æ¾å­ï¼</li>
<li>ä¸ºGPUåéæ¾å­ï¼ç¨äºå­æ¾è¾åºæ°æ®ï¼</li>
<li>è°ç¨deviceç«¯çkernelè¿è¡è®¡ç®ï¼å°ç»æåå°æ¾å­ä¸­çå¯¹åºåºåï¼</li>
<li>ä¸ºCPUåéåå­ï¼ç¨äºå­æ¾GPUä¼ åæ¥çè¾åºæ°æ®ï¼</li>
<li>å°æ¾å­ä¸­çç»æè¯»åå°åå­ï¼</li>
<li>éæ¾åå­åæ¾å­ç©ºé´ï¼</li>
<li>éåºCUDAï¼</li>
</ul>
<p>æç®åçè®¾å¤ç«¯ä»£ç ä¸»è¦å®æä»¥ä¸åè½ï¼</p>
<ul>
<li>
<p>ä»æ¾å­è¯»åæ°æ®å°GPUçåï¼</p>
</li>
<li>
<p>å¯¹æ°æ®è¿è¡å¤çï¼</p>
</li>
<li>
<p>å°å¤çåçæ°æ®ååæ¾å­ï¼</p>
<p>å¶æ´ä¸ªå·¥ç¨åå«äºä¸ï¼</p>
<p>ï¼1ï¼ä¸»ç¨åºæä»¶CPU-Hostç«¯ç¨åºï¼example1main.cuï¼ï¼</p>
</li>
</ul>
<p>â       ï¼2ï¼GPUè®¾å¤ç«¯å½æ°çå¤çå½æ°å¤´æä»¶ï¼example_matrixassign_kernel.cuhï¼ï¼</p>
<p>â       ï¼3ï¼GPUè®¾å¤ç«¯å½æ°çå¤çå½æ°æä»¶ï¼example_matrixassign_kernel.cuï¼ï¼</p>
<p>File1ï¼ä¸»ç¨åºæä»¶CPU-Hostç«¯ç¨åºï¼example1main.cuï¼ï¼</p>
<pre><code class="language-c">#include&lt;stdio.h&gt; //ç³»ç»å¤´æä»¶
#include&lt;stdlib.h&gt;
#include&lt;string.h&gt;
#include&lt;math.h&gt;

#include"cuda_runtime.h" //cudaé¡¹ç®å¤´æä»¶
#include"device_launch_parameters.h"
#include"example_matrixassign_kernel.cuh"  //æ ¸å½æ°çæ°æ®çå¤´æä»¶


void runTest(int argc, char** argv);

int main(int argc,char** argv){

	runTest(argc,argv);

}

void runTest(int argc, char** argv){

	unsigned int num_blocks = 4;  //å®ä¹ç½æ ¼ä¸­ççº¿ç¨åæ°é
	unsigned int num_threads= 4;  //å®ä¹æ¯ä¸ªçº¿ç¨åä¸­ççº¿ç¨æ°é

	unsigned int mem_size = sizeof(float) * num_blocks * num_threads; //ä¸ºäºæ°æ®åéçå­å¨å¨å¤§å°ï¼è¿éæ¯ä¸ä¸ªäººçº¿ç¨è®¡ç®ä¸ä¸ªflaot

	//å¨hostç«¯åéåå­ï¼h_è¡¨ç¤ºhostç«¯ï¼iè¡¨ç¤ºinputï¼oè¡¨ç¤ºoutput
	float* h_idata = nullptr;
	float* h_odata = nullptr;

	h_idata =(float *)malloc(mem_size);
	h_odata = (float*)malloc(mem_size);

	if(h_idata != nullptr) {
	   memset(h_idata, 0, mem_size);
	}else{
		return;
	}
	if(h_odata!=nullptr){
		memset(h_odata, 0, mem_size);
	}else{
		return;
	}
	
	//å¨deviceç«¯åéæ¾å­ï¼d_è¡¨ç¤ºdeviceç«¯ï¼iè¡¨ç¤ºinputï¼oè¡¨ç¤ºoutput
	float* d_idata = nullptr;
	float* d_odata = nullptr;

	cudaError_t cudaStatus;  //cudaç¶æå¤æ­

	cudaStatus=cudaMalloc((void**)&amp;d_idata, mem_size);
	if(cudaStatus != cudaSuccess){
		printf("d_idata is cudaMalloc failed!\n");
		return;
	}
	cudaStatus=cudaMalloc((void**)&amp;d_odata, mem_size);
	if(cudaStatus!=cudaSuccess){
		printf("d_odata is cudaMalloc failed!\n");
		return;
	}
	
	//åå§ååå­ä¸­çå¼
	for(unsigned int i = 0; i &lt; num_threads * num_blocks;i++){
		h_idata[i] =1.0f;
	}//end for(unsigned int i = 0; i &lt; num_threads * num_blocks;i++)

	//å°åå­ä¸­çè¾å¥æ°æ®è¯»å¥è®¾å¤ç«¯æ¾å­ï¼è¿æ ·å°±å®æäºä¸»æºå¯¹è®¾å¤çæ°æ®åå¥
	cudaStatus=cudaMemcpy(d_idata,h_idata,mem_size,cudaMemcpyHostToDevice);

	//è®¾ç½®è¿è¡åæ°ï¼å³ç½æ ¼çå½¢ç¶åçº¿ç¨åçå½¢ç¶
	dim3 grid(num_blocks,1,1);
	dim3 block(num_threads,1,1);

	// è¿è¡æ ¸å½æ°ï¼è°ç¨GPUè¿è¡è¿ç®
	testMatrixAssignKernel &lt;&lt;&lt;grid, block&gt;&gt;&gt; (d_idata,d_odata);

	//å°ç»æä»æ¾å­åå¥åå­
	cudaStatus = cudaMemcpy(h_odata,d_odata,mem_size,cudaMemcpyDeviceToHost);

	//æå°ç»æ
	printf("èµå¼åçç©éµï¼\n");
	for (unsigned int iblock = 0; iblock &lt; num_blocks; iblock++) {
		for (unsigned int ithread = 0; ithread &lt; num_threads; ithread++) {
			printf("%5.0f", h_idata[iblock * num_threads + ithread]);
		}//end for(unsigned int ithread = 0; ithread &lt; num_threads; ithread++)
		printf("\n");
	}//end for(unsigned int iblock = 0; iblock &lt; num_blocks; iblock++)

	printf("èµå¼åçç©éµï¼\n");
	for(unsigned int iblock = 0; iblock &lt; num_blocks; iblock++){
		for(unsigned int ithread = 0; ithread &lt; num_threads; ithread++){
			printf("%5.0f",h_odata[iblock*num_threads+ithread]);
		}//end for(unsigned int ithread = 0; ithread &lt; num_threads; ithread++)
		printf("\n");
	}//end for(unsigned int iblock = 0; iblock &lt; num_blocks; iblock++)

	//è¾åºå­å¨å¨æé
	free(h_idata);
	free(h_odata);
	cudaFree(d_idata);
	cudaFree(d_odata);
}

</code></pre>
<p>ä»ä»£ç ä¸­çåºï¼CUDAçä¸»æºç«¯ä»£ç ä¸Cè¯­è¨éå¸¸ç¸ä¼¼ãä½ä¹æä¸é¨åCè¯­è¨ä¸­æ²¡æçè¯­å¥ï¼ä¸é¢éä¸è¿è¡åæã</p>
<p>â      ï¼1ï¼<code>cudaMalloc(size)</code>å¨æ¾å­global memoryä¸åéå¤§å°ä¸ºsizeå­èççº¿æ§ç©ºé´ãéè¦æ³¨æçæ¯ï¼ä¸mallocåfreeä¸æ ·ï¼cudaMalloc() ä¹å¿é¡»ä¸cudaFree()æå¯¹ä½¿ç¨ï¼å¦åæ æ³éæ¾æ¾å­ç©ºé´ï¼è¿è¡å æ¬¡ç¨åºä»¥åæ¾å¡ä¸å°±æ²¡ææ¾å­å¯ä¾åéï¼ç¨åºä¹å°±æ æ³æ­£å¸¸è¿è¡äºãå¦å¤ï¼ä¸ºäºæç»æéæè´¹çæåµç°è±¡ï¼æå¥½å¨ç¨åºç»æåå°æéèµç©ºå¹¶æ§æ¯ã</p>
<p>â      ï¼2ï¼ <code>cudaMemcpy()</code>ç¨äºæ·è´å­å¨å¨ä¸­çæ°æ®ï¼å¶ä¸­ç¬¬äºåæ°æ¯æåç®æ çæéï¼ç¬¬äºä¸ªåæ°æ¯æåæºçæéï¼ç¬¬ä¸ä¸ªåæ°æ¯éè¦æ·è´çå­èæ°ï¼ç¬¬åä¸ªåæ°æ¯æ·è´æä½çç±»åãæ·è´æä½ç±»åå±æä¸ç§ï¼</p>
<ul>
<li>cudaMemcpyDeviceToHost å°æ¾å­ä¸­çæ°æ®æ·è´åå­ä¸­ï¼</li>
<li>cudaMemcpyHostToDevice å°åå­ä¸­çæ°æ®æ·è´å°æ¾å­ä¸­ï¼</li>
<li>cudaMemcpyDeviceToDeviceå°global memoryä¸­çæ°æ®æ·è´å°åä¸ä¸ªCUDAä¸ä¸æçglobalçå¦ä¸ä¸ªåºåä¸­ï¼</li>
</ul>
<p>â      ï¼3ï¼<code>&lt;&lt;&lt;&gt;&gt;&gt;</code>è¿ç®ç¬¦å¯¹kernelå½æ°å®æ´çæ§è¡åæ°éç½®å½¢å¼æ¯<code>&lt;&lt;&lt;Dg,Db,Ns,S&gt;&gt;&gt;</code>ï¼å¶ä¸­åä¸ªåæ°çå«ä¹æ¯ï¼</p>
<ul>
<li>åæ°Dgç¨äºå®ä¹æ´ä¸ªgridçç»´åº¦åå°ºå¯¸ï¼ä¸ºdim3ç±»åï¼ä½å®éä¸åªæåä¸¤ç»´å¯ä»¥ä¸ä¸º1ã<code>Dim3 Dg(Dg.x,Dg.y,1)</code>ä¸­æ¯è¡æDg.xä¸ªblockï¼æ¯åæDg.yä¸ªblockçç»´åº¦ï¼ç¬¬ä¸ç»´æä¸º1ã</li>
<li>åæ°Dbä¸ºdim3ç±»åï¼ç¨äºå®ä¹æ¯ä¸ªblockçç»´åº¦ä¸å°ºå¯¸ã<code>Dim3 Db(Db.x,Db.y,Db.z)</code> ä¸­æ¯è¡æ<code>Db.x</code>ä¸ªthreadï¼æ¯å<code>Db.y</code>ä¸ªthreadï¼é«ä¸º<code>Db.z</code>ï¼å¯ä»¥å®ä¹ä¸ç»´å°ºå¯¸ãæ´ä¸ªblockä¸­å±æ<code>Db.x*Db.y*Db.z</code> ä¸ªçº¿ç¨ï¼</li>
<li>åæ°Nsæ¯ä¸ä¸ªå¯éåæ°ï¼ç¨äºè®¾ç½®æ¯ä¸ªblockçå±äº«åå­shared memoryä»¥å¤ï¼æå¤è½å¤å¨æåéçshared memoryå¤§å°ï¼åä½ä¸ºByteã</li>
<li>åæ°<span class="math inline">\(s\)</span>æ¯ä¸ä¸ªcudaStream_tç±»åçå¯éåæ°ï¼åå§å¼ä¸º0ãå¨æ¬æ¡ä¾ä¸­æ²¡æç¨å°Streamçç¸å³åå®¹å æ­¤è¿ä¸ªåæ°ä¸å¡«ï¼é»è®¤ä¸º0å·æµã</li>
</ul>
<p>File2ï¼ä¸»ç¨åºæä»¶CPU-Hostç«¯ç¨åºï¼example1main.cuï¼ï¼</p>
<p>â</p>
<pre><code class="language-c">
#pragma once
#ifndef EXAMPLE_MATRIXASSIGN_KERNEL_H
#define EXAMPLE_MATRIXASSIGN_KERNEL_H

#include&lt;stdio.h&gt;
#include"cuda_runtime.h"

__global__ void testMatrixAssignKernel(float* data_input, float* data_output);


#endif // !_EXAMPLE_MATRIXASSIGN_KERNEL_H_
</code></pre>
<p>File2ï¼ä¸»ç¨åºæä»¶CPU-Hostç«¯ç¨åºï¼example1main.cuï¼ï¼</p>
<pre><code class="language-C">
__global__ void testMatrixAssignKernel(float *data_input,float *data_output){

	//shared memory,externè¡¨ç¤ºå¤§å°ç±hostç«¯çNsåæ°ç¡®å®
	extern __shared__ float sdata[];

	const unsigned int bid = blockIdx.x; //çº¿ç¨æå¨çblockçç´¢å¼å·
	const unsigned int tid_in_block = threadIdx.x; //çº¿ç¨å¨blockä¸­çä½ç½®
	const unsigned int tid_in_grid = blockDim.x * blockIdx.x + threadIdx.x;

	//æè¡ååä»»å¡æ¶ï¼çº¿ç¨å¨æ´ä¸ªgridä¸­çä½ç½®

  // å°æ°æ®ä»global memoryè¯»å¥shared memory
	sdata[tid_in_block] = data_input[tid_in_grid];
	//è¯»å¥æ°æ®åè¿è¡ä¸æ¬¡åæ­¥ï¼ä¿è¯è®¡ç®æ¶æææ°æ®åå·²å°ä½
	__syncthreads();

	// è®¡ç®
	sdata[tid_in_block] = (float)tid_in_grid;
	//  sdata[tid_in_block] *= (float)tid_in_block;
	//  sdata[tid_in_block] *= (float)tid_in_grid;

	  //è¿è¡åæ­¥ï¼ç¡®ä¿è¦åå¥çæ°æ®å·²ç»è¢«æ´æ°
	__syncthreads();

	// å°shared memoryä¸­çæ°æ®åå°global memory
	data_output[tid_in_grid] = sdata[tid_in_block];


}
</code></pre>
<p>ç±ä¸å¯ç¥ï¼æç®åç<code>__gloabal__</code>ç¨åºç±ä»¥ä¸çè¿ç¨ç»æï¼</p>
<ol>
<li>åé<span class="math inline">\(shared \space memory\)</span>ï¼</li>
<li>å°<span class="math inline">\(global\space memory\)</span> ä¸­çæ°æ®è¯»å¥<span class="math inline">\(shared \space memory\)</span>;</li>
<li>å°è¿è¡è®¡ç®ï¼å°ç»æåå°<span class="math inline">\(shared \space memory\)</span>;</li>
<li>å°<span class="math inline">\(shared\)</span>ä¸­çç»æåå°<span class="math inline">\(global \space memory\)</span> ;</li>
</ol>
<p>â         è¿è¡ä¸æ¬¡GPUè®¡ç®ï¼è¦å¨å¤ç§å­å¨å¨è¿è¡å æ¬¡æ°æ®ä¼ è¾ï¼è¦æ¶èç¸å½å¤çæ¶é´ãè¿å¯¼è´äºè¾å¤§çå»¶è¿ï¼è¿å¯¼è´ä½¿<span class="math inline">\(GPU\)</span> ä¸éåå¤çä¸äºå®æ¶æ§è¦æ±å¾é«çåºç¨ãä¸åå­å¨å¨é´çæ°æ®ä¼ è¾éçåä½¿ç¨æ¹æ³æå¾å¤§å·®å¼ï¼å¼åäººåéè¦æ ¹æ®ç¡¬ä»¶çç¹ç¹æ¥è®¾è®¡ç®æ³ï¼ä»¥ä¼åå­å¨å¨è®¿é®ãå¨çæ³æåµä¸ï¼å¨ææçå­å¨å¨ä¼ è¾è¿è¡çåæ¶ï¼GPUçåä¸ªæ ¸å¿ä¹å§ç»å¨è¿è¡è®¡ç®ï¼è¿æ ·å°±è½å¤å¾å¥½çéèåç§è®¿é®å»¶è¿ãCUDA å¹¶ä¸æ¯ä¸ç§å®å¨ç¡¬ä»¶éæçè¯­è¨ï¼ç¨åºåéè¦æ ¹æ®ç¡¬ä»¶ç¹å¾å°ä»»å¡è¿è¡åççåè§£ï¼å¨ç¼ç¨æ¶å¯¹æ°æ®ä¼ è¾åå¯å­å¨è®¿é®è¿è¡ä¼åã</p>
<p>â       <code>__global__</code>åç¼è¡¨ç¤ºè¿ä¸æ®µä»£ç æ¯cuda GPUç«¯åæ ¸å½æ°ãåæ ¸å½æ°è¿è¡å¨è®¾å¤ä¸ï¼å¶è¿åç±»åå¿é¡»ä¸ºvoidã<code>__global__</code>å½æ°ä¸­æ¯æ¯ä¸ä¸ªçº¿ç¨è¦æ§è¡çè¯­å¥ï¼ä½ç±äº<span class="math inline">\(shared\space memory\)</span>ååæ­¥çå­å¨ï¼å¨æå¥½å°<code>__global__</code>å½æ°çè§£ä¸ºå¯¹æ¯ä¸ä¸ªblockçè¡ä¸ºçæè¿°ã</p>
<p>â        å¨è¿ä¸ç«¯åæ ¸å½æ°ä¸­ï¼é¦åå®ä¹äº<span class="math inline">\(shared \space memory\)</span> ä¸­çåéï¼ç¶åæ ¹æ®åå»ºåéå®ä¹æ¯ä¸ä¸ªblockåthreadçç´¢å¼ï¼å¯¹ä»»å¡è¿è¡ååï¼æåï¼æ¯ä¸ä¸ªçº¿ç¨æ§è¡äºç¸åçæ±åè¿ç®ï¼ä½å¤çæ°æ®ä¸åï¼ç±çº¿ç¨çç´¢å¼å³å®çãç¨åºåå¨ç¼å<code>__global__</code>å½æ°ä¹åï¼è¦åå¯¹ä»»å¡è¿è¡ååï¼è®¾è®¡åä¸ªblockçå·¥ä½æµç¨åï¼åå°æç«¹å¨è¸ã</p>
<p>â        ç±äºCUDAéç¨äºä¸¤å±å¹¶è¡ï¼å æ­¤æ¬ä¾å¨ååä»»å¡æ¶ï¼æ¯ä¸ªthreadå¨gridä¸­çç´¢å¼<span class="math inline">\(tid\_in\_grid\)</span> æ¯ç±threadæå¨blockåç¼å·tidè®¡ç®å¾æ¥çãè®¡ç®åºæ¯ä¸ªçº¿ç¨çç´¢å¼åï¼å°±å¯ä»¥æ ¹æ®ç´¢å¼å¤ççº¿ç¨ä¸­ä¸åçæ°æ®ï¼è¯·è¯»èå¥½å¥½ä½ä¼è¿ä¸ç¹ã</p>
<p>â      <code>extern __shared__ float sdata[]</code> å¨shared  memoryä¸­ä¸ºæ°ç»dataå¨æåéäºç©ºé´ã<code>extern</code> å¨è®¾å¤ç«¯åä¸»æºç«¯æä¸åçå«ä¹ï¼<code>__device__</code>å<code>__global__</code> å½æ°ä¸­è¡¨ç¤ºå¨æåéï¼èå¨ä¸»æºç«¯å½æ°ä¸­è¡¨ç¤ºå¤é¨åéãå¦æè¦éæåéä¸å <code>shared memory</code>ï¼é£ä¹å¨<code>__shared__</code>ä¹åå°±ä¸å <code>extern</code>ï¼è¿å¿é¡»å¨[]ä¸­åä¸è¦åéçå­èæ°ãå¨æåéçshared memoryå¤§å°ï¼æ¯&lt;&lt;&lt;&gt;&gt;&gt;çæ§è¡åæ°ä¸­ç¬¬ä¸ä¸ªåæ°è§å®çå¤§å°ãå³äº<code>shared memory</code>å¤§å°ã</p>
<p>â        CUDAå®ä¹äºä¸äºåå»ºåéå¦ä¸ï¼</p>
<ol>
<li>gridDimï¼ ç½æ ¼çç»´åº¦çåéï¼dim3ç±»å</li>
<li>blockIdx:    åçç´¢å¼åéï¼unit3ç±»å</li>
<li>blockDimï¼åçç»´åº¦åéï¼dim3ç±»å</li>
<li>threadIdxï¼ååççº¿ç¨ç´¢å¼åéï¼unit3ç±»å</li>
<li>warpSizeï¼çº¿ç¨ä¸­çwarpå¤§å°ï¼intç±»å</li>
</ol>
<p>å¶è¾åºç»æï¼</p>
<p><img alt="è¾åºç»æ" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1602810/202601/1602810-20260105183218257-98277715.png" class="lazyload"></p>
<p>â</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-05 18:34">2026-01-05 18:33</span>&nbsp;
<a href="https://www.cnblogs.com/GeophysicsWorker">GeoFXR</a>&nbsp;
éè¯»(<span id="post_view_count">40</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19444388);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19444388', targetLink: 'https://www.cnblogs.com/GeophysicsWorker/p/19444388', title: 'NVIDIA CUDA é«æ§è½è®¡ç®ç¬è®°ï¼ä¸ï¼cudaç¼ç¨ç®ä»åç©éµèµå¼æ¡ä¾' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
        </channel>
        </rss>