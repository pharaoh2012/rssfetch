<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åå®¢å­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2026-01-04T16:19:20.774Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åå®¢å­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ Vite7+DeepSeekç½é¡µçAiå©æ|vue3+arcoç½é¡µwebæµå¼çæaièå¤©é®ç­ç³»ç» ]]></title>
    <link>https://www.cnblogs.com/xiaoyan2017/p/19440082</link>
    <guid>709918a2f311042a476e54bb978b46d5</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiaoyan2017/p/19440082" title="åå¸äº 2026-01-05 00:08">
    <span role="heading" aria-level="2">Vite7+DeepSeekç½é¡µçAiå©æ|vue3+arcoç½é¡µwebæµå¼çæaièå¤©é®ç­ç³»ç»</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p><span style="font-size: 18px; font-family: å®ä½, &quot;Songti SC&quot;; color: rgba(102, 102, 204, 1)">2026æ¬¾<span style="background-color: rgba(204, 255, 153, 1)">vue3.5+vite7.2+deepseek-v3.2+arco</span>æé <span style="background-color: rgba(204, 255, 255, 1)">ç½é¡µwebç</span>æµå¼aiä¼è¯æ¨¡æ¿ã</span></p>
<p><span style="font-size: 12px"><strong>vite7-webseek</strong>ï¼åºäº<span style="background-color: rgba(255, 255, 153, 1)">vite7.2+vue3.5+arco-design+markdown</span>è°ç¨<strong>deepseek-v3.2</strong> APIä¼è¯å¤§æ¨¡åãæä¾<strong>æé»+æµè²</strong>ä¸»é¢çé¢ã<span style="background-color: rgba(204, 255, 204, 1)">æ°å¢æ·±åº¦æèãä»£ç é«äº®/å¤å¶ãKatexæ°å­¦å¬å¼ãMermaidå¾è¡¨æ¸²æ</span>ã</span></p>
<p><img alt="æªæ é¢-kk" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104230120706-1495277352.png" class="lazyload"></p>
<p><img alt="p4" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104230347008-136689453.gif" class="lazyload"></p>
<h3>ä½¿ç¨ææ¯</h3>
<ul>
<li><span style="font-size: 12px">ç¼è¾å¨ï¼vscode</span></li>
<li><span style="font-size: 12px">åç«¯ææ¯æ¡æ¶ï¼vite^7.2.4+vue^3.5.24+vue-router^4.6.4</span></li>
<li><span style="font-size: 12px">aiå¤§æ¨¡åæ¡æ¶ï¼DeepSeek-R1 + OpenAI</span></li>
<li><span style="font-size: 12px">ç»ä»¶åºï¼arco-design^2.57.0 (å­èæ¡é¢ç«¯ç»ä»¶åº)</span></li>
<li><span style="font-size: 12px">ç¶æç®¡çï¼pinia^3.0.4</span></li>
<li><span style="font-size: 12px">æ¬å°å­å¨ï¼pinia-plugin-persistedstate^4.7.1</span></li>
<li><span style="font-size: 12px">é«äº®æä»¶ï¼highlight.js^11.11.1</span></li>
<li><span style="font-size: 12px">markdownæä»¶ï¼markdown-it</span></li>
<li><span style="font-size: 12px">katexå¬å¼ï¼@mdit/plugin-katex^0.24.1</span></li>
</ul>
<p><img alt="p3" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104230624107-55036505.gif" class="lazyload"></p>
<p><img alt="p4-1" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104230656347-75627039.gif" class="lazyload"></p>
<h3>åè½æ§</h3>
<ol>
<li><span style="font-size: 12px">åºäºVite7.2æ¥å¥DeepSeekæµå¼ä¸æ»æå­è¾åºææ</span></li>
<li><span style="font-size: 12px">æä¾æé»+æµè²ä¸¤ç§ä¸»é¢ãä¾§è¾¹æ æ¶ç¼©</span></li>
<li><span style="font-size: 12px">æ¯æä¸°å¯Markdownæ ·å¼ï¼ä»£ç é«äº®/å¤å¶/æ¶ç¼©åè½</span></li>
<li><span style="font-size: 12px">æ°å¢æèæ¨¡å¼DeepSeek-R1</span></li>
<li><span style="font-size: 12px">æ¯æKatexæ°å­¦å¬å¼</span></li>
<li><span style="font-size: 12px">æ¯æMermaidåç§çç¹å¾/æµç¨å¾/ç±»å¾ç­å¾è¡¨</span></li>
<li><span style="font-size: 12px">ä½¿ç¨arco-designç»ä»¶åºï¼é£æ ¼ç»ä¸ï¼ç¾è§å¤§æ°</span></li>
</ol>
<p><img alt="p4-4" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104230858168-964001648.gif" class="lazyload"></p>
<h3>é¡¹ç®ç»æç®å½</h3>
<p><span style="font-size: 12px">vue3-webseekä½¿ç¨ææ°ç<strong>vite7.2</strong>æ¥å¥<strong>deepseek-v3.2</strong>æ­å»ºæµå¼aiå¯¹è¯ï¼éç¨&nbsp;<span class="cnblogs_code">vue3 setup</span>&nbsp;è¯­æ³ç³ç¼ç ã</span></p>
<p><img alt="360æªå¾20260104095028897" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104231216311-1312295669.png" class="lazyload"></p>
<blockquote>
<h3><em>vite7-webseekç½é¡µçaiå¯¹è¯ç³»ç»å·²ç»æ´æ°å°æçååä½åéï¼æ¬¢è¿ä¸è½½ä½¿ç¨ã</em></h3>
<p><span style="font-size: 12px"><a href="https://mall.bilibili.com/neul-next/detailuniversal/detail.html?page=detailuniversal_detail&amp;itemsId=11922437&amp;loadingShow=1&amp;noTitleBar=1#noReffer=true&amp;msource=merchant_share" target="_blank" rel="noopener nofollow">Vue3+DeepSeek+ArcoDesignç½é¡µçAIæµå¼å¯¹è¯æ¨¡æ¿</a></span></p>
</blockquote>
<h3>é¡¹ç®è¿è¡éç½®</h3>
<p><span style="font-size: 12px">èªå·±ç³è¯·ä¸ä¸ªdeepseek apikeyï¼æ¿æ¢æé¡¹ç®æ ¹ç®å½ä¸<strong>.env</strong>æä»¶éçkeyï¼å³å¯æå¿«ä½éªaiæµå¼å¯¹è¯åè½ã</span></p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104231837231-58531704.png" class="lazyload"></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 0, 1)"># title
VITE_APP_TITLE </span>= 'Vue3-Web-DeepSeek'<span style="color: rgba(0, 0, 0, 1)">

# port
VITE_PORT </span>= 3001<span style="color: rgba(0, 0, 0, 1)">

# è¿è¡æ¶èªå¨æå¼æµè§å¨
VITE_OPEN </span>= <span style="color: rgba(0, 0, 255, 1)">true</span><span style="color: rgba(0, 0, 0, 1)">

# å¼å¯https
VITE_HTTPS </span>= <span style="color: rgba(0, 0, 255, 1)">false</span><span style="color: rgba(0, 0, 0, 1)">

# æ¯å¦å é¤çäº§ç¯å¢ console
VITE_DROP_CONSOLE </span>= <span style="color: rgba(0, 0, 255, 1)">true</span><span style="color: rgba(0, 0, 0, 1)">

# DeepSeek APIéç½®
VITE_DEEPSEEK_API_KEY </span>=<span style="color: rgba(0, 0, 0, 1)"> æ¿æ¢ä¸ºä½ ç API Key
VITE_DEEPSEEK_BASE_URL </span>= https:<span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">api.deepseek.com</span></pre>
</div>
<p><img alt="æªæ é¢-bb" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104232000868-1657613899.png" class="lazyload"></p>
<p><img alt="003360æªå¾20260103091843214" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104232145672-415959067.png" class="lazyload"></p>
<h3>éç¨å¸å±æ¨¡æ¿</h3>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104232329143-383578235.png" class="lazyload"></p>
<p><span style="font-size: 12px">å¦ä¸å¾ï¼é¡¹ç®æ´ä½ç»æåä¸º<strong>ä¾§è¾¹æ +é¡¶é¨å¯¼èªæ +Aiå¯¹è¯åº</strong>ä¸å¤§æ¨¡åã</span></p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104232839646-1862838173.png" class="lazyload"></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">script </span><span style="color: rgba(255, 0, 0, 1)">setup</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span><span style="background-color: rgba(245, 245, 245, 1); color: rgba(0, 0, 0, 1)">
  import Sidebar from </span><span style="background-color: rgba(245, 245, 245, 1); color: rgba(0, 0, 0, 1)">'</span><span style="background-color: rgba(245, 245, 245, 1); color: rgba(0, 0, 0, 1)">@/layouts/components/sidebar/index.vue</span><span style="background-color: rgba(245, 245, 245, 1); color: rgba(0, 0, 0, 1)">'</span>
<span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">script</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>

<span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">template</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
  <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">div </span><span style="color: rgba(255, 0, 0, 1)">class</span><span style="color: rgba(0, 0, 255, 1)">="vu__container"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">div </span><span style="color: rgba(255, 0, 0, 1)">class</span><span style="color: rgba(0, 0, 255, 1)">="vu__layout flexbox flex-col"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
      <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">div </span><span style="color: rgba(255, 0, 0, 1)">class</span><span style="color: rgba(0, 0, 255, 1)">="vu__layout-body flex1 flexbox"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 128, 0, 1)">&lt;!--</span><span style="color: rgba(0, 128, 0, 1)"> ä¾§è¾¹åºå </span><span style="color: rgba(0, 128, 0, 1)">--&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Sidebar </span><span style="color: rgba(0, 0, 255, 1)">/&gt;</span>

        <span style="color: rgba(0, 128, 0, 1)">&lt;!--</span><span style="color: rgba(0, 128, 0, 1)"> ä¸»é¢æ¿åºå </span><span style="color: rgba(0, 128, 0, 1)">--&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">div </span><span style="color: rgba(255, 0, 0, 1)">class</span><span style="color: rgba(0, 0, 255, 1)">="vu__layout-main flex1"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
          <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">router-view </span><span style="color: rgba(255, 0, 0, 1)">v-slot</span><span style="color: rgba(0, 0, 255, 1)">="{ Component, route }"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
            <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">keep-alive</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
              <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">component </span><span style="color: rgba(255, 0, 0, 1)">:is</span><span style="color: rgba(0, 0, 255, 1)">="Component"</span><span style="color: rgba(255, 0, 0, 1)"> :key</span><span style="color: rgba(0, 0, 255, 1)">="route.path"</span> <span style="color: rgba(0, 0, 255, 1)">/&gt;</span>
            <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">keep-alive</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
          <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">router-view</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">div</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
      <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">div</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">div</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
  <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">div</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
<span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">template</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span></pre>
</div>
<h3>vue3æ¥å¥deepseekæ·±åº¦æè</h3>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104233124703-1428202818.png" class="lazyload"></p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104233216967-269432762.png" class="lazyload"></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> è°ç¨deepseekæ¥å£</span>
const completion =<span style="color: rgba(0, 0, 0, 1)"> await openai.chat.completions.create({
  </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> åä¸ä¼è¯</span>
  <span style="color: rgba(0, 128, 0, 1)">/*</span><span style="color: rgba(0, 128, 0, 1)"> messages: [
    {role: 'user', content: editorValue}
  ], </span><span style="color: rgba(0, 128, 0, 1)">*/</span>
  <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> å¤è½®ä¼è¯</span>
  messages: props.multiConversation ? historySession.value : [{role: 'user'<span style="color: rgba(0, 0, 0, 1)">, content: editorValue}],
  </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> deepseek-chatå¯¹è¯æ¨¡å deepseek-reasoneræ¨çæ¨¡å</span>
  model: sessionstate.thinkingEnabled ? 'deepseek-reasoner' : 'deepseek-chat'<span style="color: rgba(0, 0, 0, 1)">,
  stream: </span><span style="color: rgba(0, 0, 255, 1)">true</span>, <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æµå¼è¾åº</span>
  max_tokens: 8192, <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ä¸æ¬¡è¯·æ±ä¸­æ¨¡åçæ completion çæå¤§ token æ°(é»è®¤ä½¿ç¨ 4096)</span>
  temperature: 0.4, <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ä¸¥è°¨éæ ·</span>
})</pre>
</div>
<h3>vue3+deepseekèªå®ä¹Latexæ°å­¦å¬å¼/Mermaidå¾è¡¨</h3>
<div class="cnblogs_code">
<pre>import { katex } from "@mdit/plugin-katex"; <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æ¯ææ°å­¦å¬å¼</span>
import 'katex/dist/katex.min.css'
<span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æ¸²æmermaidå¾è¡¨</span>
import { markdownItMermaidPlugin } from '@/components/markdown/plugins/mermaidPlugin'</pre>
</div>
<p><strong>æ¸²æmarkdownè°ç¨æ¹å¼</strong></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Markdown
  </span><span style="color: rgba(255, 0, 0, 1)">:source</span><span style="color: rgba(0, 0, 255, 1)">="item.content"</span><span style="color: rgba(255, 0, 0, 1)">
  :html</span><span style="color: rgba(0, 0, 255, 1)">="true"</span><span style="color: rgba(255, 0, 0, 1)">
  :linkify</span><span style="color: rgba(0, 0, 255, 1)">="true"</span><span style="color: rgba(255, 0, 0, 1)">
  :typographer</span><span style="color: rgba(0, 0, 255, 1)">="true"</span><span style="color: rgba(255, 0, 0, 1)">
  :plugins</span><span style="color: rgba(0, 0, 255, 1)">="[
    [katex, {delimiters: 'all'}],
    [markdownItMermaidPlugin, { ... }]
  ]"</span><span style="color: rgba(255, 0, 0, 1)">
  @copy</span><span style="color: rgba(0, 0, 255, 1)">="onCopy"</span>
<span style="color: rgba(0, 0, 255, 1)">/&gt;</span></pre>
</div>
<p><img alt="005360æªå¾20260103120319468" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104234115865-193884745.png" class="lazyload"></p>
<p><img alt="006360æªå¾20260103120533404" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104234151062-1791535844.png" class="lazyload"></p>
<p><img alt="008360æªå¾20260103125240325" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104234206223-1883323991.png" class="lazyload"></p>
<p><strong>å°è£mermaidæ¸²ææä»¶</strong></p>
<div class="cnblogs_code">
<pre>export const markdownItMermaidPlugin = (md, options) =&gt;<span style="color: rgba(0, 0, 0, 1)"> {
  const defaultFence </span>=<span style="color: rgba(0, 0, 0, 1)"> md.renderer.rules.fence
  md.renderer.rules.fence </span>= (...args) =&gt;<span style="color: rgba(0, 0, 0, 1)"> {
    const [tokens, idx] </span>=<span style="color: rgba(0, 0, 0, 1)"> args
    const token </span>=<span style="color: rgba(0, 0, 0, 1)"> tokens[idx]
    const lang </span>= token.info.replace(/\[.*\]/, '').trim() || ''

    <span style="color: rgba(0, 0, 255, 1)">if</span>(lang === 'mermaid'<span style="color: rgba(0, 0, 0, 1)">) {
      const code </span>=<span style="color: rgba(0, 0, 0, 1)"> token.content.trim()
      const hash </span>=<span style="color: rgba(0, 0, 0, 1)"> generateHash(code)
      const uuid </span>= `${hash}-${Date.now()}-${Math.random().toString(36).substring(2, 9<span style="color: rgba(0, 0, 0, 1)">)}`

      </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> å¦ææç¼å­ï¼å è½½ç¼å­å¾è¡¨</span>
      <span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)">(renderCache.has(hash)) {
        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> console.log('å è½½ç¼å­mermaidå¾è¡¨')</span>
        <span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> `
          ${ defaultFence(...args) }
          </span>&lt;div class="mermaid-container"&gt;${renderCache.get(hash)}&lt;/div&gt;
<span style="color: rgba(0, 0, 0, 1)">        `
      }

      nextTickRender(uuid)

      </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> `
        ${ defaultFence(...args) }
        </span>&lt;div class="mermaid-container" id="${uuid}" data-mermaid-hash="${hash}" data-mermaid-code="${encodeURIComponent(code)}"&gt;
          &lt;div class="mermaid-loading"&gt;ðMermaid å¾è¡¨å è½½ä¸­...&lt;/div&gt;
        &lt;/div&gt;
<span style="color: rgba(0, 0, 0, 1)">      `
    }

    </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> defaultFence(...args)
  }

  </span><span style="color: rgba(0, 0, 255, 1)">function</span><span style="color: rgba(0, 0, 0, 1)"> nextTickRender(containerId) {
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> å¦æå®¹å¨å­å¨ï¼ç´æ¥æ¸²æ</span>
    <span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)">(document.getElementById(containerId)) {
      renderMermaidDiagram(containerId)
      </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)">
    }
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ä½¿ç¨MutationObserverçå¬DOMæ´æ°</span>
    const observer = <span style="color: rgba(0, 0, 255, 1)">new</span> MutationObserver((mutations, ob) =&gt;<span style="color: rgba(0, 0, 0, 1)"> {
      const container </span>=<span style="color: rgba(0, 0, 0, 1)"> document.getElementById(containerId)
      </span><span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)">(container) {
        ob.disconnect()
        renderMermaidDiagram(containerId)
      }
    })
    observer.observe(document.body, {
      childList: </span><span style="color: rgba(0, 0, 255, 1)">true</span><span style="color: rgba(0, 0, 0, 1)">,
      subtree: </span><span style="color: rgba(0, 0, 255, 1)">true</span><span style="color: rgba(0, 0, 0, 1)">
    })
  }
  
  async </span><span style="color: rgba(0, 0, 255, 1)">function</span><span style="color: rgba(0, 0, 0, 1)"> renderMermaidDiagram(containerId) {
    const container </span>=<span style="color: rgba(0, 0, 0, 1)"> document.getElementById(containerId)
    </span><span style="color: rgba(0, 0, 255, 1)">if</span> (!<span style="color: rgba(0, 0, 0, 1)">container) {
      console.warn(`Mermaid container #${containerId} not found`)
      </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)">
    }
  
    const code </span>=<span style="color: rgba(0, 0, 0, 1)"> decodeURIComponent(container.dataset.mermaidCode)
    const hash </span>=<span style="color: rgba(0, 0, 0, 1)"> container.dataset.mermaidHash

    </span><span style="color: rgba(0, 0, 255, 1)">if</span> (!<span style="color: rgba(0, 0, 0, 1)">code) {
      </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)">
    }

    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æ£æ¥ mermaid æ¯å¦å¯ç¨</span>
    <span style="color: rgba(0, 0, 255, 1)">if</span> (<span style="color: rgba(0, 0, 255, 1)">typeof</span> window.mermaid === 'undefined'<span style="color: rgba(0, 0, 0, 1)">) {
      showError(container, </span>'Mermaid åºæªå è½½!'<span style="color: rgba(0, 0, 0, 1)">)
      </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)">
    }
  
    </span><span style="color: rgba(0, 0, 255, 1)">try</span><span style="color: rgba(0, 0, 0, 1)"> {
      </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> éç½® mermaidï¼å¦æè¿æªéç½®ï¼</span>
      <span style="color: rgba(0, 0, 255, 1)">if</span> (!<span style="color: rgba(0, 0, 0, 1)">window.mermaid.initialized) {
        window.mermaid.initialize({
          startOnLoad: </span><span style="color: rgba(0, 0, 255, 1)">false</span><span style="color: rgba(0, 0, 0, 1)">,
          theme: </span>'default'<span style="color: rgba(0, 0, 0, 1)">,
          securityLevel: </span>'loose'<span style="color: rgba(0, 0, 0, 1)">,
        })
        window.mermaid.initialized </span>= <span style="color: rgba(0, 0, 255, 1)">true</span><span style="color: rgba(0, 0, 0, 1)">
      }
  
      let svg
  
      </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æ£æ¥ç¼å­</span>
      <span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)">(renderCache.has(hash)) {
        svg </span>=<span style="color: rgba(0, 0, 0, 1)"> renderCache.get(hash)
      }</span><span style="color: rgba(0, 0, 255, 1)">else</span><span style="color: rgba(0, 0, 0, 1)"> {
        const { isValid } </span>=<span style="color: rgba(0, 0, 0, 1)"> await verifyMermaid(code)

        </span><span style="color: rgba(0, 0, 255, 1)">if</span>(!<span style="color: rgba(0, 0, 0, 1)">isValid) {
          showError(container, `</span>&lt;pre&gt;æ¸²æè¯­æ³éè¯¯ï¼\n${ code }\n&lt;/pre&gt;`)
          <span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)">
        }

        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ä½¿ç¨å¯ä¸IDæ¸²æ(é¿åå¾è¡¨å²çª)</span>
        const {svg: renderedSvg} = await window.mermaid.render(`mermaid-<span style="color: rgba(0, 0, 0, 1)">${containerId}`, code)
        svg </span>=<span style="color: rgba(0, 0, 0, 1)"> renderedSvg
        renderCache.set(hash, svg)
      }

      container.innerHTML </span>=<span style="color: rgba(0, 0, 0, 1)"> svg
      container.removeAttribute(</span>'data-mermaid-hash'<span style="color: rgba(0, 0, 0, 1)">)
      container.removeAttribute(</span>'data-mermaid-code'<span style="color: rgba(0, 0, 0, 1)">)

      </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> è§¦ååè°</span>
      <span style="color: rgba(0, 0, 255, 1)">if</span>(options?<span style="color: rgba(0, 0, 0, 1)">.reachBottom) {
        options</span>?.onRender?<span style="color: rgba(0, 0, 0, 1)">.()
      }
    } </span><span style="color: rgba(0, 0, 255, 1)">catch</span><span style="color: rgba(0, 0, 0, 1)"> (error) {
      console.error(</span>'Mermaid æ¸²æå¤±è´¥:'<span style="color: rgba(0, 0, 0, 1)">, error)
      showError(container, `</span>&lt;pre&gt;æ¸²æå¾è¡¨æ¶åºé: \n ${error.message}\n&lt;/pre&gt;`)
<span style="color: rgba(0, 0, 0, 1)">    }
  }
}</span></pre>
</div>
<p><img alt="001360æªå¾20260103080425549" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104234531696-1529542441.png" class="lazyload"></p>
<p><img alt="002360æªå¾20260103081001998" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104234708650-44257651.png" class="lazyload"></p>
<p><img alt="002360æªå¾20260103081001999" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104234718944-220460913.png" class="lazyload"></p>
<p><img alt="002360æªå¾20260103084825451" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104234803735-419072055.png" class="lazyload"></p>
<p><img alt="002360æªå¾20260103085708292" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104234842737-2092683993.png" class="lazyload"></p>
<p><img alt="003360æªå¾20260103091332143" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104234903823-376050078.png" class="lazyload"></p>
<p><img alt="003360æªå¾20260103091843214" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104232145672-415959067.png" class="lazyload"></p>
<p><img alt="004360æªå¾20260103115744725" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104234930374-1450415020.png" class="lazyload"></p>
<p><img alt="005360æªå¾20260103120319468" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104234115865-193884745.png" class="lazyload"></p>
<p><img alt="007360æªå¾20260103120754686" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104235044386-1586378669.png" class="lazyload"></p>
<p><img alt="008360æªå¾20260103124947743" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104235101067-622233831.png" class="lazyload"></p>
<p><img alt="009360æªå¾20260103125438125" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104235121458-124723755.png" class="lazyload"></p>
<p><img alt="010360æªå¾20260103125925726" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104235138353-1226574032.png" class="lazyload"></p>
<p><img alt="012360æªå¾20260103130203476" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260104235200540-937038902.png" class="lazyload"></p>
<h3>vue3å¯¹æ¥deepseek apiæµå¼è¾åº</h3>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> è°ç¨deepseekæ¥å£</span>
const completion =<span style="color: rgba(0, 0, 0, 1)"> await openai.chat.completions.create({
  </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> åä¸ä¼è¯</span>
  <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> messages: [{role: 'user', content: editorValue}],</span>
  <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> å¤è½®ä¼è¯</span>
  messages: props.multiConversation ? historySession.value : [{role: 'user'<span style="color: rgba(0, 0, 0, 1)">, content: editorValue}],
  </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> deepseek-chatå¯¹è¯æ¨¡å deepseek-reasoneræ¨çæ¨¡å</span>
  model: sessionstate.thinkingEnabled ? 'deepseek-reasoner' : 'deepseek-chat'<span style="color: rgba(0, 0, 0, 1)">,
  stream: </span><span style="color: rgba(0, 0, 255, 1)">true</span>, <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æµå¼è¾åº</span>
  max_tokens: 8192<span style="color: rgba(0, 0, 0, 1)">,
  temperature: </span>0.4<span style="color: rgba(0, 0, 0, 1)">
})</span></pre>
</div>
<p><strong>å¤çæµå¼è¾åº</strong></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">for</span><span style="color: rgba(0, 0, 0, 1)"> await (const chunk of completion) {
  </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æ£æ¥æ¯å¦å·²ç»æ­¢</span>
  <span style="color: rgba(0, 0, 255, 1)">if</span>(sessionstate.aborted) <span style="color: rgba(0, 0, 255, 1)">break</span><span style="color: rgba(0, 0, 0, 1)">

  const content </span>= chunk.choices[0]?.delta?.content || ''
  <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> è·åæ¨çåå®¹</span>
  const reasoningContent = chunk.choices[0]?.delta?.reasoning_content || ''
  
  <span style="color: rgba(0, 0, 255, 1)">if</span>(content ||<span style="color: rgba(0, 0, 0, 1)"> reasoningContent) {
    answerText </span>+=<span style="color: rgba(0, 0, 0, 1)"> content
    reasoningText </span>+=<span style="color: rgba(0, 0, 0, 1)"> reasoningContent

    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> éå¶æ´æ°é¢çï¼æ¯100msæå¤æ´æ°ä¸æ¬¡</span>
    const now =<span style="color: rgba(0, 0, 0, 1)"> Date.now()
    </span><span style="color: rgba(0, 0, 255, 1)">if</span>(now - lastUpdate &gt; 100<span style="color: rgba(0, 0, 0, 1)">) {
      lastUpdate </span>=<span style="color: rgba(0, 0, 0, 1)"> now
      requestAnimationFrame(() </span>=&gt;<span style="color: rgba(0, 0, 0, 1)"> {
        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ...</span>
<span style="color: rgba(0, 0, 0, 1)">      })
    }
  }
  </span><span style="color: rgba(0, 0, 255, 1)">if</span>(chunk.choices[0]?.finish_reason === 'stop'<span style="color: rgba(0, 0, 0, 1)">) {
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ...</span>
<span style="color: rgba(0, 0, 0, 1)">  }
}</span></pre>
</div>
<p><img alt="æªæ é¢-aa" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202601/1289798-20260105000527126-1262812720.png" class="lazyload"></p>
<p>ä»¥ä¸å°±æ¯vite7.2æ¥å¥deepseekæ­å»ºç½é¡µçæµå¼aiå¯¹è¯ç³»ç»çä¸äºé¡¹ç®åäº«ï¼å¸æè½ç»å¤§å®¶å¸¦æ¥ä¸äºå¸®å©ï¼</p>
<p><strong>éä¸å ä¸ªææ°å®æé¡¹ç®</strong></p>
<blockquote>
<p><span style="font-size: 12px"><a class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiaoyan2017/p/18853514" target="_blank">Uniapp-DeepSeekè·¨ä¸ç«¯AIå©æ|uniapp+vue3+deepseek-v3æµå¼aièå¤©æ¨¡æ¿</a></span></p>
<p><span style="font-size: 12px"><a class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiaoyan2017/p/19385909" target="_blank">vite7+deepseekæµå¼aiæ¨¡æ¿|vue3.5+deepseek3.2+markdownæå­è¾åºaiå©æ</a></span></p>
<p><span style="font-size: 12px"><a class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiaoyan2017/p/19313982" target="_blank">ææ°çFlutter3.38+Dart3.10ä»¿åæé³APPç´æ­+ç­è§é¢+èå¤©åºç¨ç¨åº</a></span></p>
<p><span style="font-size: 12px"><a class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiaoyan2017/p/18894117" target="_blank">flutter3-deepseekæµå¼AIæ¨¡æ¿|Flutter3.27+Dio+DeepSeeekèå¤©aiå©æ</a></span></p>
<p><span style="font-size: 12px"><a class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiaoyan2017/p/19136187" target="_blank">Electron38-Vue3OSå®¢æ·ç«¯OSç³»ç»|vite7+electron38+arcoæ¡é¢osåå°ç®¡ç</a></span></p>
<p><span style="font-size: 12px"><a class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiaoyan2017/p/19116145" target="_blank">electron38-adminæ¡é¢ç«¯åå°|Electron38+Vue3+ElementPlusç®¡çç³»ç»</a></span></p>
<p><span style="font-size: 12px"><a class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiaoyan2017/p/19088804" target="_blank">Electron38-Wechatçµèç«¯èå¤©|vite7+electron38ä»¿å¾®ä¿¡æ¡é¢ç«¯èå¤©ç³»ç»</a></span></p>
<p><span style="font-size: 12px"><a class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiaoyan2017/p/18962574" target="_blank">ææ°çuniapp+vue3+uv-uiè·¨ä¸ç«¯ç­è§é¢+ç´æ­+èå¤©ãH5+å°ç¨åº+Appç«¯ã</a></span></p>
<p><span style="font-size: 12px"><a class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiaoyan2017/p/19031695" target="_blank">ææ°çuni-app+vue3+uv-uiè·¨ä¸ç«¯ä»¿å¾®ä¿¡appèå¤©åºç¨ãh5+å°ç¨åº+appç«¯ã</a></span></p>
<p><span style="font-size: 12px"><a class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiaoyan2017/p/19018641" target="_blank">Flutter3-MacOSæ¡é¢OSç³»ç»|flutter3.32+window_managerå®¢æ·ç«¯OSæ¨¡æ¿</a></span></p>
<p><span style="font-size: 12px"><a class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiaoyan2017/p/19181509" target="_blank">Tauri2-Vite7Adminå®¢æ·ç«¯ç®¡çåå°|tauri2.9+vue3+element-plusåå°ç³»ç»</a></span></p>
<p><span style="font-size: 12px"><a class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiaoyan2017/p/19235565" target="_blank">Tauri2.9+Vue3æ¡é¢çOSç³»ç»|vite7+tauri2+arcoDesignçµèç«¯osåå°æ¨¡æ¿</a></span></p>
</blockquote>
<p><img alt="n.sohucs" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1289798/202509/1289798-20250913081806584-87321175.gif" class="lazyload"></p>
<p>&nbsp;</p>
</div>
<div id="MySignature" role="contentinfo">
    æ¬æä¸ºåä¸»ååæç« ï¼æªç»åä¸»åè®¸ä¸å¾è½¬è½½ï¼æ¬¢è¿å¤§å®¶ä¸èµ·äº¤æµ QQï¼282310962ï¼ wxï¼xy190310ï¼
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-05 00:09">2026-01-05 00:08</span>&nbsp;
<a href="https://www.cnblogs.com/xiaoyan2017">xiaoyan2017</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19440082);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19440082', targetLink: 'https://www.cnblogs.com/xiaoyan2017/p/19440082', title: 'Vite7+DeepSeekç½é¡µçAiå©æ|vue3+arcoç½é¡µwebæµå¼çæaièå¤©é®ç­ç³»ç»' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ åæ³¨æå å·¥ï¼è®©ä½ çå¾è¡¨æä½è¯»èçç¼ç ]]></title>
    <link>https://www.cnblogs.com/wang_yb/p/19440010</link>
    <guid>b0cdaaf538f404bdce50ae205380af18</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/wang_yb/p/19440010" title="åå¸äº 2026-01-04 23:10">
    <span role="heading" aria-level="2">åæ³¨æå å·¥ï¼è®©ä½ çå¾è¡¨æä½è¯»èçç¼ç</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>æ³è±¡ä¸ä¸ï¼ä½ èµ°è¿ä¸ä¸ªæ¤æ»¡äººçæ¿é´ï¼æååä½ ææ--ä½ å ä¹ç«å»å°±è½çå°ä»ã</p>
<p>è¿æ¯å ä¸ºâææâè¿ä¸ªå¨ä½å¨ä½ çå¤§èè¿è¡æ·±å¥æèä¹åï¼å°±å·²ç»è¢«æ³¨æå°äºã</p>
<p>åæ¯å¦å½ä½ èµ°å¨ççææçå¤§è¡ä¸ï¼å¦æææäººç©¿çé½æ¯é»ç°è²çå¤§è¡£ï¼èæ­¤æ¶æä¸ä¸ªäººç©¿çé²çº¢è²çé£è¡£ï¼ä½ ä¼çåªéï¼</p>
<p>æ¯«æ çé®ï¼ä½ çç®åä¼ç¬é´è¢«é£æ¹çº¢è²å¸å¼ã</p>
<p>è¿å°±æ¯<strong>åæ³¨æå å·¥</strong>ï¼æä»¬çå¤§èè½å¨æç­æ¶é´åï¼çº¦200-250æ¯«ç§ï¼èªå¨æ£æµå°æäºè§è§ç¹å¾ï¼èæ éæä»¬ææè¯å°å»å¯»æ¾ã</p>
<p>å¨æ°æ®å¯è§åä¸­ï¼<strong>åæ³¨æå å·¥</strong>å°±æ¯æä»¬ç¨æ¥å¼å¯¼è¯»èæ³¨æåçâè§è§é­æ¯âã</p>
<p>éè¿å·§å¦å°æ¹åé¢è²ãå¤§å°ãå½¢ç¶ç­è§è§å±æ§ï¼æä»¬å¯ä»¥è®©å¾è¡¨ä¸­çå³é®ä¿¡æ¯ï¼å¦æå¤§å¼ãæå°å¼ãå¼å¸¸å¼ï¼åæåææä¸æ ·âè·³åºæ¥âï¼ç¬¬ä¸æ¶é´æä½è¯»èçç¼çã</p>
<h1 id="1-åæ³¨æå å·¥çå®ç¨æå·§">1. åæ³¨æå å·¥çå®ç¨æå·§</h1>
<ol>
<li><strong>å°å³æ¯å¤</strong>ï¼ä¸è¦è¿åº¦ä½¿ç¨çªåºææï¼å¦åä¼å¤±å»ç¦ç¹</li>
<li><strong>ä¸è´æ§åå</strong>ï¼å¨æ´ä¸ªæ¥åæä»ªè¡¨æ¿ä¸­ä½¿ç¨ç¸åççªåºé¢è²ç¼ç </li>
<li><strong>èèè²ç²ç¨æ·</strong>ï¼é¿åä»ä¾é é¢è²åºåï¼å¯ç»åå½¢ç¶ãçº¹çç­</li>
<li><strong>ä¸ä¸æç¸å³</strong>ï¼æ ¹æ®æ°æ®ç¹ç¹åè§ä¼èæ¯éæ©åéççªåºæ¹å¼</li>
<li><strong>æµè¯ææ</strong>ï¼è®©å¶ä»äººæ¥çä½ çå¾è¡¨ï¼ç¡®è®¤çªåºæææ¯å¦è¾¾å°é¢æ</li>
</ol>
<h1 id="2-åæ³¨æå å·¥å®ä¾">2. åæ³¨æå å·¥å®ä¾</h1>
<p>æ¦å¿µä»ç»å®äºï¼ä¸é¢ç´æ¥çä»£ç ï¼ççå®éæåµä¸å¦ä½ä½¿ç¨<strong>åæ³¨æå å·¥</strong>æ¥æé«æä»¬çå¯è§åææã</p>
<h2 id="21-çªåºæå¤§å¼åæå°å¼">2.1. çªåºæå¤§å¼åæå°å¼</h2>
<pre><code class="language-python"># ç¤ºä¾1ï¼çªåºæå¤§å¼åæå°å¼
# åå»ºæ°æ®
np.random.seed(42)
categories = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H']
values = np.random.randint(10, 100, size=8)

# æ¾åºæå¤§å¼åæå°å¼çç´¢å¼
max_idx = np.argmax(values)
min_idx = np.argmin(values)

# åå»ºå¾è¡¨
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))

# å·¦å¾ï¼æ²¡æåæ³¨æå å·¥
bars1 = ax1.bar(categories, values, color='lightblue', edgecolor='black')

# å³å¾ï¼æåæ³¨æå å·¥ï¼çªåºæå¤§æå°å¼ï¼
colors = ['lightblue'] * len(values)
colors[max_idx] = '#FF6B6B'  # çº¢è²çªåºæå¤§å¼
colors[min_idx] = '#4ECDC4'  # éè²çªåºæå°å¼

bars2 = ax2.bar(categories, values, color=colors, edgecolor='black')

# å¨æå¤§å¼åæå°å¼ä¸æ·»å æ ç­¾
ax2.text(max_idx, values[max_idx] + 2, f'æå¤§: {values[max_idx]}',
         ha='center', fontweight='bold', color='#FF6B6B')
ax2.text(min_idx, values[min_idx] + 2, f'æå°: {values[min_idx]}',
         ha='center', fontweight='bold', color='#4ECDC4')

plt.tight_layout()
plt.show()
</code></pre>

<p><img src="https://img2024.cnblogs.com/blog/83005/202601/83005-20260104230912188-646033135.png" alt="" loading="lazy"></p>
<p>å·¦å¾ä¸­ï¼æææ±å­é½æ¯ç¸åçèè²ï¼è¯»èéè¦éä¸ªæ¯è¾æè½æ¾åºæå¤§å¼åæå°å¼ã</p>
<p>å³å¾ä¸­ï¼æå¤§å¼ç¨éç®ççº¢è²æ åºï¼æå°å¼ç¨éè²æ åºï¼è¯»èä¸ç¼å°±è½çå°å³é®æ°æ®ç¹ã</p>
<p><strong>åæ³¨æå å·¥çå¥½å¤</strong>ï¼å°±åå¨äººç¾¤ä¸­ä¸ºéè¦äººç©æ´ä¸ç¹å«çå¸½å­ï¼è¯»èæ éè´¹åå¯»æ¾å°±è½ç«å³è¯å«å³é®æ°æ®ç¹ã</p>
<h2 id="22-çªåºå¼å¸¸å¼">2.2. çªåºå¼å¸¸å¼</h2>
<pre><code class="language-python"># ç¤ºä¾2ï¼çªåºå¼å¸¸å¼
# åå»ºåå«å¼å¸¸å¼çæ°æ®
np.random.seed(42)
data_normal = np.random.normal(50, 10, 100)
data_outliers = np.array([5, 125, 130])  # å¼å¸¸å¼
all_data = np.concatenate([data_normal, data_outliers])

# è¯å«å¼å¸¸å¼ï¼ç®åæ¹æ³ï¼è¶åºå¹³åå¼Â±2åæ åå·®ï¼
mean_val = np.mean(all_data)
std_val = np.std(all_data)
outlier_indices = np.where((all_data &lt; mean_val - 2*std_val) | (all_data &gt; mean_val + 2*std_val))[0]

# åå»ºå¾è¡¨
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))

# å·¦å¾ï¼æ²¡æåæ³¨æå å·¥
scatter1 = ax1.scatter(range(len(all_data)), all_data, alpha=0.7, c='gray', s=50)
ax1.axhline(y=mean_val, color='black', linestyle='--', alpha=0.5, label=f'å¹³åå¼: {mean_val:.1f}')
ax1.axhline(y=mean_val + 2*std_val, color='red', linestyle=':', alpha=0.5, label='Â±2æ åå·®')
ax1.axhline(y=mean_val - 2*std_val, color='red', linestyle=':', alpha=0.5)

# å³å¾ï¼æåæ³¨æå å·¥ï¼çªåºå¼å¸¸å¼ï¼
colors = ['gray'] * len(all_data)
sizes = [50] * len(all_data)

# çªåºå¼å¸¸å¼
for idx in outlier_indices:
    colors[idx] = '#FF6B6B'  # çº¢è²
    sizes[idx] = 150  # æ´å¤§

scatter2 = ax2.scatter(range(len(all_data)), all_data, alpha=0.7, c=colors, s=sizes)
ax2.axhline(y=mean_val, color='black', linestyle='--', alpha=0.5, label=f'å¹³åå¼: {mean_val:.1f}')
ax2.axhline(y=mean_val + 2*std_val, color='red', linestyle=':', alpha=0.5, label='Â±2æ åå·®')
ax2.axhline(y=mean_val - 2*std_val, color='red', linestyle=':', alpha=0.5)

plt.tight_layout()
plt.show()
</code></pre>

<p><img src="https://img2024.cnblogs.com/blog/83005/202601/83005-20260104230912194-1976550473.png" alt="" loading="lazy"></p>
<p>å·¦å¾ä¸­ï¼å¼å¸¸å¼æ··å¨æ®éæ°æ®ç¹ä¸­ï¼é¾ä»¥ç«å³è¯å«ã</p>
<p>å³å¾ä¸­ï¼å¼å¸¸å¼ç¨æ´å¤§ççº¢è²ç¹çªåºæ¾ç¤ºï¼å³ä½¿æ°æ®éå¾å¤§ï¼è¯»èä¹è½ç«å³æ³¨æå°è¿äºç¹æ®ç¹ã</p>
<p><strong>åæ³¨æå å·¥çå¥½å¤</strong>ï¼å°±åå¨å¹³éæ¹é¢ä¸æ è®°åºæ¶æ¼ªçèµ·æºï¼å¼å¸¸å¼ä¸åéèå¨æ°æ®æµ·æ´ä¸­ï¼èæ¯æä¸ºåæçéç¹ã</p>
<h2 id="23-çªåºè¶å¿ååç¹">2.3. çªåºè¶å¿ååç¹</h2>
<pre><code class="language-python"># ç¤ºä¾3ï¼çªåºè¶å¿ååç¹
# åå»ºåå«è¶å¿ååçæ¶é´åºåæ°æ®
np.random.seed(42)
time_points = np.arange(0, 100)
trend_change_point = 45

# åæ®µåå»ºè¶å¿æ°æ®
trend1 = 30 + 0.5 * np.arange(0, trend_change_point) + np.random.normal(0, 2, trend_change_point)
trend2 = trend1[-1] - 0.8 * np.arange(0, 100 - trend_change_point) + np.random.normal(0, 2, 100 - trend_change_point)
data = np.concatenate([trend1, trend2])

# åå»ºå¾è¡¨
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))

# å·¦å¾ï¼æ²¡æåæ³¨æå å·¥
line1 = ax1.plot(time_points, data, color='gray', alpha=0.8, linewidth=2)

# å³å¾ï¼æåæ³¨æå å·¥ï¼çªåºè¶å¿ååç¹ï¼
line2 = ax2.plot(time_points, data, color='gray', alpha=0.6, linewidth=2)

# çªåºè¶å¿åååºå
ax2.axvspan(trend_change_point-5, trend_change_point+5, alpha=0.3, color='#FF6B6B', label='è¶å¿åååºå')
ax2.scatter(trend_change_point, data[trend_change_point], color='#FF6B6B', s=200, zorder=5, label='ååç¹')
ax2.plot(time_points[:trend_change_point+1], data[:trend_change_point+1], color='#4ECDC4', linewidth=3, alpha=0.8, label='ä¸åè¶å¿')
ax2.plot(time_points[trend_change_point:], data[trend_change_point:], color='#45B7D1', linewidth=3, alpha=0.8, label='ä¸éè¶å¿')

plt.tight_layout()
plt.show()
</code></pre>

<p><img src="https://img2024.cnblogs.com/blog/83005/202601/83005-20260104230912195-715553153.png" alt="" loading="lazy"></p>
<p>å·¦å¾å±ç¤ºäºä¸ä¸ªå®æ´çè¶å¿çº¿ï¼ä½ååç¹ä¸ææ¾ã</p>
<p>å³å¾ä½¿ç¨ä¸åé¢è²åºåè¶å¿æ®µï¼å¹¶ç¨é´å½±åºååçªåºç¹æ è®°åååºåï¼ä½¿è¶å¿è½¬æä¸ç®äºç¶ã</p>
<p><strong>åæ³¨æå å·¥çå¥½å¤</strong>ï¼å°±åå¨éè·¯å°å¾ä¸æ è®°åºè½¬å¼¯å¤ï¼è¯»èè½ç«å³çå°è¶å¿ååçå³é®æ¶å»ã</p>
<h2 id="24-çªåºç¹å®ç±»å«">2.4. çªåºç¹å®ç±»å«</h2>
<pre><code class="language-python"># ç¤ºä¾4ï¼çªåºç¹å®ç±»å«
# åå»ºé¥¼å¾æ°æ®
categories = ["çµå­äº§å", "æè£", "é£å", "å®¶å±", "ä¹¦ç±", "å¶ä»"]
values = [25, 18, 22, 15, 10, 10]
highlight_category = "é£å"  # è¦çªåºçç±»å«
highlight_idx = categories.index(highlight_category)

# åå»ºå¾è¡¨
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))

# å·¦å¾ï¼æ²¡æåæ³¨æå å·¥
colors1 = ["#FF9AA2", "#FFB7B2", "#FFDAC1", "#E2F0CB", "#B5EAD7", "#C7CEEA"]
wedges1, texts1, autotexts1 = ax1.pie(
    values, labels=categories, autopct="%1.1f%%", colors=colors1, startangle=90
)

# å³å¾ï¼æåæ³¨æå å·¥ï¼çªåºç¹å®ç±»å«ï¼
# å°çªåºç±»å«çé¢è²æ¹ä¸ºéç®çé¢è²ï¼å¶ä»ç±»å«ç¨ç°åº¦
colors2 = ["lightgray"] * len(categories)
colors2[highlight_idx] = "#FF6B6B"  # çªåºç±»å«ç¨çº¢è²

# çªåºæ¾ç¤ºï¼å°ç¹å®ç±»å«"æåº"
explode = [0] * len(categories)
explode[highlight_idx] = 0.1

wedges2, texts2, autotexts2 = ax2.pie(
    values,
    labels=categories,
    autopct="%1.1f%%",
    colors=colors2,
    explode=explode,
    startangle=90,
)

plt.tight_layout()
plt.show()
</code></pre>

<p><img src="https://img2024.cnblogs.com/blog/83005/202601/83005-20260104230912185-501416555.png" alt="" loading="lazy"></p>
<p>å·¦å¾ä¸­ï¼ææç±»å«è§è§æéç¸åï¼è¯»èéè¦éè¯»æ ç­¾æç¾åæ¯æè½æ¾å°ç¹å®ç±»å«ã</p>
<p>å³å¾ä¸­ï¼ç®æ ç±»å«è¢«"æåº"å¹¶ç¨éç®ççº¢è²æ¾ç¤ºï¼å¶ä»ç±»å«åç¨ç°è²æ·¡åï¼è¯»èä¸ç¼å°±è½çå°éç¹ã</p>
<p><strong>åæ³¨æå å·¥çå¥½å¤</strong>ï¼å°±åå¨åå±å¢ä¸­ä¸ºç¬å±èæä¸èåç¯ï¼ç¹å®ç±»å«ç«å³æä¸ºè§è§ç¦ç¹ã</p>
<p>åæ ·ï¼å¨ç»å¶<strong>å¤æ¡æçº¿å¾</strong>ï¼ä¹å°±æ¯ä¿ç§°çâé¢æ¡å¾âï¼æ¶ï¼å¦ææ¯æ¡çº¿é½ç¨é«é¥±ååº¦çé¢è²ï¼ç»é¢ä¼éå¸¸æ··ä¹±ï¼è¯»èä¸ç¥éè¯¥çåªä¸æ¡ã</p>
<p>ä¹å¯ä»¥ç¨ä¸é¢é¥¼å¾ç±»ä¼¼çæè·¯ï¼éä½ééç¹æ°æ®ç<strong>ä¸éæåº¦</strong>ï¼<code>Alpha</code>ï¼å<strong>çº¿å®½</strong>ï¼<code>Linewidth</code>ï¼ï¼åªä¿çéç¹æ°æ®çé²ææ ·å¼ã</p>
<p>è¿å°±åèå°ä¸çèåç¯ï¼ç¯åæå¨åªéï¼è§ä¼å°±çåªéã</p>
<pre><code class="language-python"># æ¨¡ææ¶é´åºåæ°æ®
x = np.linspace(0, 10, 100)
# çæ5æ¡å¹²æ°çº¿
lines = [np.sin(x + i) * (1 + i/10) for i in range(5)]
# çæ1æ¡éç¹çº¿ï¼æ¯å¦è¿æ¯æä»¬å¬å¸çäº§åï¼
main_line = np.sin(x) * 2.5 + 1

fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(12, 5))

# --- å¾1ï¼æ²¡æåæ³¨æå å·¥ ---
# å¸åçé¢æ¡å¾ï¼ææçº¿é½å¨äºå¤ºæ³¨æå
for i, line in enumerate(lines):
    ax1.plot(x, line, label=f'Competitor {i}')
ax1.plot(x, main_line, label='Our Product')

# --- å¾2ï¼æåæ³¨æå å·¥ ---
# ç­ç¥ï¼å¼±åèæ¯ï¼çªåºåæ¯
for line in lines:
    ax1.plot(x, line) # å·¦å¾é»è¾
    # å³å¾é»è¾ï¼ç°è²ãç»çº¿ãåéæ
    ax2.plot(x, line, color='lightgray', linewidth=1, alpha=0.6)

# éç¹çº¿ï¼æ·±éè²ãå ç²ãä¸éæ
ax2.plot(x, main_line, color='teal', linewidth=3, label='Our Product')

plt.tight_layout()
plt.show()
</code></pre>

<p><img src="https://img2024.cnblogs.com/blog/83005/202601/83005-20260104230912198-1217895469.png" alt="" loading="lazy"></p>
<h1 id="3-æ»ç»">3. æ»ç»</h1>
<p><strong>åæ³¨æå å·¥</strong>æ¯æ°æ®å¯è§åä¸­ç"è§è§è¯­æ³"ï¼å®éè¿é¢è®¤ç¥çè§è§ç¹å¾å¼å¯¼è¯»èçæ³¨æåã</p>
<p>å°±åçç»çå¯¼æ¸¸ä¼æåºé£æ¯ä¸­çäº®ç¹ï¼ææçæ°æ®å¯è§ååºè¯¥å¼å¯¼è¯»èç«å³çå°æ°æ®æäºä¸­<strong>æå³é®</strong>çé¨åã</p>
<p>æ°æ®å¯è§åä¸ä»ä»æ¯ææ°æ®ç»åºæ¥ï¼æ´æ¯ä¸åº<strong>æ³¨æåçç®¡çèºæ¯</strong>ã</p>
<ul>
<li><strong>ä¸è¦è®©è¯»èçç¼çå»âå·¥ä½â</strong>ï¼å¦æä»ä»¬éè¦è±å¥½å ç§éå»æ¾æå¤§å¼ï¼é£æ¯æä»¬è®¾è®¡èçå¤±èã</li>
<li><strong>å©ç¨å¯¹æ¯</strong>ï¼é¢è²ï¼äº®/æï¼ãå¤§å°ï¼å¤§/å°ï¼ãä½ç½®ï¼å/åï¼ï¼è¿äºç©çå±æ§çå¯¹æ¯è½ç¬é´è§¦åå¤§èçâç³»ç»1âï¼ç´è§ç³»ç»ï¼ã</li>
</ul>
<p>ä¸æ¬¡ä½¿ç¨ <code>Matplotlib</code> ç»å¾æ¶ï¼å¨ <code>plt.show()</code> ä¹åï¼è¯·åä¸æ¥é®èªå·±ä¸ä¸ªé®é¢ï¼â<strong>æè¿å¼ å¾éï¼ææ³è®©è¯»èç¬¬ä¸ç¼çå°çæ¯ä»ä¹ï¼</strong>â</p>
<p>ä¸æ¦ç¡®å®äºç­æ¡ï¼å°±è¯·å¤§èå°ä½¿ç¨ä¸è¿°æå·§ï¼æå®âæ¨âå°è¯»èç¼åå§ï¼</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-04 23:11">2026-01-04 23:10</span>&nbsp;
<a href="https://www.cnblogs.com/wang_yb">wang_yb</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19440010);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19440010', targetLink: 'https://www.cnblogs.com/wang_yb/p/19440010', title: 'åæ³¨æå å·¥ï¼è®©ä½ çå¾è¡¨æä½è¯»èçç¼ç' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ å¦ä½ç¨ AI + OpenSpec é©±å¨å¢éè¿­ä»£å¼å ]]></title>
    <link>https://www.cnblogs.com/zh94/p/19439980</link>
    <guid>3f473d9ac64631d967faddf73eb10d02</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/zh94/p/19439980" title="åå¸äº 2026-01-04 22:49">
    <span role="heading" aria-level="2">å¦ä½ç¨ AI + OpenSpec é©±å¨å¢éè¿­ä»£å¼å</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>ä»æ··ä¹±å°æåºï¼ä»å£å£ç¸ä¼ å°ç¥è¯æ²æ·ï¼æä»¬ç¨ä¸æ¬¡å®è·µæ¢ç´¢äº AI è¾å©å¢éå¼åçå®æ´æ¶æ</p>
<h2 id="ä¸ä¸ªçå®ççç¹">ä¸ä¸ªçå®ççç¹</h2>
<p>ä½ æ¯å¦éå°è¿è¿æ ·çåºæ¯ï¼</p>
<ol>
<li>åä¸ªæ­£åè¡¨è¾¾å¼ï¼AI ç§ææã</li>
<li>åä¸ªç¬ç«èæ¬ï¼AI çé¦ã</li>
<li>åä¸ªç«é·ç½é¡µï¼AI çç Xï¼</li>
</ol>
<p>ä½æ¯ä¸æ¦å° AI æè¿ä¸ä¸ªåºå¤§çå¾®æå¡é¡¹ç®éï¼å®ä¼¼ä¹ç«å»éæºä¸ºäºâæ°æå°ç½âï¼</p>
<p>ç±äº AI æ æ³çè§£ä¸å¹´ååä¸çé£æ®µâå¥è©ä»£ç âç©¶ç«ä¸ºä½ï¼å¯¼è´æ¯æ¬¡å¯¹è¯é½åâå¼ç²çâï¼Review AI çæä»£ç çæ¶é´ï¼æ¯èªå·±éåä¸éè¿è¦é¿ã</p>
<p>è¿äºé®é¢çæ¬è´¨å¶å®æ¯ï¼<strong>ç¼ºä¹ä¸ä¸ªç»æåçãAI å¯çè§£çç¥è¯ç®¡çä½ç³»</strong>ã</p>
<p>æè¿ï¼æä»¬å¨ä¸ä¸ªå¤æçå¾®æå¡é¡¹ç®ä¸­ï¼æ¢ç´¢å¹¶å®è·µäºä¸å¥ <strong>âäººæºååè¿­ä»£å¼åâçå®æ´æ¶æ</strong>ãæ´ä¸ªè¿ç¨æ²¡æé¢å¤ç¼åä¸è¡å·¥å·ä»£ç ï¼ä»éè¿å¯¹è¯åç°æå·¥å·é¾ï¼å°±è®© AI ä»âé¡¹ç®å°ç½âæé¿ä¸ºâçæä¸å¡çå¼åä¼ä¼´âã</p>
<p>æ¬æå°å®æ´è¿åè¿ä¸è¿ç¨ï¼å¹¶æ»ç»åºå¯å¤å¶çæ¹æ³è®ºã</p>
<h2 id="ç¬¬ä¸æ­¥å»ºç«-ai-å¯çè§£çé¡¹ç®å¤§è">ç¬¬ä¸æ­¥ï¼å»ºç« AI å¯çè§£çâé¡¹ç®å¤§èâ</h2>
<p>å¤§å¤æ°å¢éçææ¡£æ¯åç»äººççï¼èé AIï¼</p>
<ul>
<li>â é£ä¹¦/Confluence/Wiki éçè®¾è®¡ææ¡£å¤ªå¤ï¼å¤ªæã</li>
<li>â æ£è½å¨åå¤ç README â AI æä¸ä½éç¹ã</li>
<li>â èµæ·±åå·¥èä¸­çéæ§ç¥è¯ â AI æ°¸è¿å­¦ä¸ä¼ã</li>
</ul>
<p>æä»¬çè§£æ³æ¯å¼å¥ <strong>OpenSpec</strong> è§èï¼å¹¶åºäºå®æå»ºä¸æ´å¥âç¥è¯è¿­ä»£ä½ç³»âã</p>
<p>OpenSpec æ ¸å¿çå¿µæå¶ç®åï¼è®© AI æç¡®ç¥éâç¥è¯å¨åªãå¦ä½ç¨ãä»¥åä¸ºä»ä¹è¿æ ·åâã</p>
<h3 id="11-æ­å»ºç¥è¯éª¨æ¶">1.1 æ­å»ºâç¥è¯éª¨æ¶â</h3>
<p>æ è®ºæ¯æ°é¡¹ç®è¿æ¯åå²é¡¹ç®ï¼ç¬¬ä¸æ­¥é½æ¯éè¿å½ä»¤è¡åå§åä¸ä¸ªæ åçç¥è¯ç®å½ç»æï¼</p>
<pre><code class="language-bash">cd /path/to/your-project
openspec init
</code></pre>
<p>çæçç®å½ç»æï¼ä¾¿æ¯é¡¹ç®çâç¥è¯éª¨æ¶âï¼</p>
<pre><code>openspec/
 âââ AGENTS.md       # ãå¤§èæä»¤ãAI å·¥ä½æåï¼å¼åè§èãæµè¯ç­ç¥ãéè¯¯ç è®¾è®¡ç­ï¼
 âââ project.md      # ãé¿æè®°å¿ãé¡¹ç®ä¸ä¸æï¼ç®æ ãæ ¸å¿æ¯è¯­ãææ¡£ç´¢å¼ï¼
 âââ specs/          # ãæè½æ ãå·²å®ç°è½åçè§èï¼åäºä»ä¹ï¼
 âââ changes/        # ãç­æè®°å¿ãå¾å¤ççåæ´ææ¡ï¼è¦åä»ä¹ï¼
 âââ docs/           # ãç¥è¯åºãè¯¦ç»ææ¡£ï¼ä¸ºä»ä¹è¿æ ·åï¼
</code></pre>
<p>æ­¤ä¸¾çæ ¸å¿å¨äºä¸º AI æä¾ä¸ä¸ªæç¡®çç»æåç´¢å¼ï¼èéä¸è¡èå°å¡å¥ææææ¡£ã</p>
<p>å¶ä¸­ <code>docs</code> å¹¶éOpenSpecè§èï¼èæ¯èªè¡åå»ºçç®å½ï¼åç»­ç¨ä½è¯¦ç»ç´¢å¼æ¶ä½¿ç¨ï¼éè¦æå¨åå»ºã</p>
<h3 id="12-è®©-ai-è®¤è¯ä½ çé¡¹ç®">1.2 è®© AI âè®¤è¯âä½ çé¡¹ç®</h3>
<p>å¯¹äºå·²æé¡¹ç®ï¼AI èµ·åé¢å¯¹ä¸çç©ºç½ãæä»¬éç¨ <strong>âç´¢å¼å± + æç»å±â</strong> çåå±ç»ææ¥å¡«åç¥è¯ã</p>
<p><strong>ç´¢å¼å±ï¼<code>AGENTS.md</code> &amp; <code>project.md</code>ï¼</strong></p>
<p>è¿éä¸åé¿ç¯å¤§è®ºï¼åªæä¾âå°å¾âã</p>
<ul>
<li><code>AGENTS.md</code>ï¼å®ä¹ AI çæ ¸å¿å¼åè§èï¼å¦å½åãéè¯¯ç ãæµè¯ç­ç¥ï¼ã</li>
<li><code>project.md</code>ï¼éè¿°ä¸å¡å±æ§ç¥è¯ï¼å¦é¡¹ç®ç®æ ãæ ¸å¿æ¯è¯­ãéæ±æ¦è¦ï¼ï¼å¹¶ææåé¡¹è¯¦ç»ææ¡£å¨ <code>docs/</code> ä¸­çä½ç½®ç´¢å¼ã</li>
</ul>
<p><strong>æç»å±ï¼<code>openspec/docs/</code>ï¼</strong>ï¼è¿éå­æ¾çæ­£çâå¹²è´§âï¼è¯¦ç»çæ¶æè®¾è®¡ãå¤æçéæ±ææ¡£ãä¸å¡é»è¾è¯´æã</p>
<p>å·¥ä½æµå½¢æé­ç¯ï¼å½ AI æ¥å°ä»»å¡ â åè¯» <code>AGENTS.md</code>ï¼è·åè§èï¼â åè¯» <code>project.md</code>ï¼è·åä¸å¡èæ¯ï¼â æ ¹æ®ç´¢å¼å®ä½å° <code>docs/</code> ä¸çå·ä½ææ¡£ â æ·±å»çè§£ä¸ä¸æåå¼å§å·¥ä½ã</p>
<p>ææ£çæ¯ï¼ä½ æ éæå¨ç¼åè¿äºç´¢å¼ãåªéåèµ·ä¸ä¸ª OpenSpec ææ¡ï¼éè¿å¯¹è¯å¼å¯¼ AI èªå·±å»æ¢³çé¡¹ç®æ¶æåä¸å¡ï¼å®ä¾¿è½èªå¨çæåå§ç <code>project.md</code> åå®¹ã</p>
<blockquote>
<p><strong>ç¥è¯è¿­ä»£æç¤º</strong>ï¼åç»­å¨ docs/ ä¸ç»´æ¤æ°ç¥è¯æ¶ï¼éå¼å¯¼ AI åºäºæ´æ°åçç¥è¯åºï¼éæ°æ»ç»çææ°ç project.mdãä¸ºæ­¤ï¼æä»¬å¯ä»¥å®ä¹ä¸ä¸ªãææ¡£ç®¡çæåãä½ä¸ºååï¼ç¡®ä¿ AI æ¯æ¬¡è¿­ä»£æ¶é½è½éµå¾ªï¼ä»èä¿éä¸å¡ç¥è¯çæç»­æææ§åä¸è´æ§ã</p>
</blockquote>
<h2 id="ç¬¬äºæ­¥åä½æºå¶åç®¡çä»£ç ä¸æ ·ç®¡çç¥è¯">ç¬¬äºæ­¥ï¼åä½æºå¶ââåç®¡çä»£ç ä¸æ ·ç®¡çâç¥è¯â</h2>
<p>å»ºç«äºåå§ç¥è¯åºï¼è¿éè®©ç¥è¯éçé¡¹ç®è¿­ä»£èæ´æ°ãæä»¬å¼å¥äºä¸å¥ <strong>Change-Drivenï¼åæ´é©±å¨ï¼</strong> çåä½æµç¨ï¼å¹¶å°å¶ä½ä¸ºå¢éæ ¸å¿ååä¸¥æ ¼æ§è¡ã</p>
<p>æææ°çéæ±æåæ´ï¼é½å¿é¡»ä¸¥æ ¼éè¿ OpenSpec åèµ·ææ¡ï¼</p>
<ol>
<li><strong>éæ±åæ´ â åèµ· OpenSpec ææ¡</strong>
<ul>
<li>å¼åæ°éæ±æ¶ï¼å¿é¡»éè¿ OpenSpec åå»ºææ¡ï¼<code>changes/proposal-xxx.md</code>ï¼ã</li>
<li>äººå·¥å®¡æ¥éç¹ï¼æ ¸å¯¹ AI çæçææ¡ä¸­ <strong>Whyï¼èæ¯ï¼ãWhatï¼ç®æ ï¼ãImpactï¼å½±åï¼</strong> æ¯å¦æ¸æ°ä¸è´ï¼ç¡®ä¿äººä¸ AI ççè§£å¯¹é½ã</li>
</ul>
</li>
<li><strong>AI è¾å©å®ç°</strong>
<ul>
<li>AI è¯»åå·²éè¿çææ¡ï¼ç»å <code>specs/</code> ä¸­å·²æçè½åè§èï¼çææä¿®æ¹ä»£ç åæµè¯ç¨ä¾ã</li>
<li>äººå·¥è¿è¡ Code Reviewã</li>
</ul>
</li>
<li><strong>ç¥è¯æ²æ·ï¼å½æ¡£ï¼</strong>
<ul>
<li>è¿è¡ <code>openspec archive</code> å½ä»¤ã</li>
<li>AI å°èªå¨ææ¬æ¬¡åæ´ææ¶åçæ°ç¥è¯ãæ°è§èï¼æ´æ°å° <code>specs/</code> å <code>docs/</code> ä¸­ï¼å®æç¥è¯å¥åºã</li>
</ul>
</li>
</ol>
<p>éè¿è¿ä¸ªæµç¨ï¼æ¯ä¸æ¬¡éæ±è¿­ä»£åå¶äº§ççä»£ç ï¼é½å®æ´å°é­ç¯å¹¶æ²æ·å° OpenSpec ä½ç³»éãAI å¨å¤çåç»­éæ±æ¶ï¼ä¾¿æäºå¯è¿½æº¯ååé´çâåå²ç»éªâã</p>
<h2 id="å®è·µå»ºè®®ä¸åºæ¯èé">å®è·µå»ºè®®ä¸åºæ¯èé</h2>
<p>å¨å®éæä½ä¸­ï¼ä½ è¿ä¼éå°ä¸äºå·ä½é®é¢ï¼ä¾å¦ï¼</p>
<p><strong>Qï¼å¾®æå¡é¡¹ç®ä¸å­æå¡ä¼å¤ï¼åºè¯¥æ¯ä¸ªæå¡åå§åä¸å¥ OpenSpecï¼è¿æ¯æ´ä¸ªé¡¹ç®å±ç¨ä¸å¥ï¼</strong></p>
<p>æä»¬çç»éªåæ¯ï¼<strong>åºäºç¥è¯ç¬ç«æ§è¿è¡å¤æ­</strong>ã</p>
<ul>
<li>å¦ææä¸ªæ¨¡åï¼å¦ç¨æ·ä¸­å¿ï¼çä¸å¡ç¥è¯ä¸å¶ä»æ¨¡åéååº¦å¾ä½ï¼ä¾å¦&lt;30%ï¼ï¼ç¬ç«åå§åä¸ä¸ª OpenSpec ç®å½æ¯æ´æ¸æ°çéæ©ã</li>
<li>å¦æå¤ä¸ªæå¡å±äº«å¤§éå±æ§ä¸å¡ç¥è¯ï¼éååº¦&gt;70%ï¼ï¼å±ç¨ä¸å¥OpenSpec æ´è½ä¿è¯ç¥è¯çä¸è´æ§å AI ççè§£æçã</li>
</ul>
<p>ä¸åçä¸å¡æ¶æéè¦çµæ´»éç¨ä¸åçç­ç¥ã</p>
<h2 id="èµ°åäºº--aiçå¢éåä½">èµ°åâäºº + AIâçå¢éåä½</h2>
<p>å½è¿å¥ä»¥ç¥è¯ä¸ºæ ¸å¿çè¿­ä»£ä½ç³»ç¨³åºè¿è¡åï¼ä½ ä¼åç°ï¼</p>
<ul>
<li>éæ§ç¥è¯è¢«å½»åºæ¾æ§åã</li>
<li>æ°æåï¼åæ¬ AIï¼ å­¦ä¹ ææ¬å¤§å¹éä½ã</li>
<li>å¨åç»­ç¼åæ¥å£ææ¡£ãæ¶æè¿­ä»£æä»£ç éææ¶ï¼AI çæè½å°è¢«æåæ¾å¤§ã</li>
</ul>
<p>æªæ¥çé«æå¢éåä½ï¼æ¯ <strong>âäºº + AIâ</strong> çæ·±åº¦èåãè®© AI æä¸ºå¢éå¿ å®çâç¥è¯ä¼ä¼´âèä¸ä»ä»æ¯ä¸´æ¶çâä»£ç å©æâï¼è¿ï¼ææ¯ AI æ¶ä»£å¢éå¼åçæ­£ç¡®æå¼æ¹å¼ã</p>
<hr>
<p><strong>æ¬¢è¿æ¥å¸¸äº¤æµ</strong></p>
<p>AI é©±å¨å¢éå¼åæ¯è¿ä¸ªæ¶ä»£çæ°å½é¢ï¼æ¬¢è¿å¤§å®¶å å¾®ä¿¡äºç¸äº¤æµå¿å¾ã</p>
<p>ð æ³è¦è¿ç¾¤çæåï¼æ«ç æ¶å¤æ³¨ âAIå®éªç¾¤âï¼çå°æ¶æ¯åä¼ç¬¬ä¸æ¶é´æä½ è¿ç¾¤ã</p>
<p>ç¾¤å®ä½ï¼AIå·¥å·ææ/å®æç»éªäºå©<br>
ç¾¤è§åï¼ä¸æ°´ç¾¤ãä¸å¹¿åãå¹²è´§ä¼å</p>
<p>æ¬¢è¿è®¿é®è¯¥é¾æ¥è·åç¾¤ä¿¡æ¯ï¼<a href="https://zhaozhihao.com/archives/KRMxDLo4" target="_blank" rel="noopener nofollow">https://zhaozhihao.com/archives/KRMxDLo4</a></p>
<hr>
<p><strong>å¥½æç« å¼å¾è¢«æ´å¤äººçè§ï¼æ¢ç¶çå°è¿éäºï¼éæç¹ä¸ªèµðåå³æ³¨ï¼å¹¶è½¬åç»æ´å¤çæåå§ï¼æè°¢ã</strong></p>
<blockquote>
<p>ä½èï¼æ°å­çå½è´¾åæ¯ãå¾®ä¿¡ï¼x_h886688</p>
</blockquote>
<p>å¬ä¼å·åæå°åï¼<a href="https://mp.weixin.qq.com/s/CJPCsYoQOo5Ib1Q8f0IZBA" target="_blank" rel="noopener nofollow">å¦ä½ç¨ AI + OpenSpec é©±å¨å¢éè¿­ä»£å¼å</a><br>
ä¸ªäººç½ç«åæå°åï¼<a href="https://zhaozhihao.com/archives/rGL0TwgK" target="_blank" rel="noopener nofollow">å¦ä½ç¨ AI + OpenSpec é©±å¨å¢éè¿­ä»£å¼å</a></p>

</div>
<div id="MySignature" role="contentinfo">
    <br>
<fieldset style="padding: 10px; margin: 10px; background-color: #fff; width: 850px; border: 1px solid black; font-size: blod">
<p><span style="color: black">çæå£°æ</span></p>
<hr style="color: black">
<p><span style="color: black">ä½èï¼éå¬é</span></p>
<p><span style="color: black">åºå¤ï¼</span><a style="color: black" href="https://www.cnblogs.com/zh94/" target="_blank">éå¬éçææ¯åå®¢--https://www.cnblogs.com/zh94/</a></p>
<p><span style="color: black">æ¨çæ¯ææ¯å¯¹åä¸»æå¤§çé¼å±ï¼æè°¢æ¨çè®¤çéè¯»ã</span></p>
<p><span style="color: black">æ¬æçæå½ä½èææï¼æ¬¢è¿è½¬è½½ï¼ä½æªç»ä½èåæå¿é¡»ä¿çæ­¤æ®µå£°æï¼ä¸å¨æç« é¡µé¢ææ¾ä½ç½®ç»åºåæè¿æ¥ï¼å¦åä¿çä»»ä½è¿½ç©¶æ³å¾è´£ä»»çæå©ã</span></p>
</fieldset>

<div style="padding: 10px; margin: 10px; background-color: #fff; width: 850px; border: 0px solid black; font-size: blod">
     <img src="https://images.cnblogs.com/cnblogs_com/zh94/1586631/o_211225012748_weixin_saoma.png">&nbsp;&nbsp;&nbsp;&nbsp;<img src="https://images.cnblogs.com/cnblogs_com/zh94/1586631/o_211225012748_weixin_saoma.png">
</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-04 22:49">2026-01-04 22:49</span>&nbsp;
<a href="https://www.cnblogs.com/zh94">éå¬é</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19439980);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19439980', targetLink: 'https://www.cnblogs.com/zh94/p/19439980', title: 'å¦ä½ç¨ AI + OpenSpec é©±å¨å¢éè¿­ä»£å¼å' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Codeforces Global Round 31 (Div. 1 + Div. 2) (#2180) å¨è§£ ]]></title>
    <link>https://www.cnblogs.com/dccy/p/19439949</link>
    <guid>edbec010ddba0cc49fe69b99119557f6</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/dccy/p/19439949" title="åå¸äº 2026-01-04 22:32">
    <span role="heading" aria-level="2">Codeforces Global Round 31 (Div. 1 + Div. 2) (#2180) å¨è§£</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="codeforces-global-round-31-div-1--div-2-2180-å¨è§£"><a href="https://codeforces.com/contest/2180" target="_blank" rel="noopener nofollow">Codeforces Global Round 31 (Div. 1 + Div. 2) (#2180) å¨è§£</a></h1>
<p>ä»å¤©æ©ä¸ VP è¿åºæ¯èµï¼è¿äº ABCEã</p>
<h2 id="a-carnival-wheel">A. Carnival Wheel</h2>
<p>ç±äºæ°æ®èå´æ¯ <span class="math inline">\(5000\)</span>ï¼æä»¬æ´åæ¨¡æå³å¯ã</p>
<p>å¼ä¸ä¸ªå¼åå¤§å°çæ è®°æ°ç»ï¼å¦ææ¾å°äºç¯å°±ç´æ¥éåºï¼è®°å½éä¸­æå¤§å¼å³å¯ã</p>
<p><a href="https://codeforces.com/contest/2180/submission/356326001" target="_blank" rel="noopener nofollow">Submission #356326001 - Codeforces</a>ã</p>
<h2 id="b-ashmal">B. Ashmal</h2>
<p>å®¹æåç°å¦æå½åå¾å°äºå­ç¬¦ä¸² <span class="math inline">\(S\)</span>ï¼æä»¬ç°å¨è¦å å¥å­ç¬¦ä¸² <span class="math inline">\(A\)</span>ï¼é£ä¹æ è®º <span class="math inline">\(A\)</span> æ¥å¨åé¢è¿æ¯åé¢ï¼é½è¦æ± <span class="math inline">\(S\)</span> æå°å³å¯ã</p>
<p>äºæ¯æä»¬æé¡ºåºæå¥ <span class="math inline">\(A\)</span>ï¼å¨ä¸¤ç§æ¹æ¡ééå­å¸åºæå°çå³å¯ãç±äºæ°æ®èå´è¾å°ï¼å¯ä»¥ç¨ <code>std::string</code> å¿«éå®ç°ã</p>
<p><a href="https://codeforces.com/contest/2180/submission/356326086" target="_blank" rel="noopener nofollow">Submission #356326086 - Codeforces</a></p>
<h2 id="c-xor-factorization">C. XOR-factorization</h2>
<p>é¦å <span class="math inline">\(K\)</span> ä¸ºå¥æ°æ¶ï¼å°±å¨é¨å¡« <span class="math inline">\(n\)</span>ã</p>
<p>èè <span class="math inline">\(K\)</span> ä¸ºå¶æ°æ¶æä¹åï¼ä¸ç§å¤©ççæ³æ³å¦ä¸ï¼</p>
<ul>
<li>é¦åå¡« <span class="math inline">\(K-2\)</span> ä¸ª <span class="math inline">\(n\)</span>ï¼æ¥ä¸æ¥åªéèèä¸¤ä¸ªæ° <span class="math inline">\(x,y\)</span>ï¼æä»¬æä½èèãä»é«ä½å°ä½ä½ï¼å¦æ <span class="math inline">\(n\)</span> è¿ä¸ä½ä¸º <span class="math inline">\(1\)</span>ï¼é£ä¹å¯ä»¥è®© <span class="math inline">\(x\)</span> èµ <span class="math inline">\(1\)</span>ï¼<span class="math inline">\(y\)</span> èµ <span class="math inline">\(0\)</span>ãèå¦æ <span class="math inline">\(n\)</span> è¿ä¸ä½ä¸º <span class="math inline">\(0\)</span>ï¼ä¸ºäºä½¿åå°½å¯è½å¤§ï¼æä»¬å¸æ <span class="math inline">\(x,y\)</span> é½å¡« <span class="math inline">\(1\)</span>ï¼ä½åææ¯ä¸è¶è¿ <span class="math inline">\(n\)</span>ãäºæ¯å¦æååéå°ä¸¤ä¸ª <span class="math inline">\(1\)</span>ï¼ç¬¬ä¸æ¬¡å°±è®© <span class="math inline">\(x\)</span> å¡« <span class="math inline">\(1\)</span>ï¼<span class="math inline">\(y\)</span> å¡« <span class="math inline">\(0\)</span>ï¼èç¬¬äºæ¬¡å°±è®© <span class="math inline">\(x\)</span> å¡« <span class="math inline">\(0\)</span>ï¼<span class="math inline">\(y\)</span> å¡« <span class="math inline">\(1\)</span>ï¼è¿æ ·ä¹å <span class="math inline">\(x,y\)</span> é½å¿å°äº <span class="math inline">\(n\)</span> äºã</li>
</ul>
<p>ç¶èä¸é¢çåæ³ä¼ WAãèèä¸ºä»ä¹ï¼å ä¸ºåé¢çé£ <span class="math inline">\(K-2\)</span> ä¸ªæ°ä¹ä¸­ä¹æå¯è½åºç°å¯¹äº <span class="math inline">\(n\)</span> ä¸º <span class="math inline">\(0\)</span> çä½ï¼ä¸¤ä¸ªæ°å¡« <span class="math inline">\(1\)</span>ã</p>
<p>èèæ©å±ä¸é¢çåæ³ï¼ç»´æ¤ä¸ä¸ªè®¡æ°å¨ <span class="math inline">\(cnt\)</span>ï¼è¡¨ç¤ºå½åå <span class="math inline">\(cnt\)</span> ä¸ªæ°é½å¿å°äº <span class="math inline">\(n\)</span>ãéå°ä¸ä¸ª <span class="math inline">\(1\)</span>ï¼æä»¬å°±å°è¯è®©ç¬¬ <span class="math inline">\(cnt+1\)</span> ä¸ªæ°èµä¸º <span class="math inline">\(0\)</span>ï¼å¶ä»é½èµä¸º <span class="math inline">\(1\)</span>ãèéå° <span class="math inline">\(0\)</span> æ¶ï¼æä»¬å°±ååºå <span class="math inline">\(cnt-(cnt\bmod 2)\)</span>  ä¸ªæ°å¡« <span class="math inline">\(1\)</span>ã</p>
<p>è¿æ ·å°±éè¿äºãå¤æåº¦ <span class="math inline">\(O(K+\log V)\)</span>ã</p>
<p><a href="https://codeforces.com/contest/2180/submission/356327292" target="_blank" rel="noopener nofollow">Submission #356327292 - Codeforces</a></p>
<h2 id="d-insolvable-disks">D. Insolvable Disks</h2>
<p>èµæ¶æ²¡è¿ï¼åå æ¯ä¸æ¢åè´ªå¿ï¼ä»¥ä¸ºä¸å¯¹ã</p>
<p>èèæ¯æ¬¡è´ªå¿éæ©ä¸ä¸ªå°½éé¿çåç¼ï¼è®¾ <span class="math inline">\(d_i=a_{i+1}-a_i\)</span>ï¼å å¥ <span class="math inline">\(r_1=x\)</span>ï¼åæ <span class="math inline">\(r_2=d_1-x\)</span>ï¼<span class="math inline">\(r3=d_2-d_1+x\)</span>ï¼<span class="math inline">\(r_4=d_3-d_2+d_1-x\dots\)</span>ã</p>
<p>é£ä¹åç¼ <span class="math inline">\(i\)</span> åæ³çåè¦å°±æ¯ <span class="math inline">\(\forall 1\le j\le i,0&lt;r_i&lt;d_i\)</span>ã</p>
<p>æä»¬æä¸è¿°æ¯ä¸ªç¹ç <span class="math inline">\(r_i\)</span> å¸¦å¥å° <span class="math inline">\(0&lt;r_i&lt;d_i\)</span>ï¼åç§»é¡¹ï¼å°±å¯ä»¥å¾å°æ¯ä¸ªç¹ç <span class="math inline">\(x\)</span> çåºé´éå¶ãæ¯æ¬¡å¯¹åºé´åäº¤ï¼ç´å°åºé´ä¸ºç©ºï¼æ­¤æ¶ <span class="math inline">\(i-1\)</span> å°±æ¯æé¿åç¼ã</p>
<p>å³äºè´ªå¿æ­£ç¡®æ§è¯æï¼</p>
<blockquote>
<p>èèæ¯ä¸ªç¹å¼å§å¾å³æè¿æ©å±å°çä½ç½® <span class="math inline">\(f_i\)</span>ï¼ç±ä¸è¿°åºé´åäº¤çè¿ç¨å¯ä»¥ç¥éï¼<span class="math inline">\(f_i\)</span> æ¯åè°çï¼äºæ¯æä»¬å°±ç¸å½äºéåæå°ç <span class="math inline">\([i,f_i]\)</span> çåºé´ä½¿å¾ä¸äº¤ï¼æä»¥è´ªå¿æ¯æ­£ç¡®çã</p>
</blockquote>
<p>å¤æåº¦ <span class="math inline">\(O(n)\)</span>ã</p>
<p><a href="https://codeforces.com/contest/2180/submission/356330957" target="_blank" rel="noopener nofollow">Submission #356330957 - Codeforces</a></p>
<h2 id="e-no-effect-xor">E. No Effect XOR</h2>
<p>èµæ¶è¿äºè¿éé¢ãé¢æå°±æ¯é®æå¤å°ä¸ª <span class="math inline">\(x\)</span> æ»¡è¶³ <span class="math inline">\([l,r]\oplus x\to [l,r]\)</span>ã</p>
<p>èèæ¾å° <span class="math inline">\(l,r\)</span> æé«ä¸åçä½ <span class="math inline">\(i\)</span>ï¼åè£æå·¦åè¾¹è¿ä¸ä½ä¸º <span class="math inline">\(0\)</span> çåºé´ <span class="math inline">\([l,mid),[mid,r]\)</span>ï¼å¶ä¸­ <span class="math inline">\(mid=2^i\)</span>ã</p>
<ul>
<li>å¦æè¿ä¸ä½å¡« <span class="math inline">\(1\)</span>ï¼é¦åè¦æ± <span class="math inline">\(0\)</span> çæ°éä¸ <span class="math inline">\(1\)</span> çæ°éç¸åï¼ç¶åèèå°æ­¤æ¶å·¦åè¾¹åå³åè¾¹åå«æ¯å¼åçåç¼ååç¼ï¼å®ä»¬æ¯å¯¹ç§°çï¼å æ­¤åªè¦æ±åº <span class="math inline">\([mid,r]\to [mid,r]\)</span> çç­æ¡åå¯¹ <span class="math inline">\(2^{i}-1\)</span> ååå³å¯ï¼äºæ¯æ­¤æ¶çç­æ¡å°±æ¯ <span class="math inline">\([mid,r]\)</span> çç­æ¡ä¸ªæ°ã</li>
<li>å¦æè¿ä¸ä½å¡« <span class="math inline">\(0\)</span>ï¼é£ä¹å°±æ¯å·¦è¾¹çç­æ¡ä¸å³è¾¹çç­æ¡åäº¤ï¼å³è¾¹æ¯å¼åçåç¼ï¼èå·¦è¾¹æ¯å¼åçåç¼ï¼å®çä¸ä¸ªæ¹æ¡ä¹æ¯å¯¹åºåç¼çä¸ä¸ªæ¹æ¡ï¼äºæ¯è½¬åæäºä¸¤ä¸ªåç¼çç­æ¡åäº¤ã</li>
<li>é®é¢æ¯æ±ä¸ä¸ªåç¼çæ¹æ¡ï¼è®¾ <span class="math inline">\(f(r)\)</span> è¡¨ç¤º <span class="math inline">\([0,r]\)</span> çç­æ¡ï¼å¦æ <span class="math inline">\(r\)</span> æ¯äºçå¹ï¼é£ä¹ç­æ¡å°±æ¯ <span class="math inline">\(r\)</span>ãå¦åä¾æ§æ¾å° <span class="math inline">\(r\)</span> çæé«ä½ <span class="math inline">\(i\)</span>ï¼æé«ä½åªè½å¡« <span class="math inline">\(0\)</span>ï¼å·¦åè¾¹å¯ä»¥éä¾¿å¡«ï¼æä»¥éå½å³åè¾¹ <span class="math inline">\(f(r)\gets f(r-2^i)\)</span>ã</li>
<li>æä»¥ä¸ä¸ªåç¼çç­æ¡æ¯äºçå¹ï¼äºæ¯ä¸è¿°ä¸¤ä¸ªåç¼çç­æ¡åäº¤å¶å®å°±æ¯åæå°å¼ã</li>
</ul>
<p>é£ä¹è¿ä¸ªé®é¢å°±è§£å³äºï¼å¤æåº¦ <span class="math inline">\(O(\log V)\)</span>ã</p>
<p><a href="https://codeforces.com/contest/2180/submission/356328859" target="_blank" rel="noopener nofollow">Submission #356328859 - Codeforces</a></p>
<h2 id="f1-ã¨-f2-control-car">F1 ã¨ F2. Control Car</h2>
<h3 id="f1">F1ï¼</h3>
<p>èèæ¹æ¡æ°è½¬æ¦çï¼è¿æ ·å¯ä»¥å¨ DP æ¶æé¤æ å³ä¿¡æ¯ï¼è®¾ <span class="math inline">\(f_{i,j}\)</span> è¡¨ç¤ºåå§ <span class="math inline">\(n=i,m=j\)</span> æç»èµ°å° <span class="math inline">\((n,m)\)</span> çæ¹æ¡æ°ã</p>
<p>æä»¬è¿éè¦è®°å½ä»åªä¸ªæ¹åèµ°è¿æ¥ï¼ä¸è¿è¦è®°å½ä¸äºç¹çä¿¡æ¯ãæä»¬å¦ä¸è®¾ç¶æï¼</p>
<ul>
<li><span class="math inline">\(f_{i,j,0,0}\)</span>ï¼ä»ä¸é¢èµ°è¿æ¥ï¼ä¸å·¦ä¸è§çç¹æ¡ä½äºå³è¾¹ã</li>
<li><span class="math inline">\(f_{i,j,0,1}\)</span>ï¼ä»ä¸é¢èµ°è¿æ¥ï¼ä¸å·¦ä¸è§çç¹æ²¡ææ¡ä½å³è¾¹ã</li>
<li><span class="math inline">\(f_{i,j,1,0}\)</span>ï¼ä»å·¦è¾¹èµ°è¿æ¥ï¼ä¸å·¦ä¸è§çç¹æ¡ä½äºä¸é¢ã</li>
<li><span class="math inline">\(f_{i,j,1,1}\)</span>ï¼ä»å·¦è¾¹èµ°è¿æ¥ï¼ä¸å·¦ä¸è§çç¹æ²¡ææ¡ä½ä¸é¢ã</li>
</ul>
<p>è½¬ç§»å<a href="https://codeforces.com/blog/entry/149318" target="_blank" rel="noopener nofollow">é¢è§£</a>ã</p>
<p>è¾¹çæ¡ä»¶æ¯ <span class="math inline">\(f_{1,1,0/1,0}=7/16,f_{1,1,0/1,1}={1/16}\)</span>ã</p>
<p>æä»¬åå¯¹ <span class="math inline">\(f\)</span> æ±åç¼åå³å¯å¾å°ç­æ¡ï¼æ³¨ææä»¬æå® <span class="math inline">\((1,1)\)</span> æ¯ä»ä¸é¢èµ°è¿æ¥ï¼ä¸ <span class="math inline">\(f_{1,1,0,0}\)</span> å <span class="math inline">\(f_{1,1,0,1}\)</span> è¦ä¹ä¸å¯¹åºç³»æ°ã</p>
<p>å¤æåº¦ <span class="math inline">\(O(nm)\)</span>ã</p>
<p><a href="https://codeforces.com/contest/2180/submission/356333212" target="_blank" rel="noopener nofollow">Submission #356333212 - Codeforces</a></p>
<h3 id="f2">F2ï¼</h3>
<p>ææ¯åçè½¬ç§»åæç©éµçå½¢å¼ï¼ç©éµå¿«éå¹å³å¯ã</p>
<p>å¤æåº¦ <span class="math inline">\(O(n^3\log m)\)</span>ã</p>
<p>ä¾æ§ä½¿ç¨ F1 ä¸­çæ¹ç¨æ±åºè½¬ç§»ç³»æ°ï¼é¦åæç¬¬ä¸åçä¸ä¸ªä½ç½®èµä¸º <span class="math inline">\(1\)</span>ï¼å¶ä»èµä¸º <span class="math inline">\(0\)</span>ï¼ç¶åè½¬ç§»ç¬¬äºåï¼å³å¯å¾å°è¿ä¸ªä½ç½®å¯¹ä¸ä¸åæ¯ä¸ªä½ç½®çç³»æ°ã</p>
<p>æ³¨ææä»¬è¦åæ±åºç¬¬ä¸åçææä½ç½®ã</p>
<p>ç©éµä¸­è¿æä¸ä¸ªä½ç½®è¦è®°å½åç¼åã</p>
<p>ç©éµä¹æ³æ¶è¦ææä¸º <span class="math inline">\(0\)</span> çä½ç½®ä»èåå°å¸¸æ°ï¼å·ä½è§ä»£ç ã</p>
<p><a href="https://codeforces.com/contest/2180/submission/356343250" target="_blank" rel="noopener nofollow">Submission #356343250 - Codeforces</a></p>
<h2 id="g-balance">G. Balance</h2>
<p>é¦åç ç©¶ Balance æä¹æ±ï¼è¯å®è¦åæç®ä¾¿çå½¢å¼ãè½¬æ¬¡æ°ï¼è®¾ <span class="math inline">\(f_{i,m,k}\)</span> è¡¨ç¤º <span class="math inline">\(a_i\)</span> å¨é¿ä¸º <span class="math inline">\(m\)</span> çå­åºåä¸­ä½ä¸ºç¬¬ <span class="math inline">\(k\)</span> ä¸ªåºç°çå­åºåä¸ªæ°ãBalance å³ï¼</p>
<p></p><div class="math display">\[\sum _{i,m,k} a_i\times f_{i,m,k}\times \frac km
\]</div><p></p><p>æ¾ç¶ <span class="math inline">\(a\)</span> æ¯åæçï¼å <span class="math inline">\(f_{i,m,k}=f_{n-i+1,m,m-k+1},a_i=a_{n-i+1}\)</span>ãå</p>
<p></p><div class="math display">\[2\times Balance=\sum _{i,m,k} a_i\times f_{i,m,k}\times \frac km+\sum _{i,m,k} a_{n-i+1}\times f_{n-i+1,m,m-k+1}\times \frac {m-k+1}m =\sum _{i,m,k} a_i\times (1+\frac 1m)
\]</div><p></p><p>æä»¥æ±åºææå­åºåä¸ <span class="math inline">\(a\)</span> çæ»åä»¥åææå­åºåä¸ <span class="math inline">\(a\)</span> çå¹³åå¼çæ»åå³å¯ã</p>
<p>åèæ¯ <span class="math inline">\(2^{n-1}\sum a_i\)</span>ã</p>
<p>åèå³</p>
<p></p><div class="math display">\[\sum _{i=1}^n\sum _{k=1}^n a_i\times \frac {\binom {n-1}{k-1}} {k}
\]</div><p></p><p>åç®åé¢çå¼å­</p>
<p></p><div class="math display">\[\sum _{k=1}^{n} \frac {\binom{n-1}{k-1}} k=\sum _{k=1}^n \frac {(n-1)!} {k!(n-k)!}=\frac 1n\sum _{k=1}^n\binom nk=\frac {2^n-1}n
\]</div><p></p><p>æä»¥æç» Balance ä¸ºï¼è®¾ <span class="math inline">\(S=\sum a_i\)</span>ï¼ï¼</p>
<p></p><div class="math display">\[2^{n-1}S+\frac {2^{n}-1} n\times  S
\]</div><p></p><p>æä»¬åªéå¿«éç»´æ¤ <span class="math inline">\(S\bmod(10^9+7),n\bmod (10^9+7),n\bmod (10^9+6)\)</span> å³å¯ã</p>
<p>é®é¢å¨äºå¿«éç¥éå é¤æä½æ¶å æçæ°ã</p>
<p>èèå å¥ä¸ä¸ªæ° <span class="math inline">\(x\)</span> åè¿è¡çå é¤æä½ï¼</p>
<ul>
<li>è¥åæ¥ <span class="math inline">\(len=2n+1\)</span> ä¸ºå¥æ°ï¼ååºååæ <span class="math inline">\([x,a_1,x,...,x,a_{n+1},x,...,x,a_{2n+1},x]\)</span>ï¼åç°åå é¤ <span class="math inline">\(a\)</span> çä¸­ä½æ°ï¼ç¶åå é¤ä¸¤ä¸ª <span class="math inline">\(x\)</span> ä¸å é¤ä¸¤ä¸ª <span class="math inline">\(a\)</span> çä¸­ä½æ°äº¤æ¿è¿è¡ã</li>
<li>è¥åæ¥ <span class="math inline">\(len=2n\)</span> ä¸ºå¶æ°ï¼ååºååæ <span class="math inline">\([x,a_1,x,...x,a_n,x,a_{n+1},x,...x,a_{2n},x]\)</span>ï¼åç°åå é¤ <span class="math inline">\(x\)</span>ï¼ç¶åå é¤ä¸¤ä¸ª <span class="math inline">\(a\)</span> ä¸­çä¸­ä½æ°ä¸å é¤ä¸¤ä¸ª <span class="math inline">\(x\)</span> äº¤æ¿è¿è¡ã</li>
</ul>
<p>æä¸ä¸ªç¥å¥çæ¹æ³ãæä»¬å¯ä»¥ç»´æ¤ä¸ä¸ªåå« <span class="math inline">\(0,1,2,3\)</span> çéåãæ¯æ¬¡å å¥ <span class="math inline">\(x\)</span> æ¶ï¼è¥é¿åº¦ä¸ºå¶æ°ï¼åå¾éå°¾å å¥ <span class="math inline">\(1\)</span>ï¼å¦åå å¥ <span class="math inline">\(3\)</span>ã</p>
<p>æä»¬å é¤ä¸ä¸ªæ°æ¶ï¼ä»éå°¾å¼å§éåï¼ç´å°éåå°ä¸ä¸ª <span class="math inline">\(0\)</span> æ <span class="math inline">\(1\)</span>ï¼å®çå¼å°±æ¯æä»¬è¦å çæ°ï¼åæ¶å°éåè¿ç¨ä¸­ææéå°çæ° <span class="math inline">\(x\gets (x+1)\bmod 4\)</span>ã</p>
<p>è¿ä¸ªæ¹æ³å¤æåº¦æ¯æ¯æ¬¡åæ <span class="math inline">\(O(1)\)</span>ãå¤æåº¦ <span class="math inline">\(O(q\log V)\)</span>ï¼ç¶é¢å¨äºå¿«éå¹ã</p>
<p><a href="https://codeforces.com/contest/2180/submission/356356669" target="_blank" rel="noopener nofollow">Submission #356356669 - Codeforces</a></p>
<h2 id="h1-bug-is-feature-unconditional-version">H1. Bug Is Feature (Unconditional Version)</h2>
<p>è®¾ <span class="math inline">\(f_{i,j}\)</span> ä¸º <span class="math inline">\(c-b=i,x-c=j\)</span> ç SG å¼ï¼å¯ä»¥æè¡¨åç°ï¼æ¯è¡ä»ä¸æ  <span class="math inline">\(0\)</span> å¼å§ï¼ç¬¬ <span class="math inline">\(i\)</span> è¡æ¯ <span class="math inline">\(2i\)</span> ä¸ªæ¯å¾ªç¯çï¼</p>
<pre><code class="language-txt">0 1 
1 0 2 2 
0 0 0 1 1 1 
0 1 0 0 2 2 1 1 
0 0 0 0 0 1 1 1 1 1 
1 1 1 0 0 0 2 2 2 2 2 2 
0 0 0 0 0 0 0 1 1 1 1 1 1 1 
1 0 1 1 0 0 0 0 2 2 2 2 1 1 2 2 
0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 
1 1 1 1 1 0 0 0 0 0 2 2 2 2 2 2 2 2 2 2 
0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 
0 0 0 1 1 1 0 0 0 0 0 0 2 2 2 2 2 2 1 1 1 1 1 1 
0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 
1 1 1 1 1 1 1 0 0 0 0 0 0 0 2 2 2 2 2 2 2 2 2 2 2 2 2 2 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 
0 1 0 0 1 1 1 1 0 0 0 0 0 0 0 0 2 2 2 2 2 2 2 2 1 1 1 1 2 2 1 1 
</code></pre>
<p>åç°å¯¹äº <span class="math inline">\(i\)</span> ä¸ºå¥æ°ï¼å°±æ¯ <span class="math inline">\(01\)</span> åå ä¸åã</p>
<p>å¯¹äº <span class="math inline">\(i\)</span> ä¸ºå¶æ°ï¼å <span class="math inline">\(i/2\)</span> ä¸ªæ¯ç¬¬ <span class="math inline">\(i/2\)</span> è¡çå <span class="math inline">\(i/2\)</span> ä¸ª <span class="math inline">\(01\)</span> ååï¼ç¶åæ¯ <span class="math inline">\(i/2\)</span> ä¸ª <span class="math inline">\(0\)</span> ä¸ <span class="math inline">\(i/2\)</span> ä¸ª <span class="math inline">\(1\)</span>ï¼å <span class="math inline">\(i/2\)</span> ä¸ªæ¯ç¬¬ <span class="math inline">\(i/2\)</span> è¡çå <span class="math inline">\(i/2\)</span> ä¸ª <span class="math inline">\(12\)</span> ååã</p>
<p>ç´æ¥éå½å®ç°å³å¯ï¼æ³¨æéè¦è®°å¿åï¼èä¸éè¦ä½¿ç¨åå¸è¡¨æè½éè¿ï¼ä½¿ç¨ <code>map</code> ä¼ TLEã</p>
<p>å¤æåº¦å $\log $ã</p>
<p><a href="https://codeforces.com/contest/2180/submission/356380285" target="_blank" rel="noopener nofollow">Submission #356380285 - Codeforces</a></p>
<h2 id="h2-bug-is-feature-conditional-version">H2. Bug Is Feature (Conditional Version)</h2>
<p>ä¸å¦¨ä»¤ <span class="math inline">\(c-b\gets 1,x-c\gets\lfloor\frac {x-c}{c-b}\rfloor\)</span>ï¼å³è½¬åä¸ºå¬å·®ä¸º <span class="math inline">\(1\)</span> çé®é¢ã</p>
<p>è®¾ <span class="math inline">\(f_i\)</span> è¡¨ç¤ºå¬å·®ä¸º <span class="math inline">\(1\)</span>ï¼<span class="math inline">\(x-c=i\)</span> çç­æ¡ï¼æ <span class="math inline">\(f_0=0,f_i=\text{mex}(f_{i-1},f_{\lfloor\frac i 2\rfloor}-1)\)</span>ã</p>
<p>ç±äºåé¢å¤å¸¦ä¸ä¸ªå <span class="math inline">\(1\)</span>ï¼æ§è´¨ä¸å¥½ï¼ä¸å¦¨æ <span class="math inline">\(f_{i+2}\gets f_{i}\)</span>ï¼å³å³ç§»ä¸¤ä¸ªåä½ã</p>
<p>æ­¤æ¶å¯ä»¥æåºè¡¨ï¼ä» <span class="math inline">\(f_1\)</span> å¼å§ï¼æä»¬æå® <span class="math inline">\(f_{1}=f_2=0\)</span>ã</p>
<pre><code class="language-txt">0 0 1 2 1 0 2 0 1 0 2 1 2 0 1 2 1 0 2 1 2 0 1 0 2 0 1 2 1 0 2 0 1 0 2 1 2 0 1 0 2 0 1 
</code></pre>
<p>åç°é <span class="math inline">\(0\)</span> ä½æ¯ <span class="math inline">\(12\)</span> äº¤æ¿çï¼è¿ä¸æ­¥åç° <span class="math inline">\(f_i=0\)</span> å½ä¸ä»å½ <span class="math inline">\(i\)</span> çäºè¿å¶ä¸åç¼ä¸çä¸ªæ°ä¸ºå¥æ°ã</p>
<p>æä»¬åªéæ±åºä¸ä¸ªåç¼ç <span class="math inline">\(f_{i}=0\)</span> çä¸ªæ°å³å¯æ±åºè¿ä¸ªåç¼çå¼æåï¼å¤æåº¦å $\log $ã</p>
<p><a href="https://codeforces.com/contest/2180/submission/356387263" target="_blank" rel="noopener nofollow">Submission #356387263 - Codeforces</a></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-04 22:33">2026-01-04 22:32</span>&nbsp;
<a href="https://www.cnblogs.com/dccy">dengchengyu</a>&nbsp;
éè¯»(<span id="post_view_count">6</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19439949);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19439949', targetLink: 'https://www.cnblogs.com/dccy/p/19439949', title: 'Codeforces Global Round 31 (Div. 1 + Div. 2) (#2180) å¨è§£' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ãAzure Web AppãGithub Actioné¨ç½²Jaråå°App Serviceæ¥400éè¯¯ ]]></title>
    <link>https://www.cnblogs.com/lulight/p/19439653</link>
    <guid>986b341ddc4b1536bd4322805a099abe</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/lulight/p/19439653" title="åå¸äº 2026-01-04 20:07">
    <span role="heading" aria-level="2">ãAzure Web AppãGithub Actioné¨ç½²Jaråå°App Serviceæ¥400éè¯¯</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h1>é®é¢æè¿°</h1>
<p>éè¿github acitoné¨ç½²azure app serviceæå¡çæ¶åï¼éè§400æ¥éã</p>
<p>æ¥éä¿¡æ¯éå¸¸ç®åï¼</p>
<blockquote>
<p>Starting deployment for web app...<br>Package deployment using OneDeploy initiated.<br>Error: Failed to deploy web package to App Service.<br><span style="color: rgba(255, 0, 0, 1)"><strong>Error: Deployment Failed, Error: Failed to deploy web package using OneDeploy to App Service.</strong></span><br>Bad Request (CODE: 400)</p>
</blockquote>
<p> è¿ä¸ªé®é¢åºè¯¥å¦ä½è°æ¥å¢ï¼</p>
<p>&nbsp;</p>
<h1>é®é¢è§£ç­</h1>
<p>å¨Github Acitonä¸­ï¼ä½¿ç¨ Azure WebApp(azure/webapps-deploy@v3)æ¥é¨ç½²App Serviceçåºç¨, è¿æ¬¡é¨ç½²çæ¯ä¸ä¸ªjaråã</p>
<p>Github Action  èæ¬:</p>
<blockquote>
<p>- name: Azure WebApp<br>uses: azure/webapps-deploy@v3<br>with:<br>app-name: '&lt;app service name&gt;'<br>package: ${{ github.workspace }}/target/*.jar<br> </p>
</blockquote>
<p>æ¥çAzureææ¡£ï¼ä»ç»é¨ç½²javaåºç¨æ¶ï¼ä½¿ç¨az cliå½ä»¤ï¼github actionåmaven æä»¶é½æ¯ä½¿ç¨çKudu OneDeployæ¥å£( https://&lt;your web app&gt;.scm.chinacloudsites.cn/api/publish?type=jar )</p>
<p><img alt="image" width="666" height="235" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2127802/202601/2127802-20260104200136753-968729769.png" class="lazyload"></p>
<p>(ææ¡£é¾æ¥ï¼<a href="https://docs.azure.cn/zh-cn/app-service/configure-language-java-deploy-run?tabs=linux&amp;pivots=java-tomcat#deploying-your-app" target="_blank" rel="noopener nofollow">https://docs.azure.cn/zh-cn/app-service/configure-language-java-deploy-run?tabs=linux&amp;pivots=java-tomcat#deploying-your-app</a>)</p>
<p>&nbsp;</p>
<p>æ ¹æ®ä»¥ä¸ä¿¡æ¯ï¼å°±å°è¯ä½¿ç¨az webapp deployå½ä»¤ç´æ¥é¨ç½²jarååºç¨ï¼åç°å¤äºä¸å¥éè¯¯æç¤ºä¿¡æ¯ï¼</p>
<blockquote>
<p><span style="color: rgba(255, 0, 255, 1)">&gt; <strong>az webapp deploy --resource-group &lt;your resource group name&gt; --name &lt;your app service name&gt; --src-path myjava.jar --type jar</strong></span></p>
<p>Initiating deployment<br>Deploying from local path: myjava.jar<br>An error occurred during deployment. Status Code: 400, </p>
<p><strong><span style="color: rgba(255, 0, 0, 1)">Details: "Artifact type = 'Jar' cannot be deployed to stack = 'TOMCAT'. Site should be configured to run with stack = JAVA", </span></strong></p>
<p>Please visit https://XXXXXXXXX.scm.chinacloudsites.cn/api/deployments/latest to get more information about your deployment</p>
</blockquote>
<p>è¿å¥éè¯¯æ¶æ¯éå¸¸å³é®(Artifact type = 'Jar' cannot be deployed to stack = 'TOMCAT'. Site should be configured to run with stack = JAVA")ã</p>
<p>å¨æ¥çApp Serviceçéç½®ä¿¡æ¯åï¼Stackæç¶è®¾ç½®ä¸ºTomcatã</p>
<p><img alt="image" width="666" height="465" loading="lazy" style="border: 2px solid rgba(0, 0, 139, 1)" data-src="https://img2024.cnblogs.com/blog/2127802/202601/2127802-20260104200345561-1920215021.png" class="lazyload"></p>
<p>å ä¸ºè¿éåªæä¸¤ç§éé¡¹( Tomcat åJava SE )ãäºæ¯ï¼ä¿®æ¹ä¸ºJava SEåï¼åæ¬¡é¨ç½²jaråã</p>
<p><img alt="image" width="666" height="194" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2127802/202601/2127802-20260104200429417-812362535.png" class="lazyload"></p>
<p>æåã</p>
<p>&nbsp;</p>
<p>å½é®é¢è§£å³åï¼æ³è¿ä¸æ­¥éªè¯æ¯å¦æ¯one deployæ¥å£å¯¹jaråçå¼ºå¶éå¶ã</p>
<p>æ°å¥½kuduä¹æ¯å¼æºé¡¹ç®ï¼æä»¥ï¼è¿å¥github kudu ä»åº (æºç ï¼<a href="https://github.com/projectkudu/kudu/tree/master" target="_blank" rel="noopener nofollow">https://github.com/projectkudu/kudu/tree/master</a> )ï¼ä½¿ç¨éè¯¯æ¶æ¯å³é®å­æ´åºæç´¢âcannot be deployed to stackâï¼æç»ï¼å®ä½å° PushDeploymentController.cs ä¸­ï¼æå¦ä¸çéªè¯æ¡ä»¶ï¼</p>
<ul>
<li>å½é¨ç½²çæä»¶ä¸ºJaræ¶ï¼éè¦å¤æ­ç®æ App ServiceçStackåªè½æ¯JavaSEãå¦æä¸æ¯ï¼è¿å400çç¶æç </li>
</ul>
<p><img alt="image" width="666" height="110" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2127802/202601/2127802-20260104200518388-1579422340.png" class="lazyload"></p>
<p>&nbsp;</p>
<h2>éå½ä¸ï¼ä½¿ç¨ curl å½ä»¤ç´æ¥è°ç¨æ¥å£ä¹å¯ä»¥å¤ç°é®é¢ï¼ææåaz webapp deployå½ä»¤ç¸å</h2>
<div class="cnblogs_code">
<pre><span style="background-color: rgba(255, 255, 0, 1)">curl -<span style="color: rgba(0, 0, 0, 1)">X POST \

     </span>-<span style="color: rgba(0, 0, 0, 1)">u user:password \

     </span>-T <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">/Users/Downloads/xxxxx-0.0.1-SNAPSHOT.jar</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)"> \

     </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">https://xxxxx.scm.chinacloudsites.cn/api/publish?type=jar</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)"> \

     </span>-<span style="color: rgba(0, 0, 0, 1)">v



</span></span>* Host xxxxx.scm.chinacloudsites.cn:<span style="color: rgba(128, 0, 128, 1)">443</span><span style="color: rgba(0, 0, 0, 1)"> was resolved.

</span>*<span style="color: rgba(0, 0, 0, 1)"> IPv6: (none)

</span>* IPv4: <span style="color: rgba(128, 0, 128, 1)">159.27</span>.<span style="color: rgba(128, 0, 128, 1)">20.0</span>

*   Trying <span style="color: rgba(128, 0, 128, 1)">159.27</span>.<span style="color: rgba(128, 0, 128, 1)">20.0</span>:<span style="color: rgba(128, 0, 128, 1)">443</span><span style="color: rgba(0, 0, 0, 1)">...

</span>* Connected to xxxxx.scm.chinacloudsites.cn (<span style="color: rgba(128, 0, 128, 1)">159.27</span>.<span style="color: rgba(128, 0, 128, 1)">20.0</span>) port <span style="color: rgba(128, 0, 128, 1)">443</span>

* ALPN: curl offers h2,http/<span style="color: rgba(128, 0, 128, 1)">1.1</span>

* (<span style="color: rgba(128, 0, 128, 1)">304</span>) (OUT), TLS handshake, Client hello (<span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">):

</span>*  CAfile: /etc/ssl/<span style="color: rgba(0, 0, 0, 1)">cert.pem

</span>*<span style="color: rgba(0, 0, 0, 1)">  CApath: none

</span>* (<span style="color: rgba(128, 0, 128, 1)">304</span>) (IN), TLS handshake, Server hello (<span style="color: rgba(128, 0, 128, 1)">2</span><span style="color: rgba(0, 0, 0, 1)">):

</span>* (<span style="color: rgba(128, 0, 128, 1)">304</span>) (OUT), TLS handshake, Client hello (<span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">):

</span>* (<span style="color: rgba(128, 0, 128, 1)">304</span>) (IN), TLS handshake, Server hello (<span style="color: rgba(128, 0, 128, 1)">2</span><span style="color: rgba(0, 0, 0, 1)">):

</span>* (<span style="color: rgba(128, 0, 128, 1)">304</span>) (IN), TLS handshake, Unknown (<span style="color: rgba(128, 0, 128, 1)">8</span><span style="color: rgba(0, 0, 0, 1)">):

</span>* (<span style="color: rgba(128, 0, 128, 1)">304</span>) (IN), TLS handshake, Certificate (<span style="color: rgba(128, 0, 128, 1)">11</span><span style="color: rgba(0, 0, 0, 1)">):

</span>* (<span style="color: rgba(128, 0, 128, 1)">304</span>) (IN), TLS handshake, CERT verify (<span style="color: rgba(128, 0, 128, 1)">15</span><span style="color: rgba(0, 0, 0, 1)">):

</span>* (<span style="color: rgba(128, 0, 128, 1)">304</span>) (IN), TLS handshake, Finished (<span style="color: rgba(128, 0, 128, 1)">20</span><span style="color: rgba(0, 0, 0, 1)">):

</span>* (<span style="color: rgba(128, 0, 128, 1)">304</span>) (OUT), TLS handshake, Finished (<span style="color: rgba(128, 0, 128, 1)">20</span><span style="color: rgba(0, 0, 0, 1)">):

</span>* SSL connection <span style="color: rgba(0, 0, 255, 1)">using</span> TLSv1.<span style="color: rgba(128, 0, 128, 1)">3</span> / AEAD-AES256-GCM-SHA384 / [blank] /<span style="color: rgba(0, 0, 0, 1)"> UNDEF

</span>* ALPN: server accepted http/<span style="color: rgba(128, 0, 128, 1)">1.1</span>

*<span style="color: rgba(0, 0, 0, 1)"> Server certificate:

</span>*  subject: C=CN; ST=Shanghai; O=Shanghai Blue Cloud Technology Co., Ltd.; CN=*<span style="color: rgba(0, 0, 0, 1)">.chinacloudsites.cn

</span>*  start date: Dec <span style="color: rgba(128, 0, 128, 1)">19</span> <span style="color: rgba(128, 0, 128, 1)">00</span>:<span style="color: rgba(128, 0, 128, 1)">00</span>:<span style="color: rgba(128, 0, 128, 1)">00</span> <span style="color: rgba(128, 0, 128, 1)">2025</span><span style="color: rgba(0, 0, 0, 1)"> GMT

</span>*  expire date: Jun <span style="color: rgba(128, 0, 128, 1)">17</span> <span style="color: rgba(128, 0, 128, 1)">23</span>:<span style="color: rgba(128, 0, 128, 1)">59</span>:<span style="color: rgba(128, 0, 128, 1)">59</span> <span style="color: rgba(128, 0, 128, 1)">2026</span><span style="color: rgba(0, 0, 0, 1)"> GMT

</span>*  subjectAltName: host <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">xxxxx.scm.chinacloudsites.cn</span><span style="color: rgba(128, 0, 0, 1)">"</span> matched cert<span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">s "*.scm.chinacloudsites.cn"</span>

*  issuer: C=US; O=DigiCert Inc; CN=<span style="color: rgba(0, 0, 0, 1)">DigiCert Basic RSA CN CA G2

</span>*<span style="color: rgba(0, 0, 0, 1)">  SSL certificate verify ok.

</span>* <span style="color: rgba(0, 0, 255, 1)">using</span> HTTP/<span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">.x

</span>* Server auth <span style="color: rgba(0, 0, 255, 1)">using</span> Basic with user <span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">deploypoc</span><span style="color: rgba(128, 0, 0, 1)">'</span>

&gt; POST /api/publish?type=jar HTTP/<span style="color: rgba(128, 0, 128, 1)">1.1</span>

&gt;<span style="color: rgba(0, 0, 0, 1)"> Host: xxxxx.scm.chinacloudsites.cn

</span>&gt;<span style="color: rgba(0, 0, 0, 1)"> Authorization: Basic xxxxxxxxxxxxxxxx

</span>&gt; User-Agent: curl/<span style="color: rgba(128, 0, 128, 1)">8.7</span>.<span style="color: rgba(128, 0, 128, 1)">1</span>

&gt; Accept: *<span style="color: rgba(0, 128, 0, 1)">/*</span><span style="color: rgba(0, 128, 0, 1)">

&gt; Content-Length: 25578166

&gt; Expect: 100-continue

&gt; 

* Done waiting for 100-continue

&lt; HTTP/1.1 400 Bad Request

&lt; Content-Type: text/plain; charset=utf-8

&lt; Date: Wed, 31 Dec 2025 03:42:36 GMT

&lt; Server: Kestrel

&lt; Set-Cookie: ARRAffinity=xxxx;Path=/;HttpOnly;Secure;Domain=xxxxx.scm.chinacloudsites.cn

&lt; Set-Cookie: ARRAffinitySameSite=xxxxx;Path=/;HttpOnly;SameSite=None;Secure;Domain=xxxxx.scm.chinacloudsites.cn

&lt; Transfer-Encoding: chunked

&lt; 

* HTTP error before end of send, stop sending

* abort upload after having sent 589824 bytes

* Closing connection

<span style="background-color: rgba(255, 255, 0, 1)">Artifact type = 'Jar' cannot be deployed to stack = 'TOMCAT'. Site should be configured to run with stack = JAVA%   </span> </span></pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h1>åèèµæ</h1>
<p>App Serviceé¨ç½²Javaåºç¨ï¼<a href="https://docs.azure.cn/zh-cn/app-service/configure-language-java-deploy-run?tabs=linux&amp;pivots=java-tomcat#deploying-your-app" target="_blank" rel="noopener nofollow">https://docs.azure.cn/zh-cn/app-service/configure-language-java-deploy-run?tabs=linux&amp;pivots=java-tomcat#deploying-your-app</a></p>
<p>Kudu One Deploy Source Code ï¼ <a href="https://github.com/projectkudu/kudu/blob/master/Kudu.Services/Deployment/PushDeploymentController.cs#L304" target="_blank" rel="noopener nofollow">https://github.com/projectkudu/kudu/blob/master/Kudu.Services/Deployment/PushDeploymentController.cs#L304</a></p>
<p>&nbsp;</p>
</div>
<div id="MySignature" role="contentinfo">
    <div style="background: #1c5f55;height: 36px;width: 618px;padding: 14px 5px 0px 3px;">
  <p style="
    font-weight: bold;
    color: white;
">å½å¨å¤æçç¯å¢ä¸­é¢ä¸´é®é¢ï¼æ ¼ç©ä¹ééï¼æµèéä¹å¾æ¸ï¼å®ä»¥å¨ä¹å¾çã äºä¸­ï¼æ°æ¯å¦æ­¤!</p>
</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-04 20:07">2026-01-04 20:07</span>&nbsp;
<a href="https://www.cnblogs.com/lulight">è·¯è¾¹ä¸¤çç¯</a>&nbsp;
éè¯»(<span id="post_view_count">21</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19439653);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19439653', targetLink: 'https://www.cnblogs.com/lulight/p/19439653', title: 'ãAzure Web AppãGithub Actioné¨ç½²Jaråå°App Serviceæ¥400éè¯¯' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Serilog æ¥å¿åºç®åå®è·µï¼åï¼æ¶æ¯éå Sinksï¼.net8ï¼ ]]></title>
    <link>https://www.cnblogs.com/hnzhengfy/p/19191039/Serilog_MQSinks</link>
    <guid>054f35cdf1b4fb70b9ac9861d8282e0f</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/hnzhengfy/p/19191039/Serilog_MQSinks" title="åå¸äº 2026-01-04 19:54">
    <span role="heading" aria-level="2">Serilog æ¥å¿åºç®åå®è·µï¼åï¼æ¶æ¯éå Sinksï¼.net8ï¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        å°æ¥å¿äºä»¶éè¿æ¶æ¯éå Sinks åå¸åºå»æ¯ä¸ç§å®ç°ç³»ç»è§£è¦ãå¼æ­¥å¤çåæµéåå³°çé«ææ¹å¼ãæ¬æå°± KafkaãRabbitMQ ä¸¤ç§è¿è¡ç®åä»ç»åå®è·µï¼ä¾åèã
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h2>ããåè¨</h2>
<p>åæå·²ç»ä»ç»è¿ä»ä¹æ¯ Serilogï¼ä»¥åå¶æ ¸å¿ç¹ç¹ï¼<span style="font-size: 12px"><em>è¯¦è§ï¼<a title="https://www.cnblogs.com/hnzhengfy/p/19167414/Serilog_basic" href="https://www.cnblogs.com/hnzhengfy/p/19167414/Serilog_basic" target="_blank" rel="noopener">https://www.cnblogs.com/hnzhengfy/p/19167414/Serilog_basic</a>ã</em></span></p>
<p>æ¬æç»§ç»­å¯¹åç§ç±»åç Sink è¿è¡ç®åçå®è·µï¼ä¸»é¢æ¯æ¶æ¯éå Sinksï¼ä¾åèã</p>
<p>å¨ç°ä»£åå¸å¼ç³»ç»ä¸­ï¼å°æ¥å¿äºä»¶éè¿æ¶æ¯éå Sinks åå¸åºå»æ¯ä¸ç§å®ç°ç³»ç»è§£è¦ãå¼æ­¥å¤çåæµéåå³°çé«ææ¹å¼ã</p>
<p>æ¶æ¯éå Sinks å¸¸è§çæä»¥ä¸ä¸ç§ï¼</p>
<table>
<thead>
<tr>
<th data-spm-anchor-id="5176.28103460.0.i6.96a07551D462Yj">æå</th>
<th>æ¶æ¯éå</th>
<th>ä¸»è¦ä¼å¿é¢å</th>
<th>éç¨äººç¾¤</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>1</strong></td>
<td><strong>Kafka</strong></td>
<td><strong>é«ååãæ¥å¿ãæµå¤ç</strong></td>
<td><strong>å¤§æ°æ®ãäºèç½å¤§å</strong></td>
</tr>
<tr>
<td><strong>2</strong></td>
<td><strong>RabbitMQ</strong></td>
<td><strong>å¯é æéãçµæ´»è·¯ç±ãæè¿ç»´</strong></td>
<td><strong>ä¸­å°ä¼ä¸ãä¼ ç»è¡ä¸</strong></td>
</tr>
<tr>
<td>3</td>
<td>RocketMQ</td>
<td>äºå¡æ¶æ¯ãé¡ºåºæ¶è´¹ãé«å¯é </td>
<td>ä¸­å½äºèç½ãçµåéè</td>
</tr>
</tbody>
</table>
<p>æ¬æå°±åä¸¤ç§è¿è¡ç®åçä»ç»åç¤ºä¾ï¼å¯¹äº RocketMQ å¾åç»­ææºä¼è¿è¡è¡¥åã</p>
<h2>ä¸ãæ¶æ¯éå Sinks çç¨æ³</h2>
<h3>1.1 Serilog.Sinks.Kafkaï¼å°æ¥å¿ä¿¡æ¯åå¥ Kafka éå</h3>
<p>Serilog.Sinks.Kafka æ¯ Serilog æ¥å¿åºçä¸ä¸ª Sinkï¼æ¥æ¶å¨ï¼æä»¶ï¼ç¨äºå°ç»æåæ¥å¿æ°æ®åéå° Apache Kafka ä¸»é¢ãå®å©ç¨ Kafka é«ååéãåå¸å¼åå¸-è®¢éæ¶æ¯ç³»ç»çç¹ç¹ï¼æå»ºå®æ¶æ¥å¿ç®¡éï¼ä½¿æ¥å¿ç³»ç»è½å¤è½»æ¾å¤çæµ·éæ¥å¿æ°æ®ï¼å¹¶æ¯æå¤ç³»ç»éæåæã</p>
<h4>1.1.1 å¨ Windows ä¸å®è£ Kafka<em>ï¼ç¨äºå¼åæµè¯ï¼çäº§ç¯å¢å»ºè®® Linuxï¼</em></h4>
<p><span style="font-size: 12px"><em>æ³¨æï¼Kafka å®æ¹ä¸»è¦æ¯æ Linux ç¯å¢ï¼Windows å®è£ä¸æ¯å®æ¹æ¨èçæ¹å¼ãä½å¦ææ¯å¨ Windows ä¸è¿è¡å¼åæµè¯ï¼è¿æ¯å¯ä»¥çã</em></span></p>
<p><strong>æ¬æä½¿ç¨ç°ä»ææ°ççæ¬ 4.1.1ï¼Kafka 4.1.1 é»è®¤ä½¿ç¨ KRaftï¼Kafka Raftï¼æ¨¡å¼ï¼å³å» ZooKeeper æ¶æï¼å æ­¤åªéå®è£ java ç¯å¢ï¼æ éå¨å®è£ ZooKeeper ã</strong></p>
<p><strong>1ï¼å®è£ Java ç¯å¢</strong></p>
<p>ç±äº Kafka 4.1.1 æ¯ç¨ Java 17ï¼class version 61ï¼ç¼è¯çï¼å¯¹åºå³ç³»å¦ä¸ï¼</p>
<p>Java çæ¬ä¸ class file version å¯¹ç§å³ç³»ï¼<br>Java 8 â 52<br>Java 11 â 55<br>Java 17 â 61<br>Java 21 â 65</p>
<p>å æ­¤ï¼å¨å®è£ Kafka ä¹åå¯ä»¥åå®è£ä¸ JDK 17ãå®æ¹ä¸è½½å°åï¼<a title="https://www.oracle.com/java/technologies/javase/jdk17-archive-downloads.html" href="https://www.oracle.com/java/technologies/javase/jdk17-archive-downloads.html" target="_blank" rel="noopener nofollow">https://www.oracle.com/java/technologies/javase/jdk17-archive-downloads.html</a>ã</p>
<p>ç´æ¥é»è®¤éé¡¹å®è£å³å¯ã</p>
<p>ç¶åéç½®ç¯å¢åéï¼<code>JAVA_HOME</code>ï¼<code>C:\Program Files\Java\jdk-17</code>ãå®è£æ¶è¥æ¹äºè·¯å¾éè¦æ¹æå¯¹åºçè·¯å¾ã</p>
<p>Path ä¸­æ·»å ä¸è¡ï¼<code>%JAVA_HOME%\bin</code>ã</p>
<p>ç¶åæå¼ cmd çªå£éªè¯å®è£æåï¼</p>
<pre class="language-powershell highlighter-hljs"><code>C:\Users\Administrator&gt;java -version
java version "17.0.12" 2024-07-16 LTS
Java(TM) SE Runtime Environment (build 17.0.12+8-LTS-286)
Java HotSpot(TM) 64-Bit Server VM (build 17.0.12+8-LTS-286, mixed mode, sharing)</code></pre>
<p><strong>2ï¼å®è£ Kafka</strong></p>
<p>ä¸è½½å¦ä¸å¾ä¸­çäºè¿å¶çæ¬ï¼Binaryï¼ï¼å¯ä»¥ç´æ¥è¿è¡ï¼æ éèªå·±ç¼è¯ãæä»¶åä¸­ç 2.13 è¡¨ç¤ºè¯¥ Kafka çæ¬æ¯ç¨ Scala 2.13 ç¼è¯çï¼å¯ä»¥å¿½ç¥ã</p>
<p>å®æ¹ä¸è½½å°åï¼<a title="https://kafka.apache.org/downloads" href="https://kafka.apache.org/downloads" target="_blank" rel="noopener nofollow">https://kafka.apache.org/downloads</a>ã</p>
<p><img src="https://img2024.cnblogs.com/blog/1868241/202511/1868241-20251126225757439-1096942952.png" alt="image" height="162" width="287"></p>
<p>è§£åå°æä»¶å¤¹ï¼<code>D:\kafka_2.13-4.1.1</code>ã</p>
<p>ä¿®æ¹éç½®æä»¶å¤¹<code>D:\kafka_2.13-4.1.1\config\server.properties</code>ï¼</p>
<pre class="language-powershell highlighter-hljs"><code># ãå·²é»è®¤ãå¯ç¨ KRaft æ¨¡å¼ï¼åæ¶ä½ä¸º broker å controllerï¼
process.roles=broker,controller
node.id=1
broker.id=1

# ãå¿é¡»è®¾ç½®ï¼éæå¨æ°å¢ã
# å®ä¹ controller quorum çæç¥¨æå
# æ ¼å¼ï¼nodeId@host:port
controller.quorum.voters=1@localhost:9093
# controller.quorum.voters=1@localhost:9093 ä¸­ç 1 å¿é¡»å node.id=1 ä¸è´
# 9093 æ¯ CONTROLLER çå¬ç«¯å£ï¼å¿é¡»ä¸ listeners ä¸­ç CONTROLLER://:9093 å¹é

# å¿é¡»è®¾ç½®ï¼å®ä¹ controller quorum çæç¥¨æå
# æ ¼å¼ï¼nodeId@host:port
controller.quorum.voters=1@localhost:9093

# ãå·²é»è®¤ãçå¬å¨éç½®
listeners=PLAINTEXT://:9092,CONTROLLER://:9093
inter.broker.listener.name=PLAINTEXT
controller.listener.names=CONTROLLER

# æ¥å¿ç®å½ï¼å»ºè®®ä½¿ç¨ Windows è·¯å¾ï¼
log.dirs=/tmp/kraft-combined-logs</code></pre>
<p>ç¶åçæéç¾¤ ID å¹¶æ ¼å¼åæ¥å¿ç®å½ï¼ï¼å¿è¦æ­¥éª¤ï¼è¥ç´æ¥å¯å¨ï¼ä¼æ¥éï¼æ¾ä¸å° meta.properties æä»¶ï¼</p>
<pre class="language-powershell highlighter-hljs"><code># è½ç¶åºç°äº Log4j ç ERROR æ¥å¿ï¼ä½å®éä¸ UUID å·²æåçæ
PS D:\kafka_2.13-4.1.1&gt; bin\windows\kafka-storage.bat random-uuid
2025-12-04T11:26:06.769887100Z main ERROR Reconfiguration failed: No configuration found for '4dc63996' at 'null' in 'null'
wTL_esmQSuKMtvzx6eclsQ
# ä½¿ç¨çæç Cluster ID æ ¼å¼å Kafka å­å¨ç®å½
PS D:\kafka_2.13-4.1.1&gt; bin\windows\kafka-storage.bat format -t wTL_esmQSuKMtvzx6eclsQ -c config/server.properties
2025-12-04T11:29:22.735759Z main ERROR Reconfiguration failed: No configuration found for '4dc63996' at 'null' in 'null'
Formatting metadata directory /tmp/kraft-combined-logs with metadata.version 4.1-IV1.

# å³äº Log4j ERROR è­¦å
# main ERROR Reconfiguration failed: No configuration found for '4dc63996' at 'null' in 'null'
# æ¯å ä¸º Kafka å·¥å·èæ¬ï¼å¦ kafka-storage.batï¼æ²¡ææ¾å° Log4j 2 éç½®æä»¶
# å®ä¸å½±ååè½ï¼åªæ¯æ¥å¿ç³»ç»åå§åå¤±è´¥ï¼ä½ä»ä¼ä½¿ç¨é»è®¤éç½®ã</code></pre>
<p>æååå¯å¨ Kafkaï¼<code>bin\windows\kafka-server-start.bat config/server.properties</code>ã</p>
<p>çå°å¦ä¸è¾åºå°±æ¯å¯å¨æåäºï¼</p>
<p><span style="font-size: 12px"><em><img src="https://img2024.cnblogs.com/blog/1868241/202512/1868241-20251204194415558-408556665.png" alt="image"></em></span></p>
<p><span style="font-size: 12px"><em>æ³¨æï¼Windows å®è£ Kafka ä»éç¨äºå¼åæµè¯ç¯å¢ï¼çäº§ç¯å¢å»ºè®®ä½¿ç¨ Linux æ Docker é¨ç½²ã</em></span></p>
<details>
<summary>server.properties ç¤ºä¾</summary>
<pre class="language-nginx highlighter-hljs"><code>&nbsp;# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#    http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

############################# Server Basics #############################

# The role of this server. Setting this puts us in KRaft mode
process.roles=broker,controller

# The node id associated with this instance's roles
node.id=1

broker.id=1

# List of controller endpoints used connect to the controller cluster
controller.quorum.bootstrap.servers=localhost:9093

# å¿é¡»è®¾ç½®ï¼å®ä¹ controller quorum çæç¥¨æå
# æ ¼å¼ï¼nodeId@host:port
controller.quorum.voters=1@localhost:9093

############################# Socket Server Settings #############################

# The address the socket server listens on.
# Combined nodes (i.e. those with `process.roles=broker,controller`) must list the controller listener here at a minimum.
# If the broker listener is not defined, the default listener will use a host name that is equal to the value of java.net.InetAddress.getCanonicalHostName(),
# with PLAINTEXT listener name, and port 9092.
#   FORMAT:
#     listeners = listener_name://host_name:port
#   EXAMPLE:
#     listeners = PLAINTEXT://your.host.name:9092
listeners=PLAINTEXT://:9092,CONTROLLER://:9093

# Name of listener used for communication between brokers.
inter.broker.listener.name=PLAINTEXT

# Listener name, hostname and port the broker or the controller will advertise to clients.
# If not set, it uses the value for "listeners".
advertised.listeners=PLAINTEXT://localhost:9092,CONTROLLER://localhost:9093

# A comma-separated list of the names of the listeners used by the controller.
# If no explicit mapping set in `listener.security.protocol.map`, default will be using PLAINTEXT protocol
# This is required if running in KRaft mode.
controller.listener.names=CONTROLLER

# Maps listener names to security protocols, the default is for them to be the same. See the config documentation for more details
listener.security.protocol.map=CONTROLLER:PLAINTEXT,PLAINTEXT:PLAINTEXT,SSL:SSL,SASL_PLAINTEXT:SASL_PLAINTEXT,SASL_SSL:SASL_SSL

# The number of threads that the server uses for receiving requests from the network and sending responses to the network
num.network.threads=3

# The number of threads that the server uses for processing requests, which may include disk I/O
num.io.threads=8

# The send buffer (SO_SNDBUF) used by the socket server
socket.send.buffer.bytes=102400

# The receive buffer (SO_RCVBUF) used by the socket server
socket.receive.buffer.bytes=102400

# The maximum size of a request that the socket server will accept (protection against OOM)
socket.request.max.bytes=104857600


############################# Log Basics #############################

# A comma separated list of directories under which to store log files
# log.dirs=/tmp/kraft-combined-logs
# æ°æ®ç®å½ï¼ç¡®ä¿è·¯å¾å­å¨ä¸å¯åï¼
log.dirs=D:/kafka_2.13-4.1.1/data/kafka-logs

# The default number of log partitions per topic. More partitions allow greater
# parallelism for consumption, but this will also result in more files across
# the brokers.
num.partitions=1

# The number of threads per data directory to be used for log recovery at startup and flushing at shutdown.
# This value is recommended to be increased for installations with data dirs located in RAID array.
num.recovery.threads.per.data.dir=1

############################# Internal Topic Settings  #############################
# The replication factor for the group metadata internal topics "__consumer_offsets", "__share_group_state" and "__transaction_state"
# For anything other than development testing, a value greater than 1 is recommended to ensure availability such as 3.
offsets.topic.replication.factor=1
share.coordinator.state.topic.replication.factor=1
share.coordinator.state.topic.min.isr=1
transaction.state.log.replication.factor=1
transaction.state.log.min.isr=1

############################# Log Flush Policy #############################

# Messages are immediately written to the filesystem but by default we only fsync() to sync
# the OS cache lazily. The following configurations control the flush of data to disk.
# There are a few important trade-offs here:
#    1. Durability: Unflushed data may be lost if you are not using replication.
#    2. Latency: Very large flush intervals may lead to latency spikes when the flush does occur as there will be a lot of data to flush.
#    3. Throughput: The flush is generally the most expensive operation, and a small flush interval may lead to excessive seeks.
# The settings below allow one to configure the flush policy to flush data after a period of time or
# every N messages (or both). This can be done globally and overridden on a per-topic basis.

# The number of messages to accept before forcing a flush of data to disk
#log.flush.interval.messages=10000

# The maximum amount of time a message can sit in a log before we force a flush
#log.flush.interval.ms=1000

############################# Log Retention Policy #############################

# The following configurations control the disposal of log segments. The policy can
# be set to delete segments after a period of time, or after a given size has accumulated.
# A segment will be deleted whenever *either* of these criteria are met. Deletion always happens
# from the end of the log.

# The minimum age of a log file to be eligible for deletion due to age
log.retention.hours=168

# A size-based retention policy for logs. Segments are pruned from the log unless the remaining
# segments drop below log.retention.bytes. Functions independently of log.retention.hours.
#log.retention.bytes=1073741824

# The maximum size of a log segment file. When this size is reached a new log segment will be created.
log.segment.bytes=1073741824

# The interval at which log segments are checked to see if they can be deleted according
# to the retention policies
log.retention.check.interval.ms=300000

# åè®¸èªå¨åå»º Topic
auto.create.topics.enable=true</code></pre>
</details>
<p><strong>3ï¼åå»º topic</strong></p>
<p>åå»ºè¯­å¥ï¼ï¼æ³¨æï¼å¯ä»¥æ¿æ¢èªå®ä¹ç topic åï¼my-logs-topic1212ï¼</p>
<pre class="language-nginx highlighter-hljs"><code>.\bin\windows\kafka-topics.bat --create --topic my-logs-topic1212 --bootstrap-server localhost:9092 --partitions 3 --replication-factor 1</code></pre>
<p>æ³¨æï¼æ­¤è¯­å¥æ­£å¸¸å ç§éå°±å¯ä»¥æ§è¡å®æï¼è¥æ¶é´æ¯è¾é¿ï¼éè¦ç­å¾å¶è¿åéè¯¯æç¤ºã</p>
<p>å¯è½ä¼éå°å¦ä¸éè¯¯ï¼</p>
<pre class="language-nginx highlighter-hljs"><code>Error while executing topic command : Call(...createTopics...) timed out...
Caused by: org.apache.kafka.common.errors.DisconnectException: Cancelled createTopics request... due to node 1 being disconnected</code></pre>
<p>åå ï¼è¯´æ Kafka å®¢æ·ç«¯ï¼kafka-topics.batï¼æ æ³è¿æ¥å° Kafka brokerï¼æè broker è½ç¶å¯å¨ä½æªå®å¨å°±ç»ªï¼ç¹å«æ¯ KRaft Controller æªéä¸¾å®æï¼ã</p>
<p>å¨ KRaft æ¨¡å¼ ä¸ï¼Kafka å¯å¨åä¸ºä¸¤ä¸ªè§è²ï¼Controllerï¼ç®¡çåæ°æ®ï¼topicsãpartitions ç­ï¼ï¼Brokerï¼å¤ççäº§/æ¶è´¹è¯·æ±ãå¦æ Controller å°æªå®æåå§åæéä¸¾ï¼å³ä½¿ kafka-server-start.bat çä¼¼âå·²å¯å¨âï¼åæ°æ®æä½ï¼å¦åå»º Topicï¼ä»ä¼å¤±è´¥ã</p>
<p>è§£å³æ¹æ¡ï¼</p>
<pre class="language-nginx highlighter-hljs"><code># ãæ­¥éª¤ 1ãç¡®è®¤ Kafka æ¯ä»¥ KRaft æ¨¡å¼ å¯å¨ç
# æ£æ¥æ¯å¦ä½¿ç¨äº æ­£ç¡®çéç½®æä»¶ï¼
# æ­£ç¡®å¯å¨å½ä»¤ï¼KRaft æ¨¡å¼ï¼
.\bin\windows\kafka-server-start.bat .\config\server.properties

# ãæ­¥éª¤ 2ãæ£æ¥ server.properties ä¸­çå³é®éç½®
# æå¼ config/server.propertiesï¼ç¡®ä¿åå«ï¼
# çå¬å°åï¼å¿é¡»ï¼ï¼
process.roles=broker,controller
node.id=1
broker.id=1
controller.quorum.voters=1@localhost:9093
listeners=PLAINTEXT://:9092,CONTROLLER://:9093
advertised.listeners=PLAINTEXT://localhost:9092
inter.broker.listener.name=PLAINTEXT
controller.listener.names=CONTROLLER
# æ°æ®ç®å½ï¼ç¡®ä¿è·¯å¾å­å¨ä¸å¯åï¼
log.dirs=D:/kafka_2.13-4.1.1/data/kafka-logs
# æ³¨æï¼
# controller.quorum.voters å¿é¡»ä¸ node.id å¹é
# log.dirs è·¯å¾ä¸è½åå«ç©ºæ ¼æä¸­æ
# ç¬¬ä¸æ¬¡å¯å¨åï¼æ¸ç©º log.dirs ç®å½

# ãæ­¥éª¤ 3ãé¦æ¬¡å¯å¨åæ ¼å¼åå­å¨ç®å½ï¼å³é®ï¼ï¼
# KRaft æ¨¡å¼è¦æ±ï¼åæ ¼å¼åå­å¨ç®å½ï¼å¦å broker æ æ³æ­£å¸¸å å¥éç¾¤
# 1. çæ Cluster IDï¼åªéä¸æ¬¡ï¼
.\bin\windows\kafka-storage.bat random-uuid
# 2. æ ¼å¼åæ¥å¿ç®å½
.\bin\windows\kafka-storage.bat format -t &lt;ä¸ä¸æ­¥çæçUUID&gt; -c .\config\kraft\server.properties

# ãæ­¥éª¤ 4ãå¯å¨ Kafka å¹¶ç­å¾å®å¨å°±ç»ª
.\bin\windows\kafka-server-start.bat .\config\server.properties
# Kafka å¯å¨æååï¼ç­å¾ 10~15 ç§ åæ§è¡ kafka-topics.bat
# KRaft å¯å¨æ¯ ZooKeeper æ¨¡å¼æ¢ï¼ç«å³åå»º Topic ä¼å¤±è´¥</code></pre>
<pre class="language-nginx highlighter-hljs"><code># å®éæä½è¿ç¨ç¤ºä¾ï¼
PS D:\kafka_2.13-4.1.1&gt; .\bin\windows\kafka-storage.bat random-uuid
nOhIgFFsQm2aiodLw8y7cQ

PS D:\kafka_2.13-4.1.1&gt; bin\windows\kafka-storage.bat format -t nOhIgFFsQm2aiodLw8y7cQ -c config/server.properties --ignore-formatted
Formatting metadata directory /tmp/kraft-combined-logs with metadata.version 4.1-IV1.

PS D:\kafka_2.13-4.1.1&gt; bin\windows\kafka-server-start.bat config/server.properties
DEPRECATED: A Log4j 1.x configuration file has been detected, which is no longer recommended.
ããã
[2025-12-12 17:31:28,080] INFO [BrokerServer id=1] Transition from STARTING to STARTED (kafka.server.BrokerServer)
[2025-12-12 17:31:28,082] INFO Kafka version: 4.1.1 (org.apache.kafka.common.utils.AppInfoParser)
[2025-12-12 17:31:28,082] INFO Kafka commitId: be816b82d25370ce (org.apache.kafka.common.utils.AppInfoParser)
[2025-12-12 17:31:28,084] INFO Kafka startTimeMs: 1765531888081 (org.apache.kafka.common.utils.AppInfoParser)
[2025-12-12 17:31:28,085] INFO [KafkaRaftServer nodeId=1] Kafka Server started (kafka.server.KafkaRaftServer)
# è³æ­¤éæ°å¯å¨æåï¼ç¶åå¦æå¼ä¸ä¸ªçªå£ï¼è¿è¡ä¸é¢æä½ï¼
# æ·»å  topic
PS D:\kafka_2.13-4.1.1&gt; .\bin\windows\kafka-topics.bat --create --topic my-logs-topic1212 --bootstrap-server localhost:9092 --partitions 3 --replication-factor 1
Created topic my-logs-topic1212.
#æ¥çå·²æ·»å ç topic
PS D:\kafka_2.13-4.1.1&gt; .\bin\windows\kafka-topics.bat --list --bootstrap-server localhost:9092
my-logs-topic1212</code></pre>
<p><strong>4ï¼éªè¯ Kafka å·²ç»å¯å¨</strong></p>
<pre class="language-nginx highlighter-hljs"><code># å¯ä»¥ååº topic è¡¨æï¼Kafka Broker å·²æ¥åå®¢æ·ç«¯è¿æ¥ï¼å¹¶è½ååºåæ°æ®è¯·æ±
PS D:\kafka_2.13-4.1.1&gt; .\bin\windows\kafka-topics.bat --list --bootstrap-server localhost:9092
my-logs-topic1212
# Kafka æ¯ Java åºç¨ï¼å¿é¡»æ java.exe è¿ç¨
# åç»­ netstat æ¾ç¤ºè¯¥ PID çå¬ 9092 ç«¯å£ï¼ç¡®è®¤å°±æ¯ Kafka è¿ç¨
PS D:\kafka_2.13-4.1.1&gt; tasklist /fi "imagename eq java.exe"

æ ååç§°                       PID ä¼è¯å              ä¼è¯#       åå­ä½¿ç¨
========================= ======== ================ =========== ============
java.exe                     90224 Console                    2    432,272 K
# 9092 ç«¯å£å¤äº LISTENING ç¶æï¼ä¸ PID å¹é
# è¡¨ç¤º Kafka Broker æ­£å¨çå¬ææ IPv4/IPv6 æ¥å£ç 9092 ç«¯å£
# PID 90224 ä¸ tasklist ä¸­ç Java è¿ç¨ä¸è´ï¼ç¡®è®¤æ¯ Kafka å¨çå¬
PS D:\kafka_2.13-4.1.1&gt; netstat -ano | findstr :9092
  TCP    0.0.0.0:9092           0.0.0.0:0              LISTENING       90224
  TCP    127.0.0.1:52704        127.0.0.1:9092         TIME_WAIT       0
  TCP    127.0.0.1:52706        127.0.0.1:9092         TIME_WAIT       0
  TCP    127.0.0.1:52758        127.0.0.1:9092         TIME_WAIT       0
  TCP    127.0.0.1:52766        127.0.0.1:9092         TIME_WAIT       0
  TCP    [::]:9092              [::]:0                 LISTENING       90224
# å¤ä¸ª TIME_WAIT æ¯ä¹å kafka-topics.bat å»ºç«çç­è¿æ¥å³é­åçæ­£å¸¸ç¶æ</code></pre>
<h4>1.1.2 æµè¯å¾ Kafka éåä¸­åå¥æ¶æ¯</h4>
<p>1ï¼åå»º .NET 8.0 æ§å¶å°åºç¨ç¨åºï¼ç¶åå®è£å¿è¦çåï¼</p>
<pre class="language-nginx highlighter-hljs"><code>dotnet add package Serilog
dotnet add package Serilog.Sinks.Console
dotnet add package Serilog.Sinks.ConfluentKafka</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1868241/202601/1868241-20260104105638368-1594540197.png" alt="image"></p>
<p>2ï¼ä¿®æ¹ Program.cs</p>
<pre class="language-csharp highlighter-hljs"><code>using Confluent.Kafka;
using Serilog;
using Serilog.Formatting.Json;
using Serilog.Sinks.Kafka;

// éç½® Kafka Producer
var kafkaConfig = new ProducerConfig
{
    BootstrapServers = "localhost:9092",
    ClientId = "serilog-dotnet8-demo",
    Acks = Acks.All,
    EnableIdempotence = true,
    MessageTimeoutMs = 30000
};
// éç½® Serilog
Log.Logger = new LoggerConfiguration()
    .MinimumLevel.Information()
    .WriteTo.Console() // å¯éï¼åæ¶è¾åºå°æ§å¶å°
    .WriteTo.Kafka(
        topic: "my-logs-topic1212",
        null,
        producerConfig: kafkaConfig,
        formatter: new JsonFormatter() // æèªå®ä¹æ ¼å¼
    )
.CreateLogger();
// æµè¯æ¥å¿
Log.Information("åºç¨ç¨åºå¯å¨æå");
Log.Warning("ç¨æ· {UserId} å°è¯äºé«é£é©æä½", 123);
Log.Error(new Exception("æ°æ®åºè¿æ¥å¤±è´¥"), "æ°æ®åºéè¯¯");
// æ¨¡æä¸å¡
for (int i = 1; i &lt;= 3; i++)
{
    Log.Information("å¤çä»»å¡ {TaskId}ï¼è¿åº¦ {Progress:P}", i, i / 3.0);
    await Task.Delay(200);
}
// ç¡®ä¿æ¥å¿åéå®æ
Log.CloseAndFlush();
Console.WriteLine("\næ¥å¿å·²åéå° Kafka ä¸»é¢ 'app-logs'ãæä»»æé®éåº...");
Console.ReadKey();</code></pre>
<p>å¯å¨é¡¹ç®ï¼ç¶åæ¥ç Kafka éååå®¹ã</p>
<pre class="language-nginx highlighter-hljs"><code># ä½¿ç¨å½ä»¤æ¥ç
.\bin\windows\kafka-console-consumer.bat --bootstrap-server localhost:9092 --topic &lt;your-topic&gt; --from-beginning
# ãkafka-console-consumer.batã
# Kafka èªå¸¦ç å½ä»¤è¡æ¶è´¹èå·¥å·ï¼Console Consumerï¼
# ã--bootstrap-server localhost:9092ã
# æå® Kafka Broker çè¿æ¥å°åï¼KRaft æ¨¡å¼ä¸å¿éï¼
# æ ¼å¼ï¼host:portï¼å¤ä¸ª Broker ç¨éå·åéï¼å¦ host1:9092,host2:9092
# ä¸ºä»ä¹å« "bootstrap"ï¼å®¢æ·ç«¯åªéè¿æ¥å¶ä¸­ä¸ä¸ª Brokerï¼å³å¯è·åæ´ä¸ªéç¾¤çåæ°æ®ï¼åæ¬ææ TopicãPartition åå¸ç­ï¼ï¼åç»­ä¼ç´æ¥ä¸å¯¹åº Partition ç Leader éä¿¡
# ã--topic &lt;your-topic&gt;ã
# æå®è¦æ¶è´¹ç Topic åç§°ï¼è¿éä¸æ¬¡åªè½æå® ä¸ä¸ª Topic
# ã--from-beginningã
# ä»è¯¥ Topic çææ©æ¶æ¯ï¼offset = 0ï¼å¼å§æ¶è´¹ï¼èä¸æ¯ä»ææ°ä½ç½®å¼å§
# ã--property print.key=trueãåæ¶æå°æ¶æ¯ç Keyï¼é»è®¤åªæå° Valueï¼
# ã--property print.timestamp=trueãæå°æ¶æ¯çæ¶é´æ³ï¼CreateTime æ LogAppendTimeï¼</code></pre>
<p>ç´æ¥éè¿å½ä»¤æå°åºæ¶æ¯åè¡¨æ¶ï¼ä¼åºç°ä¸­æä¹±ç ï¼<strong>å¦ä½å¤çä¹±ç åä½¿ç¨å·¥å· Offset Explorer æ¥æ¥ç</strong>ï¼è¯¦è§æ¬æåä¸èã</p>
<h4>1.1.3 éå°çé®é¢ï¼æ¥çéåæ¶æ¯æ¶ä¸­æä¹±ç </h4>
<p>å¨ PowerShell ä¸­éè¿å½ä»¤æ¥çéåæ¶æ¯æ¶ï¼åºç°ä¹±ç ï¼å¦ä¸å¾ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/1868241/202601/1868241-20260104092544043-1870984030.png" alt="image"></p>
<p>éåï¼Topicï¼ä¸­çä¸­ææ¶æ¯æ¾ç¤ºä¸ºä¹±ç ï¼è¿éå¸¸æ¯ç±äº å­ç¬¦ç¼ç ä¸ä¸è´ å¯¼è´çãKafka æ¬èº«ä»¥å­èï¼byteï¼å½¢å¼å­å¨æ¶æ¯ï¼ä¸å³å¿åå®¹ç¼ç ï¼é®é¢åºå¨ çäº§èåå¥ å æ¶è´¹èè¯»å æ¶ä½¿ç¨çå­ç¬¦ç¼ç ä¸å¹éï¼å°¤å¶æ¯ Windows æ§å¶å°ï¼CMD/PowerShellï¼é»è®¤ä½¿ç¨ GBKï¼ä¸­æç³»ç»ï¼èé UTF-8ã</p>
<pre class="language-nginx highlighter-hljs"><code># å³ä½¿ Kafka æ­£ç¡®è¾åº UTF-8ï¼Windows æ§å¶å°é»è®¤ç¨ GBK æ¾ç¤ºï¼ä»ä¼ä¹±ç 
# å¨ PowerShell æ CMD ä¸­æ§è¡ï¼
chcp 65001  # 65001 æ¯ UTF-8 çä»£ç é¡µ
# PowerShell ä¸­è®¾ç½®ç¯å¢åéåå¯å¨
$env:KAFKA_OPTS="-Dfile.encoding=UTF-8"
# ç¶ååéæ°è¿è¡ consumer å½ä»¤
.\bin\windows\kafka-console-consumer.bat --bootstrap-server localhost:9092 --topic &lt;your-topic&gt; --from-beginning</code></pre>
<p>ä¸è¾¹çéç½®ä»å½åçªå£ææã</p>
<p>è¿å¯ä»¥<strong>éè¿ Offset Explorer åºç¨æ¥æ¥çæ¶æ¯</strong>ã</p>
<p>ä¸è½½ Offset Explorerï¼<a title="https://offsetexplorer.com/download.html" href="https://offsetexplorer.com/download.html" target="_blank" rel="noopener nofollow">https://offsetexplorer.com/download.html</a>ã</p>
<p><img src="https://img2024.cnblogs.com/blog/1868241/202512/1868241-20251231184356405-1355679403.png" alt="image"></p>
<p><img src="https://img2024.cnblogs.com/blog/1868241/202512/1868241-20251231184433809-1109603218.png" alt="image"></p>
<h4>1.1.4 éå°çé®é¢ï¼éå¯ Kafka æ¶ä¸æå</h4>
<p>æ¥éåå®¹ä¾å¦ï¼</p>
<pre class="language-nginx highlighter-hljs"><code>WARN Stopping serving logs in dir D:\kafka_2.13-4.1.1\data\kafka-logs (kafka.log.LogManager)
ERROR Shutdown broker because all log dirs in D:\kafka_2.13-4.1.1\data\kafka-logs have failed (kafka.log.LogManager)</code></pre>
<p>è¯´æ Kafka Broker å¯å¨åå æ¥å¿ç®å½ï¼log.dirsï¼ä¸å¯ç¨èä¸»å¨å³é­ãè¿æ¯ Kafka çä¿æ¤æºå¶ââå½ææéç½®çæ¥å¿å­å¨ç®å½é½å¤±ææ¶ï¼å®ä¼æç»è¿è¡ä»¥é¿åæ°æ®ä¸¢å¤±ã</p>
<p>å¯è½çåå ï¼</p>
<p>1ï¼æ¥å¿æå¨çç®å½æéä¸è¶³ã</p>
<p>Kafka éè¦å¯¹ log.dirs æå®çç®å½æ è¯»ãåãå é¤ãåå»ºå­ç®å½ çæéãæ¬æç¤ºä¾çç®å½ä¸ºï¼D:\kafka_2.13-4.1.1\data\kafka-logsã</p>
<p>æä½ï¼å³é® kafka-logs æä»¶å¤¹ â å±æ§ â å®å¨ â ç¼è¾ï¼ç»å½åç¨æ·éç½® âå®å¨æ§å¶â æéï¼æåéå¯ Kafkaã</p>
<p>2ï¼ç®å½è¢«å¶ä» Kafka å®ä¾å ç¨ï¼æä»¶éï¼</p>
<p>å¦æä¹åå¯å¨è¿ Kafka ä½æªæ­£å¸¸å³é­ï¼.lock æä»¶å¯è½æ®çï¼å¯¼è´æ°å®ä¾è®¤ä¸ºç®å½å·²è¢«å ç¨ã</p>
<p>åç¡®è®¤ææ²¡æ Kafka ç¤ºä¾å¨è¿è¡ï¼<code>tasklist /fi "imagename eq java.exe"</code>ã</p>
<p>æå°±åç»æï¼ç¶ååæ .lock æä»¶å é¤ã</p>
<p>æµè¯é¶æ®µå¯ä»¥å°æ¥å¿æä»¶å¤¹ä¸çå¨é¨æä»¶é½å æï¼é¿åå æªç¥çå ç¨å¯¼è´ Kafka å¯å¨å¤±è´¥ï¼ä½è¦è°¨ææä½ï¼å¨é¨å é¤ä¼é æä¹åéåæ¶æ¯æ¸ç©ºã</p>
<p><span style="font-size: 12px"><em>æ³¨æï¼ä¸è¦å¼ºè¡å é¤æ­£å¨ä½¿ç¨çæ¥å¿ç®å½åå®¹ï¼ä»å¨ç¡®è®¤ Kafka å·²åæ­¢æ¶æä½ã</em></span></p>
<p>3ï¼ç£çç©ºé´ä¸è¶³ï¼å¯ä»¥èªè¡æ£æ¥ï¼ç¡®ä¿æè¶³å¤ç©ºé´ï¼è³å°å ç¾ MBï¼ã</p>
<h3>1.2 Serilog.Sinks.RabbitMQï¼å°æ¥å¿äºä»¶åéå° RabbitMQ æ¶æ¯éåç³»ç»ä¸­</h3>
<p>Serilog.Sinks.RabbitMQ æ¯ä¸ä¸ª Serilog çæ¥å¿æ¥æ¶å¨ï¼Sinkï¼ï¼ç¨äºå°åºç¨ç¨åºçæ¥å¿äºä»¶åéå° RabbitMQ æ¶æ¯éåç³»ç»ä¸­ã</p>
<p>éè¿è¯¥ Sinkï¼å¼åèå¯ä»¥å°ç»æåæ¥å¿ä»¥æ¶æ¯çå½¢å¼åå¸å° RabbitMQ ç äº¤æ¢æºï¼Exchangeï¼ æç´æ¥ç»å®å° éåï¼Queueï¼ï¼ä»èå®ç°æ¥å¿çéä¸­æ¶éãå¼æ­¥å¤çãè§£è¦æè¿ä¸æ­¥è½¬åå°æ¥å¿åæç³»ç»ï¼å¦ ELKãGraylog ç­ï¼ã</p>
<p>å¤§æ¦çæ­¥éª¤ï¼</p>
<p>ââåºç¨ç¨åºè°ç¨ Log.Information(...) ç­æ¹æ³è®°å½æ¥å¿ï¼<br>ââSerilog æè·æ¥å¿äºä»¶ï¼<br>ââRabbitMQ Sink å°æ¥å¿äºä»¶åºååï¼<br>ââéè¿ AMQP å®¢æ·ç«¯è¿æ¥ RabbitMQï¼<br>ââå°æ¶æ¯åå¸å°éç½®ç Exchangeï¼å¯éç»å® Routing Keyï¼ï¼<br>ââRabbitMQ æ ¹æ®ç»å®è§åå°æ¶æ¯è·¯ç±å°ä¸ä¸ªæå¤ä¸ªéåï¼<br>ââæ¶è´¹èï¼å¦æ¥å¿å¤çå¨ãELK è¾å¥æä»¶ï¼ä»éåä¸­æ¶è´¹æ¥å¿ã</p>
<p><em>æ³¨æï¼Sink é»è®¤ä¸å£°æéåï¼åªè´è´£åå¸æ¶æ¯å° Exchangeãå æ­¤ï¼å¨å¾ RabbitMQ åéæ¶æ¯åï¼éè¦æåéç½®å¥½ ExchangeãQueue åç»å®å³ç³»ï¼æèå¯ç¨èªå¨å£°æï¼é¨åçæ¬æ¯æï¼ã</em></p>
<h4>1.2.1 å¨ Windows ä¸å®è£ RabbitMQ</h4>
<p>æå¸¸è§çæ¯éè¿ <strong>Erlang + RabbitMQ</strong> å®è£å çç»åæ¹å¼ï¼å ä¸º<strong> RabbitMQ æ¯ç¨ Erlang ç¼åçï¼ä¾èµ Erlang/OTP è¿è¡æ¶</strong>ï¼ã</p>
<p><span style="font-size: 12px"><em>æ³¨æï¼Erlang å RabbitMQ ççæ¬å¿é¡»å¼å®¹ãè¯·åèå®æ¹å¼å®¹æ§ç©éµï¼<a title="https://www.rabbitmq.com/docs/which-erlang" href="https://www.rabbitmq.com/docs/which-erlang" target="_blank" rel="noopener nofollow">https://www.rabbitmq.com/docs/which-erlang</a>ã</em></span></p>
<p>1ï¼ä¸è½½åå®è£ Erlang/OTP</p>
<p>å®æ¹ä¸è½½é¡µï¼<a title="https://www.erlang.org/downloads" href="https://www.erlang.org/downloads" target="_blank" rel="noopener nofollow">https://www.erlang.org/downloads</a>ã</p>
<p>æ¨èä½¿ç¨ Windows 64-bit Binary File (.exe)ï¼ä¾å¦ï¼otp_win64_27.3.exeï¼å¯¹åº OTP 27.3ï¼ãæªè³ 2025 å¹´ 12 æï¼RabbitMQ 4.2+ éå¸¸è¦æ± Erlang 26.2 ~ 27.xã</p>
<p><img src="https://img2024.cnblogs.com/blog/1868241/202512/1868241-20251202110425987-1382745303.png" alt="image" height="175" width="494"></p>
<p>ç¶åç´æ¥åå»å®è£åï¼ç´æ¥ä¸ä¸æ­¥å®è£å®æã</p>
<p>åæ¹ä¸ç³»ç»ç¯å¢åéï¼</p>
<p><strong>æ°å¢</strong>ï¼ERLANG_HOMEï¼C:\Program Files\Erlang OTPã</p>
<p><strong>å¨ Path ä¸­æ·»å </strong>ï¼%ERLANG_HOME%\binã</p>
<p>æåï¼ç¨ erl å½ä»¤éªè¯ä¸æ¯å¦å®è£æåï¼</p>
<pre class="language-powershell highlighter-hljs"><code>C:\Windows\system32&gt;erl
Erlang/OTP 27 [erts-15.2.3] [source] [64-bit] [smp:20:20] [ds:20:20:10] [async-threads:1] [jit:ns]

Eshell V15.2.3 (press Ctrl+G to abort, type help(). for help)
1&gt;</code></pre>
<p>2ï¼ä¸è½½åå®è£ RabbitMQ</p>
<p>å®æ¹ä¸è½½å°åï¼<a title="https://www.rabbitmq.com/docs/install-windows#downloads" href="https://www.rabbitmq.com/docs/install-windows#downloads" target="_blank" rel="noopener nofollow">https://www.rabbitmq.com/docs/install-windows#downloads</a>ã</p>
<p>ä¸è½½ RabbitMQ Server Windows Installer (.exe)ãä¾å¦ï¼rabbitmq-server-4.2.1.exeãæ¨èä½¿ç¨ .exe å®è£åï¼å¸¦å¾å½¢çé¢å Windows æå¡ï¼ï¼èé .zip åç¼©åã</p>
<p><img src="https://img2024.cnblogs.com/blog/1868241/202512/1868241-20251202110133508-558096292.png" alt="image" height="119" width="478"></p>
<p>å®è£å®æåï¼åæ ·éè¦ä¿®æ¹ç¯å¢åéï¼</p>
<p>æ°å¢ä¸ä¸ªï¼RABBITMQ_SERVERï¼C:\Program Files\RabbitMQ Serverã</p>
<p>è¿½å  Pathï¼%RABBITMQ_SERVER%\binã</p>
<p>æåï¼éªè¯æ¯å¦å®è£æåã</p>
<pre class="language-powershell highlighter-hljs"><code>C:\Windows\system32&gt;sc query RabbitMQ

SERVICE_NAME: RabbitMQ
        TYPE               : 10  WIN32_OWN_PROCESS
        STATE              : 4  RUNNING
                                (STOPPABLE, NOT_PAUSABLE, ACCEPTS_SHUTDOWN)
        WIN32_EXIT_CODE    : 0  (0x0)
        SERVICE_EXIT_CODE  : 0  (0x0)
        CHECKPOINT         : 0x0
        WAIT_HINT          : 0x0</code></pre>
<p>å¦å¤ï¼RabbitMQ èªå¸¦ä¸ä¸ª Web ç®¡ççé¢ï¼Management Pluginï¼ï¼é»è®¤æªå¯ç¨ã</p>
<pre class="language-powershell highlighter-hljs"><code># ä»¥ç®¡çåèº«ä»½æå¼ å½ä»¤æç¤ºç¬¦ æ PowerShellï¼æ§è¡ï¼å±ä¸¤æ­¥ï¼ï¼
# 1ï¼è¿å¥ RabbitMQ å®è£ç®å½ç sbin æä»¶å¤¹ï¼éå¸¸å¦ä¸ï¼çæ¬å·éè¦æ¹ææ¬å°çï¼
C:\Program Files\RabbitMQ Server&gt;cd C:\Program Files\RabbitMQ Server\rabbitmq_server-4.2.1\sbin
# 2ï¼å¯ç¨ç®¡çæä»¶
C:\Program Files\RabbitMQ Server\rabbitmq_server-4.2.1\sbin&gt;.\rabbitmq-plugins.bat enable rabbitmq_management
Enabling plugins on node rabbit@chengzijia:
rabbitmq_management
The following plugins have been configured:
  rabbitmq_management
  rabbitmq_management_agent
  rabbitmq_web_dispatch
Applying plugin configuration to rabbit@chengzijia...
The following plugins have been enabled:
  rabbitmq_management
  rabbitmq_management_agent
  rabbitmq_web_dispatch

set 3 plugins.
Offline change; changes will take effect at broker restart.</code></pre>
<p>å¯ç¨åéè¦æå¨éå¯ä¸ RabbitMQ æå¡ï¼ç¶åéè¿ <a title="http://localhost:15672/" href="http://localhost:15672/" target="_blank" rel="noopener nofollow">http://localhost:15672/</a> è®¿é®ãéè¦ç»å½è´¦å·åå¯ç ï¼åä¸º guestã</p>
<p><span style="font-size: 12px"><em>æ³¨æï¼guest ç¨æ·é»è®¤åªè½ä» localhost ç»å½ï¼è¥éè¿ç¨è®¿é®ï¼éåå»ºæ°ç¨æ·å¹¶ææã</em></span></p>
<p>å¨ sbin ç®å½ä¸å¯ä½¿ç¨ä»¥ä¸å½ä»¤ï¼</p>
<table>
<thead>
<tr>
<th data-spm-anchor-id="5176.28103460.0.i17.96a0755137ugjt">å½ä»¤</th>
<th>è¯´æ</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>.\rabbitmqctl.bat status</code></td>
<td data-spm-anchor-id="5176.28103460.0.i15.96a0755137ugjt">æ¥çèç¹ç¶æ</td>
</tr>
<tr>
<td><code>.\rabbitmqctl.bat list_users</code></td>
<td>ååºç¨æ·</td>
</tr>
<tr>
<td><code>.\rabbitmqctl.bat add_user myuser mypass</code></td>
<td>æ·»å ç¨æ·</td>
</tr>
<tr>
<td><code>.\rabbitmqctl.bat set_user_tags myuser administrator</code></td>
<td>è®¾ç½®ç¨æ·ä¸ºç®¡çå</td>
</tr>
<tr>
<td data-spm-anchor-id="5176.28103460.0.i16.96a0755137ugjt"><code>.\rabbitmqctl.bat set_permissions -p / myuser ".*" ".*" ".*"</code></td>
<td>æäº vhost&nbsp;<code>/</code>&nbsp;çå¨é¨æé</td>
</tr>
</tbody>
</table>
<p>éç½®åè®¸è¿ç¨è®¿é®ï¼</p>
<pre class="language-powershell highlighter-hljs"><code># åå»ºæ°ç¨æ·
.\rabbitmqctl.bat add_user admin yourpassword
.\rabbitmqctl.bat set_user_tags admin administrator
.\rabbitmqctl.bat set_permissions -p / admin ".*" ".*" ".*"
# ç¡®ä¿é²ç«å¢å¼æ¾ç«¯å£ï¼
# AMQP é»è®¤ç«¯å£ï¼5672
# Management Web UI ç«¯å£ï¼15672</code></pre>
<h4>1.2.2 éè¿ Serilog.Sinks.RabbitMQ 8.0.0 å®ç°è®²æ¶æ¯åå¥å°éå</h4>
<p>ç¤ºä¾ç¨åºçç®æ ï¼<strong>å°æ¥å¿ä¿¡æ¯éè¿ localhost guest è´¦å·ï¼æ¨éå° amq.fanout äº¤æ¢æºã</strong></p>
<p>1ï¼åå»ºé¡¹ç®å¹¶å¼å¥å¿è¦çå</p>
<p>åå»ºä¸ä¸ªåºäº .net8 çæ§å¶å°åºç¨ç¨åºï¼å¹¶å¼å¥ä»¥ä¸åï¼</p>
<pre class="language-powershell highlighter-hljs"><code>dotnet add package Serilog
dotnet add package Serilog.Sinks.Console
dotnet add package Serilog.Sinks.RabbitMQ</code></pre>
<p>2ï¼ä¿®æ¹ Program.cs</p>
<pre class="language-csharp highlighter-hljs"><code>using RabbitMQ.Client;
using Serilog;
using Serilog.Events;
using Serilog.Formatting.Json;
using Serilog.Sinks.RabbitMQ;

// å° Serilog Sink åé¨çå¼å¸¸ï¼å¦è¿æ¥å¤±è´¥ãæééè¯¯ãexchange ä¸å­å¨ç­ï¼è¾åºå°æ§å¶å°
Serilog.Debugging.SelfLog.Enable(Console.Error);

// éç½® Serilog
Log.Logger = new LoggerConfiguration()
    .MinimumLevel.Debug()
    .WriteTo.Console()
    .WriteTo.RabbitMQ((clientConfiguration, sinkConfiguration) =&gt;
    {
        clientConfiguration.Port = 5672;
        clientConfiguration.DeliveryMode = RabbitMQDeliveryMode.Durable;
        clientConfiguration.Exchange = "amq.fanout";
        clientConfiguration.Username = "guest";
        clientConfiguration.Password = "guest";
        clientConfiguration.ExchangeType = "fanout";
        clientConfiguration.Hostnames.Add("localhost");
        sinkConfiguration.TextFormatter = new JsonFormatter();
    }).CreateLogger();

try
{
    Log.Information("åºç¨ç¨åºå¯å¨");
    // ç¤ºä¾ç»æåæ¥å¿
    var userId = 12345;
    var userName = "alice";
    Log.Information("ç¨æ· {@User} ç»å½æåï¼ID: {UserId}", new { Name = userName, Role = "Admin" }, userId);
    Log.Warning("è¿æ¯ä¸ä¸ªè­¦åæ¥å¿ï¼åå«å±æ§ {RetryCount}", 3);
    Log.Error(new InvalidOperationException("æ¨¡æå¼å¸¸"), "å¤çè¯·æ±æ¶åçéè¯¯ï¼è¯·æ±ID: {RequestId}", Guid.NewGuid());
    Log.Information("åºç¨ç¨åºå³å°å³é­");
}
catch (Exception ex)
{
    Log.Fatal(ex, "åºç¨ç¨åºå´©æº");
}
finally
{
    Log.CloseAndFlush(); // ç¡®ä¿æ¥å¿è¢«åé
}</code></pre>
<p>å¨æµè¯åå¥æ¥å¿ä¹åï¼éè¦åæå¨æ°å¢éåï¼logs_firstï¼ç¶ååå°æ­¤éåå å¥å° amq.fanout äº¤æ¢æºä¸­ã</p>
<p><span style="background-color: rgba(251, 238, 184, 1)"><strong>æ°å¢éå</strong></span>ï¼å¡«å¥ Nameï¼ç¶åå¶ä»é»è®¤ï¼ç´æ¥ä¿å­ã</p>
<p><img src="https://img2024.cnblogs.com/blog/1868241/202512/1868241-20251202193859301-511521966.png" alt="image"></p>
<p><span style="background-color: rgba(251, 238, 184, 1)"><strong>å°æ°å¢çéåç»å®å°äº¤æ¢æº amq.fanout ä¸­</strong></span>ï¼ï¼ç´æ¥è¾å¥ä¸ä¸æ­¥æ°å¢çéåï¼ç¹å» Bindï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/1868241/202512/1868241-20251202194106507-753137885.png" alt="image"></p>
<p>ç¶åè¿è¡ç¨åºï¼æ¥çéåä¸­çæ¶æ¯ï¼ç¡®è®¤æ¯å¦åå¥æåã</p>
<h4>1.2.3 æ¥çæ¶æ¯åå¥ç»æ</h4>
<p><span style="background-color: rgba(251, 238, 184, 1)">ç¹å»éååï¼è¿å¥éåçè¯¦ç»ä¿¡æ¯ã</span></p>
<p><img src="https://img2024.cnblogs.com/blog/1868241/202512/1868241-20251202194417662-2092330832.png" alt="image"></p>
<p><span style="background-color: rgba(251, 238, 184, 1)">ç¹å»ï¼Get Message(s)ï¼è·åæå®æ¡æ°éåä¸­çæ¶æ¯ã</span></p>
<p><img src="https://img2024.cnblogs.com/blog/1868241/202512/1868241-20251202194655663-127466200.png" alt="image"></p>
<p><span style="background-color: rgba(251, 238, 184, 1)">å¦ä¸æ¯æ¶æ¯çè¯¦ç»ä¿¡æ¯ï¼</span></p>
<pre class="language-csharp highlighter-hljs"><code>Message 1
The server reported 4 messages remaining.

Exchange	amq.fanout
Routing Key	
Redelivered	â
Properties	
delivery_mode:	2
Payload
112 bytes
Encoding: string
{"Timestamp":"2025-12-02T19:25:27.5782940+08:00","Level":"Information","MessageTemplate":"åºç¨ç¨åºå¯å¨"}

Message 2
The server reported 3 messages remaining.

Exchange	amq.fanout
Routing Key	
Redelivered	â
Properties	
delivery_mode:	2
Payload
205 bytes
Encoding: string
{"Timestamp":"2025-12-02T19:25:28.2261865+08:00","Level":"Information","MessageTemplate":"ç¨æ· {@User} ç»å½æåï¼ID: {UserId}","Properties":{"User":{"Name":"alice","Role":"Admin"},"UserId":12345}}

Message 3
The server reported 2 messages remaining.

Exchange	amq.fanout
Routing Key	
Redelivered	â
Properties	
delivery_mode:	2
Payload
172 bytes
Encoding: string
{"Timestamp":"2025-12-02T19:25:28.2352913+08:00","Level":"Warning","MessageTemplate":"è¿æ¯ä¸ä¸ªè­¦åæ¥å¿ï¼åå«å±æ§ {RetryCount}","Properties":{"RetryCount":3}}

Message 4
The server reported 1 messages remaining.

Exchange	amq.fanout
Routing Key	
Redelivered	â
Properties	
delivery_mode:	2
Payload
266 bytes
Encoding: string
{"Timestamp":"2025-12-02T19:25:28.2368545+08:00","Level":"Error","MessageTemplate":"å¤çè¯·æ±æ¶åçéè¯¯ï¼è¯·æ±ID: {RequestId}","Exception":"System.InvalidOperationException: æ¨¡æå¼å¸¸","Properties":{"RequestId":"0003f90d-4b1e-4cd9-87ef-a875e31b3acb"}}

Message 5
The server reported 0 messages remaining.

Exchange	amq.fanout
Routing Key	
Redelivered	â
Properties	
delivery_mode:	2
Payload
118 bytes
Encoding: string
{"Timestamp":"2025-12-02T19:25:28.2457995+08:00","Level":"Information","MessageTemplate":"åºç¨ç¨åºå³å°å³é­"}</code></pre>
</div>
<div id="MySignature" role="contentinfo">
    <img src="https://images.cnblogs.com/cnblogs_com/blogs/683398/galleries/2417207/o_221441c4.png">
<p>æ¬ææ¥èªåå®¢å­ï¼ä½èï¼<a href="https://www.cnblogs.com/hnzhengfy/" target="_blank">æ©å­å®¶</a>ï¼æ¬¢è¿å¾®ä¿¡æ«ç å³æ³¨åä¸»ãæ©å­å®¶czzjãï¼æä»»ä½çé®æ¬¢è¿æ²éï¼å±åæé¿ï¼</p>
<div><p style="float: left;">è½¬è½½æ¬æè¯·æ³¨æåæé¾æ¥ï¼<a href="https://www.cnblogs.com/hnzhengfy/p/19191039/Serilog_MQSinks" target="_blank">https://www.cnblogs.com/hnzhengfy/p/19191039/Serilog_MQSinks</a></p></div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-04 19:55">2026-01-04 19:54</span>&nbsp;
<a href="https://www.cnblogs.com/hnzhengfy">æ©å­å®¶</a>&nbsp;
éè¯»(<span id="post_view_count">24</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19191039);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19191039', targetLink: 'https://www.cnblogs.com/hnzhengfy/p/19191039/Serilog_MQSinks', title: 'Serilog æ¥å¿åºç®åå®è·µï¼åï¼æ¶æ¯éå Sinksï¼.net8ï¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ MAFå¿«éå¥é¨ï¼10ï¼å¾ªç¯å·¥ä½æµ ]]></title>
    <link>https://www.cnblogs.com/edisontalk/p/-/quick-start-on-maf-chatper10</link>
    <guid>4c2d2e908970ef857d4ec51813e2615f</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/edisontalk/p/-/quick-start-on-maf-chatper10" title="åå¸äº 2026-01-04 18:30">
    <span role="heading" aria-level="2">MAFå¿«éå¥é¨ï¼10ï¼å¾ªç¯å·¥ä½æµ</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/381412/202601/381412-20260103192858891-1281339805.png" alt="MAFå¿«éå¥é¨ï¼10ï¼å¾ªç¯å·¥ä½æµ" class="desc_img">
        å¨å®éä¸å¡åºæ¯ä¸­ï¼å¾å¾éè¦å¨å·¥ä½æµä¸­è®¾ç½®ä¸äºå¾ªç¯ä¸èªæä¿®æ­£çæºå¶ï¼æå»ºåºä¸ä¸ªâçæâå®¡æ ¸âä¿®å¤âçé­ç¯ï¼æ¥ç¡®ä¿AIäº§åºçåå®¹è½å¤æ»¡è¶³ä¼ä¸çº§è´¨éæ åã
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p><span><span>å¤§å®¶å¥½ï¼ææ¯Edisonã</span></span></p>
<p><span><span>æè¿æä¸ç´å¨è·çå£æ°çã<a class="normal_text_link mp_article_text_link" href="https://www.cnblogs.com/sheng-jie/p/19200934" target="_blank" data-itemshowtype="0" data-linktype="2"><span>.NET+AIæºè½ä½å¼åè¿é¶</span></a><span>ãè¯¾ç¨å­¦ä¹ MAFçå¼åæå·§ï¼æå¼ºçæ¨èä½ ä¹ä¸è½¦è·æä¸èµ·åºåï¼</span></span></span></p>
<p><span><a class="normal_text_link mp_article_text_link" href="https://www.cnblogs.com/edisontalk/p/-/quick-start-on-maf-chatper09" target="_blank" data-itemshowtype="0" data-linktype="2"><span>ä¸ä¸ç¯</span></a><span>ï¼æä»¬å­¦ä¹ äºMAFä¸­å¦ä½è¿è¡switch-caseç±»åçå¤æ¡ä»¶è·¯ç±<span>ãæ¬ç¯ï¼æä»¬æ¥äºè§£ä¸å¨MAFä¸­å¦ä½å®ç°å¾ªç¯ï¼èªæä¿®æ­£ï¼å·¥ä½æµã</span></span></span></p>
<h1><strong>1 å¾ªç¯ä¸èªæä¿®æ­£</strong></h1>
<p><span><span><span><span data-pm-slice="0 0 []"><span><span>å¨å®éä¸å¡åºæ¯ä¸­ï¼å¾å¾éè¦å¨å·¥ä½æµä¸­è®¾ç½®ä¸äºå¾ªç¯ä¸èªæä¿®æ­£çæºå¶ï¼æå»ºåºä¸ä¸ªâ<span><strong>çæ</strong><span><span><strong>âå®¡æ ¸</strong><span data-pm-slice="0 0 []"><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;letter-spacing: 0.578px;text-align: left;margin: 8px;&quot;,&quot;data-pm-slice&quot;:&quot;6 3 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;span&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;outline: 0px;max-width: 100%;color: rgb(34, 34, 34);font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;orphans: 2;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;min-height: 1em;text-align: left;visibility: visible;font-family: system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;PingFang SC\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 15px;letter-spacing: 0.544px;caret-color: var(--weui-BRAND);box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span><strong>âä¿®å¤</strong><span><span>âçé­ç¯ï¼æ¥ç¡®ä¿AIäº§åºçåå®¹è½å¤æ»¡è¶³ä¼ä¸çº§è´¨éæ å<span>ã</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span><span><span><span data-pm-slice="0 0 []"><span><span>å¨MAFä¸­ï¼æä»¬å¯ä»¥ä½¿ç¨ Loop Edge å³ å¾ªç¯è¾¹ æ¥å®ç°è¿ä¸ªç®ç<span>ï¼å¦ä¸ä»£ç çæ®µæç¤ºï¼</span></span></span></span></span></span></span></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">var</span> workflow = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> WorkflowBuilder(draftExecutor)
    .AddEdge(draftExecutor, qcExecutor)
    .AddEdge(qcExecutor, draftExecutor)
    .WithOutputFrom(qcExecutor)
    .Build();</span></pre>
</div>
<p><span><span><span><span data-pm-slice="0 0 []"><span><span><span>å¯ä»¥çå°ï¼æä»¬æ·»å äºä¸¤ä¸ªè¾¹å³èå³ç³»ï¼è¿æ ·å°±å½¢æäºä¸ä¸ªå¾ªç¯ã</span></span></span></span></span></span></span></p>
<h1><strong>2 å¾ªç¯å·¥ä½æµå®éªæ¡ä¾</strong></h1>
<p><span><span><span><span data-pm-slice="0 0 []"><span><span><span><span>åè®¾æä»¬æ¯ä¸ä¸ªçµåå¹³å°çå®¢æä¸­å¿ï¼æ¯å¤©éè¦å¤çäº§ççå¤§éå®¢æå·¥åè¿è¡åå¤ãè¿éæä»¬å¸æAIå©æåå¸®æä»¬çæä¸ä¸ªåå¤èç¨¿ï¼ç¶åç»è¿å¤ç»´åº¦çè´¨æ£ï¼ç¤¼è²åº¦ãåç¡®æ§ãåè§æ§ï¼ï¼ä¸åæ ¼çåèªå¨è¿è¡æ¹è¿ï¼ç´å°æ»¡è¶³æ å æèæ¯ è½¬ç»äººå·¥å¤çã</span><span><span>å æ­¤ï¼æä»¬çç®æ æ¯ï¼éç½®ä¸ä¸ªèªå¨è¿­ä»£çå¾ªç¯â<span data-pm-slice="2 3 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;letter-spacing: 0.578px;text-align: left;margin: 8px;&quot;,&quot;data-pm-slice&quot;:&quot;6 3 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span><span>çæ<span><span>âå®¡æ ¸<span data-pm-slice="0 0 []"><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;letter-spacing: 0.578px;text-align: left;margin: 8px;&quot;,&quot;data-pm-slice&quot;:&quot;6 3 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;span&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;outline: 0px;max-width: 100%;color: rgb(34, 34, 34);font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;orphans: 2;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;min-height: 1em;text-align: left;visibility: visible;font-family: system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;PingFang SC\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 15px;letter-spacing: 0.544px;caret-color: var(--weui-BRAND);box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span>âä¿®å¤âï¼è¾¾æ å³å¯éåºå¾ªç¯ï¼å¦åè½¬äººå·¥å¤çã</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<h3><strong><span><span>2.1 å³é®ä¾èµåå¼å¥</span></span></strong></h3>
<p><span><span><span><span data-pm-slice="0 0 []"><span><span><span><span>å¨ä»å¤©çè¿ä¸ªæ¡ä¾ä¸­ï¼æä»¬ä»ç¶åå»ºäºä¸ä¸ª.NETæ§å¶å°åºç¨ç¨åºï¼å®è£äºä»¥ä¸NuGetåï¼</span></span></span></span></span></span></span></span></p>
<ul class="list-paddingleft-1">
<li><span>Microsoft.Agents.AI.OpenAI</span></li>
<li><span>Microsoft.Agents.AI.Workflows</span></li>
<li><span>Microsoft.Extensions.AI.OpenAI</span></li>
</ul>
<h3><span><span>2.2 å®ä¹æ°æ®ä¼ è¾æ¨¡å</span></span></h3>
<p><span><span>é¦åï¼æä»¬å®ä¹ä¸ä¸å¨è¿ä¸ªå·¥ä½æµä¸­éè¦çæä¼ éçæ°æ®æ¨¡åï¼</span></span></p>
<p><span><span>ï¼1ï¼QualityReportDto ï¼è´¨æ£ç»æè¾åºæ¨¡åDTO</span></span></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> è´¨æ£ç»æçç»æåè¾åºæ¨¡å</span>
<span style="color: rgba(0, 0, 255, 1)">internal</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> QualityReportDto
{
    [JsonPropertyName(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">politenessScore</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">)]
    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">int</span> PolitenessScore { <span style="color: rgba(0, 0, 255, 1)">get</span>; <span style="color: rgba(0, 0, 255, 1)">set</span><span style="color: rgba(0, 0, 0, 1)">; }
    [JsonPropertyName(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">accuracyScore</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">)]
    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">int</span> AccuracyScore { <span style="color: rgba(0, 0, 255, 1)">get</span>; <span style="color: rgba(0, 0, 255, 1)">set</span><span style="color: rgba(0, 0, 0, 1)">; }
    [JsonPropertyName(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">compliancePassed</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">)]
    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">bool</span> CompliancePassed { <span style="color: rgba(0, 0, 255, 1)">get</span>; <span style="color: rgba(0, 0, 255, 1)">set</span><span style="color: rgba(0, 0, 0, 1)">; }
    [JsonPropertyName(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">issues</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">)]
    </span><span style="color: rgba(0, 0, 255, 1)">public</span> List&lt;QualityIssueDto&gt; Issues { <span style="color: rgba(0, 0, 255, 1)">get</span>; <span style="color: rgba(0, 0, 255, 1)">set</span>; } = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)">();
}
</span><span style="color: rgba(0, 0, 255, 1)">internal</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> QualityIssueDto
{
    [JsonPropertyName(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">type</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">)]
    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">string</span> Type { <span style="color: rgba(0, 0, 255, 1)">get</span>; <span style="color: rgba(0, 0, 255, 1)">set</span>; } = <span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)">.Empty;
    [JsonPropertyName(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">description</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">)]
    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">string</span> Description { <span style="color: rgba(0, 0, 255, 1)">get</span>; <span style="color: rgba(0, 0, 255, 1)">set</span>; } = <span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)">.Empty;
    [JsonPropertyName(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">scoreImpact</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">)]
    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">int</span> ScoreImpact { <span style="color: rgba(0, 0, 255, 1)">get</span>; <span style="color: rgba(0, 0, 255, 1)">set</span><span style="color: rgba(0, 0, 0, 1)">; }
}</span></pre>
</div>
<p><span><span>ï¼2ï¼ä¸äºå¼å¯¹è±¡ï¼ä¸èµè¿°äº</span></span></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">internal</span><span style="color: rgba(0, 0, 0, 1)"> record ReplyDraft(
    </span><span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)"> TicketId, 
    </span><span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)"> Content, 
    </span><span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> Attempt);
</span><span style="color: rgba(0, 0, 255, 1)">internal</span><span style="color: rgba(0, 0, 0, 1)"> record TicketRequest(
    </span><span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)"> Id, 
    </span><span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)"> Query, 
    </span><span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)"> Category, 
    </span><span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)"> Priority);
</span><span style="color: rgba(0, 0, 255, 1)">internal</span><span style="color: rgba(0, 0, 0, 1)"> record TicketOutcome(
    </span><span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)"> TicketId, 
    </span><span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)"> Status, 
    </span><span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> Attempts, 
    QualityReport FinalReport);
</span><span style="color: rgba(0, 0, 255, 1)">internal</span> <span style="color: rgba(0, 0, 255, 1)">sealed</span><span style="color: rgba(0, 0, 0, 1)"> record QualityScoreTimelineItem(
    </span><span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> Attempt,
    </span><span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> PolitenessScore,
    </span><span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> AccuracyScore,
    </span><span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)"> ComplianceStatus);
</span><span style="color: rgba(0, 0, 255, 1)">internal</span><span style="color: rgba(0, 0, 0, 1)"> record QualityIssue(
    </span><span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)"> Type, 
    </span><span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)"> Description, 
    </span><span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> ScoreImpact);
</span><span style="color: rgba(0, 0, 255, 1)">internal</span><span style="color: rgba(0, 0, 0, 1)"> record QualityReport(
    </span><span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)"> TicketId, 
    </span><span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> PolitenessScore, 
    </span><span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> AccuracyScore, 
    </span><span style="color: rgba(0, 0, 255, 1)">bool</span><span style="color: rgba(0, 0, 0, 1)"> CompliancePassed, 
    IReadOnlyList</span>&lt;QualityIssue&gt; Issues);</pre>
</div>
<p><span><span>ï¼3ï¼ä¸äºå¸¸éï¼ç¨äºå®ä¹ä¸äºéå¼æ å</span></span></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">static</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> QualityCheckConstants
{
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> è´¨æ£æ åï¼ç¤¼è²åº¦ â¥ 85ï¼åç¡®æ§ â¥ 90ï¼åè§æ§å¿é¡» 100%
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æ³¨æï¼éå¼è®¾ç½®è¾é«ï¼éåç¬¬ä¸æ¬¡çæç®åçæ¬ï¼ç¡®ä¿è½ä½ç°å¾ªç¯æ¹è¿è¿ç¨</span>
    <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">int</span> PolitenessThreshold = <span style="color: rgba(128, 0, 128, 1)">85</span><span style="color: rgba(0, 0, 0, 1)">;
    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">int</span> AccuracyThreshold = <span style="color: rgba(128, 0, 128, 1)">90</span><span style="color: rgba(0, 0, 0, 1)">;
}

</span><span style="color: rgba(0, 0, 255, 1)">internal</span> <span style="color: rgba(0, 0, 255, 1)">enum</span><span style="color: rgba(0, 0, 0, 1)"> QualityCheckSignal
{
    Init,
    Revise
}</span></pre>
</div>
<h3><span><span>2.3 å®ä¹èªå®ä¹å·¥ä½æµäºä»¶</span></span></h3>
<p><span><span>å¶æ¬¡ï¼æä»¬å®ä¹ä¸ä¸å¨è¿ä¸ªå·¥ä½æµä¸­éè¦äº§ççèªå®ä¹äºä»¶ï¼</span></span></p>
<p>ï¼1ï¼AdaptiveQualityScoreEvent ï¼è´¨æ£è¯åå·²å®æäºä»¶</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">internal</span> <span style="color: rgba(0, 0, 255, 1)">sealed</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> AdaptiveQualityScoreEvent : WorkflowEvent
{
    </span><span style="color: rgba(0, 0, 255, 1)">public</span> AdaptiveQualityScoreEvent(<span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)"> ticketId, 
        </span><span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> attempt, 
        </span><span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> politenessScore, 
        </span><span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> accuracyScore, 
        </span><span style="color: rgba(0, 0, 255, 1)">bool</span><span style="color: rgba(0, 0, 0, 1)"> compliancePassed)
        : </span><span style="color: rgba(0, 0, 255, 1)">base</span>(<span style="color: rgba(0, 0, 255, 1)">new</span> { TicketId = ticketId, Attempt = attempt, PolitenessScore = politenessScore, AccuracyScore = accuracyScore, CompliancePassed =<span style="color: rgba(0, 0, 0, 1)"> compliancePassed })
    {
    }
}</span></pre>
</div>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; text-transform: none; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-align: left; line-height: 1.75em; margin-top: 8px; margin-bottom: 8px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">ï¼2ï¼AdaptiveMaxAttemptsReachedEvent ï¼è´¨æ£è¶è¿æå¤§æ¬¡æ°äºä»¶</span></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">internal</span> <span style="color: rgba(0, 0, 255, 1)">sealed</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> AdaptiveMaxAttemptsReachedEvent : WorkflowEvent
{
    </span><span style="color: rgba(0, 0, 255, 1)">public</span> AdaptiveMaxAttemptsReachedEvent(<span style="color: rgba(0, 0, 255, 1)">string</span> ticketId, <span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> maxAttempts)
        : </span><span style="color: rgba(0, 0, 255, 1)">base</span>(<span style="color: rgba(0, 0, 255, 1)">new</span> { TicketId = ticketId, MaxAttempts =<span style="color: rgba(0, 0, 0, 1)"> maxAttempts })
    {
    }
}</span></pre>
</div>
<h3><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;p&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;background-color: rgb(255, 255, 255);outline: 0px;visibility: visible;line-height: 1.75em;margin-top: 16px;margin-bottom: 16px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span>2.4 å®ä¹Agents</span></span></h3>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;text-transform: none;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;text-align: left;line-height: 1.75em;margin-bottom: 8px;margin-top: 8px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">ï¼1ï¼<strong>åå¤çæ</strong>ï¼æ¨¡</span>è¿ééè¿æ§è¡å¨çæ¹å¼åè£¹ä¸ä¸ªåå¤çæçAgentï¼åè®¾å¶ç¨äºå®¢æå·¥åçèªå¨åå¤ï¼</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">internal</span> <span style="color: rgba(0, 0, 255, 1)">sealed</span> <span style="color: rgba(0, 0, 255, 1)">class</span> AdaptiveReplyDraftExecutor : Executor&lt;QualityCheckSignal&gt;<span style="color: rgba(0, 0, 0, 1)">
{
    </span><span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">readonly</span><span style="color: rgba(0, 0, 0, 1)"> TicketRequest _ticket;
    </span><span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">readonly</span><span style="color: rgba(0, 0, 0, 1)"> IChatClient _chatClient;

    </span><span style="color: rgba(0, 0, 255, 1)">public</span> AdaptiveReplyDraftExecutor(TicketRequest ticket, IChatClient chatClient) : <span style="color: rgba(0, 0, 255, 1)">base</span>(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">AdaptiveReplyDraft</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">)
    {
        _ticket </span>=<span style="color: rgba(0, 0, 0, 1)"> ticket;
        _chatClient </span>=<span style="color: rgba(0, 0, 0, 1)"> chatClient;
    }

    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">override</span> <span style="color: rgba(0, 0, 255, 1)">async</span> ValueTask HandleAsync(QualityCheckSignal message, IWorkflowContext context, CancellationToken cancellationToken = <span style="color: rgba(0, 0, 255, 1)">default</span><span style="color: rgba(0, 0, 0, 1)">)
    {
        </span><span style="color: rgba(0, 0, 255, 1)">int</span> attempt = <span style="color: rgba(0, 0, 255, 1)">await</span> context.ReadOrInitStateAsync(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">attempt</span><span style="color: rgba(128, 0, 0, 1)">"</span>, () =&gt; <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">, cancellationToken);
        attempt</span>++<span style="color: rgba(0, 0, 0, 1)">;
        </span><span style="color: rgba(0, 0, 255, 1)">await</span> context.QueueStateUpdateAsync(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">attempt</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, attempt, cancellationToken);

        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ä½¿ç¨ AI çæå®¢æåå¤ï¼æ¸è¿å¼çæç­ç¥ï¼</span>
        <span style="color: rgba(0, 0, 255, 1)">var</span> prompt = attempt == <span style="color: rgba(128, 0, 128, 1)">1</span>
            ? $<span style="color: rgba(128, 0, 0, 1)">"""
</span><span style="color: rgba(0, 0, 0, 1)">            ä½ æ¯ä¸ä½çµåå®¢æãè¯·éå¯¹ä»¥ä¸å®¢æ·é®é¢çæä¸æ¡ç®ç­åå¤ï¼å»æä¿æç®ç­ãç¼ºå°ç¤¼è²ç¨è¯­ï¼ï¼

            å®¢æ·é®é¢ï¼{_ticket.Query}
            äº§åç±»å«ï¼{_ticket.Category}

            è¦æ±ï¼
            </span><span style="color: rgba(128, 0, 128, 1)">1</span>. åªç¨1-<span style="color: rgba(0, 0, 0, 1)">2å¥è¯åç­ï¼ä¸è¦ç§°å¼è¯­åæè°¢è¯­
            </span><span style="color: rgba(128, 0, 128, 1)">2</span><span style="color: rgba(0, 0, 0, 1)">. åªè¯´ç»è®ºï¼ä¸æä¾å·ä½å¤çæ¶é´
            </span><span style="color: rgba(128, 0, 128, 1)">3</span><span style="color: rgba(0, 0, 0, 1)">. å­æ°æ§å¶å¨30å­ä»¥å

            ç´æ¥è¿ååå¤åå®¹ï¼ä¸è¦æ·»å ä»»ä½åç¼æè¯´æã
            </span><span style="color: rgba(128, 0, 0, 1)">"""
</span>            : $<span style="color: rgba(128, 0, 0, 1)">"""
</span><span style="color: rgba(0, 0, 0, 1)">            ä½ æ¯ä¸ä½ä¸ä¸ççµåå®¢æãè¯·éå¯¹ä»¥ä¸å®¢æ·é®é¢çæä¸æ¡æ¹è¿åçåå¤ï¼

            å®¢æ·é®é¢ï¼{_ticket.Query}
            äº§åç±»å«ï¼{_ticket.Category}
            ä¼åçº§ï¼{_ticket.Priority}

            è¦æ±ï¼
            </span><span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">. è¯­æ°äº²åãä¸ä¸ï¼ä½¿ç¨æ°å½çç§°å¼åæè°¢è¯­
            </span><span style="color: rgba(128, 0, 128, 1)">2</span><span style="color: rgba(0, 0, 0, 1)">. æä¾å·ä½çè§£å³æ¹æ¡æå¤çæ¶é´
            </span><span style="color: rgba(128, 0, 128, 1)">3</span><span style="color: rgba(0, 0, 0, 1)">. ç¬¦åå®¢æè§èï¼ä¸åå«ææè¯
            </span><span style="color: rgba(128, 0, 128, 1)">4</span>. å­æ°æ§å¶å¨80-<span style="color: rgba(0, 0, 0, 1)">100å­

            ç´æ¥è¿ååå¤åå®¹ï¼ä¸è¦æ·»å ä»»ä½åç¼æè¯´æã
            </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(128, 0, 0, 1)">;</span>

        <span style="color: rgba(0, 0, 255, 1)">var</span> response = <span style="color: rgba(0, 0, 255, 1)">await</span><span style="color: rgba(0, 0, 0, 1)"> _chatClient.GetResponseAsync(prompt, cancellationToken: cancellationToken);
        </span><span style="color: rgba(0, 0, 255, 1)">var</span> content = response.Text ?? <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">æ±æ­ï¼æä»¬ä¼å°½å¿«å¤çæ¨çé®é¢ã</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">;

        Console.WriteLine($</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">âï¸ ç¬¬ {attempt} æ¬¡çæåå¤èç¨¿ (ç­ç¥: {(attempt == 1 ? </span><span style="color: rgba(128, 0, 0, 1)">"</span>ç®åç<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)"> : </span><span style="color: rgba(128, 0, 0, 1)">"</span>å®æ´ç<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">)})</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
        Console.WriteLine($</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ð åå¤åå®¹ï¼{content}</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);

        </span><span style="color: rgba(0, 0, 255, 1)">var</span> draft = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> ReplyDraft(_ticket.Id, content, attempt);
        </span><span style="color: rgba(0, 0, 255, 1)">await</span> context.SendMessageAsync(draft, targetId: <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">AdaptiveQualityCheck</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, cancellationToken);
    }
}</span></pre>
</div>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;text-transform: none;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;text-align: left;line-height: 1.75em;margin-bottom: 8px;margin-top: 8px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">ï¼2ï¼</span><strong><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;text-transform: none;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;text-align: left;line-height: 1.75em;margin-bottom: 8px;margin-top: 8px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span><span>åå®¹è´¨æ£</span></span></span></strong><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;text-transform: none;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;text-align: left;line-height: 1.75em;margin-bottom: 8px;margin-top: 8px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">ï¼æ¨¡æçæåå®¹çè´¨æ£è¿ç¨ï¼éè¿AIå¤§æ¨¡åå¯¹åå®¹è¿è¡å¤ç»´åº¦çè´¨æ£è¯åï¼åªæéè¿æ åæç®ç»æå¾ªç¯ï¼å¦åç»§ç»­åé¦ç»ä¸ä¸ä¸ªAgentè¿è¡æ¹è¿ã</span></p>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;text-transform: none;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;text-align: left;line-height: 1.75em;margin-bottom: 8px;margin-top: 8px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">NOTEï¼åªæè´¨æ£Agentæè½å³å®æ¯å¦ç»æå·¥ä½æµï¼</span></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">internal</span> <span style="color: rgba(0, 0, 255, 1)">sealed</span> <span style="color: rgba(0, 0, 255, 1)">class</span> AdaptiveQualityCheckExecutor : Executor&lt;ReplyDraft&gt;<span style="color: rgba(0, 0, 0, 1)">
{
    </span><span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">readonly</span> <span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> _politenessThreshold;
    </span><span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">readonly</span> <span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> _accuracyThreshold;
    </span><span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">readonly</span> <span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> _maxAttempts;
    </span><span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">readonly</span><span style="color: rgba(0, 0, 0, 1)"> IChatClient _chatClient;

    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> é»è®¤æå¤§å°è¯æ¬¡æ°ä¸º5æ¬¡</span>
    <span style="color: rgba(0, 0, 255, 1)">public</span> AdaptiveQualityCheckExecutor(<span style="color: rgba(0, 0, 255, 1)">int</span> politenessThreshold, <span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> accuracyThreshold, IChatClient chatClient)
        : </span><span style="color: rgba(0, 0, 255, 1)">this</span>(politenessThreshold, accuracyThreshold, <span style="color: rgba(128, 0, 128, 1)">5</span><span style="color: rgba(0, 0, 0, 1)">, chatClient)
    {
    }

    </span><span style="color: rgba(0, 0, 255, 1)">public</span> AdaptiveQualityCheckExecutor(<span style="color: rgba(0, 0, 255, 1)">int</span> politenessThreshold, <span style="color: rgba(0, 0, 255, 1)">int</span> accuracyThreshold, <span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> maxAttempts, IChatClient chatClient)
        : </span><span style="color: rgba(0, 0, 255, 1)">base</span>(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">AdaptiveQualityCheck</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">)
    {
        _politenessThreshold </span>=<span style="color: rgba(0, 0, 0, 1)"> politenessThreshold;
        _accuracyThreshold </span>=<span style="color: rgba(0, 0, 0, 1)"> accuracyThreshold;
        _maxAttempts </span>=<span style="color: rgba(0, 0, 0, 1)"> maxAttempts;
        _chatClient </span>=<span style="color: rgba(0, 0, 0, 1)"> chatClient;
    }

    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">override</span> <span style="color: rgba(0, 0, 255, 1)">async</span> ValueTask HandleAsync(ReplyDraft draft, IWorkflowContext context, CancellationToken cancellationToken = <span style="color: rgba(0, 0, 255, 1)">default</span><span style="color: rgba(0, 0, 0, 1)">)
    {
        </span><span style="color: rgba(0, 0, 255, 1)">int</span> attempt = <span style="color: rgba(0, 0, 255, 1)">await</span> context.ReadOrInitStateAsync(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">attempt</span><span style="color: rgba(128, 0, 0, 1)">"</span>, () =&gt; <span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">, cancellationToken);

        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ä½¿ç¨ AI è¿è¡å¤ç»´åº¦è´¨æ£è¯åï¼ç»æåè¾åºï¼ä¸¥æ ¼æ åï¼</span>
        <span style="color: rgba(0, 0, 255, 1)">var</span> prompt = $<span style="color: rgba(128, 0, 0, 1)">"""
</span>        ä½ æ¯ä¸ä½ä¸¥æ ¼çå®¢æè´¨æ£ä¸å®¶ãè¯·å¯¹ä»¥ä¸å®¢æåå¤è¿è¡å¤ç»´åº¦è¯åï¼<span style="color: rgba(128, 0, 128, 1)">0</span>-<span style="color: rgba(0, 0, 0, 1)">100åï¼ï¼

        åå¤åå®¹ï¼{draft.Content}

        è¯åç»´åº¦åä¸¥æ ¼æ åï¼
        </span><span style="color: rgba(128, 0, 128, 1)">1</span>. ç¤¼è²åº¦ï¼<span style="color: rgba(128, 0, 128, 1)">0</span>-<span style="color: rgba(128, 0, 128, 1)">100</span><span style="color: rgba(0, 0, 0, 1)">ï¼ï¼å¿é¡»åå«ç§°å¼è¯­ï¼æ¨ãäº²ï¼ãæè°¢è¯­ï¼æè°¢ãè°¢è°¢ï¼ãç»æè¯­ï¼ç¥ãæå¾ï¼ç­ï¼è¯­æ°äº²åæ¸©æ
           </span>-<span style="color: rgba(0, 0, 0, 1)"> ç¼ºå°ä»»ä½ä¸é¡¹æ£20å
           </span>- è¯­æ°çç¡¬ãæºæ¢°æ£10-<span style="color: rgba(0, 0, 0, 1)">30å

        </span><span style="color: rgba(128, 0, 128, 1)">2</span>. åç¡®æ§ï¼<span style="color: rgba(128, 0, 128, 1)">0</span>-<span style="color: rgba(128, 0, 128, 1)">100</span><span style="color: rgba(0, 0, 0, 1)">ï¼ï¼å¿é¡»æä¾å·ä½çè§£å³æ¹æ¡ãæç¡®çå¤çæ¶é´æææçåç»­æ­¥éª¤
           </span>- åªè¯´<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ä¼å¤ç</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">ä½æ å·ä½æ¹æ¡æ£30å
           </span>-<span style="color: rgba(0, 0, 0, 1)"> æ æç¡®æ¶é´æ¿è¯ºæ£20å
           </span>- ä¿¡æ¯è¿äºç¬¼ç»æ£10-<span style="color: rgba(0, 0, 0, 1)">20å

        </span><span style="color: rgba(128, 0, 128, 1)">3</span>. åè§æ§ï¼éè¿/<span style="color: rgba(0, 0, 0, 1)">ä¸éè¿ï¼ï¼ä¸å¾åå«ææè¯ãä¸å½è¡¨è¿°ãæ¨è¯¿è´£ä»»çè¯è¯­
           </span>- åç°ä»»ä½ææè¯æä¸å½è¡¨è¿°ç´æ¥å¤å®ä¸º<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ä¸éè¿</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">

        è¯·å¯¹æ¯ä¸ªç»´åº¦è¿è¡ä¸¥æ ¼è¯åï¼å¹¶å¨issueså­æ®µä¸­ååºææåç°çé®é¢ã
        </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(128, 0, 0, 1)">;</span>

        <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> â­ ä½¿ç¨ç»æåè¾åºï¼GetResponseAsync&lt;T&gt; èªå¨çæ JSON Schema å¹¶ååºåå</span>
        <span style="color: rgba(0, 0, 255, 1)">var</span> response = <span style="color: rgba(0, 0, 255, 1)">await</span> _chatClient.GetResponseAsync&lt;QualityReportDto&gt;<span style="color: rgba(0, 0, 0, 1)">(prompt, cancellationToken: cancellationToken);
        </span><span style="color: rgba(0, 0, 255, 1)">var</span> reportDto =<span style="color: rgba(0, 0, 0, 1)"> response.Result;

        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> è½¬æ¢ä¸ºä¸å¡æ¨¡å</span>
        <span style="color: rgba(0, 0, 255, 1)">var</span> issues = reportDto.Issues.Select(i =&gt; <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> QualityIssue(i.Type, i.Description, i.ScoreImpact)).ToList();
        </span><span style="color: rgba(0, 0, 255, 1)">var</span> report = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> QualityReport(draft.TicketId, reportDto.PolitenessScore, reportDto.AccuracyScore, reportDto.CompliancePassed, issues);

        </span><span style="color: rgba(0, 0, 255, 1)">await</span> context.AddEventAsync(<span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> AdaptiveQualityScoreEvent(draft.TicketId, attempt, reportDto.PolitenessScore, reportDto.AccuracyScore, reportDto.CompliancePassed), cancellationToken);

        </span><span style="color: rgba(0, 0, 255, 1)">if</span> (reportDto.PolitenessScore &gt;=<span style="color: rgba(0, 0, 0, 1)"> _politenessThreshold 
            </span>&amp;&amp; reportDto.AccuracyScore &gt;=<span style="color: rgba(0, 0, 0, 1)"> _accuracyThreshold 
            </span>&amp;&amp;<span style="color: rgba(0, 0, 0, 1)"> reportDto.CompliancePassed)
        {
            </span><span style="color: rgba(0, 0, 255, 1)">await</span> context.YieldOutputAsync(<span style="color: rgba(0, 0, 255, 1)">new</span> TicketOutcome(draft.TicketId, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Approved</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, attempt, report), cancellationToken);
        }
        </span><span style="color: rgba(0, 0, 255, 1)">else</span> <span style="color: rgba(0, 0, 255, 1)">if</span> (attempt &gt;=<span style="color: rgba(0, 0, 0, 1)"> _maxAttempts)
        {
            </span><span style="color: rgba(0, 0, 255, 1)">await</span> context.AddEventAsync(<span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> AdaptiveMaxAttemptsReachedEvent(draft.TicketId, _maxAttempts), cancellationToken);
            </span><span style="color: rgba(0, 0, 255, 1)">await</span> context.RequestHaltAsync();<span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">è´¨æ£å¤±è´¥ï¼å·²è¾¾å°æå¤§å°è¯æ¬¡æ°</span>
<span style="color: rgba(0, 0, 0, 1)">        }
        </span><span style="color: rgba(0, 0, 255, 1)">else</span><span style="color: rgba(0, 0, 0, 1)">
        {
            </span><span style="color: rgba(0, 0, 255, 1)">await</span> context.QueueStateUpdateAsync(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">attempt</span><span style="color: rgba(128, 0, 0, 1)">"</span>, attempt + <span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">, cancellationToken);

            </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> åéè´¨æ£æ¥åå°æ¹è¿ç¯è</span>
            <span style="color: rgba(0, 0, 255, 1)">await</span> context.SendMessageAsync(report, targetId: <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">IntelligentImprove</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, cancellationToken);
        }
    }
}</span></pre>
</div>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;text-transform: none;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;text-align: left;line-height: 1.75em;margin-bottom: 8px;margin-top: 8px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">ï¼3ï¼</span><strong><strong><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;text-transform: none;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;text-align: left;line-height: 1.75em;margin-bottom: 8px;margin-top: 8px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span><span>åå®¹æ¹è¿</span></span></span></strong></strong><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;text-transform: none;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;text-align: left;line-height: 1.75em;margin-bottom: 8px;margin-top: 8px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">ï¼æ¨¡ææ¶å°è´¨æ£çè¯ååé¦åå¯¹åå®¹è¿è¡æ¹è¿ã</span></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">internal</span> <span style="color: rgba(0, 0, 255, 1)">sealed</span> <span style="color: rgba(0, 0, 255, 1)">class</span> IntelligentImproveExecutor : Executor&lt;QualityReport&gt;<span style="color: rgba(0, 0, 0, 1)">
{
    </span><span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">readonly</span><span style="color: rgba(0, 0, 0, 1)"> TicketRequest _ticket;
    </span><span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">readonly</span><span style="color: rgba(0, 0, 0, 1)"> IChatClient _chatClient;

    </span><span style="color: rgba(0, 0, 255, 1)">public</span> IntelligentImproveExecutor(TicketRequest ticket, IChatClient chatClient) : <span style="color: rgba(0, 0, 255, 1)">base</span>(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">IntelligentImprove</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">)
    {
        _ticket </span>=<span style="color: rgba(0, 0, 0, 1)"> ticket;
        _chatClient </span>=<span style="color: rgba(0, 0, 0, 1)"> chatClient;
    }

    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">override</span> <span style="color: rgba(0, 0, 255, 1)">async</span> ValueTask HandleAsync(QualityReport report, IWorkflowContext context, CancellationToken cancellationToken = <span style="color: rgba(0, 0, 255, 1)">default</span><span style="color: rgba(0, 0, 0, 1)">)
    {
        </span><span style="color: rgba(0, 0, 255, 1)">int</span> attempt = <span style="color: rgba(0, 0, 255, 1)">await</span> context.ReadOrInitStateAsync(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">attempt</span><span style="color: rgba(128, 0, 0, 1)">"</span>, () =&gt; <span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">, cancellationToken);

        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æå»ºæ¹è¿æç¤ºè¯ï¼åºäºè´¨æ£åé¦</span>
        <span style="color: rgba(0, 0, 255, 1)">var</span> issuesSummary = <span style="color: rgba(0, 0, 255, 1)">string</span>.Join(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">\n</span><span style="color: rgba(128, 0, 0, 1)">"</span>, report.Issues.Select(i =&gt; $<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">- {i.Type}: {i.Description}</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">));

        </span><span style="color: rgba(0, 0, 255, 1)">var</span> prompt = $<span style="color: rgba(128, 0, 0, 1)">"""
</span><span style="color: rgba(0, 0, 0, 1)">        ä½ æ¯ä¸ä½å®¢æä¼åä¸å®¶ãè¯·æ ¹æ®ä»¥ä¸è´¨æ£åé¦ï¼æ¹è¿å®¢æåå¤åå®¹ï¼

        åå§é®é¢ï¼{_ticket.Query}
        äº§åç±»å«ï¼{_ticket.Category}
        ä¼åçº§ï¼{_ticket.Priority}

        å½åè¯åï¼
        </span>- ç¤¼è²åº¦ï¼{report.PolitenessScore}/<span style="color: rgba(128, 0, 128, 1)">100</span><span style="color: rgba(0, 0, 0, 1)"> (è¦æ±â¥{QualityCheckConstants.PolitenessThreshold})
        </span>- åç¡®æ§ï¼{report.AccuracyScore}/<span style="color: rgba(128, 0, 128, 1)">100</span><span style="color: rgba(0, 0, 0, 1)"> (è¦æ±â¥{QualityCheckConstants.AccuracyThreshold})
        </span>- åè§æ§ï¼{(report.CompliancePassed ? <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">éè¿</span><span style="color: rgba(128, 0, 0, 1)">"</span> : <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ä¸éè¿</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">)}

        åç°çé®é¢ï¼
        {issuesSummary}

        è¯·çæä¸æ¡æ¹è¿åçå®¢æåå¤ï¼éå¯¹æ§è§£å³ä¸è¿°é®é¢ï¼
        </span><span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">. å¦æç¤¼è²åº¦ä¸è¶³ï¼å¢å ç§°å¼è¯­ãæè°¢è¯­ï¼ä½¿ç¨æ´äº²åçè¡¨è¿°
        </span><span style="color: rgba(128, 0, 128, 1)">2</span><span style="color: rgba(0, 0, 0, 1)">. å¦æåç¡®æ§ä¸è¶³ï¼è¡¥åå·ä½çè§£å³æ¹æ¡ãå¤çæ¶é´ãåç»­æ­¥éª¤
        </span><span style="color: rgba(128, 0, 128, 1)">3</span><span style="color: rgba(0, 0, 0, 1)">. å¦æåè§æ§ä¸éè¿ï¼ç§»é¤ææè¯ï¼è§èè¡¨è¿°
        </span><span style="color: rgba(128, 0, 128, 1)">4</span>. å­æ°æ§å¶å¨80-<span style="color: rgba(0, 0, 0, 1)">100å­

        ç´æ¥è¿åæ¹è¿åçåå¤åå®¹ï¼ä¸è¦æ·»å ä»»ä½åç¼æè¯´æã
        </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(128, 0, 0, 1)">;</span>

        <span style="color: rgba(0, 0, 255, 1)">var</span> response = <span style="color: rgba(0, 0, 255, 1)">await</span><span style="color: rgba(0, 0, 0, 1)"> _chatClient.GetResponseAsync(prompt, cancellationToken: cancellationToken);
        </span><span style="color: rgba(0, 0, 255, 1)">var</span> improvedContent = response.Text ?? <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">æ±æ­ï¼æä»¬ä¼å°½å¿«å¤çæ¨çé®é¢ã</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">;

        </span><span style="color: rgba(0, 0, 255, 1)">await</span> context.AddEventAsync(<span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> LoopProgressEvent(_ticket.Id, attempt, 
            report.PolitenessScore, report.AccuracyScore, 
            report.CompliancePassed, </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Improve</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">), cancellationToken);
        Console.WriteLine($</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ð§ ç¬¬ {attempt} æ¬¡æºè½æ¹è¿å®æ</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
        Console.WriteLine($</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ð æ¹è¿ååå®¹ï¼{improvedContent}</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);

        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> è§¦åä¸ä¸æ¬¡çæï¼ä½¿ç¨æ¹è¿åçåå®¹ä½ä¸ºä¸ä¸æï¼</span>
        <span style="color: rgba(0, 0, 255, 1)">await</span> context.SendMessageAsync(QualityCheckSignal.Revise, targetId: <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">AdaptiveReplyDraft</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, cancellationToken);
    }
}</span></pre>
</div>
<h3>2.5 æå»ºå·¥ä½æµ</h3>
<p>ç°å¨ä¸äºä¿±å¤ï¼åªæ¬ ä¸ä¸ªWorkflowï¼ç°å¨Let's do it!</p>
<p><strong>Step1: è·åChatClient</strong></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">var</span> chatClient = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> OpenAIClient(
        </span><span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> ApiKeyCredential(openAIProvider.ApiKey),
        </span><span style="color: rgba(0, 0, 255, 1)">new</span> OpenAIClientOptions { Endpoint = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> Uri(openAIProvider.Endpoint) })
    .GetChatClient(openAIProvider.ModelId)
    .AsIChatClient();</span></pre>
</div>
<p><strong><span><span>Step2<span>: å®ä¾åèªå®ä¹Agent &amp; Executors</span></span></span></strong></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">var</span> ticket = <span style="color: rgba(0, 0, 255, 1)">new</span> TicketRequest(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">TKT-2025-003</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ä¼åç§¯åä¸ºä»ä¹çªç¶æ¸é¶äºï¼</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">è´¦æ·é®é¢</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Low</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">)
</span><span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">int</span> maxAttempts = <span style="color: rgba(128, 0, 128, 1)">5</span><span style="color: rgba(0, 0, 0, 1)">;

</span><span style="color: rgba(0, 0, 255, 1)">var</span> adaptiveDraft = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> AdaptiveReplyDraftExecutor(ticket, chatClient);
</span><span style="color: rgba(0, 0, 255, 1)">var</span> adaptiveQC = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> AdaptiveQualityCheckExecutor(QualityCheckConstants.PolitenessThreshold, QualityCheckConstants.AccuracyThreshold, chatClient);
</span><span style="color: rgba(0, 0, 255, 1)">var</span> intelligentImprove = <span style="color: rgba(0, 0, 255, 1)">new</span> IntelligentImproveExecutor(ticket, chatClient);</pre>
</div>
<p><strong><span><span>Step3<span>: åå»ºå¾ªç¯è·¯ç±å·¥ä½æµ</span></span></span></strong></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">var</span> workflow = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> WorkflowBuilder(adaptiveDraft)
    .AddEdge(adaptiveDraft, adaptiveQC)
    .AddEdge(adaptiveQC, intelligentImprove)
    .AddEdge(intelligentImprove, adaptiveDraft)
    .WithOutputFrom(adaptiveQC)
    .Build();
Console.OutputEncoding </span>=<span style="color: rgba(0, 0, 0, 1)"> Encoding.UTF8;
Console.WriteLine(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">â Loop Workflow æå»ºå®æ</span><span style="color: rgba(128, 0, 0, 1)">"</span>);</pre>
</div>
<h3><span><span>2.6 æµè¯å·¥ä½æµ</span></span></h3>
<p><span><span>éè¿Streamingæµå¼æ§è¡ï¼</span></span></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">await</span> <span style="color: rgba(0, 0, 255, 1)">using</span> (<span style="color: rgba(0, 0, 255, 1)">var</span> run = <span style="color: rgba(0, 0, 255, 1)">await</span><span style="color: rgba(0, 0, 0, 1)"> InProcessExecution.StreamAsync(workflow, QualityCheckSignal.Init))
{
    </span><span style="color: rgba(0, 0, 255, 1)">var</span> scoreTimeline = <span style="color: rgba(0, 0, 255, 1)">new</span> List&lt;<span style="color: rgba(0, 0, 255, 1)">object</span>&gt;<span style="color: rgba(0, 0, 0, 1)">();
    </span><span style="color: rgba(0, 0, 255, 1)">await</span> <span style="color: rgba(0, 0, 255, 1)">foreach</span> (<span style="color: rgba(0, 0, 255, 1)">var</span> evt <span style="color: rgba(0, 0, 255, 1)">in</span><span style="color: rgba(0, 0, 0, 1)"> run.WatchStreamAsync())
    {
        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> å¼ºå¶ä¸­æ­ï¼æå¤5æ¬¡å°è¯ï¼</span>
        <span style="color: rgba(0, 0, 255, 1)">if</span> (scoreTimeline.Count ==<span style="color: rgba(0, 0, 0, 1)"> maxAttempts)
        {
            Console.WriteLine($</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">â å¼ºå¶ä¸­æ­å·¥ä½æµæ§è¡ï¼å·²å®æ{maxAttempts}æ¬¡è¯ä¼°ï¼</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
            </span><span style="color: rgba(0, 0, 255, 1)">break</span><span style="color: rgba(0, 0, 0, 1)">;
        }
        </span><span style="color: rgba(0, 0, 255, 1)">switch</span><span style="color: rgba(0, 0, 0, 1)"> (evt)
        {
            </span><span style="color: rgba(0, 0, 255, 1)">case</span><span style="color: rgba(0, 0, 0, 1)"> AdaptiveQualityScoreEvent scoreEvent:
                </span><span style="color: rgba(0, 0, 255, 1)">dynamic</span> payload = scoreEvent.Data!<span style="color: rgba(0, 0, 0, 1)">;
                scoreTimeline.Add(</span><span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> QualityScoreTimelineItem(
                    Attempt: (</span><span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)">)payload.Attempt,
                    PolitenessScore: (</span><span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)">)payload.PolitenessScore,
                    AccuracyScore: (</span><span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)">)payload.AccuracyScore,
                    ComplianceStatus: (</span><span style="color: rgba(0, 0, 255, 1)">bool</span>)payload.CompliancePassed ? <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">â</span><span style="color: rgba(128, 0, 0, 1)">"</span> : <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">â</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">
                ));
                </span><span style="color: rgba(0, 0, 255, 1)">var</span> statusMessage = payload.CompliancePassed ? <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">éè¿</span><span style="color: rgba(128, 0, 0, 1)">"</span> : <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ä¸éè¿</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">;
                Console.WriteLine($</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ð AI è´¨æ£ç»æ =&gt; ç¤¼è²åº¦:{payload.PolitenessScore} åç¡®æ§:{payload.AccuracyScore} åè§æ§:{statusMessage}</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
                </span><span style="color: rgba(0, 0, 255, 1)">break</span><span style="color: rgba(0, 0, 0, 1)">;
            </span><span style="color: rgba(0, 0, 255, 1)">case</span><span style="color: rgba(0, 0, 0, 1)"> WorkflowOutputEvent outputEvent:
                Console.WriteLine(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ââââââââââââââââââââââââââââââââââââââââââââââ</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
                Console.WriteLine(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ð å·¥ä½æµæ§è¡å®æ</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
                Console.WriteLine(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ââââââââââââââââââââââââââââââââââââââââââââââ\n</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
                Console.WriteLine($</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">{outputEvent.Data}</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
                </span><span style="color: rgba(0, 0, 255, 1)">break</span><span style="color: rgba(0, 0, 0, 1)">;
            </span><span style="color: rgba(0, 0, 255, 1)">case</span><span style="color: rgba(0, 0, 0, 1)"> WorkflowErrorEvent errorEvent:
                Console.WriteLine(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">â¨ æ¶å° Workflow Error Eventï¼</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
                Console.WriteLine($</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">{errorEvent.Data}</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
                </span><span style="color: rgba(0, 0, 255, 1)">break</span><span style="color: rgba(0, 0, 0, 1)">;
        }
    }
}</span></pre>
</div>
<p><strong>æµè¯ç¨ä¾1</strong></p>
<p><span><span>å·¥ååå®¹ï¼<span style="text-decoration: underline">è®¢åå·²ç»3å¤©æ²¡åè´§ï¼è½éæ¬¾åï¼</span></span></span></p>
<p><span><span>æµè¯ç»æå¦ä¸å¾æç¤ºï¼</span></span></p>
<p><img src="https://img2024.cnblogs.com/blog/381412/202601/381412-20260103192559594-1628756144.png" alt="image" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p><span><span>å¯ä»¥çè§ï¼ç»è¿åæ¬¡çæååå®¹æ¹è¿ï¼è¯¥åå®¹åå¤å·²ç»æ»¡è¶³äºæ åå¯ä»¥ç´æ¥åå¤ç¨æ·ã</span></span></p>
<p><strong>æµè¯ç¨ä¾2</strong></p>
<p><span><span>å·¥ååå®¹ï¼<span style="text-decoration: underline">ä¼åç§¯åä¸ºä»ä¹çªç¶æ¸é¶äºï¼</span></span></span></p>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;text-transform: none;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;text-align: left;line-height: 1.75em;margin-bottom: 16px;margin-top: 16px;&quot;,&quot;data-pm-slice&quot;:&quot;3 4 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;para&quot;,{&quot;tagName&quot;:&quot;p&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;margin-top: 8px;margin-bottom: 8px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span>æµè¯ç»æå¦ä¸å¾æç¤ºï¼</span></span></p>
<p><img src="https://img2024.cnblogs.com/blog/381412/202601/381412-20260103192630728-832060369.png" alt="image" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;text-transform: none;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;text-align: left;line-height: 1.75em;margin-bottom: 16px;margin-top: 16px;&quot;,&quot;data-pm-slice&quot;:&quot;3 4 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;para&quot;,{&quot;tagName&quot;:&quot;p&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;margin-top: 8px;margin-bottom: 8px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;p&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;margin-top: 8px;margin-bottom: 8px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span>å¯ä»¥çå°ï¼éè¿å¾ªç¯åèªæä¿®æ­£æ¨¡å¼ï¼å·¥ä½æµè½å¤å®ç°â<span data-pm-slice="2 3 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;margin: 8px;text-align: left;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span><span>çæ<span><span>âå®¡æ ¸<span data-pm-slice="0 0 []"><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;letter-spacing: 0.578px;text-align: left;margin: 8px;&quot;,&quot;data-pm-slice&quot;:&quot;6 3 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;span&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;outline: 0px;max-width: 100%;color: rgb(34, 34, 34);font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;orphans: 2;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;min-height: 1em;text-align: left;visibility: visible;font-family: system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;PingFang SC\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 15px;letter-spacing: 0.544px;caret-color: var(--weui-BRAND);box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span>âä¿®å¤<span>âçå·¥ä½æ¨¡å¼ï¼<strong>ç¹å«éç¨äºåå®¹çæåå®¡æ¹çåºæ¯ã</strong></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<h1>3 å°ç»</h1>
<p>æ¬æä»ç»äºMAFä¸­å¾ªç¯å·¥ä½æµä»¥åå¦ä½å®ç°â<span data-pm-slice="2 3 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;margin: 8px;text-align: left;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">çæâå®¡æ ¸<span data-pm-slice="0 0 []"><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;letter-spacing: 0.578px;text-align: left;margin: 8px;&quot;,&quot;data-pm-slice&quot;:&quot;6 3 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;span&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;outline: 0px;max-width: 100%;color: rgb(34, 34, 34);font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;orphans: 2;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;min-height: 1em;text-align: left;visibility: visible;font-family: system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;PingFang SC\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 15px;letter-spacing: 0.544px;caret-color: var(--weui-BRAND);box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">âä¿®å¤âçå·¥ä½æ¨¡å¼ï¼æåéè¿ä¸ä¸ªä¼ä¸å®¢æå·¥ååå®¹æºè½åå¤çæ¡ä¾ä»ç»äºè¿ç§æ¨¡å¼çä»£ç å®ç°ï¼ç¹å«éç¨äº<span data-pm-slice="2 3 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;margin: 8px;text-align: left;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span data-pm-slice="0 0 []">åå®¹çæåå®¡æ¹çåºæ¯ã</span></span></span></span></span></p>
<p>ä¸ä¸ç¯ï¼æä»¬å°ç»§ç»­å­¦ä¹ MAFä¸­å·¥ä½æµçå¹¶è¡å·¥ä½æµã</p>
<h1>ç¤ºä¾æºç </h1>
<p>GitHub:&nbsp;<a href="https://github.com/EdisonTalk/MAFD" target="_blank" rel="noopener nofollow">https://github.com/EdisonTalk/MAFD</a></p>
<h1>åèèµæ</h1>
<p><span data-pm-slice="0 0 []"><span>å£æ°ï¼ã<a href="https://www.cnblogs.com/sheng-jie/p/19200934" target="_blank">.NET + AI æºè½ä½å¼åè¿é¶</a>ãï¼æ¨èææ°ï¼âââââï¼</span></span></p>
<p><span data-pm-slice="0 0 []"><span>Microsoft Learnï¼<span>ã<a href="https://learn.microsoft.com/en-us/agent-framework/overview/agent-framework-overview?wt.mc_id=MVP_397012" target="_blank" rel="noopener nofollow">Agent Framework Tutorials</a>ã</span></span></span></p>
<div><span data-pm-slice="0 0 []"><span>&nbsp;</span></span></div>
<p style="text-align: center"><img src="https://images.cnblogs.com/cnblogs_com/edisonchou/1647700/o_200902144330EdisonTalk-Footer.jpg" alt="" style="width: 65%; border: 1px solid rgba(221, 221, 221, 1); border-radius: 3px; box-shadow: 0 4px 8px rgba(3, 27, 78, 0.12)"></p>
<div id="Copyright">
<p>ä½èï¼<span style="text-decoration: underline">ç±è¿ªç</span></p>
<p>åºå¤ï¼<a title="from" href="https://edisontalk.cnblogs.com" target="_blank">https://edisontalk.cnblogs.com</a></p>
<p>æ¬æçæå½ä½èååå®¢å­å±æï¼æ¬¢è¿è½¬è½½ï¼ä½æªç»ä½èåæå¿é¡»ä¿çæ­¤æ®µå£°æï¼ä¸å¨æç« é¡µé¢ææ¾ä½ç½®ç»åºåæé¾æ¥ã</p>
</div>
</div>
<div id="MySignature" role="contentinfo">
    <div align="center"><a href="https://weibo.com/u/2068032061?s=6uyXnP" target="_blank"><img border="0" src="http://service.t.sina.com.cn/widget/qmd/2068032061/d643d182/10.png"></a></div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-04 18:30">2026-01-04 18:30</span>&nbsp;
<a href="https://www.cnblogs.com/edisontalk">EdisonZhou</a>&nbsp;
éè¯»(<span id="post_view_count">3</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19434764);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19434764', targetLink: 'https://www.cnblogs.com/edisontalk/p/-/quick-start-on-maf-chatper10', title: 'MAFå¿«éå¥é¨ï¼10ï¼å¾ªç¯å·¥ä½æµ' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ è®©WinFormsåæ¬¡ä¼å¤§ ]]></title>
    <link>https://www.cnblogs.com/xdesigner/p/19438384/Make_WinForms_Great_Again</link>
    <guid>a0896da9d654c4cb0ac9e261aa377cc6</guid>
    <description>
    <![CDATA[ 
		<h2>
			<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xdesigner/p/19438384/Make_WinForms_Great_Again" title="åå¸äº 2026-01-04 15:49">
    <span role="heading" aria-level="2">è®©WinFormsåæ¬¡ä¼å¤§</span>
    

</a>

		</h2>
		<div class="postText">    <div id="cnblogs_post_description" style="display: none">
        
        æ¬é¡¹ç®å°±æ¯ä¸é¨å¸®å©å°WinForms åºç¨ç¨åºè¿ç§»å° Blazor WASMå¹³å°ä¸ï¼å³ä½¿è¿äºç¨åºä½¿ç¨GDI+åè½ï¼æä»¬ä¹é¢æå°å¯¹è¿äºç¨åºæºç çä¿®æ¹éä¸è¶è¿10%ãè¿æå¤§çéä½WinFormsè½¯ä»¶ç°ä»£åçææ¬åé£é©ã
æä»¬çé¿æç®æ æ¯è½å°å¨ç1000äº¿è¡ç»è¿å¸åºéªè¯çC#ä»£ç è½éè·æ°çï¼å¨ç°ä»£Webåç«¯å¹³å°ä¸ç»§ç»­åæ¥ä»·å¼ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="è®©-winforms-åæ¬¡ä¼å¤§-httpsgithubcomdcsoft-yyfmwga">è®© WinForms åæ¬¡ä¼å¤§ <a href="https://github.com/dcsoft-yyf/MWGA" target="_blank" rel="noopener nofollow">https://github.com/dcsoft-yyf/MWGA</a></h1>
<h2 id="æ´æ°æ¥å¿">æ´æ°æ¥å¿</h2>
<ul>
<li>2026-1-4 :ç¬¬ä¸æ»´è¡ <a href="https://dcsoft-yyf.github.io/MWGA/WinFormCalculator.html" target="_blank" rel="noopener nofollow">https://dcsoft-yyf.github.io/MWGA/WinFormCalculator.html</a></li>
</ul>
<h2 id="å¨ç-winforms-ç°ä»£åç°ç¶">å¨ç WinForms ç°ä»£åç°ç¶</h2>
<p>å¨çèå´åï¼ä¼°è®¡WinFormså¼åèçº¦æ300ä¸è³500ä¸äººï¼å .NETå¼åèæ»æ°ç40%è³50%ãçäº§ç¯å¢ä¸­è¿è¡ç1000ä¸è³1500ä¸ä¸ªWinFormsåºç¨ç¨åºãå¨è¿äºåºç¨ä¸­ï¼60%è³80%æç°ä»£åæ¹é éæ±ï¼å¶ä¸­40%è³60%ä¼åéæ©Webåè¿ç§»ï¼æ¶åçC#ä»£ç å¯è½æ<code>æ°åäº¿è¡</code>ãæ ¸å¿é©±å¨å ç´ åæ¬ç½é¡µç«¯è®¿é®ãçé¢ç°ä»£åãè·¨å¹³å°æ¯æãäºéæåå®å¨åè§ãç±äºå¯å¤ç¨C#ä»£ç ä¸å·å¤åºäºæµè§å¨çè·¨å¹³å°è½åï¼Blazor WebAssemblyæä¸ºç­é¨éæ©ã</p>
<p>ä½æ¯æå¤§éçWinFormsä½¿ç¨äº<code>System.Drawing</code>æ¨¡åè°ç¨<code>GDI+</code>è¿è¡å¤æçèªå®ä¹ç»å¾åäº¤äºï¼è¿äºé¨åé¾ä»¥éè¿ç®åçæ§ä»¶æ å°è¿ç§»ï¼éå¸¸éè¦éåæå¤§å¹ä¿®æ¹ãä¸ºæ­¤ï¼å¸åºä¸å¯¹ä½æ¹å¨ãå¯å¤ç¨ä¸å¡é»è¾åç»å¾ä»£ç çç°ä»£åè¿ç§»è§£å³æ¹æ¡éæ±å¼ºçãä½é¿æä»¥æ¥ä¸ç´ç¼ºä¹ææå·¥å·åæ¹æ³ï¼å¯¼è´è®¸å¤ä¼ä¸é¢ä¸´é«æçéåææ¬åé£é©ã</p>
<h2 id="é¡¹ç®ç®ä»">é¡¹ç®ç®ä»</h2>
<p>æ¬é¡¹ç®å°±æ¯ä¸é¨å¸®å©å°WinForms åºç¨ç¨åºè¿ç§»å° Blazor WASMå¹³å°ä¸ï¼å³ä½¿è¿äºç¨åºä½¿ç¨GDI+åè½ï¼æä»¬ä¹é¢æå°å¯¹è¿äºç¨åºæºç çä¿®æ¹éä¸è¶è¿<code>10%</code>ãè¿æå¤§çéä½WinFormsè½¯ä»¶ç°ä»£åçææ¬åé£é©ã</p>
<p>æä»¬çé¿æç®æ æ¯è½å°å¨ç<code>1000äº¿</code>è¡ç»è¿å¸åºéªè¯çC#ä»£ç è½éè·æ°çï¼å¨ç°ä»£Webåç«¯å¹³å°ä¸ç»§ç»­åæ¥ä»·å¼ã</p>
<h2 id="å¨çå¾è¿ç§»-winforms-åºç¨å¸åºè§æ¨¡ä¼°ç®ç¾å">å¨çå¾è¿ç§» WinForms åºç¨å¸åºè§æ¨¡ä¼°ç®ï¼ç¾åï¼</h2>
<p>åè®¾éè¦è¿ç§»ç WinForms åºç¨çº¦ 50 ä¸ â 200 ä¸ ä¸ªï¼åºç¨å¤æåº¦åå¸ï¼ç®å 60%ãä¸­ç­ 30%ãå¤æ 10%ã</p>
<ul>
<li>æç¤ºä¾ååºç¨è¿ç§»ææ¬ä¸­ä½æ°ä¼°ç®ï¼ç¾åï¼ï¼å æåä»·çº¦ 5.5 ä¸ç¾å/åºç¨ã</li>
<li>TAMï¼æ»å¯å¯»åå¸åºï¼ä¼°ç®ï¼çº¦ 275 äº¿ â 1,100 äº¿ ç¾åï¼50 ä¸ â 200 ä¸ åºç¨ Ã 5.5 ä¸ç¾åï¼ã</li>
<li>å·¥å·/è®¸å¯æ¨¡å¼å¯å¯»åå¸åºï¼5 å â 2 ä¸ ç¾å/åºç¨ï¼ï¼çº¦ 25 äº¿ â 400 äº¿ ç¾åã</li>
<li>å¤æåºç¨ï¼10%ï¼å¸åºï¼çº¦ 5 ä¸ â 20 ä¸ ä¸ªï¼ææ¯ä¾ 15 ä¸ç¾åè®¡çº¦ 75 äº¿ â 300 äº¿ ç¾åã</li>
</ul>

</div>
<div class="clear"></div>
</div>
		<p class="postfoot">
			posted on 
<span id="post-date" data-last-update-days="0.004166666666666667" data-date-updated="2026-01-04 15:55">2026-01-04 15:49</span>&nbsp;
<a href="https://www.cnblogs.com/xdesigner">è¢æ°¸ç¦ çµå­çåï¼å»çä¿¡æ¯å</a>&nbsp;
éè¯»(<span id="post_view_count">532</span>)&nbsp;
è¯è®º(<span id="post_comment_count">7</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19438384);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19438384', targetLink: 'https://www.cnblogs.com/xdesigner/p/19438384/Make_WinForms_Great_Again', title: 'è®©WinFormsåæ¬¡ä¼å¤§' })">ä¸¾æ¥</a>

		</p>
	 ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ åºäº ContextCapture SDK ç Python èªå¨åä¸ç»´å»ºæ¨¡ ]]></title>
    <link>https://www.cnblogs.com/foury/p/19438102</link>
    <guid>0a81d9d20cc896789d84493da6198d75</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/foury/p/19438102" title="åå¸äº 2026-01-04 15:13">
    <span role="heading" aria-level="2">åºäº ContextCapture SDK ç Python èªå¨åä¸ç»´å»ºæ¨¡</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="åºäº-contextcapture-sdk-ç-python-èªå¨åä¸ç»´å»ºæ¨¡">åºäº ContextCapture SDK ç Python èªå¨åä¸ç»´å»ºæ¨¡</h1>
<p>ContextCapture æ¯ Bentley æä¾çä¸æ¬¾åä¸çº§ä¸ç»´éå»ºè½¯ä»¶ï¼å¹¿æ³åºç¨äºæ äººæºå¾ææå½±ãå®æ¯ä¸ç»´å»ºæ¨¡ç­åºæ¯ã</p>
<p>æ¬æåºäº ContextCapture å®æ¹æä¾ç MasterKernel SDKï¼ä»ç»å¦ä½éè¿ Python èæ¬å®ç°å¯¹ ContextCapture å»ºæ¨¡æµç¨çèªå¨åæ§å¶ï¼åæ¬é¡¹ç®åå»ºãç©ºä¸­ä¸è§æµéï¼ATï¼ãä¸ç»´éå»ºä»¥åå¤ç§æ ¼å¼ææçé¡ºåºçäº§ã</p>
<p><strong>ContextCapture MasterKernel SDKä»ç»</strong>:<a href="https://docs.bentley.com/LiveContent/web/ContextCapture%20Help-v18/zh-cn/GUID-8A35B878-C2BB-4F01-8D5A-18321EF04410.html" target="_blank" rel="noopener nofollow">https://docs.bentley.com/LiveContent/web/ContextCapture Help-v18/zh-cn/GUID-8A35B878-C2BB-4F01-8D5A-18321EF04410.html</a></p>
<h2 id="1å®è£contextcapture">1.å®è£ContextCapture</h2>
<p>åºäºContextCaptureçå®è£ç½ä¸æå¾å¤è¯¦ç»çæç¨ï¼æ¬æä¸åå¯¹å®è£æ­¥éª¤è¿è¡è¯¦ç»å±å¼ã<br>
æ¬ææµè¯ç¯å¢ä½¿ç¨çContextCaptureçæ¬ä¸º <strong>v10.18.0.232</strong>ï¼åç»­ç¤ºä¾ååºäºè¯¥çæ¬ï¼ä»ä¾åèã</p>
<h2 id="2éç½®éåcontextcaptureçpythonç¯å¢">2.éç½®éåContextCaptureçPythonç¯å¢</h2>
<p>å¨ ContextCapture å®è£ç®å½ç <code>sdk/dist</code> æä»¶å¤¹ä¸­ï¼å¯ä»¥æ¾å°å®æ¹æä¾ç Python SDK å®è£åï¼<code>.whl</code> æä»¶ï¼ã</p>
<p>ä¾å¦ï¼<br>
<code>ccmasterkernel-10.18.0.232-cp36-cp36m-win_amd64.whl</code></p>
<p>å¶ä¸­âcp36-cp36mâè¡¨ç¤ºåªæ¯æ Python3.6 ç¸å³çæ¬ï¼è¦å®è£æ­£ç¡®çPythonçæ¬ï¼ã</p>
<p>å®è£å®æPythonç¯å¢åï¼æå¼å½ä»¤è¡è¿å¥sdk/distæä»¶å¤¹ä¸ï¼æ§è¡<code>pip install ccmasterkernel-10.18.0.232-cp36-cp36m-win_amd64.whl</code>å®è£å¥½è¿ä¸ªåã</p>
<p><img alt="ä¼ä¸å¾®ä¿¡æªå¾_17675106628003" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3476680/202601/3476680-20260104151130785-749681989.png" class="lazyload"></p>
<h2 id="3ç¼åpythonèæ¬">3.ç¼åPythonèæ¬</h2>
<p>å³äºsdkä½¿ç¨çç¸å³ææ¡£è¯´æå¨sdk/doc/htmlæä»¶å¤¹ä¸ã</p>
<p>ä¸é¢ç»åºä¸ä¸ªå®æ´ç Python èæ¬ç¤ºä¾ï¼ç¨äºæ¼ç¤ºå¦ä½éè¿ ContextCapture SDK å®ç°æ äººæºå½±åçèªå¨åä¸ç»´å»ºæ¨¡æµç¨ã</p>
<p>è¯¥èæ¬åç»­å¯æ ¹æ®å®ééæ±è¿è¡è£åªææ©å±ã</p>
<p>æ­¤èæ¬æ¯ä¸ä¸ªç¨äºèªå¨å ContextCapture (CC) å»ºæ¨¡æµç¨ç Python èæ¬ãå®è½å¤èªå¨åå»ºé¡¹ç®ãæäº¤ç©ºä¸è¿ç® (AT)ï¼å¹¶æé¡ºåºçæå¤ç§æ ¼å¼çä¸ç»´æ¨¡åï¼OBJ, LAS, 3D Tilesï¼ã</p>
<p><strong>æ³¨æï¼</strong> <mark>æ­£å¼è¿è¡èæ¬åï¼éç¡®ä¿ContextCapture Engine å·²å¯å¨ï¼å¦åä»»å¡æ æ³æ­£å¸¸æäº¤ï¼</mark></p>
<h3 id="31å½ä»¤è¡åæ°">3.1å½ä»¤è¡åæ°</h3>
<p>èæ¬æ¯æéè¿å½ä»¤è¡åæ°è¿è¡çµæ´»éç½®ï¼</p>
<table>
<thead>
<tr>
<th style="text-align: left">åæ°</th>
<th style="text-align: left">å¿é/å¯é</th>
<th style="text-align: left">é»è®¤å¼</th>
<th style="text-align: left">è¯´æ</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left"><code>--photos</code></td>
<td style="text-align: left"><strong>å¿é</strong></td>
<td style="text-align: left">-</td>
<td style="text-align: left">ç§çæå¨çæºæä»¶å¤¹è·¯å¾ãæ¯æ jpg, tif, png ç­æ ¼å¼ã</td>
</tr>
<tr>
<td style="text-align: left"><code>--project</code></td>
<td style="text-align: left"><strong>å¿é</strong></td>
<td style="text-align: left">-</td>
<td style="text-align: left">é¡¹ç®è¾åºçæ ¹æä»¶å¤¹è·¯å¾ãèæ¬å°å¨æ­¤ç®å½ä¸åå»º <code>.ccm</code> é¡¹ç®æä»¶ååä¸ªäº§ç©æä»¶å¤¹ã</td>
</tr>
<tr>
<td style="text-align: left"><code>--memory</code></td>
<td style="text-align: left">å¯é</td>
<td style="text-align: left"><code>16.0</code></td>
<td style="text-align: left">ç®æ åå­ä½¿ç¨é (GB)ãç¨äºæ§å¶ååå¤§å°ï¼å»ºè®®è®¾ç½®ä¸ºæºå¨ç©çåå­ç 50%-70%ã</td>
</tr>
<tr>
<td style="text-align: left"><code>--formats</code></td>
<td style="text-align: left">å¯é</td>
<td style="text-align: left">å¨é¨</td>
<td style="text-align: left">æå®è¦çäº§çæ ¼å¼åè¡¨ãå¯éå¼: <code>OBJ</code>, <code>LAS</code>, <code>3DTiles</code>ãå¤ä¸ªå¼ä¹é´ç¨ç©ºæ ¼åéã</td>
</tr>
</tbody>
</table>
<h3 id="32-ä½¿ç¨ç¤ºä¾">3.2 ä½¿ç¨ç¤ºä¾</h3>
<p>å¨å½ä»¤è¡ (CMD æ PowerShell) ä¸­è¿è¡ä»¥ä¸å½ä»¤ã</p>
<h4 id="1-åºç¡ç¨æ³">1ï¼ åºç¡ç¨æ³</h4>
<p>çæææé»è®¤æ ¼å¼ (OBJ, LAS, 3D Tiles)ï¼é»è®¤ä½¿ç¨ 16GB åå­éå¶ã</p>
<pre><code class="language-powershell">python test_cc_sequential.py --photos "D:\MyData\Mission_01\Images" --project "D:\Projects\Mission_01"
</code></pre>
<h4 id="2æå®è¾åºæ ¼å¼">2ï¼æå®è¾åºæ ¼å¼</h4>
<p>å¦æä½ åªéè¦ç¹äº (LAS) å OBJ æ¨¡åï¼ä¸éè¦ 3D Tilesï¼</p>
<pre><code class="language-powershell">python test_cc_sequential.py --photos "D:\Images" --project "D:\Output" --formats LAS OBJ
</code></pre>
<h4 id="3èªå®ä¹åå­éå¶">3ï¼èªå®ä¹åå­éå¶</h4>
<p>éå¯¹å¤§åå­ (ä¾å¦ 64GB åå­)ï¼å¯ä»¥è°é«éå¶ä»¥å å¿«å¤çéåº¦ (ä¾å¦è®¾ä¸º 48GB)ï¼</p>
<pre><code class="language-powershell">python test_cc_sequential.py --photos "D:\Images" --project "D:\Output" --memory 48.0
</code></pre>
<p>éå¯¹å°åå­æºå¨ (ä¾å¦ 16GB åå­)ï¼å»ºè®®è°ä½éå¶ (ä¾å¦ 8GB)ï¼</p>
<pre><code class="language-powershell">python test_cc_sequential.py --photos "D:\Images" --project "D:\Output" --memory 8.0
</code></pre>
<h3 id="33-è¾åºç»æ">3.3 è¾åºç»æ</h3>
<p>è¿è¡å®æåï¼å¨æå®ç <code>--project</code> ç®å½ä¸ä¼èªå¨çæä»¥ä¸ç»æï¼</p>
<pre><code class="language-text">D:\Projects\Mission_01\         &lt;-- é¡¹ç®æ ¹ç®å½
â  Mission_01.ccm              &lt;-- CC å·¥ç¨æä»¶
â  cc_sequential.log           &lt;-- è¯¦ç»è¿è¡æ¥å¿
â
ââ Production_OBJ\             &lt;-- OBJ æ¨¡åè¾åºç®å½
â      metadata.xml
â      ...
â
ââ Production_LAS\             &lt;-- LAS ç¹äºè¾åºç®å½
â      cloud.las
â      ...
â
ââ Production_3DTiles\         &lt;-- Cesium 3D Tiles è¾åºç®å½
       tileset.json
       ...
</code></pre>
<h3 id="34-æ¥å¿">3.4 æ¥å¿</h3>
<p>èæ¬è¿è¡è¿ç¨ä¸­ï¼ç®è¦ä¿¡æ¯ä¼æ¾ç¤ºå¨å±å¹ä¸ã<br>
è¯¦ç»çå¸¦æ¶é´æ³çæ¥å¿ä¼ä¿å­å¨èæ¬åçº§ç®å½ä¸ç <code>cc_sequential.log</code> æä»¶ä¸­ã</p>
<h3 id="35-å·ä½ä»£ç å®ç°">3.5 å·ä½ä»£ç å®ç°</h3>
<pre><code class="language-python">"""
ContextCapture é¡ºåºå¤æ ¼å¼çäº§èæ¬
æ¯æ OBJãLAS ç¹äºãCesium 3D Tiles ä¸ç§æ ¼å¼
ä½¿ç¨ååå¤ç (Tiling) æ§å¶åå­
é¡ºåºæ§è¡é¿ååå­ä¸è¶³
"""
import sys
import time
import os
import logging
from logging.handlers import RotatingFileHandler
import traceback
import argparse

# --- æ¥å¿éç½® ---
# æ¥å¿æä»¶åä¸º cc_sequential.logï¼ä½äºèæ¬æå¨ç®å½
log_file_path = os.path.join(os.path.dirname(os.path.abspath(__file__)), 'cc_sequential.log')

logger = logging.getLogger('CC_Production')
logger.setLevel(logging.INFO)

# 1. RotatingFileHandler: 10MB åå²ï¼ä¿ç 5 ä¸ªå¤ä»½
# maxBytes = 10 * 1024 * 1024 = 10485760 B
rf_handler = RotatingFileHandler(log_file_path, maxBytes=10 * 1024 * 1024, backupCount=5, encoding='utf-8')
file_formatter = logging.Formatter('%(asctime)s [%(levelname)s] %(message)s')
rf_handler.setFormatter(file_formatter)
logger.addHandler(rf_handler)

# 2. StreamHandler: è¾åºå°æ§å¶å°
console_handler = logging.StreamHandler(sys.stdout)
console_handler.setFormatter(logging.Formatter('%(message)s'))  # æ§å¶å°è¾åºä¿æåæ ·ï¼çº¯ææ¬æ¹ä¾¿éè¯»
logger.addHandler(console_handler)
# ----------------

try:
    import ccmasterkernel

    logger.info("æåå¯¼å¥ ccmasterkernel æ¨¡å")
except ImportError:
    logger.error("éè¯¯: æ æ³å¯¼å¥ ccmasterkernel æ¨¡åã")
    sys.exit(1)


def parse_args():
    parser = argparse.ArgumentParser(description="ContextCapture é¡ºåºå¤æ ¼å¼çäº§èæ¬")

    # è·¯å¾åæ° (å¿é¡»)
    parser.add_argument('--photos', required=True, help='ç§çæå¨ç®å½è·¯å¾')
    parser.add_argument('--project', required=True, help='é¡¹ç®è¾åºç®å½è·¯å¾')

    # å¯éåæ°
    parser.add_argument('--memory', type=float, default=16.0, help='ç®æ åå­ä½¿ç¨é (GB)ï¼é»è®¤ 16.0')
    parser.add_argument('--formats', nargs='+', default=['OBJ', 'LAS', '3DTiles'],
                        choices=['OBJ', 'LAS', '3DTiles'],
                        help='æå®è¦çäº§çæ ¼å¼ (é»è®¤å¨é¨): OBJ, LAS, 3DTiles')

    return parser.parse_args()


def main():
    args = parse_args()

    # å®ä¹è·¯å¾åé (ä» args è·å)
    project_dir = args.project
    # èªå¨æ ¹æ®ç®å½åçæé¡¹ç®æä»¶å
    project_name_base = os.path.basename(os.path.normpath(project_dir))
    project_file_path = os.path.join(project_dir, f"{project_name_base}.ccm")
    photos_dir = args.photos

    # å¤æ ¼å¼è¾åºç®å½
    production_obj_dir = os.path.join(project_dir, "Production_OBJ")
    production_las_dir = os.path.join(project_dir, "Production_LAS")
    production_3dtiles_dir = os.path.join(project_dir, "Production_3DTiles")

    logger.info("\n" + "=" * 60)
    logger.info("ContextCapture é¡ºåºå¤æ ¼å¼èªå¨åèæ¬ (CLI Mode)")
    logger.info("=" * 60)
    logger.info(f"é¡¹ç®æä»¶è·¯å¾: {project_file_path}")
    logger.info(f"ç§çç®å½:     {photos_dir}")
    logger.info(f"ç®æ åå­:     {args.memory} GB")

    # ç¡®å®è¦çäº§çæ ¼å¼
    formats_to_produce_list = []

    # æ ¼å¼å®ä¹æ å°: Name -&gt; (DriverName, OutputDir, Description)
    format_map = {
        'OBJ': ("OBJ", production_obj_dir, "OBJ ç½æ ¼æ¨¡å"),
        'LAS': ("LAS", production_las_dir, "LAS ç¹äº"),
        '3DTiles': ("Cesium 3D Tiles", production_3dtiles_dir, "Cesium 3D Tiles")
    }

    req_formats = args.formats

    logger.info(f"è®¡åçäº§æ ¼å¼: {', '.join(req_formats)}")

    # æå»º production list
    # ä¿æåæé¡ºåº: OBJ -&gt; LAS -&gt; 3DTiles (å¦æè¢«éä¸­)
    if 'OBJ' in req_formats:
        formats_to_produce_list.append(('OBJ', *format_map['OBJ']))
    if 'LAS' in req_formats:
        formats_to_produce_list.append(('LAS', *format_map['LAS']))
    if '3DTiles' in req_formats:
        formats_to_produce_list.append(('Cesium 3D Tiles', *format_map['3DTiles']))

    logger.info("\nè¾åºä½ç½®é¢è§:")
    for _, _, out_dir, desc in formats_to_produce_list:
        logger.info(f"  - {desc}: {out_dir}")

    logger.info("\næ³¨æ: éä¸­æ ¼å¼å°ä¾æ¬¡æ§è¡ï¼é¿ååå­ä¸è¶³")
    logger.info("=" * 60 + "\n")

    # ç¡®ä¿é¡¹ç®ç®å½å­å¨
    if not os.path.exists(project_dir):
        try:
            os.makedirs(project_dir)
        except OSError as e:
            logger.error(f"éè¯¯: æ æ³åå»ºé¡¹ç®ç®å½ {project_dir}: {e}")
            return

    # 1. åå»ºå¹¶éç½®é¡¹ç®
    logger.info("æ­£å¨åå»ºé¡¹ç®...")
    project = ccmasterkernel.Project()
    project.setName(project_name_base)  # ä½¿ç¨ç®å½åä½ä¸ºé¡¹ç®å
    project.setProjectFilePath(project_file_path)

    # 2. åå»ºåºåå¹¶æ·»å ç§ç
    logger.info("æ­£å¨åå»ºåå§åºå...")
    block = ccmasterkernel.Block(project)
    project.addBlock(block)
    block.setName("InitialBlock")

    logger.info("æ­£å¨æ·»å ç§ç...")
    photogroups = block.getPhotogroups()

    if os.path.exists(photos_dir):
        photo_files = [f for f in os.listdir(photos_dir)
                       if f.lower().endswith(('.jpg', '.jpeg', '.tif', '.tiff', '.png'))]
        if not photo_files:
            logger.warning(f"è­¦å: å¨ {photos_dir} ä¸­æªæ¾å°ç§çæä»¶ã")

        for f in photo_files:
            full_path = os.path.join(photos_dir, f)
            photogroups.addPhotoInAutoMode(full_path)
        logger.info(f"å·²å°è¯æ·»å  {len(photo_files)} å¼ ç§çã")
    else:
        logger.error(f"éè¯¯: ç§çç®å½ {photos_dir} ä¸å­å¨ã")
        return

    # éªè¯åºåæ¯å¦ææ
    if not block.isReadyForAT():
        logger.error("éè¯¯: åºåæªåå¤å¥½è¿è¡ ATã")
        return

    # ä¿å­é¡¹ç®
    logger.info("æ­£å¨ä¿å­é¡¹ç®...")
    save_error = project.writeToFile()
    if not save_error.isNone():
        logger.error(f"ä¿å­é¡¹ç®å¤±è´¥: {save_error.message}")
        return
    logger.info("é¡¹ç®ä¿å­æåã")

    # 3. ç©ºä¸­ä¸è§æµé (AT)
    logger.info("\nåå¤ç©ºä¸­ä¸è§æµé (AT) åºå...")
    block_at = ccmasterkernel.Block(project)
    project.addBlock(block_at)
    block_at.setName("AT_Block")
    block_at.setBlockTemplate(ccmasterkernel.BlockTemplate.Template_adjusted, block)

    # ä¿å­æ´æ°åçé¡¹ç®
    logger.info("æ­£å¨ä¿å­æ´æ°åçé¡¹ç®...")
    save_error = project.writeToFile()
    if not save_error.isNone():
        logger.error(f"ä¿å­é¡¹ç®å¤±è´¥: {save_error.message}")
        return

    logger.info("å¼å§æäº¤ AT å¤ç...")
    at = block_at.getAT()
    if at is None:
        logger.error("éè¯¯: æ æ³è·å AT å¯¹è±¡ã")
        return

    # æäº¤ AT å¤ç
    submit_error = at.submitProcessing()
    if not submit_error.isNone():
        logger.error(f"AT æäº¤å¤±è´¥: {submit_error.message}")
        return

    # çæ§ AT ä»»å¡
    if not monitor_job(at, "AT"):
        logger.error("AT å¤çæªæåå®æï¼èæ¬ç»æ­¢ã")
        return

    logger.info("AT å¤çå®æã\n")

    # 4. éå»º (Reconstruction) - éç½®ååå¤ç
    logger.info("=" * 60)
    logger.info("åå»ºéå»ºé¡¹ç®...")
    logger.info("=" * 60)

    reconstruction = ccmasterkernel.Reconstruction(block_at)
    block_at.addReconstruction(reconstruction)
    reconstruction.setName("Reconstruction_Sequential")

    # éç½®éå»ºè®¾ç½®
    logger.info("\néç½®éå»ºè®¾ç½®...")
    settings = reconstruction.getSettings()
    reconstruction.setSettings(settings)

    # éç½®ååå¤ç (Tiling)
    logger.info("éç½®ååå¤ç (Tiling)...")
    tiling = reconstruction.getTiling()
    tiling.tilingMode = ccmasterkernel.TilingMode.TilingMode_adaptive
    tiling.targetMemoryUse = args.memory  # ä½¿ç¨å½ä»¤è¡åæ°
    tiling.overlapRatio = 0.2
    tiling.discardEmptyTiles = True
    reconstruction.setTiling(tiling)

    logger.info(f"  - æ¨¡å¼: Adaptive (èªå¨åå)")
    logger.info(f"  - ç®æ åå­: {tiling.targetMemoryUse} GB")
    logger.info(f"  - ç¦çéå ç: {tiling.overlapRatio * 100}%")

    # ä¿å­éå»ºéç½®
    logger.info("\nä¿å­éå»ºéç½®...")
    save_error = project.writeToFile()
    if not save_error.isNone():
        logger.error(f"ä¿å­é¡¹ç®å¤±è´¥: {save_error.message}")
        return

    # è·åç¦çæ°é
    num_tiles = reconstruction.getNumInternalTiles()
    logger.info(f"\néå»ºåå« {num_tiles} ä¸ªç¦ç")

    # 5. é¡ºåºçäº§ - ä¾æ¬¡æ§è¡æ¯ç§æ ¼å¼
    logger.info("\n" + "=" * 60)
    logger.info("å¼å§é¡ºåºçäº§ï¼ä¾æ¬¡æ§è¡ï¼é¿ååå­ä¸è¶³ï¼")
    logger.info("=" * 60)

    results = []

    # éåæä»¬æå»ºçæ ¼å¼åè¡¨
    for idx, (prod_name, driver_name, output_dir, description) in enumerate(formats_to_produce_list, 1):
        logger.info("\n" + "=" * 60)
        logger.info(f"ç¬¬ {idx}/{len(formats_to_produce_list)} æ­¥: çäº§ {description}")
        logger.info("=" * 60)

        # åå»ºçäº§
        logger.info(f"\néç½® {description}...")
        production = ccmasterkernel.Production(reconstruction)
        reconstruction.addProduction(production)
        production.setName(f"Production_{prod_name}")
        production.setDriverName(driver_name)
        production.setDestination(output_dir)
        logger.info(f"  â {description} éç½®å®æ")

        # ä¿å­é¡¹ç®
        save_error = project.writeToFile()
        if not save_error.isNone():
            logger.error(f"  â ä¿å­é¡¹ç®å¤±è´¥: {save_error.message}")
            results.append((description, False))
            continue

        # æ·»å ææç¦çä»»å¡
        logger.info(f"\nä¸º {description} æ·»å  {num_tiles} ä¸ªç¦çä»»å¡...")
        production_jobs = []
        try:
            for i in range(num_tiles):
                tile = reconstruction.getInternalTile(i)
                job = ccmasterkernel.TileProductionJob(production, tile)
                production.addProductionJob(job)
                production_jobs.append(job)
            logger.info(f"  â å·²æ·»å  {num_tiles} ä¸ªç¦çä»»å¡")
        except Exception as e:
            logger.error(f"  â æ·»å ä»»å¡æ¶åºé: {e}")
            results.append((description, False))
            continue

        # æäº¤çäº§
        logger.info(f"\næäº¤ {description} çäº§...")
        submit_error = production.submitProcessing()
        if not submit_error.isNone():
            logger.error(f"  â æäº¤å¤±è´¥: {submit_error.message}")
            results.append((description, False))
            continue
        logger.info(f"  â æäº¤æå")

        # çæ§ææç¦çä»»å¡
        logger.info(f"\nçæ§ {description} ä»»å¡ï¼{num_tiles} ä¸ªç¦çï¼...")
        all_tiles_success = True
        for tile_idx, job in enumerate(production_jobs):
            job_desc = f"{description} - ç¦ç {tile_idx}"
            if not monitor_job(job, job_desc):
                logger.error(f"  â ç¦ç {tile_idx} å¤çå¤±è´¥")
                all_tiles_success = False
                break  # å¦æä¸ä¸ªç¦çå¤±è´¥ï¼åæ­¢çæ§åç»­ç¦ç
            else:
                logger.info(f"  â ç¦ç {tile_idx} å¤çæå")

        if all_tiles_success:
            logger.info(f"\nâ {description} ææç¦çå¤çæåï¼")
            logger.info(f"  è¾åºä½ç½®: {output_dir}")
            results.append((description, True))
        else:
            logger.error(f"\nâ {description} å¤çå¤±è´¥")
            results.append((description, False))

    # æç»ç»ææ±æ»
    logger.info("\n" + "=" * 60)
    logger.info("çäº§ç»ææ±æ»")
    logger.info("=" * 60)

    for description, success in results:
        status = "â æå" if success else "â å¤±è´¥"
        logger.info(f"  {status}: {description}")

    all_success = all(success for _, success in results)

    if all_success:
        logger.info("\n" + "=" * 60)
        logger.info("ææè¯·æ±çæ ¼å¼çäº§æåå®æï¼")
        logger.info("=" * 60)
    else:
        logger.error("\né¨åæ ¼å¼çäº§å¤±è´¥ï¼è¯·æ£æ¥æ¥å¿è·åè¯¦ç»ä¿¡æ¯ã")


def monitor_job(job_object, job_name):
    """
    éç¨ä»»å¡çæ§å½æ°
    """
    previous_status = ccmasterkernel.JobStatus.Job_unknown

    while True:
        # æ´æ°ç¶æ
        try:
            job_object.updateJobStatus()
        except AttributeError:
            pass

        status = job_object.getJobStatus()

        # æ¾ç¤ºç¶æåå
        if status != previous_status:
            status_str = ccmasterkernel.jobStatusAsString(status)
            logger.info(f"    [{job_name}] {status_str}")
            previous_status = status

        # æ£æ¥æ¯å¦ç»æ
        if status in [ccmasterkernel.JobStatus.Job_completed,
                      ccmasterkernel.JobStatus.Job_failed,
                      ccmasterkernel.JobStatus.Job_cancelled]:
            break

        time.sleep(2)

    # æç»ç»ææ£æ¥
    if status == ccmasterkernel.JobStatus.Job_completed:
        return True
    else:
        msg = job_object.getJobMessage()
        if msg:
            logger.error(f"    [{job_name}] éè¯¯: {msg}")
        return False


if __name__ == "__main__":
    try:
        main()
    except KeyboardInterrupt:
        logger.info("\n\nç¨æ·ä¸­æ­èæ¬æ§è¡ã")
    except Exception as e:
        logger.error(f"\néè¯¯: {e}")
        logger.error("è¯¦ç»å æ :", exc_info=True)


</code></pre>
<p><strong>githubä»åºå°å</strong>ï¼<a href="https://github.com/Canon-create/contextcapture-python-example" target="_blank" rel="noopener nofollow">https://github.com/Canon-create/contextcapture-python-example</a></p>
<p><strong>åèæç« </strong>ï¼<a href="https://blog.csdn.net/qq_41475842/article/details/112959892" target="_blank" rel="noopener nofollow">https://blog.csdn.net/qq_41475842/article/details/112959892</a></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-04 15:13">2026-01-04 15:13</span>&nbsp;
<a href="https://www.cnblogs.com/foury">æ·±ç´«è²çä¸åå­å·</a>&nbsp;
éè¯»(<span id="post_view_count">36</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19438102);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19438102', targetLink: 'https://www.cnblogs.com/foury/p/19438102', title: 'åºäº ContextCapture SDK ç Python èªå¨åä¸ç»´å»ºæ¨¡' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ 10åªèé¼ è¯æ¯1000ç¶æ°´é®é¢æèç¬è®° ]]></title>
    <link>https://www.cnblogs.com/mysticbinary/p/19436756</link>
    <guid>6452a4d4f0220c8f8aac993dfa6e45df</guid>
    <description>
    <![CDATA[ 
        <div class="postTitle">
            <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/mysticbinary/p/19436756" title="åå¸äº 2026-01-04 13:22">
    <span role="heading" aria-level="2">10åªèé¼ è¯æ¯1000ç¶æ°´é®é¢æèç¬è®°</span>
    

</a>

        </div>
        <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p></p><div class="toc"><div class="toc-container-header">ç®å½</div><ul><li><a href="#é®é¢æè¿°" rel="noopener nofollow">é®é¢æè¿°</a></li><li><a href="#åçå¾" rel="noopener nofollow">åçå¾</a></li><li><a href="#ææ³" rel="noopener nofollow">ææ³</a></li><li><a href="#æ¯ç¹ä¸çåç©çä¸ççå·®å¼" rel="noopener nofollow">æ¯ç¹ä¸çåç©çä¸ççå·®å¼</a></li></ul></div><p></p>
<hr>
<h1 id="é®é¢æè¿°">é®é¢æè¿°</h1>
<p>1000ç¶æ°´éæä¸ç¶ææ¯ï¼å¯ä»¥ä½¿ç¨10åªèé¼ å»å°æ¯ï¼å½èé¼ åä¸æ¯æ°´1ä¸ªå°æ¶åæ­»å»ï¼è¯·è®¾è®¡ä¸ç§æ¹æ¡ï¼è½å¤å¨1å°æ¶æ¾å°è¿ç¶æ¯è¯ã</p>
<hr>
<h1 id="åçå¾">åçå¾</h1>
<p>å¦æä»äºè¿å¶ç¼ç ä½çè§è§æ¥è§£å³è¿ä¸ªé®é¢åå¾ç®åï¼<br>
<img src="https://img2024.cnblogs.com/blog/1552062/202601/1552062-20260104132050245-398290625.png" alt="image" loading="lazy"></p>
<ul>
<li>
<p>ç»ç¶å­åèé¼ ç¼å·ï¼å°1000ç¶æ°´ç¼å·ä¸º0å°999ãç»10åªèé¼ ä»å·¦å°å³ï¼æä»å³å°å·¦ï¼ç¼å·0å°9ã</p>
<ul>
<li>ç¨äºè¿å¶è¡¨ç¤ºï¼å°ç¶å­ç¼å·è½¬æ¢ä¸º10ä½äºè¿å¶æ°ï¼ä¾å¦ï¼ç¶å­1æ¯0000000001ï¼ç¶å­1000æ¯1111101000ï¼ã</li>
</ul>
</li>
<li>
<p>å¦æç¶å­ç¼å·çç¬¬1ä½æ¯1ï¼ä»å³å¾å·¦æ°ï¼ï¼åå°è¯¥ç¶æ°´æ··å¥ç»ç¬¬1åªèé¼ åçæ··åæ¶²ä¸­ã</p>
</li>
<li>
<p>å¦æ1ä¸ªå°æ¶ååï¼åªä¸ªä½çèé¼ æ­»å»ï¼è®°å½åªä¸ªèé¼ çä½ã<br>
å¾çåè®¾365ææ¯ï¼åèé¼ 0å·ãèé¼ 2å·ãèé¼ 3å·ãèé¼ 0å·ãèé¼ 5å·ãèé¼ 6å·ãèé¼ 8å·æ­»å»æ è®°ä¸º1ï¼å¶ä½ä½æ è®°0 ï¼è½¬10è¿å¶=365ã</p>
</li>
</ul>
<hr>
<h1 id="ææ³">ææ³</h1>
<p>è¿ä¸ªé®é¢çä¼¼æ¯ä¸ä¸ªé»è¾è°é¢ï¼ä½å®éä¸ä½ç°äºä¿¡æ¯ç¼ç çæ ¸å¿ææ³ï¼<strong>ç¨æå°çâæ£æµä½âåºåæå¤çå¯è½æ§ã</strong></p>
<p>è¿ç§æç»´å¨ç°ä»£è®¡ç®æºç§å­¦ãéä¿¡ææ¯åä¿¡æ¯è®ºä¸­æ å¤ä¸å¨ã<br>
ä»ç¡¬çççº éç¼ç å°ç½ç»ä¼ è¾çæ°æ®æ ¡éªï¼ä»æ¡å½¢ç å°äºç»´ç ï¼äºè¿å¶ç¼ç çææ³è´¯ç©¿äºæä»¬çæ°å­ä¸çã</p>
<hr>
<p>è§£å³è¿ä¸ªé®é¢çå³é®å¨äºäºè¿å¶ç¼å·ãæä»¬å° 1000 ç¶è¯æ°´ç¼å·ä¸º 0-999ã<br>
ç¨äºè¿å¶è¡¨ç¤ºè¿äºç¼å·æ¶ï¼1000 â¤ 1024 = 2Â¹â°ï¼è¿æå³çæä»¬éè¦ 10 ä½äºè¿å¶æ°å°±å¯ä»¥è¡¨ç¤ºææç¶å­ã<br>
æ¯åªèé¼ å¯¹åºäºè¿å¶ç¼ç ä¸­çä¸ä½ã10 ä½äºè¿å¶ï¼æ­£å¥½å¯¹åº 10 åªèé¼ ã<br>
<strong>è¿ç§æ¹æ³è½å¤ä¸æ¬¡æ§æµè¯ææç¶å­ï¼èä¸æ¯ä¼ ç»çéç¶æµè¯ã</strong> æçæåå¾å¤§ã</p>
<hr>
<h1 id="æ¯ç¹ä¸çåç©çä¸ççå·®å¼">æ¯ç¹ä¸çåç©çä¸ççå·®å¼</h1>
<p>è¿å¥äºè¿å¶ç¼ç æ¹æ¡å¨çè®ºç¼ç¨åé»è¾è°é¢ä¸­æ¯æç«çï¼ä½å¨å®éæ¯çå­¦æ£æµæç°å®åºæ¯ä¸­ï¼å¾å¾éè¦ç»ååéååºæ²çº¿ãåç»æµè¯æç°ä»£åæåå­¦æ¹æ³ï¼å¦è²è°±ãè´¨è°±ï¼æ´å¯é å°è¯å«æ¯ç©ã</p>
<p>æ¯ç«ä½ æä¸ç¶æ°´å10ä»½äºï¼ç¨éä¹åæææä¹æ ·ï¼é½æ¯æªç¥æ°äºãâ®(â¯â½â°)â­<br>
è¿æï¼æä¹å¯è½ä¸åªèé¼ è½åå ç¾ä»½æ°´å.....</p>

</div>
<div class="clear"></div>

        <div class="postDesc">posted on 
<span id="post-date" data-last-update-days="0.1638888888888889" data-date-updated="2026-01-04 17:18">2026-01-04 13:22</span>&nbsp;
<a href="https://www.cnblogs.com/mysticbinary">Mysticbinary</a>&nbsp;
éè¯»(<span id="post_view_count">305</span>)&nbsp;
è¯è®º(<span id="post_comment_count">4</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19436756);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19436756', targetLink: 'https://www.cnblogs.com/mysticbinary/p/19436756', title: '10åªèé¼ è¯æ¯1000ç¶æ°´é®é¢æèç¬è®°' })">ä¸¾æ¥</a>
</div>
     ]]>
    </description>
    </item>
        </channel>
        </rss>