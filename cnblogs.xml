<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åå®¢å­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2026-02-10T16:59:45.837Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åå®¢å­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ ä¸æ¬¾å¼æºãå¼ºå¤§ãç®åæç¨ç .NET åæ°æ®çæå©å¨ ]]></title>
    <link>https://www.cnblogs.com/Can-daydayup/p/19601424</link>
    <guid>a96808c5bfe361ff6e3f2e840cb5c8ed</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Can-daydayup/p/19601424" title="åå¸äº 2026-02-11 00:52">
    <span role="heading" aria-level="2">ä¸æ¬¾å¼æºãå¼ºå¤§ãç®åæç¨ç .NET åæ°æ®çæå©å¨</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h2 data-tool="mdniceç¼è¾å¨"><span>åè¨</span></h2>
<p data-tool="mdniceç¼è¾å¨"><span>å¨æ¥å¸¸ç .NET é¡¹ç®å¼åä¸­ï¼æä»¬ç»å¸¸éè¦å¤§éçæµè¯æ°æ®æ¥éªè¯ä¸å¡é»è¾ãå¡«åæ°æ®åºãè¿è¡æ§è½æµè¯æèåäº§åæ¼ç¤ºãæå¨ç¼åè¿äºæµè¯æ°æ®ä¸ä»æ¯ç¥ä¹å³ãæµªè´¹æ¶é´ï¼èä¸é¾ä»¥è¦çåç§è¾¹çåºæ¯ãä»å¤©å¤§å§ç»å¤§å®¶æ¨èä¸æ¬¾å¼æºãå¼ºå¤§ãç®åæç¨ç .NET åæ°æ®çæåºï¼<strong>Bogus</strong><span>ã</span></span></p>
<h2 data-tool="mdniceç¼è¾å¨"><span>é¡¹ç®ä»ç»</span></h2>
<p data-tool="mdniceç¼è¾å¨"><span>Bogus æ¯ä¸ä¸ªåºäºèåç faker.js ç§»æ¤èæ¥çå¼æºï¼<span>MIT Licenseï¼ .NET åæ°æ®çæåºï¼å®ä¸º .NET å¼åèæä¾äºä¸å¥å¼ºå¤§ãç®åæç¨ç APIï¼å¯å¿«éçæåç§ç±»åçæ¨¡ææ°æ®ï¼æ¯æ 40+ ç§è¯­è¨åºåæ¬å°åï¼å¹¿æ³åºç¨äºååæµè¯ãæ°æ®åºå¡«åãååæ¼ç¤ºä»¥åç¤ºä¾æ°æ®çæç­åºæ¯ã</span></span></p>
<h2 data-tool="mdniceç¼è¾å¨"><span>æ¯æè¯­è¨</span></h2>
<p data-tool="mdniceç¼è¾å¨"><span>æ¯æè¯­è¨ï¼C#ãF#ãVB.NETã</span></p>
<h2 data-tool="mdniceç¼è¾å¨"><span>åºç¨åºæ¯</span></h2>
<ul class="list-paddingleft-1">
<li><strong>ååæµè¯ / éææµè¯</strong><span>ï¼å¿«éçæç¬¦åä¸å¡æ¨¡åçæµè¯å¯¹è±¡ï¼æ¿ä»£æå·¥ Mock æ°æ®ã</span></li>
<li><strong>æ°æ®åºå¡«åï¼Seedï¼</strong><span>ï¼å¼å/æµè¯ç¯å¢æ°æ®åºå¡«åçå®æåè¶³çåæ°æ®ã</span></li>
<li><strong>æ§è½ä¸ååæµè¯</strong><span>ï¼æ¹éçæå¤§è§æ¨¡æ°æ®éæ¥æ¨¡æçå®è´è½½ã</span></li>
<li><strong>API å¼åè°è¯</strong><span>ï¼å¿«éæé  API è¿åçæ¨¡æååºæ°æ®ã</span></li>
<li><strong>æ°æ®è±æ</strong><span>ï¼æ¿æ¢çäº§æ°æ®ä¸­çææä¿¡æ¯ã</span></li>
</ul>
<h2 data-tool="mdniceç¼è¾å¨"><span>æ¯æä»¥ä¸è¯­è¨ç¯å¢</span></h2>
<p data-tool="mdniceç¼è¾å¨"><span>Bogus æ¯æä»¥ä¸è¯­è¨ç¯å¢ï¼</span></p>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202602/1336199-20260210204126119-365582300.png" alt="image" loading="lazy"></p>
<h2 data-tool="mdniceç¼è¾å¨"><span>åå»ºä¸ä¸ª .NET æ§å¶å°åºç¨</span></h2>
<p data-tool="mdniceç¼è¾å¨"><span>æ¥ä¸æ¥æä»¬åå»ºä¸ä¸ªåä¸ºï¼<code>BogusExercise</code><span>&nbsp;.NET 9 æ§å¶å°åºç¨ï¼</span></span></p>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202602/1336199-20260210204138344-430453000.png" alt="image" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202602/1336199-20260210204143376-267148763.png" alt="image" loading="lazy"></p>
<h2 data-tool="mdniceç¼è¾å¨"><span>é¡¹ç® NuGet å®è£</span></h2>
<p data-tool="mdniceç¼è¾å¨"><span>å¨ NuGet åç®¡çå¨æ§å¶å°ä¸­æ§è¡ï¼</span></p>
<pre data-tool="mdniceç¼è¾å¨"><span data-cacheurl="" data-remoteid="" data-lazy-bgimg="https://mmbiz.qpic.cn/mmbiz_svg/Q3auHgzwzM6Jg5J8EJvQbtA6S7SiakTUXVlTExDYwFauib17gnDjmuJAK3CSicOeB0nS7dwzjibRlWm6qARn1Z6ZuvWufbYrYNFme9qak633SahG0umArx2T1w/640?wx_fmt=svg&amp;from=appmsg" data-src="https://mmbiz.qpic.cn/mmbiz_svg/Q3auHgzwzM6Jg5J8EJvQbtA6S7SiakTUXVlTExDYwFauib17gnDjmuJAK3CSicOeB0nS7dwzjibRlWm6qARn1Z6ZuvWufbYrYNFme9qak633SahG0umArx2T1w/640?wx_fmt=svg&amp;from=appmsg#imgIndex=9" data-fail="0"><code><span>Install-Package Bogus<span><br></span></span></code></span></pre>
<p data-tool="mdniceç¼è¾å¨"><span>æèå¨ NuGet åç®¡çå¨ä¸­æç´¢å®è£ï¼</span></p>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202602/1336199-20260210204211714-738946793.png" alt="image" loading="lazy"></p>
<h2 data-tool="mdniceç¼è¾å¨"><span>Bogus å¿«éå¥é¨</span></h2>
<h3 data-tool="mdniceç¼è¾å¨"><span>çæ 3 ä¸ªéæºè®¢åçæ¨¡æç¨æ·ä¿¡æ¯</span></h3>
<p data-tool="mdniceç¼è¾å¨"><span>ä»¥ä¸æ¯ Bogus ä»åºä¸­æä¾çç¤ºä¾ä»£ç ï¼ä½¿ç¨ Bogus çæäº 3 ä¸ªå¸¦éæºè®¢åçæ¨¡æç¨æ·ã</span></p>
<pre data-tool="mdniceç¼è¾å¨"><span data-cacheurl="" data-remoteid="" data-lazy-bgimg="https://mmbiz.qpic.cn/mmbiz_svg/Q3auHgzwzM5PgUhjfvCQWKxbcqn66p8vaN78jtJk6DZXqnDCEetmdiaeqdg2dWFcQlta2mWyIEXicYezNbaomKjMVJUEHCiaP3IVt7eQbvYUSgqE7sGalFhYg/640?wx_fmt=svg&amp;from=appmsg" data-src="https://mmbiz.qpic.cn/mmbiz_svg/Q3auHgzwzM5PgUhjfvCQWKxbcqn66p8vaN78jtJk6DZXqnDCEetmdiaeqdg2dWFcQlta2mWyIEXicYezNbaomKjMVJUEHCiaP3IVt7eQbvYUSgqE7sGalFhYg/640?wx_fmt=svg&amp;from=appmsg#imgIndex=10" data-fail="0"><code><span>&nbsp; &nbsp;&nbsp;public<span>&nbsp;classProgram<span><br><span>&nbsp; &nbsp; {<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span>static<span>&nbsp;<span>void<span>&nbsp;<span>Main<span>(<span>string<span>[] args<span>)<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; {<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;//çæ 3 ä¸ªéæºè®¢åçæ¨¡æç¨æ·ä¿¡æ¯<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;var<span>&nbsp;users = GenerateSampleUsers(3<span>);<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; }<span><br><span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;<span>&lt;summary&gt;<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;çæéæºè®¢åçæ¨¡æç¨æ·<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;<span>&lt;/summary&gt;<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;<span>&lt;param name="count"&gt;<span>&lt;/param&gt;<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;<span>&lt;returns&gt;<span>&lt;/returns&gt;<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span>public<span>&nbsp;<span>static<span>&nbsp;List&lt;User&gt;&nbsp;<span>GenerateSampleUsers<span>(<span>int<span>&nbsp;count =&nbsp;<span>3<span>)<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; {<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;// è®¾ç½®éæºç§å­ï¼çæå¯éå¤çæ°æ®é<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Randomizer.Seed =&nbsp;new<span>&nbsp;Random(3897234<span>);<span><br><span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;var<span>&nbsp;fruit =&nbsp;new<span>[] {&nbsp;"apple"<span>,&nbsp;"banana"<span>,&nbsp;"orange"<span>,&nbsp;"strawberry"<span>,&nbsp;"kiwi"<span>&nbsp;};<span><br><span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;var<span>&nbsp;orderIds =&nbsp;0<span>;<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;var<span>&nbsp;testOrders =&nbsp;new<span>&nbsp;Faker&lt;Order&gt;()<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;// å¼å¯ä¸¥æ ¼æ¨¡å¼ï¼ç¡®ä¿ææå±æ§é½æè§å<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .StrictMode(true<span>)<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;// OrderId èªå¢<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .RuleFor(o =&gt; o.OrderId, f =&gt; orderIds++)<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;// ä»æ°´æç¯®ä¸­éæºæé<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .RuleFor(o =&gt; o.Item, f =&gt; f.PickRandom(fruit))<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;// éæºæ°é 1~10<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .RuleFor(o =&gt; o.Quantity, f =&gt; f.Random.Number(1<span>,&nbsp;10<span>))<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;// å¯ç©º int?ï¼80% æ¦çä¸º null<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .RuleFor(o =&gt; o.LotNumber, f =&gt; f.Random.Int(0<span>,&nbsp;100<span>).OrNull(f,&nbsp;.8<span>f));<span><br><span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;var<span>&nbsp;userIds =&nbsp;0<span>;<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;var<span>&nbsp;testUsers =&nbsp;new<span>&nbsp;Faker&lt;User&gt;()<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;// èªå®ä¹æé å½æ°<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .CustomInstantiator(f =&gt;&nbsp;new<span>&nbsp;User(userIds++, f.Random.Replace("###-##-####"<span>)))<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;// åºæ¬è§å<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .RuleFor(u =&gt; u.FirstName, f =&gt; f.Name.FirstName())<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .RuleFor(u =&gt; u.LastName, f =&gt; f.Name.LastName())<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .RuleFor(u =&gt; u.Avatar, f =&gt; f.Internet.Avatar())<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .RuleFor(u =&gt; u.UserName, (f, u) =&gt; f.Internet.UserName(u.FirstName, u.LastName))<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .RuleFor(u =&gt; u.Email, (f, u) =&gt; f.Internet.Email(u.FirstName, u.LastName))<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .RuleFor(u =&gt; u.SomethingUnique, f =&gt;&nbsp;<span>$"Value&nbsp;<span>{f.UniqueIndex}<span>"<span>)<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .RuleFor(u =&gt; u.SomeGuid, Guid.NewGuid)<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;// éæºéåæä¸¾<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .RuleFor(u =&gt; u.Gender, f =&gt; f.PickRandom&lt;Gender&gt;())<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .RuleFor(u =&gt; u.CartId, f =&gt; Guid.NewGuid())<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;// ç»åå±æ§ï¼å©ç¨å·²çæç FirstName å LastName<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .RuleFor(u =&gt; u.FullName, (f, u) =&gt; u.FirstName +&nbsp;" "<span>&nbsp;+ u.LastName)<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;// åµå¥éåçæ<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .RuleFor(u =&gt; u.Orders, f =&gt; testOrders.Generate(3<span>))<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;// çæå®æåçåè°<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .FinishWith((f, u) =&gt;<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Console.WriteLine("User Created! Name={0}"<span>, u.FullName);<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; });<span><br><span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;// ä¸æ¬¡çæ 3 ä¸ªç¨æ·<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;return<span>&nbsp;testUsers.Generate(count);<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; }<span><br><span>&nbsp; &nbsp; }<span><br><span><br><span>&nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;<span>&lt;summary&gt;<span><br><span>&nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;è®¢åå®ä½<span><br><span>&nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;<span>&lt;/summary&gt;<span><br><span>&nbsp; &nbsp;&nbsp;publicclassOrder<span><br><span>&nbsp; &nbsp; {<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;publicint<span>&nbsp;OrderId {&nbsp;get<span>;&nbsp;set<span>; }<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;publicstring<span>&nbsp;Item {&nbsp;get<span>;&nbsp;set<span>; }<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;publicint<span>&nbsp;Quantity {&nbsp;get<span>;&nbsp;set<span>; }<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;publicint<span>? LotNumber {&nbsp;get<span>;&nbsp;set<span>; }<span><br><span>&nbsp; &nbsp; }<span><br><span><br><span>&nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;<span>&lt;summary&gt;<span><br><span>&nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;æ§å«æä¸¾<span><br><span>&nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;<span>&lt;/summary&gt;<span><br><span>&nbsp; &nbsp;&nbsp;publicenum<span>&nbsp;Gender<span><br><span>&nbsp; &nbsp; {<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; Male,<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; Female<span><br><span>&nbsp; &nbsp; }<span><br><span><br><span>&nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;<span>&lt;summary&gt;<span><br><span>&nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;ç¨æ·å®ä½<span><br><span>&nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;<span>&lt;/summary&gt;<span><br><span>&nbsp; &nbsp;&nbsp;publicclassUser<span><br><span>&nbsp; &nbsp; {<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span>public<span>&nbsp;<span>User<span>(<span>int<span>&nbsp;userId,&nbsp;<span>string<span>&nbsp;ssn<span>)<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; {<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;this<span>.Id = userId;<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;this<span>.SSN = ssn;<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; }<span><br><span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;publicint<span>&nbsp;Id {&nbsp;get<span>;&nbsp;set<span>; }<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;publicstring<span>&nbsp;FirstName {&nbsp;get<span>;&nbsp;set<span>; }<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;publicstring<span>&nbsp;LastName {&nbsp;get<span>;&nbsp;set<span>; }<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;publicstring<span>&nbsp;FullName {&nbsp;get<span>;&nbsp;set<span>; }<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;publicstring<span>&nbsp;UserName {&nbsp;get<span>;&nbsp;set<span>; }<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;publicstring<span>&nbsp;Email {&nbsp;get<span>;&nbsp;set<span>; }<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;publicstring<span>&nbsp;SomethingUnique {&nbsp;get<span>;&nbsp;set<span>; }<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;public<span>&nbsp;Guid SomeGuid {&nbsp;get<span>;&nbsp;set<span>; }<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;publicstring<span>&nbsp;Avatar {&nbsp;get<span>;&nbsp;set<span>; }<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;public<span>&nbsp;Guid CartId {&nbsp;get<span>;&nbsp;set<span>; }<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;publicstring<span>&nbsp;SSN {&nbsp;get<span>;&nbsp;set<span>; }<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;public<span>&nbsp;Gender Gender {&nbsp;get<span>;&nbsp;set<span>; }<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;public<span>&nbsp;List&lt;Order&gt; Orders {&nbsp;get<span>;&nbsp;set<span>; }<span><br><span>&nbsp; &nbsp; }<span><br></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></span></pre>
<h3 data-tool="mdniceç¼è¾å¨"><span>çæéæºç¨æ·ä¿¡æ¯</span></h3>
<p data-tool="mdniceç¼è¾å¨"><span>ä½¿ç¨ Bogus å¿«éçæéæºç¨æ·å§åãé®ç®±ãå°åãçµè¯ç­å³èæ°æ®ï¼</span></p>
<pre data-tool="mdniceç¼è¾å¨"><span data-cacheurl="" data-remoteid="" data-lazy-bgimg="https://mmbiz.qpic.cn/mmbiz_svg/Q3auHgzwzM5sx6Ey3PVibjLRStrhQeBsffvMc9r1M3YxbZt5vPoFniaB50h2qxIicicbUGic90yViaXOBj9pMgLWwHqichMgnQBic5GQWbdbNYoepwB1ia9IkIMOQVA/640?wx_fmt=svg&amp;from=appmsg" data-src="https://mmbiz.qpic.cn/mmbiz_svg/Q3auHgzwzM5sx6Ey3PVibjLRStrhQeBsffvMc9r1M3YxbZt5vPoFniaB50h2qxIicicbUGic90yViaXOBj9pMgLWwHqichMgnQBic5GQWbdbNYoepwB1ia9IkIMOQVA/640?wx_fmt=svg&amp;from=appmsg#imgIndex=11" data-fail="0"><code><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;<span>&lt;summary&gt;<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;çæéæºç¨æ·ä¿¡æ¯<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;<span>&lt;/summary&gt;<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span>public<span>&nbsp;<span>static<span>&nbsp;<span>void<span>&nbsp;<span>GenerateRandomData<span>(<span>)<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; {<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;// èªå¨çæå§åãé®ç®±ãå°åãçµè¯ç­å³èæ°æ®<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;var<span>&nbsp;faker =&nbsp;new<span>&nbsp;Faker("zh_CN"<span>);// ä½¿ç¨ç®ä½ä¸­æ<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;var<span>&nbsp;randomName = faker.Name.FullName();<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;var<span>&nbsp;randomEmail = faker.Internet.Email();<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;var<span>&nbsp;randomAddress = faker.Address.FullAddress();<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;var<span>&nbsp;randomPhone = faker.Phone.PhoneNumber();<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Console.WriteLine(<span>$"Name:&nbsp;<span>{randomName}<span>"<span>);<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Console.WriteLine(<span>$"Email:&nbsp;<span>{randomEmail}<span>"<span>);<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Console.WriteLine(<span>$"Address:&nbsp;<span>{randomAddress}<span>"<span>);<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Console.WriteLine(<span>$"Phone:&nbsp;<span>{randomPhone}<span>"<span>);<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; }<span><br></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></span></pre>
<h3 data-tool="mdniceç¼è¾å¨"><span>EF Core æ°æ®åºç§å­æ°æ®å¡«å</span></h3>
<p data-tool="mdniceç¼è¾å¨"><span>ä½¿ç¨ EF Core å¡«å Blog &amp; Post æ°æ®ï¼</span></p>
<pre data-tool="mdniceç¼è¾å¨"><span data-cacheurl="" data-remoteid="" data-lazy-bgimg="https://mmbiz.qpic.cn/mmbiz_svg/Q3auHgzwzM4Zvic0C12x0uoIKPy9g3UcWObNPbjW1cOSYgibbF1IFBjDVASsI5wicyOssTkdH1iah1Bj5yLskEjTzIVaqIMqsnCFtj8ywZpiaSALjWKa5MoibTRA/640?wx_fmt=svg&amp;from=appmsg" data-src="https://mmbiz.qpic.cn/mmbiz_svg/Q3auHgzwzM4Zvic0C12x0uoIKPy9g3UcWObNPbjW1cOSYgibbF1IFBjDVASsI5wicyOssTkdH1iah1Bj5yLskEjTzIVaqIMqsnCFtj8ywZpiaSALjWKa5MoibTRA/640?wx_fmt=svg&amp;from=appmsg#imgIndex=12" data-fail="0"><code><span>&nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;<span>&lt;summary&gt;<span><br><span>&nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;EF Core æ°æ®åºç§å­æ°æ®å¡«å<span><br><span>&nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;éåå¼å/æµè¯ç¯å¢ï¼å¨åºç¨å¯å¨æ¶èªå¨å¡«åæ°æ®ï¼<span><br><span>&nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;FakeData.Init(10); // çæ 10 ä¸ª Blogï¼æ¯ä¸ªåå« 3~5 ç¯ Post<span><br><span>&nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;<span>&lt;/summary&gt;<span><br><span>&nbsp; &nbsp;&nbsp;publicstaticclassFakeData<span><br><span>&nbsp; &nbsp; {<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;publicstatic<span>&nbsp;List&lt;Blog&gt; Blogs =&nbsp;new<span>&nbsp;List&lt;Blog&gt;();<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;publicstatic<span>&nbsp;List&lt;Post&gt; Posts =&nbsp;new<span>&nbsp;List&lt;Post&gt;();<span><br><span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span>public<span>&nbsp;<span>static<span>&nbsp;<span>void<span>&nbsp;<span>Init<span>(<span>int<span>&nbsp;count<span>)<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; {<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;var<span>&nbsp;postId =&nbsp;1<span>;<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;var<span>&nbsp;postFaker =&nbsp;new<span>&nbsp;Faker&lt;Post&gt;()<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .RuleFor(p =&gt; p.PostId, _ =&gt; postId++)<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .RuleFor(p =&gt; p.Title, f =&gt; f.Hacker.Phrase())<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .RuleFor(p =&gt; p.Content, f =&gt; f.Lorem.Sentence());<span><br><span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;var<span>&nbsp;blogId =&nbsp;1<span>;<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;var<span>&nbsp;blogFaker =&nbsp;new<span>&nbsp;Faker&lt;Blog&gt;()<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .RuleFor(b =&gt; b.BlogId, _ =&gt; blogId++)<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .RuleFor(b =&gt; b.Url, f =&gt; f.Internet.Url())<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .RuleFor(b =&gt; b.Posts, (f, b) =&gt;<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; postFaker.RuleFor(p =&gt; p.BlogId, _ =&gt; b.BlogId);<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;var<span>&nbsp;posts = postFaker.GenerateBetween(3<span>,&nbsp;5<span>);<span><br><span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;// å³é®ï¼æ¶éææ Posts å°éæåè¡¨ä¸­<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Posts.AddRange(posts);<span><br><span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;return<span>&nbsp;posts;<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; });<span><br><span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;// æ¸ç©ºæ§æ°æ®ï¼é¿åéå¤è°ç¨ç´¯ç§¯<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Blogs.Clear();<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Posts.Clear();<span><br><span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Blogs = blogFaker.Generate(count);<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; }<span><br><span>&nbsp; &nbsp; }<span><br><span><br><span>&nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;<span>&lt;summary&gt;<span><br><span>&nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;Blog<span><br><span>&nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;<span>&lt;/summary&gt;<span><br><span>&nbsp; &nbsp;&nbsp;publicclassBlog<span><br><span>&nbsp; &nbsp; {<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;publicint<span>&nbsp;BlogId {&nbsp;get<span>;&nbsp;set<span>; }<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;publicstring<span>&nbsp;Url {&nbsp;get<span>;&nbsp;set<span>; }<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;public<span>&nbsp;List&lt;Post&gt; Posts {&nbsp;get<span>;&nbsp;set<span>; }<span><br><span>&nbsp; &nbsp; }<span><br><span><br><span>&nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;<span>&lt;summary&gt;<span><br><span>&nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;Post<span><br><span>&nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;<span>&lt;/summary&gt;<span><br><span>&nbsp; &nbsp;&nbsp;publicclassPost<span><br><span>&nbsp; &nbsp; {<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;publicint<span>&nbsp;PostId {&nbsp;get<span>;&nbsp;set<span>; }<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;publicstring<span>&nbsp;Title {&nbsp;get<span>;&nbsp;set<span>; }<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;publicstring<span>&nbsp;Content {&nbsp;get<span>;&nbsp;set<span>; }<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;publicint<span>&nbsp;BlogId {&nbsp;get<span>;&nbsp;set<span>; }<span><br><span>&nbsp; &nbsp; }<span><br></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></span></pre>
<p data-tool="mdniceç¼è¾å¨"><span>å¨ Program.cs å¯å¨æ¶å¡«åï¼</span></p>
<pre data-tool="mdniceç¼è¾å¨"><span data-cacheurl="" data-remoteid="" data-lazy-bgimg="https://mmbiz.qpic.cn/mmbiz_svg/Q3auHgzwzM5VylnOKoL0wvgmkbJ2fq7VPgicygWtYrDJuYUbJFqrkXjfjOrlD2hKnFRia70Tgc3vWZg0PTa53FTsnB8iajLhMSCTe2CAL7yGhUVibPtFGzBib3Q/640?wx_fmt=svg&amp;from=appmsg" data-src="https://mmbiz.qpic.cn/mmbiz_svg/Q3auHgzwzM5VylnOKoL0wvgmkbJ2fq7VPgicygWtYrDJuYUbJFqrkXjfjOrlD2hKnFRia70Tgc3vWZg0PTa53FTsnB8iajLhMSCTe2CAL7yGhUVibPtFGzBib3Q/640?wx_fmt=svg&amp;from=appmsg#imgIndex=13" data-fail="0"><code><span>&nbsp; &nbsp;&nbsp;public<span>&nbsp;classProgram<span><br><span>&nbsp; &nbsp; {<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span>public<span>&nbsp;<span>static<span>&nbsp;<span>void<span>&nbsp;<span>Main<span>(<span>string<span>[] args<span>)<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; {<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;var<span>&nbsp;builder = WebApplication.CreateBuilder(args);<span><br><span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;// æ³¨å DbContext<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; builder.Services.AddDbContext&lt;BlogDbContext&gt;(options =&gt;<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; options.UseSqlServer(builder.Configuration.GetConnectionString("DefaultConnection"<span>)));<span><br><span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;var<span>&nbsp;app = builder.Build();<span><br><span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;// åºç¨å¯å¨æ¶å¡«åç§å­æ°æ®<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;using<span>&nbsp;(var<span>&nbsp;scope = app.Services.CreateScope())<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;var<span>&nbsp;context = scope.ServiceProvider.GetRequiredService&lt;BlogDbContext&gt;();<span><br><span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;// ç¡®ä¿æ°æ®åºå·²åå»º<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context.Database.EnsureCreated();<span><br><span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;// ä»å¨æ°æ®åºä¸ºç©ºæ¶å¡«ååæ°æ®<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;if<span>&nbsp;(!context.Blogs.Any())<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FakeData.Init(10<span>);&nbsp;// çæ 10 ä¸ª Blogï¼æ¯ä¸ªåå« 3~5 ç¯ Post<span><br><span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context.Blogs.AddRange(FakeData.Blogs);<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context.Posts.AddRange(FakeData.Posts);<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context.SaveChanges();<span><br><span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Console.WriteLine(<span>$"å·²å¡«å&nbsp;<span>{FakeData.Blogs.Count}<span>&nbsp;ä¸ªåå®¢,&nbsp;<span>{FakeData.Posts.Count}<span>&nbsp;ç¯æç« "<span>);<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<span><br><span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; app.MapControllers();<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; app.Run();<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; }<span><br><span>&nbsp; &nbsp; }<span><br></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></span></pre>
<h3 data-tool="mdniceç¼è¾å¨"><span>èªå®ä¹æ©å± Bogus æ°æ®é</span></h3>
<p data-tool="mdniceç¼è¾å¨"><span>å¼åèå¯ä»¥è½»æ¾æ©å± Bogusï¼æ·»å èªå®ä¹çæ°æ®çæå¨ï¼</span></p>
<pre data-tool="mdniceç¼è¾å¨"><span data-cacheurl="" data-remoteid="" data-lazy-bgimg="https://mmbiz.qpic.cn/mmbiz_svg/Q3auHgzwzM4gF2l1SiaFXxiaZxkYg4rv6JObGaFKSDgibZMtbmQoVrX0hnfEnPXht9dv7x7g6mCH5mcUBTEzSQRJXTryO29UZMetjq6WlBeU8fWsyPBB9WEsw/640?wx_fmt=svg&amp;from=appmsg" data-src="https://mmbiz.qpic.cn/mmbiz_svg/Q3auHgzwzM4gF2l1SiaFXxiaZxkYg4rv6JObGaFKSDgibZMtbmQoVrX0hnfEnPXht9dv7x7g6mCH5mcUBTEzSQRJXTryO29UZMetjq6WlBeU8fWsyPBB9WEsw/640?wx_fmt=svg&amp;from=appmsg#imgIndex=14" data-fail="0"><code><span>&nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;<span>&lt;summary&gt;<span><br><span>&nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;ä¸º Bogus ç Faker ç±»æä¾é£åç¸å³çèªå®ä¹åæ°æ®æ©å±æ¹æ³<span><br><span>&nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;<span>&lt;/summary&gt;<span><br><span>&nbsp; &nbsp;&nbsp;publicstaticclassFoodExtensions<span><br><span>&nbsp; &nbsp; {<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;<span>&lt;summary&gt;<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;çæä¸ä¸ªéæºçç³æåç§°<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;<span>&lt;/summary&gt;<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;<span>&lt;param name="faker"&gt;<span>&lt;/param&gt;<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;<span>&lt;returns&gt;<span>&lt;/returns&gt;<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span>public<span>&nbsp;<span>static<span>&nbsp;<span>string<span>&nbsp;<span>Candy<span>(<span>this<span>&nbsp;Faker faker<span>)<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; {<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;return<span>&nbsp;faker.PickRandom(new<span>[] {&nbsp;"å·§åå"<span>,&nbsp;"æ£æ£ç³"<span>,&nbsp;"å£é¦ç³"<span>,&nbsp;"è½¯ç³"<span>,&nbsp;"å¤ªå¦ç³"<span>&nbsp;});<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; }<span><br><span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;<span>&lt;summary&gt;<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;çæä¸ä¸ªéæºçé¥®ååç§°<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;<span>&lt;/summary&gt;<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;<span>&lt;param name="faker"&gt;<span>&lt;/param&gt;<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span>///<span>&nbsp;<span>&lt;returns&gt;<span>&lt;/returns&gt;<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span>public<span>&nbsp;<span>static<span>&nbsp;<span>string<span>&nbsp;<span>Drink<span>(<span>this<span>&nbsp;Faker faker<span>)<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; {<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;return<span>&nbsp;faker.PickRandom(new<span>[] {&nbsp;"å¯ä¹"<span>,&nbsp;"éªç¢§"<span>,&nbsp;"æ©æ±"<span>,&nbsp;"åå¡"<span>,&nbsp;"çå¥¶"<span>&nbsp;});<span><br><span>&nbsp; &nbsp; &nbsp; &nbsp; }<span><br><span>&nbsp; &nbsp; }<span><br><span>&nbsp; &nbsp;&nbsp;<span><br><span>&nbsp; &nbsp;&nbsp;// ä½¿ç¨èªå®ä¹æ©å±<span><br><span>&nbsp; &nbsp;&nbsp;var<span>&nbsp;faker =&nbsp;new<span>&nbsp;Faker();<span><br><span>&nbsp; &nbsp; Console.WriteLine(<span>$"æç±ç³æ:&nbsp;<span>{faker.Candy()}<span>"<span>);<span><br><span>&nbsp; &nbsp; Console.WriteLine(<span>$"æç±é¥®æ:&nbsp;<span>{faker.Drink()}<span>"<span>);<span><br></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></span></pre>
<h2 data-tool="mdniceç¼è¾å¨"><span>é¡¹ç®æºç å°å</span></h2>
<p data-tool="mdniceç¼è¾å¨"><span>æ´å¤é¡¹ç®å®ç¨åè½åç¹æ§æ¬¢è¿åå¾é¡¹ç®å¼æºå°åæ¥çðï¼å«å¿äºç»é¡¹ç®ä¸ä¸ªStaræ¯æðã</span></p>
<ul class="list-paddingleft-1">
<li><strong>GitHubå¼æºå°åï¼</strong><span style="color: rgba(0, 0, 255, 1)"><a href="https://github.com/bchavez/Bogus" target="_blank" rel="noopener nofollow"><span style="color: rgba(0, 0, 255, 1)">https://github.com/bchavez/Bogus</span></a></span></li>
<li><strong>æç« ä»£ç ç¤ºä¾ï¼</strong><span style="color: rgba(0, 0, 255, 1)"><a href="https://github.com/YSGStudyHards/DotNetExercises/tree/master/BogusExercise" target="_blank" rel="noopener nofollow"><span style="color: rgba(0, 0, 255, 1)">https://github.com/YSGStudyHards/DotNetExercises/tree/master/BogusExercise</span></a></span></li>
</ul>
<h2 data-tool="mdniceç¼è¾å¨"><span>ä¼ç§é¡¹ç®åæ¡æ¶ç²¾é</span></h2>
<p data-tool="mdniceç¼è¾å¨"><span>è¯¥é¡¹ç®å·²æ¶å½å°C#/.NET/.NET Coreä¼ç§é¡¹ç®åæ¡æ¶ç²¾éä¸­ï¼å³æ³¨ä¼ç§é¡¹ç®åæ¡æ¶ç²¾éè½è®©ä½ åæ¶äºè§£C#ã.NETå.NET Coreé¢åçææ°å¨æåæä½³å®è·µï¼æé«å¼åå·¥ä½æçåè´¨éãåå·²æï¼æ¬¢è¿å¤§å®¶è¸è·æäº¤PRæ¨èæèªèï¼<strong>è®©ä¼ç§çé¡¹ç®åæ¡æ¶ä¸è¢«åæ²¡ð¤</strong><span>ï¼ã</span></span></p>
<ul class="list-paddingleft-1">
<li><strong>GitHubå¼æºå°åï¼</strong><span style="color: rgba(0, 0, 255, 1)"><a href="https://github.com/YSGStudyHards/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md" target="_blank" rel="noopener nofollow"><span style="color: rgba(0, 0, 255, 1)">https://github.com/YSGStudyHards/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md</span></a></span></li>
<li><strong>Giteeå¼æºå°åï¼</strong><span style="color: rgba(0, 0, 255, 1)"><a href="https://gitee.com/ysgdaydayup/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md" target="_blank" rel="noopener nofollow"><span style="color: rgba(0, 0, 255, 1)">https://gitee.com/ysgdaydayup/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md</span></a></span></li>
</ul>
<h2 id="activity-name" class="rich_media_title ">DotNetGuideææ¯ç¤¾åº</h2>
<ul>
<li>DotNetGuideææ¯ç¤¾åºæ¯ä¸ä¸ªé¢å.NETå¼åèçå¼æºææ¯ç¤¾åºï¼æ¨å¨ä¸ºå¼åèä»¬æä¾å¨é¢çC#/.NET/.NET Coreç¸å³å­¦ä¹ èµæãææ¯åäº«åå¨è¯¢ãé¡¹ç®æ¡æ¶æ¨èãæ±èåæèèµè®¯ãä»¥åè§£å³é®é¢çå¹³å°ã</li>
<li>å¨DotNetGuideææ¯ç¤¾åºä¸­ï¼å¼åèä»¬å¯ä»¥åäº«èªå·±çææ¯æç« ãé¡¹ç®ç»éªãå­¦ä¹ å¿å¾ãéå°ççé¾ææ¯é®é¢ä»¥åè§£å³æ¹æ¡ï¼å¹¶ä¸è¿ææºä¼ç»è¯å¿åéåçå¼åèã</li>
<li>æä»¬è´åäºæå»ºä¸ä¸ªç§¯æåä¸ãåè°ååç.NETææ¯äº¤æµå¹³å°ãæ è®ºæ¨æ¯åå­¦èè¿æ¯æä¸°å¯ç»éªçå¼åèï¼æä»¬é½å¸æè½ä¸ºæ¨æä¾æ´å¤çä»·å¼åæé¿æºä¼ã</li>
</ul>
<blockquote>
<p><span style="color: rgba(0, 0, 255, 1)"><a href="https://mp.weixin.qq.com/s/CbPvhmfK4ZWsHJj2eKMk7Q" rel="noopener nofollow" target="_blank"><span style="color: rgba(0, 0, 255, 1)"><strong>æ¬¢è¿å å¥DotNetGuideææ¯ç¤¾åºå¾®ä¿¡äº¤æµç¾¤ðª</strong></span></a></span></p>
</blockquote>

</div>
<div id="MySignature" role="contentinfo">
    <blockquote>
<p style="font-family:YouYuan;font-size: 16px;margin: 0 auto 0.01em auto;"><span style="font-size: 17px; ">ä½èåç§°ï¼</span><a href="https://www.cnblogs.com/Can-daydayup/" target="_blank">è¿½éæ¶åè</a></p>
<p style="font-family:YouYuan;font-size: 16px;margin: 0 auto 0.01em auto;"><span style="font-size: 17px; ">ä½èç®ä»ï¼</span>ä¸ä¸ªç­ç±ç¼ç¨ãåäºåäº«ãåæ¬¢å­¦ä¹ ãæ¢ç´¢ãå°è¯æ°äºç©åæ°ææ¯çå¨æ è½¯ä»¶å·¥ç¨å¸ã</p>
<p style="font-family:YouYuan;font-size: 16px;margin: 0 auto 0.01em auto;">
æ¬æçæå½ä½èååå®¢å­å±æï¼æ¬¢è¿è½¬è½½ï¼ä½æªç»ä½èåæå¿é¡»ä¿çæ­¤æ®µå£°æï¼ä¸å¨æç« é¡µé¢ææ¾ä½ç½®ç»åºåæé¾æ¥ï¼å¦åä¿çè¿½ç©¶æ³å¾è´£ä»»çæå©ãå¦æè¯¥ç¯æç« å¯¹æ¨æå¸®å©çè¯ï¼å¯ä»¥ç¹ä¸ä¸å³ä¸è§ç<a onclick="votePost(cb_entryId,'Digg')" href="javascript:void(0)" style="color:red;">ãâ¥æ¨èâ¥ã</a>ï¼å¸æè½å¤æç»­çä¸ºå¤§å®¶å¸¦æ¥å¥½çææ¯æç« ï¼æä¸­å¯è½å­å¨æè¿°ä¸æ­£ç¡®çå°æ¹ï¼æ¬¢è¿ææ­£æè¡¥åï¼ä¸èææ¿ã
</p>
</blockquote>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-11 00:53">2026-02-11 00:52</span>&nbsp;
<a href="https://www.cnblogs.com/Can-daydayup">è¿½éæ¶åè</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19601424);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19601424', targetLink: 'https://www.cnblogs.com/Can-daydayup/p/19601424', title: 'ä¸æ¬¾å¼æºãå¼ºå¤§ãç®åæç¨ç .NET åæ°æ®çæå©å¨' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ OData åè®®çæºè½åè¯­ä¹äºæä½ ]]></title>
    <link>https://www.cnblogs.com/shanyou/p/19601411</link>
    <guid>6e705b1a67313985bd02087bca7f30a1</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/shanyou/p/19601411" title="åå¸äº 2026-02-10 20:40">
    <span role="heading" aria-level="2">OData åè®®çæºè½åè¯­ä¹äºæä½</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        query-craft-mcp åå½äº LLM ä¸ OData æå¡ä¹é´çè¯­ä¹æ¡¥æ¢ï¼è§£å³ OData v4 è¯­æ³å¤æä¸å¯¹å¤§å°åææçé®é¢
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>å¨å½ä»å¤æå¤åçä¼ä¸æ°å­åè½¬åè¿ç¨ä¸­ï¼æ°æ®åè®®çæ ååä¸äºæä½æ§å·²æä¸ºæ¯æä¸å¡ææ·æ§ä¸å³ç­æºè½çæ ¸å¿åºç³ãå¼æ¾æ°æ®åè®®ï¼Open Data Protocolï¼ç®ç§° ODataï¼ä½ä¸ºä¸ç§åºäº REST æ¶æé£æ ¼çå¼æ¾åè®®ï¼èª 2007 å¹´ç±å¾®è½¯å¬å¸ï¼Microsoftï¼åèµ·ä»¥æ¥ï¼ç»åäºä»ç§æè§èå°å¨çå¬è®¤å½éæ åçåä¸½èåãOData çæ ¸å¿ç®æ å¨äºæä¾ä¸ç§æ ååçæ¹å¼æ¥åå»ºåæ¶è´¹å¯æ¥è¯¢ä¸äºæä½ç Web APIï¼ä»èæç ´æ°æ®å­¤å²ï¼æåè·¨ç³»ç»æ°æ®çå±äº«ä»·å¼ã</p>
<h2 id="ä¸odata-åè®®çåå²èæ¯ä¸è®¾è®¡å²å­¦"><strong>ä¸ãOData åè®®çåå²èæ¯ä¸è®¾è®¡å²å­¦</strong></h2>
<p>OData çèµ·æºå¯ä»¥è¿½æº¯å° Web 2.0 æ¶ä»£å¯¹æ°æ®äº¤æ¢ç®ä¾¿æ§çè¿«åéæ±ãæ©æçä¼ä¸æå¡ä¸»è¦ä¾èµäº SOAP ç­åºäºå¨ä½çåè®®ï¼è¿ç±»åè®®è½ç¶ä¸¥è°¨ä½è¿äºæ²éä¸é¾ä»¥å¨ç°ä»£ Web ç¯å¢ä¸­çµæ´»é¨ç½²ãä¸ºäºè§£å³è¿äºææï¼å¾®è½¯æåæ¨åºäº OData v1.0 è³ v3.0 çæ¬ï¼å¹¶å°å¶ç½®äºå¾®è½¯å¼æ¾è§èæ¿è¯ºï¼Microsoft Open Specification Promiseï¼ä¹ä¸ãéçåè®®çæçï¼OData éæ¸æ­¥å¥æ ååè½¨éï¼v4.0 çæ¬æ­£å¼éè¿ OASIS èççæ ååå®¡æ ¸ï¼å¹¶æç»è·å¾ ISO/IEC çæ¹åï¼ISO/IEC 20802-1:2016ï¼ï¼ç¡®ç«äºå¶å¨ RESTful API é¢åçæå¨å°ä½ã</p>
<h3 id="æ ¸å¿è®¾è®¡åå"><strong>æ ¸å¿è®¾è®¡åå</strong></h3>
<p>OData çè®¾è®¡å²å­¦æ·±æ·±ææ ¹äº REST ååï¼åæ¶åå¨è¯­ä¹è¡¨è¾¾ä¸è¿è¡äºæ¾èå¢å¼ºãåæå¶è®¾è®¡ååï¼å¯ä»¥åç°äºä¸ªå³é®ç»´åº¦ï¼è¿äºç»´åº¦å±åææäºå¶å¨ä¼ä¸çº§åºç¨ä¸­çé§æ§ï¼</p>
<table>
<thead>
<tr>
<th style="text-align: left">æ ¸å¿åå</th>
<th style="text-align: left">æè¿°ä¸å®è·µå«ä¹</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left"><strong>éµå¾ª REST åå</strong></td>
<td style="text-align: left">å»ºç«å¨ HTTPãAtomPub å JSON ä¹ä¸ï¼ä½¿ç¨ URI æ è¯èµæºï¼å©ç¨æ å HTTP æ¹æ³æ§è¡æä½ã</td>
</tr>
<tr>
<td style="text-align: left"><strong>ä¿æç®åæ§</strong></td>
<td style="text-align: left">ä¼åè§£å³ 80% çéç¨åºæ¯ï¼ä¸ºå¤æéæ±æä¾å¯æ©å±æ§ï¼ç¡®ä¿åºç¡åè§æå¡çæå»ºé¨æ§è¾ä½ã</td>
</tr>
<tr>
<td style="text-align: left"><strong>å¢éå¼æå»º</strong></td>
<td style="text-align: left">åè®¸å¼åèä»æç®åçåªè¯»æå¡å¼å§ï¼éçä¸å¡éæ±éæ­¥å¼å¥æ¥è¯¢ãè¿æ»¤ãæåºååå¥è½åã</td>
</tr>
<tr>
<td style="text-align: left"><strong>é«åº¦å¯æ©å±æ§</strong></td>
<td style="text-align: left">æ¯æå¨ä¸ç ´åæ¢æå®¢æ·ç«¯å¼å®¹æ§çåæä¸ï¼å¼å¥ç¹å®é¢åçåè½æ©å±ï¼ç¡®ä¿æç»­æ¼è¿ã</td>
</tr>
<tr>
<td style="text-align: left"><strong>æ°æ®æºæ å³æ§</strong></td>
<td style="text-align: left">ä¸é¢è®¾åºå±æ°æ®å­å¨ææ¯ï¼æ è®ºæ¯å³ç³»åæ°æ®åºãæä»¶ç³»ç»è¿æ¯åå®¹ç®¡çç³»ç»ï¼åå¯ç»ä¸æ å°ã</td>
</tr>
</tbody>
</table>
<p>éè¿è¿ç§é«åº¦æ½è±¡çè®¾è®¡ï¼OData ä¸ä»ä»æ¯ä¸ä¸ªæ°æ®ä¼ è¾æ ¼å¼ï¼æ´æ¯ä¸ä¸ªå³äºå¦ä½æå»ºâå¥½âAPI çæä½³å®è·µéåãå®è®©å¼åèè½å¤å°ç²¾åéä¸­å¨ä¸å¡é»è¾ä¸ï¼èæ éä¸ºè¯·æ±/ååºå¤´ãç¶æç ãåªä½ç±»åæ URL çº¦å®ç­çç¢çææ¯ç»èå³ç¥ã</p>
<h2 id="äºå®ä½æ°æ®æ¨¡å-edm-ä¸åæ°æ®é©±å¨æ¶æ"><strong>äºãå®ä½æ°æ®æ¨¡å (EDM) ä¸åæ°æ®é©±å¨æ¶æ</strong></h2>
<p>OData ä¸ä¼ ç» RESTful API ææ¬è´¨çåºå«å¨äºå¶å¯¹âæ°æ®æ¨¡åâçæ¾å¼å®ä¹ãè¿ç§å®ä¹éè¿å®ä½æ°æ®æ¨¡åï¼Entity Data Model, EDMï¼å®ç°ï¼å®æ¯ OData è¯­ä¹äºæä½æ§ççµé­ã</p>
<h3 id="å®ä½æ°æ®æ¨¡åçç»æè¦ç´ "><strong>å®ä½æ°æ®æ¨¡åçç»æè¦ç´ </strong></h3>
<p>EDM åç¨äºå®ä½-èç³»ï¼ERï¼æ¨¡åçæ¦å¿µï¼å®ä¹äºä¸ä¸ªæ½è±¡çæ¦å¿µæ¨¡åæ¥æè¿°æå¡æ´é²çææèµæºãå¶æ ¸å¿ç»æé¨ååæ¬å®ä½éï¼EntitySetsï¼ãå®ä½ï¼Entitiesï¼ãå¤æç±»åï¼ComplexTypesï¼åæ éç±»åï¼Scalar Typesï¼ã</p>
<ol>
<li><strong>å®ä½ä¸å®ä½é</strong>ï¼å®ä½æ¯å·æå¯ä¸æ è¯ç¬¦ï¼Keyï¼çç»æåè®°å½ï¼éå¸¸å¯¹åºæ°æ®åºä¸­çä¸è¡ãå®ä½éåæ¯åç±»å®ä½çéåï¼ç±»ä¼¼äºæ°æ®åºè¡¨ãå¼å¾æ³¨æçæ¯ï¼ä¸ä¸ªå®ä½ç±»åå¯ä»¥å­å¨äºå¤ä¸ªå·æä¸ååç§°çå®ä½éä¸­ï¼è¿ä¸ºå¼åèæä¾äºæå¤§ççµæ´»æ§ã</li>
<li><strong>æ éç±»å</strong>ï¼EDM æ¥æä¸å¥åç½®çå¼ºç±»åç³»ç»ï¼ææå±æ§å¿é¡»å±äºé¢å®ä¹çæ éç±»åï¼å¦ Edm.String, Edm.Int32, Edm.DateTimeOffsetï¼ãè¿ç§å¼ºç±»åçº¦æç¡®ä¿äºè·¨å¹³å°ãè·¨è¯­è¨çæ°æ®äº¤æ¢å·æé«åº¦çä¸è´æ§ã</li>
<li><strong>å¤æç±»å</strong>ï¼åè®¸å°ä¸ç»æ éå±æ§ç»åå¨ä¸èµ·ï¼å½¢æå¯éç¨çç»æï¼ä½å¶æ¬èº«ä¸å·å¤å¯ä¸æ è¯ï¼å¿é¡»ä¾éäºå®ä½å­å¨ã</li>
<li><strong>å¯¼èªå±æ§ (Navigation Properties)</strong>ï¼æè¿°äºå®ä½ä¹é´çå³èå³ç³»ãéè¿å¯¼èªå±æ§ï¼å®¢æ·ç«¯å¯ä»¥ä»ä¸ä¸ªå®ä½è·³è½¬å°å¦ä¸ä¸ªç¸å³èçå®ä½æå®ä½éï¼è¿ææäº OData å¼ºå¤§çå¾å¯¼èªè½åã</li>
</ol>
<h3 id="æå¡ææ¡£ä¸åæ°æ®ææ¡£çä»·å¼"><strong>æå¡ææ¡£ä¸åæ°æ®ææ¡£çä»·å¼</strong></h3>
<p>ä¸ºäºå®ç°å®¢æ·ç«¯çâèªåç°âè½åï¼æ¯ä¸ä¸ª OData æå¡é½å¿é¡»æä¾ä¸¤ä¸ªæ ¸å¿ææ¡£ï¼</p>
<ul>
<li><strong>æå¡ææ¡£ (Service Document)</strong>ï¼ä½äºæå¡æ ¹è·¯å¾ï¼å¦ <a href="http://host/service/%EF%BC%89%EF%BC%8C%E5%88%97%E5%87%BA%E6%89%80%E6%9C%89%E5%8F%AF%E7%94%A8%E7%9A%84%E5%AE%9E%E4%BD%93%E9%9B%86%E3%80%81%E5%87%BD%E6%95%B0%E5%92%8C%E5%8D%95%E4%BE%8B%EF%BC%8C%E4%B8%BA%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%8F%90%E4%BE%9B%E5%AF%BC%E8%88%AA%E7%9A%84%E5%85%A5%E5%8F%A3%E7%82%B9%E3%80%82" target="_blank" rel="noopener nofollow">http://host/service/ï¼ï¼ååºææå¯ç¨çå®ä½éãå½æ°ååä¾ï¼ä¸ºå®¢æ·ç«¯æä¾å¯¼èªçå¥å£ç¹ã</a></li>
<li><strong>åæ°æ®ææ¡£ (Metadata Document)</strong>ï¼ä½äº $metadata è·¯å¾ä¸ï¼éç¨éç¨æ¶æå®ä¹è¯­è¨ï¼CSDLï¼ç¼åãå®æ¯æå¡çâè¯´æä¹¦âï¼è¯¦ç»æè¿°äºæ¯ç§ç±»åçå±æ§ãé®ãå¯¼èªè·¯å¾åæ¯æçæä½ã</li>
</ul>
<p>è¿ç§åæ°æ®é©±å¨çæ¶æä½¿å¾éç¨å·¥å·ï¼å¦ ExcelãPower BIãSalesforce Connect ç­ï¼è½å¤ä»éè¿è§£æ $metadata å³å¯çè§£æå¡çå¨é¨ç»æï¼ä»èå®ç°é¶éç½®çæ°æ®éæã</p>
<h2 id="ä¸ç³»ç»æ¥è¯¢éé¡¹url-é©±å¨çæ°æ®åæè½å"><strong>ä¸ãç³»ç»æ¥è¯¢éé¡¹ï¼URL é©±å¨çæ°æ®åæè½å</strong></h2>
<p>OData æä»¤ä¸çç§°éçç¹æ§æ¯å¶æä¸ºä¸°å¯çæ¥è¯¢è¯­è¨ãéè¿å¨ URL ä¸­éå ç³»ç»æ¥è¯¢éé¡¹ï¼ä»¥ $ ç¬¦å·å¼å¤´ï¼ï¼å®¢æ·ç«¯å¯ä»¥ç²¾ç¡®æ§å¶æå¡å¨è¿åçæ°æ®åå®¹åæ ¼å¼ï¼ä»èæå¤§å°ç¼è§£äº REST æ¶æä¸­å¸¸è§çâè¿åº¦è·åâï¼Over-fetchingï¼åâè·åä¸è¶³âï¼Under-fetchingï¼é®é¢ã</p>
<h3 id="åºç¡æ¥è¯¢æä½"><strong>åºç¡æ¥è¯¢æä½</strong></h3>
<p>ä¸è¡¨æ»ç»äº OData ä¸­æå¸¸ç¨çç³»ç»æ¥è¯¢éé¡¹åå¶åè½ï¼</p>
<table>
<thead>
<tr>
<th style="text-align: left">æ¥è¯¢éé¡¹</th>
<th style="text-align: left">åè½è¯´æ</th>
<th style="text-align: left">å¸åç¤ºä¾</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">$filter</td>
<td style="text-align: left">åºäºé»è¾è¡¨è¾¾å¼ç­éæ°æ®ã</td>
<td style="text-align: left">Products?$filter=Price lt 10 and startswith(Name,'M')</td>
</tr>
<tr>
<td style="text-align: left">$select</td>
<td style="text-align: left">æå®è¿åçå±æ§å­æ®µï¼ä¼åå¸¦å®½ã</td>
<td style="text-align: left">Customers?$select=Name,Email</td>
</tr>
<tr>
<td style="text-align: left">$expand</td>
<td style="text-align: left">åµå¥è¿åå³èå®ä½ï¼åå°å¾è¿è¯·æ±ã</td>
<td style="text-align: left">Orders?$expand=OrderItems</td>
</tr>
<tr>
<td style="text-align: left">$orderby</td>
<td style="text-align: left">å¯¹ç»æè¿è¡æåºï¼æ¯æå¤å­æ®µã</td>
<td style="text-align: left">Products?$orderby=Price desc, Name</td>
</tr>
<tr>
<td style="text-align: left">$top / $skip</td>
<td style="text-align: left">å®ç°å®¢æ·ç«¯åé¡µï¼éå¶è¿åæ¡æ°æè·³è¿å N æ¡ã</td>
<td style="text-align: left">Employees?$top=10&amp;$skip=20</td>
</tr>
<tr>
<td style="text-align: left">$count</td>
<td style="text-align: left">è¿åå¹éæ¡ä»¶çè®°å½æ»æ° ã</td>
<td style="text-align: left">Invoices?$count=true</td>
</tr>
<tr>
<td style="text-align: left">$search</td>
<td style="text-align: left">æ§è¡å¨ææç´¢ï¼éç¨äºéç»æåæ°æ®ã</td>
<td style="text-align: left">Products?$search=waterproof</td>
</tr>
</tbody>
</table>
<h3 id="æ°æ®èåæ©å±-apply"><strong>æ°æ®èåæ©å± ($apply)</strong></h3>
<p>å¨ OData v4.0 ä¸­ï¼åè®®å¼å¥äº $apply æ©å±ï¼å° OData ä»ç®åç CRUD åè®®æåå°äºåæååè®®çé«åº¦ãéè¿ $applyï¼å®¢æ·ç«¯å¯ä»¥å¨æå¡ç«¯æ§è¡ç±»ä¼¼äº SQL GROUP BY çæä½ã</p>
<p>æ°æ®èåçæ ¸å¿å¨äºä¸ç³»åè½¬æ¢ï¼Transformationsï¼çé¡ºåºæ§è¡ãä¾å¦ï¼groupby è½¬æ¢å°è¾å¥éååä¸ºå¤ä¸ªå­éï¼è aggregate åå¯¹è¿äºå­éåºç¨èåå½æ°ï¼å¦ sum, average, min, max, countdistinctï¼ã</p>
<p>è¿ç§è½¬æ¢æµæ¨¡å¼æ¯ææåº¦å¤æçæ¥è¯¢ãä¾å¦ï¼âææè®¡ç®æ¯ç§äº§åçå¹³åéå®é¢âå¯ä»¥éè¿å¤å±èåå®ç°ï¼é¦åæäº§ååæä»½è¿è¡ groupby å¹¶æ±åï¼ç¶åå¯¹ç»æåæ¬¡æäº§åè¿è¡ groupby å¹¶æ±å¹³åå¼ ãè¿ç§é¾å¼å¤çè½åä½¿å¾ OData è½å¤èä»»è½»éçº§çåä¸æºè½éæ±ã</p>
<h2 id="åå¹¶æ§å¶ä¸æ§è½ä¼åç­ç¥"><strong>åãå¹¶æ§å¶ä¸æ§è½ä¼åç­ç¥</strong></h2>
<p>å¨ä¼ä¸çº§é«å¹¶åç¯å¢ä¸ï¼ç¡®ä¿æ°æ®ä¸è´æ§ä¸ç³»ç»ååºéåº¦æ¯è¯ä»·åè®®ä¼å£çå³é®ææ ãOData éè¿ä¸ç³»åç²¾å¦çè®¾è®¡æä¾äºå·¥ä¸çº§çè§£å³æ¹æ¡ã</p>
<h3 id="ä¹è§å¹¶åæ§å¶ä¸-etag"><strong>ä¹è§å¹¶åæ§å¶ä¸ ETag</strong></h3>
<p>ç±äº OData åºäºæ ç¶æç HTTP åè®®ï¼ä¼ ç»çæ²è§éï¼Pessimistic Lockingï¼ä¼æå¤§æå®³æ©å±æ§å¹¶å¯¼è´æ­»é 16ãå æ­¤ï¼OData æ¨èå¹¶å®ç°äºåºäºå®ä½æ ç­¾ï¼ETagï¼çä¹è§å¹¶åæ§å¶ã</p>
<p>å½æå¡å¨è¿åå®ä½æ¶ï¼ä¼å¨ååºå¤´æåæ°æ®ä¸­åå«ä¸ä¸ª ETagï¼å®éå¸¸æ¯å®ä½åå®¹æçæ¬å·çåå¸å¼ãå½å®¢æ·ç«¯å°è¯æ´æ°è¯¥å®ä½æ¶ï¼å¿é¡»å¨ If-Match è¯·æ±å¤´ä¸­æºå¸¦è¯¥ ETagãå¦ææå¡å¨åç°å­å¨ä¸­çå½å ETag ä¸å®¢æ·ç«¯æä¾çä¸ä¸è´ï¼åè¯´æå¨å®¢æ·ç«¯è¯»åä¹åï¼è¯¥è®°å½å·²è¢«å¶ä»è¿ç¨ä¿®æ¹ï¼æ­¤æ¶æå¡å¨ä¼è¿å 412 Precondition Failedã</p>
<p>è¿ä¸æºå¶å¨ SAP CAPãASP.NET Web API ç­ä¸»æµæ¡æ¶ä¸­å¾å°äºèªå¨åå¤çãä¾å¦ï¼å¨ SAP CAP ä¸­ï¼ä»éä¸ºå±æ§æ·»å  @odata.etag æ³¨è§£ï¼æ¡æ¶å³å¯èªå¨å®ææ ¡éªé»è¾ï¼æ¾èéä½äºå¼åææ¬ã</p>
<h3 id="æ§è½å éå¨æ¹å¤çä¸æå¡ç«¯åé¡µ"><strong>æ§è½å éå¨ï¼æ¹å¤çä¸æå¡ç«¯åé¡µ</strong></h3>
<ol>
<li><strong>æ¹å¤ç ($batch)</strong>ï¼$batch åè®¸å°å¤ä¸ªç¬ç«çè¯»åè¯·æ±åå¹¶ä¸ºä¸ä¸ª HTTP POST è¯·æ±ãåææ¾ç¤ºï¼è¿ä¸ä»åå°äºç½ç»å¾è¿æ¶é´ï¼RTTï¼ï¼è¿è½å¨æ´æ°æä½ä¸­å©ç¨åä¸çåå­å·¥ä½ååï¼Atomic Unit of Workï¼ï¼ä»èåå°æ°æ®åºäºå¡å¼éå CPU å ç¨ 11ã</li>
<li><strong>æå¡ç«¯åé¡µ ($skiptoken)</strong>ï¼ä¸ç®åçåç§»éåé¡µï¼$skipï¼ä¸åï¼æå¡ç«¯åé¡µå©ç¨ $skiptoken è¿åä¸ä¸ªä¸éæçä»¤çï¼è¯¥ä»¤çéå¸¸å¯¹åºæ°æ®åºæ¸¸æ æä¸ä¸æ¬¡æ¥è¯¢çæåä¸æ¡è®°å½çé®å¼ 12ãå¯¹äºå¤§åæ°æ®éï¼$skiptoken çæ¥è¯¢éåº¦è¿é«äº $skipï¼å ä¸ºå®é¿åäºæ°æ®åºå¼ææ«æå¹¶ä¸¢å¼ååºè®°å½çæ§è½æè 12ã</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align: left">ä¼åææ¯</th>
<th style="text-align: left">ä¸»è¦æ¶ç</th>
<th style="text-align: left">éç¨åºæ¯</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left"><strong>$batch</strong></td>
<td style="text-align: left">åå° RTTï¼ä¿è¯åå­æ§ã</td>
<td style="text-align: left">æ¹éæ´æ°éå³èå®ä½ï¼åå°ç§»å¨ç«¯çµéæè ã</td>
</tr>
<tr>
<td style="text-align: left"><strong>$expand</strong></td>
<td style="text-align: left">è§£å³ N+1 æ¥è¯¢é®é¢ã</td>
<td style="text-align: left">è·åä¸»è¡¨åå¶æç»è¡ï¼å¦è®¢åä¸é¡¹ï¼ã</td>
</tr>
<tr>
<td style="text-align: left"><strong>$select</strong></td>
<td style="text-align: left">åå° Payload ä½ç§¯ã</td>
<td style="text-align: left">ä»è·å ID ååç§°ç¨äºå±ç¤ºåè¡¨ã</td>
</tr>
<tr>
<td style="text-align: left"><strong>$skiptoken</strong></td>
<td style="text-align: left">ç¨³å®é«æçå¤§æ°æ®éåé¡µã</td>
<td style="text-align: left">æ éæ»å¨åè¡¨ï¼å¤§åæ¥è¡¨å¯¼åºã</td>
</tr>
<tr>
<td style="text-align: left"><strong>GZIP åç¼©</strong></td>
<td style="text-align: left">æ¾èåå°ç½ç»æµéã</td>
<td style="text-align: left">ææçäº§ç¯å¢ç OData æå¡ 20ã</td>
</tr>
</tbody>
</table>
<h2 id="äº-æºè½åéæmodel-context-protocol-mcp-ä¸-odata-çåå"><strong>äºã æºè½åéæï¼Model Context Protocol (MCP) ä¸ OData çåå</strong></h2>
<p>éçå¤§è¯­è¨æ¨¡åï¼LLMï¼æä¸ºä¼ä¸çäº§åçæ ¸å¿ï¼API åè®®çâæºå¨å¯çè§£æ§âåå¾è³å³éè¦ãOData çåæ°æ®é©±å¨ç¹æ§ä½¿å¶æä¸º LLM è½å°æçæ³çåå£¤ã</p>
<h3 id="è¯­ä¹æ¥å°-semantic-grounding-çææ"><strong>è¯­ä¹æ¥å° (Semantic Grounding) çææ</strong></h3>
<p>LLM å¨çææ¥è¯¢è¯­å¥æ¶å¸¸é¢ä¸´âå¹»è§âé®é¢ï¼å³çæä¸å­å¨çå®ä½åæå±æ§åãOData çåæ°æ®ææ¡£æä¾äºä¸ä¸ªå®ç¾çåèåæ ç³»ï¼Grounding Layerï¼ãéè¿æä¾å¼ºç±»åç EDM æè¿°ï¼æ¨¡åå¯ä»¥åç¡®è·ç¥ç³»ç»è¾¹çï¼çæçæ¥è¯¢è¯­å¥ï¼å¦ Text-to-ODataï¼å¶åç¡®çè¿é«äºéç»æåç REST APIã</p>
<h3 id="model-context-protocol-mcp-çå´èµ·"><strong>Model Context Protocol (MCP) çå´èµ·</strong></h3>
<p>Model Context Protocol æ¯ 2024 å¹´åºæ¨åºçå¼æºæ åï¼æ¨å¨è¿æ¥ AI å©æä¸å¤é¨åºç¨ ,MC æå¡å¨ä½ä¸º AI çâæå®âï¼å¯ä»¥å®æ¶è·åå¤é¨ç³»ç»çä¸ä¸æãç±äº OData æå¡èªå¸¦æºå¨å¯è¯»çåæ°æ®ï¼å° OData æå¡è½¬æ¢ä¸º MCP èç¹æå¤§å°éä½äº AI ä»£çï¼Agentï¼ä¸ä¼ä¸æ°æ®äº¤äºçææ¬ ã</p>
<h4 id="æ·±åº¦è°ç query-craft-mcp-åå¶ææ¯æ¶æ"><strong>æ·±åº¦è°ç ï¼Query-Craft-MCP åå¶ææ¯æ¶æ</strong></h4>
<p>ç± AM10101010 å¼åç query-craft-mcp æ¯è¿ä¸é¢åçåéå·¥å·ãå®åå½äº LLM ä¸ OData æå¡ä¹é´çè¯­ä¹æ¡¥æ¢ï¼è§£å³ OData v4 è¯­æ³å¤æä¸å¯¹å¤§å°åææçé®é¢ã</p>
<p>æ ¹æ®å¯¹è¯¥é¡¹ç®çæ·±å¥åæï¼å¶ææ¯å®ç°åå«ä»¥ä¸æ ¸å¿è½åï¼</p>
<ol>
<li><strong>åæ°æ®æç¥çæ</strong>ï¼è¯¥å·¥å·ä½¿ç¨ .NET 9 SDK å Microsoft.OData.Edm åºè§£æ $metadata XMLï¼å¨åå­ä¸­æå»ºå®ä½ãå±æ§ãé®åå¯¼èªé¾æ¥çç´¢å¼ãè¿ç¡®ä¿äº AI æ¥æ¶å°ç context æ¯åºäºçå®æ¶æçï¼ä»æ ¹æ¬ä¸æ¶é¤äºå¹»è§ã</li>
<li><strong>å¯¼èªè·¯å¾åç° (BFS ç®æ³)</strong>ï¼è¿æ¯ Query-Craft-MCP çä¸å¤§äº®ç¹ãå®å®ç°äºä¸ä¸ªåºäºå¹¿åº¦ä¼åæç´¢ï¼BFSï¼çéåå¨ï¼è½å¤èªå¨æ¾å°è¿æ¥ä¸¤ä¸ªç¸å³å®ä½çæç­ $expand é¾ãä¾å¦ï¼å½ç¨æ·è¯¢é®âæ¾ç¤ºè´­ä¹°è¿ç¹å®äº§åçå®¢æ·âæ¶ï¼AI è½å¤èªå¨æ¨å¯¼åº Orders/OrderDetails/Product çå¯¼èªè·¯å¾ï¼èæ éå¼åèæå¨ç¼åå¤æç join é»è¾ã</li>
<li><strong>è¿è¡åéªè¯</strong>ï¼å·¥å·å¨å°çæçæ¥è¯¢åéå°çæ­£çæ°æ®æºä¹åï¼ä¼æ ¹æ®åå­ä¸­çç´¢å¼è¿è¡è¯­æ³åè¯­ä¹éªè¯ï¼æ¦æªç±»åä¸å¹éæå±æ§ä¸å­å¨ç­éè¯¯ã</li>
<li><strong>å®¢æ·ç«¯è¾å©èå</strong>ï¼éå¯¹æäºä»æ¯æåºç¡ v4 åè½èä¸æ¯æé«çº§ $apply æ©å±çæå¡å¨ï¼Query-Craft-MCP æä¾äºå®¢æ·ç«¯èåå¼æï¼å¯ä»¥å¨æ¬å°å¯¹ç»æéæ§è¡ GROUP BY, SUM, AVG ç­ç»è®¡æä½ ã</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align: left">å·¥å·åç§°</th>
<th style="text-align: left">æ ¸å¿èè´£</th>
<th style="text-align: left">å¨ AI å·¥ä½æµä¸­çè§è²</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">list-entities</td>
<td style="text-align: left">æ´é²å®ä½æ¸åã</td>
<td style="text-align: left">å¸®å© LLM è¯å«å½åä¸å¡åºæ¯æ¶åçå¯¹è±¡ã</td>
</tr>
<tr>
<td style="text-align: left">find-navigation-path</td>
<td style="text-align: left">è·¯å¾æ¨å¯¼ã</td>
<td style="text-align: left">è§£å³è·¨è¡¨/è·¨å®ä½çå³ç³»é¾æ¥é®é¢ã</td>
</tr>
<tr>
<td style="text-align: left">validate-query</td>
<td style="text-align: left">è´¨éææ§ã</td>
<td style="text-align: left">åå½è¯­ä¹ç¼è¯å¨ï¼ç¡®ä¿çæç OData è¯­æ³æ­£ç¡®ã</td>
</tr>
<tr>
<td style="text-align: left">execute-odata-query</td>
<td style="text-align: left">æ°æ®æ£ç´¢ã</td>
<td style="text-align: left">æ§è¡çæ­£ç HTTP è¯·æ±å¹¶å° JSON è¿åç» AIã</td>
</tr>
</tbody>
</table>
<h2 id="ç»è®ºæ°æ®äºæä½çæ ååé«å°"><strong>ç»è®ºï¼æ°æ®äºæä½çæ ååé«å°</strong></h2>
<p>éè¿å¯¹ OData çæ·±åº¦è°ç ï¼æä»¬å¯ä»¥æ¸æ°å°çå°ï¼å®ä¸ä»ä»æ¯ä¸ä¸ªè¿å»çä¼ä¸æ åï¼æ´æ¯ä¸ä¸ªé¢åæªæ¥çè¯­ä¹äºæä½æ¡æ¶ãå¶å¼ºç±»åç EDM æ¶æï¼ä¸ºå½ä»å¤§è¯­è¨æ¨¡åçâè½å°âæä¾äºæç¨³åºçè¯­ä¹éç¹ï¼èå¶ä¸°å¯çæ¥è¯¢ä¸èåè½åï¼åä¸ºä¼ä¸ä½ä»£ç å¹³å°åèªå¨å Agent çæå»ºæä¾äºå³æå³ç¨çåæå¼æã</p>
<p>OData å¨éèãä¾åºé¾åæ ¸å¿ ERP ç­å¯¹æ°æ®ä¸¥è°¨æ§è¦æ±æé«çåºæ¯ä¸ï¼å¶å°ä½ä¾ç¶ä¸å¯æ¿ä»£ãå¯¹äºå¯»æ±æå»ºâAI Readyâæ°æ®æ¶æçä¼ä¸èè¨ï¼éæ©å¹¶ä¼å OData æå¡ï¼éåå¦ Query-Craft-MCP è¿æ ·çæºè½åä¸­é´ä»¶ï¼å°æ¯éå¾è¯­ä¹æºè½æ¶ä»£çå¿ç»ä¹è·¯ã</p>
<p>æªæ¥çç«äºå°ä¸åä»ä»æ¯æ°æ®çè§æ¨¡ä¹äºï¼èæ¯æ°æ®âè¢«çè§£âçéåº¦ä¸åç¡®åº¦ä¹äºãOData åè®®åå¶èåçåæ°æ®ç²¾ç¥ï¼æ­£æ¯è¿åºç«èµä¸­çå³é®èè´æã</p>
<h4 id="å¼ç¨çèä½"><strong>å¼ç¨çèä½</strong></h4>
<ol>
<li>Open Data Protocol - Wikipedia <a href="https://en.wikipedia.org/wiki/Open_Data_Protocol" target="_blank" rel="noopener nofollow">https://en.wikipedia.org/wiki/Open_Data_Protocol</a></li>
<li>OData - the Best Way to RESTï¼ <a href="https://www.odata.org/" target="_blank" rel="noopener nofollow">https://www.odata.org/</a></li>
<li>OData overview  <a href="https://learn.microsoft.com/en-us/odata/overview" target="_blank" rel="noopener nofollow">https://learn.microsoft.com/en-us/odata/overview</a></li>
<li>Model-driven Development of OData Services, è®¿é®æ¶é´ä¸º äºæ 10, 2026ï¼ <a href="https://modeling-languages.com/model-driven-development-of-odata-services/" target="_blank" rel="noopener nofollow">https://modeling-languages.com/model-driven-development-of-odata-services/</a></li>
<li>QueryCraft | MCP Servers - LobeHub <a href="https://lobehub.com/nl/mcp/am10101010-query-craft-mcp" target="_blank" rel="noopener nofollow">https://lobehub.com/nl/mcp/am10101010-query-craft-mcp</a></li>
<li>Why AI in Analytics Needs Metadata - GoodData,  <a href="https://www.gooddata.com/blog/why-ai-in-analytics-needs-metadata/" target="_blank" rel="noopener nofollow">https://www.gooddata.com/blog/why-ai-in-analytics-needs-metadata/</a></li>
<li>Optimizing an LLM-Based Clinical Data Querying System Using Metadata Enrichment and Task Decomposition   <a href="https://www.medrxiv.org/content/10.64898/2025.12.22.25342863v1.full.pdf" target="_blank" rel="noopener nofollow">https://www.medrxiv.org/content/10.64898/2025.12.22.25342863v1.full.pdf</a></li>
<li>Optimizing an LLM-Based Clinical Data Querying System Using Metadata Enrichment and Task Decomposition | medRxiv <a href="https://www.medrxiv.org/content/10.64898/2025.12.22.25342863v1" target="_blank" rel="noopener nofollow">https://www.medrxiv.org/content/10.64898/2025.12.22.25342863v1</a></li>
<li>The Model Context Protocol's impact on 2025 | Thoughtworks United States, è®¿é®æ¶é´ä¸º äºæ 10, 2026ï¼ <a href="https://www.thoughtworks.com/en-us/insights/blog/generative-ai/model-context-protocol-mcp-impact-2025" target="_blank" rel="noopener nofollow">https://www.thoughtworks.com/en-us/insights/blog/generative-ai/model-context-protocol-mcp-impact-2025</a></li>
</ol>


</div>
<div id="MySignature" role="contentinfo">
    <p>æ¬¢è¿å¤§å®¶æ«æä¸é¢äºç»´ç æä¸ºæçå®¢æ·ï¼æ¶ä½ ä¸äº</p>
<img src="https://images.cnblogs.com/cnblogs_com/shanyou/57459/o_220125090408_%E9%82%80%E8%AF%B7%E4%BA%8C%E7%BB%B4%E7%A0%81-258px.jpeg" width="170">
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.05416666666666667" data-date-updated="2026-02-10 21:58">2026-02-10 20:40</span>&nbsp;
<a href="https://www.cnblogs.com/shanyou">å¼ åå</a>&nbsp;
éè¯»(<span id="post_view_count">14</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19601411);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19601411', targetLink: 'https://www.cnblogs.com/shanyou/p/19601411', title: 'OData åè®®çæºè½åè¯­ä¹äºæä½' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ä¸å¤©ä¸ä¸ªPythonåºï¼wheel - Python æåçè½®å­ï¼é«æååå©å¨ ]]></title>
    <link>https://www.cnblogs.com/min2k/p/19600605</link>
    <guid>00e2a25babb25b6d444c752530c16044</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/min2k/p/19600605" title="åå¸äº 2026-02-10 16:36">
    <span role="heading" aria-level="2">ä¸å¤©ä¸ä¸ªPythonåºï¼wheel - Python æåçè½®å­ï¼é«æååå©å¨</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="wheel---python-æåçè½®å­é«æååå©å¨">wheel - Python æåçè½®å­ï¼é«æååå©å¨</h1>
<h2 id="ä¸ä»ä¹æ¯wheel">ä¸ãä»ä¹æ¯wheelï¼</h2>
<p><strong>wheel</strong> æ¯ä¸ä¸ªç¨äº Python åååçæ åæ ¼å¼åå·¥å·ç Python åºã<br>
å®å¯ä»¥å¸®å©ä½ ï¼</p>
<ul>
<li>åå»º <code>.whl</code> æä»¶ï¼è¿æ¯ä¸ç§å³è£å³ç¨çååæ ¼å¼ã</li>
<li>å®ç°æ´å¿«éãæ´å¯é çåå®è£ã</li>
<li>é¿åå¨å®è£è¿ç¨ä¸­è¿è¡æºä»£ç ç¼è¯ï¼ä»èç®åä¾èµç®¡çã</li>
<li>ç¡®ä¿ä¸åç³»ç»é´çäºè¿å¶å¼å®¹æ§ï¼å¨æäºæåµä¸ï¼ã</li>
</ul>
<h2 id="äºåºç¨åºæ¯">äºãåºç¨åºæ¯</h2>
<p><strong>wheel</strong> å¹¿æ³åºç¨äºä»¥ä¸å®éåºæ¯ï¼</p>
<ul>
<li><strong>å¿«éé¨ç½²</strong>: å½ä½ éè¦å°ä¸ä¸ª Python åºç¨æåºå¿«éé¨ç½²å°å¤ä¸ªç¯å¢ä¸­æ¶ï¼<code>wheel</code> æä»¶å¯ä»¥æ¾èå å¿«å®è£éåº¦ã</li>
<li><strong>æå»ºç§æ PyPI</strong>: å¦æä½ å¨ä¼ä¸åé¨ç»´æ¤ä¸ä¸ªç§æç PyPI ä»åºï¼éå¸¸ä¼å°åé¨åºæåæ <code>wheel</code> æä»¶ä»¥ä¾¿äºåå·¥å®è£ã</li>
<li><strong>æç»­éæ/æç»­é¨ç½² (CI/CD)</strong>: å¨ CI/CD ç®¡éä¸­ï¼çæååå <code>wheel</code> æä»¶æ¯é¨ç½² Python é¡¹ç®çå¸¸è§æ­¥éª¤ï¼å¯ä»¥æé«æå»ºæçã</li>
<li><strong>è·¨å¹³å°åå</strong>: å¯¹äºåå« C æ©å±ç Python åºï¼<code>wheel</code> å¯ä»¥é¢ç¼è¯è¿äºæ©å±ï¼é¿åç¨æ·å¨å®è£æ¶è¿è¡ç¼è¯ï¼åå°å®è£å¤±è´¥çå¯è½æ§ã</li>
</ul>
<h2 id="ä¸å¦ä½å®è£">ä¸ãå¦ä½å®è£</h2>
<ol>
<li>ä½¿ç¨ pip å®è£</li>
</ol>
<pre><code class="language-bash">pip install wheel

# å¦æå®è£æ¢çè¯ï¼æ¨èä½¿ç¨å½åéåæº
pip install wheel -i https://www.python64.cn/pypi/simple/
</code></pre>
<ol start="2">
<li>ä½¿ç¨ <a href="https://www.min2k.com/tools/python-run/" target="_blank" rel="noopener nofollow">PythonRun</a> å¨çº¿è¿è¡ä»£ç ï¼æ éæ¬å°å®è£ï¼</li>
</ol>
<h2 id="åç¤ºä¾ä»£ç ">åãç¤ºä¾ä»£ç </h2>
<p>æ£æ¥ wheel åæ¯å¦å¯ç¨ï¼å¹¶æ¼ç¤ºå¦ä½åå»ºä¸ä¸ªç®åç wheel æä»¶ï¼æ¦å¿µæ§ï¼ã</p>
<pre><code class="language-python">import os
import subprocess

# æ£æ¥å½åPythonç¯å¢æ¯å¦å®è£äºwheel
try:
    import wheel
    wheel_installed = True
except ImportError:
    wheel_installed = False

if wheel_installed:
    print("Wheel is installed and ready to use.")
    # å®éåå»º wheel æä»¶éè¦ä¸ä¸ª setuptools é¡¹ç®ç»æ
    # è¿éæä»¬åªæ¨¡æä¸ä¸ªç®åçæ£æ¥ï¼ä¸å®éæå»ºå¤æçwheel
    print("To build a wheel, you typically use 'python setup.py bdist_wheel'.")

    # ç®åæ¡ä»¶å¤æ­ï¼å¦æå®è£äºï¼å°±æç¤ºç¨æ·
    if wheel.__version__:
        print(f"Wheel version: {wheel.__version__}")
    else:
        print("Could not determine wheel version.")

else:
    print("Wheel is not installed. Please install it using 'pip install wheel'.")

</code></pre>
<p>ä½¿ç¨ <a href="https://www.min2k.com/tools/python-run/?code=import%20os%0Aimport%20subprocess%0A%0A%23%20%E6%A3%80%E6%9F%A5%E5%BD%93%E5%89%8DPython%E7%8E%AF%E5%A2%83%E6%98%AF%E5%90%A6%E5%AE%89%E8%A3%85%E4%BA%86wheel%0Atry%3A%0A%20%20%20%20import%20wheel%0A%20%20%20%20wheel_installed%20%3D%20True%0Aexcept%20ImportError%3A%0A%20%20%20%20wheel_installed%20%3D%20False%0A%0Aif%20wheel_installed%3A%0A%20%20%20%20print%28%22Wheel%20is%20installed%20and%20ready%20to%20use.%22%29%0A%20%20%20%20%23%20%E5%AE%9E%E9%99%85%E5%88%9B%E5%BB%BA%20wheel%20%E6%96%87%E4%BB%B6%E9%9C%80%E8%A6%81%E4%B8%80%E4%B8%AA%20setuptools%20%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%0A%20%20%20%20%23%20%E8%BF%99%E9%87%8C%E6%88%91%E4%BB%AC%E5%8F%AA%E6%A8%A1%E6%8B%9F%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E6%A3%80%E6%9F%A5%EF%BC%8C%E4%B8%8D%E5%AE%9E%E9%99%85%E6%9E%84%E5%BB%BA%E5%A4%8D%E6%9D%82%E7%9A%84wheel%0A%20%20%20%20print%28%22To%20build%20a%20wheel%2C%20you%20typically%20use%20'python%20setup.py%20bdist_wheel'.%22%29%0A%0A%20%20%20%20%23%20%E7%AE%80%E5%8D%95%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD%EF%BC%9A%E5%A6%82%E6%9E%9C%E5%AE%89%E8%A3%85%E4%BA%86%EF%BC%8C%E5%B0%B1%E6%8F%90%E7%A4%BA%E7%94%A8%E6%88%B7%0A%20%20%20%20if%20wheel.__version__%3A%0A%20%20%20%20%20%20%20%20print%28f%22Wheel%20version%3A%20%7Bwheel.__version__%7D%22%29%0A%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20print%28%22Could%20not%20determine%20wheel%20version.%22%29%0A%0Aelse%3A%0A%20%20%20%20print%28%22Wheel%20is%20not%20installed.%20Please%20install%20it%20using%20'pip%20install%20wheel'.%22%29%0A" target="_blank" rel="noopener nofollow">PythonRun</a> å¨çº¿è¿è¡è¿æ®µä»£ç ï¼ç»æå¦ä¸ï¼</p>
<pre><code class="language-text">Wheel is installed and ready to use.
To build a wheel, you typically use 'python setup.py bdist_wheel'.
Wheel version: 0.38.4
</code></pre>
<p>ä½¿ç¨ <a href="https://www.min2k.com/tools/mermaid/?code=flowchart%20TB%0A%20%20start%28%28Start%29%29%20--%3E%20A%7BImport%20wheel%20module%3F%7D%3B%0A%20%20A%20--%20Yes%20--%3E%20B%5BSet%20wheel_installed%20%3D%20True%5D%3B%0A%20%20A%20--%20No%20--%3E%20C%5BSet%20wheel_installed%20%3D%20False%5D%3B%0A%20%20B%20--%3E%20D%7BIs%20wheel_installed%20True%3F%7D%3B%0A%20%20C%20--%3E%20D%3B%0A%20%20D%20--%20Yes%20--%3E%20E%5BPrint%20%22Wheel%20is%20installed...%22%5D%3B%0A%20%20E%20--%3E%20F%5BPrint%20building%20instruction%5D%3B%0A%20%20F%20--%3E%20G%7Bwheel.__version__%20exists%3F%7D%3B%0A%20%20G%20--%20Yes%20--%3E%20H%5BPrint%20wheel%20version%5D%3B%0A%20%20G%20--%20No%20--%3E%20I%5BPrint%20%22Could%20not%20determine%20version%22%5D%3B%0A%20%20D%20--%20No%20--%3E%20J%5BPrint%20%22Wheel%20is%20not%20installed...%22%5D%3B%0A%20%20H%20--%3E%20end%28%28End%29%29%3B%0A%20%20I%20--%3E%20end%3B%0A%20%20J%20--%3E%20end%3B" target="_blank" rel="noopener nofollow">MermaidGo</a> ç»å¶ç¤ºä¾ä»£ç çæµç¨å¾ï¼ç»æå¦ä¸ï¼</p>
<p><img alt="MermerGoçwheelæµç¨å¾" loading="lazy" data-src="https://img2024.cnblogs.com/blog/70894/202602/70894-20260210163518230-465434968.jpg" class="lazyload"></p>
<h2 id="äºå­¦ä¹ èµæº">äºãå­¦ä¹ èµæº</h2>
<ol>
<li>å¼æºé¡¹ç®ï¼<a href="https://github.com/pypa/wheel" target="_blank" rel="noopener nofollow">wheel</a></li>
<li>ä¸­æèªè¿°ï¼<a href="https://www.python64.cn/readme/wheel/" target="_blank" rel="noopener nofollow">REMDME</a></li>
<li>å¨çº¿è¿è¡ï¼<a href="https://www.min2k.com/tools/python-run/" target="_blank" rel="noopener nofollow">PythonRun</a></li>
</ol>
<blockquote>
<p>å¦æè¿ç¯æç« å¯¹ä½ æå¸®å©ï¼æ¬¢è¿ç¹èµãæ¶èãè½¬åï¼<br>
å­¦ä¹ è¿ç¨ä¸­æä»»ä½é®é¢ï¼æ¬¢è¿å¨è¯è®ºåºçè¨äº¤æµï½</p>
</blockquote>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-10 16:37">2026-02-10 16:36</span>&nbsp;
<a href="https://www.cnblogs.com/min2k">æç¼ç¨</a>&nbsp;
éè¯»(<span id="post_view_count">32</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19600605);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19600605', targetLink: 'https://www.cnblogs.com/min2k/p/19600605', title: 'ä¸å¤©ä¸ä¸ªPythonåºï¼wheel - Python æåçè½®å­ï¼é«æååå©å¨' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ å¨ç½æç®åç OpenClaw é¨ç½²æç¨ï¼5 åéæ¥æä½ ç AI åå·¥ ]]></title>
    <link>https://www.cnblogs.com/yupi/p/19600386</link>
    <guid>057780cd5e559f5e1bb8d0d151b6a824</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/yupi/p/19600386" title="åå¸äº 2026-02-10 15:58">
    <span role="heading" aria-level="2">å¨ç½æç®åç OpenClaw é¨ç½²æç¨ï¼5 åéæ¥æä½ ç AI åå·¥</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/2225420/202602/2225420-20260210155738305-451805846.png" alt="å¨ç½æç®åç OpenClaw é¨ç½²æç¨ï¼5 åéæ¥æä½ ç AI åå·¥" class="desc_img">
        æè¿ OpenClawï¼ç± ClawdBot æ¹åï¼æ¯ççç«ï¼å®æ¯ä¸ä¸ªè½æä½çµèå¹²æ´»ç AI æ°å­åå·¥ãè½å¸®ä½ è¯»åæä»¶ãç¼åç¨åºãæ§è¡ä»»å¡ï¼7Ã24 å°æ¶ä¸ä¼æ¯ãèä¸ä½ éæ¶éå°æåºææºå°±è½ææ§å®ï¼è®©å®å¸®ä½ å¹²æ´»ã
æå¿«çãå»çå¼å®è£ OpenClaw çæ¹æ³è¿å°±æ¥äºï¼
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p class="md-end-block md-heading"><span class="md-plain md-expand"><span style="font-size: 14px">å¤§å®¶å¥½ï¼ææ¯ç¨åºåé±¼ç®ã</span></span></p>
<p class="md-end-block md-p"><span class="md-plain">æè¿ OpenClawï¼ç± ClawdBot æ¹åï¼æ¯ççç«ï¼<span class="md-pair-s "><strong>å®æ¯ä¸ä¸ªè½æä½çµèå¹²æ´»ç AI æ°å­åå·¥</strong><span class="md-plain">ãè½å¸®ä½ è¯»åæä»¶ãç¼åç¨åºãæ§è¡ä»»å¡ï¼7Ã24 å°æ¶ä¸ä¼æ¯ãèä¸ä½ éæ¶éå°æåºææºå°±è½ææ§å®ï¼è®©å®å¸®ä½ å¹²æ´»ã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209164642002.png"><img data-src="https://pic.yupi.icu/1/image-20260209164642002.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç½åä¹æ¯æ OpenClaw ç©åºè±æ¥äºï¼</span></p>
<ul class="ul-list" data-mark="-">
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">æäººè®©å®èªå¨æ¸çä¸ä¸å°é®ä»¶ï¼æ¶ä»¶ç®±ç´æ¥å¹²æ 45%ï¼çä¸å åä¸ªå°æ¶çæ´çæ¶é´</span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">æäººç¨å®æ¢æ¼å±ä¼é¨ç¥¨åæºç¥¨ï¼è®¾å¥½æ¡ä»¶è®©å®æ¯éå ç§å·ä¸æ¬¡ï¼å·å°å°±èªå¨ä¸å</span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">æäººèººå¨åºä¸ï¼éè¿ææºé¥æ§å®ææ´ä¸ªç½ç«éåäºä¸é</span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">è¿æäººè®©å®åæ¶è·å¤æ¡èªå¨åä»»å¡ï¼ä¸è¾¹ç¯çãä¸è¾¹åæ¥æ¥ãä¸è¾¹èªå¨åç¾¤æ¶æ¯</span></p>
</li>
</ul>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1769787147424-a18c9870-08a0-4540-aa64-a5730fde09d7-20260209164709778.png"><img data-src="https://pic.yupi.icu/1/1769787147424-a18c9870-08a0-4540-aa64-a5730fde09d7-20260209164709778.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">æ´ç¦»è°±çæ¯ï¼è¹æç Mac Miniï¼å°±æ¯é£ä¸ªå·´æå¤§çå°ä¸»æºï¼ç«ç¶å ä¸º OpenClaw <span class="md-pair-s "><strong>ç´æ¥åæ­è´§äº</strong><span class="md-plain">ï¼å ä¸ºå¾å¤äººæ³ä¹°ä¸å° 24 å°æ¶ä¸å³æºçå°çµèè· OpenClawï¼è®©å®å½èªå·±ç AI æå·¥äººã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1769787905203-6959e978-c81e-40dd-b86d-1043896faf20-20260209164722700.png"><img data-src="https://pic.yupi.icu/1/1769787905203-6959e978-c81e-40dd-b86d-1043896faf20-20260209164722700.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">è¿ç©æååºçæ¶åï¼å¥³æåå°±é®æï¼çèµ·æ¥å¥½åå®³åï¼ä½ è½å¸®æä¹æ´ä¸ä¸ªåï¼</span></p>
<p class="md-end-block md-p"><span class="md-plain">æææå´ï¼ä¸æ´ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">å¥¹ç»äºæä¸å·´æï¼æ´ä¸æ´ï¼</span></p>
<p class="md-end-block md-p"><span class="md-plain">æä¸è¸å§å±ï¼å«æ´å«æ´ï¼åç­ç­ï¼ä¸å®ä¼ææ´ç®åçå®è£æ¹æ³åºæ¥çã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209164815234.png"><img data-src="https://pic.yupi.icu/1/image-20260209164815234.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">æç¶ï¼æ²¡è®©æç­å¤ªä¹ï¼æå¿«çãå»çå¼å®è£ OpenClaw çæ¹æ³æ¥äºï¼</span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">æä¹å®è£ OpenClaw</span></h2>
<p class="md-end-block md-p"><span class="md-plain">å¾å¤äººä»¥ä¸ºæ³ç© OpenClaw å°±å¾ä¹°ä¸å°å®ä½çµè 24 å°æ¶å¼çãä½å¶å®å®å¨æ²¡å¿è¦ï¼<span class="md-pair-s "><strong>ä¸å°äºæå¡å¨å°±è½æå®</strong><span class="md-plain">ï¼èä¸æ´ç¨³å®ãä¸ææ­çµæ­ç½ãéæ¶éå°ç¨ææºå°±è½ææ¥å®å¹²æ´»ã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">å°±å¨ 2 æ 8 æ¥ï¼ç¾åº¦æºè½äºæ¨åºäº <span class="md-pair-s "><strong>OpenClaw æéç®æé¨ç½²æ¹æ¡</strong><span class="md-plain">ãåªæä½ å®å¨æ²¡æç¼ç¨åºç¡ï¼åªéè¦ç¹å ä¸é¼ æ ï¼å åéåå°±è½æ¥æèªå·±ç AI æ°å­åå·¥ãè¿æ¯æåç§ä¸»æµ AI å¤§æ¨¡åä¸é®åæ¢ï¼çè³è½ç´æ¥æ OpenClaw æ¥å¥ QQãé£ä¹¦ãééãä¼ä¸å¾®ä¿¡ï¼<span class="md-pair-s "><strong>å¨ææºä¸åæ¡æ¶æ¯å°±è½ææ¥ AI å¹²æ´»</strong><span class="md-plain">ã</span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209170321021.png"><img data-src="https://pic.yupi.icu/1/image-20260209170321021.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">æ¥ä¸æ¥æå¸¦å¤§å®¶å®æä¸ä¸ï¼å»ºè®®æ¶èå¤ç¨ â­ï¸ã</span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">æææé¨ç½² OpenClaw</span></h2>
<p class="md-end-block md-p"><span class="md-pair-s "><strong>1ï¼æä¸å°äºæå¡å¨</strong></span></p>
<p class="md-end-block md-p"><span class="md-plain">ä½ å¯ä»¥æäºæå¡å¨çè§£æ <span class="md-pair-s "><strong>ä¸å°æ¾å¨æºæ¿éççµè</strong><span class="md-plain">ï¼24 å°æ¶ä¸å³æºãä¸æ­ç½ï¼ä½ éæ¶éå°é½è½è¿ç¨è¿ä¸å»ç¨å®ã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">ååäº«ä¸ç§æç®åè·åæå¡å¨çæ¹æ³ï¼æå¼ç¾åº¦æºè½äºä¸º OpenClaw ç¹å¶çãæç®é¨ç½²é¡µé¢ãï¼åªé <span class="md-pair-s "><strong>0.01 å</strong><span class="md-plain">ï¼å°±è½æ¢è´­å°ä¸å° <span class="md-pair-s "><strong>2æ ¸4G4M</strong><span class="md-plain"> çè½»éåºç¨æå¡å¨ï¼åè´¹ä½éª 1 ä¸ªæã</span></span></span></span></span></p>
<blockquote>
<p class="md-end-block md-p"><span class="md-plain">æè·¯ï¼<span class="md-link md-pair-s"><a href="https://cloud.baidu.com/product/BCC/moltbot.html" rel="noopener nofollow">https://cloud.baidu.com/product/BCC/moltbot.html</a></span></span></p>
</blockquote>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209143722677.png"><img data-src="https://pic.yupi.icu/1/image-20260209143722677.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">è¿ä¸ªæ´»å¨æ¯æ¯å¤©ééçï¼æ°èç¨æ·é½è½åä¸ï¼æ²¡æ³å°æè¿æ°ä¸éï¼ç¾æ¯è¢«æèå°äºååï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209143544557.png"><img data-src="https://pic.yupi.icu/1/image-20260209143544557.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç¨ç­çå»ï¼æå¡å¨å°±åå§åå®æäºã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209143600373.png"><img data-src="https://pic.yupi.icu/1/image-20260209143600373.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç¹å»ãä¸é®é¨ç½²OpenClawãæé®ï¼å°±è½è·³è½¬å°æå¡å¨ç®¡çé¡µé¢ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">å¦æä½ æ²¡ææååä¸æ´»å¨ï¼ä¹ä¸è¦ç°å¿ï¼å¯ä»¥è¿å¥è½»éåºç¨æå¡å¨æ§å¶å°ï¼æå¨åå»ºä¸å°æå¡å¨ã</span></p>
<blockquote>
<p class="md-end-block md-p"><span class="md-plain">æè·¯ï¼<span class="md-link md-pair-s"><a href="https://console.bce.baidu.com/ls/#/ls/instance/create" rel="noopener nofollow">https://console.bce.baidu.com/ls/#/ls/instance/create</a></span></span></p>
</blockquote>
<p class="md-end-block md-p"><span class="md-plain">æ³¨æï¼éåä¸å®è¦éæ© <span class="md-pair-s "><strong>OpenClaw</strong><span class="md-plain"> åºç¨éåï¼å¥é¤éæ© <span class="md-pair-s "><strong>2 æ ¸ 4GB</strong><span class="md-plain"> å°±å¦¥å¦¥å¤ç¨äºã</span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209144440798.png"><img data-src="https://pic.yupi.icu/1/image-20260209144440798.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç»ç®ä¹åä¼èªå¨åå»ºæå¡å¨ï¼ç¶åè·åé¢ä¸æ ·ï¼è½å¤è¿å¥å°æå¡å¨ç®¡çé¡µé¢ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">åå°è¿ä¸æ­¥ï¼ç¸å½äºä½ å·²ç»è·å¾äºä¸ä½ âå³å°å¥èâ ç AI åå·¥ã</span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-pair-s "><strong>2ï¼ä¸é®å¼éç¸å³æå¡</strong></span></p>
<p class="md-end-block md-p"><span class="md-plain">å¨æå¡å¨ç®¡çé¡µé¢ä¸­ï¼ç¹å» <span class="md-pair-s "><strong>åºç¨ç®¡ç</strong><span class="md-plain"> Tabã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">é¡µé¢ä¼æç¤ºä½ éè¦å¼éåå¸å¤§æ¨¡åãäºå©æç­å ä¸ªæå¡ãä¸ç¨ä¸ä¸ªä¸ªå»æ¾ï¼ç´æ¥ç¹ <span class="md-pair-s "><strong>ä¸é®å¼é</strong><span class="md-plain">ï¼åæåè®®å°±æå®äºã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209144927875.png"><img data-src="https://pic.yupi.icu/1/image-20260209144927875.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-pair-s "><strong>3ï¼æ¾éé²ç«å¢ç«¯å£</strong></span></p>
<p class="md-end-block md-p"><span class="md-plain">å¦æä½ æ³è¦è®¿é®å·²ç»é¨ç½²ç OpenClaw ç½é¡µæ§å¶å°ï¼éè¦æ¾éæå¡å¨é²ç«å¢ç 18789 ç«¯å£ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ç¹å» <span class="md-pair-s "><strong>ä¸é®æ¾è¡</strong><span class="md-plain"> æé®å°±å¥½ï¼</span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209145239379.png"><img data-src="https://pic.yupi.icu/1/image-20260209145239379.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-pair-s "><strong>4ï¼éæ© AI æ¨¡å</strong></span></p>
<p class="md-end-block md-p"><span class="md-plain">æ¥ä¸æ¥ï¼ä¸ºä½ ç AI åå·¥æä¾ä¸ä¸ªèªæçå¤§èå§~</span></p>
<p class="md-end-block md-p"><span class="md-plain">å¯ä»¥ç´æ¥å¨é¡µé¢ä¸æéæ©ä½ æ³è¦çæ¨¡åï¼å½äº§çä¸»æµå¤§æ¨¡ååºæ¬é½æ¯æï¼æ¯å¦ DeepSeekï¼ï¼éå®ç¹å» <span class="md-pair-s "><strong>åºç¨</strong><span class="md-plain"> å°±è¡ã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209145623840.png"><img data-src="https://pic.yupi.icu/1/image-20260209145623840.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç³»ç»ä¼èªå¨å¸®ä½ åå»ºè°ç¨å¤§æ¨¡åç API å¯é¥ï¼å¹¶ä¸æéç½®å¨é¨æå®ã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209145857028.png"><img data-src="https://pic.yupi.icu/1/image-20260209145857028.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç­æ§è¡æåï¼ä½ ç OpenClaw å°±å¯ä»¥æ­£å¸¸ä½¿ç¨äºã</span></p>
<p class="md-end-block md-p"><span class="md-plain">åå°è¿éï¼æ­åï¼ä½ ç AI æ°å­åå·¥å·²ç»æ­£å¼å¥èï¼</span></p>
<p class="md-end-block md-p"><span class="md-plain">ååå èµ·æ¥ä¹å°±å åéï¼èä¸æ´ä¸ªè¿ç¨éå¸¸å»çå¼ãå¹³å°ççæ¯å¾ç§é¡¾å°ç½äºï¼çæå¤æä½ä¸æ­¥å°±æç¨æ·åéæã</span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-pair-s "><strong>5ï¼è·ä½ ç AI åå·¥èèå¤©</strong></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç¹å»é¡µé¢ä¸æ¹ç <span class="md-pair-s "><strong>è·åç½ç«å°å</strong><span class="md-plain">ï¼</span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209150158108.png"><img data-src="https://pic.yupi.icu/1/image-20260209150158108.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç¶åæå¼é¾æ¥è¿å¥ OpenClaw ç½é¡µç«¯ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209150316824.png"><img data-src="https://pic.yupi.icu/1/image-20260209150316824.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç°å¨ä½ å°±å¯ä»¥ç´æ¥å¨ç½é¡µä¸è· OpenClaw å¯¹è¯äºï¼æ¯å¦åç»ä»åä¸ªåå­å§ï¼æè¿éå«ä»ä¸ºãé±¼ç®çå¤©èãï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209150631021.png"><img data-src="https://pic.yupi.icu/1/image-20260209150631021.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">å¯ä»¥çå°ï¼AI èªå¨æ´æ°äºèªå·±çèº«ä»½ï¼å¹¶ä¸ä¼ä¸ç´ä¿çè¿æ®µè®°å¿ãä¹åï¼ä½ å¯ä»¥éè¿ä¸æ­å°å¯¹è¯æ¥è®­ç» AIï¼è®©ä»æä¸ºä½ æå¾åçå©æã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ä¸è¿è¯è¯´åæ¥ï¼æ»ä¸è½æ¯æ¬¡æ³æ¾ AI å¸®å¿é½è·å»å¼çµèãæå¼æµè§å¨è®¿é®ç½é¡µå§ï¼é£ä¹å¤ªéº»ç¦äºã</span></p>
<p class="md-end-block md-p"><span class="md-plain">æä¹è½éæ¶èç³»å°æç AI åå·¥å¢ï¼</span></p>
<p class="md-end-block md-p"><span class="md-plain">ç­æ¡å½ç¶æ¯ï¼<span class="md-pair-s "><strong>éè¿ææºç» AI åå·¥åæ¶æ¯</strong><span class="md-plain">ã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">å ä¹ææèå¤©è½¯ä»¶é½è½æ¥å OpenClaw è¿ä½ AI åå·¥ï¼æ¯å¦ QQãä¼ä¸å¾®ä¿¡ãééãé£ä¹¦ç­ç­ãä¸é¢æå°±ä»¥æ´éåä¸ªäººç¨æ·ç QQ ä¸ºä¾ï¼ç»å¤§å®¶æ¼ç¤ºå¦ä½å¨ææºä¸é¥æ§ AI å¹²æ´»ã</span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">å¨ææº QQ ä¸é¥æ§ AI å¹²æ´»</span></h2>
<p class="md-end-block md-p"><span class="md-plain">å¦æä½ ä½¿ç¨ç¾åº¦æºè½äºå®è£ OpenClawï¼é£ä¹æ¥å¥ QQ å°±éå¸¸ç®åäºï¼å æ­¥å°±æå®ã</span></p>
<p class="md-end-block md-p"><span class="md-pair-s "><strong>1ï¼åå»º QQ æºå¨äºº</strong></span></p>
<p class="md-end-block md-p"><span class="md-plain">æå¼ <span class="md-meta-i-c  md-link"><a href="https://q.qq.com/" rel="noopener nofollow"><span class="md-plain">QQ å¼æ¾å¹³å°</span></a><span class="md-plain">ï¼æ³¨åå¹¶ç»å½ï¼</span></span></span></p>
<blockquote>
<p class="md-end-block md-p"><span class="md-plain">æè·¯ï¼<span class="md-link md-pair-s"><a href="https://q.qq.com/" rel="noopener nofollow">https://q.qq.com</a></span></span></p>
</blockquote>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209151938145.png"><img data-src="https://pic.yupi.icu/1/image-20260209151938145.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç»å½æååï¼ç¹å» âæºå¨äººâ Tabï¼åå»ºä¸ä¸ªæ°çæºå¨äººï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209152043823.png"><img data-src="https://pic.yupi.icu/1/image-20260209152043823.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç»ä½ çæºå¨äººè®¾ç½®ä¸ä¸ªç±ç§°åå¯ç±çå¤´åå§ï¼ä¾¿äºä¹åå¨ QQ ä¸­æ¾å°ä»ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209152207016.png"><img data-src="https://pic.yupi.icu/1/image-20260209152207016.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-pair-s "><strong>2ï¼è®¾ç½®æºå¨äºº</strong></span></p>
<p class="md-end-block md-p"><span class="md-plain">åå»ºå®æåï¼è¿å¥æºå¨äººçå¼åç®¡çé¡µé¢ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209152253262.png"><img data-src="https://pic.yupi.icu/1/image-20260209152253262.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">æ¾å° <span class="md-pair-s "><strong>AppID</strong><span class="md-plain"> å <span class="md-pair-s "><strong>AppSecret</strong><span class="md-plain">ï¼å¤å¶ä¿å­å¥½ï¼ç­ä¼è¦ç¨ã</span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209152347726.png"><img data-src="https://pic.yupi.icu/1/image-20260209152347726.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">è¿è¦æä½ äºæå¡å¨ç <span class="md-pair-s "><strong>å¬ç½ IP</strong><span class="md-plain"> æ·»å å° IP ç½ååéï¼ç¶åä¿å­ã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209152537553.png"><img data-src="https://pic.yupi.icu/1/image-20260209152537553.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">äºæå¡å¨çå¬ç½ IP å¨ç¾åº¦æºè½äºçæå¡å¨ç®¡çé¡µé¢å°±è½çå°ï¼æ³¨æä¸è¦æ´é²ç»å«äººå¦ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209152435791.png"><img data-src="https://pic.yupi.icu/1/image-20260209152435791.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-pair-s "><strong>3ï¼å¡«åæ¶æ¯å¹³å°éç½®</strong></span></p>
<p class="md-end-block md-p"><span class="md-plain">å¨ç¾åº¦æºè½äºçæå¡å¨ç®¡çé¡µé¢ï¼æ¾å° <span class="md-pair-s "><strong>æ¶æ¯å¹³å°éç½®</strong><span class="md-plain">ï¼ä¸æéæ© <span class="md-pair-s "><strong>QQ</strong><span class="md-plain">ï¼æåæç AppID å AppSecret å¡«è¿å»ï¼ç¹ <span class="md-pair-s "><strong>åºç¨</strong><span class="md-plain">ï¼ç­å®æ§è¡å®å°±å¥½äºã</span></span></span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209152729389.png"><img data-src="https://pic.yupi.icu/1/image-20260209152729389.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<p class="md-end-block md-p"><span class="md-pair-s "><strong>4ï¼æ·»å è®¿é®æºå¨äººçæé</strong></span></p>
<p class="md-end-block md-p"><span class="md-plain">åå° QQ å¼æ¾å¹³å°ï¼å¨æ²ç®±éç½®éç»ä½ ç QQ è´¦å·ï¼æè QQ ç¾¤ï¼æ·»å è®¿é®æºå¨äººçæéï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209152928094.png"><img data-src="https://pic.yupi.icu/1/image-20260209152928094.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç¶åç¨ QQ æ«ç æ·»å æºå¨äººå°±è¡äºï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209153102382.png"><img data-src="https://pic.yupi.icu/1/image-20260209153102382.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç°å¨ï¼ä½ å¯ä»¥ç´æ¥å¨ QQ ä¸è·ä½ ç AI æ°å­åå·¥èå¤©äºï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209153537993.png"><img data-src="https://pic.yupi.icu/1/image-20260209153537993.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ä¹åï¼ä½ åªéè¦èººå¨åºä¸æå¼ QQï¼å°±è½ææ¥è¿ç¨æå¡å¨ä¸ç AI å¹²æ´»ï¼å·´éå¾æ¿~</span></p>
<p class="md-end-block md-p"><span class="md-plain">é¤äº QQï¼OpenClaw è¿æ¯ææ¥å¥é£ä¹¦ãééãä¼ä¸å¾®ä¿¡ï¼éç½®æ¹å¼é½å·®ä¸å¤ï¼æéè¦çåå­¦å¯ä»¥çå®æ¹æç¨ï¼</span></p>
<ul class="ul-list" data-mark="-">
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">OpenClaw æ¥å¥ééï¼<span class="md-link md-pair-s"><a href="https://cloud.baidu.com/doc/LS/s/wml9dlyfu" rel="noopener nofollow">https://cloud.baidu.com/doc/LS/s/wml9dlyfu</a></span></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">OpenClaw æ¥å¥é£ä¹¦ï¼<span class="md-link md-pair-s"><a href="https://cloud.baidu.com/doc/LS/s/2ml9dnf3j" rel="noopener nofollow">https://cloud.baidu.com/doc/LS/s/2ml9dnf3j</a></span></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">OpenClaw æ¥å¥ä¼ä¸å¾®ä¿¡ï¼<span class="md-link md-pair-s"><a href="https://cloud.baidu.com/doc/LS/s/Nml9dk84r" rel="noopener nofollow">https://cloud.baidu.com/doc/LS/s/Nml9dk84r</a></span></span></p>
</li>
</ul>
<p class="md-end-block md-p"><span class="md-plain">ä¸è¿å«å¯¹ä»æå¤ªé«çè¦æ±ï¼ä½ è¦æ¯ç°å¨å°±ç»ä»å¤æçä»»å¡ï¼å¯è½å®ä¼ âé¿å·´é¿å·´âï¼èµåæºéã</span></p>
<p class="md-end-block md-p"><span class="md-plain">æ¯å¦æé®ä»ä¸ä¸ªéå¸¸ç®åçé®é¢ï¼ä»ç«ç¶åç»ææ¥äºä¸ªéï¼ç¶åè¯´èªå·±æ²¡æèç½æç´¢åè½ï¼ï¼ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/30d2456023e115b5aa37b5d0c34274fe.jpg"><img data-src="https://pic.yupi.icu/1/30d2456023e115b5aa37b5d0c34274fe.jpg" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">è¦æ³è®© AI åå¾æ´å¼ºï¼å°±éè¦ç¨å° Skills äºã</span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">ç»ä½ ç AI åå·¥è£æè½å</span></h2>
<p class="md-end-block md-p"><span class="md-plain">Skills çå¨ç§°æ¯ Agent Skillsï¼ä¹å¨ AI åå¿ç«å¾ä¸å¡ç³æ¶ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ç®åæ¥è¯´ï¼å®å°±æ¯ç» AI è£å¤çæè½åï¼éé¢æç²¾å¿è®¾è®¡çæç¤ºè¯ãä»£ç èæ¬ãè¿æåç§èµæºæä»¶ï¼è®© AI è½å¨ç¹å®ä»»å¡ä¸è¡¨ç°å¾æ´ä¸ä¸ãæ¯å¦ä½ ç» AI è£ä¸ª PPT å¶ä½ Skillsï¼ä»å°±ä¼å PPT äºã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ä½ å¯ä»¥éè¿ç» OpenClaw å®è£æè½åï¼æ¥å¢å¼ºä»çè½åã</span></p>
<p class="md-end-block md-p"><span class="md-pair-s "><strong>æä¹è·ååå®è£æè½å¢ï¼</strong></span></p>
<p class="md-end-block md-p"><span class="md-plain">å¦æä½ ä½¿ç¨ç¾åº¦æºè½äºå®è£ OpenClawï¼å®è£æè½å°±éå¸¸ç®åäºã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ç¾åº¦åå¸æè¿æèªå®¶ç AI è½åæåæäº Skillï¼å¹¶ä¸ä¸æ¶å°äº OpenClaw çæè½ååº <span class="md-meta-i-c  md-link"><a href="https://clawhub.ai/skills" rel="noopener nofollow"><span class="md-plain">ClawHub</span></a><span class="md-plain">ï¼ç®åä¸å±æ 6 æ¬¾å®æ¹ Skillãåæ¬ç¾åº¦æç´¢ãç¾åº¦ç¾ç§ãå­¦æ¯æ£ç´¢ãAI ç»æ¬çæãæºè½ PPT çæãåå¸æ·±åº¦ç ç©¶ Agentã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç´æ¥è¿å¥å°æå¡å¨ç®¡çé¡µé¢ç Skills éç½®ï¼å°±è½å»çå¼æç´¢åå®è£æè½äºï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209154028274.png"><img data-src="https://pic.yupi.icu/1/image-20260209154028274.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">æ¯å¦æå®è£äºç¾åº¦æç´¢åç¾åº¦ç¾ç§ Skillsï¼è¿ä¸¤åé½æ¯ç¾åº¦çç¹é¿ï¼éåç¨æ¥æç´¢å½åçä¿¡æ¯æºã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209154152546.png"><img data-src="https://pic.yupi.icu/1/image-20260209154152546.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">æ·»å  Skills å®æåï¼è¿å¥å° OpenClaw ç®¡çé¡µé¢ç Skills éç½®ä¸­ï¼å¯ä»¥çå°æè½å®è£æåï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209160408078.png"><img data-src="https://pic.yupi.icu/1/image-20260209160408078.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç¶åæè®©ãé±¼ç®çå¤©èãå¸®ææç´¢ âç¨åºåé±¼ç®âï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/8a535406f294c23379ee79b0a703b645.jpg"><img data-src="https://pic.yupi.icu/1/8a535406f294c23379ee79b0a703b645.jpg" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">è¿æ¬¡çç»æé è°±å¤äºï¼å¨ OpenClaw ç½é¡µå¯¹è¯æ¡ä¸­ï¼å¯ä»¥çå° AI è°ç¨äºç¾åº¦æç´¢æè½ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209160023370.png"><img data-src="https://pic.yupi.icu/1/image-20260209160023370.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">é¤äºä¸è¿°å®è£æè½çæ¹å¼å¤ï¼ä½ è¿å¯ä»¥ç»å½æå¡å¨ï¼è¾å¥ä¸è¡å½ä»¤æ¥æå¨å®è£æè½ï¼</span></p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span>npx clawhub@latest install [skillåç§°]</span></pre>
<p class="md-end-block md-p"><span class="md-plain">ä¸è¿æä¼°è®¡éç¨åºåæåä»¬æ¯ä¸ç¥éæä¹æä½æå¡å¨çï¼å®å¨æ²¡å³ç³»ï¼æ¯ç«ç°å¨å·²ç»æ¯ AI æ¶ä»£äºï¼å¹²åè¿èªå·±å¨ææä½æå¡å¨ï¼ç´æ¥è®© AI èªå·±è£ä¸å°±å®äºï¼</span></p>
<p class="md-end-block md-p"><span class="md-plain">æè· OpenClaw è¯´äºå¥ï¼</span></p>
<blockquote>
<p class="md-end-block md-p"><span class="md-plain">å¸®æå®è£ç¼ç¨å¨ç»å¶ä½æè½</span></p>
</blockquote>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209160913210.png"><img data-src="https://pic.yupi.icu/1/image-20260209160913210.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">å®ä¸å¼å§å¯è½ä¼æç»æèä¸å¤ªçè§£ï¼æ²¡å³ç³»ï¼ç¨å¾®å¼å¯¼ä¸ä¸å°±è¡ï¼</span></p>
<blockquote>
<p class="md-end-block md-p"><span class="md-plain">æå°±è¦ä½ æ¥æä½æå¡å¨å¸®æå®è£</span></p>
</blockquote>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209161210072.png"><img data-src="https://pic.yupi.icu/1/image-20260209161210072.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">è¿æ¬¡ï¼ä»æåå®æäºä»»å¡ãè®© AI èªå·±ç»èªå·±è£æè½ï¼ææ¯ AI æ¶ä»£è¯¥æçæä½æ¹å¼ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">å¦æä½ æ³æ¢ç´¢æ´å¤æè½ï¼å¯ä»¥å» <span class="md-meta-i-c  md-link"><a href="https://clawhub.ai/skills" rel="noopener nofollow"><span class="md-plain">ClawHub</span></a><span class="md-plain"> éä¸éã</span></span></span></p>
<blockquote>
<p class="md-end-block md-p"><span class="md-plain">æè·¯ï¼<span class="md-link md-pair-s"><a href="https://clawhub.ai/" rel="noopener nofollow">https://clawhub.ai</a></span></span></p>
</blockquote>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209173015903.png"><img data-src="https://pic.yupi.icu/1/image-20260209173015903.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ä¸è¿é±¼ç®å»ºè®®å¤§å®¶è°¨æå®è£ Skillsï¼éå¿è¦ä¸å®è£ãéå®æ¹ä¸å®è£ï¼æ¯ç« Skills æ¯äººä¸ºå¶ä½çï¼å¯è½ä¼å­å¨å®å¨éæ£ã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/c1eca273aeeaf86ff3d2a0e7daa55459.png"><img data-src="https://pic.yupi.icu/1/c1eca273aeeaf86ff3d2a0e7daa55459.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">æäº OpenClaw è½å¹²å¥</span></h2>
<p class="md-end-block md-p"><span class="md-plain">æä¼°è®¡å¾å¤åå­¦æ­å»ºå® OpenClaw å¯è½å°±æé£å¿äºï¼æèä¸ç¥é OpenClaw å°åºè½åäºä»ä¹ãæä»¥æè¿éåäº«å ä¸ªæ¯è¾å®ç¨çç©æ³ï¼å¤§å®¶å¯ä»¥ç´æ¥æä½ä¸ã</span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h3 class="md-end-block md-heading"><span class="md-plain">1ãAI å¸®ä½ è¿½ç­ç¹</span></h3>
<p class="md-end-block md-p"><span class="md-plain">æå¨ QQ ä¸è· OpenClaw è¯´äºä¸å¥ï¼å¸®æè·å AI ç¸å³çèµè®¯ç­ç¹ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">è¿äºä¸ä¼å¿ï¼å®åäºæä¸ä»½æ´æ´é½é½çç­ç¹æè¦ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/ce2501ffae6c213e1b07f570ac32464b.jpg"><img data-src="https://pic.yupi.icu/1/ce2501ffae6c213e1b07f570ac32464b.jpg" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ä»¥åæå¯è½è¦å°ç½ä¸å·å·æ°é»ï¼ç°å¨åæ¡æ¶æ¯å°±æå®äº~</span></p>
<p class="md-end-block md-p"><span class="md-plain">å¦æéè¦çè¯ï¼ä½ è¿å¯ä»¥è®©å®è·ä¸ªå®æ¶ä»»å¡ï¼æ¯å¦è®¾å® âæ¯å¤©æ©ä¸ 8 ç¹å¸®ææä¸ä¸ OpenClaw ç¤¾åºææ²¡ææ°çç©æ³âï¼å®å°±é»é»å¸®ä½ ç¯çï¼ææ¶æ¯ç¬¬ä¸æ¶é´æ¨ç»ä½ ã</span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h3 class="md-end-block md-heading"><span class="md-plain">2ãçµæè®°å½å¨</span></h3>
<p class="md-end-block md-p"><span class="md-plain">ææ¶èµ°å¨è·¯ä¸ï¼æå¯è½ä¼çªç¶æä¸äºå¥½çæ³æ³ãæèçªç¶æ³èµ·äºæä»¶äºæï¼ä¸ºäºé²æ­¢å¿è®°ï¼å°±ä¼æå¼ææºå¤å¿å½è®°ä¸æ¥ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ä¹èä¹ä¹ï¼è®°çåå®¹è¶æ¥è¶å¤ï¼å¯¼è´å¾å¤è®°ä¸æ¥çåå®¹ä¹è¢«å¿½ç¥äºã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ç°å¨ï¼æå¯ä»¥ç´æ¥æ OpenClaw å½åæ¯æçè¶çº§å¤å¿å½ï¼åç» AI è®¾å®ä¸ä¸ªè§è²ï¼æ¯å¦åè¯å® âä½ æ¯ä¸ä¸ªçµæè®°å½å¨âï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209180148160.png"><img data-src="https://pic.yupi.icu/1/image-20260209180148160.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ä¹åæä»»ä½æå¿è®°çæ³æ³æäºæï¼ç´æ¥æåºææºå¨ QQ ä¸è· AI è¯´ä¸å¥å°±è¡äºã</span></p>
<p class="md-end-block md-p"><span class="md-plain">OpenClaw è·æ®éå¤å¿å½ä¸ä¸æ ·ï¼å®ä¸åªæ¯å¸®ä½ è®°ï¼è¿ä¼å¸®ä½ ä¿®æ­£éå«å­ååç±»æ´çï¼èä¸æ°¸è¿ä¸ä¼å¿äºï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209180446618.png"><img data-src="https://pic.yupi.icu/1/image-20260209180446618.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h3 class="md-end-block md-heading"><span class="md-plain">3ãéèº«æºå¸¦çè¶çº§ç¨åºå</span></h3>
<p class="md-end-block md-p"><span class="md-plain">è¿åºè¯¥æ¯æè®©ç¨åºåæåä»¬å´å¥çåºæ¯äºã</span></p>
<p class="md-end-block md-p"><span class="md-plain">å ä¸º OpenClaw æ¯è·å¨æå¡å¨ä¸çï¼å®è½ç´æ¥å¨æå¡å¨ä¸åä»£ç ãè¿è¡ç¨åºãé¨ç½²æå¡ï¼åå®ä½ å°±è½ç´æ¥ç¨ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">æ¯å¦æå¨åå°éçæ¶åï¼ç´æ¥æåºææºï¼å¨ QQ ä¸è· OpenClaw è¯´ä¸å¥ï¼</span></p>
<blockquote>
<p class="md-end-block md-p"><span class="md-plain">å¸®æåä¸ä¸ªç½é¡µå°å·¥å·ï¼è½ä¸ä¼ å¾çåæ¹éåç¼©ï¼æ¯æè°æ´åç¼©è´¨éï¼åå®ç´æ¥é¨ç½²å°æå¡å¨ä¸è®©æè½è®¿é®ã</span></p>
</blockquote>
<p class="md-end-block md-p"><span class="md-plain">è¿äºå åéï¼AI åå¤æï¼å·¥å·åå¥½äºï¼å·²ç»é¨ç½²ä¸çº¿ï¼ç´æ¥è®¿é® XX å°åå°±è½ç¨ã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209183510372.png"><img data-src="https://pic.yupi.icu/1/image-20260209183510372.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">æ²¡éï¼å°±åäºæ¡æ¶æ¯ï¼ä¸ä¸ªè½ç¨çå¨çº¿å·¥å·å°±åºæ¥äºï¼è·åé­æ¯ä¼¼çã</span></p>
<blockquote>
<p class="md-end-block md-p"><span class="md-plain">æ³¨æï¼å¦ææ æ³è®¿é®ï¼å¯è½æ¯å ä¸ºæ²¡æç»æå¡å¨çé²ç«å¢å¼æ¾å¯¹åºç«¯å£ã</span></p>
</blockquote>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209183750274.png"><img data-src="https://pic.yupi.icu/1/image-20260209183750274.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ä¹åä½ æäºä»»ä½çµæï¼çè³é½ä¸éè¦æåºçµèï¼å¨ç¨éè¿ææºè· AI å¯¹è¯ï¼å°±è½åé åºå¯è¿è¡çé¡¹ç®ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">è¿ç§æè§ï¼æä¹è¯´å¢ï¼æç¹é¢éä¾ åå³å¿äºã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260209182902058.png"><img data-src="https://pic.yupi.icu/1/image-20260209182902058.png" class="lazyload"></span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">æå</span></h2>
<p class="md-end-block md-p"><span class="md-plain">çå°è¿éï¼ç¸ä¿¡å¤§å®¶å·²ç»è½æåå°ï¼<span class="md-pair-s "><strong>OpenClaw çä¸æé¨æ§å·²ç»è¢«ç ¸å°å°æ¿ä¸äº</strong><span class="md-plain">ã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">åªè¦è±å åéï¼å°±è½æ¥æç§äººç AI æ°å­åå·¥ï¼ä¹åä½ å¨ææºä¸åæ¡ QQ æ¶æ¯ï¼å°±è½è®© AI å¸®ä½ æä¿¡æ¯ãç®¡æä»¶ãåä»£ç ãåè°ç ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ä¸ç®¡ä½ æ¯ç¨åºåãå­¦çãè¿æ¯æ®éä¸ç­æï¼æé½å»ºè®®ä½ å»è¯è¯ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">æååè´´ä¸ä¸å®æ¹çé¨ç½²æç¨ï¼ç¹å»éè¯»åæå¯ä»¥ç´æ¥è·³è½¬ã</span></p>
<blockquote>
<p class="md-end-block md-p"><span class="md-plain">æä½æåï¼<span class="md-link md-pair-s"><a href="https://cloud.baidu.com/doc/LS/s/6ml9f3cvl" rel="noopener nofollow">https://cloud.baidu.com/doc/LS/s/6ml9f3cvl</a></span></span></p>
</blockquote>
<p class="md-end-block md-p"><span class="md-plain">ä¹æ¬¢è¿å¤§å®¶å¤å¤åäº«ä½ ç OpenClaw ç©æ³ï¼è¯è®ºåºè§~</span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">æ´å¤ç¼ç¨å­¦ä¹ èµæº</span></h2>
<ul class="ul-list" data-mark="-">
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/course" rel="noopener nofollow"><span class="md-plain">Javaåç«¯ç¨åºåå¿åé¡¹ç®å®ææç¨+æ¯è®¾ç½ç«</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/" rel="noopener nofollow"><span class="md-plain">ç¨åºååè´¹ç¼ç¨å­¦ä¹ äº¤æµç¤¾åºï¼èªå­¦å¿å¤ï¼</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/course/cv" rel="noopener nofollow"><span class="md-plain">ç¨åºåä¿å§çº§æ±èåç®åæåï¼æ¾å·¥ä½å¿å¤ï¼</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.mianshiya.com/" rel="noopener nofollow"><span class="md-plain">ç¨åºååè´¹é¢è¯å·é¢ç½ç«å·¥å·ï¼æ¾å·¥ä½å¿å¤ï¼</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640584449888772098" rel="noopener nofollow"><span class="md-plain">ææ°Javaé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + Javaæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640586673306091521" rel="noopener nofollow"><span class="md-plain">ææ°Pythoné¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + Pythonæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640586014108303362" rel="noopener nofollow"><span class="md-plain">ææ°åç«¯é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + åç«¯æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640586867363954689" rel="noopener nofollow"><span class="md-plain">ææ°æ°æ®ç»æåç®æ³é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + ç®æ³æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1644279832026075138" rel="noopener nofollow"><span class="md-plain">ææ°C++é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ãC++æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1641797333479903234" rel="noopener nofollow"><span class="md-plain">ææ°æ°æ®åºé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + æ°æ®åºæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640589994284695553" rel="noopener nofollow"><span class="md-plain">ææ°Redisé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + Redisæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1641035880439271426" rel="noopener nofollow"><span class="md-plain">ææ°è®¡ç®æºåºç¡å¥é¨å­¦ä¹ è·¯çº¿ + è®¡ç®æºåºç¡æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1641366118197153793" rel="noopener nofollow"><span class="md-plain">ææ°å°ç¨åºå¥é¨å­¦ä¹ è·¯çº¿ + å°ç¨åºå¼åæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="http://sqlmother.yupi.icu/" rel="noopener nofollow"><span class="md-plain">ææ°SQLé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + SQLæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640586295529324545" rel="noopener nofollow"><span class="md-plain">ææ°Linuxé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + Linuxæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640588753362108417" rel="noopener nofollow"><span class="md-plain">ææ°Git/GitHubé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + Gitæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640587909942099969" rel="noopener nofollow"><span class="md-plain">ææ°æä½ç³»ç»é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + æä½ç³»ç»æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640588119619551233" rel="noopener nofollow"><span class="md-plain">ææ°è®¡ç®æºç½ç»é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + è®¡ç®æºç½ç»æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640588392073150465" rel="noopener nofollow"><span class="md-plain">ææ°è®¾è®¡æ¨¡å¼é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + è®¾è®¡æ¨¡å¼æç¨</span></a></span></p>
</li>
<li class="md-list-item md-focus-container">
<p class="md-end-block md-p md-focus"><span class="md-meta-i-c md-link md-expand"><a href="https://www.code-nav.cn/post/1640648711119892481" rel="noopener nofollow"><span class="md-plain">ææ°è½¯ä»¶å·¥ç¨é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + è½¯ä»¶å·¥ç¨æç¨</span></a></span></p>
</li>
</ul>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-10 15:58">2026-02-10 15:58</span>&nbsp;
<a href="https://www.cnblogs.com/yupi">ç¨åºåé±¼ç®</a>&nbsp;
éè¯»(<span id="post_view_count">217</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19600386);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19600386', targetLink: 'https://www.cnblogs.com/yupi/p/19600386', title: 'å¨ç½æç®åç OpenClaw é¨ç½²æç¨ï¼5 åéæ¥æä½ ç AI åå·¥' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ è§£å Pythonï¼å³äºæéãGIL ä¸å¼æ­¥åæ ¸ ]]></title>
    <link>https://www.cnblogs.com/kaiux/p/19598962</link>
    <guid>a25c11cf45795bc42947d9f00f5f1b04</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/kaiux/p/19598962" title="åå¸äº 2026-02-10 12:01">
    <span role="heading" aria-level="2">è§£å Pythonï¼å³äºæéãGIL ä¸å¼æ­¥åæ ¸</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/1158182/202602/1158182-20260210120046308-982867969.png" alt="è§£å Pythonï¼å³äºæéãGIL ä¸å¼æ­¥åæ ¸" class="desc_img">
        æ¬æä»¥ C++ ç³»ç»è§è§ï¼è§£æ Python çåºå±åçãæ·±åº¦åæ `PyObject` åå­å¸å±ãGIL çåå­æ§å¹»è§å `asyncio` ç epoll æ¬è´¨ãéè¿ C++ æ©å±æç ´è¾¹çï¼æ­ç¤ºâè¶æ°´è¯­è¨âå¦ä½éè¿çºç²åæ ¸è®¡ç®ï¼æ¢åæè´çè°åº¦æçä¸çæåæ­ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p><img src="https://img2024.cnblogs.com/blog/1158182/202602/1158182-20260210120115327-1286094950.jpg" alt="python_overview" loading="lazy"></p>
<h2 id="1-ai-æ¶ä»£çæ°å­è¶æ°´-the-necessity-in-ai-era">1. AI æ¶ä»£çâæ°å­è¶æ°´â (The Necessity in AI Era)</h2>
<h3 id="11-çæä½çåæ­ä½ä¸º-c-çé«å±æä»¤æé-ip">1.1. çæä½çåæ­ï¼ä½ä¸º C++ çé«å±æä»¤æé (IP)</h3>
<p>ä»»ä½å¯¹è®¡ç®æºä½ç³»ç»ææè®¤ç¥çå¼åèé½æ¸æ¥ï¼Python çåçæ§è½æ¯ç¾é¾çº§çãå®æ¬è´¨ä¸æ¯ä¸ä¸ªåºäºæ çèææºï¼æ¯ä¸ä¸ªæ´æ°å æ³ (<code>a + b</code>) é½è¦ç»åç±»åæ£æ¥ãå¼ç¨è®¡æ°æ´æ° (<code>Py_INCREF/DECREF</code>) åå·¨å¤§çåæ´¾å¼éãå¦æä½ è¯å¾ç¨çº¯ Python å»åç©éµä¹æ³ï¼CPU çåæ¯é¢æµåå (Branch Predictor) ä¼è¢«ä½ æä¹±æ ç« çæä»¤æµæå¾ä¸å¡ç³æ¶ï¼L1/L2 Cache ä¹ä¼å ä¸ºæ£è½å¨å ä¸ç <code>PyObject</code> èé¢ç¹å¤±æã</p>
<p><strong>ç¶èï¼AI ä¸éè¦ Python å»åè®¡ç®ï¼AI åªéè¦ Python å»âä¸ä»¤âã</strong></p>
<p>å¨ PyTorch æ TensorFlow çæ¶æä¸­ï¼Python ä»£ç æ®æ¼çè§è²å®éä¸æ¯<strong>æ§å¶å¹³é¢ (Control Plane)</strong>ï¼è C++/CUDA ææ¯<strong>æ°æ®å¹³é¢ (Data Plane)</strong>ãå½ä½ åä¸ <code>z = torch.matmul(x, y)</code> æ¶ï¼Python è§£éå¨æåçä»ä»æ¯æå»ºè®¡ç®å¾ãè¿è¡åæ°æ ¡éªï¼ç¶åå°æä»¤æéï¼Instruction Pointerï¼çæ§å¶æéè¿ C ABI (Application Binary Interface) ç§»äº¤ç»åºå±ç C++ å¨æåºã</p>
<p>ä¸æ¦è¿å¥åºå±ï¼SIMD æä»¤éãAVX-512 çè³ GPU ç Tensor Cores ä¾¿æ¥ç®¡äºä¸åãæ­¤æ¶ï¼Python çé£ç¹è§£éå¨å¼éå¨èæ¶æ°æ¯«ç§çè³æ°ç§çç©éµè¿ç®é¢åï¼å®å¨å¯ä»¥å¿½ç¥ä¸è®¡ï¼Amdahl's Law çåååºç¨ï¼ã</p>
<p><strong>Trade-off åæï¼</strong></p>
<ul>
<li><strong>çºç²ï¼</strong> åçº¿ç¨æ éè®¡ç®æ§è½ï¼ææ¢ï¼ã</li>
<li><strong>æ¢åï¼</strong> æè´ç C/C++ äºæä½æ§ãPython æ¯å¯ä¸ä¸ä¸ªè½è®© C++ å¼åèæå°âåæ¯å¨åä¼ªä»£ç ï¼ä½è½æ ç¼è°ç¨ <code>.so</code> åºâçè¯­è¨ãå®æ¯ AI åºç¡è®¾æ½ï¼C++ï¼ä¸ä¸å¡é»è¾ï¼Human Logicï¼ä¹é´æèçâè¶æ°´å±âã</li>
</ul>
<p>è¿ç§åå±æ¶æçè³å¯¼è´äº AI åºç¡è®¾æ½çè¿ä¸æ­¥ä¸æ²ãä¸ºäºé¿å Python å¨æ°æ®é¢å¤çï¼å¦ TokenizerãImage Decodeï¼é¶æ®µæä¸ºç¶é¢ï¼ç°å¨çè¶å¿æ¯å°æ´ä¸ªæ°æ®å è½½ç®¡çº¿ï¼DataLoaderï¼ä¹ä¸æ²å° C++ æ Rust ä¸­ï¼ä¾å¦ NVIDIA DALI æ HuggingFace Tokenizersï¼ãPython éæ¸éåä¸ºçº¯ç²¹çéç½®è¯­è¨åè¶æ°´å±ã</p>
<h3 id="12-ä»è®¡ç®å°ååio-å¯éåçèå©">1.2. ä»è®¡ç®å°ååï¼IO å¯éåçèå©</h3>
<p>å¨ä¼ ç»çé«æ§è½è®¡ç® (HPC) æ¶ä»£ï¼æä»¬ä¸ºäºåå°çº³ç§çº§çå»¶è¿ï¼ä¸ææåæ±ç¼ä¼åä¸ä¸æåæ¢ (Context Switch)ãä½å¨ LLM é©±å¨ç Agent æ¶ä»£ï¼ç¶é¢åçäºè´¨çè½¬ç§»ã</p>
<p>ä¸ä¸ªå¸åç RAG (Retrieval-Augmented Generation) æµç¨æ ChatBI ç³»ç»ï¼å¶ 90% ççå½å¨æå¤äº <strong>Wait ç¶æ</strong>ï¼</p>
<ol>
<li>ç­å¾åéæ°æ®åºæ£ç´¢ (Network I/O)ã</li>
<li>ç­å¾ LLM API Token çæ (Network I/O)ã</li>
<li>ç­å¾æ°æ®åº SQL æ§è¡ç»æ (Network I/O)ã</li>
</ol>
<p>æ­¤æ¶ï¼CPU å¹¶ä¸æ¯å¨è®¡ç®ï¼èæ¯å¨æèµ·ãå¦æä½¿ç¨ C++ï¼ä½ éè¦å¤çå¤æç <code>epoll</code>ãåè°å°ç±æèåç¨åºï¼å¦ <code>boost::asio</code> æ C++20 coroutinesï¼ï¼å¼åææ¬æé«ã</p>
<p>Python å¨è¿éçä¼å¿å¨äºå¶<strong>æ½è±¡ææ¬æä½</strong>ãè½ç¶ Python ç GIL (Global Interpreter Lock) è­åæ­èï¼ä½å¨ IO å¯éååºæ¯ä¸ï¼OS ççº¿ç¨è°åº¦å¨æè Python ç <code>asyncio</code> äºä»¶å¾ªç¯ï¼Event Loopï¼è½å¾å¥½å°æ©ç CPU çç©ºé²ãæä»¬ä¸åå³æ³¨ TLB (Translation Lookaside Buffer) çå·æ°å¼éï¼èæ¯å³æ³¨å¦ä½ç¨æå°çä»£ç è¡æ°ï¼ç¼ææå¤æç API è°ç¨é¾è·¯ã</p>
<h3 id="13-ä»£ç å®ç°">1.3. ä»£ç å®ç°</h3>
<h4 id="131-åºæ¯ä¸æµå¼å¤çä¸åå­åå¥½-the-generator">1.3.1. åºæ¯ä¸ï¼æµå¼å¤çä¸åå­åå¥½ (The Generator)</h4>
<p>å¨ C++ ä¸­ï¼ä¸ºäºé¿åä¸æ¬¡æ§å è½½ 10GB çæ¥å¿æä»¶å¯¼è´ OOM (Out of Memory)ï¼æä»¬éè¦æå Buffer ç®¡çåè¿­ä»£å¨ãå¨ Python ä¸­ï¼<code>yield</code> å³é®å­æ¬è´¨ä¸æ¯ä¸ä¸ª<strong>ç¨æ·æçæ å¸§æèµ· (Stack Frame Suspension)</strong>ãå®åè®¸å½æ°å¨ä¿æå±é¨åéç¶æçæåµä¸æåæ§è¡ï¼å°æ§å¶æäº¤è¿ç»è°ç¨èï¼è¿æ¯ä¸ç§æå¶å»ä»·çâä¸ä¸æåæ¢âã</p>
<pre><code class="language-python">import time
import os

def raw_log_streamer(file_path: str, block_size: int = 4096):
    """
    æ¨¡æ C++ ç Buffered Readerã
    ä¸ä¸æ¬¡æ§è¯»åæ´ä¸ªæä»¶ï¼èæ¯å©ç¨ Generator æºå¶
    å¨ç¨æ·ææèµ·æ å¸§ï¼å®ç° Lazy Loadingã
    """
    # è¿éç file_obj å®éä¸æ¯å¯¹åºå±æä»¶æè¿°ç¬¦ (fd) çå°è£
    with open(file_path, 'rb') as f:
        while True:
            # è§¦å syscall: read()
            chunk = f.read(block_size)
            if not chunk:
                break
            # æ­¤æ¶å½æ°ç Stack Frame è¢«å»ç»ï¼
            # æä»¤æé IP æåä¸ä¸è¡ï¼å±é¨åéä¿çå¨å åå­ç PyFrameObject ä¸­
            yield chunk 

# ä½¿ç¨åºæ¯ï¼å¤çå·¨å¤§çæ°æ®éèä¸ç¸æ RAM
# è¿ç§åæ³å¨å¤ç AI æ°æ® Pipeline (å¦ DataLoader) æ¶æ¯æ åèå¼
# for data in raw_log_streamer("large_dataset.bin"):
#     process(data)

</code></pre>
<h4 id="132-åºæ¯äºåæ ¸æåæ¢-vs-ç¨æ·æè°åº¦-threading-vs-asyncio">1.3.2. åºæ¯äºï¼åæ ¸æåæ¢ vs ç¨æ·æè°åº¦ (Threading vs Asyncio)</h4>
<p>ä½ä¸ºç³»ç»å¼åèï¼ä½ å¿é¡»æç½ <code>threading</code> å <code>asyncio</code> çæ¬è´¨åºå«ï¼</p>
<ul>
<li><strong>Threading:</strong> æ å°å° OS çåççº¿ç¨ (pthreads)ãåæ¢éè¦åæ ¸ä»å¥ (Kernel Trap)ï¼æ¶åå¯å­å¨ä¿å­ãTLB å·æ°ï¼å¼éæè´µãä¸åå¶äº GILï¼Python å¤çº¿ç¨æ æ³å©ç¨å¤æ ¸ã</li>
<li><strong>Asyncio:</strong> åçº¿ç¨åçäºä»¶å¾ªç¯ãåæ¢åªæ¯ç®åçå½æ°æéè·³è½¬ (User-space switching)ï¼ <strong>é¶åæ ¸ä¸ä¸æåæ¢å¼é (Zero Kernel Context Switch Overhead)</strong>ã<em>(æ³¨ï¼è½ç¶é¿åäºæè´µç syscallï¼ä½ Python è§£éå¨æ¬èº«çå­èç åæ´¾ä¾ç¶æææ¬ï¼ä½å¨é«å¹¶å IO é¢åï¼è¿éå¸¸æ¯åç®çã)</em></li>
</ul>
<p>ä»¥ä¸ä»£ç ç´è§å±ç¤ºäºå¨ IO å¯éåä»»å¡ä¸­ï¼ä¸ºä»ä¹æä»¬éè¦ä»âçº¿ç¨æç»´âè½¬åâåç¨æç»´âã</p>
<pre><code class="language-python">import threading
import asyncio
import time

# æ¨¡æä¸ä¸ªé«å»¶è¿ç IO æä½ (ä¾å¦ç­å¾ LLM è¿å token)
# å¨ C++ è§è§ï¼è¿å°±æ¯ä¸ä¸ªå¯¼è´å½åçº¿ç¨è¢«æèµ·å° Wait Queue çæä½
IO_DELAY = 1.0 
TASK_COUNT = 50

def heavy_io_task_sync(idx):
    # é»å¡å¼ IOï¼çº¿ç¨è¢« OS æèµ·
    time.sleep(IO_DELAY) 

async def heavy_io_task_async(idx):
    # éé»å¡ IOï¼æ§å¶æäº¤è¿ç» Event Loopï¼
    # ä»ä»æ¯å¨ epoll/kqueue æ³¨åäºä¸ä¸ªäºä»¶
    await asyncio.sleep(IO_DELAY)

def run_threading():
    start = time.perf_counter()
    threads = []
    for i in range(TASK_COUNT):
        t = threading.Thread(target=heavy_io_task_sync, args=(i,))
        t.start()
        threads.append(t)
    
    for t in threads:
        t.join()
    print(f"[Threading] Completed {TASK_COUNT} tasks in {time.perf_counter() - start:.4f}s")
    # ä»£ä»·ï¼åå»ºäº 50 ä¸ª OS çº¿ç¨ï¼ä¸ä¸æåæ¢å¼éå¤§ï¼åå­å ç¨é« (æ¯ä¸ªçº¿ç¨é»è®¤æ å¤§å° ~8MB)

async def run_asyncio():
    start = time.perf_counter()
    tasks = [heavy_io_task_async(i) for i in range(TASK_COUNT)]
    # ææçä»»å¡å¨ä¸ä¸ª OS çº¿ç¨åå®æï¼æ åæ ¸æåæ¢
    await asyncio.gather(*tasks)
    print(f"[Asyncio]   Completed {TASK_COUNT} tasks in {time.perf_counter() - start:.4f}s")

if __name__ == "__main__":
    print(f"--- Benchmarking IO Concurrency (Tasks: {TASK_COUNT}) ---")
    run_threading()
    asyncio.run(run_asyncio())

"""
é¢æè¾åºç»æ (Trade-off æ¾èæè§):
--- Benchmarking IO Concurrency (Tasks: 50) ---
[Threading] Completed 50 tasks in 1.0xxx s (å ä¸æ¾èççº¿ç¨åå»ºåè°åº¦å¼é)
[Asyncio]   Completed 50 tasks in 1.00xx s (å ä¹ä»åéäºææ¢çé£ä¸ª IO)
"""

</code></pre>
<h3 id="14-æ»ç»">1.4. æ»ç»</h3>
<p>Python ä¸å¿«ï¼ä½å®è®©âå¿«âåå¾å®¹æè®¿é®ãæ¥ä¸æ¥æä»¬å°æ·±å¥æ¢è®¨ Python åå­ç®¡ççè³ææ¶å»ï¼ <strong>å¼ç¨è®¡æ°æºå¶ (Reference Counting) ä¸åå¾åæ¶ (GC) çä»£éåè¯´</strong>ï¼å¹¶åæä¸ºä½å¨æäºé«æ§è½åºæ¯ä¸ï¼æä»¬éè¦æå¨å¹²é¢è¿ä¸æºå¶ä»¥é¿å "Stop-the-World"ã</p>
<h2 id="2-åè®®å±æ¾å¼çæ§å¶-explicit-resource-management">2. åè®®å±ââæ¾å¼çæ§å¶ (Explicit Resource Management)</h2>
<p>å¦æè¯´ C++ çå²å­¦æ¯âä½ æ²¡æè°ç¨çä¸è¥¿å°±ä¸éè¦ä»åºä»£ä»·âï¼é£ä¹ Python çå²å­¦åæ¯âä¸ºäºå¼åæçï¼ä½ å¿é¡»æ¥åè¿è¡æ¶å¼éâãå¨èµæºç®¡çåæ§å¶æµè¿ä¸å±ï¼è¿ç§ Trade-off è¡¨ç°å¾æ·æ¼å°½è´ã</p>
<h3 id="21-raii-ç-python-æ å°ä»éå¼ææå°æ¾å¼ä¸ä¸æ">2.1. RAII ç Python æ å°ï¼ä»éå¼ææå°æ¾å¼ä¸ä¸æ</h3>
<p>å¨ C++ ä¸­ï¼RAII (Resource Acquisition Is Initialization) æ¯èµæºç®¡ççé»éæ³åãæä»¬ä¾èµæ å¯¹è±¡çç¡®å®æ§çå½å¨æï¼å½ <code>std::lock_guard</code> ç¦»å¼ä½ç¨åæ¶ï¼ææå½æ° <code>~lock_guard()</code> ä¼èªå¨éæ¾äºæ¥éãè¿ä¸åé½åçå¨ç¼è¯æç¡®å®çæ±ç¼æä»¤ä¸­ï¼é¶è¿è¡æ¶å¼éã</p>
<p>ä½å¨ Python ä¸­ï¼ä½ é¢å¯¹çæ¯ä¸ä¸ªå¸¦ GC çè¿è¡æ¶ã<strong>å¯¹è±¡ççå½å¨æä¸ä½ç¨åæ¯è§£è¦ç</strong>ã<br>
å½ä½ åä¸ <code>f = open("file.txt")</code> åï¼å³ä½¿å½æ°è¿åï¼<code>f</code> æåç <code>PyObject</code> ä¹å¯è½å ä¸ºå¼ç¨è®¡æ°æªå½é¶ï¼ä¾å¦è¢«é­åæè·ï¼ææ¯å¤äºå¾ªç¯å¼ç¨ä¸­ç­å¾ GC æ«æï¼èè¿è¿ä¸è°ç¨ <code>__del__</code>ã</p>
<p><strong>åºå±ççç¸ï¼</strong> ä¾èµ <code>__del__</code> ç®¡çæä»¶å¥æææ°æ®åºè¿æ¥æ¯ç³»ç»ç¼ç¨ä¸­çèªæè¡ä¸ºãä½ æ æ³é¢æµ GC ä½æ¶åçï¼Stop-the-Worldï¼ï¼è¿æå³çä½ çæä»¶æè¿°ç¬¦ (fd) å¯è½ä¼è¢«èå°½ã</p>
<p>ä¸ºäºè§£å³è¿ä¸ªé®é¢ï¼Python å¼å¥äº <strong>ä¸ä¸æç®¡çå¨åè®® (Context Manager Protocol)</strong>ââå³ <code>with</code> è¯­å¥ã</p>
<h4 id="211-åè®®è§£æ__enter__-ä¸-__exit__">2.1.1. åè®®è§£æï¼<code>__enter__</code> ä¸ <code>__exit__</code></h4>
<p><code>with</code> è¯­å¥æ¬è´¨ä¸æ¯ç¼è¯å¨æ³¨å¥ç <code>try...finally</code> åçè¯­æ³ç³ï¼ä½å®å°èµæºç®¡ççé»è¾å°è£å°äºå¯¹è±¡åé¨ã</p>
<ul>
<li><strong><code>__enter__(self)</code></strong>: å¯¹åº C++ çæé é»è¾ãåéèµæºï¼è¿åå¥æã</li>
<li><strong><code>__exit__(self, exc_type, exc_val, exc_tb)</code></strong>: å¯¹åº C++ çææé»è¾ãæ è®ºä»£ç åæ¯æ­£å¸¸ç»æè¿æ¯æåºå¼å¸¸ï¼VM é½ä¼å¼ºå¶è·³è½¬å°è¿éã</li>
</ul>
<p><strong>ä»£ç å®ç°ï¼æåä¸ä¸ªåå­çº§éå«å£«</strong></p>
<p>è®©æä»¬ç¨ Python å®ç°ä¸ä¸ªç±»ä¼¼ C++ <code>std::lock_guard</code> çæºå¶ãæ³¨æç <code>__exit__</code> å¦ä½å¤çå¼å¸¸ä¼ æ­ââè¿æ¯ C++ ææå½æ°éå¸¸æåé¿åçï¼æææåºå¼å¸¸ä¼å¯¼è´ <code>std::terminate</code>ï¼ï¼èå¨ Python ä¸­å´æ¯æ§å¶æµçä¸é¨åã</p>
<pre><code class="language-python">import threading
from types import TracebackType
from typing import Optional, Type

class ScopedLock:
    """
    æ¨¡æ C++ std::lock_guard ç RAII è¡ä¸ºã
    åºå±å¯¹åº opcode: SETUP_WITH -&gt; ... -&gt; WITH_EXCEPT_START / CALL_FUNCTION (__exit__)
    """
    __slots__ = ('_lock',) # åå­ä¼åï¼ç¦æ­¢ __dict__ï¼ä»åéæéå¤§å°çåå­

    def __init__(self, lock: threading.Lock):
        self._lock = lock

    def __enter__(self):
        # å¯¹åº lock.acquire()ï¼é»å¡ç´å°è·å¾é
        # è¿åå¼ç»å®å° with ... as target ç target
        self._lock.acquire()
        return self 

    def __exit__(self, 
                 exc_type: Optional[Type[BaseException]], 
                 exc_val: Optional[BaseException], 
                 exc_tb: Optional[TracebackType]):
        # å¯¹åº lock.release()
        # è¿æ¯ä¸ä¸ªç¡®å®æ§çæ¸çç¹ï¼ä¸ä¾èµ GC
        self._lock.release()
        
        # Trade-off: 
        # å¦æè¿å Trueï¼å¼å¸¸è¢«åå¬ï¼ç±»ä¼¼ catch {...}ï¼ã
        # å¦æè¿å False æ Noneï¼å¼å¸¸ç»§ç»­åä¸ä¼ æ­ï¼Rethrowï¼ã
        if exc_type:
            print(f"[System Logic] Detecting Unwind: {exc_type.__name__}")
            # è¿éå¯ä»¥éæ©å¤çå¼å¸¸ï¼æèè®©å®ç»§ç»­å¯¼è´æ å±å¼
        return False

# Usage
lock = threading.Lock()
with ScopedLock(lock):
    # Critical Section
    print("In Critical Section")
    # å³ä½¿è¿éåç 1/0 å¼å¸¸ï¼_lock.release() ä¾ç¶ä¼è¢«ç²¾åæ§è¡

</code></pre>
<p>ä»å­èç è§åº¦çï¼<code>with</code> è¯­å¥çæäº <code>SETUP_WITH</code> æä»¤ï¼å®å° <code>__exit__</code> æ¹æ³åå¥<strong>è¿è¡æ¶æ  (Evaluation Stack)</strong>ãè¿æ¯ C++ çç¼è¯å¨éææå¥ææè°ç¨è¦éå¾å¤ï¼ä½å®èµäºäºè¿è¡æ¶å¨æå¤çå¼å¸¸ççµæ´»æ§ã</p>
<h3 id="22-ç¶ææºçé­æ³çæå¨-generators-ä¸æ å¸§æä¹å">2.2. ç¶ææºçé­æ³ï¼çæå¨ (Generators) ä¸æ å¸§æä¹å</h3>
<p>å¨ Java ä¸­ï¼å¦æä½ æ³å®ç°ä¸ä¸ªæ°æ§è¿­ä»£å¨ï¼Iteratorï¼ï¼ä½ éå¸¸éè¦å®ä¹ä¸ä¸ªç±»ï¼ç»´æ¤ <code>currentIndex</code> ç¶æï¼å¹¶å®ç° <code>hasNext()</code> å <code>next()</code>ãè¿æ¯ä¸ç§<strong>æ¾å¼çç¶ææº</strong>ç»´æ¤ã</p>
<p>Python ç Generator åå¼å¥äºä¸ç§æ´é«é¶çæ½è±¡ï¼<strong>éå¼ç¶ææº</strong>ï¼æèæ´åç¡®å°è¯´ï¼<strong>ç¨æ·æçæ å¸§æèµ·</strong>ã</p>
<h4 id="221-æ ¸å¿å·®å¼c-æ -vs-python-æ ">2.2.1. æ ¸å¿å·®å¼ï¼C æ  vs. Python æ </h4>
<p>çè§£ Generator çå³é®å¨äºçè§£ Python çå½æ°è°ç¨æ¨¡åï¼</p>
<ol>
<li><strong>C Stack (ç³»ç»æ ):</strong> Python è§£éå¨ï¼Cç¨åºï¼èªèº«çå½æ°è°ç¨æ ã</li>
<li><strong>Python Stack (èææ ):</strong> Python ä»£ç æ§è¡æ¶çæ å¸§ (<code>PyFrameObject</code>) é¾è¡¨ã</li>
</ol>
<p>å³é®ç¹æ¥äºï¼<strong><code>PyFrameObject</code> æ¯åéå¨å ï¼Heapï¼ä¸çå¯¹è±¡</strong>ã</p>
<p>å½ä½ è°ç¨ä¸ä¸ªæ®éå½æ°æ¶ï¼Python åå»ºä¸ä¸ª Frameï¼æ§è¡å®åéæ¯ã<br>
ä½å½ä½ è°ç¨ä¸ä¸ª Generator å½æ°æ¶ï¼</p>
<ol>
<li>Python åå»ºä¸ä¸ª Frameã</li>
<li>éå° <code>yield</code> å³é®å­æ¶ï¼è§£éå¨<strong>æå</strong>è¯¥ Frame çæ§è¡ã</li>
<li><strong>ä¿å­æä»¤æé (f_lasti)</strong>ï¼è®°å½å½åæ§è¡å°äºåªæ¡å­èç ã</li>
<li><strong>ä¿å­æä½æ°æ </strong>ï¼è®°å½å½åçä¸´æ¶åéã</li>
<li>å°æ§å¶æè¿åç»è°ç¨èï¼ä½<strong>ä¸éæ¯è¯¥ Frame</strong>ã</li>
</ol>
<p>è¿æå³çï¼Generator æ¬è´¨ä¸æ¯ä¸ä¸ª<strong>éé¸äºçå½å¨æçæ å¸§</strong>ã</p>
<h4 id="222-ä»£ç å®ç°çª¥æ¢æèµ·çåæ ¸">2.2.2. ä»£ç å®ç°ï¼çª¥æ¢æèµ·çåæ ¸</h4>
<p>æä»¬å¯ä»¥éè¿ <code>inspect</code> æ¨¡åç´æ¥è§å¯è¿ä¸ªâåµå°¸âæ å¸§çåé¨ç¶æãè¿å¨ C++ ä¸­éè¦ GDB æè½åå°ï¼èå¨ Python ä¸­ï¼è¿æ¯è¯­è¨ç¹æ§çä¸é¨åã</p>
<pre><code class="language-python">import inspect

def stateful_execution():
    """
    ä¸ä¸ªç®åççæå¨ï¼æ¼ç¤ºæ å¸§çæèµ·ä¸æ¢å¤ã
    """
    x = 10          # å±é¨åéï¼å­å¨å¨ f_locals
    yield x         # ç¬¬ä¸æ¬¡æèµ·ï¼ä¿å­ IPï¼è¿å 10
    
    x += 5
    y = "System"
    yield x + 10    # ç¬¬äºæ¬¡æèµ·ï¼è¿å 25
    
    return "EOF"    # æåº StopIteration

# 1. åå»ºçæå¨å¯¹è±¡ï¼æ­¤æ¶å½æ°ä½åçä»£ç ä¸è¡é½è¿æ²¡æ§è¡
gen = stateful_execution()

# 2. ç¬¬ä¸æ¬¡æ¿æ´»
val1 = next(gen)
print(f"Yielded: {val1}")

# --- Hardcore Inspection ---
# è·åçæå¨å³èçæ å¸§å¯¹è±¡ (PyFrameObject)
frame = gen.gi_frame

print(f"\n[Frame Inspection]")
print(f"Instruction Pointer (f_lasti): {frame.f_lasti}") # å½åå­èç åç§»é
print(f"Local Variables (f_locals):  {frame.f_locals}") # {'x': 10}

# 3. æ¢å¤æ§è¡
# è§£éå¨è¯»å frame.f_lastiï¼æ¢å¤ CPU å¯å­å¨ç¶æï¼ç»§ç»­æ§è¡
val2 = next(gen)
print(f"\nYielded: {val2}")
print(f"Local Variables Updated:     {gen.gi_frame.f_locals}") # {'x': 15, 'y': 'System'}

</code></pre>
<h4 id="223-è¿åæä¹ä»è¿­ä»£å¨å°åç¨">2.2.3. è¿åæä¹ï¼ä»è¿­ä»£å¨å°åç¨</h4>
<p>è¿ç§æºå¶çæ·±è¿æä¹å¨äºï¼å®è®©<strong>å¼æ­¥ç¼ç¨</strong>æä¸ºå¯è½ã</p>
<p>å¦æ <code>yield</code> ä¸ä»è½äº§åºå¼ï¼è¿è½æ¥æ¶å¼ï¼éè¿ <code>gen.send()</code>ï¼ï¼é£ä¹è¿ä¸ªå½æ°å°±åæäºä¸ä¸ªå¯ä»¥éè¿æ¶æ¯ä¼ éè¿è¡åä½ç<strong>åç¨ (Coroutine)</strong>ã</p>
<ul>
<li><strong>Java Iterator:</strong> ä»ä»æ¯æ°æ®ççäº§èã</li>
<li><strong>Python Generator:</strong> æ¯ä¸ä¸ªæ¥æç¬ç«æ ç©ºé´ãå¯ä»¥æåãå¯ä»¥æ¢å¤ãå¯ä»¥äº¤äºç<strong>å¾®çº¿ç¨</strong>ã</li>
</ul>
<p>å¨ Python 3.5 ä¹åï¼<code>@asyncio.coroutine</code> æ­£æ¯å©ç¨ <code>yield from</code> å®ç°çãèå¨ Python 3.5 ä¹åï¼<code>async/await</code> åªæ¯å°è¿ç§åºäºçæå¨çåç§é»é­æ³åè£æäºåçè¯­æ³ï¼åºå±ç <code>PyFrameObject</code> è°åº¦é»è¾ä¾ç¶æ¯ä¸èç¸æ¿çã</p>
<p><strong>Trade-off åæï¼</strong></p>
<ul>
<li><strong>æ§è½æèï¼</strong> æ¯æ¬¡ <code>yield</code> åæ¢å¤ç¡®å®æ¯ç®åç C æééå¢è¦æ¢ï¼æ¶å Python å¯¹è±¡å­åï¼ã</li>
<li><strong>æ¶ææ¶çï¼</strong> ä½ ç¨åæ­¥çä»£ç é»è¾ï¼çº¿æ§ç <code>for</code>, <code>while</code>ï¼ï¼ååºäºæå¶å¤æçå¼æ­¥æµå¼å¤çé»è¾ãå¨å¤çæ°ä»¥äº¿è®¡ç AI Token æµæ¶ï¼è¿ç§åå­åå¥½ä¸é»è¾æ¸æ°çæ½è±¡ï¼æ¯æ ä»·çã</li>
</ul>
<h2 id="3-æ·éå±è¢«å¨çè°åº¦-the-reality-of-gil">3. æ·éå±ââè¢«å¨çè°åº¦ (The Reality of GIL)</h2>
<h3 id="31-åå­å®å¨çæè¡¡c-è§è§ä¸ç-ob_refcnt">3.1. åå­å®å¨çæè¡¡ï¼C++ è§è§ä¸ç <code>ob_refcnt</code></h3>
<p>å¨ C++ ä¸­ï¼æä»¬ä½¿ç¨ <code>std::shared_ptr</code> æ¥ç®¡çå¼ç¨è®¡æ°ãä¸ºäºä¿è¯çº¿ç¨å®å¨ï¼<code>std::shared_ptr</code> çå¼ç¨è®¡æ°æä½ï¼<code>incref</code>/<code>decref</code>ï¼åé¨å¿é¡»ä½¿ç¨åå­æä½ï¼Atomic Operationsï¼ï¼éå¸¸å¯¹åºæ±ç¼æä»¤ <code>LOCK XADD</code>ã</p>
<p><strong>Trade-off çæ ¸å¿ï¼</strong><br>
åå­æä½ä¸æ¯åè´¹çãå¨å¤æ ¸ CPU ä¸ï¼åå­æä½ä¼å¯¼è´ç¼å­ä¸è´æ§æµéï¼Cache Coherence Trafficï¼æ¿å¢ï¼è¿æ¯æ®éçåå­è¯»åè¦æ¢ä¸ä¸ªæ°éçº§ã</p>
<p>Python çè®¾è®¡èé¢ä¸´ä¸ä¸ªéæ©ï¼</p>
<ol>
<li><strong>ç»ç²åº¦éï¼Fine-grained Lockingï¼ï¼</strong> è®©æ¯ä¸ª <code>PyObject</code> èªå¸¦ä¸ä¸ª <code>std::mutex</code>ï¼æèä½¿ç¨åå­æä½æ´æ°å¼ç¨è®¡æ°ã</li>
</ol>
<ul>
<li><em>åæï¼</em> åçº¿ç¨æ§è½ä¸é 30%~50%ï¼åå²å®æµæ°æ®ï¼ãå ä¸ºå³ä½¿å¨åçº¿ç¨ä¸ï¼ä½ ä¹å¿é¡»æ¯ä»åå­æä½çæè´µå¼éã</li>
</ul>
<ol start="2">
<li><strong>å·¨éï¼Coarse-grained Lockingï¼ï¼</strong> å¼å¥ä¸æå¨å±çå¤§éï¼GILï¼ï¼ä¿æ¤æ´ä¸ªè§£éå¨ç¶æã</li>
</ol>
<ul>
<li><em>åæï¼</em> å¤æ ¸å¹¶åæä¸ºæ³¡å½±ï¼å¤çº¿ç¨æ²¦ä¸ºå¹¶åï¼Concurrencyï¼èéå¹¶è¡ï¼Parallelismï¼ã</li>
<li><em>æ¶çï¼</em> åçº¿ç¨æå¶é«æï¼æ éå¼éï¼ï¼C æ©å±ç¼åæå¶ç®åï¼é»è®¤ä¸éè¦èèçº¿ç¨å®å¨ï¼ã</li>
</ul>
<p>Python éæ©äºåèãGIL æ¬è´¨ä¸æ¯ä¸ä¸ª <strong>äºæ¥é (Mutex)</strong>ï¼å®ä¿æ¤çä¸æ¯ä½ çåéï¼èæ¯ <code>PyObject</code> ç»æä½ä¸­ç <code>ob_refcnt</code> å­æ®µä»¥åè§£éå¨çå¨å±ç¶æã</p>
<blockquote>
<p><strong>C++ ç¨åºåçé¡¿æï¼</strong><br>
GIL çå­å¨ï¼æ¯ä¸ºäºè®© CPython ç <code>malloc</code> å <code>free</code>ï¼å³ <code>Py_INCREF</code>/<code>Py_DECREF</code>ï¼å¨ä¸ä½¿ç¨åå­æä»¤çæåµä¸ï¼ä¾ç¶è½ä¿æåå­çä¸è´æ§ã</p>
</blockquote>
<h3 id="32-ç«ææ¡ä»¶ççç¸åå­æ§çå¹»è§">3.2. ç«ææ¡ä»¶ççç¸ï¼åå­æ§çå¹»è§</h3>
<p>å¾å¤åå­¦èè¯¯ä»¥ä¸ºï¼âæ¢ç¶æ GILï¼åä¸æ¶å»åªæä¸ä¸ªçº¿ç¨å¨è·ï¼é£æå°±ä¸éè¦éäºãâ<br>
è¿æ¯å¤§éç¹éçã</p>
<p><strong>GIL ä¿è¯çæ¯å­èç ï¼Bytecodeï¼æ§è¡çåå­æ§ï¼èä¸æ¯ä¸å¡é»è¾çåå­æ§ã</strong></p>
<p>æä½ç³»ç»ï¼æè Python è§£éå¨åé¨çè°åº¦å¨ï¼å¯ä»¥å¨<strong>ä»»æä¸¤ä¸ªå­èç ä¹é´</strong>è¿è¡ä¸ä¸æåæ¢ãå¦æä½ çä¸å¡é»è¾ç±å¤æ¡å­èç ç»æï¼é£ä¹å¨ä¸­é´è¢«åèµ°å°±æ¯å¿ç¶åççã</p>
<h4 id="321-ä»£ç å®ç°è§£å-n--1">3.2.1. ä»£ç å®ç°ï¼è§£å <code>n += 1</code></h4>
<p>å¨ C++ ä¸­ï¼<code>n++</code> éå¸¸ä¹ä¸æ¯åå­çï¼é¤éç¨ <code>std::atomic&lt;int&gt;</code>ï¼ï¼å®å¯¹åº <code>Read-Modify-Write</code> ä¸ä¸ªæ­¥éª¤ãPython ä¸­äº¦ç¶ï¼ä½æ´å å¤æã</p>
<p>è®©æä»¬ç¨ <code>dis</code> æ¨¡åæ¥çç <code>n += 1</code> å¨åºå±å°åºåçäºä»ä¹ã</p>
<pre><code class="language-python">import dis
import threading

n = 0

def race_condition():
    global n
    # è¿ä¸è¡çä¼¼ç®åçä»£ç ï¼å¨ VM ç¼éæ¯ 4 æ¡æä»¤
    n += 1

print(f"--- Bytecode Disassembly for 'n += 1' ---")
dis.dis(race_condition)

</code></pre>
<p><strong>è¾åºåæï¼æ±ç¼è§è§ï¼ï¼</strong></p>
<pre><code class="language-text">  7           0 LOAD_GLOBAL              0 (n)    &lt;-- Step 1: è¯»å n å°æ é¡¶
              2 LOAD_CONST               1 (1)    &lt;-- Step 2: åå¥å¸¸æ° 1
              4 INPLACE_ADD                       &lt;-- Step 3: æ§è¡å æ³
              6 STORE_GLOBAL             0 (n)    &lt;-- Step 4: åå n

</code></pre>
<p><strong>ç¾é¾åççç¬é´ï¼</strong></p>
<ol>
<li><strong>çº¿ç¨ A</strong> æ§è¡äº <code>LOAD_GLOBAL</code>ï¼æ¿å°äº <code>n=0</code>ï¼æ¾å¥èªå·±çæ å¸§ã</li>
<li><strong>GIL éæ¾ï¼</strong> (å¯è½æ¯æ¶é´çå°äºï¼Python 3.2+ é»è®¤ <code>sys.getswitchinterval()</code> ä¸º 5ms)ã</li>
<li><strong>çº¿ç¨ B</strong> è·å¾ GILï¼æ§è¡å®æ´ç <code>n += 1</code>ãæ­¤æ¶åå­ä¸­ç <code>n</code> åæäº 1ã</li>
<li><strong>GIL éæ°è¢«çº¿ç¨ A è·åã</strong></li>
<li><strong>çº¿ç¨ A</strong> ç»§ç»­æ§è¡ <code>INPLACE_ADD</code>ãæ³¨æï¼å®æ éç <code>n</code> ä¾ç¶æ¯ 0ï¼å ä¸ºå®æ¯ä»èªå·±çæ å¸§ä¸­è¯»åæä½æ°ï¼èä¸æ¯éæ°å»åå­è¯»ï¼ã</li>
<li><strong>çº¿ç¨ A</strong> è®¡ç® <code>0 + 1 = 1</code>ã</li>
<li><strong>çº¿ç¨ A</strong> æ§è¡ <code>STORE_GLOBAL</code>ï¼æ <code>1</code> åå¥åå­ï¼è¦çäºçº¿ç¨ B çç»æã</li>
</ol>
<p><strong>ç»æï¼</strong> ä¸¤ä¸ªçº¿ç¨åå äºä¸æ¬¡ï¼ç»æåºè¯¥æ¯ 2ï¼ä½å®éæ¯ 1ãè¿å°±æ¯å¸åç <strong>Lost Update</strong> é®é¢ã</p>
<h4 id="322-å¤æ ¸æ¶ä»£çæ¤èªæåº-the-convoy-effect">3.2.2. å¤æ ¸æ¶ä»£çâæ¤èªæåºâ (The Convoy Effect)</h4>
<p>å¨åæ ¸æ¶ä»£ï¼GIL åªæ¯ç®åçåæ¶å¤ç¨ãä½å¨å¤æ ¸ CPU ä¸ï¼æåµä¼åå¾æ´ç³ã</p>
<p>å½ææ GIL ççº¿ç¨ A éæ¾éï¼ä¾å¦å ä¸º I/O æå¼ºå¶åæ¢ï¼æ¶ï¼OS å¯è½ä¼åæ¶å¤éçº¿ç¨ BãC å Dãå®ä»¬ä¼å¨ä¸åç CPU æ ¸å¿ä¸éæ¥ï¼ç¯çäºæ¢è¿æå¯ä¸çéãç»æåªæ B æ¢å°äºï¼C å D äºæ¢å¤±è´¥ï¼åæ¬¡è¢« OS æèµ·ã</p>
<p>è¿ç§ <strong>âå¤é-äºæ¢-å¤±è´¥-æèµ·â</strong> çå¾ªç¯ä¼å¯¼è´ä¸¥éç CPU æå¨ (Thrashing)ãè¿ä¹æ¯ä¸ºä»ä¹å¨è®¡ç®å¯éåä»»å¡ä¸­ï¼Python å¤çº¿ç¨å¾å¾æ¯åçº¿ç¨è¿è¦æ¢ââæä»¬ä¸ä»æ²¡æå©ç¨å¤æ ¸ï¼åèæµªè´¹äºå¤§éç CPU å¨æå¨ OS çè°åº¦å¼éä¸ã</p>
<h4 id="323-ä¸ºä»ä¹å¿é¡»ä½¿ç¨-threadinglock">3.2.3. ä¸ºä»ä¹å¿é¡»ä½¿ç¨ <code>threading.Lock</code>ï¼</h4>
<p>å¨ Python ä¸­ä½¿ç¨ <code>threading.Lock</code>ï¼å®éä¸æ¯å¨åºç¨å±å¼å¥äºç¬¬äºæéã</p>
<pre><code class="language-python">lock = threading.Lock()

def safe_increment():
    global n
    # ç³è¯·éï¼å¦ææ¿ä¸å°ï¼çº¿ç¨è¿å¥é»å¡ç¶æï¼GIL èªå¨éæ¾ç»å«äºº
    with lock:
        # ä¸´çåº (Critical Section)
        # å³ä½¿ GIL å¨è¿ééæ¾ï¼å¶ä»çº¿ç¨ä¹æ æ³è¿å¥è¿ä¸ªä»£ç å
        # å ä¸ºå®ä»¬æ¿ä¸å°åºç¨å±ç lock
        n += 1

</code></pre>
<p><strong>åºå±é»è¾ï¼</strong></p>
<ul>
<li><strong>GIL</strong> ä¿æ¤çæ¯ <code>ob_refcnt</code> ä¸ä¹±å¥ï¼é²æ­¢è§£éå¨å´©æºï¼ã</li>
<li><strong>threading.Lock</strong> ä¿æ¤çæ¯ <code>n</code> çå¼ç¬¦åé¢æï¼é²æ­¢ä¸å¡é»è¾éè¯¯ï¼ã</li>
</ul>
<h3 id="33-io-éæ¾ä¸-cpu-å¯éåçæ­»å±">3.3. I/O éæ¾ä¸ CPU å¯éåçæ­»å±</h3>
<p>æä»¬å¸¸è¯´âPython å¤çº¿ç¨éå I/O å¯éåâï¼å¶åºå±æºçå¨äºï¼</p>
<p>å½ Python æ§è¡ç³»ç»è°ç¨ï¼å¦ <code>read()</code>, <code>write()</code>, <code>recv()</code>, <code>sleep()</code>ï¼æ¶ï¼C ä»£ç ä¼å¨è°ç¨é»å¡ç C å½æ°ä¹åï¼<strong>ä¸»å¨éæ¾ GIL</strong>ï¼è°ç¨ <code>Py_BEGIN_ALLOW_THREADS</code> å®ï¼ã</p>
<pre><code class="language-c">/* CPython æºç ä¼ªä»£ç  (socket module) */
static PyObject *
sock_recv(PySocketSockObject *s, PyObject *args)
{
    // ... è§£æåæ° ...
    
    // éæ¾ GILï¼åè®¸å¶ä» Python çº¿ç¨è¿è¡
    Py_BEGIN_ALLOW_THREADS
    
    // é»å¡çç³»ç»è°ç¨ï¼æ­¤æ¶ CPU ä¸å¨ Python æé
    count = recv(s-&gt;sock_fd, buffer, len, flags);
    
    // éæ°è·å GILï¼åå¤è¿å Python å¯¹è±¡
    Py_END_ALLOW_THREADS
    
    // ... åè£ç»æ ...
    return result;
}

</code></pre>
<p>è¿æå³çï¼å½ä¸ä¸ªçº¿ç¨å¨ç­ç½ç»åæ¶ï¼å¦ä¸ä¸ªçº¿ç¨å¯ä»¥æ¿å° GIL å»è· Python ä»£ç ãè¿å°±æ¯ä¸ºä»ä¹å¨ç¬è«ãWeb æå¡ä¸­ï¼Python çå¤çº¿ç¨ä¾ç¶ææã</p>
<p>ä½å¦ææ¯ <strong>CPU å¯éå</strong>ï¼å¦å¾åå¤çãç©éµè®¡ç®ï¼ï¼çº¿ç¨ä¸ä¼ä¸»å¨éæ¾ GILï¼åªè½ç­å¾è§£éå¨å¼ºå¶åæ¢ï¼Check Intervalï¼ãè¿ä¸ä»æ æ³å©ç¨å¤æ ¸ï¼åèå ä¸ºé¢ç¹çéäºæ¢ï¼Lock Contentionï¼åä¸ä¸æåæ¢ï¼å¯¼è´å¤çº¿ç¨æ¯åçº¿ç¨è¿è¦æ¢ï¼</p>
<h2 id="4-è¿åå±ä¸»å¨çåä½-cooperative-concurrency">4. è¿åå±ââä¸»å¨çåä½ (Cooperative Concurrency)</h2>
<h3 id="41-ä»çæå¨å°åç¨æ æ çèå©ä¸ä»£ä»·">4.1. ä»çæå¨å°åç¨ï¼æ æ çèå©ä¸ä»£ä»·</h3>
<p>å¨ C++20 å¼å¥ Coroutines ä¹åï¼æä»¬ä¹ æ¯ç¨ç¶ææºæååè°ãPython çåç¨æ¬è´¨ä¸å°±æ¯<strong>ç¼è¯å¨èªå¨çæçæéç¶ææº</strong>ã</p>
<h4 id="411-æ ¸å¿å¯¹å³python-stackless-vs-go-stackful">4.1.1. æ ¸å¿å¯¹å³ï¼Python (Stackless) vs. Go (Stackful)</h4>
<ul>
<li>
<p><strong>Go (Goroutine):</strong><br>
Go è¿è¡æ¶ä¸ºæ¯ä¸ª Goroutine åéä¸ä¸ª<strong>çå®çãå¯å¢é¿çæ </strong>ï¼åå§çº¦ 2KBï¼ãå½ Goroutine é»å¡æ¶ï¼Go çè°åº¦å¨ä¿å­å½åçå¯å­å¨ç¶æï¼SP, PC ç­ï¼å°è¯¥æ ä¸­ï¼ç¶ååæ¢å°å¦ä¸ä¸ª Goroutineãè¿å ä¹ç­åäºç¨æ·æçº¿ç¨ã</p>
</li>
<li>
<p><em>ä¼ç¹ï¼</em> æ­¤æ¶ï¼ä»£ç æ¯åæ­¥åçï¼åºå±æ¯å¼æ­¥è·çãä½ ä¸éè¦ <code>await</code>ï¼å ä¸ºè°åº¦å¨æ¯éå¼çã</p>
</li>
<li>
<p><em>ç¼ºç¹ï¼</em> æ¯ä¸ª Goroutine é½æåå­å¼éï¼è½å°ä½æï¼ï¼ä¸éè¦å¤æçè¿è¡æ¶è°åº¦å¨ã</p>
</li>
<li>
<p><strong>Python (Coroutine):</strong><br>
Python çåç¨è¢«ç§°ä¸º <strong>æ æ åç¨ (Stackless)</strong>ãä½è¿å¹¶ä¸æå³çå®æ²¡ææ ï¼èæ¯æå® <strong>ä¸ä¿ç C è¯­è¨å±é¢çç³»ç»è°ç¨æ </strong>ã<br>
å½ä½  <code>await</code> æ¶ï¼Python ä»ä»æ¯å°å½åçèææºæ å¸§ (<code>PyFrameObject</code>ï¼ä¸ä¸ªåéå¨å ä¸çå¯¹è±¡) æèµ·ï¼å¹¶å° C æ åéï¼Unwindï¼å° Event Loopãç¸æ¯ä¹ä¸ï¼Go ç Goroutine æ¯ <strong>ææ ç (Stackful)</strong>ï¼å®æ¥æç¬ç«çãå¯å¨ææ©å®¹çè¿ç»­åå­ç©ºé´ï¼åå§çº¦ 2KBï¼ï¼è½ä¿å­å®æ´çè°ç¨é¾è·¯ç¶æã</p>
</li>
</ul>
<h4 id="412-å¼æ­¥çä¼ ææ§-function-coloring">4.1.2. å¼æ­¥çâä¼ ææ§â (Function Coloring)</h4>
<p>è¿å°±æ¯ä¸ºä»ä¹ Python çå¼æ­¥å·æ<strong>ä¼ ææ§</strong>ï¼<br>
å¦æå½æ° A è°ç¨äºå¼æ­¥å½æ° B (<code>await B()</code>)ï¼é£ä¹ A èªèº«å¿é¡»åæå¼æ­¥å½æ° (<code>async def A()</code>)ã</p>
<p><strong>åºå±é»è¾ï¼</strong><br>
å ä¸º Python æ²¡æç¬ç«çåç¨æ ï¼å®æ æ³å¨æ®éå½æ°ç C æ å¸§ä¸­é´æåãåªæè¢«æ è®°ä¸º <code>async</code> çå½æ°ï¼å³çæå¨ï¼ï¼æå·å¤âæå-æ¢å¤âçå­èç æä»¤ (<code>YIELD_FROM</code> / <code>SEND</code>)ã</p>
<p>è¿æ¯ä¸ä¸ªå·¨å¤§ç Trade-offï¼</p>
<ul>
<li><strong>çºç²ï¼</strong> å¼åä½éªçå²è£ï¼åæ­¥ä»£ç æ æ³ç´æ¥å¤ç¨å¼æ­¥åºï¼ã</li>
<li><strong>æ¢åï¼</strong> æè´çè½»éçº§ãåå»ºä¸ä¸ª Python åç¨å ä¹åªæ¶èä¸ä¸ª Python å¯¹è±¡çåå­ï¼ä¸åæ¢å¼éä»ä¸ºä¸æ¬¡å½æ°è°ç¨ï¼å®å¨ä¸æ¶åå¯å­å¨ä¿å­æå¤æçæ æ·è´ã</li>
</ul>
<h3 id="42-event-loop-çåæ ¸reactor-æ¨¡å¼ç-python-å®ç°">4.2. Event Loop çåæ ¸ï¼Reactor æ¨¡å¼ç Python å®ç°</h3>
<p>å¥å» <code>asyncio</code> åä¸½çå°è£ï¼å¶æ ¸å¿åªæ¯ä¸ä¸ªæ­»å¾ªç¯ï¼ä¸æ­æ¥è¯¢æä½ç³»ç»åæ ¸ï¼âåªäºæä»¶æè¿°ç¬¦ (fd) åå¤å¥½äºï¼â</p>
<p>è¿æ­£æ¯ç»å¸ç <strong>Reactor æ¨¡å¼</strong>ã</p>
<p>å¨ Linux ä¸ï¼è¿å¯¹åº <code>epoll_wait</code>ï¼å¨ macOS/BSD ä¸ï¼æ¯ <code>kevent</code>ï¼å¨ Windows ä¸ï¼æ¯ <code>IOCP</code>ã</p>
<h4 id="421-ä»£ç å®ç°æåä¸ä¸ª-mini-asyncio">4.2.1. ä»£ç å®ç°ï¼æåä¸ä¸ª mini-asyncio</h4>
<p>ä¸ºäºè¯æ <code>asyncio</code> æ²¡æä»»ä½é»é­æ³ï¼æä»¬å°ç»è¿ <code>asyncio</code> åºï¼ç´æ¥ä½¿ç¨ <code>selectors</code> æ¨¡åï¼å¯¹ <code>epoll</code>/<code>kqueue</code> çä½çº§å°è£ï¼æ¥å®ç°ä¸ä¸ªå¼æ­¥è¿è¡æ¶ã</p>
<p><strong>C++ å¼åèè¯·æ³¨æï¼</strong> ä¸é¢çä»£ç å±ç¤ºäºå¦ä½å°âåè°å°ç±âéè¿çæå¨åå¹³æâåæ­¥å¤è§âã</p>
<pre><code class="language-python">import selectors
import socket
import time
from collections import deque

# 1. å¨å±äºä»¶å¾ªç¯ (The Reactor)
selector = selectors.DefaultSelector()
task_queue = deque() # å°±ç»ªä»»å¡éå

class Future:
    """
    å¯¹åº C++ std::future æ JavaScript Promiseã
    å®æ¯å¼æ­¥æä½ç»æçå ä½ç¬¦ã
    """
    def __init__(self):
        self.result = None
        self._callbacks = []

    def set_result(self, value):
        self.result = value
        for cb in self._callbacks:
            cb(self)

    def __await__(self):
        # é­æ³æå¨ï¼yield self åè¯ Task "æè¿æ²¡å¥½ï¼è¯·æèµ·"
        yield self 
        return self.result

def async_socket_read(sock):
    """
    ä¸ä¸ªæ¨¡æçä½çº§å¼æ­¥ socket è¯»åã
    """
    f = Future()

    def on_readable():
        f.set_result(sock.recv(4096))
        # è¯»åå®æ¯ï¼ä» epoll ä¸­æ³¨é
        selector.unregister(sock)

    # æ³¨åå° epoll/kqueueï¼å½ sock å¯è¯»æ¶ï¼è°ç¨ on_readable
    # C++ å¯¹åº: epoll_ctl(epfd, EPOLL_CTL_ADD, fd, &amp;event)
    selector.register(sock, selectors.EVENT_READ, on_readable)
    
    # ç«å³è¿å Futureï¼ä¸é»å¡
    return f

class Task:
    """
    é©±å¨åç¨æ§è¡çå®¹å¨ã
    ç±»ä¼¼äº asyncio.Taskã
    """
    def __init__(self, coro):
        self.coro = coro
        self.step() # å¯å¨åç¨

    def step(self, future=None):
        try:
            # æ¢å¤åç¨æ§è¡ï¼send(result)
            if future is None:
                next_future = self.coro.send(None)
            else:
                next_future = self.coro.send(future.result)
            
            # åç¨éå°äº awaitï¼è¿åäºä¸ä¸ª Future
            # æä»¬ç»è¿ä¸ª Future å ä¸ªåè°ï¼ä¸æ¦å®å®æäºï¼å°±ç»§ç»­ step()
            next_future._callbacks.append(self.step)
            
        except StopIteration:
            # åç¨æ§è¡å®æ¯
            pass

# --- ä¸å¡é»è¾ (User Code) ---
# æ³¨æï¼async def æ¬è´¨ä¸æ¯çæå¨å·¥å
async def fetch_url(url):
    # æ¨¡æå»ºç« socket
    sock = socket.socket()
    sock.setblocking(False)
    try:
        sock.connect(('example.com', 80))
    except BlockingIOError:
        pass # æ­£å¸¸ç°è±¡
    
    # åé HTTP è¯·æ±
    req = f"GET / HTTP/1.0\r\nHost: example.com\r\n\r\n".encode()
    # ç®åçï¼è¿éå¶å®ä¹åºè¯¥ await write
    sock.send(req) 

    print(f"[{url}] Waiting for data...")
    
    # å³é®ç¹ï¼await æèµ·å½åæ å¸§ï¼äº¤åºæ§å¶æ
    # æ­¤æ¶ï¼Event Loop å¯ä»¥å»å¤çå¶ä» Task
    data = await async_socket_read(sock)
    
    print(f"[{url}] Received {len(data)} bytes")

# --- é©±å¨å± (Event Loop Driver) ---
def run_loop():
    # åå»ºä¸¤ä¸ªå¹¶åä»»å¡
    Task(fetch_url("Task-A"))
    Task(fetch_url("Task-B"))

    print("--- Event Loop Started ---")
    while True:
        # 1. é»å¡ç­å¾ IO äºä»¶ (epoll_wait)
        # å¦ææ²¡æ IO å°±ç»ªï¼CPU ä½¿ç¨çä¸º 0
        events = selector.select()
        
        # 2. å¤çäºä»¶ (Callback Dispatch)
        for key, mask in events:
            callback = key.data
            callback()
        
        # ç®åçéåºæ¡ä»¶
        if not selector.get_map():
            break
    print("--- Event Loop Finished ---")

if __name__ == "__main__":
    run_loop()

</code></pre>
<h4 id="422-æ·±åº¦è§£ææ§å¶æµçç¿»è½¬">4.2.2. æ·±åº¦è§£æï¼æ§å¶æµçç¿»è½¬</h4>
<ol>
<li><strong>Callback (C é£æ ¼):</strong> ææçé»è¾è¢«ææ£å¨ <code>on_readable</code>, <code>on_writable</code> ç­åè°å½æ°ä¸­ï¼ç¶æç»´æ¤æå¶çè¦ï¼å¿é¡»æ¾å¼ä¼ é context æéï¼ã</li>
<li><strong>Coroutine (Python é£æ ¼):</strong></li>
</ol>
<ul>
<li><code>await</code> å³é®å­å° <code>async_socket_read</code> ç <code>Future</code> æç» Event Loopã</li>
<li>Event Loop å° <code>Task.step</code> æ³¨åä¸ºåè°ã</li>
<li>å½ <code>epoll</code> å¤éæ¶ï¼éè¿åè°è§¦å <code>Task.step</code>ã</li>
<li><code>Task.step</code> è°ç¨ <code>coro.send()</code>ï¼<strong>æ¢å¤</strong> ä¹åæèµ·ç <code>fetch_url</code> æ å¸§ã</li>
</ul>
<p><strong>å¯¹ C++ ç¨åºåçå¯ç¤ºï¼</strong><br>
Python ç <code>asyncio</code> å®éä¸æ¯å¨åçº¿ç¨åå®ç°äºä¸ä¸ª<strong>éæ¢å å¼æä½ç³»ç»</strong>ã<code>Task</code> æ¯è¿ç¨ï¼<code>Future</code> æ¯ç³»ç»è°ç¨ï¼è <code>Event Loop</code> å°±æ¯åæ ¸è°åº¦å¨ã</p>
<h2 id="5-ç ´å±å±æç ´è¾¹ç-extending-with-c">5. ç ´å±å±ââæç ´è¾¹ç (Extending with C++)</h2>
<p>å¨åå ç« ä¸­ï¼æä»¬ææçä¼åé½å¨ Python èææºçå´å¢ä¹åï¼æ è®ºæ¯ <code>asyncio</code> çç¨æ·æè°åº¦ï¼è¿æ¯ <code>multiprocessing</code> çè¿ç¨é´éä¿¡ï¼æ¬è´¨ä¸é½æ¯å¨è§é¿ GILã</p>
<p>ä½å¨è¿ä¸ç« ï¼æä»¬è¦æ­£é¢<strong>å»ç©¿</strong>è¿å µå¢ãæä»¬å°ç¼å C++ æ©å±ï¼ä¸»å¨éæ¾ GILï¼è®© Python çº¿ç¨éåä¸ºåçº¯ç C++ çº¿ç¨ï¼ä»èåæ¦¨åº CPU çæ¯ä¸ä¸ªæ¶éå¨æã</p>
<p>å½ä½ ç Profilerï¼æ§è½åæå¨ï¼æ¾ç¤ºç¶é¢ä¸åæ¯ IO ç­å¾ï¼èæ¯ CPU ç <code>ALU</code>ï¼ç®æ¯é»è¾ååï¼æ»¡è½½æ¶ï¼ä»»ä½ Python å±é¢çä¼åï¼åæ¬ PyPyï¼é½æ¯éé´æçãæ­¤æ¶ï¼å¯ä¸çåºè·¯æ¯å°è®¡ç®å¯éååæ ¸ä¸æ²å° C++ã</p>
<h3 id="51-éæ¾-gil-çèºæ¯ä»ææèå°æè§è">5.1. éæ¾ GIL çèºæ¯ï¼ä»ææèå°æè§è</h3>
<p>æä»¬å¨ç¬¬ä¸ç« æå°ï¼Python è§£éå¨æ¯ä¸ä¸ªå·¨å¤§çç¶ææºï¼GIL ä¿æ¤çè¿ä¸ªç¶ææºçä¸è´æ§ãä½æ¯ï¼<strong>å¦æä½ çä»£ç ä¸æ¶åä»»ä½ Python å¯¹è±¡ï¼PyObjectï¼çæä½ï¼ä½ å°±ä¸éè¦ GILã</strong></p>
<p>æ¯å¦ï¼ç©éµä¹æ³ãå¾åç¼è§£ç ãå¤æçæ°å¼ç§¯åãè¿äºæä½åªéè¦åå§çåå­æéï¼<code>double*</code>, <code>uint8_t*</code>ï¼ã</p>
<h4 id="511-åè®®py_begin_allow_threads">5.1.1. åè®®ï¼<code>Py_BEGIN_ALLOW_THREADS</code></h4>
<p>å¨ C-API å±é¢ï¼Python æä¾äºä¸¤ä¸ªå®æ¥æå¨æ§å¶ GILï¼</p>
<ol>
<li><strong><code>Py_BEGIN_ALLOW_THREADS</code></strong>:</li>
</ol>
<ul>
<li>ä¿å­å½åçº¿ç¨çä¸ä¸æï¼Thread Stateï¼ã</li>
<li><strong>éæ¾äºæ¥é (Release Mutex)</strong>ã</li>
<li>æ­¤æ¶ï¼å¶ä» Python çº¿ç¨å¯ä»¥æ¢å  GIL å¹¶æ§è¡å­èç ã</li>
<li><strong>è­¦åï¼</strong> å¨æ­¤å®ä¹åï¼ä¸¥ç¦è®¿é®ä»»ä½ <code>PyObject</code>ï¼å¦åä¼å¯¼è´ç«å³ç Segfault ææ´éè½çå æåã</li>
</ul>
<ol start="2">
<li><strong><code>Py_END_ALLOW_THREADS</code></strong>:</li>
</ol>
<ul>
<li><strong>é»å¡ç­å¾</strong>ï¼ç´å°éæ°è·å¾äºæ¥éã</li>
<li>æ¢å¤çº¿ç¨ä¸ä¸æã</li>
<li>ç»§ç»­å¤ç Python å¯¹è±¡ï¼å¦å° C++ ç»æåè£æ <code>PyFloat</code>ï¼ã</li>
</ul>
<p>è¿å°±åæ¯å½ä½ ï¼C++ ä»£ç ï¼éè¦å»è¿è¡ä¸åºæ¼«é¿çé­å³ä¿®ç¼ï¼ç¹éè®¡ç®ï¼æ¶ï¼ä½ ä¸»å¨äº¤åºäºä»¤çï¼GILï¼ï¼åè¯è§£éå¨ï¼âä½ ä»¬åç©ï¼æç®å®äºååæ¥æéãâ</p>
<h3 id="52-å®æ-pybind11raii-é£æ ¼çééæ¾">5.2. å®æ Pybind11ï¼RAII é£æ ¼çééæ¾</h3>
<p>ç´æ¥å C-API æå¶ç¹çä¸å®¹æåºéï¼å¼ç¨è®¡æ°å°ç±ï¼ãç°ä»£ C++ å¼åèåºé¦é <code>pybind11</code>ãå®å©ç¨ C++ ç RAII æºå¶ï¼å° GIL çéæ¾å°è£å¾ä¼éä¸å®å¨ã</p>
<h4 id="521-åºæ¯å¤çº¿ç¨èç¹å¡æ´æ¨¡æ-cpu-bound">5.2.1. åºæ¯ï¼å¤çº¿ç¨èç¹å¡æ´æ¨¡æ (CPU Bound)</h4>
<p>åè®¾æä»¬éè¦è®¡ç®  çè¿ä¼¼å¼ï¼è¿æ¯ä¸ä¸ªçº¯è®¡ç®ä»»å¡ã</p>
<p><strong>C++ Extension (<code>cpu_bound.cpp</code>):</strong></p>
<pre><code class="language-cpp">#include &lt;pybind11/pybind11.h&gt;
#include &lt;random&gt;
#include &lt;thread&gt;
#include &lt;vector&gt;

namespace py = pybind11;

// çº¯ C++ é»è¾ï¼ä¸ä¾èµä»»ä½ Python å¤´æä»¶
double monte_carlo_pi(size_t samples) {
    std::random_device rd;
    std::mt19937 gen(rd());
    std::uniform_real_distribution&lt;&gt; dis(0.0, 1.0);

    size_t inside_circle = 0;
    for (size_t i = 0; i &lt; samples; ++i) {
        double x = dis(gen);
        double y = dis(gen);
        if (x * x + y * y &lt;= 1.0) {
            inside_circle++;
        }
    }
    return 4.0 * inside_circle / samples;
}

// åè£å±
double heavy_computation(size_t samples) {
    // 1. è¿å¥ C++ ä¸çï¼ææ GIL
    
    // 2. éæ¾ GIL (RAII)
    // æé å½æ°è°ç¨ PyEval_SaveThread()ï¼ææå½æ°è°ç¨ PyEval_RestoreThread()
    // å¨è¿ä¸ªä½ç¨ååï¼Python è§£éå¨å¯ä»¥å¹¶åè¿è¡å¶ä» Python çº¿ç¨ï¼
    py::gil_scoped_release release; 

    // 3. æ§è¡ç¹éç CPU è®¡ç®
    // æ­¤æ¶ OS å¯ä»¥å¨å¤æ ¸ä¸å¹¶è¡è°åº¦è¿ä¸ªçº¿ç¨
    double result = monte_carlo_pi(samples);

    // 4. ç¦»å¼ä½ç¨åï¼èªå¨éæ°è·å GIL
    return result; 
}

PYBIND11_MODULE(fast_calc, m) {
    m.def("compute_pi", &amp;heavy_computation, "Calculate Pi without GIL");
}

</code></pre>
<h4 id="522-python-ä¾§ççæ­£å¹¶è¡">5.2.2. Python ä¾§ççæ­£å¹¶è¡</h4>
<p>ç°å¨ï¼æä»¬åå° Pythonãæäº <code>py::gil_scoped_release</code>ï¼Python ç <code>threading</code> æ¨¡åå°ä¸åæ¯âä¼ªå¤çº¿ç¨âã</p>
<pre><code class="language-python">import threading
import time
import fast_calc # æä»¬ç¼è¯å¥½ç C++ æ©å±

SAMPLES = 10_000_000
THREAD_COUNT = 4

def worker():
    # å½è¿å¥ fast_calc.compute_pi åé¨æ¶ï¼
    # GIL è¢«éæ¾ï¼è¯¥çº¿ç¨åæäºä¸ä¸ªçº¯ç²¹ç OS çº¿ç¨ (Native Thread)
    # å®å¯ä»¥è·æ»¡ä¸ä¸ªç©ç CPU æ ¸å¿
    pi = fast_calc.compute_pi(SAMPLES)

def run_benchmark():
    start = time.perf_counter()
    threads = []
    
    # å¯å¨ 4 ä¸ªçº¿ç¨
    for _ in range(THREAD_COUNT):
        t = threading.Thread(target=worker)
        t.start()
        threads.append(t)
        
    for t in threads:
        t.join()
        
    end = time.perf_counter()
    print(f"Total time: {end - start:.4f}s")

# ç»æé¢æµï¼
# å¦æä¸éæ¾ GILï¼èæ¶çº¦ç­äº sum(T_i)ï¼å ä¸ºæ¯ä¸²è¡æ§è¡ã
# éæ¾ GIL åï¼  èæ¶çº¦ç­äº max(T_i)ï¼å®ç°çæ­£ç 4 åå é (Amdahl's Law åè®¸èå´å)ã

</code></pre>
<h3 id="53-æ°æ®ä¼ è¾çéå½¢ç¨buffer-protocol-ä¸åå­å¸å±">5.3. æ°æ®ä¼ è¾çéå½¢ç¨ï¼Buffer Protocol ä¸åå­å¸å±</h3>
<p>éæ¾ GIL è§£å³äº<strong>è®¡ç®</strong>çç¶é¢ï¼ä½å¦æä½ çæ°æ®è¿å¨ Python å ä¸ï¼æ¯å¦ä¸å¼  4K å¾çï¼ï¼å¦ä½ä¼ ç» C++ï¼</p>
<p>å¦æä½ ç®åå°å®ä¹å½æ°ä¸º <code>void foo(std::vector&lt;double&gt; v)</code>ï¼<code>pybind11</code> ä¼å°½èå°½è´£å°éå Python åè¡¨ï¼è§£åæ¯ä¸ª <code>PyFloatObject</code>ï¼å¹¶åç<strong>æ·±æ·è´</strong>å°æ°æ®å¤å¶å° C++ çå ä¸ãè¿ä¸ä»æ¶åå·¨å¤§ç <code>malloc</code> å¼éï¼è¿ç ´åäº CPU ç¼å­å±é¨æ§ã</p>
<p><strong>è§£å³æ¹æ¡ï¼ç¼å²åè®® (Buffer Protocol)</strong></p>
<p>Python ç <code>memoryview</code>ãNumPy ç <code>ndarray</code> é½å®ç°äº Buffer Protocolãå®åè®¸ C++ ç´æ¥è®¿é® Python å¯¹è±¡çåºå±åå­åï¼Raw Bufferï¼ï¼å®ç° <strong>Zero-Copy</strong>ã</p>
<p>ç¶èï¼è¿ééèçä¸ä¸ªå·¨å¤§çé·é±ï¼<strong>åå­è¿ç»­æ§ (Contiguity)</strong>ã</p>
<p>Python çåçæä½ï¼å¦ <code>img[:, ::2]</code>ï¼æ¯<strong>é¶æ·è´</strong>çï¼å®ä»ä»æ¯ä¿®æ¹äºåæ°æ®ä¸­ç <strong>Strides (æ­¥é¿)</strong>ï¼èä¸ä¼éæ°æååå­ãå¦æä½ ç´æ¥æè¿ä¸ªåççæéæ¿æ¥å½æè¿ç»­æ°ç»éåï¼ä½ ä¼è¯»å°éè¯¯çæ°æ®ï¼çè³å¼å Segmentation Faultã</p>
<p>å æ­¤ï¼ä¸¥è°¨ç C++ æ©å±å¿é¡»æ£æ¥åå­å¸å±ã</p>
<h4 id="531-ä»£ç å®ç°å®å¨çé«æ§è½å¾ååè²">5.3.1. ä»£ç å®ç°ï¼å®å¨çé«æ§è½å¾ååè²</h4>
<pre><code class="language-cpp">#include &lt;pybind11/pybind11.h&gt;
#include &lt;pybind11/numpy.h&gt;
#include &lt;stdexcept&gt;

namespace py = pybind11;

// C++ æ¥æ¶ NumPy æ°ç»ï¼é¶æ·è´ (Zero-Copy)
// æ³¨æï¼py::array_t&lt;uint8_t&gt; åªæ¯ä¸ä¸ªåè£å¨ï¼å¹¶ä¸æ¥ææ°æ®çæææ
void process_image(py::array_t&lt;uint8_t&gt; input_array) {
    // 1. è¯·æ±ç¼å²åºä¿¡æ¯ (Buffer Info)
    // è¿ä¼æ¥è¯¢å¯¹è±¡ç __buffer__ æ¥å£
    py::buffer_info buf = input_array.request();

    // 2. ç»´åº¦æ£æ¥
    if (buf.ndim != 2) {
        throw std::runtime_error("Number of dimensions must be 2");
    }

    // 3. [å³é®ç³»ç»çº§æ£æ¥] åå­å¸å±éªè¯
    // Python çåçå¯è½äº§çä¸è¿ç»­åå­ (Non-contiguous Memory)ã
    // åªæå½ Row Stride == Width * ElementSize ä¸ Col Stride == ElementSize æ¶ï¼
    // æä»¬æè½å°å¶è§ä¸ºä¸ç»´çº¿æ§æ°ç»å¤çã
    auto expected_stride_row = buf.shape[1] * sizeof(uint8_t);
    auto expected_stride_col = sizeof(uint8_t);

    if (buf.strides[0] != expected_stride_row || buf.strides[1] != expected_stride_col) {
        // éå°è¿ç§æåµï¼éå¸¸æä¸¤ç§éæ©ï¼
        // A. æåºå¼å¸¸ï¼å¼ºè¿«ç¨æ·å¨ Python ç«¯åè°ç¨ .copy() æ np.ascontiguousarray()
        // B. å¨ C++ ç«¯æå¨å¤ç stridesï¼æ§è½ç¥ä½ï¼ä½å¼å®¹æ§å¥½ï¼
        // è¿éä¸ºäºæ¼ç¤ºæè´æ§è½ï¼æä»¬éæ© Aï¼æç»å¤çéè¿ç»­åå­
        throw std::runtime_error("Input array must be C-style contiguous (no slices allowed)");
    }

    // 4. è·åè£¸æé (Raw Pointer)
    // æ­¤æ¶æä»¬å¯ä»¥å®å¨å°åæä½ C æ°ç»ä¸æ ·æä½å®
    uint8_t* ptr = static_cast&lt;uint8_t*&gt;(buf.ptr);
    size_t rows = buf.shape[0];
    size_t cols = buf.shape[1];
    size_t total_elements = rows * cols;

    // 5. éæ¾ GIL å¹¶å¨éè®¡ç®
    // è¿æ¯ä¸ä¸ªçº¯ç²¹çåå­è¯»åæä½ï¼ä¸æ¶åä»»ä½ Python API
    {
        py::gil_scoped_release release;
        
        // ç¼è¯å¨ç°å¨çèªå¨åéå (Auto-Vectorization) å¯ä»¥è½»æä¼åè¿ä¸ªå¾ªç¯
        // çæ SIMD æä»¤ (å¦ AVX2)
        for (size_t i = 0; i &lt; total_elements; ++i) {
            ptr[i] = 255 - ptr[i]; // åè²æä½
        }
    }
    // ä½ç¨åç»æï¼èªå¨éæ°è·å GIL
}

PYBIND11_MODULE(fast_img, m) {
    m.def("process_image", &amp;process_image, "Invert image colors (Zero-Copy, release GIL)");
}

</code></pre>
<p><strong>Python ä¾§è°ç¨ç¤ºä¾ï¼</strong></p>
<pre><code class="language-python">import numpy as np
import fast_img

# åå»ºä¸ä¸ª 4K å¾å (3840x2160)
img = np.random.randint(0, 256, (2160, 3840), dtype=np.uint8)

# Case 1: æ­£å¸¸è°ç¨ (åå­è¿ç»­)
# èæ¶ï¼C++ ä¹å°±æ¯æ¯«ç§çº§ï¼Python å¾ªç¯åéè¦æ°ç§
fast_img.process_image(img) 

# Case 2: åçè°ç¨ (åå­ä¸è¿ç»­)
# slice = img[:, ::2] 
# fast_img.process_image(slice) 
# -&gt; RuntimeError: Input array must be C-style contiguous

</code></pre>
<p>éè¿è¿ç§æ¹å¼ï¼æä»¬ä¸ä»å©ç¨äº C++ çæ§è½ï¼è¿ä¿è¯äºç³»ç»ç<strong>é²æ£æ§ (Robustness)</strong>ãè¿ææ¯ç³»ç»æ¶æå¸å¨å¤çè·¨è¯­è¨äºæä½æ¶åºæçæç»´æ¹å¼ã</p>
<h3 id="54-æ»ç»æ¶æå¸çæç»ææ©">5.4. æ»ç»ï¼æ¶æå¸çæç»ææ©</h3>
<p>è³æ­¤ï¼æä»¬ä»åºå±çå­èç ï¼Generatorï¼è®²å°äºåå­ç®¡çï¼Ref Countingï¼ï¼åå°å¹¶åæ¨¡åï¼Asyncio vs GILï¼ï¼æåæç ´äºè¯­è¨çè¾¹çï¼C++ Extensionï¼ã</p>
<p>ä½ä¸ºä¸ä¸ªç³»ç»çº§å¼åèï¼ä½¿ç¨ Python çæä½³å§¿å¿å¹¶éæå®å½ä½âèæ¬âï¼èæ¯æå®å½ä½<strong>è¶æ°´</strong>ï¼</p>
<ol>
<li><strong>æ§å¶æµ (Python):</strong> å¤çå¤æçä¸å¡é»è¾ãéç½®è§£æãREST API ç¼æãå©ç¨å¶å¨æç¹æ§åä¸°å¯ççæã</li>
<li><strong>æ°æ®æµ (C++/Rust):</strong> å¤çç¹éçè®¡ç®ãå¤§è§æ¨¡åå­æä½ãä½å»¶è¿ IOãå©ç¨å¶å¯¹ç¡¬ä»¶çææ§åã</li>
</ol>
<p><strong>Python is slow, but your Architecture doesn't have to be.</strong></p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-10 12:01">2026-02-10 12:01</span>&nbsp;
<a href="https://www.cnblogs.com/kaiux">å¿µé£é¶å£¹</a>&nbsp;
éè¯»(<span id="post_view_count">104</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19598962);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19598962', targetLink: 'https://www.cnblogs.com/kaiux/p/19598962', title: 'è§£å Pythonï¼å³äºæéãGIL ä¸å¼æ­¥åæ ¸' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ spring-äºå¡ç®¡ç ]]></title>
    <link>https://www.cnblogs.com/alineverstop/p/19598826</link>
    <guid>5b5b5dde53a13a9d0ea9469c87443fc5</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/alineverstop/p/19598826" title="åå¸äº 2026-02-10 11:39">
    <span role="heading" aria-level="2">spring-äºå¡ç®¡ç</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="äºå¡æ¯æ">äºå¡æ¯æ</h1>
<h2 id="ä»ä¹æ¯äºå¡">ä»ä¹æ¯äºå¡ï¼</h2>
<p>å¨ä¸ä¸ªä¸å¡æµç¨ä¸­ï¼éè¦å¤æ¡DMLï¼insertãdeleteãupdateï¼è¯­å¥èåæè½å®æãè¿äºè¯­å¥å¿é¡»åæ¶æåæèåæ¶å¤±è´¥ãè¿æ ·æè½ä¿è¯æ°æ®å®å¨ã</p>
<p>å¤æ¡DMLåæ¶æåæèåæ¶å¤±è´¥ï¼å«åäºå¡ã</p>
<h3 id="äºå¡å¤ççåä¸ªè¿ç¨">äºå¡å¤ççåä¸ªè¿ç¨</h3>
<ol>
<li>å¼å¯äºå¡</li>
<li>æ§è¡ä¸å¡ä»£ç </li>
<li>æäº¤äºå¡ï¼æ²¡åºç°å¼å¸¸ï¼æäº¤æåãcommit transactionï¼</li>
<li>åæ»äºå¡ï¼åºç°å¼å¸¸ãæ§è¡åæ»äºå¡. rollback transactionï¼</li>
</ol>
<h3 id="äºå¡çåä¸ªç¹æ§acid">äºå¡çåä¸ªç¹æ§ï¼ACIDï¼</h3>
<ol>
<li>Aåå­æ§ï¼äºå¡æ¯æå°çå·¥ä½ååï¼ä¸å¯å</li>
<li>Cä¸è´æ§ï¼äºå¡è¦ä¹åæ¶æåï¼è¦ä¹åæ¶å¤±è´¥</li>
<li>Iéç¦»æ§ï¼äºå¡ä¸äºå¡ä¹é´ä¿è¯åäºä¸å¹²æ°</li>
<li>Dæä¹æ§ï¼æä¹æ§æ¯äºå¡ç»æçæ å¿ã</li>
</ol>
<h2 id="springå¯¹äºå¡çæ¯æ">springå¯¹äºå¡çæ¯æ</h2>
<p>springå®ç°äºå¡ç2ç§æ¹å¼ï¼</p>
<ol>
<li>ç¼ç¨å¼äºå¡ï¼éè¿ç¼åä»£ç çæ¹å¼æ¥å®ç°äºå¡ç®¡ç</li>
<li>å£°æå¼äºå¡ï¼åºäºæ³¨è§£æ¹å¼ååºäºxmlæ¹å¼ï¼æ¨èä½¿ç¨ï¼</li>
</ol>
<h3 id="springäºå¡ç®¡çapi">springäºå¡ç®¡çapi</h3>
<p>springå¯¹äºå¡çç®¡çæ¯åºäºaopå®ç°çãæä»¥springä¸é¨éå¯¹äºå¡å¼åäºä¸å¥apiï¼å¶æ ¸å¿æ¥å£å¦ä¸ï¼PlatformTransactionManager æ¥å£ã</p>
<h3 id="å£°æå¼äºå¡åºäºæ³¨è§£æ¹å¼å®ç°">å£°æå¼äºå¡åºäºæ³¨è§£æ¹å¼å®ç°</h3>
<p>éè¦éç½®xmlæä»¶</p>
<pre><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
                          http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
                           http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd" &gt;

&lt;!--    ç»ä»¶æ«æ--&gt;
    &lt;context:component-scan base-package="com.ali" /&gt;

&lt;!--    éç½®æ°æ®æº--&gt;
    &lt;bean id="dataSource" class="com.alibaba.druid.pool.DruidDataSource"&gt;
        &lt;property name="url" value="jdbc:mysql://localhost:3306/bank"/&gt;
        &lt;property name="username" value="root"/&gt;
        &lt;property name="password" value="123456"/&gt;
        &lt;property name="driverClassName" value="com.mysql.jdbc.Driver"/&gt;
    &lt;/bean&gt;
&lt;!--    éç½®jdbcTemplate--&gt;
    &lt;bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate"&gt;
        &lt;property name="dataSource" ref="dataSource"/&gt;
    &lt;/bean&gt;

&lt;!--    éç½®äºå¡ç®¡çå¨--&gt;
    &lt;bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt;
        &lt;property name="dataSource" ref="dataSource"/&gt;
    &lt;/bean&gt;
&lt;!--    å¼å¯äºå¡æ³¨è§£é©±å¨å¨ï¼å¼å¯äºå¡æ³¨è§£ï¼éè¦å ä¸txçå½åç©ºé´--&gt;
    &lt;tx:annotation-driven transaction-manager="transactionManager"/&gt;
&lt;/beans&gt;
</code></pre>
<p>å¯ä»¥å¨ç±»åæ¹æ³ä¸å @Transactional å¼å¯äºå¡</p>
<ul>
<li>å å¨ç±»ä¸è¡¨ç¤ºè¿ä¸ªç±»ä¸çæææ¹æ³é½å¼å¯äºå¡</li>
<li>å å¨æ¹æ³æ¹æ³ä¸è¡¨ç¤ºåªæè¿ä¸ªæ¹æ³å¼å¯äºå¡</li>
</ul>
<h3 id="äºå¡çä¼ æ­è¡ä¸º">äºå¡çä¼ æ­è¡ä¸º</h3>
<p>ä»ä¹æ¯äºå¡çä¼ æ­è¡ä¸ºï¼</p>
<p>å¨serviceç§æaï¼ï¼åbï¼ï¼2ä¸ªæ¹æ³ï¼aï¼ï¼ä¸æäºå¡ï¼bï¼ï¼ä¸ä¹æäºå¡ï¼å½aï¼ï¼å¨æ§è¡è¿ç¨ä¸­è°ç¨äºbï¼ï¼ï¼äºå¡æ¯å¦ä½ä¼ éçï¼æ¯åå¹¶å°ä¸ä¸ªäºå¡ï¼è¿æ¯å¼å¯ä¸ä¸ªæ°äºå¡ï¼è¿å°±æ¯äºå¡çä¼ æ­è¡ä¸ºã</p>
<p>ä¸å±æ7ç§ä¼ æ­è¡ä¸ºï¼</p>
<ol>
<li>REQUIRD:æ¯æå½åäºå¡ï¼å¦æä¸å­å¨å°±æ°å»ºä¸ä¸ªäºå¡ï¼é»è®¤ï¼ãæ²¡æå°±æ°å»ºï¼æå°±å å¥ã</li>
<li>SUPPORTSï¼æ¯æå½åäºå¡ï¼å¦æå½åæ²¡æäºå¡ï¼å°±ä»¥éäºå¡æ¹å¼æ§è¡ãæå°±å å¥ï¼æ²¡æå°±ä¸ç®¡äºã</li>
<li>MANDATORYï¼å¿é¡»è¿è¡å¨ä¸ä¸ªäºå¡ä¸­ï¼å¦æå½åæ²¡æäºå¡åçï¼å°æåºå¼å¸¸ãæå°±å å¥ï¼æ²¡æå°±æå¼å¸¸ã</li>
<li>REQUIRES_NEWï¼å¼å¯ä¸ä¸ªæ°äºå¡ï¼å¦æä¸ä¸ªäºå¡å·²ç»å­å¨ï¼åå°è¿ä¸ªå­å¨çäºå¡æèµ·ãä¸ç®¡ææ²¡æãç´æ¥å¼å¯ä¸ä¸ªæ°äºå¡ãæ°äºå¡åæ§äºå¡ä¸å­å¨åµå¥å³ç³»ï¼æ§äºå¡è¢«æèµ·äºã</li>
<li>NOT_SUPPORTEDï¼ä»¥éäºå¡æ¹å¼è¿è¡ãå¦ææäºå¡ãåæèµ·å½åäºå¡ãä¸æ¯æäºå¡ï¼å­å¨å°±æèµ·ã</li>
<li>NEVERï¼ä»¥éäºå¡æ¹å¼è¿è¡ãå¦ææäºå¡ãåæå¼å¸¸ãä¸æ¯æäºå¡ï¼å­å¨å°±æå¼å¸¸ã</li>
<li>NESTEDï¼å¦æå½åæä¸ä¸ªäºå¡å¨è¿è¡ä¸­ï¼åè¯¥æ¹æ³åºå½è¿è¡å¨ä¸ä¸ªåµå¥äºå¡ä¸­ãè¢«åµå¥çäºå¡å¯ä»¥ç¬ç«äºå¤å±äºå¡è¿è¡æäº¤æåæ»ãå¦æå¤å±äºå¡ä¸å­å¨ãè¡ä¸ºå°±åREQUIRDä¸æ ·ãæäºå¡çè¯ï¼å°±å¨è¿ä¸ªäºå¡éåµå¥ä¸ä¸ªå®å¨ç¬ç«çäºå¡ï¼åµå¥çäºå¡å¯ä»¥ç¬ç«çæäº¤ååæ»ãæ²¡æäºå¡å°±åREQUIRDä¸æ ·ã</li>
</ol>
<p>å¨ä»£ç ä¸­è®¾ç½®äºå¡çä¼ æ­è¡ä¸ºï¼</p>
<pre><code class="language-java">@Transactional(propagation = Propagation.MANDATORY)
</code></pre>
<h3 id="äºå¡éç¦»çº§å«">äºå¡éç¦»çº§å«</h3>
<p>æ°æ®åºä¸­è¯»åæ°æ®å­å¨ä¸å¤§é®é¢ï¼</p>
<ol>
<li>èè¯»ï¼è¯»åå°æ²¡ææäº¤å°æ°æ®åºçæ°æ®</li>
<li>ä¸å¯éå¤è¯»ï¼å¨åä¸ä¸ªäºå¡ä¸­ï¼ç¬¬ä¸æ¬¡åç¬¬äºæ¬¡è¯»åçæ°æ®ä¸ä¸æ ·</li>
<li>å¹»è¯»ï¼è¯»å°çæ°æ®æ¯åçï¼ï¼</li>
</ol>
<p>äºå¡çéç¦»çº§å«æ4ä¸ªï¼</p>
<ol>
<li>è¯»æªæäº¤READ_UNCOMMITTEDï¼ å­å¨èè¯»ãä¸å¯éå¤è¯»ãå¹»è¯»é®é¢</li>
<li>è¯»æäº¤READ_COMMITTEDï¼äºå¡æäº¤ä¹åæè¯»å°ãå­å¨ä¸å¯éå¤è¯»ãå¹»è¯»é®é¢</li>
<li>å¯éå¤è¯»REPEATABLE_READï¼è§£å³ä¸å¯éå¤è¯»çé®é¢ï¼å­å¨å¹»è¯»é®é¢</li>
<li>åºååSERIALIZABLEï¼è§£å³å¹»è¯»é®é¢ï¼äºå¡æéæ§è¡ãä¸æ¯æå¹¶åã</li>
</ol>
<p><strong>MySQLé»è®¤å¯éå¤è¯»ï¼Oracleé»è®¤è¯»æäº¤</strong></p>
<p>ä»å¨è¯»çäºå¡ä¸­è®¾ç½®éç¦»çº§å«å°±è¡ï¼åçäºå¡æ²¡å¿è¦è®¾ç½®</p>
<p>ä»£ç ä¸­è®¾ç½®äºå¡çéç¦»çº§å«ï¼</p>
<pre><code class="language-java">@Transactional(isolation = Isolation.DEFAULT)
</code></pre>
<h3 id="äºå¡è¶æ¶">äºå¡è¶æ¶</h3>
<pre><code class="language-java">@Transactional(timeout = 10)
</code></pre>
<p>ä»¥ä¸ä»£ç è®¾ç½®äºå¡è¶æ¶æ¶é´ä¸º10s</p>
<p>è¡¨ç¤ºè¶è¿10sï¼å¦æäºå¡ä¸­ææçDMLè¯­å¥è¿æ²¡ææ§è¡å®æ¯çè¯ï¼æç»ç»æä¼åæ»ã</p>
<p>é»è®¤å¼-1ï¼è¡¨ç¤ºæ²¡ææ¶é´éå¶ã</p>
<p><strong>äºå¡çè¶æ¶æ¶é´å¼å¾æ¯åªæ®µæ¶é´ï¼</strong></p>
<p>å¨å½åäºå¡ä¸­ï¼æåä¸æ¡DMLè¯­å¥æ§è¡ä¹åçæ¶é´ï¼å¦ææåä¸æ¡DMLè¯­å¥åé¢æå¾å¤ä¸å¡é»è¾ï¼è¿äºä¸å¡ä»£ç æ§è¡çæ¶é´ä¸è¢«è®¡å¥è¶æ¶æ¶é´ã</p>
<h3 id="åªè¯»äºå¡">åªè¯»äºå¡</h3>
<pre><code class="language-java">@Transactional(readOnly = true)
</code></pre>
<p>å°å½åäºå¡è®¾ä¸ºåªè¯»äºå¡ï¼å¨è¯¥äºå¡ä¸­åªåè®¸æ§è¡select è¯­å¥ã</p>
<p>è¯¥ç¹æ§çä½ç¨æ¯ï¼å¯å¨springçä¼åç­ç¥ãæé«selectè¯­å¥çæ§è¡æçã</p>
<h3 id="è®¾ç½®åªäºå¼å¸¸åæ»äºå¡">è®¾ç½®åªäºå¼å¸¸åæ»äºå¡</h3>
<pre><code class="language-java">@Transactional(rollbackFor = RuntimeException.class)
</code></pre>
<p>è¡¨ç¤ºåçRuntimeExceptionå¼å¸¸æè¯¥å¼å¸¸çå­ç±»å¼å¸¸æåæ»</p>
<h3 id="è®¾ç½®åªäºå¼å¸¸ä¸åæ»äºå¡">è®¾ç½®åªäºå¼å¸¸ä¸åæ»äºå¡</h3>
<pre><code class="language-java">@Transactional(noRollbackFor = NullPointerException.class)
</code></pre>
<p>è¡¨ç¤ºåçNullPointerExceptionå¼å¸¸æè¯¥å¼å¸¸çå­ç±»ä¸åæ»ï¼å¶ä»å¼å¸¸æåæ»</p>
<h3 id="äºå¡çå¨æ³¨è§£å¼å¼å">äºå¡çå¨æ³¨è§£å¼å¼å</h3>
<p>ç¼åéç½®ç±»</p>
<pre><code class="language-java">@Configuration // ä»£æ¿xmléç½®æä»¶
@ComponentScan("com.ali") // æ«æcom.aliåä¸çææç±»
@EnableTransactionManagement // å¼å¯äºå¡ç®¡ç
public class Spring6Config {

    // @Beanæ³¨è§£ç¨äºå°æ¹æ³çè¿åå¼æ³¨åä¸ºSpringå®¹å¨ä¸­çä¸ä¸ªBean
    @Bean(name = "druidDataSource")
    public DruidDataSource druidDataSource() {
        DruidDataSource druidDataSource = new DruidDataSource();
        druidDataSource.setUrl("jdbc:mysql://localhost:3306/spring6?useSSL=false&amp;serverTimezone=UTC");
        druidDataSource.setUsername("root");
        druidDataSource.setDriverClassName("com.mysql.jdbc.Driver");
        druidDataSource.setPassword("123456");
        return druidDataSource;
    }

    @Bean(name = "transactionManager")
    public DataSourceTransactionManager transactionManager(DataSource dataSource) {
        DataSourceTransactionManager transactionManager = new DataSourceTransactionManager();
        transactionManager.setDataSource(dataSource);
        return transactionManager;
    }

    @Bean(name = "jdbcTemplate")
    // è¯¥æ¹æ³çåæ°DataSource dataSourceä¼èªå¨ä»Springå®¹å¨ä¸­æ¾å°ç±»åä¸ºDataSourceçBeanå¹¶æ³¨å¥
    public JdbcTemplate jdbcTemplate(DataSource dataSource) {
        JdbcTemplate jdbcTemplate = new JdbcTemplate();
        jdbcTemplate.setDataSource(dataSource);
        return jdbcTemplate;
    }
}
</code></pre>
<p>ä½¿ç¨æ¶åå¶ä»æ¹å¼ä¸æ ·ã</p>


</div>
<div id="MySignature" role="contentinfo">
    <p>æ¬ææ¥èªåå®¢å­ï¼ä½èï¼<a href="https://www.cnblogs.com/alineverstop/" target="_blank">NE_STOP</a>ï¼è½¬è½½è¯·æ³¨æåæé¾æ¥ï¼<a href="https://www.cnblogs.com/alineverstop/p/19598826" target="_blank">https://www.cnblogs.com/alineverstop/p/19598826</a></p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-10 11:39">2026-02-10 11:39</span>&nbsp;
<a href="https://www.cnblogs.com/alineverstop">NE_STOP</a>&nbsp;
éè¯»(<span id="post_view_count">101</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19598826);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19598826', targetLink: 'https://www.cnblogs.com/alineverstop/p/19598826', title: 'spring-äºå¡ç®¡ç' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ åºäºDWSçåéè®¡ç®åè½å®ç°ç®åçååæç´¢æ¨èç³»ç» ]]></title>
    <link>https://www.cnblogs.com/huaweiyun/p/19598674</link>
    <guid>950e788755b79bc077f8b607225cdefe</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/huaweiyun/p/19598674" title="åå¸äº 2026-02-10 11:14">
    <span role="heading" aria-level="2">åºäºDWSçåéè®¡ç®åè½å®ç°ç®åçååæç´¢æ¨èç³»ç»</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p data-tool="mdniceç¼è¾å¨">æ¬æåäº«èªåä¸ºäºç¤¾åºã<a href="https://bbs.huaweicloud.com/blogs/470986?utm_source=oschina&amp;utm_medium=bbs-ex&amp;utm_campaign=other&amp;utm_content=content" target="_blank" rel="noopener nofollow">åºäºDWSçåéè®¡ç®åè½å®ç°ç®åçååæç´¢æ¨èç³»ç»</a>ã</p>
<h2 data-tool="mdniceç¼è¾å¨"><span class="prefix"><span class="content">1. åè¨</span></span></h2>
<ul data-tool="mdniceç¼è¾å¨">
<li>éç¨çæ¬ï¼ã9.1.1.200ï¼åä»¥ä¸ï¼ã</li>
</ul>
<p data-tool="mdniceç¼è¾å¨">å¨çæå¼ AI ä¸å¤§æ¨¡åï¼LLMï¼éå¡ææ¯æ çä»å¤©ï¼æ°æ®å¤ççéæ±å·²ç»ä»åä¸çâç²¾ç¡®å¹éâè½¬åäºâè¯­ä¹çè§£âãä¼ ç»çæ°æ®åºç³»ç»å¨å¤çç»æåæ°æ®ï¼å¦è®¢åéé¢ãç¨æ·IDï¼æ¹é¢è¡¨ç°å®ç¾ï¼ä½å¨é¢å¯¹ AI æ¶ä»£çåçéç»æåæ°æ®ï¼ææ¬ãå¾åãé³è§é¢ï¼æ¶ï¼åºäºå³é®è¯æç´¢çä¼ ç»æ¹å¼ç±äºæ æ³çè§£æ°æ®æ¬èº«èåçâ<strong>ææ</strong>âä»èæ¾å¾åä¸ä»å¿ã</p>
<p data-tool="mdniceç¼è¾å¨"><strong>æ ¸å¿çç¹</strong>ï¼ä¼ ç»æ°æ®åºæ¬è´¨ä¸ä¾èµç²¾ç¡®å¹éï¼exact matchï¼æå­æ®µç´¢å¼æ¥è¯¢ï¼ç¼ºå°ä»¥â<strong>å«ä¹</strong>âä¸ºä¸­å¿çæ¨¡ç³ç¸ä¼¼æç´¢è½åãAIç¸å³åºç¨ä¸æ¨èç³»ç»åºæ¯å¸¦æ¥äºæµ·éåéæ£ç´¢éæ±ï¼ç¸ä¼¼æ§æç´¢æ¯æ ¸å¿éæ±ï¼å¯¹åéæ°æ®åºå¸¸è§åºç¨åºæ¯ï¼</p>
<ul data-tool="mdniceç¼è¾å¨">
<li>
<p>ä»¥ææå¾/ä»¥å¾æå¾ï¼ æ¾å°ä¸è¾å¥å¾çæç¸ä¼¼çå¾ç</p>
</li>
<li>
<p>æºè½é®ç­/RAGï¼å¨ç¥è¯åºä¸­æ¾å°ä¸ç¨æ·é®é¢æç¸å³çææ¡£çæ®µ</p>
</li>
<li>
<p>æ¨èç³»ç»ï¼æ¾å°ä¸ç¨æ·å´è¶£åéæç¸ä¼¼çåå</p>
</li>
</ul>
<p data-tool="mdniceç¼è¾å¨"><strong>è§£å³æ¹æ¡</strong>ï¼DWSéæ pgvector(0.8.0) æä»¶ï¼å¯ææå¼å è½½ï¼å®ç°åºååéè®¡ç®æ£ç´¢è½åã</p>
<p data-tool="mdniceç¼è¾å¨"><strong>å®ä¹</strong>ï¼ DWSåéè®¡ç®å¹¶éç¬ç«çæ°æ®åºç³»ç»ï¼èæ¯éè¿æä»¶å½¢å¼æ©å±ä¼ ç»æ°æ®åºåè½ï¼ä½¿å¶è½å¤å¤çé«ç»´åéæ°æ®ï¼æ éç¨æ·è¿å¾æ°æ®æéæåºç¨æ¶æï¼å³å¯å¨ç°æç³»ç»ä¸­å®ç°åéæ£ç´¢ç¸å³åè½ã</p>
<img alt="" data-src="https://img2024.cnblogs.com/blog/2030258/202602/2030258-20260210111417580-912227321.png" class="lazyload"><br>
<h2 data-tool="mdniceç¼è¾å¨"><span class="prefix"><span class="content">2. DWSåéè®¡ç®åè½ç®ä»</span></span></h2>
<ol data-tool="mdniceç¼è¾å¨">
<li>åéæ°æ®ç±»åï¼</li>
</ol>
<p><img alt="" data-src="https://img2024.cnblogs.com/blog/2030258/202602/2030258-20260210111417526-2044915800.png" class="lazyload"></p>
<ol start="2" data-tool="mdniceç¼è¾å¨">
<li>åéè·ç¦»/ç¸ä¼¼åº¦æä½ç¬¦ï¼&nbsp;</li>
</ol>
<p><img alt="" data-src="https://img2024.cnblogs.com/blog/2030258/202602/2030258-20260210111417523-2102871759.png" class="lazyload"></p>
<ol start="3" data-tool="mdniceç¼è¾å¨">
<li>ç´¢å¼ç±»åï¼</li>
</ol>
<p><img alt="" data-src="https://img2024.cnblogs.com/blog/2030258/202602/2030258-20260210111417561-1899020612.png" class="lazyload"></p>
<h2 data-tool="mdniceç¼è¾å¨"><span class="prefix"><span class="content">3. å®æ´ç¤ºä¾</span></span></h2>
<p data-tool="mdniceç¼è¾å¨">åè®¾æä»¬æ­£å¨åä¸ä¸ªååæ¨èæç´¢ç³»ç»ï¼</p>
<ul data-tool="mdniceç¼è¾å¨">
<li>ååæ¬èº«ææ é¢ãæè¿°ãåç±»ãä»·æ ¼ç­å­æ®µ</li>
<li>åå©å¤§æ¨¡åembeddingè½åï¼æä»¬è½å¤å°ååæè¿°ç¼ç ä¸ºåé</li>
<li>åæ ·çï¼å°ç¨æ·çæç´¢å³é®å­ä¹è½¬åä¸ºåé</li>
<li><strong>ç®ç</strong>ï¼éè¿<strong>ç¸ä¼¼æ§</strong>æç´¢æ¾åºæç¬¦åç¨æ·<strong>æç´¢æå¾</strong>çåå</li>
</ul>
<blockquote class="custom-blockquote multiquote-1" data-tool="mdniceç¼è¾å¨">
<p>å¦éä½¿ç¨åéè®¡ç®åè½ï¼è¯·èç³»ææ¯æ¯æä¿®æ¹feature_support_optionsåæ°, å¼å¯enable_pgvectoréé¡¹ãè¯¦ç»è¯­æ³ä»ç»ï¼è¯·åèDWSäº§åææ¡£ <a href="https://support.huaweicloud.com/devg-911-dws/dws_04_1462.html" rel="noopener nofollow">åéè®¡ç®</a>ç« è</p>
</blockquote>
<h3 data-tool="mdniceç¼è¾å¨"><span class="prefix"><span class="content">3.1 åºç¡æ¥è¯¢</span></span></h3>
<ol data-tool="mdniceç¼è¾å¨">
<li>
<p>å®è£æ©å±ï¼</p>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">create extension pgvector;</pre>
</div>
</li>
<li>
<p>åå»ºååè¡¨ï¼å¨å­åéembeddingï¼</p>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">CREATE TABLE products (
    id bigserial PRIMARY KEY,
    title text,
    description text,
    price numeric,
    embedding vector(768)   --768ç»´åéï¼ç±ååæè¿°(description)çæ
);</pre>
</div>
</li>
<li>
<p>æå¥æ°æ®</p>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">INSERT INTO products (title, description, price, embedding) VALUES
('Wireless Earbuds', 'Bluetooth wireless earbuds with charging case', 59.9, '[0.12, 0.34, -0.21, ...]'),
('Noise Cancelling Headphones', 'Over-ear headphones with active noise cancellation', 129.9, '[0.11, 0.36, -0.19, ...]'),
('Gaming Headset', 'Wired gaming headset with microphone', 79.9, '[0.10, 0.33, -0.25, ...]'),
('Smartphone Stand', 'Adjustable phone stand for desk use', 12.9, '[0.45, -0.12, 0.08, ...]'),
('USB-C Charger', 'Fast charging USB-C power adapter', 19.9, '[0.42, -0.15, 0.05, ...]'),
('Mechanical Keyboard', 'Mechanical keyboard with blue switches', 89.9, '[0.55, 0.02, -0.31, ...]'),
('Wireless Mouse', 'Ergonomic wireless mouse', 29.9, '[0.53, 0.01, -0.28, ...]'),
('Laptop Backpack', 'Water-resistant laptop backpack', 49.9, '[0.60, -0.05, -0.10, ...]'),
('4K Monitor', '27-inch 4K UHD computer monitor', 299.9, '[0.58, 0.04, -0.35, ...]'),
('Webcam', 'HD webcam for video conferencing', 39.9, '[0.52, -0.01, -0.20, ...]'),
('Bluetooth Speaker', 'Portable Bluetooth speaker with deep bass', 45.9, '[0.14, 0.30, -0.18, ...]'),
('Smart Watch', 'Fitness tracking smart watch', 99.9, '[0.20, 0.40, -0.22, ...]'),
('Fitness Tracker', 'Lightweight activity and sleep tracker', 49.9, '[0.22, 0.38, -0.24, ...]'),
('Tablet Stylus', 'Stylus pen for tablets', 25.9, '[0.48, -0.10, 0.12, ...]'),
('Laptop Cooling Pad', 'Cooling pad with dual fans', 34.9, '[0.57, -0.02, -0.15, ...]');</pre>
</div>
</li>
<li>
<p>ç¸ä¼¼åº¦æ¥è¯¢ï¼</p>
<p>éè¿ä»¥ä¸æ¥è¯¢ï¼è½å¤è·åä¸ç¨æ·åéç¸ä¼¼åº¦æé«/è·ç¦»æè¿çtopkä¸ªåå</p>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">SELECT id, title, price
FROM products
ORDER BY embedding &lt;-&gt; '[0.091, -0.054, 0.92, ...]'   -- ç¨æ·åé, éè¿L2è·ç¦»è®¡ç®ç¸ä¼¼åº¦
LIMIT 10;</pre>
</div>
</li>
<li>
<p>æ··åæ¥è¯¢:</p>
<p>DWSåéè®¡ç®æ¯æä¼ ç»è¿æ»¤æ¹å¼åè¯­ä¹ç¸ä¼¼åº¦æ¥è¯¢çæ··åä½¿ç¨</p>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">SELECT id,title,price
FROM products
WHERE price &lt; 2000
ORDER BY embedding &lt;-&gt; '[0.091, -0.054, 0.92, ...]'
LIMIT 10;</pre>
</div>
</li>
</ol>
<h3 data-tool="mdniceç¼è¾å¨"><span class="prefix"><span class="content">3.2 ä½¿ç¨ç´¢å¼</span></span></h3>
<p data-tool="mdniceç¼è¾å¨">DWSåéè®¡ç®é»è®¤ä½¿ç¨ç²¾ç¡®è¿é»æç´¢ï¼æä¾ç¾åä¹ç¾å¬åçä½æ¥è¯¢éåº¦è¾æ¢ãå¯ä»¥æéä½¿ç¨è¿ä¼¼ç¸é»æç´¢ç´¢å¼æ¥çºç²é¨åå¬åçä»¥æé«æ¥è¯¢éåº¦ãä¸åäºä¼ ç»ç´¢å¼ï¼è¿ä¼¼æç´¢ç´¢å¼å¯è½ä¼è¿åä¸åçæ¥è¯¢ç»æãDWSåéè®¡ç®ç®åæ¯æçç´¢å¼ç±»ååæ¬HNSWåIVFFlatã</p>
<ol data-tool="mdniceç¼è¾å¨">
<li>åå»ºç´¢å¼
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">-- HNSW ç´¢å¼
CREATE INDEX ON products USING hnsw (embedding vector_l2_ops) WITH (m = 16, ef_construction = 200);

-- æè IVFFlat ç´¢å¼
CREATE INDEX ON products USING ivfflat (embedding vector_l2_ops) WITH (lists = 100);</pre>
</div>
<pre class="custom"><code class="hljs">&nbsp;</code></pre>
</li>
<li>ä½¿ç¨ç´¢å¼ åå»ºç´¢å¼åæ§è¡topkæ¥è¯¢ï¼å¨è·ç¦»æä½ç¬¦å¹éçåºæ¯ä¸ä¼ä½¿ç¨index scanï¼å¯ä»¥éè¿explainè§å¯è®¡å
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;"> id |                            operation                             
----+------------------------------------------------------------------
  1 | -&gt;  Limit                                                        
  2 |    -&gt;  Streaming (type: GATHER)                                  
  3 |       -&gt;  Limit                                                  
  4 |          -&gt;  Index Scan using products_embedding_idx on products</pre>
</div>
</li>
</ol>
<h3 data-tool="mdniceç¼è¾å¨"><span class="prefix"><span class="content">3.3 ç»æè§£è¯»</span></span></h3>
<ul data-tool="mdniceç¼è¾å¨">
<li>ç¨æ·æç´¢è¯ä¸º <code>wireless audio headset</code></li>
</ul>
<pre class="custom" data-tool="mdniceç¼è¾å¨"><code class="hljs">&nbsp;&nbsp;&nbsp;&nbsp;SELECT&nbsp;id,&nbsp;title<br>&nbsp;&nbsp;&nbsp;&nbsp;FROM&nbsp;products<br>&nbsp;&nbsp;&nbsp;&nbsp;ORDER&nbsp;BY&nbsp;embedding&nbsp;&lt;-&gt;&nbsp;<span class="hljs-string">'[0.13,&nbsp;0.35,&nbsp;-0.20,&nbsp;...]'&nbsp;&nbsp;&nbsp;--ç¨æ·æç´¢è¯çembedding<br>&nbsp;&nbsp;&nbsp;&nbsp;LIMIT&nbsp;10;<br></span></code></pre>
<p data-tool="mdniceç¼è¾å¨">æ¥è¯¢ç»æï¼ åååä¸ºè³æºãé³åç±»åçæ°æ®ç¸è¾äºè¡¨ä¸­å¶ä»ååç±»å«ä¸ç¨æ·æç´¢è¯å¨è¯­ä¹ä¸æ´ä¸ºæ¥è¿ï¼å³ä¾¿æ²¡æç²¾ç¡®åå«<code>headset</code>ä»ç¶ä¼å¨ç»æä¸­æåºæ´é å</p>
<img alt="" data-src="https://img2024.cnblogs.com/blog/2030258/202602/2030258-20260210111417537-2120302191.png" class="lazyload"><br>
<ul data-tool="mdniceç¼è¾å¨">
<li>ç¨æ·æ­£å¨æµè§ <code>Noise Cancelling Headphones</code> ååï¼æ ¹æ®ç¸å³æ§è¿è¡æ¨èï¼</li>
</ul>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">SELECT p2.title, p2.price
FROM products p1
JOIN products p2 ON p1.id &lt;&gt; p2.id
WHERE p1.title = 'Noise Cancelling Headphones'
ORDER BY p2.embedding &lt;-&gt; p1.embedding
LIMIT 10;</pre>
</div>
<p data-tool="mdniceç¼è¾å¨">æ¥è¯¢ç»æï¼ è³æºé³åç±»ååä¸ç¨æ·æ­£å¨æµè§ç <code>Noise Cancelling Headphones</code> äº§åç¸å³æ§æ´é«</p>
<p data-tool="mdniceç¼è¾å¨"><img alt="" data-src="https://img2024.cnblogs.com/blog/2030258/202602/2030258-20260210111417566-890623509.png" class="lazyload"></p>
<h2 data-tool="mdniceç¼è¾å¨"><span class="prefix"><span class="content">4 æ§è½</span></span></h2>
<p data-tool="mdniceç¼è¾å¨">ä»¥ä¸å¾ç¤ºå±ç¤ºäºdws pgvectoræä»¶å¨ä¸åæ°æ®éåç´¢å¼ä¸çæ£ç´¢æ§è½</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2030258/202602/2030258-20260210110919072-1321574869.png" class="lazyload"></p>
<p>&nbsp;å®æµè¡¨æï¼dws pgvectoræä»¶è½å¤åå°åä¸çº§åéæ°æ®ï¼</p>
<ol data-tool="mdniceç¼è¾å¨">
<li>ä½äºå°æ¶çº§ç´¢å¼æå»ºæ¶é´</li>
<li>æ¯«ç§çº§æ¥è¯¢</li>
<li>ç¨³å®é«å¬åçï¼æéè°åæ§å¶</li>
</ol>
<p data-tool="mdniceç¼è¾å¨">å¯¹æ¯ä¸¤ç§ç´¢å¼ï¼æä»¬å¯ä»¥åç°ï¼</p>
<ul data-tool="mdniceç¼è¾å¨">
<li>hnswç´¢å¼æå»ºæ¶é´ä¸æ°æ®éåç»´åº¦å¼ºç¸å³ãç¸åæ°æ®éåç»´åº¦åºæ¯ä¸æå»ºæ¶é´ç¸è¾ivfflatæ¾èå¢å ï¼æ¢åæ´å¿«å¾æ¥è¯¢éåº¦åæ´å¥½çå¬åç</li>
<li>ivfflatç´¢å¼æå»ºæ¶é´æ´ç­ï¼ä¸»è¦åæå»ºåæ°listså½±åï¼å¯¹æ°æ®éä¸ææãç¸åæ°æ®éåç»´åº¦åºæ¯ä¸æ¥è¯¢èæ¶åå¬åçè¡¨ç°ä½äºhnsw</li>
</ul>
<p data-tool="mdniceç¼è¾å¨">å æ­¤ï¼ä¸¤èçæ¨èä½¿ç¨åºæ¯åå«ä¸ºï¼ HNSW</p>
<ul data-tool="mdniceç¼è¾å¨">
<li>çº¿ä¸å®æ¶æ£ç´¢ æç´¢ / æ¨è / RAG</li>
<li>é«å¬åè¦æ± Recall â¥ 0.9</li>
<li>å¤ç§æ·/é¿æè¿ç»´ç³»ç»</li>
</ul>
<p data-tool="mdniceç¼è¾å¨">IVFFLAT</p>
<ul data-tool="mdniceç¼è¾å¨">
<li>ç¦»çº¿ / æ¹éæ£ç´¢</li>
<li>æ£ç´¢ææ¬ä¼å</li>
<li>ä½ä¸ºå¤çº§æ£ç´¢çç¬¬ä¸å±ç²ç­</li>
</ul>
<h2 data-tool="mdniceç¼è¾å¨"><span class="prefix"><span class="content">5 æ»ç»</span></span></h2>
<p data-tool="mdniceç¼è¾å¨">éè¿å¨ DWS åéè®¡ç®æ©å±è½åï¼æä»¬å°ä¼ ç»ä»¥ç»æåæ¥è¯¢ä¸ºæ ¸å¿çæ°æ®åºç³»ç»åçº§ä¸ºè½å¤å·å¤è¯­ä¹çè§£ä¸ç¸ä¼¼åº¦è®¡ç®è½åçç»ä¸æ°æ®åºåº§ãç³»ç»ä¸ä»æ¯æåéæ°æ®çå­å¨ä¸é«æç¸ä¼¼åº¦æ£ç´¢ï¼è¿åè®¸ä¸å¡æ¹ç´æ¥éè¿æ å SQL å®æè¯­ä¹æç´¢ãæ¨èä¸ç¸ä¼¼åå®¹å¹éï¼æ éå¼å¥é¢å¤çåéå¼ææå¤æçæ°æ®åæ­¥é¾è·¯ã</p>
<p data-tool="mdniceç¼è¾å¨">ä¾æ HNSWãIVFFlat è¿ä¼¼æè¿é»ç´¢å¼ï¼åéæ¥è¯¢å¨å¤§è§æ¨¡æ°æ®åºæ¯ä¸ä¾ç¶å·å¤å¯æ§çæ§è½ä¸ç¨³å®çååºè½åãåæ¶ï¼åéæ£ç´¢è½åä¸ä¼ ç»ç»æåæ¥è¯¢ãè¿æ»¤æ¡ä»¶ãJOIN é»è¾çæ·±åº¦èåï¼ä½¿å¾æç´¢æ¨èãä¸ªæ§ååæä»¥å RAG ç­ AI åºç¨å¯ä»¥èªç¶è½å°å¨ç°ææ°ä»ä¸ä¸å¡ä½ç³»ä¹ä¸ã</p>
<p data-tool="mdniceç¼è¾å¨">æç»ï¼è¿ä¸è½åæ©å±ä¸ä»éä½äºç³»ç»æ¶æå¤æåº¦ï¼ä¹æ¾èæåäºæ°æ®å¹³å°å¯¹æ°ä¸ä»£æºè½åºç¨çæ¯æè½åï¼å®ç°äºä»âæ°æ®æ¥è¯¢âåâè¯­ä¹è®¡ç®ä¸ä¸å¡å³ç­æ¯æâçæ¼è¿ã</p>
<p data-tool="mdniceç¼è¾å¨">&nbsp;</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-10 11:14">2026-02-10 11:14</span>&nbsp;
<a href="https://www.cnblogs.com/huaweiyun">åä¸ºäºå¼åèèç</a>&nbsp;
éè¯»(<span id="post_view_count">81</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19598674);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19598674', targetLink: 'https://www.cnblogs.com/huaweiyun/p/19598674', title: 'åºäºDWSçåéè®¡ç®åè½å®ç°ç®åçååæç´¢æ¨èç³»ç»' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Linux Docker Compose é¨ç½².NET+Vue+MySQL+Redis+Nginx å®æ´è®°å½ï¼äº²æµæ åï¼ ]]></title>
    <link>https://www.cnblogs.com/huyong/p/19598103</link>
    <guid>477b8a955cf977b2ae52e08cb4300523</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/huyong/p/19598103" title="åå¸äº 2026-02-10 10:18">
    <span role="heading" aria-level="2">Linux Docker Compose é¨ç½².NET+Vue+MySQL+Redis+Nginx å®æ´è®°å½ï¼äº²æµæ åï¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/157572/202602/157572-20260210093515706-1791754599.png" alt="Linux Docker Compose é¨ç½².NET+Vue+MySQL+Redis+Nginx å®æ´è®°å½ï¼äº²æµæ åï¼" class="desc_img">
        æ¬æè¯¦ç»ä»ç»äº Linux ç³»ç»ä¸ï¼åºäº Docker Compose é¨ç½².NET+Vue+MySQL8+Redis+Nginx å¤æå¡é¡¹ç®çå®æ´æµç¨ãé¦åè¯´æ Docker Compose ä¸é®å¯åãéç½®ç»ä¸ç­æ ¸å¿ä¼å¿ï¼æ¥çè®²è§£é¨ç½²åçç¯å¢åå¤ï¼ç³»ç»éç½®ãè½¯ä»¶çæ¬ãæ¬å°æä»¶æåï¼ãDocker å Compose çå®è£ä¸éåå ééç½®ï¼è§èé¡¹ç®ç®å½ç»æåï¼éç¹ç¼å docker-compose.yml å®ç°å¤å®¹å¨ç¼æï¼å¹¶æä¾æ¬å°æåéåæåãæå¡å¨ç¦»çº¿å¯¼å¥çæ¹æ¡ãæä¸­è¿æ»ç»äºé¨ç½²ä¸­ç«¯å£ä¸å¹éãMySQL è¿æ¥å¤±è´¥ãæ¶åºå·®å¼ç­ 8 ç±»å¸¸è§é®é¢åè§£å³æ¹æ¡ï¼æ´çäºè¿ç»´å¸¸ç¨å½ä»¤ãå¼æºèªå¯éç½®åååç«¯æ´æ°æ¹æ³ï¼æåç»åºçäº§ç¯å¢ä¼åå»ºè®®ãæ´å¥æ¹æ¡å®ç°äºæå¡ä¸é®å¯åãæ°æ®æä¹åï¼ééæµè¯ / å°åé¡¹ç®é¨ç½²ï¼æç»´æ¤ãæè¿ç§»ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p><img src="https://img2024.cnblogs.com/blog/157572/202602/157572-20260210093422798-1508819059.png" alt="å°é¢" loading="lazy"></p>
<h2 id="åå¨åé¢ä¸ºä»ä¹ç¨-docker-composeæ¯åå®¹å¨é¨ç½²å¥½å¨åª">åå¨åé¢ï¼ä¸ºä»ä¹ç¨ Docker Composeï¼æ¯åå®¹å¨é¨ç½²å¥½å¨åªï¼</h2>
<p>åå®¹å¨åé¨ç½²æ¶ï¼åé <code>docker run</code>å½ä»¤éä¸ªå¯å¨ MySQLãRedisãåç«¯ãNginx å®¹å¨ä¼éå¸¸ç¹ç ââ ä¸ä»è¦è®°å¤§éå½ä»¤åæ°ï¼è¿å¾æå¨æ§å¶å®¹å¨å¯å¨é¡ºåºãéç½®ç½ç»èå¨ï¼ä¸æ¦æå¡å¨éå¯ï¼ææå®¹å¨è¦éæ°éä¸ªå¯å¨ï¼ç»´æ¤ææ¬æé«ã</p>
<p><strong>Docker Compose</strong>æ¯ Docker å®æ¹çå¤å®¹å¨ç¼æå·¥å·ï¼æ ¸å¿æ¯éè¿ä¸ä¸ª<code>docker-compose.yml</code>éç½®æä»¶ï¼éä¸­ç®¡çææå®¹å¨ç<strong>éåãç«¯å£ãæè½½ãç¯å¢åéãç½ç»ãä¾èµå³ç³»</strong>ç­ææéç½®ï¼è½å®ç¾è§£å³åå®¹å¨é¨ç½²ççç¹ã</p>
<h3 id="docker-compose-æ ¸å¿ä¼ç¹ä¹æ¯æ¬æ¬¡é¨ç½²éæ©å®çåå ">Docker Compose æ ¸å¿ä¼ç¹ï¼ä¹æ¯æ¬æ¬¡é¨ç½²éæ©å®çåå ï¼</h3>
<ol>
<li><strong>ä¸é®å¯å</strong>ï¼ä¸æ¡<code>docker-compose up -d</code>å¯å¨æææå¡ï¼<code>docker-compose down</code>åæ­¢å¹¶æ¸çï¼æ ééä¸ªæ§è¡<code>docker run</code>/<code>docker stop</code>ï¼</li>
<li><strong>éç½®ç»ä¸</strong>ï¼ææå®¹å¨éç½®éä¸­å¨ä¸ä¸ª yaml æä»¶ï¼æç¼è¾ãæå¤ä»½ï¼åç»­ä¿®æ¹åªéæ¹éç½®æä»¶ï¼æ éè®°å¤æå½ä»¤ï¼</li>
<li><strong>å®¹å¨èªå¨èå¨</strong>ï¼èªå¨åå»ºä¸å±ç½ç»ï¼å®¹å¨é´éè¿<strong>æå¡å</strong>å³å¯éä¿¡ï¼æ éæå¨éç½®ç½ç»ï¼å¯éè¿<code>depends_on</code>æ§å¶å¯å¨é¡ºåºï¼è§£å³æå¡ä¾èµé®é¢ï¼</li>
<li><strong>ç¯å¢ä¸è´æ§</strong>ï¼éç½®æä»¶å¯è·¨ç¯å¢å¤ç¨ï¼æ¬å°æµè¯ãæå¡å¨é¨ç½²ç¨åä¸å¥éç½®ï¼é¿å âæ¬å°è½è·ï¼æå¡å¨ä¸è¡âï¼</li>
<li><strong>æç»´æ¤æè¿ç§»</strong>ï¼é¡¹ç®ç®å½ + éç½®æä»¶ + ç¦»çº¿éååï¼å¯ç´æ¥è¿ç§»å°å¶ä»æå¡å¨ï¼è§£ååä¸é®å¯å¨ï¼æ ééæ°éç½®ï¼</li>
<li><strong>æ°æ®å· / ç½ç»èªå¨ç®¡ç</strong>ï¼èªå¨åå»ºæ°æ®å·ãèªå®ä¹ç½ç»ï¼æ éæå¨æ§è¡<code>docker volume create</code>/<code>docker network create</code>ã</li>
</ol>
<p>ç¸æ¯åå®¹å¨é¨ç½²ï¼Docker Compose è®©å¤æå¡å®¹å¨åé¨ç½²çæçæåæ°åï¼å°¤å¶éå<strong>åç«¯ + åç«¯ + æ°æ®åº + ç¼å­ + ä»£ç</strong>è¿ç±»å¤ç»ä»¶çé¡¹ç®é¨ç½²ï¼ä¹æ¯ç®åä¸­å°åé¡¹ç®å®¹å¨åçä¸»æµæ¹æ¡ã</p>
<h2 id="ä¸é¨ç½²ç¯å¢åå¤æåç¡®è®¤é¿ååç»­å¼å®¹é®é¢">ä¸ãé¨ç½²ç¯å¢åå¤ï¼æåç¡®è®¤ï¼é¿ååç»­å¼å®¹é®é¢ï¼</h2>
<h3 id="1-èææºç¯å¢ä¸ªäººæµè¯ç¨éçäº§">1. èææºç¯å¢ï¼ä¸ªäººæµè¯ç¨ï¼éçäº§ï¼</h3>
<ul>
<li>ç³»ç»ï¼CentOS 7.9ï¼æå°åå®è£ï¼å·²éç½®éæ IPï¼192.168.1.100ï¼èæ IPï¼æ¿æ¢çå® IPï¼</li>
<li>åå­ï¼4Gï¼å»ºè®®ä¸ä½äº 2Gï¼å¦å Docker å®¹å¨å¯å¨å¯è½å¡é¡¿ï¼</li>
<li>ç¡¬çï¼50Gï¼è¶³å¤å­æ¾éåãé¡¹ç®æä»¶åæ°æ®åºæ°æ®ï¼</li>
<li>ç½ç»ï¼è½è®¿é®å¤ç½ï¼åææåéå / å®è£ä¾èµç¨ï¼åæå¯æ­ç½è¿è¡ï¼</li>
</ul>
<h3 id="2-è½¯ä»¶çæ¬å¨ç¨ç»ä¸çæ¬é¿åå¼å®¹é®é¢">2. è½¯ä»¶çæ¬ï¼å¨ç¨ç»ä¸çæ¬ï¼é¿åå¼å®¹é®é¢ï¼</h3>
<ul>
<li>Dockerï¼Docker CE 24.0.7ï¼CentOS7 ç¨³å®çï¼</li>
<li>Docker Composeï¼V2.27.1ï¼è§£å³æ§çéç½®å¼å®¹é®é¢ï¼</li>
<li>åç«¯ï¼.NET 8ï¼æ¬å° VS2022 åå¸å° publish æä»¶å¤¹ï¼</li>
<li>åç«¯ï¼Vue3ï¼æ¬å° yarn æåå° dist æä»¶å¤¹ï¼</li>
<li>MySQLï¼8.0ï¼Docker éåï¼æ°æ®æä¹åï¼</li>
<li>Redisï¼7-alpineï¼è½»éçï¼éåå®¹å¨é¨ç½²ï¼</li>
<li>Nginxï¼alpineï¼è½»éçï¼ä»£çåç«¯éææä»¶ + åç«¯æ¥å£ï¼</li>
</ul>
<h3 id="3-æ¬å°åå¤æä»¶æåæåå¥½ä¸ä¼ å°èææº">3. æ¬å°åå¤æä»¶ï¼æåæåå¥½ï¼ä¸ä¼ å°èææºï¼</h3>
<ul>
<li>åç«¯ï¼publish æä»¶å¤¹ï¼VS2022 åå¸åç.NET8 é¡¹ç®æä»¶ï¼å«æ ¸å¿ dllãéç½®æä»¶ï¼</li>
<li>åç«¯ï¼dist æä»¶å¤¹ï¼Vue3 æååçéææä»¶ï¼å« index.htmlãcssãjsï¼</li>
<li>éå tar åï¼rdif-all-images.tarï¼ç¦»çº¿éååï¼å« MySQLãRedisãNginx ç­ 6 ä¸ªæééåï¼è§£å³ç½ç»æåè¶æ¶ï¼</li>
<li>éç½®æä»¶ï¼my.cnfï¼MySQL éç½®ï¼ãnginx.confï¼Nginx éç½®ï¼ãinit.sqlï¼MySQL åå§å SQLï¼ãdocker-compose.ymlï¼æ ¸å¿ç¼ææä»¶ï¼</li>
</ul>
<h2 id="äºåæåå¤å·¥ä½å¿åå¥ å®é¨ç½²åºç¡">äºãåæåå¤å·¥ä½ï¼å¿åï¼å¥ å®é¨ç½²åºç¡ï¼</h2>
<h3 id="1-centos7-ç³»ç»åºç¡éç½®æå°åå®è£è¡¥åä¾èµ">1. CentOS7 ç³»ç»åºç¡éç½®ï¼æå°åå®è£è¡¥åä¾èµï¼</h3>
<p>æå°åå®è£ç CentOS7 ç¼ºå°å¾å¤åºç¡å·¥å·ï¼åå®è£å¿è¦ä¾èµï¼é¿ååç»­ Docker å®è£ãå½ä»¤æ§è¡å¤±è´¥ï¼</p>
<pre><code class="language-bash"># æ´æ°ç³»ç»è½¯ä»¶åï¼å¯éï¼å»ºè®®æ§è¡ï¼é¿åä¾èµçæ¬è¿ä½ï¼
yum update -y

# å®è£åºç¡å·¥å·ï¼wgetãvimãnet-toolsç­ï¼åç»­å¸¸ç¨ï¼
yum install -y wget vim net-tools epel-release
</code></pre>
<h3 id="2-å®è£-docker-cecentos7-ç¨³å®çæ­¥éª¤åºå®">2. å®è£ Docker CEï¼CentOS7 ç¨³å®çï¼æ­¥éª¤åºå®ï¼</h3>
<p>CentOS7 é»è®¤æºæ²¡æ Dockerï¼éè¦éç½® Docker å®æ¹æºï¼åæ¶è§£å³ä¾èµç¼ºå¤±é®é¢ï¼éç¹è§£å³ container-selinux ä¾èµï¼ï¼</p>
<pre><code class="language-bash"># 1. å¸è½½æ§çæ¬Dockerï¼å¦æä¹åè£è¿ï¼é¿åå²çªï¼æ²¡è£è¿å¯è·³è¿ï¼
yum remove -y docker docker-client docker-client-latest docker-common docker-latest docker-latest-logrotate docker-logrotate docker-engine

# 2. å®è£Dockerä¾èµï¼å¿åï¼å¦åå®è£å¤±è´¥ï¼
yum install -y yum-utils device-mapper-persistent-data lvm2 container-selinux

# 3. éç½®Dockerå®æ¹æº
yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo

# 4. å®è£Docker CEï¼ç¨³å®çï¼
yum install -y docker-ce docker-ce-cli containerd.io

# 5. å¯å¨Dockeræå¡ï¼å¹¶è®¾ç½®å¼æºèªå¯ï¼æåéç½®ï¼åç»­ä¸ç¨åæ¹ï¼
systemctl start docker
systemctl enable docker

# 6. éªè¯Dockerå®è£æåï¼è¾åºçæ¬å·å³æåï¼
docker --version
</code></pre>
<p>â æåæ è¯ï¼<code>Docker version 24.0.7, build afdd53b</code></p>
<h3 id="3-éç½®-docker-éåå éå½åå¿åå¦åéåæåè¶æ¶">3. éç½® Docker éåå éï¼å½åå¿åï¼å¦åéåæåè¶æ¶ï¼</h3>
<p>Docker é»è®¤æåå®æ¹éåï¼å½å¤æºï¼ï¼å½åè®¿é®ææ¢ï¼çè³è¶æ¶ãè¿éç¨é¿éäºä¸ªäººä¸å±éåå éï¼æ¯å¬å±æºæ´ç¨³å®ï¼ï¼æ­¥éª¤å¦ä¸ï¼</p>
<ol>
<li>
<p>ç»å½é¿éäºå®ç½ï¼<a href="https://www.aliyun.com/%EF%BC%89%EF%BC%8C%E6%90%9C%E7%B4%A2" target="_blank" rel="noopener nofollow">https://www.aliyun.com/ï¼ï¼æç´¢</a> âå®¹å¨éåæå¡âï¼è¿å¥ âéåå éå¨âï¼å¤å¶èªå·±çä¸å±å éå°åï¼ç¤ºä¾ï¼<a href="https://xxxxxx.mirror.aliyuncs.com" target="_blank" rel="noopener nofollow">https://xxxxxx.mirror.aliyuncs.com</a>ï¼æ¿æ¢æèªå·±çï¼ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/157572/202602/157572-20260210093422503-1546470148.png" alt="éåå éå¨" loading="lazy"></p>
</li>
<li>
<p>éç½®éåå éï¼ä¿®æ¹ Docker å®æ¤è¿ç¨éç½®æä»¶ï¼</p>
</li>
</ol>
<pre><code class="language-bash"># åå»ºDockeréç½®ç®å½ï¼å¦æä¸å­å¨ï¼
mkdir -p /etc/docker

# åå¥å ééç½®ï¼æ¿æ¢æèªå·±çé¿éäºä¸å±å éå°åï¼
tee /etc/docker/daemon.json &lt;&lt;-'EOF'
{
  "registry-mirrors": ["https://xxxxxx.mirror.aliyuncs.com", "https://mirror.ccs.tencentyun.com"]
}
EOF

# éæ°å è½½éç½®ï¼éå¯Dockerï¼è®©å éçæ
systemctl daemon-reload
systemctl restart docker

# éªè¯å ééç½®æ¯å¦çæï¼è¾åºéç½®çå éå°åå³æåï¼
docker info | grep -A 2 "Registry Mirrors"
</code></pre>
<p>â æåæ è¯ï¼è¾åºä¸­åå«èªå·±éç½®çé¿éäºå éå°åã</p>
<h3 id="4-åçº§-docker-composeè§£å³æ§çéç½®å¼å®¹é®é¢">4. åçº§ Docker Composeï¼è§£å³æ§çéç½®å¼å®¹é®é¢ï¼</h3>
<p>CentOS7 é»è®¤å®è£ç Docker Compose æ¯ 1.x çæ¬ï¼ä¸æ¯ææ°ç docker-compose.yml ä¸­çéç½®ï¼å¦ conditionãstart_periodï¼ï¼åçº§å° V2 çæ¬ï¼å®æ¹æ¨èï¼ï¼</p>
<pre><code class="language-bash"># 1. å é¤æ§çdocker-composeï¼å¦æä¹åè£è¿ï¼
rm -f /usr/local/bin/docker-compose

# 2. å®è£Docker Compose V2ï¼æä»¶å½¢å¼ï¼ç¨³å®ï¼
yum install -y docker-compose-plugin

# 3. å»ºç«è½¯é¾æ¥ï¼ä¿ædocker-composeå½ä»¤å¯ç¨ï¼åæ§çç¨æ³ä¸è´ï¼
ln -s /usr/libexec/docker/cli-plugins/docker-compose /usr/local/bin/docker-compose

# 4. éªè¯åçº§æåï¼è¾åºV2çæ¬å·å³æåï¼
docker-compose --version
</code></pre>
<p>â æåæ è¯ï¼<code>Docker Compose version v2.27.1</code>ï¼çæ¬å·å¯ä¸åï¼</p>
<h3 id="5-å³é­é²ç«å¢æµè¯ç¯å¢é¿åç«¯å£è®¿é®å¤±è´¥">5. å³é­é²ç«å¢ï¼æµè¯ç¯å¢ï¼é¿åç«¯å£è®¿é®å¤±è´¥ï¼</h3>
<p>ä¸ªäººæµè¯ç¨ï¼ç´æ¥å³é­ CentOS7 ç FirewallD é²ç«å¢ï¼é¿ååç«¯ãåç«¯ãæ°æ®åºç«¯å£è¢«æ¦æªï¼çäº§ç¯å¢å¯æéå¼æ¾ç«¯å£ï¼</p>
<pre><code class="language-bash"># 1. ç«å³åæ­¢é²ç«å¢æå¡
systemctl stop firewalld

# 2. ç¦æ­¢é²ç«å¢å¼æºèªå¯ï¼é¿åèææºéå¯åé²ç«å¢åå¼å¯ï¼
systemctl disable firewalld

# 3. éªè¯é²ç«å¢ç¶æï¼è¾åºinactiveå³æåå³é­ï¼
systemctl status firewalld
</code></pre>
<h2 id="ä¸é¡¹ç®ç®å½ç»ææ´çè§èç®å½é¿ååç»­æ··ä¹±">ä¸ãé¡¹ç®ç®å½ç»ææ´çï¼è§èç®å½ï¼é¿ååç»­æ··ä¹±ï¼</h2>
<p>å°æ¬å°åå¤å¥½çæææä»¶ï¼ä¸ä¼ å° CentOS7 èææºç<code>/root/rdif-docker</code>ç®å½ï¼èªå®ä¹ç®å½ï¼æ¹ä¾¿è®°å¿ï¼ï¼æç»ç®å½ç»æå¦ä¸ï¼éç¹ï¼ååç«¯ä»ä¿çæå / åå¸æä»¶ï¼æ æºç ãæ å¤ä½æä»¶ï¼ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/157572/202602/157572-20260210093422563-1614578929.png" alt="é¡¹ç®ç®å½ç»æ" loading="lazy"></p>
<pre><code class="language-plaintext">rdif-docker/                 # é¡¹ç®æ ¹ç®å½ï¼æææä»¶é½æ¾å¨è¿éï¼
âââ docker-compose.yml       # æ ¸å¿ç¼ææä»¶ï¼ç®¡çææå®¹å¨
âââ backend/                 # åç«¯ç®å½ï¼ä»ä¿çVSåå¸çpublishï¼
â   âââ publish/             # .NET8åå¸æä»¶ï¼å«RDIF.WebHost.dllãappsettings.jsonï¼
âââ frontend/                # åç«¯ç®å½ï¼ä»ä¿çVue3æåçdistï¼
â   âââ dist/                # Vue3éææä»¶ï¼index.htmlãcssãjsãassetsï¼
âââ nginx/                   # Nginxéç½®ç®å½
â   âââ nginx.conf           # Nginxéç½®æä»¶ï¼ä»£çåç«¯+åç«¯æ¥å£ï¼
âââ mysql/                   # MySQLéç½®ç®å½
â   âââ my.cnf               # MySQLéç½®ï¼ä¸åºåå¤§å°åãå­ç¬¦éç­ï¼
â   âââ init.sql             # MySQLåå§åSQLï¼åå»ºåºãè¡¨ãåå§åæ°æ®ï¼
âââ rdif-all-images.tar      # ç¦»çº¿éååï¼å«æææééåï¼é¿åæåè¶æ¶ï¼
</code></pre>
<h3 id="ä¸ä¼ æä»¶æ¹æ³æ°ææ¨èå¯è§åæä½">ä¸ä¼ æä»¶æ¹æ³ï¼æ°ææ¨èï¼å¯è§åæä½ï¼</h3>
<p>ç¨ MobaXtermæXftp æ WinSCP å·¥å·ï¼è¿æ¥èææºï¼IPï¼192.168.1.100ï¼è´¦å·ï¼rootï¼å¯ç ï¼Root@123456ï¼èæå¯ç ï¼ï¼å°æ¬å°ç publishãdistãéç½®æä»¶ãéå tar åï¼æå°å¯¹åºç®å½ä¸å³å¯ã</p>
<h2 id="åç¼å-docker-composeymlæ ¸å¿éç½®éä¸­ä¹é">åãç¼å docker-compose.ymlï¼æ ¸å¿éç½®ï¼éä¸­ä¹éï¼</h2>
<p>è¿æ¯æ´ä¸ªé¨ç½²çæ ¸å¿ï¼ææå®¹å¨ï¼MySQLãRedisãåç«¯ãNginxï¼çèå¨ãç«¯å£æ å°ãç®å½æè½½ï¼é½å¨è¿ééç½®ãç»åæ¬æ¬¡éæ±ï¼ååç«¯å·²æå / åå¸ï¼æ éç¼è¯æå»ºï¼ï¼ç¼åå¦ä¸éç½®ï¼æ³¨éè¯¦ç»ï¼å¯ç´æ¥å¤å¶ä¿®æ¹ï¼æ¿æ¢èªå·±çå¯¹åºä¿¡æ¯ï¼<strong>Redis å¯ç å·²æ¿æ¢ä¸ºéç¨èæå¯ç </strong>ï¼ï¼</p>
<pre><code class="language-yaml">version: '3.8'

# æææå¡çéå
services:
  # 1. MySQL8 æå¡ï¼æ°æ®åºï¼æ°æ®æä¹åï¼
  mysql:
    image: mysql:8.0                # ä½¿ç¨çéåï¼æ¬å°å·²å¯¼å¥ï¼æ éæåï¼
    container_name: rdif-mysql      # èªå®ä¹å®¹å¨åï¼æ¹ä¾¿ç®¡ç
    restart: always                 # å®¹å¨å¼å¸¸éåº/ Dockerå¯å¨æ¶ï¼èªå¨éå¯
    environment:
      MYSQL_ROOT_PASSWORD: Root@123456   # MySQL rootå¯ç ï¼èæï¼æ¿æ¢æèªå·±çï¼
      MYSQL_USER: guosisoft         # é¡¹ç®è®¿é®MySQLçç¨æ·åï¼èªå®ä¹ï¼
      MYSQL_PASSWORD: Mysql@123456  # é¡¹ç®è®¿é®MySQLçå¯ç ï¼èæï¼
      MYSQL_DATABASE: rdif_vue3     # é¡¹ç®æç¨æ°æ®åºåï¼èªå®ä¹ï¼
      MYSQL_TZINFO_TO_SYS_TABLES: 1 # åå§åMySQLæ¶åºè¡¨ï¼è§£å³æ¶å·®é®é¢
      TZ: Asia/Shanghai             # å¼ºå¶å®¹å¨æ¶åºä¸ºä¸å«åºï¼æ ¸å¿ï¼è§£å³æ¶å·®ï¼
    ports:
      - "3306:3306"                 # ç«¯å£æ å°ï¼å®¿ä¸»æº3306 â å®¹å¨å3306ï¼æ¬å°å·¥å·å¯è¿æ¥ï¼
    volumes:
      # æè½½MySQLéç½®æä»¶ï¼å®ç°èªå®ä¹éç½®
      - ./mysql/my.cnf:/etc/mysql/conf.d/my.cnf
      # æè½½åå§åSQLï¼å®¹å¨å¯å¨æ¶èªå¨æ§è¡ï¼åå»ºåºè¡¨
      - ./mysql/init.sql:/docker-entrypoint-initdb.d/init.sql
      # æè½½æ°æ®å·ï¼æä¹åMySQLæ°æ®ï¼docker-compose downä¸ä¼å é¤æ°æ®ï¼
      - mysql-data:/var/lib/mysql
      # æè½½å®¿ä¸»æºæ¶åºæä»¶ï¼åéä¿éæ¶åºåæ­¥ï¼åªè¯»ï¼é¿åå®¹å¨ä¿®æ¹ï¼
      - /etc/localtime:/etc/localtime:ro
      - /etc/timezone:/etc/timezone:ro
    command: --lower_case_table_names=1 # MySQLä¸åºåå¤§å°åï¼é¿åé¡¹ç®è¡¨åå¤§å°åé®é¢ï¼
    networks:
      - rdif-network                # å å¥èªå®ä¹ç½ç»ï¼å®ç°å®¹å¨é´éä¿¡
    # å¥åº·æ£æ¥ï¼æ£æµMySQLæ¯å¦çæ­£å°±ç»ªï¼é¿ååç«¯å¯å¨æ©äºMySQL
    healthcheck:
      test: ["CMD", "mysqladmin", "ping", "-h", "localhost", "-uguosisoft", "-pMysql@123456"]
      interval: 5s                  # æ¯5ç§æ£æµä¸æ¬¡
      timeout: 30s                  # è¶æ¶æ¶é´30ç§
      retries: 10                   # éè¯10æ¬¡ï¼å¤±è´¥åè®¤ä¸ºå®¹å¨æªå°±ç»ª
      start_period: 20s             # å®¹å¨å¯å¨åï¼å»¶è¿20ç§å¼å§æ£æµ

  # 2. Redis æå¡ï¼ç¼å­ï¼è½»éçï¼å¯ç å·²æ¿æ¢ä¸ºèæéç¨å¯ç ï¼
  redis:
    image: redis:7-alpine           # è½»éçRedisï¼å ç¨èµæºå°
    container_name: rdif-redis      # èªå®ä¹å®¹å¨å
    restart: always                 # èªå¨éå¯
    ports:
      - "6379:6379"                 # ç«¯å£æ å°ï¼å®¿ä¸»æº6379 â å®¹å¨å6379
    volumes:
      - redis-data:/data            # æ°æ®å·æä¹åRedisæ°æ®
    command: redis-server --requirepass "Redis@123456" # Redisèæå¯ç ï¼æ¿æ¢æèªå·±çå¤æå¯ç 
    networks:
      - rdif-network                # å å¥èªå®ä¹ç½ç»
    environment:
      TZ: Asia/Shanghai             # åæ­¥ä¸å«åºæ¶åº

  # 3. .NET8 åç«¯æå¡ï¼å·²åå¸ï¼ç´æ¥æè½½è¿è¡ï¼Redisè¿æ¥å¯ç åæ­¥æ¿æ¢ï¼
  backend:
    image: mcr.microsoft.com/dotnet/aspnet:8.0 # .NET8è¿è¡æ¶éåï¼æ éæå»ºï¼
    container_name: rdif-backend    # èªå®ä¹å®¹å¨å
    restart: always                 # èªå¨éå¯
    ports:
      - "58588:58588"               # ç«¯å£æ å°ï¼å®¿ä¸»æº58588 â å®¹å¨å58588ï¼åç«¯æ¥å£ç«¯å£ï¼
    depends_on:
      mysql:
        condition: service_healthy  # ä»å¨MySQLå¥åº·æ£æ¥éè¿ï¼å°±ç»ªï¼åï¼æå¯å¨åç«¯
      redis:
        condition: service_started  # Rediså¯å¨åï¼å³å¯å¯å¨åç«¯
    volumes:     
      # æ ¸å¿ï¼æè½½æ¬å°publishå°å®¹å¨ç/appç®å½
      - ./backend/publish:/app
      # å®¿ä¸»æºï¼/wwwroot/Resources â å®¹å¨åï¼/wwwroot/Resources
      - /wwwroot/Resources:/wwwroot/Resources
    environment:
      TZ: Asia/Shanghai             # åæ­¥ä¸å«åºæ¶åº
      ASPNETCORE_URLS: "http://*:58588" # å¼ºå¶.NET8å®¹å¨åçå¬58588ç«¯å£ï¼è§£å³ç«¯å£ä¸éï¼
      ASPNETCORE_ENVIRONMENT: Production # .NETç¯å¢ï¼çäº§ç¯å¢ï¼
      # MySQLè¿æ¥å­ç¬¦ä¸²ï¼æ¿æ¢æèªå·±çç¨æ·åãå¯ç ãæ°æ®åºåï¼serverç¨å®¹å¨åmysqlï¼
      ConnectionStrings__MySQL: "server=mysql;port=3306;database=rdif_vue3;user=guosisoft;password=Mysql@123456;charset=utf8mb4;AllowPublicKeyRetrieval=True;SslMode=None"
      # Redisè¿æ¥å­ç¬¦ä¸²ï¼serverç¨å®¹å¨åredisï¼å¯ç åæ­¥æ¿æ¢ä¸ºèæå¯ç ï¼
      ConnectionStrings__Redis: "redis:6379,password=Redis@123456,defaultDatabase=0,ssl=false,abortConnect=false"
    working_dir: /app               # å®¹å¨å·¥ä½ç®å½ï¼æåæè½½çpublishç®å½
    entrypoint: ["dotnet", "RDIF.WebHost.dll"] # å¯å¨åç«¯æ ¸å¿dllï¼æ¿æ¢æèªå·±çdllåï¼
    networks:
      - rdif-network                # å å¥èªå®ä¹ç½ç»

  # 4. Nginx æå¡ï¼ä»£çåç«¯éææä»¶+åç«¯æ¥å£ï¼
  nginx:
    image: nginx:alpine             # è½»éçNginx
    container_name: rdif-nginx      # èªå®ä¹å®¹å¨å
    restart: always                 # èªå¨éå¯
    ports:
      - "6866:6866"                 # ç«¯å£æ å°ï¼å®¿ä¸»æº6866 â å®¹å¨å6866ï¼åç«¯è®¿é®ç«¯å£ï¼
    volumes:
      # æè½½Nginxéç½®æä»¶ï¼å®ç°åç«¯ä»£çåæ¥å£è½¬å
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf
      # æè½½åç«¯distç®å½ï¼Nginxç´æ¥ä»£çéææä»¶ï¼æ ¸å¿ï¼
      - ./frontend/dist:/usr/share/nginx/html
    depends_on:
      - backend                     # åç«¯å¯å¨åï¼åå¯å¨Nginx
    networks:
      - rdif-network                # å å¥èªå®ä¹ç½ç»
    environment:
      TZ: Asia/Shanghai             # åæ­¥ä¸å«åºæ¶åº

# æ°æ®å·ï¼æä¹åMySQLåRedisæ°æ®ï¼docker-compose downä¸ä¼å é¤ï¼
volumes:
  mysql-data:
  redis-data:

# èªå®ä¹ç½ç»ï¼ææå®¹å¨å å¥åä¸ç½ç»ï¼å®ç°å®¹å¨é´éä¿¡ï¼ç¨å®¹å¨åå³å¯è®¿é®ï¼
networks:
  rdif-network:
    driver: bridge
</code></pre>
<h3 id="å³é®éç½®è¯´æå¿çé¿åè¸©å">å³é®éç½®è¯´æï¼å¿çï¼é¿åè¸©åï¼</h3>
<ol>
<li>ææå®¹å¨é½éç½®äº<code>restart: always</code>ï¼éå Docker å¼æºèªå¯ï¼å®ç°èææºéå¯åæææå¡èªå¨å¯å¨ï¼</li>
<li>åç«¯éç½®<code>ASPNETCORE_URLS: "http://*:58588"</code>ï¼å¼ºå¶çå¬ 58588 ç«¯å£ï¼åç«¯å£æ å°ä¸è´ï¼è§£å³.NET8 é»è®¤çå¬ 8080 å¯¼è´çç«¯å£ä¸éï¼</li>
<li>MySQL è¿æ¥å­ç¬¦ä¸²ä¸­ï¼<code>server=mysql</code>ï¼ç¨å®¹å¨åï¼ï¼èéèææº IPï¼å®¹å¨é´éä¿¡å¿é¡»è¿æ ·éç½®ï¼è¡¥å<code>AllowPublicKeyRetrieval=True;SslMode=None</code>ï¼è§£å³å®¹å¨åè¿æ¥ MySQL å¤±è´¥ï¼</li>
<li>ææå®¹å¨é½éç½®<code>TZ: Asia/Shanghai</code>ï¼åæ­¥ä¸å«åºæ¶åºï¼è§£å³ MySQL æ¶å·® 8 å°æ¶é®é¢ï¼</li>
<li>åç«¯<code>depends_on</code>éç½®äº<code>condition: service_healthy</code>ï¼ç¡®ä¿ MySQL å®å¨å°±ç»ªååå¯å¨åç«¯ï¼é¿ååç«¯å¯å¨æ¶ MySQL æªåå§åå®æå¯¼è´çè¿æ¥å¤±è´¥ï¼</li>
<li>ææææå¯ç ï¼MySQL/Redisï¼åä¸ºèæç¤ºä¾ï¼å®éé¨ç½²è¯·æ¿æ¢ä¸º<strong>å­æ¯ + æ°å­ + ç¹æ®ç¬¦å·</strong>çå¤æå¯ç ï¼æåå®å¨æ§ã</li>
</ol>
<h2 id="äºæ¬å°æåéåå¹¶æåä¸º-tarç¦»çº¿æ¹æ¡åç½®æ­¥éª¤å³é®">äºãæ¬å°æåéåå¹¶æåä¸º tarï¼ç¦»çº¿æ¹æ¡åç½®æ­¥éª¤ï¼å³é®ï¼ï¼</h2>
<p>æ¬æ¬¡é¨ç½²éç¨<strong>ç¦»çº¿éåå¯¼å¥</strong>æ¹æ¡ï¼è§£å³æå¡å¨ç½ç»æåè¶æ¶é®é¢ï¼ï¼éå¨<strong>æ¬å°è½æ­£å¸¸èç½ççµè</strong>ä¸æåæåæææééåï¼åæåä¸º tar æä»¶ï¼æåä¸ä¼ å° CentOS æå¡å¨ã</p>
<h3 id="51-æ¬å°æåéåçåææ¡ä»¶">5.1 æ¬å°æåéåçåææ¡ä»¶</h3>
<p>æ¬å°çµèï¼Windows/macOSï¼éå®è£<strong>Docker Desktop</strong>ï¼Docker æ¡é¢çï¼ï¼åç½® Docker å¼æåéåç®¡çåè½ï¼æ¯æ¬å°æä½ Docker çå¿å¤å·¥å·ï¼</p>
<ul>
<li>ä¸è½½å°åï¼<a href="https://www.docker.com/products/docker-desktop/" target="_blank" rel="noopener nofollow">https://www.docker.com/products/docker-desktop/</a></li>
<li>å®è£åéªè¯ï¼æå¼ Docker Desktopï¼å¯å¨åå¨æ¬å°ç»ç«¯ï¼CMD/PowerShell/ ç»ç«¯ï¼æ§è¡<code>docker --version</code>ï¼è¾åºçæ¬å·å³å®è£æåï¼</li>
<li>å³é®è®¾ç½®ï¼Docker Desktop ä¸­éç½®<strong>éåå é</strong>ï¼åæå¡å¨ç«¯ä¸è´ï¼é¿éäº / ç½æäºåå¯ï¼ï¼é¿åæ¬å°æåéåè¶æ¶ã</li>
</ul>
<h3 id="52-æ¬å°ç»ç«¯æåæ¬æ¬¡é¨ç½²æææééå">5.2 æ¬å°ç»ç«¯æåæ¬æ¬¡é¨ç½²æææééå</h3>
<p>æå¼æ¬å°ç»ç«¯ï¼Windows ç¨ PowerShell/CMDï¼macOS/Linux ç¨ç»ç«¯ï¼ï¼æ§è¡ä»¥ä¸<code>docker pull</code>å½ä»¤ï¼éä¸ªæåéåï¼ææ¬æ¬¡é¨ç½²ççæ¬å·æåï¼ç¡®ä¿çæ¬ä¸è´ï¼ï¼</p>
<pre><code class="language-bash"># 1. æåMySQL8.0éå
docker pull mysql:8.0
# 2. æåRedis7è½»éçéå
docker pull redis:7-alpine
# 3. æå.NET8è¿è¡æ¶éåï¼åç«¯è¿è¡ä¾èµï¼
docker pull mcr.microsoft.com/dotnet/aspnet:8.0
# 4. æåNginxè½»éçéå
docker pull nginx:alpine
</code></pre>
<p>â æåæåéªè¯ï¼æ¬å°ç»ç«¯æ§è¡<code>docker images</code>ï¼è½çå°ä»¥ä¸ 4 ä¸ªéåï¼æ æ¥éå³æåå®æã</p>
<p><img src="https://img2024.cnblogs.com/blog/157572/202602/157572-20260210093422507-1702697897.png" alt="4 ä¸ªéå" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/157572/202602/157572-20260210093422557-1102222342.png" alt="docker images" loading="lazy"></p>
<h3 id="53-æ¬å°å°éåæåä¸º-tar-æä»¶åéå--æ¹ééåä¸¤ç§æ¹å¼">5.3 æ¬å°å°éåæåä¸º tar æä»¶ï¼åéå / æ¹ééåä¸¤ç§æ¹å¼ï¼</h3>
<p>æåéåæ<strong>åéåæå</strong>å<strong>æ¹ééåæå</strong>ä¸¤ç§æ¹å¼ï¼æ¨è<strong>æ¹éæåä¸ºä¸ä¸ª tar æä»¶</strong>ï¼æ¹ä¾¿ä¸ä¼ åæå¡å¨å¯¼å¥ï¼ï¼ä»¥ä¸ä¸¤ç§æ¹å¼åæä¾ä»£ç ç¤ºä¾ã</p>
<h4 id="æ¹å¼-1æ¹éæåææéåä¸ºä¸ä¸ª-tar-æä»¶æ¨èä¸æ¬¡å¯¼å¥ææ">æ¹å¼ 1ï¼æ¹éæåææéåä¸ºä¸ä¸ª tar æä»¶ï¼æ¨èï¼ä¸æ¬¡å¯¼å¥ææï¼</h4>
<p>å°æææåçéåæåä¸ºä¸ä¸ªç»ä¸ç tar æä»¶ï¼ç¤ºä¾ï¼rdif-all-images.tarï¼ï¼æ¾å¨æ¬å°<strong>ææ¾å°çç®å½</strong>ï¼å¦æ¡é¢ï¼ï¼æ§è¡å½ä»¤åååæ¢å°ç®æ ç®å½ï¼å¦ Windows æ¡é¢ç®å½ï¼ï¼</p>
<pre><code class="language-bash"># Windows PowerShellåæ¢å°æ¡é¢ç®å½ï¼ç¤ºä¾ï¼å¯æ¿æ¢ä¸ºèªå·±çç®å½ï¼
cd C:\Users\ä½ çç¨æ·å\Desktop

# æ¹éæåéåä¸ºrdif-all-images.tarï¼æ ¸å¿å½ä»¤ï¼åå«æææééåï¼
docker save -o rdif-all-images.tar mysql:8.0 redis:7-alpine mcr.microsoft.com/dotnet/aspnet:8.0 nginx:alpine
</code></pre>
<ul>
<li>å³é®åæ°ï¼<code>-o</code> æå®è¾åºç tar æä»¶ååè·¯å¾ï¼åé¢è·<strong>ææéè¦æåçéååï¼çæ¬</strong>ï¼ç¨ç©ºæ ¼åéã</li>
</ul>
<h4 id="æ¹å¼-2åä¸ªéååç¬æåæéä½¿ç¨éååç¬æ´æ°éå">æ¹å¼ 2ï¼åä¸ªéååç¬æåï¼æéä½¿ç¨ï¼éååç¬æ´æ°éåï¼</h4>
<p>å¦æåç»­åªéæ´æ°æä¸ªéåï¼å¦ä»æ´æ° MySQLï¼ï¼å¯åç¬æåè¯¥éåï¼å½ä»¤å¦ä¸ï¼</p>
<pre><code class="language-bash"># æåMySQL8.0ä¸ºåç¬çtaræä»¶
docker save -o mysql_8.0.tar mysql:8.0
# æåRedis7-alpineä¸ºåç¬çtaræä»¶
docker save -o redis_7_alpine.tar redis:7-alpine
# æå.NET8è¿è¡æ¶ä¸ºåç¬çtaræä»¶
docker save -o dotnet_aspnet_8.0.tar mcr.microsoft.com/dotnet/aspnet:8.0
# æåNginx-alpineä¸ºåç¬çtaræä»¶
docker save -o nginx_alpine.tar nginx:alpine
</code></pre>
<h3 id="54-éªè¯æ¬å°æåæå">5.4 éªè¯æ¬å°æåæå</h3>
<p>æåå®æåï¼å¨æ¬å°ç®æ ç®å½ï¼å¦æ¡é¢ï¼è½çå°çæç tar æä»¶ï¼å¦ rdif-all-images.tarï¼ï¼æä»¶å¤§å°çº¦ 2-3Gï¼æ­£å¸¸å¤§å°ï¼ï¼å³æåæåï¼åç»­ç¨ MobaXterm/Xftp/WinSCP å°è¯¥ tar æä»¶ä¸ä¼ å° CentOS æå¡å¨ç<code>/root/rdif-docker</code>ç®å½å³å¯ã</p>
<p><img src="https://img2024.cnblogs.com/blog/157572/202602/157572-20260210093422376-1797960651.png" alt="CentOS æå¡å¨ç" loading="lazy"></p>
<h2 id="å­æå¡å¨ç«¯æ ¸å¿é¨ç½²æ­¥éª¤ç¦»çº¿å¯¼å¥éå--å¯å¨æå¡">å­ãæå¡å¨ç«¯æ ¸å¿é¨ç½²æ­¥éª¤ï¼ç¦»çº¿å¯¼å¥éå + å¯å¨æå¡ï¼</h2>
<h3 id="61-ç¦»çº¿å¯¼å¥éåè§£å³ç½ç»æåè¶æ¶æ ¸å¿æ­¥éª¤">6.1 ç¦»çº¿å¯¼å¥éåï¼è§£å³ç½ç»æåè¶æ¶ï¼æ ¸å¿æ­¥éª¤ï¼</h3>
<p>å°æ¬å°æåå¥½çéå tar æä»¶ä¸ä¼ å°æå¡å¨åï¼æ§è¡ä»¥ä¸å½ä»¤ç¦»çº¿å¯¼å¥ï¼æ éåèç½æåï¼</p>
<pre><code class="language-bash"># 1. è¿å¥é¡¹ç®æ ¹ç®å½ï¼ç¡®ä¿éåtaråå¨è¯¥ç®å½ä¸ï¼
cd /root/rdif-docker

# 2. æ¥çéåtaråæ¯å¦å­å¨ï¼è½çå°rdif-all-images.tarå³æ­£å¸¸ï¼
ls -l

# 3. ç¦»çº¿å¯¼å¥ææéåï¼èå¿ç­å¾ï¼çº¦1-2åéï¼éååçº¦2-3Gï¼
docker load -i rdif-all-images.tar

# 4. éªè¯éåå¯¼å¥æåï¼è½çå°4ä¸ªæééåå³æ­£å¸¸ï¼
docker images
</code></pre>
<p>â æåæ è¯ï¼<code>docker images</code>è¾åºä¸­åå«<code>mysql:8.0</code>ã<code>redis:7-alpine</code>ã<code>nginx:alpine</code>ã<code>mcr.microsoft.com/dotnet/aspnet:8.0</code>ç­éåã</p>
<p><img src="https://img2024.cnblogs.com/blog/157572/202602/157572-20260210093422367-1290821445.png" alt="rdif-docker" loading="lazy"></p>
<h3 id="62-å¯å¨æææå¡æ ¸å¿å½ä»¤ä¸é®å¯å¨">6.2 å¯å¨æææå¡ï¼æ ¸å¿å½ä»¤ï¼ä¸é®å¯å¨ï¼</h3>
<p>ææéç½®ååå¤å·¥ä½å®æåï¼æ§è¡ä»¥ä¸å½ä»¤ï¼ä¸é®å¯å¨ææå®¹å¨ï¼æ éæå¨éä¸ªå¯å¨ï¼</p>
<pre><code class="language-bash"># è¿å¥é¡¹ç®æ ¹ç®å½ï¼å¿é¡»å¨docker-compose.ymlæå¨ç®å½æ§è¡ï¼
cd /root/rdif-docker

# åå°å¯å¨æææå¡ï¼-dï¼åå°è¿è¡ï¼æ éæå»ºï¼å ä¸ºååç«¯å·²æåï¼
docker-compose up -d

# æ¥çæææå¡è¿è¡ç¶æï¼æææå¡Stateåæ¾ç¤ºUpå³æ­£å¸¸ï¼
docker-compose ps
</code></pre>
<p>â æåæ è¯ï¼<code>docker-compose ps</code>è¾åºä¸­ï¼mysqlãredisãbackendãnginx åä¸ªæå¡ç State ååä¸º<code>Up (healthy)</code>æ<code>Up</code>ã</p>
<p><img src="https://img2024.cnblogs.com/blog/157572/202602/157572-20260210093422483-1638354417.png" alt="docker-compose ps" loading="lazy"></p>
<h3 id="63-éªè¯æå¡å¯å¨æåéä¸ªéªè¯ç¡®ä¿æ é®é¢">6.3 éªè¯æå¡å¯å¨æåï¼éä¸ªéªè¯ï¼ç¡®ä¿æ é®é¢ï¼</h3>
<p>å¯å¨åï¼éä¸ªéªè¯åç«¯ãåç«¯ãæ°æ®åºãRedis æ¯å¦æ­£å¸¸ï¼é¿ååç»­ä½¿ç¨æ¶åºç°é®é¢ï¼</p>
<h4 id="1éªè¯åç«¯æå¡swagger-è®¿é®æ ¸å¿">ï¼1ï¼éªè¯åç«¯æå¡ï¼Swagger è®¿é®ï¼æ ¸å¿ï¼</h4>
<p>.NET8 åç«¯é»è®¤éæ Swaggerï¼è®¿é®å°åï¼<code>http://192.168.1.100:58588/swagger/index.html</code>ï¼æ¿æ¢æèªå·±çèææº IP ååç«¯ç«¯å£ï¼</p>
<ul>
<li>
<p>â æåæ è¯ï¼æµè§å¨è½æ­£å¸¸æå¼ Swagger é¡µé¢ï¼æ æ¥éï¼è½çå°æææ¥å£ï¼</p>
</li>
<li>
<p>â å¤±è´¥ææ¥ï¼å¦ææä¸å¼ï¼æ§è¡<code>docker-compose logs -f backend</code>ï¼æ¥çåç«¯å®æ¶æ¥å¿ï¼ææ¥é®é¢ï¼å¦ç«¯å£çå¬éè¯¯ãMySQL è¿æ¥å¤±è´¥ï¼ã</p>
</li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/157572/202602/157572-20260210093422711-690050077.png" alt="Swagger" loading="lazy"></p>
<h4 id="2éªè¯åç«¯æå¡éæé¡µé¢è®¿é®">ï¼2ï¼éªè¯åç«¯æå¡ï¼éæé¡µé¢è®¿é®ï¼</h4>
<p>åç«¯ç± Nginx ä»£çï¼è®¿é®å°åï¼<code>http://192.168.1.100:6866</code>ï¼æ¿æ¢æèªå·±çèææº IP ååç«¯ç«¯å£ï¼</p>
<ul>
<li>
<p>â æåæ è¯ï¼æµè§å¨è½æ­£å¸¸æå¼ Vue3 åç«¯é¡µé¢ï¼æ ·å¼ãå¾çæ­£å¸¸æ¾ç¤ºï¼</p>
</li>
<li>
<p>â å¤±è´¥ææ¥ï¼æä¸å¼åæ¥ç Nginx æ¥å¿ï¼å½ä»¤ï¼<code>docker-compose logs -f nginx</code>ï¼æ£æ¥ Nginx éç½®æ¯å¦æ­£ç¡®ãdist ç®å½æ¯å¦æè½½æåã</p>
</li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/157572/202602/157572-20260210093422720-1858789771.png" alt="åç«¯é¡µé¢" loading="lazy"></p>
<h4 id="3éªè¯-mysql-æå¡æ¬å°å·¥å·è¿æ¥">ï¼3ï¼éªè¯ MySQL æå¡ï¼æ¬å°å·¥å·è¿æ¥ï¼</h4>
<p>ç¨ Navicat æ DBeaver ç­æ¬å°æ°æ®åºå·¥å·ï¼è¿æ¥èææºä¸ç MySQLï¼</p>
<ul>
<li>ä¸»æºï¼192.168.1.100ï¼èææº IPï¼</li>
<li>ç«¯å£ï¼3306</li>
<li>ç¨æ·åï¼guosisoftï¼èªå®ä¹ç MySQL ç¨æ·åï¼</li>
<li>å¯ç ï¼Mysql@123456ï¼èªå®ä¹çå¯ç ï¼</li>
<li>æ°æ®åºï¼rdif_vue3ï¼èªå®ä¹çæ°æ®åºåï¼</li>
<li>â æåæ è¯ï¼è½æ­£å¸¸è¿æ¥ï¼è½çå° init.sql åå§åçåºãè¡¨åæ°æ®ã</li>
</ul>
<h4 id="4éªè¯-redis-æå¡å¯éæééªè¯">ï¼4ï¼éªè¯ Redis æå¡ï¼å¯éï¼æééªè¯ï¼</h4>
<p>ç¨ Redis å®¢æ·ç«¯å·¥å·ï¼å¦ Another Redis Desktop Managerï¼ï¼è¿æ¥èææºä¸ç Redisï¼</p>
<ul>
<li>ä¸»æºï¼192.168.1.100ï¼èææº IPï¼</li>
<li>ç«¯å£ï¼6379</li>
<li>å¯ç ï¼Redis@123456ï¼èªå®ä¹ç Redis å¯ç ï¼</li>
<li>â æåæ è¯ï¼è½æ­£å¸¸è¿æ¥ï¼è½æ§è¡ setãget ç­å½ä»¤ã</li>
</ul>
<h2 id="ä¸é¨ç½²è¿ç¨ä¸­éå°çååè§£å³æ¹æ¡éç¹é¿åæå">ä¸ãé¨ç½²è¿ç¨ä¸­éå°çååè§£å³æ¹æ¡ï¼éç¹ï¼é¿åæåï¼</h2>
<p>è¿é¨åæ¯æ ¸å¿ï¼è®°å½äºæé¨ç½²è¿ç¨ä¸­éå°çææé®é¢ï¼æ¯ä¸ªé®é¢é½æè¯¦ç»çææ¥è¿ç¨åè§£å³æ¹æ¡ï¼äº²æµææï¼å¸®ä½ å°èµ°å¼¯è·¯ã</p>
<h3 id="å-1docker-éåæåè¶æ¶æç¤º-dial-tcp--io-timeout">å 1ï¼Docker éåæåè¶æ¶ï¼æç¤º âdial tcp ... i/o timeoutâ</h3>
<ul>
<li>ç°è±¡ï¼æ§è¡<code>docker pull mysql:8.0</code>æ<code>docker-compose up -d</code>æ¶ï¼æåéåè¶æ¶ï¼æç¤ºè®¿é®<code>registry-1.docker.io</code>å¤±è´¥ï¼</li>
<li>ææ¥ï¼èææºè½ ping éç¾åº¦ï¼å¤ç½æ­£å¸¸ï¼ï¼éåå ééç½®ä¹çæï¼ä½ä»æåè¶æ¶ï¼æ¨æµæ¯èææºç½ç»æéæ§éå¶ï¼å¦åç½æ¦æªï¼ï¼</li>
<li>è§£å³æ¹æ¡ï¼éç¨<strong>ç¦»çº¿å¯¼å¥éåæ¹æ¡</strong>ï¼åæ 5ã6 å°èå·²è¯¦ç»è¯´æï¼ï¼å¨æ¬å°è½èç½ççµèä¸æåéåãæåæ tar åï¼ä¸ä¼ å°æå¡å¨åç¨<code>docker load -i</code>å¯¼å¥ï¼å½»åºè·³è¿ç½ç»æåã</li>
</ul>
<h3 id="å-2åç«¯æå¡å¯å¨æåä½è®¿é®http192168110058588æä¸å¼-swagger">å 2ï¼åç«¯æå¡å¯å¨æåï¼ä½è®¿é®<code>http://192.168.1.100:58588</code>æä¸å¼ Swagger</h3>
<ul>
<li>
<p>ç°è±¡ï¼<code>docker-compose ps</code>æ¾ç¤º backend æå¡æ¯ Up ç¶æï¼ä½æµè§å¨è®¿é®åç«¯å°åæä¸å¼ï¼æ¥çåç«¯æ¥å¿ï¼æ¾ç¤º<code>Now listening on: http://[::]:8080</code>ï¼</p>
</li>
<li>
<p>ææ¥ï¼åç«¯å®¹å¨é»è®¤çå¬ 8080 ç«¯å£ï¼ä½ docker-compose.yml ä¸­æ å°çæ¯ 58588:58588ï¼ç«¯å£ä¸å¹éï¼å¯¼è´è®¿é®ä¸éï¼</p>
</li>
<li>
<p>è§£å³æ¹æ¡ï¼å¨ backend æå¡ç environment ä¸­ï¼æ·»å <code>ASPNETCORE_URLS: "http://*:58588"</code>ï¼å¼ºå¶.NET8 å®¹å¨åçå¬ 58588 ç«¯å£ï¼åç«¯å£æ å°ä¸è´ï¼éå¯åç«¯å®¹å¨å³å¯ã</p>
</li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/157572/202602/157572-20260210093422720-938480573.png" alt="ASPNETCORE_URLS" loading="lazy"></p>
<h3 id="å-3åç«¯æ¥å¿æç¤º-unable-to-connect-to-any-of-the-specified-mysql-hosts">å 3ï¼åç«¯æ¥å¿æç¤º âUnable to connect to any of the specified MySQL hostsâ</h3>
<ul>
<li>
<p>ç°è±¡ï¼åç«¯å¯å¨åï¼æ¥å¿æç»­æ¥éï¼æ æ³è¿æ¥ MySQLï¼ä½æ¬å° Navicat è½æ­£å¸¸è¿æ¥èææºä¸ç MySQLï¼</p>
</li>
<li>
<p>ææ¥ï¼æ¬å°è½è¿æ¥ï¼è¯´æ MySQL ç«¯å£æ å°æ­£å¸¸ï¼åç«¯å®¹å¨å MySQL å®¹å¨å¨åä¸ Docker ç½ç»ï¼åºè¯¥ç¨å®¹å¨åï¼mysqlï¼è®¿é®ï¼èéèææº IPï¼ææ¥ååç°è¿æ¥å­ç¬¦ä¸²æ­£ç¡®ï¼ä½åç«¯å¯å¨æ©äº MySQL åå§åå®æï¼</p>
</li>
<li>
<p>è§£å³æ¹æ¡ï¼</p>
<ol>
<li>ç» MySQL æå¡æ·»å å¥åº·æ£æ¥ï¼åæ docker-compose.yml ä¸­ç healthcheck éç½®ï¼ï¼æ£æµ MySQL æ¯å¦çæ­£å°±ç»ªï¼</li>
<li>åç«¯æå¡ç depends_on ä¸­ï¼æ·»å <code>condition: service_healthy</code>ï¼ç¡®ä¿ MySQL å¥åº·æ£æ¥éè¿åï¼åå¯å¨åç«¯ï¼</li>
<li>ç» MySQL è¿æ¥å­ç¬¦ä¸²è¡¥å<code>AllowPublicKeyRetrieval=True;SslMode=None</code>ï¼è§£å³å®¹å¨åè¿æ¥ MySQL çå¬é¥æ£ç´¢å SSL éå¶ã</li>
</ol>
</li>
</ul>
<h3 id="å-4æ§è¡docker-compose-downæç¤ºéç½®æ æunsupported-config-option-for-servicesbackend-condition">å 4ï¼æ§è¡<code>docker-compose down</code>æç¤ºéç½®æ æï¼âUnsupported config option for services.backend: 'condition'â</h3>
<ul>
<li>ç°è±¡ï¼æ§è¡ docker-compose å½ä»¤æ¶ï¼æç¤ºéç½®æ æï¼ä¸æ¯æ<code>condition</code>å<code>start_period</code>ï¼</li>
<li>ææ¥ï¼æ¥ç docker-compose çæ¬ï¼åç°æ¯ 1.x çæ¬ï¼ä¸æ¯ææ°çéç½®é¡¹ï¼</li>
<li>è§£å³æ¹æ¡ï¼åçº§ Docker Compose å° V2 çæ¬ï¼åæäºã4 å°èå·²è¯¦ç»è¯´æï¼ï¼åçº§åå³å¯æ¯æææéç½®ã</li>
</ul>
<h3 id="å-5mysql-å®¹å¨æ¶é´æ¯åäº¬æ¶é´æ¢-8-å°æ¶">å 5ï¼MySQL å®¹å¨æ¶é´æ¯åäº¬æ¶é´æ¢ 8 å°æ¶</h3>
<ul>
<li>
<p>ç°è±¡ï¼MySQL ä¸­æ¥è¯¢å½åæ¶é´ï¼<code>select now();</code>ï¼ï¼æ¯åäº¬æ¶é´æ¢ 8 å°æ¶ï¼å½±åé¡¹ç®æ¶é´ç¸å³åè½ï¼</p>
</li>
<li>
<p>ææ¥ï¼Docker å®¹å¨é»è®¤ä½¿ç¨ UTC ä¸çæ åæ¶é´ï¼å½åä½¿ç¨ä¸å«åºï¼CSTï¼ï¼ä¸¤èç¸å·® 8 å°æ¶ï¼</p>
</li>
<li>
<p>è§£å³æ¹æ¡ï¼</p>
<ol>
<li>
<p>ç» MySQL æå¡æ·»å ç¯å¢åé<code>TZ: Asia/Shanghai</code>ï¼å¼ºå¶å®¹å¨æ¶åºä¸ºä¸å«åºï¼æ ¸å¿ï¼ï¼</p>
</li>
<li>
<p>æè½½å®¿ä¸»æºçæ¶åºæä»¶ï¼<code>/etc/localtime:/etc/localtime:ro</code>ï¼ï¼åéä¿éæ¶åºåæ­¥ï¼</p>
</li>
<li>
<p>ç»åç«¯ãNginxãRedis å®¹å¨ä¹æ·»å ç¸åç<code>TZ</code>ç¯å¢åéï¼å®ç°å¨æå¡æ¶é´ç»ä¸ï¼</p>
</li>
<li>
<p>éå»º MySQL å®¹å¨ï¼ç¯å¢åéä¿®æ¹åï¼åçº¯ restart ä¸çæï¼é<code>docker-compose stop mysql &amp;&amp; docker-compose rm -f mysql &amp;&amp; docker-compose up -d mysql</code>ï¼ã</p>
</li>
</ol>
</li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/157572/202602/157572-20260210102245661-1868000854.png" alt="MySQL æå¡æ·»å ç¯å¢åéTZ" loading="lazy"></p>
<h3 id="å-6èææºéå¯åææ-docker-æå¡é½éè¦æå¨å¯å¨">å 6ï¼èææºéå¯åï¼ææ Docker æå¡é½éè¦æå¨å¯å¨</h3>
<ul>
<li>ç°è±¡ï¼èææºéå¯åï¼Docker æå¡åææå®¹å¨é½åæ­¢äºï¼éè¦æå¨æ§è¡<code>systemctl start docker</code>å<code>docker-compose up -d</code>ï¼</li>
<li>ææ¥ï¼Docker æå¡æªè®¾ç½®å¼æºèªå¯ï¼å®¹å¨ç<code>restart: always</code>éç½®ï¼éè¦ Docker æå¡å¯å¨åæä¼çæï¼</li>
<li>è§£å³æ¹æ¡ï¼è®¾ç½® Docker æå¡å¼æºèªå¯ï¼å½ä»¤ï¼<code>systemctl enable docker</code>ï¼åç»­èææºéå¯åï¼Docker ä¼èªå¨å¯å¨ï¼ææå®¹å¨ä¹ä¼èªå¨åå°å¯å¨ã</li>
</ul>
<h3 id="å-7æ¬å°æåéååæå¡å¨å¯¼å¥æç¤º-no-such-image">å 7ï¼æ¬å°æåéååï¼æå¡å¨å¯¼å¥æç¤º âno such imageâ</h3>
<ul>
<li>ç°è±¡ï¼æ§è¡<code>docker load -i rdif-all-images.tar</code>æ¶ï¼æç¤ºéåä¸å­å¨ï¼</li>
<li>ææ¥ï¼æ¬å°æåçéåçæ¬åæå¡å¨ docker-compose.yml ä¸­éç½®ççæ¬ä¸ä¸è´ï¼ææåæ¶éååæ¼åéè¯¯ï¼</li>
<li>è§£å³æ¹æ¡ï¼æ¬å°æ§è¡<code>docker images</code>ç¡®è®¤éåååçæ¬ï¼ç¡®ä¿å docker-compose.yml ä¸­å®å¨ä¸è´ï¼éæ°æåå¹¶ä¸ä¼ ã</li>
</ul>
<h3 id="å-8èææºéå¯åipåæ´é®é¢">å 8ï¼èææºéå¯åIPåæ´é®é¢</h3>
<p>é¦åæ¥çæ¬å°ç½ç»éç½®ï¼å¦ä¸åèï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/157572/202602/157572-20260210093422554-35499731.png" alt="æ¬å°ç½ç»éç½®" loading="lazy"></p>
<p>èææºç½ç»ééå¨è®¾ç½®ä¸ºæ¡¥æ¥æ¨¡å¼ã</p>
<p><img src="https://img2024.cnblogs.com/blog/157572/202602/157572-20260210093422517-1315584570.png" alt="æ¡¥æ¥æ¨¡å¼" loading="lazy"></p>
<p>å¨linuxä¸­æ§è¡å½ä»¤ï¼</p>
<pre><code class="language-bash">vim /etc/sysconfig/network-scripts/ifcfg-ens33
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/157572/202602/157572-20260210093422595-392661691.png" alt="" loading="lazy"></p>
<p>ä¿å­åéå¯ç½ç»æå¡</p>
<pre><code class="language-bash">systemctl restart network
</code></pre>
<h2 id="å«å¸¸ç¨-dockercompose-ç®¡çå½ä»¤æ¥å¸¸è¿ç»´å¿å¤">å«ãå¸¸ç¨ Docker/Compose ç®¡çå½ä»¤ï¼æ¥å¸¸è¿ç»´å¿å¤ï¼</h2>
<p>é¨ç½²å®æåï¼æ¥å¸¸ç»´æ¤ãæéï¼é½ä¼ç¨å°ä»¥ä¸å½ä»¤ï¼æ´çå¥½æ¾å¨è¿éï¼æ¹ä¾¿åç»­ä½¿ç¨ï¼ææå½ä»¤åäº²æµå¯ç¨ï¼ã</p>
<h3 id="ä¸docker-åºç¡å½ä»¤å¨å±éç¨">ï¼ä¸ï¼Docker åºç¡å½ä»¤ï¼å¨å±éç¨ï¼</h3>
<pre><code class="language-bash"># 1. Dockeræå¡ç®¡çï¼æ ¸å¿ï¼å¼æºèªå¯/å¯åï¼
systemctl start docker        # å¯å¨Dockeræå¡
systemctl stop docker         # åæ­¢Dockeræå¡
systemctl restart docker      # éå¯Dockeræå¡
systemctl enable docker       # Dockerå¼æºèªå¯ï¼æ°¸ä¹çæï¼
systemctl disable docker      # å³é­Dockerå¼æºèªå¯
systemctl status docker       # æ¥çDockeræå¡ç¶æ
systemctl is-enabled docker   # æ£æ¥Dockeræ¯å¦å¼æºèªå¯ï¼è¾åºenabledåæ¯ï¼

# 2. å®¹å¨ç®¡çï¼æ¥å¸¸æéãå¯åå¸¸ç¨ï¼
docker ps                     # æ¥ç**è¿è¡ä¸­**çå®¹å¨
docker ps -a                  # æ¥ç**ææ**å®¹å¨ï¼è¿è¡+åæ­¢ï¼
docker start &lt;å®¹å¨å/ID&gt;       # å¯å¨æå®å®¹å¨ï¼ç¨å®¹å¨åï¼æ´æ¹ä¾¿ï¼
docker stop &lt;å®¹å¨å/ID&gt;        # åæ­¢æå®å®¹å¨
docker restart &lt;å®¹å¨å/ID&gt;     # éå¯æå®å®¹å¨ï¼å¦åç«¯å®¹å¨ï¼docker restart rdif-backendï¼
docker rm &lt;å®¹å¨å/ID&gt;          # å é¤æå®åæ­¢çå®¹å¨
docker rm -f &lt;å®¹å¨å/ID&gt;       # å¼ºå¶å é¤**è¿è¡ä¸­**çå®¹å¨ï¼è°¨æä½¿ç¨ï¼
docker exec -it &lt;å®¹å¨å/ID&gt; /bin/bash  # è¿å¥å®¹å¨äº¤äºç»ç«¯ï¼Alpineéåç¨shæ¿ä»£/bin/bashï¼
docker logs &lt;å®¹å¨å/ID&gt;       	# æ¥çå®¹å¨æ¥å¿ï¼ææ°ï¼
docker logs -f &lt;å®¹å¨å/ID&gt;   		# å®æ¶æ¥çå®¹å¨æ¥å¿ï¼æéæ ¸å¿ï¼éç¹ï¼
docker logs --tail 100 &lt;å®¹å¨å/ID&gt; # æ¥çå®¹å¨æå100è¡æ¥å¿

# 3. éåç®¡çï¼ç¦»çº¿å¯¼å¥/æåå¸¸ç¨ï¼
docker images                 # æ¥çæ¬å°ææéå
docker rmi &lt;éåå/ID&gt;         # å é¤æå®éåï¼æ å®¹å¨ä¾èµæ¶ï¼
docker rmi -f &lt;éåå/ID&gt;      # å¼ºå¶å é¤éåï¼å¿½ç¥å®¹å¨ä¾èµï¼è°¨æï¼å¦ï¼docker rmi -f mysql:8.0ï¼
docker load -i &lt;éåtarå&gt;    # ç¦»çº¿å¯¼å¥éåï¼å¦ï¼docker load -i rdif-all-images.tarï¼
docker save -o &lt;è¾åºtarå&gt; &lt;éåå&gt; # æåæ¬å°éåä¸ºtaråï¼å¦ï¼docker save -o mysql8.tar mysql:8.0ï¼
docker pull &lt;éåå:çæ¬&gt;      # æåè¿ç¨éå
docker system prune -f        # æ¸çæ ç¨å®¹å¨/éå/ç¼å­ï¼æ é£é©ï¼æ¨èå®ææ§è¡ï¼

# 4. æ°æ®å·/ç½ç»ç®¡çï¼æ¬æ¬¡èªå¨åå»ºï¼æéæ¥çï¼
docker volume ls              # æ¥çææDockeræ°æ®å·ï¼ä¿å­MySQL/Redisæ°æ®ï¼
docker network ls             # æ¥çææDockerç½ç»ï¼æ¬æ¬¡ä¸ºrdif-networkï¼
</code></pre>
<h3 id="äºdocker-compose-å½ä»¤é¡¹ç®ç®¡çæ ¸å¿éå¨é¡¹ç®æ ¹ç®å½æ§è¡">ï¼äºï¼Docker Compose å½ä»¤ï¼é¡¹ç®ç®¡çæ ¸å¿ï¼éå¨é¡¹ç®æ ¹ç®å½æ§è¡ï¼</h3>
<pre><code class="language-bash"># 1. æ ¸å¿å¯åå½ä»¤ï¼æå¸¸ç¨ï¼
docker-compose up -d          # åå°å¯å¨æææå¡ï¼æ æå»ºï¼æ¬æ¬¡æ ¸å¿ç¨ï¼
docker-compose up -d --build  # åå°å¯å¨+æå»ºéåï¼æDockerfileæ¶ç¨ï¼
docker-compose down           # åæ­¢å¹¶å é¤ææå®¹å¨ï¼ä¿çæ°æ®å·/éåï¼å®å¨ï¼
docker-compose stop           # ä»åæ­¢ææå®¹å¨ï¼ä¸å é¤ï¼å®¹å¨ä»å­å¨ï¼
docker-compose start          # å¯å¨å·²åæ­¢çææå®¹å¨
docker-compose restart        # éå¯æææå¡ï¼éç½®æªæ¹æ¶ç¨ï¼
docker-compose restart backend # éå¯æå®æå¡ï¼å¦åç«¯ï¼æ ééå¯æææå¡ï¼

# 2. ç¶æ/æ¥å¿æ¥çï¼æéå¸¸ç¨ï¼
docker-compose ps             # æ¥çæææå¡è¿è¡ç¶æï¼çæ¯å¦Upï¼
docker-compose logs -f        # å®æ¶æ¥çæææå¡æ¥å¿
docker-compose logs -f &lt;æå¡å&gt; # å®æ¶æ¥çæå®æå¡æ¥å¿ï¼å¦docker-compose logs -f backendï¼å®æ¶æ¥çåç«¯æ¥å¿ï¼æééç¹ï¼

# 3. å¶ä»å¸¸ç¨
docker-compose config         # éªè¯docker-compose.ymléç½®è¯­æ³æ¯å¦æ­£ç¡®ï¼é¿åéç½®éè¯¯ï¼
docker-compose rm &lt;æå¡å&gt;     # å é¤æå®åæ­¢çæå¡å®¹å¨

</code></pre>
<h2 id="ä¹å¼æºèªå¯éç½®æ éæå¨å¹²é¢èææºéå¯èªå¨æ¢å¤">ä¹ãå¼æºèªå¯éç½®ï¼æ éæå¨å¹²é¢ï¼èææºéå¯èªå¨æ¢å¤ï¼</h2>
<p>åé¢å·²ç»æå°ï¼è¿éååç¬æ´çä¸éï¼ç¡®ä¿èææºéå¯åï¼æææå¡èªå¨å¯å¨ï¼æ éæå¨æä½ï¼</p>
<pre><code class="language-bash"># 1. ç¡®ä¿Dockeræå¡å¼æºèªå¯ï¼å·²éç½®ï¼åæ¬¡éªè¯ï¼
systemctl enable docker
systemctl is-enabled docker   # è¾åºenabledå³æå

# 2. éªè¯å®¹å¨èªå¨éå¯ç­ç¥ï¼docker-compose.ymlå·²éç½®restart: alwaysï¼
docker-compose config | grep -i restart # è¾åº4ä¸ªrestart: alwayså³æ­£å¸¸

# 3. æµè¯éªè¯ï¼å¯éï¼æå¨éå¯èææºï¼
reboot # éå¯èææºï¼éæ°è¿æ¥åï¼ç´æ¥è®¿é®æå¡ï¼ç¡®è®¤è½æ­£å¸¸æå¼
</code></pre>
<p>â æåæ è¯ï¼èææºéå¯åï¼æ éæ§è¡ä»»ä½å½ä»¤ï¼<code>docker-compose ps</code>æ¾ç¤ºæææå¡é½æ¯ Up ç¶æï¼åç«¯ãåç«¯ãSwagger é½è½æ­£å¸¸è®¿é®ã</p>
<h2 id="åååç«¯æ´æ°æ¹æ³æ¥å¸¸ç»´æ¤ç®åé«æ">åãååç«¯æ´æ°æ¹æ³ï¼æ¥å¸¸ç»´æ¤ï¼ç®åé«æï¼</h2>
<p>åç»­éè¦æ´æ°åç«¯æåç«¯ä»£ç æ¶ï¼æ ééæ°é¨ç½²æ´ä¸ªç¯å¢ï¼ç´æ¥æ¿æ¢æå / åå¸æä»¶ï¼éå¯å¯¹åºæå¡å³å¯ï¼æ­¥éª¤å¦ä¸ï¼</p>
<h3 id="1-åç«¯æ´æ°vs2022-éæ°åå¸å">1. åç«¯æ´æ°ï¼VS2022+ éæ°åå¸åï¼</h3>
<ol>
<li>æ¬å° VS2022+ éæ°åå¸.NET8 é¡¹ç®ï¼çææ°ç publish æä»¶å¤¹ï¼</li>
<li>ç¨ Xftp å·¥å·ï¼å°æ°ç publish æä»¶å¤¹ï¼è¦çæå¡å¨<code>/root/rdif-docker/backend/</code>ä¸çæ§ publish æä»¶å¤¹ï¼</li>
<li>éå¯åç«¯å®¹å¨ï¼æ´æ°çæï¼</li>
</ol>
<pre><code class="language-bash">cd /root/rdif-docker
docker-compose restart backend
</code></pre>
<h3 id="2-åç«¯æ´æ°vue3-éæ°æåå">2. åç«¯æ´æ°ï¼Vue3 éæ°æååï¼</h3>
<ol>
<li>æ¬å° Vue3 é¡¹ç®éæ°æåï¼yarn build/npm run buildï¼ï¼çææ°ç dist æä»¶å¤¹ï¼</li>
<li>ç¨ Xftp å·¥å·ï¼å°æ°ç dist æä»¶å¤¹ï¼è¦çæå¡å¨<code>/root/rdif-docker/frontend/</code>ä¸çæ§ dist æä»¶å¤¹ï¼</li>
<li>éå¯ Nginx å®¹å¨ï¼æ´æ°çæï¼</li>
</ol>
<pre><code class="language-bash">cd /root/rdif-docker
docker-compose restart nginx
</code></pre>
<h2 id="åä¸æ»ç»ä¸æ³¨æäºé¡¹æåæéé¿åæ¶å°¾">åä¸ãæ»ç»ä¸æ³¨æäºé¡¹ï¼æåæéï¼é¿åæ¶å°¾ï¼</h2>
<h3 id="æ»ç»">æ»ç»</h3>
<p>æ¬æ¬¡é¨ç½²åºäº<strong>Docker Compose</strong>å®ç°äº.NET8 åç«¯ï¼å·²åå¸ï¼+Vue åç«¯ï¼å·²æåï¼+MySQL8+Redis+Nginx çæ´å¥å¤æå¡å®¹å¨åé¨ç½²ï¼å¨ç¨äº²æµå¯å¤ç°ï¼æ ¸å¿äº®ç¹ï¼</p>
<ol>
<li>éç¨<strong>ç¦»çº¿éåå¯¼å¥</strong>æ¹æ¡ï¼è§£å³æå¡å¨ç½ç»æåéåè¶æ¶é®é¢ï¼éæ¬å°æå + æåå®æ´æ­¥éª¤ï¼æ°æä¹è½ä¸æï¼</li>
<li>ååç«¯æ éå®¹å¨åç¼è¯æå»ºï¼ç´æ¥æè½½æ¬å°æå / åå¸æä»¶ï¼å¯å¨æ´å¿«ãæ´æ°æ´æ¹ä¾¿ï¼éåå·²å®ææ¬å°å¼åçé¡¹ç®ï¼</li>
<li>è§£å³äº<strong>ç«¯å£ä¸éãMySQL è¿æ¥å¤±è´¥ãæ¶åºæ¶å·®ãå®¹å¨å¯å¨é¡ºåºãéç½®å¼å®¹ãå¼æºèªå¯</strong>ç­ 6 å¤§æ ¸å¿é®é¢ï¼éè¯¦ç»é¿åæ¹æ¡ï¼</li>
<li>ææéç½®éä¸­å¨<code>docker-compose.yml</code>ï¼ä¸é®å¯åãæç»´æ¤ãæè¿ç§»ï¼èææºéå¯åæå¡èªå¨æ¢å¤ï¼æ éæå¨å¹²é¢ï¼</li>
<li>å¨ç¨éç¨è½»éçéåï¼alpineï¼ï¼éä½æå¡å¨èµæºå ç¨ï¼éåä¸ªäººæµè¯ / å°åé¡¹ç®é¨ç½²ã</li>
</ol>
<h3 id="æ³¨æäºé¡¹éç¹é¿åçäº§ç¯å¢å¿ç">æ³¨æäºé¡¹ï¼éç¹é¿åï¼çäº§ç¯å¢å¿çï¼</h3>
<ol>
<li>
<p><strong>çæ¬å¼ºä¸è´</strong>ï¼æ¬å°æåçéåçæ¬ãdocker-compose.yml ä¸­çéåçæ¬ãåç«¯ / åç«¯çè¿è¡ä¾èµçæ¬ï¼å¿é¡»å®å¨ä¸è´ï¼é¿åå¼å®¹é®é¢ï¼</p>
</li>
<li>
<p><strong>å®¹å¨é´éä¿¡è§å</strong>ï¼åä¸ Docker èªå®ä¹ç½ç»åï¼æå¡é´è®¿é®<strong>å¿é¡»ç¨å®¹å¨å / æå¡å</strong>ï¼å¦åç«¯è¿ MySQL ç¨<code>server=mysql</code>ï¼ï¼èéæå¡å¨ IPï¼æ¬å°å·¥å·ï¼Navicat/Redis å®¢æ·ç«¯ï¼è¿æ¥æç¨æå¡å¨ IPï¼</p>
</li>
<li>
<p><strong>ç¯å¢åéä¿®æ¹è§å</strong>ï¼ä¿®æ¹å®¹å¨çç¯å¢åéï¼å¦ TZãASPNETCORE_URLSãå¯ç ï¼åï¼<strong>å¿é¡»éå»ºå®¹å¨</strong>ï¼<code>stop+rm+up -d</code>ï¼ï¼åçº¯<code>restart</code>ä¸ä¼å è½½æ°éç½®ï¼</p>
</li>
<li>
<p><strong>æ°æ®æä¹å</strong>ï¼MySQL/Redis æ°æ®éè¿ Docker<strong>æ°æ®å·</strong>æä¹åï¼<code>docker-compose down</code>ä¸ä¼å é¤æ°æ®å·ï¼ä½æå¨æ§è¡<code>docker volume rm</code>ä¼ä¸¢å¤±æ°æ®ï¼è°¨ææä½ï¼</p>
</li>
<li>
<p><strong>ææä¿¡æ¯ä¿æ¤</strong>ï¼æ¬æä¸­ç IPãå¯ç ãéåå éå°ååä¸ºèæç¤ºä¾ï¼å®éé¨ç½²è¯·<strong>æ¿æ¢ä¸ºèªå·±ççå®ä¿¡æ¯</strong>ï¼å¹¶è®¾ç½®å¤æå¯ç ï¼å­æ¯ + æ°å­ + ç¹æ®ç¬¦å·ï¼ï¼</p>
</li>
<li>
<p>çäº§ç¯å¢ä¼å</p>
<p>ï¼æ¬æä¸ºä¸ªäººæµè¯ç¯å¢</p>
<p>éç½®ï¼çäº§ç¯å¢éåä»¥ä¸ä¼åï¼</p>
<ul>
<li>å¼å¯é²ç«å¢ï¼ä»å¼æ¾é¡¹ç®æéç«¯å£ï¼6866/58588/3306ï¼ï¼æ§è¡<code>firewall-cmd --add-port=ç«¯å£/tcp --permanent &amp;&amp; firewall-cmd --reload</code>ï¼</li>
<li>ç¦ç¨ root è´¦å·ç´æ¥ç»å½ï¼åå»ºæ®éç¨æ·å¹¶èµäº Docker æä½æéï¼</li>
<li>éç½® SSL è¯ä¹¦ï¼å®ç° HTTPS è®¿é®ï¼</li>
<li>å¯¹ MySQL/Redis åä¸»ä»å¤å¶ / éç¾¤ï¼æåå¯ç¨æ§ï¼</li>
</ul>
</li>
<li>
<p><strong>æéæ ¸å¿æè·¯</strong>ï¼ä»»ä½æå¡å¯å¨å¤±è´¥ãè®¿é®ä¸éï¼<strong>ä¼åæ¥çå®¹å¨æ¥å¿</strong>ï¼<code>docker-compose logs -f æå¡å</code>ï¼ï¼æ¥å¿æ¯å®ä½é®é¢çæç´æ¥ä¾æ®ï¼</p>
</li>
</ol>
<p><img src="https://img2024.cnblogs.com/blog/157572/202602/157572-20260210093422691-908014533.png" alt="æ¥çå®¹å¨æ¥å¿" loading="lazy"></p>
<ol start="8">
<li><strong>éåå¤ä»½</strong>ï¼æå¡å¨ç«¯çç¦»çº¿éå tar åå»ºè®®ä¿çï¼åç»­æå¡å¨éè£å¯ç´æ¥å¯¼å¥ï¼æ ééæ°æ¬å°æåã</li>
</ol>
<p>æ´ä¸ªé¨ç½²è¿ç¨è½ç¶è¸©äºä¸å°åï¼ä½æ ¸å¿é®é¢é½æ¯å¿½ç¥äº<strong>å®¹å¨åçç»è</strong>ï¼å¦ç«¯å£å¹éãæ¶åºéç½®ãå®¹å¨éä¿¡è§åãå¯å¨é¡ºåºï¼ï¼åªè¦ææ­¥éª¤åå¥½éç½®ãéä¸éªè¯ï¼å°±è½é¡ºå©å®æé¨ç½²ãDocker Compose çç¼æè½åè®©å¤æå¡é¨ç½²åå¾ç®åï¼ä¹æ¯åç«¯å¼åå¿å¤çæè½ä¹ä¸ã</p>
<p>å¸æè¿ç¯è¯¦ç»çé¨ç½²è®°å½ï¼è½å¸®å°æåæ ·éæ±çæåï¼å°èµ°å¼¯è·¯ï¼é«æå®æ.NET8+Vue é¡¹ç®ç Docker å®¹å¨åé¨ç½²ãå¦æå¤§å®¶å¨é¨ç½²è¿ç¨ä¸­éå°å¶ä»é®é¢ï¼æ¬¢è¿å¨è¯è®ºåºçè¨ï¼ä¸èµ·äº¤æµè§£å³ï½</p>
<h2 id="åäºç»è¯­">åäºãç»è¯­</h2>
<p>å¦ææ¬æå¯¹ä½ æä¸ç¹ç¹å¸®å©ï¼ç¹ä¸ªèµæ¯æä¸ä¸å§ï¼ä½ çæ¯ä¸ä¸ªãèµãé½æ¯æåä½çæå¤§å¨å _</p>
<p>æ´å¤ææ¯æç« è¯·å¾:</p>
<p><a href="http://www.guosisoft.com/article" target="_blank" rel="noopener nofollow">http://www.guosisoft.com/article</a></p>
<p><a href="http://www.rdiframework.net/article" target="_blank" rel="noopener nofollow">http://www.rdiframework.net/article</a></p>
<p>å¤§å®¶ä¸èµ·å±åäº¤æµåè¿æ­¥å!!</p>


</div>
<div id="MySignature" role="contentinfo">
    <span style="font-size:10pt;">
</span>
<p>
	<br>
</p>
<p style="background-color:#f8f8ee;font-family:å¾®è½¯éé»;font-size:12px;" id="mySignature">
	<span style="font-size:10pt;">ä½èï¼</span>
	<strong>
		<span style="color:red;font-size:12px;">
			<a href="http://www.guosisoft.com/" target="_blank">
				<span>
					<span style="font-size:10pt;">RDIF</span>
				</span>
			</a>
		</span>
	</strong>
	<br>
	<span style="font-size:10pt;">åºå¤ï¼</span>
	<a href="http://www.cnblogs.com/huyong/" target="_blank">
		<span style="font-size:10pt;">http://www.cnblogs.com/huyong/</span>
	</a>
	<br>
	<span style="font-size:10pt;">Emailï¼</span>
	<a href="mailto:406590790@qq.com" target="_blank">
		<span style="font-size:10pt;">406590790@qq.com</span>
	</a>
	<br>
	<span style="font-size:10pt;">QQï¼</span>
	<span style="font-size:10pt;">406590790</span>
	<br>
	<span style="font-size:10pt;">å¾®ä¿¡ï¼</span>
	<span style="font-size:10pt;">13005007127(åææºå·)</span>
	<br>
	<span style="font-size:10pt;">æ¡æ¶å®ç½ï¼</span>  
   <a href="http://www.guosisoft.com/" target="_blank">
		<span style="font-size:10pt;">http://www.guosisoft.com/</span>
	</a>
  &nbsp;&nbsp;&nbsp;
	<a href="http://www.rdiframework.net/" target="_blank">
		<span style="font-size:10pt;">http://www.rdiframework.net/</span>
	</a>
	<br>
	<span style="font-size:10pt;">æ¡æ¶å¶ä»åå®¢ï¼</span>
	<a href="http://blog.csdn.net/chinahuyong" target="_blank">
		<span style="font-size:10pt;">http://blog.csdn.net/chinahuyong</span>
	</a>
	<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	<a href="http://www.cnblogs.com/huyong" target="_blank">
		<span style="font-size:10pt;">http://www.cnblogs.com/huyong</span>
	</a>
	<br>
	<a href="http://www.guosisoft.com/" target="_blank">
		<span style="font-size:10pt;">å½æRDIFå¼åæ¡æ¶</span>
	</a>ï¼
	<span style="font-size:10pt;color:#FFFFFF;background-color:#009900;">ç»ç¨æ·åå¼åèæä½³ç.Netæ¡æ¶å¹³å°æ¹æ¡ï¼ä¸ºä¼ä¸å¿«éæå»ºè·¨å¹³å°ãä¼ä¸çº§çåºç¨æä¾å¼ºå¤§æ¯æã</span>
	<br>
	<span style="font-size:10pt;">å³äºä½èï¼ç³»ç»æ¶æå¸ãä¿¡æ¯ç³»ç»é¡¹ç®ç®¡çå¸ãDBAãä¸æ³¨äºå¾®è½¯å¹³å°é¡¹ç®æ¶æãç®¡çåä¼ä¸è§£å³æ¹æ¡ï¼å¤å¹´é¡¹ç®å¼åä¸ç®¡çç»éªï¼æ¾å¤æ¬¡ç»ç»å¹¶å¼åå¤ä¸ªå¤§åé¡¹ç®ï¼å¨é¢åå¯¹è±¡ãé¢åæå¡ä»¥åæ°æ®åºé¢åæä¸å®çé è¯£ãç°ä¸»è¦ä»äºåºäº</span>
	<a href="http://www.guosisoft.com/" target="_blank">
		<span style="font-size:10pt;">RDIF</span>
	</a>
	<span style="font-size:10pt;">æ¡æ¶çææ¯å¼åãå¨è¯¢å·¥ä½ï¼ä¸»è¦æå¡äºéèãå»çå«çãéè·¯ãçµä¿¡ãç©æµãç©èç½ãå¶é ãé¶å®ç­è¡ä¸ã</span>
	<br>
	<span style="font-size:10pt;">å¦æé®é¢æå»ºè®®ï¼è¯·å¤å¤èµæï¼</span>
	<br>
	<span style="font-size:10pt;">æ¬æçæå½ä½èåCNBLOGSåå®¢å±æï¼æ¬¢è¿è½¬è½½ï¼ä½æªç»ä½èåæå¿é¡»ä¿çæ­¤æ®µå£°æï¼ä¸å¨æç« é¡µé¢ææ¾ä½ç½®ç»åºåæè¿æ¥ï¼å¦æé®é¢ï¼å¯ä»¥éè¿å¾®ä¿¡ãé®ç®±ãQQç­èç³»æï¼éå¸¸æè°¢ã</span>
</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.003472222222222222" data-date-updated="2026-02-10 10:23">2026-02-10 10:18</span>&nbsp;
<a href="https://www.cnblogs.com/huyong">.NETå¿«éå¼åæ¡æ¶</a>&nbsp;
éè¯»(<span id="post_view_count">244</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19598103);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19598103', targetLink: 'https://www.cnblogs.com/huyong/p/19598103', title: 'Linux Docker Compose é¨ç½².NET+Vue+MySQL+Redis+Nginx å®æ´è®°å½ï¼äº²æµæ åï¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ æè§£ OpenDeepWiki ç Agent Skills æºå¶ï¼ä» SKILL.md å° AI å·¥å·è°ç¨çå®æ´é¾è·¯ ]]></title>
    <link>https://www.cnblogs.com/token-ai/p/19598343</link>
    <guid>a817e8fbeff52a44bd6dd5a59cc9446d</guid>
    <description>
    <![CDATA[ 
        <div class="postTitle">
            <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/token-ai/p/19598343" title="åå¸äº 2026-02-10 10:15">
    <span role="heading" aria-level="2">æè§£ OpenDeepWiki ç Agent Skills æºå¶ï¼ä» SKILL.md å° AI å·¥å·è°ç¨çå®æ´é¾è·¯</span>
    

</a>

        </div>
        <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>æè¿å¨è¯» OpenDeepWiki çæºç ï¼åç°å®å®ç°äºä¸å¥æºæææç Skill æ©å±ä½ç³»ãç®åè¯´å°±æ¯ï¼ä½ åä¸ä¸ª <code>SKILL.md</code> æä»¶ï¼æåæ ZIP ä¸ä¼ ï¼ç³»ç»å°±è½æå®åæ AI Agent å¯è°ç¨çå·¥å·ãæ´ä¸ªè¿ç¨æ¶åæä»¶è§£æãæ°æ®åºæä¹åãè¿è¡æ¶å·¥å·æ³¨å¥ç­å¤ä¸ªç¯èï¼è¿ç¯æç« æè¿æ¡é¾è·¯ä»å¤´å°å°¾æä¸éã</p>
<h2 id="ä¸åææ¸æ¥-skill-æ¯ä»ä¹">ä¸ãåææ¸æ¥ Skill æ¯ä»ä¹</h2>
<p>OpenDeepWiki ç Skill éµå¾ª <a href="https://agentskills.io" target="_blank" rel="noopener nofollow">agentskills.io</a> å¼æ¾æ åï¼Anthropic æåºç Agent Skills è§èï¼ãä¸ä¸ª Skill æ¬è´¨ä¸å°±æ¯ä¸ä¸ªæä»¶å¤¹ï¼æ ¸å¿æ¯ä¸ä¸ª <code>SKILL.md</code> æä»¶ï¼éé¢ç¨ YAML frontmatter å£°æåæ°æ®ï¼æ­£æé¨åæ¯ç» AI ç prompt æä»¤ã</p>
<p>ä¸ä¸ªå¸åç Skill æä»¶å¤¹é¿è¿æ ·ï¼</p>
<pre><code>code-review/
âââ SKILL.md          # æ ¸å¿æä»¶ï¼frontmatter + prompt
âââ scripts/          # å¯éï¼è¾å©èæ¬
âââ references/       # å¯éï¼åèèµæ
âââ assets/           # å¯éï¼éæèµæº
</code></pre>
<p><code>SKILL.md</code> çæ ¼å¼å¤§æ¦æ¯ï¼</p>
<pre><code class="language-markdown">---
name: code-review
description: å¯¹ä»£ç è¿è¡æ·±åº¦å®¡æ¥ï¼åç°æ½å¨é®é¢åæ¹è¿å»ºè®®
license: MIT
compatibility: "gpt-4, claude-3"
allowed-tools: "read_file search_code"
metadata:
  author: token
  version: 1.0.0
---

ä½ æ¯ä¸ä¸ªä»£ç å®¡æ¥ä¸å®¶ãå½ç¨æ·è¯·æ±ä»£ç å®¡æ¥æ¶ï¼è¯·æä»¥ä¸æ­¥éª¤æ§è¡ï¼

1. åéè¯»ç®æ æä»¶ï¼çè§£æ´ä½ç»æ
2. æ£æ¥å¸¸è§é®é¢ï¼ç©ºæéãèµæºæ³æ¼ãå¹¶åå®å¨...
3. ç»åºå·ä½çæ¹è¿å»ºè®®ï¼éå¸¦ä»£ç ç¤ºä¾
</code></pre>
<p>frontmatter éç <code>name</code> å°±æ¯ Skill çå¯ä¸æ è¯ï¼åæ¶ä¹æ¯æä»¶å¤¹åï¼å¿é¡»æ¯ <code>kebab-case</code> æ ¼å¼ã<code>description</code> ä¼å±ç¤ºå¨å·¥å·åè¡¨éä¾ AI éæ©ãæ­£æé¨åï¼<code>---</code> ä¹åçåå®¹ï¼ææ¯çæ­£æ³¨å¥ç» AI ç promptã</p>
<h2 id="äºæ°æ®æ¨¡åskillconfig-å®ä½">äºãæ°æ®æ¨¡åï¼SkillConfig å®ä½</h2>
<p>Skill çåæ°æ®å­å¨æ°æ®åºéï¼å¯¹åºçå®ä½ç±»æ¯ <code>SkillConfig</code>ï¼</p>
<pre><code class="language-csharp">// src/OpenDeepWiki.Entities/Tools/SkillConfig.cs

public class SkillConfig : AggregateRoot&lt;string&gt;
{
    /// Skill åç§°ï¼å¯ä¸æ è¯ç¬¦ï¼åæ¶ä¹æ¯æä»¶å¤¹åï¼
    /// è§èï¼æå¤§64å­ç¬¦ï¼ä»å°åå­æ¯ãæ°å­åè¿å­ç¬¦
    [Required]
    [StringLength(64)]
    [RegularExpression(@"^[a-z0-9]+(-[a-z0-9]+)*$", 
        ErrorMessage = "åç§°åªè½åå«å°åå­æ¯ãæ°å­åè¿å­ç¬¦ï¼ä¸ä¸è½ä»¥è¿å­ç¬¦å¼å¤´æç»å°¾")]
    public string Name { get; set; } = string.Empty;

    [Required]
    [StringLength(1024)]
    public string Description { get; set; } = string.Empty;

    [StringLength(100)]
    public string? License { get; set; }

    [StringLength(500)]
    public string? Compatibility { get; set; }

    /// é¢æ¹åçå·¥å·åè¡¨ï¼ç©ºæ ¼åéï¼
    [StringLength(1000)]
    public string? AllowedTools { get; set; }

    /// Skill æä»¶å¤¹çç¸å¯¹è·¯å¾ï¼ç¸å¯¹äº skills æ ¹ç®å½ï¼
    [Required]
    [StringLength(200)]
    public string FolderPath { get; set; } = string.Empty;

    public bool IsActive { get; set; } = true;
    public int SortOrder { get; set; } = 0;
    public string? Author { get; set; }
    public new string Version { get; set; } = "1.0.0";
    public SkillSource Source { get; set; } = SkillSource.Local;
    public string? SourceUrl { get; set; }

    // æä»¶å¤¹ç»ææ è®°
    public bool HasScripts { get; set; }
    public bool HasReferences { get; set; }
    public bool HasAssets { get; set; }
    public long SkillMdSize { get; set; }
    public long TotalSize { get; set; }
}

public enum SkillSource
{
    Local = 0,       // æ¬å°ä¸ä¼ 
    Remote = 1,      // ä» URL å¯¼å¥
    Marketplace = 2  // ä»å¸åºå®è£
}
</code></pre>
<p>å ä¸ªå¼å¾æ³¨æçè®¾è®¡ç¹ï¼</p>
<ul>
<li><strong>Name çæ­£åæ ¡éª</strong>ï¼<code>^[a-z0-9]+(-[a-z0-9]+)*$</code>ï¼å¼ºå¶ kebab-caseï¼è·æä»¶å¤¹åä¿æä¸è´ï¼é¿åè·¯å¾é®é¢</li>
<li><strong>SkillSource æä¸¾</strong>ï¼é¢çäºä¸ç§æ¥æºï¼ç®åä¸»è¦ç¨ <code>Local</code>ï¼ä½æ¶æä¸å·²ç»ä¸ºè¿ç¨å¯¼å¥åå¸åºå®è£çäºå£å­</li>
<li><strong>HasScripts / HasReferences / HasAssets</strong>ï¼è®°å½æä»¶å¤¹ç»æï¼åç«¯å±ç¤ºè¯¦ææ¶ä¸ç¨åå»æ«ç£ç</li>
</ul>
<p>å¨ EF Core ç <code>MasterDbContext</code> éï¼<code>SkillConfig</code> æ³¨åäº Name å¯ä¸ç´¢å¼ï¼</p>
<pre><code class="language-csharp">// src/OpenDeepWiki.EFCore/MasterDbContext.cs

modelBuilder.Entity&lt;SkillConfig&gt;()
    .HasIndex(s =&gt; s.Name)
    .IsUnique();
</code></pre>
<h2 id="ä¸skill-çä¸ä¼ ä¸è§£æadmintoolsservice">ä¸ãSkill çä¸ä¼ ä¸è§£æï¼AdminToolsService</h2>
<p>Skill ççå½å¨æç®¡çå¨ <code>AdminToolsService</code> éï¼è¿æ¯æ´ä¸ªç³»ç»éæ"èæ´»ç´¯æ´»"éä¸­çå°æ¹ââè§£å ZIPãè§£æ YAMLãæ ¡éªæ ¼å¼ãåç£çãåæ°æ®åºï¼ä¸æ¡é¾ã</p>
<h3 id="31-ä¸ä¼ æµç¨">3.1 ä¸ä¼ æµç¨</h3>
<pre><code class="language-csharp">// src/OpenDeepWiki/Services/Admin/AdminToolsService.cs

public async Task&lt;SkillConfigDto&gt; UploadSkillAsync(Stream zipStream, string fileName)
{
    var tempDir = Path.Combine(Path.GetTempPath(), Guid.NewGuid().ToString());
    Directory.CreateDirectory(tempDir);
    try
    {
        // 1. è§£åå°ä¸´æ¶ç®å½
        using (var archive = new ZipArchive(zipStream, ZipArchiveMode.Read))
            archive.ExtractToDirectory(tempDir);

        // 2. æ¾å° SKILL.mdï¼æ¯ææ ¹ç®å½æä¸çº§å­ç®å½ï¼
        var skillMdPath = FindSkillMd(tempDir) 
            ?? throw new InvalidOperationException("åç¼©åä¸­æªæ¾å° SKILL.md");
        var skillRootDir = Path.GetDirectoryName(skillMdPath)!;

        // 3. è§£æ frontmatter
        var (frontmatter, _) = ParseSkillMd(await File.ReadAllTextAsync(skillMdPath));

        // 4. æ ¡éªå¿å¡«å­æ®µ
        if (!frontmatter.TryGetValue("name", out var nameObj) 
            || string.IsNullOrEmpty(nameObj?.ToString()))
            throw new InvalidOperationException("SKILL.md ç¼ºå° name å­æ®µ");

        var name = nameObj.ToString()!;
        if (!Regex.IsMatch(name, @"^[a-z0-9]+(-[a-z0-9]+)*$"))
            throw new InvalidOperationException("name æ ¼å¼æ æ");

        if (!frontmatter.TryGetValue("description", out var descObj) 
            || string.IsNullOrEmpty(descObj?.ToString()))
            throw new InvalidOperationException("SKILL.md ç¼ºå° description å­æ®µ");

        // 5. æ¥é
        if (await _context.SkillConfigs.AnyAsync(s =&gt; s.Name == name &amp;&amp; !s.IsDeleted))
            throw new InvalidOperationException($"å·²å­å¨åå Skill: {name}");

        // 6. ç§»å¨å°æ­£å¼ç®å½
        var targetPath = Path.Combine(_skillsBasePath, name);
        if (Directory.Exists(targetPath)) Directory.Delete(targetPath, true);
        Directory.Move(skillRootDir, targetPath);

        // 7. æå»ºå®ä½å¹¶å¥åº
        var config = new SkillConfig
        {
            Id = Guid.NewGuid().ToString(),
            Name = name,
            Description = descObj.ToString()!,
            License = frontmatter.TryGetValue("license", out var l) ? l?.ToString() : null,
            Compatibility = frontmatter.TryGetValue("compatibility", out var c) ? c?.ToString() : null,
            AllowedTools = frontmatter.TryGetValue("allowed-tools", out var t) ? t?.ToString() : null,
            FolderPath = name,
            IsActive = true,
            SortOrder = 0,
            Version = "1.0.0",
            Source = SkillSource.Local,
            HasScripts = Directory.Exists(Path.Combine(targetPath, "scripts")),
            HasReferences = Directory.Exists(Path.Combine(targetPath, "references")),
            HasAssets = Directory.Exists(Path.Combine(targetPath, "assets")),
            SkillMdSize = new FileInfo(Path.Combine(targetPath, "SKILL.md")).Length,
            TotalSize = CalculateDirectorySize(targetPath),
            CreatedAt = DateTime.UtcNow
        };

        _context.SkillConfigs.Add(config);
        await _context.SaveChangesAsync();
        // ... è¿å DTO
    }
    finally 
    { 
        if (Directory.Exists(tempDir)) 
            try { Directory.Delete(tempDir, true); } catch { } 
    }
}
</code></pre>
<p>è¿æ®µä»£ç çæµç¨å¾æ¸æ°ï¼è§£å â æ¾ SKILL.md â è§£æ YAML â æ ¡éª â æ¥é â è½ç â å¥åºãæå ä¸ªç»èå¼å¾è¯´è¯´ï¼</p>
<ol>
<li><strong>FindSkillMd æ¯æä¸¤çº§æ¥æ¾</strong>ï¼ZIP åé SKILL.md å¯è½å¨æ ¹ç®å½ï¼ä¹å¯è½å¨ä¸çº§å­ç®å½ä¸ï¼æ¯å¦ä½ æåçæ¶åå¤å¥äºä¸å±æä»¶å¤¹ï¼ï¼å®é½è½æ¾å°</li>
<li><strong>ä¸´æ¶ç®å½ç¨ GUID å½å</strong>ï¼é¿åå¹¶åä¸ä¼ å²çª</li>
<li><strong>finally ééé»å é¤ä¸´æ¶ç®å½</strong>ï¼<code>catch { }</code> åæå¼å¸¸ï¼å ä¸ºæ¸çå¤±è´¥ä¸åºè¯¥å½±åä¸»æµç¨</li>
</ol>
<h3 id="32-yaml-frontmatter-è§£æ">3.2 YAML Frontmatter è§£æ</h3>
<pre><code class="language-csharp">private static (Dictionary&lt;string, object?&gt; frontmatter, string body) ParseSkillMd(string content)
{
    var frontmatter = new Dictionary&lt;string, object?&gt;();
    var body = content;
    if (content.StartsWith("---"))
    {
        var endIndex = content.IndexOf("---", 3);
        if (endIndex &gt; 0)
        {
            var yamlContent = content[3..endIndex].Trim();
            body = content[(endIndex + 3)..].Trim();
            try
            {
                var deserializer = new DeserializerBuilder()
                    .WithNamingConvention(HyphenatedNamingConvention.Instance)
                    .Build();
                frontmatter = deserializer.Deserialize&lt;Dictionary&lt;string, object?&gt;&gt;(yamlContent) ?? new();
            }
            catch { }
        }
    }
    return (frontmatter, body);
}
</code></pre>
<p>ç¨çæ¯ YamlDotNet åºï¼<code>HyphenatedNamingConvention</code> å¯¹åº <code>kebab-case</code> ç key æ ¼å¼ï¼æ¯å¦ <code>allowed-tools</code>ï¼ãè§£æå¤±è´¥ç´æ¥åå¼å¸¸è¿åç©ºå­å¸ââè¿ä¸ªè®¾è®¡æç¹ç²æ´ï¼ä½èèå° frontmatter éå¤§é¨åå­æ®µé½æ¯å¯éçï¼ä¹è¯´å¾è¿å»ã</p>
<h3 id="33-ç£çæ«æå·æ°">3.3 ç£çæ«æå·æ°</h3>
<p>é¤äºä¸ä¼ ï¼è¿æä¸ä¸ª <code>RefreshSkillsFromDiskAsync</code> æ¹æ³ï¼ç¨æ¥æ«æ skills ç®å½ä¸çæä»¶å¤¹ï¼æè¿æ²¡å¥åºç Skill èªå¨æ³¨åè¿å»ï¼</p>
<pre><code class="language-csharp">public async Task RefreshSkillsFromDiskAsync()
{
    if (!Directory.Exists(_skillsBasePath)) return;

    var existingNames = (await _context.SkillConfigs
        .Where(s =&gt; !s.IsDeleted).ToListAsync())
        .Select(s =&gt; s.Name).ToHashSet();

    foreach (var dir in Directory.GetDirectories(_skillsBasePath))
    {
        var skillMdPath = Path.Combine(dir, "SKILL.md");
        if (!File.Exists(skillMdPath)) continue;

        var folderName = Path.GetFileName(dir);
        if (existingNames.Contains(folderName)) continue;

        try
        {
            var (frontmatter, _) = ParseSkillMd(await File.ReadAllTextAsync(skillMdPath));
            if (!frontmatter.TryGetValue("name", out var nameObj)) continue;
            var name = nameObj?.ToString();
            if (string.IsNullOrEmpty(name) || name != folderName) continue;
            // ... æå»º SkillConfig å¹¶å¥åº
        }
        catch (Exception ex) 
        { 
            _logger.LogWarning(ex, "è§£æå¤±è´¥: {Path}", dir); 
        }
    }
    await _context.SaveChangesAsync();
}
</code></pre>
<p>è¿ä¸ªæ¹æ³çä½¿ç¨åºæ¯æ¯ï¼ä½ ç´æ¥æ Skill æä»¶å¤¹ä¸¢å° skills ç®å½ä¸ï¼æ¯å¦éè¿ Docker volume æè½½ï¼ï¼ç¶åè°ä¸ä¸å·æ°æ¥å£ï¼ç³»ç»å°±è½è¯å«å°ãæ³¨æå®æä¸ªæ ¡éªï¼<strong>æä»¶å¤¹åå¿é¡»å SKILL.md éç name å­æ®µä¸è´</strong>ï¼ä¸ä¸è´çä¼è¢«è·³è¿ã</p>
<h2 id="åapi-ç«¯ç¹minimal-api-é£æ ¼">åãAPI ç«¯ç¹ï¼Minimal API é£æ ¼</h2>
<p>Skill çç®¡çæ¥å£å¨ <code>AdminToolsEndpoints</code> éï¼ç¨çæ¯ ASP.NET Core ç Minimal APIï¼</p>
<pre><code class="language-csharp">// src/OpenDeepWiki/Endpoints/Admin/AdminToolsEndpoints.cs

private static void MapSkillEndpoints(RouteGroupBuilder group)
{
    var skillGroup = group.MapGroup("/skills");

    // åè¡¨
    skillGroup.MapGet("/", async ([FromServices] IAdminToolsService toolsService) =&gt;
    {
        var result = await toolsService.GetSkillConfigsAsync();
        return Results.Ok(new { success = true, data = result });
    }).WithName("AdminGetSkills");

    // è¯¦æ
    skillGroup.MapGet("/{id}", async (string id, [FromServices] IAdminToolsService toolsService) =&gt;
    {
        var result = await toolsService.GetSkillDetailAsync(id);
        return result != null 
            ? Results.Ok(new { success = true, data = result })
            : Results.NotFound(new { success = false, message = "Skill ä¸å­å¨" });
    }).WithName("AdminGetSkillDetail");

    // ä¸ä¼ ï¼ZIPï¼
    skillGroup.MapPost("/upload", async (HttpRequest request, [FromServices] IAdminToolsService toolsService) =&gt;
    {
        // ... æ ¡éª Content-Typeãæä»¶æ ¼å¼
        using var stream = file.OpenReadStream();
        var result = await toolsService.UploadSkillAsync(stream, file.FileName);
        return Results.Ok(new { success = true, data = result });
    }).WithName("AdminUploadSkill").DisableAntiforgery();

    // æ´æ°ï¼ä»ç®¡çå­æ®µï¼IsActiveãSortOrderï¼
    skillGroup.MapPut("/{id}", ...);

    // å é¤ï¼åæ¶å é¤ç£çæä»¶ï¼
    skillGroup.MapDelete("/{id}", ...);

    // è¯»å Skill åé¨æä»¶ï¼å¸¦è·¯å¾ç©¿è¶é²æ¤ï¼
    skillGroup.MapGet("/{id}/files/{*filePath}", ...);

    // ä»ç£çå·æ°
    skillGroup.MapPost("/refresh", ...);
}
</code></pre>
<p>å¼å¾ä¸æçæ¯æä»¶è¯»åæ¥å£éçè·¯å¾ç©¿è¶é²æ¤ï¼</p>
<pre><code class="language-csharp">public async Task&lt;string?&gt; GetSkillFileContentAsync(string id, string filePath)
{
    var config = await _context.SkillConfigs.FirstOrDefaultAsync(s =&gt; s.Id == id &amp;&amp; !s.IsDeleted);
    if (config == null) return null;

    var normalizedPath = Path.GetFullPath(Path.Combine(_skillsBasePath, config.FolderPath, filePath));
    var skillBasePath = Path.GetFullPath(Path.Combine(_skillsBasePath, config.FolderPath));

    // å³é®ï¼ç¡®ä¿è§£æåçç»å¯¹è·¯å¾å¨ Skill ç®å½å
    if (!normalizedPath.StartsWith(skillBasePath)) 
        throw new UnauthorizedAccessException("éæ³è·¯å¾");

    return File.Exists(normalizedPath) ? await File.ReadAllTextAsync(normalizedPath) : null;
}
</code></pre>
<p>ç¨ <code>Path.GetFullPath</code> æ <code>../../etc/passwd</code> è¿ç±»è·¯å¾è§£ææç»å¯¹è·¯å¾ï¼ç¶åæ£æ¥æ¯å¦è¿å¨ Skill ç®å½èå´åãè¿æ¯æ åçè·¯å¾ç©¿è¶é²å¾¡ææ³ã</p>
<h2 id="äºæ ¸å¿è½¬æ¢å¨skilltoolconverter">äºãæ ¸å¿è½¬æ¢å¨ï¼SkillToolConverter</h2>
<p>å°è¿éï¼Skill å·²ç»å­å¨ç£çåæ°æ®åºéäºãä½ AI Agent å¹¶ä¸è®¤è¯ <code>SkillConfig</code>ï¼å®åªè®¤ <code>AITool</code>ã<code>SkillToolConverter</code> å°±æ¯åè¿ä¸ªæ¡¥æ¥çã</p>
<p>æ´ä¸ªè½¬æ¢å¨çè®¾è®¡æè·¯å¾å·§å¦ï¼<strong>ä¸æ¯ææ¯ä¸ª Skill åæä¸ä¸ªç¬ç«ç Toolï¼èæ¯æææ Skill åå¹¶æä¸ä¸ªå« <code>Skill</code> ç Tool</strong>ãè¿ä¸ª Tool ç description éååºäºææå¯ç¨ Skill çåç§°åæè¿°ï¼AI è°ç¨æ¶ä¼ å¥ Skill åç§°ï¼Tool å°±å»è¯»å¯¹åºç SKILL.md è¿å prompt åå®¹ã</p>
<pre><code class="language-csharp">// src/OpenDeepWiki/Services/Chat/SkillToolConverter.cs

public class SkillToolConverter : ISkillToolConverter
{
    private readonly IContext _context;
    private readonly ILogger&lt;SkillToolConverter&gt; _logger;
    private readonly string _skillsBasePath;

    public SkillToolConverter(
        IContext context,
        ILogger&lt;SkillToolConverter&gt; logger,
        IConfiguration configuration)
    {
        _context = context;
        _logger = logger;
        _skillsBasePath = configuration["Skills:BasePath"] 
            ?? Path.Combine(AppContext.BaseDirectory, "skills");
    }

    public async Task&lt;List&lt;AITool&gt;&gt; ConvertSkillConfigsToToolsAsync(
        List&lt;string&gt; skillIds,
        CancellationToken cancellationToken = default)
    {
        var tools = new List&lt;AITool&gt;();
        if (skillIds == null || skillIds.Count == 0) return tools;

        // ä»æ°æ®åºå è½½å¯ç¨ç Skill éç½®
        var skillConfigs = await _context.SkillConfigs
            .Where(s =&gt; skillIds.Contains(s.Id) &amp;&amp; s.IsActive &amp;&amp; !s.IsDeleted)
            .OrderBy(s =&gt; s.SortOrder)
            .ThenBy(s =&gt; s.Name)
            .ToListAsync(cancellationToken);

        if (skillConfigs.Count == 0) return tools;

        // åå»ºå¯ä¸ç LoadSkills å·¥å·
        var loadSkillsTool = CreateLoadSkillsTool(skillConfigs);
        tools.Add(loadSkillsTool);

        _logger.LogInformation(
            "Created LoadSkills tool with {Count} available skills", 
            skillConfigs.Count);

        return tools;
    }
    // ...
}
</code></pre>
<h3 id="51-æå»º-tool-æè¿°">5.1 æå»º Tool æè¿°</h3>
<p><code>CreateLoadSkillsTool</code> æ¯æå³é®çæ¹æ³ãå®åäºä¸¤ä»¶äºï¼æå»ºä¸ä¸ªåå« Skill ç®å½ç descriptionï¼ä»¥åå®ä¹è°ç¨æ¶çå¤çé»è¾ã</p>
<pre><code class="language-csharp">private AITool CreateLoadSkillsTool(List&lt;SkillConfig&gt; skillConfigs)
{
    // æå»ºæ¥æ¾è¡¨
    var skillLookup = skillConfigs.ToDictionary(
        s =&gt; s.Name, s =&gt; s, StringComparer.OrdinalIgnoreCase);

    // å®ä¹å®éçå¤çå½æ°
    var loadSkillAsync = async (
        [Description("The name of the skill to load (select from available skills listed in this tool's description)")] string name,
        CancellationToken cancellationToken) =&gt;
    {
        return await LoadSkillInternalAsync(name, skillLookup);
    };

    // æå»º descriptionï¼åå«ææå¯ç¨ Skill çç®å½
    var description = new StringBuilder();
    description.AppendLine("""
Execute a skill within the main conversation
&lt;skills_instructions&gt;
When users ask you to perform tasks, check if any of the available skills
below can help complete the task more effectively. Skills provide specialized
capabilities and domain knowledge.
How to use skills:
- Invoke skills using this tool with the skill name only (no arguments)
- When you invoke a skill, you will see &lt;command-message&gt;The "{name}" skill is loading&lt;/command-message&gt;
- The skill's prompt will expand and provide detailed instructions on how to complete the task
- Examples:
  - `skill: "pdf"` - invoke the pdf skill
  - `skill: "xlsx"` - invoke the xlsx skill
  - `skill: "ms-office-suite:pdf"` - invoke using fully qualified name

Important:
    - Only use skills listed in &lt;available_skills&gt; below
    - Do not invoke a skill that is already running
    - Do not use this tool for built-in CLI commands (like /help, /clear, etc.)
&lt;/skills_instructions&gt;

&lt;available_skills&gt;
""");

    foreach (var skill in skillConfigs)
    {
        description.AppendLine($"- name: {skill.Name} - {skill.Description}");
    }
    description.Append("&lt;/available_skills&gt;");

    // ç¨ AIFunctionFactory åå»º Tool
    return AIFunctionFactory.Create(
        loadSkillAsync,
        new AIFunctionFactoryOptions
        {
            Name = "Skill",
            Description = description.ToString()
        });
}
</code></pre>
<p>è¿æ®µä»£ç çç²¾é«å¨äº description çæé æ¹å¼ãå®ç¨ XML æ ç­¾ï¼<code>&lt;skills_instructions&gt;</code> å <code>&lt;available_skills&gt;</code>ï¼æ¥ç»æåæè¿°ä¿¡æ¯ï¼è¿æ · AI æ¨¡åè½æ´åç¡®å°çè§£å·¥å·çç¨éåå¯éåæ°ãæ¯ä¸ª Skill ç name å description é½åå¨éé¢ï¼AI çå°ç¨æ·çè¯·æ±åï¼ä¼èªä¸»å¤æ­è¦ä¸è¦è°ç¨æä¸ª Skillã</p>
<h3 id="52-è¿è¡æ¶å è½½-skill-prompt">5.2 è¿è¡æ¶å è½½ Skill Prompt</h3>
<p>å½ AI å³å®è°ç¨ <code>Skill</code> å·¥å·æ¶ï¼<code>LoadSkillInternalAsync</code> è´è´£è¯»å SKILL.md å¹¶è¿å prompt æ­£æï¼</p>
<pre><code class="language-csharp">private async Task&lt;string&gt; LoadSkillInternalAsync(
    string name,
    Dictionary&lt;string, SkillConfig&gt; skillLookup)
{
    if (string.IsNullOrWhiteSpace(name))
    {
        return JsonSerializer.Serialize(new { error = true, message = "Skill name cannot be empty." });
    }

    if (!skillLookup.TryGetValue(name, out var skill))
    {
        var availableNames = string.Join(", ", skillLookup.Keys);
        return JsonSerializer.Serialize(new
        {
            error = true,
            message = $"Skill '{name}' not found. Available skills: {availableNames}"
        });
    }

    var skillMdPath = Path.Combine(_skillsBasePath, skill.FolderPath, "SKILL.md");
    if (!File.Exists(skillMdPath))
    {
        return JsonSerializer.Serialize(new { error = true, message = $"SKILL.md not found for skill '{name}'." });
    }

    try
    {
        var content = await File.ReadAllTextAsync(skillMdPath);
        // å»æ YAML frontmatterï¼åªè¿å prompt æ­£æ
        var prompts = ExtractPromptsBody(content);
        return prompts;
    }
    catch (Exception ex)
    {
        _logger.LogError(ex, "Failed to load SKILL.md for skill: {Name}", name);
        return JsonSerializer.Serialize(new { error = true, message = $"Failed to load skill: {ex.Message}" });
    }
}

private static string ExtractPromptsBody(string content)
{
    if (!content.StartsWith("---")) return content;

    var endIndex = content.IndexOf("---", 3);
    if (endIndex &lt; 0) return content;

    return content[(endIndex + 3)..].Trim();
}
</code></pre>
<p>æ³¨æéè¯¯å¤ççæ¹å¼ï¼ä¸æ¯æå¼å¸¸ï¼èæ¯è¿å JSON æ ¼å¼çéè¯¯ä¿¡æ¯ãå ä¸ºè¿ä¸ªè¿åå¼ä¼ç´æ¥ä½ä¸º Tool çè¾åºä¼ åç» AIï¼AI è½çè§£è¿ä¸ªéè¯¯å¹¶ååºç¸åºååºï¼æ¯å¦æ¢ä¸ä¸ª Skill è¯è¯ï¼æèåè¯ç¨æ· Skill ä¸å­å¨ï¼ã</p>
<h2 id="å­å·¥å·æ³¨å¥ä¸¤æ¡æ¶è´¹è·¯å¾">å­ãå·¥å·æ³¨å¥ï¼ä¸¤æ¡æ¶è´¹è·¯å¾</h2>
<p><code>SkillToolConverter</code> äº§åºç <code>AITool</code> ä¼è¢«æ³¨å¥å°ä¸¤ä¸ªå°æ¹ï¼<strong>Chat å¯¹è¯å©æ</strong>å <strong>Wiki çæå¨</strong>ã</p>
<h3 id="61-chat-å¯¹è¯å©æ">6.1 Chat å¯¹è¯å©æ</h3>
<p>å¨ <code>ChatAssistantService.StreamChatAsync</code> éï¼Skill å·¥å·åå¶ä»å·¥å·ï¼Git å·¥å·ãææ¡£éè¯»å·¥å·ãMCP å·¥å·ï¼ä¸èµ·è¢«ç»è£ï¼</p>
<pre><code class="language-csharp">// src/OpenDeepWiki/Services/Chat/ChatAssistantService.cs

public async IAsyncEnumerable&lt;SSEEvent&gt; StreamChatAsync(
    ChatRequest request,
    CancellationToken cancellationToken = default)
{
    var config = await GetConfigAsync(cancellationToken);
    // ... æ ¡éªéç½®åæ¨¡å

    var tools = new List&lt;AITool&gt;();

    // 1. Git å·¥å·ï¼è¯»æä»¶ãæç´¢ä»£ç ç­ï¼
    if (Directory.Exists(repositoryPath))
    {
        var gitTool = new GitTool(repositoryPath);
        tools.AddRange(gitTool.GetTools());
    }

    // 2. ææ¡£éè¯»å·¥å·
    var chatDocReaderTool = await ChatDocReaderTool.CreateAsync(
        _context, request.Context.Owner, request.Context.Repo,
        request.Context.Branch, request.Context.Language, cancellationToken);
    tools.Add(chatDocReaderTool.GetTool());

    // 3. MCP å·¥å·
    if (config.EnabledMcpIds.Count &gt; 0)
    {
        var mcpTools = await _mcpToolConverter.ConvertMcpConfigsToToolsAsync(
            config.EnabledMcpIds, cancellationToken);
        tools.AddRange(mcpTools);
    }

    // 4. Skill å·¥å· â å°±æ¯è¿é
    if (config.EnabledSkillIds.Count &gt; 0)
    {
        var skillTools = await _skillToolConverter.ConvertSkillConfigsToToolsAsync(
            config.EnabledSkillIds, cancellationToken);
        tools.AddRange(skillTools);
    }

    // 5. åå»º Agent å¹¶å¼å§æµå¼å¯¹è¯
    var agentOptions = new ChatClientAgentOptions
    {
        ChatOptions = new ChatOptions
        {
            Tools = tools.ToArray(),
            ToolMode = ChatToolMode.Auto,
            MaxOutputTokens = 32000
        }
    };

    var (agent, _) = _agentFactory.CreateChatClientWithTools(
        modelConfig.ModelId, tools.ToArray(), agentOptions, requestOptions);

    // ... æµå¼è¾åº
}
</code></pre>
<p><code>config.EnabledSkillIds</code> æ¥èª <code>ChatAssistantConfig</code> è¡¨ï¼ç®¡çåå¨åå°éç½®åªäº Skill å¯¹å¯¹è¯å©æå¯ç¨ã</p>
<h3 id="62-wiki-çæå¨">6.2 Wiki çæå¨</h3>
<p>å¨ <code>WikiGenerator</code> éï¼Skill å·¥å·çæ³¨å¥æ¹å¼ç¥æä¸åââå®ä¸ä¾èµ ChatAssistantConfigï¼èæ¯ç´æ¥æ¥ææå¯ç¨ç Skillï¼</p>
<pre><code class="language-csharp">// src/OpenDeepWiki/Services/Wiki/WikiGenerator.cs

private async Task&lt;AITool[]&gt; BuildToolsAsync(
    IEnumerable&lt;AITool&gt; baseTools,
    CancellationToken cancellationToken)
{
    var tools = baseTools.ToList();

    var enabledSkillIds = await GetEnabledSkillIdsAsync(cancellationToken);
    if (enabledSkillIds.Count == 0) return tools.ToArray();

    try
    {
        var skillTools = await _skillToolConverter.ConvertSkillConfigsToToolsAsync(
            enabledSkillIds, cancellationToken);

        if (skillTools.Count &gt; 0)
        {
            tools.AddRange(skillTools);
            _logger.LogDebug("Added {SkillCount} skill tools to wiki generator", skillTools.Count);
        }
    }
    catch (Exception ex)
    {
        _logger.LogWarning(ex, "Failed to load skill tools for wiki generator");
    }

    return tools.ToArray();
}

private async Task&lt;List&lt;string&gt;&gt; GetEnabledSkillIdsAsync(CancellationToken cancellationToken)
{
    using var context = _contextFactory.CreateContext();
    return await context.SkillConfigs
        .Where(s =&gt; s.IsActive &amp;&amp; !s.IsDeleted)
        .OrderBy(s =&gt; s.SortOrder)
        .ThenBy(s =&gt; s.Name)
        .Select(s =&gt; s.Id)
        .ToListAsync(cancellationToken);
}
</code></pre>
<p>Wiki çæå¨éæä¸ª <code>try-catch</code> åè£¹ Skill å è½½é»è¾ï¼Skill å è½½å¤±è´¥ä¸ä¼é»æ­ Wiki çææµç¨ãè¿æ¯ä¸ªä¸éçå®¹éè®¾è®¡ââSkill æ¯é¦ä¸æ·»è±çä¸è¥¿ï¼ä¸åºè¯¥å ä¸ºå®åºé®é¢å°±ææ ¸å¿åè½ææã</p>
<h2 id="ä¸agent-å·¥åæåä¸å¬é">ä¸ãAgent å·¥åï¼æåä¸å¬é</h2>
<p>ææå·¥å·æç»é½è¦éè¿ <code>AgentFactory</code> æ³¨å¥å° AI Agent éã<code>AgentFactory</code> æ¯æä¸ç§åç«¯ï¼OpenAI ChatãOpenAI ResponsesãAnthropicã</p>
<pre><code class="language-csharp">// src/OpenDeepWiki/Agents/AgentFactory.cs

public (ChatClientAgent Agent, IList&lt;AITool&gt; Tools) CreateChatClientWithTools(
    string model,
    AITool[] tools,
    ChatClientAgentOptions clientAgentOptions,
    AiRequestOptions? requestOptions = null)
{
    var option = ResolveOptions(requestOptions ?? _options, true);

    clientAgentOptions.ChatOptions ??= new ChatOptions();
    clientAgentOptions.ChatOptions.Tools = tools;
    clientAgentOptions.ChatOptions.ToolMode = ChatToolMode.Auto;

    var agent = CreateAgentInternal(model, clientAgentOptions, option);
    return (agent, tools);
}

public static ChatClientAgent CreateAgentInternal(
    string model,
    ChatClientAgentOptions clientAgentOptions,
    AiRequestOptions options)
{
    // åè§£æéç½®ï¼åå¹¶ä¼ å¥åæ°ãç¯å¢åéãé»è®¤å¼
    var option = ResolveOptions(options, true);
    var httpClient = CreateHttpClient();

    if (option.RequestType == AiRequestType.OpenAI)
    {
        var clientOptions = new OpenAIClientOptions()
        {
            Endpoint = new Uri(option.Endpoint ?? DefaultEndpoint),
            // æ³¨æï¼OpenAI åæ¯åæ ·æ³¨å¥äºèªå®ä¹ HttpClientï¼ç¨äºæ¥å¿æ¦æªç­ï¼
            Transport = new HttpClientPipelineTransport(httpClient)
        };
        var openAiClient = new OpenAIClient(
            new ApiKeyCredential(option.ApiKey ?? string.Empty), clientOptions);
        return openAiClient.GetChatClient(model).AsAIAgent(clientAgentOptions);
    }
    else if (option.RequestType == AiRequestType.OpenAIResponses)
    {
        // Responses åæ¯ç»æä¸ Chat åæ¯ç±»ä¼¼ï¼ä½èµ° GetResponsesClient
        var clientOptions = new OpenAIClientOptions()
        {
            Endpoint = new Uri(option.Endpoint ?? DefaultEndpoint),
            Transport = new HttpClientPipelineTransport(httpClient)
        };
        var openAiClient = new OpenAIClient(
            new ApiKeyCredential(option.ApiKey ?? string.Empty), clientOptions);
        return openAiClient.GetResponsesClient(model).AsAIAgent(clientAgentOptions);
    }
    else if (option.RequestType == AiRequestType.Anthropic)
    {
        AnthropicClient client = new()
        {
            BaseUrl = option.Endpoint ?? DefaultEndpoint,
            ApiKey = option.ApiKey,
            HttpClient = httpClient,
        };
        clientAgentOptions.ChatOptions.ModelId = model;
        return client.AsAIAgent(clientAgentOptions);
    }

    throw new NotSupportedException("Unknown AI request type.");
}
</code></pre>
<p>å ä¸ªè¦ç¹ï¼</p>
<ul>
<li><code>ResolveOptions</code> ä¼ä¾æ¬¡ä»ä¼ å¥åæ°ãç¯å¢åéï¼<code>CHAT_API_KEY</code>ã<code>ENDPOINT</code>ã<code>CHAT_REQUEST_TYPE</code>ï¼ãé»è®¤å¼ä¸­è§£æéç½®ï¼ä¿è¯å³ä½¿è°ç¨æ¹æ²¡ä¼ å®æ´åæ°ä¹è½æ­£å¸¸å·¥ä½</li>
<li>ä¸ä¸ªåæ¯é½éè¿èªå®ä¹ <code>HttpClient</code> æ³¨å¥äº <code>LoggingHttpHandler</code>ï¼ç¨äºè¯·æ±æ¥å¿æ¦æªï¼ä¸åªæ¯ Anthropic åæ¯éè¦</li>
<li><code>ChatToolMode.Auto</code> æå³ç AI èªå·±å³å®ä»ä¹æ¶åè°ç¨å·¥å·ãSkill å·¥å·ç description éå·²ç»åæ¸æ¥äºä½¿ç¨åºæ¯ï¼AI ä¼æ ¹æ®ç¨æ·çè¯·æ±èªå¨å¤æ­æ¯å¦éè¦å è½½æä¸ª Skill</li>
</ul>
<h2 id="å«å®æ´è°ç¨é¾è·¯æ»ç»">å«ãå®æ´è°ç¨é¾è·¯æ»ç»</h2>
<p>æä¸é¢çåå®¹ä¸²èµ·æ¥ï¼ä¸æ¬¡ Skill è°ç¨çå®æ´é¾è·¯æ¯è¿æ ·çï¼</p>
<pre><code>ç¨æ·ä¸ä¼  ZIP
    â
AdminToolsService.UploadSkillAsync()
    â è§£å â è§£æ SKILL.md â æ ¡éª â åç£ç â åæ°æ®åº
    â
âââââââââââââââââââââââââââââââââââââââââââââââââââââââ
â  è·¯å¾ Aï¼Chat å¯¹è¯å©æ                                â
â  ç®¡çåå¨åå°éç½® ChatAssistantConfig.EnabledSkillIds  â
â  â åªæè¢«æ¾å¼éä¸­ç Skill æä¼æ³¨å¥                     â
âââââââââââââââââââââââââââââââââââââââââââââââââââââââ¤
â  è·¯å¾ Bï¼Wiki çæå¨                                   â
â  ç´æ¥æ¥è¯¢ææ IsActive &amp;&amp; !IsDeleted ç Skill          â
â  â ä¸ä¾èµ ChatAssistantConfigï¼ææå¯ç¨ç Skill é½åä¸ â
âââââââââââââââââââââââââââââââââââââââââââââââââââââââ
    â
SkillToolConverter.ConvertSkillConfigsToToolsAsync()
    â ä»æ°æ®åºå è½½ SkillConfig
    â æå»º "Skill" AIToolï¼description å«ææ Skill ç®å½ï¼
    â
AgentFactory.CreateChatClientWithTools()
    â ResolveOptions() åå¹¶éç½®
    â åå»º ChatClientAgentï¼OpenAI / OpenAIResponses / Anthropicï¼
    â Tools æ³¨å¥å° ChatOptions
    â
AI Agent è¿è¡
    â AI æ ¹æ®ç¨æ·è¯·æ±å¤æ­æ¯å¦éè¦è°ç¨ Skill
    â è°ç¨ Skill("code-review")
    â LoadSkillInternalAsync() è¯»å SKILL.md æ­£æ
    â è¿å prompt åå®¹ç» AI
    â AI æç§ prompt æä»¤æ§è¡ä»»å¡
</code></pre>
<h2 id="ä¹ä¸äºä¸ªäººæè">ä¹ãä¸äºä¸ªäººæè</h2>
<p>è¯»å®è¿å¥ä»£ç ï¼æå ä¸ªå°æ¹è§å¾è®¾è®¡å¾ä¸éï¼</p>
<ol>
<li>
<p><strong>å Tool èåè®¾è®¡</strong>ï¼æ²¡æç»æ¯ä¸ª Skill åå»ºç¬ç«ç Toolï¼èæ¯ç¨ä¸ä¸ª <code>Skill</code> Tool åå¥å£ï¼éè¿ description ååºç®å½ãè¿æ ·ä¸ç®¡æå¤å°ä¸ª Skillï¼åªå ç¨ä¸ä¸ª Tool æ§½ä½ï¼é¿åäº Tool æ°éçç¸çé®é¢ï¼å¾å¤æ¨¡åå¯¹ Tool æ°éæéå¶ï¼ã</p>
</li>
<li>
<p><strong>Prompt å»¶è¿å è½½</strong>ï¼Skill ç prompt ä¸æ¯å¨æå»º Tool æ¶å°±å¨é¨å è½½å° description éï¼èæ¯ AI è°ç¨æ¶æå»è¯»æä»¶ãè¿æ · description ä¿æç²¾ç®ï¼ä¸ä¼å ä¸º Skill å¤ªå¤å¯¼è´ context è¨èã</p>
</li>
<li>
<p><strong>ç£ç + æ°æ®åºåå­å¨</strong>ï¼æä»¶åå®¹å­ç£çï¼æ¹ä¾¿ç´æ¥ç¼è¾å volume æè½½ï¼ï¼åæ°æ®å­æ°æ®åºï¼æ¹ä¾¿æ¥è¯¢åç®¡çï¼ãä¸¤èéè¿ <code>FolderPath</code> å³èã</p>
</li>
<li>
<p><strong>å®¹ééç¦»</strong>ï¼WikiGenerator é Skill å è½½å¤±è´¥ä¸å½±åä¸»æµç¨ï¼ChatAssistantService é Skill æ¯å¯éçæ©å±è½åã</p>
</li>
</ol>
<p>ä¹æä¸äºå¯ä»¥æ¹è¿çå°æ¹ï¼</p>
<ul>
<li><code>ParseSkillMd</code> é YAML è§£æå¤±è´¥ç´æ¥åå¼å¸¸ï¼ä¸ä¼ æ¶è¿å¥½ï¼åé¢ææ ¡éªï¼ï¼ä½ <code>RefreshSkillsFromDiskAsync</code> éå¦æ YAML æ ¼å¼æé®é¢ï¼ç¨æ·å®å¨ä¸ç¥éä¸ºä»ä¹ Skill æ²¡è¢«è¯å«å°</li>
<li><code>SkillToolConverter</code> æ¯æ¬¡è°ç¨é½ä¼æ¥æ°æ®åºï¼å¦æ Skill åè¡¨ä¸å¸¸ååï¼å ä¸ªç¼å­ä¼æ´å¥½</li>
<li><code>AllowedTools</code> å­æ®µç®ååªæ¯å­äºä¸æ¥ï¼å¹¶æ²¡æå¨è¿è¡æ¶åä»»ä½æéæ§å¶</li>
</ul>
<p>æ»çæ¥è¯´ï¼è¿å¥ Skill æºå¶çè®¾è®¡æè·¯å¾æ¸æ°ï¼<strong>ç¨æä»¶ç³»ç»åå­å¨ï¼ç¨æ°æ®åºåç´¢å¼ï¼ç¨ Tool description ååç°ï¼ç¨å»¶è¿å è½½åæ³¨å¥</strong>ãå¦æä½ ä¹å¨åç±»ä¼¼ç AI Agent æ©å±ç³»ç»ï¼è¿ä¸ªå®ç°å¯ä»¥ä½ä¸ºä¸ä¸ªä¸éçåèã</p>
<hr>
<p><em>å¦æè¿ç¯æç« å¯¹ä½ æå¸®å©ï¼æ¬¢è¿ star <a href="https://github.com/AIDotNet/OpenDeepWiki" target="_blank" rel="noopener nofollow">OpenDeepWiki</a> é¡¹ç®ã</em></p>


</div>
<div class="clear"></div>

        <div class="postDesc">posted on 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-10 10:15">2026-02-10 10:15</span>&nbsp;
<a href="https://www.cnblogs.com/token-ai">239573049</a>&nbsp;
éè¯»(<span id="post_view_count">140</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19598343);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19598343', targetLink: 'https://www.cnblogs.com/token-ai/p/19598343', title: 'æè§£ OpenDeepWiki ç Agent Skills æºå¶ï¼ä» SKILL.md å° AI å·¥å·è°ç¨çå®æ´é¾è·¯' })">ä¸¾æ¥</a>
</div>
     ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ å¤§æ¨¡åRAGå®æï¼ä»è¢«éªä¸é è°±å°æä¸ºé¨é¨MVPï¼è¿æ¯æçè¸©åå¨è®°å½ ]]></title>
    <link>https://www.cnblogs.com/bu-huo/p/19601644</link>
    <guid>c6a244cb958faf2cb534de16af527b07</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/bu-huo/p/19601644" title="åå¸äº 2026-02-10 22:10">
    <span role="heading" aria-level="2">å¤§æ¨¡åRAGå®æï¼ä»è¢«éªä¸é è°±å°æä¸ºé¨é¨MVPï¼è¿æ¯æçè¸©åå¨è®°å½</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="ä¸åçèµ·ç¹æ¯ä¸é¡¿è­éª">ä¸åçèµ·ç¹æ¯ä¸é¡¿è­éª</h2>
<p>ä¸ä¸ªæï¼æè¢«é¢å¯¼å«è¿åå¬å®¤éªäºæ´æ´äºååéã</p>
<p>èµ·å æ¯è¿æ ·çââæä»¬é¨é¨è´è´£ç»´æ¤ä¸å¥åé¨ç¥è¯åºç³»ç»ï¼éé¢æ²æ·äºå¬å¸è¿äºå¹´çææ¯ææ¡£ãæéå¤çæåãè¿æåç§è§èæµç¨ãé®é¢æ¯ï¼è¿ç©æå¿é¤äºå½æè®¾ï¼å ä¹æ²¡äººç¨ãä¸ºå¥ï¼å ä¸ºæç´¢å¤ªçäºï¼å³é®è¯å¹éçé£ç§ï¼ä½ ææå¡å¨å®æºæä¹åï¼å®ç»ä½ è¿åä¸å åå«æå¡å¨çææ¡£ï¼çæ­£æç¨çé£ç¯åèæå¨ç¬¬ä¸é¡µã</p>
<p>æ°åäºå¥èé®é®é¢ï¼èåå·¥ç¿»ææ¡£æ¾ç­æ¡ï¼å¤§å®¶å®å¯å¨ç¾¤é@äººé®ï¼ä¹ä¸æ¿æå»ç¥è¯åºéæ¥ã</p>
<p>ç¶åé¢å¯¼åè¯äºï¼ä½ ä¸æ¯å¤©å¤©ç ç©¶ä»ä¹å¤§æ¨¡ååï¼è½ä¸è½æ´ä¸ªæºè½é®ç­ï¼è®©å¤§å®¶ç´æ¥é®é®é¢å°±è½å¾å°ç­æ¡ï¼</p>
<p>æå½æ¶èå­ä¸ç­ï¼æè¸è¯è¯´æ²¡é®é¢ãç»æç¬¬ä¸çä¸çº¿ä¸å¤©å°±è¢«éªä¸æ¥äºââç¨æ·é®æä»¬çMySQLä¸»ä»åæ¢æµç¨æ¯ä»ä¹ï¼å¤§æ¨¡ååç­å¾å¤´å¤´æ¯éï¼ä½åå®¹å®å¨æ¯å®èªå·±ç¼çï¼è·æä»¬å¬å¸çå®éæµç¨å«ç«¿å­æä¸çã</p>
<p>è¿å°±æ¯æè°çå¤§æ¨¡åå¹»è§é®é¢ï¼æå½æ¶å¯¹RAGççè§£è¿åçå¨æææ¡£ä¸¢è¿å»å°±è¡çæ°´å¹³ï¼å¤ªå¤©çäºã</p>
<p>ä¸è¿ï¼åæ¥çæäºè¿ç®åæ»¡ãæè±äºå°è¿ä¸å¨æ¶é´éæäºæ´ä¸ªæ¹æ¡ï¼ç°å¨è¿å¥ç³»ç»å·²ç»æäºé¨é¨çæ éå·¥å·ï¼ææ´»è·ç¨æ·ä»0æ¶¨å°äº200å¤ï¼é¢å¯¼å¨å­£åº¦ä¼ä¸è¿ä¸é¨è¡¨æ¬äºä¸åãä»å¤©è¿ç¯æç« ï¼æå°±ææ´ä¸ªè¸©åè¿ç¨ååæ¬æ¬å°è®°å½ä¸æ¥ï¼åæ¬ä»£ç ãæ¶æè®¾è®¡ãä»¥åé£äºæç§ä¹¦ä¸ä¸ä¼åè¯ä½ çå®æç»èã</p>
<h2 id="ä¸ragå°åºå¨è§£å³ä»ä¹é®é¢">ä¸ãRAGå°åºå¨è§£å³ä»ä¹é®é¢</h2>
<p>å¨å¨æä¹åï¼ææ³åèèRAGè¿ä¸ªæ¦å¿µï¼å ä¸ºå¾å¤åæ¥è§¦çæåå®¹æææ··ã<br>
<img alt="image.png" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3459816/202602/3459816-20260210220941390-682123327.png" class="lazyload"></p>
<p>å¤§æ¨¡åå¾å¼ºï¼ä½å®æä¸¤ä¸ªè´å½å¼±ç¹ï¼</p>
<p><strong>ç¬¬ä¸ï¼ç¥è¯ææªæ­¢æ¥æã</strong> GPT-4çè®­ç»æ°æ®æªæ­¢å°æä¸ªæ¶é´ç¹ï¼å®ä¸ç¥éä½ ä»¬å¬å¸ä¸å¨åå¸çæ°è§èï¼ä¹ä¸ç¥éä½ ä»¬æ¨å¤©åä¿®å¤çé£ä¸ªbugæ¯æä¹è§£å³çã</p>
<p><strong>ç¬¬äºï¼ä¼ä¸æ¬æ­£ç»å°è¡è¯´å«éã</strong> å½å¤§æ¨¡åéå°å®ä¸ç¥éçé®é¢æ¶ï¼å®ä¸ä¼èèå®å®è¯´æä¸ç¥éï¼èæ¯ä¼åºäºå®å­¦è¿çéç¨ç¥è¯ï¼ç»ä½ ç¼ä¸ä¸ªçèµ·æ¥å¾åçä½å¶å®æ¯éçç­æ¡ãè¿å°±æ¯æè°çå¹»è§ï¼Hallucinationï¼ã</p>
<p>RAGï¼Retrieval-Augmented Generationï¼æ£ç´¢å¢å¼ºçæï¼çæ ¸å¿æè·¯å¶å®å¾ç®åï¼<strong>å«è®©å¤§æ¨¡åé æ³è±¡åç­é¢ï¼åå¸®å®æåèèµææ¾åºæ¥ï¼è®©å®ç§çèµæåç­ã</strong><br>
<img alt="image.png" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3459816/202602/3459816-20260210220941050-1408320852.png" class="lazyload"><br>
å·ä½æ¥è¯´åä¸æ­¥ï¼</p>
<ol>
<li>æä½ çç§æææ¡£åæå°åï¼è½¬æåéå­èµ·æ¥</li>
<li>ç¨æ·æé®æ¶ï¼åæ ¹æ®é®é¢æ£ç´¢åºæç¸å³çææ¡£çæ®µ</li>
<li>æé®é¢åæ£ç´¢å°çåå®¹ä¸èµ·åç»å¤§æ¨¡åï¼è®©å®åºäºè¿äºææçæç­æ¡</li>
</ol>
<p>å¬èµ·æ¥ä¸å¤æå¯¹å§ï¼æå½æ¶ä¹æ¯è¿ä¹æ³çï¼ç¶åå°±è¸©äºä¸å åã</p>
<h2 id="äºç¬¬ä¸ä¸ªå¤§åææ¡£ååæ²¡é£ä¹ç®å">äºãç¬¬ä¸ä¸ªå¤§åï¼ææ¡£ååæ²¡é£ä¹ç®å</h2>
<p>ææåçæ¹æ¡ç¹å«ç²æ´ââç¨LangChainçRecursiveCharacterTextSplitterï¼è®¾ç½®chunk_size=500ï¼overlap=50ï¼ç´æ¥æææææ¡£åæå°åã<br>
<img alt="image.png" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3459816/202602/3459816-20260210220941617-840309759.png" class="lazyload"><br>
ä»£ç åèµ·æ¥ç¡®å®å¾ç®åï¼</p>
<pre><code class="language-python">from langchain.text_splitter import RecursiveCharacterTextSplitter

def naive_split(text):
    æåçç®åååæ¹æ¡ââåæ¥è¯æè¿æ¯ä¸ªå
    splitter = RecursiveCharacterTextSplitter(
        chunk_size=500,
        chunk_overlap=50,
        separators=[\n\n, \n, ã, ï¼, ï¼,  , ]
    )
    chunks = splitter.split_text(text)
    return chunks

# æµè¯ä¸ä¸
sample_text = 
# MySQLä¸»ä»åæ¢æä½æå

## 1. åç½®æ£æ¥
å¨æ§è¡ä¸»ä»åæ¢ä¹åï¼å¿é¡»å®æä»¥ä¸æ£æ¥ï¼
- ç¡®è®¤ä»åºåæ­¥ç¶ææ­£å¸¸ï¼Seconds_Behind_Master = 0ï¼
- ç¡®è®¤æ²¡ææ­£å¨æ§è¡çå¤§äºå¡
- éç¥ç¸å³ä¸å¡æ¹ï¼ç¡®è®¤åæ¢æ¶é´çªå£

## 2. åæ¢æ­¥éª¤
2.1 å¨ä¸»åºæ§è¡åªè¯»è®¾ç½®
SET GLOBAL read_only = 1;

2.2 ç­å¾ä»åºå®å¨åæ­¥
å¨ä»åºæ§è¡ SHOW SLAVE STATUSï¼ç¡®è®¤ Seconds_Behind_Master = 0

2.3 åæ­¢ä»åºå¤å¶
STOP SLAVE;
RESET SLAVE ALL;

## 3. åæ»æ¹æ¡
å¦æåæ¢å¤±è´¥ï¼æä»¥ä¸æ­¥éª¤åæ»...


chunks = naive_split(sample_text)
for i, chunk in enumerate(chunks):
    print(f Chunk {i+1} )
    print(chunk[:100] + ... if len(chunk) &gt; 100 else chunk)
</code></pre>
<p>çèµ·æ¥æ²¡æ¯çæ¯å§ï¼ä½å®éç¨èµ·æ¥é®é¢å¤§äºã</p>
<p>æä¸æ¬¡ç¨æ·é®ï¼MySQLåæ¢åéè¦ååªäºæ£æ¥ï¼ç³»ç»è¿åçææ¡£çæ®µæ¯è¿æ ·çï¼</p>
<pre><code>ç¡®è®¤æ²¡ææ­£å¨æ§è¡çå¤§äºå¡
- éç¥ç¸å³ä¸å¡æ¹ï¼ç¡®è®¤åæ¢æ¶é´çªå£

## 2. åæ¢æ­¥éª¤
2.1 å¨ä¸»åºæ§è¡åªè¯»è®¾ç½®
SET GLOBAL read_only = 1;
</code></pre>
<p>åç°é®é¢äºåï¼è¿ä¸ªçæ®µæ°å¥½ä»æ£æ¥æ­¥éª¤çä¸­é´åå¼äºï¼ç¬¬ä¸æ¡æ£æ¥é¡¹ç¡®è®¤ä»åºåæ­¥ç¶ææ­£å¸¸è¢«åå°äºä¸ä¸ä¸ªchunkéãç¨æ·é®çæ¯éè¦ååªäºæ£æ¥ï¼ç»ææä»¬ç»å¤§æ¨¡åçåèèµæéï¼ç¬¬ä¸æ¡æ£æ¥é¡¹å°±æ²¡åå«è¿å»ã</p>
<p><strong>æ ¸å¿æè®­ï¼æºæ¢°å°æå­æ°ååï¼ä¼ææ­ææ¡£çè¯­ä¹å®æ´æ§ã</strong></p>
<p>åæ¥ææ¹æäºåºäºè¯­ä¹ç»æçååç­ç¥ï¼</p>
<pre><code class="language-python">import re
from typing import List, Dict

class SmartDocumentSplitter:
    
    è¯­ä¹æç¥çææ¡£ååå¨
    æ ¸å¿æè·¯ï¼å°éææ¡£çåæç»æï¼ææ é¢ãæ®µè½ç­è¯­ä¹è¾¹çåå
    
    
    def __init__(self, max_chunk_size=800, min_chunk_size=100):
        self.max_chunk_size = max_chunk_size
        self.min_chunk_size = min_chunk_size
    
    def split_markdown(self, text: str) -&gt; List[Dict]:
        
        éå¯¹Markdownææ¡£çåå
        ä¿ææ é¢å±çº§ç»æï¼æ¯ä¸ªchunké½å¸¦ä¸å®æ´çä¸ä¸æè·¯å¾
        
        chunks = []
        current_headers = {1: , 2: , 3: }  # è®°å½å½åçæ é¢å±çº§
        
        # æè¡å¤çï¼è¯å«æ é¢ååå®¹
        lines = text.split('\n')
        current_content = []
        
        for line in lines:
            # æ£æµMarkdownæ é¢
            header_match = re.match(r'^(#{1,3})\s+(.+)$', line)
            
            if header_match:
                # éå°æ°æ é¢ï¼åä¿å­ä¹åçåå®¹
                if current_content:
                    chunk_text = '\n'.join(current_content).strip()
                    if len(chunk_text) &gt;= self.min_chunk_size:
                        chunks.append({
                            'content': chunk_text,
                            'headers': dict(current_headers),
                            'context_path': self._build_context_path(current_headers)
                        })
                    current_content = []
                
                # æ´æ°æ é¢å±çº§
                level = len(header_match.group(1))
                title = header_match.group(2)
                current_headers[level] = title
                
                # æ¸é¤ä¸çº§æ é¢
                for l in range(level + 1, 4):
                    current_headers[l] = 
                
                current_content.append(line)
            else:
                current_content.append(line)
                
                # å¦æå½ååå®¹è¶è¿æå¤§é¿åº¦ï¼å¼ºå¶ååï¼ä½å°½éå¨æ®µè½è¾¹çï¼
                content_so_far = '\n'.join(current_content)
                if len(content_so_far) &gt; self.max_chunk_size:
                    chunk_text = content_so_far.strip()
                    chunks.append({
                        'content': chunk_text,
                        'headers': dict(current_headers),
                        'context_path': self._build_context_path(current_headers)
                    })
                    current_content = []
        
        # å«å¿äºæåä¸æ®µ
        if current_content:
            chunk_text = '\n'.join(current_content).strip()
            if len(chunk_text) &gt;= self.min_chunk_size:
                chunks.append({
                    'content': chunk_text,
                    'headers': dict(current_headers),
                    'context_path': self._build_context_path(current_headers)
                })
        
        return chunks
    
    def _build_context_path(self, headers: Dict) -&gt; str:
        æå»ºå±çº§è·¯å¾ï¼æ¯å¦ï¼MySQLä¸»ä»åæ¢ &gt; åç½®æ£æ¥
        path_parts = [h for h in [headers[1], headers[2], headers[3]] if h]
        return ' &gt; '.join(path_parts) if path_parts else 'æªåç±»'
    
    def enrich_chunk_with_context(self, chunk: Dict) -&gt; str:
        
        å³é®æå·§ï¼ç»æ¯ä¸ªchunkå ä¸ä¸ä¸æåç¼
        è¿æ ·å³ä½¿åç¬çè¿ä¸ªçæ®µï¼ä¹è½ç¥éå®å±äºåªä¸ªç« è
        
        context = f[ææ¡£è·¯å¾ï¼{chunk['context_path']}]\n\n
        return context + chunk['content']


# å®éä½¿ç¨ç¤ºä¾
splitter = SmartDocumentSplitter(max_chunk_size=800)
chunks = splitter.split_markdown(sample_text)

print(fåååå± {len(chunks)} ä¸ªçæ®µ\n)
for i, chunk in enumerate(chunks):
    print(f=== Chunk {i+1} ===)
    print(fè·¯å¾ï¼{chunk['context_path']})
    print(fåå®¹é¢è§ï¼{chunk['content'][:150]}...)
    print()
</code></pre>
<p>è¿æ ·ååºæ¥çææå°±å¥½å¤äºãæ¯ä¸ªchunkå¼å¤´é½ä¼å¸¦ä¸å®çä½ç½®ä¿¡æ¯ï¼å¤§æ¨¡åå¨åç­æ¶è½æ´åç¡®å°çè§£è¿æ®µåå®¹çä¸ä¸æã</p>
<p>ä¸è¿è¯´å®è¯ï¼è¿ä¸ªæ¹æ¡ä¹ä¸æ¯ä¸è½çãå¯¹äºé£äºæ ¼å¼ä¸è§èçèææ¡£ï¼æ²¡ææ¸æ°çæ é¢ç»æï¼ï¼ååææä¾ç¶ä¸è¬ãåæ¥æåéå¯¹ä¸åç±»åçææ¡£åäºå·®å¼åå¤çï¼è¿ä¸ªæä»¬åé¢åè¯´ã</p>
<h2 id="ä¸ç¬¬äºä¸ªå¤§ååéæ£ç´¢çè¯­ä¹é¸¿æ²">ä¸ãç¬¬äºä¸ªå¤§åï¼åéæ£ç´¢çè¯­ä¹é¸¿æ²</h2>
<p>è§£å³äºååé®é¢ï¼ä¸ä¸æ­¥å°±æ¯åéååæ£ç´¢äºãæç¨çæ¯å¼æºçBGEæ¨¡ååEmbeddingï¼ç¨Milvusååéæ°æ®åºã</p>
<p>ç¬¬ä¸ççæ£ç´¢ä»£ç å¾ç´ç½ï¼</p>
<pre><code class="language-python">from sentence_transformers import SentenceTransformer
from pymilvus import connections, Collection, FieldSchema, CollectionSchema, DataType, utility
import numpy as np

class VectorStore:
    åéå­å¨åæ£ç´¢
    
    def __init__(self, model_name='BAAI/bge-base-zh-v1.5'):
        # å è½½Embeddingæ¨¡å
        self.model = SentenceTransformer(model_name)
        self.dim = 768  # BGE baseæ¨¡åçåéç»´åº¦
        
        # è¿æ¥Milvus
        connections.connect(default, host=localhost, port=19530)
        
    def create_collection(self, collection_name: str):
        åå»ºéå
        if utility.has_collection(collection_name):
            utility.drop_collection(collection_name)
        
        fields = [
            FieldSchema(name=id, dtype=DataType.INT64, is_primary=True, auto_id=True),
            FieldSchema(name=content, dtype=DataType.VARCHAR, max_length=4096),
            FieldSchema(name=context_path, dtype=DataType.VARCHAR, max_length=512),
            FieldSchema(name=embedding, dtype=DataType.FLOAT_VECTOR, dim=self.dim)
        ]
        schema = CollectionSchema(fields, description=ç¥è¯åºææ¡£)
        collection = Collection(collection_name, schema)
        
        # åå»ºç´¢å¼
        index_params = {
            metric_type: COSINE,
            index_type: IVF_FLAT,
            params: {nlist: 128}
        }
        collection.create_index(embedding, index_params)
        return collection
    
    def insert_documents(self, collection_name: str, chunks: list):
        æå¥ææ¡£
        collection = Collection(collection_name)
        
        contents = [chunk['content'] for chunk in chunks]
        context_paths = [chunk['context_path'] for chunk in chunks]
        
        # æ¹éçæEmbedding
        embeddings = self.model.encode(contents, normalize_embeddings=True)
        
        collection.insert([contents, context_paths, embeddings.tolist()])
        collection.flush()
        print(fæåæå¥ {len(chunks)} æ¡ææ¡£)
    
    def search(self, collection_name: str, query: str, top_k: int = 5):
        åºç¡æ£ç´¢
        collection = Collection(collection_name)
        collection.load()
        
        # çææ¥è¯¢åé
        query_embedding = self.model.encode([query], normalize_embeddings=True)
        
        results = collection.search(
            data=query_embedding.tolist(),
            anns_field=embedding,
            param={metric_type: COSINE, params: {nprobe: 16}},
            limit=top_k,
            output_fields=[content, context_path]
        )
        
        return results[0]
</code></pre>
<p>åºæ¬åè½æ¯æ²¡é®é¢çãä½å®éè·èµ·æ¥ï¼æåç°äºä¸ä¸ªè®©äººæççç°è±¡ââ<strong>ç¨æ·çå£è¯­åæé®åææ¡£çæ­£å¼è¡¨è¿°ä¹é´å­å¨å·¨å¤§çè¯­ä¹é¸¿æ²</strong>ã</p>
<p>ä¸¾ä¸ªä¾å­ï¼</p>
<ul>
<li>ç¨æ·é®ï¼æ°æ®åºæäºæä¹å</li>
<li>ææ¡£æ é¢æ¯ï¼MySQLæå¡å¼å¸¸æ¢å¤æä½æå</li>
</ul>
<p>è¿ä¸¤ä¸ªå¨è¯­ä¹ä¸æ¯ç¸å³çï¼ä½åéç¸ä¼¼åº¦å¯è½å¹¶ä¸é«ãå ä¸ºç¨æ·è¯´çæäºåææ¡£éçå¼å¸¸ï¼ç¨è¯å·®å¼å¾å¤§ã</p>
<p>æ´åçæ¯ï¼ææ¶åæ£ç´¢åºçTop 5ç»æéï¼çæ­£ç¸å³çé£ç¯å¯è½åªæå¨ç¬¬3æç¬¬4ä½ï¼ä½åä¸¤åæ¯ä¸äºçèµ·æ¥ç¸å³ä½å®éä¸æä¸å¯¹é¢çåå®¹ãå¦ææåªåTop 3åç»å¤§æ¨¡åï¼å¯è½å°±æ¼æäºæå³é®çä¿¡æ¯ã</p>
<p>åæ¥æéç¨äºä¸ä¸ªä¸¤é¶æ®µæ£ç´¢çç­ç¥ï¼<strong>åç¨åéæ£ç´¢åç²ç­ï¼åç¨éæåºæ¨¡ååç²¾æã</strong></p>
<pre><code class="language-python">from transformers import AutoModelForSequenceClassification, AutoTokenizer
import torch

class EnhancedRetriever:
    å¢å¼ºçæ£ç´¢å¨ï¼åéæ£ç´¢ + éæåº
    
    def __init__(self, vector_store: VectorStore):
        self.vector_store = vector_store
        
        # å è½½éæåºæ¨¡åï¼BGE Rerankerææä¸éï¼
        self.reranker_tokenizer = AutoTokenizer.from_pretrained('BAAI/bge-reranker-base')
        self.reranker_model = AutoModelForSequenceClassification.from_pretrained('BAAI/bge-reranker-base')
        self.reranker_model.eval()
    
    def retrieve_with_rerank(self, collection_name: str, query: str, 
                             initial_top_k: int = 20, final_top_k: int = 5):
        
        ä¸¤é¶æ®µæ£ç´¢ï¼
        1. åéæ£ç´¢å¬å initial_top_k ä¸ªåé
        2. ç¨éæåºæ¨¡åç²¾æï¼è¿å final_top_k ä¸ªç»æ
        
        # ç¬¬ä¸é¶æ®µï¼åéæ£ç´¢ï¼å¬åæ´å¤åéï¼
        initial_results = self.vector_store.search(collection_name, query, top_k=initial_top_k)
        
        if not initial_results:
            return []
        
        # åå¤éæåº
        candidates = []
        for hit in initial_results:
            candidates.append({
                'content': hit.entity.get('content'),
                'context_path': hit.entity.get('context_path'),
                'vector_score': hit.score  # ä¿çåéæ£ç´¢å¾åï¼ç¨äºè°è¯
            })
        
        # ç¬¬äºé¶æ®µï¼éæåº
        rerank_scores = self._compute_rerank_scores(query, [c['content'] for c in candidates])
        
        for i, score in enumerate(rerank_scores):
            candidates[i]['rerank_score'] = score
        
        # æéæåºåæ°æåº
        candidates.sort(key=lambda x: x['rerank_score'], reverse=True)
        
        return candidates[:final_top_k]
    
    def _compute_rerank_scores(self, query: str, documents: list) -&gt; list:
        è®¡ç®queryåæ¯ä¸ªææ¡£çç¸å³æ§åæ°
        scores = []
        
        with torch.no_grad():
            for doc in documents:
                # Rerankerçè¾å¥æ ¼å¼æ¯ [query, document]
                inputs = self.reranker_tokenizer(
                    [[query, doc]], 
                    padding=True, 
                    truncation=True, 
                    max_length=512, 
                    return_tensors='pt'
                )
                outputs = self.reranker_model(**inputs)
                score = outputs.logits.squeeze().item()
                scores.append(score)
        
        return scores
    
    def retrieve_with_query_expansion(self, collection_name: str, query: str, 
                                       llm_client, top_k: int = 5):
        
        è¿é¶æå·§ï¼æ¥è¯¢æ©å±
        ç¨å¤§æ¨¡åæ¹åç¨æ·é®é¢ï¼çæå¤ä¸ªåä½ï¼ååå¹¶æ£ç´¢ç»æ
        
        # è®©å¤§æ¨¡åå¸®æä»¬æ©å±æ¥è¯¢
        expansion_prompt = fè¯·å°ä¸é¢è¿ä¸ªé®é¢æ¹åæ3ä¸ªä¸åçè¡¨è¾¾æ¹å¼ï¼ä¿æææç¸åä½ç¨è¯ä¸åã
æ¯è¡è¾åºä¸ä¸ªæ¹åç»æï¼ä¸è¦åºå·ï¼ä¸è¦å¶ä»è§£éã

åé®é¢ï¼{query}
        
        expanded_queries = llm_client.generate(expansion_prompt).strip().split('\n')
        expanded_queries = [q.strip() for q in expanded_queries if q.strip()]
        
        # å ä¸åå§æ¥è¯¢
        all_queries = [query] + expanded_queries[:3]  # æå¤å3ä¸ªæ©å±æ¥è¯¢
        
        print(fæ©å±åçæ¥è¯¢ï¼{all_queries})  # è°è¯ç¨
        
        # å¯¹æ¯ä¸ªæ¥è¯¢åå«æ£ç´¢
        all_candidates = {}
        for q in all_queries:
            results = self.vector_store.search(collection_name, q, top_k=10)
            for hit in results:
                content = hit.entity.get('content')
                if content not in all_candidates:
                    all_candidates[content] = {
                        'content': content,
                        'context_path': hit.entity.get('context_path'),
                        'best_score': hit.score,
                        'hit_count': 1
                    }
                else:
                    # è¢«å¤ä¸ªæ¥è¯¢å½ä¸­çææ¡£ï¼å¢å æé
                    all_candidates[content]['hit_count'] += 1
                    all_candidates[content]['best_score'] = max(
                        all_candidates[content]['best_score'], 
                        hit.score
                    )
        
        # ç»¼åè¯åï¼å½ä¸­æ¬¡æ° * æé«å¾å
        candidates = list(all_candidates.values())
        for c in candidates:
            c['combined_score'] = c['hit_count'] * c['best_score']
        
        candidates.sort(key=lambda x: x['combined_score'], reverse=True)
        return candidates[:top_k]
</code></pre>
<p>æ¥è¯¢æ©å±è¿æç¹å«å¥½ç¨ãæ¯å¦ç¨æ·é®æ°æ®åºæäºæä¹åï¼å¤§æ¨¡åå¯è½ä¼æ©å±æï¼</p>
<ul>
<li>MySQLæå¡æéå¦ä½å¤ç</li>
<li>æ°æ®åºæ æ³è¿æ¥çè§£å³æ¹æ¡</li>
<li>æ°æ®åºå®æºæ¢å¤æ­¥éª¤</li>
</ul>
<p>è¿å ä¸ªæ¥è¯¢ä¸èµ·æ£ç´¢ï¼è½è¦çæ´å¤çç¸å³ææ¡£ã</p>
<h2 id="åç¬¬ä¸ä¸ªå¤§åpromptå·¥ç¨çé¨éæ¯æ³è±¡ä¸­æ·±">åãç¬¬ä¸ä¸ªå¤§åï¼Promptå·¥ç¨çé¨éæ¯æ³è±¡ä¸­æ·±</h2>
<p>æ£ç´¢çé®é¢è§£å³äºï¼æ¥ä¸æ¥å°±æ¯ææ£ç´¢å°çåå®¹åç¨æ·é®é¢ä¸èµ·åç»å¤§æ¨¡åäºãè¿ä¸æ­¥ææ¬ä»¥ä¸ºæç®åï¼æ²¡æ³å°ä¹è¸©äºä¸å°åã</p>
<p>æåçPromptç¹å«æ´ç´ ï¼</p>
<pre><code class="language-python">def build_naive_prompt(query: str, context_docs: list) -&gt; str:
    æåçç®åPromptââåæ¥è¯æå¤ªå¤©çäº
    context = \n\n.join([doc['content'] for doc in context_docs])
    
    prompt = fæ ¹æ®ä»¥ä¸åèèµæåç­ç¨æ·é®é¢ã

åèèµæï¼
{context}

ç¨æ·é®é¢ï¼{query}

è¯·åç­ï¼
    
    return prompt
</code></pre>
<p>è¿ä¸ªPromptæå ä¸ªä¸¥éé®é¢ï¼</p>
<p><strong>é®é¢ä¸ï¼å¤§æ¨¡åä¸ç¥éä»ä¹æ¶åè¯¥è¯´ä¸ç¥éã</strong> å½åèèµæéç¡®å®æ²¡æç­æ¡æ¶ï¼å®è¿æ¯ä¼ç¼ä¸ä¸ªåºæ¥ã</p>
<p><strong>é®é¢äºï¼æ²¡æå¼å¯¼å¤§æ¨¡åè¯´æä¿¡æ¯æ¥æºã</strong> ç¨æ·çå°ç­æ¡ï¼ä¸ç¥éæ¯ä»åªç¯ææ¡£éæ¥çï¼æ æ³è¿½æº¯åéªè¯ã</p>
<p><strong>é®é¢ä¸ï¼å¯¹äºå¤æé®é¢ï¼åç­çç»æä¸å¤æ¸æ°ã</strong></p>
<p>åæ¥è¿­ä»£äºå¾å¤çï¼æç»ç¨³å®ä¸æ¥çPromptæ¯è¿æ ·çï¼</p>
<pre><code class="language-python">def build_rag_prompt(query: str, context_docs: list, 
                     include_sources: bool = True) -&gt; str:
    
    çäº§ç¯å¢ä½¿ç¨çPromptæ¨¡æ¿
    å³é®è®¾è®¡ï¼æç¡®è§è²å®ä½ãéå¶åç­èå´ãè¦æ±æ æ³¨æ¥æº
    
    
    # æ ¼å¼åä¸ä¸æï¼æ¯æ®µé½æ æ³¨æ¥æº
    context_parts = []
    for i, doc in enumerate(context_docs, 1):
        source = doc.get('context_path', 'æªç¥æ¥æº')
        context_parts.append(fãèµæ{i}ï¼æ¥æºï¼{source}ã\n{doc['content']})
    
    context = \n\n\n\n.join(context_parts)
    
    prompt = fä½ æ¯ä¸ä¸ªä¼ä¸åé¨ç¥è¯åºå©æï¼ä¸é¨å¸®å©åå·¥æ¥æ¾åçè§£å¬å¸åé¨ææ¡£ã

## ä½ çå·¥ä½åå

1. **åªæ ¹æ®æä¾çåèèµæåç­é®é¢**ï¼ä¸è¦ä½¿ç¨ä½ èªå·±çç¥è¯ã
2. å¦æåèèµæä¸­æ²¡æç¸å³ä¿¡æ¯ï¼è¯·æç¡®è¯´æ ¹æ®ç°æèµæï¼ææ æ³æ¾å°å³äºè¿ä¸ªé®é¢çä¿¡æ¯ï¼å¹¶å»ºè®®ç¨æ·èç³»ç¸å³é¨é¨ææ¢ä¸ªå³é®è¯æç´¢ã
3. åç­æ¶è¯·æ æ³¨ä¿¡æ¯æ¥æºï¼æ ¼å¼å¦ãèµæ1ãï¼æ¹ä¾¿ç¨æ·è¿½æº¯åæã
4. å¯¹äºæä½ç±»é®é¢ï¼è¯·ææ­¥éª¤æ¸æ°å°ååºï¼å¯¹äºæ¦å¿µç±»é®é¢ï¼åç»åºç®æå®ä¹åå±å¼è§£éã
5. å¦æä¸åèµæä¸­çä¿¡æ¯æå²çªï¼è¯·æåºå·®å¼å¹¶è¯´æåèªçéç¨åºæ¯ã

## åèèµæ

{context}

## ç¨æ·é®é¢

{query}

## åç­è¦æ±

è¯·æ ¹æ®ä¸è¿°åèèµæåç­ç¨æ·é®é¢ãè®°ä½ï¼
- åªä½¿ç¨åèèµæä¸­çä¿¡æ¯
- æ æ³¨ä¿¡æ¯æ¥æº
- æ²¡æææ¡çåå®¹ä¸è¦ç¼é 

    
    return prompt


def build_conversational_prompt(query: str, context_docs: list, 
                                 chat_history: list = None) -&gt; str:
    
    æ¯æå¤è½®å¯¹è¯çPrompt
    éè¦å¸¦ä¸åå²å¯¹è¯è®°å½ï¼è®©å¤§æ¨¡åçè§£ä¸ä¸æ
    
    
    context_parts = []
    for i, doc in enumerate(context_docs, 1):
        source = doc.get('context_path', 'æªç¥æ¥æº')
        context_parts.append(fãèµæ{i}ï¼æ¥æºï¼{source}ã\n{doc['content']})
    context = \n\n\n\n.join(context_parts)
    
    # æ ¼å¼ååå²å¯¹è¯
    history_text = 
    if chat_history:
        history_parts = []
        for turn in chat_history[-5:]:  # åªä¿çæè¿5è½®ï¼é¿åå¤ªé¿
            history_parts.append(fç¨æ·ï¼{turn['user']})
            history_parts.append(få©æï¼{turn['assistant']})
        history_text = \n.join(history_parts)
    
    prompt = fä½ æ¯ä¸ä¸ªä¼ä¸åé¨ç¥è¯åºå©æã

## åèèµæ

{context}

## å¯¹è¯åå²

{history_text if history_text else ï¼è¿æ¯å¯¹è¯çå¼å§ï¼}

## å½åé®é¢

ç¨æ·ï¼{query}

## åç­åå

1. ä¼åæ ¹æ®åèèµæåç­ï¼å¦æ ç¸å³ä¿¡æ¯è¯·æç¡®è¯´æ
2. èèå¯¹è¯åå²çä¸ä¸æï¼å¦ç¨æ·è¯´å®å¯è½æä»£ä¹åæå°çæ¦å¿µï¼
3. æ æ³¨ä¿¡æ¯æ¥æº

å©æï¼
    
    return prompt
</code></pre>
<p>å³äºPromptï¼æè¿æ³åäº«ä¸ä¸ªå¾éè¦çç»éªï¼<strong>ä¸è¦è¯å¾å¨ä¸ä¸ªPromptéå¡å¤ªå¤æä»¤</strong>ã</p>
<p>ä¸å¼å§ææåç§è¦æ±é½åè¿å»ï¼åç­è¦åç¡®ãè¦ç®æ´ãè¦åå¥½ãè¦ä¸ä¸ãè¦æ æ³¨æ¥æºãè¦åæ­¥éª¤ãéå°ä¸ç¡®å®è¦è¯´ä¸ç¥éâ¦â¦ç»æåç°æ¨¡ååèè¢«ç»æäºï¼ææ¶åé¡¾äºè¿ä¸ªå¿äºé£ä¸ªã</p>
<p>åæ¥æçåæ³æ¯ï¼<strong>åºåæ ¸å¿æä»¤åä¼åæä»¤ï¼æ ¸å¿æä»¤å¿é¡»ä¿çï¼ä¼åæä»¤å¯ä»¥æ ¹æ®é®é¢ç±»åå¨æè°æ´ã</strong></p>
<pre><code class="language-python">class PromptBuilder:
    Promptæå»ºå¨ï¼æ ¹æ®é®é¢ç±»åå¨æè°æ´
    
    # æ ¸å¿æä»¤ââä»»ä½æåµé½å¿é¡»åå«
    CORE_INSTRUCTIONS = 
1. åªä½¿ç¨åèèµæä¸­çä¿¡æ¯åç­ï¼ä¸è¦ç¼é 
2. èµæä¸­æ²¡æçä¿¡æ¯ï¼æç¡®è¯´æ æ³æ¾å°ç¸å³ä¿¡æ¯
3. æ æ³¨ä¿¡æ¯æ¥æºãèµæXã

    
    # æä½ç±»é®é¢çé¢å¤æä»¤
    PROCEDURE_INSTRUCTIONS = 
åç­æ ¼å¼è¦æ±ï¼
- ææ­¥éª¤ç¼å·ååºï¼ç¬¬ä¸æ­¥ãç¬¬äºæ­¥...ï¼
- æ¯ä¸ªæ­¥éª¤è¦æç¡®æä½å¯¹è±¡åæä½å¨ä½
- éè¦çè­¦åææ³¨æäºé¡¹ç¨â ï¸æ åº

    
    # æ¦å¿µè§£éç±»é®é¢çé¢å¤æä»¤
    CONCEPT_INSTRUCTIONS = 
åç­æ ¼å¼è¦æ±ï¼
- åç¨ä¸å¥è¯ç»åºæ ¸å¿å®ä¹
- åè¯¦ç»è§£éå³é®ç¹
- å¦æå¿è¦ï¼ä¸¾ä¾è¯´æ

    # æéææ¥ç±»é®é¢çé¢å¤æä»¤
    TROUBLESHOOT_INSTRUCTIONS = 
åç­æ ¼å¼è¦æ±ï¼
- åååºå¯è½çåå 
- éå¯¹æ¯ä¸ªåå ç»åºææ¥æ¹æ³
- ç»åºè§£å³æ¹æ¡æè§é¿å»ºè®®

    
    @classmethod
    def build(cls, query: str, context_docs: list, question_type: str = general) -&gt; str:
        æ ¹æ®é®é¢ç±»åæå»ºPrompt
        
        # ç®åçé®é¢åç±»é»è¾ï¼å®éé¡¹ç®ä¸­å¯ä»¥ç¨åç±»æ¨¡åï¼
        if question_type == auto:
            question_type = cls._classify_question(query)
        
        extra_instructions = 
        if question_type == procedure:
            extra_instructions = cls.PROCEDURE_INSTRUCTIONS
        elif question_type == concept:
            extra_instructions = cls.CONCEPT_INSTRUCTIONS
        elif question_type == troubleshoot:
            extra_instructions = cls.TROUBLESHOOT_INSTRUCTIONS
        
        context = cls._format_context(context_docs)
        
        prompt = fä½ æ¯ä¼ä¸åé¨ç¥è¯åºå©æã

## å¿é¡»éµå®çè§å
{cls.CORE_INSTRUCTIONS}

{f## åç­æ ¼å¼{extra_instructions} if extra_instructions else }

## åèèµæ
{context}

## ç¨æ·é®é¢
{query}

è¯·åç­ï¼
        
        return prompt
    
    @classmethod
    def _classify_question(cls, query: str) -&gt; str:
        ç®åçé®é¢åç±»ï¼åºäºå³é®è¯ï¼
        procedure_keywords = [æä¹å, å¦ä½æä½, æ­¥éª¤, æµç¨, ææ ·]
        concept_keywords = [æ¯ä»ä¹, ä»ä¹æ¯, å®ä¹, è§£é, åºå«]
        troubleshoot_keywords = [ä¸ºä»ä¹, æ¥é, å¤±è´¥, å¼å¸¸, é®é¢, æé]
        
        query_lower = query.lower()
        
        if any(kw in query_lower for kw in procedure_keywords):
            return procedure
        elif any(kw in query_lower for kw in concept_keywords):
            return concept
        elif any(kw in query_lower for kw in troubleshoot_keywords):
            return troubleshoot
        else:
            return general
    
    @classmethod
    def _format_context(cls, context_docs: list) -&gt; str:
        parts = []
        for i, doc in enumerate(context_docs, 1):
            source = doc.get('context_path', 'æªç¥æ¥æº')
            parts.append(fãèµæ{i}ï¼æ¥æºï¼{source}ã\n{doc['content']})
        return \n\n\n\n.join(parts)
</code></pre>
<h2 id="äºä¸²èµ·æ¥å®æ´çrag-pipeline">äºãä¸²èµ·æ¥ï¼å®æ´çRAG Pipeline</h2>
<p>åé¢è¯´äºä¸å ç»èï¼ç°å¨æå®ä»¬ä¸²æä¸ä¸ªå®æ´çPipelineï¼<br>
<img alt="Mermaid Chart - Create complex, visual diagrams with text.-2026-01-13-113354.png" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3459816/202602/3459816-20260210220941180-132831547.png" class="lazyload"></p>
<pre><code class="language-python">from openai import OpenAI
from typing import List, Dict, Optional
import json

class RAGPipeline:
    
    å®æ´çRAGå¤çæµç¨
    ææ¡£åå -&gt; åéåå­å¨ -&gt; æ£ç´¢ -&gt; éæåº -&gt; çæåç­
    
    
    def __init__(self, 
                 llm_base_url: str = https://api.deepseek.com,
                 llm_api_key: str = your-api-key,
                 llm_model: str = deepseek-chat):
        
        # åå§ååä¸ªç»ä»¶
        self.splitter = SmartDocumentSplitter(max_chunk_size=800)
        self.vector_store = VectorStore()
        self.retriever = EnhancedRetriever(self.vector_store)
        
        # åå§åLLMå®¢æ·ç«¯ï¼è¿éç¨DeepSeekï¼ä¹å¯ä»¥æ¢æå¶ä»çï¼
        self.llm_client = OpenAI(base_url=llm_base_url, api_key=llm_api_key)
        self.llm_model = llm_model
        
        self.collection_name = knowledge_base
    
    def ingest_documents(self, documents: List[Dict]):
        
        ææ¡£å¥åº
        documentsæ ¼å¼ï¼[{title: ææ¡£æ é¢, content: ææ¡£åå®¹, source: æ¥æº}]
        
        print(få¼å§å¤ç {len(documents)} ç¯ææ¡£...)
        
        all_chunks = []
        for doc in documents:
            # å¨åå®¹åå ä¸æ é¢ï¼å¸®å©ååå¨è¯å«ç»æ
            full_content = f# {doc['title']}\n\n{doc['content']}
            
            chunks = self.splitter.split_markdown(full_content)
            
            # ç»æ¯ä¸ªchunkå ä¸ææ¡£æ¥æºä¿¡æ¯
            for chunk in chunks:
                chunk['source_doc'] = doc.get('source', doc['title'])
            
            all_chunks.extend(chunks)
        
        print(fåååå± {len(all_chunks)} ä¸ªçæ®µ)
        
        # åå»ºéåå¹¶æå¥
        self.vector_store.create_collection(self.collection_name)
        self.vector_store.insert_documents(self.collection_name, all_chunks)
        
        print(ææ¡£å¥åºå®æï¼)
    
    def query(self, 
              question: str, 
              chat_history: Optional[List[Dict]] = None,
              top_k: int = 5,
              use_rerank: bool = True) -&gt; Dict:
        
        å¤çç¨æ·æ¥è¯¢
        è¿åï¼{answer: åç­åå®¹, sources: [å¼ç¨çæ¥æº], retrieved_docs: [æ£ç´¢å°çææ¡£]}
        
        
        # 1. æ£ç´¢ç¸å³ææ¡£
        if use_rerank:
            retrieved_docs = self.retriever.retrieve_with_rerank(
                self.collection_name, question, 
                initial_top_k=20, final_top_k=top_k
            )
        else:
            results = self.vector_store.search(self.collection_name, question, top_k=top_k)
            retrieved_docs = [{
                'content': hit.entity.get('content'),
                'context_path': hit.entity.get('context_path'),
                'score': hit.score
            } for hit in results]
        
        if not retrieved_docs:
            return {
                answer: æ±æ­ï¼ææ²¡ææ¾å°ä¸æ¨é®é¢ç¸å³çèµæãæ¨å¯ä»¥å°è¯æ¢ä¸ªå³é®è¯ï¼æèç³»ç¸å³é¨é¨è·åå¸®å©ã,
                sources: [],
                retrieved_docs: []
            }
        
        # 2. æå»ºPrompt
        if chat_history:
            prompt = build_conversational_prompt(question, retrieved_docs, chat_history)
        else:
            prompt = PromptBuilder.build(question, retrieved_docs, question_type=auto)
        
        # 3. è°ç¨LLMçæåç­
        response = self.llm_client.chat.completions.create(
            model=self.llm_model,
            messages=[{role: user, content: prompt}],
            temperature=0.3,  # ç¥è¯åºé®ç­ç¨è¾ä½çtemperature
            max_tokens=2000
        )
        
        answer = response.choices[0].message.content
        
        # 4. æåå¼ç¨çæ¥æº
        sources = list(set([doc.get('context_path', 'æªç¥æ¥æº') for doc in retrieved_docs]))
        
        return {
            answer: answer,
            sources: sources,
            retrieved_docs: retrieved_docs
        }
    
    def evaluate_response(self, question: str, answer: str, 
                          ground_truth: str = None) -&gt; Dict:
        
        åç­è´¨éè¯ä¼°ï¼å¯éï¼
        ç¨LLMè¯ä¼°åç­çè´¨éï¼æ¹ä¾¿æç»­ä¼å
        
        eval_prompt = fè¯·è¯ä¼°ä»¥ä¸é®ç­çè´¨éã

é®é¢ï¼{question}

åç­ï¼{answer}

{fåèç­æ¡ï¼{ground_truth} if ground_truth else }

è¯·ä»ä»¥ä¸ç»´åº¦è¯åï¼1-5åï¼å¹¶è¯´æçç±ï¼
1. ç¸å³æ§ï¼åç­æ¯å¦åé¢
2. åç¡®æ§ï¼ä¿¡æ¯æ¯å¦æ­£ç¡®
3. å®æ´æ§ï¼æ¯å¦å®æ´è§£ç­äºé®é¢
4. å¯è¯»æ§ï¼è¡¨è¿°æ¯å¦æ¸æ°ææ

è¯·ç¨JSONæ ¼å¼è¾åºï¼{{relevance: åæ°, accuracy: åæ°, completeness: åæ°, readability: åæ°, comments: è¯ä»·è¯´æ}}
        
        response = self.llm_client.chat.completions.create(
            model=self.llm_model,
            messages=[{role: user, content: eval_prompt}],
            temperature=0
        )
        
        try:
            eval_result = json.loads(response.choices[0].message.content)
            return eval_result
        except:
            return {error: è¯ä¼°ç»æè§£æå¤±è´¥}


# ä½¿ç¨ç¤ºä¾
if __name__ == __main__:
    # åå§åPipeline
    rag = RAGPipeline(
        llm_base_url=https://api.deepseek.com,
        llm_api_key=your-api-key,
        llm_model=deepseek-chat
    )
    
    # åå¤æµè¯ææ¡£
    test_documents = [
        {
            title: MySQLä¸»ä»åæ¢æä½æå,
            content: """
				## 1. åç½®æ£æ¥
				å¨æ§è¡ä¸»ä»åæ¢ä¹åï¼å¿é¡»å®æä»¥ä¸æ£æ¥ï¼
				- ç¡®è®¤ä»åºåæ­¥ç¶ææ­£å¸¸ï¼Seconds_Behind_Master = 0ï¼
				- ç¡®è®¤æ²¡ææ­£å¨æ§è¡çå¤§äºå¡
				- éç¥ç¸å³ä¸å¡æ¹ï¼ç¡®è®¤åæ¢æ¶é´çªå£

				## 2. åæ¢æ­¥éª¤
				### 2.1 å¨ä¸»åºæ§è¡åªè¯»è®¾ç½®
				SET GLOBAL read_only = 1;
				### 2.2 ç­å¾ä»åºå®å¨åæ­¥
				å¨ä»åºæ§è¡ SHOW SLAVE STATUSï¼ç¡®è®¤ Seconds_Behind_Master = 0

				### 2.3 åæ­¢ä»åºå¤å¶å¹¶æåä¸ºä¸»åº
				STOP SLAVE;
				RESET SLAVE ALL;
				SET GLOBAL read_only = 0;

				## 3. åæ¢åéªè¯
				- ç¡®è®¤æ°ä¸»åºå¯ä»¥æ­£å¸¸åå¥
				- ç¡®è®¤åºç¨è¿æ¥å·²åæ¢å°æ°ä¸»åº
				- çæ§æ°ä¸»åºçæ§è½ææ 
				""",
            source: DBAå¢éææ¡£
        }
    ]
    
    # å¥åº
    rag.ingest_documents(test_documents)
    
    # æµè¯æ¥è¯¢
    result = rag.query(MySQLåæ¢åéè¦ååªäºæ£æ¥ï¼)
    
    print(= * 50)
    print(é®é¢ï¼MySQLåæ¢åéè¦ååªäºæ£æ¥ï¼)
    print(= * 50)
    print(f\nåç­ï¼\n{result['answer']})
    print(f\nåèæ¥æºï¼{result['sources']})

</code></pre>
<h2 id="å­ä¸çº¿åçä¸äºç»éªæè®­">å­ãä¸çº¿åçä¸äºç»éªæè®­</h2>
<p>ç³»ç»ä¸çº¿å°ç°å¨å·®ä¸å¤ä¸¤ä¸ªæäºï¼æé´åè¸©äºä¸å°åï¼è¿éæå ä¸ªå°è±¡ææ·±çè¯´è¯´ã</p>
<h3 id="æè®­ä¸ç¨æ·çé®é¢åå¥ç¾æª">æè®­ä¸ï¼ç¨æ·çé®é¢åå¥ç¾æª</h3>
<p>æä»¬å¨è®¾è®¡æ¶åè®¾ç¨æ·ä¼é®MySQLæä¹åä¸»ä»åæ¢è¿ç§æ­£å¸¸é®é¢ãä½å®éä¸å¢ï¼</p>
<p>æäººé®ï¼ä¸æ¬¡é£ä¸ªäºææä¹å¤ççæ¥çï¼ââæ²¡æä»»ä½ä¸ä¸æï¼ç³»ç»æ ¹æ¬ä¸ç¥éé£ä¸ªäºææ¯åªä¸ªã</p>
<p>æäººé®ï¼å¸®æåä¸ªSQLãââè¿æ ¹æ¬ä¸æ¯ç¥è¯åºé®ç­ï¼è¿æ¯è®©å¤§æ¨¡åå¸®åä»£ç ã</p>
<p>è¿æäººé®ï¼å¨åï¼ââæä¹ä¸ç¥éä»æ³å¹²å¥ã</p>
<p>åæ¥æå äºä¸ä¸ªæå¾è¯å«å±ï¼åå¤æ­ç¨æ·çé®é¢æ¯å¦å±äºç¥è¯åºé®ç­çèç´ï¼</p>
<pre><code class="language-python">def classify_intent(self, query: str) -&gt; str:
    """è¯å«ç¨æ·æå¾"""
    intent_prompt = f"""å¤æ­ç¨æ·è¾å¥çæå¾ç±»å«ï¼åªè¾åºç±»å«åç§°ï¼
- knowledge_queryï¼æ¥è¯¢ç¥è¯åºä¿¡æ¯ï¼å¦è¯¢é®æµç¨ãè§èãæä½æ¹æ³ï¼
- code_requestï¼è¯·æ±çæä»£ç 
- chitchatï¼é²èææ æç¡®æå¾
- otherï¼å¶ä»

ç¨æ·è¾å¥ï¼{query}

æå¾ç±»å«ï¼"""
    
    response = self.llm_client.chat.completions.create(
        model=self.llm_model,
        messages=[{"role": "user", "content": intent_prompt}],
        temperature=0,
        max_tokens=20
    )
    
    return response.choices[0].message.content.strip()
</code></pre>
<p>å¯¹äºéç¥è¯åºé®ç­çæå¾ï¼ç»ç¨æ·ä¸ä¸ªåå¥½çæç¤ºèä¸æ¯ç¡¬çå¤´ç®æ£ç´¢ã</p>
<h3 id="æè®­äºå·å¯å¨æ¶çå°´å°¬">æè®­äºï¼å·å¯å¨æ¶çå°´å°¬</h3>
<p>ç³»ç»åä¸çº¿æ¶ï¼ç¥è¯åºéçææ¡£ä¸å¤ï¼è¦ççåºæ¯æéãç¨æ·é®äºå ä¸ªé®é¢é½ç­ä¸ä¸æ¥ï¼ä½éªç¹å«å·®ï¼äºæ¯å°±ä¸æ¥ç¨äºã</p>
<p>åæ¥çè§£å³åæ³ï¼</p>
<ol>
<li>ä¸çº¿ååæ¢³çé«é¢é®é¢ï¼ç¡®ä¿è³å°è¿äºé®é¢è½åç­å¥½</li>
<li>æäºä¸ä¸ªé®é¢æ¶éåè½ï¼å¯¹äºç­ä¸ä¸æ¥çé®é¢ï¼è®°å½ä¸æ¥åé¦ç»åå®¹å¢éï¼è®©ä»ä»¬è¡¥åç¸å³ææ¡£</li>
<li>åäºä¸ä¸ªååºç­ç¥ââå¦ææ£ç´¢ä¸å°é«ç¸å³åº¦çåå®¹ï¼å°±å±ç¤ºç¸å³æ¨èï¼æä¸äºç¸ä¼¼åº¦å°å¯çææ¡£æ é¢ååºæ¥ï¼å¼å¯¼ç¨æ·èªå·±å»ç</li>
</ol>
<h3 id="æè®­ä¸ææ¡£æ´æ°çåæ­¥é®é¢">æè®­ä¸ï¼ææ¡£æ´æ°çåæ­¥é®é¢</h3>
<p>ç¥è¯åºçææ¡£æ¯ä¼æ´æ°çãèçæ¬çæä½æååºå¼äºï¼æ°çæ¬åå¸äºãä½å¦æåéæ°æ®åºéè¿å­çèçæ¬çåå®¹ï¼ç¨æ·æ£ç´¢å°çå¯è½æ¯è¿æ¶ä¿¡æ¯ã</p>
<p>è¿ä¸ªé®é¢è¯´èµ·æ¥ç®åï¼åèµ·æ¥æºéº»ç¦çãæä»¬æåçæ¹æ¡æ¯ï¼</p>
<ol>
<li>æ¯ä¸ªææ¡£å¥åºæ¶è®°å½çæ¬å·åæ´æ°æ¶é´</li>
<li>å®æå¨ééæ°å¥åºï¼æä»¬æ¯æ¯å¨ä¸æ¬¡ï¼</li>
<li>å¯¹äºç´§æ¥æ´æ°çéè¦ææ¡£ï¼æ¯ææå¨è§¦ååç¯éå¥åº</li>
</ol>
<h2 id="ä¸æ§è½ä¼åè®©ç³»ç»ä¸é£ä¹æ¢">ä¸ãæ§è½ä¼åï¼è®©ç³»ç»ä¸é£ä¹æ¢</h2>
<p>RAGç³»ç»æä¸ªè®©äººå¤´ç¼çé®é¢ââæ¢ã</p>
<p>æ´ä¸ªæµç¨è·ä¸éï¼Embeddingç¼ç ãåéæ£ç´¢ãéæåºãLLMçæï¼å¨é¨å èµ·æ¥å¯è½è¦å¥½å ç§ãç¨æ·ä½éªå°±å¾å·®ï¼é®ä¸ä¸ªé®é¢è¦ç­åå¤©ã</p>
<p><img alt="image.png" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3459816/202602/3459816-20260210220941381-1747360926.png" class="lazyload"></p>
<p>å ä¸ªä¼åæªæ½ï¼</p>
<pre><code class="language-python">import asyncio
from functools import lru_cache
import hashlib

class OptimizedRAG:
    æ§è½ä¼åçRAG
    
    def __init__(self):
        # ç¼å­ç­é¨æ¥è¯¢çç»æ
        self.query_cache = {}
        self.cache_ttl = 3600  # 1å°æ¶è¿æ
    
    @lru_cache(maxsize=1000)
    def _compute_query_embedding(self, query: str):
        
        Embeddingç»æç¼å­
        åæ ·çé®é¢ä¸ç¨éå¤è®¡ç®åé
        
        return self.model.encode([query], normalize_embeddings=True)[0]
    
    def _get_cache_key(self, query: str) -&gt; str:
        çæç¼å­key
        return hashlib.md5(query.lower().strip().encode()).hexdigest()
    
    async def stream_query(self, question: str):
        
        æµå¼è¾åº
        ä¸ç¨ç­æ´ä¸ªåç­çæå®ï¼è¾¹çæè¾¹è¾åº
        
        retrieved_docs = await asyncio.to_thread(
            self.retriever.retrieve_with_rerank,
            self.collection_name, question, 20, 5
        )
        
        prompt = PromptBuilder.build(question, retrieved_docs, question_type=auto)
        
        # ä½¿ç¨æµå¼API
        stream = self.llm_client.chat.completions.create(
            model=self.llm_model,
            messages=[{role: user, content: prompt}],
            temperature=0.3,
            stream=True  # å¼å¯æµå¼
        )
        
        for chunk in stream:
            if chunk.choices[0].delta.content:
                yield chunk.choices[0].delta.content
</code></pre>
<p>æµå¼è¾åºè¿ä¸ç¹ç¹å«éè¦ãç¨æ·é®å®é®é¢åï¼é©¬ä¸å°±è½çå°åç­å¨æå­ï¼å¿çä¸å°±ä¸ä¼è§å¾é£ä¹æ¢äºã</p>
<h2 id="å«åé¡¾ä¸æè">å«ãåé¡¾ä¸æè</h2>
<p>æè¿å¥ç³»ç»ä»è¢«éªä¸çº¿å°æä¸ºé¨é¨æ éï¼ååæè¾äºå°è¿ä¸ä¸ªæãè¶è¿çåæºå¤ï¼ä½æ¶è·ä¹å¾å¤§ã</p>
<p>å ç¹æ ¸å¿æ»ç»ï¼</p>
<p><strong>1. RAGä¸æ¯ä¸è½çï¼éå¥½éç¨åºæ¯</strong></p>
<p>RAGéåææç¡®ç¥è¯åºãç­æ¡å¯è¿½æº¯çåºæ¯ãå¦æä½ çéæ±æ¯è®©å¤§æ¨¡ååæ¥åé åï¼æ¯å¦åææ¡ãååæï¼ï¼é£RAGåèæ¯ä¸ªçº¦æã</p>
<p><strong>2. åååæ£ç´¢æ¯æ ¹åº</strong></p>
<p>å¤§å®¶å¾å¾ææ³¨æåæ¾å¨å¤§æ¨¡åæ¬èº«ï¼è§å¾ç¨æ´å¼ºçæ¨¡åå°±è½è§£å³é®é¢ãä½å®éä¸ï¼å¦æåé¢çåååæ£ç´¢åå¾ä¸å¥½ï¼åå¼ºçæ¨¡åä¹æ¯å·§å¦é¾ä¸ºæ ç±³ä¹çã</p>
<p><strong>3. Promptå·¥ç¨ççæ¯é¨æèº</strong></p>
<p>åæ ·çæ£ç´¢ç»æï¼ä¸åçPromptå¯è½å¸¦æ¥å¤©å£¤ä¹å«çåç­ææãè¿ä¸ªæ²¡ä»ä¹æ·å¾ï¼å°±æ¯å¤è¯ãå¤çãå¤è¿­ä»£ã</p>
<p><strong>4. ä¸çº¿åªæ¯å¼å§</strong></p>
<p>çæ­£çææå¨ä¸çº¿ä¹åãç¨æ·çåç§å¥è©è¾å¥ãææ¡£çæç»­æ´æ°ãæ§è½çä¼åãææççæ§â¦â¦æ¯ä¸é¡¹é½æ¯æç»­çå·¥ä½ã</p>
<p><img alt="image.png" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3459816/202602/3459816-20260210220941408-1845897027.png" class="lazyload"></p>
<p>æåï¼éä¸è¿å¥ç³»ç»ç®åçä¸äºæ ¸å¿ææ ï¼</p>
<ul>
<li>æ¥åæ¥è¯¢éï¼200+æ¬¡</li>
<li>å¹³åååºæ¶é´ï¼2.3ç§ï¼å¼å¯æµå¼åé¦å­ç¬¦å»¶è¿çº¦0.8ç§ï¼</li>
<li>ç¨æ·æ»¡æåº¦ï¼éè¿åç­åçç¹èµ/ç¹è¸©æ¶éï¼ï¼çº¦72%</li>
<li>æ æ³åç­çæ¯ä¾ï¼çº¦22%ï¼è¿é¨åä¼å®æåæï¼æ¨å¨è¡¥åææ¡£ï¼</li>
</ul>
<p>æ°å­ä¸ç®ç¹å«äº®ç¼ï¼ä½æ¯èµ·ä¹åé£ä¸ªæ²¡äººç¨çå³é®è¯æç´¢ï¼å·²ç»æ¯è´¨çé£è·äºãå¦æä½ ä¹å¨åç±»ä¼¼çé¡¹ç®ï¼å¸æè¿ç¯æç« è½å¸®ä½ å°è¸©ä¸äºåãæé®é¢æ¬¢è¿è¯è®ºåºäº¤æµï¼</p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-10 22:10">2026-02-10 22:10</span>&nbsp;
<a href="https://www.cnblogs.com/bu-huo">å¼ ä¸æ</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19601644);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19601644', targetLink: 'https://www.cnblogs.com/bu-huo/p/19601644', title: 'å¤§æ¨¡åRAGå®æï¼ä»è¢«éªä¸é è°±å°æä¸ºé¨é¨MVPï¼è¿æ¯æçè¸©åå¨è®°å½' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
        </channel>
        </rss>