<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åå®¢å­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2026-02-04T04:15:29.742Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åå®¢å­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ Agentic Codingä¸äºå®è·µæ»ç» ]]></title>
    <link>https://www.cnblogs.com/tsingroo/p/19573451</link>
    <guid>2a98f0b82c30679f303ebc8db70f851f</guid>
    <description>
    <![CDATA[ 
        <h2 class="post-title">
            <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/tsingroo/p/19573451" title="åå¸äº 2026-02-04 11:55">
    <span role="heading" aria-level="2">Agentic Codingä¸äºå®è·µæ»ç»</span>
    

</a>

        </h2>
        <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>&nbsp; æè¿ä¸å¹´AIç¼ç é£éåå±ï¼ç°å¨æç90%ä»¥ä¸çä»£ç é½æ¯åºèªAIãæ³æ³å¨2024å¹´è°ç¨OpneAIå®æ¹æ¥å£ï¼3.5æ¨¡åï¼,è¶è¿10KçTokenå°±è®©LLMçä¸ä¸æå®å¨æ··ä¹±ï¼å¯¼è´LLMæ æ³è®°ä½å¤ªå¤ä¸è¥¿ï¼æ´ä¸ç¨è¯´è°ç¨å·¥å·ï¼çæä»£ç äºãå°ç®åä¸ºæ­¢ï¼ç¨äºåç§å·¥å·å·²ç»åå¹´ä»¥ä¸äºï¼è®°å½ä¸ä¸æ»ä½çå®è·µç»éªãåé¢å°cursorãClaude CodeãOpenCodeç­å·¥å·ç»ç§°ä¸ºAgenticCodingå·¥å·ï¼æçä¸»è¦å·¥ä½è¯­è¨æ¯go/Rustï¼åä¸ªå·¥å·åæ¨¡åå¨ä¸åè¯­è¨ä¸ä¼ææå·®å¼ï¼ä½ èªå·±çç»è®ºå¯è½åæä¸å¤ªä¸æ ·ã</p>
<p><strong><span style="font-size: 16px">&nbsp; 1.Agentic Codingæ¯å·¥å·çæ©å±ï¼èä¸æ¯æºè½çæ©å±ï¼å°±ç®åæ¥çï¼</span></strong></p>
<p>&nbsp; è½ç¶ç°å¨æ¥è¿90%ä»¥ä¸çä»£ç é½è½ç±AIçæï¼ä½æ¯è¿äºå·¥å·è¿æ¯ä¾èµäºä½ æèå¢éååçè§è¯ãç¥è¯ãæµç¨ç­ï¼æ¬è´¨è¿æ¯å·¥å·ã<strong><span style="color: rgba(255, 0, 0, 1)">å¦æä¹åä½ çå¢éæèä½ æ²¡ææ¥è§¦è¿è¯å¥½çè½¯ä»¶å·¥ç¨ç®¡çãè§èæå®è·µï¼é£ä½ å¨æäºAgentic Codingä¹ååªæ¯æè§ä¸è®©ä½ æ´ç½äºä¸ç¹èå·²ï¼å¯¹äºè½¯ä»¶å·¥ç¨çç®¡ççè³ä¼èµ·å°åä½ç¨ã</span></strong><span style="color: rgba(0, 0, 0, 1)">æ¯å¦æ´å¤çæªç»å®¡æ¥çä»£ç ä¼è¿å¥gitä»åºï¼æ´å¤çä¸æç¡®çéæ±å¯¼è´Agnetic Codingå·¥å·çèªç±åæ¥ç©ºé´è¿å¤§ï¼AIå¨ä¸æ°å½çå°æ¹è¿åº¦è®¾è®¡ï¼æªç»å®¡æ¥åå¹¶ä»£ç åå¯¼è´æµè¯äººåæ´é¾åç°BUGï¼ä»¥åæäº¤èªå·±çä¸æç½çä»£ç å¯¼è´çº¿ä¸åºé®é¢åæ æ³å¿«éææ¥ï¼ææ¯åºè¶æ¥è¶å¤ã</span></p>
<p><strong><span style="font-size: 16px">&nbsp; 2.ãå¥½çä¸ä¸æå·¥ç¨+ä¸è¬çæ¨¡åãææå¥½äºãä¸è¬çä¸ä¸æå·¥ç¨+å¥½çå¤§æ¨¡åã</span></strong></p>
<p>&nbsp; è¿éçä¸ä¸æå·¥ç¨å°±æ¯åç±»ç¼ç å·¥å·ãAgentic Codingå·¥å·å°±æ¯ä½¿ç¨è¯å¥½çä¸ä¸æç®¡çå ä¸ä½ æä¾çæç¤ºè¯æ¥è°ç¨å¤§æ¨¡åæ¥å£ï¼å¹¶ä½¿ç¨å¤§æ¨¡åçæ¥å£çè¿åæ¥å³å®ä¸ä¸æ­¥å¦ä½åã</p>
<p>&nbsp; ä»å°±goè¯­è¨èè¨ï¼ç»è¿å ä¸ªæçæµè¯ï¼Claude Codeä½¿ç¨GLM 4.7(æèKimi 2.5) è¦å¥½äº Kiroä½¿ç¨Claude Opus 4.5æèantigravityä½¿ç¨ Claude Opus 4.5ãè¿ä¸ªä¹å¯è½æ¯ä¸è¯­è¨ç¸å³ã ææ²¡ç¨è¿Claude Codeæ­éåççSonnetæèOpusæ¨¡åï¼ä½æ¯å¨cursor+Opusè·ä½¿ç¨cursor+kimiå·®å¼æ²¡ææ³çé£ä¹å¤§ã</p>
<p><span style="font-size: 16px"><strong>&nbsp; 3.å¦æä½ éæ±ç®¡çæ··ä¹±ï¼ä½ è¦åè§èéæ±ï¼å¦æä½ çå¢éæµç¨æ··ä¹±ï¼ä½ è¦åè§èæµç¨</strong></span></p>
<p>&nbsp; æäºå¬å¸ï¼åæ¬ä¸äºå¤§å¬å¸çä¸äºé¨é¨ï¼ç®¡çæ¯è¾æ··ä¹±ãéæ±è¯å®¡çæ¶åï¼äº§ååªè½æ¿åºä¸ä¸ªæ³æ³åç®åçå å¥è¯çææ¡£ï¼ä½æ¯åè¦å¼åé¢ä¼°æ¶é´ï¼ä¹åå¼åè¿ç¨ä¸­ä¼ä¸æ­åç°é®é¢ï¼å¯¼è´åé¢éæ±ååé¢çéæ±å¤§ç¸å¾åº­ï¼ææ¶åè¿å¥æµè¯ä¹åäº§åè¿å¨è°æ´éæ±ææ¡£ãé¨é¨é¢å¯¼å¯¹æ­¤è§èä¸è§ï¼å¦ææäººè¯´æµç¨æ··ä¹±ãéæ±æ··ä¹±ï¼é£å°±åææé®é¢çè¿ä¸ªäººè§£å³æï¼å°±ä¸ä¼æé®é¢äºãæäºå°å¬å¸æè¿ç§æåµï¼æäºå¤§å¬å¸çæäºé¨åä¹æè¿ç§æåµã<span style="color: rgba(255, 0, 0, 1)">å¦æææ²¡éå°ï¼ææ¢çè¯´ï¼ð</span></p>
<p>&nbsp; ä¸è§£å³éæ±åæµç¨æ··ä¹±çé®é¢ï¼å¨Agentic Codingçå æä¸ï¼æ¯ä¸ªäººåªä¼æ´ç´¯ï¼çæçä»£ç ä¹ä¼æ´ä¹±ã<span style="color: rgba(255, 0, 0, 1)">AIæ¶ä»£ï¼ä½ é¦åå¾ç¥éèªå·±æ³è¦ä»ä¹ï¼ä½ ä¸è½å¨ä½ èªå·±è¿ä¸æ¸æ¥çæåµä¸åæä»£ç åå®äº</span>ã</p>
<p><span style="font-size: 16px"><strong>&nbsp; 4.è¦æ³¨éç¥è¯å±äº«åè½å°è®²è§£ï¼è·éAIå·¥å·çåå±</strong></span></p>
<p>&nbsp; ä¸è¦å£å¤´è¯´ä¸ä¸ªä¸è¥¿å¤å¥½å¤æç¨ï¼è¦å¨å¢éä¸­ï¼æå¼é¡¹ç®ï¼ä»¥ä¸ä¸ªå®ééæ±ä¸ºä¾ï¼ç»å¤§å®¶å±ç¤ºä¸ä¸è¿ä¸ªææ¯æå¤å¥½ãæ¯å¦MCP/Skillsï¼ä¸è¦å¤¸ä»æå¤å¥½ï¼ä¸åè¦æ¨èç»å¤§å®¶ï¼è¿è¦ä»¥å®éæä¸ªä¼è®®æ¥è®²è§£å¦æè½å°ä½¿ç¨ï¼å¦åå°±è·ç©ºåï¼âåªååªåï¼å æ²¹å æ²¹âä¸æ ·ãå½ç¶è¿ä¹ä¸æ¯ä¸ä¸ªäººè´£ä»»ï¼å¢éä¸­å¯ä»¥å®æåäº«ãæ¯å¦Claude Codeä¸­çææ å½ä»¤ãSubAgentsãSkillç­ã</p>
<p>&nbsp; éå : æ¯å¦ç¦å¤§å­¦ç<a href="https://themodernsoftware.dev/" target="_blank" rel="noopener nofollow">ãCS 146S: ç°ä»£è½¯ä»¶å¼åèã</a>è¿é¨è¯¾ã</p>
<p><span style="font-size: 16px"><strong>&nbsp; 5.ä¸äºæå·§</strong></span></p>
<ul>
<li>&nbsp;ç¼åä»£ç çæ¶åä¸å®è¦åä½¿ç¨Planæ¨¡å¼å¶å®è§åï¼å¹¶åæ¬¡è®©AIå®¡æ¥è®¡åï¼ä¹åæè®©AIç¼åä»£ç ãç®åä¸»æµAgentic Codingå·¥å·åå·²æ¯æPlanæ¨¡å¼</li>
<li>è®©AIåä»£ç ä¹åï¼åå°å½åçä»£ç é½æäº¤ãè¿æ ·å¦æAIçæçä¸æ»¡æå¯ä»¥éæ¶æ¤éä»£ç ãåæ¶ãä¸ªäººå»ºè®®ãä¸è¦ç»å·¥å·git commitågit pushæé</li>
<li>å¦æAgentic Codingå·¥å·çæçä»£ç ï¼æ¶å¸¸åç¦»é¡¹ç®æèä½ çé¢æãä½ éè¦å°ä½ çé¢æä»¥åéå¶åå°ç±»ä¼¼CLAUDE.mdæèskillsä¸­ï¼æ¥è®©AIæ¥éµå®</li>
<li>ææAIçæçä»£ç ï¼ç®åé¶æ®µé½è¦äººå·¥å®¡æ ¸åæè½æäº¤å°ä»£ç ä»åº</li>
<li>å¨è¾¾å°LLMçä¸ä¸æéå¼ä¹åå¼å¯æ°ä¼è¯æ¥åä»»å¡ãç®åå ç¾KçTokenæ³¨æåï¼å¨æäºæ¶åæè§å·²ç»è¶è¿äºäººç±»çæ³¨æå(ææ²¡æå³æ³¨çç¹ï¼AIä¼æå¤çèèå°)ï¼ä½æ¯ä¸ä¸æä¸é¿ä¹åå°±å®¹æèå(Context Rot)ã</li>
</ul>
<p>&nbsp;</p>

</div>
<div class="clear"></div>

        <p class="postfoot">
            posted on 
<span id="post-date" data-last-update-days="0.001388888888888889" data-date-updated="2026-02-04 11:57">2026-02-04 11:55</span>&nbsp;
<a href="https://www.cnblogs.com/tsingroo">é¿æ©ç½è¯</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19573451);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19573451', targetLink: 'https://www.cnblogs.com/tsingroo/p/19573451', title: 'Agentic Codingä¸äºå®è·µæ»ç»' })">ä¸¾æ¥</a>

        </p>
     ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ AIå¼å-python-langchainæ¡æ¶ï¼1-10 è¿åæ¥æ-æ ¼å¼è§£æå¨ï¼ ]]></title>
    <link>https://www.cnblogs.com/yclh/p/19573432</link>
    <guid>38796f11abc9eb50a6bbdabc52ed8575</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/yclh/p/19573432" title="åå¸äº 2026-02-04 11:52">
    <span role="heading" aria-level="2">AIå¼å-python-langchainæ¡æ¶ï¼1-10 è¿åæ¥æ-æ ¼å¼è§£æå¨ï¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p><span class="qwen-markdown-text">å¦ä½è®©å¤§æ¨¡åè¿åçç»ææ¯ä¸ä¸ªæ åçæ¥ææ ¼å¼ï¼</span></p>
<p><span class="qwen-markdown-text">å¦ä¸è¿æ®µä»£ç å±ç¤ºäºå¦ä½ä½¿ç¨ LangChain æå»ºä¸ä¸ªç»æåè¾åºé¾ï¼chainï¼ï¼å°èªç¶è¯­è¨é®é¢ï¼âä¸­åäººæ°å±åå½æ¯ä»ä¹æ¶ååç«çï¼âï¼éè¿å¤§è¯­è¨æ¨¡åï¼LLMï¼è½¬æ¢ä¸ºæ åç Python <code class="qwen-markdown-codespan" style="cursor: pointer">datetime</code><span class="qwen-markdown-text" data-spm-anchor-id="a2ty_o01.29997173.0.i0.58945171MAqdzo"> å¯¹è±¡</span></span></p>
<div class="cnblogs_Highlighter">
<pre class="brush:python;gutter:true;">from langchain.prompts import PromptTemplate
from langchain_openai import ChatOpenAI
from langchain.output_parsers import DatetimeOutputParser
import os

# æ¥ææ¶é´è¾åºè§£æå¨ èªå¨å°æ¨¡åè¿åçææ¬å­ç¬¦ä¸²è§£æä¸º Python ç datetime å¯¹è±¡
output_parser = DatetimeOutputParser()

print('###########åççæç¤ºè¯æ¯è±æç')
format_instructions=output_parser.get_format_instructions()
print(format_instructions)
print('###########')


template = """åç­ç¨æ·çé®é¢:
{question}
{format_instructions}"""

format_instructions='''ååºçæ ¼å¼ç¨æ¥ææ¶é´å­ç¬¦ä¸²:â%Y-%m-%dT%H:%M:%S.%fZâã
ç¤ºä¾: 1898-05-31T06:59:40.248940Z, 1808- 10-20T01:56:09.167633Zã0226-10-17T06:18:24.192024Z
ä»è¿åæ­¤å­ç¬¦ä¸²ï¼'''

prompt = PromptTemplate.from_template(
    template,
    partial_variables={"format_instructions":format_instructions},
)

#è¾åºæç¤ºè¯
print(prompt.invoke({"question": "ä¸­åäººæ°å±åå½æ¯ä»ä¹æ¶ååç«çï¼"}).text)

llm = ChatOpenAI(
    api_key=os.getenv("DEEPSEEK_API_KEY"),
    base_url=os.getenv("BASE_URL"),  # Deepseek ç API åºç¡å°å
    model="deepseek-v3:671b",  # Deepseek å¯¹è¯æ¨¡åï¼å¯éï¼deepseek-chat-pro ç­é«çº§æ¨¡åï¼
    temperature=0.7,  # æ¸©åº¦åæ°ï¼0-1ï¼è¶ä½è¶ç¨³å®ï¼
    max_tokens=1024  # æå¤§çæ tokens
)


chain = prompt | llm | output_parser

print('--------------')
result = chain.invoke({"question": "ä¸­åäººæ°å±åå½æ¯ä»ä¹æ¶ååç«çï¼"})
print(result)
</pre>
</div>
<p>&nbsp;è¿åç»æï¼</p>
<p>###########åççæç¤ºè¯æ¯è±æç<br>Write a datetime string that matches the following pattern: '%Y-%m-%dT%H:%M:%S.%fZ'.<br><br>Examples: 1466-10-12T18:56:24.473648Z, 0322-04-03T12:00:41.805552Z, 1762-08-02T08:58:50.100670Z<br><br>Return ONLY this string, no other words!<br>###########<br>åç­ç¨æ·çé®é¢:<br>ä¸­åäººæ°å±åå½æ¯ä»ä¹æ¶ååç«çï¼<br>ååºçæ ¼å¼ç¨æ¥ææ¶é´å­ç¬¦ä¸²:â%Y-%m-%dT%H:%M:%S.%fZâã<br>ç¤ºä¾: 1898-05-31T06:59:40.248940Z, 1808- 10-20T01:56:09.167633Zã0226-10-17T06:18:24.192024Z<br>ä»è¿åæ­¤å­ç¬¦ä¸²ï¼<br>--------------<br>1949-10-01 00:00:00</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-04 11:52">2026-02-04 11:52</span>&nbsp;
<a href="https://www.cnblogs.com/yclh">ä¸ç¬ä½</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19573432);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19573432', targetLink: 'https://www.cnblogs.com/yclh/p/19573432', title: 'AIå¼å-python-langchainæ¡æ¶ï¼1-10 è¿åæ¥æ-æ ¼å¼è§£æå¨ï¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Redisson ä½¿ç¨æåï¼ä» API è¯¯åºå°çé¨çå¤±æï¼å¨æ­¤ç»ç»åå¸å¼éçå©æ¢¦ ]]></title>
    <link>https://www.cnblogs.com/xzqcsj/p/19573422</link>
    <guid>4a17a6bba28f3a2e6c2474be0d0d4222</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xzqcsj/p/19573422" title="åå¸äº 2026-02-04 11:49">
    <span role="heading" aria-level="2">Redisson ä½¿ç¨æåï¼ä» API è¯¯åºå°çé¨çå¤±æï¼å¨æ­¤ç»ç»åå¸å¼éçå©æ¢¦</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/3703499/202602/3703499-20260204114906823-385277354.png" alt="Redisson ä½¿ç¨æåï¼ä» API è¯¯åºå°çé¨çå¤±æï¼å¨æ­¤ç»ç»åå¸å¼éçå©æ¢¦" class="desc_img">
        å¨ä¸ä¸ç¯ãåå¸å¼éçä»£ä»·ä¸éæ©ï¼ä¸ºä»ä¹æä»¬æç»æ¥æ±äºRedissonï¼ãä¸­ï¼æä»¬èå°äºæå SETNX ç"è¹æ¯é¥®è¡"æ¶ä»£ãæ¢ç¶éæ©äº Redissonï¼å°±æå³çæä»¬å·²ç»åå«äºé£äºè®©äººæå¿åèçæ­»éå©æ¢¦ã
å¾å¤æ¶åï¼æä»¬ä»¥ä¸ºåªæ¯è°ç¨äºä¸ä¸ªç®åç lock.lock()ï¼ä½èåå¶å®æ¯ä¸æ´å¥å¤æçèªå¨ç»­æãLua èæ¬åå­æ§è¡ååå¸è®¢éæºå¶å¨é»é»æ¯æã
è¿ç¯æç« ä¸è®²èçï¼æä»¬ä»å¸¸ç¨ç API èµ·æï¼ä¸è·¯éè¿çäº§ç¯å¢çé¿åå®æï¼æåé»è¿åºå±æ°æ®ç»æä¸ Lua æºç éï¼æ Redisson å½»åºæä¸ªå¹²å¹²ååã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<blockquote>
<p><strong>åå¨åé¢</strong></p>
<p>å¨ä¸ä¸ç¯<a href="https://mp.weixin.qq.com/s/IkRhzVdLvjr4V3ojdu_4gA" target="_blank" rel="noopener nofollow">ãåå¸å¼éçä»£ä»·ä¸éæ©ï¼ä¸ºä»ä¹æä»¬æç»æ¥æ±äºRedissonï¼ã</a>ä¸­ï¼æä»¬èå°äºæå <code>SETNX</code> ç"è¹æ¯é¥®è¡"æ¶ä»£ãæ¢ç¶éæ©äº <strong>Redisson</strong>ï¼å°±æå³çæä»¬å·²ç»åå«äºé£äºè®©äººæå¿åèçæ­»éå©æ¢¦ã</p>
<p>å¾å¤æ¶åï¼æä»¬ä»¥ä¸ºåªæ¯è°ç¨äºä¸ä¸ªç®åç <code>lock.lock()</code>ï¼ä½èåå¶å®æ¯ä¸æ´å¥å¤æç<strong>èªå¨ç»­æ</strong>ã<strong>Lua èæ¬åå­æ§è¡</strong>å<strong>åå¸è®¢éæºå¶</strong>å¨é»é»æ¯æã</p>
<p>è¿ç¯æç« ä¸è®²èçï¼æä»¬ä»<strong>å¸¸ç¨ç API</strong> èµ·æï¼ä¸è·¯éè¿<strong>çäº§ç¯å¢çé¿åå®æ</strong>ï¼æåé»è¿<strong>åºå±æ°æ®ç»æä¸ Lua æºç </strong>éï¼æ Redisson å½»åºæä¸ªå¹²å¹²ååã</p>
</blockquote>
<hr>
<h2 id="ä¸ä¸ä»æ¯-lock-è¿ä¹ç®åæ ¸å¿-api-å¨æ¯">ä¸ãä¸ä»æ¯ Lock è¿ä¹ç®åï¼æ ¸å¿ API å¨æ¯</h2>
<p>Redisson ä¹æä»¥åæ¬¢è¿ï¼æ¯å ä¸ºå®æåå¸å¼éå°è£æäºæä»¬æçæç <code>java.util.concurrent.locks.Lock</code> æ¥å£é£æ ¼ï¼<strong>æå¤§å°éä½äºå­¦ä¹ ææ¬</strong>ãä½é¤äºæåºç¡ç <code>lock()</code>ï¼è¿ææ ¸å¿åè½æ¯ä½ å¿é¡»ææ¡çã</p>
<h3 id="1-åºç¡é£æérlock">1. åºç¡é£æéï¼<code>RLock</code></h3>
<p>è¿æ¯ <strong>90% åºæ¯ä¸</strong>çé»è®¤éæ©ãå®å¯¹åº Redis åºå±ç <strong>Hash</strong> ç»æã</p>
<pre><code class="language-java">RLock lock = redisson.getLock("order:1001");
lock.lock(); // é»å¡å¼ç­å¾ï¼é»è®¤ 30ç§è¿æï¼èªå¸¦çé¨ç
try {
   // ä¸å¡é»è¾
} finally {
   lock.unlock();
}
</code></pre>
<h3 id="2-æ´èªæçétrylock-ï¸æ¨è">2. æ´èªæçéï¼<code>tryLock</code> (â¡ï¸æ¨è)</h3>
<p>å¨å®éä¸å¡ä¸­ï¼æä»¬å¾å¾ä¸å¸æçº¿ç¨æ éæ­»ç­ï¼æµªè´¹èµæºãè¿éæä¸¤ç§å¸¸è§å§¿å¿ï¼</p>
<h4 id="å§¿å¿-aè¦ç­å¾--å¯ç¨çé¨ç-æå¸¸ç¨">å§¿å¿ Aï¼è¦ç­å¾ + å¯ç¨çé¨ç (æå¸¸ç¨)</h4>
<p>åªæå® <code>waitTime</code>ï¼ä¸æå® <code>leaseTime</code>ãè¿æ¯<strong>æ¢æ³è¦éé»å¡ï¼ææéç­å¾ï¼ï¼åæ³è¦èªå¨ç»­æ</strong>çæä½³å®è·µã</p>
<pre><code class="language-java">// åæ°1ï¼wait timeï¼æåªæ¿ææé 3ç§ï¼æ¿ä¸å°å°±èµ°äºº
// åæ°2ï¼æ¶é´åä½
// éç¹ï¼æ²¡ä¼  leaseTimeï¼æä»¥çé¨çæºå¶ä¼èªå¨çæï¼
boolean res = lock.tryLock(3, TimeUnit.SECONDS);

if (res) {
   try {
     // å¤çä¸å¡ï¼åªæè· 5åé ä¹ä¸æéè¿æï¼
   } finally {
     lock.unlock();
   }
} else {
   log.warn("æ¢éå¤±è´¥ï¼å«æ¤äºï¼");
}
</code></pre>
<h4 id="å§¿å¿-bè¦ç­å¾--èªå¨è¿æ-æç¨">å§¿å¿ Bï¼è¦ç­å¾ + èªå¨è¿æ (æç¨)</h4>
<p>æå®äº <code>leaseTime</code>ï¼çé¨çä¼å¤±æã</p>
<pre><code class="language-java">// åæ°1ï¼wait timeï¼æé 3ç§
// åæ°2ï¼lease timeï¼ä¸éå 10ç§ èªå¨å¼ºå¶éæ¾ï¼æ³¨æï¼æå® leaseTime ä¼è®©çé¨çå¤±æï¼ï¼
// åæ°3ï¼æ¶é´åä½
boolean res = lock.tryLock(3, 10, TimeUnit.SECONDS);

if (res) {
   try {
     // å¤çä¸å¡ï¼å¿é¡»ä¿è¯å¨ 10ç§ åå®æï¼
   } finally {
     lock.unlock();
   }
}
</code></pre>
<h3 id="3-ææçæéå¬å¹³é-fairlock">3. ææçæéï¼å¬å¹³é <code>FairLock</code></h3>
<p>é»è®¤çéæ¯<strong>éå¬å¹³</strong>çï¼Non-Fairï¼ï¼çº¿ç¨æ¢éå¨é  CPU è°åº¦ï¼è°å¿«è°å¾ãä½å¦æä½ çä¸å¡è¦æ±"åæ¥åå°"ï¼æ¯å¦æ¢ç¥¨æéï¼ï¼è¯·å¡å¿ä½¿ç¨å¬å¹³éã</p>
<pre><code class="language-java">// åé¨å©ç¨ Redis ç Listï¼ä½ä¸ºçº¿ç¨ç­å¾éåï¼å Hashï¼ä½ä¸ºè¶æ¶è®°å½ï¼å®ç°
RLock fairLock = redisson.getFairLock("ticket:queue");
fairLock.lock();
</code></pre>
<h3 id="4-è¯»å¤åå°çç¥å¨è¯»åé-readwritelock">4. è¯»å¤åå°çç¥å¨ï¼è¯»åé <code>ReadWriteLock</code></h3>
<p>è¿ä¸ªåºæ¯å¤ªç»å¸äºï¼ååè¯¦æé¡µï¼è¯»çäººå¤ï¼10000æ¬¡/ç§ï¼ï¼æ¹åºå­çäººå°ï¼1æ¬¡/ç§ï¼ãå¦æå¨äºæ¥ï¼æ§è½ç´æ¥å´©çã</p>
<pre><code class="language-java">RReadWriteLock rwLock = redisson.getReadWriteLock("product:stock:101");

// è¯»éï¼å¤ä¸ªçº¿ç¨å¯ä»¥åæ¶å è¯»éï¼åªè¦æ²¡æåé
rwLock.readLock().lock();

// åéï¼å¿é¡»ç­ææè¯»éååéé½éæ¾äºæè½å ï¼å¨äºæ¥
rwLock.writeLock().lock();
</code></pre>
<h3 id="5-èé-multilock-åå­æ§å å¤æé">5. èé <code>MultiLock</code> (åå­æ§å å¤æé)</h3>
<p>ææ¶åæä»¬éè¦åæ¶éå®å¤ä¸ªèµæºï¼æ¯å¦"åºå­"å"ä½é¢"ï¼è¦ä¹é½éä½ï¼è¦ä¹é½ä¸éï¼<strong>é²æ­¢æ­»é</strong>ã</p>
<pre><code class="language-java">RLock lock1 = redisson.getLock("lock:order");
RLock lock2 = redisson.getLock("lock:stock");
// åæ¶å éï¼lock1 lock2
RedissonMultiLock lock = new RedissonMultiLock(lock1, lock2);
lock.lock();
</code></pre>
<hr>
<h2 id="äºæå¼åºå±hash-ç»æä¸-lua-èæ¬">äºãæå¼åºå±ï¼Hash ç»æä¸ Lua èæ¬</h2>
<blockquote>
<p>ä»¥ä¸æºç åºäº <strong>Redisson 3.16+</strong> çæ¬ï¼ç®åçäº§ç¯å¢ä¸»æµçæ¬ï¼åæã</p>
</blockquote>
<p>Redisson ä¸ºä»ä¹è½å®ç°<strong>å¯éå¥é</strong>ï¼ä¸ºä»ä¹å®æ¯æä»¬èªå·±åç SETNX å¼ºï¼<br>
ç­æ¡èå¨ Redis çæ°æ®ç»æéãRedisson å¹¶æ²¡æä½¿ç¨ç®åç <code>String</code> ç±»åï¼èæ¯ä½¿ç¨äº <strong><code>Hash</code></strong>ã</p>
<h3 id="1-redis-éçæ ·å­">1. Redis éçæ ·å­</h3>
<p>åè®¾æä»¬å¯¹ <code>order:1001</code> å éï¼Redis éå®éå­å¨çæ°æ®é¿è¿æ ·ï¼</p>
<pre><code class="language-bash">KEY: order:1001
TYPE: Hash

# hash å¯¹åº value åå®¹
{
    "UUID:ThreadID" : 1  # éçææè : éå¥æ¬¡æ°
}
</code></pre>
<ul>
<li><strong>KEY</strong>: éçåå­ã</li>
<li><strong>FIELD</strong> (Key): <code>UUID:ThreadId</code>ãè¿éç±å®¢æ·ç«¯çæçå¯ä¸ UUID å ä¸å½åçº¿ç¨ ID æ¼æ¥èæã<strong>ä¸ºä»ä¹è¦å  UUIDï¼</strong> å ä¸ºä¸åæå¡å¨ä¸ç JVM è¿ç¨ ID å¯è½ä¸æ ·ï¼å¿é¡»éè¿å®¢æ·ç«¯å¯å¨æ¶çæç UUIDï¼ConnectionManagerIdï¼æ¥å¯ä¸æ è¯ä¸ä¸ª Redisson å®ä¾ã</li>
<li><strong>VALUE</strong>: <code>1</code>ãè¿æ¯éå¥è®¡æ°å¨ãå¦æåä¸ä¸ªçº¿ç¨å lock ä¸æ¬¡ï¼è¿éåæ 2ã</li>
</ul>
<h3 id="2-å éç-lua-èæ¬">2. å éç Lua èæ¬</h3>
<p>Redisson ä¸ºäºä¿è¯ä¸ç³»åå¤æ­ååå¥æ¯åå­çï¼æå®å°è£å¨ Lua èæ¬éåç» Redisã</p>
<pre><code class="language-lua">-- KEYS[1] = éåç§°
-- ARGV[1] = è¿ææ¶é´ (é»è®¤ 30000ms)
-- ARGV[2] = éææèå¯ä¸ID (UUID:ThreadId)

-- æåµ 1ï¼éæ ¹æ¬ä¸å­å¨
if (redis.call('exists', KEYS[1]) == 0) then
    -- åå»º Hashï¼è®¾ç½®éå¥æ¬¡æ°ä¸º 1
    redis.call('hincrby', KEYS[1], ARGV[2], 1);
    -- è®¾ç½®è¿ææ¶é´
    redis.call('pexpire', KEYS[1], ARGV[1]);
    return nil; -- è¿å null è¡¨ç¤ºå éæå
end;

-- æåµ 2ï¼éå­å¨ï¼ä¸ææèå°±æ¯æï¼éå¥ï¼
if (redis.call('hexists', KEYS[1], ARGV[2]) == 1) then
    -- éå¥æ¬¡æ° +1
    redis.call('hincrby', KEYS[1], ARGV[2], 1);
    -- éæ°ç»­æ
    redis.call('pexpire', KEYS[1], ARGV[1]);
    return nil;
end;

-- æåµ 3ï¼éå­å¨ï¼ä½ä¸æ¯æ
-- è¿åå½åéè¿å©å¤å°æ¯«ç§è¿æï¼æ¹ä¾¿å®¢æ·ç«¯ç­å¾
return redis.call('pttl', KEYS[1]);
</code></pre>
<p>è¿æ®µèæ¬å®ç¾è§£éäºï¼</p>
<ol>
<li><strong>åå­æ§</strong>ï¼è¿ä¸å¤§å¨é»è¾å¨ Redis éæ¯åå­æ§è¡çï¼ä¸ä¼æéã</li>
<li><strong>å¯éå¥</strong>ï¼éè¿ <code>hexists</code> å¤æ­æ¯ä¸æ¯èªå·±ï¼æ¯çè¯å°± <code>hincrby</code>ã</li>
<li><strong>äºæ¥æ§</strong>ï¼å¦ææ¢ä¸æ¯æ°éï¼ä¹ä¸æ¯èªå·±çéï¼ç´æ¥è¿åå©ä½æ¶é´ï¼è®©ä½ å¯ä»¥å»ç¡ä¸ä¼å¿åæ¥ã</li>
</ol>
<hr>
<h2 id="ä¸æå¼çé¨ççé»çæºç æ¼«æ¸¸">ä¸ãæå¼çé¨ççé»çï¼æºç æ¼«æ¸¸</h2>
<p>ç»å¸¸å¬è¯´"çé¨ç"ï¼å®å°åºé¿ä»ä¹æ ·ï¼<br>
å¶å®ï¼å®æ¬è´¨ä¸æ¯ä¸ä¸ª <strong>HashedWheelTimerï¼æ¶é´è½®ï¼</strong> é©±å¨çå®æ¶ä»»å¡ã</p>
<h3 id="1-å¯å¨å¥å£">1. å¯å¨å¥å£</h3>
<p>å½æä»¬è°ç¨ <code>lock()</code> <strong>ä¸ä¼ æ¶é´</strong>æ¶ï¼æç»ä¼èµ°å°è¿éï¼</p>
<pre><code class="language-java">// RedissonLock.java
private void lock(long leaseTime, TimeUnit unit, boolean interruptibly) throws InterruptedException {
    long threadId = Thread.currentThread().getId();
    Long ttl = tryAcquire(leaseTime, unit, threadId);

    // å¦æ lock æåï¼ttl ä¼è¿å null
    if (ttl == null) {
        return;
    }
    
    // å¦æå¤±è´¥ï¼ä¼è®¢éä¸ä¸ª Redis Channelï¼ç­å¾ééæ¾çæ¶æ¯ï¼ä¸ç¨æ­»å¾ªç¯ç©ºè½¬ï¼
    // ... çç¥è®¢éé»è¾
}
</code></pre>
<p>å³é®å¨ <code>tryAcquireAsync</code> éï¼</p>
<pre><code class="language-java">private &lt;T&gt; RFuture&lt;Long&gt; tryAcquireAsync(long leaseTime, TimeUnit unit, long threadId) {
    if (leaseTime != -1) {
        // å¦æä½ ä¼ äºæ¶é´ï¼å°±æä½ çæ¶é´èµ°ï¼ä¸å¯å¨çé¨ç
        return tryLockInnerAsync(leaseTime, unit, threadId, RedisCommands.EVAL_LONG);
    }
    
    // æ²¡ä¼ æ¶é´ï¼leaseTime = -1ï¼
    // åè®¾ç½®é»è®¤ 30ç§ è¿æ
    RFuture&lt;Long&gt; ttlRemainingFuture = tryLockInnerAsync(commandExecutor.getConnectionManager().getCfg().getLockWatchdogTimeout(), TimeUnit.MILLISECONDS, threadId, RedisCommands.EVAL_LONG);
    
    // å éæååï¼å¼å¯ç»­æä»»å¡
    ttlRemainingFuture.onComplete((ttlRemaining, e) -&gt; {
        if (e == null) {
           if (ttlRemaining == null) {
               // éç¹ï¼å¯å¨å®æ¶ç»­æ
               scheduleExpirationRenewal(threadId);
           }
        }
    });
    return ttlRemainingFuture;
}
</code></pre>
<h3 id="2-ç»­æçæ éå¥å¨">2. ç»­æçæ éå¥å¨</h3>
<p><code>scheduleExpirationRenewal</code> æç»ä¼è°ç¨ <code>renewExpiration</code>ï¼</p>
<pre><code class="language-java">private void renewExpiration() {
    // è¿éç 1/3 æ¯ç¡¬ç¼ç çè§å
    // é»è®¤ lockWatchdogTimeout æ¯ 30000ms
    // æä»¥æ¯ 10000ms æ§è¡ä¸æ¬¡
    Timeout task = commandExecutor.getConnectionManager().newTimeout(new TimerTask() {
        @Override
        public void run(Timeout timeout) throws Exception {
            
            // æ§è¡ Lua èæ¬ï¼æ ttl éæ°å·å 30ç§
            RFuture&lt;Boolean&gt; future = renewExpirationAsync(threadId);
            
            future.onComplete((res, e) -&gt; {
                if (res) {
                    // å¦æç»­ææåï¼è¿å°±å½¢æäºéå½è°ç¨ï¼èªå·±è°èªå·±
                    renewExpiration();
                }
            });
        }
    }, internalLockLeaseTime / 3, TimeUnit.MILLISECONDS);
}
</code></pre>
<p><strong>æ ¸å¿é»è¾æ»ç»</strong>ï¼</p>
<ol>
<li><strong>ä¸åä¹ä¸åå</strong>ï¼æ¯ééè¶æ¶æ¶é´ç 1/3ï¼é»è®¤10ç§ï¼ï¼æ£æ¥ä¸æ¬¡ã</li>
<li><strong>æ ééå½</strong>ï¼åªè¦æ£æ¥å°éè¿å¨ï¼å°±éç½®è¿ææ¶é´ï¼å¹¶æ³¨åä¸ä¸æ¬¡æ£æ¥ã</li>
<li><strong>çæ­»ç»å®</strong>ï¼è¿ä¸ªä»»å¡è·å¨å®¢æ·ç«¯è¿ç¨éï¼å¦æå®¢æ·ç«¯å®æºï¼ä»»å¡åæ­¢ï¼Redis éçéå¨ 30ç§ åèªå¨è¿æã</li>
</ol>
<hr>
<h2 id="åæå¨çäº§ç¯å¢è¸©è¿çåé¿åå®æ">åãæå¨çäº§ç¯å¢è¸©è¿çåï¼é¿åå®æ</h2>
<p>API è°é½ä¼è°ï¼ä½è½é¿å¼åçææ¯èå¸æºãè¿å­ä¸ªåï¼é½æ¯çéç½é¶æ¢æ¥çæè®­ã</p>
<h3 id="-é·é±ä¸å¥½å¿ååäº--å¼æ­»çé¨ç">ð£ é·é±ä¸ï¼å¥½å¿ååäº ââ å¼æ­»çé¨ç</h3>
<p>è¿æ¯æ°ææå®¹æç¯çéã</p>
<p><strong>â éè¯¯å§¿å¿</strong>ï¼</p>
<pre><code class="language-java">// æææ­»éï¼æä»¥å¼ºè¡æå® 10ç§ è¿æ
lock.lock(10, TimeUnit.SECONDS); 
// æè
lock.tryLock(1, 10, TimeUnit.SECONDS);
</code></pre>
<p><strong>â ï¸ åæ</strong>ï¼<br>
<strong>Redisson ççé¨çï¼WatchDogï¼æºå¶åªæå¨ä½ <code>æªæå®</code>éè¿ææ¶é´æ¶æä¼çæï¼</strong><br>
ä¸æ¦ä½ æå¨ä¼ äº <code>leaseTime</code>ï¼Redisson å°±ä¼è®¤ä¸ºä½ æèªå·±çæ³æ³ï¼ä¸åææãå¦æä½ çä¸å¡å ä¸ºæ°æ®åºå¡é¡¿è·äº 15ç§ï¼ç¬¬ 10ç§ æ¶éå°±ä¼å¼ºå¶è¿æï¼å¶ä»çº¿ç¨é¿é©±ç´å¥ï¼çåå¹¶åäºæã</p>
<p><strong>â æ­£ç¡®å§¿å¿</strong>ï¼<br>
é¤éä½ éå¸¸ç¡®å®ä¸å¡è½å¨æå®æ¶é´åè·å®ï¼å¦å<strong>å°½éä¸è¦ä¼  leaseTimeï¼è®©çé¨çå¸®ä½ èªå¨ç»­æ</strong>ã</p>
<h3 id="-é·é±äºéç²åº¦å¤ªç²--å¨ææåé®">ð£ é·é±äºï¼éç²åº¦å¤ªç² ââ å¨ææåé®</h3>
<p><strong>â éè¯¯å§¿å¿</strong>ï¼</p>
<pre><code class="language-java">// ææè®¢åå±ç¨ä¸æé
RLock lock = redisson.getLock("LOCK_ORDER");
</code></pre>
<p><strong>â ï¸ åæ</strong>ï¼<br>
è¿ç¸å½äºæé«éå¬è·¯å°æäºç¬æ¨æ¡¥ãä¸ç®¡æå¤å°ä¸ªç¨æ·ä¸åï¼åä¸æ¶é´åªè½å¤çä¸ä¸ªãæ§è½ç´æ¥å½é¶ã</p>
<p><strong>â æ­£ç¡®å§¿å¿</strong>ï¼<br>
<strong>éçç²åº¦è¶ç»è¶å¥½</strong>ãåªéé£ä¸ªå·ä½äº§çç«äºçèµæº IDã</p>
<pre><code class="language-java">// åªéè¿ä¸ªè®¢å
RLock lock = redisson.getLock("order:pay:" + orderId);
</code></pre>
<h3 id="-é·é±ä¸è§£éçèºæ¯--è°å çéè°æ¥è§£">ð£ é·é±ä¸ï¼è§£éçèºæ¯ ââ è°å çéè°æ¥è§£</h3>
<p><strong>â éè¯¯å§¿å¿</strong>ï¼</p>
<pre><code class="language-java">try {
    // ä¸å¡é»è¾
} finally {
    lock.unlock(); // ç´æ¥è§£é
}
</code></pre>
<p><strong>â ï¸ åæ</strong>ï¼</p>
<ol>
<li>å¦æä¸å¡æ§è¡è¶æ¶ï¼éå·²ç»è¢«èªå¨éæ¾äºï¼ä½ åå» <code>unlock</code> ä¼æåº <code>IllegalMonitorStateException</code>ã</li>
<li>å¦æä¸å°å¿è§£äºå«äººçéï¼è½ç¶ Redisson æ ID æ ¡éªé²æ­¢è¯¯å ï¼ä½å¼å¸¸å¤çä¾ç¶éè¦ï¼ã</li>
</ol>
<p><strong>â æ­£ç¡®å§¿å¿</strong>ï¼</p>
<pre><code class="language-java">if (lock.isLocked() &amp;&amp; lock.isHeldByCurrentThread()) {
    lock.unlock();
}
</code></pre>
<h3 id="-é·é±åéå¥éçéå½å©æ¢¦">ð£ é·é±åï¼éå¥éç"éå½å©æ¢¦"</h3>
<p>Redisson çéè½ç¶æ¯å¯éå¥çï¼Reentrantï¼ï¼ä½å¦æä½ å¨éå½æåµå¥è°ç¨ä¸­ä¸æ³¨æï¼å¾å®¹æé»è¾æ··ä¹±ã</p>
<p><strong>â é£é©ä»£ç </strong>ï¼</p>
<pre><code class="language-java">void methodA() {
    lock.lock();
    try {
        methodB(); // methodB éå lock äºä¸æ¬¡
    } finally {
        lock.unlock(); // åªè§£äºä¸å±
    }
}
</code></pre>
<p><strong>â ï¸ åæ</strong>ï¼<br>
Redis éçéè®¡æ°å¨ï¼Counterï¼å¦æä¸å½é¶ï¼éæ¯ä¸ä¼éæ¾çãç¡®ä¿ä½ çå éæ¬¡æ°åè§£éæ¬¡æ°<strong>ä¸¥æ ¼å¹é</strong>ã</p>
<h3 id="-é·é±äºä¸»ä»åæ¢çå¹½çµé">ð£ é·é±äºï¼ä¸»ä»åæ¢ç"å¹½çµé"</h3>
<p>è¿æ¯ Redis æ¶æå¤©ççç­æ¿ã</p>
<ol>
<li>Client A å¨ <strong>Master</strong> èç¹æ¿å°äºéã</li>
<li>Master è¿æ²¡æ¥å¾åæéåæ­¥ç» Slaveï¼å°±<strong>å®æº</strong>äºã</li>
<li>Slave åçº§ä¸ºæ°ç Masterã</li>
<li>Client B æ¥å éï¼åç°æ° Master ä¸æ²¡éï¼äºæ¯ä¹<strong>å éæå</strong>ã</li>
</ol>
<p><strong>â ï¸ åæ</strong>ï¼<br>
A å B åæ¶ææäºéã<br>
<strong>è§£æ³</strong>ï¼å¦æä½ ä¸è½å®¹å¿è¿ä¸ªæ¦çï¼æä½ï¼ï¼è¯·çä¸æç RedLockï¼æèè½¬æ Zookeeperãå¯¹äº 99% çä¸å¡ï¼æä»¬éæ©<strong>æ¥å</strong>è¿ä¸ªé£é©ã</p>
<hr>
<h2 id="äºredlock-çç±æ¨æä»">äºãRedLock çç±æ¨æä»</h2>
<p>æäºé¢è¯å®ç¹å«åæ¬¢é® RedLockï¼ä½å¨å®éå·¥ä½ä¸­ï¼å®æ¯ä¸ä¸ªè®©äººç±æ¨äº¤å çå­å¨ã</p>
<h3 id="1-å®æ¯ä¸ºäºè§£å³ä»ä¹">1. å®æ¯ä¸ºäºè§£å³ä»ä¹ï¼</h3>
<p>è§£å³ Redis ä¸»ä»éç¾¤å¨ Failoverï¼æéè½¬ç§»ï¼æ¶å¯è½ä¸¢éçé®é¢ã</p>
<h3 id="2-æä¹ç¨">2. æä¹ç¨ï¼</h3>
<p>ä½ éè¦åå¤ <strong>3ä¸ªæ5ä¸ª</strong> å®å¨ç¬ç«ç Redis å®ä¾ï¼ä¸æ¯ Clusterï¼ä¸æ¯ Sentinelï¼å°±æ¯å¹²å¹²ååçåå®ä¾ï¼ã</p>
<pre><code class="language-java">RLock lock1 = redissonInstance1.getLock("lock");
RLock lock2 = redissonInstance2.getLock("lock");
RLock lock3 = redissonInstance3.getLock("lock");

// åå»ºçº¢é
RedissonRedLock lock = new RedissonRedLock(lock1, lock2, lock3);

try {
    // åæ¶å 3ä¸ª Redis ç³è¯·é
    // åªè¦æ &gt; 1.5ä¸ª (å³2ä¸ª) ç³è¯·æåï¼å°±ç®èµ¢
    lock.lock();
    // ä¸å¡é»è¾
} finally {
    lock.unlock();
}
</code></pre>
<h3 id="3-çµé­æ·é®å¼å¾å">3. çµé­æ·é®ï¼å¼å¾åï¼</h3>
<p>æççæ³æ¯ï¼<strong>ä¸å¼å¾</strong>ã</p>
<ul>
<li><strong>è¿ç»´ææ¬é£å</strong>ï¼ä¸ºäºä¸ªéï¼æè¦å¤ç»´æ¤å¥½å ä¸ªç¬ç«ç Redisï¼</li>
<li><strong>æ§è½ææ</strong>ï¼ä¸²è¡æèå¹¶åå»å¤ä¸ªèç¹è¯·æ±ï¼ç½ç»å¼éå¤§ã</li>
<li><strong>å¹¶éç»å¯¹å®å¨</strong>ï¼Martin Kleppmann æåºï¼å¦æåç STWï¼Stop-The-Worldï¼GCï¼æèæ¶éåçè·³è·ï¼RedLock ä¾ç¶å¯è½å¤±æã</li>
</ul>
<p><strong>å»ºè®®</strong>ï¼<br>
å¦æä½ å¨åé¶è¡æ ¸å¿è´¦å¡ç³»ç»ï¼è¯·ç¨ <strong>Zookeeper</strong> æ <strong>Etcd</strong>ã<br>
é¤æ­¤ä¹å¤ç 99% çåºæ¯ï¼<strong>Redisson éåä¸»ä»éç¾¤</strong> å·²ç»è¶³å¤ä¼ç§äºã</p>
<hr>
<blockquote>
<p><strong>ç»è¯­</strong></p>
<p>å¾å¤æ¶åï¼æä»¬å¨ææ¯éåæ¶å®¹æé·å¥"æ¢è¦åè¦"çæªåãä½è½¯ä»¶å·¥ç¨çæ¬è´¨ï¼å°±æ¯<strong>æè¡¡</strong>ï¼Trade-offï¼ã</p>
<p><strong>Redisson</strong> ä¸æ¯ç¥ï¼å®åªæ¯ä¸æè¢«æç£¨å¾è¶³å¤éå©çåãå®ä¸è½è§£å³ææçä¸è´æ§é®é¢ï¼ä½å®å¨<strong>æç¨æ§</strong>ã<strong>æ§è½</strong>å<strong>å¯é æ§</strong>ä¹é´æ¾å°äºä¸ä¸ªæä½³çå¹³è¡¡ç¹ã</p>
<p>å¸æè¿ç¯æç« è½å¸®ä½ ä¸ä»"ä¼ç¨"éï¼æ´è½"æ"éãæ¿ä½ çç³»ç»å¨æ´ªå³°æµéä¸ï¼ä¾ç¶ç¨³å¦æ³°å±±ï¼æ¿ä½ çä»£ç ï¼æ¢æé»è¾çéª¨æ¶ï¼åææ¸©åº¦çè¡èãã</p>
</blockquote>
<hr>
<blockquote>
<p>æç« çæåï¼æ³åä½ å¤èä¸¤å¥ã</p>
<p>ææ¯ä¹è·¯ï¼å¸¸å¸¸æ¯ç­é¹ä¸å­¤ç¬å¹¶å­ãé£äºæ·±å¤çè°è¯ãçµåä¸éªçæ¹æ¡ãè¿æè¸©åç¬èµ·åçé¡¿æï¼å¦æè½æäººä¸èµ·èèï¼è¯¥å¤å¥½ã</p>
<p>ä¸ºæ­¤ï¼æå»ºäºä¸ä¸ªå°è±å­ââæçå¾®ä¿¡å¬ä¼å·ã<strong>[åªåçå°é]</strong>ãã</p>
<p>è¿éæ²¡æé«æ·±è«æµççè®ºå ç ï¼åªææå¯¹åç«¯å¼åãç³»ç»è®¾è®¡åå·¥ç¨å®è·µçæç»­æèä¸æ²æ·ãå®æ´åæç<strong>æ°å­ç¬è®°æ¬</strong>ï¼è®°å½çé£äºå¼å¾è¢«è®°ä½çè§£å³æ¹æ¡åæç»´ç«è±ã</p>
<p>å¦æä½ è§å¾ä»å¤©çæç« è¿æä¸ç¹å¯åï¼æèåçº¯æ³æ¾ä¸ä¸ªåè¡èå¶å°èèææ¯ãè°è°æèï¼é£ä¹ï¼æ¬¢è¿ä½ æ¥ååã<br>
<img alt="85f114bceb12e933bb817ec5fecdfef7" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3703499/202601/3703499-20260105210259813-964799315.jpg" class="lazyload"></p>
<p>æ¿ä½ åè¡è·¯ä¸ï¼æ»æä»£ç å¯åï¼ææ¢¦å¯è¿½ï¼ä¹æç¯ç«å¯äº²ã</p>
</blockquote>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-04 11:50">2026-02-04 11:49</span>&nbsp;
<a href="https://www.cnblogs.com/xzqcsj">ä¸æäºº</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19573422);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19573422', targetLink: 'https://www.cnblogs.com/xzqcsj/p/19573422', title: 'Redisson ä½¿ç¨æåï¼ä» API è¯¯åºå°çé¨çå¤±æï¼å¨æ­¤ç»ç»åå¸å¼éçå©æ¢¦' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ kubectl top æ²¡æ°æ®ï¼ä¸æ¬¡ä» metrics-server è¿½å° kubelet feature gate çææ¥ï¼OrbStack 2.0.5ï¼ ]]></title>
    <link>https://www.cnblogs.com/suknna/p/19573394</link>
    <guid>0e715337ce2268cfc719960299ac7b8e</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/suknna/p/19573394" title="åå¸äº 2026-02-04 11:44">
    <span role="heading" aria-level="2">kubectl top æ²¡æ°æ®ï¼ä¸æ¬¡ä» metrics-server è¿½å° kubelet feature gate çææ¥ï¼OrbStack 2.0.5ï¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>æ¥æï¼2026-02-04</p>
<p>ç¯å¢ä¿¡æ¯ï¼</p>
<ul>
<li>OrbStackï¼2.0.5 (19905)</li>
<li>kubectlï¼v1.32.7</li>
<li>kube-apiserver / kubeletï¼éç¾¤ï¼ï¼v1.33.5+orb1</li>
</ul>
<ol>
<li>é®é¢åºç°ï¼<code>kubectl top</code> å¤±çµ</li>
</ol>
<hr>
<p>ææ³å¨æ¬å°éç¾¤éçä¸ä¸ Pod çèµæºä½¿ç¨éï¼ææ¯ä¾è·ï¼</p>
<pre><code class="language-bash">kubectl top pod -A
</code></pre>
<p>è¿ä¸æ­¥å¦ææ­£å¸¸ï¼åºè¯¥è½çå°æ¯ä¸ª Pod ç CPU(cores)/MEMORY(bytes)ã</p>
<p>ä½ç°å®æ¯ï¼<code>top</code> æ²¡æææ å¯ç¨ï¼å¸åè¡¨ç°æ¯æ æ°æ®æ Metrics not available ä¹ç±»çæç¤ºï¼ãç´è§åè¯æï¼metrics-server å¯è½æ²¡è£å¥½ã</p>
<ol start="2">
<li>åä¸è¦å¨ metrics-serverï¼åæé¾è·¯çæ¸æ¥</li>
</ol>
<hr>
<p><code>kubectl top</code> çæ°æ®æ¥æºæ¯ <code>metrics.k8s.io</code> APIï¼è <code>metrics.k8s.io</code> æ¯ metrics-server èååºæ¥çãmetrics-server æ¬èº«ä¸ééï¼å®å»åèç¹ kubelet æææ ã</p>
<p>æä»¥é¾è·¯æ¯è¿æ ·çï¼</p>
<ul>
<li>kubelet æ´é² Summary APIï¼<code>/stats/summary</code></li>
<li>metrics-server æ Summary APIï¼æç¸å³ kubelet statsï¼</li>
<li>metrics-server çæ <code>metrics.k8s.io</code></li>
<li><code>kubectl top</code> è¯»å <code>metrics.k8s.io</code></li>
</ul>
<p>ç»è®ºï¼ææ¥æ¶å¿é¡»åç¡®è®¤ kubelet ææ²¡æâåææâã</p>
<ol start="3">
<li>metrics å±ææ¥ï¼API è¿å¨ï¼ä½å¯è½åªæ¯ç©ºè½¬</li>
</ol>
<hr>
<p>æåç´æ¥ç <code>metrics.k8s.io</code> æ¯å¦è¿ååå®¹ï¼</p>
<pre><code class="language-bash">kubectl get --raw "/apis/metrics.k8s.io/v1beta1/pods" | head
</code></pre>
<p>å½å®è¿å <code>PodMetricsList</code> æ¶ï¼è¯´æ metrics-server è³å°æ´»çãAPI è·¯ç±ä¹éã<br>
ä½è¿ä¸ä»£è¡¨æ°æ®å°±å®æ´ï¼å ä¸º metrics-server å¯è½åªæ¯æ¿å°äºä¸é¨åï¼æè kubelet æ ¹æ¬æ²¡å Pod/Container statsã</p>
<p>æ¥çç metrics-server æ¥å¿ï¼ç¨äºç¡®è®¤å®æ¯å¦å¨æ±æ¨ kubeletï¼ï¼</p>
<pre><code class="language-bash">kubectl -n kube-system logs deploy/metrics-server --tail=200
</code></pre>
<p>Kubernetes ç¤¾åºéæä¸ç±»éå¸¸å¸åçéè¯¯ï¼metrics-server æ kubelet ç <code>/stats/summary</code> æ¶å¾å° 500ï¼ç¶å <code>kubectl top</code> æ²¡æ°æ®ã[1]</p>
<ol start="4">
<li>kubelet å±ææ¥ï¼Summary API ææ¯çç¸</li>
</ol>
<hr>
<p>æ¢ç¶ metrics-server åªæ¯ä¸­é´åï¼é£å°±ç»è¿å®ï¼ç´æ¥æ¥ kubelet Summary APIã</p>
<p>ååä¸ä¸ª node åï¼</p>
<pre><code class="language-bash">NODE="$(kubectl get node -o name | head -n1 | cut -d/ -f2)"
</code></pre>
<p>ç¶åéè¿ apiserver proxy è¯·æ±ï¼</p>
<pre><code class="language-bash">kubectl get --raw "/api/v1/nodes/$NODE/proxy/stats/summary" | head
</code></pre>
<p>å³é®ç¹å¨ <code>pods</code> å­æ®µãæç¨ <code>rg</code> å¿«éå®ä½ï¼</p>
<pre><code class="language-bash">kubectl get --raw "/api/v1/nodes/$NODE/proxy/stats/summary" | rg '"pods"' -n
</code></pre>
<p>å½æ¶çæ ¸å¿ç°è±¡æ¯ï¼Summary é Pod/Container çº§å«ç»è®¡ä¸å¯¹å²ï¼å¸¸è§å°±æ¯ <code>pods</code> ä¸ºç©ºæç¼ºå¤±ï¼ã<br>
è¿å°±è§£éäºä¸ºä»ä¹ <code>kubectl top</code> æ²¡æ³å·¥ä½ï¼ä¸æ¸¸æ ¹æ¬æ¿ä¸å° Pod çèµæºä½¿ç¨éã</p>
<ol start="5">
<li>æ¥ GitHubï¼OrbStack issue ç»äºç­æ¡</li>
</ol>
<hr>
<p>å°è¿ä¸æ­¥ï¼é®é¢ä»âmetrics-server éç½®âåæäºâkubelet ç stats ä»åªéæ¥âã</p>
<p>ç»§ç»­æç´¢åï¼æ¾å°äº OrbStack çç¸å³ issueï¼</p>
<p><a href="https://github.com/orbstack/orbstack/issues/2143" target="_blank" rel="noopener nofollow">https://github.com/orbstack/orbstack/issues/2143</a></p>
<p>éé¢æå°ï¼éè¦å¨ kubelet éç½®ä¸­å¼å¯ä¸ä¸ª feature gateï¼</p>
<pre><code class="language-yaml">featureGates:
  PodAndContainerStatsFromCRI: true
</code></pre>
<ol start="6">
<li>ä¿®å¤ï¼å¨ kubelet éç½®éå¼å¯ <code>PodAndContainerStatsFromCRI</code></li>
</ol>
<hr>
<p>æå¨ OrbStack ç Kubernetes è®¾ç½®é¡µï¼Kubelet Configurationï¼éå ä¸ï¼</p>
<pre><code class="language-yaml">apiVersion: kubelet.config.k8s.io/v1beta1
kind: KubeletConfiguration
featureGates:
  PodAndContainerStatsFromCRI: true
</code></pre>
<p>åºç¨å¹¶éå¯éç¾¤åï¼åéªè¯ï¼</p>
<pre><code class="language-bash">kubectl top pod -A
kubectl get --raw "/apis/metrics.k8s.io/v1beta1/pods" | head
kubectl get --raw "/api/v1/nodes/$NODE/proxy/stats/summary" | rg '"pods"' -n
</code></pre>
<p>è¿æ¬¡ <code>kubectl top</code> æ­£å¸¸è¾åºï¼<code>metrics.k8s.io</code> ä¹è½çå°å®¹å¨çº§ç <code>usage.cpu</code> / <code>usage.memory</code>ã</p>
<ol start="7">
<li>è¿ä¸ªéç½®çä½ç¨ï¼ä¸ºä»ä¹å äºå®å°±å¥½ï¼</li>
</ol>
<hr>
<p>Kubernetes å®æ¹ææ¡£å¯¹è¿ä¸ªå¼å³çè§£éå¾æç¡®ï¼</p>
<ul>
<li>é»è®¤æåµä¸ï¼kubelet ä½¿ç¨ååµ cAdvisor è·åèç¹æ¦è¦ææ æ°æ®</li>
<li>å¦æå¯ç¨ <code>PodAndContainerStatsFromCRI</code>ï¼å¹¶ä¸å®¹å¨è¿è¡æ¶æ¯æéè¿ CRI è®¿é®ç»è®¡ä¿¡æ¯ï¼é£ä¹ kubelet ä¼æ¹ä¸ºéè¿ CRI è·å Pod/å®¹å¨çº§å«ææ ï¼èä¸æ¯ä» cAdvisor è·åã[2]</li>
</ul>
<p>æå®ç¿»è¯æä¸å¥è¯å°±æ¯ï¼</p>
<p>è®© kubelet âå«èªå·±çâï¼èæ¯âç´æ¥é®å®¹å¨è¿è¡æ¶ï¼CRIï¼ä½ å°åºç¨äºå¤å° CPU/åå­âã</p>
<p>å¨ OrbStack è¿ç§âæ¬å°èæåå°è£å¾æ·±âçç¯å¢éï¼cAdvisor çè§æµè·¯å¾å¯è½ä¸å®æ´ï¼æ¹èµ° CRI stats ä¹åï¼kubelet è½æ¿å°æ´å¯é ç Pod/Container ç»è®¡ï¼äºæ¯ Summary API åå®æ´ï¼metrics-server ææä¸è¥¿å¯èåï¼<code>kubectl top</code> æè½æ¢å¤ã</p>
<ol start="8">
<li>æ¶è·ï¼ä»¥åéå° <code>kubectl top</code> é®é¢æä¹æå¿«å®ä½ï¼</li>
</ol>
<hr>
<p>ææææ¥é¡ºåºåºå®æä¸æ­¥ï¼åºæ¬å°±ä¸ä¼èµ°å¼¯è·¯ï¼</p>
<p>1ï¼çèåå±ï¼<code>metrics.k8s.io</code> æ¯å¦ææ°æ®</p>
<pre><code class="language-bash">kubectl get --raw "/apis/metrics.k8s.io/v1beta1/pods" | head
</code></pre>
<p>2ï¼çæºå¤´ï¼kubelet Summary API ç <code>pods</code> æ¯å¦æ­£å¸¸</p>
<pre><code class="language-bash">kubectl get --raw "/api/v1/nodes/$NODE/proxy/stats/summary" | rg '"pods"' -n
</code></pre>
<p>3ï¼å¦æ Summary ç pod stats ä¸æ­£å¸¸ï¼åå»æ¾âè¯¥åè¡ç/ç¯å¢âçå·²ç¥é®é¢<br>
è¿æ¬¡å°±æ¯ OrbStack issue ç´æ¥ç»äº feature gate çè§£æ³ã</p>
<ol start="9">
<li>å»¶ä¼¸éè¯»</li>
</ol>
<hr>
<ul>
<li>
<p>OrbStack issueï¼æ¬æ¬¡ç´æ¥çº¿ç´¢ï¼ï¼<code>orbstack/orbstack#2143</code><br>
<a href="https://github.com/orbstack/orbstack/issues/2143" target="_blank" rel="noopener nofollow">https://github.com/orbstack/orbstack/issues/2143</a></p>
</li>
<li>
<p>Kubernetes å®æ¹ææ¡£ï¼Node metricsãSummary APIãä»¥å <code>PodAndContainerStatsFromCRI</code> çè¯´æ<br>
<a href="https://kubernetes.io/zh-cn/docs/reference/instrumentation/node-metrics/" target="_blank" rel="noopener nofollow">https://kubernetes.io/zh-cn/docs/reference/instrumentation/node-metrics/</a>  [2]</p>
</li>
<li>
<p>Kubernetes issueï¼metrics-server æ <code>/stats/summary</code> è¿å 500ã<code>kubectl top</code> æ æ°æ®çå¸åæ¡ä¾ï¼ç¨äºå¯¹ç§çç¶ï¼<br>
<a href="https://github.com/kubernetes/kubernetes/issues/111276" target="_blank" rel="noopener nofollow">https://github.com/kubernetes/kubernetes/issues/111276</a>  [1]</p>
</li>
</ul>
<h2 id="åè">åè</h2>
<p>[1] <a href="https://github.com/kubernetes/kubernetes/issues/111276" target="_blank" rel="noopener nofollow">https://github.com/kubernetes/kubernetes/issues/111276</a><br>
[2] <a href="https://kubernetes.io/zh-cn/docs/reference/instrumentation/node-metrics/" target="_blank" rel="noopener nofollow">https://kubernetes.io/zh-cn/docs/reference/instrumentation/node-metrics/</a></p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-04 11:44">2026-02-04 11:44</span>&nbsp;
<a href="https://www.cnblogs.com/suknna">suknna</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19573394);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19573394', targetLink: 'https://www.cnblogs.com/suknna/p/19573394', title: 'kubectl top æ²¡æ°æ®ï¼ä¸æ¬¡ä» metrics-server è¿½å° kubelet feature gate çææ¥ï¼OrbStack 2.0.5ï¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ FastAPIå®æ¶ä»»å¡å¨æ»ç¥ï¼ä»å¥é¨å°é¿å¼å¤è¿ç¨çå ]]></title>
    <link>https://www.cnblogs.com/ymtianyu/p/19573111</link>
    <guid>7695e87effda9bff4d9a3e5fc674d4f6</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ymtianyu/p/19573111" title="åå¸äº 2026-02-04 11:01">
    <span role="heading" aria-level="2">FastAPIå®æ¶ä»»å¡å¨æ»ç¥ï¼ä»å¥é¨å°é¿å¼å¤è¿ç¨çå</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        æ¬æè¯¦ç»ä»ç»äºå¨FastAPIæ¡æ¶ä¸­å¦ä½éæå¹¶ä½¿ç¨APScheduleråå»ºå¯é çå®æ¶ä»»å¡ãä»ä¸ºä»ä¹éè¦ä¸é¨çå®æ¶ä»»å¡åºè®²èµ·ï¼éè¿æ¯å»è§£éæ ¸å¿æ¦å¿µï¼æä¾äºå®æ´çãå¯ç´æ¥å¤ç¨çéæä»£ç ãæç« éç¹åæäºå¤è¿ç¨é¨ç½²ç¯å¢ä¸å®æ¶ä»»å¡éå¤æ§è¡çç»å¸é®é¢ï¼å¹¶ç»åºäºåºäºæä»¶éåæ°æ®åºéçä¸¤ç§å®ç¨è§£å³æ¹æ¡ï¼å¸®å©ä½ é¿åçº¿ä¸äºæã
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h2>ä½ çFastAPIåå°ä»»å¡æ¯ä¸æ¯è¿å¨âè£¸å¥âï¼</h2>
<p>åè¯´äºå®æ¡ä¾ï¼æä¸ªä¿éæ´»å¨éè¦å®æ¶ä¸çº¿ãç»æå¢ï¼ä¾èµçäºå½æ°æå¡çªç¶æå¨ï¼é£ä¸ªâç®åå¯é âç<code style="color: rgba(186, 55, 42, 1)">crontab</code>èæ¬æ£æ¯æ²¡è§¦åãåæ¨ä¸ç¹ï¼è¿è¥ççµè¯ç´æ¥æä½ çç¾æ¢¦å¹²ç¢ãð« äºåå¤çï¼ææè¯å°ï¼<strong style="color: rgba(186, 55, 42, 1)">æå®æ¶ä»»å¡å¯çäºæä½ç³»ç»æèå¤é¨é»çæå¡ï¼å¨å¾®æå¡æ¶æéï¼å°±æ¯ç»èªå·±åé·ã</strong></p>
<p>çå®æçï¼æåæå®æ¶ä»»å¡âè¯·âåäºåºç¨åé¨ï¼ç¨<code style="color: rgba(186, 55, 42, 1)">APScheduler</code>å¨FastAPIéæäºä¸ªèªæ²»çå°é¹éãä»å¤©ï¼å±ä»¬å°±æ¥èèè¿å¥å®æç»éªï¼è¿åé£äºåå¤ç¬èµ·æ¥å¡«çåâ¦â¦</p>
<hr style="border: none; height: 1px; background: linear-gradient(90deg, rgba(0, 0, 0, 0), rgba(52, 152, 219, 1), rgba(0, 0, 0, 0)); margin: 30px 0">
<h2>ð¯ æ¬æä½ è½å¾å°ä»ä¹</h2>
<div>
<p>1. ä¸ºä»ä¹è¯´FastAPIèªå¸¦ç<code style="color: rgba(186, 55, 42, 1)">BackgroundTasks</code>ä¸éååå®æ¶ä»»å¡ã</p>
<p>2. APSchedulerçæ ¸å¿æ¦å¿µï¼ç¨âé¹éâåâé¤åâçæ¯å»è®©ä½ ç§æã</p>
<p>3. æææéæï¼æä¾å¯ç´æ¥å¤å¶ç²è´´çä»£ç åã</p>
<p>4. <strong style="color: rgba(186, 55, 42, 1)">æéè¦ç</strong>ï¼å¤è¿ç¨é¨ç½²ï¼æ¯å¦ç¨<span style="color: rgba(186, 55, 42, 1)"><code>Uvicorn workers</code></span>ï¼æ¶ï¼å®æ¶ä»»å¡éå¤æ§è¡çâé¬¼æäºâä¸è§£å³ä¹éã</p>
</div>
<h2>ð§ ç¬¬ä¸é¨åï¼é®é¢ä¸èæ¯ ââ ä¸ºä»ä¹å¦èµ·çç¶ï¼</h2>
<p>FastAPI ç <code style="color: rgba(186, 55, 42, 1)">BackgroundTasks</code> æ¯ä¸ªå¥½åå¿ï¼ä½å®åªæ¯ä¸ªâè·è¿å°å¥âãä½ APIè¯·æ±æ¥äºï¼å®å¸®ä½ å¼æ­¥å¤çäºæäºï¼æ¯å¦åé®ä»¶ãåæ¥å¿ãä½å®æä¸ªç¡¬ä¼¤ï¼<strong style="color: rgba(186, 55, 42, 1)">å®æ²¡æè®°å¿ï¼ä¹ä¸ä¼çè¡¨ã</strong> æå¡ä¸éå¯ï¼ææè®¡ååçâè·è¿âä»»å¡å¨å¿ååã</p>
<p>å®æ¶ä»»å¡å¢ï¼å®éè¦çæ¯âå¿ è¯çç®¡å®¶âãä¸ç®¡æå¡æ¯å¦éå¯ï¼é½è¦è®°å¾æ¯å¤©ä¸å10ç¹è¦åæ¥è¡¨ï¼æ¯å¨ä¸åæ¨è¦æ¸ç¼å­ãè¿éè¦æä¹ååæ¶é´è°åº¦è½åï¼è¿æ­£æ¯ <code style="color: rgba(186, 55, 42, 1)">APScheduler</code> çç»æ´»ã</p>
<p>ä½ å¯è½ä¼é®ï¼ç¨<span style="color: rgba(186, 55, 42, 1)"><code>Celery</code></span>è¡ä¸è¡ï¼è¡ï¼ä½æé¸¡ç¨çåäºãAPScheduleræ´è½»éï¼ä¸ä½ FastAPIåºç¨åçå±æ­»ï¼ç®¡çèµ·æ¥ç®åç´æ¥ï¼ç¹å«éåä¸å¡é»è¾æ¸æ°ãä¸éè¦åå¸å¼åè°çå®æ¶åºæ¯ã</p>
<h2>âï¸ ç¬¬äºé¨åï¼æ ¸å¿åç ââ APSchedulerçä¸æ¿æ§</h2>
<p>å«è¢«å®çåå­åå°ï¼æå®æ³è±¡æä¸ä¸ª<strong style="color: rgba(186, 55, 42, 1)">é«åº¦å¯å®å¶çæºè½é¹éç³»ç»</strong>ãå®ä¸»è¦ç±ä¸é¨åç»æï¼</p>
<div>
<p><strong>ð <span style="color: rgba(186, 55, 42, 1)">è§¦åå¨ (Trigger)</span></strong><span style="color: rgba(186, 55, 42, 1)">:</span> å³å®âä»ä¹æ¶ååâãæ¯æ¯å¤©åºå®æ¶é´ï¼<span style="color: rgba(186, 55, 42, 1)"><code>date</code></span>ï¼ï¼è¿æ¯é´éåºå®æ¶é´ï¼<span style="color: rgba(186, 55, 42, 1)"><code>interval</code></span>ï¼ï¼æèæ¯åcrontabé£æ ·çå¤æå¨æï¼<span style="color: rgba(186, 55, 42, 1)"><code>cron</code></span>ï¼ï¼</p>
<p><strong>ð <span style="color: rgba(186, 55, 42, 1)">ä½ä¸å­å¨å¨ (Job Store)</span></strong><span style="color: rgba(186, 55, 42, 1)">:</span> è®°ä½âæåªäºé¹éè¦åâãé»è®¤å­å¨åå­éï¼éå¯å°±å¿ãæä»¬å¯ä»¥è®©å®è®°å¨æ°æ®åºéï¼æ¯å¦SQLiteãPostgreSQLï¼ï¼å®ç°æä¹åã</p>
<p><strong>ð¨âð¼ <span style="color: rgba(186, 55, 42, 1)">æ§è¡å¨ (Executor)</span></strong><span style="color: rgba(186, 55, 42, 1)">:</span> è´è´£âé¹éåäºä»¥åå·ä½åä»ä¹âãæ¯ç¨çº¿ç¨æ± è¿æ¯è¿ç¨æ± æ¥æ§è¡æä»¬çä»»å¡å½æ°ï¼</p>
</div>
<p>è<strong style="color: rgba(186, 55, 42, 1)">è°åº¦å¨ (Scheduler)</strong> å°±æ¯æ»æ§å°ï¼æä¸é¢ä¸ä¸ªé¨ä»¶ç»è£èµ·æ¥ï¼å¹¶å¯å¨è¿ä¸ªé¹éç³»ç»ã</p>
<h2>ð ç¬¬ä¸é¨åï¼å®ææ¼ç¤º ââ æææéæå°FastAPI</h2>
<p>å¥½ï¼å±ä»¬åæ¥å®è£ãè¿æ­¥æç®åï¼</p>
<pre class="language-bash highlighter-hljs"><code>pip install apscheduler</code></pre>
<p>æ¥ä¸æ¥éç¹æ¥äºï¼åå§åå¹¶éæå°FastAPIççå½å¨æãè¿éæä¸ªå³é®æå·§ï¼<strong style="color: rgba(186, 55, 42, 1)">ä¸å®è¦æschedulerçå¯å¨åå³é­æå¨FastAPIçåºç¨äºä»¶ä¸</strong>ï¼ä¿è¯åºç¨å¯å¨æ¶å®å¯å¨ï¼åºç¨ä¼éå³é­æ¶å®ä¹åä¸ãåä¸å«å­¦æå½åï¼ç´æ¥å¨æ¨¡åå±é¢<code style="color: rgba(186, 55, 42, 1)">scheduler.start()</code>ï¼å¯¼è´æµè¯æ¶èæ¬è·å®ä¸éåºã</p>
<pre class="language-python highlighter-hljs"><code># é¡¹ç®ç»æå»ºè®®
# app/
#   __init__.py
#   main.py       # FastAPI åºç¨åå»ºåäºä»¶å¤ç
#   scheduler.py  # è°åº¦å¨éç½®åä»»å¡å®ä¹
#   tasks.py      # å·ä½çä»»å¡å½æ°

# app/scheduler.py
from apscheduler.schedulers.asyncio import AsyncIOScheduler
from apscheduler.jobstores.sqlalchemy import SQLAlchemyJobStore
from apscheduler.executors.pool import ThreadPoolExecutor

# 1. éç½®ç»ä»¶
jobstores = {
    'default': SQLAlchemyJobStore(url='sqlite:///jobs.sqlite')  # ä½¿ç¨SQLiteæä¹å
}
executors = {
    'default': ThreadPoolExecutor(20)  # çº¿ç¨æ± æ§è¡
}
job_defaults = {
    'coalesce': False,  # éè¿çä»»å¡æ¯å¦åå¹¶æ§è¡ï¼ä¸è¬Falseï¼
    'max_instances': 3  # åä¸ä¸ªä»»å¡åæ¶è¿è¡çæå¤§å®ä¾æ°
}

# 2. åå»ºè°åº¦å¨å®ä¾
scheduler = AsyncIOScheduler(
    jobstores=jobstores,
    executors=executors,
    job_defaults=job_defaults,
    timezone="Asia/Shanghai"  # æ¶åºï¼æ¶åºï¼æ¶åºï¼éè¦çäºè¯´ä¸é
)

# 3. å®ä¹ä»»å¡å½æ° (å¯ä»¥æ¾å¨åæä»¶ï¼ä¹å¯ä»å¶ä»æ¨¡åå¯¼å¥)
def my_sync_job():
    print("åæ­¥ä»»å¡æ§è¡äºï¼")

async def my_async_job():
    print("å¼æ­¥ä»»å¡æ§è¡äºï¼")
    # è¿éå¯ä»¥æå¿«å°è°ç¨å¶ä»asyncå½æ°

# 4. æ·»å ä»»å¡çå½æ° (éå¸¸å¨åºç¨å¯å¨æ¶è°ç¨)
def add_jobs():
    # é´éä»»å¡ï¼æ¯30ç§æ§è¡ä¸æ¬¡
    scheduler.add_job(my_sync_job, 'interval', seconds=30, id='sync_interval_job')
    # Cronä»»å¡ï¼æ¯åéçç¬¬30ç§æ§è¡
    scheduler.add_job(my_async_job, 'cron', second=30, id='async_cron_job')
    # åæ¬¡ä»»å¡ï¼2023å¹´10æ1æ¥æ§è¡
    # scheduler.add_job(xxx, 'date', run_date='2023-10-01 00:00:00')    </code></pre>
<p>ç¶åå¨ä½ ç<code style="color: rgba(186, 55, 42, 1)">main.py</code>éï¼æå®åFastAPIç»å¨ä¸èµ·ï¼</p>
<pre class="language-python highlighter-hljs"><code># app/main.py
from fastapi import FastAPI
from .scheduler import scheduler, add_jobs

app = FastAPI(title="å®æ¶ä»»å¡æ¼ç¤º")

@app.on_event("startup")
async def startup_event():
    # åºç¨å¯å¨æ¶ï¼æ·»å ä»»å¡å¹¶å¯å¨è°åº¦å¨
    if not scheduler.running:
        add_jobs()
        scheduler.start()
        print("APScheduler å·²å¯å¨")

@app.on_event("shutdown")
async def shutdown_event():
    # åºç¨å³é­æ¶ï¼ä¼éå°å³é­è°åº¦å¨
    if scheduler.running:
        scheduler.shutdown()
        print("APScheduler å·²å³é­")

#from contextlib import asynccontextmanager
#@asynccontextmanager
#async def lifespan(app: FastAPI):
#    # åºç¨å¯å¨æ¶ï¼æ·»å ä»»å¡å¹¶å¯å¨è°åº¦å¨
#    if not scheduler.running:
#        add_jobs()
#        scheduler.start()
#        print("APScheduler å·²å¯å¨")
#    yield
#    # åºç¨å³é­æ¶ï¼ä¼éå°å³é­è°åº¦å¨
#    if scheduler.running:
#        scheduler.shutdown()
#        print("APScheduler å·²å³é­")
#app = FastAPI(title="å®æ¶ä»»å¡æ¼ç¤º", lifespan=lifespan)

@app.get("/")
async def root():
    return {"message": "Hello World"}

# å¯éï¼æä¾ä¸ä¸ªAPIæ¥æå¨è§¦åææ¥çä»»å¡ç¶æ
@app.get("/jobs")
async def list_jobs():
    jobs = scheduler.get_jobs()
    return {"jobs": [{"id": j.id, "next_run": str(j.next_run_time)} for j in jobs]}    </code></pre>
<p>è¿éä¿çäºæ§å¼ç<span style="color: rgba(186, 55, 42, 1)"><code>on_event</code></span>çå½å¨æç®¡çå½æ°ï¼æ¹ä¾¿çè§£<span style="color: rgba(186, 55, 42, 1)"><code>scheduler</code></span>çå¼å¯ä¸å³é­é»è¾ï¼å¼åæ¶æ¹ä¸º<span style="color: rgba(186, 55, 42, 1)"><code>lifespan</code></span>è¿è¡æ´ä¼éççå½å¨æç®¡çã</p>
<p>è·èµ·æ¥è¯è¯å§ï¼ä½ ä¼çå°æ§å¶å°æ¯é30ç§åæ¯åéçç¬¬30ç§é½æè¾åºãå°æ°æ®åºéççï¼<code style="color: rgba(186, 55, 42, 1)">jobs.sqlite</code>éå·²ç»å­ä¸äºæä»¬çä»»å¡éç½®ï¼éå¯åºç¨ä»»å¡ä¹ä¸ä¼ä¸¢å¤±ãð</p>
<h2>ð¥ ç¬¬åé¨åï¼å¤©åé¢è­¦ ââ å¤è¿ç¨é¨ç½²ä¸éå¤æ§è¡</h2>
<p>æ¯ä¸æ¯ä»¥ä¸ºè¿æ ·å°±ä¸äºå¤§åäºï¼<strong style="color: rgba(186, 55, 42, 1)">æå¤§çåæååæµ®åºæ°´é¢ã</strong></p>
<p>å½ä½ ç¨çäº§æ¨¡å¼å¯å¨FastAPIï¼æ¯å¦ï¼</p>
<pre class="language-lua highlighter-hljs"><code>uvicorn app.main:app --host 0.0.0.0 --port 8000 --workers 4</code></pre>
<p>è¿<code style="color: rgba(186, 55, 42, 1)">--workers 4</code>æå³çå¯å¨äº4ä¸ªç¬ç«çè¿ç¨ãé£ä¹ï¼<code style="color: rgba(186, 55, 42, 1)">app.on_event("startup")</code>ä¼å¨è¿4ä¸ªè¿ç¨é<strong style="color: rgba(186, 55, 42, 1)">åæ§è¡ä¸æ¬¡</strong>ï¼ç»æå°±æ¯ï¼ä½ çå®æ¶ä»»å¡è¢«æ·»å äº4æ¬¡ï¼ä¼è¢«éå¤æ§è¡4æ¬¡ï¼æ³è±¡ä¸ä¸ï¼æ¯å°æ¶åä¸æ¬¡çæ¥è¡¨é®ä»¶ï¼çªç¶åæäºæ¯å°æ¶ååå°ï¼èæ¿åç¨æ·é½ä¼ç¯æã</p>
<h3>ð è§£å³æ¹æ¡ï¼æä»¶éä¸é¢å¯¼èéä¸¾</h3>
<p>æ ¸å¿æè·¯å¾ç®åï¼<strong style="color: rgba(186, 55, 42, 1)">ç¡®ä¿å¨å¤ä¸ªè¿ç¨ä¸­ï¼åªæä¸ä¸ªè¿ç¨è½çæ­£å¯å¨åæ·»å å®æ¶ä»»å¡ã</strong> è¿éåäº«ä¸¤ç§æä»¬çº¿ä¸å¨ç¨çæ¹æ³ã</p>
<div>
<p><strong>æ¹æ¡ä¸ï¼ç®åç²æ´çæä»¶éï¼éåå¤§é¨ååºæ¯ï¼</strong></p>
<p>å©ç¨<code style="color: rgba(186, 55, 42, 1)">fcntl</code>ï¼Linuxï¼æ<code style="color: rgba(186, 55, 42, 1)">msvcrt</code>ï¼Windowsï¼ç»ä¸ä¸ªæä»¶å éï¼åªææ¿å°éçè¿ç¨æè½åå§åè°åº¦å¨ã</p>
<pre class="language-python highlighter-hljs"><code># å¨ scheduler.py æ startup äºä»¶ä¸­
import os
import sys

def try_acquire_lock(lock_file):
    try:
        import fcntl
        f = open(lock_file, 'w')
        # å°è¯è·åéé»å¡çç¬å é
        fcntl.flock(f, fcntl.LOCK_EX | fcntl.LOCK_NB)
        return f  # è¿åæä»¶å¯¹è±¡ï¼ä¿ææå¼ç¶æä»¥ææé
    except (BlockingIOError, ImportError):
        # è·åå¤±è´¥ï¼å¶ä»è¿ç¨å·²ææéï¼æä¸æ¯æçç³»ç»
        return None

lock_file = "/tmp/fastapi_scheduler.lock"
lock_fd = try_acquire_lock(lock_file)

@app.on_event("startup")
async def startup_event():
    if lock_fd is not None:
        # åªææ¿å°éçè¿ç¨æå¯å¨è°åº¦å¨
        if not scheduler.running:
            add_jobs()
            scheduler.start()
            print(f"è¿ç¨ {os.getpid()} æåå¯å¨ APScheduler")
    else:
        print(f"è¿ç¨ {os.getpid()} æªè·å¾éï¼è·³è¿è°åº¦å¨å¯å¨")        </code></pre>
</div>
<div>
<p><strong>æ¹æ¡äºï¼å©ç¨æ°æ®åºåå­æä½ï¼æ´åå¸å¼ï¼</strong></p>
<p>å¨æ°æ®åºéå»ºä¸å¼ è¡¨ï¼ç¨åå­æ§çâæå¥æç«äºâæä½æ¥éä¸¾ä¸ä¸ªâé¢å¯¼èâè¿ç¨ã</p>
<pre class="language-python highlighter-hljs"><code># åè®¾ä½¿ç¨SQLAlchemy ORM
from sqlalchemy.ext.asyncio import AsyncSession
from your_app.models import SchedulerLock
import datetime

async def acquire_db_lock(session: AsyncSession, timeout_minutes=10):
    try:
        # å°è¯æå¥ä¸æ¡éè®°å½ï¼hoståpidæ è¯å½åè¿ç¨
        lock = SchedulerLock(
            id=1,  # åºå®ID
            host="my_host",
            pid=os.getpid(),
            last_heartbeat=datetime.datetime.utcnow()
        )
        session.add(lock)
        await session.commit()
        return True  # æå¥æåï¼è·å¾é
    except IntegrityError:  # å¯ä¸çº¦æå²çªï¼è®°å½å·²å­å¨
        await session.rollback()
        # æ£æ¥å·²æçéæ¯å¦å·²è¿æ
        existing_lock = await session.get(SchedulerLock, 1)
        if existing_lock and (datetime.datetime.utcnow() - existing_lock.last_heartbeat).seconds &gt; timeout_minutes * 60:
            # éå·²è¿æï¼æ´æ°ä¸ºå½åè¿ç¨
            existing_lock.host = "my_host"
            existing_lock.pid = os.getpid()
            existing_lock.last_heartbeat = datetime.datetime.utcnow()
            await session.commit()
            return True
        return False  # æªè½è·å¾é

# å¨ startup äºä»¶ä¸­è°ç¨ acquire_db_lock å¤æ­        </code></pre>
</div>
<p><strong style="color: rgba(186, 55, 42, 1)">è®°ä½ï¼å¤è¿ç¨é¨ç½²ä¸å®æ¶ä»»å¡åå§åï¼ä¸å éç­äºå¶é çº¿ä¸äºæã</strong> æä¸ªäººæ´æ¨èæ¹æ¡ä¸ï¼è¶³å¤ç®åå¯é ï¼é¤éä½ å·²ç»æ¯è·¨æºå¨çåå¸å¼é¨ç½²äºã</p>
<h2>â¨ æåå°å¦ä¸å¥</h2>
<p>å®æ¶ä»»å¡çä¼¼æ¯å°åè½ï¼ä½æå®åå¯é å´éè¦å¤å¤çå¿ãä»éæ©<code style="color: rgba(186, 55, 42, 1)">APScheduler</code>ï¼å°æ­£ç¡®éæå°åºç¨çå½å¨æï¼åå°æåç¨æä»¶éé¿å¼å¤è¿ç¨çåï¼æ¯ä¸æ­¥é½æ¯æä»¬è¸©è¿çé·ã</p>
<p>ææ¯æ æ²¡æé¶å¼¹ï¼ä½æäºè¿å¥ç»åæ³ï¼ä½ çFastAPIåå°å®æ¶ä»»å¡ï¼åºæ¬å¯ä»¥é«ææ å¿§äºãè³å°ï¼è½è®©ä½ ç¡ä¸ªå®ç¨³è§ï¼ä¸ç¨åæå¿åæ¨ä¸ç¹ççµè¯ã</p>
<hr style="border: none; height: 1px; background: linear-gradient(90deg, rgba(0, 0, 0, 0), rgba(52, 152, 219, 1), rgba(0, 0, 0, 0)); margin: 40px 0">
<p>å¸æè¿ç¯âè¸©åæ¥è®°âå¯¹ä½ æç¨ãå¦æä½ å¨å®è·µè¿ç¨ä¸­ååç°äºæ°çâåç¹âï¼æèææ´ä¼éçè§£å³æ¹æ¡ï¼ä¸å®è¦å¨è¯è®ºåºåè¯æåï¼ç¬ä¹ä¹ä¸å¦ä¼ä¹ä¹ï¼åä¸ï¼æ¯ç¬ååä¸å¦ä¼å¡«å¡«ãð</p>
<p><strong>æ¶èç¹èµå³æ³¨</strong>ï¼ä½ çæ¯ææ¯æåäº«æ´å¤å®æå¹²è´§çæå¤§å¨åãä¸æå¯è½èèFastAPIå¦ä½ä¼éå°ååå¸å¼æ¥å¿è¿½è¸ªï¼æä»¬ä¸è§ä¸æ£ï¼</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-04 11:02">2026-02-04 11:01</span>&nbsp;
<a href="https://www.cnblogs.com/ymtianyu">ä¸åç¨åºåªå</a>&nbsp;
éè¯»(<span id="post_view_count">64</span>)&nbsp;
è¯è®º(<span id="post_comment_count">4</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19573111);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19573111', targetLink: 'https://www.cnblogs.com/ymtianyu/p/19573111', title: 'FastAPIå®æ¶ä»»å¡å¨æ»ç¥ï¼ä»å¥é¨å°é¿å¼å¤è¿ç¨çå' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ æå¾ç¼ç¨è¯­è¨çéç¨ç»æï¼éä¾¿åªä¸ªè¯­è¨é½æ¯ææ¿ææ ]]></title>
    <link>https://www.cnblogs.com/pie-o/p/19571670</link>
    <guid>55ebf650da9089c72bf2c0f338c362d7</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/pie-o/p/19571670" title="åå¸äº 2026-02-04 09:45">
    <span role="heading" aria-level="2">æå¾ç¼ç¨è¯­è¨çéç¨ç»æï¼éä¾¿åªä¸ªè¯­è¨é½æ¯ææ¿ææ</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        ç¼ç¨è¯­è¨çéç¨æ¶æï¼ç´æ¥å©åè¯­è¨å­¦ä¹ çç³»ç»æ§æ¡æ¶è®¤ç¥
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<blockquote>
<p>ç¼ç¨è¯­è¨æ ¸å¿ç»æä½ç³»ï¼ä»ç¸ä¼¼æ§å°æ¬è´¨çè§£</p>
</blockquote>
<h2 id="åè¨">åè¨</h2>
<p>å¨æ¥è§¦è¿å¤ä¸ªç¼ç¨è¯­è¨çå­¦ä¹ ä¹åï¼è§å¯å°ä¸äºéç¨çèå¼ç»æï¼ç¼ç¨è¯­è¨è½ç¶è¡¨é¢å·®å¼å·¨å¤§ï¼ä½åºå±å­å¨ä¸å¥<strong>ä¸å¯ç®åçæå°å®å¤é</strong>ââè¿æ¯ææè¯­è¨é½å¿é¡»åå«çåºæ¬åç´ ï¼å¦åæ æ³è¡¨è¾¾ä»»æç®æ³ã</p>
<p>èææ¡ä½è¿ä¸ç¹ä¹åï¼å¯¹ä»»æç¼ç¨è¯­è¨çå­¦ä¹ é½æä¸ç§èç»æå¶ææ°çæè§ï¼ä¸æ¦äºè§£å°è¿ç§éç¨èå¼çç»æï¼é£ä¹å¯¹äºå¥é¨ç¼ç¨è¯­è¨å°±ä¼æä¸ä¸ª<mark>ç³»ç»æ§çå­¦ä¹ è®¤ç¥æ¡æ¶</mark>ï¼ç¥éè¯¥å­¦ä»ä¹ï¼ä»åªéå¼å§å­¦ã</p>
<p>è¿ç§éç¨çèå¼ç»æå°±æ¯ææç¼ç¨è¯­è¨å±æçåºç¡åç´ ï¼è¿ç§ç¸ä¼¼æ§æºäºè®¡ç®æºç§å­¦çåºæ¬åçââææç¼ç¨è¯­è¨æ¬è´¨ä¸é½æ¯äººä¸è®¡ç®æºæ²éçæ½è±¡å·¥å·ï¼éè¦éµå¾ª<strong>è®¡ç®æºåºå±æ§è¡é»è¾ççº¦æ</strong>ã</p>
<p>æ­£æ¯è¿æ ·ççº¦æï¼å¯¼è´äºç¼ç¨è¯­è¨å¨è®¾è®¡æ¶æå±åéµå®çæç§è§åï¼ä¹å°±æ¯é£äºéèå¨åç§è¯­æ³è¡¨é¢ä¹ä¸ç<strong>å±æ§è§å¾</strong>ãä¹å ä¸ºæ¯è®²è§£å±æ§çåå®¹ï¼æä»¥åªä¼æ¶åå°æåªäºå±æ§ï¼ä¸ä¼æè¿°è¿äºå±æ§å¨å·ä½è¯­è¨ä¸­æ¯æä¹è¡¨ç¤ºçåå®¹ã</p>
<h2 id="åºç¡è¦ç´ ">åºç¡è¦ç´ </h2>
<p>ä»»ä½ç¼ç¨è¯­è¨é½åä¸åº§å»ºç­ï¼éè¦æåºç¡çææåç»æãè¿äºåºç¡åç´ æ¯è¡¨è¾¾ç¨åºé»è¾çåºæ¬ååï¼å®ä»¬å±åææäºç¼ç¨è¯­è¨çåºç¡æ¡æ¶ï¼åæ¬å¦ä¸äºä¸ªé¨åï¼</p>
<ol>
<li><code>æ°æ®è¡¨ç¤º</code></li>
<li><code>è¡¨è¾¾å¼ä¸è¿ç®</code></li>
<li><code>æ§å¶ç»æ</code></li>
<li><code>æ½è±¡æºå¶</code></li>
<li><code>è¾å¥è¾åºæºå¶</code></li>
</ol>
<p>ä¸é¢æé¡ºåºè¿è¡ä»ç»ã</p>
<h3 id="æ°æ®è¡¨ç¤º">æ°æ®è¡¨ç¤º</h3>
<blockquote>
<p>ä»»ä½è®¡ç®é½æ¶åæ°æ®ï¼å¿é¡»æ<strong>è¡¨ç¤ºæ°æ®</strong>çæ¹å¼</p>
</blockquote>
<p>å°±åæ¯å¨èç¨¿æ¬ä¸æ±è§£æ°å­¦é¢ä¸æ ·ï¼ç¹å«æ¯ä»£æ°åå®¹ï¼æå­æ¯ãè®¡ç®ç¬¦å·ä»¥åæ°å¼ï¼è¿äºåå¨æ¬å­ä¸çå­ç¬¦æ¯è¡¨è¾¾è¿äºåå®¹çå·ä½å½¢å¼ï¼å¹¶ä¸å¯ä»¥ä¿è¯æ¯ä¸ªå­¦ä¹ è¿ä»£æ°çäººé½å¯ä»¥çæåçè§£ï¼å ä¸ºæ¯ä¸å¥ç¸åçæºå¶ã</p>
<h4 id="åé">åé</h4>
<p>é¦åè¦ä»ç»çæ¯<code>åé</code>ï¼é£ä¹ä¸ºä»ä¹è¦æåéå¢ï¼æ³è±¡ä¸ä¸ï¼å¨ä»£æ°ä¸­ï¼å¦ææ²¡æåéï¼åªæå¸¸éï¼ä¹å°±æ¯å·ä½çæ°å¼ï¼é£ä¹ææçé®é¢é½åªæ¯æ°å¼è®¡ç®é®é¢ï¼èä¸æ¯å¿é¡»ä¸æ¬¡æ§å®æçè®¡ç®ï¼ä¸å¯è½åæ­¥éª¤ï¼è¿­ä»£å¼çè®¡ç®ã</p>
<p>åæ¶å¨å®éæåµä¸­ï¼å°±æ¯ææ±è§£<strong>æªç¥é</strong>çéæ±ï¼ä¹ææäºéå¨<strong>å¨æåå</strong>çæåµï¼æä»¥åçº¯çå¸¸éæ æ³å»ºæä¸ä¸ªå¤æä¸å¨æçæ°å­¦ä¸çï¼å¯¹ç¼ç¨èè¨ä¹åæ ·å¦æ­¤ã</p>
<p>å¨ç¨åºä¸­ï¼åéçä½ç¨å¦ä¸æç¤ºï¼</p>
<ol>
<li><strong>ä¸´æ¶ä¿å­æ°æ®</strong>ï¼ç¨äºåæ­¥è®¡ç®ï¼é¿åä¸æ¬¡æ§å¤§éè®¡ç®</li>
<li><strong>é¿åç´æ¥ä½¿ç¨å¸¸é</strong>ï¼å ä¸ºå¨ä¸ä¸ªè¡¨è¾¾å¼ä¸­ï¼å¸¸éæ¯æ æ³ä¿®æ¹ç
<ul>
<li>åè®¾å®ä¹ä¸ä¸ªç©¿äºå¢é«éçäººçèº«é«å½æ°ä¸º<code>f(x)=x+2</code>ï¼å¶ä¸­åé<code>x</code>è¡¨ç¤ºè¿ä¸ªäººçå®éèº«é«ï¼èæ´æ°å¸¸é2å°±è¡¨ç¤ºå¢é«éçé«åº¦ï¼æ¯åºå®çæ°å¼</li>
<li>å¦æå®åªç©¿åä¸ä¸ªå¢é«éçè¯ï¼è¿ä¸ªå½æ°æ²¡æé®é¢ï¼ä½æ¯åªå¤©ä»æ¢äºå¶ä»é«åº¦çéå­ï¼è¿ä¸ª2å°±ä¸éç¨äº</li>
<li>é¾éè¦ä¸ºæ¯ä¸ªéå­å®ä¹ä¸ä¸ªä¸å±çå½æ°åï¼è¿æ¾ç¶ä¸å¯è½ãä½æ¯åä¸ç¥ééå­å·ä½è½ç»ä»æä¾å¤å°èº«é«</li>
<li>æä»¥è¿æ¶åå°±æ¢ç¨åé<code>a</code>æ¥æè¿°ï¼<code>f(x)=x+a</code>ï¼æ­¤æ¶è¿ä¸ªåé<code>a</code>å°±ä»£æäºå¢é«éçé«åº¦ï¼æ ¹æ®å®ééå­çå¢é«åè½åæ­¥ååï¼çµæ´»åº¦å°±æ´é«äºã</li>
</ul>
</li>
<li><strong>è®°å½ç¨åºè¿è¡ç¶æ</strong>ï¼ä¸åäºä¸´æ¶ä¿å­æ°æ®åªæ¯æä¸è®¡ç®çä¸­é´è¿ç¨ï¼æ­¤å¤çè¿è¡ç¶æå¯ä»¥è°æ§ç¨åºçæµç¨åææ</li>
<li><strong>æ ¹æ®è¾å¥ååè¡ä¸º</strong>ï¼æä¾äºä¸å¤çäº¤äºçå¯è½ï¼å ä¸ºè¾å¥æ¯ä¸ç¡®å®çï¼åªæåéæè½æè¿°è¿ç§ä¸ç¡®å®æ§</li>
<li><strong>éèåå­ç»è</strong>ï¼å ä¸ºåéæ¬è´¨ä¸æ¯åå­ä¸­å­å¨æ°æ®çä½ç½®ä»£ç§°ï¼å¦åéè¦ç´æ¥æä½åå­å°åï¼å¯è¯»æ§éå¸¸å·®</li>
</ol>
<p>ä¸é¢ç»ä¸ä¸ªå³äºä»£æ°ä¸­çåéä¸ç¨åºä¸­çåéçå¯¹æ¯ï¼</p>
<table>
<thead>
<tr>
<th></th>
<th>ä»£æ°</th>
<th>ç¼ç¨</th>
<th>ç¸åç¹</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>åé</strong></td>
<td>è¡¨ç¤ºæªç¥æ°æå¯åçé</td>
<td>æ¬è´¨ä¸æ¯åå­ä¸­å­å¨æ°æ®çä½ç½®ä»£ç§°ï¼æèè¯´ä¸ä¸ªå®¹å¨çåå­</td>
<td>1. ä¸¤èé½æ¯"ç¬¦å·ä»£è¡¨å¼"<br>2. é½å¯ä»¥è¢«éæ°èµå¼<br>3. é½éµå¾ª"åå®ä¹åä½¿ç¨"çåå<br></td>
</tr>
</tbody>
</table>
<p>æä¸ä¸ªå¸¸è§çæ··æ·ç¹ï¼å°±æ¯ç¬¦å·=ï¼å¨æ°å­¦ä¸­ï¼=è¡¨ç¤ºçæ¯ä¸ç§ç­ä»·<strong>å³ç³»</strong>ï¼åªæ¯ä¸ç§é»è¾å³ç³»ãæ¯å¦<code>x=5</code>ï¼è¡¨ç¤ºçæ¯<code>xç­äº5</code>è¿æ ·ä¸ä¸ªå³ç³»æäºå®è¡¨è¿°ï¼èå¨ç¨åºä¸­ï¼è¡¨ç¤ºçæ¯ä¸ä¸ª<strong>å¨ä½</strong>ï¼å³èµå¼ï¼ä¹å¯ä»¥å½¢è±¡çè¡¨è¿°ä¸ºæä¸ä¸ªå¼æ¾å¥è¿ä¸ä¸ªå®¹å¨ä¸­ï¼å·ä½æ¥è¯´å°±æ¯ææ°å¼5æ¾å¥å°åä¸º<code>x</code>çå®¹å¨ä¸­ï¼è¿ä¸ª<code>x</code>ä¹ç§°ä¸ºåéã</p>
<p>ä½ä¸ºå¯¹æ¯ï¼ç°å¨æè¡¨è¾¾å¼<code>x=x+1</code>ï¼å¦æä»æ°å­¦çè§åº¦æ¥çï¼è¿ä¸ªç­ä»·å³ç³»æ¯ä¸æç«çï¼ä½æ¯ä»ç¨åºçè§åº¦æ¥çï¼å°±æ¯ååºå®¹å¨<code>x</code>çå¼ï¼å ä¸ååæ¾åå»çææã</p>
<p>å°ç»ä¸ä¸ï¼å¯ä»¥è®¤ä¸º<mark>åéå°±æ¯ä¸ç§å®¹å¨</mark>ï¼å½ç¶ä¹æå¶å®ç±»åçå®¹å¨ï¼ï¼æ¢ç¶æ¯å®¹å¨é£ä¹å°±æ¯<strong>å¯éå¤å©ç¨</strong>çï¼åæ¶ææè¯­è¨é½å¿é¡»æä¾<strong>å°æ°æ®å­å¨å¨åå­ä¸­å¹¶å¯éè¿åç§°å¼ç¨</strong>çæºå¶ï¼è¿æ¯è®¡ç®çåæï¼åé¢çåå®¹è¡¨è¿°ä¸­ï¼å®¹å¨å°±æ¯åéçææã</p>
<h4 id="æ è¯ç¬¦">æ è¯ç¬¦</h4>
<p>ä¸ä¸å°èä»ç»äºåéï¼ä¹æå°åéå°±æ¯å®¹å¨ï¼ä½è¿äºé½æ¯æ½è±¡çæ¦å¿µï¼ä¹å°±æ¯è¯´ï¼ç»ä½ ä¸äºçèµ·æ¥ä¸æ¨¡ä¸æ ·çå®¹å¨ï¼ç¶åæ¿ä¸ä¸ªå°çéæºæ¾è¿ä¸ä¸ªå®¹å¨ä¸­ï¼å¹¶æä¹±å®¹å¨çææ¾é¡ºåºï¼ä½ è¿è½æ¾å°å°çå¨åªä¸ªå®¹å¨ä¸­åï¼</p>
<p>å¾é¾å¯¹å§ï¼ä½æ¯å¦æç»æ¯ä¸ªå®¹å¨æ è¯ä¸ä¸ªå¯ä¸çåå­ï¼é£ä¹åªè¦è®°ä½å°çæ¾å¥åªä¸ªåå­æ è¯çå®¹å¨å°±å¯ä»¥äºï¼å ä¸ºæ­¤æ¶å®¹å¨æ¯å¯è¯å«çã</p>
<p>å®éä¸åªè¦æ è¯ç¬¦è½å¯ä¸ç¡®å®æä¸ªå®¹å¨ï¼å¹¶ä¸ä¼å³å¿æ è¯ç¬¦ç±ä»ä¹ç»æï¼ä½ç°å®æ¯ç¨åºçæ è¯ç¬¦éè¦éµå¾ªä¸äºè§èï¼æ¯å¦ä¸è½ä»¥æ°å­å¼å¤´ãä¸è½åå«ç¹æ®å­ç¬¦ç­ã</p>
<p>æ­¤å¤è¿æä¸ç±»ç¼ç¨è¯­è¨ç¬æç<code>é¢å®ä¹æ è¯ç¬¦</code>ï¼ä¹ç§°ä¸º<strong>å³é®å­</strong>ï¼è¿äºæ è¯ç¬¦æ¯ä¸å¯ä½¿ç¨çï¼æ¯å¦<code>python</code>ä¸­ç<code>input</code>ã<code>print</code>åç½®å½æ°åã</p>
<h4 id="æ°æ®å¼">æ°æ®/å¼</h4>
<p>æ¢ç¶æäº<strong>å®¹å¨(åé)</strong>ï¼é£ä¹æ»è¦å¾å®¹å¨éé¢æ¾å¥ä¸äºä¸è¥¿ï¼å¯¹äºç¨åºèè¨ï¼å°±æ¯æ°æ®ï¼ä¹å¯ä»¥ç§°ä¸º<code>å¼</code>ï¼è<mark>ææ°æ®æ¾å¥åéè¿ç§å®¹å¨çå¨ä½å°±æ¯èµå¼æä½</mark>ã</p>
<p>æ°æ®æå¾å¤ç§ç±»åï¼æ¯å¦æ¥å¸¸å¨<code>excel</code>ä¸­æææ¬ç±»åçæ°æ®ãææ°å¼ç±»åçæ°æ®ï¼è¿æä¸äºå¤åç±»åçæ°æ®ï¼è¿æ¯å ä¸ºæ°æ®æ¥æºäºå¤ç§å½¢å¼çæ´»å¨ä¸­ã</p>
<p>å¶ä¸­ææ¬ç±»åçæ°æ®å¯è½æ¯å¬å¸çåå·¥å§åãæ°å¼ç±»åçæ°æ®å¯è½æ¯åå·¥çèªèµãå¤åç±»åçæ°æ®å¯è½æ¯åå·¥å¶ä»ä¿¡æ¯çç»åã</p>
<p>å¨æ°å­¦ä¸­ï¼æ°å­ææ´æ°ãå°æ°ï¼å¤æ°ç­ç±»åï¼åæ ·å¨ç¨åºä¸­çæ°æ®ç±»åä¹æå¤ç§ï¼æ¯å¦æ°å¼ç±»å(æ´æ°ï¼æµ®ç¹æ°)ãå¸å°ç±»å(ç/å)åå­ç¬¦ä¸²ç±»åç­ã</p>
<p>ä¹æä»¥æè¿äºæ°æ®ç±»åï¼å°±æ¯è¦<strong>å®ä¹æ°æ®çæ§è´¨ä»¥åä¸åç±»åçå¤çæ¹å¼</strong>ï¼æ¢å¯ä»¥æ¯åç±»åä¹é´çè¿ç®ï¼æ¯å¦<code>3+2</code>æ¯ä¸¤ä¸ªæ´æ°ä¹é´çè¿ç®ï¼ä¹å¯ä»¥æ¯ä¸åç±»åä¹é´çè¿ç®ï¼æ¯å¦<code>3+2.5</code>ä¸­ä¸ä¸ªæ¯æ´æ°ï¼å¦ä¸ä¸ªæ¯å°æ°ï¼å®ä¹å®ä»¬ä¹é´çè¿ç®æ¹å¼ä¸ºï¼ææ´æ°è½¬æ¢ä¸ºå°æ°ä¹ååä¸å¦ä¸ä¸ªå°æ°è¿è¡è®¡ç®ã</p>
<h3 id="è¡¨è¾¾å¼ä¸è¿ç®">è¡¨è¾¾å¼ä¸è¿ç®</h3>
<blockquote>
<p>æ²¡æè¿ç®å°±æ æ³è®¡ç®</p>
</blockquote>
<p>ææè¯­è¨é½æ¯æ<strong>å°å¼éè¿è¿ç®ç¬¦ç»åææ°å¼</strong>ï¼èè¿ç§ç±<code>åé</code>ã<code>å¸¸é</code>å<code>è¿ç®ç¬¦</code>ç»åçå½¢å¼å°±æ¯è¡¨è¾¾å¼ï¼æ¯å¦<code>x + 5 * 3</code>ï¼åæ°å­¦ä¸­çå½¢å¼å¾åï¼å¹¶ä¸ä¸è¬æåµä¸è¿ç®ç¬¦çè¯­ä¹ä¹æ¯ç¸éçã</p>
<p>è¿æ ·çè¡¨è¾¾å¼ç§°ä¸º<strong>ç®æ¯è¡¨è¾¾å¼</strong>ï¼å¯ä»¥åå«åéåå¸¸éï¼ä¹å¯ä»¥éè¿å°æ¬å·æ¹åè¿ç®é¡ºåºï¼ä½æ¯ä¸åäºæ°å­¦ä¸­è¿æ ·çè¡¨è¾¾å¼åªè¡¨ç¤ºå³ç³»ï¼å¨ç¨åºä¸­ï¼è¿æ ·çè¡¨è¾¾å¼ä¼å®éè®¡ç®å¼ï¼ä¹å°±æ¯æä¸ä¸ªç®æ¯ç»æï¼å¹¶ä¸ä¹å·ä¸è½çç¥ã</p>
<p>æ¥ä¸æ¥æ¯<strong>æ¯è¾ä¸é»è¾è¿ç®</strong>ï¼æ¯å¦æ°å­¦ä¸­<code>x &gt; 5</code>ï¼è¡¨ç¤ºåéä¸æ°å¼çå³ç³»ï¼æ¯è¿æ ·ä¸ä¸ªäºå®éè¿°ï¼<code>xå¤§äº5</code>ï¼å¨ç¨åºä¸­ï¼è¿æ ·çè¡¨è¾¾å¼ç§°ä¸º<strong>å¸å°è¡¨è¾¾å¼</strong>ï¼ä¼äº§çä¸ä¸ªå¸å°å¼(ç/å)ã</p>
<p>è¦è®°ä½åªè¦æ¯å¼å°±å¯ä»¥èµå¼ç»åéï¼æ¯å¦<code>is_greater = x &gt; 5</code>ï¼é£ä¹å¦æx&gt;5ï¼ååé<code>is_greater</code>ä¿å­çç»æå°±ä¸ºä¸ä¸ªé»è¾çå¼ï¼å¨<code>python</code>ä¸­å°±æ¯<code>true</code>ï¼å¦åä¸ºä¸ä¸ªé»è¾åå¼<code>false</code>ï¼ä¸è¬å¸å°è¡¨è¾¾å¼ç¨äºæ¡ä»¶å¤æ­ï¼æ¯å¦<code>if</code>æ¡ä»¶å¤æ­ã</p>
<h3 id="æ§å¶ç»æ">æ§å¶ç»æ</h3>
<blockquote>
<p>æ§å¶æµå°±æ¯é»è¾çè¡¨è¾¾</p>
</blockquote>
<p>åºæ¬æ§å¶ç»ææä¸è¡¨æç¤ºï¼</p>
<table>
<thead>
<tr>
<th>åç´ </th>
<th>æ¬è´¨ä½ç¨</th>
<th>è¯´æ</th>
</tr>
</thead>
<tbody>
<tr>
<td>é¡ºåºæ§è¡</td>
<td>é»è®¤æ§è¡æ¹å¼</td>
<td>è¯­å¥æé¡ºåºä¾æ¬¡æ§è¡</td>
</tr>
<tr>
<td>æ¡ä»¶åæ¯</td>
<td>æ ¹æ®æ¡ä»¶éæ©è·¯å¾</td>
<td>å¿é¡»æ¯æ<code>if</code>æç­ä»·æºå¶</td>
</tr>
<tr>
<td>å¾ªç¯/è¿­ä»£</td>
<td>éå¤æ§è¡ä»£ç å</td>
<td>å¿é¡»æ¯æ<code>while</code>æç­ä»·æºå¶</td>
</tr>
<tr>
<td>è·³è½¬/è¿å</td>
<td>æ¹åæ§è¡ä½ç½®ï¼ä½ç°æç»´çè·³è·</td>
<td>å¦<code>return</code>ã<code>break</code></td>
</tr>
</tbody>
</table>
<p>å¶ä¸­é¡ºåºæ§è¡å¾ç¤ºå¦ä¸ï¼</p>
<div class="mermaid">graph TD
    A[å¼å§] --&gt; B[æ­¥éª¤1]
    B --&gt; C[æ­¥éª¤2]
    C --&gt; D[ç»æ]
</div><p>æç§è§å®å¥½çå·¥åºä¸æ­¥æ­¥é¡ºåºæ§è¡ï¼ä¸å®ææ­¥éª¤1ï¼å°±ä¸ä¼æ§è¡å°æ­¥éª¤2ï¼å°±æ¯å¦æ´å®æ¾¡ç©¿è¡£æï¼æ­£å¸¸çé¡ºåºåºè¯¥æ¯åç©¿åè¡£åç©¿å¤è¡£ï¼ä¹å°±æ¯æ­¥éª¤1æ¯ç©¿åè¡£ï¼æ­¥éª¤2æ¯ç©¿å¤è¡£ï¼æé¤ä¸ç©¿åè¡£çæåµï¼é£ä¹åºè¯¥æ²¡äººä¼åæ§è¡æ­¥éª¤2ç©¿å¤è¡£ï¼åæ§è¡æ­¥éª¤1ç©¿åè¡£å§ï¼ä¸ä¼å§ä¸ä¼å§ð²ð²ï¼</p>
<p>æ¡ä»¶åæ¯å¾ç¤ºå¦ä¸ï¼</p>
<div class="mermaid">graph TD
    Start([å¼å§]) --&gt; Condition{æ¡ä»¶å¤æ­}
    Condition --&gt;|True| ProcessA[æ§è¡æä½A]
    Condition --&gt;|False| ProcessB[æ§è¡æä½B]
    ProcessA --&gt; End([ç»æ])
    ProcessB --&gt; End
</div><p>ä¸ä¸ªé»è¾å¤æ­åªä¼äº§çä¸¤ä¸ªç»æï¼ä¸æ¯çå°±æ¯åï¼æ¯å¦<code>ä½ ä»å¤©ä¸ç­ä¹°èäºå</code>è¿ä¸ªé»è¾å¤æ­ï¼è¦ä¹ä¹°äºï¼è¦ä¹æ²¡ä¹°ï¼æä»¥å¯¹åºå°å¾ä¸ï¼åªä¼äº§çä¸¤æ¡æ¯è·¯ï¼å¦æä¹°èäºï¼é£ä¹å°±æ§è¡æä½Aï¼å¯ä»¥æ¯èªå·±åæé¥­ï¼å¦ææ²¡ä¹°èï¼é£ä¹æ§è¡æä½Bï¼å¯ä»¥æ¯ç¹å¤å</p>
<p>å¾ªç¯ç»æå¾ç¤ºå¦ä¸ï¼</p>
<div class="mermaid">graph TD
    Start([å¼å§]) --&gt; Init[åå§åè®¡æ°å¨]
    Init --&gt; Condition{å¤æ­å¾ªç¯æ¡ä»¶}
    
    subgraph å¾ªç¯ä½
        Process[æ§è¡å¾ªç¯æä½]
        Update[æ´æ°è®¡æ°å¨]
    end
    
    Condition --&gt;|æ»¡è¶³æ¡ä»¶| Process
    Process --&gt; Update
    Update --&gt; Condition
    Condition --&gt;|ä¸æ»¡è¶³æ¡ä»¶| End([ç»æ])
</div><p>å¾ªç¯ï¼å¯ä»¥çè§£ä¸ºå°±æ¯éå¤ï¼æ¯å¦ä½ è®¡åä¸ä¸ªé¿è¾¾1å¹´çæ©èµ·ä¹ æ¯å»æç®æ ï¼é£ä¹å¯¹åºå°å¾ä¸ï¼å¾ªç¯æ¡ä»¶å°±æ¯ä¸æ»¡365å¤©ï¼ä¹å°±æ¯è¿å¨ä¹ æ¯å»æè¿ç¨ä¸­ã</p>
<p>ç¶åå¾ªç¯ä½ä¸­å°±æ¯è¦æ§è¡æ©èµ·è¿ä¸ªå¨ä½å¹¶ä¸ç´¯è®¡æ©èµ·å¤©æ°ï¼ä»å¼å§æ©èµ·çç¬¬ä¸å¤©ç®èµ·ï¼åé¢æ¯å¤©æ©èµ·é½å¢å å¤©æ°ï¼ç´å°è¶è¿365å¤©ï¼è¿æ¶åå°±æ­åå®æ1å¹´çç®æ å¦</p>
<p>å¯¹äºè·³è½¬åè¿åè¿ç±»éé¡ºåºçæ§å¶æµï¼å³é®å¨äºæç ´é»è®¤çä»ä¸è³ä¸çæ§è¡é¡ºåºï¼ä½ä¸è¬ç¨å¨å¾ªç¯çç»ææ¡ä»¶åå½æ°ä¸ä¸æåæ¢ä¸­ï¼å¶ä»å°æ¹ä¸æ¨èä½¿ç¨ï¼æ¯å¦<code>goto</code>è¯­å¥ï¼å ä¸ºå±äºé»è¾è·³è·ï¼ä¸å©äºçè§£ã</p>
<p>å¶æ¬¡æ¯ææå¾çµå®å¤è¯­è¨é½å¿é¡»æ¯æ<strong>æ¡ä»¶å¤æ­åå¾ªç¯</strong>ï¼æç­ä»·çéå½ï¼ï¼è¿æ¯è¡¨è¾¾ä»»æç®æ³çå¿è¦æ¡ä»¶</p>
<h3 id="æ½è±¡æºå¶">æ½è±¡æºå¶</h3>
<blockquote>
<p>æ²¡ææ½è±¡å°±æ æ³ç®¡çå¤æåº¦</p>
</blockquote>
<p>ä»æ¬è´¨ä¸è®²ï¼æ½è±¡å°±æ¯<strong>ä¿¡æ¯éè</strong>ââå°å¤æçåé¨å®ç°å°è£èµ·æ¥ï¼åªå¯¹å¤æä¾å¿è¦çæä½æ¥å£ãè¿å°±åé©¾é©¶æ±½è½¦ï¼ä½ åªéè¦ç¥éæ²¹é¨ãå¹è½¦ãæ¹åçï¼èä¸éè¦äºè§£åå¨æºå¦ä½å·¥ä½ãåéç®±å¦ä½æ¢æ¡ãå¨ç¨åºä¸­ï¼åºç¡çæ½è±¡çå½¢å¼ä¸»è¦æï¼<code>å½æ°/è¿ç¨</code>ï¼<code>ç±»ä¸å¯¹è±¡</code>ã</p>
<h4 id="å½æ°è¿ç¨">å½æ°/è¿ç¨â</h4>
<p>ä»ä¹æ¯å½æ°å¢ï¼æ¬è´¨ä¸æ¯å°ä¸æ®µå®æç¹å®ä»»å¡çä»£ç å°è£æä¸ä¸ªç¬ç«çãå¯å¤ç¨çååï¼éè¿å®ä¹<code>è¾å¥</code>ï¼åæ°ï¼å<code>è¾åº</code>ï¼è¿åå¼ï¼æ¥éèåé¨å®ç°ç»èã</p>
<p>å®æ¯æåºç¡ãææ ¸å¿çç¼ç¨æ½è±¡æºå¶ãéè¿è¿ç§æ¹å¼æä»¬å¯ä»¥å°å¤æç³»ç»åè§£ä¸ºæäºçè§£åç®¡ççå°æ¨¡åï¼ææå®ç¨è¯­è¨é½æä¾<strong>å°ä»£ç ç»ç»æå¯å¤ç¨åå</strong>çæºå¶ï¼å¦åæ æ³ç¼åå¤§åç¨åºã</p>
<p>å½¢è±¡ççè§£å½æ°ï¼å¯ä»¥è®¤ä¸ºå½æ°å°±æ¯ä¸å°æºå¨ï¼æé¤é¢å¤çæ¹é ä¹å¤ï¼æ¯å°æºå¨é½æåèªçåè½ï¼è¿æ¯å¨æºå¨è¯çä¹æ¥èµ·å°±åºå®ä¸æ¥äºï¼æ¯å¦å¸å°å¨ï¼é¡¾åæä¹ï¼å°±æ¯å¸å¥ç°å°çã</p>
<p>ä¹å°±æ¯è¯´å¸å°å¨çè¾å¥æ¯ç°å°ï¼ç°å°ç»è¿å¸å°å¨ä¹åä¼æä¸ä¸ªè¾åºï¼ä¸å¢èéçç°å°ï¼è¿æ¯æºå¨ççæ³å·¥ä½ç¶æï¼é£å¦æè¾å¥çº¸å·¾å¢ï¼å¥½åä¹åå¼ºè½æ¥æ¶å§ï¼å¯è½æçæºå¨å¤ççä¸æ¯å¾å¥½å§ï¼ä½å¦æè¾å¥ç å¤´å¢ï¼åºè¯¥æ²¡æåªä¸ªå¸å°å¨è½å¹²è¿ä¸ªäºæå§ã</p>
<p>æä»¥ä¸å°æºå¨çè¾å¥æ¯æè§å®çï¼è½ç¶å®çè¾å¥æ¯ä¸åæºå¨èªèº«æ§å¶ï¼èæ¥æºäºå¤é¨ï¼ä½æ¯å¦ææ³è¦æ­£å¸¸ä½¿ç¨æºå¨çåè½ï¼é£ä¹å°±ä¸è½ç±çèªå·±çæ§å­ï¼æ³è¾å¥ä»ä¹å°±è¾å¥ä»ä¹</p>
<p>åæ ·çå¯¹äºè¾åºèè¨ï¼è¿æ¯æºå¨æ¬èº«åºå®çé¨åï¼å¸å°å¨ä¸è½æç°å°åæé»éï¼åæ¶å¯¹äºè¾å¥æ¯ç å¤´æ¶ï¼å¸å°å¨ä¹ä¸ç¥éè¯¥è¾åºä»ä¹ï¼å®ç´æ¥ç½¢å·¥ä¸å¹²äºã</p>
<p>æ»ç»ä¸æ¥ï¼å½æ°çæ ¸å¿ä½ç¨å¦ä¸æç¤ºï¼</p>
<ol>
<li>ä»£ç å¤ç¨ï¼ä¸æ¬¡å®ä¹ï¼å¤æ¬¡ä½¿ç¨</li>
<li>å¯ç»´æ¤æ§ï¼ä¿®æ¹ä¸å¤å³å¯</li>
<li>å¯è¯»æ§ï¼å½æ°åè¡¨è¾¾æå¾</li>
<li>éè¯¯ææ¥ï¼éè¯¯éä¸­å¨å½æ°å</li>
</ol>
<p>é£ä¹è¯¥æä¹ä½¿ç¨å½æ°å¢ï¼é¦åå°±æ¯å®ä¹çé®é¢ï¼ä¹å°±æ¯ç¡®å®<strong>å½æ°çä½ç¨</strong>ã<strong>å½æ°çè¾å¥</strong>ä»¥å<strong>å½æ°çè¾åº</strong>ï¼å³<code>å½æ°å</code>ã<code>åæ°</code>ä»¥å<code>è¿åå¼</code>ãä½ä¸ºå¯¹æ¯ï¼å¯ä»¥åæ°å­¦ä¸­çå½æ°å®ä¹è¿è¡æ¯è¾ï¼</p>
<table>
<thead>
<tr>
<th>æ°å­¦æç»´</th>
<th>ç¼ç¨æç»´</th>
</tr>
</thead>
<tbody>
<tr>
<td>å½æ°æ¯ä¸ç§<strong>æ å°å³ç³»</strong>ï¼  <br>ä»å®ä¹åæ å°å°å¼å</td>
<td>å½æ°æ¯ä¸ä¸ª<strong>å¯æ§è¡è¿ç¨</strong>ï¼  <br>ä¼å®éè®¡ç®åºç»æ</td>
</tr>
<tr>
<td>å½æ°çè¾å¥æ¥èªäºå®ä¹å</td>
<td>å½æ°çåæ°æç±»åçº¦æ</td>
</tr>
<tr>
<td>å½æ°çè¾åºæ¥èªäºå¼å</td>
<td>å½æ°çè¿åå¼ä¹æç±»åçº¦æ</td>
</tr>
</tbody>
</table>
<p>éè¦æ³¨æçæ¯ï¼éè¦åºåå½æ°çå®ä¹ä¸è°ç¨ï¼ä¹å°±æ¯åæå®ä¹æå¯ä»¥è°ç¨ï¼æ¯å¦åæå½æ°<code>f(x)=2x</code>ï¼æä¼æ<code>f(2)=2*x=4</code>è¿ä¸ªè®¡ç®è¿ç¨ã</p>
<h3 id="è¾å¥è¾åºæºå¶">è¾å¥è¾åºæºå¶</h3>
<blockquote>
<p>æ²¡æI/Oçç¨åºæ æ³ä¸å¤çäº¤äº</p>
</blockquote>
<p>æ¥å¸¸ä¸­ï¼æä»¬è½æç¥å°çè¾å¥è¾åºæºå¶å°±æ¯å¨ä½¿ç¨ææºçè¿ç¨ä¸­ï¼æ¯å¦å·ææºæ¶ï¼æææ»å¨å±å¹ï¼ä¼åæ¢å°ä¸ä¸ä¸ªè§é¢ã</p>
<p>æ­¤æ¶è¾å¥å°±æ¯æææ»å¨è¿ä¸ªå¨ä½ï¼è¾åºå°±æ¯ææºå±å¹ååæ¢è§é¢çå¨ä½ï¼è¿å°±æ¯ä¸ç§ä¸ç¨æ·äº¤äºçæ¹å¼ï¼å¯ä»¥å¾ç´è§çè¢«ç¨æ·æç¥å°ã</p>
<p>ææå®ç¨è¯­è¨é½æä¾<strong>ä¸å¤é¨ä¸çäº¤äº</strong>çéå¾ï¼å¦åç¨åºçä½ç¨å°±è¢«éå¶å¨è®¡ç®æºåé¨ã</p>
<p>é¤äºè¿ç§æ¾å¼çäº¤äºæ¹å¼ï¼è¿æå°±æ¯éèå¨ç³»ç»åé¨åççè¾å¥è¾åºè¿ç¨ï¼è¿éæ¶åå°å¤å±çº§çè¿ç¨ï¼å¯¹äºç¨æ·èè¨ï¼è¾å¥åè¾åºé½å¨æå¤å±ã</p>
<p>è¿ä¸ªè¿ç¨å°±åé£åå å·¥è¿ç¨ä¸æ ·ï¼æ¯å¦æ°´æç½å¤´çå å·¥è¿ç¨ï¼å¦ä¸å¾æç¤ºï¼</p>
<div class="mermaid">graph TD
    %% è¾å¥æº
    æ°´æåæ[ð æ°´æåæ] --&gt; åæåå¤
    
    %% ç¬¬ä¸å±ï¼åæåå¤
    subgraph ç¬¬ä¸å±_åæåå¤
        åæåå¤[åæé¢å¤ç&lt;br&gt;è¾å¥: æ°´æåæ&lt;br&gt;è¾åº: æ´åæå] --&gt; è£ç½[è£ç½ä¸ç³æ°´çæ³¨&lt;br&gt;è¾å¥: æ´åæå + ç³æ°´&lt;br&gt;è¾åº: åæåç½å¤´]
    end
    
    %% ç¬¬äºå±ï¼å¯å°æè
    subgraph ç¬¬äºå±_å¯å°æè
        è£ç½ --&gt; å¯å°æè[å¯å°ä¸æè&lt;br&gt;è¾å¥: åæåç½å¤´&lt;br&gt;è¾åº: æèç½å¤´]
    end
    
    %% ç¬¬ä¸å±ï¼æåå¤ç
    subgraph ç¬¬ä¸å±_æåå¤ç
        å¯å°æè --&gt; å·å´åè£[å·å´ä¸åè£&lt;br&gt;è¾å¥: æèç½å¤´&lt;br&gt;è¾åº: åè£æå]
    end
    
    %% æç»è¾åº
    å·å´åè£ --&gt; æå[ð æ´æç½å¤´æå]
    
    %% æ ·å¼è®¾ç½®
    style ç¬¬ä¸å±_åæåå¤ fill:#fff3e0,stroke:#ef6c00,stroke-width:2px
    style ç¬¬äºå±_å¯å°æè fill:#f3e5f5,stroke:#8e24aa,stroke-width:2px
    style ç¬¬ä¸å±_æåå¤ç fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px
    style æ°´æåæ fill:#ffccbc,stroke:#d84315,stroke-width:2px
    style æå fill:#c8e6c9,stroke:#388e3c,stroke-width:3px
</div><p>è¾å¥è¾åºå³ç³»æ æ³¨è§åå¦ä¸æç¤ºï¼</p>
<ul>
<li><strong>è¾å¥</strong>ï¼å½åå·¥åºæ¥æ¶çç©æ/åæå</li>
<li><strong>è¾åº</strong>ï¼å½åå·¥åºå¤çåäº§ççç©æ/åæå</li>
<li>æ¯ä¸ªå·¥åºæ¡åé½æç¡®æ æ³¨äºè¾å¥åè¾åºåå®¹</li>
<li>ç®­å¤´æ¹åè¡¨ç¤ºç©ææµåï¼å³<strong>ä¸ä¸å·¥åºçè¾åºæ¯ä¸ä¸å·¥åºçè¾å¥</strong></li>
</ul>
<p>å¯¹æ¯å°appçç»ééªè¯è¿ç¨ä¸­ï¼ç¨æ·è¾å¥å¯ç -&gt;appåé¨åéªè¯-&gt;è¿åéªè¯ç»æï¼å¯¹äºç¨æ·èè¨åé¨æä¹åéªè¯æ¯ä¸éè¦å³å¿çï¼åªè¦å¯ç æ­£ç¡®å°±åºè¯¥ç»å½è¿è´¦æ·ï¼å¯ç éè¯¯å°±åºè¯¥æ æ³è¿å¥è´¦æ·ã</p>
<p>èå¯¹äºappèè¨ï¼å®ä¸ä¼ç´æ¥æ¥æ¶å°ç¨æ·çè¾å¥ï¼ç¨æ·çè¾å¥ç´æ¥ç»å°äºé®çï¼è¿ä¸­é´è¿ææä½ç³»ç»çå·¥ä½ï¼appåªæ¯æ¥æ¶äºæä¸è¿ç¨çè¾åºä½ä¸ºè¾å¥ã</p>
<p>åæ ·å¯¹äºéªè¯ç»æèè¨ï¼ç¨æ·è½çå°çåªæå±å¹ï¼ä½æ¯å±å¹ç»ä¸ä¼åéªè¯å¯ç çäºæï¼å®éä¸appè¾åºçéªè¯ç»æä¹ä¸æ¯ç´æ¥ç»å°å±å¹ä½ä¸ºè¾å¥çï¼è¿ä¸ªéªè¯ç»æä¹è¦ç»è¿æä½ç³»ç»çåºå±æä½ï¼è¾åºç»å±å¹ï¼ç¶åå±å¹åè¾åºç»ç¨æ·æ¾ç¤ºç»æã</p>
<p>å¨å­¦ä¹ ç¼ç¨æ¶ï¼é½ä¼æ³è¦çå°åé¦çç»æï¼ä¸ä¸ªæ®éçåæ³æ¯æç»ææå¶ä»ä¿¡æ¯è¾åºå°å±å¹ä¸ï¼æ¯å¦<code>python</code>ç<code>print</code>å½æ°ï¼å°±å¯ä»¥è¾åºä¿¡æ¯å°å±å¹ï¼æ¯å¦<code>print("è¯»åæä»¶å¤±è´¥")</code>è¿ä¸è¯­å¥å°±è¡¨ç¤ºç¨åºæ³è¦è¯»åæä¸ªæä»¶ï¼ä½æ¯è¯»åå¤±è´¥äºã</p>
<p>é£ä¹æ¥ä¸æ¥å¯ä»¥å°±ä¸ºå¥ä¼è¯»åå¤±è´¥è¿ä¸ªé®é¢ï¼æéå¯¹æ§çè°è¯ä»£ç äºï¼è¿ç§ä¿¡æ¯å°±æ¯è°è¯ä¿¡æ¯ãèè¿ä¸ª<code>print</code>å½æ°å¶å®å¹¶ä¸è½ç´æ¥é©±å¨å±å¹ï¼å®åªæ¯è§¦åäºé©±å¨å±å¹çå¼å³ï¼ç»äºä¸ä¸å±çº§ä¸ä¸ªè¾å¥ï¼ä¹å°±æ¯åªä¸ªè°è¯ä¿¡æ¯ææ¬ï¼æ´ä¸ªæµç¨å°±åä¸é¢ä»ç»çæ°´æç½å¤´å å·¥è¿ç¨ä¸æ ·ï¼æ¶åå°åºå±I/Oæä½ã</p>
<h2 id="æ»ç»">æ»ç»</h2>
<p>ç»è¿ä»¥ä¸åå®¹çä»ç»ï¼æä»¬ç¥éå¨å­¦ä¹ æ°è¯­è¨æ¶ï¼å°±åºè¯¥åææ¡ä½å¦ä¸éç¹ï¼</p>
<ol>
<li>å®å¦ä½è¡¨ç¤ºæ°æ®ï¼åéãå¼ï¼ï¼å¦ä½å£°æåéåèµå¼ï¼æåªäºæ°æ®ç±»å</li>
<li>å®å¦ä½è¿è¡è®¡ç®ï¼è¿ç®ç¬¦ãè¡¨è¾¾å¼ï¼ï¼æåªäºåºæ¬è¿ç®ç¬¦ï¼ç®æ¯ãæ¯è¾ãé»è¾ï¼</li>
<li>å®å¦ä½æ§å¶æµç¨ï¼æ¡ä»¶ãå¾ªç¯ï¼ï¼å¦ä½åæ¡ä»¶è¯­å¥ï¼ifæç­ä»·å½¢å¼ï¼ï¼å¦ä½åå¾ªç¯ï¼while/foræç­ä»·å½¢å¼ï¼</li>
<li>å®å¦ä½å°è£ä»£ç ï¼å½æ°ãä½ç¨åï¼ï¼å¦ä½å®ä¹åè°ç¨å½æ°</li>
<li>å®å¦ä½ä¸å¤çäº¤äºï¼I/Oï¼ï¼å¦ä½è¯»åè¾å¥åè¾åºç»æ</li>
</ol>
<p>ä¸æ¦å¯¹ç¼ç¨è¯­è¨çè®¤ç¥æ¡æ¶å½¢æï¼åºæ¬å°±ææ¡äºä½¿ç¨è¿ä¸ªç¼ç¨è¯­è¨çè½åï¼å¤çä¸äºç®åé®é¢æ¯å®å¨è¶³å¤çã</p>
<p>å¨çè§£è¯­è¨å±æ§æ¶ï¼åºå³æ³¨<strong>åè½ç­ä»·æ§</strong>èé<strong>è¯­æ³ç¸ä¼¼æ§</strong>ãä¾å¦ï¼Pythonçç¼©è¿åC++çè±æ¬å·é½æ¯è¡¨è¾¾ä»£ç åçæ¹å¼ï¼æ¬è´¨ç¸åã</p>
<p>è¿ç§"<mark>éè¿è¯­æ³çè¯­ä¹</mark>"çè§è§ï¼æè½çæ­£ææ¡ç¼ç¨è¯­è¨çå±æ§è§å¾ã</p>
<p>å æ²¹å§ï¼æ¯ä¸ªåå­¦ç¼ç¨çæåã</p>
<p>å¾®ä¿¡å¬ä¼å·ï¼è½¯è¶´è¶´çå·¥ç¨å¸<br>
<img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1358160/202602/1358160-20260204063527540-1708500331.png" class="lazyload"></p>
<p><a href="https://mp.weixin.qq.com/s/cTPVXA_0kT9m0Rn_288HC" target="_blank" rel="noopener nofollow">åæé¾æ¥</a></p>


</div>
<div id="MySignature" role="contentinfo">
    <p>æ¬ææ¥èªåå®¢å­ï¼ä½èï¼<a href="https://www.cnblogs.com/pie-o/" target="_blank">pie_thn</a>ï¼è½¬è½½è¯·æ³¨æåæé¾æ¥ï¼<a href="https://www.cnblogs.com/pie-o/p/19571670" target="_blank">https://www.cnblogs.com/pie-o/p/19571670</a></p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-04 09:45">2026-02-04 09:45</span>&nbsp;
<a href="https://www.cnblogs.com/pie-o">pie_thn</a>&nbsp;
éè¯»(<span id="post_view_count">16</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19571670);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19571670', targetLink: 'https://www.cnblogs.com/pie-o/p/19571670', title: 'æå¾ç¼ç¨è¯­è¨çéç¨ç»æï¼éä¾¿åªä¸ªè¯­è¨é½æ¯ææ¿ææ' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ HagiCode å¯å¨é¡µè®¾è®¡ï¼React 19 åºç¨ä¸­å¡«è¡¥ Hydration ç©ºç½æçæè´ä½éª ]]></title>
    <link>https://www.cnblogs.com/newbe36524/p/19572516</link>
    <guid>cbd4af06059d768d88ff7473a5948e30</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/newbe36524/p/19572516" title="åå¸äº 2026-02-04 09:23">
    <span role="heading" aria-level="2">HagiCode å¯å¨é¡µè®¾è®¡ï¼React 19 åºç¨ä¸­å¡«è¡¥ Hydration ç©ºç½æçæè´ä½éª</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="ä¸º-hagicode-è®¾è®¡-12-ç§æè´çå¯å¨ä½éªä»æç®å°èµåæå">ä¸º HagiCode è®¾è®¡ 12 ç§æè´çå¯å¨ä½éªï¼ä»æç®å°èµåæå</h1>
<blockquote>
<p>å¨ React 19 åºç¨ä¸è½½å Hydration çç­æé´éï¼æ¯çç»ç¨æ·æç¥åçä¸ªæ§çé»éçªå£ãæ¬æåäº«äºæä»¬å¨ HagiCode é¡¹ç®ä¸­ï¼åºäº HTML/CSS/JS æå»ºçä¸å¥å®æ´çå¯å¨é£æ ¼ç³»ç»ã</p>
</blockquote>

<h2 id="èæ¯">èæ¯</h2>
<p>HagiCode ä½ä¸ºä¸ä¸ªåºäº ASP.NET Core 10 å React 19 (Vite) çç°ä»£ååºç¨ï¼éç¨äºååç«¯åç¦»é¨ç½²çæ¶æãåç«¯äº§ç©è¢«æåæ¾ç½®äºåç«¯ç <code>wwwroot/</code> ç®å½ä¸ç± ASP.NET Core æç®¡ã</p>
<p>ç¶èï¼è¿ç§æ¶æå¸¦æ¥äºä¸ä¸ªç»å¸çç¨æ·ä½éªçç¹ï¼å½ç¨æ·è®¿é®ç½é¡µæ¶ï¼æµè§å¨éè¦åå è½½ HTMLï¼åä¸è½½å·¨å¤§ç JS Bundleï¼æåç± React æ§è¡ Hydrationï¼æ³¨æ°´ï¼ãå¨è¿å ç¾æ¯«ç§å°æ°ç§ç"çç©ºæ"éï¼ç¨æ·é¢å¯¹çæ¯ä¸çç©ºç½ï¼æèæ¯ä¸ä¸ªæ¯«æ çæ°çéæé¡µé¢ã</p>
<p>ä¸ºäºå¡«è¡¥è¿æ®µé´éï¼å¹¶æ³¨å¥ HagiCode çåçä¸ªæ§ï¼æä»¬éè¦è®¾è®¡ä¸å¥å®å¨åºäº <code>index.html</code> åèä»£ç çå¯å¨é£æ ¼ç³»ç»ã</p>
<h2 id="å³äº-hagicode">å³äº HagiCode</h2>
<p>æ¬æåäº«çå¯å¨é¡µè®¾è®¡æ¹æ¡æ¥èªæä»¬å¨ <a href="https://github.com/HagiCode-org/site" target="_blank" rel="noopener nofollow">HagiCode</a> é¡¹ç®ä¸­çå®è·µç»éªãä½ä¸ºä¸ä¸ª AI ä»£ç å©æï¼HagiCode ä¸ä»å³æ³¨ä»£ç çæçæçï¼ä¹åæ ·éè§å¼åèçè§è§ä½éªãè¿å¥å¯å¨ç³»ç»æ­£æ¯æä»¬å¨è¿½æ±æè´åç«¯æ§è½è¿ç¨ä¸­çäº§ç©ã</p>
<h2 id="æ ¸å¿ææä¸æ¶æè®¾è®¡">æ ¸å¿ææä¸æ¶æè®¾è®¡</h2>
<p>å¨å¨æè®¾è®¡ä¹åï¼æä»¬å¿é¡»åæç¡®ææ¯çº¦æãæ¢ç¶è¦å¨ <code>index.html</code> ä¸­åèå®ç°ï¼æå³çæä»¬ä¸è½å è½½ä»»ä½å¤é¨ CSS æ JS æä»¶ï¼é¤äº React æ¬èº«ç Bundleï¼ã</p>
<h3 id="ææ¯çº¦æåæ">ææ¯çº¦æåæ</h3>
<ol>
<li><strong>é¶ä¾èµåå</strong>ï¼æææ ·å¼å¿é¡»åå¨ <code>&lt;style&gt;</code> æ ç­¾åï¼é»è¾åå¨ <code>&lt;script&gt;</code> æ ç­¾åã</li>
<li><strong>é²å¾¡å¼ CSS</strong>ï¼ä¸ºäºé²æ­¢ React åºç¨æè½½åï¼å¨å±æ ·å¼æ±¡æå¯å¨é¡µï¼æä»¬å³å®ä½¿ç¨é«ä¼åçº§ç ID åç¼ï¼å¦ <code>#boot-screen</code>ï¼åè£¹ææå¯å¨æ ·å¼ã</li>
<li><strong>æ§è½ä¼å</strong>ï¼å¨ç»å°½éä½¿ç¨ CSS <code>transform</code> å <code>opacity</code>ï¼é¿åè§¦åéæï¼ç¡®ä¿ä¸é»å¡ä¸»çº¿ç¨ã</li>
<li><strong>è§è§ä¸è´æ§</strong>ï¼é¢è²ãå­ä½å¿é¡»ä¸ HagiCode ç Tailwind éç½®ä¿æä¸è´ã</li>
</ol>
<h3 id="æ¶ææ¨¡å¼shell--injector">æ¶ææ¨¡å¼ï¼Shell &amp; Injector</h3>
<p>æä»¬éç¨äºä¸ç§<strong>åä½æ¨¡å¼</strong>ãæ ¸å¿é»è¾å°è£å¨ä¸ä¸ªç«å³æ§è¡å½æ°ï¼IIFEï¼ä¸­ï¼å·ä½çæ¸²æé»è¾ä½ä¸ºéç½®é¡¹æ³¨å¥ãè¿æ ·æä»¬å°±å¯ä»¥éè¿ç®åçéç½®åæ¢ä¸åçé£æ ¼ï¼èä¸éè¦éå¤ç¼å DOM æä½é»è¾ã</p>
<p>ä»¥ä¸æ¯æ ¸å¿çæ¶æä»£ç ï¼</p>
<pre><code class="language-html">&lt;!-- åèäº index.html --&gt;
&lt;div id="boot-root"&gt;&lt;/div&gt;

&lt;script&gt;
(function() {
  const BootSequence = {
    config: {
      theme: 'terminal', // å¯éç½®ä¸º 'minimal', 'skeleton', 'code-rain' ç­
      color: '#3b82f6'   // åçè²
    },
    
    // æ ¸å¿çå½å¨æ
    init() {
      this.render();
      this.listenForMount();
    },

    // æ¸²æå½åéå®çé£æ ¼
    render() {
      const root = document.getElementById('boot-root');
      if (this.variants[this.config.theme]) {
        root.innerHTML = this.variants[this.config.theme].render();
      }
    },

    // çå¬ React æè½½æåï¼ä¼ééåº
    listenForMount() {
      window.addEventListener('hagicode:ready', () =&gt; {
        const screen = document.getElementById('boot-root');
        // åæ·¡åºï¼åç§»é¤ DOMï¼é¿åéªç
        screen.style.opacity = '0';
        screen.style.transition = 'opacity 0.3s ease';
        setTimeout(() =&gt; screen.remove(), 300);
      });
    },

    // 12ç§é£æ ¼çå®ç°é»è¾éä¸­å¨è¿é
    variants: {
      // ...å·ä½å®ç°è§ä¸æ
    }
  };

  BootSequence.init();
})();
&lt;/script&gt;
</code></pre>
<h2 id="12-ç§å¯å¨é£æ ¼è®¾è®¡æ¸å">12 ç§å¯å¨é£æ ¼è®¾è®¡æ¸å</h2>
<p>æä»¬å°è¿ 12 ç§é£æ ¼åä¸ºäºå­å¤§ç±»ï¼ä»¥æ»¡è¶³ä¸ååºæ¯åå®¡ç¾éæ±ã</p>
<h3 id="a-æç®ä¸»ä¹">A. æç®ä¸»ä¹</h3>
<blockquote>
<p>"å°å³æ¯å¤"ãå¯¹äºè¿½æ±æè´å è½½éåº¦çåºæ¯ï¼æä»¬æä¾äºæè½»éçæ¹æ¡ã</p>
</blockquote>
<h4 id="1-minimalist-dot-æç®å¼å¸">1. Minimalist Dot (æç®å¼å¸)</h4>
<p>å±å¹ä¸­å¿åªæä¸ä¸ªç®åçåç¹ï¼éåå¼å¸å¨ç»ã</p>
<ul>
<li><strong>å®ç°</strong>ï¼CSS <code>@keyframes</code> æ§å¶scaleåopacityã</li>
<li><strong>éç¨</strong>ï¼ä»»ä½éè¦ä¿æé¡µé¢ç»å¯¹å¹²åçåºåã</li>
</ul>
<h4 id="2-brand-reveal-åçæ­ç¤º">2. Brand Reveal (åçæ­ç¤º)</h4>
<p>éè¿ SVG <code>stroke-dasharray</code> å¨ç»ï¼æ¨¡ææç»è¬ç»å¶åº HagiCode ç Logo çº¿æ¡ï¼éåæ·¡å¥æå­ã</p>
<ul>
<li><strong>æå·§</strong>ï¼ä½¿ç¨ SVG è·¯å¾å¨ç»ï¼æå·è´¨æã</li>
</ul>
<h3 id="b-éª¨æ¶å±ææ">B. éª¨æ¶å±ææ</h3>
<blockquote>
<p>"æ¬ºéªç¼ççèºæ¯"ãéè¿æ¨¡æçå® UI å¸å±ï¼è®©ç¨æ·æè§é¡µé¢å·²ç»å è½½äºä¸åã</p>
</blockquote>
<h4 id="3-sidebar-chat-skeleton-ä¾§è¾¹æ éª¨æ¶å±">3. Sidebar Chat Skeleton (ä¾§è¾¹æ éª¨æ¶å±)</h4>
<p>è¿å¯è½æ¯æå®ç¨çä¸ç§ãæä»¬æå¨ç¨ HTML æå»ºäºä¸ React ç»ä»¶ <code>Sidebar</code> å <code>ChatInput</code> ä¸æ¨¡ä¸æ ·çå¸å±ï¼å¹¶è¦çç°è²æ¡çº¹å¨ç»ã</p>
<ul>
<li><strong>ä»·å¼</strong>ï¼å½ React hydrate å®ææ¶ï¼éª¨æ¶å±ç¬é´åæçå®ç»ä»¶ï¼ç¨æ·å ä¹æè§ä¸å°åæ¢ã</li>
</ul>
<h4 id="4-card-stack-skeleton-å¡çå å ">4. Card Stack Skeleton (å¡çå å )</h4>
<p>æ¨¡æææ¡å¡çå è½½æ¶çå å å¨æï¼ä½¿ç¨ 3D åæ¢è®©å¡çå¾®å¾®æµ®å¨ã</p>
<h3 id="c-æ½è±¡ä¸èºæ¯">C. æ½è±¡ä¸èºæ¯</h3>
<blockquote>
<p>å±ç¤º HagiCode çæå®¢åºå ã</p>
</blockquote>
<h4 id="5-geometric-morph-å ä½åå½¢">5. Geometric Morph (å ä½åå½¢)</h4>
<p>å¨å±å¹ä¸­å¿æ¸²æä¸ä¸ªå ä½ä½ï¼æ­£æ¹å½¢ï¼ï¼å®ä¼éçæ¶é´å¹³æ»å°åæ¢ä¸ºåå½¢ãä¸è§å½¢ï¼æååæ Logoã</p>
<ul>
<li><strong>ææ¯</strong>ï¼CSS <code>border-radius</code> çå¹³æ»è¿æ¸¡ã</li>
</ul>
<h4 id="6-code-rain-ä»£ç é¨">6. Code Rain (ä»£ç é¨)</h4>
<p>åãé»å®¢å¸å½ãè´æ¬ãä½¿ç¨ JetBrains Mono å­ä½ï¼å¨èæ¯ä¸­è½ä¸æ·¡æ·¡çå­ç¬¦æµã</p>
<ul>
<li><strong>æ³¨æ</strong>ï¼ä¸ºäºæ§è½ï¼å­ç¬¦æµå¿é¡»éå¶å¨è¾å°çåºåæéä½å·æ°é¢çã</li>
</ul>
<h4 id="7-neon-pulse-éè¹èå²">7. Neon Pulse (éè¹èå²)</h4>
<p>èµåæåé£æ ¼çåååç¯ï¼å©ç¨ <code>box-shadow</code> çå¤éå å äº§çå¼ºççååæã</p>
<h3 id="d-åçä¸ä¸»é¢">D. åçä¸ä¸»é¢</h3>
<blockquote>
<p>è®©ç³»ç»"æ´»"èµ·æ¥ã</p>
</blockquote>
<h4 id="8-seasonal-theme-èæ¥ä¸»é¢">8. Seasonal Theme (èæ¥ä¸»é¢)</h4>
<p>è¿æ¯ä¸ä¸ªå¨æå è½½å¨ãæ ¹æ®å½åæ¥æå¤æ­èæ¥ï¼å¦æ¥èãå£è¯èï¼ï¼å è½½å¯¹åºç SVG å¨ç»ã</p>
<ul>
<li><strong>ä¾å­</strong>ï¼æ¥èæ¶ï¼å±å¹ä¸æ¹ä¼æçº¢ç¯ç¬¼è½»è½»æå¨ã</li>
</ul>
<h4 id="9-gradient-flow-æ¸åæµ">9. Gradient Flow (æ¸åæµ)</h4>
<p>èæ¯ä½¿ç¨ HagiCode åçè²çæµä½æ¸åï¼éå <code>background-size</code> å <code>background-position</code> çå¨ç»ï¼è¥é åºæåè¬çæµå¨æã</p>
<h3 id="e-ææ¯æ">E. ææ¯æ</h3>
<blockquote>
<p>åå¼åèè´æ¬ã</p>
</blockquote>
<h4 id="10-terminal-boot-ç»ç«¯å¯å¨">10. Terminal Boot (ç»ç«¯å¯å¨)</h4>
<p>æ¨¡ææ§å¶å°è¾åºãä¸è¡è¡ä»£ç å¿«éæ»å¨ï¼</p>
<pre><code class="language-text">&gt; Initializing HagiCode Core...
&gt; Loading models...
&gt; Connecting to neural network...
</code></pre>
<p>è¿ä¼è®©æ¯ä¸ä¸ªå¼åèé½æå°äº²åã</p>
<h4 id="11-progress-bar-æç®è¿åº¦æ¡">11. Progress Bar (æç®è¿åº¦æ¡)</h4>
<p>å±å¹é¡¶é¨ä¸æ¡ç»ç»çè¿åº¦æ¡ï¼å³ä¾§æ¾ç¤ºç¾åæ¯ãè½ç¶æä»¬æ æ³è·åçå®çä¸è½½è¿åº¦ï¼ä½å¯ä»¥ç¨ä¸ä¸ªå®æ¶å¨æ¨¡æåºä¸ä¸ª"å¯ä¿¡"çå è½½è¿ç¨ï¼å 80% å¿«éï¼å 20% åéï¼ã</p>
<h3 id="f-åæ">F. åæ</h3>
<h4 id="12-pixel-assembly-åç´ ç»è£">12. Pixel Assembly (åç´ ç»è£)</h4>
<p>è¿æ¯ä¸ä¸ªå¾æè¶£çåæãå±å¹ä¸æ£è½çä¸äºæ¹åï¼å®ä»¬æ±èå°ä¸­å¿ï¼éæ¸æ¼ååº HagiCode ç Logo å¾æ ãè±¡å¾çä»£ç çæå»ºè¿ç¨ã</p>
<h2 id="æä½³å®è·µä¸è¸©åæ»ç»">æä½³å®è·µä¸è¸©åæ»ç»</h2>
<p>å¨ HagiCode çå®éå¼åä¸­ï¼æä»¬æ»ç»äºä¸äºè³å³éè¦çå®è·µç»èã</p>
<h3 id="1-é²å¾¡å¼-css-æ¯å¿é¡»ç">1. é²å¾¡å¼ CSS æ¯å¿é¡»ç</h3>
<p>åä¸å«å·æä¸ååç¼ãæ¾ç»æä¸æ¬¡ï¼æä»¬æ²¡æç»å¯å¨é¡µæ ·å¼å  ID éå¶ï¼å¯¼è´ React æè½½åçå¨å± <code>div</code> æ ·å¼æå¤å½±åäºå¯å¨é¡µï¼å¯¼è´å¸å±å´©åã<br>
<strong>ç»éª</strong>ï¼ææ CSS éæ©å¨é½æå¨ <code>#boot-screen</code> ä¸ï¼ä¸ä½¿ç¨ <code>!important</code> æåä¼åçº§ï¼ä»å¨å¯å¨é¡µ CSS ä¸­ï¼ã</p>
<h3 id="2-ä¼éçè¿æ¸¡">2. ä¼éçè¿æ¸¡</h3>
<p>React mount æååï¼ä¸è¦ç´æ¥ <code>remove()</code> å¯å¨é¡µ DOMã<br>
<strong>æ­£ç¡®åæ³</strong>ï¼</p>
<ol>
<li>React è§¦å <code>window.dispatchEvent(new Event('hagicode:ready'))</code>ã</li>
<li>å¯å¨é¡µçå¬å°äºä»¶ï¼åè®¾ç½® <code>opacity: 0</code>ã</li>
<li>ç­å¾ 300ms (CSS transition æ¶é´)ï¼ç¡®ä¿ç¨æ·çä¸è§äºï¼åæ§è¡ <code>.remove()</code>ã</li>
</ol>
<h3 id="3-ä¸»é¢åéåæ­¥">3. ä¸»é¢åéåæ­¥</h3>
<p>å¯å¨é¡µçé¢è²ä»£ç æ¯åæ­»å¨ <code>index.html</code> éçãå¦ææä»¬ä¿®æ¹äº Tailwind çä¸»è²ï¼å¿é¡»åæ­¥ä¿®æ¹è¿éã<br>
<strong>ä¼åæ¹æ¡</strong>ï¼å¨ Vite æå»ºèæ¬ä¸­ï¼ç¼åä¸ä¸ªç®åçæä»¶ï¼è¯»å <code>tailwind.config.js</code> å¹¶å°é¢è²åéæ³¨å¥å° <code>index.html</code> çæ¨¡æ¿åéä¸­ï¼å®ç°åä¸æ°æ®æºã</p>
<h3 id="4-å­ä½é¢å è½½">4. å­ä½é¢å è½½</h3>
<p>å¯å¨é¡µéå¸¸éè¦ä½¿ç¨åçå­ä½ï¼ä½å¦æå­ä½å è½½æ¢ï¼ä¼åºç° FOUT (Flash of Unstyled Text)ã<br>
<strong>è§£å³æ¹æ¡</strong>ï¼å¨ <code>&lt;head&gt;</code> ä¸­å å¥ <code>&lt;link rel="preload" href="/fonts/JetBrainsMono.woff2" as="font" type="font/woff2" crossorigin&gt;</code>ãè¿æ¯æåä½éªçä½ææ¬é«åæ¥ææ®µã</p>
<h3 id="5-æ§è½çæ§">5. æ§è½çæ§</h3>
<p>æä»¬å¨ <code>index.html</code> åºé¨æ³¨å¥äº <code>performance.mark('boot-start')</code>ï¼å¹¶å¨ React æè½½æåæ¶æ è®° <code>boot-end</code>ã<br>
<strong>æä¹</strong>ï¼éè¿ Application Insights æ¶éè¿äºæ°æ®ï¼æä»¬å¯ä»¥çå®çå°å¯å¨é¡µå¯¹ç¨æ·æç¥ç­å¾æ¶é´ï¼Perceived Loading Timeï¼çç¼©ç­ç¨åº¦ãæ°æ®è¡¨æï¼ä¼ç§çéª¨æ¶å±è½è®©ç¨æ·å¯¹"æ¢éç½ç»"çå®¹å¿åº¦æå 50% ä»¥ä¸ã</p>
<h2 id="æ»ç»">æ»ç»</h2>
<p>ä¸ä¸ªå¥½çå¯å¨é¡µï¼ä¸ä»ä»æ¯"ç­å¾æ¶çè£é¥°"ï¼å®æ¯äº§åä¸ç¨æ·ç¬¬ä¸æ¬¡äº¤äºçæ¡æä¿¡å·ãå¨ HagiCode é¡¹ç®ä¸­ï¼è¿å¥åºäº <strong>Variants æ¨¡å¼</strong>çå¯å¨ç³»ç»ï¼è®©æä»¬è½å¤çµæ´»å°å¨ä¸åèæ¥ãä¸åçæ¬é´åæ¢é£æ ¼ï¼æå¤§å°å¢å¼ºäºäº§åçè¶£å³æ§åä¸ä¸æã</p>
<p>æ¬æåäº«çæ¹æ¡å®å¨åºäºåç Web æ åï¼æ²¡æå¼å¥ä»»ä½æ²éçä¾èµï¼è¿æ­£æ¯ HagiCode è¿½æ±"è½»éä¸å¼ºå¤§"çä½ç°ãå¦æä½ è§å¾è¿å¥æ¹æ¡æä»·å¼ï¼æ¬¢è¿æ¥ HagiCode ä»åºççæä»¬çæºç å®ç°ï¼çè³è´¡ç®ä½ çåæè®¾è®¡ï¼</p>
<h2 id="åèèµæ">åèèµæ</h2>
<ul>
<li><strong>HagiCode é¡¹ç®å°å</strong>ï¼<a href="https://github.com/HagiCode-org/site" target="_blank" rel="noopener nofollow">https://github.com/HagiCode-org/site</a></li>
<li><strong>å®ç½äºè§£æ´å¤</strong>ï¼<a href="https://hagicode-org.github.io/site" target="_blank" rel="noopener nofollow">https://hagicode-org.github.io/site</a></li>
<li><strong>è§çå®ææ¼ç¤º</strong>ï¼<a href="https://www.bilibili.com/video/BV1pirZBuEzq/" target="_blank" rel="noopener nofollow">https://www.bilibili.com/video/BV1pirZBuEzq/</a></li>
<li><strong>ä¸é®å®è£ä½éª</strong>ï¼<a href="https://hagicode-org.github.io/site/docs/installation/docker-compose" target="_blank" rel="noopener nofollow">https://hagicode-org.github.io/site/docs/installation/docker-compose</a></li>
</ul>
<p>å¦ææ¬æå¯¹ä½ æå¸®å©ï¼æ¬¢è¿æ¥ GitHub ç»ä¸ª Starï¼å¬æµå·²å¼å§ï¼æå¾ä½ çåé¦ï¼</p>
<hr>
<p>æè°¢æ¨çéè¯»,å¦ææ¨è§å¾æ¬ææç¨,å¿«ç¹å»ä¸æ¹ç¹èµæé®ð,è®©æ´å¤çäººçå°æ¬æã</p>
<p>æ¬åå®¹éç¨äººå·¥æºè½è¾å©åä½,ç»æ¬äººå®¡æ ¸,ç¬¦åæ¬äººè§ç¹ä¸ç«åºã</p>
<ul>
<li><strong>æ¬æä½è:</strong> <a href="https://www.newbe.pro" target="_blank" rel="noopener nofollow">newbe36524</a></li>
<li><strong>æ¬æé¾æ¥:</strong> <a href="https://hagicode-org.github.io/site/blog/2026-02-03-hagicode-react-19-hydration-splash-screen/" target="_blank" rel="noopener nofollow">https://hagicode-org.github.io/site/blog/2026-02-03-hagicode-react-19-hydration-splash-screen/</a></li>
<li><strong>çæå£°æ:</strong> æ¬åå®¢æææç« é¤ç¹å«å£°æå¤,åéç¨ BY-NC-SA è®¸å¯åè®®ãè½¬è½½è¯·æ³¨æåºå¤!</li>
</ul>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-04 09:24">2026-02-04 09:23</span>&nbsp;
<a href="https://www.cnblogs.com/newbe36524">Newbe36524</a>&nbsp;
éè¯»(<span id="post_view_count">19</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19572516);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19572516', targetLink: 'https://www.cnblogs.com/newbe36524/p/19572516', title: 'HagiCode å¯å¨é¡µè®¾è®¡ï¼React 19 åºç¨ä¸­å¡«è¡¥ Hydration ç©ºç½æçæè´ä½éª' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ APEXå®æç¬¬12ç¯ï¼Oracle APEX å·¥ä½åºå¯ç å¿è®°äºæä¹åï¼ ]]></title>
    <link>https://www.cnblogs.com/jyzhao/p/19572308/apex-shi-zhan-di12pianoracle-apex-gong-zuo-qu-mi-m</link>
    <guid>4910dad9cf3fd993065dc58e32a0a4b7</guid>
    <description>
    <![CDATA[ 
    <a name="top"></a>
    <h2><a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/jyzhao/p/19572308/apex-shi-zhan-di12pianoracle-apex-gong-zuo-qu-mi-m" title="åå¸äº 2026-02-04 07:28">
    <span role="heading" aria-level="2">APEXå®æç¬¬12ç¯ï¼Oracle APEX å·¥ä½åºå¯ç å¿è®°äºæä¹åï¼</span>
    

</a>
</h2>
    <small>
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-04 07:28">2026-02-04 07:28</span>&nbsp;
<a href="https://www.cnblogs.com/jyzhao">AlfredZhao</a>&nbsp;
éè¯»(<span id="post_view_count">43</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19572308);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19572308', targetLink: 'https://www.cnblogs.com/jyzhao/p/19572308/apex-shi-zhan-di12pianoracle-apex-gong-zuo-qu-mi-m', title: 'APEXå®æç¬¬12ç¯ï¼Oracle APEX å·¥ä½åºå¯ç å¿è®°äºæä¹åï¼' })">ä¸¾æ¥</a>
</small>
    <div class="entry">
        <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>å¨ Oracle APEX å¼åè¿ç¨ä¸­ï¼æè®©äººæççç¬é´è«è¿äºï¼ç±äºé¿æ¶é´æ²¡ç»å½æèæµè§å¨ç¼å­å¤±æï¼çªç¶åç°èªå·±ç <strong>Workspaceï¼å·¥ä½åºï¼</strong> å¯ç æ­»æ´»å¯¹ä¸ä¸äºã</p>
<p>ä½ä¸ºä¸åå¨ APEX åéæ¸ç¬æ»æçä»ä¸èï¼ç¬èä»å¤©å°±å¸¦å¤§å®¶æ¢³çä¸ä¸å®æ¹æä¾çå ç§âèªæâæ¹æ¡ãæ è®ºä½ æ¯æ®éå¼åèï¼è¿æ¯ææ¡éæçç®¡çåï¼é½è½æ¾å°å¯¹åºçç ´è§£ä¹æ³ã</p>
<hr>
<h2 id="01--æåµä¸ææ¯æ®éå¼åèä½ç®¡çåè¿å¨">01 | æåµä¸ï¼ææ¯æ®éå¼åèï¼ä½ç®¡çåè¿å¨</h2>
<p>å¦æä½ åªæ¯å¢éä¸­çä¸åå¼åäººåï¼æèä½ çå·¥ä½åºéè¿æå¶ä»æ¥æâç®¡çåâæéçè´¦å·ï¼é£ä¹é®é¢éå¸¸ç®åã</p>
<h3 id="-åå·¥ä½åºç®¡çåæ±å©">â  åå·¥ä½åºç®¡çåæ±å©</h3>
<p>è¿æ¯æå¿«çæ¹æ³ãè¯·èç³»ä½ çåäºï¼è®©ä»æ§è¡ä»¥ä¸æä½ï¼</p>
<ol>
<li>ç»å½è¯¥å·¥ä½åºã</li>
<li>ç¹å»é¡¶é¨å¯¼èªæ ç <strong>Administration</strong> -&gt; <strong>Manage Users and Groups</strong>ã</li>
<li>å¨åè¡¨ä¸­æ¾å°ä½ çç¨æ·åï¼ç¹å»è¿å¥ã</li>
<li>å¨ <strong>Password</strong> æ ç´æ¥è¾å¥æ°å¯ç å¹¶ç¹å» <strong>Apply Changes</strong>ã</li>
</ol>
<p><img src="https://img2024.cnblogs.com/blog/635610/202602/635610-20260204072813066-1686472654.jpg" alt="" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/635610/202602/635610-20260204072813261-336974113.jpg" alt="" loading="lazy"></p>
<blockquote>
<p><strong>ç¬èæéï¼</strong> è¿ç§æ¹å¼ä¸éè¦éå¯ä»»ä½æå¡ï¼å³ä¿®æ¹å³çæï¼éå¸¸éåå¢éåä½å¼åã</p>
</blockquote>
<hr>
<h2 id="02--æåµäºææ¯ç®¡çåä½è®°ä¸ä½å¯ç äº">02 | æåµäºï¼ææ¯ç®¡çåï¼ä½è®°ä¸ä½å¯ç äº</h2>
<p>å¦æä½ æ¯è¯¥å·¥ä½åºå¯ä¸çç®¡çåï¼ä½ä½ è¿è®°å¾ <strong>INTERNAL</strong> ç®¡çå°ï¼å³ Instance Adminï¼çç»å½å­æ®ï¼é£ä¹ä½ ä¾ç¶å¯ä»¥éè¿âéç»´æå»âæ¥è§£å³é®é¢ã</p>
<h3 id="-ç»å½-internal-å·¥ä½åº">â  ç»å½ INTERNAL å·¥ä½åº</h3>
<ol>
<li>å¨ APEX ç»å½é¡µé¢ï¼å°å·¥ä½åºåç§°è¾å¥ä¸º <code>INTERNAL</code>ã</li>
<li>ä½¿ç¨å®ä¾ç®¡çåè´¦å·ï¼éå¸¸æ¯ <code>ADMIN</code>ï¼ç»å½ã</li>
</ol>
<h3 id="-ç®¡çææç¨æ·">â¡ ç®¡çææç¨æ·</h3>
<ol>
<li>è¿å¥åï¼ä¾æ¬¡ç¹å» <strong>Manage Workspaces</strong> -&gt; <strong>Manage Developers and Users</strong>ã</li>
</ol>
<p><img src="https://img2024.cnblogs.com/blog/635610/202602/635610-20260204072813215-1661679627.jpg" alt="" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/635610/202602/635610-20260204072813245-1600580137.jpg" alt="" loading="lazy"></p>
<ol start="2">
<li>æ¾å°ä½ è¦éç½®çå¯ç ï¼ç´æ¥resetï¼æå·¥è®¾ç½®æ°çå¯ç ã</li>
</ol>
<p><img src="https://img2024.cnblogs.com/blog/635610/202602/635610-20260204072813237-1522213160.jpg" alt="" loading="lazy"></p>
<p>æ³¨æï¼è¿éç¹æéæ©æå·¥è¾å¥å¯ç ï¼æä»¥å°±å¯ä»¥ä¸å¿ç®¡ä»ä¹Emailè½å¦æ¶å°ï¼ç´æ¥ä½¿ç¨ä½ ä¿®æ¹çå¯ç ç»å½å³å¯ã</p>
<p><img src="https://img2024.cnblogs.com/blog/635610/202602/635610-20260204072813083-292191341.jpg" alt="" loading="lazy"></p>
<hr>
<h2 id="03--æåµä¸ç»æç»æè¿-internal-å¯ç ä¹å¿äº">03 | æåµä¸ï¼ç»æç»æï¼è¿ INTERNAL å¯ç ä¹å¿äº</h2>
<p>è¿æ¯ææç«¯çæåµï¼ä½ ä¸ä»è¿ä¸å»èªå·±ç Workspaceï¼è¿æ´ä¸ª APEX å®ä¾çè¶çº§ç®¡çåå¯ç ä¹ä¸¢äºãè¿æ¶ï¼æä»¬éè¦å¨ç¨æ°æ®åºåºå±çåéã</p>
<h3 id="-åå¤å·¥ä½">â  åå¤å·¥ä½</h3>
<p>ä½ éè¦æ¥ææ°æ®åºæå¨æå¡å¨çè®¿é®æéï¼å¹¶ä¸è½å¤ä»¥ <code>SYSDBA</code> èº«ä»½è¿æ¥æ°æ®åºã</p>
<h3 id="-è¿è¡å®æ¹éç½®èæ¬">â¡ è¿è¡å®æ¹éç½®èæ¬</h3>
<p>Oracle APEX å¨å®è£åä¸­ä¸é¨æä¾äºä¸ä¸ªåä¸º <code>apxchpwd.sql</code> çèæ¬ï¼å®æ¯ä¸é¨ç¨æ¥éç½® <code>INTERNAL</code> å®ä¾ç®¡çåå¯ç çâåæè¯âã</p>
<ol>
<li>æ¾å°ä½ ç APEX å®è£æºæä»¶ç®å½ï¼å³ä½ è§£å <code>apex_xx.x.zip</code> çå°æ¹ï¼ã</li>
<li>å¨å½ä»¤è¡ä¸­è¿å¥è¯¥ç®å½ï¼å¹¶è¿å¥ SQL*Plusï¼</li>
</ol>
<pre><code class="language-sql">sqlplus / as sysdba
</code></pre>
<ol start="3">
<li>è¿è¡éç½®èæ¬ï¼</li>
</ol>
<pre><code class="language-sql">@apxchpwd.sql
</code></pre>
<ol start="4">
<li>æ ¹æ®ç³»ç»æç¤ºï¼è¾å¥æ°ç <code>ADMIN</code> å¯ç ã</li>
</ol>
<blockquote>
<p><strong>å®æ¹è§èæç¤ºï¼</strong> å¯ç å¿é¡»ç¬¦å APEX çå¤æåº¦è¦æ±ï¼éå¸¸åå«å¤§å°åå­æ¯ãæ°å­åç¹æ®ç¬¦å·ï¼ãèæ¬è¿è¡æååï¼ä½ å°±å¯ä»¥ç¨è¿ä¸ªæ°å¯ç ç»å½ <code>INTERNAL</code> å·¥ä½åºï¼ç¶ååå»ææ²»å¶ä»ä¸å¡å·¥ä½åºäºã</p>
</blockquote>
<hr>
<h2 id="04--æ»ç»ä¸é¢é²">04 | æ»ç»ä¸é¢é²</h2>
<p>ä¸ºäºé¿åä¸æ¬¡åé·å¥è¿ç§å°´å°¬ï¼ç¬èå»ºè®®å¤§å®¶å¨æ¥å¸¸ä½¿ç¨ä¸­ï¼ä¸è¦å®å¨ä¾èµæµè§å¨çå¯ç ä¿å­ï¼ä¹èªå·±å¨æ¬å°å¦å­ä¸ä»½å¯ç ä¿¡æ¯ï¼å¹¶å®ææ´æ°ã</p>
<p>å¦å¤å¯ç ä¸¢å¤±ä¸å¯æï¼å¯æçæ¯ä¸ç¥éå¦ä½å¿«ééç½®å¯ç ãå¸æè¿ç¯æåè½å¸®ä½ å¨éå°è¿ç±»åºæ¯æ¶å¿«éæ¾åå¯ç ï¼ç»§ç»­æå¿«ç Low-Code ä¹æï¼</p>


</div>
<div id="MySignature" role="contentinfo">
    <a href="https://www.cnblogs.com/jyzhao/" target="_blank">AlfredZhao</a>Â©çæææãä»Oracleèµ·èªï¼é¢ç¥ç²¾å½©çITææ¯ãã<br>
è½¬è½½è¯·æ³¨æåæé¾æ¥ï¼<a href="https://www.cnblogs.com/jyzhao/p/19572308/apex-shi-zhan-di12pianoracle-apex-gong-zuo-qu-mi-m" target="_blank">https://www.cnblogs.com/jyzhao/p/19572308/apex-shi-zhan-di12pianoracle-apex-gong-zuo-qu-mi-m</a>
<hr>
<div style="text-align:center; margin-top:30px;">
  <p style="font-size:14px;color:#555;">
    ð æè°¢éè¯»ï¼æ¬¢è¿å³æ³¨æçå¬ä¼å· <b>ãèµµéå®ã</b>
  </p>
  <img src="https://images.cnblogs.com/cnblogs_com/jyzhao/824234/o_250208075013_qrcode-zjy.jpg" width="160" style="border:1px solid #ddd;border-radius:8px;">
</div>
</div>
<div class="clear"></div>

        <div class="clear"></div>
        
</div>
    <ul class="postmetadata">
        <vc:categories-tags blog-app="jyzhao" blog-id="186567" post-id="19572308"></vc:categories-tags>
    </ul>
 ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ä½¿ç¨ NanUI å¿«éåå»ºå·æç°ä»£ç¨æ·çé¢ç WinForm åºç¨ç¨åº ]]></title>
    <link>https://www.cnblogs.com/Can-daydayup/p/19571766</link>
    <guid>0c07c58b12a7a66aa218bbbd4979686d</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Can-daydayup/p/19571766" title="åå¸äº 2026-02-03 22:52">
    <span role="heading" aria-level="2">ä½¿ç¨ NanUI å¿«éåå»ºå·æç°ä»£ç¨æ·çé¢ç WinForm åºç¨ç¨åº</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h2 data-tool="mdniceç¼è¾å¨"><span class="content">åè¨</span></h2>
<p data-tool="mdniceç¼è¾å¨">ä»å¤©å¤§å§ç»å¤§å®¶åäº«ä¸ä¸ªå¼ºå¤§ç .NET å¼æºæ¡æ¶ï¼å®å©ç¨ Web ææ¯ï¼HTML5ãCSS3ãJavaScriptï¼ä¸º WinForm åºç¨ç¨åºæå»ºç°ä»£åçç¨æ·çé¢ï¼NanUIã</p>
<p data-tool="mdniceç¼è¾å¨">å¦æä½ æ­£å¨å¯»æ¾ä¸ä¸ªç¨äºåå»ºå·æç°ä»£ç¨æ·çé¢ç WinForm åºç¨ç¨åºçæ¡æ¶ï¼NanUI æ¯ä¸ä¸ªä¸éçéæ©ã</p>
<h2 data-tool="mdniceç¼è¾å¨"><span class="content">é¡¹ç®ä»ç»</span></h2>
<p data-tool="mdniceç¼è¾å¨">NanUI æ¯ä¸ä¸ªåºäº .NET å¹³å°çå¼æºï¼MIT Licenseï¼æ¡æ¶ï¼æ¨å¨å¸®å©å¼åèä½¿ç¨ HTML5ãCSS3 å JavaScript æå»ºå·æç°ä»£æç WinForm åºç¨ç¨åºç¨æ·çé¢ãå®åºå±ä¾æäº Xilium.CefGlue è¿æ¯ Chromium Embedded Frameworkï¼CEFï¼å¨ .NET ç¯å¢ä¸çå®æ¹ç»å®å®ç°ï¼éè¿åµå¥å®æ´ç Chromium æ¸²æå¼æï¼ä½¿ WinForm åºç¨è½å¤åç° Web ææ¯é©±å¨çå¯äº¤äºçé¢ã</p>
<h2 data-tool="mdniceç¼è¾å¨"><span class="content">åºæ¬åç</span></h2>
<p data-tool="mdniceç¼è¾å¨"><strong>å®æ¹ä»ç»ï¼</strong></p>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202602/1336199-20260203224945896-1709690796.png" alt="image" loading="lazy"></p>
<p data-tool="mdniceç¼è¾å¨"><strong>åºæ¬åçæ¦æ¬ï¼</strong></p>
<ul data-tool="mdniceç¼è¾å¨">
<li><strong>Chromium Embedded Framework (CEF)</strong>&nbsp;æ¯ä¸ä¸ªå¼æºé¡¹ç®ï¼ä¸ä¸ªç¨äºå°åºäº Chromium çæµè§å¨åµå¥å¶ä»åºç¨ç¨åºçç®åæ¡æ¶ã</li>
<li>å®æä¾ç¨³å®ç C/C++ APIï¼æ¯æå¤è¿ç¨æ¶æï¼Browser è¿ç¨ + Renderer/GPU ç­å­è¿ç¨ï¼ï¼å·å¤å®æ´ç HTML5 æ¸²æãJavaScript æ§è¡ãç½ç»è¯·æ±ãå®å¨æ²ç®±ç­è½åã</li>
<li>NanUI å¹¶æªç´æ¥è°ç¨ CEF ç C æ¥å£ï¼èæ¯åºäº&nbsp;<strong>Xilium.CefGlue</strong>&nbsp;è¿æ¯ä¸ä¸ªé«è´¨éç .NET å°è£åºï¼å° CEF ç C++ API è½¬æ¢ä¸º C# å¯è°ç¨çæç®¡æ¥å£ã</li>
</ul>
<h2 data-tool="mdniceç¼è¾å¨"><span class="content">ç¯å¢è¦æ±</span></h2>
<h3 data-tool="mdniceç¼è¾å¨"><span class="content">å¼åç¯å¢</span></h3>
<ul data-tool="mdniceç¼è¾å¨">
<li>Visual Studio 2019 ææ´é«çæ¬ã</li>
<li>NET Framework 4.6.2 ææ´é«çæ¬ / .NET 6.0 ææ´é«çæ¬ã</li>
</ul>
<h3 data-tool="mdniceç¼è¾å¨"><span class="content">é¨ç½²ç¯å¢</span></h3>
<ul data-tool="mdniceç¼è¾å¨">
<li>.NET Framework 4.6.2 ææ´é«çæ¬ã</li>
<li>.NET 6.0 éè¦ Windows 7 Service Pack 1 ææ´é«çæ¬ã</li>
<li>.NET 7.0/8.0/9.0 éè¦ Windows 10 æ Windows 11ã</li>
<li>Microsoft Windows 7 Service Pack 1 ææ´é«çæ¬ã</li>
</ul>
<h2 data-tool="mdniceç¼è¾å¨"><span class="content">é¡¹ç®æºä»£ç </span></h2>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202602/1336199-20260203225000339-222340467.png" alt="image" loading="lazy"></p>
<h2 data-tool="mdniceç¼è¾å¨"><span class="content">å¿«éä½¿ç¨</span></h2>
<h3 data-tool="mdniceç¼è¾å¨"><span class="content">åå»ºä¸ä¸ª WinForm åºç¨ç¨åº</span></h3>
<p data-tool="mdniceç¼è¾å¨">é¦åæä»¬å¿«éåå»ºä¸ä¸ªåä¸º<code>NanUIExercise</code>&nbsp;Windows çªä½åºç¨ç¨åºï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202602/1336199-20260203225039530-1668443758.png" alt="image" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202602/1336199-20260203225044905-2091682107.png" alt="image" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202602/1336199-20260203225051053-201638939.png" alt="image" width="1075" height="458" loading="lazy"></p>
<h3 data-tool="mdniceç¼è¾å¨"><span class="content">å®è£ NanUI NuGet å</span></h3>
<p data-tool="mdniceç¼è¾å¨">å®è£&nbsp;<code>NanUI</code>&nbsp;å&nbsp;<code>NetDimension.NanUI</code>&nbsp;ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202602/1336199-20260203225112224-661517538.png" alt="image" width="1100" height="607" loading="lazy"></p>
<p>&nbsp;å®è£&nbsp;<code>NanUI</code>&nbsp;æä¾èµç&nbsp;<code>Chromium Embedded Framework</code>&nbsp;ä¾èµå&nbsp;<code>NetDimension.NanUI.Runtime</code>ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202602/1336199-20260203225122223-56769435.png" alt="image" width="1103" height="607" loading="lazy"></p>
<p>&nbsp;</p>
<h3 data-tool="mdniceç¼è¾å¨"><span class="content">åå»ºä¸ä¸ªåºæ¬ç NanUI åºç¨ç¨åº</span></h3>
<p data-tool="mdniceç¼è¾å¨"><strong>Program.csï¼</strong></p>
<pre class="custom" data-tool="mdniceç¼è¾å¨"><code class="hljs"><span class="hljs-keyword">using&nbsp;NetDimension.NanUI;<br><br><span class="hljs-keyword">namespace&nbsp;<span class="hljs-title">NanUIExercise<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">internal&nbsp;<span class="hljs-keyword">static&nbsp;<span class="hljs-keyword">class&nbsp;<span class="hljs-title">Program<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment"><span class="hljs-doctag">///&nbsp;<span class="hljs-doctag">&lt;summary&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment"><span class="hljs-doctag">///&nbsp;&nbsp;The&nbsp;main&nbsp;entry&nbsp;point&nbsp;for&nbsp;the&nbsp;application.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment"><span class="hljs-doctag">///&nbsp;<span class="hljs-doctag">&lt;/summary&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hljs-meta">STAThread]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function"><span class="hljs-keyword">static&nbsp;<span class="hljs-keyword">void&nbsp;<span class="hljs-title">Main(<span class="hljs-params">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">var&nbsp;builder&nbsp;=&nbsp;NanUIApp.CreateBuilder();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;builder.UseNanUIApp&lt;MyFirstAPP&gt;();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">var&nbsp;app&nbsp;=&nbsp;builder.Build();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;app.Run();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p data-tool="mdniceç¼è¾å¨"><strong>åå»ºä¸ä¸ªç±»ç»§æ¿ AppStartup æ¥éç½®åºç¨ç¨åºï¼</strong></p>
<pre class="custom" data-tool="mdniceç¼è¾å¨"><code class="hljs">using&nbsp;Microsoft.Extensions.DependencyInjection;<br>using&nbsp;NetDimension.NanUI;<br><br>namespace&nbsp;NanUIExercise<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;class&nbsp;MyFirstAPP&nbsp;:&nbsp;AppStartup<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;override&nbsp;MainWindowCreationAction?&nbsp;UseMainWindow(MainWindowOptions&nbsp;opts)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;è®¾ç½®åºç¨ç¨åºçä¸»çªä½<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in">return&nbsp;opts.UseMainFormium&lt;MyWindow&gt;();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;override&nbsp;void&nbsp;ProgramMain(string[]&nbsp;args)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Mainå½æ°ä¸­çä»£ç åºè¯¥å¨è¿éï¼è¯¥å½æ°åªå¨ä¸»è¿ç¨ä¸­è¿è¡ãè¿æ ·å¯ä»¥é²æ­¢å­è¿ç¨è¿è¡ä¸äºä¸æ­£ç¡®çåå§åä»£ç ã<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ApplicationConfiguration.Initialize();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;override&nbsp;void&nbsp;ConfigurationChromiumEmbedded(ChromiumEnvironmentBuiler&nbsp;cef)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;å¨æ­¤å¤éç½®&nbsp;Chromium&nbsp;Embedded&nbsp;Framwork<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;override&nbsp;void&nbsp;ConfigureServices(IServiceCollection&nbsp;services)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;å¨è¿ééç½®è¯¥åºç¨ç¨åºçæå¡<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br><br></span></code></pre>
<p data-tool="mdniceç¼è¾å¨"><strong>åå»ºä¸ä¸ªç±»å®ç° Formiumï¼ç¨äºéç½®åºç¨ç¨åºçä¸»çªå£ï¼</strong></p>
<pre class="custom" data-tool="mdniceç¼è¾å¨"><code class="hljs">using&nbsp;NetDimension.NanUI;<br>using&nbsp;NetDimension.NanUI.Forms;<br><br>namespace&nbsp;NanUIExercise<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;class&nbsp;MyWindow&nbsp;:&nbsp;Formium<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;<span class="hljs-function"><span class="hljs-title">MyWindow()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Url&nbsp;=&nbsp;<span class="hljs-string">"https://juejin.cn/";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;override&nbsp;FormStyle&nbsp;ConfigureWindowStyle(WindowStyleBuilder&nbsp;builder)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;æ­¤å¤éç½®çªå£çæ ·å¼åå±æ§ï¼æçç©ºä»¥ä½¿ç¨é»è®¤æ ·å¼<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;style&nbsp;=&nbsp;builder.UseSystemForm();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style.TitleBar&nbsp;=&nbsp;<span class="hljs-literal">false;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style.DefaultAppTitle&nbsp;=&nbsp;<span class="hljs-string">"My&nbsp;First&nbsp;NanUI&nbsp;App";<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in">return&nbsp;style;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br></span></span></span></span></span></span></code></pre>
<p data-tool="mdniceç¼è¾å¨"><strong>è¿è¡æææ¥çï¼</strong></p>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202602/1336199-20260203225205762-1526989538.png" alt="image" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202602/1336199-20260203225210743-1010420250.png" alt="image" loading="lazy"></p>
<h2 data-tool="mdniceç¼è¾å¨"><span class="content">é¡¹ç®æºç å°å</span></h2>
<p data-tool="mdniceç¼è¾å¨">æ´å¤é¡¹ç®å®ç¨åè½åç¹æ§æ¬¢è¿åå¾é¡¹ç®å¼æºå°åæ¥çðï¼å«å¿äºç»é¡¹ç®ä¸ä¸ªStaræ¯æðã</p>
<ul data-tool="mdniceç¼è¾å¨">
<li><strong>Giteeå¼æºå°åï¼</strong>&nbsp;<a href="https://gitee.com/dotnetchina/NanUI" rel="noopener nofollow">https://gitee.com/dotnetchina/NanUI</a></li>
<li><strong>é¡¹ç®ææ¡£å°åï¼</strong>&nbsp;<a href="https://gitee.com/dotnetchina/NanUI/blob/master/docs/README.md" rel="noopener nofollow">https://gitee.com/dotnetchina/NanUI/blob/master/docs/README.md</a></li>
</ul>
<h2 data-tool="mdniceç¼è¾å¨"><span class="content">ä¼ç§é¡¹ç®åæ¡æ¶ç²¾é</span></h2>
<p data-tool="mdniceç¼è¾å¨">è¯¥é¡¹ç®å·²æ¶å½å°C#/.NET/.NET Coreä¼ç§é¡¹ç®åæ¡æ¶ç²¾éä¸­ï¼å³æ³¨ä¼ç§é¡¹ç®åæ¡æ¶ç²¾éè½è®©ä½ åæ¶äºè§£C#ã.NETå.NET Coreé¢åçææ°å¨æåæä½³å®è·µï¼æé«å¼åå·¥ä½æçåè´¨éãåå·²æï¼æ¬¢è¿å¤§å®¶è¸è·æäº¤PRæ¨èæèªèï¼<strong>è®©ä¼ç§çé¡¹ç®åæ¡æ¶ä¸è¢«åæ²¡ð¤</strong>ï¼ã</p>
<ul data-tool="mdniceç¼è¾å¨">
<li><strong>GitHubå¼æºå°åï¼</strong>&nbsp;<a href="https://github.com/YSGStudyHards/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md" rel="noopener nofollow">https://github.com/YSGStudyHards/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md</a></li>
<li><strong>Giteeå¼æºå°åï¼</strong>&nbsp;<a href="https://gitee.com/ysgdaydayup/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md" rel="noopener nofollow">https://gitee.com/ysgdaydayup/DotNetGuide/blob/main/docs/DotNet/DotNetProjectPicks.md</a></li>
</ul>

</div>
<div id="MySignature" role="contentinfo">
    <blockquote>
<p style="font-family:YouYuan;font-size: 16px;margin: 0 auto 0.01em auto;"><span style="font-size: 17px; ">ä½èåç§°ï¼</span><a href="https://www.cnblogs.com/Can-daydayup/" target="_blank">è¿½éæ¶åè</a></p>
<p style="font-family:YouYuan;font-size: 16px;margin: 0 auto 0.01em auto;"><span style="font-size: 17px; ">ä½èç®ä»ï¼</span>ä¸ä¸ªç­ç±ç¼ç¨ãåäºåäº«ãåæ¬¢å­¦ä¹ ãæ¢ç´¢ãå°è¯æ°äºç©åæ°ææ¯çå¨æ è½¯ä»¶å·¥ç¨å¸ã</p>
<p style="font-family:YouYuan;font-size: 16px;margin: 0 auto 0.01em auto;">
æ¬æçæå½ä½èååå®¢å­å±æï¼æ¬¢è¿è½¬è½½ï¼ä½æªç»ä½èåæå¿é¡»ä¿çæ­¤æ®µå£°æï¼ä¸å¨æç« é¡µé¢ææ¾ä½ç½®ç»åºåæé¾æ¥ï¼å¦åä¿çè¿½ç©¶æ³å¾è´£ä»»çæå©ãå¦æè¯¥ç¯æç« å¯¹æ¨æå¸®å©çè¯ï¼å¯ä»¥ç¹ä¸ä¸å³ä¸è§ç<a onclick="votePost(cb_entryId,'Digg')" href="javascript:void(0)" style="color:red;">ãâ¥æ¨èâ¥ã</a>ï¼å¸æè½å¤æç»­çä¸ºå¤§å®¶å¸¦æ¥å¥½çææ¯æç« ï¼æä¸­å¯è½å­å¨æè¿°ä¸æ­£ç¡®çå°æ¹ï¼æ¬¢è¿ææ­£æè¡¥åï¼ä¸èææ¿ã
</p>
</blockquote>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-03 22:53">2026-02-03 22:52</span>&nbsp;
<a href="https://www.cnblogs.com/Can-daydayup">è¿½éæ¶åè</a>&nbsp;
éè¯»(<span id="post_view_count">287</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19571766);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19571766', targetLink: 'https://www.cnblogs.com/Can-daydayup/p/19571766', title: 'ä½¿ç¨ NanUI å¿«éåå»ºå·æç°ä»£ç¨æ·çé¢ç WinForm åºç¨ç¨åº' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ DTSæä¸å¡åºæ¯æ¹éè¿ç§»é¿éäºMySQLè¡¨å®æï¼ä¸ï¼ï¼è¿ç§»ç®¡çå¹³å°è®¾è®¡ä¸å®ç° ]]></title>
    <link>https://www.cnblogs.com/wuyuegb2312/p/19571685</link>
    <guid>37dca18d15977148a0baed5b6874a714</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/wuyuegb2312/p/19571685" title="åå¸äº 2026-02-03 22:34">
    <span role="heading" aria-level="2">DTSæä¸å¡åºæ¯æ¹éè¿ç§»é¿éäºMySQLè¡¨å®æï¼ä¸ï¼ï¼è¿ç§»ç®¡çå¹³å°è®¾è®¡ä¸å®ç°</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>æ¬ææ¯ <a href="https://www.cnblogs.com/wuyuegb2312/p/19566555" target="_blank">DTSæä¸å¡åºæ¯æ¹éè¿ç§»é¿éäºMySQLè¡¨å®æï¼ä¸ï¼ï¼ææ¯éååAPIå¯¹æ¥</a>  çåç»­ï¼åºç¨ç¶ææ¨¡å¼ï¼å®æä¸å¡ç³»ç»ä¸­çè¿ç§»æ¨¡åãDTSçå¯¹æ¥æ¹å¼å¯åèåæã</p>
<h1 id="è¿ç§»ç®¡çå¹³å°è®¾è®¡ä¸å®ç°">è¿ç§»ç®¡çå¹³å°è®¾è®¡ä¸å®ç°</h1>
<p>å®æDTS APIå¯¹æ¥åï¼å°±éè¦èèå¦ä½å°DTSåä¸å¡ç³»ç»ææºç»åå®ç°æ´å¥çè¿ç§»æµç¨ã</p>
<p>åºäºä¿¡æ¯å®å¨è§åº¦çèèï¼æ¬æå é¤äºå¤§éæ¶åå®éä¸å¡çå®ç°ä»£ç ã</p>
<h2 id="ä¸å¡çº¦æ">ä¸å¡çº¦æ</h2>
<p>ä»ä¸å¡åºåï¼æå¥½çä½éªè¯å®æ¯ç¨æ·æ æçï¼å³è¿ç§»å®æåï¼ç¡®è®¤æ°æ§è¡¨æ°æ®ä¸è´ï¼ç´æ¥åæ¢å°æ°è¡¨æ¥è¯¢ã</p>
<p>å¦æè¿ç§»æé´ï¼ç¨æ·å¯¹æ§è¡¨è¿è¡äºåå¥ï¼æ°è¡¨å¯è½ä¼å°æ°æ®ï¼ä¸è½è´¸ç¶åæ¢ï¼è¦åæ°æ®çå¯¹æ¯ãå¦æç¨æ·ä¸ç´å¨åå¥ï¼å°±è¦ä¸ç´åå¤çå¯¹æ¯ãç¡®è®¤ï¼æå¢éæ°æ®å°±è¦å é¤æ°è¡¨éæ°è¿ç§»ï¼æµç¨å¤æã</p>
<p>åä¸å¡æ¹æ²éï¼å¾ç¥å¯¹æ¹å¯ä»¥æ¥åï¼ç¦æ­¢åå¥æ­£å¨è¿ç§»çå¬å¸çè¡¨ï¼åç¨æ·æ¥éï¼ç­è¿ç§»å®æååæ¢å¤ä½¿ç¨ã<br>
è¿æ ·æµç¨å°±ç®åå¤äºï¼å¼å§è¿ç§»æ¶ï¼å°æ§è¡¨éå½åå¢å ç¹æ®çåç¼ï¼å°±è½é²æ­¢ç¨æ·æä½ï¼å¹¶ç¡®ä¿æ§è¡¨æ°æ®ä¸åçåæ´ã</p>
<h2 id="ææ¯æ ¡éª">ææ¯æ ¡éª</h2>
<p>å¦ä½å¤æ­ä¸ä¸ªå¬å¸æ¯å¦è¿ç§»æåï¼æä¸¥è°¨çæ¹å¼æ¯éè¡¨éè¡æ°æ®å¯¹æ¯ï¼ä½æ¯å¨ä½¿ç¨DTSçæåµä¸å¹¶æ å¿è¦ãæéåçæ¯è¾ç­ç¥æ¯ï¼å¨è¿ç§»ååï¼</p>
<ol>
<li>
<p>æºè¡¨ç®æ è¡¨æ°éç¸å</p>
</li>
<li>
<p>å¯¹åºè¡¨æ°æ®éç¸åãæ°æ®æåæ´æ°æ¶é´ï¼å¦ææ­¤åï¼ç¸å</p>
</li>
</ol>
<p>åªè¦æ»¡è¶³ä»¥ä¸è¦æ±ï¼å°±è®¤ä¸ºæ°æ®æ¯ä¸è´çãå¯ä»¥éè¿SELECT COUNT(*), MAX(updateTime) FROM table_nameä¸æ¬¡æ§è·åã</p>
<h2 id="è¿ç§»ç¶ææº">è¿ç§»ç¶ææº</h2>
<p>ç»è¿åæåç®åï¼è¿ç§»ç¶ææºå¦ä¸ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/228024/202602/228024-20260203223055533-1166349172.png" alt="image" loading="lazy"></p>
<p>å¯ä»¥åç°ï¼æ¯ä¸ªç¶æé½å¯ä»¥è¿è¡âæ¨è¿âåâåæ»âä¸¤ä¸ªå¨ä½ï¼å¾éåä½¿ç¨ç¶ææ¨¡å¼æ¥å®ç°ãç¶ææ¨¡å¼çå®ç°åæ¾ä¸æ¾ï¼ççå ä¸ªåºæ¬æ°æ®ç»æï¼</p>
<h2 id="è¿ç§»ä»»å¡">è¿ç§»ä»»å¡</h2>
<pre><code class="language-Java">@Data
public class TableMigrateTask {
  // ä¸»é®
  private Long id;
  // å¬å¸id
  private Long companyId;
  // åå§ååºä½
  private Long oldSchemaId;
  // æ°ååºä½
  private Long newSchemaId;
  // ä»»å¡ç¶æ
  private Integer state;
  // DTSä»»å¡ç¶æï¼åé¿éäºå®ä¹ä¸è´
  private String dtsStatus;
  // DTSä»»å¡å·²å é¤ï¼éæ¾ï¼
  private Boolean dtsDeleted;
  // DTSå®ä¾id
  private String dtsInstanceId;
  // DTSä»»å¡id
  private String dtsJobId;
  // å¤±è´¥åå 
  private String failedReason;
  // ç¶æè·³è½¬æ¶çä¿¡æ¯ï¼è¾å©ææ¥é®é¢
  private String transitInfo;
  // è¿ç§»åè¡¨æ°æ®ç»è®¡ï¼jsonæ ¼å¼ï¼è¡¨åãæ°æ®éãæåæ´æ°æ¶é´
  private String tableStatisticsSrc;
  // è¿ç§»è¡¨ç»æç»è®¡ï¼jsonæ ¼å¼kvç»æï¼è¡¨å-æ°æ®é
  private String tableStatisticsDest;
}
</code></pre>
<h2 id="è¿ç§»ä¸ä¸æ">è¿ç§»ä¸ä¸æ</h2>
<p>è¿ç§»ç¶ææºå®éå¤ççå¯¹è±¡ï¼å°è£äºä¸äºæå¡ï¼å¯ä»¥è§ä¸ºé¢åå¯¹è±¡ï¼åè¡æ¨¡åï¼ã</p>
<pre><code class="language-Java">@Setter
public class TableMigrateExecuteContext {

  // ææçä»»å¡å¯¹è±¡
  @Getter
  private TableMigrateTask tableMigrateTask;

  // å½åçç¶æ
  @Getter
  private TableMigrateState currentState;

  private TableMigrateTaskRepository tableMigrateTaskRepository;

  private TableMigrateQueryService tableMigrateQueryService;

  private TableMigrateService tableMigrateService;

  private TableArchiveService tableArchiveService;

  private DataSourceHolder dataSourceHolder;

  public void createInstanceAndConfigureDtsJob() {
      // è°ç¨DTS APIåå»ºä»»å¡
  }

  public DescribeDtsJobDetailResponse queryDtsMigJob() {
      // è°ç¨DTS APIæ¥è¯¢
  }

  public void switchRoute(long oldSchemaId, long newSchemaId) {
      // å°åè¡¨ä»¥å¤çåè¡¨updateä¸ºnewSchemaId
  }

  public void stopDtsMigJob() {
      // è°ç¨DTS APIåæ­¢
  }

  public void updateTableMigrateTask(TableMigrateTask modifiedTask) {
       // æ´æ°ææçä»»å¡(æä¹å)
  }

  /**
   * ç¶ææ¨è¿
   *
   * @return è¿åä¿¡æ¯ï¼ä¸æåæ¶éç©º
   */
  public String forward() {
    return currentState.forward(this);
  }

  /** ç¶æåæ» */
  public String rollback() {
    return currentState.rollback(this);
  }

  /**
   * éå½åæ§è¡¨
   *
   * @param forward true-è¿ç§»åºæ¯ï¼å ââmigoldï¼åä¹åä¸å 
   * @param ignoreExited æ¯å¦å¿½ç¥å·²å­å¨çè¡¨ï¼ä»å¨åå§æçåæ»åºæ¯å¯ç¨
   */
  public void renameOldTableNames(boolean forward, boolean ignoreExited) {
      // æ³¨æè¦èèæºåºä¸­æ¯å¦å­å¨åæ§è¡¨ç¸åçååè¡¨
  }


  public void updateDestTableInfo() {
     // æ´æ°ç®æ è¡¨çç»è®¡ä¿¡æ¯
  }

  public void archiveNewTables(List&lt;String&gt; needArchiveTables) {
      // å½æ¡£æ°è¡¨  
  }

  /**
   * å é¤è¡¨
   *
   * @param newTable true-æ°è¡¨ï¼false-æ§è¡¨
   */
  public void deleteTables(boolean newTable) {
      // æ¹éæ§è¡DROP TABLE
  }

  public void deleteDtsInstanceAndJob() {
      // è°ç¨DTS APIéæ¾å®ä¾
  }
}
</code></pre>
<h3 id="å·¥åç±»">å·¥åç±»</h3>
<pre><code class="language-Java">@Component
public class TableMigrateContextFactory {

  @Resource private TableMigrateTaskRepository tableMigrateTaskRepository;
  @Resource private TableMigrateQueryService tableMigrateQueryService;
  @Resource private TableMigrateService tableMigrateService;
  @Resource private TableArchiveService tableArchiveService;
  @Resource private DataSourceHolder dataSourceHolder;

  public TableMigrateExecuteContext buildContext(long taskId) {
    TableMigrateTask task = tableMigrateTaskRepository.getById(taskId);
    if (task == null || task.getStatus() == 0) {
      throw new BizException("è¡¨è¿ç§»ä»»å¡ä¸å­å¨æå·²è¢«å é¤");
    }
    TableMigrateExecuteContext context = new TableMigrateExecuteContext();
    context.setTableMigrateTask(task);
    context.setCurrentState(buildState(TableMigrateStateEnum.getByValue(task.getState())));

    // æå¡æ³¨å¥
    context.setTableMigrateTaskRepository(tableMigrateTaskRepository);
    context.setTableMigrateQueryService(tableMigrateQueryService);
    context.setTableMigrateService(tableMigrateService);
    context.setTableArchiveService(tableArchiveService);
    context.setDataSourceHolder(dataSourceHolder);
    return context;
  }

  private TableMigrateState buildState(TableMigrateStateEnum stateEnum) {
    switch (stateEnum) {
      case INIT:
        return new MigrateInitState();
      case FAILED:
        return new MigrateFailedState();
      case PROCESSING:
        return new MigrateProcessingState();
      case NEED_SWITCH:
        return new MigrateNeedSwitchState();
      case SWITCHED:
        return new MigrateSwitchedState();
      case FINISH:
        return new MigrateFinishState();
      default:
        throw new BizException("è¿ç§»ç¶æéæ³");
    }
  }
}
</code></pre>
<h2 id="è¿ç§»ç¶æ">è¿ç§»ç¶æ</h2>
<p>æå¨åæ¬æ¬¡çç³»ç»è®¾è®¡æ¶ï¼å¯¹ç¶ææ¨¡å¼åäºä¸äºåé¡¾ååèãè¿ç§»ç¶ææ¯ç¶ææ¨¡å¼çæ ¸å¿ï¼ä»è®¾è®¡æ¨¡å¼çè§åº¦æ¥çï¼ç¶ææ¨¡å¼âåè®¸å¯¹è±¡å¨å¶åé¨ç¶ææ¹åæ¶å¨æè°æ´èªèº«è¡ä¸ºï¼ä½¿å¾å¯¹è±¡çè¡¨ç°å½¢æå¦åä¿®æ¹äºå¶æå±ç±»ãâ</p>
<p>ä»¥ä¸æ¯åä¸ªç±»çç»§æ¿å³ç³»ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/228024/202602/228024-20260203223122974-1126879955.png" alt="image" loading="lazy"></p>
<p>å¯¹åºçç¶æå¦ä¸ï¼</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>ç±»å</td>
<td>å«ä¹</td>
<td>è¯´æ</td>
</tr>
<tr>
<td>TableMigrateState</td>
<td>æ¥å£å®ä¹</td>
<td></td>
</tr>
<tr>
<td>AbstractMigrateState</td>
<td>ç¶ææ½è±¡ç±»</td>
<td></td>
</tr>
<tr>
<td>AbstractFinalState</td>
<td>ç»ææ½è±¡ç±»</td>
<td>ç»æå¾å¤æä½é½æ¯ä¸æ¯æçï¼åAbstractMigrateStateåå¼æ´ç®æ´</td>
</tr>
<tr>
<td>MigrateInitState</td>
<td>åå§</td>
<td>è®°å½è¦è¿ç§»çç»è®¡æ°æ®åéç½®</td>
</tr>
<tr>
<td>MigrateProcessingState</td>
<td>è¿ç§»ä¸­</td>
<td>DTSè¿è¡è¿ç§»å¨ä½çç¶æ</td>
</tr>
<tr>
<td>MigrateNeedSwitchState</td>
<td>è¿ç§»å®æå¾åæ¢ååºä½</td>
<td>æ°æ®å·²åæ­¥å¨æ°è¡¨ï¼ä½è¿ä¸å¯ä»¥éè¿ä¸å¡åè½ç´æ¥è®¿é®</td>
</tr>
<tr>
<td>MigrateSwitchedState</td>
<td>ååºä½å·²åæ¢å¾å é¤æ§è¡¨</td>
<td>æ°æ®å·²åæ­¥å¨æ°è¡¨ï¼ä¸è½éè¿ä¸å¡åè½ç´æ¥è®¿é®</td>
</tr>
<tr>
<td>MigrateFinishState</td>
<td>è¿ç§»å®æ</td>
<td>æ°æ®å·²åæ­¥å¨æ°è¡¨ä¸è½è®¿é®ï¼æ§è¡¨å·²å é¤</td>
</tr>
<tr>
<td>MigrateFailedState</td>
<td>è¿ç§»å¤±è´¥</td>
<td>åæ»ï¼æ§è¡¨æ¢å¤è®¿é®ï¼æ°è¡¨å¦ææåå é¤</td>
</tr>
</tbody>
</table>
<h3 id="ç¶ææ¥å£">ç¶ææ¥å£</h3>
<pre><code class="language-Java">public interface TableMigrateState {

  /**
   * åè¿å°ä¸ä¸ç¶æ
   *
   * @param context
   * @return å¤±è´¥çæç¤ºä¿¡æ¯
   */
  String forward(TableMigrateExecuteContext context);

  /**
   * åæ»æä½
   *
   * @param context
   * @return å¤±è´¥çæç¤ºä¿¡æ¯
   */
  String rollback(TableMigrateExecuteContext context);

  /**
   * è·åå½åçç¶æå¯¹åºæä¸¾
   */
  TableMigrateStateEnum getState();

  /**
   * è·åä¸ä¸ä¸ªç¶æ
   */
  TableMigrateState getNextState();

  /**
   * è·ååæ»çç¶æ
   */
  TableMigrateState getRollbackState();
}
</code></pre>
<h3 id="ç¶ææ½è±¡ç±»">ç¶ææ½è±¡ç±»</h3>
<pre><code class="language-TypeScript">public abstract class AbstractMigrateState implements TableMigrateState {

  @Override
  public String forward(TableMigrateExecuteContext context) {
    TableMigrateTask task = context.getTableMigrateTask();

    // 1. åç½®æ ¡éª
    // æ ¹æ®æ ¡éªç»æï¼å¤æ­æ¯çå¨å½åç¶æï¼è¿æ¯ç´æ¥åæ»å°è¿ç§»å¤±è´¥ç¶æ

    // 2. å®éå¨ä½ï¼ç±å®ç°ç±»å®æ
   // ç®åèµ·è§ï¼å¨å®éå¨ä½éçå¼å¸¸é½èªå¨åæ»

    // 3. ç¶æè·³è½¬
    transit(context, getNextState());
    return null;
  }

  @Override
  public String rollback(TableMigrateExecuteContext context) {
    TableMigrateTask task = context.getTableMigrateTask();
    // 1. å½åç¶ææ ¡éª
    checkCurrentState(context);

    // 2. åæ»æä½ï¼å¦æåçå¼å¸¸ï¼ä¿æå¨å½åç¶æ

    // 3. ç¶æè·³è½¬
    transit(context, getRollbackState());
    return null;
  }

  /**
   * åç½®æ ¡éª
   *
   * @param context
   */
  protected PreCheckResult preCheck(TableMigrateExecuteContext context) {
    return checkCurrentState(context);
  }

  protected PreCheckResult checkCurrentState(TableMigrateExecuteContext context) {
      // æ£æ¥å½åç¶ææ¯å¦ç¬¦åé¢æï¼æé æ£æ¥ç»æ
  }

  /**
   * æ¹åå½åæ§è¡ä¸ä¸æç¶æ, ä¸åå¶ä»çä¸å¡æä½
   *
   * @param context
   * @param nextState
   */
  private void transit(TableMigrateExecuteContext context, TableMigrateState nextState) {
    TableMigrateTask task = context.getTableMigrateTask();
    task.setState(nextState.getState().getValue());
    context.updateTableMigrateTask(task);
    context.setCurrentState(nextState);
  }
  
  protected abstract void doForward(TableMigrateExecuteContext context);

  /**
   * åæ»æä½
   *
   * &lt;p&gt;éè¦ä¿è¯å¹ç­ï¼å¦æåä¸ªåæ»æä½å¤±è´¥ï¼å¯ä»¥éå¤æ§è¡
   *
   * @param context
   */
  protected abstract void doRollback(TableMigrateExecuteContext context);

  /**
   * æ§è¡¨æ´å
   *
   * @param context
   * @param forward true-è¿ç§»åºæ¯ï¼æ§è¡¨å åç¼; false-åæ»åºæ¯ï¼æ§è¡¨å é¤åç¼
   */
  protected void renameOldTableNames(
      TableMigrateExecuteContext context, boolean forward, boolean ignoreExited) {
    context.renameOldTableNames(forward, ignoreExited);
  }

  /**
   * å é¤æ°è¡¨
   *
   * &lt;p&gt;æ°è¡¨çå é¤ï¼æå¥½ä¸è¦å±ç¨è¿ä¸ªæ¹æ³
   *
   * @param context
   */
  protected void deleteNewTables(TableMigrateExecuteContext context) {
    context.deleteTables(true);
  }

  /** åç½®æ ¡éªç»æ */
  @Data
  @AllArgsConstructor
  public static class PreCheckResult {
    /** ä¸­æ­ï¼éè¦åæ» */
    public static final int ABORT = -1;

    /** æ ¡éªéè¿ */
    public static final int PASS = 0;

    /** æ ¡éªä¸éè¿ï¼ä¿æåæç¶æ */
    public static final int NOT_PASS = 1;

    private int code;

    private String msg;

    public static PreCheckResult buildPass() {
      return new PreCheckResult(PASS, null);
    }

    public boolean isPass() {
      return this.code == PASS;
    }
  }
}
</code></pre>
<h3 id="ç»ææ½è±¡ç±»">ç»ææ½è±¡ç±»</h3>
<pre><code class="language-TypeScript">public abstract class AbstractFinalState implements TableMigrateState {
  @Override
  public String forward(TableMigrateExecuteContext context) {
    return "å½åç¶æã" + getState().getValue() + " " + getState().getDes() + "ãå·²æ¯ç»æï¼ä¸è½è¿è¡ä¸ä¸æ­¥æä½";
  }

  @Override
  public String rollback(TableMigrateExecuteContext context) {
    return "å½åç¶æã" + getState().getValue() + " " + getState().getDes() + "ãå·²æ¯ç»æï¼ä¸è½è¿è¡æ¤éæä½";
  }

  @Override
  public TableMigrateState getNextState() {
    throw new BizException("å½åç¶æ" + getState().getValue() + "å·²æ¯ç»æï¼æ²¡æåç»­ç¶æå¯è·³è½¬");
  }

  @Override
  public TableMigrateState getRollbackState() {
    throw new BizException("å½åç¶æ" + getState().getValue() + "å·²æ¯ç»æï¼æ²¡æåç»­æ¤éæå¯è·³è½¬");
  }
}
</code></pre>
<h3 id="åå§">åå§</h3>
<pre><code class="language-TypeScript">public class MigrateInitState extends AbstractMigrateState {
  @Override
  protected void doForward(TableMigrateExecuteContext context) {
    TableMigrateTask task = context.getTableMigrateTask();
    if (task.getOldSchemaId().equals(task.getNewSchemaId())) {
      throw new BizException("è¿ç§»ååçååºä½idç¸å");
    }

    // 1. æ§è¡¨æ´å, ç´æ¥é»æ­¢åç»­çåæ´
    // å½æ¡£ä¸å½±åRENAME
    renameOldTableNames(context, true, false);

    // 2. åå»ºDTSä»»å¡å¹¶ååå°taskå­æ®µ
    // åå»ºå¤±è´¥åç´æ¥æå¼å¸¸ï¼åæ»
    // æ­¤å¤DTSä»»å¡æ¯ç´æ¥æäº¤æ§è¡çï¼å¹¶ä¸è½ç¡®å®å½åå®éæ¯åªä¸ªç¶æï¼å æ­¤ç¶æçç©º
    context.createInstanceAndConfigureDtsJob();
  }
  
  @Override
  protected void doRollback(TableMigrateExecuteContext context) {
    // åå§æåæ»æ¶ï¼æ§è¡¨å¯è½è¿æ²¡ææ´å
    renameOldTableNames(context, false, true);
  }

  @Override
  public TableMigrateStateEnum getState() {
    return TableMigrateStateEnum.INIT;
  }

  @Override
  public TableMigrateState getNextState() {
    return new MigrateProcessingState();
  }

  @Override
  public TableMigrateState getRollbackState() {
    return new MigrateFailedState();
  }
}
</code></pre>
<h3 id="è¿ç§»ä¸­">è¿ç§»ä¸­</h3>
<pre><code class="language-TypeScript">public class MigrateProcessingState extends AbstractMigrateState {

  /** DTS-æªåå§åçç¶æ */
  private static final Set&lt;String&gt; DTS_NOT_INIT =
      Sets.newHashSet(
          DtsJobStatusEnum.NOT_STARTED.getCode(), DtsJobStatusEnum.NOT_CONFIGURED.getCode());

  /** DTS-å¤çä¸­çç¶æ */
  private static final Set&lt;String&gt; DTS_PROCESSING =
      Sets.newHashSet(
          DtsJobStatusEnum.PRECHECKING.getCode(),
          DtsJobStatusEnum.PRECHECK_PASS.getCode(),
          DtsJobStatusEnum.INITIALIZING.getCode(),
          DtsJobStatusEnum.SYNCHRONIZING.getCode(),
          DtsJobStatusEnum.MIGRATING.getCode(),
          DtsJobStatusEnum.SUSPENDING.getCode(),
          DtsJobStatusEnum.MODIFYING.getCode(),
          DtsJobStatusEnum.RETRYING.getCode(),
          DtsJobStatusEnum.UPGRADING.getCode(),
          DtsJobStatusEnum.DOWNGRADING.getCode(),
          DtsJobStatusEnum.LOCKED.getCode());

  /** DTS-å¤±è´¥çç¶æ */
  private static final Set&lt;String&gt; DTS_FAILED =
      Sets.newHashSet(
          DtsJobStatusEnum.PRECHECK_FAILED.getCode(),
          DtsJobStatusEnum.INITIALIZE_FAILED.getCode(),
          DtsJobStatusEnum.FAILED.getCode(),
          DtsJobStatusEnum.MIGRATION_FAILED.getCode());

  @Override
  public PreCheckResult preCheck(TableMigrateExecuteContext context) {
    checkCurrentState(context);
    // æ ¡éªDTSä»»å¡å·²å®æ
    TableMigrateTask task = context.getTableMigrateTask();
    DescribeDtsJobDetailResponse dtsJobDetailResponse = context.queryDtsMigJob();
    if (dtsJobDetailResponse == null || dtsJobDetailResponse.getBody() == null) {
      return new PreCheckResult(
          PreCheckResult.NOT_PASS,
          String.format(
              "DTSä»»å¡ç»ææ¥è¯¢å¤±è´¥, è¿åç»æä¸ºç©ºãinstanceId=%s, jobId=%s",
              task.getDtsInstanceId(), task.getDtsJobId()));
    }
    DescribeDtsJobDetailResponseBody responseBody = dtsJobDetailResponse.getBody();
    if (BooleanUtils.isNotTrue(responseBody.getSuccess())) {
      return new PreCheckResult(
          PreCheckResult.NOT_PASS,
          String.format(
              "DTSä»»å¡ç»ææ¥è¯¢å¤±è´¥, æ¥å£è°ç¨ç»æä¸ºå¤±è´¥ãinstanceId=%s, jobId=%s",
              task.getDtsInstanceId(), task.getDtsJobId()));
    }
    DtsJobStatusEnum dtsJobStatusEnum = DtsJobStatusEnum.getByCode(responseBody.getStatus());
    if (dtsJobStatusEnum == null) {
      return new PreCheckResult(
          PreCheckResult.NOT_PASS,
          String.format(
              "DTSä»»å¡ç¶æéæ³ï¼è¯·ç¨åéè¯ãinstanceId=%s, jobId=%s, é¿éäºç¶æ=%s",
              task.getDtsInstanceId(), task.getDtsJobId(), responseBody.getStatus()));
    }
    task.setDtsStatus(dtsJobStatusEnum.getCode());
    if (DTS_NOT_INIT.contains(dtsJobStatusEnum.getCode())) {
      return new PreCheckResult(
          PreCheckResult.NOT_PASS,
          String.format(
              "DTSä»»å¡ç¶æå¼å¸¸ï¼å°æªåå§åãinstanceId=%s, jobId=%s, é¿éäºç¶æ=%s",
              task.getDtsInstanceId(), task.getDtsJobId(), responseBody.getStatus()));
    }
    if (DTS_PROCESSING.contains(dtsJobStatusEnum.getCode())) {
      return new PreCheckResult(
          PreCheckResult.NOT_PASS,
          String.format(
              "DTSä»»å¡ä»å¨å¤çä¸­ãinstanceId=%s, jobId=%s, é¿éäºç¶æ=%s",
              task.getDtsInstanceId(), task.getDtsJobId(), responseBody.getStatus()));
    }
    if (DTS_FAILED.contains(dtsJobStatusEnum.getCode())) {
      return new PreCheckResult(
          PreCheckResult.ABORT,
          String.format(
              "DTSä»»å¡æ§è¡å¤±è´¥ãinstanceId=%s, jobId=%s, é¿éäºç¶æ=%s",
              task.getDtsInstanceId(), task.getDtsJobId(), responseBody.getStatus()));
    }
    if (StringUtils.equals(DtsJobStatusEnum.FINISHED.getCode(), dtsJobStatusEnum.getCode())) {
      return PreCheckResult.buildPass();
    }
    return new PreCheckResult(
        PreCheckResult.NOT_PASS,
        String.format(
            "DTSä»»å¡ç¶æéæ³ãinstanceId=%s, jobId=%s, é¿éäºç¶æ=%s",
            task.getDtsInstanceId(), task.getDtsJobId(), responseBody.getStatus()));
  }

  @Override
  protected void doForward(TableMigrateExecuteContext context) {
    // å·²å¨æ ¡éªæ¶æ´æ°ä»»å¡ç¶æï¼å¹¶æ ¹æ®DTSæ§è¡ç¶æå¤æ­è¦ä¸è¦åæ»

    // 1. å°è¿ç§»åçè¡¨ï¼æç§åè¡¨çç¶æè¿è¡å½æ¡£

    // 2. åå¥è¿ç§»åçè¡¨ç»è®¡ä¿¡æ¯
    context.updateDestTableInfo();
  }

  @Override
  protected void doRollback(TableMigrateExecuteContext context) {
    // 1. å°è¯ä¸­æ­¢DTSä»»å¡ï¼å¯¹å·²å®æçDTSä»»å¡è°ç¨ä¸ä¼æå¼å¸¸

    // 2. æ°è¡¨å é¤
    deleteNewTables(context);

    // 3. æ§è¡¨åç§°è¿å
    renameOldTableNames(context, false, false);
  }

  @Override
  public TableMigrateStateEnum getState() {
    return TableMigrateStateEnum.PROCESSING;
  }

  @Override
  public TableMigrateState getNextState() {
    return new MigrateNeedSwitchState();
  }

  @Override
  public TableMigrateState getRollbackState() {
    return new MigrateFailedState();
  }
}
</code></pre>
<h3 id="è¿ç§»å®æå¾åæ¢ååºä½">è¿ç§»å®æå¾åæ¢ååºä½</h3>
<pre><code class="language-TypeScript">public class MigrateNeedSwitchState extends AbstractMigrateState {

  @Override
  protected void doForward(TableMigrateExecuteContext context) {
    // åè¡¨è·¯ç±åæ¢
    context.switchRoute(
        context.getTableMigrateTask().getOldSchemaId(),
        context.getTableMigrateTask().getNewSchemaId());
  }

  @Override
  protected void doRollback(TableMigrateExecuteContext context) {
    // 1. æ°è¡¨å é¤
    deleteNewTables(context);

    // 2. æ§è¡¨åç§°è¿å
    renameOldTableNames(context, false, false);

    // 3. åè¡¨åè·¯ç±æ¢å¤
    // å¯è½å·²ç»å¨forwardæ¶åè¿ï¼å æ­¤ä¹åå¤å
    context.switchRoute(
        context.getTableMigrateTask().getNewSchemaId(),
        context.getTableMigrateTask().getOldSchemaId());
  }

  @Override
  public TableMigrateStateEnum getState() {
    return TableMigrateStateEnum.NEED_SWITCH;
  }

  @Override
  public TableMigrateState getNextState() {
    return new MigrateSwitchedState();
  }

  @Override
  public TableMigrateState getRollbackState() {
    return new MigrateFailedState();
  }
}
</code></pre>
<h3 id="ååºä½å·²åæ¢å¾å é¤æ§è¡¨">ååºä½å·²åæ¢å¾å é¤æ§è¡¨</h3>
<pre><code class="language-TypeScript">public class MigrateSwitchedState extends AbstractMigrateState {

  @Override
  protected void doForward(TableMigrateExecuteContext context) {
    // å é¤æ§è¡¨
    context.deleteTables(false);
  }

  @Override
  protected void doRollback(TableMigrateExecuteContext context) {
    // 1. æ°è¡¨å é¤
    deleteNewTables(context);

    // 2. æ§è¡¨åç§°è¿å
    renameOldTableNames(context, false, false);

    // 3. åè¡¨åè·¯ç±æ¢å¤
    context.switchRoute(
        context.getTableMigrateTask().getNewSchemaId(),
        context.getTableMigrateTask().getOldSchemaId());
  }

  @Override
  public TableMigrateStateEnum getState() {
    return TableMigrateStateEnum.SWITCHED;
  }

  @Override
  public TableMigrateState getNextState() {
    return new MigrateFinishState();
  }

  @Override
  public TableMigrateState getRollbackState() {
    return new MigrateFailedState();
  }
}
</code></pre>
<h3 id="è¿ç§»å®æ">è¿ç§»å®æ</h3>
<pre><code class="language-Java">public class MigrateFinishState extends AbstractFinalState {
  @Override
  public TableMigrateStateEnum getState() {
    return TableMigrateStateEnum.FINISH;
  }
}
</code></pre>
<h3 id="è¿ç§»å¤±è´¥">è¿ç§»å¤±è´¥</h3>
<pre><code class="language-Java">public class MigrateFailedState extends AbstractFinalState {
  @Override
  public TableMigrateStateEnum getState() {
    return TableMigrateStateEnum.FAILED;
  }
}
</code></pre>
<h2 id="æä½æµç¨">æä½æµç¨</h2>
<ol>
<li>
<p>åå»ºè¿ç§»ä»»å¡TableMigrateTask</p>
</li>
<li>
<p>éè¿å·¥åç±»ï¼ä½¿ç¨ä»»å¡idåå»ºåå«è¿ç§»ä»»å¡TableMigrateTaskçè¿ç§»ä¸ä¸æTableMigrateExecuteContext</p>
</li>
<li>
<p>è°ç¨TableMigrateExecuteContextçforward()æ¨è¿ç¶æãrollback()åæ»ç¶æ</p>
</li>
</ol>
<h2 id="æ¥è¯¢ç¸å³åè½å®ç°">æ¥è¯¢ç¸å³åè½å®ç°</h2>
<h3 id="dtsä»»å¡åè¡¨æ¥è¯¢">DTSä»»å¡åè¡¨æ¥è¯¢</h3>
<p>å ä¸ºå·²ç»æDTSçç¸å³å­æ®µæä¹åäºï¼å¯ä»¥éè¿ä¸å¡ç³»ç»ç¸å³çè¿ç§»ä»»å¡è¡¨å®ç°åé¡µæ¥è¯¢ã</p>
<p>ä¸è¿å¨âè¿ç§»ä¸­âè·³è½¬å°âè¿ç§»å®æå¾åæ¢ååºä½âçè¿ç¨ä¸­ï¼DTSä¹ä¼ç»åå¤ä¸ªç¶æï¼å¸åçæPrecheckingãMigratingãFinishedç­ï¼è§<a href="https://next.api.aliyun.com/document/Dts/2020-01-01/DescribeDtsJobDetail" target="_blank" rel="noopener nofollow">DescribeDtsJobDetail_æ°æ®ä¼ è¾_APIææ¡£</a>çStatuså­æ®µè¯´æï¼ï¼å¯ä»¥éè¿æ¥å£è·åææ°çç¶æå¹¶åå¥è¿ç§»ä»»å¡è¡¨ã</p>
<h3 id="å¦ä½æ¥è¯¢å¾è¿ç§»çè¡¨">å¦ä½æ¥è¯¢å¾è¿ç§»çè¡¨ï¼</h3>
<p>åé¡¾ä¸ä¸ï¼è¦è¿ç§»çè¡¨åä»¥ä¸ä¸ç§å½¢å¼ï¼</p>
<ul>
<li>
<p>åç¼æ¯å¬å¸idï¼å¦table_companyId</p>
</li>
<li>
<p>åç¼æ¯ å¬å¸_å¹´ä»½ï¼å¦table_company_year</p>
</li>
<li>
<p>åç¼æ¯ä¸å¡idï¼å¦table_bizId</p>
</li>
</ul>
<p>å¯¹äºåä¸ä¸ªåç¼ï¼ä»¥companyId=123ä¸ºä¾ï¼ç¬¬ä¸ãä¸ç§è¡¨é½å¯ä»¥ç²¾ç¡®å¹éï¼</p>
<ul>
<li>
<p>ç¬¬ä¸ç§è¡¨æ¯ä¸ªå¬å¸åªæä¸å¼ ï¼æ¯å¦table_a_123ãtable_b_123ï¼</p>
</li>
<li>
<p>ç¬¬ä¸ç§è¡¨æ¯ä¸ªbizIdåä¸ä¸ªå¬å¸åªæä¸å¼ ï¼æ¯å¦bizIdå¯ä»¥å1ã2ï¼é£ä¹ä¼å­å¨table_c_1ãtable_c_2ãtable_d_1ãtable_d_2ï¼å¹¶ä¸ï¼bizIdæ¯æéçï¼å¯ä»¥ä»ä¸å¼ bizId_tableè¡¨è·åææå¯éå¼ã</p>
</li>
<li>
<p>å¯¹äºç¬¬äºç§è¡¨yearçåå¼èå´ï¼è½ç¶å¯ä»¥ç±»ä¼¼bizIdä¸æ ·å»æ¾ï¼ä½æ¯å¹¶æ²¡æç´æ¥çå³ç³»è¡¨ã</p>
</li>
</ul>
<p>ææ³å°äºä¸¤ç§æ¹æ¡ï¼æåéæ©äºç¬¬äºç§ã</p>
<h4 id="show-tables-likeæ¥è¯¢æå®åç¼">SHOW TABLES LIKEæ¥è¯¢æå®åç¼</h4>
<p>è¿æ¯æåèèå°çæ¹æ¡ï¼æ¯è¾ç´æ¥ï¼èä¸å¨å¼åãæµè¯ç¯å¢ä¸­è¿è¡è¯å¥½ãä½æ¯å¨çº¿ä¸å°±ä¸è¡äºï¼å°ææè¡¨æ¥è¯¢ä¸æ¬¡è¦æ°åéï¼è°ç¨æ©å·²è¶æ¶ãææ³è¿åºè¯¥åçº¿ä¸ç¯å¢è¡¨æ°éè¿å¤å¯¼è´åæ°æ®è·ååæ¢æå³ï¼æ¯æ¬¡æ¥è¯¢éè¦ä¸ç¾msï¼ç´¯è®¡èæ¶é¿è¾¾æ°åéã</p>
<h4 id="databasemetadataä¸æ¬¡æ§è·åææè¡¨åè¿æ»¤">DatabaseMetaDataä¸æ¬¡æ§è·åææè¡¨åè¿æ»¤</h4>
<p>å¯ä»¥éè¿DataSourceçåæ°æ®ï¼ä¸æ¬¡æ§è·åæ°æ®æºå¯¹åºåºçææçè¡¨ï¼åå°è¡¨åè¿è¡è¿æ»¤ãç»è¿æµè¯ï¼10Wçº§æ°æ®è·åå¨é¨è¡¨çæ¶é´å¨3~7Sä¹é´ï¼åæ¹æ¡ä¸ç¸æ¯å¿«å¾å¤ã</p>
<p>ä»¥ä¸ä»£ç çæ®µå±ç¤ºäºå¦ä½è·åææè¡¨åï¼å¿½ç¥å¼å¸¸å¤çã</p>
<pre><code class="language-Java">String physicalSchemaName = dataSourceHolder.getPhysicalSchemaName(logicalSchemaName);
HikariDataSource dataSource = dataSourceHolder.getDataSourceByPhysicalSchemaName(physicalSchemaName);
try (Connection connection = dataSource.getConnection()) {
    DatabaseMetaData metaData = connection.getMetaData();
    ResultSet catalogs = metaData.getCatalogs();
    while (catalogs.next()) {
        String tableCat = catalogs.getString("TABLE_CAT");
        if (!StringUtils.equals(tableCat, physicalSchemaName)) {
            // å¤æ­åºåæ¯å¦ä¸è´ãå¦æå¤ä¸ªåºå®éä¸å¨åä¸ä¸ªRDSå®ä¾ï¼åæ°æ®å®éä¸æ¯è¿äºåºçï¼èéåä¸ªåºç
            continue;
        }

        // è·åæå®æ°æ®åºä¸­çææè¡¨å
        ResultSet tableResultSet =
            metaData.getTables(physicalSchemaName, null, "%", new String[] {"TABLE"});
        int count = 0;
        while (tableResultSet.next()) {
          count++;
          String physicalTableName = tableResultSet.getString("TABLE_NAME");
          // ç¡®å®æ¯å¦æ¯è¦æ¥çè¡¨ï¼å¤æ­é»è¾æ­¤å¤çç¥ãæ³¨1ã
         }
        LoggerUtils.info("æ¬æ¬¡å±æ¥è¯¢äº" + count + "ä¸ªè¡¨çåæ°æ®");
      }
      LoggerUtils.info(
          "è·å" + physicalSchemaName + "åºçææè¡¨åæ°æ®æ»èæ¶ï¼" + (System.currentTimeMillis() - t1) + "ms");
    } catch (SQLException e) {
      LoggerUtils.error("è·åååºåæ°æ®å¤±è´¥, åçSQLå¼å¸¸", e);
      throw new BizException("è·åååºåæ°æ®å¤±è´¥, åçSQLå¼å¸¸", e);
    }
}
</code></pre>
<p>å¯¹æ°æ®åºä¸­æ¯ä¸ªè¡¨å¤å®å®æ¯å¦æ¯å½åå¬å¸çè¡¨ï¼å¯¹äºç¬¬ä¸ãä¸ç§è¡¨ï¼å¯ä»¥å°åèæ¾å°ä¸ä¸ªHashSetä¸­ï¼æ¯æ¬¡å¾ªç¯æ¶å¯¹æ¯ï¼å¯¹äºç¬¬äºç§è¡¨ï¼å­ç¬¦ä¸²åç¼å¹éæ çè¦è±å¤§éçæ¶é´ã</p>
<p>ä¸ºäºå éåç¼å¹éï¼å¯ä»¥ä½¿ç¨ç»å¸çæ°æ®ç»æââåç¼å¹éæ ãåç¼å¹éæ çä»£ç å¦ä¸ï¼</p>
<pre><code class="language-Java">public class StringPrefixTrie {
  private final Node root = new Node();

  static class Node {
    boolean isEnd;
    Map&lt;Character, Node&gt; children = new HashMap&lt;&gt;();
  }

  /**
   * å¢å ä¸ä¸ªå¾å¹éçæ¨¡å¼
   *
   * @param pattern
   */
  public void addPattern(String pattern) {
    Node current = root;
    for (char c : pattern.toCharArray()) {
      current = current.children.computeIfAbsent(c, k -&gt; new Node());
    }
    current.isEnd = true;
  }

  /**
   * æ¯å¦æ»¡è¶³åç¼å¹é
   *
   * @param str
   * @return
   */
  public String match(String str) {
    Node current = root;
    for (int i = 0; i &lt; str.length(); i++) {
      current = current.children.get(str.charAt(i));
      if (current == null) {
        // æ²¡æå¹éå°ä»»ä½åç¼
        return null;
      }
      if (current.isEnd) {
        // è¿åå¹éå°çä»»æä¸ä¸ªåç¼
        return str.substring(0, i + 1);
      }
    }
    return null;
  }
}
</code></pre>
<p>å¯¹ææéè¦åç¼å¹éçè¡¨çåç¼è°ç¨addPattern()ï¼å¨å¾ªç¯ä¸­åå¤æ­æ¯å¦æ»¡è¶³åç¼å¹éï¼åå¤æ­ç²¾åå¹éå³å¯ã</p>
<h2 id="åç»­è§å">åç»­è§å</h2>
<ol>
<li>
<p>æ¹éè¿ç§»åè½ï¼å°è¿ç§»æ¹éåãèªå¨åï¼</p>
<ol>
<li>
<p>æ¹éæåå¬å¸ï¼å¤æ­æ¯å¦éè¦è¿ç§»ãè¿ç§»ææ¬ãçæ³æåµä¸ï¼æ°æ®éå°ä½è¡¨å¤çå¬å¸ï¼æ¯è¿ç§»å°å¶ä»åºçæä½³åéï¼å¤§å¤§éä½æºåºçè¡¨éåèçº¦äºå¤å¶æ°æ®çæ¶é´</p>
</li>
<li>
<p>å¤ä¸ªå¬å¸idæäº¤ãåå»ºä»»å¡ãç¶ææµè½¬</p>
</li>
</ol>
</li>
<li>
<p>èªå¨æ ¡éªè¿ç§»æ¯å¦æå</p>
</li>
</ol>


</div>
<div id="MySignature" role="contentinfo">
    <div id="AllanboltSignature">
        <p id="PSignature" style="border-top: #e0e0e0 1px dashed; border-right: #e0e0e0 1px dashed; border-bottom: #e0e0e0 1px dashed; border-left: #e0e0e0 1px dashed;
            padding-top: 10px;padding-right: 10px;padding-bottom: 10px;padding-left: 60px;
            font-family: å¾®è½¯éé»; font-size:11px;">
            <br>
            ä½èï¼<a href="http://www.cnblogs.com/wuyuegb2312" target="_blank">äºå²³</a>
            <br>
            åºå¤ï¼<a href="http://www.cnblogs.com/wuyuegb2312" target="_blank">http://www.cnblogs.com/wuyuegb2312</a>
            <br>
            å¯¹äºæ é¢æªæ æ³¨ä¸ºâè½¬è½½âçæç« åä¸ºååï¼å¶çæå½ä½èææï¼æ¬¢è¿è½¬è½½ï¼ä½æªç»ä½èåæå¿é¡»ä¿çæ­¤æ®µå£°æï¼ä¸å¨æç« é¡µé¢ææ¾ä½ç½®ç»åºåæè¿æ¥ï¼å¦åä¿çè¿½ç©¶æ³å¾è´£ä»»çæå©ã
        </p>
    ã</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.5104166666666666" data-date-updated="2026-02-04 10:49">2026-02-03 22:34</span>&nbsp;
<a href="https://www.cnblogs.com/wuyuegb2312">äºå²³</a>&nbsp;
éè¯»(<span id="post_view_count">78</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19571685);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19571685', targetLink: 'https://www.cnblogs.com/wuyuegb2312/p/19571685', title: 'DTSæä¸å¡åºæ¯æ¹éè¿ç§»é¿éäºMySQLè¡¨å®æï¼ä¸ï¼ï¼è¿ç§»ç®¡çå¹³å°è®¾è®¡ä¸å®ç°' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
        </channel>
        </rss>