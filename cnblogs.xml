<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åå®¢å­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2026-02-06T01:29:52.777Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åå®¢å­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ FastAPIå®æï¼ç¨æå è½½ä¸Lifespanä¼éç®¡çéåä¾èµ ]]></title>
    <link>https://www.cnblogs.com/ymtianyu/p/19582659</link>
    <guid>0a24af52e0c55ef962ccabd1873c3831</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ymtianyu/p/19582659" title="åå¸äº 2026-02-06 09:28">
    <span role="heading" aria-level="2">FastAPIå®æï¼ç¨æå è½½ä¸Lifespanä¼éç®¡çéåä¾èµ</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        æ¬æéå¯¹FastAPIåºç¨å¨é¨ç½²æçå¾ç­å¤§æ¨¡åæ¶éå°çå¯å¨æ¢ãèµæºå ç¨é«é®é¢ï¼æ·±å¥åæäºåºç¨å¯å¨ï¼å·å¯å¨ï¼ä¸è¯·æ±å¤çï¼ç­è·¯å¾ï¼çåºå«ãæ ¸å¿ä»ç»äºå©ç¨æå è½½æ¨¡å¼ä¸Lifespanäºä»¶ç®¡çä¸ä¸æï¼å°èæ¶çåå§åæä½ä»å¯å¨è¿ç§»å°é¦æ¬¡è¯·æ±æ¶æè¿è¡å¼æ­¥é¢ç­ï¼ä»èå®ç°æå¡çå¿«éå¯å¨ä¸é«æèµæºå©ç¨ï¼å¹¶æä¾äºè¯¦ç»çä»£ç ç¤ºä¾ä¸é¿åæåã
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h2>ä½ çFastAPIæå¡ï¼æ¯ä¸æ¯ä¹å¨å¯å¨æ¶"è´éè·æ­¥"ï¼</h2>
<p>ææ²¡æéå°è¿è¿ç§åºæ¯ï¼ä½ å´å²å²å°åå®äºä¸ä¸ªæçå¾AIæå¡çæ¥å£ï¼æ¬å°æµè¯ç¾æ»æ»ãç»æä¸ä¸æå¡å¨ï¼<code style="color: rgba(186, 55, 42, 1)">docker build</code> å®ï¼<code style="color: rgba(186, 55, 42, 1)">docker run</code> çé£ä¸ç¬é´ï¼ä½ æè§ä»¿ä½è¿äºä¸ä¸ªä¸çºªââæå¡æä¹è¿æ²¡èµ·æ¥ï¼</p>
<p>ç¶åçæ¥å¿ï¼å¥½å®¶ä¼ï¼å¡å¨<code style="color: rgba(186, 55, 42, 1)">Loading model...</code> è¿ä¸æ­¥äºãæ¨¡åå¥½å ä¸ªGï¼å è½½æ¢å¦çãæ´ç³çæ¯ï¼ä½ çK8så¥åº·æ£æ¥å¯è½å ä¸ºå¯å¨è¶æ¶ï¼åå¤ææäºè¿å¨"ç­èº«"çPodï¼å¯¼è´æå¡æ°¸è¿æ æ³å°±ç»ªð¯ã</p>
<p>ä»å¤©ï¼å±ä»¬å°±èèæä¹ç»FastAPIæå¡"åè´"ï¼è®©å¯å¨é£å¿«ï¼åæ¶åè½ä¼éå°ç®¡çé£äº"éåæ­¦å¨"ï¼æ¯å¦å¤§æ¨¡åãå¤§æ°æ®è¿æ¥ï¼ãæ ¸å¿å°±ä¿©æ¦å¿µï¼<strong style="color: rgba(186, 55, 42, 1)">æå è½½</strong>å<strong style="color: rgba(186, 55, 42, 1)">Lifespanäºä»¶</strong>ã</p>
<hr style="border: none; height: 1px; background: linear-gradient(90deg, rgba(0, 0, 0, 0), rgba(52, 152, 219, 1), rgba(0, 0, 0, 0)); margin: 20px 0">
<h2>ð¯ åææ¸é®é¢ï¼å¯å¨ vs è¿è¡æ¶</h2>
<p>å±ä»¬å¾ååæ¸ä¸¤ä¸ªé¶æ®µï¼è¿å°±åé¤åå¼ä¸ï¼</p>
<div>
<p>ð¥ <strong>å·å¯å¨ï¼åºç¨å¯å¨ï¼</strong>ï¼ç¸å½äºé¤åç¬¬ä¸å¤©å¼ä¸ãä½ ä¸è½è®©å®¢äººå¨é¨å£ç­å¨å¸æææèé½åä¸éå°è¿æå¼é¨ãæä»¬çç®æ æ¯<strong style="color: rgba(186, 55, 42, 1)">è¶å¿«å¼é¨è¶å¥½</strong>ã</p>
<p>ð³ <strong>ç­è·¯å¾ï¼è¯·æ±å¤çï¼</strong>ï¼å®¢äººç¹ååï¼åå¨å¼å§çèãè¿æ¶åè¿½æ±çæ¯åéèçåºèéåº¦åè´¨éã</p>
</div>
<p>å¾å¤åå¼ï¼åæ¬å½åçæï¼ä¼æå è½½æ¨¡åè¿ç§"å¤è"å·¥ä½ï¼ç´æ¥æå¨å¨å±åééï¼å¨åºç¨å¯å¨æ¶æ§è¡ãç»æå°±æ¯"å¼ä¸"ä»ªå¼å·¨é¿æ æ¯ã</p>
<p>ä½ å¯è½ä¼é®ï¼"é£æä¸ç¨çæ¶åä¸å è½½ï¼ç¨çæ¶ååå è½½ï¼ä¸å°±è¡äºï¼"</p>
<p>Bingoï¼è¿å°±æ¯<strong style="color: rgba(186, 55, 42, 1)">æå è½½ï¼Lazy Loadingï¼</strong>çæ ¸å¿ææ³ï¼æèæ¶åå§åæ¨è¿å°ç¬¬ä¸æ¬¡çæ­£éè¦å®çæ¶åãä½å¨Webæå¡éï¼æä¹ä¼éå°å®ç°å®ï¼å¹¶ä¸ç®¡çå®ççå½å¨æå¢ï¼è¿å°±è½®å°<code style="color: rgba(186, 55, 42, 1)">lifespan</code>åºåºäºã</p>
<h2>ð¤ æ ¸å¿æ­¦å¨ï¼Lifespan äºä»¶ç®¡çå¨</h2>
<p>å¨FastAPIï¼å®éä¸æ¯èåçStarletteï¼ä¸­ï¼<code style="color: rgba(186, 55, 42, 1)">lifespan</code> æ¯ä¸ä¸ªä¸ä¸æç®¡çå¨ï¼å®è®©ä½ è½ç²¾ç¡®æ§å¶åºç¨<strong style="color: rgba(186, 55, 42, 1)">å¯å¨å</strong>å<strong style="color: rgba(186, 55, 42, 1)">å³é­å</strong>è¯¥åä»ä¹ã</p>
<p>å®æ¹ææ¡£å¯è½è®²å¾æç¹æ½è±¡ï¼ææä¸ªæ¯æ¹ï¼å®å°±åæ¯ä½ æå¡ç"ç§äººç®¡å®¶"ãæå¡ä¸çº¿åï¼<code style="color: rgba(186, 55, 42, 1)">startup</code>ï¼ï¼ç®¡å®¶å¸®ä½ é¢ç­æ¸¸æ³³æ± ãæå¼è±å­ç¯ï¼æå¡ä¸çº¿æ¶ï¼<code style="color: rgba(186, 55, 42, 1)">shutdown</code>ï¼ï¼ç®¡å®¶å¸®ä½ å³ç¯ãæ¾ææ³³æ± æ°´ï¼æ¶æ¾å¾å¹²å¹²ååã</p>
<p>éç¹æ¥äºï¼è¿ä¸ª"ç®¡å®¶"åºç°çæ¶é´ç¹ï¼æ¯ä½ æææ¥å£ç<code style="color: rgba(186, 55, 42, 1)">dependencies</code>é½è¦æ©ï¼è¿æå³çä½ å¯ä»¥å¨<code style="color: rgba(186, 55, 42, 1)">lifespan</code>éåå¤å¥½ä¸äº"å·¥å"æè"è¿æ¥æ± "ï¼ä½<strong style="color: rgba(186, 55, 42, 1)">ä¸ä¸å®éè¦ç«å»å è½½ææéåèµæº</strong>ã</p>
<pre class="language-python highlighter-hljs"><code>from contextlib import asynccontextmanager
from fastapi import FastAPI
import asyncio

# è¿æ¯ä¸ä¸ªåç"éåæ¨¡å"
class HeavyModel:
    def __init__(self):
        self.loaded = False
    
    async def load(self):
        print("å¼å§å è½½æ¨¡å...è¿å¯è½éè¦å¾ä¹")
        await asyncio.sleep(5) # æ¨¡æå è½½èæ¶
        self.loaded = True
        print("æ¨¡åå è½½å®æ¯ï¼")
    
    async def predict(self, text: str):
        if not self.loaded:
            await self.load() # æå è½½åçå¨è¿éï¼
        return f"é¢æµç»æ for: {text}"

@asynccontextmanager
async def lifespan(app: FastAPI):
    # Startup: è¿éæä»¬åªåå§å"æ¨¡åå®¹å¨"ï¼ä½ä¸å è½½æ¨¡åæ¬èº«
    print("åºç¨å¯å¨ä¸­...")
    model_container = {"model": HeavyModel()}
    app.state.model = model_container["model"]
    
    yield model_container # è¿éçmodel_containerä¼æ³¨å¥å°è¯·æ±ç`app.state`ä¸­
    
    # Shutdown: æ¸çå·¥ä½ï¼æ¯å¦å³é­æ¨¡åãéæ¾GPUåå­ç­
    print("åºç¨å³é­ä¸­ï¼æ§è¡æ¸ç...")
    app.state.model = None

app = FastAPI(lifespan=lifespan)

@app.get("/generate")
async def generate(prompt: str):
    # é¦æ¬¡è¯·æ±æ¶ï¼æä¼çæ­£è§¦åæ¨¡åå è½½
    result = await app.state.model.predict(prompt)
    return {"result": result}</code></pre>
<p>çä¸é¢ä»£ç ï¼<code style="color: rgba(186, 55, 42, 1)">HeavyModel</code>å¨<code style="color: rgba(186, 55, 42, 1)">lifespan</code>çå¯å¨é¶æ®µåªæ¯è¢«<strong style="color: rgba(186, 55, 42, 1)">å®ä¾å</strong>äºï¼å¹¶æ²¡æè°ç¨èæ¶ç<code style="color: rgba(186, 55, 42, 1)">load()</code>æ¹æ³ãçæ­£çå è½½åçå¨ç¬¬ä¸ä¸ªè¯·æ±è°ç¨<code style="color: rgba(186, 55, 42, 1)">predict</code>æ¶ã</p>
<p><strong style="color: rgba(186, 55, 42, 1)">è¿æ ·åçå¥½å¤æ¯ä»ä¹ï¼</strong></p>
<div>
<p>1ï¸â£ <strong>å¯å¨éåº¦é£èµ·</strong>ï¼ä½ çæå¡å ä¹å¯ä»¥ç§çº§å°±ç»ªï¼éè¿å¥åº·æ£æ¥ã</p>
<p>2ï¸â£ <strong>èµæºæéä½¿ç¨</strong>ï¼å¦ææä¸ªPodä¸ç´æ²¡æ¶å°ç¸å³è¯·æ±ï¼æ¨¡åå°±æ°¸è¿ä¸ä¼å è½½ï¼èçäºå®è´µçGPUåå­ã</p>
<p>3ï¸â£ <strong>çå½å¨æå¯æ§</strong>ï¼ä½ ä¾ç¶å¨<code style="color: rgba(186, 55, 42, 1)">lifespan</code>çææ§ä¹ä¸­ï¼å¯ä»¥å¨å³é­æ¶ä¼éå°éæ¾èµæºã</p>
</div>
<h2>â ï¸ ä½æ¯ï¼å°å¿è¿ä¸ª"å¤©å"</h2>
<p>æå è½½è½å¥½ï¼ä½ç´æ¥ç¨å¨çäº§ç¯å¢ï¼å¯è½ä¼è®©ç¬¬ä¸ä¸ªç¨æ·æä¸º"å¤§å¤ç§"ãæ³è±¡ä¸ä¸ï¼ç¨æ·ç¬¬ä¸æ¬¡è¯·æ±ï¼è¦ç½å±ç­å¾æ¨¡åå è½½çå åç§ï¼ä½éªæå·®ï¼èä¸è¿ä¸ªè¯·æ±å¾å¯è½è¶æ¶ã</p>
<p>æä»¥ï¼æ´ä¼ççäº§çº§å®è·µæ¯ï¼<strong style="color: rgba(186, 55, 42, 1)">æå è½½ + å¼æ­¥é¢ç­</strong>ã</p>
<p>æä»¬å¯ä»¥å¨<code style="color: rgba(186, 55, 42, 1)">lifespan</code>å¯å¨å®æåï¼<strong style="color: rgba(186, 55, 42, 1)">ææå°ãå¼æ­¥å°</strong>å¼å§å è½½æ¨¡åï¼èä¸æ¯é»å¡å¯å¨è¿ç¨ã</p>
<pre class="language-python highlighter-hljs"><code>@asynccontextmanager
async def lifespan(app: FastAPI):
    # Startup
    print("åºç¨å¯å¨ä¸­...")
    model = HeavyModel()
    app.state.model = model

    # **å³é®æå·§ï¼åå»ºä¸ä¸ªåå°ä»»å¡å¼æ­¥é¢ç­**
    async def _warm_up():
        try:
            await model.load()
            print("æ¨¡åé¢ç­å®æï¼")
        except Exception as e:
            print(f"æ¨¡åé¢ç­å¤±è´¥: {e}")

    # ä¸awaitï¼è®©å®åå°è¿è¡
    asyncio.create_task(_warm_up())

    yield
    # Shutdown
    print("åºç¨å³é­ä¸­...")</code></pre>
<p>è¿æ ·ï¼æå¡è½ç«å»å¯å¨å¹¶ååºå¥åº·æ£æ¥ãæ¨¡åå¨åå°é»é»å è½½ï¼å è½½å®æåæçæ­£æä¾é¢æµæå¡ãå¯¹äºå è½½æé´çè¯·æ±ï¼ä½ å¯ä»¥æ ¹æ®ä¸å¡å³å®æ¯è¿åä¸ä¸ª"æå¡é¢ç­ä¸­"çåå¥½æç¤ºï¼è¿æ¯ç¨éåè®©å¶ç­å¾ã</p>
<h2>ð§ æ´å·¥ç¨åçå°è£ä¸æ³¨æäºé¡¹</h2>
<p>å¨å®éé¡¹ç®ä¸­ï¼æä»¬ä¸ä¼æé»è¾å¨å<code style="color: rgba(186, 55, 42, 1)">lifespan</code>ä¸»å½æ°éãæçä¹ æ¯æ¯å°è£ä¸ä¸ª<code style="color: rgba(186, 55, 42, 1)">ModelManager</code>åä¾ç±»ï¼æ¥ç»ä¸ç®¡çå è½½ç¶æãéè¯åå¹¶åå®å¨ã</p>
<p>åè¯´å ä¸ªå®¹æç¿»è½¦çç¹ï¼</p>
<div>
<p>ð¯ <strong>å¹¶åè¯·æ±æ¶çéå¤å è½½</strong>ï¼å¦æç¬¬ä¸ä¸ªè¯·æ±Aè§¦åå è½½æ²¡å®ï¼è¯·æ±Båæ¥äºï¼è¦ç¡®ä¿ä¸ä¼åå§åä¸¤ä¸ªæ¨¡åå®ä¾æåå­æçãè®°å¾ç¨éï¼<code style="color: rgba(186, 55, 42, 1)">asyncio.Lock</code>ï¼æèæ£æ¥ç¶æåéã</p>
<p>ð¯ <strong>å¥åº·æ£æ¥çè®¾è®¡</strong>ï¼ä½ ç<code style="color: rgba(186, 55, 42, 1)">/health</code>ç«¯ç¹åºè¯¥åæ æå¡ççå®ç¶æãå¯ä»¥è®¾è®¡æï¼<code style="color: rgba(186, 55, 42, 1)">{"status": "warming_up"}</code>ï¼<code style="color: rgba(186, 55, 42, 1)">{"status": "ready"}</code>ãè¿æ ·K8sç<code style="color: rgba(186, 55, 42, 1)">readinessProbe</code>å¯ä»¥å¨æ¨¡åå°±ç»ªåæå¯¼å¥æµéã</p>
<p>ð¯ <strong>å³é­æ¶çä¼éç»æ­¢</strong>ï¼å¦ææ¨¡åæ­£å¨æ¨çï¼ç´æ¥å³é­å¯è½ä¼å¯¼è´GPUåå­æ³æ¼ææ°æ®éè¯¯ãå¨<code style="color: rgba(186, 55, 42, 1)">lifespan</code>ç<span style="color: rgba(186, 55, 42, 1)"><code>shutdown</code></span>é¶æ®µï¼æå¥½è®¾ç½®ä¸ä¸ªæ å¿ä½ï¼è®©æ­£å¨å¤ççè¯·æ±å®æï¼å¹¶æç»æ°è¯·æ±ã</p>
</div>
<hr style="border: none; height: 1px; background: linear-gradient(90deg, rgba(0, 0, 0, 0), rgba(52, 152, 219, 1), rgba(0, 0, 0, 0)); margin: 40px 0">
<h3>æåå°å¦ä¸å¥</h3>
<p>ææ¯éåæ²¡æé¶å¼¹ï¼æå è½½åé¢ç­ç­ç¥ä¹è¦æ ¹æ®ä½ çå·ä½åºæ¯æè¡¡ãå¦æä½ çæå¡è¦æ±ç¾åç¾ç¡®å®æ§ï¼æ¯å¦éèé£æ§ï¼ï¼å¯è½å°±éè¦å¨å¯å¨æ¶å¿åå è½½èæ¶ï¼ç¡®ä¿æå¡å®å¨å°±ç»ªãä½å¯¹äºå¤§å¤æ°AIæ¨¡åæå¡ãæ¨èç³»ç»ï¼<strong style="color: rgba(186, 55, 42, 1)">"å¿«éå¯å¨ï¼å¼æ­¥é¢ç­"</strong>ç»å¯¹æ¯æåé¨ç½²ä½éªåèµæºæççç¥å¨ã</p>
<p>å¸æè¿ç¯åäº«ï¼è½è®©ä½ ä¸æ¬¡é¨ç½²"å¤§å®¶ä¼"æ¶ï¼ä¸åæå¿èä¹±ãæ¯ç«ï¼è°ä¸æ³è®©èªå·±çæå¡æ¢è·å¾å¿«ï¼åçèµæºå¢ï¼</p>
<p>å¦æè§å¾æç¨ï¼å«å¿äºæ¶èä¸ä¸ï¼è¯´ä¸å®ä¸æ¬¡é¨ç½²åå°±å¾ç¿»åºæ¥ççãä½ å¨é¨ç½²éåæå¡æ¶è¿è¸©è¿åªäºåï¼æ¬¢è¿å¨è¯è®ºåºèèï¼å±ä»¬ä¸èµ·é¿åï¼</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-06 09:28">2026-02-06 09:28</span>&nbsp;
<a href="https://www.cnblogs.com/ymtianyu">ä¸åç¨åºåªå</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19582659);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19582659', targetLink: 'https://www.cnblogs.com/ymtianyu/p/19582659', title: 'FastAPIå®æï¼ç¨æå è½½ä¸Lifespanä¼éç®¡çéåä¾èµ' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ æ¦å¿µè§£æï¼æºå¨è§è§å¦ä½èµäºæºå¨âä¸ç»´åç¼âââ3Déå»ºææ¯å¨æ¯æå ]]></title>
    <link>https://www.cnblogs.com/ChenAI-TGF/p/19582574</link>
    <guid>2ade63a921546b9de53d54da1b1b38d6</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ChenAI-TGF/p/19582574" title="åå¸äº 2026-02-06 09:04">
    <span role="heading" aria-level="2">æ¦å¿µè§£æï¼æºå¨è§è§å¦ä½èµäºæºå¨âä¸ç»´åç¼âââ3Déå»ºææ¯å¨æ¯æå</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        å¨äººå·¥æºè½çæµªæ½®ä¸­ï¼å¦æè¯´ä¼ ç»ç2Då¾åè¯å«æ¯è®©æºå¨âè®¤åºâç©ä½ï¼é£ä¹**3Déå»ºï¼3D Reconstructionï¼**åæ¯è®©æºå¨çæ­£âçè§£âç©çä¸çãéè¿æºå¨è§è§å®ç°3Déå»ºï¼æ¯èµäºæºå¨äººãæ äººæºåèªå¨é©¾é©¶æ±½è½¦ç©ºé´æç¥è½åçæ ¸å¿ææ¯ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<hr>
<p>@</p><div class="toc"><div class="toc-container-header">ç®å½</div><ul><li><a href="#åè¨" rel="noopener nofollow">åè¨</a></li><li><a href="#1-ä»ä¹æ¯éè¿æºå¨è§è§å®ç°3déå»º" rel="noopener nofollow">1. ä»ä¹æ¯éè¿æºå¨è§è§å®ç°3Déå»ºï¼</a><ul><li><a href="#å®ä¹" rel="noopener nofollow">å®ä¹</a></li><li><a href="#æ ¸å¿æ¬è´¨ä»2då°3dçéåæå½±" rel="noopener nofollow">æ ¸å¿æ¬è´¨ï¼ä»2Då°3Dçéåæå½±</a></li><li><a href="#å³é®æ¦å¿µ" rel="noopener nofollow">å³é®æ¦å¿µ</a></li></ul></li><li><a href="#2-æææ¼ç¤º3déå»ºçè¿ç¨" rel="noopener nofollow">2. æææ¼ç¤ºï¼3Déå»ºçè¿ç¨</a></li><li><a href="#3-ç®åçä¸»æµæ¹æ³" rel="noopener nofollow">3. ç®åçä¸»æµæ¹æ³</a><ul><li><a href="#ä¸è¢«å¨è§è§passive-vision-ä»ä¾èµç¯å¢å" rel="noopener nofollow">ä¸ãè¢«å¨è§è§ï¼Passive Visionï¼ââ ä»ä¾èµç¯å¢å</a><ul><li><a href="#a--åç®éå»ºmonocular-reconstruction" rel="noopener nofollow">A.  åç®éå»ºï¼Monocular Reconstructionï¼ï¼</a><ul><li><a href="#ä»ä¹æ¯-sfmstructure-from-motion" rel="noopener nofollow">ä»ä¹æ¯ SfMï¼Structure from Motionï¼ï¼</a></li><li><a href="#sfm-çå¨æµç¨æç®æ­¥éª¤ç" rel="noopener nofollow">SfM çå¨æµç¨ï¼æç®æ­¥éª¤çï¼</a></li><li><a href="#1-ç¹å¾æåä¸å¹é-feature-extraction--matching" rel="noopener nofollow">1. ç¹å¾æåä¸å¹é (Feature Extraction &amp; Matching)</a></li><li><a href="#2-è®¡ç®å ä½å³ç³»-estimating-epipolar-geometry" rel="noopener nofollow">2. è®¡ç®å ä½å³ç³» (Estimating Epipolar Geometry)</a></li><li><a href="#3-ä¸è§æµé-triangulation" rel="noopener nofollow">3. ä¸è§æµé (Triangulation)</a></li><li><a href="#4-å¢éå¼éå»º-incremental-reconstruction" rel="noopener nofollow">4. å¢éå¼éå»º (Incremental Reconstruction)</a></li><li><a href="#5-å¨å±ä¼ååææ³å¹³å·®-bundle-adjustment-ba" rel="noopener nofollow">5. å¨å±ä¼åï¼åææ³å¹³å·® (Bundle Adjustment, BA)</a></li><li><a href="#ä¸ºä»ä¹åç®-sfm-æ æ³æç¥ç»å¯¹å°ºåº¦" rel="noopener nofollow">ä¸ºä»ä¹åç® SfM æ æ³æç¥âç»å¯¹å°ºåº¦âï¼</a></li><li><a href="#sfm-çä¸¤ç§ä¸»æµæµæ´¾" rel="noopener nofollow">SfM çä¸¤ç§ä¸»æµæµæ´¾</a></li><li><a href="#åèæä»¶" rel="noopener nofollow">åèæä»¶</a></li></ul></li><li><a href="#b-åç®å¤ç®ç«ä½è§è§stereo-vision" rel="noopener nofollow">B. åç®/å¤ç®ç«ä½è§è§ï¼Stereo Visionï¼ï¼</a><ul><li><a href="#1-æ ¸å¿å®ä¹" rel="noopener nofollow">1. æ ¸å¿å®ä¹</a></li><li><a href="#2-æ ¸å¿æ°å­¦åçä¸è§æµétriangulation" rel="noopener nofollow">2. æ ¸å¿æ°å­¦åçï¼ä¸è§æµéï¼Triangulationï¼</a></li><li><a href="#3-æ åç®æ³æµç¨stereo-pipeline" rel="noopener nofollow">3. æ åç®æ³æµç¨ï¼Stereo Pipelineï¼</a></li><li><a href="#4-åç®è§è§-vs-åç®-sfm-çåºå«" rel="noopener nofollow">4. åç®è§è§ vs. åç® SfM çåºå«</a></li><li><a href="#5-éç¨åºæ¯ä¸å±éæ§" rel="noopener nofollow">5. éç¨åºæ¯ä¸å±éæ§</a></li><li><a href="#6-åèèµæä¸ç»å¸æç®" rel="noopener nofollow">6. åèèµæä¸ç»å¸æç®</a></li></ul></li><li><a href="#c-ç¥ç»è¾å°åºnerf-neural-radiance-fields" rel="noopener nofollow">C. ç¥ç»è¾å°åºï¼NeRF, Neural Radiance Fieldsï¼</a><ul><li><a href="#1-ä»ä¹æ¯-nerf" rel="noopener nofollow">1. ä»ä¹æ¯ NeRFï¼</a></li><li><a href="#2-nerf-çæ ¸å¿åç5d-å½æ°" rel="noopener nofollow">2. NeRF çæ ¸å¿åçï¼5D å½æ°</a></li><li><a href="#3-nerf-çå·¥ä½æµç¨" rel="noopener nofollow">3. NeRF çå·¥ä½æµç¨</a></li><li><a href="#4-ä¸ºä»ä¹-nerf-ææè¿ä¹éæ¼" rel="noopener nofollow">4. ä¸ºä»ä¹ NeRF ææè¿ä¹éæ¼ï¼</a></li><li><a href="#5-å±éæ§ä¸ç®åçç¶é¢" rel="noopener nofollow">5. å±éæ§ä¸ç®åçç¶é¢</a></li><li><a href="#6-è¿åä¹è·¯nerf-çå­å­ä»¬" rel="noopener nofollow">6. è¿åä¹è·¯ï¼NeRF çå­å­ä»¬ï¼</a></li><li><a href="#7-åèæç®" rel="noopener nofollow">7. åèæç®</a></li></ul></li><li><a href="#d-3d-gaussian-splatting-3dgs" rel="noopener nofollow">D. 3D Gaussian Splatting (3DGS)ï¼</a><ul><li><a href="#1-ä»ä¹æ¯-3d-gaussian-splatting-3dgs" rel="noopener nofollow">1. ä»ä¹æ¯ 3D Gaussian Splatting (3DGS)ï¼</a></li><li><a href="#2-æ ¸å¿åç3d-é«æ¯æ¤­çä½çåºå " rel="noopener nofollow">2. æ ¸å¿åçï¼3D é«æ¯æ¤­çä½çâåºå â</a></li><li><a href="#3-å·¥ä½æµç¨ä»ç¹äºå°ç²¾ç¾å»ºæ¨¡" rel="noopener nofollow">3. å·¥ä½æµç¨ï¼ä»ç¹äºå°ç²¾ç¾å»ºæ¨¡</a></li><li><a href="#5-ç®åçç¶é¢ä¸ææ" rel="noopener nofollow">5. ç®åçç¶é¢ä¸ææ</a></li><li><a href="#6-åèæç®" rel="noopener nofollow">6. åèæç®</a></li></ul></li></ul></li><li><a href="#äº-ä¸»å¨è§è§active-vision-èªå¸¦åæº" rel="noopener nofollow">äº. ä¸»å¨è§è§ï¼Active Visionï¼ââ èªå¸¦åæº</a><ul><li><a href="#a-ç»æåææ¯" rel="noopener nofollow">A. ç»æåææ¯</a><ul><li><a href="#å®ä¹-1" rel="noopener nofollow"><strong>å®ä¹ï¼</strong></a></li><li><a href="#2-æ ¸å¿æ°å­¦åçåå½¢çä¸è§æµé" rel="noopener nofollow">2. æ ¸å¿æ°å­¦åçï¼åå½¢çä¸è§æµé</a></li><li><a href="#3-ç¼ç æ¹å¼ç»æåçè¯­è¨" rel="noopener nofollow">3. ç¼ç æ¹å¼ï¼ç»æåçâè¯­è¨â</a></li><li><a href="#4-æ·±åº¦è§£æiphone-faceid-æ¯å¦ä½å·¥ä½ç" rel="noopener nofollow">4. æ·±åº¦è§£æï¼iPhone FaceID æ¯å¦ä½å·¥ä½çï¼</a></li><li><a href="#5-ç»æåçä¼ç¼ºç¹" rel="noopener nofollow">5. ç»æåçä¼ç¼ºç¹</a></li></ul></li><li><a href="#6-åèæç®-1" rel="noopener nofollow">6. åèæç®</a></li><li><a href="#é£è¡æ¶é´æ³tof-time-of-flight" rel="noopener nofollow">é£è¡æ¶é´æ³ï¼ToF, Time of Flightï¼</a><ul><li><a href="#1-ä»ä¹æ¯-tof-é£è¡æ¶é´æ³" rel="noopener nofollow">1. ä»ä¹æ¯ ToF (é£è¡æ¶é´æ³)ï¼</a></li><li><a href="#2-æ ¸å¿æ°å­¦åçæéå¬å¼" rel="noopener nofollow">2. æ ¸å¿æ°å­¦åçï¼æéå¬å¼</a></li><li><a href="#3-tof-çå·¥ä½æµç¨" rel="noopener nofollow">3. ToF çå·¥ä½æµç¨</a></li><li><a href="#4-tof-vs-ç»æåæä»ä¹åºå«" rel="noopener nofollow">4. ToF vs. ç»æåï¼æä»ä¹åºå«ï¼</a></li><li><a href="#5-ç®åçç¶é¢ä¸ææ-1" rel="noopener nofollow">5. ç®åçç¶é¢ä¸ææ</a></li><li><a href="#6-åèæç®-2" rel="noopener nofollow">6. åèæç®</a></li></ul></li></ul></li></ul></li><li><a href="#4-éç¨åºæ¯" rel="noopener nofollow">4. éç¨åºæ¯</a></li><li><a href="#5-ç®åçç¶é¢ä¸é®é¢" rel="noopener nofollow">5. ç®åçç¶é¢ä¸é®é¢</a></li><li><a href="#æ»ç»" rel="noopener nofollow">æ»ç»</a></li><li><a href="#åèæç®" rel="noopener nofollow">åèæç®</a></li></ul></div><p></p>
<h1 id="åè¨">åè¨</h1>
<p>å¨äººå·¥æºè½çæµªæ½®ä¸­ï¼å¦æè¯´ä¼ ç»ç2Då¾åè¯å«æ¯è®©æºå¨âè®¤åºâç©ä½ï¼é£ä¹<strong>3Déå»ºï¼3D Reconstructionï¼</strong>åæ¯è®©æºå¨çæ­£âçè§£âç©çä¸çãéè¿æºå¨è§è§å®ç°3Déå»ºï¼æ¯èµäºæºå¨äººãæ äººæºåèªå¨é©¾é©¶æ±½è½¦ç©ºé´æç¥è½åçæ ¸å¿ææ¯ã</p>
<h1 id="1-ä»ä¹æ¯éè¿æºå¨è§è§å®ç°3déå»º">1. ä»ä¹æ¯éè¿æºå¨è§è§å®ç°3Déå»ºï¼</h1>
<h2 id="å®ä¹">å®ä¹</h2>
<p>éè¿æºå¨è§è§å®ç°ç3Déå»ºï¼æ¯æå©ç¨åå­¦ä¼ æå¨ï¼å¦ç¸æºï¼è·åç2Då¾ååºåï¼ç»åè®¡ç®æºè§è§ç®æ³ï¼æ¢å¤ç©ä½çä¸ç»´å ä½å½¢ç¶ãç©ºé´ä½ç½®ä»¥åè¡¨é¢çº¹ççè¿ç¨ã</p>
<h2 id="æ ¸å¿æ¬è´¨ä»2då°3dçéåæå½±">æ ¸å¿æ¬è´¨ï¼ä»2Då°3Dçéåæå½±</h2>
<p>å¨ç©çä¸çä¸­ï¼3Dç©ä½éè¿ç¸æºçééæåå¨2Dæååä»¶ä¸ï¼è¿æ¯ä¸ä¸ª<strong>éç»´</strong>çè¿ç¨ï¼ä¸¢å¤±äºæ·±åº¦ä¿¡æ¯$Z$ï¼ã3Déå»ºçç®æ å°±æ¯éè¿æ°å­¦æ¨¡ååç®æ³ï¼å°è¿äºä¸¢å¤±çæ·±åº¦ä¿¡æ¯æ¾åæ¥ï¼æåç´ ç¹è¿åå°ä¸ç»´åæ ç³»ï¼$X, Y, Z$ï¼ä¸­ã</p>
<h2 id="å³é®æ¦å¿µ">å³é®æ¦å¿µ</h2>
<ul>
<li><strong>ç¹äºï¼Point Cloudï¼ï¼</strong> éå»ºçç¬¬ä¸æ­¥éå¸¸æ¯çæå¤§éå¸¦æç©ºé´åæ çéæ ·ç¹ã</li>
<li><strong>ä¸è§ååï¼Triangulationï¼ï¼</strong> å©ç¨å ä½å³ç³»ç¡®å®ç¹å¨ç©ºé´ä¸­çä½ç½®ã</li>
<li><strong>æ·±åº¦å¾ï¼Depth Mapï¼ï¼</strong> æ¯ä¸ªåç´ ç¹ä»£è¡¨è·ç¦»ç¸æºè·ç¦»çå¾åã</li>
</ul>
<hr>
<h1 id="2-æææ¼ç¤º3déå»ºçè¿ç¨">2. æææ¼ç¤ºï¼3Déå»ºçè¿ç¨</h1>
<p>æä»¬å¯ä»¥éè¿ä»¥ä¸ä¸ä¸ªé¶æ®µæ¥æ³è±¡éå»ºçè§è§ææï¼</p>
<ol>
<li><strong>ç¨çéå»ºé¶æ®µï¼Sparse Reconstructionï¼ï¼</strong><br>
å±å¹ä¸åºç°é¶æ£çç¹å¾ç¹ï¼çèµ·æ¥åæ¯ä¸ç¾¤ååçè¤ç«è«ææäºç©ä½çè½®å»ãæ­¤æ¶å¯ä»¥çæ¸ç¸æºçè¿å¨è½¨è¿¹ã</li>
<li><strong>ç¨ å¯éå»ºé¶æ®µï¼Dense Reconstructionï¼ï¼</strong><br>
ç¹äºåå¾æå¶å¯éï¼ç©ä½çå½¢ç¶å·²ç»æ¸æ°å¯è¾¨ï¼åæ¯ç±æ æ°ç»å°çæ²ç²å ç èæçéå¡ã</li>
<li><strong>è¡¨é¢ç½æ ¼åä¸çº¹çè´´å¾ï¼Meshing &amp; Texturingï¼ï¼</strong><br>
ç®æ³å¨ç¹ä¸ç¹ä¹é´è¿çº¿å½¢æä¸è§é¢çï¼Meshï¼ï¼å¹¶æç§çä¸çé¢è²âè´´âä¸å»ãæ­¤æ¶ï¼ç©ä½å¨å±å¹ä¸çèµ·æ¥ä¸çå®ç§çæ å¼ï¼ä½ä½ å¯ä»¥æè½¬ãç¼©æ¾å®ã</li>
</ol>
<p><img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202602/3724025-20260206090341017-340817460.png" class="lazyload"><br>
<strong>æ¦å¿µè§£è¯»ï¼</strong><br>
<strong>1. Meshï¼ç½æ ¼ / ä¸è§ç½æ ¼ï¼</strong><br>
Mesh æ¯ä¸ç»´æ¨¡åç âå ä½éª¨æ¶âï¼å®ç±å¤§éä¸è§å½¢ï¼æå¤è¾¹å½¢ï¼é¢çæ¼æ¥èæï¼åªå®ä¹äºç©ä½çä¸ç»´å½¢ç¶ãè½®å»åç»æï¼å°±åå»ºç­çé¢ç­æ¡æ¶ï¼æ¬èº«æ²¡æé¢è²åçº¹çã<br>
<strong>2. è´´å¾ï¼Texture Mappingï¼</strong><br>
è´´å¾æ¯ä¸å¼ åå«é¢è²ãçº¹çãç»èä¿¡æ¯çäºç»´å¾åï¼æ¯å¦å¢é¢çç ç³çº¹çãçªæ·çç»çè´¨æãå®çä½ç¨æ¯æè¿äºè¡¨é¢ç»è âè´´â å° Mesh çå ä½æ¡æ¶ä¸ã</p>
<hr>
<h1 id="3-ç®åçä¸»æµæ¹æ³">3. ç®åçä¸»æµæ¹æ³</h1>
<p>3Déå»ºçæ¹æ³ä¸»è¦åä¸º<strong>ä¸»å¨è§è§</strong>å<strong>è¢«å¨è§è§</strong>ä¸¤å¤§ç±»ï¼</p>
<h2 id="ä¸è¢«å¨è§è§passive-vision-ä»ä¾èµç¯å¢å">ä¸ãè¢«å¨è§è§ï¼Passive Visionï¼ââ ä»ä¾èµç¯å¢å</h2>
<p>è¿ç±»æ¹æ³ä¸åç©ä½åå°è½éï¼ä»éè¿ææç¯å¢åæåã</p>
<h3 id="a--åç®éå»ºmonocular-reconstruction">A.  åç®éå»ºï¼Monocular Reconstructionï¼ï¼</h3>
<p><strong>åç</strong>ï¼å©ç¨<strong>è¿å¨æ¢å¤ç»æï¼SfM, Structure from Motionï¼</strong>ãéè¿åå°ç¸æºå¨ä¸åä½ç½®ææçå¤å¼ ç§çï¼è®¡ç®ç¸æºä½å§¿ååå¹¶éå»ºåºæ¯ã</p>
<p><strong>é¾ç¹</strong>ï¼ å­å¨<strong>å°ºåº¦ä¸ç¡®å®æ§</strong>ï¼ä¸ç¥éç©ä½å°åºæå¤å¤§ï¼ã</p>
<p>ç®åæ¥è¯´ï¼SfM å°±æ¯éè¿<strong>ç§»å¨çç¸æº</strong>ææçä¸ç³»å<strong>2Då¾å</strong>ï¼æ¥æ¨ç®åºç©ä½ç<strong>3Då½¢ç¶</strong>åç¸æºç<strong>ç©ºé´è½¨è¿¹</strong>ã</p>
<p>ä¸é¢æå°éå¸¸è¯¦ç»å°ä¸ºä½ æè§£ SfM çåçãæ­¥éª¤ä»¥åå®èåçæ°å­¦é»è¾ã</p>
<hr>
<h4 id="ä»ä¹æ¯-sfmstructure-from-motion">ä»ä¹æ¯ SfMï¼Structure from Motionï¼ï¼</h4>
<ul>
<li><strong>Structureï¼ç»æï¼ï¼</strong> æçæ¯è¢«ææç©ä½çä¸ç»´åæ ï¼ç¹äºï¼ã</li>
<li><strong>Motionï¼è¿å¨ï¼ï¼</strong> æçæ¯ç¸æºå¨æææ¯ä¸å¼ ç§çæ¶çä½ç½®ï¼ä½å§¿ï¼Poseï¼ã</li>
<li><strong>Fromï¼éè¿...æ¢å¤ï¼ï¼</strong> å¼ºè°äºå æå³ç³»ã</li>
</ul>
<p><strong>æ ¸å¿ææ³ï¼</strong><br>
æ³è±¡ä½ å´çä¸ä¸ªéåè½¬åæç§ãè½ç¶æ¯å¼ ç§çé½æ¯å¹³é¢çï¼2Dï¼ï¼ä½å½ä½ ä»å·¦è¾¹ç§»å¨å°å³è¾¹æ¶ï¼éåä¸çç¹å¾ç¹ï¼æ¯å¦é¼»å­å°ï¼å¨ç§çéçä½ç½®ä¼åçç§»å¨ãSfM ç®æ³å°±åä½ çå¤§èä¸æ ·ï¼éè¿åæè¿äºç¹ç§»å¨çå¹åº¦ãæ¹ååè§å¾ï¼åè¿æ¥æ¨ç®åºï¼âå¦ï¼åæ¥é¼»å­å°è·ç¦»æè¿ä¹è¿ï¼èæåæåå³ç§»å¨äº 50 åç±³ãâ</p>
<hr>
<h4 id="sfm-çå¨æµç¨æç®æ­¥éª¤ç">SfM çå¨æµç¨ï¼æç®æ­¥éª¤çï¼</h4>
<p>ä¸ä¸ªæ åç SfM ç³»ç»éå¸¸åå«ä»¥ä¸äºä¸ªæ ¸å¿æ­¥éª¤ï¼</p>
<p><img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202602/3724025-20260206090340598-853557538.png" class="lazyload"></p>
<h4 id="1-ç¹å¾æåä¸å¹é-feature-extraction--matching">1. ç¹å¾æåä¸å¹é (Feature Extraction &amp; Matching)</h4>
<ul>
<li><strong>åä»ä¹ï¼</strong> ç®æ³ä¼å¨æ¯ä¸å¼ ç§çä¸­å¯»æ¾âå°æ âââé£äºæ è®ºåç§æä¹åãè§åº¦æä¹åé½è½è®¤åºæ¥çç¹ï¼éå¸¸ä½¿ç¨ <strong>SIFT</strong> æ <strong>ORB</strong> ç®æ³ï¼ã</li>
<li><strong>ç®çï¼</strong> ç¡®å®ç¬¬ä¸å¼ ç§çéçé£ä¸ªâç¹âåç¬¬äºå¼ ç§çéçåªä¸ªâç¹âæ¯ç©çä¸çä¸­çåä¸ä¸ªä½ç½®ã</li>
<li><strong>ç»æï¼</strong> å¾å°ä¸å éå¯¹å¥½çåç´ ç¹åæ ã</li>
</ul>
<h4 id="2-è®¡ç®å ä½å³ç³»-estimating-epipolar-geometry">2. è®¡ç®å ä½å³ç³» (Estimating Epipolar Geometry)</h4>
<ul>
<li><strong>åä»ä¹ï¼</strong> å©ç¨<strong>å¯¹æå ä½ï¼Epipolar Geometryï¼</strong>çè®ºãéè¿å¹éçç¹å¯¹ï¼è®¡ç®åºä¸¤å¼ ç§çä¹é´çæ°å­¦åæ¢å³ç³»ï¼å³<strong>åºç¡ç©éµï¼Fundamental Matrixï¼</strong>æ<strong>æ¬è´¨ç©éµï¼Essential Matrixï¼</strong>ã</li>
<li><strong>åçï¼</strong> å³ä½¿ä¸ç¥éç©ä½çå½¢ç¶ï¼åªè¦æè¶³å¤çå¹éç¹ï¼æä»¬å°±è½ç®åºç¸æºä»ä½ç½® A å°ä½ç½® B å°åºæè½¬äºå¤å°åº¦ï¼å¹³ç§»äºå¤å°è·ç¦»ã</li>
</ul>
<h4 id="3-ä¸è§æµé-triangulation">3. ä¸è§æµé (Triangulation)</h4>
<ul>
<li><strong>åä»ä¹ï¼</strong> æäºç¸æºçä½å§¿ï¼ç®æ³ä¼ä»ä¸¤ä¸ªç¸æºä¸­å¿ååä¸ä¸ªç¹å¾ç¹åå°ä¸¤æ¡å°çº¿ã</li>
<li><strong>åçï¼</strong> è¿ä¸¤æ¡å°çº¿çäº¤ç¹ï¼å°±æ¯è¯¥ç¹å¾ç¹å¨ä¸ç»´ç©ºé´ä¸­ççå®åæ ï¼$X, Y, Z$ï¼ã</li>
<li><strong>ç»æï¼</strong> çæäºæåçç¨çç¹äºã</li>
</ul>
<h4 id="4-å¢éå¼éå»º-incremental-reconstruction">4. å¢éå¼éå»º (Incremental Reconstruction)</h4>
<ul>
<li><strong>åä»ä¹ï¼</strong> ç®æ³ä¸ä¼ä¸æ¬¡æ§å¤çå ç¾å¼ ç§çï¼èæ¯åä»ä¸¤å¼ å¼å§ï¼éå»ºåºä¸å°é¨åï¼ç¶ååæ¼å¾ä¸æ ·ï¼ä¸æ­å å¥ç¬¬ä¸å¼ ãç¬¬åå¼ ç§çã</li>
<li><strong>è¿ç¨ï¼</strong> æ¯å å¥ä¸å¼ æ°ç§çï¼å°±å©ç¨å·²æç 3D ç¹äºæ¥åæ¨è¿å¼ æ°ç§ççç¸æºä½ç½®ï¼è¿å« <strong>PnP</strong> ç®æ³ï¼ï¼ç¶ååææ°çå°çç¹å å¥ç¹äºã</li>
</ul>
<h4 id="5-å¨å±ä¼ååææ³å¹³å·®-bundle-adjustment-ba">5. å¨å±ä¼åï¼åææ³å¹³å·® (Bundle Adjustment, BA)</h4>
<ul>
<li><strong>è¿æ¯ SfM ççµé­ï¼</strong> éçç§çè¶æ¥è¶å¤ï¼è¯¯å·®ä¼ç´¯ç§¯ï¼ç¹äºä¼âé£âææåå½¢ã</li>
<li><strong>åä»ä¹ï¼</strong> BA æ¯ä¸é¡¹å¤§åä¼åå·¥ç¨ãå®ä¼åæ¶è°æ´<strong>ææç¸æºçä½å§¿</strong>å<strong>ææ 3D ç¹çåæ </strong>ï¼ä½¿å¾æ¯ä¸ä¸ª 3D ç¹æå½±åç§çä¸æ¶ï¼ä¸ç§çéåå§åç´ ç¹çè·ç¦»ï¼<strong>éæå½±è¯¯å·®</strong>ï¼æå°ã<br>
<img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202602/3724025-20260206090340297-692191271.png" class="lazyload"></li>
</ul>
<hr>
<h4 id="ä¸ºä»ä¹åç®-sfm-æ æ³æç¥ç»å¯¹å°ºåº¦">ä¸ºä»ä¹åç® SfM æ æ³æç¥âç»å¯¹å°ºåº¦âï¼</h4>
<p>è¿æ¯åç®éå»ºæè´å½çå¼±ç¹ï¼ä¹æ¯é¢è¯æå­¦æ¯è®¨è®ºä¸­å¿é®çé®é¢ã</p>
<p><strong>åçï¼</strong><br>
å¨æ°å­¦ä¸ï¼SfM æ¢å¤åºçç©ºé´ç»æå·æ<strong>å°ºåº¦ç­æ¯æ§</strong>ã</p>
<ul>
<li>å¦æä½ ææä¸å¼ æ¡å­ä¸çæ°´æ¯ï¼éå»ºåºæ¥çæ¨¡åå¯è½çèµ·æ¥å¾å®ç¾ã</li>
<li>ä½æ¯ï¼ç®æ³æ æ³åè¾¨è¿æ¯ä¸ä¸ª<strong>çå®çé« 10 åç±³çæ°´æ¯</strong>ï¼è¿æ¯ä¸ä¸ª<strong>é« 10 ç±³çå·¨åæ°´æ¯æ¨¡å</strong>ã</li>
</ul>
<p><strong>åå ï¼</strong><br>
å¨åç®ç¸æºçæ¥ï¼ä¸ä¸ªå¾å°çç©ä½ç¦»ç¸æºå¾è¿ï¼åä¸ä¸ªå·¨å¤§çç©ä½ç¦»ç¸æºå¾è¿ï¼å¨ç§çä¸çåç´ è¡¨ç°æ¯ä¸æ¨¡ä¸æ ·çãé¤éä½ é¢å¤åè¯ç®æ³ä¸ä¸ªåèå¼ï¼æ¯å¦ï¼ç§çéé£ä¸ªç¡¬å¸ç´å¾æ¯ 25mmï¼æèä¸¤ä¸ªç¸æºå¶å®è·ç¦» 10cmï¼ï¼å¦åå®åªè½åè¯ä½ ï¼âA ç¹å° B ç¹çè·ç¦»æ¯ C ç¹å° D ç¹è·ç¦»ç 2 åâï¼èä¸è½åè¯ä½ å°åºæ¯å¤å°ç±³ã</p>
<hr>
<h4 id="sfm-çä¸¤ç§ä¸»æµæµæ´¾">SfM çä¸¤ç§ä¸»æµæµæ´¾</h4>
<ol>
<li>
<p><strong>å¢éå¼ SfM (Incremental SfM)ï¼</strong></p>
<ul>
<li>ä»£è¡¨ä½ï¼<strong>COLMAP</strong>ï¼ç®åå­¦æ¯çåå·¥ä¸çæå¸¸ç¨çå¼æºå·¥å·ï¼ã</li>
<li>ä¼ç¹ï¼éå¸¸é²æ£ï¼ç²¾åº¦é«ã</li>
<li>ç¼ºç¹ï¼æ¢ï¼ç§çå¤äºä¹åä¼åéå¸¸èæ¶ã<br>
<img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202602/3724025-20260206090340547-336761908.png" class="lazyload"></li>
</ul>
</li>
<li>
<p><strong>å¨å±å¼ SfM (Global SfM)ï¼</strong></p>
<ul>
<li>ä»£è¡¨ä½ï¼<strong>TheiaSfM</strong>ã</li>
<li>ä¼ç¹ï¼éåº¦æå¿«ï¼éåå¤§è§æ¨¡åºæ¯ã</li>
<li>ç¼ºç¹ï¼å¯¹å¼å¸¸å¹éç¹éå¸¸ææï¼å®¹æå´©æºã<br>
<img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202602/3724025-20260206090340564-408678317.png" class="lazyload"></li>
</ul>
</li>
</ol>
<hr>
<h4 id="åèæä»¶">åèæä»¶</h4>
<p>è¥è¦æ·±å¥ç ç©¶ SfM çåºå±æ°å­¦ï¼ä»¥ä¸æç®æ¯å¿è¯»çï¼</p>
<ol>
<li><strong>Agarwal, S., et al. (2011).</strong> <em>Building Rome in a Day</em>. Communications of the ACM.<br>
(è¿æ¯ SfM åå²ä¸çéç¨ç¢ï¼è¯æäºå©ç¨äºèç½ä¸çæåä¸ä¸å¼ ç§çéå»ºä¸åº§åå¸æ¯å¯è½ç)ã</li>
<li><strong>SchÃ¶nberger, J. L., &amp; Frahm, J. M. (2016).</strong> <em>Structure-from-Motion Revisited</em>. CVPR.<br>
(è¿æ¯ <strong>COLMAP</strong> çæ ¸å¿è®ºæï¼ç®åè¢«å¬è®¤ä¸ºå¢éå¼ SfM çæä¼å®è·µ)ã</li>
<li><strong>Triggs, B., et al. (1999).</strong> <em>Bundle Adjustment â A Modern Synthesis</em>. Vision Algorithms: Theory and Practice.<br>
(æ·±å¥è®²è§£äº SfM ä¸­æå³é®çä¼åç®æ³ BA)ã</li>
<li><strong>Snavely, N., Seitz, S. M., &amp; Szeliski, R. (2006).</strong> <em>Photo Tourism: Exploring image collections in 3D</em>. SIGGRAPH.<br>
(é¦æ¬¡åå¤§ä¼å±ç¤ºäºå¦ä½éè¿éç»æåç§çéè¿è¡ 3D å¯¼èª)ã</li>
<li><strong>Longuet-Higgins, H. C. (1981).</strong> <em>A computer algorithm for reconstructing a scene from two projections</em>. Nature.<br>
(æåºäºèåçå«ç¹ç®æ³ï¼æ¯ SfM å ä½è®¡ç®çåºç³)ã</li>
</ol>
<h3 id="b-åç®å¤ç®ç«ä½è§è§stereo-vision">B. åç®/å¤ç®ç«ä½è§è§ï¼Stereo Visionï¼ï¼</h3>
<p><strong>åç</strong>: æ¨¡æäººç±»åç¼ãéè¿è®¡ç®å·¦å³ä¸¤ä¸ªç¸æºææå¾åç<strong>è§å·®ï¼Disparityï¼</strong>ï¼å©ç¨ä¸è§æµéåçè®¡ç®æ·±åº¦ã</p>
<p>å¦æè¯´ SfMï¼è¿å¨æ¢å¤ç»æï¼æ¯æ¨¡ä»¿äººç±»âè¾¹èµ°è¾¹çâæ¥è®¤ç¥ç©ºé´ï¼é£ä¹<strong>åç®ç«ä½è§è§ï¼Stereo Visionï¼</strong>åæ¯ç´æ¥æ¨¡ä»¿äººç±»ç<strong>åç¼ç»æ</strong>ã</p>
<p>å®æ¯æºå¨è§è§ä¸­æç»å¸ãåºç¨æå¹¿æ³çæ·±åº¦æç¥ææ¯ä¹ä¸ãä¸é¢æä»¬æ·±åº¦æè§£åç®ç«ä½è§è§çåçãæ°å­¦é»è¾ä»¥åå®ç°è¿ç¨ã</p>
<h4 id="1-æ ¸å¿å®ä¹">1. æ ¸å¿å®ä¹</h4>
<p>åç®ç«ä½è§è§æ¯æä½¿ç¨ä¸¤å°æåç¹æ§ç¸åï¼ç¦è·ãåç´ å°ºå¯¸ç­ä¸è´ï¼çç¸æºï¼å®è£å¨åä¸å¹³é¢ä¸ï¼ä¿æä¸å®çæ°´å¹³è·ç¦»ï¼<strong>åºçº¿ï¼Baseline</strong>ï¼ï¼éè¿è®¡ç®å·¦å³å¾åä¸­åä¸ç©ä½åç´ ç¹çç¸å¯¹ä½å§¿å·®å¼ï¼æ¥è·åç©ä½ä¸ç»´ä¿¡æ¯çæ¹æ³ã</p>
<p><strong>ç´è§çè§£ï¼</strong><br>
ä¼¸åºä½ çä¸æ ¹æææ¾å¨ç¼åï¼åé­ä¸å·¦ç¼çï¼åé­ä¸å³ç¼çãä½ ä¼åç°ææç¸å¯¹äºèæ¯çä½ç½®åçäºâè·³å¨âã</p>
<ul>
<li>ææç¦»ç¼çè¶è¿ï¼è·³å¨å¹åº¦ï¼ä½å§¿å·®å¼ï¼è¶å¤§ã</li>
<li>ææç¦»ç¼çè¶è¿ï¼è·³å¨å¹åº¦è¶å°ã</li>
<li>è¿ç§è·³å¨çä½ç§»éï¼å¨è®¡ç®æºè§è§ä¸­è¢«ç§°ä¸º<strong>è§å·®ï¼Disparityï¼</strong>ã</li>
</ul>
<hr>
<h4 id="2-æ ¸å¿æ°å­¦åçä¸è§æµétriangulation">2. æ ¸å¿æ°å­¦åçï¼ä¸è§æµéï¼Triangulationï¼</h4>
<p>åç®è§è§çç²¾é«å¯ä»¥ç¨ä¸ä¸ªæå¶ç®åçå ä½å¬å¼æ¥æ¦æ¬ã</p>
<p>åè®¾ä¸¤å°ç¸æºå®å¨å¹³è¡ï¼ç¦è·ä¸º $f$ï¼ä¸¤ç¸æºä¸­å¿è·ç¦»ï¼åºçº¿ï¼ä¸º $B$ãç©ºé´ä¸­ä¸ç¹ $P$ å¨å·¦ç¸æºæåé¢ä¸çæ¨ªåæ æ¯ $x_L$ï¼å¨å³ç¸æºæåé¢ä¸çæ¨ªåæ æ¯ $x_R$ã</p>
<ol>
<li><strong>è§å·®ï¼Disparityï¼å®ä¹ï¼</strong> $d = x_L - x_R$</li>
<li><strong>æ·±åº¦ï¼Depthï¼è®¡ç®å¬å¼ï¼</strong><br>
$$Z = \frac{f \cdot B}{d}$$</li>
</ol>
<p><strong>è¿ä¸ªå¬å¼åè¯æä»¬ä¸¤ä¸ªå³é®ä¿¡æ¯ï¼</strong></p>
<ul>
<li><strong>åæ¯å³ç³»ï¼</strong> æ·±åº¦ $Z$ ä¸è§å·® $d$ æåæ¯ãè§å·®è¶å¤§ï¼ç©ä½è¶è¿ã</li>
<li><strong>å°ºåº¦ç¡®å®æ§ï¼</strong> ä¸åç® SfM ä¸åï¼ç±äºåºçº¿ $B$ æ¯æåæµéå¥½çç©çå¸¸æ°ï¼æ¯å¦ä¸¤ç¸æºé´è· 6 åç±³ï¼ï¼æä»¥åç®è§è§å¯ä»¥ç´æ¥è®¡ç®åºç©ä½ç<strong>çå®ç©çè·ç¦»</strong>ï¼ç±³ææ¯«ç±³ï¼ï¼ä¸å­å¨å°ºåº¦ä¸ç¡®å®æ§ã</li>
</ul>
<hr>
<h4 id="3-æ åç®æ³æµç¨stereo-pipeline">3. æ åç®æ³æµç¨ï¼Stereo Pipelineï¼</h4>
<p>å®ç°é«è´¨éçåç®éå»ºéå¸¸éè¦ç»è¿ä»¥ä¸åä¸ªä¸¥è°¨çæ­¥éª¤ï¼</p>
<p><strong>ç¬¬ä¸æ­¥ï¼ç¸æºæ å®ï¼Camera Calibrationï¼</strong></p>
<ul>
<li><strong>ç®çï¼</strong> ç¡®å®ç¸æºçååï¼ç¦è·ãä¸­å¿ç¹ï¼åå¤åï¼ä¸¤ç¸æºä¹é´çç²¾ç¡®æè½¬åå¹³ç§»å³ç³»ï¼ã</li>
<li><strong>æä¹ï¼</strong> å¦æç¸æºéå¤´æç¸åï¼æ¯å¦é±¼ç¼ææï¼ï¼æèä¸¤ä¸ªç¸æºæ²¡è£æ­£ï¼åç»­è®¡ç®å¨æ¯éçã</li>
</ul>
<p><strong>ç¬¬äºæ­¥ï¼ç«ä½æ ¡æ­£ï¼Stereo Rectificationï¼ââ æå³é®</strong></p>
<ul>
<li><strong>åä»ä¹ï¼</strong> éè¿æ°å­¦åæ¢ï¼ææææ¶çä¸¤å¼ ç§çå¯¹é½ï¼ä½¿å¾å·¦å³å¾åç<strong>æçº¿ï¼Epipolar Lineï¼å¤äºåä¸æ°´å¹³çº¿ä¸</strong>ã</li>
<li><strong>æä¹ï¼</strong> æ ¡æ­£åï¼å·¦å¾ä¸­çä¸ä¸ªç¹ï¼å¨å³å¾ä¸­ä¸å®è½å¨<strong>åä¸è¡</strong>æ¾å°ãè¿æä¸ä¸ª 2D çæç´¢é®é¢éç»´æäº 1D æç´¢ï¼æå¤§å°æé«äºè¿ç®éåº¦ã</li>
</ul>
<p><strong>ç¬¬ä¸æ­¥ï¼ç«ä½å¹éï¼Stereo Matchingï¼ââ ææ ¸å¿ãæé¾</strong></p>
<ul>
<li><strong>åä»ä¹ï¼</strong> ç®æ³è¦å¨å³å¾çåä¸è¡åç´ éï¼æ¾å°é£ä¸ªåå·¦å¾ç¹âé¿å¾æåâçç¹ã</li>
<li><strong>ä¸»æµç®æ³ï¼</strong>
<ul>
<li><strong>BM (Block Matching)ï¼</strong> å¿«ï¼ä½ç²¾åº¦ä½ï¼è¾¹ç¼ç²ç³ã</li>
<li><strong>SGM (Semi-Global Matching)ï¼</strong> å·¥ä¸ççä¸»æµï¼å¨éåº¦åç²¾åº¦é´åå¾äºæä½³å¹³è¡¡ã</li>
<li><strong>æ·±åº¦å­¦ä¹ æ¹æ³ï¼</strong> å¦ PSMNetï¼å©ç¨ç¥ç»ç½ç»ç´æ¥è¾åºè§å·®å¾ï¼å¨å¤çæ çº¹çåºåè¡¨ç°æ´å¥½ã</li>
</ul>
</li>
</ul>
<p><strong>ç¬¬åæ­¥ï¼è§å·®è½¬æ·±åº¦ï¼Disparity to Depthï¼</strong></p>
<ul>
<li><strong>åä»ä¹ï¼</strong> å©ç¨åé¢æå°çå¬å¼ $Z = (f \cdot B) / d$ï¼å°åç´ çº§çè§å·®å¾è½¬åä¸ºç©çä¸ççæ·±åº¦å¾ã</li>
</ul>
<hr>
<h4 id="4-åç®è§è§-vs-åç®-sfm-çåºå«">4. åç®è§è§ vs. åç® SfM çåºå«</h4>
<table>
<thead>
<tr>
<th style="text-align: left">ç¹æ§</th>
<th style="text-align: left">åç®ç«ä½è§è§ (Stereo)</th>
<th style="text-align: left">åç® SfM</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left"><strong>ç¸æºæ°é</strong></td>
<td style="text-align: left">2å°æå¤å°</td>
<td style="text-align: left">1å°</td>
</tr>
<tr>
<td style="text-align: left"><strong>ææç¶æ</strong></td>
<td style="text-align: left">å¯ä»¥éæææï¼ç¬é´æåï¼</td>
<td style="text-align: left">å¿é¡»ç§»å¨ç¸æºï¼å¨æææï¼</td>
</tr>
<tr>
<td style="text-align: left"><strong>å°ºåº¦æç¥</strong></td>
<td style="text-align: left">èªå¨è·å¾çå®ç©çå°ºåº¦</td>
<td style="text-align: left">æ æ³è·å¾çå®å°ºåº¦ï¼ä»ææ¯ä¾ï¼</td>
</tr>
<tr>
<td style="text-align: left"><strong>å®æ¶æ§</strong></td>
<td style="text-align: left">é«ï¼éåé¿éãæºå¨äººï¼</td>
<td style="text-align: left">ä½ï¼è®¡ç®éå¤§ï¼éè¿å¨åºåï¼</td>
</tr>
<tr>
<td style="text-align: left"><strong>éç¨èå´</strong></td>
<td style="text-align: left">éåè¿è·ç¦»ãé«ç²¾åº¦æç¥</td>
<td style="text-align: left">éåå¤§åºæ¯ãè¿è·ç¦»å»ºæ¨¡</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="5-éç¨åºæ¯ä¸å±éæ§">5. éç¨åºæ¯ä¸å±éæ§</h4>
<p><strong>éç¨åºæ¯ï¼</strong></p>
<ul>
<li><strong>è½¦è½½è¾å©é©¾é©¶ï¼ADASï¼ï¼</strong> è¯å«åæ¹éç¢ç©è·ç¦»ã</li>
<li><strong>å·¥ä¸æåï¼</strong> æºæ¢°èè¯å«é¶ä»¶ç 3D ä½ç½®ã</li>
<li><strong>æ äººæºé¿éï¼</strong> å®æ¶æç¥å¨å´å¢ä½è·ç¦»ã</li>
</ul>
<p><strong>å±éæ§ï¼</strong></p>
<ol>
<li><strong>ç¯å¢çº¹çä¾èµï¼</strong> å¦æå¢é¢æ¯çº¯ç½è²çï¼ç®æ³æ æ³å¨å³å¾ä¸­æ¾å°å¹éçç¹ï¼å ä¸ºçèµ·æ¥é½ä¸æ ·ï¼ï¼ä¼å¯¼è´æ·±åº¦ä¸¢å¤±ã</li>
<li><strong>åºçº¿éå¶ï¼</strong> æµéè·ç¦»åéäºåºçº¿ $B$ãå¦æè¦æµ 100 ç±³å¤çç©ä½ï¼åºçº¿å¿é¡»è¶³å¤å®½ï¼å¦åè§å·® $d$ å¤ªå°ï¼ä¼å¯¼è´è¯¯å·®å§å¢ã</li>
<li><strong>é®æ¡é®é¢ï¼</strong> å·¦ç¼çå¾å°çå°æ¹ï¼å³ç¼å¯è½è¢«æ¡ä½äºï¼æå½±åºï¼ï¼å¯¼è´æ æ³è®¡ç®ã</li>
</ol>
<hr>
<h4 id="6-åèèµæä¸ç»å¸æç®">6. åèèµæä¸ç»å¸æç®</h4>
<ol>
<li><strong>Scharstein, D., &amp; Szeliski, R. (2002).</strong> <em>A taxonomy and evaluation of dense two-frame stereo correspondence algorithms</em>. International Journal of Computer Vision.<br>
(ç«ä½å¹éé¢åçåºç³è®ºæï¼å®ä¹äºè¯ä¼°æ å)ã</li>
<li><strong>Hirschmuller, H. (2005).</strong> <em>Accurate and efficient stereo processing by semi-global matching and mutual information</em>. CVPR.<br>
(æåºäºèåç <strong>SGM ç®æ³</strong>ï¼è³ä»ä»æ¯è¯¥é¢åçå·¥ä¸æ å)ã</li>
<li><strong>Marr, D., &amp; Poggio, T. (1979).</strong> <em>A computational theory of human stereo vision</em>. Proceedings of the Royal Society of London.<br>
(ä»çç©å­¦åè®¡ç®è§è§è§åº¦è§£éäºäººç±»åç¼å¦ä½æç¥æ·±åº¦)ã</li>
<li><strong>Konolige, K. (1998).</strong> <em>Small Vision Systems: Hardware and Implementation</em>. International Symposium on Robotics Research.<br>
(è®²è§£äºå®æ¶åç®è§è§ç³»ç»çæ©æç¡¬ä»¶å®ç°)ã</li>
<li><strong>Zhang, Z. (2000).</strong> <em>A flexible new technique for camera calibration</em>. IEEE Transactions on Pattern Analysis and Machine Intelligence.<br>
(èåçâå¼ æ°æ å®æ³âï¼åç®ç¸æºæ å®çå¿å¤åºç¡)ã</li>
</ol>
<h3 id="c-ç¥ç»è¾å°åºnerf-neural-radiance-fields">C. ç¥ç»è¾å°åºï¼NeRF, Neural Radiance Fieldsï¼</h3>
<pre><code>*   **åæ²¿ï¼** 2020å¹´åççåæ§ææ¯ãå©ç¨æ·±åº¦å­¦ä¹ å°åºæ¯è¡¨ç¤ºä¸ºä¸ä¸ªè¿ç»­çä½ç§¯åºï¼éè¿ä½æ¸²æææ¯çææå¶é¼çç3Dè§å¾ã
</code></pre>
<p>å¦æè¯´ <strong>SfM</strong> æ¯å¨åâå ä½é¢âï¼<strong>åç®è§è§</strong>æ¯å¨åâç©çé¢âï¼é£ä¹ <strong>NeRFï¼Neural Radiance Fieldsï¼ç¥ç»è¾å°åºï¼</strong> å°±æ¯å¨ç¨âäººå·¥æºè½ç®æ³âè¿è¡ä¸æ¬¡é©å½æ§ç<strong>èºæ¯åä½</strong>ã</p>
<p>NeRF æ¯ 2020 å¹´è®¡ç®æºè§è§é¢åæå·é¢ è¦æ§çææ¯ä¹ä¸ãå®å½»åºæ¹åäºæä»¬å­å¨åè¡¨ç° 3D ä¸ççæ¹å¼ã</p>
<hr>
<h4 id="1-ä»ä¹æ¯-nerf">1. ä»ä¹æ¯ NeRFï¼</h4>
<p><strong>å®ä¹ï¼</strong><br>
NeRF æ¯ä¸ç§å©ç¨<strong>æ·±åº¦ç¥ç»ç½ç»ï¼éå¸¸æ¯å¤å±æç¥æº MLPï¼</strong>æ¥éå¼å°è¡¨ç¤º 3D åºæ¯çææ¯ãå®ä¸å­å¨ç¹äºï¼ä¹ä¸å­å¨ä¸è§é¢çï¼èæ¯å°æ´ä¸ª 3D åºæ¯ç¼ç è¿ä¸ä¸ªç¥ç»ç½ç»ç<strong>æé</strong>éã</p>
<p><strong>æ ¸å¿ç´è§ï¼</strong><br>
æ³è±¡ç©ºé´ä¸­åæ»¡äºâå¸¦é¢è²ççé¾âãå¨æ¯ä¸ä¸ªåæ ç¹ä¸ï¼çé¾é½æç¹å®çé¢è²åæµåº¦ãNeRF çç®æ æ¯è®­ç»ä¸ä¸ª AI å©æï¼å½ä½ é®å®ï¼âå¨åæ  $(x, y, z)$ è¿ä¸ªç¹ï¼ä» $(\theta, \phi)$ è¿ä¸ªè§åº¦çè¿å»æ¯ä»ä¹é¢è²ï¼âå®è½ç«å»è®¡ç®åºç»æã</p>
<hr>
<h4 id="2-nerf-çæ ¸å¿åç5d-å½æ°">2. NeRF çæ ¸å¿åçï¼5D å½æ°</h4>
<p>NeRF å°åºæ¯è¡¨ç¤ºä¸ºä¸ä¸ªè¿ç»­ç <strong>5D å½æ°</strong>ï¼</p>
<ul>
<li><strong>è¾å¥ (5ä¸ªåæ°)ï¼</strong> ç©ºé´ä½ç½® $(x, y, z)$ + è§å¯è§è§ $(\theta, \phi)$ã</li>
<li><strong>è¾åº (4ä¸ªåæ°)ï¼</strong> è¯¥ç¹çé¢è² $RGB$ + è¯¥ç¹çä½ç§¯å¯åº¦ $\sigma$ï¼å³åçº¿éè¿è¿éçé»åï¼ä»£è¡¨ç©ä½æ¯å¦å­å¨ï¼ã<br>
<img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202602/3724025-20260206090340946-1406476187.png" class="lazyload"></li>
</ul>
<ol>
<li><strong>éå¼è¡¨ç¤ºï¼Implicit Representationï¼ï¼</strong><br>
ä¼ ç»ç 3D æ¨¡ååâä¹é«ç§¯æ¨âï¼ä½ç´ ï¼æâæçº¸âï¼ç½æ ¼ï¼ãNeRF åâä¸æ®µä»£ç âï¼ä½ ç»å®åæ ï¼å®ååºé¢è²ãè¿ä½¿å¾å®è½è¡¨ç°æå¶ç²¾ç»çç»èï¼èä¸éè¦æµ·éçå­å¨ç©ºé´ã</li>
<li><strong>ä½ç½®ç¼ç ï¼Positional Encodingï¼ï¼</strong><br>
è¿æ¯ NeRF è½ç«çå³é®ãç¥ç»ç½ç»å¤©çå¾åäºå­¦ä¹ âå¹³æ»âçä¸è¥¿ï¼å®¹ææå¾ååæ¨¡ç³ãNeRF éè¿æåæ è½¬æ¢æé«é¢æ­£å¼¦/ä½å¼¦æ³¢ï¼å¼ºå¶ç½ç»è®°ä½ç»èï¼å¦ç©ä½çè¾¹ç¼ãç»å°ççº¹çï¼ã</li>
<li><strong>å¯å¾®ä½æ¸²æï¼Differentiable Volume Renderingï¼ï¼</strong><br>
è¿æ¯ NeRF çâæ¸²æå¼æâãå®æ²¿çç¸æºå°åºçä¸æ¡åçº¿è¿è¡éæ ·ï¼æè·¯å¾ä¸ææç¹çé¢è²åå¯åº¦å æç´¯å ï¼æç»å¾å°ä¸ä¸ªåç´ çé¢è²ãå ä¸ºæ´ä¸ªè¿ç¨æ¯<strong>æ°å­¦å¯å¯¼</strong>çï¼æä»¥å¯ä»¥éè¿å¯¹æ¯çæçå¾ååçå®ç§ççå·®å¼ï¼å©ç¨<strong>ååä¼ æ­</strong>æ¥è®­ç»ç½ç»ã</li>
</ol>
<hr>
<h4 id="3-nerf-çå·¥ä½æµç¨">3. NeRF çå·¥ä½æµç¨</h4>
<ol>
<li><strong>åå¤æ°æ®ï¼</strong> ææå åå¼ å°ä¸ç¾å¼ ç©ä½çç§çï¼å¹¶å©ç¨ <strong>SfM (å¦ COLMAP)</strong> ç®åºæ¯å¼ ç§çæææ¶çç²¾ç¡®ç¸æºä½ç½®ã</li>
<li><strong>åçº¿æå°ï¼</strong> å¯¹äºå¾åä¸çæ¯ä¸ªåç´ ï¼ä»ç¸æºä¸­å¿å°åºä¸æ¡ç©¿è¿è¯¥åç´ çåçº¿ã</li>
<li><strong>éæ ·ä¸æ¥è¯¢ï¼</strong> å¨è¿æ¡åçº¿ä¸éæ ·æç¾ä¸åä¸ªç¹ï¼æè¿äºç¹çåæ ä¸¢è¿ç¥ç»ç½ç»éã</li>
<li><strong>åæé¢è²ï¼</strong> ç¥ç»ç½ç»è¾åºè¿äºç¹çé¢è²åå¯åº¦ï¼éè¿ä½æ¸²æå¬å¼æå®ä»¬âæåâæä¸ä¸ªåç´ é¢è²ã</li>
<li><strong>ä¼åæéï¼</strong> æ¯è¾ AI çæçåç´ åç§çéççå®åç´ ãå¦æä¸ä¸æ ·ï¼å°±è°æ´ç¥ç»ç½ç»çåæ°ãéå¤æåä¸ä¸æ¬¡ï¼ç´å°ç½ç»è½å®ç¾é¢æµåºä»»ä½è§åº¦çç»é¢ã</li>
</ol>
<hr>
<h4 id="4-ä¸ºä»ä¹-nerf-ææè¿ä¹éæ¼">4. ä¸ºä»ä¹ NeRF ææè¿ä¹éæ¼ï¼</h4>
<ul>
<li><strong>ç§ççº§ççå®æï¼</strong> å®è½å®ç¾å¤çåæ³½è¡¨é¢ï¼å¦éå±çååï¼ãéæç©ä½ï¼å¦ç»çæ¯ï¼ä»¥åæå¶å¤æçå ä½ç»æï¼å¦å¤´åãæ å¶ï¼ï¼è¿äºé½æ¯ä¼ ç»ç¹äºæ Mesh çå©æ¢¦ã</li>
<li><strong>æ éçåè¾¨çï¼</strong> å ä¸ºæ¯è¿ç»­å½æ°ï¼çè®ºä¸ä½ å¯ä»¥æ éæ¾å¤§åºæ¯ã</li>
<li><strong>è§è§æå¼ï¼</strong> ä½ åªæäº 20 å¼ ç§çï¼ä½ NeRF å¯ä»¥çæç¸æºä»æªç»è¿çä½ç½®çå¹³æ»è§é¢ï¼ææå°±åå¨å¥½è±åçµå½±éç©¿æ¢­ä¸æ ·ã</li>
</ul>
<hr>
<h4 id="5-å±éæ§ä¸ç®åçç¶é¢">5. å±éæ§ä¸ç®åçç¶é¢</h4>
<p>å°½ç®¡æææè³ï¼ä½åç NeRF å­å¨ä»¥ä¸é®é¢ï¼</p>
<ol>
<li><strong>è®­ç»ææ¢ï¼</strong> 2020 å¹´ååºæ¥æ¶ï¼è®­ç»ä¸ä¸ªåºæ¯éè¦å å°æ¶çè³å å¤©ã</li>
<li><strong>æ¸²æï¼æ¨çï¼ææ¢ï¼</strong> çæä¸å¼ å¾éè¦å ç§éï¼æ æ³åå°å®æ¶äºå¨ã</li>
<li><strong>åºæ¯æ¯æ­»æ¿çï¼</strong> åç NeRF åªè½éå»ºéæåºæ¯ï¼å¦æç»é¢éæä¸è¥¿å¨å¨ï¼æèåçº¿åäºï¼æ¨¡åå°±ä¼å´©æºã</li>
<li><strong>éè¦ç¸æºä½å§¿ï¼</strong> å®æå¶ä¾èµ SfM æä¾çç²¾ç¡®åæ ï¼å¦æç§çä½å§¿ç®éäºï¼NeRF åºæ¥çç»æä¼æ¯ä¸å¢æµç³ã</li>
</ol>
<hr>
<h4 id="6-è¿åä¹è·¯nerf-çå­å­ä»¬">6. è¿åä¹è·¯ï¼NeRF çå­å­ä»¬ï¼</h4>
<p>ä¸ºäºè§£å³ä¸è¿°é®é¢ï¼è¯çäºä¸ç³»ååä½ï¼</p>
<ul>
<li><strong>Instant-NGP (NVIDIA)ï¼</strong> å°è®­ç»æ¶é´ä»å°æ¶çº§ç¼©ç­å°äº<strong>ç§çº§</strong>ã</li>
<li><strong>Mip-NeRFï¼</strong> è§£å³äºç©ä½å¨è¿è¿åæ¢æ¶çé¯é½¿é®é¢ã</li>
<li><strong>D-NeRF / NSVFï¼</strong> å°è¯å¤çä¼å¨çç©ä½ï¼å¨æåºæ¯ï¼ã</li>
<li><strong>3D Gaussian Splatting (2023)ï¼</strong> è½ç¶ä¸å®å¨æ¯ NeRFï¼ä½å®å¸åäº NeRF çææ³ï¼å®ç°äº<strong>çæ­£å®æ¶</strong>çé«è´¨éæ¸²æï¼æ¯ç®åæç«çæ¿ä»£æ¹æ¡ã</li>
</ul>
<hr>
<h4 id="7-åèæç®">7. åèæç®</h4>
<ol>
<li><strong>Mildenhall, B., Srinivasan, P. P., Tancik, M., Barron, J. T., Ramamoorthi, R., &amp; Ng, R. (2020).</strong> <em>NeRF: Representing Scenes as Neural Radiance Fields for View Synthesis</em>.<br>
ECCV. (NeRF çå¼å±±ä¹ä½)ã</li>
<li><strong>MÃ¼ller, T., Evans, A., Schied, C., &amp; Keller, A. (2022).</strong> <em>Instant Neural Graphics Primitives with a Multiresolution Hash Encoding</em>. ACM Transactions on Graphics.<br>
(NVIDIA æåºç Instant-NGPï¼è®© NeRF èµ°åå®ç¨å)ã</li>
<li><strong>Barron, J. T., et al. (2021).</strong> <em>Mip-NeRF: A Multiscale Representation for Anti-Aliasing Neural Radiance Fields</em>. ICCV.<br>
(è§£å³äºæé¯é½¿åå¤å°ºåº¦é®é¢)ã</li>
<li><strong>Tancik, M., et al. (2022).</strong> <em>Block-NeRF: Scalable Large Scene Neural View Synthesis</em>. CVPR.<br>
(è¯æäº NeRF å¯ä»¥ç¨æ¥éå»ºæ´ä¸ªåå¸è¡é)ã</li>
<li><strong>Martin-Brualla, R., et al. (2021).</strong> <em>NeRF in the Wild: Neural Radiance Fields for Unconstrained Photo Collections</em>. CVPR.<br>
(è§£å³äºå©ç¨äºèç½ä¹±ä¸å«ç³çç§çè¿è¡éå»ºçé®é¢)ã</li>
</ol>
<h3 id="d-3d-gaussian-splatting-3dgs">D. 3D Gaussian Splatting (3DGS)ï¼</h3>
<p><strong>ææ°ï¼</strong> 2023å¹´åºç°çææ¯ï¼éè¿å¤§é3Dé«æ¯æ¤­çä½æååºæ¯ï¼å®ç°äºæ¯NeRFæ´å¿«çæ¸²æéåº¦åæé«çéå»ºè´¨éã</p>
<p>å¦æè¯´ <strong>NeRF</strong> æ¯ 3D éå»ºé¢åçâæ°å­å¹»è§âï¼é£ä¹ <strong>3D Gaussian Splatting (3DGS)</strong> å°±æ¯å¨ 2023 å¹´æ¨ªç©ºåºä¸çâæ°å­ç»ç¬âã</p>
<p>3DGS çåºç°ç´æ¥è§£å³äº NeRF æ¸²ææ¢ãè®­ç»ä¹çæ ¸å¿çç¹ï¼å° 3D éå»ºæ¨åäº<strong>å®æ¶ãé«ç»è´¨ãå¯äº¤äº</strong>çæ°çºªåã</p>
<hr>
<h4 id="1-ä»ä¹æ¯-3d-gaussian-splatting-3dgs">1. ä»ä¹æ¯ 3D Gaussian Splatting (3DGS)ï¼</h4>
<p><strong>å®ä¹ï¼</strong><br>
3DGS æ¯ä¸ç§åºäº<strong>æ¾å¼è¾å°åºï¼Explicit Radiance Fieldï¼</strong>çåºæ¯è¡¨ç¤ºææ¯ãå®ä¸ä½¿ç¨ç¥ç»ç½ç»æ¥âçâé¢è²ï¼èæ¯ç´æ¥å¨ç©ºé´ä¸­ææ´æ°ç¾ä¸ä¸ªå¸¦æé¢è²ãå½¢ç¶åéæåº¦ç<strong>3D é«æ¯æ¤­çä½ï¼Gaussian Kernelsï¼</strong>ï¼éè¿è¿äºæ¤­çä½çå å æ¥æ¼ååºæ´ä¸ªä¸çã</p>
<p><strong>å½¢è±¡æ¯å»ï¼</strong></p>
<ul>
<li><strong>NeRF</strong> åæ¯ä¸ä¸ªè®°å¿åè¶å¼ºçç»å¸ï¼ä½ é®ä»ç»éæä¸ªåæ æ¯ä»ä¹é¢è²ï¼ä»æ³ä¸ä¸åè¯ä½ ã</li>
<li><strong>3DGS</strong> åæ¯ä¸ä¸ªè´´çº¸å¤§å¸ï¼ä»ç´æ¥å¨éæçç©ºé´éè´´äºæ°ç¾ä¸å¼ åéæçå½©è²è´´çº¸ï¼æ¤­çä½ï¼ï¼ä½ ä»ä»»ä½è§åº¦çè¿å»ï¼è¿äºè´´çº¸å å å¨ä¸èµ·å°±æ¯ä¸å¼ å®ç¾çç§çã</li>
</ul>
<hr>
<h4 id="2-æ ¸å¿åç3d-é«æ¯æ¤­çä½çåºå ">2. æ ¸å¿åçï¼3D é«æ¯æ¤­çä½çâåºå â</h4>
<p>æ¯ä¸ä¸ª 3D é«æ¯æ¤­çä½é½åå«äºä¸ç»æå¶ç²¾ç®çæ°å­¦åæ°ï¼åºå ï¼ï¼</p>
<ol>
<li><strong>ä¸­å¿ä½ç½® (Position, $X, Y, Z$)ï¼</strong> æ¤­çä½å¨åªã</li>
<li><strong>åæ¹å·®ç©éµ (Covariance, $\Sigma$)ï¼</strong> å³å®æ¤­çä½ç<strong>å½¢ç¶åæ¹å</strong>ãä¸ºäºæ¹ä¾¿è®¡ç®ï¼å®è¢«åè§£ä¸ºï¼
<ul>
<li><strong>ç¼©æ¾ (Scaling)ï¼</strong> å®æ¯é¿çãåçè¿æ¯æçã</li>
<li><strong>æè½¬ (Rotation)ï¼</strong> å®æ¯æ¨ªççè¿æ¯æççã</li>
</ul>
</li>
<li><strong>ä¸éæåº¦ (Opacity, $\alpha$)ï¼</strong> è¿ä¸ªæ¤­çä½æå¤éæã</li>
<li><strong>çè°å½æ°é¢è² (Spherical Harmonics, SH)ï¼</strong> è¿æ¯ä¸ç§ç¹æ®çé¢è²è¡¨ç¤ºæ³ãå®ä¸åªæ¯ä¸ä¸ªåä¸é¢è²ï¼èæ¯è®°å½äº<strong>ä»ä¸åæ¹åçè¿ä¸ªç¹æ¶é¢è²çåå</strong>ï¼æ¯å¦éå±çé«åï¼ã</li>
</ol>
<hr>
<h4 id="3-å·¥ä½æµç¨ä»ç¹äºå°ç²¾ç¾å»ºæ¨¡">3. å·¥ä½æµç¨ï¼ä»ç¹äºå°ç²¾ç¾å»ºæ¨¡</h4>
<p><strong>ç¬¬ä¸æ­¥ï¼åå§å (Initialization)</strong><br>
3DGS éå¸¸ä»¥ <strong>SfM (å¦ COLMAP)</strong> äº§ççç¨çç¹äºä½ä¸ºèµ·ç¹ãæ¯ä¸ªç¹è¢«åå§åä¸ºä¸ä¸ªå°ç 3D é«æ¯çã</p>
<p><strong>ç¬¬äºæ­¥ï¼å¯å¾®æå½±ä¸æ¸²æ (Splatting &amp; Rasterization)</strong><br>
è¿æ¯ 3DGS éåº¦æå¿«çç§è¯ã</p>
<ul>
<li>ç®æ³å° 3D çæ¤­çä½å¹³æåï¼æå½±ï¼å° 2D å±å¹ä¸ï¼åæä¸ä¸ªä¸ª 2D æ¤­åã</li>
<li>éç¨<strong>åºäºååï¼Tile-basedï¼çå¿«éåæ åæ¸²æå¨</strong>ãå®å°å±å¹åæè®¸å¤å°æ ¼å­ï¼Tilesï¼ï¼åªæ¸²æå¯¹è¿ä¸ªæ ¼å­æè´¡ç®çæ¤­çä½ãè¿ä¸ç°ä»£æ¾å¡ï¼GPUï¼çå¤çé»è¾å®å¨å¹éã<br>
<img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202602/3724025-20260206090341298-382707320.png" class="lazyload"></li>
</ul>
<p><strong>ç¬¬ä¸æ­¥ï¼èªéåºå¯åº¦æ§å¶ (Adaptive Density Control)</strong><br>
è¿æ¯ 3DGS çâè¿åâè¿ç¨ãå¨ä¼åè¿ç¨ä¸­ï¼ç®æ³ä¼è§å¯ï¼</p>
<ul>
<li><strong>åé (Clone)ï¼</strong> å¦ææä¸ªå°æ¹å¤ªå¹³æ»ï¼ç¹ä¸å¤ç¨ï¼å°±å¨é£å¤å¶ä¸ä¸ªç¹ã</li>
<li><strong>åè£ (Split)ï¼</strong> å¦ææä¸ªæ¤­çä½å¤ªå¤§ãå¤ªæ¨¡ç³ï¼å°±æå®ææä¸¤ä¸ªå°çã</li>
<li><strong>ä¿®åª (Culling)ï¼</strong> å¦ææä¸ªæ¤­çä½ä¸éæåº¦æä½ï¼åºæ¬çä¸è§ï¼å°±æå®å æã</li>
</ul>
<hr>
<p><strong>ä¸ºä»ä¹ 3DGS è½å¨ 2023 å¹´å¼çææ¯åï¼</strong></p>
<ol>
<li><strong>æ¸²æéåº¦èµ·é£ï¼</strong> NeRF æ¸²æä¸å¼ å¾éè¦å ç§éï¼è 3DGS å¯ä»¥å¨æ®éç GPU ä¸å®ç° <strong>100+ FPS</strong>ï¼æ¯ç§å¸§æ°ï¼çå®æ¶æ¸²æã</li>
<li><strong>è®­ç»æ¶é´æç­ï¼</strong> ä¸ä¸ªä¸­ç­å¤æçåºæ¯ï¼NeRF å¯è½è¦è®­ç»å å°æ¶ï¼3DGS åªéè¦ <strong>5-10 åé</strong>ã</li>
<li><strong>æ¾å¼å­å¨ï¼</strong> å ä¸ºå®æ¯æ°ç¾ä¸ä¸ªç¹ï¼ä½ å¯ä»¥ç´æ¥å¨ 3D è½¯ä»¶éçå°è¿äºç¹ï¼çè³å¯ä»¥æå¨å é¤ãç§»å¨æç¼©æ¾å¶ä¸­çä¸é¨åï¼è¿å¨ NeRF çç¥ç»ç½ç»æééæ¯å ä¹åä¸å°çã</li>
<li><strong>è§è§æææè³ï¼</strong> 3DGS ææç²¾ç»ç»èï¼å¦æ å¶ãæ¯åãèé¾ï¼çè½åæå¼ºï¼ç»é¢è¾¹ç¼æ¯ NeRF æ´å éå©ã</li>
</ol>
<hr>
<h4 id="5-ç®åçç¶é¢ä¸ææ">5. ç®åçç¶é¢ä¸ææ</h4>
<ol>
<li><strong>æ¾å­ååå¤§ (VRAM Intensive)ï¼</strong> æ¸²æè½ç¶å¿«ï¼ä½è¦å¨æ¾å­éå­å¨æ°ç¾ä¸ä¸ªé«æ¯åæ°ï¼éå¸¸åæ¾å­ï¼éå¸¸éè¦ 8GB ä»¥ä¸çæ¾å­æè½æµçè¿è¡å¤§ååºæ¯ï¼ã</li>
<li><strong>å­å¨ç©ºé´å·¨å¤§ï¼</strong> ä¸ä¸ªé«è´¨éåºæ¯çæ¨¡åæä»¶å¯è½é«è¾¾ <strong>æ°ç¾ MB çè³å ä¸ª GB</strong>ï¼è NeRF åªéè¦å  MB çç¥ç»ç½ç»æéã</li>
<li><strong>ä¾èµåå§åï¼</strong> å¦æ SfM åºæ¥çåå§ç¹äºå¤ªå·®ï¼æ¯å¦å¨åæ»å¹³é¢ä¸æ²¡åå°ç¹ï¼ï¼3DGS å¾é¾å­ç©ºçæé«è´¨éçæ¤­çä½ï¼ä¼åºç°ææ¾çâç ´æ´âã</li>
<li><strong>ä¼ªå½± (Artifacts)ï¼</strong> å¨è§è§ååå§çæ¶ï¼ææ¶ä¼çå°æ¤­çä½åâå½©è²éªè±âä¸æ ·æ¼æµ®ã</li>
</ol>
<hr>
<h4 id="6-åèæç®">6. åèæç®</h4>
<ol>
<li><strong>Kerbl, B., Kopanas, G., LeimkÃ¼hler, T., &amp; Drettakis, G. (2023).</strong> <em>3D Gaussian Splatting for Real-Time Radiance Field Rendering</em>. ACM Transactions on Graphics (SIGGRAPH).<br>
(3DGS çå¼å±±é¼»ç¥ï¼ç®åè¯¥é¢åå¼ç¨éæé«çè®ºæ)ã</li>
<li><strong>Zwicker, M., Pfister, H., van Baar, J., &amp; Gross, M. (2001).</strong> <em>Surface Splatting</em>. SIGGRAPH.<br>
(3DGS æ ¸å¿ææ³âSplattingâçæ©æçè®ºæ¥æº)ã</li>
<li><strong>Luan, F., et al. (2024).</strong> <em>GPS-Gaussian: Generalizable Pixel-wise 3D Gaussian Splatting for Real-time Human Novel View Synthesis</em>.<br>
(å° 3DGS åºç¨äºäººä½å¨æå»ºæ¨¡çåæ²¿å·¥ä½)ã</li>
<li><strong>Niedermayr, S., et al. (2023).</strong> <em>Compressed 3D Gaussian Splatting for Highly Accessible Novel View Synthesis</em>.<br>
(éå¯¹ 3DGS å­å¨ä½ç§¯è¿å¤§é®é¢çæ©æä¼åç ç©¶)ã</li>
<li><strong>Chen, Z., et al. (2023).</strong> <em>MCMC-GS: Multi-Scale 3D Gaussian Splatting for Large-Scale Scene Reconstruction</em>.<br>
(éå¯¹å¤§è§æ¨¡åå¸åºæ¯ç 3DGS æ¹è¿ç®æ³)ã</li>
</ol>
<h2 id="äº-ä¸»å¨è§è§active-vision-èªå¸¦åæº">äº. ä¸»å¨è§è§ï¼Active Visionï¼ââ èªå¸¦åæº</h2>
<p>è¿ç±»æ¹æ³éè¿åç©ä½åå°ç¹å®åçº¿æ¥è¾å©æµéã</p>
<ol>
<li><strong>ç»æåï¼Structured Lightï¼ï¼</strong>
<ul>
<li><strong>åçï¼</strong> æå½±ä»ªåç©ä½æå°ç¹å®çåæ å¾æ¡ï¼ç¸æºææè¢«ç©ä½è¡¨é¢ç¸ååçå¾æ¡ï¼éè¿æ°å­¦è®¡ç®å¾åºæ·±åº¦ã</li>
<li><strong>ä»£è¡¨ï¼</strong> iPhoneçåç½®FaceIDã<br>
å¦æè¯´ <strong>SfM</strong> å<strong>åç®è§è§</strong>æ¯å©ç¨âèªç¶çç¼çâå»è§å¯ä¸çï¼é£ä¹<strong>ç»æåï¼Structured Lightï¼</strong>åæ¯ç»æºå¨è£ä¸äºä¸å°âä¸»å¨æµéå°ºâã</li>
</ul>
</li>
</ol>
<p>å®æ¯ç®åé«ç²¾åº¦ 3D æ«æãäººè¸è¯å«ï¼å¦ iPhone FaceIDï¼åå·¥ä¸ç²¾å¯æ£æµé¢åææ ¸å¿çææ¯ã</p>
<hr>
<h3 id="a-ç»æåææ¯">A. ç»æåææ¯</h3>
<h4 id="å®ä¹-1"><strong>å®ä¹ï¼</strong></h4>
<p>ç»æåæ¯ä¸ç§<strong>ä¸»å¨è§è§</strong>æµéææ¯ãå®éè¿æå½±ä»ªåç©ä½è¡¨é¢æå°ç¹å®ç<strong>å·²ç¥å¾æ¡</strong>ï¼å¦æ ¼ç¹ãæ¡çº¹ãç¼ç å¾ï¼ï¼åç±ç¸æºææè¿äºå¾æ¡å¨ç©ä½è¡¨é¢åçç<strong>å ä½ç¸å</strong>ï¼éè¿ä¸è§æµéåçè®¡ç®åºç©ä½çä¸ç»´ç©ºé´åæ ã</p>
<p><strong>å½¢è±¡æ¯å»ï¼</strong><br>
æ³è±¡ä½ å¨é»æä¸­é¢å¯¹ä¸é¢å¹å¸ä¸å¹³çå¢ãä½ æå¼ä¸æ¯æçµç­ï¼æçµç­çåç½©ä¸ç»çæ´é½çæ¹æ ¼ã</p>
<ul>
<li>å¦æå¢æ¯å¹³çï¼ä½ å¨å¢ä¸çå°çæ¹æ ¼ä¹æ¯æ´é½çã</li>
<li>å¦æå¢ä¸æä¸ªåæèå¸èµ·ï¼æ¹æ ¼çº¿å°±ä¼åå¾å¼¯æ²ã</li>
<li>éè¿è§å¯æ¹æ ¼çº¿âå¼¯äºå¤å°âï¼ä½ å°±è½æ¨ç®åºå¢é¢çèµ·ä¼ãè¿å°±æ¯ç»æåã</li>
</ul>
<p><img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202602/3724025-20260206090340298-1210460548.png" class="lazyload"></p>
<hr>
<h4 id="2-æ ¸å¿æ°å­¦åçåå½¢çä¸è§æµé">2. æ ¸å¿æ°å­¦åçï¼åå½¢çä¸è§æµé</h4>
<p>ç»æåæ¬è´¨ä¸æ¯<strong>åç®è§è§çåç§</strong>ã</p>
<ul>
<li>å¨åç®è§è§ä¸­ï¼æä»¬éè¦ä¸¤ä¸ªç¸æºä»ä¸åè§åº¦çåä¸ä¸ªç¹ã</li>
<li>å¨ç»æåä¸­ï¼æä»¬ç¨ä¸ä¸ª<strong>æå½±ä»ª</strong>æ¿ä»£äºå¶ä¸­ä¸ä¸ªç¸æºã</li>
</ul>
<p><strong>æ°å­¦é»è¾ï¼</strong></p>
<ol>
<li><strong>å·²ç¥æ¡ä»¶ï¼</strong> æå½±ä»ªæå°åºçåæè§åº¦æ¯å·²ç¥çï¼ç¸æºä¸æå½±ä»ªä¹é´çè·ç¦»ï¼åºçº¿ $B$ï¼æ¯åºå®çã</li>
<li><strong>å¯»æ¾å¹éï¼</strong> æå½±ä»ªæåºçæ¯ä¸ä¸ªåç¹ï¼æçº¿æ¡ï¼é½æä¸ä¸ªå¯ä¸çâç¼ç âãç¸æºæå°è¿ä¸ªç¹åï¼ç«å»å°±è½ç¥éå®æ¯ä»æå½±ä»ªçåªä¸ªè§åº¦å°åºæ¥çã</li>
<li><strong>å ä½æ±è§£ï¼</strong> æå½±ä»ªååºçå°çº¿ä¸ç¸æºæ¥æ¶å°çå°çº¿å¨ç©ºé´ä¸­ç¸äº¤ãæ ¹æ®<strong>æ­£å¼¦å®ç</strong>æç®åç<strong>ä¸è§å½æ°</strong>ï¼å³å¯è§£ç®åºè¯¥äº¤ç¹çä¸ç»´åæ  $(X, Y, Z)$ã</li>
</ol>
<hr>
<h4 id="3-ç¼ç æ¹å¼ç»æåçè¯­è¨">3. ç¼ç æ¹å¼ï¼ç»æåçâè¯­è¨â</h4>
<p>ç»æåææ ¸å¿çç«äºåå¨äºå¦ä½è®¾è®¡æå°çâå¾æ¡âãç®åä¸»æµæä¸ç§ï¼</p>
<p><strong>A. ç©ºé´ç¼ç  (Spatial Coding) ââ ä»£è¡¨ï¼iPhone FaceID</strong></p>
<ul>
<li><strong>åæ³ï¼</strong> ä¸æ¬¡æ§æå°ä¸ä¸ªå¤æçæ£æå¾æ¡ï¼ç±»ä¼¼æ»¡å¤©æï¼ã</li>
<li><strong>ç¹ç¹ï¼</strong> åªéææä¸å¼ å¾çå³å¯å®æéå»ºï¼éåº¦æå¿«ï¼éåå¨æç©ä½ï¼å¦äººè¸ï¼ã<br>
<img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202602/3724025-20260206090341092-1937191911.png" class="lazyload"></li>
</ul>
<p><strong>B. æ¶é´ç¼ç  (Temporal Coding) ââ ä»£è¡¨ï¼å·¥ä¸ 3D æ«æä»ª</strong></p>
<ul>
<li><strong>åæ³ï¼</strong> è¿ç»­æå°å¤å¼ ä¸åé¢ççé»ç½æ¡çº¹ï¼å¦æ ¼é·ç  + æ­£å¼¦æ¡çº¹ï¼ã</li>
<li><strong>ç¹ç¹ï¼</strong> ç²¾åº¦æé«ï¼å¯è¾¾å¾®ç±³çº§ï¼ï¼ä½ç©ä½å¿é¡»ä¿æéæ­¢ï¼å ä¸ºéè¦ææå¤å¼ ç§çã<br>
<img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202602/3724025-20260206090341051-742264660.png" class="lazyload"></li>
</ul>
<p><strong>C. ç¸ç§»æ³ (Phase Shifting)</strong></p>
<ul>
<li><strong>åæ³ï¼</strong> æå°å¨ææ§çæ­£å¼¦åæ ï¼éè¿åæåæ³¢ç¸ä½çåç§»æ¥æåé«åº¦ä¿¡æ¯ã<br>
<img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202602/3724025-20260206090340635-1134427730.png" class="lazyload"></li>
</ul>
<hr>
<h4 id="4-æ·±åº¦è§£æiphone-faceid-æ¯å¦ä½å·¥ä½ç">4. æ·±åº¦è§£æï¼iPhone FaceID æ¯å¦ä½å·¥ä½çï¼</h4>
<p>FaceID æ¯ç»æåææ¯å°ååãæ¶è´¹çº§åºç¨çå·å³°ãå®åå«ä¸ä¸ªæ ¸å¿ç»ä»¶ï¼</p>
<ol>
<li><strong>ç¹éµæå½±å¨ (Dot Projector)ï¼</strong> åä½ çè¸é¨æå°è¶è¿ <strong>30,000 ä¸ª</strong>èç¼ä¸å¯è§ççº¢å¤æ£æç¹ã</li>
<li><strong>çº¢å¤æåå¤´ (Infrared Camera)ï¼</strong> è¯»åè¿äºæ£æå¨è¸é¨èµ·ä¼ä¸å½¢æçç¸åå¾åã</li>
<li><strong>æ³åæåºåä»¶ (Flood Illuminator)ï¼</strong> ç¡®ä¿å¨å¨é»ç¯å¢ä¸ä¹è½ç§äº®è¸é¨ï¼ä¾çº¢å¤ç¸æºè¯å«ã</li>
</ol>
<p><strong>ä¸ºä»ä¹å®å®å¨ï¼</strong><br>
å ä¸ºå®ä¸æ¯å¨å¯¹æ¯âç§çâï¼èæ¯å¨å¯¹æ¯ä½ è¸é¨ç<strong>ä¸ç»´å°å½¢å¾</strong>ãç§çæ¯å¹³é¢çï¼æ æ³äº§çç»æåçç¸åææï¼å æ­¤æ æ³æ¬ºéª FaceIDã</p>
<hr>
<h4 id="5-ç»æåçä¼ç¼ºç¹">5. ç»æåçä¼ç¼ºç¹</h4>
<p><strong>ä¼ç¹ï¼</strong></p>
<ol>
<li><strong>æ éç¯å¢çº¹çï¼</strong> å³ä½¿æ¯çº¯ç½è²çå¢ï¼ç»æåä¹è½éå»ºï¼å ä¸ºå®èªå·±æå°äºçº¹çï¼ï¼è¿å¼¥è¡¥äºåç®è§è§çç­æ¿ã</li>
<li><strong>ç²¾åº¦æé«ï¼</strong> å¨è¿è·ç¦»ï¼1ç±³ä»¥åï¼ï¼ç»æåçç²¾åº¦å¯ä»¥è½»æ¾è¾¾å°æ¯«ç±³çè³å¾®ç±³çº§ã</li>
<li><strong>ä¸»å¨è¡¥åï¼</strong> å¨å¨é»çç¯å¢ä¸ä¾ç¶è½å·¥ä½ã</li>
</ol>
<p><strong>ç¼ºç¹ï¼</strong></p>
<ol>
<li><strong>æå¼ºåï¼</strong> å¨å®¤å¤å¼ºåï¼å¦é³åï¼ä¸ï¼æå½±ä»ªçåä¼è¢«é³åæ·¹æ²¡ï¼å¯¼è´å¤±æã</li>
<li><strong>è·ç¦»éå¶ï¼</strong> æå½±ä»ªåçæéï¼éå¸¸åªéç¨äºè¿è·ç¦»ï¼å¦ææºè§£éãæ¡é¢æ«æï¼ã</li>
<li><strong>æè´¨ææï¼</strong> é¢å¯¹éé¢ååç©ä½æå¨é»å¸åç©ä½ï¼æå°çåä¼æ¶å¤±æä¹±å°ï¼å¯¼è´æ æ³æåã</li>
</ol>
<hr>
<h3 id="6-åèæç®-1">6. åèæç®</h3>
<ol>
<li><strong>Geng, J. (2011).</strong> <em>Structured-light 3D surface imaging: a tutorial</em>. Advances in Optics and Photonics.<br>
(æç»å¸çç»æåç»¼è¿°æ§æç¨)ã</li>
<li><strong>Scharstein, D., &amp; Szeliski, R. (2003).</strong> <em>High-accuracy stereo depth maps using structured light</em>. CVPR.<br>
(æ¢è®¨äºå¦ä½å©ç¨ç»æåè·åæé«ç²¾åº¦çæ·±åº¦å¾)ã</li>
<li><strong>Salvi, J., et al. (2004).</strong> <em>Pattern codification strategies in structured light systems</em>. Pattern Recognition.<br>
(è¯¦ç»å¯¹æ¯äºåç§ç¼ç å¾æ¡çä¼å£)ã</li>
<li><strong>Apple Inc.</strong> <em>About Face ID advanced technology</em>. Support Documentation.<br>
(è½ç¶ä¸æ¯å­¦æ¯è®ºæï¼ä½æ­ç¤ºäºæ¶è´¹çº§ç»æåç³»ç»çç¡¬ä»¶æ¶æ)ã</li>
<li><strong>Zuo, C., et al. (2016).</strong> <em>Micro-structured-light 3D surface profiling: A review</em>. Measurement.<br>
(èç¦äºå¾®è§é¢åé«ç²¾åº¦ç»æåæµéçç»¼è¿°)ã</li>
</ol>
<h3 id="é£è¡æ¶é´æ³tof-time-of-flight">é£è¡æ¶é´æ³ï¼ToF, Time of Flightï¼</h3>
<p><strong>åçï¼</strong> åå°çº¢å¤èå²ï¼æµéåçº¿åå°åæ¥çæ¶é´ã<br>
<strong>ä»£è¡¨ï¼</strong> æ¿åé·è¾¾ï¼LiDARï¼ãKinect 2.0ã<br>
å¦æè¯´<strong>ç»æå</strong>æ¯å©ç¨âå ä½ç¸åâæ¥æµéï¼é£ä¹<strong>é£è¡æ¶é´æ³ï¼ToF, Time of Flightï¼</strong>å°±æ¯å©ç¨âç»å¯¹éåº¦âæ¥æµéã</p>
<p>ToF æ¯ç®å 3D æç¥é¢åä¸­éåº¦æå¿«ãå»¶è¿æä½çææ¯ãå®å¹¿æ³åºç¨äºèªå¨é©¾é©¶çæ¿åé·è¾¾ï¼LiDARï¼ãææºåç½®æ·±åº¦æåå¤´ï¼å¦ iPhone ç LiDAR æ«æä»ªï¼ä»¥åæ©æçä½ææ¸¸æè®¾å¤ã</p>
<hr>
<h4 id="1-ä»ä¹æ¯-tof-é£è¡æ¶é´æ³">1. ä»ä¹æ¯ ToF (é£è¡æ¶é´æ³)ï¼</h4>
<p><strong>å®ä¹ï¼</strong><br>
ToF æ¯ä¸ç§éè¿æµéåæ³¢å¨ä¼ æå¨ä¸ç®æ ç©ä½ä¹é´âé£è¡âçæ¶é´ï¼æ¥è®¡ç®ç®æ è·ç¦»çææ¯ãå ä¸ºåçä¼ æ­éåº¦ $c$ æ¯å·²ç¥çå¸¸æ°ï¼åªè¦ç¥éäºæ¶é´ $t$ï¼è·ç¦» $d$ ä¹å°±è¿åèè§£ã</p>
<p><strong>å½¢è±¡æ¯å»ï¼</strong><br>
æ³è±¡ä½ å¯¹çä¸å£æ·±äºå¤§åä¸å£°ï¼ç¶åå¼å§è®¡æ¶ãå½ä½ å¬å°åå£°æ¶ï¼åæ­¢è®¡æ¶ã</p>
<ul>
<li><strong>å£°çº³/é·è¾¾ï¼</strong> å©ç¨å£°æ³¢ææ çº¿çµæ³¢çåå°ã</li>
<li><strong>ToFï¼</strong> å©ç¨åæ³¢ï¼éå¸¸æ¯ 850nm-940nm çè¿çº¢å¤åï¼ãç±äºåéæå¿«ï¼æ¯ç§ 30 ä¸å¬éï¼ï¼ToF è¯çéè¦å·å¤âç®ç§çº§âï¼ä¸äº¿åä¹ä¸ç§ï¼çè®¡æ¶ç²¾åº¦ã</li>
</ul>
<hr>
<h4 id="2-æ ¸å¿æ°å­¦åçæéå¬å¼">2. æ ¸å¿æ°å­¦åçï¼æéå¬å¼</h4>
<p>ToF çåºæ¬åçéå¸¸ç´è§ï¼ä½å®ç°æ¹æ³åä¸ºä¸¤ç§ä¸»è¦æµæ´¾ï¼<strong>dToF</strong> å <strong>iToF</strong>ã</p>
<p><strong>A. dToF (Direct ToFï¼ç´æ¥æµé) ââ ä»£è¡¨ï¼æ¿åé·è¾¾ (LiDAR)</strong><br>
è¿æ¯æç¡¬æ ¸çæ¹å¼ãä¼ æå¨ç´æ¥åå°ä¸ä¸ªæç­çåèå²ï¼å¹¶å¯å¨ä¸ä¸ªè¶é«ç²¾åº¦çâç§è¡¨âï¼è®°å½åå­é£åºå»å¹¶è·³åæ¥çç¡®åæ¶é´ $\Delta t$ã</p>
<ul>
<li><strong>å¬å¼ï¼</strong> $d = \frac{c \cdot \Delta t}{2}$</li>
<li><strong>é¾ç¹ï¼</strong> åéå¤ªå¿«ï¼åèµ° 1 åç±³åªéè¦çº¦ 33 ç®ç§ãè¿å°±è¦æ±ä¼ æå¨ï¼éå¸¸æ¯ SPADï¼ååå­éªå´©äºæç®¡ï¼å·ææå¶ææçååºéåº¦ã</li>
</ul>
<p><strong>B. iToF (Indirect ToFï¼é´æ¥æµé) ââ ä»£è¡¨ï¼Kinect 2.0</strong><br>
ç±äºç²¾ç¡®è®¡æ¶å¤ªé¾ä¸è´µï¼iToF éç¨äºâæ²çº¿æå½âçæ¹æ³ï¼å®åå°çæ¯<strong>è¿ç»­çæ­£å¼¦è°å¶åæ³¢</strong>ï¼éè¿æµéåå°æ³¢ä¸åå°æ³¢ä¹é´ç<strong>ç¸ä½å·®ï¼Phase Shiftï¼</strong>æ¥æ¨ç®æ¶é´ã</p>
<ul>
<li><strong>é»è¾ï¼</strong> ç¸ä½åç§»äºå¤å°åº¦ï¼å°±ä»£è¡¨æ¶é´è¿å»äºå¤ä¹ã</li>
<li><strong>ä¼ç¹ï¼</strong> ç¡¬ä»¶ææ¬è¾ä½ï¼åç´ åè¾¨çå¯ä»¥åå¾å¾é«ï¼ç±»ä¼¼ææºæåå¤´ï¼ã</li>
</ul>
<hr>
<h4 id="3-tof-çå·¥ä½æµç¨">3. ToF çå·¥ä½æµç¨</h4>
<ol>
<li><strong>åå°åå (Emitter)ï¼</strong> ååºç»è¿è°å¶ççº¢å¤æ¿åæèå²ã</li>
<li><strong>åå° (Reflection)ï¼</strong> åçº¿è§¦ç¢°ç©ä½è¡¨é¢ååçå¼¥æ£åå°ã</li>
<li><strong>æ¥æ¶åå (Sensor)ï¼</strong> ä¸ä¸ªç¹æ®ç CMOS å¾åä¼ æå¨ææè¿åçåä¿¡å·ã</li>
<li><strong>å¤çåå (Processor)ï¼</strong>
<ul>
<li>å¯¹äº dToFï¼ç»è®¡åå­å°è¾¾çç´æ¹å¾ï¼ç¡®å®å³°å¼æ¶é´ã</li>
<li>å¯¹äº iToFï¼è®¡ç®æ¯ä¸ªåç´ ç¹ççµè·å·®å¼ï¼è½¬æ¢æç¸ä½ï¼åæ¢ç®ææ·±åº¦å¼ã</li>
</ul>
</li>
<li><strong>è¾åºï¼</strong> çæä¸å¼ <strong>æ·±åº¦å¾ï¼Depth Mapï¼</strong>ï¼æ¯ä¸ªåç´ ä»£è¡¨è¯¥ç¹çç©çè·ç¦»ã</li>
</ol>
<hr>
<h4 id="4-tof-vs-ç»æåæä»ä¹åºå«">4. ToF vs. ç»æåï¼æä»ä¹åºå«ï¼</h4>
<table>
<thead>
<tr>
<th style="text-align: left">ç¹æ§</th>
<th style="text-align: left">ToF (é£è¡æ¶é´æ³)</th>
<th style="text-align: left">ç»æå (Structured Light)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left"><strong>è®¡ç®é</strong></td>
<td style="text-align: left"><strong>æä½</strong>ï¼ç¡¬ä»¶ç´æ¥è¾åºç»æï¼</td>
<td style="text-align: left"><strong>é«</strong>ï¼éè¦å¤æçå¾åå¯¹æ¯åæï¼</td>
</tr>
<tr>
<td style="text-align: left"><strong>å·¥ä½è·ç¦»</strong></td>
<td style="text-align: left"><strong>è¿</strong>ï¼æ¿åé·è¾¾å¯è¾¾æ°ç¾ç±³ï¼</td>
<td style="text-align: left"><strong>ç­</strong>ï¼éå¸¸ 1 ç±³ä»¥åï¼</td>
</tr>
<tr>
<td style="text-align: left"><strong>æå¹²æ°æ§</strong></td>
<td style="text-align: left">è¾å¼ºï¼å°¤å¶ dToF éåå®¤å¤ï¼</td>
<td style="text-align: left">è¾å¼±ï¼å¼ºåä¸å¾æ¡ä¼è¢«æ·¹æ²¡ï¼</td>
</tr>
<tr>
<td style="text-align: left"><strong>åè¾¨ç</strong></td>
<td style="text-align: left">è¾ä½ï¼éå¸¸æ¯ QVGA çº§ï¼</td>
<td style="text-align: left">è¾é«ï¼å¯ä»¥è¾¾å°ç¾ä¸åç´ ï¼</td>
</tr>
<tr>
<td style="text-align: left"><strong>åºç¨åºæ¯</strong></td>
<td style="text-align: left">æ«å°æºå¨äººãèªå¨é©¾é©¶ãAR å»ºæ¨¡</td>
<td style="text-align: left">ææºé¢é¨è§£éãç²¾å¯æ«æãæ´»ä½æ£æµ</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="5-ç®åçç¶é¢ä¸ææ-1">5. ç®åçç¶é¢ä¸ææ</h4>
<ol>
<li><strong>å¤å¾å¹²æ° (Multi-path Interference)ï¼</strong><br>
å¦æåçº¿å¨å¢è§ç»è¿å¤æ¬¡åå°æåå°ä¼ æå¨ï¼ToF ä¼è¯¯ä»¥ä¸ºç©ä½æ¯å®éæ´è¿ï¼äº§çâæ·±åº¦éå½±âã</li>
<li><strong>é£ç¹æåº (Flying Pixels)ï¼</strong><br>
å¨ç©ä½çè¾¹ç¼ï¼ä¸ä¸ªåç´ å¯è½åæ¶æ¥æ¶å°ç©ä½è¡¨é¢åèæ¯å¢çåå°ä¿¡å·ï¼å¯¼è´è¾¹ç¼åºç°ä¸åè«é¡»æçâé£ç¹âã</li>
<li><strong>ç¯å¢åå¹²æ°ï¼</strong><br>
è½ç¶ iToF å¨å®¤åè¡¨ç°ä¼å¼ï¼ä½å¨å¤ªé³åä¸ï¼çº¢å¤ååªå£°å·¨å¤§ï¼ä¼å¯¼è´ç²¾åº¦å¤§å¹ä¸éï¼dToF éè¿ååå­ææ¯ç¼è§£äºè¿ä¸é®é¢ï¼ã</li>
<li><strong>åèé®é¢ï¼</strong><br>
å ä¸ºè¦ä¸æ­å°ä¸»å¨åå°åï¼ToF ä¼ æå¨éå¸¸æ¯æ®éæåå¤´æ´èçµã</li>
</ol>
<hr>
<h4 id="6-åèæç®-2">6. åèæç®</h4>
<ol>
<li><strong>Hansard, M., Lee, S., Choi, O., &amp; Horaud, R. P. (2012).</strong> <em>Time-of-Flight Cameras: Principles, Methods and Applications</em>. Springer Briefs in Computer Science.<br>
(æç³»ç»è®²è§£ ToF åççç»å¸ä¹¦ç±)ã</li>
<li><strong>Li, L. (2014).</strong> <em>Time-of-flight camera â An introduction</em>. Technical report, Texas Instruments.<br>
(TI åå¸çå®æ¹ææ¯æ¥åï¼æ·±å¥è®²è§£äº iToF ççµå­å­¦å®ç°)ã</li>
<li><strong>Horaud, R., et al. (2016).</strong> <em>An overview of gradient-based 3D reconstruction methods for Time-of-Flight RGB-D cameras</em>. Journal of Mathematical Imaging and Vision.<br>
(æ¢è®¨äºå¦ä½ä¼å ToF çæ·±åº¦å¾è´¨é)ã</li>
<li><strong>Bamji, C. S., et al. (2015).</strong> <em>A 0.13Î¼m CMOS System-on-Chip for a 512Ã424 Time-of-Flight Image Sensor with Multi-Frequency Photo-Demodulation</em>. ISSCC.<br>
(Kinect 2.0 èåè¯ççææ¯ç»èè®ºæ)ã</li>
<li><strong>Niclass, C., et al. (2005).</strong> <em>A CMOS single photon avalanche diode array for 3D imaging</em>. IEEE International Solid-State Circuits Conference.<br>
(dToF æ ¸å¿ç»ä»¶ SPAD ä¼ æå¨çå¥ åºæ§ç ç©¶)ã</li>
</ol>
<hr>
<h1 id="4-éç¨åºæ¯">4. éç¨åºæ¯</h1>
<p>3Déå»ºææ¯å·²ç»æ·±å¥å°åè¡åä¸ï¼</p>
<ul>
<li><strong>å·¥ä¸èªå¨åï¼</strong> é«ç²¾åº¦é¶ä»¶çå°ºå¯¸æ£æµãç¼ºé·æ«æãæºå¨äººæåå¼å¯¼ã</li>
<li><strong>èªå¨é©¾é©¶ä¸æºå¨äººï¼</strong> é¿éãç¯å¢å»ºæ¨¡ï¼SLAMï¼ãé«ç²¾å°å¾å¶ä½ã</li>
<li><strong>æåéäº§ä¿æ¤ï¼</strong> å¯¹å¤å»ºç­ç©ãæç©è¿è¡æ°å­åå»ºæ¨¡ï¼å®ç°æ°¸æä¿å­ã</li>
<li><strong>å»çæåï¼</strong> çç§æ«æå»ºæ¨¡ãææ¯å3Dæ¨¡æã</li>
<li><strong>æ°å­å­ªçä¸åå®å®ï¼</strong> å°ç°å®ä¸ççç©ä½å¿«éå»ºæ¨¡å¹¶å¯¼å¥æ¸¸ææèæç©ºé´ã</li>
<li><strong>çµå­åå¡ï¼</strong> ææºæ«æååå®ç°3Dé¢è§ï¼å¦å®å®¶å®¶å·è¯æï¼ã</li>
</ul>
<hr>
<h1 id="5-ç®åçç¶é¢ä¸é®é¢">5. ç®åçç¶é¢ä¸é®é¢</h1>
<p>å°½ç®¡ææ¯åå±è¿éï¼ä½3Déå»ºä»é¢ä¸´ä»¥ä¸ä¸¥å³»ææï¼</p>
<ol>
<li><strong>å¼±çº¹çä¸éå¤çº¹çï¼</strong><br>
é¢å¯¹æ´ç½çå¢å£ãçº¯è²æ¡é¢æç»çè¡¨é¢ï¼ç®æ³å¾é¾æ¾å°å¯é çç¹å¾å¹éç¹ï¼å¯¼è´éå»ºå¤±è´¥æåºç°âç ´æ´âã</li>
<li><strong>ååä¸éæç©ä½ï¼</strong><br>
éå±è¡¨é¢çé«ååç»ççæå°ä¼è¯¯å¯¼ç¸æºï¼ä½¿ç®æ³è®¡ç®åºéè¯¯çæ·±åº¦ã</li>
<li><strong>è®¡ç®å¤æåº¦ä¸å®æ¶æ§ï¼</strong><br>
é«ç²¾åº¦çç¨ å¯éå»ºéè¦å·¨å¤§çç®åï¼å¨ç§»å¨è®¾å¤æåµå¥å¼å¹³å°ä¸é¾ä»¥å®ç°è¶é«ç²¾åº¦çå®æ¶éå»ºã</li>
<li><strong>é®æ¡é®é¢ï¼</strong><br>
å½ç©ä½çä¸é¨åè¢«æ¡ä½æ¶ï¼ç®æ³éè¦éè¿åéªç¥è¯ï¼AIçæ³ï¼æ¥è¡¥å¨ï¼è¿å¾å¾ä¼å¯¼è´ç²¾åº¦ä¸éã</li>
<li><strong>åç§æææ§ï¼</strong><br>
è¿å¼ºæè¿æçåçº¿é½ä¼ä¸¥éå½±åè¢«å¨è§è§æ¹æ³çç¹å¾æåè´¨éã</li>
</ol>
<hr>
<h1 id="æ»ç»">æ»ç»</h1>
<p>éè¿æºå¨è§è§å®ç°3Déå»ºæ¯è®¡ç®æºè§è§é¢åçâå£æ¯âä¹ä¸ãä»ç»å¸çä¸è§å ä½å°ç°ä»£çæ·±åº¦å­¦ä¹ ï¼NeRF/3DGSï¼ï¼æä»¬æ­£å¤äºä»âæåºå¥½ççç§çâåâæå»ºå®ç¾çæ°å­ä¸çâè·¨è¶çæ¶ä»£ãéçç®åçæååç®æ³çä¼åï¼æªæ¥ç3Déå»ºå°åå¾åæç§ä¸æ ·ç®åä¸ç²¾åã</p>
<hr>
<h1 id="åèæç®">åèæç®</h1>
<p>ä¸ºäºä¿è¯ä¿¡æ¯ççå®æ§ä¸å­¦æ¯ä¸¥è°¨æ§ï¼ä»¥ä¸æ¯æ¬åå®¢åèçæ ¸å¿æç®ä¸ç»å¸ææï¼</p>
<ol>
<li><strong>Hartley, R., &amp; Zisserman, A. (2004).</strong> <em>Multiple View Geometry in Computer Vision</em>. Cambridge University Press.<br>
(è®¡ç®æºè§è§é¢åçå£ç»ï¼è¯¦ç»è®²è§£äºå¤è§å¾å ä½åç¸æºæ¨¡å)ã</li>
<li><strong>Mildenhall, B., et al. (2020).</strong> <em>NeRF: Representing Scenes as Neural Radiance Fields for View Synthesis</em>. ECCV.<br>
(ç¥ç»è¾å°åºå¥ åºä¹ä½)ã</li>
<li><strong>Kerbl, B., et al. (2023).</strong> <em>3D Gaussian Splatting for Real-Time Radiance Field Rendering</em>. ACM Transactions on Graphics.<br>
(å½åæåæ²¿çå®æ¶3Déå»ºç®æ³)ã</li>
<li><strong>Schonberger, J. L., &amp; Frahm, J. M. (2016).</strong> <em>Structure-from-Motion Revisited</em>. CVPR.<br>
(COLMAPç®æ³ççè®ºåºç¡)ã</li>
<li><strong>Newcombe, R. A., et al. (2011).</strong> <em>KinectFusion: Real-time 3D reconstruction and interaction using a moving depth camera</em>. ISMAR.<br>
(ç»æåä¸ToFå®æ¶éå»ºçç»å¸æç®)ã</li>
</ol>
<hr>
<p><strong>ä½èæç¤ºï¼</strong> å¦æä½ å¯¹å·ä½çæä¸ªç®æ³ï¼å¦å¦ä½éç½®COLMAPæå¦ä½è®­ç»NeRFï¼æå´è¶£ï¼æ¬¢è¿å¨è¯è®ºåºçè¨ï¼æå°å¨ä¸ä¸æè¯¦ç»è®²è§£ï¼</p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-06 09:04">2026-02-06 09:04</span>&nbsp;
<a href="https://www.cnblogs.com/ChenAI-TGF">TTGF</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19582574);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19582574', targetLink: 'https://www.cnblogs.com/ChenAI-TGF/p/19582574', title: 'æ¦å¿µè§£æï¼æºå¨è§è§å¦ä½èµäºæºå¨âä¸ç»´åç¼âââ3Déå»ºææ¯å¨æ¯æå' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ å«ååªå âç¹ç¹ç¹âï¼AIæµè¯çå­ç§ä¸åç©æ³ï¼éå¸¦Midsceneè¯¦ç»æç¨ï¼ ]]></title>
    <link>https://www.cnblogs.com/jinjiangongzuoshi/p/19582572</link>
    <guid>ef26de0f1aeafbedabe0632be153891d</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/jinjiangongzuoshi/p/19582572" title="åå¸äº 2026-02-06 09:02">
    <span role="heading" aria-level="2">å«ååªå âç¹ç¹ç¹âï¼AIæµè¯çå­ç§ä¸åç©æ³ï¼éå¸¦Midsceneè¯¦ç»æç¨ï¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>é¶åºç¡æ°æï¼æå¤§çå­¦ä¹ éç¢æ¯"ææ§æ"ï¼</p>
<p>ä¸ä¸ç¯ï¼æä»¬ä»¥AIç¼ç¨åå¥ï¼æææå¸¦å¤§å®¶å¦ä½å¨10åéåååºç¬¬ä¸ä¸ªåºç¨ï¼å¹¶ä¸å¦ä½å°å®é¨ç½²å°äºèç½ä¸ã</p>
<p>ä¸éè¦ä½ æä»»ä½ç¼ç¨åºç¡ï¼åªè¦ä½ ä¼æå­ãä¼ä¸ç½ï¼å°±è½è·çåãéè¿ç¬¬ä¸ä¸ªé¡¹ç®ï¼å¸®å©å¤§å®¶å»ºç«<code>Vibe Coding</code> çæç»´æ¹å¼ï¼<strong>å³æ³¨ "è¦åä»ä¹" èä¸æ¯ "æä¹å"</strong>ã</p>
<p>ä»å¤©æ¯çåå°è¯çç¬¬äºç¯ï¼æä»¬æ¥èä¸èAIæµè¯ï¼å¸¦å¤§å®¶æåä¸ä¸AIå¨æµè¯é¢åå¸¦æ¥çé­åã</p>
<p>åæ ·ï¼å¨è¿ç¯æç¨ä¸­ï¼æä»¬ä¸èAIæµè¯çç¸å³çè®ºãæ¦æ¶©é¾æçææ¯ï¼èèAIå¨UIèªå¨åæµè¯çä¸äºæ°ç©æ³ãæè·¯ã</p>
<blockquote>
<p>æ¬æä¸ºè¯è¯»ï¼åæåå¸å°ãçå¸.AIè¿åç¤¾ãæç¨ä¸æ ä¸­ï¼ä¼ææ´å è¯¦ç»çAIæµè¯æç¨ï¼éè¯»ä½éªæ´ä½³~</p>
</blockquote>
<h2 id="1ä¼ ç»uiæµè¯å·¥å·æ¯æä¹åèªå¨åç">1ãä¼ ç»UIæµè¯å·¥å·æ¯æä¹åèªå¨åçï¼</h2>
<p>ä¼ ç» UI èªå¨åæµè¯ï¼æ ¸å¿æ¯<strong>éè¿ä»£ç /èæ¬å¯¹é¡µé¢åç´ å âå®ä½ -&gt; æä½ -&gt; æ­è¨â çç¨åºåæ¨¡æ</strong>ï¼æ¬è´¨æ¯ç¨æºå¨æ¿ä»£äººå·¥çæå·¥ç¹å»ãè¾å¥ãæ ¡éªæä½ï¼å®ç°åå½æµè¯ãéå¤åºæ¯æµè¯çèªå¨åæ§è¡ï¼æ´ä½å´ç» âåç´ å®ä½â è¿ä¸ªæ ¸å¿å±å¼ï¼æ­¥éª¤åºå®ä¸å¯¹é¡µé¢ç¨³å®æ§è¦æ±æé«ã</p>
<p>èä¼ ç» UI èªå¨åæµè¯å·¥å·ï¼å¦ SeleniumãAppiumãPlaywrightãRobot Framework ç­ï¼ï¼æ è®ºå¼æºè¿æ¯åç¨ï¼å®ç°æè·¯åºæ¬ä¸è´ï¼å¤§ä½å¯ä»¥åä¸ºå æ­¥ï¼</p>
<h3 id="11-æ­ç¯å¢ä¸å·¥å·éé">1.1 æ­ç¯å¢ä¸å·¥å·éé</h3>
<p>æ ¹æ®è¢«æµåºç¨çç±»åï¼Web ç«¯ / ç§»å¨ç«¯ APP / å°ç¨åºï¼éæ©å¯¹åºå·¥å·ï¼æ¯å¦ï¼</p>
<ul>
<li>Web ç«¯ï¼ä¸è¬é¦éç¨ <code>Selenium/Playwright</code></li>
<li>ç§»å¨ç«¯ç¨ <code>Appium</code>ï¼</li>
<li>ä½ä»£ç å°è£ç¨ <code>Robot Framework</code>ï¼</li>
</ul>
<p>åæ¶æ­å»ºéå¥ç¯å¢ï¼æ¯å¦ Web ç«¯éè¦éç½®æµè§å¨é©±å¨ï¼ChromeDriver/GeckoDriverï¼ãç§»å¨ç«¯éè¦éç½®æ¨¡æå¨/çæº+ADBç¯å¢ï¼åç»å Python/Java/JavaScriptç­å¼åè¯­è¨ï¼æ­å»ºåºç¡çèªå¨åæµè¯æ¡æ¶ã</p>
<h3 id="12-å®ä½é¡µé¢åç´ ">1.2 å®ä½é¡µé¢åç´ </h3>
<p>å·¥å·æ æ³åäººä¸æ · âçâ å°é¡µé¢ä¸çæé®ãè¾å¥æ¡ãä¸ææ¡ï¼åªè½éè¿<strong>é¡µé¢åç´ çå¯ä¸æ è¯</strong>æ¥è¯å«ï¼è¿æ¯ææèªå¨åæä½çåæãæµè¯äººåéè¦éè¿æµè§å¨å¼åèå·¥å·ï¼F12ï¼/APPåç´ æ¢æ¥å·¥å·ï¼UIAutomatorViewerï¼ï¼æååç´ çä¸å±å±æ§ï¼å¸¸ç¨å®ä½æ¹å¼æä¼åçº§æåºï¼</p>
<ul>
<li>
<p>ç²¾åå®ä½ï¼idãnameï¼å¯ä¸å±æ§ï¼ä¼åçº§æé«ï¼æç¨³å®ï¼ï¼</p>
</li>
<li>
<p>éç¨å®ä½ï¼xpathãcss selectorï¼æ¯æè·¯å¾ / å±æ§å¹éï¼ééæ  id/name çåç´ ï¼å¦<code>//input[@placeholder='è¯·è¾å¥è´¦å·']</code>ï¼ï¼</p>
</li>
<li>
<p>ååºå®ä½ï¼class nameãtag nameãlink textï¼æéå¤ï¼ä»ç¨äºæ å¶ä»å±æ§çåºæ¯ï¼ã</p>
</li>
</ul>
<p><strong>æ ¸å¿è¦æ±</strong>ï¼åç´ å¿é¡»æç¨³å®çæ è¯ï¼ä¸æ¦åç´ å±æ§è¢«å¼åä¿®æ¹ï¼å¦ id ä»<code>btn-login</code>æ¹æ<code>btn-login-new</code>ï¼ï¼èæ¬å°±ä¼ âæ¾ä¸å°åç´ âï¼ç´æ¥æ§è¡å¤±è´¥ã</p>
<h3 id="13-å¼åèªå¨åæ§è¡èæ¬">1.3 å¼åèªå¨åæ§è¡èæ¬</h3>
<p>åºäºéå®çè¯­è¨åå·¥å·ï¼ç¼åèæ¬æ¨¡æäººå·¥æä½ï¼æ ¸å¿é»è¾æ¯ <strong>âæä½é¾ + æ ¡éªç¹â</strong>ï¼ä¸»æµæä¸¤ç§å¼åæ¨¡å¼ï¼</p>
<ul>
<li>çº¿æ§èæ¬ï¼ææå·¥æµè¯çæ­¥éª¤ä¾æ¬¡ç¼åï¼å¦ âæå¼æµè§å¨âè¾å¥ç½åâç¹å»è´¦å·è¾å¥æ¡âè¾å¥è´¦å·âç¹å»å¯ç æ¡âè¾å¥å¯ç âç¹å»ç»å½æé®âï¼éåç®åçåæµç¨åºæ¯ï¼</li>
<li>æ¨¡åå/å³é®å­é©±å¨ï¼å°éå¤æä½å°è£æå¬å±æ¨¡åï¼å¦ âç»å½æ¨¡åââéåºæ¨¡åâï¼ï¼ç¨ä¾ç´æ¥è°ç¨æ¨¡åï¼åå°ä»£ç åä½ï¼éåå¤§åé¡¹ç®çæ¹éç¨ä¾å¼åã</li>
</ul>
<p>å¹¶ä¸ï¼å ä¸ºé¡µé¢å è½½ãæ¥å£è¯·æ±ä¼å­å¨å»¶è¿åå¶åæ§ï¼ä¸ºäºç¡®ä¿èæ¬çç¨³å®æ§ï¼èæ¬ä¸­é¤äºä¼åå«<strong>æä½æä»¤</strong>ï¼click/input/clear/selectï¼ç­ï¼å¿é¡»å ç­å¾é¿åå·¥å· âæåæä½â å¯¼è´çå¤±è´¥ââ å®éåéè¦ï¼æ ¹æ®ä¸åçåºæ¯å¼å¥ä¸åçç­å¾æºå¶ï¼å¼ºå¶ç­å¾/æ¾å¼ç­å¾/éå¼ç­å¾ï¼ã</p>
<h3 id="14-æ§è¡æµè¯">1.4 æ§è¡æµè¯</h3>
<p>è¿è¡ç¼åå¥½çèæ¬ï¼å·¥å·ä¼èªå¨é©±å¨æµè§å¨/æ¨¡æå¨ï¼æèæ¬æ­¥éª¤æ§è¡æä½ï¼æ§è¡å°å³é®èç¹æ¶ï¼ä¼éè¿<strong>æ­è¨è¯­å¥</strong>æ ¡éªå®éç»ææ¯å¦ç¬¦åé¢æï¼æ¯å¦ âç»å½åæ¯å¦è·³è½¬å°é¦é¡µââç¹å»æäº¤åæ¯å¦æ¾ç¤ºâæäº¤æåâæç¤ºââåè¡¨æ¯å¦å è½½åºæå®æ°æ®âï¼æ­è¨éè¿åç¨ä¾æåï¼å¤±è´¥åç»æ­¢å¹¶è®°å½éè¯¯ã</p>
<h3 id="15-çææµè¯æ¥åä¸é®é¢ææ¥">1.5 çææµè¯æ¥åä¸é®é¢ææ¥</h3>
<p>æ§è¡å®æåï¼å¯ä»¥æ¯ç±å·¥å·æ¥èªå¨çææ¥åï¼ä¹å¯ä»¥æ¯äººå·¥æ¥æ´çæ¥åã</p>
<p>æµè¯äººåéè¦æ ¹æ®æ¥åæ¥ææ¥é®é¢ï¼å¦åºåæ¯<strong>èæ¬é®é¢</strong>ï¼å®ä½æ¹å¼éè¯¯ï¼ã<strong>é¡µé¢é®é¢</strong>ï¼åç´ å±æ§ä¿®æ¹ï¼è¿æ¯<strong>å·¥å·ç¯å¢é®é¢</strong>ï¼é©±å¨çæ¬ä¸å¼å®¹ï¼ï¼åéå¯¹æ§ä¿®æ¹ã</p>
<h2 id="2-ä¼ ç»uièªå¨åçæ ¸å¿çç¹">2. ä¼ ç»UIèªå¨åçæ ¸å¿çç¹</h2>
<p>æ­£å ä¸ºä¼ ç»UIèªå¨åå·¥å·ï¼ä¸»è¦æ¯ä¾èµ âåºå®åç´ å®ä½â å âæ­»æ¿èæ¬é»è¾âï¼å¯¼è´å¨å¦ä»å¿«ææ·å¼åãé«é¢è¿­ä»£çåºæ¯ä¸­ï¼æ´é²äºè¯¸å¤é¾ä»¥è§£å³çé®é¢ï¼</p>
<ol>
<li>
<p><strong>åç´ å®ä½ä¾èµâç¡¬ç¼ç â</strong>ï¼ä¼ ç»çUIèªå¨åæµè¯å·¥å·ï¼æ¯å¦SeleniumãAppiumãPlaywrightç­ï¼éå¸¸éè¦éè¿IDãClassãXpathç­åºå®çåç´ å±æ§æ¥å®ä½åç´ ï¼ä½åç«¯å¼åå¸¸å éæ±è°æ´ä¿®æ¹DOMç»æï¼æ¯å¦ç»ä»¶åºåçº§ãæ ·å¼ä¼åãå¸å±è°æ´ï¼ï¼å¯¼è´åç´ IDãClassè¿ç±»å±æ§å¯è½ä¼åºç°å¨æååï¼èæ¬ææå ä¸ºè¿äºååï¼å¯¼è´âæ¾ä¸å°åç´ âï¼æ®ç»è®¡ï¼ä¼ä¸çº§é¡¹ç®ä¸­çº¦<code>40%-60%</code>çUIèªå¨åç¨ä¾å¤±è´¥æºäºåç´ å®ä½å¤±æï¼èéçå®åè½ç¼ºé·ã</p>
</li>
<li>
<p><strong>ç»´æ¤ææ¬æé«</strong>ï¼å¼åè¿­ä»£ä¼é¢ç¹ä¿®æ¹é¡µé¢åç´ å±æ§ãè°æ´é¡µé¢å¸å±ï¼æµè¯äººåéè¦åæ­¥ä¿®æ¹ææç¸å³èæ¬çå®ä½æ¹å¼ï¼è¿­ä»£è¶å¿«ï¼ç»´æ¤å·¥ä½éè¶å¤§ï¼çè³åºç° âç»´æ¤èæ¬çæ¶é´è¶è¿å¼åèæ¬çæ¶é´âï¼</p>
</li>
<li>
<p><strong>å¯¹éæ ååç´ æ è½ä¸ºå</strong>ï¼æ æ³è¯å«å¾çãéªè¯ç ãå¨æçæçåç´ ï¼å¦éæº idãå¨æå¼¹çªï¼ï¼éå°è¿ç±»åºæ¯åªè½éè¿äººå·¥ä»å¥æé¢å¤çç ´è§£æ¹æ¡ï¼èªå¨åè¦ççåéï¼</p>
</li>
<li>
<p><strong>å­¦ä¹ é¨æ§ä¸ä½</strong>ï¼éè¦ææ¡å¼åè¯­è¨ï¼Python/Javaï¼ãå·¥å· APIãæ¡æ¶å°è£ï¼éææ¯èæ¯çæµè¯äººåé¾ä»¥ä¸æï¼</p>
</li>
<li>
<p><strong>æ æ³åäººä¸æ · âè®¤ç¥â é¡µé¢</strong>ï¼å·¥å·åªè½è¯å«åç´ å±æ§ï¼æ æ³çè§£é¡µé¢çè¯­ä¹åé»è¾ï¼æ¯å¦ âçº¢è²çæäº¤æé®ââä½äºé¡µé¢åºé¨çåé¡µæ âï¼ä¸æ¦åç´ ä½ç½®ååï¼å³ä½¿å±æ§ä¸åï¼ä¹å¯è½å èæ¬é»è¾é®é¢æ§è¡å¤±è´¥ã</p>
</li>
</ol>
<h2 id="3-aiææ¯å¨uièªå¨åæµè¯çå­ç§ç©æ³">3. AIææ¯å¨UIèªå¨åæµè¯çå­ç§ç©æ³</h2>
<p>éå¯¹ä¸è¿°é®é¢ï¼AI å¨ UI èªå¨åæµè¯ä¸­çåºç¨ï¼å¯ä»¥æå¾å¤ç§ç»åç©æ³ã</p>
<p>æ ¸å¿æ¯éè¿<strong>å¤§è¯­è¨æ¨¡åï¼LLMï¼</strong>ã<strong>è®¡ç®æºè§è§ï¼CVï¼ãèªç¶è¯­è¨å¤çï¼NLPï¼ãæºå¨å­¦ä¹ ï¼MLï¼</strong> ç­ææ¯ï¼è§£å³ä¼ ç»æ¹æ¡ä¸­âåç´ å®ä½é¾ãèæ¬ç»´æ¤ææ¬é«ãè·¨ç«¯å¼å®¹æ§å·®ãäººåä¾èµå¼ºâç­é®é¢ã</p>
<p>æäºAIçèå¥ï¼èªå¨åæµè¯ï¼ä¸åæ¯ä¾èµ âåºå®åç´ å±æ§âï¼èæ¯è®©æµè¯å·¥å·å<strong>äººä¸æ · âçâ é¡µé¢ãâçè§£â é¡µé¢ãâæ¨çâ æä½é»è¾</strong>ã</p>
<p>ä»¥<strong>è®¡ç®æºè§è§ï¼CVï¼</strong>å<strong>èªç¶è¯­è¨å¤çï¼NLPï¼</strong> ä¸ºä»£è¡¨çAIææ¯ä¸ºä¾ï¼å¯ä»¥éè¿âæç¥çé¢åå®¹+çè§£ç¨æ·æå¾âçæ¹å¼ï¼æ¨å¨UIèªå¨åæµè¯ä»âç¡¬ç¼ç è§åé©±å¨âåâè®¤ç¥é©±å¨âè½¬åï¼å¶æ ¸å¿çå¿µå¯æ¦æ¬ä¸ºï¼<strong>è®©æµè¯ç³»ç»åäººç±»ä¸æ ·âçæçé¢ââå¬æéæ±âï¼å¹¶èªä¸»å®ææä½ä¸éªè¯</strong>ã</p>
<h4 id="ç©æ³-1å©ç¨ai-è§è§å®ä½--æ¿ä»£ä¼ ç»åç´ å®ä½">ç©æ³ 1ï¼å©ç¨AI è§è§å®ä½ ââ æ¿ä»£ä¼ ç»åç´ å®ä½</h4>
<p>åºäº<strong>è®¡ç®æºè§è§ï¼CVï¼+ å¾åè¯å«</strong>ææ¯ï¼è®©æµè¯å·¥å·ä¸åä¾èµåç´ ç <code>id/xpath</code> ç­åºå®å±æ§ï¼èæ¯åäººä¸æ ·éè¿ âè§è§ç¹å¾â è¯å«åç´ ï¼æ¯å¦ âé¡µé¢é¡¶é¨çèè²ç»å½æé®ââä¸­é´çç½è²è¾å¥æ¡ï¼å ä½ç¬¦æ¯è¯·è¾å¥ææºå·ââå³ä¸è§ççº¢è²æäº¤æé®âã</p>
<ul>
<li>å®ç°æ¹å¼ï¼æµè¯äººååªéç¨èªç¶è¯­è¨æè¿°åç´ ï¼æç´æ¥å¨é¡µé¢ä¸æ¡éåç´ ï¼ï¼AI ä¼æååç´ çè§è§ç¹å¾ï¼é¢è²ãå½¢ç¶ãä½ç½®ãæå­åå®¹ï¼ï¼çæå¯ä¸çè§è§å®ä½æ è¯ï¼å³ä½¿åç´ å±æ§è¢«ä¿®æ¹ãä½ç½®è¢«è°æ´ï¼åªè¦è§è§ç¹å¾ä¸åï¼å·¥å·å°±è½ç²¾åè¯å«ï¼</li>
<li>ééåºæ¯ï¼é«é¢è¿­ä»£çé¡µé¢ãå¨æçæåç´ çåºæ¯ãæ æ åå±æ§çå°ä¼é¡µé¢ï¼å½»åºè§£å³ä¼ ç»æ¹æ¡ âåç´ å®ä½å¤±æâ çæ ¸å¿çç¹ï¼å¤§å¹éä½èæ¬ç»´æ¤ææ¬ã</li>
</ul>
<h4 id="ç©æ³-2èªç¶è¯­è¨çæèªå¨åç¨ä¾--è®©äººäººé½è½åèªå¨å">ç©æ³ 2ï¼èªç¶è¯­è¨çæèªå¨åç¨ä¾ ââ è®©äººäººé½è½åèªå¨å</h4>
<p>åºäº<strong>å¤§è¯­è¨æ¨¡åï¼LLMï¼</strong>ï¼å®ç° <strong>âèªç¶è¯­è¨æè¿°éæ±âAI èªå¨çæèªå¨åèæ¬ / ç¨ä¾â</strong>ï¼å½»åºéä½èªå¨åçå­¦ä¹ é¨æ§ï¼éææ¯èæ¯çæµè¯äººåãäº§åç»ççè³å¼åï¼é½è½å¿«éå¶ä½èªå¨åç¨ä¾ã</p>
<ul>
<li>å®ç°æ¹å¼ï¼æµè¯äººååªéç¨æ¥å¸¸è¯­è¨æè¿°æµè¯åºæ¯ï¼æ¯å¦ âæå¼ XX ç½ç«ï¼è¾å¥è´¦å· adminãå¯ç  123456ï¼ç¹å»ç»å½ï¼æ ¡éªæ¯å¦è·³è½¬å°é¦é¡µï¼æ¯å¦æ¾ç¤ºç¨æ·å adminâï¼AI ä¼èªå¨è¯å«åºæ¯ä¸­çæä½æ­¥éª¤ãæ ¡éªç¹ï¼ç»åå¯¹åºçæµè¯å·¥å·ï¼Selenium/Playwrightï¼ï¼çæå¯ç´æ¥è¿è¡çèªå¨åèæ¬ï¼è¿è½èªå¨æ·»å ç­å¾æºå¶ãæ­è¨è¯­å¥ï¼</li>
<li>å»¶ä¼¸è½åï¼è¿å¯ä»¥éè¿ âä¸ä¼ æå·¥æµè¯ç¨ä¾ææ¡£âAI æ¹éè§£æçæèªå¨åç¨ä¾âï¼å®ç°ç¨ä¾çæ¹éè½¬åï¼å¤§å¹æåèªå¨åè¦çççè½¬åæçã</li>
</ul>
<h4 id="ç©æ³-3ai-æºè½ç»´æ¤èæ¬--èªå¨åééé¡µé¢åå">ç©æ³ 3ï¼AI æºè½ç»´æ¤èæ¬ ââ èªå¨åééé¡µé¢åå</h4>
<p>è¿æ¯éå¯¹ä¼ ç» âèæ¬ç»´æ¤ææ¬é«â çæ ¸å¿ä¼åï¼åºäº<strong>LLM + è§è§å¯¹æ¯</strong>ææ¯ï¼è®©æµè¯èæ¬å·å¤ âèªæä¿®å¤â è½åï¼é¡µé¢åçååæ¶ï¼AI ä¼èªå¨è¯å«å¹¶ä¿®æ¹èæ¬ï¼æ éäººå·¥ä»å¥ã</p>
<ul>
<li>å®ç°æ¹å¼ 1ï¼èæ¬æ§è¡å¤±è´¥æ¶ï¼AI ä¼èªå¨åæå¤±è´¥åå ï¼å¦ âåç´ å±æ§ä¿®æ¹ââåç´ ä½ç½®ååâï¼ï¼å¯¹æ¯æ°æ§é¡µé¢çåç´ ç¹å¾ï¼èªå¨æ´æ°èæ¬ä¸­çå®ä½æ¹å¼ï¼åéæ°æ§è¡ç¨ä¾ï¼</li>
<li>å®ç°æ¹å¼ 2ï¼å¼åæäº¤ä»£ç åï¼AI ä¼èªå¨å¯¹æ¯è¿­ä»£ååçé¡µé¢å·®å¼ï¼è¯å«åºè¢«ä¿®æ¹çåç´ ï¼æ¹éæ´æ°ææç¸å³çèªå¨åèæ¬ï¼å®ç° âé¡µé¢åï¼èæ¬èªå¨åâã</li>
</ul>
<h4 id="ç©æ³-4ai-é©±å¨çæ¢ç´¢å¼æµè¯--å¨èªå¨è¦çé¡µé¢åºæ¯">ç©æ³ 4ï¼AI é©±å¨çæ¢ç´¢å¼æµè¯ ââ å¨èªå¨è¦çé¡µé¢åºæ¯</h4>
<p>ä¼ ç»èªå¨ååªè½æ§è¡ âé¢è®¾å¥½çèæ¬âï¼è¦ççåºæ¯æéï¼èåºäº<strong>å¤æ¨¡æ AI + å¼ºåå­¦ä¹ </strong>çæ¢ç´¢å¼æµè¯ï¼è®©å·¥å·è½å<strong>èµæ·±æµè¯å·¥ç¨å¸ä¸æ ·ï¼èªä¸»æ¢ç´¢é¡µé¢çææåè½åºæ¯</strong>ï¼èªå¨æ§è¡æä½ãæ ¡éªç»æï¼åç°äººå·¥æµè¯åä¼ ç»èªå¨åå®¹æéæ¼ç BUGã</p>
<ul>
<li>å®ç°æ¹å¼ï¼AI åéè¿è§è§è¯å«åè¯­ä¹çè§£ï¼åæé¡µé¢çææåç´ ï¼æé®ãè¾å¥æ¡ãä¸ææ¡ãé¾æ¥ç­ï¼åä¸å¡é»è¾ï¼çæåççæµè¯è·¯å¾ï¼ç¶åèªä¸»æ§è¡æä½ï¼å¦éæºç¹å»ãè¾å¥ä¸åç±»åçæ°æ®ãè§¦åä¸åçäº¤äºç»åï¼ï¼åæ¶å®æ¶æ ¡éªé¡µé¢çååºç»æï¼å¦æ¯å¦æ¥éãæ¯å¦è·³è½¬å°éè¯¯é¡µé¢ãæ°æ®æ¯å¦æ¾ç¤ºå¼å¸¸ï¼ï¼åç°é®é¢åèªå¨æªå¾ãè®°å½æ¥å¿å¹¶æ è®° BUG ç­çº§ï¼</li>
<li>æ ¸å¿ä»·å¼ï¼éåå¨æ°çæ¬ä¸çº¿åï¼å¿«éåå¨éåºæ¯çæ¢ç´¢å¼æµè¯ï¼è¦çäººå·¥é¾ä»¥èèå°çè¾¹çåºæ¯ãç»ååºæ¯ï¼æåæµè¯çå®æ´æ§ã</li>
</ul>
<h4 id="ç©æ³-5ai-çææµè¯æ°æ®--èªå¨åééåºæ¯é æ°æ®">ç©æ³ 5ï¼AI çææµè¯æ°æ® ââ èªå¨åééåºæ¯é æ°æ®</h4>
<p>ä¼ ç»èªå¨åæµè¯ä¸­ï¼æµè¯æ°æ®ï¼å¦è´¦å·ãææºå·ãèº«ä»½è¯å·ãè®¢åå·ï¼éè¦äººå·¥åå¤æéè¿ä»£ç çæï¼è AI è½æ ¹æ®æµè¯åºæ¯ï¼<strong>æºè½çæè´´åä¸å¡ççå®æµè¯æ°æ®</strong>ï¼è¿è½èªå¨ééè¾¹çå¼ãå¼å¸¸å¼åºæ¯ã</p>
<ul>
<li>å®ç°æ¹å¼ï¼æµè¯äººååªéæè¿°æ°æ®éæ±ï¼æ¯å¦ âçæ 10 ä¸ªææçææºå·ââçæ 5 ä¸ªä¸ç¬¦åæ ¼å¼çèº«ä»½è¯å·ââçæ 3 ä¸ªç¬¦åçµåå¹³å°è§åçè®¢åå·ï¼åå«å­æ¯åæ°å­âï¼AI ä¼èªå¨çæå¯¹åºçæµè¯æ°æ®ï¼è¿è½ç´æ¥å°æ°æ®æ³¨å¥å°èªå¨åèæ¬ä¸­ï¼å®ç° âæ°æ® + èæ¬â çä¸ä½åæ§è¡ã</li>
</ul>
<h4 id="ç©æ³-6å¤æ¨¡æ-ai-æµè¯--è¦çè·¨ç«¯--éæ å-ui-åºæ¯">ç©æ³ 6ï¼å¤æ¨¡æ AI æµè¯ ââ è¦çè·¨ç«¯ / éæ å UI åºæ¯</h4>
<p>ä¼ ç»å·¥å·å¯¹<strong>å¾çãè§é¢ãå°ç¨åºãH5 æ··åé¡µé¢</strong>ç­éæ å UI åºæ¯çè¦ççæä½ï¼èåºäº<strong>å¤æ¨¡æå¤§æ¨¡å</strong>ç AI æµè¯ï¼è½èå âè§è§ãææ¬ãè¯­é³â ç­å¤ç§ä¿¡æ¯ï¼å®ç°è·¨ç«¯ãéæ å UI åºæ¯çèªå¨åæµè¯ã</p>
<ul>
<li>ééåºæ¯ï¼è¯å«é¡µé¢ä¸­çå¾çéªè¯ç å¹¶èªå¨ç ´è§£ãæµè¯å°ç¨åºä¸­çå¾ææ··åæ¨¡åãæµè¯ APP ä¸­çè¯­é³äº¤äºåè½ãæµè¯çµåå¹³å°çååå¾çå±ç¤ºåç¹å»åè½ç­ï¼å½»åºæç ´ä¼ ç» UI èªå¨åçåºæ¯è¦çéå¶ã</li>
</ul>
<p>é¤äºä¸è¿°æå°çå­ç§AIç©æ³å¤ï¼å¶å®è¿æå¾å¤ï¼è¿éå°±ä¸ä¸ä¸åä¸¾äºï¼åé¢å°ä¼å¨ã<strong>çå¸. AIè¿åç¤¾</strong>ãä¸­ï¼éæ­¥åäº«ã</p>
<h2 id="4-aiæµè¯å·¥å·">4. AIæµè¯å·¥å·</h2>
<p>è®²å°è¿éï¼ä½ å¯è½ä¼è¯´ï¼ä¸é¢è¿äºAIæµè¯çç©æ³æ¯ä¸æ¯é½è¿æ¯åçå¨çè®ºå±é¢ï¼å±äºçæ³æµè¯çç¶æå§ï¼ä½ç°å®æ¯ï¼ä½ æè®¸è¿åçå¨âäºâéï¼äºå®æ¯ï¼å·²ç»æå¾å¤åè¾ï¼å©ç¨ä¸é¢çè¿äºAIç©æ³ï¼å·²ç»å¨2åã10åãæåå·¥ä½æè½äºã</p>
<p>è¦å®ç°ä¸è¿°çè¿äºç©æ³ï¼æä¸¤ç§æ¹å¼ï¼</p>
<ul>
<li>èªå·±å©ç¨AIææ¯ï¼èªå·±å¼åï¼èªå·±å®å¶ãï¼çµæ´»åº¦é«ï¼å¯¹ææ¯è¦æ±ä¹é«ï¼</li>
<li>ç¨ç°æçAIæµè¯å·¥å·ãï¼ç¼ºç¹æä»ä¹ï¼ç¨ä»ä¹ï¼ä¼ç¹æ¯å¿«ï¼å¼ç®±å³ç¨ï¼</li>
</ul>
<p>ç®åï¼å¸é¢ä¸çAIæµè¯å·¥å·æå¾å¤ï¼å¨æä¹åå¬ä¼å·ææ¯æ¨æåäº«ä¸­ï¼ä¹ç»å¤§å®¶æ¨èè¿ä¸äºï¼æ¯å¦<code>Testim</code>ã<code>Applitools</code>ã<code>Browser Use</code>ã<code>Midscene</code>ã<code>Playwright MCP</code>ç­ã</p>
<p>å¦ææ¯ä½ æ¯AIé¶åºç¡æ°æï¼æ­¤åï¼ä»æ¥æ²¡ææ¥è§¦è¿AIæµè¯å·¥å·ï¼é£æå¼ºçä½ åä½¿ç¨<code>Midscene</code>ã</p>
<p><code>Midscene</code>ä½ä¸ºAIæµè¯å·¥å·ä¸­çå¸åä»£è¡¨ï¼å®æ´æ¥è¿çå®ç¨æ·æä½è§è§ï¼å¯¹è§è§ååéåºæ§å¼ºï¼åå°äºå¯¹DOMçç»å¯¹ä¾èµï¼ç¸æ¯æäºAIæµè¯å·¥å·æ¥è¯´ï¼å®å¨å®ä½å¨æåç´ æ¶æ´ç¨³å®ï¼å°¤å¶å¨æ¡¥æ¥æ¨¡å¼ä¸ï¼è¿è½å¤ç¨æµè§å¨Cookieï¼é¿åéå¤ç»å½çé®é¢ã</p>
<p>æ¥ä¸æ¥ï¼æå°±ä»¥<code>Midscene</code> ä¸ºä¾ï¼æ¥å¸¦å¤§å®¶æåä¸ä¸Midscen`åUIèªå¨åæµè¯çé­åï¼ä¸éè¦ä½ åä¸è¡ä»£ç ï¼ä¸éè¦ä½ å®ä½åç´ ï¼ä½ åªéè¦æè¿°éæ±ï¼ææ¿ææ¿ï¼ä»»ä½äººé½å¯ä»¥ç¨å®æ¥å¼å±èªå¨åæµè¯ã</p>
<blockquote>
<p>å¶å®çAIæµè¯å·¥å·ï¼åç»­ä¼éæ­¥åäº«å°<strong>çå¸.AI è¿åç¤¾</strong>-&gt;<strong>AIå·¥å·ç¾å®ç®±</strong>å¯¹åºççåä¸­ã</p>
</blockquote>
<h2 id="5-å¸¦ä½ å¿«éä½éª-midscens">5. å¸¦ä½ å¿«éä½éª Midscens</h2>
<p>ç±äºæ¬ç¯æç¨ï¼å¹¶ä¸æ¯ä¸é¨è®²è§£<code>Midscens</code>çç¹æ§ï¼ä¸»è¦æ¯è®©å¤§å®¶æåæåä¸ä¸AIæµè¯æå¸¦æ¥çå®éææã</p>
<p>æä»¥ä¸ä¼ï¼è±å¤ªå¤åå®¹ç¯ç¬¦æ¥ä»ç»<code>Midscens</code>ç¹æ§ï¼å·ä½å³äº<code>Midscens</code>çå·¥å·ä»ç»ï¼åç»­å¨<strong>AIè¿åç¤¾</strong>ä¸­ï¼ä¼æä¸é¨å·¥å·æç¨åäº«ã</p>
<p>ä¸ºäºç§é¡¾æ°æï¼è¿æ¯ç®åç§æ®ä¸ä¸ï¼</p>
<blockquote>
<p>Midscensï¼æ´å·ä½ä¸ç¹çå«æ³ï¼æ¯<code>Midscene.js</code>ï¼ç±å­èè·³å¨çWeb Infraå¢éå¼åï¼ä¸ä¸ªè´è´£å­èåé¨Webåºç¡è®¾æ½æè½æåçå¢éï¼ã</p>
<p>å®ä½ï¼æ¯ä¸æ¬¾ AIé©±å¨çèªå¨åæµè¯å·¥å·ï¼ä¸æ¯å¼æºçã</p>
<p>å®éè¿å¤æ¨¡æå¤§è¯­è¨æ¨¡åï¼LLMï¼å®ç°å¯¹ç¨æ·çé¢çâçè§£âï¼å¹¶èªå¨æ§è¡ç«¯å°ç«¯ï¼e2eï¼æµè¯ä»»å¡ï¼æ ¸å¿ç¹ç¹æ¯è½å¤ç´æ¥è§£æ UI åç´ çè§è§åè¯­ä¹ä¿¡æ¯ï¼æ¨¡æç¨æ·æä½è¡ä¸ºã</p>
</blockquote>
<p><strong>ç®åæ¥è¯´</strong>ï¼<code>Midscene.js</code> æ¯ä¸ä¸ªè®©ä½¿ç¨èï¼ç´æ¥ç¨èªç¶è¯­è¨çæ¹å¼æè¿° UI æä½ï¼ç± AIå¸®ä½ èªå¨å®ä½åç´ ãçæèæ¬ãæ§è¡æµè¯âçæºè½ UI èªå¨åå·¥å·ãäººæéæ±ï¼AIå¸®ä½ èªå¨æ§è¡æµè¯ï¼æ¬è´¨ä¸åAI ç¼ç¨çææ³æ¯ä¸æ ·çã</p>
<p><img src="https://image.kjdaohang.com/PicGo/20260131214243942.png" alt="" loading="lazy"></p>
<p>æ´è¿ä¸æ­¥çä»ç»ï¼æå´è¶£çè¯ï¼å¯ä»¥è®¿é®å®ç<a href="https://midscenejs.com/zh/" target="_blank" rel="noopener nofollow">å®ç½</a>æ¥å­¦ä¹ ï¼<code>https://midscenejs.com/</code></p>
<ul>
<li>å¸®å©ææ¡£ï¼<a href="https://midscenejs.com/zh/introduction" target="_blank" rel="noopener nofollow">https://midscenejs.com/zh/introduction</a></li>
<li>æºç å°åï¼<a href="https://github.com/web-infra-dev/midscene" target="_blank" rel="noopener nofollow">https://github.com/web-infra-dev/midscene</a></li>
</ul>
<p>è¿éï¼å¼å¾åæä¸ç¹çæ¯ï¼<code>Midscene.js</code>è½æåæ¯ä¸ºWebèªå¨åæµè¯èè®¾è®¡çï¼ä½å®ä¹åæ ·æ¯æAndroidãiOSç­å¤ç«¯åºç¨ï¼ä»»æçé¢é½å¯ä»¥ã</p>
<p><img src="https://image.kjdaohang.com/PicGo/20260131214515527.png" alt="" loading="lazy"></p>
<p>è¯´äºï¼è¿ä¹å¤ï¼æ°æè¯¥å¦ä½ä½¿ç¨å¢ï¼æ¦æ¬èµ·æ¥ï¼åå æ­¥ï¼</p>
<h3 id="51-ç¯å¢åå¤">5.1 ç¯å¢åå¤</h3>
<p><code>Midscene.js</code>ï¼æä¾äºå¤ç§éæä½¿ç¨æ¹å¼ï¼</p>
<ul>
<li>æµè§å¨æä»¶</li>
<li>ä¸ PlaywrightçSDKéæï¼ååä¸ºä¸¤ç§ï¼ä¸ç§ç´æ¥ç¨èæ¬æ¹å¼éæåè°ç¨<code>Midscene Agent</code>ï¼å¦å¤ä¸ç§å¨ <code>Playwright</code> çæµè¯ç¨ä¾ä¸­éæ<code>Midscene</code>æ¨¡åï¼</li>
<li>ä¸PuppeteerçSDKéæ (ä¹æä¸¤ç§éææ¹å¼ï¼å¯åèPlaywrightï¼åä¸)</li>
<li>å½ä»¤è¡è°ç¨</li>
<li>APIè°ç¨</li>
</ul>
<p>éè¦æ³¨æï¼ä¸åç«¯ï¼éè¦åå¤çç¯å¢ä¼ææä¸ä¸æ ·ï¼æ°æä¼åæ¨èä»¥<strong>Webç«¯+æµè§å¨æä»¶</strong>ä½¿ç¨æ¹å¼ä¸ºä¸»ï¼éè¿ä½¿ç¨<code>Midscene.js Chrome</code>æä»¶ï¼ä½ å¯ä»¥å¿«éå¨ä»»æç½é¡µä¸ä½éª <code>Midscene</code> çä¸»è¦åè½ï¼èæ éç¼åä»»ä½ä»£ç ã</p>
<p>å¶å®çéææ¹å¼ï¼ä»¥å<code>Android</code>ã<code>iOS</code>ç«¯å¦ä½ä½¿ç¨<code>Midscene</code>ï¼åé¢ä¼æ ¹æ®MVPè¿­ä»£çå®æï¼éæ­¥å¨<code>AI å·¥å·ç¾å®ç®±</code>çååæ´æ°ï¼å¤§å®¶æå´è¶£çè¯ï¼ä¹å¯ä»¥æåæ¥ç<a href="https://midscenejs.com/zh/android-introduction.html" target="_blank" rel="noopener nofollow">å®æ¹å¸®å©ææ¡£</a>ï¼å®æ¹ææ¡£éä¹æä¾äºå¾å¤å®ææ¡ä¾ã</p>
<h3 id="52-å®è£æ¹æ³">5.2 å®è£æ¹æ³</h3>
<p>å¦ææ³éè¿ <code>Midscene.js Chrome</code> æä»¶å¿«éä½éªAIæµè¯çè¯ï¼æä»¬éè¦ååå¾ Chrome æ©å±ååºå®è£ <code>Midscene æ©å±</code></p>
<p><img src="https://image.kjdaohang.com/PicGo/20260201124737578.png" alt="" loading="lazy"></p>
<p>æèç´æ¥å¨<code>github</code>ä¸­ä¸è½½releaeseåç¼©åï¼ç´æ¥æå°chromeæµè§å¨æ©å±ç¨åºé¡µä¸­ï¼å³å¯å®è£</p>
<pre><code>https://github.com/web-infra-dev/midscene/releases
</code></pre>
<p><img src="https://image.kjdaohang.com/PicGo/20260201101301468.png" alt="" loading="lazy"></p>
<p>æä»¶å®è£å®æåï¼å¯å¨æ©å±ï¼å¯è½é»è®¤æå å¨ Chrome æ©å±åè¡¨ä¸­ï¼ï¼ä½ åºè¯¥è½å¨æµè§å¨å³ä¾§çå°åä¸º âMidsceneâ çä¾§è¾¹æ ã</p>
<p><img src="https://image.kjdaohang.com/PicGo/20260201125014786.png" alt="" loading="lazy"></p>
<h3 id="53-aiæ¨¡åéæ©">5.3 AIæ¨¡åéæ©</h3>
<p>å®è£å®<code>Midscene</code>æä»¶ä¹åï¼ä½ è¿æ æ³ç«å³æ­£å¸¸ä½¿ç¨å®æ¥å¼å±èªå¨åæµè¯ï¼å ä¸ºä½ æ­¤æ¶åªæ¯å®è£äºä¸ä¸ªèº¯å£³ï¼è¿æ²¡æææ¥å¤§èï¼èè¿ä¸ªå¤§èï¼å°±æ¯æä»¬å¸¸è¯´ç<strong>å¤§æ¨¡å</strong>ã</p>
<p>è®²å°è¿éï¼å°±ä¸å¾ä¸æä¸å¥ AI å·¥å·çæ ¸å¿æ¬è´¨ï¼<strong>å ä¹ææç AI æµè¯å·¥å·ï¼ä¹è³åç±» AI ç¼ç¨å·¥å·ï¼æ¬è´¨ä¸é½åªæ¯åäºä¸å±é¢åç¨æ·çäº¤äºåºç¨å±å°è£</strong>ï¼å¶æ ¸å¿è½åçå®ç°ï¼åºå±ç»ç©¶éè¦ä¾æç¹å®çå¤§æ¨¡åæ¥é©±å¨ãèä¸æ¬¾ AI æµè¯å·¥å·çå®éä½¿ç¨ææå¥½åï¼ä¹æ­£ä¸å®èåéç¨çå¤§æ¨¡åè½åå¼ºå¼±ãééæ§é«ä½æ¯æ¯ç¸å³ã</p>
<p>èä½¿ç¨ AI å¤§æ¨¡åé©±å¨ UI èªå¨åçæä¸¤ä¸ªå³é®ç¹ï¼è§ååççæä½è·¯å¾ï¼ä»¥ååç¡®æ¾å°éè¦äº¤äºçåç´ ãå¶ä¸­âåç´ å®ä½âè½åçå¼ºå¼±ï¼ä¼ç´æ¥å½±åå°èªå¨åä»»å¡çæåçã</p>
<p>ä¸ºäºå®æåç´ å®ä½å·¥ä½ï¼UI èªå¨åæ¡æ¶ä¸è¬æä¸¤ç§ææ¯è·¯çº¿ï¼</p>
<ul>
<li>åºäº DOM + æªå¾æ æ³¨ï¼æåæåé¡µé¢ç DOM ç»æï¼ç»åæªå¾åå¥½æ æ³¨ï¼è¯·æ¨¡åâæéâå¶ä¸­çåå®¹ã</li>
<li>çº¯è§è§ï¼å©ç¨æ¨¡åçè§è§å®ä½è½åï¼åºäºæªå¾å®æææåæå·¥ä½ï¼å³æ¨¡åæ¶å°çåªæå¾çï¼æ²¡æ DOMï¼ä¹æ²¡ææ æ³¨ä¿¡æ¯ã</li>
</ul>
<h4 id="1-midscene-æ¯æçº¯è§è§åç´ å®ä½">1. Midscene æ¯æçº¯è§è§åç´ å®ä½</h4>
<p><code>Midscene</code> æ©æåæ¶å¼å®¹ãDOM å®ä½ãåãçº¯è§è§ãä¸¤ç§ææ¯è·¯çº¿ã</p>
<p>ä½DOM å®ä½æ¹æ¡çç¨³å®æ§ä¸è¶³ï¼ç»å¸¸ä¼å¨ Canvas åç´ ãCSS background-image ç»å¶çæ§ä»¶ãè·¨å iframe ä¸­çåå®¹ãæ²¡æååè¢«è¾å©ææ¯æ æ³¨çåç´ ç­æåµä¸åºç°å®ä½åå·®ã</p>
<p>ä¸æ­¤åæ¶ï¼éç¨ãçº¯è§è§ãæ¹æ¡ï¼ç¸å¯¹äºDOMå®ä½æ¹æ¡æ¥è¯´ï¼ä¼å¿ææ¾ï¼ä¸»è¦ä½ç°å¨ï¼</p>
<ul>
<li><strong>ææç¨³å®</strong>ï¼å¨ UI æä½è§åãç»ä»¶å®ä½ãçé¢çè§£ç­é¢åçç»¼åè¡¨ç°è¾å¥½ï¼è½å¤å¸®å©ä½¿ç¨èæ´å¿«ä¸æã</li>
<li><strong>éç¨äºä»»æç³»ç»</strong>ï¼èªå¨åæ¡æ¶ä¸åä¾èµ UI æ¸²æçææ¯æ ãæ è®ºæ¯ AndroidãiOSãæ¡é¢åºç¨ï¼è¿æ¯æµè§å¨ä¸­ç canvas æ ç­¾ï¼åªè¦è½è·åæªå¾ï¼Midscene å³å¯å®æäº¤äºæä½ã</li>
<li><strong>æäºç¼å</strong>ï¼æå¼åç±» selector å DOM ä¹åï¼ä½¿ç¨èä¸æ¨¡åçâç£¨åâä¼åå¾æ´ç®åï¼ä¸çææ¸²æææ¯çæ°äººä¹è½å¾å¿«ä¸æã</li>
<li><strong>token éæ¾èä¸é</strong>ï¼ç¸è¾äº DOM æ¹æ¡ï¼è§è§æ¹æ¡ç token ä½¿ç¨éæå¤å¯ä»¥åå° 80%ï¼ææ¬æ´ä½ï¼ä¸æ¬å°è¿è¡éåº¦ä¹åå¾æ´å¿«ã</li>
</ul>
<p>å æ­¤ï¼<strong>ä» 1.0 çæ¬å¼å§ï¼Midscene åªæ¯æçº¯è§è§æ¹æ¡</strong>ï¼å¨UIæä½ä¸åç´ å®ä½æ¹é¢ï¼ä¸åæä¾âæå DOMâçå¼å®¹æ¨¡å¼ã</p>
<h4 id="2-midsceneæ¨èä½¿ç¨çè§è§æ¨¡å">2. Midsceneæ¨èä½¿ç¨çè§è§æ¨¡å</h4>
<p>ä½¿ç¨<code>Midscene</code>ï¼éæ©æ¨¡åæ¶ï¼ä¹æ¯æè®²ç©¶çï¼å¹¶ä¸æ¯éä¾¿æ¾ä¸ªå¤§æ¨¡åé½å¯ä»¥ç¨ï¼å¿é¡»ä½¿ç¨å¤æ¨¡åæ¨¡åï¼ä¹å°±æ¯éè¦æ¯æå¾åè¾å¥ï¼è§è§è½åçæ¨¡åæå¯ä»¥ã</p>
<p>å®æ¹ï¼æ¨èä½¿ç¨ <code>Midscene</code> çé»è®¤æ¨¡åæï¼</p>
<ul>
<li><a href="https://midscenejs.com/zh/model-common-config.html#doubao-seed-model" target="_blank" rel="noopener nofollow">è±å Seed æ¨¡å</a></li>
<li><a href="https://midscenejs.com/zh/model-common-config.html#qwen3-vl" target="_blank" rel="noopener nofollow">åé® Qwen3-VL</a></li>
<li><a href="https://midscenejs.com/zh/model-common-config.html#qwen25-vl" target="_blank" rel="noopener nofollow">åé® Qwen2.5-VL</a></li>
<li><a href="https://midscenejs.com/zh/model-common-config.html#glm-v" target="_blank" rel="noopener nofollow">æºè°± GLM-V</a></li>
<li><a href="https://midscenejs.com/zh/model-common-config.html#auto-glm" target="_blank" rel="noopener nofollow">æºè°± AutoGLM</a></li>
<li><a href="https://midscenejs.com/zh/model-common-config.html#gemini-3-pro" target="_blank" rel="noopener nofollow">Gemini-3-Pro / Gemini-3-Flash</a></li>
<li><a href="https://midscenejs.com/zh/model-common-config.html#ui-tars" target="_blank" rel="noopener nofollow">UI-TARS</a></li>
</ul>
<p>è¿äºæ¨¡åé½å·å¤è¯å¥½çâåç´ å®ä½âè½åï¼ä¸å¨ä»»å¡è§åãçé¢çè§£ç­åºæ¯ä¸ä¹æä¸éçè¡¨ç°ãå¦æä½ ä¸ç¥éä»åªéå¼å§ï¼éç¨ä½ ç¼ä¸æå®¹æè·å¾çæ¨¡åå³å¯ã</p>
<table>
<thead>
<tr>
<th style="text-align: left">æ¨¡åç³»å</th>
<th style="text-align: left">é¨ç½²</th>
<th style="text-align: left">Midscene è¯ä»·</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">è±å Seed æ¨¡å <br><a href="https://midscenejs.com/zh/model-common-config.html#doubao-seed-model" target="_blank" rel="noopener nofollow">å¿«ééç½®</a></td>
<td style="text-align: left">ç«å±±å¼æçæ¬ï¼ <a href="https://www.volcengine.com/docs/82379/1799865" target="_blank" rel="noopener nofollow">Doubao-Seed-1.6-Vision</a></td>
<td style="text-align: left">â­â­â­â­                         UI æä½è§åãå®ä½è½åè¾å¼º éåº¦ç¥æ¢</td>
</tr>
<tr>
<td style="text-align: left">åé® Qwen3-VL<br> <a href="https://midscenejs.com/zh/model-common-config.html#qwen3-vl" target="_blank" rel="noopener nofollow">å¿«ééç½®</a></td>
<td style="text-align: left"><a href="https://help.aliyun.com/zh/model-studio/vision" target="_blank" rel="noopener nofollow">é¿éäº</a> <a href="https://openrouter.ai/qwen" target="_blank" rel="noopener nofollow">OpenRouter</a> <a href="https://ollama.com/library/qwen3-vl" target="_blank" rel="noopener nofollow">Ollama(å¼æº)</a></td>
<td style="text-align: left">â­â­â­â­ <br>å¤æåºæ¯æ­è¨è½åä¸å¤ç¨³å® æ§è½è¶ç¾¤ï¼æä½åç¡® æå¼æºçæ¬ï¼<a href="https://huggingface.co/Qwen" target="_blank" rel="noopener nofollow">HuggingFace</a> / <a href="https://github.com/QwenLM/" target="_blank" rel="noopener nofollow">Github</a>ï¼</td>
</tr>
<tr>
<td style="text-align: left">åé® Qwen2.5-VL <br><a href="https://midscenejs.com/zh/model-common-config.html#qwen25-vl" target="_blank" rel="noopener nofollow">å¿«ééç½®</a></td>
<td style="text-align: left"><a href="https://help.aliyun.com/zh/model-studio/vision" target="_blank" rel="noopener nofollow">é¿éäº</a> <a href="https://openrouter.ai/qwen" target="_blank" rel="noopener nofollow">OpenRouter</a></td>
<td style="text-align: left">â­â­â­ <br>ç»¼åææä¸å¦ Qwen3-VL</td>
</tr>
<tr>
<td style="text-align: left">æºè°± GLM-4.6V <br><a href="https://midscenejs.com/zh/model-common-config.html#glm-v" target="_blank" rel="noopener nofollow">å¿«ééç½®</a></td>
<td style="text-align: left"><a href="https://docs.z.ai/guides/vlm/glm-4.6v" target="_blank" rel="noopener nofollow">Z.AI (Global)</a> <a href="https://docs.bigmodel.cn/cn/guide/models/vlm/glm-4.6v" target="_blank" rel="noopener nofollow">BigModel (CN)</a></td>
<td style="text-align: left">å¨æ°æ¥å¥ï¼æ¬¢è¿ä½éª æ¨¡åæéå¼æº<a href="https://huggingface.co/zai-org/GLM-4.6V" target="_blank" rel="noopener nofollow">HuggingFace</a></td>
</tr>
<tr>
<td style="text-align: left">Gemini-3-Pro / Gemini-3-Flash <br><a href="https://midscenejs.com/zh/model-common-config.html#gemini-3-pro" target="_blank" rel="noopener nofollow">å¿«ééç½®</a></td>
<td style="text-align: left"><a href="https://ai.google.dev/gemini-api/docs/models/gemini" target="_blank" rel="noopener nofollow">Google Cloud</a></td>
<td style="text-align: left">â­â­â­ <br>æ¯æ Gemini-3-Flash ä»·æ ¼é«äºè±åååé®</td>
</tr>
<tr>
<td style="text-align: left">UI-TARS<br> <a href="https://midscenejs.com/zh/model-common-config.html#ui-tars" target="_blank" rel="noopener nofollow">å¿«ééç½®</a></td>
<td style="text-align: left"><a href="https://www.volcengine.com/docs/82379/1536429" target="_blank" rel="noopener nofollow">ç«å±±å¼æ</a></td>
<td style="text-align: left">â­â­ <br>ææ¢ç´¢è½åï¼ä½å¨ä¸ååºæ¯è¡¨ç°å¯è½å·®å¼è¾å¤§ æå¼æºçæ¬ï¼<a href="https://huggingface.co/bytedance-research/UI-TARS-72B-SFT" target="_blank" rel="noopener nofollow">HuggingFace</a> / <a href="https://github.com/bytedance/ui-tars" target="_blank" rel="noopener nofollow">Github</a>ï¼</td>
</tr>
</tbody>
</table>
<p>å¦æä½ å®å¨æ²¡æå¤´ç»ªï¼ææ¨èéæ©<code>åé® Qwen3-VL</code>ææºè°±<code> GLM-4.6V</code>ã</p>
<h3 id="54-æ¨¡åéç½®">5.4 æ¨¡åéç½®</h3>
<h4 id="1-ç³è¯·å¤§æ¨¡åapi-key">1. ç³è¯·å¤§æ¨¡åAPI KEY</h4>
<p>ä»¥<code>åé® Qwen3-VL</code>ä¸ºä¾ã</p>
<p>1ãè®¿é®<code>DashScope</code>ç®¡ç<a href="https://dashscope.console.aliyun.com/" target="_blank" rel="noopener nofollow">æ§å¶å°</a></p>
<pre><code>https://dashscope.console.aliyun.com/
</code></pre>
<p><img src="https://image.kjdaohang.com/PicGo/20260201122300613.png" alt="" loading="lazy"></p>
<p>2ãç¹å»å¼éæå¡ï¼DashScope æ¨¡åæå¡ï¼ï¼è·³è½¬å°é¿éäºç¾ç¼å¹³å°</p>
<p><img src="https://image.kjdaohang.com/PicGo/20260201122342667.png" alt="" loading="lazy"></p>
<p>3ãå¼éä¹åï¼æ°ç¨æ·æ¯ä¸ªæ¨¡åé½ä¼èµé100wçåè´¹ä½éªé¢åº¦</p>
<p><img src="https://image.kjdaohang.com/PicGo/20260201122509525.png" alt="" loading="lazy"></p>
<p>å¨é¿éäºç¾ç¼æ¨¡åå¹¿åºä¸­ï¼å¯ä»¥æ¥çå°æææ¯æçæ¨¡å</p>
<p><img src="https://image.kjdaohang.com/PicGo/20260201122837281.png" alt="" loading="lazy"></p>
<p>æ¯å¦æä»¬è¦éç¨ç<code>qwen3-vl-plus</code>ï¼è¿ä¸ªæ¯éä¹åé®æ¨åºæ¥çæ°çè§è§çè§£æ¨¡åï¼å¦æä½ ä¸æ¸æ¥ï¼ä½ è½ä¸è½ç¨è¿ä¸ªæ¨¡åï¼å¯ä»¥ç¹å»è¿å¥çä¸ä¸è¿ææ²¡æåè´¹é¢åº¦</p>
<p><img src="https://image.kjdaohang.com/PicGo/20260201123211973.png" alt="" loading="lazy"></p>
<p>å¦æåè´¹é¢åº¦ç¨å®äºï¼è¿æ³ç¨ï¼ä¹å¯ä»¥åè±ç¹å°é±ï¼è´­ä¹°å®çtokenå¥é¤ã</p>
<p>4ãéæ©<code>å¯é¥ç®¡ç</code>-&gt;åå»º<code>API KEY</code></p>
<p><img src="https://image.kjdaohang.com/PicGo/20260201123547539.png" alt="" loading="lazy"></p>
<p>å¤å¶<code>API Key</code>ï¼ä¸è¦æ³é²ç»å«äººï¼èªå·±æ¿ä¸ªå°æ¬æ¬è®°ä¸æ¥å°±è¡</p>
<p><img src="https://image.kjdaohang.com/PicGo/20260201123629460.png" alt="" loading="lazy"></p>
<h4 id="2-éç½®ç¯å¢åé">2. éç½®ç¯å¢åé</h4>
<p>æäºAPI Keyä¹åï¼éè¦å°æ¨¡åéç½®åæ°é¡¹æ¾ç½®å¨ç³»ç»ç¯å¢åéä¸­ï¼Midscene ä¼èªå¨è¯»åè¿äºç¯å¢åéã</p>
<p>éç½®ç¯å¢åéå¸¸ç¨çæä¸¤ç§æ¹å¼ï¼</p>
<ul>
<li>å¨ <code>Midscene Chrome</code> æä»¶ä¸­ï¼ä½ ä¹å¯ä»¥ä½¿ç¨è¿ç§ <code>export KEY="value"</code> éç½®æ ¼å¼</li>
</ul>
<pre><code class="language-bash"># æ¿æ¢ä¸ºä½ èªå·±ç API Key
export MIDSCENE_MODEL_BASE_URL="https://dashscope.aliyuncs.com/compatible-mode/v1"
export MIDSCENE_MODEL_API_KEY="sk-abcdefghijklmnopqrstuvwxyz"
export MIDSCENE_MODEL_NAME="qwen3-vl-plus"
export MIDSCENE_MODEL_FAMILY="qwen3-vl"
</code></pre>
<p><img src="https://image.kjdaohang.com/PicGo/20260201125206521.png" alt="" loading="lazy"></p>
<ul>
<li>å¨é¡¹ç®çè¿è¡è·¯å¾ä¸åå»ºä¸ä¸ª <code>.env</code> æä»¶ï¼å¹¶æ·»å ä»¥ä¸åå®¹ï¼Midscene çå½ä»¤è¡å·¥å·é»è®¤ä¼è¯»åè¿ä¸ªæä»¶ãï¼è¯¥ç§æ¹å¼éç¨äºå½ä»¤è¡å·¥å·ï¼</li>
</ul>
<pre><code class="language-BASH">MIDSCENE_MODEL_BASE_URL="https://dashscope.aliyuncs.com/compatible-mode/v1"
MIDSCENE_MODEL_API_KEY="sk-abcdefghijklmnopqrstuvwxyz"
MIDSCENE_MODEL_NAME="qwen3-vl-plus"
MIDSCENE_MODEL_FAMILY="qwen3-vl"
</code></pre>
<blockquote>
<p>è¯·æ³¨æï¼è¿éä¸éè¦å¨æ¯ä¸è¡åæ·»å  <code>export</code>ï¼ä¸åªæ Midscene å½ä»¤è¡å·¥å·ä¼é»è®¤è¯»åè¿ä¸ªæä»¶</p>
</blockquote>
<h3 id="55-å¿«éä½éª">5.5 å¿«éä½éª</h3>
<p>è®²å°è¿éï¼ææçåå¤å·¥ä½ï¼é½å·²ç»åå¥½äºï¼æ³å¿æ­¤æ¶çä½ ï¼å·²ç»è¿«ä¸åå¾ï¼è¦ä½éªä¸ä¸Midsceneäºã</p>
<p>1ãå¨Midsceneè¾å¥æ¡ä¸­ï¼è¾å¥æç¤ºè¯æä»¤ï¼<code>æå¼æµè§å¨ï¼è®¿é®ç¾åº¦é¡µé¢ï¼å¨è¾å¥æ¡ä¸­Pythonï¼ç¹å»æç´¢</code>ï¼éæ©ç¬¬ä¸ä¸ªActionç±»åï¼å¯ä»¥çè§£ï¼è¯¥ç±»åä¼æ ¹æ®ä½ çéæ±èªå¨å¸®ä½ è§åï¼æ§è¡ï¼æç¹ç±»ä¼¼Agentä¸æ ·ã</p>
<p><img src="https://image.kjdaohang.com/PicGo/20260202084359423.png" alt="" loading="lazy"></p>
<p>å ä¸ªå¸¸ç¨çæä½ç±»åï¼</p>
<ul>
<li>Actionï¼AIèªå¨è§åæ§è¡ä»»å¡</li>
<li>Queryï¼å¸¸ç¨äºæåæ°æ®</li>
<li>Assertï¼å¸¸ç¨äºæ­è¨</li>
<li>Tapï¼ç¹å»ï¼ï¼ç¨äºç¹å»æä½</li>
</ul>
<p>2ãå½ç¹å»è¿è¡åï¼Midsceneä¼æ ¹æ®æä»¬çæä»¤æå¾ï¼å¸®æä»¬èªå¨è§åä»»å¡ï¼æ§è¡æä½ï¼æ¯å¦æå¼ç¾åº¦ï¼èªå¨æ¾å°ç¾åº¦é¡µé¢çè¾å¥æ¡ï¼å¹¶è¾å¥Pythonï¼ç¹å»æç´¢ç­çæä½ãææçæ§å¶è¿ç¨ï¼é½ä¸éè¦æä»¬èªå·±åä»£ç ï¼æ¾åç´ å®ä½ï¼ä½ åªéè¦å°ä½ çè¦æ±ç¨èªç¶è¯­è¨æè¿°åºæ¥å°±å¯ä»¥äºã</p>
<p>å·ä½æ§è¡ææï¼å¤§å®¶å¯ä»¥çè¿ä¸ªå¨ç»è§é¢ï¼ä¹å¯èªè¡å¨æ¬å°å°è¯è¿è¡ã</p>
<blockquote>
<p>è¿éé¢æä¸ä¸ªå°åï¼å¦æä½ æå¼çæ¯ä¸ä¸ªç©ºç½é¡µï¼å³å°åæ ä¸ºç©ºæ¶ï¼åéæä»¤æ¶ï¼ä¼æ¥éCannot access a chrome:// URL</p>
</blockquote>
<p><img src="https://image.kjdaohang.com/PicGo/20260201132348598.png" alt="" loading="lazy"></p>
<p>ä¹å°±æå³çï¼å¤§å®¶ç¨Midsceneæµè§å¨æä»¶è¿è¡AIèªå¨åæ¶ï¼è¦ååçå¨æä¸ªé¡µé¢ï¼è³å°è¦ç¡®ä¿å°åæ ä¸è½ä¸ºç©ºï¼è¿ä¸ªæç¹å°é¸¡èãå½ç¶å½±åä¸å¤§ï¼çå®æ¹åç»­ä¼ä¸ä¼ä¼åä¸ä¸å§ã</p>
<p>3ãé¤äºè¿ç§å¸¸è§ç¨æ³ï¼<code>Midscene</code>è¿æ¯ææ¡¥æ¥æ¨¡å¼è¿æ¥ï¼<code>Midscene Chrome</code> æä»¶çæ¡¥æ¥æ¨¡å¼åè®¸ä½ ä½¿ç¨æ¬å°èæ¬æ¥æ§å¶æ¡é¢ç Chromeãèæ¬æ¢è½è¿æ¥æ°æ ç­¾é¡µï¼ä¹å¯ä»¥éçå°å½åæ¿æ´»çæ ç­¾é¡µãè¿ç§æ¹å¼è½å¤ç¨æ¬å°æµè§å¨ç cookiesãæä»¶åé¡µé¢ç¶æï¼ä¸èªå¨åèæ¬åä½å®æä»»å¡ï¼å¨èªå¨åé¢åä¹è¢«ç§°ä½ âman-in-the-loopâã</p>
<p><strong>ä¸ºä»ä¹éè¦æ¡¥æ¥æ¨¡å¼å¢ï¼</strong> å ä¸ºæ­£å¸¸æåµä¸ï¼<code>Midscene</code>æ¯æ¬¡æ§è¡ä»»å¡é½ä¼åæå¼ä¸ä¸ªå¨æ°çæµè§å¨çªå£ï¼ä½å¾å¤åºæ¯ä¸ï¼æä½é¡µé¢é½éè¦è¿è¡ç¨æ·ç»å½è®¤è¯ï¼éè¿æ¡¥æ¥æ¨¡å¼è¿æ¥ï¼å¯ä»¥ç´æ¥å¤ç¨æ¬å°å·²æçCookieåé¡µé¢ç¶æï¼ä¸å¿å¨æ§è¡AIæµè¯ä»»å¡æé´æå·¥æ¥å®æç»å½æä½ã</p>
<p><img src="https://image.kjdaohang.com/PicGo/20260201133546151.png" alt="" loading="lazy"></p>
<p>è¿è¡ä»»å¡åï¼åç¹å» âAllow connectionâ ï¼æ§è¡åä½ ä¼çå°æä»¶ç¶æåä¸º âconnectedâ</p>
<p><img src="https://image.kjdaohang.com/PicGo/20260201133639128.png" alt="" loading="lazy"></p>
<p>è®²å°è¿éï¼ä½ å·²ç»åºæ¬ææ¡äºå¦ä½å©ç¨æä»¶çæ¹å¼æ¥ç®åä½¿ç¨<code>Midscene</code>äºï¼ä½è¿ä¸å¤ã</p>
<h3 id="56-è¿é¶ä½¿ç¨">5.6 è¿é¶ä½¿ç¨</h3>
<p>åé¢æä»¬å·²ç»å­¦ä¹ äºï¼å¦ä½éè¿Chromeæµè§å¨æä»¶çæ¹å¼æ¥ä½¿ç¨Midsceneäºï¼ä½è¿ç§æ¹å¼æ¯è¾é¸¡èï¼ä¸å¤ªéå<strong>è§åå</strong>ã<strong>æä¹å</strong>ã<strong>èµäº§å</strong>ã</p>
<p><strong>æä¹çè§£å¢ï¼</strong></p>
<p>ä½ æ³ï¼æä»¬å©ç¨Midsceneå¼å±èªå¨åæ¶ï¼æ»ä¸è½æ¯æ¬¡å¨æ§è¡èªå¨åæµè¯ä¹åï¼è¿è¦äººå·¥æå¨æå¼æµè§å¨æä»¶ï¼ææä»¤æå·¥åç»å®å§ï¼é£è¿ä¸å«èªå¨åæµè¯ï¼</p>
<p>èªå¨åæµè¯ï¼æèµ·ç çä¸ç¹è¦æ±ï¼åæåªè¦åå¤å¥½äºæµè¯èæ¬æAIæä»¤æç¤ºè¯ï¼åç»­çæææ§è¡å¨ä½ï¼é½åºè¯¥æ¯ä¸éè¦äººä¸ºä»å¥çã</p>
<p>è¿ææ´éè¦çä¸ç¹ï¼æµè§å¨æä»¶çè¿ç§æ¹å¼ï¼æä»¬å¾é¾å¨ä¼ä¸ä¸­ï¼å°ä¸å¡æµè¯ç¨ä¾æä¹åãèµäº§åå¤ç¨èµ·æ¥ã</p>
<p>æä»¥æ¥ä¸æ¥ï¼æåè±ä¸ç¹ç¹æ¶é´ï¼åäº«ä¸ä¸ï¼Midsceneå¦å¤çä¸ç§è¿é¶ç¨æ³ï¼<strong>å½ä»¤è¡+éç½®æä»¶</strong>çæ¹å¼ã</p>
<p>ç®åæ¥è¯´ï¼Midscene å®ä¹äºä¸ç§ YAML æ ¼å¼çèæ¬ï¼å¯ä»¥è®©å¼åèå¿«éç¼åèªå¨åèæ¬ï¼å¹¶æä¾äºå¯¹åºçå½ä»¤è¡å·¥å·æ¥å¿«éæ§è¡è¿äºèæ¬ã</p>
<blockquote>
<p>å¦æè¯´æä»¶çæ¹å¼ï¼åªæ¯ä¸ºäºæä¾ç»ä½¿ç¨èç®åä½éªä¸ä¸ï¼é£<strong>å½ä»¤è¡+éç½®æä»¶</strong>æ¹å¼ï¼å°±æ¯è¾éåä¼ä¸åæ­£å¼ä½¿ç¨äºã</p>
</blockquote>
<h4 id="1-å¦ä½ä¸æ">1. å¦ä½ä¸æ</h4>
<p>1ãå¨å±å®è£ <code>@midscene/cli</code> ï¼æ¨èæ°æä½¿ç¨ï¼ï¼</p>
<pre><code>npm i -g @midscene/cli
</code></pre>
<p>æå¨é¡¹ç®ä¸­æéå®è£</p>
<pre><code>npm i @midscene/cli --save-dev
</code></pre>
<p>2ãæ°å»ºä¸ä¸ªé¡¹ç®ç®å½ï¼å¨ç®å½ä¸ç¼åYAMLéç½®æä»¶ï¼å¯ä»¥çè§£ä¸ºYAMLéç½®æä»¶å°±æ¯midsceneçæµè¯èæ¬ï¼æ¯å¦åå»ºä¸ä¸ªåä¸º <code>bing-search.yaml</code> çæä»¶ï¼</p>
<pre><code class="language-YAML">web:
  url: https://www.bing.com

tasks:
  - name: æç´¢å¤©æ°
    flow:
      - ai: æç´¢ "ä»æ¥å¤©æ°"
      - sleep: 3000
      - aiAssert: ç»ææ¾ç¤ºå¤©æ°ä¿¡æ¯
</code></pre>
<p>3ãå¨é¡¹ç®ç®å½ï¼åå»º.envæä»¶ï¼éç½®AIæ¨¡åé©±å¨çç¯å¢åéä¿¡æ¯</p>
<pre><code class="language-bash">MIDSCENE_MODEL_BASE_URL="https://dashscope.aliyuncs.com/compatible-mode/v1"
# æ¿æ¢æèªå·±çAPI KEY
MIDSCENE_MODEL_API_KEY="sk-abcdefghijklmnopqrstuvwxyz"
MIDSCENE_MODEL_NAME="qwen3-vl-plus"
MIDSCENE_MODEL_FAMILY="qwen3-vl"
</code></pre>
<p>4ãéè¿å½ä»¤è¡æ¥æ§è¡å®ï¼</p>
<pre><code class="language-bash">midscene ./bing-search.yaml
# å¦æå¨é¡¹ç®ä¸­å®è£äº Midscene
npx midscene ./bing-search.yaml
</code></pre>
<p><img src="https://image.kjdaohang.com/PicGo/20260201141958373.png" alt="" loading="lazy"></p>
<p>5ãå¨éç½®æä»¶ä¸­ï¼å¦ææ¶åå°ä¸äºå¨æåéï¼å¯ä»¥éè¿ <code>${variable-name}</code> å¼ç¨ç¯å¢åéæ¥å®ç°ï¼å¦ï¼</p>
<pre><code>topic=weather today
</code></pre>
<pre><code># ...
- ai: å¨è¾å¥æ¡ä¸­è¾å¥ ${topic}
# ...
</code></pre>
<p>6ã<code>@midscene/cli</code> æ¯æä½¿ç¨ééç¬¦å¹éå¤ä¸ªèæ¬æ¥æ¹éæ§è¡èæ¬ï¼è¿ç¸å½äº <code>--files</code> åæ°çç®åã</p>
<pre><code># è¿è¡åä¸ªèæ¬
midscene ./bing-search.yaml

# ä½¿ç¨ééç¬¦æ¨¡å¼è¿è¡ææå¹éçèæ¬
midscene './scripts/**/*.yaml'
</code></pre>
<p>7ãæ§è¡å®æåï¼è¾åºç®å½ä¼åå«ï¼</p>
<ul>
<li><code>--summary</code> æå®ç JSON æ¥åï¼é»è®¤ <code>index.json</code>ï¼ï¼è®°å½ææèæ¬çæ§è¡ç¶æä¸ç»è®¡æ°æ®ã</li>
<li>æ¯ä¸ª YAML æä»¶å¯¹åºçç¬ç«æ§è¡ç»æï¼JSON æ ¼å¼ï¼ã</li>
<li>æ¯ä¸ªèæ¬çæçå¯è§åæ¥åï¼HTML æ ¼å¼ï¼ã</li>
</ul>
<p><img src="https://image.kjdaohang.com/PicGo/20260201142119212.png" alt="" loading="lazy"></p>
<p>8ãé»è®¤æåµä¸èæ¬æ¯å¨æ å¤´æ¨¡å¼ä¸è¿è¡ï¼å¦ææ³æå¼æµè§å¨çªå£ï¼å¯ä»¥å¸¦ä¸<code>Headed</code>åæ°</p>
<pre><code class="language-bash"># è¿è¡å¨ headed æ¨¡å¼
midscene /path/to/yaml --headed

# è¿è¡å¨ headed æ¨¡å¼å¹¶å¨ç»æåä¿ççªå£
midscene /path/to/yaml --keep-window
</code></pre>
<p>9ãå¦æä½ æ³å¨èæ¬ä¸­ï¼ä½¿ç¨æ¡¥æ¥æ¨¡å¼è®© YAML èæ¬é©±å¨ç°æçæ¡é¢æµè§å¨ï¼å¤ç¨ Cookiesãæä»¶æå·²æç¶æãåå®è£ Chrome æ©å±ï¼ç¶åå¨ <code>web</code> éç½®ä¸­å å¥ï¼</p>
<pre><code>web:
  url: https://www.bing.com
+ bridgeMode: newTabWithUrl
</code></pre>
<h4 id="2-å½ä»¤è¡åæ°">2. å½ä»¤è¡åæ°</h4>
<p>å½ä»¤è¡å·¥å·æä¾äºå¤é¡¹åæ°ï¼ç¨äºæ§å¶èæ¬çæ§è¡è¡ä¸ºï¼</p>
<ul>
<li><code>--files &lt;file1&gt; &lt;file2&gt; ...</code>ï¼æå®èæ¬æä»¶åè¡¨ãé»è®¤æé¡ºåºæ§è¡ï¼<code>--concurrent</code> ä¸º <code>1</code>ï¼ï¼å¯éè¿ <code>--concurrent</code> è®¾ç½®å¹¶åæ°éãæ¯æ <a href="https://www.npmjs.com/package/glob" target="_blank" rel="noopener nofollow">glob</a> ééç¬¦è¯­æ³ã</li>
<li><code>--concurrent &lt;number&gt;</code>ï¼è®¾ç½®å¹¶åæ§è¡çæ°éï¼é»è®¤ <code>1</code>ã</li>
<li><code>--continue-on-error</code>ï¼å¯ç¨åï¼å³ä½¿æä¸ªèæ¬å¤±è´¥ä¹ä¼ç»§ç»­æ§è¡åç»­èæ¬ãé»è®¤å³é­ã</li>
<li><code>--share-browser-context</code>ï¼å¨å¤ä¸ªèæ¬ä¹é´å±äº«æµè§å¨ä¸ä¸æï¼Cookiesã<code>localStorage</code> ç­ï¼ï¼éåéè¦è¿ç»­ç»å½æçåºæ¯ãé»è®¤å³é­ã</li>
<li><code>--summary &lt;filename&gt;</code>ï¼æå®çæç JSON æ»ç»æ¥åè·¯å¾ã</li>
<li><code>--headed</code>ï¼å¨å¸¦çé¢çæµè§å¨ä¸­è¿è¡èæ¬ï¼èéé»è®¤çæ å¤´æ¨¡å¼ã</li>
<li><code>--keep-window</code>ï¼èæ¬æ§è¡å®æåä¿ææµè§å¨çªå£ï¼ä¼èªå¨å¼å¯ <code>--headed</code> æ¨¡å¼ã</li>
<li><code>--config &lt;filename&gt;</code>ï¼æå®éç½®æä»¶ï¼æä»¶ä¸­çåæ°ä¼ä½ä¸ºå½ä»¤è¡åæ°çé»è®¤å¼ã</li>
<li><code>--web.userAgent &lt;ua&gt;</code>ï¼è®¾ç½®æµè§å¨ UAï¼è¦çææèæ¬ä¸­ç <code>web.userAgent</code>ã</li>
<li><code>--web.viewportWidth &lt;width&gt;</code>ï¼è®¾ç½®æµè§å¨è§å£å®½åº¦ï¼è¦çææèæ¬ä¸­ç <code>web.viewportWidth</code>ã</li>
<li><code>--web.viewportHeight &lt;height&gt;</code>ï¼è®¾ç½®æµè§å¨è§å£é«åº¦ï¼è¦çææèæ¬ä¸­ç <code>web.viewportHeight</code>ã</li>
<li><code>--android.deviceId &lt;device-id&gt;</code>ï¼è®¾ç½®å®åè®¾å¤ IDï¼è¦çææèæ¬ä¸­ç <code>android.deviceId</code>ã</li>
<li><code>--ios.wdaPort &lt;port&gt;</code>ï¼è®¾ç½® WebDriverAgent ç«¯å£ï¼è¦çææèæ¬ä¸­ç <code>ios.wdaPort</code>ã</li>
<li><code>--ios.wdaHost &lt;host&gt;</code>ï¼è®¾ç½® WebDriverAgent ä¸»æºå°åï¼è¦çææèæ¬ä¸­ç <code>ios.wdaHost</code>ã</li>
<li><code>--dotenv-debug</code>ï¼å¼å¯ dotenv çè°è¯æ¥å¿ï¼é»è®¤å³é­ã</li>
<li><code>--dotenv-override</code>ï¼åè®¸ dotenv è¦çååçå¨å±ç¯å¢åéï¼é»è®¤å³é­ã</li>
</ul>
<p>æ¯å¦ï¼ä½¿ç¨ <code>--files</code> æå®æ§è¡é¡ºåºï¼</p>
<pre><code class="language-bash">midscene --files ./login.yaml ./buy/*.yaml ./checkout.yaml
</code></pre>
<p><code>midscene</code>æ¯æå¹¶åè¿è¡ï¼å¦ä»¥ 4 ä¸ªå¹¶åæ§è¡ææèæ¬ï¼å¹¶å¨åºéæ¶ç»§ç»­è¿è¡ï¼</p>
<pre><code class="language-bash">midscene --files './scripts/**/*.yaml' --concurrent 4 --continue-on-error
</code></pre>
<p>è¿å¯ä»¥æåæ°åå° YAML éç½®æä»¶ä¸­ï¼å¹¶éè¿ <code>--config</code> å¼ç¨ï¼å½ä»¤è¡ä¼ å¥çåæ°ä¼åçº§é«äºéç½®æä»¶ã</p>
<pre><code class="language-bash">files:
  - './scripts/login.yaml'
  - './scripts/search.yaml'
  - './scripts/**/*.yaml'

concurrent: 4
continueOnError: true
shareBrowserContext: true
</code></pre>
<p>è¿è¡æ¹å¼ï¼</p>
<pre><code class="language-bash">midscene --config ./config.yaml
</code></pre>
<p>å¥½äºï¼éè¿å­¦ä¹ Chromeæä»¶åå½ä»¤è¡çè¿ä¸¤ç§æ¹å¼ï¼æç¸ä¿¡ä½ ï¼å·²ç»å¯ä»¥å®å¨è½ä¸ææä½<code>midscene</code>ï¼è¿å¨ç­ä»ä¹ð¤£ï¼èµ¶ç´§ä½éªä¸ä¸AIæµè¯çä¹è¶£å§ã</p>
<blockquote>
<p>é¤äºæä¸­æå°çï¼midsceneè¿æå¾å¤é«çº§çè¿é¶ç©æ³ï¼åé¢ä¼ç»ä¸åäº«å°AIè¿åç¤¾åã</p>
</blockquote>
<h2 id="6-æå¨æå">6. æå¨æå</h2>
<p>å¨çåå°è¯çåï¼ç¹ææéäº<strong>AIç¼ç¨</strong>å<strong>AIæµè¯</strong>ä¸¤ä¸ªåºæ¯ä¸çå°æ¡ä¾ï¼éè¿å¨10åéåå®æç¬¬ä¸ä¸ªAIåºç¨å¹¶ä¸çº¿ï¼ä½éªAIç¼ç¨ï¼Vibe Codingï¼ãAIæµè¯çæ ¸å¿é­åï¼å¸®å©å¤§å®¶å»ºç«å¯¹AIè½åçç´è§è®¤ç¥ãï¼å½ç¶ï¼ç®åä½ æçå°çä¹æåªæ¯AIè½åçå°å±±ä¸è§ï¼</p>
<p>åå½æ é¢ï¼å«ååªåç¹ç¹ç¹çéå¤å³å¨ï¼AI+LLM æµè¯çå¼ºå¤§ï¼æ ¸å¿å°±å¨äºéæäºæµè¯çæ ¸å¿é»è¾ï¼ä¸ç®¡AIææ¯åå±å¦ä½å¼ºå¤§ï¼ä½ææ¯ç»ç©¶è¦åå½äºäººã</p>
<p>èä»¥ <code>Midscene</code> ä¸ºä»£è¡¨ç AI èªå¨åå·¥å·ï¼æ­£å½»åºæ¹åä¼ ç»æµè¯ãä¼ ç»ç¼ç¨çæ¸¸æè§åãå®è®©æµè¯äººåãå¼åäººåä»çº ç» â<strong>æä¹å</strong>â çææ¯ç»èéæ½ç¦»ï¼èç¦äº â<strong>è¦åä»ä¹</strong>â çæ ¸å¿éæ±ï¼çæ­£ä»éå¤ä½æçæå·¥æä½ä¸­è§£æ¾åºæ¥ï¼å°ç²¾åæå¥å°æ´é«ä»·å¼çä¸å¡åºæ¯æ¢ç´¢ãäº§åè´¨éæ·±åº¦æ´å¯ä¸­ï¼èè¿æ°æ°ææ¯ AI+LLM æµè¯ççæ­£é­åã</p>
<p>æçå®è·µè¡¨æï¼ä»åæ­¥ä½¿ç¨Midsceneï¼èæ¬ç¼åæçå°±æåäº3åä»¥ä¸ï¼ç»´æ¤ææ¬å¤§å¹ä¸éï¼éææ¯äººåä¹è½å¿«éä¸æåç¨ä¾ãè¿å·²ä¸ä»æ¯å·¥å·åçº§ï¼æ´æ¯ä¸åºæµè¯çå¿µçè¿åã</p>
<p>å¦æä½ è¿å¨è¦äºUIèªå¨åï¼ä¸å¦¨ä»ä»å¤©å¼å§ï¼</p>
<ul>
<li>å®è£Midsceneæä»¶ï¼ç¨èªç¶è¯­è¨åç¬¬ä¸ä¸ªæµè¯èæ¬ï¼</li>
<li>ä»å°åºæ¯éªè¯ï¼éæ­¥æ©å±å°æ ¸å¿ä¸å¡æµç¨ï¼</li>
<li>å»ºç«å¢éåçæç¤ºè¯åºä¸æä½³å®è·µã</li>
</ul>
<p>AIä¸ä¼åä»£æµè¯å·¥ç¨å¸ï¼ä½ä¼ç¨AIçæµè¯äººï¼å¿å°æ·æ±°é£äºä»åçå¨â<strong>æå·¥+ç¡¬ç¼ç </strong>âæ¶ä»£çå¢éãå¦ææ¨ææ´å¥½çæ³æ³æå®è·µï¼æ¬¢è¿ä¸èµ·æ¢è®¨ï¼ä¹æ¬¢è¿æ¿ç ï¼ð</p>


</div>
<div id="MySignature" role="contentinfo">
    ææ¯æ¹åä¸çï¼
         --çè¯ç»å
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-06 09:03">2026-02-06 09:02</span>&nbsp;
<a href="https://www.cnblogs.com/jinjiangongzuoshi">çå¸</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19582572);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19582572', targetLink: 'https://www.cnblogs.com/jinjiangongzuoshi/p/19582572', title: 'å«ååªå âç¹ç¹ç¹âï¼AIæµè¯çå­ç§ä¸åç©æ³ï¼éå¸¦Midsceneè¯¦ç»æç¨ï¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Unsafeé­æ³ç±»æ·±åº¦è§£æï¼Javaåºå±æä½çç»ææå ]]></title>
    <link>https://www.cnblogs.com/sevencoding/p/19559023</link>
    <guid>e23f5d4a4c1e9826fd864f4d56324c60</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/sevencoding/p/19559023" title="åå¸äº 2026-02-06 09:00">
    <span role="heading" aria-level="2">Unsafeé­æ³ç±»æ·±åº¦è§£æï¼Javaåºå±æä½çç»ææå</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="ä»ç»">ä»ç»</h2>
<p>Unsafeæ¯ä½äºsun.miscåä¸çä¸ä¸ªç±»ï¼ä¸»è¦æä¾ä¸äºç¨äºæ§è¡ä½çº§å«ãä¸å®å¨æä½çæ¹æ³ï¼å¦ç´æ¥è®¿é®ç³»ç»åå­èµæºãèªä¸»ç®¡çåå­èµæºç­ï¼è¿äºæ¹æ³å¨æåJavaè¿è¡æçãå¢å¼ºJavaè¯­è¨åºå±èµæºæä½è½åæ¹é¢èµ·å°äºå¾å¤§çä½ç¨ãä½ç±äºUnsafeç±»ä½¿Javaè¯­è¨æ¥æäºç±»ä¼¼Cè¯­è¨æéä¸æ ·æä½åå­ç©ºé´çè½åï¼è¿æ çä¹å¢å äºç¨åºåçç¸å³æéé®é¢çé£é©ãå¨ç¨åºä¸­è¿åº¦ãä¸æ­£ç¡®ä½¿ç¨Unsafeç±»ä¼ä½¿å¾ç¨åºåºéçæ¦çåå¤§ï¼ä½¿å¾Javaè¿ç§å®å¨çè¯­è¨åå¾ä¸åâå®å¨âï¼å æ­¤å¯¹Unsafeçä½¿ç¨ä¸å®è¦æéã</p>
<p>è¿ä¸ªç±»å°½ç®¡éé¢çæ¹æ³é½æ¯ public çï¼ä½æ¯å¹¶æ²¡æåæ³ä½¿ç¨å®ä»¬ï¼JDK API ææ¡£ä¹æ²¡ææä¾ä»»ä½å³äºè¿ä¸ªç±»çæ¹æ³çè§£éãæ»èè¨ä¹ï¼å¯¹äº Unsafe ç±»çä½¿ç¨é½æ¯åéå¶çï¼åªææä¿¡çä»£ç æè½è·å¾è¯¥ç±»çå®ä¾ï¼å½ç¶ JDK åºéé¢çç±»æ¯å¯ä»¥éæä½¿ç¨çã</p>
<p>åæ¥çä¸è¿å¼ å¾ï¼å¯¹UnSafeç±»æ»ä½åè½ï¼</p>
<p><img src="https://seven97-blog.oss-cn-hangzhou.aliyuncs.com/imgs/202404251040445.jpg" alt="" loading="lazy"></p>
<p>å¦ä¸å¾æç¤ºï¼Unsafeæä¾çAPIå¤§è´å¯åä¸ºåå­æä½ãCASãClassç¸å³ãå¯¹è±¡æä½ãçº¿ç¨è°åº¦ãç³»ç»ä¿¡æ¯è·åãåå­å±éãæ°ç»æä½ç­å ç±»ï¼ä¸é¢å°å¯¹å¶ç¸å³æ¹æ³ååºç¨åºæ¯è¿è¡è¯¦ç»ä»ç»ã</p>
<h2 id="åå­æä½">åå­æä½</h2>
<h3 id="ä»ç»-1">ä»ç»</h3>
<p>å¦æä½ æ¯ä¸ä¸ªåè¿ C æè C++ çç¨åºåï¼ä¸å®å¯¹åå­æä½ä¸ä¼éçï¼èå¨ Java ä¸­æ¯ä¸åè®¸ç´æ¥å¯¹åå­è¿è¡æä½çï¼å¯¹è±¡åå­çåéååæ¶é½æ¯ç± JVM èªå·±å®ç°çãä½æ¯å¨ <code>Unsafe</code> ä¸­ï¼æä¾çä¸åæ¥å£å¯ä»¥ç´æ¥è¿è¡åå­æä½ï¼</p>
<pre><code class="language-java">//åéæ°çæ¬å°ç©ºé´
public native long allocateMemory(long bytes);
//éæ°è°æ´åå­ç©ºé´çå¤§å°
public native long reallocateMemory(long address, long bytes);
//å°åå­è®¾ç½®ä¸ºæå®å¼
public native void setMemory(Object o, long offset, long bytes, byte value);
//åå­æ·è´
public native void copyMemory(Object srcBase, long srcOffset,Object destBase, long destOffset,long bytes);
//æ¸é¤åå­
public native void freeMemory(long address);
</code></pre>
<p>ä½¿ç¨ä¸é¢çä»£ç è¿è¡æµè¯ï¼</p>
<pre><code class="language-java">private void memoryTest() {
    int size = 4;
    long addr = unsafe.allocateMemory(size);
    long addr3 = unsafe.reallocateMemory(addr, size * 2);
    System.out.println("addr: "+addr);
    System.out.println("addr3: "+addr3);
    try {
        unsafe.setMemory(null,addr ,size,(byte)1);
        for (int i = 0; i &lt; 2; i++) {
            unsafe.copyMemory(null,addr,null,addr3+size*i,4);
        }
        System.out.println(unsafe.getInt(addr));
        System.out.println(unsafe.getLong(addr3));
    }finally {
        unsafe.freeMemory(addr);
        unsafe.freeMemory(addr3);
    }
}
</code></pre>
<p>åçç»æè¾åºï¼</p>
<pre><code class="language-plain">addr: 2433733895744
addr3: 2433733894944
16843009
72340172838076673
</code></pre>
<p>åæä¸ä¸è¿è¡ç»æï¼é¦åä½¿ç¨<code>allocateMemory</code>æ¹æ³ç³è¯· 4 å­èé¿åº¦çåå­ç©ºé´ï¼è°ç¨<code>setMemory</code>æ¹æ³åæ¯ä¸ªå­èåå¥åå®¹ä¸º<code>byte</code>ç±»åç 1ï¼å½ä½¿ç¨ Unsafe è°ç¨<code>getInt</code>æ¹æ³æ¶ï¼å ä¸ºä¸ä¸ª<code>int</code>ååéå  4 ä¸ªå­èï¼ä¼ä¸æ¬¡æ§è¯»å 4 ä¸ªå­èï¼ç»æä¸ä¸ª<code>int</code>çå¼ï¼å¯¹åºçåè¿å¶ç»æä¸º 16843009ã</p>
<p>ä½ å¯ä»¥éè¿ä¸å¾çè§£è¿ä¸ªè¿ç¨ï¼</p>
<p><img src="https://seven97-blog.oss-cn-hangzhou.aliyuncs.com/imgs/202406202130396.png" alt="" loading="lazy"></p>
<p>å¨ä»£ç ä¸­è°ç¨<code>reallocateMemory</code>æ¹æ³éæ°åéäºä¸å 8 å­èé¿åº¦çåå­ç©ºé´ï¼éè¿æ¯è¾<code>addr</code>å<code>addr3</code>å¯ä»¥çå°åä¹åç³è¯·çåå­å°åæ¯ä¸åçãå¨ä»£ç ä¸­çç¬¬äºä¸ª for å¾ªç¯éï¼è°ç¨<code>copyMemory</code>æ¹æ³è¿è¡äºä¸¤æ¬¡åå­çæ·è´ï¼æ¯æ¬¡æ·è´åå­å°å<code>addr</code>å¼å§ç 4 ä¸ªå­èï¼åå«æ·è´å°ä»¥<code>addr3</code>å<code>addr3+4</code>å¼å§çåå­ç©ºé´ä¸ï¼</p>
<p><img src="https://seven97-blog.oss-cn-hangzhou.aliyuncs.com/imgs/202406202130404.png" alt="" loading="lazy"></p>
<p>æ·è´å®æåï¼ä½¿ç¨<code>getLong</code>æ¹æ³ä¸æ¬¡æ§è¯»å 8 ä¸ªå­èï¼å¾å°<code>long</code>ç±»åçå¼ä¸º 72340172838076673ã</p>
<p>éè¦æ³¨æï¼éè¿è¿ç§æ¹å¼åéçåå­å±äº å å¤åå­ ï¼æ¯æ æ³è¿è¡åå¾åæ¶çï¼éè¦æä»¬æè¿äºåå­å½åä¸ç§èµæºå»æå¨è°ç¨<code>freeMemory</code>æ¹æ³è¿è¡éæ¾ï¼å¦åä¼äº§çåå­æ³æ¼ãéç¨çæä½åå­æ¹å¼æ¯å¨<code>try</code>ä¸­æ§è¡å¯¹åå­çæä½ï¼æç»å¨<code>finally</code>åä¸­è¿è¡åå­çéæ¾ã</p>
<p><strong>ä¸ºä»ä¹è¦ä½¿ç¨å å¤åå­ï¼</strong></p>
<ul>
<li>å¯¹åå¾åæ¶åé¡¿çæ¹åãç±äºå å¤åå­æ¯ç´æ¥åæä½ç³»ç»ç®¡çèä¸æ¯ JVMï¼æä»¥å½æä»¬ä½¿ç¨å å¤åå­æ¶ï¼å³å¯ä¿æè¾å°çå ååå­è§æ¨¡ãä»èå¨ GC æ¶åå°åæ¶åé¡¿å¯¹äºåºç¨çå½±åã</li>
<li>æåç¨åº I/O æä½çæ§è½ãéå¸¸å¨ I/O éä¿¡è¿ç¨ä¸­ï¼ä¼å­å¨å ååå­å°å å¤åå­çæ°æ®æ·è´æä½ï¼å¯¹äºéè¦é¢ç¹è¿è¡åå­é´æ°æ®æ·è´ä¸çå½å¨æè¾ç­çæå­æ°æ®ï¼é½å»ºè®®å­å¨å°å å¤åå­ã</li>
</ul>
<h3 id="å¸ååºç¨">å¸ååºç¨</h3>
<p><code>DirectByteBuffer</code> æ¯ Java ç¨äºå®ç°å å¤åå­çä¸ä¸ªéè¦ç±»ï¼éå¸¸ç¨å¨éä¿¡è¿ç¨ä¸­åç¼å²æ± ï¼å¦å¨ NettyãMINA ç­ NIO æ¡æ¶ä¸­åºç¨å¹¿æ³ã<code>DirectByteBuffer</code> å¯¹äºå å¤åå­çåå»ºãä½¿ç¨ãéæ¯ç­é»è¾åç± Unsafe æä¾çå å¤åå­ API æ¥å®ç°ã</p>
<p>ä¸å¾ä¸º <code>DirectByteBuffer</code> æé å½æ°ï¼åå»º <code>DirectByteBuffer</code> çæ¶åï¼éè¿ <code>Unsafe.allocateMemory</code> åéåå­ã<code>Unsafe.setMemory</code> è¿è¡åå­åå§åï¼èåæå»º <code>Cleaner</code> å¯¹è±¡ç¨äºè·è¸ª <code>DirectByteBuffer</code> å¯¹è±¡çåå¾åæ¶ï¼ä»¥å®ç°å½ <code>DirectByteBuffer</code> è¢«åå¾åæ¶æ¶ï¼åéçå å¤åå­ä¸èµ·è¢«éæ¾ã</p>
<pre><code class="language-java">DirectByteBuffer(int cap) {                   // package-private

    super(-1, 0, cap, cap);
    boolean pa = VM.isDirectMemoryPageAligned();
    int ps = Bits.pageSize();
    long size = Math.max(1L, (long)cap + (pa ? ps : 0));
    Bits.reserveMemory(size, cap);

    long base = 0;
    try {
        // åéåå­å¹¶è¿ååºå°å
        base = unsafe.allocateMemory(size);
    } catch (OutOfMemoryError x) {
        Bits.unreserveMemory(size, cap);
        throw x;
    }
    // åå­åå§å
    unsafe.setMemory(base, size, (byte) 0);
    if (pa &amp;&amp; (base % ps != 0)) {
        // Round up to page boundary
        address = base + ps - (base &amp; (ps - 1));
    } else {
        address = base;
    }
    // è·è¸ª DirectByteBuffer å¯¹è±¡çåå¾åæ¶ï¼ä»¥å®ç°å å¤åå­éæ¾
    cleaner = Cleaner.create(this, new Deallocator(base, size, cap));
    att = null;
}
</code></pre>
<h2 id="åå­å±é">åå­å±é</h2>
<h3 id="ä»ç»-2">ä»ç»</h3>
<p>å¨ä»ç»åå­å±éåï¼éè¦ç¥éç¼è¯å¨å CPU ä¼å¨ä¿è¯ç¨åºè¾åºç»æä¸è´çæåµä¸ï¼ä¼å¯¹ä»£ç è¿è¡éæåºï¼ä»æä»¤ä¼åè§åº¦æåæ§è½ãèæä»¤éæåºå¯è½ä¼å¸¦æ¥ä¸ä¸ªä¸å¥½çç»æï¼å¯¼è´ CPU çé«éç¼å­ååå­ä¸­æ°æ®çä¸ä¸è´ï¼èåå­å±éï¼<code>Memory Barrier</code>ï¼å°±æ¯éè¿é»æ­¢å±éä¸¤è¾¹çæä»¤éæåºä»èé¿åç¼è¯å¨åç¡¬ä»¶çä¸æ­£ç¡®ä¼åæåµã</p>
<p>å¨ç¡¬ä»¶å±é¢ä¸ï¼åå­å±éæ¯ CPU ä¸ºäºé²æ­¢ä»£ç è¿è¡éæåºèæä¾çæä»¤ï¼ä¸åçç¡¬ä»¶å¹³å°ä¸å®ç°åå­å±éçæ¹æ³å¯è½å¹¶ä¸ç¸åãå¨ Java8 ä¸­ï¼å¼å¥äº 3 ä¸ªåå­å±éçå½æ°ï¼å®å±è½äºæä½ç³»ç»åºå±çå·®å¼ï¼åè®¸å¨ä»£ç ä¸­å®ä¹ãå¹¶ç»ä¸ç± JVM æ¥çæåå­å±éæä»¤ï¼æ¥å®ç°åå­å±éçåè½ã</p>
<p><code>Unsafe</code> ä¸­æä¾äºä¸é¢ä¸ä¸ªåå­å±éç¸å³æ¹æ³ï¼</p>
<pre><code class="language-java">//åå­å±éï¼ç¦æ­¢loadæä½éæåºãå±éåçloadæä½ä¸è½è¢«éæåºå°å±éåï¼å±éåçloadæä½ä¸è½è¢«éæåºå°å±éå
public native void loadFence();
//åå­å±éï¼ç¦æ­¢storeæä½éæåºãå±éåçstoreæä½ä¸è½è¢«éæåºå°å±éåï¼å±éåçstoreæä½ä¸è½è¢«éæåºå°å±éå
public native void storeFence();
//åå­å±éï¼ç¦æ­¢loadãstoreæä½éæåº
public native void fullFence();
</code></pre>
<p>åå­å±éå¯ä»¥çåå¯¹åå­éæºè®¿é®çæä½ä¸­çä¸ä¸ªåæ­¥ç¹ï¼ä½¿å¾æ­¤ç¹ä¹åçææè¯»åæä½é½æ§è¡åæå¯ä»¥å¼å§æ§è¡æ­¤ç¹ä¹åçæä½ãä»¥<code>loadFence</code>æ¹æ³ä¸ºä¾ï¼å®ä¼ç¦æ­¢è¯»æä½éæåºï¼ä¿è¯å¨è¿ä¸ªå±éä¹åçææè¯»æä½é½å·²ç»å®æï¼å¹¶ä¸å°ç¼å­æ°æ®è®¾ä¸ºæ æï¼éæ°ä»ä¸»å­ä¸­è¿è¡å è½½ã</p>
<p>çå°è¿ä¼°è®¡å¾å¤å°ä¼ä¼´ä»¬ä¼æ³å°<code>volatile</code>å³é®å­äºï¼å¦æå¨å­æ®µä¸æ·»å äº<code>volatile</code>å³é®å­ï¼å°±è½å¤å®ç°å­æ®µå¨å¤çº¿ç¨ä¸çå¯è§æ§ãåºäºè¯»åå­å±éï¼æä»¬ä¹è½å®ç°ç¸åçåè½ãä¸é¢å®ä¹ä¸ä¸ªçº¿ç¨æ¹æ³ï¼å¨çº¿ç¨ä¸­å»ä¿®æ¹<code>flag</code>æ å¿ä½ï¼æ³¨æè¿éç<code>flag</code>æ¯æ²¡æè¢«<code>volatile</code>ä¿®é¥°çï¼</p>
<pre><code class="language-java">@Getter
class ChangeThread implements Runnable{
    /**volatile**/ boolean flag=false;
    @Override
    public void run() {
        try {
            Thread.sleep(3000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        System.out.println("subThread change flag to:" + flag);
        flag = true;
    }
}
</code></pre>
<p>å¨ä¸»çº¿ç¨ç<code>while</code>å¾ªç¯ä¸­ï¼å å¥åå­å±éï¼æµè¯æ¯å¦è½å¤æç¥å°<code>flag</code>çä¿®æ¹ååï¼</p>
<pre><code class="language-java">public static void main(String[] args){
    ChangeThread changeThread = new ChangeThread();
    new Thread(changeThread).start();
    while (true) {
        boolean flag = changeThread.isFlag();
        unsafe.loadFence(); //å å¥è¯»åå­å±é
        if (flag){
            System.out.println("detected flag changed");
            break;
        }
    }
    System.out.println("main thread end");
}
</code></pre>
<p>è¿è¡ç»æï¼</p>
<pre><code class="language-plain">subThread change flag to:false
detected flag changed
main thread end
</code></pre>
<p>èå¦æå æä¸é¢ä»£ç ä¸­ç<code>loadFence</code>æ¹æ³ï¼é£ä¹ä¸»çº¿ç¨å°æ æ³æç¥å°<code>flag</code>åççååï¼ä¼ä¸ç´å¨<code>while</code>ä¸­å¾ªç¯ãå¯ä»¥ç¨å¾æ¥è¡¨ç¤ºä¸é¢çè¿ç¨ï¼</p>
<p><img src="https://seven97-blog.oss-cn-hangzhou.aliyuncs.com/imgs/202406202130484.png" alt="" loading="lazy"></p>
<p>äºè§£ Java åå­æ¨¡åï¼<code>JMM</code>ï¼çå°ä¼ä¼´ä»¬åºè¯¥æ¸æ¥ï¼è¿è¡ä¸­ççº¿ç¨ä¸æ¯ç´æ¥è¯»åä¸»åå­ä¸­çåéçï¼åªè½æä½èªå·±å·¥ä½åå­ä¸­çåéï¼ç¶ååæ­¥å°ä¸»åå­ä¸­ï¼å¹¶ä¸çº¿ç¨çå·¥ä½åå­æ¯ä¸è½å±äº«çãä¸é¢çå¾ä¸­çæµç¨å°±æ¯å­çº¿ç¨åå©äºä¸»åå­ï¼å°ä¿®æ¹åçç»æåæ­¥ç»äºä¸»çº¿ç¨ï¼è¿èä¿®æ¹ä¸»çº¿ç¨ä¸­çå·¥ä½ç©ºé´ï¼è·³åºå¾ªç¯ã</p>
<h3 id="å¸ååºç¨-1">å¸ååºç¨</h3>
<p>å¨ Java 8 ä¸­å¼å¥äºä¸ç§éçæ°æºå¶ââ<code>StampedLock</code>ï¼å®å¯ä»¥çææ¯è¯»åéçä¸ä¸ªæ¹è¿çæ¬ã<code>StampedLock</code> æä¾äºä¸ç§ä¹è§è¯»éçå®ç°ï¼è¿ç§ä¹è§è¯»éç±»ä¼¼äºæ éçæä½ï¼å®å¨ä¸ä¼é»å¡åçº¿ç¨è·ååéï¼ä»èç¼è§£è¯»å¤åå°æ¶åçº¿ç¨âé¥¥é¥¿âç°è±¡ãç±äº <code>StampedLock</code> æä¾çä¹è§è¯»éä¸é»å¡åçº¿ç¨è·åè¯»éï¼å½çº¿ç¨å±äº«åéä»ä¸»åå­ load å°çº¿ç¨å·¥ä½åå­æ¶ï¼ä¼å­å¨æ°æ®ä¸ä¸è´é®é¢ã</p>
<p>ä¸ºäºè§£å³è¿ä¸ªé®é¢ï¼<code>StampedLock</code> ç <code>validate</code> æ¹æ³ä¼éè¿ <code>Unsafe</code> ç <code>loadFence</code> æ¹æ³å å¥ä¸ä¸ª <code>load</code> åå­å±éã</p>
<pre><code class="language-java">public boolean validate(long stamp) {
   U.loadFence();
   return (stamp &amp; SBITS) == (state &amp; SBITS);
}
</code></pre>
<h2 id="å¯¹è±¡æä½">å¯¹è±¡æä½</h2>
<h3 id="ä»ç»-3">ä»ç»</h3>
<p><strong>ä¾å­</strong></p>
<pre><code class="language-java">import sun.misc.Unsafe;
import java.lang.reflect.Field;

public class Main {

    private int value;

    public static void main(String[] args) throws Exception{
        Unsafe unsafe = reflectGetUnsafe();
        assert unsafe != null;
        long offset = unsafe.objectFieldOffset(Main.class.getDeclaredField("value"));
        Main main = new Main();
        System.out.println("value before putInt: " + main.value);
        unsafe.putInt(main, offset, 42);
        System.out.println("value after putInt: " + main.value);
  System.out.println("value after putInt: " + unsafe.getInt(main, offset));
    }

    private static Unsafe reflectGetUnsafe() {
        try {
            Field field = Unsafe.class.getDeclaredField("theUnsafe");
            field.setAccessible(true);
            return (Unsafe) field.get(null);
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }
    }

}
</code></pre>
<p>è¾åºç»æï¼</p>
<pre><code class="language-plain">value before putInt: 0
value after putInt: 42
value after putInt: 42
</code></pre>
<p><strong>å¯¹è±¡å±æ§</strong></p>
<p>å¯¹è±¡æåå±æ§çåå­åç§»éè·åï¼ä»¥åå­æ®µå±æ§å¼çä¿®æ¹ï¼å¨ä¸é¢çä¾å­ä¸­æä»¬å·²ç»æµè¯è¿äºãé¤äºåé¢ç<code>putInt</code>ã<code>getInt</code>æ¹æ³å¤ï¼Unsafe æä¾äºå¨é¨ 8 ç§åºç¡æ°æ®ç±»åä»¥å<code>Object</code>ç<code>put</code>å<code>get</code>æ¹æ³ï¼å¹¶ä¸ææç<code>put</code>æ¹æ³é½å¯ä»¥è¶è¿è®¿é®æéï¼ç´æ¥ä¿®æ¹åå­ä¸­çæ°æ®ãéè¯» openJDK æºç ä¸­çæ³¨éåç°ï¼åºç¡æ°æ®ç±»åå<code>Object</code>çè¯»åç¨æä¸åï¼åºç¡æ°æ®ç±»åæ¯ç´æ¥æä½çå±æ§å¼ï¼<code>value</code>ï¼ï¼è<code>Object</code>çæä½åæ¯åºäºå¼ç¨å¼ï¼<code>reference value</code>ï¼ãä¸é¢æ¯<code>Object</code>çè¯»åæ¹æ³ï¼</p>
<pre><code class="language-java">//å¨å¯¹è±¡çæå®åç§»å°åè·åä¸ä¸ªå¯¹è±¡å¼ç¨
public native Object getObject(Object o, long offset);
//å¨å¯¹è±¡æå®åç§»å°ååå¥ä¸ä¸ªå¯¹è±¡å¼ç¨
public native void putObject(Object o, long offset, Object x);
</code></pre>
<p>é¤äºå¯¹è±¡å±æ§çæ®éè¯»åå¤ï¼<code>Unsafe</code> è¿æä¾äº <strong>volatile è¯»å</strong>å<strong>æåºåå¥</strong>æ¹æ³ã<code>volatile</code>è¯»åæ¹æ³çè¦çèå´ä¸æ®éè¯»åç¸åï¼åå«äºå¨é¨åºç¡æ°æ®ç±»åå<code>Object</code>ç±»åï¼ä»¥<code>int</code>ç±»åä¸ºä¾ï¼</p>
<pre><code class="language-java">//å¨å¯¹è±¡çæå®åç§»å°åå¤è¯»åä¸ä¸ªintå¼ï¼æ¯ævolatile loadè¯­ä¹
public native int getIntVolatile(Object o, long offset);
//å¨å¯¹è±¡æå®åç§»å°åå¤åå¥ä¸ä¸ªintï¼æ¯ævolatile storeè¯­ä¹
public native void putIntVolatile(Object o, long offset, int x);
</code></pre>
<p>ç¸å¯¹äºæ®éè¯»åæ¥è¯´ï¼<code>volatile</code>è¯»åå·ææ´é«çææ¬ï¼å ä¸ºå®éè¦ä¿è¯å¯è§æ§åæåºæ§ãå¨æ§è¡<code>get</code>æä½æ¶ï¼ä¼å¼ºå¶ä»ä¸»å­ä¸­è·åå±æ§å¼ï¼å¨ä½¿ç¨<code>put</code>æ¹æ³è®¾ç½®å±æ§å¼æ¶ï¼ä¼å¼ºå¶å°å¼æ´æ°å°ä¸»å­ä¸­ï¼ä»èä¿è¯è¿äºåæ´å¯¹å¶ä»çº¿ç¨æ¯å¯è§çã</p>
<p>æåºåå¥çæ¹æ³æä»¥ä¸ä¸ä¸ªï¼</p>
<pre><code class="language-java">public native void putOrderedObject(Object o, long offset, Object x);
public native void putOrderedInt(Object o, long offset, int x);
public native void putOrderedLong(Object o, long offset, long x);
</code></pre>
<p>æåºåå¥çææ¬ç¸å¯¹<code>volatile</code>è¾ä½ï¼å ä¸ºå®åªä¿è¯åå¥æ¶çæåºæ§ï¼èä¸ä¿è¯å¯è§æ§ï¼ä¹å°±æ¯ä¸ä¸ªçº¿ç¨åå¥çå¼ä¸è½ä¿è¯å¶ä»çº¿ç¨ç«å³å¯è§ãä¸ºäºè§£å³è¿éçå·®å¼æ§ï¼éè¦å¯¹åå­å±éçç¥è¯ç¹åè¿ä¸æ­¥è¿è¡è¡¥åï¼é¦åéè¦äºè§£ä¸¤ä¸ªæä»¤çæ¦å¿µï¼</p>
<ul>
<li><code>Load</code>ï¼å°ä¸»åå­ä¸­çæ°æ®æ·è´å°å¤çå¨çç¼å­ä¸­</li>
<li><code>Store</code>ï¼å°å¤çå¨ç¼å­çæ°æ®å·æ°å°ä¸»åå­ä¸­</li>
</ul>
<p>é¡ºåºåå¥ä¸<code>volatile</code>åå¥çå·®å«å¨äºï¼å¨é¡ºåºåæ¶å å¥çåå­å±éç±»åä¸º<code>StoreStore</code>ç±»åï¼èå¨<code>volatile</code>åå¥æ¶å å¥çåå­å±éæ¯<code>StoreLoad</code>ç±»åï¼å¦ä¸å¾æç¤ºï¼</p>
<p><img src="https://seven97-blog.oss-cn-hangzhou.aliyuncs.com/imgs/202406202130467.png" alt="" loading="lazy"></p>
<p>å¨æåºåå¥æ¹æ³ä¸­ï¼ä½¿ç¨çæ¯<code>StoreStore</code>å±éï¼è¯¥å±éç¡®ä¿<code>Store1</code>ç«å»å·æ°æ°æ®å°åå­ï¼è¿ä¸æä½åäº<code>Store2</code>ä»¥ååç»­çå­å¨æä»¤æä½ãèå¨<code>volatile</code>åå¥ä¸­ï¼ä½¿ç¨çæ¯<code>StoreLoad</code>å±éï¼è¯¥å±éç¡®ä¿<code>Store1</code>ç«å»å·æ°æ°æ®å°åå­ï¼è¿ä¸æä½åäº<code>Load2</code>ååç»­çè£è½½æä»¤ï¼å¹¶ä¸ï¼<code>StoreLoad</code>å±éä¼ä½¿è¯¥å±éä¹åçææåå­è®¿é®æä»¤ï¼åæ¬å­å¨æä»¤åè®¿é®æä»¤å¨é¨å®æä¹åï¼ææ§è¡è¯¥å±éä¹åçåå­è®¿é®æä»¤ã</p>
<p>ç»¼ä¸æè¿°ï¼å¨ä¸é¢çä¸ç±»åå¥æ¹æ³ä¸­ï¼å¨åå¥æçæ¹é¢ï¼æç§<code>put</code>ã<code>putOrder</code>ã<code>putVolatile</code>çé¡ºåºæçéæ¸éä½ã</p>
<p><strong>å¯¹è±¡å®ä¾å</strong></p>
<p>ä½¿ç¨ <code>Unsafe</code> ç <code>allocateInstance</code> æ¹æ³ï¼åè®¸æä»¬ä½¿ç¨éå¸¸è§çæ¹å¼è¿è¡å¯¹è±¡çå®ä¾åï¼é¦åå®ä¹ä¸ä¸ªå®ä½ç±»ï¼å¹¶ä¸å¨æé å½æ°ä¸­å¯¹å¶æååéè¿è¡èµå¼æä½ï¼</p>
<pre><code class="language-java">@Data
public class A {
    private int b;
    public A(){
        this.b =1;
    }
}
</code></pre>
<p>åå«åºäºæé å½æ°ãåå°ä»¥å <code>Unsafe</code> æ¹æ³çä¸åæ¹å¼åå»ºå¯¹è±¡è¿è¡æ¯è¾ï¼</p>
<pre><code class="language-java">public void objTest() throws Exception{
    A a1=new A();
    System.out.println(a1.getB());
    A a2 = A.class.newInstance();
    System.out.println(a2.getB());
    A a3= (A) unsafe.allocateInstance(A.class);
    System.out.println(a3.getB());
}
</code></pre>
<p>æå°ç»æåå«ä¸º 1ã1ã0ï¼è¯´æéè¿<code>allocateInstance</code>æ¹æ³åå»ºå¯¹è±¡è¿ç¨ä¸­ï¼ä¸ä¼è°ç¨ç±»çæé æ¹æ³ãä½¿ç¨è¿ç§æ¹å¼åå»ºå¯¹è±¡æ¶ï¼åªç¨å°äº<code>Class</code>å¯¹è±¡ï¼æä»¥è¯´å¦ææ³è¦è·³è¿å¯¹è±¡çåå§åé¶æ®µæèè·³è¿æé å¨çå®å¨æ£æ¥ï¼å°±å¯ä»¥ä½¿ç¨è¿ç§æ¹æ³ãå¨ä¸é¢çä¾å­ä¸­ï¼å¦æå° A ç±»çæé å½æ°æ¹ä¸º<code>private</code>ç±»åï¼å°æ æ³éè¿æé å½æ°ååå°åå»ºå¯¹è±¡ï¼å¯ä»¥éè¿æé å½æ°å¯¹è±¡ setAccessible ååå»ºå¯¹è±¡ï¼ï¼ä½<code>allocateInstance</code>æ¹æ³ä»ç¶ææã</p>
<h3 id="å¸ååºç¨-2">å¸ååºç¨</h3>
<ul>
<li><strong>å¸¸è§å¯¹è±¡å®ä¾åæ¹å¼</strong>ï¼æä»¬éå¸¸æç¨å°çåå»ºå¯¹è±¡çæ¹å¼ï¼ä»æ¬è´¨ä¸æ¥è®²ï¼é½æ¯éè¿ new æºå¶æ¥å®ç°å¯¹è±¡çåå»ºãä½æ¯ï¼new æºå¶æä¸ªç¹ç¹å°±æ¯å½ç±»åªæä¾æåçæé å½æ°ä¸æ æ¾ç¤ºå£°ææ åæé å½æ°æ¶ï¼åå¿é¡»ä½¿ç¨æåæé å½æ°è¿è¡å¯¹è±¡æé ï¼èä½¿ç¨æåæé å½æ°æ¶ï¼å¿é¡»ä¼ éç¸åºä¸ªæ°çåæ°æè½å®æå¯¹è±¡å®ä¾åã</li>
<li><strong>éå¸¸è§çå®ä¾åæ¹å¼</strong>ï¼è Unsafe ä¸­æä¾ allocateInstance æ¹æ³ï¼ä»éè¿ Class å¯¹è±¡å°±å¯ä»¥åå»ºæ­¤ç±»çå®ä¾å¯¹è±¡ï¼èä¸ä¸éè¦è°ç¨å¶æé å½æ°ãåå§åä»£ç ãJVM å®å¨æ£æ¥ç­ãå®æå¶ä¿®é¥°ç¬¦æ£æµï¼ä¹å°±æ¯å³ä½¿æé å¨æ¯ private ä¿®é¥°çä¹è½éè¿æ­¤æ¹æ³å®ä¾åï¼åªéæç±»å¯¹è±¡å³å¯åå»ºç¸åºçå¯¹è±¡ãç±äºè¿ç§ç¹æ§ï¼allocateInstance å¨ java.lang.invokeãObjenesisï¼æä¾ç»è¿ç±»æé å¨çå¯¹è±¡çææ¹å¼ï¼ãGsonï¼ååºååæ¶ç¨å°ï¼ä¸­é½æç¸åºçåºç¨ã</li>
</ul>
<h2 id="æ°ç»æä½">æ°ç»æä½</h2>
<h3 id="ä»ç»-4">ä»ç»</h3>
<p><code>arrayBaseOffset</code> ä¸ <code>arrayIndexScale</code> è¿ä¸¤ä¸ªæ¹æ³éåèµ·æ¥ä½¿ç¨ï¼å³å¯å®ä½æ°ç»ä¸­æ¯ä¸ªåç´ å¨åå­ä¸­çä½ç½®ã</p>
<pre><code class="language-java">//è¿åæ°ç»ä¸­ç¬¬ä¸ä¸ªåç´ çåç§»å°å
public native int arrayBaseOffset(Class&lt;?&gt; arrayClass);
//è¿åæ°ç»ä¸­ä¸ä¸ªåç´ å ç¨çå¤§å°
public native int arrayIndexScale(Class&lt;?&gt; arrayClass);
</code></pre>
<h3 id="å¸ååºç¨-3">å¸ååºç¨</h3>
<p>è¿ä¸¤ä¸ªä¸æ°æ®æä½ç¸å³çæ¹æ³ï¼å¨ <code>java.util.concurrent.atomic</code> åä¸ç <code>AtomicIntegerArray</code>ï¼å¯ä»¥å®ç°å¯¹ <code>Integer</code> æ°ç»ä¸­æ¯ä¸ªåç´ çåå­æ§æä½ï¼ä¸­æå¸åçåºç¨ï¼å¦ä¸å¾ <code>AtomicIntegerArray</code> æºç æç¤ºï¼éè¿ <code>Unsafe</code> ç <code>arrayBaseOffset</code>ã<code>arrayIndexScale</code> åå«è·åæ°ç»é¦åç´ çåç§»å°å <code>base</code> ååä¸ªåç´ å¤§å°å å­ <code>scale</code> ãåç»­ç¸å³åå­æ§æä½ï¼åä¾èµäºè¿ä¸¤ä¸ªå¼è¿è¡æ°ç»ä¸­åç´ çå®ä½ï¼å¦ä¸å¾äºæç¤ºç <code>getAndAdd</code> æ¹æ³å³éè¿ <code>checkedByteOffset</code> æ¹æ³è·åææ°ç»åç´ çåç§»å°åï¼èåéè¿ CAS å®ç°åå­æ§æä½ã</p>
<p><img src="https://seven97-blog.oss-cn-hangzhou.aliyuncs.com/imgs/202406202130522.png" alt="" loading="lazy"></p>
<h2 id="cas-æä½">CAS æä½</h2>
<h3 id="ä»ç»-5">ä»ç»</h3>
<p>è¿é¨åä¸»è¦ä¸º CAS ç¸å³æä½çæ¹æ³ã</p>
<pre><code class="language-java">/**
  *  CAS
  * @param o         åå«è¦ä¿®æ¹fieldçå¯¹è±¡
  * @param offset    å¯¹è±¡ä¸­æfieldçåç§»é
  * @param expected  ææå¼
  * @param update    æ´æ°å¼
  * @return          true | false
  */
public final native boolean compareAndSwapObject(Object o, long offset,  Object expected, Object update);

public final native boolean compareAndSwapInt(Object o, long offset, int expected,int update);

public final native boolean compareAndSwapLong(Object o, long offset, long expected, long update);
</code></pre>
<p><strong>ä»ä¹æ¯ CAS?</strong> CAS å³æ¯è¾å¹¶æ¿æ¢ï¼Compare And Swap)ï¼æ¯å®ç°å¹¶åç®æ³æ¶å¸¸ç¨å°çä¸ç§ææ¯ãCAS æä½åå«ä¸ä¸ªæä½æ°ââåå­ä½ç½®ãé¢æåå¼åæ°å¼ãæ§è¡ CAS æä½çæ¶åï¼å°åå­ä½ç½®çå¼ä¸é¢æåå¼æ¯è¾ï¼å¦æç¸å¹éï¼é£ä¹å¤çå¨ä¼èªå¨å°è¯¥ä½ç½®å¼æ´æ°ä¸ºæ°å¼ï¼å¦åï¼å¤çå¨ä¸åä»»ä½æä½ãæä»¬é½ç¥éï¼CAS æ¯ä¸æ¡ CPU çåå­æä»¤ï¼cmpxchg æä»¤ï¼ï¼ä¸ä¼é ææè°çæ°æ®ä¸ä¸è´é®é¢ï¼<code>Unsafe</code> æä¾ç CAS æ¹æ³ï¼å¦ <code>compareAndSwapXXX</code>ï¼åºå±å®ç°å³ä¸º CPU æä»¤ <code>cmpxchg</code> ã</p>
<h3 id="å¸ååºç¨-4">å¸ååºç¨</h3>
<p>å¨ JUC åçå¹¶åå·¥å·ç±»ä¸­å¤§éå°ä½¿ç¨äº CAS æä½ï¼åå¨åé¢ä»ç»<code>synchronized</code>å<code>AQS</code>çæç« ä¸­ä¹å¤æ¬¡æå°äº CASï¼å¶ä½ä¸ºä¹è§éå¨å¹¶åå·¥å·ç±»ä¸­å¹¿æ³åæ¥äºä½ç¨ãå¨ <code>Unsafe</code> ç±»ä¸­ï¼æä¾äº<code>compareAndSwapObject</code>ã<code>compareAndSwapInt</code>ã<code>compareAndSwapLong</code>æ¹æ³æ¥å®ç°çå¯¹<code>Object</code>ã<code>int</code>ã<code>long</code>ç±»åç CAS æä½ãä»¥<code>compareAndSwapInt</code>æ¹æ³ä¸ºä¾ï¼</p>
<pre><code class="language-java">public final native boolean compareAndSwapInt(Object o, long offset,int expected,int x);
</code></pre>
<p>åæ°ä¸­<code>o</code>ä¸ºéè¦æ´æ°çå¯¹è±¡ï¼<code>offset</code>æ¯å¯¹è±¡<code>o</code>ä¸­æ´å½¢å­æ®µçåç§»éï¼å¦æè¿ä¸ªå­æ®µçå¼ä¸<code>expected</code>ç¸åï¼åå°å­æ®µçå¼è®¾ä¸º<code>x</code>è¿ä¸ªæ°å¼ï¼å¹¶ä¸æ­¤æ´æ°æ¯ä¸å¯è¢«ä¸­æ­çï¼ä¹å°±æ¯ä¸ä¸ªåå­æä½ãä¸é¢æ¯ä¸ä¸ªä½¿ç¨<code>compareAndSwapInt</code>çä¾å­ï¼</p>
<pre><code class="language-java">private volatile int a;
public static void main(String[] args){
    CasTest casTest=new CasTest();
    new Thread(()-&gt;{
        for (int i = 1; i &lt; 5; i++) {
            casTest.increment(i);
            System.out.print(casTest.a+" ");
        }
    }).start();
    new Thread(()-&gt;{
        for (int i = 5 ; i &lt;10 ; i++) {
            casTest.increment(i);
            System.out.print(casTest.a+" ");
        }
    }).start();
}

private void increment(int x){
    while (true){
        try {
            long fieldOffset = unsafe.objectFieldOffset(CasTest.class.getDeclaredField("a"));
            if (unsafe.compareAndSwapInt(this,fieldOffset,x-1,x))
                break;
        } catch (NoSuchFieldException e) {
            e.printStackTrace();
        }
    }
}
</code></pre>
<p>è¿è¡ä»£ç ä¼ä¾æ¬¡è¾åºï¼</p>
<pre><code class="language-plain">1 2 3 4 5 6 7 8 9
</code></pre>
<p>å¨ä¸é¢çä¾å­ä¸­ï¼ä½¿ç¨ä¸¤ä¸ªçº¿ç¨å»ä¿®æ¹<code>int</code>åå±æ§<code>a</code>çå¼ï¼å¹¶ä¸åªæå¨<code>a</code>çå¼ç­äºä¼ å¥çåæ°<code>x</code>åä¸æ¶ï¼æä¼å°<code>a</code>çå¼åä¸º<code>x</code>ï¼ä¹å°±æ¯å®ç°å¯¹<code>a</code>çå ä¸çæä½ãæµç¨å¦ä¸æç¤ºï¼</p>
<p><img src="https://seven97-blog.oss-cn-hangzhou.aliyuncs.com/imgs/202406202130526.png" alt="" loading="lazy"></p>
<p>éè¦æ³¨æçæ¯ï¼å¨è°ç¨<code>compareAndSwapInt</code>æ¹æ³åï¼ä¼ç´æ¥è¿å<code>true</code>æ<code>false</code>çä¿®æ¹ç»æï¼å æ­¤éè¦æä»¬å¨ä»£ç ä¸­æå¨æ·»å èªæçé»è¾ãå¨<code>AtomicInteger</code>ç±»çè®¾è®¡ä¸­ï¼ä¹æ¯éç¨äºå°<code>compareAndSwapInt</code>çç»æä½ä¸ºå¾ªç¯æ¡ä»¶ï¼ç´è³ä¿®æ¹æåæéåºæ­»å¾ªç¯çæ¹å¼æ¥å®ç°çåå­æ§çèªå¢æä½ã</p>
<h2 id="çº¿ç¨è°åº¦">çº¿ç¨è°åº¦</h2>
<h3 id="ä»ç»-6">ä»ç»</h3>
<p><code>Unsafe</code> ç±»ä¸­æä¾äº<code>park</code>ã<code>unpark</code>ã<code>monitorEnter</code>ã<code>monitorExit</code>ã<code>tryMonitorEnter</code>æ¹æ³è¿è¡çº¿ç¨è°åº¦ã</p>
<pre><code class="language-java">//åæ¶é»å¡çº¿ç¨
public native void unpark(Object thread);
//é»å¡çº¿ç¨
public native void park(boolean isAbsolute, long time);
//è·å¾å¯¹è±¡éï¼å¯éå¥éï¼
@Deprecated
public native void monitorEnter(Object o);
//éæ¾å¯¹è±¡é
@Deprecated
public native void monitorExit(Object o);
//å°è¯è·åå¯¹è±¡é
@Deprecated
public native boolean tryMonitorEnter(Object o);
</code></pre>
<p>æ¹æ³ <code>park</code>ã<code>unpark</code> å³å¯å®ç°çº¿ç¨çæèµ·ä¸æ¢å¤ï¼å°ä¸ä¸ªçº¿ç¨è¿è¡æèµ·æ¯éè¿ <code>park</code> æ¹æ³å®ç°çï¼è°ç¨ <code>park</code> æ¹æ³åï¼çº¿ç¨å°ä¸ç´é»å¡ç´å°è¶æ¶æèä¸­æ­ç­æ¡ä»¶åºç°ï¼<code>unpark</code> å¯ä»¥ç»æ­¢ä¸ä¸ªæèµ·ççº¿ç¨ï¼ä½¿å¶æ¢å¤æ­£å¸¸ã</p>
<p>æ­¤å¤ï¼<code>Unsafe</code> æºç ä¸­<code>monitor</code>ç¸å³çä¸ä¸ªæ¹æ³å·²ç»è¢«æ è®°ä¸º<code>deprecated</code>ï¼ä¸å»ºè®®è¢«ä½¿ç¨ï¼</p>
<pre><code class="language-java">//è·å¾å¯¹è±¡é
@Deprecated
public native void monitorEnter(Object var1);
//éæ¾å¯¹è±¡é
@Deprecated
public native void monitorExit(Object var1);
//å°è¯è·å¾å¯¹è±¡é
@Deprecated
public native boolean tryMonitorEnter(Object var1);
</code></pre>
<p><code>monitorEnter</code>æ¹æ³ç¨äºè·å¾å¯¹è±¡éï¼<code>monitorExit</code>ç¨äºéæ¾å¯¹è±¡éï¼å¦æå¯¹ä¸ä¸ªæ²¡æè¢«<code>monitorEnter</code>å éçå¯¹è±¡æ§è¡æ­¤æ¹æ³ï¼ä¼æåº<code>IllegalMonitorStateException</code>å¼å¸¸ã<code>tryMonitorEnter</code>æ¹æ³å°è¯è·åå¯¹è±¡éï¼å¦ææååè¿å<code>true</code>ï¼åä¹è¿å<code>false</code>ã</p>
<h3 id="å¸ååºç¨-5">å¸ååºç¨</h3>
<p>Java éååæ­¥å¨æ¡æ¶çæ ¸å¿ç±» <code>AbstractQueuedSynchronizer</code> (AQS)ï¼å°±æ¯éè¿è°ç¨<code>LockSupport.park()</code>å<code>LockSupport.unpark()</code>å®ç°çº¿ç¨çé»å¡åå¤éçï¼è <code>LockSupport</code> ç <code>park</code>ã<code>unpark</code> æ¹æ³å®éæ¯è°ç¨ <code>Unsafe</code> ç <code>park</code>ã<code>unpark</code> æ¹å¼å®ç°çã</p>
<pre><code class="language-java">public static void park(Object blocker) {
    Thread t = Thread.currentThread();
    setBlocker(t, blocker);
    UNSAFE.park(false, 0L);
    setBlocker(t, null);
}
public static void unpark(Thread thread) {
    if (thread != null)
        UNSAFE.unpark(thread);
}
</code></pre>
<p><code>LockSupport</code> ç<code>park</code>æ¹æ³è°ç¨äº <code>Unsafe</code> ç<code>park</code>æ¹æ³æ¥é»å¡å½åçº¿ç¨ï¼æ­¤æ¹æ³å°çº¿ç¨é»å¡åå°±ä¸ä¼ç»§ç»­å¾åæ§è¡ï¼ç´å°æå¶ä»çº¿ç¨è°ç¨<code>unpark</code>æ¹æ³å¤éå½åçº¿ç¨ãä¸é¢çä¾å­å¯¹ <code>Unsafe</code> çè¿ä¸¤ä¸ªæ¹æ³è¿è¡æµè¯ï¼</p>
<pre><code class="language-java">public static void main(String[] args) {
    Thread mainThread = Thread.currentThread();
    new Thread(()-&gt;{
        try {
            TimeUnit.SECONDS.sleep(5);
            System.out.println("subThread try to unpark mainThread");
            unsafe.unpark(mainThread);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }).start();

    System.out.println("park main mainThread");
    unsafe.park(false,0L);
    System.out.println("unpark mainThread success");
}
</code></pre>
<p>ç¨åºè¾åºä¸ºï¼</p>
<pre><code class="language-plain">park main mainThread
subThread try to unpark mainThread
unpark mainThread success
</code></pre>
<p>ç¨åºè¿è¡çæµç¨ä¹æ¯è¾å®¹æçæï¼å­çº¿ç¨å¼å§è¿è¡ååè¿è¡ç¡ç ï¼ç¡®ä¿ä¸»çº¿ç¨è½å¤è°ç¨<code>park</code>æ¹æ³é»å¡èªå·±ï¼å­çº¿ç¨å¨ç¡ç  5 ç§åï¼è°ç¨<code>unpark</code>æ¹æ³å¤éä¸»çº¿ç¨ï¼ä½¿ä¸»çº¿ç¨è½ç»§ç»­åä¸æ§è¡ãæ´ä¸ªæµç¨å¦ä¸å¾æç¤ºï¼</p>
<p><img src="https://seven97-blog.oss-cn-hangzhou.aliyuncs.com/imgs/202406202130484.png" alt="" loading="lazy"></p>
<h2 id="class-æä½">Class æä½</h2>
<h3 id="ä»ç»-7">ä»ç»</h3>
<p><code>Unsafe</code> å¯¹<code>Class</code>çç¸å³æä½ä¸»è¦åæ¬ç±»å è½½åéæåéçæä½æ¹æ³ã</p>
<p><strong>éæå±æ§è¯»åç¸å³çæ¹æ³</strong></p>
<pre><code class="language-java">//è·åéæå±æ§çåç§»é
public native long staticFieldOffset(Field f);
//è·åéæå±æ§çå¯¹è±¡æé
public native Object staticFieldBase(Field f);
//å¤æ­ç±»æ¯å¦éè¦åå§åï¼ç¨äºè·åç±»çéæå±æ§åè¿è¡æ£æµï¼
public native boolean shouldBeInitialized(Class&lt;?&gt; c);
</code></pre>
<p>åå»ºä¸ä¸ªåå«éæå±æ§çç±»ï¼è¿è¡æµè¯ï¼</p>
<pre><code class="language-java">@Data
public class User {
    public static String name="Hydra";
    int age;
}
private void staticTest() throws Exception {
    User user=new User();
    // ä¹å¯ä»¥ç¨ä¸é¢çè¯­å¥è§¦åç±»åå§å
    // 1.
    // unsafe.ensureClassInitialized(User.class);
    // 2.
    // System.out.println(User.name);
    System.out.println(unsafe.shouldBeInitialized(User.class));
    Field sexField = User.class.getDeclaredField("name");
    long fieldOffset = unsafe.staticFieldOffset(sexField);
    Object fieldBase = unsafe.staticFieldBase(sexField);
    Object object = unsafe.getObject(fieldBase, fieldOffset);
    System.out.println(object);
}
</code></pre>
<p>è¿è¡ç»æï¼</p>
<pre><code class="language-plain">false
Hydra
</code></pre>
<p>å¨ <code>Unsafe</code> çå¯¹è±¡æä½ä¸­ï¼æä»¬å­¦ä¹ äºéè¿<code>objectFieldOffset</code>æ¹æ³è·åå¯¹è±¡å±æ§åç§»éå¹¶åºäºå®å¯¹åéçå¼è¿è¡å­åï¼ä½æ¯å®ä¸éç¨äºç±»ä¸­çéæå±æ§ï¼è¿æ¶åå°±éè¦ä½¿ç¨<code>staticFieldOffset</code>æ¹æ³ãå¨ä¸é¢çä»£ç ä¸­ï¼åªæå¨è·å<code>Field</code>å¯¹è±¡çè¿ç¨ä¸­ä¾èµå°äº<code>Class</code>ï¼èè·åéæåéçå±æ§æ¶ä¸åä¾èµäº<code>Class</code>ã</p>
<p>å¨ä¸é¢çä»£ç ä¸­é¦ååå»ºä¸ä¸ª<code>User</code>å¯¹è±¡ï¼è¿æ¯å ä¸ºå¦æä¸ä¸ªç±»æ²¡æè¢«åå§åï¼é£ä¹å®çéæå±æ§ä¹ä¸ä¼è¢«åå§åï¼æåè·åçå­æ®µå±æ§å°æ¯<code>null</code>ãæä»¥å¨è·åéæå±æ§åï¼éè¦è°ç¨<code>shouldBeInitialized</code>æ¹æ³ï¼å¤æ­å¨è·ååæ¯å¦éè¦åå§åè¿ä¸ªç±»ãå¦æå é¤åå»º User å¯¹è±¡çè¯­å¥ï¼è¿è¡ç»æä¼åä¸ºï¼</p>
<pre><code class="language-plain">true
null
</code></pre>
<p><strong>ä½¿ç¨<code>defineClass</code>æ¹æ³åè®¸ç¨åºå¨è¿è¡æ¶å¨æå°åå»ºä¸ä¸ªç±»</strong></p>
<pre><code class="language-java">public native Class&lt;?&gt; defineClass(String name, byte[] b, int off, int len, ClassLoader loader,ProtectionDomain protectionDomain);
</code></pre>
<p>å¨å®éä½¿ç¨è¿ç¨ä¸­ï¼å¯ä»¥åªä¼ å¥å­èæ°ç»ãèµ·å§å­èçä¸æ ä»¥åè¯»åçå­èé¿åº¦ï¼é»è®¤æåµä¸ï¼ç±»å è½½å¨ï¼<code>ClassLoader</code>ï¼åä¿æ¤åï¼<code>ProtectionDomain</code>ï¼æ¥æºäºè°ç¨æ­¤æ¹æ³çå®ä¾ãä¸é¢çä¾å­ä¸­å®ç°äºåç¼è¯çæåç class æä»¶çåè½ï¼</p>
<pre><code class="language-java">private static void defineTest() {
    String fileName="F:\\workspace\\unsafe-test\\target\\classes\\com\\cn\\model\\User.class";
    File file = new File(fileName);
    try(FileInputStream fis = new FileInputStream(file)) {
        byte[] content=new byte[(int)file.length()];
        fis.read(content);
        Class clazz = unsafe.defineClass(null, content, 0, content.length, null, null);
        Object o = clazz.newInstance();
        Object age = clazz.getMethod("getAge").invoke(o, null);
        System.out.println(age);
    } catch (Exception e) {
        e.printStackTrace();
    }
}
</code></pre>
<p>å¨ä¸é¢çä»£ç ä¸­ï¼é¦åè¯»åäºä¸ä¸ª<code>class</code>æä»¶å¹¶éè¿æä»¶æµå°å®è½¬åä¸ºå­èæ°ç»ï¼ä¹åä½¿ç¨<code>defineClass</code>æ¹æ³å¨æçåå»ºäºä¸ä¸ªç±»ï¼å¹¶å¨åç»­å®æäºå®çå®ä¾åå·¥ä½ï¼æµç¨å¦ä¸å¾æç¤ºï¼å¹¶ä¸éè¿è¿ç§æ¹å¼åå»ºçç±»ï¼ä¼è·³è¿ JVM çææå®å¨æ£æ¥ã</p>
<p><img src="https://oss.javaguide.cn/github/javaguide/java/basis/unsafe/image-20220717145000710.png" alt="" loading="lazy"></p>
<p>é¤äº<code>defineClass</code>æ¹æ³å¤ï¼Unsafe è¿æä¾äºä¸ä¸ª<code>defineAnonymousClass</code>æ¹æ³ï¼</p>
<pre><code class="language-java">public native Class&lt;?&gt; defineAnonymousClass(Class&lt;?&gt; hostClass, byte[] data, Object[] cpPatches);
</code></pre>
<p>ä½¿ç¨è¯¥æ¹æ³å¯ä»¥ç¨æ¥å¨æçåå»ºä¸ä¸ªå¿åç±»ï¼å¨<code>Lambda</code>è¡¨è¾¾å¼ä¸­å°±æ¯ä½¿ç¨ ASM å¨æçæå­èç ï¼ç¶åå©ç¨è¯¥æ¹æ³å®ä¹å®ç°ç¸åºçå½æ°å¼æ¥å£çå¿åç±»ãå¨ JDK 15 åå¸çæ°ç¹æ§ä¸­ï¼å¨éèç±»ï¼<code>Hidden classes</code>ï¼ä¸æ¡ä¸­ï¼æåºå°å¨æªæ¥ççæ¬ä¸­å¼ç¨ <code>Unsafe</code> ç<code>defineAnonymousClass</code>æ¹æ³ã</p>
<h3 id="å¸ååºç¨-6">å¸ååºç¨</h3>
<p>Lambda è¡¨è¾¾å¼å®ç°éè¦ä¾èµ <code>Unsafe</code> ç <code>defineAnonymousClass</code> æ¹æ³å®ä¹å®ç°ç¸åºçå½æ°å¼æ¥å£çå¿åç±»ã</p>
<h2 id="ç³»ç»ä¿¡æ¯">ç³»ç»ä¿¡æ¯</h2>
<h3 id="ä»ç»-8">ä»ç»</h3>
<p>è¿é¨ååå«ä¸¤ä¸ªè·åç³»ç»ç¸å³ä¿¡æ¯çæ¹æ³ã</p>
<pre><code class="language-java">//è¿åç³»ç»æéçå¤§å°ãè¿åå¼ä¸º4ï¼32ä½ç³»ç»ï¼æ 8ï¼64ä½ç³»ç»ï¼ã
public native int addressSize();
//åå­é¡µçå¤§å°ï¼æ­¤å¼ä¸º2çå¹æ¬¡æ¹ã
public native int pageSize();
</code></pre>
<h3 id="å¸ååºç¨-7">å¸ååºç¨</h3>
<p>è¿ä¸¤ä¸ªæ¹æ³çåºç¨åºæ¯æ¯è¾å°ï¼å¨<code>java.nio.Bits</code>ç±»ä¸­ï¼å¨ä½¿ç¨<code>pageCount</code>è®¡ç®æéçåå­é¡µçæ°éæ¶ï¼è°ç¨äº<code>pageSize</code>æ¹æ³è·ååå­é¡µçå¤§å°ãå¦å¤ï¼å¨ä½¿ç¨<code>copySwapMemory</code>æ¹æ³æ·è´åå­æ¶ï¼è°ç¨äº<code>addressSize</code>æ¹æ³ï¼æ£æµ 32 ä½ç³»ç»çæåµã</p>
<h2 id="unsafeåºå±">Unsafeåºå±</h2>
<p>åççUnsafeçcompareAndSwap æ¹æ³æ¥å®ç°CASæä½ï¼å®æ¯ä¸ä¸ªæ¬å°æ¹æ³ï¼å®ç°ä½äºunsafe.cppä¸­ã</p>
<pre><code class="language-java">UNSAFE_ENTRY(jboolean, Unsafe_CompareAndSwapInt(JNIEnv *env, jobject unsafe, jobject obj, jlong offset, jint e, jint x))
  UnsafeWrapper("Unsafe_CompareAndSwapInt");
  oop p = JNIHandles::resolve(obj);
  jint* addr = (jint *) index_oop_from_field_offset_long(p, offset);
  return (jint)(Atomic::cmpxchg(x, addr, e)) == e;
UNSAFE_END
</code></pre>
<p>å¯ä»¥çå°å®éè¿ Atomic::cmpxchg æ¥å®ç°æ¯è¾åæ¿æ¢æä½ãå¶ä¸­åæ°xæ¯å³å°æ´æ°çå¼ï¼åæ°eæ¯ååå­çå¼ã</p>
<p>å¦ææ¯Linuxçx86ï¼Atomic::cmpxchgæ¹æ³çå®ç°å¦ä¸ï¼</p>
<pre><code class="language-java">inline jint Atomic::cmpxchg (jint exchange_value, volatile jint* dest, jint compare_value) {
  int mp = os::is_MP();
  __asm__ volatile (LOCK_IF_MP(%4) "cmpxchgl %1,(%3)"
                    : "=a" (exchange_value)
                    : "r" (exchange_value), "a" (compare_value), "r" (dest), "r" (mp)
                    : "cc", "memory");
  return exchange_value;
}
</code></pre>
<p>èwindowsçx86çå®ç°å¦ä¸ï¼</p>
<pre><code class="language-java">inline jint Atomic::cmpxchg (jint exchange_value, volatile jint* dest, jint compare_value) {
    int mp = os::isMP(); //å¤æ­æ¯å¦æ¯å¤å¤çå¨
    _asm {
        mov edx, dest
        mov ecx, exchange_value
        mov eax, compare_value
        LOCK_IF_MP(mp)
        cmpxchg dword ptr [edx], ecx
    }
}

// Adding a lock prefix to an instruction on MP machine
// VC++ doesn't like the lock prefix to be on a single line
// so we can't insert a label after the lock prefix.
// By emitting a lock prefix, we can define a label after it.
#define LOCK_IF_MP(mp) __asm cmp mp, 0  \
                       __asm je L0      \
                       __asm _emit 0xF0 \
                       __asm L0:
</code></pre>
<p>å¦ææ¯å¤å¤çå¨ï¼ä¸ºcmpxchgæä»¤æ·»å lockåç¼ãåä¹ï¼å°±çç¥lockåç¼(åå¤çå¨ä¼ä¸éè¦lockåç¼æä¾çåå­å±éææ)ãè¿éçlockåç¼å°±æ¯ä½¿ç¨äºå¤çå¨çæ»çº¿é(ææ°çå¤çå¨é½ä½¿ç¨ç¼å­éä»£æ¿æ»çº¿éæ¥æé«æ§è½)ã</p>
<blockquote>
<p>cmpxchg(void* ptr, int old, int new)ï¼å¦æptråoldçå¼ä¸æ ·ï¼åænewåå°ptråå­ï¼å¦åè¿åptrçå¼ï¼æ´ä¸ªæä½æ¯åå­çãå¨Intelå¹³å°ä¸ï¼ä¼ç¨lock cmpxchgæ¥å®ç°ï¼ä½¿ç¨lockè§¦åç¼å­éï¼è¿æ ·å¦ä¸ä¸ªçº¿ç¨æ³è®¿é®ptrçåå­ï¼å°±ä¼è¢«blockä½ã</p>
</blockquote>


</div>
<div id="MySignature" role="contentinfo">
    <p>æ¬ææ¥èªå¨çº¿ç½ç«ï¼sevençèé¸æé¿ä¹è·¯ï¼ä½èï¼sevenï¼è½¬è½½è¯·æ³¨æåæé¾æ¥ï¼www.seven97.top</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-06 09:00">2026-02-06 09:00</span>&nbsp;
<a href="https://www.cnblogs.com/sevencoding">ç¨åºåSeven</a>&nbsp;
éè¯»(<span id="post_view_count">4</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19559023);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19559023', targetLink: 'https://www.cnblogs.com/sevencoding/p/19559023', title: 'Unsafeé­æ³ç±»æ·±åº¦è§£æï¼Javaåºå±æä½çç»ææå' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ éè¿ OpenSpec + OpenCode å®è·µ AI Specs ]]></title>
    <link>https://www.cnblogs.com/whuanle/p/19581835</link>
    <guid>a22ad113ce1018856592184caa353d22</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/whuanle/p/19581835" title="åå¸äº 2026-02-06 08:33">
    <span role="heading" aria-level="2">éè¿ OpenSpec + OpenCode å®è·µ AI Specs</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p></p><div class="toc"><div class="toc-container-header">ç®å½</div><ul><li><a href="#è§åé¡¹ç®" rel="noopener nofollow">è§åé¡¹ç®</a></li><li><a href="#è®¾è®¡-ui" rel="noopener nofollow">è®¾è®¡ UI</a></li><li><a href="#äºè§£-openspec" rel="noopener nofollow">äºè§£ OpenSpec</a></li><li><a href="#ä½éª-openspec" rel="noopener nofollow">ä½éª OpenSpec</a><ul><li><a href="#ç¬¬-1-é¶æ®µåå»ºåæ´-ææ¡" rel="noopener nofollow">ç¬¬ 1 é¶æ®µï¼åå»ºåæ´ (ææ¡)</a></li><li><a href="#ç¬¬äºé¶æ®µå®æ½" rel="noopener nofollow">ç¬¬äºé¶æ®µï¼å®æ½</a></li><li><a href="#ç¬¬-3-é¶æ®µå½æ¡£-éæ" rel="noopener nofollow">ç¬¬ 3 é¶æ®µï¼å½æ¡£ (éæ)</a></li></ul></li></ul></div><p></p>
<p>åæ®µæ¶é´åäº ãä¸å­é¿æè®²è§£ï¼å¢éè½å° AI è¾å©ç¼ç¨å AI Specs å®æãï¼æ ¸å¿åå®¹æ¯è®¨è®ºå¬å¸è½å° AI è¾å©ç¼ç¨çä¸äºå¸¸è§é®é¢ï¼éè¿ä½¿ç¨ Kiro å¼å¥ Spec å®ç°è§èé©±å¨å¼åï¼ä¹è®²è§£äºå®è·µè¿ç¨ã ä¸è¿è¿ç¯æç« å¤ªé¿äºï¼èä¸å¼ºä¾èµäº Kiroï¼å¯¹ä½¿ç¨ Clauda CodeãCursorãOpenCode çå°ä¼ä¼´æ¥è¯´ï¼è¿ç§»ææ¬å¤ªå¤§äºã</p>
<blockquote>
<p>æç« å°åï¼<a href="https://www.cnblogs.com/whuanle/p/19469026" target="_blank">https://www.cnblogs.com/whuanle/p/19469026</a></p>
</blockquote>
<br>
<p>åºäºè¿ä¸ªèæ¯ï¼æä»¥æ¾æ¶é´åè¿ç¯åºäº OpenSpec + OpenCode çå®è·µæç¨ã</p>
<blockquote>
<p>ãä¸å­é¿æè®²è§£ï¼å¢éè½å° AI è¾å©ç¼ç¨å AI Specs å®æãä¸»è¦æ¯è®²è§£æè·¯ï¼Kiro å¹¶ä¸éè¦ï¼æ¬ç¯ä¸»è¦è®²è§£å®ç°æ¡ä¾ãæä¹ä»é¶å¼ååºä¸ä¸ªç¨åºï¼ä¸¤ç¯æç« å¹¶ä¸å²çªï¼æ¨èåçä¸å­é¿æï¼åçæ¬æã</p>
</blockquote>
<br>
<p>ä¸ºä»ä¹è¯´ OpenSpec + OpenCode éåè½å°å¢ï¼</p>
<br>
<p>ç°å¨å¸é¢ä¸çè¾å©ç¼ç¨å·¥å·éå¸¸å¤ï¼ä»¥æ æ°ç«å¼ç Clauda Code ä¸ºé¦ï¼è¿æ Codexã Kimi Code CLIãRoo Code ç­å½ä»¤è¡å·¥å·ï¼ä»¥ IDE äº¤äºæ¹å¼çæ KiroãVS CodeãCursor ç­ãæä»¥ Spec å·¥å·ä¸è½å¼ºä¾èµä¸ä¸ªè¾å©ç¼ç¨å·¥å·ï¼å°±å Kiro Spec åªè½å¨ Kiro ä¸ä½¿ç¨ï¼åç»­è¿ç§»å°å¶å®è¾å©ç¼ç¨å·¥å·çææ¬å¤§ã</p>
<br>
<p>OpenSpec æ¯çº¯ç²¹ç Spec å·¥å·ï¼å®æ¯å¼æºé¡¹ç®ï¼ç±ç¤¾åºé©±å¨å¼åï¼å¹¶ä¸æ¯æéæå° 22 ç§å·¥å·ä¸­ã</p>
<p>ç±äºè¾å©ç¼ç¨å·¥å·çäº¤äºæ¹å¼ãæºè½ç¨åº¦ãäº¤ä»è½åå·®å¼å¤§ï¼æ¯ä¸ªå¼åèçä½¿ç¨ä½éªä¹ä¸ä¸æ ·ï¼éåºä¹ æ¯ä¹æå¾å¤§å·®å¼ï¼æä»¥å¢éåæ²¡å¿è¦éå¶åªè½ä½¿ç¨æä¸ªå·¥å·ï¼å°±åç¬èåæ¬¢å¤ä¸ªå·¥å·åæ¶æ­éä½¿ç¨ãè OpenSpec æ¯æéå¸¸å¤çå·¥å·ï¼å¯ä»¥åæ¶å¨è¿äºå·¥å·ä¸­å¼åä¸ä¸ªé¡¹ç®ï¼é¿åå ä¸ºåæ¢å¦ä¸ä¸ªå·¥å·å¼åä»£ç ï¼éè¦å¯¹ Spec è¿è¡è¿ç§»ã</p>
<p><img src="https://img2024.cnblogs.com/blog/1315495/202602/1315495-20260205233608810-602785156.png" alt="image-20260205210740234" loading="lazy"></p>
<br>
<p>æ¬æéç¨ OpenCode çåå ï¼æ¯å ä¸º OpenCode ä¹æ¯å¼æºçï¼å®æ¬èº«æ¯æéå¸¸å¤çæ¨¡åï¼å¯ä»¥èªå®ä¹æ¥å¥åå®¶çæ¨¡ååï¼ä¸å KiroãCursor è¦è±é±ä¹°å®æ¹çå¥é¤ï¼æä»¥ä¹å¾éåç¨äºæ¡ä¾è®²è§£ï¼ä¹éåå¢éè½å°åä¸»åå·¥å·ã</p>
<br>
<p>æ¥ä¸æ¥ï¼å°ä»¥å¼åä¸ä¸ªåºéå®æ¶ä¼°å¼ç¨åºä¸ºä¾ï¼è®²è§£å¦ä½å®ç° AI Specsï¼ä½æ¯æ¬æä¸ä¼å´ç»å¢éè½å°å»è®²è§£åçåææ¯ï¼çº¯ç²¹æ¯è®²è§£ OpenSpec + OpenCode æä¹ç¨ã</p>
<br>
<h3 id="è§åé¡¹ç®">è§åé¡¹ç®</h3>
<p>å¼åé¡¹ç®è¦æä¸ä¸ªæç¡®è¯´æï¼ä¸è½è¯´ä¸å¥ âæè¦ä¸ä¸ªåºéå®æ¶ä¼°å¼çç¨åºâï¼å½ç¶ï¼å¼åä¸ªäººé¡¹ç®ï¼ä¹æ²¡å¿è¦åä¸å éæ±ææ¡£è¯´æï¼å ä¸ºå¹¶æ²¡æå¤ªå¤ä¸å¡åºæ¯ï¼å¼åä¸ªäººé¡¹ç®çç®çæ¯æ»¡è¶³ä¸ªäººéæ±ï¼èä¸æ¯ä¸ä¸é¢åä¸å¡ï¼æä»¥å¯ä»¥åå© OpenCode ç plan åè½æ OpenSpec ç <code>expore</code> åè½å¸®å©æä»¬çæä»»å¡è§åã</p>
<br>
<p>è½ç¶ AI å¾å¼ºå¤§ï¼ä½æ¯è¿æ¯å¾æ³æ³ï¼å®ç°åºéå®æ¶ä¼°è®¡çç¨åºï¼æéè¦ä»ä¹åè½ï¼æï¼</p>
<p>æ¾ä¸ä¸ªè§å¾ä¸éçç¨åºï¼æ ¹æ®è§å¯å«äººçç¨åºï¼ç¶åæ´çèªå·±æ³è¦çåè½ã</p>
<img src="images/4285c043c2bac9c39658be66217f5ce6.jpg" alt="4285c043c2bac9c39658be66217f5ce6" style="zoom: 33%">
<blockquote>
<p>æ¬æåäºå¬å 2026 å¹´ 2 æ 5 å· å¨åï¼å¯è°æ¯ç¯çææåï¼äºæäºè¿ä¹å¤ã</p>
</blockquote>
<br>
<p>ä»¥ä¸æ¯ç¬èææ²çä¸äºéè¦ã</p>
<pre><code>app å®ä½æç®æ ï¼åä¸ä¸ªè½å¤å®æ¶æ¥çåºéæ¶¨è·å¹ãä¼°å¼ç appï¼ä»¥åå¯ä»¥æ¥çå½å Aè¡ãç¾è¡ãæ¸¯è¡çè¡æä¿¡æ¯ã
app æä¸¤ä¸ªèåï¼âå·æ°âãâåºéâãâè¡æâ
å·æ°èåæ¯åºéç®¡çåè½ï¼
1ï¼è½å¤æå¨æ·»å åºéä»£ç å°åè¡¨ï¼ä¿®æ¹æä»ï¼æ¯ææ¯ä»å®æªå¾åè¯å«å¾çåæ­¥åºéã
2ï¼å¯ä»¥ä¿®æ¹åºéæä»ä¿¡æ¯æå é¤åºé
3ï¼çé¢è¦è½å¤æ¾ç¤ºå½åæ¶¨å¹ãåæ¥æ¶çãæææ¶ç
4ï¼ä¸æå·æ°æ°æ®ï¼æ¬èº«è¦é»è®¤èªå¨1så·æ°ä¸æ¬¡æ°æ®ï¼
5ï¼ç¹å»å·ä½çåºéåï¼è·³è½¬å° âåºéâ èå

åºéåè½æ¯æ¥çåºéè¯¦ç»ä¿¡æ¯çï¼
ç®çæ¯çå°ä¸ä¸ªåºéçåç±»ä¿¡æ¯ï¼ä»¥ä¾¿è®©æè¯ä¼°è¡æåæ¶¨è·ï¼ä»¥ä¾¿è°ä»ã
ä¿¡æ¯æ¾ç¤ºæä¸ä¸ªä¸»è¦åè½ï¼
å®æ¶ä¼°å¼ï¼è¦ç»åºèµ°åå¾ï¼
ä¸ç»©èµ°å¿ï¼æ¾ç¤ºåå²æ¶¨è·
æçæ¶çï¼æ¾ç¤ºæ¶çä¿¡æ¯
æ¥ççé¢ä¸é¢æ¾ç¤ºè¿ä¸ªåºéçæä»è¡ç¥¨ä¿¡æ¯åä»½é¢ï¼ç¶åæ¾ç¤ºæ¯ä¸ªè¡ç¥¨çå®æ¶æ¶¨è·å¹

è¡æåè½æ¯çä¸åäº¤ææåææ°çï¼
ç®çæ¯æ¥çå½å Aè¡ãç¾è¡ãæ¸¯è¡çè¡æä¿¡æ¯ã
åè½æä¸è¬è¯å¸appå®ç°ï¼è¯¥ app æ¯ æ¡é¢ appï¼ä¸æ¯ç§»å¨ appã
</code></pre>
<br>
<p>æäºæ³è¦åçåè½åï¼è¿éè¦ååºææ¯æ¹æ¡ã</p>
<p>æäº AI è¿éè¦èªå·±æ³æ¹æ¡ï¼</p>
<p>ç¬èè®¤ä¸ºè¿æ¯è¦çï¼æ¯å¦åºéä¼°å¼æ°æ®ä»åªéæ¥ï¼å¦æä½ èªå·±æ²¡æä¸»æï¼æ²¡ææåè°ç ææ¯æ¹æ¡ï¼é£ä¹ AI èªå·±ç»äºä¸ä¸ªéè¿ç½ç»ç¬åè¯å¸å¬å¸é¡µé¢æ´çä¿¡æ¯çæ¹æ¡ï¼è¿ä¸ªæ¹æ¡ä¸ä»æ°æ®ååè½åï¼ä¼æ¶èå¤§éå¤çæ¶é´ï¼è¿å¯è½å ä¸ºç¬è«åå¾å¥½ãç¢æ¿åå¾æ©ãæä»¥ï¼æå¿è¦èªå·±å»å­¦ä¹ ãç ç©¶ææ¯æ¹æ¡ï¼è¯ä¼°ä¸åææ¯æ¹æ¡çå®ç°é¾åº¦ãæ§è½ãå¸¦æ¥çé£é©ã</p>
<p>ä¸è¿å¯ä»¥å©ç¨ AI çè§åè½åï¼å¤§å¤§ç®å°ææ¯è°ç åç¼åææ¯æ¹æ¡çæ¶é´ï¼åé¢ä¼è¯´å°ã</p>
<br>
<p>ä¸¾ä¸ªä¾å­ï¼è¿ä¸ªç¨åºæéè¦çæ°æ®æºï¼ä½æ¯è±é±ä¹°æ°æ®æºæ¯ä¸å¯è½çï¼åªè½ç½å«ã</p>
<p>ç ç©¶äºä¸äºèµæä¹åï¼ç¬èéç¨ akshare è¿ä¸ªå¼æºé¡¹ç®ï¼å®å·²ç»åç½®äºå¤ç§æ°æ®æºåééæ¹æ¡ï¼æ¥å£éå¸¸é½å¨ã</p>
<blockquote>
<p>é¡¹ç®å°åï¼ <a href="https://github.com/akfamily/akshare" target="_blank" rel="noopener nofollow">https://github.com/akfamily/akshare</a></p>
</blockquote>
<p><img src="https://img2024.cnblogs.com/blog/1315495/202602/1315495-20260205233611242-552245019.png" alt="image-20260205111201148" loading="lazy"></p>
<br>
<p>éè¦æ³çä¸è¥¿å·²ç»æ³å¥½äºï¼ç°å¨éè¿ tauri åå»ºä¸ä¸ªé¡¹ç®æ¨¡æ¿ï¼åé¢çå¼åå·¥ä½é½å¨è¿ä¸ªé¡¹ç®åè¿è¡ã</p>
<pre><code> npm create tauri-app@latest
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1315495/202602/1315495-20260205233610608-161142391.png" alt="image-20260205105136557" loading="lazy"></p>
<h3 id="è®¾è®¡-ui">è®¾è®¡ UI</h3>
<p>ä¸ºäºé¿åå¨ç¼åçé¢æ¶è±è´¹å¤ªå¤æ¶é´è°æ UIï¼åå¤å¤çç»èï¼æä»¬å¯ä»¥å©ç¨ä¸äºæ¯æ MCP ç UI å·¥å·å¹³å°ï¼ä½¿ç¨ AI æåè®¾è®¡é¡µé¢ï¼è¿ééæ© Pencilã</p>
<p>å¨ VS Code éé¢å®è£æä»¶ Pencil æä»¶ï¼ç¶åæ ¹æ®æç¤ºä½¿ç¨é®ç®±æ³¨åè´¦å·ã</p>
<p><img src="https://img2024.cnblogs.com/blog/1315495/202602/1315495-20260205233612395-1865506485.png" alt="image-20260205093015893" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/1315495/202602/1315495-20260205233611045-469202573.png" alt="image-20260205093119543" loading="lazy"></p>
<br>
<p>Pencli æ¯æèªå¨éç½®å°å¤ç§è¾å©ç¼ç¨å·¥å·ä¸ï¼ä½ å¯ä»¥å¨æ©å±çè®¾ç½®é¢æ¿éç½®å¼å¯ MCP åè½ã</p>
<p><img src="https://img2024.cnblogs.com/blog/1315495/202602/1315495-20260205233610649-834051531.png" alt="3e7b50c4-ae7b-46b1-beaa-10b01b010a62" loading="lazy"></p>
<br>
<p>éå¯ OpenCode ååç°å·²èªå¨è¿æ¥ Pencil ç MCP æå¡å¨ã</p>
<p><img src="https://img2024.cnblogs.com/blog/1315495/202602/1315495-20260205233609401-1792420871.png" alt="image-20260205112131607" loading="lazy"></p>
<p><br>å¤å¶ âæéè¦ä»ä¹åè½â éé¢ååºçéæ±ï¼è´´å° OpenCode éé¢ï¼ä½¿ç¨ Plan æ¨¡å¼ï¼ç¶åå¼å§è§åè®¾è®¡ï¼è· AI ä¸æ­ç¡®è®¤ç»èã</p>
<p><img src="https://img2024.cnblogs.com/blog/1315495/202602/1315495-20260205233610350-29351082.png" alt="image-20260205112040196" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/1315495/202602/1315495-20260205233608500-1556561665.png" alt="image-20260205112847778" loading="lazy"></p>
<br>
<p>è§å¾è®¾è®¡æ²¡é®é¢ä¹åï¼å°æ¨¡å¼åæ¢ä¸º <code>Build</code>ï¼å¼å§çæ­£è®¾è®¡é¡µé¢ã</p>
<p><img src="https://img2024.cnblogs.com/blog/1315495/202602/1315495-20260205233610704-1270917691.png" alt="image-20260205113037233" loading="lazy"></p>
<br>
<p>å¨ VS Code éé¢å¯ä»¥çå°é¢è§ã</p>
<p><img src="https://img2024.cnblogs.com/blog/1315495/202602/1315495-20260205233609553-1744404008.png" alt="image-20260205113905182" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/1315495/202602/1315495-20260205233610728-1057267105.png" alt="image-20260205113354777" loading="lazy"></p>
<h3 id="äºè§£-openspec">äºè§£ OpenSpec</h3>
<p>å®è£ OpenSpec ã</p>
<pre><code class="language-bash">npm install -g @fission-ai/openspec@latest
</code></pre>
<br>
<p>å¨ VSCode å®è£ OpenSpecCodeExplorer æä»¶ï¼ä¾¿äºåç»­ç»´æ¤ Spec ç¸å³æä»¶ã</p>
<p><img src="https://img2024.cnblogs.com/blog/1315495/202602/1315495-20260205233610497-25878844.png" alt="image-20260205115153739" loading="lazy"></p>
<br>
<p>å¨é¡¹ç®éé¢æ§è¡ <code>openspec init</code> åå§å OpenSpec æä»¶ï¼ç»å®ä½¿ç¨ OpenCodeï¼è®¾ç½®å®æåéè¦éå¯ OpenCodeã</p>
<blockquote>
<p>å¯ä»¥å¤éï¼åæ¶å¨ä¸ä¸ªé¡¹ç®éé¢ä½¿ç¨ä¸åçå·¥å·ã</p>
</blockquote>
<p><img src="https://img2024.cnblogs.com/blog/1315495/202602/1315495-20260205233608197-1788876487.png" alt="image-20260205115443385" loading="lazy"></p>
<br>
<p>OpenSpec ä¼è·é¡¹ç®åå»º <code>.openspec</code> ç®å½å <code>AGENTS.md</code> æä»¶ï¼ç¬¬ä¸æ¬¡åå§åæ¶ï¼<code>.openspec</code> ç®å½ç»ææ¯è¾ç®åï¼ä½æ¯åé¢éçè¿­ä»£ï¼ç®å½ä¼è¶æ¥è¶å¤æã</p>
<p><img src="https://img2024.cnblogs.com/blog/1315495/202602/1315495-20260205233610213-397718838.png" alt="image-20260205115646611" loading="lazy"></p>
<br>
<p>OpenSpec çç®å½ç»æè§åè¯´æå¦ä¸ï¼</p>
<pre><code class="language-bash">openspec/
âââ AGENTS.md               # äººå·¥æºè½å©æä½¿ç¨æåï¼èªå¨çæï¼
âââ project.md              # é¡¹ç®ä¸å±ä¸ä¸æä¿¡æ¯ï¼ææ¯æ ãç¼ç /é¡¹ç®è§èï¼
âââ specs/                  # æå¨åºåï¼å½åå·²é¨ç½²çåè½è½å
â   âââ [capability]/       # ç¤ºä¾ï¼ç¨æ·è®¤è¯ãæ¯ä»å¤ç
â       âââ spec.md         # éæ±è¯´æä¸åºæ¯æè¿°
â       âââ design.md       # ï¼å¯éï¼ææ¯å®ç°æ¨¡å¼
âââ changes/                # ææ¡éï¼æ­£å¨è¿è¡ä¸­çæ´»è·å·¥ä½
â   âââ [change-name]/      # ç¤ºä¾ï¼æ°å¢è°·æ­ç»å½åè½
â   â   âââ proposal.md     # ææ¡èæ¯ãæ ¸å¿åå®¹ä¸å½±åè¯ä¼°
â   â   âââ tasks.md        # å®ç°ä»»å¡æ¸åï¼æ£æ¥é¡¹ï¼
â   â   âââ design.md       # ï¼å¯éï¼æ¶æå³ç­ææ¡£
â   â   âââ specs/          # å¢éè§æ ¼è¯´æï¼å¯¹æå¨åºåçåæ´åå®¹ï¼
â       âââ [capability]/
â           âââ spec.md     # åå« ## æ°å¢/ä¿®æ¹/ç§»é¤ çéæ±åå®¹
â   âââ archive/            # å·²å®æåæ´çåå²å½æ¡£
</code></pre>
<br>
<p>å ä¸ºå³èäº OpenCodeï¼æä»¥ OpenCode ä¼å¨ <code>.opencode/command</code>&nbsp;ä¸çæä¸äºå½ä»¤æä»¶ã</p>
<p><img src="https://img2024.cnblogs.com/blog/1315495/202602/1315495-20260205233608940-1837730502.png" alt="image-20260205140615775" loading="lazy"></p>
<br>
<p>æå¼åçé¶æ®µæåºï¼è¿äºå½ä»¤çè¯´æå¦ä¸ï¼</p>
<table>
<thead>
<tr>
<th>å½ä»¤</th>
<th>è¯´æ</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/opsx:explore</code></td>
<td><strong>è§åç¨ç</strong>ãè¿å¥æ¢ç´¢æ¨¡å¼ââæèåç§æ³æ³ï¼ç ç©¶é®é¢ï¼æç¡®éæ±</td>
</tr>
<tr>
<td><code>/opsx:new</code></td>
<td><strong>åå»º spec ç¨ç</strong>ãä½¿ç¨å®éªæ§å·¥ä»¶å·¥ä½æµå¼å§æ°çåæ´æä½</td>
</tr>
<tr>
<td><code>/opsx:continue</code></td>
<td>æ¢å¤ä¸ä¸ä¸ªåè½ç¹ï¼ç¶åæ§è¡ä¸ä¸æ­¥ç¨çï¼ç»§ç»­è¿è¡åæ´å·¥ä½ââåå»ºä¸ä¸ä¸ªææï¼å®éªæ§ææï¼</td>
</tr>
<tr>
<td><code>/opsx:ff</code></td>
<td>ä»¥ä¸æ­¥éª¤ä¸æ­¥å°ä½ï¼ä¸æ¬¡æ§åå»ºåæ´å¹¶çæå®æ½æéçææç¸å³æä»¶</td>
</tr>
<tr>
<td><code>/opsx:apply</code></td>
<td>æ§è¡ specï¼å¼å§å¹²æ´»ï¼æ§è¡æ¥èª OpenSpec æ´æ¹çä»»å¡ï¼å®éªæ§ï¼</td>
</tr>
<tr>
<td><code>/opsx:verify</code></td>
<td>éªæ¶ï¼å¨å½æ¡£ä¹åï¼è¦æ ¸å®å®æ½æåµä¸åæ´å·¥ä»¶æ¯å¦ä¸è´</td>
</tr>
<tr>
<td><code>/opsx:sync</code></td>
<td>æ¹éæ±äºï¼åæ­¥å° spec æä»¶ãå°åæ´åçè¯¦ç»è§æ ¼ï¼specï¼åæ­¥è³ä¸»è§æ ¼ä¸­</td>
</tr>
<tr>
<td><code>/opsx:archive</code></td>
<td>å¹²å®æ´»äºï¼æ è®°å®æï¼å¨å®éªå·¥ä½æµç¨ä¸­å½æ¡£å·²å®æçåæ´</td>
</tr>
<tr>
<td><code>/opsx:bulk-archive</code></td>
<td>ä¸æ¬¡å½æ¡£å¤ä¸ªå·²å®æçæ´æ¹</td>
</tr>
<tr>
<td><code>/opsx:onboard</code></td>
<td>å¯å¨å¼å¯¼æµç¨</td>
</tr>
</tbody>
</table>
<blockquote>
<p><code>/opsx:explore</code> ã<code>/opsx-explore</code> æ¯ä¸æ ·çã</p>
</blockquote>
<br>
<p>ä¸ºäºä¾¿äºçè§£ OpenSpec çå·¥ä½åçï¼å¯ä»¥æè¿äºå½ä»¤åä¸º CLI ãCommandãSkill ä¸é¨åã</p>
<p>ä¸é¢æå°ç <code>/opsx:explore</code> å°±æ¯ Commandï¼æ¯è· AI åä½çæ¶åä½¿ç¨çï¼å¯ä»¥<strong>éè¿ Command æ¥å¼å¯¼ AI è§ååæ§è¡ Spec</strong>ã</p>
<p>è CLI æ¯ç®¡çéç½®æé¡¹ç®ç¨çï¼åè½æ¯è¾å¤ï¼ä½æ¯æ¬æä½¿ç¨ä¸å°ï¼è¿éåªååºä½¿ç¨è¯´æã</p>
<table>
<thead>
<tr>
<th>ç±»å</th>
<th>å½ä»¤</th>
<th>Purposeç®ç</th>
</tr>
</thead>
<tbody>
<tr>
<td>Setup</td>
<td><code>init</code>, <code>update</code></td>
<td>å¨é¡¹ç®ä¸­åå§ååæ´æ° OpenSpec</td>
</tr>
<tr>
<td>Browsing</td>
<td><code>list</code>, <code>view</code>, <code>show</code></td>
<td>æ¢ç´¢åæ´åè§æ ¼</td>
</tr>
<tr>
<td>Validation</td>
<td><code>validate</code></td>
<td>æ£æ¥é®é¢çåæ´åè§æ ¼</td>
</tr>
<tr>
<td>Lifecycle</td>
<td><code>archive</code></td>
<td>å®æå·²å®æçæ´æ¹</td>
</tr>
<tr>
<td>Workflow</td>
<td><code>status</code>, <code>instructions</code>, <code>templates</code>, <code>schemas</code></td>
<td>æ¯ææä»¶é©±å¨å·¥ä½æµç¨</td>
</tr>
<tr>
<td>Schemasschemas</td>
<td><code>schema init</code>, <code>schema fork</code>, <code>schema validate</code>, <code>schema which</code></td>
<td>åå»ºåç®¡çèªå®ä¹å·¥ä½æµ</td>
</tr>
<tr>
<td>Config</td>
<td><code>config</code></td>
<td>æ¥çåä¿®æ¹è®¾ç½®</td>
</tr>
<tr>
<td>Utility</td>
<td><code>feedback</code>, <code>completion</code></td>
<td>Feedback and shell integration(æç¿»è¯ä¸åºæ¥)</td>
</tr>
</tbody>
</table>
<br>
<p>Command å¼å¯¼ AI å¹²æ´»ï¼è Skill åæ¯åè¯ AI æä¹åï¼å·ä½è¦åä»ä¹ã</p>
<p><img src="https://img2024.cnblogs.com/blog/1315495/202602/1315495-20260205233609693-1271354578.png" alt="image-20260205223926980" loading="lazy"></p>
<h3 id="ä½éª-openspec">ä½éª OpenSpec</h3>
<p>å¨åäºåæè§ååäºè§£ OpenSpec åï¼æä»¬æ­£å¼å¼å§è¿å¥çæ Spec åç¼ç çè¿ç¨ã</p>
<p>OpenSpec å¼ºå¶å®æ½ä¸¥æ ¼çä¸é¶æ®µå·¥ä½æµç¨ï¼ä»¥é²æ­¢éæ±æ¼ç§»ï¼å¹¶ç¡®ä¿ AI å©æå§ç»ä¸äººç±»æå¾ä¿æä¸è´ï¼æä»¥å¼åä¹æ¯æä¸æ­¥æ¥èµ°ã</p>
<br>
<p>æè°ä¸ä¸é«æ¥¼å¹³å°èµ·ï¼åé¡¹ç®çç¬¬ä¸æ­¥å°±æ¯æåºç¡æ¶æåå¥½ï¼ææ¶å­æ­èµ·æ¥ï¼è®©ç¨åºæä¸ªåºæ¬çé¡µé¢ï¼æä»¥è¿éæä»¬ä¸åå·ä½çåè½ï¼èä¸è§åä¸ä¸ª Spec æé¡¹ç®åè·èµ·æ¥ã</p>
<br>
<p>åé¢åäº âæéè¦ä»ä¹åè½â ï¼ä½æ¯è¿ç§æè¿°å¹¶ä¸å®åï¼å¨ AI ç¼ç ä¹åï¼è¦ä»ç»æèæ³æ³ï¼è°æ¥é®é¢ï¼å¹¶æç¡®è¦æ±ãæä»¥è¿ä¸æ­¥è· OpenCode ç plan ä¸æ ·ï¼åè· AI å¯¹è¯ï¼éæ­¥æç¡®ç»èåæ­¥éª¤ã</p>
<p>å¨å¯¹è¯æ¡è¾å¥ï¼</p>
<pre><code>/opsx:explore åå»ºé¡¹ç®æ¶æ
</code></pre>
<blockquote>
<p><code>/opsx:explore</code> åé¢å¯ä»¥ä¸å¡«ä¸»é¢ï¼ä¹å¯ä»¥ç´æ¥æ âæéè¦ä»ä¹åè½â åå®¹åå°éé¢ï¼è¿ä¸ªå½ä»¤æ¯è¾çµæ´»ã</p>
</blockquote>
<br>
<p>å¶å®ï¼OpenSpec Command çæ¬è´¨å°±æ¯æç¤ºè¯ï¼å½ä½ ååº <code>/opsx-explore åå»ºé¡¹ç®æ¶æ</code>&nbsp;çå½ä»¤æ¶ï¼å®éä¸æ¯æ opsx-explore.md æä»¶çåå®¹è¾å¥åæç¤ºè¯äºã</p>
<p><img src="https://img2024.cnblogs.com/blog/1315495/202602/1315495-20260205233612321-761053920.png" alt="image-20260205144928202" loading="lazy"></p>
<br>
<p>æ¥çæ  âæéè¦ä»ä¹åè½â è´´å°å¯¹è¯æ¡ï¼<strong>è®© AI å¸®å©ä½ ææ³æ³åä¸ºå·ä½çéæ±è¯´æ</strong>ãä½ å¯ä»¥å¨å¯¹è¯ä¸­ç»§ç»­è· AI æ¢è®¨æç¡®ç®æ ï¼ç¡®è®¤æ¶æè§åï¼ç¶åè¿å¥ä¸ä¸é¶æ®µã</p>
<p><img src="https://img2024.cnblogs.com/blog/1315495/202602/1315495-20260205233610849-1210072118.png" alt="image-20260205144451993" loading="lazy"></p>
<br>
<p>å¸¸è§é®é¢ï¼ä¸ä¸æå¤ªå¤ï¼éè¦æ°å¼å¯¹è¯æä¹åã</p>
<p>å ä¸ºéè¦å è½½å¾å¤æç¤ºè¯ãSpec æä»¶è¿æä»£ç ï¼å¯¼è´åé¢æ¯æ¬¡å¯¹è¯ç token ä¼çç¸ï¼ä¸ºäºåå° token æ¶èåå¯¹è¯æ§è½ï¼ä¸å¾ä¸æ°å¼ä¸ä¸ªå¯¹è¯ï¼ä½æ¯åæå¯¹è¯ä¸ä¸æä¸¢å¤±ã</p>
<p>åºäº OpenSpec åä»»å¡æ¶ï¼å ä¸ºæ¯ä¸ªåè½é½ä¼å¨ <code>openspec/changes</code> ç®å½ï¼å¹¶ä¸ä¼æ ¹æ®ä»»å¡è¿åº¦å¨ tasks.md éææ è®°ï¼æä»¥æ§è¡å½ä»¤æ¶æå®ç»­åæä¸ªåè½å³å¯ï¼ä¼èªå¨æ¢å¤è¦åçäºæï¼ä¾å¦ï¼</p>
<pre><code>/opsx-continue [change-name]
</code></pre>
<h4 id="ç¬¬-1-é¶æ®µåå»ºåæ´-ææ¡">ç¬¬ 1 é¶æ®µï¼åå»ºåæ´ (ææ¡)</h4>
<p>âåæ´â æå¨åæéè¦åä»£ç ä¸ï¼éè¦åæ¹å¨ã</p>
<p>âææ¡â æè¦åæ°çåè½ã</p>
<br>
<p>OpenSpec è¦æ±å¨è¿ä¸ªé¶æ®µï¼å¨å°èµæºæå¥å° âå¦ä½â ä¹åï¼å¼ºå¶è¦æ±å¨ âåä»ä¹â å âä¸ºä»ä¹â ä¸ä¿æä¸è´ã</p>
<p>è¿ä¸ªé¶æ®µè¦åçäºæï¼åç¡®æ¥è¯´æ¯ OpenSpec ä¼åçäºæï¼ï¼</p>
<ol>
<li>è¯å«éæ±ï¼æ°åè½ãéæææ¶æè½¬åã</li>
<li>èææ¶ï¼å¨ <code>openspec/changes/&lt;change-id&gt;/</code> ä¸åå»ºå¯ä¸ç®å½ã</li>
<li>å®ä¹è§èï¼ä¸ºç¸å³åè½ç¼åå¢é (æ·»å ãä¿®æ¹ãå é¤)ã</li>
<li>è®¡åï¼åå»º tasks.md æä»¶ï¼å°å·¥ä½åè§£æå¯éªè¯çæ­¥éª¤ã</li>
<li>éªè¯ï¼éªæ¶ï¼ï¼ä½¿ç¨ openspec validation ç¡®ä¿ææ¡å¨ç»æä¸æ¯åççã</li>
</ol>
<br>
<p>æ§è¡å½ä»¤å¼å§åå»º Specï¼</p>
<pre><code class="language-bash">/opsx-new
# æè
/opsx-new {åè½åç§°}
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1315495/202602/1315495-20260205233608813-1679168930.png" alt="image-20260205150053070" loading="lazy"></p>
<br>
<p>Spec æ¯ä¸è½ä¸ä¸å­ç´æ¥åå»ºçï¼éè¦æç§æµç¨ä¸ä¸ªä¸ªåå»ºï¼æåç»åæä¸ä¸ª Specï¼Spec æ¯ä¸ªé¨åé½ç±ä¸äºæä»¶ç»æï¼åç»­ AI ç¼ç æ¶ä¼æç§è¿äºæä»¶å®æå·¥ä½ã</p>
<pre><code>[ ] proposal
[ ] design
[ ] specs
[ ] tasks
</code></pre>
<br>
<p>ä½ å¯ä»¥ä½¿ç¨ <code>/opsx-continue</code>&nbsp;è¿å¥ä¸ä¸ä¸ªé¶æ®µï¼æèåèç¬èçæ¹å¼ï¼è¾å¥æå­è¯´æè®© AI èªå¨æµè½¬æ­¥éª¤ã</p>
<br>
<p>ååå»º proposalï¼</p>
<pre><code>æè¿°è¿ä¸ªåæ´çåå®¹ï¼ææ¥å¸®ä½ èµ·è proposal.md
</code></pre>
<blockquote>
<p>æèè¾å¥ <code>/opsx-continue</code>&nbsp;èªå¨è¿å¥æ­¤æ­¥éª¤ã</p>
</blockquote>
<p><img src="https://img2024.cnblogs.com/blog/1315495/202602/1315495-20260205233609698-76468035.png" alt="image-20260205150839593" loading="lazy"></p>
<br>
<p>designãspecs å¯ä»¥ä¸èµ·å¹¶è¡å·¥ä½ï¼æä»¥å¯ä»¥è¾å¥ï¼</p>
<pre><code>åæ¶åå»º designãspecs
</code></pre>
<br>
<p>ç­ AI å®æä»»å¡åï¼<code>openspec/changes/{åè½åç§°}</code>&nbsp;ä¸ä¼åå»ºä¸æ¹æä»¶ã</p>
<p><img src="https://img2024.cnblogs.com/blog/1315495/202602/1315495-20260205233609578-33837835.png" alt="image-20260205151456733" loading="lazy"></p>
<p><br>å½åé¶æ®µæåä¸æ­¥åå»ºä»»å¡æ¸åï¼è§åæ¯ä¸ªç¯èè¦åçæ­¥éª¤åç®çãéªæ¶æ åã</p>
<pre><code>åå»ºä»»å¡æ¸å
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1315495/202602/1315495-20260205233608994-1403053363.png" alt="image-20260205151415959" loading="lazy"></p>
<br>
<p>ä¸è¦æ¥çè¿å¥ç¬¬äºé¶æ®µï¼ç¬èå»ºè®®å¥½å¥½ç ç©¶ä¸ä¸ <code>openspec/changes</code>ç®å½ä¸çæä»¶ã</p>
<h4 id="ç¬¬äºé¶æ®µå®æ½">ç¬¬äºé¶æ®µï¼å®æ½</h4>
<p>è¿æ¯ç¼ç é¶æ®µï¼AI ä¼æ ¹æ®åé¢åå»ºç Spec å»æ§è¡ç¼ç ä»»å¡ã</p>
<p>OpenSpec çå·¥ä½æ­¥éª¤ï¼</p>
<ol>
<li>ä¸ä¸æå è½½ï¼äººå·¥æºè½è¯»å proposal.md åè§è/ä»¥çè§£éæ±ã</li>
<li>æ§è¡:AI æé¡ºåºå¤ç tasks.mdã</li>
<li>è·è¸ªï¼ä»»å¡å®æ¶æ è®°ä¸ºå·²å®æã</li>
</ol>
<br>
<p>åé¢æå°ï¼å¦æä¸ä¸æå¤ªé¿ï¼éè¦æ°å¼å¯¹è¯ï¼æèä»å¤©å·æä¸åä»£ç ï¼ç¬¬äºå¤©åçæ¶åå¿è®°äºè¿åº¦ï¼é£ä¹å¯ä»¥ä½¿ç¨ <code>/opsx-continue [change-name]</code> æ¢å¤è¿åº¦ã</p>
<p><img src="https://img2024.cnblogs.com/blog/1315495/202602/1315495-20260205233609473-1542596676.png" alt="image-20260205153010435" loading="lazy"></p>
<br>
<p>å¦ä¸å¾ï¼ç¬¬ä¸é¶æ®µçåä¸ªæ­¥éª¤å·²ç»å®æäºï¼æç¤ºæä»¬ä¸ä¸æ­¥å¯ä»¥ä½¿ç¨ <code>/opsx-apply</code>ã<code>/opsx-archive</code>&nbsp;æ§è¡ç¼ç ä»»å¡äºã</p>
<p><img src="https://img2024.cnblogs.com/blog/1315495/202602/1315495-20260205233609691-1175318801.png" alt="image-20260205153042693" loading="lazy"></p>
<p><br><code>/opsx-apply</code> æ<code>tasks.md</code> è§åä¸æ­¥æ­¥å®ç°åè½ï¼å®ç°æ¶æ éçç®¡ãå®æä»»å¡åï¼ä½¿ç¨<code>/opsx-archive</code> å­æ¡£å·²å®æçæ´æ¹ã</p>
<br>
<p>æä»¥åæ§è¡ <code>/opsx-apply</code> ï¼å·ä¸ä¼å¿æé³ï¼ç­åå äºååéï¼ä»»å¡æ§è¡å®æ¯åã</p>
<p>ä½æ¯è¿ä¸è½ç´æ¥å­æ¡£ï¼éè¦æ§è¡ <code>/opsx-verify [change-name]</code>&nbsp;æ£æ¥å®æ´æ§ãæ­£ç¡®æ§åä¸è´æ§ï¼å¦ææé®é¢ï¼è®© AI æ¥çæ¹ã</p>
<p><img src="https://img2024.cnblogs.com/blog/1315495/202602/1315495-20260205233610648-912983200.png" alt="image-20260205160114683" loading="lazy"></p>
<p><br>å¦æåç°æå°æ¹å®æå¾ä¸å¥½ï¼éè¦è°æ´ï¼å¯ä»¥ç´æ¥å¨å½åå¯¹è¯ä¸­è¦æ± AI å®åè®¾è®¡ãä¿®æ¹ä»£ç ãå¦ææ¹å¨æ¯è¾å¤§ï¼æ¶åå°é»è¾åè®¾è®¡çåæ´ï¼åéè¦ä½¿ç¨ <code>/opsx-sync</code> æåæ´åæ­¥å° <code>changes</code> éé¢ã</p>
<h4 id="ç¬¬-3-é¶æ®µå½æ¡£-éæ">ç¬¬ 3 é¶æ®µï¼å½æ¡£ (éæ)</h4>
<p>è¿ä¸æ­¥è¦ä½¿ç¨ <code>/opsx-archive</code> å½æ¡£å·²å®æçæ´æ¹ï¼ä¹å°±æ¯æ è®°è¿ä¸ªåè½å·²ç»ç»æäºã</p>
<br>
<p>ä¸æ¦ä»£ç é¨ç½²å¹¶éªè¯ï¼åæ´ææ¡å°±ä¸åæ¯ âææ¡âï¼èæ¯ç°å®ä»£ç äºï¼ä¸ºäºåå°åç»­æ£ç´¢ææ¬ç­ï¼OpenSpec ä¼åä¸äºæä½ã</p>
<ol>
<li>å½æ¡£å½ä»¤ï¼è¿è¡ <code>openspec archive &lt;change-id&gt;</code>å° change æä»¶å¤¹ç§»å¨å° <code>openspec/changes/archive/</code>ã</li>
<li>è§èåå¹¶: CLI èªå¨å°è§èå¢é (ADDED/MODIFIED è¦æ±) åºç¨äº<code>openspec/specs/</code>&nbsp;ç®å½ã</li>
</ol>
<br>
<p>å ä¸º OpenSpec æ²¡ææ°æ®ï¼ä¹ä¸å­æ°æ®åºï¼æä»¥ä¸»è¦æ¯æ ¹æ®ç®å½æä»¶æ¥å¤æ­å·¥ä½ç¶æï¼å¦æä¸æ´çæä»¶ï¼ä¼å¯¼è´æ£ç´¢æ¶çæä»¶åå®¹å¾å¤ï¼ææ²¡å¿è¦çæä»¶ä¹è¯»åè¿å»äºã</p>
<p><code>openspec/specs</code> éé¢å­å¨äºç¨åºå½åçæ¶æãåè½è¯´æç­æä»¶åä¿¡æ¯ï¼æä»¥æ¯æ¬¡å®æ Spec åï¼é½éè¦æ´æ°è¿éçæä»¶ï¼</p>
<br>
<p>åºç¡æ¶ææ­å»ºèµ·æ¥åï¼çé¢å¤ªä¸äºï¼å¿è®°äºè®©å¼å¥ ant design æ¡æ¶äºï¼ä¹å¿è®°äºå®è£ pencli çè®¾è®¡èµ°ï¼ä¸è¿é®é¢ä¸å¤§ï¼åé¢åå»ºæ°ç Spec ä¸é¨ä¼åå³å¯ãå½ç¶ä½ ä¹å¯ä»¥åç»§ç»­å®åä¸äºåºç¡åè½ï¼ç¶åæå½æ¡£ã</p>
<br>
<p><img src="https://img2024.cnblogs.com/blog/1315495/202602/1315495-20260205233608256-14045611.png" alt="image-20260205162649717" loading="lazy"></p>
<br>
<p>ç®åçé¢åªæ¯æä¸ªæ¶å­ï¼åè½è¿æ¯ä¸å¯ç¨çï¼æä»¬å¯ä»¥æ°å¼ä¸ä¸ª <code>change</code>&nbsp;æä¸ä¸ªæ¨¡åå»å¢å åè½ï¼ä¸è¦ä¸ä¸ª <code>change</code>&nbsp;å¹²ä¸å äºæï¼å°æ­¥å¿«è·ãéæ­¥ç§¯ç´¯ã</p>
<p><img src="https://img2024.cnblogs.com/blog/1315495/202602/1315495-20260205233608651-976846377.png" alt="image-20260205164224697" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/1315495/202602/1315495-20260205233609495-1644838055.png" alt="image-20260205164956608" loading="lazy"></p>
<br>
<p>æ¥ä¸æ¥ï¼æä»¬å¯ä»¥ç»§ç»­ä½¿ç¨ <code>/opsx-expore</code>&nbsp;æ <code>/opsx-new</code>&nbsp;éæ­¥å®ç°å¶å®åè½ã</p>
<p>ç®åï¼è¯¥é¡¹ç®è¿éè¦å®ç°ï¼</p>
<ul>
<li>çé¢æç§ pencli çè®¾è®¡å¾å®ç°çé¢</li>
<li>åºéç®¡çåè½</li>
<li>åºéä¿¡æ¯æ¥çåè½</li>
<li>è¡æåè½</li>
</ul>
<br>
<p>å¯ä»¥éä¸ªåå»º Specï¼éæ­¥å®ç°åè½ã</p>


</div>
<div id="MySignature" role="contentinfo">
    ç´èå·¥è¯(https://whuanle.cn)
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.025694444444444443" data-date-updated="2026-02-06 09:10">2026-02-06 08:33</span>&nbsp;
<a href="https://www.cnblogs.com/whuanle">ç´èå·¥è¯</a>&nbsp;
éè¯»(<span id="post_view_count">42</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19581835);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19581835', targetLink: 'https://www.cnblogs.com/whuanle/p/19581835', title: 'éè¿ OpenSpec + OpenCode å®è·µ AI Specs' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Claude Opus 4.6 åå¸ï¼Agent è½åæ´æ¶¨ï¼ä¸ä¸æçªå£ç¿»äºåï¼ ]]></title>
    <link>https://www.cnblogs.com/zh94/p/19582489</link>
    <guid>f66d7bc19c7c5b50a1c071e5bdb18e55</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/zh94/p/19582489" title="åå¸äº 2026-02-06 08:23">
    <span role="heading" aria-level="2">Claude Opus 4.6 åå¸ï¼Agent è½åæ´æ¶¨ï¼ä¸ä¸æçªå£ç¿»äºåï¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>Claude æ¬æ¬¡å±åå¸äºä¸¤ä¸ªæ´æ°ï¼</p>
<ol>
<li>
<p>æ¨¡åå±é¢ä»ååç Opus4.5 åçº§å°äº Opus4.6ï¼ç¸å³ææ ææ¾èæåï¼</p>
</li>
<li>
<p>Claude Code çåçº§ï¼æ°å¢äº agent-teams çåè½ï¼</p>
</li>
</ol>
<h1 id="-åçæ¨¡ååçº§-">/ åçæ¨¡ååçº§ /</h1>
<p><img src="https://img2024.cnblogs.com/blog/1104472/202602/1104472-20260206081830251-1624303846.png" alt="opuspingfeng" loading="lazy"></p>
<p>ä¸è¿° Opus4.6 æ¨¡åææ°çè¯åå½ä¸­ï¼ç¸æ¯äºä¸ä¸ä»£ Opus4.5 ææ¾èæåçææ åå«æ¯ï¼</p>
<ol>
<li>
<p>Agentic terminal codingï¼Terminal-Bench 2.0ï¼ï¼è¯¥ææ æ¯è¯ä¼° AI å¨ç»ç«¯ç¼ç¨ç¯å¢ä¸­èªä¸»è§£å³é®é¢è½åçè¯åï¼ä¸»è¦èå¯å¤ææä»¤è§£æãç¯å¢äº¤äºåå·¥ä½æµèªå¨åä¸å¤§è½åãOpus 4.6 æ¯ 65.4%ï¼ç¸æ¯äº Opus4.5 59.8% æç¸åºæåã</p>
</li>
<li>
<p>Agentic computer use(OSWorld)ï¼ æ¯è¯ä¼° AI å¨çå®æä½ç³»ç»ä¸­èªä¸»å®æä»»å¡çè½åï¼Opus 4.6 æ¿äº 72.7%ï¼æ¯ Opus 4.5 ç 66.3% æææ¾æåã</p>
</li>
</ol>
<p>è¿æå³ç Claude éè¿å¾å½¢çé¢æå½ä»¤è¡ä¸çµèäº¤äºï¼è§£å³å®éé®é¢çè½åææ¾æé«ï¼æªæ¥æä½ç³»ç»å°±æ¯ Claude çåºæ¬æä½å·¥å·ï¼å¨é¢ Agent åæäºéå¸¸å¤§çå¯è½ã</p>
<ol start="3">
<li>
<p>Agentic search(BrowserComp) ï¼æ¯æµè¯ AI å¨æµè§å¨ç¯å¢ä¸­èªä¸»æç´¢ãç­éåæ´åä¿¡æ¯çè½åï¼æ¯å¦æ ¹æ®æ¨¡ç³æä»¤æ¾å°åç¡®ç­æ¡ï¼æèå¯¹æ¯å¤ä¸ªç½é¡µåå®¹ï¼è¿è¡å¤æä¿¡æ¯çæ´åè½åãOpus 4.6 æ¯ 84.0%ï¼ç¸æ¯äºä¸ Opus4.5 ç 67.8 æè¾é«æåã</p>
</li>
<li>
<p>Novel problem-solvingï¼ARC AGI 2ï¼ï¼æ¯è¯ä¼° AI è§£å³å¨æ°ãæªè§è¿çå¤æé®é¢çè½åï¼æ¯å¦é»è¾æ¨çãæ°å­¦è¯æææ½è±¡æ¦å¿µçè§£ï¼å®æµè¯çæ¯ AI è½å¦åäººç±»ä¸æ ·ï¼éè¿å·²æç¥è¯çµæ´»ç»åï¼æ¾å°åæ°è§£æ³ã</p>
</li>
</ol>
<p>ç®åæ¥è¯´ï¼è¯¥ææ çæåæå³ç AI æªæ¥éªä½ ä¸èµ·âå¼èæ´âçè½åæ´å¼ºäºï¼åæ°è½åæ¾ AI ä¹æ²¡æä»»ä½é®é¢ã</p>
<p>è¯¥ææ ä»åæ¬ç 37.6% åé«å°äº 68.8% ï¼æåæ¾èï¼</p>
<h1 id="opus46-æ¯æ-1m-token-çä¸ä¸æçªå£">Opus4.6 æ¯æ 1M Token çä¸ä¸æçªå£</h1>
<p><img src="https://img2024.cnblogs.com/blog/1104472/202602/1104472-20260206081922277-1854598102.png" alt="opus2" loading="lazy"></p>
<p>é¤äºä¸è¿°æ¨¡åææ æè¾é«æç¤ºå¤ï¼åæ¬ç Opus4.5 ä¸ä¸æçªå£æ¯æ¯æ 200Kï¼æ¬æ¬¡ç´æ¥åçº§å°äº 1Mï¼è¶³è¶³ç¿»äºäºåï¼</p>
<p>ä¸ä¸æçªå£å¯¹äº AI Coding æ¯æéå¸¸éè¦çå«ä¹ï¼ä¸ä¸æä¸è¶³å®¹æå¯¼è´ AI Coding è´¨éä¸éï¼æ¬æ¬¡ç´æ¥åçº§å° 1M ä¸ä¸æçªå£ï¼AI Coding å¼åèçç¦é³ï¼</p>
<h1 id="claude-code-åçº§">Claude Code åçº§</h1>
<p>æ¬æ¬¡ Claude Code åçº§äº agent-teams çåè½ã</p>
<p>ä»¥åï¼æä»¬æ³è®© Claude Code å¹¶è¡è·å¤ä¸ªä»»å¡çæ¶åï¼æ¯è¾ç®éçåæ³æ¯ï¼æ¯æ¬¡é½æå¼ä¸ä¸ªæ°ç CLI ç»ç«¯ï¼ç¶å Claude Code å¨ä¸åçç»ç«¯è¿è¡æ§è¡ã</p>
<p>åæèå°±æ¯ç´æ¥éç¨ sub agentï¼ä½ sub agent çé®é¢æ¯ï¼è¿äºç¨åºå¨åä¸ä¼è¯åè¿è¡ï¼åªè½åä¸»ä»£çæ±æ¥ã</p>
<p>èæ¬æ¬¡æ´æ°ç agent teams åè½ï¼åæ¯åä¸ª Agent éååèªç¬ç«å·¥ä½ï¼åèªå¨èªå·±çä¸ä¸æçªå£ä¸­ï¼å¹¶ç´æ¥ç¸äºæ²éï¼</p>
<p>æ¯çï¼å¹¶ä¸æ¯åä¸ª Agent åä¸»ä»£çæ±æ¥ï¼èæ¯åä¸ª Agent å¨èªå·±çä¸ä¸æçªå£ä¸­ï¼ç¬èªè¿è¡ï¼ä¸åä¸ª Agent ä¹é´å¯ä»¥ç´æ¥æ²éï¼äºç¸åä½ï¼å®å¨å¹¶è¡ï¼</p>
<p>ä¸è¿ï¼ç±äºè¯¥åè½è¿æ¯ä¸ä¸ªå®éªåè½ï¼æä»¥é»è®¤å¨ Claude Code ä¸­æ¯è¢«ç¦ç¨çï¼æä»¬å¯ä»¥ç´æ¥è°æ´ Claude Code ç setting.json éç½®æ¥å¼å¯å®ï¼</p>
<pre><code>{
  "env": {
    "CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS": "1"
  }
}
</code></pre>
<p>å¼å¯è¯¥éç½®åï¼å¤ä¸ªClaude Codeå®ä¾ä¹é´è¿è¡å¢éåä½ï¼å±äº«ä»»å¡çè½åå°å¤§å¤§å å¼ºï¼</p>
<p>Claude å¢ééå¯¹ Claude Code å¹¶è¡å¤çè½åä¹åç¬å½å¶äºä¸é¨è§é¢ï¼æå´è¶£çå¯ä»¥ç´æ¥å¨è¿éæ¥çï¼</p>
<p><a href="https://www.youtube.com/watch?v=vNeIQS9GsZ8" target="_blank" rel="noopener nofollow">https://www.youtube.com/watch?v=vNeIQS9GsZ8</a></p>
<p>é¤æ­¤ä¹å¤ï¼å³äºAgent teams è½åçè¯¦ç»è¯´æï¼ä¹å¯ä»¥æ¥ç Claude å®ç½çææ°æ´æ°ï¼ææ¡£å°åæ¯ï¼</p>
<p><a href="https://code.claude.com/docs/en/agent-teams" target="_blank" rel="noopener nofollow">https://code.claude.com/docs/en/agent-teams</a></p>
<p>ä»å¹´æå¤§å¯è½æ¯Agent çåå¹´ï¼æ è®ºæ¯åæ®µæ¶é´çç«çOpenClawï¼è¿æ¯æè¿ Claude å GPT çæ¨¡åæ´æ°ï¼é½ç´ææ¨¡åAgentè½åçæåï¼æ è®ºæ¯åä»£ç ï¼æä½æµè§å¨ï¼è¿æ¯æ§å¶æä½ç³»ç»ï¼æ¨¡åç°å¨é½æäºè¾å¤§åçº§ï¼</p>
<p>è·ä¸èå¥ï¼è¿æ²¡ç¨è¿ Claude Code ä»å¹´ä¸å®è¦ä½éªä¸ä¸ï¼è¿æ¯å¥å±çæå¥½æ¶æºï¼</p>
<p>å¥å±æ©äºä½ ä¼è§å¾ Claude Code åå¾ï¼å¥å±æäºä½ ä¼è·ä¸ä¸ Claude Code çèå¥ï¼ç°å¨å¥å±æ­£å½æ¶ãðª</p>
<h1 id="æ¬¢è¿æ¥å¸¸äº¤æµ">æ¬¢è¿æ¥å¸¸äº¤æµ</h1>
<p>AI é©±å¨å¢éå¼åæ¯è¿ä¸ªæ¶ä»£çæ°å½é¢ï¼æ¬¢è¿å¤§å®¶å å¾®ä¿¡äºç¸äº¤æµå¿å¾ã</p>
<p>ð æ³è¦è¿ç¾¤çæåï¼æ«ç æ¶å¤æ³¨ âAIå®éªç¾¤âï¼çå°æ¶æ¯åä¼ç¬¬ä¸æ¶é´æä½ è¿ç¾¤ã</p>
<p>ç¾¤å®ä½ï¼AIå·¥å·ææ/å®æç»éªäºå©</p>
<p>ç¾¤è§åï¼ä¸æ°´ç¾¤ãä¸å¹¿åãå¹²è´§ä¼å</p>
<p>æ¬¢è¿è®¿é®è¯¥é¾æ¥è·åç¾¤ä¿¡æ¯ï¼<a href="https://zhaozhihao.com/archives/KRMxDLo4" target="_blank" rel="noopener nofollow">https://zhaozhihao.com/archives/KRMxDLo4</a></p>
<p>å¥½æç« å¼å¾è¢«æ´å¤äººçè§ï¼æ¢ç¶çå°è¿éäºï¼éæç¹ä¸ªèµðåå³æ³¨ï¼å¹¶è½¬åç»æ´å¤çæåå§ï¼æè°¢ã</p>
<p>ä½èï¼è´¾åæ¯çå¹³è¡ä¸çãVï¼x_h886688</p>
<hr>
<p><a href="https://mp.weixin.qq.com/s/dKvltmgdSk9uGIZ4ZuHkQg" target="_blank" rel="noopener nofollow">åæå°åï¼Claude Opus 4.6 åå¸ï¼Agent è½åæ´æ¶¨ï¼ä¸ä¸æçªå£ç¿»äºåï¼</a></p>


</div>
<div id="MySignature" role="contentinfo">
    <br>
<fieldset style="padding: 10px; margin: 10px; background-color: #fff; width: 850px; border: 1px solid black; font-size: blod">
<p><span style="color: black">çæå£°æ</span></p>
<hr style="color: black">
<p><span style="color: black">ä½èï¼éå¬é</span></p>
<p><span style="color: black">åºå¤ï¼</span><a style="color: black" href="https://www.cnblogs.com/zh94/" target="_blank">éå¬éçææ¯åå®¢--https://www.cnblogs.com/zh94/</a></p>
<p><span style="color: black">æ¨çæ¯ææ¯å¯¹åä¸»æå¤§çé¼å±ï¼æè°¢æ¨çè®¤çéè¯»ã</span></p>
<p><span style="color: black">æ¬æçæå½ä½èææï¼æ¬¢è¿è½¬è½½ï¼ä½æªç»ä½èåæå¿é¡»ä¿çæ­¤æ®µå£°æï¼ä¸å¨æç« é¡µé¢ææ¾ä½ç½®ç»åºåæè¿æ¥ï¼å¦åä¿çä»»ä½è¿½ç©¶æ³å¾è´£ä»»çæå©ã</span></p>
</fieldset>

<div style="padding: 10px; margin: 10px; background-color: #fff; width: 850px; border: 0px solid black; font-size: blod">
     <img src="https://images.cnblogs.com/cnblogs_com/zh94/1586631/o_211225012748_weixin_saoma.png">&nbsp;&nbsp;&nbsp;&nbsp;<img src="https://images.cnblogs.com/cnblogs_com/zh94/1586631/o_211225012748_weixin_saoma.png">
</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-06 08:24">2026-02-06 08:23</span>&nbsp;
<a href="https://www.cnblogs.com/zh94">è´¾åæ¯çå¹³è¡ä¸ç</a>&nbsp;
éè¯»(<span id="post_view_count">29</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19582489);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19582489', targetLink: 'https://www.cnblogs.com/zh94/p/19582489', title: 'Claude Opus 4.6 åå¸ï¼Agent è½åæ´æ¶¨ï¼ä¸ä¸æçªå£ç¿»äºåï¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Laravel AI SDK æ­£å¼åå¸ ]]></title>
    <link>https://www.cnblogs.com/catchadmin/p/19582488</link>
    <guid>02ee93ee6ceaa04b70ca92fecdcdddc6</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/catchadmin/p/19582488" title="åå¸äº 2026-02-06 08:23">
    <span role="heading" aria-level="2">Laravel AI SDK æ­£å¼åå¸</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="laravel-ai-sdk-æ­£å¼åå¸">Laravel AI SDK æ­£å¼åå¸</h1>
<p>Laravel AI SDK ä»å¤©æ­£å¼åå¸äºãè¿ä¸ªç± Taylor Otwell å¼åæ°æçå®æ¹åï¼ä¸º Laravel åºç¨æä¾äºä¸å¥ç»ä¸ç AI äº¤äºæ¥å£ï¼è¦çææ¬å¯¹è¯ãå¾åçæãè¯­é³åæãè¯­é³è½¬å½ãåéåµå¥ç­åºæ¯ï¼æ¯æ OpenAIãAnthropicãGeminiãGroqãxAI ç­ä¸»æµæå¡åã</p>
<p>å®è£æ¹å¼åå¶ä» Laravel å®æ¹åä¸æ ·ç®åï¼</p>
<pre><code class="language-shell">composer require laravel/ai
</code></pre>
<h2 id="agentæ ¸å¿äº¤äºåå">Agentï¼æ ¸å¿äº¤äºåå</h2>
<p>SDK çæ ¸å¿æ¦å¿µæ¯ Agentãæ¯ä¸ª Agent æ¯ä¸ä¸ª PHP ç±»ï¼å°è£äºç³»ç»æä»¤ãå¯¹è¯ä¸ä¸æãå·¥å·åè¾åºæ ¼å¼ãå¯ä»¥æå®çè§£ä¸ºä¸ä¸ªä¸ç¨å©æââéå®æç»ãææ¡£åæå¨ãå®¢ææºå¨äººââéç½®ä¸æ¬¡ï¼éå¤è°ç¨ã</p>
<p>éè¿ Artisan å½ä»¤åå»ºï¼</p>
<pre><code class="language-shell">php artisan make:agent SalesCoach
</code></pre>
<p>çæçç±»å®ç° <code>Agent</code> æ¥å£ï¼å®ä¹ <code>instructions()</code> æ¹æ³æä¾ç³»ç»æç¤ºè¯ï¼ç¶åè°ç¨ <code>prompt()</code> åèµ·å¯¹è¯ï¼</p>
<pre><code class="language-php">$response = SalesCoach::make(user: $user)
    -&gt;prompt('åæè¿æ®µéå®å½é³...');

return (string) $response;
</code></pre>
<p><code>prompt()</code> æ¹æ³æ¯æå¨è°ç¨æ¶åæ¢æå¡ååæ¨¡åï¼</p>
<pre><code class="language-php">$response = (new SalesCoach)-&gt;prompt(
    'åæè¿æ®µéå®å½é³...',
    provider: 'anthropic',
    model: 'claude-haiku-4-5-20251001',
    timeout: 120,
);
</code></pre>
<p>å¦æä¸æ³åå»ºä¸é¨çç±»ï¼ä¹å¯ä»¥ç¨å¿å Agent å¿«éè°ç¨ï¼</p>
<pre><code class="language-php">use function Laravel\Ai\{agent};

$response = agent(
    instructions: 'You are an expert at software development.',
)-&gt;prompt('Tell me about Laravel');
</code></pre>
<h2 id="ç»æåè¾åº">ç»æåè¾åº</h2>
<p>Agent å¯ä»¥è¿åç»æåæ°æ®ï¼èä¸ä»ä»æ¯çº¯ææ¬ãå®ç° <code>HasStructuredOutput</code> æ¥å£ï¼å®ä¹ <code>schema()</code> æ¹æ³å³å¯ï¼</p>
<pre><code class="language-php">public function schema(JsonSchema $schema): array
{
    return [
        'feedback' =&gt; $schema-&gt;string()-&gt;required(),
        'score' =&gt; $schema-&gt;integer()-&gt;min(1)-&gt;max(10)-&gt;required(),
    ];
}
</code></pre>
<p>è°ç¨åç´æ¥å½æ°ç»ç¨ï¼</p>
<pre><code class="language-php">$response = (new SalesCoach)-&gt;prompt('åæè¿æ®µå½é³...');

return $response['score']; // 8
</code></pre>
<h2 id="å¯¹è¯è®°å¿">å¯¹è¯è®°å¿</h2>
<p>Agent æ¯æèªå¨æä¹åå¯¹è¯åå²ãä½¿ç¨ <code>RemembersConversations</code> trait åï¼SDK ä¼èªå¨å°å¯¹è¯å­å¥æ°æ®åºï¼åç»­å¯ä»¥éè¿ <code>continue()</code> æ¹æ³ç»§ç»­ä¹åçå¯¹è¯ï¼</p>
<pre><code class="language-php">// å¼å§æ°å¯¹è¯
$response = (new SalesCoach)-&gt;forUser($user)-&gt;prompt('ä½ å¥½ï¼');
$conversationId = $response-&gt;conversationId;

// ç»§ç»­å¯¹è¯
$response = (new SalesCoach)
    -&gt;continue($conversationId, as: $user)
    -&gt;prompt('æ¥çåæçè¯é¢...');
</code></pre>
<h2 id="å·¥å·ç³»ç»">å·¥å·ç³»ç»</h2>
<p>Agent å¯ä»¥ä½¿ç¨å·¥å·æ¥æ©å±è½åãéè¿ <code>make:tool</code> å½ä»¤åå»ºå·¥å·ç±»ï¼å®ä¹è¾å¥ schema å <code>handle()</code> æ¹æ³ï¼</p>
<pre><code class="language-php">class RandomNumberGenerator implements Tool
{
    public function description(): string
    {
        return 'çæå å¯å®å¨çéæºæ°ã';
    }

    public function handle(Request $request): string
    {
        return (string) random_int($request['min'], $request['max']);
    }

    public function schema(JsonSchema $schema): array
    {
        return [
            'min' =&gt; $schema-&gt;integer()-&gt;min(0)-&gt;required(),
            'max' =&gt; $schema-&gt;integer()-&gt;required(),
        ];
    }
}
</code></pre>
<p>SDK è¿åç½®äºå ä¸ªæå¡åçº§å«çå·¥å·ï¼</p>
<ul>
<li><strong>WebSearch</strong> â è®© Agent æç´¢ç½é¡µï¼æ¯æ AnthropicãOpenAIãGemini</li>
<li><strong>WebFetch</strong> â è®© Agent æåç½é¡µåå®¹ï¼æ¯æ AnthropicãGemini</li>
<li><strong>FileSearch</strong> â å¨åéå­å¨ä¸­æç´¢æä»¶ï¼æ¯æ OpenAIãGemini</li>
<li><strong>SimilaritySearch</strong> â åºäº Eloquent æ¨¡åçåéç¸ä¼¼åº¦æç´¢ï¼ç¨äº RAG åºæ¯</li>
</ul>
<h2 id="æµå¼ååºä¸å¹¿æ­">æµå¼ååºä¸å¹¿æ­</h2>
<p>å¯¹äºéè¦å®æ¶è¾åºçåºæ¯ï¼Agent æ¯ææµå¼ååºãè¿åå¼å¯ä»¥ç´æ¥ä½ä¸ºè·¯ç±ååºï¼èªå¨åé SSEï¼</p>
<pre><code class="language-php">Route::get('/coach', function () {
    return (new SalesCoach)-&gt;stream('åæè¿æ®µå½é³...');
});
</code></pre>
<p>æµå¼äºä»¶è¿å¯ä»¥éè¿ Laravel Broadcasting å¹¿æ­å°åç«¯é¢éï¼æèä½¿ç¨ Vercel AI SDK åè®®ä¸åç«¯æ¡æ¶å¯¹æ¥ï¼</p>
<pre><code class="language-php">return (new SalesCoach)
    -&gt;stream('åæè¿æ®µå½é³...')
    -&gt;usingVercelDataProtocol();
</code></pre>
<h2 id="éåå¤ç">éåå¤ç</h2>
<p>èæ¶ç AI è¯·æ±å¯ä»¥æ¨å¥éåå¨åå°å¤çï¼</p>
<pre><code class="language-php">(new SalesCoach)
    -&gt;queue($request-&gt;input('transcript'))
    -&gt;then(function (AgentResponse $response) {
        // å¤çååº...
    })
    -&gt;catch(function (Throwable $e) {
        // å¤çå¼å¸¸...
    });
</code></pre>
<h2 id="å¾åçæ">å¾åçæ</h2>
<p><code>Image</code> ç±»æä¾äºç®æ´çå¾åçææ¥å£ï¼æ¯æ OpenAIãGemini å xAIï¼</p>
<pre><code class="language-php">use Laravel\Ai\Image;

$image = Image::of('å¨æ¿å°é¢ä¸çççå')
    -&gt;quality('high')
    -&gt;landscape()
    -&gt;generate();

$path = $image-&gt;store();
</code></pre>
<p>æ¯æéå åèå¾åè¿è¡é£æ ¼è¿ç§»ï¼ä¹å¯ä»¥æ¨å¥éåå¼æ­¥çæã</p>
<h2 id="é³é¢ä¸è½¬å½">é³é¢ä¸è½¬å½</h2>
<p>è¯­é³åæï¼TTSï¼åè¯­é³è½¬å½ï¼STTï¼åæ ·è¢«çº³å¥ SDKï¼</p>
<pre><code class="language-php">use Laravel\Ai\Audio;
use Laravel\Ai\Transcription;

// æå­è½¬è¯­é³
$audio = Audio::of('I love coding with Laravel.')
    -&gt;female()
    -&gt;instructions('ç¨æµ·ççè¯­æ°è¯´')
    -&gt;generate();

// è¯­é³è½¬æå­
$transcript = Transcription::fromStorage('audio.mp3')
    -&gt;diarize() // æè¯´è¯äººåæ®µ
    -&gt;generate();
</code></pre>
<p>TTS æ¯æ OpenAI å ElevenLabsï¼STT åæ ·æ¯æè¿ä¸¤ä¸ªæå¡åã</p>
<h2 id="embeddings-ä¸åéæç´¢">Embeddings ä¸åéæç´¢</h2>
<p>çæåéåµå¥åå¾éå¸¸ç´è§ãLaravel ç <code>Stringable</code> ç±»æ°å¢äº <code>toEmbeddings()</code> æ¹æ³ï¼</p>
<pre><code class="language-php">$embeddings = Str::of('Napa Valley has great wine.')-&gt;toEmbeddings();
</code></pre>
<p>éå PostgreSQL ç pgvector æ©å±ï¼å¯ä»¥å¨æ°æ®åºä¸­ç´æ¥è¿è¡åéç¸ä¼¼åº¦æ¥è¯¢ï¼</p>
<pre><code class="language-php">$documents = Document::query()
    -&gt;whereVectorSimilarTo('embedding', 'çº³å¸è°·æå¥½çéåº')
    -&gt;limit(10)
    -&gt;get();
</code></pre>
<p>ä¼ å¥å­ç¬¦ä¸²æ¶ï¼Laravel ä¼èªå¨çæåµå¥åéåè¿è¡æ¥è¯¢ï¼ä¸éè¦æå¨å¤çãEmbedding è¿æ¯æç¼å­ï¼é¿åéå¤è°ç¨ APIã</p>
<h2 id="reranking">Reranking</h2>
<p>Reranking å¯ä»¥å¯¹æç´¢ç»ææè¯­ä¹ç¸å³æ§éæ°æåºï¼æ¯æ Cohere å Jinaï¼</p>
<pre><code class="language-php">$posts = Post::all()-&gt;rerank('body', 'Laravel æç¨');
</code></pre>
<p>è¿ä¸ªåè½ç´æ¥ä»¥ Collection å®çå½¢å¼æä¾ï¼å¯ä»¥å¯¹ Eloquent éåææå®å­æ®µåè¯­ä¹éæã</p>
<h2 id="æä»¶ä¸åéå­å¨">æä»¶ä¸åéå­å¨</h2>
<p>SDK æä¾äºæä»¶ç®¡çååéå­å¨çå®æ´æ¹æ¡ãæä»¶å¯ä»¥ä¸ä¼ å°æå¡åå­å¨ååå¤å¼ç¨ï¼åéå­å¨åç¨äº RAG åºæ¯ä¸çæä»¶æ£ç´¢ï¼</p>
<pre><code class="language-php">use Laravel\Ai\Files\Document;
use Laravel\Ai\Stores;

// ä¸ä¼ æä»¶
$stored = Document::fromPath('/path/to/report.pdf')-&gt;put();

// åå»ºåéå­å¨å¹¶æ·»å æä»¶
$store = Stores::create('ç¥è¯åº');
$store-&gt;add($stored);
</code></pre>
<h2 id="failover">Failover</h2>
<p>è°ç¨æ¶ä¼ å¥æå¡åæ°ç»ï¼SDK ä¼å¨ä¸»æå¡åä¸å¯ç¨æ¶èªå¨åæ¢å°å¤ç¨æå¡åï¼</p>
<pre><code class="language-php">$response = (new SalesCoach)-&gt;prompt(
    'åæè¿æ®µå½é³...',
    provider: ['openai', 'anthropic'],
);
</code></pre>
<h2 id="agent-éç½®">Agent éç½®</h2>
<p>Agent æ¯æéè¿ PHP Attribute éç½®åæ°ï¼åæ¬æå¤§æ­¥æ°ãæå¤§ token æ°ãæ¸©åº¦ãè¶æ¶æ¶é´ç­ï¼</p>
<pre><code class="language-php">#[MaxSteps(10)]
#[MaxTokens(4096)]
#[Provider('anthropic')]
#[Temperature(0.7)]
#[Timeout(120)]
class SalesCoach implements Agent
{
    use Promptable;
}
</code></pre>
<p><code>UseCheapestModel</code> å <code>UseSmartestModel</code> ä¸¤ä¸ª Attribute å¯ä»¥èªå¨éæ©æå¡åæä¾¿å®ææå¼ºçæ¨¡åï¼ä¸éè¦è®°å·ä½çæ¨¡ååã</p>
<h2 id="ä¸­é´ä»¶">ä¸­é´ä»¶</h2>
<p>Agent æ¯æä¸­é´ä»¶æºå¶ï¼å¯ä»¥å¨è¯·æ±åéååæå¥èªå®ä¹é»è¾ï¼æ¯å¦æ¥å¿è®°å½ï¼</p>
<pre><code class="language-php">class LogPrompts
{
    public function handle(AgentPrompt $prompt, Closure $next)
    {
        Log::info('Prompting agent', ['prompt' =&gt; $prompt-&gt;prompt]);

        return $next($prompt)-&gt;then(function (AgentResponse $response) {
            Log::info('Agent responded', ['text' =&gt; $response-&gt;text]);
        });
    }
}
</code></pre>
<h2 id="æµè¯æ¯æ">æµè¯æ¯æ</h2>
<p>SDK ä¸ºæ¯ä¸ªåè½é½æä¾äº <code>fake()</code> æ¹æ³åæ­è¨ APIï¼æµè¯æ¶ä¸éè¦çå®è°ç¨ AI æå¡åï¼</p>
<pre><code class="language-php">SalesCoach::fake(['ç¬¬ä¸æ¡ååº', 'ç¬¬äºæ¡ååº']);

// æ§è¡ä¸å¡é»è¾...

SalesCoach::assertPrompted('åæè¿æ®µ...');
SalesCoach::assertNeverPrompted();
</code></pre>
<p>å¾åãé³é¢ãè½¬å½ãEmbeddingsãRerankingãæä»¶æä½ãåéå­å¨é½æå¯¹åºç fake åæ­è¨æ¹æ³ã</p>
<h2 id="æå¡åæ¯æä¸è§">æå¡åæ¯æä¸è§</h2>
<table>
<thead>
<tr>
<th>åè½</th>
<th>æ¯æçæå¡å</th>
</tr>
</thead>
<tbody>
<tr>
<td>ææ¬å¯¹è¯</td>
<td>OpenAIãAnthropicãGeminiãGroqãxAI</td>
</tr>
<tr>
<td>å¾åçæ</td>
<td>OpenAIãGeminiãxAI</td>
</tr>
<tr>
<td>è¯­é³åæ</td>
<td>OpenAIãElevenLabs</td>
</tr>
<tr>
<td>è¯­é³è½¬å½</td>
<td>OpenAIãElevenLabs</td>
</tr>
<tr>
<td>åéåµå¥</td>
<td>OpenAIãGeminiãCohereãJina</td>
</tr>
<tr>
<td>éæåº</td>
<td>CohereãJina</td>
</tr>
<tr>
<td>æä»¶ç®¡ç</td>
<td>OpenAIãAnthropicãGemini</td>
</tr>
</tbody>
</table>
<h2 id="å°ç»">å°ç»</h2>
<p>Laravel AI SDK æ AI éæåæäº Laravel å¼åèçæçæ ·å­ï¼Artisan å½ä»¤çæç±»ãæ¥å£çº¦æè¡ä¸ºãtrait å¤ç¨é»è¾ãéåå¼æ­¥å¤çãfake æ¹æ³åæµè¯ãå¦æä½ ç Laravel é¡¹ç®éè¦æ¥å¥ AI è½åï¼è¿ä¸ªåå¼å¾å°è¯ã</p>
<p><a href="https://catchadmin.com/post/2026-02/laravel-ai-sdk-released" target="_blank" rel="noopener nofollow">ðLaravel AI SDK æ­£å¼åå¸</a></p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-06 08:23">2026-02-06 08:23</span>&nbsp;
<a href="https://www.cnblogs.com/catchadmin">JaguarJack</a>&nbsp;
éè¯»(<span id="post_view_count">7</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19582488);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19582488', targetLink: 'https://www.cnblogs.com/catchadmin/p/19582488', title: 'Laravel AI SDK æ­£å¼åå¸' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ .NET AI æ ¸å¿æå»ºåï¼éå¡æºè½åºç¨å¼åçæ¶æèå¼ä¸çæ ]]></title>
    <link>https://www.cnblogs.com/shanyou/p/19582324</link>
    <guid>35481c6bd5d742918076f6e2bb9b1ede</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/shanyou/p/19582324" title="åå¸äº 2026-02-06 07:30">
    <span role="heading" aria-level="2">.NET AI æ ¸å¿æå»ºåï¼éå¡æºè½åºç¨å¼åçæ¶æèå¼ä¸çæ</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        éç.NET 10 çæ­£å¼åå¸ï¼å¾®è½¯éè¿ä¸ç³»åæ·±æçèçæ¶æé©æ°ï¼å°äººå·¥æºè½ä»ä¸ç§éå çå¤é¨è½åï¼å½»åºè½¬åä¸º.NET çæç³»ç»ä¸­çä¸ç­å¬æ°ãè¿ä¸è½¬åçæ ¸å¿å¨äºæä¾ä¸å¥ç»ä¸ãç°ä»£ä¸é«æ§è½çæå»ºåï¼æ¨å¨è§£å³å¼åèå¨æå»ºæºè½åºç¨ç¨åºæ¶é¢ä¸´çç¢çå SDKãå¤æçç§ææ°æ®éæä»¥åæ¥çå¢é¿çæºè½ä½åï¼Agenticï¼éæ±
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>éç.NET 10 çæ­£å¼åå¸ï¼å¾®è½¯éè¿ä¸ç³»åæ·±æçèçæ¶æé©æ°ï¼å°äººå·¥æºè½ä»ä¸ç§éå çå¤é¨è½åï¼å½»åºè½¬åä¸º.NET çæç³»ç»ä¸­çä¸ç­å¬æ°ãè¿ä¸è½¬åçæ ¸å¿å¨äºæä¾ä¸å¥ç»ä¸ãç°ä»£ä¸é«æ§è½çæå»ºåï¼æ¨å¨è§£å³å¼åèå¨æå»ºæºè½åºç¨ç¨åºæ¶é¢ä¸´çç¢çå SDKãå¤æçç§ææ°æ®éæä»¥åæ¥çå¢é¿çæºè½ä½åï¼Agenticï¼éæ±ã.NETå¶æç¥å¸å±ä¸ä»æ¶µçäºçæå¼ AI çåºç¡æ¥å£æ åï¼è¿å»¶ä¼¸å°äºåéæ°æ®ç®¡çãå¤æºè½ä½åä½ç¼æä»¥åè·¨å¹³å°çåè®®äºæä½æ§ ã</p>
<h2 id="ç»ä¸çæå¼-ai-çåºç³microsoftextensionsai-çæ·±åº¦æ¼è¿"><strong>ç»ä¸çæå¼ AI çåºç³ï¼Microsoft.Extensions.AI çæ·±åº¦æ¼è¿</strong></h2>
<p>å¨çæå¼ AI çåçåæï¼å¼åèä¸å¾ä¸é¢å¯¹ä¸åå¤§åè¯­è¨æ¨¡åï¼LLMï¼ä¾åºåä¹é´è¿¥å¼çæ¥å¥æ åãæ è®ºæ¯ OpenAIãAzure OpenAIãGoogle Gemini è¿æ¯æ¬å°é¨ç½²ç Ollamaï¼æ¯ä¸ªå¹³å°é½æ¥æç¬ç«çèº«ä»½éªè¯æºå¶ãè¯·æ±åæ°ç»æåååºå¤çæµç¨ãè¿ç§ç¢çåç°ç¶ä¸ä»å¢å äºå¼åææ¬ï¼ä¹å¯¼è´äºåºç¨ä»£ç ä¸ç¹å®ä¾åºåçæ·±åº¦è¦åã</p>
<h3 id="ç»ä¸æ½è±¡ichatclient-ä¸æ¨¡åæ å³æ§"><strong>ç»ä¸æ½è±¡ï¼IChatClient ä¸æ¨¡åæ å³æ§</strong></h3>
<p>ä¸ºäºæç ´è¿ä¸åµå±ï¼Microsoft.Extensions.AIï¼ç®ç§° MEAIï¼å¼å¥äºä»¥ IChatClient ä¸ºæ ¸å¿çä¸å¥æ åæ¥å£ãè¿ä¸è®¾è®¡çå®è§ç®æ æ¯æä¾ä¸ä¸ªç±»ä¼¼äº.NET ä¸­ ILogger æ HttpClient çéç¨æ½è±¡å±ï¼ä½¿å¼åèè½å¤ç¼åä¸å·ä½æ¨¡åä¾åºåæ å³çä»£ç  ã</p>
<p>éè¿ IChatClient æ¥å£ï¼åºç¨ç¨åºå¯ä»¥æ ç¼åæ¢åç«¯æ¨¡åãä¾å¦ï¼å¨å¼åç¯å¢ä¸ï¼å¼åèå¯è½å¾åäºä½¿ç¨æ¬å°è¿è¡ç Ollama æ¨¡åä»¥èçææ¬å¹¶ç¡®ä¿éç§ï¼èå¨çäº§ç¯å¢ä¸ï¼åå¯ä»¥ä»éè¿ä¿®æ¹éç½®ï¼å°åºå±å®ç°æ¿æ¢ä¸ºé«æ§è½ç Azure OpenAI æå¡ãè¿ç§çµæ´»æ§æºäº MEAI å¯¹è¯·æ±åååºå¯¹è±¡çæ ååå¤çï¼å³ ChatOptions å ChatResponseã</p>
<table>
<thead>
<tr>
<th style="text-align: left">æ¥å£ä¸ç±»å</th>
<th style="text-align: left">æ ¸å¿èè´£</th>
<th style="text-align: left">ææ¯ä»·å¼</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">IChatClient</td>
<td style="text-align: left">æä¾ææ¬åå¤æ¨¡æäº¤äºçåºç¡æ¥å£ ã</td>
<td style="text-align: left">å®ç°æ¨¡åä¾åºåçè§£è¦ï¼æ¯æç­åæ¢ã</td>
</tr>
<tr>
<td style="text-align: left">ChatOptions</td>
<td style="text-align: left">å®ä¹æ¸©åº¦ï¼Temperatureï¼ãæå¤§ä»¤çï¼MaxTokensï¼ç­æ¨¡ååæ° ã</td>
<td style="text-align: left">è·¨æ¨¡åæ ååæ¨çè¡ä¸ºçå¾®è°ã</td>
</tr>
<tr>
<td style="text-align: left">ChatMessage</td>
<td style="text-align: left">å°è£ç¨æ·ãå©ææç³»ç»è§è²çæ¶æ¯åå®¹ã</td>
<td style="text-align: left">æä¾ä¸è´çå¯¹è¯åå²è¡¨ç¤ºæ¹å¼ã</td>
</tr>
<tr>
<td style="text-align: left">IEmbeddingGenerator</td>
<td style="text-align: left">è´è´£å°ææ¬æå¤æ¨¡ææ°æ®è½¬æ¢ä¸ºåéã</td>
<td style="text-align: left">ä¸ºè¯­ä¹æç´¢å RAG æ¨¡å¼æä¾æ ååéåæ¯æã</td>
</tr>
</tbody>
</table>
<h3 id="ä¸­é´ä»¶æ¨¡å¼ä¼ä¸çº§æ²»ççåå¥ç¹"><strong>ä¸­é´ä»¶æ¨¡å¼ï¼ä¼ä¸çº§æ²»ççåå¥ç¹</strong></h3>
<p>MEAI æ¶æä¸­æå·æ´å¯åçè®¾è®¡ä¹ä¸æ¯å¼å¥äºä¸ ASP.NET Core ç±»ä¼¼çä¸­é´ä»¶ï¼Middlewareï¼æ¨¡å¼ãä¼ ç»ç AI éæå¾å¾å°æ²»çé»è¾ï¼å¦å®å¨æ§æ£æ¥ãæ§è½çæ§ãææ¬æ§å¶ï¼ç¡¬ç¼ç å¨ä¸å¡é»è¾ä¸­ï¼è MEAI åè®¸å¼åèéè¿æ¦æªå¨æµæ°´çº¿æ¥éæå°æ³¨å¥è¿äºæ¨ªåå³æ³¨ç¹ã</p>
<p>ä¸­é´ä»¶çå­å¨ä½¿å¾ä¼ä¸è½å¤æå»ºä¸å¥å¥å£®ç AI æ²»çä½ç³»ãä¾å¦ï¼æ¶æåå®¹è¿æ»¤ä¸­é´ä»¶å¯ä»¥å¨æç¤ºè¯åéè³æ¨¡ååè¿è¡åè§æ§å®¡æ¥ï¼éæµä¸éé¢ä¸­é´ä»¶å¯ä»¥é²æ­¢åä¸ªç¨æ·æ¶èè¿å¤ç API ä»¤çï¼èåºäº Redis çç¼å­ä¸­é´ä»¶åå¯ä»¥å­å¨é«é¢é®é¢çåç­ï¼ä»èéä½æ¨çææ¬å¹¶æåååºéåº¦ã</p>
<p>æ­¤å¤ï¼MEAI æ·±åº¦éæäº OpenTelemetryï¼OTELï¼ï¼è¿æå³çå¼åèæ éé¢å¤éç½®å³å¯éè¿.NET Aspire æ Azure Monitor è§å¯å°æ¯ä¸æ¡ AI è°ç¨çè¯¦ç»é¾è·¯è½¨è¿¹ãè¿ç§âå¯è§æµæ§åç½®âå¯¹äºçäº§ç¯å¢ä¸ç AI æéææ¥åæ§è½ä¼åè³å³éè¦ï¼å®è½æ¸æ°å°å±ç¤ºåºæ¨¡åå»¶è¿åå¸ãä»¤çæ¶èç»è®¡ä»¥åæ¨çè¿ç¨ä¸­çä»»ä½å¼å¸¸ä¸­æ­ã</p>
<h3 id="ç»æåè¾åºä¸ç±»åå®å¨"><strong>ç»æåè¾åºä¸ç±»åå®å¨</strong></h3>
<p>å¨ä¼ ç»ç AI åºç¨å¼åä¸­ï¼å¤çæ¨¡åè¿åçéç»æåææ¬æ°æ®æ¯ä¸é¡¹åæ»¡ææçä»»å¡ãå¼åèéå¸¸éè¦ç¼åå¤§éçæ­£åè¡¨è¾¾å¼æä¸å¯é çå­ç¬¦ä¸²è§£æé»è¾ 11ãMEAI éè¿ GetResponseAsync&lt;T&gt; ç­æ©å±æ¹æ³ï¼æå¤§å°ç®åäºè¿ä¸æµç¨ã</p>
<p>è¯¥æºå¶åè®¸å¼åèå®ä¹ä¸ä¸ªæ®éç C# ç±»æè®°å½ï¼Recordï¼ï¼æ¡æ¶ä¼èªå¨æ ¹æ®è¯¥ç±»åçå®ä¹çæ JSON æ¶æï¼Schemaï¼ï¼å¹¶å°å¶ä½ä¸ºæç¤ºè¯çä¸é¨ååéç»æ¯æç»æåè¾åºçæ¨¡åãæ¨¡åçæç JSON ååºä¼è¢«èªå¨ååºååä¸º C# å¯¹è±¡ï¼ä»èä¿è¯äºä¸å¡é»è¾å¨å¤ç AI äº§åºæ¶çç±»åå®å¨æ§ãè¿ç§âä»£ç ä¼åâçæ¹æ³ä¸ä»æé«äºå¼åæçï¼è¿æ¾èå¢å¼ºäºèªå¨åå·¥ä½æµçç¨³å¥æ§ï¼é¿åäºå æ¨¡åè¾åºæ ¼å¼å¾®è°èå¯¼è´ççäº§æéã</p>
<h2 id="æ°æ®ä¸è¯­ä¹æç´¢çé©æ°microsoftextensionsvectordata"><strong>æ°æ®ä¸è¯­ä¹æç´¢çé©æ°ï¼Microsoft.Extensions.VectorData</strong></h2>
<p>çæå¼ AI çä¸ä¸ªæ¾èå±éæ§æ¯å¶ç¥è¯å­å¨æªæ­¢æ¥æï¼ä¸æ æ³ç´æ¥æç¥ç»ç»çç§ææ°æ®ãæ£ç´¢å¢å¼ºçæï¼RAGï¼å·²æä¸ºè§£å³è¿ä¸é®é¢çæ åèå¼ï¼èåéæ°æ®åºåæ¯ RAG æ¶æççµé­ãMicrosoft.Extensions.VectorData åºçæ¨åºï¼æ¨å¨ä¸º.NET å¼åèæä¾ä¸å¥ç»ä¸ä¸ç¬¦åç´è§çåéæä½æ½è±¡ã</p>
<h3 id="ç»ä¸åéå­å¨æ½è±¡å±"><strong>ç»ä¸åéå­å¨æ½è±¡å±</strong></h3>
<p>ä¸æ°æ®åºè®¿é®ä¸­ç ORM çå¿µç±»ä¼¼ï¼Microsoft.Extensions.VectorData å¹¶ä¸ç»å®äºç¹å®çåéæ°æ®åºå®ç°ãå®ä¸º Azure AI SearchãPineconeãMilvusãQdrant ä»¥å SQL Server çåéæ©å±æä¾äºä¸ä¸ªéç¨çç¼ç¨æ¨¡ãè¿ç§æ½è±¡ä½¿å¾å¼åèè½å¤ä»¥é¢åå¯¹è±¡çæ¹å¼ç®¡çåéæ°æ®ï¼èæ éæ·±å¥ç ç©¶æ¯ç§æ°æ®åºç¹å®ç APIã</p>
<p>æ¡æ¶éè¿ä¸ç»ç²¾å¿è®¾è®¡ç C# å±æ§ï¼Attributesï¼ï¼å°æ®éç POCO å¯¹è±¡æ å°å°åéæ°æ®åºç Schema ä¸­ã</p>
<table>
<thead>
<tr>
<th style="text-align: left">æ å°å±æ§</th>
<th style="text-align: left">æ ¸å¿åè½</th>
<th style="text-align: left">éç¨åºæ¯</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">`VectorStoreRecordKey`</td>
<td style="text-align: left">æ è®°è®°å½çå¯ä¸æ è¯ç¬¦ã</td>
<td style="text-align: left">ä¸»é®ç´¢å¼ä¸è®°å½æ´æ°ã</td>
</tr>
<tr>
<td style="text-align: left">`VectorStoreRecordData`</td>
<td style="text-align: left">æ è®°éè¦å­å¨çåæ°æ®ææ­£æåå®¹ ã</td>
<td style="text-align: left">å­å¨ä¾ RAG æ£ç´¢çåå§ä¸ä¸æã</td>
</tr>
<tr>
<td style="text-align: left">`VectorStoreRecordVector`</td>
<td style="text-align: left">æ è®°å­å¨åéåµå¥çå±æ§ ã</td>
<td style="text-align: left">å®ä¹åéç»´åº¦ãè·ç¦»å½æ°ï¼å¦ä½å¼¦ç¸ä¼¼åº¦ï¼ã</td>
</tr>
</tbody>
</table>
<h3 id="è¯­ä¹æç´¢çå®ç°æºå¶"><strong>è¯­ä¹æç´¢çå®ç°æºå¶</strong></h3>
<p>å¨.NET 10 çä½ç³»ä¸ï¼å®ç°è¯­ä¹æç´¢åå¾å¼å¸¸ç®æ´ãå¶æ ¸å¿é»è¾å¨äºå°ç¨æ·çèªç¶è¯­è¨æ¥è¯¢éè¿ IEmbeddingGenerator è½¬æ¢ä¸ºé«ç»´åéï¼ç¶åå©ç¨åéæ°æ®åºç VectorizedSearchAsync è½åè¿è¡ç¸ä¼¼åº¦å¹é ã</p>
<p>è¿ç§æç´¢æ¹å¼è¶è¶äºä¼ ç»å³é®å­å¹éçéå¶ãå³ä½¿æ¥è¯¢è¯ä¸ææ¡£ä¸­çè¯æ±æ²¡æéå ï¼åªè¦å¶è¯­ä¹æå¾ç¸è¿ï¼ä¾å¦âéåå®¶åº­è§çççµå½±âä¸âè¿ªå£«å°¼ç»å¸å¨ç»âï¼ï¼åéæ£ç´¢ç³»ç»å°±è½ç²¾åå°å¬åç¸å³è®°å½ãå¨å¾®è½¯æä¾ç eShop æ¼ç¤ºé¡¹ç®ä¸­ï¼è¿ç§è½åè¢«ç¨äºæåååæç´¢çé²æ£æ§ï¼ææè§£å³äºç¨æ·æ¼åéè¯¯ãä½¿ç¨è¿ä¹è¯ææè¿°æ§è¯­è¨æç´¢ååçé®é¢ ã</p>
<h2 id="ä»èå¤©å°æºè½ä½microsoft-agent-framework-ä¸å¤æºè½ä½ç¼æ"><strong>ä»èå¤©å°æºè½ä½ï¼Microsoft Agent Framework ä¸å¤æºè½ä½ç¼æ</strong></h2>
<p>éç AI åºç¨ä»ç®åçé®ç­æ¼åä¸ºå·å¤èªä¸»è¡å¨è½åçæºè½ä½ç³»ç»ï¼å¼åèéè¦æ´å å¼ºå¤§çç¼ææ¡æ¶ ãå¾®è½¯æºè½ä½æ¡æ¶ï¼Microsoft Agent Frameworkï¼ç®ç§° MAFï¼åºè¿èçï¼å®æ å¿çå¾®è½¯å¨æºè½ä½åï¼Agenticï¼å¼åé¢åè¿åºäºå³é®ä¸æ­¥ã</p>
<h3 id="æ¡æ¶å®ä½ä¸ä¼ æ¿"><strong>æ¡æ¶å®ä½ä¸ä¼ æ¿</strong></h3>
<p>MAF æ¯å¯¹ Semantic Kernelï¼è¯­ä¹åæ ¸ï¼å AutoGen é¡¹ç®ç»éªçéå¤§æèãå®ä¿çäº Semantic Kernel å¨ä¼ä¸çº§ç¶æç®¡çãä¼è¯æä¹ååé¥æµæ¹é¢çä¸¥è°¨æ§ï¼åæ¶å¼å¥äº AutoGen å¹¿åèµèªçå¤æºè½ä½åä½æ¨¡å¼åçµæ´»çå¯¹è¯ææã</p>
<p>å¨ MAF çè§è§ä¸ï¼âæºè½ä½âä¸ä»ä»æ¯ä¸ä¸ª LLMï¼èæ¯ä¸ä¸ªæ¥æèº«ä»½ï¼Identityï¼ãæä»¤ï¼Instructionsï¼ãå·¥å·ï¼Toolsï¼åè®°å¿ï¼Memoryï¼çèªæ²»å®ä½ãæºè½ä½è½å¤éè¿è°ç¨å¤é¨å½æ°ãè®¿é®æ°æ®åºææä½ç¹å®åè®®ï¼å¦ MCPï¼æ¥ä¸»å¨æ¹åç³»ç»ç¶æã</p>
<h3 id="åºäºå¾çå·¥ä½æµç¼æ"><strong>åºäºå¾çå·¥ä½æµç¼æ</strong></h3>
<p>MAF çä¸å¤§äº®ç¹æ¯å¼å¥äºåºäºå¾ï¼Graph-basedï¼çå·¥ä½æµç¼æç³»ç»ãå®åè®¸å¼åèæ¾å¼å®ä¹å¤æºè½ä½åä½çé»è¾è·¯å¾ï¼èä¸åä»ä»ä¾èµäº LLM æ¨¡ç³çèªæå³ç­ã</p>
<table>
<thead>
<tr>
<th style="text-align: left">åä½æ¨¡å¼</th>
<th style="text-align: left">è¿ä½é»è¾</th>
<th style="text-align: left">åºç¨åºæ¯ç¤ºä¾</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left"><strong>é¡ºåºæ¨¡å¼ (Sequential)</strong></td>
<td style="text-align: left">æºè½ä½æåºå®åºåæ§è¡ï¼åèçäº§åºä½ä¸ºåèçè¾å¥ã</td>
<td style="text-align: left">åå®¹çäº§çº¿ï¼ç ç©¶è -&gt; æ°ç¨¿è -&gt; æ ¡å¯¹èã</td>
</tr>
<tr>
<td style="text-align: left"><strong>å¹¶åæ¨¡å¼ (Concurrent)</strong></td>
<td style="text-align: left">å¤ä¸ªæºè½ä½å¹¶è¡å¤çä»»å¡çä¸åä¾§é¢ï¼æåæ±æ»ç»æã</td>
<td style="text-align: left">è½¯ä»¶æµè¯ï¼åè½æµè¯æºè½ä½ä¸æ§è½æµè¯æºè½ä½åæ­¥è¿è¡ã</td>
</tr>
<tr>
<td style="text-align: left"><strong>äº¤æ¥æ¨¡å¼ (Handoff)</strong></td>
<td style="text-align: left">æ ¹æ®å¯¹è¯ä¸ä¸æï¼å¨æå°å°æ§å¶æè½¬ç§»ç»æ´ä¸ä¸çæºè½ä½ ã</td>
<td style="text-align: left">å®¢æç³»ç»ï¼åç±»æºè½ä½ -&gt; è´¢å¡ä¸å®¶æºè½ä½æææ¯æ¯ææºè½ä½ã</td>
</tr>
<tr>
<td style="text-align: left"><strong>ç£æ§æ¨¡å¼ (Magentic)</strong></td>
<td style="text-align: left">æºè½ä½åºäºç¹å®çææç»æèªä¸»è¿è¡å¤è½®è®¨è®ºã</td>
<td style="text-align: left">å¤æé®é¢çå¤´èé£æ´ä¸å³ç­åæã</td>
</tr>
</tbody>
</table>
<p>MAF è¿ç¹å«å¼ºè°äºâäººæºååâï¼Human-in-the-loopï¼çéè¦æ§ï¼æ¯æå¨å·¥ä½æµçå³é®èç¹è®¾ç½®æ£æ¥ç¹ï¼Checkpointingï¼ï¼åè®¸æåæ§è¡ä»¥å¾äººå·¥å®¡æ¹æå¹²é¢ï¼è¿å¯¹äºå¤çéèäº¤æãä»£ç é¨ç½²ç­é«é£é©ä»»å¡è³å³éè¦ã</p>
<h2 id="äºæä½æ§çæ°æ åæ¨¡åä¸ä¸æåè®®-mcp"><strong>äºæä½æ§çæ°æ åï¼æ¨¡åä¸ä¸æåè®® (MCP)</strong></h2>
<p>å¨æå»ºå¤æç AI æä»¶åå·¥å·éææ¶ï¼å¼åèé¿æåå°äºâæ¯éæä¸ä¸ªæ°å·¥å·å°±éè¦ç¼åä¸å¥æ°ééå¨âçå°å¢ãæ¨¡åä¸ä¸æåè®®ï¼Model Context Protocolï¼ç®ç§° MCPï¼çåºç°ï¼è¢«ä¸åå½¢è±¡å°æ¯å»ä¸º AI æ¶ä»£çâUSB-C æ¥å£â ã</p>
<h3 id="mcp-çæ¶æä¸ä»·å¼"><strong>MCP çæ¶æä¸ä»·å¼</strong></h3>
<p>MCP æ¯ç±å¾®è½¯ä¸ Anthropic å±åæ¨å¨çå¼æ¾åè®®ï¼æ¨å¨æ åå AI æ¨¡åä¸å¤é¨æ°æ®æºãå·¥å·éä¹é´çäº¤äºæ¹å¼ 5ãå¨.NET çæä¸­ï¼å®æ¹åå¸ç MCP C# SDK è®©å¼åèè½å¤ä»¥æä½çææ¬æå»ºç¬¦åè§èç MCP å®¢æ·ç«¯ä¸æå¡å¨ã</p>
<p>è¯¥åè®®çæ ¸å¿ä¼å¿å¨äºå¶ä¾åºåä¸­ç«æ§ ãä¸æ¦å¼åèæå»ºäºä¸ä¸ªå¬å¼ç»ç»åé¨ææ¡£ãæ°æ®åºææä½é»è¾ç MCP æå¡å¨ï¼ä»»ä½æ¯æ MCP çæºè½ä½ï¼å¦ Visual Studio ç GitHub CopilotãClaude ææ¯å¼åèèªå»ºçæºè½ä½ï¼é½å¯ä»¥ç«å³ä¸å¶éä¿¡ï¼æ éè¿è¡äºæ¬¡å¼å ã</p>
<h3 id="åè®®åè¯­èµæºå·¥å·ä¸æç¤ºè¯"><strong>åè®®åè¯­ï¼èµæºãå·¥å·ä¸æç¤ºè¯</strong></h3>
<p>MCP åè®®å®ä¹äºä¸ç»ç®æ´èå¼ºå¤§çåè¯­ï¼éè¿ JSON-RPC è¿è¡éä¿¡ã</p>
<ul>
<li><strong>èµæº (Resources):</strong> æä¾åªè¯»çä¸ä¸ææ°æ®ï¼å¦æ°æ®åºè¡ãæ¬å°æä»¶åå®¹æå®æ¶æ¥å¿æµã</li>
<li><strong>å·¥å· (Tools):</strong> æ¨¡åå¯ä»¥è°ç¨çå·æå¯ä½ç¨çæä½å½æ°ï¼å¦âåå»º Jira å·¥åâãâåé Slack æ¶æ¯âæâéå¯æå¡å¨âã</li>
<li><strong>æç¤ºè¯ (Prompts):</strong> æå¡å¨æç®¡çé¢å®ä¹æ¨¡æ¿ï¼å¸®å©å®¢æ·ç«¯ä»¥æä¼åçæ¹å¼å©ç¨æå¡å¨æä¾çè½åã</li>
</ul>
<p>å¨ä¼ä¸çº§é¨ç½²ä¸­ï¼MCP æå¡å¨å¯ä»¥è¢«èµäºä¸¥æ ¼ç OAuth 2.1 å®å¨è¾¹çåæä»¶ç³»ç»æ²ç®±ï¼ç¡®ä¿ AI æºè½ä½å¨âè½å¹²æ´»âçåæ¶ä¸ä¼é¾è¶å®å¨åºçº¿ ãç®åï¼Visual Studio 2026 å·²å° MCP ä½ä¸ºå¶ AI æ²»ççæ ¸å¿ï¼æ¯æå¯¹ MCP æå¡å¨çèº«ä»½è¯å«åç­ç¥æ§å¶ã</p>
<h2 id="æ°æ®æåçç°ä»£ådata-ingestion-building-blocks"><strong>æ°æ®æåçç°ä»£åï¼Data Ingestion Building Blocks</strong></h2>
<p>é«æç RAG ç³»ç»ä¸ä»åå³äºæ¨çé¶æ®µçç®æ³ï¼æ´åå³äºé«è´¨éçç¦»çº¿æ°æ®æåæµç¨ãå¾®è½¯åå¸çâæ°æ®æåæå»ºåâï¼Data Ingestion Building Blocksï¼éè¿æ ååç ETL æµç¨ï¼è§£å³äºæ°æ®ç¢çåçé®é¢ ã</p>
<h3 id="etl-ç-ai-åè½¬å"><strong>ETL ç AI åè½¬å</strong></h3>
<p>è¿å¥æå»ºåå°ä¼ ç»çæ°æ®å¤çæ½è±¡ä¸ºä¸ä¸ªå³é®é¶æ®µï¼å¹¶æä¾äºä¸å¥æµå¼ API æ¥ç®åç¼æ ã</p>
<ol>
<li><strong>æå (Extract):</strong> IngestionDocumentReader å°å¤ç§æ ¼å¼ï¼PDFãWordãMarkdownï¼ç»ä¸è½¬åä¸ºåé¨æ ååè¡¨ç¤º ã</li>
<li><strong>è½¬æ¢ (Transform):</strong> åå«ææ¡£çº§åååçº§çå¤çãä¾å¦ï¼å©ç¨ AI å¯¹ææ¡£ä¸­çå¾åçææ¿ä»£ææ¬ï¼Alt Textï¼ï¼ææ¯å°é¿ææ¡£åå²ä¸ºç¬¦åæ¨¡åçªå£éå¶çè¯­ä¹åï¼Chunksï¼ã</li>
<li><strong>å è½½ (Load):</strong> VectorStoreWriter å°å¤çåçæ°æ®ååå¶å¯¹åºçåéåµå¥å­å¨å°æå®çåéæ°æ®åºä¸­ ã</li>
</ol>
<p>è¿ç§å·¥ç¨åçæ¹æ³æå¤§å°åå°äºå¼åèå¨æå»º RAG ç®¡éæ¶çéå¤æ§å³å¨ï¼ä½¿ä»ä»¬è½å¤æ´ä¸æ³¨äºå¦ä½éè¿æ´å¥½çååç­ç¥æè¯­ä¹å¢å¼ºæ¥æåæ£ç´¢çç²¾åº¦ ã</p>
<h2 id="åºå±æ§è½æ¯æsystemnumericstensors-ä¸ç¡¬ä»¶å é"><strong>åºå±æ§è½æ¯æï¼System.Numerics.Tensors ä¸ç¡¬ä»¶å é</strong></h2>
<p>ä¸ºäºç¡®ä¿.NET å¨ AI æ¶ä»£çç«äºåï¼å¾®è½¯å¯¹åºå±æ°å¼è®¡ç®è½åè¿è¡äºæ·±åº¦éæãSystem.Numerics.Tensors åºçæ´æ°ï¼æ å¿ç.NET å·å¤äºå¤çå¤§è§æ¨¡é«ç»´æ°æ®çåçé«æ§è½æ¯æ ã</p>
<h3 id="simd-é©±å¨çåéè¿ç®"><strong>SIMD é©±å¨çåéè¿ç®</strong></h3>
<p>AI æ¨¡åçæ ¸å¿æ¯å¼ éï¼Tensorsï¼ååéè¿ç® ãå¨.NET 10 ä¸­ï¼TensorPrimitives ç±»å©ç¨åæä»¤å¤æ°æ®ï¼SIMDï¼ææ¯ï¼åååæ¦¨ç°ä»£ CPU çç¡¬ä»¶æ½å ãæ è®ºæ¯ä½å¼¦ç¸ä¼¼åº¦è®¡ç®ãåéç¹ç§¯è¿æ¯å½ä¸åæä½ï¼ç°å¨é½è½ä»¥æ¥è¿ C++ çåçæ§è½è¿è¡ ã</p>
<p><img src="https://img2024.cnblogs.com/blog/510/202602/510-20260206072935765-504222877.png" alt="" loading="lazy"><br>
éè¿å¨è¿è¡æ¶èªå¨éæ©æä¼çæä»¤éï¼å¦ AVX-512ãAVX2 æ ARM NEONï¼ï¼.NET è½å¤ç¡®ä¿å¨ä¸åç¡¬ä»¶æ¶æä¸é½è½è·å¾æä½³çæ¨çéåº¦ ã</p>
<h3 id="åå­ç®¡çä¸æ°æ§åæ¢"><strong>åå­ç®¡çä¸æ°æ§åæ¢</strong></h3>
<p>å¤çå¤§ååµå¥æ¨¡åæ¶ï¼åå­å¸¦å®½å¾å¾æä¸ºç¶é¢ãSystem.Numerics.Tensors å¼å¥äºâè§å¾âï¼Viewsï¼åâæ°æ§åæ¢âï¼Lazy Transformationsï¼çæ¦å¿µ ãä¾å¦ï¼å¯¹ä¸ä¸ªåå«æ°ç¾ä¸ä¸ªåç´ çå¼ éè¿è¡åçæè½¬ç½®æä½æ¶ï¼æ¡æ¶ä¸ååå»ºæè´µçåå­å¯æ¬ï¼èæ¯è¿åä¸ä¸ªæååå§åå­çæ°è§å¾ ãè¿ç§æè´çåå­æçå¯¹äºå¨åéç¯å¢ä¸ï¼å¦è¾¹ç¼è®¡ç®æé«å¹¶åæå¡å¨ï¼è¿è¡ AI é»è¾è³å³éè¦ã</p>
<h2 id="è¡ä¸è¶å¿ä¸å¼åèçæ2025-2026-æ·±åº¦è§å¯"><strong>è¡ä¸è¶å¿ä¸å¼åèçæï¼2025-2026 æ·±åº¦è§å¯</strong></h2>
<p>.NET AI æå»ºåçåå¸å¹¶éå­¤ç«äºä»¶ï¼å®æ·±æ·±æ¤æ ¹äºå¨çå¼åèçæçå§çåè¿ä¸­ã</p>
<h3 id="çäº§åé£è·ä¸èä¸éå¡"><strong>çäº§åé£è·ä¸èä¸éå¡</strong></h3>
<p>æ ¹æ® 2025 å¹´ JetBrains å Stack Overflow çèåè°æ¥ï¼AI å·²ä¸åæ¯å¯éæè½ï¼èæ¯æä¸ºå¼åèæ¥å¸¸å·¥ä½çæ ¸å¿å·¥å·ã</p>
<ul>
<li><strong>æ®åç:</strong> 85% çåè®¿å¼åèå®æä½¿ç¨ AI è¾å©å¼åï¼51% çä¸ä¸å¼åèæ¯å¤©é½ä¼ä¸å¶åä½ ã</li>
<li><strong>æçæ¶ç:</strong> è¿ 90% çå¼åèæ¯å¨è³å°èç 1 å°æ¶ï¼äºåä¹ä¸çå¼åèæ¯å¨è½èç 8 å°æ¶çè³æ´å¤ï¼è¿ç¸å½äºæ¯å¨èçåºäºä¸ä¸ªå®æ´çå·¥ä½æ¥ ã</li>
<li><strong>å³é®åºç¨ç¹:</strong> å¼åèæä¹æäº¤ç» AI çä»»å¡æ¯ç¼åæ ·æ¿ä»£ç ãçæææ¡£åæ»ç»ä»£ç åæ´ï¼PR Summaryï¼ ã</li>
</ul>
<p>ç¶èï¼è¿ç§ä¾èµä¹å¸¦æ¥äºæ°çé£é©ãçº¦ 46% çå¼åèå¯¹ AI è¾åºçåç¡®æ§è¡¨ç¤ºæå¿§ï¼ç¹å«æ¯é«çº§å¼åèå¨é¢å¯¹å¤æé»è¾æ¶è¡¨ç°åºäºæé«çè°¨æåº¦ 34ãè¿ç§âè¿ä¹æ­£ç¡®ä½å¹¶ä¸å®å¨æ­£ç¡®âç AI è§£æ³ï¼å·²æä¸ºç®åå¼åæµç¨ä¸­æå¤§çç¶é¢ä¹ä¸ ã</p>
<h3 id="å¨ç-ai-é¸¿æ²ä¸å¼æºæ¨¡åçå´èµ·"><strong>å¨ç AI é¸¿æ²ä¸å¼æºæ¨¡åçå´èµ·</strong></h3>
<p>2025 å¹´ä¸åå¹´çå¨ç AI éç¨æ¥åæ¾ç¤ºï¼AI çæ®ååç°åºææ¾çå°åºä¸åè¡¡æ§ã</p>
<table>
<thead>
<tr>
<th style="text-align: left">ææ </th>
<th style="text-align: left">å¨çåæ¹ (Global North)</th>
<th style="text-align: left">å¨çåæ¹ (Global South)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">å³å¨äººå£éç¨ç</td>
<td style="text-align: left">24.7%</td>
<td style="text-align: left">14.1%</td>
</tr>
<tr>
<td style="text-align: left">å¢é¿éåº¦</td>
<td style="text-align: left">çº¦å¨çåæ¹ä¸¤å</td>
<td style="text-align: left">ç¸å¯¹æ»å</td>
</tr>
</tbody>
</table>
<p>å¨è¿ä¸èæ¯ä¸ï¼ä»¥ DeepSeek ä¸ºä»£è¡¨çå¼æºæ¨¡åï¼Open-source Modelsï¼æ­£å¨æ¹åæ¸¸æè§åãéè¿æä¾å®å¨åè´¹ä¸éç¨ MIT åè®®çæ¨¡åï¼è¿äºå¹³å°æç ´äºä¼ ç»é­æºæ¨¡åä¾åºåè®¾ç½®çè´¢å¡åææ¯å£åãè¿ç§è¶å¿ä¸ä»å¨éæ´²ç­å¸åºå¼åäºå¼ºçååï¼ä¹ä¿ä½¿å¾®è½¯ç­å¤§åéè¿ Microsoft.Extensions.AI å éå¯¹åç±»å¼æºæ¨¡åçæ¯æï¼ä»¥ç¡®ä¿å¼åèè½å¤çµæ´»åºå¯¹å°ç¼æ¿æ²»åä¾åºé¾çååã</p>
<h2 id="æ»ç»ä¸æªæ¥å±æè¿åæºè½ä½åççå¼åæ¶ä»£"><strong>æ»ç»ä¸æªæ¥å±æï¼è¿åâæºè½ä½åçâçå¼åæ¶ä»£</strong></h2>
<p>.NET 10 æç¡®ç«ç AI æ ¸å¿æå»ºåï¼æ å¿çè½¯ä»¶å¼åèå¼çæ ¹æ¬æ§è½¬åãä» Microsoft.Extensions.AI çç»ä¸æ½è±¡ï¼å° Microsoft.Extensions.VectorData çè¯­ä¹æç´¢ï¼åå° Microsoft Agent Framework çå¤æºè½ä½åä½ï¼å¾®è½¯æ­£å¨ä¸ºå¼åèæå»ºä¸ä¸ªæ ååãé«æ§è½ä¸æ²»çåå¥½çå¨æ  AI å·¥å·ç®± ã</p>
<p>éç.NET 11 è·¯æ çæ¸æ°åï¼æä»¬å¯ä»¥é¢è§å° Visual Studio å°ä¸ä»ä»æ¯ä¸ä¸ªä»£ç ç¼è¾å¨ï¼èæ¯ä¸ä¸ªç±âè§åæºè½ä½âãâè°è¯æºè½ä½âåâæµè¯æºè½ä½âç»æçæºè½åä½ä¸­å¿ãéè¿ MCP åè®®ï¼å¼åèçç§æå·¥å·åæ°æ®å°ä¸è¿äºæºè½ä½æ ç¼è¿æ¥ï¼çæ­£å®ç°âä»£ç èªæâåâéæ±å°ä»£ç âçé«æè½¬å ã</p>
<p>å¯¹äºä¼ä¸èè¨ï¼è¿æå³çè½å¤ä»¥æ´ä½çææ¬ãæ´é«çå®å¨æ§æå»ºå·ææ·±ååç´é¢åç¥è¯çæºè½åºç¨ãå¯¹äºå¼åèèè¨ï¼è½ç¶ AI è¾å©å·¥å·æå¤§å°åè½»äºç¹çå³å¨ï¼ä½åæ¶ä¹å¯¹æ¶æè®¾è®¡ãæç¤ºè¯å·¥ç¨ï¼Prompt Engineeringï¼ä»¥åå¯¹ AI è¾åºçå®¡æææ§æåºäºæ´é«çè¦æ±ãå¨è¿ä¸ªâæºè½ä½åçâçæ°æ¶ä»£ï¼.NET çæç³»ç»æ çå·²åå¥½äºåè¶³çåå¤ï¼ä¸ºæºè½è½¯ä»¶çæ éå¯è½æä¾åå®çåºç³ã</p>
<h4 id="å¼ç¨çæç« "><strong>å¼ç¨çæç« </strong></h4>
<ol>
<li>NET AI Essentials - The Core Building Blocks Explained - Microsoft Dev Blogs, <a href="https://devblogs.microsoft.com/dotnet/dotnet-ai-essentials-the-core-building-blocks-explained/" target="_blank" rel="noopener nofollow">https://devblogs.microsoft.com/dotnet/dotnet-ai-essentials-the-core-building-blocks-explained/</a></li>
<li>Bridging the Gap: Microsoft.Extensions.AI vs. Semantic Kernel - Medium <a href="https://medium.com/@monsterking10/bridging-the-gap-microsoft-extensions-ai-vs-semantic-kernel-b4e332105181" target="_blank" rel="noopener nofollow">https://medium.com/@monsterking10/bridging-the-gap-microsoft-extensions-ai-vs-semantic-kernel-b4e332105181</a></li>
<li>Semantic Kernel and Microsoft.Extensions.AI: Better Together, Part 1 ..., <a href="https://devblogs.microsoft.com/semantic-kernel/semantic-kernel-and-microsoft-extensions-ai-better-together-part-1/" target="_blank" rel="noopener nofollow">https://devblogs.microsoft.com/semantic-kernel/semantic-kernel-and-microsoft-extensions-ai-better-together-part-1/</a></li>
<li>Semantic Kernel and Microsoft.Extensions.AI: Better Together, Part 2 <a href="https://devblogs.microsoft.com/semantic-kernel/semantic-kernel-and-microsoft-extensions-ai-better-together-part-2/" target="_blank" rel="noopener nofollow">https://devblogs.microsoft.com/semantic-kernel/semantic-kernel-and-microsoft-extensions-ai-better-together-part-2/</a></li>
<li>Introducing Microsoft Agent Framework | Microsoft Azure Blog <a href="https://azure.microsoft.com/en-us/blog/introducing-microsoft-agent-framework/" target="_blank" rel="noopener nofollow">https://azure.microsoft.com/en-us/blog/introducing-microsoft-agent-framework/</a></li>
<li>eShop infused with AI - a comprehensive intelligent app sample  <a href="https://devblogs.microsoft.com/dotnet/e-shop-infused-with-ai-comprehensive-intelligent-dotnet-app-sample/" target="_blank" rel="noopener nofollow">https://devblogs.microsoft.com/dotnet/e-shop-infused-with-ai-comprehensive-intelligent-dotnet-app-sample/</a></li>
<li>Exploring How to Produce Structured Output with AI Agents | by Sai Nitesh Palamakula,  <a href="https://medium.com/@sainitesh/exploring-how-to-produce-structured-output-with-ai-agents-5d35a0b0d195" target="_blank" rel="noopener nofollow">https://medium.com/@sainitesh/exploring-how-to-produce-structured-output-with-ai-agents-5d35a0b0d195</a></li>
<li><a href="https://learn.microsoft.com/en-us/agent-framework/tutorials/agents/structured-output" target="_blank" rel="noopener nofollow">https://learn.microsoft.com/en-us/agent-framework/tutorials/agents/structured-output</a></li>
<li>Introducing Data Ingestion Building Blocks (Preview) - .NET Blog,  <a href="https://devblogs.microsoft.com/dotnet/introducing-data-ingestion-building-blocks-preview/" target="_blank" rel="noopener nofollow">https://devblogs.microsoft.com/dotnet/introducing-data-ingestion-building-blocks-preview/</a></li>
<li>Introducing Microsoft.Extensions.VectorData Preview - .NET Blog, <a href="https://devblogs.microsoft.com/dotnet/introducing-microsoft-extensions-vector-data/" target="_blank" rel="noopener nofollow">https://devblogs.microsoft.com/dotnet/introducing-microsoft-extensions-vector-data/</a></li>
<li>Semantic Search in 50 Lines of Code â AI in .NET | by Stefan ÄokiÄ | Medium <a href="https://medium.com/@thecodeman/semantic-search-in-50-lines-of-code-ai-in-net-f6bd98b6e92b" target="_blank" rel="noopener nofollow">https://medium.com/@thecodeman/semantic-search-in-50-lines-of-code-ai-in-net-f6bd98b6e92b</a></li>
<li>Top Tech Trends of 2025: AI-powered everything - Capgemini,  <a href="https://www.capgemini.com/wp-content/uploads/2025/01/Top-Tech-Trends-2025_Report.pdf" target="_blank" rel="noopener nofollow">https://www.capgemini.com/wp-content/uploads/2025/01/Top-Tech-Trends-2025_Report.pdf</a></li>
<li>MCP Deep Dive (Part 1): Building the Hands and Eyes of an AI Agent in C# | by Alon Fliess  <a href="https://medium.com/@alonfliess/mcp-deep-dive-part-1-building-the-hands-and-eyes-of-an-ai-agent-in-c-b26e71ebe102" target="_blank" rel="noopener nofollow">https://medium.com/@alonfliess/mcp-deep-dive-part-1-building-the-hands-and-eyes-of-an-ai-agent-in-c-b26e71ebe102</a></li>
<li>Roadmap for AI in Visual Studio (November) - Microsoft Dev Blogs, <a href="https://devblogs.microsoft.com/visualstudio/roadmap-for-ai-in-visual-studio-november/" target="_blank" rel="noopener nofollow">https://devblogs.microsoft.com/visualstudio/roadmap-for-ai-in-visual-studio-november/</a></li>
<li>In-depth: Tensors, ndarrays for .NET in C# - Numerics.NET,   <a href="https://numerics.net/documentation/in-depth-tensors" target="_blank" rel="noopener nofollow">https://numerics.net/documentation/in-depth-tensors</a></li>
<li>A generic tensor library for .NET | AntÃ£o Almada's Blog  <a href="https://aalmada.github.io/posts/A-generic-tensor-library-for-dotnet/" target="_blank" rel="noopener nofollow">https://aalmada.github.io/posts/A-generic-tensor-library-for-dotnet/</a></li>
<li>The State of Developer Ecosystem 2025: Coding in the Age of AI, New Productivity Metrics, and Changing Realities - The JetBrains Blog <a href="https://blog.jetbrains.com/research/2025/10/state-of-developer-ecosystem-2025/" target="_blank" rel="noopener nofollow">https://blog.jetbrains.com/research/2025/10/state-of-developer-ecosystem-2025</a></li>
<li>2025: io.net Year in Review <a href="https://io.net/blog/2025-io-net-year-in-review" target="_blank" rel="noopener nofollow">https://io.net/blog/2025-io-net-year-in-review</a></li>
</ol>


</div>
<div id="MySignature" role="contentinfo">
    <p>æ¬¢è¿å¤§å®¶æ«æä¸é¢äºç»´ç æä¸ºæçå®¢æ·ï¼æ¶ä½ ä¸äº</p>
<img src="https://images.cnblogs.com/cnblogs_com/shanyou/57459/o_220125090408_%E9%82%80%E8%AF%B7%E4%BA%8C%E7%BB%B4%E7%A0%81-258px.jpeg" width="170">
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.003472222222222222" data-date-updated="2026-02-06 07:35">2026-02-06 07:30</span>&nbsp;
<a href="https://www.cnblogs.com/shanyou">å¼ åå</a>&nbsp;
éè¯»(<span id="post_view_count">23</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19582324);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19582324', targetLink: 'https://www.cnblogs.com/shanyou/p/19582324', title: '.NET AI æ ¸å¿æå»ºåï¼éå¡æºè½åºç¨å¼åçæ¶æèå¼ä¸çæ' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ LLVMçæ··æ·ä¹æ(äº)-æå¨å®ç°æ§å¶æµå¹³å¦åæ··æ· ]]></title>
    <link>https://www.cnblogs.com/ClownLMe/p/19581710</link>
    <guid>1a2c5ccfa22b6fbf379f9e820c5c7466</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ClownLMe/p/19581710" title="åå¸äº 2026-02-05 22:54">
    <span role="heading" aria-level="2">LLVMçæ··æ·ä¹æ(äº)-æå¨å®ç°æ§å¶æµå¹³å¦åæ··æ·</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="ç®ä»">ç®ä»</h1>
<p>ä¹åçæå­¦ä¸­ï¼ç®åçæ¼ç¤ºäºLLVMçåºæ¬ç¨æ³ï¼ä¸é¢ï¼å±ç¤ºä¸ä¸ªå®æé¡¹ç®ã</p>
<h1 id="ç¼è¯ç®æ ">ç¼è¯ç®æ </h1>
<p>æ¬æ¬¡çå®éªç¼è¯æ ·ä¾æ¯ä¸é¢å¤æ­æ­£æ°ï¼è´æ°ï¼åé¶çä»£ç </p>
<pre><code class="language-c">#include &lt;stdio.h&gt;

int main() {
    int a = 9;
    scanf_s("%d", &amp;a);
    if (a &lt; 0) {
        printf("Negative number!\n");
    } else if(a &gt; 0) {
        printf("Positive number!\n");
    } else {
        printf("Zero!\n");
    }
    
    printf("Done.\n");
    return 0;
} 
</code></pre>
<h1 id="ä¸æ§å¶æµæ··æ·å¹³å¦å">ä¸ï¼æ§å¶æµæ··æ·å¹³å¦å</h1>
<h3 id="ç®ä»-1">ç®ä»</h3>
<p>ä»ä¹æ¯æ§å¶æµå¹³å¦åï¼ç®åæ¥è¯´ï¼å°±æ¯è®©åæ¬åç´çæµç¨åæ¯å¹³æå°æ°´å¹³æ¹åä¸ï¼ä½¿ç¨è¿ç§æ¹æ³å¯ä»¥æé«éåé¾åº¦ï¼è½¯ä»¶æ´èé ã</p>
<pre><code>            +-----------------------+
            |        [å¼å§]          |
            |    è®¾å®åå§ç¶æ = 1     |
            +-----------|-----------+
                        |
      +----------------&gt;V&lt;----------------+
      |       +-------------------+       |
      |       |    å¾ªç¯æ§å¶ä¸­å¿     |       | 
      |       |     (ååå¨)       |       |
      |       +---------|---------+       |
      |                 |                 |
      |        _________V_________        |
      |       |                   |       |
      |       |  switch(ç¶æåé)  |       | 
      |       |___________________|       |
      |          /      |      \          |
      |         /       |       \         |
      |   [ç¶æ 1]   [ç¶æ 2]    [éåº]     |
      |   +-----+    +-----+    +-----+   |
      |   | å 1|    | å 2 |    |ç»æ |   |
      |   |     |    |     |    +-----+   |
      |   |æ´æ° |    | æ´æ°  |             |
      |   |ç¶æ |    | ç¶æ  |             |
      |   +--|--+    +--|--+              |
      |      |          |                 |
      +------+----------+-----------------+
</code></pre>
<h3 id="å®ç°æ§å¶æµå¹³å¦åpassçæ ¸å¿ä»£ç ">å®ç°æ§å¶æµå¹³å¦åPassçæ ¸å¿ä»£ç </h3>
<p><strong>ä»£ç æµç¨ï¼</strong><br>
è¯å«ä¸æ¶éåæ¯è·¯å¾ï¼ä»£ç åï¼-&gt; æå»ºæ§å¶éª¨æ¶ -&gt; åå§åç¶æåé -&gt; éç½®ååå¨ -&gt; éæè·³è½¬é»è¾<br>
<mark>æå°ä»£ç çè§£éé½æ æ³¨å¨æ³¨éä¸­</mark></p>
<pre><code class="language-cpp">namespace{
    struct mypass : public PassInfoMixin&lt;mypass&gt;{
        PreservedAnalyses run(Function &amp;F, FunctionAnalysisManager &amp;AM){
	        //è¿éä¸ºäºæ¼ç¤ºåªæ··æ·mainå½æ°
            if(F.getName() != "main"){
                return PreservedAnalyses::all();
            }

            errs() &lt;&lt; "My Flattening Function:" &lt;&lt; F.getName() &lt;&lt; "\n";
			
			//éè¿éåï¼è·åmainå½æ°ä¸­çææä»£ç å
            std::vector&lt;BasicBlock*&gt; OrigBBs;
            DenseMap&lt;BasicBlock*, int&gt; BBtoID;
            BasicBlock &amp;EntryBB = F.getEntryBlock();
            int id_counter = 0;

            for(BasicBlock &amp;BB : F){
	            //è¿éå»é¤é¦ä»£ç å
                if(&amp;BB == &amp;EntryBB) continue;
                //è®°å½ä»£ç åå¹¶ç»ä»£ç åæ åºå·
                //è¿éä¸»è¦æ¹ä¾¿caseä¸­ä½¿ç¨ï¼å¯ä»¥æ¯å¾å¤æçç¬ä¸æ äºçæ°å­
                OrigBBs.push_back(&amp;BB);
                BBtoID[&amp;BB] = id_counter++;
            }
			
			//å¤æ­æ¶éå°çåæ¯æ¯å¦å­å¨ï¼å¦ææ²¡æåæ¯ï¼å°±
            if(OrigBBs.empty()){
                return PreservedAnalyses::all();
            }
			
			//åå»ºå¾ªç¯æ§å¶ä»£ç å
            BasicBlock *LoopEntry = BasicBlock::Create(F.getContext(), "loop_entry", &amp;F);
            //æ§å¶æµååå¨ä»£ç å
            BasicBlock *SwitchBB = BasicBlock::Create(F.getContext(), "switch_block", &amp;F);
            //å¾ªç¯ååå¨å°¾é¨ï¼ç¨äºååºï¼å¯ä»¥ä¸ä½¿ç¨ï¼
            BasicBlock *LoopEnd = BasicBlock::Create(F.getContext(), "loop_end", &amp;F);
			
			//å¨é¦ä»£ç åä¸­ï¼åå»ºåå§ç¶æåéï¼ç¨äºè·ååå¼å§è·³è½¬çç¶æé
            IRBuilder&lt;&gt; builderEntry(&amp;EntryBB);
            Instruction *EntryTerm = EntryBB.getTerminator();
            if (EntryTerm) builderEntry.SetInsertPoint(EntryTerm);
            AllocaInst *SwitchVar = builderEntry.CreateAlloca(builderEntry.getInt32Ty(), nullptr, "switchVar");
			//è·åè·³è½¬æä»¤
            if(BranchInst *BI = dyn_cast_or_null&lt;BranchInst&gt;(EntryTerm)){
	            //å¤æ­æ¯å¦æ¯æ¡ä»¶è·³è½¬
	            //å¦ææ¯ï¼åç´æ¥è·åè·³è½¬åçä»£ç ååºå·
                if(BI-&gt;isUnconditional()){
                    BasicBlock *Target = BI-&gt;getSuccessor(0);
                    if(BBtoID.count(Target)){
                        builderEntry.CreateStore(builderEntry.getInt32(BBtoID[Target]), SwitchVar);
                    }
                    //å¦ææ¯æ¡ä»¶è·³è½¬
                    //åå»ºä¸æ¡æ¡ä»¶å¤æ­æä»¤
                }else if(BI-&gt;isConditional()){
                    Value *Cond = BI-&gt;getCondition();
                    BasicBlock *TrueBB = BI-&gt;getSuccessor(0);
                    BasicBlock *FalseBB = BI-&gt;getSuccessor(1);
                    if(BBtoID.count(TrueBB) &amp;&amp; BBtoID.count(FalseBB)){
                        Value*Select = builderEntry.CreateSelect(
                            Cond, 
                            builderEntry.getInt32(BBtoID[TrueBB]), 
                            builderEntry.getInt32(BBtoID[FalseBB]),
                            "init_state"
                        );
                        builderEntry.CreateStore(Select, SwitchVar);
                    }
                }
            }
			
			//é¦é¨åå»ºè·³è½¬-&gt;è·³è½¬å°å¾ªç¯æ§å¶å¥å£
            builderEntry.CreateBr(LoopEntry);
            //å é¤æ§çè·³è½¬æä»¤
            if(EntryTerm) EntryTerm-&gt;eraseFromParent();
			
			//åå»ºç¶æåéï¼ç¨äºæ§å¶ååå¨çèµ°å
            IRBuilder&lt;&gt; builderLoop(LoopEntry);
            LoadInst *CurrState = builderLoop.CreateLoad(builderLoop.getInt32Ty(), SwitchVar, "curr_state");
            builderLoop.CreateBr(SwitchBB);
			
			//åå»ºswitchæä»¤
            IRBuilder&lt;&gt; builderSwitch(SwitchBB);
            SwitchInst *SwitchI = builderSwitch.CreateSwitch(CurrState, LoopEnd, OrigBBs.size());
            //åå»ºcase
            //å¶ä¸­çæ è¯ç¬¦æ¯ä¸é¢æ¶éå°çä»£ç åçåºå·
            for(BasicBlock *BB :OrigBBs){
	            //ææé½è·³è½¬å°å°¾é¨
                BB-&gt;moveBefore(LoopEnd);
                SwitchI-&gt;addCase(builderSwitch.getInt32(BBtoID[BB]), BB);
            }
			
			//ç¨äºååºï¼è·³è½¬åå¾ªç¯æ§å¶å¤´é¨
            IRBuilder&lt;&gt; builderEnd(LoopEnd);
            builderEnd.CreateBr(LoopEntry);
			
			//éåæ¯ä¸ªä»£ç åï¼æå¥ä¿®æ¹ç¶æåéçæä»¤
			//è¿éæ ¹æ®ä¸ä¸ä¸ªè·³è½¬å°çä»£ç åæ¥æ è¯ç¶æåé
			//è¿éçä»£ç è·è·ååæ¬¡è·³è½¬æ°å¼ä¸æ¨¡ä¸æ ·
            for(BasicBlock *BB : OrigBBs){
                Instruction *Term = BB-&gt;getTerminator();
                IRBuilder&lt;&gt; builder(BB);
				//ç±äºè·³è½¬åä¸ºææ¡ä»¶è·³è½¬åæ æ¡ä»¶è·³è½¬
				//è¿éç§æ ·è¦åä¸ªå¤æ­
                if(BranchInst*BI = dyn_cast_or_null&lt;BranchInst&gt;(Term)){
	                
                    if(BI-&gt;isUnconditional()){
                        BasicBlock *Target = BI-&gt;getSuccessor(0);
                        if(BBtoID.count(Target)){
                            builder.SetInsertPoint(Term);
                            builder.CreateStore(builderSwitch.getInt32(BBtoID[Target]), SwitchVar);
                            builder.CreateBr(LoopEntry);
                            Term-&gt;eraseFromParent();
                        }
                    }
                    else if(BI-&gt;isConditional()){
                        BasicBlock *TrueBB = BI-&gt;getSuccessor(0);
                        BasicBlock *FalseBB = BI-&gt;getSuccessor(1);
                        if(BBtoID.count(TrueBB) &amp;&amp; BBtoID.count(FalseBB)){
                            builder.SetInsertPoint(Term);
                            Value *Select = builder.CreateSelect(
                                BI-&gt;getCondition(),
                                builder.getInt32(BBtoID[TrueBB]),
                                builder.getInt32(BBtoID[FalseBB]),
                                "next_state"
                            );
                            builder.CreateStore(Select, SwitchVar);
                            builder.CreateBr(LoopEntry);
                            Term-&gt;eraseFromParent();
                        }
                    }
                }
            }
        }
    };
}
</code></pre>
<h1 id="ç¼è¯åä½¿ç¨">ç¼è¯åä½¿ç¨</h1>
<p><mark><strong>è¿é¨åä¹åæç« è®²è¿ï¼è¿éå°±ä¸æµªè´¹ç¯å¹ï¼ä¸æçå¯ä»¥ç¿»ç</strong></mark></p>
<h1 id="ä½¿ç¨æææ¼ç¤º">ä½¿ç¨æææ¼ç¤º</h1>
<h3 id="æªä½¿ç¨æ¶">æªä½¿ç¨æ¶</h3>
<p><img alt="æ§å¶æµ3" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2450496/202602/2450496-20260205223717404-1628621907.png" class="lazyload"><br>
<img alt="æ§å¶æµ4" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2450496/202602/2450496-20260205223722896-459325263.png" class="lazyload"></p>
<h3 id="ä½¿ç¨å">ä½¿ç¨å</h3>
<p><img alt="æ§å¶æµ1" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2450496/202602/2450496-20260205223654729-2096773336.png" class="lazyload"><br>
<img alt="æ§å¶æµ2" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2450496/202602/2450496-20260205223712038-638219478.png" class="lazyload"></p>
<p><mark><strong>è³æ­¤ï¼æä»¬æåå®ç°äºæ§å¶æµå¹³å¦å</strong></mark></p>
<p><strong>å¦æâ¤åæ¬¢â¤æ¬ç³»åæç¨ï¼å°±ç¹ä¸ªå³æ³¨å§ï¼åç»­ä¸å®ææ´æ°~</strong></p>


</div>
<div id="MySignature" role="contentinfo">
    <p>æ¬ææ¥èªåå®¢å­ï¼ä½èï¼<a href="https://www.cnblogs.com/ClownLMe/" target="_blank">ClownLMe</a>ï¼è½¬è½½è¯·æ³¨æåæé¾æ¥ï¼<a href="https://www.cnblogs.com/ClownLMe/p/19581710" target="_blank">https://www.cnblogs.com/ClownLMe/p/19581710</a></p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.0020833333333333333" data-date-updated="2026-02-05 22:57">2026-02-05 22:54</span>&nbsp;
<a href="https://www.cnblogs.com/ClownLMe">ClownLMe</a>&nbsp;
éè¯»(<span id="post_view_count">27</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19581710);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19581710', targetLink: 'https://www.cnblogs.com/ClownLMe/p/19581710', title: 'LLVMçæ··æ·ä¹æ(äº)-æå¨å®ç°æ§å¶æµå¹³å¦åæ··æ·' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ [å¤§æ¨¡åå®æ 03] æè§£ Transformersï¼ä»åçå¾è§£å° HuggingFace Transformers å®æ ]]></title>
    <link>https://www.cnblogs.com/algieba/p/19581327</link>
    <guid>4bb968309d4e1032f73320d4a92e7515</guid>
    <description>
    <![CDATA[ 
		<div class="postcontent">
			    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/3169973/202602/3169973-20260205193318638-616281954.png" alt="[å¤§æ¨¡åå®æ 03] æè§£ Transformersï¼ä»åçå¾è§£å° HuggingFace Transformers å®æ" class="desc_img">
        ä¼è·ä»£ç è¿ä¸å¤ï¼æä»¬è¦æåçãæ¬æä» Transformer çåºå±è§è§åºåï¼å¾è§£ä»ä½ç½®ç¼ç å°æ³¨æåæºå¶çå¨æµç¨ï¼å¹¶åºäº Kaggle å¹³å°ï¼æ·±å¥æè§£ HuggingFace Transformers åºçâéä¸è§âç»ä»¶ä¸çæåæ°ççæºã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="å¤§æ¨¡åå®æ-03-æè§£-transformersä»åçå¾è§£å°-huggingface-transformers-å®æ">[å¤§æ¨¡åå®æ 03] æè§£ Transformersï¼ä»åçå¾è§£å° HuggingFace Transformers å®æ</h1>
<blockquote>
<p><strong>æ ¸å¿æè¦ (TL;DR)</strong></p>
<ul>
<li><strong>åç</strong>ï¼å¾è§£ Transformer æ¯å¦ä½éè¿âæ³¨æåæºå¶âåâä½ç½®ç¼ç âæ¥çè§£äººç±»è¯­è¨çã</li>
<li><strong>å®æ</strong>ï¼å¨ <strong>Kaggle (å T4 GPU)</strong> ç¯å¢ä¸ï¼æè§£ HuggingFace ä»£ç çâéä¸è§âï¼Config, Tokenizer, Modelï¼ã</li>
<li><strong>æå·§</strong>ï¼ææ¡ <code>Temperature</code> å <code>Top_p</code>ï¼å­¦ä¼æ§å¶ AI çâåé åâã</li>
</ul>
</blockquote>
<h2 id="åè¨">åè¨</h2>
<p>åä½åäººä»¬ï¼å¤§å®¶å¥½ï¼è¿éæ¯é¿å°ãå¨ä¸ä¸èçâç¼ä¸¹âç¯å¢æ­å»ºä¸­ï¼å±ä»¬æåå°å°Qwen2.5æ¨¡åè¿è¡äºèµ·æ¥ï¼è·éäºã ä½æ¯ç¸ä¿¡å¤§å®¶å¯¹è¿è¡çæ¶åçé£äºåæ°é½ä»£è¡¨çä»ä¹ï¼é½è¿æ¯æµçã è¿ç¯åå®¢å°±æ¯ä¸ºæ­¤åå¤çï¼æä»¬æç®åå¿«éå¤§æ¦å°äºè§£ä¸ä¸å½åçå¤§æ¨¡åçåºå±åçï¼åç»åå¨ä¸èµ·ä»ç»éç¨çtransformersåº, å»ççä»£ç åå¦ä½å¯¹åºè¿äºçè®ºçã</p>
<h2 id="1-transformer-æç®åçå¤§æ¨¡åæ¯æä¹æèç">1. Transformer æç®åçï¼å¤§æ¨¡åæ¯æä¹æèçï¼</h2>
<p>å¤§æ¨¡ååæ®éçæºå¨å­¦ä¹ æ¨¡åä¸æ ·ï¼æ¬è´¨ä¹æ¯ä¸ä¸ªå½æ°ï¼ä¸åçæ¯ï¼ä¼ ç»æºå¨å­¦ä¹ å¯è½è¾å¥çæ¯ä¸äºæ´çå¥½çæ°æ®ï¼æ¯å¦æ¿å­çå°ºå¯¸ï¼å°æ®µï¼è´­ä¹°æ¶é¿ï¼åå¸ä¸­å¿çè·ç¦»ç­ç­æ°æ®ï¼è¾åºä¸ä¸ªé¢æµçæ¾åï¼èå¤§æ¨¡åè¾å¥çæ¯æä»¬çé®é¢ï¼æ¿å°çæ¯å¤§æ¨¡åç»åºçåç­ãä½ï¼å±ä»¬ç©¶å¶æ ¹æ¬ï¼å®ä»¬é½å¯ä»¥çä½æ¯ä¸ä¸ªå½æ°ï¼æä»¬è¾å¥ä¸äºä¸è¥¿ï¼ç»è¿è¿ç®ä¹åï¼è¾åºç»æä»¬ä¸äºä¸è¥¿ã</p>
<p>å¯¹äºå¤§æ¨¡åï¼å®çæ¬è´¨å°±æ¯ä¸ä¸ª<strong>ä¸ä¸ä¸ªå­ç¬¦é¢æµå¨</strong>ï¼æä»¬è¾å¥ä¸äºæå­ï¼å®åªè´è´£æ ¹æ®å®æè®­ç»çæµ·éæ°æ®ï¼è¾åºæç¬¦åï¼ææå¯è½çä¸ä¸ä¸ªå­ç¬¦ï¼å°±åä¸ä¸ª<strong>æå­æ¥é¾æºå¨</strong>ï¼å¶æ ¸å¿ä»»å¡åªæä¸ä¸ªï¼<strong>æ ¹æ®ä¸æï¼çä¸ä¸ä¸ªå­æ¯ä»ä¹ã</strong></p>
<p>ä¸ºäºå®ç°è¿ä¸ªç®æ ï¼Transformer æ¶æç»åäºä¸ä¸ªç²¾å¯çæµæ°´çº¿ï¼<br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm03-know-more-about-transformer-lib/01_cover.png" alt="åå«Transformerç5ä¸ªæ­¥éª¤çæ»è§å¾" loading="lazy"><br>
ä¸é¢ï¼æä»¬ä¼ç¨å¾®è¯¦ç»ä¸ç¹å°ä»ç»ä¸ä¸åä¸ªæ­¥éª¤ã</p>
<h3 id="11-ç¬¬ä¸æ­¥token-å-tokenization--æ¥å­å¸">1.1 ç¬¬ä¸æ­¥ï¼Token å (Tokenization) ââ æ¥å­å¸</h3>
<p>å¤§æ¨¡åæ¢ç¶æ¯ä¸ä¸ªå½æ°ï¼é£ä¹è¯å®æ¯éå¯¹æ°å­è¿è¡å¤ççï¼æä»¥ï¼æä»¬å°±éè¦ä¸ä¸ªæ³å­ï¼å»å°æä»¬çæå­å­ç¬¦ï¼çè³æ¯å¾çï¼åæå¤§æ¨¡åè®¤è¯çæ°å­ï¼æèè¯´å¼ éï¼åéï¼ã è¿å°±æ¯Tokenåï¼å»åè¿ä¸æ­¥æä½çå½æ°ï¼æèæ¨¡åå°±æ¯<strong>åè¯å¨ï¼Tokenizerï¼</strong>ã</p>
<p>é£ä¹<strong>Tokenizer</strong>å·ä½æ¯å¦ä½å·¥ä½çï¼å®å®éä¸å°±æ¯å°ä¸ä¸ªä¸ªçå­ç¬¦ï¼å¯¹åºæä¸ä¸ªä¸ªæ°å­ï¼æèè¯´IDï¼å°±åASCIIç ä¸æ ·ï¼ä¸è¿å®åå¾æ´é«çº§ã</p>
<p>ææ¯ä¸ä¸ªå­é½æ¾ä¸ä¸ªæ°å­å¯¹åºï¼æç¹å¥¢ä¾ï¼ç¹å«æ¯å¯¹äºè±è¯­,act, acting,action,actorå¶å®é½æç¸åçè¯æ ¹ï¼ä¸»è¦çè¯­ä¹æ¥æºäºå¶è¯æ ¹actï¼æä»¥åè¯å¨æ¯æç§è¯åï¼tokenï¼å»æåçï¼è½ææäºè¯ææè¯æ ¹ãåç¼ååç¼ç­ç­ï¼å½ç¶å·ä½å¦ä½æï¼åå³äºå­å¸å¦ä½å®ä¹ï¼å­å¸æå¤å¤§ã</p>
<p>è¿éæä»¬ç»ä¸ä¸ªç®åçä¾å­</p>
<ul>
<li><strong>è¾å¥</strong>ï¼âæç± AIâ</li>
<li><strong>å¨ä½</strong>ï¼åå -&gt; <code>["æ", "ç±", "AI"]</code> -&gt; æ¥è¡¨ -&gt; <code>[2301, 452, 1083]</code><br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm03-know-more-about-transformer-lib/1.1_tokenization.png" alt="Tokenåçç¤ºæå¾" loading="lazy"></li>
</ul>
<h3 id="12-ç¬¬äºæ­¥embedding--ä½ç½®ç¼ç --èµäºå«ä¹ä¸é¡ºåº">1.2 ç¬¬äºæ­¥ï¼Embedding &amp; ä½ç½®ç¼ç  ââ èµäºå«ä¹ä¸é¡ºåº</h3>
<p>æäºtokenä¹åï¼æä»¬æ³ç¥éè¯åè¯çå³ç³»ï¼æä»¬æ³è¦éè¿ä¸ä¸ªå¯ä»¥éåçéå»å¤æ­ä¸¤ä¸ªè¯æ¯å¦æ¯æå³ç³»çï¼å³ç³»å¤å¤§ãè¿å°±å¼å¥äºæä»¬çä¸ä¸ä¸ªæ¨¡åï¼è¯åµå¥æ¨¡åï¼Embeddingï¼ã</p>
<ul>
<li><strong>Embedding (è¯åé)</strong>ï¼ææ¯ä¸ª ID åæä¸ä¸ªé¿é¿çåéï¼æ¯å¦ 4096 ç»´çæ°ç»ï¼ãè¿ä¸ªåéå¨æ¨¡åè®­ç»ä¹åæ¯éæºçï¼å¶åéçæµ·éçè®­ç»æ°æ®æ´ç¤¼ï¼è¶ç¸å³çè¯åéè¶é è¿ï¼è¶ä¸ç¸å³çè¯è¶è¿ç¦»ãè¿ä¸ªåéä»£è¡¨äºè¯ç<strong>å«ä¹</strong>ãæ¯å¦âç«âåâçâçåéå¨ç©ºé´éè·ç¦»å¾è¿ï¼âè¹æâåâææºâå¨æç§è¯­å¢ä¸ä¹æ´è¿ã</li>
</ul>
<p>åç¥éè¯åè¯çå³ç³»è¿ä¸å¤ï¼âæç±ä½ âåâä½ ç±æâçæ¯ä¸ä¸ªè¯é½æ¯ç¸åçï¼ä½æ¯å®ä»¬ç¡®å®å¯ä»¥ä¸ç¸å³çä¸¤ä¸ªå¥å­ï¼âå°çå¬äºæâåâæå¬äºå°çâï¼ä¹ä¼è¢«äººè§ä½âå¯ä»¥æ­£å¸¸çè§£âåâè¿äººå¥½åä¸å¯¹å²âä¸¤ç§å®å¨ä¸åççè§£ãæ¾èæè§ï¼è¯è¯­å¨å¥ä¸­çä½ç½®æ¯ä¸ä¸ªéå¸¸éè¦çä¿¡æ¯ï¼æä»¬ä¸è½å¼ä¸¢å®ï¼ä¹éè¦å°è¿ä¸é¨åä¿¡æ¯ä¼ éç»æ¨¡åè®­ç»æ¶åå»å­¦ä¹ ã</p>
<ul>
<li><strong>Positional Encoding (ä½ç½®ç¼ç )</strong>ï¼Transformer æ¯å¹¶è¡è®¡ç®çï¼å®ä¸ç¼çå®ææè¯ï¼ï¼è¿å¯¼è´å®ä¸ç¥éâæç±ä½ âåâä½ ç±æâçåºå«ãæä»¥ï¼æä»¬éè¦ç»æ¯ä¸ªè¯è´´ä¸ä¸ä¸ªâåº§ä½å·âï¼åè¯æ¨¡åè°å¨åé¢ï¼è°å¨åé¢ã<br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm03-know-more-about-transformer-lib/1.2_ebedding.png" alt="Embedding &amp; ä½ç½®ç¼ç  ââ èµäºå«ä¹ä¸é¡ºåºç¤ºæå¾" loading="lazy"></li>
</ul>
<h3 id="13-ç¬¬ä¸æ­¥self-attention-èªæ³¨æå--å¯»æ¾å³ç³»">1.3 ç¬¬ä¸æ­¥ï¼Self-Attention (èªæ³¨æå) ââ å¯»æ¾å³ç³»</h3>
<p>æ¥ä¸æ¥å°±æ¯å¤§æ¨¡åççµé­ï¼æä»¬æ³ç¥éä¸å¥è¯éçæ¯ä¸ä¸ªè¯ååå¶ä»è¯åç<strong>å³èåº¦</strong>ï¼å¶å®å°±æ¯ä¸ä¸æçèç³»ãå½æ¨¡åå¤çâè¹æâè¿ä¸ªè¯æ¶ï¼å¦æä¸ä¸æéæâææºâãâåå¸ä¼âï¼æ³¨æåæºå¶ä¼åè¯æ¨¡åï¼âå¿ï¼è¿éçâè¹æâæçæ¯ç§æå¬å¸ï¼ä¸æ¯æ°´æï¼â,èªæ³¨æåæºå¶ï¼è®©æ¨¡åè½çè§£ä¸ä¸æã<br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm03-know-more-about-transformer-lib/1.3-self-attention.png" alt="Self-Attention ç¤ºæå¾" loading="lazy"></p>
<h3 id="14-ç¬¬åæ­¥mlp-åé¦ç¥ç»ç½ç»--æ¶åå¸æ¶">1.4 ç¬¬åæ­¥ï¼MLP (åé¦ç¥ç»ç½ç») ââ æ¶åå¸æ¶</h3>
<p>å¦æè¯´æ³¨æåæºå¶æ¯âçâï¼é£ä¹ MLP å°±æ¯âæ³âãå®åå«å¤å±ç¥ç»åï¼è´è´£å¯¹æåå°çä¿¡æ¯è¿è¡å¤æçéçº¿æ§åæ¢åé»è¾æ¨ç,ä¹å°±æ¯ä¼ ç»çæ·±åº¦å­¦ä¹ ã<br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm03-know-more-about-transformer-lib/1.4-mlp.png" alt="MLP (åé¦ç¥ç»ç½ç»)ç¤ºæå¾" loading="lazy"></p>
<h3 id="15-ç¬¬äºæ­¥decoder--softmax--è¾åºæ¦ç">1.5 ç¬¬äºæ­¥ï¼Decoder &amp; Softmax ââ è¾åºæ¦ç</h3>
<p>ç»è¿å±å±è®¡ç®ï¼æ¨¡åæç»ä¼è¾åºä¸ä¸ªåå«äºææè¯æ±ï¼æ¯å¦ 15 ä¸ä¸ªè¯ï¼ç<strong>æ¦çåè¡¨</strong>ã</p>
<ul>
<li><code>AI</code> (80%)</li>
<li><code>å</code> (10%)</li>
<li><code>ç¡</code> (5%)<br>
...<br>
æåï¼æä»¬æ ¹æ®è¿ä¸ªæ¦çåè¡¨ï¼éæ©ä¸ä¸ä¸ªè¯ã<br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm03-know-more-about-transformer-lib/1.5-decoder&amp;softmax.png" alt="è¾åºæ¦ççç¤ºæå¾" loading="lazy"></li>
</ul>
<hr>
<p>è¿å°±æ¯å¤§æ¨¡åè¯è¯­æ¥é¾çåçäºã</p>
<h2 id="2-æè§£æ¨¡åæä»¶å¤¹ä¸è½½ä¸æ¥çå°åºæ¯ä»ä¹">2. æè§£æ¨¡åæä»¶å¤¹ï¼ä¸è½½ä¸æ¥çå°åºæ¯ä»ä¹ï¼</h2>
<p>çè®ºè®²å®äºï¼æä»¬æ¥ççå¨ <strong>Kaggle</strong> çæä»¶ç³»ç»éï¼è¿äºçè®ºåæäºä»ä¹æä»¶ã</p>
<p>å½ä½ ä¸è½½ä¸ä¸ªæ¨¡åï¼ä»¥ Qwen2.5-7B ä¸ºä¾ï¼æ¶ï¼æä»¶å¤¹ç»æå¦ä¸ï¼</p>
<p><img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm03-know-more-about-transformer-lib/safetensor.png" alt="safetensoræ ¼å¼çæä»¶ç»ç»ç¤ºæå¾" loading="lazy"></p>
<h3 id="21-æ ¸å¿æ¶æconfigjson">2.1 æ ¸å¿æ¶æï¼config.json</h3>
<p><strong>config.json</strong>: æ¯å¤§æ¨¡åçèº«ä»½è¯ï¼ä¹å¯ä»¥è¯´æ¯ä½æ£è¡¨ï¼å®å¶ä¸­å°±æ¯çæ­£çæä»¬çæ¨¡åï¼å·ä½ç±åªäºå±ææï¼æ¯ä»ä¹æ¶æç±»åï¼éèå±æå¤æ·±ï¼æ³¨æåå¤´çæ°éæå ä¸ªï¼è¯è¡¨çå¤§å°æ¯å¤å°ãå¯¹äºå¤§æ¨¡åèè¨ï¼å®å°±æ¯æ¨¡åæ¬èº«ï¼ä¹æ¯<strong>éª¨æ¶</strong>ï¼å ä¸ºå¤§æ¨¡åéè¦çæ¯è®­ç»å®çåæ°ï¼æ¨¡åæ¬èº«æ¯å¾å°çã<br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm03-know-more-about-transformer-lib/config.json.png" alt="config.jsonçç¤ºæå¾" loading="lazy"></p>
<h3 id="22-è¡ä¸ºé¢è®¾generation_configjson">2.2 è¡ä¸ºé¢è®¾ï¼generation_config.json</h3>
<p><strong>generation_config.json</strong>:æ¯æ¨¡åçåºåé»è®¤è®¾ç½®ã<br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm03-know-more-about-transformer-lib/generation_config_.png" alt="generation_configçç¤ºæå¾" loading="lazy"></p>
<h3 id="23-å¤§èæ¬èº«safetensorsåindexjson">2.3 å¤§èæ¬èº«ï¼*.safetensorså*.index.json</h3>
<p>æäºconfig.jsonä¸­çèº¯ä½ï¼æä»¬åä»<em>.safetensorså</em>.index.jsonè½½å¥çµé­ï¼è¿ææ¯æä»¬è½è¯´ä¼éçå¤§æ¨¡åã</p>
<ul>
<li><strong><code>model-xxxxx.safetensors</code></strong>ï¼è¿éé¢å­çæ¯å®æå®ç<strong>å¼ éï¼Tensorï¼æ°æ®</strong>ï¼å³æ°åäº¿ä¸ªåæ°çæµ®ç¹æ°ãä¸ºäºæ¹ä¾¿å­å¨åå è½½ï¼éå¸¸ä¼è¢«ååæå¤ä¸ª 2GB-5GB çå°æä»¶ï¼Shardï¼ã</li>
<li><strong><code>model.safetensors.index.json</code></strong>ï¼è¿æ¯ä¸å¼ <strong>èå®å¾</strong>ãå ä¸ºæéè¢«ååäºï¼æ¨¡åéè¦ç¥éâç¬¬ 5 å±çæéâå°åºèå¨åªä¸ªæä»¶éã
<ul>
<li><strong>åé¨é¿è¿æ ·</strong>ï¼<pre><code class="language-json">{
  "metadata": { "total_size": 15423653888 },
  "weight_map": {
    "model.layers.0.self_attn.q_proj.weight": "model-00001-of-00004.safetensors",
    "model.layers.20.mlp.gate_proj.weight": "model-00003-of-00004.safetensors"
  }
}
</code></pre>
</li>
</ul>
</li>
</ul>
<h3 id="æ°å­åæå­çç¿»è¯å®tokenizerç¸å³æä»¶">æ°å­åæå­çç¿»è¯å®ï¼tokenizerç¸å³æä»¶</h3>
<ul>
<li><strong><code>vocab.json</code> / <code>merges.txt</code></strong>ï¼è¿æ¯æåå§ç<strong>çè¯è¡¨</strong>ãè®°å½äºææå­ãè¯æ ¹å¯¹åºç IDã</li>
<li><strong><code>tokenizer.json</code></strong>ï¼è¿æ¯ä¸ä¸ª<strong>ç¼è¯å</strong>çé«æå­å¸æä»¶ï¼åå«äºåè¯çææé»è¾ï¼Pre-tokenization, Normalization ç­ï¼ï¼å è½½éåº¦æ¯è¯»åå§ææ¬å¿«å¾å¤ã</li>
<li><strong><code>tokenizer_config.json</code> (è³å³éè¦)</strong>ï¼è¿æ¯åè¯å¨ç<strong>éç½®æä»¶</strong>ã
<ul>
<li>å®å®ä¹äº<strong>ç¹æ®ç¬¦å·</strong>ï¼Special Tokensï¼ï¼æ¯å¦åªä¸ª ID ä»£è¡¨âå¼å§âï¼åªä¸ªä»£è¡¨âç»æâã</li>
<li>å®åå«äº <strong>Chat Template (èå¤©æ¨¡æ¿)</strong>ï¼è¿æ¯ä¸æ®µ Jinja2 ä»£ç ï¼å³å®äº <code>apply_chat_template</code> å¦ä½å·¥ä½ã</li>
<li><strong>åé¨é¿è¿æ ·</strong>ï¼<pre><code class="language-json">{
  "chat_template": "{% for message in messages %}...&lt;|im_start|&gt;...",
  "eos_token": "&lt;|im_end|&gt;",
  "pad_token": "&lt;|endoftext|&gt;"
}
</code></pre>
</li>
</ul>
</li>
</ul>
<h2 id="3-transformersåºå®æä»£ç ä¸­çéä¸è§">3. Transformersåºå®æï¼ä»£ç ä¸­çâéä¸è§â</h2>
<p>å¨Transformsåºä¸­ï¼æä»¬æ°¸è¿ç»ä¸å¼ä¸ä¸ªæ ¸å¿ç±»ã</p>
<p><strong>ç¯å¢åå¤ï¼</strong><br>
å¨ Kaggle å³ä¾§è®¾ç½®ä¸­ï¼ç¡®ä¿ <strong>Internet: On</strong> ä¸ <strong>Accelerator: GPU T4 x2</strong>ã</p>
<pre><code class="language-python">!pip install -U transformers accelerate bitsandbytes
</code></pre>
<h3 id="31-autotokenizer-ç¿»è¯å®">3.1 AutoTokenizer (ç¿»è¯å®)</h3>
<p>å¯¹åºçè®ºä¸­ç <strong>Token å</strong> æ­¥éª¤,åæ¨¡åæä»¶ä¸­çtokenizerç¸å³æä»¶ã</p>
<pre><code class="language-python">from transformers import AutoTokenizer

model_path = "/kaggle/input/qwen2.5/transformers/7b-instruct/1/"

# å è½½åè¯å¨
tokenizer = AutoTokenizer.from_pretrained(model_path, trust_remote_code=True)

text = "Transformer is amazing"
# 1. ç¼ç  (Encode): ææ¬ -&gt; æ°å­ ID
input_ids = tokenizer.encode(text)
print(f"åæ: {text}")
print(f"æ°å­ ID: {input_ids}")

# 2. è§£ç  (Decode): æ°å­ ID -&gt; ææ¬
decoded_text = tokenizer.decode(input_ids)
print(f"è¿å: {decoded_text}")
</code></pre>
<p>å¾å°çç»æå°ä¼æ¯è¿æ ·</p>
<pre><code class="language-bash">åæ: Transformer is amazing
æ°å­ ID: [46358, 374, 7897]
è¿å: Transformer is amazing
</code></pre>
<p><strong>å¯¹è¯æ ¼å¼ï¼Chat Template</strong><br>
å¤§æ¨¡åéè¦ç¹å®çå¯¹è¯æ ¼å¼ï¼Promptï¼ãæ¥å°æ¨¡åçåç­ï¼åç¨æ·çé®é¢ååºå, æä»¬ä¸è¬é½å¯ä»¥éè¿è½½å¥è¯­è¨æ¨¡åå¯¹åºæ¨¡æ¿ï¼ä¸åå®¶çæ¨¡åï¼å¯è½æ¨¡æ¿ä¼æä¸åï¼ï¼çè³å»æ¼è£åå²è®°å½ã</p>
<pre><code class="language-python">messages = [
    {"role": "system", "content": "ä½ æ¯ä¸ä¸ªç©çå­¦å®¶ã"},
    {"role": "user", "content": "ç¨ä¸å¥è¯è§£éç¸å¯¹è®ºã"}
]

# èªå¨åºç¨èå¤©æ¨¡æ¿
formatted_prompt = tokenizer.apply_chat_template(messages, tokenize=False, add_generation_prompt=True)
print("æ¨¡åå®éçå°çè¾å¥:\n", formatted_prompt)
</code></pre>
<p>è¿è¡ç»æå¦ä¸</p>
<pre><code class="language-bash">æ¨¡åå®éçå°çè¾å¥:
 &lt;|im_start|&gt;system
ä½ æ¯ä¸ä¸ªç©çå­¦å®¶ã&lt;|im_end|&gt;
&lt;|im_start|&gt;user
ç¨ä¸å¥è¯è§£éç¸å¯¹è®ºã&lt;|im_end|&gt;
&lt;|im_start|&gt;assistant
</code></pre>
<p>çå°è¿éï¼æä»¬ä¹è½æ´å¥½å°çè§£ï¼ä¸ºä»ä¹ä¸ä¸ªæ¬è´¨æ¯è¯è¯­æ¥é¾çæ¨¡åï¼è½å¤åºåé®é¢ï¼ç¶åååºåç­ãå ä¸ºå¨è®­ç»çè¿ç¨ä¸­ï¼æä»¬ä¼è®©ä»ç¥é&lt;|im_start&gt;è¡¨ç¤ºä¸ä¸ªmessageçå¼å§ï¼å¶ä¸­ä¼åè¯æ¨¡åï¼è¿å¥è¯æ¯è°è¯´çï¼è¿å¥è¯å¨ä»ä¹ä½ç½®ç»æï¼å®æ¥é¾çæ¶åä¹ä¼å¸¦ä¸å¼å§åç»æç¬¦å·ï¼å¨æ¨çæ¨¡åä¸­ï¼çè³ä¼å¸¦ä¸æèçæ ç­¾ã</p>
<h3 id="32-automodel-å¤§èæ¬ä½">3.2 AutoModel (å¤§èæ¬ä½)</h3>
<p>å¯¹åºçè®ºä¸­ç <strong>Embedding -&gt; Attention -&gt; MLP</strong> è®¡ç®è¿ç¨,éè¿ä»config.jsonä¸­å è½½æ¨¡åèº¯ä½ï¼å¨å è½½ä¸æ¨¡åçsafetensorçµé­æ°æ®ä»¥ågeneration_config.jsonçé»è®¤åå§å,<br>
å¨ Kaggle ä¸ï¼æä»¬æ¥æ <strong>å T4 (15GB x 2)</strong>ï¼ä¸å®è¦å©ç¨ <code>device_map="auto"</code> è®©åºèªå¨åéæ¾å­ã</p>
<pre><code class="language-python">from transformers import AutoModelForCausalLM
import torch

# å è½½æ¨¡å
model = AutoModelForCausalLM.from_pretrained(
    model_path,
    device_map="auto",      # å³é®ï¼èªå¨å°æ¨¡åååå°ä¸¤å¼  T4 æ¾å¡ä¸
    torch_dtype=torch.float16, # ä½¿ç¨åç²¾åº¦ï¼èçæ¾å­
    trust_remote_code=True
)

print(f"æ¨¡åå è½½æåï¼æ¾å­åå¸: {model.hf_device_map}")
</code></pre>
<p>è¾åºç»æä¸º</p>
<pre><code class="language-bash">æ¨¡åå è½½æåï¼æ¾å­åå¸: {'model.embed_tokens': 0, 'model.layers.0': 0, 'model.layers.1': 0, 'model.layers.2': 0, 'model.layers.3': 0, 'model.layers.4': 0, 'model.layers.5': 0, 'model.layers.6': 0, 'model.layers.7': 0, 'model.layers.8': 0, 'model.layers.9': 0, 'model.layers.10': 0, 'model.layers.11': 0, 'model.layers.12': 1, 'model.layers.13': 1, 'model.layers.14': 1, 'model.layers.15': 1, 'model.layers.16': 1, 'model.layers.17': 1, 'model.layers.18': 1, 'model.layers.19': 1, 'model.layers.20': 1, 'model.layers.21': 1, 'model.layers.22': 1, 'model.layers.23': 1, 'model.layers.24': 1, 'model.layers.25': 1, 'model.layers.26': 1, 'model.layers.27': 1, 'model.norm': 1, 'model.rotary_emb': 1, 'lm_head': 1}
</code></pre>
<h2 id="4-ææ§çæçè°èæé®">4. ææ§çæçâè°èæé®â</h2>
<p>å¨æ¨¡åè¾åºçè¿ç¨ä¸­ï¼æä»¬æä¸äºåæ°å¯ä»¥å¯¹è¾åºç»æè¿è¡è°èï¼å¯¹åºäºæä»¬è®²çè®ºé¨åçä¸­ç <strong>ç¬¬äºæ­¥ (Softmax æ¦çè¾åº)</strong>, æä»¬æä¸å ä¸ä¸ä¸ªè¯åçæ¦çåå¸äºï¼ä½æ¯æä»¬åºè¯¥å¦ä½å»éæ©å¢ï¼</p>
<h3 id="41-temperature-æ¸©åº¦">4.1 Temperature (æ¸©åº¦)</h3>
<p>æä»¬å¯ä»¥è®¾å®çTemperatureåæ°ï¼æä»¬å¨generation_config.jsonä¸­ä¹çè§è¿å®</p>
<p>å¼è¶å¤§ï¼æ´ç­ï¼æ´å·åé æ§ï¼æ´å®¹æè¾åºåç§å¤©é©¬è¡ç©ºçè¯, ä¼ç¼©å°ææè¯åçå·®è·ï¼<strong>é¨é²åæ²¾</strong>ï¼ä»¥è¾¾å°åé æ§ï¼è®©ä½æ¦ççè¯ï¼ä¹ææºä¼è¢«éä¸­ï¼å½ç¶,ä¹æ´å®¹æè¡è¯´å«éï¼åºç°å¹»è§.<br>
å¼è¶å°ï¼æ´å·ï¼æ´ä¸¥èï¼å¨æ¸©åº¦ä¸º0çæ¶åçè³ä¼åºå®è¾åºæé«çé£ä¸ªè¯ï¼å®ä¼æå¤§é«æ¦çåä½æ¦ççå·®è·ï¼<strong>èµ¢å®¶éå</strong>ï¼è®©æ¨¡åçåç­æ´ç¨³å®ï¼ä¸¥è°¨ã</p>
<h3 id="42-top_p-æ ¸éæ ·">4.2 Top_p (æ ¸éæ ·)</h3>
<p>åæ¸©åº¦ä¸åï¼æä»¬è¿æå¦ä¸ç§æ¹å¼ï¼è¿ç§æ¹å¼æ´ç±»ä¼¼äºæç½ï¼æä»¬åªè¦å¯è½æ§å80%çè¯ï¼å¨é£äºè¯éè¿è¡æéï¼è¿ä¸ªå¯è½æ§å°±æ¯Pï¼è¿ä¸ªéè¯ï¼éæ ·ï¼æ¹æ³åå«top_p(æ ¸éæ ·).<br>
ç®èè¨ä¹ï¼å¶åªå¨ç´¯ç§¯æ¦çè¾¾å° P (e.g., 0.9) çåå ä¸ªè¯ééãç´æ¥åæå°¾é¨é£äºæä½æ¦ççç¦»è°±è¯ã</p>
<h3 id="43-å®éªä¸ä¸">4.3 å®éªä¸ä¸</h3>
<p>æä»¬è¿éåå®ä¹ä¸ä¸ªå½æ°ï¼ä»¥æ¸©åº¦åtop_pä¸ºåæ°å»æµè¯ä¸åçåæ°å¯¹åç­çå½±å</p>
<pre><code class="language-python"># å®ä¹ä¸ä¸ªæµè¯å½æ°
def test_generation(temp, top_p, prompt_text):
    messages = [
        {"role": "system", "content": "ä½ æ¯ä¸ä¸ªåå«çç§å¹»å°è¯´å®¶ã"},
        {"role": "user", "content": prompt_text}
    ]
    text = tokenizer.apply_chat_template(messages, tokenize=False, add_generation_prompt=True)
    inputs = tokenizer([text], return_tensors="pt").to(model.device)

    print(f"\n======== è®¾ç½®: Temperature={temp}, Top_p={top_p} ========")

    try:
        generated_ids = model.generate(
            **inputs,
            max_new_tokens=100,  # éå¶é¿åº¦ï¼æ¹ä¾¿å¿«éçç»æ
            temperature=temp,
            top_p=top_p,
            do_sample=True,      # å¿é¡»å¼å¯éæ ·
            pad_token_id=tokenizer.eos_token_id
        )
        response = tokenizer.batch_decode(generated_ids, skip_special_tokens=True)[0]
        # åªæå°åç­é¨å
        print(response.split('assistant')[-1].strip())
    except Exception as e:
        print(f"çæåºé: {e}")
</code></pre>
<h3 id="æ¸©åº¦å®éª">æ¸©åº¦å®éª</h3>
<p>ç¶ååå¶ä¸æ°å»ºcode blockå»æµè¯ï¼ççææ</p>
<pre><code class="language-python">prompt = "è¯·ç¨è¿ä¸ä¸ªè¯åä¸ä¸ªå¾®æäºï¼éå­ãå¤±æãçé¥­ã"

# 1. ä½æ¸©æ¨¡å¼ (0.1)ï¼ä¸¥è°¨ãæ­»æ¿
test_generation(temp=0.1, top_p=0.9, prompt_text=prompt)

# 2. éä¸­æ¨¡å¼ (0.7)ï¼æ­£å¸¸ãæµç
test_generation(temp=0.7, top_p=0.9, prompt_text=prompt)

# 3. é«æ¸©æ¨¡å¼ (1.5)ï¼ç¯çãæ··ä¹±
# æ³¨æï¼å¯è½ä¼è¾åºä¹±ç æå®å¨ä¸éé¡ºçå¥å­
test_generation(temp=1.5, top_p=0.9, prompt_text=prompt)
</code></pre>
<p>è¿æ¯æçè¿è¡ç»æ</p>
<pre><code class="language-bash">======== è®¾ç½®: Temperature=0.1, Top_p=0.9 ========
å¨éå­ä¸çéï¼æ¶é´ä¸ç©ºé´çæ¦å¿µåå¾æ¨¡ç³ä¸æ¸ï¼èææçä¸çä¹å ä¸ºä¸æ®µå¤±è´¥çææèåå¾ä¸çæ··æ²ãä»å°è¯çç¨éå­çº ç¼ çè®ºæ¥ä¿®å¤èªå·±ç ´ç¢çå¿çµï¼å´æå¤å°å°èªå·±ä»ç°å®ä¸çéå¥äºä¸ä¸ªå¹³è¡å®å®ã

å¨è¿ä¸ªå¹³è¡å®å®ä¸­ï¼ææåç°äºä¸å®¶ç¹å«çé¤é¦ï¼è¿éçå¨å¸æ¯ä¸ä½æ¾ç»çæäººï¼å¥¹æ­£å¨ä¸ºä¸ä½é¡¾å®¢åå¤ä¸éç¹å«ççé¥­ãè¿éçé¥­ä¸ä»è²é¦å³ä¿±å¨ï¼è¿

======== è®¾ç½®: Temperature=0.7, Top_p=0.9 ========
å¨éå­ä¸ççè¾¹ç¼ï¼ææç¬èªä¸äººåå¨ä¸å®¶ä¸èµ·ç¼çå°é¤é¦éï¼é¢åæ¯ä¸ç¢æ®éççé¥­ãä»åå¥³æååæçåå ï¼æ¯å ä¸ºå¥¹æ²è¿·äºèæç°å®ä¸­çéå­ä¸çï¼èä»å´å¯¹ç°å®ä¸çåæ»¡äºçæã

å°±å¨å å¤©åï¼ä»ä»¬æåä¸æ¬¡äºåµåï¼å¥¹åè¯ä»ï¼âææ¾å°äºçæ­£çèªæââä¸ä¸ªç©¿æ¢­å¨éå­ä¸ççæ¢ç´¢èãâå¥¹çä¸äºä¸çæªåå®ççé¥­ï¼ç¶åæ¶å¤±å¨äºèæç°å®ä¸­ã

æææçé£ççé¥­ï¼

======== è®¾ç½®: Temperature=1.5, Top_p=0.9 ========
æ é¢ï¼æ¶ç©ºæ³¡é¥­

æææè¿å¤±æäºï¼æ¯å¤©åªè½ç®ä¸å¤§éæ³¡é¥­æ¥æ¶ç£¨æ¶é´ã

è¿å¤©æææ­£å¨åé¥­ï¼ä»å¿½ç¶æ¥æ¶å°ä¸æ¡éå­ä¿¡å·ãä»æå¥å°åç°é£æ¯èªå·±å¤±æåå¥³åçåæ ä½ç½®ãæ³å°è½ä¸èªå·±ç¸ç±è¿çäººå±åº¦æ¶åæ¯å¤ä¹ç¾å¦çäºæï¼ä»ä¾¿å°èªå·±ç®äºä¸éæ³¡é¥­éè¿äºåæ ä¼ éå¨ã

ç»æå´æ¯ä¸éçé¥­ã

ææç¾æä¸è§£ã
</code></pre>
<h3 id="top_på®éª">top_på®éª</h3>
<p>æ¥ä¸æ¥æ¯top_p</p>
<pre><code class="language-python">prompt_2 = "è¯·ç»ä¸ç§ä¸å­å¨çé¢è²èµ·ä¸ªåå­ï¼å¹¶æè¿°å®çæ ·å­ã"

# 1. æçªéæ · (0.01)ï¼åªéæ¦çæé«çé£ä¸ªè¯ï¼è¿ä¼¼è´ªå©ªæç´¢ï¼
test_generation(temp=0.8, top_p=0.01, prompt_text=prompt_2)

# 2. å®½å¹¿éæ · (0.95)ï¼åè®¸ç½è§è¯åºç°
test_generation(temp=0.8, top_p=0.95, prompt_text=prompt_2)
</code></pre>
<p>è¾åºç»æä¸º</p>
<pre><code class="language-bash">======== è®¾ç½®: Temperature=0.8, Top_p=0.01 ========
è¿ç§ä¸å­å¨çé¢è²æå½åä¸ºâæå°ç´«âãå®æ¯ä¸ç§æ¢¦å¹»è¬çé¢è²ï¼ä»äºç´«è²åé¶è²ä¹é´ï¼ä»¿ä½æ¯å®å®ä¸­æ æ°å¾®å°çæè¾°ç¢çå¨éªçæ¶ææ£ååºçåèãå¨ä¸åçåçº¿ä¸ï¼æå°ç´«ä¼åç°åºä¸åçè²è°ï¼ææ¶åç´«ï¼ææ¶åé¶ï¼ææ¶ååæ¯æºæäºç¹ç¹æåçæ·¡èè²ãå®æ¢ç¥ç§åä¼éï¼ä»¿ä½è½è®©äººæåå°å®å®çæµ©çä¸æ·±éã

======== è®¾ç½®: Temperature=0.8, Top_p=0.95 ========
è¿ç§ä¸å­å¨çé¢è²æç§°ä¹ä¸ºâæéå¹»å½©âï¼Stellar Mirageï¼ãå¨è§è§ä¸ï¼å®å¹¶éåä¸è²è°ï¼èæ¯ä¸ç§å¨æååçè²å½©ç»åï¼åæ¯æ æ°å¾®å°çåç¹å¨ç¼åéªçåå¹»ï¼è¿äºåç¹åå«äºææå¯è§åè°±çé¢è²ï¼åæ¶åå¸¦çä¸ç§ç¥ç§çãä¸å¯åç¶çè²å½©ã

å½è§å¯èæ³¨è§çâæéå¹»å½©âçæ¶åï¼ä»å¯ä»¥çå°èãç»¿ãç´«ç­é¢è²å¿«éå°å¨ç¼ååæ¢åæ··åï¼å®ä»¬ä»¥ä¸ç§å 
</code></pre>
<h2 id="5-å®æ´-transformers-ä»£ç å®æ">5. å®æ´ Transformers ä»£ç å®æ</h2>
<p>æææç§¯æ¨æ­å¨ä¸èµ·ï¼è¿å°±æ¯ä¸æ®µæ åçæ¨¡åæ¨çä»£ç ï¼</p>
<pre><code class="language-python">import torch
from transformers import AutoModelForCausalLM, AutoTokenizer

# 1. è®¾ç½®æ¨¡å ID
model_id = "/kaggle/input/qwen2.5/transformers/7b-instruct/1/"

# 2. å è½½ç¿»è¯å®
tokenizer = AutoTokenizer.from_pretrained(model_id, trust_remote_code=True)

# 3. å è½½å¤§è (åå¡æ¨¡å¼)
model = AutoModelForCausalLM.from_pretrained(
    model_id,
    device_map="auto",
    torch_dtype=torch.float16,
    trust_remote_code=True
)

# 4. åå¤è¾å¥
prompt = "è¯·ç¨è¿ä¸ä¸ªè¯åä¸ä¸ªå¾®å°è¯´ï¼Kaggleãæ·±å¤ãçæ¾å­"
messages = [
    {"role": "system", "content": "ä½ æ¯ä¸ä¸ªå¹½é»çç¨åºåã"},
    {"role": "user", "content": prompt}
]

text = tokenizer.apply_chat_template(messages, tokenize=False, add_generation_prompt=True)
model_inputs = tokenizer([text], return_tensors="pt").to(model.device)

# 5. çæ (è°èåæ°ï¼)
print(" æ­£å¨çæ...")
generated_ids = model.generate(
    **model_inputs,
    max_new_tokens=512,
    temperature=0.8,  # ç¨å¾®æç¹åæ
    top_p=0.9,        # åé¤ç¦»è°±è¯
    do_sample=True    # å¿é¡»å¼å¯éæ ·ï¼æ¸©åº¦æçæ
)

# 6. è§£ç å¹¶è¾åº
generated_ids = [
    output_ids[len(input_ids):] for input_ids, output_ids in zip(model_inputs.input_ids, generated_ids)
]
response = tokenizer.batch_decode(generated_ids, skip_special_tokens=True)[0]

print("-" * 20)
print(f" åç­:\n{response}")
print("-" * 20)
</code></pre>
<p>è¿æ¯è¾åºç»æ</p>
<pre><code class="language-bash">Loadingâcheckpointâshards:â100%
â4/4â[00:13&lt;00:00,ââ3.27s/it]
The module name  (originally ) is not a valid Python identifier. Please rename the original module to avoid import issues.
WARNING:accelerate.big_modeling:Some parameters are on the meta device because they were offloaded to the cpu.
 æ­£å¨çæ...
--------------------
 åç­:
å¨ä¸ä¸ªå¯å·çæ·±å¤ï¼æé·åå¨ä»é£é´å æ»¡åå¡ç½åä»£ç æä»¶çæ¿é´éï¼å±å¹ä¸æ¯Kaggleç«èµçæ°æ®éãä»æ­£å°è¯è®­ç»ä¸ä¸ªå¤æçæ·±åº¦å­¦ä¹ æ¨¡åãç¶èï¼å°±å¨ä»è®¤ä¸ºèå©å¨æçæ¶åï¼âå¶~âçä¸å£°ï¼æ¾ç¤ºå¨ç¬é´åæäºä¸çæ¼é»ï¼ä¼´éçä¸å£°æ²å£®çâçæ¾å­äºâã

æé·æäºæç¼çï¼ççç¼åä¸çç©ºç½çå±å¹ï¼å¿ä¸­åæ»¡äºæ«è´¥æï¼ä½ä»è½¬å¿µä¸æ³ï¼âè¿å¥½ä¸æ¯âçåå­äºâï¼å¦åæè¿å°èæ§çµèå¯è½å°±è¦å½»åºéä¼äºãâäºæ¯ï¼ä»åå¼å§è°æ´åæ°ï¼å¸æè½å¨è¿ä¸ªæ·±å¤éæ¾å°é£ä¸ªéèå¨æ°æ®æµ·æ´ä¸­çå®èã
--------------------
</code></pre>
<h3 id="hint">Hint:</h3>
<p><strong>ææçä»£ç ï¼é½å¯ä»¥å¨ <a href="https://www.kaggle.com/code/thaodinhoio/llm03-transformers" target="_blank" rel="noopener nofollow">è¿ä¸ªç¬è®°æ¬</a>ä¸­ç´æ¥è·åè¿è¡å¦</strong></p>
<h2 id="6-å¸¸è§é®é¢-qa">6. å¸¸è§é®é¢ (Q&amp;A)</h2>
<p><strong>Q: å¨ Kaggle ä¸ <code>device_map="auto"</code> æ¯å¿é¡»çåï¼</strong><br>
<strong>A:</strong> å¦æä½ ä½¿ç¨åå¡ T4 (15GB) è· 7B æ¨¡åï¼çº¦ 14GBï¼ï¼åå¼ºè½å¡è¿ä¸å¼ å¡ãä½å¦æä½ å¼å¯äº Kaggle ç <strong>T4 x2</strong>ï¼ä¸ºäºå©ç¨å¨é¨ 30GB æ¾å­ï¼<strong>å¿é¡»</strong>å è¿ä¸ªåæ°ï¼å¦åæ¨¡ååªä¼å¡è¿ç¬¬ä¸å¼ å¡ï¼å¯¼è´ç¬¬ä¸å¼ çæ»¡ï¼ç¬¬äºå¼ å´è§ã</p>
<p><strong>Q: ä¸ºä»ä¹çæçæ¯ä¸å¥è¯é½ä¸ä¸æ ·ï¼</strong><br>
<strong>A:</strong> å ä¸ºæä»¬å¼å¯äº <code>do_sample=True</code> å¹¶ä¸è®¾ç½®äº <code>temperature &gt; 0</code>ãæ¨¡åå¨éæ©ä¸ä¸ä¸ªè¯æ¶æ¯<strong>ææ¦çéæºæ½å</strong>çãå¦æä½ æ³è®©ç»ææ¯æ¬¡é½ä¸æ ·ï¼æ¯å¦åæ°å­¦é¢ï¼ï¼è¯·è®¾ç½® <code>do_sample=False</code>ï¼æ­¤æ¶æ¸©åº¦å¤±æï¼åä¸ºè´ªå©ªè§£ç ï¼ã</p>
<p><strong>Q: ä»ä¹æ¯ Logitsï¼</strong><br>
<strong>A:</strong> å¨ä»£ç æ·±å¤ï¼æ¨¡åè¾åºçé£ä¸ªâæ¦çè¡¨âå¨åæç¾åæ¯ä¹åï¼å« Logitsï¼æªå½ä¸åçæ°å¼ï¼ãSoftmax å½æ°çä½ç¨å°±æ¯æ Logits åææ¦çãä½ å¯ä»¥æ Logits çè§£ä¸ºæ¨¡åå¯¹æ¯ä¸ªè¯çâåå§æåâã</p>
<p><strong>Q: Token åå­æ¯ä¸ä¸å¯¹åºçåï¼</strong><br>
<strong>A:</strong> ä¸ä¸å®ã</p>
<ul>
<li>è±æï¼éå¸¸ä¸ä¸ªåè¯æ¯ä¸ä¸ª Tokenï¼é¿åè¯å¯è½è¢«ååã</li>
<li>ä¸­æï¼éå¸¸ä¸ä¸ªæ±å­æ¯ä¸ä¸ª Tokenï¼ä½å¸¸è§è¯ï¼å¦âä½ å¥½âï¼å¯è½ä¼åå¹¶ä¸ºä¸ä¸ª Tokenã</li>
<li>å¹³åæ¥è¯´ï¼<strong>0.75 ä¸ªè±æåè¯ â 1 Token</strong>ï¼<strong>1 ä¸ªæ±å­ â 1.5 - 2 Token</strong>ï¼åå³äºåè¯å¨æçï¼Qwen çä¸­æåç¼©çå¾é«ï¼ã</li>
</ul>
<hr>
<p><strong>æ¬æä½èï¼</strong> Algieba<br>
<strong>æ¬æé¾æ¥ï¼</strong> <a href="https://blog.algieba12.cn/llm03-know-more-about-transformer-lib/" target="_blank" rel="noopener nofollow">https://blog.algieba12.cn/llm03-know-more-about-transformer-lib/</a><br>
<strong>çæå£°æï¼</strong> æ¬åå®¢æææç« é¤ç¹å«å£°æå¤ï¼åéç¨ BY-NC-SA è®¸å¯åè®®ãè½¬è½½è¯·æ³¨æåºå¤ï¼</p>
<pre><code>
</code></pre>


</div>
<div class="clear"></div>

		</div>
		<div class="itemdesc">
			åè¡¨äº 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-05 19:34">2026-02-05 19:33</span>&nbsp;
<a href="https://www.cnblogs.com/algieba">é¿å°çä»£ç å±</a>&nbsp;
éè¯»(<span id="post_view_count">60</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19581327);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19581327', targetLink: 'https://www.cnblogs.com/algieba/p/19581327', title: '[å¤§æ¨¡åå®æ 03] æè§£ Transformersï¼ä»åçå¾è§£å° HuggingFace Transformers å®æ' })">ä¸¾æ¥</a>

		</div>
	 ]]>
    </description>
    </item>
        </channel>
        </rss>