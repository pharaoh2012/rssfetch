<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åå®¢å­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2026-01-04T08:23:09.184Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åå®¢å­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ è®©WinFormsåæ¬¡ä¼å¤§ ]]></title>
    <link>https://www.cnblogs.com/xdesigner/p/19438384/Make_WinForms_Great_Again</link>
    <guid>a0896da9d654c4cb0ac9e261aa377cc6</guid>
    <description>
    <![CDATA[ 
		<h2>
			<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xdesigner/p/19438384/Make_WinForms_Great_Again" title="åå¸äº 2026-01-04 15:49">
    <span role="heading" aria-level="2">è®©WinFormsåæ¬¡ä¼å¤§</span>
    

</a>

		</h2>
		<div class="postText">    <div id="cnblogs_post_description" style="display: none">
        
        æ¬é¡¹ç®å°±æ¯ä¸é¨å¸®å©å°WinForms åºç¨ç¨åºè¿ç§»å° Blazor WASMå¹³å°ä¸ï¼å³ä½¿è¿äºç¨åºä½¿ç¨GDI+åè½ï¼æä»¬ä¹é¢æå°å¯¹è¿äºç¨åºæºç çä¿®æ¹éä¸è¶è¿10%ãè¿æå¤§çéä½WinFormsè½¯ä»¶ç°ä»£åçææ¬åé£é©ã
æä»¬çé¿æç®æ æ¯è½å°å¨ç1000äº¿è¡ç»è¿å¸åºéªè¯çC#ä»£ç è½éè·æ°çï¼å¨ç°ä»£Webåç«¯å¹³å°ä¸ç»§ç»­åæ¥ä»·å¼ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="è®©-winforms-åæ¬¡ä¼å¤§-httpsgithubcomdcsoft-yyfmwga">è®© WinForms åæ¬¡ä¼å¤§ <a href="https://github.com/dcsoft-yyf/MWGA" target="_blank" rel="noopener nofollow">https://github.com/dcsoft-yyf/MWGA</a></h1>
<h2 id="æ´æ°æ¥å¿">æ´æ°æ¥å¿</h2>
<ul>
<li>2026-1-4 :ç¬¬ä¸æ»´è¡ <a href="https://dcsoft-yyf.github.io/MWGA/WinFormCalculator.html" target="_blank" rel="noopener nofollow">https://dcsoft-yyf.github.io/MWGA/WinFormCalculator.html</a></li>
</ul>
<h2 id="å¨ç-winforms-ç°ä»£åç°ç¶">å¨ç WinForms ç°ä»£åç°ç¶</h2>
<p>å¨çèå´åï¼ä¼°è®¡WinFormså¼åèçº¦æ300ä¸è³500ä¸äººï¼å .NETå¼åèæ»æ°ç40%è³50%ãçäº§ç¯å¢ä¸­è¿è¡ç1000ä¸è³1500ä¸ä¸ªWinFormsåºç¨ç¨åºãå¨è¿äºåºç¨ä¸­ï¼60%è³80%æç°ä»£åæ¹é éæ±ï¼å¶ä¸­40%è³60%ä¼åéæ©Webåè¿ç§»ï¼æ¶åçC#ä»£ç å¯è½æ<code>æ°åäº¿è¡</code>ãæ ¸å¿é©±å¨å ç´ åæ¬ç½é¡µç«¯è®¿é®ãçé¢ç°ä»£åãè·¨å¹³å°æ¯æãäºéæåå®å¨åè§ãç±äºå¯å¤ç¨C#ä»£ç ä¸å·å¤åºäºæµè§å¨çè·¨å¹³å°è½åï¼Blazor WebAssemblyæä¸ºç­é¨éæ©ã</p>
<p>ä½æ¯æå¤§éçWinFormsä½¿ç¨äº<code>System.Drawing</code>æ¨¡åè°ç¨<code>GDI+</code>è¿è¡å¤æçèªå®ä¹ç»å¾åäº¤äºï¼è¿äºé¨åé¾ä»¥éè¿ç®åçæ§ä»¶æ å°è¿ç§»ï¼éå¸¸éè¦éåæå¤§å¹ä¿®æ¹ãä¸ºæ­¤ï¼å¸åºä¸å¯¹ä½æ¹å¨ãå¯å¤ç¨ä¸å¡é»è¾åç»å¾ä»£ç çç°ä»£åè¿ç§»è§£å³æ¹æ¡éæ±å¼ºçãä½é¿æä»¥æ¥ä¸ç´ç¼ºä¹ææå·¥å·åæ¹æ³ï¼å¯¼è´è®¸å¤ä¼ä¸é¢ä¸´é«æçéåææ¬åé£é©ã</p>
<h2 id="é¡¹ç®ç®ä»">é¡¹ç®ç®ä»</h2>
<p>æ¬é¡¹ç®å°±æ¯ä¸é¨å¸®å©å°WinForms åºç¨ç¨åºè¿ç§»å° Blazor WASMå¹³å°ä¸ï¼å³ä½¿è¿äºç¨åºä½¿ç¨GDI+åè½ï¼æä»¬ä¹é¢æå°å¯¹è¿äºç¨åºæºç çä¿®æ¹éä¸è¶è¿<code>10%</code>ãè¿æå¤§çéä½WinFormsè½¯ä»¶ç°ä»£åçææ¬åé£é©ã</p>
<p>æä»¬çé¿æç®æ æ¯è½å°å¨ç<code>1000äº¿</code>è¡ç»è¿å¸åºéªè¯çC#ä»£ç è½éè·æ°çï¼å¨ç°ä»£Webåç«¯å¹³å°ä¸ç»§ç»­åæ¥ä»·å¼ã</p>
<h2 id="å¨çå¾è¿ç§»-winforms-åºç¨å¸åºè§æ¨¡ä¼°ç®ç¾å">å¨çå¾è¿ç§» WinForms åºç¨å¸åºè§æ¨¡ä¼°ç®ï¼ç¾åï¼</h2>
<p>åè®¾éè¦è¿ç§»ç WinForms åºç¨çº¦ 50 ä¸ â 200 ä¸ ä¸ªï¼åºç¨å¤æåº¦åå¸ï¼ç®å 60%ãä¸­ç­ 30%ãå¤æ 10%ã</p>
<ul>
<li>æç¤ºä¾ååºç¨è¿ç§»ææ¬ä¸­ä½æ°ä¼°ç®ï¼ç¾åï¼ï¼å æåä»·çº¦ 5.5 ä¸ç¾å/åºç¨ã</li>
<li>TAMï¼æ»å¯å¯»åå¸åºï¼ä¼°ç®ï¼çº¦ 275 äº¿ â 1,100 äº¿ ç¾åï¼50 ä¸ â 200 ä¸ åºç¨ Ã 5.5 ä¸ç¾åï¼ã</li>
<li>å·¥å·/è®¸å¯æ¨¡å¼å¯å¯»åå¸åºï¼5 å â 2 ä¸ ç¾å/åºç¨ï¼ï¼çº¦ 25 äº¿ â 400 äº¿ ç¾åã</li>
<li>å¤æåºç¨ï¼10%ï¼å¸åºï¼çº¦ 5 ä¸ â 20 ä¸ ä¸ªï¼ææ¯ä¾ 15 ä¸ç¾åè®¡çº¦ 75 äº¿ â 300 äº¿ ç¾åã</li>
</ul>

</div>
<div class="clear"></div>
</div>
		<p class="postfoot">
			posted on 
<span id="post-date" data-last-update-days="0.004166666666666667" data-date-updated="2026-01-04 15:55">2026-01-04 15:49</span>&nbsp;
<a href="https://www.cnblogs.com/xdesigner">è¢æ°¸ç¦ çµå­çåï¼å»çä¿¡æ¯å</a>&nbsp;
éè¯»(<span id="post_view_count">82</span>)&nbsp;
è¯è®º(<span id="post_comment_count">1</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19438384);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19438384', targetLink: 'https://www.cnblogs.com/xdesigner/p/19438384/Make_WinForms_Great_Again', title: 'è®©WinFormsåæ¬¡ä¼å¤§' })">ä¸¾æ¥</a>

		</p>
	 ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ è¯»ååç¦»é¢ä¸´çé®é¢åå¶è§£å³æ¹æ¡ ]]></title>
    <link>https://www.cnblogs.com/huang-changfan/p/19185323</link>
    <guid>d3d0a296443c28956ef875681ebbc7c0</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/huang-changfan/p/19185323" title="åå¸äº 2026-01-04 15:48">
    <span role="heading" aria-level="2">è¯»ååç¦»é¢ä¸´çé®é¢åå¶è§£å³æ¹æ¡</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="1è¯»ååç¦»å¸¦æ¥çé®é¢åè§£å³æ¹æ³">1.è¯»ååç¦»å¸¦æ¥çé®é¢åè§£å³æ¹æ³</h1>
<h2 id="11-å»¶æ¶é®é¢">1.1 å»¶æ¶é®é¢</h2>
<p>ä¸»ä»å¤å¶ï¼ä¸»åºä¸ä»åºä¹é´ç±äºç½ç»ï¼è®¾å¤å·®å¼ï¼è´è½½æåµç­ï¼å¿ç¶å­å¨å»¶æ¶ï¼å»¶æ¶æå¤§æå°ï¼åªè¦å»¶æ¶ä¿æåä¸ä¸ªåççèå´åæ¯å¯ä»¥æ¥åçã</p>
<p>1.1.1é æä¸»ä»å»¶æ¶çåè§åå </p>
<ul>
<li>ä¸»ä»è®¾å¤å·®å¼ï¼ä¾å¦ä¸»åºæ§è½è¾å¥½ï¼ä»åºæ§è½è¾å·®ï¼å¯¹äºåæ ·çåå¥ææ´æ°æä½ï¼ä¸»åºè½è¾å¿«å®æï¼ä»åºè±è´¹æ¶é´è¾å¤ï¼å¦æç³»ç»æç»­ç»´æé«é¢çåå¥æ´æ°ï¼ä¸»åºä¸ä»åºä¹é´çå·®å¼ä¼è¢«éæ¸æå¤§ãå¯¼è´ä¸»ä»çå»¶è¿è¶æ¥è¶å¤§ãå¯¹äºè¿ç§æåµï¼éè¦å°½éä¿è¯ä¸»ä»æå¡å¨æ§è½ä¸è´ï¼ä½¿å¾ä¸¤ç§å¤çç¸åéçæ°æ®è±è´¹çæ¶é´å°½å¯è½æ¥è¿ãè¿æ ·ä¸è¬æåµèè¨ä¸»ä»å»¶æ¶å¯ä»¥ä¿è¯å¨ä¸ä¸ªåçèå´ï¼ä¸ä¼åºç°å¾å¤§çå·®å¼ã</li>
<li>ä»åºä¸æ§è¡äºè¿å¤ä»»å¡ï¼ç±äºä»åºæ¯åªè¯»çï¼å ä¸ç¸æ¯äºä¸»åºèè¨éè¦æ§æ²¡é£ä¹é«ï¼æä»¥å¶ä»ç³»ç»å¯è½ä¼ä»åºè¿è¡å¤§éçæ°æ®åæ­¥æåæä¸å¡ï¼å¯¼è´ä»åºè¢«å ç¨è¿å¤èµæºï¼å¤çä»ä¸»åºåæ­¥è¿æ¥çæ¥å¿è¾æ¢ï¼é æäºå»¶è¿ãæ­¤æ¶éè¦æ³¨æä»åºçååï¼èèè´è½½åè¡¡æéç¨å¶ä»æ¹å¼ä½¿å¾ä»åºè´è½½ä¸è¦å¤ªé«ï¼é æè¾é¿å»¶è¿ã</li>
<li>å¤§äºå¡ï¼å¦æä¸»åºæ§è¡ä¸ä¸ªè¦æ´æ°æå é¤å¤§éæ°æ®çSQLï¼ä¾å¦ä¸»åºé½éè¦æ§è¡20s.é£ä¹å¯¹äºè¯­å¥ææ°æ®ï¼åå³äºbinlogæ ¼å¼ï¼å¤å¶å°ä»åºï¼ä»åºä¹éè¦æ§è¡20s.è¿æ ·ä¸»ä»ä¹é´å°±å¤©ç¶çå­å¨ä¸ä¸ªå»¶è¿ï¼è¿ä¸ªå»¶æ¶ç±äºå¡çæ§è¡æ¶é´å³å®ãæä»¥éè¦é¿åå¤§äºå¡ï¼å¼åè¿ç¨ä¸­å°±éè¦æ³¨æï¼åæ¶éè¦æ·»å çæ§ï¼å¯¹äºæ§è¡æåµè¿è¡çæ§é¢è­¦ã</li>
</ul>
<p>æé«ä»åºå¤å¶æ§è½çæ¹æ³ï¼ä»åºçioçº¿ç¨éè¿è¯»åä¸»åºçæ¥å¿ï¼ç¶åsqlçº¿ç¨å°è¯»åæ¥å¿åå®¹æ§è¡ï¼å¦ææ§è¡sqlççº¿ç¨æ¯åçº¿ç¨æ§è¡æçä¼åä½ãä¸»åºåå¥æ¶æ¯å¯ä»¥å¹¶ååå¥çï¼å¦æä»åºæ§è¡éç¨å¤çº¿ç¨æ§è¡ï¼å¯ä»¥æé«ä»åºçå¤å¶æçéä½å»¶è¿ãMySQLä¼å¤æ­å¯ä»¥å¹¶åæ§è¡çé¨åè¯­å¥ä½¿ç¨å¤ä¸ªçº¿ç¨å¹¶åæ§è¡ã</p>
<h2 id="12--è¯»ååç¦»çææè¯»ä¸è´æ§">1.2  è¯»ååç¦»çææï¼è¯»ä¸è´æ§</h2>
<p>ä¸»ä»çå»¶è¿æ»ä¼å­å¨ï¼é£ä¹ä¸ä¸ªæä½åå¥ä¸»åºï¼æ­¤æ¶ä»ä»åºè¯»åæ°æ®ï¼å¯è½è¯»å°å¯è½è¯»ä¸å°ï¼è¿åå³äºä»åºçå»¶è¿ä»¥åè¯»åçæ¶æºãå¦æä¸»ä»å»¶è¿å¤§äºï¼åå¥ä¸»åºä¸è¯»åä»åºçé´éï¼é£ä¹è¯»åçä»åºå°±ä¸ä¼å­å¨è¿æ¬¡åå¥æä½ãåä¹å°±å¯ä»¥è¯»åå°è¿æ¬¡åå¥æä½ãè¿ä¸¤ç§æåµå­å¨ä¸å®çéæºæåï¼ä¾å¦ç¨æ·åå¥ä¸»åºåï¼å¾å¿«è¿è¡äºè¯»åï¼å¯è½è¿æ¬¡è¯»åçä»åºæ²¡æå½åçåå¥æ°æ®ãå¦æç¨æ·éäºä¸æ®µæ¶é´æè¯»åï¼è¿æ¬¡å¯è½å¯ä»¥å¨ä»åºä¸­è¯»åå¯¹äºçæä½ã<br>
ç±æ­¤å¼åäºè¯»ä¸è´çé®é¢ï¼æäºæä½å¯ä»¥æ¥åä¸å®ç¨åº¦çå»¶è¿ï¼æäºæä½ä¸è½æ¥æ¶å»¶è¿ï¼éè¦ä¿è¯ååç«å³å¯è§ã</p>
<h3 id="121-è¯»ä¹æå">1.2.1 è¯»ä¹æå</h3>
<p><img src="https://img2024.cnblogs.com/blog/1435315/202511/1435315-20251129211311701-1878061974.png" alt="image" loading="lazy"><br>
ä¾å¦ç¨æ·ç¼è¾èªå·±çä¸»é¡µä¿¡æ¯ï¼ä¿å­åå·æ°é¡µé¢è·åèªå·±çä¸»é¡µä¿¡æ¯ãç¬¬ä¸ä¸ªæä½æ¯åæä½ï¼è¯·æ±ä¼è¢«è·¯ç±å°ä¸»åºï¼ç¬¬äºä¸ªæä½æ¯è¯»æä½ä¼è¢«è·¯ç±å°ä»åºã<br>
å¦æä¸»åºä¸ä»åºä¹é´å­å¨å»¶æ¶ï¼ä¸ç¬¬äºæ¬¡è¯»åæä½çä»åºè¿æ²¡æåæ¶åæ­¥ä¸»åºçæ°æ®ï¼æ­¤æ¶å°±ä¼åºç°æªå¼çç°è±¡ï¼ç¨æ·ç¼è¾åæ§è¡ä¿å­ï¼æç¤ºä¿å­æåãä½ä»å·æ°é¡µé¢ï¼åç°é¡µé¢è¿æ¯ä¿®æ¹åçä¿¡æ¯ã<br>
è¿æ¾ç¶ä¼å¯¹ç¨æ·é æå°æ°ï¼æèæä¸è´æ§è¢«ç ´åï¼è®°å½æç¤ºäºç¨æ·ä¿å­æåï¼é£ä¹å·æ°é¡µé¢è¯»åæ¶åºè¯¥è¯»åå°ä¿å­çæ°æ®ï¼ä½å®éæåµç¡®æ²¡æè¯»åå°ãè¿ç§ä¸ä¸è´æ§å¯è½è¿ä¼å¯¼è´ç¨æ·éå¤æä½ï¼é ææå¤±ï¼ä¾å¦ç¨æ·æ§è¡ä¸ä¸ªæä½æç¤ºæåï¼ç¶åç¨æ·æ¥è¯¢ï¼åç°æ²¡æè®°å½åæçæä½ï¼ä»å¯è½ä¼åæ¬¡æ§è¡è¿ä¸ªæä½ï¼åç»­ä¸»ä»åæ­¥å®æ¯åï¼ä»ä¼æ¥è¯¢å°ä¸¤æ¬¡æä½ï¼å¯ä»çé¢ææ¯åªè¿è¡ä¸æ¬¡æä½ã<br>
éå¯¹ç¨æ·åå¥åï¼éè¦è¯»åå°èªå·±åå¥çææ°æ°æ®ï¼è¿ç§è¯»ä¸è´æ§ç§°ä¸ºè¯»å·±æåã</p>
<p>å¦ä½ä¿è¯è¯»å·±æåçéç¦»çº§å«ï¼</p>
<ul>
<li>è¯»ä¸»åºï¼ç®åç²æ´ç´æ¥è¯»ä¸»åºï¼å¦æå½åçè¯»æä½å¯¹ä¸è´æ§è¦å»è¾é«ï¼ç´æ¥è¯»ä¸»åºï¼è¿æ¬¡è¯·æ±è¯å®ä¿è¯è¯»çä¸è´æ§ï¼å¯¹äºåä¸ä¸ªå®ä¾å°±ä¸å­å¨ä¸è´æ§é®é¢äºãä½å¶ç¼ºç¹ä¹å¾ææ¾ï¼è¯»ååç¦»æ¯ä¸ºäºå°è¯»æä½è·¯ç±å°ä»åºï¼éä½ä¸»åºè´è½½ï¼ä½¿å¾ç³»ç»æä¾æ´å¤çååéãå¦æå¤æ°è¯»è¯·æ±æåè¿æ¯è¢«è·¯ç±å°äºä¸»åºï¼æ©å±æ§éä½äºï¼å¤§éæä½é½ä¾èµä¸»åºï¼æ²¡æè¢«å¥ç¦»åºæ¥ã</li>
<li>å¤æ­ä¸»ä»ç¹ä½ï¼éæ©åéçä»åº<br>
ä¾å¦ç¨æ·åå¥ä¸»åºåï¼å½åbindlogçç¹ä½æ¯100.æ§è¡<code>show slave status;</code>è·åä»åºåæ­¥ä¸»åºçç¹ä½ä¿¡æ¯ï¼å¦æå½åä»åºçç¹ä½ä¿¡æ¯å¤§äºç­äºä¸»åºï¼é£ä¹ä¸»åºä¹åçåæä½å¨è¯¥ä»åºæ¯å¯è§çã<br>
<img src="https://img2024.cnblogs.com/blog/1435315/202511/1435315-20251129213640521-349884627.png" alt="image" loading="lazy"><br>
ä¾å¦ä¸å¾ï¼å¦æä¸»åºåå¥çæ¶çç¹ä½å°äºç­äºå½åä»åºçç¹ä½ï¼é£ä¹æ­¤æ¬¡è¯»åæä½å¯¹ä¹åçåå¥æä½å¯è§ã<br>
å½ç¶ï¼å¦æä¸»ä»å»¶æ¶æ¯è¾å¤§ï¼ä¾å¦30s.ä¸å¯è½ç­å°ä»åºåæ­¥å¥½ä¹ååæ¥è¯¢ä»åºï¼å»¶æ¶è¾å¤§æåµï¼æå®æ¶é´åæ²¡ææ»¡è¶³æ¡ä»¶çä»åºéè¦è§¦åéçº§é»è¾ï¼å¯ç´æ¥æ¥è¯¢ä¸»åºãåæ¶æ·»å å¥½çæ§ï¼å»¶æ¶è¾¾å°ä¸ééè¦åè­¦ï¼åæ¶ç»è®¡å¥½è·¯ç±ä»åºå¤±è´¥è¢«è½¬åå°ä¸»åºçæä½ï¼æ³åæ³ä¼åå¯¹åºé®é¢ã</li>
</ul>
<p>å½ç¶ä¹ä¸æ¯ææçæä½éè¦è¯»å·±æåï¼è¿éè¦æ ¹æ®å·ä½ä¸å¡æåµåæãä»¥ä¸ä¾ä¸ºä¾ï¼å¯¹äºç¨æ·ç¼è¾èªå·±ä¸»é¡µä¿¡æ¯ï¼å¯¹äºç¨æ·æ¬äººæ¥è¯´è¯å®æ¯éè¦è¯»å·±æåçãå½å¯¹äºå¶ä»äººæ¥è¯´åä¸éè¦è¯»å·±æåï¼è®¿é®å¶ä»äººçä¸»é¡µï¼ç±äºèªå·±ä¸å¯è½ç¼è¾ä»äººçä¸»é¡µï¼æä»¥ä¸»é¡µçåæä½å¯¹ä»äººæ¥è¯´æ¯ä¸å¯è§çï¼æ­¤æ¶ç´æ¥è¯»åä»åºå³å¯ï¼ç­å¾ä»åºåæ­¥å¥½å¯¹åºæ°æ®åï¼æè¯»åææ°æ°æ®ä¹æ¯å¯ä»¥æ¥åçãè¿æ ·çè¯»åå¶ä»ç¨æ·çä¸»é¡µä¼¼ä¹æ²¡æé®é¢ï¼ä½æ¶åæ­¥å¥½å°±ä½æ¶è¯»åææ°æ°æ®ï¼ä½æ¯å­å¨å¤ä¸ªä»åºåä¼å¸¦æ¥æ°çé®é¢ï¼è¿å°±æ¯ä¸ä¸èçåè°è¯»é®é¢ã</p>
<h3 id="122åºäºsharding-jdbcå®ç°è¯»ä¹æå">1.2.2åºäºsharding jdbcå®ç°è¯»ä¹æåã</h3>
<ul>
<li>åºæ¬ç¯å¢ï¼ä¸ä¸»ä¸¤ä»åºäºjdbcãä¸»åº3310ç«¯å£ï¼ä»åº3311ï¼3312ç«¯å£.</li>
<li>å®ç°æè·¯ï¼èªå®ä¹ä»åºéæ©ç®æ³ï¼å¦æéè¦è¯»å·±æåï¼å°è¯·æ±è·¯ç±å°åéçä»åºï¼å¦ææ²¡æä»åºç¬¦åæ¡ä»¶ï¼è·¯ç±å°ä¸»åºã</li>
<li>æ´ä½æµç¨ï¼
<ol>
<li>å®æ¶Jobè¯»åä¸»åºä»åºç¹ä½ä¿¡æ¯è®°å½å¨Redisä¸­ã</li>
<li>å¯¹äºéè¦è®°å½ç¹ä½ä¿¡æ¯çåæä½æ·»å æ³¨è§£ï¼åå¥åè®°å½äºå¡æäº¤æ¶çç¹ä½ä¿¡æ¯</li>
<li>è¯»è¯·æ±æ·»å æ³¨è§£ï¼æ è¯å½åè¯·æ±æ¯å¦éè¦è¯»ä¹æåï¼è®°å½å¨ä¸ä¸æä¸­ã</li>
<li>æ ¹æ®å½åç¨æ·åå¥æä½æ¶è®°å½çç¹ä½ï¼éæ©åéçä»åºï¼å¦ææ²¡æç¬¦åæ¡ä»¶çï¼éçº§å°ä¸»åºã</li>
</ol>
</li>
</ul>
<pre><code>    /**  
     * 1.å®æ¶Jobè¯»åä¸»åºä»åºç¹ä½ä¿¡æ¯è®°å½å¨Redisä¸­ã
     * æ¯500mså·æ°ä¸»åºä¸åºç¹ä½ä¿¡æ¯
     *
     * @throws SQLException
     */
    @Scheduled(fixedRate = 5000) // æ¯500msæ´æ°ä¸æ¬¡
    public void refreshSlavePositon() throws SQLException {
        log.info("zookeeper info ={}", JSON.toJSONString(this.zookeeperCurrentVersionInfoHolder));
        //åå¥ä»åºç¹ä½
        Map&lt;String, Connection&gt; slaveConnection = getSlaveConnection();
        slaveConnection.forEach((slaveName, connection) -&gt; {
            try {
                log.info("slave={} url={}", slaveName, connection.getMetaData().getURL());
            } catch (SQLException e) {
                throw new RuntimeException(e);
            }
            BinlogPosition binlogPosition = this.getSlaveBinLogPoint(connection);
            redisTemplate.&lt;String, String&gt;opsForHash().put(slavesPositionInfoCachePreKey, slaveName, JSON.toJSONString(binlogPosition));
        });

        //åå¥ä¸»åºç¹ä½
        Connection masterConnection = getMasterConnection();
        log.info("masterConnection url={}", masterConnection.getMetaData().getURL());
        BinlogPosition binlogPosition = this.getMasterBinLogPoint(masterConnection);
        redisTemplate.&lt;String, String&gt;opsForHash().put(slavesPositionInfoCachePreKey, MASTER_DB_NAME, JSON.toJSONString(binlogPosition));
    }
</code></pre>
<pre><code>/**
 * 2.å¯¹äºéè¦è®°å½ç¹ä½ä¿¡æ¯çåæä½æ·»å æ³¨è§£ï¼åå¥åè®°å½äºå¡æäº¤æ¶çç¹ä½ä¿¡æ¯
 */
@Slf4j
@Aspect
@Component
public class CacheUserBinlogPositionAspect {

    @Autowired
    private BinlogPositionService binLogService;

    @Pointcut("@annotation(com.example.annotation.CacheUserBinlogPosition)")
    public void cacheUserMasterPositionCut() {
    }

    @AfterReturning(pointcut = "cacheUserMasterPositionCut()", returning = "result")
    public Object cacheMasterPosition(JoinPoint joinPoint, Object result) throws Throwable {
        String uid = UserManager.getUid();

        // æ³¨åäºå¡åè°ï¼ç±äºæ§è¡å°æ¹åé¢æ¶ï¼äºå¡çåé¢è¿æ²¡ææäº¤ï¼æä»¥éè¦æ³¨åäºå¡æäº¤åæ§è¡è·åç¹ä½æ¹æ³ï¼ä»¥ç¡®ä¿è·åæäº¤åçç¹ä½ä¿¡æ¯
        TransactionSynchronizationManager.registerSynchronization(
                new TransactionSynchronization() {
                    @Override
                    public void afterCommit() {
                        // å¨äºå¡æäº¤åæ§è¡
                        try {
                            //è·åä¸»åºç¹ä½
                            BinlogPosition masterDBPosition = binLogService.getMasterBinLogPoint();
                            //ç¼å­å½åç¨æ·ä¸»åºç¹ä½
                            binLogService.cacheUserBinlogPosition(uid, masterDBPosition);
                        } catch (Exception e) {
                            log.error("è®°å½binlogç¹ä½å¤±è´¥", e);
                        }
                    }
                }
        );

        return result;
    }
}
</code></pre>
<pre><code>/**
 * 3. è¯»è¯·æ±æ·»å æ³¨è§£ï¼æ è¯å½åè¯·æ±æ¯å¦éè¦è¯»ä¹æåï¼è®°å½å¨ä¸ä¸æä¸­ã
 */
@Slf4j
@Aspect
@Component
public class ReadConsistencyAspect {

    @Pointcut("@annotation(com.example.annotation.ReadSelfWrite)")
    public void readSelfWritePointCut() {
    }

    @Before(value = "readSelfWritePointCut()")
    public void readSelfWritePoint(JoinPoint joinPoint) throws Throwable {
        //å¯¹äºæ æ³¨äºè¯»å·±æåçæ¥å£ï¼ä¸ä¸æä¸­è®¾ç½®å¯¹åºå±æ§
        ReadConsistencyManager.setReadSelfWrite();
    }
}
</code></pre>
<pre><code>  /**
   *4. æ ¹æ®å½åç¨æ·åå¥æä½æ¶è®°å½çç¹ä½ï¼éæ©åéçä»åºï¼å¦ææ²¡æç¬¦åæ¡ä»¶çï¼éçº§å°ä¸»åºã
  */
  @Slf4j
public class BinlogAwareLoadBalanceAlgorithm implements ReadQueryLoadBalanceAlgorithm {

    private Properties properties;

    @Override
    public Properties getProps() {
        return this.properties;

    }

    @Override
    public void init(Properties properties) {
        this.properties = properties;
    }

    @Override
    public String getType() {
        return "BINLOG_AWARE";
    }

    /**
     * read query load-balance algorithm.
     * @param name read query logic data source name
     * @param writeDataSourceName name of write data source
     * @param readDataSourceNames names of read data sources
     * @param context context
     * @return
     */
    @Override
    public String getDataSource(String name, String writeDataSourceName, List&lt;String&gt; readDataSourceNames, TransactionConnectionContext context) {
        return this.getDataSource(name, writeDataSourceName, readDataSourceNames);
    }

    /**
     * éæ©æ°æ®æºçæ ¸å¿æ¹æ³
     *
     * @param name                read query logic data source name
     * @param writeDataSourceName ä¸»åºåç§°
     * @param readDataSourceNames ä»åºåç§°åè¡¨
     * @return éæ©çæ°æ®æºåç§°
     */
    public String getDataSource(String name, String writeDataSourceName, List&lt;String&gt; readDataSourceNames) {
        try {
            if (ReadConsistencyManager.readSelfWrite()) {
                //è¦æ±è¯»ä¹æå
                return getDb(writeDataSourceName, readDataSourceNames);
            } else {
                //ä¸è¦æ±è¯»ä¹æå
                return loadBalance(readDataSourceNames);
            }
        } finally {
            //æ¸çThread Local
            ReadConsistencyManager.clear();
        }
    }

    /**
     * è·åå¤§äºç­äºç¨æ·å½åå­å¨ç¹ä½ä¿¡æ¯çä»åºï¼å¦ææ²¡æä»åºæ»¡è¶³æ¡ä»¶ï¼è¿åä¸»åºãå­å¨çç¹ä½ä¸ä¸ä¼è¿ææåµä¸ã
     * @param writeDataSourceName
     * @param readDataSourceNames
     * @return
     */
    private String getDb(String writeDataSourceName, List&lt;String&gt; readDataSourceNames) {
        //è¯¥ç±»è¢«SPIåå»ºï¼æ æ³éè¿springå®¹å¨æ³¨å¥ï¼æä»¥éè¿åä¾æ¨¡å¼ä»å®¹å¨ä¸­è·åservice
        BinlogPositionService binlogPositionService = Singleton.getBinlogPositionServiceInstance();
        //è·åç¨æ·ç¹ä½
        BinlogPosition positionInfo = binlogPositionService.getUserPosition(UserManager.getUid());
        //å­å¨ç¹ä½ä¿¡æ¯
        if (positionInfo.isEffective()) {
            //å¯ä»¥æ¾å°åå«æå®ç¹ä½çä»åºï¼è¿åå¯¹äºä»åº
            List&lt;String&gt; containsSpecPositionSourceName = binlogPositionService.getContainSpecPositionSlave(positionInfo);
            if (CollectionUtils.isNotEmpty(containsSpecPositionSourceName)) {
                return loadBalance(containsSpecPositionSourceName);
            }

            //æ²¡ææ¥è¯¢å°æ»¡è¶³æ¡ä»¶çä»åºï¼æ¥è¯¢ä¸»åº
            return writeDataSourceName;
        } else {
            //æ²¡æç¹ä½ä¿¡æ¯,ç¨æ·æ²¡ææ§è¡è¿åæä½
            //æ­¤æ¶ï¼ä»»éä¸ä¸ªä»åºå³å¯
            return loadBalance(slaveNames);
        }
    }

    /**
     * è´è½½åè¡¡ç­ç¥éæºéæ©
     *
     * @param readDataSourceNames
     * @return
     */
    private String loadBalance(List&lt;String&gt; readDataSourceNames) {
        return readDataSourceNames.get(ThreadLocalRandom.current().nextInt(readDataSourceNames.size()));
    }
</code></pre>
<p>ä»¥ä¸ç­ç¥å®å¨ç¨æ·ç¹ä½ä¿¡æ¯æ²¡æè¿ææ¶é´çåºç¡ä¸å¯ä¿è¯è¯»å·±æåãå¦æç¹ä½è®¾ç½®äºè¿ææ¶é´ï¼åéè¦è°æ´é»è¾ãï¼å¦æä¿è¯ç¹ä½ä¿¡æ¯ä¸ä¼è¿æï¼æèå­å¨å°ç¨æ·ä¾§å§ç»ä¼æç¹ä½ä¿¡æ¯ï¼å°±ä¸éè¦èå¥ä¸åé»è¾äºï¼<br>
å¦æç¹ä½è®¾ç½®äºè¿ææ¶é´ï¼æ²¡æè·åå°ç¹ä½ä¿¡æ¯å¯è½å­å¨ä¸¤ç§æåµã<br>
1.ç¨æ·æ²¡ææ§è¡åæä½ã<br>
2.ç¨æ·æ§è¡äºåæä½ï¼ä½å½åæ¶é´å·²ç»è¶è¿ç¹ä½çè¿ææ¶é´ã<br>
ç±äº1.2å¨ç¹ä½ä¸å­å¨çæåµä¸ï¼æ æ³åºåå·ä½æ¯åªä¸ç§æåµãæä»¥æ­¤æ¶å°±éè¦å¤æ­ä¸»ä»åæ­¥å»¶æ¶ï¼éåå»¶è¿æ¶é´å°äºç­äºè¿ææ¶é´çä»åºï¼æ»¡è¶³æ¡ä»¶çä»åºå³å¯ä»¥è¯»åå°ä¹ååå¥çæ°æ®ã<br>
è¯æè¿ç¨å¦ä¸ï¼<br>
<img src="https://img2024.cnblogs.com/blog/1435315/202511/1435315-20251130170958176-301806385.png" alt="image" loading="lazy"><br>
<img src="https://img2024.cnblogs.com/blog/1435315/202511/1435315-20251130171047342-618582452.png" alt="image" loading="lazy"><br>
<img src="https://img2024.cnblogs.com/blog/1435315/202511/1435315-20251130171106033-569878748.png" alt="image" loading="lazy"><br>
å»¶è¿æ¶é´å°äºç­äºè¿ææ¶é´çä»åºï¼å¯ä»¥è¯»åå°ä¹åçåå¥æ°æ®ï¼ä½å¦æå»¶æ¶æ¶é´å¤§äºè¿ææ¶é´ï¼å®éå­å¨ä¸¤ç§æåµï¼ä¸ç§æ¯å¯ä»¥è¯»åå°ï¼ä¸ç§æ¯æ æ³è¯»åå°ã<br>
æ­¤æ¶ç±äºç¹ä½å·²ç»è¿æï¼æ æ³åºååºæ¥ãæä»¥ç»ä¸èµ°éçº§é»è¾æ¥ä¸»åºã<br>
ä»åºåå«åå¥çæ¡ä»¶ï¼Ît â¥ Lã<br>
å»¶æ¶æ¶é´(L)å¤§äºè¿ææ¶é´ï¼6sï¼<br>
Ît = 10ç§, L = 8ç§<br>
æ¡ä»¶ï¼10 â¥ 8 â<br>
ç»æï¼ä»åºå·²åå«åå¥ï¼å¯ä»¥å®å¨è¯»å</p>
<p>Ît = 7ç§, L = 9ç§<br>
æ¡ä»¶ï¼7 â¥ 9 â<br>
ç»æï¼ä»åºè¿æªåæ­¥åå¥ï¼è¯»åä¼å¾å°æ§æ°æ®<br>
ä¾å¦ç¨æ·åå¥åï¼æ°æ®è¢«åæ­¥å°äºææä»åºï¼ç¨æ·ç¬¬äºå¤©åèµ·æ¥è¯¢è¯·æ±ï¼æ­¤æ¶ç¹ä½ä¿¡æ¯ä»¥åè¿æï¼ä¸ç¨æ·åå¥ä¸»åºæ°æ®å·²ç»åæ­¥å°ææä»åºã<br>
ç¨æ·æ­¤æ¶éè¦å¤æ­ä¸»ä»å»¶æ¶ï¼åè®¾æ­¤æ¶ä¸»ä»å»¶æ¶è¾¾å°30s.ä½æ¯ç¨æ·æ¨å¤©çæ°æ®æ©å·²åå¥ï¼æ­¤æ¶è¿æ¯ä¼è¢«è·¯ç±å°ä¸»åºã</p>
<pre><code>/**
     * è·åå¤§äºç­äºç¨æ·å½åå­å¨ç¹ä½ä¿¡æ¯çä»åºï¼å¦ææ²¡æä»åºæ»¡è¶³æ¡ä»¶ï¼è¿åä¸»åºã
     * @param writeDataSourceName
     * @param readDataSourceNames
     * @return
     */
    private String getDb(String writeDataSourceName, List&lt;String&gt; readDataSourceNames) {
        //è¯¥ç±»è¢«SPIåå»ºï¼æ æ³éè¿springå®¹å¨æ³¨å¥ï¼æä»¥ç´æ¥ä»å®¹å¨ä¸­è·åservice
        BinlogPositionService binlogPositionService = Singleton.getBinlogPositionServiceInstance();
        //è·åç¨æ·ç¹ä½
        BinlogPosition positionInfo = binlogPositionService.getUserPosition(UserManager.getUid());
        //å­å¨ææçç¹ä½ä¿¡æ¯
        if (positionInfo.isEffective()) {
            //å¯ä»¥æ¾å°åå«æå®ç¹ä½çä»åºï¼è¿åå¯¹äºä»åº
            List&lt;String&gt; containsSpecPositionSourceName = binlogPositionService.getContainSpecPositionSlave(positionInfo);
            if (CollectionUtils.isNotEmpty(containsSpecPositionSourceName)) {
                return loadBalance(containsSpecPositionSourceName);
            }

            //æ²¡ææ¥è¯¢å°æ»¡è¶³æ¡ä»¶çä»åºï¼æ¥è¯¢ä¸»åº
            return writeDataSourceName;
        } else {
            //æ²¡æç¹ä½ä¿¡æ¯å­å¨ä¸¤ç§æåµ
            //case1 ç¨æ·æ²¡ææ§è¡è¿åæä½
            //æ­¤æ¶ï¼ä»»éä¸ä¸ªä»åºå³å¯
            //case2 ç¨æ·æ§è¡åæä½ï¼ä½å­å¨çç¨æ·ç¹ä½ä¿¡æ¯å·²è¿æã
            //å¯å°ç¨æ·ç¹ä½ä¿¡æ¯è¿ææ¶é´ï¼è®¾ç½®ä¸ºä¸»ä»å»¶è¿çä¸åãç¨æ·ç¹ä½è¿ææ¯ä¸»ä»å»¶è¿çä¸åï¼è¿æåä¸è¬æåµä¸ï¼ä»åºé½åæ­¥äºå¯¹åºç¹ä½æ°æ®ã
            //ä½ä¹å¯è½å­å¨æ²¡æåæ­¥çæåµï¼æ­¤æ¶å°±éè¦å¤æ­ä¸»ä»åæ­¥å»¶æ¶ï¼éåå»¶è¿æ¶é´å°äºç­äºè¿ææ¶é´çä»åºã
            //æèï¼å°ç¹ä½ä¿¡æ¯ä¸è®¾ç½®è¿ææ¶é´ï¼è¿æ ·å§ç»å¯ä»¥éè¿ç¹ä½æ¯è¾ï¼ç¶åéè¿å®æ¶ä»»å¡ï¼å¤æ­å­å¨çç¹ä½ä¿¡æ¯å°äºææä»åºå½åç¹ä½å°±å°å¶æ¸ç©ºã
            Set&lt;String&gt; slaveNames = binlogPositionService.getReasonablyDelayedSlave();
            if (CollectionUtils.isNotEmpty(slaveNames)) {
                return loadBalance(slaveNames);
            }

            //æ²¡æç¬¦åæ¡ä»¶çï¼éçº§ä¸»åºã
            return writeDataSourceName;
        }
    }
</code></pre>
<p>ç±äºShrding Jdbcçèªå®ä¹æ¥è¯¢è´è½½åè¡¡ç®æ³ä½¿ç¨SPIå è½½çï¼æä»¥è¿éè¦æå®èªå®ä¹ç®æ³SPIæä»¶ã<br>
å¨<code>resource</code>ç®å½ä¸åå»ºä¸ä¸ªMETA-INF/servicesæä»¶å¤¹ï¼æ·»å ä¸ä¸ªåä¸ºorg.apache.shardingsphere.readwritesplitting.spi.ReadQueryLoadBalanceAlgorithmçæä»¶ã<br>
æä»¶ä¸­æ·»å èªå®ä¹å®ç°äºReadQueryLoadBalanceAlgorithmçå·ä½ç±»çè·¯åºã</p>
<pre><code>#SPI load
com.example.config.BinlogAwareLoadBalanceAlgorithm
</code></pre>
<h3 id="123-åè°è¯»">1.2.3 åè°è¯»</h3>
<p>åè°è¯»å¦ä¸å¾æç¤ºï¼å¦æç¨æ·Aæ´æ°ææå¥äºæ°æ®ï¼è¿ä¸ªè¡ä¸ºå¯¹ç¨æ·Bä¸å¯è§ï¼ç¨æ·Båªéè¦æ¥è¯¢ä»åºå³å¯ï¼ä»åºä½æ¶åæ­¥äºå¯¹åºæ°æ®ï¼å°±ä½æ¶è¯»åå³å¯ãç±äºåå¥æä½æ¯ç¨æ·Aè¿è¡çï¼æä»¥ç¨æ·Bæ éè¯»å·±æåçä¿è¯ãä½å¦æç¨æ·Bç¬¬ä¸æ¬¡è¯»åçä»åºï¼å·²ç»åæ­¥äºç¨æ·Açåå¥ææ´æ°åå®¹ï¼æ­¤æ¶ç¨æ·Bå¯ä»¥æ¥çå°Açåå¥ææ´æ°ãä½æ¯ç¨æ·Båæ¬¡å·æ°é¡µé¢ï¼æ­¤æ¶è¯»è¯·æ±è¢«è·¯ç±å°å¦å¤ä¸ä¸ªä»åºï¼æ­¤ä»åºå ä¸ºç½ç»é®é¢æ¹ä»åºæ²¡æåæ­¥ç¨æ·Açåå¥ææ´æ°ãæ­¤æ¶å¯¹ç¨æ·Bæ¥è¯´ï¼ç¬¬ä¸æ¬¡çå°äºåå®¹ï¼ç¬¬äºæ¬¡åæ²¡æçå°åå®¹ãç¨æ·é¦åä»æ°é²å¯æ¬è¯»åï¼ç¶åä»éæ§å¯æ¬è¯»åï¼æ¶é´ä¼¼ä¹åéäºãä¸ºäºé²æ­¢è¿ç§å¼å¸¸ï¼æä»¬éè¦åè°è¯»ãåè°è¯»æä¾çä¿è¯æ¯ï¼ä¸ä¼è¯»åå°æ¯ä¹åè¯»åæ°æ®æ´æ§çæ°æ®ãä¹å°±è¯´åè°è¯»è¯»åçæ°æ®ï¼ä¿æåè°éå¢ï¼æ¯ä¸æ¬¡è¯»åçæ°æ®çæ¬åªä¼å¤§äºæç­äºåä¸æ¬¡è¯»åçæ°æ®ã<br>
<img src="https://img2024.cnblogs.com/blog/1435315/202511/1435315-20251129215659292-1491477398.png" alt="image" loading="lazy"></p>
<p>å¦ä½ä¿è¯åè°è¯»éç¦»çº§å«ï¼</p>
<ul>
<li>åä¸ä¸ªç¨æ·æ¯ä¸ªè¯·æ±è·¯ç±å°åºå®çä»åºï¼å°±å½ä¸ªæ°æ®åºèè¨ï¼æ°æ®çæ¬æ¯éå¢çï¼è¯»ååä¸ªå®ä¾ï¼è¯»åçæ°æ®çæ¬åªä¼å¤§äºæç­äºä¸ä¸æ¬¡è¯»åçæ°æ®ã</li>
<li>è®°å½ç¬¬ä¸æ¬¡è¯»åæ°æ®åºçç¹ä½ä¿¡æ¯ï¼ä¿è¯åç»­è¯·æ±åªä¼è¢«è·¯ç±å°æ¯è®°å½ç¹ä½ç¸ç­ææ´æ°çæ°æ®åºã</li>
</ul>
<p>å¦æä»ä»åªæ¯éè¦åè°è¯»çä¿è¯ï¼å°è¯»æä½æ ¹æ®ç¨æ·uid hashåè·¯ç±å°åºå®ä»åºæ¯å®ç°æç®åçæ¹å¼ãä½æäºå¨åè°è¯»çåºç¡ä¸ï¼éè¦ä¿è¯è¯»ä¹æåçæ··åæåµæ¶ï¼è·¯ç±å°åºå®ä»åºè¿ä¸ªæ¹æ¡å°±ä¸è¡äºï¼è·¯ç±å°åºå®ä»åºåªè½æ»¡è¶³åè°è¯»çä¸è´æ§ï¼ä½æ æ³æ»¡è¶³è¯»å·±æåãä¸ä¸èä¼è¯´æåè°è¯»+è¯»å·±æåçæ··åæåµã</p>
<h3 id="124-åºäºshrding-jdbcå®ç°åè°è¯»">1.2.4 åºäºShrding Jdbcå®ç°åè°è¯»</h3>
<pre><code>/**
 *1. è¯»ä¸è´æ§åé¢æ·»å åè°è¯»æ è¯
 * è¯»ä¸è´æ§æ³¨è§£ï¼ç¨äºæ è¯å½è¯»è¯·æ±çä¸è´æ§çº§å«
 */
@Slf4j
@Aspect
@Component
public class ReadConsistencyAspect {
    
    //è¯»å·±æå
    @Pointcut("@annotation(com.example.annotation.ReadSelfWrite)")
    public void readSelfWritePointCut() {
    }

    @Before(value = "readSelfWritePointCut()")
    public void readSelfWritePoint(JoinPoint joinPoint) throws Throwable {
        //å¯¹äºæ æ³¨äºè¯»ä¹æåçæ¥å£ï¼ä¸ä¸æä¸­è®¾ç½®å¯¹åºå±æ§
        ReadConsistencyManager.setReadSelfWrite();
    }

    //åè°è¯»
    @Pointcut("@annotation(com.example.annotation.MonotonicRead)")
    public void monotonicReadPointCut() {
    }

    @Before(value = "monotonicReadPointCut()")
    public void monotonicReadPoint(JoinPoint joinPoint) throws Throwable {
        //å¯¹äºæ æ³¨äºè¯»ä¹æåçæ¥å£ï¼ä¸ä¸æä¸­è®¾ç½®å¯¹äºå±æ§
        ReadConsistencyManager.setMonotonicRead();
    }

}
</code></pre>
<pre><code>/**
     * 2.èªå®ä¹ç®æ³ä¸­ï¼åè°è¯»éæ©ååºã
     *
     * @param name                read query logic data source name
     * @param writeDataSourceName ä¸»åºåç§°
     * @param readDataSourceNames ä»åºåç§°åè¡¨
     * @return éæ©çæ°æ®æºåç§°
     */
    public String getDataSource(String name, String writeDataSourceName, List&lt;String&gt; readDataSourceNames) {
        try {

            if (ReadConsistencyManager.readSelfWrite()) {
                //2.åªè¦æ±è¯»ä¹æå
                return getDb(writeDataSourceName, readDataSourceNames);
            } else if (ReadConsistencyManager.monotonicRead()) {
                //3.åªè¦æ±åè°è¯»ï¼æ ¹æ®å¯ä¸æ è¯ååºå³å¯ï¼ï¼æ­¤å¤ä½¿ç¨uid hashååä½ï¼å°è¯·æ±è·¯ç±å°æå®ååºã
                //ç±äºhashCodeå¯è½ç®åºè´æ°ï¼æä»¥å°å¶ä¸0x7ffffffæä½ç¸ä¸ï¼ä½¿å¶é¦ä½ç½®0åä¸ºæ­£æ°ã
                return readDataSourceNames.get((UserManager.getUid().hashCode() &amp; Integer.MAX_VALUE) % readDataSourceNames.size());
            } else {
                //4.ä¸è¦æ±è¯»ä¹æå+åè°è¯»
                return loadBalance(readDataSourceNames);
            }
        } finally {
            //æ¸çThread Local
            ReadConsistencyManager.clear();
        }
    }
</code></pre>
<h3 id="125-è¯»å·±æååè°è¯»">1.2.5 è¯»å·±æå+åè°è¯»</h3>
<p>åé¢æå°ï¼è¯»å·±æåååè°è¯»ï¼ä½è¿ä¸¤ä¸ªæ··åçæåµå¢ãè¿ä¸¤ä¸ªè¯»ä¸è´æ§æ¯ç¬ç«çï¼æ»¡è¶³å¶ä¸­ä¸ä¸ªå¹¶ä¸è½æå³çæ»¡è¶³å¦å¤ä¸ä¸ªãä½ææ¶ä¼éè¦å½åçè¯·æ±éè¦åæ¶æ»¡è¶³ä¸¤ä¸ªè¯»ä¸è´æ§çè¦æ±ã<br>
ä¾å¦å½åç¨æ·ç¼è¾èªå·±ä¸»é¡µï¼åç»­è¯»åèªå·±ä¸»é¡µè¦æ»¡è¶³è¯»å·±æåï¼æ­¤æ¶å¨ç¨æ·çæ¥ï¼ç¼è¾åè¯»åèªå·±çä¸»é¡µé½æ²¡æé®é¢ï¼å¯ä»¥çå°ä¿®æ¹åçæ°æ®ãä½æ¯è¯»åå«äººä¸»é¡µå¢ï¼æ­¤æ¶å°±æ²¡æä»»ä½ä¿è¯äºã<br>
ä¾å¦ç¨æ·å½åææ°çæ´æ°å·²ç»åæ­¥å°ææä»åºï¼S1,S2ï¼ï¼å½åè¯»åæ»¡è¶³è¯»å·±æåï¼è¯·æ±è¢«è·¯ç±å°ä»»ä¸ä¸ªä»åºå³å¯ï¼è¯¥ä»åºæèªå·±ææ°åå¥çæ°æ®ï¼æ»¡è¶³è¯»å·±æåï¼åæ¶å½åä»åºS1æç¨æ·Bçæ´æ°æä½ï¼ä½ç±äºç½ç»åå ï¼ç¨æ·Bçææ°æ°æ®æ²¡æè¢«åæ­¥å°ä»åºS2,æ­¤æ¶ç¨æ·å¦æåªä¿è¯è¯»å·±æåï¼ç¬¬ä¸æ¬¡è¢«è·¯ç±å°S1æ»¡è¶³è¯»å·±æåï¼ç¨æ·åæ¶æ¥çç¨æ·Bçä¸»é¡µï¼ç¬¬ä¸æ¬¡è¢«è·¯ç±å°S1å¯ä»¥çå°ä¿®æ¹è¿åçåå®¹ï¼ç¬¬äºæ¬¡è¢«è·¯ç±å°S2åæ æ³çå°ç¨æ·ä¿®æ¹åçåå®¹ï¼S1ï¼S2åæ»¡è¶³è¯»å·±æåï¼ä½åå¥æä½æ¯å¶ä»ç¨æ·Båå¥çï¼å¯¹å½åç¨æ·æ¥è¯´æç¥ä¸å°ï¼ä½æ­¤æ¶è¯»åå¶ä»ç¨æ·åå­å¨åè°è¯»çé®é¢ã<br>
æèæ¯è´­ç©è½¦åºæ¯ï¼ç¨æ·éè¦æ»¡è¶³è¯»å·±æåï¼å³æ·»å å°è´­ç©è½¦çåå®¹éè¦æ·»å åé©¬ä¸å¯è§ï¼åæ¶å¤æ¬¡è¯»åèªå·±è´­ç©è½¦éè¦æ»¡è¶³åè°è¯»ï¼ä¸è½åºç°æ°æ®åéçç°è±¡ã<br>
ä¸¤ç§è¯»ä¸è´æ§éè¦æ ¹æ®å·ä½åºæ¯å·ä½æ»¡è¶³å¯¹äºä¸è´æ§è¦æ±ã</p>
<p>æ¢ç¶è¦å®ç°è¯»å·±æå+åè°è¯»ï¼å¦ä½ä¿è¯è¿ä¸¤ç§è¯»ä¸è´æ§ï¼æ¬è´¨ä¸ä¸ä¸è´é®é¢é½æ¯è¯»åçæ°æ®çæ¬é æçï¼è¯»åå°æ¯å½ååºè¯¥çè§çæ°æ®çæ¬æ´æ§ççæ¬å¯¼è´çãæ è®ºæ¶è¯»å·±æåï¼è¯»åæ°æ®çæ¬ â¥ èªå·±æååå¥çæ¬ï¼ï¼è¿æ¯åè°è¯»ï¼è¯»åçæ¬è¦ â¥ æåä¸æ¬¡è¯»åçæ°æ®çæ¬ï¼ï¼æä»¥åªè¦ä¿è¯äºè¯»åçæ°æ®çæ¬ â¥ max(æåè¯»åçæ¬, æååå¥çæ¬)ï¼å³å¯ä¿è¯ä¸¤ç§ä¸è´æ§ã</p>
<p>æä»¥å·ä½å®ç°ç­ç¥ä¸ºï¼<strong>æ ¹æ®ç¨æ·è®°å½çç¹ä½ï¼åä¿è¯è¯»å·±æåï¼è·åä¸ä¸ªæ»¡è¶³æ¡ä»¶çæ°æ®çæ¬ï¼ç¶åè¯»åè¯¥æ°æ®çæ¬ï¼å¹¶ä¸è®°å½å½åè¯»åççæ¬ï¼å°å¶æä¸ºææ°ç¹ä½ã</strong><br>
åç»­è¯»åæä½å¿é¡»å¤§äºç­äºå½åç¹ä½ï¼å³ä¸ä¼åºç°åéç°è±¡ãåå¥æä½æ¶åå¥ä¸»åºï¼åæ¶æ´æ°ç¹ä½(åå¥æä½æ¯åå¥ä¸»åºï¼ç¹ä½ä¿æåè°éå¢)ï¼å³ä¸ä¼åºç°è¿èè¯»å·±æåæåµã<br>
æä»¥æåè¯»åçæ°æ®çæ¬ â¥ max(æåè¯»åçæ¬, æååå¥çæ¬)ï¼å³å¯ä¿è¯ä¸¤ç§ä¸è´æ§ã</p>
<p>Lâ = å½åå·²ç¥æå¤§çæ¬ç¹ä½<br>
Váµ£â = è¯»æä½å®éçæ¬<br>
Vâ = åæä½äº§ççæ¬<br>
è®¾åæä½ w(x,v) å¨ r(x) ä¹åï¼<br>
w(x,v) åï¼L â¥ v (åæä½æ´æ°è§åï¼è®°å½åå¥ç¹ä½)<br>
r(x) è¦æ±ï¼Váµ£ â¥ L (è¯»æä½è¦æ±ï¼å³å½åè¯»åæ°æ®å¯æ¬è¦å¤§äºç­äºè®°å½çç¨æ·å¯æ¬)<br>
ç±ä¼ éæ§ï¼Váµ£ â¥ L â¥ vï¼å³å½åè¯»æä½å¯ä»¥è¯»åå°èªå·±ææ°åå¥çæ°æ®<br>
å³ Váµ£ â¥ v æ»¡è¶³è¯»å·±æåã</p>
<p>è®¾ râ(x) å¨ râ(x) ä¹åï¼<br>
râ(x) åï¼L â¥ Váµ£â (è¯»æä½æ´æ°è§åï¼è¯»åæ°æ®åè®°å½å½åè¯»åç¹ä½ï¼å³L â¥ Váµ£â)<br>
râ(x) è¦æ±ï¼Váµ£â â¥ L (è¯»æä½è¦æ±ï¼è¯»åè¦æ±è¯»åæ°æ®å¿é¡»å¤§äºç­äºè®°å½ç¹ä½)<br>
ç±ä¼ éæ§ï¼Váµ£â â¥ L â¥ Váµ£âï¼å³ç¬¬äºæ¬¡è¯»åçæ°æ®ï¼å¿å¾å¤§äºç­äºç¬¬ä¸æ¬¡è¯»åæ°æ®ä¸ä¼åºç°åéã<br>
å³ Váµ£â â¥ Váµ£â æ»¡è¶³åè°è¯»ã</p>
<h3 id="126-åºäºsahrding-jdbcå®ç°è¯»å·±æååè°è¯»">1.2.6 åºäºSahrding Jdbcå®ç°è¯»å·±æå+åè°è¯»</h3>
<pre><code>/**
     * éæ©æ°æ®æºçæ ¸å¿æ¹æ³
     *
     * @param name                read query logic data source name
     * @param writeDataSourceName ä¸»åºåç§°
     * @param readDataSourceNames ä»åºåç§°åè¡¨
     * @return éæ©çæ°æ®æºåç§°
     */
    public String getDataSource(String name, String writeDataSourceName, List&lt;String&gt; readDataSourceNames) {
        try {

            if (ReadConsistencyManager.readSelfWrite() &amp;&amp; ReadConsistencyManager.monotonicRead()) {
                //å¦ææ¯è¯»ä¹æå+åè°è¯»
                //åæ ¹æ®è¯»ä¹æåï¼è·åè½è¯»åçåºã
                //æ­¤æ¶æä¸ç§æ¸ç©º
                //1. å­å¨ç¹ä½ä¿¡æ¯ï¼å¯ä»¥æ¾å°æ»¡è¶³ç¹ä½çä»åºï¼éæ©ä»åºã
                //2. å­å¨ç¹ä½ä¿¡æ¯ï¼æ æ³æ¾å°æ»¡è¶³ç¹ä½çä»åºï¼éæ©ä¸»åºã
                String dbName = getDb(writeDataSourceName, readDataSourceNames);

                //è·åå½åè¯»ååºçç¹ä½ä¿¡æ¯ï¼å¹¶ç¼å­
                //åç»­è¯·æ±å¿é¡»å¤§äºç­äºå­å¨çææ°ç¹ä½ã
                BinlogPositionService binlogPositionService = Singleton.getBinlogPositionServiceInstance();
                BinlogPosition specDbPosition = binlogPositionService.getPositionFromCache(dbName);
                binlogPositionService.cacheUserBinlogPosition(UserManager.getUid(), specDbPosition);

                return dbName;
            } else if (ReadConsistencyManager.readSelfWrite()) {
                //2.åªè¦æ±è¯»ä¹æå
                return getDb(writeDataSourceName, readDataSourceNames);
            } else if (ReadConsistencyManager.monotonicRead()) {
                //3.åªè¦æ±åè°è¯»ï¼æ ¹æ®å¯ä¸æ è¯ååºå³å¯ï¼
                return readDataSourceNames.get((UserManager.getUid().hashCode() &amp; Integer.MAX_VALUE) % readDataSourceNames.size());
            } else {
                //4.ä¸è¦æ±è¯»ä¹æå+åè°è¯»
                return loadBalance(readDataSourceNames);
            }
        } finally {
            //æ¸çThread Local
            ReadConsistencyManager.clear();
        }
    }

</code></pre>
<h2 id="13-é«å¯ç¨ç¯---æéåæ¢">1.3 é«å¯ç¨ç¯ - æéåæ¢</h2>
<h3 id="131-åæ¢çä¸è´æ§é®é¢">1.3.1 åæ¢çä¸è´æ§é®é¢</h3>
<p>åæ¢åï¼é¦åè¦è®¨è®ºï¼ä¸»ä»æ°æ®ä¸è´æ§é®é¢ãå¦ææ¯é¢æçåæ¢ï¼å³ä¸»åºæ²¡æå®æºçæåµä¸ãè¿ç§æåµä¸è´æ§æ¯å¾å®¹æä¿è¯çã<br>
å·ä½åæ¢æµç¨å¦ä¸ã<br>
1.å¤æ­å¤åº B ç°å¨ç seconds_behind_masterï¼å¦æå°äºæä¸ªå¼ï¼æ¯å¦ 5 ç§ï¼ç»§ç»­ä¸ä¸æ­¥ï¼å¦åæç»­éè¯è¿ä¸æ­¥ï¼<br>
2.æä¸»åº A æ¹æåªè¯»ç¶æï¼å³æ readonly è®¾ç½®ä¸º trueï¼<br>
3.å¤æ­å¤åº B ç seconds_behind_master çå¼ï¼ç´å°è¿ä¸ªå¼åæ 0 ä¸ºæ­¢ï¼<br>
4.æå¤åº B æ¹æå¯è¯»åç¶æï¼ä¹å°±æ¯æ readonly è®¾ç½®ä¸º falseï¼<br>
5.æä¸å¡è¯·æ±åå°å¤åº Bã<br>
åæ¢åæ°æ®ä¸»ä»æ°æ®æ¯ä¸è´çï¼ä¸æ²¡æä¸¢å¤±ã</p>
<p>é£å¦ææ¯ä¸»åºå®æºå¢ï¼è¿æ¶æåµå°±æ¯è¾å¤æå¢ã<br>
é¦åï¼æä»¬ä¸»ä»å¤å¶çæåµä¸ï¼æ°æ®æä¸¤ä¸ªå¤§ççº¦æã<br>
çº¦æ1ï¼å®¢æ·ç«¯æ¶å°æåååºä¿è¯ä¸»åºäºå¡å·²æäº¤å¹¶æä¹åã<br>
çº¦æ2ï¼ä»åºè¯»åä¸»åºbinlogåå¥relay logæåï¼ä¸»åºå¿å®åå¥å¯¹åºbinlogã<br>
çº¦æ1ï¼ç±MySQLä¿è¯ï¼çº¦æ2ï¼ä¹å¾å®¹æçåºï¼ä»åºä¸­ç»§æ¥å¿çåå®¹å°±æ¯ä¸»åºçbinlogåå®¹ï¼åå¥äºä»åºä¸­ç»§æ¥å¿ï¼ä¸»åºå¿å®ä¼å­å¨å¯¹åºæ¥å¿åå®¹ã<br>
é£ä¹ä¸»è¦åºæ¯å¦ä¸ï¼</p>
<table>
<thead>
<tr>
<th>åºæ¯ç¼å·</th>
<th>å®¢æ·ç«¯æ¥æ¶ååº</th>
<th>ä¸»åºbinlogåå¥ç¶æ</th>
<th>ä»åºready blogç¶æ</th>
<th>æç»åæ¢åä¸»ä»æ°æ®ç¶æ</th>
<th>åæ¢ä»åºåå®¢æ·ç«¯ä¸ä»åºä¸è´æ§</th>
<th>å¤æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>â æå</td>
<td>â å·²åå¥</td>
<td>â å·²åå¥</td>
<td>ä¸è´</td>
<td>ä¸è´</td>
<td>æ®éæåµ</td>
</tr>
<tr>
<td>2</td>
<td>â æå</td>
<td>â å·²åå¥</td>
<td>â æªåå¥</td>
<td>æ°æ®ä¸¢å¤±</td>
<td>ä¸ä¸è´ï¼å®¢æ·ç«¯æ¥æ¶å°æåååºï¼åæ¢åä»åºæ²¡ææ°æ®</td>
<td>å¨æ­£ç¡®éç½®ååæ­¥æåµä¸ä¼åºç°ï¼å¦æåºç°éçº§åä¼åºç°è¿ç§æåµã</td>
</tr>
<tr>
<td>3</td>
<td>â æå</td>
<td>â æªåå¥</td>
<td>â å·²åå¥</td>
<td></td>
<td></td>
<td>ä¸ä¼åºç°ï¼è¿åçº¦æ2</td>
</tr>
<tr>
<td>4</td>
<td>â æå</td>
<td>â æªåå¥</td>
<td>â æªåå¥</td>
<td></td>
<td></td>
<td>ä¸ä¼åºç°ï¼è¿åçº¦æ1ï¼çº¦æ2</td>
</tr>
<tr>
<td>5</td>
<td>â å¤±è´¥</td>
<td>â å·²åå¥</td>
<td>â å·²åå¥</td>
<td>ä¸è´</td>
<td>ä¸ä¸è´ï¼å®¢æ·ç«¯æ¥æ¶å°å¤±è´¥ååºï¼åæ¢åä»åºå·²ç»å®ææä½</td>
<td>å¯è½åºç°ï¼ä¸»ä»é½åå¥binlogåï¼è¿åå®¢æ·ç«¯å¤±è´¥ï¼å¦ç½ç»æéã</td>
</tr>
<tr>
<td>6</td>
<td>â å¤±è´¥</td>
<td>â å·²åå¥</td>
<td>â æªåå¥</td>
<td>æ°æ®ä¸¢å¤±</td>
<td>è®¤ç¥ä¸è´ï¼å®¢æ·ç«¯æ¥æ¶å¤±è´¥æ¶æ¯ï¼ä»åºä¹æ²¡ææ°æ®ã</td>
<td>å¯è½åºç°ï¼ä»åºéçº§ï¼åå¥ä¸»åºæåï¼ååºå®¢æ·ç«¯åæéãå¨æ­£ç¡®éç½®ååæ­¥æåµä¸ä¼åºç°ï¼å¦æåºç°éçº§åä¼åºç°è¿ç§æåµã</td>
</tr>
<tr>
<td>7</td>
<td>â å¤±è´¥</td>
<td>â æªåå¥</td>
<td>â å·²åå¥</td>
<td></td>
<td></td>
<td>ä¸ä¼åºç°ï¼è¿æ³çº¦æ2</td>
</tr>
<tr>
<td>8</td>
<td>â å¤±è´¥</td>
<td>â æªåå¥</td>
<td>â æªåå¥</td>
<td>ä¸è´</td>
<td>è®¤ç¥ä¸è´ï¼å®¢æ·ç«¯æ¥æ¶å¤±è´¥ï¼ä¸»ä»é½æ²¡æåå¥ã</td>
<td>ä¼åºç°ï¼ä¸»åºåå¥åç´æ¥æäºï¼æSQLè¯­æ³éè¯¯ï¼é¿åº¦è¶é¿ç­ä¸»åºå°±ç´æ¥æªæ§è¡ã</td>
</tr>
<tr>
<td>9</td>
<td>â² è¶æ¶æªç¥</td>
<td>â å·²åå¥</td>
<td>â å·²åå¥</td>
<td>ä¸è´</td>
<td>æªç¥ï¼éè¦éè¯ææ¥è¯¢ã</td>
<td>å¯è½åºç°ï¼è¶æ¶äºã</td>
</tr>
<tr>
<td>10</td>
<td>â² è¶æ¶æªç¥</td>
<td>â å·²åå¥</td>
<td>â æªåå¥</td>
<td>æ°æ®ä¸¢å¤±</td>
<td>æªç¥ï¼éè¦éè¯ææ¥è¯¢ã</td>
<td>å¯è½åºç°ï¼è¶æ¶äºãåæ¶ä»åºç±ååæ­¥éçº§ä¸ºå¼æ­¥ã</td>
</tr>
<tr>
<td>11</td>
<td>â² è¶æ¶æªç¥</td>
<td>â æªåå¥</td>
<td>â å·²åå¥</td>
<td></td>
<td></td>
<td>ä¸ä¼åºç°ï¼è¿æ³çº¦æ2</td>
</tr>
<tr>
<td>12</td>
<td>â² è¶æ¶æªç¥</td>
<td>â æªåå¥</td>
<td>â æªåå¥</td>
<td>ä¸è´</td>
<td>æªç¥ï¼éè¦éè¯ææ¥è¯¢ã</td>
<td>å¯è½åºç°ï¼ç½ç»æéã</td>
</tr>
</tbody>
</table>
<p>è¯»ååç¦»åºæ¯ä¸ï¼ç¨æ·ä¸å³æ³¨ä¸»ä»æ°æ®æ¯å¦ä¸è´ï¼ç¨æ·åªå³æ³¨å®¢æ·ç«¯æ¥æ¶ååºï¼ä¸åæ¢åä»åºæ°æ®ç¶æãæä»¥æä»¬æåè¿ä¸¤åã<br>
å»é¤ä¸å¯è½åºç°åååä¸è´çæåµï¼ä¿çä¸ä¸è´çæåµå¦ä¸:</p>
<table>
<thead>
<tr>
<th>åºæ¯ç¼å·</th>
<th>å®¢æ·ç«¯</th>
<th>åæ¢åä»åº</th>
<th>å®¢æ·ç«¯ä¸ä»åºæ°æ®ä¸è´æ§</th>
<th>å®¢æ·ç«¯ä¸ä»åºä¸è´æ§</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>â æå</td>
<td>â æªåå¥</td>
<td>ä¸¢å¤±æ°æ®</td>
<td>ä¸ä¸è´ï¼å®¢æ·ç«¯æ¥æ¶æåï¼åæ¢åä»åºæ²¡ææ°æ®</td>
</tr>
<tr>
<td>2</td>
<td>â å¤±è´¥</td>
<td>â å·²åå¥</td>
<td>å¹½çµæ°æ®</td>
<td>ä¸ä¸è´ï¼å®¢æ·ç«¯æ¥æ¶å¤±è´¥ï¼åæ¢åä»åºææ°æ®</td>
</tr>
<tr>
<td>3</td>
<td>â² è¶æ¶æªç¥</td>
<td>â å·²åå¥</td>
<td>æªç¥ï¼éè¦æ¥è¯¢æéè¯</td>
<td>ä¸è´ï¼è¶æ¶æªç¥ï¼éè¦éæ°æ¥è¯¢ã</td>
</tr>
<tr>
<td>4</td>
<td>â² è¶æ¶æªç¥</td>
<td>â æªåå¥</td>
<td>æªç¥ï¼éè¦æ¥è¯¢æéè¯</td>
<td>ä¸è´ï¼è¶æ¶æªç¥ï¼éè¦éæ°æ¥è¯¢ã</td>
</tr>
</tbody>
</table>
<p>åºæ¯1ï¼ææ¾æ°æ®ä¸¢å¤±äºï¼åé¨ç»è¿å¥½ï¼æä½ä»¥äºå¡ä¸ºåä½ï¼å³ä½¿æ°æ®ä¸¢å¤±ï¼æ´ä½æ°æ®ç¶æä¹æ¯ä¸è´çãé¢ææ¯ç±ä¸è´æ§ç¶æAè½¬ç§»å°ä¸è´æ§ç¶æBãå³ä½¿æ²¡æè½¬ç§»å°ä¸è´æ§ç¶æB,ä½æ°æ®ä¹ä¿æäºä¹åçä¸è´æ§ç¶æAï¼ä¹æ¯å®å¨çãä¾å¦ç¶æï¼Aç¨æ·æ£å100ï¼Bç¨æ·å¢å 100.å³ä½¿è¿ä¸ªäºå¡æä½ä¸¢å¤±ï¼Aç¨æ·é±ä¹æ²¡ææ£åï¼Bç¨æ·é±ä¹æ²¡å¢å è¿æ¯ä¸è´çãä½æ¶åç¬¬ä¸æ¹ç³»ç»ä¸è´æ§æ¢æ²¡æåæ³å¾å°ä¿è¯äºï¼äºå¡åªè½ä¿è¯åé¨ç³»ç»çä¸è´æ§ï¼ä¾å¦æ¯åå»ºä¸ä¸ªè®¢åï¼åç»­æ ¹æ®è¿ä¸ªè®¢åè°ç¨ç¬¬ä¸æ¹æ¥å£è½¬è´¦ï¼ç¶åæ´æ°è®¢åç¶æãå¦æè¿ä¸ªè®¢åæ°æ®ä¸¢å¤±ï¼åæ¶ä¹è°ç¨äºç¬¬ä¸æ¹æ¥å£å®æäºç¶æãé£è¿ä¸ªå°±éè¦å¯¹è´¦å»å¤çäºãç³»ç»åå½åæ100ç¬è®¢åï¼ç¬¬ä¸æ¹ç³»ç»æ101ç¬ï¼éè¿çæ§æ¾åºä¸ä¸è´æ§çæ°æ®ï¼è¦ä¹å¨ç¬¬ä¸æ¹ç³»ç»ä¸­éæè®¢åï¼æå¨åé¨ç³»ç»æ¢å¤æ°æ®ã<br>
åºæ¯2ï¼å¹½çµæ°æ®ï¼å®¢æ·æ¥æ¶ååºå¤±è´¥ï¼ä½æ°æ®åå¥äºï¼è¿æ¶ç¨æ·å¯è½éå¤æä½ï¼æäºæä½æ¯è¦ççï¼éå¤æä½ä»¥æåä¸æ¬¡ä¸ºåå³å¯ï¼ä¾å¦ä¿®æ¹ä¸ªäººä¸»é¡µãéå¤åå¥åé¢è¦çåé¢å³å¯ï¼å¤æ¬¡æä½æ¯å®å¨çã<br>
ä½æäºä¸åè®¸åºç°éå¤æ°æ®çæä½ï¼å°±éè¦ç»åä¸å¡åºæ¯èèå¹ç­æä½ã<br>
åºæ¯3ï¼4ï¼å¯¹äºå®¢æ·æ¥è¯´ï¼æ¥æ¶çæ¯è¶æ¶ãé£ä¹åæ¢åï¼ä»åºæ°æ®æ è®ºæ¯å­å¨è¿æ¯ä¸¢å¤±é½æ¯å¯ä»¥æ¥åçï¼æ¯è¾æ²¡ææç¡®çè¿åæåæå¤±è´¥ãéå¯¹è¿äºè¿åï¼éè¦åæ¥è¯¢ä¸æ¬¡ï¼åæ¶èèéè¯æå¹ç­å»éå³å¯ã</p>
<p>ä¸è¿°å°±æ¯åæ¢åçä¸è´æ§é®é¢ï¼éè¦æ ¹æ®ä¸å¡éè¦æ§å»åç¸å¯¹äºçååºæä½ãå¯¹äºä¸éè¦çä¸å¡æ°æ®ï¼ä¸¢å¤±æéå¤é½æ¯å¯æ¥æ¶çã<br>
å¯¹äºéè¦çæ°æ®å°±éè¦èèå¥½åç§æåµï¼è½éè¿çæ§ç­ææ®µï¼è¯å«æç»æ°æ®çä¸è´æ§æåµï¼å ä¸åå¥½é¢æ¡ï¼åºç°é®é¢è½å¿«éä¿®å¤å³å¯ã<br>
æ¯ç«ï¼çæ­£çä¸ä¸è´æåµç¸å¯¹æ¥è¯´è¿æ¯è¾å°çï¼å¤§å¤æ°æåµé½æ¯æ­£å¸¸æåµï¼ä½ä¹è¦èèå°æåæåµã</p>
<h3 id="132-åºäºzookeeperçå¨æéç½®åæ¢">1.3.2 åºäºZookeeperçå¨æéç½®åæ¢</h3>
<pre><code class="language-xml">        &lt;dependency&gt;
            &lt;groupId&gt;org.apache.shardingsphere&lt;/groupId&gt;
            &lt;artifactId&gt;shardingsphere-cluster-mode-core&lt;/artifactId&gt;
            &lt;version&gt;5.2.1&lt;/version&gt;

            &lt;exclusions&gt;
                &lt;exclusion&gt;
                    &lt;groupId&gt;org.yaml&lt;/groupId&gt;
                    &lt;artifactId&gt;snakeyaml&lt;/artifactId&gt;
                &lt;/exclusion&gt;
            &lt;/exclusions&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.yaml&lt;/groupId&gt;
            &lt;artifactId&gt;snakeyaml&lt;/artifactId&gt;
            &lt;version&gt;1.33&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.apache.shardingsphere&lt;/groupId&gt;
            &lt;artifactId&gt;shardingsphere-cluster-mode-repository-zookeeper&lt;/artifactId&gt;
            &lt;version&gt;5.3.0&lt;/version&gt;
        &lt;/dependency&gt;
</code></pre>
<pre><code class="language-yaml">  # ShardingSphereè¯»ååç¦»éç½®ï¼
  shardingsphere:
    mode:
      type: Cluster
      repository:
        type: ZooKeeper
        props:
          namespace: governance_ds
          server-lists: hcf.com:2181
          retryIntervalMilliseconds: 500
          timeToLiveSeconds: 60
          maxRetries: 3
          operationTimeoutMilliseconds: 5000
      overwrite: false
</code></pre>
<p>åºç¨å¯å¨ï¼éç½®ä¿¡æ¯ä¸ä¼ å°zookeeperãåç»­ç´æ¥ä¿®æ¹zookeeperä¸­çéç½®ä¿¡æ¯ãshrding-jdbcä¼æ¶å°éç¥ï¼ä¿®æ¹å¯¹åºéç½®ï¼å¦åçè§åï¼ä¸»ä»æ°æ®æºç­ã<br>
<img src="https://img2024.cnblogs.com/blog/1435315/202601/1435315-20260103213755857-1418909837.png" alt="image" loading="lazy"></p>
<p>ä¸»ï¼3311ï¼ä»1ï¼3312ï¼ä»2ï¼3313<br>
<img src="https://img2024.cnblogs.com/blog/1435315/202601/1435315-20260103212522657-533951894.png" alt="image" loading="lazy"></p>
<p>ä¿®æ¹zookeeperä¸çéç½®ãåè£ä¸»åºå®æºï¼3312åä¸ºæ°çä¸»åºï¼3313ä¿æä»åºã<br>
<img src="https://img2024.cnblogs.com/blog/1435315/202601/1435315-20260103212539665-780073460.png" alt="image" loading="lazy"><br>
<img src="https://img2024.cnblogs.com/blog/1435315/202601/1435315-20260103212657920-1583796145.png" alt="image" loading="lazy"><br>
å¯ä»¥çå°ï¼zookeeperä¸­versionsä¸æ°å¢ä¸ä¸ªçæ¬å·ä¸º1çéç½®ï¼å¨éé¢å¡«åä¿®æ¹åéç½®ï¼ç¶åå°active_versionä¿®æ¹ä¸º1ï¼åç»­é¡¹ç®ä¸­æ°æ®æºä¹å·æ°äºãä¸»åºåä¸º3312ï¼ä»åºåä¸ºäº3313.</p>
<p><a href="https://github.com/GCMH/Read-Write-Separation" target="_blank" rel="noopener nofollow">å®æ´ä»£ç è¯¦è§https://github.com/GCMH/Read-Write-Separation</a></p>
<p>åèèµæï¼<br>
[1].ãæ°æ®å¯éååºç¨ç³»ç»è®¾è®¡ã<br>
[2].ãMySQL45è®²ã<br>
[3]. <a href="http://shardingsphere.apache.org/document/current/en/overview/" target="_blank" rel="noopener nofollow">Shrding Jdbc</a></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.0006944444444444445" data-date-updated="2026-01-04 15:49">2026-01-04 15:48</span>&nbsp;
<a href="https://www.cnblogs.com/huang-changfan">gcmh</a>&nbsp;
éè¯»(<span id="post_view_count">28</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19185323);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19185323', targetLink: 'https://www.cnblogs.com/huang-changfan/p/19185323', title: 'è¯»ååç¦»é¢ä¸´çé®é¢åå¶è§£å³æ¹æ¡' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ åºäº ContextCapture SDK ç Python èªå¨åä¸ç»´å»ºæ¨¡ ]]></title>
    <link>https://www.cnblogs.com/foury/p/19438102</link>
    <guid>0a81d9d20cc896789d84493da6198d75</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/foury/p/19438102" title="åå¸äº 2026-01-04 15:13">
    <span role="heading" aria-level="2">åºäº ContextCapture SDK ç Python èªå¨åä¸ç»´å»ºæ¨¡</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="åºäº-contextcapture-sdk-ç-python-èªå¨åä¸ç»´å»ºæ¨¡">åºäº ContextCapture SDK ç Python èªå¨åä¸ç»´å»ºæ¨¡</h1>
<p>ContextCapture æ¯ Bentley æä¾çä¸æ¬¾åä¸çº§ä¸ç»´éå»ºè½¯ä»¶ï¼å¹¿æ³åºç¨äºæ äººæºå¾ææå½±ãå®æ¯ä¸ç»´å»ºæ¨¡ç­åºæ¯ã</p>
<p>æ¬æåºäº ContextCapture å®æ¹æä¾ç MasterKernel SDKï¼ä»ç»å¦ä½éè¿ Python èæ¬å®ç°å¯¹ ContextCapture å»ºæ¨¡æµç¨çèªå¨åæ§å¶ï¼åæ¬é¡¹ç®åå»ºãç©ºä¸­ä¸è§æµéï¼ATï¼ãä¸ç»´éå»ºä»¥åå¤ç§æ ¼å¼ææçé¡ºåºçäº§ã</p>
<p><strong>ContextCapture MasterKernel SDKä»ç»</strong>:<a href="https://docs.bentley.com/LiveContent/web/ContextCapture%20Help-v18/zh-cn/GUID-8A35B878-C2BB-4F01-8D5A-18321EF04410.html" target="_blank" rel="noopener nofollow">https://docs.bentley.com/LiveContent/web/ContextCapture Help-v18/zh-cn/GUID-8A35B878-C2BB-4F01-8D5A-18321EF04410.html</a></p>
<h2 id="1å®è£contextcapture">1.å®è£ContextCapture</h2>
<p>åºäºContextCaptureçå®è£ç½ä¸æå¾å¤è¯¦ç»çæç¨ï¼æ¬æä¸åå¯¹å®è£æ­¥éª¤è¿è¡è¯¦ç»å±å¼ã<br>
æ¬ææµè¯ç¯å¢ä½¿ç¨çContextCaptureçæ¬ä¸º <strong>v10.18.0.232</strong>ï¼åç»­ç¤ºä¾ååºäºè¯¥çæ¬ï¼ä»ä¾åèã</p>
<h2 id="2éç½®éåcontextcaptureçpythonç¯å¢">2.éç½®éåContextCaptureçPythonç¯å¢</h2>
<p>å¨ ContextCapture å®è£ç®å½ç <code>sdk/dist</code> æä»¶å¤¹ä¸­ï¼å¯ä»¥æ¾å°å®æ¹æä¾ç Python SDK å®è£åï¼<code>.whl</code> æä»¶ï¼ã</p>
<p>ä¾å¦ï¼<br>
<code>ccmasterkernel-10.18.0.232-cp36-cp36m-win_amd64.whl</code></p>
<p>å¶ä¸­âcp36-cp36mâè¡¨ç¤ºåªæ¯æ Python3.6 ç¸å³çæ¬ï¼è¦å®è£æ­£ç¡®çPythonçæ¬ï¼ã</p>
<p>å®è£å®æPythonç¯å¢åï¼æå¼å½ä»¤è¡è¿å¥sdk/distæä»¶å¤¹ä¸ï¼æ§è¡<code>pip install ccmasterkernel-10.18.0.232-cp36-cp36m-win_amd64.whl</code>å®è£å¥½è¿ä¸ªåã</p>
<p><img alt="ä¼ä¸å¾®ä¿¡æªå¾_17675106628003" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3476680/202601/3476680-20260104151130785-749681989.png" class="lazyload"></p>
<h2 id="3ç¼åpythonèæ¬">3.ç¼åPythonèæ¬</h2>
<p>å³äºsdkä½¿ç¨çç¸å³ææ¡£è¯´æå¨sdk/doc/htmlæä»¶å¤¹ä¸ã</p>
<p>ä¸é¢ç»åºä¸ä¸ªå®æ´ç Python èæ¬ç¤ºä¾ï¼ç¨äºæ¼ç¤ºå¦ä½éè¿ ContextCapture SDK å®ç°æ äººæºå½±åçèªå¨åä¸ç»´å»ºæ¨¡æµç¨ã</p>
<p>è¯¥èæ¬åç»­å¯æ ¹æ®å®ééæ±è¿è¡è£åªææ©å±ã</p>
<p>æ­¤èæ¬æ¯ä¸ä¸ªç¨äºèªå¨å ContextCapture (CC) å»ºæ¨¡æµç¨ç Python èæ¬ãå®è½å¤èªå¨åå»ºé¡¹ç®ãæäº¤ç©ºä¸è¿ç® (AT)ï¼å¹¶æé¡ºåºçæå¤ç§æ ¼å¼çä¸ç»´æ¨¡åï¼OBJ, LAS, 3D Tilesï¼ã</p>
<p><strong>æ³¨æï¼</strong> <mark>æ­£å¼è¿è¡èæ¬åï¼éç¡®ä¿ContextCapture Engine å·²å¯å¨ï¼å¦åä»»å¡æ æ³æ­£å¸¸æäº¤ï¼</mark></p>
<h3 id="31å½ä»¤è¡åæ°">3.1å½ä»¤è¡åæ°</h3>
<p>èæ¬æ¯æéè¿å½ä»¤è¡åæ°è¿è¡çµæ´»éç½®ï¼</p>
<table>
<thead>
<tr>
<th style="text-align: left">åæ°</th>
<th style="text-align: left">å¿é/å¯é</th>
<th style="text-align: left">é»è®¤å¼</th>
<th style="text-align: left">è¯´æ</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left"><code>--photos</code></td>
<td style="text-align: left"><strong>å¿é</strong></td>
<td style="text-align: left">-</td>
<td style="text-align: left">ç§çæå¨çæºæä»¶å¤¹è·¯å¾ãæ¯æ jpg, tif, png ç­æ ¼å¼ã</td>
</tr>
<tr>
<td style="text-align: left"><code>--project</code></td>
<td style="text-align: left"><strong>å¿é</strong></td>
<td style="text-align: left">-</td>
<td style="text-align: left">é¡¹ç®è¾åºçæ ¹æä»¶å¤¹è·¯å¾ãèæ¬å°å¨æ­¤ç®å½ä¸åå»º <code>.ccm</code> é¡¹ç®æä»¶ååä¸ªäº§ç©æä»¶å¤¹ã</td>
</tr>
<tr>
<td style="text-align: left"><code>--memory</code></td>
<td style="text-align: left">å¯é</td>
<td style="text-align: left"><code>16.0</code></td>
<td style="text-align: left">ç®æ åå­ä½¿ç¨é (GB)ãç¨äºæ§å¶ååå¤§å°ï¼å»ºè®®è®¾ç½®ä¸ºæºå¨ç©çåå­ç 50%-70%ã</td>
</tr>
<tr>
<td style="text-align: left"><code>--formats</code></td>
<td style="text-align: left">å¯é</td>
<td style="text-align: left">å¨é¨</td>
<td style="text-align: left">æå®è¦çäº§çæ ¼å¼åè¡¨ãå¯éå¼: <code>OBJ</code>, <code>LAS</code>, <code>3DTiles</code>ãå¤ä¸ªå¼ä¹é´ç¨ç©ºæ ¼åéã</td>
</tr>
</tbody>
</table>
<h3 id="32-ä½¿ç¨ç¤ºä¾">3.2 ä½¿ç¨ç¤ºä¾</h3>
<p>å¨å½ä»¤è¡ (CMD æ PowerShell) ä¸­è¿è¡ä»¥ä¸å½ä»¤ã</p>
<h4 id="1-åºç¡ç¨æ³">1ï¼ åºç¡ç¨æ³</h4>
<p>çæææé»è®¤æ ¼å¼ (OBJ, LAS, 3D Tiles)ï¼é»è®¤ä½¿ç¨ 16GB åå­éå¶ã</p>
<pre><code class="language-powershell">python test_cc_sequential.py --photos "D:\MyData\Mission_01\Images" --project "D:\Projects\Mission_01"
</code></pre>
<h4 id="2æå®è¾åºæ ¼å¼">2ï¼æå®è¾åºæ ¼å¼</h4>
<p>å¦æä½ åªéè¦ç¹äº (LAS) å OBJ æ¨¡åï¼ä¸éè¦ 3D Tilesï¼</p>
<pre><code class="language-powershell">python test_cc_sequential.py --photos "D:\Images" --project "D:\Output" --formats LAS OBJ
</code></pre>
<h4 id="3èªå®ä¹åå­éå¶">3ï¼èªå®ä¹åå­éå¶</h4>
<p>éå¯¹å¤§åå­ (ä¾å¦ 64GB åå­)ï¼å¯ä»¥è°é«éå¶ä»¥å å¿«å¤çéåº¦ (ä¾å¦è®¾ä¸º 48GB)ï¼</p>
<pre><code class="language-powershell">python test_cc_sequential.py --photos "D:\Images" --project "D:\Output" --memory 48.0
</code></pre>
<p>éå¯¹å°åå­æºå¨ (ä¾å¦ 16GB åå­)ï¼å»ºè®®è°ä½éå¶ (ä¾å¦ 8GB)ï¼</p>
<pre><code class="language-powershell">python test_cc_sequential.py --photos "D:\Images" --project "D:\Output" --memory 8.0
</code></pre>
<h3 id="33-è¾åºç»æ">3.3 è¾åºç»æ</h3>
<p>è¿è¡å®æåï¼å¨æå®ç <code>--project</code> ç®å½ä¸ä¼èªå¨çæä»¥ä¸ç»æï¼</p>
<pre><code class="language-text">D:\Projects\Mission_01\         &lt;-- é¡¹ç®æ ¹ç®å½
â  Mission_01.ccm              &lt;-- CC å·¥ç¨æä»¶
â  cc_sequential.log           &lt;-- è¯¦ç»è¿è¡æ¥å¿
â
ââ Production_OBJ\             &lt;-- OBJ æ¨¡åè¾åºç®å½
â      metadata.xml
â      ...
â
ââ Production_LAS\             &lt;-- LAS ç¹äºè¾åºç®å½
â      cloud.las
â      ...
â
ââ Production_3DTiles\         &lt;-- Cesium 3D Tiles è¾åºç®å½
       tileset.json
       ...
</code></pre>
<h3 id="34-æ¥å¿">3.4 æ¥å¿</h3>
<p>èæ¬è¿è¡è¿ç¨ä¸­ï¼ç®è¦ä¿¡æ¯ä¼æ¾ç¤ºå¨å±å¹ä¸ã<br>
è¯¦ç»çå¸¦æ¶é´æ³çæ¥å¿ä¼ä¿å­å¨èæ¬åçº§ç®å½ä¸ç <code>cc_sequential.log</code> æä»¶ä¸­ã</p>
<h3 id="35-å·ä½ä»£ç å®ç°">3.5 å·ä½ä»£ç å®ç°</h3>
<pre><code class="language-python">"""
ContextCapture é¡ºåºå¤æ ¼å¼çäº§èæ¬
æ¯æ OBJãLAS ç¹äºãCesium 3D Tiles ä¸ç§æ ¼å¼
ä½¿ç¨ååå¤ç (Tiling) æ§å¶åå­
é¡ºåºæ§è¡é¿ååå­ä¸è¶³
"""
import sys
import time
import os
import logging
from logging.handlers import RotatingFileHandler
import traceback
import argparse

# --- æ¥å¿éç½® ---
# æ¥å¿æä»¶åä¸º cc_sequential.logï¼ä½äºèæ¬æå¨ç®å½
log_file_path = os.path.join(os.path.dirname(os.path.abspath(__file__)), 'cc_sequential.log')

logger = logging.getLogger('CC_Production')
logger.setLevel(logging.INFO)

# 1. RotatingFileHandler: 10MB åå²ï¼ä¿ç 5 ä¸ªå¤ä»½
# maxBytes = 10 * 1024 * 1024 = 10485760 B
rf_handler = RotatingFileHandler(log_file_path, maxBytes=10 * 1024 * 1024, backupCount=5, encoding='utf-8')
file_formatter = logging.Formatter('%(asctime)s [%(levelname)s] %(message)s')
rf_handler.setFormatter(file_formatter)
logger.addHandler(rf_handler)

# 2. StreamHandler: è¾åºå°æ§å¶å°
console_handler = logging.StreamHandler(sys.stdout)
console_handler.setFormatter(logging.Formatter('%(message)s'))  # æ§å¶å°è¾åºä¿æåæ ·ï¼çº¯ææ¬æ¹ä¾¿éè¯»
logger.addHandler(console_handler)
# ----------------

try:
    import ccmasterkernel

    logger.info("æåå¯¼å¥ ccmasterkernel æ¨¡å")
except ImportError:
    logger.error("éè¯¯: æ æ³å¯¼å¥ ccmasterkernel æ¨¡åã")
    sys.exit(1)


def parse_args():
    parser = argparse.ArgumentParser(description="ContextCapture é¡ºåºå¤æ ¼å¼çäº§èæ¬")

    # è·¯å¾åæ° (å¿é¡»)
    parser.add_argument('--photos', required=True, help='ç§çæå¨ç®å½è·¯å¾')
    parser.add_argument('--project', required=True, help='é¡¹ç®è¾åºç®å½è·¯å¾')

    # å¯éåæ°
    parser.add_argument('--memory', type=float, default=16.0, help='ç®æ åå­ä½¿ç¨é (GB)ï¼é»è®¤ 16.0')
    parser.add_argument('--formats', nargs='+', default=['OBJ', 'LAS', '3DTiles'],
                        choices=['OBJ', 'LAS', '3DTiles'],
                        help='æå®è¦çäº§çæ ¼å¼ (é»è®¤å¨é¨): OBJ, LAS, 3DTiles')

    return parser.parse_args()


def main():
    args = parse_args()

    # å®ä¹è·¯å¾åé (ä» args è·å)
    project_dir = args.project
    # èªå¨æ ¹æ®ç®å½åçæé¡¹ç®æä»¶å
    project_name_base = os.path.basename(os.path.normpath(project_dir))
    project_file_path = os.path.join(project_dir, f"{project_name_base}.ccm")
    photos_dir = args.photos

    # å¤æ ¼å¼è¾åºç®å½
    production_obj_dir = os.path.join(project_dir, "Production_OBJ")
    production_las_dir = os.path.join(project_dir, "Production_LAS")
    production_3dtiles_dir = os.path.join(project_dir, "Production_3DTiles")

    logger.info("\n" + "=" * 60)
    logger.info("ContextCapture é¡ºåºå¤æ ¼å¼èªå¨åèæ¬ (CLI Mode)")
    logger.info("=" * 60)
    logger.info(f"é¡¹ç®æä»¶è·¯å¾: {project_file_path}")
    logger.info(f"ç§çç®å½:     {photos_dir}")
    logger.info(f"ç®æ åå­:     {args.memory} GB")

    # ç¡®å®è¦çäº§çæ ¼å¼
    formats_to_produce_list = []

    # æ ¼å¼å®ä¹æ å°: Name -&gt; (DriverName, OutputDir, Description)
    format_map = {
        'OBJ': ("OBJ", production_obj_dir, "OBJ ç½æ ¼æ¨¡å"),
        'LAS': ("LAS", production_las_dir, "LAS ç¹äº"),
        '3DTiles': ("Cesium 3D Tiles", production_3dtiles_dir, "Cesium 3D Tiles")
    }

    req_formats = args.formats

    logger.info(f"è®¡åçäº§æ ¼å¼: {', '.join(req_formats)}")

    # æå»º production list
    # ä¿æåæé¡ºåº: OBJ -&gt; LAS -&gt; 3DTiles (å¦æè¢«éä¸­)
    if 'OBJ' in req_formats:
        formats_to_produce_list.append(('OBJ', *format_map['OBJ']))
    if 'LAS' in req_formats:
        formats_to_produce_list.append(('LAS', *format_map['LAS']))
    if '3DTiles' in req_formats:
        formats_to_produce_list.append(('Cesium 3D Tiles', *format_map['3DTiles']))

    logger.info("\nè¾åºä½ç½®é¢è§:")
    for _, _, out_dir, desc in formats_to_produce_list:
        logger.info(f"  - {desc}: {out_dir}")

    logger.info("\næ³¨æ: éä¸­æ ¼å¼å°ä¾æ¬¡æ§è¡ï¼é¿ååå­ä¸è¶³")
    logger.info("=" * 60 + "\n")

    # ç¡®ä¿é¡¹ç®ç®å½å­å¨
    if not os.path.exists(project_dir):
        try:
            os.makedirs(project_dir)
        except OSError as e:
            logger.error(f"éè¯¯: æ æ³åå»ºé¡¹ç®ç®å½ {project_dir}: {e}")
            return

    # 1. åå»ºå¹¶éç½®é¡¹ç®
    logger.info("æ­£å¨åå»ºé¡¹ç®...")
    project = ccmasterkernel.Project()
    project.setName(project_name_base)  # ä½¿ç¨ç®å½åä½ä¸ºé¡¹ç®å
    project.setProjectFilePath(project_file_path)

    # 2. åå»ºåºåå¹¶æ·»å ç§ç
    logger.info("æ­£å¨åå»ºåå§åºå...")
    block = ccmasterkernel.Block(project)
    project.addBlock(block)
    block.setName("InitialBlock")

    logger.info("æ­£å¨æ·»å ç§ç...")
    photogroups = block.getPhotogroups()

    if os.path.exists(photos_dir):
        photo_files = [f for f in os.listdir(photos_dir)
                       if f.lower().endswith(('.jpg', '.jpeg', '.tif', '.tiff', '.png'))]
        if not photo_files:
            logger.warning(f"è­¦å: å¨ {photos_dir} ä¸­æªæ¾å°ç§çæä»¶ã")

        for f in photo_files:
            full_path = os.path.join(photos_dir, f)
            photogroups.addPhotoInAutoMode(full_path)
        logger.info(f"å·²å°è¯æ·»å  {len(photo_files)} å¼ ç§çã")
    else:
        logger.error(f"éè¯¯: ç§çç®å½ {photos_dir} ä¸å­å¨ã")
        return

    # éªè¯åºåæ¯å¦ææ
    if not block.isReadyForAT():
        logger.error("éè¯¯: åºåæªåå¤å¥½è¿è¡ ATã")
        return

    # ä¿å­é¡¹ç®
    logger.info("æ­£å¨ä¿å­é¡¹ç®...")
    save_error = project.writeToFile()
    if not save_error.isNone():
        logger.error(f"ä¿å­é¡¹ç®å¤±è´¥: {save_error.message}")
        return
    logger.info("é¡¹ç®ä¿å­æåã")

    # 3. ç©ºä¸­ä¸è§æµé (AT)
    logger.info("\nåå¤ç©ºä¸­ä¸è§æµé (AT) åºå...")
    block_at = ccmasterkernel.Block(project)
    project.addBlock(block_at)
    block_at.setName("AT_Block")
    block_at.setBlockTemplate(ccmasterkernel.BlockTemplate.Template_adjusted, block)

    # ä¿å­æ´æ°åçé¡¹ç®
    logger.info("æ­£å¨ä¿å­æ´æ°åçé¡¹ç®...")
    save_error = project.writeToFile()
    if not save_error.isNone():
        logger.error(f"ä¿å­é¡¹ç®å¤±è´¥: {save_error.message}")
        return

    logger.info("å¼å§æäº¤ AT å¤ç...")
    at = block_at.getAT()
    if at is None:
        logger.error("éè¯¯: æ æ³è·å AT å¯¹è±¡ã")
        return

    # æäº¤ AT å¤ç
    submit_error = at.submitProcessing()
    if not submit_error.isNone():
        logger.error(f"AT æäº¤å¤±è´¥: {submit_error.message}")
        return

    # çæ§ AT ä»»å¡
    if not monitor_job(at, "AT"):
        logger.error("AT å¤çæªæåå®æï¼èæ¬ç»æ­¢ã")
        return

    logger.info("AT å¤çå®æã\n")

    # 4. éå»º (Reconstruction) - éç½®ååå¤ç
    logger.info("=" * 60)
    logger.info("åå»ºéå»ºé¡¹ç®...")
    logger.info("=" * 60)

    reconstruction = ccmasterkernel.Reconstruction(block_at)
    block_at.addReconstruction(reconstruction)
    reconstruction.setName("Reconstruction_Sequential")

    # éç½®éå»ºè®¾ç½®
    logger.info("\néç½®éå»ºè®¾ç½®...")
    settings = reconstruction.getSettings()
    reconstruction.setSettings(settings)

    # éç½®ååå¤ç (Tiling)
    logger.info("éç½®ååå¤ç (Tiling)...")
    tiling = reconstruction.getTiling()
    tiling.tilingMode = ccmasterkernel.TilingMode.TilingMode_adaptive
    tiling.targetMemoryUse = args.memory  # ä½¿ç¨å½ä»¤è¡åæ°
    tiling.overlapRatio = 0.2
    tiling.discardEmptyTiles = True
    reconstruction.setTiling(tiling)

    logger.info(f"  - æ¨¡å¼: Adaptive (èªå¨åå)")
    logger.info(f"  - ç®æ åå­: {tiling.targetMemoryUse} GB")
    logger.info(f"  - ç¦çéå ç: {tiling.overlapRatio * 100}%")

    # ä¿å­éå»ºéç½®
    logger.info("\nä¿å­éå»ºéç½®...")
    save_error = project.writeToFile()
    if not save_error.isNone():
        logger.error(f"ä¿å­é¡¹ç®å¤±è´¥: {save_error.message}")
        return

    # è·åç¦çæ°é
    num_tiles = reconstruction.getNumInternalTiles()
    logger.info(f"\néå»ºåå« {num_tiles} ä¸ªç¦ç")

    # 5. é¡ºåºçäº§ - ä¾æ¬¡æ§è¡æ¯ç§æ ¼å¼
    logger.info("\n" + "=" * 60)
    logger.info("å¼å§é¡ºåºçäº§ï¼ä¾æ¬¡æ§è¡ï¼é¿ååå­ä¸è¶³ï¼")
    logger.info("=" * 60)

    results = []

    # éåæä»¬æå»ºçæ ¼å¼åè¡¨
    for idx, (prod_name, driver_name, output_dir, description) in enumerate(formats_to_produce_list, 1):
        logger.info("\n" + "=" * 60)
        logger.info(f"ç¬¬ {idx}/{len(formats_to_produce_list)} æ­¥: çäº§ {description}")
        logger.info("=" * 60)

        # åå»ºçäº§
        logger.info(f"\néç½® {description}...")
        production = ccmasterkernel.Production(reconstruction)
        reconstruction.addProduction(production)
        production.setName(f"Production_{prod_name}")
        production.setDriverName(driver_name)
        production.setDestination(output_dir)
        logger.info(f"  â {description} éç½®å®æ")

        # ä¿å­é¡¹ç®
        save_error = project.writeToFile()
        if not save_error.isNone():
            logger.error(f"  â ä¿å­é¡¹ç®å¤±è´¥: {save_error.message}")
            results.append((description, False))
            continue

        # æ·»å ææç¦çä»»å¡
        logger.info(f"\nä¸º {description} æ·»å  {num_tiles} ä¸ªç¦çä»»å¡...")
        production_jobs = []
        try:
            for i in range(num_tiles):
                tile = reconstruction.getInternalTile(i)
                job = ccmasterkernel.TileProductionJob(production, tile)
                production.addProductionJob(job)
                production_jobs.append(job)
            logger.info(f"  â å·²æ·»å  {num_tiles} ä¸ªç¦çä»»å¡")
        except Exception as e:
            logger.error(f"  â æ·»å ä»»å¡æ¶åºé: {e}")
            results.append((description, False))
            continue

        # æäº¤çäº§
        logger.info(f"\næäº¤ {description} çäº§...")
        submit_error = production.submitProcessing()
        if not submit_error.isNone():
            logger.error(f"  â æäº¤å¤±è´¥: {submit_error.message}")
            results.append((description, False))
            continue
        logger.info(f"  â æäº¤æå")

        # çæ§ææç¦çä»»å¡
        logger.info(f"\nçæ§ {description} ä»»å¡ï¼{num_tiles} ä¸ªç¦çï¼...")
        all_tiles_success = True
        for tile_idx, job in enumerate(production_jobs):
            job_desc = f"{description} - ç¦ç {tile_idx}"
            if not monitor_job(job, job_desc):
                logger.error(f"  â ç¦ç {tile_idx} å¤çå¤±è´¥")
                all_tiles_success = False
                break  # å¦æä¸ä¸ªç¦çå¤±è´¥ï¼åæ­¢çæ§åç»­ç¦ç
            else:
                logger.info(f"  â ç¦ç {tile_idx} å¤çæå")

        if all_tiles_success:
            logger.info(f"\nâ {description} ææç¦çå¤çæåï¼")
            logger.info(f"  è¾åºä½ç½®: {output_dir}")
            results.append((description, True))
        else:
            logger.error(f"\nâ {description} å¤çå¤±è´¥")
            results.append((description, False))

    # æç»ç»ææ±æ»
    logger.info("\n" + "=" * 60)
    logger.info("çäº§ç»ææ±æ»")
    logger.info("=" * 60)

    for description, success in results:
        status = "â æå" if success else "â å¤±è´¥"
        logger.info(f"  {status}: {description}")

    all_success = all(success for _, success in results)

    if all_success:
        logger.info("\n" + "=" * 60)
        logger.info("ææè¯·æ±çæ ¼å¼çäº§æåå®æï¼")
        logger.info("=" * 60)
    else:
        logger.error("\né¨åæ ¼å¼çäº§å¤±è´¥ï¼è¯·æ£æ¥æ¥å¿è·åè¯¦ç»ä¿¡æ¯ã")


def monitor_job(job_object, job_name):
    """
    éç¨ä»»å¡çæ§å½æ°
    """
    previous_status = ccmasterkernel.JobStatus.Job_unknown

    while True:
        # æ´æ°ç¶æ
        try:
            job_object.updateJobStatus()
        except AttributeError:
            pass

        status = job_object.getJobStatus()

        # æ¾ç¤ºç¶æåå
        if status != previous_status:
            status_str = ccmasterkernel.jobStatusAsString(status)
            logger.info(f"    [{job_name}] {status_str}")
            previous_status = status

        # æ£æ¥æ¯å¦ç»æ
        if status in [ccmasterkernel.JobStatus.Job_completed,
                      ccmasterkernel.JobStatus.Job_failed,
                      ccmasterkernel.JobStatus.Job_cancelled]:
            break

        time.sleep(2)

    # æç»ç»ææ£æ¥
    if status == ccmasterkernel.JobStatus.Job_completed:
        return True
    else:
        msg = job_object.getJobMessage()
        if msg:
            logger.error(f"    [{job_name}] éè¯¯: {msg}")
        return False


if __name__ == "__main__":
    try:
        main()
    except KeyboardInterrupt:
        logger.info("\n\nç¨æ·ä¸­æ­èæ¬æ§è¡ã")
    except Exception as e:
        logger.error(f"\néè¯¯: {e}")
        logger.error("è¯¦ç»å æ :", exc_info=True)


</code></pre>
<p><strong>githubä»åºå°å</strong>ï¼<a href="https://github.com/Canon-create/contextcapture-python-example" target="_blank" rel="noopener nofollow">https://github.com/Canon-create/contextcapture-python-example</a></p>
<p><strong>åèæç« </strong>ï¼<a href="https://blog.csdn.net/qq_41475842/article/details/112959892" target="_blank" rel="noopener nofollow">https://blog.csdn.net/qq_41475842/article/details/112959892</a></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-04 15:13">2026-01-04 15:13</span>&nbsp;
<a href="https://www.cnblogs.com/foury">æ·±ç´«è²çä¸åå­å·</a>&nbsp;
éè¯»(<span id="post_view_count">36</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19438102);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19438102', targetLink: 'https://www.cnblogs.com/foury/p/19438102', title: 'åºäº ContextCapture SDK ç Python èªå¨åä¸ç»´å»ºæ¨¡' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ãè¯ãCopilot Profiler Agent ââ åæä»»å¡äº¤ç± AIï¼åºç¨æ§è½ä¸åå½±å ]]></title>
    <link>https://www.cnblogs.com/MeteorSeed/p/19434707</link>
    <guid>f60d99d266c8028db1e583aec3c56593</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/MeteorSeed/p/19434707" title="åå¸äº 2026-01-04 14:17">
    <span role="heading" aria-level="2">ãè¯ãCopilot Profiler Agent ââ åæä»»å¡äº¤ç± AIï¼åºç¨æ§è½ä¸åå½±å</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        å¨ Visual Studio 2026 ä¸­ï¼æä»¬æ¨åºäº Copilot Profiler Agentï¼è¿æ¯ä¸æ¬¾æ°çäººå·¥æºè½é©±å¨çå©æï¼å¯å¸®å©æ¨åæåä¼åä»£ç ä¸­çæ§è½ç¶é¢ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p><span>ããå¨ Visual Studio 2026 ä¸­ï¼æä»¬æ¨åºäº Copilot Profiler Agentï¼è¿æ¯ä¸æ¬¾æ°çäººå·¥æºè½é©±å¨çå©æï¼å¯å¸®å©æ¨åæåä¼åä»£ç ä¸­çæ§è½ç¶é¢ãéè¿å° GitHub Copilot çåè½ä¸ Visual Studio çæ§è½åæå¨ç¸ç»åï¼æ¨ç°å¨å¯ä»¥ç¨èªç¶è¯­è¨è¯¢é®æå³æ§è½çé®é¢ï¼æ·±å¥äºè§£ç­ç¹è·¯å¾ï¼å¹¶å¿«éåç°ä¼åæºä¼ãè®©æä»¬æ¥çä¸ä¸ªçå®çä¾å­ï¼äºè§£è¿æ¬¾å·¥å·å¦ä½å¸®å©æ¨å®ç°ææä¹çæ§è½æ¹è¿ã</span></p>
<h1><span><span>å¯¹å®éé¡¹ç®è¿è¡åºåæµè¯</span></span></h1>
<p><span>ããä¸ºäºå±ç¤º Copilot Profiler Agent çåè½ï¼è®©æä»¬å¯¹ä¸ä¸ªå¹¿åæ¬¢è¿çå¼æºé¡¹ç® CsvHelper è¿è¡ä¼åãæ¨å¯ä»¥æç§ä»¥ä¸æ­¥éª¤æä½ï¼åéæçä»£ç ä»åºåæ¯ï¼ç¶åéè¿âgit checkout 435ff7câå½ä»¤åæ¢å°æä¿®å¤ä¹åççæ¬ï¼æä»¬å°å¨ä¸æè¯¦ç»ä»ç»è¯¥ä¿®å¤ã</span></p>
<p><span>ããå¨æä¹åçä¸ç¯åå®¢æç« ä¸­ï¼ææ·»å äºä¸ä¸ª CsvHelper.Benchmarks é¡¹ç®ï¼å¶ä¸­åå«ä¸ä¸ªç¨äºè¯»å CSV è®°å½çåºåæµè¯ãè¿æ¬¡ææ³ççæä»¬æ¯å¦å¯ä»¥ä¼å CSV è®°å½çåå¥ãéå¸¸ï¼æä¼éè¿ä¸ºæ³è¦ä¼åçä»£ç åå»ºåºåæµè¯æ¥å¼å§è¿é¡¹ç ç©¶ï¼ä¸è¿è½ç¶æä»¬ä»ç¶ä¼è¿æ ·åï¼ä½æä»¬å¯ä»¥è®© Copilot æ¥æ¿æè¿äºç¹éçå·¥ä½ãå¨ Copilot èå¤©çªå£ä¸­ï¼æå¯ä»¥é®@Profiler âå¸®æä¸º&nbsp;<span><a class="wx_topic_link" data-topic="1">#WriteRecords</a>&nbsp;æ¹æ³ç¼åä¸ä¸ªåºåæµè¯<span>âã@Profiler è®©æä»¬ç´æ¥ä¸ Copilot Profiler Agent å¯¹è¯ï¼è&nbsp;<a class="wx_topic_link" data-topic="1">#WriteRecords</a>&nbsp;åæç¡®åè¯å®æä»¬è¦è¿è¡åºåæµè¯çæ¹æ³ã</span></span></span></p>
<p><span><img src="https://img2024.cnblogs.com/blog/270073/202601/270073-20260103183046930-1636522852.webp" alt="1" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></span></p>
<p><span>ããä»è¿éå¼å§ï¼Copilot çæåå»ºæä»¬çæ°åºåæµè¯ï¼å®ä¼è¯¢é®æä»¬æ¯å¦å¯ä»¥å®è£åæå¨ç NuGet åï¼ä»¥ä¾¿å¨è¿è¡åºåæµè¯æ¶ä»ä¸­æåä¿¡æ¯ãå®è¿ä¼æ ¹æ®æ¾å°çä»»ä½ç°æåºåæµè¯æ¥æå»ºæ°çåºåæµè¯æ¨¡åï¼å æ­¤çæçåºåæµè¯ä¸æä»¬å·²ç»ç¼åçéå¸¸ç¸ä¼¼ï¼ä»èä¿æä¸å­å¨åºé£æ ¼çä¸è´æ§ãæåï¼å®ä¼å¯å¨æå»ºè¿ç¨ï¼ä»¥ç¡®ä¿ä¸åæ­£å¸¸ã</span></p>
<p><span><img src="https://img2024.cnblogs.com/blog/270073/202601/270073-20260103183102876-936615004.webp" alt="2" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></span></p>
<p><span>ããå®æåï¼å®ä¼æä¾ä¸äºæç¨çåç»­æç¤ºæ¥å¯å¨è°æ¥ãæä»¬å¯ä»¥ç¹å»å¶ä¸­ä¸ä¸ªæ¥å±å¼è°æ¥ï¼ä¸è¿ææ³å¯¹åºåæµè¯åäºç»å¾®çä¿®æ¹ã</span></p>
<p><span><img src="https://img2024.cnblogs.com/blog/270073/202601/270073-20260103183116605-1267996258.webp" alt="3" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></span></p>
<p><span>ããæå¯¹åºåæµè¯åäºäºè°æ´ï¼å¢å äºå ä¸ªä¾æä»¬åå¥çå­æ®µï¼è¿éå·ä½æ¯ 2 ä¸ªæ´æ°å­æ®µå 2 ä¸ªå­ç¬¦ä¸²å­æ®µãå¨ä¸ºè¿ç¯åå®¢æ°ååå®¹ä¹åï¼ææåè®© Copilot æ¥åè¿ä»¶äºæ¶ï¼å®æ¯æ¬¡é½æ¯åå¥ä¸ä¸ªæ°çåå­æµï¼èä¸æ¯åä¸ä¸ªåå­æµãåå¥åä¸ä¸ªåå­æµæè®¸æ¯æ´å¥½çåæ³ï¼è¿æ¬¡ç®ä½ èµ¢äº Copilotï¼ä½å¨æç» CsvHelper æäº¤çæåçæåè¯·æ±ä¸­ï¼æå¹¶æ²¡æè¿ä¹åï¼ä¸è¿åºè¯¥ä¹æ²¡ä»ä¹é®é¢ã</span></p>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">public class BenchmarkWriteCsv 
{ 
â¯ â¯ private const int entryCount = 10000; 
â¯ â¯ private readonly List records = new(entryCount); 

â¯ â¯ public class Simple 
â¯ â¯ { 
â¯ â¯ â¯ â¯ public int Id1 { get; set; } 
â¯ â¯ â¯ â¯ public int Id2 { get; set; } 
â¯ â¯ â¯ â¯ public string Name1 { get; set; } 
â¯ â¯ â¯ â¯ public string Name2 { get; set; } 
â¯ â¯ } 

â¯ â¯ [GlobalSetup] 
â¯ â¯ public void GlobalSetup() 
â¯ â¯ { 
â¯ â¯ â¯ â¯ var random = new Random(42); 
â¯ â¯ â¯ â¯ var chars = new char[10]; 

â¯ â¯ â¯ â¯ string getRandomString() 
â¯ â¯ â¯ â¯ { 
â¯ â¯ â¯ â¯ â¯ â¯ for (int i = 0; i &lt; 10; ++i) 
â¯ â¯ â¯ â¯ â¯ â¯ â¯ â¯ chars[i] = (char)random.Next('a', 'z' + 1); 
â¯ â¯ â¯ â¯ â¯ â¯ return new string(chars); 
â¯ â¯ â¯ â¯ } 

â¯ â¯ â¯ â¯ for (int i = 0; i &lt; entryCount; ++i) 
â¯ â¯ â¯ â¯ { 
â¯ â¯ â¯ â¯ â¯ â¯ records.Add(new Simple 
â¯ â¯ â¯ â¯ â¯ â¯ { 
â¯ â¯ â¯ â¯ â¯ â¯ â¯ â¯ Id1 = random.Next(), 
â¯ â¯ â¯ â¯ â¯ â¯ â¯ â¯ Id2 = random.Next(), 
â¯ â¯ â¯ â¯ â¯ â¯ â¯ â¯ Name1 = getRandomString(), 
â¯ â¯ â¯ â¯ â¯ â¯ â¯ â¯ Name2 = getRandomString(), 
â¯ â¯ â¯ â¯ â¯ â¯ }); 
â¯ â¯ â¯ â¯ } 
â¯ â¯ } 

â¯ â¯ [Benchmark] 
â¯ â¯ public void WriteRecords() 
â¯ â¯ { 
â¯ â¯ â¯ â¯ using var stream = new MemoryStream(); 
â¯ â¯ â¯ â¯ using var streamWriter = new StreamWriter(stream); 
â¯ â¯ â¯ â¯ using var writer = new CsvHelper.CsvWriter(streamWriter, CultureInfo.InvariantCulture); 
â¯ â¯ â¯ â¯ writer.WriteRecords(records); 
â¯ â¯ â¯ â¯ streamWriter.Flush(); 
â¯ â¯ } 
} </pre>
</div>
<h1><span><span>æ·±å¥äºè§£åºåæµè¯</span></span></h1>
<p><span>ããç°å¨å¼å§åæï¼ææ¢å¯ä»¥è®© Profiler Agent è¿è¡åºåæµè¯ï¼ä¹å¯ä»¥ç´æ¥ç¹å»åç»­æç¤ºâ@Profiler Run the benchmark and analyze resultsâãä»è¿éå¼å§ï¼Copilot ä¼ç¼è¾æçä¸»æ¹æ³ï¼ä¹ä¸çå¯è½æäºå¥æªï¼ä½æ¥çæåçæ´æ¹åï¼æåç°å®ä¸ºäºä½¿ç¨ BenchmarkSwitcher è¿è¡äºå¿è¦çä¿®æ¹ï¼è¿æ ·å°±è½éæ©è¦è¿è¡çåºåæµè¯äºï¼</span></p>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">static void Main(string[] args)
{
â¯ â¯ // Use assembly-wide discovery so all benchmarks in this assembly are run,
â¯ â¯ // including the newly added BenchmarkWriteRecords.
â¯ â¯ _ = BenchmarkSwitcher.FromAssembly(typeof(BenchmarkEnumerateRecords).Assembly).Run(args);
}</pre>
</div>
<p><span>ããç¶åå®å¯å¨äºä¸æ¬¡åºåæµè¯è¿è¡ï¼å®æåä¼ç»æä¸ä¸ªè¯æ­ä¼è¯ï¼æå¯ä»¥å¨å¶ä¸­å¼å§è°æ¥ã</span></p>
<h1><span><span>ä½¿ç¨ Copilot Profiler Agent æ¥æ¥æ¾ç¶é¢</span></span></h1>
<p><span>ããç°å¨å°äºä»¤äººå´å¥çé¨åãè¿è¡åºåæµè¯åï¼Profiler Agent ä¼åæè·è¸ªä¿¡æ¯ï¼å¹¶çªåºæ¾ç¤ºæ¶é´çæ¶èä½ç½®ãæå¯ä»¥å Profiler Agent è¯¢é®æå³è·è¸ªçé®é¢ï¼è®©å®è§£éä»£ç ä¸ºä»ä¹è¿è¡ç¼æ¢ï¼æèæäºä¼åä¸ºä½ä¼æå¸®å©ãå®å·²ç»æåºï¼å¤§é¨åæ¶é´é½è±å¨å§æç¼è¯åè°ç¨ä¸ï¼è¿æ¯éå¯¹ CSV è®°å½ä¸­çæ¯ä¸ªå­æ®µè¿è¡çãå¯¹äºä¸ä¸ªæ 4 ä¸ªå­æ®µãè¢«åå¥ 10,000 æ¬¡çè®°å½æ¥è¯´ï¼è¿æå³çä¼æ 40,000 æ¬¡å§æè°ç¨ãæ¯æ¬¡è°ç¨é½æå¼éï¼èè¿å¨åæå¨ä¸­æ¾ç¤ºä¸ºä¸ä¸ªç­ç¹è·¯å¾ã</span></p>
<p><span><img src="https://img2024.cnblogs.com/blog/270073/202601/270073-20260103183341061-1323757922.webp" alt="6" loading="lazy"></span></p>
<p><span>ããæå¯ä»¥é® Profiler Agentï¼âæææ ·æè½åå°å§æè°ç¨çå¼éï¼âæèâä¸ºä»ä¹å§æè°ç¨å¾æ¢ï¼âï¼èå®ä¼åä¸ä½èå¿çèå¸ä¸æ ·è§£éç¸å³æ¦å¿µå¹¶æåºä¿®å¤å»ºè®®ã</span></p>
<h1><span><span>å®æ½ä¿®å¤æ¹æ¡</span></span></h1>
<p><span>ããæç¹å» @Profiler Optimize library to produce a single compiled write delegate (reduce multicast invokes)ï¼ççä¼å¾å°ä»ä¹ç»æã Profiler Agent ä¼å¯¹ ObjectRecordWriter è¿è¡ç¼è¾ï¼æå¯ä»¥å¨èå¤©çªå£ä¸­ç¹å»å®æ¥æ¥çæåæ´æ¹çå·®å¼ã</span></p>
<p><span>ããæ¥çå½åçå®ç°ï¼ä»£ç æå»ºäºä¸ä¸ªå§æåè¡¨ï¼æ¯ä¸ªå­æ®µå¯¹åºä¸ä¸ªå§æï¼</span></p>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">var delegates = new List&lt;Action&gt;();

foreach (var memberMap in members)
{
â¯ â¯ // ... field writing logic ...

â¯ â¯ delegates.Add(Expression.Lambda&lt;Action&gt;(writeFieldMethodCall, recordParameter).Compile());
}

var action = CombineDelegates(delegates) ?? new Action((T parameter) =&gt; { });
return action;</pre>
</div>
<p><span>ããé®é¢å¨äº CombineDelegates ä¼åå»ºä¸ä¸ªå¤æ­å§æï¼è¯¥å§æä¼ä¾æ¬¡åç¬è°ç¨æ¯ä¸ªç¬ç«çå§æãç¸åï¼Profiler Agent å»ºè®®æä»¬å¨ç¼è¯åä½¿ç¨ Expression.Block æ¥ç»åææè¡¨è¾¾å¼ï¼</span></p>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:true;">var expressions = new List&lt;Expression&gt;(members.Count);

foreach (var memberMap in members)
{
â¯ â¯ // ... field writing logic ...

â¯ â¯ expressions.Add(writeFieldMethodCall);
}

if (expressions.Count == 0)
{
â¯ â¯ return new Action&lt;T&gt;((T parameter) =&gt; { });
}

// Combine all field writes into a single block
var block = Expression.Block(expressions);
return Expression.Lambda&lt;Action&lt;T&gt;&gt;(block, recordParameter).Compile();</pre>
</div>
<p><span>ããè¿ä¸æ¹å¨è½å°å´å¾ç²¾å¦ï¼æä»¬æ²¡æåå»ºå¤ä¸ªå§æå¹¶æé¡ºåºè°ç¨å®ä»¬ï¼èæ¯åå»ºäºä¸ä¸ªåå«ææå­æ®µåå¥æä½çåä¸ªåè¡¨è¾¾å¼ï¼ç¶åå¯¹å¶è¿è¡ä¸æ¬¡ç¼è¯ãç°å¨ï¼å½æä»¬ä¸ºæ¯æ¡è®°å½è°ç¨å§ææ¶ï¼ææå­æ®µé½ä¼å¨ä¸æ¬¡è°ç¨ä¸­å®æåå¥ï¼ä¸å­å¨é¢å¤çå§æå¼éã</span></p>
<h1><span><span>è¡¡éå½±å</span></span></h1>
<p><span>ããååºè¿ä¸æ´æ¹åï¼Copilot ä¼èªå¨éæ°è¿è¡åºåæµè¯ä»¥è¡¡éæ¹è¿ææãç»ææ¾ç¤ºï¼å¨æ­¤æ¬¡ä½¿ç¨åæå¨çè¿è¡ä¸­ï¼æ§è½å¤§çº¦æåäº 24%ãæä»¬ä¹åä¸º CsvHelper åå¤çåé¶æ®µæåè¯·æ±æ¾ç¤ºæ§è½æåäºçº¦ 15%ãCPU åæå¨è¯å®ï¼æä»¬å·²ç»æ¶é¤äºå§æè°ç¨çå¼éï¼å¯¹äºæ¯æ¡æ 4 ä¸ªå­æ®µç 10,000 æ¡è®°å½ï¼ä¹åéè¦è¿è¡ 40,000 æ¬¡å§æè°ç¨ï¼èç°å¨åªéè¦ 10,000 æ¬¡å§æè°ç¨ã</span></p>
<p><span><img src="https://img2024.cnblogs.com/blog/270073/202601/270073-20260103183513372-1911198811.webp" alt="9" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></span></p>
<p><span>ããå¯¹äºä¸ä¸ªå·²ç»ç»è¿å¤§éä¼åçåºæ¥è¯´ï¼è¿æ¯ä¸åºæä¹éå¤§çèå©ãå¯¹äºé£äºç¼ååå«è®¸å¤å­æ®µçå¤§å CSV æä»¶çåºç¨ç¨åºèè¨ï¼è¿ä¸æ¹è¿ç´æ¥æå³ç CPU æ¶é´çåå°åå¤çéåº¦çæåãèä¸ï¼ç±äº CsvHelper çä¸è½½éé«è¾¾æ°ç¾ä¸æ¬¡ï¼è¿é¡¹ä¼åæ åäºå¤§éç¨æ·ãå¨æ­¤åºç¡ä¸ï¼æç»§ç»­æ¨è¿å¹¶æäº¤äºæåè¯·æ±ï¼ä¸è¿ Copilot è´´å¿å°æä¾äºæ´å¤å³äºç±»åè½¬æ¢å ShouldQuote é»è¾çåç»­æç¤ºï¼ä»¥ä¾¿æè½è¿ä¸æ­¥æåæ§è½ã</span></p>
<h1><span><span>Copilot Profiler Agent çä»·å¼</span></span></h1>
<p><span>ããè¿ä¸ªå·¥ä½æµç¨ä¹æä»¥å¼ºå¤§ï¼æ¯å ä¸ºå®å° Visual Studio Profiler æä¾çç²¾ç¡®æ§è½æ°æ®ä¸ Copilot çåæåä»£ç çæè½åç¸ç»åãæ¨æ éæå¨æ·±å¥ç ç©¶ CPU è·è¸ªå¹¶è¯å¾çè§£ç­ç¹è·¯å¾çå«ä¹ï¼èæ¯å¯ä»¥æåºèªç¶è¯­è¨é®é¢ï¼è·åå¯æ§è¡çè§è§£ï¼å¹¶å¿«éæµè¯æ³æ³ã</span></p>
<p><span>ããè¯¥ Agent ä¸ä»ä¼åè¯æ¨åªäºé¨åè¿è¡ç¼æ¢ï¼è¿ä¼å¸®å©æ¨çè§£å¶ç¼æ¢çåå ï¼å¹¶æåºå·ä½çä¿®å¤æ¹æ³ãå¨è¿ç§æåµä¸ï¼å®è¯å«åºå§æè°ç¨çå¼éæ¯ç¶é¢ï¼å¹¶å»ºè®®éç¨ Expression.Block ä¼åï¼è¿æ­£æ¯è§£å³è¯¥é®é¢çæ­£ç¡®æ¹æ¡ãå®çè³è¿éæ°è¿è¡äºåºåæµè¯æ¥ç¡®è®¤è¯¥ä¼åçææï¼</span></p>
<h1><span><span>è®©æä»¬ç¥éæ¨çæ³æ³</span></span></h1>
<p><span>ããæä»¬å·²ç»å±ç¤ºäº Copilot Profiler Agent å¦ä½å¸®å©æ¨å¤çå®éé¡¹ç®ï¼éè¿èªç¶è¯­è¨æ¥è¯¢è¯å«æ§è½ç¶é¢ï¼å¹¶å¨æ°æ®æ¯æä¸ååºææä¹çæ¹è¿ãå½æ¨è½å¤å°±æ§è½æ°æ®æåºé®é¢å¹¶è·å¾æºè½ç­æ¡æ¶ï¼æµé/æ´æ¹/æµéçå¾ªç¯ä¼åå¾å¿«å¾å¤ãæä»¬å¾æ³å¬å¬æ¨çæ³æ³ï¼</span></p>
<p><span>&nbsp;</span></p>
<p><span>åæé¾æ¥ï¼https://devblogs.microsoft.com/visualstudio/delegate-the-analysis-not-the-performance/</span></p>
<p><span><img src="https://img2024.cnblogs.com/blog/270073/202508/270073-20250825145337681-1658462272.png" alt="me" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></span></p>
<p>&nbsp;</p>
</div>
<div id="MySignature" role="contentinfo">
    <blockquote>
<p><strong>ä½èï¼</strong><a href="http://www.cnblogs.com/MeteorSeed">MeteorSeed</a></p>
<p><strong>æå¸ææ¨åæ¬¢è¿ç¯åæï¼å¹¶ä¸å¦æ¢å¾å°æè°¢æ¨éè¯»å¹¶ä¸æåååäºåäº«æçåæã</strong></p>
<p><strong>è½¬è½½è¯·æ³¨æåºå¤ã</strong></p>
</blockquote>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-04 14:17">2026-01-04 14:17</span>&nbsp;
<a href="https://www.cnblogs.com/MeteorSeed">MeteorSeed</a>&nbsp;
éè¯»(<span id="post_view_count">5</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19434707);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19434707', targetLink: 'https://www.cnblogs.com/MeteorSeed/p/19434707', title: 'ãè¯ãCopilot Profiler Agent ââ åæä»»å¡äº¤ç± AIï¼åºç¨æ§è½ä¸åå½±å' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ãæåæåãMavenä¾èµéè¯¯ææ¥æå ]]></title>
    <link>https://www.cnblogs.com/weipt0106/p/19437521</link>
    <guid>f3a69595e22157a2e66495e724c16738</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/weipt0106/p/19437521" title="åå¸äº 2026-01-04 14:08">
    <span role="heading" aria-level="2">ãæåæåãMavenä¾èµéè¯¯ææ¥æå</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>&nbsp;</p>
<div style="max-width: 1200px; margin: 0 auto; background: rgba(255, 255, 255, 1); padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1)">
<h1 style="color: rgba(44, 62, 80, 1); font-size: 28px; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 3px solid rgba(75, 108, 183, 1)">Mavenä¾èµéè¯¯ææ¥æå</h1>
<p style="margin-bottom: 15px; text-align: justify"><strong>AIå£°æï¼æ¬æåºäºä½èååå®AIå¤æ¬¡é®ç­äº¤äºçæã</strong></p>
<p style="margin-bottom: 15px; text-align: justify">Mavenæ¯Javaé¡¹ç®ä¸­ææµè¡çæå»ºå·¥å·ä¹ä¸ï¼ä½å¨ä½¿ç¨è¿ç¨ä¸­ç»å¸¸ä¼éå°åç§ä¾èµä¸è½½é®é¢ãæ¬ææ¡£æ´çäºå¸¸è§çMavenä¾èµéè¯¯ï¼æä¾äºè¯¦ç»çææ¥æ­¥éª¤åè§£å³æ¹æ¡ï¼å¸®å©æ¨å¿«éå®ä½åè§£å³é®é¢ã</p>
<div style="background-color: rgba(240, 247, 255, 1); border-left: 4px solid rgba(52, 152, 219, 1); padding: 15px; margin: 20px 0; border-radius: 0 5px 5px 0">
<h3 style="color: rgba(44, 62, 80, 1); font-size: 18px; margin: 0 0 10px">ð ä½¿ç¨è¯´æ</h3>
<p style="margin-bottom: 0; text-align: justify">æ¬ææ¡£æç§éè¯¯ç±»ååç±»ï¼æ¯ç§éè¯¯åå«éè¯¯ç¤ºä¾ãä¸¥éç¨åº¦ãä¸»è¦åå åè¯¦ç»ææ¥æ­¥éª¤ãæ¨å¯ä»¥æ ¹æ®éå°çéè¯¯ä¿¡æ¯å¿«éå®ä½å°ç¸åºç« èã</p>
</div>
<h2 style="color: rgba(52, 73, 94, 1); font-size: 22px; margin: 25px 0 15px; padding-left: 10px; border-left: 4px solid rgba(52, 152, 219, 1)">ä¸ãéè¯¯ç±»åæ¦è§</h2>
<table style="width: 100%; border-collapse: collapse; margin: 20px 0; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1)">
<thead>
<tr><th style="background-color: rgba(44, 62, 80, 1); color: rgba(255, 255, 255, 1); font-weight: 600; text-align: left; padding: 12px 15px; width: 20%">éè¯¯ç±»å</th><th style="background-color: rgba(44, 62, 80, 1); color: rgba(255, 255, 255, 1); font-weight: 600; text-align: left; padding: 12px 15px; width: 35%">å¸¸è§éè¯¯æç¤º</th><th style="background-color: rgba(44, 62, 80, 1); color: rgba(255, 255, 255, 1); font-weight: 600; text-align: left; padding: 12px 15px; width: 15%">ä¸¥éç¨åº¦</th><th style="background-color: rgba(44, 62, 80, 1); color: rgba(255, 255, 255, 1); font-weight: 600; text-align: left; padding: 12px 15px; width: 30%">ä¸»è¦ç¹å¾</th></tr>
</thead>
<tbody>
<tr style="border-bottom: 1px solid rgba(225, 225, 225, 1)">
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)"><span style="display: inline-block; padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: bold; margin-right: 5px; background-color: rgba(255, 234, 167, 1); color: rgba(211, 84, 0, 1)">ç½ç»é®é¢</span></td>
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)">Connect timed out, SSL handshake failure</td>
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)"><span style="font-weight: bold; color: rgba(231, 76, 60, 1)">é«</span></td>
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)">ä¸Mavenä»åºè¿æ¥å¤±è´¥ï¼æ æ³ä¸è½½ä¾èµ</td>
</tr>
<tr style="border-bottom: 1px solid rgba(225, 225, 225, 1); background-color: rgba(248, 249, 250, 1)">
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)"><span style="display: inline-block; padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: bold; margin-right: 5px; background-color: rgba(162, 155, 254, 1); color: rgba(45, 52, 54, 1)">ç¼å­é®é¢</span></td>
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)">was cached in local repository, HTTPS Required</td>
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)"><span style="font-weight: bold; color: rgba(243, 156, 18, 1)">ä¸­</span></td>
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)">æ¬å°ç¼å­äºéè¯¯æè¿æçä¾èµï¼åè®®é®é¢</td>
</tr>
<tr style="border-bottom: 1px solid rgba(225, 225, 225, 1)">
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)"><span style="display: inline-block; padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: bold; margin-right: 5px; background-color: rgba(253, 121, 168, 1); color: rgba(45, 52, 54, 1)">ä¾èµé®é¢</span></td>
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)">Could not find artifact, Could not resolve</td>
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)"><span style="font-weight: bold; color: rgba(231, 76, 60, 1)">é«</span></td>
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)">ä¾èµä¸å­å¨ãçæ¬å²çªæä¾èµé¾æ­è£</td>
</tr>
<tr style="border-bottom: 1px solid rgba(225, 225, 225, 1); background-color: rgba(248, 249, 250, 1)">
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)"><span style="display: inline-block; padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: bold; margin-right: 5px; background-color: rgba(129, 236, 236, 1); color: rgba(45, 52, 54, 1)">éç½®é®é¢</span></td>
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)">Plugin not found, packaging error</td>
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)"><span style="font-weight: bold; color: rgba(243, 156, 18, 1)">ä¸­</span></td>
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)">æä»¶éç½®éè¯¯ï¼æåéç½®é®é¢</td>
</tr>
</tbody>
</table>
<h2 style="color: rgba(52, 73, 94, 1); font-size: 22px; margin: 25px 0 15px; padding-left: 10px; border-left: 4px solid rgba(52, 152, 219, 1)">äºãç½ç»è¿æ¥é®é¢</h2>
<div style="border: 1px solid rgba(225, 225, 225, 1); border-radius: 5px; margin: 20px 0; overflow: hidden">
<div style="background-color: rgba(248, 249, 250, 1); padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1); font-weight: 600"><span style="display: inline-block; padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: bold; margin-right: 5px; background-color: rgba(255, 234, 167, 1); color: rgba(211, 84, 0, 1)">ç½ç»é®é¢</span> éè¯¯1: è¿æ¥è¶æ¶éè¯¯</div>
<div style="padding: 15px">
<h4 style="color: rgba(44, 62, 80, 1); font-size: 16px; margin: 15px 0 8px">éè¯¯æç¤ºç¤ºä¾ï¼</h4>
<div style="background-color: rgba(248, 249, 250, 1); padding: 10px; border-left: 3px solid rgba(75, 108, 183, 1); margin: 10px 0; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, monospace; font-size: 13px">Could not transfer artifact com.example:demo:jar:1.0.0 from/to central (https://repo.maven.apache.org/maven2): Connect timed out</div>
<h4 style="color: rgba(44, 62, 80, 1); font-size: 16px; margin: 15px 0 8px">ä¸¥éç¨åº¦ï¼<span style="font-weight: bold; color: rgba(231, 76, 60, 1)">é«</span></h4>
<h4 style="color: rgba(44, 62, 80, 1); font-size: 16px; margin: 15px 0 8px">é®é¢æè¿°ï¼</h4>
<p style="margin-bottom: 15px; text-align: justify">Mavenæ æ³è¿æ¥å°è¿ç¨ä»åºä¸è½½ä¾èµï¼éå¸¸æ¯ç±äºç½ç»è¿æ¥é®é¢ãä»£çéç½®éè¯¯æä»åºå°åä¸å¯ç¨å¯¼è´ã</p>
<h4 style="color: rgba(44, 62, 80, 1); font-size: 16px; margin: 15px 0 8px">ææ¥æ­¥éª¤ï¼</h4>
<ol style="margin: 10px 0 15px 25px">
<li style="margin-bottom: 8px"><strong>æ£æ¥ç½ç»è¿æ¥</strong>ï¼ç¡®è®¤ç½ç»è¿æ¥æ­£å¸¸ï¼å°è¯è®¿é®Mavenä¸­å¤®ä»åºç½ç« (https://repo.maven.apache.org)</li>
<li style="margin-bottom: 8px"><strong>æ£æ¥ä»£çéç½®</strong>ï¼å¦æä½¿ç¨ä»£çä¸ç½ï¼æ£æ¥Mavençsettings.xmlæä»¶ä¸­çä»£çéç½®
<div style="background-color: rgba(45, 52, 54, 1); color: rgba(223, 230, 233, 1); padding: 15px; border-radius: 5px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, &quot;Courier New&quot;, monospace; margin: 15px 0; overflow-x: auto; font-size: 14px; line-height: 1.5">&lt;proxy&gt; &lt;id&gt;optional&lt;/id&gt; &lt;active&gt;true&lt;/active&gt; &lt;protocol&gt;http&lt;/protocol&gt; &lt;host&gt;proxy.example.com&lt;/host&gt; &lt;port&gt;8080&lt;/port&gt; &lt;username&gt;user&lt;/username&gt; &lt;password&gt;pass&lt;/password&gt; &lt;/proxy&gt;</div>
</li>
<li style="margin-bottom: 8px"><strong>éç½®éåä»åº</strong>ï¼ä½¿ç¨é¿éäºç­å½åéåå éä¸è½½
<div style="background-color: rgba(45, 52, 54, 1); color: rgba(223, 230, 233, 1); padding: 15px; border-radius: 5px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, &quot;Courier New&quot;, monospace; margin: 15px 0; overflow-x: auto; font-size: 14px; line-height: 1.5">&lt;mirror&gt; &lt;id&gt;aliyunmaven&lt;/id&gt; &lt;mirrorOf&gt;*&lt;/mirrorOf&gt; &lt;name&gt;é¿éäºå¬å±ä»åº&lt;/name&gt; &lt;url&gt;https://maven.aliyun.com/repository/public&lt;/url&gt; &lt;/mirror&gt;</div>
</li>
<li style="margin-bottom: 8px"><strong>æ£æ¥é²ç«å¢è®¾ç½®</strong>ï¼ç¡®ä¿é²ç«å¢æ²¡æé»æ­¢Mavenè®¿é®ç½ç»</li>
<li style="margin-bottom: 8px"><strong>å°è¯å¼ºå¶æ´æ°</strong>ï¼ä½¿ç¨<span style="background-color: rgba(241, 241, 241, 1); color: rgba(214, 48, 49, 1); padding: 2px 6px; border-radius: 3px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, monospace; font-size: 14px">mvn -U clean compile</span>å¼ºå¶æ´æ°ä¾èµ</li>
</ol></div>
</div>
<div style="border: 1px solid rgba(225, 225, 225, 1); border-radius: 5px; margin: 20px 0; overflow: hidden">
<div style="background-color: rgba(248, 249, 250, 1); padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1); font-weight: 600"><span style="display: inline-block; padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: bold; margin-right: 5px; background-color: rgba(255, 234, 167, 1); color: rgba(211, 84, 0, 1)">ç½ç»é®é¢</span> éè¯¯2: SSL/TLSæ¡æå¤±è´¥</div>
<div style="padding: 15px">
<h4 style="color: rgba(44, 62, 80, 1); font-size: 16px; margin: 15px 0 8px">éè¯¯æç¤ºç¤ºä¾ï¼</h4>
<div style="background-color: rgba(248, 249, 250, 1); padding: 10px; border-left: 3px solid rgba(75, 108, 183, 1); margin: 10px 0; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, monospace; font-size: 13px">Received fatal alert: handshake_failure<br>javax.net.ssl.SSLHandshakeException: SSL peer shut down incorrectly</div>
<h4 style="color: rgba(44, 62, 80, 1); font-size: 16px; margin: 15px 0 8px">ä¸¥éç¨åº¦ï¼<span style="font-weight: bold; color: rgba(231, 76, 60, 1)">é«</span></h4>
<h4 style="color: rgba(44, 62, 80, 1); font-size: 16px; margin: 15px 0 8px">é®é¢æè¿°ï¼</h4>
<p style="margin-bottom: 15px; text-align: justify">Mavenä¸è¿ç¨ä»åºçSSL/TLSæ¡æå¤±è´¥ï¼éå¸¸æ¯å ä¸ºJDKçæ¬è¿æ§ãç³»ç»æ¶é´ä¸æ­£ç¡®æè¯ä¹¦é®é¢ã</p>
<h4 style="color: rgba(44, 62, 80, 1); font-size: 16px; margin: 15px 0 8px">ææ¥æ­¥éª¤ï¼</h4>
<ol style="margin: 10px 0 15px 25px">
<li style="margin-bottom: 8px"><strong>åçº§JDKçæ¬</strong>ï¼ç¡®ä¿ä½¿ç¨JDK 8u101+æJDK 11+çæ¬ï¼æ§çæ¬å¯è½ä¸æ¯ææ°çTLSåè®®</li>
<li style="margin-bottom: 8px"><strong>æ£æ¥ç³»ç»æ¶é´</strong>ï¼ç¡®ä¿ç³»ç»æ¶é´æ­£ç¡®ï¼éè¯¯çç³»ç»æ¶é´ä¼å¯¼è´SSLè¯ä¹¦éªè¯å¤±è´¥</li>
<li style="margin-bottom: 8px"><strong>å¯¼å¥èªç­¾åè¯ä¹¦</strong>ï¼å¦ææ¯å¬å¸åç½èªç­¾åè¯ä¹¦ï¼éè¦å¯¼å¥å°JDKä¿¡ä»»åº
<div style="background-color: rgba(45, 52, 54, 1); color: rgba(223, 230, 233, 1); padding: 15px; border-radius: 5px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, &quot;Courier New&quot;, monospace; margin: 15px 0; overflow-x: auto; font-size: 14px; line-height: 1.5"># å¯¼åºè¯ä¹¦ keytool -export -alias example -keystore example.keystore -rfc -file example.cer # å¯¼å¥å°JDKä¿¡ä»»åº keytool -import -alias example -file example.cer -keystore $JAVA_HOME/jre/lib/security/cacerts</div>


</li>
<li style="margin-bottom: 8px"><strong>è·³è¿SSLéªè¯</strong>ï¼ä¸æ¨èç¨äºçäº§ï¼ï¼
<div style="background-color: rgba(45, 52, 54, 1); color: rgba(223, 230, 233, 1); padding: 15px; border-radius: 5px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, &quot;Courier New&quot;, monospace; margin: 15px 0; overflow-x: auto; font-size: 14px; line-height: 1.5">mvn -Dmaven.wagon.http.ssl.insecure=true \ -Dmaven.wagon.http.ssl.allowall=true clean install</div>


</li>
<li style="margin-bottom: 8px"><strong>æ´æ°Mavençæ¬</strong>ï¼ä½¿ç¨ææ°çæ¬çMavenï¼3.6.3+ï¼</li>


</ol>
</div>


</div>
<h2 style="color: rgba(52, 73, 94, 1); font-size: 22px; margin: 25px 0 15px; padding-left: 10px; border-left: 4px solid rgba(52, 152, 219, 1)">ä¸ãç¼å­ç¸å³é®é¢</h2>
<div style="border: 1px solid rgba(225, 225, 225, 1); border-radius: 5px; margin: 20px 0; overflow: hidden">
<div style="background-color: rgba(248, 249, 250, 1); padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1); font-weight: 600"><span style="display: inline-block; padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: bold; margin-right: 5px; background-color: rgba(162, 155, 254, 1); color: rgba(45, 52, 54, 1)">ç¼å­é®é¢</span> éè¯¯3: æ¬å°ç¼å­è¿æ</div>
<div style="padding: 15px">
<h4 style="color: rgba(44, 62, 80, 1); font-size: 16px; margin: 15px 0 8px">éè¯¯æç¤ºç¤ºä¾ï¼</h4>
<div style="background-color: rgba(248, 249, 250, 1); padding: 10px; border-left: 3px solid rgba(75, 108, 183, 1); margin: 10px 0; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, monospace; font-size: 13px">... was cached in the local repository, resolution will not be reattempted until the update interval has elapsed or updates are forced</div>
<h4 style="color: rgba(44, 62, 80, 1); font-size: 16px; margin: 15px 0 8px">ä¸¥éç¨åº¦ï¼<span style="font-weight: bold; color: rgba(243, 156, 18, 1)">ä¸­</span></h4>
<h4 style="color: rgba(44, 62, 80, 1); font-size: 16px; margin: 15px 0 8px">é®é¢æè¿°ï¼</h4>
<p style="margin-bottom: 15px; text-align: justify">Mavenæ¬å°ä»åºç¼å­äºéè¯¯æè¿æçä¾èµï¼é»è®¤æ´æ°ç­ç¥å¯¼è´ä¸ä¼ç«å³éæ°ä¸è½½ã</p>
<h4 style="color: rgba(44, 62, 80, 1); font-size: 16px; margin: 15px 0 8px">ææ¥æ­¥éª¤ï¼</h4>
<ol style="margin: 10px 0 15px 25px">
<li style="margin-bottom: 8px"><strong>å¼ºå¶æ´æ°ä¾èµ</strong>ï¼ä½¿ç¨<span style="background-color: rgba(241, 241, 241, 1); color: rgba(214, 48, 49, 1); padding: 2px 6px; border-radius: 3px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, monospace; font-size: 14px">-U</span>åæ°å¼ºå¶æ´æ°
<div style="background-color: rgba(45, 52, 54, 1); color: rgba(223, 230, 233, 1); padding: 15px; border-radius: 5px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, &quot;Courier New&quot;, monospace; margin: 15px 0; overflow-x: auto; font-size: 14px; line-height: 1.5">mvn clean install -U</div>


</li>
<li style="margin-bottom: 8px"><strong>æ¸çæ¬å°ä»åº</strong>ï¼å é¤æ¬å°ä»åºä¸­å¯¹åºçä¾èµç®å½
<div style="background-color: rgba(45, 52, 54, 1); color: rgba(223, 230, 233, 1); padding: 15px; border-radius: 5px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, &quot;Courier New&quot;, monospace; margin: 15px 0; overflow-x: auto; font-size: 14px; line-height: 1.5"># å é¤ç¹å®ä¾èµ rm -rf ~/.m2/repository/com/example/demo/ # æä½¿ç¨Mavenå½ä»¤ mvn dependency:purge-local-repository -DmanualInclude="com.example:demo"</div>


</li>
<li style="margin-bottom: 8px"><strong>ä¿®æ¹æ´æ°ç­ç¥</strong>ï¼å¨settings.xmlä¸­éç½®æ´æ°ç­ç¥ä¸ºalways
<div style="background-color: rgba(45, 52, 54, 1); color: rgba(223, 230, 233, 1); padding: 15px; border-radius: 5px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, &quot;Courier New&quot;, monospace; margin: 15px 0; overflow-x: auto; font-size: 14px; line-height: 1.5">&lt;repository&gt; &lt;id&gt;central&lt;/id&gt; &lt;url&gt;https://repo.maven.apache.org/maven2&lt;/url&gt; &lt;releases&gt; &lt;updatePolicy&gt;always&lt;/updatePolicy&gt; &lt;/releases&gt; &lt;snapshots&gt; &lt;updatePolicy&gt;always&lt;/updatePolicy&gt; &lt;/snapshots&gt; &lt;/repository&gt;</div>


</li>
<li style="margin-bottom: 8px"><strong>æ¸çIDEç¼å­</strong>ï¼å¨IDEä¸­æ§è¡"Maven Reimport"æ"Reload Project"</li>
<li style="margin-bottom: 8px"><strong>å é¤.lastUpdatedæä»¶</strong>ï¼æ¸çæ¬å°ä»åºä¸­æåçåæ°æ®æä»¶
<div style="background-color: rgba(45, 52, 54, 1); color: rgba(223, 230, 233, 1); padding: 15px; border-radius: 5px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, &quot;Courier New&quot;, monospace; margin: 15px 0; overflow-x: auto; font-size: 14px; line-height: 1.5"># Linux/Mac find ~/.m2/repository -name "*.lastUpdated" -delete # Windows (PowerShell) Get-ChildItem -Path ~/.m2/repository -Filter *.lastUpdated -Recurse | Remove-Item</div>


</li>


</ol>
</div>


</div>
<div style="border: 1px solid rgba(225, 225, 225, 1); border-radius: 5px; margin: 20px 0; overflow: hidden">
<div style="background-color: rgba(248, 249, 250, 1); padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1); font-weight: 600"><span style="display: inline-block; padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: bold; margin-right: 5px; background-color: rgba(162, 155, 254, 1); color: rgba(45, 52, 54, 1)">ç¼å­é®é¢</span> éè¯¯4: HTTPSåè®®è¦æ±</div>
<div style="padding: 15px">
<h4 style="color: rgba(44, 62, 80, 1); font-size: 16px; margin: 15px 0 8px">éè¯¯æç¤ºç¤ºä¾ï¼</h4>
<div style="background-color: rgba(248, 249, 250, 1); padding: 10px; border-left: 3px solid rgba(75, 108, 183, 1); margin: 10px 0; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, monospace; font-size: 13px">Return code is: 501 , ReasonPhrase:HTTPS Required.<br>Using insecure protocol with repository ...</div>
<h4 style="color: rgba(44, 62, 80, 1); font-size: 16px; margin: 15px 0 8px">ä¸¥éç¨åº¦ï¼<span style="font-weight: bold; color: rgba(243, 156, 18, 1)">ä¸­</span></h4>
<h4 style="color: rgba(44, 62, 80, 1); font-size: 16px; margin: 15px 0 8px">é®é¢æè¿°ï¼</h4>
<p style="margin-bottom: 15px; text-align: justify">Mavenä¸­å¤®ä»åºå·²å¼ºå¶ä½¿ç¨HTTPSåè®®ï¼ä½éç½®ä¸­ä»ä½¿ç¨HTTPåè®®è®¿é®ã</p>
<h4 style="color: rgba(44, 62, 80, 1); font-size: 16px; margin: 15px 0 8px">ææ¥æ­¥éª¤ï¼</h4>
<ol style="margin: 10px 0 15px 25px">
<li style="margin-bottom: 8px"><strong>æ´æ°ä»åºURL</strong>ï¼ç¡®ä¿æærepositoryéç½®ä½¿ç¨httpsåè®®
<div style="background-color: rgba(45, 52, 54, 1); color: rgba(223, 230, 233, 1); padding: 15px; border-radius: 5px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, &quot;Courier New&quot;, monospace; margin: 15px 0; overflow-x: auto; font-size: 14px; line-height: 1.5">&lt;repository&gt; &lt;id&gt;central&lt;/id&gt; &lt;url&gt;https://repo.maven.apache.org/maven2&lt;/url&gt; &lt;/repository&gt;</div>


</li>
<li style="margin-bottom: 8px"><strong>æ´æ°Mavençæ¬</strong>ï¼åçº§å°Maven 3.2.3+ï¼æ§çæ¬å¯è½ä¸æ¯æèªå¨éå®å</li>
<li style="margin-bottom: 8px"><strong>æ£æ¥éåéç½®</strong>ï¼ç¡®ä¿éåå°åä¹ä½¿ç¨HTTPS
<div style="background-color: rgba(45, 52, 54, 1); color: rgba(223, 230, 233, 1); padding: 15px; border-radius: 5px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, &quot;Courier New&quot;, monospace; margin: 15px 0; overflow-x: auto; font-size: 14px; line-height: 1.5">&lt;mirror&gt; &lt;id&gt;aliyun&lt;/id&gt; &lt;mirrorOf&gt;*&lt;/mirrorOf&gt; &lt;name&gt;Aliyun Maven Mirror&lt;/name&gt; &lt;url&gt;https://maven.aliyun.com/repository/public&lt;/url&gt; &lt;/mirror&gt;</div>


</li>
<li style="margin-bottom: 8px"><strong>æ¸çç¼å­æä»¶</strong>ï¼å é¤ç¸å³ç¼å­æä»¶
<div style="background-color: rgba(45, 52, 54, 1); color: rgba(223, 230, 233, 1); padding: 15px; border-radius: 5px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, &quot;Courier New&quot;, monospace; margin: 15px 0; overflow-x: auto; font-size: 14px; line-height: 1.5"># æ¸çä»åºåæ°æ®æä»¶ find ~/.m2/repository -name "_remote.repositories" -delete find ~/.m2/repository -name "*.lastUpdated" -delete</div>


</li>


</ol>
</div>


</div>
<h2 style="color: rgba(52, 73, 94, 1); font-size: 22px; margin: 25px 0 15px; padding-left: 10px; border-left: 4px solid rgba(52, 152, 219, 1)">åãä¾èµè§£æé®é¢</h2>
<div style="border: 1px solid rgba(225, 225, 225, 1); border-radius: 5px; margin: 20px 0; overflow: hidden">
<div style="background-color: rgba(248, 249, 250, 1); padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1); font-weight: 600"><span style="display: inline-block; padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: bold; margin-right: 5px; background-color: rgba(253, 121, 168, 1); color: rgba(45, 52, 54, 1)">ä¾èµé®é¢</span> éè¯¯5: ä¾èµä¸å­å¨</div>
<div style="padding: 15px">
<h4 style="color: rgba(44, 62, 80, 1); font-size: 16px; margin: 15px 0 8px">éè¯¯æç¤ºç¤ºä¾ï¼</h4>
<div style="background-color: rgba(248, 249, 250, 1); padding: 10px; border-left: 3px solid rgba(75, 108, 183, 1); margin: 10px 0; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, monospace; font-size: 13px">Could not find artifact com.example:demo:jar:1.0.0 in central (https://repo.maven.apache.org/maven2)</div>
<h4 style="color: rgba(44, 62, 80, 1); font-size: 16px; margin: 15px 0 8px">ä¸¥éç¨åº¦ï¼<span style="font-weight: bold; color: rgba(231, 76, 60, 1)">é«</span></h4>
<h4 style="color: rgba(44, 62, 80, 1); font-size: 16px; margin: 15px 0 8px">é®é¢æè¿°ï¼</h4>
<p style="margin-bottom: 15px; text-align: justify">æå®çä¾èµå¨ä»åºä¸­ä¸å­å¨ï¼å¯è½æ¯groupIdãartifactIdãversionæ¼åéè¯¯ï¼æä¾èµç¡®å®ä¸å­å¨äºéç½®çä»åºä¸­ã</p>
<h4 style="color: rgba(44, 62, 80, 1); font-size: 16px; margin: 15px 0 8px">ææ¥æ­¥éª¤ï¼</h4>
<ol style="margin: 10px 0 15px 25px">
<li style="margin-bottom: 8px"><strong>æ£æ¥ä¾èµåæ </strong>ï¼ç¡®è®¤groupIdãartifactIdãversionæ¼åæ­£ç¡®</li>
<li style="margin-bottom: 8px"><strong>æç´¢ä¾èµ</strong>ï¼å¨Mavenä¸­å¤®ä»åº(https://search.maven.org)æå¬å¸ç§æä»åºä¸­æç´¢ç¡®è®¤ä¾èµæ¯å¦å­å¨</li>
<li style="margin-bottom: 8px"><strong>æ£æ¥ä½ç¨å</strong>ï¼ç¡®è®¤ä¾èµçä½ç¨å(scope)æ¯å¦æ­£ç¡®ï¼æ¯å¦testãprovidedç­</li>
<li style="margin-bottom: 8px"><strong>æ£æ¥ä»åºéç½®</strong>ï¼å¦æä¾èµå¨å¬å¸ç§æä»åºï¼ç¡®ä¿settings.xmlä¸­æ­£ç¡®éç½®äºä»åº
<div style="background-color: rgba(45, 52, 54, 1); color: rgba(223, 230, 233, 1); padding: 15px; border-radius: 5px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, &quot;Courier New&quot;, monospace; margin: 15px 0; overflow-x: auto; font-size: 14px; line-height: 1.5">&lt;server&gt; &lt;id&gt;my-repo&lt;/id&gt; &lt;username&gt;user&lt;/username&gt; &lt;password&gt;pass&lt;/password&gt; &lt;/server&gt;</div>


</li>
<li style="margin-bottom: 8px"><strong>æ£æ¥æé¤éç½®</strong>ï¼æ¥çæ¯å¦æ<span style="background-color: rgba(241, 241, 241, 1); color: rgba(214, 48, 49, 1); padding: 2px 6px; border-radius: 3px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, monospace; font-size: 14px">&lt;exclusions&gt;</span>æé¤äºè¯¥ä¾èµ</li>
<li style="margin-bottom: 8px"><strong>æ¸çå¹¶éè¯</strong>ï¼æ¸çæ¬å°ä»åºä¸­è¯¥ä¾èµçæä»¶å¤¹ï¼éæ°ä¸è½½</li>


</ol>
<div style="background-color: rgba(255, 248, 225, 1); border-left: 4px solid rgba(255, 193, 7, 1); padding: 15px; margin: 20px 0; border-radius: 0 5px 5px 0"><strong>æ³¨æï¼</strong> æäºä¾èµå¯è½æç¹æ®çclassifierï¼å¦testsãsourcesï¼ï¼éè¦ç¡®è®¤æ¯å¦éè¦æå®ã</div>


</div>


</div>
<div style="border: 1px solid rgba(225, 225, 225, 1); border-radius: 5px; margin: 20px 0; overflow: hidden">
<div style="background-color: rgba(248, 249, 250, 1); padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1); font-weight: 600"><span style="display: inline-block; padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: bold; margin-right: 5px; background-color: rgba(253, 121, 168, 1); color: rgba(45, 52, 54, 1)">ä¾èµé®é¢</span> éè¯¯6: ä¾èµè§£æå¤±è´¥</div>
<div style="padding: 15px">
<h4 style="color: rgba(44, 62, 80, 1); font-size: 16px; margin: 15px 0 8px">éè¯¯æç¤ºç¤ºä¾ï¼</h4>
<div style="background-color: rgba(248, 249, 250, 1); padding: 10px; border-left: 3px solid rgba(75, 108, 183, 1); margin: 10px 0; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, monospace; font-size: 13px">Could not resolve dependencies for project com.example:my-project:jar:1.0: Failure to find com.example:lib:jar:2.0 in ...</div>
<h4 style="color: rgba(44, 62, 80, 1); font-size: 16px; margin: 15px 0 8px">ä¸¥éç¨åº¦ï¼<span style="font-weight: bold; color: rgba(231, 76, 60, 1)">é«</span></h4>
<h4 style="color: rgba(44, 62, 80, 1); font-size: 16px; margin: 15px 0 8px">é®é¢æè¿°ï¼</h4>
<p style="margin-bottom: 15px; text-align: justify">Mavenæ æ³è§£æé¡¹ç®çä¾èµå³ç³»ï¼å¯è½æ¯çæ¬å²çªãä¾èµé¾æ­è£æä»åºéç½®é®é¢ã</p>
<h4 style="color: rgba(44, 62, 80, 1); font-size: 16px; margin: 15px 0 8px">ææ¥æ­¥éª¤ï¼</h4>
<ol style="margin: 10px 0 15px 25px">
<li style="margin-bottom: 8px"><strong>åæä¾èµæ </strong>ï¼ä½¿ç¨<span style="background-color: rgba(241, 241, 241, 1); color: rgba(214, 48, 49, 1); padding: 2px 6px; border-radius: 3px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, monospace; font-size: 14px">mvn dependency:tree</span>æ¥çä¾èµå³ç³»
<div style="background-color: rgba(45, 52, 54, 1); color: rgba(223, 230, 233, 1); padding: 15px; border-radius: 5px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, &quot;Courier New&quot;, monospace; margin: 15px 0; overflow-x: auto; font-size: 14px; line-height: 1.5">mvn dependency:tree -Dverbose</div>


</li>
<li style="margin-bottom: 8px"><strong>æé¤å²çªä¾èµ</strong>ï¼ä½¿ç¨<span style="background-color: rgba(241, 241, 241, 1); color: rgba(214, 48, 49, 1); padding: 2px 6px; border-radius: 3px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, monospace; font-size: 14px">&lt;exclusions&gt;</span>æé¤å²çªçä¼ éä¾èµ
<div style="background-color: rgba(45, 52, 54, 1); color: rgba(223, 230, 233, 1); padding: 15px; border-radius: 5px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, &quot;Courier New&quot;, monospace; margin: 15px 0; overflow-x: auto; font-size: 14px; line-height: 1.5">&lt;dependency&gt; &lt;groupId&gt;com.example&lt;/groupId&gt; &lt;artifactId&gt;module-a&lt;/artifactId&gt; &lt;version&gt;1.0&lt;/version&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;groupId&gt;conflict-group&lt;/groupId&gt; &lt;artifactId&gt;conflict-artifact&lt;/artifactId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt; &lt;/dependency&gt;</div>


</li>
<li style="margin-bottom: 8px"><strong>æ£æ¥çæ¬å¼å®¹æ§</strong>ï¼å°è¯åçº§æéçº§ç¸å³ä¾èµçæ¬</li>
<li style="margin-bottom: 8px"><strong>ä½¿ç¨dependency:analyze</strong>ï¼åæä¾èµé®é¢
<div style="background-color: rgba(45, 52, 54, 1); color: rgba(223, 230, 233, 1); padding: 15px; border-radius: 5px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, &quot;Courier New&quot;, monospace; margin: 15px 0; overflow-x: auto; font-size: 14px; line-height: 1.5">mvn dependency:analyze</div>


</li>
<li style="margin-bottom: 8px"><strong>æ£æ¥å¾ªç¯ä¾èµ</strong>ï¼ä½¿ç¨maven-enforcer-pluginæ£æµå¾ªç¯ä¾èµ
<div style="background-color: rgba(45, 52, 54, 1); color: rgba(223, 230, 233, 1); padding: 15px; border-radius: 5px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, &quot;Courier New&quot;, monospace; margin: 15px 0; overflow-x: auto; font-size: 14px; line-height: 1.5">mvn enforcer:enforce -Drules=banCircularDependencies</div>


</li>
<li style="margin-bottom: 8px"><strong>æ£æ¥dependencyManagement</strong>ï¼æ¥çç¶pomæ¯å¦è¦çäºä¾èµçæ¬</li>


</ol>
</div>


</div>
<h2 style="color: rgba(52, 73, 94, 1); font-size: 22px; margin: 25px 0 15px; padding-left: 10px; border-left: 4px solid rgba(52, 152, 219, 1)">äºãéç¨ææ¥å»ºè®®</h2>
<div style="background-color: rgba(240, 247, 255, 1); border-left: 4px solid rgba(52, 152, 219, 1); padding: 15px; margin: 20px 0; border-radius: 0 5px 5px 0">
<h3 style="color: rgba(44, 62, 80, 1); font-size: 18px; margin: 0 0 10px">æ åææ¥æµç¨ï¼</h3>
<ol style="margin: 10px 0 15px 25px">
<li style="margin-bottom: 8px"><strong>æ¸çå¹¶å¼ºå¶æ´æ°</strong>ï¼é¦åå°è¯<span style="background-color: rgba(241, 241, 241, 1); color: rgba(214, 48, 49, 1); padding: 2px 6px; border-radius: 3px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, monospace; font-size: 14px">mvn clean install -U</span>ï¼è¿è½è§£å³å¤§é¨åç¼å­é®é¢</li>
<li style="margin-bottom: 8px"><strong>æ£æ¥ç½ç»è¿æ¥</strong>ï¼ç¡®è®¤å¯ä»¥è®¿é®Mavenä»åºï¼ä½¿ç¨æµè§å¨æµè¯</li>
<li style="margin-bottom: 8px"><strong>æ¥çè¯¦ç»æ¥å¿</strong>ï¼ä½¿ç¨<span style="background-color: rgba(241, 241, 241, 1); color: rgba(214, 48, 49, 1); padding: 2px 6px; border-radius: 3px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, monospace; font-size: 14px">mvn -X</span>æ<span style="background-color: rgba(241, 241, 241, 1); color: rgba(214, 48, 49, 1); padding: 2px 6px; border-radius: 3px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, monospace; font-size: 14px">mvn -e</span>è·åè¯¦ç»éè¯¯ä¿¡æ¯</li>
<li style="margin-bottom: 8px"><strong>éªè¯ä¾èµåæ </strong>ï¼å¨Mavenä¸­å¤®ä»åºç¡®è®¤ä¾èµæ¯å¦å­å¨</li>
<li style="margin-bottom: 8px"><strong>æ£æ¥éç½®æä»¶</strong>ï¼éªè¯settings.xmlåpom.xmléç½®ï¼ç¹å«æ¯éååä»åºéç½®</li>
<li style="margin-bottom: 8px"><strong>åæä¾èµå³ç³»</strong>ï¼ä½¿ç¨<span style="background-color: rgba(241, 241, 241, 1); color: rgba(214, 48, 49, 1); padding: 2px 6px; border-radius: 3px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, monospace; font-size: 14px">mvn dependency:tree</span>åæä¾èµæ </li>
<li style="margin-bottom: 8px"><strong>æ£æ¥IDEéç½®</strong>ï¼å¨IDEä¸­æ§è¡Maven Reimport/Reload Project</li>
<li style="margin-bottom: 8px"><strong>æ´æ°å·¥å·çæ¬</strong>ï¼ç¡®ä¿ä½¿ç¨ææ°ç¨³å®ççMavenåJDK</li>


</ol>
</div>
<h2 style="color: rgba(52, 73, 94, 1); font-size: 22px; margin: 25px 0 15px; padding-left: 10px; border-left: 4px solid rgba(52, 152, 219, 1)">å­ãå¸¸ç¨Mavenå½ä»¤</h2>
<table style="width: 100%; border-collapse: collapse; margin: 20px 0; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1)">
<thead>
<tr><th style="background-color: rgba(44, 62, 80, 1); color: rgba(255, 255, 255, 1); font-weight: 600; text-align: left; padding: 12px 15px; width: 30%">å½ä»¤</th><th style="background-color: rgba(44, 62, 80, 1); color: rgba(255, 255, 255, 1); font-weight: 600; text-align: left; padding: 12px 15px; width: 20%">åæ°</th><th style="background-color: rgba(44, 62, 80, 1); color: rgba(255, 255, 255, 1); font-weight: 600; text-align: left; padding: 12px 15px; width: 50%">ç¨é</th>
</tr>


</thead>
<tbody>
<tr style="border-bottom: 1px solid rgba(225, 225, 225, 1)">
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)"><span style="background-color: rgba(241, 241, 241, 1); color: rgba(214, 48, 49, 1); padding: 2px 6px; border-radius: 3px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, monospace; font-size: 14px">mvn clean install -U</span></td>
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)">-U (å¼ºå¶æ´æ°)</td>
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)">æ¸çå¹¶å¼ºå¶æ´æ°ææä¾èµï¼è§£å³ç¼å­é®é¢</td>


</tr>
<tr style="border-bottom: 1px solid rgba(225, 225, 225, 1); background-color: rgba(248, 249, 250, 1)">
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)"><span style="background-color: rgba(241, 241, 241, 1); color: rgba(214, 48, 49, 1); padding: 2px 6px; border-radius: 3px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, monospace; font-size: 14px">mvn dependency:tree</span></td>
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)">-Dverbose (è¯¦ç»æ¨¡å¼)</td>
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)">æ¾ç¤ºä¾èµæ ï¼åæä¾èµå²çª</td>


</tr>
<tr style="border-bottom: 1px solid rgba(225, 225, 225, 1)">
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)"><span style="background-color: rgba(241, 241, 241, 1); color: rgba(214, 48, 49, 1); padding: 2px 6px; border-radius: 3px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, monospace; font-size: 14px">mvn dependency:analyze</span></td>
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)">-DignoreNonCompile</td>
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)">åæä¾èµä½¿ç¨æåµï¼åç°æªä½¿ç¨çä¾èµ</td>


</tr>
<tr style="border-bottom: 1px solid rgba(225, 225, 225, 1); background-color: rgba(248, 249, 250, 1)">
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)"><span style="background-color: rgba(241, 241, 241, 1); color: rgba(214, 48, 49, 1); padding: 2px 6px; border-radius: 3px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, monospace; font-size: 14px">mvn dependency:purge-local-repository</span></td>
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)">-DmanualInclude="groupId:artifactId"</td>
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)">æ¸çæ¬å°ä»åºä¸­çç¹å®ä¾èµ</td>


</tr>
<tr style="border-bottom: 1px solid rgba(225, 225, 225, 1)">
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)"><span style="background-color: rgba(241, 241, 241, 1); color: rgba(214, 48, 49, 1); padding: 2px 6px; border-radius: 3px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, monospace; font-size: 14px">mvn help:effective-pom</span></td>
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)">-Doutput=effective-pom.xml</td>
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)">æ¥ççæçPOMéç½®ï¼åå¹¶äºææç¶POMï¼</td>


</tr>
<tr style="border-bottom: 1px solid rgba(225, 225, 225, 1); background-color: rgba(248, 249, 250, 1)">
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)"><span style="background-color: rgba(241, 241, 241, 1); color: rgba(214, 48, 49, 1); padding: 2px 6px; border-radius: 3px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, monospace; font-size: 14px">mvn -X clean compile</span></td>
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)">-X (è¯¦ç»æ¥å¿)<br>-e (æ¾ç¤ºéè¯¯)</td>
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)">å¯ç¨è¯¦ç»æ¥å¿ï¼å¸®å©è¯æ­é®é¢</td>


</tr>
<tr style="border-bottom: 1px solid rgba(225, 225, 225, 1)">
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)"><span style="background-color: rgba(241, 241, 241, 1); color: rgba(214, 48, 49, 1); padding: 2px 6px; border-radius: 3px; font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, monospace; font-size: 14px">mvn versions:display-dependency-updates</span></td>
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)">&nbsp;</td>
<td style="padding: 12px 15px; border-bottom: 1px solid rgba(225, 225, 225, 1)">æ£æ¥ä¾èµæ¯å¦ææ°çæ¬</td>


</tr>


</tbody>


</table>
<div style="background-color: rgba(255, 235, 238, 1); border-left: 4px solid rgba(231, 76, 60, 1); padding: 15px; margin: 20px 0; border-radius: 0 5px 5px 0">
<h3 style="color: rgba(44, 62, 80, 1); font-size: 18px; margin: 0 0 10px">â ï¸ éè¦æé</h3>
<p style="margin-bottom: 0; text-align: justify"><strong>çäº§ç¯å¢ä¸­ä¸è¦è·³è¿SSLéªè¯</strong>ï¼åºæ­£ç¡®éç½®è¯ä¹¦ãä¸è¦å°ææå¯ç æäº¤å°çæ¬æ§å¶ç³»ç»ï¼ä½¿ç¨Mavençå¯ç å å¯åè½æä»ç¯å¢åéè¯»åã</p>


</div>
<div style="margin-top: 30px; padding-top: 15px; border-top: 1px solid rgba(225, 225, 225, 1); color: rgba(127, 140, 141, 1); font-size: 14px; text-align: center">
<p>Mavenä¾èµéè¯¯ææ¥æå | æåæ´æ°: 2026å¹´1æ</p>
<p>æ¬ææ¡£æ»ç»äºå¸¸è§çMavenä¾èµé®é¢åå¶è§£å³æ¹æ¡ï¼éç¨äºå¤§å¤æ°Javaå¼ååºæ¯ã</p>


</div>


</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.01875" data-date-updated="2026-01-04 14:35">2026-01-04 14:08</span>&nbsp;
<a href="https://www.cnblogs.com/weipt0106">å±±å²ç ´æ</a>&nbsp;
éè¯»(<span id="post_view_count">55</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19437521);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19437521', targetLink: 'https://www.cnblogs.com/weipt0106/p/19437521', title: 'ãæåæåãMavenä¾èµéè¯¯ææ¥æå' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ 10åªèé¼ è¯æ¯1000ç¶æ°´é®é¢æèç¬è®° ]]></title>
    <link>https://www.cnblogs.com/mysticbinary/p/19436756</link>
    <guid>6452a4d4f0220c8f8aac993dfa6e45df</guid>
    <description>
    <![CDATA[ 
        <div class="postTitle">
            <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/mysticbinary/p/19436756" title="åå¸äº 2026-01-04 13:22">
    <span role="heading" aria-level="2">10åªèé¼ è¯æ¯1000ç¶æ°´é®é¢æèç¬è®°</span>
    

</a>

        </div>
        <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p></p><div class="toc"><div class="toc-container-header">ç®å½</div><ul><li><a href="#é®é¢æè¿°" rel="noopener nofollow">é®é¢æè¿°</a></li><li><a href="#åçå¾" rel="noopener nofollow">åçå¾</a></li><li><a href="#ææ³" rel="noopener nofollow">ææ³</a></li><li><a href="#æ¯ç¹ä¸çåç©çä¸ççå·®å¼" rel="noopener nofollow">æ¯ç¹ä¸çåç©çä¸ççå·®å¼</a></li></ul></div><p></p>
<hr>
<h1 id="é®é¢æè¿°">é®é¢æè¿°</h1>
<p>1000ç¶æ°´éæä¸ç¶ææ¯ï¼å¯ä»¥ä½¿ç¨10åªèé¼ å»å°æ¯ï¼å½èé¼ åä¸æ¯æ°´1ä¸ªå°æ¶åæ­»å»ï¼è¯·è®¾è®¡ä¸ç§æ¹æ¡ï¼è½å¤å¨1å°æ¶æ¾å°è¿ç¶æ¯è¯ã</p>
<hr>
<h1 id="åçå¾">åçå¾</h1>
<p>å¦æä»äºè¿å¶ç¼ç ä½çè§è§æ¥è§£å³è¿ä¸ªé®é¢åå¾ç®åï¼<br>
<img src="https://img2024.cnblogs.com/blog/1552062/202601/1552062-20260104132050245-398290625.png" alt="image" loading="lazy"></p>
<ul>
<li>
<p>ç»ç¶å­åèé¼ ç¼å·ï¼å°1000ç¶æ°´ç¼å·ä¸º0å°999ãç»10åªèé¼ ä»å·¦å°å³ï¼æä»å³å°å·¦ï¼ç¼å·0å°9ã</p>
<ul>
<li>ç¨äºè¿å¶è¡¨ç¤ºï¼å°ç¶å­ç¼å·è½¬æ¢ä¸º10ä½äºè¿å¶æ°ï¼ä¾å¦ï¼ç¶å­1æ¯0000000001ï¼ç¶å­1000æ¯1111101000ï¼ã</li>
</ul>
</li>
<li>
<p>å¦æç¶å­ç¼å·çç¬¬1ä½æ¯1ï¼ä»å³å¾å·¦æ°ï¼ï¼åå°è¯¥ç¶æ°´æ··å¥ç»ç¬¬1åªèé¼ åçæ··åæ¶²ä¸­ã</p>
</li>
<li>
<p>å¦æ1ä¸ªå°æ¶ååï¼åªä¸ªä½çèé¼ æ­»å»ï¼è®°å½åªä¸ªèé¼ çä½ã<br>
å¾çåè®¾365ææ¯ï¼åèé¼ 0å·ãèé¼ 2å·ãèé¼ 3å·ãèé¼ 0å·ãèé¼ 5å·ãèé¼ 6å·ãèé¼ 8å·æ­»å»æ è®°ä¸º1ï¼å¶ä½ä½æ è®°0 ï¼è½¬10è¿å¶=365ã</p>
</li>
</ul>
<hr>
<h1 id="ææ³">ææ³</h1>
<p>è¿ä¸ªé®é¢çä¼¼æ¯ä¸ä¸ªé»è¾è°é¢ï¼ä½å®éä¸ä½ç°äºä¿¡æ¯ç¼ç çæ ¸å¿ææ³ï¼<strong>ç¨æå°çâæ£æµä½âåºåæå¤çå¯è½æ§ã</strong></p>
<p>è¿ç§æç»´å¨ç°ä»£è®¡ç®æºç§å­¦ãéä¿¡ææ¯åä¿¡æ¯è®ºä¸­æ å¤ä¸å¨ã<br>
ä»ç¡¬çççº éç¼ç å°ç½ç»ä¼ è¾çæ°æ®æ ¡éªï¼ä»æ¡å½¢ç å°äºç»´ç ï¼äºè¿å¶ç¼ç çææ³è´¯ç©¿äºæä»¬çæ°å­ä¸çã</p>
<hr>
<p>è§£å³è¿ä¸ªé®é¢çå³é®å¨äºäºè¿å¶ç¼å·ãæä»¬å° 1000 ç¶è¯æ°´ç¼å·ä¸º 0-999ã<br>
ç¨äºè¿å¶è¡¨ç¤ºè¿äºç¼å·æ¶ï¼1000 â¤ 1024 = 2Â¹â°ï¼è¿æå³çæä»¬éè¦ 10 ä½äºè¿å¶æ°å°±å¯ä»¥è¡¨ç¤ºææç¶å­ã<br>
æ¯åªèé¼ å¯¹åºäºè¿å¶ç¼ç ä¸­çä¸ä½ã10 ä½äºè¿å¶ï¼æ­£å¥½å¯¹åº 10 åªèé¼ ã<br>
<strong>è¿ç§æ¹æ³è½å¤ä¸æ¬¡æ§æµè¯ææç¶å­ï¼èä¸æ¯ä¼ ç»çéç¶æµè¯ã</strong> æçæåå¾å¤§ã</p>
<hr>
<h1 id="æ¯ç¹ä¸çåç©çä¸ççå·®å¼">æ¯ç¹ä¸çåç©çä¸ççå·®å¼</h1>
<p>äºè¿å¶ç¼ç æ¹æ¡å¨çè®ºè®¡ç®æºç§å­¦åé»è¾è°é¢ä¸­æ¯å®ç¾çï¼ä½å¨å®éæ¯çå­¦æ£æµæç°å®åºæ¯ä¸­ï¼å¾å¾éè¦ç»ååéååºæ²çº¿ãåç»æµè¯æç°ä»£åæåå­¦æ¹æ³ï¼å¦è²è°±ãè´¨è°±ï¼æ¥æ´å¯é å°è¯å«æ¯ç©ãå¨å®è·µä¸­ï¼éå¸¸ä¼éç¨åæ®µæµè¯ææµç¼©æ ·æ¬çæ¹å¼ï¼ä»¥ç¡®ä¿æ£æµççµæåº¦åå¯é æ§ã</p>

</div>
<div class="clear"></div>

        <div class="postDesc">posted on 
<span id="post-date" data-last-update-days="0.009027777777777777" data-date-updated="2026-01-04 13:35">2026-01-04 13:22</span>&nbsp;
<a href="https://www.cnblogs.com/mysticbinary">Mysticbinary</a>&nbsp;
éè¯»(<span id="post_view_count">244</span>)&nbsp;
è¯è®º(<span id="post_comment_count">2</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19436756);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19436756', targetLink: 'https://www.cnblogs.com/mysticbinary/p/19436756', title: '10åªèé¼ è¯æ¯1000ç¶æ°´é®é¢æèç¬è®°' })">ä¸¾æ¥</a>
</div>
     ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ [æµè§å¨/Cookie] 2026å¹´äºï¼Googleåæ¨ç§»é¤çæµè§å¨Cookieææ¯æ¶å¤±äºåï¼ ]]></title>
    <link>https://www.cnblogs.com/johnnyzen/p/19437233</link>
    <guid>eac515f9b48722ab309fdb12810bd0e6</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/johnnyzen/p/19437233" title="åå¸äº 2026-01-04 12:51">
    <span role="heading" aria-level="2">[æµè§å¨/Cookie] 2026å¹´äºï¼Googleåæ¨ç§»é¤çæµè§å¨Cookieææ¯æ¶å¤±äºåï¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="æµè§å¨cookieææ¯">æµè§å¨Cookieææ¯</h1>
<h2 id="åºè¨">åºè¨</h2>
<p>ä»æ¥æå¼çµèæµè§å¨è®¿é®ä¸ä¸ªæ°ç½ç«æ¶ï¼åæ¬¡å¼¹åºäºæ¯å¦éè¦æ¥åcookieç­ç¥çå¼¹çªã</p>
<p>å·²ç»å¥½å å¹´ä¸ååç«¯ä»£ç äºï¼å¨ç¬èçå°è±¡ä¸­ï¼è³å°2018å¹´åå°±ä¸ç´å¨è¯´Google Chromeè¦ç§»é¤cookieææ¯ã<br>
é£ä¹å°äº2026å¹´äºï¼ä¸ºå¥è¿ä¸ªææ¯è¿å¨å¢ï¼ç¸ä¿¡ä¸æåç«¯æä¸çæåç«¯è¿å±çå°ä¼ä¼´ä»¬ä¹ææ­¤çé®ã</p>
<h2 id="å¼é¨è§å±±åè¯´ç»è®º">å¼é¨è§å±±ï¼åè¯´ç»è®º</h2>
<p>å°äº2026å¹´ï¼å³äºGoogle Chromeæµè§å¨å»é¤ç¬¬ä¸æ¹Cookieï¼Third-Party Cookiesï¼è¿ä»¶äºï¼ç­æ¡å¶å®åå å¹´åå¤§å®¶é¢æ³ç<strong>å®å¨ä¸å</strong>ã</p>
<p>ç®åç´æ¥å°åç­ï¼<strong>å¹¶æ²¡ææ¶å¤±ï¼èä¸Googleå·²ç»å½»åºæ¾å¼äºâå¼ºåå»é¤âçè®¡åã</strong></p>
<p>å°äº2026å¹´1æçä»å¤©ï¼ç¬¬ä¸æ¹Cookieä¾ç¶å­å¨äºChromeæµè§å¨ä¸­ï¼å¹¶æ²¡æè¢«Googleå¼ºå¶ç§»é¤ãè¿èååçäºä¸ä¸ªå·¨å¤§çæç¥è½¬æã</p>
<p>ä¸ºäºæ´æ¸æ¥ç°å¨çç¶åµï¼è®©AIæ¢³çäºè¿ä¸ååçæ¥é¾å»èï¼</p>
<h2 id="æ ¸å¿ç°ç¶è®¡åå·²æ­£å¼ç»æ­¢">æ ¸å¿ç°ç¶ï¼è®¡åå·²æ­£å¼ç»æ­¢</h2>
<p>ä½ å¯è½è¿è®°å¾å å¹´åGoogleä¸ç´å¨æ¨è¡çâéç§æ²çâï¼Privacy Sandboxï¼è®¡åï¼åæ¬æ¯è¦åSafariåFirefoxé£æ ·ï¼ç´æ¥é»è®¤é»æ­¢ç¬¬ä¸æ¹Cookieã</p>
<p>ä½å¨<strong>2025å¹´4æ</strong>ï¼Googleæ­£å¼å®£å¸ç»æ­¢äºå¨Chromeä¸­éæ­¥æ·æ±°ç¬¬ä¸æ¹Cookieçè®¡åã</p>
<ul>
<li><strong>ç°å¨çæºå¶ï¼</strong> Googleå³å®ç»´æç°ç¶ï¼ä¹å°±æ¯ç»§ç»­æ²¿ç¨ç®åçç¨æ·éæ©æ¹å¼ï¼<strong>ä¸åå¼ºå¶é»è®¤é»æ­¢</strong>ç¬¬ä¸æ¹Cookieã</li>
<li><strong>ä¸åæ¨åºæ°åè½ï¼</strong> Googleä¸ä¼åæ¨åºæ°çç¬ç«æç¤ºæ¥å¤çç¬¬ä¸æ¹Cookieï¼è¿æå³çç¨æ·ä¸ä¼è¢«å¼ºå¶è¦æ±ååºéæ©ï¼é¤éä»ä»¬èªå·±ä¸»å¨å»è®¾ç½®ä¸­è°æ´ã</li>
</ul>
<h2 id="ä¸ºä»ä¹è®¡åä¼å¤­æ">ä¸ºä»ä¹è®¡åä¼âå¤­æâï¼</h2>
<p>å°äº2026å¹´åå¤´çï¼è¿ä¸ªè®¡åçç»æ­¢å¹¶éå¶ç¶ï¼ä¸»è¦åå°äºä»¥ä¸å æ¹é¢å ç´ çå¼ºåå½±åï¼</p>
<ol>
<li>
<p><strong>çç®¡ä¸ååæ­ååï¼å³é®å ç´ ï¼</strong></p>
<ul>
<li><strong>è±å½CMAï¼ç«äºä¸å¸åºç®¡çå±ï¼</strong> é¿æçç£Googleçè¿ä¸ä¸¾æªï¼æå¿å¶ä¼éè¿âéç§æ²çâä¸­çæ¿ä»£ææ¯ï¼å¦Topics APIç­ï¼è¿ä¸æ­¥å·©åºå¶å¨å¹¿åé¢åçåæ­å°ä½ã</li>
<li><strong>ç¾å½å¸æ³é¨</strong> ä¹å¨å¯¹Googleè¿è¡ååæ­å®¡å¤ãé¢å¯¹è¿äºæ³å¾é£é©ï¼Googleæç»éæ©å¦¥åï¼æ¾å¼äºåæ¬çæ¿ä»£æ¹æ¡ã</li>
</ul>
</li>
<li>
<p><strong>ææ¯æ¹æ¡çå¤±è´¥</strong></p>
<ul>
<li>Googleåæ¬å¼åäºåä½é¡¹âéç§æ²çâAPIï¼å¦TopicsãFLEDGEç­ï¼æ¥æ¿ä»£Cookieçåè½ï¼ä½å¨2025å¹´åºï¼Googleç¡®è®¤è¿äºææ¯<strong>éçº³çä½</strong>ä¸é¢ä¸´åè§é£é©ï¼å æ­¤æ­£å¼åç¨äºå®ä»¬ã</li>
<li>è¡ä¸æ®éè®¤ä¸ºè¿äºæ¿ä»£æ¹æ¡å¹¶æ²¡æè§£å³æ ¹æ¬é®é¢ï¼åèå¯è½è®©Googleææ¡æ´å¤æ°æ®ã</li>
</ul>
</li>
<li>
<p><strong>è¡ä¸çæçåå¯¹</strong></p>
<ul>
<li>å¹¿ååãåºçååå¼åèæ®éåå¯¹è¿ä¸æ¿è¿çæ¹åãæ°æ®æ¾ç¤ºï¼å¦æç´æ¥ç§»é¤ç¬¬ä¸æ¹Cookieï¼åå¸åçå¹¿åæ¶å¥ä¼å¤§å¹ä¸éï¼ææ¥åæåºå¯è½åå°20%ä»¥ä¸ï¼ãæ´ä¸ªæ°å­å¹¿åçæå¹¶æ²¡æåå¤å¥½æ¥åGoogleæä¾çâæ¿ä»£åâã</li>
</ul>
</li>
</ol>
<h2 id="ç°å¨æ ¼å±cookieè¿å¨ä½aiæ¥äº">ç°å¨æ ¼å±ï¼Cookieè¿å¨ï¼ä½AIæ¥äº</h2>
<p>å°äº2026å¹´ï¼è½ç¶ç¬¬ä¸æ¹Cookieâæ´»âäºä¸æ¥ï¼ä½æµè§å¨çéç§ç­ç¥éå¿åçäºåç§»ï¼</p>
<ul>
<li><strong>Cookieçå­ç»­ï¼</strong> Chromeå°ç»§ç»­æ¯æç¬¬ä¸æ¹Cookieï¼ä½åæ¶ä¹å¼ºè°ä¼è¿ä¸æ­¥æåç¨æ·å¨Cookieæ¹é¢ç<strong>éæ©æ</strong>ãå¦æä½ ï¼ç¨æ·ï¼æ³å±è½ï¼ä¾ç¶å¯ä»¥éè¿è®¾ç½®ææä»¶æ¥å®ç°ï¼ä½ä¸åæ¯æµè§å¨å¼ºå¶âä¸ååâã</li>
<li><strong>æç¥è½¬ç§»ï¼</strong> Googleå°éå¿ä»âä¿®è¡¥å¹¿åè¿½è¸ªâè½¬åäº<strong>AIä»£çï¼AI Agentsï¼</strong>ãç°å¨çè¶å¿æ¯å©ç¨AIæ¥çè§£ç¨æ·éæ±å¹¶ä¿æäº¤æï¼èä¸æ¯åçº¯ä¾èµCookieè¿è¡è¡ä¸ºè¿½è¸ªã</li>
<li><strong>ä¿ççææ¯ï¼</strong> è½ç¶å¤§é¨åâéç§æ²çâææ¯è¢«ç äºï¼ä½æå é¡¹è·å¾è¡ä¸è¾é«è®¤å¯çææ¯å¾ä»¥ä¿çå¹¶ä¼åï¼ä¾å¦ï¼
<ul>
<li><strong>CHIPS</strong>ï¼ç¨äºæ¹åCookieéç§åå®å¨æ§ï¼</li>
<li><strong>FedCM</strong>ï¼ç¨äºç®åèåç»å½æµç¨ï¼</li>
<li><strong>Private State Tokens</strong>ï¼ç¨äºåæ¬ºè¯ï¼</li>
</ul>
</li>
</ul>
<h2 id="è¯é¢æ»ç»">è¯é¢æ»ç»</h2>
<p>å°äº2026å¹´çä»å¤©ï¼ä½ å¯ä»¥æ¾å¿ï¼é£ä¸ªå°æ°äºäºèç½è¡ä¸å¤å¹´çâChromeå°å½»åºææ­»Cookieâçæ«æ¥æ¶éï¼<strong>å·²ç»åæ­¢äº</strong>ã</p>
<p>Googleæç»æ²¡æéæ©éè¿âéç§æ²çâæ¥å¼ºåå»é¤Cookieï¼èæ¯éæ©è®©å¸åºåçç®¡æ¥å³å®Cookieçæªæ¥ãç°å¨çå±é¢æ¯ï¼<strong>Cookieä¾ç¶å­å¨ï¼ä½è¡ä¸æ­£å¨åç¬¬ä¸æ¹æ°æ®åAIé©±å¨çå¹¿åæ¨¡å¼è¿ç§»ã</strong></p>
<h1 id="x-åèæç®">X åèæç®</h1>

</div>
<div id="MySignature" role="contentinfo">
    <div class="essaySuffix-box">
    <div class="essaySuffix-box-left" style=" margin: 6px auto; ">
        <img src="https://blog-static.cnblogs.com/files/johnnyzen/cnblogs-qq-group-qrcode.gif?t=1679679148" alt="QQæ²éäº¤æµç¾¤" onload="changeImg(this,200,100)">
    </div>
<div class="essaySuffix-box-right">
    <span class="essaySuffix-right-title">æ¬æä½è</span>ï¼
        <strong><span><a href="https://github.com/Johnny-ZTSD" target="_blank">ååå¯°å®</a></span></strong>
    <br>
    <span style="font-weight: bold; white-space:nowrap;">æ¬æé¾æ¥</span>ï¼
        <a href="https://www.cnblogs.com/johnnyzen" target="_blank" id="articleLinkElement"> https://www.cnblogs.com/johnnyzen</a>
    <br>
    <span class="essaySuffix-right-title">å³äºåæ</span>ï¼è¯è®ºåç§ä¿¡ä¼å¨ç¬¬ä¸æ¶é´åå¤ï¼æ<a href="https://msg.cnblogs.com/msg/send/johnnyzen" target="_blank">ç´æ¥ç§ä¿¡</a>æã
    <br>
    <span class="essaySuffix-right-title">çæå£°æ</span>ï¼æ¬åå®¢æææç« é¤ç¹å«å£°æå¤ï¼åéç¨ <a title="https://creativecommons.org/licenses/by-nc-nd/4.0/" href="http://blog.sina.com.cn/s/blog_896327b90102y6c6.html" alt="BY-NC-SA" target="_blank">BY-NC-SA</a> 
    è®¸å¯åè®®ãè½¬è½½è¯·æ³¨æåºå¤ï¼<br>
    <span class="essaySuffix-right-title">æ¥å¸¸äº¤æµ</span>ï¼å¤§æ°æ®ä¸è½¯ä»¶å¼å-QQäº¤æµç¾¤: 774386015<strong>
        <span style="color: #ff0000; font-size: 12pt;">ã<a id="post-up" onclick="votePost(getArticleNumber(),'Digg')" href="javascript:void(0);">å¥ç¾¤äºç»´ç </a>ã</span></strong>åè§å·¦ä¸è§ãæ¨çæ¯æãé¼å±<span style="color: #ff0000; font-size: 12pt;"></span>æ¯åä¸»ææ¯åä½çéè¦å¨åï¼
    <br>
</div>
<div style="clear: both;">
</div>
</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.008333333333333333" data-date-updated="2026-01-04 13:03">2026-01-04 12:51</span>&nbsp;
<a href="https://www.cnblogs.com/johnnyzen">ååå¯°å®</a>&nbsp;
éè¯»(<span id="post_view_count">2</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19437233);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19437233', targetLink: 'https://www.cnblogs.com/johnnyzen/p/19437233', title: '[æµè§å¨/Cookie] 2026å¹´äºï¼Googleåæ¨ç§»é¤çæµè§å¨Cookieææ¯æ¶å¤±äºåï¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ MQå¦ä½ä¿è¯æ¶æ¯ä¸ä¸¢å¤±ï¼ ]]></title>
    <link>https://www.cnblogs.com/12lisu/p/19437091</link>
    <guid>76e3dda8d7c9740445617f1659d92a6a</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/12lisu/p/19437091" title="åå¸äº 2026-01-04 12:21">
    <span role="heading" aria-level="2">MQå¦ä½ä¿è¯æ¶æ¯ä¸ä¸¢å¤±ï¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="åè¨">åè¨</h2>
<p>ä»å¤©æä»¬æ¥èèä¸ä¸ªè®©å¾å¤å¼åèå¤´ç¼çè¯é¢ââMQæ¶æ¯ä¸¢å¤±é®é¢ã</p>
<p>æäºå°ä¼ä¼´å¨å·¥ä½ä¸­ï¼ä¸æå°æ¶æ¯éåå°±è§å¾å¾ç®åï¼ä½çæ­£éå°çº¿ä¸æ¶æ¯ä¸¢å¤±æ¶ï¼ææ¥èµ·æ¥å´è®©äººæçã</p>
<p>å¶å®ï¼æå¨å®éå·¥ä½ä¸­ï¼ä¹éå°è¿MQæ¶æ¯ä¸¢å¤±çæåµã</p>
<p>ä»å¤©è¿ç¯æç« ï¼ä¸é¨è·å¤§å®¶ä¸èµ·èèè¿ä¸ªè¯é¢ï¼å¸æå¯¹ä½ ä¼ææå¸®å©ã</p>
<h2 id="ä¸æ¶æ¯ä¸¢å¤±çä¸å¤§ç¯è">ä¸ãæ¶æ¯ä¸¢å¤±çä¸å¤§ç¯è</h2>
<p>å¨æ·±å¥è§£å³æ¹æ¡ä¹åï¼æä»¬åææ¸æ¥æ¶æ¯å¨åªå ä¸ªç¯èå¯è½ä¸¢å¤±ï¼</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2238006/202601/2238006-20260104121945316-1480460555.png" class="lazyload"></p>
<h3 id="1-çäº§èåéé¶æ®µ">1. çäº§èåéé¶æ®µ</h3>
<ul>
<li>ç½ç»æå¨å¯¼è´åéå¤±è´¥</li>
<li>çäº§èå®æºæªåé</li>
<li>Brokerå¤çå¤±è´¥æªè¿åç¡®è®¤</li>
</ul>
<h3 id="2-brokerå­å¨é¶æ®µ">2. Brokerå­å¨é¶æ®µ</h3>
<ul>
<li>åå­æ¶æ¯æªæä¹åï¼éå¯ä¸¢å¤±</li>
<li>ç£çæéå¯¼è´æ°æ®ä¸¢å¤±</li>
<li>éç¾¤åæ¢æ¶æ¶æ¯ä¸¢å¤±</li>
</ul>
<h3 id="3-æ¶è´¹èå¤çé¶æ®µ">3. æ¶è´¹èå¤çé¶æ®µ</h3>
<ul>
<li>èªå¨ç¡®è®¤æ¨¡å¼ä¸å¤çå¼å¸¸</li>
<li>æ¶è´¹èå®æºå¤çä¸­æ­</li>
<li>æå¨ç¡®è®¤ä½å¿è®°ç¡®è®¤</li>
</ul>
<p>çè§£äºé®é¢æ ¹æºï¼æ¥ä¸æ¥æä»¬ç5ç§å®ç¨çè§£å³æ¹æ¡ã</p>
<h2 id="äºæ¹æ¡ä¸çäº§èç¡®è®¤æºå¶">äºãæ¹æ¡ä¸ï¼çäº§èç¡®è®¤æºå¶</h2>
<h3 id="æ ¸å¿åç">æ ¸å¿åç</h3>
<p>çäº§èåéæ¶æ¯åç­å¾Brokerç¡®è®¤ï¼ç¡®ä¿æ¶æ¯æåå°è¾¾ã</p>
<p>è¿æ¯é²æ­¢æ¶æ¯ä¸¢å¤±çç¬¬ä¸éé²çº¿ã</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2238006/202601/2238006-20260104122003502-1676571740.png" class="lazyload"></p>
<h3 id="å³é®å®ç°">å³é®å®ç°</h3>
<pre><code class="language-java">// RabbitMQçäº§èç¡®è®¤éç½®
@Bean
public RabbitTemplate rabbitTemplate() {
    RabbitTemplate template = new RabbitTemplate(connectionFactory);
    template.setConfirmCallback((correlationData, ack, cause) -&gt; {
        if (ack) {
            // æ¶æ¯æåå°è¾¾Broker
            messageStatusService.markConfirmed(correlationData.getId());
        } else {
            // åéå¤±è´¥ï¼è§¦åéè¯
            retryService.scheduleRetry(correlationData.getId());
        }
    });
    return template;
}

// å¯é åéæ¹æ³
public void sendReliable(String exchange, String routingKey, Object message) {
    String messageId = generateId();
    // åè½åºä¿å­åéç¶æ
    messageStatusService.saveSendingStatus(messageId, message);
    
    // åéæä¹åæ¶æ¯
    rabbitTemplate.convertAndSend(exchange, routingKey, message, msg -&gt; {
        msg.getMessageProperties().setDeliveryMode(MessageDeliveryMode.PERSISTENT);
        msg.getMessageProperties().setMessageId(messageId);
        return msg;
    }, new CorrelationData(messageId));
}
</code></pre>
<h3 id="éç¨åºæ¯">éç¨åºæ¯</h3>
<ul>
<li>å¯¹æ¶æ¯å¯é æ§è¦æ±é«çä¸å¡</li>
<li>éèäº¤æãè®¢åå¤çç­å³é®ä¸å¡</li>
<li>éè¦ç²¾ç¡®ç¥éæ¶æ¯åéç»æçåºæ¯</li>
</ul>
<h2 id="ä¸æ¹æ¡äºæ¶æ¯æä¹åæºå¶">ä¸ãæ¹æ¡äºï¼æ¶æ¯æä¹åæºå¶</h2>
<h3 id="æ ¸å¿åç-1">æ ¸å¿åç</h3>
<p>å°æ¶æ¯ä¿å­å°ç£çï¼ç¡®ä¿Brokeréå¯åæ¶æ¯ä¸ä¸¢å¤±ã</p>
<p>è¿æ¯é²æ­¢Brokerç«¯æ¶æ¯ä¸¢å¤±çå³é®ã</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2238006/202601/2238006-20260104122035149-1332407257.png" class="lazyload"></p>
<h3 id="å³é®å®ç°-1">å³é®å®ç°</h3>
<pre><code class="language-java">// æä¹åéåéç½®
@Bean
public Queue orderQueue() {
    return QueueBuilder.durable("order.queue")  // éåæä¹å
            .deadLetterExchange("order.dlx")    // æ­»ä¿¡äº¤æ¢æº
            .build();
}

// åéæä¹åæ¶æ¯
public void sendPersistentMessage(Object message) {
    rabbitTemplate.convertAndSend("order.exchange", "order.create", message, msg -&gt; {
        msg.getMessageProperties().setDeliveryMode(MessageDeliveryMode.PERSISTENT); // æ¶æ¯æä¹å
        return msg;
    });
}

// Kafkaæä¹åéç½®
@Bean
public ProducerFactory&lt;String, Object&gt; producerFactory() {
    Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();
    props.put(ProducerConfig.ACKS_CONFIG, "all"); // ææå¯æ¬ç¡®è®¤
    props.put(ProducerConfig.RETRIES_CONFIG, 3);   // éè¯æ¬¡æ°
    props.put(ProducerConfig.ENABLE_IDEMPOTENCE_CONFIG, true); // å¹ç­æ§
    return new DefaultKafkaProducerFactory&lt;&gt;(props);
}
</code></pre>
<h3 id="ä¼ç¼ºç¹">ä¼ç¼ºç¹</h3>
<p><strong>ä¼ç¹ï¼</strong></p>
<ul>
<li>ææé²æ­¢Brokeréå¯å¯¼è´çæ¶æ¯ä¸¢å¤±</li>
<li>éç½®ç®åï¼ææææ¾</li>
</ul>
<p><strong>ç¼ºç¹ï¼</strong></p>
<ul>
<li>ç£çIOå½±åæ§è½</li>
<li>éè¦è¶³å¤çç£çç©ºé´</li>
</ul>
<h2 id="åæ¹æ¡ä¸æ¶è´¹èç¡®è®¤æºå¶">åãæ¹æ¡ä¸ï¼æ¶è´¹èç¡®è®¤æºå¶</h2>
<h3 id="æ ¸å¿åç-2">æ ¸å¿åç</h3>
<p>æ¶è´¹èå¤çå®æ¶æ¯åæå¨åBrokeråéç¡®è®¤ï¼Brokeræ¶å°ç¡®è®¤åæå é¤æ¶æ¯ã</p>
<p>è¿æ¯ä¿è¯æ¶æ¯ä¸ä¸¢å¤±çæåä¸éé²çº¿ã</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2238006/202601/2238006-20260104122048500-1991151655.png" class="lazyload"></p>
<h3 id="å³é®å®ç°-2">å³é®å®ç°</h3>
<pre><code class="language-java">// æå¨ç¡®è®¤æ¶è´¹è
@RabbitListener(queues = "order.queue")
public void handleMessage(Order order, Message message, Channel channel) {
    long deliveryTag = message.getMessageProperties().getDeliveryTag();
    
    try {
        // ä¸å¡å¤ç
        orderService.processOrder(order);
        
        // æå¨ç¡®è®¤
        channel.basicAck(deliveryTag, false);
        log.info("æ¶æ¯å¤çå®æ: {}", order.getOrderId());
        
    } catch (Exception e) {
        log.error("æ¶æ¯å¤çå¤±è´¥: {}", order.getOrderId(), e);
        
        // å¤çå¤±è´¥ï¼éæ°å¥é
        channel.basicNack(deliveryTag, false, true);
    }
}

// æ¶è´¹èå®¹å¨éç½®
@Bean
public SimpleRabbitListenerContainerFactory containerFactory() {
    SimpleRabbitListenerContainerFactory factory = new SimpleRabbitListenerContainerFactory();
    factory.setAcknowledgeMode(AcknowledgeMode.MANUAL); // æå¨ç¡®è®¤
    factory.setPrefetchCount(10); // é¢åæ°é
    factory.setConcurrentConsumers(3); // å¹¶åæ¶è´¹è
    return factory;
}
</code></pre>
<h3 id="æ³¨æäºé¡¹">æ³¨æäºé¡¹</h3>
<ul>
<li>ç¡®ä¿ä¸å¡å¤çå®æååç¡®è®¤</li>
<li>åçè®¾ç½®é¢åæ°éï¼é¿ååå­æº¢åº</li>
<li>å¤çå¼å¸¸æ¶è¦æ­£ç¡®ä½¿ç¨NACK</li>
</ul>
<h2 id="äºæ¹æ¡åäºå¡æ¶æ¯æºå¶">äºãæ¹æ¡åï¼äºå¡æ¶æ¯æºå¶</h2>
<h3 id="æ ¸å¿åç-3">æ ¸å¿åç</h3>
<p>éè¿äºå¡ä¿è¯æ¬å°ä¸å¡æä½åæ¶æ¯åéçåå­æ§ï¼è¦ä¹é½æåï¼è¦ä¹é½å¤±è´¥ã</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2238006/202601/2238006-20260104122103889-905249062.png" class="lazyload"></p>
<h3 id="å³é®å®ç°-3">å³é®å®ç°</h3>
<pre><code class="language-java">// æ¬å°äºå¡è¡¨æ¹æ¡
@Transactional
public void createOrder(Order order) {
    // 1. ä¿å­è®¢åå°æ°æ®åº
    orderRepository.save(order);
    
    // 2. ä¿å­æ¶æ¯å°æ¬å°æ¶æ¯è¡¨
    LocalMessage localMessage = new LocalMessage();
    localMessage.setBusinessId(order.getOrderId());
    localMessage.setContent(JSON.toJSONString(order));
    localMessage.setStatus(MessageStatus.PENDING);
    localMessageRepository.save(localMessage);
    
    // 3. äºå¡æäº¤ï¼æ¬å°ä¸å¡åæ¶æ¯å­å¨ä¿æä¸è´æ§
}

// å®æ¶ä»»å¡æ«æå¹¶åéæ¶æ¯
@Scheduled(fixedDelay = 5000)
public void sendPendingMessages() {
    List&lt;LocalMessage&gt; pendingMessages = localMessageRepository.findByStatus(MessageStatus.PENDING);
    
    for (LocalMessage message : pendingMessages) {
        try {
            // åéæ¶æ¯å°MQ
            rabbitTemplate.convertAndSend("order.exchange", "order.create", message.getContent());
            
            // æ´æ°æ¶æ¯ç¶æä¸ºå·²åé
            message.setStatus(MessageStatus.SENT);
            localMessageRepository.save(message);
            
        } catch (Exception e) {
            log.error("åéæ¶æ¯å¤±è´¥: {}", message.getId(), e);
        }
    }
}

// RocketMQäºå¡æ¶æ¯
public void sendTransactionMessage(Order order) {
    TransactionMQProducer producer = new TransactionMQProducer("order_producer");
    
    // åéäºå¡æ¶æ¯
    Message msg = new Message("order_topic", "create", 
                             JSON.toJSONBytes(order));
    
    TransactionSendResult result = producer.sendMessageInTransaction(msg, null);
    
    if (result.getLocalTransactionState() == LocalTransactionState.COMMIT_MESSAGE) {
        log.info("äºå¡æ¶æ¯æäº¤æå");
    }
}
</code></pre>
<h3 id="éç¨åºæ¯-1">éç¨åºæ¯</h3>
<ul>
<li>éè¦ä¸¥æ ¼ä¿è¯ä¸å¡åæ¶æ¯ä¸è´æ§çåºæ¯</li>
<li>åå¸å¼äºå¡åºæ¯</li>
<li>éèãçµåç­å¯¹æ°æ®ä¸è´æ§è¦æ±é«çä¸å¡</li>
</ul>
<h2 id="å­æ¹æ¡äºæ¶æ¯éè¯ä¸æ­»ä¿¡éå">å­ãæ¹æ¡äºï¼æ¶æ¯éè¯ä¸æ­»ä¿¡éå</h2>
<h3 id="æ ¸å¿åç-4">æ ¸å¿åç</h3>
<p>éè¿éè¯æºå¶å¤çä¸´æ¶æéï¼éè¿æ­»ä¿¡éåå¤çæç»æ æ³æ¶è´¹çæ¶æ¯ã</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2238006/202601/2238006-20260104122121519-777176098.png" class="lazyload"></p>
<h3 id="å³é®å®ç°-4">å³é®å®ç°</h3>
<pre><code class="language-java">// éè¯éåéç½®
@Bean
public Queue orderQueue() {
    return QueueBuilder.durable("order.queue")
            .withArgument("x-dead-letter-exchange", "order.dlx") // æ­»ä¿¡äº¤æ¢æº
            .withArgument("x-dead-letter-routing-key", "order.dead")
            .withArgument("x-message-ttl", 60000) // 60ç§åè¿å¥æ­»ä¿¡
            .build();
}

// æ­»ä¿¡éåéç½®
@Bean
public Queue orderDeadLetterQueue() {
    return QueueBuilder.durable("order.dead.queue").build();
}

// æ¶è´¹èéè¯é»è¾
@RabbitListener(queues = "order.queue")
public void handleMessageWithRetry(Order order, Message message, Channel channel) {
    long deliveryTag = message.getMessageProperties().getDeliveryTag();
    
    try {
        orderService.processOrder(order);
        channel.basicAck(deliveryTag, false);
        
    } catch (TemporaryException e) {
        // ä¸´æ¶å¼å¸¸ï¼éæ°å¥ééè¯
        channel.basicNack(deliveryTag, false, true);
        
    } catch (PermanentException e) {
        // æ°¸ä¹å¼å¸¸ï¼ç´æ¥ç¡®è®¤è¿å¥æ­»ä¿¡éå
        channel.basicAck(deliveryTag, false);
        log.error("æ¶æ¯è¿å¥æ­»ä¿¡éå: {}", order.getOrderId(), e);
    }
}

// æ­»ä¿¡éåæ¶è´¹è
@RabbitListener(queues = "order.dead.queue")
public void handleDeadLetterMessage(Order order) {
    log.warn("å¤çæ­»ä¿¡æ¶æ¯: {}", order.getOrderId());
    // åéåè­¦ãè®°å½æ¥å¿ãäººå·¥å¤çç­
    alertService.sendAlert("æ­»ä¿¡æ¶æ¯åè­¦", order.toString());
}
</code></pre>
<h3 id="éè¯ç­ç¥å»ºè®®">éè¯ç­ç¥å»ºè®®</h3>
<ol>
<li><strong>ææ°éé¿</strong>ï¼1s, 5s, 15s, 30s</li>
<li><strong>æå¤§éè¯æ¬¡æ°</strong>ï¼3-5æ¬¡</li>
<li><strong>æ­»ä¿¡å¤ç</strong>ï¼äººå·¥ä»å¥æç¹æ®å¤çæµç¨</li>
</ol>
<h2 id="ä¸æ¹æ¡å¯¹æ¯ä¸éåæå">ä¸ãæ¹æ¡å¯¹æ¯ä¸éåæå</h2>
<p>ä¸ºäºå¸®å©å¤§å®¶éæ©åéçæ¹æ¡ï¼ææ´çäºè¯¦ç»çå¯¹æ¯è¡¨ï¼</p>
<table>
<thead>
<tr>
<th>æ¹æ¡</th>
<th>å¯é æ§</th>
<th>æ§è½å½±å</th>
<th>å¤æåº¦</th>
<th>éç¨åºæ¯</th>
</tr>
</thead>
<tbody>
<tr>
<td>çäº§èç¡®è®¤</td>
<td>é«</td>
<td>ä¸­</td>
<td>ä½</td>
<td>ææéè¦å¯é åéçåºæ¯</td>
</tr>
<tr>
<td>æ¶æ¯æä¹å</td>
<td>ä¸­</td>
<td>ä¸­</td>
<td>ä½</td>
<td>Brokeréå¯ä¿æ¤</td>
</tr>
<tr>
<td>æ¶è´¹èç¡®è®¤</td>
<td>é«</td>
<td>ä½</td>
<td>ä¸­</td>
<td>ç¡®ä¿æ¶æ¯è¢«æåå¤ç</td>
</tr>
<tr>
<td>äºå¡æ¶æ¯</td>
<td>æé«</td>
<td>é«</td>
<td>é«</td>
<td>å¼ºä¸è´æ§è¦æ±çä¸å¡</td>
</tr>
<tr>
<td>éè¯+æ­»ä¿¡</td>
<td>é«</td>
<td>ä½</td>
<td>ä¸­</td>
<td>å¤çä¸´æ¶æéåæç»æ­»ä¿¡</td>
</tr>
</tbody>
</table>
<h3 id="éåå»ºè®®">éåå»ºè®®</h3>
<p><strong>ååé¡¹ç®/ç®åä¸å¡ï¼</strong></p>
<ul>
<li>çäº§èç¡®è®¤ + æ¶æ¯æä¹å + æ¶è´¹èç¡®è®¤</li>
<li>æ»¡è¶³å¤§é¨ååºæ¯ï¼å®ç°ç®å</li>
</ul>
<p><strong>çµå/äº¤æç³»ç»ï¼</strong></p>
<ul>
<li>çäº§èç¡®è®¤ + äºå¡æ¶æ¯ + éè¯æºå¶</li>
<li>ä¿è¯æ°æ®ä¸è´æ§ï¼å¤çå¤æä¸å¡</li>
</ul>
<p><strong>å¤§æ°æ®/æ¥å¿å¤çï¼</strong></p>
<ul>
<li>æ¶æ¯æä¹å + æ¶è´¹èç¡®è®¤</li>
<li>åè®¸å°éä¸¢å¤±ï¼è¿½æ±ååé</li>
</ul>
<p><strong>éè/æ¯ä»ç³»ç»ï¼</strong></p>
<ul>
<li>å¨æ¹æ¡ç»åä½¿ç¨</li>
<li>æé«å¯é æ§è¦æ±</li>
</ul>
<h2 id="æ»ç»">æ»ç»</h2>
<p>æ¶æ¯ä¸¢å¤±é®é¢æ¯æ¶æ¯éåä½¿ç¨ä¸­çå¸¸è§ææï¼éè¿ä»å¤©ä»ç»ç5ç§æ¹æ¡ï¼æä»¬å¯ä»¥æå»ºä¸ä¸ªå¯é çæ¶æ¯ç³»ç»ï¼</p>
<ol>
<li><strong>çäº§èç¡®è®¤æºå¶</strong> - ä¿è¯æ¶æ¯æååéå°Broker</li>
<li><strong>æ¶æ¯æä¹åæºå¶</strong> - é²æ­¢Brokeréå¯å¯¼è´æ¶æ¯ä¸¢å¤±</li>
<li><strong>æ¶è´¹èç¡®è®¤æºå¶</strong> - ç¡®ä¿æ¶æ¯è¢«æåå¤ç</li>
<li><strong>äºå¡æ¶æ¯æºå¶</strong> - ä¿è¯ä¸å¡åæ¶æ¯çä¸è´æ§</li>
<li><strong>éè¯ä¸æ­»ä¿¡éå</strong> - å¤çå¼å¸¸æåµåæç»æ­»ä¿¡</li>
</ol>
<p>æäºå°ä¼ä¼´å¯è½ä¼é®ï¼"æéè¦å¨é¨ä½¿ç¨è¿äºæ¹æ¡åï¼</p>
<p>"æçå»ºè®®æ¯ï¼<strong>æ ¹æ®ä¸å¡éæ±éæ©åéçç»å</strong>ã</p>
<p>å¯¹äºå³é®ä¸å¡ï¼å»ºè®®è³å°ä½¿ç¨åä¸ç§æ¹æ¡ï¼å¯¹äºæ®éä¸å¡ï¼å¯ä»¥æ ¹æ®å®éæåµéå½ç®åã</p>
<p>è®°ä½ï¼æ²¡æå®ç¾çæ¹æ¡ï¼åªææéåçæ¹æ¡ã</p>
<h2 id="æåè¯´ä¸å¥æ±å³æ³¨å«ç½å«æ">æåè¯´ä¸å¥(æ±å³æ³¨ï¼å«ç½å«æ)</h2>
<p>å¦æè¿ç¯æç« å¯¹æ¨ææå¸®å©ï¼æèææå¯åçè¯ï¼å¸®å¿å³æ³¨ä¸ä¸æçååå¬ä¼å·ï¼èä¸è¯´ææ¯ï¼æ¨çæ¯ææ¯æåæåä½æå¤§çå¨åã</p>
<p>æ±ä¸é®ä¸è¿ï¼ç¹èµãè½¬åãå¨çã</p>
<p>å³æ³¨å¬ä¼å·ï¼ãèä¸è¯´ææ¯ãï¼å¨å¬ä¼å·ä¸­åå¤ï¼è¿å¤§åï¼å¯ä»¥åè´¹è·åææè¿æ´çç10ä¸å­çé¢è¯å®å¸ï¼å¥½å¤å°ä¼ä¼´é è¿ä¸ªå®å¸æ¿å°äºå¤å®¶å¤§åçofferã</p>
<p>æ´å¤é¡¹ç®å®æå¨æçææ¯ç½ç«ï¼<a href="http://www.susan.net.cn/project" target="_blank" rel="noopener nofollow">http://www.susan.net.cn/project</a></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-04 12:22">2026-01-04 12:21</span>&nbsp;
<a href="https://www.cnblogs.com/12lisu">èä¸è¯´ææ¯</a>&nbsp;
éè¯»(<span id="post_view_count">19</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19437091);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19437091', targetLink: 'https://www.cnblogs.com/12lisu/p/19437091', title: 'MQå¦ä½ä¿è¯æ¶æ¯ä¸ä¸¢å¤±ï¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ åºè®ºç¬è®°ï¼ä¸ï¼ç¢éåæåºç¡ ]]></title>
    <link>https://www.cnblogs.com/GeophysicsWorker/p/19436590</link>
    <guid>596ce9fad3773c85ad74a485b0786509</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/GeophysicsWorker/p/19436590" title="åå¸äº 2026-01-04 11:10">
    <span role="heading" aria-level="2">åºè®ºç¬è®°ï¼ä¸ï¼ç¢éåæåºç¡</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        ç¢éå½æ°åæåºç¡ï¼ç¢éåææ¯ç¢éä»£æ°çç»§ç»­ï¼æ¯åºè®ºçåºç¡ç¥è¯ï¼åæ¶ä¹æ¯å¼¹æ§æ³¢å¨åå­¦ç­å¶ä»å­¦ç§çæç¨å·¥å·ãå¶æ¬ç¬è®°ä¸»è¦åå®¹æ¯ä»ç»ç¢æ§å½æ°ï¼ç¢ç«¯æ²çº¿åå¶å¾®åï¼ç§¯åè®¡ç®åå¶æ§è´¨ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="åºè®ºç¬è®°ä¸ç¢éåæåºç¡">åºè®ºç¬è®°ï¼ä¸ï¼ç¢éåæåºç¡</h1>
<p>â       ç¢éåææ¯ç¢éä»£æ°çç»§ç»­ï¼æ¯åºè®ºçåºç¡ç¥è¯ï¼åæ¶ä¹æ¯å¼¹æ§æ³¢å¨åå­¦ç­å¶ä»å­¦ç§çæç¨å·¥å·ãå¶æ¬ç¬è®°ä¸»è¦åå®¹æ¯ä»ç»ç¢æ§å½æ°ï¼ç¢ç«¯æ²çº¿åå¶å¾®åï¼ç§¯åè®¡ç®åå¶æ§è´¨ã</p>
<h2 id="11ç¢æ§å½æ°">1.1ç¢æ§å½æ°</h2>
<p>â       å¨ç¢éä»£æ°ä¸­ï¼æ¾ç»å­¦è¿ç¢éçæ¨¡é¿åæ¹åé½ä¿æä¸åçç¢éï¼è¿ç§ç¢éç§°ä¸ºå¸¸ç¢(æ³¨æï¼é¶ç¢éçæ¹åä¸ºä»»æï¼å¯ä½ä¸ºä¸ç§ç¹æ®çå¸¸ç¢é)ï¼ç¶èï¼å¨è®¸å¤ç§å­¦ï¼ææ¯é®é¢ä¸­ï¼æä»¬å¸¸å¸¸éå°æ¨¡é¿åæ¹åæå¶ä¸­ä¹ä¸ä¼æ¹åçç¢éï¼è¿ç§ç¢éç§°ä¸ºåç¢ã</p>
<p>â     <strong>Definition 1.1</strong> è®¾ææ°æ§åé<span class="math inline">\(t\)</span>ååç¢é<span class="math inline">\(\mathbf{A}\)</span>ï¼å¦æå¯¹äº<span class="math inline">\(t\)</span>å¨æä¸ªèå´<span class="math inline">\(G\)</span>åçæ¯ä¸ä¸ªæ°å¼ï¼åç¢é<span class="math inline">\(\mathbf{A}\)</span>é½ä»¥ä¸ä¸ªç¡®å®çç¢éåå®å¯¹åºï¼åç§°<span class="math inline">\(\mathbf{A}\)</span> ä¸ºæ°æ§åé<span class="math inline">\(t\)</span>çç¢éå½æ°ï¼è®°ä½</p>
<p></p><div class="math display">\[\mathbf{A}=\mathbf{A}(t) \tag{1.1.1}
\]</div><p></p><p>å¹¶ç§°<span class="math inline">\(\mathbf{G}\)</span>ä¸ºå½æ°<span class="math inline">\(\mathbf{A}\)</span>çå®ä¹åã</p>
<p>â      ç¢éå½æ°<span class="math inline">\(\mathbf{A}(t)\)</span>å¨<span class="math inline">\(Oxyz\)</span>ç´è§åæ ç³»çä¸ä¸ªåæ ï¼å³å®çä¸ä¸ªåæ ç³»çæå½±ï¼ï¼æ¾ç¶é½æ¯<span class="math inline">\(t\)</span>çå½æ°ï¼</p>
<p></p><div class="math display">\[\mathbf{A}(t)=[A_x(t),A_y(t),A_z(t)] \tag{1.1.2}
\]</div><p></p><p>æä»¥ï¼ç¢æ§å½æ°<span class="math inline">\(\mathbf{A}(t)\)</span>çåæ è¡¨è¾¾å¼ä¸ºï¼</p>
<p></p><div class="math display">\[\mathbf{A}=A_x(t)\mathbf{i}+A_y(t)\mathbf{j}+A_z(t)\mathbf{k} \tag{1.1.3}
\]</div><p></p><p>å¶ä¸­<span class="math inline">\(i,j,k\)</span>ä¸ºæ²¿<span class="math inline">\(x,y,z\)</span>ä¸ä¸ªåæ è½´æ­£åçåä½ç¢éãå¯è§ï¼ä¸ä¸ªç¢æ§å½æ°åä¸ä¸ªæåºçæ°æ§å½æ°ï¼åæ ï¼ææä¸ä¸å¯¹åºçå³ç³»ã</p>
<h2 id="12ç¢ç«¯æ²çº¿">1.2ç¢ç«¯æ²çº¿</h2>
<p>â       æ¬ç¬è®°æè®²çç¢éåæèªç±ç¢éï¼å°±æ¯å½ä¸¤ç¢éçæ¨¡é¿åæ¹åç¸åæ¶ï¼å°±è®¤ä¸ºæ­¤äºç¢éæ¯ç¸ç­çãæ®æ­¤ï¼ä¸ºäºè½ç¨å¾å½¢æ¥ç´è§å°è¡¨ç¤ºç¢æ§å½æ°<span class="math inline">\(\mathbf{A}(t)\)</span>çååç¶æï¼æä»¬å°±å¯ä»¥æ<span class="math inline">\(\mathbf{A}(t)\)</span>çèµ·ç¹åå¨åæ åç¹ãè¿æ ·ï¼å½<span class="math inline">\(t\)</span> ååæ¶ï¼ç¢é<span class="math inline">\(\mathbf{A}(t)\)</span> çç»ç¹<span class="math inline">\(\mathbf{M}\)</span>å°±æç»åºä¸æ¡æ²çº¿<span class="math inline">\(l\)</span>; è¿æ¡æ²çº¿å«åç¢æ§å½æ°<span class="math inline">\(\mathbf{A}(t)\)</span>çç¢ç«¯æ²çº¿ï¼äº¦å«åç¢æ§å½æ°<span class="math inline">\(\mathbf{A}(t)\)</span>çå¾å½¢ã</p>
<p>â      ç±ç¢éä»£æ°ç¥éï¼èµ·ç¹å¨åæ åç¹<span class="math inline">\(\mathbf{O}\)</span>ï¼ç»ç¹ä¸º<span class="math inline">\(\mathbf{M}(x,y,z)\)</span>çç¢é<span class="math inline">\(OM\)</span>å«åç¹<span class="math inline">\(M\)</span>(å¯¹äº<span class="math inline">\(O\)</span>ç¹)çç¢å¾ï¼å¸¸ç¨<span class="math inline">\(\mathbf{r}\)</span>è¡¨ç¤ºï¼</p>
<p></p><div class="math display">\[\mathbf{r}=OM=x\mathbf{i}+y\mathbf{j}+z\mathbf{k} \tag{1.2.1}
\]</div><p></p><p>å½æä»¬æç¢éå½æ°<span class="math inline">\(\mathbf{A}(t)\)</span> çèµ·ç¹åå¨åæ åç¹æ¶ï¼<span class="math inline">\(\mathbf{A}(t)\)</span>å®éä¸å°±æä¸ºå¶ç»ç¹<span class="math inline">\(M(x,y,z)\)</span>çç¢å¾ãå æ­¤ï¼<span class="math inline">\(\mathbf{A}(t)\)</span>çä¸ä¸ªåæ <span class="math inline">\(A_x(t),A_y(t),A_z(t)\)</span>å°±å¯¹åºå°ç­äºå¶ç»ç¹<span class="math inline">\(M\)</span>çä¸ä¸ªåæ <span class="math inline">\(x_{M},y_{M},z_{M}\)</span>ï¼å³æ</p>
<p></p><div class="math display">\[\begin{cases}
x_{M}&amp;=A_x(t)\\
y_{M}&amp;=A_y(t)\\
z_{M}&amp;=A_z(t)\\
\end{cases}
\tag{1.2.2}
\]</div><p></p><p>å¼(1.1.2)å°±æ¯ç¢ç«¯æ²çº¿<span class="math inline">\(l\)</span>çä»¥<span class="math inline">\(t\)</span>ä¸ºåæ°çåæ°æ¹ç¨ãå®¹æçåºï¼æ²çº¿<span class="math inline">\(l\)</span>çç¢éæ¹ç¨å¼(1.3)ååæ°æ¹ç¨å¼(1.5)ä¹é´ä¸ä¸å¯¹åºå³ç³»ï¼åªè¦ç¥éå¶ä¸­çä¸ä¸ªï¼å°±å¯ä»¥ç«å»ååºå¦ä¸ä¸ªã</p>
<h2 id="13ç¢æ§å½æ°çæéåè¿ç»­æ§">1.3ç¢æ§å½æ°çæéåè¿ç»­æ§</h2>
<p>â       åæ°æ§å½æ°ä¸æ ·ï¼ç¢æ§å½æ°çæéåè¿ç»­æ§ï¼æ¯ç¢æ§å½æ°çå¾®åä¸ç§¯åçåºç¡æ¦å¿µãå¹åè¿°å¦ä¸ï¼</p>
<p>â        <strong>Definition 1.2 ç¢æ§å½æ°æéçå®ä¹ï¼</strong> è®¾ç¢æ§å½æ°<span class="math inline">\(\mathbf{A}(t)\)</span>å¨ç¹<span class="math inline">\(t_0\)</span>çæä¸ªé¢ååæå®ä¹ï¼ä½å¨<span class="math inline">\(t_0\)</span>å¤å¯ä»¥æ²¡æå®ä¹ï¼ï¼<span class="math inline">\(\mathbf{A_{0}}\)</span>ä¸ºä¸å¸¸ç¢ãè¥å¯¹äºä»»æç»å®çæ­£æ°<span class="math inline">\(\varepsilon\)</span>, é½å­å¨ä¸ä¸ªæ­£æ°<span class="math inline">\(\delta\)</span>ï¼ä½¿å¾å½<span class="math inline">\(t\)</span>æ»¡è¶³<span class="math inline">\(0&lt;|t-t_0|&lt;\delta\)</span>æ¶ï¼å°±æ</p>
<p></p><div class="math display">\[|\mathbf{A}(t)-\mathbf{A_{0}}|&lt;\varepsilon \tag{1.3.1}
\]</div><p></p><p>æç«ï¼åç§°<span class="math inline">\(\mathbf{A}_{0}\)</span>ä¸ºç¢æ§å½æ°<span class="math inline">\(\mathbf{A}(t)\)</span>å½<span class="math inline">\(t\rightarrow{t_0}\)</span>æ¶çæéï¼è®°ä½</p>
<p></p><div class="math display">\[\lim_{t\rightarrow{t_0}}\mathbf{A}(t)=\mathbf{A_0} \tag{1.3.2}
\]</div><p></p><p>è¿ä¸ªå®ä¹ä¸æ°æ§å½æ°çæéçå®ä¹å®å¨ç±»ä¼¼ãå æ­¤ï¼ç¢æ§å½æ°ä¹å°±æç±»ä¼¼äºæ°æ§å½æ°ä¸­çä¸äºæéè¿ç®æ³åãä¾å¦ï¼</p>
<p></p><div class="math display">\[\lim_{t\rightarrow{t_0}}u(t)\mathbf{A}(t)=\lim_{t\rightarrow{t_0}}u(t)\lim_{t\rightarrow{t_0}}\mathbf{A}(t) \tag{1.3.3}
\]</div><p></p><p></p><div class="math display">\[\lim_{t\rightarrow{t_0}}[\mathbf{A}(t)\pm\mathbf{B}(t)]=\lim_{t\rightarrow{t_0}}{\mathbf{A}(t)}\pm\lim_{t\rightarrow{t_0}}{\mathbf{B}(t)} \tag{1.3.4}
\]</div><p></p><p></p><div class="math display">\[\lim_{t\rightarrow{t_0}}[\mathbf{A}(t)\cdot\mathbf{B}(t)]=\lim_{t\rightarrow{t_0}}\mathbf{A}(t)\lim_{t\rightarrow{t_0}}\mathbf{B}(t) \tag{1.3.5}
\]</div><p></p><p></p><div class="math display">\[\lim_{t\rightarrow{t_0}}[\mathbf{A}(t)\times\mathbf{B}(t)]=\lim_{t\rightarrow{t_0}}\mathbf{A}(t)\times\lim_{t\rightarrow{t_0}}{\mathbf{B}}(t) \tag{1.3.6}
\]</div><p></p><p>å¶ä¸­ï¼<span class="math inline">\(u(t)\)</span>ä¸ºæ°æ§å½æ°ï¼<span class="math inline">\(\mathbf{A}(t)\)</span>,<span class="math inline">\(\mathbf{B}(t)\)</span> ä¸ºç¢æ§å½æ°ï¼ä¸å½<span class="math inline">\(t\rightarrow{t_0}\)</span> æ¶ï¼<span class="math inline">\(u(t)\)</span>,<span class="math inline">\(\mathbf{A}(t)\)</span>,<span class="math inline">\(\mathbf{B}(t)\)</span> åææéå­å¨ã</p>
<p>â       ä¾æ­¤ï¼æ ¹æ®å¼(1.3)æä¸å¼</p>
<p></p><div class="math display">\[\lim_{t\rightarrow{t_0}}\mathbf{A}(t)=\lim_{t\rightarrow{t_0}}A_x(t)\mathcal{i}+\lim_{t\rightarrow{t_0}}A_y(t)\mathcal{j}+\lim_{t\rightarrow{t_0}}A_z(t)\mathcal{k} \tag{1.3.7}
\]</div><p></p><p>æ­¤å¼ææ±ç¢æ§å½æ°çæéï¼å½ç»ä¸ºæ±ä¸ä¸ªæ°æ§å½æ°çæéã</p>
<p>â       <strong>Definition 1.3 ç¢æ§å½æ°è¿ç»­æ§çå®ä¹ï¼</strong>è¥ç¢æ§å½æ°<span class="math inline">\(\mathbf{A}(t)\)</span>å¨ç¹<span class="math inline">\(t_0\)</span>çæä¸ªé¢ååæå®ä¹ï¼èä¸æ</p>
<p></p><div class="math display">\[\lim_{t\rightarrow{t_0}}\mathbf{A}(t)=\mathbf{A}(t_0) \tag{1.3.8}
\]</div><p></p><p>åç§°<span class="math inline">\(\mathbf{A}(t)\)</span>å¨<span class="math inline">\(t=t_0\)</span>å¤è¿ç»­ã</p>
<p>â      å®¹æçåº:ç¢æ§å½æ°<span class="math inline">\(\mathbf{A}(t)\)</span>å¨ç¹<span class="math inline">\(t_0\)</span>å¤è¿ç»­çåè¦æ¡ä»¶æ¯å®çä¸ä¸ªåæ å½æ°<span class="math inline">\(A_x(t)\)</span>, <span class="math inline">\(A_y(t)\)</span>, <span class="math inline">\(A_z(t)\)</span> é½å¨<span class="math inline">\(t_0\)</span> å¤è¿ç»­ã</p>
<p>â      è¥ç¢æ§å½æ°<span class="math inline">\(\mathbf{A}(t)\)</span>å¨æä¸ªåºé´åçæ¯ä¸ä¸ªç¹å¤é½èç³»ï¼åç§°å®å¨è¯¥åºé´åè¿ç»­ã</p>
<h2 id="14-ç¢æ§å½æ°çå¯¼æ°ä¸å¾®å">1.4 ç¢æ§å½æ°çå¯¼æ°ä¸å¾®å</h2>
<p>â         å¨ä¸è¿°å°ç»ä¸­ï¼æä»¬åæ­¥å®ä¹äºç¢æ§å½æ°<span class="math inline">\(\mathbf{A}(t)\)</span> åå¶å ä½æä¹ç¢ç«¯æ²çº¿ï¼å¨æ­¤åºç¡ä¸ï¼ç±»ä¼¼æ°æ§å½æ°ï¼å¨æ¬èä¸­ä»ç¢æ§å½æ°çå¯¼æ°åºåï¼ç»åºç¢æ§å½æ°çå¾®ååå¶æ§è´¨ã</p>
<h3 id="141-ç¢æ§å½æ°çå¯¼æ°">1.4.1 ç¢æ§å½æ°çå¯¼æ°</h3>
<p>è®¾æèµ·ç¹å¨<span class="math inline">\(O\)</span>ç¹çç¢æ§å½æ°<span class="math inline">\(\mathbf{A}(t)\)</span>ï¼å½æ°æ§åé<span class="math inline">\(t\)</span>å¨å¶å®ä¹ååä»<span class="math inline">\(t\)</span>å°<span class="math inline">\(t+\Delta{t}(t\neq0)\)</span>æ¶ï¼å¯¹åºçç¢éåå«ä¸ºï¼</p>
<p></p><div class="math display">\[\mathbf{A}(t)=OM \tag{1.4.1}
\]</div><p></p><p></p><div class="math display">\[\mathbf{A}(t+\Delta{t})=ON \tag{1.4.2}
\]</div><p></p><p>ç±æ­¤å¯å®ä¹ç¢æ§å½æ°çå¢éï¼è®°ä½<span class="math inline">\(\Delta{\mathbf{A}}\)</span>ï¼å</p>
<p></p><div class="math display">\[\Delta{\mathbf{A}}=\mathbf{A}(t+\Delta{t})-\mathbf{A}(t)=MN \tag{1.4.3}
\]</div><p></p><p>æ®æ­¤ï¼å°±å¯ä»¥ç»åºç¢æ§å½æ°çå¯¼æ°çå®ä¹ã</p>
<p><strong>Definition 1.4 ç¢æ§å½æ°çå¯¼æ°ï¼</strong>è®¾ç¢æ§å½æ°<span class="math inline">\(\mathbf{A}(t)\)</span>å¨ç¹<span class="math inline">\(t\)</span>çæä¸é¢ååæå®ä¹ï¼å¹¶è®¾<span class="math inline">\(t+\Delta{t}\)</span>ä¹å¨è¿ä¸ªé¢ååãè¥<span class="math inline">\(\mathbf{A}(t)\)</span>å¯¹åºäº<span class="math inline">\(\Delta{t}\)</span>çå¢é<span class="math inline">\(\Delta{\mathbf{A}}\)</span> ä¸<span class="math inline">\(\Delta{t}\)</span>çä¹æ¯</p>
<p></p><div class="math display">\[\frac{d{\mathbf{A}}}{d{t}}=\frac{\mathbf{A}(t+\Delta{t})-\mathbf{A}(t)}{\Delta{t}} \tag{1.4.4}
\]</div><p></p><p>å¨<span class="math inline">\(\Delta{t}\rightarrow{0}\)</span>æ¶ï¼åå¶æéå­å¨ï¼åç§°æ­¤æéä¸ºç¢æ§å½æ°<span class="math inline">\(\mathbf{A}(t)\)</span>å¨ç¹<span class="math inline">\(t\)</span>å¤çå¯¼æ°ï¼ç®ç§°ä¸ºå¯¼ç¢ï¼ï¼è®°ä½ <span class="math inline">\(\frac{d{\mathbf{A}}}{d{t}}\)</span> æè <span class="math inline">\(\mathbf{A}^{'}(t)\)</span>ï¼å³</p>
<p></p><div class="math display">\[\frac{d\mathbf{A}(t)}{d{t}}=\lim_{t\rightarrow{t_0}}\frac{\Delta{\mathbf{A}}}{\Delta{t}}=\lim_{t\rightarrow{t_0}}\frac{\mathbf{A}(t+\Delta{t})-\mathbf{A}(t)}{\Delta{t}} \tag{1.4.5}
\]</div><p></p><p>è¥<span class="math inline">\(\mathbf{A}(t)\)</span> ç±åæ æ§è´¨ç»åºï¼</p>
<p></p><div class="math display">\[\mathbf{A}(t)=A_x(t)\mathbf{i}+A_y(t)\mathbf{j}+A_z(t)\mathbf{k} \tag{1.4.6}
\]</div><p></p><p>ä¸å½æ°<span class="math inline">\(A_x(t),A_y(t),A_z(t)\)</span> å¨ç¹<span class="math inline">\(t\)</span>å¯å¯¼ï¼åæ</p>
<p></p><div class="math display">\[\begin{aligned}
\frac{d{\mathbf{A}}}{d{t}}&amp;=\lim_{\Delta{t}\rightarrow{0}}\frac{\Delta\mathbf{A}}{\Delta{t}}\\
&amp;=\lim_{\Delta{t}\rightarrow{0}}\frac{\Delta{A_x}}{\Delta{t}}\mathbf{i}+\lim_{\Delta{t}\rightarrow{0}}\frac{\Delta{A_y}}{\Delta{t}}\mathbf{j}+\lim_{\Delta{t}\rightarrow{0}}\frac{\Delta{A_z}}{\Delta{t}}\mathbf{k}\\
&amp;=\frac{d{A_x}}{d{t}}\mathbf{i}+\frac{d{A_y}}{dt}\mathbf{j}+\frac{d{A_z}}{d{z}}\mathbf{k}
\end{aligned}
\tag{1.4.7}
\]</div><p></p><p>å³</p>
<p></p><div class="math display">\[\mathbf{A^{\prime}}(t)=A_x^{\prime}(t)\mathbf{i}+A_y^{\prime}(t)\mathbf{j}+A_z^{\prime}\mathbf{k} \tag{1.4.8}
\]</div><p></p><p>æ­¤å¼ææ±ç¢éå½æ°çå¯¼æ°å½ç»ä¸ºæ±ä¸ä¸ªåéçæ°æ§å½æ°çå¯¼æ°ã</p>
<h3 id="142-ç¢æ§å½æ°çå¯¼æ°å ä½æä¹">1.4.2 ç¢æ§å½æ°çå¯¼æ°å ä½æä¹</h3>
<p>â        å¦å¾ï¼<span class="math inline">\(l\)</span>ä¸º<span class="math inline">\(\mathbf{A}(t)\)</span>ç¢ç«¯æ²çº¿ï¼<span class="math inline">\(\frac{\Delta\mathbf{A}}{\Delta{t}}\)</span> æ¯å¨<span class="math inline">\(l\)</span>çå²çº¿<span class="math inline">\(MN\)</span>ä¸çä¸ä¸ªç¢éãå½<span class="math inline">\(\Delta{t}&gt;0\)</span>æ¶ï¼å¶æåä¸<span class="math inline">\(\Delta{A}\)</span>ä¸è´ï¼ç³»æåå¯¹åº<span class="math inline">\(t\)</span>å¼å¢å¤§çä¸æ¹ï¼å½<span class="math inline">\(\Delta{t}&lt;0\)</span>æ¶ï¼å¶æåä¸<span class="math inline">\(\Delta{\mathbf{A}}\)</span> ç¸åï¼ä½æ­¤æ¶<span class="math inline">\(\Delta{A}\)</span>æåå¯¹åº<span class="math inline">\(t\)</span>å¼å½æ°åå°çä¸æ¹ï¼ä»è<span class="math inline">\(\frac{\Delta\mathbf{A}}{\Delta{t}}\)</span> ä¾ç¶æåå¯¹åº<span class="math inline">\(t\)</span>å¼å¢å¤§çä¸æ¹ã</p>
<p>â       å¨<span class="math inline">\(\Delta{t}\rightarrow{0}\)</span> æ¶ï¼ç±äºå²çº¿<span class="math inline">\(MN\)</span>ç»ç¹<span class="math inline">\(M\)</span>è½¬å¨ï¼ä¸ä»¥ç¹<span class="math inline">\(M\)</span>å¤çåçº¿ä¸ºå¶æéä½ç½®ãæ­¤æ¶ï¼å¨å²çº¿ä¸çç¢é<span class="math inline">\(\Delta{\mathbf{A}}\over{\Delta{t}}\)</span>çæéä½ç½®ãæ­¤æ¶ï¼å¨å²çº¿ä¸çç¢é<span class="math inline">\(\Delta{\mathbf{A}}\over{\Delta{t}}\)</span> çæéä½ç½®ï¼èªç¶ä¹å°±å¨æ­¤åçº¿ä¸ï¼åä¹å°±æ¯è¯´ï¼å¯¼ç¢</p>
<p></p><div class="math display">\[\mathbf{A}^{\prime}(t)=\lim_{t\rightarrow{0}}\frac{\Delta{\mathbf{A}}}{\Delta{t}} \tag{1.4.9}
\]</div><p></p><p>å½å¶ä¸ä¸ºé¶æ¶ï¼æ¯å¨ç¹<span class="math inline">\(M\)</span>å¤çåçº¿ä¸ï¼ä¸ç±ä¸è¿°å¯ç¥ï¼å¶æ¹åææåå¯¹åº<span class="math inline">\(t\)</span>å¼å¢å¤§çæ¹åãæå¯¼ç¢å¨å ä½ä¸ä¸ºä¸ç¢ç«¯æ²çº¿çååç¢éï¼æåå¯¹åº<span class="math inline">\(t\)</span>å¼å¢å¤§çä¸æ¹ã</p>
<h3 id="143-ç¢æ§å½æ°çå¾®å">1.4.3 ç¢æ§å½æ°çå¾®å</h3>
<p>ï¼1ï¼å¾®åçæ¦å¿µä¸å ä½æä¹</p>
<p>â        æ ¹æ®æ°æ§å½æ°çå¾®åçå®ä¹ï¼è®¾ç¢æ§å½æ°<span class="math inline">\(\mathbf{A}=\mathbf{A^{\prime}}(t)\)</span>ï¼æä»¬æ</p>
<p></p><div class="math display">\[d\mathbf{A}=\mathbf{A^{\prime}}(t)dt \space  (dt=\Delta{t}) \tag{1.4.10}
\]</div><p></p><p>ç§°ä¸ºç¢æ§å½æ°<span class="math inline">\(\mathbf{A}(t)\)</span> å¨<span class="math inline">\(t\)</span> å¤çå¾®åã</p>
<p>â       ç±äºå¾®å<span class="math inline">\(d{\mathbf{A}}\)</span> æ¯å¯¼ç¢<span class="math inline">\(\mathbf{A^{\prime}}(t)\)</span>ä¸å¢é<span class="math inline">\(\Delta{t}\)</span> çä¹ç§¯ï¼æä»¥å¶æ¯ä¸ä¸ªç¢éï¼èä¸åå¯¼ç¢<span class="math inline">\(\mathbf{A}^{\prime}(t)\)</span> ä¸æ ·ï¼ä¹å¨ç¹<span class="math inline">\(M\)</span>å¤ä¸<span class="math inline">\(\mathbf{A}(t)\)</span> çç¢ç«¯æ²çº¿<span class="math inline">\(l\)</span> ç¸åï¼ä½å¶æåï¼å½<span class="math inline">\(dt&gt;0\)</span>æ¶ï¼ä¸<span class="math inline">\(\mathbf{A}^{\prime}(t)\)</span> ç¸åæ¹åä¸è´ï¼èå½<span class="math inline">\(dt&lt;0\)</span>æ¶ï¼åä¸<span class="math inline">\(\mathbf{A}^{\prime}(t)\)</span> çæ¹åç¸åãå¾®å<span class="math inline">\(d{\mathbf{A}}\)</span> çåéè¡¨è¾¾å¼å¦ä¸ï¼</p>
<p></p><div class="math display">\[d{\mathbf{A}}=A_x^{\prime}(t)dt\mathbf{i}+A_{y}^{\prime}(t)dt\mathbf{j}+A_z^{\prime}(t)dt\mathbf{k} \tag{1.4.11}
\]</div><p></p><p>æ</p>
<p></p><div class="math display">\[d{\mathbf{A}}=d{A_x}\mathbf{i}+d{A_y}\mathbf{j}+d{A_z}\mathbf{k} \tag{1.4.12}
\]</div><p></p><p>(2)   <span class="math inline">\(\frac{d\mathbf{r}}{ds}\)</span> çå ä½æä¹</p>
<p>â       å¦ææç¢æ§å½æ°<span class="math inline">\(\mathbf{A}(t)=A_x(t)\mathbf{i}+A_y(t)\mathbf{j}+A_z(t)\mathbf{k}\)</span> çä½å¶ç»ç¹<span class="math inline">\(M(x,y,z)\)</span> çç¢å¾å½æ°ï¼</p>
<p></p><div class="math display">\[\mathbf{r}=x\mathbf{i}+y\mathbf{j}+z\mathbf{k} \tag{1.4.13}
\]</div><p></p><p>è¿é<span class="math inline">\(x=A_x(t),y=A_y(t),z=A_z(t)\)</span>ï¼åä¸å¼å¯ä»¥åä¸ºå¦ä¸çå½¢å¼ï¼</p>
<p></p><div class="math display">\[|d{\mathbf{r}}|=\sqrt{dx^2+dy^2+dz^2} \tag{1.4.14}
\]</div><p></p><p>éå¸¸é½å°ç¢æ§å½æ°<span class="math inline">\(\mathbf{A}(t)\)</span>çç¢ç«¯æ²çº¿<span class="math inline">\(l\)</span>è§ä¸ºæåæ²çº¿ï¼å¨æ ç¹å«å£°ææ¶ï¼é½æ¯å<span class="math inline">\(t\)</span> å¼å¢å çä¸æ¹ä¸º<span class="math inline">\(l\)</span>ä¹æ­£åãè¥å¨<span class="math inline">\(l\)</span>ä¸åå®ä¸ç¹<span class="math inline">\(M_0\)</span> ä½ä¸ºè®¡ç®å¼§é¿<span class="math inline">\(s\)</span>çèµ·ç¹ï¼å¹¶ä»¥<span class="math inline">\(l\)</span>ä¹æ­£åï¼å³<span class="math inline">\(t\)</span>å¼å¢å¤§çæ¹åï¼ä½ä¸º<span class="math inline">\(s\)</span>å¢å¤§çæ¹åï¼åå¨ä»»ä¸ç¹<span class="math inline">\(M\)</span>å¤ï¼å¼§é¿çå¾®åæ¯</p>
<p></p><div class="math display">\[ds=\pm\sqrt{dx^2+dy^2+dz^2} \tag{1.4.15}
\]</div><p></p><p>æç§ä¸è¿°åæ³åå³ç«¯ç¬¦å·ï¼ä»¥ç¹<span class="math inline">\(M\)</span>ä¸ºçï¼å½<span class="math inline">\(ds\)</span>ä½äº<span class="math inline">\(s\)</span>å¢å¤§ä¸æ¹æ¶åæ­£å·ï¼åä¹åè´å·ãç±æ­¤å¯è§æï¼</p>
<p></p><div class="math display">\[|d{\mathbf{r}}|=|d{s}| \tag{1.4.16}
\]</div><p></p><p>å°±æ¯è¯´ï¼ç¢æ§å½æ°çå¾®ååéçæ¨¡é¿ç­äºï¼å¶ç¢ç«¯æ²çº¿çï¼å¼§é¿å¾®åçç»å¯¹å¼ï¼ä»èç±</p>
<p></p><div class="math display">\[|d{\mathbf{r}}|=\left|\frac{d{\mathbf{r}}}{ds}ds\right|=\left|\frac{d{\mathbf{r}}}{ds}\right|\cdot|ds| \tag{1.4.17}
\]</div><p></p><p>æ</p>
<p></p><div class="math display">\[\left|\frac{d{\mathbf{r}}}{ds}\right|=\frac{|d{\mathbf{r}}|}{|ds|}=1 \tag{1.4.18}
\]</div><p></p><p>ç»åå¯¼ç¢çå ä½æä¹ï¼ä¾¿ç¥ï¼ç¢<strong>æ§å½æ°å¯¹ï¼å¶ç¢ç«¯æ²çº¿çï¼å¼§é¿<span class="math inline">\(s\)</span> çå¯¼æ°<span class="math inline">\(\frac{d{\mathbf{r}}}{ds}\)</span> å¨å ä½ä¸ä¸ºåååä½åéï¼ææå<span class="math inline">\(s\)</span>å¢å¤§çä¸æ¹</strong>ã</p>
<p><strong>Equation 1.5.1</strong>  è¯æ <span class="math inline">\(\frac{ds}{dt}=\left|\frac{d{\mathbf{r}}}{dt}\right|\)</span></p>
<p>è¯æï¼</p>
<p></p><div class="math display">\[\frac{d{\mathbf{r}}}{dt}=\frac{dx}{dt}\mathbf{i}+\frac{dy}{dt}\mathbf{j}+\frac{dz}{dt}\mathbf{k} \tag{1.4.19}
\]</div><p></p><p>ç±æ­¤å¯ç¥ï¼<span class="math inline">\(\mathbf{r}\)</span> çç¢æ§å¾®åçæ¨¡é¿ï¼</p>
<p></p><div class="math display">\[\left|\frac{d\mathbf{r}}{dt}\right|=\sqrt{\left(\frac{dx}{dt}\right)^2+\left(\frac{dy}{dt}\right)^2+\left(\frac{dz}{dt}\right)^2} \tag{1.4.20}
\]</div><p></p><p>ç±æ­¤å¯ç¥ï¼<span class="math inline">\(ds\)</span>ä¸<span class="math inline">\(dt\)</span> å·æç¸åçç¬¦å·ï¼åºæ</p>
<p></p><div class="math display">\[\begin{aligned}
\frac{ds}{dt}&amp;=\frac{\pm\sqrt{dx^2+dy^2+dz^2}}{\pm\sqrt{dt^2}}  \\
&amp;=\sqrt{\left(\frac{dx}{dt}\right)^2+\left(\frac{dy}{dt}\right)^2+\left(\frac{dz}{dt}\right)^2}\\
&amp;=\left|\frac{d\mathbf{r}}{dt}\right|
\end{aligned}
\tag{1.4.21}
\]</div><p></p><p>ç±æ­¤å¯ç¥ï¼<strong>ç¢ç«¯æ²çº¿çåååä½ç¢éï¼å³</strong></p>
<p></p><div class="math display">\[\frac{d{\mathbf{r}}}{d{s}}=\frac{\frac{d\mathbf{r}}{d{t}}}{\frac{ds}{dt}}=\frac{d\mathbf{r}}{dt}\bigg/\left|\frac{d{\mathbf{r}}}{dt}\right| \tag{1.4.19}
\]</div><p></p><h3 id="144-ç¢æ§å½æ°çå¯¼æ°æ§è´¨">1.4.4 ç¢æ§å½æ°çå¯¼æ°æ§è´¨</h3>
<p>è®¾ç¢æ§å½æ°<span class="math inline">\(\mathbf{A}=\mathbf{A}(t),\mathbf{B}=\mathbf{B}(t)\)</span> åæ°æ§å½æ° <span class="math inline">\(u=u(t)\)</span> å¨<span class="math inline">\(t\)</span> çæä¸ªèå´åå¯å¯¼ï¼åä¸åå¬å¼å¨è¯¥èå´åæç«</p>
<ol>
<li><span class="math inline">\(\frac{d}{dt}{\mathbf{C}}=\mathbf{0}\)</span> (<span class="math inline">\(\mathbf{C}\)</span>ä¸ºå¸¸ç¢)ï¼</li>
<li><span class="math inline">\(\frac{d}{dt}(\mathbf{A}\pm\mathbf{B})=\frac{d{\mathbf{A}}}{dt}\pm\frac{d\mathbf{B}}{dt}\)</span>;</li>
<li><span class="math inline">\(\frac{d}{dt}(k\mathbf{A})=k\frac{d\mathbf{A}}{dt}\)</span>(<span class="math inline">\(k\)</span>ä¸ºå¸¸æ°);</li>
<li><span class="math inline">\(\frac{d}{dt}(u\mathbf{A})=\frac{du}{dt}\mathbf{A}+u\frac{d{\mathbf{A}}}{dt};\)</span></li>
<li><span class="math inline">\(\frac{d}{dt}(\mathbf{A}\cdot\mathbf{B})=\mathbf{A}\cdot\frac{d\mathbf{B}}{dt}+\mathbf{B}\cdot\frac{d\mathbf{A}}{dt};\)</span></li>
<li><span class="math inline">\(\frac{d}{dt}(\mathbf{A}\times\mathbf{B})=\mathbf{A}\times\frac{d{\mathbf{B}}}{dt}+\mathbf{B}\times\frac{d{\mathbf{A}}}{dt}\)</span></li>
<li><span class="math inline">\(\frac{d}{dt}\mathbf{A^2}=2\mathbf{A}\cdot\frac{d{\mathbf{A}}}{dt}\)</span>(å¶ä¸­<span class="math inline">\(\mathbf{A}^2=\mathbf{A}\cdot\mathbf{A}\)</span>)</li>
<li>å¤åå½æ°æ±å¯¼å¬å¼ï¼è¥<span class="math inline">\(\mathbf{A}=\mathbf{A}(u),u=u(t)\)</span>ï¼å</li>
</ol>
<p></p><div class="math display">\[\frac{d{\mathbf{A}}}{dt}=\frac{d{\mathbf{A}}}{dt}\frac{du}{dt} \tag{1.4.20}
\]</div><p></p><p>è¿äºå¬å¼çè¯ææ¹æ³ï¼ä¸å¾®ç§¯åå­¦ä¸­æ°æ§å½æ°çç±»ä¼¼å¬å¼çè¯æ³ï¼å®å¨ç¸åï¼æ¯å¦å¬å¼ï¼5ï¼å¯ä»¥è¿æ ·è¯æï¼</p>
<p></p><div class="math display">\[\begin{aligned}
\Delta(\mathbf{A}\cdot\mathbf{B})&amp;=(\mathbf{A}+\Delta{\mathbf{A}})\cdot(\mathbf{B}+\Delta{\mathbf{B}})-\mathbf{A}\cdot\mathbf{B} \\
&amp;=\mathbf{A}\cdot\mathbf{B}+\mathbf{A}\cdot(\Delta\mathbf{B})+\mathbf{B}\cdot(\Delta{\mathbf{A}})+\Delta{\mathbf{A}}\cdot\Delta{\mathbf{B}}-\mathbf{A}\cdot\mathbf{B}\\
&amp;=\mathbf{A}\cdot{\Delta{\mathbf{B}}}+\mathbf{B}\cdot\Delta\mathbf{A}+\Delta{\mathbf{A}}\cdot\Delta{\mathbf{B}}
\end{aligned}
\tag{1.4.21}
\]</div><p></p><p>ä»¥<span class="math inline">\(\Delta{t}\)</span> é¤ä»¥ä¸¤ç«¯ï¼æ</p>
<p></p><div class="math display">\[\frac{\Delta{\mathbf{A}\cdot\mathbf{B}}}{\Delta{t}}=\mathbf{A}\cdot\frac{\Delta{\mathbf{B}}}{\Delta{t}}+\mathbf{B}\cdot\frac{\Delta{\mathbf{A}}}{\Delta{t}} \tag{1.4.22}
\]</div><p></p><p>åä»¤ <span class="math inline">\(\Delta{t}\rightarrow{0}\)</span> ä¸¤ç«¯åæéï¼å°±å¾å°ï¼</p>
<p></p><div class="math display">\[\begin{aligned}
\frac{d}{dt}(\mathbf{A}\cdot\mathbf{B})&amp;=\mathbf{A}\cdot\frac{d{\mathbf{B}}}{dt}+\mathbf{B}\frac{d{\mathbf{A}}}{dt}+\mathbf{0}\cdot\frac{d{\mathbf{B}}}{dt}\\
&amp;=\mathbf{A}\cdot\frac{d{\mathbf{B}}}{dt}+\mathbf{B}\frac{d{\mathbf{A}}}{dt}
\end{aligned}\tag{1.4.23}
\]</div><p></p><p><strong>å®ç</strong>  ç¢æ§å½æ°<span class="math inline">\(\mathbf{A}(t)\)</span> çæ¨¡ä¸åçåè¦æ¡ä»¶æ¯</p>
<p></p><div class="math display">\[\mathbf{A}\cdot\frac{d\mathbf{A}}{dt}=0 \tag{1.4.24}
\]</div><p></p><p><strong>è¯æï¼</strong> åå® <span class="math inline">\(|\mathbf{A}|=constant\)</span>, åæ</p>
<p></p><div class="math display">\[\mathbf{A}^2=|\mathbf{A}|^2=constant \tag{1.4.25}
\]</div><p></p><p>ä¸¤ç«¯å¯¹<span class="math inline">\(t\)</span> æ±å¯¼ï¼å°±å¾å°</p>
<p></p><div class="math display">\[\mathbf{A}\cdot\frac{d{\mathbf{A}}}{dt}=0 \tag{1.4.26}
\]</div><p></p><p>åä¹ï¼è¥æ <span class="math inline">\(\mathbf{A}\cdot\frac{d\mathbf{A}}{dt}=0\)</span>, ä»è</p>
<p></p><div class="math display">\[\frac{d}{dt}\mathbf{A}^2=0 \tag{1.4.27}
\]</div><p></p><p>åæï¼</p>
<p></p><div class="math display">\[\mathbf{A}^2=|\mathbf{A}|^2=constant \tag{1.4.28}
\]</div><p></p><p>æä»¥è¦æ</p>
<p></p><div class="math display">\[|\mathbf{A}|= constant \tag{1.4.29}
\]</div><p></p><p>è¿ä¸ªä¾å­ï¼å¯ä»¥ç®åå°è¯´æï¼å®é¿ç¢é<span class="math inline">\(\mathbf{A}(t)\)</span> ä¸å¶å¯¼ç¢éäºç¸åç´ãç¹å«ï¼å¯¹äºåä½ç¢é$$</p>
<p></p><div class="math display">\[\mathbf{A}^{o}\perp \frac{d{\mathbf{A}^{o}}}{dt} \tag{1.4.30}
\]</div><p></p><h3 id="145--å¯¼ç¢çç©çæä¹">1.4.5  å¯¼ç¢çç©çæä¹</h3>
<p>â        è®¾è´¨ç¹<span class="math inline">\(M\)</span>å¨ç©ºé´è¿å¨ï¼å¶ç¢å¾<span class="math inline">\(\mathbf{r}\)</span> ä¸æ¶é´<span class="math inline">\(t\)</span>çå½æ°å³ç³»ä¸º</p>
<p></p><div class="math display">\[\mathbf{r}=\mathbf{r}(t) \tag{1.4.31}
\]</div><p></p><p>è¿ä¸ªå½æ°çç¢ç«¯æ²çº¿<span class="math inline">\(l\)</span>å°±æ¯è´¨ç¹<span class="math inline">\(M\)</span>çè¿å¨è½¨è¿¹ã</p>
<p>â        ä¸ºäºè¯´æå¯¼ç¢<span class="math inline">\(\frac{d{\mathbf{r}}}{dt}\)</span> çç©çæä¹ï¼åå®è´¨ç¹å¨æ¶å» <span class="math inline">\(t=0\)</span>æ¶ä½äºç¹<span class="math inline">\(M_0\)</span>å¤ï¼ç»è¿ä¸æ®µæ¶é´<span class="math inline">\(t\)</span> ä»¥åå°è¾¾ç¹<span class="math inline">\(M\)</span>,å¶é´å¨<span class="math inline">\(l\)</span>ä¸æç»è¿çè·¯ç¨ä¸º<span class="math inline">\(s\)</span>ãè¿æ ·ï¼ç¹<span class="math inline">\(M\)</span>çç¢å¾<span class="math inline">\(\mathbf{r}\)</span> æ¾ç¶æ¯è·¯ç¨<span class="math inline">\(s\)</span> çå½æ°ï¼è<span class="math inline">\(s\)</span> åæ¯æ¶é´<span class="math inline">\(t\)</span> çå½æ°ï¼ä»èå¯ä»¥å°<span class="math inline">\(\mathbf{r}=\mathbf{r}(t)\)</span> çä½<span class="math inline">\(\mathbf{r}\)</span> æ¯éè¿ä¸­é´åé<span class="math inline">\(s\)</span>èæä¸ºæ¶é´<span class="math inline">\(t\)</span>çä¸ä¸ªå¤åå½æ°ï¼äºæ¯ç±å¤åå½æ°çæ±å¯¼å¬å¼æï¼</p>
<p></p><div class="math display">\[\frac{d{\mathbf{r}}}{dt}=\frac{d{\mathbf{r}}}{ds}\cdot\frac{ds}{dt} \tag{1.4.32}
\]</div><p></p><p>ç¢ä¸­<span class="math inline">\(\frac{d{\mathbf{r}}}{ds}\)</span>çå ä½æä¹ï¼å¦åæ®µæç¤ºï¼æ¯å¨ç¹<span class="math inline">\(M\)</span>å¤çä¸ä¸ªåååä½åéï¼æå<span class="math inline">\(s\)</span>å¢å¤§çæ¹åï¼å æ­¤ï¼å®è¡¨ç¤ºå¨ç¹<span class="math inline">\(M\)</span>å¤è´¨ç¹è¿å¨çæ¹åï¼ç°å¨ä»¥<span class="math inline">\(\boldsymbol{\tau}\)</span> è¡¨ç¤ºä¹ï¼èå¼ä¸­ç$$</p>
<p></p><div class="math display">\[\frac{d{\mathbf{r}}}{dt}=v\boldsymbol{\tau} \tag{1.4.33}
\]</div><p></p><p>ç±æ­¤å¯è§ï¼å¯¼ç¢<span class="math inline">\(\frac{d\mathbf{r}}{dt}\)</span> è¡¨ç¤ºåºäºè´¨ç¹<span class="math inline">\(M\)</span>è¿å¨çéåº¦å¤§å°åæ¹åï¼å èå®å°±æ¯è´¨ç¹<span class="math inline">\(M\)</span>è¿å¨çéåº¦ç¢é<span class="math inline">\(\boldsymbol{v}\)</span>  ,å³</p>
<p></p><div class="math display">\[\boldsymbol{v}=\frac{d\mathbf{r}}{dt} \tag{1.4.33}
\]</div><p></p><p>è¥å®ä¹äºé¶å¯¼ç¢<span class="math inline">\(\mathbf{w}\)</span></p>
<p></p><div class="math display">\[\mathbf{w}=\frac{d^2\mathbf{r}}{dt^2}=\frac{d}{dt}\left(\frac{d{\mathbf{r}}}{dt}\right) \tag{1.4.34}
\]</div><p></p><p>å<span class="math inline">\(\mathbf{w}\)</span>ä¸ºè´¨ç¹<span class="math inline">\(\mathbf{M}\)</span>è¿å¨çå éåº¦ç¢éã</p>
<p>â</p>
<h2 id="15-ç¢æ§å½æ°çç§¯å">1.5 ç¢æ§å½æ°çç§¯å</h2>
<p>â         ç¢æ§å½æ°çç§¯ååæ°æ§å½æ°çç§¯åç±»ä¼¼ï¼ä¹æä¸å®ç§¯ååå®ç§¯åä¸¤ç§ï¼ç°å¨åè¿°äºä¸ï¼</p>
<h3 id="151--ç¢æ§å½æ°çä¸å®ç§¯å">1.5.1  ç¢æ§å½æ°çä¸å®ç§¯å</h3>
<p>â         <strong>å®ä¹</strong> è¥å¨<span class="math inline">\(t\)</span>çæä¸ªåºé´<span class="math inline">\(I\)</span>ä¸ï¼æ <span class="math inline">\(\mathbf{B^{'}}(t)=\mathbf{A}(t)\)</span>ï¼åç§°<span class="math inline">\(\mathbf{B}(t)\)</span>ä¸º<span class="math inline">\(\mathbf{A}(t)\)</span>å¨åºé´ä¸çä¸ä¸ª<strong>åå½æ°</strong>ãå¨åºé´<span class="math inline">\(I\)</span>ä¸ï¼<span class="math inline">\(\mathbf{A}(t)\)</span>çåå½æ°å¨ä½ï¼å å<span class="math inline">\(\mathbf{A}(t)\)</span>çåå½æ°çå¨ä½ï¼å«å<span class="math inline">\(\mathbf{A}(t)\)</span>å¨<span class="math inline">\(I\)</span>ä¸çä¸å®ç§¯åï¼è®°ä½</p>
<p></p><div class="math display">\[\int{\mathbf{A}(t)}dt \tag{1.5.1}
\]</div><p></p><p>è¿ä¸ªå®ä¹åæ°æ§å½æ°çä¸å®ç§¯åå®ä¹å®å¨ç±»ä¼¼ãæåæ°æ§å½æ°ä¸æ ·ï¼è¥å·²ç¥<span class="math inline">\(\mathbf{B}(t)\)</span>åæ¯<span class="math inline">\(\mathbf{A}(t)\)</span> çä¸ä¸ªåå½æ°ï¼åæ</p>
<p></p><div class="math display">\[\int{\mathbf{A}(t)}dt=\mathbf{B}(t)+\mathbf{C} \tag{1.5.2}
\]</div><p></p><p>èä¸ï¼æ°æ§å½æ°ä¸å®ç§¯åçåºæ¬æ§è´¨å¯¹ç¢æ§å½æ°æ¥è¯´ä¹ä»ç¶æç«ãä¾å¦ï¼</p>
<p></p><div class="math display">\[\begin{equation}
\int k\mathbf{A}(t)dt=k\int\mathbf{A}(t)dt \tag{1.5.3}
\end{equation}
\]</div><p></p><p></p><div class="math display">\[\begin{equation}
\int [\mathbf{A}(t)+\mathbf{B}(t)]dt=\int\mathbf{A}(t)dt+\int\mathbf{B}(t)dt \tag{1.5.4}
\end{equation}
\]</div><p></p><p></p><div class="math display">\[\begin{equation}
\int u(t)\mathbf{a}dt=\mathbf{a}\int u(t)dt \tag{1.5.5}
\end{equation}
\]</div><p></p><p></p><div class="math display">\[\int\mathbf{a}\cdot\mathbf{A}(t)dt=\mathbf{a}\cdot\int \mathbf{A}(t)dt \tag{1.5.6}
\]</div><p></p><p></p><div class="math display">\[\int \mathbf{a}\times\mathbf{A}(t)dt=\mathbf{a}\times\int\mathbf{A}(t)dt \tag{1.5.7}
\]</div><p></p><p>å¶ä¸­ï¼<span class="math inline">\(k\)</span>ä¸ºéé¶å¸¸æ°ï¼<span class="math inline">\(\mathbf{a}\)</span> ä¸ºéé¶å¸¸ç¢éã</p>
<p>â       æ®æ­¤ï¼è¥å·²ç¥ç¢æ§å½æ°çåéè¡¨è¾¾å¼<span class="math inline">\(\mathbf{A}(t)=A_x(t)\boldsymbol{i}+A_y(t)\boldsymbol{j}+A_z(t)\boldsymbol{k}\)</span> ,æ ¹æ®å¼(1.6.3)åå¼(1.6.4)å¯ç¥ï¼</p>
<p></p><div class="math display">\[\int\mathbf{A}(t)dt=\boldsymbol{i}\int{A_x(t)}dt+\boldsymbol{j}\int{A_y(t)}dt+\boldsymbol{k}\int{A_z(t)}dt \tag{1.5.8}
\]</div><p></p><p>æ­¤å¼ææ±ä¸ä¸ªç¢æ§å½æ°çä¸å®ç§¯åï¼å½çº³ä¸ºæ±ä¸ä¸ªä¸ä¸ªæ°æ§å½æ°çä¸å®ç§¯åã</p>
<p>â      æ­¤å¤ï¼æ°æ§å½æ°çæ¢åç§¯åæ³ä¸åé¨ç§¯åæ³äº¦éç¨äºç¢æ§å½æ°ãä½ç±äºä¸¤ä¸ªç¢éçç¢éç§¯æä»äºè´äº¤æ¢å¾ï¼å³<span class="math inline">\(\mathbf{A}\times\mathbf{B}=-(\mathbf{B}\times\mathbf{A})\)</span>, æå¶åé¨ç§¯åå¬å¼çåºç¨ç«¯åºä¸ºä¸¤é¡¹ç¸å ï¼</p>
<p></p><div class="math display">\[\int\mathbf{A}\times\mathbf{B}^{\prime}dt=\mathbf{A}\times \mathbf{B}+\int \mathbf{B}\times\mathbf{A}^{\prime}dt \tag{1.5.9}
\]</div><p></p><h3 id="152--ç¢æ§å½æ°çå®ç§¯å">1.5.2  ç¢æ§å½æ°çå®ç§¯å</h3>
<p><strong>å®ä¹</strong>   è®¾ç¢æ§å½æ° <span class="math inline">\(\mathbf{A}(t)\)</span>å¨åºé´<span class="math inline">\([T_1,T_2]\)</span> ä¸è¿ç»­ï¼å <span class="math inline">\(\mathbf{A}(t)\)</span>å¨<span class="math inline">\([T_1,T_2]\)</span> ä¸çå®ç§¯åæ¯æä¸é¢å½¢å¼çæéï¼</p>
<p></p><div class="math display">\[\int_{T_1}^{T_2}\mathbf{A}(t)dt=\lim_{\lambda\rightarrow{0}}\sum_{i=1}^{n}\mathbf{A}(\xi_{i})\Delta{t_i} \tag{1.5.10}
\]</div><p></p><p>å¶ä¸­ <span class="math inline">\(T_1=t_0&lt;t_1&lt;t_2&lt;...&lt;t_n=T_2\)</span>ï¼<span class="math inline">\(\xi_i\)</span>ä¸ºåºé´<span class="math inline">\([t_{i-1},t_i]\)</span>ä¸çä¸ç¹ï¼<span class="math inline">\(\Delta{t_i}=t_i-t_{i-1}\)</span>; <span class="math inline">\(\lambda=max{\Delta{t_i}}\)</span>,<span class="math inline">\(i=1,2,3,...,n\)</span>ã</p>
<p>â       å¯ä»¥çåºï¼ç¢æ§å½æ°çå®ç§¯åæ¦å¿µä¹åæ°æ§å½æ°çå®ç§¯åå®å¨ç±»ä¼¼ãå æ­¤ï¼ä¹å·æåæ°æ§å½æ°çå®ç§¯åç¸åºçåºæ¬æ§è´¨ï¼ä¾å¦ï¼</p>
<p></p><div class="math display">\[\int_{T_1}^{T_2}\mathbf{A}(t)dt=\mathbf{B}(T_2)-\mathbf{B}(T_1) \tag{1.5.11}
\]</div><p></p><p>å¶ä»æ§è´¨å°±ä¸ä¸ä¸åä¸¾äºã</p>
<p>â       æ­¤å¤ï¼ç±»ä¼¼äºï¼1.6.11ï¼å¼ï¼æ±ç¢æ§å½æ°çå®ç§¯åä¹å¯ä»¥å½çº³äºæ±ä¸ä¸ªæ°æ§å½æ°çå®ç§¯åï¼æ¢æï¼</p>
<p></p><div class="math display">\[\int_{T_1}^{T_2}\mathbf{A}(t)dt=\boldsymbol{i}\int_{T_1}^{T_2}A_x(t)dt+\boldsymbol{j}\int_{T_1}^{T_2}A_y(t)dt+\boldsymbol{k}\int_{T_1}^{T_2}A_z(t)dt \tag{1.5.12}
\]</div><p></p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-04 11:10">2026-01-04 11:10</span>&nbsp;
<a href="https://www.cnblogs.com/GeophysicsWorker">GeoFXR</a>&nbsp;
éè¯»(<span id="post_view_count">23</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19436590);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19436590', targetLink: 'https://www.cnblogs.com/GeophysicsWorker/p/19436590', title: 'åºè®ºç¬è®°ï¼ä¸ï¼ç¢éåæåºç¡' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Zodï¼TypeScript ç±»åå®å«ä¸æ°æ®éªè¯ ]]></title>
    <link>https://www.cnblogs.com/guangzan/p/19350726</link>
    <guid>d6d727589279565239d0969780e70f6a</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/guangzan/p/19350726" title="åå¸äº 2026-01-04 10:32">
    <span role="heading" aria-level="2">Zodï¼TypeScript ç±»åå®å«ä¸æ°æ®éªè¯</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>æè§è¿è®¸å¤å ä¸ºè¿è¡æ¶æ°æ®ä¸å¹éèå¯¼è´çå´©æºï¼ä¹æ¾åè¿æ æ°é²å¾¡æ§ä»£ç å <code>any</code> æ­è¨ï¼åå ðãTypeScript çç±»åå®å¨æ¬æ¥å°±ä¸è¯¥æ­¢æ­¥äºç¼è¯æãç´å°éè§ Zodï¼Zod ä¸ä»æ¯ä¸ä¸ªéªè¯åºï¼å®ä¸º TypeScript å¸¦æ¥è¿è¡æ¶å®å¨ï¼æ¯ç®åæä¼éãæå½»åºçè§£å³æ¹æ¡ã</p>
<h2 id="æä»¬ä¸ºä½éè¦-zod">æä»¬ä¸ºä½éè¦ Zodï¼</h2>
<p>TypeScript æè®©äººä¸ç¾çå°æ¹å¨äºç¼è¯æ¶ç±»åæ£æ¥ï¼ä½è¿ä¹æ¯å®çæå¤§è°è¨ï¼å ä¸ºç±»åå¨è¿è¡æ¶å½»åºæ¶å¤±ï¼ä½ éè¦å°å¿å°å¿åå°å¿ï¼ä½¿ç¨ TypeScript å¹¶ä¸ä»£è¡¨ç±»åå®å¨ã</p>
<pre><code class="language-ts">interface User {
  name: string;
  age: number;
  role: 'admin' | 'user';
}

fetch('/api/user').then(res =&gt; res.json()).then((data: User) =&gt; {
  // ç¼è¯éè¿ï¼ä½å¦æ data.role è¿åçæ¯ "administrator"ï¼è¿è¡ä¼æ¥é
  console.log(data.role.toUpperCase());
});
</code></pre>
<p>è Zod çç­æ¡æ¯ï¼åªå®ä¹ä¸æ¬¡ Schemaï¼æ¢å¾å°è¿è¡æ¶éªè¯ï¼åå¾å°å®ç¾ç TypeScript ç±»åã</p>
<pre><code class="language-ts">const UserSchema = z.object({
  name: z.string(),
  age: z.number(),
  role: z.enum(['admin', 'user']),
});

type User = z.infer&lt;typeof UserSchema&gt;;
</code></pre>
<p>éè¿ Schema æ¨æ­åºå®ç¾ç±»å Userï¼æ éäºæ¬¡å£°æãè¿æ ·ï¼ UserSchema ç¨äºè¿è¡æ¶éªè¯ï¼User ç¨äºç±»åæ¨æ­ã</p>
<h2 id="zod-å¥é¨">Zod å¥é¨</h2>
<pre><code class="language-bash">npm install zod
</code></pre>
<pre><code class="language-ts">import { z } from 'zod';

// åºç¡ç±»å
const StringSchema = z.string();
const NumberSchema = z.number().int().positive();
</code></pre>
<p>æ ¸å¿ APIï¼parse å safeParseï¼æå»ºè®®ä¼åä½¿ç¨ <code>.safeParse()</code>ã</p>
<pre><code class="language-ts">const schema = z.string();

try {
  const result = schema.parse(123);
  console.log(result);
} catch (error) {
  console.error('éªè¯å¤±è´¥:', error.errors);
}
</code></pre>
<p>parse æåº ZodError, ä½ éè¦éè¿ <code>try catch</code> æè·éè¯¯ï¼å¦åå¯¼è´ç¨åºå´©æºã</p>
<pre><code class="language-ts">const schema = z.string();
const result = schema.safeParse(123);

if (result.success) {
  console.log('éªè¯æå:', result.data);
} else {
  console.log('éªè¯å¤±è´¥:', result.error.errors);
}
</code></pre>
<p>safeParse è¿å <code>{ success: true, data: T }</code> æ <code>{ success: false, error: ZodError }</code>ï¼ä½ å¯ä»¥éè¿ success å¤æ­æ¯å¦éªè¯æåï¼ç¶åéè¿ data è·åéªè¯åçæ°æ®ï¼æèéè¿ <code>error.errors</code> è·åéè¯¯ä¿¡æ¯, è¿æ ·ä½ å¯ä»¥ä¼éå°å¤çéè¯¯ã</p>
<h2 id="æå»ºå¤ææ°æ®æ¨¡å">æå»ºå¤ææ°æ®æ¨¡å</h2>
<pre><code class="language-ts">const AddressSchema = z.object({
  street: z.string(),
  city: z.string(),
  zipCode: z.string().regex(/^\d{5}$/),
});

const UserSchema = z.object({
  id: z.string().uuid(),
  name: z.string().min(2).max(50),
  email: z.string().email(),
  age: z.number().int().min(13).max(120),
  address: AddressSchema.optional(), // å¯éåµå¥å¯¹è±¡
  tags: z.array(z.string()).default([]), // é»è®¤å¼
  role: z.enum(['admin', 'user', 'moderator']),
  status: z.enum(['active', 'inactive']).default('active'),
});
</code></pre>
<p>ç»åæå·§ï¼è¿äºæ¯ææå¸¸ç¨çï¼</p>
<p><code>.extend()</code> æ¯ Zod æè¢«ä½ä¼°çç¹æ§ä¹ä¸ãå®è®©ä½ è½ä»¥é¢åå¯¹è±¡çæ¹å¼æå»º Schema ä½ç³»ï¼æ¯ interface ç»§æ¿æ´å®å¨ï¼å ä¸ºè¿è¡æ¶éªè¯ä¹ä¼ç»§æ¿ã</p>
<pre><code class="language-ts">// æ©å±
const AdminSchema = UserSchema.extend({
  permissions: z.array(z.string()),
});
</code></pre>
<p>æ¯è¾å¸¸è§çæ¯ï¼å®ç°æ¥è¯¢æ¥å£çåé¡µæ¥è¯¢ Schemaï¼åé¡µæ¥è¯¢ Schema åå« page å pageSize å­æ®µï¼èªå¶ä» Schema å¯ä»¥ç»§æ¿åé¡µæ¥è¯¢ Schema å¹¶æ·»å å¶ä»å­æ®µã</p>
<pre><code class="language-ts">const PageSchema = z.object({
  page: z.number().min(1).default(1),
  pageSize: z.number().min(1).max(100).default(10),
});

const UserPageSchema = PageSchema.extend({
  name: z.string().min(2).max(50),
});

type UserPage = z.infer&lt;typeof UserPageSchema&gt;;
</code></pre>
<p>åå¹¶, ä¼åçº§åèè¦çåèã</p>
<pre><code class="language-ts">const MergedSchema = UserSchema.merge(z.object({
  role: z.literal('admin'), // å¼ºå¶è¦ç
}));
</code></pre>
<p>äº¤éã</p>
<pre><code class="language-ts">const IntersectionSchema = z.intersection(UserSchema, z.object({
  isVerified: z.boolean(),
}));
</code></pre>
<h2 id="è¿é¶æ¨¡å¼ä¸ç²¾ç»æ ¡éª">è¿é¶æ¨¡å¼ä¸ç²¾ç»æ ¡éª</h2>
<p>å¯è¾¨è¯èåï¼Discriminated Unionï¼ï¼æ¯å¦æä»¬ç¨å®æ¥å¤ç Redux Actionã</p>
<blockquote>
<p>å¯è¾¨è¯èåï¼Discriminated Unionï¼ï¼ä¹ç§°ä¸ºæ ç­¾èåï¼Tagged Unionï¼æä»£æ°æ°æ®ç±»åï¼Algebraic Data Typeï¼ï¼æ¯ä¸ç§é«çº§ç±»åç³»ç»ç¹æ§ï¼ç¨äºè¡¨ç¤ºå¯è½æ¯å¤ç§ä¸åç±»åä¹ä¸çå¼ã</p>
</blockquote>
<pre><code class="language-ts">const ActionSchema = z.discriminatedUnion('type', [
  z.object({ type: z.literal('INCREMENT'), payload: z.number() }),
  z.object({ type: z.literal('DECREMENT'), payload: z.number() }),
  z.object({ type: z.literal('SET_USER'), payload: UserSchema }),
]);

type Action = z.infer&lt;typeof ActionSchema&gt;;
</code></pre>
<p><code>z.discriminatedUnion</code> æ¯æå¨å <code>.or()</code> æ´æ¸æ°ï¼TypeScript çªåï¼narrowingï¼ä¹æ´å®ç¾ã</p>
<p>å­ç¬¦ä¸²é«çº§æ ¡éª</p>
<pre><code class="language-ts">z.string()
  .min(8, 'è³å°8ä½')
  .regex(/[A-Z]/, 'å¿é¡»å«å¤§åå­æ¯')
  .regex(/[a-z]/, 'å¿é¡»å«å°åå­æ¯')
  .regex(/[0-9]/, 'å¿é¡»å«æ°å­')
  .regex(/[^A-Za-z0-9]/, 'å¿é¡»å«ç¹æ®å­ç¬¦');
</code></pre>
<p>éè¿ Transform éªè¯åèªå¨è½¬æ¢ï¼è¿å¤ªæ£äºï¼æ¯å¦å restful æ¥å£æ¶ï¼æä»¬å¸æ Query id æ¯ number ç±»åï¼ä½æ¯ä¼ å¥ string ç±»åï¼æä»¬å¯ä»¥åå© Transform èªå¨è½¬æ¢ä¸º number ç±»åã</p>
<pre><code class="language-ts">const IdSchema = z.string().transform(str =&gt; parseInt(str));
</code></pre>
<h2 id="æ¨æ­-typescript-ç±»å">æ¨æ­ TypeScript ç±»å</h2>
<p>ä¿®æ¹ Schemaï¼ç±»åèªå¨æ´æ°ï¼æ éæå¨æ´æ°ç±»åï¼å®ç¾åæ­¥ã</p>
<pre><code class="language-ts">type User = z.infer&lt;typeof UserSchema&gt;;
</code></pre>
<p>ä¸ TypeScript åç enum äºæä½ã</p>
<pre><code class="language-ts">enum Role {
  Admin = 'admin',
  User = 'user',
}

const RoleSchema = z.nativeEnum(Role);
</code></pre>
<h2 id="å¸¸è§åºç¨åºæ¯">å¸¸è§åºç¨åºæ¯</h2>
<h3 id="api-ååºéªè¯">API ååºéªè¯</h3>
<pre><code class="language-ts">async function apiFetch&lt;T extends z.ZodType&gt;(
  url: string,
  schema: T
): Promise&lt;z.infer&lt;T&gt;&gt; {
  const res = await fetch(url);
  const data = await res.json();
  
  const result = schema.safeParse(data);
  if (!result.success) {
    throw new Error(`APIéªè¯å¤±è´¥: ${result.error.message}`);
  }

  return result.data;
}

// ä½¿ç¨
const user = await apiFetch('/api/user', UserSchema);
</code></pre>
<h3 id="è¡¨åéªè¯">è¡¨åéªè¯</h3>
<p>ä¸ React-Hook-Form å®ç¾ç»åï¼ç±»åå®å¨ + éè¯¯ä¿¡æ¯èªå¨åæ­¥ãAI éå¸¸åæ¬¢è¿å¥æ¹æ¡ï¼AI çæçä»£ç éå¸¸ä¸å®¹æåºéã</p>
<pre><code class="language-ts">const formSchema = z.object({
  email: z.string().email('é®ç®±æ ¼å¼éè¯¯'),
  password: z.string().min(8, 'å¯ç è³å°8ä½'),
  confirm: z.string(),
}).refine(data =&gt; data.password === data.confirm, {
  message: "ä¸¤æ¬¡å¯ç ä¸ä¸è´",
  path: ["confirm"],
});

type FormData = z.infer&lt;typeof formSchema&gt;;

const { register, handleSubmit, formState: { errors } } = useForm&lt;FormData&gt;({
  resolver: zodResolver(formSchema),
});
</code></pre>
<p>ä½æ¯ï¼æä»¬æå¸¸ç¨ç antd ç Form ç»ä»¶ï¼ä¸ Zod ç»åå¹¶ä¸å®ç¾ <a href="https://github.com/ant-design/ant-design/issues/40580" target="_blank" rel="noopener nofollow">#40580</a>ãè¡¨åä¸æ¦å¤æï¼å­æ®µä¹é´çå³èæ§å°±æ´å¤äºï¼å¦æé½å¨ jsx ä¸­å¤çï¼ä»£ç çå¯è¯»æ§ãå¯ç»´æ¤æ§å°±å¤§å¤§éä½ï¼å¦ææå­æ®µçå®ä¹ä»¥åéªè¯åç¬æååºæ¥ï¼å½¢æä¸å¡å®ä½å¯¹åºçå®ä½é»è¾ï¼æ çæ´å¥½ã</p>
<p>ç¤¾åºæäººä¸ºæ­¤å®ç°äºä¸ä¸ª <a href="https://github.com/MrBr/antd-zod" target="_blank" rel="noopener nofollow">antd-zod</a> åºï¼æ¯ç®åææ¯è¾æ¨èçæ¹æ¡ã</p>
<pre><code class="language-tsx">import { createSchemaFieldRule } from 'antd-zod';

const CustomFormValidationSchema = z.object({
  fieldString: z.string(),
  fieldNumber: z.number(),
});

const rule = createSchemaFieldRule(CustomFormValidationSchema);

export function SimpleForm() {
  return (
    &lt;Form&gt;
      &lt;Form.Item label="String field" name="fieldString" rules={[rule]}&gt;
        &lt;Input/&gt;
      &lt;/Form.Item&gt;
      &lt;Form.Item label="Number field" name="fieldNumber" rules={[rule]}&gt;
        &lt;InputNumber/&gt;
      &lt;/Form.Item&gt;
      &lt;Button htmlType="submit"&gt;Submit&lt;/Button&gt;
    &lt;/Form&gt;
  );
};
</code></pre>
<h3 id="ç¯å¢åééªè¯">ç¯å¢åééªè¯</h3>
<pre><code class="language-ts">const envSchema = z.object({
  DATABASE_URL: z.string().url(),
  NODE_ENV: z.enum(['development', 'production', 'test']),
  JWT_SECRET: z.string().min(32),
});

type Env = z.infer&lt;typeof envSchema&gt;;

export const env = envSchema.parse(process.env);
</code></pre>
<p>å¯¹äºç¯å¢åéæ ¡éªææ¨èä½ ä½¿ç¨ <a href="https://github.com/t3-oss/t3-env" target="_blank" rel="noopener nofollow">t3-env</a>,ä½¿ç¨æ æçç¯å¢åéé¨ç½²åºç¨ç¨åºæ¯ä¸ä»¶éº»ç¦äºãè¿ä¸ªåå¯ä»¥å¸®å©ä½ é¿åè¿ç§æåµãå®æ¯æä½¿ç¨ä»»ä½  Standard Schema å¼å®¹éªè¯å¨ï¼å½ç¶åæ¬ Zodã</p>
<p>å®ä¹ç¯å¢åéï¼</p>
<pre><code class="language-ts">// src/env.mjs
import { createEnv } from "@t3-oss/env-nextjs"; // or core package
import { z } from "zod";

export const env = createEnv({
  /*
   * Serverside Environment variables, not available on the client.
   * Will throw if you access these variables on the client.
   */
  server: {
    DATABASE_URL: z.string().url(),
    OPEN_AI_API_KEY: z.string().min(1),
  },
  /*
   * Environment variables available on the client (and server).
   *
   * ð¡ You'll get type errors if these are not prefixed with NEXT_PUBLIC_.
   */
  client: {
    NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY: z.string().min(1),
  },
  /*
   * Due to how Next.js bundles environment variables on Edge and Client,
   * we need to manually destructure them to make sure all are included in bundle.
   *
   * ð¡ You'll get type errors if not all variables from `server` &amp; `client` are included here.
   */
  runtimeEnv: {
    DATABASE_URL: process.env.DATABASE_URL,
    OPEN_AI_API_KEY: process.env.OPEN_AI_API_KEY,
    NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY:
      process.env.NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY,
  },
});
</code></pre>
<p>ä½¿ç¨æ¶å·æèªå¨å®æåç±»åæ¨æ­åè½</p>
<pre><code class="language-ts">import { env } from "../env.mjs";

export const GET = (req: Request) =&gt; {
  const DATABASE_URL = env.DATABASE_URL;
  // use it...
};
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1501373/202512/1501373-20251215092951646-947278288.png" alt="image" width="913" height="276" loading="lazy"></p>
<h3 id="æå¡ç«¯åºç¨trpc-ç¤ºä¾">æå¡ç«¯åºç¨ï¼tRPC ç¤ºä¾</h3>
<p>tRPC æ¯ä¸ä¸ªç«¯å°ç«¯ç±»åå®å¨çæå¡ç«¯æ¡æ¶ãtRPC çæ ¸å¿é­åå°±å¨äº Zodãè¾å¥éªè¯ãç±»åæ¨æ­ãèªå¨çæå®¢æ·ç«¯ç±»åï¼å¨ç¨é¶éç½®ã</p>
<p>æå¡ç«¯å®ç°æç« åå¸æ¥å£ï¼ä½¿ç¨ Zod éªè¯è¾å¥</p>
<p><img src="https://img2024.cnblogs.com/blog/1501373/202601/1501373-20260104094555995-1536803202.png" alt="image" width="754" height="471" loading="lazy"></p>
<p>åç«¯ç±»åæ¨æ­</p>
<p><img src="https://img2024.cnblogs.com/blog/1501373/202601/1501373-20260104095551745-800796286.png" alt="image" width="664" height="204" loading="lazy"></p>
<p>ç«¯å°ç«¯ç±»åå®å¨å¯¹äº AI èªå¨è¡¥å¨åæåçæä»£ç è´¨éä¹æ¯éå¸¸æå¸®å©ç</p>
<p><img src="https://img2024.cnblogs.com/blog/1501373/202601/1501373-20260104095742062-1513470318.png" alt="image" width="589" height="209" loading="lazy"></p>
<h3 id="ai-çæç»æåæ°æ®">AI çæç»æåæ°æ®</h3>
<p>è®¸å¤è¯­è¨æ¨¡åé½è½å¤çæç»æåæ°æ®ï¼éå¸¸å®ä¹ä¸ºä½¿ç¨âJSON modesâæâtoolsâãç¶èï¼æ¨éè¦æå¨æä¾æ¨¡å¼ï¼ç¶åéªè¯çæçæ°æ®ï¼å ä¸º LLM å¯è½ä¼äº§çéè¯¯æä¸å®æ´çç»æåæ°æ®ã</p>
<p>Vercel AI SDK éè¿å¨ <a href="https://ai-sdk.dev/docs/reference/ai-sdk-core/generate-text" target="_blank" rel="noopener nofollow"><code>generateText</code></a> ä¸ä½¿ç¨ <code>output</code> å±æ§ï¼æ ååäºæ¨¡åæä¾åä¹é´çç»æåå¯¹è±¡çæã å <a href="https://ai-sdk.dev/docs/reference/ai-sdk-core/stream-text" target="_blank" rel="noopener nofollow"><code>streamText</code></a>ãæ¨å¯ä»¥ä½¿ç¨ <a href="https://ai-sdk.dev/docs/reference/ai-sdk-core/zod-schema" target="_blank" rel="noopener nofollow">Zod schemas</a>ï¼<a href="https://ai-sdk.dev/docs/reference/ai-sdk-core/valibot-schema" target="_blank" rel="noopener nofollow">Valibot</a> æ <a href="https://ai-sdk.dev/docs/reference/ai-sdk-core/json-schema" target="_blank" rel="noopener nofollow">JSON schemas</a> æ¥æå®æ¨æ³è¦çæ°æ®ç»æï¼AI æ¨¡åå°çæç¬¦åè¯¥ç»æçæ°æ®ã</p>
<p>ä½¿ç¨ <code>generateText</code> å <code>Output.object()</code> ä»æç¤ºä¸­çæç»æåæ°æ®ãè¯¥æ¨¡å¼è¿ç¨äºéªè¯çæçæ°æ®ï¼ç¡®ä¿ç±»åå®å¨åæ­£ç¡®æ§ã</p>
<pre><code class="language-ts">import { generateText, Output } from 'ai';
import { deepseek } from "@ai-sdk/deepseek";
import { z } from 'zod';

const { output } = await generateText({
  model: deepseek("deepseek-v3.1"),
  output: Output.object({
    schema: z.object({
      recipe: z.object({
        name: z.string(),
        ingredients: z.array(
          z.object({ name: z.string(), amount: z.string() }),
        ),
        steps: z.array(z.string()),
      }),
    }),
  }),
  prompt: 'çæä¸ä»½æ¬å·çé¥­é£è°±',
});
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1501373/202601/1501373-20260104102825415-1010215762.png" alt="image" width="860" height="366" loading="lazy"></p>
<h2 id="ä¸å¶ä»éªè¯åºå¯¹æ¯">ä¸å¶ä»éªè¯åºå¯¹æ¯</h2>
<table>
<thead>
<tr>
<th>åº</th>
<th>TypeScript æ¯æ</th>
<th>ç±»åæ¨æ­</th>
<th>ä½ç§¯</th>
<th>å­¦ä¹ ææ¬</th>
<th>çæ</th>
<th>æ¨èåºæ¯</th>
</tr>
</thead>
<tbody>
<tr>
<td>Zod</td>
<td>åçä¸æµ</td>
<td>å®ç¾</td>
<td>~6KB</td>
<td>ä½</td>
<td>æå¼º</td>
<td>ææ TS é¡¹ç®ï¼å¼ºçæ¨èï¼</td>
</tr>
<tr>
<td>Yup</td>
<td>é cast</td>
<td>å·®</td>
<td>~20KB</td>
<td>ä¸­</td>
<td>å¼º</td>
<td>èé¡¹ç®ãJS é¡¹ç®</td>
</tr>
<tr>
<td>Joi</td>
<td>å·®</td>
<td>æ </td>
<td>å¤§</td>
<td>ä¸­</td>
<td>å¼º</td>
<td>Node.js åç«¯</td>
</tr>
<tr>
<td>io-ts</td>
<td>å¥½ï¼FP é£æ ¼ï¼</td>
<td>å¥½</td>
<td>ä¸­</td>
<td>é«</td>
<td>å¼±</td>
<td>åæ¬¢å½æ°å¼ç¼ç¨çå¢é</td>
</tr>
<tr>
<td>AJV</td>
<td>å·®</td>
<td>æ </td>
<td>å°ï¼å¿«ï¼</td>
<td>ä¸­</td>
<td>å¼º</td>
<td>çº¯ JSON éªè¯åºæ¯</td>
</tr>
</tbody>
</table>
<h2 id="æ»ç»">æ»ç»</h2>
<p>è¿ææ¯ TypeScript åºè¯¥æçæ ·å­ã</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-04 10:32">2026-01-04 10:32</span>&nbsp;
<a href="https://www.cnblogs.com/guangzan">guangzan</a>&nbsp;
éè¯»(<span id="post_view_count">66</span>)&nbsp;
è¯è®º(<span id="post_comment_count">2</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19350726);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19350726', targetLink: 'https://www.cnblogs.com/guangzan/p/19350726', title: 'Zodï¼TypeScript ç±»åå®å«ä¸æ°æ®éªè¯' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
        </channel>
        </rss>