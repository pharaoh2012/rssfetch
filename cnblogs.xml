<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åå®¢å­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2026-01-31T16:22:48.528Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åå®¢å­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ å®ååºäºWPFå¼åçæ å°ºæ§ä»¶ï¼å«å®ä¾ä»£ç ï¼ ]]></title>
    <link>https://www.cnblogs.com/wuty/p/19559302</link>
    <guid>0bc97e521c4199592e251d1f47867a6d</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/wuty/p/19559302" title="åå¸äº 2026-01-31 22:35">
    <span role="heading" aria-level="2">å®ååºäºWPFå¼åçæ å°ºæ§ä»¶ï¼å«å®ä¾ä»£ç ï¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h2>åè¨ï¼</h2>
<p>å¨2021å¹´çæ¶åï¼æä¸ªææ½çé¡¹ç®ç¨å°äºæ å°ºçæ§ä»¶ï¼æåäºä¸ç¯å¤§æ¦å®ç°ä»£ç çåå®¢ï¼<a href="https://www.cnblogs.com/wuty/p/15580195.html">ä»¿Wordçæ¯ææ¨ªè½´ç«è½´çWPF æ å°º - wuty007 - åå®¢å­</a>ãå¨éè¾¹çå®ä¾ä»£ç éè¾¹ï¼é¼ æ æ¨ªçºµåæ ç§»å¨æ¾ç¤ºçä»£ç æ²¡æå®åãç´å°ä¸ä¸ªææä¸ªæ°´ååä¿¡æ¯æ¾æè¦æºç ãè¶çè¿æ®µæ¶é´æ­£å¨ä½¿ç¨AIç¼ç¨ï¼äºæ¯è®©AIå¸®æè¡¥åä¸ä¸ä»£ç äº</p>
<p><img src="https://img2024.cnblogs.com/blog/1063618/202601/1063618-20260131221035351-1118901133.png" alt="image" width="888" height="249" loading="lazy"></p>
<h2>ä»£ç å®åï¼&nbsp;</h2>
<p>1ãæ¬æ¬¡ä½¿ç¨çæ¯è¾è®¯CodebuddyçAIç¼ç¨æä»¶ï¼æä»¶ç»æå¦ä¸ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/1063618/202601/1063618-20260131221521902-1205357599.png" alt="image" loading="lazy"></p>
<p>&nbsp;</p>
<p>2ã2021å¹´å¼åçæ å°ºæ ¸å¿çä»£ç ï¼</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Collections.Generic;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Diagnostics;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Globalization;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Linq;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Text;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Threading.Tasks;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Windows.Controls;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Windows.Input;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Windows.Media.Media3D;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Windows.Media;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Windows.Shapes;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Windows;

</span><span style="color: rgba(0, 0, 255, 1)">namespace</span><span style="color: rgba(0, 0, 0, 1)"> RulerDemo
{
    [TemplatePart(Name </span>= <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">verticalTrackLine</span><span style="color: rgba(128, 0, 0, 1)">"</span>, Type = <span style="color: rgba(0, 0, 255, 1)">typeof</span><span style="color: rgba(0, 0, 0, 1)">(Line))]
    [TemplatePart(Name </span>= <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">horizontalTrackLine</span><span style="color: rgba(128, 0, 0, 1)">"</span>, Type = <span style="color: rgba(0, 0, 255, 1)">typeof</span><span style="color: rgba(0, 0, 0, 1)">(Line))]
    </span><span style="color: rgba(0, 0, 255, 1)">internal</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> RulerControl : Control
    {
        </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">static</span> <span style="color: rgba(0, 0, 255, 1)">readonly</span> DependencyProperty DpiProperty = DependencyProperty.Register(nameof(Dpi), <span style="color: rgba(0, 0, 255, 1)">typeof</span>(Dpi), <span style="color: rgba(0, 0, 255, 1)">typeof</span><span style="color: rgba(0, 0, 0, 1)">(RulerControl));
        </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">static</span> <span style="color: rgba(0, 0, 255, 1)">readonly</span> DependencyProperty DisplayPercentProperty = DependencyProperty.Register(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">DisplayPercent</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(0, 0, 255, 1)">typeof</span>(<span style="color: rgba(0, 0, 255, 1)">double</span>), <span style="color: rgba(0, 0, 255, 1)">typeof</span><span style="color: rgba(0, 0, 0, 1)">(RulerControl));
        </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">static</span> <span style="color: rgba(0, 0, 255, 1)">readonly</span> DependencyProperty DisplayTypeProperty = DependencyProperty.Register(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">DisplayType</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(0, 0, 255, 1)">typeof</span>(RulerDisplayType), <span style="color: rgba(0, 0, 255, 1)">typeof</span><span style="color: rgba(0, 0, 0, 1)">(RulerControl));
        </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">static</span> <span style="color: rgba(0, 0, 255, 1)">readonly</span> DependencyProperty DisplayUnitProperty = DependencyProperty.Register(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">DisplayUnit</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(0, 0, 255, 1)">typeof</span>(RulerDisplayUnit), <span style="color: rgba(0, 0, 255, 1)">typeof</span><span style="color: rgba(0, 0, 0, 1)">(RulerControl));
        </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">static</span> <span style="color: rgba(0, 0, 255, 1)">readonly</span> DependencyProperty ZeroPointProperty = DependencyProperty.Register(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ZeroPoint</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(0, 0, 255, 1)">typeof</span>(<span style="color: rgba(0, 0, 255, 1)">double</span>), <span style="color: rgba(0, 0, 255, 1)">typeof</span><span style="color: rgba(0, 0, 0, 1)">(RulerControl));

        </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
        <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> å®ä¹éææé å½æ°
        </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">static</span><span style="color: rgba(0, 0, 0, 1)"> RulerControl()
        {
            DefaultStyleKeyProperty.OverrideMetadata(</span><span style="color: rgba(0, 0, 255, 1)">typeof</span>(RulerControl), <span style="color: rgba(0, 0, 255, 1)">new</span> FrameworkPropertyMetadata(<span style="color: rgba(0, 0, 255, 1)">typeof</span><span style="color: rgba(0, 0, 0, 1)">(RulerControl)));
        }

        </span><span style="color: rgba(0, 0, 255, 1)">#region</span> å±æ§
        <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
        <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> å±å¹åè¾¨ç
        </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> Dpi Dpi
        {
            </span><span style="color: rgba(0, 0, 255, 1)">get</span> =&gt;<span style="color: rgba(0, 0, 0, 1)"> ((Dpi)GetValue(DpiProperty));
            </span><span style="color: rgba(0, 0, 255, 1)">set</span> =&gt;<span style="color: rgba(0, 0, 0, 1)"> SetValue(DpiProperty, value);
        }

        </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
        <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> è®¾ç½®0ç¹ä»åªéå¼å§
        </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">double</span><span style="color: rgba(0, 0, 0, 1)"> ZeroPoint
        {
            </span><span style="color: rgba(0, 0, 255, 1)">get</span> =&gt; ((<span style="color: rgba(0, 0, 255, 1)">double</span><span style="color: rgba(0, 0, 0, 1)">)GetValue(ZeroPointProperty));
            </span><span style="color: rgba(0, 0, 255, 1)">set</span><span style="color: rgba(0, 0, 0, 1)">
            {
                SetValue(ZeroPointProperty, value);
                InvalidateVisual();
            }
        }

        </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
        <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> æ¾ç¤ºçæ¯çï¼ç®åæ¯æ0-1çéé¡¹ï¼
        </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">double</span><span style="color: rgba(0, 0, 0, 1)"> DisplayPercent
        {
            </span><span style="color: rgba(0, 0, 255, 1)">get</span> =&gt; ((<span style="color: rgba(0, 0, 255, 1)">double</span><span style="color: rgba(0, 0, 0, 1)">)GetValue(DisplayPercentProperty));
            </span><span style="color: rgba(0, 0, 255, 1)">set</span><span style="color: rgba(0, 0, 0, 1)">
            {
                </span><span style="color: rgba(0, 0, 255, 1)">if</span> (value &gt; <span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">)
                {
                    value </span>= <span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">;
                }
                SetValue(DisplayPercentProperty, value);
                InvalidateVisual();
            }
        }

        </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
        <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> æ¾ç¤ºçç±»åï¼æä¸¾ç±»ï¼æ¯ææ¨ªåæèç«åï¼
        </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> RulerDisplayType DisplayType
        {
            </span><span style="color: rgba(0, 0, 255, 1)">get</span> =&gt;<span style="color: rgba(0, 0, 0, 1)"> ((RulerDisplayType)GetValue(DisplayTypeProperty));
            </span><span style="color: rgba(0, 0, 255, 1)">set</span> =&gt;<span style="color: rgba(0, 0, 0, 1)"> SetValue(DisplayTypeProperty, value);
        }

        </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
        <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> æ¾ç¤ºçåä½ï¼cmåpixel
        </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> RulerDisplayUnit DisplayUnit
        {
            </span><span style="color: rgba(0, 0, 255, 1)">get</span> =&gt;<span style="color: rgba(0, 0, 0, 1)"> ((RulerDisplayUnit)GetValue(DisplayUnitProperty));
            </span><span style="color: rgba(0, 0, 255, 1)">set</span> =&gt;<span style="color: rgba(0, 0, 0, 1)"> SetValue(DisplayUnitProperty, value);
        }
        </span><span style="color: rgba(0, 0, 255, 1)">#endregion</span>

        <span style="color: rgba(0, 0, 255, 1)">#region</span> å¸¸é
        <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">double</span> InchCm = <span style="color: rgba(128, 0, 128, 1)">2.54</span>; <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">ä¸è±å¯¸ä¸º2.54cm</span>
        <span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">int</span> P100StepSpanPixel = <span style="color: rgba(128, 0, 128, 1)">100</span><span style="color: rgba(0, 0, 0, 1)">;
        </span><span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">int</span> P100StepSpanCm = <span style="color: rgba(128, 0, 128, 1)">2</span><span style="color: rgba(0, 0, 0, 1)">;
        </span><span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">int</span> P100StepCountPixel = <span style="color: rgba(128, 0, 128, 1)">20</span><span style="color: rgba(0, 0, 0, 1)">;
        </span><span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">int</span> P100StepCountCm = <span style="color: rgba(128, 0, 128, 1)">20</span><span style="color: rgba(0, 0, 0, 1)">;

        </span><span style="color: rgba(0, 0, 255, 1)">#endregion</span>

        <span style="color: rgba(0, 0, 255, 1)">#region</span> åé
        <span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">double</span><span style="color: rgba(0, 0, 0, 1)"> _minStepLengthCm;
        </span><span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">double</span><span style="color: rgba(0, 0, 0, 1)"> _maxStepLengthCm;
        </span><span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">double</span><span style="color: rgba(0, 0, 0, 1)"> _actualLength;
        </span><span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> _stepSpan;
        </span><span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> _stepCount;
        </span><span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">double</span><span style="color: rgba(0, 0, 0, 1)"> _stepLength;
        </span><span style="color: rgba(0, 0, 255, 1)">private</span><span style="color: rgba(0, 0, 0, 1)"> Line _mouseVerticalTrackLine;
        </span><span style="color: rgba(0, 0, 255, 1)">private</span><span style="color: rgba(0, 0, 0, 1)"> Line _mouseHorizontalTrackLine;
        </span><span style="color: rgba(0, 0, 255, 1)">#endregion</span>

        <span style="color: rgba(0, 0, 255, 1)">#region</span> æ å°ºè¾¹æ¡å æéæ¾ç¤º
        <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">void</span><span style="color: rgba(0, 0, 0, 1)"> RaiseHorizontalRulerMoveEvent(MouseEventArgs e)
        {
            </span><span style="color: rgba(0, 0, 255, 1)">var</span> mousePoint = e.GetPosition(<span style="color: rgba(0, 0, 255, 1)">this</span><span style="color: rgba(0, 0, 0, 1)">);
            Debug.WriteLine($</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">æ°´å¹³æ å°º - é¼ æ ä½ç½®: X={mousePoint.X}, Y={mousePoint.Y}</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);

            </span><span style="color: rgba(0, 0, 255, 1)">if</span> (_mouseHorizontalTrackLine != <span style="color: rgba(0, 0, 255, 1)">null</span><span style="color: rgba(0, 0, 0, 1)">)
            {
                </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æ°´å¹³æ å°ºï¼ç§»å¨åç´è·è¸ªçº¿ï¼Xè·éé¼ æ </span>
                _mouseHorizontalTrackLine.X1 = _mouseHorizontalTrackLine.X2 =<span style="color: rgba(0, 0, 0, 1)"> mousePoint.X;
                </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Yåæ ä»0å¼å§ï¼å»¶ä¼¸è¶³å¤é¿</span>
                _mouseHorizontalTrackLine.Y1 = <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">;
                _mouseHorizontalTrackLine.Y2 </span>= <span style="color: rgba(128, 0, 128, 1)">5000</span><span style="color: rgba(0, 0, 0, 1)">;

                _mouseHorizontalTrackLine.Visibility </span>=<span style="color: rgba(0, 0, 0, 1)"> Visibility.Visible;

                Debug.WriteLine($</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">æ°´å¹³æ å°º - åç´çº¿æ´æ°: X1={_mouseHorizontalTrackLine.X1}, Y1={_mouseHorizontalTrackLine.Y1}, X2={_mouseHorizontalTrackLine.X2}, Y2={_mouseHorizontalTrackLine.Y2}, Visibility={_mouseHorizontalTrackLine.Visibility}</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
            }
        }

        </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">void</span><span style="color: rgba(0, 0, 0, 1)"> RaiseVerticalRulerMoveEvent(MouseEventArgs e)
        {
            </span><span style="color: rgba(0, 0, 255, 1)">var</span> mousePoint = e.GetPosition(<span style="color: rgba(0, 0, 255, 1)">this</span><span style="color: rgba(0, 0, 0, 1)">);
            Debug.WriteLine($</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">åç´æ å°º - é¼ æ ä½ç½®: X={mousePoint.X}, Y={mousePoint.Y}</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);

            </span><span style="color: rgba(0, 0, 255, 1)">if</span> (_mouseVerticalTrackLine != <span style="color: rgba(0, 0, 255, 1)">null</span><span style="color: rgba(0, 0, 0, 1)">)
            {
                </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> åç´æ å°ºï¼ç§»å¨æ°´å¹³è·è¸ªçº¿ï¼Yè·éé¼ æ </span>
                _mouseVerticalTrackLine.Y1 = _mouseVerticalTrackLine.Y2 =<span style="color: rgba(0, 0, 0, 1)"> mousePoint.Y;
                </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Xåæ ä»0å¼å§ï¼å»¶ä¼¸è¶³å¤é¿</span>
                _mouseVerticalTrackLine.X1 = <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">;
                _mouseVerticalTrackLine.X2 </span>= <span style="color: rgba(128, 0, 128, 1)">5000</span><span style="color: rgba(0, 0, 0, 1)">;

                _mouseVerticalTrackLine.Visibility </span>=<span style="color: rgba(0, 0, 0, 1)"> Visibility.Visible;

                Debug.WriteLine($</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">åç´æ å°º - æ°´å¹³çº¿æ´æ°: X1={_mouseVerticalTrackLine.X1}, Y1={_mouseVerticalTrackLine.Y1}, X2={_mouseVerticalTrackLine.X2}, Y2={_mouseVerticalTrackLine.Y2}, Visibility={_mouseVerticalTrackLine.Visibility}</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
            }
        }

        </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">override</span> <span style="color: rgba(0, 0, 255, 1)">void</span><span style="color: rgba(0, 0, 0, 1)"> OnApplyTemplate()
        {
            </span><span style="color: rgba(0, 0, 255, 1)">base</span><span style="color: rgba(0, 0, 0, 1)">.OnApplyTemplate();
            _mouseVerticalTrackLine </span>= GetTemplateChild(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">verticalTrackLine</span><span style="color: rgba(128, 0, 0, 1)">"</span>) <span style="color: rgba(0, 0, 255, 1)">as</span><span style="color: rgba(0, 0, 0, 1)"> Line;
            _mouseHorizontalTrackLine </span>= GetTemplateChild(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">horizontalTrackLine</span><span style="color: rgba(128, 0, 0, 1)">"</span>) <span style="color: rgba(0, 0, 255, 1)">as</span><span style="color: rgba(0, 0, 0, 1)"> Line;
           
            Debug.WriteLine($</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">OnApplyTemplateè°ç¨: _mouseVerticalTrackLine={_mouseVerticalTrackLine != null}, _mouseHorizontalTrackLine={_mouseHorizontalTrackLine != null}</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
        }
        </span><span style="color: rgba(0, 0, 255, 1)">#endregion</span>

        <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
        <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> éç»æ å°ºæ°æ®
        </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
        <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;param name="drawingContext"&gt;&lt;/param&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">protected</span> <span style="color: rgba(0, 0, 255, 1)">override</span> <span style="color: rgba(0, 0, 255, 1)">void</span><span style="color: rgba(0, 0, 0, 1)"> OnRender(DrawingContext drawingContext)
        {
            </span><span style="color: rgba(0, 0, 255, 1)">try</span><span style="color: rgba(0, 0, 0, 1)">
            {
                </span><span style="color: rgba(0, 0, 255, 1)">var</span> pen = <span style="color: rgba(0, 0, 255, 1)">new</span> Pen(<span style="color: rgba(0, 0, 255, 1)">new</span> SolidColorBrush(Colors.Black), <span style="color: rgba(128, 0, 128, 1)">0.8d</span><span style="color: rgba(0, 0, 0, 1)">);
                pen.Freeze();
                Initialize();
                GetActualLength();
                GetStep();
                </span><span style="color: rgba(0, 0, 255, 1)">base</span><span style="color: rgba(0, 0, 0, 1)">.OnRender(drawingContext);

                </span><span style="color: rgba(0, 0, 255, 1)">this</span>.BorderBrush = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> SolidColorBrush(Colors.Black);
                </span><span style="color: rgba(0, 0, 255, 1)">this</span>.BorderThickness = <span style="color: rgba(0, 0, 255, 1)">new</span> Thickness(<span style="color: rgba(128, 0, 128, 1)">0.1</span><span style="color: rgba(0, 0, 0, 1)">);
                </span><span style="color: rgba(0, 0, 255, 1)">this</span>.Background = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> SolidColorBrush(Colors.White);

                </span><span style="color: rgba(0, 0, 255, 1)">#region</span> try
                <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> double actualPx = this._actualLength / DisplayPercent;</span>
                <span style="color: rgba(0, 0, 255, 1)">var</span> currentPosition = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> Position
                {
                    CurrentStepIndex </span>= <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">,
                    Value </span>= <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">
                };

                </span><span style="color: rgba(0, 0, 255, 1)">switch</span><span style="color: rgba(0, 0, 0, 1)"> (DisplayType)
                {
                    </span><span style="color: rgba(0, 0, 255, 1)">case</span><span style="color: rgba(0, 0, 0, 1)"> RulerDisplayType.Horizontal:
                        {
                            </span><span style="color: rgba(0, 128, 0, 1)">/*</span><span style="color: rgba(0, 128, 0, 1)"> ç»å¶ååæ®µ </span><span style="color: rgba(0, 128, 0, 1)">*/</span><span style="color: rgba(0, 0, 0, 1)">
                            DrawLine(drawingContext, ZeroPoint, currentPosition, pen, </span><span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">);
                            </span><span style="color: rgba(0, 128, 0, 1)">/*</span><span style="color: rgba(0, 128, 0, 1)"> ç»å¶ååæ®µ </span><span style="color: rgba(0, 128, 0, 1)">*/</span><span style="color: rgba(0, 0, 0, 1)">
                            DrawLine(drawingContext, ZeroPoint, currentPosition, pen, </span><span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">);
                            </span><span style="color: rgba(0, 0, 255, 1)">break</span><span style="color: rgba(0, 0, 0, 1)">;
                        }
                    </span><span style="color: rgba(0, 0, 255, 1)">case</span><span style="color: rgba(0, 0, 0, 1)"> RulerDisplayType.Vertical:
                        {
                            </span><span style="color: rgba(0, 128, 0, 1)">/*</span><span style="color: rgba(0, 128, 0, 1)"> ç»å¶ååæ®µ </span><span style="color: rgba(0, 128, 0, 1)">*/</span><span style="color: rgba(0, 0, 0, 1)">
                            DrawLine(drawingContext, ZeroPoint, currentPosition, pen, </span><span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">);
                            </span><span style="color: rgba(0, 128, 0, 1)">/*</span><span style="color: rgba(0, 128, 0, 1)"> ç»å¶ååæ®µ </span><span style="color: rgba(0, 128, 0, 1)">*/</span><span style="color: rgba(0, 0, 0, 1)">
                            DrawLine(drawingContext, ZeroPoint, currentPosition, pen, </span><span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">);
                            </span><span style="color: rgba(0, 0, 255, 1)">break</span><span style="color: rgba(0, 0, 0, 1)">;
                        }
                }
                </span><span style="color: rgba(0, 0, 255, 1)">#endregion</span><span style="color: rgba(0, 0, 0, 1)">
            }
            </span><span style="color: rgba(0, 0, 255, 1)">catch</span><span style="color: rgba(0, 0, 0, 1)"> (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
        }

        </span><span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">void</span> DrawLine(DrawingContext drawingContext, <span style="color: rgba(0, 0, 255, 1)">double</span> currentPoint, Position currentPosition, Pen pen, <span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> type)
        {
            </span><span style="color: rgba(0, 0, 255, 1)">while</span> (<span style="color: rgba(0, 0, 255, 1)">true</span><span style="color: rgba(0, 0, 0, 1)">)
            {
                </span><span style="color: rgba(0, 0, 255, 1)">var</span> linePercent =<span style="color: rgba(0, 0, 0, 1)"> 0d;
                </span><span style="color: rgba(0, 0, 255, 1)">if</span> (currentPosition.CurrentStepIndex == <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">)
                {

                    </span><span style="color: rgba(0, 0, 255, 1)">var</span> formattedText = GetFormattedText((currentPosition.Value / <span style="color: rgba(128, 0, 128, 1)">10</span><span style="color: rgba(0, 0, 0, 1)">).ToString());


                    </span><span style="color: rgba(0, 0, 255, 1)">switch</span><span style="color: rgba(0, 0, 0, 1)"> (DisplayType)
                    {
                        </span><span style="color: rgba(0, 0, 255, 1)">case</span><span style="color: rgba(0, 0, 0, 1)"> RulerDisplayType.Horizontal:
                            {
                                </span><span style="color: rgba(0, 0, 255, 1)">var</span> point = <span style="color: rgba(0, 0, 255, 1)">new</span> Point(currentPoint + formattedText.Width / <span style="color: rgba(128, 0, 128, 1)">2</span>, formattedText.Height / <span style="color: rgba(128, 0, 128, 1)">3</span><span style="color: rgba(0, 0, 0, 1)">);
                                </span><span style="color: rgba(0, 0, 255, 1)">if</span> (point.X &lt; <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">)
                                {
                                    </span><span style="color: rgba(0, 0, 255, 1)">break</span><span style="color: rgba(0, 0, 0, 1)">;
                                }
                                drawingContext.DrawText(formattedText, point);
                                </span><span style="color: rgba(0, 0, 255, 1)">break</span><span style="color: rgba(0, 0, 0, 1)">;
                            }
                        </span><span style="color: rgba(0, 0, 255, 1)">case</span><span style="color: rgba(0, 0, 0, 1)"> RulerDisplayType.Vertical:
                            {
                                </span><span style="color: rgba(0, 0, 255, 1)">var</span> point = <span style="color: rgba(0, 0, 255, 1)">new</span> Point(<span style="color: rgba(0, 0, 255, 1)">this</span>.ActualWidth, currentPoint + formattedText.Height / <span style="color: rgba(128, 0, 128, 1)">2</span><span style="color: rgba(0, 0, 0, 1)">);
                                </span><span style="color: rgba(0, 0, 255, 1)">var</span> rotateTransform = <span style="color: rgba(0, 0, 255, 1)">new</span> RotateTransform(<span style="color: rgba(128, 0, 128, 1)">90</span><span style="color: rgba(0, 0, 0, 1)">, point.X, point.Y);
                                </span><span style="color: rgba(0, 0, 255, 1)">if</span> (point.Y &lt; <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">)
                                {
                                    </span><span style="color: rgba(0, 0, 255, 1)">break</span><span style="color: rgba(0, 0, 0, 1)">;
                                }
                                drawingContext.PushTransform(rotateTransform);
                                drawingContext.DrawText(formattedText, point);
                                drawingContext.Pop();
                                </span><span style="color: rgba(0, 0, 255, 1)">break</span><span style="color: rgba(0, 0, 0, 1)">;
                            }
                    }

                    linePercent </span>= (<span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)">)LinePercent.P100;
                }
                </span><span style="color: rgba(0, 0, 255, 1)">else</span> <span style="color: rgba(0, 0, 255, 1)">if</span> (IsFinalNum(currentPosition.CurrentStepIndex, <span style="color: rgba(128, 0, 128, 1)">3</span><span style="color: rgba(0, 0, 0, 1)">))
                {
                    linePercent </span>= (<span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)">)LinePercent.P30;
                }
                </span><span style="color: rgba(0, 0, 255, 1)">else</span> <span style="color: rgba(0, 0, 255, 1)">if</span> (IsFinalNum(currentPosition.CurrentStepIndex, <span style="color: rgba(128, 0, 128, 1)">5</span><span style="color: rgba(0, 0, 0, 1)">))
                {
                    linePercent </span>= (<span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)">)LinePercent.P50;
                }
                </span><span style="color: rgba(0, 0, 255, 1)">else</span> <span style="color: rgba(0, 0, 255, 1)">if</span> (IsFinalNum(currentPosition.CurrentStepIndex, <span style="color: rgba(128, 0, 128, 1)">7</span><span style="color: rgba(0, 0, 0, 1)">))
                {
                    linePercent </span>= (<span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)">)LinePercent.P30;
                }
                </span><span style="color: rgba(0, 0, 255, 1)">else</span> <span style="color: rgba(0, 0, 255, 1)">if</span> (IsFinalNum(currentPosition.CurrentStepIndex, <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">))
                {
                    linePercent </span>= (<span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)">)LinePercent.P70;
                }
                </span><span style="color: rgba(0, 0, 255, 1)">else</span><span style="color: rgba(0, 0, 0, 1)">
                {
                    linePercent </span>= (<span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)">)LinePercent.P20;
                }

                linePercent </span>= linePercent * <span style="color: rgba(128, 0, 128, 1)">0.01</span><span style="color: rgba(0, 0, 0, 1)">;

                </span><span style="color: rgba(0, 0, 255, 1)">switch</span><span style="color: rgba(0, 0, 0, 1)"> (DisplayType)
                {
                    </span><span style="color: rgba(0, 0, 255, 1)">case</span><span style="color: rgba(0, 0, 0, 1)"> RulerDisplayType.Horizontal:
                        {
                            </span><span style="color: rgba(0, 0, 255, 1)">if</span> (currentPoint &gt; <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">)
                            {
                                drawingContext.DrawLine(pen, </span><span style="color: rgba(0, 0, 255, 1)">new</span> Point(currentPoint, <span style="color: rgba(128, 0, 128, 1)">0</span>), <span style="color: rgba(0, 0, 255, 1)">new</span> Point(currentPoint, <span style="color: rgba(0, 0, 255, 1)">this</span>.ActualHeight *<span style="color: rgba(0, 0, 0, 1)"> linePercent));
                            }

                            </span><span style="color: rgba(0, 0, 255, 1)">if</span> (type == <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">)
                            {
                                currentPoint </span>= currentPoint -<span style="color: rgba(0, 0, 0, 1)"> _stepLength;
                                currentPosition.CurrentStepIndex</span>--<span style="color: rgba(0, 0, 0, 1)">;

                                </span><span style="color: rgba(0, 0, 255, 1)">if</span> (currentPosition.CurrentStepIndex &lt; <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">)
                                {
                                    currentPosition.CurrentStepIndex </span>= _stepCount - <span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">;
                                    currentPosition.Value </span>= GetNextStepValue(currentPosition.Value, _stepSpan, <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">);
                                }
                                </span><span style="color: rgba(0, 0, 255, 1)">else</span> <span style="color: rgba(0, 0, 255, 1)">if</span> (currentPosition.CurrentStepIndex == <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">)
                                {
                                    </span><span style="color: rgba(0, 0, 255, 1)">if</span> (currentPosition.Value % _stepSpan != <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">)
                                    {
                                        currentPosition.Value </span>= GetNextStepValue(currentPosition.Value, _stepSpan, <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">);
                                    }
                                }

                                </span><span style="color: rgba(0, 0, 255, 1)">if</span> (currentPoint &lt;= <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">)
                                {
                                    </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)">;
                                }
                            }
                            </span><span style="color: rgba(0, 0, 255, 1)">else</span><span style="color: rgba(0, 0, 0, 1)">
                            {
                                currentPoint </span>= currentPoint +<span style="color: rgba(0, 0, 0, 1)"> _stepLength;
                                currentPosition.CurrentStepIndex</span>++<span style="color: rgba(0, 0, 0, 1)">;

                                </span><span style="color: rgba(0, 0, 255, 1)">if</span> (currentPosition.CurrentStepIndex &gt;=<span style="color: rgba(0, 0, 0, 1)"> _stepCount)
                                {
                                    currentPosition.CurrentStepIndex </span>= <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">;
                                    currentPosition.Value </span>= GetNextStepValue(currentPosition.Value, _stepSpan, <span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">);
                                }

                                </span><span style="color: rgba(0, 0, 255, 1)">if</span> (currentPoint &gt;=<span style="color: rgba(0, 0, 0, 1)"> _actualLength)
                                {
                                    </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)">;
                                }
                            }
                            </span><span style="color: rgba(0, 0, 255, 1)">break</span><span style="color: rgba(0, 0, 0, 1)">;
                        }
                    </span><span style="color: rgba(0, 0, 255, 1)">case</span><span style="color: rgba(0, 0, 0, 1)"> RulerDisplayType.Vertical:
                        {
                            </span><span style="color: rgba(0, 0, 255, 1)">if</span> (currentPoint &gt; <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">)
                            {
                                drawingContext.DrawLine(pen, </span><span style="color: rgba(0, 0, 255, 1)">new</span> Point(<span style="color: rgba(128, 0, 128, 1)">0</span>, currentPoint), <span style="color: rgba(0, 0, 255, 1)">new</span> Point(<span style="color: rgba(0, 0, 255, 1)">this</span>.ActualWidth *<span style="color: rgba(0, 0, 0, 1)"> linePercent, currentPoint));
                            }
                            </span><span style="color: rgba(0, 0, 255, 1)">if</span> (type == <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">)
                            {
                                currentPoint </span>= currentPoint -<span style="color: rgba(0, 0, 0, 1)"> _stepLength;
                                currentPosition.CurrentStepIndex</span>--<span style="color: rgba(0, 0, 0, 1)">;

                                </span><span style="color: rgba(0, 0, 255, 1)">if</span> (currentPosition.CurrentStepIndex &lt; <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">)
                                {
                                    currentPosition.CurrentStepIndex </span>= _stepCount - <span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">;
                                    currentPosition.Value </span>= GetNextStepValue(currentPosition.Value, _stepSpan, <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">);
                                }
                                </span><span style="color: rgba(0, 0, 255, 1)">else</span> <span style="color: rgba(0, 0, 255, 1)">if</span> (currentPosition.CurrentStepIndex == <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">)
                                {
                                    </span><span style="color: rgba(0, 0, 255, 1)">if</span> (currentPosition.Value % _stepSpan != <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">)
                                    {
                                        currentPosition.Value </span>= GetNextStepValue(currentPosition.Value, _stepSpan, <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">);
                                    }
                                }

                                </span><span style="color: rgba(0, 0, 255, 1)">if</span> (currentPoint &lt;= <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">)
                                {
                                    </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)">;
                                }
                            }
                            </span><span style="color: rgba(0, 0, 255, 1)">else</span><span style="color: rgba(0, 0, 0, 1)">
                            {
                                currentPoint </span>= currentPoint +<span style="color: rgba(0, 0, 0, 1)"> _stepLength;
                                currentPosition.CurrentStepIndex</span>++<span style="color: rgba(0, 0, 0, 1)">;

                                </span><span style="color: rgba(0, 0, 255, 1)">if</span> (currentPosition.CurrentStepIndex &gt;=<span style="color: rgba(0, 0, 0, 1)"> _stepCount)
                                {
                                    currentPosition.CurrentStepIndex </span>= <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">;
                                    currentPosition.Value </span>= GetNextStepValue(currentPosition.Value, _stepSpan, <span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">);
                                }

                                </span><span style="color: rgba(0, 0, 255, 1)">if</span> (currentPoint &gt;=<span style="color: rgba(0, 0, 0, 1)"> _actualLength)
                                {
                                    </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)">;
                                }
                            }
                            </span><span style="color: rgba(0, 0, 255, 1)">break</span><span style="color: rgba(0, 0, 0, 1)">;
                        }
                }
            }
        }

        </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
        <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> è·åä¸ä¸ä¸ªæ­¥é¿å¼
        </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
        <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;param name="value"&gt;</span><span style="color: rgba(0, 128, 0, 1)">èµ·å§å¼</span><span style="color: rgba(128, 128, 128, 1)">&lt;/param&gt;</span>
        <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;param name="times"&gt;</span><span style="color: rgba(0, 128, 0, 1)">è·¨åº¦</span><span style="color: rgba(128, 128, 128, 1)">&lt;/param&gt;</span>
        <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;param name="type"&gt;</span><span style="color: rgba(0, 128, 0, 1)">åæ®µç±»åï¼åä¸ºååæ®µãååæ®µ</span><span style="color: rgba(128, 128, 128, 1)">&lt;/param&gt;</span>
        <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;returns&gt;&lt;/returns&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">int</span> GetNextStepValue(<span style="color: rgba(0, 0, 255, 1)">int</span> value, <span style="color: rgba(0, 0, 255, 1)">int</span> times, <span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> type)
        {
            </span><span style="color: rgba(0, 0, 255, 1)">if</span> (type == <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">)
            {
                </span><span style="color: rgba(0, 0, 255, 1)">do</span><span style="color: rgba(0, 0, 0, 1)">
                {
                    value</span>--<span style="color: rgba(0, 0, 0, 1)">;
                }
                </span><span style="color: rgba(0, 0, 255, 1)">while</span> (value % times != <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">);
            }
            </span><span style="color: rgba(0, 0, 255, 1)">else</span><span style="color: rgba(0, 0, 0, 1)">
            {
                </span><span style="color: rgba(0, 0, 255, 1)">do</span><span style="color: rgba(0, 0, 0, 1)">
                {
                    value</span>++<span style="color: rgba(0, 0, 0, 1)">;
                }
                </span><span style="color: rgba(0, 0, 255, 1)">while</span> (value % times != <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">);
            }
            </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> (value);
        }

        [Obsolete]
        </span><span style="color: rgba(0, 0, 255, 1)">private</span> FormattedText GetFormattedText(<span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)"> text)
        {
            </span><span style="color: rgba(0, 0, 255, 1)">return</span> (<span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> FormattedText(text,
                          </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">CultureInfo.GetCultureInfo("zh-cn"),</span>
                          CultureInfo.GetCultureInfo(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">en-us</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">),
                          FlowDirection.LeftToRight,
                          </span><span style="color: rgba(0, 0, 255, 1)">new</span> Typeface(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">å®ä½</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">),
                          </span><span style="color: rgba(128, 0, 128, 1)">12</span><span style="color: rgba(0, 0, 0, 1)">,
                          Brushes.Black));
        }

        </span><span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">bool</span> IsFinalNum(<span style="color: rgba(0, 0, 255, 1)">int</span> value, <span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> finalNum)
        {
            </span><span style="color: rgba(0, 0, 255, 1)">var</span> valueStr =<span style="color: rgba(0, 0, 0, 1)"> value.ToString();
            </span><span style="color: rgba(0, 0, 255, 1)">if</span> (valueStr.Substring(valueStr.Length - <span style="color: rgba(128, 0, 128, 1)">1</span>, <span style="color: rgba(128, 0, 128, 1)">1</span>) ==<span style="color: rgba(0, 0, 0, 1)"> finalNum.ToString())
            {
                </span><span style="color: rgba(0, 0, 255, 1)">return</span> (<span style="color: rgba(0, 0, 255, 1)">true</span><span style="color: rgba(0, 0, 0, 1)">);
            }
            </span><span style="color: rgba(0, 0, 255, 1)">return</span> (<span style="color: rgba(0, 0, 255, 1)">false</span><span style="color: rgba(0, 0, 0, 1)">);
        }

        </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
        <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> åå§åè·åå±å¹çDPI
        </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">void</span><span style="color: rgba(0, 0, 0, 1)"> Initialize()
        {
            </span><span style="color: rgba(0, 0, 255, 1)">var</span> dpi = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> Dpi();
            dpi.DpiX </span>=<span style="color: rgba(0, 0, 0, 1)"> Dpi.DpiX;
            dpi.DpiY </span>=<span style="color: rgba(0, 0, 0, 1)"> Dpi.DpiY;
            </span><span style="color: rgba(0, 0, 255, 1)">if</span> (Dpi.DpiX == <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">)
            {
                dpi.DpiX </span>= <span style="color: rgba(128, 0, 128, 1)">96</span><span style="color: rgba(0, 0, 0, 1)">;
            }

            </span><span style="color: rgba(0, 0, 255, 1)">if</span> (Dpi.DpiY == <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">)
            {
                dpi.DpiY </span>= <span style="color: rgba(128, 0, 128, 1)">96</span><span style="color: rgba(0, 0, 0, 1)">;
            }

            Dpi </span>=<span style="color: rgba(0, 0, 0, 1)"> dpi;
            _minStepLengthCm </span>= <span style="color: rgba(128, 0, 128, 1)">0.1</span><span style="color: rgba(0, 0, 0, 1)">;
            _maxStepLengthCm </span>= <span style="color: rgba(128, 0, 128, 1)">0.3</span><span style="color: rgba(0, 0, 0, 1)">;

            </span><span style="color: rgba(0, 0, 255, 1)">if</span> (DisplayPercent == <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">)
                DisplayPercent </span>= <span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">;

            </span><span style="color: rgba(0, 0, 255, 1)">switch</span><span style="color: rgba(0, 0, 0, 1)"> (DisplayUnit)
            {
                </span><span style="color: rgba(0, 0, 255, 1)">case</span><span style="color: rgba(0, 0, 0, 1)"> RulerDisplayUnit.Pixel:
                    {
                        _stepSpan </span>=<span style="color: rgba(0, 0, 0, 1)"> P100StepSpanPixel;
                        _stepCount </span>=<span style="color: rgba(0, 0, 0, 1)"> P100StepCountPixel;
                        </span><span style="color: rgba(0, 0, 255, 1)">break</span><span style="color: rgba(0, 0, 0, 1)">;
                    }
                </span><span style="color: rgba(0, 0, 255, 1)">case</span><span style="color: rgba(0, 0, 0, 1)"> RulerDisplayUnit.Cm:
                    {
                        _stepSpan </span>=<span style="color: rgba(0, 0, 0, 1)"> P100StepSpanCm;
                        _stepCount </span>=<span style="color: rgba(0, 0, 0, 1)"> P100StepCountCm;
                        </span><span style="color: rgba(0, 0, 255, 1)">break</span><span style="color: rgba(0, 0, 0, 1)">;
                    }
            }
            </span><span style="color: rgba(0, 0, 255, 1)">var</span> width = <span style="color: rgba(128, 0, 128, 1)">15</span><span style="color: rgba(0, 0, 0, 1)">;
            </span><span style="color: rgba(0, 0, 255, 1)">switch</span><span style="color: rgba(0, 0, 0, 1)"> (DisplayType)
            {
                </span><span style="color: rgba(0, 0, 255, 1)">case</span><span style="color: rgba(0, 0, 0, 1)"> RulerDisplayType.Horizontal:
                    {
                        </span><span style="color: rgba(0, 0, 255, 1)">if</span> (<span style="color: rgba(0, 0, 255, 1)">this</span>.ActualHeight == <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">)
                        {
                            Height </span>=<span style="color: rgba(0, 0, 0, 1)"> width;
                        }
                        </span><span style="color: rgba(0, 0, 255, 1)">break</span><span style="color: rgba(0, 0, 0, 1)">;
                    }
                </span><span style="color: rgba(0, 0, 255, 1)">case</span><span style="color: rgba(0, 0, 0, 1)"> RulerDisplayType.Vertical:
                    {
                        </span><span style="color: rgba(0, 0, 255, 1)">if</span> (<span style="color: rgba(0, 0, 255, 1)">this</span>.ActualWidth == <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">)
                        {
                            Width </span>=<span style="color: rgba(0, 0, 0, 1)"> width;
                        }
                        </span><span style="color: rgba(0, 0, 255, 1)">break</span><span style="color: rgba(0, 0, 0, 1)">;
                    }
            }
        }

        </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
        <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> è·åæ¯ä¸ä¸ªæ°å­é´éçè·¨åº¦
        </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">void</span><span style="color: rgba(0, 0, 0, 1)"> GetStep()
        {
            </span><span style="color: rgba(0, 0, 255, 1)">switch</span><span style="color: rgba(0, 0, 0, 1)"> (DisplayUnit)
            {
                </span><span style="color: rgba(0, 0, 255, 1)">case</span><span style="color: rgba(0, 0, 0, 1)"> RulerDisplayUnit.Pixel:
                    {
                        </span><span style="color: rgba(0, 0, 255, 1)">while</span> (<span style="color: rgba(0, 0, 255, 1)">true</span><span style="color: rgba(0, 0, 0, 1)">)
                        {
                            </span><span style="color: rgba(0, 0, 255, 1)">var</span> stepSpanCm = _stepSpan / Convert.ToDouble(GetDpi()) * InchCm *<span style="color: rgba(0, 0, 0, 1)"> DisplayPercent;
                            </span><span style="color: rgba(0, 0, 255, 1)">var</span> stepLengthCm = stepSpanCm /<span style="color: rgba(0, 0, 0, 1)"> _stepCount;
                            </span><span style="color: rgba(0, 0, 255, 1)">var</span> type = <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">;
                            </span><span style="color: rgba(0, 0, 255, 1)">var</span> isOut = <span style="color: rgba(0, 0, 255, 1)">false</span><span style="color: rgba(0, 0, 0, 1)">;
                            </span><span style="color: rgba(0, 0, 255, 1)">if</span> (stepLengthCm &gt;<span style="color: rgba(0, 0, 0, 1)"> _maxStepLengthCm)
                            {
                                type </span>= <span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">;
                                _stepCount </span>= GetNextStepCount(_stepCount, type, <span style="color: rgba(0, 0, 255, 1)">ref</span><span style="color: rgba(0, 0, 0, 1)"> isOut);
                            }

                            </span><span style="color: rgba(0, 0, 255, 1)">if</span> (stepLengthCm &lt;<span style="color: rgba(0, 0, 0, 1)"> _minStepLengthCm)
                            {
                                type </span>= <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">;
                                _stepCount </span>= GetNextStepCount(_stepCount, type, <span style="color: rgba(0, 0, 255, 1)">ref</span><span style="color: rgba(0, 0, 0, 1)"> isOut);
                            }

                            </span><span style="color: rgba(0, 0, 255, 1)">if</span> (stepLengthCm &lt;= _maxStepLengthCm &amp;&amp; stepLengthCm &gt;=<span style="color: rgba(0, 0, 0, 1)"> _minStepLengthCm)
                            {
                                _stepLength </span>= stepSpanCm / InchCm * Convert.ToDouble(GetDpi()) /<span style="color: rgba(0, 0, 0, 1)"> _stepCount;
                                </span><span style="color: rgba(0, 0, 255, 1)">break</span><span style="color: rgba(0, 0, 0, 1)">;
                            }
                            </span><span style="color: rgba(0, 128, 0, 1)">/*</span><span style="color: rgba(0, 128, 0, 1)"> å·²è¶åºæå°äºæå¤§æ­¥è¿é¿åº¦ </span><span style="color: rgba(0, 128, 0, 1)">*/</span>
                            <span style="color: rgba(0, 0, 255, 1)">if</span> (!isOut) <span style="color: rgba(0, 0, 255, 1)">continue</span><span style="color: rgba(0, 0, 0, 1)">;
                            _stepSpan </span>=<span style="color: rgba(0, 0, 0, 1)"> GetNextStepSpan(_stepSpan, type);
                        }
                        </span><span style="color: rgba(0, 0, 255, 1)">break</span><span style="color: rgba(0, 0, 0, 1)">;
                    }
            }
        }


        </span><span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">int</span> GetNextStepCount(<span style="color: rgba(0, 0, 255, 1)">int</span> stepCount, <span style="color: rgba(0, 0, 255, 1)">int</span> type, <span style="color: rgba(0, 0, 255, 1)">ref</span> <span style="color: rgba(0, 0, 255, 1)">bool</span><span style="color: rgba(0, 0, 0, 1)"> isOut)
        {
            </span><span style="color: rgba(0, 0, 255, 1)">var</span> result =<span style="color: rgba(0, 0, 0, 1)"> stepCount;
            isOut </span>= <span style="color: rgba(0, 0, 255, 1)">false</span><span style="color: rgba(0, 0, 0, 1)">;
            </span><span style="color: rgba(0, 0, 255, 1)">switch</span><span style="color: rgba(0, 0, 0, 1)"> (type)
            {
                </span><span style="color: rgba(0, 0, 255, 1)">case</span> <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">:
                    {
                        </span><span style="color: rgba(0, 0, 255, 1)">if</span> (stepCount == <span style="color: rgba(128, 0, 128, 1)">20</span><span style="color: rgba(0, 0, 0, 1)">)
                        {
                            result </span>= <span style="color: rgba(128, 0, 128, 1)">10</span><span style="color: rgba(0, 0, 0, 1)">;
                        }
                        </span><span style="color: rgba(0, 0, 255, 1)">else</span><span style="color: rgba(0, 0, 0, 1)">
                        {
                            isOut </span>= <span style="color: rgba(0, 0, 255, 1)">true</span><span style="color: rgba(0, 0, 0, 1)">;
                        }
                        </span><span style="color: rgba(0, 0, 255, 1)">break</span><span style="color: rgba(0, 0, 0, 1)">;
                    }
                </span><span style="color: rgba(0, 0, 255, 1)">case</span> <span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">:
                    {
                        </span><span style="color: rgba(0, 0, 255, 1)">if</span> (stepCount == <span style="color: rgba(128, 0, 128, 1)">10</span><span style="color: rgba(0, 0, 0, 1)">)
                        {
                            result </span>= <span style="color: rgba(128, 0, 128, 1)">20</span><span style="color: rgba(0, 0, 0, 1)">;
                        }
                        </span><span style="color: rgba(0, 0, 255, 1)">else</span><span style="color: rgba(0, 0, 0, 1)">
                        {
                            isOut </span>= <span style="color: rgba(0, 0, 255, 1)">true</span><span style="color: rgba(0, 0, 0, 1)">;
                        }

                        </span><span style="color: rgba(0, 0, 255, 1)">break</span><span style="color: rgba(0, 0, 0, 1)">;
                    }
            }
            </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> result;
        }


        </span><span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">int</span> GetNextStepSpan(<span style="color: rgba(0, 0, 255, 1)">int</span> stepSpan, <span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> type)
        {
            </span><span style="color: rgba(0, 0, 255, 1)">var</span> stepCountStr =<span style="color: rgba(0, 0, 0, 1)"> stepSpan.ToString();
            </span><span style="color: rgba(0, 0, 255, 1)">var</span> resultStr = <span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)">.Empty;

            </span><span style="color: rgba(0, 0, 255, 1)">switch</span><span style="color: rgba(0, 0, 0, 1)"> (DisplayUnit)
            {
                </span><span style="color: rgba(0, 0, 255, 1)">case</span><span style="color: rgba(0, 0, 0, 1)"> RulerDisplayUnit.Pixel:
                    {
                        </span><span style="color: rgba(0, 0, 255, 1)">switch</span><span style="color: rgba(0, 0, 0, 1)"> (type)
                        {
                            </span><span style="color: rgba(0, 0, 255, 1)">case</span> <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">:
                                {
                                    </span><span style="color: rgba(0, 0, 255, 1)">if</span> (stepCountStr.IndexOf(<span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">5</span><span style="color: rgba(128, 0, 0, 1)">'</span>) &gt; -<span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">)
                                    {
                                        resultStr </span>= GetNumberAndZeroNum(<span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">, stepCountStr.Length);
                                    }
                                    </span><span style="color: rgba(0, 0, 255, 1)">else</span> <span style="color: rgba(0, 0, 255, 1)">if</span> (stepCountStr.IndexOf(<span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">2</span><span style="color: rgba(128, 0, 0, 1)">'</span>) &gt; -<span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">)
                                    {
                                        resultStr </span>= GetNumberAndZeroNum(<span style="color: rgba(128, 0, 128, 1)">5</span>, stepCountStr.Length - <span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">);
                                    }
                                    </span><span style="color: rgba(0, 0, 255, 1)">else</span> <span style="color: rgba(0, 0, 255, 1)">if</span> (stepCountStr.IndexOf(<span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">1</span><span style="color: rgba(128, 0, 0, 1)">'</span>) &gt; -<span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">)
                                    {
                                        resultStr </span>= GetNumberAndZeroNum(<span style="color: rgba(128, 0, 128, 1)">2</span>, stepCountStr.Length - <span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">);
                                    }
                                    </span><span style="color: rgba(0, 0, 255, 1)">break</span><span style="color: rgba(0, 0, 0, 1)">;
                                }
                            </span><span style="color: rgba(0, 0, 255, 1)">case</span> <span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">:
                                {
                                    </span><span style="color: rgba(0, 0, 255, 1)">if</span> (stepCountStr.IndexOf(<span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">5</span><span style="color: rgba(128, 0, 0, 1)">'</span>) &gt; -<span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">)
                                    {
                                        resultStr </span>= GetNumberAndZeroNum(<span style="color: rgba(128, 0, 128, 1)">2</span>, stepCountStr.Length - <span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">);
                                    }
                                    </span><span style="color: rgba(0, 0, 255, 1)">else</span> <span style="color: rgba(0, 0, 255, 1)">if</span> (stepCountStr.IndexOf(<span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">2</span><span style="color: rgba(128, 0, 0, 1)">'</span>) &gt; -<span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">)
                                    {
                                        resultStr </span>= GetNumberAndZeroNum(<span style="color: rgba(128, 0, 128, 1)">1</span>, stepCountStr.Length - <span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">);
                                    }
                                    </span><span style="color: rgba(0, 0, 255, 1)">else</span> <span style="color: rgba(0, 0, 255, 1)">if</span> (stepCountStr.IndexOf(<span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">1</span><span style="color: rgba(128, 0, 0, 1)">'</span>) &gt; -<span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">)
                                    {
                                        resultStr </span>= GetNumberAndZeroNum(<span style="color: rgba(128, 0, 128, 1)">5</span>, stepCountStr.Length - <span style="color: rgba(128, 0, 128, 1)">2</span><span style="color: rgba(0, 0, 0, 1)">);
                                    }
                                    </span><span style="color: rgba(0, 0, 255, 1)">break</span><span style="color: rgba(0, 0, 0, 1)">;
                                }
                        }
                        </span><span style="color: rgba(0, 0, 255, 1)">break</span><span style="color: rgba(0, 0, 0, 1)">;
                    }
            }

            </span><span style="color: rgba(0, 0, 255, 1)">if</span> (<span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)">.IsNullOrWhiteSpace(resultStr))
            {
                </span><span style="color: rgba(0, 0, 255, 1)">return</span> <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">;
            }

            </span><span style="color: rgba(0, 0, 255, 1)">if</span> (<span style="color: rgba(0, 0, 255, 1)">int</span>.TryParse(resultStr, <span style="color: rgba(0, 0, 255, 1)">out</span> <span style="color: rgba(0, 0, 255, 1)">var</span><span style="color: rgba(0, 0, 0, 1)"> result))
            {
                </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> result;
            }
            </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> result;
        }


        </span><span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">string</span> GetNumberAndZeroNum(<span style="color: rgba(0, 0, 255, 1)">int</span> num, <span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> zeroNum)
        {
            </span><span style="color: rgba(0, 0, 255, 1)">var</span> result = <span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)">.Empty;
            result </span>+=<span style="color: rgba(0, 0, 0, 1)"> num;
            </span><span style="color: rgba(0, 0, 255, 1)">for</span> (<span style="color: rgba(0, 0, 255, 1)">var</span> i = <span style="color: rgba(128, 0, 128, 1)">0</span>; i &lt; zeroNum; i++<span style="color: rgba(0, 0, 0, 1)">)
            {
                result </span>+= <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">0</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">;
            }
            </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> (result);
        }


        </span><span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> GetDpi()
        {
            </span><span style="color: rgba(0, 0, 255, 1)">switch</span><span style="color: rgba(0, 0, 0, 1)"> (DisplayType)
            {
                </span><span style="color: rgba(0, 0, 255, 1)">case</span><span style="color: rgba(0, 0, 0, 1)"> RulerDisplayType.Horizontal:
                    {
                        </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> (Dpi.DpiX);
                    }
                </span><span style="color: rgba(0, 0, 255, 1)">case</span><span style="color: rgba(0, 0, 0, 1)"> RulerDisplayType.Vertical:
                    {
                        </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> (Dpi.DpiY);
                    }
                </span><span style="color: rgba(0, 0, 255, 1)">default</span><span style="color: rgba(0, 0, 0, 1)">:
                    {
                        </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> (Dpi.DpiX);
                    }
            }
        }

        </span><span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">void</span><span style="color: rgba(0, 0, 0, 1)"> GetActualLength()
        {
            </span><span style="color: rgba(0, 0, 255, 1)">switch</span><span style="color: rgba(0, 0, 0, 1)"> (DisplayType)
            {
                </span><span style="color: rgba(0, 0, 255, 1)">case</span><span style="color: rgba(0, 0, 0, 1)"> RulerDisplayType.Horizontal:
                    {
                        _actualLength </span>= <span style="color: rgba(0, 0, 255, 1)">this</span><span style="color: rgba(0, 0, 0, 1)">.ActualWidth;
                        </span><span style="color: rgba(0, 0, 255, 1)">break</span><span style="color: rgba(0, 0, 0, 1)">;
                    }
                </span><span style="color: rgba(0, 0, 255, 1)">case</span><span style="color: rgba(0, 0, 0, 1)"> RulerDisplayType.Vertical:
                    {
                        _actualLength </span>= <span style="color: rgba(0, 0, 255, 1)">this</span><span style="color: rgba(0, 0, 0, 1)">.ActualHeight;
                        </span><span style="color: rgba(0, 0, 255, 1)">break</span><span style="color: rgba(0, 0, 0, 1)">;
                    }
            }
        }
    }

    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">enum</span><span style="color: rgba(0, 0, 0, 1)"> RulerDisplayType
    {
        Horizontal, Vertical
    }

    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">enum</span><span style="color: rgba(0, 0, 0, 1)"> RulerDisplayUnit
    {
        Pixel,
        Cm
    }

    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">enum</span><span style="color: rgba(0, 0, 0, 1)"> LinePercent
    {
        P20 </span>= <span style="color: rgba(128, 0, 128, 1)">20</span><span style="color: rgba(0, 0, 0, 1)">,
        P30 </span>= <span style="color: rgba(128, 0, 128, 1)">30</span><span style="color: rgba(0, 0, 0, 1)">, 
        P50 </span>= <span style="color: rgba(128, 0, 128, 1)">50</span><span style="color: rgba(0, 0, 0, 1)">, 
        P70 </span>= <span style="color: rgba(128, 0, 128, 1)">70</span><span style="color: rgba(0, 0, 0, 1)">, 
        P100 </span>= <span style="color: rgba(128, 0, 128, 1)">100</span><span style="color: rgba(0, 0, 0, 1)">
    }

    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">struct</span><span style="color: rgba(0, 0, 0, 1)"> Dpi
    {
        </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> DpiX
        {
            </span><span style="color: rgba(0, 0, 255, 1)">get</span>; <span style="color: rgba(0, 0, 255, 1)">set</span><span style="color: rgba(0, 0, 0, 1)">;
        }
        </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> DpiY
        {
            </span><span style="color: rgba(0, 0, 255, 1)">get</span>; <span style="color: rgba(0, 0, 255, 1)">set</span><span style="color: rgba(0, 0, 0, 1)">;
        }
    }

    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">struct</span><span style="color: rgba(0, 0, 0, 1)"> Position
    {
        </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> Value
        {
            </span><span style="color: rgba(0, 0, 255, 1)">get</span>; <span style="color: rgba(0, 0, 255, 1)">set</span><span style="color: rgba(0, 0, 0, 1)">;
        }
        </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">int</span><span style="color: rgba(0, 0, 0, 1)"> CurrentStepIndex
        {
            </span><span style="color: rgba(0, 0, 255, 1)">get</span>; <span style="color: rgba(0, 0, 255, 1)">set</span><span style="color: rgba(0, 0, 0, 1)">;
        }
    }
}</span></pre>
</div>
<p>3ãå¨åæ¥çä»£ç ä¸­ï¼å¢å å¯¹æ¨ªçºµåæ çå®ä¹åè¡¥å</p>
<div class="cnblogs_code">
<pre> [TemplatePart(Name = <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">verticalTrackLine</span><span style="color: rgba(128, 0, 0, 1)">"</span>, Type = <span style="color: rgba(0, 0, 255, 1)">typeof</span><span style="color: rgba(0, 0, 0, 1)">(Line))]
 [TemplatePart(Name </span>= <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">horizontalTrackLine</span><span style="color: rgba(128, 0, 0, 1)">"</span>, Type = <span style="color: rgba(0, 0, 255, 1)">typeof</span>(Line))]</pre>
</div>
<p>4ãå¢å å¯¹æ å°ºæ§ä»¶çæ ·å¼å®ç°</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">ResourceDictionary </span><span style="color: rgba(255, 0, 0, 1)">xmlns</span><span style="color: rgba(0, 0, 255, 1)">="http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span><span style="color: rgba(255, 0, 0, 1)">
                    xmlns:x</span><span style="color: rgba(0, 0, 255, 1)">="http://schemas.microsoft.com/winfx/2006/xaml"</span><span style="color: rgba(255, 0, 0, 1)">
                    xmlns:local</span><span style="color: rgba(0, 0, 255, 1)">="clr-namespace:RulerDemo"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>

    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Style </span><span style="color: rgba(255, 0, 0, 1)">TargetType</span><span style="color: rgba(0, 0, 255, 1)">="</span><span style="color: rgba(128, 128, 0, 1)">{x:Type local:RulerControl}</span><span style="color: rgba(0, 0, 255, 1)">"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Setter </span><span style="color: rgba(255, 0, 0, 1)">Property</span><span style="color: rgba(0, 0, 255, 1)">="Template"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
            <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Setter.Value</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
                <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">ControlTemplate </span><span style="color: rgba(255, 0, 0, 1)">TargetType</span><span style="color: rgba(0, 0, 255, 1)">="</span><span style="color: rgba(128, 128, 0, 1)">{x:Type local:RulerControl}</span><span style="color: rgba(0, 0, 255, 1)">"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
                    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Grid</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
                        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">ContentPresenter</span><span style="color: rgba(0, 0, 255, 1)">/&gt;</span>
                        <span style="color: rgba(0, 128, 0, 1)">&lt;!--</span><span style="color: rgba(0, 128, 0, 1)"> åç´è·è¸ªçº¿ï¼åç´çº¿ï¼Xåæ åºå®ï¼Yè·¨è¶æ´ä¸ªé«åº¦ï¼ </span><span style="color: rgba(0, 128, 0, 1)">--&gt;</span>
                        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Line </span><span style="color: rgba(255, 0, 0, 1)">x:Name</span><span style="color: rgba(0, 0, 255, 1)">="verticalTrackLine"</span><span style="color: rgba(255, 0, 0, 1)">
                              Stroke</span><span style="color: rgba(0, 0, 255, 1)">="Red"</span><span style="color: rgba(255, 0, 0, 1)">
                              StrokeThickness</span><span style="color: rgba(0, 0, 255, 1)">="1"</span><span style="color: rgba(255, 0, 0, 1)">
                              StrokeDashArray</span><span style="color: rgba(0, 0, 255, 1)">="2,2"</span><span style="color: rgba(255, 0, 0, 1)">
                              X1</span><span style="color: rgba(0, 0, 255, 1)">="0"</span><span style="color: rgba(255, 0, 0, 1)"> Y1</span><span style="color: rgba(0, 0, 255, 1)">="0"</span><span style="color: rgba(255, 0, 0, 1)"> X2</span><span style="color: rgba(0, 0, 255, 1)">="0"</span><span style="color: rgba(255, 0, 0, 1)"> Y2</span><span style="color: rgba(0, 0, 255, 1)">="2000"</span><span style="color: rgba(255, 0, 0, 1)">
                              Visibility</span><span style="color: rgba(0, 0, 255, 1)">="Collapsed"</span><span style="color: rgba(0, 0, 255, 1)">/&gt;</span>
                        <span style="color: rgba(0, 128, 0, 1)">&lt;!--</span><span style="color: rgba(0, 128, 0, 1)"> æ°´å¹³è·è¸ªçº¿ï¼æ°´å¹³çº¿ï¼Yåæ åºå®ï¼Xè·¨è¶æ´ä¸ªå®½åº¦ï¼ </span><span style="color: rgba(0, 128, 0, 1)">--&gt;</span>
                        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Line </span><span style="color: rgba(255, 0, 0, 1)">x:Name</span><span style="color: rgba(0, 0, 255, 1)">="horizontalTrackLine"</span><span style="color: rgba(255, 0, 0, 1)">
                              Stroke</span><span style="color: rgba(0, 0, 255, 1)">="Blue"</span><span style="color: rgba(255, 0, 0, 1)">
                              StrokeThickness</span><span style="color: rgba(0, 0, 255, 1)">="1"</span><span style="color: rgba(255, 0, 0, 1)">
                              StrokeDashArray</span><span style="color: rgba(0, 0, 255, 1)">="2,2"</span><span style="color: rgba(255, 0, 0, 1)">
                              X1</span><span style="color: rgba(0, 0, 255, 1)">="0"</span><span style="color: rgba(255, 0, 0, 1)"> Y1</span><span style="color: rgba(0, 0, 255, 1)">="0"</span><span style="color: rgba(255, 0, 0, 1)"> X2</span><span style="color: rgba(0, 0, 255, 1)">="2000"</span><span style="color: rgba(255, 0, 0, 1)"> Y2</span><span style="color: rgba(0, 0, 255, 1)">="0"</span><span style="color: rgba(255, 0, 0, 1)">
                              Visibility</span><span style="color: rgba(0, 0, 255, 1)">="Collapsed"</span><span style="color: rgba(0, 0, 255, 1)">/&gt;</span>
                    <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">Grid</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
                <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">ControlTemplate</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
            <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">Setter.Value</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">Setter</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">Style</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
<span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">ResourceDictionary</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span></pre>
</div>
<p>5ãCanvaseCoreEditoræ§ä»¶çåè£</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">UserControl </span><span style="color: rgba(255, 0, 0, 1)">x:Class</span><span style="color: rgba(0, 0, 255, 1)">="RulerDemo.CanvaseCoreEditor"</span><span style="color: rgba(255, 0, 0, 1)">
             xmlns</span><span style="color: rgba(0, 0, 255, 1)">="http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span><span style="color: rgba(255, 0, 0, 1)">
             xmlns:x</span><span style="color: rgba(0, 0, 255, 1)">="http://schemas.microsoft.com/winfx/2006/xaml"</span><span style="color: rgba(255, 0, 0, 1)">
             xmlns:mc</span><span style="color: rgba(0, 0, 255, 1)">="http://schemas.openxmlformats.org/markup-compatibility/2006"</span><span style="color: rgba(255, 0, 0, 1)">
             xmlns:d</span><span style="color: rgba(0, 0, 255, 1)">="http://schemas.microsoft.com/expression/blend/2008"</span><span style="color: rgba(255, 0, 0, 1)">
             xmlns:local</span><span style="color: rgba(0, 0, 255, 1)">="clr-namespace:RulerDemo"</span><span style="color: rgba(255, 0, 0, 1)">
             mc:Ignorable</span><span style="color: rgba(0, 0, 255, 1)">="d"</span><span style="color: rgba(255, 0, 0, 1)">   x:Name</span><span style="color: rgba(0, 0, 255, 1)">="CanvaseEditor"</span><span style="color: rgba(255, 0, 0, 1)">
             d:DesignHeight</span><span style="color: rgba(0, 0, 255, 1)">="450"</span><span style="color: rgba(255, 0, 0, 1)"> d:DesignWidth</span><span style="color: rgba(0, 0, 255, 1)">="800"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>

    <span style="color: rgba(0, 128, 0, 1)">&lt;!--</span><span style="color: rgba(0, 128, 0, 1)"> ä¸»ç½æ ¼ï¼ä½¿ç¨ ClipToBounds ç¡®ä¿åå®¹ä¸æº¢åº </span><span style="color: rgba(0, 128, 0, 1)">--&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Grid </span><span style="color: rgba(255, 0, 0, 1)">x:Name</span><span style="color: rgba(0, 0, 255, 1)">="MainGrid"</span><span style="color: rgba(255, 0, 0, 1)"> ClipToBounds</span><span style="color: rgba(0, 0, 255, 1)">="True"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Grid.ColumnDefinitions</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
            <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">ColumnDefinition </span><span style="color: rgba(255, 0, 0, 1)">Width</span><span style="color: rgba(0, 0, 255, 1)">="20"</span><span style="color: rgba(0, 0, 255, 1)">/&gt;</span>
            <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">ColumnDefinition</span><span style="color: rgba(0, 0, 255, 1)">/&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">Grid.ColumnDefinitions</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Grid.RowDefinitions</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
            <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">RowDefinition </span><span style="color: rgba(255, 0, 0, 1)">Height</span><span style="color: rgba(0, 0, 255, 1)">="20"</span><span style="color: rgba(0, 0, 255, 1)">/&gt;</span>
            <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">RowDefinition</span><span style="color: rgba(0, 0, 255, 1)">/&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">Grid.RowDefinitions</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>

        <span style="color: rgba(0, 128, 0, 1)">&lt;!--</span><span style="color: rgba(0, 128, 0, 1)"> æ¨ªåæ å°º </span><span style="color: rgba(0, 128, 0, 1)">--&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">local:RulerControl </span><span style="color: rgba(255, 0, 0, 1)">DisplayUnit</span><span style="color: rgba(0, 0, 255, 1)">="pixel"</span><span style="color: rgba(255, 0, 0, 1)">  DisplayType</span><span style="color: rgba(0, 0, 255, 1)">="Horizontal"</span><span style="color: rgba(255, 0, 0, 1)"> Grid.Row</span><span style="color: rgba(0, 0, 255, 1)">="0"</span><span style="color: rgba(255, 0, 0, 1)"> Grid.Column</span><span style="color: rgba(0, 0, 255, 1)">="1"</span><span style="color: rgba(255, 0, 0, 1)"> x:Name</span><span style="color: rgba(0, 0, 255, 1)">="ucPanleHor"</span><span style="color: rgba(0, 0, 255, 1)">/&gt;</span>

        <span style="color: rgba(0, 128, 0, 1)">&lt;!--</span><span style="color: rgba(0, 128, 0, 1)"> çºµåæ å°º </span><span style="color: rgba(0, 128, 0, 1)">--&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">local:RulerControl </span><span style="color: rgba(255, 0, 0, 1)">DisplayUnit</span><span style="color: rgba(0, 0, 255, 1)">="pixel"</span><span style="color: rgba(255, 0, 0, 1)">  DisplayType</span><span style="color: rgba(0, 0, 255, 1)">="Vertical"</span><span style="color: rgba(255, 0, 0, 1)"> Grid.Row</span><span style="color: rgba(0, 0, 255, 1)">="1"</span><span style="color: rgba(255, 0, 0, 1)"> Grid.Column</span><span style="color: rgba(0, 0, 255, 1)">="0"</span><span style="color: rgba(255, 0, 0, 1)"> x:Name</span><span style="color: rgba(0, 0, 255, 1)">="ucPanleVer"</span><span style="color: rgba(0, 0, 255, 1)">/&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">Grid</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
<span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">UserControl</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span></pre>
</div>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Collections.Generic;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Linq;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Text;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Threading.Tasks;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Windows;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Windows.Controls;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Windows.Data;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Windows.Documents;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Windows.Input;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Windows.Media;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Windows.Media.Imaging;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Windows.Navigation;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Windows.Shapes;

</span><span style="color: rgba(0, 0, 255, 1)">namespace</span><span style="color: rgba(0, 0, 0, 1)"> RulerDemo
{
    </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
    <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> CanvaseCoreEditor.xaml çäº¤äºé»è¾
    </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">partial</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> CanvaseCoreEditor : UserControl
    {
        </span><span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> CanvaseCoreEditor()
        {
            InitializeComponent();
           
        }

        </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">void</span><span style="color: rgba(0, 0, 0, 1)"> MainWindowMouseMove(MouseEventArgs e)
        {
            ucPanleHor.RaiseHorizontalRulerMoveEvent(e);
            ucPanleVer.RaiseVerticalRulerMoveEvent(e);
        }
    }
}</span></pre>
</div>
<p>6ãä¸»çªå£æ¾ç¤ºè°ç¨</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Window </span><span style="color: rgba(255, 0, 0, 1)">x:Class</span><span style="color: rgba(0, 0, 255, 1)">="RulerDemo.MainWindow"</span><span style="color: rgba(255, 0, 0, 1)">
        xmlns</span><span style="color: rgba(0, 0, 255, 1)">="http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span><span style="color: rgba(255, 0, 0, 1)">
        xmlns:x</span><span style="color: rgba(0, 0, 255, 1)">="http://schemas.microsoft.com/winfx/2006/xaml"</span><span style="color: rgba(255, 0, 0, 1)">
        xmlns:d</span><span style="color: rgba(0, 0, 255, 1)">="http://schemas.microsoft.com/expression/blend/2008"</span><span style="color: rgba(255, 0, 0, 1)">
        xmlns:mc</span><span style="color: rgba(0, 0, 255, 1)">="http://schemas.openxmlformats.org/markup-compatibility/2006"</span><span style="color: rgba(255, 0, 0, 1)">
        xmlns:local</span><span style="color: rgba(0, 0, 255, 1)">="clr-namespace:RulerDemo"</span><span style="color: rgba(255, 0, 0, 1)">
        mc:Ignorable</span><span style="color: rgba(0, 0, 255, 1)">="d"</span><span style="color: rgba(255, 0, 0, 1)">
        Title</span><span style="color: rgba(0, 0, 255, 1)">="MainWindow"</span><span style="color: rgba(255, 0, 0, 1)"> Height</span><span style="color: rgba(0, 0, 255, 1)">="450"</span><span style="color: rgba(255, 0, 0, 1)"> Width</span><span style="color: rgba(0, 0, 255, 1)">="800"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Grid</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>


        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">local:CanvaseCoreEditor </span><span style="color: rgba(255, 0, 0, 1)">x:Name</span><span style="color: rgba(0, 0, 255, 1)">="CanvaseCoreEditor"</span><span style="color: rgba(0, 0, 255, 1)">&gt;&lt;/</span><span style="color: rgba(128, 0, 0, 1)">local:CanvaseCoreEditor</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>


    <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">Grid</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
<span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">Window</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span></pre>
</div>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Diagnostics;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Text;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Windows;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Windows.Controls;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Windows.Data;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Windows.Documents;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Windows.Input;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Windows.Media;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Windows.Media.Imaging;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Windows.Navigation;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> System.Windows.Shapes;

</span><span style="color: rgba(0, 0, 255, 1)">namespace</span><span style="color: rgba(0, 0, 0, 1)"> RulerDemo
{
    </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
    <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> Interaction logic for MainWindow.xaml
    </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">partial</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> MainWindow : Window
    {
        </span><span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> MainWindow()
        {
            InitializeComponent();
            MouseMove </span>+=<span style="color: rgba(0, 0, 0, 1)"> MainWindow_MouseMove;
        }

        </span><span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">void</span> MainWindow_MouseMove(<span style="color: rgba(0, 0, 255, 1)">object</span><span style="color: rgba(0, 0, 0, 1)"> sender, MouseEventArgs e)
        {
            Debug.WriteLine(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">MainWindow_MouseMove</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
            CanvaseCoreEditor.MainWindowMouseMove(e);
        }
    }
}</span></pre>
</div>
<p>&nbsp;</p>
<div>&nbsp;</div>
<p>&nbsp;7ãæ¾ç¤ºææå¦ä¸å¾</p>
<p><img src="https://img2024.cnblogs.com/blog/1063618/202601/1063618-20260131223134838-550214321.gif" alt="æ å°º" loading="lazy"></p>
<p>&nbsp;</p>
<p>æ»ç»ï¼</p>
<p>1ãæ¬æ¬¡å®åé½æ¯éè¿è¾è®¯CodebuddyçAIç¼ç¨æä»¶ å¸®å¿å®åï¼å ä¸ä¸å°é¨åçäººä¸ºçä»£ç å¾®è°</p>
<p>2ãæ å°ºçä»£ç å·²ç»ä¸ä¼ è³Githubï¼<a href="https://github.com/wutangyuan/wutyDemo/tree/main/RulerDemo" rel="noopener nofollow">wutyDemo/RulerDemo at main Â· wutangyuan/wutyDemo</a></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-31 22:35">2026-01-31 22:35</span>&nbsp;
<a href="https://www.cnblogs.com/wuty">wuty007</a>&nbsp;
éè¯»(<span id="post_view_count">30</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19559302);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19559302', targetLink: 'https://www.cnblogs.com/wuty/p/19559302', title: 'å®ååºäºWPFå¼åçæ å°ºæ§ä»¶ï¼å«å®ä¾ä»£ç ï¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ å¼æºèªå»ºï¼GPT åæ¢ç©ºé´éº»ç¦ï¼ä¸ä»¶å¸®ä½ æå® ]]></title>
    <link>https://www.cnblogs.com/qxnm/p/19558462</link>
    <guid>df675c3287b85fd34c6b27a67bacb736</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/qxnm/p/19558462" title="åå¸äº 2026-01-31 16:23">
    <span role="heading" aria-level="2">å¼æºèªå»ºï¼GPT åæ¢ç©ºé´éº»ç¦ï¼ä¸ä»¶å¸®ä½ æå®</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p style="font-size: 0; line-height: 0; margin: 0">&nbsp;</p>
<section style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px">
<blockquote style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; font-style: italic; padding: 1em 1em 1em 2em; border-left: 4px solid rgba(0, 152, 116, 1); border-radius: 6px; color: rgba(0, 0, 0, 0.6); background: rgba(247, 247, 247, 1); margin-bottom: 1em; border-bottom: 0.2px solid rgba(0, 0, 0, 0.04); border-top: 0.2px solid rgba(0, 0, 0, 0.04); border-right: 0.2px solid rgba(0, 0, 0, 0.04); margin-top: 0">
<p style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 1em; display: block; letter-spacing: 0.1em; color: rgba(63, 63, 63, 1)">å­æ° 497ï¼éè¯»å¤§çº¦é 3 åé</p>
</blockquote>
<p style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; margin: 1.5em 8px; letter-spacing: 0.1em; color: rgba(63, 63, 63, 1)">è¿å å¤©ç»æå¿çï¼æè¿åäºä¸ä¸ªCodexçTEAM è´¦å·ç®¡çå·¥å·ç´æ¥å¨æ¬å°è¿è¡<br>å¤§æ¦æ¯ä¸é¢è¿æ ·èäºå å¤©ï¼è½éåcodex cliä½¿ç¨<br>æç®åè¿æä¸äºbugåä¸å¥½ç¨çå°æ¹ï¼åé¢ä¼éæ­¥ä¼ååºæ¥</p>
<p style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; margin: 1.5em 8px; letter-spacing: 0.1em; color: rgba(63, 63, 63, 1)">é¡¹ç®è¿æ¥ï¼éè¦çä½¬åå¸æè½è´¡ç®ä¸ä¸ªstart<br><span style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; color: rgba(87, 107, 149, 1)">hongshungao/Codex-Manager: ä¸ä¸ªCodex cli è´¦å·ç®¡çä¸åæ¢å·¥å·ãä¸º Codex cliæä¾æ¬å°å·æ± ç®¡çèªå¨åæ¢ã<sup>[1]</sup></span></p>
<h2 id="0" style="text-align: center; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 20.8px; display: table; padding: 0.3em 1.2em; margin: 4em auto 2em; color: rgba(255, 255, 255, 1); background: rgba(0, 152, 116, 1); font-weight: bold; border-radius: 8px 24px; box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06)" data-heading="true">ReadMe</h2>
<p style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; margin: 1.5em 8px; letter-spacing: 0.1em; color: rgba(63, 63, 63, 1)">æ¬å°æ¡é¢ç«¯ + æå¡è¿ç¨ç Codex è´¦å·æ± ç®¡çå¨ï¼ç¨äºç»ä¸ç®¡çè´¦å·ãç¨éä¸å¹³å° Keyï¼å¹¶æä¾æ¬å°ç½å³ä¸æå¡è½åã</p>
<h2 id="1" style="text-align: center; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 20.8px; display: table; padding: 0.3em 1.2em; margin: 4em auto 2em; color: rgba(255, 255, 255, 1); background: rgba(0, 152, 116, 1); font-weight: bold; border-radius: 8px 24px; box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06)" data-heading="true">é¡¹ç®ç®ä»</h2>
<ul style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; list-style: none; padding-left: 1.5em; margin-left: 0; color: rgba(63, 63, 63, 1)">
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">â¢ æ¡é¢ç«¯ï¼Tauriï¼è´è´£è´¦å·ç®¡çãç¨éå±ç¤ºãææç»å½ä¸å¹³å° Key éç½®</li>
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">â¢ æå¡ç«¯ï¼Rustï¼æä¾æ¬å° RPC + Gatewayï¼æ¯æç¨éå·æ°ãè´¦å·è½®è¯¢ä¸é´æè½¬å</li>
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">â¢ æ¯ææå¨è§£æ OAuth åè°é¾æ¥ï¼é¿åç«¯å£å²çªæåè°å¤±è´¥</li>
</ul>
<h2 id="2" style="text-align: center; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 20.8px; display: table; padding: 0.3em 1.2em; margin: 4em auto 2em; color: rgba(255, 255, 255, 1); background: rgba(0, 152, 116, 1); font-weight: bold; border-radius: 8px 24px; box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06)" data-heading="true">åè½äº®ç¹</h2>
<ul style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; list-style: none; padding-left: 1.5em; margin-left: 0; color: rgba(63, 63, 63, 1)">
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">â¢ è´¦å·æ± ç®¡çï¼åç»/æ ç­¾/æåº/å¤æ³¨</li>
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">â¢ ç¨éå±ç¤ºï¼5 å°æ¶ + 7 æ¥ç¨éå¿«ç§</li>
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">â¢ ææç»å½ï¼æµè§å¨ææ + æå¨åè°è§£æ</li>
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">â¢ å¹³å° Keyï¼çæ/ç¦ç¨/å é¤</li>
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">â¢ æ¬å°æå¡ï¼èªå¨å¯å¨ãå¯èªå®ä¹ç«¯å£</li>
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">â¢ ç½å³è½åï¼ä¸ºæ¬å° CLI/å·¥å·æä¾ç»ä¸å¥å£</li>
</ul>
<h2 id="3" style="text-align: center; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 20.8px; display: table; padding: 0.3em 1.2em; margin: 4em auto 2em; color: rgba(255, 255, 255, 1); background: rgba(0, 152, 116, 1); font-weight: bold; border-radius: 8px 24px; box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06)" data-heading="true">ææ¯æ </h2>
<ul style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; list-style: none; padding-left: 1.5em; margin-left: 0; color: rgba(63, 63, 63, 1)">
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">â¢ åç«¯ï¼Vite + åç JS + èªå®ä¹ UI</li>
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">â¢ æ¡é¢ç«¯ï¼Tauri (Rust)</li>
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">â¢ æå¡ç«¯ï¼Rustï¼æ¬å° HTTP/RPC + Gatewayï¼</li>
</ul>
<h2 id="4" style="text-align: center; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 20.8px; display: table; padding: 0.3em 1.2em; margin: 4em auto 2em; color: rgba(255, 255, 255, 1); background: rgba(0, 152, 116, 1); font-weight: bold; border-radius: 8px 24px; box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06)" data-heading="true">ç®å½ç»æ</h2>
<pre class="language-plaintext highlighter-hljs" data-dark-theme="true"><code>.
ââ&nbsp;apps/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;åç«¯ä¸&nbsp;Tauri&nbsp;æ¡é¢ç«¯
â&nbsp;&nbsp;ââ&nbsp;src/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;åç«¯æºç 
â&nbsp;&nbsp;ââ&nbsp;src-tauri/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Tauri&nbsp;ç«¯æºç 
â&nbsp;&nbsp;ââ&nbsp;dist/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;åç«¯æå»ºäº§ç©
ââ&nbsp;crates/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Rust&nbsp;æ ¸å¿ä¸æå¡ç«¯
â&nbsp;&nbsp;ââ&nbsp;gpttools-core
â&nbsp;&nbsp;ââ&nbsp;gpttools-service
ââ&nbsp;portable/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;ä¾¿æºçè¾åºç®å½
ââ&nbsp;rebuild.ps1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;æåèæ¬
ââ&nbsp;README.md</code></pre>
<h2 id="5" style="text-align: center; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 20.8px; display: table; padding: 0.3em 1.2em; margin: 4em auto 2em; color: rgba(255, 255, 255, 1); background: rgba(0, 152, 116, 1); font-weight: bold; border-radius: 8px 24px; box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06)" data-heading="true">å¿«éå¼å§</h2>
<ol style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; padding-left: 1.5em; margin-left: 0; color: rgba(63, 63, 63, 1)">
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">1. å¯å¨æ¡é¢ç«¯åï¼ç¹å»âå¯å¨æå¡â</li>
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">2. è¿å¥âè´¦å·ç®¡çâæ·»å è´¦å·å¹¶å®æææ</li>
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">3. éè¦æ¶ç²è´´åè°é¾æ¥å®ææå¨è§£æ</li>
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">4. å·æ°ç¨éï¼æ£æ¥ç¶æä¸éé¢</li>
</ol>
</section>
<p style="font-size: 0; line-height: 0; margin: 0">&nbsp;</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-31 16:24">2026-01-31 16:23</span>&nbsp;
<a href="https://www.cnblogs.com/qxnm">é«å®é¡º</a>&nbsp;
éè¯»(<span id="post_view_count">24</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19558462);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19558462', targetLink: 'https://www.cnblogs.com/qxnm/p/19558462', title: 'å¼æºèªå»ºï¼GPT åæ¢ç©ºé´éº»ç¦ï¼ä¸ä»¶å¸®ä½ æå®' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ C++ å°è£ C FFI æ¥å£æä½³å®è·µï¼ä»¥ Hugging Face Tokenizer ä¸ºä¾ ]]></title>
    <link>https://www.cnblogs.com/charlee44/p/19557586</link>
    <guid>e4fd64102f9d44c52c02fa3a99c6b27d</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/charlee44/p/19557586" title="åå¸äº 2026-01-31 13:36">
    <span role="heading" aria-level="2">C++ å°è£ C FFI æ¥å£æä½³å®è·µï¼ä»¥ Hugging Face Tokenizer ä¸ºä¾</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        è¯¦ç»ä»ç»äºå¦ä½éè¿ Rust ç C FFI å°è£ Hugging Face tokenizersï¼å¹¶å¨ C++ ä¸­å©ç¨ RAII åæºè½æéå®ç°å®å¨ãç®æ´ãé«æçèµæºç®¡çï¼æç»éµå¾ªç°ä»£ C++ çâé¶æ³åâå®æå·¥ä¸çº§å°è£ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="1-å¼å¥">1. å¼å¥</h1>
<p>å¨ç°ä»£ AI å·¥ç¨ä¸­ï¼Hugging Face ç tokenizers åºå·²æä¸ºåè¯å¨çäºå®æ åãä¸è¿ Hugging Face ç tokenizers æ¯ç¨ Rust æ¥å®ç°çï¼å®æ¹åªæä¾äº python å node çç»å®å®ç°ãè¦å®ç°ä¸ Hugging Face tokenizers ç¸åçè¡ä¸ºï¼æå¥½çåæ³å°±æ¯èªå·±å°è£ Hugging Face tokenizers ç C ç»å®ï¼ä»èå¯ä»¥è¢« C++ / C# / Java è¿äºé«çº§ç¼ç¨è¯­è¨è°ç¨ã</p>
<h1 id="2-å°è£-c-æ¥å£">2. å°è£ C æ¥å£</h1>
<p>é¦åè¦è¯´æçæ¯ï¼è¦åçä¸æ¯å®æ´çå°è£ Hugging Face tokenizers ç C ç FFIï¼Foreign Function Interfaceï¼æ¥å£ï¼èæ¯å°è£èªå·±éè¦çæ¥å£å°±å¯ä»¥äºãæ¯å¦æ§è¡åè¯æ¥å£åè®¡ç®Tokençæ¥å£ï¼</p>
<pre><code class="language-rust">use std::ffi::CStr;
use std::os::raw::c_char;
use tokenizers::{PaddingParams, Tokenizer, TruncationParams};

// === 1. å®ä¹ C å¼å®¹çè¿åç»æä½ ===
#[repr(C)]
pub struct TokenizerResult {
    pub input_ids: *mut i64,
    pub attention_mask: *mut i64,
    pub token_type_ids: *mut i64,
    pub length: u64,
}

// === 2. åé¨ç¶æï¼åè£ Tokenizer ===
struct TokenizerHandle {
    tokenizer: Tokenizer,     // ç¨äº encodeï¼å¸¦ paddingï¼
    raw_tokenizer: Tokenizer, // ç¨äº countï¼æ  paddingï¼
}

// === 3. è¾å©å½æ°ï¼å° Rust Vec è½¬ä¸º C å¯æ¥æçæé ===
fn vec_to_c_ptr(vec: Vec&lt;i64&gt;) -&gt; *mut i64 {
    let mut boxed = vec.into_boxed_slice();
    let ptr = boxed.as_mut_ptr();
    std::mem::forget(boxed); // é²æ­¢ Rust èªå¨éæ¾
    ptr
}

// === 4. åå»º tokenizer ===
#[unsafe(no_mangle)] // ç¦ç¨ name manglingï¼è®© C è½æ¾å°ç¬¦å·
pub extern "C" fn tokenizer_create(tokenizer_json_path: *const c_char) -&gt; *mut std::ffi::c_void {
    if tokenizer_json_path.is_null() {
        return std::ptr::null_mut();
    }

    let path_cstr = unsafe { CStr::from_ptr(tokenizer_json_path) };
    let path_str = match path_cstr.to_str() {
        Ok(s) =&gt; s,
        Err(_) =&gt; return std::ptr::null_mut(),
    };

    let mut tokenizer = match Tokenizer::from_file(path_str) {
        Ok(t) =&gt; t,
        Err(_) =&gt; return std::ptr::null_mut(),
    };

    // è®¾ç½® padding/truncation å° 512ï¼BGE é»è®¤ï¼
    tokenizer.with_padding(Some(PaddingParams {
        strategy: tokenizers::PaddingStrategy::Fixed(512),
        ..Default::default()
    }));

    if tokenizer
        .with_truncation(Some(TruncationParams {
            max_length: 512,
            ..Default::default()
        }))
        .is_err()
    {
        return std::ptr::null_mut();
    }

    let mut raw_tokenizer = tokenizer.clone();
    raw_tokenizer.with_padding(None);
    raw_tokenizer.with_truncation(None).ok();

    let handle = TokenizerHandle {
        tokenizer,
        raw_tokenizer,
    };
    Box::into_raw(Box::new(handle)) as *mut std::ffi::c_void
}

//è®¡ç®å¥å­token
#[unsafe(no_mangle)] // ç¦ç¨ name manglingï¼è®© C è½æ¾å°ç¬¦å·
pub extern "C" fn tokenizer_count(handle: *mut std::ffi::c_void, text: *const c_char) -&gt; u64 {
    if handle.is_null() || text.is_null() {
        return 0;
    }

    let handle_ref = unsafe { &amp;*(handle as *mut TokenizerHandle) };

    let text_cstr = unsafe { CStr::from_ptr(text) };
    let text_str = match text_cstr.to_str() {
        Ok(s) =&gt; s,
        Err(_) =&gt; return 0,
    };

    match handle_ref.raw_tokenizer.encode(text_str, true) {
        Ok(encoding) =&gt; encoding.len() as u64,
        Err(_) =&gt; 0,
    }
}

// === 5. éæ¯ tokenizer ===
#[unsafe(no_mangle)]
pub extern "C" fn tokenizer_destroy(handle: *mut std::ffi::c_void) {
    if !handle.is_null() {
        unsafe {
            let _ = Box::from_raw(handle as *mut TokenizerHandle);
            // Drop èªå¨è°ç¨
        }
    }
}

// === 6. æ§è¡åè¯ ===
#[unsafe(no_mangle)]
pub extern "C" fn tokenizer_encode(
    handle: *mut std::ffi::c_void,
    text: *const c_char,
) -&gt; TokenizerResult {
    let default_result = TokenizerResult {
        input_ids: std::ptr::null_mut(),
        attention_mask: std::ptr::null_mut(),
        token_type_ids: std::ptr::null_mut(),
        length: 0,
    };

    if handle.is_null() || text.is_null() {
        return default_result;
    }

    let handle_ref = unsafe { &amp;*(handle as *mut TokenizerHandle) };

    let text_cstr = unsafe { CStr::from_ptr(text) };
    let text_str = match text_cstr.to_str() {
        Ok(s) =&gt; s,
        Err(_) =&gt; return default_result,
    };

    let encoding = match handle_ref.tokenizer.encode(text_str, true) {
        Ok(e) =&gt; e,
        Err(_) =&gt; return default_result,
    };

    let input_ids: Vec&lt;i64&gt; = encoding.get_ids().iter().map(|&amp;x| x as i64).collect();
    let attention_mask: Vec&lt;i64&gt; = encoding
        .get_attention_mask()
        .iter()
        .map(|&amp;x| x as i64)
        .collect();
    let token_type_ids: Vec&lt;i64&gt; = encoding.get_type_ids().iter().map(|&amp;x| x as i64).collect();
    // BGE ä¸éè¦ï¼ä½ C++ ä»£ç ä¼ äº
    // let token_type_ids: Vec&lt;u32&gt; = vec![0u32; input_ids.len()];

    let len = input_ids.len(); // åºè¯¥æ¯ 512ï¼ä½æ´éç¨

    TokenizerResult {
        input_ids: vec_to_c_ptr(input_ids),
        attention_mask: vec_to_c_ptr(attention_mask),
        token_type_ids: vec_to_c_ptr(token_type_ids),
        length: len as u64,
    }
}

// === 7. éæ¾ç»æåå­ ===
#[unsafe(no_mangle)]
pub extern "C" fn tokenizer_result_free(result: TokenizerResult) {
    if !result.input_ids.is_null() {
        unsafe {
            let _ = Vec::from_raw_parts(
                result.input_ids,
                result.length as usize,
                result.length as usize,
            );
        }
    }

    if !result.attention_mask.is_null() {
        unsafe {
            let _ = Vec::from_raw_parts(
                result.attention_mask,
                result.length as usize,
                result.length as usize,
            );
        }
    }

    if !result.token_type_ids.is_null() {
        unsafe {
            let _ = Vec::from_raw_parts(
                result.token_type_ids,
                result.length as usize,
                result.length as usize,
            );
        }
    }
}
</code></pre>
<p>å¯¹åºç C æ¥å£å¦ä¸ï¼</p>
<pre><code class="language-c">// tokenizer_result.h
#pragma once

struct TokenizerResult {
  int64_t* input_ids;
  int64_t* attention_mask;
  int64_t* token_type_ids;
  uint64_t length;
};

#ifdef __cplusplus
static_assert(std::is_standard_layout_v&lt;TokenizerResult&gt; &amp;&amp;
                  std::is_trivially_copyable_v&lt;TokenizerResult&gt;,
              "TokenizerResult must be C ABI compatible");
#endif
</code></pre>
<pre><code class="language-c">// hf_tokenizer_ffi.h
#pragma once

#include &lt;stdint.h&gt;

#include "tokenizer_result.h"

#ifdef __cplusplus
extern "C" {
#endif

void* tokenizer_create(const char* tokenizer_json_path);
void tokenizer_destroy(void* handle);
TokenizerResult tokenizer_encode(void* handle, const char* text);
uint64_t tokenizer_count(void* handle, const char* text);
void tokenizer_result_free(TokenizerResult result);

#ifdef __cplusplus
}
#endif
</code></pre>
<p>å·ä½çå°è£ç»èç¬èå°±ä¸å¤è¯´äºï¼å ä¸ºä¸æ¬æçä¸»é¢æ å³ãä¸è¿å¯ä»¥ç¨ç¨äºè§£ä¸ä¸å¶ä¸­çåçï¼ä¹å°±æ¯è¯´ï¼æä½ç³»ç»å¤§å¤æ°æ¯ç± C å®ç°çï¼æèæä¾äº C çæ¥å£ãå æ­¤ï¼ç»å¤§å¤æ°æ¯ C é«çº§çç¼ç¨è¯­è¨é½æä¾äºä¸ C äº¤äºçè½åï¼å½ç¶åææ¯å¿é¡»å¾æç§ C å¾è§èç»ç»æ°æ®åå°è£æ¥å£ãæ¯å¦è¿éç<code>struct TokenizerResult</code>å°±æ¯ä¸ä¸ªå¼å®¹ C çç»æä½ï¼<code>#[unsafe(no_mangle)]</code>åè¡¨æè¿æ¯ä¸ä¸ª C è¯­è¨å½¢å¼çå½æ°æ¥å£ã</p>
<h1 id="3-ç»å¸-c-å°è£">3. ç»å¸ C++ å°è£</h1>
<p>å¦ä¸æ¥å£æ¯ä¸ä¸ªæ åç C é£æ ¼å¼çæ¥å£ï¼å°åè¯å¨å°è£æä¸ä¸ª Handle ï¼ä¹å°±æ¯ä¿ç§°çå¥æãèåç»­å·ä½çåè¯æä½å°±éè¿è¿ä¸ªå¥ææ¥è¿è¡ï¼åæ¬æåå¯¹èµæºçéæ¾ãå¨ C++ ä¸­ï¼å½ç¶ä¹å¯ä»¥ç´æ¥ä½¿ç¨è¿ç§å½¢å¼çæ¥å£ï¼ä¸è¿è¿æ ·å°±éè¦éµå¾ª C çèµæºæ§å¶è§åï¼èµæºç³è¯·åéæ¾å¿é¡»æå¯¹åºç°ââæ¯å¦è¿éç <code>tokenizer_create</code> å <code>tokenizer_destroy</code>ã</p>
<h2 id="31-raii-æºå¶">3.1 RAII æºå¶</h2>
<p>ä¸è¿è¿æ ·å°±ä¼æä¸ä¸ªé®é¢ï¼è¿ç¨å¼çæµç¨ä¸­å¾é¾ä¿è¯ <code>tokenizer_create</code> å <code>tokenizer_destroy</code> è½å¤æå¯¹è°ç¨ï¼ä¾å¦ï¼</p>
<pre><code class="language-c">tokenizer_create()

if(...){
    return;
}

tokenizer_destroy()
</code></pre>
<p>åªè¦å¨ <code>tokenizer_create</code> å <code>tokenizer_destroy</code> ä¹é´åºç°åæ¯ï¼ç¨åºæåè¿åï¼å°±ä¼å¯¼è´èµæºæ²¡æéæ¾èåå­æ³æ¼ãä¸ºäºé¿åè¿ä¸ªé®é¢ï¼å°±éè¦å¨æ¯æ¬¡ <code>return</code> ä¹åï¼é½è°ç¨ <code>tokenizer_destroy()</code>ââè¿å½ç¶æ¯éå¸¸ä¸ä¼éçï¼æ¢å®¹æå¿æåæ¯åä½ä»£ç ã</p>
<p>ä¸ºäºè§£å³è¿ç§èµæºç®¡çé¾é¢ï¼C++ æä¾äºä¸ç§å¼ºå¤§èä¼éçæºå¶ï¼RAIIï¼Resource Acquisition Is Initializationï¼èµæºè·åå³åå§åï¼ãå®çæ ¸å¿ææ³æ¯ï¼å°èµæºççå½å¨æç»å®å°å¯¹è±¡ççå½å¨æä¸ãå·ä½æ¥è¯´ï¼å°±æ¯å©ç¨é¢åå¯¹è±¡çææ³ï¼å°èµæºæ§å¶çè¡ä¸ºå°è£æä¸ä¸ªç±»å¯¹è±¡ï¼å¹¶ä¸ä¿è¯èµæºå¨å¯¹è±¡æé å½æ°ä¸­è·åï¼å¨ææå½æ°ä¸­èªå¨éæ¾ãç±äº C++ ä¸­æ å¯¹è±¡å¨ç¦»å¼ä½ç¨åæ¶ä¼èªå¨è°ç¨ææå½æ°ï¼å¨ç¦»å¼ä½ç¨åæ¶ä¼èªå¨è°ç¨ææå½æ°ãå æ­¤è¿äºèµæºæ»æ¯å¯ä»¥è¢«æ­£ç¡®éæ¾ï¼ä»æ ¹æ¬ä¸æç»åå­æ³æ¼æèµæºæ³é²ãä¾å¦ï¼</p>
<pre><code class="language-cpp">Tokenizer tokenizer;

//...æä½

if(...){
    return;
}

//...æ´å¤æä½
</code></pre>
<h2 id="32-æ·è´è¯­ä¹">3.2 æ·è´è¯­ä¹</h2>
<p>å¤ä¹ ä¸ä¸ C++ é¢åå¯¹è±¡è®¾è®¡çç»å¸äºæ³åï¼Rule of Fiveï¼ï¼å¦æä¸ä¸ªç±»èªå®ä¹äºä»¥ä¸ä»»æä¸ä¸ªå½æ°ï¼</p>
<ol>
<li>ææå½æ°ï¼Destructorï¼</li>
<li>æ·è´æé å½æ°ï¼Copy Constructorï¼</li>
<li>æ·è´èµå¼è¿ç®ç¬¦ï¼Copy Assignment Operatorï¼</li>
<li>ç§»å¨æé å½æ°ï¼Move Constructorï¼</li>
<li>ç§»å¨èµå¼è¿ç®ç¬¦ï¼Move Assignment Operatorï¼</li>
</ol>
<p>é£ä¹å¤§æ¦çä¹éè¦èªå®ä¹å¦å¤åä¸ªå½æ°ï¼æèæ¾å¼ = default / = delete æ¥æ§å¶è¡ä¸ºãå¾å¤ C++ ç¨åºåå¹¶ä¸çè§£ç§»å¨è¯­ä¹ï¼ä½è¿å¹¶æ²¡æå³ç³»ï¼æä»¬å¯ä»¥ååå®ä¸å®ä¹ç§»å¨æé å½æ°åç§»å¨èµå¼è¿ç®ç¬¦ï¼æèæ¾å¼ = defaultï¼ï¼æ­¤æ¶ç§»å¨æä½å°±ä¼éåä¸ºæ·è´è¯­ä¹çè¡ä¸ºã</p>
<p>èå³äºæ·è´è¯­ä¹ï¼ç»å¤§å¤æ° C++ ç¨åºååºè¯¥é½ç¥éè¿ä¸ªé®é¢ï¼å½å¨ç±»å¯¹è±¡ä¸­ç®¡çèµæºæ¶ï¼ç¼è¯å¨çæçé»è®¤æ·è´è¡ä¸ºæ¯âæµæ·è´âï¼å¯è½å¯¼è´åééæ¾ãåå­æ³æ¼ç­é®é¢ï¼å æ­¤éè¦èªå®ä¹æ·è´æé å½æ°åæ·è´èµå¼è¿ç®ç¬¦æ¥å®ç°âæ·±æ·è´âçè¡ä¸ºãå æ­¤ï¼è¿ä¸ªé¾æ¡å°±å¾æç¡®äºï¼å ä¸ºç±»ä¸­éè¦å®ä¹ææå½æ°ï¼æä»¥éè¦åæ¶å®ä¹æ·è´æé å½æ°åæ·è´èµå¼è¿ç®ç¬¦ã</p>
<h2 id="33-ç§»å¨è¯­ä¹">3.3 ç§»å¨è¯­ä¹</h2>
<p>è¿ä¸æ­¥è®¨è®ºï¼åæ­£ç§»å¨è¯­ä¹å¯ä»¥é»è®¤ï¼é£ä¹æ¯ä¸æ¯åªç¨å®ä¹æ·è´è¯­ä¹å°±è¡äºå¢ï¼è¿ä¸ªè¦çèµæºçå®ä¹ï¼å¦æåªæ¯ç®¡çåå­èµæºï¼é£ä¹è¿æ ·åæ¯æ²¡æé®é¢çï¼è³å°æ¯å®å¨çãä½æ¯èµæºç®¡çä¸ä»ä»æçæ¯åå­èµæºï¼è¿å¯ä»¥æ¯ä¸äºæä»¶å¥æãç½ç»è¿æ¥ç­ç­ãè¿äºèµæºå¾å¾æ¯ç¬å æ§çï¼è¿è¡æ·±æ·è´å¾å¾ä¼åºç°é®é¢ãå æ­¤å°±åºç°äº C++ 11 å¼å§è§å®çç§»å¨è¯­ä¹ï¼å¯ä»¥å®å¨å¾å®ç°âæµæ·è´âçè¡ä¸ºãåæ¶è¿å¯ä»¥è§£å³âæ·±æ·è´âçæ§è½é®é¢ã</p>
<p>åºäºä»¥ä¸çææ³ï¼ç¬èå°è£çåè¯å¨å¯¹è±¡å¦ä¸ï¼</p>
<pre><code class="language-cpp">// HfTokenizer.h
#pragma once

#include &lt;string&gt;

#include "hf_tokenizer_ffi.h"

namespace hf {
class Tokenizer {
 public:
  explicit Tokenizer(const std::string&amp; path);

  // ææå½æ°
  ~Tokenizer() noexcept;

  // ç¦æ­¢æ·è´
  Tokenizer(const Tokenizer&amp;) = delete;
  Tokenizer&amp; operator=(const Tokenizer&amp;) = delete;

  // ç§»å¨è¯­ä¹
  Tokenizer(Tokenizer&amp;&amp; rhs) noexcept;
  Tokenizer&amp; operator=(Tokenizer&amp;&amp; rhs) noexcept;

  // å¶ä»æ¥å£æ¹æ³
  // TokenizerResult Encode(const char* text) const;
  // uint64_t Count(const char* text) const;

 private:
  void* handle;  // æ¥èª tokenizer_create çæé
};

}  // namespace hf
</code></pre>
<pre><code class="language-cpp">// HfTokenizer.cpp
#include "HfTokenizer.h"

#include &lt;iostream&gt;

namespace hf {
Tokenizer::Tokenizer(const std::string&amp; path)
    : handle(tokenizer_create(path.c_str())) {
  if (!handle) {
    throw std::runtime_error("Failed to create tokenizer from " + path);
  }
}

Tokenizer::~Tokenizer() noexcept {
  if (handle) {
    tokenizer_destroy(handle);
  }
}

// ç§»å¨è¯­ä¹
Tokenizer::Tokenizer(Tokenizer&amp;&amp; rhs) noexcept : handle(rhs.handle) {
  rhs.handle = nullptr;
}

Tokenizer&amp; Tokenizer::operator=(Tokenizer&amp;&amp; rhs) noexcept {
  if (this != &amp;rhs) {
    if (handle) {
      tokenizer_destroy(handle);
    }
    handle = rhs.handle;
    rhs.handle = nullptr;
  }
  return *this;
}

}  // namespace hf
</code></pre>
<p>å¦åæè¿°ï¼å ä¸ºå°è£çæ¯ä¸ä¸ªå¥æï¼ä¸ºäºé¿åèµæºæ§å¶çéº»ç¦ï¼å°±ç¦æ­¢ææ·è´è¯­ä¹ï¼</p>
<pre><code class="language-cpp">// ç¦æ­¢æ·è´
Tokenizer(const Tokenizer&amp;) = delete;
Tokenizer&amp; operator=(const Tokenizer&amp;) = delete;
</code></pre>
<p>è¿è¡<code>()</code>æ·è´æé æè<code>=</code>èµå¼æé çèµ·æ¥ä¼¼ä¹å¾ç®åï¼å¶å®å¨ä»£ç å±å±åµå¥ä¹åï¼å°±å¯è½å¾é¾åæåºæ¯ä¸æ¯è°ç¨äºé»è®¤çæ·è´çè¡ä¸ºï¼æ¯å¦å½æ°ä¼ åãå®¹å¨æä½ç­ç­ãå½ç¶æ·±æ·è´çå®ç°ä¹ä¸æ¯æ§è½æä¼ï¼å æ­¤å¹²èå°±ç´æ¥å é¤ææ·è´æé å½æ°åæ·è´èµå¼è¿ç®ç¬¦ã</p>
<p>æ²¡ææ·è´è¯­ä¹ï¼é£ä¹å°±éè¦ç§»å¨è¯­ä¹æ¥è¿è¡ä¼ éå¯¹è±¡äºãå¶å®ç§»å¨è¯­ä¹æ²¡é£ä¹é¾ï¼æä»¬åªè¦ææ¡ä½ä¸ç¹ï¼ç§»å¨è¯­ä¹çç®çæ¯å®å¨å°å®ç°âæµæ·è´âãä»¥ç§»å¨èµå¼è¿ç®ç¬¦çå®ç°æ¥è¯´ï¼å¦æè¦å®ç°å¦ä¸ç§»å¨èµå¼ï¼</p>
<pre><code class="language-cpp">Tokenizer A();
Tokenizer B();
B = std::move(A);
</code></pre>
<p>å°±éè¦ä»¥ä¸çè¡ä¸ºï¼</p>
<ol>
<li>éæ¾æBç®¡ççèµæºã</li>
<li>å°Aä¸­çæåâæµæ·è´âå°Bä¸­ï¼è®©Bæ¥ç®¡Açèµæºã</li>
<li>å°Aä¸­æååå§åã</li>
</ol>
<p>å·ä½å®ç°å°±æ¯å¦ä¸æç¤ºï¼</p>
<pre><code class="language-cpp">Tokenizer&amp; Tokenizer::operator=(Tokenizer&amp;&amp; rhs) noexcept {
  if (this != &amp;rhs) {
    if (handle) {
      tokenizer_destroy(handle);
    }
    handle = rhs.handle;
    rhs.handle = nullptr;
  }
  return *this;
}
</code></pre>
<p>ç§»å¨æé å½æ°å°±æ´å ç®åäºï¼å ä¸ºBå¯¹è±¡å¨ç§»å¨æé ä¹åæåå¹¶æ²¡æåå§åï¼</p>
<pre><code class="language-cpp">Tokenizer A();
Tokenizer B(std::move(A));
</code></pre>
<p>å æ­¤å¯ä»¥çç¥æéæ¾èªèº«èµæºçæ­¥éª¤ï¼å·ä½å®ç°ä¹å°±æ¯å¦ä¸æç¤ºï¼</p>
<pre><code class="language-cpp">Tokenizer::Tokenizer(Tokenizer&amp;&amp; rhs) noexcept : handle(rhs.handle) {
  rhs.handle = nullptr;
}
</code></pre>
<p>æåè¿æä¸ä¸ªé®é¢ï¼Aéè¿ç§»å¨è¯­ä¹è½¬ç§»å°Bäºï¼Aè¿è½ä½¿ç¨åï¼ä¸è½ä¹æ²¡å¿è¦ä½¿ç¨Aäºï¼æ è®ºæ¯Aå¯¹è±¡åBå¯¹è±¡å¶å®æ¯ä¸ä¸ªæ å¯¹è±¡ï¼å½ç¶åé¨ç®¡ççæ°æ®æåå¯è½æ¾å¨å ä¸ï¼ï¼æèè¯´æ¯ä¸ä¸ªå¼å¯¹è±¡ï¼è¿è·å¼ç¨å¯¹è±¡æèå°åå¯¹è±¡å®å¨ä¸åãç§»å¨è¯­ä¹çæ¬è´¨æ¯å¯¹è±¡æææçè½¬ç§»ï¼è½¬ç§»ä¹ååå¯¹è±¡ä¸­èµæºæææå°±ä¸å­å¨äºï¼å³ä½¿å¼ºè¡è®¿é®ï¼è¦ä¹è®¿é®ä¸å°ï¼è¦ä¹ä¼ç¨åºå´©æºã</p>
<h1 id="4-é«çº§-c-å°è£">4. é«çº§ C++ å°è£</h1>
<h2 id="41-é¶æ³å">4.1 é¶æ³å</h2>
<p>ä½¿ç¨ RAII æºå¶ + ç»å¸äºæ³åæ¥è®¾è®¡ä¸ä¸ªç±»å¯¹è±¡ï¼è¿æä¸ä¸ªä¼ç¹ï¼å°±æ¯ä½¿ç¨è¿ä¸ªç±»å¯¹è±¡ä½ä¸ºæ°æ®æåçç±»ï¼å°±ä¸ç¨åæ¾å¼å®ç°ææå½æ°ãä¸ç¨æ¾å¼å®ç°ææå½æ°ï¼ä¹å°±æå³çä¸ç¨å®ç°æ·è´è¯­ä¹åç§»å¨è¯­ä¹ï¼å®å¨å¯ä»¥ä¾èµç±»å¯¹è±¡æ·è´åç§»å¨çé»è®¤è¡ä¸ºãä¸¾ä¾æ¥è¯´ï¼ä¸ä¸ª<code>MyResource</code>å¯¹è±¡ï¼ç®¡ççä¸æ®µåå­ buffer ï¼å®çç±»å®ä¹ä¸ºï¼</p>
<pre><code class="language-cpp">class MyResource {
public:
    // æé ï¼ç³è¯·èµæº
    MyResource() {
        data = new int[100];
    }

    // ææï¼éæ¾èµæº
    ~MyResource() {
        delete[] data;
    }

    // æ·è´æé ï¼æ·±æ·è´
    MyResource(const MyResource&amp; other) {
        data = new int[100];
        copy(other.data, other.data + 100, data);
    }

    // æ·è´èµå¼
    MyResource&amp; operator=(const MyResource&amp; other) {
        if (this != &amp;other) {
            delete[] data;
            data = new int[100];
            copy(other.data, other.data + 100, data);
        }
        return *this;
    }

    // ç§»å¨æé ï¼æ¥ç®¡èµæº
    MyResource(MyResource&amp;&amp; other) noexcept {
        data = other.data;
        other.data = nullptr;
    }

    // ç§»å¨èµå¼
    MyResource&amp; operator=(MyResource&amp;&amp; other) noexcept {
        if (this != &amp;other) {
            delete[] data;
            data = other.data;
            other.data = nullptr;
        }
        return *this;
    }

private:
    int* data = nullptr;
};
</code></pre>
<p>ä½æ¯å¦ææä½¿ç¨ std å®¹å¨<code>vector</code> ï¼ç¸åºçä»£ç å°±å¯ä»¥ç®åä¸ºï¼</p>
<pre><code class="language-cpp">#include &lt;vector&gt;

class MyResource {
public:
    // æé ï¼èªå¨åéåå­
    MyResource() : data(100) {}  // vector&lt;int&gt; èªå¨åå§åä¸º 100 ä¸ªåç´ 

    // â æ éæ¾å¼å®ä¹ææå½æ°
    // â æ éèªå®ä¹æ·è´æé  / æ·è´èµå¼
    // â æ éèªå®ä¹ç§»å¨æé  / ç§»å¨èµå¼

    // ç¼è¯å¨èªå¨çæççæ¬å·²æ­£ç¡®ãé«æãå¼å¸¸å®å¨

private:
    std::vector&lt;int&gt; data;  // RAII èªå¨ç®¡çåå­
};
</code></pre>
<p>è¿ä¸æ¯å ä¸º <code>vector</code> ä½¿ç¨äºä»ä¹é­æ³ï¼èæ¯ <code>vector</code> æ¬èº«å°±æ¯ä½¿ç¨äº RAII æºå¶ + ç»å¸äºæ³åæ¥è®¾è®¡çä¸ä¸ªæ¨¡æ¿ç±»å¯¹è±¡ï¼å¨ <code>MyResource</code> å¯¹è±¡è¿è¡æ·è´æèç§»å¨çæ¶åï¼ä½ä¸ºæ°æ®æåï¼<code>std::vector&lt;int&gt; data</code>ä¹ä¼éååæ ·çæ·è´æèç§»å¨çè¡ä¸ºï¼å¹¶ä¸é»è®¤çãç±ç¼è¯å¨èªå¨çæççæ¬å°±å¯ä»¥æ­£ç¡®å¤çã</p>
<p>ä»¥ä¸è¿ä¸ªææ³ï¼å°±æ¯ç°ä»£ C++ æ´æ¨èç<strong>é¶æ³åï¼Rule of Zeroï¼</strong>ï¼å°½éä¸è¦æå¨ç®¡çèµæºï¼èæ¯ä½¿ç¨ RAII ç±»åè®©ç¼è¯å¨èªå¨çæææç¹æ®æåå½æ°ãèè¿ä¸ª RAII ç±»åï¼å¯ä»¥æ¯ std çä»»ä½å®¹å¨å¯¹è±¡ãæºè½æéï¼ä¹å¯ä»¥æ¯èªå·±æç§äºæ³åå®ç°çç±»å¯¹è±¡ã</p>
<h2 id="42-æºè½æé">4.2 æºè½æé</h2>
<p>åå°æ¬æå¼å¥çé®é¢ï¼å¦ææçåè¯å¨å®ç°ä¸ååæ·è´è¯­ä¹åç§»å¨è¯­ä¹æä¹åå¢ï¼æ¯ç«é½æ¯æ ·æ¿ä»£ç ï¼åä¸å¥½è¿å®¹æåºé®é¢ãæ­¤æ¶æä»¬å°±å¯ä»¥ä½¿ç¨æºè½æé <code>unique_ptr</code> ãå¸¸è§æä¹ä¸ï¼æä»¬é½ç¥éæºè½æéå¯ä»¥å¨æ²¡æä»»ä½å¶ä»å¯¹è±¡å¼ç¨çæåµä¸èªå¨ <code>delete</code> ï¼å¶å®æºè½æéè¿å¯ä»¥èªå®ä¹èµæºçéæ¾è¡ä¸ºï¼</p>
<pre><code class="language-cpp">#pragma once

#include &lt;memory&gt;
#include &lt;string&gt;

namespace hf {
class Tokenizer {
 public:
  explicit Tokenizer(const std::string&amp; path);

  // ç¼è¯å¨èªå¨çæï¼
  // - ææå½æ°
  // - ç§»å¨æé  / ç§»å¨èµå¼
  // - ç¦æ­¢æ·è´ï¼å ä¸º unique_ptr ä¸å¯æ·è´ï¼

 private:
  std::unique_ptr&lt;void, void (*)(void*)&gt; handle;
};

}  // namespace hf
</code></pre>
<pre><code class="language-cpp">#include "HfTokenizer.h"

#include &lt;stdexcept&gt;

#include "hf_tokenizer_ffi.h"

namespace hf {

static void HandleDeleter(void* handle) noexcept {
  if (handle) {
    tokenizer_destroy(handle);
  }
}

Tokenizer::Tokenizer(const std::string&amp; path)
    : handle(tokenizer_create(path.c_str()), HandleDeleter) {
  if (!handle) {
    throw std::runtime_error("Failed to create tokenizer from " + path);
  }
}

}  // namespace hf
</code></pre>
<p>å¦ä¸å®ç°æç¤ºï¼å½æ° <code>HandleDeleter</code> å°±æ¯ <code>std::unique_ptr&lt;void, void (*)(void*)&gt; handle</code> çèªå®ä¹ææè¡ä¸ºï¼å¨ç±»å¯¹è±¡ææçæ¶åå°±ä¼èªå¨è°ç¨è¿ä¸ªå½æ°éæ¾èµæºãæ¢ç¶èµæºè¢«æºè½æç®¡äºï¼é£ä¹èªç¶å°±ä¸ç¨åææå½æ°ï¼ææå½æ°ä¸ç¨åï¼é£ä¹æ·è´æé å½æ°ãæ·è´èµå¼è¿ç®ç¬¦ãç§»å¨æé å½æ°ä»¥åç§»å¨èµå¼è¿ç®ç¬¦é½å¯ä»¥ä¸ç¨å®ç°ï¼å¨é¨å¯ä»¥ä¾èµç¼è¯å¨èªå¨çæãå½ç¶ï¼ç±äº <code>unique_ptr</code> åªè½ç§»å¨ä¸è½æ·è´ï¼<code>Tokenizer</code>ä¹å°±åªè½ç§»å¨ä¸è½æ·è´ã</p>
<h1 id="5-æ»ç»">5. æ»ç»</h1>
<p>æåï¼ç¬èå°±ç»åº C++ å°è£ C FFI æ¥å£çå®æ´å®ç°ï¼å¦ä¸æç¤ºï¼</p>
<pre><code class="language-cpp">// HfTokenizer.h
#pragma once

#include &lt;memory&gt;
#include &lt;string&gt;

#include "tokenizer_result.h"

namespace hf {
class Tokenizer {
 public:
  explicit Tokenizer(const std::string&amp; path);

  // ç¼è¯å¨èªå¨çæï¼
  // - ææå½æ°ï¼è°ç¨ Deleterï¼
  // - ç§»å¨æé  / ç§»å¨èµå¼
  // - ç¦æ­¢æ·è´ï¼å ä¸º unique_ptr ä¸å¯æ·è´ï¼

  // å¶ä»æ¥å£æ¹æ³
  uint64_t Count(const std::string&amp; text) const;

  // åéå
  using ResultPtr =
      std::unique_ptr&lt;TokenizerResult, void (*)(TokenizerResult*)&gt;;
  ResultPtr Encode(const std::string&amp; text) const;

 private:
  std::unique_ptr&lt;void, void (*)(void*)&gt; handle;
};

}  // namespace hf
</code></pre>
<pre><code class="language-cpp">// HfTokenizer.cpp
#include "HfTokenizer.h"

#include &lt;stdexcept&gt;

#include "hf_tokenizer_ffi.h"

namespace hf {

static void HandleDeleter(void* handle) noexcept {
  if (handle) {
    tokenizer_destroy(handle);
  }
}

static void ResultDeleter(TokenizerResult* p) noexcept {
  if (p) {
    tokenizer_result_free(*p);
    delete p;
  }
}

Tokenizer::Tokenizer(const std::string&amp; path)
    : handle(tokenizer_create(path.c_str()), HandleDeleter) {
  if (!handle) {
    throw std::runtime_error("Failed to create tokenizer from " + path);
  }
}

uint64_t Tokenizer::Count(const std::string&amp; text) const {
  return tokenizer_count(handle.get(), text.c_str());
}

Tokenizer::ResultPtr Tokenizer::Encode(const std::string&amp; text) const {
  auto result = std::make_unique&lt;TokenizerResult&gt;(
      tokenizer_encode(handle.get(), text.c_str()));
  return {result.release(), ResultDeleter};
};

}  // namespace hf
</code></pre>
<p>ä¸ä»æ¯å¥æï¼è¿ä¼ éçæ°æ®å¯¹è±¡ç¬èé½æç®¡ç»æºè½æéï¼ä»èé¿åå¤§éåç¹æ®æåå½æ°è¿äºæ ·æ¿ä»£ç ãä¸å¾ä¸è¯´ï¼RAII çè®¾è®¡æè·¯éå¸¸ç²¾å¦ï¼åæ¶ä¿è¯äºå®å¨æ§ä¸ç®æ´æ§ï¼ç»äººä¸ç§åå½ç¼ç¨åå§ç¶æçæè§ãæè°âå¤§éè³ç®âï¼ä¸æ¯ä»£ç è¶ç¹å¤å°±è¶å®å¨ï¼ä¹ä¸æ¯ä»£ç è¶æ½è±¡å°±è¶åå®³ï¼çæ­£å¥½çä»£ç ï¼æ¯å¨æ­£ç¡®æ§ãå¯ç»´æ¤æ§ä¸ç®æ´æ§ä¹é´åå¾å¹³è¡¡ï¼è®©èµæºç®¡çå¦å¼å¸è¬èªç¶ï¼èéè´æã</p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-31 13:37">2026-01-31 13:36</span>&nbsp;
<a href="https://www.cnblogs.com/charlee44">charlee44</a>&nbsp;
éè¯»(<span id="post_view_count">31</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19557586);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19557586', targetLink: 'https://www.cnblogs.com/charlee44/p/19557586', title: 'C++ å°è£ C FFI æ¥å£æä½³å®è·µï¼ä»¥ Hugging Face Tokenizer ä¸ºä¾' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ä¸å¤©ä¸ä¸ªPythonåºï¼markupsafe - è®©ä½ çå­ç¬¦ä¸²å®å¨åä¼é ]]></title>
    <link>https://www.cnblogs.com/min2k/p/19557576</link>
    <guid>b5d8d6dffd7117a832883be25718ef4f</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/min2k/p/19557576" title="åå¸äº 2026-01-31 13:31">
    <span role="heading" aria-level="2">ä¸å¤©ä¸ä¸ªPythonåºï¼markupsafe - è®©ä½ çå­ç¬¦ä¸²å®å¨åä¼é</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="markupsafe---è®©ä½ çå­ç¬¦ä¸²å®å¨åä¼é">markupsafe - è®©ä½ çå­ç¬¦ä¸²å®å¨åä¼é</h1>
<h2 id="ä¸ä»ä¹æ¯markupsafe">ä¸ãä»ä¹æ¯markupsafeï¼</h2>
<p><strong>markupsafe</strong> æ¯ä¸ä¸ªç¨äºå¤çæ è®°è¯­è¨ï¼å¦HTMLãXMLï¼å­ç¬¦ä¸²ç Python åºã<br>
å®å¯ä»¥å¸®å©ä½ ï¼</p>
<ul>
<li><strong>å®å¨å°è½¬ä¹å­ç¬¦ä¸²</strong>ï¼é²æ­¢è·¨ç«èæ¬ï¼XSSï¼æ»å»ï¼ç¹å«æ¯å½ä½ éè¦å°ç¨æ·è¾å¥æ¾ç¤ºå¨ç½é¡µä¸æ¶ã</li>
<li><strong>æ è®°å®å¨å­ç¬¦ä¸²</strong>ï¼å°ç»è¿è½¬ä¹æä¿¡ä»»çå­ç¬¦ä¸²æ è®°ä¸ºâå®å¨âï¼é¿åéå¤è½¬ä¹ï¼æé«æçã</li>
<li><strong>æ¨¡æ¿å¼æéæ</strong>ï¼å¨åJinja2è¿æ ·çæ¨¡æ¿å¼æä¸­ï¼markupsafeæ®æ¼äºæ ¸å¿è§è²ï¼ç¡®ä¿æ¸²æçHTMLåå®¹æ¯å®å¨çã</li>
</ul>
<h2 id="äºåºç¨åºæ¯">äºãåºç¨åºæ¯</h2>
<p><strong>markupsafe</strong> å¹¿æ³åºç¨äºä»¥ä¸å®éåºæ¯ï¼</p>
<ul>
<li><strong>Webå¼åæ¡æ¶</strong>: å¨FlaskãJinja2ç­Webæ¡æ¶ä¸­ï¼ç¨äºèªå¨è½¬ä¹æ¨¡æ¿æ¸²æçè¾åºï¼é²æ­¢æ³¨å¥æ»å»ã</li>
<li><strong>ç¨æ·çæåå®¹</strong>: å½ä½ çç½ç«åè®¸ç¨æ·è¾å¥å¹¶æ¾ç¤ºåå®¹æ¶ï¼å¦è¯è®ºãè®ºåå¸å­ï¼ï¼markupsafeè½ç¡®ä¿è¿äºåå®¹å¨æ¾ç¤ºæ¶æ¯å®å¨çã</li>
<li><strong>æå»ºå¨æHTML/XML</strong>: å¨ç¨åºä¸­å¨æçæHTMLæXMLçæ®µæ¶ï¼éè¦ç¡®ä¿æææå¥çæ°æ®é½ç»è¿äºæ­£ç¡®çè½¬ä¹ã</li>
</ul>
<h2 id="ä¸å¦ä½å®è£">ä¸ãå¦ä½å®è£</h2>
<ol>
<li>ä½¿ç¨ pip å®è£</li>
</ol>
<pre><code class="language-bash">pip install markupsafe

# å¦æå®è£æ¢çè¯ï¼æ¨èä½¿ç¨å½åéåæº
pip install markupsafe -i https://www.python64.cn/pypi/simple/
</code></pre>
<ol start="2">
<li>ä½¿ç¨ <a href="https://www.min2k.com/tools/python-run/" target="_blank" rel="noopener nofollow">PythonRun</a> å¨çº¿è¿è¡ä»£ç ï¼æ éæ¬å°å®è£ï¼</li>
</ol>
<h2 id="åç¤ºä¾ä»£ç ">åãç¤ºä¾ä»£ç </h2>
<p>è½¬ä¹ç¨æ·è¾å¥ä»¥é²æ­¢XSSæ»å»</p>
<pre><code class="language-python">from markupsafe import escape, Markup

# ç¨æ·è¾å¥ï¼å¯è½åå«æ¶æèæ¬
user_input_raw = "&lt;script&gt;alert('æ¨è¢«æ»å»äºï¼')&lt;/script&gt;"
is_admin = True # åè®¾æä¸ä¸ªæ¡ä»¶å¤æ­ç¨æ·æ¯å¦æ¯ç®¡çå

# ä½¿ç¨escapeè½¬ä¹ç¨æ·è¾å¥
safe_output = escape(user_input_raw)

# æå°è½¬ä¹åçç»æ
print(f"è½¬ä¹åçåå®¹: {safe_output}")

# åè®¾æä¸äºä¿¡ä»»çHTMLåå®¹ï¼æä»¬ä¸å¸æå®è¢«è½¬ä¹
trusted_html = Markup("&lt;b&gt;è¿æ¯å ç²çææ¬&lt;/b&gt;")

# å¦ææ¯ç®¡çåï¼åç´æ¥æ¾ç¤ºåå§è¾å¥ï¼è¿éä»ä¸ºæ¼ç¤ºï¼å®éåºç¨éæå¶è°¨æï¼
if is_admin:
    print(f"ç®¡çåæ¾ç¤ºï¼å±é©ï¼ï¼ï¼{user_input_raw}")
else:
    # å¦åæ¾ç¤ºå®å¨çåå®¹
    print(f"æ®éç¨æ·æ¾ç¤ºï¼å®å¨ï¼ï¼ï¼{safe_output}")

# ç»åä½¿ç¨ï¼Markupæ è®°çåå®¹ä¸ä¼è¢«äºæ¬¡è½¬ä¹
formatted_output = Markup(f"&lt;p&gt;Hello, {safe_output}!&lt;/p&gt;")
print(f"ç»ååçå®å¨HTML: {formatted_output}")

# æ£æ¥æ¯å¦æ¯Markupå®ä¾
if isinstance(formatted_output, Markup):
    print("formatted_output æ¯ä¸ä¸ª Markup å®ä¾ï¼å·²è¢«æ è®°ä¸ºå®å¨ã")
else:
    print("formatted_output ä¸æ¯ Markup å®ä¾ã")
</code></pre>
<p>ä½¿ç¨ <a href="https://www.min2k.com/tools/python-run/?code=from%20markupsafe%20import%20escape%2C%20Markup%0A%0A%23%20%E7%94%A8%E6%88%B7%E8%BE%93%E5%85%A5%EF%BC%8C%E5%8F%AF%E8%83%BD%E5%8C%85%E5%90%AB%E6%81%B6%E6%84%8F%E8%84%9A%E6%9C%AC%0Auser_input_raw%20%3D%20%22%3Cscript%3Ealert%28'%E6%82%A8%E8%A2%AB%E6%94%BB%E5%87%BB%E4%BA%86%EF%BC%81'%29%3C%2Fscript%3E%22%0Ais_admin%20%3D%20True%20%23%20%E5%81%87%E8%AE%BE%E6%9C%89%E4%B8%80%E4%B8%AA%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD%E7%94%A8%E6%88%B7%E6%98%AF%E5%90%A6%E6%98%AF%E7%AE%A1%E7%90%86%E5%91%98%0A%0A%23%20%E4%BD%BF%E7%94%A8escape%E8%BD%AC%E4%B9%89%E7%94%A8%E6%88%B7%E8%BE%93%E5%85%A5%0Asafe_output%20%3D%20escape%28user_input_raw%29%0A%0A%23%20%E6%89%93%E5%8D%B0%E8%BD%AC%E4%B9%89%E5%90%8E%E7%9A%84%E7%BB%93%E6%9E%9C%0Aprint%28f%22%E8%BD%AC%E4%B9%89%E5%90%8E%E7%9A%84%E5%86%85%E5%AE%B9%3A%20%7Bsafe_output%7D%22%29%0A%0A%23%20%E5%81%87%E8%AE%BE%E6%9C%89%E4%B8%80%E4%BA%9B%E4%BF%A1%E4%BB%BB%E7%9A%84HTML%E5%86%85%E5%AE%B9%EF%BC%8C%E6%88%91%E4%BB%AC%E4%B8%8D%E5%B8%8C%E6%9C%9B%E5%AE%83%E8%A2%AB%E8%BD%AC%E4%B9%89%0Atrusted_html%20%3D%20Markup%28%22%3Cb%3E%E8%BF%99%E6%98%AF%E5%8A%A0%E7%B2%97%E7%9A%84%E6%96%87%E6%9C%AC%3C%2Fb%3E%22%29%0A%0A%23%20%E5%A6%82%E6%9E%9C%E6%98%AF%E7%AE%A1%E7%90%86%E5%91%98%EF%BC%8C%E5%88%99%E7%9B%B4%E6%8E%A5%E6%98%BE%E7%A4%BA%E5%8E%9F%E5%A7%8B%E8%BE%93%E5%85%A5%EF%BC%88%E8%BF%99%E9%87%8C%E4%BB%85%E4%B8%BA%E6%BC%94%E7%A4%BA%EF%BC%8C%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E9%9C%80%E6%9E%81%E5%85%B6%E8%B0%A8%E6%85%8E%EF%BC%89%0Aif%20is_admin%3A%0A%20%20%20%20print%28f%22%E7%AE%A1%E7%90%86%E5%91%98%E6%98%BE%E7%A4%BA%EF%BC%88%E5%8D%B1%E9%99%A9%EF%BC%81%EF%BC%89%EF%BC%9A%7Buser_input_raw%7D%22%29%0Aelse%3A%0A%20%20%20%20%23%20%E5%90%A6%E5%88%99%E6%98%BE%E7%A4%BA%E5%AE%89%E5%85%A8%E7%9A%84%E5%86%85%E5%AE%B9%0A%20%20%20%20print%28f%22%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E6%98%BE%E7%A4%BA%EF%BC%88%E5%AE%89%E5%85%A8%EF%BC%81%EF%BC%89%EF%BC%9A%7Bsafe_output%7D%22%29%0A%0A%23%20%E7%BB%93%E5%90%88%E4%BD%BF%E7%94%A8%EF%BC%8CMarkup%E6%A0%87%E8%AE%B0%E7%9A%84%E5%86%85%E5%AE%B9%E4%B8%8D%E4%BC%9A%E8%A2%AB%E4%BA%8C%E6%AC%A1%E8%BD%AC%E4%B9%89%0Aformatted_output%20%3D%20Markup%28f%22%3Cp%3EHello%2C%20%7Bsafe_output%7D!%3C%2Fp%3E%22%29%0Aprint%28f%22%E7%BB%84%E5%90%88%E5%90%8E%E7%9A%84%E5%AE%89%E5%85%A8HTML%3A%20%7Bformatted_output%7D%22%29%0A%0A%23%20%E6%A3%80%E6%9F%A5%E6%98%AF%E5%90%A6%E6%98%AFMarkup%E5%AE%9E%E4%BE%8B%0Aif%20isinstance%28formatted_output%2C%20Markup%29%3A%0A%20%20%20%20print%28%22formatted_output%20%E6%98%AF%E4%B8%80%E4%B8%AA%20Markup%20%E5%AE%9E%E4%BE%8B%EF%BC%8C%E5%B7%B2%E8%A2%AB%E6%A0%87%E8%AE%B0%E4%B8%BA%E5%AE%89%E5%85%A8%E3%80%82%22%29%0Aelse%3A%0A%20%20%20%20print%28%22formatted_output%20%E4%B8%8D%E6%98%AF%20Markup%20%E5%AE%9E%E4%BE%8B%E3%80%82%22%29" target="_blank" rel="noopener nofollow">PythonRun</a> å¨çº¿è¿è¡è¿æ®µä»£ç ï¼ç»æå¦ä¸ï¼</p>
<pre><code class="language-text">è½¬ä¹åçåå®¹: &amp;lt;script&amp;gt;alert(&amp;#39;æ¨è¢«æ»å»äºï¼&amp;#39;)&amp;lt;/script&amp;gt;
ç®¡çåæ¾ç¤ºï¼å±é©ï¼ï¼ï¼&lt;script&gt;alert('æ¨è¢«æ»å»äºï¼')&lt;/script&gt;
ç»ååçå®å¨HTML: &lt;p&gt;Hello, &amp;lt;script&amp;gt;alert(&amp;#39;æ¨è¢«æ»å»äºï¼&amp;#39;)&amp;lt;/script&amp;gt;!&lt;/p&gt;
formatted_output æ¯ä¸ä¸ª Markup å®ä¾ï¼å·²è¢«æ è®°ä¸ºå®å¨ã
</code></pre>
<p>ä½¿ç¨ <a href="https://www.min2k.com/tools/mermaid/?code=flowchart%20TB%0A%20%20A%5B%E5%BC%80%E5%A7%8B%5D%20--%3E%20B%7B%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7%E8%BE%93%E5%85%A5%E5%92%8C%E7%AE%A1%E7%90%86%E5%91%98%E7%8A%B6%E6%80%81%7D%3B%0A%20%20B%20--%3E%20C%5B%E4%BD%BF%E7%94%A8escape%E8%BD%AC%E4%B9%89%E7%94%A8%E6%88%B7%E8%BE%93%E5%85%A5%5D%3B%0A%20%20C%20--%3E%20D%5B%E6%89%93%E5%8D%B0%E8%BD%AC%E4%B9%89%E5%90%8E%E7%9A%84%E5%86%85%E5%AE%B9%5D%3B%0A%20%20D%20--%3E%20E%7B%E5%A6%82%E6%9E%9C%20isAdmin%20%E4%B8%BA%20True%3F%7D%3B%0A%20%20E%20--%20%E6%98%AF%20--%3E%20F%5B%E6%89%93%E5%8D%B0%E5%8E%9F%E5%A7%8B%E7%94%A8%E6%88%B7%E8%BE%93%E5%85%A5%20%28%E5%8D%B1%E9%99%A9%29%5D%3B%0A%20%20E%20--%20%E5%90%A6%20--%3E%20G%5B%E6%89%93%E5%8D%B0%E5%AE%89%E5%85%A8%E7%9A%84%E7%94%A8%E6%88%B7%E8%BE%93%E5%85%A5%5D%3B%0A%20%20F%20--%3E%20H%5B%E5%88%9B%E5%BB%BA%E5%AE%89%E5%85%A8%E7%9A%84%20Markup%20%E5%AE%9E%E4%BE%8B%5D%3B%0A%20%20G%20--%3E%20H%3B%0A%20%20H%20--%3E%20I%5B%E6%89%93%E5%8D%B0%E7%BB%84%E5%90%88%E5%90%8E%E7%9A%84%E5%AE%89%E5%85%A8HTML%5D%3B%0A%20%20I%20--%3E%20J%7B%E6%A3%80%E6%9F%A5%20formatted_output%20%E6%98%AF%E5%90%A6%E4%B8%BA%20Markup%20%E5%AE%9E%E4%BE%8B%3F%7D%3B%0A%20%20J%20--%20%E6%98%AF%20--%3E%20K%5B%E6%89%93%E5%8D%B0%E6%98%AF%20Markup%20%E5%AE%9E%E4%BE%8B%5D%3B%0A%20%20J%20--%20%E5%90%A6%20--%3E%20L%5B%E6%89%93%E5%8D%B0%E4%B8%8D%E6%98%AF%20Markup%20%E5%AE%9E%E4%BE%8B%5D%3B%0A%20%20K%20--%3E%20M%5B%E7%BB%93%E6%9D%9F%5D%3B%0A%20%20L%20--%3E%20M%3B" target="_blank" rel="noopener nofollow">MermaidGo</a> ç»å¶ç¤ºä¾ä»£ç çæµç¨å¾ï¼ç»æå¦ä¸ï¼</p>
<p><img alt="MermerGoçmarkupsafeæµç¨å¾" loading="lazy" data-src="https://img2024.cnblogs.com/blog/70894/202601/70894-20260131132929581-1245770167.jpg" class="lazyload"></p>
<h2 id="äºå­¦ä¹ èµæº">äºãå­¦ä¹ èµæº</h2>
<ol>
<li>å¼æºé¡¹ç®ï¼<a href="https://github.com/pallets/markupsafe" target="_blank" rel="noopener nofollow">markupsafe</a></li>
<li>ä¸­æèªè¿°ï¼<a href="https://www.python64.cn/readme/markupsafe/" target="_blank" rel="noopener nofollow">REMDME</a></li>
<li>å¨çº¿è¿è¡ï¼<a href="https://www.min2k.com/tools/python-run/" target="_blank" rel="noopener nofollow">PythonRun</a></li>
</ol>
<blockquote>
<p>å¦æè¿ç¯æç« å¯¹ä½ æå¸®å©ï¼æ¬¢è¿ç¹èµãæ¶èãè½¬åï¼<br>
å­¦ä¹ è¿ç¨ä¸­æä»»ä½é®é¢ï¼æ¬¢è¿å¨è¯è®ºåºçè¨äº¤æµï½</p>
</blockquote>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-31 13:32">2026-01-31 13:31</span>&nbsp;
<a href="https://www.cnblogs.com/min2k">æç¼ç¨</a>&nbsp;
éè¯»(<span id="post_view_count">45</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19557576);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19557576', targetLink: 'https://www.cnblogs.com/min2k/p/19557576', title: 'ä¸å¤©ä¸ä¸ªPythonåºï¼markupsafe - è®©ä½ çå­ç¬¦ä¸²å®å¨åä¼é' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ä»0å°1ï¼å¿«éè®­ç»å¹¶ä½¿ç¨YOLOæ¨¡å ]]></title>
    <link>https://www.cnblogs.com/ClownLMe/p/19559180</link>
    <guid>65df351b854a545c186b8f26d64191cd</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ClownLMe/p/19559180" title="åå¸äº 2026-01-31 21:54">
    <span role="heading" aria-level="2">ä»0å°1ï¼å¿«éè®­ç»å¹¶ä½¿ç¨YOLOæ¨¡å</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="ç®ä»">ç®ä»</h1>
<p><strong>YOLO</strong>æ¯ç®åè®¡ç®æºè§è§é¢åæåæ²¿ãåºç¨æå¹¿æ³ç<strong>ç®æ æ£æµ</strong>ç®æ³æ¡æ¶ï¼ä»è½å¿«éè¯å«åºåç®æ ï¼å¹¿æ³åºç¨äºæ¸¸æï¼æ äººé©¾é©¶ï¼å·¥ä¸ç­é¢åã</p>
<p>ä»¥è¯å«èº²é¿æè½æ»åçæ¸¸æçç©ä½å¾çä½ä¸ºä¾å­ã</p>
<h1 id="ä¸ç¯å¢éç½®">ä¸ï¼ç¯å¢éç½®</h1>
<pre><code class="language-bash">pip install ultralytics
</code></pre>
<h1 id="äºåå¤æ°æ®é">äºï¼åå¤æ°æ®é</h1>
<p>è¿ä¸ªæ ¼å¼ç®å½å¦ä¸ï¼</p>
<pre><code class="language-bash">my_dataset/
âââ data.yaml # éç½®æä»¶ï¼å®ä¹è·¯å¾åç±»å«ï¼
âââ train/ #è®­ç»æ°æ®é
â   âââ images/ # è®­ç»å¾ç
â   âââ labels/ # æ æ³¨æä»¶ (.txt)
âââ val/ #éªè¯æ°æ®é
    âââ images/ 
    âââ labels/ 
</code></pre>
<h3 id="datayml">data.yml</h3>
<pre><code class="language-yaml">path: D:\D_MyProject\Ai\game_ai\my_dataset #æ°æ®éè·¯å¾
train: train/images #è®­ç»éå¾çè·¯å¾
val: val/images #éªè¯éå¾çè·¯å¾

nc: 3 #æ è®°ä¸ªæ°
names:  #æ¯ä¸ªæ è®°çåç§°
&nbsp; 0: player
&nbsp; 1: enemy
&nbsp; 2: game_over
</code></pre>
<h3 id="ä¸é¢æ¯ç¨aiçæäºæ°æ®éççæèæ¬">ä¸é¢æ¯ç¨AIçæäºæ°æ®éççæèæ¬</h3>
<p><mark>æ°æ®éå¤ªå¤äºï¼è¿éä¸ºäºæ¼ç¤ºï¼æèå­¦ä¹ ï¼å¯ä»¥ç´æ¥ä½¿ç¨ä¸é¢èæ¬</mark></p>
<pre><code class="language-python">import pygame
import random
import sys
import os
import shutil

# =================éç½®åºå=================
# æ°æ®éæ ¹ç®å½åç§°
DATASET_ROOT = "my_dataset"
# ééæ»æ°é
MAX_IMAGES = 1000
# è®­ç»éå æ¯ (0.8 = 80% è®­ç», 20% éªè¯)
TRAIN_RATIO = 0.8

# ================= 1. ç¯å¢æ¸çä¸ç®å½åå»º =================
print(f"ð æ­£å¨åå§åæ°æ®éç®å½: {DATASET_ROOT} ...")

# å¦æç®å½å·²å­å¨ï¼åå é¤ï¼é²æ­¢æ§æ°æ®æ··å¥ï¼ï¼ç¡®ä¿æ°æ®çº¯å
if os.path.exists(DATASET_ROOT):
    shutil.rmtree(DATASET_ROOT)

# åå»º YOLO æ åç®å½ç»æ
for split in ['train', 'val']:
    os.makedirs(os.path.join(DATASET_ROOT, split, 'images'), exist_ok=True)
    os.makedirs(os.path.join(DATASET_ROOT, split, 'labels'), exist_ok=True)

# ================= 2. èªå¨çæ data.yaml =================
yaml_content = f"""
path: {os.path.abspath(DATASET_ROOT)} # ä½¿ç¨ç»å¯¹è·¯å¾ï¼é²æ­¢æ¥é
train: train/images
val: val/images

nc: 3
names:
  0: player
  1: enemy
  2: game_over
"""
with open(os.path.join(DATASET_ROOT, "data.yaml"), "w", encoding='utf-8') as f:
    f.write(yaml_content)
print("â data.yaml éç½®æä»¶å·²çæã")

# ================= 3. æ¸¸æä¸ééé»è¾ =================
pygame.init()
WIDTH, HEIGHT = 800, 600
# ä½¿ç¨ hidden æ¨¡å¼ææ­£å¸¸æ¨¡å¼åå¯ï¼è¿éç¨æ­£å¸¸æ¨¡å¼æ¹ä¾¿ä½ çå°è¿åº¦
screen = pygame.display.set_mode((WIDTH, HEIGHT))
pygame.display.set_caption("Auto Data Generator")
clock = pygame.time.Clock()

font_big = pygame.font.SysFont("monospace", 50)
font_small = pygame.font.SysFont("monospace", 35)

# æ¸¸æç¶æ
player_size, enemy_size = 50, 50
player_x = WIDTH // 2
player_y = HEIGHT - player_size - 10
enemies = []

img_count = 0
GAMEPLAY_LIMIT = int(MAX_IMAGES * 0.9) # 90% æ­£å¸¸æ¸¸æï¼10% Game Over

print(f"ð¸ å¼å§éé {MAX_IMAGES} å¼ å¾ç (èªå¨åå Train/Val)...")

while img_count &lt; MAX_IMAGES:
    # å¤çéåºäºä»¶ï¼é²æ­¢å¡æ­»
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            pygame.quit()
            sys.exit()

    screen.fill((0, 0, 0))
    labels = [] # å­å¨å½åå¸§çæ ç­¾
    dw, dh = 1.0 / WIDTH, 1.0 / HEIGHT # å½ä¸åç³»æ°

    # --- é»è¾åæ¯ï¼æ­£å¸¸æ¸¸æ vs Game Over ---
    if img_count &lt; GAMEPLAY_LIMIT:
        # A. æ­£å¸¸æ¸¸æç»é¢
        # 1. ç©å®¶ç§»å¨
        if random.random() &lt; 0.2: # å¢å ç§»å¨é¢ç
            player_x += random.choice([-15, 15])
            player_x = max(0, min(WIDTH - player_size, player_x))

        # 2. æäººçæä¸ç§»å¨
        if random.randint(0, 20) == 0: # å¢å æäººå¯åº¦
            enemies.append([random.randint(0, WIDTH - enemy_size), 0])
        
        for enemy in enemies: enemy[1] += 15 # å å¿«ä¸è½éåº¦
        enemies = [e for e in enemies if e[1] &lt; HEIGHT]

        # 3. ç»å¶ç©å®¶ (Class 0)
        pygame.draw.rect(screen, (50, 150, 255), (player_x, player_y, player_size, player_size))
        # è®¡ç® YOLO åæ  (class x_center y_center width height)
        px, py = (player_x + player_size/2) * dw, (player_y + player_size/2) * dh
        labels.append(f"0 {px:.6f} {py:.6f} {player_size*dw:.6f} {player_size*dh:.6f}")

        # 4. ç»å¶æäºº (Class 1)
        for e in enemies:
            pygame.draw.rect(screen, (255, 50, 50), (e[0], e[1], enemy_size, enemy_size))
            ex, ey = (e[0] + enemy_size/2) * dw, (e[1] + enemy_size/2) * dh
            labels.append(f"1 {ex:.6f} {ey:.6f} {enemy_size*dw:.6f} {enemy_size*dh:.6f}")

    else:
        # B. Game Over ç»é¢ (Class 2)
        text_surf = font_big.render("GAME OVER", True, (255, 50, 50))
        
        # éæºæå¨ä½ç½®ï¼é²æ­¢è¿æå
        off_x, off_y = random.randint(-50, 50), random.randint(-50, 50)
        text_x = WIDTH // 2 - text_surf.get_width() // 2 + off_x
        text_y = HEIGHT // 2 - 100 + off_y
        screen.blit(text_surf, (text_x, text_y))

        # å¹²æ°é¡¹
        score_surf = font_small.render(f"Score: {random.randint(0,999)}", True, (255,255,255))
        screen.blit(score_surf, (WIDTH//2 - score_surf.get_width()//2, HEIGHT//2 + 50))

        # è®°å½æ ç­¾
        tw, th = text_surf.get_width(), text_surf.get_height()
        tx, ty = (text_x + tw/2) * dw, (text_y + th/2) * dh
        labels.append(f"2 {tx:.6f} {ty:.6f} {tw*dw:.6f} {th*dh:.6f}")

    # ================= 4. ä¿å­é»è¾ (æ ¸å¿ä¿®æ¹) =================
    pygame.display.flip()
    
    # éæ ·çï¼ä¸æ¯æ¯ä¸å¸§é½ä¿å­ï¼é²æ­¢éå¤åº¦è¿é« (è¿éè®¾ä¸º 30% æ¦çä¿å­)
    if random.random() &lt; 0.3:
        # A. å³å®æ¯å» Train è¿æ¯ Val
        split_folder = "train" if random.random() &lt; TRAIN_RATIO else "val"
        
        # B. çææä»¶å
        filename = f"{img_count:06d}"
        img_save_path = os.path.join(DATASET_ROOT, split_folder, "images", f"{filename}.jpg")
        lbl_save_path = os.path.join(DATASET_ROOT, split_folder, "labels", f"{filename}.txt")

        # C. ä¿å­å¾ç
        pygame.image.save(screen, img_save_path)

        # D. ä¿å­æ ç­¾
        with open(lbl_save_path, "w") as f:
            f.write("\n".join(labels))

        img_count += 1
        
        # æå°è¿åº¦æ¡
        print(f"[{split_folder.upper()}] è¿åº¦: {img_count}/{MAX_IMAGES}", end="\r")

    # å éæ¨¡æï¼ä¸è¦åç´åæ­¥ï¼è¶å¿«è¶å¥½
    clock.tick(0) 

pygame.quit()
print(f"\n\nâ¨ å¨é¨å®æï¼æ°æ®éå·²å°±ç»ªï¼{os.path.abspath(DATASET_ROOT)}")
print("ð¡ ä¸ä¸æ­¥ï¼ç´æ¥è¿è¡ model.train(data='my_dataset/data.yaml')")
</code></pre>
<h1 id="ä¸è®­ç»yoloæ¨¡å">ä¸ï¼è®­ç»YOLOæ¨¡å</h1>
<p>å¯ä»¥çå°ï¼ä½¿ç¨<code>ultralytics</code>æ¡æ¶è®­ç»YOLOçä»£ç éå¸¸ç®åï¼åªéè¦å è¡<br>
<mark><strong>æ³¨æï¼è¿éYOLOä¼èªå¨ä¸è½½æ¨¡åå¹¶è®­ç»ï¼ä¸è½½æ¶å¤±è´¥å¯è½éè¦ææ¢¯å­</strong></mark></p>
<pre><code class="language-python">from ultralytics import YOLO

def train_model():
    #å è½½æ¨¡å
    model = YOLO("yolo11n.pt") 

    #å¼å§è®­ç»
    print("å¼å§è®­ç»...")
    results = model.train(
        data="my_dataset/data.yaml", #æ°æ®ééç½®æä»¶
        epochs=30, #è®­ç»è½®æ°
        imgsz=640, #å¾çè¾å¥å°ºå¯¸
        batch=16, #æ¾å­å¤å¤§å¯ä»¥æ¹å¤§ï¼æ¯å¦ 32 æ 64
        device=0, #å¼ºå¶ä½¿ç¨ç¬¬ä¸å¼ æ¾å¡ (éè¦CUDA)
        workers=0, #Windowsä¸è®¾ä¸º0é²æ­¢å¤è¿ç¨æ¥é
        project="dodge_project",#ä¿å­è·¯å¾
        name="ai_model" #è®­ç»è¿è¡åç§°
    )
    print(f"è®­ç»å®æï¼æä½³æ¨¡åä¿å­å¨: {results.save_dir}/weights/best.pt")

if __name__ == "__main__":
    train_model()
</code></pre>
<h1 id="åä½¿ç¨yoloæ¨¡å">åï¼ä½¿ç¨YOLOæ¨¡å</h1>
<pre><code class="language-python">from ultralytics import YOLO

#éç½®è·¯å¾
MODEL_PATH = "dodge_project/ai_model/weights/best.pt" 
PIC_PATH = "my_dataset/val/images/000045.jpg"

#å è½½æ¨¡å
model = YOLO(MODEL_PATH)
print(f"æ¨¡åå è½½æå")

#è¯å«å¾ç
results = model.predict(PIC_PATH, verbose=False, conf=0.4, imgsz=640)
result = results[0]

#è·åä¿¡æ¯å¹¶æå°
for box in result.boxes:
    # è·ååæ  (x1, y1, x2, y2)ãç±»å« ID åç½®ä¿¡åº¦
    x1, y1, x2, y2 = map(int, box.xyxy[0])
    cls_id = int(box.cls[0])
    conf = float(box.conf[0])
    
    # ç±»å«åç§°æ å°
    names = {0: "Player", 1: "Enemy", 2: "Game Over"}
    label = names.get(cls_id, f"Unknown({cls_id})")
    print(f"æ¾å°ç©ä½: [{label:10}] | ç½®ä¿¡åº¦: {conf:.2f} | åæ : ({x1}, {y1}) -&gt; ({x2}, {y2})")

#å±ç¤ºå¾ç
result.show()
</code></pre>
<p><strong>å¦æâ¤åæ¬¢â¤æ¬ç³»åæç¨ï¼å°±ç¹ä¸ªå³æ³¨å§ï¼åç»­ä¸å®ææ´æ°~</strong></p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-31 21:55">2026-01-31 21:54</span>&nbsp;
<a href="https://www.cnblogs.com/ClownLMe">ClownLMe</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19559180);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19559180', targetLink: 'https://www.cnblogs.com/ClownLMe/p/19559180', title: 'ä»0å°1ï¼å¿«éè®­ç»å¹¶ä½¿ç¨YOLOæ¨¡å' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Clawdbot æ¯å¦ä½å®ç°æ°¸ä¹è®°å¿çï¼ ]]></title>
    <link>https://www.cnblogs.com/didispace/p/19559022</link>
    <guid>ff7c5e3bf90d53bea0578f532f36d30b</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/didispace/p/19559022" title="åå¸äº 2026-01-31 20:27">
    <span role="heading" aria-level="2">Clawdbot æ¯å¦ä½å®ç°æ°¸ä¹è®°å¿çï¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>ä½ æ¯å¦æ¾ç»åAIå©æèäºä¸æ´æï¼ç¬¬äºå¤©æå¼å¯¹è¯å´åç°å®å®å¨å¿äºä½ ä»¬è®¨è®ºè¿çå³é®ç»èï¼æèå½ä½ å¨å¤ä¸ªé¡¹ç®ä¹é´åæ¢æ¶ï¼AIæ»æ¯å¨é®"ä½ æçæ¯åªä¸ªAPI"ï¼è®©ä½ ä¸åå¶ç¦å°éå¤èæ¯ä¿¡æ¯ãè¿ç§"éé±¼å¼è®°å¿"æ¯å½ä¸å¤§å¤æ°äºç«¯AIäº§åçéçââå®ä»¬è¦ä¹åªè½è®°ä½æéçä¸ä¸æï¼è¦ä¹ææææ°æ®é½å­å¨å¨ååçæå¡å¨ä¸ã</p>
<p>ä½å¦ææä¸ä¸ªAIå©æï¼å®è½åä¸ä½çæ­£çç§äººå©çé£æ ·ï¼æ°¸è¿è®°ä½ä½ çåå¥½ãä½ çé¡¹ç®ç»èãçè³ä½ ä¸ä¸ªæåæè¿çå°ä¹ æ¯ï¼æ´å¦çæ¯ï¼è¿äºè®°å¿å®å¨å­å¨å¨ä½ èªå·±ççµèä¸ï¼ç±ä½ å¨æææ§ã</p>
<p>è¿å°±æ¯Clawdbotæ­£å¨åçäºæãä½ä¸ºä¸æ¬¾å¼æºçä¸ªäººAIå©æï¼Clawdbotå¨GitHubä¸å·²ç»è·å¾äºè¶è¿125,000ä¸ªStarãä¸è¿è¡å¨äºç«¯çChatGPTæClaudeä¸åï¼Clawdbotç´æ¥è¿è¡å¨ä½ çæ¬å°æºå¨ä¸ï¼å¹¶ä¸è½å¤éæå°ä½ æ¥å¸¸ä½¿ç¨çèå¤©å¹³å°ä¸­ï¼DiscordãWhatsAppãTelegramç­ï¼ã</p>
<p>å®ä¸ä»æ¯ä¸ä¸ªèå¤©æºå¨äººï¼æ´æ¯ä¸ä¸ªè½èªä¸»å¤çå®éä»»å¡çå©æï¼ç®¡çé®ä»¶ãå®ææ¥åãå¤çèªç­å¼æºãæè®¡åè¿è¡åå°ä»»å¡ãä½æå¸å¼æçæ¯å®çæä¹åè®°å¿ç³»ç»ââå®è½å®ç°24/7çå¨å¤©åä¸ä¸æä¿æï¼è®°ä½å¯¹è¯åå®¹ï¼å¹¶æ éæå°åºäºä¹åçäº¤äºè¿è¡ç´¯ç§¯ã</p>
<p>å¦æä½ è¯»è¿æä¹åå³äºChatGPTè®°å¿åClaudeè®°å¿çæç« ï¼å°±ç¥éæå¯¹ä¸åAIäº§åå¦ä½å¤çè®°å¿è¿ä¸ªé®é¢éå¸¸çè¿·ãClawdbotéç¨äºä¸ç§æªç¶ä¸åçæ¹æ³ï¼å®ä¸æ¯åºäºäºç«¯ãç±å¬å¸æ§å¶çè®°å¿ï¼èæ¯å°ä¸åä¿å­å¨æ¬å°ï¼è®©ç¨æ·å®å¨æ¥æèªå·±çä¸ä¸æåæè½æ°æ®ã</p>
<p>è®©æä»¬ä¸èµ·æ·±å¥äºè§£å®æ¯å¦ä½å·¥ä½çã</p>
<blockquote>
<p>ä»¥ä¸åå®¹ç¿»è¯èª<a href="https://manthanguptaa.in/posts/clawdbot_memory" target="_blank" rel="noopener nofollow">ãHow Clawdbot Remembers Everythingã</a></p>
</blockquote>
<h2 id="ä¸ä¸ææ¯å¦ä½æå»ºç">ä¸ä¸ææ¯å¦ä½æå»ºç</h2>
<p>å¨æ·±å¥æ¢è®¨è®°å¿ä¹åï¼æä»¬åæ¥çè§£æ¨¡åå¨æ¯æ¬¡è¯·æ±æ¶è½çå°ä»ä¹ï¼</p>
<pre><code class="language-text">[0] ç³»ç»æç¤ºè¯ï¼éææä»¤ + æ¡ä»¶æä»¤ï¼
[1] é¡¹ç®ä¸ä¸æï¼å¼å¯¼æä»¶ï¼AGENTS.mdãSOUL.md ç­ï¼
[2] å¯¹è¯åå²ï¼æ¶æ¯ãå·¥å·è°ç¨ãåç¼©æè¦ï¼
[3] å½åæ¶æ¯
</code></pre>
<p>ç³»ç»æç¤ºè¯å®ä¹äºAgentçè½ååå¯ç¨å·¥å·ãä¸è®°å¿ç¸å³çæ¯"é¡¹ç®ä¸ä¸æ"ï¼å®åå«äºç¨æ·å¯ç¼è¾çMarkdownæä»¶ï¼è¿äºæä»¶ä¼è¢«æ³¨å¥å°æ¯æ¬¡è¯·æ±ä¸­ï¼</p>
<p>è¿äºæä»¶ä½äºAgentçå·¥ä½ç©ºé´ä¸­ï¼ä¸è®°å¿æä»¶å¹¶å­ï¼ä½¿å¾æ´ä¸ªAgentçéç½®åå¾éæä¸å¯ç¼è¾ã</p>
<h2 id="ä¸ä¸æ-vs-è®°å¿">ä¸ä¸æ vs è®°å¿</h2>
<p>çè§£ä¸ä¸æåè®°å¿ä¹é´çåºå«ï¼æ¯çè§£Clawdbotçåºç¡ã</p>
<p><strong>ä¸ä¸æ</strong>æ¯æ¨¡åå¨åæ¬¡è¯·æ±ä¸­è½çå°çä¸åï¼</p>
<pre><code class="language-text">ä¸ä¸æ = ç³»ç»æç¤ºè¯ + å¯¹è¯åå² + å·¥å·ç»æ + éä»¶
</code></pre>
<p>ä¸ä¸æçç¹æ§ï¼</p>
<ul>
<li><strong>ä¸´æ¶ç</strong>ââåªå­å¨äºæ¬æ¬¡è¯·æ±æé´</li>
<li><strong>æéç</strong>ââåéäºæ¨¡åçä¸ä¸æçªå£ï¼ä¾å¦20ä¸tokenï¼</li>
<li><strong>æè´µç</strong>ââæ¯ä¸ªtokené½è®¡å¥APIææ¬åéåº¦</li>
</ul>
<p><strong>è®°å¿</strong>æ¯å­å¨å¨ç£çä¸çåå®¹ï¼</p>
<pre><code class="language-text">è®°å¿ = MEMORY.md + memory/*.md + ä¼è¯è½¬å½æä»¶
</code></pre>
<p>è®°å¿çç¹æ§ï¼</p>
<ul>
<li><strong>æä¹ç</strong>ââå¨éå¯ãæ¥å¤ä¸æ¥ãæå¤ä¸æåä¾ç¶å­å¨</li>
<li><strong>æ éç</strong>ââå¯ä»¥æ éå¢é¿</li>
<li><strong>ä½ææ¬ç</strong>ââå­å¨ä¸äº§çAPIè´¹ç¨</li>
<li><strong>å¯æç´¢ç</strong>ââå»ºç«ç´¢å¼ä»¥æ¯æè¯­ä¹æ£ç´¢</li>
</ul>
<h2 id="è®°å¿å·¥å·">è®°å¿å·¥å·</h2>
<p>Agentéè¿ä¸¤ä¸ªä¸ç¨å·¥å·æ¥è®¿é®è®°å¿ï¼</p>
<h3 id="1-memory_search">1. memory_search</h3>
<p><strong>ç¨é</strong>ï¼å¨æææä»¶ä¸­æ¥æ¾ç¸å³çè®°å¿</p>
<pre><code class="language-json">{
  "name": "memory_search",
  "description": "å¼ºå¶æ§åå¿æ­¥éª¤ï¼å¨åç­å³äºä¹åå·¥ä½ãå³ç­ãæ¥æãäººåãåå¥½æå¾åäºé¡¹çé®é¢ä¹åï¼å¯¹MEMORY.mdåmemory/*.mdè¿è¡è¯­ä¹æç´¢",
  "parameters": {
    "query": "æä»¬å¯¹APIåäºä»ä¹å³å®ï¼",
    "maxResults": 6,
    "minScore": 0.35
  }
}
</code></pre>
<p><strong>è¿åç»æ</strong>ï¼</p>
<pre><code class="language-json">{
  "results": [
    {
      "path": "memory/2026-01-20.md",
      "startLine": 45,
      "endLine": 52,
      "score": 0.87,
      "snippet": "## API è®¨è®º\nå³å®ä¸ºäºç®åèµ·è§ä½¿ç¨RESTèä¸æ¯GraphQL...",
      "source": "memory"
    }
  ],
  "provider": "openai",
  "model": "text-embedding-3-small"
}
</code></pre>
<h3 id="2-memory_get">2. memory_get</h3>
<p><strong>ç¨é</strong>ï¼å¨æ¾å°åå®¹åè¯»åå·ä½åå®¹</p>
<pre><code class="language-json">{
  "name": "memory_get",
  "description": "å¨ä½¿ç¨memory_searchåï¼ä»è®°å¿æä»¶ä¸­è¯»åç¹å®è¡",
  "parameters": {
    "path": "memory/2026-01-20.md",
    "from": 45,
    "lines": 15
  }
}
</code></pre>
<p><strong>è¿åç»æ</strong>ï¼</p>
<pre><code class="language-json">{
  "path": "memory/2026-01-20.md",
  "text": "## API è®¨è®º\n\nä¸å¢éè®¨è®ºAPIæ¶æã\n\n### å³ç­\næä»¬éæ©RESTèéGraphQLï¼åå å¦ä¸ï¼\n1. å®ç°æ´ç®å\n2. æ´å¥½çç¼å­æ¯æ\n3. å¢éæ´çæ\n\n### ç«¯ç¹\n- GET /users\n- POST /auth/login\n- GET /projects/:id"
}
</code></pre>
<h3 id="åå¥è®°å¿">åå¥è®°å¿</h3>
<p>å¹¶æ²¡æä¸é¨çmemory_writeå·¥å·ãAgentä½¿ç¨æ åçåå¥åç¼è¾å·¥å·æ¥åå¥è®°å¿ââè¿äºå·¥å·å®æ¬æ¥å°±å¨ç¨äºå¤çä»»ä½æä»¶ãç±äºè®°å¿å°±æ¯æ®éçMarkdownï¼ä½ ä¹å¯ä»¥æå¨ç¼è¾è¿äºæä»¶ï¼å®ä»¬ä¼è¢«èªå¨éæ°ç´¢å¼ï¼ã</p>
<p>åå¥ä½ç½®çå³ç­æ¯éè¿AGENTS.mdä¸­çæç¤ºæ¥é©±å¨çï¼</p>
<p>å¨é¢åç¼©å·æ°åä¼è¯ç»ææ¶ï¼ä¹ä¼èªå¨è¿è¡åå¥ï¼åç»­ç« èä¼ä»ç»ï¼ã</p>
<h2 id="è®°å¿å­å¨">è®°å¿å­å¨</h2>
<p>Clawdbotçè®°å¿ç³»ç»å»ºç«å¨"è®°å¿å°±æ¯Agentå·¥ä½ç©ºé´ä¸­ççº¯Markdown"è¿ä¸ååä¹ä¸ã</p>
<h3 id="åå±è®°å¿ç³»ç»">åå±è®°å¿ç³»ç»</h3>
<p>è®°å¿ä½äºAgentçå·¥ä½ç©ºé´ä¸­ï¼é»è®¤ï¼~/clawd/ï¼ï¼</p>
<pre><code class="language-text">~/clawd/
âââ MEMORY.md              - ç¬¬äºå±ï¼é¿æç­åçç¥è¯
âââ memory/
    âââ 2026-01-26.md      - ç¬¬ä¸å±ï¼ä»å¤©çç¬è®°
    âââ 2026-01-25.md      - æ¨å¤©çç¬è®°
    âââ 2026-01-24.md      - ...ä»¥æ­¤ç±»æ¨
    âââ ...
</code></pre>
<p><strong>ç¬¬ä¸å±ï¼æ¯æ¥æ¥å¿ï¼memory/YYYY-MM-DD.mdï¼</strong></p>
<p>è¿äºæ¯ä»è¿½å çæ¯æ¥ç¬è®°ï¼Agentä¼å¨ä¸å¤©ä¸­éæ¶åå¥ãå½Agentæ³è¦è®°ä½æäºï¼æè¢«æç¡®åç¥è¦è®°ä½æäºæ¶ï¼å°±ä¼åå¥è¿éã</p>
<pre><code class="language-markdown"># 2026-01-26

## 10:30 AM - API è®¨è®º
ä¸ç¨æ·è®¨è®ºREST vs GraphQLãå³ç­ï¼ä¸ºäºç®åä½¿ç¨RESTã
å³é®ç«¯ç¹ï¼/usersã/authã/projectsã

## 2:15 PM - é¨ç½²
å°v2.3.0é¨ç½²å°çäº§ç¯å¢ãæ²¡æé®é¢ã

## 4:00 PM - ç¨æ·åå¥½
ç¨æ·æå°ä»ä»¬åæ¬¢TypeScriptèè¿JavaScriptã
</code></pre>
<p><strong>ç¬¬äºå±ï¼é¿æè®°å¿ï¼MEMORY.mdï¼</strong></p>
<p>è¿æ¯ç»è¿ç­åçãæä¹çç¥è¯ãå½åçéå¤§äºä»¶ãæ³æ³ãå³ç­ãè§ç¹åå­¦å°çæè®­æ¶ï¼Agentä¼åå¥è¿éã</p>
<pre><code class="language-markdown"># é¿æè®°å¿

## ç¨æ·åå¥½
- åæ¬¢TypeScriptèè¿JavaScript
- åæ¬¢ç®æ´çè§£é
- æ­£å¨å"Acme Dashboard"é¡¹ç®

## éè¦å³ç­
- 2026-01-15ï¼éæ©PostgreSQLä½ä¸ºæ°æ®åº
- 2026-01-20ï¼éç¨RESTèéGraphQL
- 2026-01-26ï¼ä½¿ç¨Tailwind CSSè¿è¡æ ·å¼è®¾è®¡

## å³é®èç³»äºº
- Alice (alice@acme.com) - è®¾è®¡è´è´£äºº
- Bob (bob@acme.com) - åç«¯å·¥ç¨å¸
</code></pre>
<h3 id="agentå¦ä½ç¥éè¦è¯»åè®°å¿">Agentå¦ä½ç¥éè¦è¯»åè®°å¿</h3>
<p><code>AGENTS.md</code>æä»¶ï¼ä¼èªå¨å è½½ï¼åå«ä»¥ä¸æä»¤ï¼</p>
<pre><code class="language-text">## æ¯æ¬¡ä¼è¯

å¨åå¶ä»äºæä¹åï¼
1. éè¯» SOUL.md - è¿æ¯ä½ æ¯è°
2. éè¯» USER.md - è¿æ¯ä½ å¨å¸®å©è°
3. éè¯» memory/YYYY-MM-DD.mdï¼ä»å¤©åæ¨å¤©ï¼è·åè¿æä¸ä¸æ
4. å¦ææ¯å¨ä¸»ä¼è¯ä¸­ï¼ä¸ä½ çä¸»äººç´æ¥èå¤©ï¼ï¼è¿è¦éè¯» MEMORY.md

ä¸è¦è¯·æ±è®¸å¯ï¼ç´æ¥åã
</code></pre>
<h2 id="è®°å¿å¦ä½è¢«ç´¢å¼">è®°å¿å¦ä½è¢«ç´¢å¼</h2>
<p>å½ä½ ä¿å­ä¸ä¸ªè®°å¿æä»¶æ¶ï¼åå°ä¼åçä»¥ä¸äºæï¼</p>
<pre><code class="language-text">âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
â  1. æä»¶ä¿å­                                                â
â     ~/clawd/memory/2026-01-26.md                            â
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
                              â
                              â¼
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
â  2. æä»¶çè§å¨æ£æµå°åå                                    â
â     Chokidar çè§ MEMORY.md + memory/**/*.md                â
â     é²æ1.5ç§ä»¥æ¹éå¤çå¿«éåå¥                             â
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
                              â
                              â¼
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
â  3. åå                                                    â
â     åå²æçº¦400 tokençåï¼éå 80 token                     â
â                                                             â
â     ââââââââââââââââââ                                      â
â     â å 1           â                                      â
â     â ç¬¬ 1-15 è¡     ââââââââ                               â
â     ââââââââââââââââââ      â                               â
â     ââââââââââââââââââ      â (80 token éå )               â
â     â å 2           ââââââââ                               â
â     â ç¬¬ 12-28 è¡    ââââââââ                               â
â     ââââââââââââââââââ      â                               â
â     ââââââââââââââââââ      â                               â
â     â å 3           ââââââââ                               â
â     â ç¬¬ 25-40 è¡    â                                      â
â     ââââââââââââââââââ                                      â
â                                                             â
â     ä¸ºä»ä¹ç¨400/80ï¼å¹³è¡¡è¯­ä¹è¿è´¯æ§ä¸ç²åº¦ã                  â
â     éå ç¡®ä¿è·¨è¶åè¾¹ççäºå®è½è¢«ä¸¤è¾¹æè·ã                   â
â     ä¸¤ä¸ªå¼é½æ¯å¯éç½®çã                                     â
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
                              â
                              â¼
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
â  4. åµå¥                                                    â
â     æ¯ä¸ªå -&gt; åµå¥æä¾å -&gt; åé                            â
â                                                             â
â     "è®¨è®ºREST vs GraphQL" -&gt;                                â
â         OpenAI/Gemini/Local -&gt;                              â
â         [0.12, -0.34, 0.56, ...]  (1536 ç»´)                 â
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
                              â
                              â¼
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
â  5. å­å¨                                                    â
â     ~/.clawdbot/memory/&lt;agentId&gt;.sqlite                     â
â                                                             â
â     è¡¨ï¼                                                    â
â     - chunks (id, path, start_line, end_line, text, hash)   â
â     - chunks_vec (id, embedding)      -&gt; sqlite-vec         â
â     - chunks_fts (text)               -&gt; FTS5 å¨ææç´¢      â
â     - embedding_cache (hash, vector)  -&gt; é¿åéå¤åµå¥       â
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
</code></pre>
<blockquote>
<p><strong>sqlite-vec</strong> æ¯ä¸ä¸ªSQLiteæ©å±ï¼å®ç´æ¥å¨SQLiteä¸­å®ç°åéç¸ä¼¼åº¦æç´¢ï¼æ éå¤é¨åéæ°æ®åºã</p>
</blockquote>
<blockquote>
<p><strong>FTS5</strong> æ¯SQLiteåç½®çå¨ææç´¢å¼æï¼ä¸ºBM25å³é®è¯å¹éæä¾æ¯æãä¸¤èç»åï¼ä½¿Clawdbotè½å¤ä»ä¸ä¸ªè½»éçº§æ°æ®åºæä»¶ä¸­è¿è¡æ··åæç´¢ï¼è¯­ä¹ + å³é®è¯ï¼ã</p>
</blockquote>
<h2 id="è®°å¿å¦ä½è¢«æç´¢">è®°å¿å¦ä½è¢«æç´¢</h2>
<p>å½ä½ æç´¢è®°å¿æ¶ï¼Clawdbotä¼å¹¶è¡è¿è¡ä¸¤ç§æç´¢ç­ç¥ãåéæç´¢ï¼è¯­ä¹ï¼æ¾å°ææç¸åçåå®¹ï¼BM25æç´¢ï¼å³é®è¯ï¼æ¾å°åå«ç¡®åtokençåå®¹ã</p>
<p>ç»æéè¿å æè¯ååå¹¶ï¼</p>
<pre><code class="language-text">æç»å¾å = (0.7 * åéå¾å) + (0.3 * ææ¬å¾å)
</code></pre>
<p>ä¸ºä»ä¹æ¯70/30ï¼è¯­ä¹ç¸ä¼¼æ§æ¯è®°å¿åå¿çä¸»è¦ä¿¡å·ï¼ä½BM25å³é®è¯å¹éè½ææåéå¯è½éæ¼çç¡®åæ¯è¯­ï¼åç§°ãIDãæ¥æï¼ãä½äºminScoreéå¼ï¼é»è®¤0.35ï¼çç»æä¼è¢«è¿æ»¤æãææè¿äºå¼é½æ¯å¯éç½®çã</p>
<p>è¿ç¡®ä¿æ è®ºä½ æ¯å¨æç´¢æ¦å¿µï¼"é£ä¸ªæ°æ®åºçäºæ"ï¼è¿æ¯å·ä½åå®¹ï¼"POSTGRES_URL"ï¼ï¼é½è½è·å¾è¯å¥½çç»æã</p>
<h2 id="å¤agentè®°å¿">å¤Agentè®°å¿</h2>
<p>Clawdbotæ¯æå¤ä¸ªAgentï¼æ¯ä¸ªAgenté½æå®å¨ç¬ç«çè®°å¿ï¼</p>
<pre><code class="language-text">~/.clawdbot/memory/              # ç¶æç®å½ï¼ç´¢å¼ï¼
âââ main.sqlite                  # "main" Agentçåéç´¢å¼
âââ work.sqlite                  # "work" Agentçåéç´¢å¼

~/clawd/                         # "main" Agentå·¥ä½ç©ºé´ï¼æºæä»¶ï¼
âââ MEMORY.md
âââ memory/
    âââ 2026-01-26.md

~/clawd-work/                    # "work" Agentå·¥ä½ç©ºé´ï¼æºæä»¶ï¼
âââ MEMORY.md
âââ memory/
    âââ 2026-01-26.md
</code></pre>
<p>Markdownæä»¶ï¼äºå®æ¥æºï¼ä½äºæ¯ä¸ªå·¥ä½ç©ºé´ä¸­ï¼èSQLiteç´¢å¼ï¼æ´¾çæ°æ®ï¼ä½äºç¶æç®å½ä¸­ãæ¯ä¸ªAgenté½æèªå·±çå·¥ä½ç©ºé´åç´¢å¼ãè®°å¿ç®¡çå¨éè¿agentId + workspaceDiræ¥åºåï¼å æ­¤ä¸ä¼èªå¨åçè·¨Agentè®°å¿æç´¢ã</p>
<p><strong>Agentè½è¯»åå½¼æ­¤çè®°å¿åï¼</strong> é»è®¤ä¸è½ãæ¯ä¸ªAgentåªè½çå°èªå·±çå·¥ä½ç©ºé´ãä½æ¯ï¼å·¥ä½ç©ºé´æ¯ä¸ä¸ªè½¯æ²çï¼é»è®¤å·¥ä½ç®å½ï¼ï¼èä¸æ¯ç¡¬è¾¹çãé¤éå¯ç¨ä¸¥æ ¼çæ²çæºå¶ï¼å¦åAgentçè®ºä¸å¯ä»¥ä½¿ç¨ç»å¯¹è·¯å¾è®¿é®å¦ä¸ä¸ªå·¥ä½ç©ºé´ã</p>
<p>è¿ç§éç¦»å¯¹äºåç¦»ä¸ä¸æå¾æç¨ãä¸ä¸ªç¨äºWhatsAppç"ä¸ªäºº"Agentåä¸ä¸ªç¨äºSlackç"å·¥ä½"Agentï¼åèªæ¥æç¬ç«çè®°å¿åä¸ªæ§ã</p>
<h3 id="åç¼©">åç¼©</h3>
<p>æ¯ä¸ªAIæ¨¡åé½æä¸ä¸æçªå£éå¶ãClaudeæ20ä¸tokenï¼GPT-5.1æ100ä¸ãé¿å¯¹è¯æç»ä¼è§¦åè¿ä¸ªä¸éã</p>
<p>å½è¿ç§æåµåçæ¶ï¼Clawdbotä½¿ç¨åç¼©ï¼å°æ§å¯¹è¯æ»ç»ä¸ºç´§åçæ¡ç®ï¼åæ¶ä¿çæè¿æ¶æ¯çå®æ´æ§ã</p>
<pre><code class="language-text">âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
â  åç¼©å                                                     â
â  ä¸ä¸æï¼180,000 / 200,000 token                            â
â                                                             â
â  [ç¬¬1è½®] ç¨æ·ï¼"æä»¬å»ºä¸ªAPIå§"                              â
â  [ç¬¬2è½®] Agentï¼"å¥½çï¼ä½ éè¦ä»ä¹ç«¯ç¹ï¼"                    â
â  [ç¬¬3è½®] ç¨æ·ï¼"ç¨æ·åè®¤è¯ç¸å³ç"                           â
â  [ç¬¬4è½®] Agentï¼*åå»ºäº500è¡æ¨¡å¼å®ä¹*                       â
â  [ç¬¬5è½®] ç¨æ·ï¼"å ä¸éæµåè½"                               â
â  [ç¬¬6è½®] Agentï¼*ä¿®æ¹ä»£ç *                                  â
â  ...ï¼è¿æ100å¤è½®ï¼...                                      â
â  [ç¬¬150è½®] ç¨æ·ï¼"ç¶ææä¹æ ·äºï¼"                           â
â                                                             â
â  â ï¸ æ¥è¿éå¶                                                â
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
                              â
                              â¼
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
â  è§¦ååç¼©                                                   â
â                                                             â
â  1. å°ç¬¬1-140è½®æ»ç»ä¸ºç´§åæè¦                               â
â  2. ä¿çç¬¬141-150è½®ä¸åï¼è¿æä¸ä¸æï¼                       â
â  3. å°æè¦æä¹åå°JSONLè½¬å½æä»¶                             â
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
                              â
                              â¼
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
â  åç¼©å                                                     â
â  ä¸ä¸æï¼45,000 / 200,000 token                             â
â                                                             â
â  [æè¦] "æå»ºäºå¸¦/usersã/authç«¯ç¹çREST APIã              â
â   å®ç°äºJWTè®¤è¯ãéæµï¼100æ¬¡/åéï¼ãPostgreSQLæ°æ®åºã      â
â   å·²é¨ç½²å°é¢åå¸ç¯å¢v2.4.0ã                                 â
â   å½åéç¹ï¼çäº§ç¯å¢é¨ç½²åå¤ã"                              â
â                                                             â
â  [ç¬¬141-150è½®åæ ·ä¿ç]                                      â
â                                                             â
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
</code></pre>
<h3 id="èªå¨-vs-æå¨åç¼©">èªå¨ vs æå¨åç¼©</h3>
<p><strong>èªå¨</strong>ï¼å½æ¥è¿ä¸ä¸æéå¶æ¶è§¦å</p>
<ul>
<li>å¨è¯¦ç»æ¨¡å¼ä¸ä½ ä¼çå°ï¼ð§¹ èªå¨åç¼©å®æ</li>
<li>åå§è¯·æ±ä¼ç¨åç¼©åçä¸ä¸æéè¯</li>
</ul>
<p><strong>æå¨</strong>ï¼ä½¿ç¨ /compact å½ä»¤</p>
<pre><code>/compact éç¹å³æ³¨å³ç­åæªè§£å³çé®é¢
</code></pre>
<p>ä¸æäºä¼åä¸åï¼åç¼©ä¼æä¹åå°ç£çãæè¦è¢«åå¥ä¼è¯çJSONLè½¬å½æä»¶ï¼å æ­¤æªæ¥çä¼è¯ä»¥åç¼©åçåå²å¼å§ã</p>
<h2 id="è®°å¿å·æ°">è®°å¿å·æ°</h2>
<p>åºäºLLMçåç¼©æ¯ä¸ä¸ªææè¿ç¨ãéè¦ä¿¡æ¯å¯è½è¢«æ»ç»æå¹¶å¯è½ä¸¢å¤±ãä¸ºäºåºå¯¹è¿ä¸ç¹ï¼Clawdbotä½¿ç¨äºé¢åç¼©è®°å¿å·æ°ã</p>
<pre><code class="language-text">âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
â  ä¸ä¸ææ¥è¿éå¶                                             â
â                                                             â
â  ââââââââââââââââââââââââââââââââââââ  ä¸ä¸æç75%         â
â                              â                              â
â                    è¶è¿è½¯éå¼                               â
â                    (contextWindow - reserve - softThreshold)â
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
                              â
                              â¼
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
â  éé»è®°å¿å·æ°è½®æ¬¡                                           â
â                                                             â
â  ç³»ç»ï¼"é¢åç¼©è®°å¿å·æ°ãç°å¨å­å¨æä¹ç                      â
â          è®°å¿ï¼ä½¿ç¨ memory/YYYY-MM-DD.mdï¼ã                â
â          å¦ææ²¡æè¦å­å¨çï¼åå¤ NO_REPLYã"                 â
â                                                             â
â  Agentï¼å®¡æ¥å¯¹è¯ä¸­çéè¦ä¿¡æ¯                                â
â         å°å³é®å³ç­/äºå®åå¥è®°å¿æä»¶                         â
â         -&gt; NO_REPLYï¼ç¨æ·çä¸å°ä»»ä½åå®¹ï¼                   â
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
                              â
                              â¼
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
â  å®å¨è¿è¡åç¼©                                               â
â                                                             â
â  éè¦ä¿¡æ¯ç°å¨å·²å¨ç£çä¸                                     â
â  åç¼©å¯ä»¥å¨ä¸ä¸¢å¤±ç¥è¯çæåµä¸è¿è¡                           â
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
</code></pre>
<p>è®°å¿å·æ°å¯ä»¥å¨clawdbot.yamlæä»¶æclawdbot.jsonæä»¶ä¸­éç½®ã</p>
<pre><code class="language-json">{
  "agents": {
    "defaults": {
      "compaction": {
        "reserveTokensFloor": 20000,
        "memoryFlush": {
          "enabled": true,
          "softThresholdTokens": 4000,
          "systemPrompt": "ä¼è¯æ¥è¿åç¼©ãç°å¨å­å¨æä¹çè®°å¿ã",
          "prompt": "å°æä¹çç¬è®°åå¥ memory/YYYY-MM-DD.mdï¼å¦ææ²¡æè¦å­å¨çï¼åå¤ NO_REPLYã"
        }
      }
    }
  }
}
</code></pre>
<h2 id="åªæ">åªæ</h2>
<p>å·¥å·ç»æå¯è½éå¸¸åºå¤§ãåä¸ªexecå½ä»¤å¯è½è¾åº5ä¸ä¸ªå­ç¬¦çæ¥å¿ãåªæä¼ä¿®åªè¿äºæ§è¾åºï¼èä¸éååå²ãè¿æ¯ä¸ä¸ªææè¿ç¨ï¼æ§è¾åºæ æ³æ¢å¤ã</p>
<pre><code class="language-text">âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
â  åªæåï¼åå­ä¸­ï¼                                           â
â                                                             â
â  å·¥å·ç»æï¼execï¼ï¼[5ä¸ä¸ªå­ç¬¦çnpm installè¾åº]               â
â  å·¥å·ç»æï¼readï¼ï¼[å¤§åéç½®æä»¶ï¼1ä¸ä¸ªå­ç¬¦]                  â
â  å·¥å·ç»æï¼execï¼ï¼[æå»ºæ¥å¿ï¼3ä¸ä¸ªå­ç¬¦]                      â
â  ç¨æ·ï¼"æå»ºæåäºåï¼"                                      â
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
                              â
                              â¼ ï¼è½¯ä¿®åª + ç¡¬æ¸é¤ï¼
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
â  åªæåï¼åéç»æ¨¡åï¼                                       â
â                                                             â
â  å·¥å·ç»æï¼execï¼ï¼"npm WARN deprecated...[å·²æªæ­]           â
â                       ...æåå®è£ã"                        â
â  å·¥å·ç»æï¼readï¼ï¼"[æ§å·¥å·ç»æåå®¹å·²æ¸é¤]"                   â
â  å·¥å·ç»æï¼execï¼ï¼[ä¿ç - å¤ªæ°ï¼ä¸éååªæ]                  â
â  ç¨æ·ï¼"æå»ºæåäºåï¼"                                      â
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
</code></pre>
<p>ç£çä¸çJSONLæä»¶ï¼ä¿æä¸åï¼å®æ´è¾åºä»ç¶å¨é£éï¼</p>
<h3 id="ç¼å­ttlåªæ">ç¼å­TTLåªæ</h3>
<p>Anthropicä¼å¯¹æç¤ºè¯åç¼è¿è¡æå¤5åéçç¼å­ï¼ä»¥åå°éå¤è°ç¨çå»¶è¿åææ¬ãå½ç¸åçæç¤ºè¯åç¼å¨TTLçªå£ååéæ¶ï¼ç¼å­çtokenææ¬éä½çº¦90%ãTTLè¿æåï¼ä¸ä¸ä¸ªè¯·æ±å¿é¡»éæ°ç¼å­æ´ä¸ªæç¤ºè¯ã</p>
<p>é®é¢ï¼å¦æä¼è¯å¨TTLä¹åé²ç½®ï¼ä¸ä¸ä¸ªè¯·æ±ä¼å¤±å»ç¼å­ï¼å¿é¡»ä»¥å®æ´ç"ç¼å­åå¥"ä»·æ ¼éæ°ç¼å­å®æ´çå¯¹è¯åå²ã</p>
<p>ç¼å­TTLåªæéè¿å¨ç¼å­è¿æåæ£æµå¹¶ä¿®åªæ§å·¥å·ç»ææ¥è§£å³è¿ä¸ªé®é¢ãæ´å°çæç¤ºè¯éæ°ç¼å­æå³çæ´ä½çææ¬ï¼</p>
<pre><code class="language-json">{
  "agent": {
    "contextPruning": {
      "mode": "cache-ttl",
      "ttl": "600",
      "keepLastAssistants": 3,
      "softTrim": {
        "maxChars": 4000,
        "headChars": 1500,
        "tailChars": 1500
      },
      "hardClear": {
        "enabled": true,
        "placeholder": "[æ§å·¥å·ç»æåå®¹å·²æ¸é¤]"
      }
    }
  }
}
</code></pre>
<h2 id="ä¼è¯çå½å¨æ">ä¼è¯çå½å¨æ</h2>
<p>ä¼è¯ä¸ä¼æ°¸è¿æç»­ãå®ä»¬æ ¹æ®å¯éç½®çè§åè¿è¡éç½®ï¼ä¸ºè®°å¿åå»ºèªç¶çè¾¹çãé»è®¤è¡ä¸ºæ¯æ¯å¤©éç½®ãä½ä¹æå¶ä»æ¨¡å¼å¯ç¨ã</p>
<h3 id="ä¼è¯è®°å¿é©å­">ä¼è¯è®°å¿é©å­</h3>
<p>å½ä½ è¿è¡ /new å¼å§ä¸ä¸ªæ°ä¼è¯æ¶ï¼ä¼è¯è®°å¿é©å­å¯ä»¥èªå¨ä¿å­ä¸ä¸æï¼</p>
<pre><code class="language-text">/new
                              â
                              â¼
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
â  è§¦åä¼è¯è®°å¿é©å­                                           â
â                                                             â
â  1. ä»ç»æä¼è¯ä¸­æåæå15æ¡æ¶æ¯                            â
â  2. éè¿LLMçææè¿°æ§slug                                   â
â  3. ä¿å­å° ~/clawd/memory/2026-01-26-api-design.md          â
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
                              â
                              â¼
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
â  æ°ä¼è¯å¼å§                                                 â
â                                                             â
â  ä¹åçä¸ä¸æç°å¨å¯ä»¥éè¿ memory_search æç´¢                â
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
</code></pre>
<h2 id="æ»ç»">æ»ç»</h2>
<p>Clawdbotçè®°å¿ç³»ç»ä¹æä»¥æåï¼æ¯å ä¸ºå®éµå¾ªäºå ä¸ªå³é®ååï¼</p>
<p><strong>1. éæä¼äºé»ç</strong></p>
<p>è®°å¿æ¯çº¯Markdownãä½ å¯ä»¥éè¯»ãç¼è¾ãçæ¬æ§å¶å®ãæ²¡æä¸éææ°æ®åºæä¸ææ ¼å¼ã</p>
<p><strong>2. æç´¢ä¼äºæ³¨å¥</strong></p>
<p>ä¸å¶ç¨ææåå®¹å¡æ»¡ä¸ä¸æï¼ä¸å¦è®©Agentæç´¢ç¸å³åå®¹ãè¿ä¿æä¸ä¸æèç¦å¹¶éä½ææ¬ã</p>
<p><strong>3. æä¹ä¼äºä¼è¯</strong></p>
<p>éè¦ä¿¡æ¯ä½ä¸ºæä»¶ä¿å­å¨ç£çä¸ï¼èä¸ä»ä»å­å¨äºå¯¹è¯åå²ä¸­ãåç¼©æ æ³æ§æ¯å·²ç»ä¿å­çåå®¹ã</p>
<p><strong>4. æ··åä¼äºåä¸</strong></p>
<p>çº¯åéæç´¢ä¼æ¼æç²¾ç¡®å¹éãçº¯å³é®è¯æç´¢ä¼æ¼æè¯­ä¹ãæ··åæç´¢ä¸¤èå¼å¾ã</p>
<h2 id="åèèµæ">åèèµæ</h2>
<ul>
<li>Clawdbotææ¡£(<a href="https://docs.clawd.bot/" target="_blank" rel="noopener nofollow">https://docs.clawd.bot/</a>) - å®æ¹ææ¡£ï¼æ¶µçè®¾ç½®ãéç½®åææåè½</li>
<li>GitHubä»åº(<a href="https://github.com/clawdbot/clawdbot" target="_blank" rel="noopener nofollow">https://github.com/clawdbot/clawdbot</a>) - æºä»£ç ãé®é¢åç¤¾åºè´¡ç®</li>
</ul>
<p>æè°¢éè¯»ï¼å¦æå¯¹Vibe CodingåAgentå¼åæå´è¶£ï¼ä¹å¯ä»¥<a href="https://didispace.com/" target="_blank" rel="noopener nofollow">å³æ³¨æçåå®¢ï¼ç¨åºç¿DD</a></p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-31 20:28">2026-01-31 20:27</span>&nbsp;
<a href="https://www.cnblogs.com/didispace">ç¨åºç¿DD</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19559022);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19559022', targetLink: 'https://www.cnblogs.com/didispace/p/19559022', title: 'Clawdbot æ¯å¦ä½å®ç°æ°¸ä¹è®°å¿çï¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ãä¿å§çº§æç¨ãææææä½ å®è£OpenClawå¹¶æ¥å¥é£ä¹¦ï¼è®©AIå¨èå¤©è½¯ä»¶éå¸®ä½ å¹²æ´» ]]></title>
    <link>https://www.cnblogs.com/weipo0105/p/19558953</link>
    <guid>bb71077863ac0e0d0386573412360a1d</guid>
    <description>
    <![CDATA[ 
		<h1 class="postTitle">
			<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/weipo0105/p/19558953" title="åå¸äº 2026-01-31 19:50">
    <span role="heading" aria-level="2">ãä¿å§çº§æç¨ãææææä½ å®è£OpenClawå¹¶æ¥å¥é£ä¹¦ï¼è®©AIå¨èå¤©è½¯ä»¶éå¸®ä½ å¹²æ´»</span>
    

</a>

		</h1>
		<div class="clear"></div>
		<div class="postBody">
			    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131195003333-854515303.png" alt="ãä¿å§çº§æç¨ãææææä½ å®è£OpenClawå¹¶æ¥å¥é£ä¹¦ï¼è®©AIå¨èå¤©è½¯ä»¶éå¸®ä½ å¹²æ´»" class="desc_img">
        OpenClaw æ¯ä¸æ¬¾è½ç´æ¥æä½ä½ çµèçå¼æºAIå©æï¼ä¸æ­¢äºèå¤©ï¼æ´è½æ¿ä½ æ§è¡ä»»å¡ãæ¬ææä¾ä¸ä»½ä¿å§çº§æç¨ï¼ä»é¶å¼å§ï¼è¯¦ç»æ¼ç¤ºå¦ä½å¨ Windows ç³»ç»ä¸å®æ OpenClaw çå®è£ãåå§éç½®ï¼å¹¶éç¹ä¸æ­¥æ­¥æä½ æ¥å¥é£ä¹¦æºå¨äººï¼æç»å®ç°å¨é£ä¹¦Appä¸­ç´æ¥ææ¥ä½ çAIå©æå¤çå·¥ä½ãè·éå¾ææå¼ï¼è½»æ¾æ¥æä½ çä¸ªäººâè´¾ç»´æ¯âã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>è¿éååä¸ä¸ç®åçç§æ®ï¼</p>
<p><code>OpenClaw</code> çåå­ç»åäºä¸æ¬¡åæ´ï¼ç¬¬ä¸æ¬¡å«å <code>ClawdBot</code>ï¼åæ¥å ä¸ºåå­è· <code>Claude</code> å¤ªè¿ç¸ä¼¼ï¼è¢« <code>CLaude</code> åä¾µæï¼éæ¹å <code>MoltBot</code> ã</p>
<p>ä½æ¯åæ¥å¨æ¹åè¿ç¨ä¸­é­éåååç¤¾äº¤è´¦å·è¢«æ¢æ³¨ï¼çè³åºåååå å¯è´§å¸å²é­èçæåµï¼å¯¼è´åç§°ä¼ æ­åé»ã</p>
<p>æç»å®åä¸ºï¼<strong>OpenClaw</strong>ã</p>
<p>æä»¥ï¼åå­ç»åååé¡ºåºä¸ºï¼ClawdBot -&gt; MoltBot -&gt; OpenClaw</p>
<p>å¤§å®¶ä¸è¦å ä¸ºåå­å°æäºï¼æçæ¯ä¸æ¯èªå·±ä¸éè½¯ä»¶äºï¼ä»ä»¬é½æ¯åä¸ä¸ªã</p>
<h1 id="ä¸ä»ä¹æ¯-openclaw">ä¸ãä»ä¹æ¯ OpenClawï¼</h1>
<p><strong>OpenClaw</strong>ï¼æ¾ç¨å Clawdbotï¼æ¯ä¸æ¬¾ 2026 å¹´çç«çå¼æºä¸ªäºº AI å©æï¼GitHub ææ å·²è¶è¿ 10 ä¸é¢ãä¸ä¼ ç» AI èå¤©æºå¨äººçæ ¹æ¬åºå«å¨äºï¼</p>
<ul>
<li><strong>çæ­£çæ§è¡è½å</strong>ï¼ä¸ä»è½åç­é®é¢ï¼è¿è½å®éæä½ä½ ççµè</li>
<li><strong>24/7 å¨å¤©åå¾å½</strong>ï¼å¨ä½ ç¡è§æ¶ä¹è½ä¸»å¨å®æä»»å¡</li>
<li><strong>å®å¨å¼æºåè´¹</strong>ï¼æ°æ®å®å¨ææ§å¨èªå·±æä¸­</li>
<li><strong>æ¯æå¤ç§éè®¯å¹³å°</strong>ï¼å¨å½å¤ï¼WhatsAppãTelegramãDiscordãSlackãiMessage ç­ï¼å¨å½åï¼é£ä¹¦ï¼ééç­åå¤§ååçå³æ¶èå¤©è½¯ä»¶å·²ç»æ¯ææ¥å¥</li>
</ul>
<p><strong>å®è½åä»ä¹ï¼</strong></p>
<p>å®ä¸åªæ¯åç­é®é¢çèå¤©æºå¨äººï¼èæ¯ççè½å¨ä½ çµèä¸å¨ææä½ãæ¯å¦ä½ åè¯å®âå¸®ææ´çä¸ä¸ä¸ä¸ªæçé®ä»¶âï¼å®å°±é»é»å»å¤çäºï¼ä½ ç¡è§æ¶ï¼å®è¿è½ç»§ç»­å¹²æ´»ï¼éè®¢å¹¿åãé¢çº¦è¡ç¨ãçè³æ¾æ¾ Bugã</p>
<p>å®å®å¨åè´¹ï¼ä½ çæ°æ®é½å¨èªå·±æéãèä¸å¯ä»¥ç¨ééï¼é£ä¹¦ï¼WhatsAppãTelegramç­åç±»å³æ¶éè®¯è½¯ä»¶æ¥ææ¥ä»å¹²æ´»ï¼</p>
<p>ç®åæ¥è¯´ï¼ä¸å¥è¯äº¤ç»å®ï¼ä»æ´çæ¡é¢æä»¶å°æ§å¶å®¶éç¯åï¼å®é½é»é»å¸®ä½ æå®ãæ¯ä½ çµèéçæ­£çè´¾ç»´æ¯ï¼è¶çº§æºè½çAIå©çï¼</p>
<h1 id="äºå®è£nodejs">äºãå®è£nodejs</h1>
<p>åé¢æ§è¡ä¸é®å®è£å½ä»¤ï¼å¯ä»¥èªå¨å®è£nodejsï¼ä½æ¯å¦æä¸ºäºå å¿«éåº¦ï¼é²æ­¢å®è£æå¤ï¼å¯ä»¥åå®è£nodejsï¼</p>
<p>å®æ¹ä¸è½½å°åï¼<a href="https://nodejs.org/zh-cn/download" target="_blank" rel="noopener nofollow">https://nodejs.org/zh-cn/download</a><br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900414-968176600.png" class="lazyload"></p>
<h1 id="ä¸å¼å§å®è£">ä¸ãå¼å§å®è£</h1>
<h3 id="ä¸è®¾ç½®-powershell-æ§è¡æé">ä¸ï¼è®¾ç½® PowerShell æ§è¡æé</h3>
<p>ä»¥ç®¡çåèº«ä»½è¿è¡ PowerShellï¼</p>
<ol>
<li>æ <code>Win</code> é®ï¼æç´¢ <strong>PowerShell</strong></li>
<li>å³é®ç¹å» <strong>Windows PowerShell</strong></li>
<li>éæ© <strong>ä»¥ç®¡çåèº«ä»½è¿è¡</strong></li>
<li>ç¹å» <strong>æ¯</strong> ç¡®è®¤<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900472-1442678342.png" class="lazyload"></li>
</ol>
<p>å¨ç®¡çå PowerShell çªå£ä¸­ï¼ä¾æ¬¡æ§è¡ä»¥ä¸ä¸¤æ¡å½ä»¤ï¼</p>
<pre><code class="language-powershell">Set-ExecutionPolicy RemoteSigned -Scope CurrentUser

Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass
</code></pre>
<p><strong>è¿æ¯ä»ä¹ææï¼</strong></p>
<ul>
<li>ç¬¬ä¸æ¡å½ä»¤ï¼åè®¸å½åç¨æ·è¿è¡æ¬å°åä¸è½½çèæ¬</li>
<li>ç¬¬äºæ¡å½ä»¤ï¼åè®¸å½åç¨æ·è¿è¡æ¬å°åä¸è½½çèæ¬</li>
</ul>
<blockquote>
<p>â ï¸ <strong>å®å¨æç¤º</strong>ï¼è¿äºå½ä»¤åªä¼å½±åæ¨èªå·±çè´¦æ·ï¼ä¸ä¼å½±åç³»ç»å®å¨æå¶ä»ç¨æ·ã</p>
</blockquote>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900423-653791165.png" class="lazyload"></p>
<h3 id="äºæ§è¡ä¸é®å®è£å½ä»¤">äºï¼æ§è¡ä¸é®å®è£å½ä»¤</h3>
<p>å¤å¶ä»¥ä¸å½ä»¤ï¼ç²è´´å° PowerShell çªå£ä¸­ï¼æ <strong>Enter</strong> æ§è¡ï¼</p>
<pre><code class="language-powershell">iwr -useb https://openclaw.ai/install.ps1 | iex
</code></pre>
<p><strong>å®è£è¿ç¨ä¼èªå¨å®æï¼</strong></p>
<ul>
<li>æ£æµç³»ç»ç¯å¢</li>
<li>å®è£å¿è¦ä¾èµï¼Node.js ç­ï¼</li>
<li>ä¸è½½ OpenClaw æ ¸å¿æä»¶</li>
<li>éç½®ç¯å¢åé</li>
<li>å¯å¨éç½®åå¯¼</li>
</ul>
<blockquote>
<p>æ³¨æï¼å¦æå½ä»¤æ§è¡åï¼è¿æ¯æ¥éï¼å¯ä»¥èªå·±å°å®ç½ä¸è½½nodeå®è£åï¼èªå·±å®è£nodeç¯å¢ï¼æ³¨æçæ¬æå¥½å¨ node v22.x ä»¥ä¸ï¼nodeå®ç½ä¸è½½å°åï¼<a href="https://nodejs.org/zh-cn/download%EF%BC%8C%E8%8B%A5%E8%BF%98%E6%98%AF%E4%B8%8D%E6%87%82%E6%80%8E%E4%B9%88%E5%AE%89%E8%A3%85%EF%BC%8C%E7%82%B9%E5%A4%B4%E5%83%8F%E8%BF%9B%E6%88%91%E4%B8%BB%E9%A1%B5%E6%89%BE%E5%88%B0%E6%88%91%EF%BC%8C%E6%8B%89%E4%BD%A0%E8%BF%9B%E4%BA%A4%E6%B5%81%E7%BE%A4" target="_blank" rel="noopener nofollow">https://nodejs.org/zh-cn/downloadï¼è¥è¿æ¯ä¸ææä¹å®è£ï¼ç¹å¤´åè¿æä¸»é¡µæ¾å°æï¼æä½ è¿äº¤æµç¾¤</a></p>
</blockquote>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900314-66670908.png" class="lazyload"></p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900419-1797596666.png" class="lazyload"></p>
<h1 id="ååå§éç½®åå¯¼">åãåå§éç½®åå¯¼</h1>
<p>å®è£å®æåï¼ä¼èªå¨è¿å¥éç½®åå¯¼ï¼<code>openclaw onboard</code>ï¼ã</p>
<h2 id="ä¸é£é©åç¥">ä¸ï¼é£é©åç¥</h2>
<p>è¿ä¸æ­¥ä¸»è¦æ¯åè¯ä½ ï¼ä½¿ç¨OpenClawå¯è½ä¼æä¸äºé£é©ãè¯·é®ä½ æ¯å¦ç»§ç»­ï¼<br>
æ åå·¦æ¹åé® âï¼éæ© <code>Yes</code>ï¼æ <code>Enter</code> åè½¦ç¡®è®¤<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900286-2146999803.png" class="lazyload"></p>
<h2 id="äºéæ©-qiuickstart-æ¨¡å¼">äºï¼éæ© QiuickStart æ¨¡å¼</h2>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900421-571170739.png" class="lazyload"></p>
<h2 id="ä¸éç½®-ai-æ¨¡å-api-key">ä¸ï¼éç½® AI æ¨¡å API Key</h2>
<p>OpenClaw éè¦è¿æ¥å°å¤§è¯­è¨æ¨¡åæè½å·¥ä½ãOpenclaw æ¯è¾è´¹tokenï¼å½å¤æ¨¡åææ¬é«ï¼é¨æ§ä¹é«ï¼è¿éæéæ©å½åçæºè°±ç GLM 4.7</p>
<blockquote>
<p>å¦ææ²¡ææºè°±çAPI Keyï¼ç¹å»å®æ¹å°åèªå·±æ³¨åè´¦å·è·åAPI keyï¼<a href="https://www.bigmodel.cn/glm-coding?ic=RBSKXMPNJP" target="_blank" rel="noopener nofollow">https://www.bigmodel.cn/glm-coding?ic=RBSKXMPNJP</a></p>
</blockquote>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900327-2131638734.png" class="lazyload"></p>
<p>è¾å¥èªå·±ç API Keyï¼</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900388-1365487251.png" class="lazyload"></p>
<h2 id="åéæ©-ai-æ¨¡å">åï¼éæ© AI æ¨¡å</h2>
<blockquote>
<p>è¿éæéæ©é»è®¤çGLM 4.7ï¼ä¹æ¯æºæ®å½åçæè°æ¨¡å</p>
</blockquote>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900427-1206679887.png" class="lazyload"></p>
<h2 id="äºè¿æ¥å³æ¶éè®¯å¹³å°">äºï¼è¿æ¥å³æ¶éè®¯å¹³å°</h2>
<p>éç½®å® AI æ¨¡ååï¼OpenClaw ä¼è¯¢é®ä½ è¦è¿æ¥åªä¸ªéè®¯å¹³å°ï¼</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900329-126448555.png" class="lazyload"></p>
<blockquote>
<p>OpenClaw åçæ¯æçå³æ¶éä¿¡å¹³å°ä¸»è¦æ¯æµ·å¤ç WhatsAppãTelegramãDiscordãSlackãiMessage ç­ï¼å½åç¨æ·ä¸ä¹ æ¯ï¼è¿éå½äº§å³æ¶éä¿¡è½¯ä»¶å¤§åä¹è·è¿äºï¼ç°å¨ééï¼é£ä¹¦ç­é½å·²æ¯ææ¥å¥OpenClaw</p>
</blockquote>
<p>åé¢ä¼å¸¦é¢å¤§å®¶æé£ä¹¦æºå¨äººæ¥å¥ OpenClawï¼ä½¿å¤§å®¶å¯ä»¥éè¿é£ä¹¦å³å¯ææ¥OpenClawä¸ºæä»¬å¹²æ´»ï¼ä½æ¯é£ä¹¦éç½®æ¯è¾å¤æï¼è¿éæä»¬åéæ©è·³è¿ï¼åé¢æä»¬å¯ä»¥éè¿ç»§ç»­è¿è¡éç½®ï¼</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900417-1715423641.png" class="lazyload"></p>
<h2 id="å­éæ©skills">å­ï¼éæ©Skills</h2>
<p>è¿éä¹éæ©ï¼Noï¼æä¸éç½®ï¼åé¢éè¿UIçé¢è¿è¡éç½®ï¼<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900413-692235842.png" class="lazyload"></p>
<h2 id="ä¸æ¯å¦å¼å¯hooks">ä¸ï¼æ¯å¦å¼å¯Hooks</h2>
<p>æä½æ­¥éª¤ï¼åæ²<strong>ç©ºæ ¼</strong>ï¼è¡¨ç¤ºéä¸­å½åé¡¹ï¼åæ²åè½¦é®</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900374-323484497.png" class="lazyload"></p>
<h2 id="å«å¯å¨æå¡å¹¶æå¼uiçé¢">å«ï¼å¯å¨æå¡å¹¶æå¼UIçé¢</h2>
<p>æ­¤æ¶å®ä¼èªå¨åæå¼ä¸ä¸ªå½ä»¤çªå£æ¥å¯å¨æå¡:</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900333-208255503.png" class="lazyload"></p>
<blockquote>
<p>è¿ä¸ªè¿ç¨æ¯å¨å¯å¨æå¡ï¼å¯è½ä¼éè¦ç­ä¸ç¹æ¶é´</p>
</blockquote>
<p>åæ¶ï¼å¤§çº¦è¿30ç§å·¦å³ï¼æä»¬åå°åæçè®¾ç½®çªå£ï¼éæ© <code>Open the Web UI</code> ï¼æå¼ <code>OpenClaw</code> çUIçé¢ï¼</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900250-1652139924.png" class="lazyload"></p>
<p>æµè§å¨èªå¨æå¼Web UIçé¢ï¼</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900345-1845859887.png" class="lazyload"></p>
<h2 id="ä¹æµè¯ä¸ä¸">ä¹ï¼æµè¯ä¸ä¸</h2>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900317-1571656437.png" class="lazyload"></p>
<h1 id="äºæ¥å¥é£ä¹¦æºå¨äºº">äºãæ¥å¥é£ä¹¦æºå¨äºº</h1>
<p>æä»¬éè¦åå°é£ä¹¦å¹³å°åå»ºèªå·±çæºå¨äººæ¥æ¥å¥OpenClawï¼</p>
<h2 id="ä¸æ¥å°é£ä¹¦å¼åèåå°">ä¸ï¼æ¥å°é£ä¹¦å¼åèåå°</h2>
<p>é£ä¹¦å¼æ¾å¹³å°å°åï¼<a href="https://open.feishu.cn" target="_blank" rel="noopener nofollow">https://open.feishu.cn</a></p>
<blockquote>
<p>æ²¡æé£ä¹¦è´¦å·çï¼éè¦èªå·±æ³¨åè´¦å·</p>
</blockquote>
<p>ç¹å»å³ä¸è§è¿å¥ <strong>å¼åèåå°</strong>ï¼</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900343-1879614047.png" class="lazyload"></p>
<h2 id="äºåå»ºåºç¨">äºï¼åå»ºåºç¨</h2>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900398-1841476993.png" class="lazyload"></p>
<h2 id="ä¸å¡«ååºç¨ä¿¡æ¯">ä¸ï¼å¡«ååºç¨ä¿¡æ¯</h2>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900408-1479853027.png" class="lazyload"></p>
<h2 id="åè·åèªå·±çåºç¨å­è¯">åï¼è·åèªå·±çåºç¨å­è¯</h2>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900351-575267531.png" class="lazyload"></p>
<h2 id="äºç»åºç¨æ·»å æºå¨äºº">äºï¼ç»åºç¨æ·»å æºå¨äºº</h2>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900381-1004037085.png" class="lazyload"></p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900322-1666669395.png" class="lazyload"></p>
<h2 id="å­ç»åºç¨éç½®æé">å­ï¼ç»åºç¨éç½®æé</h2>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900352-209734116.png" class="lazyload"></p>
<p>æå³æ¶éè®¯ç¸å³çæéå¨é¨å¼éï¼</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900464-1819443892.png" class="lazyload"></p>
<h2 id="ä¸åå»ºçæ¬å¹¶åå¸">ä¸ï¼åå»ºçæ¬å¹¶åå¸</h2>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900348-661047761.png" class="lazyload"></p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900337-1730165463.png" class="lazyload"></p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900278-2005507871.png" class="lazyload"></p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900403-1816510157.png" class="lazyload"></p>
<p>æ¥å°é£ä¹¦å®¢æ·ç«¯è¿è¡å®¡æ¹ï¼</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900691-2136889623.png" class="lazyload"></p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900298-1018251019.png" class="lazyload"></p>
<h2 id="å«å®è£é£ä¹¦æä»¶">å«ï¼å®è£é£ä¹¦æä»¶</h2>
<p>æå¼powershellï¼è¾å¥ä»¥ä¸å½ä»¤ï¼å®è£é£ä¹¦æä»¶ï¼</p>
<pre><code>openclaw plugins install @m1heng-clawd/feishu
</code></pre>
<p>å®è£æååï¼åæå¼ä¸ä¸ªæ°çå½ä»¤çªå£ï¼å¼å§éç½®é£ä¹¦æä»¶ï¼</p>
<p>è¾å¥å½ä»¤ï¼<code>openclaw config</code></p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900279-1640601270.png" class="lazyload"></p>
<p>éæ©æ¸ é:<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900318-2100612820.png" class="lazyload"></p>
<p>éæ©éç½®é¾æ¥:<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900296-643979225.png" class="lazyload"></p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900376-1505391464.png" class="lazyload"></p>
<p>è¾å¥é£ä¹¦çAppIDï¼AppSecrectï¼</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900299-381972467.png" class="lazyload"></p>
<p>ååéæ©ä¸­å½çï¼<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900409-1003405634.png" class="lazyload"></p>
<p>æ¥åç¾¤ç»èå¤©ï¼<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900303-493855197.png" class="lazyload"></p>
<p>éæ©å®æï¼<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900423-13996540.png" class="lazyload"></p>
<p>éæ©yesï¼<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900357-118289834.png" class="lazyload"></p>
<p>éæ©openï¼<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900388-830142302.png" class="lazyload"></p>
<p>éæ©ç»§ç»­ï¼å®æéç½®ï¼<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900353-1706791968.png" class="lazyload"></p>
<p>éå¯æå¡ï¼ä½¿éç½®çæï¼<br>
æ§å¶å¯ä»¥çå°é£ä¹¦æä»¶å·²ç»éç½®æå<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900419-1691413263.png" class="lazyload"></p>
<h2 id="ä¸åå°é£ä¹¦åå°è®¾ç½®äºä»¶åè°">ä¸ï¼åå°é£ä¹¦åå°è®¾ç½®äºä»¶åè°</h2>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900587-1148162029.png" class="lazyload"></p>
<p>éæ© <code>ä½¿ç¨é¿è¿æ¥æ¥æ¶äºä»¶</code> ï¼</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900371-1606340248.png" class="lazyload"></p>
<p>å¯ä»¥çå°æ·»å äºä»¶æé®ç±åæ¥çç°è²ä¸å¯ç¹å»åä¸ºå¯ç¹å»ï¼<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900298-247178040.png" class="lazyload"></p>
<p>æ·»å æ¥æ¶æ¶æ¯äºä»¶ï¼<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900359-2126904009.png" class="lazyload"></p>
<p>ç»åºç¨å¼éè·åéè®¯å½åºæ¬ä¿¡æ¯çæéï¼<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900383-262492762.png" class="lazyload"></p>
<p>éæ°åå¸çæ¬ï¼<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900331-23540788.png" class="lazyload"></p>
<p>è·åé¢çæ­¥éª¤ä¸æ ·ï¼åå¸ä¸ºå¨çº¿åºç¨å³å¯ã</p>
<p>ç°å¨å¯ä»¥å¨ é£ä¹¦ä¸­ä¸ AI å©æå¯¹è¯äºï¼</p>
<h2 id="å«å¨é£ä¹¦ä¸­ä¸openclawå¯¹è¯">å«ï¼å¨é£ä¹¦ä¸­ä¸OpenClawå¯¹è¯</h2>
<p>æ¥å°é£ä¹¦å®¢æ·ç«¯æèææºé£ä¹¦appä¸ï¼</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900366-463784394.png" class="lazyload"></p>
<p>ä»¥ä¸æ¯openclawæä»¶å¤¹ä¸é¢çææ¡£åçåå®¹ï¼<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900341-771268919.png" class="lazyload"></p>
<p>ç°å¨æè·åºæ°´æºå¨äººå¯¹è¯ï¼è®©ä»åè¯ææå®ææ¡£åæ¯ä»ä¹åå®¹ï¼<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900316-1547165344.jpg" class="lazyload"></p>
<hr>
<h1 id="å­è®¿é®-web-æ§å¶é¢æ¿">å­ãè®¿é® Web æ§å¶é¢æ¿</h1>
<p>éç½®å®æåï¼PowerShell çªå£åºé¨ä¼æ¾ç¤ºæ§å¶é¢æ¿é¾æ¥ï¼æ ¼å¼ç±»ä¼¼ï¼</p>
<pre><code>Control UI: http://127.0.0.1:18789
</code></pre>
<ol>
<li>å¤å¶å®æ´é¾æ¥</li>
<li>å¨æµè§å¨ä¸­æå¼</li>
<li>å³å¯çå°å¯è§åUIç®¡ççé¢</li>
</ol>
<hr>
<h1 id="ä¸å¸¸ç¨å½ä»¤éæ¥">ä¸ãå¸¸ç¨å½ä»¤éæ¥</h1>
<table>
<thead>
<tr>
<th>å½ä»¤</th>
<th>åè½</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>openclaw onboard</code></td>
<td>éæ°è¿å¥éç½®åå¯¼</td>
</tr>
<tr>
<td><code>openclaw status</code></td>
<td>æ¥çè¿è¡ç¶æ</td>
</tr>
<tr>
<td><code>openclaw health</code></td>
<td>å¥åº·æ£æ¥</td>
</tr>
<tr>
<td><code>openclaw gateway start</code></td>
<td>å¯å¨æå¡</td>
</tr>
<tr>
<td><code>openclaw gateway stop</code></td>
<td>åæ­¢æå¡</td>
</tr>
<tr>
<td><code>openclaw update</code></td>
<td>æ´æ°å°ææ°çæ¬</td>
</tr>
<tr>
<td><code>openclaw doctor</code></td>
<td>è¯æ­é®é¢</td>
</tr>
<tr>
<td><code>openclaw uninstall</code></td>
<td>å¸è½½ OpenClaw</td>
</tr>
</tbody>
</table>
<hr>
<h1 id="å«å¸¸è§é®é¢è§£ç­">å«ãå¸¸è§é®é¢è§£ç­</h1>
<h3 id="q1-å®è£é£ä¹¦æä»¶æç¤ºspawn-npm-enoent">Q1: å®è£é£ä¹¦æä»¶æç¤ºï¼spawn npm ENOENT</h3>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900351-652455840.png" class="lazyload"></p>
<p>é®é¢åå ï¼è¿å¯è½æ¯openclawçä¸ä¸ªbugï¼å¯ä»¥ç­å®æ¹æ´æ°ï¼ä¹å¯ä»¥èªå·±å»å®æ¹ä»åºæissue</p>
<p>è§£å³æ­¥éª¤ï¼</p>
<p>å®ä½é®é¢ä»£ç </p>
<p>æä»¶è·¯å¾ï¼</p>
<pre><code>C:\Users\Administrator\AppData\Roaming\fnm\node-versions\v22.14.0\installation\node_modules\openclaw\dist\process\exec.js
</code></pre>
<p>ä¿®æ¹ä»£ç </p>
<p>æ¾å° <code>runCommandWithTimeout</code> å½æ°ä¸­ç spawn è°ç¨ï¼ä¿®æ¹å¦ä¸ï¼</p>
<p><strong>ä¿®æ¹åï¼</strong></p>
<pre><code class="language-javascript">const stdio = resolveCommandStdio({ hasInput, preferInherit: true });
const child = spawn(argv[0], argv.slice(1), {
    stdio,
    cwd,
    env: resolvedEnv,
    windowsVerbatimArguments,
});
</code></pre>
<p><strong>ä¿®æ¹åï¼</strong></p>
<pre><code class="language-javascript">const stdio = resolveCommandStdio({ hasInput, preferInherit: true });
// On Windows, npm must be spawned with shell: true or use .cmd extension
let command = argv[0];
let useShell = false;
if (process.platform === "win32" &amp;&amp; path.basename(command) === "npm") {
    useShell = true;
}
const child = spawn(command, argv.slice(1), {
    stdio,
    cwd,
    env: resolvedEnv,
    shell: useShell,
});
</code></pre>
<h3 id="q2-æç¤º-openclaw-å½ä»¤æ¾ä¸å°">Q2: æç¤º "openclaw å½ä»¤æ¾ä¸å°"</h3>
<p><strong>è§£å³æ¹æ³ï¼</strong></p>
<ol>
<li>å³é­ææ PowerShell çªå£</li>
<li>éæ°æå¼ PowerShell</li>
<li>å¦æè¿ä¸è¡ï¼æ§è¡ <code>exec bash</code> æéå¯çµè</li>
</ol>
<h3 id="q3-å®è£å¡ä½ä¸å¨">Q3: å®è£å¡ä½ä¸å¨</h3>
<p><strong>è§£å³æ¹æ³ï¼</strong></p>
<ol>
<li>æ <code>Ctrl + C</code> ä¸­æ­å½åæä½</li>
<li>æ§è¡ï¼<code>openclaw doctor</code> æ£æ¥é®é¢</li>
<li>å¦æç¤ºç½ç»é®é¢ï¼æ£æ¥é²ç«å¢è®¾ç½®</li>
</ol>
<h3 id="q4-api-key-éç½®éè¯¯">Q4: API Key éç½®éè¯¯</h3>
<p><strong>è§£å³æ¹æ³ï¼</strong></p>
<ol>
<li>æ§è¡ï¼<code>openclaw onboard</code></li>
<li>éæ©éæ°éç½® API Key</li>
<li>ç¡®ä¿å¯é¥æ ¼å¼æ­£ç¡®</li>
</ol>
<h3 id="q5-ç«¯å£-18789-è¢«å ç¨">Q5: ç«¯å£ 18789 è¢«å ç¨</h3>
<p><strong>è§£å³æ¹æ³ï¼</strong></p>
<pre><code class="language-powershell">openclaw gateway --port 18790
</code></pre>
<p>ä½¿ç¨å¶ä»ç«¯å£å¯å¨æå¡ã</p>
<h1 id="ä¹ææ¬è¯´æ">ä¹ãææ¬è¯´æ</h1>
<p>OpenClaw è½¯ä»¶æ¬èº«å®å¨åè´¹ï¼ä¸»è¦ææ¬æ¥èª AI æ¨¡å API è°ç¨ï¼å¯éæ©å½äº§å¤§æ¨¡åï¼éä½ææ¬ã</p>
<hr>
<h1 id="ç»è¯­">ç»è¯­</h1>
<p>OpenClaw ä»£è¡¨äºä¸ªäºº AI å©ççæªæ¥è¶å¿ââä»"èå¤©å·¥å·"è¿åä¸º"æ§è¡å·¥å·"ãè½ç¶ç®åçéç½®è¿ç¨å¯¹å°ç½ç¨æ·æä¸å®é¨æ§ï¼ä½ä¸æ¦å®æè®¾ç½®ï¼æ¨å°æ¥æä¸ä¸ª 24/7 å¾å½çè¶çº§å©æã</p>


</div>
<div class="clear"></div>

		</div>
		<div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-31 19:50">2026-01-31 19:50</span>&nbsp;
<a href="https://www.cnblogs.com/weipo0105">é¿å¡RPA</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19558953);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19558953', targetLink: 'https://www.cnblogs.com/weipo0105/p/19558953', title: 'ãä¿å§çº§æç¨ãææææä½ å®è£OpenClawå¹¶æ¥å¥é£ä¹¦ï¼è®©AIå¨èå¤©è½¯ä»¶éå¸®ä½ å¹²æ´»' })">ä¸¾æ¥</a>
</div>
	 ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Rediså¿«éå®ç°å¸éè¿æ»¤å¨ï¼ç¼å­å»éçâæºè½é¨å«â ]]></title>
    <link>https://www.cnblogs.com/sun-10387834/p/19522155</link>
    <guid>0247f249e3ffca5b2e8153897549402b</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/sun-10387834/p/19522155" title="åå¸äº 2026-01-31 18:32">
    <span role="heading" aria-level="2">Rediså¿«éå®ç°å¸éè¿æ»¤å¨ï¼ç¼å­å»éçâæºè½é¨å«â</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>å¨ç¼å­æ¶æä¸­ï¼æ»æä¸äºâå¤´ç¼é®é¢âï¼ç¨æ·åå¤æäº¤ç¸åè¯·æ±ãæ¥è¯¢ä¸å­å¨çkeyå¯¼è´ç¼å­ç©¿éãæµ·éæ°æ®å»éæçä½ä¸â¦â¦è¿äºåºæ¯ä¸ï¼Rediså¸éè¿æ»¤å¨å°±æ¯å½ä¹æ æ§çâææâãå®åä¸ä¸ªæºè½é¨å«ï¼è½å¿«éå¤æ­âè¿ä¸ªäººæ¯ä¸æ¯æ¥è¿ââè¿ä¸ªkeyæ¯ä¸æ¯ä¸å­å¨âï¼ç¨æå°çç©ºé´ææ¬å®ç°é«æè¿æ»¤ï¼æ§è½è¿è¶ä¼ ç»çæ°æ®åºæ¥è¯¢æå¨éç¼å­æ ¡éªã</p>
<p>ä»å¤©å±ä»¬å°±ä»âæ¯ä»ä¹ãä¸ºä»ä¹å¥½ç¨ãæä¹ç¨Rediså¿«éå®ç°âä¸ä¸ªç»´åº¦ï¼ç¨éä¿çè¯­è¨+å®æä»£ç ï¼æå¸éè¿æ»¤å¨è®²éãå¨ç¨é¿å¼å¤æå¬å¼ï¼å°±ç®æ¯åæ¥è§¦ç¼å­çåå­¦ï¼ä¹è½è·çæ­¥éª¤å¿«éè½å°ã</p>
<h2 id="ä¸åææå¸éè¿æ»¤å¨å°åºæ¯ä¸ªå¥">ä¸ãåææï¼å¸éè¿æ»¤å¨å°åºæ¯ä¸ªå¥ï¼</h2>
<p>å¸éè¿æ»¤å¨ï¼Bloom Filterï¼æ¬è´¨æ¯ä¸ä¸ª<strong>åºäºåå¸å½æ°çæ¦çåæ°æ®ç»æ</strong>ï¼æ ¸å¿ä½ç¨æ¯âå¿«éå¤æ­ä¸ä¸ªåç´ æ¯å¦å­å¨äºéåä¸­âãå®ä¸ååå¸è¡¨é£æ ·å­å¨å®æ´æ°æ®ï¼èæ¯ç¨ä¸ä¸ªäºè¿å¶æ°ç»ï¼bitæ°ç»ï¼+å¤ä¸ªåå¸å½æ°ï¼éè¿æ è®°åç´ çåå¸ä½ç½®æ¥å®ç°è¿æ»¤ã</p>
<p>å±ä»¬ç¨âå°åºé¨å«è®°è®¿å®¢âçåºæ¯ç±»æ¯ï¼ç§ææ ¸å¿é»è¾ï¼</p>
<ul>
<li>
<p>äºè¿å¶æ°ç» = é¨å«çç»è®°æ¬ï¼æ¯ä¸é¡µåªæâæ¯âï¼1ï¼åâå¦âï¼0ï¼ä¸¤ä¸ªç¶æï¼</p>
</li>
<li>
<p>åå¸å½æ° = é¨å«çâè®°å¿è§åâï¼æ¯å¦âè®°ä½è®¿å®¢çå§æ°é¦å­æ¯+èº«é«åºé´+éå­é¢è²âï¼</p>
</li>
<li>
<p>åç´ å­å¨å¤æ­ = é¨å«æ ¹æ®è®°å¿è§åæ ¸å¯¹ç»è®°æ¬ï¼åªè¦æä¸æ¡è§åå¯¹åºâå¦âï¼å°±ç¡®å®è®¿å®¢æ²¡æ¥è¿ï¼å¦æå¨æ¯âæ¯âï¼åå¤§æ¦çæ¥è¿ï¼å­å¨æå°è¯¯å¤ï¼ã</p>
</li>
</ul>
<h3 id="æ ¸å¿ç¹æ§ä¼ç¹ä¸å°ççµ">æ ¸å¿ç¹æ§ï¼ä¼ç¹ä¸âå°ççµâ</h3>
<p>å¸éè¿æ»¤å¨çä¼å¿åå±éæ§é½å¾é²æï¼è½å°åå¿é¡»æ¸æ¸ï¼</p>
<h4 id="-æ ¸å¿ä¼ç¹">â æ ¸å¿ä¼ç¹</h4>
<ul>
<li>
<p>ç©ºé´å ç¨æå°ï¼ä»ç¨bitæ°ç»å­å¨æ è®°ï¼å­å¨100ä¸æ¡æ°æ®ï¼è¯¯å¤ç1%æ¶ï¼ä»éçº¦1.2MBç©ºé´ï¼</p>
</li>
<li>
<p>æ¥è¯¢éåº¦æå¿«ï¼æ¶é´å¤æåº¦æ¯O(k)ï¼kæ¯åå¸å½æ°ä¸ªæ°ï¼ï¼æ è®ºæ°æ®éå¤å¤§ï¼é½è½ç¬é´è¿åç»æï¼</p>
</li>
<li>
<p>æ¯ææµ·éæ°æ®ï¼æ éå­å¨å®æ´æ°æ®ï¼å¯è½»æ¾åºå¯¹åä¸çº§ãäº¿çº§æ°æ®çè¿æ»¤åºæ¯ã</p>
</li>
</ul>
<h4 id="-ä¸å¯å¿½è§çå±éæ§">â ä¸å¯å¿½è§çå±éæ§</h4>
<ul>
<li>
<p>å­å¨è¯¯å¤çï¼åªè½ç¡®å®âåç´ ä¸å®ä¸å­å¨âï¼ä¸è½100%ç¡®å®âåç´ ä¸å®å­å¨âï¼è¯¯å¤çå¯éè¿åæ°è°æ´ï¼ä½æ æ³å®å¨æ¶é¤ï¼</p>
</li>
<li>
<p>ä¸æ¯æå é¤æä½ï¼ä¸æ¦åç´ è¢«æ è®°å°bitæ°ç»ï¼æ æ³ååæ¸é¤ï¼ä¼å½±åå¶ä»åç´ çå¤æ­ï¼ï¼</p>
</li>
<li>
<p>éæåé¢ä¼°æ°æ®éï¼åå¸å½æ°ä¸ªæ°ãbitæ°ç»é¿åº¦éæ ¹æ®é¢ä¼°æ°æ®éè®¡ç®ï¼å¦åä¼å¯¼è´è¯¯å¤çé£åã</p>
</li>
</ul>
<h2 id="äºrediså®ç°å¸éè¿æ»¤å¨çä¸¤ç§æ¹å¼">äºãRediså®ç°å¸éè¿æ»¤å¨çä¸¤ç§æ¹å¼</h2>
<p>Redisæ¬èº«æ²¡æåç½®å¸éè¿æ»¤å¨ï¼ä½æä¾äºä¸¤ç§å¿«éå®ç°çæ¹æ¡ï¼ä¸æ¯åºäºRedisçBitMapï¼ä½å¾ï¼æå¨å®ç°ï¼çµæ´»å¯æ§ï¼äºæ¯ä½¿ç¨Rediså®æ¹æ¨èçRedissonå®¢æ·ç«¯ï¼å°è£å¥½ç°æAPIï¼å¼ç®±å³ç¨ãå±ä»¬åå«è®²å®æï¼æééæ©å³å¯ã</p>
<h3 id="æ¹æ¡ä¸åºäºbitmapæå¨å®ç°çµæ´»å¯æ§">æ¹æ¡ä¸ï¼åºäºBitMapæå¨å®ç°ï¼çµæ´»å¯æ§ï¼</h3>
<p>æ ¸å¿æè·¯ï¼å©ç¨RedisçBitMapæ°æ®ç»æä½ä¸ºå¸éè¿æ»¤å¨çbitæ°ç»ï¼éè¿å¤ä¸ªåå¸å½æ°è®¡ç®åç´ çåå¸å¼ï¼å°å¯¹åºä½ç½®çbitç½®ä¸º1ï¼æ¥è¯¢æ¶ï¼åæ ·è®¡ç®åå¸å¼ï¼æ£æ¥ææä½ç½®æ¯å¦ä¸º1ï¼å¨ä¸º1åå¤§æ¦çå­å¨ï¼å¦åä¸å®ä¸å­å¨ã</p>
<h4 id="1-å³é®åæ°è®¡ç®é¿åè¯¯å¤çè¿é«">1. å³é®åæ°è®¡ç®ï¼é¿åè¯¯å¤çè¿é«ï¼</h4>
<p>æå¨å®ç°åï¼éåç¡®å®ä¸ä¸ªæ ¸å¿åæ°ï¼å¯éè¿å¬å¼æå¨çº¿å·¥å·è®¡ç®ï¼</p>
<ul>
<li>
<p>mï¼bitæ°ç»é¿åº¦ï¼åä½ï¼bitï¼ï¼é¢ä¼°æ°æ®énè¶å¤§ï¼méè¶å¤§ï¼</p>
</li>
<li>
<p>kï¼åå¸å½æ°ä¸ªæ°ï¼kè¿å¤ä¼å¯¼è´bitæ°ç»å¿«éè¢«å æ»¡ï¼è¯¯å¤çä¸åï¼kè¿å°åè¿æ»¤ææå·®ï¼</p>
</li>
<li>
<p>pï¼å¯æ¥åçè¯¯å¤çï¼éå¸¸è®¾ä¸º0.01~0.1ï¼ã</p>
</li>
</ul>
<p>å¸¸ç¨è®¡ç®å¬å¼ï¼æ éæ­»è®°ï¼å¨çº¿å·¥å·ç´æ¥ç®ï¼ï¼</p>
<ul>
<li>
<p>m = - (n * ln p) / (ln 2)Â² ï¼bitæ°ç»é¿åº¦ï¼ï¼</p>
</li>
<li>
<p>k = (m / n) * ln 2 ï¼åå¸å½æ°ä¸ªæ°ï¼ã</p>
</li>
</ul>
<p>ä¸¾ä¸ªä¾å­ï¼é¢ä¼°å­å¨10ä¸æ¡æ°æ®ï¼è¯¯å¤çè®¾ä¸º0.01ï¼è®¡ç®å¾mâ958505 bitï¼çº¦117KBï¼ï¼kâ7ä¸ªåå¸å½æ°ã</p>
<h4 id="2-æå¨å®ç°ä»£ç javaç¤ºä¾">2. æå¨å®ç°ä»£ç ï¼Javaç¤ºä¾ï¼</h4>
<p>æ ¸å¿æ¯å®ç°å¤ä¸ªåå¸å½æ°ï¼æä½RedisçBitMapæä»¤ï¼SETBITç½®1ï¼GETBITæ¥è¯¢ï¼ï¼</p>
<pre><code class="language-java">import org.springframework.data.redis.core.StringRedisTemplate;
import java.nio.charset.StandardCharsets;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;

/**
 * åºäºRedis BitMapæå¨å®ç°å¸éè¿æ»¤å¨
 */
public class RedisBloomFilter {
    // Redisé®å
    private final String key;
    // bitæ°ç»é¿åº¦
    private final long bitSize;
    // åå¸å½æ°ä¸ªæ°
    private final int hashCount;
    private final StringRedisTemplate stringRedisTemplate;

    // æé å¨ï¼åå§ååæ°
    public RedisBloomFilter(String key, long n, double p, StringRedisTemplate stringRedisTemplate) {
        this.key = key;
        this.stringRedisTemplate = stringRedisTemplate;
        // è®¡ç®bitæ°ç»é¿åº¦
        this.bitSize = (long) (-n * Math.log(p) / (Math.log(2) * Math.log(2)));
        // è®¡ç®åå¸å½æ°ä¸ªæ°
        this.hashCount = (int) (this.bitSize / n * Math.log(2));
    }

    // æ·»å åç´ å°å¸éè¿æ»¤å¨
    public void add(Object value) {
        byte[] bytes = value.toString().getBytes(StandardCharsets.UTF_8);
        long[] hashes = hash(bytes, hashCount, bitSize);
        for (long hash : hashes) {
            // æå¯¹åºbitä½ç½®ç½®ä¸º1
            stringRedisTemplate.opsForValue().setBit(key, hash, true);
        }
    }

    // å¤æ­åç´ æ¯å¦å­å¨ï¼å­å¨è¿åtrueï¼ä¸å­å¨è¿åfalseï¼trueå¯è½æ¯è¯¯å¤ï¼
    public boolean contains(Object value) {
        byte[] bytes = value.toString().getBytes(StandardCharsets.UTF_8);
        long[] hashes = hash(bytes, hashCount, bitSize);
        for (long hash : hashes) {
            // åªè¦æä¸ä¸ªbitä½ä¸º0ï¼å°±ç¡®å®ä¸å­å¨
            if (!stringRedisTemplate.opsForValue().getBit(key, hash)) {
                return false;
            }
        }
        return true;
    }

    // å¤åå¸å½æ°å®ç°ï¼åºäºMD5æåï¼
    private long[] hash(byte[] bytes, int hashCount, long bitSize) {
        long[] hashes = new long[hashCount];
        try {
            MessageDigest md5 = MessageDigest.getInstance("MD5");
            byte[] digest = md5.digest(bytes);
            // æMD5ç»æï¼16å­èï¼æåæå¤ä¸ªåå¸å¼
            for (int i = 0; i &lt; hashCount; i++) {
                long hash = 0;
                for (int j = i * 2; j &lt; (i + 1) * 2 &amp;&amp; j &lt; digest.length; j++) {
                    hash = hash * 256 + (digest[j] &amp; 0xFF);
                }
                // ç¡®ä¿åå¸å¼å¨bitæ°ç»é¿åº¦èå´å
                hashes[i] = hash % bitSize;
            }
        } catch (NoSuchAlgorithmException e) {
            throw new RuntimeException("åå¸å½æ°åå§åå¤±è´¥", e);
        }
        return hashes;
    }
}
</code></pre>
<h4 id="3-ä½¿ç¨æ¹å¼">3. ä½¿ç¨æ¹å¼</h4>
<pre><code class="language-java">// åå§åå¸éè¿æ»¤å¨ï¼keyä¸º"user:bloom:filter"ï¼é¢ä¼°10ä¸æ¡æ°æ®ï¼è¯¯å¤ç0.01
RedisBloomFilter bloomFilter = new RedisBloomFilter("user:bloom:filter", 100000, 0.01, stringRedisTemplate);

// æ·»å åç´ 
bloomFilter.add("user123");
bloomFilter.add("order456");

// å¤æ­åç´ æ¯å¦å­å¨
boolean exists = bloomFilter.contains("user123"); // å¤§æ¦çè¿åtrue
boolean notExists = bloomFilter.contains("user789"); // ä¸å®è¿åfalse
</code></pre>
<h3 id="æ¹æ¡äºredissonå®¢æ·ç«¯å®ç°å¼ç®±å³ç¨">æ¹æ¡äºï¼Redissonå®¢æ·ç«¯å®ç°ï¼å¼ç®±å³ç¨ï¼</h3>
<p>å¦æè§å¾æå¨å®ç°éº»ç¦ï¼æ¨èç¨RedissonââRediså®æ¹çæçJavaå®¢æ·ç«¯ï¼å·²ç»å°è£å¥½äºå¸éè¿æ»¤å¨ï¼æ¯æèªå¨è®¡ç®åæ°ãåå¸å¼åºæ¯ï¼è¿è§£å³äºæå¨å®ç°çåå¸å½æ°ä¼åé®é¢ï¼çäº§ç¯å¢é¦éã</p>
<h4 id="1-å¼å¥ä¾èµ">1. å¼å¥ä¾èµ</h4>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.redisson&lt;/groupId&gt;
    &lt;artifactId&gt;redisson-spring-boot-starter&lt;/artifactId&gt;
    &lt;version&gt;3.23.3&lt;/version&gt; // çæ¬ä¸Redisçæ¬éé
&lt;/dependency&gt;
</code></pre>
<h4 id="2-å¿«éå®ç°ä»£ç ">2. å¿«éå®ç°ä»£ç </h4>
<pre><code class="language-java">import org.redisson.api.RBloomFilter;
import org.redisson.api.RedissonClient;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

@Component
public class RedissonBloomFilterDemo {
    @Autowired
    private RedissonClient redissonClient;

    // åå§åå¸éè¿æ»¤å¨
    public RBloomFilter&lt;String&gt; initBloomFilter() {
        // å¸éè¿æ»¤å¨åç§°
        String filterName = "user:bloom:filter:redisson";
        // è·åå¸éè¿æ»¤å¨å®ä¾
        RBloomFilter&lt;String&gt; bloomFilter = redissonClient.getBloomFilter(filterName);
        // åå§åï¼é¢ä¼°10ä¸æ¡æ°æ®ï¼è¯¯å¤ç0.01ï¼Redissonä¼èªå¨è®¡ç®måkï¼
        bloomFilter.tryInit(100000, 0.01);
        return bloomFilter;
    }

    // æµè¯ä½¿ç¨
    public void testBloomFilter() {
        RBloomFilter&lt;String&gt; bloomFilter = initBloomFilter();
        // æ·»å åç´ 
        bloomFilter.add("user123");
        bloomFilter.add("order456");

        // å¤æ­åç´ æ¯å¦å­å¨
        boolean exists = bloomFilter.contains("user123"); // å¤§æ¦çtrue
        boolean notExists = bloomFilter.contains("user789"); // ä¸å®false

        // ç»è®¡å·²æ·»å åç´ æ°éï¼è¿ä¼¼å¼ï¼
        long count = bloomFilter.count();
        System.out.println("å·²æ·»å åç´ æ°éï¼" + count);
    }
}
</code></pre>
<h4 id="3-æ ¸å¿ä¼å¿">3. æ ¸å¿ä¼å¿</h4>
<ul>
<li>
<p>åå¸å¼æ¯æï¼ééå¾®æå¡åºæ¯ï¼å¤å®ä¾å±äº«åä¸ä¸ªå¸éè¿æ»¤å¨ï¼æ éæå¿æ°æ®ä¸è´æ§ï¼</p>
</li>
<li>
<p>åæ°ä¼åï¼åç½®æ´é«æçåå¸å½æ°ï¼MurmurHashï¼ï¼è¯¯å¤çæ§å¶æ´ç²¾åï¼</p>
</li>
<li>
<p>APIä¸°å¯ï¼æ¯æåç´ è®¡æ°ãæ¹éæ·»å ç­åè½ï¼æ¯æå¨å®ç°æ´å®åã</p>
</li>
</ul>
<h2 id="ä¸å®éåºç¨åºæ¯ä¸é¿åæå">ä¸ãå®éåºç¨åºæ¯ä¸é¿åæå</h2>
<h3 id="-å¸ååºç¨åºæ¯">â å¸ååºç¨åºæ¯</h3>
<ol>
<li>
<p>ç¼å­ç©¿éé²æ¤ï¼æ¥è¯¢æ°æ®åºåï¼åç¨å¸éè¿æ»¤å¨å¤æ­keyæ¯å¦å­å¨ï¼ä¸å­å¨åç´æ¥è¿åï¼é¿åå¤§éæ ææ°æ®åºæ¥è¯¢ï¼</p>
</li>
<li>
<p>æµ·éæ°æ®å»éï¼æ¯å¦ç¨æ·ç­¾å°ãæ¥å¿å»éãç¬è«URLå»éï¼æ éå­å¨å¨éæ°æ®ï¼ä»ç¨bitæ°ç»æ è®°ï¼</p>
</li>
<li>
<p>é²æ­¢éå¤æäº¤ï¼æ¥å£è¯·æ±åï¼ç¨å¸éè¿æ»¤å¨å¤æ­è¯·æ±IDæ¯å¦å·²å¤çï¼é¿åéå¤ä¸å¡é»è¾æ§è¡ï¼</p>
</li>
<li>
<p>é»ååè¿æ»¤ï¼æ¯å¦åå¾é®ä»¶è¯å«ãæ¶æIPæ¦æªï¼å¿«éå¤æ­æ¯å¦å¨é»ååä¸­ã</p>
</li>
</ol>
<h3 id="-é¿åæå">â é¿åæå</h3>
<ul>
<li>
<p>ä¸è¦ç¨å¨âç»å¯¹ä¸è½è¯¯å¤âçåºæ¯ï¼æ¯å¦éèäº¤æãç¨æ·ç»å½éªè¯ï¼è¯¯å¤å¯è½å¯¼è´ä¸¥éé®é¢ï¼</p>
</li>
<li>
<p>æåé¢ä¼°æ°æ®éï¼è¥å®éæ°æ®éè¿è¶é¢ä¼°ï¼bitæ°ç»ä¼è¢«å¿«éå æ»¡ï¼è¯¯å¤çä¼æ¥å§ä¸åï¼å¯é¢ç2~3ååä½ï¼</p>
</li>
<li>
<p>å®æéç½®å¸éè¿æ»¤å¨ï¼è¥æ°æ®æè¿æç¹æ§ï¼æ¯å¦æ¯æ¥é»ååæ´æ°ï¼ï¼å¯å®æå é¤æ§çå¸éè¿æ»¤å¨ï¼éå»ºæ°å®ä¾ï¼</p>
</li>
<li>
<p>Rediséç¾¤æ³¨æäºé¡¹ï¼æå¨å®ç°çå¸éè¿æ»¤å¨è¥ç¨å¨Rediséç¾¤ä¸­ï¼éç¡®ä¿keyè½å¨åä¸ä¸ªèç¹ï¼é¿ååå¸åçå¯¼è´bitæ°ç»åæ£ï¼ï¼Redissonå·²èªå¨å¤çè¯¥é®é¢ã</p>
</li>
</ul>
<h2 id="åæ»ç»ä»ä¹æ¶åéåªç§å®ç°æ¹å¼">åãæ»ç»ï¼ä»ä¹æ¶åéåªç§å®ç°æ¹å¼ï¼</h2>
<p>Rediså¸éè¿æ»¤å¨çæ ¸å¿ä»·å¼çæ¯âç¨æå°ç©ºé´æ¢æé«è¿æ»¤æçâï¼è½å°æ¶æåºæ¯éæ©å®ç°æ¹å¼ï¼</p>
<ul>
<li>
<p>å¿«éè½å°ãçäº§ç¯å¢ãåå¸å¼åºæ¯ï¼éRedissonï¼çå¿é«æï¼ééæ§å¼ºï¼</p>
</li>
<li>
<p>å­¦ä¹ ç ç©¶ãèªå®ä¹åå¸å½æ°ãç¹æ®åæ°éæ±ï¼éæå¨å®ç°ï¼çµæ´»å¯æ§ï¼å æ·±å¯¹åçççè§£ã</p>
</li>
</ul>
<p>å¶å®å¸éè¿æ»¤å¨çé»è¾å¹¶ä¸å¤æï¼æ ¸å¿å°±æ¯âåå¸æ è®°+æ¦çå¤æ­âãææ¡å®ä¹åï¼é¢å¯¹ç¼å­ç©¿éãæµ·éå»éç­é®é¢ï¼å°±ä¸ç¨åé âå¨éå­å¨âè¿ç§ç¬¨åæ³ï¼è½å¤§å¹æåç³»ç»æ§è½åç©ºé´å©ç¨çãä¸æ¬¡åéå°ç±»ä¼¼åºæ¯ï¼ç´æ¥æåºRediså¸éè¿æ»¤å¨ï¼è½»æ¾æå®ï¼</p>


</div>
<div id="MySignature" role="contentinfo">
    
<p>â¤ï¸ å¦æä½ åæ¬¢è¿ç¯æç« ï¼è¯·ç¹èµæ¯æï¼ ð åæ¶æ¬¢è¿å³æ³¨æçåå®¢ï¼è·åæ´å¤ç²¾å½©åå®¹ï¼</p>

<p>æ¬ææ¥èªåå®¢å­ï¼ä½èï¼<a href="https://www.cnblogs.com/sun-10387834/" target="_blank">ä½ç¥è®©ææ¥å·¡å±±</a>ï¼è½¬è½½è¯·æ³¨æåæé¾æ¥ï¼<a href="https://www.cnblogs.com/sun-10387834/p/19522155" target="_blank">https://www.cnblogs.com/sun-10387834/p/19522155</a></p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-31 18:33">2026-01-31 18:32</span>&nbsp;
<a href="https://www.cnblogs.com/sun-10387834">ä½ç¥è®©ææ¥å·¡å±±</a>&nbsp;
éè¯»(<span id="post_view_count">20</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19522155);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19522155', targetLink: 'https://www.cnblogs.com/sun-10387834/p/19522155', title: 'Rediså¿«éå®ç°å¸éè¿æ»¤å¨ï¼ç¼å­å»éçâæºè½é¨å«â' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ linuxæå¡å¨éé»å®è£Oracle26ai ]]></title>
    <link>https://www.cnblogs.com/liuziyi1/p/19558714</link>
    <guid>8b9dc574a78661f5af078e1c84c19f4b</guid>
    <description>
    <![CDATA[ 
		<h2>
			<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/liuziyi1/p/19558714" title="åå¸äº 2026-01-31 17:45">
    <span role="heading" aria-level="2">linuxæå¡å¨éé»å®è£Oracle26ai</span>
    

</a>

		</h2>
		<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>ä¸è½½å°åï¼<a href="https://www.oracle.com/database/technologies/oracle26ai-linux-downloads.html" target="_blank" rel="noopener nofollow">https://www.oracle.com/database/technologies/oracle26ai-linux-downloads.html</a><br>
<img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3323825/202601/3323825-20260131174508549-1515658553.png" class="lazyload"></p>
<p>1.å®è£ç¯å¢åå¤<br>
1.1.æ¥çç©çåå­<br>
<code>[root@aiserver ~]# free -m</code><br>
1.2.æä½ç³»ç»çæ¬</p>
<pre><code>[root@aiserver ~]#  cat /etc/redhat-release
</code></pre>
<p>1.3.æä½ç³»ç»åå­</p>
<pre><code>[root@aiserver ~]# df -h /dev/shm/
</code></pre>
<p>1.4.ç£çç©ºé´</p>
<pre><code>[root@aiserver ~]# df -TH
[root@aiserver ~]# df -h /tmp/
[root@aiserver ~]# df -h /u01
</code></pre>
<p>1.5.æ¥çç³»ç»æ¶æ</p>
<pre><code>[root@aiserver ~]# uname -m
x86_64
</code></pre>
<p><code>[root@aiserver ~]# cat /proc/version</code></p>
<p>1.6.è§£æ/etc/hosts</p>
<pre><code>[root@aiserver ~]# hostname
aiserver

cat &gt;&gt; /etc/hosts &lt;&lt; EOF
192.168.1.1 aiserver
EOF
</code></pre>
<p>1.7.å³é­é²ç«å¢è¿æselinux</p>
<pre><code>systemctl status firewalld.service
systemctl stop firewalld.service
systemctl disable firewalld.service
</code></pre>
<p><code>sed -i 's/SELINUX=enforcing/SELINUX=disabled/' /etc/selinux/config</code></p>
<p>2.åå»ºç¨æ·åç»</p>
<h1 id="æ¥çæ¯å¦å®è£æoracleè½¯ä»¶">æ¥çæ¯å¦å®è£æOracleè½¯ä»¶</h1>
<p><code>[root@aiserver ~]# more /etc/oraInst.loc</code></p>
<h1 id="æ¥çæ¯å¦å·²å­å¨ç¸å³ç¨æ·ç»">æ¥çæ¯å¦å·²å­å¨ç¸å³ç¨æ·ç»</h1>
<pre><code>[root@aiserver ~]# grep oinstall /etc/group
[root@aiserver ~]# grep dba /etc/group
[root@aiserver ~]# grep oper /etc/group
</code></pre>
<pre><code>[root@aiserver ~]# /usr/sbin/groupadd -g 54321 oinstall
[root@aiserver ~]# /usr/sbin/groupadd -g 54322 dba
[root@aiserver ~]# /usr/sbin/groupadd -g 54323 oper
[root@aiserver ~]# /usr/sbin/useradd -u 54321 -g oinstall -G dba,oper oracle
</code></pre>
<p>--ä¿®æ¹å¯ç ä¸ºoracle<br>
<code>[root@aiserver ~]# passwd oracle</code></p>
<p>3.åå»ºå·¥ä½çç®å½</p>
<pre><code>[root@aiserver ~]# mkdir -p /u01/app/oracle
[root@aiserver ~]# chown -R oracle:oinstall /u01/
[root@aiserver ~]# chmod -R 775 /u01/app/oracle
</code></pre>
<p>4.éç½®Oracleçç¯å¢åé</p>
<pre><code>[oracle@aiserver ~]$ vi .bash_profile

export ORACLE_BASE=/u01/app/oracle
export ORACLE_HOME=$ORACLE_BASE/product/23.26.1/dbhome_1
export ORACLE_SID=prod
export PATH=$ORACLE_HOME/bin:$PATH:$HOME/bin
</code></pre>
<pre><code>[oracle@aiserver ~]$ source .bash_profile
[oracle@aiserver ~]$ env | grep ORACLE
</code></pre>
<p>5.ä¿®æ¹åæ ¸åæ°<br>
ä»¥ä¸å¨rootç¨æ·ä¸æä½</p>
<pre><code>cp /etc/sysctl.conf /etc/sysctl.conf.bak

cat &gt;&gt; /etc/sysctl.conf &lt;&lt; "EOF"
fs.file-max = 6815744
kernel.sem = 250 32000 100 128
kernel.shmmni = 4096
kernel.shmall = 751619276
kernel.shmmax = 3006477107
kernel.panic_on_oops = 1
net.core.rmem_default = 262144
net.core.rmem_max = 4194304
net.core.wmem_default = 262144
net.core.wmem_max = 1048576
fs.aio-max-nr = 1048576
net.ipv4.ip_local_port_range = 9000 65500
EOF

kernel.shmall :ç©çåå­ç70%
kernel.shmmni=kernel.shmall/4

ç¯å¢åéçæ
sysctl --system
</code></pre>
<p>6./etc/profileéç½®<br>
ä»¥ä¸rootç¨æ·æä½</p>
<pre><code>cp /etc/profile /etc/profile.bak

cat &gt;&gt; /etc/profile &lt;&lt; "EOF"
if [ $USER = "oracle" ]; then
        if [ $SHELL = "/bin/ksh" ]; then
                ulimit -p 16384
                ulimit -n 65536
        else
                ulimit -u 16384 -n 65536
        fi
fi
EOF


vi /etc/pam.d/login
session    required     pam_limits.so
</code></pre>
<p>7.ä¿®æ¹èµæºéå¶<br>
ä»¥ä¸rootç¨æ·æä½</p>
<pre><code>cp /etc/security/limits.conf /etc/security/limits.conf.bak

cat &gt;&gt; /etc/security/limits.conf &lt;&lt; "EOF"
oracle soft nproc 2047
oracle hard nproc 16384
oracle soft nofile 1024
oracle hard nofile 65536
EOF
</code></pre>
<p>8.yumå®è£ä¾èµ</p>
<pre><code>[root@aiserver ~]# mount | grep sr0
mount /dev/cdrom /mnt

echo "[localREPO]" &gt;&gt; /etc/yum.repos.d/my.repo
echo "name=localhost8" &gt;&gt; /etc/yum.repos.d/my.repo
echo "baseurl=file:///mnt/BaseOS" &gt;&gt; /etc/yum.repos.d/my.repo
echo "gpgcheck=0" &gt;&gt; /etc/yum.repos.d/my.repo
echo "enabled=1" &gt;&gt; /etc/yum.repos.d/my.repo

echo "[localREPO_APP]" &gt;&gt; /etc/yum.repos.d/my.repo
echo "name=localhost8_app" &gt;&gt; /etc/yum.repos.d/my.repo
echo "baseurl=file:///mnt/AppStream" &gt;&gt; /etc/yum.repos.d/my.repo
echo "gpgcheck=0" &gt;&gt; /etc/yum.repos.d/my.repo
echo "enabled=1" &gt;&gt; /etc/yum.repos.d/my.repo

[root@aiserver yum.repos.d]# yum repolist
</code></pre>
<p>ä»¥ä¸å½ä»¤å®è£ä¾èµå</p>
<pre><code>yum install bc \
binutils \
compat-openssl10 \
elfutils-libelf \
fontconfig \
glibc \
glibc-devel \
ksh \
libaio \
libXrender \
libX11 \
libXau \
libXi \
libXtst \
libgcc \
libstdc++ \
libxcb \
libibverbs \
libasan \
liblsan \
librdmacm \
make \
policycoreutils \
policycoreutils-python-utils \
smartmontools \
sysstat -y
</code></pre>
<p>9.è§£åè½¯ä»¶ææã<br>
oracleç¨æ·ä¸æä½<br>
<code>[oracle@aiserver ~]$ mkdir -p /u01/app/oracle/product/23.26.1/dbhome_1</code></p>
<p>oracleç¨æ·ä¸æä½<br>
<code>[oracle@aiserver ~]$ unzip /opt/LINUX.X64_2326100_db_home.zip -d $ORACLE_HOME</code></p>
<p>10.éé»å®è£Oracleæ°æ®åº<br>
10.1.ç¼è¾rspæä»¶</p>
<pre><code>[oracle@aiserver ~]$ cd $ORACLE_HOME/install/response
[oracle@aiserver response]$ cp db_install.rsp /tmp
</code></pre>
<pre><code>vi /tmp/db_install.rsp

ä¿®æ¹db_install.rspæä»¶ä¸­ä»¥ä¸åå®¹

oracle.install.option=INSTALL_DB_SWONLY
UNIX_GROUP_NAME=oinstall
INVENTORY_LOCATION=/u01/app/oraInventory
ORACLE_BASE=/u01/app/oracle
ORACLE_HOME=/u01/app/oracle/product/23.26.1/dbhome_1
InstallEdition=EE
OSDBA_GROUP=dba
OSOPER_GROUP=oper
OSBACKUPDBA_GROUP=dba
OSDGDBA_GROUP=dba
OSKMDBA_GROUP=dba
OSRACDBA_GROUP=dba
</code></pre>
<p>dbType=GENERAL_PURPOSE</p>
<p>10.2.éé»å®è£Oracleè½¯ä»¶<br>
[oracle@aiserver ~]$ cd $ORACLE_HOME<br>
./runInstaller -silent -responseFile /tmp/db_install.rsp -ignorePrereq</p>
<h1 id="å®è£ç»æåéè¦ä»¥rootç¨æ·æ§è¡ä»¥ä¸ä¸¤ä¸ªèæ¬">å®è£ç»æåéè¦ä»¥rootç¨æ·æ§è¡ä»¥ä¸ä¸¤ä¸ªèæ¬</h1>
<p>/u01/app/oracle/oraInventory/orainstRoot.sh<br>
/u01/app/oracle/product/23.26.1/dbhome_1/root.sh</p>
<p>11.çå¬åå»º<br>
éé»éç½®çå¬<br>
<code>[oracle@aiserver ~]$ netca -silent -responseFile $ORACLE_HOME/assistants/netca/netca.rsp</code></p>
<p>12.dbcaå»ºåº<br>
12.1.ç¼è¾dbca.rspå®è£æä»¶</p>
<pre><code>[oracle@aiserver ~]$ cd $ORACLE_HOME/assistants/dbca
[oracle@aiserver dbca]$ cp dbca.rsp /tmp
[oracle@aiserver ~]$ vi /tmp/dbca.rsp

responseFileVersion=/oracle/assistants/rspfmt_dbca_response_schema_v23.0.0
gdbName=prod
sid=prod
databaseConfigType=SI
createAsContainerDatabase=true
numberOfPDBs=2
pdbName=prod
templateName=General_Purpose.dbc
oracleHomeUserPassword=oracle
totalMemory=1500
sysPassword=oracle
systemPassword=oracle
datafileDestination=/u01/app/oracle/oradata
characterSet=AL32UTF8
nationalCharacterSet=UTF8
databaseType=OLTP

æ³¨æï¼templateNameãcreateAsContainerDatabaseå¿é æå®
</code></pre>
<p>12.2.éé»å®è£æ°æ®åº<br>
<code>[oracle@aiserver ~]$ dbca -silent -createDatabase -responseFile /tmp/dbca.rsp</code></p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3323825/202601/3323825-20260131174543584-1746664079.png" class="lazyload"></p>


</div>
<div class="clear"></div>

		<p class="postfoot">
			posted on 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-31 17:46">2026-01-31 17:45</span>&nbsp;
<a href="https://www.cnblogs.com/liuziyi1">åå­æ¯</a>&nbsp;
éè¯»(<span id="post_view_count">5</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19558714);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19558714', targetLink: 'https://www.cnblogs.com/liuziyi1/p/19558714', title: 'linuxæå¡å¨éé»å®è£Oracle26ai' })">ä¸¾æ¥</a>

		</p>
	 ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ æ¶æå¸å¿å¤ï¼ç°åº¦æ¹æ¡æ±æ» ]]></title>
    <link>https://www.cnblogs.com/toplist/p/19527704</link>
    <guid>7e92593f124e573b1bb1fb05309e071f</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/toplist/p/19527704" title="åå¸äº 2026-01-31 17:35">
    <span role="heading" aria-level="2">æ¶æå¸å¿å¤ï¼ç°åº¦æ¹æ¡æ±æ»</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>å¤§å®¶å¥½ï¼ææ¯Javaççå¸ãæ¬æç»åç¬èçç»éªåæèï¼å¯¹ç°åº¦æ¹æ¡åä¸ªæ»ç»ï¼éç¹ä»ç»ABå®éªã</p>
<p>ç°åº¦å¨å¼åæµç¨ä¸­éå¸¸æ®éãååå°æµééªè¯ï¼ç¡®è®¤æ è¯¯ååæ¨å¨ï¼ç°åº¦è¿ç¨ä¸­ä¸æ¦åç°ç³»ç»å¼å¸¸ãæä¸å¡ææ å¼å¸¸ï¼åºç«å»åæ»ã</p>
<h1 id="ç°åº¦åºæ¯">ç°åº¦åºæ¯</h1>
<ul>
<li>ä»£ç ç°åº¦ï¼æ¯æå¸åçç°åº¦ï¼ç°åº¦ååæ°é»è¾ï¼ç°åº¦å¤åæ§é»è¾
<ul>
<li>æ¢å¯ä»¥æä¾v2çæ¬æ°æ¥å£ç»è°ç¨æ¹æå¡ï¼ç±è°ç¨æ¹æ¥åç°åº¦åæ¢</li>
<li>ä¹å¯ä»¥åé¨åç°åº¦ï¼åå°è°ç¨æ¹æ æ</li>
</ul>
</li>
<li>åçç°åº¦ï¼ä¸çº¿è¿ç¨ä¸­ï¼æ°çæ¬æå¡å®ä¾ä¸æ­å¢å ï¼éèèå¼å®¹æ°æ§åè®®</li>
<li>éç½®ç°åº¦ï¼ä¿®æ¹éç½®æ¶ï¼ææå¡å®ä¾ç°åº¦æ¨ééç½®åæ´</li>
</ul>
<h1 id="ç°åº¦æ¨¡å¼">ç°åº¦æ¨¡å¼</h1>
<ul>
<li>æ°å­idå°¾å·ç°åº¦ï¼åidæå2ä½ï¼ç¾åæ¯ï¼ãæå3ä½ï¼ååæ¯ï¼ãæå4ä½ï¼ä¸åæ¯ï¼ç­
<ul>
<li>å®ç°æ¹å¼ï¼idåæ¨¡ï¼ä¾å¦ <code>id % 100 &lt; ç°åº¦ç¾åæ¯</code>ï¼åå½ä¸­ç°åº¦</li>
<li>ç¹ç¹ï¼ç®åï¼éç¨äºç»å¤§é¨åææ¯ä¼ååºæ¯</li>
</ul>
</li>
<li>éæºç°åº¦ï¼åä¸é¨åéæºæµéåç°åº¦
<ul>
<li>å®ç°æ¹å¼ï¼<code>ThreadLocalRandom.current().nextInt(100) &lt; ç°åº¦ç¾åæ¯</code></li>
<li>ä¹æä»¥ä½¿ç¨ThreadLocalRandomãèä¸æ¯Randomï¼æ¯ä¸ºäºé¿åå¤çº¿ç¨ç«äºç¨äºçæéæºæ°çseed</li>
</ul>
</li>
<li>A/Bå®éª
<ul>
<li>å®ç°æ¹å¼ï¼åå±å®éªãå®éªæ°æ®æ¶éãç¦»çº¿ç»è®¡</li>
<li>ç¹ç¹ï¼éç¨äºå°æµééªè¯æ°ä¸å¡åè½çææï¼æ´ä½æ¹æ¡ç¸å¯¹å¤æï¼éè¦ææ¯åºå»º</li>
</ul>
</li>
</ul>
<h1 id="idéå">idéå</h1>
<ul>
<li>ä¸å¡idï¼å¦ç¨æ·idãååidç­</li>
<li>è®¾å¤idï¼æªæ³¨å/æªç»å½ç¨æ·ï¼æ­¤æ¶æ²¡æç¨æ·idï¼åªè½åè®¾å¤çå¯ä¸æ è¯</li>
</ul>
<p>ä¸é¢éç¹ä»ç»ä¸ä¸A/Bå®éªã</p>
<h1 id="abå®éª">A/Bå®éª</h1>
<h2 id="ç®ç">ç®ç</h2>
<ul>
<li>å°æµééªè¯æ°ä¸å¡åè½ï¼æ­£åæ¾èåæ¨è³å¨éï¼å¦åç»§ç»­è¿­ä»£ä¼åãæä¸çº¿ï¼é¿ååè½è¿äºèè¿</li>
<li>ç¨æ°æ®ä½ä¸ºä¾æ®ï¼é¿åæ³å½ç¶ãæèè¢å³ç­</li>
</ul>
<h2 id="åå±å®éª">åå±å®éª</h2>
<p>ä¸»è¦ç®çæ¯ä¸ºäºåæ¶åå¤ä¸ªå®éªï¼èä¸æ¯ç»æ¯ä¸ªå®éªååä¸é¨åæµéãå ä¸ºå½åæ¶è¿è¡çå®éªåå¤æ¶ï¼ç»åæ°éæåå¢å ï¼æ¯ä¸ªå®éªåå°çæµéå°±å¾å°äºã<br>
æè¿å å±ç»æï¼å®éªå±ãå®éªãåç»</p>
<ul>
<li>å®éªå±ä¹é´æ­£äº¤ï¼å¯åæ¶è¿è¡å¤ä¸ªå®éªå±çå®éª</li>
<li>åä¸å®éªå±çå®éªä¹é´äºæ¥ï¼æ¯å¦å½ä¸­äºå®éª1-1ï¼å°±ä¸ä¼å½ä¸­å®éª1-2ãå®éªææ0å°å¤ä¸ªåæ¡¶ï¼æ ¹æ®ä¸å¡idå¯è®¡ç®åºæ¡¶å·ï¼è¿èç¥éå½ä¸­åªä¸ªå®éª</li>
<li>åä¸å®éªåæå¤ä¸ªåç»ï¼åæ¬1ä¸ªå¯¹ç§ç»ï¼å1å°å¤ä¸ªå®éªç»ï¼åªä¼å½ä¸­å¶ä¸­ä¸ä¸ªåç»ãåç»ææ0å°å¤ä¸ªåæ¡¶ï¼æ ¹æ®ä¸å¡idå¯è®¡ç®åºæ¡¶å·ï¼è¿èç¥éå½ä¸­åªä¸ªåç»</li>
</ul>
<p>å®éªå±ãå®éªä¸¾ä¾ï¼</p>
<ul>
<li>å±ç¤ºå®éªå±ï¼æ ¹æ®é¡µé¢è¿è¡ååï¼å¦é¦é¡µãæç´¢é¡µãæ¨èé¡µãè¯¦æé¡µç­ãæ¯ä¸ªé¡µé¢ä½ä¸ºä¸ä¸ªå®éªå±ï¼æ¯ä¸ªå®éªå±éå¯åæ¶åå¤ä¸ªå±ç¤ºå®éª</li>
<li>ç®æ³å®éªå±ï¼æ ¹æ®åºæ¯è¿è¡ååï¼å¦ç¸ä¼¼æ¨èãæ­éè´­æ¨èãä¸ªæ§åæ¨èãæç´¢æåºãå¹¿åæåºç­ãæ¯ä¸ªåºæ¯ä½ä¸ºä¸ä¸ªå®éªå±ï¼æ¯ä¸ªå®éªå±éå¯åæ¶åå¤ä¸ªç®æ³å®éª</li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/1247698/202601/1247698-20260127012326894-198795136.png" alt="image" loading="lazy"></p>
<h2 id="åå¸ç®æ³ææ£">åå¸ç®æ³ææ£</h2>
<p>è¦åæ¶æ¯æå¤ä¸ªåå±å®éªï¼æ ¸å¿å¨äºéè¿åå¸ç®æ³å°æ¯ä¸å±çæµéææ£ï¼ç¨äºå®ç°âåååæµâåâå±é´æ­£äº¤âï¼ä½¿å¾æµéå¨åä¸ªå®éªçæææ­£è´æµæ¶ï¼æè½å¾å°çå®çå¯¹æ¯ç»æã<br>
ä»¥ä¸æ¯è®¡ç®å®éªå±æ¡¶å·çä»£ç ç¤ºä¾ï¼å®éªæ¡¶å·åçï¼</p>
<pre><code class="language-java">import com.google.common.hash.Hashing;
import java.nio.charset.StandardCharsets;

public class ABTestRouter {

    /**
     * æ ¹æ®ç¨æ·IDåå®éªå±IDï¼å®éªå±IDåå½ççè§è²ï¼ï¼è®¡ç®æ¡¶å· (0-99)
     */
    public static int getBucket(String userId, String layerId) {
        // 1. æ¼æ¥ Key: "layerId:userId"
        String key = layerId + ":" + userId;

        // 2. ä½¿ç¨ MurmurHash3 (32-bit)
        // Guava ç murmur3_32_fixed æ¯çº¿ç¨å®å¨ç
        int hash = Hashing.murmur3_32_fixed()
                .hashString(key, StandardCharsets.UTF_8)
                .asInt();

        // 3. åæ¨¡å¹¶ç¡®ä¿ç»æä¸ºæ­£æ°
        // Math.abs(Integer.MIN_VALUE) ä¼è¿åè´æ°ï¼æä»¥æ¨èä½¿ç¨ä½è¿ç®å»é¤ç¬¦å·ä½
        return (hash &amp; Integer.MAX_VALUE) % 100;
    }

    public static void main(String[] args) {
        String uid = "user_123456";
        
        // ä¸åå±çæµéæ¯æ­£äº¤çï¼ææ£éæ°åéï¼
        System.out.println("å±ç¤ºå±æ¡¶å·: " + getBucket(uid, "layer_ui"));
        System.out.println("ç®æ³å±æ¡¶å·: " + getBucket(uid, "layer_algo"));
    }
}
</code></pre>
<p>ä¹æä»¥ç¨murmurhashï¼èémd5ï¼æ¯å ä¸ºmd5æ¯å å¯ç®æ³ï¼è®¡ç®å¼éæ´å¤§ï¼å¨ABå®éªä¸­ä»éååææ£å³å¯ï¼æ éæå¿æ ¹æ®åå¸ç»æåæ¨åæã<br>
ä¹æä»¥æå®éªå±idä½ä¸ºçï¼æ¯å ä¸ºå¾®å°çè¾å¥å·®å¼é½ä¼å¯¼è´åå¸ç»æç¸å·®å·¨å¤§ï¼å®ç°ææ£çææã</p>
<h2 id="å®éªæ°æ®æ¶é">å®éªæ°æ®æ¶é</h2>
<p>å®éªæ°æ®æ¶éæµç¨å¦ä¸ï¼</p>
<ul>
<li>å¨ABå®éªç®¡çç³»ç»ä¸­éç½®å®éªä¿¡æ¯ï¼å¦å®éªçå¼ãæ¡¶å·ä¸å®éªç»çæ å°å³ç³»ç­ï¼å¯å¨æä¿®æ¹</li>
<li>ä»£ç é»è¾å¼åï¼
<ul>
<li>å¼å¥å®éªsdkï¼sdkå¨å¯å¨ãæéç½®åæ´æ¶æåå®éªä¿¡æ¯ï¼æ¬å°è®¡ç®ä¸å¡idçæ¡¶å·ï¼è¿èå¾å°å½ä¸­çåç»</li>
<li>å¯¹ç§ç»åå½åé»è¾ï¼å®éªç»1åé»è¾1ï¼å®éªç»2åé»è¾2</li>
</ul>
</li>
<li>å¨æ­£å¼å¼å§ABå®éªä¹åï¼ååAAåæ¡¶å®éªï¼æ¨¡æå®éªç»ãå¯¹ç§ç»çç»æï¼å¤æ­æ¯å¦ååï¼é¿ååæ¡¶ä¸ååå¸¦æ¥éè¯¯çå®éªç»æ</li>
<li>å®éªå¼å§ï¼åç«¯åç¹ï¼sdkååºåç«¯åç¹æ¶æ¯
<ul>
<li>æ¶æ¯æ ¼å¼ä¸¾ä¾ï¼<code>ä¸å¡id, å®éªå±id, å®éªid, åç»id, æ¡¶å·, è§¦åæ¶é´</code></li>
</ul>
</li>
<li>å®éªè¿ç¨ï¼å®éªæç»­æ¶é´è³å°ä¸å¨ï¼è¦çå·¥ä½æ¥ãå¨æ«/åæï¼é¿ååæ¶é´å¨æå¸¦æ¥çæ³¢å¨å½±å</li>
<li>ç¦»çº¿ç»è®¡å®éªææï¼
<ul>
<li>åç«¯åç¹æ°æ®å¯¼å¥æåäºä»¶hiveè¡¨</li>
<li>ä¸å¡DBæ°æ®å¯¼å¥è¡ä¸ºäºä»¶hiveè¡¨ï¼å¦æ³¨åãç»å½ãæµè§ãç¹å»ãæ¶èãå è´­ãä¸åãæ¯ä»ç­ï¼åå³äºå®éªå³æ³¨çä¸å¡ææ </li>
<li>ææåäºä»¶ãè¡ä¸ºäºä»¶joinèµ·æ¥ï¼å¯¹æ¯å®éªç»ãå¯¹ç§ç»çä¸å¡ææ å·®å¼</li>
</ul>
</li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/1247698/202601/1247698-20260131014010302-1779078827.png" alt="image" loading="lazy"></p>
<p>ä»¥ä¸æ¯sqlç¤ºä¾ï¼ä»£è¡¨ä»å®éªæåå24å°æ¶ååä¸ªåç»çè½¬åçå¯¹æ¯ã</p>
<pre><code class="language-sql">SELECT 
    e.group_id,
    COUNT(DISTINCT e.user_id) as exposed_users,
    COUNT(DISTINCT a.user_id) as converted_users,
    COUNT(DISTINCT a.user_id) / COUNT(DISTINCT e.user_id) as conversion_rate
FROM exposure_events e
LEFT JOIN action_events a ON e.user_id = a.user_id 
    AND a.event_time BETWEEN e.event_time AND (e.event_time + INTERVAL 24 HOUR)
WHERE e.experiment_id = 'ui_test_001'
GROUP BY e.group_id;
</code></pre>
<h2 id="å®éªæ¥è¡¨åæ">å®éªæ¥è¡¨åæ</h2>
<p>è¯ä¼°å®éªç»ææ¯å¦æ­£åãæ¯å¦æ¾èãäºè§£ç»è®¡å­¦éçæ ¸å¿æ¦å¿µï¼è½çæå®éªæ¥è¡¨å³å¯ã</p>
<h3 id="på¼">på¼</h3>
<p>ç¨æ¥è¡¡éå®éªç»ææ¯å¦æ¾èï¼på¼çå«ä¹æ¯ï¼åè®¾å®éªç»ä¸å¯¹ç§ç»æ²¡æåºå«ï¼æ­¤æ¶è§å¯å°å®éªæå·®å¼çæ¦çãä¸è¬è¦æ± <code>p &lt; 0.05</code>ï¼ä¹å°±æ¯è¯´å®éªç»ææ¾èçæ¦çå¤§äº95%ï¼<code>1 - 0.05 = 95%</code>ï¼</p>
<h3 id="ç½®ä¿¡åºé´">ç½®ä¿¡åºé´</h3>
<p>å¨æ¾èçåæä¸ï¼ç¨æ¥è¡¡éå®éªç»ææ¯å¦æ­£åï¼ä»£è¡¨ä¸å¡ææ çå¯è½èå´åå¸ã<br>
æ¯å¦ï¼å®éªç»æéä¸å¡ææ æåäº1%ï¼95%ç½®ä¿¡åºé´å¨[0.8%, 1.2%]ï¼åä»£è¡¨æ95%çææ¡å¯ä»¥æä¸å¡ææ æåè³å°0.8%ãè³å¤1.2%ï¼æææ­£åãå¦æç½®ä¿¡åºé´çä¸çæ¯è´æ°ï¼å°±æå¯è½æ¯è´åææäºï¼éè¦è­¦æã</p>
<p>ä»¥ä¸å°±æ¯ç°åº¦æ¹æ¡çæ»ç»äºï¼æ¬¢è¿è®¨è®ºäº¤æµã</p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-31 17:35">2026-01-31 17:35</span>&nbsp;
<a href="https://www.cnblogs.com/toplist">Javaççå¸</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19527704);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19527704', targetLink: 'https://www.cnblogs.com/toplist/p/19527704', title: 'æ¶æå¸å¿å¤ï¼ç°åº¦æ¹æ¡æ±æ»' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
        </channel>
        </rss>