<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åå®¢å­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2026-01-08T08:25:21.593Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åå®¢å­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ éç£åå¸ï¼éæ¶é¢åï¼2025 å¹´ Apache DolphinScheduler æ¡ä¾ç²¾ééï¼ä¼ä¸å®æç»éªå¨è§ ]]></title>
    <link>https://www.cnblogs.com/DolphinScheduler/p/19457361</link>
    <guid>7c6925123224c85473117798a6925b9e</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/DolphinScheduler/p/19457361" title="åå¸äº 2026-01-08 16:00">
    <span role="heading" aria-level="2">éç£åå¸ï¼éæ¶é¢åï¼2025 å¹´ Apache DolphinScheduler æ¡ä¾ç²¾ééï¼ä¼ä¸å®æç»éªå¨è§</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        è¿å»ä¸å¹´ï¼Apache DolphinScheduler å·²æ·±å¥æ´å¤ä¼ä¸çäº§ç¯å¢ï¼ä¸ºå¤æä»»å¡è°åº¦æä¾è§£å³æ¹æ¡ãç¤¾åºç²¾å¿æ´çäºåºç¨å®è·µï¼æ±ç¼æã2025 å¹´ Apache DolphinScheduler æ¡ä¾ç²¾ééãï¼ç°å·² éç£åå¸ï¼éæ¶ 7 å¤©åè´¹é¢åï¼
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>è¿å»ä¸å¹´ï¼Apache DolphinScheduler å·²æ·±å¥æ´å¤ä¼ä¸çäº§ç¯å¢ï¼ä¸ºå¤æä»»å¡è°åº¦æä¾è§£å³æ¹æ¡ãç¤¾åºç²¾å¿æ´çäºåºç¨å®è·µï¼æ±ç¼æã2025 å¹´ Apache DolphinScheduler æ¡ä¾ç²¾ééãï¼ç°å·² <strong>éç£åå¸ï¼éæ¶ 7 å¤©åè´¹é¢å</strong>ï¼</p>
<p><img alt="2025 å¹´ Apache DolphinScheduler æ¡ä¾ç²¾éé" loading="lazy" data-src="https://openwrite-whaleops.oss-cn-zhangjiakou.aliyuncs.com/2026/01/04/2025-nian-apache-dolphinscheduler-an-li-jing-xuan.jpg" class="lazyload"></p>
<p>æ¬ç²¾ééæ±æ»äº 2025 å¹´ Apache DolphinScheduler å¨å¤å®¶ä¼ä¸çå¸åå®è·µï¼åæ¬å¥è 360ãå¤©ç¿¼äºãZoomãç½æé®ç®±ä¸æ·±å³æå¤§åæºè½å¶é ä¼ä¸ç­ãåå®¹æ¶µçå¹³å°é¨ç½²ãå®¹å¨åæ¹é ãä»»å¡è¿ç§»ãæµæ¹ç»ä¸è°åº¦ãäºæ¬¡å¼åä¼åãèµæºéç¦»åæ°æ®éæç­å¨æµç¨åºç¨åºæ¯ï¼å±ç¤ºäºä¼ä¸å¨å¤§è§æ¨¡æ°æ®è°åº¦ä¸æ²»çä¸­çè½å°ç»éªä¸ææ¯æ¢ç´¢ã</p>
<p><img alt="" loading="lazy" data-src="https://openwrite-whaleops.oss-cn-zhangjiakou.aliyuncs.com/2026/01/04/17675186489258.jpg" class="lazyload"></p>
<p>ç²¾ééæ¨å¨ä¸ºä¼ä¸æ°æ®å¢éãè°åº¦å¹³å°å¼åèåå¼æºç¤¾åºæåæä¾åèæåï¼å¸®å©çè§£ DolphinScheduler å¨å¤æçäº§ç¯å¢ä¸­çæ¶æè®¾è®¡ãæ§è½ä¼ååè¿ç»´ç­ç¥ï¼åæ¶å±ç°å¶å¨æºè½åè°åº¦ä¸æ°æ®æ²»çåºæ¯ä¸­çåºç¨æ½åã</p>
<p>æ¬æ¡ä¾éç± <strong>Apache DolphinScheduler ç¤¾åºï¼åæ¬ç½é²¸å¼æºï¼å¿æ¿è</strong> ç¼æ°æ´çãåæ¶ï¼ç¹å«æè°¢ <strong>çè¿æãéå°é¾ãå¸å½¬æ°ãé·å®é«ãé±å¿ æ </strong> çå®è·µç»éªä¸åäº«ï¼ä»¥åææ Apache DolphinScheduler ç¤¾åºè´¡ç®èçæç»­æå¥ï¼è®©æ¬æ¡ä¾éå¾ä»¥å®æ´åç°ã</p>
<p>ð¥ ç«å³æ«æäºç»´ç ä¸è½½ï¼è·åä¼ä¸å®æç»éªä¸ææ¯æ´å¯ï¼ä¸ºæ¨çæ°æ®å¹³å°å»ºè®¾æä¾åèä¸å¯åã</p>
<p><img alt="" loading="lazy" data-src="https://openwrite-whaleops.oss-cn-zhangjiakou.aliyuncs.com/2026/01/04/17675184944339.jpg" class="lazyload"></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-08 16:01">2026-01-08 16:00</span>&nbsp;
<a href="https://www.cnblogs.com/DolphinScheduler">æµ·è±è°åº¦</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19457361);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19457361', targetLink: 'https://www.cnblogs.com/DolphinScheduler/p/19457361', title: 'éç£åå¸ï¼éæ¶é¢åï¼2025 å¹´ Apache DolphinScheduler æ¡ä¾ç²¾ééï¼ä¼ä¸å®æç»éªå¨è§' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ãé¢è¯é¢ãRedis éç¾¤çå®ç°åçæ¯ä»ä¹ï¼ ]]></title>
    <link>https://www.cnblogs.com/sun-10387834/p/19457309</link>
    <guid>97a7013de450baf70b72e04ae0f07386</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/sun-10387834/p/19457309" title="åå¸äº 2026-01-08 15:49">
    <span role="heading" aria-level="2">ãé¢è¯é¢ãRedis éç¾¤çå®ç°åçæ¯ä»ä¹ï¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="rediséç¾¤åçå°±åå¤åå¹³å°çå¤åºéºééç³»ç»-">Rediséç¾¤åçï¼å°±åå¤åå¹³å°çå¤åºéºééç³»ç» ð</h1>
<h2 id="ä¸æ´ä½æ¯å»å¤åå¹³å°å¦ä½è¿ä½">ä¸ãæ´ä½æ¯å»ï¼å¤åå¹³å°å¦ä½è¿ä½ï¼</h2>
<p>æ³è±¡<strong>ç¾å¢å¤åå¹³å°</strong>ï¼</p>
<ul>
<li><strong>å¤ä¸ªé¤å</strong>ï¼æ¯ä¸ªé¤åè´è´£ä¸é¨åèåï¼æ°æ®åçï¼</li>
<li><strong>ééä¸­å¿</strong>ï¼åè°è®¢ååéï¼éç¾¤ç®¡çï¼</li>
<li><strong>éªæç½ç»</strong>ï¼äºç¸ä¼ éä¿¡æ¯ï¼èç¹éä¿¡ï¼</li>
<li><strong>å¤ç¨å¨æ¿</strong>ï¼ä¸»å¨çäºï¼å¯å¨é¡¶ä¸ï¼ä¸»ä»å¤å¶ï¼</li>
</ul>
<p><strong>Rediséç¾¤å°±æ¯è¿æ ·ä¸ä¸ª"åå¸å¼å¤åç³»ç»"ï¼</strong></p>
<h2 id="äºrediséç¾¤çæ ¸å¿åç">äºãRediséç¾¤çæ ¸å¿åç</h2>
<h3 id="1-æ°æ®åçæ¯ä¸ªé¤ååªåèªå·±çæ¿æè-">1. <strong>æ°æ®åçï¼æ¯ä¸ªé¤ååªåèªå·±çæ¿æè</strong> ð</h3>
<pre><code class="language-bash"># Rediséç¾¤ææ°æ®åæ16384ä¸ª"èåæ§½"ï¼slotsï¼
# å°±åæå¨ååæ16384ä¸ªééåºå

# åè®¾æ3ä¸ªé¤åï¼Redisèç¹ï¼ï¼
èç¹A: è´è´£æ§½ 0-5460      # åæ±å ¡è¯æ¡
èç¹B: è´è´£æ§½ 5461-10922   # åæ«è¨æé¢  
èç¹C: è´è´£æ§½ 10923-16383  # åä¸­é¤

# ç¨æ·ç¹"å®«ä¿é¸¡ä¸" â ç³»ç»è®¡ç®ï¼hash("å®«ä¿é¸¡ä¸") % 16384 = 12000
# 12000å±äºä¸­é¤åº â èªå¨æ´¾åç»èç¹Cï¼ä¸­é¤é¤åï¼
</code></pre>
<p><strong>åç</strong>ï¼</p>
<ul>
<li>æ¯ä¸ªé®éè¿CRC16ç®æ³è®¡ç®åå¸å¼</li>
<li>å¯¹16384åæ¨¡ï¼å¾å°æ§½ä½</li>
<li>æ°æ®å­å¨å°è´è´£è¯¥æ§½çèç¹</li>
</ul>
<h3 id="2-éç¾¤æ¶æé¤åèççä¸ç§è§è²-">2. <strong>éç¾¤æ¶æï¼é¤åèççä¸ç§è§è²</strong> ð¥</h3>
<pre><code>                  âââââââââââââââââââ
                  â   å®¢æ·ç«¯App      â
                  ââââââââââ¬âââââââââ
                           â
         âââââââââââââââââââ¼ââââââââââââââââââ
         â¼                 â¼                 â¼
    âââââââââââ      âââââââââââ      âââââââââââ
    â ä¸»èç¹A  â      â ä¸»èç¹B  â      â ä¸»èç¹C  â
    â (ä¸»å¨)   â      â (ä¸»å¨)   â      â (ä¸»å¨)   â
    â æ§½0-5460 â      â5461-10922â      â10923-16383â
    ââââââ¬âââââ      ââââââ¬âââââ      ââââââ¬âââââ
         â                â                 â
    ââââââ¼âââââ      ââââââ¼âââââ      ââââââ¼âââââ
    â ä»èç¹A1 â      â ä»èç¹B1 â      â ä»èç¹C1 â
    â (å¯å¨)   â      â (å¯å¨)   â      â (å¯å¨)   â
    âââââââââââ      âââââââââââ      âââââââââââ
</code></pre>
<p><strong>èç¹ç±»å</strong>ï¼</p>
<ul>
<li><strong>ä¸»èç¹</strong>ï¼å­å¨æ°æ®ï¼å¤çè¯»åè¯·æ±ï¼ä¸»å¨ï¼</li>
<li><strong>ä»èç¹</strong>ï¼å¤å¶ä¸»èç¹æ°æ®ï¼åªè¯»ï¼å¯å¨ï¼</li>
<li><strong>å¨åµèç¹</strong>ï¼çæ§èç¹å¥åº·ï¼é¤åå«ççç£åï¼</li>
</ul>
<h3 id="3-èç¹éä¿¡é¤åç»çä»¬çå¾®ä¿¡ç¾¤-">3. <strong>èç¹éä¿¡ï¼é¤åç»çä»¬çå¾®ä¿¡ç¾¤</strong> ð±</h3>
<pre><code class="language-bash"># èç¹é´éè¿Gossipåè®®éä¿¡ï¼å°±åå¾®ä¿¡ç¾¤èï¼
# æ¯ä¸ªèç¹é½ç¥éå¶ä»èç¹çï¼æ§½åéãå¨çº¿ç¶æãå°å

# éä¿¡åå®¹ï¼
1. "ææ¯é¤åAï¼è´è´£æ±å ¡åºï¼æå¥åº·ï¼"
2. "é¤åCå¥½åæçº¿äºï¼æè°èç³»å¾ä¸ï¼"
3. "æ°å¼äºé¤åDï¼æ¥æäºæ«è¨åºä¸é¨å"

# Gossipåè®®ç¹ç¹ï¼
# - å®æå¹¿æ­ï¼æ¯100msï¼
# - æç»ä¸è´æ§ï¼æ¶æ¯æ¢æ¢ä¼ å¼ï¼
# - å®¹éæ§å¼ºï¼å ä¸ªé¤åæçº¿ä¸å½±åï¼
</code></pre>
<h3 id="4-æéè½¬ç§»ä¸»å¨çäºå¯å¨é¡¶ä¸-">4. <strong>æéè½¬ç§»ï¼ä¸»å¨çäºï¼å¯å¨é¡¶ä¸</strong> ð</h3>
<p><strong>åºæ¯</strong>ï¼ä¸»èç¹Aï¼æ±å ¡ä¸»å¨ï¼çªç¶å¿èçåä½ï¼å®æºï¼</p>
<p><strong>æµç¨</strong>ï¼</p>
<pre><code>1. ä»èç¹A1åç°ä¸»å¨å¤±èï¼"ä¸»å¨10ç§æ²¡åææ¶æ¯äºï¼"
2. åå¶ä»é¤åç¡®è®¤ï¼"ä½ ä»¬èç³»å¾ä¸æ±å ¡ä¸»å¨åï¼"
3. å¤æ°é¤åç¡®è®¤å¤±èï¼"æä»¬ä¹èç³»ä¸ä¸"
4. éä¸¾æ°ä¸»å¨ï¼ææå¯å¨æç¥¨ï¼A1å¾ç¥¨æå¤
5. A1æåä¸ºä¸»å¨ï¼"ææ¥æ¥ç®¡æ±å ¡åºï¼"
6. æ´æ°å¾®ä¿¡ç¾¤åçï¼A1æ¹ä¸ºä¸»èç¹A
</code></pre>
<p><strong>ææ¯å®ç°</strong>ï¼</p>
<pre><code class="language-bash"># Rediså¨åµï¼Sentinelï¼çæ§æºå¶
1. ä¸»è§ä¸çº¿ï¼SDOWNï¼ï¼ä¸ä¸ªå¨åµè®¤ä¸ºä¸»èç¹ä¸å¯ç¨
2. å®¢è§ä¸çº¿ï¼ODOWNï¼ï¼è¶è¿åæ°å¨åµè®¤ä¸ºä¸å¯ç¨
3. éä¸¾é¢å¤´å¨åµï¼Raftç®æ³éä¸¾
4. æéè½¬ç§»ï¼é¢å¤´å¨åµéæ©æåéçä»èç¹åçº§

# Redis Clusteråç½®çæéæ£æµ
1. æ¯ä¸ªèç¹å®æpingå¶ä»èç¹
2. æ è®°çä¼¼ä¸çº¿ï¼PFAILï¼
3. å¹¿æ­ä¸çº¿ä¿¡æ¯ï¼å¶ä»èç¹ç¡®è®¤
4. æ è®°ä¸ºå·²ä¸çº¿ï¼FAILï¼
5. ä»èç¹å¼å§éä¸¾
</code></pre>
<h3 id="5-éç¾¤æ©å®¹å¼æ°ååº-">5. <strong>éç¾¤æ©å®¹ï¼å¼æ°ååº</strong> ðª</h3>
<p><strong>åºæ¯</strong>ï¼çæå¤ªå¥½ï¼è¦å¼ç¬¬åå®¶é¤åï¼èç¹Dï¼</p>
<p><strong>æµç¨</strong>ï¼</p>
<pre><code>1. æ°é¤åå å¥ï¼"å¤§å®¶å¥½ï¼ææ¯æ°å¼çæ¥æåºD"
2. éæ°åéèåæ§½ï¼ä»AãBãCååä¸äºæ§½ç»D
3. æ°æ®è¿ç§»ï¼æå¯¹åºèåæ¬å°æ°é¤å
    - Aæ"è¯æ¡"èè°±åç»D
    - Bæ"æµ·é²æ«è¨"èè°±åç»D
    - Cæ"éº»å©è±è"èè°±åç»D
4. è¿ç§»æé´ï¼ç¨æ·ç¹èï¼
    - å¦æèè¿å¨èåºï¼"ç¨ç­ï¼æ­£å¨æ¬å°æ°åºï¼å»æ°åºç¹"
    - å¦æå·²æ¬å°æ°åºï¼"è¯·å»æ°åºç¹é¤"
</code></pre>
<p><strong>ææ¯å½ä»¤</strong>ï¼</p>
<pre><code class="language-bash"># 1. æ·»å æ°èç¹
redis-cli --cluster add-node new_host:new_port existing_host:existing_port

# 2. éæ°åéæ§½
redis-cli --cluster reshard host:port

# 3. æ°æ®è¿ç§»æ¯åæ­¥çï¼è¿ç§»æé´éç¾¤ä»å¯ç¨
# è¿ç§»è¿ç¨ä¸­ï¼å®¢æ·ç«¯å¯è½æ¶å°ASKéå®å
</code></pre>
<h2 id="ä¸å®¢æ·ç«¯å¦ä½ä¸éç¾¤äº¤äº-">ä¸ãå®¢æ·ç«¯å¦ä½ä¸éç¾¤äº¤äºï¼ ð²</h2>
<h3 id="åºæ¯ç¨æ·ç¹é¤æµç¨">åºæ¯ï¼ç¨æ·ç¹é¤æµç¨</h3>
<pre><code class="language-java">// å®¢æ·ç«¯ï¼ç¨æ·ï¼æ³ç¹ä¸ä»½"å®«ä¿é¸¡ä¸"
public class RedisClient {
    public void orderFood() {
        // 1. ç¬¬ä¸æ¬¡è¯·æ±ï¼éä¾¿éä¸ªé¤å
        String key = "å®«ä¿é¸¡ä¸";
        JedisCluster jedis = new JedisCluster(nodes); // è¿æ¥éç¾¤
        
        // 2. è®¡ç®æ§½ä½ï¼hash("å®«ä¿é¸¡ä¸") % 16384 = 12000
        // 3. æ§½ä½12000å±äºèç¹Cï¼ä¸­é¤ï¼
        
        // 4. ç´æ¥åç»èç¹C
        jedis.set(key, "ä¸ä»½å®«ä¿é¸¡ä¸");
        
        // 5. å¦æåéé¤åï¼æ¯å¦åç»Aï¼ï¼Aä¼åè¯ä½ ï¼
        // "MOVED 12000 èç¹Cçå°å"
        // å®¢æ·ç«¯èªå¨éå®åå°èç¹C
        
        // 6. èªæçå®¢æ·ç«¯ä¼ç¼å­æ§½ä½æ å°è¡¨
        // ä¸æ¬¡ç´æ¥æ¾å¯¹çé¤åï¼ä¸ç¨éå®å
    }
}
</code></pre>
<h3 id="ä¸¤ç§éå®å">ä¸¤ç§éå®åï¼</h3>
<pre><code class="language-bash"># 1. MOVEDéå®åï¼æ°¸ä¹éå®åï¼
# å°±åï¼"è¿éèä¸æ¯æä»¬åçï¼ä½ æ°¸è¿å»ä¸­é¤åç¹"
å®¢æ·ç«¯âèç¹A: æè¦"å®«ä¿é¸¡ä¸"
èç¹Aâå®¢æ·ç«¯: MOVED 12000 èç¹Cå°å
å®¢æ·ç«¯âèç¹C: æè¦"å®«ä¿é¸¡ä¸"
èç¹Câå®¢æ·ç«¯: å¥½çï¼ç»ä½ å

# 2. ASKéå®åï¼ä¸´æ¶éå®åï¼
# åçå¨æ°æ®è¿ç§»æ¶
# å°±åï¼"è¿éèæ­£å¨ä»æä»¬åºæ¬å°æ°åºï¼ä½ å»æ°åºçç"
å®¢æ·ç«¯âèç¹A: æè¦"è¯æ¡"
èç¹Aâå®¢æ·ç«¯: ASK æ°èç¹å°å  # æ§½500æ­£å¨è¿ç§»
å®¢æ·ç«¯âæ°èç¹: ASKINGå½ä»¤  # åæä¸ªæå¼
å®¢æ·ç«¯âæ°èç¹: æè¦"è¯æ¡"
æ°èç¹âå®¢æ·ç«¯: å¥½çï¼æä»¬åæ¥æè¿éè
</code></pre>
<h2 id="åéç¾¤çéå¶ä¸æ¯ä¸è½ç-">åãéç¾¤çéå¶ï¼ä¸æ¯ä¸è½ç ð§</h2>
<h3 id="1-ä¸æ¯æè·¨èç¹äºå¡">1. <strong>ä¸æ¯æè·¨èç¹äºå¡</strong></h3>
<pre><code class="language-bash"># äºå¡è¦æ±ææé®å¨åä¸ä¸ªèç¹
# å°±åï¼ä¸è½åæ¶ç¹æ±å ¡åºçæ±å ¡åä¸­é¤åçå®«ä¿é¸¡ä¸å¨ä¸ä¸ªè®¢åé

# â éè¯¯åæ³ï¼é®å¨ä¸åèç¹ï¼
MULTI
SET key1 value1  # key1å¨èç¹A
SET key2 value2  # key2å¨èç¹B
EXEC            # ä¼å¤±è´¥ï¼

# â æ­£ç¡®åæ³ï¼ä½¿ç¨åå¸æ ç­¾
# ç¨{}ç¡®ä¿ä¸¤ä¸ªé®å¨åä¸ä¸ªæ§½
MULTI
SET user:{1000}:name "å¼ ä¸"  # é½å¨user:1000ç¸å³æ§½
SET user:{1000}:age 25      # {}ååå®¹å³å®æ§½
EXEC
</code></pre>
<h3 id="2-æ¹éæä½éå¶">2. <strong>æ¹éæä½éå¶</strong></h3>
<pre><code class="language-bash"># mget/msetåªè½ç¨äºåä¸ä¸ªèç¹ä¸çé®
# å°±åï¼ä¸è½ä¸æ¬¡ä»æ±å ¡åºåä¸­é¤ååæ¶åé¤

# â å¯è½å¤±è´¥
MGET key1 key2 key3  # å¦ækey1ãkey2ãkey3å¨ä¸åèç¹

# â è§£å³æ¹æ¡
# 1. ä½¿ç¨åå¸æ ç­¾
# 2. å®¢æ·ç«¯åç»åé
# 3. ä½¿ç¨Pipelineåå«åé
</code></pre>
<h3 id="3-luaèæ¬éå¶">3. <strong>Luaèæ¬éå¶</strong></h3>
<pre><code class="language-bash"># Luaèæ¬ä¸­çææé®å¿é¡»å¨åä¸ä¸ªèç¹
# å°±åï¼èæ¬å¨å¸ä¸è½åæ¶ç¨æ±å ¡åºåä¸­é¤åçå¨æ¿

# èæ¬ç¤ºä¾ï¼å¿é¡»ææé®å¨åä¸ä¸ªæ§½ï¼
EVAL "return redis.call('GET', KEYS[1])" 1 user:{1000}:name
</code></pre>
<h2 id="äºéç¾¤æ­å»ºå®æå¼ä¸ªå°åå¤åå¹³å°-ï¸">äºãéç¾¤æ­å»ºå®æï¼å¼ä¸ªå°åå¤åå¹³å° ð ï¸</h2>
<h3 id="1-æå°6ä¸ªèç¹éç½®3ä¸»3ä»">1. <strong>æå°6ä¸ªèç¹éç½®ï¼3ä¸»3ä»ï¼</strong></h3>
<pre><code class="language-bash"># ç®å½ç»æ
redis-cluster/
âââ node-7000/  # ä¸»èç¹1
âââ node-7001/  # ä¸»èç¹2  
âââ node-7002/  # ä¸»èç¹3
âââ node-7003/  # ä»èç¹1ï¼å¤å¶7000ï¼
âââ node-7004/  # ä»èç¹2ï¼å¤å¶7001ï¼
âââ node-7005/  # ä»èç¹3ï¼å¤å¶7002ï¼

# æ¯ä¸ªèç¹çredis.conf
port 7000
cluster-enabled yes
cluster-config-file nodes-7000.conf
cluster-node-timeout 5000
appendonly yes
</code></pre>
<h3 id="2-ä¸é®åå»ºéç¾¤">2. <strong>ä¸é®åå»ºéç¾¤</strong></h3>
<pre><code class="language-bash"># Redis 5.0+ ä½¿ç¨redis-cliåå»º
redis-cli --cluster create \
  127.0.0.1:7000 \
  127.0.0.1:7001 \
  127.0.0.1:7002 \
  127.0.0.1:7003 \
  127.0.0.1:7004 \
  127.0.0.1:7005 \
  --cluster-replicas 1  # æ¯ä¸ªä¸»èç¹é1ä¸ªä»èç¹
</code></pre>
<h3 id="3-æ¥çéç¾¤ç¶æ">3. <strong>æ¥çéç¾¤ç¶æ</strong></h3>
<pre><code class="language-bash"># æ¥çéç¾¤ä¿¡æ¯
redis-cli -p 7000 cluster info

# æ¥çèç¹ä¿¡æ¯
redis-cli -p 7000 cluster nodes

# æ¥çæ§½åé
redis-cli -p 7000 cluster slots
</code></pre>
<h3 id="4-éç¾¤å¥åº·æ£æ¥">4. <strong>éç¾¤å¥åº·æ£æ¥</strong></h3>
<pre><code class="language-bash"># æ£æ¥éç¾¤ç¶æ
redis-cli --cluster check 127.0.0.1:7000

# è¾åºç¤ºä¾ï¼
[OK] All nodes agree about slots configuration.
&gt;&gt;&gt; Check for open slots...
&gt;&gt;&gt; Check slots coverage...
[OK] All 16384 slots covered.  # æææ§½é½æèç¹è´è´£
</code></pre>
<h2 id="å­éç¾¤-vs-å¨åµ-vs-ä¸»ä»ä¸ç§å¤åæ¨¡å¼å¯¹æ¯-ï¸">å­ãéç¾¤ vs å¨åµ vs ä¸»ä»ï¼ä¸ç§å¤åæ¨¡å¼å¯¹æ¯ ð½ï¸</h2>
<table>
<thead>
<tr>
<th>æ¨¡å¼</th>
<th>æ¯å»</th>
<th>ä¼ç¹</th>
<th>ç¼ºç¹</th>
<th>éç¨åºæ¯</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ä¸»ä»å¤å¶</strong></td>
<td>ä¸å®¶é¤å+ä¸ä¸ªå¤ç¨å¨æ¿</td>
<td>ç®åãè¯»ååç¦»</td>
<td>ä¸»èç¹åç¹æé</td>
<td>å°é¤åï¼å¯æ¥åç­æåä¸</td>
</tr>
<tr>
<td><strong>å¨åµæ¨¡å¼</strong></td>
<td>é¤å+å¤ç¨å¨æ¿+å«ççç£å</td>
<td>èªå¨æéè½¬ç§»</td>
<td>åæä½åç¹ãæ©å®¹éº»ç¦</td>
<td>ä¸­ç­é¤åï¼éè¦é«å¯ç¨</td>
</tr>
<tr>
<td><strong>éç¾¤æ¨¡å¼</strong></td>
<td>å¤ä¸ªé¤åèç</td>
<td>é«å¯ç¨ãé«å¹¶åãææ©å®¹</td>
<td>å®ç°å¤æãå®¢æ·ç«¯éæ¯æ</td>
<td>å¤§åè¿éé¤åï¼æµ·éè®¢å</td>
</tr>
</tbody>
</table>
<h2 id="ä¸éç¾¤å¸¸è§é®é¢ä¸è§£å³æ¹æ¡-">ä¸ãéç¾¤å¸¸è§é®é¢ä¸è§£å³æ¹æ¡ ð¨</h2>
<h3 id="1-èè£é®é¢split-brain">1. <strong>èè£é®é¢ï¼Split Brainï¼</strong></h3>
<pre><code class="language-bash"># åºæ¯ï¼ç½ç»ååºï¼å½¢æä¸¤ä¸ª"å¤åå¹³å°"
# èç¹AãBå¨ä¸ä¸ªç½ç»ï¼CãDå¨å¦ä¸ä¸ªç½ç»
# ä¸¤è¾¹é½è®¤ä¸ºèªå·±æ¯"æ­£å®å¹³å°"

# è§£å³æ¹æ¡ï¼å¤æ°æ´¾åå
# éç¾¤éè¦è³å°3ä¸ªä¸»èç¹ï¼æéå®¹å¿åº¦ = (N-1)/2
# 3ä¸»èç¹ï¼åè®¸1ä¸ªèç¹æé
# 5ä¸»èç¹ï¼åè®¸2ä¸ªèç¹æé
</code></pre>
<h3 id="2-æ°æ®ä¸è´æ§">2. <strong>æ°æ®ä¸è´æ§</strong></h3>
<pre><code class="language-bash"># Rediséç¾¤éç¨å¼æ­¥å¤å¶
# ä¸»èç¹åæåå°±è¿åï¼ç¶åå¼æ­¥å¤å¶å°ä»èç¹
# å¯è½ä¸¢å¤±å°éæ°æ®ï¼ä¸»èç¹å®æºåæªåæ­¥çæ°æ®ï¼

# è§£å³æ¹æ¡ï¼æ ¹æ®ä¸å¡éæ©ï¼ï¼
# 1. ç­å¾å¤å¶ï¼WAITå½ä»¤ï¼ç­å¾Nä¸ªä»èç¹ç¡®è®¤
# 2. å¼ºä¸è´æ§ï¼ç¨Redlockç­ç®æ³ï¼ä½æ§è½ä¸é
# 3. æç»ä¸è´æ§ï¼æ¥åç­æä¸ä¸è´ï¼å¤æ°ä¸å¡å¤ç¨
</code></pre>
<h3 id="3-ç­ç¹keyé®é¢">3. <strong>ç­ç¹Keyé®é¢</strong></h3>
<pre><code class="language-bash"># åºæ¯ï¼æä¸ªååçªç¶çåï¼å¦iPhoneæ°åï¼
# ææè¯·æ±é½æå°åä¸ä¸ªèç¹ï¼é æåå

# è§£å³æ¹æ¡ï¼
# 1. æ¬å°ç¼å­ï¼å®¢æ·ç«¯ç¼å­ç­ç¹æ°æ®
# 2. æåKeyï¼iphone:13:stock â iphone:13:stock:1ãiphone:13:stock:2
# 3. éæµéçº§ï¼å¯¹ç­ç¹è¯·æ±éæµ
</code></pre>
<h3 id="4-éç¾¤æ©å®¹æ¶çæ§è½é®é¢">4. <strong>éç¾¤æ©å®¹æ¶çæ§è½é®é¢</strong></h3>
<pre><code class="language-bash"># è¿ç§»å¤§éæ°æ®æ¶ï¼ç½ç»åç£çIOååå¤§
# å®¢æ·ç«¯é¢ç¹æ¶å°ASKéå®å

# è§£å³æ¹æ¡ï¼
# 1. ä¸å¡ä½å³°æè¿ç§»
# 2. åæ¹è¿ç§»ï¼æ§å¶è¿ç§»éåº¦
# 3. ä½¿ç¨ä¸ä¸çè¿ç§»å·¥å·
</code></pre>
<h2 id="å«rediséç¾¤æä½³å®è·µ-">å«ãRediséç¾¤æä½³å®è·µ ð</h2>
<h3 id="1-åçè§åèç¹æ°">1. <strong>åçè§åèç¹æ°</strong></h3>
<pre><code class="language-bash"># æ¨èéç½®ï¼è³å°3ä¸»3ä»ï¼æå¤1000ä¸ªèç¹
# ä¸»èç¹æ°æå¥½æ¯å¥æ°ï¼éä¸¾æ¶é¿åå¹³ç¥¨ï¼
# æ¯ä¸ªä¸»èç¹çä»èç¹ä¸è¶è¿2ä¸ªï¼å¤ªå¤å¤å¶å½±åæ§è½ï¼

# çäº§ç¯å¢å»ºè®®ï¼
# å°è§æ¨¡ï¼3ä¸»3ä»ï¼å¯æ¿å1ä¸»+1ä»åæ¶æéï¼
# ä¸­è§æ¨¡ï¼5ä¸»5ä»ï¼å¯æ¿å2ä¸»+2ä»åæ¶æéï¼
# å¤§è§æ¨¡ï¼æä¸å¡åéç¾¤ï¼ä¸è¦ä¸ä¸ªéç¾¤å¤ªå¤§
</code></pre>
<h3 id="2-çæ§ææ ">2. <strong>çæ§ææ </strong></h3>
<pre><code class="language-bash"># å³é®çæ§é¡¹ï¼
1. éç¾¤ç¶æï¼cluster_state:ok?
2. æ§½è¦ççï¼16384ä¸ªæ§½æ¯å¦å¨é¨åé
3. èç¹å¥åº·ï¼ä¸»ä»èç¹æ¯å¦å¨çº¿
4. åå­ä½¿ç¨ï¼é¿ååä¸ªèç¹åå­è¿å¤§
5. ç½ç»æµéï¼èç¹é´éä¿¡æ¯å¦æ­£å¸¸
6. å½ä¸­çï¼ç¼å­å½ä¸­çæ¯å¦æ­£å¸¸
</code></pre>
<h3 id="3-å®¢æ·ç«¯ä½¿ç¨è§è">3. <strong>å®¢æ·ç«¯ä½¿ç¨è§è</strong></h3>
<pre><code class="language-java">public class RedisClusterBestPractice {
    // 1. ä½¿ç¨è¿æ¥æ± 
    private JedisCluster jedisCluster;
    
    public void init() {
        JedisPoolConfig config = new JedisPoolConfig();
        config.setMaxTotal(100);
        config.setMaxIdle(20);
        
        Set&lt;HostAndPort&gt; nodes = new HashSet&lt;&gt;();
        nodes.add(new HostAndPort("127.0.0.1", 7000));
        // ... æ·»å ææèç¹
        
        // 2. è®¾ç½®åççè¶æ¶æ¶é´
        jedisCluster = new JedisCluster(nodes, 
            2000,  // è¿æ¥è¶æ¶
            2000,  // è¯»åè¶æ¶
            3,     // éè¯æ¬¡æ°
            config);
    }
    
    // 3. ä½¿ç¨Pipelineæ¹éæä½ï¼ç¸åèç¹ï¼
    public void batchSetSameSlot() {
        String slotTag = "{user:1000}";  // ä½¿ç¨åå¸æ ç­¾
        Pipeline p = jedisCluster.pipelined();
        p.set(slotTag + ":name", "å¼ ä¸");
        p.set(slotTag + ":age", "25");
        p.sync();
    }
}
</code></pre>
<h2 id="ä¹ä¸å¼ å¾æ»ç»rediséç¾¤-ï¸">ä¹ãä¸å¼ å¾æ»ç»Rediséç¾¤ ðºï¸</h2>
<pre><code>                âââââââââââââââââââââââââââââââââââââââ
                â        Rediséç¾¤ï¼å¤åå¹³å°èç         â
                ââââââââââââââââââ¬âââââââââââââââââââââ
                                 â
       âââââââââââââââââââââââââââ¼ââââââââââââââââââââââââââ
       â¼                         â¼                         â¼
âââââââââââââââ          âââââââââââââââ          âââââââââââââââ
â  æ±å ¡é¤å    â          â  æ«è¨é¤å    â          â  ä¸­é¤å      â
â (ä¸»èç¹A)    â          â (ä¸»èç¹B)    â          â (ä¸»èç¹C)    â
â æ§½0-5460    â          â 5461-10922  â          â 10923-16383 â
ââââââââ¬âââââââ          ââââââââ¬âââââââ          ââââââââ¬âââââââ
       â å¾®ä¿¡ç¾¤è(Gossip)        â                        â
       â¼                        â¼                        â¼
âââââââââââââââ          âââââââââââââââ          âââââââââââââââ
â  å¤ç¨å¨æ¿    â          â  å¤ç¨å¨æ¿    â          â  å¤ç¨å¨æ¿    â
â (ä»èç¹A1)   â          â (ä»èç¹B1)   â          â (ä»èç¹C1)   â
âââââââââââââââ          âââââââââââââââ          âââââââââââââââ
       â                        â                        â
       ââââââââââââââââââââââââââ¼âââââââââââââââââââââââââ
                                 â
                ââââââââââââââââââ¼âââââââââââââââââ
                â          å®¢æ·ç«¯(ç¨æ·)              â
                â    èªå¨è·¯ç± + ç¼å­æ§½ä½æ å°         â
                ââââââââââââââââââââââââââââââââââââ
</code></pre>
<h2 id="åä¸å¥è¯æ»ç»">åãä¸å¥è¯æ»ç»</h2>
<p><strong>Rediséç¾¤ = æ°æ®åçï¼16384æ§½ï¼+ ä¸»ä»å¤å¶ï¼é«å¯ç¨ï¼+ Gossipéä¿¡ï¼èªç®¡çï¼</strong></p>
<p>è®°ä½å£è¯ï¼<strong>"ä¸å­ä¸å«åæ§½åï¼ä¸ä¸»ä¸ä»èµ·æ­¥ç¨³ï¼Gossipåè®®ä¼ æ¶æ¯ï¼æéè½¬ç§»èªå¨è·ï¼å®¢æ·ç«¯éç¥æ§½æ å°ï¼åå¸æ ç­¾ä¿åé¨ã"</strong></p>

</div>
<div id="MySignature" role="contentinfo">
    
<p>â¤ï¸ å¦æä½ åæ¬¢è¿ç¯æç« ï¼è¯·ç¹èµæ¯æï¼ ð åæ¶æ¬¢è¿å³æ³¨æçåå®¢ï¼è·åæ´å¤ç²¾å½©åå®¹ï¼</p>

<p>æ¬ææ¥èªåå®¢å­ï¼ä½èï¼<a href="https://www.cnblogs.com/sun-10387834/" target="_blank">ä½ç¥è®©ææ¥å·¡å±±</a>ï¼è½¬è½½è¯·æ³¨æåæé¾æ¥ï¼<a href="https://www.cnblogs.com/sun-10387834/p/19457309" target="_blank">https://www.cnblogs.com/sun-10387834/p/19457309</a></p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-08 15:50">2026-01-08 15:49</span>&nbsp;
<a href="https://www.cnblogs.com/sun-10387834">ä½ç¥è®©ææ¥å·¡å±±</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19457309);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19457309', targetLink: 'https://www.cnblogs.com/sun-10387834/p/19457309', title: 'ãé¢è¯é¢ãRedis éç¾¤çå®ç°åçæ¯ä»ä¹ï¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ä½ ä»¬çAgentåä»£ç åï¼Agent-Sandboxå¼æºé¦å ]]></title>
    <link>https://www.cnblogs.com/xguo/p/19457007</link>
    <guid>0bcba547694f314d41d6b9feee77f459</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xguo/p/19457007" title="åå¸äº 2026-01-08 15:41">
    <span role="heading" aria-level="2">ä½ ä»¬çAgentåä»£ç åï¼Agent-Sandboxå¼æºé¦å</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/57355/202601/57355-20260108145436183-1755523701.png" alt="ä½ ä»¬çAgentåä»£ç åï¼Agent-Sandboxå¼æºé¦å" class="desc_img">
        Manusçé«ä»·åºå®ï¼è®©Sandboxåæ¬¡è¿å¥äººä»¬çè§éï¼å®ä¹åç¨çSandboxæ¯E2Bï¼è¿æ¯ä¸ä¸ªéå¸¸å¼ºå¤§çSandboxå·¥å·ï¼å®å¯ä»¥å¸®å©Agentæ§è¡ä»£ç æå½ä»¤ï¼ä½å®ä¸æ¹ä¾¿æä»¬ä½¿ç¨ï¼ä¹åæä»¬çåæ³æ¯é¨ç½²ä¸ä¸ªPythonçæ§è¡ä»£ç çæå¡ï¼æçé¨ç½²ä¸ä¸ªPlaywrightçæå¡ï¼åèªæä¾MCPææ®éAPIï¼æ¥æ»¡è¶³éæ±ï¼ä½æ¯éå°çé®é¢ä¹æ¯æ¾èæè§çï¼é£å°±æ¯æ æ³å®ç°å¤æ¬¡è®¿é®çéç¦»ï¼ä¾å¦ä¸ä¸ªAgentè®¿é®äºAç½ç«ï¼å¦ä¸ä¸ªAgentè®¿é®äºBç½ç«ï¼å°±ä¼ç¸äºå¹²æ°ï¼æ§è½ä¹æ¯é®é¢ï¼é¤éä½ é¨ç½²å¾å¤å®ä¾ï¼é£ä¹æµªè´¹ãé£æä»¬çéæ©æ¯ä»ä¹ï¼
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<div style="text-align: center">
<picture>
<img src="https://img2024.cnblogs.com/blog/57355/202601/57355-20260108144423805-386973583.png" width="255px" height="381px">
</picture>
</div>
<h2 id="å¼æºå°å">å¼æºå°åï¼</h2>
<p><strong>Agent-Sandbox</strong> <a href="https://github.com/agent-sandbox/agent-sandbox" target="_blank" rel="noopener nofollow">https://github.com/agent-sandbox/agent-sandbox</a></p>
<h2 id="ææé¢æ¼">ææé¢æ¼ï¼</h2>
<p><img src="https://img2024.cnblogs.com/blog/57355/202601/57355-20260108144402352-314698307.gif" alt="gitdemo" loading="lazy"></p>
<h2 id="1ä¸ºä»ä¹éè¦agent-sandbox">1ï¼ä¸ºä»ä¹éè¦Agent-Sandboxï¼</h2>
<p>å¨æä»¬çä¸å¡ä¸­ï¼ç»å¸¸éè¦è®©Agentæ§è¡ä¸äºä»£ç æèè®¿é®ç½ç«ç­ï¼ä¾å¦ç¨æ·æä¾äºä¸ä¸ªexcelæä»¶ï¼å¤çéé¢çä¸äºæ°æ®ï¼æç»çææ¥åï¼æèç¨æ·æä¾äºä¸ä¸ªç½ç«ï¼è®©Agentè®¿é®ç½ç«ï¼ç¶åè·åä¸äºæ°æ®ï¼æç»çææ¥åã</p>
<p>è¿äºé½æ¯å¾å¸¸è§çåºæ¯ï¼ä¾å¦æè¿éå¸¸åå³æ³¨çManusï¼åäºå¾å¤é±çé£ä¸ªï¼ç¾¡æåï½ï¼,å®å°±æ¯å©ç¨äºåç§å·¥å·æ¥å®æç¨æ·çå¤æä»»å¡ï¼ä½ ä»¬ç¥éçã</p>
<p>ä½é®é¢æ¥äºï¼æä»¬å¦ä½è®©Agentæ§è¡è¿äºä»£ç æèè®¿é®ç½ç«å¢ï¼</p>
<p>å æ­¤ManusæE2Bå¸¦ç«äºï¼E2Bæ¯ä¸ä¸ªéå¸¸å¼ºå¤§çSandboxå·¥å·ï¼å®å¯ä»¥å¸®å©Agentæ§è¡ä»£ç æå½ä»¤ï¼ä½æ¯E2Båºæ¬ä¸æ¯ä¸ªåä¸çï¼ä¸æ¹ä¾¿æä»¬ä½¿ç¨ï¼ä¹åæä»¬çåæ³æ¯é¨ç½²ä¸ä¸ªPythonçæ§è¡ä»£ç çæå¡ï¼æçé¨ç½²ä¸ä¸ªPlaywrightçæå¡ï¼åèªæä¾MCPææ®éAPIï¼æ¥æ»¡è¶³éæ±ï¼ä½æ¯éå°çé®é¢ä¹æ¯æ¾èæè§çï¼é£å°±æ¯æ æ³å®ç°å¤æ¬¡è®¿é®çéç¦»ï¼ä¾å¦ä¸ä¸ªAgentè®¿é®äºAç½ç«ï¼å¦ä¸ä¸ªAgentè®¿é®äºBç½ç«ï¼å°±ä¼ç¸äºå¹²æ°ï¼æ§è½ä¹æ¯é®é¢ï¼é¤éä½ é¨ç½²å¾å¤å®ä¾ï¼é£ä¹æµªè´¹ã</p>
<p>è¿ä¸ªé®é¢ä½ ä»¬æ¯æä¹è§£å³çï¼</p>
<h2 id="2agent-sandbox">2ï¼Agent-Sandbox</h2>
<p>æ²¡æéæ©ï¼åªè½èªå·±æäºï¼ä¸åå¹´æä»¬æäºå ä¸ªåå¼ï¼æç§ä»¥ä¸ççç¹ï¼å¼åäºä¸ä¸ªAgent-Sandboxï¼æ¯çï¼åå­å°±å«<strong>Agent-Sandbox</strong>ï¼æ¯ä¸æ¯å¾ææ¯æµï¼</p>
<p>ç®åå·²ç»å¨çäº§ç¯å¢ä½¿ç¨äºï¼ææè¿ä¸éï¼æ¯æMCPåREST APIï¼Agentå¯ä»¥å¨ä»»ä½éè¦çæ¶ååå»ºä¸ä¸ªSandboxï¼ç¶åæ§è¡ä»£ç ï¼è®¿é®ç½ç«ç­ï¼å®äºå¿åèªå·±å é¤Sandboxï¼éå¸¸æ¹ä¾¿ã</p>
<p>ä¸è¿æè¿ä¹åç°å¸é¢ä¸åºç°å¾å¤å³äºAgent Sandboxçå·¥å·åè®¨è®ºï¼å¼æºçåæ¬<a href="https://github.com/kubernetes-sigs/agent-sandbox" target="_blank" rel="noopener nofollow">kubernetes-sigs/agent-sandbox</a> ã <a href="https://github.com/agent-infra/sandbox" target="_blank" rel="noopener nofollow">AIO Sandbox</a> ç­ï¼è¯´æå¤§å®¶ä¹å¨è§£å³è¿ä¸ªé®é¢ï¼AIO Sandboxè¿ä¸ªæ¯ç«å±±çï¼åªæä¾ä¸ä¸ªéæåçSandboxç¯å¢ï¼ä¹å°±æ¯ä¸ä¸ªDockerçImageï¼éé¢æåç§å·¥å·ï¼åæ¬æ§è¡ä»£ç ãæµè§å¨ãæä»¶ç³»ç»ç­ï¼èkubernetes-sigs/agent-sandboxæ¯ä¸ªé¨ç½²å·¥å·ï¼å¯ä»¥é¨ç½²åç§Sandboxç¯å¢ï¼ä¾å¦ä»å°±æ¯æé¨ç½²AIO Sandboxï¼å¯ä»¥éè¿å®æèµ·å¾å¤AIO Sandboxçå®ä¾ï¼ä½åè½è¿æ¯å¤ªåºç¡äºï¼æ æ³ç´æ¥ç»Agentä½¿ç¨ï¼å®è£ä¹éº»ç¦ï¼è¦æ±çKubernetesçæ¬æ¯è¾é«ï¼ç®åå¤§å®¶çäº§ç¨çK8Sççæ¬é½æ¯è¾æ»åã</p>
<p>åæä»¬è¿æ ·å¼æºçSandboxè¿æ¯æ²¡æçå°ï¼æä»¬å°±å³å®ææä»¬è¿ä¸ªå¼æºç»å¤§å®¶ï¼ä¹è®¸å¤§å®¶è·æä»¬å¸æçä¸æ ·ï¼é£å°±å¯ä»¥ç¨å¾ä¸äºã</p>
<h2 id="3agent-sandboxæåªäºç¹ç¹">3ï¼Agent-Sandboxæåªäºç¹ç¹ï¼</h2>
<p>ç®åå®ç°äºä¸»è¦çåè½ï¼åæ¬éè¿MCPæREST APIæ¥CRUD Sandboxï¼æå®SandboxçImageç­ï¼åç»­ä¼æ¯ææ´å¤åºæ¯çSandboxè¿è¡ç¯å¢ï¼æ¯æåç§SDKï¼æ¥æ»¡è¶³ç¼ç¨åºæ¯çSandboxæ§å¶ï¼æ´å¤Sandboxçç®¡çåè½ï¼åæ¬TTLåæ¶ãæ è°ç¨åæ¶ç­ï¼ä»¥åç®¡çUIï¼å¯ä»¥çå°å¨åå»ºçå¨é¨Sandboxåç¸å³æä½ï¼ä¹å¯ä»¥éè¿è¿ä¸ªUIæ¥åå»ºSandboxç­ï¼æ¹ä¾¿ä¸æ²»çã</p>
<p><img src="https://img2024.cnblogs.com/blog/57355/202601/57355-20260108144446225-906065250.png" alt="full-lifecycle-demo" width="1129" height="601" loading="lazy"></p>
<h3 id="ç¹æ§">ç¹æ§ï¼</h3>
<ol>
<li>Aiä½¿ç¨åå¥½ï¼å¯ä»¥ç´æ¥è®©Agentæ§å¶Sandboxçå¨çå½å¨æï¼èä¸ä¸å®å¾æååå»ºå¥½ï¼å¨ç»Agentå»ä½¿ç¨ï¼Agentæéåå»ºååæ¶ï¼</li>
<li>çæå¼æ¾ï¼é¨ç½²çSandboxè¿è¡ç¯å¢å¯ä»¥ä¸ç¤¾åºçå¼å®¹ï¼åå¦å¯ä»¥ç´æ¥æèµ·åé¢æå°çAIO SandboxãCode ServeræPlaywrightç­ï¼æ¹ä¾¿å¤§å®¶å©ç¨ç°æçèµæºï¼å½ç¶ï¼å¯ä»¥èªå®ä¹è¿è¡ç¯å¢ï¼</li>
<li>ä¼ä¸çäº§å¯ç¨ï¼å½ç¶ï¼èèåé¢æå°ççç¹ï¼åºäºK8Så¼åï¼æ¯æè§æ¨¡åä½¿ç¨ï¼æ ¹æ®éè¦ï¼å¯ä»¥å¤§éåå»ºSandboxï¼ç¸äºä¹é´éç¦»ä½¿ç¨ï¼</li>
<li>è½»éåï¼å°±ä¸ä¸ªç»ä»¶ï¼æ²¡æéç¨K8SçCRDæ¥å¼åï¼è¿ä¸ªåç»­ç¨æ·æç§ååçº§é½æ¯è¾éº»ç¦ï¼ç¨æ·å¾æ¥åä¸ç§æ°çèµæºç±»åï¼æä»¬éç¨RS+Labelçæ¹å¼ï¼å°½éä¾èµK8Sç°æçç¹æ§æ¥å¿«éå®ç°ã</li>
</ol>
<h2 id="4å¦ä½ä½¿ç¨agent-sandbox">4ï¼å¦ä½ä½¿ç¨Agent-Sandboxï¼</h2>
<p>æä»¥æä¹ä½¿ç¨å¢ï¼</p>
<h3 id="é¨ç½²agent-sandbox">é¨ç½²Agent-Sandbox</h3>
<p>è¦æ± <strong>Kubernetes version 1.26</strong> æä»¥ä¸ï¼<br>
å¨ <code>https://github.com/agent-sandbox/agent-sandbox</code> ä¸è½½ <code>install.yaml</code> åï¼</p>
<pre><code class="language-bash">kubectl create namespace agent-sandbox
kubectl apply -nagent-sandbox -f install.yaml
</code></pre>
<p>éé¢ä¼å®è£deploymentãserviceç­ï¼ä¹åä½ åºè¯¥æ¯éè¦éç½®ä¸ä¸ªingressï¼å¦ï¼</p>
<pre><code class="language-yaml">apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: agent-sandbox
  namespace: agent-sandbox
spec:
  ingressClassName: ingress-nginx
  rules:
  - host: agent-sandbox.your-host.com
    http:
      paths:
      - backend:
          service:
            name: agent-sandbox
            port:
              number: 80
        path: /(.*)
</code></pre>
<p>ä¸»è¦æ¯ <code>host</code> éè¦ä½ ç»åºï¼å¶ä»å¯ä»¥ç´æ¥ä½¿ç¨ãæ­£å¸¸æåµè®¿é® <code>http://agent-sandbox.your-host.com/mcp</code> å°±å¯ä»¥ç»Agentç¨äºï¼éé¢æå¯¹SandboxçCURDç­å·¥å·ã</p>
<h4 id="agentç¨mcp-serverçæ¼ç¤º">Agentç¨MCP Serverçæ¼ç¤ºï¼</h4>
<p>å­å­æ æ³ä¸ä¼ mp4ï¼çGitHub Readmeå§ï¼<a href="https://github.com/agent-sandbox/agent-sandbox" target="_blank" rel="noopener nofollow">https://github.com/agent-sandbox/agent-sandbox</a></p>
<h3 id="éè¿apiæ¥ç®¡çsandbox">éè¿APIæ¥ç®¡çSandbox</h3>
<p>Agent-Sandboxæä¾RESTful APIæ¥ç®¡çSandboxï¼å¸åçå·¥ä½æµç¨åæ¬åå»ºSandboxãè®¿é®Sandboxãå é¤Sandboxã</p>
<h4 id="åå»ºä¸ä¸ªsandbox">åå»ºä¸ä¸ªSandbox</h4>
<pre><code class="language-shell">curl --location '/api/v1/sandbox' \
--header 'Content-Type: application/json' \
--data '{"name":"sandbox-01"}'
</code></pre>
<p>é»è®¤ä¼æèµ·AIO Sandboxï¼å¯ä»¥éè¿ä»¥ä¸æ¹å¼ï¼æå®å½åéåï¼</p>
<pre><code class="language-shell">curl --location '/api/v1/sandbox' \
--header 'Content-Type: application/json' \
--data '{"name":"sandbox-01","image":"enterprise-public-cn-beijing.cr.volces.com/vefaas-public/all-in-one-sandbox:latest"}'
</code></pre>
<h4 id="è®¿é®sandbox">è®¿é®Sandbox</h4>
<p><code>/sandbox/{sandbox_name}</code> éè¿è¿ä¸ªå°åå¯ä»¥è®¿é®Sandbox,</p>
<p>ä¾å¦åæåå»ºç <strong>sandbox-01</strong> è®¿é®å°åæ¯ï¼ <code>/sandbox/sandbox-01</code>.</p>
<p>è®¿é®åä½ åºè¯¥ä¼çå°ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/57355/202601/57355-20260108144513435-1606524670.jpg" alt="aio-demo" width="1464" height="956" loading="lazy"></p>
<p>è®¿é®è¿ä¸ªSandboxçMCPå°åæ¯ï¼ <code>http://agent-sandbox.your-host.com/sandbox/sandbox-01/mcp</code> ï¼è¿ç§åºæ¯æ¯ååå»ºå¥½Sandboxï¼ç¶åè®©Agentå»è®¿é®è¿ä¸ªSandboxã</p>
<h4 id="å é¤sandbox">å é¤Sandbox</h4>
<p>å é¤APIï¼ <code>/api/v1/sandbox/{sandbox_name}</code> . ä¾å¦å é¤Sandbox <code>sandbox-01</code> :<br>
<strong>Shell</strong></p>
<pre><code class="language-shell">curl --location --request DELETE '/api/v1/sandbox/sandbox-01'
</code></pre>
<p><strong>ç»æ:</strong></p>
<pre><code class="language-json">{
  "code": "0",
  "data": "Sandbox sandbox-01 deleted successfully"
}
</code></pre>
<p>ä»¥ä¸å°±æ¯Agent-Sandboxçç®åä»ç»åä½¿ç¨æ¹æ³ï¼æ´å¤åå®¹è¯·å³æ³¨<a href="https://github.com/agent-sandbox/agent-sandbox" target="_blank" rel="noopener nofollow">Agent-Sandbox</a>é¡¹ç®ï¼åç»­æä»¬ä¼æç»­æ´æ°æ´å¤åè½åç¹æ§ï¼åæ¬æå°çæ¯ææ´å¤åºæ¯çSandboxè¿è¡ç¯å¢ï¼æ¯æåç§SDKæ¥æ»¡è¶³ç¼ç¨åºæ¯çSandboxæ§å¶ï¼æ´å¤Sandboxçç®¡çåè½ï¼åæ¬TTLåæ¶ãæ è°ç¨åæ¶ï¼å¹¶åå¼¹æ§ä¼¸ç¼©ç­ï¼ä»¥åç®¡çUIï¼å¯ä»¥çå°åç®¡çåå»ºçå¨é¨Sandboxï¼ä¹å¯ä»¥éè¿è¿ä¸ªUIæ¥åå»ºåæä½Sandboxï¼ä¾å¦ä¸ä¼ ä¸è½½æä»¶ãæ¥çæ¥å¿ãæ§è¡å½ä»¤ãæ¥çç¶æç­ã</p>
<p>æåæ¬¢è¿å¤§å®¶StarãIssueåPR~</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-08 15:41">2026-01-08 15:41</span>&nbsp;
<a href="https://www.cnblogs.com/xguo">i'mèåè±</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19457007);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19457007', targetLink: 'https://www.cnblogs.com/xguo/p/19457007', title: 'ä½ ä»¬çAgentåä»£ç åï¼Agent-Sandboxå¼æºé¦å' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ä¸ºä»ä¹å¾å¤ä¼å¤§çä½åé½æ¯è¯çå¨ä¸äºä¸èµ·ç¼çå°æ¹ ]]></title>
    <link>https://www.cnblogs.com/lixingqiu/p/19457141</link>
    <guid>4060227bf825c1bbcfe4fdb72c0674c9</guid>
    <description>
    <![CDATA[ 
	<h1 class="postTitle"><a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/lixingqiu/p/19457141" title="åå¸äº 2026-01-08 15:23">
    <span role="heading" aria-level="2">ä¸ºä»ä¹å¾å¤ä¼å¤§çä½åé½æ¯è¯çå¨ä¸äºä¸èµ·ç¼çå°æ¹</span>
    

</a>
</h1>
	<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>å¨åå²çé¿æ²³ä¸­ï¼æä»¬ä¸é¾åç°ï¼è®¸å¤éæ¼äººå¿ãæ¹åä¸ççä¼å¤§ä½åï¼å¾å¾å¹¶éåºèªç¹åå§å£çå¤§é½å¸ï¼èæ¯è¯çäºä¸äºçä¼¼å¹³å¡çè³æäºåå»çè§è½ã</p>
<p>æ¯å¦ï¼æ¢µé«çè®¸å¤ä¼ ä¸ç»ä½ï¼æ¯å¨æ³å½åé¨é£ä¸ªå®éçå°æåºé¿å°ååä½åºæ¥çãé£éæ²¡æå·´é»çç¯çº¢éç»¿ä¸èºæ¯åççº·ç¹å¤æï¼æçåªæ¯è´¨æ´çç°å­é£ååæ·³æ´çææ°ãæ­£æ¯å¨è¿æ ·ç¸å¯¹å®éçç¯å¢ä¸­ï¼æ¢µé«å¾ä»¥å¨èº«å¿å°æå¥å°ç»ç»åä½ä¸­ï¼ç¨ä»é£ç¬ç¹çç¬è§¦åè²å½©ï¼æç»åºä¸å¹å¹åæ»¡çå½åçä½åï¼ç»åä¸çä¸äºæ å°½çèºæ¯ç°å®ã</p>
<p>åæ¯å¦ï¼ç¾å½ä½å®¶é©¬åÂ·åæ¸©ï¼ä»çè®¸å¤ç»å¸æå­¦ä½åï¼çµææ¥æºäºä»ç«¥å¹´çæ´»çå¯è¥¿è¥¿æ¯æ²³çå°éãé£ä¸ªè¿ç¦»åå¸å§å£çå°æ¹ï¼æçç¬ç¹çé£åäººæåç¤¾ä¼é£è²ï¼ä¸ºä»çåä½æä¾äºä¸°å¯çç´ æãä»å¨é£çåå°ä¸ï¼è§å¯çå½¢å½¢è²è²çäººç©ï¼ä½éªççæ´»çé¸çè¦è¾£ï¼ä»èåä½åºäºãæ±¤å§Â·ç´¢äºåé©è®°ããååè´å©Â·è´¹æ©åé©è®°ãç­ä¸æ½ä¹ä½ã</p>
<p>è¿æï¼èåçæ°å­¦å®¶éæ¯æ¶¦ï¼å¨ä¸ä¸ªå¹¶ä¸èµ·ç¼å°å¿åéï¼é»é»é»ç å¥å¾·å·´èµ«çæ³ãå¨é£ä¸ªæ¡ä»¶ç¸å¯¹è°è¦çç¯å¢ä¸­ï¼ä»å­åçå¯¹æ°å­¦çç­ç±åæ§çï¼åæäºééå°é¾ï¼æç»åå¾äºä¸¾ä¸ç©ç®çæå°±ï¼ä¸ºæ°å­¦é¢åçåå±ååºäºå·¨å¤§è´¡ç®ã</p>
<p>èå¦ä»ï¼æä»¬è¦è¯´ç<strong>C++ç²¾çµåº</strong>ï¼å®çè¯çå°åæ ·æ¯ä¸ä¸ªæ¯«ä¸èµ·ç¼çå°æ¹ââæ±è¥¿çèä¹¡å¸ãè¿éæ¾ç»æ¯æ±åç¤é½ï¼ç¶èéçç¤ç­èµæºçæ¯ç«­ï¼è¿åº§åå¸éæ¸å¤±å»äºå¾æ¥çè¾çãäººå£ä¸æ­æµåºï¼è¡å¤´å··å°¾åæ¥çéº»å°å£°åæé³éåç§å§é¹çå£°é³ãæ³è±¡ä¸ä¸ï¼å¨è¿æ ·çäºçº¿å°åå¸éï¼å¹´è½»äººå¤§å¤éæ©éç¦»ï¼åå¾é¿æ²ãåæãæ­å·ç­å¤§åå¸ï¼çè³æ¯ä¸çº¿åå¸å»è¿½å¯»èªå·±çæ¢¦æ³ï¼çä¸çå¤§å¤æ¯ä¸äºå®äºç°ç¶æèå åç§åå æ æ³ç¦»å¼çäººã</p>
<p>ä½æ¯ï¼å°±æ¯å¨è¿æ ·çç¯å¢ä¸­ï¼å´è¯çäºå¦æ­¤ä¼ç§ç<strong>C++ç²¾çµåº</strong>ãå®çèåï¼æä¸ä½äºä¸èµ·çäººç©ââæå´çèå¸ãæèå¸å¯æ¯ä¸ä¸çºªçå­¦é¸ï¼å¹´è½»æ¶æ¾å¨åæ»¡æºéä¸ææçä¸çº¿åå¸æ·±å³é¯è¡äº7å¹´ãèª2010å¹´åç°Scratchå¾å½¢åè®¡ç®æºè¯­è¨ä»¥æ¥ï¼ä»ä¾¿ææ ¹å¨èä¹¡ï¼ä»äºéå°å¿ç¼ç¨æè²é¿è¾¾10å¤å¹´ã</p>
<p>æ¶é´æ¥å°2019å¹´æ«ï¼è¿æ¯ä¸ä¸ªå·æç¹æ®æä¹çèç¹ãæèå¸å¼å§çæPythonç²¾çµæ¨¡åçå¼åãä¸ºä»ä¹è¦å¼åè¿ä¸ªæ¨¡åå¢ï¼è¿æºäºæèå¸é£é¢å§ç»åæ»¡å¥½å¥çå¿ãå¨æå­¦è¿ç¨ä¸­ï¼ä»æéå°åç°äºPython turtleåè½ä¸çä¸è¶³ãæ¯å¦è¯´ï¼æ³è¦è®©è§è²çé åå¾çè¿è¡ç¼©æ¾ï¼æèæ¯è¿è¡åç´ çº§å«çç¢°ææ£æµï¼è¿äºåè½å¨Python turtleä¸­é½æ²¡æãäºæ¯ï¼æèå¸ä¾¿æ·±å¥ç ç©¶python turtleåºçæºæä»¶turtle.pyï¼ç»è¿ä¸æçåªåï¼æç»æåç¼ååºäºPythonç²¾çµæ¨¡åãè¿ä¸æ®µç»åï¼å¶å®ä¸ºåæ¥C++ç²¾çµåºçè¯çåä¸äºæ·±åçæ ¹åºï¼å ä¸ºä»»ä½ä¼å¤§çåæ°é½ä¸æ¯å­ç©ºèæ¥çï¼é½éè¦æåæçç§¯ç´¯åæ¢ç´¢ã</p>
<p>å²ææµè½¬ï¼å°äº2025å¹´8æï¼æåè¯¾ç¨ç»æäºãæèå¸é£é¢æ¢ç´¢çå¿åæ¬¡èå¨èµ·æ¥ãå¨äººä»¬çä¼ ç»è§å¿µä¸­ï¼C++æ¯ä¸é¨éå¸¸é¾å­¦çç¼ç¨è¯­è¨ï¼ä¼¼ä¹åªæé£äºæè°çâå°å¤©æâæè½ææ¡ãè¿ç§è§å¿µæµä¼ è³ä»ï¼å ä¹å·²ç»åºåãä½æèå¸å´ä¸è¿ä¹æ³ï¼ä»ä¸ç´æèçå¦ä½éä½C++çæå­¦é¨æ§ãä¸ä¸ªå¤§èçæ³æ³å¨ä»èæµ·ä¸­æµ®ç°ï¼è½ä¸è½æPython turtleçå½ä»¤ç§»æ¤å°C++ä¸­å¢ï¼è¿æ ·ä¸æ¥ï¼å­¦çä»¬å¨å­¦ä¹ äºPython turtleä¹ååå­¦ä¹ C++ï¼å²ä¸æ¯ä¼å®¹æå¾å¤ï¼</p>
<p>ä¸ºäºå®ç°è¿ä¸ªæ³æ³ï¼æèå¸è¿è¡äºå¤æ¹é¢çè°ç ãä»æ·±å¥ç ç©¶åºå±ææ¯ï¼äºè§£ç°æçåºæ¯å¦è½å¤æ»¡è¶³éæ±ãç»è¿æ·±æçèï¼æèå¸æç»å³å®éç¨SDL2åºè¿è¡å¨æ°ç¼åãè¿æ ·åçå¥½å¤æ¯æ¾èæè§çï¼åºäºå·¥ä¸çº§å«çSDL2åºï¼ä¸ä»åºå±ä»£ç å¯ä»¥å¨ç¨ææ¡ï¼èä¸æå±æ§æå¼ºï¼ä¸ºåç»­çå¼ååå®åæä¾äºå¹¿éçç©ºé´ã</p>
<p>å¨è¿ä¸ªå°åå¸éï¼æèå¸å·²ç»å®ç°äºçæ´»æ å¿§ï¼å¹¶ä¸è½å¤å®å¨ææ§èªå·±çæ¶é´ï¼æ²¡æç»©æèæ ¸ç­ç¹ççååãæä»¥ï¼æåè¿åï¼ä»å¨ä¸å°å¨äºï¼ä»æ¯å¤©é½å¨èº«å¿å°æå¥å°C++ç²¾çµåºçå¼åä¸è°è¯å·¥ä½ä¸­ãææ¶åï¼ä¸ä¸ªå°å°çé®é¢å¯è½éè¦è±è´¹å¥½å å¤©çæ¶é´æ¥è§£å³ãå¦ææ¯å¨ä¸çº¿åå¸ï¼è¿æ ·çæ¶é´åäººåææ¬æ çæ¯å·¨å¤§çï¼ä½å¨äºçº¿å°åå¸ï¼ç¸å¯¹æ¥è¯´å°±æ¾å¾å¾®ä¸è¶³éäºãä¹è®¸ï¼åªæå¨è¿ç§ç¸å¯¹âä¼é²âçç¶æä¸­ï¼äººæè½éä¸å¿æ¥ï¼ä¸æ³¨äºä¸ä»¶äºæï¼ä»èååºä¼å¤§çãé©å½æ§çäº§åã</p>
<p>å¦ä»ï¼C++ç²¾çµåºå·²ç»å®ç°äºè¶è¶ãå°±æ¿å®çé¾å¼è°ç¨æ¥è¯´ï¼è¿ç§è®¾è®¡è®©ä»£ç æ´å ä¼éï¼æ´æ¥è¿èªç¶è¯­è¨ï¼å¤§å¤§éä½äºå­¦ä¹ åä½¿ç¨çé¾åº¦ãæèå¸è¿ç²¾å¿è®¾è®¡äºè®¸å¤ç»ç¬é¢è²çè°èå½ä»¤ï¼å¦penshadeãpentoneãpensatä»¥åpenhsvç­ï¼è¿äºå¨Python turtleä¸­é½æ¯æ²¡æçãè¿äºç¬ç¹çå½ä»¤ï¼ä¸ºç¾æ¯ççèºæ¯åé æå¼äºæ¹ä¾¿ä¹é¨ï¼è®©ä»ä»¬è½å¤å¨ç¼ç¨çä¸çéæ´å èªç±å°åæ¥æ³è±¡åååé åã</p>
<p>è®©æä»¬æ¥çä¸é¢çC++ä»£ç ï¼</p>
<div class="cnblogs_Highlighter">
<pre class="brush:cpp;gutter:true;">#include "sprites.h"  //åå«C++ç²¾çµåº 
Sprite turtle;       //å»ºç«è§è²å«turtle 

int main(){        //ä¸»åè½å 
   turtle.bgcolor("black");
   turtle.pensize(4).speed(0);
   for(int i=0;i&lt;36;i++)
       turtle.fd(10).left(10);
   for(int i=0;i&lt;36;i++)
       turtle.fd(10).right(10); 
    
   turtle.ht(); 
   turtle.done();  
   return 0;
}
</pre>
</div>
<p>ããåçä¸å¯¹åºçPython turtleä»£ç ï¼</p>
<div class="cnblogs_Highlighter">
<pre class="brush:php;gutter:true;">import turtle
turtle.bgcolor("black")
turtle.pensize(4)
turtle.speed(0)
for i in range(36):
    turtle.fd(10)
    turtle.left(10)
for i in range(36):
    turtle.fd(10)
    turtle.right(10)
</pre>
</div>
<p>ãã</p>
<p>å®ä»¬çæ¬è´¨æ¯ä¸æ ·çï¼C++çæ¬çæ ¸å¿é»è¾ä»£ç ï¼åªéç¨å ä¿®æ¹ï¼å°C++çé¾å¼è°ç¨æ¹æPythonçåä¸ªå½ä»¤è°ç¨ï¼å¤å¶å°Python IDLEä¸­å°±è½è¿è¡ãä¸è¿ï¼è¿ä¸æ¹ï¼åæ¯æåæ¬ä¼éçC++ä»£ç æ¢æäºä¼ ç»çPythonä¹¦åæ¹å¼ã</p>
<p>æä»¥è¯´ï¼ä¸ºä»ä¹å¾å¤ä¼å¤§çä½åé½æ¯è¯çå¨ä¸äºä¸èµ·ç¼çå°æ¹å¢ï¼å ä¸ºå¨è¿éï¼äººä»¬å¯ä»¥æè±å¤ççå¹²æ°åååï¼ä»¥æä½çææ¬å»è¿½æ±èªå·±ççæ³ï¼åæ¶åè½å°èªå·±çä»·å¼æå¤§åãå°±åC++ç²¾çµåºä¸æ ·ï¼å®å¨èä¹¡è¿ä¸ªå°åå¸éè¯çï¼å´æå¯è½ä¸ºæ´ä¸ªç¼ç¨æè²é¢åå¸¦æ¥æ·±è¿çå½±åã</p>
</div>
<div class="clear"></div>

	<div class="postDesc">posted on 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-08 15:23">2026-01-08 15:23</span>&nbsp;
<a href="https://www.cnblogs.com/lixingqiu">æå´ç</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">1</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19457141);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19457141', targetLink: 'https://www.cnblogs.com/lixingqiu/p/19457141', title: 'ä¸ºä»ä¹å¾å¤ä¼å¤§çä½åé½æ¯è¯çå¨ä¸äºä¸èµ·ç¼çå°æ¹' })">ä¸¾æ¥</a>
</div>
 ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ æ¬§æå½æ° ]]></title>
    <link>https://www.cnblogs.com/Samhu07/p/19455379</link>
    <guid>8c88f2bfa906d52a672fdb5cfa4760f2</guid>
    <description>
    <![CDATA[ 
		<div class="postcontent">
			    <div id="cnblogs_post_description" style="display: none">
        
        æ¬§æå½æ°
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>æ¬ææ¯å¯¹<a href="https://blog.csdn.net/Wxb314/article/details/148166969" target="_blank" rel="noopener nofollow">è¿ç¯æç« </a>çè¡¥åè¯´æï¼è¡¥åäºä¸äºç»è®º4çä¸äºç»è</p>
<p><span class="math inline">\(\varphi(n)\)</span> è¡¨ç¤ºçæ¯å°äºç­äº $ ð $ å $ ð $ äºè´¨çæ°çä¸ªæ°</p>
<h1 id="ç»è®º1">ç»è®º1</h1>
<p><span class="math inline">\(p\)</span> ä¸ºè´¨æ°ï¼å <span class="math inline">\(\varphi(p) = p - 1\)</span></p>
<h1 id="ç»è®º2">ç»è®º2</h1>
<p><span class="math inline">\(p\)</span> ä¸ºè´¨æ°ï¼å <span class="math inline">\(\varphi(p^k) = p^k-p^{k-1} = (p-1) \times p^{k-1}\)</span><br>
è¯æï¼<br>
<span class="math inline">\(\because 1\)</span> å° <span class="math inline">\(p^k\)</span> ä¸­å±æ <span class="math inline">\(p^{k-1}\)</span> ä¸ªæ°æ¯ <span class="math inline">\(p\)</span> çåæ°<br>
$\therefore $ ä¸ <span class="math inline">\(p^k\)</span> äºè´¨çæ°æ <span class="math inline">\(p^k-p^{k-1}\)</span> ä¸ª</p>
<h1 id="ç»è®º3">ç»è®º3</h1>
<p><span class="math inline">\(p,q\)</span> ä¸ºäºå¼è´¨æ°ï¼å <span class="math inline">\(\varphi(pq) = \varphi(p) \times \varphi(q)\)</span><br>
è¯æ:<br>
<span class="math inline">\(\varphi(p) = p - 1, \varphi(q) = q - 1\)</span><br>
<span class="math inline">\(1\)</span> å° <span class="math inline">\(pq\)</span> ä¸­æ <span class="math inline">\(q\)</span> ä¸ª <span class="math inline">\(p\)</span> çåæ°ï¼ <span class="math inline">\(p\)</span> ä¸ª <span class="math inline">\(q\)</span> çåæ°ï¼å¶ä¸­ <span class="math inline">\(pq\)</span> ç®äºä¸¤æ¬¡<br>
<span class="math inline">\(\therefore \varphi (pq) = pq-p-q+1=(p-1)(q-1)=\varphi (p) \times \varphi (q)\)</span></p>
<h1 id="ç»è®º4">ç»è®º4</h1>
<p><span class="math inline">\(p,q\)</span> ä¸ºäºå¼è´¨æ°ï¼å <span class="math inline">\(\varphi(p^a  q^b) = \varphi(p^a) \times \varphi(q^b)\)</span><br>
è¯æï¼<br>
<span class="math inline">\(\varphi(p^a) = (p-1) \times p^{a-1} , \varphi(q^b) = (q-1) \times q^{b-1}\)</span><br>
<span class="math inline">\(1\)</span> å° <span class="math inline">\(p^a q^b\)</span> ä¸­æ <span class="math inline">\(p^{a-1} q^b\)</span> ä¸ª <span class="math inline">\(p\)</span> çåæ°ï¼ <span class="math inline">\(p^a q^{b-1}\)</span> ä¸ª <span class="math inline">\(q\)</span> çåæ°ï¼ <span class="math inline">\(p^{a-1} q^{b-1}\)</span> ä¸ª <span class="math inline">\(pq\)</span> çåæ°</p>
<p><span class="math inline">\(1\)</span> å° <span class="math inline">\(p^a q^b\)</span> ä¸­ä¸ <span class="math inline">\(p^aq^b\)</span> ä¸äºè´¨çæ°æ <span class="math inline">\(p^{a-1} q^b+p^a q^{b-1}-p^{a-1} q^{b-1}\)</span> ä¸ª</p>
<p><span class="math inline">\(\begin{align*}
\varphi(p^a  q^b) &amp;= p^aq^b-p^{a-1} q^b-p^a q^{b-1}+p^{a-1} q^{b-1} \\
                  &amp;= (pq-q-p+1)p^{a-1} q^{b-1} \\
                  &amp;= (p-1)p^{a-1}(q-1)q^{b-1} \\
                  &amp;= \varphi(p^a) \times \varphi(q^b)
\end{align*}\)</span></p>
<h1 id="ç»è®º45">ç»è®º4.5</h1>
<p>æ¨å¹¿ï¼ <span class="math inline">\(\varphi({\textstyle \prod_{i=1}^{n}} p_i^{a_i})= {\textstyle \prod_{i=1}^{n}}\varphi( p_i^{a_i})\)</span><br>
è¯æï¼<br>
èèæ°å­¦å½çº³æ³<br>
åè®¾ç¬¬ <span class="math inline">\(n\)</span> é¡¹æç«ï¼è®¾ <span class="math inline">\(m={\textstyle \prod_{i=1}^{m+1}}p_i^{a_i},A={\textstyle \prod_{i=1}^{m}}p_i^{a_i},B=p_{n+1}^{a_{n+1}}\)</span></p>
<h5 id="1--å°--ä¸­ä¸--ä¸äºè´¨çæ°æ--ä¸ª">ï¼1ï¼ <span class="math inline">\(1\)</span> å° <span class="math inline">\(m\)</span> ä¸­ä¸ <span class="math inline">\(A\)</span> ä¸äºè´¨çæ°æ <span class="math inline">\((A - \varphi (A)) \times B\)</span> ä¸ª</h5>
<p>è§£éï¼<br>
è®¾ <span class="math inline">\(1\)</span> å° <span class="math inline">\(m\)</span> ä¸­ä¸ <span class="math inline">\(A\)</span> ä¸äºè´¨çæ°ä¸º <span class="math inline">\(b\)</span><br>
è®¾ <span class="math inline">\(b = kA+a,0\le k\le B-1,1\le a \le A\)</span><br>
ï¼æ³¨æï¼è¿éå¯¹ <span class="math inline">\(b\)</span> çåè§£ä¸åäºæ®éç <span class="math inline">\(\bmod A\)</span> ï¼ä½ä»ç¶ä¿æä¸ä¸å¯¹åºçå³ç³»ï¼<br>
<span class="math inline">\(gcd(b,A) = gcd(kA+a,A) = gcd(a,A)\)</span><br>
$\therefore $ è¦ä½¿ <span class="math inline">\(b\)</span> ä¸ <span class="math inline">\(A\)</span> ä¸äºè´¨ï¼åè¦æ¡ä»¶æ¯ <span class="math inline">\(a\)</span> ä¸ <span class="math inline">\(A\)</span> ä¸äºè´¨ï¼èä¸ <span class="math inline">\(k\)</span> æ å³<br>
<span class="math inline">\(a\)</span> æ <span class="math inline">\((A - \varphi (A))\)</span> ä¸ªåå¼ï¼ <span class="math inline">\(k\)</span> æ <span class="math inline">\(B\)</span> ä¸ªåå¼<br>
$\therefore b $ æ <span class="math inline">\((A - \varphi (A)) \times B\)</span> ä¸ªåå¼</p>
<h5 id="2---å°--ä¸­ä¸--ä¸äºè´¨çæ°æ--ä¸ª">ï¼2ï¼  <span class="math inline">\(1\)</span> å° <span class="math inline">\(m\)</span> ä¸­ä¸ <span class="math inline">\(B\)</span> ä¸äºè´¨çæ°æ <span class="math inline">\((B - \varphi (B)) \times A\)</span> ä¸ª</h5>
<p>åçå¯å¾</p>
<h5 id="3---å°--ä¸­ä¸--ä¸äºè´¨ä¸--ä¸äºè´¨çæ°æ--ä¸ª">ï¼3ï¼  <span class="math inline">\(1\)</span> å° <span class="math inline">\(m\)</span> ä¸­ä¸ <span class="math inline">\(A\)</span> ä¸äºè´¨ãä¸ <span class="math inline">\(B\)</span> ä¸äºè´¨çæ°æ <span class="math inline">\((A - \varphi (A)) \times (B - \varphi (B))\)</span> ä¸ª</h5>
<hr>
<p>å¼çï¼å¨æ¨¡ <span class="math inline">\(p_{n+1}\)</span> æ¶ï¼ <span class="math inline">\(yA(0 \le y \le p_{n+1}-1)\)</span> äºä¸ç¸ç­<br>
èèåè¯<br>
åè®¾ <span class="math inline">\(\exists y_1,y_2\in [0,p_{n+1}-1],y_1\ne y_2,\)</span><br>
$y_1A \equiv y_2A \pmod{p_{n+1}} $<br>
å <span class="math inline">\((y_1-y_2)A \equiv 0 \pmod{p_{n+1}}\)</span><br>
<span class="math inline">\(\because gcd(A,p_{n+1})=1\)</span><br>
<span class="math inline">\(\therefore y_1-y_2\equiv 0 \pmod{p_{n+1}}\)</span><br>
çç¾<br>
æ­¤äºå¨è´¹é©¬å°å®çä¸­äº¦æè®°è½½</p>
<hr>
<p>ä¾æ§è®¾ <span class="math inline">\(1\)</span> å° <span class="math inline">\(m\)</span> ä¸­ä¸ <span class="math inline">\(A\)</span> ä¸äºè´¨çæ°ä¸º <span class="math inline">\(b\)</span><br>
ä¾æ§è®¾ <span class="math inline">\(b = kA+a,0\le k\le B-1,1\le a \le A\)</span><br>
è®¾ <span class="math inline">\(k=xp_{n+1}+y,0\le x\le p_{n+1}^{a_{n+1}-1}-1,0\le y\le p_{n+1}-1\)</span><br>
<span class="math inline">\(b=(xp_{n+1}+y)A+a=Axp_{n+1}+yA+a\)</span><br>
è¦ä½¿ <span class="math inline">\(b\)</span> ä¸ <span class="math inline">\(A\)</span> ä¸äºè´¨ï¼ <span class="math inline">\(a\)</span> æ <span class="math inline">\(A-\varphi(A)\)</span> ä¸ªåå¼<br>
è¦ä½¿ <span class="math inline">\(b\)</span> ä¸ <span class="math inline">\(B\)</span> ä¸äºè´¨ï¼å³ <span class="math inline">\(b\)</span> æ¯ <span class="math inline">\(p_{n+1}\)</span> çåæ°ï¼<br>
ç±å¼çå¾ï¼å¯¹äºä»»æç <span class="math inline">\(a\)</span> ä¸ <span class="math inline">\(x\)</span>ï¼æä¸ä»æ 1 ä¸ª <span class="math inline">\(y\)</span> ä½¿ <span class="math inline">\(b\)</span> æ¯ <span class="math inline">\(p_{n+1}\)</span> çåæ°ã<br>
<span class="math inline">\(x\)</span> æ <span class="math inline">\(p_{n+1}^{a_{n+1}-1}\)</span> ç§åå¼ï¼<span class="math inline">\(a\)</span> æ <span class="math inline">\(A-\varphi(A)\)</span> ç§åå¼ï¼<span class="math inline">\(y\)</span> å¨ <span class="math inline">\(x\)</span> ä¸ <span class="math inline">\(a\)</span> ç¡®å®æ¶åªæä¸ç§åå¼<br>
æå±æ <span class="math inline">\(p_{n+1}^{a_{n+1}-1} \times (A-\varphi(A)) = (A - \varphi (A)) \times (B - \varphi (B))\)</span> ç§åå¼</p>
<hr>
<p>ç»¼ä¸ï¼ <span class="math inline">\(\varphi(m)=\varphi(AB)=AB-(A - \varphi (A)) \times B-(B - \varphi (B)) \times A+(A - \varphi (A)) \times (B - \varphi (B))=\varphi(A)\varphi(B)\)</span></p>
<h1 id="æ»ç»">æ»ç»</h1>
<p>å¯¹äºç»è®º3ãç»è®º4ãç»è®º4.5çè¯æé½ç¨å°äºä»¥ä¸ç»æï¼<br>
<span class="math inline">\(\varphi (xy)=xy- ä¸ x ä¸äºè´¨çæ°çä¸ªæ° - ä¸ y ä¸äºè´¨çæ°çä¸ªæ° + ä¸ x , y é½ä¸äºè´¨çæ°çä¸ªæ°\)</span><br>
è¿æ¯å®¹æ¥ææ³çä½ç°</p>

</div>
<div class="clear"></div>

		</div>
		<div class="itemdesc">
			posted on 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-08 15:14">2026-01-08 15:14</span>&nbsp;
<a href="https://www.cnblogs.com/Samhu07">Samhu07</a>&nbsp;
éè¯»(<span id="post_view_count">8</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19455379);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19455379', targetLink: 'https://www.cnblogs.com/Samhu07/p/19455379', title: 'æ¬§æå½æ°' })">ä¸¾æ¥</a>

		</div>
	 ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ èªéåºå¯åéçIDçæå¨çè®¾è®¡ä¸å®è·µ(è§é¢) ]]></title>
    <link>https://www.cnblogs.com/Zongsoft/p/19457036/sequence</link>
    <guid>184b07601d3d8d66c3d82608aff94a26</guid>
    <description>
    <![CDATA[ 
    <a name="top"></a>
    <h2><a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Zongsoft/p/19457036/sequence" title="åå¸äº 2026-01-08 15:03">
    <span role="heading" aria-level="2">èªéåºå¯åéçIDçæå¨çè®¾è®¡ä¸å®è·µ(è§é¢)</span>
    

</a>
</h2>
    <small>
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-08 15:03">2026-01-08 15:03</span>&nbsp;
<a href="https://www.cnblogs.com/Zongsoft">Zongsoft</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19457036);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19457036', targetLink: 'https://www.cnblogs.com/Zongsoft/p/19457036/sequence', title: 'èªéåºå¯åéçIDçæå¨çè®¾è®¡ä¸å®è·µ(è§é¢)' })">ä¸¾æ¥</a>
</small>
    <div class="entry">
            <div id="cnblogs_post_description" style="display: none">
        
        å¨åå¸å¼ç³»ç»æ¶æä¸­ï¼å¨å±å¯ä¸IDçæå¨æ¯æ¯æé«å¹¶åãé«å¯ç¨ç³»ç»çåºç³ãå¸é¢ä¸çå¸¸è§æ¹æ¡ï¼å¦Snowflake-IDãUUIDãRedisèªå¢ï¼åæä¼å£ï¼ä½å¾å¾é¾ä»¥å¼é¡¾é«æ§è½ãæ ä¸­å¿åä¸çµæ´»çä¸å¡éæ±ã
æ¬ç³»åè§é¢å°å¸¦ä½ æ·±å¥åæä¸ä¸ªå¼æºé¡¹ç®ä¸­çæ ¸å¿ç»ä»¶ï¼éç¹è§£æå¦ä½è®¾è®¡ä¸æ¬¾è½æºè½éåºæµéæ³¢å¨ãå¼é¡¾å¨å±å¯ä¸ä¸è¶å¿éå¢ç¹æ§çé«æ§è½IDçæå¨ãæä»¬å°ä»çè®ºè®¾è®¡ãæ§è½åæµå°æºç å®ç°ï¼å¨æ¹ä½è§£è¯»è¿å¥ç®æ³å¦ä½å¨ä¿è¯æé«ååéçåæ¶ï¼å®ç°æ¯«ç§çº§çèªéåºä¸å¯åéçè°èã
æ è®ºä½ æ¯æ¶æå¸ãåç«¯å¼åå·¥ç¨å¸ï¼è¿æ¯å¯¹é«æ§è½ç®æ³æå´è¶£çç±å¥½èï¼è¿ä¸ªç³»åé½å°ä¸ºä½ æä¾å®è´µçå®æç»éªåæ·±åº¦çææ¯æ´å¯ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>å¨åå¸å¼ç³»ç»è®¾è®¡ä¸­ï¼IDçæå¨ <em>(<strong>S</strong>equence)</em> æ¯çä¼¼åºç¡å´è³å³éè¦çç»ä»¶ãç¶èï¼ä¸äºå¸¸ç¨è§£å³æ¹æ¡ <em>(å¦ Snowflake-ID ç®æ³)</em> å¨é«å¹¶åãå¼¹æ§ä¼¸ç¼©åºæ¯ä¸ï¼å¸¸é¢ä¸´æºå¨èç¹åéãæ¶éåæ¨ãåºåå·èå°½ãè·¨æºæ¿å®¹éç­ææãä½ æ¯å¦ä¹æ¾ä¸ºè¿äºé®é¢å°æ°ï¼</p>
<p><a href="http://zongsoft.com" target="_blank" rel="noopener nofollow"><em><strong>Z</strong>ongsoft</em></a> å¼æºé¡¹ç®ä¸­ç <a href="https://github.com/Zongsoft/framework/blob/master/Zongsoft.Core/src/Common/Sequence.cs" target="_blank" rel="noopener nofollow"><em>èªéåºå¯åéçIDçæå¨</em></a>ï¼æè®¸è½ä¸ºä½ æä¾ä¸ç§æ°çæè·¯ã</p>
<p>æå¼ºçæ¨èå¤§å®¶å³æ³¨è¿æä¸çº¿ç <strong>è§é¢ç³»å</strong>ï¼ã<a href="https://space.bilibili.com/20995572" target="_blank" rel="noopener nofollow">èªéåºå¯åéçIDçæå¨çè®¾è®¡ä¸å®è·µ</a>ãã</p>
<p>ç³»åè§é¢éå â<strong>çè®º</strong>-<strong>å®éª</strong>-<strong>æºç </strong>â ä¸å±éè¿ç»æï¼æ¶µçä»è®¾è®¡çå¿µå°æ§è½éªè¯åå°å®ç°ç»èçå®æ´ç¥è¯é¾ï¼å±ç¤ºäºå¦ä½è®¾è®¡å¹¶å®ç°ä¸ä¸ªæºè½éåºæµéæ³¢å¨ãå¼é¡¾å¨å±å¯ä¸ä¸é«ä¿¡æ¯å¯åº¦ãé«æ§è½çè§£å³æ¹æ¡ãæ è®ºæ¯åå¸å¼ç³»ç»åå­¦èè¿æ¯èµæ·±å·¥ç¨å¸é½è½ä»ä¸­è·çãå¶äº®ç¹å¨äºï¼</p>
<ol>
<li>
<p><strong>ç´é¢çç¹ï¼çªç ´ä¼ ç»å±éâ</strong></p>
<p>è§é¢ä¸­å¯¹æ¯äº Snowflake-IDãUUIDãæ°æ®åºèªå¢ç­æ¹æ¡çä¼å£ï¼å¹¶éç¹è§£æäºå¦ä½éè¿å¨æéçè°æ´åæ¶éåæ¨å®¹éæºå¶ï¼é¿ååºåå·äºç¨ä¸æ¶é´åæ­¥é®é¢ãè¿ç§è®¾è®¡å°¤å¶éåæµéçªå¢åºæ¯ <em>ï¼å¦ç§æãæ¥å¿é«é¢åå¥ï¼</em>ï¼æ¾èæåç³»ç»çç¨³å®æ§ã</p>
</li>
<li>
<p><strong>å®éªé©±å¨ï¼æ°æ®è¯´è¯â</strong></p>
<p>ç³»åä¸­éè¿ <strong>6</strong> ç»ä¸¥è°¨å®éªï¼éªè¯äºç®æ³å¨æ§è½ãæ­£ç¡®æ§ãç¨³å®æ§æ¹é¢çè¡¨ç°ï¼å¹¶ä¸åç Redis çæå¨è¿è¡å¯¹æ¯ãç»ææ¸æ°å±ç¤ºäºå¶å¨é«åä¸çååéä¼å¿ï¼ä¸ºææ¯éåæä¾äºå¯é ä¾æ®ã</p>
</li>
<li>
<p><strong>å¼æºå®æï¼æºç çº§è§£è¯»â</strong></p>
<p>è§é¢ç´æ¥åºäº <a href="https://github.com/Zongsoft/framework" target="_blank" rel="noopener nofollow"><em><strong>Z</strong>ongsoft</em></a> å¼æºé¡¹ç®ä»£ç è§£æï¼ä»ä½è¿ç®è®¾è®¡å°å¼å¸¸å¤çé»è¾ï¼éè¡æè§£å®ç°ç»èãæ è®ºæ¯å­¦ä¹ åå¸å¼ç³»ç»è®¾è®¡ï¼è¿æ¯éè¦äºæ¬¡å¼åï¼é½å·ææé«åèä»·å¼ã</p>
</li>
</ol>
<blockquote>
<p>æ è®ºä½ æ¯æ¶æå¸ãåç«¯å¼åå·¥ç¨å¸ï¼è¿æ¯å¯¹é«æ§è½ç®æ³æå´è¶£çç±å¥½èï¼è¿ä¸ªç³»åé½å°ä¸ºä½ æä¾å®è´µçå®æç»éªåæ·±åº¦çææ¯æ´å¯ãåæèä½ æ­£å¨æå»ºé«å¹¶åç³»ç»ï¼æå¯¹åå¸å¼åºç¡ç»ä»¶ææ·±å¥æ¢ç´¢çå´è¶£ï¼è¿ä¸ç³»åè§é¢å°æ¯ä¸å¯å¤å¾çå­¦ä¹ èµæºã<br>
å®ä¸ä»è½å¸®å©ä½ çè§£IDçæå¨çæ¬è´¨ï¼æ´è½æå®½è§£å³å¤æé®é¢çæè·¯ã</p>
</blockquote>
<hr>
<h3 id="-è§é¢-1èªéåºå¯åéçidçæå¨è®¾è®¡ä¸å®è·µä¸">ð¥ è§é¢ 1ï¼èªéåºå¯åéçIDçæå¨è®¾è®¡ä¸å®è·µ(ä¸)</h3>
<blockquote>
<p>å¯æ é¢ï¼ ä»çè®ºå°æ¶æï¼ä¸ºä»ä¹æä»¬éè¦æ°çIDçææ¹æ¡ï¼<br><br>
è§é¢å°åï¼<a href="https://www.bilibili.com/video/BV15fiSBXEW5" target="_blank" rel="noopener nofollow">https://www.bilibili.com/video/BV15fiSBXEW5</a></p>
</blockquote>
<p>å¨æ¬ç³»åçç¬¬ä¸é¨åï¼æä»¬å°é¦åå¯¹ç°æçå¸¸è§åå¸å¼IDçææ¹æ¡è¿è¡æ·±åº¦çæ¨ªåå¯¹æ¯ä¸åæã</p>
<p>æ·±å¥æ¢è®¨ Snowflake ID çæºå¨èç¹åéåæ¶éåæ¨ãæ¶éæ¼ç§»é®é¢ãUUID çæ åºæ§ãæ¶éé®é¢ä¸å­å¨æµªè´¹ãæ°æ®åºèªå¢IDçæ§è½ç¶é¢ä¸åç§éå¶ï¼ä»¥å Redis éå¢æ¹æ¡çä¼ç¼ºç¹ã</p>
<p>è¯¦ç»éè¿°æ¬ç®æ³çè®¾è®¡åè¡·ä¸æ ¸å¿çå¿µï¼å¨æ­¤åºç¡ä¸ï¼è§é¢æ·±å¥éè¿°èªéåºå¯åéçIDçæå¨çè®¾è®¡ç®æ ä¸æ ¸å¿çå¿µï¼éç¹è®²è§£å¦ä½éè¿å¨æéçè°æ´ãæ¶éåæ¨å®¹éç­æºå¶ï¼è§£å³ä¼ ç»æ¹æ¡å¨é«å¹¶ååºæ¯ä¸çåºåå·èå°½ãæ¶éåæ­¥ç­çç¹é®é¢ãè¯¥è§é¢ä¸ºçè§£åç»­å®éªä¸æºç å®ç°å¥ å®çè®ºåºç¡ã</p>
<h3 id="-è§é¢-2èªéåºå¯åéçidçæå¨è®¾è®¡ä¸å®è·µä¸­">ð¥ è§é¢ 2ï¼èªéåºå¯åéçIDçæå¨è®¾è®¡ä¸å®è·µ(ä¸­)</h3>
<blockquote>
<p>å¯æ é¢ï¼ æ°æ®è¯´è¯ï¼æ§è½ãç¨³å®æ§ä¸æ­£ç¡®æ§çç¡¬æ ¸å®æµ<br><br>
è§é¢å°åï¼<a href="https://www.bilibili.com/video/BV1EQiSBtE38" target="_blank" rel="noopener nofollow">https://www.bilibili.com/video/BV1EQiSBtE38</a></p>
</blockquote>
<p>åæçè®ºä¸å¤ï¼æ°æ®ææ¯ç¡¬éçãå¨æ¬éä¸­ï¼æä»¬å°éè¿ <strong>6</strong> ä¸ªç²¾å¿è®¾è®¡çå®éªï¼å¯¹ç®æ³è¿è¡å¨æ¹ä½çååæµè¯ä¸éªè¯ï¼</p>
<ul>
<li>æ ¸å¿ææ ï¼éªè¯çæå¨å¨é«å¹¶ååºæ¯ä¸çååéï¼TPSï¼ä¸ååºå»¶è¿ã</li>
<li>ç¨³å®æ§æµè¯ï¼æ¨¡æå»¶è¿ç¯å¢ä¸­ï¼ç®æ³å¨é¿æ¶é´é«å¹¶åè¿è¡ä¸çç¨³å®æ§ä¸æ­£ç¡®æ§ã</li>
<li>æ¨ªåå¯¹æ¯ï¼æä»¬å°æ¬ç®æ³ä¸åç Redis çæå¨è¿è¡ååºæ¯ä¸çæ§è½å¯¹æ¯ï¼ç´è§å±ç¤ºå¶å¨èµæºæ¶èä¸çææçä¸çä¼å¿ã</li>
</ul>
<blockquote>
<p>éè¿è¿äºå®éªï¼ä½ å°çå°è¿å¥ç®æ³å¨å®éåºç¨ä¸­è¡¨ç°åºçåè¶æ§è½ã</p>
</blockquote>
<p>è§é¢ç¹å«è®¾ç½®äºä¸åç Redis çæå¨çå¯¹æ¯æµè¯ï¼éè¿éåæ°æ®å±ç°èªéåºç®æ³å¨å¯åè´è½½åºæ¯ä¸çæ§è½ä¼å¿ãä¾å¦ï¼å¨æµéçªå¢æ¶ï¼ä¼ ç»çæå¨å¯è½å åºåå·å¿«éèå°½èå¯¼è´IDçæå»¶è¿æé»å¡ï¼èèªéåºç®æ³è½å¨æè°æ´çæç­ç¥ï¼ä¿æé«æ§è½ä¸ç¨³å®æ§ãè¿äºå®éªä¸ºå¼åèæä¾äºå®¢è§çè¯ä¼°ä¾æ®ï¼å¸®å©ä»ä»¬å¨ææ¯éåæ¶ååºææºå³ç­ã</p>
<h3 id="-è§é¢-3èªéåºå¯åéçidçæå¨è®¾è®¡ä¸å®è·µä¸">ð¥ è§é¢ 3ï¼èªéåºå¯åéçIDçæå¨è®¾è®¡ä¸å®è·µ(ä¸)</h3>
<blockquote>
<p>å¯æ é¢ï¼ æºç æ·±æ½ï¼æ­ç§æ ¸å¿é»è¾ä¸ç¯å¢éç½®<br><br>
è§é¢å°åï¼å³å°åå¸ï¼è¯·å³æ³¨å¾®ä¿¡å¬ä¼å·(<code>Zongsoft</code>)ä»¥è·å¾åæ¶åå¸éç¥ã</p>
</blockquote>
<p>æåä¸éï¼æä»¬å°å¸¦ä½ æ½å¥ä»£ç æ·±å¤ï¼ç´é¢è¯¥ç®æ³çæ ¸å¿å®ç°ä»¥åå¦ä½å¿«éæ­å»ºå¼åä¸æµè¯ç¯å¢ã</p>
<p>éè¡åæ <a href="https://github.com/Zongsoft/framework/blob/master/Zongsoft.Core/src/Common/Sequence.cs" target="_blank" rel="noopener nofollow">Sequence</a> ç±»çå³é®é»è¾ï¼è§£è¯»ä»£çæ¨¡å¼å°è£ãå¨ææ­¥é¿è°æ´ãæ¬å°æ ééå¢ãè¾¹çä¿éæºå¶ãæ¶åºæç¥ä¼åç­æ ¸å¿ä»£ç åã<br>
è¯¦ç»ä»ç»ç®æ³è¿è¡æéçç¯å¢ä¾èµä¸éç½®åæ°ï¼å¸®å©ä½ å¿«éå°è¿å¥é«æ§è½ç»ä»¶éæå°èªå·±çé¡¹ç®ä¸­ã</p>
<p>éè¿æ¬éï¼ä½ å°ææ¡ä»æºç å°é¨ç½²çå¨é¾è·¯è½åââä¸ä» <em>âç¨å¾ä¸â</em>ï¼æ´è½ <em>âæéåçâ</em>ï¼å¨å®éé¡¹ç®ä¸­å¿«éæå»ºåºèªéåºãé«å¯é ãé¶è¿ç»´çIDçææå¡ï¼ä¸ºé«å¹¶åç³»ç»ç­ç¢åºç³ã</p>
<hr>
<ul>
<li>Bilibili
<blockquote>
<p><a href="https://space.bilibili.com/20995572" target="_blank" rel="noopener nofollow">https://space.bilibili.com/20995572</a></p>
</blockquote>
</li>
<li>æé³
<blockquote>
<p><a href="https://www.douyin.com/user/MS4wLjABAAAA9NmpuYVoLopaB6XdHoQ1CcmDF5DIb5YgwKzBLjZZdyU" target="_blank" rel="noopener nofollow">https://www.douyin.com/user/MS4wLjABAAAA9NmpuYVoLopaB6XdHoQ1CcmDF5DIb5YgwKzBLjZZdyU</a></p>
</blockquote>
</li>
<li>å¾®ä¿¡å¬ä¼å·
<blockquote>
<p><img alt="Zongsoft å¾®ä¿¡å¬ä¼å·" loading="lazy" data-src="https://img2022.cnblogs.com/blog/646296/202209/646296-20220918173938239-2008014498.png" class="lazyload"></p>
</blockquote>
</li>
</ul>

</div>
<div id="MySignature" role="contentinfo">
    <div style="text-align: center; margin-top: 4rem">
	<img src="https://raw.githubusercontent.com/Zongsoft/Guidelines/master/zongsoft-qrcode%28wechat%29.png">
</div>

<hr style="margin-top: 2em; margin-bottom: 2em; margin-left: 0; margin-right: 0; padding: 0; height: 2px; border: 0; background-color: #e8e8e8">

<div id="license">
	<img src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" width="">
	<p style="margin-top: 4px">
æ¬ä½åéç¨ <a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="bi-link">ç¥è¯å±äº«ç½²å-éåä¸æ§ä½¿ç¨-ç¸åæ¹å¼å±äº« 4.0 å½éè®¸å¯åè®®</a> è¿è¡è®¸å¯ãæ¬¢è¿è½¬è½½ãä½¿ç¨ãéæ°åå¸ï¼ä½å¿é¡»ä¿çæ¬æçç½²å <a target="_blank" href="https://github.com/zongsoft" class="bi-link">éå³°</a>ï¼åå«é¾æ¥ï¼<a target="_blank" href="http://zongsoft.github.io/" class="bi-link">http://zongsoft.github.io</a>ï¼ï¼ä¸å¾ç¨äºåä¸ç®çï¼åºäºæ¬æä¿®æ¹åçä½åå¡å¿ä»¥ç¸åçè®¸å¯åå¸ãå¦æä»»ä½çé®ææææ¹é¢çååï¼è¯·è´ä¿¡ç»æ (zongsoft@qq.com)ã
	</p>
</div>
</div>
<div class="clear"></div>

        <div class="clear"></div>
        
</div>
    <ul class="postmetadata">
        <vc:categories-tags blog-app="Zongsoft" blog-id="422270" post-id="19457036"></vc:categories-tags>
    </ul>
 ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ å¼ºçæ¨è | é¿éå¼æºçè¿10ä¸ªç¥çº§é¡¹ç® ]]></title>
    <link>https://www.cnblogs.com/12lisu/p/19456855</link>
    <guid>a6f679a8364e94c2d0aab233296bbbdf</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/12lisu/p/19456855" title="åå¸äº 2026-01-08 14:35">
    <span role="heading" aria-level="2">å¼ºçæ¨è | é¿éå¼æºçè¿10ä¸ªç¥çº§é¡¹ç®</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="åè¨">åè¨</h2>
<p>æè¿è¶çæ¾åä¼æ¯ï¼ç¹å°æ´çäºä¸ä¸ï¼é¿éå·´å·´å¼æºç10æ¬¾ç¥çº§é¡¹ç®ã</p>
<p>è¿äºå¼æºé¡¹ç®ä¸­çç»å¤§å¤æ°ï¼æé½å¨å®éå·¥ä½ä¸­ç¨è¿ï¼æèæåäºç¨è¿ãç¡®å®æºä¸éï¼æºæä»·å¼çï¼ç°å¨æ¨èç»å¤§å®¶ã</p>
<h2 id="1-druid">1. Druid</h2>
<p>Druidèªç§°æ¯Javaè¯­è¨ä¸­æå¥½çæ°æ®åºè¿æ¥æ± ï¼å®è½å¤æä¾å¼ºå¤§ççæ§åæ©å±åè½ãçæ§åå°å¦ä¸å¾æç¤ºï¼</p>
<p><img alt="" loading="lazy" data-src="https://pic.imgdb.cn/item/615d0c902ab3f51d91b8fddf.jpg" class="lazyload"></p>
<p>Druidçä¸»è¦ä¼ç¹å¦ä¸ï¼</p>
<ul>
<li>å®è½çæ§æ°æ®åºè®¿é®æ§è½ã</li>
<li>å®æä¾äºWallFilterï¼å®æ¯åºäºSQLè¯­ä¹åææ¥å®ç°é²å¾¡SQLæ³¨å¥æ»å»çã</li>
<li>å®æä¾äºå¤ç§çæµè¿æ¥æ³æ¼çææ®µã</li>
<li>å®æä¾äºæ°æ®åºå¯ç å å¯çåè½ã</li>
<li>å®è½æå°SQLæ§è¡æ¥å¿ã</li>
</ul>
<blockquote>
<p>githubå°å: <a href="https://github.com/alibaba/druid" target="_blank" rel="noopener nofollow">https://github.com/alibaba/druid</a></p>
</blockquote>
<blockquote>
<p>mavenä¸­å¤®ä»åº: <a href="https://mvnrepository.com/artifact/com.alibaba/druid" target="_blank" rel="noopener nofollow">https://mvnrepository.com/artifact/com.alibaba/druid</a></p>
</blockquote>
<p>éç½®mavenä¾èµï¼</p>
<pre><code class="language-java">&lt;dependency&gt;
		&lt;groupId&gt;com.alibaba&lt;/groupId&gt;
		&lt;artifactId&gt;druid&lt;/artifactId&gt;
		&lt;version&gt;${druid-version}&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h2 id="2-fastjson">2. fastjson</h2>
<p><code>fastjson</code>æ¯é¿éå·´å·´çå¼æºJSONè§£æåºï¼å®å¯ä»¥è§£æJSONæ ¼å¼çå­ç¬¦ä¸²ï¼æ¯æå°Java Beanåºååä¸ºJSONå­ç¬¦ä¸²ï¼ä¹å¯ä»¥ä»JSONå­ç¬¦ä¸²ååºååå°JavaBeanã</p>
<p>fastjsonçä¸»è¦ä¼ç¹å¦ä¸ï¼</p>
<ul>
<li>éåº¦å¿«ï¼fastjsonç¸å¯¹å¶ä»JSONåºçç¹ç¹æ¯å¿«ï¼ä»2011å¹´fastjsonåå¸1.1.xçæ¬ä¹åï¼å¶æ§è½ä»æªè¢«å¶ä»Javaå®ç°çJSONåºè¶è¶ã</li>
<li>ä½¿ç¨å¹¿æ³ï¼fastjsonå¨é¿éå·´å·´å¤§è§æ¨¡ä½¿ç¨ï¼å¨æ°ä¸å°æå¡å¨ä¸é¨ç½²ï¼fastjsonå¨ä¸çè¢«å¹¿æ³æ¥åãå¨2012å¹´è¢«å¼æºä¸­å½è¯éä¸ºæåæ¬¢è¿çå½äº§å¼æºè½¯ä»¶ä¹ä¸ã</li>
<li>ä½¿ç¨ç®åï¼fastjsonçAPIååç®æ´ã</li>
</ul>
<pre><code class="language-java">//åºåå
String text = JSON.toJSONString(obj); 
//ååºåå
VO vo = JSON.parseObject("{...}", VO.class); 
</code></pre>
<ul>
<li>åè½å®å¤ï¼æ¯ææ³åï¼æ¯ææµå¤çè¶å¤§ææ¬ï¼æ¯ææä¸¾ï¼æ¯æåºåååååºååæ©å±ã</li>
</ul>
<blockquote>
<p>githubå°å: <a href="https://github.com/alibaba/fastjson" target="_blank" rel="noopener nofollow">https://github.com/alibaba/fastjson</a></p>
</blockquote>
<blockquote>
<p>mavenä¸­å¤®ä»åº: <a href="https://mvnrepository.com/artifact/com.alibaba/fastjson" target="_blank" rel="noopener nofollow">https://mvnrepository.com/artifact/com.alibaba/fastjson</a></p>
</blockquote>
<p>éç½®mavenä¾èµï¼</p>
<pre><code class="language-java">&lt;dependency&gt;
    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
    &lt;artifactId&gt;fastjson&lt;/artifactId&gt;
    &lt;version&gt;1.2.76&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h2 id="3-dubbo">3. Dubbo</h2>
<p>Apache Dubbo æ¯ä¸æ¬¾å¾®æå¡å¼åæ¡æ¶ï¼å®æä¾äº RPCéä¿¡ ä¸ å¾®æå¡æ²»ç ä¸¤å¤§å³é®è½åãè¿æå³çï¼ä½¿ç¨ Dubbo å¼åçå¾®æå¡ï¼å°å·å¤ç¸äºä¹é´çè¿ç¨åç°ä¸éä¿¡è½åï¼ åæ¶å©ç¨ Dubbo æä¾çä¸°å¯æå¡æ²»çè½åï¼å¯ä»¥å®ç°è¯¸å¦æå¡åç°ãè´è½½åè¡¡ãæµéè°åº¦ç­æå¡æ²»çè¯æ±ã</p>
<p>åæ¶ Dubbo æ¯é«åº¦å¯æ©å±çï¼ç¨æ·å ä¹å¯ä»¥å¨ä»»æåè½ç¹å»å®å¶èªå·±çå®ç°ï¼ä»¥æ¹åæ¡æ¶çé»è®¤è¡ä¸ºæ¥æ»¡è¶³èªå·±çä¸å¡éæ±ãå®ç®åå·²äº¤ç»Apacheç®¡çåç»´æ¤ã</p>
<p>æ¶æå¾å¦ä¸ï¼<br>
<img alt="" loading="lazy" data-src="https://pic.imgdb.cn/item/615d0ca92ab3f51d91b92cf0.jpg" class="lazyload"></p>
<p>Dubboçä¸»è¦ä¼ç¹å¦ä¸ï¼</p>
<ul>
<li>åºäºéææ¥å£çRPC</li>
<li>æºè½è´è½½åè¡¡</li>
<li>èªå¨æå¡æ³¨åååç°</li>
<li>é«æ©å±æ§</li>
<li>è¿è¡æ¶æµéè·¯ç±</li>
<li>å¯è§åæå¡æ²»ç</li>
<li>äºåçåå¥½</li>
</ul>
<blockquote>
<p>githubå°å: <a href="https://github.com/apache/dubbo" target="_blank" rel="noopener nofollow">https://github.com/apache/dubbo</a></p>
</blockquote>
<blockquote>
<p>mavenä¸­å¤®ä»åº: <a href="https://mvnrepository.com/artifact/com.alibaba/dubbo/" target="_blank" rel="noopener nofollow">https://mvnrepository.com/artifact/com.alibaba/dubbo/</a></p>
</blockquote>
<p>éç½®mavenä¾èµï¼</p>
<pre><code class="language-java">&lt;properties&gt;
    &lt;dubbo.version&gt;3.0.3&lt;/dubbo.version&gt;
&lt;/properties&gt;

&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.apache.dubbo&lt;/groupId&gt;
        &lt;artifactId&gt;dubbo&lt;/artifactId&gt;
        &lt;version&gt;${dubbo.version}&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.apache.dubbo&lt;/groupId&gt;
        &lt;artifactId&gt;dubbo-dependencies-zookeeper&lt;/artifactId&gt;
        &lt;version&gt;${dubbo.version}&lt;/version&gt;
        &lt;type&gt;pom&lt;/type&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>
<h2 id="4-rocketmq">4. Rocketmq</h2>
<p>Apache RocketMQæ¯ä¸ä¸ªåå¸å¼æ¶æ¯åæµåªä½å¹³å°ï¼å·æä½å»¶è¿ãé«æ§è½åå¯é æ§ãä¸äº¿çº§å®¹éåçµæ´»çå¯æ©å±æ§ã</p>
<p>å®æä¾äºå¤ç§åè½ï¼</p>
<ul>
<li>æ¶æ¯ä¼ éæ¨¡å¼ï¼åæ¬åå¸/è®¢éãè¯·æ±/åå¤åæµåªä½</li>
<li>éèçº§äº¤ææ¶æ¯</li>
<li>åºäºDLedgerçåç½®å®¹éåé«å¯ç¨éç½®éé¡¹</li>
<li>å¤ç§è·¨è¯­è¨å®¢æ·ç«¯ï¼å¦JavaãC/C++ãPythonãGo</li>
<li>å¯ææä¼ è¾åè®®ï¼ä¾å¦ TCPãSSLãAIO</li>
<li>åç½®æ¶æ¯è¿½è¸ªè½åï¼ä¹æ¯æopentracing</li>
<li>å¤åè½å¤§æ°æ®åæµåªä½çæç³»ç»éæ</li>
<li>ææ¶é´æåç§»éçæ¶æ¯è¿½æº¯</li>
<li>å¯é ç FIFO ååä¸éåä¸­çä¸¥æ ¼æåºæ¶æ¯ä¼ é</li>
<li>é«æçææ¨å¼æ¶è´¹æ¨¡å¼</li>
<li>åä¸ªéåç¾ä¸çº§æ¶æ¯ç´¯ç§¯è½å</li>
<li>å¤ç§æ¶æ¯ä¼ éåè®®ï¼å¦ JMS å OpenMessaging</li>
<li>çµæ´»çåå¸å¼æ¨ªåæ©å±é¨ç½²æ¶æ</li>
<li>éªçµè¬çæ¹éæ¶æ¯äº¤æ¢ç³»ç»</li>
<li>åç§æ¶æ¯è¿æ»¤æºå¶ï¼ä¾å¦ SQL å Tag</li>
<li>ç¨äºéç¦»æµè¯åäºéç¦»éç¾¤ç Docker éå</li>
<li>ç¨äºéç½®ãææ åçæ§çåè½ä¸°å¯çç®¡çä»ªè¡¨æ¿</li>
<li>è®¤è¯åææ</li>
<li>åè´¹çå¼æºè¿æ¥å¨ï¼ç¨äºæºåæ¥æ¶å¨</li>
</ul>
<p>rocketmqåå°ç®¡ççé¢ï¼<br>
<img alt="" loading="lazy" data-src="https://pic.imgdb.cn/item/615d0cc02ab3f51d91b95942.jpg" class="lazyload"></p>
<blockquote>
<p>githubå°å: <a href="https://github.com/apache/rocketmq" target="_blank" rel="noopener nofollow">https://github.com/apache/rocketmq</a></p>
</blockquote>
<blockquote>
<p>mavenä¸­å¤®ä»åº: <a href="https://mvnrepository.com/artifact/org.apache.rocketmq/rocketmq-spring-boot-starter" target="_blank" rel="noopener nofollow">https://mvnrepository.com/artifact/org.apache.rocketmq/rocketmq-spring-boot-starter</a></p>
</blockquote>
<p>rocketmqåå«ï¼æå¡ç«¯åå®¢æ·ç«¯ï¼å¨æä»¬çé¡¹ç®ä¸­ä¸»è¦å³æ³¨å®¢æ·ç«¯çä»£ç å³å¯ã</p>
<p>éç½®mavenä¾èµï¼</p>
<pre><code class="language-java">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.rocketmq&lt;/groupId&gt;
    &lt;artifactId&gt;rocketmq-client&lt;/artifactId&gt;
    &lt;version&gt;4.3.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h2 id="4-arthas">4. Arthas</h2>
<p>Arthas æ¯Alibabaå¼æºçJavaè¯æ­å·¥å·ï¼æ·±åå¼åèåç±ã</p>
<p>å½ä½ éå°ä»¥ä¸ç±»ä¼¼é®é¢èæææ ç­æ¶ï¼Arthaså¯ä»¥å¸®å©ä½ è§£å³ï¼</p>
<ul>
<li>è¿ä¸ªç±»ä»åªä¸ª jar åå è½½çï¼ä¸ºä»ä¹ä¼æ¥åç§ç±»ç¸å³ç Exceptionï¼</li>
<li>ææ¹çä»£ç ä¸ºä»ä¹æ²¡ææ§è¡å°ï¼é¾éæ¯ææ²¡ commitï¼åæ¯æéäºï¼</li>
<li>éå°é®é¢æ æ³å¨çº¿ä¸ debugï¼é¾éåªè½éè¿å æ¥å¿åéæ°åå¸åï¼</li>
<li>çº¿ä¸éå°æä¸ªç¨æ·çæ°æ®å¤çæé®é¢ï¼ä½çº¿ä¸åæ ·æ æ³ debugï¼çº¿ä¸æ æ³éç°ï¼</li>
<li>æ¯å¦æä¸ä¸ªå¨å±è§è§æ¥æ¥çç³»ç»çè¿è¡ç¶åµï¼</li>
<li>æä»ä¹åæ³å¯ä»¥çæ§å°JVMçå®æ¶è¿è¡ç¶æï¼</li>
<li>æä¹å¿«éå®ä½åºç¨çç­ç¹ï¼çæç«ç°å¾ï¼</li>
<li>ææ ·ç´æ¥ä»JVMåæ¥æ¾æä¸ªç±»çå®ä¾ï¼</li>
</ul>
<p>åæä»£ç æ¶èæ¶é´ï¼<br>
<img alt="" loading="lazy" data-src="https://pic.imgdb.cn/item/615d0ce02ab3f51d91b99d3c.jpg" class="lazyload"><br>
Arthasæ¯æJDK 6+ï¼è½å¤è¿è¡å¨å¤ç§æä½ç³»ç»ä¸ï¼æ¯å¦ï¼Linux/Mac/Windowsï¼éç¨å½ä»¤è¡äº¤äºæ¨¡å¼ï¼åæ¶æä¾ä¸°å¯ç Tab èªå¨è¡¥å¨åè½ï¼è¿ä¸æ­¥æ¹ä¾¿è¿è¡é®é¢çå®ä½åè¯æ­ã</p>
<blockquote>
<p>githubå°å: <a href="https://alibaba.github.io/arthas/" target="_blank" rel="noopener nofollow">https://alibaba.github.io/arthas/</a></p>
</blockquote>
<blockquote>
<p>mavenä¸­å¤®ä»åº: <a href="https://mvnrepository.com/artifact/com.taobao.arthas/arthas-spring-boot-starter" target="_blank" rel="noopener nofollow">https://mvnrepository.com/artifact/com.taobao.arthas/arthas-spring-boot-starter</a></p>
</blockquote>
<p>å¨ç®æ æºå¨æ§è¡å¦ä¸å½ä»¤å³å¯å¯å¨arthasï¼</p>
<pre><code class="language-java">curl -O https://arthas.aliyun.com/arthas-boot.jar
java -jar arthas-boot.jar
</code></pre>
<h2 id="5-nacos">5. Nacos</h2>
<p>Nacosæ¯ä¸ä¸ªæäºä½¿ç¨çå¹³å°ï¼ä¸ä¸ºå¨ææå¡åç°åéç½®ä»¥åæå¡ç®¡çèè®¾è®¡ãå®å¯ä»¥å¸®å©æ¨è½»æ¾æå»ºäºåçåºç¨ç¨åºåå¾®æå¡å¹³å°ã</p>
<p>æå¡æ¯Nacosçä¸ç­å¬æ°ãNacos æ¯æå ä¹ææç±»åçæå¡ï¼ä¾å¦Dubbo/gRPC æå¡ãSpring Cloud RESTFul æå¡æKubernetes æå¡ã</p>
<p>Nacos æä¾äºåå¤§åè½ã</p>
<ul>
<li><code>æå¡åç°åæå¡å¥åº·æ£æ¥</code>ãNacos ä½¿æå¡éè¿ DNS æ HTTP æ¥å£æ³¨åèªå·±ååç°å¶ä»æå¡åå¾ç®åãNacos è¿æä¾æå¡çå®æ¶å¥åº·æ£æ¥ï¼ä»¥é²æ­¢åä¸å¥åº·çä¸»æºææå¡å®ä¾åéè¯·æ±ã</li>
<li><code>å¨æéç½®ç®¡ç</code>ãå¨æéç½®æå¡åè®¸æ¨å¨ææç¯å¢ä¸­ä»¥éä¸­åå¨æçæ¹å¼ç®¡çæææå¡çéç½®ãNacos æ éå¨æ´æ°éç½®æ¶éæ°é¨ç½²åºç¨ç¨åºåæå¡ï¼è¿ä½¿å¾éç½®æ´æ¹æ´å é«æåææ·ã</li>
<li><code>å¨æ DNS æå¡</code>ãNacos æ¯æå æè·¯ç±ï¼è®©æ¨æ´å®¹æå¨æ°æ®ä¸­å¿åççäº§ç¯å¢ä¸­å®ç°ä¸­å±è´è½½åè¡¡ãçµæ´»çè·¯ç±ç­ç¥ãæµéæ§å¶åç®åç DNS è§£ææå¡ãå®å¯ä»¥å¸®å©æ¨è½»æ¾å®ç°åºäº DNS çæå¡åç°ï¼å¹¶é²æ­¢åºç¨ç¨åºè¦åå°ç¹å®äºä¾åºåçæå¡åç° APIã</li>
<li><code>æå¡ååæ°æ®ç®¡ç</code>ãNacos æä¾äºä¸ä¸ªæäºä½¿ç¨çæå¡ä»ªè¡¨æ¿ï¼å¸®å©æ¨ç®¡çæ¨çæå¡åæ°æ®ãéç½®ãkubernetes DNSãæå¡å¥åº·åææ ç»è®¡ã</li>
</ul>
<p>Nacos å°å¾ï¼<br>
<img alt="" loading="lazy" data-src="https://pic.imgdb.cn/item/615d0cf42ab3f51d91b9caf9.jpg" class="lazyload"></p>
<p>Nacos çæå¾ï¼<br>
<img alt="" loading="lazy" data-src="https://pic.imgdb.cn/item/615d0d042ab3f51d91b9ebd2.jpg" class="lazyload"></p>
<blockquote>
<p>githubå°å: <a href="https://github.com/alibaba/nacos" target="_blank" rel="noopener nofollow">https://github.com/alibaba/nacos</a></p>
</blockquote>
<blockquote>
<p>mavenä¸­å¤®ä»åº: <a href="https://mvnrepository.com/artifact/com.alibaba.cloud/spring-cloud-starter-alibaba-nacos-discovery" target="_blank" rel="noopener nofollow">https://mvnrepository.com/artifact/com.alibaba.cloud/spring-cloud-starter-alibaba-nacos-discovery</a></p>
</blockquote>
<h2 id="6-easyexcel">6. easyexcel</h2>
<p>Javaè§£æãçæExcelæ¯è¾æåçæ¡æ¶æApache poiãjxlãä½ä»ä»¬é½å­å¨ä¸ä¸ªä¸¥éçé®é¢å°±æ¯éå¸¸çèåå­ï¼poiæä¸å¥SAXæ¨¡å¼çAPIå¯ä»¥ä¸å®ç¨åº¦çè§£å³ä¸äºåå­æº¢åºçé®é¢ï¼ä½POIè¿æ¯æä¸äºç¼ºé·ï¼æ¯å¦07çExcelè§£åç¼©ä»¥åè§£ååå­å¨é½æ¯å¨åå­ä¸­å®æçï¼åå­æ¶èä¾ç¶å¾å¤§ã</p>
<p>easyexceléåäºpoiå¯¹07çExcelçè§£æï¼ä¸ä¸ª3Mçexcelç¨POI saxè§£æä¾ç¶éè¦100Må·¦å³åå­ï¼æ¹ç¨easyexcelå¯ä»¥éä½å°å Mï¼å¹¶ä¸åå¤§çexcelä¹ä¸ä¼åºç°åå­æº¢åºï¼03çä¾èµPOIçsaxæ¨¡å¼ï¼å¨ä¸å±åäºæ¨¡åè½¬æ¢çå°è£ï¼è®©ä½¿ç¨èæ´å ç®åæ¹ä¾¿ã</p>
<p>64Måå­1åéåè¯»å75M(46Wè¡25å)çExcel</p>
<p><img alt="" loading="lazy" data-src="https://pic.imgdb.cn/item/615d0d132ab3f51d91ba0e43.jpg" class="lazyload"></p>
<blockquote>
<p>githubå°å: <a href="https://github.com/alibaba/easyexcel" target="_blank" rel="noopener nofollow">https://github.com/alibaba/easyexcel</a></p>
</blockquote>
<blockquote>
<p>mavenä¸­å¤®ä»åº: <a href="https://mvnrepository.com/artifact/com.alibaba/easyexcel" target="_blank" rel="noopener nofollow">https://mvnrepository.com/artifact/com.alibaba/easyexcel</a></p>
</blockquote>
<p>éç½®mavenä¾èµï¼</p>
<pre><code class="language-java">&lt;dependency&gt;
    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
    &lt;artifactId&gt;easyexcel&lt;/artifactId&gt;
    &lt;version&gt;2.2.6&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h2 id="7-sentinel">7. Sentinel</h2>
<p>éçåå¸å¼ç³»ç»åå¾è¶æ¥è¶æµè¡ï¼æå¡ä¹é´çå¯é æ§åå¾æ¯ä»¥å¾ä»»ä½æ¶åé½æ´å éè¦ã</p>
<p>Sentinelä»¥âæµéâä¸ºåå¥ç¹ï¼å¨æµéæ§å¶ã æµéæ´å½¢ãçæ­ãç³»ç»èªéåºä¿æ¤ç­å¤ä¸ªé¢åå¼å±å·¥ä½ï¼ä¿éå¾®æå¡çå¯é æ§åå¼¹æ§ã</p>
<p>Sentinelå·æä»¥ä¸ç¹ç¹ï¼</p>
<ul>
<li><code>ä¸°å¯çéç¨åºæ¯</code>ï¼Sentinelå¨é¿éå·´å·´å¾å°äºå¹¿æ³çåºç¨ï¼å ä¹è¦çäºè¿10å¹´å11ï¼11.11ï¼è´­ç©èçæææ ¸å¿åºæ¯ï¼æ¯å¦éè¦éå¶çªåæµéçâç§æâæ»¡è¶³ç³»ç»å®¹éãæ¶æ¯åå³°å¡«è°·ãä¸æ¸¸ä¸å¯é ä¸å¡æ­è·¯ãéç¾¤æµéæ§å¶ç­ã</li>
<li><code>å®æ¶çæ§</code>ï¼Sentinel è¿æä¾å®æ¶çæ§è½åãå¯ä»¥å®æ¶æ¥çåå°æºå¨çè¿è¡æ¶ä¿¡æ¯ï¼ä»¥å500ä¸ªèç¹ä»¥ä¸éç¾¤çè¿è¡æ¶ä¿¡æ¯æ±æ»ã</li>
<li><code>å¹¿æ³çå¼æºçæç³»ç»</code>ï¼Sentinel æä¾ä¸ Spring CloudãDubbo å gRPC ç­å¸¸ç¨æ¡æ¶ååºçå¼ç®±å³ç¨éæãæ¨åªéå°ééå¨ä¾èµé¡¹æ·»å å°æ¨çæå¡å³å¯è½»æ¾ä½¿ç¨ Sentinelã</li>
<li><code>å¤è¯­è¨æ¯æ</code>ï¼Sentinel ä¸º JavaãGoåC++æä¾äºæ¬æºæ¯æã</li>
<li><code>ä¸°å¯çSPIæ©å±</code>ï¼Sentinelæä¾ç®åæç¨çSPIæ©å±æ¥å£ï¼å¯ä»¥è®©æ¨å¿«éèªå®ä¹é»è¾ï¼ä¾å¦èªå®ä¹è§åç®¡çãééæ°æ®æºç­ã</li>
</ul>
<p>åè½æ¦è¿°ï¼<br>
<img alt="" loading="lazy" data-src="https://pic.imgdb.cn/item/615d0d242ab3f51d91ba339c.jpg" class="lazyload"></p>
<p>çæç³»ç»æ¯è§ï¼<br>
<img alt="" loading="lazy" data-src="https://pic.imgdb.cn/item/615d0d322ab3f51d91ba525b.jpg" class="lazyload"></p>
<blockquote>
<p>githubå°å: <a href="https://github.com/alibaba/Sentinel" target="_blank" rel="noopener nofollow">https://github.com/alibaba/Sentinel</a></p>
</blockquote>
<blockquote>
<p>mavenä¸­å¤®ä»åº: <a href="https://mvnrepository.com/artifact/com.alibaba.csp/sentinel-core" target="_blank" rel="noopener nofollow">https://mvnrepository.com/artifact/com.alibaba.csp/sentinel-core</a></p>
</blockquote>
<p>éç½®mavenä¾èµï¼</p>
<pre><code class="language-java">&lt;dependency&gt;
    &lt;groupId&gt;com.alibaba.csp&lt;/groupId&gt;
    &lt;artifactId&gt;sentinel-core&lt;/artifactId&gt;
    &lt;version&gt;1.8.2&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h2 id="8-otter">8. otter</h2>
<p>é¿éå·´å·´B2Bå¬å¸ï¼å ä¸ºä¸å¡çç¹æ§ï¼åå®¶ä¸»è¦éä¸­å¨å½åï¼ä¹°å®¶ä¸»è¦éä¸­å¨å½å¤ï¼æä»¥è¡çåºäºæ­å·åç¾å½å¼å°æºæ¿çéæ±ï¼åæ¶ä¸ºäºæåç¨æ·ä½éªï¼æ´ä¸ªæºæ¿çæ¶æä¸ºåAï¼ä¸¤è¾¹åå¯åï¼ç±æ­¤è¯çäºotterè¿æ ·ä¸ä¸ªäº§åã</p>
<p>otterç¬¬ä¸çæ¬å¯è¿½æº¯å°04~05å¹´ï¼æ­¤æ¬¡å¤é¨å¼æºççæ¬ä¸ºç¬¬4çï¼å¼åæ¶é´ä»2011å¹´7æä»½ä¸ç´æç»­å°ç°å¨ï¼ç®åé¿éå·´å·´B2Båé¨çæ¬å°/å¼å°æºæ¿çåæ­¥éæ±åºæ¬å¨ä¸äºotte4ã</p>
<p>ç®ååæ­¥è§æ¨¡ï¼</p>
<ul>
<li>åæ­¥æ°æ®é6äº¿</li>
<li>æä»¶åæ­¥1.5TB(2000wå¼ å¾ç)</li>
<li>æ¶å200+ä¸ªæ°æ®åºå®ä¾ä¹é´çåæ­¥</li>
<li>80+å°æºå¨çéç¾¤è§æ¨¡</li>
</ul>
<p>otterè½è§£å³ä»ä¹ï¼</p>
<ul>
<li>
<p><code>å¼æåºåæ­¥</code>ã mysql -&gt; mysql/oracle. (ç®åå¼æºçæ¬åªæ¯æmysqlå¢éï¼ç®æ åºå¯ä»¥æ¯mysqlæèoracleï¼åå³äºcanalçåè½)</p>
</li>
<li>
<p><code>åæºæ¿åæ­¥</code> (æ°æ®åºä¹é´RTT &lt; 1ms)</p>
<p>a. æ°æ®åºçæ¬åçº§</p>
<p>b. æ°æ®è¡¨è¿ç§»</p>
<p>c. å¼æ­¥äºçº§ç´¢å¼</p>
</li>
<li>
<p><code>å¼å°æºæ¿åæ­¥</code> (æ¯å¦é¿éå·´å·´å½éç«å°±æ¯æ­å·åç¾å½æºæ¿çæ°æ®åºåæ­¥ï¼RTT &gt; 200msï¼äº®ç¹)</p>
<p>a. æºæ¿å®¹ç¾</p>
</li>
<li>
<p><code>åååæ­¥</code></p>
<p>a. é¿ååç¯ç®æ³ (éç¨çè§£å³æ¹æ¡ï¼æ¯æå¤§é¨åå³ç³»åæ°æ®åº)</p>
<p>b. æ°æ®ä¸è´æ§ç®æ³ (ä¿è¯åAæºæ¿æ¨¡å¼ä¸ï¼æ°æ®ä¿è¯æç»ä¸è´æ§ï¼äº®ç¹)</p>
</li>
<li>
<p><code>æä»¶åæ­¥</code><br>
ç«ç¹éå (è¿è¡æ°æ®å¤å¶çåæ¶ï¼å¤å¶å³èçå¾çï¼æ¯å¦å¤å¶äº§åæ°æ®ï¼åæ¶å¤å¶äº§åå¾ç).</p>
</li>
</ul>
<p>å·¥ä½åçå¾ï¼<br>
<img alt="" loading="lazy" data-src="https://pic.imgdb.cn/item/615d0d442ab3f51d91ba7ca8.jpg" class="lazyload"></p>
<p>åæºæ¿å¤å¶ç¤ºæå¾ï¼<br>
<img alt="" loading="lazy" data-src="https://pic.imgdb.cn/item/615d0d512ab3f51d91ba9a07.jpg" class="lazyload"></p>
<p>å¼å°æºæ¿å¤å¶ç¤ºæå¾ï¼<br>
<img alt="" loading="lazy" data-src="https://pic.imgdb.cn/item/615d0d612ab3f51d91baba8d.jpg" class="lazyload"></p>
<blockquote>
<p>githubå°å: <a href="https://github.com/alibaba/otter" target="_blank" rel="noopener nofollow">https://github.com/alibaba/otter</a></p>
</blockquote>
<blockquote>
<p>mavenä¸­å¤®ä»åº: <a href="https://mvnrepository.com/artifact/com.alibaba.otter/canal.client" target="_blank" rel="noopener nofollow">https://mvnrepository.com/artifact/com.alibaba.otter/canal.client</a></p>
</blockquote>
<h2 id="9-p3c">9. P3C</h2>
<p>P3Cæä»¶åç°äºé¿éå·´å·´ Java ç¼ç æåï¼å®æ´åäºé¿éå·´å·´éå¢ææ¯å¢éå¤å¹´æ¥çæä½³ç¼ç¨å®è·µãç±äºæä»¬é¼å±éç¨åæ´å¥½å°çè§£å½¼æ­¤çç¨åºï¼å æ­¤å¤§é Java ç¼ç¨å¢éå¯¹è·¨é¡¹ç®çä»£ç è´¨éæåºäºèå»çè¦æ±ã</p>
<p>é¿éå·´å·´è¿å»è§è¿å¾å¤ç¼ç¨é®é¢ãä¾å¦ï¼æç¼ºé·çæ°æ®åºè¡¨ç»æåç´¢å¼è®¾è®¡å¯è½ä¼å¯¼è´è½¯ä»¶æ¶æç¼ºé·åæ§è½é£é©ãå¦ä¸ä¸ªä¾å­æ¯æ··ä¹±çä»£ç ç»æé¾ä»¥ç»´æ¤ãæ­¤å¤ï¼æªç»èº«ä»½éªè¯çæåæ»å»çä»£ç å®¹æåå°é»å®¢çæ»å»ãä¸ºäºè§£å³è¿äºé®é¢ï¼æä»¬ä¸ºé¿éå·´å·´çJavaå¼åäººåç¼åäºè¿ä»½ææ¡£ã</p>
<p>æ´å¤ä¿¡æ¯è¯·åèé¿éå·´å·´Javaç¼ç æåï¼</p>
<ul>
<li>ä¸­æçï¼é¿éå·´å·´Javaå¼åæå</li>
<li>è±æçï¼Alibaba Java Coding Guidelines</li>
</ul>
<p>è¯¥é¡¹ç®ç±3é¨åç»æï¼</p>
<ul>
<li>PMD å®ç°</li>
<li>IntelliJ IDEA æä»¶</li>
<li>Eclipse æä»¶</li>
</ul>
<p>ååä¹æ¡è§åæ¯åºäºPMDå®ç°çï¼æ´å¤è¯¦ç»ä¿¡æ¯è¯·åèP3C-PMDææ¡£ãIDE æä»¶ï¼IDEA å Eclipseï¼ä¸­å®ç°çåä¸ªè§åå¦ä¸ï¼</p>
<ul>
<li>
<p>[Mandatory]ç¦æ­¢ä½¿ç¨å·²å¼ç¨çç±»ææ¹æ³ã<br>
æ³¨æï¼ä¾å¦ï¼åºè¯¥ä½¿ç¨ decode(String source, String encode) èä¸æ¯ä¸æ¨èä½¿ç¨çæ¹æ³ decode(String encodeStr)ãä¸æ¦æ¥å£è¢«å¼ç¨ï¼æ¥å£æä¾èå°±æä¹å¡æä¾ä¸ä¸ªæ°çæ¥å£ãåæ¶ï¼å®¢æ·ç«¯ç¨åºåæä¹å¡æ£æ¥å®çæ°å®ç°æ¯ä»ä¹ã</p>
</li>
<li>
<p>[Mandatory]æ¥èªæ¥å£ææ½è±¡ç±»çéåæ¹æ³å¿é¡»ç¨ @Override æ³¨éæ è®°ãåä¾ï¼å¯¹äº getObject() å get0bject()ï¼ç¬¬ä¸ä¸ªæ¯å­æ¯âOâï¼ç¬¬äºä¸ªæ¯æ°å­â0âãä¸ºäºåç¡®å¤æ­è¦çæ¯å¦æåï¼éè¦ä¸ä¸ª@Overrideæ³¨è§£ãåæ¶ï¼ä¸æ¦æ½è±¡ç±»ä¸­çæ¹æ³ç­¾ååçååï¼å®ç°ç±»å°ç«å³æ¥åç¼è¯æ¶éè¯¯ã</p>
</li>
<li>
<p>[Mandatory] éæå­æ®µææ¹æ³åºç´æ¥éè¿å¶ç±»åèä¸æ¯å¶å¯¹åºçå¯¹è±¡åæ¥å¼ç¨ã</p>
</li>
<li>
<p>[Mandatory] hashCode å equals çç¨æ³åºè¯¥éµå¾ªï¼</p>
</li>
</ul>
<ol>
<li>å¦æ equals è¢«è¦çï¼åè¦ç hashCodeã</li>
<li>è¿ä¸¤ä¸ªæ¹æ³å¿é¡»ä¸º Set éåï¼å ä¸ºå®ä»¬ç¨äºç¡®ä¿ä¸ä¼å¨ Set ä¸­æå¥éå¤çå¯¹è±¡ã</li>
<li>å¦æä½¿ç¨èªå®ä¹å¯¹è±¡ä½ä¸º Map çé®ï¼åå¿é¡»è¦çè¿ä¸¤ä¸ªæ¹æ³ãæ³¨æï¼String å¯ä»¥ç¨ä½ Map çé®ï¼å ä¸ºè¿ä¸¤ä¸ªæ¹æ³å·²ç»è¢«éåã</li>
</ol>
<p>ä½¿ç¨p3cæä»¶çææï¼</p>
<p><img alt="" loading="lazy" data-src="https://pic.imgdb.cn/item/615d0d742ab3f51d91bae1df.jpg" class="lazyload"></p>
<p>ææ°çé¿éå·´å·´Javaå¼åæåä¸è½½å°åï¼<br>
<a href="https://github.com/alibaba/p3c/blob/master/Java%E5%BC%80%E5%8F%91%E6%89%8B%E5%86%8C%EF%BC%88%E5%B5%A9%E5%B1%B1%E7%89%88%EF%BC%89.pdf" target="_blank" rel="noopener nofollow">https://github.com/alibaba/p3c/blob/master/Javaå¼åæåï¼åµ©å±±çï¼.pdf</a></p>
<blockquote>
<p>githubå°å:<a href="https://github.com/alibaba/p3c/tree/master/idea-plugin" target="_blank" rel="noopener nofollow">https://github.com/alibaba/p3c/tree/master/idea-plugin</a></p>
</blockquote>
<h2 id="10-spring-cloud-alibaba">10. Spring Cloud Alibaba</h2>
<p>Spring Cloud Alibaba ä¸ºåå¸å¼åºç¨å¼åæä¾ä¸ç«å¼è§£å³æ¹æ¡ãå®åå«å¼ååå¸å¼åºç¨ç¨åºæéçææç»ä»¶ï¼ä½¿æ¨å¯ä»¥è½»æ¾å°ä½¿ç¨ Spring Cloud å¼ååºç¨ç¨åºã</p>
<p>ä½¿ç¨Spring Cloud Alibabaï¼æ¨åªéæ·»å ä¸äºæ³¨è§£åå°ééç½®ï¼å³å¯å°Spring Cloudåºç¨è¿æ¥å°é¿éå·´å·´çåå¸å¼è§£å³æ¹æ¡ï¼å¹¶éè¿é¿éå·´å·´ä¸­é´ä»¶æå»ºåå¸å¼åºç¨ç³»ç»ã</p>
<p>ä¸»è¦åè½å¦ä¸ï¼</p>
<ul>
<li><code>æµéæ§å¶åæå¡éçº§</code>ï¼é»è®¤æ¯æ HTTP æå¡çæµéæ§å¶ãæ¨è¿å¯ä»¥ä½¿ç¨æ³¨éèªå®ä¹æµéæ§å¶åæå¡éçº§è§åãè§åå¯ä»¥å¨ææ´æ¹ã</li>
<li><code>æå¡æ³¨åååç°</code>ï¼å¯ä»¥æ³¨åæå¡ï¼å®¢æ·ç«¯å¯ä»¥ä½¿ç¨ Spring ç®¡çç beanï¼èªå¨éæ Ribbon æ¥åç°å®ä¾ã</li>
<li><code>åå¸å¼éç½®</code>ï¼æ¯æåå¸å¼ç³»ç»ä¸­çå¤åéç½®ï¼éç½®ååæ¶èªå¨å·æ°ã</li>
<li><code>äºä»¶é©±å¨</code>ï¼æ¯ææå»ºä¸å±äº«æ¶æ¯ç³»ç»è¿æ¥çé«åº¦å¯æ©å±çäºä»¶é©±å¨å¾®æå¡ã</li>
<li><code>åå¸å¼äºå¡</code>ï¼æ¯æé«æ§è½ãæç¨çåå¸å¼äºå¡è§£å³æ¹æ¡ã</li>
<li><code>é¿éäºå¯¹è±¡å­å¨</code>ï¼æµ·éãå®å¨ãä½ææ¬ãé«å¯é çäºå­å¨æå¡ãæ¯æéæ¶éå°å¨ä»»ä½åºç¨ç¨åºä¸­å­å¨åè®¿é®ä»»ä½ç±»åçæ°æ®ã</li>
<li><code>é¿éäºSchedulerX</code>ï¼ç²¾åãé«å¯é ãé«å¯ç¨çå®æ¶ä½ä¸è°åº¦æå¡ï¼ååºæ¶é´ç§çº§ã</li>
<li><code>é¿éäºç­ä¿¡</code>ï¼è¦çå¨ççç­ä¿¡æå¡ï¼é¿éç­ä¿¡æä¾ä¾¿æ·ãé«æãæºè½çéè®¯è½åï¼å¸®å©ä¼ä¸å¿«éèç³»å®¢æ·ã</li>
</ul>
<p>ä¸»è¦åå«å¦ä¸ç»ä»¶ï¼</p>
<ul>
<li><code>Sentinel</code>ï¼ææµéä½ä¸ºåå¥ç¹ï¼ä»æµéæ§å¶ãçæ­éçº§ãç³»ç»è´è½½ä¿æ¤ç­å¤ä¸ªç»´åº¦ä¿æ¤æå¡çç¨³å®æ§ã</li>
<li><code>Nacos</code>ï¼ä¸ä¸ªæ´æäºæå»ºäºåçåºç¨çå¨ææå¡åç°ãéç½®ç®¡çåæå¡ç®¡çå¹³å°ã</li>
<li><code>RocketMQ</code>ï¼ä¸æ¬¾å¼æºçåå¸å¼æ¶æ¯ç³»ç»ï¼åºäºé«å¯ç¨åå¸å¼éç¾¤ææ¯ï¼æä¾ä½å»¶æ¶çãé«å¯é çæ¶æ¯åå¸ä¸è®¢éæå¡ã</li>
<li><code>Dubbo</code>ï¼Apache Dubboâ¢ æ¯ä¸æ¬¾é«æ§è½ Java RPC æ¡æ¶ã</li>
<li><code>Seata</code>ï¼é¿éå·´å·´å¼æºäº§åï¼ä¸ä¸ªæäºä½¿ç¨çé«æ§è½å¾®æå¡åå¸å¼äºå¡è§£å³æ¹æ¡ã</li>
<li><code>Alibaba Cloud OSS</code>: é¿éäºå¯¹è±¡å­å¨æå¡ï¼Object Storage Serviceï¼ç®ç§° OSSï¼ï¼æ¯é¿éäºæä¾çæµ·éãå®å¨ãä½ææ¬ãé«å¯é çäºå­å¨æå¡ãæ¨å¯ä»¥å¨ä»»ä½åºç¨ãä»»ä½æ¶é´ãä»»ä½å°ç¹å­å¨åè®¿é®ä»»æç±»åçæ°æ®ã</li>
<li><code>Alibaba Cloud SchedulerX</code>: é¿éä¸­é´ä»¶å¢éå¼åçä¸æ¬¾åå¸å¼ä»»å¡è°åº¦äº§åï¼æä¾ç§çº§ãç²¾åãé«å¯é ãé«å¯ç¨çå®æ¶ï¼åºäº Cron è¡¨è¾¾å¼ï¼ä»»å¡è°åº¦æå¡ã</li>
<li><code>Alibaba Cloud SMS</code>: è¦çå¨ççç­ä¿¡æå¡ï¼åå¥½ãé«æãæºè½çäºèåéè®¯è½åï¼å¸®å©ä¼ä¸è¿éæ­å»ºå®¢æ·è§¦è¾¾ééã</li>
</ul>
<blockquote>
<p>githubå°å: <a href="https://github.com/alibaba/spring-cloud-alibaba" target="_blank" rel="noopener nofollow">https://github.com/alibaba/spring-cloud-alibaba</a></p>
</blockquote>
<p>éç½®mavenä¾èµï¼</p>
<pre><code class="language-java">&lt;dependencyManagement&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;
            &lt;artifactId&gt;spring-cloud-alibaba-dependencies&lt;/artifactId&gt;
            &lt;version&gt;2.2.6.RELEASE&lt;/version&gt;
            &lt;type&gt;pom&lt;/type&gt;
            &lt;scope&gt;import&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;
</code></pre>
<h2 id="æåè¯´ä¸å¥æ±å³æ³¨å«ç½å«æ">æåè¯´ä¸å¥(æ±å³æ³¨ï¼å«ç½å«æ)</h2>
<p>å¦æè¿ç¯æç« å¯¹æ¨ææå¸®å©ï¼æèææå¯åçè¯ï¼å¸®å¿å³æ³¨ä¸ä¸æçååå¬ä¼å·ï¼èä¸è¯´ææ¯ï¼æ¨çæ¯ææ¯æåæåä½æå¤§çå¨åã</p>
<p>æ±ä¸é®ä¸è¿ï¼ç¹èµãè½¬åãå¨çã</p>
<p>å³æ³¨å¬ä¼å·ï¼ãèä¸è¯´ææ¯ãï¼å¨å¬ä¼å·ä¸­åå¤ï¼è¿å¤§åï¼å¯ä»¥åè´¹è·åææè¿æ´çç10ä¸å­çé¢è¯å®å¸ï¼å¥½å¤å°ä¼ä¼´é è¿ä¸ªå®å¸æ¿å°äºå¤å®¶å¤§åçofferã</p>
<p>æ´å¤é¡¹ç®å®æå¨æçææ¯ç½ç«ï¼<a href="http://www.susan.net.cn/project" target="_blank" rel="noopener nofollow">http://www.susan.net.cn/project</a></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-08 14:36">2026-01-08 14:35</span>&nbsp;
<a href="https://www.cnblogs.com/12lisu">èä¸è¯´ææ¯</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19456855);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19456855', targetLink: 'https://www.cnblogs.com/12lisu/p/19456855', title: 'å¼ºçæ¨è | é¿éå¼æºçè¿10ä¸ªç¥çº§é¡¹ç®' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ 2026 å¹´ PHP çä¸å¤§ä¼å¿ è¿é¨"èå°"ä¸ºä½ä¾ç¶éè¦ ]]></title>
    <link>https://www.cnblogs.com/catchadmin/p/19454737</link>
    <guid>b8e1d775b4caea208155e970b378a6b7</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/catchadmin/p/19454737" title="åå¸äº 2026-01-08 08:16">
    <span role="heading" aria-level="2">2026 å¹´ PHP çä¸å¤§ä¼å¿ è¿é¨"èå°"ä¸ºä½ä¾ç¶éè¦</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="2026-å¹´-php-çä¸å¤§ä¼å¿-è¿é¨èå°ä¸ºä½ä¾ç¶éè¦">2026 å¹´ PHP çä¸å¤§ä¼å¿ è¿é¨"èå°"ä¸ºä½ä¾ç¶éè¦</h1>
<p>PHP "å¿«æ­»äº"è¿å¥è¯åäºè¿ä¹å¤å¹´ï¼å¦æçææ¥ä¸ï¼å®çç®ååºè¯¥å·²ç»ç¸å½å¯è§äºã</p>
<p>ä½ å¤§æ¦è§è¿è¿äºè®ºè°ï¼"PHP è¿æ¶äº"ã"ç°å¨æ²¡äººç¨ PHP åæ­£ç»ç³»ç»äº"ã"åªæèé¡¹ç®è¿å¨ç¨"ãè¿äºè¯´æ³ä¹ä¸ç®å¨éââç¡®å®æå¤§ééç PHP ä»£ç å¨è¿è¡ãä½è¿æå¦ä¸ä¸ªç°å®å¾å°è¢«æåï¼PHP ä»ç¶å¨é©±å¨å¤§éçäº§ç¯å¢çåç«¯ç³»ç»ï¼æ°ç PHP é¡¹ç®ä¹å¨ä¸æ­åºç°ï¼å ä¸ºå¢éæ³è¦çä¸è¥¿åäºå¹´ãåå¹´åä¸æ ·ï¼</p>
<ul>
<li>å¯é¢æµçé¨ç½²æµç¨</li>
<li>å¿«éè¿­ä»£</li>
<li>æçççæ</li>
<li>è½å¤ç»åå¤äººåä½ãå¤å¹´ç»´æ¤çå¯è¯»ä»£ç </li>
</ul>
<p>æåæ¬¢è¿ç±»é®é¢ï¼å ä¸ºå®é¼ä½ æè¯è¯´æ¸æ¥ãä¸æ¯"æåæ¬¢ç¨"ï¼ä¸æ¯"å®å¾æµè¡"ï¼èæ¯ä½ å¨çäº§ä»£ç ä¸­è½å®éæåºçå·¥ç¨ä¼å¿ã</p>
<p>ä¸é¢æ¯æçåç­ï¼åç»ä¸¤ç±»è¯»èï¼</p>
<ul>
<li><strong>å¦æä½ åæ¥è§¦åç«¯å¼å</strong>ï¼ä½ ä¼å¾å°ä¸ä¸ªæ¸æ°çå¿æºæ¨¡åï¼çè§£ PHP ä¸ºä½ä»ç¶éå Web ç³»ç»ã</li>
<li><strong>å¦æä½ ç»éªä¸°å¯</strong>ï¼ä½ ä¼çå°ç°ä»£ PHP å®è·µï¼ç±»åãéæåæãæ¸æ°è¾¹çãå¡å®ç API æ¨¡å¼ï¼å¦ä½æ"PHP å®¹æä¸æ"åæ"PHP å¯é "ã</li>
</ul>
<p>æä¼å°½éç¨å¹³å®çè¯­è¨ï¼ä½ä¸ä¼åé¿ææ¯ç»èãçå®çç³»ç»æ¬æ¥å°±æ¯ææ¯æ§çãç®æ æ¯è®©è¿äºææ¯åå®¹åå¾ææä¸å®ç¨ã</p>
<p><a href="https://catchadmin.com/post/2026-01/php-3-biggest-strengths-2026" target="_blank" rel="noopener nofollow">åæ 2026 å¹´ PHP çä¸å¤§ä¼å¿ è¿é¨"èå°"ä¸ºä½ä¾ç¶éè¦</a></p>
<h2 id="ä»ä¹æ¯ä¼å¿å¨çå®åç«¯å·¥ä½ä¸­çå®ä¹">ä»ä¹æ¯"ä¼å¿"ï¼å¨çå®åç«¯å·¥ä½ä¸­çå®ä¹</h2>
<p>å¼åèæ¯è¾è¯­è¨æ¶ï¼è®¨è®ºç»å¸¸è·åå°æ§è½åºåãè¯­æ³åå¥½æèäºèç½æåãä½å½ä½ å¨æå»º API æ Web åç«¯æ¶ï¼"ä¼å¿"éå¸¸æå³çä¸äºæ´æ èââä¹æ´éè¦çä¸è¥¿ï¼</p>
<ul>
<li>è½å¦å¿«éäº¤ä»åè½èä¸åä¸ç»´æ¤é·é±ï¼</li>
<li>è½å¦éææ°æ®åºãéååç¬¬ä¸æ¹ API èä¸ä»å¤´é è½®å­ï¼</li>
<li>è½å¦å¤çæ··ä¹±çæ°æ®åè¾¹ç¼æåµèä¸æä»£ç åæé¬¼å±ï¼</li>
</ul>
<p>è¿å°±æ¯ PHP ææé¿çé¢åãä¸æ¯å ä¸ºå®æä¼éï¼èæ¯å ä¸ºå®çå½¢ç¶åå¥½å¥åå¤§å¤æ° Web åç«¯ã</p>
<p>å¸¦çè¿ä¸ªæè·¯ï¼æ¥ç PHP å¨ 2026 å¹´çä¸å¤§ä¼å¿ã</p>
<h2 id="ä¼å¿ä¸web-åçççäº§åphp-å¤©ç¶å¥å-http-ä¸ç">ä¼å¿ä¸ï¼Web åçççäº§åï¼PHP å¤©ç¶å¥å HTTP ä¸çï¼</h2>
<p>å¤§å¤æ°åç«¯é½æ¯ HTTP æºå¨ãè¿ä¸æ¯æ¯å»ï¼èæ¯æ¥å¸¸å·¥ä½ï¼</p>
<ul>
<li>è¯·æ±è¿æ¥</li>
<li>æ ¡éªå¹¶è§èå</li>
<li>è°ç¨æå¡ / æ°æ®åº / å¤é¨ API</li>
<li>è¿å JSON</li>
<li>è®°å½æ¥å¿åè¿½è¸ª</li>
<li>å¾ªç¯</li>
</ul>
<p>PHP çç¬¬ä¸ä¸ªä¼å¿æ¯å®å¨è¿ä¸ªå¾ªç¯éæè§å¾èªç¶ãä½ ä¸éè¦å¨å¤çè¯·æ±ä¹å"æ­å»ºä¸ç"ãPHP çé»è®¤æ¨¡åå°±æ¯é¢å Web çï¼è¿ä¸ç¹å¾å¾è¢«ä½ä¼°äºã</p>
<h3 id="ç»å¸ç-php-æ§è¡æ¨¡åä¸ºä½ä»ç¶æç¨">ç»å¸ç PHP æ§è¡æ¨¡åä¸ºä½ä»ç¶æç¨</h3>
<p>PHP ä¼ ç»çè¯·æ±çå½å¨æå¾ç®åï¼</p>
<ol>
<li>å¼å§è¯·æ±</li>
<li>è¿è¡ä»£ç </li>
<li>è¿åååº</li>
<li>ç»æè¯·æ±</li>
</ol>
<p>ç¶åä¸ä¸ä¸ªè¯·æ±ä»å¤´å¼å§ã</p>
<p>æäººæè¿å½æç¸å¯¹äºé¿é©»æå¡å¨çå£å¿ï¼ä½å¨å®è·µä¸­å®å¾å¾æ¯ä¼å¿ï¼</p>
<ul>
<li>åå­æ³æ¼ä¸ä¼é£ä¹è´å½ï¼å ä¸ºè¿ç¨ä¼åæ¶ã</li>
<li>æ¯ä¸ªè¯·æ±å¤©ç¶éç¦»ã</li>
<li>ä¸å¤ªå¯è½æå¤ä¾èµåå­ç¶æã</li>
<li>è°è¯å¾å¾æ´ç®åï¼å ä¸ºæ¯ä¸ªè¯·æ±ææ¸æ°çè¾¹çã</li>
</ul>
<p>ä½ ä¹å¯ä»¥ç¨é¿é©»æ¨¡å¼è· PHPï¼RoadRunnerãSwoole ç­ï¼ï¼å®ä»¬å¨ç¹å®åºæ¯ä¸ç¡®å®å¾å¥½ãä½ç»å¸æ¨¡åå¯¹è®¸å¤ API ä»ç¶æ¯å¯é çé»è®¤éæ©ï¼å ä¸ºå®ç¨³å®ä¸å¯¹è¿ç»´åå¥½ã</p>
<h3 id="ä¸ä¸ªçº¯-phpç-api-å¥å£å±ç¤ºåºæ¬å½¢æ">ä¸ä¸ª"çº¯ PHP"ç API å¥å£ï¼å±ç¤ºåºæ¬å½¢æï¼</h3>
<p>å³ä½¿ä½ å¨çäº§ç¯å¢ä½¿ç¨ Laravel æ Symfonyï¼å¤§å¤æ°æ­£ç»åºç¨ç¡®å®è¯¥ç¨ï¼ï¼çç PHP ä¸ºä½å¨ Web å·¥ä½ä¸­é«æè¿æ¯æå¸®å©çã</p>
<pre><code class="language-php">&lt;?php
declare(strict_types=1);
require __DIR__ . '/../vendor/autoload.php';
header('Content-Type: application/json; charset=utf-8');
$method = $_SERVER['REQUEST_METHOD'] ?? 'GET';
$path = parse_url($_SERVER['REQUEST_URI'] ?? '/', PHP_URL_PATH) ?: '/';
function jsonResponse(array $payload, int $status = 200): void {
    http_response_code($status);
    echo json_encode($payload, JSON_UNESCAPED_UNICODE | JSON_UNESCAPED_SLASHES);
    exit;
}
function readJsonBody(): array {
    $raw = file_get_contents('php://input') ?: '';
    $data = json_decode($raw, true);
    return is_array($data) ? $data : [];
}
if ($method === 'GET' &amp;&amp; $path === '/health') {
    jsonResponse(['ok' =&gt; true, 'time' =&gt; date(DATE_ATOM)]);
}
if ($method === 'POST' &amp;&amp; $path === '/users') {
    $body = readJsonBody();
    $email = strtolower(trim((string)($body['email'] ?? '')));
    $name  = trim((string)($body['name'] ?? ''));
    if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
        jsonResponse(['error' =&gt; 'Invalid email'], 422);
    }
    if ($name === '') {
        jsonResponse(['error' =&gt; 'Name is required'], 422);
    }
    $id = random_int(1000, 9999);
    jsonResponse(['id' =&gt; $id, 'email' =&gt; $email, 'name' =&gt; $name], 201);
}
jsonResponse(['error' =&gt; 'Not found'], 404);
</code></pre>
<p>è¿ä¸æ¯"æä½³å®è·µæ¶æ"ï¼ä½å®æ¼ç¤ºäºæ ¸å¿ææ³ï¼PHP ç Web å¾ªç¯ç´æ¥ä¸ææãè¿å°±æ¯åºç¡ççäº§åä¼å¿ã</p>
<h3 id="å¿«ä¸ä¹±çåºå«è-handlerçæå¡">"å¿«"ä¸"ä¹±"çåºå«ï¼è handlerï¼çæå¡</h3>
<p>PHP ç Web çäº§åè¦æä¸ºé¿æä¼å¿ï¼åææ¯ä¿æè¾¹çæ¸æ°ãæå®¹æå¤±å»è¿ä¸ªä¼å¿çæ¹å¼å°±æ¯æææä¸è¥¿é½å¡è¿æ§å¶å¨ã</p>
<p>ä¸ä¸ªå¯æ©å±çæ¨¡å¼ï¼</p>
<ul>
<li><strong>Handler / æ§å¶å¨</strong>ï¼è§£ç è¯·æ±ãè°ç¨æå¡ãç¼ç ååº</li>
<li><strong>æå¡</strong>ï¼ä¸å¡é»è¾ + ç¼æ</li>
<li><strong>Repository / Client</strong>ï¼å­å¨ + å¤é¨ API è°ç¨</li>
</ul>
<p>è¿æ¯ä¸ä¸ªä¸æ¡æ¶æ å³çå°ä¾å­ï¼</p>
<pre><code class="language-php">final class CreateUserHandler
{
    public function __construct(
        private readonly UserService $service
    ) {}
    public function __invoke(array $body): array
    {
        $input = CreateUserInput::fromArray($body);
        $user  = $this-&gt;service-&gt;create($input);
        return UserResource::toArray($user);
    }
}
</code></pre>
<p>Handler è¯»èµ·æ¥åä¸æ®µåè¿°ãè¿å°±å¯¹äºã</p>
<p>ç°å¨æå¡æ¥åçæ­£çå³ç­ï¼</p>
<pre><code class="language-php">final class UserService
{
    public function __construct(
        private readonly UserRepository $users
    ) {}
    public function create(CreateUserInput $input): User
    {
        if ($this-&gt;users-&gt;existsByEmail($input-&gt;email)) {
            throw new DomainException('Email already registered');
        }
        $user = User::register($input-&gt;email, $input-&gt;name);
        $this-&gt;users-&gt;save($user);
        return $user;
    }
}
</code></pre>
<p>è¿ä¸ªç»æå¹¶ä¸è±å¨ï¼ä½å®è½é²æ­¢ä»£ç åºå¨å­ä¸ªæååææå¤§å©é¢ã</p>
<h3 id="çå®ä¸çç-api-å·¥ä½è¶æ¶åéè¯æ¯åè½çä¸é¨å">çå®ä¸çç API å·¥ä½ï¼è¶æ¶åéè¯æ¯åè½çä¸é¨å</h3>
<p>PHP ä¿æå®ç¨çä¸ä¸ªåå æ¯ï¼å PHP åç«¯çå¢éå¾å¾å¾æ©å°±è¢«è¿«é¢å¯¹ Web çç°å®ãä¸æ¯å ä¸º PHP ç¹æ®ï¼èæ¯å ä¸º Web æ¬èº«å°±ä¸å®½å®¹ã</p>
<p>å¦æä½ è°ç¨å¤é¨ API å´ä¸è®¾è¶æ¶ãä¸è®¾éè¯ç­ç¥ï¼ä½ å°±æ¯å¨åä¸æªæ¥çäºæã</p>
<p>ä¸é¢æ¯ä¸ä¸ªç¨ Guzzle åçå°è£ï¼å¨çäº§ç¯å¢ä¸­è½æ­£ç»å¹²æ´»ï¼</p>
<pre><code class="language-php">use GuzzleHttp\Client;
use GuzzleHttp\Exception\GuzzleException;
final class ShippingClient
{
    private Client $http;
    public function __construct(string $baseUrl, string $token)
    {
        $this-&gt;http = new Client([
            'base_uri' =&gt; rtrim($baseUrl, '/') . '/',
            'timeout' =&gt; 3.0,
            'connect_timeout' =&gt; 1.0,
            'headers' =&gt; [
                'Authorization' =&gt; "Bearer {$token}",
                'Accept' =&gt; 'application/json',
            ],
        ]);
    }
    public function createLabel(array $payload): array
    {
        $attempts = 0;
        while (true) {
            $attempts++;
            try {
                $resp = $this-&gt;http-&gt;post('labels', ['json' =&gt; $payload]);
                $data = json_decode((string)$resp-&gt;getBody(), true);
                return is_array($data) ? $data : [];
            } catch (GuzzleException $e) {
                if ($attempts &gt;= 3) {
                    throw new RuntimeException('Shipping API failed after retries', 0, $e);
                }
                // small exponential backoff + jitter
                usleep((int)(100_000 * $attempts) + random_int(0, 50_000));
            }
        }
    }
}
</code></pre>
<p>å½äºèç½æ¬èº«æ¯ä½ çä¾èµæ¶ï¼è¿ç§ä»£ç æ¯å¿é¡»çââè PHP å¾éåºè¿ä¸ªåºæ¯ã</p>
<p><strong>ä¸ºä»ä¹è¿æ¯ä¼å¿ä¸</strong>ï¼PHP å¥å HTTP å·¥ä½çå½¢ç¶ï¼è®©å¢éè½å¿«éæå»ºåè½èä¸ç¨ä¸å¹³å°å¯¹æã</p>
<h2 id="ä¼å¿äºçææçåº¦composer--æ¡æ¶--æ åéä½é£é©">ä¼å¿äºï¼çææçåº¦ï¼Composer + æ¡æ¶ + æ åéä½é£é©ï¼</h2>
<p>PHP çç¬¬äºä¸ªä¼å¿æ¯æ æã</p>
<p>å¾å¤è¯­è¨é½è½å Web å¼åãä½è½è®©"æ èçé¨å"ä»¥å¯å¤ç¨çæ¹å¼è¢«è§£å³ãè®©å¢éè½æå°å·²ç»çæè¿äºæ¨¡å¼çäººï¼è¿æ ·çæççæå¹¶ä¸å¤ã</p>
<p>å½ä½ éæ© PHPï¼ä½ éæ©çä¸åªæ¯è¯­æ³ï¼è¿æï¼</p>
<ul>
<li>Composer + Packagist</li>
<li>Laravel / Symfonyï¼ä»¥åå¶ä»æ¡æ¶ï¼</li>
<li>PSR æ åï¼äºæä½æ§ï¼</li>
<li>ç¨³å®çå·¥å·é¾ï¼æµè¯ãéæåæãæ ¼å¼åãéæï¼</li>
</ul>
<p>çæçæçåº¦è½éä½é£é©ãé£é©ææ¯çæ­£è±é±çå°æ¹ã</p>
<h3 id="composerè®©ç»æåæä¸ºå¸¸æçå®éåºç³">Composerï¼è®©ç»æåæä¸ºå¸¸æçå®éåºç³</h3>
<p>Composer ä¸åªæ¯ä¾èµç®¡çââå®æ¨å¨ä½ èµ°åæ¨¡ååçä»£ç åºï¼ç¨èªå¨å è½½åå½åç©ºé´ã</p>
<p>ä¸ä¸ªæå°çä¾å­ï¼</p>
<pre><code class="language-json">{
  "require": {
    "php": "^8.2",
    "monolog/monolog": "^3.0",
    "guzzlehttp/guzzle": "^7.0"
  },
  "autoload": {
    "psr-4": {
      "App\\": "src/"
    }
  }
}
</code></pre>
<p>ä¸æ¦ä½ éç¨ PSR-4 èªå¨å è½½ï¼ä½ çä»£ç å°±ä¸åæ¯"æä»¶"ï¼èå¼å§åæ"æ¨¡å"ãè¿ä¸ªè½¬åæ¯ç°ä»£ PHP æ¯èå»æ¿å°è±¡æ´æç»´æ¤çéè¦åå ã</p>
<h3 id="æ¡æ¶ç¨æ èçæ¹æ¡è§£å³æ èçé®é¢è¿æ­£æ¯éç¹">æ¡æ¶ï¼ç¨æ èçæ¹æ¡è§£å³æ èçé®é¢ï¼è¿æ­£æ¯éç¹ï¼</h3>
<p>æ¡æ¶å¯è½è¢«è¿åº¦ä½¿ç¨ï¼ä½"ä¸ç¨æ¡æ¶"çåæ³å¨åºç¨å¢é¿åå¾å¾æ´ç³ã</p>
<p>Laravel å Symfony ä¸ºä½ ä¸æ³éæ°åæçä¸è¥¿æä¾äºå¯é çé»è®¤æ¹æ¡ï¼</p>
<ul>
<li>è·¯ç±åä¸­é´ä»¶</li>
<li>æ ¡éªåè¯·æ±å¤ç</li>
<li>DI å®¹å¨æ¨¡å¼</li>
<li>ç¼å­åéå</li>
<li>æ°æ®åºè¿ç§»</li>
<li>ç»æåçéè¯¯å¤ç</li>
</ul>
<p>å¤§å¤æ°çäº§äºæä¸æ¯æ¥èªç²¾å¦çä¸å¡é»è¾ï¼èæ¯æ¥èªè¶æ°´ä»£ç ï¼è¶æ¶ãéè¯ãä¸ä¸è´çæ ¡éªãé¨åå¤±è´¥ãæå¤ç payloadãä¸ä¸è´çéè¯¯ååºã</p>
<p>æ¡æ¶é»è®¤æ¹æ¡åå°è¿äºäºæï¼å ä¸ºä½ å»ºç«å¨å·²ç»ç»åè¿æåä¸ä¸ä¸ªçäº§ç³»ç»èéªçæ¨¡å¼ä¹ä¸ã</p>
<h3 id="psr-æ åè®©ä½ çä»£ç ä¸åè¢«éæ­»">PSR æ åï¼è®©ä½ çä»£ç ä¸åè¢«éæ­»</h3>
<p>æ åå¨ä½ éæåºæèè¶åºæåå³ç­æ¶æä¸ºéè¦ã</p>
<p>ä¾å¦ï¼PSR-3 æ¥å¿ã</p>
<pre><code class="language-php">use Psr\Log\LoggerInterface;
final class BillingService
{
    public function __construct(private readonly LoggerInterface $logger) {}
    public function charge(int $userId, int $amountCents): void
    {
        $this-&gt;logger-&gt;info('Charge request', [
            'userId' =&gt; $userId,
            'amountCents' =&gt; $amountCents,
        ]);
        // ...
    }
}
</code></pre>
<p>è¿ä¸ªç±»ä¸å¨ä¹ä½ ä»å¤©ç¨ Monolog è¿æ¯æå¤©æ¢æå«çæ¥å¿åºãè¿ç§è§£è¦æè½è®©ç³»ç»æ¼è¿ã</p>
<h3 id="å·¥å·é¾å-2015-å¹´ç¸æ¯ç°ä»£-php-åæ¢äºä¸é¨è¯­è¨">å·¥å·é¾ï¼å 2015 å¹´ç¸æ¯ï¼ç°ä»£ PHP åæ¢äºä¸é¨è¯­è¨</h3>
<p>å¾å¤"PHP é»"æ¥èªäºå¯¹èä»£ç åºçä½éªï¼å¼±ç±»åãä¸ä¸è´çæ¨¡å¼ã"åä¸çº¿åè¯´"çæåã</p>
<p>ç°ä»£ PHP å¢ééå¸¸ä¼ç¨ä¸å¥ç®åçè´¨éå·¥å·é¾ï¼</p>
<ul>
<li>ä¸¥æ ¼ç±»å</li>
<li>éæåæï¼PHPStan / Psalmï¼</li>
<li>æµè¯ï¼PHPUnit / Pestï¼</li>
<li>æ ¼å¼åï¼PHP-CS-Fixerï¼</li>
<li>èªå¨éæï¼Rectorï¼</li>
</ul>
<p>è¿å¥ç»åä¼æ¹åä½ åä»£ç çæ¹å¼ãç®æ ä¸æ¯å®ç¾ï¼èæ¯å°½æ©æ´é²é®é¢ï¼è®©ä»£ç å¨è¿­ä»£ä¸­ä¿æå¯è¯»ã</p>
<p>ä¸é¢æ¯ä¸ä¸ªå°ä¾å­ï¼éæåæå¸®ä½ é¿åä¸ä¸ªè¿è¡æ¶ bugï¼</p>
<pre><code class="language-php">final class UserRepository
{
    public function findByEmail(string $email): User
    {
        // DB lookup...
        return null; // bug
    }
}
</code></pre>
<p>éç½®å¥½éæåæåï¼è¿ä¼ç«å³è¢«æ è®°åºæ¥ã</p>
<p>PHP çæµè¯ä¹ä¸å¿å¾éãä¸ä¸ªèç¦çæµè¯å¯ä»¥è¯»èµ·æ¥åææ¡£ï¼</p>
<pre><code class="language-php">final class MoneyTest extends TestCase
{
    public function testItAddsMoneyInSameCurrency(): void
    {
        $a = Money::usd(1000);
        $b = Money::usd(250);
        $sum = $a-&gt;add($b);
        $this-&gt;assertSame(1250, $sum-&gt;cents());
        $this-&gt;assertSame('USD', $sum-&gt;currency());
    }
}
</code></pre>
<p><strong>ä¸ºä»ä¹è¿æ¯ä¼å¿äº</strong>ï¼PHP ççæè®©ä½ è½å¿«éäº¤ä»å¹¶å®å¨æå»ºï¼å ä¸ºå·¥å·é¾åæ¯ä¾é½å·²æçã</p>
<h2 id="ä¼å¿ä¸å¡å®çæ°æ®ç®¡éphp-æé¿ä¹±è¿å¹²ååº">ä¼å¿ä¸ï¼å¡å®çæ°æ®ç®¡éï¼PHP æé¿"ä¹±è¿ãå¹²ååº"ï¼</h2>
<p>å¦æä½ åè¿ä¸æ®µæ¶é´åç«¯ï¼ä½ å°±ç¥éçç¸ï¼è¿ä»½å·¥ä½å°±æ¯æ°æ®è½¬æ¢ã</p>
<p>è¯·æ±è¿æ¥æ ¼å¼å¥æªãæ°æ®åºè¡ååºæ¥æ ¼å¼å¥æªãå¤é¨ API è¿åçæ¯"å·®ä¸å¤æ¯ä½ ææç"ãWebhook å¨ä¸æ¹ä¾¿çæ¶åéè¯ãè¾¹ç¼æåµå¨å¨äºåçã</p>
<p>PHP å¨è¿ç±»å·¥ä½ä¸ç¹å«å¼ºï¼å ä¸ºå®å¨ä¸¤ç§æ¨¡å¼ä¸é½å¾èªå¦ï¼</p>
<ul>
<li>å¿«éæä½ï¼å­ç¬¦ä¸²ãæ°ç»ãJSONï¼</li>
<li>ç»æåä»£ç ï¼DTOãå¼å¯¹è±¡ãæä¸¾ãreadonly å±æ§ï¼</li>
</ul>
<p>ä¸ºäºè¯´ææçææï¼æ¥æå»ºä¸ä¸ªç°å®çç®¡éï¼å¤çæ¥èªæ¯ä»æä¾åç webhookã</p>
<p>è¿æ¯ä¸ä¸ªå¾å¥½çæµè¯ï¼å ä¸ºå®ç»åäºï¼</p>
<ul>
<li>å®å¨éªè¯</li>
<li>å¹ç­æ§ï¼éè¯ï¼</li>
<li>è½½è·è§èå</li>
<li>ç¶æåæ´</li>
<li>ä¼éå¤çæªç¥äºä»¶ç±»å</li>
</ul>
<h3 id="æ­¥éª¤ä¸ä¿æè½½è·è¾¹çæ¾å¼ådto-ä¼äºåå§æ°ç»">æ­¥éª¤ä¸ï¼ä¿æè½½è·è¾¹çæ¾å¼åï¼DTO ä¼äºåå§æ°ç»ï¼</h3>
<p>æ°ç»å¨è¾¹çå¤æ²¡é®é¢ï¼ä½å¨æ´ä¸ªåºç¨ä¸­ä¼ éåå§æ°ç»ä¼åå¾çè¦ãæä»¥ï¼å°½æ©è§£æï¼å°½æ©ç»æåã</p>
<pre><code class="language-php">final class WebhookEvent
{
    public function __construct(
        public readonly string $id,
        public readonly string $type,
        public readonly int $createdAtEpoch,
        public readonly array $data
    ) {}
    public static function fromArray(array $payload): self
    {
        return new self(
            id: (string)($payload['id'] ?? ''),
            type: (string)($payload['type'] ?? ''),
            createdAtEpoch: (int)($payload['created_at'] ?? 0),
            data: is_array($payload['data'] ?? null) ? $payload['data'] : []
        );
    }
}
</code></pre>
<p>è¿æ¯å¡å®çåæ³ï¼æä»¬ä¾èµçå­æ®µç¨å¼ºç±»åï¼åå§æ°æ®çççµæ´»æ§ï¼æ°å­æ®µå è¿æ¥ä¹ä¸ä¼ç¸ã</p>
<h3 id="æ­¥éª¤äºéªè¯ç­¾åä¸è¦ä¿¡ä»»-json">æ­¥éª¤äºï¼éªè¯ç­¾åï¼ä¸è¦"ä¿¡ä»» JSON"ï¼</h3>
<pre><code class="language-php">final class WebhookSignatureVerifier
{
    public function __construct(private readonly string $secret) {}
    public function verify(string $rawBody, string $signatureHeader): bool
    {
        $expected = hash_hmac('sha256', $rawBody, $this-&gt;secret);
        return hash_equals($expected, $signatureHeader);
    }
}
</code></pre>
<p>è¿é <code>hash_equals</code> å¾éè¦ï¼ç¨äºé¿åæ¶åºæ»å»ãè¿æ¯ä¸ªå°ç»èï¼ä½è¿ç±»ä¹ æ¯æ­£æ¯åºåä¸ä½ä»£ç åçäº§ä»£ç çå°æ¹ã</p>
<h3 id="æ­¥éª¤ä¸å¹ç­æ§å ä¸º-webhook-ä¼éè¯">æ­¥éª¤ä¸ï¼å¹ç­æ§ï¼å ä¸º webhook ä¼éè¯ï¼</h3>
<p>å¦æä½ å¤çåä¸ä¸ªäºä»¶ä¸¤æ¬¡ï¼ä½ å¯è½ä¼ï¼</p>
<ul>
<li>éå¤æ´æ°è®¢é</li>
<li>éå¤åéé®ä»¶</li>
<li>éå¤ç»è´¦æ·å æ¬¾</li>
</ul>
<p>æä»¥è¦å­å¨å·²å¤ççäºä»¶ IDã</p>
<pre><code class="language-php">final class WebhookIdempotencyStore
{
    public function __construct(private readonly PDO $pdo) {}
    public function hasProcessed(string $eventId): bool
    {
        $stmt = $this-&gt;pdo-&gt;prepare("SELECT 1 FROM processed_webhooks WHERE event_id = :id");
        $stmt-&gt;execute([':id' =&gt; $eventId]);
        return (bool)$stmt-&gt;fetchColumn();
    }
    public function markProcessed(string $eventId): void
    {
        $stmt = $this-&gt;pdo-&gt;prepare(
            "INSERT INTO processed_webhooks (event_id, processed_at)
             VALUES (:id, NOW())"
        );
        $stmt-&gt;execute([':id' =&gt; $eventId]);
    }
}
</code></pre>
<h3 id="æ­¥éª¤åå¹²åå°æ å°äºä»¶ç±»åæä¸¾å¾æå¸®å©">æ­¥éª¤åï¼å¹²åå°æ å°äºä»¶ç±»åï¼æä¸¾å¾æå¸®å©ï¼</h3>
<pre><code class="language-php">enum PaymentEventType: string
{
    case PaymentSucceeded = 'payment.succeeded';
    case PaymentFailed = 'payment.failed';
}
</code></pre>
<h3 id="æ­¥éª¤äºç¨äºå¡å-handler-æå®ä»¬ç»åèµ·æ¥">æ­¥éª¤äºï¼ç¨äºå¡å handler æå®ä»¬ç»åèµ·æ¥</h3>
<pre><code class="language-php">final class PaymentWebhookHandler
{
    public function __construct(
        private readonly WebhookSignatureVerifier $verifier,
        private readonly WebhookIdempotencyStore $idem,
        private readonly PaymentService $payments,
        private readonly PDO $pdo
    ) {}
    public function handle(string $rawBody, string $signatureHeader): void
    {
        if (!$this-&gt;verifier-&gt;verify($rawBody, $signatureHeader)) {
            throw new RuntimeException('Invalid webhook signature');
        }
        $payload = json_decode($rawBody, true);
        if (!is_array($payload)) {
            throw new RuntimeException('Invalid JSON');
        }
        $event = WebhookEvent::fromArray($payload);
        if ($event-&gt;id === '' || $event-&gt;type === '') {
            throw new RuntimeException('Missing event fields');
        }
        if ($this-&gt;idem-&gt;hasProcessed($event-&gt;id)) {
            return; // safe no-op
        }
        $this-&gt;pdo-&gt;beginTransaction();
        try {
            $this-&gt;dispatch($event);
            $this-&gt;idem-&gt;markProcessed($event-&gt;id);
            $this-&gt;pdo-&gt;commit();
        } catch (Throwable $e) {
            $this-&gt;pdo-&gt;rollBack();
            throw $e;
        }
    }
    private function dispatch(WebhookEvent $event): void
    {
        $type = PaymentEventType::tryFrom($event-&gt;type);
        if ($type === null) {
            // unknown event type: ignore or log
            return;
        }
        $paymentId = (string)($event-&gt;data['payment_id'] ?? '');
        if ($paymentId === '') return;
        match ($type) {
            PaymentEventType::PaymentSucceeded =&gt; $this-&gt;payments-&gt;markSucceeded($paymentId),
            PaymentEventType::PaymentFailed    =&gt; $this-&gt;payments-&gt;markFailed($paymentId),
        };
    }
}
</code></pre>
<p>è¿æ¯ä¸ä¸ªå¹²åçç®¡éï¼</p>
<ol>
<li>éªè¯çå®æ§</li>
<li>è§£æè½½è·</li>
<li>è§èåä¸º DTO</li>
<li>å¼ºå¶å¹ç­æ§</li>
<li>äºå¡</li>
<li>ååé¢åå¨ä½</li>
<li>å®¹å¿æªç¥äºä»¶</li>
</ol>
<p>è¿å°±æ¯ PHP æé¿ç"Web ç°å®"ä»£ç ï¼å¤çé£äºçæ­£éè¦çèæ´»ï¼åæ¶ä¿æå¯è¯»ã</p>
<p><strong>ä¸ºä»ä¹è¿æ¯ä¼å¿ä¸</strong>ï¼å¤§å¤æ°åç«¯é½æ¯æ°æ®ç®¡éï¼è PHP å¨çå®ä¸ççº¦æä¸æå»ºå¯çè§£çç®¡éæ¹é¢å¾å¼ºã</p>
<h2 id="é¢å¤åå®¹æ¸¸æ åé¡µçå®è·µæ·±å¥å ä¸ºå®æä¸ä¸ªä¼å¿ä¸²å¨ä¸èµ·">é¢å¤åå®¹ï¼æ¸¸æ åé¡µçå®è·µæ·±å¥ï¼å ä¸ºå®æä¸ä¸ªä¼å¿ä¸²å¨ä¸èµ·ï¼</h2>
<p>åé¡µæ¯é£ç§çèµ·æ¥ç®åãç­ç¨æ·ç¿»å°æ·±é¡µææ´é²é®é¢çåè½ãå®ä¹æ¯ä¸ªå¥½ä¾å­ï¼è½è¯´æ PHP ä¸ºä½è¿æ²¡è¿æ¶ï¼å®åæ¶æ¶å HTTPãSQL æ§è½åååºè®¾è®¡ã</p>
<h3 id="ä¸ºä»ä¹-offset-ä¼ä¼¤å®³ä½ ">ä¸ºä»ä¹ OFFSET ä¼ä¼¤å®³ä½ </h3>
<p>Offset åé¡µï¼<code>LIMIT 20 OFFSET 100000</code>ï¼è¿«ä½¿æ°æ®åºæ«æå¹¶ä¸¢å¼å¤§éè¡ãå¨å¤§è¡¨ä¸ï¼æ·±é¡µä¼åæ¢ã</p>
<p>å®å¨å¹¶ååå¥æ¶ä¹å¯è½ä¸ä¸è´ï¼æå¥/å é¤å¯è½å¯¼è´"çªå£"ç§»å¨æ¶åºç°è·³è¿æéå¤ã</p>
<p>æ¸¸æ åé¡µï¼keyset/seekï¼éè¿ä½¿ç¨ç¨³å®çæåºåä»£è¡¨"ä½ ä¸æ¬¡åå¨åªé"çæ¸¸æ æ¥é¿åè¿äºé®é¢ã</p>
<h3 id="è§åä¸æ¸¸æ é»è¾å¿é¡»å¹éæåºæ¹å">è§åä¸ï¼æ¸¸æ é»è¾å¿é¡»å¹éæåºæ¹å</h3>
<p>å¦æä½ æææ°ä¼åæåºï¼</p>
<pre><code class="language-sql">ORDER BY created_at DESC, id DESC
</code></pre>
<ul>
<li>ä¸ä¸é¡µåºè¯¥è·å"æ´æ©"çè¡</li>
<li>æä»¥æ¡ä»¶ç¨ <code>&lt;</code></li>
</ul>
<p>å¦æä½ çæ°æ®åºæ¯æåç»æ¯è¾ï¼</p>
<pre><code class="language-sql">SELECT id, created_at, total_cents
FROM orders
WHERE (created_at, id) &lt; (?, ?)
ORDER BY created_at DESC, id DESC
LIMIT ?
</code></pre>
<p>å¦æä¸æ¯æï¼ç¨æ¾å¼é»è¾ï¼</p>
<pre><code class="language-sql">SELECT id, created_at, total_cents
FROM orders
WHERE created_at &lt; ?
   OR (created_at = ? AND id &lt; ?)
ORDER BY created_at DESC, id DESC
LIMIT ?
</code></pre>
<h3 id="è§åäºæ¸¸æ åºè¯¥æ¯ä¸éæçä¸é²ç¯¡æ¹">è§åäºï¼æ¸¸æ åºè¯¥æ¯ä¸éæçä¸é²ç¯¡æ¹</h3>
<p>æ¸¸æ éå¸¸æ¯ä¸ä¸ªç±»ä¼¼ <code>(created_at, id)</code> çå¯¹ï¼åºååç»å®¢æ·ç«¯ãBase64 ç¼ç å¨ä¼ è¾æ¶æ²¡é®é¢ââä½ä¸æ¯å®å¨æªæ½ãå¦æä½ æ³é²æ­¢å®¢æ·ç«¯ä¼ªé æ¸¸æ ï¼å°±ç­¾åå®ã</p>
<pre><code class="language-php">final class Cursor
{
    public function __construct(
        public readonly string $createdAtIso,
        public readonly int $id
    ) {}
}
final class CursorCodec
{
    public function __construct(private readonly string $secret) {}
    public function encode(Cursor $cursor): string
    {
        $json = json_encode([
            'created_at' =&gt; $cursor-&gt;createdAtIso,
            'id' =&gt; $cursor-&gt;id
        ], JSON_UNESCAPED_SLASHES);
        $b64 = rtrim(strtr(base64_encode($json), '+/', '-_'), '=');
        $sig = hash_hmac('sha256', $b64, $this-&gt;secret);
        return $b64 . '.' . $sig;
    }
    public function decode(string $token): Cursor
    {
        $parts = explode('.', $token, 2);
        if (count($parts) !== 2) {
            throw new InvalidArgumentException('Invalid cursor');
        }
        [$b64, $sig] = $parts;
        $expected = hash_hmac('sha256', $b64, $this-&gt;secret);
        if (!hash_equals($expected, $sig)) {
            throw new InvalidArgumentException('Cursor signature mismatch');
        }
        $json = base64_decode(strtr($b64, '-_', '+/'), true);
        if ($json === false) {
            throw new InvalidArgumentException('Invalid cursor encoding');
        }
        $data = json_decode($json, true);
        if (!is_array($data)) {
            throw new InvalidArgumentException('Invalid cursor payload');
        }
        return new Cursor(
            createdAtIso: (string)($data['created_at'] ?? ''),
            id: (int)($data['id'] ?? 0)
        );
    }
}
</code></pre>
<h3 id="repository-æ¹æ³è¿åæ¡ç®--ä¸ä¸ä¸ªæ¸¸æ ">Repository æ¹æ³ï¼è¿åæ¡ç® + ä¸ä¸ä¸ªæ¸¸æ </h3>
<pre><code class="language-php">final class OrderRepository
{
    public function __construct(private readonly PDO $pdo) {}
    /**
     * @return array{items: list&lt;array&gt;, next: ?Cursor}
     */
    public function listPage(?Cursor $after, int $limit): array
    {
        $limit = max(1, min($limit, 100));
        if ($after === null) {
            $sql = "SELECT id, created_at, total_cents
                    FROM orders
                    ORDER BY created_at DESC, id DESC
                    LIMIT :limit";
            $stmt = $this-&gt;pdo-&gt;prepare($sql);
            $stmt-&gt;bindValue(':limit', $limit, PDO::PARAM_INT);
        } else {
            $sql = "SELECT id, created_at, total_cents
                    FROM orders
                    WHERE created_at &lt; :created_at
                       OR (created_at = :created_at AND id &lt; :id)
                    ORDER BY created_at DESC, id DESC
                    LIMIT :limit";
            $stmt = $this-&gt;pdo-&gt;prepare($sql);
            $stmt-&gt;bindValue(':created_at', $after-&gt;createdAtIso);
            $stmt-&gt;bindValue(':id', $after-&gt;id, PDO::PARAM_INT);
            $stmt-&gt;bindValue(':limit', $limit, PDO::PARAM_INT);
        }
        $stmt-&gt;execute();
        $rows = $stmt-&gt;fetchAll(PDO::FETCH_ASSOC);
        $items = array_map(fn($r) =&gt; [
            'id' =&gt; (int)$r['id'],
            'created_at' =&gt; (string)$r['created_at'],
            'total_cents' =&gt; (int)$r['total_cents'],
        ], $rows);
        $next = null;
        if ($items !== []) {
            $last = $items[count($items) - 1];
            $next = new Cursor($last['created_at'], $last['id']);
        }
        return ['items' =&gt; $items, 'next' =&gt; $next];
    }
}
</code></pre>
<p>ç°å¨ä½ ç handler å¯ä»¥è§£ç  <code>after</code>ãè·åç»æãç¼ç  <code>next_cursor</code>ââä¸ä¸ªæ¨ªè·¨ HTTP + SQL + JSON ååºçå¹²åç«¯å°ç«¯ç®¡éã</p>
<p>è¿å°±æ¯å®è·µä¸­çæä½³å¹³è¡¡ç¹ï¼PHP ç Web åçç¹æ§ãçæå·¥å·åæ°æ®å¤çè½åå¨è¿éæ±åã</p>
<h2 id="php-ä¸æ¯æä½³é»è®¤éæ©çåºæ¯ä»¥åå¥½å¢éæä¹å">PHP ä¸æ¯æä½³é»è®¤éæ©çåºæ¯ï¼ä»¥åå¥½å¢éæä¹åï¼</h2>
<p>PHP ä¸æ¯ä¸è½çæä½³å·¥å·ï¼</p>
<ul>
<li>CPU å¯éåå·¥ä½è´è½½ï¼è§é¢å¤çãå¤§è§æ¨¡æ°å¼è®¡ç®ï¼</li>
<li>å°æé«å¹¶åç socket æå¡å¨ä½ä¸ºé»è®¤æ¶æ</li>
<li>è¦æ±ååç«¯ç¨åä¸é¨è¯­è¨å±äº«ä¸¥æ ¼ç±»åçç»ç»</li>
</ul>
<p>ä½å¤§å¤æ°æåçå¢éä¸ä¼æè¿å½æéåä¸åççç±ãä»ä»¬åçæ¯ Web ä¸ç´é¼å±çäºï¼ç»åç³»ç»ã</p>
<ul>
<li>å¨ PHP å¼ºçå°æ¹ä¿ç API è¡¨é¢ã</li>
<li>æéè®¡ç®å¸è½½ç» worker æä¸é¨çæå¡ã</li>
<li>ç¨éåå¤çåå°ä»»å¡ã</li>
<li>å¨æªç½ªè¯­è¨ä¹ååä¼åæ°æ®åºæ¥è¯¢åç¼å­ã</li>
</ul>
<p>è¿ä¸æ¯ä»ä¹"PHP ç¨æ·çèªæå®æ°"ï¼è¿å°±æ¯æ­£å¸¸çç³»ç»è®¾è®¡ã</p>
<h2 id="ç»è®º">ç»è®º</h2>
<p>åå°æåçé®é¢ââPHP çä¸å¤§ä¼å¿ï¼</p>
<ul>
<li><strong>Web åçççäº§å</strong>ï¼PHP å¤©ç¶å¥å HTTP å·¥ä½ï¼ä¿ææå»ºå¾ªç¯å¿«éã</li>
<li><strong>çææçåº¦</strong>ï¼Composer + æ¡æ¶ + æ å + å·¥å·é¾ç»ä½ æ æå¹¶éä½é£é©ã</li>
<li><strong>å¡å®çæ°æ®ç®¡é</strong>ï¼PHP æé¿ææ··ä¹±ççå®ä¸çæ°æ®è½¬æ¢æå¹²åãç¨³å®çè¾åºââåæ¶ä¸è®©ä»£ç åå¾ä¸å¯è¯»ã</li>
</ul>
<p>å¦æä½ æ³è®© PHP æè§ç°ä»£ï¼èä¸æ¯åé£äºå»æ¿å°è±¡ï¼ï¼æ¹æ³å§ç»å¦ä¸ï¼</p>
<ul>
<li>ä¿æ handler/æ§å¶å¨è</li>
<li>ç¨ DTO/å¼å¯¹è±¡å»ºæ¨¡è¾¹ç</li>
<li>æè¶æ¶ãéè¯åå¹ç­æ§å½ä½ä¸ç­åè½</li>
<li>æè¯»åæ¹å¼å»ºç´¢å¼ï¼å°¤å¶æ¯åé¡µï¼</li>
<li>ç¨æµè¯ + éæåæä¿æ¤éæ</li>
</ul>
<p>PHP ä¸éè¦è¿½ç­ç¹ãå®åªè¦ç»§ç»­åå®æé¿çäºå°±å¤äºï¼è·é£äºå®ç¨ãå¥½ç»´æ¤ãè½ç¨³å®ä¸çº¿ç Web ç³»ç»ã</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-08 08:16">2026-01-08 08:16</span>&nbsp;
<a href="https://www.cnblogs.com/catchadmin">JaguarJack</a>&nbsp;
éè¯»(<span id="post_view_count">339</span>)&nbsp;
è¯è®º(<span id="post_comment_count">5</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19454737);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19454737', targetLink: 'https://www.cnblogs.com/catchadmin/p/19454737', title: '2026 å¹´ PHP çä¸å¤§ä¼å¿ è¿é¨&amp;quot;èå°&amp;quot;ä¸ºä½ä¾ç¶éè¦' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ä¸æå­¦ä¹ åå®è·µ å½ä¸äºèç½å®å¨çåºç³  -  TLS å SSL ]]></title>
    <link>https://www.cnblogs.com/dddy/p/19453911</link>
    <guid>dc25d02207249caa5fe586dad61c3f5b</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/dddy/p/19453911" title="åå¸äº 2026-01-07 21:18">
    <span role="heading" aria-level="2">ä¸æå­¦ä¹ åå®è·µ å½ä¸äºèç½å®å¨çåºç³  -  TLS å SSL</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>[[N_OSI æ¨¡å.TCP åè®®.å°å]]<br>
[[Java TLS Socket]]</p>
<h1 id="what-is-ssltls-">What is SSL/TLS ?</h1>
<p>TLSï¼Transport Layer Securityï¼å³ä¼ è¾å±å®å¨åè®®ï¼SSLï¼Secure Sockets Layerï¼å³å®å¨å¥æ¥å±åè®®ãå®ä»¬é½æ¯ç¨äºå¨ç½ç»éä¿¡ä¸­ä¿éæ°æ®å®å¨åéç§çå å¯åè®®ã</p>
<p>[[TLS&amp;SSLåè®®]]</p>
<h2 id="tlstransport-layer-securityä¼ è¾å±å®å¨åè®®">TLSï¼Transport Layer Securityï¼ä¼ è¾å±å®å¨åè®®</h2>
<ol>
<li><strong>åå±åç¨</strong></li>
</ol>
<ul>
<li>TLS æ¯ SSL åè®®çç»§ä»»èãç±äº SSL åè®®å­å¨ä¸äºå®å¨æ¼æ´ï¼å¹¶ä¸éçç½ç»å®å¨éæ±çä¸æ­æé«ï¼IETFï¼Internet Engineering Task Forceï¼å¯¹ SSL 3.0 è¿è¡äºæ¹è¿ï¼æ¨åºäº TLS 1.0 åè®®ï¼äº 1999 å¹´åå¸ãTLS åè®®å¨åç»­åä¸æ­æ´æ°çæ¬ï¼å¦ TLS 1.1ãTLS 1.2 å TLS 1.3ï¼æ¯ä¸ä¸ªæ°çæ¬é½å¨å®å¨æ§åæ§è½ç­æ¹é¢æææåã</li>
</ul>
<ol start="2">
<li><strong>å·¥ä½åç</strong></li>
</ol>
<ul>
<li>TLS çå·¥ä½åçä¸ SSL ç±»ä¼¼ï¼ä¹åæ¬æ¡æé¶æ®µãå¨ TLS æ¡æè¿ç¨ä¸­ï¼å®¢æ·ç«¯åæå¡å¨ä¼åååè®®çæ¬ãå å¯ç®æ³å¥ä»¶ãäº¤æ¢å¯é¥ç­ãTLS 1.3 ç¸æ¯ä¹åççæ¬ï¼ç®åäºæ¡æè¿ç¨ï¼åå°äºæ¡ææ¶æ¯çå¾è¿æ¬¡æ°ï¼ä»èæé«äºè¿æ¥å»ºç«çéåº¦ï¼å¹¶ä¸å¢å¼ºäºå®å¨æ§ï¼å¦å å¼ºäºå¯é¥äº¤æ¢çå®å¨æ§ã</li>
<li>ä¾å¦ï¼TLS 1.3 ä½¿ç¨äºæ´å®å¨çå¯é¥äº¤æ¢ç®æ³ï¼å¦åºäºæ¤­åæ²çº¿ç Diffie - Hellman å¯é¥äº¤æ¢ï¼ECDHEï¼ï¼è¿ç§ç®æ³è½å¤æææµæä¸­é´äººæ»å»ç­å®å¨å¨èã</li>
</ul>
<ol start="3">
<li><strong>åºç¨åºæ¯</strong></li>
</ol>
<ul>
<li>TLS çåºç¨èå´éå¸¸å¹¿æ³ãå®ä¸ä»ç¨äº Web å®å¨ï¼è¿ç¨äºçµå­é®ä»¶å®å¨ï¼å¦ IMAPãPOP3 å SMTP åè®®çå®å¨çæ¬ï¼ãèæä¸ç¨ç½ç»ï¼VPNï¼ç­ä¼å¤ç½ç»éä¿¡åºæ¯ãå¨ç°ä»£äºèç½ä¸­ï¼å ä¹ææéè¦å®å¨éä¿¡çå°æ¹é½ä¼ä¼åèèä½¿ç¨ TLS åè®®ã</li>
</ul>
<h2 id="ssl-secure-sockets-layerå®å¨å¥æ¥å±åè®®">SSL ï¼Secure Sockets Layerï¼å®å¨å¥æ¥å±åè®®</h2>
<ol>
<li><strong>åå±åç¨</strong></li>
</ol>
<ul>
<li>SSL æåæ¯ç±ç½æ¯å¬å¸ï¼Netscapeï¼å¨ 1994 å¹´å¼åçï¼ç®çæ¯ä¸ºäºä¿éç½ç»éä¿¡çå®å¨ï¼ç¹å«æ¯å¨ Web æµè§å¨åæå¡å¨ä¹é´çéä¿¡å®å¨ãSSL 1.0 ç±äºå­å¨å®å¨æ¼æ´ä»æªåå¸ï¼SSL 2.0 å¨ 1995 å¹´åå¸ï¼ä½ä¹æå®å¨é®é¢ãSSL 3.0 äº 1996 å¹´åå¸ï¼å®ä¿®å¤äºè®¸å¤ SSL 2.0 çé®é¢ï¼æä¸ºå½æ¶æ¯è¾æµè¡çå®å¨åè®®ã</li>
</ul>
<ol start="2">
<li><strong>å·¥ä½åç</strong></li>
</ol>
<ul>
<li>SSL åè®®å¨åºç¨å±åä¼ è¾å±ä¹é´å·¥ä½ãå®éè¿ä½¿ç¨å¬é¥åç§é¥å å¯ææ¯æ¥ä¿è¯éä¿¡çä¿å¯æ§ãå½å®¢æ·ç«¯ï¼å¦æµè§å¨ï¼ä¸æå¡å¨å»ºç«è¿æ¥æ¶ï¼é¦åä¼è¿è¡ SSL æ¡æè¿ç¨ã</li>
<li>å¨æ¡æé¶æ®µï¼å®¢æ·ç«¯åæå¡å¨åéå®¢æ·ç«¯æ¯æçå å¯ç®æ³åè¡¨ç­ä¿¡æ¯ãæå¡å¨ä»åè¡¨ä¸­éæ©ä¸ç§å å¯ç®æ³ï¼å¹¶å°æå¡å¨çè¯ä¹¦åéç»å®¢æ·ç«¯ãå®¢æ·ç«¯éªè¯æå¡å¨è¯ä¹¦çåæ³æ§ï¼ä¾å¦æ£æ¥è¯ä¹¦æ¯å¦ç±å¯ä¿¡ä»»çè¯ä¹¦é¢åæºæï¼CAï¼é¢åï¼è¯ä¹¦æ¯å¦è¿æç­ã</li>
<li>å¦æè¯ä¹¦éªè¯éè¿ï¼å®¢æ·ç«¯åæå¡å¨å°±ä¼åååºä¸ä¸ªå¯¹ç§°å å¯å¯é¥ãä¹åçæ°æ®ä¼ è¾å°±ä½¿ç¨è¿ä¸ªå¯¹ç§°å¯é¥è¿è¡å å¯ï¼è¿æ ·å¯ä»¥ä¿è¯æ°æ®å¨ä¼ è¾è¿ç¨ä¸­çä¿å¯æ§ï¼å ä¸ºåªæå®¢æ·ç«¯åæå¡å¨ç¥éè¿ä¸ªå¯¹ç§°å¯é¥ã</li>
</ul>
<ol start="3">
<li><strong>åºç¨åºæ¯</strong></li>
</ol>
<ul>
<li>SSL ä¸»è¦åºç¨äº Web å®å¨ãä¾å¦ï¼å¨æ©æç httpsï¼Hypertext Transfer Protocol Secureï¼ç½ç«è®¿é®ä¸­ï¼å°±æ¯éè¿ SSL åè®®æ¥å å¯æµè§å¨åæå¡å¨ä¹é´çæ°æ®ä¼ è¾ãè¿ä½¿å¾ç¨æ·å¨ç½ç«ä¸è¾å¥çææä¿¡æ¯ï¼å¦ç»å½å¯ç ãä¿¡ç¨å¡ä¿¡æ¯ç­å¨ä¼ è¾è¿ç¨ä¸­ä¸ä¼è¢«çªåã</li>
</ul>
<h2 id="ä¸¤èå³ç³»ååºå«">ä¸¤èå³ç³»ååºå«</h2>
<ol>
<li><strong>å³ç³»</strong></li>
</ol>
<ul>
<li>TLS å¯ä»¥çä½æ¯ SSL çåçº§çãTLS åè®®å¨è®¾è®¡ä¸åé´äº SSL åè®®çå¾å¤çå¿µï¼å¹¶ä¸å¨ SSL çåºç¡ä¸è¿è¡äºæ¹è¿åæ©å±ï¼ä»¥åºå¯¹ä¸æ­åºç°çæ°çå®å¨å¨èåç½ç»éä¿¡éæ±ã</li>
</ul>
<ol start="2">
<li><strong>åºå«</strong></li>
</ol>
<ul>
<li><strong>å®å¨æ§</strong>ï¼TLS å¨å®å¨æ§è½ä¸æ¯ SSL æ´ä¼è¶ãä¾å¦ï¼SSL 3.0 å­å¨ POODLEï¼Padding Oracle On Downgraded Legacy Encryptionï¼æ»å»æ¼æ´ï¼è TLS åè®®éè¿ä¸æ­æ´æ°çæ¬æ¥ä¿®å¤ç±»ä¼¼çå®å¨æ¼æ´ãTLS 1.3 æ´æ¯å¨å¯é¥äº¤æ¢ç­å³é®ç¯èéç¨äºæ´åè¿çå å¯ææ¯ï¼æä¾äºæ´å¼ºçå®å¨æ§ã</li>
<li><strong>å¼å®¹æ§</strong>ï¼SSL æ¯æ¯è¾æ©æçåè®®ï¼å¨ä¸äºæ§çç³»ç»åè½¯ä»¶ä¸­æåºç¨ãä½éçç½ç»å®å¨æ åçæé«ï¼ç°ä»£çåºç¨åç³»ç»æ´å¾åäºä½¿ç¨ TLS åè®®ãTLS å¨å¼å®¹æ§æ¹é¢ä¹å¨ä¸æ­æ©å±ï¼è½å¤æ´å¥½å°ä¸åç§æ°çç½ç»ææ¯ååºç¨åºæ¯ç¸ç»åã</li>
</ul>
<blockquote>
<p>ç®åå¸¸ç¨çæ¯ TLS 1.2 å TLS 1.3;  SSLä¸å¤è§äº</p>
</blockquote>
<h2 id="https-å·¥ä½æµç¨">HTTPS å·¥ä½æµç¨</h2>
<ol>
<li>Client åèµ·è¯·æ±ï¼ç«¯å£443ï¼</li>
<li>Server è¿åå¬é¥è¯ä¹¦</li>
<li>Client éªè¯è¯ä¹¦</li>
<li>Client çæå¯¹ç§°å¯é¥ï¼ç¨å¬é¥å å¯ååç»Server</li>
<li>Serverä½¿ç¨ç§é¥è§£å¯ï¼å¾å°å¯¹ç§°å¯é¥</li>
<li>C/Såæ¹ä½¿ç¨å¯¹ç§°å¯é¥ï¼
<ul>
<li>å å¯ææå¹¶åé</li>
<li>è§£å¯å¯æå¾å°ææ</li>
</ul>
</li>
</ol>
<h3 id="for-tls-12">For TLS 1.2</h3>
<p><img alt="Pasted image 20241218204449" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3723410/202601/3723410-20260107211137385-1641361058.png" class="lazyload"><br>
<img alt="Pasted image 20241218211322" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3723410/202601/3723410-20260107211150875-2140596749.png" class="lazyload"></p>
<h3 id="for-tls-13">For TLS 1.3</h3>
<p><img alt="Pasted image 20241218204507" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3723410/202601/3723410-20260107211202268-1624490608.png" class="lazyload"></p>
<p><img alt="Pasted image 20241218203919" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3723410/202601/3723410-20260107211212305-90226531.png" class="lazyload"></p>
<h1 id="tls">TLS</h1>
<p><img alt="Pasted image 20231116112623" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3723410/202601/3723410-20260107211222758-985542654.png" class="lazyload"></p>
<h2 id="è¯ä¹¦ç­¾åä¸éªè¯">è¯ä¹¦ç­¾åä¸éªè¯</h2>
<p>é¢åè¯ä¹¦çè¿ç¨</p>
<ol>
<li>æ°å<strong>è¯ä¹¦åæ°æ®</strong>: åæ¬ <code>ç­¾åäºº(Issuer)</code>, å°å, ç­¾åæ¶é´, æææ ç­, è¿åæ¬<code>è¯ä¹¦ææè(Owner)</code>åºæ¬ä¿¡æ¯, æ¯å¦ DN(DNS Name, å³è¯ä¹¦çæçåå), <strong>Owner å¬é¥</strong> ç­ä¿¡æ¯</li>
<li>ä½¿ç¨éç¨ç Hash ç®æ³ï¼å¦SHA-256ï¼å¯¹è¯ä¹¦åæ°æ®è®¡ç®çæ<strong>æ°å­æè¦</strong></li>
<li>ä½¿ç¨ <strong>ç­¾åäºº Issuer (CA)çç§é¥</strong>  å¯¹è¯¥<strong>æ°å­æè¦</strong>è¿è¡å å¯, çæä¸ä¸ª<strong>å å¯çæ°å­æè¦</strong>, ä¹å°±æ¯<strong>Issuerçæ°å­ç­¾å</strong></li>
<li>å°<strong>æ°å­ç­¾å</strong>éå å°æ°å­è¯ä¹¦ä¸, åæä¸ä¸ª<strong>ç­¾è¿åçæ°å­è¯ä¹¦</strong><br>
å°<strong>ç­¾è¿åçæ°å­è¯ä¹¦</strong>ä¸ <strong>Issuer (CA)çå¬é¥</strong>, ä¸ååç»è¯ä¹¦ä½¿ç¨èï¼æ³¨æ, å°å¬é¥ä¸»å¨åç»ä½¿ç¨èæ¯ä¸ä¸ªå½¢è±¡çè¯´æ³, éå¸¸ç³»ç»æèæµè§å¨é½åç½® Issuer (CA)çå¬é¥ ä¸ºå¯ä¿¡ä»»çæ ¹è¯ä¹¦ï¼</li>
</ol>
<blockquote>
<p>æä»¥ CAçç§é¥æ¯ç»å¯¹ä¸è½è¢«æ³é², å®ä½ä¸ºäºèç½è¢«ä¿¡ä»»çåºç¡</p>
</blockquote>
<h2 id="éªè¯è¯ä¹¦çè¿ç¨">éªè¯è¯ä¹¦çè¿ç¨</h2>
<ol>
<li>è¯ä¹¦ä½¿ç¨èè·éè¿æç§éå¾ï¼å¦æµè§å¨è®¿é®ï¼è·åå°è¯¥æ°å­è¯ä¹¦, è§£åååå«è·å¾<strong>è¯ä¹¦åæ°æ®</strong> å<strong>æ°å­ç­¾å</strong>,<strong>(Owner)çå¬é¥</strong>ç­</li>
<li>ä½¿ç¨åæ ·çHashç®æ³è®¡ç®è¯ä¹¦åæ°æ®ç<strong>æ°å­æè¦</strong></li>
<li>ä½¿ç¨ <strong>ç­¾åäºº Issuer (CA)çå¬é¥</strong> å¯¹æ°å­ç­¾åè¿è¡è§£å¯, å¾å° è§£å¯åçæ°å­æè¦</li>
</ol>
<p>ä»ç¬¬1æ­¥è·å¾çæ°å­æè¦å¼,  åå¯¹æ¯ 2 å 3 ä¸¤ä¸ªæ­¥éª¤å¾å°çæ°å­æè¦å¼; å¦æç¸å, åè¯´æè¿ä¸ªæ°å­è¯ä¹¦ç¡®å®æ¯è¢« ç­¾åäººIssuer éªè¯è¿åæ³è¯ä¹¦, è¯ä¹¦ä¸­çä¿¡æ¯</p>
<blockquote>
<p>æä¸»è¦çæ¯ç¡®å® Owner çå¬é¥æ¯å¯ä¿¡ç, æ­¤åéä¿¡ ä¿¡ä»»ä½¿ç¨è¯¥å¬é¥è§£å¯å¯¹æ¹ç§é¥å å¯çæ°æ®</p>
</blockquote>
<p><strong>in short æ¡ææ¶æå¡ç«¯éè¦æä¾èªå·±çå¬é¥ åè¢« caç­¾åè¿çæ°å­æè¦;  å³é®å¨ä¸å®¢æ·ç«¯éè¦ä¸ä¸ªå¯ä¿¡ä»» Issuer(CA)</strong></p>
<h3 id="è¯ä¹¦é¾">è¯ä¹¦é¾</h3>
<p>å¨ chrome è¯ä¹¦ä¿¡æ¯-&gt; è¯ä¹¦è·¯å¾,  å¯ä»¥çå°è¯ä¹¦çç­¾åé¾.</p>
<p>ä¾, ç¾åº¦çç½ç«:</p>
<p><code>GlobalSign Root CA -&gt; GlobalSign Organization Validation CA -&gt; baidu.com</code><br>
<img alt="Pasted image 20231116113047" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3723410/202601/3723410-20260107211330735-221412869.png" class="lazyload"></p>
<p>è¿ä¸ªè·¯å¾å¯ä»¥æ½è±¡ä¸ºä¸ä¸ªçº§å«:</p>
<p><code>end-user</code>: å³ baidu.com, è¯¥è¯ä¹¦åå«ç¾åº¦çå¬é¥, è®¿é®èå°±æ¯ä½¿ç¨è¯¥å¬é¥å°æ°æ®å å¯ååä¼ è¾ç»ç¾åº¦, å³å¨ HTTPS ä¸­ä½¿ç¨çè¯ä¹¦</p>
<p><code>intermediates</code>: å³ä¸ææå°ç ç­¾åäºº Issuer, ç¨æ¥è®¤è¯å¬é¥ææèèº«ä»½çè¯ä¹¦, è´è´£ç¡®è®¤ HTTPS ä½¿ç¨ç end-user è¯ä¹¦ç¡®å®æ¯æ¥æºäºç¾åº¦; è¿ç±» intermediates è¯ä¹¦å¯ä»¥æå¾å¤çº§, ä¹å°±æ¯è¯´ ç­¾åäºº Issuer å¯è½ä¼ææå¾å¤çº§</p>
<p><code>root</code>: å¯ä»¥çè§£ä¸º<strong>æé«çº§å«çç­¾åäºº Issuer, è´è´£è®¤è¯<code> intermediates èº«ä»½ç</code>åæ³æ§</strong></p>
<p><strong>in short å¶å®å°±æ¯ä¸ä¸ªå¯ä¿¡ä»»çé¾æ¡, æç»çç®çå°±æ¯ä¸ºäºä¿è¯ end-user è¯ä¹¦æ¯å¯ä¿¡ç, è¯¥è¯ä¹¦çå¬é¥ä¹å°±æ¯å¯ä¿¡ç.</strong></p>
<blockquote>
<p>åè: <a href="https://www.jianshu.com/p/fcd0572c4765" target="_blank" rel="noopener nofollow">å³äºè¯ä¹¦é¾çä¸ç¹è®¤ç¥</a></p>
</blockquote>
<h2 id="tls-æ¡ææ­¥éª¤">TLS æ¡ææ­¥éª¤</h2>
<p>(0) Client ä¸ <code>Server</code> ä¹é´å»ºç« (TCP ä¸æ¬¡æ¡æ) è¿æ¥</p>
<p>(1) Client å <code>Server</code> åé "client hello" æ¶æ¯, éé¢åå«äºå®å¨ç¸å³çä¿¡æ¯, ä¾å¦<strong>SSL/TLS çæ¬å·</strong>, Client æ¯æçå å¯å¥ä»¶ (CipherSuite); "client hello" æ¶æ¯<strong>è¿åå«äºä¸ä¸ªéæºæ°client random</strong>, ç¨äºéä¿¡å¯é¥çè®¡ç®;<br>
(å¯é)SSL/TLS åè®®è¿åè®¸ "client hello" æ¶æ¯åå« Client ææ¯æçåç¼©ç®æ³</p>
<p>(2) <code>Server</code> åå¤ä¸æ¡ "server hello" æ¶æ¯, éé¢åå«äºå å¯å¥ä»¶<strong>(Server ä» "client hello" æ¶æ¯ç CipherSuites åè¡¨ä¸­éæ©å¶ä¸­ä¸ä¸ª)</strong>,<strong>session id</strong> å å¦ä¸ä¸ªéæºæ°<strong>server random</strong>; Server è¿ä¼å¨æ¶æ¯ä¸­<strong>éå¸¦èªå·±çæ°å­è¯ä¹¦</strong>;</p>
<p>(å¯é)<strong>å¦æ Server éè¦ Client çæ°å­è¯ä¹¦è¿è¡å®¢æ·ç«¯è®¤è¯</strong>, ä¼å Client åé "client certificate request" è¯·æ±æ¶æ¯, éé¢åå«äº<strong>Server ææ¯æçè¯ä¹¦ç±»å</strong>å<strong>è®¤å¯çè¯ä¹¦é¢åæºæ CA</strong> (<strong>ååè®¤è¯</strong>, åè®¤è¯å®¢æ·ç«¯åç)</p>
<p>(3) Client æ¶å° "server hello",<strong>éªè¯ Server ç«¯çæ°å­è¯ä¹¦</strong>, å¹¶å¾å°è¯ä¹¦ä¸­<strong>Server ç«¯çå¬é¥</strong><br>
<strong>(å³é®è¿éå®¢æ·ç«¯æå¯ä¿¡ä»»çè¯ä¹¦ç­¾åè<code>Issuer</code>, éªè¯æå¡ç«¯çè¯ä¹¦)</strong></p>
<p>(4) Client å <code>Server</code> åé<strong>ç¬¬ä¸ä¸ªéæºæ° pre-master secret</strong>; ä¸ä¹åä¸å,<strong>è¿æ¬¡çéæºæ°ä½¿ç¨äº Server çå¬é¥å å¯</strong> (éå¯¹ç§°å å¯); ç°å¨åæ¹åæ¶æ¥æè¿ä¸ä¸ªéæºæ°client random,server random,premaster secret, å¯ä»¥ç¨æ¥è®¡ç®çæå±åçéä¿¡å¯é¥ master secret ç¨äºå å¯åé¢ä¼ è¾çä¸å¡æ°æ®;</p>
<p>(5 - å¯é) å¦ææ¶å° <code>Server</code> ç«¯åæ¥ç "client certificate request" è¯·æ±æ¶æ¯, Client ä¼å Server åéä¸ä¸ªä½¿ç¨ Client èªå·±çç§é¥å å¯è¿çéæºæ° (ææ¶è®°ä½ secret-A), éå¸¦ Client çæ°å­è¯ä¹¦; æèåéä¸ä¸ª "no digital certificate alert" æ è¯ä¹¦è­¦å, è¿ç§æåµä¸åºæ¬å¯ä»¥è®¤ä¸º SSL/TLS æ¡æå¤±è´¥;</p>
<p>(6 - å¯é) <code>Server</code> éªè¯ Client åéè¿æ¥çæ°å­è¯ä¹¦, å¹¶å¾å°è¯ä¹¦ä¸­å¬é¥å¯¹ Client è¿è¡èº«ä»½è®¤è¯ (éè¿å¬é¥è§£å¯ä¸é¢é£ä¸ª secret-A);</p>
<p>(7) Client å <code>Server</code> åé "finished" æ¶æ¯, ä½¿ç¨<strong>ç¬¬ 4 æ­¥ä¸­è®¡ç®åºæ¥çå¯é¥è¿è¡å å¯ä¼ è¾ (å¯¹ç§°å å¯)</strong>, è¿è¡¨ç¤º Client ç«¯æ¡æé¶æ®µå·²ç»å®æ;</p>
<p>(8) <code>Server</code> ä¹å Client åé "finished" æ¶æ¯, ä½¿ç¨<strong>ç¬¬ 4 æ­¥ä¸­è®¡ç®åºæ¥çå¯é¥è¿è¡å å¯ä¼ è¾ (å¯¹ç§°å å¯)</strong>, è¿è¡¨ç¤º Server ç«¯æ¡æé¶æ®µå®æ;</p>
<p>(9) SSL/TLS æ¡æé¶æ®µå®æ, æ¥ä¸æ¥åæ¹éä¿¡çæ¶æ¯é½ä¼ä½¿ç¨åååºæ¥çå¯é¥è¿è¡å å¯ (å¯¹ç§°å å¯)<br>
Content Type: Handshake (22)</p>
<p><img alt="SLLhandshanke" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3723410/202601/3723410-20260107212013715-1033526114.png" class="lazyload"></p>
<p><a href="https://www.cnblogs.com/piyeyong/archive/2010/07/02/1770208.html" target="_blank">è¯ä¹¦çåºç¨ä¹ä¸ ââ TCP&amp;SSLéä¿¡å®ä¾ååè®®åæ(ä¸­)</a></p>
<p>æ¯ä¸æ¡æ¶æ¯é½ä¼åå«æContentType,Version,HandshakeTypeç­ä¿¡æ¯;</p>
<p>ContentType æç¤ºSSLéä¿¡å¤äºåªä¸ªé¶æ®µ, æ¯æ¡æ(Handshake), å¼å§å å¯ä¼ è¾(ChangeCipherSpec)è¿æ¯æ­£å¸¸éä¿¡(Application)ç­, è§ä¸è¡¨</p>
<p>Hex	Dec	Type<br>
0x14	20	ChangeCipherSpec<br>
0x15	21	Alert<br>
0x16	22	Handshake<br>
0x17	23	Application</p>
<p>Handshake Typeæ¯å¨handshankeé¶æ®µä¸­çå·ä½åªä¸æ­¥, è§ä¸è¡¨	<br>
Code	Description<br>
0	HelloRequest<br>
1	ClientHello<br>
2	ServerHello<br>
11	Certificate<br>
12	ServerKeyExchange<br>
13	CertificateRequest<br>
14	ServerHelloDone<br>
15	CertificateVerify<br>
16	ClientKeyExchange<br>
20	Finished</p>
<h3 id="å³äºååè®¤è¯">å³äºååè®¤è¯</h3>
<p>ææéä¿¡ä¸­ï¼æ¶åä¸¤ä¸ªç«¯ç¹ï¼å³æµè§å¨åå®æè¿æ¥çç½ç«ï¼å³å®¢æ·ç«¯åæå¡å¨ï¼ã å¨ååSSLèº«ä»½è®¤è¯è¿ç¨ä¸­ï¼ä»éªè¯ä¸ä¸ªç«¯ç¹ï¼æå¡å¨ï¼çèº«ä»½ã<br>
ååè®¤è¯æ¯æå¨SSLæ¡æè¿ç¨ä¸­å°åæ¶éªè¯å®¢æ·ç«¯åæå¡å¨çèº«ä»½ï¼æä»¥ååè®¤è¯SSLè¯ä¹¦è³å°åæ¬ä¸¤ä¸ªæä¸¤ä¸ªä»¥ä¸çè¯ä¹¦ï¼ä¸ä¸ªæ¯æå¡å¨è¯ä¹¦ï¼å¦ä¸ä¸ªæå¤ä¸ªæ¯å®¢æ·ç«¯è¯ä¹¦ï¼å³ä¸ªäººè®¤è¯è¯ä¹¦ï¼ã</p>
<h1 id="ä¸»æµçè¯ä¹¦æ ¼å¼">ä¸»æµçè¯ä¹¦æ ¼å¼</h1>
<p><strong>ä¸»æµçSSLè¯ä¹¦æ ¼å¼:</strong><br>
DERãCERï¼æä»¶æ¯äºè¿å¶æ ¼å¼ï¼åªä¿å­è¯ä¹¦ï¼ä¸ä¿å­ç§é¥ã</p>
<p>PEMï¼ä¸è¬æ¯ææ¬æ ¼å¼ï¼å¯ä¿å­è¯ä¹¦ï¼å¯ä¿å­ç§é¥ã<br>
Privacy Enhanced Mailï¼ä¸è¬ä¸ºææ¬æ ¼å¼ï¼ä»¥ -----BEGIN... å¼å¤´ï¼ä»¥ -----END... ç»å°¾ãä¸­é´çåå®¹æ¯ BASE64 ç¼ç ãè¿ç§æ ¼å¼å¯ä»¥ä¿å­è¯ä¹¦åç§é¥ï¼ææ¶æä»¬ä¹æPEM æ ¼å¼çç§é¥çåç¼æ¹ä¸º .key ä»¥åºå«è¯ä¹¦ä¸ç§é¥</p>
<p>CRTï¼å¯ä»¥æ¯äºè¿å¶æ ¼å¼ï¼å¯ä»¥æ¯ææ¬æ ¼å¼ï¼ä¸ DER æ ¼å¼ç¸åï¼ä¸ä¿å­ç§é¥ã<br>
PFX P12ï¼äºè¿å¶æ ¼å¼ï¼åæ¶åå«è¯ä¹¦åç§é¥ï¼ä¸è¬æå¯ç ä¿æ¤ã<br>
JKSï¼äºè¿å¶æ ¼å¼ï¼åæ¶åå«è¯ä¹¦åç§é¥ï¼ä¸è¬æå¯ç ä¿æ¤ã</p>
<p><strong>åæå¡å¨å¹³å°ä½¿ç¨çè¯ä¹¦æ ¼å¼:</strong><br>
Nginxï¼pem<br>
Apacheï¼pem<br>
IISï¼pfx/pkcs12<br>
Tomcatï¼jks</p>
<h1 id="netty-for-tls-å®ä¾">Netty For TLS å®ä¾</h1>
<h2 id="è¯ä¹¦çæ">è¯ä¹¦çæ</h2>
<h3 id="ca-æ ¹è¯ä¹¦çæ">CA æ ¹è¯ä¹¦çæ</h3>
<p>æèç§°ä¸º Issuer , å®å¯ä»¥ç­¾åè¯ä¹¦, ä½ä¸ºå®¢æ·ç«¯åæå¡ç«¯å±åä¿¡ä»»è</p>
<ol>
<li><strong>åå»ºä¸ä¸ªç§é¥</strong><br>
çæä¸ä¸ªå®å¨çç§é¥ãè¿ä¸ªç§é¥å°ç¨äºç­¾ç½²æ ¹è¯ä¹¦ä»¥åå°æ¥ç±è¯¥æ ¹CAç­¾åçææå¶ä»è¯ä¹¦ãä¸ºäºç¡®ä¿å®å¨æ§ï¼ä½¿ç¨è¶³å¤é¿çå¯é¥é¿åº¦ã</li>
</ol>
<pre><code class="language-sh">openssl genpkey -algorithm RSA -out root_ca.key -aes256 -pkeyopt rsa_keygen_bits:4096
# ä¸å å¯
# openssl genpkey -algorithm RSA -out root_ca.key -pkeyopt rsa_keygen_bits:2048
</code></pre>
<blockquote>
<p>è¾å¥ç§é¥å¯ç </p>
</blockquote>
<ol start="2">
<li><strong>åå»ºèªç­¾åçæ ¹è¯ä¹¦</strong><br>
ä½¿ç¨ååçæçç§é¥æ¥åå»ºä¸ä¸ªèªç­¾åçæ ¹è¯ä¹¦ãè¿ä¸æ­¥éª¤ä¸ä»ä¼çæè¯ä¹¦æ¬èº«ï¼è¿ä¼æ¶éæå³é¢åèçè¯¦ç»ä¿¡æ¯ï¼è¿äºä¿¡æ¯å°åµå¥å°è¯ä¹¦ä¸­ã</li>
</ol>
<pre><code class="language-sh">openssl req -x509 -new -nodes -key root_ca.key -sha256 -days 36500 -out root_ca.crt
</code></pre>
<ul>
<li><code>req</code>&nbsp;æ¯ç¨æ¥å¤çè¯ä¹¦è¯·æ±çå½ä»¤ã</li>
<li><code>-x509</code>&nbsp;è¡¨ç¤ºè¦åå»ºä¸ä¸ªX.509æ ¼å¼çèªç­¾åè¯ä¹¦ã</li>
<li><code>-new</code>&nbsp;è¡¨ç¤ºè¿æ¯ä¸ä¸ªæ°çè¯ä¹¦è¯·æ±ã</li>
<li><code>-nodes</code>&nbsp;è¡¨ç¤ºä¸å å¯ç§é¥ï¼ä»éç¨äºè¿æ¬¡å½ä»¤ï¼å ä¸ºç§é¥å·²ç»å å¯ï¼ã</li>
<li><code>-key root_ca.key</code>&nbsp;æå®äºç¨äºç­¾åçç§é¥ã</li>
<li><code>-sha256</code>&nbsp;æå®äºåå¸ç®æ³ã</li>
<li><code>-days 3650</code>&nbsp;æå®äºè¯ä¹¦çæææä¸º10å¹´ã</li>
<li><code>-out root_ca.crt</code>&nbsp;æå®äºè¾åºæä»¶åä¸º&nbsp;<code>root_ca.crt</code>ã</li>
</ul>
<p>å¨è¿è¡è¯¥å½ä»¤æ¶ï¼ä½ ä¼è¢«è¦æ±å¡«åä¸ç³»åé®é¢ï¼è¿äºé®é¢çç­æ¡å°ä½ä¸ºè¯ä¹¦çä¸»é¢å­æ®µï¼Subjectï¼çä¸é¨åãä¾å¦ï¼</p>
<ul>
<li><strong>Country Name (2 letter code)</strong>: è¾å¥å½å®¶ä»£ç ï¼å¦&nbsp;<code>CN</code>ã</li>
<li><strong>State or Province Name (full name)</strong>: è¾å¥çä»½æå·çå¨åã</li>
<li><strong>Locality Name (eg, city)</strong>: è¾å¥åå¸åã</li>
<li><strong>Organization Name (eg, company)</strong>: è¾å¥ç»ç»åç§°ã</li>
<li><strong>Organizational Unit Name (eg, section)</strong>: è¾å¥é¨é¨åç§°ã</li>
<li><strong>Common Name (e.g. server FQDN or YOUR name)</strong>: (æ³¨æè¿ä¸ª) è¾å¥éç¨åç§°ï¼éå¸¸æ¯ç»ç»çååææè¿°æ§åç§°ï¼å¯¹äºæ ¹è¯ä¹¦èè¨ï¼å¯ä»¥æ¯ç±»ä¼¼äº&nbsp;<code>Root CA</code>&nbsp;çå­ç¬¦ä¸²ã</li>
<li><strong>Email Address</strong>: å¯éï¼å¯ä»¥çç©ºã</li>
</ul>
<ol start="3">
<li>éªè¯å¶åå®¹</li>
</ol>
<pre><code class="language-sh">openssl x509 -in root_ca.crt -text -noout
</code></pre>
<ol start="4">
<li>å®¢æ·ç«¯ä¿¡ä»»</li>
</ol>
<p>è³æ­¤</p>
<ul>
<li><code>root_ca.crt</code> æ¯CA èªç­¾åçå¸¦å¬é¥çè¯ä¹¦</li>
<li><code>root_ca.key</code> æ¯CAçç§é¥(ç»å¯¹ä¸è½æ³é²)</li>
</ul>
<p>ä¸ºäºè®©å®¢æ·ç«¯ä¿¡ä»»è¿ä¸ªæ°åå»ºçæ ¹è¯ä¹¦ï¼éè¦å°CAå¬é¥å®è£å°ç®æ ç³»ç»çåä¿¡ä»»æ ¹è¯ä¹¦å­å¨ä¸­ã<br>
ä¾å¦ï¼å¨Windowsä¸ï¼ä½ å¯ä»¥åå» <code>root_ca.crt</code> æä»¶ï¼ç¶åæç§æç¤ºéæ©âå®è£è¯ä¹¦âï¼å¹¶å°å®è£ä½ç½®è®¾ç½®ä¸ºâåä¿¡ä»»çæ ¹è¯ä¹¦é¢åæºæ</p>
<h3 id="ca-ç­¾ç½²é¢åæå¡ç«¯è¯ä¹¦">CA ç­¾ç½²/é¢åæå¡ç«¯è¯ä¹¦</h3>
<ol>
<li>çæç®æ å®ä½çç§é¥</li>
</ol>
<pre><code class="language-sh">openssl genpkey -algorithm RSA -out server.key -aes256 -pkeyopt rsa_keygen_bits:2048
</code></pre>
<ol start="2">
<li>çæç®æ å®ä½çç­¾åè¯·æ± (CSR)<br>
ä½¿ç¨ååçæçç§é¥æ¥åå»ºä¸ä¸ªè¯ä¹¦ç­¾åè¯·æ±ï¼CSRï¼ãCSRåå«äºç³è¯·èçå¬é¥ä»¥åä¸äºè¯å«ä¿¡æ¯ï¼å¦ç»ç»åç§°ãååç­ã</li>
</ol>
<pre><code class="language-sh">openssl req -new -key server.key -out server.csr

# openssl req -newkey rsa:2048 -nodes -keyout server.key -out server.csr -subj "/C=CN/ST=State/L=City/O=Organization/CN=your.server.domain"
</code></pre>
<ol start="3">
<li>ä½¿ç¨CAæ ¹è¯ä¹¦ç<strong>ç§é¥</strong> ç­¾ç½²CSR</li>
</ol>
<pre><code class="language-sh">openssl x509 -req -in server.csr -CA root_ca.crt -CAkey root_ca.key -CAcreateserial -out server.crt -days 7300 -sha256
# openssl x509 -req -in server.csr -CA rootCA.crt -CAkey rootCA.key -CAcreateserial -out server.crt -days 500 -sha256
</code></pre>
<h3 id="åæä»¶è¯´æ">åæä»¶è¯´æ</h3>
<p>è³æ­¤æ6ä¸ªæä»¶åå«æ¯:<br>
1.&nbsp;<strong>root_ca.crt (æ ¹CAè¯ä¹¦å¬é¥) - èªç­¾å å¬å¼ åæ¹ä¿¡ä»»</strong></p>
<ul>
<li><strong>æè¿°</strong>ï¼è¿æ¯ç±CAèªèº«åå»ºå¹¶ç­¾ç½²çèªç­¾åè¯ä¹¦ï¼ä½ä¸ºä¿¡ä»»é¾çèµ·ç¹ãæ ¹è¯ä¹¦éå¸¸åå«CAçå¬é¥ãåç§°åå¶ä»åæ°æ®ï¼å¹¶ä¸æ¯ç±CAç§é¥ç­¾åç</li>
<li><strong>ç¨é</strong>ï¼æ ¹è¯ä¹¦ç¨äºéªè¯ç±è¯¥CAç­¾åçææä¸çº§è¯ä¹¦ççå®æ§ãå®éå¸¸è¢«é¢è£å¨æä½ç³»ç»ãæµè§å¨æå¶ä»åºç¨ç¨åºçä¿¡ä»»åºä¸­ï¼ä½ä¸ºåä¿¡ä»»çæ ¹è¯ä¹¦æºæ</li>
</ul>
<p>2.&nbsp;<strong>root_ca.key (æ ¹CAè¯ä¹¦ç§é¥)</strong></p>
<ul>
<li><strong>æè¿°</strong>ï¼è¿æ¯ä¸æ ¹CAè¯ä¹¦éå¯¹çç§é¥ï¼ç¨äºç­¾ç½²å¶ä»è¯ä¹¦ãç§é¥æ¯é«åº¦ææçä¿¡æ¯ï¼ä¸åºå¬å¼æå±äº«ã</li>
<li><strong>ç¨é</strong>ï¼æ ¹CAç§é¥ç¨äºç­¾ç½²ä¸­é´CAè¯ä¹¦ãæå¡å¨è¯ä¹¦ãå®¢æ·ç«¯è¯ä¹¦ç­ãå®æ¯å»ºç«ä¿¡ä»»é¾çåºç¡ã</li>
<li><strong>å®å¨æ§</strong>ï¼ç§é¥åºå­å¨å¨å®å¨çå°æ¹ï¼æå¥½æ¯å¨ç¦»çº¿ç¯å¢ä¸­ï¼åªæå¨éè¦ç­¾ç½²æ°è¯ä¹¦æ¶æè¿æ¥å°ç½ç»ã å®ä¸æ¦è¢«æ»ç ´ï¼ææä¾èµå®çè¯ä¹¦é½å°å¤±å»ä¿¡ä»»ã</li>
</ul>
<p>3.&nbsp;<strong>root_ca.srl (åºåå·æä»¶)</strong></p>
<ul>
<li><strong>æè¿°</strong>ï¼è¿æ¯ä¸ä¸ªåå«åå­è¿å¶æ­£æ´æ°çæä»¶ï¼ç¨äºè®°å½å·²ç­¾åè¯ä¹¦çåºåå·ãæ¯æ¬¡ç­¾ç½²æ°è¯ä¹¦æ¶ï¼OpenSSLä¼ä»è¿ä¸ªæä»¶ä¸­è¯»åå½åçæå¤§åºåå·ï¼å¹¶ä¸ºæ°è¯ä¹¦åéä¸ä¸ªéå¢çåºåå·ã</li>
</ul>
<p>4.&nbsp;<strong>server.crt (æå¡å¨å¬é¥)</strong></p>
<ul>
<li><strong>æè¿°</strong>ï¼è¿æ¯ç±CAç­¾ç½²çæå¡å¨è¯ä¹¦ï¼åå«æå¡å¨çå¬é¥ä»¥åå³äºè¯ä¹¦çä¸äºä¿¡æ¯ï¼å¦çæ¬ãåºåå·ãç­¾åç®æ³ãé¢åèãææèãæææç­ãæå¡å¨è¯ä¹¦ç¨äºå å¯å®¢æ·ç«¯ä¸æå¡å¨ä¹é´çéä¿¡ï¼ç¡®ä¿æ°æ®ä¼ è¾çå®å¨æ§ã</li>
<li><strong>ç¨é</strong>ï¼æå¡å¨è¯ä¹¦å®è£å¨Webæå¡å¨ä¸ï¼ç¨äºHTTPSåè®®ä¸çå®å¨éä¿¡ãå®¢æ·ç«¯éè¿éªè¯æå¡å¨è¯ä¹¦çæææ§æ¥ç¡®è®¤æå¡å¨çèº«ä»½ï¼å¹¶ä½¿ç¨è¯ä¹¦ä¸­çå¬é¥è¿è¡å å¯éä¿¡ã</li>
<li><strong>æ ¼å¼</strong>ï¼å¸¸è§çæ ¼å¼åæ¬PEMï¼ä»¥&nbsp;<code>-----BEGIN CERTIFICATE-----</code>&nbsp;å¼å¤´ï¼<code>-----END CERTIFICATE-----</code>&nbsp;ç»å°¾ï¼åDERï¼äºè¿å¶æ ¼å¼ï¼ãLinuxç³»ç»éå¸¸ä½¿ç¨&nbsp;<code>.crt</code>&nbsp;æä»¶æ©å±åï¼èWindowsç³»ç»å¯è½ä½¿ç¨&nbsp;<code>.cer</code></li>
</ul>
<p>5.&nbsp;<strong>server.csr (è¯ä¹¦ç­¾åè¯·æ±)</strong></p>
<ul>
<li><strong>æè¿°</strong>ï¼è¿æ¯è¯ä¹¦ç³è¯·èå¨ç³è¯·æ°å­è¯ä¹¦æ¶çæçæä»¶ï¼åå«äºå¬é¥åæ è¯åç§°ï¼Distinguished Name, DNï¼ï¼å¦å½å®¶ãçä»½ãåå¸ãç»ç»åç§°ãéç¨åç§°ï¼éå¸¸æ¯ååï¼ç­ãCSRæ¯ä»¥&nbsp;<code>-----BEGIN CERTIFICATE REQUEST-----</code>&nbsp;å¼å¤´ï¼<code>-----END CERTIFICATE REQUEST-----</code>&nbsp;ç»å°¾çBase64ç¼ç æ ¼å¼ã</li>
<li><strong>ç¨é</strong>ï¼CSRæä»¶æäº¤ç»CAåï¼CAä¼ä½¿ç¨å¶æ ¹è¯ä¹¦ç§é¥å¯¹CSRä¸­çä¿¡æ¯è¿è¡ç­¾åï¼çææ­£å¼çæ°å­è¯ä¹¦ãCSRæä»¶æ¬èº«ä¸æ¯è¯ä¹¦ï¼èæ¯ç³è¯·è¯ä¹¦çè¯·æ±ã</li>
<li><strong>çæ</strong>ï¼CSRæä»¶éå¸¸ç±æå¡å¨ç®¡çåä½¿ç¨OpenSSLç­å·¥å·çæï¼åæ¶çæç¸åºçç§é¥ãçæCSRæ¶ï¼å¿é¡»ç¡®ä¿ç§é¥çå®å¨æ§ï¼å ä¸ºCSRæä»¶ä¸­ä¸åå«ç§é¥</li>
</ul>
<p>6.&nbsp;<strong>server.key (æå¡å¨ç§é¥)</strong></p>
<ul>
<li><strong>æè¿°</strong>ï¼è¿æ¯ä¸æå¡å¨è¯ä¹¦éå¯¹çç§é¥ï¼ç¨äºè§£å¯å®¢æ·ç«¯åéçå å¯ä¿¡æ¯ãç§é¥æ¯é«åº¦ææçä¿¡æ¯ï¼ä¸åºå¬å¼æå±äº«ã</li>
<li><strong>ç¨é</strong>ï¼æå¡å¨ç§é¥ç¨äºè§£å¯éè¿TLS/SSLåè®®ä¼ è¾çæ°æ®ãå¨HTTPSéä¿¡ä¸­ï¼å®¢æ·ç«¯ä½¿ç¨æå¡å¨è¯ä¹¦ä¸­çå¬é¥å å¯æ°æ®ï¼æå¡å¨åä½¿ç¨ç§é¥è§£å¯è¿äºæ°æ®ã</li>
<li><strong>æ ¼å¼</strong>ï¼å¸¸è§çæ ¼å¼åæ¬PEMï¼ä»¥&nbsp;<code>-----BEGIN RSA PRIVATE KEY-----</code>&nbsp;æ&nbsp;<code>-----BEGIN PRIVATE KEY-----</code>&nbsp;å¼å¤´ï¼<code>-----END RSA PRIVATE KEY-----</code>&nbsp;æ&nbsp;<code>-----END PRIVATE KEY-----</code>&nbsp;ç»å°¾ï¼åDERï¼äºè¿å¶æ ¼å¼ï¼ãLinuxç³»ç»éå¸¸ä½¿ç¨&nbsp;<code>.key</code>&nbsp;æä»¶æ©å±å</li>
</ul>
<h4 id="æ¯ä¸ªè§è²éªè¯éè¦">æ¯ä¸ªè§è²éªè¯éè¦</h4>
<ol>
<li>**å®¢æ·ç«¯éè¦</li>
</ol>
<ul>
<li><strong><code>root_ca.crt</code></strong>ï¼æ ¹ CA çå¬é¥è¯ä¹¦ãå®¢æ·ç«¯å°ä½¿ç¨æ­¤è¯ä¹¦æ¥éªè¯æå¡å¨çè¯ä¹¦æ¯å¦ç±å¯ä¿¡ç CA ç­¾åã</li>
</ul>
<ol>
<li>**æå¡ç«¯ç«¯éè¦</li>
</ol>
<ul>
<li><strong><code>server.key</code></strong>ï¼æå¡å¨çç§é¥ãæå¡å¨å°ä½¿ç¨æ­¤ç§é¥æ¥è§£å¯å®¢æ·ç«¯åéçå å¯æ°æ®ï¼å¹¶ç­¾ç½²ååºã</li>
<li><strong><code>server.crt</code></strong>ï¼æå¡å¨çå¬é¥è¯ä¹¦ï¼ç±æ ¹ CA ç­¾åãæå¡å¨å°ä½¿ç¨æ­¤è¯ä¹¦åå®¢æ·ç«¯è¯æå¶èº«ä»½ã</li>
<li><strong><code>root_ca.crt</code></strong>ï¼å¯é, ååéªè¯å¿éï¼ï¼å¦æä½ çæå¡å¨è¯ä¹¦æ¯ç±ä¸­é´ CA ç­¾åçï¼ä½ å¯ä»¥å°æ ¹ CA è¯ä¹¦æä¸­é´ CA è¯ä¹¦é¾ä¸èµ·å è½½å°æå¡å¨çä¿¡ä»»åºä¸­ï¼ä»¥ä¾¿å®¢æ·ç«¯å¯ä»¥éªè¯æ´ä¸ªè¯ä¹¦é¾ã</li>
</ul>
<h2 id="å¨netty-ä½¿ç¨">å¨Netty ä½¿ç¨</h2>
<h3 id="è¯ä¹¦çå è½½">è¯ä¹¦çå è½½</h3>
<ol>
<li>
<p>å¬é¥å è½½  <code>.pem, .crt, .cer</code>  : éå¸¸ä»¥&nbsp;<code>-----BEGIN CERTIFICATE-----</code>&nbsp;å¼å¤´ï¼ä»¥&nbsp;<code>-----END CERTIFICATE-----</code>&nbsp;ç»å°¾ãå®æ¢å¯ä»¥åå«å¬é¥è¯ä¹¦ï¼ä¹å¯ä»¥åå«ç§é¥ã<strong>Javaæ¬èº«æ¯æ pem</strong></p>
</li>
<li>
<p>ç§é¥å è½½ <code>.key</code>:  openssl é»è®¤ç»ç§é¥å å¯äº , å°å¶è½¬ä¸ºä¸å å¯ç, å¯ä½¿ç¨ bouncycastleå è½½ä¹</p>
</li>
</ol>
<pre><code># **è½¬æ¢ä¸º PKCS#8 æ ¼å¼ (PEM ç¼ç )**
openssl pkcs8 -topk8 -inform PEM -in server.key -outform PEM -nocrypt -out server_pkcs8.key

# **è½¬æ¢ä¸º PKCS#8 æ ¼å¼ (DER ç¼ç )** äºè¿å¶æ ¼å¼
openssl pkcs8 -topk8 -inform PEM -in server.key -outform DER -nocrypt -out server_pkcs8.der
</code></pre>
<ul>
<li>ä½¿ç¨ bouncycastle å è½½ pkcs8 ç§é¥</li>
</ul>
<pre><code>implementation("cn.hutool:hutool-all:5.8.16")
implementation("org.bouncycastle:bcprov-jdk15on:1.70")
implementation("org.bouncycastle:bcpkix-jdk15on:1.70")
</code></pre>
<pre><code class="language-java">

public static void main(String[] args) throws Exception {

	final String ca_cet = "E:\\content-for-work\\2024-12XXXXAPP\\tls_test\\root_ca.crt";
	final String server_crt = "E:\\content-for-work\\2024-12XXXXAPP\\tls_test\\server.crt";

	final String server_key = "E:\\content-for-work\\2024-12XXXXAPP\\tls_test\\server.key";
	final String server_pkcs8_key = "E:\\content-for-work\\2024-12XXXXAPP\\tls_test\\server_pkcs8.key";
	
	PublicKey root_caKey = PemUtil.readPemPublicKey(FileUtil.getInputStream(ca_cet));
	System.out.println("root_caKey  ==&gt; "+root_caKey );
	Certificate certificate = SecureUtil.readX509Certificate(FileUtil.getInputStream(server_crt));
	System.out.println("X509C  ==&gt; "+root_caKey );
	
	PublicKey server_crtKey = PemUtil.readPemPublicKey(FileUtil.getInputStream(server_crt));
	System.out.println("server_crtKey  ==&gt; "+server_crtKey );

	PrivateKey privateKey = PemUtil.readPemPrivateKey(FileUtil.getInputStream(server_pkcs8_key));
	System.out.println("server_pkcs8  ==&gt; "+privateKey );
}
</code></pre>
<ul>
<li>ä½¿ç¨ bouncycastle å¦ä½ å è½½é»è®¤ openssl å å¯ç <code>server.key</code> ?</li>
</ul>
<pre><code class="language-java">public static PrivateKey loadEncryptedPrivateKeyFromPem(String pemFile, char[] password) throws Exception {
	try (Reader reader = new FileReader(pemFile);
		 PEMParser pemParser = new PEMParser(reader)) {

		Object object = pemParser.readObject();
		JcaPEMKeyConverter converter = new JcaPEMKeyConverter().setProvider("BC");

		if (object instanceof PEMEncryptedKeyPair) {
			PEMEncryptedKeyPair encryptedKeyPair = (PEMEncryptedKeyPair) object;
			InputDecryptorProvider decryptorProvider = new JceOpenSSLPKCS8DecryptorProviderBuilder().build(password);
			KeyPair kp = converter.getKeyPair(encryptedKeyPair.decryptKeyPair(decryptorProvider));
			return kp.getPrivate();
		} else {
			throw new IllegalArgumentException("Unsupported encrypted key type: " + object.getClass().getName());
		}
	}
}


</code></pre>
<h3 id="ååéªè¯çtls">ååéªè¯çTLS</h3>
<p>å®¢æ·ç«¯ååäºéªè¯æå¡ç«¯</p>
<h4 id="æå¡ç«¯">æå¡ç«¯</h4>
<pre><code class="language-java">public static void main(String[] args) throws Exception {

	NioEventLoopGroup boosGroup = new NioEventLoopGroup();
	final ServerBootstrap serverBootstrap = new ServerBootstrap();
	int port = 19977;
	// 1. å è½½ PEM ç§é¥,  2.  å è½½ è¯ä¹¦
	final String server_crt = "E:\\content-for-work\\2024-12XXXXAPP\\tls_test\\server.crt";
	final String server_pkcs8_key = "E:\\content-for-work\\2024-12XXXXAPP\\tls_test\\server_pkcs8.key";

	Certificate certificate = SecureUtil.readX509Certificate(FileUtil.getInputStream(server_crt));
	PrivateKey privateKey = PemUtil.readPemPrivateKey(FileUtil.getInputStream(server_pkcs8_key));
	// 3. åå»º KeyStore å¹¶å°ç§é¥åè¯ä¹¦æ·»å å°å¶ä¸­
	KeyStore keyStore = KeyStore.getInstance("PKCS12");
	keyStore.load(null, null);
	keyStore.setKeyEntry("alias", privateKey, "password".toCharArray(), new Certificate[]{certificate});

	// 4. åå»º KeyManagerFactory å¹¶åå§å
	KeyManagerFactory kmf = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
	kmf.init(keyStore, "password".toCharArray());

	// 5. æå»º SslContext
	final SslContext sslContext = SslContextBuilder.forServer(kmf)
			.build();

	serverBootstrap
			.group(boosGroup)
			.channel(NioServerSocketChannel.class)
			.option(ChannelOption.SO_BACKLOG, 1024)
			.childOption(ChannelOption.SO_KEEPALIVE, true)
			.childOption(ChannelOption.TCP_NODELAY, true)
			.childHandler(new ChannelInitializer&lt;NioSocketChannel&gt;() {
				@Override
				protected void initChannel(NioSocketChannel ch) {
					// æ·»å  SSL/TLS å¤çå¨
					ch.pipeline().addLast(sslContext.newHandler(ch.alloc()));
					ch.pipeline().addLast(new StringDecoder())
							.addLast(new StringEncoder())
							.addLast(new ServerHandler());
				}
			});
	ChannelFuture f = serverBootstrap.bind(port).addListener(future -&gt; {
		if (future.isSuccess()) {
			System.out.println(new Date() + ": ç«¯å£[" + port + "]ç»å®æå!");
		} else {
			System.err.println("ç«¯å£[" + port + "]ç»å®å¤±è´¥!");
		}
	});
	//ä¸é¢ä¼è¿è¡é»å¡, ç­å¾æå¡å¨è¿æ¥å³é­ä¹å main æ¹æ³éåº, ç¨åºç»æ;
	f.channel().closeFuture().sync();
}
</code></pre>
<h4 id="å®¢æ·ç«¯">å®¢æ·ç«¯</h4>
<pre><code class="language-java"> public static void main(String[] args) throws Exception {
 
	Bootstrap bootstrap = new Bootstrap();
	NioEventLoopGroup group = new NioEventLoopGroup();

	String host = "192.168.20.130";
	int port = 19977;

	// 1. å è½½ CA è¯ä¹¦
	final String ca_cet = "E:\\content-for-work\\2024-12XXXXAPP\\tls_test\\root_ca.crt";
	Certificate certificate = SecureUtil.readX509Certificate(FileUtil.getInputStream(ca_cet));

	// 2. åå»º KeyStore å¹¶å° CA è¯ä¹¦æ·»å å°ä¿¡ä»»åºä¸­
	KeyStore trustStore = KeyStore.getInstance("JKS");
	trustStore.load(null, null);
	trustStore.setCertificateEntry("ca", certificate);

	// 3. åå»º TrustManagerFactory å¹¶åå§å
	TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
	tmf.init(trustStore);

	// 4. æå»º SslContext
	SslContext build = SslContextBuilder.forClient()
			.trustManager(tmf)
			.build();

	bootstrap.group(group)
			.channel(NioSocketChannel.class)
			.option(ChannelOption.CONNECT_TIMEOUT_MILLIS, 30000)
			.option(ChannelOption.SO_KEEPALIVE, true)
			.handler( new SimpleChannelInboundHandler&lt;String&gt;() {
				@Override
				protected void channelRead0(ChannelHandlerContext ctx, String msg) throws Exception {
					System.out.println("å®¢æ·ç«¯æ¥æ¶: "+msg);
				}
			})
			.connect(host, port).addListener(new ChannelFutureListener() {
				@Override
				public void operationComplete(ChannelFuture future) throws Exception {
					future.channel().pipeline()
							.addFirst(new StringEncoder())
							.addFirst(new StringDecoder())
							.addFirst( build.newHandler(future.channel().alloc() ));
					final String helloToServer = "ç çä¹°æ­ç¬ï¼ç³ç³ å»è´¤æãæ¹ç¥é»é¹ä¸¾ï¼åéç¬å¾å¾ã"+System.currentTimeMillis();
					future.channel().writeAndFlush(helloToServer);
				}
			});
//        group.shutdownGracefully();
    }

</code></pre>
<p>Android ä¸ä½¿ç¨ java.security.KeyStore æ¶ï¼å¯è½ä¼éå° KeyStoreException: JKS not found çéè¯¯ãè¿æ¯å ä¸º Android çå®å¨æ¡æ¶ä¸æ å Java ä¸åï¼Android å¹¶ä¸æ¯æ JKSï¼Java KeyStoreï¼æ ¼å¼ãç¸åï¼Android æ¯æå¶ä»ç±»åçå¯é¥åºï¼å¦ BKSï¼Bouncy Castle KeyStoreï¼å PKCS12ã</p>
<pre><code class="language-java">private SslContext getSslContext() throws Exception {
	Certificate caCert = CertificateUtils.getCertificate();
	KeyStore trustStore = KeyStore.getInstance("BKS");  // ä½¿ç¨ BKS æ PKCS12
	trustStore.load(null, null);
	trustStore.setCertificateEntry("ca", caCert);

	TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
	tmf.init(trustStore);

	SslContext build = SslContextBuilder.forClient()
			.trustManager(tmf)
			.build();
	return build;
}
</code></pre>
<p>æåçç<br>
![[Pasted image 20241219145126.png]]</p>
<h3 id="ååéªè¯çtls">ååéªè¯çTLS</h3>
<p>å¶å®åæå¡ç«¯ä¸æ ·çé»è¾ 1.çæå®¢æ·ç«¯ç§é¥, 2.çæå®¢æ·ç«¯CRS, 3.ç¨CAæ ¹è¯ä¹¦ç­¾åå®¢æ·ç«¯çå¬é¥</p>
<h4 id="å®¢æ·ç«¯è¯ä¹¦åå¤">å®¢æ·ç«¯è¯ä¹¦åå¤</h4>
<h5 id="çæå®¢æ·ç«¯ç§é¥"><strong>çæå®¢æ·ç«¯ç§é¥</strong></h5>
<pre><code>openssl genpkey -algorithm RSA -out client.key -aes256 -pkeyopt rsa_keygen_bits:2048
</code></pre>
<p>è½¬æ¢ä¸ºpkcs#8 æ ¼å¼</p>
<pre><code>openssl pkcs8 -topk8 -inform PEM -in client.key -outform PEM -nocrypt -out client_pkcs8.key
</code></pre>
<h5 id="åå»ºå®¢æ·ç«¯çè¯ä¹¦ç­¾åè¯·æ±-csr"><strong>åå»ºå®¢æ·ç«¯çè¯ä¹¦ç­¾åè¯·æ± (CSR)</strong></h5>
<pre><code>openssl req -new -key client.key -out client.csr
</code></pre>
<h5 id="ä½¿ç¨æ ¹-ca-ç­¾åå®¢æ·ç«¯ç-csr"><strong>ä½¿ç¨æ ¹ CA ç­¾åå®¢æ·ç«¯ç CSR</strong></h5>
<pre><code>openssl x509 -req -in client.csr -CA root_ca.crt -CAkey root_ca.key -CAcreateserial -out client.crt -days 7300 -sha256

</code></pre>
<h4 id="æå¡ç«¯-1">æå¡ç«¯</h4>
<pre><code class="language-java">public static void main(String[] args) throws Exception {
        NioEventLoopGroup boosGroup = new NioEventLoopGroup();
        final ServerBootstrap serverBootstrap = new ServerBootstrap();
        int port = 19977;
        // 1. å è½½ PEM ç§é¥,  2.  å è½½ è¯ä¹¦
        final String server_crt = "E:\\content-for-work\\2024-12XXXXAPP\\tls_test\\server.crt";
        final String server_pkcs8_key = "E:\\content-for-work\\2024-12XXXXAPP\\tls_test\\server_pkcs8.key";

        Certificate certificate = SecureUtil.readX509Certificate(FileUtil.getInputStream(server_crt));
        PrivateKey privateKey = PemUtil.readPemPrivateKey(FileUtil.getInputStream(server_pkcs8_key));
        // 3. åå»º KeyStore å¹¶å°ç§é¥åè¯ä¹¦æ·»å å°å¶ä¸­
        KeyStore keyStore = KeyStore.getInstance("PKCS12");
        keyStore.load(null, null);
        keyStore.setKeyEntry("alias", privateKey, "password".toCharArray(), new Certificate[]{certificate});

        // 4. åå»º KeyManagerFactory å¹¶åå§å
        KeyManagerFactory kmf = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
        kmf.init(keyStore, "password".toCharArray());

        //ååè®¤è¯ CAæ ¹è¯ä¹¦
        final String root_ca = "E:\\content-for-work\\2024-12XXXXAPP\\tls_test\\root_ca.crt";
        X509Certificate caCertificate = (X509Certificate) SecureUtil.readX509Certificate(FileUtil.getInputStream(root_ca));

        // 5. æå»º SslContext
        final SslContext sslContext = SslContextBuilder.forServer(kmf)
                .trustManager(caCertificate)
                .clientAuth(io.netty.handler.ssl.ClientAuth.REQUIRE)//ååè®¤è¯ &gt; éç½®è¦æ±å®¢æ·ç«¯ä¹è®¤è¯
                .build();

        serverBootstrap
                .group(boosGroup)
                .channel(NioServerSocketChannel.class)
                .option(ChannelOption.SO_BACKLOG, 1024)
                .childOption(ChannelOption.SO_KEEPALIVE, true)
                .childOption(ChannelOption.TCP_NODELAY, true)
                .childHandler(new ChannelInitializer&lt;NioSocketChannel&gt;() {
                    @Override
                    protected void initChannel(NioSocketChannel ch) {
                        // æ·»å  SSL/TLS å¤çå¨
                        ch.pipeline().addLast(sslContext.newHandler(ch.alloc()));
                        ch.pipeline().addLast(new StringDecoder())
                                .addLast(new StringEncoder())
                                .addLast(new ServerHandler());
                    }
                });
        ChannelFuture f = serverBootstrap.bind(port).addListener(future -&gt; {
            if (future.isSuccess()) {
                System.out.println(new Date() + ": ç«¯å£[" + port + "]ç»å®æå!");
            } else {
                System.err.println("ç«¯å£[" + port + "]ç»å®å¤±è´¥!");
            }
        });
        //ä¸é¢ä¼è¿è¡é»å¡, ç­å¾æå¡å¨è¿æ¥å³é­ä¹å main æ¹æ³éåº, ç¨åºç»æ;
        f.channel().closeFuture().sync();
    }
</code></pre>
<h4 id="å®¢æ·ç«¯-1">å®¢æ·ç«¯</h4>
<pre><code class="language-java">public static void main(String[] args) throws Exception {
        Bootstrap bootstrap = new Bootstrap();
        NioEventLoopGroup group = new NioEventLoopGroup();

        String host = "192.168.20.130";
        int port = 19977;

        // 1. å è½½ CA è¯ä¹¦
        final String ca_cet = "E:\\content-for-work\\2024-12XXXXAPP\\tls_test\\root_ca.crt";
        Certificate certificate = SecureUtil.readX509Certificate(FileUtil.getInputStream(ca_cet));

        // 2. åå»º KeyStore å¹¶å° CA è¯ä¹¦æ·»å å°ä¿¡ä»»åºä¸­
        KeyStore trustStore = KeyStore.getInstance("JKS");
        trustStore.load(null, null);
        trustStore.setCertificateEntry("ca", certificate);

        // 3. åå»º TrustManagerFactory å¹¶åå§å
        TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
        tmf.init(trustStore);

        // ååè®¤è¯ &gt; å®¢æ·ç«¯è¯ä¹¦
        final String client_crt = "E:\\content-for-work\\2024-12XXXXAPP\\tls_test\\client.crt";
        final String client_pkcs8_key = "E:\\content-for-work\\2024-12XXXXAPP\\tls_test\\client_pkcs8.key";

        // 4. æå»º SslContext
        SslContext build = SslContextBuilder.forClient()
                .keyManager(FileUtil.file(client_crt), FileUtil.file(client_pkcs8_key))
                .trustManager(tmf)
                .build();

        bootstrap.group(group)
                .channel(NioSocketChannel.class)
                .option(ChannelOption.CONNECT_TIMEOUT_MILLIS, 30000)
                .option(ChannelOption.SO_KEEPALIVE, true)
                .handler( new SimpleChannelInboundHandler&lt;String&gt;() {
                    @Override
                    protected void channelRead0(ChannelHandlerContext ctx, String msg) throws Exception {
                        System.out.println("å®¢æ·ç«¯æ¥æ¶: "+msg);
                    }
                })
                .connect(host, port).addListener(new ChannelFutureListener() {
                    @Override
                    public void operationComplete(ChannelFuture future) throws Exception {
                        future.channel().pipeline()
                                .addFirst(new StringEncoder())
                                .addFirst(new StringDecoder())
                                .addFirst( build.newHandler(future.channel().alloc() ));
                        final String helloToServer = "ç çä¹°æ­ç¬ï¼ç³ç³ å»è´¤æãæ¹ç¥é»é¹ä¸¾ï¼åéç¬å¾å¾ã"+System.currentTimeMillis();
                        future.channel().writeAndFlush(helloToServer);
                    }
                });
//        group.shutdownGracefully();
    }
</code></pre>
<p>æå, æåçç</p>
<p><img alt="Pasted image 20241220115443" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3723410/202601/3723410-20260107211411779-495482547.png" class="lazyload"></p>

</div>
<div id="MySignature" role="contentinfo">
    é¢é²èå¹´ç´åï¼ä¿æç»èº«å­¦ä¹ !    ââ <a href="https://www.cnblogs.com/dddy/" target="_blank">daidaidaiyu</a>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.001388888888888889" data-date-updated="2026-01-07 21:20">2026-01-07 21:18</span>&nbsp;
<a href="https://www.cnblogs.com/dddy">daidaidaiyu</a>&nbsp;
éè¯»(<span id="post_view_count">94</span>)&nbsp;
è¯è®º(<span id="post_comment_count">2</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19453911);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19453911', targetLink: 'https://www.cnblogs.com/dddy/p/19453911', title: 'ä¸æå­¦ä¹ åå®è·µ å½ä¸äºèç½å®å¨çåºç³  -  TLS å SSL' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Supertonic é¨ç½²ä¸ä½¿ç¨å¨æµç¨ä¿å§çº§æåï¼éå·²é¨ç½²éåï¼ ]]></title>
    <link>https://www.cnblogs.com/ChenAI-TGF/p/19453758</link>
    <guid>e6b1a363c1c9e8d2a13bb36d772066b6</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ChenAI-TGF/p/19453758" title="åå¸äº 2026-01-07 19:57">
    <span role="heading" aria-level="2">Supertonic é¨ç½²ä¸ä½¿ç¨å¨æµç¨ä¿å§çº§æåï¼éå·²é¨ç½²éåï¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        Supertonicå¼æºå·¥å·Pythonçé¨ç½²ä¸ä½¿ç¨æå æè¦ï¼æ¬æè¯¦ç»ä»ç»äºSupertonic(ä¸æ¬¾è¯­é³å¤çå·¥å·)Pythonçæ¬çå®æ´é¨ç½²æµç¨ï¼åæ¬æå¡å¨ç¯å¢åå¤ãæºç ä¸è½½ãä¾èµå®è£ãå¸¸è§æ¥éè§£å³æ¹æ³ç­å³é®æ­¥éª¤ãé¨ç½²æååï¼ç¨æ·åªéä¿®æ¹ç¤ºä¾èæ¬ä¸­çææ¬åå®¹ï¼å³å¯çæå¯¹åºçé³é¢ç»ææä»¶ãæç« è¿æä¾äºå·²é¨ç½²éåçè·åæ¹å¼ï¼å¸®å©ç¨æ·å¿«éä¸æãé¨ç½²è¿ç¨ä¸­éæ³¨ææ¨¡åèªå¨ä¸è½½ãä¾èµçæ¬å²çªç­å¸¸è§é®é¢ãéè¿æ¬æåï¼ç¨æ·å¯ä»¥å¿«éå®æSupertonicçç¯å¢æ­å»ºå¹¶å¼å§ä½¿ç¨å¶æ ¸å¿åè½ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="åè¨">åè¨</h1>
<p>Supertonic æ¯ä¸æ¬¾å®ç¨çå¼æºå·¥å·ï¼æ³¨ï¼å¯æ ¹æ®å®éè¡¥åSupertonicçæ ¸å¿åè½ï¼å¦è¯­é³åæ/å¤çç­ï¼ï¼æ¬æå°è¯¦ç»è®²è§£å¶ Python çæ¬çå®æ´é¨ç½²æµç¨ãæ¥å¸¸ä½¿ç¨æ¹æ³ï¼å¹¶éä¸æå·²é¨ç½²å¥½çéåé¾æ¥ï¼å¸®å¤§å®¶å¿«éä¸æã</p>
<p><img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202601/3724025-20260107195649618-199267446.png" class="lazyload"></p>
<h1 id="ä¸é¨ç½²ååå¤">ä¸ãé¨ç½²ååå¤</h1>
<ol>
<li>æå¡å¨ç¯å¢è¦æ±ï¼å·²å®è£ Python 3.7+ï¼æ¨è3.8-3.10ï¼ãpip å·¥å·ï¼ç¡®ä¿æå¡å¨æåºç¡çç½ç»è®¿é®æéï¼</li>
<li>å·¥å·åå¤ï¼æ¬å°çµèï¼ææå¡å¨ï¼å¯éè¿ <code>scp</code>/<code>rz</code>/<code>sftp</code> ç­æ¹å¼ä¼ è¾æä»¶å°æå¡å¨ã<br>
<strong>æçæå¡å¨æ¯å¨æå¾ä¸é¢ç§ç4090ï¼1.46åä¸å°æ¶ï¼ç¸å¯¹æ¥è¯´è¿æ¯å¾ä¾¿ç</strong><br>
<img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202601/3724025-20260107195649668-2001880825.png" class="lazyload"></li>
</ol>
<h1 id="äºå®æ´é¨ç½²æ­¥éª¤">äºãå®æ´é¨ç½²æ­¥éª¤</h1>
<h2 id="æ­¥éª¤1ä»githubä¸è½½æºç å">æ­¥éª¤1ï¼ä»GitHubä¸è½½æºç å</h2>
<p>é¦åå¨æ¬å°ææå¡å¨ç´æ¥ä¸è½½ Supertonic ç Python çæ¬æºç ï¼GitHub å°åï¼è¯·æ¿æ¢ä¸ºå®éå°åï¼ï¼</p>
<pre><code class="language-bash"># æ¹å¼1ï¼æå¡å¨ç´æ¥gitåéï¼æ¨èï¼
git clone https://github.com/supertone-inc/supertonic

# æ¹å¼2ï¼æ¬å°ä¸è½½zipååï¼æå¨ä¸ä¼ å°æå¡å¨
# è®¿é®ä¸è¿°GitHubå°åï¼ç¹å»ãCodeãâãDownload ZIPãä¸è½½åç¼©å
</code></pre>
<p>githubé¾æ¥ï¼<a href="https://github.com/supertone-inc/supertonic" target="_blank" rel="noopener nofollow">https://github.com/supertone-inc/supertonic</a><br>
<img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202601/3724025-20260107195649680-2133932629.png" class="lazyload"></p>
<h2 id="æ­¥éª¤2å°æºç åè½¬ç§»å°æå¡å¨">æ­¥éª¤2ï¼å°æºç åè½¬ç§»å°æå¡å¨</h2>
<p>å¦ææ¯æ¬å°ä¸è½½ç zip åï¼éè¿jupyterå¯ä»¥ç´æ¥æå¨ä¸ä¼ å°æå¡å¨ä¸é¢<br>
<img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202601/3724025-20260107195649636-1154924533.png" class="lazyload"></p>
<h2 id="æ­¥éª¤3è§£åç¨åºå">æ­¥éª¤3ï¼è§£åç¨åºå</h2>
<p>ç»å½æå¡å¨ï¼è¿å¥æä»¶å­æ¾ç®å½ï¼è§£åæºç åï¼<br>
<strong>å¨å·¦ä¾§åæ¢å°åç¼©åæå¨çç®å½çæ¶åï¼å³è¾¹çé¢ç¹å» Terminal</strong></p>
<p><img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202601/3724025-20260107195649647-891125903.png" class="lazyload"></p>
<p><strong>è¾å¥ä»¥ä¸å½ä»¤è§£åå</strong></p>
<pre><code class="language-bash"># è§£åzipåï¼å¦ææ¯gitåéåæ éæ­¤æ­¥éª¤ï¼
unzip supertonic-main.zip

# è§£ååä¼çæ supertonic-main ç®å½
</code></pre>
<p><img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202601/3724025-20260107195649808-2133835779.png" class="lazyload"></p>
<h2 id="æ­¥éª¤4è¿å¥æå®è·¯å¾å¹¶å®è£ä¾èµ">æ­¥éª¤4ï¼è¿å¥æå®è·¯å¾å¹¶å®è£ä¾èµ</h2>
<p>è¿å¥ Supertonic Python ä»£ç çæ ¸å¿è·¯å¾ï¼å®è£ <code>requirements.txt</code> ä¸­çä¾èµï¼</p>
<pre><code class="language-bash"># è¿å¥supertonic-main/pyè·¯å¾
cd supertonic-main/py/

# å®è£ä¾èµï¼å»ºè®®ååçº§pipï¼é¿åå®è£å¤±è´¥ï¼
pip install --upgrade pip
pip install -r requirements.txt
</code></pre>
<p><img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202601/3724025-20260107195649631-2079176817.png" class="lazyload"></p>
<p><img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202601/3724025-20260107195649677-710582269.png" class="lazyload"></p>
<h2 id="æ­¥éª¤5é¦æ¬¡è¿è¡ç¤ºä¾èæ¬å¹¶è¡¥åç¼ºå¤±åº">æ­¥éª¤5ï¼é¦æ¬¡è¿è¡ç¤ºä¾èæ¬å¹¶è¡¥åç¼ºå¤±åº</h2>
<p>è¿è¡ç¤ºä¾èæ¬ <code>example_pypi.py</code>ï¼æ­¤æ¶å¤§æ¦çä¼æç¤ºç¼ºå°æä¸ªåºï¼å¦ <code>supertonic</code> åºï¼ï¼</p>
<pre><code class="language-bash"># é¦æ¬¡è¿è¡ç¤ºä¾èæ¬
python example_pypi.py
</code></pre>
<p><img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202601/3724025-20260107195649602-1937049400.png" class="lazyload"></p>
<h3 id="å¸¸è§æ¥éç¤ºä¾">å¸¸è§æ¥éç¤ºä¾ï¼</h3>
<pre><code>ModuleNotFoundError: No module named 'supertonic'
</code></pre>
<h4 id="è§£å³æ¹æ³">è§£å³æ¹æ³ï¼</h4>
<p>æ ¹æ®æ¥éæç¤ºï¼ç¨ pip è¡¥åå®è£ç¼ºå¤±çåºï¼</p>
<pre><code class="language-bash"># æ¿æ¢xxxä¸ºå®éç¼ºå¤±çåºåï¼å¦ pip install soundfile
pip install supertonic
</code></pre>
<p><img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202601/3724025-20260107195649671-296500844.png" class="lazyload"></p>
<h2 id="æ­¥éª¤6éæ°è¿è¡èæ¬å¹¶ç­å¾æ¨¡åä¸è½½">æ­¥éª¤6ï¼éæ°è¿è¡èæ¬å¹¶ç­å¾æ¨¡åä¸è½½</h2>
<p>è¡¥åå®è£ç¼ºå¤±åºåï¼åæ¬¡è¿è¡ç¤ºä¾èæ¬ï¼</p>
<pre><code class="language-bash">python example_pypi.py
</code></pre>
<p>â ï¸ æ³¨æï¼<strong>ç¬¬ä¸æ¬¡è¿è¡æ¶ï¼èæ¬ä¼èªå¨ä¸è½½æéçæ¨¡åæä»¶</strong>ï¼ä¸è½½éåº¦åå³äºæå¡å¨ç½ç»ï¼éèå¿ç­å¾ï¼éå¸¸å åéï¼ï¼ä¸è¦ä¸­æ­è¿ç¨ã</p>
<p><img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202601/3724025-20260107195649634-231572709.png" class="lazyload"></p>
<h2 id="æ­¥éª¤7éªè¯é¨ç½²æå">æ­¥éª¤7ï¼éªè¯é¨ç½²æå</h2>
<p>è¿è¡å®æåï¼æ£æ¥ <code>supertonic-main/py/result</code> ç®å½ï¼è¥çæäº wav æ ¼å¼çç»ææä»¶ï¼è¯´æé¨ç½²æåï¼</p>
<pre><code class="language-bash"># æ¥çresultç®å½åå®¹
ls result/
</code></pre>
<p>æèç´æ¥å©ç¨å·¦ä¾§æä»¶ç®¡çç³»ç»æ¥ç<br>
<img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202601/3724025-20260107195649666-303294321.png" class="lazyload"></p>
<h2 id="ä¸supertonic-ä½¿ç¨æ­¥éª¤">ä¸ãSupertonic ä½¿ç¨æ­¥éª¤</h2>
<p>é¨ç½²å®ææèç´æ¥ä½¿ç¨æé¨ç½²å®çéåä¹åï¼æ¥å¸¸ä½¿ç¨åªéä»¥ä¸4æ­¥ï¼</p>
<h3 id="æ­¥éª¤1è¿å¥æå®å·¥ä½è·¯å¾">æ­¥éª¤1ï¼è¿å¥æå®å·¥ä½è·¯å¾</h3>
<p>æ¯æ¬¡ä½¿ç¨åï¼åç»å½æå¡å¨å¹¶è¿å¥æ ¸å¿è·¯å¾ï¼</p>
<pre><code class="language-bash">cd /supertonic-main/py/
</code></pre>
<p><img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202601/3724025-20260107195649654-1413206719.png" class="lazyload"></p>
<h3 id="æ­¥éª¤2ä¿®æ¹ç¤ºä¾èæ¬çææ¬åå®¹">æ­¥éª¤2ï¼ä¿®æ¹ç¤ºä¾èæ¬çææ¬åå®¹</h3>
<p>ç¼è¾ <code>example_pypi.py</code> æä»¶ï¼ä¿®æ¹å¶ä¸­ç <code>text</code> åéï¼æ ¸å¿è¾å¥åå®¹ï¼å¦è¯­é³åæçææ¬ï¼ï¼</p>
<pre><code class="language-bash"># ç¨vimç¼è¾æä»¶
vim example_pypi.py

# æ¾å°ç±»ä¼¼å¦ä¸çä»£ç è¡ï¼ä¿®æ¹textçå¼
text = "è¿æ¯é»è®¤çæµè¯ææ¬"  # å°æ­¤è¡æ¹ä¸ºä½ éè¦çåå®¹
</code></pre>
<p>ä¿®æ¹å®æåï¼æ <code>Esc</code> â è¾å¥ <code>:wq</code> ä¿å­å¹¶éåº vimã</p>
<p>æèç´æ¥ç¨å¯è§åçé¢ä¿®æ¹åå®¹<br>
<img alt="å¨è¿éæå¥å¾çæè¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3724025/202601/3724025-20260107195649639-235481919.png" class="lazyload"></p>
<h3 id="æ­¥éª¤3è¿è¡èæ¬çæç»æ">æ­¥éª¤3ï¼è¿è¡èæ¬çæç»æ</h3>
<p>å¨å½åè·¯å¾ä¸æ§è¡èæ¬ï¼è§¦åå¤çæµç¨ï¼</p>
<pre><code class="language-bash">python example_pypi.py
</code></pre>
<p>ç»ææ²¡æä»»ä½è¾åºå°±æ¯çææåäºï¼ç´æ¥å¨resultéé¢æ¥çå°±å¯ä»¥äº</p>
<h3 id="æ­¥éª¤4æ¥ççæçç»ææä»¶">æ­¥éª¤4ï¼æ¥ççæçç»ææä»¶</h3>
<p>å¤çå®æåï¼ææç»æä¼ä»¥ <code>wav</code> é³é¢æä»¶æ ¼å¼å­å¨å¨ <code>supertonic-main/py/result</code> ç®å½ä¸ï¼å¯éè¿ <code>scp</code> ä¸è½½å°æ¬å°æ­æ¾ï¼æç´æ¥å¨æå¡å¨ä¸ç¨é³é¢å·¥å·æ¥çï¼</p>
<pre><code class="language-bash"># ä¸è½½ç»ææä»¶å°æ¬å°ï¼ç¤ºä¾ï¼
scp root@192.168.1.100:/opt/supertonic-main/py/result/xxx.wav ~/Desktop/
</code></pre>
<h1 id="åå·²é¨ç½²å¥½çéåé¾æ¥">åãå·²é¨ç½²å¥½çéåé¾æ¥</h1>
<p>ä¸ºäºæ¹ä¾¿å¤§å®¶å¿«éä½¿ç¨ï¼æå·²å°é¨ç½²å®æç Supertonic ç¯å¢æåä¸ºæå¾çç¤¾åºéåï¼å¯ç´æ¥æåä½¿ç¨ï¼ç­å¾å®¡æ ¸éè¿ä¹åæä¼æé¾æ¥æ¬å°åå®¢ä¸é¢æ¥ã</p>
<h1 id="äºå¸¸è§æ³¨æäºé¡¹">äºãå¸¸è§æ³¨æäºé¡¹</h1>
<ol>
<li>æ¨¡åä¸è½½å¤±è´¥ï¼è¥é¦æ¬¡è¿è¡æ¶æ¨¡åä¸è½½ä¸­æ­ï¼å¯æå¨ä¸è½½æ¨¡åæä»¶åæ¾å°èæ¬æå®çç¼å­ç®å½ï¼éå¸¸å¨ <code>~/.cache/</code> ä¸ï¼ï¼</li>
<li>ä¾èµçæ¬å²çªï¼è¥å®è£ <code>requirements.txt</code> æ¶åºç°çæ¬å²çªï¼å¯å°è¯æ·»å  <code>--force-reinstall</code> åæ°éæ°å®è£ï¼æéçº§å¯¹åºåºçæ¬ï¼</li>
<li>æéé®é¢ï¼è¥è¿è¡èæ¬æç¤ºæéä¸è¶³ï¼æ§è¡ <code>chmod +x example_pypi.py</code> æç¨ <code>sudo python example_pypi.py</code> è¿è¡ã</li>
</ol>
<hr>
<h1 id="æ»ç»">æ»ç»</h1>
<ol>
<li>Supertonic Python çæ¬é¨ç½²æ ¸å¿æ­¥éª¤ï¼ä¸è½½æºç âä¸ä¼ æå¡å¨âè§£åâå®è£ä¾èµâè¡¥è£ç¼ºå¤±åºâé¦æ¬¡è¿è¡ï¼ç­å¾æ¨¡åä¸è½½ï¼ï¼</li>
<li>æ¥å¸¸ä½¿ç¨åªéä¿®æ¹ <code>example_pypi.py</code> ç <code>text</code> åå®¹ï¼è¿è¡èæ¬å³å¯å¨ <code>result</code> ç®å½è·å wav ç»æï¼</li>
<li>å¯ç´æ¥ä½¿ç¨åä¸»æä¾çå·²é¨ç½²éåï¼è·³è¿ç¹ççç¯å¢éç½®æ­¥éª¤ï¼å¿«éä¸æã</li>
</ol>
<p>å¦æé¨ç½²æä½¿ç¨è¿ç¨ä¸­éå°é®é¢ï¼æ¬¢è¿å¨è¯è®ºåºäº¤æµï½</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-07 19:57">2026-01-07 19:57</span>&nbsp;
<a href="https://www.cnblogs.com/ChenAI-TGF">TTGF</a>&nbsp;
éè¯»(<span id="post_view_count">31</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19453758);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19453758', targetLink: 'https://www.cnblogs.com/ChenAI-TGF/p/19453758', title: 'Supertonic é¨ç½²ä¸ä½¿ç¨å¨æµç¨ä¿å§çº§æåï¼éå·²é¨ç½²éåï¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
        </channel>
        </rss>