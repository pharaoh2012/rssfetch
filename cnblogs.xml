<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åå®¢å­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2026-01-16T08:24:09.036Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åå®¢å­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ æç»­éæçä»·å¼æµââè´¨éé¨ç¦ãæ¥åå¯è§åä¸å¿«éåé¦çè®¾è®¡éç¹ ]]></title>
    <link>https://www.cnblogs.com/shiyuelp/p/19492092</link>
    <guid>44894562e408c35cb247731307c0970f</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/shiyuelp/p/19492092" title="åå¸äº 2026-01-16 14:53">
    <span role="heading" aria-level="2">æç»­éæçä»·å¼æµââè´¨éé¨ç¦ãæ¥åå¯è§åä¸å¿«éåé¦çè®¾è®¡éç¹</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p><strong>åå¨åé¢ï¼æ¬äººç®åå¤äºæ±èä¸­ï¼å¦æåéåæ¨å²ä½ï¼è¯·å ï¼lpshiyue æè°¢ãåæ¶è¿æå¤§å®¶ä¸é®ä¸è¿ï¼èµç¹å¥¶ç²é±ã</strong></p>
<p><strong>ç³»åæç« å·²å®ç»ï¼å¨æéè¯»é¾æ¥ï¼<a href="https://p.kdocs.cn/s/EJACICRFACQBS" target="_blank" rel="noopener nofollow">https://p.kdocs.cn/s/EJACICRFACQBS</a></strong></p>
<blockquote>
<p>æç»­éæççæ­£ä»·å¼ä¸å¨äºå·¥å·é¾çå¤æç¨åº¦ï¼èå¨äºåé¦éåº¦ä¸è´¨éä¿éçå®ç¾å¹³è¡¡</p>
</blockquote>
<p>å¨ç¡®ç«å¥çº¦æµè¯ä½ä¸ºå¾®æå¡åä½çåºç³åï¼æä»¬é¢ä¸´ä¸ä¸ªæ´å³é®çå·¥ç¨ææï¼å¦ä½å°è´¨éä¿éæ ç¼èå¥æç»­äº¤ä»æµæ°´çº¿ãæç»­éæï¼CIï¼å·²æä¸ºç°ä»£è½¯ä»¶å¼åçæ éï¼ä½å¤§å¤æ°å¢éä»åçå¨"å®æéæ"å±é¢ï¼æªè½åååæ¥å¶ä»·å¼æµæ½åãæ¬æå°ä»ä»·å¼æµè§è§æ·±å¥åæè´¨éé¨ç¦ãæ¥åå¯è§åä¸å¿«éåé¦çè®¾è®¡ååï¼å¸®å©å¢éæå»ºé«æå¯é çCI/CDä½ç³»ã</p>
<h2 id="1-æç»­éæçä»·å¼æµæ¬è´¨">1 æç»­éæçä»·å¼æµæ¬è´¨</h2>
<h3 id="11-ä»éæé¢çå°ä»·å¼æµå¨çæç»´è½¬å">1.1 ä»éæé¢çå°ä»·å¼æµå¨çæç»´è½¬å</h3>
<p>ä¼ ç»æç»­éæå¼ºè°<strong>ä»£ç æäº¤é¢ç</strong>ï¼èç°ä»£CIçä»·å¼æµå³æ³¨<strong>ä»£ç ä»æäº¤å°çäº§çå®æ´æµå¨æç</strong>ãä»·å¼æµåæä¸ä»è¡¡ééææ¬¡æ°ï¼æ´å³æ³¨<strong>æ»çæ¶é´</strong>ã<strong>è½¬åç</strong>å<strong>è´¨éæè</strong>ã</p>
<p><strong>ä»·å¼æµçæ ¸å¿ææ </strong>åæ¬ï¼</p>
<ul>
<li><strong>åç½®æ¶é´</strong>ï¼ä»ä»£ç æäº¤å°çäº§é¨ç½²çæ»æ¶é´</li>
<li><strong>æµç¨æ¶é´</strong>ï¼ä»£ç å¨CIæµæ°´çº¿ä¸­çå®éå¤çæ¶é´</li>
<li><strong>ç¾åä½èæ¶</strong>ï¼P50ãP95ãP99çæµæ°´çº¿æ§è¡æ¶é´ï¼åæ ç¨³å®æ§</li>
<li><strong>è´¨éé¨ç¦éè¿ç</strong>ï¼é¦æ¬¡æäº¤å³éè¿æææ£æ¥çæ¯ä¾</li>
<li><strong>åé¦é­ç¯æç</strong>ï¼ä»é®é¢åç°å°ä¿®å¤ç¡®è®¤çå¨æ</li>
</ul>
<p>å·¥åé¶è¡è½¯ä»¶å¼åä¸­å¿å¨DevOpsè½¬åä¸­åç°ï¼ä¼åä»·å¼æµèéåçº¯æåéæé¢çï¼è½å°äº¤ä»æçæå35%ä»¥ä¸ã</p>
<h3 id="12-ä»·å¼æµç¶é¢çè¯å«ä¸æ¶é¤">1.2 ä»·å¼æµç¶é¢çè¯å«ä¸æ¶é¤</h3>
<p>ä»·å¼æµæ å°ï¼Value Stream Mappingï¼æ¯è¯å«CIç¶é¢çå³é®å·¥å·ãéè¿å¯è§åä»£ç ä»æäº¤å°é¨ç½²çå®æ´è·¯å¾ï¼å¯ä»¥è¯å«åå¤§ç±»ç¶é¢ï¼</p>
<p><strong>åä½ç¶é¢</strong>ï¼å¢éç­å¾ä»£ç å®¡æ¥ãåå¹¶ææ<br>
<strong>æµè¯ç¶é¢</strong>ï¼é¡ºåºæ§è¡çæ¼«é¿æµè¯å¥ä»¶<br>
<strong>ç¯å¢ç¶é¢</strong>ï¼æµè¯ç¯å¢äºå¤ºæéç½®å¤æ<br>
<strong>åé¦ç¶é¢</strong>ï¼ç»æåæ£å¨ä¸åå·¥å·ä¸­ï¼ç¼ºä¹ç»ä¸è§å¾</p>
<div class="mermaid">graph TD
    A[ä»£ç æäº¤] --&gt; B[éææ£æ¥]
    B --&gt; C[ååæµè¯]
    C --&gt; D[éææµè¯]
    D --&gt; E[é¨ç½²æµè¯ç¯å¢]
    E --&gt; F[éªæ¶æµè¯]
    F --&gt; G[çäº§é¨ç½²]
    
    B --&gt;|å¿«éå¤±è´¥| H[å¼åèåé¦]
    C --&gt;|å¿«éå¤±è´¥| H
    D --&gt;|è¯¦ç»æ¥å| I[å¢éåé¦]
    E --&gt;|ç¯å¢ç¶æ| J[è¿ç»´åé¦]
    F --&gt;|ä¸å¡éªè¯| K[äº§ååé¦]
    
    style H fill:#e1f5fe
    style I fill:#fff3e0
    style J fill:#f3e5f5
    style K fill:#e8f5e8
</div><p><em>æç»­éæä»·å¼æµä¸åé¦èç¹å¾</em></p>
<h2 id="2-è´¨éé¨ç¦ä½ç³»çè®¾è®¡å²å­¦">2 è´¨éé¨ç¦ä½ç³»çè®¾è®¡å²å­¦</h2>
<h3 id="21-è´¨éé¨ç¦çå±æ¬¡åç­ç¥">2.1 è´¨éé¨ç¦çå±æ¬¡åç­ç¥</h3>
<p>è´¨éé¨ç¦ä¸æ¯åä¸å³å¡ï¼èæ¯<strong>åå±é²å¾¡ä½ç³»</strong>ãåççé¨ç¦è®¾è®¡åºå¨ä¿è¯è´¨éçåæ¶æå°åå¼åé»åã</p>
<p><strong>ä»£ç çº§é¨ç¦</strong>æ¯ææ©çé²çº¿ï¼å³æ³¨ä»£ç åºæ¬è´¨éï¼</p>
<ul>
<li><strong>éæä»£ç åæ</strong>ï¼å¤æåº¦ãéå¤çãä»£ç å¼å³</li>
<li><strong>å®å¨æ«æ</strong>ï¼æ½å¨æ¼æ´ãä¾èµç»ä»¶é£é©</li>
<li><strong>ç¼ç è§è</strong>ï¼å¢éçº¦å®çé£æ ¼ä¸è´æ§</li>
</ul>
<p><strong>éªè¯çº§é¨ç¦</strong>ç¡®ä¿åè½æ­£ç¡®æ§ï¼</p>
<ul>
<li><strong>ååæµè¯è¦çç</strong>ï¼å³é®æ¨¡åè¦ççè¾¾å°80%ä»¥ä¸</li>
<li><strong>éææµè¯</strong>ï¼æå¡é´æ¥å£éªè¯</li>
<li><strong>APIå¥çº¦æµè¯</strong>ï¼åºäºOpenAPIè§èçæ¥å£åè§æ§</li>
</ul>
<p><strong>é¨ç½²çº§é¨ç¦</strong>ä¿éåå¸å¯é æ§ï¼</p>
<ul>
<li><strong>å¥åº·æ£æ¥</strong>ï¼æå¡å¯å¨åèªéªè¯</li>
<li><strong>æ§è½åºå</strong>ï¼å³é®APIçååºæ¶é´éå¼</li>
<li><strong>åè§æ£æ¥</strong>ï¼å®å¨ç­ç¥ãå®¡è®¡è¦æ±</li>
</ul>
<p>äº¬ä¸äºDevOpså¹³å°éè¿åå±è´¨éé¨ç¦ï¼å¨å11å¤§ä¿æé´å®ç°äºæéçéä½50%ä»¥ä¸çææã</p>
<h3 id="22-æºè½é¨ç¦ä¸å¨æéå¼">2.2 æºè½é¨ç¦ä¸å¨æéå¼</h3>
<p>åºå®éå¼çé¨ç¦å¨å¤æé¡¹ç®ä¸­å¾å¾æä¸ºå¼åé»åã<strong>æºè½é¨ç¦</strong>æ ¹æ®ä»£ç åæ´ç¹å¾å¨æè°æ´æ åï¼</p>
<pre><code class="language-yaml"># æºè½é¨ç¦éç½®ç¤ºä¾
quality_gates:
  test_coverage:
    base_requirement: 80%
    adjustment_rules:
      - if: change_type == 'bugfix'
        then: requirement = 75%  # ä¿®å¤ä»£ç éå½æ¾å®½
      - if: files_modified contains 'legacy/'
        then: requirement = 70%  # éçä»£ç ç¹æ®å¤ç
      - if: lines_added &lt; 10
        then: requirement = 60%  # å¾®å°åæ´éä½è¦æ±
  
  static_analysis:
    base_requirement: zero_new_critical
    adjustment_rules:
      - if: is_hotfix == true
        then: allow_1_critical  # ç­ä¿®å¤åè®¸1ä¸ªä¸¥éé®é¢
</code></pre>
<p>è¿ç§åºäºä¸ä¸æçå¨æéå¼æ¢ä¿è¯äºè´¨éåºçº¿ï¼åé¿åäºä¸å¿è¦çå¼åé»ç¢ã</p>
<h3 id="23-è´¨éé¨ç¦çæµæ°´çº¿éææ¨¡å¼">2.3 è´¨éé¨ç¦çæµæ°´çº¿éææ¨¡å¼</h3>
<p>é¨ç¦ä¸æµæ°´çº¿çéææ¹å¼ç´æ¥å½±ååé¦æçã<strong>å¹¶è¡æ£æ¥</strong>æ¨¡å¼å¯ä»¥å¤§å¹ç¼©ç­åé¦å¨æï¼</p>
<pre><code class="language-yaml"># å¹¶è¡é¨ç¦æ£æ¥éç½®
stages:
  - prepare
  - quality_checks
  - deployment

quality_checks:
  stage: quality_checks
  parallel:  # å¹¶è¡æ§è¡è´¨éæ£æ¥
    - script: sonar-scanner
      name: sonarqube_analysis
    - script: npm run security-scan
      name: security_scan
    - script: pytest --cov --cov-report=xml
      name: test_coverage
  allow_failure: false
</code></pre>
<p>å½æ£æ¥ä»»å¡è¾å¤æ¶ï¼éè¿<strong>ä¾èµå³ç³»åæ</strong>ä¼åæ§è¡å³é®è·¯å¾æ£æ¥ï¼è¿ä¸æ­¥ä¼ååé¦éåº¦ã</p>
<h2 id="3-æ¥åå¯è§åä»æ°æ®åªé³å°å³ç­æ´å¯">3 æ¥åå¯è§åï¼ä»æ°æ®åªé³å°å³ç­æ´å¯</h2>
<h3 id="31-å¤å±æ¬¡å¯è§åè®¾è®¡åå">3.1 å¤å±æ¬¡å¯è§åè®¾è®¡åå</h3>
<p>æ¥åå¯è§åä¸æ¯ç®åçæ°æ®å±ç¤ºï¼èæ¯<strong>é®é¢å®ä½åå³ç­æ¯æçè®¤ç¥å·¥å·</strong>ãææçå¯è§ååºéµå¾ª<strong>éå­å¡åå</strong>ï¼é¡¶å±å±ç¤ºæ ¸å¿å¥åº·åº¦ï¼æ¯æéå±ä¸é»åæã</p>
<p><strong>æµæ°´çº¿å¥åº·åº¦å¨æ¯å¾</strong>ä¸ºå¢éæä¾ä¸ç«å¼è§å¾ï¼</p>
<ul>
<li><strong>æå»ºæåçè¶å¿</strong>ï¼è¯å«ç¨³å®æ§é®é¢</li>
<li><strong>æµè¯è¦ççåå</strong>ï¼çæ§è´¨éæ¼è¿</li>
<li><strong>é¨ç¦éè¿çç»è®¡</strong>ï¼è¯ä¼°ä»£ç æäº¤è´¨é</li>
<li><strong>æå»ºæ¶é´åå¸</strong>ï¼åç°æ§è½éå</li>
</ul>
<p><strong>å¤±è´¥åæè§å¾</strong>å¸®å©å¿«éå®ä½é®é¢ï¼</p>
<ul>
<li><strong>å¤±è´¥ç±»ååå¸</strong>ï¼æµè¯å¤±è´¥ãç¼è¯éè¯¯ãç¯å¢é®é¢</li>
<li><strong>å¤±è´¥æ¨¡åç­åå¾</strong>ï¼è¯å«é®é¢éä¸­åºå</li>
<li><strong>åå²å¯¹æ¯åæ</strong>ï¼ä¸ä¹åæåæå»ºçå·®å¼å¯¹æ¯</li>
</ul>
<p>Allureæµè¯æ¥åéè¿ä¸°å¯çå¾è¡¨å±ç¤ºæµè¯æ§è¡è¯¦æãåå²è¶å¿åç¼ºé·åå¸ï¼å¤§å¤§æåäºæµè¯ç»æçåææçã</p>
<h3 id="32-é¢åè§è²çå¯è§åç­ç¥">3.2 é¢åè§è²çå¯è§åç­ç¥</h3>
<p>ä¸åè§è²å³æ³¨ä¸åçææ åè§å¾ï¼<strong>ä¸ªæ§åå¯è§å</strong>è½æ¾èæåä¿¡æ¯è·åæçã</p>
<p><strong>å¼åèè§è§</strong>å³æ³¨å¿«éåé¦ï¼</p>
<ul>
<li><strong>æ¬æ¬¡æäº¤å½±åèå´</strong>ï¼ä¿®æ¹çæä»¶ãå³èçæµè¯</li>
<li><strong>ä¸ªäººæäº¤è´¨éè¶å¿</strong>ï¼è¿æéè¿çãå¸¸è§éè¯¯ç±»å</li>
<li><strong>å¿«éä¿®å¤æå¯¼</strong>ï¼éè¯¯å®ä½ãä¿®å¤å»ºè®®</li>
</ul>
<p><strong>ææ¯è´è´£äººè§è§</strong>å³æ³¨æ´ä½è´¨éï¼</p>
<ul>
<li><strong>å¢éè´¨éææ </strong>ï¼å¹³åéè¿çãææ¯åºå¡è¶å¿</li>
<li><strong>æ¨¡åå¥åº·åº¦æå</strong>ï¼é®é¢éä¸­åº¦åæ</li>
<li><strong>è´¨éæ¼è¿é¢æµ</strong>ï¼åºäºåå²æ°æ®çè´¨éé¢æµ</li>
</ul>
<p><strong>é¡¹ç®ç»çè§è§</strong>å³æ³¨äº¤ä»é£é©ï¼</p>
<ul>
<li><strong>è¿­ä»£è¿åº¦å¯è§å</strong>ï¼å·²å®æãè¿è¡ä¸­ãåé»çä»»å¡</li>
<li><strong>è´¨éé£é©é¢è­¦</strong>ï¼å¯è½å½±ååå¸çè´¨éé®é¢</li>
<li><strong>æçææ </strong>ï¼æå»ºæ¶é¿ãåé¦å¨æ</li>
</ul>
<h3 id="33-å¯è§ååé¦çå®æ¶æ§ä¸äº¤äºæ§">3.3 å¯è§ååé¦çå®æ¶æ§ä¸äº¤äºæ§</h3>
<p><strong>å®æ¶æ´æ°</strong>çå¯è§åè½å¤åæ¶é©±å¨è¡å¨ãéè¿WebSocketç­ææ¯å®ç°ä»ªè¡¨æ¿å®æ¶æ´æ°ï¼è®©å¢éæåå¨é®é¢åçå åéåå³å¯æç¥ã</p>
<p><strong>äº¤äºå¼ä¸é»</strong>è½åä½¿åæä»å®è§å°å¾®è§ï¼</p>
<pre><code class="language-javascript">// å¯è§åä¸é»ç¤ºä¾
function setupDrillDown() {
  // ç¹å»æå»ºå¤±è´¥çå¾è¡¨ï¼ä¸é»å°å·ä½å¤±è´¥ä»»å¡
  chart.on('click', function(params) {
    if (params.componentType === 'series') {
      const buildId = params.data.buildId;
      // å è½½è¯¥æå»ºçè¯¦ç»å¤±è´¥ä¿¡æ¯
      loadFailureDetails(buildId);
    }
  });
}
</code></pre>
<p>å¨å¢éå·¥ä½åºåè®¾ç½®<strong>ç©çå¯è§åçæ¿</strong>ï¼ç»åçµå­ä»ªè¡¨æ¿ï¼å½¢æçº¿ä¸çº¿ä¸çç«ä½åé¦ç³»ç»ã</p>
<h2 id="4-å¿«éåé¦æºå¶çè®¾è®¡éç¹">4 å¿«éåé¦æºå¶çè®¾è®¡éç¹</h2>
<h3 id="41-åé¦éåº¦ä¸è´¨éçå¹³è¡¡èºæ¯">4.1 åé¦éåº¦ä¸è´¨éçå¹³è¡¡èºæ¯</h3>
<p>å¿«éåé¦ä¸æ¯ä¸å³è¿½æ±éåº¦ï¼èæ¯<strong>å¨åéçæ¶é´æä¾æä»·å¼çä¿¡æ¯</strong>ãåé¦æºå¶éè¦å¹³è¡¡<strong>éåº¦</strong>ã<strong>ç²¾åº¦</strong>å<strong>è¡å¨æ§</strong>ã</p>
<p><strong>åå±åé¦ç­ç¥</strong>å¨ä¸åé¶æ®µæä¾ä¸åç²åº¦çåé¦ï¼</p>
<ul>
<li><strong>å³æ¶åé¦</strong>ï¼&lt;5åéï¼ï¼ç¼è¯ãåºç¡éææ£æ¥ãå³é®ååæµè¯</li>
<li><strong>å¿«éåé¦</strong>ï¼5-15åéï¼ï¼å®æ´ååæµè¯ãåºç¡éææµè¯</li>
<li><strong>å®æ´åé¦</strong>ï¼15-60åéï¼ï¼å¨ééææµè¯ãç«¯å°ç«¯æµè¯</li>
</ul>
<pre><code class="language-yaml"># åå±åé¦éç½®
feedback_levels:
  immediate:
    timeout: 5min
    checks: [compile, lint, critical_unit_tests]
    notification: [slack_immediate, IDE]
  fast:
    timeout: 15min 
    checks: [all_unit_tests, integration_smoke]
    notification: [slack_channel, email]
  full:
    timeout: 60min
    checks: [all_integration, e2e, performance]
    notification: [slack_channel, email, dashboard]
</code></pre>
<h3 id="42-ç²¾åéç¥ä¸åè­¦é²éªæ°">4.2 ç²¾åéç¥ä¸åè­¦é²éªæ°</h3>
<p>è¿åº¦çéç¥ä¼å¯¼è´<strong>åè­¦ç²å³</strong>ï¼éè¦ä¿¡æ¯è¢«æ·¹æ²¡ãæºè½éç¥ç­ç¥åºäº<strong>ä¸ä¸æ</strong>å<strong>ç¸å³æ§</strong>è¿è¡ç²¾åæ¨éã</p>
<p><strong>éç¥è·¯ç±è§å</strong>ç¡®ä¿ä¿¡æ¯éè¾¾æ­£ç¡®çäººï¼</p>
<pre><code class="language-yaml">notification_rules:
  - match: { failure_type: "compile", component: "frontend" }
    notify: ["frontend-team", "commit-author"]
    urgency: "high"
    
  - match: { failure_type: "test", component: "legacy-system" }  
    notify: ["legacy-maintainers", "tech-lead"]
    urgency: "medium"
    
  - match: { failure_type: "performance", degradation: "&gt;20%" }
    notify: ["performance-team", "architect"]
    urgency: "high"
</code></pre>
<p><strong>åé¦æè¦</strong>æºå¶å°ç¸å³éç¥èåï¼é¿åä¿¡æ¯è¿è½½ï¼</p>
<ul>
<li><strong>æ¯æ¥è´¨éæè¦</strong>ï¼å½å¤©æå»ºæåµãè´¨éè¶å¿</li>
<li><strong>è¿­ä»£æ»ç»æ¥å</strong>ï¼æ¬è¿­ä»£è´¨éæ¹è¿ææ</li>
<li><strong>ä¸ªæ§åæè¦</strong>ï¼ä¸ªäººæäº¤è´¨éæ¹è¿å»ºè®®</li>
</ul>
<h3 id="43-åé¦é­ç¯éªè¯ä¸æç»­æ¹è¿">4.3 åé¦é­ç¯éªè¯ä¸æç»­æ¹è¿</h3>
<p>åé¦åªæå½¢æé­ç¯ææä»·å¼ã<strong>é­ç¯éªè¯</strong>ç¡®ä¿æ¯ä¸ªé®é¢é½è¢«è·è¸ªå°è§£å³ï¼</p>
<div class="mermaid">graph LR
    A[é®é¢åç°] --&gt; B[éç¥åå]
    B --&gt; C[è´è´£äººå¤ç]
    C --&gt; D[ä¿®å¤éªè¯]
    D --&gt; E[æ ¹æ¬åå åæ]
    E --&gt; F[æµç¨æ¹è¿]
    F --&gt; A
</div><p><em>åé¦é­ç¯æµç¨å¾</em></p>
<p><strong>åé¦æçåº¦é</strong>æ¯æ¹è¿çåºç¡ï¼</p>
<ul>
<li><strong>é®é¢åç°å°éç¥æ¶é´</strong>ï¼æ£æµæç</li>
<li><strong>éç¥å°ç¡®è®¤æ¶é´</strong>ï¼ååºæç</li>
<li><strong>ç¡®æ¶å°ä¿®å¤æ¶é´</strong>ï¼è§£å³æç</li>
<li><strong>ä¿®å¤å°éªè¯æ¶é´</strong>ï¼éªè¯æç</li>
</ul>
<p>éè¿å®æåæè¿äºææ ï¼è¯å«åé¦é¾æ¡ä¸­çç¶é¢å¹¶æç»­ä¼åã</p>
<h2 id="5-æµæ°´çº¿æ§è½ä¼åç­ç¥">5 æµæ°´çº¿æ§è½ä¼åç­ç¥</h2>
<h3 id="51-å¹¶è¡åä¸åå¸å¼æ§è¡">5.1 å¹¶è¡åä¸åå¸å¼æ§è¡</h3>
<p>æµæ°´çº¿æ§è½ç´æ¥å½±ååé¦éåº¦ã<strong>ä»»å¡ä¾èµåæ</strong>æ¯å¹¶è¡ä¼åçåºç¡ï¼éè¿å»ºç«ä»»å¡ä¾èµå¾è¯å«å¯å¹¶è¡é¶æ®µã</p>
<p><strong>æºè½å¹¶è¡å</strong>ç­ç¥ï¼</p>
<pre><code class="language-yaml"># å¹¶è¡æ§è¡éç½®
parallelization:
  strategy: optimistic
  rules:
    - when: test_files_changed
      then: parallelize_tests_by_module
    - when: frontend_changed
      then: run_frontend_tests_only
    - when: backend_changed  
      then: run_backend_tests_only
</code></pre>
<p><strong>åå¸å¼æ§è¡</strong>éè¿éç¾¤åå¤§å¹ç¼©ç­æ§è¡æ¶é´ï¼</p>
<ul>
<li><strong>å¨æèµæºåé</strong>ï¼æ ¹æ®ä»»å¡éæ±åéåééç½®çæ§è¡å¨</li>
<li><strong>ç¼å­å±äº«</strong>ï¼èç¹é´å±äº«ä¾èµç¼å­ãDockeréå</li>
<li><strong>è´è½½åè¡¡</strong>ï¼åºäºèç¹è´è½½åç½ç»ç¶åµæºè½è°åº¦</li>
</ul>
<h3 id="52-å¢éæ£æ¥ä¸ç¼å­ä¼å">5.2 å¢éæ£æ¥ä¸ç¼å­ä¼å</h3>
<p>å¨éæ£æ¥å¨å¤§åé¡¹ç®ä¸­å¾å¾ä¸ç°å®ã<strong>å¢éåæ</strong>åªæ£æ¥åæ´å½±åèå´ï¼å¹³è¡¡éåº¦ä¸åç¡®æ§ã</p>
<p><strong>æºè½ç¼å­ç­ç¥</strong>é¿åéå¤å·¥ä½ï¼</p>
<pre><code class="language-yaml">cache_strategy:
  dependencies:
    key: "dependencies-${checksum['package.json']}"
    paths: [node_modules]
  build_output:
    key: "build-${CI_COMMIT_REF_SLUG}"
    paths: [dist]
  test_results:
    key: "tests-${CI_COMMIT_REF_SLUG}"
    paths: [test_results]
</code></pre>
<p>å·¥åé¶è¡éè¿ä¼åç¼å­ç­ç¥ï¼å°æµæ°´çº¿å¹³åæ§è¡æ¶é´ä»45åéç¼©ç­å°18åéã</p>
<h2 id="6-æåå ç´ è´¨éåå»ºä¸éä½è´è´£">6 æåå ç´ ï¼è´¨éåå»ºä¸éä½è´è´£</h2>
<h3 id="61-ä»è´¨éé¨ç¦å°è´¨éåå»º">6.1 ä»è´¨éé¨ç¦å°è´¨éåå»º</h3>
<p>ææ¯ææ®µå¿é¡»ä¸æåå»ºè®¾ç¸ç»åã<strong>è´¨éåå»º</strong>å¼ºè°å¨å¼åè¿ç¨ä¸­æå»ºè´¨éï¼èéä¾èµåææ£æ¥ã</p>
<p><strong>è´¨éåå»ºå®è·µ</strong>åæ¬ï¼</p>
<ul>
<li><strong>ä»£ç å®¡æ¥</strong>ï¼éè¿Pull Requeståç»å¯¹ç¼ç¨æååç°é®é¢</li>
<li><strong>æµè¯é©±å¨å¼å</strong>ï¼ååæµè¯ï¼ç¡®ä¿ä»£ç å¯æµè¯æ§</li>
<li><strong>æç»­éæ</strong>ï¼å°æ­¥è¿­ä»£ï¼é¿åææ¯åºå¡ç´¯ç§¯</li>
</ul>
<p><strong>éä½ä»£ç æææ</strong>æåç¡®ä¿æ¯ä¸ªæåé½å³å¿è´¨éï¼</p>
<ul>
<li><strong>äº¤åè¯å®¡</strong>ï¼ä¸åèæ¯çå¼åèç¸äºè¯å®¡ä»£ç </li>
<li><strong>ç¥è¯å±äº«</strong>ï¼å®æåäº«è´¨éæ¹è¿ç»éª</li>
<li><strong>æ æè´£æå</strong>ï¼å³æ³¨é®é¢è§£å³èéè´£ä»»è¿½ç©¶</li>
</ul>
<h3 id="62-æç»­æ¹è¿çè´¨éç¤¾åº">6.2 æç»­æ¹è¿çè´¨éç¤¾åº</h3>
<p>å»ºç«<strong>è´¨éç¤¾åº</strong>å®è·µï¼è®©è´¨éæä¸ºå¢éå¯¹è¯çæ ¸å¿ï¼</p>
<ul>
<li><strong>è´¨éç è®¨ä¼</strong>ï¼å®æè®¨è®ºè´¨éæ ååæ¹è¿ç¹</li>
<li><strong>å¤±è´¥åæä¼</strong>ï¼æ·±åº¦åæéå¤§æéï¼åäº«å­¦ä¹ </li>
<li><strong>å·¥å·ä¼åæ¥</strong>ï¼å®æä¼åå¼åå·¥å·åæµæ°´çº¿</li>
</ul>
<p>æå¤§åäºèç½å¬å¸éè¿å»ºç«è´¨éç¤¾åºï¼å¨6ä¸ªæåå°çäº§ç¯å¢ç¼ºé·çéä½äº40%ã</p>
<h2 id="æ»ç»">æ»ç»</h2>
<p>æç»­éæçä»·å¼æµä¼åæ¯ä¸ä¸ªç³»ç»å·¥ç¨ï¼éè¦ææ¯ãæµç¨åæåçååæ¹è¿ãææçCIç³»ç»åºè¯¥å<strong>ç²¾å¯çç¥ç»ç³»ç»</strong>ï¼è½å¤å¿«éæç¥ååãåç¡®è¯æ­é®é¢ãåæ¶è§¦åä¿®å¤å¨ä½ã</p>
<p><strong>æåå®æ½çå³é®åå</strong>ï¼</p>
<ol>
<li><strong>ä»·å¼æµå¯¼å</strong>ï¼å³æ³¨ç«¯å°ç«¯æµå¨æçï¼èéå±é¨ä¼å</li>
<li><strong>å¿«éåé¦å¾ªç¯</strong>ï¼å»ºç«åå±åé¦æºå¶ï¼å¹³è¡¡éåº¦ä¸åç¡®æ§</li>
<li><strong>è´¨éåå»ºæå</strong>ï¼å°è´¨éæè¯èå¥å¼åå¨è¿ç¨</li>
<li><strong>æ°æ®é©±å¨æ¹è¿</strong>ï¼åºäºåº¦éæ°æ®æç»­ä¼åæµæ°´çº¿</li>
<li><strong>äººåååä¼å</strong>ï¼å·¥å·ä¸ºåä½æå¡ï¼èéç¸å</li>
</ol>
<p>çæ­£çæç»­éæä»·å¼æµè½å¤å°<strong>ä»£ç æäº¤</strong>è½¬åä¸º<strong>å¯é çäº§åå¢é</strong>ï¼å¨è¿ä¸ªè¿ç¨ä¸­ï¼æ¯ä¸ªå¢éæåé½è½å¿«éè·å¾ææä¹çåé¦ï¼å¹¶åæ»¡ä¿¡å¿å°åç¨æ·äº¤ä»ä»·å¼ã</p>
<hr>
<p><strong>ð ä¸ç¯é¢å</strong><br>
ãå®¹å¨éåçå·¥ç¨åæç»´ââæå°åãåå±ä¸å¯å¤ç°æå»ºçåèãââ æä»¬å°æ·±å¥æ¢è®¨ï¼</p>
<ul>
<li>ðï¸ <strong>éååå±ç­ç¥</strong>ï¼åºç¡éåéæ©ãå±ä¼åä¸å®å¨æ´æ°çå¹³è¡¡ä¹é</li>
<li>ð¦ <strong>æå°åéå</strong>ï¼å¤é¶æ®µæå»ºãDistrolessä¸éæç¼è¯çææ¯éå</li>
<li>ð <strong>å¯å¤ç°æå»º</strong>ï¼ç¯å¢ä¸è´æ§ãæå»ºç¼å­ä¸çæ¬è¿½æº¯çå®è·µæ¹æ¡</li>
<li>ð¡ï¸ <strong>å®å¨æ²»ç</strong>ï¼æ¼æ´æ«æãç­¾åéªè¯ä¸ä¾åºé¾å®å¨çæä½³å®è·µ</li>
<li>âï¸ <strong>å¤§å°ä¸æççæè¡¡</strong>ï¼å¼åä½éªä¸è¿è¡æ¶æ§è½çä¼ååè</li>
</ul>
<p><strong>ç¹å»å³æ³¨ï¼ææ¡å®¹å¨éåçå·¥ç¨åå®è·µï¼</strong></p>
<blockquote>
<p><strong>ä»æ¥è¡å¨å»ºè®®</strong>ï¼</p>
<ol>
<li>ç»å¶å½åCIç³»ç»çä»·å¼æµå¾ï¼è¯å«ç¶é¢ç¯è</li>
<li>è¯ä¼°è´¨éé¨ç¦çå±çº§è®¾è®¡ï¼ç¡®ä¿å¿«éåé¦ä¸æ·±åº¦æ£æ¥çå¹³è¡¡</li>
<li>ä¼åæ¥åå¯è§åç­ç¥ï¼åºäºè§è²æä¾å·®å¼åè§å¾</li>
<li>å»ºç«åé¦æçåº¦éä½ç³»ï¼æç»­ä¼åé­ç¯æç</li>
<li>å¹è²è´¨éç¤¾åºæåï¼å°è´¨éåå»ºèå¥å¼åæ¥å¸¸</li>
</ol>
</blockquote>

</div>
<div id="MySignature" role="contentinfo">
    ä¸ªäººå¾®ä¿¡ï¼lpshiyue æ·»å æå·ï¼éçä¸ <br>
æ¬¢è¿æç´¢å³æ³¨å¾®ä¿¡å¬ä¼å·ï¼ åºç¡è¿é¶ï¼ç¬¬ä¸æ¶é´éè¯»ææ°æç« 
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-16 14:54">2026-01-16 14:53</span>&nbsp;
<a href="https://www.cnblogs.com/shiyuelp">åæåå</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19492092);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19492092', targetLink: 'https://www.cnblogs.com/shiyuelp/p/19492092', title: 'æç»­éæçä»·å¼æµââè´¨éé¨ç¦ãæ¥åå¯è§åä¸å¿«éåé¦çè®¾è®¡éç¹' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ unibestï¼åºäº Vite + Vue 3 ç Uni-app å¼åç»ææ¹æ¡ ]]></title>
    <link>https://www.cnblogs.com/lijinhuaboke/p/19491916</link>
    <guid>df18577f08806b9ac981747f05293e74</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/lijinhuaboke/p/19491916" title="åå¸äº 2026-01-16 14:50">
    <span role="heading" aria-level="2">unibestï¼åºäº Vite + Vue 3 ç Uni-app å¼åç»ææ¹æ¡</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="åå«-hbuilderxæ¥æ±-unibeståºäº-vite--vue-3-ç-uni-app-å¼åç»ææ¹æ¡">åå« HBuilderXï¼æ¥æ± unibestï¼åºäº Vite + Vue 3 ç Uni-app å¼åç»ææ¹æ¡</h1>
<p>å¨ç§»å¨ç«¯è·¨å¹³å°å¼åé¢åï¼<strong>Uni-app</strong> å­åå¶å¼ºå¤§çè·¨ç«¯è½åä¸ä»ç»ä¸äºå°ç¨åºå App çå¼åï¼æ´æå»ºäºåºå¤§ççæãç¶èï¼ä¼ ç»çå¼åæ¨¡å¼ï¼ä¾èµ HBuilderXãåºäº Webpack çæå»ºéåº¦ãç¹ççæ ·å¼åæ³ï¼å¨é¢å¯¹æ¥çå¤æçå¤§åé¡¹ç®æ¶ï¼éæ¸æ¾é²åºå·¥ç¨åè½åçç­æ¿ã</p>
<p><strong>unibest</strong> (uni-app + best) çåºç°ï¼æ­£æ¯ä¸ºäºè§£å³è¿äºçç¹ãå®æ¯ä¸å¥éæäºå½ååç«¯æåæ²¿ææ¯æ ç Uni-app å¼åæ¨¡æ¿ï¼æ¨å¨æä¾<strong>æè´çå¼åä½éª</strong>å<strong>æä½³çå·¥ç¨å®è·µ</strong>ã</p>
<p>ä»å¤©ï¼æä»¬å°±äºè§£ä¸ï¼ä¸ºä»ä¹ unibest æ¯ä½ ä¸ä¸ä¸ª Uni-app é¡¹ç®çä¸äºä¹éã</p>
<h2 id="æ ¸å¿ææ¯æ å¿«ä¸ä»æ¯æå»ºéåº¦">æ ¸å¿ææ¯æ ï¼å¿«ï¼ä¸ä»æ¯æå»ºéåº¦</h2>
<p>unibest çæ ¸å¿çå¿µæ¯âç°ä»£åâãå®æå¼äºéæ§çå·¥å·é¾ï¼å¨é¢æ¥æ±äºä»¥ä¸ææ¯ï¼</p>
<ul>
<li><strong>æå»ºå·¥å·</strong>ï¼<strong>Vite 5</strong> ââ æ¯«ç§çº§çå·å¯å¨åç­æ´æ°ï¼HMRï¼ï¼ç¸æ¯ Webpack æå 10 åä»¥ä¸ã</li>
<li><strong>æ ¸å¿æ¡æ¶</strong>ï¼<strong>Vue 3 (Script Setup)</strong> ââ æ´ç®æ´çä»£ç ç»ç»ï¼æ´å¼ºçé»è¾å¤ç¨è½åã</li>
<li><strong>è¯­è¨</strong>ï¼<strong>TypeScript</strong> ââ å¨é¾è·¯ç±»åå®å¨ï¼éæä¸åå¿æèæã</li>
<li><strong>æ ·å¼å¼æ</strong>ï¼<strong>UnoCSS</strong> ââ åå­å CSS å¼æï¼æ ·å¼å¼åæççé©å½ã</li>
<li><strong>ç¶æç®¡ç</strong>ï¼<strong>Pinia</strong> ââ è½»éãç´è§ï¼å®ç¾æ¯æ Composition APIã</li>
</ul>
<h2 id="æ·±å¥-unibest-çææ¯äº®ç¹">æ·±å¥ unibest çææ¯äº®ç¹</h2>
<h3 id="1-æè´çåå­åæ ·å¼ä½éª-unocss">1. æè´çåå­åæ ·å¼ä½éª (UnoCSS)</h3>
<p>åå°ç¨åºæèæ¶çå¾å¾ä¸æ¯é»è¾ï¼èæ¯åæ ·å¼ãä¼ ç»ç <code>class</code> + <code>css</code> æ¨¡å¼éè¦å¨æ¨¡æ¿åæ ·å¼æä»¶é´åå¤æ¨ªè·³ã</p>
<p>unibest åç½®äº <strong>UnoCSS</strong>ï¼è®©ä½ å¯ä»¥å¨æ¨¡æ¿ä¸­ç´æ¥ä¹¦ååå­ç±»ï¼æè§å³æå¾ã</p>
<p><strong>ä¼ ç»åæ³ï¼</strong></p>
<pre><code class="language-html">&lt;!-- template --&gt;
&lt;view class="card"&gt;
  &lt;view class="title"&gt;æ é¢&lt;/view&gt;
&lt;/view&gt;

&lt;!-- style --&gt;
.card { padding: 10px; background: #fff; border-radius: 4px; box-shadow: 0 2px
4px rgba(0,0,0,0.1); } .title { font-size: 16px; font-weight: bold; color: #333;
}
</code></pre>
<p><strong>unibest (UnoCSS) åæ³ï¼</strong></p>
<pre><code class="language-html">&lt;view class="p-4 bg-white rounded shadow-sm"&gt;
  &lt;view class="text-base font-bold text-gray-800"&gt;æ é¢&lt;/view&gt;
&lt;/view&gt;
</code></pre>
<p><strong>ä¼ç¹</strong>ï¼ä»£ç éåå° 50%ï¼æ éè´¹å²æ³ç±»åï¼CSS ä½ç§¯æè´åç¼©ã</p>
<h3 id="2-èªå¨åå¼åçé­å-auto-imports">2. èªå¨åå¼åçé­å (Auto Imports)</h3>
<p>å©ç¨ <code>unplugin-auto-import</code> å <code>unplugin-vue-components</code>ï¼unibest å®ç°äº API åç»ä»¶ç<strong>èªå¨æéå¼å¥</strong>ã</p>
<p>ä½ ä¸åéè¦æ»¡å±ç <code>import</code> è¯­å¥ï¼</p>
<pre><code class="language-typescript">// ä»¥å
import { ref, computed, onMounted } from "vue";
import { onLoad } from "@dcloudio/uni-app";

// ç°å¨ï¼ç´æ¥ç¨ï¼ç¼è¯å¨ä¼èªå¨å¤ç
const count = ref(0);
onLoad(() =&gt; {
  console.log("Page loaded");
});
</code></pre>
<h3 id="3-ä¼ä¸çº§çç½ç»è¯·æ±å°è£-promise--interceptors">3. ä¼ä¸çº§çç½ç»è¯·æ±å°è£ (Promise &amp; Interceptors)</h3>
<p>unibest æ¨¡æ¿ä¸­éå¸¸åå«äºä¸å¥æçç <code>uni.request</code> å°è£æ¹æ¡ï¼å±ç¤ºäºå¦ä½ä¼éå°å¤çæ¦æªå¨ãToken æ³¨å¥åå¹¶åæ§å¶ã</p>
<p><strong>äº®ç¹æ¨¡å¼ï¼éé»ç»å½ä¸ Token èªå¨æ³¨å¥</strong><br>
æ¡æ¶æ¯æå¨è¯·æ±æ¦æªå¨ä¸­å¤çå¤æçé´æé»è¾ï¼ä¾å¦ï¼å¨ Token ä¸å­å¨æ¶èªå¨æèµ·è¯·æ±ï¼å®æç»å½ååç»§ç»­ã</p>
<pre><code class="language-typescript">// utils/http.ts ç¤ºä¾æ¶æ
export const http = async &lt;T&gt;(options: CustomRequestOptions) =&gt; {
  // 1. å¨æ Token æ³¨å¥
  const token = uni.getStorageSync("token");

  // 2. æºè½æ¦æªï¼å¦ææ¯éè¦é´æçæ¥å£ä¸æ  tokenï¼èªå¨è§¦åç»å½æµç¨
  if (options.auth &amp;&amp; !token) {
    await useUserStore().login();
  }

  return new Promise&lt;Result&lt;T&gt;&gt;((resolve, reject) =&gt; {
    uni.request({
      ...options,
      success(res) {
        // 3. ç»ä¸éè¯¯æ¦æªï¼å¦ 401 è¿æï¼
        if (res.statusCode === 401) {
          // æ¸çç¶æï¼è·³è½¬ç»å½é¡µææ æå·æ° Token
          reject("Unauthorized");
        } else {
          resolve(res.data);
        }
      },
    });
  });
};
</code></pre>
<h3 id="4-åºäºæä»¶ç³»ç»çè·¯ç±-file-based-routing">4. åºäºæä»¶ç³»ç»çè·¯ç± (File-based Routing)</h3>
<p>æè±èè¿ç <code>pages.json</code>ï¼unibest éæäº <code>vite-plugin-uni-pages</code>ï¼æ¯æéè¿æä»¶ç®å½ç»æèªå¨çæè·¯ç±éç½®ã</p>
<ul>
<li><strong>èªå¨æ³¨å</strong>ï¼æ°å»º <code>src/pages/login/index.vue</code>ï¼èªå¨è¯å«ä¸ºé¡µé¢ã</li>
<li><strong>éç½®åè</strong>ï¼é¡µé¢çæ é¢ãå¯¼èªæ æ ·å¼ç´æ¥å¨ Vue æä»¶ç <code>&lt;route&gt;</code> åä¸­å®ä¹ï¼æ éå» <code>pages.json</code> éæ¥æ¾ã</li>
</ul>
<pre><code class="language-html">&lt;!-- src/pages/index/index.vue --&gt;
&lt;route lang="json5"&gt; { style: { navigationBarTitleText: 'é¦é¡µ', } } &lt;/route&gt;

&lt;template&gt;
  &lt;view&gt;Home&lt;/view&gt;
&lt;/template&gt;
</code></pre>
<h3 id="5-ä¼ç§çå¹¶åå¤çèå¼">5. ä¼ç§çå¹¶åå¤çèå¼</h3>
<p>å¨å¤çå°ç¨åºç»å½ï¼<code>uni.login</code>ï¼ç­å¼æ­¥æä½æ¶ï¼unibest æ¨èä½¿ç¨ <strong>Promise é</strong> æ¨¡å¼æ¥é²æ­¢å¹¶åè¯·æ±å¯¼è´çéå¤è°ç¨ãè¿æ¯éå¸¸å®ç¨çé«é¶æå·§ã</p>
<pre><code class="language-typescript">// store/user.ts
let loginPromise: Promise&lt;void&gt; | null = null;

const login = () =&gt; {
  // å¦æå·²ç»å¨ç»å½ä¸­ï¼ç´æ¥è¿åç°æç Promiseï¼é¿åéå¤è°ç¨ uni.login
  if (loginPromise) return loginPromise;

  loginPromise = (async () =&gt; {
    try {
      const { code } = await uni.login();
      // ... æ¢å Token
    } finally {
      loginPromise = null; // éæ¾é
    }
  })();

  return loginPromise;
};
</code></pre>
<h2 id="ä¸ºä»ä¹éæ©-unibest">ä¸ºä»ä¹éæ© unibestï¼</h2>
<ol>
<li><strong>å·¥ç¨åå®å¤</strong>ï¼å¼ç®±å³ç¨ç ESLint, Prettier, Husky, Commitlint éç½®ï¼è§èå¢éä»£ç ã</li>
<li><strong>å¤ç«¯ééå¼º</strong>ï¼ä¸ä»æ¯æå¾®ä¿¡å°ç¨åºï¼è¿éè¿æ¡ä»¶ç¼è¯å polyfill å®ç¾æ¯æ H5ãApp åå¶ä»å°ç¨åºå¹³å°ã</li>
<li><strong>çææ´»è·</strong>ï¼åºäº Vite çæï¼å¯ä»¥å¤ç¨å¤§éç°æç Vue 3 æä»¶åå·¥å·ã</li>
</ol>
<h2 id="ä½¿ç¨ä½éª">ä½¿ç¨ä½éª</h2>
<p>ä¸ªäººä½¿ç¨ä½éªè¿æ¯è®ä¸éçï¼æ¯æ vscode ä½ä¸ºç¼è¾å¨ï¼åºç¡çå°è£ï¼æ¯å¦ uni.requestï¼é½æ,å¼å¥äºå®ç¨çæä»¶(æ¯å¦ z-paging),èªå¨åå¼åï¼çº¦å®å¼è·¯ç±ï¼èªå¨å¼å¥ç»ä»¶ãèªå¨å¼å¥ apiï¼ï¼ä½¿ç¨ wot-ui ç»ä»¶åºãåå­åæ ·å¼ç­ç­ï¼æ¯åæ¥ä½¿ç¨ uniapp å¼åèµ·æ¥æçåææç¡®å®è¦å¥½.<br>
å®ç½å°åï¼<a href="https://www.unibest.tech/%EF%BC%8C%E8%BF%98%E6%9C%89%E5%BE%88%E5%A4%9A%E5%BE%88%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84%E4%B8%9C%E8%A5%BF%EF%BC%8C%E5%A4%A7%E5%AE%B6%E5%8F%AF%E4%BB%A5%E5%AE%98%E7%BD%91%E5%8E%BB%E7%9C%8B%E7%9C%8B%E3%80%82" target="_blank" rel="noopener nofollow">https://www.unibest.tech/ï¼è¿æå¾å¤å¾æææçä¸è¥¿ï¼å¤§å®¶å¯ä»¥å®ç½å»ççã</a></p>
<h2 id="ç»è¯­">ç»è¯­</h2>
<p>ææ¯å¨ä¸æ­æ¼è¿ï¼å·¥å·ä¹å¨ä¸æ­é©æ°ãunibest ä¸ä»ä»æ¯ä¸ä¸ªæ¨¡æ¿ï¼å®ä»£è¡¨äºä¸ç§<strong>é«æãè§èãç°ä»£</strong>ç Uni-app å¼åæ¹å¼ãå¦æä½ å¸ææè±ä¼ ç»å¼åæ¨¡å¼çæç¼ï¼æåå¢éçå¼åæçåä»£ç è´¨éï¼unibest ç»å¯¹å¼å¾ä¸è¯ã</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-16 14:51">2026-01-16 14:50</span>&nbsp;
<a href="https://www.cnblogs.com/lijinhuaboke">æ­¤é¢å·®ç£ã</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19491916);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19491916', targetLink: 'https://www.cnblogs.com/lijinhuaboke/p/19491916', title: 'unibestï¼åºäº Vite + Vue 3 ç Uni-app å¼åç»ææ¹æ¡' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ç»äºæ¾å°äºä¸æ¬¾è¶³å¤ç®åçä»»å¡ç®¡çè½¯ä»¶ ]]></title>
    <link>https://www.cnblogs.com/lbnnbs/p/19491338</link>
    <guid>6fa5eb3ac4adc33286601d557a1ddef9</guid>
    <description>
    <![CDATA[ 
        <div class="postTitle">
            <h1><a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/lbnnbs/p/19491338" title="åå¸äº 2026-01-16 12:23">
    <span role="heading" aria-level="2">ç»äºæ¾å°äºä¸æ¬¾è¶³å¤ç®åçä»»å¡ç®¡çè½¯ä»¶</span>
    

</a>
</h1>
        </div>
        <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
ç°å¨å¤§å®¶ä¸ä½ä¼æ¯æ¶é´å¾ç¢çåï¼å·¥ä½æ¶é´å¾å¤æ¶åé½æ¯ç¢çåçãä¸ºäºç®¡çå¥½èªå·±çå·¥ä½ï¼æåç±»è½¯ä»¶é½ä½¿ç¨è¿ãä½å¸é¢ä¸å¤æ°å·¥å·è¦ä¹åè½ç¹æï¼è¦ä¹ä¸æ¯æææºçï¼è¦ä¸å°±æ¯æ¶è´¹å¤ªè´µï¼çä¸æ¯æè¿æ ·çå°ç½è½ç¨çèµ·çãæä¸ªäººä½¿ç¨è¿ä½¿ç¨è¿å¾å¤çå·¥ä½ä»»å¡ç®¡çè½¯ä»¶ï¼æé¡¹ç®ç®¡çç±»çï¼æä¾¿ç­¾ç±»çï¼ææ¥ç¨ç±»çãä½é¡¹ç®ç®¡çç±»çæä½è¿äºå¤æï¼æ¥ç¨ç±»åä¾¿ç­¾ç±»çåæ²¡æå¢éåä½åè½ãæ»ä¹å¾é¾æ¾ä¸æ¬¾ç®åå¥½ç¨çå°å¢éå°é¡¹ç®ä»»å¡ç®¡çè½¯ä»¶ãåæ¥ç¾åº¦çæ¶åæç´¢å°äºä¸æ¬¾å«ä¹è¿ä»»å¡å®çå°å·¥å·ï¼å®å®ç½ä¸å¼ºè°ä»¥ âç®åãè½»å¿«ãå¥½ç¨â ä¸ºæ ¸å¿å®ä½ï¼æè§æç¹ç¹é è°±ãä¸è½½è¯ç¨åæè§è¿çä¸éï¼æèµ·ç è¦çä¸è¥¿é½æãç°å¨ç»è¿äºå ä¸ªæçä½¿ç¨ï¼æè§æ¾å°äºæ¢¦ä¸­æè½¯ï¼è¯´çè¿åäºç¹^_^ï¼ã<br><br>ä¼ ç»ä»»å¡ç®¡çè½¯ä»¶ï¼åå»ºä¸ä¸ªä»»å¡éè¦ç»åå¡«ååç§°ãè®¾ç½®åç±»ãéæ©æåãè°æ´æ¶é´ç­å¤ä¸ªç¹çæ­¥éª¤ï¼çè³éè¦è·³è½¬å¤ä¸ªé¡µé¢æè½å®æéç½®ï¼æ°æå¥é¨éè¦è±ä¸å°æ¶é´å»å­¦ä¹ ï¼ç¹å«æ¯é¡¹ç®ç®¡çç±»çï¼ç¹å«å¤æãä¸ä½æ²¡æå¸®å°å·¥ä½ææï¼åèç»å¢å äºé¢å¤è´æãèä¸æäºå·¥å·çä»»å¡ç¼è¾åè½ç®éï¼ç¼ºå°æ¤ééåï¼ææºä¸æä½ä¸ä¸å°å¿å é¤æ¶å è¿äºå¤´ï¼å°±è¦éåä¸å¤§æ®µäºãä½è¿ä¸ªä¹è¿ä»»å¡å®ä»»å¡åå»ºå¨æµç¨é½åç®åï¼åªéä¸æ³¨å¡«åä»»å¡åå®¹ï¼ä¼èªå¨æ ¹æ®é¦æ®µåå®¹æºè½çæä»»å¡åç§°ï¼ä¸ç¨åå¤æéæ é¢ï¼ç§éå®æä»»å¡è®°å½ãä»»å¡åå®¹ç¼è¾æ¡å¸¦äºæ¤éåéååè½ï¼æä½å¤±è¯¯è¦ä¸æã<br><br>ä»è¿æä¸ä¸ªä¸ä¼ çå¾çä¼èªå¨æ æ³¨åºå·çåè½ï¼å¯ä»¥åä»»å¡åå®¹ä¸çæè¿°å¹éèµ·æ¥ï¼è®©ä»»å¡è¦æ±æ´æ¸æ°ãè¿ç§ âå°æä½ãå¤ä¸æ³¨â çè®¾è®¡ï¼è®©ä»»å¡åå»ºæçæé«ä¸å°ã<br><br>ä¼ ç»ä»»å¡ç®¡çè½¯ä»¶å¸¸å¸¸è¿½æ± âå¤§èå¨âï¼å ç äºå¤§éä½¿ç¨çæä½çå¤æåè½ï¼ä¸ä»å¢å äºè½¯ä»¶ä½ç§¯åæä½é¾åº¦ï¼è¿å®¹æè®©æå¨ä¼å¤åè½é¢åä¸è¸æµé¼ã<br><br>æ¯å¦å§ï¼é¡¹ç®ç®¡çç±»è½¯ä»¶æéç®¡çæ¨¡åè®¾è®¡å¤ªå¤æï¼è®¾ç½®æµç¨ç¹çãå¨æ¯å¦å¤§å¤æ°å·¥å·çä»»å¡ç¶ææ²¡æ âæç½®â ç­éé¡¹ï¼ææ¶æ éå¤ççä»»å¡åªè½å ç¨åè¡¨ç©ºé´ï¼å¯¼è´ä¿¡æ¯æä¹±ã<br><br>ä½è¿ä¸ªä¹è¿ä»»å¡å®å¨ä»»å¡è®¾ç½®ä¸ï¼æâå·²æç½®â è¿ä¸ªä»»å¡ç¶æï¼å°±å¾æ¹ä¾¿ï¼ä»»å¡åè¡¨æ´æ´æ´ãå¨æ¶é´éæ©çé¢ç¨ç»¿è²å ç²å­ä½æ æ³¨èåæ¥ï¼å·¥ä½æææ¶ä¸éè¦é¢å¤åæ¢æ¥åAPPæ¥è¯¢åæãæ¹éæä½åè½ç®åç´è§ï¼é¿æä»»å¡å³å°±å¯ä»¥è¿å¥æ¹éç¼è¾æ¨¡å¼ï¼å³æ»æä½ä¹å¾äººæ§åï¼æå¾æä¸æ¶å°±åå»åä¸ä¸ãæ­¤å¤ï¼ä»»å¡åç±»ãä¼åçº§è®¾ç½®ãåä½äººææ´¾ãçç¹å¾ç­æ ¸å¿åè½ä¸åºä¿±å¨ï¼æ¢æ»¡è¶³å¤åºæ¯éæ±ï¼åæ²¡å¥å¤ä½çæä½ã<br><br>å¦å¤ï¼å¤§å¤æ¥æé¡¹ç®åä»»å¡ç®¡ççè½¯ä»¶ç§»å¨ç«¯é½æ¯è¾é¾ç¨ï¼å¤åºæ¶å®ææºä¸å¤çä»»å¡å¾å¤´ç¼ãè¿ä¸ªä¹è¿ä»»å¡å®å°±æ¯æ PC çµèç«¯ãææº APP ç«¯ãå¾®ä¿¡å°ç¨åºç«¯ãææº H5 ç½é¡µç«¯ï¼å¨å¤é¢ä¹è½éæ¶éå°æä½ã<br><br>æè§ç°å¨çè½¯ä»¶é½è¶åè¶å¤æï¼ä¸å®ç¨çåè½ä¸å¤§å ï¼è¿½æ±å¤§èå¨ï¼åè¿ç±»å³æ³¨æ ¸å¿éè¦çè½¯ä»¶åæ¯æ´å°ï¼ä¹ä¸ç¥éæ¯ååäºï¼æ¯ä¸ç¥éæä»¬éè¦ä»ä¹æ ·çå·¥å·æé¡ºæåã
</div>
<div class="clear"></div>

        <div class="postDesc">posted on 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-16 12:23">2026-01-16 12:23</span>&nbsp;
<a href="https://www.cnblogs.com/lbnnbs">lbnnbs</a>&nbsp;
éè¯»(<span id="post_view_count">207</span>)&nbsp;
è¯è®º(<span id="post_comment_count">2</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19491338);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19491338', targetLink: 'https://www.cnblogs.com/lbnnbs/p/19491338', title: 'ç»äºæ¾å°äºä¸æ¬¾è¶³å¤ç®åçä»»å¡ç®¡çè½¯ä»¶' })">ä¸¾æ¥</a>
</div>
     ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ MySQLæ·±åº¦åé¡µä¼åå®æï¼ä»è¸©åå°è½å°çå¨æ»ç¥ ]]></title>
    <link>https://www.cnblogs.com/sun-10387834/p/19491242</link>
    <guid>20c6b38af60b179ba5022452ce1f5b00</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/sun-10387834/p/19491242" title="åå¸äº 2026-01-16 11:57">
    <span role="heading" aria-level="2">MySQLæ·±åº¦åé¡µä¼åå®æï¼ä»è¸©åå°è½å°çå¨æ»ç¥</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>ååç«¯å¼åçåå­¦ï¼å¤§æ¦çé½éå°è¿MySQLåé¡µçåââæµåé¡µæ¶æ¥è¯¢ç§åï¼ä¸æ¦ç¿»å°å åé¡µãä¸ç¾é¡µä¹åï¼æ¥å£å°±å¼å§å¡é¡¿ï¼çè³ç´æ¥è¶æ¶ãä¹åå¨åçµååååè¡¨æ¥å£æ¶ï¼å°±å ä¸ºæ²¡å¤çå¥½æ·±åº¦åé¡µï¼çº¿ä¸åºç°è¿å¤æ¬¡æ¥å£è¶æ¶åè­¦ï¼ææ¥åæåç°æ¯åé¡µSQLçé®é¢ãä»å¤©å°±ç»åå®éå¼åç»éªï¼èèMySQLæ·±åº¦åé¡µçæ¬è´¨é®é¢ï¼ä»¥åé£äºè½ç´æ¥è½å°çä¼åæ¹æ¡ï¼é½æ¯ç»è¿çäº§ç¯å¢éªè¯çå¹²è´§ã</p>
<p>åè¯´è¯´æå¼å§è¸©çåãå½æ¶åååè¡¨æ¥å£ç¨çæ¯æå¸¸è§çåé¡µåæ³ï¼ä¹å°±æ¯LIMIT offset, sizeï¼ä»£ç éå°è£äºéç¨åé¡µé»è¾ï¼åç«¯ä¼ é¡µç åæ¯é¡µæ¡æ°ï¼åç«¯è®¡ç®offsetåæ¼SQLãä¸çº¿åææ°æ®éå°ï¼ç¿»ä¸ªåå é¡µé½æ²¡é®é¢ï¼å¯éçååæ°æ®æ¶¨å°å åä¸æ¡ï¼ç¨æ·ç¿»å°ç¬¬500é¡µä¹åï¼æ¥å£ååºæ¶é´ç´æ¥ä»å åæ¯«ç§é£åå°å ç¾çè³ä¸åæ¯«ç§ï¼çæ§é¢æ¿ä¸å¨æ¯çº¢è²åè­¦ã</p>
<h2 id="ä¸æ·±åº¦åé¡µä¸ºä»ä¹ä¼æ¢">ä¸ãæ·±åº¦åé¡µä¸ºä»ä¹ä¼æ¢ï¼</h2>
<p>ä¸å¼å§ä»¥ä¸ºæ¯ç´¢å¼æ²¡å»ºå¯¹ï¼ææ¥ååç°ç´¢å¼æ¯æ­£å¸¸çï¼åæ¥ç¿»äºMySQLå®æ¹ææ¡£ï¼åç»åæ§è¡è®¡ååæï¼æææäºæ ¸å¿åå ãæä»¬å¸¸ç¨çLIMIT offset, sizeåæ³ï¼æ¯å¦LIMIT 100000, 20ï¼MySQLå¹¶ä¸æ¯ç´æ¥è·³è¿å10ä¸æ¡æ°æ®ååé¢20æ¡ï¼èæ¯ä¼ä»è¡¨çç¬¬ä¸æ¡æ°æ®å¼å§ï¼éè¡æ«æï¼ä¸å±è¯»å100020æ¡æ°æ®ï¼ç¶åä¸¢å¼å10ä¸æ¡ï¼åªè¿åæå20æ¡ã</p>
<p>è¿å°±æå³çï¼offsetè¶å¤§ï¼MySQLéè¦æ«æçè¡æ°å°±è¶å¤ï¼ç£çIOååå­æ¶èé½ä¼æ¥å§å¢å ï¼æ¥è¯¢æçèªç¶åææ°çº§ä¸éãå¦æåé¡µSQLè¿æ²¡å½ä¸­ç´¢å¼ï¼è§¦åå¨è¡¨æ«æï¼é£æåµä¼æ´ç³ï¼ç´æ¥å¯¼è´æ´ä¸ªæ°æ®åºå®ä¾ååé£åï¼å½±åå¶ä»æ¥å£ã</p>
<h2 id="äºå®æä¼åæ¹æ¡ä»æå°é¾è½å°">äºãå®æä¼åæ¹æ¡ï¼ä»æå°é¾è½å°</h2>
<p>éå¯¹æ·±åº¦åé¡µé®é¢ï¼æ²¡æä¸è½æ¹æ¡ï¼åªè½ç»åä¸å¡åºæ¯éæ©æåéçãä¸é¢æä¼åçº§æåºï¼åäº«å ä¸ªå®éé¡¹ç®ä¸­ç¨è¿çä¼åæ¹æ¡ï¼ä»æ¹é ææ¬ä½å°é«éæ­¥è¯´æã</p>
<h3 id="æ¹æ¡ä¸ä¹¦ç­¾åé¡µæä¼è§£90åºæ¯éç¨">æ¹æ¡ä¸ï¼ä¹¦ç­¾åé¡µï¼æä¼è§£ï¼90%åºæ¯éç¨ï¼</h3>
<p>è¿æ¯æç®åå¨é¡¹ç®ä¸­ç¨å¾æå¤çæ¹æ¡ï¼æ¹é ææ¬ä½ï¼æ§è½æåææ¾ï¼æ ¸å¿æè·¯æ¯æ¾å¼offsetåç§»ï¼ç¨ä¸ä¸é¡µæåä¸æ¡æ°æ®çä¸»é®æå¯ä¸ç´¢å¼ä½ä¸ºâä¹¦ç­¾âï¼è®©MySQLç´æ¥éè¿ç´¢å¼å®ä½å°ä¹¦ç­¾ä½ç½®ï¼åå¾åæ¥è¯¢æå®æ¡æ°ï¼å½»åºé¿åæ«ææ ç¨æ°æ®ã</p>
<p>æ¯å¦ä¹åçåååè¡¨ï¼ç¨ä¸»é®idæåºï¼åæ¥çä½æåæ³æ¯ï¼</p>
<pre><code class="language-sql">-- ç¬¬5001é¡µï¼æ¯é¡µ20æ¡ï¼offset=100000
SELECT id, name, price, category FROM goods WHERE category=1 ORDER BY id LIMIT 100000, 20;
</code></pre>
<p>ä¼ååï¼è®©åç«¯ä¼ éä¸ä¸é¡µæåä¸æ¡æ°æ®çidï¼æ¯å¦ä¸ä¸é¡µæåä¸æ¡idæ¯100000ï¼æ°çSQLåæ³æ¯ï¼</p>
<pre><code class="language-sql">SELECT id, name, price, category FROM goods WHERE category=1 AND id &gt; 100000 ORDER BY id LIMIT 20;
</code></pre>
<p>è¿æ ·MySQLä¼ç´æ¥éè¿ä¸»é®ç´¢å¼å®ä½å°id=100000çä½ç½®ï¼åå¾åå20æ¡æ°æ®ï¼åªæ«æ20æ¡è®°å½ï¼ä¸ç®¡æ°æ®éå¤å¤§ï¼æ¥è¯¢éåº¦é½è½ç¨³å®å¨æ¯«ç§çº§ã</p>
<p>è¿éæä¸ªéè¦æ³¨æçç¹ï¼å¦ææåºå­æ®µä¸æ¯ä¸»é®ï¼èæ¯æ®éå­æ®µï¼æ¯å¦create_timeï¼ï¼ä¸å­å¨éå¤å¼ï¼ç´æ¥ç¨è¯¥å­æ®µä½ä¸ºä¹¦ç­¾ä¼å¯¼è´åé¡µéå¤ææ¼æ°æ®ãè¿æ¶éè¦ç¨âæåºå­æ®µ+ä¸»é®âçç»åä½ä¸ºéç¹ï¼ä¿è¯å¯ä¸æ§ã</p>
<p>æ¯å¦æåå»ºæ¶é´ååºåé¡µï¼ä¼ååæ³å¦ä¸ï¼</p>
<pre><code class="language-sql">-- ä¸ä¸é¡µæåä¸æ¡æ°æ®ï¼create_time='2026-01-15 18:30:00'ï¼id=100000
SELECT id, name, price, create_time FROM goods 
WHERE category=1 AND (create_time &lt; '2026-01-15 18:30:00' OR (create_time = '2026-01-15 18:30:00' AND id &lt; 100000))
ORDER BY create_time DESC, id DESC LIMIT 20;
</code></pre>
<p>è¿ç§ç»åéç¹çæ¹å¼ï¼è½å®ç¾è§£å³æåºå­æ®µéå¤å¯¼è´çåé¡µå¼å¸¸é®é¢ï¼ä¹æ¯çäº§ç¯å¢ä¸­å¤çéä¸»é®æåºåé¡µçæ ååæ³ã</p>
<h3 id="æ¹æ¡äºå­æ¥è¯¢joinä¼åå¼å®¹è·³é¡µéæ±">æ¹æ¡äºï¼å­æ¥è¯¢/JOINä¼åï¼å¼å®¹è·³é¡µéæ±ï¼</h3>
<p>ä¹¦ç­¾åé¡µçç¼ºç¹æ¯ä¸æ¯æç´æ¥è·³è½¬å°æå®é¡µç ï¼èå¾å¤ä¸å¡åºæ¯ï¼æ¯å¦åå°ç®¡çç³»ç»çåé¡µç»ä»¶ï¼å¿é¡»æé¡µç éæ©åè½ï¼è¿æ¶å°±éè¦ç¨å­æ¥è¯¢æJOINæ¥ä¼åã</p>
<p>æ ¸å¿æè·¯æ¯ï¼åéè¿ç´¢å¼æ¥è¯¢åºéè¦çä¸»é®IDï¼åéè¿ä¸»é®å³èæ¥è¯¢å¨å­æ®µæ°æ®ãå ä¸ºä¸»é®æ¯èç°ç´¢å¼ï¼æ¥è¯¢ä¸»é®çéåº¦æå¿«ï¼å­æ¥è¯¢åªæ«æä¸»é®å­æ®µçoffset+sizeæ¡æ°æ®ï¼èä¸æ¯å¨å­æ®µï¼è½å¤§å¹éä½IOå¼éã</p>
<p>åæ¥çä½æåæ³ä¼ååï¼</p>
<pre><code class="language-sql">SELECT * FROM goods WHERE category=1 ORDER BY id LIMIT 100000, 20;
</code></pre>
<p>ç¨JOINä¼ååçåæ³ï¼æ§è½æ´ä¼ï¼MySQLæ¨èï¼ï¼</p>
<pre><code class="language-sql">SELECT g.* FROM goods g
JOIN (SELECT id FROM goods WHERE category=1 ORDER BY id LIMIT 100000, 20) t ON g.id = t.id
ORDER BY g.id;
</code></pre>
<p>è¿ç§æ¹æ¡è½å®ç¾å¼å®¹è·³é¡µéæ±ï¼ä¸éè¦æ¹é åç«¯åé¡µç»ä»¶ï¼æ§è½æ¯åçLIMITæå10~100åï¼offsetè¶å¤§ï¼ä¼åææè¶ææ¾ãéè¦æ³¨æçæ¯ï¼å­æ¥è¯¢ä¸­çæåºå­æ®µå¿é¡»å»ºç«ç´¢å¼ï¼å¦åå­æ¥è¯¢ä¾ç¶ä¼å¨è¡¨æ«æï¼ä¼åå¤±æã</p>
<h3 id="æ¹æ¡ä¸ä¸å¡å±éå¶æç®åçååºæ¹æ¡">æ¹æ¡ä¸ï¼ä¸å¡å±éå¶ï¼æç®åçååºæ¹æ¡ï¼</h3>
<p>å¶å®å¾å¤ToCä¸å¡åºæ¯ä¸­ï¼ç¨æ·æ ¹æ¬ä¸ä¼ç¿»å°ç¬¬100é¡µä¹åãæ¯å¦çµååååè¡¨ï¼ç¨æ·éå¸¸åªçå10é¡µï¼ç¿»å°åé¢çæ¦çæä½ãéå¯¹è¿ç§åºæ¯ï¼æç®åçä¼åæ¹å¼å°±æ¯å¨ä¸å¡å±éå¶æå¤§é¡µç ã</p>
<p>æä»¬å½æ¶å¨åååè¡¨æ¥å£ä¸­åäºéå¶ï¼æå¤åªè½ç¿»å°ç¬¬50é¡µï¼è¶è¿50é¡µå°±æç¤ºâææ æ´å¤æ°æ®âï¼åæ¶å¼å¯¼ç¨æ·éè¿ç­éæ¡ä»¶ï¼æ¯å¦ä»·æ ¼åºé´ãééæåºï¼ç¼©å°æ¥è¯¢èå´ãè¿ç§æ¹å¼é¶å¼åææ¬ï¼é¶æ§è½æèï¼ç´æ¥ä»æ ¹æºè§£å³é®é¢ï¼éåå¤§å¤æ°ToCä¸å¡ã</p>
<h3 id="æ¹æ¡åç¹æ®åºæ¯ååºæµ·éæ°æ®æ¹éå¯¼åº">æ¹æ¡åï¼ç¹æ®åºæ¯ååºï¼æµ·éæ°æ®/æ¹éå¯¼åºï¼</h3>
<p>å¦æéå°åä¸çº§æ°æ®çæ·±åº¦åé¡µï¼æèéè¦æ¹éå¯¼åºæµ·éæ°æ®çåºæ¯ï¼ä¸é¢çæ¹æ¡å¯è½ä¸å¤ç¨ï¼è¿æ¶å¯ä»¥èèé¢çæåæ®µIDæä½¿ç¨æ¸¸æ åé¡µã</p>
<p>é¢çæåæ®µIDçæè·¯æ¯ï¼å¨æ°æ®è¡¨ä¸­æ°å¢segment_idå­æ®µï¼æä¸»é®åæ®µï¼æ¯å¦æ¯1000æ¡æ°æ®ä¸ºä¸ä¸ªåæ®µï¼ï¼å»ºç«segment_idç´¢å¼ãåé¡µæ¶åæsegment_idå®ä½åæ®µï¼åå¨åæ®µååé¡µï¼é¿åå¤§èå´æ«æãè¿ç§æ¹å¼éåæ°æ®æ´æ°é¢çä½çåºæ¯ï¼æ§è½æè´ï¼ä½éè¦é¢å¤çæ°æ®ã</p>
<p>æ¸¸æ åé¡µåéåæ¹éæ°æ®å¯¼åºãç¦»çº¿ä»»å¡ç­ä¸éè¦è·³é¡µçåºæ¯ï¼éè¿MySQLæ¸¸æ éè¡è¯»åæ°æ®ï¼é¿åä¸æ¬¡æ§å è½½å¤§éæ°æ®å°åå­ï¼ä¸ä¼æoffsetçæ§è½é®é¢ï¼ä½ä¸å¡æ¹é ææ¬è¾é«ï¼åªéååç«¯ç¦»çº¿ä»»å¡ã</p>
<h2 id="ä¸ä¼åå¿å®ååç¼ºä¸ä¸å¯">ä¸ãä¼åå¿å®ååï¼ç¼ºä¸ä¸å¯ï¼</h2>
<p>ä¸ç®¡ç¨åªç§ä¼åæ¹æ¡ï¼ä»¥ä¸ä¸¤ä¸ªååå¿é¡»éµå®ï¼å¦åææä¼åé½ä¼å¤±æï¼</p>
<p>1. åé¡µSQLå¿é¡»å½ä¸­ç´¢å¼ï¼WHEREç­éæ¡ä»¶+ORDER BYæåºæ¡ä»¶ï¼å¿é¡»å»ºç«å¯¹åºçååç´¢å¼æèåç´¢å¼ï¼å¦åMySQLä¼è§¦åå¨è¡¨æ«æ+æä»¶æåºï¼æ§è½ä¾ç¶æå·®ãæ¯å¦ä¸é¢çåååè¡¨ï¼éè¦å»ºç«category+idçèåç´¢å¼ï¼æè½è®©åé¡µSQLé«ææ§è¡ã</p>
<p>2. é¿åä½¿ç¨SELECT *ï¼åªæ¥è¯¢éè¦çå­æ®µï¼åå°æ°æ®ä¼ è¾ååå­å¼éãå¦æè¡¨ä¸­ætextãblobç­å¤§å­æ®µï¼SELECT *ä¼å¯¼è´æ§è½ä¸¥éæèï¼çè³ææ¢æ´ä¸ªæ°æ®åºã</p>
<h2 id="åæ»ç»">åãæ»ç»</h2>
<p>MySQLæ·±åº¦åé¡µçæ ¸å¿çç¾ï¼æ¬è´¨æ¯offsetå¯¼è´çæ ææ«æãä¼åçæ ¸å¿æè·¯å°±æ¯ï¼è½ä¸ç¨offsetå°±ä¸ç¨ï¼ä¼åç¨ä¹¦ç­¾åé¡µï¼å¿é¡»ç¨offsetå°±åå°æ«ææ°æ®éï¼ç¨å­æ¥è¯¢/JOINä¼åï¼ä¸å¡ä¸è½éå¶åé¡µæ·±åº¦å°±éå¶ï¼ä»æ ¹æºè§é¿é®é¢ã</p>
<p>å¨å®éå¼åä¸­ï¼ä¸éè¦è¿½æ±æå¤æçæ¹æ¡ï¼èæ¯è¦ç»åä¸å¡åºæ¯éæ©æåéçãå¤§é¨ååºæ¯ä¸ï¼ä¹¦ç­¾åé¡µ+ç´¢å¼ä¼åå°±è½æ»¡è¶³éæ±ï¼æ¹é ææ¬ä½ï¼æ§è½åç¨³å®ãå¸æè¿ç¯å®ææ»ç»è½å¸®å°å¤§å®¶ï¼é¿å¼MySQLæ·±åº¦åé¡µçåã</p>

</div>
<div id="MySignature" role="contentinfo">
    
<p>â¤ï¸ å¦æä½ åæ¬¢è¿ç¯æç« ï¼è¯·ç¹èµæ¯æï¼ ð åæ¶æ¬¢è¿å³æ³¨æçåå®¢ï¼è·åæ´å¤ç²¾å½©åå®¹ï¼</p>

<p>æ¬ææ¥èªåå®¢å­ï¼ä½èï¼<a href="https://www.cnblogs.com/sun-10387834/" target="_blank">ä½ç¥è®©ææ¥å·¡å±±</a>ï¼è½¬è½½è¯·æ³¨æåæé¾æ¥ï¼<a href="https://www.cnblogs.com/sun-10387834/p/19491242" target="_blank">https://www.cnblogs.com/sun-10387834/p/19491242</a></p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-16 11:57">2026-01-16 11:57</span>&nbsp;
<a href="https://www.cnblogs.com/sun-10387834">ä½ç¥è®©ææ¥å·¡å±±</a>&nbsp;
éè¯»(<span id="post_view_count">58</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19491242);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19491242', targetLink: 'https://www.cnblogs.com/sun-10387834/p/19491242', title: 'MySQLæ·±åº¦åé¡µä¼åå®æï¼ä»è¸©åå°è½å°çå¨æ»ç¥' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ç½ç»é®é¢å¦ä½ææ¥ï¼mtrå½ä»¤è¯¦è§£ ]]></title>
    <link>https://www.cnblogs.com/deep-sky/p/19491194</link>
    <guid>2c1dfe8cb6fced41a144e7dcd5332308</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/deep-sky/p/19491194" title="åå¸äº 2026-01-16 11:47">
    <span role="heading" aria-level="2">ç½ç»é®é¢å¦ä½ææ¥ï¼mtrå½ä»¤è¯¦è§£</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h3 id="mtr">mtr</h3>
<p><code>mtr</code>å½ä»¤æ¯ä¸ä¸ªç½ç»è¯æ­å·¥å·ï¼ç¨äºæ£æµç½ç»çè¿éæ§åå»¶è¿ãMTRæ¯My Tracerouteçç¼©åï¼æ¯tracerouteåpingå½ä»¤çç»åä½ã</p>
<p><code>mtr</code>é»è®¤ä½¿ç¨<code>ICMP</code>åè®®ï¼å¨ä»ç»<code>mtr</code>çè¯¦ç»ç¨æ³åæä»¬åäºè§£ä¸<code>ICMP</code>åè®®ã</p>
<h3 id="imcp">IMCP</h3>
<p><code>ICMP</code>ï¼Internet Control Message Protocolï¼äºèç½æ§å¶æ¥æåè®®ï¼<br>
æ¯ä¸ç§ç½ç»å±ï¼OSI ç¬¬ä¸å±ï¼åè®®ï¼ä¸»è¦ç¨äºå¨ IP ç½ç»ä¸­ä¼ éæ§å¶ä¿¡æ¯åéè¯¯ä¿¡æ¯ï¼èä¸æ¯ç¨æ¥ä¼ è¾ä¸å¡æ°æ®ã<br>
<code>ICMP</code>çä½ç¨æ¯ï¼<br>
1ãç½ç»è¿éæ§æµè¯<br>
æå¸¸ç¨çå°±æ¯<code>ping</code>å½ä»¤ï¼åéçæ¯<code>ICMP Echo Request</code>ï¼å¯¹æ¹åå¤<code>ICMP Echo Reply</code>ï¼ç¨æ¥å¤æ­ç½ç»æ¯å¦å¯è¾¾ãæ¯å¦ä¸¢åä»¥åå»¶è¿</p>
<p>2ãç½ç»æéåéè¯¯åé¦<br>
å½ IP åå¨ä¼ è¾è¿ç¨ä¸­åºç°é®é¢æ¶ï¼<code>ICMP</code> ä¼è¿åéè¯¯ä¿¡æ¯ï¼ä¾å¦ï¼</p>
<table>
<thead>
<tr>
<th>åºæ¯</th>
<th>ICMP ç±»å</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç®æ ä¸»æºä¸å¯è¾¾</td>
<td>Destination Unreachable</td>
</tr>
<tr>
<td>è·¯ç±ä¸­ TTL ç¨å°½</td>
<td>Time Exceeded</td>
</tr>
<tr>
<td>éè¦åçä½ç¦æ­¢åç</td>
<td>Fragmentation Needed</td>
</tr>
</tbody>
</table>
<p>ä¾å¦ï¼è·¯ç±å¨åç°ä¸ä¸è·³ä¸å¯è¾¾æ¶å°±ä¼è¢«æºä¸»æºåéä¸ä¸ªICMPä¸å¯è¾¾æ¥æ</p>
<p>3ãç½ç»è·¯å¾è¯æ­<br>
<code>traceroute</code>å<code>tracert</code>å°±æ¯éè¿<code>ICMP</code>å®ç°ç</p>
<h3 id="mtrçç¨æ³">mtrçç¨æ³</h3>
<pre><code>Usage:
 mtr [options] hostname

 -F, --filename FILE              ä»æä»¶ä¸­è¯»åhostname(s)
 -4                               ä½¿ç¨IPv4
 -6                               ä½¿ç¨IPv6
 -f, --first-ttl NUMBER           èµ·è·³ttlåæ°ï¼è·³è¿åé¢çN-1è·³ï¼åªåªæ¾ç¤ºTTL=Nåçè·³ï¼ä¸æ¹åçå®è·¯ç±ï¼åªæ¯ä¸æ¾ç¤ºï¼
 -m, --max-ttl NUMBER             maximum number of hops
 -u, --udp                        ä½¿ç¨UDP æ¿ä»£ ICMP echo
 -T, --tcp                        ä½¿ç¨ TCP æ¿ä»£ICMP echo
 -P, --port PORT                  ä½¿ç¨TCPãSCTPæUDPæ¢æµæ¶çç®æ ç«¯å£
 -s, --psize PACKETSIZE           è®¾ç½®æ¢æµåç payload å¤§å°ï¼å­èï¼
 -i, --interval SECONDS           è®¾ç½®æ¢æµåç åéé´é
 -r, --report                     æ¥åæ¨¡å¼ï¼ä¸æ¬¡æ§è¾åºï¼ä¸å·æ°ï¼
 -w, --report-wide                æ¥åæ¨¡å¼ï¼å®½å±å¯¹é½è¾åºï¼å­æ®µä¸æªæ­ï¼
 -c, --report-cycles COUNT        åéæ¢æµåæ¬¡æ°ï¼è®¾ç½®20å¿«éå¤æ­ï¼è®¾ç½®100è¾ä¸ºå¯ä¿¡
 -j, --json                       ä»¥jsonæ ¼å¼è¾åº
 -x, --xml                        ä»¥xmlæ ¼å¼è¾åº
 -C, --csv                        ä»¥csvæ ¼å¼è¾åº
 -l, --raw                        ä»¥åå§æ ¼å¼è¾åº
 -n, --no-dns                     ä¸ååådnsè§£æ(åªæ¾ç¤ºip)
 -y, --ipinfo NUMBER              è¾åº IP å½å±ä¿¡æ¯ï¼å½å®¶ / è¿è¥åï¼

</code></pre>
<p>å¨linuxä¸æ§è¡<code>mtr</code>æ¶ï¼<code>mtr</code>ä¼ç´æ¥æä½ç½ç»å±æé IP/ICMPæ¥æï¼æä»¥ä¸è¬éè¦ä½¿ç¨<code>sudo</code>æ§è¡</p>
<p>ç¤ºä¾ï¼<br>
<code>sudo mtr -r -n -c 100 www.baidu.com</code></p>
<p>è¾åºç»æ:</p>
<pre><code>Start: 2026-01-15T19:00:01+0800
HOST: LTB-MBP.local               Loss%   Snt   Last   Avg  Best  Wrst StDev
  1.|-- 183.2.172.177              0.0%   100    2.0   1.8   0.4  26.2   3.4
</code></pre>
<table>
<thead>
<tr>
<th>å­æ®µ</th>
<th>å«ä¹</th>
<th>è§£è¯»è¦ç¹</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>HOST</code></td>
<td>å½åè·³ä¸»æº</td>
<td><code>*</code> ä»£è¡¨æ ååº</td>
</tr>
<tr>
<td><code>Loss%</code></td>
<td>ä¸¢åç</td>
<td><strong>æ ¸å¿ææ </strong></td>
</tr>
<tr>
<td><code>Snt</code></td>
<td>åéåæ°</td>
<td>ç»è®¡æ ·æ¬é</td>
</tr>
<tr>
<td><code>Last</code></td>
<td>æè¿ä¸æ¬¡å»¶è¿</td>
<td>æ³¢å¨åè</td>
</tr>
<tr>
<td><code>Avg</code></td>
<td>å¹³åå»¶è¿</td>
<td>ä¸»è¦ç</td>
</tr>
<tr>
<td><code>Best</code></td>
<td>æå°å»¶è¿</td>
<td>çæ³æåµ</td>
</tr>
<tr>
<td><code>Wrst</code></td>
<td>æå¤§å»¶è¿</td>
<td>æ¯å¦ææå¨</td>
</tr>
<tr>
<td><code>StDev</code></td>
<td>æå¨</td>
<td>è¶å°è¶ç¨³å®</td>
</tr>
</tbody>
</table>
<h4 id="icmpéé">ICMPéé</h4>
<p>åæMTRè¾åºæ¶ï¼éè¦å³æ³¨ä¸¤ä¸ªæ¹é¢ï¼<strong>ä¸¢åç</strong>å<strong>å»¶è¿</strong>ãå¦æå¨æä¸ªè·³ç¹çå°ä¸å®ç¨åº¦çä¸¢åï¼è¿å¯è½è¯´æè¯¥è·¯ç±å¨æé®é¢ãç¶èï¼ä¸äºæå¡æä¾åæ®éä¼éå¶MTRä½¿ç¨ç<code>ICMP</code>ååºéçãè¿å¯è½ä¼è®©äººè¯¯ä»¥ä¸ºä¸¢åï¼å®éä¸å¹¶æ²¡æä¸¢åãè¦å¤æ­çå°çä¸¢åæ¯çå®çè¿æ¯éçéå¶å¼èµ·çï¼å¯ä»¥ççåç»­è·³è·ãå¦æè·³è·æ¾ç¤ºæå¤±ä¸º0.0%ï¼é£ä¹å¾å¯è½æ¯å ä¸ºï¼<code>ICMP</code>ååºéçéå¶å¯¼è´çèéçå®çä¸¢åï¼ä»¥ä¸é¢çMTRç»æä¸ºä¾:</p>
<pre><code>root@localhost:~# mtr -r www.google.com
HOST: example                       Loss%   Snt   Last  Avg  Best  Wrst   StDev
   1. 63.247.74.43                  0.0%    10    0.3   0.6   0.3   1.2   0.3
   2. 63.247.64.157                50.0%    10    0.4   1.0   0.4   6.1   1.8
   3. 209.51.130.213                0.0%    10    0.8   2.7   0.8  19.0   5.7
   4. aix.pr1.atl.google.com        0.0%    10    6.7   6.8   6.7   6.9   0.1
   5. 72.14.233.56                  0.0%    10    7.2   8.3   7.1  16.4   2.9
   6. 209.85.254.247                0.0%    10   39.1  39.4  39.1  39.7   0.2
   7. 64.233.174.46                 0.0%    10   39.6  40.4  39.4  46.9   2.3
   8. gw-in-f147.1e100.net          0.0%    10   39.6  40.5  39.5  46.7   2.2
</code></pre>
<p>ç¬¬äºè·³çä¸¢åçè½ç¶æ¯ 50%ï¼ä½æ¯å¶åç»­è·³æ²¡æä¸¢åä¸æç»è½å°å°è¾¾ç¬¬8è·³ï¼æä»¥æ´ä¸ªé¾è·¯å®éä¸éçï¼ç¬¬äºè·³çä¸¢åçæ¯å ä¸º<code>ICMP</code>ééå¯¼è´çã</p>
<p>å¯è½æçåå­¦ä¼æçé®äºï¼é¾éæåä¸è·³ä¸ä¼åºç°<code>ICMP</code>ééåï¼<br>
å®éä¸ï¼<code>mtr</code>åéæ°æ®ååï¼ä¼æ ¹æ®æ¶å°ç ICMP ååºç±»åæ¥å¤æ­ï¼</p>
<pre><code>ä¸­é´è·³è¿åï¼ICMP Type 11 (Time Exceeded)
            â "TTL èå°½ï¼æä¸æ¯ç®æ "
            â ç»§ç»­å¢å  TTL æ¢æµä¸ä¸è·³

æåä¸è·³è¿åï¼ICMP Type 0 (Echo Reply)
æ ICMP Type 3 (Destination Unreachable)
            â "æå°±æ¯ç®æ ä¸»æº"
            â åæ­¢æ¢æµ
</code></pre>
<p>è¿ç¨å¯ä»¥ç±»æ¯å¿«éééé¾è·¯ï¼</p>
<ul>
<li>ä¸­é´è½¬è¿ç«ï¼è·¯ç±å¨ï¼ï¼å¯è½ä¸ä¼åè¯ä½ "åè£¹ç»è¿äºè¿é"ï¼éå¶æå®å¨ä¸ååºICMP Time Exceededï¼</li>
<li>æç»æ¶è´§ç¹ï¼ç®æ ä¸»æºï¼ï¼å¿é¡»ç­¾æ¶å¹¶ç¡®è®¤"æ¶å°äº"ï¼ååºICMP Echo Replyï¼</li>
</ul>
<p>å³ä½¿ä¸­é´è½¬è¿ç«ä¸åè¯ä½ è¿åº¦ï¼åªè¦æåæ¶å°åè£¹å¹¶æç­¾æ¶ç¡®è®¤ï¼å°±è¯´ææ´æ¡é¾è·¯æ¯éçã</p>
<h4 id="çå®çä¸¢ååºæ¯">çå®çä¸¢ååºæ¯</h4>
<p>ä»¥ä¸é¢çMTRç»æä¸ºä¾ï¼</p>
<pre><code>root@localhost:~# mtr -r www.google.com
HOST: localhost                      Loss%   Snt   Last  Avg  Best  Wrst   StDev
   1. 63.247.74.43                   0.0%    10    0.3   0.6   0.3   1.2   0.3
   2. 63.247.64.157                  0.0%    10    0.4   1.0   0.4   6.1   1.8
   3. 209.51.130.213                60.0%    10    0.8   2.7   0.8  19.0   5.7
   4. aix.pr1.atl.google.com        60.0%    10    6.7   6.8   6.7   6.9   0.1
   5. 72.14.233.56                  50.0%    10    7.2   8.3   7.1  16.4   2.9
   6. 209.85.254.247                40.0%    10   39.1  39.4  39.1  39.7   0.2
   7. 64.233.174.46                 40.0%    10   39.6  40.4  39.4  46.9   2.3
   8. gw-in-f147.1e100.net          40.0%    10   39.6  40.5  39.5  46.7   2.2
</code></pre>
<p>å¨è¿ä¸ªç¤ºä¾ä¸­ï¼ç¬¬ä¸è·³çä¸¢åçé«è¾¾60%ä¸åç»­è·³ååºç°äºä¸¢åçå¹¶ä¸å½±åäºæåçç¬¬8è·³ï¼æä»¥å¯ä»¥å¤æ­ç¬¬ä¸è·³æ¯æé®é¢çãç±äºä¸­é´è·³<code>ICMP</code>ééåçå®ä¸¢åä¼åæ¶åçï¼æä»¥ä¼åºç°ä¸­é´è·³çä¸¢åçé«äºæåä¸è·³ä¸¢åçã</p>
<p>å½å¤æ­ç¡®å®åºç°äºä¸¢åæ¶ï¼æå¥½ä½¿ç¨MTRååæµè¯ä¸ï¼å ä¸ºæ°æ®åå¯è½æ¯åéæ¶éå°äºé®é¢ï¼ä¹å¯è½æ¯å¨è¿åååºæ¶åºç°äºé®é¢ã</p>
<h4 id="å»¶è¿">å»¶è¿</h4>
<p>MTRè¿è½æµè¯ä¸»æºä¸ç®æ ä¸»æºä¹é´è¿æ¥çå»¶è¿ãç±äºç©ççº¦æï¼å»¶è¿æ»æ¯éçè·¯ç±è·³æ°çå¢å èå¢å ãç¶èï¼å¢é¿åºä¿æä¸è´ä¸çº¿æ§ãå»¶è¿éå¸¸æ¯ç¸å¯¹çï¼å¹¶ä¸å¾å¤§ç¨åº¦ä¸åå³äºä¸»æºè¿æ¥çè´¨éåå¶ç©çè·ç¦»ã å¨è¯ä¼°å¯è½æé®é¢çè¿æ¥ç MTR æ¥åæ¶ï¼é¤äºç»å®åºåä¸­å¶ä»ä¸»æºä¹é´çå·²ç¥è¿æ¥éåº¦ä¹å¤ï¼è¿åºå°æ©æçåè½é½å¨çæ¥åè§ä¸ºä¸ä¸æã</p>
<p>ä»¥ä¸é¢çMTRç»æä¸ºä¾ï¼</p>
<pre><code>root@localhost:~# mtr --report www.google.com
HOST: localhost                      Loss%   Snt   Last   Avg  Best  Wrst  StDev
    1. 63.247.74.43                  0.0%    10    0.3   0.6   0.3   1.2   0.3
    2. 63.247.64.157                 0.0%    10    0.4   1.0   0.4   6.1   1.8
    3. 209.51.130.213                0.0%    10    0.8   2.7   0.8  19.0   5.7
    4. aix.pr1.atl.google.com        0.0%    10  388.0 360.4 342.1 396.7   0.2
    5. 72.14.233.56                  0.0%    10  390.6 360.4 342.1 396.7   0.2
    6. 209.85.254.247                0.0%    10  391.6 360.4 342.1 396.7   0.4
    7. 64.233.174.46                 0.0%    10  391.8 360.4 342.1 396.7   2.1
    8. gw-in-f147.1e100.net          0.0%    10  392.0 360.4 342.1 396.7   1.2
</code></pre>
<p>å¨ç¬¬3è·³åç¬¬4è·³ä¹é´å»¶è¿çªç¶å¢é«ï¼å¹¶ä¸å¨åç»­è·³ä¸­ä»ç¶å¾é«ï¼è¿å¯è½è¡¨æå­å¨ç½ç»å»¶è¿é®é¢ã</p>
<p>ä½æ¯ï¼é«å»¶è¿å¹¶ä¸æ»æ¯æå³çå½åè·¯ç±æé®é¢ã åä¸é¢è¿æ ·çæ¥åæå³çï¼å°½ç®¡ç¬¬åè·³å­å¨æç§é®é¢ï¼æµéä»ç¶å°è¾¾ç®æ ä¸»æºå¹¶è¿åæºä¸»æºã å»¶è¿ä¹å¯è½æ¯ç±è¿åè·¯çº¿é®é¢å¼èµ·çã è¿åè·¯çº¿ä¸ä¼å¨ MTR æ¥åä¸­çå°ï¼å¹¶ä¸æ°æ®åå¯ä»¥éç¨å®å¨ä¸åçè·¯çº¿å¾è¿äºç¹å®ç®çå°ã</p>
<p>å¨ä¸é¢çç¤ºä¾ä¸­ï¼è½ç¶å¨ç¬¬3è·³åç¬¬4è·³ä¹é´çå»¶è¿å­å¨è¾å¤§è·³è·ï¼ä½å¨ä»»ä½åç»­è·³ä¸­å»¶è¿å¹¶æ²¡æåå¢é«ã ç±æ­¤ï¼å¯ä»¥åçå°åè®¾ç¬¬åä¸ªè·¯ç±å¨å­å¨é®é¢ã</p>
<p><code>ICMP</code>ééä¹ä¼å¯¼è´å»¶è¿å¢å ï¼ä»¥ä¸é¢çMTRæ¥åä¸ºä¾ï¼</p>
<pre><code>root@localhost:~# mtr --report www.google.com
HOST:  localhost                     Loss%   Snt   Last  Avg  Best  Wrst   StDev
    1. 63.247.74.43                  0.0%    10    0.3   0.6   0.3   1.2   0.3
    2. 63.247.64.157                 0.0%    10    0.4   1.0   0.4   6.1   1.8
    3. 209.51.130.213                0.0%    10    0.8   2.7   0.8  19.0   5.7
    4. aix.pr1.atl.google.com        0.0%    10    6.7   6.8   6.7   6.9   0.1
    5. 72.14.233.56                  0.0%    10  254.2 250.3 230.1 263.4   2.9
    6. 209.85.254.247                0.0%    10   39.1  39.4  39.1  39.7   0.2
    7. 64.233.174.46                 0.0%    10   39.6  40.4  39.4  46.9   2.3
    8. gw-in-f147.1e100.net          0.0%    10   39.6  40.5  39.5  46.7   2.2
</code></pre>
<p>ä¹ä¸çï¼ç¬¬4è·³åç¬¬5è·³ä¹é´çå»¶è¿çªç¶å¢é«äºãç¶èï¼å¨ç¬¬äºè·³ä¹åï¼å»¶è¿æ¥å§ä¸éãè¿éæµå¾çå®éå»¶è¿çº¦ä¸º40msï¼ä¸å¹¶æ²¡æå½±åæåä¸æ¡çå»¶è¿ï¼ç½ç»å®éä¸æ¯æ²¡æé®é¢çã</p>
<h4 id="ä»ä¹æ¶åéè¦ä½¿ç¨tcpåudpåè®®è¿è¡æ£æµ">ä»ä¹æ¶åéè¦ä½¿ç¨TCPåUDPåè®®è¿è¡æ£æµï¼</h4>
<p>ä¸ç§åè®®çå¯¹æ¯</p>
<table>
<thead>
<tr>
<th>åè®®</th>
<th>é»è®¤ä½¿ç¨åºæ¯</th>
<th>ä¼ç¹</th>
<th>ç¼ºç¹</th>
</tr>
</thead>
<tbody>
<tr>
<td>ICMP</td>
<td>é»è®¤æ¨¡å¼</td>
<td>æå¸¸ç¨,å¤§å¤æ°è®¾å¤æ¯æ</td>
<td>å®¹æè¢«é²ç«å¢è¿æ»¤</td>
</tr>
<tr>
<td>UDP</td>
<td>æµè¯ UDP æå¡</td>
<td>æ¨¡æçå® UDP æµé</td>
<td>å¯è½è¢«è¿æ»¤,ä¸å¯é </td>
</tr>
<tr>
<td>TCP</td>
<td>æµè¯ Web/API æå¡</td>
<td>ææ¥è¿çå®åºç¨æµé,ä¸æè¢«è¿æ»¤</td>
<td>éè¦æå®ç«¯å£</td>
</tr>
</tbody>
</table>
<h5 id="ä»ä¹æ¶åä½¿ç¨tcpæ¨¡å¼">ä»ä¹æ¶åä½¿ç¨TCPæ¨¡å¼ï¼</h5>
<ul>
<li>åºæ¯ 1ï¼ICMPè¢«é²ç«å¢å±è½æICMPéé</li>
</ul>
<pre><code># ICMP æ¨¡å¼å¤±è´¥
mtr api.example.com
â å¤§é "waiting for reply" æ 100% ä¸¢å

# æ¹ç¨ TCP æ¨¡å¼ï¼æµè¯ 443 ç«¯å£ï¼
mtr -T -P 443 api.example.com
â æ­£å¸¸æ¾ç¤ºè·¯ç±è·¯å¾
</code></pre>
<ul>
<li>åºæ¯ 2ï¼æµè¯ç¹å®æå¡çç½ç»è´¨é</li>
</ul>
<pre><code># æµè¯ HTTPS æå¡ï¼443 ç«¯å£ï¼
mtr -T -P 443 api.example.com

# æµè¯ HTTP æå¡ï¼80 ç«¯å£ï¼
mtr -T -P 80 www.example.com

# æµè¯ SSH æå¡ï¼22 ç«¯å£ï¼
mtr -T -P 22 server.example.com

# æµè¯æ°æ®åºï¼3306 ç«¯å£ï¼
mtr -T -P 3306 db.example.com
</code></pre>
<p><code>mtr</code>ä½¿ç¨TCPåè®®è¿è¡ç½ç»æ£æµçè¿ç¨æ¯éè¿ TCPä¸æ¬¡æ¡æçåä¸¤æ­¥å®æç</p>
<pre><code>Client â SYN (dst port 443, TTL=N)
Server â SYN-ACK
Client â RST   ï¼ç«å»ï¼

</code></pre>
<p><code>mtr</code>çTCPæ¨¡å¼åªå®æâä¸æ¬¡æ¡æçåä¸¤æ­¥âï¼å¹¶å¨æ¶å°ååºåç«å»ä¸»å¨ <code>RST</code>ï¼ä¸ä¼å»ºç«çæ­£çTCPè¿æ¥ï¼æ´ä¸ä¼å½¢æå¤§éçESTABLISHED è¿æ¥ï¼å¯¹ç®æ ä¸»æºæ§è½å ä¹æ²¡æå½±åã</p>
<h5 id="ä»ä¹æ¶åä½¿ç¨udpæ¨¡å¼">ä»ä¹æ¶åä½¿ç¨UDPæ¨¡å¼ï¼</h5>
<ul>
<li>åºæ¯ 1ï¼æµè¯ UDP åºç¨</li>
</ul>
<pre><code># æµè¯ DNS æå¡ï¼53 ç«¯å£ï¼
mtr -u -P 53 8.8.8.8

# æµè¯ VoIP/è§é¢ä¼è®®ï¼å¦ 10000-20000 ç«¯å£èå´ï¼
mtr -u -P 16384 meeting.example.com

# æµè¯æ¸¸ææå¡å¨
mtr -u -P 27015 game.example.com

# æµè¯ VPNï¼å¦ OpenVPNï¼1194 ç«¯å£ï¼
mtr -u -P 1194 vpn.example.com
</code></pre>
<ul>
<li>åºæ¯ 2ï¼ICMP è¢«éæµä½ UDP æ²¡æ</li>
</ul>
<pre><code># æäºç½ç»å¯¹ ICMP éæµä½åè®¸ UDP
mtr -u api.example.com
</code></pre>
<h3 id="å°ç»">å°ç»</h3>
<p>æäº mtr ä¹åï¼å½å®¢æ·åé¦è¯¸å¦ï¼âæä»¬åå¬å®¤æ¯ååå®½å¸¦ãWi-Fi ä¹æ¯æ»¡æ ¼ï¼å°±æ¯ä½ ä»¬çäº§åä¸è¡ï¼é¡µé¢å è½½æ¢ãæ¥å£ååºæ¢âè¿ç±»é®é¢æ¶ï¼ä¸å¿æå¼ ã</p>
<p>æä¸å®¢æ·ä¸èµ·è·ä¸è· <code>mtr</code>ï¼æé¾è·¯æåµåä¸¢åçãå»¶è¿æåºæ¥ï¼æ²¿éæ¯ä¸è·³çç½ç»ç¶æé½ä¼æ¸æ¸æ¥æ¥å°åç°å¨ç¼åãé®é¢ç©¶ç«åºå¨æ¬å°ç½ç»ãè¿è¥åé¾è·¯ï¼è¿æ¯æå¡å¨ä¾§ï¼åºæ¬å°±ä¸ç®äºç¶äºã</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-16 11:48">2026-01-16 11:47</span>&nbsp;
<a href="https://www.cnblogs.com/deep-sky">DeepSkyä¸¶</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19491194);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19491194', targetLink: 'https://www.cnblogs.com/deep-sky/p/19491194', title: 'ç½ç»é®é¢å¦ä½ææ¥ï¼mtrå½ä»¤è¯¦è§£' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ æ²¡æåç«¯åï¼ææ MCP åè¿äº Chats 1.7.0 AI ç½å³ ]]></title>
    <link>https://www.cnblogs.com/sdcb/p/19489261/20260115-chats-170</link>
    <guid>bcb1ff02f7695b2f350bbc6988f04710</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/sdcb/p/19489261/20260115-chats-170" title="åå¸äº 2026-01-16 08:45">
    <span role="heading" aria-level="2">æ²¡æåç«¯åï¼ææ MCP åè¿äº Chats 1.7.0 AI ç½å³</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>è¿æ¯ä¸ç¯è¡¥æ¡£æç« ã</p>
<p>å¦æä½ è¿ä¸äºè§£ <strong>Sdcb Chats</strong>ï¼ç®åè¯´ï¼è¿æ¯ä¸ä¸ªæ¯æ 20+ ä¸»æµæ¨¡åæå¡åç AI ç½å³ãå®ä¸åªè½è®©ä½ å¨ä¸ä¸ªç»ä¸çé¢éèåç®¡çæææ¨¡åï¼åæ¶ä¹å¼å®¹æ å API åè®®ï¼æ¯æ Docker ä¸é®é¨ç½²ã</p>
<p>ç°å¨åå¤´çï¼Sdcb Chats ææ°çæ¬å·²ç»å°äº 1.10ï¼åç»­åèåäºäº¤éæèãCode Interpreterãå¤æ¨¡æåä¼ä¸çº§æéç­âçèµ·æ¥æ´é·âçè½åãä½å¦æè¦é®æï¼<strong>åªä¸ªçæ¬æ¯æä¸ªäººå¼åèå¥çåæ°´å²­ï¼</strong>ç­æ¡å¤§æ¦çè¿æ¯ 1.7.0ã</p>
<p>å ä¸º 1.7.0 ä¸åªæ¯âå äºä¸ªåè½âï¼èæ¯æä¸ä»¶äºåæ¶åçï¼</p>
<ul>
<li>MCPï¼Model Context Protocolï¼å¨ Chats éçæ­£è½å°ï¼ç»äºä»âè½èâèµ°åâè½è°ç¨å·¥å·âï¼çè®ºä¸è½æ¯æä»»ä½ç¬¦å MCP çæ¨¡åæå¡ååå·¥å·æå¡åï¼æ¯å¦ç¥è¯åºãæç´¢å¼æãè®¡ç®å¼æç­ï¼</li>
<li>æ°æ®æ¨¡åä¸æ°æ®åºå¤§æ¹ï¼ç ´åæ§åæ´ï¼ï¼ä¸ºåç»­æ¼è¿æå°åºæç¢ï¼</li>
<li>æ´å³é®çæ¯ï¼ä»è¿ä¸ªçæ¬å¼å§ï¼Chats åºæ¬åææä¸ä¸ªäººç»´æ¤äºââèæç¬¬ä¸æ¬¡æ·±åº¦å°è¯äº AI çâæ°å´ç¼ç¨ï¼Vibe Codingï¼âã</li>
</ul>
<hr>
<h2 id="ä¸ä¸ªæç©ºçªæ²¡æåç«¯çæç¬¬ä¸æ¬¡æaiå½åäº">ä¸ä¸ªæç©ºçªï¼æ²¡æåç«¯çæï¼ç¬¬ä¸æ¬¡æAIå½åäº</h2>
<p>è·ç¦»ä¸æ¬¡ 1.6 æ­£å¼åå¸è¿å»äº 3 ä¸ªå¤æãè¿æé´ï¼åææ­æ¡£å Chats åç«¯çæåå ä¸ºæäºæ²¡åæ³ç»§ç»­åä¸å¼åãæ²¡æåç«¯å¼åï¼æä¸ä¸ªåç«¯å¨ Next.js / React è¿å¥ä½ç³»éï¼çäº§åå ä¹ç´æ¥å½é¶ââé¡¹ç®ä¸åº¦é·å¥åæ»ã</p>
<p>äºæ¯æç¬¬ä¸æ¬¡è®¤çå°è¯æ AI å½ä½âå¯é©¾é©¶âï¼ä»é¡µé¢å¸å±ãç¶æç®¡çãç»ä»¶æåï¼å°åç§å¥æªç UI è¾¹è§è¡ä¸ºï¼å°¤å¶æ¯æµå¼è¾åºåå·¥å·è°ç¨å±ç¤ºï¼ï¼é½è®© AI ä¸èµ·åä¸ã</p>
<p>å¯ä»¥è¿æ ·è¯´ï¼</p>
<ul>
<li>Chats 1.7 ä¹åï¼åºæ¬è¿æ¯äººç±»ä¸è¡ä»£ç ä¸è¡ä»£ç æ¸ä¸å»çï¼</li>
<li>Chats 1.7.0 èµ·ï¼æå¼å§âç³»ç»æ§âå° Vibe Codingï¼<strong>å°¤å¶æ¯å¨æå¹¶ä¸çç React ä¸ï¼çäº§åæåéå¸¸ææ¾</strong>ï¼</li>
<li>ä¹ä»è¿æ¶èµ·ï¼Chats çç»´æ¤èï¼å ä¹ï¼åæäºæä¸ä¸ªäººã</li>
</ul>
<p>æä»¥è¿ç¯æç« æ é¢éåâæè°¢ AIâï¼ä¸æ¯å®¢å¥ï¼æ¯äºå®ã</p>
<hr>
<h2 id="170-çæ ¸å¿mcp-åè®®å¨é¢è½å°">1.7.0 çæ ¸å¿ï¼MCP åè®®å¨é¢è½å°</h2>
<p>å¦æä½ æ Chats åªå½æä¸ä¸ªâç»ä¸æ¨¡åç½å³ + æ¼äº® UIâçèå¤©åç«¯ï¼é£å®çä¸éå°±åªæ¯âææ¨¡ååç­å±ç¤ºåºæ¥âãä½ MCP çåºç°ï¼è®©âæ¨¡åè½åäºâæäºæ´ç»ä¸ãæ´å¯ç»åçæ¹å¼ã</p>
<p>å¨ 1.7.0 éï¼MCP çè½å°ä¸æ¯åçå¨âè½è¿ä¸âï¼èæ¯ææ´æ¡é¾è·¯æéäºï¼</p>
<ul>
<li>
<p>åç«¯æå®æ´ç MCP å®ä½ä¸æéå³ç³»ï¼ServerãToolãUser ææãChat ç»å®ï¼ï¼</p>
</li>
<li>
<p>åç«¯è®¾ç½®é¡µæ°å¢ MCP ç®¡çï¼æ°å¢/ç¼è¾ Serverãæåå·¥å·ãåéç¨æ·ï¼<br>
<img src="https://img2024.cnblogs.com/blog/233608/202601/233608-20260115213720114-1699629549.png" alt="02-mcp-list" loading="lazy"><br>
<img src="https://img2024.cnblogs.com/blog/233608/202601/233608-20260115213726314-440296231.png" alt="03-mcp-edit" loading="lazy"><br>
<img src="https://img2024.cnblogs.com/blog/233608/202601/233608-20260115213729222-1808157068.png" alt="04-mcp-assign-user" loading="lazy"></p>
</li>
<li>
<p>ä¼è¯ä¾§å¯ç»å®å¤ä¸ª MCP Serverï¼å¹¶å¨ä¼è¯åæ ¡éªå½åç¨æ·æéï¼</p>
</li>
<li>
<p>å·¥å·è°ç¨å¨ç¨èµ°æµå¼è¾åºï¼åæ°ä¸ç»æè½ä»¥ç»æåæ¹å¼è¿å¥æ¶æ¯åå®¹ï¼åç«¯ä¹è½æ´å¥½å°å¯è§åå±ç¤ºã<br>
<img src="https://img2024.cnblogs.com/blog/233608/202601/233608-20260115213734256-659322865.png" alt="05-mcp-call" loading="lazy"></p>
</li>
</ul>
<p>å¯¹æèè¨ï¼è¿æå³ç Chats ä»âèå¤© UIâåçº§æäºâå·¥å·ç¼æå¹³å°âçéå½¢ï¼ä½ å¯ä»¥ç»ä¸åç Chat Span éç½®ä¸åçå·¥å·éåï¼è®©å®ä»¬å¨åä¸å¥å¯¹è¯ä½éªéåæ¥ä½ç¨ã</p>
<hr>
<h2 id="å·¥å·è°ç¨ä½éªä¸åªæ¯è½ç¨èæ¯è¦çå¾æ">å·¥å·è°ç¨ä½éªï¼ä¸åªæ¯è½ç¨ï¼èæ¯è¦âçå¾æâ</h2>
<p>åè¿å·¥å·è°ç¨çäººé½ç¥éï¼<strong>è½è°ç¨æ¯ä¸åäºï¼è®©ç¨æ·çæåçäºä»ä¹æ¯å¦ä¸åäºã</strong></p>
<p>1.7.0 å¨å·¥å·è°ç¨çäºä»¶ä¸æ¶æ¯ç»æä¸åäºæ¯è¾å¤§çå¢å¼ºï¼SSE äºä»¶æ´ä¸°å¯ãæ¶æ¯åå®¹éæ°å¢äºå·¥å·è¯·æ±/ååºçç±»åï¼åç«¯è½æâè°ç¨äºä»ä¹å·¥å·ãä¼ äºä»ä¹åæ°ãæ¿å°äºä»ä¹ç»æâä»¥æ´æ¸æ°çæ¹å¼å±ç¤ºåºæ¥ã<br>
<img src="https://img2024.cnblogs.com/blog/233608/202601/233608-20260115213740193-1073025986.png" alt="06-sse-response-line" loading="lazy"></p>
<p>è¿ä»¶äºçèµ·æ¥åâä½éªâï¼ä½å®ä¼ç´æ¥å½±åä½ æ¯å¦æ¿æå¨çå®ä¸å¡éç¨å·¥å·è°ç¨ï¼å½å·¥å·ä¸å¤ãè°ç¨é¾ä¸é¿ï¼å¦æ UI åªæ¯ä¸å¨ Markdown æ··å¨ä¸èµ·ï¼é£åºæ¬ç­äºä¸å¯ç¨ã</p>
<hr>
<h2 id="ç ´åæ§åæ´æ°æ®åºä¸æ°æ®æ¨¡åçå¤§è§æ¨¡éæ">ç ´åæ§åæ´ï¼æ°æ®åºä¸æ°æ®æ¨¡åçå¤§è§æ¨¡éæ</h2>
<p>1.7.0 è¿æä¸ä¸ªç»ä¸å¼çå³é®è¯ï¼<strong>ç ´åæ§åæ´</strong>ã</p>
<p>ä¸ºäºæåå¯ç»´æ¤æ§ä¸å¯è§æµæ§ï¼æå¨è¿ä¸ªçæ¬éå¯¹æ¶æ¯å­å¨å±åäºéæï¼æ¯å¦æ <code>Message</code> æåä¸º <code>ChatTurn/Step</code> çåå±ç»æï¼ï¼åæ¶è¿ä¼´éäºç¨éå³èãé»è®¤å¼çº¦æãæåºå­æ®µç­ä¸ç³»åè°æ´ã<br>
<img src="https://img2024.cnblogs.com/blog/233608/202601/233608-20260115213746807-893994786.png" alt="07-db-schema" loading="lazy"></p>
<p>è¿ç§éæçç¹ç¹æ¯ï¼ä½ ç­æä¼çä¸æ¬¡ï¼ä½é¿æä¼çå¾å¤å½ãå°¤å¶æ¯å½ä½ åé¢è¦æç»­å å âæ¨ç/å·¥å·/å¤æ¨¡æ/å®¡è®¡/æ§è½ç»è®¡âè¿äºè½åæ¶ï¼åºå±ç»ææ¯å¦æ¸æ°ï¼å³å®äºä½ æ¯å¨âç»§ç»­ååè½âï¼è¿æ¯å¨âæ¯å ä¸ä¸ªåè½é½è¦æä¸æ¬¡å¢âã</p>
<hr>
<h2 id="ä¸äºæå¾å¨æçç»èæ¹è¿">ä¸äºæå¾å¨æçç»èæ¹è¿</h2>
<p>é¤äº MCP åæ°æ®åºéæï¼1.7.0 è¿æä¸å°âç¨èµ·æ¥ä¼ç½ä¸ç¹âçç¹è¡¥é½äºï¼æ¯å¦ï¼</p>
<ul>
<li>æ¨¡å/å¯é¥/é¢è®¾æ¯æææ½æåºï¼Provider/Key/Model çç»ç»æ¹å¼æ´æ¸æ°ï¼ï¼<br>
<img src="https://io.starworks.cc:88/cv-public/2026/08-drag-reordering.avif" alt="" loading="lazy"></li>
<li>èå¤©åçæè½åå¢å¼ºï¼åæ¡éæ°çæãä»ææ¡ç¨æ·æ¶æ¯å¼å§éæ°çææ´æ®µï¼<br>
<img src="https://io.starworks.cc:88/cv-public/2026/09-regenerate.avif" alt="" loading="lazy"></li>
<li>Markdown Mermaid æ¸²æåçº§ï¼æ/äº®ä¸»é¢ééãå¨å±æ¥çãæµå¼åå¥½ï¼<br>
<img src="https://io.starworks.cc:88/cv-public/2026/10-mermaid.avif" alt="" loading="lazy"></li>
<li>å¾ççæå°ºå¯¸æ§å¶ï¼å¨ä¼è¯ä¸­æå®å¸¸ç¨å°ºå¯¸ï¼</li>
<li>OpenAI å¼å®¹ä¸ç¬¬ä¸æ¹èè°å¢å¼ºï¼å·¥å·è°ç¨ééä¿®å¤ãç»å½å¼å®¹ä¼åç­ï¼ã<br>
<img src="https://img2024.cnblogs.com/blog/233608/202601/233608-20260115214018456-481361818.png" alt="11-image-size-control" loading="lazy"><br>
è¿äºçèµ·æ¥é¶ç¢ï¼ä½å®ä»¬å±åæååä¸ä¸ªç®æ ï¼<strong>æ Chats ä»âåè½å å âæ¨åâå¯é¿æä½¿ç¨çäº§åè´¨æâã</strong></li>
</ul>
<hr>
<h2 id="åçº§ä¸æ°æ®è¿ç§»ä¸æ¯æèªå¨è¿ç§»è¯·æå¨è·-sqlåªæä¾-sql-server">åçº§ä¸æ°æ®è¿ç§»ï¼ä¸æ¯æèªå¨è¿ç§»ï¼è¯·æå¨è· SQLï¼åªæä¾ SQL Serverï¼</h2>
<p>Sdcb Chatsçæ°æ®åºåæ´ <strong>ä¸æ¯æèªå¨æ°æ®è¿ç§»</strong>ãåçº§æ¶ä½ éè¦<strong>æå¨æ§è¡ SQL è¿ç§»èæ¬</strong>ï¼å¹¶ä¸ç®ååªæä¾äº <strong>SQL Server</strong> çè¿ç§»èæ¬ï¼</p>
<ul>
<li>1.7.0 è¿ç§»èæ¬ï¼<code>src/scripts/db-migration/1.7/20250516-mcp.sql</code></li>
</ul>
<p>åºæ¬æ­¥éª¤ä¹å¾æ´ç´ ï¼</p>
<ol>
<li>åå¤ä»½æ°æ®åºï¼</li>
<li>å¨ SQL Server ä¸æ§è¡ä¸é¢çè¿ç§»èæ¬ï¼</li>
</ol>
<p>å¦æä½ ç¨çæ¯ SQLite æ Postgresâ¦â¦æå»ºè®®ä½ åæä¸æ ·ï¼æ SQL ç©ç» AIï¼è®©å®å¸®ä½ æ¹æ SQLite/Postgres çæ¬ï¼ç¶åä½ åä¸è¾¹è·ä¸è¾¹ä¿®ï¼æèå¦æä½ è½æ¥åï¼åå åºï¼Chats ä¼å¨ç¬¬ä¸æ¬¡å¯å¨æ¶èªå¨åå»ºæ°è¡¨ç»æã</p>
<hr>
<h2 id="è´è°¢">è´è°¢</h2>
<p>1.7.0 çåå¸è¯´æéï¼æç¹å«æè°¢è¿ç¤¾åºè´¡ç®ï¼æ¯å¦<a href="https://github.com/sdcb/chats/pull/96" target="_blank" rel="noopener nofollow">ä¿®å¤ç»å½é¡µé¢è¿è¡æ¶éè¯¯ç PR #96</a>ï¼ãèå¨è¿ç¯è¡¥æ¡£éï¼æè¿æ³å ä¸ä¸ªæ´ä¸ªäººçè´è°¢ï¼æè°¢ AIã</p>
<hr>
<p>æè°¢éè¯»ï¼åæ¬¢çæåè¯·ç»æçGithubé¡¹ç®ä¸ä¸ªstarï¼<a href="https://github.com/sdcb/chats" target="_blank" rel="noopener nofollow">https://github.com/sdcb/chats</a><br>
æä»ä¹æ³æ³ä¹æ¬¢è¿å¨è¯è®ºåºçè¨äº¤æµï¼ä¹æ¬¢è¿å å¥æç <strong>Chats QQç¾¤ï¼498452653</strong>ï¼æä»¬ä¸èµ·æ¢ç´¢æ´å¤AIææ¯ç¡¬æ ¸ç©æ³ã</p>
<p>å¾®ä¿¡ç¾¤ï¼<img src="https://io.starworks.cc:88/cv-public/2026/chats-wxg-qr.png" alt="" loading="lazy"></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-16 08:45">2026-01-16 08:45</span>&nbsp;
<a href="https://www.cnblogs.com/sdcb">.NETéªæä½</a>&nbsp;
éè¯»(<span id="post_view_count">225</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19489261);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19489261', targetLink: 'https://www.cnblogs.com/sdcb/p/19489261/20260115-chats-170', title: 'æ²¡æåç«¯åï¼ææ MCP åè¿äº Chats 1.7.0 AI ç½å³' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ å«åæå URL è§£æå¨äºï¼PHP 8.5 URI æ©å±è®© URL å¤çæ´å®å¨ãæ´å¹²å ]]></title>
    <link>https://www.cnblogs.com/catchadmin/p/19490082</link>
    <guid>558c3c53efa3e71fac89d3d533916200</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/catchadmin/p/19490082" title="åå¸äº 2026-01-16 07:48">
    <span role="heading" aria-level="2">å«åæå URL è§£æå¨äºï¼PHP 8.5 URI æ©å±è®© URL å¤çæ´å®å¨ãæ´å¹²å</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="å«åæå-url-è§£æå¨äºphp-85-uri-æ©å±è®©-url-å¤çæ´å®å¨æ´å¹²å">å«åæå URL è§£æå¨äºï¼PHP 8.5 URI æ©å±è®© URL å¤çæ´å®å¨ãæ´å¹²å</h1>
<h2 id="parse_url-è½ç¨ä½ä¸å¤ç¨">parse_url() è½ç¨ï¼ä½ä¸å¤ç¨</h2>
<p>å¤å¹´æ¥ï¼PHP å¼åèå¤ç URL çæ¹å¼å¤§åå°å¼ï¼</p>
<ul>
<li>ç¨ <code>parse_url()</code> æååé¨å</li>
<li>ç¨ <code>rawurlencode()</code> / <code>urlencode()</code> è½¬ä¹</li>
<li>ç¨å­ç¬¦ä¸²æ¼æ¥éå»ºæç» URL</li>
<li>éå°"å¥æª"è¾å¥æ¶ï¼åä¸å ä¸ªæ­£å</li>
</ul>
<p>å¤§å¤æ°æåµä¸è¿å¥æµç¨è½è·éãé®é¢å¨äºï¼URL å¤çæ°æ°æ¯é£ç§"å¨è¾¹è§æåµä¸åºé®é¢"çé¢åï¼ç¼ç ãfragmentãuserinfoãå½éåååã"ç­ä»·ä½ä¸ç¸å"ç URLï¼ä»¥ååç§åªå¨çäº§æ¥å¿éæååºæ¥çè¾¹ç¼åºæ¯ã</p>
<p>PHP 8.5 æä¾äºä¸ä¸ªåç½®æ¿ä»£æ¹æ¡ï¼ä¸ä¸ªå§ç»å¯ç¨ç URI æ©å±ï¼æä¾ API æ¥æç§ RFC 3986 å WHATWG URL æ åè§£æãä¿®æ¹ URL/URIã</p>
<p>å¦æ"æ å"äºå­è®©ä½ è§å¾æ½è±¡ï¼è¿éç»åºå®éå«ä¹ï¼</p>
<ul>
<li>æ¿å° URI/URL å¯¹è±¡ï¼èä¸æ¯æ°ç» + å­ç¬¦ä¸²æ¼æ¥ã</li>
<li>ç¨å®å¨çç»ä»¶ getter åä¸å¯åç <code>with*()</code> æ¹æ³ã</li>
<li>ä½ å¯ä»¥éæ© RFC 3986 è¡ä¸ºï¼ä¸¥æ ¼ URIï¼"åå§ vs è§èåè§£ç "ï¼ææµè§å¨é£æ ¼ç WHATWG è¡ä¸ºï¼Unicode/IDNAãè½¯éè¯¯ãèªå¨ç¼ç ï¼ã</li>
</ul>
<p>æ¬ææ¯ä¸ç¯å®ææç¨ï¼éç¹è®²ï¼</p>
<ul>
<li>ä¸ºä»ä¹æå¨è§£æå®¹æåºéï¼</li>
<li>æ° URI å¯¹è±¡æä¹ç¨ï¼</li>
<li>å¦ä½å®å¨å°ä¿®æ¹/è§èåï¼</li>
<li>å¨éå®åãç­¾åé¾æ¥ç­å®å¨ææåºæ¯ä¸å¦ä½ä½¿ç¨ã</li>
</ul>
<p>ä¸è®²åçº§æåï¼ä¸è®²åºå¼æ¸åââåªè®² URI æ©å±ã</p>
<p><a href="https://catchadmin.com/post/2026-01/php85-uri-extension-safer-cleaner-urls" target="_blank" rel="noopener nofollow">åæ å«åæå URL è§£æå¨äºï¼PHP 8.5 URI æ©å±è®© URL å¤çæ´å®å¨ãæ´å¹²å</a></p>
<h2 id="æå¨-url-è§£æçé®é¢">æå¨ URL è§£æçé®é¢</h2>
<h3 id="parse_url-ä¸è§£ç èä¸å¾å®¹æå¿">parse_url() ä¸è§£ç ï¼èä¸å¾å®¹æå¿ï¼</h3>
<p>PHP ç <code>parse_url()</code> è¿ååç»ä»¶ï¼ä½<strong>ä¸ä¼</strong> URL è§£ç å®ä»¬ã</p>
<p>ä¹å°±æ¯è¯´ï¼</p>
<pre><code class="language-php">$u = parse_url("https://example.com/t%65st?name=Ali%63e#fr%61g");
var_dump($u['path']);   // "/t%65st"
var_dump($u['query']);  // "name=Ali%63e"
var_dump($u['fragment']); // "fr%61g"
</code></pre>
<p>å¦æä½ å¨æ¯è¾è·¯å¾æåºç¨è·¯ç±è§åæ¶æ²¡æç»ä¸è§£ç /è§èåï¼å¯è½ä¼æç­ä»·ç URI å½æä¸åçæ¥å¤çã</p>
<p>æ´ç³çæ¯ï¼å¢éå¾å¾æ··ç¨ï¼</p>
<ul>
<li>æäºå°æ¹ç¨è§£ç åçå¼ï¼</li>
<li>æäºå°æ¹ç¨åå§å¼ï¼</li>
<li>åå ä¸æ£è½å¨åå¤çä¸´æ¶è§£ç é»è¾ã</li>
</ul>
<p>è¿ç§æ··ä¹±å¾å®¹æåä¸éè½ bug åå®å¨éæ£ã</p>
<h3 id="å­ç¬¦ä¸²æ¼æ¥å®¹ææ¼åºå·®ä¸ç¹å¯¹ç-url">å­ç¬¦ä¸²æ¼æ¥å®¹ææ¼åº"å·®ä¸ç¹å¯¹"ç URL</h3>
<p>æå¨éå»º URL å®¹æç¯çéï¼</p>
<ul>
<li>æ¼æ <code>?</code> æ <code>#</code></li>
<li>éå¤ç¼ç </li>
<li>å®å¨æ²¡ç¼ç </li>
<li>ç¼ç éäºä¸è¥¿ï¼æ¯å¦ææ´ä¸ª query string ç¼ç èä¸æ¯åªç¼ç  valueï¼</li>
<li>ä¸¢å¤±ææä¹±åæ°é¡ºåº</li>
<li>ç©º query/fragment å¤çä¸å½</li>
</ul>
<p>ä¸ä¸ªå¸¸è§ç"å·®ä¸ç¹å¯¹"å½æ°ï¼</p>
<pre><code class="language-php">function addQueryParam(string $url, string $key, string $value): string
{
    $parts = parse_url($url);
    $query = $parts['query'] ?? '';
    $query .= ($query === '' ? '' : '&amp;') . $key . '=' . urlencode($value);
    $out = $parts['scheme'] . '://' . $parts['host'] . ($parts['path'] ?? '');
    if ($query !== '') {
        $out .= '?' . $query;
    }
    if (isset($parts['fragment'])) {
        $out .= '#' . $parts['fragment'];
    }
    return $out;
}
</code></pre>
<p>çèµ·æ¥æ²¡é®é¢ãç´å°éå°ï¼</p>
<ul>
<li>æ²¡æ scheme/host ç URLï¼ç¸å¯¹ URLï¼ï¼</li>
<li>å¸¦ userinfo/port ç URLï¼</li>
<li>å·²ç»ç¼ç è¿çå¼ï¼</li>
<li>éè¦ <code>rawurlencode()</code> è§åï¼RFC 3986ï¼çåæ°ï¼</li>
<li>åºè¯¥åæ ·ä¿çç fragmentã</li>
</ul>
<h3 id="ç­ä»·ç-url-ä¸ä¸å®æ¯ç¸åçå­ç¬¦ä¸²">ç­ä»·ç URL ä¸ä¸å®æ¯ç¸åçå­ç¬¦ä¸²</h3>
<p>ä¸é¢è¿äºå¯ä»¥æååä¸ä¸ªèµæºï¼ä½å­ç¬¦ä¸²ä¸åï¼</p>
<ul>
<li>scheme/host å¤§å°åä¸åï¼<code>HTTPS://EXAMPLE.com</code>ï¼</li>
<li>path ä¸­ <code>%65</code> vs <code>e</code>ï¼<code>/t%65st</code> vs <code>/test</code>ï¼</li>
<li>path ä¸­çç¹å·æ®µï¼<code>/foo/../bar/</code>ï¼</li>
<li>é»è®¤ç«¯å£ï¼https ç <code>:443</code>ï¼</li>
</ul>
<p>å¦æä½ æ URL å½æçº¯å­ç¬¦ä¸²å¤çï¼è¦ä¹ï¼</p>
<ul>
<li>ç¼å­/è·¯ç±åºç°è¯¡å¼é®é¢ï¼</li>
<li>è¦ä¹å®å¨æ£æ¥è¢«ç»è¿ï¼å ä¸ºä½ æ¯è¾çæ¯"éè¯¯çè¡¨ç¤ºå½¢å¼"ã</li>
</ul>
<h3 id="idnaå½éåååè¿æ¶åå®å¨é®é¢">IDNAï¼å½éåååï¼è¿æ¶åå®å¨é®é¢</h3>
<p>å¦æä½ åè®¸ç¨æ·æäº¤ URLï¼å½éåååå¯è½æ¯åæ³çââä½ä¹å¯è½é ææ··æ·ãååå¯ä»¥ç¨ Unicode æ punycodeï¼ASCII å½¢å¼ï¼è¡¨ç¤ºãRFC è®¨è®ºä¸­æç¡®æåºäººä¸ºé£é©ï¼punycode ååå¨ Unicode æ¸²ææ¶å¯è½çèµ·æ¥åä¸ä¸ªçæçãä½å®éä¸åçååã</p>
<p>è¿ä¸æ¯ä½ æ³ç¨æ­£å"æå¨å¤ç"ç¶åç¥ç¥·æ²¡é®é¢çäºã</p>
<h2 id="uri-æ©å±çæ¦å¿µuri-å¯¹è±¡--ä¸¤å¥æ å">URI æ©å±çæ¦å¿µï¼URI å¯¹è±¡ + ä¸¤å¥æ å</h2>
<p>PHP 8.5 ç URI æ©å±æä¾ä¸¤ä¸ªä¸»è¦ç±»ï¼</p>
<ul>
<li><code>Uri\Rfc3986\Uri</code>ï¼RFC 3986 åè§ï¼ä¸¥æ ¼ URI è§åï¼</li>
<li><code>Uri\WhatWg\Url</code>ï¼WHATWG URL åè§ï¼æµè§å¨é£æ ¼ç URL è§åï¼</li>
</ul>
<p>éå¥çç±»ååæ¬ï¼</p>
<ul>
<li><code>Uri\InvalidUriException</code></li>
<li><code>Uri\WhatWg\InvalidUrlException</code></li>
<li><code>Uri\WhatWg\UrlValidationError</code> å <code>UrlValidationErrorType</code></li>
<li><code>Uri\UriComparisonMode</code>ï¼ç¨äºæ¯è¾ï¼</li>
</ul>
<p>ä¸ä¸ªå³é®è®¾è®¡å³ç­ï¼ä¸¤ä¸ªå®ç°é½æ¯ readonly ä¸ä»¥ä¸å¯åæ¹å¼ä½¿ç¨ââ<code>withPath()</code>ã<code>withQuery()</code> ç­æ¹æ³è¿åæ°å®ä¾ã</p>
<p>å¦ä¸ä¸ªè¦ç¹ï¼è¿ä¸ªæ©å±å¨ PHP 8.5 ä¸­å§ç»å¯ç¨ï¼åºå±ç±ä»¥ä¸åºé©±å¨ï¼</p>
<ul>
<li>uriparserï¼ç¨äº RFC 3986ï¼</li>
<li>Lexborï¼ç¨äº WHATWG URLï¼</li>
</ul>
<p>æä»¥ä½ ä¸éè¦ç¬¬ä¸æ¹åºå°±è½è·å¾åçç URL å¤çè½åã</p>
<h2 id="åå»ºåè§£æ-uriä»å­ç¬¦ä¸²å°ç»ä»¶">åå»ºåè§£æ URIï¼ä»å­ç¬¦ä¸²å°ç»ä»¶</h2>
<h3 id="æç®åçæåµè§£æä¸ä¸ª-http-url-å¹¶è®¿é®åé¨å">æç®åçæåµï¼è§£æä¸ä¸ª HTTP URL å¹¶è®¿é®åé¨å</h3>
<p>RFC 3986ï¼</p>
<pre><code class="language-php">use Uri\Rfc3986\Uri;

$uri = new Uri("https://php.net/releases/8.5/en.php");

echo $uri-&gt;getScheme(); // "https"
echo $uri-&gt;getHost();   // "php.net"
echo $uri-&gt;getPath();   // "/releases/8.5/en.php"
</code></pre>
<p>WHATWGï¼</p>
<pre><code class="language-php">use Uri\WhatWg\Url;

$url = new Url("https://example.com/path?query=1#frag");

echo $url-&gt;getScheme();      // "https"
echo $url-&gt;getAsciiHost();   // "example.com"
echo $url-&gt;getPath();        // "/path"
echo $url-&gt;getQuery();       // "query=1"
echo $url-&gt;getFragment();    // "frag"
</code></pre>
<p>æ³¨æï¼WHATWG ç getter ææä¸è¿ååéç¬¦ï¼å¦ <code>:</code> <code>/</code> <code>?</code> <code>#</code>ï¼ã</p>
<h3 id="æé å½æ°æå¼å¸¸parse-è¿å-null">æé å½æ°æå¼å¸¸ï¼parse() è¿å null</h3>
<p>ä¸¤ä¸ªå®ç°é½æ¯æä¸¤ç§è§£æé£æ ¼ï¼</p>
<ul>
<li>æé å½æ°ï¼æ ææ¶æå¼å¸¸</li>
<li><code>parse()</code>ï¼æ ææ¶è¿å null</li>
</ul>
<p>RFC 3986 è¡ä¸ºï¼</p>
<pre><code class="language-php">use Uri\Rfc3986\Uri;
use Uri\InvalidUriException;

try {
    $uri = new Uri("not a uri");
} catch (InvalidUriException $e) {
    // æç»è¾å¥
}

$uri = Uri::parse("not a uri");
var_dump($uri); // null
</code></pre>
<p>WHATWG è¡ä¸ºæä¾æ´ä¸°å¯çéè¯¯ä¿¡æ¯ï¼</p>
<pre><code class="language-php">use Uri\WhatWg\Url;
use Uri\WhatWg\InvalidUrlException;

try {
    $url = new Url("invalid url");
} catch (InvalidUrlException $e) {
    // $e-&gt;errors åå« UrlValidationError å®ä¾
}

$errors = [];
$url = Url::parse("invalid url", null, $errors);
var_dump($url);    // null
var_dump($errors); // UrlValidationError æ°ç»
</code></pre>
<p>è¿ç§åºåï¼ç¡¬éè¯¯ vs è½¯éè¯¯ vs parse-and-return-nullï¼å¨ RFC ä¸­æè¯¦ç»è¯´æã</p>
<h3 id="base-url-åå¼ç¨è§£æç¸å¯¹--ç»å¯¹">Base URL åå¼ç¨è§£æï¼ç¸å¯¹ â ç»å¯¹ï¼</h3>
<p>æäºè¿ä¸ªåè½ï¼ä½ ä¸åéè¦æå¨æ£æ¥æ¯å¦ä»¥ <code>/</code> å¼å¤´ç¶åæ¼æ¥ã</p>
<p>å¨æé å½æ°æ <code>parse()</code> ä¸­ä½¿ç¨ base URLï¼</p>
<pre><code class="language-php">use Uri\Rfc3986\Uri;

$base = new Uri("https://example.com");
$uri  = new Uri("/foo", $base);

echo $uri-&gt;toString(); // "https://example.com/foo"
</code></pre>
<p>WHATWG ç±»ä¼¼ï¼</p>
<pre><code class="language-php">use Uri\WhatWg\Url;

$base = new Url("https://example.com");
$url  = Url::parse("/foo", $base);

echo $url-&gt;toAsciiString(); // "https://example.com/foo"
</code></pre>
<p>æ©å±è¿æä¾äºä¾¿æ·ç <code>resolve()</code> æ¹æ³ï¼ä»¥å½åå¯¹è±¡ä½ä¸º baseã</p>
<h2 id="å®å¨ä¿®æ¹è®¾ç½®æ¿æ¢-pathqueryfragmentä¸å¯å">å®å¨ä¿®æ¹ï¼è®¾ç½®/æ¿æ¢ pathãqueryãfragmentï¼ä¸å¯åï¼</h2>
<p>æ¿å°å¯¹è±¡åï¼å¯ä»¥ç¨ <code>with*()</code> æ¹æ³ä¿®æ¹ç»ä»¶ãè¿äºæ¹æ³è¿åæ°å®ä¾ï¼åå¯¹è±¡ä¿æä¸åã</p>
<h3 id="rfc-3986withpathwithquerywithfragment">RFC 3986ï¼withPath()ãwithQuery()ãwithFragment()</h3>
<pre><code class="language-php">use Uri\Rfc3986\Uri;

$uri = new Uri("https://example.com/products?sort=asc#top");

$updated = $uri
    -&gt;withPath("/products/123")
    -&gt;withQuery("sort=desc&amp;ref=home")
    -&gt;withFragment("reviews");

echo $uri-&gt;toString();     // åå¯¹è±¡ä¸å
echo $updated-&gt;toString(); // ä¿®æ¹åç
</code></pre>
<p>RFC 3986 æä¾"åå§"å"è§èåè§£ç "ä¸¤ç§ getterï¼ä¸ä¸èè¯¦è¿°ï¼ï¼ä»¥å <code>toString()</code> å <code>toRawString()</code> æ¹æ³ã</p>
<h3 id="whatwgåæ ·çæè·¯å¤å -asciiunicode-å­ç¬¦ä¸²è¾åº">WHATWGï¼åæ ·çæè·¯ï¼å¤å  ASCII/Unicode å­ç¬¦ä¸²è¾åº</h3>
<pre><code class="language-php">use Uri\WhatWg\Url;

$url = new Url("https://example.com/");

$new = $url
    -&gt;withPath("/search")
    -&gt;withQuery("q=php+8.5")
    -&gt;withFragment("results");

echo $new-&gt;toAsciiString();
echo $new-&gt;toUnicodeString();
</code></pre>
<p>WHATWG æ <code>toAsciiString()</code> å <code>toUnicodeString()</code> ä¸¤ç§è¾åºï¼åå«ç¨äºæºå¨å¤çåäººç±»å±ç¤ºã</p>
<h3 id="ä¸ä¸ªå°ä½éè¦çè¡ä¸ºè¾å¥ä¸­çåéç¬¦">ä¸ä¸ªå°ä½éè¦çè¡ä¸ºï¼è¾å¥ä¸­çåéç¬¦</h3>
<p>ä½¿ç¨ WHATWG æ¶ï¼å¦æä½ å¨è®¾ç½® query/fragment æ¶ä¸å°å¿åå«äº <code>?</code> æ <code>#</code>ï¼å®ä¼æå®ä»¬å½ä½åéç¬¦å¹¶å»æï¼</p>
<pre><code class="language-php">use Uri\WhatWg\Url;

$url = new Url("https://example.com/");
$url = $url-&gt;withQuery("?foo");
$url = $url-&gt;withFragment("#bar");

echo $url-&gt;getQuery();    // "foo"
echo $url-&gt;getFragment(); // "bar"
</code></pre>
<p>è¿ä¸ªè¡ä¸ºå¨ææ¡£ä¸­ææç¡®è¯´æã</p>
<h2 id="è§èåä¸ç¼ç é¿åéå¤ç¼ç åå¥æªå­ç¬¦">è§èåä¸ç¼ç ï¼é¿åéå¤ç¼ç å"å¥æªå­ç¬¦"</h2>
<p>URI æ©å±çä»·å¼ä¸æ­¢äº API è®¾è®¡ââå®è®©ä½ è½æ§å¶ URL çè¡¨ç¤ºå½¢å¼ã</p>
<h3 id="rfc-3986-ç»ä½ ä¸¤ç§è¡¨ç¤ºåå§-vs-è§èåè§£ç ">RFC 3986 ç»ä½ ä¸¤ç§è¡¨ç¤ºï¼åå§ vs è§èåè§£ç </h3>
<p>å¯¹äºå¤§å¤æ°ç»ä»¶ï¼<code>Uri\Rfc3986\Uri</code> æ´é²ï¼</p>
<ul>
<li>rawï¼è§£æå¨ç»åºçå½¢å¼ï¼ææ¥è¿åå§è¾å¥ï¼</li>
<li>è§èåè§£ç ï¼è§èå + ç¾åå·è§£ç ï¼æå¨æä¸ºè§èå½¢å¼ä¸å¯å¾è¿è½¬æ¢</li>
</ul>
<p>RFC è§£éäºä¸ºä»ä¹éè¦ä¸¤ç§å½¢å¼ä»¥åä½æ¶ä½¿ç¨ââç­¾åæ¹å API å®¢æ·ç«¯éå¸¸åå¥½ rawï¼èè·¯ç±/ç¼å­éå¸¸åå¥½è§èåè§£ç ã</p>
<p>å·ä½ææï¼</p>
<pre><code class="language-php">use Uri\Rfc3986\Uri;

$uri = new Uri("https://%61pple:p%61ss@ex%61mple.com:433/foob%61r?%61bc=%61bc#%61bc");

echo $uri-&gt;getRawHost(); // "ex%61mple.com"
echo $uri-&gt;getHost();    // "example.com"

echo $uri-&gt;getRawPath(); // "/foob%61r"
echo $uri-&gt;getPath();    // "/foobar"

echo $uri-&gt;getRawQuery(); // "%61bc=%61bc"
echo $uri-&gt;getQuery();    // "abc=abc"
</code></pre>
<p>è§èåç¤ºä¾ï¼</p>
<pre><code class="language-php">use Uri\Rfc3986\Uri;

$uri = new Uri("HTTPS://EXAMPLE.COM/foo/../bar/");

echo $uri-&gt;getRawScheme(); // "HTTPS"
echo $uri-&gt;getScheme();    // "https"

echo $uri-&gt;getRawHost(); // "EXAMPLE.COM"
echo $uri-&gt;getHost();    // "example.com"

echo $uri-&gt;getRawPath(); // "/foo/../bar/"
echo $uri-&gt;getPath();    // "/bar/"
</code></pre>
<h3 id="whatwg-å¨ä¿®æ¹æ¶èªå¨ç¼ç æäºå­ç¬¦">WHATWG å¨ä¿®æ¹æ¶èªå¨ç¼ç æäºå­ç¬¦</h3>
<p>å¦æä½ è®¾ç½®ç path åå«è¯¥ç»ä»¶å¿é¡»ç¾åå·ç¼ç çå­ç¬¦ï¼WHATWG ä¼èªå¨ç¼ç ï¼</p>
<pre><code class="language-php">use Uri\WhatWg\Url;

$url = new Url("https://example.com");
$url = $url-&gt;withPath("/?#:");

echo $url-&gt;getPath(); // "/%3F%23:"
</code></pre>
<p>è¿è½é²æ­¢æå¤æå»ºåºæåç URLã</p>
<h3 id="éå¤ç¼ç é·é±ä»¥åæ°-api-å¦ä½å¸®å¿">"éå¤ç¼ç "é·é±ï¼ä»¥åæ° API å¦ä½å¸®å¿ï¼</h3>
<p>éå¤ç¼ç éå¸¸è¿æ ·åçï¼</p>
<ol>
<li>ä½ ç¨ <code>rawurlencode()</code> ç¼ç ä¸ä¸ªå¼ï¼å ä¸º"å®è¦æ¾è¿ URL"</li>
<li>ä½ æå¨æå®å å° query string</li>
<li>åæ¥æå¤åç¼ç äºä¸æ¬¡ï¼æ¡æ¶ãä»£çãå®¢æ·ç«¯ï¼</li>
</ol>
<p>ä½¿ç¨ URI å¯¹è±¡ï¼ä¸ä¸ªå¥½åæ³æ¯ï¼</p>
<ul>
<li>æ°æ®ä¿æä¸ºæ®éå­ç¬¦ä¸²ï¼æªç¼ç ï¼</li>
<li>ç¨ <code>http_build_query()</code> æå»º queryï¼æä½ åå¥½çç¼ç å¨ï¼</li>
<li>æç»æä¼ ç» <code>withQuery()</code></li>
</ul>
<p>ç¤ºä¾ï¼</p>
<pre><code class="language-php">use Uri\Rfc3986\Uri;

$base = new Uri("https://example.com/search");

$params = [
    'q' =&gt; 'php 8.5 uri',
    'tag' =&gt; 'url/encoding',
];

// RFC 3986 é£æ ¼ç¼ç ï¼ç©ºæ ¼ç¨ %20 èé +ï¼
$query = str_replace('+', '%20', http_build_query($params));

$uri = $base-&gt;withQuery($query);
echo $uri-&gt;toString();
</code></pre>
<p><code>http_build_query()</code> ä¸ä¸å®éåææåºæ¯ï¼ä½å¥½å¤æ¯ç¼ç è§åéä¸­å¨ä¸å¤ï¼èéæ£è½å¨åç§å­ç¬¦ä¸²æ¼æ¥éã</p>
<p>å¦æç¡®å®éè¦å¯¹ path æ®µè¿è¡ RFC 3986 åå§ç¼ç ï¼PHP ç <code>rawurlencode()</code> éµå¾ª RFC 3986 è§åã</p>
<h2 id="éªè¯ç¨æ·è¾å¥ç-urlå®ç¨çæä½è§å">éªè¯ç¨æ·è¾å¥ç URLï¼å®ç¨çæä½è§å</h2>
<p>å¦æè¾å¥æ¥èªç¨æ·ï¼æä¸å¯ä¿¡æ¥æºï¼ï¼éªè¯åºè¯¥ææç¡®çç«åºã</p>
<p>å¯¹äºä½ æç® fetch æè·³è½¬ç URLï¼ä¸ä¸ªå¡å®çå®å¨å¯¼åæ¨¡å¼ï¼</p>
<ul>
<li>å¿é¡»è§£ææåï¼ç¡¬éè¯¯ç´æ¥æç»ï¼</li>
<li>åªåè®¸ http / https</li>
<li>URL ä¸­ä¸è½æç¨æ·å/å¯ç </li>
<li>ååç½ååï¼ç¨ ASCII å½¢å¼æ¯è¾ï¼</li>
<li>å¯éï¼éå¶ç«¯å£</li>
<li>å¯éï¼è¦æ±ç»å¯¹ URLï¼æç¸å¯¹ URL åºäºå·²ç¥ base è§£æï¼</li>
</ul>
<h3 id="ä¸¥æ ¼éªè¯-helperwhatwg-çæ¬">ä¸¥æ ¼éªè¯ helperï¼WHATWG çæ¬ï¼</h3>
<p>WHATWG éåå¤ç"æµè§å¨é£æ ¼"URL å IDNAã</p>
<pre><code class="language-php">use Uri\WhatWg\Url;
use Uri\WhatWg\InvalidUrlException;

function validateExternalUrl(string $input, array $allowedHosts): Url
{
    try {
        $softErrors = [];
        $url = new Url($input, null, $softErrors);
    } catch (InvalidUrlException $e) {
        throw new InvalidArgumentException("Invalid URL.");
    }

    // Scheme ç½åå
    $scheme = $url-&gt;getScheme();
    if (!in_array($scheme, ['http', 'https'], true)) {
        throw new InvalidArgumentException("Unsupported scheme.");
    }

    // ç¦æ­¢å­è¯
    if ($url-&gt;getUsername() !== null || $url-&gt;getPassword() !== null) {
        throw new InvalidArgumentException("Credentials in URL are not allowed.");
    }

    // Host ç½ååï¼ASCII æ¯è¾ï¼
    $host = $url-&gt;getAsciiHost();
    if ($host === null || !in_array(strtolower($host), $allowedHosts, true)) {
        throw new InvalidArgumentException("Host not allowed.");
    }

    // å¯éï¼ç«¯å£éå¶
    $port = $url-&gt;getPort();
    if ($port !== null &amp;&amp; !in_array($port, [80, 443], true)) {
        throw new InvalidArgumentException("Port not allowed.");
    }

    return $url;
}
</code></pre>
<p>å ç¹è¯´æï¼</p>
<ul>
<li><code>Url</code> å³ä½¿è§£ææåä¹å¯è½è¿åè½¯éè¯¯ãRFC è§£éäº"è½¯ vs ç¡¬"æ¨¡åï¼å¹¶ç»åºäºè§£æç»§ç»­ä½æ¥åéªè¯éè¯¯çä¾å­ã</li>
<li>WHATWG åæ¶æ´é² <code>getAsciiHost()</code> å <code>getUnicodeHost()</code>ï¼æ¯è¾éå¸¸ç¨ ASCIIï¼å±ç¤ºç¨ Unicodeã</li>
</ul>
<h3 id="rfc-3986-éªè¯ä¸¥æ ¼-uri-è§£æ--è§èåéé¡¹">RFC 3986 éªè¯ï¼ä¸¥æ ¼ URI è§£æ + è§èåéé¡¹</h3>
<p>å¦æä½ å¨éªè¯éç¨ URIï¼ä¸åªæ¯ HTTP URLï¼ï¼æèä½ å³å¿ raw vs è§èåè§£ç çè¡¨ç¤ºï¼<code>Uri\Rfc3986\Uri</code> æ¯ä¸ªå¥½éæ©ã</p>
<pre><code class="language-php">use Uri\Rfc3986\Uri;
use Uri\InvalidUriException;

function validateHttpUri(string $input, array $allowedHosts): Uri
{
    try {
        $uri = new Uri($input);
    } catch (InvalidUriException $e) {
        throw new InvalidArgumentException("Invalid URI.");
    }

    $scheme = $uri-&gt;getScheme();
    if (!in_array($scheme, ['http', 'https'], true)) {
        throw new InvalidArgumentException("Unsupported scheme.");
    }

    // Userinfo å¨å¤§å¤æ° Web åºç¨ä¸­æ¯ä¸ªå
    if ($uri-&gt;getUserInfo() !== null) {
        throw new InvalidArgumentException("Userinfo is not allowed.");
    }

    $host = $uri-&gt;getHost();
    if ($host === null || !in_array(strtolower($host), $allowedHosts, true)) {
        throw new InvalidArgumentException("Host not allowed.");
    }

    return $uri;
}
</code></pre>
<h2 id="å®éç¨ä¾ç­¾åé¾æ¥å®å¨éå®åè§è-url">å®éç¨ä¾ï¼ç­¾åé¾æ¥ãå®å¨éå®åãè§è URL</h2>
<h3 id="ç¨ä¾ç­¾åé¾æ¥èä¸ç ´åç¼ç ">ç¨ä¾ï¼ç­¾åé¾æ¥èä¸ç ´åç¼ç </h3>
<p>ç­¾å URLï¼HMAC tokenãä¸´æ¶è®¿é®é¾æ¥ãCDN è®¤è¯ï¼å¯¹è¡¨ç¤ºå½¢å¼æå¶ææãä¸ä¸ªå°ç"è§èååæ´"å°±è½ä½¿ç­¾åå¤±æã</p>
<p>è¿ä¹æ¯ RFC æç¡®æåº"API å®¢æ·ç«¯æç­¾åæ¹"éå¸¸åå¥½åå§è¡¨ç¤ºçåå ã</p>
<p>ä¸ä¸ªç®åçç­¾å URL æ¹æ³ï¼</p>
<ol>
<li>æå»º URL</li>
<li>å¯¹ç¨³å®çå­ç¬¦ä¸²è¡¨ç¤ºè®¡ç®ç­¾å</li>
<li>æç­¾åä½ä¸º query åæ°å è¿å»</li>
</ol>
<p>ç¤ºä¾ï¼ä½¿ç¨ RFC 3986 å <code>toRawString()</code> ç­¾åï¼</p>
<pre><code class="language-php">use Uri\Rfc3986\Uri;

function signUri(Uri $uri, string $secret): Uri
{
    // å½ä½ æ³é¿åæå¤è½¬æ¢æ¶ï¼ç¨ raw string
    $baseString = $uri-&gt;toRawString();
    $sig = hash_hmac('sha256', $baseString, $secret);

    $query = $uri-&gt;getRawQuery();
    $query = $query ? $query . '&amp;' : '';
    $query .= 'sig=' . rawurlencode($sig);

    return $uri-&gt;withQuery($query);
}

$uri = new Uri("https://download.example.com/file/%2Fsafe?expires=1736035200");
$signed = signUri($uri, "super-secret-key");

echo $signed-&gt;toRawString();
</code></pre>
<p>ä¸¤ä¸ªè¦ç¹ï¼</p>
<ul>
<li>ä½ æ¯ææéæ© raw çï¼å ä¸ºç­¾åå³å¿çæ¯"çº¿ä¸å®éåéçæ¯ä»ä¹"ã</li>
<li>query æå»ºä»ç¶è¦å°å¿ï¼é¿åç¼ç éè¯¯ã</li>
</ul>
<p>å¦æä½ çç­¾åç®æ³éè¦è§èå½¢å¼ï¼æäºç¡®å®éè¦ï¼ï¼å¯ä»¥ææå¯¹ <code>toString()</code> ç­¾åââä½è¦ç¥éèªå·±å¨åä»ä¹ï¼èä¸æ¯æå¤è¿ä¹åã</p>
<h3 id="ç¨ä¾å®å¨éå®åé¿åå¼æ¾éå®å--è§£ææ··æ·">ç¨ä¾ï¼å®å¨éå®åï¼é¿åå¼æ¾éå®å + è§£ææ··æ·ï¼</h3>
<p>å®å¨éå®åé®é¢éå¸¸é¿è¿æ ·ï¼</p>
<ol>
<li>ä½ æ <code>/login?next=&lt;something&gt;</code></li>
<li>ç»å½åè·³è½¬å° next</li>
<li>æ»å»èå°è¯ <code>next=https://evil.com</code> æåç§åä½</li>
</ol>
<p>ä¸ä¸ªå¥å£®çæ¨¡å¼æ¯ï¼</p>
<ol>
<li>æç¨æ·è¾å¥è§£æä¸ºç¸å¯¹ URL æç»å¯¹ URL</li>
<li>ç¸å¯¹ URL åºäºä½ èªå·±çå·²ç¥ base è§£æ</li>
<li>éªè¯ host/scheme æ¯ä½ çï¼æå¨åè®¸åè¡¨ä¸­ï¼</li>
</ol>
<p>ä½¿ç¨ WHATWGï¼</p>
<pre><code class="language-php">use Uri\WhatWg\Url;

function safeRedirectTarget(string $next, string $appBase): string
{
    $base = new Url($appBase);

    // å®å¨è§£æç¸å¯¹å¼ç¨
    $errors = [];
    $resolved = Url::parse($next, $base, $errors);

    if ($resolved === null) {
        return $base-&gt;toAsciiString(); // fallback
    }

    // åªåè®¸å host
    if (strtolower($resolved-&gt;getAsciiHost() ?? '') !== strtolower($base-&gt;getAsciiHost() ?? '')) {
        return $base-&gt;toAsciiString();
    }

    // åªåè®¸ http/https
    if (!in_array($resolved-&gt;getScheme(), ['http', 'https'], true)) {
        return $base-&gt;toAsciiString();
    }

    return $resolved-&gt;toAsciiString();
}

echo safeRedirectTarget("/dashboard", "https://app.example.com");
</code></pre>
<p>è¿éç¨å°äº base URL è§£æåå¼ç¨è§£æåè½ã</p>
<h3 id="ç¨ä¾è§è-urlseo-åç¼å­çä¸è´è¡¨ç¤º">ç¨ä¾ï¼è§è URLï¼SEO åç¼å­çä¸è´è¡¨ç¤ºï¼</h3>
<p>è§èåéå¸¸æå³çï¼</p>
<ul>
<li>scheme/host å°å</li>
<li>ç§»é¤ path ä¸­çç¹å·æ®µ</li>
<li>ç§»é¤é»è®¤ç«¯å£</li>
<li>query ä¿æä¸è´ï¼ææ¶æåºï¼</li>
<li>å³å®å¦ä½å¤çæ«å°¾ææ </li>
</ul>
<p>ä½¿ç¨ <code>Uri\Rfc3986\Uri</code>ï¼ä½ å·²ç»å¯ä»¥éè¿ <code>get*()</code> vs <code>getRaw*()</code>ï¼ä»¥å <code>toString()</code> vs <code>toRawString()</code>ï¼æ¸æ°å°è·å¾è§èåè¡ä¸ºã</p>
<p>ä¸ä¸ªç®åçè§èåç¤ºä¾ï¼</p>
<pre><code class="language-php">use Uri\Rfc3986\Uri;

function canonicalizeForCache(Uri $uri): Uri
{
    // ä»è§èåè§£ç çé¨åå¼å§
    $uri = $uri
        -&gt;withScheme($uri-&gt;getScheme())
        -&gt;withHost($uri-&gt;getHost())
        -&gt;withPath($uri-&gt;getPath());

    // ä¸ºç¼å­ key æåº query åæ°ï¼è¿æ¯ä¸ç§ç­ç¥éæ©ï¼
    $query = $uri-&gt;getQuery();
    if ($query) {
        parse_str($query, $params);
        ksort($params);
        $sorted = http_build_query($params, '', '&amp;', PHP_QUERY_RFC3986);
        $uri = $uri-&gt;withQuery($sorted);
    }

    return $uri;
}

$u = new Uri("HTTPS://EXAMPLE.COM/foo/../bar/?b=2&amp;a=1");
echo canonicalizeForCache($u)-&gt;toString();
</code></pre>
<p>è¿ä¸ªå½æ°ä¸è¯å¾è¦çææè§èåç­ç¥ï¼é£æ¯åºç¨å±é¢çäºï¼ï¼ä½ç»æå API çå¥½å¤æ¯ï¼è§åå¯ä»¥æ¾å¼æå»ºãå¯ä»¥æµè¯ã</p>
<h2 id="ä»-parse_url--å­ç¬¦ä¸²æ¼æ¥è¿ç§»ä¸çè¦">ä» parse_url() + å­ç¬¦ä¸²æ¼æ¥è¿ç§»ï¼ä¸çè¦ï¼</h2>
<p>ä½ ä¸éè¦ä¸æ¬¡æ§éåææä»£ç ãæç®åçè¿ç§»è·¯å¾æ¯ï¼</p>
<p><strong>1. æ¾åº URL å¤çå¯¹å®å¨æææå®¹æåº bug çå°æ¹ï¼</strong></p>
<ul>
<li>éå®å</li>
<li>webhook éªè¯</li>
<li>ç­¾å URL</li>
<li>ååç½åå</li>
<li>è·¯ç±/ç¼å­ key</li>
</ul>
<p><strong>2. åæ¿æ¢è¿äºã</strong></p>
<p><strong>3. çº¯å±ç¤ºç¨éçç®åè§£æï¼ç­å°æå¿è¦æ¶åå¤çã</strong></p>
<h3 id="è¿ç§»åæ°ç»è§£æ--æå¨éå»º">è¿ç§»åï¼æ°ç»è§£æ + æå¨éå»º</h3>
<pre><code class="language-php">$parts = parse_url($input);
$host  = $parts['host'] ?? null;

if ($host !== 'example.com') {
    throw new Exception("Bad host");
}

$newUrl = $parts['scheme'] . '://' . $parts['host'] . '/new-path';
</code></pre>
<p>é®é¢ï¼</p>
<ul>
<li>æ²¡å¤ç portãuserinfoãfragmentãç¸å¯¹ URL</li>
<li>æ²¡æè§èå</li>
<li>æ²¡æè§èåéæ©</li>
<li>å®¹ææå»ºåºæ æè¾åº</li>
</ul>
<h3 id="è¿ç§»åä½¿ç¨-urluriæ¹å¨å±é¨å">è¿ç§»åï¼ä½¿ç¨ Url/Uriï¼æ¹å¨å±é¨å</h3>
<pre><code class="language-php">use Uri\WhatWg\Url;

$url = new Url($input);

if (strtolower($url-&gt;getAsciiHost() ?? '') !== 'example.com') {
    throw new InvalidArgumentException("Bad host");
}

$new = $url-&gt;withPath('/new-path');
echo $new-&gt;toAsciiString();
</code></pre>
<p>ä»£ç æ´ç­ï¼æå¾æ´æç¡®ï¼ç»èä¸æ´é¾åºéã</p>
<h3 id="rfc-3986-å-whatwg-æä¹éç»éªæ³å">RFC 3986 å WHATWG æä¹éï¼ç»éªæ³åï¼</h3>
<p><strong>ä½¿ç¨ <code>Uri\WhatWg\Url</code> å½ï¼</strong></p>
<ul>
<li>ä½ å¨å¤çæ¥èªæµè§å¨/ç¨æ·ç HTTP(S) URL</li>
<li>ä½ éè¦ IDNA/Unicode ååå¤çï¼<code>getUnicodeHost()</code> ç¨äºå±ç¤ºï¼<code>getAsciiHost()</code> ç¨äºæ¯è¾ï¼</li>
<li>ä½ æ³è¦ WHATWG è§£æè¡ä¸ºåéè¯¯æ¥åï¼è½¯éè¯¯ï¼</li>
</ul>
<p><strong>ä½¿ç¨ <code>Uri\Rfc3986\Uri</code> å½ï¼</strong></p>
<ul>
<li>ä½ å¨å¤ç"Web URL"ä¹å¤çéç¨ URI</li>
<li>ä½ éè¦ raw vs è§èåè§£ç çè¡¨ç¤º</li>
<li>ä½ å¨åç­¾åæåè®®å±é¢çå·¥ä½ï¼è¡¨ç¤ºå½¢å¼å¾éè¦</li>
</ul>
<p>RFC æç¡®åºåäºè¿ä¸¤ç§æ¹æ³ï¼åæ¬ Unicode/IDNA æ¯æçå·®å¼ã</p>
<h2 id="éå åå®¹æ­£ç¡®æ¯è¾-urlequals-ä»¥åä¸ºä»ä¹æ²¡æ-__tostring">éå åå®¹ï¼æ­£ç¡®æ¯è¾ URLï¼equals() ä»¥åä¸ºä»ä¹æ²¡æ __toString()ï¼</h2>
<p>ä¸ä¸ªå¼å¾çæçè®¾è®¡ï¼åç½® URI ç±»ææä¸å®ç° <code>__toString()</code>ï¼å ä¸ºæ¾æ£æ¯è¾ï¼<code>==</code>ï¼å®¹æåºéã</p>
<p>åèä»£ä¹ï¼ä½ ç¨ <code>equals()</code> æ¯è¾ï¼</p>
<pre><code class="language-php">use Uri\Rfc3986\Uri;
use Uri\UriComparisonMode;

$u1 = new Uri("https://example.COM#foo");
$u2 = new Uri("https://EXAMPLE.COM");

var_dump($u1-&gt;equals($u2)); // true
var_dump($u1-&gt;equals($u2, UriComparisonMode::IncludeFragment)); // false
</code></pre>
<p>WHATWG ç±»ä¼¼ï¼</p>
<pre><code class="language-php">use Uri\WhatWg\Url;
use Uri\UriComparisonMode;

$a = new Url("https:////example.COM/");
$b = new Url("https://EXAMPLE.COM");

var_dump($a-&gt;equals($b)); // true
</code></pre>
<h2 id="ç»è®º">ç»è®º</h2>
<p>PHP 8.5 ç URI æ©å±çèµ·æ¥æ¯ä¸ªå°åè½ï¼ç¨ä¸æ®µæ¶é´åæä¼åç°å®æ¡æäºå¤å°ç»å¾®ç URL bugã</p>
<p>æ ¸å¿ä»·å¼å¨äº<strong>æ§å¶</strong>ï¼</p>
<ul>
<li>ä½ å¯ä»¥éæ© RFC 3986 vs WHATWG è¯­ä¹ã</li>
<li>ä½ å¯ä»¥å³å®è¦ raw è¿æ¯è§èåè§£ç çè¡¨ç¤ºã</li>
<li>ä½ å¯ä»¥ä¸å¯åä¸å®å¨å°ä¿®æ¹ç»ä»¶ã</li>
<li>ä½ å¯ä»¥ç¨æ´é¾æå¤åå¼±çæ¹å¼éªè¯åæ¯è¾ URLã</li>
</ul>
<p>å¦æä½ æ¾ç»åå¸è¿ä¸ä¸ª"å¿«é URL ä¿®å¤"ï¼åæ¥å¨å®å¨æ¥åæçäº§äºæä¸­çå°å®ï¼è¿ä¸ªæ©å±å¼å¾å°½æ©éç¨ââä»éå®ååç­¾å URL å¼å§ã</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-16 07:49">2026-01-16 07:48</span>&nbsp;
<a href="https://www.cnblogs.com/catchadmin">JaguarJack</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19490082);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19490082', targetLink: 'https://www.cnblogs.com/catchadmin/p/19490082', title: 'å«åæå URL è§£æå¨äºï¼PHP 8.5 URI æ©å±è®© URL å¤çæ´å®å¨ãæ´å¹²å' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ MySQLæ§è½ä¼åï¼ä»åºå±åçå°å®æè½å°çå¨ç»´åº¦æ¹æ¡ ]]></title>
    <link>https://www.cnblogs.com/liuziyi1/p/19489439</link>
    <guid>6ceda45f298be5e4e58d39ad836dd8a8</guid>
    <description>
    <![CDATA[ 
		<h2>
			<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/liuziyi1/p/19489439" title="åå¸äº 2026-01-15 22:26">
    <span role="heading" aria-level="2">MySQLæ§è½ä¼åï¼ä»åºå±åçå°å®æè½å°çå¨ç»´åº¦æ¹æ¡</span>
    

</a>

		</h2>
		<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>å¨æ°æ®é©±å¨çä¸å¡åºæ¯ä¸­ï¼MySQLä½ä¸ºä¸»æµå¼æºå³ç³»åæ°æ®åºï¼å¶æ§è½ç´æ¥å³å®ç³»ç»ååºéåº¦ãååéä¸è¿ç»´ææ¬ãå°¤å¶å¯¹äºé«å¹¶åãå¤§æ°æ®éçå¹³å°ï¼å¦DeepSeekè¿ç±»AIæå¡åºæ¯ï¼ï¼æ¢æ¥è¯¢ä¸ä¸åçç´¢å¼è®¾è®¡å¯è½å¼åç³»ç»å¡é¡¿çè³éªå´©ãMySQLæ§è½ä¼åå¹¶éé¶æ£çâè°åæ¹SQLâï¼èæ¯åºäºåºå±åççç³»ç»æ§å·¥ç¨ââæ¢è¦ææ¡å¯è½å°çå®ææå·§ï¼æ´è¦çè§£ä¼åèåçæ ¸å¿é»è¾ï¼æè½å®ç°ä»âæ²»æ âå°âæ²»æ¬âççªç ´ãæ¬æå°èååºå±çè®ºä¸å®æç»éªï¼æå»ºâåçè®¤ç¥-é®é¢å®ä½-ä¼åå®æ½-å·¥ç¨ä¿éâçå®æ´ä½ç³»ï¼å©åå¼åèå®ç°MySQLæ§è½çç²¾åæåã</p>
<h1 id="-ä¸åºå±é»è¾mysqlæ§è½çæ ¸å¿æ¯æä¸å¤±è¡¡æ¬è´¨"># ä¸ãåºå±é»è¾ï¼MySQLæ§è½çæ ¸å¿æ¯æä¸å¤±è¡¡æ¬è´¨</h1>
<p>MySQLæ§è½çåºå±æ ¸å¿æ¯âèµæºæ¶èä¸ç»æè®¾è®¡çå¹³è¡¡âï¼æææ¢æ¥è¯¢ä¸æ§è½ç¶é¢ï¼æ¬è´¨é½æ¯å­å¨ç»æãèµæºåéææ§è¡é»è¾åºç°äºå¤±è¡¡ã</p>
<h2 id="-11-å­å¨å¼ææ ¸å¿bæ ä¸ç£çioçåºå±å³è">## 1.1 å­å¨å¼ææ ¸å¿ï¼B+æ ä¸ç£çIOçåºå±å³è</h2>
<p>InnoDBä½ä¸ºMySQLé»è®¤å­å¨å¼æï¼å¶æ ¸å¿å­å¨ç»æä¸ºB+æ ï¼æ§è½ä¼å£ç´æ¥ç±âç£çIOæ¬¡æ°âå³å®ãB+æ çè®¾è®¡ç¹æ§å³å®äºæ¥è¯¢æççä¸éï¼</p>
<ul>
<li>
<p>- ç»æç¹æ§ï¼B+æ ä¸ºå¹³è¡¡æ ï¼å¶å­èç¹å­å¨å¨éæ°æ®ï¼éå¶å­èç¹ä»å­å¨ç´¢å¼é®ä¸æéï¼åé¡µå¤§å°é»è®¤16KBï¼é«åº¦éå¸¸ä¸º1-3å±ï¼é«åº¦3çB+æ å¯å­å¨çº¦2000ä¸è¡æ°æ®ã</p>
</li>
<li>
<p>- IOææ¬ï¼æ¯æ¬¡æ¥è¯¢çIOæ¬¡æ°=B+æ é«åº¦+åè¡¨æ¬¡æ°ï¼éè¦çç´¢å¼åºæ¯ï¼ãå¨è¡¨æ«æééåææå¶å­èç¹ï¼IOæ¬¡æ°é£åè³ç¾ä¸çº§ï¼æ¯æ¢æ¥è¯¢çæ ¸å¿è¯±å ã</p>
</li>
<li>
<p>- ç¼å­ä»·å¼ï¼InnoDBç¼å²æ± ï¼innodb_buffer_poolï¼å¯ç¼å­æ°æ®é¡µä¸ç´¢å¼é¡µï¼å½ä¸­ççæ³å¼éè¶è¿99%ï¼ç¼å­å½ä¸­å¯ç´æ¥é¿åç£çIOï¼å¤§å¹æåæ¥è¯¢éåº¦ã</p>
</li>
</ul>
<h2 id="-12-æ§è½æ ¸å¿ç»´åº¦åå¤§èµæºçæ¶èå¹³è¡¡">## 1.2 æ§è½æ ¸å¿ç»´åº¦ï¼åå¤§èµæºçæ¶èå¹³è¡¡</h2>
<p>MySQLæ§è½ç¶é¢æç»å¯å½ç»ä¸ºCPUãç£çIOãåå­ãéåå¤§èµæºçæ¶èå¤±è¡¡ï¼å¶ä¸­ç£çIOå æ¯æé«ï¼æ¯ä¼åçæ ¸å¿é¶ç¹ï¼</p>
<ul>
<li>
<p>- CPUï¼ç¨äºSQLè§£æãæåºãåç»ãå½æ°è®¡ç®ç­æä½ï¼ä½ææåºä¸å¤æè®¡ç®æå¯¼è´CPUè¿è½½ã</p>
</li>
<li>
<p>- ç£çIOï¼æ°æ®é¡µ/ç´¢å¼é¡µçè¯»åä¸åå¥ï¼å¨è¡¨æ«æãç´¢å¼å¤±ææ¯IOæ¶èæ¿å¢çä¸»è¦åå ã</p>
</li>
<li>
<p>- åå­ï¼ç¼å²æ± ç¼å­æ°æ®é¡µï¼åå­ä¸è¶³ä¼å¯¼è´ç¼å­å½ä¸­çä¸éï¼è¢«è¿«é¢ç¹è¯»åç£çã</p>
</li>
<li>
<p>- éï¼è¡é/è¡¨éå¼åçæ¥è¯¢ç­å¾ï¼å¦æ´æ°æä½é»å¡æ¥è¯¢ãé«å¹¶åä¸çéç«äºï¼ä¼é´æ¥æé¿æ¥è¯¢èæ¶ã</p>
</li>
</ul>
<h2 id="-13-æ¢æ¥è¯¢çæ¬è´¨æ§è¡é»è¾ä¸èµæºæ¶èçåéå¤±è¡¡">## 1.3 æ¢æ¥è¯¢çæ¬è´¨ï¼æ§è¡é»è¾ä¸èµæºæ¶èçåéå¤±è¡¡</h2>
<p>æ¢æ¥è¯¢å¹¶éâæ§è¡æ¶é´é¿âçè¡¨é¢ç°è±¡ï¼èæ¯åºå±æ§è¡é»è¾ä¸èµæºæ¶èçåéé®é¢ï¼ä¸æ¯æ§è¡è®¡åä¸åçï¼å¦å¨è¡¨æ«æãç´¢å¼å¤±æï¼ï¼å¯¼è´IOæ¬¡æ°è¿å¤ï¼äºæ¯èµæºç«äºï¼å¦éç­å¾ãç¼å­å¤±æï¼ï¼å¯¼è´æææ§è¡æ¶é´è¢«æé¿ãä¼åæ¢æ¥è¯¢ï¼æ¬è´¨å°±æ¯ä¼åæ§è¡è®¡åãåå°èµæºæ¶èãåè§£èµæºç«äºã</p>
<h1 id="-äºé®é¢å®ä½ä»æ¢æ¥è¯¢ææå°æ§è¡è®¡åè§£æ"># äºãé®é¢å®ä½ï¼ä»æ¢æ¥è¯¢ææå°æ§è¡è®¡åè§£æ</h1>
<p>ç²¾åå®ä½é®é¢æ¯ä¼åçåæï¼æ ¸å¿ä¾èµâæ¢æ¥è¯¢æ¥å¿ææ+æ§è¡è®¡ååæâï¼å®ç°ä»âåç°é®é¢âå°âå®ä½æ ¹æºâçé­ç¯ã</p>
<h2 id="-21-æ¢æ¥è¯¢æ¥å¿æ§è½ç¶é¢çç¬¬ä¸éææ">## 2.1 æ¢æ¥è¯¢æ¥å¿ï¼æ§è½ç¶é¢çç¬¬ä¸éææ</h2>
<p>æ¢æ¥è¯¢æ¥å¿æ¯è®°å½ä½æSQLçæ ¸å¿å·¥å·ï¼éåçéç½®éå¼ä¸å­å¨è·¯å¾ï¼ç¡®ä¿ç²¾åææå³é®é®é¢SQLã</p>
<h3 id="-211-æ¥å¿éç½®ä¸´æ¶çææ°¸ä¹åºå">### 2.1.1 æ¥å¿éç½®ï¼ä¸´æ¶çæ+æ°¸ä¹åºåï¼</h3>
<p>ä¸´æ¶éç½®ï¼éå¯MySQLåå¤±æï¼éç¨äºå¿«éææ¥ï¼ï¼</p>
<pre><code class="language-sql">-- è®¾ç½®æ¢æ¥è¯¢éå¼ï¼åä½ï¼ç§ï¼çäº§ç¯å¢å»ºè®®0.5-1ç§ï¼å¹³è¡¡çµæåº¦ä¸æ¥å¿éï¼
SET GLOBAL long_query_time = 0.5; 
-- å¼å¯æ¢æ¥è¯¢æ¥å¿
SET GLOBAL slow_query_log = 'ON';
-- æå®æ¥å¿æä»¶è·¯å¾ï¼éç¡®ä¿MySQLæåå¥æéï¼
SET GLOBAL slow_query_log_file = '/var/log/mysql/slow.log';
-- è®°å½æªä½¿ç¨ç´¢å¼çæ¥è¯¢ï¼è¾å©å®ä½ç´¢å¼å¤±æåºæ¯ï¼
SET GLOBAL log_queries_not_using_indexes = 'ON';
</code></pre>
<p>æ°¸ä¹éç½®ï¼ä¿®æ¹my.cnfæä»¶ï¼éå¯åçæï¼éç¨äºçäº§ç¯å¢å¸¸æåçæ§ï¼ï¼</p>
<pre><code class="language-ini">[mysqld]
slow_query_log = 1
slow_query_log_file = /var/log/mysql/slow.log
long_query_time = 0.5
log_queries_not_using_indexes = 1
</code></pre>
<h3 id="-212-æ¥å¿åæå·¥å·æåæ ¸å¿é®é¢sql">### 2.1.2 æ¥å¿åæå·¥å·ï¼æåæ ¸å¿é®é¢SQL</h3>
<p>æ¢æ¥è¯¢æ¥å¿ééè¿å·¥å·è§£æï¼æè½å¿«éå®ä½é«é¢ãé«èçæ ¸å¿SQLï¼å¸¸ç¨å·¥å·åä¸ºä¸¤ç±»ï¼</p>
<ul>
<li>
<p>- pt-query-digestï¼Percona Toolkitï¼ï¼åæç»´åº¦æå¨é¢ï¼æ¯æè¾åºæ§è¡æ¬¡æ°ãå¹³åèæ¶ãæ«æè¡æ°ãéç­å¾æ¶é´ç­ææ ï¼éåå¤æåºæ¯ï¼ <code>pt-query-digest /var/log/mysql/slow.log &gt; slow_report.txt</code></p>
</li>
<li>
<p>- mysqldumpslowï¼MySQLèªå¸¦å·¥å·ï¼ï¼è½»éä¾¿æ·ï¼éåå¿«éæåTopNæ¢æ¥è¯¢ï¼ <code>-- æåèæ¶æå¤ç10æ¡SELECTè¯­å¥</code> <code>mysqldumpslow -s t -t 10 -g 'select' /var/log/mysql/slow.log</code></p>
</li>
</ul>
<p>åææ¥åééç¹å³æ³¨âæ§è¡æ¬¡æ°å¤+å¹³åèæ¶é¿ââæ«æè¡æ°å¤ââéç­å¾æ¶é´é¿âä¸ç±»SQLï¼è¿ç±»SQLå¯¹æ´ä½æ§è½å½±åæå¤§ï¼ä¼åçº³å¥ä¼åæ¸åã</p>
<h2 id="-22-explainæ§è¡è®¡åè¯»æmysqlçæ§è¡é»è¾">## 2.2 EXPLAINæ§è¡è®¡åï¼è¯»æMySQLçæ§è¡é»è¾</h2>
<p>ææå°æ¢æ¥è¯¢åï¼ééè¿EXPLAINå³é®å­åææ§è¡è®¡åï¼å¤æ­ç´¢å¼æ¯å¦çæãæ¥è¯¢æ¯å¦å­å¨ä½ææä½ï¼æ ¸å¿æ¯è¯»æMySQLçâæ§è¡æè·¯âã</p>
<h3 id="-221-æ ¸å¿å­æ®µè§£è¯»">### 2.2.1 æ ¸å¿å­æ®µè§£è¯»</h3>
<p>æ§è¡<code>EXPLAIN SELECT * FROM orders WHERE user_id = 100 AND status = 'PAID';</code>åï¼éç¹å³æ³¨ä»¥ä¸å­æ®µï¼</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>å­æ®µ</td>
<td>æ ¸å¿æä¹</td>
<td>ä¼åå¤æ­æ å</td>
</tr>
<tr>
<td>type</td>
<td>è®¿é®ç±»åï¼åæ æ¥è¯¢æç</td>
<td>ä»ä¼å°å£ï¼system &gt; const &gt; eq_ref &gt; ref &gt; range &gt; index &gt; ALLï¼éé¿åALLï¼å¨è¡¨æ«æï¼</td>
</tr>
<tr>
<td>key</td>
<td>å®éä½¿ç¨çç´¢å¼</td>
<td>NULLè¡¨ç¤ºæªä½¿ç¨ç´¢å¼ï¼éææ¥ç´¢å¼å¤±æåå </td>
</tr>
<tr>
<td>rows</td>
<td>é¢ä¼°æ«æè¡æ°</td>
<td>æ°å¼è¶å¤§ï¼IOæ¶èè¶é«ï¼ééè¿ç´¢å¼ç¼©å°èå´</td>
</tr>
<tr>
<td>Extra</td>
<td>éå æ§è¡ä¿¡æ¯</td>
<td>Using filesort/Using temporaryéä¼åï¼Using indexä¸ºçæ³ç¶æï¼è¦çç´¢å¼ï¼</td>
</tr>
</tbody>
</table>
<h3 id="-222-å³é®å¤æ­é»è¾">### 2.2.2 å³é®å¤æ­é»è¾</h3>
<p>éè¿æ§è¡è®¡åå¯å¿«éå®ä½æ ¸å¿é®é¢ï¼è¥typeä¸ºALLï¼å¨è¡¨æ«æï¼ï¼ä¼åææ¥ç´¢å¼æ¯å¦ç¼ºå¤±æå¤±æï¼è¥Extraåºç°Using filesortï¼è¯´ææåºæªä½¿ç¨ç´¢å¼ï¼éä¼åæåºå­æ®µï¼è¥rowsè¿å¤§äºå®éè¿åè¡æ°ï¼è¯´æç´¢å¼éæ©æ§å·®ï¼éè°æ´ç´¢å¼è®¾è®¡ã</p>
<h1 id="-ä¸æ ¸å¿ä¼åç´¢å¼è®¾è®¡ä¸å¤±æè§é¿çå®ææå"># ä¸ãæ ¸å¿ä¼åï¼ç´¢å¼è®¾è®¡ä¸å¤±æè§é¿çå®ææå</h1>
<p>ç´¢å¼æ¯MySQLæ§è½ä¼åçæ ¸å¿ææ®µï¼å¶æ¬è´¨æ¯âåºäºB+æ çæåºæ°æ®ç»æâï¼ç®çæ¯åå°ç£çIOæ¬¡æ°ãä¼åç´¢å¼éåæ¶å¼é¡¾âè®¾è®¡åçæ§âä¸âé¿åå¤±æâï¼éµå¾ªåºå±é»è¾ä¸å®æååã</p>
<h2 id="-31-ç´¢å¼è®¾è®¡çä¸å¤§æ ¸å¿åå">## 3.1 ç´¢å¼è®¾è®¡çä¸å¤§æ ¸å¿åå</h2>
<p>ç´¢å¼è®¾è®¡å¹¶éâè¶å¤è¶å¥½âï¼èæ¯è¦å¨âæ¥è¯¢æçâä¸âç»´æ¤ææ¬âä¹é´æ¾å°å¹³è¡¡ï¼æ ¸å¿éµå¾ªä¸å¤§ååï¼</p>
<h3 id="-311-éæ©æ§ä¼ååå">### 3.1.1 éæ©æ§ä¼ååå</h3>
<p>ç´¢å¼éæ©æ§=å¯ä¸å¼æ°é/æ»è¡æ°ï¼éæ©æ§è¶é«ï¼ç´¢å¼å®ä½ç²¾åº¦è¶å¼ºï¼IOæ¬¡æ°è¶å°ãè®¾è®¡æ¶éå°é«éæ©æ§å­æ®µï¼å¦ç¨æ·IDãè®¢åå·ï¼æ¾å¨èåç´¢å¼ååï¼ä½éæ©æ§å­æ®µï¼å¦æ§å«ãç¶æï¼éæ©æ§&lt;0.1ï¼å°½éä¸åç¬å»ºç´¢å¼ï¼é¿åä¼åå¨æ¾å¼ä½¿ç¨ã</p>
<h3 id="-312-ä¸æç´¢å¼ååå®ææ ¸å¿">### 3.1.2 ä¸æç´¢å¼ååï¼å®ææ ¸å¿ï¼</h3>
<p>ä¸æç´¢å¼æ¯çæ³çç´¢å¼è®¾è®¡æ åï¼å¯æå¤§ååå°IOä¸è®¡ç®æ¶èï¼</p>
<ul>
<li>
<p>- ä¸æï¼WHEREæ¡ä»¶åçº³å¥ç´¢å¼ï¼ç¼©å°æ«æèå´ï¼</p>
</li>
<li>
<p>- äºæï¼ORDER BY/GROUP BYåçº³å¥ç´¢å¼ï¼å©ç¨ç´¢å¼æåºæ§é¿åæåºï¼Using filesortï¼ï¼</p>
</li>
<li>
<p>- ä¸æï¼SELECTæ¥è¯¢åè¢«ç´¢å¼è¦çï¼é¿ååè¡¨æä½ï¼Extraæ¾ç¤ºUsing indexï¼ã</p>
</li>
</ul>
<p>ç¤ºä¾ï¼æ¥è¯¢<code>SELECT user_id, username FROM users WHERE email = 'user@deepseek.com';</code>ï¼è®¾è®¡è¦çç´¢å¼<code>ALTER TABLE users ADD INDEX idx_email_cover (email, user_id, username);</code>ï¼å¯å®ç°æ åè¡¨ãæ æåºçé«ææ¥è¯¢ã</p>
<h3 id="-313-æå°ç»´æ¤ææ¬åå">### 3.1.3 æå°ç»´æ¤ææ¬åå</h3>
<p>ç´¢å¼ä¼å¢å æå¥ãæ´æ°ãå é¤æä½çç»´æ¤ææ¬ï¼éè°æ´B+æ ç»æï¼ï¼è®¾è®¡æ¶éï¼</p>
<ul>
<li>
<p>- æ§å¶åè¡¨ç´¢å¼æ°å¨5ä¸ªä»¥åï¼é¿ååä½ç´¢å¼ï¼å¦å·²æ(a,b)èåç´¢å¼ï¼åç¬aç´¢å¼ä¸ºåä½ï¼ï¼</p>
</li>
<li>
<p>- å¤§ææ¬ãBlobå­æ®µä¸å»ºç´¢å¼ï¼é¿åç´¢å¼ä½ç§¯è¿å¤§ï¼</p>
</li>
<li>
<p>- èåç´¢å¼éè¦çé«é¢æ¥è¯¢åºæ¯ï¼åå°éå¤ç´¢å¼ã</p>
</li>
</ul>
<h3 id="-314-èåç´¢å¼çå­æ®µé¡ºåºæå·§">### 3.1.4 èåç´¢å¼çå­æ®µé¡ºåºæå·§</h3>
<p>èåç´¢å¼éµå¾ªâæå·¦åç¼ååâï¼æ¬è´¨æ¯åºäºB+æ çæåºå­å¨ç¹æ§ï¼è®¾è®¡æ¶ééµå¾ªï¼</p>
<ul>
<li>
<p>- ç­å¼æ¥è¯¢å­æ®µå¨åï¼èå´æ¥è¯¢å­æ®µå¨åï¼å¦(a,b)èåç´¢å¼ï¼a=1 AND b&gt;10å¯èµ°ç´¢å¼ï¼b&gt;10åä¸å¯ï¼ï¼</p>
</li>
<li>
<p>- é«é¢æ¥è¯¢å­æ®µå¨åï¼ä½é¢å­æ®µå¨åï¼ç¡®ä¿æ´å¤æ¥è¯¢è½å½ä¸­ç´¢å¼åç¼ã</p>
</li>
</ul>
<p>ç¤ºä¾ï¼æ¥è¯¢<code>SELECT * FROM sales WHERE region='Asia' AND category='Tech' AND sale_date BETWEEN '2023-01-01' AND '2023-12-31' ORDER BY revenue DESC;</code>ï¼æä¼èåç´¢å¼ä¸º<code>idx_region_category_date (region, category, sale_date)</code>ã</p>
<h2 id="-32-ç´¢å¼å¤±æçåå¤§å¸ååºæ¯ä¸è§£å³æ¹æ¡">## 3.2 ç´¢å¼å¤±æçåå¤§å¸ååºæ¯ä¸è§£å³æ¹æ¡</h2>
<p>ç´¢å¼å¤±ææ¯æ¢æ¥è¯¢çä¸»è¦è¯±å ï¼æ¬è´¨æ¯ç ´åäºB+æ çæåºæ§æå®ä½è§åï¼ä»¥ä¸æ¯å®æä¸­æå¸¸è§çåºæ¯åä¼åæ¹æ¡ï¼</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>å¤±æåºæ¯</td>
<td>éè¯¯ç¤ºä¾</td>
<td>ä¼åæ¹æ¡</td>
</tr>
<tr>
<td>ç´¢å¼ååä¸è®¡ç®/å½æ°</td>
<td>SELECT * FROM users WHERE YEAR(create_time) = 2023;</td>
<td>SELECT * FROM users WHERE create_time BETWEEN '2023-01-01' AND '2023-12-31';</td>
</tr>
<tr>
<td>éå¼ç±»åè½¬æ¢</td>
<td>SELECT * FROM logs WHERE user_id = '123'ï¼user_idä¸ºINTï¼;</td>
<td>SELECT * FROM logs WHERE user_id = 123ï¼å¹éå­æ®µç±»åï¼;</td>
</tr>
<tr>
<td>LIKEä»¥%å¼å¤´</td>
<td>SELECT * FROM user WHERE userId LIKE '%123';</td>
<td>æ¹ç¨è¦çç´¢å¼æLIKE '123%';</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

</div>
<div class="clear"></div>

		<p class="postfoot">
			posted on 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-15 22:27">2026-01-15 22:26</span>&nbsp;
<a href="https://www.cnblogs.com/liuziyi1">åå­æ¯</a>&nbsp;
éè¯»(<span id="post_view_count">56</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19489439);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19489439', targetLink: 'https://www.cnblogs.com/liuziyi1/p/19489439', title: 'MySQLæ§è½ä¼åï¼ä»åºå±åçå°å®æè½å°çå¨ç»´åº¦æ¹æ¡' })">ä¸¾æ¥</a>

		</p>
	 ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ CLAUDE.md å¨æ¹ä½æåï¼æå»ºé«æ AI å¼åä¸ä¸æ ]]></title>
    <link>https://www.cnblogs.com/didispace/p/19489098</link>
    <guid>2705f113ee0b5395fb6dd433a3bec336</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/didispace/p/19489098" title="åå¸äº 2026-01-15 20:09">
    <span role="heading" aria-level="2">CLAUDE.md å¨æ¹ä½æåï¼æå»ºé«æ AI å¼åä¸ä¸æ</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>å¦æä½ æ¯ Claude çæ¥å¸¸ç¨æ·ï¼ä½ ä¸å®çæè¿ä¸ªåºæ¯ï¼æ¯æ¬¡å¼å¯ä¸ä¸ªæ°çå¯¹è¯ï¼é½å¿é¡»ä¸åå¶ç¦å°éå¤è®¾ç½®é¡¹ç®èæ¯ãç¼ç è§èåç¹å®çæä»¤ãè¿ä¸ä»èæ¶ï¼ä¹å®¹æåºéãå½ä½ å¿è®°æéæä¸ªå³é®ç»èæ¶ï¼å°±ä¸å¾ä¸è±æ´å¤æ¶é´å»ä¿®å¤é£äºä¸ç¬¦åè§èçä»£ç ã</p>
<p>CLAUDE.md æä»¶æ­£æ¯è§£å³è¿ä¸çç¹çå³é®ãå®å°±å Claude çé¡¹ç®ä¸å±è®°å¿ï¼è®© AI å¨æ¯æ¬¡å¯¹è¯å¼å§åèªå¨å è½½å¹¶è®°ä½ä½ çææåå¥½ãè¿æ¯ä¸ä¸ªç®åèå¼ºå¤§çåè½ï¼ä½å¤§å¤æ°ç¨æ·ä»ä»åçå¨åºç¡å±é¢ã</p>
<p>äºå®ä¸ï¼è¦çæ­£éæ¾ CLAUDE.md çå¨åï¼éè¦ææ¡ä¸äºæ´æ·±å»ãçè³æäºè¿åç´è§çæå·§ãæ¬æå°ä¸ºä½ æ­ç¤ºå¶ä¸­æå³é®çäºä¸ªï¼å¸®å©ä½ å°è¿ä¸ªç®åçéç½®æä»¶ï¼è½¬åä¸ºä¸ä¸ªè½å¤æç»­è¿åçé¡¹ç®ç¥è¯åºã</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/626506/202601/626506-20260115200636481-1624630998.png" class="lazyload"></p>
<h2 id="1-ä½ ç-claudemd-åºè¯¥æ¯ä¸ä¸ªæ´»çææ¡£èä¸æ¯ä¸æ¬¡æ§éç½®">1. ä½ ç CLAUDE.md åºè¯¥æ¯ä¸ä¸ªâæ´»çææ¡£âï¼èä¸æ¯âä¸æ¬¡æ§éç½®â</h2>
<p>è®¸å¤äººè®¤ä¸º CLAUDE.md æä»¶åªéå¨é¡¹ç®å¼å§æ¶éç½®ä¸æ¬¡ï¼ç¶åå°±å¯ä»¥ç½®ä¹ä¸çãè¿æ¯ä¸ä¸ªå·¨å¤§çè¯¯åºãæææç CLAUDE.md åºè¯¥éçé¡¹ç®çæ¼è¿èæç»­æ´æ°åä¼åã</p>
<p>æä½³çç»´æ¤æ¹å¼æ¯å¨æ¥å¸¸å·¥ä½ä¸­âææºå°âæå»ºå®ãä¾å¦ï¼å½ Claude ååºäºä¸ä¸ªéè¦çº æ­£çåè®¾ââæ¯å¦å®å»ºè®®ä½¿ç¨ console.log è¿è¡è°è¯ï¼èä½ çå¢éè§èæ¯ä½¿ç¨ç¹å®çæ¥å¿åºââä¸è¦åªæ¯ä¸´æ¶ä¿®æ­£ãç´æ¥åè¯ Claudeï¼âå°âæ»æ¯ä½¿ç¨æ¥å¿åºèä¸æ¯ console.logâè¿æ¡è§åæ·»å å°æç CLAUDE.md æä»¶ä¸­ãâ è¿æ ·ï¼ä½ çä¿®æ­£å°±ä¼æ²æ·ä¸æ¥ï¼å¨æªæ¥çææä¼è¯ä¸­çæãå¼å¾æ³¨æçæ¯ï¼æ©æçæ¬ç Claude æä¸ä¸ª # å¿«æ·é®æ¥æ·»å æä»¤ï¼ä½å¨ 2.0.70 çæ¬åå·²è¢«ç§»é¤ãç®åï¼ç´æ¥è¯·æ± Claude è¿è¡ä¿®æ¹æ¯å®æ¹æ¨èçæä½³å®è·µã</p>
<p>è¿ç§åæ³çä»·å¼å¨äºï¼å®è½å®æ¶ææå¹¶åºåå·¥ä½æµç¨ä¸­çéæ§ç¥è¯ãæ­£å¦ä¸ä¸ªç²¾å¦çæ¯å»æè¯´ï¼</p>
<p>è¿å°±åå¨ä¼è®®ä¸­åç¬è®°ï¼ä¸åçæ¯ï¼è¿äºç¬è®°ççä¼è¢«ä½¿ç¨ã</p>
<p>æ´é«çº§çç»´æ¤æ¹æ³æ¯å°å¶ä¸å¢éåä½æµç¨ç»åãå¨ä»£ç å®¡æ¥ï¼Code Reviewï¼ä¸­åç°çæªè¢«ææ¡£åçè§èï¼æ­£æ¯æ´æ° CLAUDE.md çç»ä½³æ¶æºãä¸ä¸ªç± Boris Cherny åäº«çé«æå·¥ä½æµæ¯ï¼éè¿ GitHub Actionï¼ä½ çè³å¯ä»¥ç´æ¥å¨ PR è¯è®ºä¸­ @claudeï¼è®©å®å°æ°è§èæ·»å å° CLAUDE.md æä»¶ä¸­ãè¿åå»ºäºä¸ä¸ªå¼ºå¤§çåé¦å¾ªç¯ï¼å°å¢éçéä½æºæ§æºæºä¸æ­å°æ²æ·å°è¿ä¸ªæ ¸å¿æä»¶ä¸­ã</p>
<h2 id="2-å°å³æ¯å¤ä¸ä¸ææ¯å®è´µèµæºç²¾ç®è³ä¸">2. å°å³æ¯å¤ï¼ä¸ä¸ææ¯å®è´µèµæºï¼ç²¾ç®è³ä¸</h2>
<p>äººä»¬æ®éè®¤ä¸ºï¼æä¾ç» AI çä¸ä¸æè¶å¤ï¼ç»æå°±è¶å¥½ãç¶èå¨ä½¿ç¨ CLAUDE.md æ¶ï¼è¿ä¸ªç´è§å¯è½æ¯éè¯¯çã</p>
<p>æ ¸å¿è®ºç¹æ¯ï¼âä¸ä¸ææ¯å®è´µçï¼Context is preciousï¼âãCLAUDE.md ä¸­çæ¯ä¸è¡åå®¹ï¼é½å¨ä¸ä½ å½åçå·¥ä½æä»¤ç«äº AI çæ³¨æåãä¸ä¸ªèè¿ãåæ»¡åä½ä¿¡æ¯çæä»¶ï¼åèå¯è½ç¨éææå³é®çæä»¤ï¼å¯¼è´ AI æä¸ä½éç¹ã<br>
å æ­¤ï¼ç²¾ç®è³ä¸ãä¸ä¸ªå¾å¥½çèµ·ç¹æ¯ä½¿ç¨ /init å½ä»¤ï¼å®ä¼æ ¹æ®ä½ çé¡¹ç®ç»æåææ¯æ çæä¸ä¸ªåå§æä»¶ãæçå»ºè®®æ¯ï¼ä»¥æ­¤ä¸ºåºç¡ï¼ç¶åå é¤ææä½ ä¸éè¦çåå®¹ãä»ç°æåå®¹ä¸­å é¤æ¯ä»é¶å¼å§åå»ºè¦å®¹æå¾å¤ã</p>
<p>ä¸è¬å»ºè®®å°æä»¶é¿åº¦ä¿æå¨ 300 è¡ä»¥ä¸ãå½ç¶ï¼è¿å¹¶éç¡¬æ§è§å®ãå¯¹äºä¸äºå·æå¤æçº¦å®æéå¯»å¸¸æ¨¡å¼ç codebaseï¼ä¸ä¸ªæ´é¿ç CLAUDE.md åèè½éè¿é¢åå è½½è¶³å¤çä¸ä¸æï¼ææé²æ­¢ Claude ååºéè¯¯åè®¾ãå³é®å¨äºï¼æä»¶ä¸­çæ¯ä¸è¡é½åºè¯¥æå¶æç¡®çä»·å¼ãæ¯«ä¸çæå°å é¤é£äºæ¾èæè§çåºè¯ï¼ä¾å¦âè¯·ç¼åé«è´¨éä»£ç âï¼ææ²¡æå®éæå¯¼æä¹çâå¡«åâä¿¡æ¯ã</p>
<p>ç²¾ç®ç CLAUDE.md è¿«ä½¿ä½ ä»ç»æèå¹¶åªä¿çæéè¦çæä»¤ãè¿ä¸ä»è½èçå®è´µçä¸ä¸æç©ºé´ï¼æ´è½ç¡®ä¿ AI å¨å¤çä½ çè¯·æ±æ¶ï¼è½å¤æ´åç¡®å°èç¦äºæ ¸å¿è¦æ±ï¼èä¸æ¯å¨å¤§éæ å³ä¿¡æ¯ä¸­è¿·å¤±æ¹åã</p>
<h2 id="3-è¶è¶åä¸ªæä»¶ç¨æ¨¡ååç»æç®¡çå¤ææ§">3. è¶è¶åä¸ªæä»¶ï¼ç¨æ¨¡ååç»æç®¡çå¤ææ§</h2>
<p>è®¸å¤ç¨æ·åªç¥éå¨é¡¹ç®æ ¹ç®å½ä¸åå»ºä¸ä¸ª CLAUDE.md æä»¶ãè¿å¯¹äºå°åé¡¹ç®æ¥è¯´è¶³å¤äºï¼ä½å¯¹äºå¤§åæç»æå¤æçé¡¹ç®ï¼å­å¨çæ´ä¼éãæ´å¼ºå¤§çæ¨¡ååç®¡çæ¹å¼ã</p>
<ul>
<li>@imports è¯­æ³ ä½ å¯ä»¥ä½¿ç¨ @path/to/file è¯­æ³ï¼ä»ä¸» CLAUDE.md æä»¶ä¸­å¼ç¨å¶ä»æä»¶çåå®¹ãè¿è½è®©ä¸»æä»¶ä¿æç®æ´ï¼åæ¶å°è¯¦ç»çè§èæåå°ç¬ç«çææ¡£ä¸­ãä¾å¦ï¼ä½ å¯ä»¥å°å¤æç API è®¾è®¡æ¨¡å¼æ¾å¨ docs/api-patterns.md ä¸­ï¼ç¶åå¨ä¸»æä»¶éç¨ @docs/api-patterns.md å¼ç¨å®ã</li>
<li>.claude/rules/ ç®å½ è¿æ¯ä¸ä¸ªéå¸¸éåå¤§åå¢éçç»æãæææ¾å¨ .claude/rules/ ç®å½ä¸ç .md æä»¶é½ä¼è¢« Claude èªå¨å è½½ï¼æ éæå¨ @importãè¿ä½¿å¾ä¸åé¢åçå¢éå¯ä»¥ç¬ç«ç»´æ¤åèªçè§åæä»¶ï¼ä¾å¦ï¼åç«¯å¢éç»´æ¤ code-style.mdï¼å®å¨å¢éç»´æ¤ security.mdãå¤§å®¶åå¸å¶èï¼ææé¿åäºå¨åä¸ªå¤§æä»¶ä¸­é¢ç¹äº§çåå¹¶å²çªã</li>
<li>å­ç®å½ä¸­ç CLAUDE.md å¯¹äº Monorepoï¼åä¸ä»£ç åºï¼é¡¹ç®ï¼è¿æ¯ä¸ä¸ªç»ä½³çè§£å³æ¹æ¡ãä½ å¯ä»¥å¨é¡¹ç®çç¹å®å­ç®å½ï¼ä¾å¦ api/ æ packages/ui/ï¼ä¸­æ¾ç½® CLAUDE.md æä»¶ãè¿äºæä»¶éå¸¸ç¹æ®ï¼å®ä»¬å¹¶ä¸ä¼å¨ä¼è¯å¯å¨æ¶å è½½ï¼èåªå¨ Claude ä¸»å¨å¤çè¯¥ç¹å®å­ç®å½ä¸­çåå®¹æ¶æä¼è¢«åå«è¿æ¥ãè¿ä½¿å¾ä½ å¯ä»¥ä¸ºé¡¹ç®çä¸åæ¨¡åå®ä¹æªç¶ä¸åçè§èï¼å®ç°çæ­£ç²¾ç»åçä¸ä¸æç®¡çã<br>
â¢ ä¸ªäººéç½® CLAUDE.local.md è¿æä¸ä¸ªå³é®æä»¶ï¼CLAUDE.local.mdãå®ç¨äºå­æ¾é£äºä¸åºæäº¤å°çæ¬æ§å¶ä¸­çä¸ªäººåå¥½ï¼ä¾å¦ä½ ä¹ æ¯çç¼è¾å¨ quirks æåå¥½çä»£ç åä½åº¦ãç±äºè¿æ¯ä¸ªäººä¸å±çï¼è¯·å¡å¿å°å¶æ·»å å° .gitignore æä»¶ä¸­ï¼ä»¥é¿åå°ä¸ªäººéç½®æ³é²ç»æ´ä¸ªå¢éã</li>
</ul>
<h2 id="4-é­é¬¼å¨ç»èä¸­æä»¶åæ¯åºåå¤§å°åç">4. é­é¬¼å¨ç»èä¸­ï¼æä»¶åæ¯åºåå¤§å°åç</h2>
<p>è¿æ¯ä¸ä¸ªæå¶å¾®å°ä½è³å³éè¦çææ¯ç»èï¼ä¹æ¯æå®¹æè¢«å¿½ç¥çé·é±ä¹ä¸ï¼CLAUDE.md è¿ä¸ªæä»¶åæ¯åºåå¤§å°åçã</p>
<p>æ­£ç¡®çæä»¶åå¿é¡»æ¯âCLAUDE.mdâââCLAUDE é¨åä¸ºå¤§åï¼.md æ©å±åä¸ºå°åãå¦æä½ å°å¶å½åä¸º claude.mdãClaude.md æå¶ä»ä»»ä½åä½ï¼Claude çç³»ç»å°æ æ³è¯å«å¹¶å è½½å®ã</p>
<p>è¿ä¸ªç»èä¹æä»¥éè¦ï¼æ¯å ä¸ºå®æ¯ä¸ä¸ªå¸åçâé·é±âï¼gotchaï¼ãæè¶£çæ¯ï¼è¿ä¸ç¹å¨å®æ¹ææ¡£ä¸­å¹¶æªæç¡®è¯´æãææ¯éè¿è¯¢é®å®æ¹ææ¡£ç AI å©æææç»ç¡®è®¤äºè¿ä¸è§åãä¸æ¦åºéï¼ä½ å¯è½ä¼è±è´¹å¤§éæ¶é´ææ¥ä¸ºä»ä¹èªå·±ç²¾å¿ç¼åçæä»¤å®å¨æ²¡æçæï¼æç»æåç°é®é¢åºå¨ä¸ä¸ªç®åçå¤§å°åéè¯¯ä¸ãè¿ä¸ªçä¼¼å¾®ä¸è¶³éçç»èï¼æ°æ°ä½ç°äºä¸ AI é«æåä½æ¶ï¼ç²¾ç¡®éç½®çéè¦æ§ã</p>
<h2 id="5-è®©-ai-ä¼å-aiå®æè¯·-claude-å®¡æ¥èªå·±çè¯´æä¹¦">5. è®© AI ä¼å AIï¼å®æè¯· Claude å®¡æ¥èªå·±çâè¯´æä¹¦â</h2>
<p>è¿æ¯ä¸ä¸ªéå¸¸å·§å¦çâåè®¤ç¥âæå·§ï¼å®æè®© Claude èªå·±æ¥å®¡æ¥åä¼åå®çâè¯´æä¹¦âââCLAUDE.md æä»¶ã</p>
<p>éçæ¶é´çæ¨ç§»ï¼CLAUDE.md ä¸­ä¸å¯é¿åå°ä¼ç§¯ç´¯ä¸äºè¿æ¶ãåä½çè³ç¸äºå²çªçæä»¤ãéè¿ä¸ä¸ªç®åçæç¤ºï¼ä¾å¦âè¯·å®¡æ¥è¿ä¸ª CLAUDE.md æä»¶ï¼å¹¶æåºæ¹è¿å»ºè®®ä»¥ä½¿å¶æ´æ¸æ°ãæ´é«æâï¼ä½ å¯ä»¥å©ç¨ Claude èªèº«çè½åæ¥åç°è¿äºé®é¢ãå®å¯è½ä¼å»ºè®®ä½ åå¹¶éå¤çè§åï¼ææ¾æ¸æ¨¡ç³çè¡¨è¿°ã</p>
<p>å¯¹äºé£äºç»å¯¹ä¸è½è¿åçå³é®è§åï¼ä½ å¯ä»¥ä½¿ç¨å¼ºè°è¯æ¥å¼èµ· Claude çæ³¨æï¼æ¯å¦ IMPORTANT: æ YOU MUSTãè¿è½æé« Claude éµå¾ªè¿äºæä»¤çæ¦çï¼ä½è¯·å¡å¿è°¨æä½¿ç¨ãæ­£å¦ä¸å¥å¤èçå»ºè®®æè¯´ï¼å¦æææä¸è¥¿é½è¢«æ è®°ä¸ºéè¦ï¼é£å°±æ²¡æä»ä¹æ¯éè¦çäºã</p>
<p>è¯ç¶ï¼è¿éè¦ä¸äºç»´æ¤ææ¬ï¼ä½å¶åæ¥æ¯å·¨å¤§çãæ­£å¦æºææè¯´ï¼<br>
è¿å¬èµ·æ¥åæ¯ç»´æ¤å¼éãç¡®å®æ¯ãä½å®æ¯å¨æ¯ä¸ªä¼è¯ä¸­éå¤èªå·±çè¯ï¼æä¿®å¤é£äºå¿½ç¥äºä½ çè§èçä»£ç è¦çäºå¾å¤ã</p>
<p>è¿ä¸ä»ä»æ¯ä¸ç§æä»¶ç»´æ¤ç­ç¥ï¼æ´æ¯ä¸ç§ä¸ AI åä½çæ°èå¼ãæä»¬ä¸åä»ä»æ¯ AI çä½¿ç¨èï¼æ´æ¯å¶æé¿è¿ç¨ä¸­çå¼å¯¼èï¼è®©å·¥å·æ¬èº«åä¸å°èªæå®åçæµç¨ä¸­ï¼å½¢æä¸ä¸ªæç»­æ¹è¿çè¯æ§å¾ªç¯ã</p>
<h2 id="ç»è®º">ç»è®º</h2>
<p>CLAUDE.md è¿ä¸æ­¢ä¸ä¸ªç®åçéç½®æä»¶ãéè¿æ¬æåäº«çäºä¸ªé«çº§æå·§ââå°å¶è§ä¸ºæ´»ææ¡£ãä¿æç²¾ç®ãæ¨¡ååç®¡çãæ³¨æå¤§å°åï¼ä»¥åè®© AI èªæä¼åââä½ å¯ä»¥å°å¶ä»ä¸ä¸ªéæçæä»¤åè¡¨ï¼è½¬åä¸ºä¸ä¸ªå¼ºå¤§çãä¸é¡¹ç®å±åæé¿çå¨æç¥è¯åºã</p>
<p>è¿äºç­ç¥ä»£è¡¨äºä¸ç§æ´æ·±å±æ¬¡çæç»´æ¹å¼ï¼å°ä½ ç AI ä¸ä¸ææ¬èº«è§ä¸ºä¸ä¸ªâä»£ç åºâãå®ä¹éè¦åä»£ç ä¸æ ·è¢«éæãè¢«å®¡æ¥ãè¢«æç»­æ¹è¿ãä½ ç CLAUDE.md å¼å¾ä½ å¦æ­¤å¯¹å¾ãç°å¨ï¼ä¸å¦¨æèä¸ä¸ï¼ä½ ç CLAUDE.md ä¸­æ²æ·äºå¤å°å¢éæºæ§ï¼æè®¸ï¼ç°å¨å°±æ¯å¼å§æå»ºå®çæä½³æ¶æºã</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-15 20:10">2026-01-15 20:09</span>&nbsp;
<a href="https://www.cnblogs.com/didispace">ç¨åºç¿DD</a>&nbsp;
éè¯»(<span id="post_view_count">49</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19489098);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19489098', targetLink: 'https://www.cnblogs.com/didispace/p/19489098', title: 'CLAUDE.md å¨æ¹ä½æåï¼æå»ºé«æ AI å¼åä¸ä¸æ' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ãç¬è®°ãA Conceptual Overview of asyncio ]]></title>
    <link>https://www.cnblogs.com/wngtk/p/19491520</link>
    <guid>08cc930c18963ee73b724a250c9f4514</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/wngtk/p/19491520" title="åå¸äº 2026-01-16 14:07">
    <span role="heading" aria-level="2">ãç¬è®°ãA Conceptual Overview of asyncio</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>è¯»äºè¿ä¸¤ç¯ï¼ä¹å¯ä»¥è¯´æ¯ä¸ç¯ï¼ï¼æææ­£ç¡®è®¤è¯äº Python çåç¨ãä¸è½ç´æ¥æ Python async/await å½ä½ JavaScript async/awaitä¸æ ·çä¸è¥¿ã</p>
<ul>
<li><a href="https://docs.python.org/3/howto/a-conceptual-overview-of-asyncio.html" target="_blank" rel="noopener nofollow">https://docs.python.org/3/howto/a-conceptual-overview-of-asyncio.html</a></li>
<li><a href="https://github.com/anordin95/a-conceptual-overview-of-asyncio/tree/main" target="_blank" rel="noopener nofollow">https://github.com/anordin95/a-conceptual-overview-of-asyncio/tree/main</a></li>
</ul>
<p>å¨å­¦ä¹  Python åç¨ä¹åï¼æå¯¹ JavaScript åç¨å·²ç»ç¥æäºè§£ï¼å¨ JavaScript async/await å¾ç´è§ç´æ¥ç¨å°±å¯ä»¥ï¼å¨å­¦ä¹  Python åç¨çè¿ç¨ä¸­ï¼æåç°æå¯¹ JavaScript Promise ä¹å¿äºä¸å°ï¼ä¹ååè¿ä¸ä¸ªåå®¢è®°å½ã</p>
<h2 id="ä¸å¼å§æä¸çæ-python-asyncio">ä¸å¼å§æä¸çæ Python asyncio</h2>
<p>Python çåç¨ç¨èµ·æ¥éè¦ç¨<code>asyncio.run()</code>ï¼å¨ Python 3.6 è¿æ²¡æ<code>asyncio.run()</code>ã<code>asyncio.create_task()</code> ä¸ºä»ä¹æ¥é No running event loop</p>
<pre><code class="language-python">Python 3.12.3 (main, Jan  8 2026, 11:30:50) [GCC 13.3.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
&gt;&gt;&gt; import asyncio
&gt;&gt;&gt; async def foo(): ...
...
&gt;&gt;&gt; asyncio.create_task(foo())
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
  File "/usr/lib/python3.12/asyncio/tasks.py", line 417, in create_task
    loop = events.get_running_loop()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
RuntimeError: no running event loop
&gt;&gt;&gt;
</code></pre>
<h2 id="åç¨ä¸ä¼ç«å»æ§è¡">åç¨ä¸ä¼ç«å»æ§è¡</h2>
<p>è°ç¨å¼æ­¥å½æ°ï¼åå»ºäºä¸ä¸ªåç¨å¯¹è±¡ãåç¨å¯¹è±¡åé¨çé»è¾ä¸ä¼ç«å»æ§è¡ï¼ç­å°äºä»¶å¾ªç¯æ¥ææ§å¶æï¼å¹¶ä¸å¯å¨/ç»§ç»­åç¨çæ¶åï¼åç¨çé»è¾æä¼æ§è¡ã</p>
<pre><code class="language-python">Python 3.12.3 (main, Jan  8 2026, 11:30:50) [GCC 13.3.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
&gt;&gt;&gt; import asyncio
&gt;&gt;&gt; async def foo(): print('bar')
...
&gt;&gt;&gt; foo()
&lt;coroutine object foo at 0x720ef6db5a80&gt;
&gt;&gt;&gt;
</code></pre>
<p>æä»¬å¯ä»¥çå°åç¨çåé¨çé»è¾æ²¡ææ§è¡ãè¦æ§è¡è¿ä¸ªåç¨æä»¬å¯ä»¥ä½¿ç¨ <code>asyncio.run()</code>ã</p>
<pre><code class="language-python">&gt;&gt;&gt; asyncio.run(foo())
bar
</code></pre>
<p>å¨ Python çåç¨ä¸­ï¼è¦æ³å¯å¨å¦å¤ä¸ä¸ªåç¨ï¼å°±è¦ç¨ <code>asyncio.create_task()</code> åå»ºä¸ä¸ª Task å¹¶ä¸åäºä»¶å¾ªç¯å³èèµ·æ¥ï¼è¿ä¸ªå½æ°ä¼æ¾å°å½åæ­£å¨è¿è¡çäºä»¶å¾ªç¯ãä¸ä¸ªçº¿ç¨åªæä¸ä¸ªæ­£å¨è¿è¡çäºä»¶å¾ªç¯ã</p>
<p><code>asyncio.run()</code> å <code>asyncio.create_task()</code> å¸®æåäºä¸äºäºæï¼ä½æ¯æä¸ç¥éä»å°åºå¹²ä»ä¹äºãèå®è¯´ï¼æå¾è®¨åç¼ç¨è¯­è¨åç§éå¼çè¡ä¸ºã</p>
<p><code>asyncio.run()</code> ç¸å½äºæ¯è¿æ ·å è¡ï¼</p>
<pre><code class="language-python">loop = asyncio.new_event_loop()
task = asyncio.Task(foo(), loop=loop)
loop.run_util_complete(task)
</code></pre>
<p>run_util_complete æ¯æ coroutineï¼ä¹å¯ä»¥ä¸æå¨åå»º Task.</p>
<pre><code class="language-python">loop = asyncio.new_event_loop()
loop.run_util_complete(foo())
</code></pre>
<p>æä»¬è§å°äºæå¨åå»º Task çæ¹æ³ï¼å¯ä»¥æ³è±¡å° create_task æ¯å¦ä½ç¥éæ¾å¨åªä¸ªäºä»¶å¾ªç¯ä¸çã</p>
<pre><code class="language-python">def create_task(coro):
  loop = asyncio.get_running_loop()
  return asyncio.Task(coro, loop=loop)
</code></pre>
<p>JavaScript è°ç¨å¼æ­¥å½æ°ç´æ¥å°±æ§è¡äºå½æ°ä½ï¼åªæä½ ä¸å  awaitãJavaScript å¼æ­¥å½æ°ä½å°±ç¸å½äºä¼ éç» Promise çåè°å½æ°ã</p>
<pre><code class="language-js">let promise = new Promise(function(resolve, reject) {
  // this function will executes immediately
})
</code></pre>
<h2 id="è®©æ­¥æ§å¶æç»äºä»¶å¾ªç¯">è®©æ­¥æ§å¶æç»äºä»¶å¾ªç¯</h2>
<pre><code>class YieldToEventLoop:
    def __await__(self):
        yield
</code></pre>
<blockquote>
<p>The only way to yield (or effectively cede control) from a coroutine is to await an object that <code>yield</code>s in its <code>__await__</code> method.</p>
</blockquote>
<p><strong>å¨ä¸ä¸ªå¯¹è±¡ç <code>__await__</code> æ¹æ³ä¸­ yield æ¯è®©æ­¥æ§å¶æç»äºä»¶å¾ªç¯çå¯ä¸çæ¹å¼</strong>ã<code>await object</code> ä¼è°ç¨å¯¹è±¡ç <code>__awit__</code> æ¹æ³ã</p>
<p>await coroutine ä¸ä¼å°æ§å¶æäº¤ç»äºä»¶å¾ªç¯ï¼ç®åç await coroutine å°±å¥½ä¼¼ yield from generatorãè¿å¯¹çæ JavaScript åç¨çäººæ¯å¾åç´è§çãPython çç»å¸åç¨ï¼ä¹å°±æ¯ Python çæå¨å½ä½åç¨ä½¿ç¨ï¼ä½æ¯æä»¬æ²¡æäºä»¶å¾ªç¯ã</p>
<p>coroutine æçæ¯ coroutine objectãè°ç¨ä¸ä¸ª async function ä¼åå»ºä¸ä¸ª coroutine objectã</p>
<p><strong>await ä¸ä¸ª Task(Future) å¯¹è±¡å°±ä¼è®©æ­¥æ§å¶ç»äºä»¶å¾ªç¯</strong>ãTask æ¯ Future çå­ç±»ï¼Future ç <code>__await__</code> æ¹æ³ä¼ yieldã</p>
<p>æ³¨æï¼æä»¬ä¸è½ç´æ¥å¨å¼æ­¥å½æ°ï¼åç¨å½æ°ï¼éé¢ç´æ¥å yield å®ç°è®©æ­¥æ§å¶ç»äºä»¶å¾ªç¯ï¼è°ç¨å½æ°å°±ä¼åæå¼æ­¥çæå¨ã</p>
<h2 id="æä»¬éè¦ææ-task-å¯¹è±¡å¹¶ä¸-await">æä»¬éè¦ææ Task å¯¹è±¡ï¼å¹¶ä¸ await</h2>
<blockquote>
<p>Itâs important to be aware that the task itself is not added to the event loop, only a callback to the task is. This matters if the task object you created is garbage collected before itâs called by the event loop</p>
</blockquote>
<p>Task å¯¹è±¡ä¸å®è¦æåéææï¼å¹¶ awaitãä¸ç¶å½åéè¶åºä½ç¨åï¼è¢« GC åæ¶åï¼åç¨æ²¡æ§è¡å®èªå·±å°±éææéåºäºï¼ä¸ä¼æ¥éï¼ãTask å¯¹è±¡ GC åæ¶ï¼<s>é£ä¹ coroutine å¯¹è±¡ä¹è¢«åæ¶äº</s>ã</p>
<p>è¯´å®è¯ï¼æå¾é¾çè§£äºä»¶å¾ªç¯æ²¡æ Task å¯¹è±¡ãä½æ¯åè¿æ¥ JavaScript ç Promise .then çæ¶åä¸å°±æ¯å¨æ³¨ååè°å½æ°åï¼V8 çå¾®ä»»å¡éåéé¢ä¸æ¯ä¿å­ Promise çå¯¹è±¡ï¼æ¯åè°å½æ°åã</p>
<pre><code class="language-python">import asyncio

async def async_print(str):
    print(str)

async def coro_a():
    for _ in range(3):
        await async_print("I am coro_a()!")

class YieldToEventLoop:
    def __await__(self):
        yield

async def coro_b():
    for _ in range(3):
        print("I am coro_b()!")
        await YieldToEventLoop() # neccessay to show coro_b() one time

async def main():
    task = asyncio.create_task(coro_b())
    await coro_a()

asyncio.run(main())

# Output:
# I am coro_a()!
# I am coro_a()!
# I am coro_a()!
# I am coro_b()!

</code></pre>
<p>å¦æè¯»æäºè¿ä¸ªä¾å­ï¼é£ä¹å°±è¯»æäºæ´ç¯ç¬è®°æèåæäºã</p>
<p>main() å½æ°åå»º task åæ²¡æ await taskï¼ä¸ä¼è®©æ­¥æ§å¶æç»äºä»¶å¾ªç¯ï¼æä»¥ main å½æ°ç»§ç»­æ§è¡ãawait coro_a å¨ await coroutineï¼ä¸ä¼è®©æ­¥æ§å¶ç»äºä»¶å¾ªç¯ï¼æ§è¡ coro_a()ã<code>coro_a()</code> await çä¹æ¯åç¨å¯¹è±¡ï¼ä¹ä¸ä¼è®©æ­¥ç»äºä»¶å¾ªç¯ï¼æä»¥è¿çæå°äºä¸æ¬¡<code>I am coro_a()!</code>ãå¾ªç¯æ§è¡å®æ¯å <code>main()</code> åç¨å¯¹è±¡æ§è¡å®äºï¼äºä»¶å¾ªç¯ææ¿å°æ§å¶æï¼å¼å§æ§è¡ <code>coro_b</code> çé»è¾ã<code>coro_b</code> åå¼å§ä¸æ¬¡ï¼åç¨ <code>await YieldToEvnetLoop</code> è®©æ­¥æ§å¶ç»äºä»¶å¾ªç¯ãå ä¸º main() å½æ°æ©å·²æ§è¡å®æ¯éåº task æ©å·²è¶åºä½ç¨åï¼è¢« GC åæ¶ï¼ç­äºä»¶å¾ªç¯åæ¬¡è¿è¡ coro_b çæ¶ååç°å¯¹åºç Task å¯¹è±¡å·²ç»è¢« GC åæ¶äºãæä»¥å°±æå°äºä¸æ¬¡ <code>I am coro_b()!</code>ã</p>
<p>æå¾å¥½å¥ï¼è¿ä¸ªå°æ¹åå»ºåè°å½æ°çæ¶åæä¹å°±æ²¡æå½¢æé­åå¢ï¼æä¹å°±æ²¡ææ task å¯¹è±¡éèå¨é­åéé¢å¢ï¼</p>
<h2 id="æ»ç»">æ»ç»</h2>
<p>await åç¨ä¸ä¼è®©æ­¥æ§å¶æï¼await Future æä¼è®©æ­¥æ§å¶æç» Event Loopãå®ç°åç¨è®©æ­¥å°±æ¯å¨ <code>__await__</code> æ¹æ³ä¸­ yieldã</p>
<p>Python ä¸å JavaScript æå¾®ä»»å¡éåï¼æä»¬éè¦èªå·±ä¸»å¨å»åå»ºäºä»¶å¾ªç¯ï¼å¹¶å°ä»»å¡æ¾å°äºä»¶å¾ªç¯ä¸­å»ï¼å½ç¶æ´åç¡®çè¯´æ³æ¯å¨äºä»¶å¾ªç¯ä¸­æ³¨ååè°å½æ°ãä¹å°±æ¯ <code>asyncio.create_task()</code>, <code>asyncio.run()</code> è¿ä¸¤ä¸ªå½æ°ã</p>
<p>JavaScript é½æ¯ Promise å¯¹è±¡ï¼await Promise å¯¹è±¡å°±ä¼è®©æ­¥ã</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-16 14:07">2026-01-16 14:07</span>&nbsp;
<a href="https://www.cnblogs.com/wngtk">wngtk</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19491520);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19491520', targetLink: 'https://www.cnblogs.com/wngtk/p/19491520', title: 'ãç¬è®°ãA Conceptual Overview of asyncio' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
        </channel>
        </rss>