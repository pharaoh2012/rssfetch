<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åå®¢å­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2026-01-25T08:22:18.000Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åå®¢å­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ ä»0æå»º 3D GIFå¨ç»ï¼çæ¸è®¡ç®æºè¿è¡æºå¶ ]]></title>
    <link>https://www.cnblogs.com/reasa/p/19529889</link>
    <guid>0cdf141944917a7ce25868e1014a9760</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/reasa/p/19529889" title="åå¸äº 2026-01-25 15:39">
    <span role="heading" aria-level="2">ä»0æå»º 3D GIFå¨ç»ï¼çæ¸è®¡ç®æºè¿è¡æºå¶</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="ä»0æå»º-3d-gifå¨ç»çæ¸è®¡ç®æºè¿è¡æºå¶">ä»0æå»º 3D GIFå¨ç»ï¼çæ¸è®¡ç®æºè¿è¡æºå¶</h1>
<p>å¨<a href="https://www.cnblogs.com/reasa/p/19521361" target="_blank">ãä» 0 æå»º WAV æä»¶ã</a>ä¸­ï¼æä»¬éè¿äºè§£wavæä»¶çç»æä¸æ ¼å¼ï¼å­¦ä¼äºå¦ä½ç¨æ´ç´ çæ¹å¼æå»ºå£°é³æä»¶ï¼å¨<a href="https://www.cnblogs.com/reasa/p/19525923" target="_blank">ãä» 2D è½¬ 3D çæ¬è´¨ã</a>ä¸­ï¼æä»¬é¢æäºæ¸¸æä¸­æè°ä¸ç»´ä¸çï¼ä¸è¿æ¯ç®åçæå½±ã</p>
<p>ä»å¤©æä»¬å°äºè§£ä¸ä¸ªæ´å å¤æä½æè¶£çæä»¶æ ¼å¼-GIFï¼å¨äºè§£å¶æ¬è´¨çåæ¶ï¼æä»¬å°ä¸ä¾èµä»»ä½åºå¤§çå¾å½¢åºï¼å¦ OpenGLãDirectXï¼æå¾ååºï¼å¦ OpenCVãImageMagickï¼ï¼ä»å­ <strong>C++ æ ååº</strong>ï¼å®æä¸ä¸ç¯æç« ç¨pythonå®ç°çæè½¬ç«æ¹ä½å¹¶ä»¥GIFæä»¶çæ¹å¼åç°åºæ¥ã</p>
<p>æä»¬å°è¿ä¸æ­¥å æ·±å¯¹è®¡ç®æºæ¬è´¨ççè§£ï¼<strong>ä¸åå¤æçè¡¨è±¡ï¼å½æ ¹ç»åºé½æ¯âæ°å­¦è®¡ç®âä¸âæ°æ®å­å¨âçç»åã</strong></p>
<h2 id="1-gifæä»¶ç»æ">1. GIFæä»¶ç»æ</h2>
<p>ç¸æ¯äº WAV æä»¶çç®åç²æ´ï¼GIF çç»æè¦ç²¾å¯å¾å¤ï¼å ä¸ºå®å¤©çæ¯ä¸ºäºç½ç»ä¼ è¾èè®¾è®¡çï¼åå«äºåç¼©æºå¶ï¼ã</p>
<p>å½æä»¬ç¨äºè¿å¶è§è§è§å¯ GIF æ¶ï¼å®æ¯ç±ä¸ä¸ªä¸ª <strong>æ°æ®åï¼Blockï¼</strong> ç»æçï¼</p>
<p><img src="https://www.techug.com/wordpress/wp-content/uploads/2017/06/680728-641be6583b65382d.png" alt="" loading="lazy"></p>
<table>
<thead>
<tr>
<th style="text-align: left">æ°æ®å (Block Name)</th>
<th style="text-align: left">ä¸­æåç§°</th>
<th style="text-align: left">å­èæ° (Bytes)</th>
<th style="text-align: left">ä½ç¨ä¸æ ¸å¿é»è¾</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left"><strong>Header</strong></td>
<td style="text-align: left">å¤´æ è¯</td>
<td style="text-align: left">6</td>
<td style="text-align: left">ä¸è¬ä¸º <code>GIF89a</code>ï¼å½ç¶ä¹æ<code>GIF87a</code>,ç¨äºå£°æè¿æ¯ä¸ä¸ªGIFæä»¶ï¼éç¨xxæ åã</td>
</tr>
<tr>
<td style="text-align: left"><strong>Logical Screen Descriptor</strong></td>
<td style="text-align: left">é»è¾å±å¹æè¿°ç¬¦</td>
<td style="text-align: left">7</td>
<td style="text-align: left"><strong>ç»å¸è®¾å®</strong>ï¼å®ä¹å¾åæ»å®½é«ãèæ¯è²ç´¢å¼åæ¯å¦ä½¿ç¨å¨å±è°è²æ¿ã</td>
</tr>
<tr>
<td style="text-align: left"><strong>Global Color Table</strong></td>
<td style="text-align: left">å¨å±é¢è²è¡¨</td>
<td style="text-align: left">3 Ã N</td>
<td style="text-align: left"><strong>é¢æç</strong>ï¼å­å¨ RGB é¢è²ï¼å¦ <code>00 FF 00</code>ï¼ï¼N ä¸ºé¢è²æ°ï¼æå¤§256ï¼ã é»è®¤ä½¿ç¨RGBé¢è²æ¶ï¼æ¯ä¸ªé¢è²åéç¨3ä¸ªå­èå­å¨</td>
</tr>
<tr>
<td style="text-align: left"><strong>Application Extension</strong></td>
<td style="text-align: left">åºç¨ç¨åºæ©å±</td>
<td style="text-align: left">19 (éå¸¸)</td>
<td style="text-align: left">æå¸¸ç¨çæ¯ Netscape æ©å±ï¼ç¨äºâå¾ªç¯æ­æ¾æ¬¡æ°âã</td>
</tr>
<tr>
<td style="text-align: left"><strong>Graphic Control Extension</strong></td>
<td style="text-align: left">å¾å½¢æ§å¶æ©å±</td>
<td style="text-align: left">8</td>
<td style="text-align: left"><strong>æ­æ¾æ§å¶</strong>ï¼å®ä¹æ¯ä¸å¸§ç<strong>å»¶è¿æ¶é´</strong>ï¼å¨ç»å¿«æ¢ï¼åéæè²ã</td>
</tr>
<tr>
<td style="text-align: left"><strong>Image Descriptor</strong></td>
<td style="text-align: left">å¾åæè¿°ç¬¦</td>
<td style="text-align: left">10</td>
<td style="text-align: left"><strong>å¸§å±æ§</strong>ï¼å®ä¹å½åè¿ä¸å¸§å¨ç»å¸ä¸çä½ç½®ï¼x, yï¼åå°ºå¯¸ã</td>
</tr>
<tr>
<td style="text-align: left"><strong>Image Data</strong></td>
<td style="text-align: left">å¾åæ°æ®</td>
<td style="text-align: left">å¯å</td>
<td style="text-align: left">ç¨å¤å¦å¶å</td>
</tr>
<tr>
<td style="text-align: left"><strong>Trailer</strong></td>
<td style="text-align: left">ç»ææ è¯</td>
<td style="text-align: left">1</td>
<td style="text-align: left"><strong>ç»ç¹</strong>ï¼åºå®ä¸º <code>0x3B</code> (åå·)ï¼æ å¿æä»¶å½»åºç»æã</td>
</tr>
</tbody>
</table>
<p>å¶ä¸­ï¼æéè¦çå°±æ¯å¾åæ°æ®äºï¼å¶ä»çåç¨äºè§å®è¿äºå¾åæ°æ®åºå½å¦ä½åç°å°æä»¬ç¼ä¸­ææ¯åç¥æä»¶çå¼å§ç»æï¼å æ­¤å¯¹äºæä»¬æ¥è¯´ï¼å¶ä»ååºæ¬ä¸é½æåºå®æ¨¡æ¿ï¼åªæå¾åæ°æ®éè¦æä»¬èªå·±å®ä¹ã</p>
<h2 id="2lzw-gifå¼ºå¶ä½¿ç¨çå¾ååç¼©ç®æ³">2.LZW-GIFå¼ºå¶ä½¿ç¨çå¾ååç¼©ç®æ³</h2>
<p>æå®äºGIFçæä»¶ç»æï¼æ¥ä¸æ¥å°±éè¦æä»¬è§£å³å¦ä¸ä¸ªæ¦è·¯èï¼LZWââä¸ä¸ªç»å¸çæ æå¾ååç¼©ç®æ³ï¼ä¸ºäºè§£å³ä»ï¼æä»¬å¯ä»¥ä»ä»çåçå¥æã</p>
<p>LZWéè¿ä¸ºå¤ææ°æ®æå»ºç®åç´¢å¼æ¥åå°å­å¨çæ°æ®éï¼è¿ä¸ç¹æ¯æ´ç´ çåå¸ç®æ³ï¼å½ç¶ï¼è¿ä¸ç®æ³çåæèéè¿ä¸å¥ç¹æ®çè§åä½¿å¾å¶ä»äººå¯ä»¥ç´æ¥éè¿ç´¢å¼æ°æ®åæ¨åºå¤ææ°æ®ï¼èå¨GIFä¸­ï¼åæ¯GIFåæå¬å¸å°ä»æè§å®çè§ååå¥½ï¼ç¼åGIFçäººæ ¹æ®è¿ä¸å¥è§åæå»ºæ°æ®ï¼ç¶åå¶ä»äººç´æ¥ä½¿ç¨å¥ç¨äºè¿ä¸å¥è§åçè§£ç å¨è§£ç ï¼ä¾¿è½å°æ°æ®è¿åæåæ¥çæ ·å­ã</p>
<p>GIFçè§£ç å¨åæ¯å¦ä½è¯»åæ°æ®çå¢ï¼è§£ç å¨åå§æ¶ä¸æ¬¡æ§è¯»å9ä½æ°æ®ï¼ç¶åä»å­å¸ä¸­æ·»å è¿ä¸å¯¹åºå³ç³»ï¼æ ¹æ®GIFè§èï¼ä¸æ¦å­å¸éçæ¡ç®è¾¾å° 512 ä¸ªï¼è§£ç å¨å°±ä¼èªå¨å°è¯»åä½å®½ä» 9 ä½å¢å å° 10 ä½ãå¦ææä»¬ç´æ¥å­æ¾æ°æ®ï¼é£ä¹ç»æå°±æ¯æ°æ®è¯»åéä½ï¼è§£ç åºæ¥çåå®¹å°±ä¼ä¸æä»¬æ³è±¡ä¸­çä¸ä¸æ ·ï¼å¦ææä»¬æ³è¦è®©ä»çæ°æ®è¯»åæ­£å¸¸ï¼éå¸¸åæ³å°±æ¯ï¼æä»¬æå»ºä¸ä¸ªåæ­¥ç¶ææºï¼å³æ¨¡æGIFè§£ç å¨è¯»åæ°æ®çè¿ç¨åå¥æ°æ®ï¼æå»ºä¸ä¸ªå­å¸ï¼ä»¥ç¸åçæ åå¢å åå¥ä½å®½ï¼ä»èè®©è§£ç å¨è¯»åæ¶è½æ­£ç¡®è¯»åãä½æ¯è¿ä¸è¿ç¨ççå°±ååç¹çï¼è½ä¸è½ç¨ä¸ä¸ªç®åçæ¹æ³æ¥è®©è§£ç å¨æ­£å¸¸è¯»åæ°æ®å¢ï¼</p>
<h2 id="3è§£å³æ¹æ¡">3.è§£å³æ¹æ¡</h2>
<p>GIF åè®®ä¸­æä¸ä¸ªç¹æ®çæä»¤å« <strong>Clear Codeï¼æ¸é¤ä»£ç ï¼å¼ä¸º256ï¼</strong>ãå®çä½ç¨æ¯åè¯è§£ç å¨ï¼âå¿ï¼æä¹åçå­å¸é½å¿äºå§ï¼æä»¬éæ°å¼å§ãâ</p>
<p>å©ç¨è¿ä¸ç¹ï¼æä»¬å¯ä»¥å¨ä»£ç ä¸­éç¨äºä¸ç§å·é¸¡çç­ç¥ï¼</p>
<ol>
<li>æä»¬ä¸å°è¯å»å¯»æ¾å¤æçéå¤æ¨¡å¼ã</li>
<li>æä»¬æ¯åå¥ä¸å°æ®µåç´ ï¼ä¾å¦ 125 ä¸ªï¼ï¼å°±ç«å»åéä¸ä¸ª <strong>Clear Code</strong>ã</li>
<li>è¿å¼ºå¶è®© LZW å­å¸å§ç»å¤äºâåå§ç¶æâãå¨åå§ç¶æä¸ï¼LZW çç¼ç å°±ç­åäºç´æ¥è¾åºåç´ çé¢è²ç´¢å¼å¼ã</li>
</ol>
<p>ç°å¨ï¼è®©æä»¬æ¥å®ç°ä»</p>
<h2 id="4-æå»º3dç«æ¹ä½">4. æå»º3dç«æ¹ä½</h2>
<p>å¨ä¸ä¸ç¯å³äº 3D æ¬è´¨çæç« ä¸­ï¼æä»¬æ¨å¯¼åºäºä¸¤ä¸ªæ ¸å¿å¬å¼ãå¨è¿ä¸ªç¨åºä¸­ï¼æä»¬å°ç´æ¥æå®ä»¬è½¬åä¸º C++ ä»£ç ã</p>
<h3 id="æè½¬å¬å¼">æè½¬å¬å¼</h3>
<p>ä¸ºäºè®©ç«æ¹ä½å¨èµ·æ¥ï¼æä»¬éè¦æ¯ä¸å¸§é½æ¹åé¡¶ç¹ç <span class="math inline">\((x, y, z)\)</span> åæ ãè¿éä½¿ç¨æè½¬ç©éµçç®åçï¼</p>
<pre><code class="language-cpp">Point3D rotate(Point3D p, float angle) {
    // ç» Y è½´æè½¬
    float nx = p.x * cos(angle) - p.z * sin(angle);
    float nz = p.x * sin(angle) + p.z * cos(angle);
    // ç» X è½´å¾®è°æè½¬ï¼è®©æè½¬çèµ·æ¥æ´ç«ä½
    float ny = p.y * cos(angle * 0.8f) - nz * sin(angle * 0.8f);
    nz = p.y * sin(angle * 0.8f) + nz * cos(angle * 0.8f);
    return {nx, ny, nz};
}
</code></pre>
<h3 id="æå½±å¬å¼éè§">æå½±å¬å¼ï¼éè§ï¼</h3>
<p>å¦ä½æ 3D åæ åæå±å¹ä¸çåç´ ç¹ï¼è®°å¾é£ä¸ªæ ¸å¿æ³ååï¼<strong>âè¿å¤§è¿å°ï¼æ¬è´¨å°±æ¯é¤ä»¥ Zâã</strong></p>
<pre><code class="language-cpp">pair&lt;int, int&gt; project(Point3D p, int W, int H) {
    float fov = 160.0f;        // è§éç³»æ°
    float viewer_dist = 4.0f;  // ç¼çç¦»ç©ä½çè·ç¦»
    // æ ¸å¿é»è¾ï¼é¤ä»¥ (z + dist)
    float factor = fov / (viewer_dist + p.z);
    return { (int)(p.x * factor + W / 2), (int)(p.y * factor + H / 2) };
}
</code></pre>
<p>æäºè¿ä¸¤ä¸ªå½æ°ï¼æä»¬å°±è½å¨åå­éçä¸ä¸ªäºç»´æ°ç»ï¼<code>vector&lt;u8&gt; pixels</code>ï¼ä¸ç»çº¿äºã</p>
<h3 id="æå-gif-ç¼ç å¨">æå GIF ç¼ç å¨</h3>
<p>æä»¬å®ç°äºä¸ä¸ªæç®çç¼ç å¨ï¼<code>struct GifBitStream</code>ï¼ãå®çå·¥ä½æ¯æåç´ ç¹çé¢è²ç´¢å¼ï¼0æ1ï¼æåæåé¿çäºè¿å¶ç æµã</p>
<pre><code class="language-cpp">// GIF çæ°æ®å­å¨ä¸ä»æ¯å­èï¼è¿éè¦å¤çâä½æä½â
// æ¯å¦åå¥ä¸ä¸ª 9-bit çä»£ç ï¼å¯è½è·¨è¶ä¸¤ä¸ªå­è
struct GifBitStream {
    vector&lt;u8&gt; byteData;
    u32 bitBuffer = 0;
    int bitCount = 0;

    void writeCode(u32 code, int size) {
        // å°æ°æ®ç§»ä½å¹¶å­å¥ç¼å²åº...
        // åå¤8ä½å°±åå¥ byteData
    }
    // ...
};
</code></pre>
<h3 id="ç¹å«è¯´æç»è¿lzwçé®é¢">ç¹å«è¯´æï¼ç»è¿LZWçé®é¢</h3>
<p>çæçGIFæ²¡æåç¼©ï¼ä½ç§¯è¾ä¸ºå¤§</p>
<h2 id="4-å®æ´ä»£ç ">4. å®æ´ä»£ç </h2>
<p>ä¸é¢æ¯å®æ´ç C++ ä»£ç ï¼</p>
<ol>
<li><strong>è®¡ç®</strong>ï¼æè½¬ 3D ç¹ -&gt; æå½±æ 2D ç¹ã</li>
<li><strong>ç»å¾</strong>ï¼å¨åå­çé»æ¿ä¸ç»çº¿ï¼Bresenham ç´çº¿ç®æ³ï¼ã</li>
<li><strong>ç¼ç </strong>ï¼å°åå­çé»æ¿æç§ GIF åè®®åç¼©å¹¶åå¥æä»¶ã</li>
</ol>
<p><em>(ä»£ç è¾é¿ï¼å»ºè®®ç´æ¥å¤å¶ç¼è¯è¿è¡ï¼æåçæçå¿«æ)</em></p>
<pre><code class="language-cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
#define u8 uint8_t
#define u16 uint16_t
#define u32 uint32_t
struct Point3D { 
    float x, y, z; 
};
struct Edge { 
    int u, v; 
};
Point3D rotate(Point3D p, float angle) {
    float nx = p.x * cos(angle) - p.z * sin(angle);
    float nz = p.x * sin(angle) + p.z * cos(angle);
    float ny = p.y * cos(angle * 0.8f) - nz * sin(angle * 0.8f);
    nz = p.y * sin(angle * 0.8f) + nz * cos(angle * 0.8f);
    return {nx, ny, nz};
}
pair&lt;int, int&gt; project(Point3D p, int W, int H) {
    float fov = 160.0f; 
    float viewer_dist = 4.0f;
    float factor = fov / (viewer_dist + p.z);
    return { (int)(p.x * factor + W / 2), (int)(p.y * factor + H / 2) };
}

inline void drawLine(vector&lt;u8&gt;&amp; buffer, int W, int H, int x0, int y0, int x1, int y1) {
    int dx = abs(x1 - x0), sx = x0 &lt; x1 ? 1 : -1;
    int dy = -abs(y1 - y0), sy = y0 &lt; y1 ? 1 : -1;
    int err = dx + dy;
    while (true) {
        if (x0 &gt;= 0 &amp;&amp; x0 &lt; W &amp;&amp; y0 &gt;= 0 &amp;&amp; y0 &lt; H) buffer[y0 * W + x0] = 1;
        if (x0 == x1 &amp;&amp; y0 == y1) break;
        int e2 = 2 * err;
        if (e2 &gt;= dy) { err += dy; x0 += sx; }
        if (e2 &lt;= dx) { err += dx; y0 += sy; }
    }
}
// --- GIF äºè¿å¶åè®®é¨å ---
struct GifBitStream {
    vector&lt;u8&gt; byteData;
    u32 bitBuffer = 0;
    int bitCount = 0;

    // åå¥æå®ä½å®½çä»£ç 
    inline void writeCode(u32 code, int size) {
        bitBuffer |= (code &lt;&lt; bitCount);
        bitCount += size;
        while (bitCount &gt;= 8) {
            byteData.push_back(bitBuffer &amp; 0xFF);
            bitBuffer &gt;&gt;= 8;
            bitCount -= 8;
        }
    }
    inline void flush(ofstream&amp; f) {
        if (bitCount &gt; 0) byteData.push_back(bitBuffer &amp; 0xFF);
        // GIF è§å®ï¼æ°æ®å¿é¡»åææ¯åæå¤§ 255 å­èçå°å
        for (size_t i = 0; i &lt; byteData.size(); i += 255) {
            u8 blockSize = (u8)min((size_t)255, byteData.size() - i);
            f.put(blockSize);
            f.write((char*)&amp;byteData[i], blockSize);
        }
        f.put(0); // åç»æ
    }
};
inline void writeWord(ofstream&amp; f, u16 v) { 
    f.put(v &amp; 0xFF); 
    f.put((v &gt;&gt; 8) &amp; 0xFF); 
}
inline void writeGifFrame(ofstream&amp; f, const vector&lt;u8&gt;&amp; pixels, int W, int H) {
    // 1. å¾å½¢æ§å¶æ©å± (å¸§é´é)
    f.put(0x21); 
    f.put(0xF9); 
    f.put(0x04);
    f.put(0x09);       // å±æ§ï¼è¿åèæ¯ï¼ä¸ä½¿ç¨éæ
    writeWord(f, 4);   // å»¶è¿ 40ms (1/25 FPS)
    f.put(0); 
    f.put(0);

    // 2. å¾åæè¿°ç¬¦
    f.put(0x2C);

    // åç§»
    writeWord(f, 0); 
    writeWord(f, 0); 

    // å®½é«
    writeWord(f, W); 
    writeWord(f, H); 
    f.put(0x00);

    // 3. æ°æ®
    f.put(0x08); // 8ä½è²
    GifBitStream stream;

    const int ClearCode = 256; //æ¸ç©ºæä»¤
    const int EOICode = 257;
    stream.writeCode(ClearCode, 9); // æ¸ç©ºè§£ç å¨å­å¸
    int pixCount = 0;
    for (u8 p : pixels) {
        stream.writeCode(p, 9);
        pixCount++;
        //æ¯ 125 ä¸ªåç´ éç½®ä¸æ¬¡å­å¸ï¼ä¿è¯ä½å®½ä¸åï¼ä¸ä¼æåè¯»åå°ä¸ä¸ä¸ªå­è
        if (pixCount == 125) {
            stream.writeCode(ClearCode, 9); 
            pixCount = 0;
        }
    }
    stream.writeCode(EOICode, 9); // ç»æ
    stream.flush(f);
}
signed main(int argc,char* argv[]){
    const int W = 200, H = 200;
    ofstream f("cube_perfect.gif", ios::binary); //ä»¥äºè¿å¶æ¹å¼åå¥GIFæä»¶

    // [Header] 
    f &lt;&lt; "GIF89a";//89a æ å

    // [Logical Screen Descriptor]
    writeWord(f, W); writeWord(f, H);
    f.put(0xF7); // å¼å¯å¨å±è°è²æ¿ (256è²)
    f.put(0); 
    f.put(0);

    // [Global Color Table]å¨å±è°è²æ¿

    // 0: èæ¯é»
    f.put(0); 
    f.put(0); 
    f.put(0);    

    // 1: æå®¢ç»¿
    f.put(0); 
    f.put(255); 
    f.put(0);     

    //åªç¨å°ä¸¤ç§é¢è²ï¼å¶ä½å¡«åé»è²
    for(int i = 2; i &lt; 256; i++){ 
        f.put(0); f.put(0); f.put(0); 
    }

    // [Netscape Loop] å¾ªç¯å¨ç»æ©å±
    f.put(0x21); // Netscapeåæ è¯
    f.put(0xFF); // æ©å±ç±»åæ è¯
    f.put(0x0B); // ä¿¡æ¯é¿åº¦
    f &lt;&lt; "NETSCAPE2.0"; //åºç¨ç¨åºä¿¡æ¯
    f.put(0x03); // æ°æ®é¿åº¦ï¼å°ç»æç¬¦å
    f.put(0x01); //ç´¢å¼
    writeWord(f, 0);  //æ éå¾ªç¯ï¼ä¸åæ­¢
    f.put(0); //ç»æç¬¦

    // 3D ç«æ¹ä½ç¹æ°æ®
    vector&lt;Point3D&gt; verts = {
        {-1,-1,1}, {1,-1,1}, {1,1,1}, {-1,1,1},
        {-1,-1,-1}, {1,-1,-1}, {1,1,-1}, {-1,1,-1}
    };
    vector&lt;Edge&gt; edges = {
        {0,1},{1,2},{2,3},{3,0}, {4,5},{5,6},{6,7},{7,4}, {0,4},{1,5},{2,6},{3,7}
    };

    cout &lt;&lt; "Encoding 3D Cube to GIF..." &lt;&lt; endl;
    for (int i = 0; i &lt; 60; i++) { // 60å¸§å¨ç»
        vector&lt;u8&gt; pixels(W * H, 0); // é»è²èæ¯
        float angle = i * 0.12f; // æ¯1/60sæè½¬è§åº¦

        vector&lt;pair&lt;int, int&gt;&gt; p2d; 
        for (auto v : verts) 
            p2d.push_back(project(rotate(v, angle), W, H)); // 3D-&gt;2Dæå½±
        for (auto e : edges) 
            drawLine(pixels, W, H, p2d[e.u].first, p2d[e.u].second, p2d[e.v].first, p2d[e.v].second); // ç»è¾¹

        writeGifFrame(f, pixels, W, H); // åå¥å¸§æ°æ®
        cout &lt;&lt; ".";
    }

    f.put(0x3B); // æä»¶ç»æç¬¦
    f.close(); //å³é­

    cout &lt;&lt; "\nSuccess! Open 'cube_perfect.gif' in Chrome/Edge." &lt;&lt; endl;
    return 0;
}
</code></pre>
<p>è¿è¡è¿æ®µä»£ç ï¼ä½ ä¼æè®¶å°åç°ç®å½ä¸å¤äºä¸ä¸ª <code>cube_perfect.gif</code>ãç¨æµè§å¨æå¼å®ï¼ä¸ä¸ªç»¿è²ççº¿æ¡ç«æ¹ä½æ­£å¨é»è²çèæ¯ä¸­æµçå°æè½¬ã</p>
<h2 id="5-æéè®¤ç¥çä»»ç£äºè">5. æéè®¤ç¥çâä»»ç£äºèâ</h2>
<p>åé¡¾è¿ä¸ªç³»åçä¸ç¯æç« ï¼æä»¬å¶å®åªåäºä¸ä»¶äºï¼<strong>ç¥é­ï¼Demystificationï¼</strong>ã</p>
<ol>
<li><strong>WAV ç¯</strong>ï¼æä»¬åç°å£°é³æä»¶åªæ¯è®°å½æ¯å¹çäºè¿å¶éåï¼æ²¡æä»»ä½é­æ³ã</li>
<li><strong>3D ç¯</strong>ï¼æä»¬åç°é£äºé·ç«ç 3D æ¸¸æï¼åºå±åªæ¯åä¸­å ä½çâç¸ä¼¼ä¸è§å½¢âè¿ç®ã</li>
<li><strong>GIF ç¯ï¼æ¬æï¼</strong>ï¼æä»¬å°æ°å­¦è¿ç®çç»æï¼3Dï¼ï¼æç§æä»¶åè®®ï¼äºè¿å¶ï¼ï¼å°è£æäºäººç±»å¯è§çå¨ç»ã</li>
</ol>
<p>è¿å°±æ¯è®¡ç®æºç§å­¦æè¿·äººçå°æ¹ãæ è®ºæ¯çæä¸æ®µ 440Hz çæ­£å¼¦æ³¢ï¼è¿æ¯æ¸²æãé»ç¥è¯ï¼æç©ºãä¸­å¤æçåºæ¯ï¼å¶æ¬è´¨é½æ¯ä¸æ ·çï¼</p>
<p><strong>Inputï¼æ°æ®ï¼ + Rulesï¼ç®æ³/æ ¼å¼ï¼ = Outputï¼æ°å­ä¸çï¼</strong></p>
<p>å½ä½ è½å¤å¾æååºä¸ä¸ª WAVï¼å¾ææ¨å¯¼åºä¸ä¸ª 3D æå½±ï¼å¾ææ¼è£åºä¸ä¸ª GIF æ¶ï¼ä½ å°±ä¸ååªæ¯ä¸ä¸ª API çè°ç¨èï¼ä½ å¼å§æä¸ºä¸ä¸ªçæ­£çåé èãä»£ç çèåä¸ï¼åªè¦ä½ ææ¡äºè§åï¼ä½ å°±æ¯ä¸å¸ã</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-25 15:39">2026-01-25 15:39</span>&nbsp;
<a href="https://www.cnblogs.com/reasa">reasa</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19529889);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19529889', targetLink: 'https://www.cnblogs.com/reasa/p/19529889', title: 'ä»0æå»º 3D GIFå¨ç»ï¼çæ¸è®¡ç®æºè¿è¡æºå¶' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ãAzure APIMãAPIMçèªå»ºç½å³å¦ä½è§£å³èªç­¾åè¯ä¹¦çåä¿¡ä»»é®é¢å¢ï¼(ä¸æåæ¹æ¡çåæ) ]]></title>
    <link>https://www.cnblogs.com/lulight/p/19529821</link>
    <guid>2ca1ee9632d84346bcade33db289b768</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/lulight/p/19529821" title="åå¸äº 2026-01-25 15:26">
    <span role="heading" aria-level="2">ãAzure APIMãAPIMçèªå»ºç½å³å¦ä½è§£å³èªç­¾åè¯ä¹¦çåä¿¡ä»»é®é¢å¢ï¼(ä¸æåæ¹æ¡çåæ)</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h1>é®é¢æè¿°</h1>
<p>å¨ååçåç¯åæ</p>
<p>1ï¼<a id="cb_post_title_url" class="postTitle2 vertical-middle" title="åå¸äº 2026-01-23 19:12" href="https://www.cnblogs.com/lulight/p/19523829" target="_blank">ãAzure APIMãAPIMçèªå»ºç½å³å¦ä½è§£å³èªç­¾åè¯ä¹¦çåä¿¡ä»»é®é¢å¢ï¼(æ¹æ¡ä¸)</a>&nbsp;</p>
<p>2ï¼<a id="cb_post_title_url" class="postTitle2 vertical-middle" title="åå¸äº 2026-01-21 21:19" href="https://www.cnblogs.com/lulight/p/19514101" target="_blank">ãAzure APIMãAPIMçèªå»ºç½å³å¦ä½è§£å³èªç­¾åè¯ä¹¦çåä¿¡ä»»é®é¢å¢ï¼(æ¹æ¡äº)</a>&nbsp;</p>
<p>3ï¼<a id="cb_post_title_url" class="postTitle2 vertical-middle" title="åå¸äº 2026-01-19 21:09" href="https://www.cnblogs.com/lulight/p/19503730" target="_blank">ãAzure APIMãAPIMçèªå»ºç½å³å¦ä½è§£å³èªç­¾åè¯ä¹¦çåä¿¡ä»»é®é¢å¢ï¼(æ¹æ¡ä¸)&nbsp;</a>&nbsp;</p>
<p>4ï¼<a id="cb_post_title_url" class="postTitle2 vertical-middle" title="åå¸äº 2026-01-17 11:54" href="https://www.cnblogs.com/lulight/p/19495544" target="_blank">ãAzure APIMãå¦ä½è§£å³åç«¯APIæå¡éç½®èªç­¾åè¯ä¹¦æ¶APIMè¯·æ±æ¥é500ï¼Error occured while calling backend service</a>&nbsp;</p>
<p>5ï¼<a id="cb_post_title_url" class="postTitle2 vertical-middle" title="åå¸äº 2026-01-13 21:08" href="https://www.cnblogs.com/lulight/p/19479238" target="_blank">ãAzure ç¯å¢ãå¨Windowsç¯å¢ä¸­ä½¿ç¨OpenSSLçæèªç­¾åè¯ä¹¦é¾æ­¥éª¤åäº«</a></p>
<p>æä»¬åå«ä»ç»äºä½¿ç¨OpenSSLçæèªç­¾åè¯ä¹¦ï¼ç¶åè§£å³APIMæå¡å¯¹èªç­¾åè¯ä¹¦çä¿¡ä»»é®é¢ãä¸è®ºæ¯APIMæç®¡çç½å³ï¼è¿æ¯èªå»ºçç½å³é½å¯ä»¥éè¿å®è£è¯ä¹¦åä½¿å¾è¯·æ±åä¿¡ä»»ï¼éè¿éç½®APIè·³è¿è¯ä¹¦éªè¯ç¯èã</p>
<p>å¨æ¹æ¡ä¸ä¸­ï¼å¼å§ä»èªå»ºç½å³æ¬èº«AKS PODâæ¹é¢å¥æï¼éè¿éç½® SSL_CERT_FILE ç¯å¢åéï¼æ¥å®è£èªç­¾åè¯ä¹¦ ï¼æ ¹è¯ä¹¦åä¸­é´è¯ä¹¦ï¼å°PODä¸­è§£å³é®é¢ã</p>
<p>é¤äºä»¥ä¸ä¸ç§æ¹æ¡çæåµä¸ï¼å¨AKSéç¾¤çå®æ¹ææ¡£ä¸­ï¼è¯´å¯ä»¥ç´æ¥æ´æ°éç¾¤ï¼æèªå®ä¹è¯ä¹¦é¢åæºæï¼CAï¼åèç¹çä¿¡ä»»å­å¨æ·»å å¤è¾¾ 10 ä¸ª base64 ç¼ç çè¯ä¹¦ã</p>
<p><img alt="image" width="666" height="340" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2127802/202601/2127802-20260125145653511-298923131.png" class="lazyload"></p>
<p>æä»¥ï¼åºäºè¿ä¸ªææ¡£ï¼æ¬æå°è¯äºç¬¬åç§æ¹æ¡ï¼ä½¿ç¨&nbsp;az aks update&nbsp;&nbsp;--custom-ca-trust-certificates è¯ä¹¦å½ä»¤</p>
<p>&nbsp;</p>
<h1>æ¹æ¡æ­¥éª¤</h1>
<h2>åå¤æ­¥éª¤ï¼åå¤å¥½ä¸­é´è¯ä¹¦åæ ¹è¯ä¹¦åå¹¶ä¸èµ·ç .crt åå®¹</h2>
<p>å¯¼åºæ¹æ³ï¼éè¿æµè§å¨å¯¼åºä¸­é´è¯ä¹¦+æ ¹è¯ä¹¦ç crt æä»¶ï¼å¶åå®¹æ¯ Base64 ç¼ç </p>
<p><img alt="image" width="666" height="289" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2127802/202601/2127802-20260123183930234-1674758377.png" class="lazyload"></p>
<p>&nbsp;</p>
<h2>ç¬¬ä¸æ­¥ï¼æåå¤å¥½çè¯ä¹¦ä¼ éå°AKSéç¾¤</h2>
<p>å akséç¾¤å·²ç»åå»ºå¥½ï¼æä»¥ä½¿ç¨ az aks update æä»¤</p>
<blockquote>
<pre><code class="code-line" dir="auto" data-line="1074">az aks update \
    --resource-group &lt;resource-group-name&gt; \
    --name &lt;cluster-name&gt; \
    --custom-ca-trust-certificates &lt;path-to-certificate-file&gt;</code></pre>
</blockquote>
<p>æ§è¡æªå¾</p>
<p><img alt="image" width="666" height="285" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2127802/202601/2127802-20260125150434729-587931896.png" class="lazyload"></p>
<h2>ç¬¬äºæ­¥ï¼éªè¯èªç­¾åCAè¯ä¹¦æ¯å¦å¨èç¹ä¸­æ­£å¸¸å·¥ä½</h2>
<div>
<div>1ï¼ä½¿ç¨&nbsp;kubectl get nodes ï¼ååºèç¹åç§°</div>
<div>2ï¼è¿å¥èç¹debugæ¨¡å¼ï¼ä½¿ç¨&nbsp;kubectl debug node/&lt;èç¹å&gt; -it --image=mcr.azk8s.cn/aks/fundamental/base-ubuntu:v0.0.11ï¼ å¦ï¼kubectl debug node/<em>aks-agentpool-20066971-vmss00000j</em> -it --image=mcr.azk8s.cn/aks/fundamental/base-ubuntu:v0.0.11</div>
<div>3ï¼ä½¿ç¨ chroot /host å½ä»¤ï¼ææä½ç®å½ä»å½åå®¹å¨ç¯å¢ åæ¢å° èç¹æä½ç¯å¢</div>
<div>4ï¼å¯¹æ¯è®¿é®ä¸¤ä¸ªä¸åèªç­¾åCAè¯ä¹¦çURL</div>
<div>&nbsp;</div>
<div>æä½ç»ææªå¾ï¼</div>
<div>
<p><img alt="image" width="666" height="256" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2127802/202601/2127802-20260125151338074-221272272.png" class="lazyload"></p>
<p>&nbsp;</p>
</div>
<h2>ç¬¬ä¸æ­¥ï¼è®¿é®APIMçèªå»ºç½å³è¯·æ±ï¼èªç­¾åè¯ä¹¦ä¾æ§ä¸è¢«ä¿¡ä»»ã</h2>
<p>&nbsp;</p>
<p><img alt="image" width="666" height="271" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2127802/202601/2127802-20260125151539060-1411823637.png" class="lazyload"></p>
<p>ä¸ºä»ä¹å¢ï¼æèªç­¾åçæ ¹è¯ä¹¦ï¼ä¸­é´è¯ä¹¦é½å®è£å°AKSéç¾¤ä¸­äºï¼ä¸ºä½ä½¿ç¨debugæ¨¡å¼å°±å¯ä»¥ä¿¡ä»»è¿ä¸ªèªç­¾åè¯ä¹¦ï¼è APIM Self-hosted gateway podå´ä¸å¯ä»¥å¢ï¼</p>
</div>
<h1>çé®è§£ç­</h1>
<p>Debug pod ä¹æä»¥è½ä¿¡ä»»ï¼æ¯å ä¸ºå®ç¨çæ¯éç¨ Ubuntu åºç¡éåï¼èµ°çæ¯ç³»ç» CA bundleï¼</p>
<p>APIM Selfâhosted Gateway ç¨çæ¯å¾®è½¯å°è£çç½å³å®¹å¨ + .NET TLS éªè¯è·¯å¾ï¼å®å¨ä¸ç node ç CAã</p>
<p>è¿ä¸ç¹å¨ AKS å®æ¹ææ¡£ä¸­æ¯æç¡®åæ¸æ¥çï¼âCertificates added to the AKS node trust store arenât available to containers running in pods.â&nbsp;</p>
<p>AKS Node å®è£ CAï¼åªå¯¹ Node çæï¼å¯¹ Pod æ æã è¿ä¸ç¹ï¼å¨æç« å¼å¤´çå®æ¹ææ¡£æªå¾ä¸­ï¼ä¹ç¹å«æéãåªæ¯ï¼æå¼å§æ²¡ææ­£ç¡®çè§£è¿å¥è¯çæä¹ï¼</p>
<p><img alt="image" width="666" height="334" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2127802/202601/2127802-20260125152234613-555012911.png" class="lazyload"></p>
<p>&nbsp;</p>
<p>æä»¥ï¼å¦æè¦è§£å³APIM ä¸­èªç­¾åCAè¯ä¹¦çä¿¡ä»»é®é¢ãç®åéªè¯ä¸æ¥ï¼åªæä¸ç§æ¹å¼ï¼</p>
<p>1ï¼<a id="cb_post_title_url" class="postTitle2 vertical-middle" title="åå¸äº 2026-01-19 21:09" href="https://www.cnblogs.com/lulight/p/19503730" target="_blank">ãAzure APIMãAPIMçèªå»ºç½å³å¦ä½è§£å³èªç­¾åè¯ä¹¦çåä¿¡ä»»é®é¢å¢ï¼(æ¹æ¡ä¸)&nbsp;</a>&nbsp;</p>
<p>2ï¼<a id="cb_post_title_url" class="postTitle2 vertical-middle" title="åå¸äº 2026-01-21 21:19" href="https://www.cnblogs.com/lulight/p/19514101" target="_blank">ãAzure APIMãAPIMçèªå»ºç½å³å¦ä½è§£å³èªç­¾åè¯ä¹¦çåä¿¡ä»»é®é¢å¢ï¼(æ¹æ¡äº)</a>&nbsp;</p>
<p>3ï¼<a id="cb_post_title_url" class="postTitle2 vertical-middle" title="åå¸äº 2026-01-23 19:12" href="https://www.cnblogs.com/lulight/p/19523829" target="_blank">ãAzure APIMãAPIMçèªå»ºç½å³å¦ä½è§£å³èªç­¾åè¯ä¹¦çåä¿¡ä»»é®é¢å¢ï¼(æ¹æ¡ä¸)</a>&nbsp;</p>
<p>&nbsp;</p>
<p><em>[å®]&nbsp;</em></p>
<p>&nbsp;</p>
<h1>åèèµæ</h1>
<p id="use-custom-certificate-authorities-cas-in-azure-kubernetes-service-aks">å¨ Azure Kubernetes æå¡ï¼AKSï¼ä¸­ä½¿ç¨èªå®ä¹è¯ä¹¦é¢åæºæï¼CAï¼ ï¼<a href="https://docs.azure.cn/zh-cn/aks/custom-certificate-authority" target="_blank" rel="noopener nofollow">https://docs.azure.cn/zh-cn/aks/custom-certificate-authority</a></p>
<p>&nbsp;</p>
</div>
<div id="MySignature" role="contentinfo">
    <div style="background: #1c5f55;height: 36px;width: 618px;padding: 14px 5px 0px 3px;">
  <p style="
    font-weight: bold;
    color: white;
">å½å¨å¤æçç¯å¢ä¸­é¢ä¸´é®é¢ï¼æ ¼ç©ä¹ééï¼æµèéä¹å¾æ¸ï¼å®ä»¥å¨ä¹å¾çã äºä¸­ï¼æ°æ¯å¦æ­¤!</p>
</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-25 15:26">2026-01-25 15:26</span>&nbsp;
<a href="https://www.cnblogs.com/lulight">ç¼ç èå¢å¸</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19529821);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19529821', targetLink: 'https://www.cnblogs.com/lulight/p/19529821', title: 'ãAzure APIMãAPIMçèªå»ºç½å³å¦ä½è§£å³èªç­¾åè¯ä¹¦çåä¿¡ä»»é®é¢å¢ï¼(ä¸æåæ¹æ¡çåæ)' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ å¦ä½ä½¿ç¨ GitHub Actions + image-syncer å®ç° Docker Hub å° Azure ACR çèªå¨åéååæ­¥ ]]></title>
    <link>https://www.cnblogs.com/newbe36524/p/19529772</link>
    <guid>e1861bb196e9ad706269438078d4cc13</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/newbe36524/p/19529772" title="åå¸äº 2026-01-25 15:12">
    <span role="heading" aria-level="2">å¦ä½ä½¿ç¨ GitHub Actions + image-syncer å®ç° Docker Hub å° Azure ACR çèªå¨åéååæ­¥</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="å®ç°-docker-hub-å°-azure-acr-çèªå¨åéååæ­¥">å®ç° Docker Hub å° Azure ACR çèªå¨åéååæ­¥</h1>
<blockquote>
<p>æ¬æä»ç»äºå¦ä½ä½¿ç¨ GitHub Actions å image-syncer å·¥å·ï¼å®ç° Docker Hub éåå° Azure Container Registry çèªå¨ååæ­¥ï¼è§£å³äºå½ååé¨å Azure åºåè®¿é® Docker Hub éåº¦æ¢çé®é¢ï¼æåäºéåçå¯ç¨æ§å Azure ç¯å¢çé¨ç½²æçã</p>
</blockquote>

<h2 id="èæ¯å¼è¨">èæ¯/å¼è¨</h2>
<p>HagiCode é¡¹ç®ä½¿ç¨ Docker éåä½ä¸ºæ ¸å¿è¿è¡æ¶ç»ä»¶ï¼ä¸»è¦éåæç®¡å¨ Docker Hubãéçé¡¹ç®åå±å Azure ç¯å¢é¨ç½²éæ±çå¢å ï¼æä»¬éå°äºä»¥ä¸çç¹ï¼</p>
<ul>
<li>éåæåéåº¦æ¢ï¼Docker Hub å¨å½ååé¨å Azure åºåè®¿é®åé</li>
<li>ä¾èµåä¸éåæºå­å¨åç¹æéé£é©</li>
<li>Azure ç¯å¢ä¸ä½¿ç¨ Azure Container Registry è½è·å¾æ´å¥½çç½ç»æ§è½åéæä½éª</li>
</ul>
<p>ä¸ºè§£å³è¿äºé®é¢ï¼æä»¬éè¦å»ºç«ä¸ä¸ªèªå¨åçéååæ­¥æºå¶ï¼å° Docker Hub çéåå®æåæ­¥å° Azure ACRï¼ç¡®ä¿ç¨æ·è½å¤å¨ Azure ç¯å¢ä¸­è·å¾æ´å¿«çéåæåéåº¦åæ´é«çå¯ç¨æ§ã</p>
<h2 id="å³äº-hagicode">å³äº HagiCode</h2>
<p>æä»¬æ­£å¨å¼å HagiCodeââä¸æ¬¾ AI é©±å¨çä»£ç æºè½å©æï¼è®©å¼åä½éªåå¾æ´æºè½ãæ´ä¾¿æ·ãæ´æè¶£ã</p>
<p>æºè½ââAI å¨ç¨è¾å©ï¼ä»æ³æ³å°ä»£ç ï¼è®©ç¼ç æçæåæ°åãä¾¿æ·ââå¤çº¿ç¨å¹¶åæä½ï¼ååå©ç¨èµæºï¼å¼åæµç¨é¡ºçæ é»ãæè¶£ââæ¸¸æåæºå¶åæå°±ç³»ç»ï¼è®©ç¼ç ä¸åæ¯ç¥ï¼åæ»¡æå°±æã</p>
<p>é¡¹ç®æ­£å¨å¿«éè¿­ä»£ä¸­ï¼å¦æä½ å¯¹ææ¯åä½ãç¥è¯ç®¡çæè AI è¾å©å¼åæå´è¶£ï¼æ¬¢è¿æ¥ GitHub ççã</p>
<h2 id="ææ¯æ¹æ¡å¯¹æ¯">ææ¯æ¹æ¡å¯¹æ¯</h2>
<p>å¨å¶å®è§£å³æ¹æ¡æ¶ï¼æä»¬å¯¹æ¯äºå¤ç§ææ¯æ¹æ¡ï¼</p>
<h3 id="1-image-synceræç»éæ©">1. image-syncerï¼æç»éæ©ï¼</h3>
<ul>
<li>å¢éåæ­¥ï¼ä»åæ­¥åæ´çéåå±ï¼æ¾èåå°ç½ç»ä¼ è¾</li>
<li>æ­ç¹ç»­ä¼ ï¼ç½ç»ä¸­æ­åå¯æ¢å¤åæ­¥</li>
<li>å¹¶åæ§å¶ï¼æ¯æéç½®å¹¶åçº¿ç¨æ°ï¼æåå¤§éååæ­¥æç</li>
<li>å®åçéè¯¯å¤çï¼åç½®å¤±è´¥éè¯æºå¶ï¼é»è®¤ 3 æ¬¡ï¼</li>
<li>è½»éçº§é¨ç½²ï¼åäºè¿å¶æä»¶ï¼æ ä¾èµ</li>
<li>å¤ä»åºæ¯æï¼å¼å®¹ Docker HubãAzure ACRãHarbor ç­</li>
</ul>
<h3 id="2-docker-cli">2. Docker CLI</h3>
<ul>
<li>ä¸æ¯æå¢éåæ­¥ï¼æ¯æ¬¡é½éè¦æåå®æ´çéååå®¹</li>
<li>æçè¾ä½ï¼ç½ç»ä¼ è¾éå¤§ï¼æ¶é´é¿</li>
<li>ç®åæç¨ï¼ä½¿ç¨çæç docker pull/push å½ä»¤</li>
</ul>
<h3 id="3-azure-cli">3. Azure CLI</h3>
<ul>
<li>å¤æåº¦é«ï¼éè¦éç½® Azure CLI è®¤è¯</li>
<li>åè½éå¶ï¼az acr import åè½ç¸å¯¹åä¸</li>
<li>åçéæï¼ä¸ Azure æå¡éæè¯å¥½</li>
</ul>
<h2 id="æ¶æè®¾è®¡å³ç­">æ¶æè®¾è®¡å³ç­</h2>
<h3 id="å³ç­-1åæ­¥é¢çè®¾ç½®ä¸ºæ¯æ¥-utc-0000">å³ç­ 1ï¼åæ­¥é¢çè®¾ç½®ä¸ºæ¯æ¥ UTC 00:00</h3>
<ul>
<li>å¹³è¡¡éåæ°é²åº¦åèµæºæ¶è</li>
<li>é¿å¼ä¸å¡é«å³°æï¼åå°å¯¹å¶ä»æä½çå½±å</li>
<li>Docker Hub éåéå¸¸å¨æ¯æ¥æå»ºåæ´æ°</li>
</ul>
<h3 id="å³ç­-2åæ­¥ææéåæ ç­¾">å³ç­ 2ï¼åæ­¥ææéåæ ç­¾</h3>
<ul>
<li>ä¿æä¸ Docker Hub çå®å¨ä¸è´æ§</li>
<li>ä¸ºç¨æ·æä¾çµæ´»ççæ¬éæ©</li>
<li>ç®ååæ­¥é»è¾ï¼é¿åå¤æçæ ç­¾è¿æ»¤è§å</li>
</ul>
<h3 id="å³ç­-3ä½¿ç¨-github-secrets-å­å¨è®¤è¯ä¿¡æ¯">å³ç­ 3ï¼ä½¿ç¨ GitHub Secrets å­å¨è®¤è¯ä¿¡æ¯</h3>
<ul>
<li>GitHub Actions åçæ¯æï¼å®å¨æ§é«</li>
<li>éç½®ç®åï¼æäºç®¡çåç»´æ¤</li>
<li>æ¯æä»åºçº§å«çè®¿é®æ§å¶</li>
</ul>
<h2 id="é£é©è¯ä¼°ä¸ç¼è§£">é£é©è¯ä¼°ä¸ç¼è§£</h2>
<h3 id="é£é©-1azure-acr-è®¤è¯ä¿¡æ¯æ³é²">é£é© 1ï¼Azure ACR è®¤è¯ä¿¡æ¯æ³é²</h3>
<ul>
<li>ä½¿ç¨ GitHub Secrets å å¯å­å¨</li>
<li>å®æè½®æ¢ ACR å¯ç </li>
<li>éå¶ ACR ç¨æ·æéä¸ºä»æ¨é</li>
<li>çæ§ ACR è®¿é®æ¥å¿</li>
</ul>
<h3 id="é£é©-2åæ­¥å¤±è´¥å¯¼è´éåä¸ä¸è´">é£é© 2ï¼åæ­¥å¤±è´¥å¯¼è´éåä¸ä¸è´</h3>
<ul>
<li>image-syncer åç½®å¢éåæ­¥æºå¶</li>
<li>èªå¨å¤±è´¥éè¯ï¼é»è®¤ 3 æ¬¡ï¼</li>
<li>è¯¦ç»çéè¯¯æ¥å¿åå¤±è´¥éç¥</li>
<li>æ­ç¹ç»­ä¼ åè½</li>
</ul>
<h3 id="é£é©-3èµæºæ¶èè¿å¤§">é£é© 3ï¼èµæºæ¶èè¿å¤§</h3>
<ul>
<li>å¢éåæ­¥åå°ç½ç»ä¼ è¾</li>
<li>å¯éç½®å¹¶åçº¿ç¨æ°ï¼å½åè®¾ç½®ä¸º 10ï¼</li>
<li>çæ§åæ­¥çéåæ°éåå¤§å°</li>
<li>å¨éé«å³°æ¶æ®µè¿è¡åæ­¥</li>
</ul>
<h2 id="æ ¸å¿è§£å³æ¹æ¡">æ ¸å¿è§£å³æ¹æ¡</h2>
<p>æä»¬éç¨ GitHub Actions + image-syncer çèªå¨åæ¹æ¡ï¼å®ç°ä» Docker Hub å° Azure ACR çéååæ­¥ã</p>
<h2 id="å®æ½æ­¥éª¤">å®æ½æ­¥éª¤</h2>
<h3 id="1-åå¤é¶æ®µ">1. åå¤é¶æ®µ</h3>
<ul>
<li>å¨ Azure Portal ä¸­åå»ºæç¡®è®¤ Azure Container Registry</li>
<li>åå»º ACR è®¿é®å¯é¥ï¼ç¨æ·ååå¯ç ï¼</li>
<li>ç¡®è®¤ Docker Hub éåä»åºè®¿é®æé</li>
</ul>
<h3 id="2-éç½®-github-secrets">2. éç½® GitHub Secrets</h3>
<p>å¨ GitHub ä»åºè®¾ç½®ä¸­æ·»å ä»¥ä¸ Secretsï¼</p>
<ul>
<li>AZURE_ACR_USERNAME: Azure ACR ç¨æ·å</li>
<li>AZURE_ACR_PASSWORD: Azure ACR å¯ç </li>
</ul>
<h3 id="3-åå»º-github-actions-å·¥ä½æµ">3. åå»º GitHub Actions å·¥ä½æµ</h3>
<p>å¨ .github/workflows/sync-docker-acr.yml ä¸­éç½®å·¥ä½æµï¼</p>
<ul>
<li>å®æ¶è§¦åï¼æ¯å¤© UTC 00:00</li>
<li>æå¨è§¦åï¼æ¯æ workflow_dispatch</li>
<li>é¢å¤è§¦åï¼publish åæ¯æ¨éæ¶è§¦åï¼ç¨äºå¿«éåæ­¥ï¼</li>
</ul>
<h3 id="4-å·¥ä½æµæ§è¡æµç¨">4. å·¥ä½æµæ§è¡æµç¨</h3>
<div class="mermaid">sequenceDiagram
    participant GH as GitHub Actions
    participant IS as image-syncer
    participant DH as Docker Hub
    participant ACR as Azure ACR

    Note over GH: è§¦åå·¥ä½æµ
    GH-&gt;&gt;IS: ä¸è½½å¹¶æ§è¡ image-syncer
    IS-&gt;&gt;DH: è·åéå manifest åæ ç­¾åè¡¨
    DH--&gt;&gt;IS: è¿åéååæ°æ®
    IS-&gt;&gt;ACR: è·åå·²å­å¨çéåä¿¡æ¯
    ACR--&gt;&gt;IS: è¿åç®æ éåä¿¡æ¯
    IS-&gt;&gt;IS: å¯¹æ¯å·®å¼ï¼è¯å«åæ´çéåå±
    Note over IS: å¢éåæ­¥ï¼ä»ä¼ è¾åæ´çéåå±
    IS-&gt;&gt;DH: æååæ´çéåå±
    DH--&gt;&gt;IS: è¿åéåå±åå®¹
    IS-&gt;&gt;ACR: æ¨éåæ´çéåå±å° ACR
    ACR--&gt;&gt;IS: è¿åæ¨éç»æ
    IS--&gt;&gt;GH: è¿ååæ­¥ç»è®¡ä¿¡æ¯
    GH-&gt;&gt;GH: è®°å½åæ­¥æ¥å¿å¹¶ä¸ä¼  artifact
</div><h2 id="github-actions-å·¥ä½æµå®ç°">GitHub Actions å·¥ä½æµå®ç°</h2>
<p>ä»¥ä¸æ¯å®éè¿è¡çå·¥ä½æµéç½®ï¼.github/workflows/sync-docker-acr.ymlï¼ï¼</p>
<pre><code class="language-yaml">name: Sync Docker Image to Azure ACR

on:
  schedule:
    - cron: "0 0 * * *" # æ¯å¤© UTC 00:00
  workflow_dispatch: # æå¨è§¦å
  push:
    branches: [publish]

permissions:
  contents: read

jobs:
  sync:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Download image-syncer
        run: |
          # ä¸è½½ image-syncer äºè¿å¶æä»¶
          wget https://github.com/AliyunContainerService/image-syncer/releases/download/v1.5.5/image-syncer-v1.5.5-linux-amd64.tar.gz
          tar -zxvf image-syncer-v1.5.5-linux-amd64.tar.gz
          chmod +x image-syncer

      - name: Create auth config
        run: |
          # çæè®¤è¯éç½®æä»¶ (YAML æ ¼å¼)
          cat &gt; auth.yaml &lt;&lt;EOF
          hagicode.azurecr.io:
            username: "${{ secrets.AZURE_ACR_USERNAME }}"
            password: "${{ secrets.AZURE_ACR_PASSWORD }}"
          EOF

      - name: Create images config
        run: |
          # çæéååæ­¥éç½®æä»¶ (YAML æ ¼å¼)
          cat &gt; images.yaml &lt;&lt;EOF
          docker.io/newbe36524/hagicode: hagicode.azurecr.io/hagicode
          EOF

      - name: Run image-syncer
        run: |
          # æ§è¡åæ­¥ (ä½¿ç¨æ°ç --auth å --images åæ°)
          ./image-syncer --auth=./auth.yaml --images=./images.yaml --proc=10 --retries=3

      - name: Upload logs
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: sync-logs
          path: image-syncer-*.log
          retention-days: 7
</code></pre>
<h2 id="éç½®è¯´æ">éç½®è¯´æ</h2>
<h3 id="1-è§¦åæ¡ä»¶">1. è§¦åæ¡ä»¶</h3>
<ul>
<li>å®æ¶è§¦åï¼cron: "0 0 * * *" - æ¯å¤© UTC 00:00 æ§è¡</li>
<li>æå¨è§¦åï¼workflow_dispatch - åè®¸ç¨æ·å¨ GitHub UI æå¨è¿è¡</li>
<li>æ¨éè§¦åï¼push: branches: [publish] - åå¸åæ¯æ¨éæ¶è§¦åï¼ç¨äºå¿«éåæ­¥ï¼</li>
</ul>
<h3 id="2-è®¤è¯éç½®-authyaml">2. è®¤è¯éç½® (auth.yaml)</h3>
<pre><code class="language-yaml">hagicode.azurecr.io:
  username: "${{ secrets.AZURE_ACR_USERNAME }}"
  password: "${{ secrets.AZURE_ACR_PASSWORD }}"
</code></pre>
<h3 id="3-éååæ­¥éç½®">3. éååæ­¥éç½®</h3>
<pre><code class="language-yaml">docker.io/newbe36524/hagicode: hagicode.azurecr.io/hagicode
</code></pre>
<p>æ­¤éç½®è¡¨ç¤ºå° docker.io/newbe36524/hagicode çæææ ç­¾åæ­¥å° hagicode.azurecr.io/hagicode</p>
<h3 id="4-image-syncer-åæ°">4. image-syncer åæ°</h3>
<ul>
<li>--auth=./auth.yaml: è®¤è¯éç½®æä»¶è·¯å¾</li>
<li>--images=./images.yaml: éååæ­¥éç½®æä»¶è·¯å¾</li>
<li>--proc=10: å¹¶åçº¿ç¨æ°ä¸º 10</li>
<li>--retries=3: å¤±è´¥éè¯ 3 æ¬¡</li>
</ul>
<h2 id="github-secrets-éç½®æ¸å">GitHub Secrets éç½®æ¸å</h2>
<p>å¨ GitHub ä»åºç Settings â Secrets and variables â Actions ä¸­éç½®ï¼</p>
<table>
<thead>
<tr>
<th>Secret åç§°</th>
<th>æè¿°</th>
<th>ç¤ºä¾å¼</th>
<th>è·åæ¹å¼</th>
</tr>
</thead>
<tbody>
<tr>
<td>AZURE_ACR_USERNAME</td>
<td>Azure ACR ç¨æ·å</td>
<td>hagicode</td>
<td>Azure Portal â ACR â Access keys</td>
</tr>
<tr>
<td>AZURE_ACR_PASSWORD</td>
<td>Azure ACR å¯ç </td>
<td>xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx</td>
<td>Azure Portal â ACR â Access keys â Password</td>
</tr>
</tbody>
</table>
<h2 id="ä½¿ç¨è¯´æ">ä½¿ç¨è¯´æ</h2>
<h3 id="1-æå¨è§¦ååæ­¥">1. æå¨è§¦ååæ­¥</h3>
<ol>
<li>è®¿é® GitHub ä»åºç Actions æ ç­¾é¡µ</li>
<li>éæ© Sync Docker Image to Azure ACR å·¥ä½æµ</li>
<li>ç¹å» Run workflow æé®</li>
<li>éæ©åæ¯å¹¶ç¹å» Run workflow ç¡®è®¤</li>
</ol>
<h3 id="2-æ¥çåæ­¥æ¥å¿">2. æ¥çåæ­¥æ¥å¿</h3>
<ol>
<li>å¨ Actions é¡µé¢ç¹å»å·ä½çå·¥ä½æµè¿è¡è®°å½</li>
<li>æ¥çåä¸ªæ­¥éª¤çæ§è¡æ¥å¿</li>
<li>å¨é¡µé¢åºé¨ç Artifacts åºåä¸è½½ sync-logs æä»¶</li>
</ol>
<h3 id="3-éªè¯åæ­¥ç»æ">3. éªè¯åæ­¥ç»æ</h3>
<pre><code class="language-bash"># ç»å½å° Azure ACR
az acr login --name hagicode

# ååºéååå¶æ ç­¾
az acr repository show-tags --name hagicode --repository hagicode --output table
</code></pre>
<h2 id="æ³¨æäºé¡¹åæä½³å®è·µ">æ³¨æäºé¡¹åæä½³å®è·µ</h2>
<h3 id="1-å®å¨å»ºè®®">1. å®å¨å»ºè®®</h3>
<ul>
<li>å®æè½®æ¢ Azure ACR å¯ç ï¼å»ºè®®æ¯ 90 å¤©ï¼</li>
<li>ä½¿ç¨ä¸ç¨ç ACR æå¡è´¦æ·ï¼éå¶æéä¸ºä»æ¨é</li>
<li>çæ§ ACR çè®¿é®æ¥å¿ï¼åæ¶åç°å¼å¸¸è®¿é®</li>
<li>ä¸è¦å¨æ¥å¿ä¸­è¾åºè®¤è¯ä¿¡æ¯</li>
<li>ä¸è¦å°è®¤è¯ä¿¡æ¯æäº¤å°ä»£ç ä»åº</li>
</ul>
<h3 id="2-æ§è½ä¼å">2. æ§è½ä¼å</h3>
<ul>
<li>è°æ´ --proc åæ°ï¼æ ¹æ®ç½ç»å¸¦å®½è°æ´å¹¶åæ°ï¼å»ºè®® 5-20ï¼</li>
<li>çæ§åæ­¥æ¶é´ï¼å¦æåæ­¥æ¶é´è¿é¿ï¼èèåå°å¹¶åæ°</li>
<li>å®ææ¸çæ¥å¿ï¼è®¾ç½®åçç retention-daysï¼å½åä¸º 7 å¤©ï¼</li>
</ul>
<h3 id="3-æéææ¥">3. æéææ¥</h3>
<h4 id="é®é¢-1è®¤è¯å¤±è´¥">é®é¢ 1ï¼è®¤è¯å¤±è´¥</h4>
<pre><code>Error: failed to authenticate to hagicode.azurecr.io
</code></pre>
<p>è§£å³æ¹æ¡ï¼</p>
<ol>
<li>æ£æ¥ GitHub Secrets æ¯å¦æ­£ç¡®éç½®</li>
<li>éªè¯ Azure ACR å¯ç æ¯å¦è¿æ</li>
<li>ç¡®è®¤ ACR æå¡è´¦æ·æéæ¯å¦æ­£ç¡®</li>
</ol>
<h4 id="é®é¢-2ç½ç»è¶æ¶">é®é¢ 2ï¼ç½ç»è¶æ¶</h4>
<pre><code>Error: timeout waiting for response
</code></pre>
<p>è§£å³æ¹æ¡ï¼</p>
<ol>
<li>æ£æ¥ç½ç»è¿æ¥</li>
<li>åå°å¹¶åçº¿ç¨æ°ï¼--proc åæ°ï¼</li>
<li>ç­å¾ç½ç»æ¢å¤åéæ°è§¦åå·¥ä½æµ</li>
</ol>
<h4 id="é®é¢-3éååæ­¥ä¸å®æ´">é®é¢ 3ï¼éååæ­¥ä¸å®æ´</h4>
<pre><code>Warning: some tags failed to sync
</code></pre>
<p>è§£å³æ¹æ¡ï¼</p>
<ol>
<li>æ£æ¥åæ­¥æ¥å¿ï¼è¯å«å¤±è´¥çæ ç­¾</li>
<li>æå¨è§¦åå·¥ä½æµéæ°åæ­¥</li>
<li>éªè¯ Docker Hub æºéåæ¯å¦æ­£å¸¸</li>
</ol>
<h3 id="4-çæ§ååè­¦">4. çæ§ååè­¦</h3>
<ul>
<li>å®ææ£æ¥ Actions é¡µé¢ï¼ç¡®è®¤å·¥ä½æµè¿è¡ç¶æ</li>
<li>è®¾ç½® GitHub éç¥ï¼åæ¶è·åå·¥ä½æµå¤±è´¥éç¥</li>
<li>çæ§ Azure ACR çå­å¨ä½¿ç¨æåµ</li>
<li>å®æéªè¯éåæ ç­¾ä¸è´æ§</li>
</ul>
<h2 id="å¸¸è§é®é¢åè§£å³æ¹æ¡">å¸¸è§é®é¢åè§£å³æ¹æ¡</h2>
<h3 id="q1-å¦ä½åæ­¥ç¹å®æ ç­¾èä¸æ¯æææ ç­¾">Q1: å¦ä½åæ­¥ç¹å®æ ç­¾èä¸æ¯æææ ç­¾ï¼</h3>
<p>ä¿®æ¹ images.yaml éç½®æä»¶ï¼</p>
<pre><code class="language-yaml"># ä»åæ­¥ latest å v1.0 æ ç­¾
docker.io/newbe36524/hagicode:latest: hagicode.azurecr.io/hagicode:latest
docker.io/newbe36524/hagicode:v1.0: hagicode.azurecr.io/hagicode:v1.0
</code></pre>
<h3 id="q2-å¦ä½åæ­¥å¤ä¸ªéåä»åº">Q2: å¦ä½åæ­¥å¤ä¸ªéåä»åºï¼</h3>
<p>å¨ images.yaml ä¸­æ·»å å¤è¡éç½®ï¼</p>
<pre><code class="language-yaml">docker.io/newbe36524/hagicode: hagicode.azurecr.io/hagicode
docker.io/newbe36524/another-image: hagicode.azurecr.io/another-image
</code></pre>
<h3 id="q3-åæ­¥å¤±è´¥åå¦ä½éè¯">Q3: åæ­¥å¤±è´¥åå¦ä½éè¯ï¼</h3>
<ul>
<li>èªå¨éè¯ï¼image-syncer åç½®éè¯æºå¶ï¼é»è®¤ 3 æ¬¡ï¼</li>
<li>æå¨éè¯ï¼å¨ GitHub Actions é¡µé¢ç¹å» Re-run all jobs</li>
</ul>
<h3 id="q4-å¦ä½æ¥çåæ­¥çè¯¦ç»è¿åº¦">Q4: å¦ä½æ¥çåæ­¥çè¯¦ç»è¿åº¦ï¼</h3>
<ul>
<li>å¨ Actions é¡µé¢æ¥çå®æ¶æ¥å¿</li>
<li>ä¸è½½ sync-logs artifact æ¥çå®æ´æ¥å¿æä»¶</li>
<li>æ¥å¿æä»¶åå«æ¯ä¸ªæ ç­¾çåæ­¥ç¶æåä¼ è¾éåº¦</li>
</ul>
<h3 id="q5-åæ­¥éè¦å¤é¿æ¶é´">Q5: åæ­¥éè¦å¤é¿æ¶é´ï¼</h3>
<ul>
<li>é¦æ¬¡å¨éåæ­¥ï¼æ ¹æ®éåå¤§å°ï¼éå¸¸éè¦ 10-30 åé</li>
<li>å¢éåæ­¥ï¼å¦æéååæ´å°ï¼éå¸¸ 2-5 åé</li>
<li>æ¶é´åå³äºç½ç»å¸¦å®½ãéåå¤§å°åå¹¶åè®¾ç½®</li>
</ul>
<h2 id="æ©å±åè½å»ºè®®">æ©å±åè½å»ºè®®</h2>
<h3 id="1-æ·»å åæ­¥éç¥">1. æ·»å åæ­¥éç¥</h3>
<p>å¨å·¥ä½æµä¸­æ·»å éç¥æ­¥éª¤ï¼</p>
<pre><code class="language-yaml">- name: Notify on success
  if: success()
  run: |
    echo "Docker images synced successfully to Azure ACR"
</code></pre>
<h3 id="2-å®ç°éåæ ç­¾è¿æ»¤">2. å®ç°éåæ ç­¾è¿æ»¤</h3>
<p>å¨å·¥ä½æµä¸­æ·»å æ ç­¾è¿æ»¤é»è¾ï¼</p>
<pre><code class="language-yaml">- name: Filter tags
  run: |
    # ä»åæ­¥ä»¥ v å¼å¤´çæ ç­¾
    echo "docker.io/newbe36524/hagicode:v* : hagicode.azurecr.io/hagicode:v*" &gt; images.yaml
</code></pre>
<h3 id="3-æ·»å åæ­¥ç»è®¡æ¥å">3. æ·»å åæ­¥ç»è®¡æ¥å</h3>
<pre><code class="language-yaml">- name: Generate report
  if: always()
  run: |
    echo "## Sync Report" &gt;&gt; $GITHUB_STEP_SUMMARY
    echo "- Total tags: $(grep -c 'synced' image-syncer-*.log)" &gt;&gt; $GITHUB_STEP_SUMMARY
    echo "- Sync time: ${{ steps.sync.outputs.duration }}" &gt;&gt; $GITHUB_STEP_SUMMARY
</code></pre>
<h2 id="æ»ç»">æ»ç»</h2>
<p>éè¿æ¬æä»ç»çæ¹æ³ï¼æä»¬æåå®ç°äºä» Docker Hub å° Azure ACR çèªå¨åéååæ­¥ãè¿ä¸ªæ¹æ¡å©ç¨ GitHub Actions çå®æ¶è§¦ååæå¨è§¦ååè½ï¼ç»å image-syncer çå¢éåæ­¥åéè¯¯å¤çæºå¶ï¼ç¡®ä¿äºéåçåæ¶åæ­¥åä¸è´æ§ã</p>
<p>æä»¬è¿è®¨è®ºäºå®å¨æä½³å®è·µãæ§è½ä¼åãæéææ¥ç­æ¹é¢çåå®¹ï¼å¸®å©ç¨æ·æ´å¥½å°ç®¡çåç»´æ¤è¿ä¸ªåæ­¥æºå¶ãå¸ææ¬æè½å¤ä¸ºéè¦å¨ Azure ç¯å¢ä¸­é¨ç½² Docker éåçå¼åèæä¾æä»·å¼çåèã</p>
<h2 id="åèèµæ">åèèµæ</h2>
<ul>
<li><a href="https://github.com/HagiCode-org/site" target="_blank" rel="noopener nofollow">HagiCode é¡¹ç® GitHub ä»åº</a></li>
<li><a href="https://github.com/AliyunContainerService/image-syncer" target="_blank" rel="noopener nofollow">image-syncer å®æ¹ææ¡£</a></li>
<li><a href="https://learn.microsoft.com/zh-cn/azure/container-registry/" target="_blank" rel="noopener nofollow">Azure Container Registry å®æ¹ææ¡£</a></li>
<li><a href="https://docs.github.com/zh-cn/actions" target="_blank" rel="noopener nofollow">GitHub Actions å®æ¹ææ¡£</a></li>
</ul>
<hr>
<h2 id="äºå¨å¼å¯¼">äºå¨å¼å¯¼</h2>
<p>æè°¢æ¨çéè¯»,å¦ææ¨è§å¾æ¬ææç¨,å¿«ç¹å»ä¸æ¹ç¹èµæé®ð,è®©æ´å¤çäººçå°æ¬æã</p>
<h2 id="ai-è¾å©å£°æ">AI è¾å©å£°æ</h2>
<p>æ¬åå®¹éç¨äººå·¥æºè½è¾å©åä½,ç»æ¬äººå®¡æ ¸,ç¬¦åæ¬äººè§ç¹ä¸ç«åºã</p>
<h2 id="åä¿¡æ¯">åä¿¡æ¯</h2>
<ul>
<li><strong>æ¬æä½è:</strong> <a href="https://www.newbe.pro" target="_blank" rel="noopener nofollow">newbe36524</a></li>
<li><strong>æ¬æé¾æ¥:</strong> <a href="https://hagicode-org.github.io/site/blog/2026/01/25/how-to-sync-docker-hub-to-azure-acr-with-github" target="_blank" rel="noopener nofollow">https://hagicode-org.github.io/site/blog/2026/01/25/how-to-sync-docker-hub-to-azure-acr-with-github</a></li>
<li><strong>çæå£°æ:</strong> æ¬åå®¢æææç« é¤ç¹å«å£°æå¤,åéç¨ BY-NC-SA è®¸å¯åè®®ãè½¬è½½è¯·æ³¨æåºå¤!</li>
</ul>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-25 15:12">2026-01-25 15:12</span>&nbsp;
<a href="https://www.cnblogs.com/newbe36524">Newbe36524</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19529772);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19529772', targetLink: 'https://www.cnblogs.com/newbe36524/p/19529772', title: 'å¦ä½ä½¿ç¨ GitHub Actions + image-syncer å®ç° Docker Hub å° Azure ACR çèªå¨åéååæ­¥' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ å°åæ£çPytestæµè¯èæ¬ç»ä¸æ¥å¥æµè¯å¹³å°ï¼FastAPIæ¹é æ¹æ¡è¯¦è§£ ]]></title>
    <link>https://www.cnblogs.com/lfr0123/p/19529690</link>
    <guid>d675cc1bd7a392e593acc829aca56c4f</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/lfr0123/p/19529690" title="åå¸äº 2026-01-25 14:46">
    <span role="heading" aria-level="2">å°åæ£çPytestæµè¯èæ¬ç»ä¸æ¥å¥æµè¯å¹³å°ï¼FastAPIæ¹é æ¹æ¡è¯¦è§£</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>å¨ä¸ä¸ç¯æç« <a href="https://www.cnblogs.com/lfr0123/p/19378880" target="_blank">ãPytest æµè¯ç¨ä¾èªå¨çæï¼æ¥å£èªå¨åè¿é¶å®è·µã</a>ä¸­ï¼æä»¬å·²ç»è§£å³äº<strong>âå¦ä½é«æç¼ååç»´æ¤æ¥å£èªå¨åç¨ä¾â</strong>çé®é¢ã</p>
<p>ç¶èï¼éçä¸å¡çåå±åå¢éè§æ¨¡çæ©å¤§ï¼å¾å¤å¬å¸ä¼éæ©å¼åèªå·±çæµè¯å¹³å°ï¼ä»¥å®ç°æ´é«æãæ´ç»ä¸çç®¡çã</p>
<p>ä¼ä¸æ¥å£èªå¨åéå¸¸ä¼ç»åå¦ä¸è¿ç¨ï¼</p>
<ol>
<li>åæï¼æµè¯äººåæ¬å°ç¨ Pytest åèæ¬ï¼å³èæ¬é¡¹ç®ï¼</li>
<li>ä¸­æï¼æ¥å¥ Jenkinsï¼å®æ¶è·ä¸è·</li>
<li>åæï¼å¬å¸å¼å§å»ºè®¾<strong>ç»ä¸æµè¯å¹³å°</strong></li>
</ol>
<h2 id="ä¸-ä¸ºä»ä¹éè¦å°èæ¬é¡¹ç®æ¥å¥æµè¯å¹³å°">ä¸. ä¸ºä»ä¹éè¦å°èæ¬é¡¹ç®æ¥å¥æµè¯å¹³å°</h2>
<h3 id="1-å½åé¢ä¸´çææ">1. å½åé¢ä¸´çææ</h3>
<ul>
<li><strong>ç¨ä¾å¤ç¨é¾</strong>ï¼å·²æçå¤§é Pytest æµè¯ç¨ä¾æ æ³ç´æ¥å¨å¹³å°ä¸è¿è¡ï¼éæ°ç¼åææ¬é«ã</li>
<li><strong>ç®¡çå¤æ</strong>ï¼å¤ä¸ªèæ¬é¡¹ç®åæ£ç®¡çï¼æ§è¡æçä½ãç»´æ¤å°é¾ã</li>
<li><strong>æ¥ååæ£</strong>ï¼æµè¯æ¥åæ£è½å¨åä¸ªé¡¹ç®ä¸­ï¼é¾ä»¥ç»ä¸æ¥çååæã</li>
</ul>
<p>å æ­¤ï¼éè¦èè<strong>å¨ãä¸éåãä¸ä¾µå¥ãä¸ç ´åãç°æ Pytest èæ¬é¡¹ç®çåæä¸ï¼è®©å®å·å¤âæµè¯å¹³å°å¯æ¥å¥è½åâ</strong>ã</p>
<h3 id="2-ä¸¤ç§å¯éæ¹æ¡">2. ä¸¤ç§å¯éæ¹æ¡</h3>
<p>æä»¬èèä»¥ä¸ä¸¤ç§æ¹æ¡å°èæ¬é¡¹ç®æ¥å¥æµè¯å¹³å°ï¼</p>
<ul>
<li><strong>æ¹æ¡ä¸</strong>ï¼å°èæ¬é¡¹ç®ç´æ¥éæå°æµè¯å¹³å°ç®å½ä¸­ã</li>
<li><strong>æ¹æ¡äº</strong>ï¼ä½¿ç¨ FastAPI æ¹é èæ¬é¡¹ç®ï¼æä¾æ¥å£ä¾å¹³å°è°ç¨ã</li>
</ul>
<p><strong>ä¸ºä»ä¹éæ©æ¹æ¡äºï¼</strong></p>
<ul>
<li>èæ¬é¡¹ç®ç»å¸¸éè¦ä¿®æ¹åæ´æ°ï¼è¥éæå°å¹³å°ä¸­ï¼æ¯æ¬¡ä¿®æ¹é½éè¦éæ°åå¸å¹³å°ä»£ç ï¼ç¹çä¸æåºéã</li>
<li>FastAPI è½»éãé«æ§è½ï¼éåå¿«éæå»ºRESTfulæ¥å£ï¼å®ç°èæ¬ä¸å¹³å°çè§£è¦ã</li>
</ul>
<h2 id="äº-ä½¿ç¨-fastapi-æ¡æ¶æ¹é èæ¬é¡¹ç®">äº. ä½¿ç¨ FastAPI æ¡æ¶æ¹é èæ¬é¡¹ç®</h2>
<h3 id="1-æ ¸å¿æè·¯">1. æ ¸å¿æè·¯</h3>
<p>æä»¬çç®æ æ¯ï¼<strong>ä¸æ¹å¨åæPytestèæ¬é»è¾ï¼ä»éè¿"å°è£+æ¥å£"çæ¹å¼ï¼è®©èæ¬é¡¹ç®å·å¤å¹³å°æ¥å¥è½å</strong>ã</p>
<p>å®ç°ååï¼</p>
<ol>
<li><strong>ä¸éå</strong>ï¼ä¿æåæ <code>testcases/</code>ã<code>utils/</code> ç®å½ç»æä¸å</li>
<li><strong>ä¸ä¾µå¥</strong>ï¼åæèæ¬æä»¶æ éä¿®æ¹ä»»ä½ä»£ç </li>
<li><strong>ä¸è§£è¦</strong>ï¼ä»æ°å¢APIå±ï¼ä¸æ¹ååææ§è¡é»è¾</li>
</ol>
<h3 id="2-ç®å½æ¹é ">2. ç®å½æ¹é </h3>
<p>åæèæ¬é¡¹ç®æ ¸å¿ç®å½ä¿çä¸åï¼æ¹é åæ°å¢ãAPI å±ãéç½®å±ãï¼ç¡®ä¿åæèæ¬æ éä¿®æ¹å³å¯å¤ç¨ã</p>
<ul>
<li>
<p>æ¹é åç®å½ï¼å³èæ¬é¡¹ç®åå§ç®å½ï¼ç¤ºä¾å¦ä¸ï¼</p>
<pre><code>SUPER-API-AUTO-TEST/          # æ¥å£èªå¨åæµè¯é¡¹ç®æ ¹ç®å½
âââ auth.py                    # é´æç¸å³
âââ case_generator.py          # ç¨ä¾çæé»è¾
âââ config.yaml                # é¡¹ç®éç½®
âââ conftest.py                # Pytestå¤¹å·
âââ runner.py                  # ç¨ä¾æ§è¡å¥å£
âââ reports/                   # æµè¯æ¥åç®å½
âââ logs/                      # æ¥å¿ç®å½
âââ testcases/                 # æµè¯ç¨ä¾èæ¬ï¼Pythonï¼
âââ testcases_data/            # æµè¯ç¨ä¾æ°æ®ï¼YAMLï¼
âââ utils/                     # éç¨å·¥å·ç±»
</code></pre>
</li>
<li>
<p>Fastapi æ¹é åç®å½ç»æç¤ºä¾å¦ä¸ï¼</p>
<pre><code>FASTAPI-SUPER-API-AUTO-TEST/  # åºäºFastAPIçæ¹é åç®å½
âââ auth.py                    
âââ case_generator.py          
âââ conftest.py                
âââ main.py                   # FastAPIåºç¨å¥å£ï¼æ ¸å¿æ°å¢ï¼
âââ pytest.ini                
âââ runner.py                  
âââ api/                      # APIå±ï¼æ ¸å¿æ°å¢ï¼
â   âââ testcase_route.py     # æ¥å£è·¯ç±å®ä¹ï¼URLãè¯·æ±åæ°ï¼
â   âââ testcase_service.py   # æ¥å£ä¸å¡é»è¾ï¼ä¸åæèæ¬äº¤äºï¼
â   âââ __init__.py           
âââ configs/                  # éç½®ç®å½ï¼æååæconfig.yamlï¼
â   âââ config.yaml           
âââ logs/                     
âââ reports/                  
âââ testcases/                # å®å¨å¤ç¨åæç®å½
âââ testcases_data/           # å®å¨å¤ç¨åæç®å½
âââ utils/                    # å®å¨å¤ç¨åæç®å½
</code></pre>
</li>
</ul>
<p>æ¹é åï¼æ°å¢äº Fastapi è·¯ç±å± <code>api/</code>ãéç½®å± <code>configs/</code>ï¼ä»¥å FastAPI åºç¨å¥å£ <code>main.py</code>ã</p>
<h2 id="ä¸-æ ¸å¿æ¥å£è®¾è®¡ä¸å®ç°">ä¸. æ ¸å¿æ¥å£è®¾è®¡ä¸å®ç°</h2>
<h3 id="1-æ¥å£è®¾è®¡ç¤ºä¾">1. æ¥å£è®¾è®¡ç¤ºä¾</h3>
<p>æä»¬è®¾è®¡äºä»¥ä¸å³é®æ¥å£ä¾æµè¯å¹³å°è°ç¨ï¼</p>
<p>â  è·åé¡¹ç®ä¸æ¨¡åä¿¡æ¯</p>
<ul>
<li><code>GET /api_test/testcases/projects</code>ï¼è·åææé¡¹ç®åè¡¨</li>
<li><code>GET /api_test/testcases/modules</code>ï¼è·åæå®é¡¹ç®ä¸çæ¨¡ååè¡¨</li>
</ul>
<p>â¡ è·åç¨ä¾åè¡¨</p>
<ul>
<li><code>GET /api_test/testcases/list</code>ï¼æ¯ææé¡¹ç®/æ¨¡åç­éæµè¯ç¨ä¾</li>
</ul>
<p>â¢ çææµè¯ç¨ä¾</p>
<ul>
<li><code>POST /api_test/testcases/generate</code>ï¼æ ¹æ®YAMLç¨ä¾æä»¶çæPythonæµè¯èæ¬</li>
</ul>
<p>â£ æ§è¡æµè¯ä»»å¡</p>
<ul>
<li><code>POST /api_test/testcases/run</code>ï¼åå°æ§è¡æå®æµè¯ç¨ä¾ï¼æ¯æç¯å¢éæ©ãæ¥åç±»åãåè°éç¥ç­</li>
</ul>
<p>â¤ è·åæµè¯æ¥å</p>
<ul>
<li><code>GET /api_test/reports/get_by_task</code>ï¼æ ¹æ®ä»»å¡IDè·åæ¥åè®¿é®å°å</li>
</ul>
<h3 id="2-ä»£ç ç¤ºä¾">2. ä»£ç ç¤ºä¾</h3>
<p><code>testcase_service.py</code></p>
<pre><code class="language-python"># @author:  xiaoqq

import os, re
from datetime import datetime
from typing import List, Optional, Dict
from pathlib import Path

TESTCASE_ROOT = "testcases"

def get_abs_root_path(root_path: str) -&gt; Path:
    """
    ä½¿ç¨å½åæä»¶ç¸å¯¹è·¯å¾æé  testcases/ çç»å¯¹è·¯å¾
    :param root_path: ç®å½å
    :return:
    """
    base_dir = Path(__file__).resolve().parent  # å½åæä»¶æå¨ç®å½
    abs_root_path = (base_dir.parent / root_path).resolve()
    return abs_root_path

def get_all_testcases(project: Optional[str] = None,
                  module: Optional[str] = None,
                  root_path: str = TESTCASE_ROOT) -&gt; List[Dict]:
    """
    è·åæææµè¯ç¨ä¾ï¼æ¯æéè¿ project/module ç­éï¼
    è¿åå­æ®µåæ¬ filenameï¼æ åç¼ï¼ãpathï¼ç»å¯¹è·¯å¾å­ç¬¦ä¸²ï¼ãAllure åä¿¡æ¯ç­
    """
    abs_root_path = get_abs_root_path(root_path)
    if not abs_root_path.exists():
       return []
    
    # è·¯å¾æ ¡éª
    if module and not project:
       raise ValueError("ä¼ å¥ module åå¿é¡»åä¼ å¥ project")
    
    # æé èµ·å§ç®å½è·¯å¾
    search_path = abs_root_path
    if project:
       search_path = search_path / project
    if module:
       search_path = search_path / module
    
    if not search_path.exists():
       return []
    
    testcases = []
    
    for dirpath, _, filenames in os.walk(search_path):
       for file in filenames:
          if file.startswith("test_") and file.endswith(".py"):
             full_path = os.path.join(dirpath, file)
             rel_path = os.path.relpath(full_path, abs_root_path)  # ç¸å¯¹è·¯å¾ï¼å¦ merchant/device/test_xxx.py
             path_parts = Path(rel_path).parts  # ä½¿ç¨ pathlib å®å¨æè§£è·¯å¾
             
             if len(path_parts ) &lt; 2:
                continue  # è³å°è¦æ project/filename ç»æ
             
             _project = path_parts [0]
             _filename = path_parts [-1]
             _module = path_parts [1] if len(path_parts ) &gt; 2 else None  # module å¯é
             
             # æä¼ åè¿æ»¤
             if project and _project != project:
                continue
             if module and _module != module:
                continue
             
             filename = os.path.splitext(_filename)[0]  # å»æ .py åç¼
             last_modified = datetime.fromtimestamp(os.path.getmtime(full_path)).isoformat()
             
             # æåç¨ä¾åä¿¡æ¯
             try:
                case_name, epic, feature, story = extract_case_info(full_path)
             except Exception as e:
                case_name, epic, feature, story = None, None, None, None
                
             # æ¼æ¥æç» path å­æ®µä¸º TESTCASE_ROOT/... å½¢å¼
             full_case_path = str(Path(root_path) / rel_path).replace("\\", "/")
             
             # æé  external_idï¼project|module|filename|path
             external_id = f"{_project}|{_module or 'nomodule'}|{filename}|{full_case_path}"
             
             testcases.append({
                "project": _project,
                "module": _module,  # None è¡¨ç¤ºæ  module å±çº§
                "file": _filename,
                "filename": filename,
                "path": full_case_path,
                "last_modified": last_modified,
                "case_name": case_name or filename,
                "allure_epic": epic,
                "allure_feature": feature,
                "allure_story": story,
                "external_id": external_id # å å¥å¯ä¸æ è¯
             })
    
    return testcases

def extract_case_info(file_path):
    """
    è§£ææµè¯ç¨ä¾æä»¶ï¼è·åç¸åºä¿¡æ¯
    :param file_path:
    :return:
    """
    with open(file_path, 'r', encoding='utf-8') as file:
       content = file.read()
       
       case_name_match = re.search(
          r'def setup_class.*?\(.*?\):.*?log\.info\(\'========== å¼å§æ§è¡æµè¯ç¨ä¾ï¼(.+?) ==========\'',
          content, re.DOTALL
       )
       case_name = case_name_match.group(1).strip() if case_name_match else \
       os.path.splitext(os.path.basename(file_path))[0]
       
       allure_epic_match = re.search(r'@allure\.epic\(\'(.+?)\'\)', content)
       allure_feature_match = re.search(r'@allure\.feature\(\'(.+?)\'\)', content)
       allure_story_match = re.search(r'@allure\.story\(\'(.+?)\'\)', content)
       
       allure_epic = allure_epic_match.group(1).strip() if allure_epic_match else None
       allure_feature = allure_feature_match.group(1).strip() if allure_feature_match else None
       allure_story = allure_story_match.group(1).strip() if allure_story_match else None
       
       return case_name, allure_epic, allure_feature, allure_story



def get_all_projects(root_path: str = TESTCASE_ROOT) -&gt; List[Dict[str, str]]:
    """
    è·å testcases/ ä¸ææé¡¹ç®åãç¸å¯¹è·¯å¾ååå»ºæ¶é´ï¼ååºæåºï¼
    """
    abs_root_path = get_abs_root_path(root_path)
    if not abs_root_path.exists():
       return []
    
    projects = []
    for d in abs_root_path.iterdir():
       if d.is_dir():
          created_time = datetime.fromtimestamp(d.stat().st_ctime)
          projects.append({
             "name": d.name,
             "path": str(Path(root_path) / d.name).replace("\\", "/"),
             "created_time": created_time.isoformat()
          })
    
    # æåå»ºæ¶é´ååº
    return sorted(projects, key=lambda x: x["created_time"], reverse=True)


def get_all_projects_and_modules(
    project: Optional[str] = None,
    root_path: str = TESTCASE_ROOT
) -&gt; List[Dict]:
    """
    è·åææé¡¹ç®åæ¨¡åç»æï¼æ¯ææå®é¡¹ç®ï¼ãåå«è·¯å¾ãåå»ºæ¶é´ï¼æé¡¹ç®æ¶é´ååºã
    """
    abs_root_path = get_abs_root_path(root_path)
    if not abs_root_path.exists():
       return []
    
    result = []
    
    for proj_dir in abs_root_path.iterdir():
       if not proj_dir.is_dir():
          continue
       
       proj_name = proj_dir.name
       if project and proj_name != project:
          continue
       
       proj_created_time = datetime.fromtimestamp(proj_dir.stat().st_ctime)
       modules = []
       
       # éåæ¨¡åç®å½æ¶éè¦å¿½ç¥çå­ç®å½
       EXCLUDE_DIRS = {"__pycache__", ".pytest_cache", ".git", ".idea"}
       for mod_dir in proj_dir.iterdir():
          if mod_dir.is_dir() and mod_dir.name not in EXCLUDE_DIRS:
             mod_created_time = datetime.fromtimestamp(mod_dir.stat().st_ctime)
             modules.append({
                "name": mod_dir.name,
                "path": str(Path(root_path) / proj_name / mod_dir.name).replace("\\", "/"),
                "created_time": mod_created_time.isoformat()
             })
       
       # æ¨¡åä¹å¯ä»¥æåºï¼å¦æéæ±ï¼
       modules.sort(key=lambda x: x["created_time"], reverse=True)
       
       result.append({
          "project": proj_name,
          "path": str(Path(root_path) / proj_name).replace("\\", "/"),
          "created_time": proj_created_time.isoformat(),
          "modules": modules
       })
       
       if project:
          break
    
    # é¡¹ç®æåº
    return sorted(result, key=lambda x: x["created_time"], reverse=True)


def generate_testcase(case_yaml_list: list = None):
    """
    çææµè¯ç¨ä¾
    :return:
    """
    from case_generator import CaseGenerator
    CG = CaseGenerator()
    CG.generate_testcases(project_yaml_list=case_yaml_list)


if __name__ == '__main__':
    # print(get_all_testcases())
    # print(get_all_projects())
    print(get_all_projects_and_modules(project="merchant"))
</code></pre>
<p><code>testcase_route.py </code>ç¤ºä¾å¦ä¸ï¼</p>
<pre><code class="language-python"># @author:  xiaoqq

from pathlib import Path
from fastapi import APIRouter, BackgroundTasks, Query, Body
from pydantic import BaseModel
from typing import List, Optional
from runner import run_tests
from api.testcase_service import (
	get_all_testcases,
	get_all_projects,
	get_all_projects_and_modules,
	generate_testcase,
)

router = APIRouter()

class TestExecutionRequest(BaseModel):
	testcases: Optional[List[str]] = ['testcases/']  # é»è®¤è¿è¡ææç®å½
	env: Optional[str] = 'pre'
	report_type: Optional[str] = 'pytest-html'
	dingtalk_notify: Optional[bool] = True
	task_id: Optional[str]
	callback_url: Optional[str]
	auth_token: Optional[str] = None  # æ°å¢å­æ®µï¼ä»å¹³å°ä¼ å¥ç token

# æ§è¡æµè¯ç¨ä¾
@router.post("/testcases/run")
def run_testcases(request: TestExecutionRequest, background_tasks: BackgroundTasks):
	try:
		background_tasks.add_task(
			run_tests,
			testcases=request.testcases,
			env=request.env,
			report_type=request.report_type,
			dingtalk_notify=request.dingtalk_notify,
			task_id=request.task_id,
			callback_url=request.callback_url,
			auth_token=request.auth_token,  # æµè¯å¹³å°åè° auth_token
		)
		return {
			"code": 0,
			"msg": "æµè¯ä»»å¡å·²æäº¤åå°æ§è¡",
			"task_id": request.task_id
		}
	except Exception as e:
		return {"code":1, "msg": f"æµè¯ä»»å¡å¤±è´¥ï¼{str(e)}"}

# è·åæµè¯ç¨ä¾
@router.get("/testcases/list")
def list_testcases(project: str = Query(None), module: str = Query(None)):
	try:
		testcases = get_all_testcases(project, module)
		return {
			"code": 0,
			"msg": "success",
			"testcases": testcases
		}
	except Exception as e:
		return {"code": 1, "msg": f"è·åæµè¯ç¨ä¾å¤±è´¥ï¼{str(e)}"}


# è·å testcases/ ä¸­çæææµè¯é¡¹ç®
@router.get("/testcases/projects")
def list_projects():
	try:
		projects = get_all_projects()
		return {"code": 0, "msg": "success", "projects": projects}
	except Exception as e:
		return {"code": 1, "msg": f"è·åæµè¯é¡¹ç®å¤±è´¥ï¼{str(e)}"}
	

# è·å testcases/ ä¸­çæææµè¯é¡¹ç®åæ¨¡å
@router.get("/testcases/modules")
def list_modules(project: str = Query(None)):
	try:
		modules = get_all_projects_and_modules(project)
		return {"code": 0, "msg": "success", "modules": modules}
	except Exception as e:
		return {"code": 1, "msg": f"è·åæµè¯é¡¹ç®-æ¨¡åå¤±è´¥ï¼{str(e)}"}



class GenerateCaseRequest(BaseModel):
	case_yaml_list: Optional[List[str]] = None

# æ ¹æ® testcases_data/ ä¸­çæµè¯æ°æ®çææµè¯ç¨ä¾æä»¶
@router.post("/testcases/generate")
def generate_testcase_route(req: GenerateCaseRequest):
	try:
		generate_testcase(req.case_yaml_list)
		return {"code": 0, "msg": "success"}
	except Exception as e:
		return {"code": 1, "msg": f"è·åæµè¯é¡¹ç®-æ¨¡åå¤±è´¥ï¼{str(e)}"}


@router.get("/reports/get_by_task")
def get_report_by_task(
		task_id: str,
		report_type: str,
		created_at: str  # æ ¼å¼: "20250814"
):
	"""
	æ ¹æ® task_id + åå»ºæ¶é´ + report_type è·åæ¥å URL
	"""
	if not created_at:
		return {"code": 1, "msg": "created_at å¿å¡«", "url": None}
	
	base_path = Path(__file__).resolve().parent.parent / "reports" / created_at
	
	if report_type == "pytest-html":
		report_file = base_path / f"report_{task_id}.html"
	elif report_type == "allure":
		report_file = base_path / f"report_{task_id}_allure/html/index.html"
	else:
		return {"code": 1, "msg": "æªç¥ report_type", "url": None}
	
	if not report_file.exists():
		return {"code": 1, "msg": "æ¥åæä»¶ä¸å­å¨", "url": None}
	
	relative_url = str(report_file.relative_to(Path(__file__).resolve().parent.parent)).replace("\\", "/")
	return {"code": 0, "msg": "success", "url": f"/{relative_url}"}
</code></pre>
<p><code>mian.py</code></p>
<pre><code class="language-python">from fastapi import FastAPI
from api import testcase_route
from pathlib import Path
from fastapi.staticfiles import StaticFiles

app = FastAPI(title="æ¥å£èªå¨åæµè¯æå¡")

# æè½½æµè¯ç¨ä¾è·¯ç±
app.include_router(testcase_route.router, prefix="/api_test", tags=["æµè¯ä»»å¡"])

# æè½½ reports ç®å½ä¸ºéææä»¶ç®å½
reports_dir = Path(__file__).parent / "reports"
reports_dir.mkdir(exist_ok=True)  # ç¡®ä¿ç®å½å­å¨
app.mount("/reports", StaticFiles(directory=reports_dir), name="reports")

if __name__ == "__main__":
    from utils.log_manager import LogManager
    LogManager.setup_logging()  # å¯å¨æ¶æ¾å¼åå§åæ¥å¿
    
    import uvicorn
    uvicorn.run(
        "main:app",
        host="0.0.0.0",
        port=8000,
        # reload=True,
        reload_excludes=["testcases/*", "logs/*", "reports/*"]  # æé¤è¿äºç®å½çæä»¶åæ´
    )
</code></pre>
<h2 id="å-æµè¯å¹³å°è°ç¨">å. æµè¯å¹³å°è°ç¨</h2>
<p>æ§è¡<code>mian.py</code>ï¼å¯å¨ Fastapi é¡¹ç®åï¼ä¾¿å¯å¨æµè¯å¹³å°éè¿è°ç¨ç¸å³æ¥å£æ¥ç®¡çè¯¥èæ¬æµè¯é¡¹ç®ï¼å¹³å°è°ç¨ä»£ç ä¸å·ä½æä¾ï¼ã</p>
<h3 id="1-è°ç¨ç¤ºæå¾">1. è°ç¨ç¤ºæå¾</h3>
<pre><code class="language-reStructuredText">æµè¯å¹³å°
   â
   â HTTP è°ç¨
   â¼
FastAPI æµè¯æå¡
   â
   â pytest æ§è¡
   â¼
æµè¯æ¥åçæ
   â
   â åè°ç»æ
   â¼
æµè¯å¹³å°å±ç¤º
</code></pre>
<p>è¿æ ·ï¼èè´£è¾¹çéå¸¸æ¸æ°ï¼</p>
<ul>
<li>æµè¯å¹³å°ï¼è°åº¦ãè®°å½ãå±ç¤ºï¼</li>
<li>æ¹é åçæµè¯æå¡ï¼æ§è¡ãäº§åºæ¥å</li>
</ul>
<h3 id="2-æµè¯å¹³å°çé¢">2. æµè¯å¹³å°çé¢</h3>
<p>å¹³å°æµè¯ç¨ä¾åè¡¨ï¼</p>
<p><img alt="image-20260120134215814" loading="lazy"></p>
<p>æµè¯æ¥ååè¡¨ï¼</p>
<p><img alt="image-20260122143715247" loading="lazy"></p>
<h2 id="äº-æ»ç»">äº. æ»ç»</h2>
<p>æ¹æ¡ä¼å¿æ»ç»å¦ä¸ï¼</p>
<ol>
<li>
<p><strong>è§£è¦ä¸å¤ç¨</strong>ï¼èæ¬é¡¹ç®ç¬ç«ç»´æ¤ï¼å¹³å°éè¿æ¥å£è°ç¨ï¼äºä¸å½±å</p>
</li>
<li>
<p><strong>çµæ´»æ§è¡</strong>ï¼æ¯ææé¡¹ç®ãæ¨¡åãç¨ä¾ç­éæ§è¡ï¼éåºä¸åæµè¯åºæ¯ã</p>
</li>
<li>
<p><strong>å¼æ­¥å¤ç</strong>ï¼é¿æ¶é´ä»»å¡åå°æ§è¡ï¼å¹³å°å¯å®æ¶è·åç¶æä¸æ¥åã</p>
</li>
<li>
<p><strong>æ¥åç»ä¸ç®¡ç</strong>ï¼æææ¥åéä¸­å­å¨ï¼æ¯æå¨çº¿ç»ä¸æ¥çã</p>
</li>
</ol>
<p>å½ç¶ï¼ç¤ºä¾ä»£ç è¿å¯ä»¥è¿è¡ä¼åæ©å±ï¼å¦å å¥ç¨æ·è®¤è¯æºå¶æ¥ä¿éæ¥å£å®å¨ç­ã</p>
<p>å½æ¥å£èªå¨ååå±å°ä¸å®è§æ¨¡ï¼<code>åæºèæ¬</code> æ <code>Jenkins Job</code> é½ä¼æä¸ºç¶é¢ï¼è<strong>âèæ¬æå¡å + å¹³å°è°åº¦â</strong>ï¼å ä¹æ¯æææçå¢éæç»é½ä¼èµ°å°çä¸æ­¥ã</p>
<p>å¦æä½ ï¼</p>
<ul>
<li>æ­£å¨åæ¥å£èªå¨å</li>
<li>ææ­£å¨åä¸æµè¯å¹³å°å»ºè®¾</li>
<li>ææ­£å¨è¢«âèæ¬æä¹æ¥å¹³å°âæç£¨</li>
</ul>
<p>é£ä¹ï¼å¸æè¿ç¯æç« è½å°è®©ä½ èµ°ä¸ç¹å¼¯è·¯ã</p>

</div>
<div id="MySignature" role="contentinfo">
    <div style="font-size: 13px; border: 1px dashed rgb(45, 161, 45); padding: 10px 15px; background-color: rgb(248, 248, 248)">
	<div>
        <label style="font-weight: bold">&nbsp;&nbsp;&nbsp;&nbsp;
            <label style="font-weight: bold; color: red; font-size: 15px">å·¦è¾¹äºç»´ç </label>
            ä¸ºåä¸»
            <label style="font-weight: bold; color: red; font-size: 15px">ä¸ªäººå¾®ä¿¡</label>
            ï¼
            <label style="font-weight: bold; color: red; font-size: 15px">æ«ç æ·»å å¾®ä¿¡åå¯å å¥æµè¯å­¦ä¹ äº¤æµç¾¤</label>
            ï¼æ·»å æ¶è¯·å¡å¿å¤æ³¨ï¼å å¥æµè¯å­¦ä¹ äº¤æµç¾¤ï¼ã
            <label style="font-weight: bold; color: red; font-size: 15px">å³è¾¹äºç»´ç </label>
            ä¸ºåä¸»
            <label style="font-weight: bold; color: red; font-size: 15px">å¾®ä¿¡å¬ä¼å·</label>
            ï¼ä¸æ³¨äºèªå¨åæµè¯ãæµè¯å¼åææ¯åäº«ï¼æ¬¢è¿å³æ³¨ã
            ä¹¦å±±æè·¯å¤ä¸ºå¾ï¼å­¦æµ·æ æ¶¯è¦åèãå¸æéè¿åäº«å­¦ä¹ äº¤æµï¼å¤§å®¶è½å¤æç
            <label style="font-weight: bold; color: red; font-size: 15px">ææ´å®çæ¿æ--æé¿ãå èªãåè</label>
            æ´è¿ä¸æ­¥ã
        </label>
    </div>
    <!-- <div align="center">
        <img style="height: 160px; width: 160px;" alt="ä¸ªäººå¾®ä¿¡" src="https://images.cnblogs.com/cnblogs_com/lfr0123/2106623/t_220220120615_wechat_black.png">
    </div> -->
    <div style="text-align: center; margin-top: 10px">
        <img style="width: 180px; padding-right: 20%" alt="ä¸ªäººå¾®ä¿¡" src="https://images.cnblogs.com/cnblogs_com/lfr0123/2106623/o_220303134143_WeChat_with_logo.png">
        <img style="width: 180px" alt="ä¸ªäººå¾®ä¿¡å¬ä¼å·" src="https://images.cnblogs.com/cnblogs_com/lfr0123/2106623/o_220303134126_gzh_with_ps.png">
    </div>
    <div><b>æ¬æä½è</b>ï¼<a href="https://www.cnblogs.com/lfr0123/">ç»ä½ ä¸é¡µç½çº¸</a></div>
	<div><b>çæç³æ</b>ï¼æ¬åå®¢æææç« é¤ç¹æ®å£°æå¤ï¼åéç¨<a href="https://creativecommons.org/licenses/by-nc-nd/4.0/">BY-NC-SA
	</a> è®¸å¯åè®®ãè½¬è½½è¯·æ³¨æåºå¤ï¼</div>
	<div><b>å£°æ´åä¸»</b>ï¼å¦æè§å¾è¿ç¯æç« å¯¹æ¨æå¸®å©ï¼è¯·ç¹ä¸ä¸å³ä¸è§ç
		<a id="recommend" style="font-weight: bold; color: red; font-size: 15px; text-decoration: underline">âæ¨èâ</a>
		å¾æ å¦ï¼æ¨ç
		<a id="recommend" style="font-weight: bold; color: red; font-size: 15px; text-decoration: underline">âæ¨èâ</a>
		æ¯æåä½çæå¤§å¨åãæ¨ä¹å¯ä»¥ç¹å»ä¸æ¹ç
        <a id="recommend" style="font-weight: bold; color: red; font-size: 15px; text-decoration: underline">ãå³æ³¨æã</a>
        æé®ï¼å³æ³¨åä¸»ä¸è¿·è·¯ã
	</div>
</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.019444444444444445" data-date-updated="2026-01-25 15:14">2026-01-25 14:46</span>&nbsp;
<a href="https://www.cnblogs.com/lfr0123">ç»ä½ ä¸é¡µç½çº¸</a>&nbsp;
éè¯»(<span id="post_view_count">2</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19529690);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19529690', targetLink: 'https://www.cnblogs.com/lfr0123/p/19529690', title: 'å°åæ£çPytestæµè¯èæ¬ç»ä¸æ¥å¥æµè¯å¹³å°ï¼FastAPIæ¹é æ¹æ¡è¯¦è§£' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ DBShadow.netä¹åç¹ä¸ºç® ]]></title>
    <link>https://www.cnblogs.com/xiangji/p/19529688</link>
    <guid>bc789e87dc13727e229cc0e6d6baa0f3</guid>
    <description>
    <![CDATA[ 
		<h2>
			<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiangji/p/19529688" title="åå¸äº 2026-01-25 14:44">
    <span role="heading" aria-level="2">DBShadow.netä¹åç¹ä¸ºç®</span>
    

</a>

		</h2>
		<div class="postText">    <div id="cnblogs_post_description" style="display: none">
        
        DBShadow.netæ¯æåç¹ä¸ºç®
åªæä¸ä¸ªåæ°çæ¶åæ¯æç´æ¥æåæ°å¼æ¥æä½
INæ¥è¯¢çéååæ°ä¹æ¯æç®å
æ³åçåæ°åè¿åå¼ç±»åå¯ä»¥å®ä¹æ´éç¨çæå¡
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="ä¸ç®åæ¥è¯¢">ä¸ãç®åæ¥è¯¢</h2>
<h3 id="1-åçä¸ä¸æ¥è¯¢çä¾å­">1. åçä¸ä¸æ¥è¯¢çä¾å­</h3>
<pre><code class="language-csharp">/// &lt;summary&gt;
/// è´¦æ·è·åæå¡
/// &lt;/summary&gt;
/// &lt;param name="table"&gt;&lt;/param&gt;
/// &lt;param name="builder"&gt;&lt;/param&gt;
public class AccountGetService(AccountTable table, IShadowBuilder builder)
{
    private readonly SqlSource _source = new(builder.DataSource);
    private readonly IParamQuery&lt;Account, Account&gt; _accountQuery
        = builder.BuildResult&lt;Account, Account&gt;(
            table.ToQuery()
                .And(account =&gt; account.Id.Equal())
                .ToSelect()
                .SelectSelfColumns()
        );
    /// &lt;summary&gt;
    /// è·åè´¦æ·
    /// &lt;/summary&gt;
    /// &lt;param name="param"&gt;&lt;/param&gt;
    /// &lt;param name="token"&gt;&lt;/param&gt;
    /// &lt;returns&gt;&lt;/returns&gt;
    public Task&lt;Account?&gt; GetAsync(Account param, CancellationToken token = default)
        =&gt; _accountQuery.GetFirstAsync(_source, param, token);
}
</code></pre>
<h3 id="2-è°ç¨æ¹å¼å¦ä¸">2. è°ç¨æ¹å¼å¦ä¸</h3>
<pre><code class="language-csharp">var account = await accountGetService.GetAsync(new Account { Id = 1L });
</code></pre>
<h3 id="3-è¿ä¸ªä¾å­æä»¬å¯ä»¥ç®åä¸ä¸">3. è¿ä¸ªä¾å­æä»¬å¯ä»¥ç®åä¸ä¸</h3>
<blockquote>
<ul>
<li>åæ°ç´æ¥ä½¿ç¨Id(ç±»åç±Accountç®åä¸ºlong)</li>
<li>å¾å¤§ä¸é¨åæ°æ®åºæä½é½åªæä¸ä¸ªåæ°(GetByIdãGetByNameç­)</li>
<li>ä¸ºæ­¤å®ä¹ä¸ä¸ªå«åä¸ªå±æ§ç±»æç¹æµªè´¹</li>
<li>æä¸é¢çä¾å­ä½¿ç¨å®ä½ç±»ä½ä¸ºåæ°ä¹æè§æªæªç</li>
<li>DBShadow.netæ¯æè¿ç§ç®åæä½</li>
<li>åä¸ªåæ°æ éå°è£,ç´æ¥ä½¿ç¨åæ°ç±»åå³å¯</li>
</ul>
</blockquote>
<pre><code class="language-csharp">public class AccountGetService(AccountTable table, IShadowBuilder builder)
{
    private readonly SqlSource _source = new(builder.DataSource);
    private readonly IParamQuery&lt;long, Account&gt; _accountQuery
        = builder.BuildResult&lt;long, Account&gt;(
            table.ToQuery()
                .And(account =&gt; account.Id.Equal())
                .ToSelect()
                .SelectSelfColumns()
        );
    public Task&lt;Account?&gt; GetAsync(long accountId, CancellationToken token = default)
        =&gt; _accountQuery.GetFirstAsync(_source, param, token);
}
var account = await accountGetService.GetAsync(1L);
</code></pre>
<h3 id="4-ç¹å«æ³¨æä¸è¦å¨dapperä¸­è¿æ ·ä½¿ç¨">4. ç¹å«æ³¨æä¸è¦å¨Dapperä¸­è¿æ ·ä½¿ç¨</h3>
<blockquote>
<ul>
<li>Dapperæ¯ä¸æ¯æè¿ç§ç®åæä½</li>
<li>ä»¥ä¸Dapperéè¯¯ç¤ºä¾ä¼æåºå¼å¸¸</li>
<li>System.InvalidOperationException:âMust add values for the following parameters: @Idâ</li>
</ul>
</blockquote>
<pre><code class="language-csharp">await using var conn = _dataSource.CreateConnection();
var sql = "SELECT \"Id\",\"Title\",\"Content\",\"Done\",\"LastTime\" FROM \"Todo\" WHERE \"Id\"=@Id";
var first = await conn.QueryFirstOrDefaultAsync&lt;Todo&gt;(sql, 1L);
</code></pre>
<h2 id="äº-éååæ°ä¹æ¯æç®åæä½">äºã éååæ°ä¹æ¯æç®åæä½</h2>
<h3 id="1-inæ¥è¯¢ç®åçä¾å­">1. INæ¥è¯¢ç®åçä¾å­</h3>
<blockquote>
<ul>
<li>Inçåæ°åæ¯å¯éååé¢ä¾å­çEqualæ¯ä¸æ ·ç,é»è®¤å­æ®µå</li>
<li>Inæ¥è¯¢çå®åæ¯ææ°ç»ãéååå­å¸</li>
<li>åªæInä¸ä¸ªéååæ°æ¯æ¯æç´æ¥ä¼ æ°ç»ãéåæå­å¸</li>
<li>è¿æ¶åæ°å(eg: AccountIds)å°±æ æè°åä»ä¹åäº</li>
<li>å ä¸ºä¸éè¦åå°è·åå±æ§å¼äº</li>
</ul>
</blockquote>
<pre><code class="language-csharp">/// &lt;summary&gt;
/// æ¹éè´¦æ·è·åæå¡
/// &lt;/summary&gt;
/// &lt;param name="table"&gt;&lt;/param&gt;
/// &lt;param name="builder"&gt;&lt;/param&gt;
public class AccountBatchService(AccountTable table, IShadowBuilder builder)
{
    private readonly SqlSource _source = new(builder.DataSource);
    private readonly IParamQuery&lt;long[], Account&gt; _accountQuery
        = builder.BuildResult&lt;long[], Account&gt;(
            table.ToQuery()
                .And(account =&gt; account.Id.In("AccountIds"))
                .ToSelect()
                .SelectSelfColumns()
        );
    /// &lt;summary&gt;
    /// æ¹éè·åè´¦æ·
    /// &lt;/summary&gt;
    /// &lt;param name="accountIds"&gt;&lt;/param&gt;
    /// &lt;param name="token"&gt;&lt;/param&gt;
    /// &lt;returns&gt;&lt;/returns&gt;
    public IAsyncEnumerable&lt;Account&gt; GetAsync(long[] accountIds, CancellationToken token = default)
        =&gt; _accountQuery.QueryAsync(_source, accountIds, token);
}
</code></pre>
<h3 id="2-ä»¥ä¸è°ç¨çä¾å­å¦ä¸">2. ä»¥ä¸è°ç¨çä¾å­å¦ä¸</h3>
<pre><code class="language-csharp">[Fact]
public async Task Batch()
{
    var count = 0;
    var service = new AccountBatchService(table, builder);
    var list = service.GetAsync([1L, 2L, 3L]);
    await foreach (var item in list)
    {
        _output.WriteLine($"{item.Id}:{item.Amount}");
        count++;
    }
    Assert.Equal(3, count);
}
// 1:100
// 2:200
// 3:300
</code></pre>
<h2 id="ä¸æ³åæ¥è¯¢">ä¸ãæ³åæ¥è¯¢</h2>
<h3 id="1-æ³åæå¡ç±»ä»£ç ">1. æ³åæå¡ç±»ä»£ç </h3>
<blockquote>
<ul>
<li>è¯¥æå¡ç¨æ¥æå­æ®µIdæ¥è¯¢è¡¨Account</li>
<li>åæ°TParamæ¯æ³å,è¿æ ·å¯ä»¥ç´æ¥ä½¿ç¨DTOåæ°æ¥æ¥è¯¢,åå°ç±»åè½¬åçå¼é</li>
<li>è¿åå¼TAccountä¹æ¯æ³å,è¿æ ·å°±å¯ä»¥ç´æ¥è¿åè§å¾æ¨¡åæèé¢åæ¨¡å</li>
<li>è¿æ ·çæ³åæå¡ç±»å°±éå¸¸çéç¨</li>
</ul>
</blockquote>
<pre><code class="language-csharp">/// &lt;summary&gt;
/// è´¦æ·è·åæ³åæå¡
/// &lt;/summary&gt;
/// &lt;param name="table"&gt;&lt;/param&gt;
/// &lt;param name="builder"&gt;&lt;/param&gt;
public class AccountGetService&lt;TParam, TAccount&gt;(AccountTable table, IShadowBuilder builder)
{
    private readonly SqlSource _source = new(builder.DataSource);
    private readonly IParamQuery&lt;TParam, TAccount&gt; _accountQuery
        = builder.BuildResult&lt;TParam, TAccount&gt;(
            table.ToQuery()
                .And(account =&gt; account.Id.Equal())
                .ToSelect()
                .SelectSelfColumns()
        );
    /// &lt;summary&gt;
    /// è·åè´¦æ·
    /// &lt;/summary&gt;
    /// &lt;param name="param"&gt;&lt;/param&gt;
    /// &lt;param name="token"&gt;&lt;/param&gt;
    /// &lt;returns&gt;&lt;/returns&gt;
    public Task&lt;TAccount?&gt; GetAsync(TParam param, CancellationToken token = default)
        =&gt; _accountQuery.GetFirstAsync(_source, param, token);
}
</code></pre>
<h3 id="2-ä¸­è§ä¸­ç©çè°ç¨æ¹å¼">2. ä¸­è§ä¸­ç©çè°ç¨æ¹å¼</h3>
<pre><code class="language-csharp">var service = new AccountGetService&lt;Account, Account&gt;(_table, _builder);
var account = await service.GetAsync(new Account { Id = 1L });
Assert.NotNull(account);
</code></pre>
<h3 id="3-æ¯æç®åè°ç¨æ¹å¼">3. æ¯æç®åè°ç¨æ¹å¼</h3>
<pre><code class="language-csharp">var service = new AccountGetService&lt;long, Account&gt;(_table, _builder);
var account = await service.GetAsync(1L);
Assert.NotNull(account);
</code></pre>
<h2 id="åæ»ç»">åãæ»ç»</h2>
<blockquote>
<ul>
<li>DBShadow.neté¢ç¼è¯æ¯è¾æºè½</li>
<li>åªæ1ä¸ªåæ°æ¶æ¯æåç¹ä¸ºç®,æ¯æç´æ¥ä¼ å¼åä¸ºåæ°å¼</li>
<li>è¿æ ·å¯ä»¥èçº¦å®ä¹åªæä¸ä¸ªå±æ§çåæ°ç±»</li>
<li>åæ°åè¿åå¼ç±»åè¿å¯ä»¥å®ä¹ä¸ºæ³å,å¯ä»¥åå°æ´å çµæ´»</li>
</ul>
</blockquote>
<p>å¦å¤æºç æç®¡å°å: <a href="https://github.com/donetsoftwork/DBShadow.net" target="_blank" rel="noopener nofollow">https://github.com/donetsoftwork/DBShadow.net</a> ï¼æ¬¢è¿å¤§å®¶ç´æ¥æ¥çæºç ã<br>
giteeåæ­¥æ´æ°:<a href="https://gitee.com/donetsoftwork/DBShadow.net" target="_blank" rel="noopener nofollow">https://gitee.com/donetsoftwork/DBShadow.net</a></p>
<p>å¦æå¤§å®¶åæ¬¢è¯·å¨å¨æ¨åè´¢çå°ææå¸®å¿ç¹ä¸ä¸Star,è°¢è°¢ï¼ï¼ï¼</p>

</div>
<div class="clear"></div>
</div>
		<p class="postfoot">
			posted on 
<span id="post-date" data-last-update-days="0.05555555555555555" data-date-updated="2026-01-25 16:04">2026-01-25 14:44</span>&nbsp;
<a href="https://www.cnblogs.com/xiangji">xiangji</a>&nbsp;
éè¯»(<span id="post_view_count">20</span>)&nbsp;
è¯è®º(<span id="post_comment_count">2</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19529688);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19529688', targetLink: 'https://www.cnblogs.com/xiangji/p/19529688', title: 'DBShadow.netä¹åç¹ä¸ºç®' })">ä¸¾æ¥</a>

		</p>
	 ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ææ¯é®é¢è®°å½20260125 ]]></title>
    <link>https://www.cnblogs.com/grey-wolf/p/19529664</link>
    <guid>adae64965c1729e5e131c28191c012ea</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/grey-wolf/p/19529664" title="åå¸äº 2026-01-25 14:37">
    <span role="heading" aria-level="2">ææ¯é®é¢è®°å½20260125</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="é®é¢1httpæ¥æè½¬curl">é®é¢1ï¼httpæ¥æè½¬curl</h1>
<h2 id="èæ¯">èæ¯</h2>
<p>å¤ççº¿ä¸é®é¢æ¶ï¼å¶å°æ¯éè¦è¿è¡ç½ç»æåçï¼å¦tcpdumpï¼ï¼ç¨wiresharkåææåæä»¶æ¶ï¼ä¸è¬è½çå°httpè¯·æ±çæ¥æã</p>
<p>å¦ä¸é¢è¿æ ·ï¼</p>
<p><img src="https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260125135624273.png" alt="image-20260125135624273" loading="lazy"></p>
<p>ææ¶åéè¦ç¨postmanè¿ç±»å·¥å·æ¥è°ç¨ï¼è¿è¡å¤ç°ï¼ç®åæ¥è¯´ï¼éæ±å°±æ¯ï¼å°ä¸é¢å¾éçæ¥æè½¬æ¢ä¸ºpostmanè¿ç±»å·¥å·éçè¯·æ±ã</p>
<p>ææ¶åè¯·æ±æ¯è¾å¤æï¼headerä¹å¤ï¼æå·¥ææ¯è¾éº»ç¦ï¼èä¸çº¿ä¸é®é¢å¤çé½æ¯è¾èµ¶æ¶é´ï¼å¦æè½å¿«éè½¬æ¢çè¯ï¼æ¯æå¥½ä¸è¿äºã</p>
<p>æçæ¹æ¡æ¯ï¼åä¸¤æ­¥ãåæ³åæ³ï¼å°ä¸è¿°æ¥æè½¬æ¢ä¸ºæ åçcurlå½ä»¤ï¼åå°curlå½ä»¤è½¬æ¢ä¸ºpostmanè¯·æ±ã</p>
<h2 id="æ¥æè½¬curl">æ¥æè½¬curl</h2>
<p>ç»è¿æç´¢ï¼åç°æè¿ä¹ä¸ä¸ªå¨çº¿ç½ç«ï¼å¯ä»¥ç¨è¿ä¸ªå¨çº¿ç½ç«ï¼ <a href="https://curl.se/h2c/" target="_blank" rel="noopener nofollow">https://curl.se/h2c/</a></p>
<p><img src="https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260125140012663.png" alt="image-20260125140012663" loading="lazy"></p>
<p>ä¸é¢è¿ä¸ªç½ç«å°±æ¯curlè¿ä¸ªé¡¹ç®çå®ç½ï¼ç®æ¯å®æ¹èæ¯äºãå¤§å®¶å¯ä»¥ç´æ¥ç¨è¿ä¸ªï¼æ¹ä¾¿ã</p>
<p><img src="https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260125140131349.png" alt="image-20260125140131349" loading="lazy"></p>
<p>ä¸è¿æåç°ï¼å¨è½¬æ¢content-typeä¸ºï¼application/x-www-form-urlencoded è¿ç§çæ¶åï¼ç»æä¸­ä¼ç¼ºå¤±è¿ä¸ªheaderï¼å¦ä¸ï¼</p>
<p><img src="https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260125140247867.png" alt="image-20260125140247867" loading="lazy"></p>
<p>æèªå·±æ³åæ³ä¿®å¤äºä¸ä¸ï¼ææ¾å°äºè¿ä¸ªå·¥å·çæºç ï¼</p>
<p><a href="https://github.com/curl/h2c" target="_blank" rel="noopener nofollow">https://github.com/curl/h2c</a></p>
<p>æºç ä»åºéè¿ælinuxå½ä»¤è¡çæ¬h2cï¼ä¸è¿ä¸æ ·å­å¨ä¸è¿°çbugã</p>
<p><img src="https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260125140453271.png" alt="image-20260125140453271" loading="lazy"></p>
<p>æçäºä¸æºç ï¼æ¯perlè¯­è¨åçï¼æå½æ¶æ³çï¼ç°å¨å¤§æ¨¡åä¹åå®³ï¼ç´æ¥è®©ä»ç»æè½¬æ¢æjavaè¯­è¨å§ã</p>
<p>æåæå°±è½¬äºä¸ªjavaçæ¬ï¼ä¿®å¤äºé£ä¸ªbugï¼å¹¶ä¸è®©å¤§æ¨¡åç¨javafxå¼äºä¸ªå¾å½¢çé¢ççæ¬ï¼javafxä»£ç æä¹çä¸æï¼ä¹æå¾çï¼è½ç¨å°±è¡äºï¼ã</p>
<p>æºç ææ¾å¨äºï¼</p>
<p><a href="https://gitee.com/dumpcao/http-to-curl-converter" target="_blank" rel="noopener nofollow">https://gitee.com/dumpcao/http-to-curl-converter</a></p>
<p>èªå·±mvn packageæä¸ªåå°±è½ç¨ï¼æèç´æ¥ç¨æä»åºéæäº¤çjaråï¼ä¸ä¸æ¥åå»è¿è¡å°±è½ç¨ï¼</p>
<p><img src="https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260125140657277.png" alt="image-20260125140657277" loading="lazy"></p>
<h2 id="curlè½¬è¯·æ±">curlè½¬è¯·æ±</h2>
<p>postmanå¯ä»¥ç´æ¥å¯¼å¥ã</p>
<p><img src="https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260125141145134.png" alt="image-20260125141145134" loading="lazy"></p>
<p>æç¨äºapifoxä¹æ¯æcurlå¯¼å¥ï¼ä¸è¿è¦ç¹çä¸ç¹ï¼å¯èªè¡æç´¢ã</p>
<h1 id="é®é¢2éåæ¯è¾å·¥å·">é®é¢2ï¼éåæ¯è¾å·¥å·</h1>
<p>ææ¶åï¼ä¸´æ¶è¦å¯¹ä¸¤ä¸ªéåï¼å¦ä¸¤ä¸ªlistãsetï¼è¿è¡æ¯è¾ï¼æ°æ®å¯è½æ¥æºäºä¸æææ¯çåäºåç»ä½ çä¸¤ä¸ªexcelï¼æ¯å¦ççå°åºæåªäºå·®å¼ï¼å¤äºä»ä¹ï¼å°äºä»ä¹ç­ç­ã</p>
<p>ä»¥åæææ¶åä¼ç¨excelæåºåå¯¹æ¯ï¼ææ¶åä¹ä¼åä¸ªä¸´æ¶ä»£ç æ¥å¼ï¼ä½è¿æ¯æ¯è¾éº»ç¦ã</p>
<p>åç°äºæè¿ç±»å¨çº¿å·¥å·ï¼å¯ç½ä¸æç´¢ï¼éåæ¯è¾ã</p>
<p>æ¨è1ä¸ªææ¾å°çï¼</p>
<p><a href="https://jsons.top/menus.html" target="_blank" rel="noopener nofollow">https://jsons.top/menus.html</a></p>
<p><img src="https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260125141545909.png" alt="image-20260125141545909" loading="lazy"></p>
<p>æèç°å¨ä¹å¯ä»¥è®©å¤§æ¨¡åå¸®å¿åä¸ä¸ªï¼ææjarï¼éæ¶å¯ä»¥æ¬å°æ§è¡ã</p>
<h1 id="é®é¢3æ°æ®åºåºåè®¾ç½®">é®é¢3ï¼æ°æ®åºåºåè®¾ç½®</h1>
<p>æä»¬ç°å¨ç¨çå½äº§æ°æ®åºï¼æ¯åºäºpostgresqlçï¼è¡¨çä¸»é®ä¸æ¯mysqlé£ä¸å¥ï¼é½æ¯ä»åºåä¸­è·åã</p>
<p>ææ¶åæä»¬ä¼ç´æ¥ç¨insertè¯­å¥æå¥æ°æ®åºï¼ä¸æ¯æå¨æå®äºidå¼çï¼</p>
<p><img src="https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260125141909399.png" alt="image-20260125141909399" loading="lazy"></p>
<p>è¿ç§sqlæ§è¡å®æåï¼ç±äºæ¯æå¨è®¾ç½®çidå¼ï¼æ²¡ä»åºåä¸­è·åï¼æä»¥åºåä¸­çidå¼å¯è½è¿æ¯æ§çï¼æ¯å¦ä¸è¿°å¾çä¸­ï¼è®¾ç½®çidå¼é½å°4äºãåè®¾åºåçææ°å¼è¿æ¯3ï¼ä¸ä¸æ¬¡æäººä»åºåéåå¼ï¼å°±ä¼åå°4ï¼ç¶åæå¥çè¯ï¼å°±ä¼æ¥ä¸»é®å²çªã</p>
<p>æä»¥ï¼æä»¬èªå·±å¾è®°å¾ï¼æ§è¡äºæå¨æå®äºidçsqlåï¼è¦æåºåå¼åæ­¥æ´æ°ï¼</p>
<p>å°±å¯ä»¥æ§è¡å¦ä¸sqlï¼</p>
<pre><code class="language-sql">-- æå¨æ´æ°åºåçå¼ãè®¾ç½®åºåtable_config_id_seqçææ°å¼ä¸ºtable_configä¸­çæå¤§å¼
SELECT setval('table_config_id_seq', (SELECT max(id) FROM table_config));   

-- æ¥çåºåçå½åå¼
select currval('table_config_id_seq');	
</code></pre>
<h1 id="é®é¢4dbeaverç¦»çº¿ç¯å¢ä¸ä¸è½½é©±å¨å¤±è´¥">é®é¢4ï¼dbeaverç¦»çº¿ç¯å¢ä¸ä¸è½½é©±å¨å¤±è´¥</h1>
<p>å¨æ²¡æäºèç½çæºå¨ä¸ï¼å®è£äºdbeaverï¼ä¹ä¼åç°çæ­£å»è¿æ¥æ°æ®åºçæ¶åï¼ç«ç¶è¿è¦èç½å»ä¸è½½é©±å¨ï¼æ­¤æ¶å°±ä¼æ¥éã</p>
<p>æä»¬å¯ä»¥è¿æ ·ï¼åå¨è½èç½çæºå¨ä¸ï¼æ¾å°å¯¹åºçæ°æ®åºé©±å¨ï¼å°±æ¯åç§é©±å¨jaråï¼ï¼</p>
<p><img src="https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260125142804539.png" alt="image-20260125142804539" loading="lazy"></p>
<p><img src="https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260125142835353.png" alt="image-20260125142835353" loading="lazy"></p>
<p><img src="https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260125142851236.png" alt="image-20260125142851236" loading="lazy"></p>
<p>æ¿å°è¿ä¸ªjarååï¼æ·è´å°ç¦»çº¿ç¯å¢ä¸­ï¼åæ ·æ¯å¨ä¸è¿°çªå£ä¸­ï¼å é¤å¨é¨çèçè®°å½ï¼åadd fileæ·»å jaråï¼éè¿å³å¯ï¼</p>
<p><img src="https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260125143005996.png" alt="image-20260125143005996" loading="lazy"></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-25 14:38">2026-01-25 14:37</span>&nbsp;
<a href="https://www.cnblogs.com/grey-wolf">ä¸å½æ¢¦å</a>&nbsp;
éè¯»(<span id="post_view_count">2</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19529664);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19529664', targetLink: 'https://www.cnblogs.com/grey-wolf/p/19529664', title: 'ææ¯é®é¢è®°å½20260125' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ æå»ºåºäº cc-switch ä¸ sdcb/chats çAI ç¼ç¨åºç¡è®¾æ½ ]]></title>
    <link>https://www.cnblogs.com/shanyou/p/19527405</link>
    <guid>55987e70a3f7c6621fbb76a10dbd39fa</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/shanyou/p/19527405" title="åå¸äº 2026-01-25 09:24">
    <span role="heading" aria-level="2">æå»ºåºäº cc-switch ä¸ sdcb/chats çAI ç¼ç¨åºç¡è®¾æ½</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        éè¿å°&nbsp;cc-switch&nbsp;çå®¢æ·ç«¯ç¼æè½åä¸&nbsp;sdcb/chats&nbsp;çç½å³å¤çè½åç¸ç»åï¼æä»¬æå»ºäºä¸ä¸ªå¼ºå¤§ãçµæ´»ä¸å®å¨å¯æ§çæ¬å° AI å¼åç¯å¢ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h1>1. æè¦</h1>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">å¨çæå¼äººå·¥æºè½ï¼Generative AIï¼ææ¯ä»å®éªå®¤èµ°åçäº§ç¯å¢çè¿ç¨ä¸­ï¼ä¼ä¸ä¸å¼åèé¢ä¸´çåææªæçåºç¡è®¾æ½ææãéçå¤§åè¯­è¨æ¨¡åï¼LLMï¼è½åçææ°çº§å¢é¿ï¼ç¹å«æ¯å·å¤é¿ä¸ä¸æçªå£åå¤ææ¨çè½åçæ¨¡åï¼å¦ Claude 4.5 SonnetãGPT-5.2ï¼çæ®åï¼ä¼ ç»ç API ç´æ¥è°ç¨æ¨¡å¼å·²é¾ä»¥æ»¡è¶³å®å¨åè§ãææ¬æ§å¶åå¤ç¯å¢ç®¡ççå¤æéæ±ãå½åï¼ä¸ç§âå®¢æ·ç«¯-ç½å³-æ¨¡åâçä¸å±æ¶ææ­£å¨æä¸ºä¸çæå»ºæ¬å°å AI å¼åç¯å¢çæ åèå¼ãæ¬æå°æ·±å¥åæè¿ä¸æ¶æçå·ä½å®ç°ï¼éç¹éè¿°å¦ä½å©ç¨ <strong>cc-switch</strong> ä½ä¸ºå®¢æ·ç«¯éç½®ç¼æä¸­æ¢ï¼éè¿ç»ä¸çèªå®ä¹åè®®è¿æ¥è³ <strong>sdcb/chats</strong> è¿ä¸é«æ§è½èªæç®¡ AI ç½å³ï¼ä»èæå»ºåºä¸å¥æ¢å·å¤æé«çµæ´»æ§åè½ç¡®ä¿æ°æ®ä¸»æçå®æ´çæç³»ç»ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">æ¬æçæ ¸å¿ä»·å¼å¨äºè§£å³äºå½å AI è¾å©ç¼ç¨ï¼Agentic Codingï¼é¢åçä¸å¤§çç¹ï¼å·¥å·é¾çç¢çåãå¼åèå¸¸ç¨ç CLI å·¥å·ï¼å¦ Claude CodeãCodexï¼å¾å¾ç»å®ç¹å®çäºç«¯æ¥å¥ç¹ï¼å¯¼è´å¨åç½ç¯å¢ãä¸­è½¬å éæå¤æ¨¡ååæ¢åºæ¯ä¸éç½®ç¹çä¸æåºéã<strong>cc-switch</strong> çåºç°ï¼ç¹å«æ¯å¶ v3.8.0 çæ¬å¼å¥ç SQLite æä¹åæ¶æï¼ä¸ºç®¡çå¤æçç¯å¢åéæ³¨å¥æä¾äºåå­çº§çç¨³å®æ§ä¿éãä¸æ­¤åæ¶ï¼<strong>sdcb/chats</strong> å¨ v1.9.0 çæ¬ä¸­å¯¹ Anthropic Messages API çåççº§æ¯æï¼åæ¬ Thinking åºåä¸ç­¾åéªè¯ï¼ï¼ä½¿å¶æä¸ºä¸ä»æ¯ UI åç«¯ï¼æ´æ¯ä¼ä¸çº§ API ç½å³ççæ³éæ©ã </span></p>
<h1><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">2. å®¢æ·ç«¯æ¶ææ·±åº¦è§£æï¼cc-switch çæ¼è¿ä¸æºå¶</span></h1>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">ä½ä¸ºæ´ä¸ªé¾è·¯çå¥å£ï¼å®¢æ·ç«¯éç½®ç®¡çå·¥å·çç¨³å®æ§ç´æ¥å³å®äºå¼åä½éªçæµçåº¦ã<strong>cc-switch</strong>ï¼Claude Configuration Switchï¼å¹¶éç®åç Shell èæ¬å°è£ï¼èæ¯ä¸ä¸ªåºäº Rust å Tauri æå»ºçè·¨å¹³å°æ¡é¢åºç¨ï¼å¶è®¾è®¡å²å­¦æ¯å¨ä¸ä¾µå¥ç¨æ·ç³»ç»å¨å±ç¯å¢çåæä¸ï¼å®ç°åºç¨çº§çä¸ä¸æåæ¢ã</span></p>
<h2><span style="font-family: &quot;å¾®è½¯éé» Light&quot;; font-size: medium">2.1 ææ¯æ ä¸æ¶æéå</span></h2>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;"><strong>cc-switch</strong> éç¨äº Tauri æ¡æ¶ï¼è¿æ¯ä¸ç§è¿½æ±æè´è½»éååå®å¨æ§çæ¶æéæ©ãä¸ Electron å¨è¾æ°ç¾åçåå­å ç¨ä¸åï¼Tauri å©ç¨æä½ç³»ç»çåç WebViewï¼macOS ä¸ç WebKitï¼Windows ä¸ç WebView2ï¼Linux ä¸ç WebKitGTKï¼è¿è¡æ¸²æï¼èåç«¯é»è¾åç±é«æ§è½ç Rust è¯­è¨å¤çãè¿ç§æ¶æä½¿å¾ cc-switch è½å¤å¸¸é©»ç³»ç»æçèå ä¹ä¸æ¶èç³»ç»èµæºï¼è¿å¯¹äºéè¦å¨åå°éé»çæ§ç¯å¢åéå²çªçå·¥å·è³å³éè¦ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">å¨ v3.8.0 çæ¬ä¹åï¼cc-switch ä¾èµäºåä¸ç config.json æä»¶è¿è¡æ°æ®å­å¨ãéçç¨æ·å¯¹å¤ç«¯åæ­¥åå¤æéç½®ï¼å¦èªå®ä¹ MCP æå¡å¨ãPrompt æ¨¡æ¿ï¼éæ±çå¢å ï¼JSON æä»¶çå±éæ§æ¥çå¸æ¾ââç¼ºä¹äºå¡æ¯æãå¹¶ååå¥é£é©ä»¥åæ¥è¯¢æçä½ä¸ãv3.8.0 å¼å¥ç <strong>SQLite + JSON åå±æä¹åæ¶æ</strong> æ¯å¶åå±å²ä¸çéè¦éç¨ç¢ <sup>1</sup>ã</span></p>
<h6><span style="font-family: &quot;å¾®è½¯éé» Light&quot;; font-size: small">è¡¨ 2.1 cc-switch åå±æä¹åæ¶æå¯¹æ¯åæ</span></h6>
<table border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" width="104">
<p><strong><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">ç¹æ§ç»´åº¦</span></strong></p>
</td>
<td valign="top" width="158">
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;"><strong>JSON </strong><strong>å± (Device-Level)</strong></span></p>
</td>
<td valign="top" width="145">
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;"><strong>SQLite </strong><strong>å± (Syncable Data)</strong></span></p>
</td>
<td valign="top" width="217">
<p><strong><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">æ¶ææä¹</span></strong></p>
</td>
</tr>
<tr>
<td valign="top" width="104">
<p><strong><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">å­å¨åå®¹</span></strong></p>
</td>
<td valign="top" width="158">
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">çªå£ä½ç½®ãæ¬å°è·¯å¾è¦çãå½åéä¸­ ID</span></p>
</td>
<td valign="top" width="145">
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">ä¾åºåéç½®ãMCP æå¡å¨ãPromptsãSkills</span></p>
</td>
<td valign="top" width="217">
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">å®ç°âæ°æ®è·éè´¦æ·ï¼ç¶æè·éè®¾å¤âçåç¦»ç­ç¥</span></p>
</td>
</tr>
<tr>
<td valign="top" width="104">
<p><strong><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">åæ­¥ç­ç¥</span></strong></p>
</td>
<td valign="top" width="158">
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">æ¬å°ä¿çï¼ä¸åä¸äºåæ­¥</span></p>
</td>
<td valign="top" width="145">
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">æ¯æå¨é/å¢éåæ­¥ï¼æªæ¥è§åï¼</span></p>
</td>
<td valign="top" width="217">
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">è§£å³å¤è®¾å¤é´è·¯å¾ä¸ä¸è´ï¼å¦ Windows vs macOSï¼å¯¼è´çéç½®å²çª</span></p>
</td>
</tr>
<tr>
<td valign="top" width="104">
<p><strong><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">äºå¡æ¯æ</span></strong></p>
</td>
<td valign="top" width="158">
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">æ ï¼ä¾èµæä»¶éï¼</span></p>
</td>
<td valign="top" width="145">
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">ACID äºå¡æ¯æ</span></p>
</td>
<td valign="top" width="217">
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">é²æ­¢å¨éç½®åæ¢è¿ç¨ä¸­å è¿ç¨å´©æºå¯¼è´çæ°æ®æå</span></p>
</td>
</tr>
<tr>
<td valign="top" width="104">
<p><strong><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">è¿ç§»æºå¶</span></strong></p>
</td>
<td valign="top" width="158">
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">æ </span></p>
</td>
<td valign="top" width="145">
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">èªå¨è¿ç§»å¼æ (Auto Migration)</span></p>
</td>
<td valign="top" width="217">
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">é¦æ¬¡å¯å¨èªå¨å°æ§ç config.json æ°æ®å¯¼å¥ SQLiteï¼ä¿è¯æ ç¼åçº§</span></p>
</td>
</tr>
<tr>
<td valign="top" width="104">
<p><strong><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">æ¥è¯¢æ§è½</span></strong></p>
</td>
<td valign="top" width="158">
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">å¨éå è½½è§£æ</span></p>
</td>
<td valign="top" width="145">
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">ç´¢å¼æ¥è¯¢</span></p>
</td>
<td valign="top" width="217">
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">æå¤§æåäºå¨æ¥ææ°ç¾ä¸ª Prompt æå åä¸ª Provider æ¶çå è½½éåº¦</span></p>
</td>
</tr>
</tbody>
</table>
<h2>2.2 ç¯å¢åéæ³¨å¥ä¸å²çªæ£æµæºå¶</h2>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">cc-switch çæ ¸å¿èè½æ¯åå½âéç½®ä»£çâãå½ç¨æ·å¨ UI ä¸­æ¿æ´»æä¸ªä¾åºåï¼Providerï¼æ¶ï¼å®å¹¶ä¸ä¼ä¿®æ¹æä½ç³»ç»çå¨å±ç¯å¢åéï¼è¿éè¦ç®¡çåæéä¸ä¸ä»å³æ¶çæï¼ï¼èæ¯éè¿ä¿®æ¹ç®æ åºç¨ï¼å¦ Claude Code CLIï¼ç¹å®çéç½®æä»¶æé©å­èæ¬æ¥å®ç°ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">å¯¹äº <strong>Claude Code</strong>ï¼cc-switch ä¸»è¦ç®¡æ§ä»¥ä¸æ ¸å¿åéï¼</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â <strong>ANTHROPIC_BASE_URL</strong>ï¼è¿æ¯å®ç°èªå®ä¹ç½å³è¿æ¥çå³é®ãé»è®¤æåµä¸ï¼Claude CLI æå https://api.anthropic.comãcc-switch å°æ­¤å¼è¦åä¸ºç¨æ·éç½®çç½å³å°åï¼ä¾å¦ http://localhost:8080/v1ï¼ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â <strong>ANTHROPIC_API_KEY</strong>ï¼æ³¨å¥ç±ç½å³é¢åæç®¡çç API å¯é¥ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â <strong>ANTHROPIC_DEFAULT_MODEL</strong>ï¼è½ç¶ Claude Code èªèº«å·å¤æ¨¡åååè½åï¼ä½å¨æäºä¼ä¸åºæ¯ä¸ï¼ç®¡çåå¯è½å¼ºå¶æå®æ¨¡åçæ¬ï¼å¦éå®ä¸º claude-3-5-sonnet-20240620 ä»¥æ§å¶ææ¬ï¼ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">v3.6 çæ¬å¼å¥äº <strong>ç¯å¢åéå²çªæ£æµï¼Environment Variable Conflict Detectionï¼</strong> åè½ãç±äºå¼åèçæºå¨ä¸å¯è½åæ¶å®è£äº CodexãOpenCode å Gemini CLIï¼è¿äºå·¥å·å¯è½éè¿ .env æä»¶æ shell profile è®¾å®äºç¸äºå²çªçåéãcc-switch è½å¤æ«æè¿ç¨æ åå¸¸è§çéç½®æä»¶è·¯å¾ï¼è¯å«åºå¯è½å¯¼è´è·¯ç±å¤±æçâå½±å­éç½®âï¼å¹¶åç¨æ·ååºå¯è§åè­¦åãè¿ç§é²å¾¡æ§ç¼ç¨è®¾è®¡æå¤§éä½äºææ¥ç½ç»è¿æ¥é®é¢çæ¶é´ææ¬ã</span></p>
<h5><span style="font-family: &quot;å¾®è½¯éé» Light&quot;; font-size: medium">2.3 Deep Link åè®®ä¸éç½®åå</span></h5>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">ä¸ºäºä¾¿äºå¢éåé¨å¿«éååç»ä¸çç½å³éç½®ï¼cc-switch å®ç°äºèªå®ä¹ URL Scheme åè®® ccswitch://ãè¿ä¸æºå¶åè®¸ç®¡çåçæä¸ä¸ªåå«ç½å³å°åãå å¯åç API Key å ä½ç¬¦ä»¥åå¿è¦åæ°çé¾æ¥ã å½å¼åèç¹å»è¯¥é¾æ¥æ¶ï¼æä½ç³»ç»å¤èµ· cc-switchï¼å¹¶èªå¨è§¦å <strong>Import Provider</strong> æµç¨ãè¿ä¸ä»ç®åäºå¥èéç½®æµç¨ï¼è¿ç¡®ä¿äºææå¢éæåè¿æ¥çæ¯åä¸ä¸ªæå¡ç«¯ç¹ï¼é¿åäºæå¨è¾å¥ URL å¸¦æ¥çæ¼åéè¯¯é£é©ãç»å SQLite çç»æåå­å¨ï¼è¿äºå¯¼å¥çéç½®è¢«å®å¨å°å­å¥ providers è¡¨ä¸­ï¼å¹¶éè¿ atomic writes æºå¶é²æ­¢åå¥ä¸­æ­ã</span></p>
<h1>3. æå¡ç«¯æ¶ææ·±åº¦è§£æï¼sdcb/chats çç½å³å²å­¦</h1>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">å¦æè¯´ cc-switch æ¯ç²¾å¯çææ¥å®ï¼é£ä¹ <strong>sdcb/chats</strong> å°±æ¯å¼ºå¤§çéåæºæ¢°ãä½ä¸ºä¸ä¸ªåºäº.NET 10 æå»ºçèªæç®¡ AI ç½å³ä¸åç«¯ï¼å®å¨æ§è½ãå¼å®¹æ§åæ©å±æ§ä¸å±ç°åºäºä¼ä¸çº§çæ°´åã</span></p>
<h2><span style="font-family: &quot;å¾®è½¯éé» Light&quot;; font-size: medium">3.1.NET 10 é«æ§è½è¿è¡æ¶</span></h2>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">éæ©.NET 10ï¼åä¹åç.NET 8/9 è¿­ä»£ï¼ä½ä¸ºè¿è¡æ¶ç¯å¢ï¼èµäºäº sdcb/chats æ¾èçæ§è½ä¼å¿ãç¸è¾äº Python ç¼åçç½å³ï¼åéäº GIL å¨å±è§£éå¨éï¼æ Node.js ç½å³ï¼å¨é«è®¡ç®å¯éåä»»å¡ä¸çç¶é¢ï¼ï¼C# çå¼ºç±»åç³»ç»ååè¿ç JITï¼Just-In-Timeï¼ç¼è¯å¨ä½¿å¾ sdcb/chats è½å¤å¨å¤çå¤§éå¹¶å WebSocket è¿æ¥åæµå¼ï¼Server-Sent Events, SSEï¼è½¬åæ¶ä¿ææä½çå»¶è¿ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">ç¹å«æ¯å¨å¤ç <strong>Token è®¡æ°</strong> å <strong>æµå¼ååºè§£æ</strong> æ¶ï¼sdcb/chats å©ç¨äº.NET ç Span&lt;T&gt; å Memory&lt;T&gt; ç­é¶æ·è´ææ¯ï¼å¤§å¹åå°äºåå­åéï¼è¿å¯¹äºéè¦é¿æ¶é´ç»´æä¼è¯ç¶æç AI Agent åºæ¯è³å³éè¦ã</span></p>
<h2>3.2 åè®®å¼å®¹æ§ï¼Anthropic Messages API çéåä¸éæ</h2>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">å¨ v1.9.0 çæ¬ä¹åï¼å¤§å¤æ°å¼æºç½å³ä»æ¯æ OpenAI ç Chat Completions API (/v1/chat/completions)ãç¶èï¼éç Claude 3.5 çåå¸åå¶éå¥å·¥å· Claude Code çæµè¡ï¼ä»æ¯æ OpenAI åè®®å·²æ æ³æ»¡è¶³éæ±ãClaude Code ä¸¥æ ¼ä¾èµ Anthropic çåçåè®®æ ¼å¼ï¼ç¹å«æ¯å¶ç¬ç¹ç <strong>Messages API</strong> (/v1/messages)ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">sdcb/chats å¨ v1.9.0 ä¸­å®ç°äºä¸ä¸ªéç¨ç¢å¼ççªç ´ï¼<strong>å¨æ å¼å®¹ Anthropic åè®®</strong>ãè¿ä¸ä»ä»æ¯ URL è·¯ç±çæ å°ï¼æ´æ¶åæ·±å±çæ°æ®ç»æè½¬æ¢ ï¼</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â <strong>Thinking Block</strong><strong>ï¼æç»´é¾ï¼æ¯æ</strong>ï¼Claude çæ¨çæ¨¡åï¼å¦ Claude 3.7 Sonnetï¼å¨è¾åºæç»ä»£ç åï¼ä¼åè¾åºä¸æ®µ &lt;thinking&gt; æ ç­¾åè£¹çæç»´è¿ç¨ãæ®éç OpenAI å¼å®¹ç½å³å¾å¾ä¼å°å¶è§ä¸ºæ®éææ¬ç´æ¥è¿åï¼æèéè¯¯å°æªæ­ãsdcb/chats å¼å¥äº StepContentThink æ°æ®åºè¡¨ï¼ä¸é¨ç¨äºå­å¨åç»æåå±ç¤ºè¿ä¸è¿ç¨ï¼ç¡®ä¿å®¢æ·ç«¯è½æ­£ç¡®æ¸²æâæèä¸­...âçç¶æï¼èä¸æ¯å±ç¤ºä¸å ä¹±ç ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â <strong>Signature</strong><strong>ï¼ç­¾åï¼éªè¯</strong>ï¼Anthropic ç API å¨æäºé«å®å¨æ¨¡å¼ä¸ä¼è¿åç­¾åå­æ®µä»¥éªè¯åå®¹çå®æ´æ§ãsdcb/chats çåç«¯æ¶æéæäº ChatServiceï¼æ¯æè¿ä¸ç­¾åæµçéä¼ ä¸å­å¨ï¼ç¡®ä¿äºä¸å®æ¹ API çè¡ä¸ºä¸è´æ§ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â <strong>åç HttpClient éå</strong>ï¼ä¸ºäºéé Claude çæµå¼ä¼ è¾ç¹æ§ï¼åç«¯æ ¸å¿ç»ä»¶ AnthropicChatService ä½¿ç¨åç HttpClient è¿è¡äºéåï¼æ¶åçº¦ 969 è¡ä»£ç åå¨ï¼ï¼æå¼äºå¯è½å­å¨å¼å®¹æ§é®é¢çç¬¬ä¸æ¹ SDK å°è£ï¼ä»èæ¯æäº JsonPolymorphic å±æ§æ¥ç²¾ç¡®å¤çåç§æµå¼äºä»¶ <sup><ins datetime="2026-01-24T19:37">3</ins></sup>ã</span></p>
<h2>3.3 æ°æ®æä¹åä¸å¤æ°æ®åºæ¯æ</h2>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">ä½ä¸ºä¼ä¸çº§ç½å³ï¼æ°æ®çå¯é æ§æ¯åºçº¿ãsdcb/chats æä¾äºæå¶çµæ´»çæ°æ®åºééæ¹æ¡ï¼</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â <strong>SQLite</strong>ï¼é»è®¤éç½®ï¼éåä¸ªäººå¼åèæå°å¢éå¿«éé¨ç½²ãæ éå®è£é¢å¤æå¡ï¼æ°æ®åºä»ä¸ºä¸ä¸ª .db æä»¶ï¼å¤ä»½æå¶æ¹ä¾¿ <sup>7</sup>ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â <strong>PostgreSQL / SQL Server</strong>ï¼éå¯¹éè¦é«å¹¶ååå¥ãè¯»ååç¦»æé«çº§æ¥è¡¨åè½çä¼ä¸ç¯å¢ãsdcb/chats ç ORM å±è®¾è®¡åè®¸éè¿ç®åçç¯å¢åé DBType åæ¢åºå±å­å¨å¼æï¼èæ éä¿®æ¹ä»£ç  <sup>8</sup>ã è¿ç§çµæ´»æ§ä½¿å¾ä»ä¸ªäººç¬è®°æ¬ä¸çéªè¯ååï¼PoCï¼å¹³æ»è¿ç§»å°åºäº Kubernetes ççäº§éç¾¤æä¸ºå¯è½ã</span></p>
<h1><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">4. éæå®æ½æåï¼ä»é¨ç½²å°èè°</span></h1>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">æ¬èå°æä¾è¯¦å°½çåæ­¥æä½æåï¼æå¯¼å¦ä½å° cc-switch è¿æ¥å° sdcb/chatsãæä»¬å°åè®¾è¯»èå·å¤åºæ¬ç Docker åå½ä»¤è¡æä½è½åã</span></p>
<h2>4.1 ç¬¬ä¸é¶æ®µï¼é¨ç½²ç½å³ (sdcb/chats)</h2>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">ç±äº sdcb/chats æä¾äºå®æ¹ Docker éåï¼è¿æ¯ææ¨èçé¨ç½²æ¹å¼ï¼è½å¤å±è½ä¸åæä½ç³»ç»ï¼Linux/Windows/macOSï¼å¸¦æ¥çç¯å¢å·®å¼ã</span></p>
<h3><span style="font-family: &quot;å¾®è½¯éé» Light&quot;; font-size: medium">4.1.1 Docker Compose ç¼æ</span></h3>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">ä¸ºäºç¡®ä¿éç½®çå¯ç»´æ¤æ§ï¼å»ºè®®ä½¿ç¨ docker-compose.yml èéåè¡ docker run å½ä»¤ãä»¥ä¸æ¯ä¸ä¸ªç»è¿çäº§ç¯å¢éªè¯çéç½®æ¨¡æ¿ï¼</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">services:</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">sqlserver:</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">image: mcr.microsoft.com/mssql/server:2025-latest</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">container_name: chats-sqlserver</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">environment:</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">ACCEPT_EULA: "Y"</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">MSSQL_SA_PASSWORD: "xxxxxx"</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">MSSQL_PID: "Developer"</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">ports:</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">- "1433:1433"</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">volumes:</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">- sqlserver_data:/var/opt/mssql</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">restart: unless-stopped</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">chats:</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">image: sdcb/chats:1.10</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">container_name: sdcb-chats</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">depends_on:</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">- sqlserver</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">environment:</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">DBType: "sqlserver"</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">ConnectionStrings__ChatsDB: "Server=sqlserver;Database=ChatsDB;User Id=sa;Password=xxxxxx;TrustServerCertificate=True;Encrypt=False"</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">ports:</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">- "8080:8080"</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">volumes:</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">- ./AppData:/app/AppData</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">restart: unless-stopped</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">volumes:</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">sqlserver_data:</span></p>
<p><strong><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">å³é®éç½®è§£æï¼</span></strong></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â <strong>ç«¯å£æ å°</strong>ï¼80:8080ãæ³¨æï¼å®¹å¨åé¨éå¸¸çå¬ 8080 ç«¯å£ï¼èæä»¬å°å¤é¨è®¿é®ç«¯å£è®¾ä¸º 8080ãè¿ä¸ª <strong>8080</strong> å°±æ¯åç»­å¨ cc-switch ä¸­éç½®çç«¯å£ ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â <strong>æ°æ®å·</strong>ï¼./app_data:/app/AppDataãè¿æ¯å¿é¡»çéç½®ãå¦æä¸æè½½æ­¤å·ï¼å®¹å¨éå¯åï¼ææç API Keyãç¨æ·æ°æ®åèå¤©è®°å½å°å¨é¨ä¸¢å¤±ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â <strong>æ°æ®åºç±»å</strong>ï¼æ¾å¼æå® DBType=sqlserver è½å¤é¿åç¨åºå¨å¯å¨æ¶çæµæ°æ®åºç±»åï¼å å¿«å¯å¨éåº¦ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">å¯å¨æå¡ï¼</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">docker-compose up -d</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">å¯å¨åï¼éè¿æµè§å¨è®¿é® http://localhost:8080ï¼å¦æè½çå°ç»å½çé¢ï¼è¯´æç½å³å·²æ­£å¸¸è¿è¡ã</span></p>
<h3>4.1.2 API å¯é¥çæä¸æéç®¡æ§</h3>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">å¨å°ç½å³æ´é²ç»å®¢æ·ç«¯ä¹åï¼å¿é¡»éç½®é´ææºå¶ãsdcb/chats v1.9.0 å¼å¥äºä¸é¨ç <strong>Buildï¼å¼åèï¼</strong> æ¨¡å ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">1. <strong>ç®¡çåç»å½</strong>ï¼ä½¿ç¨åå§è´¦å·ç»å½ç³»ç»ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">2. <strong>è¿å¥å¼åèä¸­å¿</strong>ï¼ç¹å»å¯¼èªæ çâAPIâ èåã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">3. <strong>å¯é¥ç®¡ç</strong>ï¼éæ©âAPI Keyâã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">4. <strong>åå»ºå¯é¥</strong>ï¼ç¹å»âCreate New Keyâãå»ºè®®ä¸ºæ¯ä¸ªå®¢æ·ç«¯ï¼å¦âLaptop-Claude-Codeâï¼åå»ºä¸ä¸ªç¬ç«ç Keyï¼å¹¶è®¾ç½®åççè¿ææ¶é´ï¼å¦ 90 å¤©ï¼ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">5. <strong>å¤å¶å¯é¥</strong>ï¼ç³»ç»çæçå¯é¥ï¼ä¾å¦ sk-sdcb-8f7a...ï¼ä»å¨åå»ºæ¶æ¾ç¤ºä¸æ¬¡ï¼å¡å¿å¦¥åä¿å­ãè¯¥å¯é¥å°ç¨äº cc-switch çé´æã</span></p>
<h2>4.2 ç¬¬äºé¶æ®µï¼éç½®å®¢æ·ç«¯ (cc-switch)</h2>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">åå°å®¢æ·ç«¯æºå¨ï¼æä»¬å°å©ç¨ cc-switch çèªå®ä¹æä¾ååè½æ¥æ¥å¥ååæ­å»ºçç½å³ã</span></p>
<h3>4.2.1 æ·»å èªå®ä¹æä¾å (Custom Provider)</h3>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">æå¼ cc-switch ä¸»çé¢ï¼</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">1. ç¹å»å³ä¸è§ç <strong>Add Provider (+)</strong> æé®ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">2. å¨å¼¹åºçéç½®çªå£ä¸­ï¼<strong>Schema</strong> ç±»åçéæ©è³å³éè¦ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â <strong>Provider Name</strong>: è¾å¥æäºè¯å«çåç§°ï¼ä¾å¦ Local-Gateway æ Sdcb-Devã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â <strong>API Key</strong>: ç²è´´å¨ 4.1.2 æ­¥éª¤ä¸­çæç sk-sdcb-... å¯é¥ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â <strong>API URL (Base URL)</strong>: è¿æ¯æå®¹æåºéçç¯èã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â  æ ¹æ® sdcb/chats çææ¡£å Anthropic SDK çè§èï¼Base URL éå¸¸æå API çæ ¹è·¯å¾ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â  <strong>æ¨èéç½®</strong>: http://localhost:8080</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â  <strong>åçè§£æ</strong>: Claude Code ç SDK ä¼èªå¨å¨ Base URL åè¿½å  /v1/messagesãå¦æä½ éç½®æ http://localhost:8080/v1ï¼SDK å¯è½ä¼è¯·æ± http://localhost:8080/v1/v1/messages å¯¼è´ 404 éè¯¯ãåä¹ï¼å¦æ SDK è¾ä¸ºâæºè½âå°å»é¤äºæ«å°¾ææ ï¼éç½®ä¸º http://localhost:8080/v1 ä¹æ¯å¯è¡çãå»ºè®®åå°è¯æ ¹è·¯å¾ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;"><del datetime="2026-01-24T19:37"><img src="https://img2024.cnblogs.com/blog/510/202601/510-20260125092333153-1660708092.png" alt="è¡¨æ ¼

AI çæçåå®¹å¯è½ä¸æ­£ç¡®ã" width="624" height="341"></del><del datetime="2026-01-24T19:37"></del></span></p>
<h3>4.2.2 è¿éæ§æµè¯ (Speed Test)</h3>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">éç½®å®æåï¼ä¸è¦æ¥äºå¯ç¨ãå¨ Provider åè¡¨ä¸­æ¾å°æ°å»ºç Local-Gatewayï¼</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">1. ç¹å»æ¡ç®å³ä¾§ç <strong>Speed Testï¼æµéï¼</strong> å¾æ ï¼éå¸¸æ¯ä¸ä¸ªéªçµæä»ªè¡¨çå¾æ ï¼ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">2. cc-switch ä¼åè¯¥ URL åéä¸ä¸ªè½»éçº§ç HEAD æ GET è¯·æ±ï¼éå¸¸æ¯æ¥è¯¢æ¨¡ååè¡¨ /v1/models æ /modelsï¼ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">3. <strong>ç»¿è²ææ </strong>ï¼è¡¨ç¤º TCP è¿æ¥å»ºç«æåï¼ä¸ HTTP ç¶æç æ­£å¸¸ï¼200 OKï¼ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">4. <strong>çº¢è²ææ </strong>ï¼è¡¨ç¤ºè¿æ¥å¤±è´¥ãå¸¸è§åå åæ¬ï¼</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â Docker å®¹å¨æªå¯å¨ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â é²ç«å¢æ¦æªäº 8080 ç«¯å£ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â URL æ¼åéè¯¯ï¼å¦å¤ä½çç©ºæ ¼ï¼ã</span></p>
<h2>4.3 ç¬¬ä¸é¶æ®µï¼å¨é¾è·¯èè°ä¸éªè¯</h2>
<h6><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">4.3.1 æ¿æ´»ä¸ç¯å¢æ³¨å¥</span></h6>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">å¨ cc-switch ä¸­éä¸­ Local-Gateway å¹¶ç¹å» <strong>Enable</strong>ãæ­¤æ¶ï¼cc-switch ä¼å°ä»¥ä¸åéåå¥å½åç¨æ·ç Shell éç½®æä»¶æä¸´æ¶ç session åéä¸­ï¼<ins datetime="2026-01-24T19:37"></ins></span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">export ANTHROPIC_BASE_URL="http://localhost:8080"<br>export ANTHROPIC_API_KEY="sk-sdcb-...<ins datetime="2026-01-24T19:37">"</ins></span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;"><strong>æ³¨æ</strong>ï¼ä¸ºäºç¡®ä¿åéçæï¼å»ºè®®éå¯ç»ç«¯çªå£ï¼æèå¨å½åç»ç«¯æ§è¡ source ~/.zshrc (æ .bashrc)ã</span></p>
<h6><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">4.3.2 è¿è¡ Claude Code</span></h6>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">å¨ç»ç«¯ä¸­å¯å¨ Claude Codeï¼<ins datetime="2026-01-24T19:37"></ins></span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">claude</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">æèä½¿ç¨è¯æ­å½ä»¤ï¼<ins datetime="2026-01-24T19:37"></ins></span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">claude doctor</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">å¦æéææåï¼doctor å½ä»¤çè¾åºä¸­åºåå«ï¼</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â <strong>API Endpoint</strong>: http://localhost:8080 (Override detected)</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â <strong>Connection Status</strong>: OK</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">å°è¯åéä¸ä¸ªç®åçæä»¤ï¼ä¾å¦âHello, who are you?âã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â è¯·æ±è·¯å¾ï¼Claude CLI -&gt; cc-switch Env -&gt; http://localhost:8080/v1/messages</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â å¤çé»è¾ï¼sdcb/chats æ¥æ¶è¯·æ± -&gt; é´æéè¿ -&gt; è½¬åè³åå°éç½®çæ¨¡åï¼å¦ OpenAI GPT-4o ç»è½¬æ¢åï¼ -&gt; è¿åååºã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â ååºè·¯å¾ï¼sdcb/chats å°ååºè½¬æ¢ä¸º Anthropic æ ¼å¼ï¼åå« content, role, id ç­å­æ®µï¼ -&gt; Claude CLI æ¸²æè¾åºã</span></p>
<h1>5. é«çº§ç¹æ§ä¸ä¼ä¸çº§åºç¨åºæ¯</h1>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">åºç¡è¿æ¥æéåï¼æä»¬å¯ä»¥å©ç¨è¿ä¸æ¶æå®ç°æ´å¤é«çº§åè½ï¼åååæ¥æ¬å°ç½å³çæ½åã</span></p>
<h2>5.1 åè®®è½¬æ¢ï¼ç¨ OpenAI æ¨¡åé©±å¨ Claude å·¥å·é¾</h2>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">è¿æ¯ä¸ä¸ªæå·å¸å¼åçåºæ¯ãç±äº sdcb/chats å·å¤åè®®è½¬æ¢è½åï¼æä»¬å¯ä»¥å¨åç«¯éç½®ä¸ä¸ª OpenAI çæ¨¡åï¼å¦ gpt-4o-miniï¼ï¼ä½å¨åç«¯ï¼Claude Codeï¼çæ¥ï¼å®ä»ç¶æ¯å¨ä¸ä¸ä¸ª Anthropic æ¨¡åå¯¹è¯ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;"><strong>å®ç°åç</strong>ï¼</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">1. å¨ sdcb/chats åå°ï¼æ·»å ä¸ä¸ª OpenAI æä¾åï¼å¹¶æ·»å æ¨¡å gpt-5.2-chatï¼æ¨¡åæ¾ç¤ºåç§°anthropic/claude-sonnet-4.5ï¼è®©Claude Code è®¤ä¸ºä»è°ç¨çæ¯claude-4-5-sonnetã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">2. å½ Claude Code ååºè¯·æ±æå® model: </span><a name="OLE_LINK1"></a><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">claude-</span><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">4-5-sonnet æ¶ï¼ç½å³æ¦æªè¯¥è¯·æ±ï¼å°å¶ç¿»è¯ä¸º OpenAI ç Chat Completions æ ¼å¼ï¼åéç» OpenAIï¼æ¶å°åå¤åï¼åå° OpenAI ç Delta ååºç¿»è¯å Anthropic ç Message Delta æ ¼å¼ã<br><strong>ä»·å¼</strong>ï¼è¿åè®¸å¼åèå©ç¨ Claude Code ä¼ç§çä»£ç äº¤äºä½éªï¼Agentic Workflowï¼ï¼åæ¶å©ç¨ OpenAI æ¨¡åå¨æäºç¹å®ä»»å¡ä¸çä¼å¿ææ´ä½å»çä»·æ ¼ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;"><img src="https://img2024.cnblogs.com/blog/510/202601/510-20260125092333349-1800839900.png" alt="å¾å½¢ç¨æ·çé¢

AI çæçåå®¹å¯è½ä¸æ­£ç¡®ã" width="624" height="777"></span></p>
<h2><span style="font-family: &quot;å¾®è½¯éé» Light&quot;; font-size: medium">5.2 éä¸­åç®¡ç MCP æå¡å¨</span></h2>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">Model Context Protocol (MCP) æ¯è¿æ¥ AI ä¸æ¬å°æ°æ®çæ¡¥æ¢ãå¨ cc-switch v3.8.0 ç SQLite æ¶æä¸­ï¼MCP æå¡å¨çéç½®è¢«éä¸­ç®¡ç <sup>1</sup>ã <strong>å·¥ä½æµ</strong>ï¼</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">1. å¨ cc-switch ç <strong>MCP Servers</strong> æ ç­¾é¡µä¸­ï¼æ·»å æ¬å°çæ°æ®åºè¿æ¥å·¥å·ï¼å¦ sqlite-mcpï¼ææä»¶ç³»ç»å·¥å·ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">2. è¿äºéç½®è¢«å­å¨å¨ cc-switch.db ä¸­ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">3. å½å¯ç¨ Local-Gateway æ¶ï¼cc-switch ä¸ä»æ³¨å¥ API URLï¼è¿ä¼çæå¯¹åºç claude_desktop_config.json æä»¶ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">4. <strong>å³é®ç¹</strong>ï¼sdcb/chats ç½å³æ¬èº«<strong>ä¸</strong>ç´æ¥æ§è¡ MCP å·¥å·ãMCP çæ§è¡ä»ç¶åçå¨å®¢æ·ç«¯ï¼Claude CLIï¼ãç½å³çä½ç¨æ¯ä¼ é Tool Definitionï¼å·¥å·å®ä¹ï¼å Tool Callï¼å·¥å·è°ç¨è¯·æ±ï¼ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">5. è¿æå³çï¼å³ä½¿æ¯éè¿ç½å³è¿æ¥ï¼ä½ ä¾ç¶å¯ä»¥å®å¨å°ä½¿ç¨æ¬å°ç MCP å·¥å·ï¼ç½å³åªæ¯è´è´£ææ¬æ¨çï¼æ°æ®çå®éè¯»åç±æ¬å° CLI è¿ç¨æ§å¶ï¼è¿å¨å®å¨æ§ä¸æ¯ä¸ä¸ªå·¨å¤§çä¼å¿ã</span></p>
<h2>5.3 å®¡è®¡ä¸åè§ (DLP)</h2>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">å¯¹äºä¼ä¸èè¨ï¼ç´æ¥åè®¸å¼åèè¿æ¥å¬æäº API å­å¨æ°æ®æ³é²é£é©ãéè¿ sdcb/chats ç½å³ï¼ä¼ä¸å¯ä»¥å®æ½ï¼</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â <strong>æææ°æ®æ¦æª</strong>ï¼å¨ç½å³å±éæ PIIï¼ä¸ªäººèº«ä»½ä¿¡æ¯ï¼æ«ææä»¶ï¼é»æ­¢åå«ä¿¡ç¨å¡å·æç§é¥çä»£ç çæ®µåéå°ä¸æ¸¸æ¨¡åã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â <strong>ææ¬éé¢</strong>ï¼ä¸ºä¸åé¨é¨è®¾ç½®ä¸åç Token ä½¿ç¨ä¸éï¼é²æ­¢æå¤çé«é¢è´¦åã</span></p>
<h1>6. æéææ¥ä¸æ§è½è°ä¼</h1>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">å¨å¤æçåå¸å¼ç³»ç»ä¸­ï¼æéå¨æé¾åãä»¥ä¸æ¯éå¯¹è¯¥æ¶æçæ·±åº¦æéææ¥æåã</span></p>
<h2>6.1 å¸¸è§éè¯¯ä»£ç è§£æ</h2>
<h6><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">404 Not Found</span></h6>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â <strong>ç°è±¡</strong>ï¼cc-switch æµéå¤±è´¥ï¼æ Claude æç¤º API ç«¯ç¹ä¸å¯è¾¾ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â <strong>åå åæ</strong>ï¼</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">1. <strong>URL </strong><strong>è·¯å¾éè¯¯</strong>ï¼æå¸¸è§ãç¨æ·å¡«åäº .../v1/messagesï¼å¯¼è´æç»è¯·æ±åæ .../v1/messages/v1/messagesã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">2. <strong>ç½å³æªå¯å¨</strong>ï¼Docker å®¹å¨æäºã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â <strong>è§£å³æ¹æ¡</strong>ï¼</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â æ£æ¥ cc-switch ä¸­ç Base URL æ¯å¦ç²¾ç®ä¸º http://host:portã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â ä½¿ç¨ docker logs sdcb-chats æ¥çå®¹å¨æ¥å¿ï¼ç¡®è®¤çå¬ç«¯å£ã</span></p>
<h6><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">401 Unauthorized</span></h6>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â <strong>ç°è±¡</strong>ï¼è¿æ¥æåï¼ä½è¯·æ±è¢«æç»ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â <strong>åå åæ</strong>ï¼</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">1. <strong>API Key </strong><strong>éè¯¯</strong>ï¼å¤å¶äºéè¯¯ç Keyï¼æ Key å·²è¿æã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">2. <strong>Header </strong><strong>ç¼ºå¤±</strong>ï¼æäºä¸­é´ä»£çï¼Nginxï¼è¿æ»¤æäº x-api-key æ anthropic-api-key å¤´ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â <strong>è§£å³æ¹æ¡</strong>ï¼</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â å¨ sdcb/chats åå°éæ°çæ Keyã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â æ£æ¥ä¸­é´ä»£çéç½®ï¼ç¡®ä¿éä¼ ææèªå®ä¹ Headerã</span></p>
<h6><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">Stream Interrupted / Thinking Block Missing</span></h6>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â <strong>ç°è±¡</strong>ï¼åå¤ä¸­æ­ï¼æèææä½¿ç¨çæ¯æ¨çæ¨¡åï¼å´çä¸å°æèè¿ç¨ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â <strong>åå åæ</strong>ï¼</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">1. <strong>ç½å³çæ¬è¿ä½</strong>ï¼ä½¿ç¨ v1.9.0 ä¹åççæ¬ï¼ä¸æ¯æ Thinking å­æ®µè§£æã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">2. <strong>ç¼å²åºéç½®</strong>ï¼Nginx ç­ååä»£çå¼å¯äº Response Bufferingï¼å¯¼è´æµå¼æ°æ®æ æ³å®æ¶å°è¾¾å®¢æ·ç«¯ï¼ç´å°è¶æ¶ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â <strong>è§£å³æ¹æ¡</strong>ï¼</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">1. åçº§ sdcb/chats è³ææ°çã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">2. å¨ Nginx éç½®ä¸­å³é­ç¼å²ï¼proxy_buffering off;ã</span></p>
<h2><span style="font-family: &quot;å¾®è½¯éé» Light&quot;; font-size: medium">6.2 æ§è½è°ä¼å»ºè®®</span></h2>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â <strong>æ°æ®åºä¼å</strong>ï¼å¦æä½¿ç¨ SQLite ä¸å¹¶åéè¾å¤§ï¼å¯è½ä¼éå° database is locked éè¯¯ãå»ºè®®è¿ç§»è³ PostgreSQL/SQLServerã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">â <strong>ç½ç»å»¶è¿</strong>ï¼å°½éç¡®ä¿ cc-switch å sdcb/chats é¨ç½²å¨ä½å»¶è¿çç½ç»ç¯å¢ä¸­ï¼å¦å±åç½ï¼ãæ¯ä¸æ¯«ç§çå»¶è¿å¨æµå¼ä¼ è¾ä¸­é½ä¼è¢«æ¾å¤§ï¼å½±åâæå­æºâææçæµçåº¦ã</span></p>
<h4>&nbsp;</h4>
<h1>7. ç»è®ºä¸å±æ</h1>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">éè¿å° <strong>cc-switch</strong> çå®¢æ·ç«¯ç¼æè½åä¸ <strong>sdcb/chats</strong> çç½å³å¤çè½åç¸ç»åï¼æä»¬æå»ºäºä¸ä¸ªå¼ºå¤§ãçµæ´»ä¸å®å¨å¯æ§çæ¬å° AI å¼åç¯å¢ãè¿ä¸æ¶æä¸ä»è§£å³äº API ç®¡ççç¢çåé®é¢ï¼è¿éè¿ä¸­é´å±çå¼å¥ï¼ä¸ºæªæ¥çåè½æ©å±ï¼å¦ç§ææ¨¡åå¾®è°æ¥å¥ãç»ä¸çç¥è¯åºæ£ç´¢å¢å¼º RAGï¼é¢çäºæ¥å£ã</span></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">éç AI ææ¯çæ¼è¿ï¼<strong>âç¦å®¢æ·ç«¯ï¼CLIï¼+ èç½å³ï¼Gatewayï¼+ å¼ºæ¨¡åï¼Modelï¼â</strong> çæ¶æå°æ¥çæä¸ºä¸»æµã<strong>cc-switch</strong> å <strong>sdcb/chats</strong> ä½ä¸ºåèªé¢åçä½¼ä½¼èï¼å¶æ·±åº¦éæä¸ä»æ¯ææ¯ä¸çäºè¡¥ï¼æ´æ¯å¼æºçæåä½ç²¾ç¥çä½ç°ãå¯¹äºè¿½æ±æè´æçåæ°æ®å®å¨çå¼åèä¸ä¼ä¸èè¨ï¼è¿å¥æ¹æ¡æ çæ¯å½åæä½³çå®è·µè·¯å¾ä¹ä¸ã</span></p>
<h2>å¼ç¨çæç« </h2>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">1. cc-switch/docs/release-note-v3.8.0-en.mdï¼ </span><a href="https://github.com/farion1231/cc-switch/blob/main/docs/release-note-v3.8.0-en.md" rel="noopener nofollow"><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">https://github.com/farion1231/cc-switch/blob/main/docs/release-note-v3.8.0-en.md</span></a></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">2. cc-switch/docs/release-note-v3.8.0-zh.md </span><a href="https://github.com/farion1231/cc-switch/blob/main/docs/release-note-v3.8.0-zh.md" rel="noopener nofollow"><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">https://github.com/farion1231/cc-switch/blob/main/docs/release-note-v3.8.0-zh.md</span></a></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">3. chats/doc/en-US/release-notes/1.9.0.md at mainï¼ </span><a href="https://github.com/sdcb/chats/blob/main/doc/en-US/release-notes/1.9.0.md" rel="noopener nofollow"><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">https://github.com/sdcb/chats/blob/main/doc/en-US/release-notes/1.9.0.md</span></a></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">4. README.md - farion1231/cc-switch  </span><a href="https://github.com/farion1231/cc-switch/blob/main/README.md" rel="noopener nofollow"><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">https://github.com/farion1231/cc-switch/blob/main/README.md</span></a></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">5. CHANGELOG.md - farion1231/cc-switchï¼ </span><a href="https://github.com/farion1231/cc-switch/blob/main/CHANGELOG.md" rel="noopener nofollow"><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">https://github.com/farion1231/cc-switch/blob/main/CHANGELOG.md</span></a></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">6. I just released Sdcb.Chats v1.9.0, a major update to my open-source .NET AI Gateway: adds full support for Claude 4.5 (Opus/Sonnet), OpenAI Image APIs, and is now built on .NET 10 : r/dotnet - Reddit, </span><a href="https://www.reddit.com/r/dotnet/comments/1pc1nxd/i_just_released_sdcbchats_v190_a_major_update_to/" rel="noopener nofollow"><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">https://www.reddit.com/r/dotnet/comments/1pc1nxd/i_just_released_sdcbchats_v190_a_major_update_to/</span></a></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">7. README.md - sdcb/chatsï¼ </span><a href="https://github.com/sdcb/chats/blob/main/README.md" rel="noopener nofollow"><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">https://github.com/sdcb/chats/blob/main/README.md</span></a></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">8. sdcb/chats: User-friendly Enterprise Ready AI Interface (Supports Ollama, OpenAI API, DeepSeek...) </span><a href="https://github.com/sdcb/chats" rel="noopener nofollow"><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">https://github.com/sdcb/chats</span></a></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">9. Publishing and exposing ports | Docker Docs </span><a href="https://docs.docker.com/get-started/docker-concepts/running-containers/publishing-ports/" rel="noopener nofollow"><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">https://docs.docker.com/get-started/docker-concepts/running-containers/publishing-ports/</span></a></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">10. farion1231/cc-switch: A cross-platform desktop All-in-One .. </span><a href="https://github.com/farion1231/cc-switch" rel="noopener nofollow"><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">https://github.com/farion1231/cc-switch</span></a></p>
<p><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">11. cc-switch/docs/release-note-v3.9.0-en.md at main </span><a href="https://github.com/farion1231/cc-switch/blob/main/docs/release-note-v3.9.0-en.md" rel="noopener nofollow"><span style="font-family: &quot;å¾®è½¯éé» Light&quot;">https://github.com/farion1231/cc-switch/blob/main/docs/release-note-v3.9.0-en.md</span></a></p>
</div>
<div id="MySignature" role="contentinfo">
    <p>æ¬¢è¿å¤§å®¶æ«æä¸é¢äºç»´ç æä¸ºæçå®¢æ·ï¼æ¶ä½ ä¸äº</p>
<img src="https://images.cnblogs.com/cnblogs_com/shanyou/57459/o_220125090408_%E9%82%80%E8%AF%B7%E4%BA%8C%E7%BB%B4%E7%A0%81-258px.jpeg" width="170">
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.011805555555555555" data-date-updated="2026-01-25 09:41">2026-01-25 09:24</span>&nbsp;
<a href="https://www.cnblogs.com/shanyou">å¼ åå</a>&nbsp;
éè¯»(<span id="post_view_count">38</span>)&nbsp;
è¯è®º(<span id="post_comment_count">3</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19527405);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19527405', targetLink: 'https://www.cnblogs.com/shanyou/p/19527405', title: 'æå»ºåºäº cc-switch ä¸ sdcb/chats çAI ç¼ç¨åºç¡è®¾æ½' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ STM32ä¹æ§å¶åéä¸å½æ°çå­å¨ä½ç½® ]]></title>
    <link>https://www.cnblogs.com/lsksp/p/19527780</link>
    <guid>d03961946c5c5540fd96b676b6bf299e</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/lsksp/p/19527780" title="åå¸äº 2026-01-24 23:01">
    <span role="heading" aria-level="2">STM32ä¹æ§å¶åéä¸å½æ°çå­å¨ä½ç½®</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        STM32 åå­å®ä½æ¯ä¼åç³»ç»æ§è½ãè§£å³ç¡¬ä»¶å¼å®¹æ§é®é¢çæ ¸å¿æå·§ï¼å¯è§£å³ Cache ä¸ DMA å²çªãå©ç¨ ITCM/DTCM æåè®¿é®éåº¦ãåºå® DMA ç¼å²åºå°åè§çè¿ç»­ç©çåå­ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="stm32ä¹æ§å¶åéä¸å½æ°çå­å¨ä½ç½®">STM32ä¹æ§å¶åéä¸å½æ°çå­å¨ä½ç½®</h1>
<p>STM32 åå­å®ä½æ¯ä¼åç³»ç»æ§è½ãè§£å³ç¡¬ä»¶å¼å®¹æ§é®é¢çæ ¸å¿æå·§ï¼å¯è§£å³ Cache ä¸ DMA å²çªãå©ç¨ ITCM/DTCM æåè®¿é®éåº¦ãåºå® DMA ç¼å²åºå°åè§çè¿ç»­ç©çåå­ã</p>
<h2 id="ä¸åéå®ä½æ¹æ³">ä¸ãåéå®ä½æ¹æ³</h2>
<p>åéå®ä½åä¸¤ç§æ¹å¼ï¼ééãåä¸ªåéç²¾åå®ä½ãåãæ¹éåéç®¡çãåºæ¯ã</p>
<h3 id="æ¹æ³-1attribute--åå­å°ååä¸ªåé">æ¹æ³ 1ï¼<strong>attribute</strong> + åå­å°åï¼åä¸ªåéï¼</h3>
<p>å©ç¨ç¼è¯å¨<code>__attribute__((at(address)))</code>å±æ§ï¼ç´æ¥ç»å®åéå°æå®å°åï¼ç®åé«æã</p>
<pre><code class="language-c">// ç¤ºä¾ï¼uint32_tæ°ç»å®ä½å°0x20001000ï¼4å­èå¯¹é½ï¼
__ALIGNED(4) __attribute__((at(0x20001000))) uint32_t dma_buffer[1024] = {0};
</code></pre>
<p><strong>æ³¨æ</strong>ï¼</p>
<ul>
<li>å°åéå¨è¯çææåå­èå´ï¼å¦åè§¦åç¡¬ä»¶æéï¼</li>
<li>æ»¡è¶³æ°æ®å¯¹é½è¦æ±ï¼char=1 å­èãshort=2 å­èãint/float=4 å­èãdouble=8 å­èï¼ï¼</li>
<li>é¿åä¸ç³»ç»åé / æ  / å å°åéå ï¼å¯æ¥.map æä»¶ç¡®è®¤ï¼ã</li>
</ul>
<h3 id="æ¹æ³-2attribute--æ®µå--åæ£å è½½æä»¶æ¹éåé">æ¹æ³ 2ï¼<strong>attribute</strong> + æ®µå + åæ£å è½½æä»¶ï¼æ¹éåéï¼</h3>
<p>æ¹éå®ä½å¤åéæ¶ï¼éè¿ãèªå®ä¹æ®µå + åæ£å è½½æä»¶ãå®ç°ç»ä¸ç®¡çã</p>
<h4 id="1-å®ä¹å¸¦èªå®ä¹æ®µåçåé">1. å®ä¹å¸¦èªå®ä¹æ®µåçåé</h4>
<pre><code class="language-c">// å¤DMAç¼å²åºå½ç±»å°"MY_DMA_BUFFER"æ®µ
__attribute__((section("MY_DMA_BUFFER"))) uint32_t uart_dma_buf[512] = {0};
__attribute__((section("MY_DMA_BUFFER"))) uint8_t i2c_dma_buf[256] = {0};
</code></pre>
<h4 id="2-ä¿®æ¹åæ£å è½½æä»¶sct">2. ä¿®æ¹åæ£å è½½æä»¶ï¼.sctï¼</h4>
<pre><code class="language-assembly">; STM32åå­å®ä½ç¤ºä¾ - åæ£å è½½æä»¶
LR_IROM1 0x08000000 0x00020000  {      ; Flashå è½½åºï¼0x08000000~0x08020000
    ER_IROM1 0x08000000 0x00020000  {  ; Flashæ§è¡åº
        *.o (RESET, +First)
        *(InRoot$$Sections)
        .ANY (+RO)
        .ANY (+XO)
    }
    RW_IRAM1 0x20000000 0x00020000  {  ; æ®éSRAMæ°æ®åºï¼0x20000000~0x20020000
        .ANY (+RW +ZI)
    }
    ; èªå®ä¹DMAç¼å²åºæ®µï¼0x20005000~0x20008000ï¼12KBï¼
    RW_DMA_BUFFER 0x20005000 0x00003000  {
        *.o (MY_DMA_BUFFER)            ; æ å°MY_DMA_BUFFERæ®µå°è¯¥åºå
    }
}
</code></pre>
<h2 id="äºå½æ°å®ä½æ¹æ³">äºãå½æ°å®ä½æ¹æ³</h2>
<p>æ ¸å¿æ¯å°é«é¢å½æ°æ¾å° ITCM ç­é«éåå­æåæ§è¡éåº¦ï¼é»è¾ä¸åéç±»ä¼¼ï¼éæ å°å°ãæ§è¡åºåãã</p>
<h3 id="1-åä¸ªå½æ°å®ä½">1. åä¸ªå½æ°å®ä½</h3>
<p>éè¿<code>__attribute__((section("æ®µå")))</code>æ æ³¨å½æ°ï¼ä¿®æ¹åæ£å è½½æä»¶æ å°å° ITCMï¼ä»¥ STM32H7 ç ITCM=0x00000000 ä¸ºä¾ï¼ã</p>
<h4 id="1å®ä¹å¸¦æ®µåçå½æ°">ï¼1ï¼å®ä¹å¸¦æ®µåçå½æ°</h4>
<pre><code class="language-c">// PIDå½æ°å½ç±»å°MY_FUNC_SECTIONæ®µ
__attribute__((section("MY_FUNC_SECTION"))) float pid_calc(float target, float current)
{
    static float err = 0, err_last = 0;
    float kp = 1.2, ki = 0.1, kd = 0.05;
    err = target - current;
    float output = kp*err + ki*(err+err_last) + kd*(err-err_last);
    err_last = err;
    return output;
}
</code></pre>
<h4 id="2ä¿®æ¹åæ£å è½½æä»¶">ï¼2ï¼ä¿®æ¹åæ£å è½½æä»¶</h4>
<pre><code class="language-assembly">; å«å½æ°å®ä½çåæ£å è½½æä»¶
LR_IROM1 0x08000000 0x00020000  {      ; Flashå è½½åº
    ER_IROM1 0x08000000 0x00020000  {  ; Flashæ§è¡åº
        *.o (RESET, +First)
        *(InRoot$$Sections)
        .ANY (+RO)
        .ANY (+XO)
    }
    RW_IRAM1 0x20000000 0x00020000  {  ; æ®éSRAMæ°æ®åº
        .ANY (+RW +ZI)
    }
    ; ITCMæ§è¡åºï¼0x00000000~0x00010000ï¼64KBï¼
    ER_ITCM 0x00000000 0x00010000  {
        *.o (MY_FUNC_SECTION)          ; æ å°å½æ°æ®µå°ITCM
    }
}
</code></pre>
<h3 id="2-æ¹éå½æ°å®ä½">2. æ¹éå½æ°å®ä½</h3>
<p>å°æ´ä¸ª.c æä»¶çå½æ°å®ä½å°æå®åºåï¼ä¸¤ç§æ¹å¼ï¼</p>
<ul>
<li>
<p>ç¼è¯å¨éé¡¹ï¼ARMCCï¼ï¼æ·»å <code>--section=.text:MY_FUNC_SECTION</code>ï¼</p>
</li>
<li>
<p>åæ£å è½½æä»¶ç´æ¥æå®æä»¶ï¼</p>
<pre><code class="language-assembly">ER_ITCM 0x00000000 0x00010000  {
    pid.o (+XO)  ; pid.cææå¯æ§è¡ä»£ç æ¾å°ITCM
}
</code></pre>
</li>
</ul>
<h3 id="3-éªè¯æ¹æ³">3. éªè¯æ¹æ³</h3>
<p>ç¼è¯åæå¼å·¥ç¨<code>Output</code>æä»¶å¤¹ç.map æä»¶ï¼æç´¢å½æ°åï¼å¦<code>pid_calc</code>ï¼ï¼æ¥ç<code>Base Address</code>æ¯å¦ä¸º ITCM èµ·å§å°åï¼å¦ 0x00000000 å¼å¤´ï¼ï¼ç¡®è®¤å®ä½æåã</p>
<h2 id="ä¸å®ææå·§ä¸æ³¨æäºé¡¹">ä¸ãå®ææå·§ä¸æ³¨æäºé¡¹</h2>
<h3 id="1-åå­åºåéæ©ç­ç¥">1. åå­åºåéæ©ç­ç¥</h3>
<table>
<thead>
<tr>
<th style="text-align: center">åå­ç±»å</th>
<th style="text-align: center">éç¨åºæ¯</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">DTCM</td>
<td style="text-align: center">é«é¢è®¿é®çå¨å±åéï¼é¶ç­å¾å¨æï¼</td>
</tr>
<tr>
<td style="text-align: center">ITCM</td>
<td style="text-align: center">å³é®å½æ°ãä¸­æ­æå¡ç¨åº</td>
</tr>
<tr>
<td style="text-align: center">AXI SRAM</td>
<td style="text-align: center">å¤§å®¹é DMA ç¼å²åº</td>
</tr>
<tr>
<td style="text-align: center">æ®é SRAM</td>
<td style="text-align: center">éç¨åéå­å¨</td>
</tr>
</tbody>
</table>
<h3 id="2-ç¼å­ä¸è´æ§å¤ç">2. ç¼å­ä¸è´æ§å¤ç</h3>
<p>ä½¿ç¨ Cache æ¶ï¼DMA æä½éä¿è¯ç¼å­ä¸è´æ§ï¼</p>
<pre><code class="language-c">// DMAåéåæ¸çç¼å­
SCB_CleanDCache_by_Addr(dma_buffer, sizeof(dma_buffer));

// DMAæ¥æ¶åå¤±æç¼å­
SCB_InvalidateDCache_by_Addr(dma_buffer, sizeof(dma_buffer));
</code></pre>
<h3 id="3-æ ¸å¿æ³¨æäºé¡¹">3. æ ¸å¿æ³¨æäºé¡¹</h3>
<ul>
<li>å°åè¶çï¼å®ä½å°åéå¹éè¯çåå­èå´ï¼å¦åç¨åºè·é£ï¼æ ¸å¯¹è¯çæåï¼ï¼</li>
<li>å¯¹é½éè¯¯ï¼å½æ°å¥å£å°åé 4 å­èå¯¹é½ï¼å¦åè§¦å HardFault ä¸­æ­ï¼</li>
<li>Cache ä¸è´æ§ï¼Cache åºæ°æ® / DMA è®¿é®åéå·æ°ç¼å­ï¼é¿åæ°æ®éä¹±ï¼</li>
<li>æ®µå²çªï¼èªå®ä¹æ®µå¿ä¸ç³»ç»æ®µéå ï¼ç¼è¯æº¢åºéè°æ´åæ£å è½½æä»¶å°å / å¤§å°ã</li>
</ul>
<h2 id="æ»ç»">æ»ç»</h2>
<p>STM32 åå­å®ä½æ¯è§£å³æ§è½ä¸å¼å®¹æ§é®é¢çå³é®æè½ï¼</p>
<ol>
<li>åéå¯éè¿<code>__attribute__((at(å°å)))</code>ï¼åä¸ªï¼ææ®µå + åæ£å è½½æä»¶ï¼æ¹éï¼å®ä½ï¼</li>
<li>å½æ°éæ æ³¨èªå®ä¹æ®µåï¼æ å°å° ITCM ç­é«éåå­ï¼éè¿.map æä»¶éªè¯ï¼</li>
<li>éè§é¿å°åè¶çãå¯¹é½éè¯¯ç­é®é¢ï¼åçéæ©åå­åºåå¹¶å¤çç¼å­ä¸è´æ§ã</li>
</ol>
<p>ææ¡è¯¥ææ¯å¯æ¾èæå STM32 ç³»ç»æ§è½ä¸å¯é æ§ï¼æ¯åµå¥å¼å¼åèè¿é¶çå¿å¤æè½ã</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-24 23:01">2026-01-24 23:01</span>&nbsp;
<a href="https://www.cnblogs.com/lsksp">æ¯ç¹åé³</a>&nbsp;
éè¯»(<span id="post_view_count">23</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19527780);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19527780', targetLink: 'https://www.cnblogs.com/lsksp/p/19527780', title: 'STM32ä¹æ§å¶åéä¸å½æ°çå­å¨ä½ç½®' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ä¸å¤©ä¸ä¸ªPythonåºï¼charset-normalizer - èªå¨åå­ç¬¦ç¼ç æ£æµä¸è§èå ]]></title>
    <link>https://www.cnblogs.com/min2k/p/19527462</link>
    <guid>8ec2c2f61b1c1e028b09826e527d0db4</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/min2k/p/19527462" title="åå¸äº 2026-01-24 20:28">
    <span role="heading" aria-level="2">ä¸å¤©ä¸ä¸ªPythonåºï¼charset-normalizer - èªå¨åå­ç¬¦ç¼ç æ£æµä¸è§èå</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="charset-normalizer---èªå¨åå­ç¬¦ç¼ç æ£æµä¸è§èå">charset-normalizer - èªå¨åå­ç¬¦ç¼ç æ£æµä¸è§èå</h1>
<h2 id="ä¸ä»ä¹æ¯charset-normalizer">ä¸ãä»ä¹æ¯charset-normalizerï¼</h2>
<p><strong>charset-normalizer</strong> æ¯ä¸ä¸ªç¨äºå¯é æ£æµåç§ææ¬æä»¶ææ°æ®åçå­ç¬¦ç¼ç ç Python åºã<br>
å®å¯ä»¥å¸®å©ä½ ï¼</p>
<ul>
<li>èªå¨è¯å«æªç¥ç¼ç çææ¬ã</li>
<li>è§èåææ¬ï¼ä½¿å¶å¨ä¸åç³»ç»é´æåºç¨ç¨åºä¸­ä¿æä¸è´ï¼é¿åä¹±ç é®é¢ã</li>
<li>å¤çå ç¼ç éè¯¯å¯¼è´çæ°æ®è§£æé®é¢ã</li>
</ul>
<h2 id="äºåºç¨åºæ¯">äºãåºç¨åºæ¯</h2>
<p><strong>charset-normalizer</strong> å¹¿æ³åºç¨äºä»¥ä¸å®éåºæ¯ï¼</p>
<ul>
<li><strong>æ°æ®æ¸æ´</strong>: å¨å¤çä»ä¸åæ¥æºï¼å¦ç½é¡µæåãæä»¶å¯¼å¥ï¼è·åçæ°æ®æ¶ï¼èªå¨æ£æµå¹¶ç»ä¸å­ç¬¦ç¼ç ï¼è§£å³ä¹±ç é®é¢ã</li>
<li><strong>ææ¬å¤çå·¥å·</strong>: å¼åææ¬ç¼è¾å¨ãæ¥å¿åæå¨æå¶ä»éè¦å¤çå¤ç§ç¼ç ææ¬çå·¥å·æ¶ï¼æä¾å¼ºå¤§çç¼ç è¯å«è½åã</li>
<li><strong>å½éååºç¨</strong>: ç¡®ä¿åºç¨ç¨åºè½å¤æ­£ç¡®å¤çåæ¾ç¤ºæ¥èªå¨çåå°çç¨æ·è¾å¥ååå®¹ï¼é¿åå ç¼ç ä¸å¼å®¹èåºç°ä¹±ç ã</li>
</ul>
<h2 id="ä¸å¦ä½å®è£">ä¸ãå¦ä½å®è£</h2>
<ol>
<li>ä½¿ç¨ pip å®è£</li>
</ol>
<pre><code class="language-bash">pip install charset-normalizer

# å¦æå®è£æ¢çè¯ï¼æ¨èä½¿ç¨å½åéåæº
pip install charset-normalizer -i https://www.python64.cn/pypi/simple/
</code></pre>
<ol start="2">
<li>ä½¿ç¨ <a href="https://www.min2k.com/tools/python-run/" target="_blank" rel="noopener nofollow">PythonRun</a> å¨çº¿è¿è¡ä»£ç ï¼æ éæ¬å°å®è£ï¼</li>
</ol>
<h2 id="åç¤ºä¾ä»£ç ">åãç¤ºä¾ä»£ç </h2>
<p>æ£æµä¸ä¸ªæªç¥ç¼ç çå­ç¬¦ä¸²çç¼ç ï¼å¹¶è¿è¡è§£ç ã</p>
<pre><code class="language-python">from charset_normalizer import from_bytes

# å°è¯æ£æµè¿ä¸ªå¯è½æ¯ä¹±ç çå­èä¸²
unknown_bytes = b'\xc3\xa9l\xc3\xa9phant'  # è¿æ¯ä¸ä¸ªUTF-8ç¼ç ç'Ã©lÃ©phant'

# ä½¿ç¨ from_bytes è¿è¡ç¼ç æ£æµåè§èå
detection_result = from_bytes(unknown_bytes)

# è·åæä½³å¹éçå­ç¬¦ç¼ç 
if detection_result:
    best_encoding = detection_result.best().encoding
    decoded_string = str(detection_result) # è½¬æ¢ä¸ºå­ç¬¦ä¸²ï¼é»è®¤ä½¿ç¨æä½³ç¼ç 
    print(f"æ£æµå°çæä½³ç¼ç æ¯: {best_encoding}")
    print(f"è§£ç åçå­ç¬¦ä¸²æ¯: {decoded_string}")
else:
    print("æªè½æ£æµå°åéçç¼ç ã")

# å¦å¤ä¸ä¸ªä¾å­ï¼ä¸ä¸ªç®åçASCIIå­ç¬¦ä¸²
ascii_bytes = b'hello world'
ascii_detection = from_bytes(ascii_bytes)

if ascii_detection:
    print(f"\n'hello world' çæä½³ç¼ç æ¯: {ascii_detection.best().encoding}")
    print(f"'hello world' è§£ç å: {str(ascii_detection)}")
else:
    print("\næªè½æ£æµå° 'hello world' çç¼ç ã")
</code></pre>
<p>ä½¿ç¨ <a href="https://www.min2k.com/tools/python-run/?code=from%20charset_normalizer%20import%20from_bytes%0A%0A%23%20%E5%B0%9D%E8%AF%95%E6%A3%80%E6%B5%8B%E8%BF%99%E4%B8%AA%E5%8F%AF%E8%83%BD%E6%98%AF%E4%B9%B1%E7%A0%81%E7%9A%84%E5%AD%97%E8%8A%82%E4%B8%B2%0Aunknown_bytes%20%3D%20b'%5Cxc3%5Cxa9l%5Cxc3%5Cxa9phant'%20%20%23%20%E8%BF%99%E6%98%AF%E4%B8%80%E4%B8%AAUTF-8%E7%BC%96%E7%A0%81%E7%9A%84'%C3%A9l%C3%A9phant'%0A%0A%23%20%E4%BD%BF%E7%94%A8%20from_bytes%20%E8%BF%9B%E8%A1%8C%E7%BC%96%E7%A0%81%E6%A3%80%E6%B5%8B%E5%92%8C%E8%A7%84%E8%8C%83%E5%8C%96%0Adetection_result%20%3D%20from_bytes%28unknown_bytes%29%0A%0A%23%20%E8%8E%B7%E5%8F%96%E6%9C%80%E4%BD%B3%E5%8C%B9%E9%85%8D%E7%9A%84%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%0Aif%20detection_result%3A%0A%20%20%20%20best_encoding%20%3D%20detection_result.best%28%29.encoding%0A%20%20%20%20decoded_string%20%3D%20str%28detection_result%29%20%23%20%E8%BD%AC%E6%8D%A2%E4%B8%BA%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%8C%E9%BB%98%E8%AE%A4%E4%BD%BF%E7%94%A8%E6%9C%80%E4%BD%B3%E7%BC%96%E7%A0%81%0A%20%20%20%20print%28f%22%E6%A3%80%E6%B5%8B%E5%88%B0%E7%9A%84%E6%9C%80%E4%BD%B3%E7%BC%96%E7%A0%81%E6%98%AF%3A%20%7Bbest_encoding%7D%22%29%0A%20%20%20%20print%28f%22%E8%A7%A3%E7%A0%81%E5%90%8E%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%98%AF%3A%20%7Bdecoded_string%7D%22%29%0Aelse%3A%0A%20%20%20%20print%28%22%E6%9C%AA%E8%83%BD%E6%A3%80%E6%B5%8B%E5%88%B0%E5%90%88%E9%80%82%E7%9A%84%E7%BC%96%E7%A0%81%E3%80%82%22%29%0A%0A%23%20%E5%8F%A6%E5%A4%96%E4%B8%80%E4%B8%AA%E4%BE%8B%E5%AD%90%EF%BC%9A%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84ASCII%E5%AD%97%E7%AC%A6%E4%B8%B2%0Aascii_bytes%20%3D%20b'hello%20world'%0Aascii_detection%20%3D%20from_bytes%28ascii_bytes%29%0A%0Aif%20ascii_detection%3A%0A%20%20%20%20print%28f%22%5Cn'hello%20world'%20%E7%9A%84%E6%9C%80%E4%BD%B3%E7%BC%96%E7%A0%81%E6%98%AF%3A%20%7Bascii_detection.best%28%29.encoding%7D%22%29%0A%20%20%20%20print%28f%22'hello%20world'%20%E8%A7%A3%E7%A0%81%E5%90%8E%3A%20%7Bstr%28ascii_detection%29%7D%22%29%0Aelse%3A%0A%20%20%20%20print%28%22%5Cn%E6%9C%AA%E8%83%BD%E6%A3%80%E6%B5%8B%E5%88%B0%20'hello%20world'%20%E7%9A%84%E7%BC%96%E7%A0%81%E3%80%82%22%29" target="_blank" rel="noopener nofollow">PythonRun</a> å¨çº¿è¿è¡è¿æ®µä»£ç ï¼ç»æå¦ä¸ï¼</p>
<pre><code class="language-text">æ£æµå°çæä½³ç¼ç æ¯: utf_8
è§£ç åçå­ç¬¦ä¸²æ¯: &lt;charset_normalizer.models.CharsetMatches object at 0x7fea543bdb40&gt;

'hello world' çæä½³ç¼ç æ¯: ascii
'hello world' è§£ç å: &lt;charset_normalizer.models.CharsetMatches object at 0x7fea543bda80&gt;
</code></pre>
<p>ä½¿ç¨ <a href="https://www.min2k.com/tools/mermaid/?code=flowchart%20TB%0A%20%20A%5B%E5%BC%80%E5%A7%8B%5D%20--%3E%20B%7B%E5%AE%9A%E4%B9%89%E5%AD%97%E8%8A%82%E4%B8%B2%20unknown_bytes%7D%3B%0A%20%20B%20--%3E%20C%5B%E8%B0%83%E7%94%A8%20from_bytes%28unknown_bytes%29%5D%3B%0A%20%20C%20--%3E%20D%7B%E6%A3%80%E6%B5%8B%E7%BB%93%E6%9E%9C%20detection_result%20%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%3F%7D%3B%0A%20%20D%20--%20%E6%98%AF%20--%3E%20E%5B%E8%8E%B7%E5%8F%96%E6%9C%80%E4%BD%B3%E7%BC%96%E7%A0%81%20best_encoding%5D%3B%0A%20%20E%20--%3E%20F%5B%E8%A7%A3%E7%A0%81%E5%AD%97%E7%AC%A6%E4%B8%B2%20decoded_string%5D%3B%0A%20%20F%20--%3E%20G%5B%E6%89%93%E5%8D%B0%E6%9C%80%E4%BD%B3%E7%BC%96%E7%A0%81%E5%92%8C%E8%A7%A3%E7%A0%81%E5%AD%97%E7%AC%A6%E4%B8%B2%5D%3B%0A%20%20D%20--%20%E5%90%A6%20--%3E%20H%5B%E6%89%93%E5%8D%B0%22%E6%9C%AA%E8%83%BD%E6%A3%80%E6%B5%8B%E5%88%B0%E7%BC%96%E7%A0%81%22%E6%B6%88%E6%81%AF%5D%3B%0A%20%20G%20--%3E%20I%7B%E5%AE%9A%E4%B9%89%E5%AD%97%E8%8A%82%E4%B8%B2%20ascii_bytes%7D%3B%0A%20%20H%20--%3E%20I%3B%0A%20%20I%20--%3E%20J%5B%E8%B0%83%E7%94%A8%20from_bytes%28ascii_bytes%29%5D%3B%0A%20%20J%20--%3E%20K%7B%E6%A3%80%E6%B5%8B%E7%BB%93%E6%9E%9C%20ascii_detection%20%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%3F%7D%3B%0A%20%20K%20--%20%E6%98%AF%20--%3E%20L%5B%E6%89%93%E5%8D%B0%20ascii_bytes%20%E7%9A%84%E6%9C%80%E4%BD%B3%E7%BC%96%E7%A0%81%E5%92%8C%E8%A7%A3%E7%A0%81%E5%90%8E%E5%AD%97%E7%AC%A6%E4%B8%B2%5D%3B%0A%20%20K%20--%20%E5%90%A6%20--%3E%20M%5B%E6%89%93%E5%8D%B0%22%E6%9C%AA%E8%83%BD%E6%A3%80%E6%B5%8B%E5%88%B0%20'hello%20world'%20%E7%9A%84%E7%BC%96%E7%A0%81%22%E6%B6%88%E6%81%AF%5D%3B%0A%20%20L%20--%3E%20N%5B%E7%BB%93%E6%9D%9F%5D%3B%0A%20%20M%20--%3E%20N%3B%0A" target="_blank" rel="noopener nofollow">MermaidGo</a> ç»å¶ç¤ºä¾ä»£ç çæµç¨å¾ï¼ç»æå¦ä¸ï¼</p>
<p><img alt="MermerGoçcharset-normalizeçæµç¨å¾" loading="lazy" data-src="https://img2024.cnblogs.com/blog/70894/202601/70894-20260124202513072-686187034.jpg" class="lazyload"></p>
<h2 id="äºå­¦ä¹ èµæº">äºãå­¦ä¹ èµæº</h2>
<ol>
<li>å¼æºé¡¹ç®ï¼<a href="https://github.com/Ousret/charset_normalizer" target="_blank" rel="noopener nofollow">charset-normalizer</a></li>
<li>ä¸­æèªè¿°ï¼<a href="https://www.python64.cn/readme/charset-normalizer/" target="_blank" rel="noopener nofollow">REMDME</a></li>
<li>å¨çº¿è¿è¡ï¼<a href="https://www.min2k.com/tools/python-run/" target="_blank" rel="noopener nofollow">PythonRun</a></li>
</ol>
<blockquote>
<p>å¦æè¿ç¯æç« å¯¹ä½ æå¸®å©ï¼æ¬¢è¿ç¹èµãæ¶èãè½¬åï¼<br>
å­¦ä¹ è¿ç¨ä¸­æä»»ä½é®é¢ï¼æ¬¢è¿å¨è¯è®ºåºçè¨äº¤æµï½</p>
</blockquote>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-24 20:29">2026-01-24 20:28</span>&nbsp;
<a href="https://www.cnblogs.com/min2k">æç¼ç¨</a>&nbsp;
éè¯»(<span id="post_view_count">42</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19527462);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19527462', targetLink: 'https://www.cnblogs.com/min2k/p/19527462', title: 'ä¸å¤©ä¸ä¸ªPythonåºï¼charset-normalizer - èªå¨åå­ç¬¦ç¼ç æ£æµä¸è§èå' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ MAFå¿«éå¥é¨ï¼13ï¼å¸¸è§æºè½ä½ç¼ææ¨¡å¼ ]]></title>
    <link>https://www.cnblogs.com/edisontalk/p/-/quick-start-on-maf-chatper13</link>
    <guid>cf894b1393acc81482ffb5ec27e7f44d</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/edisontalk/p/-/quick-start-on-maf-chatper13" title="åå¸äº 2026-01-24 19:53">
    <span role="heading" aria-level="2">MAFå¿«éå¥é¨ï¼13ï¼å¸¸è§æºè½ä½ç¼ææ¨¡å¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/381412/202601/381412-20260124195158983-724601081.png" alt="MAFå¿«éå¥é¨ï¼13ï¼å¸¸è§æºè½ä½ç¼ææ¨¡å¼" class="desc_img">
        äºå®ä¸ï¼å¨æå»ºAIåºç¨è§£å³ä¸å¡é®é¢æ¶ï¼åä¸ªAgentå¾å¾æ æ³èä»»ææä»»å¡ï¼å¸¸å¸¸éè¦æä»¬å°å¤ä¸ªAgentç»åèµ·æ¥ç³»ç»å·¥ä½ãèè¿ç§ç»åä¸åè°çæ¹å¼ï¼å°±è¢«ç§°ä¸º Agent Orchestration å³ Agentç¼æãMAFæ¯æå¤ç§å¤Agentç¼ææµç¨æ¨¡å¼ï¼æ¯ä¸ªæ¨¡å¼é½éå¯¹ä¸åçåä½æ¹æ¡èè®¾è®¡ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p><span><span>å¤§å®¶å¥½ï¼ææ¯Edisonã</span></span></p>
<p><span><span>æè¿æä¸ç´å¨è·çå£æ°çã<a class="normal_text_link mp_article_text_link" href="https://mp.weixin.qq.com/s?__biz=MzA4NzQzNTg4Ng==&amp;mid=2651744458&amp;idx=1&amp;sn=139f7584e81aeecd0945133bdc2b4791&amp;scene=21#wechat_redirect" target="_blank" data-itemshowtype="0" data-linktype="2" rel="noopener nofollow"><span>.NET+AIæºè½ä½å¼åè¿é¶</span></a><span>ãè¯¾ç¨å­¦ä¹ MAFå¼åå¤æºè½ä½å·¥ä½æµï¼æå¼ºçæ¨èä½ ä¹ä¸è½¦è·æä¸èµ·åºåï¼</span></span></span></p>
<p><span><a class="normal_text_link mp_article_text_link" href="https://www.cnblogs.com/edisontalk/p/-/quick-start-on-maf-chatper12" target="_blank" data-itemshowtype="0" data-linktype="2"><span>ä¸ä¸ç¯</span></a><span>ï¼æä»¬å­¦ä¹ äºMAFä¸­å¦ä½è¿è¡å­å·¥ä½æµ<span>ãæ¬ç¯ï¼æä»¬æ¥äºè§£ä¸å¨MAFä¸­å¦ä½å¿«éå®ç°ä¸äºå¸¸è§çæºè½ä½ç¼ææ¨¡å¼ã</span></span></span></p>
<h1><span><span><span><strong>1 æºè½ä½ç¼ææ¨¡å¼ä»ç»</strong></span></span></span></h1>
<p>ä¼ ç»çåAgentç³»ç»å¨å¤çå¤æå¤é¢ä»»å¡çè½åæ¹é¢åå°è¾å¤éå¶ï¼å æ­¤æä»¬ä¼æå¤Agentç¼æåä½å®æä»»å¡çéæ±ã</p>
<p><img src="https://img2024.cnblogs.com/blog/381412/202601/381412-20260124091613961-245103765.png" alt="image" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>äºå®ä¸ï¼å¨æå»ºAIåºç¨è§£å³ä¸å¡é®é¢æ¶ï¼åä¸ªAgentå¾å¾æ æ³èä»»ææä»»å¡ï¼å¸¸å¸¸éè¦æä»¬å°å¤ä¸ªAgentç»åèµ·æ¥ç³»ç»å·¥ä½ãèè¿ç§ç»åä¸åè°çæ¹å¼ï¼å°±è¢«ç§°ä¸º&nbsp;<strong>Agent Orchestration</strong>&nbsp;å³&nbsp;Agentç¼æã</p>
<p>MAFæ¯æå¤ç§å¤Agentç¼ææµç¨æ¨¡å¼ï¼æ¯ä¸ªæ¨¡å¼é½éå¯¹ä¸åçåä½æ¹æ¡èè®¾è®¡ãè¿äºæ¨¡å¼ä½ä¸ºæ¡æ¶çä¸é¨åæä¾åºæ¥ï¼æä»¬å¯ä»¥èªå·±æ©å±ã</p>
<p><span data-pm-slice="0 0 []"><span><span>å¨MAFä¸­ï¼å¸¸è§çAgentç¼ææ¨¡å¼å¦ä¸ï¼</span></span></span></p>
<ul class="list-paddingleft-1">
<li><span data-pm-slice="0 0 []"><span><span>Sequential é¡ºåºç¼æï¼<span>å³åä¸ªAgentä¾æ¬¡å¤çå¹¶ä¼ éç»ä¸ä¸ä¸ªAgentæ§è¡ï¼</span></span></span></span></li>
<li><span data-pm-slice="0 0 []"><span><span>Concurrent å¹¶åç¼æï¼<span>å³å¤ä¸ªAgentå¹¶è¡å¤çåä¸ä¸ªä»»å¡ï¼ç¶åæ±èç»æï¼</span></span></span></span></li>
<li><span data-pm-slice="0 0 []"><span><span>Handoffs ç§»äº¤ç¼æï¼<span>å³æ¯ä¸ªAgenté½å¯ä»¥å°å¯¹è¯ç§»äº¤ç»å¦ä¸ä¸ªAgentï¼ç¡®ä¿æ¯ä¸ªAgentå¤çä»»å¡çæä¸ªé¨åï¼</span></span></span></span></li>
<li><span data-pm-slice="0 0 []"><span><span>GroupChat ç¾¤èç¼æï¼<span>å³å¤ä¸ªAgentå å¥äºåä¸ä¸ªå¾®ä¿¡ç¾¤ï¼éè¿ç¾¤èå¯¹è¯å½¢æä¸äºå³ç­ï¼</span></span></span></span></li>
</ul>
<p><span data-pm-slice="0 0 []"><span><span>å¯¹åºå°MAFä¸­ï¼<span><span>AgentWorkflowBuilder&nbsp;<span>ç±»æä¾äºè¿äºç¼ææ¨¡å¼çå·ä½å®ç°ï¼æä»¬å¼åèå¯ä»¥ç´æ¥ä½¿ç¨å¯¹åºçæ¥å£å³å¯å¿«éå®ææä¸æ¬¡ç¼æ èæ é èªè¡å®ç°Edgeè¿æ¥ã</span></span></span></span></span></span></p>
<h1><strong><span>2&nbsp;<strong><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;letter-spacing: 0.578px;text-align: left;margin: 8px;&quot;,&quot;data-pm-slice&quot;:&quot;6 3 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;para&quot;,{&quot;tagName&quot;:&quot;p&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;outline: 0px;visibility: visible;line-height: 1.75em;margin-top: 16px;margin-bottom: 16px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;span&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;color: rgb(0, 179, 139);font-family: \&quot;PingFang SC\&quot;, \&quot;Lantinghei SC\&quot;, \&quot;Microsoft Yahei\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft Sans Serif\&quot;, \&quot;WenQuanYi Micro Hei\&quot;, Helvetica, sans-serif;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;span&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;letter-spacing: 0.544px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">æºè½ä½ç¼ææ¨¡å¼è¯¦è§£</span></strong></span></strong></h1>
<h3><strong><span><span>2.1 é¡ºåºç¼æ</span></span></strong></h3>
<p data-pm-slice="0 0 []">å¨é¡ºåºç¼ææ¨¡å¼ä¸­ï¼åä¸ªAgentè¢«ç»æä¸ä¸ªæµç¨ï¼æ¯ä¸ªAgenté½ä¼å¤çä»»å¡ï¼å¹¶å°æ§è¡ç»æè¾åºä¼ éç»ä¸ä¸ä¸ªå¾æ§è¡çAgentãå¯ä»¥çåºï¼å¯¹äºæ¯ä¸ªåºäºä¸ä¸æ­¥éª¤æå»ºçå·¥ä½æµ<span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;letter-spacing: 0.578px;text-align: left;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;para&quot;,{&quot;tagName&quot;:&quot;p&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;line-height: 1.75em;margin: 8px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">ï¼Workflowï¼æ¥è¯´ï¼è¿æ¯æ¯è¾éåçæ¨¡å¼ã</span></p>
<p><img src="https://img2024.cnblogs.com/blog/381412/202601/381412-20260124091657384-365298595.png" alt="image" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>ç®åï¼åææ¡£å®¡éãå·¥ä½æµãæ°æ®å¤çç®¡éãå¤é¶æ®µæ¨çç­ï¼æ¯æ¯è¾å¸¸è§çåºç¨åºæ¯ã</p>
<p>ä¸é¢çä»£ç å±ç¤ºäºå¨MAFä¸­çé¡ºåºç¼æå®ç°ï¼</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">var</span> analyst = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> ChatClientAgent(...);
</span><span style="color: rgba(0, 0, 255, 1)">var</span> writer = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> ChatClientAgent(...);
</span><span style="color: rgba(0, 0, 255, 1)">var</span> editor = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> ChatClientAgent(...);
</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Build a Workflow</span>
<span style="color: rgba(0, 0, 255, 1)">var</span> workflow =<span style="color: rgba(0, 0, 0, 1)"> AgentWorkflowBuilder.BuildSequential(
    </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">content-team-workflow</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, 
    [analyst, writer, editor]);
</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Test the Workflow</span>
......</pre>
</div>
<p>å¯ä»¥çå°ï¼éè¿BuildSequentialæ¹æ³å³å¯å¿«éå®æä¸æ¬¡é¡ºåºç¼æã</p>
<h3><span><span>2.2 å¹¶åç¼æ</span></span></h3>
<p>å¹¶åæ¨¡å¼ä½¿ç¨å¤ä¸ªAgentå¹¶è¡å¤çåä¸ä¸ªä»»å¡ï¼æ¯ä¸ªAgenté½å¯ä»¥ç¬ç«å¤çè¾å¥ï¼å¹¶æ¶éå¹¶èåç»æã</p>
<p><img src="https://img2024.cnblogs.com/blog/381412/202601/381412-20260124194638071-182220484.png" alt="image" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>æ­¤æ¨¡å¼æ¯è¾éåå¤ç§è§ç¹æè§£å³æ¹æ¡å¾æä»·å¼çåºæ¯ï¼æ¯å¦éæå¹¿çãç¾¤ä½æ¨çä»¥åå¶ä»æç¥¨ç³»ç»ã</p>
<p>ä¸é¢çä»£ç å±ç¤ºäºå¨MAFä¸­çä»£ç å®ç°ï¼</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Step1. Create Agents</span>
<span style="color: rgba(0, 0, 255, 1)">var</span> sensitiveWordAgent = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> ChatClientAgent(...);
</span><span style="color: rgba(0, 0, 255, 1)">var</span> adDetectionAgent = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> ChatClientAgent(...);
</span><span style="color: rgba(0, 0, 255, 1)">var</span> sentimentAgent = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> ChatClientAgent(...);

</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Step2. Build a Workflow</span>
<span style="color: rgba(0, 0, 255, 1)">var</span> workflow =<span style="color: rgba(0, 0, 0, 1)"> AgentWorkflowBuilder.BuildConcurrent(
    agents: </span><span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)">[] { sensitiveWordAgent, adDetectionAgent, sentimentAgent },
    aggregator: auditAggregator
);

</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Step3. Test the workflow</span>
......</pre>
</div>
<h3><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;p&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;outline: 0px;visibility: visible;line-height: 1.75em;margin-top: 16px;margin-bottom: 16px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span>2.3 ç§»äº¤ç¼æ</span></span></h3>
<p>å¨ç§»äº¤ï¼ä¹å¯ä»¥å«åäº¤æ¥ï¼ç¼ææ¨¡å¼ä¸­ï¼åè®¸åä¸ªAgentæ ¹æ®ä¸ä¸ææç¨æ·è¯·æ±ç¸äºè½¬ç§»æ§å¶æï¼æ¯ä¸ªAgenté½å¯ä»¥éè¿éå½çä¸ä¸ç¥è¯å°å¯¹è¯âç§»äº¤âç»å¦ä¸ä¸ªAgentï¼ç¡®ä¿æ¯ä¸ªAgentå¤çä»»å¡çæä¸ªæå®é¨åã</p>
<p><img src="https://img2024.cnblogs.com/blog/381412/202601/381412-20260124194802065-1054226946.png" alt="image" width="707" height="556" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>è¿ç§æ¨¡å¼éå¸¸éåäºå®¢æ·æ¯æï¼å®¢æï¼ãä¸å®¶ç³»ç»æéè¦å¨æå§æ´¾ç±»åçä»»å¡åºæ¯ã</p>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;text-transform: none;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;text-align: left;line-height: 1.75em;margin-bottom: 8px;margin-top: 8px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">ä¸é¢çä»£ç å±ç¤ºäºå¨MAFçä»£ç å®ç°</span>ï¼</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Step1. Create Agents</span>
<span style="color: rgba(0, 0, 255, 1)">var</span> triageAgent = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> ChatClientAgent(...);
</span><span style="color: rgba(0, 0, 255, 1)">var</span> historyTutor = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> ChatClientAgent(...);
</span><span style="color: rgba(0, 0, 255, 1)">var</span> mathTutor = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> ChatClientAgent(...);
</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Step2. Build a Workflow</span>
<span style="color: rgba(0, 0, 255, 1)">var</span> workflow =<span style="color: rgba(0, 0, 0, 1)"> AgentWorkflowBuilder.CreateHandoffBuilderWith(triageAgent)
    .WithHandoffs(triageAgent, [mathTutor, historyTutor]) </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Triage can route to either specialist</span>
    .WithHandoffs([mathTutor, historyTutor], triageAgent) <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Math or History tutor can return to triage</span>
<span style="color: rgba(0, 0, 0, 1)">    .Build();
</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Step3. Test the workflow</span>
.....</pre>
</div>
<h3 data-pm-slice="2 3 []"><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;p&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;outline: 0px;visibility: visible;line-height: 1.75em;margin-top: 16px;margin-bottom: 16px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span>2.4 ç¾¤èç¼æ</span></span></h3>
<p>å¨ç¾¤èç¼ææ¨¡å¼ä¸­ï¼åä¸ªAgentå°±åå å¥äºä¸ä¸ªå¾®ä¿¡ç¾¤ï¼ç±ç¾¤ç®¡çååè°è¿è¡ç¾¤èå¯¹è¯ãè¿ç§æ¨¡å¼éå¸¸éåäºæ¨¡æä¼è®®ãè¾©è®ºæåä½è§£å³é®é¢çä¼è®®ç±»ååºæ¯ã</p>
<p>ä¸å¾å±ç¤ºäºä¸ä¸ªè®¨è®ºä¸å¡å»ºè®®çç¨ä¾ï¼ç±ä¸ä¸ªChat Managerè´è´£ä¸»æå¯¹è¯ï¼ä¾æ¬¡è®©ä¸ä¸ªåä¸å¯¹è¯çAgentè¿è¡å»ºè®®åè¡¨ãè¿ä¸ªChat Managerå°±åæ¯ç¾¤ç®¡çåï¼å®ä¸ä»è´è´£ä¸»æå¯¹è¯ï¼ä¹ä¼å¨å¿è¦æ¶å¼å¥äººå·¥å¹²é¢ã</p>
<p><img src="https://img2024.cnblogs.com/blog/381412/202601/381412-20260124194919639-675664209.png" alt="image" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;text-transform: none;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;text-align: left;line-height: 1.75em;margin-bottom: 8px;margin-top: 8px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">ä¸é¢çä»£ç å±ç¤ºäºå¨MAFçä»£ç å®ç°ï¼</span></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Step1. Create Agents</span>
<span style="color: rgba(0, 0, 255, 1)">var</span> researchAgent = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> ChatClientAgent(...);
</span><span style="color: rgba(0, 0, 255, 1)">var</span> writerAgent = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> ChatClientAgent(...);
</span><span style="color: rgba(0, 0, 255, 1)">var</span> criticAgent = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> ChatClientAgent(...);
</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Step2. Build a Workflow</span>
<span style="color: rgba(0, 0, 255, 1)">var</span> workflow =<span style="color: rgba(0, 0, 0, 1)"> AgentWorkflowBuilder.CreateGroupChatBuilderWith(
  agents </span>=&gt; <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> RoundRobinGropuChatManager(agents))
      .AddParticipants(researchAgent, writerAgent, criticAgent)
      .Build();
</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Step3. Test the workflow</span>
.....</pre>
</div>
<h1><strong><span>3 å°ç»</span></strong></h1>
<p>æ¬æä»ç»äºMAFä¸­å¸¸è§çAgentç¼ææ¨¡å¼ï¼å¹¶è¯¦ç»ä»ç»äºé¡ºåºç¼æãå¹¶åç¼æãç§»äº¤ç¼æ å ç¾¤èç¼æ çéç¨åºæ¯ å ä»£ç å®ç°ã</p>
<p>è¿å ç§æ¨¡å¼çå¯¹æ¯åæå¦ä¸ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/381412/202601/381412-20260124195004594-1977355623.png" alt="image" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<h1>ç¤ºä¾æºç </h1>
<p>GitHub:&nbsp;<a href="https://github.com/EdisonTalk/MAFD" target="_blank" rel="noopener nofollow">https://github.com/EdisonTalk/MAFD</a></p>
<h1>åèèµæ</h1>
<p><span data-pm-slice="0 0 []"><span>å£æ°ï¼ã<a href="https://www.cnblogs.com/sheng-jie/p/19200934" target="_blank">.NET + AI æºè½ä½å¼åè¿é¶</a>ãï¼æ¨èææ°ï¼âââââï¼</span></span></p>
<p><span data-pm-slice="0 0 []"><span>Microsoft Learnï¼<span>ã<a href="https://learn.microsoft.com/en-us/agent-framework/overview/agent-framework-overview?wt.mc_id=MVP_397012" target="_blank" rel="noopener nofollow">Agent Framework Tutorials</a>ã</span></span></span></p>
<div><span data-pm-slice="0 0 []"><span>&nbsp;</span></span></div>
<p style="text-align: center"><img src="https://images.cnblogs.com/cnblogs_com/edisonchou/1647700/o_200902144330EdisonTalk-Footer.jpg" alt="" style="width: 65%; border: 1px solid rgba(221, 221, 221, 1); border-radius: 3px; box-shadow: 0 4px 8px rgba(3, 27, 78, 0.12)"></p>
<div id="Copyright">
<p>ä½èï¼<span style="text-decoration: underline">ç±è¿ªç</span></p>
<p>åºå¤ï¼<a title="from" href="https://edisontalk.cnblogs.com" target="_blank">https://edisontalk.cnblogs.com</a></p>
<p>æ¬æçæå½ä½èååå®¢å­å±æï¼æ¬¢è¿è½¬è½½ï¼ä½æªç»ä½èåæå¿é¡»ä¿çæ­¤æ®µå£°æï¼ä¸å¨æç« é¡µé¢ææ¾ä½ç½®ç»åºåæé¾æ¥ã</p>
</div>
</div>
<div id="MySignature" role="contentinfo">
    <div align="center"><a href="https://weibo.com/u/2068032061?s=6uyXnP" target="_blank"><img border="0" src="http://service.t.sina.com.cn/widget/qmd/2068032061/d643d182/10.png"></a></div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-24 19:53">2026-01-24 19:53</span>&nbsp;
<a href="https://www.cnblogs.com/edisontalk">EdisonZhou</a>&nbsp;
éè¯»(<span id="post_view_count">35</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19525331);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19525331', targetLink: 'https://www.cnblogs.com/edisontalk/p/-/quick-start-on-maf-chatper13', title: 'MAFå¿«éå¥é¨ï¼13ï¼å¸¸è§æºè½ä½ç¼ææ¨¡å¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
        </channel>
        </rss>