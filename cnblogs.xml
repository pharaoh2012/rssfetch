<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åå®¢å­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2026-02-09T01:49:20.917Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åå®¢å­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ @Slf4jï¼ä¸æ­¢æ¯çä¸è¡ä»£ç ï¼æ´æ¯çäº§çº§æ¥å¿çèºæ¯ ]]></title>
    <link>https://www.cnblogs.com/xzqcsj/p/19583495</link>
    <guid>d267d4b3adfc1791514aa5f586165de7</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xzqcsj/p/19583495" title="åå¸äº 2026-02-09 09:38">
    <span role="heading" aria-level="2">@Slf4jï¼ä¸æ­¢æ¯çä¸è¡ä»£ç ï¼æ´æ¯çäº§çº§æ¥å¿çèºæ¯</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/3703499/202602/3703499-20260206115352008-1886837546.png" alt="@Slf4jï¼ä¸æ­¢æ¯çä¸è¡ä»£ç ï¼æ´æ¯çäº§çº§æ¥å¿çèºæ¯" class="desc_img">
        å¦æç»è®¡ Java ç¨åºåé®çæ²å»é¢çæé«çåè¯ï¼log ä¸å®æ¦ä¸æåã
æ¯å¤©ï¼æä»¬å¨æ æ°ä¸ªç±»å¤´ä¸å ä¸ @Slf4jï¼å°±åå¼å¸ä¸æ ·èªç¶ãä½å¤§å¤æ°æ¶åï¼å®å¯¹æä»¬æ¥è¯´åªæ¯ä¸ä¸ªâæå°æºâï¼è¾å¥å­ç¬¦ä¸²ï¼æ§å¶å°è¾åºä¸è¡å­ã
ç´å°æä¸å¤©ï¼ä½ åç°çº¿ä¸ç CPU è¢«æ¯«æ æä¹çå­ç¬¦ä¸²æ¼æ¥å æ»¡ï¼æèå¨æµ·éçæ¥å¿éæ¾ä¸å°é£æè§£å¼ Bug çé¥åï¼ä½ æä¼æè¯å°ï¼å¹¶ä¸æ¯ææçæ¥å¿ï¼é½å«åæ ¼çå·¥ç¨æ¥å¿ã
è¿ç¯æç« ï¼æ³åä½ éæ°è®¤è¯ä¸ä¸è¿ä½æçæçéçäººã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<blockquote>
<p><strong>åå¨åé¢çè¯</strong></p>
<p>å¦æç»è®¡ Java ç¨åºåé®çæ²å»é¢çæé«çåè¯ï¼<code>log</code> ä¸å®æ¦ä¸æåã</p>
<p>æ¯å¤©ï¼æä»¬å¨æ æ°ä¸ªç±»å¤´ä¸å ä¸ <code>@Slf4j</code>ï¼å°±åå¼å¸ä¸æ ·èªç¶ãä½å¤§å¤æ°æ¶åï¼å®å¯¹æä»¬æ¥è¯´åªæ¯ä¸ä¸ªâæå°æºâï¼è¾å¥å­ç¬¦ä¸²ï¼æ§å¶å°è¾åºä¸è¡å­ã</p>
<p>ç´å°æä¸å¤©ï¼ä½ åç°çº¿ä¸ç CPU è¢«æ¯«æ æä¹çå­ç¬¦ä¸²æ¼æ¥å æ»¡ï¼æèå¨æµ·éçæ¥å¿éæ¾ä¸å°é£æè§£å¼ Bug çé¥åï¼ä½ æä¼æè¯å°ï¼<strong>å¹¶ä¸æ¯ææçæ¥å¿ï¼é½å«åæ ¼çå·¥ç¨æ¥å¿ã</strong></p>
<p>è¿ç¯æç« ï¼æ³åä½ éæ°è®¤è¯ä¸ä¸è¿ä½æçæçéçäººã</p>
</blockquote>
<h3 id="ä¸-åªæ¯ä¸ºäºå·æå">ä¸ã åªæ¯ä¸ºäºâå·æâåï¼</h3>
<h4 id="1-å®æ¯ç¼è¯æçé­æ¯å¸">1. å®æ¯ç¼è¯æçâé­æ¯å¸â</h4>
<p>å¾å¤äººè§å¾ç¨ <code>@Slf4j</code> åªæ¯ä¸ºäºå°åä¸è¡ <code>private static final Logger...</code>ãè¿ç¡®å®æ¯å®æç´è§çå¥½å¤ï¼ä½å®çä»·å¼è¿ä¸æ­¢äºæ­¤ã</p>
<p>å¦æä½ åç¼è¯è¿ä½¿ç¨äºè¯¥æ³¨è§£ç <code>.class</code> æä»¶ï¼ä½ ä¼åç° Lombok å¨ç¼è¯æé»é»å°ä¸ºä½ æ³¨å¥äºæ åçä»£ç ï¼</p>
<pre><code class="language-java">public class PaymentService {
    // ç¼è¯åèªå¨çæï¼æ åä¸ç»ä¸
    private static final org.slf4j.Logger log = 
        org.slf4j.LoggerFactory.getLogger(PaymentService.class);
}
</code></pre>
<p>è¿æå³çä»ä¹ï¼æå³çä½ çå¢éä¸åéè¦äºè®ºæ¥å¿åéæ¯å« <code>logger</code> è¿æ¯ <code>LOG</code>ï¼ä¹ä¸ç¨æå¿æäººææ»æ <code>PaymentService</code> çæ¥å¿ç±»éåæäº <code>OrderService</code>ï¼è¿ç§æ·è´ç²è´´çéè¯¯å¤ªå¸¸è§äºï¼ã</p>
<p><strong>å®ç¨ä¸ç§å¼ºå¶æ§çè§èï¼æ¹å¹³äºäººä¸ºçå·®å¼ã</strong></p>
<h4 id="2-é¢åæ¥å£çæºæ§">2. é¢åæ¥å£çæºæ§</h4>
<p><code>@Slf4j</code> å¼å¥çæ¯ <code>org.slf4j.Logger</code>ï¼å³ <strong>Simple Logging Facade for Java</strong>ï¼Java ç®åæ¥å¿é¨é¢ï¼ã</p>
<p>è¿ä½ç°äºâä¾èµåç½®âçè®¾è®¡ååãä½ çä¸å¡ä»£ç åªä¾èµäºâé¨é¢âï¼èä¸ä¾èµäºå·ä½çå®ç°ï¼å¦ Logback æ Log4j2ï¼ãåªå¤©ä½ æ³æåºå±çæ¥å¿æ¡æ¶æ¢æï¼ä¸å¡ä»£ç ä¸è¡é½ä¸ç¨æ¹ã</p>
<hr>
<h3 id="äº-æ§è½ä¸ä¼éçå¹³è¡¡">äºã æ§è½ä¸ä¼éçå¹³è¡¡</h3>
<p>æ¥å¿è½å¥½ï¼ä½ä¹æè´µãå¨æé«çå¹¶åä¸ï¼ä¸è¡éè¯¯çæ¥å¿æå°ä»£ç ï¼å¯è½å°±æ¯åæ­»éªé©¼çæåä¸æ ¹ç¨»èã</p>
<h4 id="1-å ä½ç¬¦ä¸ä»æ¯å¥½ç">1. å ä½ç¬¦ï¼ä¸ä»æ¯å¥½ç</h4>
<pre><code class="language-java">// â ç´è§åæ³ï¼å­ç¬¦ä¸²æ¼æ¥
log.debug("ç¨æ· " + user.getName() + " è´­ä¹°äº " + item.getTitle());

// â æ¨èåæ³ï¼å ä½ç¬¦
log.debug("ç¨æ· {} è´­ä¹°äº {}", user.getName(), item.getTitle());
</code></pre>
<p>ä¸ºä»ä¹å¿é¡»ç¨å ä½ç¬¦ï¼</p>
<ul>
<li><strong>åå­åå¥½</strong>ï¼ç¬¬ä¸ç§åæ³å¨å­ç¬¦ä¸²æ¼æ¥æ¶ä¼ç«å³åå»ºå¤ä¸ª <code>StringBuilder</code> åä¸´æ¶ <code>String</code> å¯¹è±¡ï¼æ è®ºæ¥å¿çº§å«æ¯å¦å¼å¯ã</li>
<li><strong>å»¶è¿æ±å¼</strong>ï¼ç¬¬äºç§åæ³ï¼åªæå½æ¥å¿çº§å«æ»¡è¶³è¦æ±ï¼ä¾å¦ç¡®å®éè¦æå° Debug æ¥å¿ï¼æ¶ï¼æ¡æ¶æä¼å»å¤çåæ°ãå¨æ­¤ä¹åï¼å®ä»ä»æ¯å¼ç¨ä¼ éã</li>
</ul>
<h4 id="2-è­¦æéå½¢çæ§è½ææ">2. è­¦æéå½¢çâæ§è½ææâ</h4>
<p>è¿æ¯å³äº <code>DEBUG</code> æ¥å¿ãçä¸é¢è¿æ®µä»£ç ï¼æä»ä¹é®é¢ï¼</p>
<pre><code class="language-java">// åè®¾ toJson() æ¯ä¸ä¸ªéå¸¸èæ¶çåºååæä½
log.debug("å½åè®¢åè¯¦æ: {}", JSON.toJSONString(order));
</code></pre>
<p>è½ç¶æä»¬ç¨äºå ä½ç¬¦ï¼ä½ <code>JSON.toJSONString(order)</code> æ¯ä½ä¸ºä¸ä¸ª<strong>åæ°</strong>ä¼ å¥æ¹æ³çãJava çæ±å¼é¡ºåºå³å®äºï¼<strong>å¨è¿å¥ <code>log.debug</code> æ¹æ³ä¹åï¼è¿ä¸ªèæ¶çåºååæä½å°±å·²ç»æ§è¡äºã</strong> å¦æçäº§ç¯å¢è¿ä¸è¡å¹¶æ²¡ææå°ï¼Level=INFOï¼ï¼é£è¿ä¸ª CPU éçè®¡ç®å°±ç½ç½æµªè´¹äºã</p>
<p><strong>ä¿®æ­£å§¿å¿ï¼</strong></p>
<pre><code class="language-java">// å¯¹äºæè´µçæä½ï¼å¿é¡»æ¾å¼å¤æ­
if (log.isDebugEnabled()) {
    log.debug("å½åè®¢åè¯¦æ: {}", JSON.toJSONString(order));
}
</code></pre>
<p>æèï¼å¦æä½ ä½¿ç¨çæ¯æ¯æ Fluent API çæ°ç SLF4J/Log4j2ï¼å¯ä»¥ç¨ Lambda æ¥å®ç°çæ­£çå»¶è¿è®¡ç®ï¼ä½å¨éç¨åºæ¯ä¸ï¼<code>isDebugEnabled</code> ä¾ç¶æ¯æ°¸è¿çç¥ã</p>
<hr>
<h3 id="ä¸-ç»æ¥å¿å ç¹éè§ç¼">ä¸ã ç»æ¥å¿å ç¹âéè§ç¼â</h3>
<h4 id="1-å·§ç¨-topic-è¿è¡åæµ">1. å·§ç¨ <code>topic</code> è¿è¡åæµ</h4>
<p>é»è®¤æåµä¸ï¼ææçæ¥å¿é½æ··å¨ <code>log</code> åééãä½ææ¶åï¼æä»¬éè¦å¯¹æäºç¹æ®çä¸å¡è¿è¡ç¬ç«çæ§ï¼æ¯å¦âæ ¸å¿äº¤æé¾è·¯âæâç¬¬ä¸æ¹æ¥å£å®¡è®¡âã</p>
<p>ä½ ä¸éè¦éæ°å®ä¹ä¸ä¸ª Loggerï¼<code>@Slf4j</code> åçæ¯æï¼</p>
<pre><code class="language-java">// å®ä¹ä¸ä¸ªåä¸º "AUDIT_LOG" çç¬ç« topic
@Slf4j(topic = "AUDIT_LOG")
public class PayController {
    public void pay() {
        // è¿è¡æ¥å¿ç logger name ä¸åæ¯ç±»åï¼èæ¯ "AUDIT_LOG"
        log.info("åèµ·æ¯ä»è¯·æ±...");
    }
}
</code></pre>
<p>éå <code>logback.xml</code> çéç½®ï¼ä½ å¯ä»¥è½»æ¾æè¿ä¸ª Topic çæ¥å¿åç¬è¾åºå°ä¸ä¸ª <code>audit.log</code> æä»¶ä¸­ï¼çè³åéå°ä¸é¨ççæ§æ¥è­¦ç¾¤ï¼èä¸ä¼æ·¹æ²¡å¨æµ·éçä¸å¡æ¥å¿éã</p>
<h4 id="2-mdcç©¿è¶æ¶ç©ºççº¿ç´¢">2. MDCï¼ç©¿è¶æ¶ç©ºççº¿ç´¢</h4>
<p>å¨å¾®æå¡æå¼æ­¥è°ç¨å¤æçç³»ç»ä¸­ï¼ææ¥é®é¢æå¤§ççç¹æ¯ï¼<strong>ä¸ç¥éè¿è¡æ¥å¿å±äºåªä¸ªè¯·æ±ã</strong></p>
<p>è¿æ¯ SLF4J ç MDCï¼Mapped Diagnostic Contextï¼å¤§æ¾èº«æçæ¶åãå®å©ç¨ <code>ThreadLocal</code> å­å¨ä¸ä¸æä¿¡æ¯ã</p>
<pre><code class="language-java">// å¨æ¦æªå¨æå¥å£å¤
MDC.put("requestId", UUID.randomUUID().toString());
MDC.put("userId", user.getId());

// ... æ è®ºåç»­ç»è¿å¤å°ä¸ª Serviceï¼åªæå¨åä¸çº¿ç¨å
log.info("å¤çè®¢å"); 
// è¾åºä¼èªå¨å¸¦ä¸ï¼[requestId:abc-123] [userId:1001] å¤çè®¢å
</code></pre>
<p>å®å°±åç»æ¯ä¸ªè¯·æ±åäºä¸ä¸ªâå·¥çâï¼æ è®ºèµ°å°åªéï¼ä½ é½è½ä¸ç¼è®¤åºå®æ¥ã</p>
<hr>
<h3 id="å-é¿åæåç»§æ¿ä¸æ··æ·">åã é¿åæåï¼ç»§æ¿ä¸æ··æ·</h3>
<h4 id="ï¸-è¯¯åºç¶ç±»çæ¥å¿æ¯è°ç">â ï¸ è¯¯åºï¼ç¶ç±»çæ¥å¿æ¯è°çï¼</h4>
<pre><code class="language-java">@Slf4j
public class BaseService {
    public void init() {
        log.info("BaseService init...");
    }
}

public class UserService extends BaseService {
    // UserService ç»§æ¿äº BaseService çæ¹æ³
}
</code></pre>
<p>å½ <code>UserService</code> è°ç¨ <code>init()</code> æ¶ï¼æå°åºæ¥çæ¥å¿ç±»åæ¯ <code>BaseService</code> è¿æ¯ <code>UserService</code>ï¼<br>
ç­æ¡æ¯ï¼<strong>BaseService</strong>ã</p>
<p>å ä¸º <code>@Slf4j</code> çæçæ¯ <code>private static final</code> å­æ®µï¼å®æ¯å±äºå®ä¹å®çé£ä¸ªç±»çãå¦æä½ å¸ææ¥å¿æ¾ç¤ºå­ç±»çåå­ï¼ä¸è¦ä¾èµç»§æ¿ï¼èæ¯å¨å­ç±»ä¸­éæ°å£°ææ³¨è§£ï¼æèä½¿ç¨ééæç loggerï¼ä¸æ¨èï¼æ§è½ç¥å·®ï¼ã</p>
<hr>
<h3 id="äº-åå¨æå">äºã åå¨æå</h3>
<p>æ¥å¿ï¼æ¯ç³»ç»çâé»å£å­âï¼ä¹æ¯ç¨åºåçç»æªæ¥çâä¿¡âã</p>
<p>å½æä»¬æ²ä¸ <code>@Slf4j</code> æ¶ï¼ä¸å¦¨å¤æ³ä¸æ­¥ï¼</p>
<ul>
<li>è¿è¡æ¥å¿ççæå¿è¦åï¼</li>
<li>åæ°éææ²¡æåå«ä¸ä»èæ¶è¿å¯è½æ³é²éç§çå¤§å¯¹è±¡ï¼</li>
<li>å½åæ¨è¢«å«éææ¥é®é¢æ¶ï¼è¿è¡æ¥å¿è½è®©æè¿ç§âå±å¤äººâçæåï¼</li>
</ul>
<p><strong>å¥½çæ¥å¿ï¼ä¸æ¯è®°æµæ°´è´¦ï¼èæ¯æå»ºç³»ç»è¿è¡çæ¶ç©ºé§éãå½ä½ åè§æ¥å¿æ¶ï¼æ¥å¿ä¹å¨åä½ è¯è¯´ç³»ç»çå¥åº·ä¸çµé­ã</strong></p>
<hr>
<blockquote>
<p>æç« çæåï¼æ³åä½ å¤èä¸¤å¥ã</p>
<p>ææ¯ä¹è·¯ï¼å¸¸å¸¸æ¯ç­é¹ä¸å­¤ç¬å¹¶å­ãé£äºæ·±å¤çè°è¯ãçµåä¸éªçæ¹æ¡ãè¿æè¸©åç¬èµ·åçé¡¿æï¼å¦æè½æäººä¸èµ·èèï¼è¯¥å¤å¥½ã</p>
<p>ä¸ºæ­¤ï¼æå»ºäºä¸ä¸ªå°è±å­ââæçå¾®ä¿¡å¬ä¼å·ã<strong>[åªåçå°é]</strong>ãã</p>
<p>è¿éæ²¡æé«æ·±è«æµççè®ºå ç ï¼åªææå¯¹åç«¯å¼åãç³»ç»è®¾è®¡åå·¥ç¨å®è·µçæç»­æèä¸æ²æ·ãå®æ´åæç<strong>æ°å­ç¬è®°æ¬</strong>ï¼è®°å½çé£äºå¼å¾è¢«è®°ä½çè§£å³æ¹æ¡åæç»´ç«è±ã</p>
<p>å¦æä½ è§å¾ä»å¤©çæç« è¿æä¸ç¹å¯åï¼æèåçº¯æ³æ¾ä¸ä¸ªåè¡èå¶å°èèææ¯ãè°è°æèï¼é£ä¹ï¼æ¬¢è¿ä½ æ¥ååã<br>
<img alt="85f114bceb12e933bb817ec5fecdfef7" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3703499/202601/3703499-20260105210259813-964799315.jpg" class="lazyload"></p>
<p>æ¿ä½ åè¡è·¯ä¸ï¼æ»æä»£ç å¯åï¼ææ¢¦å¯è¿½ï¼ä¹æç¯ç«å¯äº²ã</p>
</blockquote>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-09 09:38">2026-02-09 09:38</span>&nbsp;
<a href="https://www.cnblogs.com/xzqcsj">ä¸æäºº</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19583495);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19583495', targetLink: 'https://www.cnblogs.com/xzqcsj/p/19583495', title: '@Slf4jï¼ä¸æ­¢æ¯çä¸è¡ä»£ç ï¼æ´æ¯çäº§çº§æ¥å¿çèºæ¯' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ä¸å¥åºäº Redis åæ¡¶ + DB æç»é©±å¨çå¼ºä¸è´æ§åºå­æ£åæ¹æ¡ï¼å®ç°é¶è¶åãé¶å°åï¼æ¯æ Redis å®æºèªå¨éçº§ ]]></title>
    <link>https://www.cnblogs.com/ZouYua/p/19593557</link>
    <guid>ed31ea6984deeed22b0fd97d1abc4aaa</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ZouYua/p/19593557" title="åå¸äº 2026-02-09 09:16">
    <span role="heading" aria-level="2">ä¸å¥åºäº Redis åæ¡¶ + DB æç»é©±å¨çå¼ºä¸è´æ§åºå­æ£åæ¹æ¡ï¼å®ç°é¶è¶åãé¶å°åï¼æ¯æ Redis å®æºèªå¨éçº§</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="çµååºå­é«å¹¶åæ£åç³»ç»">çµååºå­é«å¹¶åæ£åç³»ç»</h1>
<blockquote>
<p>ä¸å¥åºäº Redis åæ¡¶ + DB æç»é©±å¨çå¼ºä¸è´æ§åºå­æ£åæ¹æ¡ï¼å®ç°é¶è¶åãé¶å°åï¼æ¯æ Redis å®æºèªå¨éçº§</p>
</blockquote>
<h2 id="ç®å½">ç®å½</h2>
<ul>
<li><a href="#%E4%B8%80%E8%83%8C%E6%99%AF%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E9%AB%98%E5%B9%B6%E5%8F%91%E5%BA%93%E5%AD%98%E6%89%A3%E5%87%8F%E6%96%B9%E6%A1%88" rel="noopener nofollow">ä¸ãèæ¯ï¼ä¸ºä»ä¹éè¦é«å¹¶ååºå­æ£åæ¹æ¡</a></li>
<li><a href="#%E4%BA%8C%E4%BC%A0%E7%BB%9F%E6%96%B9%E6%A1%88%E7%9A%84%E4%B8%89%E5%A4%A7%E7%97%9B%E7%82%B9" rel="noopener nofollow">äºãä¼ ç»æ¹æ¡çä¸å¤§çç¹</a></li>
<li><a href="#%E4%B8%89%E6%A0%B8%E5%BF%83%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3" rel="noopener nofollow">ä¸ãæ ¸å¿è®¾è®¡ææ³</a></li>
<li><a href="#%E5%9B%9B%E6%8A%80%E6%9C%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3" rel="noopener nofollow">åãææ¯æ¶æè¯¦è§£</a></li>
<li><a href="#%E4%BA%94%E6%A0%B8%E5%BF%83%E6%B5%81%E7%A8%8B%E5%AE%9E%E7%8E%B0" rel="noopener nofollow">äºãæ ¸å¿æµç¨å®ç°</a></li>
<li><a href="#%E5%85%AD%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E8%A7%A3%E7%AD%94" rel="noopener nofollow">å­ãå¸¸è§é®é¢è§£ç­</a></li>
<li><a href="#%E4%B8%83%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E4%B8%8E%E4%BC%98%E5%8C%96" rel="noopener nofollow">ä¸ãæ§è½æµè¯ä¸ä¼å</a></li>
<li><a href="#%E5%85%AB%E6%80%BB%E7%BB%93%E4%B8%8E%E5%B1%95%E6%9C%9B" rel="noopener nofollow">å«ãæ»ç»ä¸å±æ</a></li>
</ul>
<hr>
<h2 id="ä¸èæ¯ä¸ºä»ä¹éè¦é«å¹¶ååºå­æ£åæ¹æ¡">ä¸ãèæ¯ï¼ä¸ºä»ä¹éè¦é«å¹¶ååºå­æ£åæ¹æ¡</h2>
<p>å¨çµåç³»ç»ä¸­ï¼åºå­æ£åæ¯ä¸ä¸ªçä¼¼ç®åä½å®ééå¸¸å¤æçé®é¢ãå°¤å¶æ¯å¨ä»¥ä¸åºæ¯ï¼</p>
<h3 id="å¸ååºæ¯">å¸ååºæ¯</h3>
<ol>
<li><strong>ç§ææ´»å¨</strong>ï¼1000 ä»¶ååï¼10 ä¸ç¨æ·åæ¶æ¢è´­</li>
<li><strong>ç´æ­å¸¦è´§</strong>ï¼ä¸»æ­ä¸å¥è¯ï¼æ°ä¸äººåæ¶ä¸å</li>
<li><strong>ééåå®</strong>ï¼æ°åé¦åï¼ç¬æ¶æµéæ´å¢</li>
</ol>
<h3 id="æ ¸å¿ææ">æ ¸å¿ææ</h3>
<ul>
<li><strong>é«å¹¶å</strong>ï¼æ¯ç§æ°ä¸æ¬¡åºå­æ£åè¯·æ±</li>
<li><strong>å¼ºä¸è´æ§</strong>ï¼ç»å¯¹ä¸è½è¶åï¼ååºçååæ° &gt; å®éåºå­ï¼</li>
<li><strong>é¶å°å</strong>ï¼ä¸è½å ä¸ºç³»ç»é®é¢å¯¼è´æåºå­å´åä¸åºå»</li>
<li><strong>é«å¯ç¨</strong>ï¼Redis å®æºåç³»ç»ä»è½æ­£å¸¸è¿è¡</li>
</ul>
<hr>
<h2 id="äºä¼ ç»æ¹æ¡çä¸å¤§çç¹">äºãä¼ ç»æ¹æ¡çä¸å¤§çç¹</h2>
<h3 id="æ¹æ¡-1çº¯æ°æ®åºæ£å">æ¹æ¡ 1ï¼çº¯æ°æ®åºæ£å</h3>
<p><strong>å®ç°æ¹å¼ï¼</strong></p>
<pre><code class="language-sql">UPDATE inventory 
SET stock = stock - 1 
WHERE product_id = 1001 AND stock &gt; 0;
</code></pre>
<p><strong>ä¼ç¹ï¼</strong></p>
<ul>
<li>å®ç°ç®å</li>
<li>æ°æ®å¼ºä¸è´æ§</li>
</ul>
<p><strong>ç¼ºç¹ï¼</strong></p>
<ul>
<li>â <strong>æ§è½ç¶é¢</strong>ï¼åè¡ç­ç¹æ´æ°ï¼MySQL è¡éå¯¼è´å¤§éè¯·æ±æé</li>
<li>â <strong>TPS ä½</strong>ï¼åæº MySQL åªè½æ¯æ 1000-2000 TPS</li>
<li>â <strong>ç¨æ·ä½éªå·®</strong>ï¼å¤§éè¯·æ±è¶æ¶ï¼ç¨æ·ç­å¾æ¶é´é¿</li>
</ul>
<h3 id="æ¹æ¡-2çº¯-redis-æ£å">æ¹æ¡ 2ï¼çº¯ Redis æ£å</h3>
<p><strong>å®ç°æ¹å¼ï¼</strong></p>
<pre><code class="language-bash">DECR inventory:1001
</code></pre>
<p><strong>ä¼ç¹ï¼</strong></p>
<ul>
<li>æ§è½æé«ï¼åæº 10 ä¸+ TPSï¼</li>
<li>ååºéåº¦å¿«</li>
</ul>
<p><strong>ç¼ºç¹ï¼</strong></p>
<ul>
<li>â <strong>æ æ³é¿åå°å</strong>ï¼Redis è¶æ¶æ¶ï¼åºç¨å±æ æ³å¤æ­æ¯å¦æ£åæå</li>
<li>â <strong>åªæ¯æç®åæ¨¡å</strong>ï¼æ æ³æ¯æ SQ/LQ/WQ/OQ ç­å¤æåºå­ç¶æ</li>
<li>â <strong>å®å¨ä¾èµ Redis</strong>ï¼Redis å®æºåæ´ä¸ªç³»ç»ä¸å¯ç¨</li>
</ul>
<h3 id="æ¹æ¡-3ä¼ ç»-redis-åæ¡¶">æ¹æ¡ 3ï¼ä¼ ç» Redis åæ¡¶</h3>
<p><strong>å®ç°æ¹å¼ï¼</strong></p>
<ul>
<li>å°åºå­åæ£å°å¤ä¸ª Redis åæ¡¶</li>
<li>æ£åæ¶éæºéæ©ä¸ä¸ªåæ¡¶</li>
</ul>
<p><strong>ä¼ç¹ï¼</strong></p>
<ul>
<li>æ§è½è¾å¥½</li>
<li>éä½åç¹åå</li>
</ul>
<p><strong>ç¼ºç¹ï¼</strong></p>
<ul>
<li>â <strong>ä»ç¶æ æ³é¿åå°å</strong></li>
<li>â <strong>åæ¡¶ä¸åå¯¼è´è¶å</strong>ï¼æäºåæ¡¶åè¢«æ£å®ï¼ä½å¶ä»åæ¡¶è¿æåºå­</li>
<li>â <strong>æ æ³æ¯æå¤æåºå­æ¨¡å</strong></li>
</ul>
<hr>
<h2 id="ä¸æ ¸å¿è®¾è®¡ææ³">ä¸ãæ ¸å¿è®¾è®¡ææ³</h2>
<h3 id="31-è®¾è®¡åå">3.1 è®¾è®¡åå</h3>
<p>æä»¬çæ¹æ¡åºäºä¸ä¸ªæ ¸å¿ææ³ï¼<strong>Redis åªåè®¡æ°ï¼DB æç»ä¸ºå</strong></p>
<pre><code>âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
â                    æ ¸å¿è®¾è®¡åå                           â
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ¤
â 1. Redis åæ¡¶ï¼ä»ç¨äºé«å¹¶åè®¡æ°éªè¯ï¼é²æ­¢è¶å                 â
â 2. DB æç»è¡¨ï¼è®°å½ææåºå­æµè½¬ï¼æ¯å¯ä¸æ°æ®æº                  â
â 3. åå¹¶æäº¤ï¼å®æ¶æ¹éæ´æ°ä¸»è¡¨ï¼éä½ DB åå                   â
â 4. èªå¨éçº§ï¼Redis ä¸å¯ç¨æ¶èªå¨åæ¢å°ä½å¹¶åæµç¨               â
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
</code></pre>
<h3 id="32-åºå­å­æ®µè®¾è®¡">3.2 åºå­å­æ®µè®¾è®¡</h3>
<p>æä»¬è®¾è®¡äºåä¸ªæ ¸å¿åºå­å­æ®µï¼æ¯æå®æ´ççµåä¸å¡æµç¨ï¼</p>
<table>
<thead>
<tr>
<th>å­æ®µ</th>
<th>åç§°</th>
<th>ä½ç¨</th>
<th>åç«¯å±ç¤º</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>SQ</strong></td>
<td>å¯å®åºå­</td>
<td>ä½å¹¶åç´æ¥æ£åï¼æªé¢ç­æ¶çä¸»è¦åºå­</td>
<td>â å±ç¤ºï¼SQ+LQï¼</td>
</tr>
<tr>
<td><strong>LQ</strong></td>
<td>é¢éåºå­</td>
<td>é«å¹¶åä¸ç¨ç¼å²åºï¼é¢ç­åä» SQ éç¦»</td>
<td>â å±ç¤ºï¼SQ+LQï¼</td>
</tr>
<tr>
<td><strong>WQ</strong></td>
<td>é¢æ£åºå­</td>
<td>ä¸åæªä»æ¬¾ä¸´æ¶éå®</td>
<td>â ä¸å±ç¤º</td>
</tr>
<tr>
<td><strong>OQ</strong></td>
<td>å ç¨åºå­</td>
<td>ä»æ¬¾åå®éå ç¨ï¼ç­å¾åè´§</td>
<td>â ä¸å±ç¤º</td>
</tr>
</tbody>
</table>
<p><strong>æ ¸å¿é­ç¯ï¼</strong> <code>SQ + LQ + WQ + OQ = æ»åºå­</code>ï¼æªåºåºæ¶ï¼</p>
<p><strong>åç«¯å±ç¤ºè§åï¼</strong></p>
<ul>
<li><strong>åååè¡¨/è¯¦æé¡µ</strong>ï¼æ¾ç¤º <code>SQ + LQ</code>ï¼æ»å¯å®åºå­ï¼
<ul>
<li>åç«¯è¿åå­æ®µåä¸º <code>totalSq</code>ï¼ä½å¼æ¯ <code>SQ + LQ</code> çæ»å</li>
<li>ç¨æ·çå°çæ¯"å¯ä»¥è´­ä¹°çæ»åºå­"</li>
</ul>
</li>
<li><strong>ç®¡çåå°</strong>ï¼åå«æ¾ç¤º SQãLQãWQãOQï¼ä¾¿äºè¿è¥çæ§ï¼</li>
<li><strong>ç¨æ·è§è§</strong>ï¼åªå³å¿"è½ä¹°å¤å°"ï¼å³ SQ+LQ</li>
</ul>
<h3 id="33-åºå­æµè½¬è§å">3.3 åºå­æµè½¬è§å</h3>
<pre><code>é¢ç­é¶æ®µï¼    SQ ââââââââââ&gt; LQ
              â              â
ä¸åé¶æ®µï¼    âââ&gt; WQ &lt;âââââââ
              â
ä»æ¬¾é¶æ®µï¼    âââââââââââ&gt; OQ
              â              â
å±¥çº¦é¶æ®µï¼    âââ&gt; åºåº      âââ&gt; éæ¬¾ ââ&gt; SQ/LQ
</code></pre>
<p><strong>å³é®è®¾è®¡ï¼</strong></p>
<ul>
<li>æææµè½¬é½åæå¥æç»è¡¨</li>
<li>å®æ¶ä»»å¡æ«ææç»ï¼æ¹éæ´æ°ä¸»è¡¨</li>
<li>ç¦æ­¢è·¨ç¶ææµè½¬ï¼å¦ SQ ä¸è½ç´æ¥å° OQï¼</li>
</ul>
<hr>
<h2 id="åææ¯æ¶æè¯¦è§£">åãææ¯æ¶æè¯¦è§£</h2>
<h3 id="41-æ´ä½æ¶æå¾">4.1 æ´ä½æ¶æå¾</h3>
<pre><code>âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
â                         ç¨æ·è¯·æ±                             â
ââââââââââââââââââââââââââ¬âââââââââââââââââââââââââââââââââââââ
                         â
                         â¼
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
â                    åºç¨å±ï¼Spring Bootï¼                     â
â  ââââââââââââââââ  ââââââââââââââââ  ââââââââââââââââ      â
â  â åºå­é¢ç­æ¨¡å  â  â ä¸åæ£åæ¨¡å  â  â è®¢åæ¯ä»æ¨¡å  â      â
â  ââââââââââââââââ  ââââââââââââââââ  ââââââââââââââââ      â
â  ââââââââââââââââ  ââââââââââââââââ                        â
â  â åå¹¶æäº¤ä»»å¡  â  â è¶æ¶åæ¶ä»»å¡  â                        â
â  ââââââââââââââââ  ââââââââââââââââ                        â
ââââââââââââââ¬ââââââââââââââââââââââââ¬âââââââââââââââââââââââââ
             â                       â
             â¼                       â¼
âââââââââââââââââââââââ   âââââââââââââââââââââââ
â   Redis åæ¡¶éç¾¤     â   â   MySQL æ°æ®åº       â
â  ââââââ ââââââ      â   â  ââââââââââââââââ   â
â  âæ¡¶0 â âæ¡¶1 â ...  â   â  â inventory    â   â
â  ââââââ ââââââ      â   â  â (ä¸»è¡¨)       â   â
â                     â   â  ââââââââââââââââ   â
â  ä»åè®¡æ°éªè¯        â   â  ââââââââââââââââ   â
â  é²æ­¢è¶å           â   â  â deduct_detailâ   â
â                     â   â  â (æç»è¡¨)     â   â
âââââââââââââââââââââââ   â  ââââââââââââââââ   â
                          â                     â
                          â  æ°æ®å¯ä¸æ¥æº        â
                          âââââââââââââââââââââââ
</code></pre>
<h3 id="42-æ ¸å¿è¡¨è®¾è®¡">4.2 æ ¸å¿è¡¨è®¾è®¡</h3>
<h4 id="421-åºå­ä¸»è¡¨inventory">4.2.1 åºå­ä¸»è¡¨ï¼inventoryï¼</h4>
<pre><code class="language-sql">CREATE TABLE `inventory` (
  `inv_id` BIGINT PRIMARY KEY AUTO_INCREMENT,
  `product_id` BIGINT NOT NULL,
  `spec_id` BIGINT NOT NULL DEFAULT 0,
  `sq` INT NOT NULL DEFAULT 0 COMMENT 'å¯å®åºå­',
  `lq` INT NOT NULL DEFAULT 0 COMMENT 'é¢éåºå­',
  `wq` INT NOT NULL DEFAULT 0 COMMENT 'é¢æ£åºå­',
  `oq` INT NOT NULL DEFAULT 0 COMMENT 'å ç¨åºå­',
  `version` INT NOT NULL DEFAULT 1 COMMENT 'ä¹è§éçæ¬å·',
  UNIQUE KEY `uk_product_spec` (`product_id`, `spec_id`)
) ENGINE=InnoDB;
</code></pre>
<p><strong>å³é®ç¹ï¼</strong></p>
<ul>
<li><code>version</code> å­æ®µï¼ä¹è§éï¼é²æ­¢åå¹¶æäº¤æ¶çå¹¶åå²çª</li>
<li>å¯ä¸ç´¢å¼ï¼é²æ­¢åä¸ååè§æ ¼åå»ºå¤æ¡åºå­è®°å½</li>
</ul>
<h4 id="422-åºå­æ£åæç»è¡¨inventory_deduct_detail">4.2.2 åºå­æ£åæç»è¡¨ï¼inventory_deduct_detailï¼</h4>
<pre><code class="language-sql">CREATE TABLE `inventory_deduct_detail` (
  `detail_id` BIGINT PRIMARY KEY AUTO_INCREMENT,
  `inv_id` BIGINT NOT NULL,
  `lock_order_id` VARCHAR(64) NOT NULL COMMENT 'è®¢åå·/ä¸å¡æ è¯',
  `quantity` INT NOT NULL COMMENT 'æµè½¬æ°é',
  `flow_type` TINYINT NOT NULL COMMENT 'æµè½¬ç±»å',
  `status` TINYINT NOT NULL DEFAULT 0 COMMENT '0-å¾å¤ç 1-å·²å¤ç',
  UNIQUE KEY `uk_inv_order` (`inv_id`, `lock_order_id`),
  KEY `idx_inv_status_flow` (`inv_id`, `status`, `flow_type`)
) ENGINE=InnoDB;
</code></pre>
<p><strong>å³é®ç¹ï¼</strong></p>
<ul>
<li><code>uk_inv_order</code>ï¼å¤©ç¶å®ç°å¹ç­æ§ï¼é²æ­¢éå¤ä¸å</li>
<li><code>idx_inv_status_flow</code>ï¼è¦çç´¢å¼ï¼åå¹¶æäº¤æ¶æ éåè¡¨</li>
</ul>
<h4 id="423-redis-åæ¡¶éç½®è¡¨inventory_redis_bucket">4.2.3 Redis åæ¡¶éç½®è¡¨ï¼inventory_redis_bucketï¼</h4>
<pre><code class="language-sql">CREATE TABLE `inventory_redis_bucket` (
  `bucket_id` BIGINT PRIMARY KEY AUTO_INCREMENT,
  `inv_id` BIGINT NOT NULL,
  `bucket_no` INT NOT NULL COMMENT 'åæ¡¶ç¼å·',
  `bucket_key` VARCHAR(128) NOT NULL COMMENT 'Redis key',
  `init_quantity` INT NOT NULL DEFAULT 0,
  UNIQUE KEY `uk_inv_bucketno` (`inv_id`, `bucket_no`)
) ENGINE=InnoDB;
</code></pre>
<p><strong>å³é®ç¹ï¼</strong></p>
<ul>
<li>æä¹ååæ¡¶éç½®ï¼æ¯æå¨æè°æ´</li>
<li>è®°å½åå§åæ°éï¼æ¹ä¾¿æéæ¢å¤</li>
</ul>
<hr>
<h2 id="äºæ ¸å¿æµç¨å®ç°">äºãæ ¸å¿æµç¨å®ç°</h2>
<h3 id="51-åºå­é¢ç­sq--lq">5.1 åºå­é¢ç­ï¼SQ â LQï¼</h3>
<p><strong>åºæ¯ï¼</strong> åå®¶ä¸æ¶ååï¼ç³»ç»èªå¨é¢ç­ 50% åºå­å° LQ</p>
<pre><code class="language-java">@Transactional
public String preheatInventory(Long invId) {
    // 1. æ¥è¯¢åºå­
    Inventory inventory = inventoryMapper.selectById(invId);
    
    // 2. è®¡ç®é¢ç­æ°éï¼50%ï¼
    Integer preheatQuantity = (int) (inventory.getSq() * 0.5);
    
    // 3. æ´æ°ä¸»è¡¨ï¼SQ â LQ
    inventory.setSq(inventory.getSq() - preheatQuantity);
    inventory.setLq(inventory.getLq() + preheatQuantity);
    inventoryMapper.updateById(inventory);
    
    // 4. æå¥é¢ç­æç»ï¼flow_type=0ï¼
    InventoryDeductDetail detail = new InventoryDeductDetail();
    detail.setInvId(invId);
    detail.setFlowType(0); // SQâLQ
    detail.setQuantity(preheatQuantity);
    detail.setStatus(1); // å·²å¤ç
    detailMapper.insert(detail);
    
    // 5. åå§å Redis åæ¡¶ï¼10 ä¸ªåæ¡¶ï¼
    bucketManager.initBuckets(invId, preheatQuantity, 10);
    
    return "é¢ç­æå";
}
</code></pre>
<p><strong>Redis åæ¡¶åå§åï¼</strong></p>
<pre><code class="language-java">public void initBuckets(Long invId, Integer totalQuantity, Integer bucketCount) {
    int baseValue = totalQuantity / bucketCount;
    int remainder = totalQuantity % bucketCount;
    
    for (int i = 0; i &lt; bucketCount; i++) {
        String key = "inventory:bucket:" + invId + ":" + i;
        int value = baseValue + (i &lt; remainder ? 1 : 0);
        redisTemplate.opsForValue().set(key, value);
    }
}
</code></pre>
<h3 id="52-é«å¹¶åä¸ålq--wq">5.2 é«å¹¶åä¸åï¼LQ â WQï¼</h3>
<p><strong>åºæ¯ï¼</strong> ç¨æ·ä¸å 3 ä»¶ååï¼Redis åæ¡¶æ£å + DB æç»è®°å½</p>
<pre><code class="language-java">@Transactional
public String deductInventoryHighConcurrency(Long invId, String orderNo, Integer quantity) {
    try {
        // 1. éæ© Redis åæ¡¶ï¼åå¸åæ¨¡ï¼
        Integer bucketNo = selectBucket(invId, orderNo);
        
        // 2. Redis åå­æ£å
        Long result = redisTemplate.opsForValue()
            .decrement("inventory:bucket:" + invId + ":" + bucketNo, quantity);
        
        // 3. æ£åå¤±è´¥ï¼éè¯ 3 ä¸ªéæºåæ¡¶
        if (result &lt; 0) {
            // åè¡¥åææ£åçåæ¡¶
            redisTemplate.opsForValue().increment(key, quantity);
            
            // éè¯å¶ä»åæ¡¶...
            // ä»å¤±è´¥åéçº§å°ä½å¹¶åæµç¨
            return deductInventoryLowConcurrency(invId, orderNo, quantity);
        }
        
        // 4. Redis æåï¼æå¥ DB æç»
        InventoryDeductDetail detail = new InventoryDeductDetail();
        detail.setInvId(invId);
        detail.setLockOrderId(orderNo);
        detail.setQuantity(quantity);
        detail.setFlowType(1); // LQâWQ
        detail.setStatus(0); // å¾å¤ç
        detailMapper.insert(detail);
        
        return "æ£åæå";
        
    } catch (Exception e) {
        // Redis å¼å¸¸ï¼èªå¨éçº§
        return deductInventoryLowConcurrency(invId, orderNo, quantity);
    }
}
</code></pre>
<p><strong>åæ¡¶éæ©ç®æ³ï¼</strong></p>
<pre><code class="language-java">private Integer selectBucket(Long invId, String orderNo) {
    // åå¸åæ¨¡ï¼ä¿è¯åä¸è®¢åæ»æ¯éæ©åä¸ä¸ªåæ¡¶
    int hash = orderNo.hashCode();
    return Math.abs(hash) % bucketCount;
}
</code></pre>
<h3 id="53-ä½å¹¶åä¸åsqlq--wq">5.3 ä½å¹¶åä¸åï¼SQ/LQ â WQï¼</h3>
<p><strong>åºæ¯ï¼</strong> Redis ä¸å¯ç¨æåæ¡¶åºå­ä¸è¶³ï¼æºè½éæ© SQ æ LQ</p>
<pre><code class="language-java">@Transactional
public String deductInventoryLowConcurrency(Long invId, String orderNo, Integer quantity) {
    // 1. æ¥è¯¢å½ååºå­
    Inventory inventory = inventoryMapper.selectById(invId);
    Integer totalAvailable = inventory.getSq() + inventory.getLq();
    
    // 2. æ£æ¥æ»å¯å®åºå­
    if (totalAvailable &lt; quantity) {
        throw new IllegalStateException("åºå­ä¸è¶³");
    }
    
    // 3. æºè½åéï¼ä¼åä½¿ç¨ SQ
    if (inventory.getSq() &gt;= quantity) {
        // SQ è¶³å¤ï¼å¨é¨ä» SQ æ£å
        insertDetail(invId, orderNo, quantity, 2); // SQâWQ
        
    } else if (inventory.getSq() &gt; 0) {
        // SQ ä¸è¶³ï¼æ··åæ£å
        insertDetail(invId, orderNo, inventory.getSq(), 2); // SQâWQ
        insertDetail(invId, orderNo + "_LQ", quantity - inventory.getSq(), 1); // LQâWQ
        
    } else {
        // SQ ä¸º 0ï¼å¨é¨ä» LQ æ£å
        insertDetail(invId, orderNo, quantity, 1); // LQâWQ
    }
    
    return "æ£åæå";
}
</code></pre>
<p><strong>å³é®åæ°ï¼</strong> ä½å¹¶åæµç¨ä¼æºè½æ£æ¥ SQ+LQ æ»åºå­ï¼é¿å"æåºå­å´åä¸åºå»"çé®é¢ã</p>
<h3 id="54-è®¢åæ¯ä»wq--oq">5.4 è®¢åæ¯ä»ï¼WQ â OQï¼</h3>
<p><strong>åºæ¯ï¼</strong> ç¨æ·ä»æ¬¾æåï¼åºå­ä» WQ æµè½¬å° OQ</p>
<pre><code class="language-java">@Transactional
public String payOrder(String orderNo) {
    // 1. æ¥è¯¢è®¢åæç»
    List&lt;OrderItem&gt; items = orderItemMapper.selectByOrderNo(orderNo);
    
    for (OrderItem item : items) {
        // 2. æå¥ WQâOQ æç»
        InventoryDeductDetail detail = new InventoryDeductDetail();
        detail.setInvId(item.getInvId());
        detail.setLockOrderId(orderNo + "_PAY");
        detail.setQuantity(item.getQuantity());
        detail.setFlowType(3); // WQâOQ
        detail.setStatus(0); // å¾å¤ç
        detailMapper.insert(detail);
        
        // æ³¨æï¼ä¸æå¨æ´æ°åæç»ç¶æï¼è®©å®æ¶ä»»å¡ç»ä¸å¤ç
    }
    
    return "æ¯ä»æå";
}
</code></pre>
<p><strong>å³é®ä¿®å¤ï¼</strong> ä¸åæå¨æ è®°åæç»ä¸ºå·²å¤çï¼é¿åæ¯ä»è¿å¿«å¯¼è´æç»æ¼æ«æã</p>
<h3 id="55-åå¹¶æäº¤æ ¸å¿æ§è½ä¼å">5.5 åå¹¶æäº¤ï¼æ ¸å¿æ§è½ä¼åï¼</h3>
<p><strong>åºæ¯ï¼</strong> å®æ¶ä»»å¡æ¯ 50ms æ«æå¾å¤çæç»ï¼æ¹éæ´æ°ä¸»è¡¨</p>
<pre><code class="language-java">@Scheduled(fixedDelay = 50)
public void execute() {
    // æ«æéè¦åå¹¶çåºå­ ID
    List&lt;Long&gt; invIdList = detailMapper.listNeedMergeInvId();
    
    for (Long invId : invIdList) {
        executeMerge(invId);
    }
}

@Transactional
public void executeMerge(Long invId) {
    // 1. è·ååå¸å¼éï¼Redis ä¸å¯ç¨æ¶è·³è¿ï¼
    RLock lock = redissonClient.getLock("inventory:merge:lock:" + invId);
    try {
        lock.tryLock(0, 500, TimeUnit.MILLISECONDS);
    } catch (Exception e) {
        // Redis ä¸å¯ç¨ï¼ä¾èµæ°æ®åºä¹è§é
    }
    
    try {
        // 2. éå® Redis åæ¡¶ï¼MSET ç½® 0ï¼
        bucketManager.lockAllBuckets(invId);
        
        // 3. æ«æå¾å¤çæç»ï¼æ flow_type åç»æ±å
        List&lt;Map&lt;String, Object&gt;&gt; aggregation = detailMapper.aggregateByFlowType(invId);
        
        // 4. è®¡ç®åºå­ååé
        int sqDelta = 0, lqDelta = 0, wqDelta = 0, oqDelta = 0;
        for (Map&lt;String, Object&gt; row : aggregation) {
            Integer flowType = (Integer) row.get("flow_type");
            Integer quantity = (Integer) row.get("total_quantity");
            
            switch (flowType) {
                case 1: // LQâWQ
                    lqDelta -= quantity;
                    wqDelta += quantity;
                    break;
                case 2: // SQâWQ
                    sqDelta -= quantity;
                    wqDelta += quantity;
                    break;
                case 3: // WQâOQ
                    wqDelta -= quantity;
                    oqDelta += quantity;
                    break;
                // ... å¶ä»æµè½¬ç±»å
            }
        }
        
        // 5. ä½¿ç¨ä¹è§éæ´æ°ä¸»è¡¨
        Inventory inventory = inventoryMapper.selectById(invId);
        Integer currentVersion = inventory.getVersion();
        
        inventoryMapper.update(null, new LambdaUpdateWrapper&lt;Inventory&gt;()
            .eq(Inventory::getInvId, invId)
            .eq(Inventory::getVersion, currentVersion)
            .setSql("sq = sq + " + sqDelta)
            .setSql("lq = lq + " + lqDelta)
            .setSql("wq = wq + " + wqDelta)
            .setSql("oq = oq + " + oqDelta)
            .setSql("version = version + 1")
        );
        
        // 6. æ è®°æç»ä¸ºå·²å¤ç
        detailMapper.update(null, new LambdaUpdateWrapper&lt;InventoryDeductDetail&gt;()
            .eq(InventoryDeductDetail::getInvId, invId)
            .eq(InventoryDeductDetail::getStatus, 0)
            .set(InventoryDeductDetail::getStatus, 1)
        );
        
        // 7. éæ°åé Redis åæ¡¶
        Inventory updated = inventoryMapper.selectById(invId);
        if (updated.getLq() &gt; 0) {
            bucketManager.redistributeBuckets(invId, updated.getLq());
        }
        
    } finally {
        if (lock != null &amp;&amp; lock.isHeldByCurrentThread()) {
            lock.unlock();
        }
    }
}
</code></pre>
<p><strong>SQL ä¼åï¼è¦çç´¢å¼</strong></p>
<pre><code class="language-sql">-- æ«æå¾å¤çæç»ï¼æ flow_type åç»æ±å
SELECT flow_type, SUM(quantity) AS total_quantity
FROM inventory_deduct_detail
WHERE inv_id = ? AND status = 0
GROUP BY flow_type;

-- ä½¿ç¨è¦çç´¢å¼ idx_inv_status_flow (inv_id, status, flow_type)
-- æ éåè¡¨ï¼æè´æé
</code></pre>
<hr>
<h2 id="å­å¸¸è§é®é¢è§£ç­">å­ãå¸¸è§é®é¢è§£ç­</h2>
<h3 id="q1åæ¡¶å¨éç½®-0-æ¶æ°è¯·æ±å¦ä½å¤ç">Q1ï¼åæ¡¶å¨éç½® 0 æ¶ï¼æ°è¯·æ±å¦ä½å¤çï¼</h3>
<p><strong>ç­ï¼</strong> åæ¡¶ç½® 0 â  æç»è¯·æ±ï¼éè¿åå±éçº§ä¿è¯è¯·æ±ä¸ä¸­æ­ã</p>
<p><strong>å¤çæµç¨ï¼</strong></p>
<ol>
<li><strong>èªå¨éçº§å°ä½å¹¶åæµç¨</strong>ï¼99% è¯·æ±èµ°æ­¤æµç¨ï¼è·³è¿ Redis åæ¡¶</li>
<li><strong>æºè½æ£æ¥ SQ+LQ æ»åºå­</strong>ï¼
<ul>
<li>å¦æ SQ è¶³å¤ï¼åå»º SQâWQ æç»</li>
<li>å¦æ SQ ä¸è¶³ä½ SQ+LQ è¶³å¤ï¼
<ul>
<li>åç¨å® SQï¼åå»º SQâWQ æç»</li>
<li>å©ä½é¨åç¨ LQï¼åå»º LQâWQ æç»</li>
</ul>
</li>
<li>å¦æ SQ+LQ é½ä¸è¶³ï¼è¿ååºå­ä¸è¶³</li>
</ul>
</li>
<li><strong>æææä½åææç»</strong>ï¼ä¿è¯æµè½¬å¯è¿½æº¯ï¼ç±å®æ¶ä»»å¡ç»ä¸åå¹¶</li>
</ol>
<p><strong>ä»£ç ç¤ºä¾ï¼</strong></p>
<pre><code class="language-java">// ä½å¹¶åæµç¨æºè½éæ© SQ/LQ
if (inventory.getSq() &gt;= quantity) {
    // SQ è¶³å¤ï¼å¨é¨ä» SQ æ£å
    insertDetail(invId, orderNo, quantity, 2); // SQâWQ
    
} else if (inventory.getSq() &gt; 0) {
    // SQ ä¸è¶³ï¼æ··åæ£å
    insertDetail(invId, orderNo, inventory.getSq(), 2); // SQâWQ
    insertDetail(invId, orderNo + "_LQ", quantity - inventory.getSq(), 1); // LQâWQ
    
} else {
    // SQ ä¸º 0ï¼å¨é¨ä» LQ æ£å
    insertDetail(invId, orderNo, quantity, 1); // LQâWQ
}
</code></pre>
<p><strong>å³é®ä¿éï¼</strong></p>
<ul>
<li>åæ¡¶ç½® 0 æ¶é¿æç­ï¼50ms åï¼ï¼ç¨æ·æ æç¥</li>
<li>æ°è¯·æ±åºå­æ ¡éªä»¥ DB ä¸ºåï¼ä¸ä¾èµ Redis</li>
<li>ä½å¹¶åæµç¨ä¼ååå©ç¨ SQ+LQ æ»åºå­ï¼é¿å"æåºå­å´åä¸åºå»"</li>
</ul>
<h3 id="q2åç«¯å±ç¤º-sqlqç¨æ·ä»æ¬¾ååºå­æªåå¦ä½è§£å³">Q2ï¼åç«¯å±ç¤º SQ+LQï¼ç¨æ·ä»æ¬¾ååºå­æªåï¼å¦ä½è§£å³ï¼</h3>
<p><strong>ç­ï¼</strong> åç«¯å±ç¤ºçæ¯ <code>SQ + LQ</code>ï¼æ»å¯å®åºå­ï¼ï¼éç¨æ¹éå¼æ­¥æ´æ°ï¼é¿åé«å¹¶åä¸å±ç¤ºæ³¢å¨ã</p>
<p><strong>æ ¸å¿åå ï¼</strong></p>
<ul>
<li>ç¨æ·ä¸åï¼åå»º SQâWQ æ LQâWQ æç»ï¼status=0ï¼å¾å¤çï¼</li>
<li>ç¨æ·ä»æ¬¾ï¼åå»º WQâOQ æç»ï¼status=0ï¼å¾å¤çï¼</li>
<li>å®æ¶ä»»å¡ï¼æ¯ 50ms æ«æå¾å¤çæç»ï¼æ¹éæ´æ°ä¸»è¡¨</li>
<li>åç«¯å±ç¤ºï¼<code>SQ + LQ</code> å¨å®æ¶ä»»å¡æ§è¡åæä¼æ´æ°</li>
</ul>
<p><strong>æ¶é´çº¿ç¤ºä¾ï¼</strong></p>
<pre><code>T0: ç¨æ·ä¸å 3 ä»¶
    - æå¥æç»ï¼LQâWQ, quantity=3, status=0
    - ä¸»è¡¨ç¶æï¼SQ=500, LQ=500, WQ=0, OQ=0
    - åç«¯æ¾ç¤ºï¼1000 ä»¶

T1 (10ms): ç¨æ·ä»æ¬¾
    - æå¥æç»ï¼WQâOQ, quantity=3, status=0
    - ä¸»è¡¨ç¶æï¼SQ=500, LQ=500, WQ=0, OQ=0
    - åç«¯æ¾ç¤ºï¼1000 ä»¶ï¼æªåï¼

T2 (50ms): å®æ¶ä»»å¡æ§è¡
    - æ«ææç»ï¼LQâWQ(3), WQâOQ(3)
    - æ´æ°ä¸»è¡¨ï¼LQ-=3, WQ+=3-3=0, OQ+=3
    - ä¸»è¡¨ç¶æï¼SQ=500, LQ=497, WQ=0, OQ=3
    - åç«¯æ¾ç¤ºï¼997 ä»¶ï¼å·²æ´æ°ï¼
</code></pre>
<p><strong>åç«¯å±ç¤ºä¼åæ¹æ¡ï¼</strong></p>
<table>
<thead>
<tr>
<th>é¡µé¢ç±»å</th>
<th>å±ç¤ºåå®¹</th>
<th>ä¼åé»è¾</th>
</tr>
</thead>
<tbody>
<tr>
<td>åååè¡¨é¡µ</td>
<td>SQ+LQ + åºå­ç¶æææ¡</td>
<td>"åºå­åè¶³ / å³å°å®ç½ / ä»å© XX ä»¶"</td>
</tr>
<tr>
<td>ååè¯¦æé¡µ</td>
<td>SQ+LQ + å®æ¶å¤è´§æ»é</td>
<td>"997 ä»¶å¯å®ï¼å± 1000 ä»¶å¤è´§"</td>
</tr>
<tr>
<td>è®¢åç¡®è®¤é¡µ</td>
<td>è®¢åç¶æ + éå®æç¤º</td>
<td>"å·²éå® 3 ä»¶åºå­ï¼å¾åè´§"</td>
</tr>
</tbody>
</table>
<p><strong>å¯éä¼åï¼</strong></p>
<ul>
<li>è°æ´åå¹¶æäº¤éå¼ï¼ä» â¥100 æ¡æ¹ä¸º â¥50 æ¡</li>
<li>è°æ´å®æ¶ä»»å¡ï¼ä» 50ms æ¹ä¸º 200ms</li>
<li>é«å¹¶åç»æåè§¦å SQ+LQ å®æ¶æ´æ°</li>
</ul>
<p><strong>å³é®ç¹ï¼</strong></p>
<ul>
<li>åç«¯å±ç¤ºçæ¯ <code>SQ + LQ</code>ï¼ä¸æ¯åç¬ç SQ</li>
<li>ç¨æ·å³æ³¨çæ¯"è½ä¹°å¤å°"ï¼èä¸æ¯å·ä½ç SQ æ LQ æ°å¼</li>
<li>æ¹éæ´æ°é¿åäºé«å¹¶åä¸çå±ç¤ºæ³¢å¨ï¼å¦ 1000â997â998â997ï¼</li>
</ul>
<h3 id="q3åå®¶æ»å¯å®-1000ç¨æ·ä¸å-999-ä»¶æ¯å¦ä¼æå">Q3ï¼åå®¶æ»å¯å® 1000ï¼ç¨æ·ä¸å 999 ä»¶ï¼æ¯å¦ä¼æåï¼</h3>
<p><strong>ç­ï¼</strong> ç»å¯¹ä¸å¯è½æåï¼ä¸å±é²æ¤å±å±é»æ­ã</p>
<p><strong>ç¬¬ä¸å±ï¼åå®¶ååéè´­ï¼ä¸å¡ç¡¬éå¶ï¼</strong></p>
<pre><code class="language-java">if (quantity &gt; product.getMaxPurchaseQty()) {
    throw new IllegalArgumentException("åæ¬¡æå¤è´­ä¹° " + maxQty + " ä»¶");
}
</code></pre>
<p><strong>ç¬¬äºå±ï¼åºå­æ»éæ ¡éªï¼50% éå¶ï¼</strong></p>
<pre><code class="language-java">Integer totalSalable = inventory.getSq() + inventory.getLq();
Integer maxAllowed = (int) (totalSalable * 0.5);
if (quantity &gt; maxAllowed) {
    throw new IllegalArgumentException("åæ¬¡è´­ä¹°ä¸è½è¶è¿æ»åºå­ç 50%");
}
</code></pre>
<p><strong>ç¬¬ä¸å±ï¼ææ¯å±æ£åå¤±è´¥</strong></p>
<ul>
<li>Redis åæ¡¶ï¼æ»æ° = 500 &lt; 999 â ææåæ¡¶æ£åå¤±è´¥</li>
<li>ä½å¹¶åæµç¨ï¼SQ=500 &lt; 999 â åºå­ä¸è¶³</li>
<li>DB ååºï¼<code>UPDATE inventory SET sq=sq-999 WHERE sq&gt;=999</code> â å½±åè¡æ° = 0</li>
</ul>
<h3 id="q4redis-å®æºåç³»ç»å¦ä½ä¿è¯å¯ç¨æ§">Q4ï¼Redis å®æºåï¼ç³»ç»å¦ä½ä¿è¯å¯ç¨æ§ï¼</h3>
<p><strong>ç­ï¼</strong> å®æ´çéçº§æºå¶ï¼ä¿è¯ Redis ä¸å¯ç¨æ¶ç³»ç»ä»è½æ­£å¸¸è¿è¡ã</p>
<p><strong>éçº§ç­ç¥ï¼</strong></p>
<ol>
<li>
<p><strong>ä¸åæ£åéçº§</strong></p>
<pre><code class="language-java">try {
    // å°è¯ Redis åæ¡¶æ£å
    return deductInventoryHighConcurrency(...);
} catch (RedisException e) {
    // Redis å¼å¸¸ï¼èªå¨éçº§å°ä½å¹¶åæµç¨
    return deductInventoryLowConcurrency(...);
}
</code></pre>
</li>
<li>
<p><strong>å®æ¶ä»»å¡éçº§</strong></p>
<pre><code class="language-java">try {
    // å°è¯è·å Redis åå¸å¼é
    lock = redissonClient.getLock(...);
} catch (Exception e) {
    // Redis ä¸å¯ç¨ï¼è·³è¿éï¼ä¾èµæ°æ®åºä¹è§é
    lock = null;
}
</code></pre>
</li>
<li>
<p><strong>åæ¡¶æä½éçº§</strong></p>
<pre><code class="language-java">try {
    bucketManager.lockAllBuckets(invId);
} catch (Exception e) {
    // Redis ä¸å¯ç¨ï¼è®°å½è­¦åï¼ç»§ç»­æ§è¡åå¹¶
    log.warn("éå® Redis åæ¡¶å¤±è´¥ï¼ç»§ç»­æ§è¡åå¹¶");
}
</code></pre>
</li>
</ol>
<p><strong>å³é®éç½®ï¼</strong></p>
<pre><code class="language-yaml">spring:
  data:
    redis:
      timeout: 1000ms  # è¶æ¶ 1 ç§ï¼å¿«éå¤±è´¥
      connect-timeout: 1000ms
</code></pre>
<h3 id="q5å¦ä½é²æ­¢è¶ååå°å">Q5ï¼å¦ä½é²æ­¢è¶ååå°åï¼</h3>
<p><strong>ç­ï¼</strong> å¤å±é²æ¤æºå¶ï¼ç¡®ä¿é¶è¶åãé¶å°åã</p>
<p><strong>é²è¶åè®¾è®¡ï¼</strong></p>
<ol>
<li>
<p><strong>Redis å±é²è¶å</strong></p>
<pre><code class="language-bash"># DECRBY è¿åå¼å¿é¡» &gt;= 0
DECRBY inventory:bucket:1:0 3
# è¿å -1 â åè¡¥ â éè¯å¶ä»åæ¡¶
</code></pre>
</li>
<li>
<p><strong>DB å±é²è¶å</strong></p>
<pre><code class="language-sql">-- æ´æ°æ¶å æ°å¼æ¡ä»¶
UPDATE inventory 
SET sq = sq - 3 
WHERE inv_id = 1 AND sq &gt;= 3;
</code></pre>
</li>
<li>
<p><strong>ä¸å¡å±é²è¶å</strong></p>
<ul>
<li>ååéè´­</li>
<li>50% æ»åºå­éå¶</li>
<li>å¹ç­æ§ä¿è¯ï¼å¯ä¸ç´¢å¼ï¼</li>
</ul>
</li>
</ol>
<p><strong>é²å°åè®¾è®¡ï¼</strong></p>
<ol>
<li>
<p><strong>ä»¥ DB æç»ä¸ºå</strong></p>
<ul>
<li>Redis è¶æ¶ â æç»ä»ä¼è¢«åå¹¶æäº¤</li>
<li>å®éæ£åäºå¤å°ï¼ä»¥ DB æç»æ±åä¸ºå</li>
</ul>
</li>
<li>
<p><strong>ä½å¹¶åæºè½éæ© SQ/LQ</strong></p>
<ul>
<li>æ£æ¥ SQ+LQ æ»åºå­</li>
<li>SQ ä¸è¶³æ¶èªå¨ä½¿ç¨ LQ</li>
<li>é¿å"æåºå­å´åä¸åºå»"çé®é¢</li>
</ul>
<pre><code class="language-java">// ç¤ºä¾ï¼SQ=2, LQ=1000, ç¨æ·ä¸å 5 ä»¶
// ä¼ ç»æ¹æ¡ï¼SQ ä¸è¶³ï¼æ£åå¤±è´¥ï¼å°å 5 ä»¶ï¼
// æ¬æ¹æ¡ï¼SQ(2) + LQ(3) â æ£åæå
</code></pre>
</li>
<li>
<p><strong>Redis æ°æ®æ¢å¤</strong></p>
<ul>
<li>åå¹¶æäº¤åéæ°åéåæ¡¶</li>
<li>åæ¡¶æ»æ°å§ç» = LQ å¼</li>
<li>Redis å®æºæ¢å¤åèªå¨åæ­¥</li>
</ul>
</li>
</ol>
<h3 id="q6åå¹¶æäº¤çæ§è½å¦ä½ä¼ä¸ä¼æä¸ºç¶é¢">Q6ï¼åå¹¶æäº¤çæ§è½å¦ä½ï¼ä¼ä¸ä¼æä¸ºç¶é¢ï¼</h3>
<p><strong>ç­ï¼</strong> éè¿è¦çç´¢å¼åæ¹éæ´æ°ï¼æ§è½å½±åæå°ã</p>
<p><strong>æ§è½ä¼åï¼</strong></p>
<ol>
<li>
<p><strong>è¦çç´¢å¼</strong></p>
<pre><code class="language-sql">-- ç´¢å¼ï¼idx_inv_status_flow (inv_id, status, flow_type)
-- åå« quantity å­æ®µï¼æ éåè¡¨
SELECT flow_type, SUM(quantity) AS total_quantity
FROM inventory_deduct_detail
WHERE inv_id = 1 AND status = 0
GROUP BY flow_type;
</code></pre>
</li>
<li>
<p><strong>æ¹éæ´æ°</strong></p>
<pre><code class="language-sql">-- ä¸æ¬¡ SQL æ´æ°ææå­æ®µ
UPDATE inventory 
SET sq = sq - 3, wq = wq + 3, version = version + 1
WHERE inv_id = 1 AND version = 5;
</code></pre>
</li>
<li>
<p><strong>å¼æ­¥éé»å¡</strong></p>
<ul>
<li>å®æ¶ä»»å¡ç¬ç«çº¿ç¨æ§è¡</li>
<li>ä¸é»å¡ç¨æ·è¯·æ±</li>
<li>50ms åå®æåå¹¶</li>
</ul>
</li>
</ol>
<p><strong>åæµæ°æ®ï¼</strong></p>
<ul>
<li>åè¡ç­ç¹æ£åï¼TPS æå 1 åä»¥ä¸</li>
<li>åå¹¶æäº¤èæ¶ï¼å¹³å 10-20ms</li>
<li>DB ååï¼è¿ä½äºå®æ¶æ´æ°ï¼åå° 90% ä»¥ä¸æ´æ°æ¬¡æ°ï¼</li>
</ul>
<h3 id="q7å¦ä½å®ç°å¹ç­æ§">Q7ï¼å¦ä½å®ç°å¹ç­æ§ï¼</h3>
<p><strong>ç­ï¼</strong> éè¿å¯ä¸ç´¢å¼å¤©ç¶å®ç°å¹ç­æ§ã</p>
<p><strong>å¯ä¸ç´¢å¼è®¾è®¡ï¼</strong></p>
<pre><code class="language-sql">UNIQUE KEY `uk_inv_order` (`inv_id`, `lock_order_id`)
</code></pre>
<p><strong>å¹ç­æ§ä¿è¯ï¼</strong></p>
<pre><code class="language-java">try {
    // æå¥æç»
    detailMapper.insert(detail);
} catch (DuplicateKeyException e) {
    // éå¤è®¢åï¼ç´æ¥è¿åæå
    return "æ£åæåï¼å¹ç­ï¼";
}
</code></pre>
<p><strong>éç¨åºæ¯ï¼</strong></p>
<ul>
<li>ç¨æ·éå¤ç¹å»ä¸åæé®</li>
<li>ç½ç»è¶æ¶åéè¯</li>
<li>æ¶æ¯éåéå¤æ¶è´¹</li>
</ul>
<h3 id="q8åæ¡¶æ°éå¦ä½éæ©">Q8ï¼åæ¡¶æ°éå¦ä½éæ©ï¼</h3>
<p><strong>ç­ï¼</strong> æ ¹æ®å¹¶åéååºå­éå¨æè°æ´ã</p>
<p><strong>æ¨èéç½®ï¼</strong></p>
<table>
<thead>
<tr>
<th>åºæ¯</th>
<th>å¹¶åé</th>
<th>åºå­é</th>
<th>åæ¡¶æ°é</th>
</tr>
</thead>
<tbody>
<tr>
<td>ä½å¹¶å</td>
<td>&lt; 100</td>
<td>&lt; 1000</td>
<td>5-10</td>
</tr>
<tr>
<td>ä¸­å¹¶å</td>
<td>100-1000</td>
<td>1000-10000</td>
<td>10-20</td>
</tr>
<tr>
<td>é«å¹¶å</td>
<td>1000-5000</td>
<td>10000+</td>
<td>20-50</td>
</tr>
<tr>
<td>æéå¹¶å</td>
<td>5000+</td>
<td>100000+</td>
<td>50-100</td>
</tr>
</tbody>
</table>
<p><strong>å¨æè°æ´ï¼</strong></p>
<pre><code class="language-java">// é«å³°æå¨æå æ¡¶
public void addBuckets(Long invId, Integer newBucketCount) {
    // 1. éå®ç°æåæ¡¶
    bucketManager.lockAllBuckets(invId);
    
    // 2. ææ°æ°ééæ°åé
    bucketManager.redistributeBuckets(invId, lq, newBucketCount);
    
    // 3. æ´æ°éç½®è¡¨
    bucketConfigMapper.updateBucketCount(invId, newBucketCount);
}
</code></pre>
<hr>
<h2 id="ä¸æ§è½æµè¯ä¸ä¼å">ä¸ãæ§è½æµè¯ä¸ä¼å</h2>
<h3 id="71-åæµç¯å¢">7.1 åæµç¯å¢</h3>
<p><strong>ç¡¬ä»¶éç½®ï¼</strong></p>
<ul>
<li>åºç¨æå¡å¨ï¼4 æ ¸ 8Gï¼2 å°</li>
<li>MySQLï¼8 æ ¸ 16Gï¼ä¸»ä»å¤å¶</li>
<li>Redisï¼4 æ ¸ 8Gï¼å¨åµæ¨¡å¼</li>
</ul>
<p><strong>æµè¯å·¥å·ï¼</strong></p>
<ul>
<li>JMeter 5.5</li>
<li>å¹¶åçº¿ç¨ï¼100 / 500 / 1000 / 5000</li>
<li>æç»­æ¶é´ï¼60 ç§</li>
</ul>
<h3 id="72-åæµç»æ">7.2 åæµç»æ</h3>
<h4 id="721-åè¡ç­ç¹æ£åå¯¹æ¯">7.2.1 åè¡ç­ç¹æ£åå¯¹æ¯</h4>
<table>
<thead>
<tr>
<th>æ¹æ¡</th>
<th>TPS</th>
<th>å¹³åååºæ¶é´</th>
<th>æåç</th>
<th>DB QPS</th>
</tr>
</thead>
<tbody>
<tr>
<td>çº¯ DB æ£å</td>
<td>1,200</td>
<td>450ms</td>
<td>85%</td>
<td>1,200</td>
</tr>
<tr>
<td>ä¼ ç» Redis åæ¡¶</td>
<td>8,500</td>
<td>60ms</td>
<td>80%</td>
<td>8,500</td>
</tr>
<tr>
<td><strong>æ¬æ¹æ¡</strong></td>
<td><strong>18,000</strong></td>
<td><strong>30ms</strong></td>
<td><strong>100%</strong></td>
<td><strong>180</strong></td>
</tr>
</tbody>
</table>
<p><strong>å³é®ææ ï¼</strong></p>
<ul>
<li>â TPS æå <strong>1.5 å</strong>ï¼ç¸æ¯ä¼ ç» Redis åæ¡¶ï¼</li>
<li>â æåç <strong>100%</strong>ï¼é¶è¶åãé¶å°åï¼</li>
<li>â DB ååéä½ <strong>98%</strong>ï¼åå¹¶æäº¤æ¹éæ´æ°ï¼</li>
</ul>
<h4 id="722-ä¸åå¹¶åéä¸çè¡¨ç°">7.2.2 ä¸åå¹¶åéä¸çè¡¨ç°</h4>
<table>
<thead>
<tr>
<th>å¹¶åé</th>
<th>TPS</th>
<th>ååºæ¶é´</th>
<th>æåç</th>
<th>CPU ä½¿ç¨ç</th>
</tr>
</thead>
<tbody>
<tr>
<td>100</td>
<td>3,500</td>
<td>15ms</td>
<td>100%</td>
<td>25%</td>
</tr>
<tr>
<td>500</td>
<td>12,000</td>
<td>25ms</td>
<td>100%</td>
<td>45%</td>
</tr>
<tr>
<td>1000</td>
<td>18,000</td>
<td>30ms</td>
<td>100%</td>
<td>65%</td>
</tr>
<tr>
<td>5000</td>
<td>22,000</td>
<td>120ms</td>
<td>100%</td>
<td>85%</td>
</tr>
</tbody>
</table>
<p><strong>ç»è®ºï¼</strong></p>
<ul>
<li>1000 å¹¶åä»¥ä¸ï¼æ§è½ä¼å¼ï¼ååºæ¶é´ç¨³å®</li>
<li>5000 å¹¶åï¼ä»è½ä¿æ 100% æåçï¼ä½ååºæ¶é´å¢å </li>
</ul>
<h3 id="73-æ§è½ä¼åå»ºè®®">7.3 æ§è½ä¼åå»ºè®®</h3>
<h4 id="731-æ°æ®åºä¼å">7.3.1 æ°æ®åºä¼å</h4>
<p><strong>1. ç´¢å¼ä¼å</strong></p>
<pre><code class="language-sql">-- è¦çç´¢å¼ï¼é¿ååè¡¨
CREATE INDEX idx_inv_status_flow 
ON inventory_deduct_detail (inv_id, status, flow_type, quantity);

-- ååºè¡¨ï¼åå²æ°æ®å½æ¡£
ALTER TABLE inventory_deduct_detail 
PARTITION BY RANGE (YEAR(create_time)) (
    PARTITION p2024 VALUES LESS THAN (2025),
    PARTITION p2025 VALUES LESS THAN (2026)
);
</code></pre>
<p><strong>2. è¯»ååç¦»</strong></p>
<pre><code class="language-yaml">spring:
  datasource:
    master:
      url: jdbc:mysql://master:3306/shop_chunk_redis
    slave:
      url: jdbc:mysql://slave:3306/shop_chunk_redis
</code></pre>
<p><strong>3. è¿æ¥æ± ä¼å</strong></p>
<pre><code class="language-yaml">spring:
  datasource:
    druid:
      initial-size: 20
      min-idle: 20
      max-active: 100
      max-wait: 60000
</code></pre>
<h4 id="732-redis-ä¼å">7.3.2 Redis ä¼å</h4>
<p><strong>1. æä¹åéç½®</strong></p>
<pre><code class="language-conf"># AOF + RDB æ··åæä¹å
appendonly yes
appendfsync everysec
save 900 1
save 300 10
</code></pre>
<p><strong>2. åå­ä¼å</strong></p>
<pre><code class="language-conf"># æå¤§åå­
maxmemory 4gb
# æ·æ±°ç­ç¥
maxmemory-policy allkeys-lru
</code></pre>
<p><strong>3. éç¾¤æ¨¡å¼</strong></p>
<pre><code># Redis Clusterï¼é«å¯ç¨ï¼
redis-cli --cluster create \
  192.168.1.1:6379 \
  192.168.1.2:6379 \
  192.168.1.3:6379 \
  --cluster-replicas 1
</code></pre>
<h4 id="733-åºç¨å±ä¼å">7.3.3 åºç¨å±ä¼å</h4>
<p><strong>1. å¼æ­¥å¤ç</strong></p>
<pre><code class="language-java">@Async
public CompletableFuture&lt;String&gt; deductInventoryAsync(...) {
    return CompletableFuture.completedFuture(
        deductInventoryHighConcurrency(...)
    );
}
</code></pre>
<p><strong>2. æ¹éæä½</strong></p>
<pre><code class="language-java">// æ¹éæå¥æç»
detailMapper.insertBatch(detailList);

// æ¹éæ´æ° Redis
redisTemplate.executePipelined((RedisCallback&lt;Object&gt;) connection -&gt; {
    for (String key : keys) {
        connection.decr(key.getBytes());
    }
    return null;
});
</code></pre>
<p><strong>3. ç¼å­é¢ç­</strong></p>
<pre><code class="language-java">@PostConstruct
public void warmUp() {
    // åºç¨å¯å¨æ¶é¢ç­ç­ç¹åååºå­
    List&lt;Long&gt; hotProducts = productMapper.selectHotProducts();
    for (Long productId : hotProducts) {
        inventoryService.preheatInventory(productId);
    }
}
</code></pre>
<h3 id="74-çæ§åè­¦">7.4 çæ§åè­¦</h3>
<h4 id="741-å³é®ææ çæ§">7.4.1 å³é®ææ çæ§</h4>
<p><strong>1. ä¸å¡ææ </strong></p>
<ul>
<li>ä¸åæåç</li>
<li>åºå­æ£å TPS</li>
<li>åå¹¶æäº¤å»¶è¿</li>
<li>è®¢åè¶æ¶ç</li>
</ul>
<p><strong>2. ææ¯ææ </strong></p>
<ul>
<li>Redis å½ä¸­ç</li>
<li>DB æ¢æ¥è¯¢</li>
<li>åºç¨ CPU/åå­</li>
<li>æ¥å£ååºæ¶é´</li>
</ul>
<h4 id="742-åè­¦è§å">7.4.2 åè­¦è§å</h4>
<pre><code class="language-yaml"># Prometheus åè­¦è§å
groups:
  - name: inventory_alerts
    rules:
      # ä¸åæåçä½äº 95%
      - alert: LowOrderSuccessRate
        expr: order_success_rate &lt; 0.95
        for: 1m
        
      # åå¹¶æäº¤å»¶è¿è¶è¿ 100ms
      - alert: HighMergeDelay
        expr: merge_commit_duration_ms &gt; 100
        for: 5m
        
      # Redis ä¸å¯ç¨
      - alert: RedisDown
        expr: redis_up == 0
        for: 1m
</code></pre>
<hr>
<h2 id="å«æ»ç»ä¸å±æ">å«ãæ»ç»ä¸å±æ</h2>
<h3 id="81-æ ¸å¿ä¼å¿">8.1 æ ¸å¿ä¼å¿</h3>
<ol>
<li>
<p><strong>é«æ§è½</strong></p>
<ul>
<li>TPS æå 1.5 åä»¥ä¸</li>
<li>ååºæ¶é´éä½ 50%</li>
<li>DB ååéä½ 98%</li>
</ul>
</li>
<li>
<p><strong>å¼ºä¸è´æ§</strong></p>
<ul>
<li>é¶è¶åï¼å¤å±é²æ¤æºå¶</li>
<li>é¶å°åï¼ä»¥ DB æç»ä¸ºå</li>
<li>å¹ç­æ§ï¼å¯ä¸ç´¢å¼ä¿è¯</li>
</ul>
</li>
<li>
<p><strong>é«å¯ç¨</strong></p>
<ul>
<li>Redis å®æºèªå¨éçº§</li>
<li>æ°æ®åºä¹è§éååº</li>
<li>å®æ´çå®¹éæºå¶</li>
</ul>
</li>
<li>
<p><strong>ææ©å±</strong></p>
<ul>
<li>æ¯æå¤æåºå­æ¨¡åï¼SQ/LQ/WQ/OQï¼</li>
<li>å¨æè°æ´åæ¡¶æ°é</li>
<li>çµæ´»çæµè½¬è§å</li>
</ul>
</li>
</ol>
<h3 id="82-éç¨åºæ¯">8.2 éç¨åºæ¯</h3>
<p>â <strong>éåï¼</strong></p>
<ul>
<li>çµåç§ææ´»å¨</li>
<li>ç´æ­å¸¦è´§</li>
<li>ééåå®</li>
<li>é«å¹¶åä¸ååºæ¯</li>
</ul>
<p>â <strong>ä¸éåï¼</strong></p>
<ul>
<li>ä½å¹¶ååºæ¯ï¼çº¯ DB æ£åå³å¯ï¼</li>
<li>å¯¹åºå­å®æ¶æ§è¦æ±æé«çåºæ¯</li>
<li>æ æ³æ¥åæç»ä¸è´æ§çåºæ¯</li>
</ul>
<h3 id="83-å¼æºå°å">8.3 å¼æºå°å</h3>
<p>æ¬é¡¹ç®å·²å¼æºï¼åäºç®åçååç«¯æ¼ç¤º</p>
<ul>
<li><strong>Gitee</strong>ï¼<a href="https://gitee.com/zouyua/shop_chunk_redis" target="_blank" rel="noopener nofollow">shop_chunk_redis</a></li>
<li><strong>ææ¯æ </strong>ï¼Spring Boot + MyBatis-Plus + Redis + Vue 3</li>
<li><strong>ææ¡£</strong>ï¼å®æ´çéç½®æåå API ææ¡£</li>
<li><strong>æµè¯æ°æ®</strong>ï¼åå« mock æ°æ®ï¼å¼ç®±å³ç¨</li>
</ul>
<h3 id="84-åèèµæ">8.4 åèèµæ</h3>
<ol>
<li><a href="https://mp.weixin.qq.com/s/_ezTVydFszZnc0ZN-JEtlQ" target="_blank" rel="noopener nofollow">é¿éäº - åºå­åå¹¶æ£åæ¹æ¡</a></li>
<li><a href="https://redis.io/documentation" target="_blank" rel="noopener nofollow">Redis å®æ¹ææ¡£</a></li>
<li><a href="https://baomidou.com/" target="_blank" rel="noopener nofollow">MyBatis-Plus å®æ¹ææ¡£</a></li>
<li><a href="https://spring.io/projects/spring-boot" target="_blank" rel="noopener nofollow">Spring Boot å®æ¹ææ¡£</a></li>
</ol>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.002777777777777778" data-date-updated="2026-02-09 09:20">2026-02-09 09:16</span>&nbsp;
<a href="https://www.cnblogs.com/ZouYua">zouyua</a>&nbsp;
éè¯»(<span id="post_view_count">24</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19593557);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19593557', targetLink: 'https://www.cnblogs.com/ZouYua/p/19593557', title: 'ä¸å¥åºäº Redis åæ¡¶ + DB æç»é©±å¨çå¼ºä¸è´æ§åºå­æ£åæ¹æ¡ï¼å®ç°é¶è¶åãé¶å°åï¼æ¯æ Redis å®æºèªå¨éçº§' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ AQSæ·±åº¦æ¢ç´¢ï¼ä»¥ReentrantLockçJavaå¹¶åç¼ç¨çé«æå®ç° ]]></title>
    <link>https://www.cnblogs.com/sevencoding/p/19587937</link>
    <guid>2bffc9a590eba36c964e2a2d2a7772df</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/sevencoding/p/19587937" title="åå¸äº 2026-02-09 09:00">
    <span role="heading" aria-level="2">AQSæ·±åº¦æ¢ç´¢ï¼ä»¥ReentrantLockçJavaå¹¶åç¼ç¨çé«æå®ç°</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="æ¦è¿°">æ¦è¿°</h2>
<p>AQS ( Abstract Queued Synchronizer ï¼æ¯ä¸ä¸ªæ½è±¡çéååæ­¥å¨ï¼éè¿ç»´æ¤ä¸ä¸ªå±äº«èµæºç¶æï¼ Volatile Int State ï¼æ¥è¡¨ç¤ºåæ­¥ç¶æ åä¸ä¸ªåè¿ååºï¼ FIFO ï¼ççº¿ç¨<strong>ç­å¾éå</strong>æ¥å®æèµæºè·åçæéå·¥ä½ï¼éè¿CASå®æå¯¹Stateå¼çä¿®æ¹ã</p>
<p>AQSæ´ä½æ¡æ¶å¦ä¸ï¼</p>
<p><img src="https://seven97-blog.oss-cn-hangzhou.aliyuncs.com/imgs/202404251047981.gif" alt="" loading="lazy"></p>
<p><img src="https://seven97-blog.oss-cn-hangzhou.aliyuncs.com/imgs/202404251047987.gif" alt="" loading="lazy"></p>
<p>å½æèªå®ä¹åæ­¥å¨æ¥å¥æ¶ï¼åªééåç¬¬ä¸å±æéè¦çé¨åæ¹æ³å³å¯ï¼ä¸éè¦å³æ³¨åºå±å·ä½çå®ç°æµç¨ãå½èªå®ä¹åæ­¥å¨è¿è¡å éæèè§£éæä½æ¶ï¼åç»è¿ç¬¬ä¸å±çAPIè¿å¥AQSåé¨æ¹æ³ï¼ç¶åç»è¿ç¬¬äºå±è¿è¡éçè·åï¼æ¥çå¯¹äºè·åéå¤±è´¥çæµç¨ï¼è¿å¥ç¬¬ä¸å±åç¬¬åå±çç­å¾éåå¤çï¼èè¿äºå¤çæ¹å¼åä¾èµäºç¬¬äºå±çåºç¡æ°æ®æä¾å±</p>
<h2 id="åç">åç</h2>
<p>AQS ä¸ºæ¯ä¸ªå±äº«èµæºé½è®¾ç½®ä¸ä¸ªå±äº«èµæºéï¼çº¿ç¨å¨éè¦è®¿é®å±äº«èµæºæ¶é¦åéè¦è·åå±äº«èµæºéï¼å¦æè·åå°äºå±äº«èµæºéï¼ä¾¿å¯ä»¥å¨å½åçº¿ç¨ä¸­ä½¿ç¨è¯¥å±äº«èµæºï¼å¦æè·åä¸å°ï¼åå°è¯¥çº¿ç¨æ¾å¥çº¿ç¨ç­å¾éåï¼ç­å¾ä¸ä¸æ¬¡èµæºè°åº¦ï¼æµç¨å¾å¦ä¸æç¤ºï¼</p>
<p><img src="https://seven97-blog.oss-cn-hangzhou.aliyuncs.com/imgs/202404251047983.gif" alt="" loading="lazy"></p>
<p>Javaä¸­çå¤§é¨ååæ­¥ç±»ï¼LockãSemaphoreãReentrantLockç­ï¼é½æ¯åºäºAbstractQueuedSynchronizerï¼ç®ç§°ä¸ºAQSï¼å®ç°çã</p>
<h2 id="åºå±ç»æ">åºå±ç»æ</h2>
<h3 id="stateç¶æ">stateï¼ç¶æ</h3>
<p>Abstract Queued Synchronizer ç»´æ¤äº volatile int ç±»åçåéï¼ç¨äºè¡¨ç¤ºå½åçåæ­¥ç¶æãvolatileè½ç¶ä¸è½ä¿è¯æä½çåå­æ§ï¼ä½æ¯è½ä¿è¯å½ååéstateçå¯è§æ§ã</p>
<p>stateçè®¿é®æ¹å¼æä¸ç§ï¼ getState()ãsetState()å compareAndSetState()ï¼åæ¯åå­æä½ï¼å¶ä¸­ï¼compareAndSetStateçå®ç°ä¾èµäº UnsafeçcompareAndSwaplnt()</p>
<pre><code class="language-java">// java.util.concurrent.locks.AbstractQueuedSynchronizer
private volatile int state;

protected final int getState() {
    return state;
}

protected final void setState(int newState) {
    state = newState;
}

protected final boolean compareAndSetState(int expect, int update) {
    // See below for intrinsics setup to support this
    return unsafe.compareAndSwapInt(this, stateOffset, expect, update);
}
</code></pre>
<p><img src="https://seven97-blog.oss-cn-hangzhou.aliyuncs.com/imgs/202404251047977.gif" alt="" loading="lazy"></p>
<p><img src="https://seven97-blog.oss-cn-hangzhou.aliyuncs.com/imgs/202404251047997.gif" alt="" loading="lazy"></p>
<h3 id="clhéå">CLHéå</h3>
<p>CraigãLandin and Hagerstenéåï¼æ¯ååé¾è¡¨ï¼AQSä¸­çéåæ¯CLHåä½çèæååéåï¼FIFOï¼ï¼AQSæ¯éè¿å°æ¯æ¡è¯·æ±å±äº«èµæºççº¿ç¨å°è£æä¸ä¸ªèç¹æ¥å®ç°éçåéã</p>
<p><img src="https://seven97-blog.oss-cn-hangzhou.aliyuncs.com/imgs/202404251047000.gif" alt="" loading="lazy"></p>
<p>AQSä½¿ç¨ä¸ä¸ªVolatileçintç±»åçæååéæ¥è¡¨ç¤ºåæ­¥ç¶æï¼éè¿åç½®çFIFOéåæ¥å®æèµæºè·åçæéå·¥ä½ï¼éè¿CASå®æå¯¹Stateå¼çä¿®æ¹ã</p>
<h3 id="aqsçç¬å å¼åå±äº«å¼">AQSçç¬å å¼åå±äº«å¼</h3>
<ul>
<li>
<p>ç¬å å¼:åªæä¸ä¸ªçº¿ç¨è½æ§è¡ï¼å·ä½ç Java å®ç°æ ReentrantLockã</p>
</li>
<li>
<p>å±äº«å¼ï¼å¤ä¸ªçº¿ç¨å¯åæ¶æ§è¡ï¼å·ä½ç Java å®ç°æ SemaphoreåCountDownLatchã</p>
</li>
</ul>
<p>AQSåªæ¯ä¸ä¸ªæ¡æ¶ ï¼åªå®ä¹äºä¸ä¸ªæ¥å£ï¼å·ä½èµæºçè·åãéæ¾é½ç±èªå®ä¹åæ­¥å¨å»å®ç°ãä¸åçèªå®ä¹åæ­¥å¨äºç¨å±äº«èµæºçæ¹å¼ä¹ä¸åï¼èªå®ä¹åæ­¥å¨å¨å®ç°æ¶åªéå®ç°å±äº«èµæºstateçè·åä¸éæ¾æ¹å¼å³å¯ï¼è³äºå·ä½çº¿ç¨ç­å¾éåçç»´æ¤ï¼å¦è·åèµæºå¤±è´¥å¥éãå¤éåºéç­ï¼ AQS å·²ç»å¨é¡¶å±å®ç°å¥½ï¼å°±æ¯æ¨¡æ¿æ¹æ³æ¨¡å¼ï¼ï¼ä¸éè¦å·ä½çåæ­¥å¨ååå¤çãèªå®ä¹åæ­¥å¨å®ç°æ¶ä¸»è¦å®ç°ä»¥ä¸å ç§æ¹æ³ï¼</p>
<p><img src="https://seven97-blog.oss-cn-hangzhou.aliyuncs.com/imgs/202404251047629.gif" alt="" loading="lazy"></p>
<ul>
<li>
<p>ä»¥ReentrantLockä¸ºä¾ï¼ReentrantLockä¸­çstateåå§å¼ä¸º0è¡¨ç¤ºæ éç¶æãå¨çº¿ç¨æ§è¡ tryAcquire()è·åè¯¥éåReentrantLockä¸­çstate+1ï¼è¿æ¶è¯¥çº¿ç¨ç¬å ReentrantLockéï¼å¶ä»çº¿ç¨å¨éè¿tryAcquire() è·åéæ¶åä¼å¤±è´¥ï¼ç´å°è¯¥çº¿ç¨éæ¾éåstateåæ¬¡ä¸º0ï¼å¶ä»çº¿ç¨æææºä¼è·åè¯¥éãè¯¥çº¿ç¨å¨éæ¾éä¹åå¯ä»¥éå¤è·åæ­¤éï¼æ¯è·åä¸æ¬¡ä¾¿ä¼æ§è¡ä¸æ¬¡state+1, å æ­¤ReentrantLockä¹å±äºå¯éå¥éã ä½è·åå¤å°æ¬¡éå°±è¦éæ¾å¤å°æ¬¡éï¼è¿æ ·æè½ä¿è¯stateæç»ä¸º0ãå¦æè·åéçæ¬¡æ°å¤äºéæ¾éçæ¬¡æ°ï¼åä¼åºç°è¯¥çº¿ç¨ä¸ç´ææè¯¥éçæåµï¼å¦æè·åéçæ¬¡æ°å°äºéæ¾éçæ¬¡æ°ï¼åè¿è¡ä¸­çç¨åºä¼æ¥éå¼å¸¸ã</p>
</li>
<li>
<p>ä»¥CountDownLatchä»¥ä¾ï¼ä»»å¡åä¸ºNä¸ªå­çº¿ç¨å»æ§è¡ï¼stateä¹åå§åä¸ºNï¼æ³¨æNè¦ä¸çº¿ç¨ä¸ªæ°ä¸è´ï¼ãè¿Nä¸ªå­çº¿ç¨æ¯å¹¶è¡æ§è¡çï¼æ¯ä¸ªå­çº¿ç¨æ§è¡å®åcountDown()ä¸æ¬¡ï¼stateä¼CASå1ãç­å°ææå­çº¿ç¨é½æ§è¡å®å(å³state=0)ï¼ä¼unpark()ä¸»è°ç¨çº¿ç¨ï¼ç¶åä¸»è°ç¨çº¿ç¨å°±ä¼ä»await()å½æ°è¿åï¼ç»§ç»­åé¢çå¨ä½ã</p>
</li>
<li>
<p>ä»¥Semaphoreä¸ºä¾ï¼stateåä»£è¡¨å¯ä»¥åæ¶è®¿é®ççº¿ç¨æ°éï¼ä¹å¯è½çè§£ä¸ºè®¿é®çè®¸å¯è¯ï¼permitï¼æ°éãæ¯ä¸ªçº¿ç¨è®¿é®(acquire)æ¶éè¦æ¿å°å¯¹åºçè®¸å¯è¯ï¼å¦åè¿è¡é»å¡ï¼è®¿é®ç»æåè¿è¿ï¼releaseï¼è®¸å¯è¯ãstateåªè½å¨Semaphoreçæé æ¹æ³ä¸­è¿è¡åå§åï¼åç»­ä¸è½è¿è¡ä¿®æ¹ã</p>
</li>
</ul>
<p>ä¸è¬æ¥è¯´ï¼èªå®ä¹åæ­¥å¨è¦ä¹æ¯ç¬å æ¹æ³ï¼è¦ä¹æ¯å±äº«æ¹å¼ï¼ä»ä»¬ä¹åªéå®ç°tryAcquire-tryReleaseãtryAcquireShared-tryReleaseSharedä¸­çä¸ç§å³å¯ãä½AQSä¹æ¯æèªå®ä¹åæ­¥å¨åæ¶å®ç°ç¬å åå±äº«ä¸¤ç§æ¹å¼ï¼å¦ReentrantReadWriteLockã</p>
<h3 id="nodeèç¹">Nodeèç¹</h3>
<p>Nodeå³ä¸ºä¸é¢CLHåä½éåä¸­çèç¹ã</p>
<p><img src="https://seven97-blog.oss-cn-hangzhou.aliyuncs.com/imgs/202404251047676.gif" alt="" loading="lazy"></p>
<p>Nodeç»ç¹æ¯æ¯ä¸ä¸ªç­å¾è·åèµæºççº¿ç¨çå°è£ï¼å¶åå«äºéè¦åæ­¥ççº¿ç¨æ¬èº«åå¶ç­å¾ç¶æwaitStatus</p>
<p>Nodeä¸­å ä¸ªæ¹æ³åå±æ§å¼çå«ä¹ï¼</p>
<ul>
<li>
<p>waitStatusï¼å½åèç¹å¨éåä¸­çç¶æ</p>
</li>
<li>
<p>threadï¼è¡¨ç¤ºå¤äºè¯¥èç¹ççº¿ç¨</p>
</li>
<li>
<p>prevï¼åé©±æé</p>
</li>
<li>
<p>predecessorï¼è¿ååé©±èç¹ï¼æ²¡æçè¯æåºnpe</p>
</li>
<li>
<p>nextWaiterï¼æåä¸ä¸ä¸ªå¤äºCONDITIONç¶æçèç¹ï¼ç±äºæ¬ç¯æç« ä¸è®²è¿°Condition Queueéåï¼è¿ä¸ªæéä¸å¤ä»ç»ï¼</p>
</li>
<li>
<p>nextï¼åç»§æé</p>
</li>
</ul>
<h3 id="ç­å¾ç¶æwaitstatus">ç­å¾ç¶æwaitStatus</h3>
<p>waitStatusæä¸é¢å ä¸ªæä¸¾å¼ï¼å¦æ¯å¦è¢«é»å¡ãæ¯å¦ç­å¾å¤éãæ¯å¦å·²ç»è¢«åæ¶ç­ãå±æ5ç§åå¼CANCELLEDãSIGNALãCONDITIONãPROPAGATEã0ã</p>
<ul>
<li>
<p>CANCELLED(1)ï¼è¡¨ç¤ºå½åç»ç¹å·²åæ¶è°åº¦ï¼ä¸åæ³å»è·åèµæºäºãå½timeoutæè¢«ä¸­æ­ï¼ååºä¸­æ­çæåµä¸ï¼ï¼ä¼è§¦ååæ´ä¸ºæ­¤ç¶æï¼è¿å¥è¯¥ç¶æåçç»ç¹å°ä¸ä¼åååã</p>
</li>
<li>
<p>SIGNAL(-1)ï¼è¡¨ç¤ºåç»§ç»ç¹å¨ç­å¾å½åç»ç¹å¤éãåç»§ç»ç¹å¥éæ¶ï¼ä¼å°åç»§ç»ç¹çç¶ææ´æ°ä¸ºSIGNALã</p>
</li>
<li>
<p>CONDITION(-2)ï¼è¡¨ç¤ºç»ç¹ç­å¾å¨Conditionä¸ï¼å½å¶ä»çº¿ç¨è°ç¨äºConditionçsignal()æ¹æ³åï¼CONDITIONç¶æçç»ç¹å°ä»ç­å¾éåè½¬ç§»å°åæ­¥éåä¸­ï¼ç­å¾è·ååæ­¥éã</p>
</li>
<li>
<p>PROPAGATE(-3)ï¼å±äº«æ¨¡å¼ä¸ï¼åç»§ç»ç¹ä¸ä»ä¼å¤éå¶åç»§ç»ç¹ï¼åæ¶ä¹å¯è½ä¼å¤éåç»§çåç»§ç»ç¹ã</p>
</li>
<li>
<p>0ï¼æ°ç»ç¹å¥éæ¶çé»è®¤ç¶æã</p>
</li>
</ul>
<p>æ³¨æï¼è´å¼è¡¨ç¤ºç»ç¹å¤äºææç­å¾ç¶æï¼èæ­£å¼è¡¨ç¤ºç»ç¹å·²è¢«åæ¶ãæä»¥æºç ä¸­å¾å¤å°æ¹ç¨&gt;0ã&lt;0æ¥å¤æ­ç»ç¹çç¶ææ¯å¦æ­£å¸¸ã</p>
<h2 id="æºç ">æºç </h2>
<p>ä»¥ReentrantLockçéå¬å¹³éä¸ºä¾ï¼å°å éåè§£éçäº¤äºæµç¨åç¬æåºæ¥å¼ºè°ä¸ä¸</p>
<p><img src="https://seven97-blog.oss-cn-hangzhou.aliyuncs.com/imgs/202404251047699.gif" alt="" loading="lazy"></p>
<p>å éï¼</p>
<ol>
<li>éè¿ReentrantLockçå éæ¹æ³Lockè¿è¡å éæä½ã</li>
<li>ä¼è°ç¨å°åé¨ç±» SyncçLockæ¹æ³ï¼ç±äºSync#lockæ¯æ½è±¡æ¹æ³ï¼æ ¹æ® ReentrantLockåå§åéæ©çå¬å¹³éåéå¬å¹³éï¼æ§è¡ç¸å³åé¨ç±»çLockæ¹æ³ï¼æ¬è´¨ä¸é½ä¼æ§è¡AQSç Acquire æ¹æ³ã</li>
<li>AQSç Acquire æ¹æ³ä¼æ§è¡ tryAcquire æ¹æ³ï¼ä½æ¯ç±äºtryAcquireéè¦èªå®ä¹åæ­¥å¨å®ç°ï¼å æ­¤æ§è¡äºReentrantLockä¸­çtryAcquireæ¹æ³ï¼ç±äºReentrantLockæ¯éè¿å¬å¹³éåéå¬å¹³éåé¨ç±»å®ç°çtryAcquireæ¹æ³ï¼å æ­¤ä¼æ ¹æ®éç±»åä¸åï¼æ§è¡ä¸åçtryAcquireã</li>
<li>tryAcquireæ¯è·åéé»è¾ï¼è·åå¤±è´¥åï¼ä¼æ§è¡æ¡æ¶AQSçåç»­é»è¾ï¼è·ReentrantLockèªå®ä¹åæ­¥å¨æ å³ã</li>
</ol>
<p>è§£éï¼</p>
<ol>
<li>éè¿ReentrantLockçè§£éæ¹æ³Unlockè¿è¡è§£éã</li>
<li>Unlockä¼è°ç¨åé¨ç±»SyncçReleaseæ¹æ³ï¼è¯¥æ¹æ³ç»§æ¿äºAQSã</li>
<li>Releaseä¸­ä¼è°ç¨tryReleaseæ¹æ³ï¼tryReleaseéè¦èªå®ä¹åæ­¥å¨å®ç°ï¼tryReleaseåªå¨ReentrantLockä¸­çSyncå®ç°ï¼å æ­¤å¯ä»¥çåºï¼éæ¾éçè¿ç¨ï¼å¹¶ä¸åºåæ¯å¦ä¸ºå¬å¹³éã</li>
<li>éæ¾æååï¼ææå¤çç±AQSæ¡æ¶å®æï¼ä¸èªå®ä¹åæ­¥å¨æ å³ã</li>
</ol>
<h3 id="acquireint">acquire(int)</h3>
<p>æ­¤æ¹æ³æ¯ç¬å æ¨¡å¼ä¸çº¿ç¨è·åå±äº«èµæºçé¡¶å±å¥å£ãå¦æè·åå°èµæºï¼çº¿ç¨ç´æ¥è¿åï¼å¦åè¿å¥ç­å¾éåï¼ç´å°è·åå°èµæºä¸ºæ­¢ï¼ä¸æ´ä¸ªè¿ç¨å¿½ç¥ä¸­æ­çå½±åãè¿ä¹æ­£æ¯lock()çè¯­ä¹ï¼å½ç¶ä¸ä»ä»åªéäºlock()ãè·åå°èµæºåï¼çº¿ç¨å°±å¯ä»¥å»æ§è¡å¶ä¸´çåºä»£ç äºã</p>
<pre><code class="language-java">public final void acquire(int arg) {
     if (!tryAcquire(arg) &amp;&amp;
         acquireQueued(addWaiter(Node.EXCLUSIVE), arg))
         selfInterrupt();
}
</code></pre>
<p>å½æ°æµç¨å¦ä¸ï¼</p>
<ol>
<li>tryAcquire()å°è¯ç´æ¥å»è·åèµæºï¼å¦ææååç´æ¥è¿åï¼è¿éä½ç°äºéå¬å¹³éï¼æ¯ä¸ªçº¿ç¨è·åéæ¶ä¼å°è¯ç´æ¥æ¢å å å¡ä¸æ¬¡ï¼èCLHéåä¸­å¯è½è¿æå«ççº¿ç¨å¨ç­å¾ï¼ï¼</li>
<li>addWaiter()å°è¯¥çº¿ç¨å å¥ç­å¾éåçå°¾é¨ï¼å¹¶æ è®°ä¸ºç¬å æ¨¡å¼ï¼</li>
<li>acquireQueued()ä½¿çº¿ç¨é»å¡å¨ç­å¾éåä¸­è·åèµæºï¼ä¸ç´è·åå°èµæºåæè¿åãå¦æå¨æ´ä¸ªç­å¾è¿ç¨ä¸­è¢«ä¸­æ­è¿ï¼åè¿åtrueï¼å¦åè¿åfalseã</li>
<li>å¦æçº¿ç¨å¨ç­å¾è¿ç¨ä¸­è¢«ä¸­æ­è¿ï¼å®æ¯ä¸ååºçãåªæ¯è·åèµæºåæåè¿è¡èªæä¸­æ­selfInterrupt()ï¼å°ä¸­æ­è¡¥ä¸ã</li>
</ol>
<p><img src="https://seven97-blog.oss-cn-hangzhou.aliyuncs.com/imgs/202404251047722.gif" alt="" loading="lazy"></p>
<p>å³äºæ´ä¸ªå½æ°æµç¨è¯¦è§£ï¼å¯ä»¥å¾ä¸ç</p>
<h4 id="tryacquireint">tryAcquire(int)</h4>
<p>æ­¤æ¹æ³å°è¯å»è·åç¬å èµæºãå¦æè·åæåï¼åç´æ¥è¿åtrueï¼å¦åç´æ¥è¿åfalseãè¿ä¹æ­£æ¯tryLock()çè¯­ä¹ï¼å½ç¶ä¸ä»ä»åªéäºtryLock()ã</p>
<pre><code class="language-java">protected boolean tryAcquire(int arg) {
     throw new UnsupportedOperationException();
}
</code></pre>
<p>è¿éæ¯AQSçæ¹æ³ï¼æä»¥ç´æ¥throwå¼å¸¸ï¼èæ²¡æå·ä½çå®ç°ãåå å°±å¨äºAQSåªæ¯ä¸ä¸ªæ¡æ¶ï¼å·ä½èµæºçè·å/éæ¾æ¹å¼äº¤ç±èªå®ä¹åæ­¥å¨å»å®ç°ã</p>
<p>è¿éä¹æä»¥æ²¡æå®ä¹æabstractï¼æ¯å ä¸ºç¬å æ¨¡å¼ä¸åªç¨å®ç°tryAcquire-tryReleaseï¼èå±äº«æ¨¡å¼ä¸åªç¨å®ç°tryAcquireShared-tryReleaseSharedãå¦æé½å®ä¹æabstractï¼é£ä¹æ¯ä¸ªæ¨¡å¼ä¹è¦å»å®ç°å¦ä¸æ¨¡å¼ä¸çæ¥å£ã</p>
<p><strong>ReentrantLockå®ç°å¬å¹³ééå¬å¹³éåä¸»è¦ä½ç°å¨tryAcquireçå®ç°ä¸ï¼</strong></p>
<p>å¬å¹³éä¸­å®ç°çtryAcquireï¼</p>
<pre><code class="language-java">protected final boolean tryAcquire(int acquires) {
    final Thread current = Thread.currentThread();
    int c = getState();
    if (c == 0) {
           if (!hasQueuedPredecessors() &amp;&amp;  //å¬å¹³éå éæ¶å¤æ­ç­å¾éåä¸­æ¯å¦å­å¨ææèç¹çæ¹æ³
                compareAndSetState(0, acquires)) {
                setExclusiveOwnerThread(current);
                return true;
           }
     }
     else if (current == getExclusiveOwnerThread()) {
           int nextc = c + acquires;
           if (nextc &lt; 0)
                throw new Error("Maximum lock count exceeded");
           setState(nextc);
           return true;
     }
     return false;
}
</code></pre>
<p>éå¬å¹³éä¸­å®ç°çtryAcquireï¼</p>
<pre><code class="language-java">protected final boolean tryAcquire(int acquires) {
    return nonfairTryAcquire(acquires);
}

final boolean nonfairTryAcquire(int acquires) {
     final Thread current = Thread.currentThread();
     int c = getState();
     if (c == 0) {
           if (compareAndSetState(0, acquires)) {
               setExclusiveOwnerThread(current);
               return true;
           }
      }
      else if (current == getExclusiveOwnerThread()) {
           int nextc = c + acquires;
           if (nextc &lt; 0) // overflow
                throw new Error("Maximum lock count exceeded");
           setState(nextc);
           return true;
      }
      return false;
}
</code></pre>
<ul>
<li>
<p>å¬å¹³éä¸­å¤äºä¸å± !hasQueuedPredecessors() çå¤æ­ï¼è¿æ¯å¬å¹³éå éæ¶å¤æ­ç­å¾éåä¸­æ¯å¦å­å¨ææèç¹çæ¹æ³ãå¦æè¿åFalseï¼è¯´æå½åçº¿ç¨å¯ä»¥è·åå±äº«èµæºï¼å¦æè¿åTrueï¼è¯´æéåä¸­å­å¨ææèç¹ï¼å½åçº¿ç¨å¿é¡»å å¥å°ç­å¾éåä¸­ã</p>
</li>
<li>
<p>èå¨éå¬å¹³éä¸­ï¼æ²¡æè¿ä¸ªå¤æ­ï¼ç´æ¥å°è¯è·åéï¼è½è·åå°éåä¸ç¨å å¥ç­å¾éåã</p>
</li>
</ul>
<pre><code class="language-java">public final boolean hasQueuedPredecessors() {
        // The correctness of this depends on head being initialized
        // before tail and on head.next being accurate if the current
        // thread is first in queue.
        Node t = tail; // Read fields in reverse initialization order
        Node h = head;
        Node s;
        return h != t &amp;&amp; ((s = h.next) == null || s.thread != Thread.currentThread());
}
</code></pre>
<p>è¿éçå¤æ­ h != t &amp;&amp; ((s = h.next) == null || s.thread != Thread.currentThread());ä¸ºä»ä¹è¦å¤æ­çå¤´ç»ç¹çä¸ä¸ä¸ªèç¹ï¼ç¬¬ä¸ä¸ªèç¹å¨å­çæ°æ®æ¯ä»ä¹ï¼</p>
<p>ååé¾è¡¨ä¸­ï¼ç¬¬ä¸ä¸ªèç¹ä¸ºèèç¹ï¼å¶å®å¹¶ä¸å­å¨ä»»ä½ä¿¡æ¯ï¼åªæ¯å ä½ãçæ­£çç¬¬ä¸ä¸ªææ°æ®çèç¹ï¼æ¯å¨ç¬¬äºä¸ªèç¹å¼å§çãå½h != tæ¶ï¼ å¦æ(s = h.next) == nullï¼ç­å¾éåæ­£å¨æçº¿ç¨è¿è¡åå§åï¼ä½åªæ¯è¿è¡å°äºTailæåHeadï¼æ²¡æå°HeadæåTailï¼æ­¤æ¶éåä¸­æåç´ ï¼éè¦è¿åTrueã å¦æ(s = h.next) != nullï¼è¯´ææ­¤æ¶éåä¸­è³å°æä¸ä¸ªææèç¹ãå¦ææ­¤æ¶s.thread == Thread.currentThread()ï¼è¯´æç­å¾éåçç¬¬ä¸ä¸ªææèç¹ä¸­ççº¿ç¨ä¸å½åçº¿ç¨ç¸åï¼é£ä¹å½åçº¿ç¨æ¯å¯ä»¥è·åèµæºçï¼å¦æs.thread != Thread.currentThread()ï¼è¯´æç­å¾éåçç¬¬ä¸ä¸ªææèç¹çº¿ç¨ä¸å½åçº¿ç¨ä¸åï¼å½åçº¿ç¨å¿é¡»å å¥è¿ç­å¾éåã</p>
<h4 id="addwaiternode">addWaiter(Node)</h4>
<p>æ­¤æ¹æ³ç¨äºå°å½åçº¿ç¨å å¥å°ç­å¾éåçéå°¾ï¼å¹¶è¿åå½åçº¿ç¨æå¨çç»ç¹ã</p>
<pre><code class="language-java">private Node addWaiter(Node mode) {
    //ä»¥ç»å®æ¨¡å¼æé ç»ç¹ãmodeæä¸¤ç§ï¼EXCLUSIVEï¼ç¬å ï¼åSHAREDï¼å±äº«ï¼
    Node node = new Node(Thread.currentThread(), mode);

    //å°è¯å¿«éæ¹å¼ç´æ¥æ¾å°éå°¾ã
    Node pred = tail;
    if (pred != null) {
        node.prev = pred;
        if (compareAndSetTail(pred, node)) {
            pred.next = node;
            return node;
        }
    }

    //ä¸ä¸æ­¥å¤±è´¥åéè¿enqå¥éã
    enq(node);
    return node;
}
</code></pre>
<p>ä¸»è¦çæµç¨å¦ä¸ï¼</p>
<ol>
<li>éè¿å½åççº¿ç¨åéæ¨¡å¼æ°å»ºä¸ä¸ªèç¹ã</li>
<li>Predæéæåå°¾èç¹Tailã</li>
<li>å°Newä¸­NodeçPrevæéæåPredã</li>
<li>éè¿compareAndSetTailæ¹æ³ï¼å®æå°¾èç¹çè®¾ç½®ãè¿ä¸ªæ¹æ³ä¸»è¦æ¯å¯¹tailOffsetåExpectè¿è¡æ¯è¾ï¼å¦ætailOffsetçNodeåExpectçNodeå°åæ¯ç¸åçï¼é£ä¹è®¾ç½®Tailçå¼ä¸ºUpdateçå¼ã</li>
</ol>
<pre><code class="language-java">// java.util.concurrent.locks.AbstractQueuedSynchronizer

static {
    try {
        stateOffset = unsafe.objectFieldOffset(AbstractQueuedSynchronizer.class.getDeclaredField("state"));
        headOffset = unsafe.objectFieldOffset(AbstractQueuedSynchronizer.class.getDeclaredField("head"));
        tailOffset = unsafe.objectFieldOffset(AbstractQueuedSynchronizer.class.getDeclaredField("tail"));
        waitStatusOffset = unsafe.objectFieldOffset(Node.class.getDeclaredField("waitStatus"));
        nextOffset = unsafe.objectFieldOffset(Node.class.getDeclaredField("next"));
    } catch (Exception ex) { 
    throw new Error(ex); 
  }
}
</code></pre>
<p>ä»AQSçéæä»£ç åå¯ä»¥çåºï¼é½æ¯è·åä¸ä¸ªå¯¹è±¡çå±æ§ç¸å¯¹äºè¯¥å¯¹è±¡å¨åå­å½ä¸­çåç§»éï¼è¿æ ·æä»¬å°±å¯ä»¥æ ¹æ®è¿ä¸ªåç§»éå¨å¯¹è±¡åå­å½ä¸­æ¾å°è¿ä¸ªå±æ§ãtailOffsetæçæ¯tailå¯¹åºçåç§»éï¼æä»¥è¿ä¸ªæ¶åä¼å°newåºæ¥çNodeç½®ä¸ºå½åéåçå°¾èç¹ãåæ¶ï¼ç±äºæ¯ååé¾è¡¨ï¼ä¹éè¦å°åä¸ä¸ªèç¹æåå°¾èç¹ã</p>
<p>å¦æPredæéæ¯Nullï¼è¯´æç­å¾éåä¸­æ²¡æåç´ ï¼ï¼æèå½åPredæéåTailæåçä½ç½®ä¸åï¼è¯´æè¢«å«ççº¿ç¨å·²ç»ä¿®æ¹ï¼,å°±éè¦enqå¥é</p>
<pre><code class="language-java">private Node enq(final Node node) {
    //CAS"èªæ"ï¼ç´å°æåå å¥éå°¾
    for (;;) {
        Node t = tail;
        if (t == null) { // éåä¸ºç©ºï¼åå»ºä¸ä¸ªç©ºçæ å¿ç»ç¹ä½ä¸ºheadç»ç¹ï¼å¹¶å°tailä¹æåå®ã
            if (compareAndSetHead(new Node()))
                tail = head;
        } else {//æ­£å¸¸æµç¨ï¼æ¾å¥éå°¾
            node.prev = t;
            if (compareAndSetTail(t, node)) {
                t.next = node;
                return t;
            }
        }
    }
}
</code></pre>
<p>å¦ææ²¡æè¢«åå§åï¼éè¦è¿è¡åå§åä¸ä¸ªå¤´ç»ç¹åºæ¥ãä½è¯·æ³¨æï¼åå§åçå¤´ç»ç¹å¹¶ä¸æ¯å½åçº¿ç¨èç¹ï¼èæ¯è°ç¨äºæ åæé å½æ°çèç¹ãå¦æç»åäºåå§åæèå¹¶åå¯¼è´éåä¸­æåç´ ï¼åä¸ä¹åçæ¹æ³ç¸åãå¶å®ï¼addWaiterå°±æ¯ä¸ä¸ªå¨åç«¯é¾è¡¨æ·»å å°¾èç¹çæä½ï¼éè¦æ³¨æçæ¯ï¼åç«¯é¾è¡¨çå¤´ç»ç¹æ¯ä¸ä¸ªæ åæé å½æ°çå¤´ç»ç¹ã</p>
<p><img src="https://seven97-blog.oss-cn-hangzhou.aliyuncs.com/imgs/202404251047743.gif" alt="" loading="lazy"></p>
<h4 id="acquirequeuednode-int">acquireQueued(Node, int)</h4>
<p>éè¿tryAcquire()åaddWaiter()ï¼è¯¥çº¿ç¨è·åèµæºå¤±è´¥ï¼å·²ç»è¢«æ¾å¥ç­å¾éåå°¾é¨äºãaddWaiter()è¿åçæ¯ä¸ä¸ªåå«è¯¥çº¿ç¨çNodeãèè¿ä¸ªNodeä¼ä½ä¸ºåæ°ï¼è¿å¥å°acquireQueuedæ¹æ³ä¸­ãacquireQueuedæ¹æ³å¯ä»¥å¯¹æéä¸­ççº¿ç¨è¿è¡âè·éâæä½ãé£ä¹ä¸ä¸æ­¥å°±æ¯ï¼å¦æè·åä¸å°éï¼é£ä¹å°±è¿å¥é»å¡ç¶æä¼æ¯ï¼ç´å°å¶ä»çº¿ç¨å½»åºéæ¾èµæºåå¤éèªå·±ï¼èªå·±åæ¿å°èµæºï¼ç¶åå°±å¯ä»¥å»å¹²èªå·±æ³å¹²çäºäºã</p>
<p>acquireQueuedï¼å¨ç­å¾éåä¸­æéæ¿å·ï¼ä¸­é´æ²¡å¶å®äºå¹²å¯ä»¥é»å¡ä¼æ¯ï¼ï¼ç´å°æ¿å°å·ååè¿åã</p>
<pre><code class="language-java">final boolean acquireQueued(final Node node, int arg) {
    boolean failed = true;//æ è®°æ¯å¦æåæ¿å°èµæº
    try {
        boolean interrupted = false;//æ è®°ç­å¾è¿ç¨ä¸­æ¯å¦è¢«ä¸­æ­è¿

        //CASâèªæâï¼
        for (;;) {
            final Node p = node.predecessor();//æ¿å°åé©±
            //å¦æåé©±æ¯headï¼å³è¯¥ç»ç¹å·²æèäºï¼é£ä¹ä¾¿æèµæ ¼å»å°è¯è·åèµæºï¼ä¹å°±æ¯å½åèç¹å¨çå®æ°æ®éåçé¦é¨ï¼å°±å°è¯è·åéï¼å«å¿äºå¤´ç»ç¹æ¯èèç¹ï¼ã
            if (p == head &amp;&amp; tryAcquire(arg)) {
                setHead(node);// è·åéæåï¼å¤´æéç§»å¨å°å½ånode
                p.next = null; // setHeadä¸­node.prevå·²ç½®ä¸ºnullï¼æ­¤å¤åå°head.nextç½®ä¸ºnullï¼å°±æ¯ä¸ºäºæ¹ä¾¿GCåæ¶ä»¥åçheadç»ç¹ãä¹å°±æå³çä¹åæ¿å®èµæºçç»ç¹åºéäºï¼
                failed = false; // æåè·åèµæº
                return interrupted;//è¿åç­å¾è¿ç¨ä¸­æ¯å¦è¢«ä¸­æ­è¿
            }

            // è¯´æpä¸ºå¤´èç¹ä¸å½åæ²¡æè·åå°éï¼å¯è½æ¯éå¬å¹³éè¢«æ¢å äºï¼æè æ¯pä¸ä¸ºå¤´ç»ç¹ï¼è¿ä¸ªæ¶åå°±è¦å¤æ­å½ånodeæ¯å¦è¦è¢«é»å¡ï¼è¢«é»å¡æ¡ä»¶ï¼åé©±èç¹çwaitStatusä¸º-1ï¼ï¼é²æ­¢æ éå¾ªç¯æµªè´¹èµæºã
            if (shouldParkAfterFailedAcquire(p, node) &amp;&amp;
                parkAndCheckInterrupt())
                interrupted = true;//å¦æç­å¾è¿ç¨ä¸­è¢«ä¸­æ­è¿ï¼åªæåªæé£ä¹ä¸æ¬¡ï¼å°±å°interruptedæ è®°ä¸ºtrue
        }
    } finally {
        if (failed) //è¯´æåçäºææä¹å¤çå¼å¸¸ï¼å°èç¹ç§»é¤ï¼é¿åå½±åå°å¶ä»èç¹
            cancelAcquire(node);
    }
}
</code></pre>
<p>setHeadæ¹æ³æ¯æå½åèç¹ç½®ä¸ºèèç¹ï¼ä½å¹¶æ²¡æä¿®æ¹waitStatusï¼å ä¸ºå®æ¯ä¸ç´éè¦ç¨çæ°æ®ã</p>
<pre><code class="language-java">// java.util.concurrent.locks.AbstractQueuedSynchronizer

private void setHead(Node node) {
    head = node;
    node.thread = null;
    node.prev = null;
}
</code></pre>
<p>acquireQueuedå½æ°çå·ä½æµç¨ï¼</p>
<p><img src="https://seven97-blog.oss-cn-hangzhou.aliyuncs.com/imgs/202404251047762.gif" alt="" loading="lazy"></p>
<p>ä»ä¸å¾å¯ä»¥çåºï¼è·³åºå½åå¾ªç¯çæ¡ä»¶æ¯å½âåç½®èç¹æ¯å¤´ç»ç¹ï¼ä¸å½åçº¿ç¨è·åéæåâãä¸ºäºé²æ­¢å æ­»å¾ªç¯å¯¼è´CPUèµæºè¢«æµªè´¹ï¼æä»¬ä¼å¤æ­åç½®èç¹çç¶ææ¥å³å®æ¯å¦è¦å°å½åçº¿ç¨æèµ·ï¼shouldParkAfterFailedAcquireä»£ç ï¼</p>
<pre><code class="language-java">// java.util.concurrent.locks.AbstractQueuedSynchronizer

// é åé©±èç¹å¤æ­å½åçº¿ç¨æ¯å¦åºè¯¥è¢«é»å¡
private static boolean shouldParkAfterFailedAcquire(Node pred, Node node) {
        // è·åå¤´ç»ç¹çèç¹ç¶æ
        int ws = pred.waitStatus;
        // è¯´æå¤´ç»ç¹å¤äºå¤éç¶æ
        if (ws == Node.SIGNAL)
            return true; 
        // éè¿æä¸¾å¼æä»¬ç¥éwaitStatus&gt;0æ¯åæ¶ç¶æ
        if (ws &gt; 0) {
            do {
                // å¾ªç¯ååæ¥æ¾åæ¶èç¹ï¼æåæ¶èç¹ä»éåä¸­åé¤
                node.prev = pred = pred.prev;
            } while (pred.waitStatus &gt; 0);
            pred.next = node;
        } else {
            // è®¾ç½®åä»»èç¹ç­å¾ç¶æä¸ºSIGNAL
            compareAndSetWaitStatus(pred, ws, Node.SIGNAL);
        }
        return false;
}
</code></pre>
<p>parkAndCheckInterruptä¸»è¦ç¨äºæèµ·å½åçº¿ç¨ï¼é»å¡è°ç¨æ ï¼è¿åå½åçº¿ç¨çä¸­æ­ç¶æã</p>
<pre><code class="language-java">// java.util.concurrent.locks.AbstractQueuedSynchronizer

private final boolean parkAndCheckInterrupt() {
    LockSupport.park(this);//è°ç¨park()ä½¿çº¿ç¨è¿å¥waitingç¶æ
    return Thread.interrupted();//å¦æè¢«å¤éï¼æ¥çèªå·±æ¯ä¸æ¯è¢«ä¸­æ­çã
}
</code></pre>
<p>å·ä½æèµ·æµç¨ç¨æµç¨å¾è¡¨ç¤ºå¦ä¸ï¼shouldParkAfterFailedAcquireæµç¨ï¼ï¼</p>
<p><img src="https://seven97-blog.oss-cn-hangzhou.aliyuncs.com/imgs/202404251047278.gif" alt="" loading="lazy"></p>
<p>æ´ä¸ªæµç¨ä¸­ï¼å¦æåé©±ç»ç¹çç¶æä¸æ¯SIGNALï¼é£ä¹èªå·±å°±ä¸è½å®å¿å»ä¼æ¯ï¼éè¦å»æ¾ä¸ªå®å¿çä¼æ¯ç¹ï¼åæ¶å¯ä»¥åå°è¯ä¸çææ²¡ææºä¼è½®å°èªå·±æ¿å·ã</p>
<p>park()ä¼è®©å½åçº¿ç¨è¿å¥waitingç¶æãå¨æ­¤ç¶æä¸ï¼æä¸¤ç§éå¾å¯ä»¥å¤éè¯¥çº¿ç¨ï¼1ï¼è¢«unpark()ï¼2ï¼è¢«interrupt()ãéè¦æ³¨æçæ¯ï¼Thread.interrupted()ä¼æ¸é¤å½åçº¿ç¨çä¸­æ­æ è®°ä½ã</p>
<p>é£ä¹shouldParkAfterFailedAcquireä¸­åæ¶èç¹æ¯æä¹çæçå¢ï¼ä»ä¹æ¶åä¼æä¸ä¸ªèç¹çwaitStatusè®¾ç½®ä¸º-1ï¼</p>
<p>æ¯å¨ä»ä¹æ¶é´éæ¾èç¹éç¥å°è¢«æèµ·ççº¿ç¨å¢ï¼</p>
<h4 id="cancelledç¶æèç¹çæ">CANCELLEDç¶æèç¹çæ</h4>
<p>åçacquireQueuedæ¹æ³ä¸­çFinallyä»£ç ï¼</p>
<pre><code class="language-java">// java.util.concurrent.locks.AbstractQueuedSynchronizer

final boolean acquireQueued(final Node node, int arg) {
        boolean failed = true;
        try {
        ...
            for (;;) {
                final Node p = node.predecessor();
                if (p == head &amp;&amp; tryAcquire(arg)) {
                    ...
                    failed = false;
                    ...
                }
                ...
        } finally {
            if (failed)
                cancelAcquire(node);
            }
}
</code></pre>
<p>æ¾ç¶ï¼å½failedä¸ºtrueæ¶æä¼æ§è¡æ¹æ³cancelAcquireï¼é£ä»ä¹æåµä¸failedä¸ºtrueå¢ï¼tryä»£ç æ®µæ§è¡è¿ç¨ä¸­åºç°å¼å¸¸ã</p>
<blockquote>
<p>è¿éä¸ç¥éåªéä¼åºç°å¼å¸¸ï¼åè®¾tryAcquireåºç°çå¼å¸¸ï¼é£ä¹acquireæ¹æ³å°±å·²ç»ä¸ä¼å¾åæ§è¡ï¼ä¹å°±ä¸ä¼æ§è¡å°acquireQueued</p>
</blockquote>
<p>éè¿cancelAcquireæ¹æ³ï¼å°Nodeçç¶ææ è®°ä¸ºCANCELLEDã</p>
<pre><code class="language-java">// java.util.concurrent.locks.AbstractQueuedSynchronizer

private void cancelAcquire(Node node) {
  // å°æ æèç¹è¿æ»¤
    if (node == null)
        return;
  // è®¾ç½®è¯¥èç¹ä¸å³èä»»ä½çº¿ç¨ï¼ä¹å°±æ¯èèç¹
    node.thread = null;
    Node pred = node.prev;
  // éè¿åé©±èç¹ï¼è·³è¿åæ¶ç¶æçnode
    while (pred.waitStatus &gt; 0)
        node.prev = pred = pred.prev;
  // è·åè¿æ»¤åçåé©±èç¹çåç»§èç¹
    Node predNext = pred.next;
  // æå½ånodeçç¶æè®¾ç½®ä¸ºCANCELLED
    node.waitStatus = Node.CANCELLED;
  // å¦æå½åèç¹æ¯å°¾èç¹ï¼å°ä»åå¾åçç¬¬ä¸ä¸ªéåæ¶ç¶æçèç¹è®¾ç½®ä¸ºå°¾èç¹
  // æ´æ°å¤±è´¥çè¯ï¼åè¿å¥elseï¼å¦ææ´æ°æåï¼å°tailçåç»§èç¹è®¾ç½®ä¸ºnull
    if (node == tail &amp;&amp; compareAndSetTail(node, pred)) {
        compareAndSetNext(pred, predNext, null);
    } else {
        int ws;
    // å¦æå½åèç¹ä¸æ¯headçåç»§èç¹ï¼1:å¤æ­å½åèç¹åé©±èç¹çæ¯å¦ä¸ºSIGNALï¼2:å¦æä¸æ¯ï¼åæåé©±èç¹è®¾ç½®ä¸ºSINGALçæ¯å¦æå
    // å¦æ1å2ä¸­æä¸ä¸ªä¸ºtrueï¼åå¤æ­å½åèç¹ççº¿ç¨æ¯å¦ä¸ºnull
    // å¦æä¸è¿°æ¡ä»¶é½æ»¡è¶³ï¼æå½åèç¹çåé©±èç¹çåç»§æéæåå½åèç¹çåç»§èç¹
        if (pred != head &amp;&amp; ((ws = pred.waitStatus) == Node.SIGNAL || (ws &lt;= 0 &amp;&amp; compareAndSetWaitStatus(pred, ws, Node.SIGNAL))) &amp;&amp; pred.thread != null) {
            Node next = node.next;
            if (next != null &amp;&amp; next.waitStatus &lt;= 0)
                compareAndSetNext(pred, predNext, next);
        } else {
      // å¦æå½åèç¹æ¯headçåç»§èç¹ï¼æèä¸è¿°æ¡ä»¶ä¸æ»¡è¶³ï¼é£å°±å¤éå½åèç¹çåç»§èç¹
            unparkSuccessor(node);
        }
        node.next = node; // help GC
    }
}
</code></pre>
<p>cancelAcquireæ¹æ³çæµç¨ï¼</p>
<ol>
<li>
<p>è·åå½åèç¹çåé©±èç¹ï¼å¦æåé©±èç¹çç¶ææ¯CANCELLEDï¼é£å°±ä¸ç´å¾åéåï¼æ¾å°ç¬¬ä¸ä¸ªwaitStatus &lt;= 0çèç¹ï¼å°æ¾å°çPredèç¹åå½åNodeå³èï¼å°å½åNodeè®¾ç½®ä¸ºCANCELLEDã</p>
</li>
<li>
<p>æ ¹æ®å½åèç¹çä½ç½®ï¼èèä»¥ä¸ä¸ç§æåµï¼</p>
<ol>
<li>
<p>å½åèç¹æ¯å°¾èç¹ã</p>
</li>
<li>
<p>å½åèç¹æ¯Headçåç»§èç¹ã</p>
</li>
<li>
<p>å½åèç¹ä¸æ¯Headçåç»§èç¹ï¼ä¹ä¸æ¯å°¾èç¹ã</p>
</li>
</ol>
</li>
</ol>
<p>å½åèç¹æ¯å°¾èç¹ï¼</p>
<p><img src="https://seven97-blog.oss-cn-hangzhou.aliyuncs.com/imgs/202404251047311.gif" alt="" loading="lazy"></p>
<p>å½åèç¹æ¯Headçåç»§èç¹ï¼</p>
<p><img src="https://seven97-blog.oss-cn-hangzhou.aliyuncs.com/imgs/202404251047378.gif" alt="" loading="lazy"></p>
<p>å½åèç¹ä¸æ¯Headçåç»§èç¹ï¼ä¹ä¸æ¯å°¾èç¹ï¼</p>
<p><img src="https://seven97-blog.oss-cn-hangzhou.aliyuncs.com/imgs/202404251047405.gif" alt="" loading="lazy"></p>
<p>éè¿ä¸é¢çæµç¨ï¼æä»¬å¯¹äºCANCELLEDèç¹ç¶æçäº§çåååå·²ç»æäºå¤§è´çäºè§£ï¼ä½æ¯ä¸ºä»ä¹ææçååé½æ¯å¯¹Nextæéè¿è¡äºæä½ï¼èæ²¡æå¯¹Prevæéè¿è¡æä½å¢ï¼ä»ä¹æåµä¸ä¼å¯¹Prevæéè¿è¡æä½ï¼</p>
<p>æ§è¡cancelAcquireçæ¶åï¼å½åèç¹çåç½®èç¹å¯è½å·²ç»ä»éåä¸­åºå»äºï¼å·²ç»æ§è¡è¿Tryä»£ç åä¸­çshouldParkAfterFailedAcquireæ¹æ³äºï¼ï¼å¦ææ­¤æ¶ä¿®æ¹Prevæéï¼æå¯è½ä¼å¯¼è´Prevæåå¦ä¸ä¸ªå·²ç»ç§»é¤éåçNodeï¼å æ­¤è¿åååPrevæéä¸å®å¨ã</p>
<p>shouldParkAfterFailedAcquireæ¹æ³ä¸­ï¼ä¼æ§è¡ä¸é¢çä»£ç ï¼å¶å®å°±æ¯å¨å¤çPrevæéãshouldParkAfterFailedAcquireæ¯è·åéå¤±è´¥çæåµä¸æä¼æ§è¡ï¼è¿å¥è¯¥æ¹æ³åï¼è¯´æå±äº«èµæºå·²è¢«è·åï¼å½åèç¹ä¹åçèç¹é½ä¸ä¼åºç°ååï¼å æ­¤è¿ä¸ªæ¶ååæ´Prevæéæ¯è¾å®å¨ã</p>
<pre><code class="language-java">do {
    node.prev = pred = pred.prev;
} while (pred.waitStatus &gt; 0);
</code></pre>
<h3 id="releaseint">release(int)</h3>
<p>æ­¤æ¹æ³æ¯ç¬å æ¨¡å¼ä¸çº¿ç¨éæ¾å±äº«èµæºçé¡¶å±å¥å£ãå®ä¼éæ¾æå®éçèµæºï¼å¦æå½»åºéæ¾äºï¼å³state=0ï¼,å®ä¼å¤éç­å¾éåéçå¶ä»çº¿ç¨æ¥è·åèµæºãè¿ä¹æ­£æ¯unlock()çè¯­ä¹ï¼å½ç¶ä¸ä»ä»åªéäºunlock()ã</p>
<pre><code class="language-java">public final boolean release(int arg) {
    if (tryRelease(arg)) {
        Node h = head;//æ¾å°å¤´ç»ç¹
        // å¤´ç»ç¹ä¸ä¸ºç©ºå¹¶ä¸å¤´ç»ç¹çwaitStatusä¸æ¯åå§åèç¹æåµï¼è§£é¤çº¿ç¨æèµ·ç¶æ
        if (h != null &amp;&amp; h.waitStatus != 0)
            unparkSuccessor(h);//å¤éç­å¾éåéçä¸ä¸ä¸ªçº¿ç¨
        return true;
    }
    return false;
}
</code></pre>
<p>æ ¹æ®tryRelease()çè¿åå¼æ¥å¤æ­è¯¥çº¿ç¨æ¯å¦å·²ç»å®æéæ¾æèµæºäºï¼æä»¥èªå®ä¹åæ­¥å¨å¨è®¾è®¡tryRelease()</p>
<p>è¿éçå¤æ­æ¡ä»¶ä¸ºä»ä¹æ¯h != null &amp;&amp; h.waitStatus != 0ï¼</p>
<ul>
<li>
<p>h null Headè¿æ²¡åå§åãåå§æåµä¸ï¼head nullï¼ç¬¬ä¸ä¸ªèç¹å¥éï¼Headä¼è¢«åå§åä¸ä¸ªèæèç¹ãæä»¥è¯´ï¼è¿éå¦æè¿æ²¡æ¥å¾åå¥éï¼å°±ä¼åºç°head == null çæåµã</p>
</li>
<li>
<p>h != null &amp;&amp; waitStatus == 0 è¡¨æåç»§èç¹å¯¹åºççº¿ç¨ä»å¨è¿è¡ä¸­ï¼ä¸éè¦å¤éã</p>
</li>
<li>
<p>h != null &amp;&amp; waitStatus &lt; 0 è¡¨æåç»§èç¹å¯è½è¢«é»å¡äºï¼éè¦å¤éã</p>
</li>
</ul>
<h4 id="tryreleaseint">tryRelease(int)</h4>
<pre><code class="language-java">protected boolean tryRelease(int arg) {
    throw new UnsupportedOperationException();
}
</code></pre>
<p>è·tryAcquire()ä¸æ ·ï¼è¿ä¸ªæ¹æ³æ¯éè¦ç¬å æ¨¡å¼çèªå®ä¹åæ­¥å¨å»å®ç°çãæ­£å¸¸æ¥è¯´ï¼tryRelease()é½ä¼æåçï¼å ä¸ºè¿æ¯ç¬å æ¨¡å¼ï¼è¯¥çº¿ç¨æ¥éæ¾èµæºï¼é£ä¹å®è¯å®å·²ç»æ¿å°ç¬å èµæºäºï¼ç´æ¥åæç¸åºéçèµæºå³å¯(state-=arg)ï¼ä¹ä¸éè¦èèçº¿ç¨å®å¨çé®é¢ãä½è¦æ³¨æå®çè¿åå¼ï¼ä¸é¢å·²ç»æå°äºï¼release()æ¯æ ¹æ®tryRelease()çè¿åå¼æ¥å¤æ­è¯¥çº¿ç¨æ¯å¦å·²ç»å®æéæ¾æèµæºäºï¼æä»¥èªä¹å®åæ­¥å¨å¨å®ç°æ¶ï¼å¦æå·²ç»å½»åºéæ¾èµæº(state=0)ï¼è¦è¿åtrueï¼å¦åè¿åfalseã</p>
<pre><code class="language-java">// java.util.concurrent.locks.ReentrantLock.Sync#tryRelease

@ReservedStackAccess
protected final boolean tryRelease(int releases) {
    int c = getState() - releases;//å¨æªéå¥çæåµä¸ï¼getState() = 1ï¼åå»releases 1ï¼å æ­¤c ä¸º 0
    if (Thread.currentThread() != getExclusiveOwnerThread())
        throw new IllegalMonitorStateException();
    boolean free = false;
    if (c == 0) {
        free = true;
        setExclusiveOwnerThread(null);//ç¬å éçº¿ç¨è®¾ç½®ä¸ºnull
    }
    setState(c);//æ¢å¤é»è®¤
    return free;
}
</code></pre>
<h4 id="unparksuccessornode">unparkSuccessor(Node)</h4>
<p>æ­¤æ¹æ³ç¨äºå¤éç­å¾éåä¸­ä¸ä¸ä¸ªçº¿ç¨ã</p>
<pre><code class="language-java">private void unparkSuccessor(Node node) {
    //è¿éï¼nodeä¸è¬ä¸ºå½åçº¿ç¨æå¨çç»ç¹ã
    int ws = node.waitStatus;
    if (ws &lt; 0)//ç½®é¶å½åçº¿ç¨æå¨çç»ç¹ç¶æï¼åè®¸å¤±è´¥ã
        compareAndSetWaitStatus(node, ws, 0);

    Node s = node.next;//æ¾å°ä¸ä¸ä¸ªéè¦å¤éçç»ç¹s
    if (s == null || s.waitStatus &gt; 0) {//å¦æä¸ºç©ºæå·²åæ¶
        s = null;
        for (Node t = tail; t != null &amp;&amp; t != node; t = t.prev) // ä»åååæ¾ã
            if (t.waitStatus &lt;= 0)//ä»è¿éå¯ä»¥çåºï¼&lt;=0çç»ç¹ï¼é½æ¯è¿ææçç»ç¹ã
                s = t;
    }
    if (s != null)
        LockSupport.unpark(s.thread);//å¤é
}
</code></pre>
<p>è¿ä¸ªå½æ°å¹¶ä¸å¤æãä¸å¥è¯æ¦æ¬ï¼ç¨unpark()å¤éç­å¾éåä¸­æåè¾¹çé£ä¸ªæªæ¾å¼çº¿ç¨sãæ­¤æ¶ï¼ååacquireQueued()èç³»èµ·æ¥ï¼sè¢«å¤éåï¼è¿å¥if (p == head &amp;&amp; tryAcquire(arg))çå¤æ­ï¼å³ä½¿p!=headä¹æ²¡å³ç³»ï¼å®ä¼åè¿å¥shouldParkAfterFailedAcquire()å¯»æ¾ä¸ä¸ªå®å¨ç¹ãè¿éæ¢ç¶så·²ç»æ¯ç­å¾éåä¸­æåè¾¹çé£ä¸ªæªæ¾å¼çº¿ç¨äºï¼é£ä¹éè¿shouldParkAfterFailedAcquire()çè°æ´ï¼sä¹å¿ç¶ä¼è·å°headçnextç»ç¹ï¼ä¸ä¸æ¬¡èªæp==headå°±æç«äºï¼ï¼ç¶åsæèªå·±è®¾ç½®æheadæ æç»ç¹ï¼è¡¨ç¤ºèªå·±å·²ç»è·åå°èµæºäºï¼acquire()ä¹è¿åäºï¼</p>
<p>å¨éåä¸­æ¥æ¾æ¶æ¯ä»åååæ¾çï¼ä¸ºä»ä¹è¿ä¹åï¼</p>
<p>ä»æºç ä¸çï¼åæ¾å°åç»§ç»ç¹sï¼å¦æsç¶ææ­£å¸¸é£ä¹ç´æ¥å¤éãä½æä¸¤ç§å¼å¸¸æåµï¼ä¼å¯¼è´nexté¾ä¸ä¸è´ï¼</p>
<ol>
<li>s==nullï¼å¨æ°ç»ç¹å¥éæ¶å¯è½ä¼åºç°</li>
</ol>
<p><img src="https://seven97-blog.oss-cn-hangzhou.aliyuncs.com/imgs/202404251047450.gif" alt="" loading="lazy"></p>
<ol start="2">
<li>s.waitStatus &gt; 0ï¼ä¸­é´æèç¹åæ¶æ¶ä¼åºç°ï¼å¦è¶æ¶ï¼</li>
</ol>
<p><img src="https://seven97-blog.oss-cn-hangzhou.aliyuncs.com/imgs/202404251047479.gif" alt="" loading="lazy"></p>
<p>å³äºå¹¶åé®é¢ï¼addWaiter()å¥éæä½åcancelAcquire()åæ¶æéæä½é½ä¼é ænexté¾çä¸ä¸è´ï¼èprevé¾æ¯å¼ºä¸è´çï¼æä»¥è¿æ¶ä»åå¾åæ¾æ¯æå®å¨çã</p>
<blockquote>
<p>ä¸ºä»ä¹prevé¾æ¯å¼ºä¸è´çï¼</p>
<p>å ä¸ºaddWaiter()éæ¯æ¬¡compareAndSetTail(pred, node)ä¹åé½ænode.prev = predï¼å³ä½¿compareAndSetTailå¤±è´¥ï¼enq()ä¼åå¤å°è¯ï¼ç´å°æåãä¸æ¦compareAndSetTailæåï¼è¯¥node.prevå°±æåæå¨ä¹åçtailç»ç¹ä¸äºï¼èä¸æ¯å¯ä¸çï¼è¿æ¶å¶ä»æ°ç»ç¹çprevåªè½å°è¯å¾æ°tailç»ç¹ä¸æãè¿éçç»åç¨æ³éå¸¸å·§å¦ï¼è½ä¿è¯CASä¹åçprevé¾å¼ºä¸è´ï¼ä½ä¸è½ä¿è¯CASåçnexté¾å¼ºä¸è´ã</p>
</blockquote>
<h3 id="acquiresharedint">acquireShared(int)</h3>
<p>æ­¤æ¹æ³æ¯å±äº«æ¨¡å¼ä¸çº¿ç¨è·åå±äº«èµæºçé¡¶å±å¥å£ãå®ä¼è·åæå®éçèµæºï¼è·åæååç´æ¥è¿åï¼è·åå¤±è´¥åè¿å¥ç­å¾éåï¼ç´å°è·åå°èµæºä¸ºæ­¢ï¼æ´ä¸ªè¿ç¨å¿½ç¥ä¸­æ­ã</p>
<pre><code class="language-java">public final void acquireShared(int arg) {
     if (tryAcquireShared(arg) &lt; 0)
        doAcquireShared(arg);
}
</code></pre>
<p>è¿étryAcquireShared()ä¾ç¶éè¦èªå®ä¹åæ­¥å¨å»å®ç°ãä½æ¯AQSå·²ç»æå¶è¿åå¼çè¯­ä¹å®ä¹å¥½äºï¼è´å¼ä»£è¡¨è·åå¤±è´¥ï¼0ä»£è¡¨è·åæåï¼ä½æ²¡æå©ä½èµæºï¼æ­£æ°è¡¨ç¤ºè·åæåï¼è¿æå©ä½èµæºï¼å¶ä»çº¿ç¨è¿å¯ä»¥å»è·åãæä»¥è¿éacquireShared()çæµç¨å°±æ¯ï¼</p>
<ol>
<li>tryAcquireShared()å°è¯è·åèµæºï¼æååç´æ¥è¿åï¼</li>
<li>å¤±è´¥åéè¿doAcquireShared()è¿å¥ç­å¾éåï¼ç´å°è·åå°èµæºä¸ºæ­¢æè¿åã</li>
</ol>
<h4 id="doacquiresharedint">doAcquireShared(int)</h4>
<p>æ­¤æ¹æ³ç¨äºå°å½åçº¿ç¨å å¥ç­å¾éåå°¾é¨ä¼æ¯ï¼ç´å°å¶ä»çº¿ç¨éæ¾èµæºå¤éèªå·±ï¼èªå·±æåæ¿å°ç¸åºéçèµæºåæè¿åã</p>
<pre><code class="language-java">private void doAcquireShared(int arg) {
    final Node node = addWaiter(Node.SHARED);//å å¥éåå°¾é¨
    boolean failed = true;//æ¯å¦æåæ å¿
    try {
        boolean interrupted = false;//ç­å¾è¿ç¨ä¸­æ¯å¦è¢«ä¸­æ­è¿çæ å¿
        for (;;) {
            final Node p = node.predecessor();//åé©±
            if (p == head) {//å¦æå°headçä¸ä¸ä¸ªï¼å ä¸ºheadæ¯æ¿å°èµæºççº¿ç¨ï¼æ­¤æ¶nodeè¢«å¤éï¼å¾å¯è½æ¯headç¨å®èµæºæ¥å¤éèªå·±ç
                int r = tryAcquireShared(arg);//å°è¯è·åèµæº
                if (r &gt;= 0) {//æå
                    setHeadAndPropagate(node, r);//å°headæåèªå·±ï¼è¿æå©ä½èµæºå¯ä»¥åå¤éä¹åççº¿ç¨
                    p.next = null; // help GC
                    if (interrupted)//å¦æç­å¾è¿ç¨ä¸­è¢«ææ­è¿ï¼æ­¤æ¶å°ä¸­æ­è¡¥ä¸ã
                        selfInterrupt();
                    failed = false;
                    return;
                }
            }

            //å¤æ­ç¶æï¼å¯»æ¾å®å¨ç¹ï¼è¿å¥waitingç¶æï¼ç­çè¢«unpark()æinterrupt()
            if (shouldParkAfterFailedAcquire(p, node) &amp;&amp;
                parkAndCheckInterrupt())
                interrupted = true;
        }
    } finally {
        if (failed)
            cancelAcquire(node);
    }
}
</code></pre>
<p>è¿éè·acquireQueued()çæµç¨å¹¶æ²¡æå¤ªå¤§åºå«ãåªä¸è¿è¿éå°è¡¥ä¸­æ­çselfInterrupt()æ¾å°doAcquireShared()éäºï¼èç¬å æ¨¡å¼æ¯æ¾å°acquireQueued()ä¹å¤ï¼ä½å®éä¸é½ä¸æ ·ã</p>
<p>è·ç¬å æ¨¡å¼æ¯ï¼è¿æä¸ç¹éè¦æ³¨æçæ¯ï¼è¿éåªæçº¿ç¨æ¯head.nextæ¶ï¼âèäºâï¼ï¼æä¼å»å°è¯è·åèµæºï¼æå©ä½çè¯è¿ä¼å¤éä¹åçéåã</p>
<p>é£ä¹é®é¢å°±æ¥äºï¼åå¦èå¤§ç¨å®åéæ¾äº5ä¸ªèµæºï¼èèäºéè¦6ä¸ªï¼èä¸éè¦1ä¸ªï¼èåéè¦2ä¸ªãèå¤§åå¤éèäºï¼èäºä¸çèµæºä¸å¤ï¼ä»æ¯æèµæºè®©ç»èä¸å¢ï¼è¿æ¯ä¸è®©ï¼ç­æ¡æ¯å¦å®çï¼èäºä¼ç»§ç»­park()ç­å¾å¶ä»çº¿ç¨éæ¾èµæºï¼ä¹æ´ä¸ä¼å»å¤éèä¸åèåäºãç¬å æ¨¡å¼ï¼åä¸æ¶å»åªæä¸ä¸ªçº¿ç¨å»æ§è¡ï¼è¿æ ·åæªå°ä¸å¯ï¼ä½å±äº«æ¨¡å¼ä¸ï¼å¤ä¸ªçº¿ç¨æ¯å¯ä»¥åæ¶æ§è¡çï¼ç°å¨å ä¸ºèäºçèµæºéæ±éå¤§ï¼èæåé¢éå°çèä¸åèåä¹é½å¡ä½äºãå½ç¶ï¼è¿å¹¶ä¸æ¯é®é¢ï¼åªæ¯AQSä¿è¯ä¸¥æ ¼æç§å¥éé¡ºåºå¤éç½¢äºï¼ä¿è¯å¬å¹³ï¼ä½éä½äºå¹¶åï¼ã</p>
<p>setHeadAndPropagate(Node, int):æ­¤æ¹æ³å¨setHead()çåºç¡ä¸å¤äºä¸æ­¥ï¼å°±æ¯èªå·±èéçåæ¶ï¼å¦ææ¡ä»¶ç¬¦åï¼æ¯å¦è¿æå©ä½èµæºï¼ï¼è¿ä¼å»å¤éåç»§ç»ç¹ï¼æ¯ç«æ¯å±äº«æ¨¡å¼ï¼</p>
<p>private void setHeadAndPropagate(Node node, int propagate) {</p>
<pre><code class="language-java">private void setHeadAndPropagate(Node node, int propagate) {
    Node h = head;
    setHead(node);//headæåèªå·±
     //å¦æè¿æå©ä½éï¼ç»§ç»­å¤éä¸ä¸ä¸ªé»å±çº¿ç¨
    if (propagate &gt; 0 || h == null || h.waitStatus &lt; 0) {
        Node s = node.next;
        if (s == null || s.isShared())
            doReleaseShared();
    }
}
</code></pre>
<h3 id="releaseshared">releaseShared()</h3>
<p>æ­¤æ¹æ³æ¯å±äº«æ¨¡å¼ä¸çº¿ç¨éæ¾å±äº«èµæºçé¡¶å±å¥å£ãå®ä¼éæ¾æå®éçèµæºï¼å¦ææåéæ¾ä¸åè®¸å¤éç­å¾çº¿ç¨ï¼å®ä¼å¤éç­å¾éåéçå¶ä»çº¿ç¨æ¥è·åèµæºã</p>
<pre><code class="language-java">public final boolean releaseShared(int arg) {
    if (tryReleaseShared(arg)) {//å°è¯éæ¾èµæº
        doReleaseShared();//å¤éåç»§ç»ç¹
        return true;
    }
    return false;
}
</code></pre>
<p>æ­¤æ¹æ³çæµç¨ä¹æ¯è¾ç®åï¼ä¸å¥è¯ï¼éæ¾æèµæºåï¼å¤éåç»§ãè·ç¬å æ¨¡å¼ä¸çrelease()ç¸ä¼¼ï¼ä½æä¸ç¹ç¨å¾®éè¦æ³¨æï¼ç¬å æ¨¡å¼ä¸çtryRelease()å¨å®å¨éæ¾æèµæºï¼state=0ï¼åï¼æä¼è¿åtrueå»å¤éå¶ä»çº¿ç¨ï¼è¿ä¸»è¦æ¯åºäºç¬å ä¸å¯éå¥çèéï¼èå±äº«æ¨¡å¼ä¸çreleaseShared()åæ²¡æè¿ç§è¦æ±ï¼å±äº«æ¨¡å¼å®è´¨å°±æ¯æ§å¶ä¸å®éççº¿ç¨å¹¶åæ§è¡ï¼é£ä¹æ¥æèµæºççº¿ç¨å¨éæ¾æé¨åèµæºæ¶å°±å¯ä»¥å¤éåç»§ç­å¾ç»ç¹ãä¾å¦ï¼èµæºæ»éæ¯13ï¼Aï¼5ï¼åBï¼7ï¼åå«è·åå°èµæºå¹¶åè¿è¡ï¼Cï¼4ï¼æ¥æ¶åªå©1ä¸ªèµæºå°±éè¦ç­å¾ãAå¨è¿è¡è¿ç¨ä¸­éæ¾æ2ä¸ªèµæºéï¼ç¶åtryReleaseShared(2)è¿åtrueå¤éCï¼Cä¸çåªæ3ä¸ªä»ä¸å¤ç»§ç»­ç­å¾ï¼éåBåéæ¾2ä¸ªï¼tryReleaseShared(2)è¿åtrueå¤éCï¼Cä¸çæ5ä¸ªå¤èªå·±ç¨äºï¼ç¶åCå°±å¯ä»¥è·AåBä¸èµ·è¿è¡ãèReentrantReadWriteLockè¯»éçtryReleaseShared()åªæå¨å®å¨éæ¾æèµæºï¼state=0ï¼æè¿åtrueï¼æä»¥èªå®ä¹åæ­¥å¨å¯ä»¥æ ¹æ®éè¦å³å®tryReleaseShared()çè¿åå¼</p>
<h4 id="doreleaseshared">doReleaseShared()</h4>
<p>æ­¤æ¹æ³ä¸»è¦ç¨äºå¤éåç»§</p>
<pre><code class="language-java">private void doReleaseShared() {
    for (;;) {
        Node h = head;
        if (h != null &amp;&amp; h != tail) {
            int ws = h.waitStatus;
            if (ws == Node.SIGNAL) {
                if (!compareAndSetWaitStatus(h, Node.SIGNAL, 0))
                    continue;
                unparkSuccessor(h);//å¤éåç»§
            }
            else if (ws == 0 &amp;&amp;
                     !compareAndSetWaitStatus(h, 0, Node.PROPAGATE))
                continue;
        }
        if (h == head)// headåçåå
            break;
    }
}
</code></pre>
<h2 id="åºç¨">åºç¨</h2>
<p>Mutexæ¯ä¸ä¸ªä¸å¯éå¥çäºæ¥éå®ç°ãéèµæºï¼AQSéçstateï¼åªæä¸¤ç§ç¶æï¼0è¡¨ç¤ºæªéå®ï¼1è¡¨ç¤ºéå®ãæ ¸å¿æºç ï¼</p>
<pre><code class="language-java">class Mutex implements Lock, java.io.Serializable {
    // èªå®ä¹åæ­¥å¨
    private static class Sync extends AbstractQueuedSynchronizer {
        // å¤æ­æ¯å¦éå®ç¶æ
        protected boolean isHeldExclusively() {
            return getState() == 1;
        }

        // å°è¯è·åèµæºï¼ç«å³è¿åãæååè¿åtrueï¼å¦åfalseã
        public boolean tryAcquire(int acquires) {
            assert acquires == 1; // è¿ééå®åªè½ä¸º1ä¸ªé
            if (compareAndSetState(0, 1)) {//stateä¸º0æè®¾ç½®ä¸º1ï¼ä¸å¯éå¥ï¼
                setExclusiveOwnerThread(Thread.currentThread());//è®¾ç½®ä¸ºå½åçº¿ç¨ç¬å èµæº
                return true;
            }
            return false;
        }

        // å°è¯éæ¾èµæºï¼ç«å³è¿åãæååä¸ºtrueï¼å¦åfalseã
        protected boolean tryRelease(int releases) {
            assert releases == 1; // éå®ä¸º1ä¸ªé
            if (getState() == 0)//æ¢ç¶æ¥éæ¾ï¼é£è¯å®å°±æ¯å·²å æç¶æäºãåªæ¯ä¸ºäºä¿é©ï¼å¤å±å¤æ­ï¼
                throw new IllegalMonitorStateException();
            setExclusiveOwnerThread(null);
            setState(0);//éæ¾èµæºï¼æ¾å¼å æç¶æ
            return true;
        }
    }

    // çæ­£åæ­¥ç±»çå®ç°é½ä¾èµç»§æ¿äºAQSçèªå®ä¹åæ­¥å¨ï¼
    private final Sync sync = new Sync();

    //lock&lt;--&gt;acquireãä¸¤èè¯­ä¹ä¸æ ·ï¼è·åèµæºï¼å³ä¾¿ç­å¾ï¼ç´å°æåæè¿åã
    public void lock() {
        sync.acquire(1);
    }

    //tryLock&lt;--&gt;tryAcquireãä¸¤èè¯­ä¹ä¸æ ·ï¼å°è¯è·åèµæºï¼è¦æ±ç«å³è¿åãæååä¸ºtrueï¼å¤±è´¥åä¸ºfalseã
    public boolean tryLock() {
        return sync.tryAcquire(1);
    }

    //unlock&lt;--&gt;releaseãä¸¤èè¯­æä¸æ ·ï¼éæ¾èµæºã
    public void unlock() {
        sync.release(1);
    }

    //éæ¯å¦å æç¶æ
    public boolean isLocked() {
        return sync.isHeldExclusively();
    }
}
</code></pre>
<p>é¤äºMutexï¼ReentrantLock/CountDownLatch/Semphoreè¿äºåæ­¥ç±»çå®ç°æ¹å¼é½å·®ä¸å¤ï¼ä¸åçå°æ¹å°±å¨è·å-éæ¾èµæºçæ¹å¼tryAcquire-tryRelelaseã</p>
<h2 id="reentrantlock-çä½¿ç¨">ReentrantLock çä½¿ç¨</h2>
<p>ReentrantLock çä½¿ç¨æ¹å¼ä¸&nbsp;<a href="https://www.seven97.top/java/concurrent/02-keyword1-synchronized.html" target="_blank" rel="noopener nofollow">synchronized</a>&nbsp;å³é®å­ç±»ä¼¼ï¼é½æ¯éè¿å éåéæ¾éæ¥å®ç°åæ­¥çãæä»¬æ¥çç ReentrantLock çä½¿ç¨æ¹å¼ï¼ä»¥éå¬å¹³éä¸ºä¾ï¼</p>
<pre><code class="language-java">public class ReentrantLockTest {
    private static final ReentrantLock lock = new ReentrantLock();
    private static int count = 0;

    public static void main(String[] args) throws InterruptedException {
        Thread thread1 = new Thread(() -&gt; {
            for (int i = 0; i &lt; 10000; i++) {
                lock.lock();
                try {
                    count++;
                } finally {
                    lock.unlock();
                }
            }
        });
        Thread thread2 = new Thread(() -&gt; {
            for (int i = 0; i &lt; 10000; i++) {
                lock.lock();
                try {
                    count++;
                } finally {
                    lock.unlock();
                }
            }
        });
        thread1.start();
        thread2.start();
        thread1.join();
        thread2.join();
        System.out.println(count);
    }
}
</code></pre>
<p>ä»£ç å¾ç®åï¼ä¸¤ä¸ªçº¿ç¨åå«å¯¹ count åéè¿è¡ 10000 æ¬¡ç´¯å æä½ï¼æåè¾åº count çå¼ãæä»¬æ¥ççè¿è¡ç»æï¼</p>
<pre><code>20000
</code></pre>
<p>å¯ä»¥çå°ï¼ä¸¤ä¸ªçº¿ç¨å¯¹ count åéè¿è¡äº 20000 æ¬¡ç´¯å æä½ï¼è¯´æ ReentrantLock æ¯æ¯æéå¥æ§çãåæ¥ççå¬å¹³éçä½¿ç¨æ¹å¼ï¼åªéè¦å° ReentrantLock çæé æ¹æ³æ¹ä¸ºå¬å¹³éå³å¯ï¼</p>
<pre><code class="language-java">private static final ReentrantLock lock = new ReentrantLock(true);
</code></pre>
<p>è¿è¡ç»æä¸ºï¼</p>
<pre><code>20000
</code></pre>
<p>å¯ä»¥çå°ï¼å¬å¹³éçè¿è¡ç»æä¸éå¬å¹³éçè¿è¡ç»æä¸è´ï¼è¿æ¯å ä¸ºå¬å¹³éçå®ç°æ¹å¼ä¸éå¬å¹³éçå®ç°æ¹å¼åºæ¬ä¸è´ï¼åªæ¯å¨è·åéæ¶å¢å äºå¤æ­å½åèç¹æ¯å¦æåé©±èç¹çé»è¾å¤æ­ã</p>
<ul>
<li>å¬å¹³é: æç§çº¿ç¨è¯·æ±éçé¡ºåºè·åéï¼å³åå°åå¾ã</li>
<li>éå¬å¹³é: çº¿ç¨è·åéçé¡ºåºå¯è½ä¸è¯·æ±éçé¡ºåºä¸åï¼å¯è½å¯¼è´æäºçº¿ç¨è·åéçéåº¦è¾å¿«ã</li>
</ul>
<p>éè¦æ³¨æçæ¯ï¼ä½¿ç¨ ReentrantLock æ¶ï¼éå¿é¡»å¨ try ä»£ç åå¼å§ä¹åè·åï¼å¹¶ä¸å éä¹åä¸è½æå¼å¸¸æåºï¼å¦åå¨ finally åä¸­å°±æ æ³éæ¾éï¼ReentrantLock çéå¿é¡»å¨ finally ä¸­æå¨éæ¾ï¼ã</p>
<p>éè¯¯ç¤ºä¾ï¼</p>
<pre><code class="language-java">Lock lock = new XxxLock();
// ...
try {
    // å¦æå¨æ­¤æåºå¼å¸¸ï¼ä¼ç´æ¥æ§è¡ finally åçä»£ç 
    doSomething();
    // ä¸ç®¡éæ¯å¦æåï¼finally åé½ä¼æ§è¡
    lock.lock();
    doOthers();

} finally {
    lock.unlock();
}
</code></pre>
<p>æ­£ç¡®ç¤ºä¾ï¼</p>
<pre><code class="language-java">Lock lock = new XxxLock();
// ...
lock.lock();
try {
    doSomething();
    doOthers();
} finally {
    lock.unlock();
}
</code></pre>


</div>
<div id="MySignature" role="contentinfo">
    <p>æ¬ææ¥èªå¨çº¿ç½ç«ï¼sevençèé¸æé¿ä¹è·¯ï¼ä½èï¼sevenï¼è½¬è½½è¯·æ³¨æåæé¾æ¥ï¼www.seven97.top</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-09 09:00">2026-02-09 09:00</span>&nbsp;
<a href="https://www.cnblogs.com/sevencoding">ç¨åºåSeven</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19587937);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19587937', targetLink: 'https://www.cnblogs.com/sevencoding/p/19587937', title: 'AQSæ·±åº¦æ¢ç´¢ï¼ä»¥ReentrantLockçJavaå¹¶åç¼ç¨çé«æå®ç°' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ä¸å¨ç­ç¹åé¡¾ï¼2.2-2.8ï¼ ]]></title>
    <link>https://www.cnblogs.com/cmt/p/19593514</link>
    <guid>3b2623bec16c3a6fafb8f397fcbb1636</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/cmt/p/19593514" title="åå¸äº 2026-02-09 08:58">
    <span role="heading" aria-level="2">ä¸å¨ç­ç¹åé¡¾ï¼2.2-2.8ï¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>ç­ç¹éç¬ï¼</p>
<p> Â· <a href="https://www.cnblogs.com/haibindev/archive/2026/02/02/19563454.html" target="_blank">Googleæ­£å¼ä¸çº¿Gemini In Chromeï¼å½åç¯å¢ææ ·å¼å¯ã</a> (<a href="https://www.cnblogs.com/haibindev/" target="_blank">haibindev</a>) <br>
 Â· <a href="https://www.cnblogs.com/xiaobaiysf/archive/2026/02/03/19571167.html" target="_blank">æä½æç¨ | ä½¿ç¨å¼æºä¸ä»¶å¥ï¼OpenClaw+Ollama+1Panelï¼é¨ç½²7Ã24è¿è¡çä¸ªäººAIå©ç</a>
(<a href="https://www.cnblogs.com/xiaobaiysf/" target="_blank">å°ç½è·åå</a>)                    <br>
 Â· <a href="https://www.cnblogs.com/yupi/archive/2026/02/03/19568098.html" target="_blank">åç¹æ¯æ AI æ»çï¼AI ç¼ç¨æå¤§çè°è¨ï¼æ¯ âææâ</a>
(<a href="https://www.cnblogs.com/yupi/" target="_blank">ç¨åºåé±¼ç®</a>)                    <br>
 Â· <a href="https://www.cnblogs.com/1312mn/archive/2026/02/05/18376570.html" target="_blank">æ¨è .NET 8.0 å¼æºé¡¹ç®ä¼ªå¾®æå¡æ¡æ¶</a>
(<a href="https://www.cnblogs.com/1312mn/" target="_blank">å°ç ç¼å </a>)                    <br>
 Â· <a href="https://www.cnblogs.com/StephenYoung/archive/2026/02/05/19539895.html" target="_blank">32å²ç¨åºåçæ­»ï¼è®©ææ³èµ·äºææ¾ç»çå ç­ç»åï¼åºå¹¸èªå·±è¿æ´»ç</a>
(<a href="https://www.cnblogs.com/StephenYoung/" target="_blank">Stephen_Young</a>)                    <br>
 Â· <a href="https://www.cnblogs.com/kevin-Y/archive/2026/02/03/19569791.html" target="_blank">asp.net coreå¦ä½å®ç°Controllerç­æ´æ°</a>
(<a href="https://www.cnblogs.com/kevin-Y/" target="_blank">çå½ä½éªä¹kevin-Y</a>)                    <br>
 Â· <a href="https://www.cnblogs.com/zh94/archive/2026/02/06/19582489.html" target="_blank">Claude Opus 4.6 åå¸ï¼Agent è½åæ´æ¶¨ï¼ä¸ä¸æçªå£ç¿»äºåï¼</a>
(<a href="https://www.cnblogs.com/zh94/" target="_blank">è´¾åæ¯çå¹³è¡ä¸ç</a>)                    <br>
 Â· <a href="https://www.cnblogs.com/xdesigner/archive/2026/02/02/19565029.html" target="_blank">MWGAè®©åäº¿è¡ä»£ç å¨Webç«¯âå¤æ´»âï¼</a>
(<a href="https://www.cnblogs.com/xdesigner/" target="_blank">è¢æ°¸ç¦ çµå­çåï¼å»çä¿¡æ¯å</a>)                    <br>
 Â· <a href="https://www.cnblogs.com/daichangya/archive/2026/02/02/19566308.html" target="_blank">OpenClawæ¶æè§£æï¼AIå·¥ç¨å¸çå®æå­¦ä¹ èæ¬</a>
(<a href="https://www.cnblogs.com/daichangya/" target="_blank">Javaç çæ¢ç§</a>)                    <br>
 Â· <a href="https://www.cnblogs.com/Can-daydayup/archive/2026/02/03/19571766.html" target="_blank">ä½¿ç¨ NanUI å¿«éåå»ºå·æç°ä»£ç¨æ·çé¢ç WinForm åºç¨ç¨åº</a>
(<a href="https://www.cnblogs.com/Can-daydayup/" target="_blank">è¿½éæ¶åè</a>)                    <br>
 Â· <a href="https://www.cnblogs.com/tangshiye/archive/2026/02/05/19577857.html" target="_blank">æ£å­Cozeå®æï¼æ··åªè§é¢å·¥ä½æµï¼æ¥äº§50æ¡çæ¬¾ï¼åæåç°6ä½æ°ï¼åé¥­æç¨ï¼</a>
(<a href="https://www.cnblogs.com/tangshiye/" target="_blank">AIæ¶æå¸æ±¤å¸ç·</a>)                    <br>
 Â· <a href="https://www.cnblogs.com/yupi/archive/2026/02/06/19583031.html" target="_blank">ååï¼Claude Opus 4.6 å GPT-5.3-Codex åæ¶ç¸åºï¼AI ç¼ç¨è¦åå¤©äº</a>
(<a href="https://www.cnblogs.com/yupi/" target="_blank">ç¨åºåé±¼ç®</a>)                    <br>
            </p>
<p>ç­ç¹æ°é»ï¼</p>
<p>
 Â· <a href="https://news.cnblogs.com/n/814097/" target="_blank">ä¸çº¿72å°æ¶ï¼150ä¸Clawdbotå¯è°å»ºå½ï¼ä¸æ°ä¹ä¸ï¼è¿æäººç±»åä¸æ³åº­</a><br>
 Â· <a href="https://news.cnblogs.com/n/813998/" target="_blank">107å²ä»å¨è¶å¸æå·¥ï¼ä¸ºä»ä¹ä»ä»¬è½æ¢é¿å¯¿åå¥åº·ï¼</a><br>
 Â· <a href="https://news.cnblogs.com/n/814104/" target="_blank">Moltbookèé150ä¸ä¸ªAIï¼æç»è¢«å³æºï¼OpenClawéæ­»æå¡å¨å¯¹æäººç±»</a><br>
 Â· <a href="https://news.cnblogs.com/n/813980/" target="_blank">è¶åªåï¼è¶å¿«ä¹ï¼å¤§èä¼é¢å¤éæ¾å¤å·´èºï¼æ¾å¤§å¯¹åªåä»åºçå¥å±</a><br>
 Â· <a href="https://news.cnblogs.com/n/814295/" target="_blank">å°å°æè«âæâç»AIçå¤§æè·¯</a><br>
 Â· <a href="https://news.cnblogs.com/n/813999/" target="_blank">âç½å«å¼æèâï¼æ±èèçæ å£°å°å±</a><br>
 Â· <a href="https://news.cnblogs.com/n/814157/" target="_blank">ååï¼å¾®ä¿¡âå°æâåå®ï¼è¾è®¯æ´è·</a><br>
 Â· <a href="https://news.cnblogs.com/n/814218/" target="_blank">å©´å¿ä¸¤æé¾æ¶å·²å¼å§åç±»è§è§ä¿¡æ¯</a><br>
 Â· <a href="https://news.cnblogs.com/n/814126/" target="_blank">å¥èMetaè¿ä¸å¹´ï¼æååºçæç¯çå³å®ï¼æ±èæ¿ç»æéçº§ï¼è®©æåå»åä»£ç </a><br>
 Â· <a href="https://news.cnblogs.com/n/814255/" target="_blank">ä¸äº¿å¸å¼ä¸å¤è¸åï¼Claude Coworkè¡æ´å¨çè½¯ä»¶ä¸ï¼èé»æ¥äº</a><br>
 Â· <a href="https://news.cnblogs.com/n/814212/" target="_blank">å¼æå¹»è§å¤§å¹ä¸éçAIæ¨¡åè¯ç</a><br>
 Â· <a href="https://news.cnblogs.com/n/814259/" target="_blank">ç¬¬ä¸æ¹ç¨Clawdbotèµé±çäººç±»åºç°ï¼ä¸æä¸çèµ300ä¸ï¼å¨çéèåå¤©äºï¼</a></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-09 08:58">2026-02-09 08:58</span>&nbsp;
<a href="https://www.cnblogs.com/cmt">åå®¢å­å¢é</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19593514);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19593514', targetLink: 'https://www.cnblogs.com/cmt/p/19593514', title: 'ä¸å¨ç­ç¹åé¡¾ï¼2.2-2.8ï¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ dotnet Vortice éè¿ Angle å° Skia å DirectX å¯¹æ¥ ]]></title>
    <link>https://www.cnblogs.com/lindexi/p/19593476</link>
    <guid>7d33dc5651b8676e4693c28970a86966</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/lindexi/p/19593476" title="åå¸äº 2026-02-09 08:39">
    <span role="heading" aria-level="2">dotnet Vortice éè¿ Angle å° Skia å DirectX å¯¹æ¥</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        æ¬æå°ä»æ§å¶å°å¼å§ï¼ä»¥æç®åæ¹å¼åå¤§å®¶å±ç¤ºå¦ä½éè¿ Angle å° Skia å DirectX å¯¹æ¥ãå¯¹æ¥ä¹åï¼å¯ä»¥å©ç¨ Angle çè½åï¼è®© Skia ä½¿ç¨å° DirectX å¼ææ¸²æè½å
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">


<p>ANGLE æ¯è°·æ­å¼æºçç»ä»¶ï¼æä¾å° OpenGL ES API è°ç¨è½¬æ¢ä¸ºå®éè°ç¨ DirectX å¼ææ§è¡æ¸²æçè½åãè¯¦ç»è¯·çï¼ <a href="https://github.com/google/angle" target="_blank" rel="noopener nofollow">https://github.com/google/angle</a></p>
<p>æ´ä½çæ­¥éª¤æ¯ï¼</p>
<ol>
<li>åºç¡ä¸éç¨å°åå»º Win32 çªå£</li>
<li>åå§å DirectX ç¸å³ï¼åæ¬åå»º DirectX å·¥åå DirectX è®¾å¤ï¼æä¸¾æ¾ç¤ºééå¨ç­</li>
<li>åå§å Angle åä¸ DirectX å¯¹æ¥</li>
</ol>
<p>å¼å§ä¹åï¼æç§ .NET çæ¯ä¾ï¼åå®è£å¿è¦ç NuGet åºãå®è£ä¹åç csproj é¡¹ç®æä»¶ä»£ç å¦ä¸</p>
<pre><code class="language-xml">&lt;Project Sdk="Microsoft.NET.Sdk"&gt;

  &lt;PropertyGroup&gt;
    &lt;OutputType&gt;Exe&lt;/OutputType&gt;
    &lt;TargetFramework&gt;net10.0&lt;/TargetFramework&gt;
    &lt;Nullable&gt;enable&lt;/Nullable&gt;
    &lt;IsAotCompatible&gt;true&lt;/IsAotCompatible&gt;
    &lt;PublishAot&gt;true&lt;/PublishAot&gt;
  &lt;/PropertyGroup&gt;

  &lt;ItemGroup&gt;
    &lt;PackageReference Include="Vortice.Direct3D11" Version="3.8.2" /&gt;
    &lt;PackageReference Include="Vortice.DirectComposition" Version="3.8.2" /&gt;
    &lt;PackageReference Include="Vortice.DXGI" Version="3.8.2" /&gt;
    &lt;PackageReference Include="Vortice.Win32" Version="2.3.0" /&gt;

    &lt;PackageReference Include="Avalonia.Angle.Windows.Natives" Version="2.1.25547.20250602" /&gt;

    &lt;PackageReference Include="Microsoft.Windows.CsWin32" Version="0.3.257"&gt;
      &lt;PrivateAssets&gt;all&lt;/PrivateAssets&gt;
      &lt;IncludeAssets&gt;runtime; build; native; contentfiles; analyzers&lt;/IncludeAssets&gt;
    &lt;/PackageReference&gt;

    &lt;PackageReference Include="SkiaSharp" Version="3.119.1" /&gt;

    &lt;PackageReference Include="MicroCom.Runtime" Version="0.11.0" /&gt;

  &lt;/ItemGroup&gt;

&lt;/Project&gt;
</code></pre>
<p>å¨æ¬æçè¿ç¨ä¸­ï¼éè¦ç¨å°ä¸äº Win32 æ¹æ³å OpenGL ç­ç¸å³å®ä¹ãæä½¿ç¨ CsWin32 åºè¾å©å®ä¹ Win32 æ¹æ³ï¼åä» Avalonia æ·è´ OpenGL ç¸å³å®ä¹</p>
<p>æ¬æå¨æ­£æé¨ååªæä¾å³é®çä»£ç ãå¨æ¬ææ«å°¾é¨åè´´åº Program.cs çå®å¨ä»£ç ï¼æ¬æçæ ¸å¿é»è¾é½å¨ Program.cs éé¢å®ç°ï¼æ ¸å¿ä»£ç å¤§æ¦ 300 å¤è¡ï¼éåä¸å£æ°éè¯»ãå¶ä»è¾å©ä»£ç ï¼å¦ OpenGL å®ä¹ç±»ç­ï¼å°±è¿è¯·å¤§å®¶ä»æ¬ææ«å°¾æä¾çæ´ä¸ªä»£ç é¡¹ç®çä¸è½½æ¹æ³è¿è¡ä¸è½½è·åä»£ç </p>
<h2 id="åå»ºçªå£">åå»ºçªå£</h2>
<p>åå»º Win32 çªå£ä»ä»åªæ¯æ³æ¿å°çªå£å¥æï¼ä¸æ¯æ¬æéç¹ï¼è¿éå°±å¿½ç¥ CreateWindow æ¹æ³çå®ç°</p>
<pre><code class="language-csharp">        // åå»ºçªå£
        HWND window = CreateWindow();
        // æ¾ç¤ºçªå£
        ShowWindow(window, SHOW_WINDOW_CMD.SW_NORMAL);
</code></pre>
<p>ä»¥ä¸ä»£ç ç ShowWindow æ¯æ åç Win32 æ¹æ³ï¼ç± CsWin32 åºçæãå®ä¹å¦ä¸</p>
<pre><code class="language-csharp">		[DllImport("USER32.dll", ExactSpelling = true),DefaultDllImportSearchPaths(DllImportSearchPath.System32)]
		[SupportedOSPlatform("windows5.0")]
		internal static extern winmdroot.Foundation.BOOL ShowWindow(winmdroot.Foundation.HWND hWnd, winmdroot.UI.WindowsAndMessaging.SHOW_WINDOW_CMD nCmdShow);
</code></pre>
<p>ä¸ºäºç´æ¥ä½¿ç¨æ¹æ³ï¼å¨æ¬æè¿éç´æ¥å¨å½åç©ºé´å¼ç¨éæç±»ï¼ä»£ç å¦ä¸</p>
<pre><code class="language-csharp">using static Windows.Win32.PInvoke;
</code></pre>
<h2 id="åå§å-directx-ç¸å³">åå§å DirectX ç¸å³</h2>
<p>å¨å¯¹æ¥è¿ç¨ä¸­ï¼å¯¹ DirectX å±æ²¡ææç¡®çè¦æ±ãè¿æ¯å ä¸ºä» Angle æ¹é¢æ¥è¯´ï¼åªè¦æ±è¾å¥æ¯ä¸ä¸ªçº¹çãè°ç¨ Angle ç <code>eglCreatePbufferFromClientBuffer</code> å° D3D11 çº¹çè¿è¡åè£</p>
<p>æ¬æè¿ééç¨æ åç DXGI äº¤æ¢é¾çåæ³ãå¶ä¸­æ ¸å¿å³é®ç¹å¨äºè®¾ç½®é¢è²æ ¼å¼ä¸º <code>B8G8R8A8_UNorm</code> æ ¼å¼ï¼ä»£ç å¦ä¸</p>
<pre><code class="language-csharp">using Vortice.Direct3D;
using Vortice.Direct3D11;
using Vortice.DXGI;
using Vortice.Mathematics;

...

        var dxgiFactory2 = DXGI.CreateDXGIFactory1&lt;IDXGIFactory2&gt;();

        IDXGIAdapter1? hardwareAdapter = GetHardwareAdapter(dxgiFactory2)
            // è¿é ToList åªæ¯æ³ååºææç IDXGIAdapter1 å¨å®éä»£ç éï¼å¤§é¨åé½æ¯è·åç¬¬ä¸ä¸ª
            .ToList().FirstOrDefault();
        if (hardwareAdapter == null)
        {
            throw new InvalidOperationException("Cannot detect D3D11 adapter");
        }

        FeatureLevel[] featureLevels = new[]
        {
            FeatureLevel.Level_11_1,
            FeatureLevel.Level_11_0,
            FeatureLevel.Level_10_1,
            FeatureLevel.Level_10_0,
            FeatureLevel.Level_9_3,
            FeatureLevel.Level_9_2,
            FeatureLevel.Level_9_1,
        };

        IDXGIAdapter1 adapter = hardwareAdapter;
        DeviceCreationFlags creationFlags = DeviceCreationFlags.BgraSupport;
        var result = D3D11.D3D11CreateDevice
        (
            adapter,
            DriverType.Unknown,
            creationFlags,
            featureLevels,
            out ID3D11Device d3D11Device, out FeatureLevel featureLevel,
            out ID3D11DeviceContext d3D11DeviceContext
        );

        _ = featureLevel;

        result.CheckError();

        // å¤§é¨åæåµä¸ï¼ç¨çæ¯ ID3D11Device1 å ID3D11DeviceContext1 ç±»å
        // ä» ID3D11Device è½¬æ¢ä¸º ID3D11Device1 ç±»å
        ID3D11Device1 d3D11Device1 = d3D11Device.QueryInterface&lt;ID3D11Device1&gt;();
        var d3D11DeviceContext1 = d3D11DeviceContext.QueryInterface&lt;ID3D11DeviceContext1&gt;();
        _ = d3D11DeviceContext1;

        // è·åå°äºæ°çä¸¤ä¸ªæ¥å£ï¼å°±å¯ä»¥åå° `d3D11Device` å `d3D11DeviceContext` çå¼ç¨è®¡æ°ãè°ç¨ Dispose ä¸ä¼éæ¾æåæç³è¯·ç D3D èµæºï¼åªæ¯åå°å¼ç¨è®¡æ°
        d3D11Device.Dispose();
        d3D11DeviceContext.Dispose();

        RECT windowRect;
        GetClientRect(window, &amp;windowRect);
        var clientSize = new SizeI(windowRect.right - windowRect.left, windowRect.bottom - windowRect.top);

        // é¢è²æ ¼å¼æè¦æ±ï¼æè½å Angle æ­£ç¡®äº¤äº
        Format colorFormat = Format.B8G8R8A8_UNorm;

        // ç¼å­çæ°éï¼åæ¬åç¼å­ãå¤§é¨ååºç¨æ¥è¯´ï¼è³å°éè¦ä¸¤ä¸ªç¼å­ï¼è¿ä¸ªç©è¿æ¸¸æçä¼ä¼´é½ç¥é
        const int frameCount = 2;
        SwapChainDescription1 swapChainDescription = new()
        {
            Width = (uint)clientSize.Width,
            Height = (uint)clientSize.Height,
            Format = colorFormat, // B8G8R8A8_UNorm
            BufferCount = frameCount,
            BufferUsage = Usage.RenderTargetOutput,
            SampleDescription = SampleDescription.Default,
            Scaling = Scaling.Stretch,
            SwapEffect = SwapEffect.FlipSequential,
            AlphaMode = AlphaMode.Ignore,
            Flags = SwapChainFlags.None,
        };

        var fullscreenDescription = new SwapChainFullscreenDescription()
        {
            Windowed = true,
        };

        IDXGISwapChain1 swapChain =
            dxgiFactory2.CreateSwapChainForHwnd(d3D11Device1, window, swapChainDescription, fullscreenDescription);

        // ä¸è¦è¢«æä¸ alt+enter è¿å¥å¨å±
        dxgiFactory2.MakeWindowAssociation(window,
            WindowAssociationFlags.IgnoreAltEnter | WindowAssociationFlags.IgnorePrintScreen);
</code></pre>
<p>ä»¥ä¸æ¶åå°ç DirectX ç»èé¨åï¼å¦æå¤§å®¶æå´è¶£ï¼è¿è¯·åé <a href="https://blog.lindexi.com/post/DirectX-%E4%BD%BF%E7%94%A8-Vortice-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%8E%A7%E5%88%B6%E5%8F%B0%E5%88%9B%E5%BB%BA-Direct2D1-%E7%AA%97%E5%8F%A3%E4%BF%AE%E6%94%B9%E9%A2%9C%E8%89%B2.html" target="_blank" rel="noopener nofollow">DirectX ä½¿ç¨ Vortice ä»é¶å¼å§æ§å¶å°åå»º Direct2D1 çªå£ä¿®æ¹é¢è²</a> åå®¢</p>
<p>æ¿å°äº¤æ¢é¾ä¹åï¼å°±å¯ä»¥éå¸¸æ¹ä¾¿å°ååº ID3D11Texture2D çº¹çï¼ä»£ç å¦ä¸</p>
<pre><code class="language-csharp">        // åä»äº¤æ¢é¾ååºæ¸²æç®æ çº¹ç
        ID3D11Texture2D d3D11Texture2D = swapChain.GetBuffer&lt;ID3D11Texture2D&gt;(0);
        Debug.Assert(d3D11Texture2D.Description.Width == clientSize.Width);
        Debug.Assert(d3D11Texture2D.Description.Height == clientSize.Height);
</code></pre>
<p>ç°å¨æ¿å°çº¹çäºï¼æ¥ä¸æ¥å°åå§å Angle ç¸å³ï¼å° ID3D11Texture2D çº¹çè¿è¡å¯¹æ¥</p>
<h2 id="åå§å-angle-ç¸å³">åå§å Angle ç¸å³</h2>
<p>åå§å Angle çè¿ç¨ï¼ä¹å¨åå§å OpenGL ç¸å³æ¨¡åãè¿éç¨å°äºä¸äºå¨ Avalonia å°è£å¥½çæ¹æ³ï¼ä¸ºäºæ¹ä¾¿çè§£ï¼æå°è¿é¨åå³é®çé»è¾æåºæ¥</p>
<p>åæ¯å®ä¹ EglInterface ç±»ï¼æ ¸å¿ä»£ç å¦ä¸</p>
<pre><code class="language-csharp">public unsafe partial class EglInterface
{
    public EglInterface(Func&lt;string, IntPtr&gt; getProcAddress)
    {
        Initialize(getProcAddress);
    }

    [GetProcAddress("eglGetError")]
    public partial int GetError();

    [GetProcAddress("eglGetDisplay")]
    public partial IntPtr GetDisplay(IntPtr nativeDisplay);

    [GetProcAddress("eglMakeCurrent")]
    public partial bool MakeCurrent(IntPtr display, IntPtr draw, IntPtr read, IntPtr context);

    ...

    public string? QueryString(IntPtr display, int i)
    {
        var rv = QueryStringNative(display, i);
        if (rv == IntPtr.Zero)
            return null;
        return Marshal.PtrToStringAnsi(rv);
    }

    ...

}
</code></pre>
<p>ä»¥ä¸è¿äºæ è®°äº <code>GetProcAddressAttribute</code> ç¹æ§çæ¹æ³é½æ¯å¨ Avalonia ééè¿æºä»£ç çæå¨çæå·ä½å®ç°ï¼å¨æ¬æè¿éä¸ºäºç®åé»è¾ï¼å°±æ·è´äºæºä»£ç çæå¨çæä¹åçä»£ç ï¼ä»£ç åå®¹å¤§æ¦å¦ä¸</p>
<pre><code class="language-csharp">unsafe partial class EglInterface
{
    delegate* unmanaged[Stdcall]&lt;int&gt; _addr_GetError;    
    public partial int GetError()
    {
        return _addr_GetError();
    }

    delegate* unmanaged[Stdcall]&lt;nint, nint&gt; _addr_GetDisplay;
    public partial nint GetDisplay(nint @nativeDisplay)
    {
        return _addr_GetDisplay(@nativeDisplay);
    }

    ...

    void Initialize(Func&lt;string, IntPtr&gt; getProcAddress)
    {
        var addr = IntPtr.Zero;

        // Initializing GetError
        addr = IntPtr.Zero;
        addr = getProcAddress("eglGetError");
        if (addr == IntPtr.Zero) throw new System.EntryPointNotFoundException("_addr_GetError");
        _addr_GetError = (delegate* unmanaged[Stdcall]&lt;int&gt;) addr;

        // Initializing GetDisplay
        addr = IntPtr.Zero;
        addr = getProcAddress("eglGetDisplay");
        if (addr == IntPtr.Zero) throw new System.EntryPointNotFoundException("_addr_GetDisplay");
        _addr_GetDisplay = (delegate* unmanaged[Stdcall]&lt;nint, nint&gt;) addr;

         ...
    }
}
</code></pre>
<p>éè¿ä»¥ä¸é»è¾å¯ä»¥ç¥éï¼å¨ EglInterface æé å½æ°ä¼ å¥ç <code>Func&lt;string, IntPtr&gt; getProcAddress</code> åæ°å°±å³å®äºå¦ä½æ ¹æ®ä¼ å¥çæ¹æ³åï¼è·åæ¹æ³æéçè½åãå¨ <code>Initialize</code> æ¹æ³éé¢ï¼å°å¡«ååä¸ªæ¹æ³æéåå®¹ï¼ä¸å®æåé¨æ¹æ³çå®ç°</p>
<p>ä¹è®¸æä¼ä¼´å¥½å¥ <code>Func&lt;string, IntPtr&gt; getProcAddress</code> åæ°çå·ä½é»è¾ï¼è¿å¶å®å¾ç®åï¼åªæ¯è°ç¨ Angle åºè·åæ¹æ³å¯¹åºçæ¹æ³æéèå·²ãå·ä½å®ç°ä»£ç æ¾å¨ Win32AngleEglInterface ç±»éé¢ï¼ä»£ç å¦ä¸</p>
<pre><code class="language-csharp">internal partial class Win32AngleEglInterface : EglInterface
{
    [DllImport("av_libGLESv2.dll", CharSet = CharSet.Ansi)]
    static extern IntPtr EGL_GetProcAddress(string proc);

    public Win32AngleEglInterface() : this(LoadAngle())
    {

    }

    private Win32AngleEglInterface(Func&lt;string, IntPtr&gt; getProcAddress) : base(getProcAddress)
    {
        Initialize(getProcAddress);
    }

    [GetProcAddress("eglCreateDeviceANGLE", true)]
    public partial IntPtr CreateDeviceANGLE(int deviceType, IntPtr nativeDevice, int[]? attribs);

    [GetProcAddress("eglReleaseDeviceANGLE", true)]
    public partial void ReleaseDeviceANGLE(IntPtr device);

    static Func&lt;string, IntPtr&gt; LoadAngle()
    {
        if (RuntimeInformation.IsOSPlatform(OSPlatform.Windows))
        {
            var disp = EGL_GetProcAddress("eglGetPlatformDisplayEXT");

            if (disp == IntPtr.Zero)
            {
                throw new OpenGlException("libegl.dll doesn't have eglGetPlatformDisplayEXT entry point");
            }

            return EGL_GetProcAddress;
        }

        throw new PlatformNotSupportedException();
    }
}
</code></pre>
<p>å¯è§å°±æ¯ç´æ¥éè¿ <code>av_libGLESv2.dll</code> ç <code>EGL_GetProcAddress</code> å¯¼åº C å½æ°èå·²</p>
<p>å®æ Win32AngleEglInterface ä¹åï¼å°±å¯ä»¥é¡ºå¸¦ä½¿ç¨æ­¤ç±»åè¾å©åå»º ANGLE è®¾å¤ï¼ä»£ç å¦ä¸</p>
<pre><code class="language-csharp">        var egl = new Win32AngleEglInterface();
        // ä¼ å¥ ID3D11Device1 çæéï¼å° D3D11 è®¾å¤å AngleDevice ç»å®
        var angleDevice = egl.CreateDeviceANGLE(EglConsts.EGL_D3D11_DEVICE_ANGLE, d3D11Device1.NativePointer, null);
        var display = egl.GetPlatformDisplayExt(EglConsts.EGL_PLATFORM_DEVICE_EXT, angleDevice, null);
</code></pre>
<p>å¨åå»ºè®¾å¤çæ¶åï¼å° D3D11 è®¾å¤ä¼ å¥ç¨äºç»å®</p>
<p>ä»¥ä¸ä»£ç éè¿ GetPlatformDisplayExt è·åå° ANGLE ç display ä½ç°å¨è¿ä¸çæ¥ä½¿ç¨ï¼åå­¦ç Avalonia å°å¶å°è£å° AngleWin32EglDisplay ç±»åéé¢ï¼æ ¸å¿å®ä¹ä»£ç å¦ä¸</p>
<pre><code class="language-csharp">class AngleWin32EglDisplay : EglDisplay
{
    public AngleWin32EglDisplay(IntPtr angleDisplay, Win32AngleEglInterface egl) : base(angleDisplay, egl)
    {
        _angleDisplay = angleDisplay;
        _egl = egl;

        ...
    }

    private readonly IntPtr _angleDisplay;

    private readonly Win32AngleEglInterface _egl;

    public unsafe EglSurface WrapDirect3D11Texture(IntPtr handle, int offsetX, int offsetY, int width, int height)
    {
        var attrs = stackalloc[]
        {
            EGL_WIDTH, width, EGL_HEIGHT, height, EGL_TEXTURE_OFFSET_X_ANGLE, offsetX,
            EGL_TEXTURE_OFFSET_Y_ANGLE, offsetY,
            _flexibleSurfaceSupported ? EGL_FLEXIBLE_SURFACE_COMPATIBILITY_SUPPORTED_ANGLE : EGL_NONE, EGL_TRUE,
            EGL_NONE
        };

        return CreatePBufferFromClientBuffer(EGL_D3D_TEXTURE_ANGLE, handle, attrs);
    }

    ...
}

public class EglDisplay : IDisposable
{
    public EglDisplay(IntPtr display, EglInterface eglInterface)
    {
        EglInterface = eglInterface;
        _display = display;

        _config = InitializeAndGetConfig(display, eglInterface);
    }

    public IntPtr Config =&gt; _config.Config;

    private readonly EglConfigInfo _config;

    private static EglConfigInfo InitializeAndGetConfig(IntPtr display, EglInterface eglInterface)
    {
        ...
    }

    public EglInterface EglInterface { get; }

    public IntPtr Handle =&gt; _display;

    private IntPtr _display;

    public Lock.Scope Lock() =&gt; _lock.EnterScope();

    private readonly Lock _lock = new();

    public unsafe EglSurface CreatePBufferFromClientBuffer(int bufferType, IntPtr handle, int* attribs)
    {
        using (Lock())
        {
            var s = EglInterface.CreatePbufferFromClientBufferPtr(Handle, bufferType, handle,
                Config, attribs);

            if (s == IntPtr.Zero)
                throw OpenGlException.GetFormattedException("eglCreatePbufferFromClientBuffer", EglInterface);
            return new EglSurface(this, s);
        }
    }
}
</code></pre>
<p>ä»¥ä¸ä»£ç ç EglConfigInfo ç±»åå®ä¹å¦ä¸</p>
<pre><code class="language-csharp">internal class EglConfigInfo
{
    public IntPtr Config { get; }
    public GlVersion Version { get; }
    public int SurfaceType { get; }
    public int[] Attributes { get; }
    public int SampleCount { get; }
    public int StencilSize { get; }

    ...
}
</code></pre>
<p>ä»ä»¥ä¸ä»£ç å¯çå°æå³é®ç WrapDirect3D11Texture æ¹æ³ï¼è¿ä¸ªæ¹æ³å°ä¼ å¥ D3D çº¹çç¨äºå³è</p>
<p>ä½¿ç¨å°è£å¥½ç AngleWin32EglDisplay ç±»ï¼ä»£ç å¦ä¸</p>
<pre><code class="language-csharp">        var angleWin32EglDisplay = new AngleWin32EglDisplay(display, egl);

        EglContext eglContext = angleWin32EglDisplay.CreateContext();
</code></pre>
<p>è¿éç CreateContext æ¹æ³å®ç°å¦ä¸</p>
<pre><code class="language-csharp">public class EglDisplay : IDisposable
{
    ...
    public EglContext CreateContext()
    {
        lock (_lock)
        {
            var context = EglInterface.CreateContext(_display, Config,  IntPtr.Zero, _config.Attributes);

            return new EglContext(this, context, _config.Version);
        }
    }
    ...
}
</code></pre>
<p>å¨ EglContext éé¢ä¼¼ä¹æ²¡æä»ä¹é»è¾ï¼åªæ¯å­æ¾ EglDisplay å context æéç­ï¼å¶æ ¸å¿ä½ç¨æ¯é²æ­¢ç´æ¥è®©å¶ä»æ¨¡åä½¿ç¨ context æéï¼åªæ¯å¯¹ context æéåè£</p>
<pre><code class="language-csharp">public record EglContext(EglDisplay EglDisplay, IntPtr Context, GlVersion Version)
{
    public EglInterface EglInterface =&gt; EglDisplay.EglInterface;

    public GlInterface GlInterface
    {
        get
        {
            if (_glInterface is null)
            {
                _glInterface = GlInterface.FromNativeUtf8GetProcAddress(Version, EglInterface.GetProcAddress);
            }

            return _glInterface;
        }
    }

    private GlInterface? _glInterface;
    public EglSurface? OffscreenSurface { get; } = null;

    public IDisposable MakeCurrent() =&gt; MakeCurrent(OffscreenSurface);

    public IDisposable MakeCurrent(EglSurface? surface)
    {
        var locker = new object();
        Monitor.Enter(locker);
        var old = new RestoreContext(EglInterface, EglDisplay.Handle, locker);

        EglInterface.MakeCurrent(EglDisplay.Handle, IntPtr.Zero, IntPtr.Zero, IntPtr.Zero);

        var success = EglInterface.MakeCurrent(EglDisplay.Handle, surface?.DangerousGetHandle() ?? IntPtr.Zero, surface?.DangerousGetHandle() ?? IntPtr.Zero, Context);

        if (!success)
        {
            ...
        }

        return old;
    }

    private class RestoreContext : IDisposable
    {
        ...
        public void Dispose()
        {
            _egl.MakeCurrent(_display, _draw, _read, _context);
            Monitor.Exit(_l);
        }
    }
}
</code></pre>
<p>å¯è§ EglContext é¢å¤å¤å°è£äº MakeCurrent æ¹æ³ï¼ç¨äºå°ä¼ å¥ç <code>EglSurface</code> è®¾ç½®ä¸º OpenGL å½åæå·¥ä½çå¯¹è±¡</p>
<p>ç¶åè¿è¿åäº RestoreContext å¯¹è±¡ï¼ç¨äºå®æä¹åå°å¶éç½®ç¶æï¼é²æ­¢å¶ä»é»è¾è¯¯åå¥ï¼è¿éæ¯ OpenGL çæ åç¨æ³</p>
<p>ä½¿ç¨å°è£ç EglContext è¿è¡åå§ååå¤ï¼åå»º GRContext å¯¹è±¡ï¼ä»£ç å¦ä¸</p>
<pre><code class="language-csharp">        EglContext eglContext = angleWin32EglDisplay.CreateContext();

        var makeCurrent = eglContext.MakeCurrent();

        // ä»¥ä¸ä¸¤ä¸ªé½æ¯ SkiaSharp å°è£çæ¹æ³
        var grGlInterface = GRGlInterface.CreateGles(proc =&gt;
        {
            var procAddress = eglContext.GlInterface.GetProcAddress(proc);
            return procAddress;
        });

        var grContext = GRContext.CreateGl(grGlInterface, new GRContextOptions()
        {
            AvoidStencilBuffers = true
        });

        makeCurrent.Dispose();
</code></pre>
<p>è¿é¨åé»è¾é½æ¯ OpenGL çå¸¸ç¨åå§åå®ç°ï¼æ²¡æä»ä¹ç¹å«çï¼å¦æå¤§å®¶å¯¹ç±»åå®ä¹æå´è¶£ï¼è¿è¯·èªè¡æåä»£ç äºè§£</p>
<h2 id="çº¹çå¯¹æ¥">çº¹çå¯¹æ¥</h2>
<p>å®æåå§å ANGLE å OpenGL ä¹åï¼å°±å¯ä»¥å¼å§è¿è¡çº¹çå¯¹æ¥ï¼ä»£ç å¦ä¸</p>
<pre><code class="language-csharp">        // åä»äº¤æ¢é¾ååºæ¸²æç®æ çº¹ç
        ID3D11Texture2D d3D11Texture2D = swapChain.GetBuffer&lt;ID3D11Texture2D&gt;(0);

        // å³é®ä»£ç ï¼ éè¿ eglCreatePbufferFromClientBuffer å° D3D11 çº¹çåè£ä¸º EGLSurface
        // è¿ä¸æ­¥çåç½®æ¯å¨ eglCreateDeviceANGLE éé¢å° ID3D11Texture2D æå¨ç D3D11 è®¾å¤å³èï¼ `egl.CreateDeviceANGLE(EglConsts.EGL_D3D11_DEVICE_ANGLE, d3D11Device1.NativePointer, null)`
        EglSurface eglSurface =
            angleWin32EglDisplay.WrapDirect3D11Texture(d3D11Texture2D.NativePointer, 0, 0,
                (int)d3D11Texture2D.Description.Width, (int)d3D11Texture2D.Description.Height);
</code></pre>
<p>è°ç¨ WrapDirect3D11Texture è¿ä¸æ­¥çåç½®æ¯å¨ eglCreateDeviceANGLE éé¢å° ID3D11Texture2D æå¨ç D3D11 è®¾å¤å³èï¼ä¹å°±æ¯ä¸æç <code>egl.CreateDeviceANGLE(EglConsts.EGL_D3D11_DEVICE_ANGLE, d3D11Device1.NativePointer, null)</code> ä»£ç </p>
<p>å¦æ­¤å°±æ¿å°å³é®ç EglSurface è¡¨é¢å¯¹è±¡ï¼å¶ç±»åå®ä¹ä»ä»åªæ¯ä¸ä¸ªåè£ï¼ä»£ç å¦ä¸</p>
<pre><code class="language-csharp">public class EglSurface : SafeHandle
{
    private readonly EglDisplay _display;
    private readonly EglInterface _egl;

    public EglSurface(EglDisplay display, IntPtr surface) : base(surface, true)
    {
        _display = display;
        _egl = display.EglInterface;
    }

    protected override bool ReleaseHandle()
    {
        using (_display.Lock())
            _egl.DestroySurface(_display.Handle, handle);
        return true;
    }

    public override bool IsInvalid =&gt; handle == IntPtr.Zero;
    public void SwapBuffers() =&gt; _egl.SwapBuffers(_display.Handle, handle);
}
</code></pre>
<h2 id="ä¸-skia-å¯¹æ¥">ä¸ Skia å¯¹æ¥</h2>
<p>ä¸ Skia å¯¹æ¥çé»è¾æ¯åçå¨æ¯æ¬¡æ¸²æä¸ï¼è¿ä¸ªè¿ç¨ä¸­åªæ¯å° OpenGL è¡¨é¢ä½ä¸º Skia ç»å¸èå·²ï¼æ´ä¸ªè¿ç¨ä¸åçä»»ä½çæ·è´åå®éæ§è¡é»è¾ãæ éæå¿è¿ä¸æ­¥ä» OpenGL ç»å®å° Skia çæ§è½æè</p>
<p>ä»¥ä¸é»è¾åçå¨æ¯æ¬¡æ¸²æçæ¶å</p>
<pre><code class="language-csharp">// ä»¥ä¸æ¯æ¯æ¬¡ç»é¢æ¸²ææ¶é½è¦æ§è¡çé»è¾
// å° EGLSurface ç»å®å° Skia ä¸
using (eglContext.MakeCurrent(eglSurface))
{
    ... // å¨è¿éç¼åå¯¹æ¥çä»£ç 
}
</code></pre>
<p>ä»¥ä¸è¿ä¸æ­¥ç¨äºè®¾ç½®å°æ¸²ææç¨ç EglSurface è®¾ç½®ä¸º OpenGL å½åçæ¸²æå¯¹è±¡</p>
<p>å¼å§æ§è¡çæ¶åï¼è¿å¥ç­å¾åç§å·æ°é»è¾ï¼ç¡®ä¿é»è¾æ­£ç¡®</p>
<pre><code class="language-csharp">            using (eglContext.MakeCurrent(eglSurface))
            {
                EglInterface eglInterface = angleWin32EglDisplay.EglInterface;
                Debug.Assert(ReferenceEquals(egl, eglInterface));

                eglInterface.WaitClient();
                eglInterface.WaitGL();
                eglInterface.WaitNative(EglConsts.EGL_CORE_NATIVE_ENGINE);
                 ... // å¨è¿éç¼åå¯¹æ¥çä»£ç 

            }
</code></pre>
<p>ä»¥ä¸ä»£ç ç <code>WaitXxx</code> ä¸å¥ä»£ç å«ä¹åå«å¦ä¸ï¼</p>
<ul>
<li>WaitClientï¼ åºå±æ¯ <code>eglWaitClient</code> æ¹æ³ï¼ä½ç¨æ¯æä¹åç±å½å Client API ååºçå½ä»¤æµæ¨è¿/åæ­¥å°ä¸ä¸ªç¹ï¼ä½¿å¾è¿äºæä½å¯¹åç»­ EGL æä½ï¼ä»¥åå¯è½çè·¨ API è®¿é®ï¼æ´å®å¨</li>
<li>WaitGLï¼ åºå±æ¯ <code>eglWaitGL</code> æ¹æ³ï¼ç­å¾ OpenGLï¼æ OpenGL ESï¼ç®¡çº¿ä¸­çå½ä»¤å°è¾¾ä¸ä¸ªåæ­¥ç¹ãä¸è¬é½å¨ <code>eglSwapBuffers</code> ååè°ç¨ï¼å¨æ¬æåç»­å°ä¼ç¨å° <code>eglSwapBuffers</code> æ¹æ³</li>
<li>WaitNativeï¼ åºå±æ¯ <code>eglWaitNative</code> æ¹æ³ï¼ç¨äºç­å¾ native é£è¾¹å«å¨ç¨è¿ä¸ªèµæº/æèç­å°ä¸ä¸ªå¯å®å¨äº¤æ¥çç¹</li>
</ul>
<p>è¿ä¸ªåæ³æ¯æ¯è¾ä¿å®ç</p>
<p>æç§ OpenGL çåæ³ï¼æ¥ä¸æ¥å°±æ¯å¨ <code>eglContext.MakeCurrent(eglSurface)</code> çåç»­ï¼è°ç¨ glBindFramebuffer å glGetIntegerv æ¹æ³ãè°ç¨ <code>glBindFramebuffer</code> çä½ç¨æ¯å°æä¸ª Framebuffer Objectï¼FBOï¼ç»å®å°å½åä¸ä¸æçç»å¶ç®æ ãåéè¿ <code>glGetIntegerv</code> æ¥è¯¢ <code>GL_FRAMEBUFFER_BINDING</code> è·åå½åç»å®å° GL_FRAMEBUFFER ç framebuffer id æ¯å¤å°ï¼ä»£ç å¦ä¸</p>
<pre><code class="language-csharp">                eglContext.GlInterface.BindFramebuffer(GlConsts.GL_FRAMEBUFFER, 0);

                eglContext.GlInterface.GetIntegerv(GlConsts.GL_FRAMEBUFFER_BINDING, out var fb);
</code></pre>
<p>è°ç¨ <code>BindFramebuffer(int target, int fb)</code> ï¼<code>glBindFramebuffer</code>ï¼ çä¸¤ä¸ªåæ°åå«å¦ä¸ï¼</p>
<ul>
<li>targetï¼ç»å®ç¹ï¼éå¸¸æ¯ <code>GlConsts.GL_FRAMEBUFFER</code></li>
<li>fb: è¦ç»å®ç framebuffer id å·ãè¿éä¼ å¥ç 0 æ¯ä¸ä¸ªç¹æ®å¼ï¼è¡¨ç¤ºç»å®é»è®¤å¸§ç¼å²ï¼default framebufferï¼ï¼ä¹å°±æ¯âçªå£/è¡¨é¢âèåçé£ä¸ªç¼å²åºï¼å¨æ¬æè¿éå°±æ¯ EGLSurface / swapchain backbuffer äº</li>
</ul>
<p>å¶ä½ç¨å°±æ¯è®©æ¥ä¸æ¥ææç»å¶é½è¾åºå°âå½å EGLSurface çé»è®¤å¸§ç¼å²âï¼å³å¨ <code>eglContext.MakeCurrent(eglSurface)</code> ç»å®çè¿ä¸ªç± ANGLE æ å°ç D3D11 çº¹ç</p>
<p>è°ç¨ <code>GetIntegerv(int name, out int rv)</code> ï¼<code>glGetIntegerv</code>ï¼çä¸¤ä¸ªåæ°åå«å¦ä¸ï¼</p>
<ul>
<li>ä¼ å¥ GL_FRAMEBUFFER_BINDING è¡¨ç¤ºå°æ¥è¯¢å½åç»å®å° GL_FRAMEBUFFER ç framebuffer id æ¯å¤å°</li>
<li>æ¬¡åæ° <code>fb</code> ä¸ºè¾åºåæ°ï¼å°è·åå½åç»å®ç framebuffer id æ¯å¤å°</li>
</ul>
<p>ä¸ºä»ä¹å¨ä¸ä¸è¡ä»£ç  <code>BindFramebuffer</code> å·²ç»ä¼ å¥ç fb æ¯ 0 çå¼ï¼è¿éè¦ç«å»è°ç¨ <code>GetIntegerv</code> å»è·åå¢ï¼è¿æ¯å ä¸ºâé»è®¤å¸§ç¼å²âå¨åé¨å¯è½æä¸ä¸ª é 0 çå¹³å° FBO ï¼Framebuffer Objectï¼ idï¼GL_FRAMEBUFFER_BINDING è¯»åºæ¥å¯è½ä¸æ¯ 0 çå¼ãå°½ç®¡å¨å¤§é¨åæåµä¸ï¼è¿éå°±æ¯è·åå° 0 çå¼</p>
<p>å®æ OpenGL æ¸²æååå¤ä¹åï¼æ¥ä¸æ¥å¯ä»¥å¼å§åå¤ Skia çå¯¹æ¥é»è¾äº</p>
<p>åå¨ Skia å±è°ç¨ <code>gr_direct_context_reset_context</code> æ¹æ³ï¼åè¯ Skia å±ï¼éè¦éæ°è·å GL å±çç¶æãå¨ SkiaSharp é GRContext è¡¨ç¤º Skia ç GPU ä¸ä¸æï¼ä¸ºäºæ§è½èèï¼ä¼å¨ Skia éé¢ç¼å­äºä¸é¨åç GPU/GL ç¶æï¼ä»¥é¿åæ¯æ¬¡ç»å¶é½å¤§éå°è°ç¨ <code>glGet*</code> è·åç¶æï¼æéå¤ <code>gl*</code> ç¶æè®¾ç½®ãè°ç¨ <code>gr_direct_context_reset_context</code> æ¹æ³ä¸ç­äºéå»ºä¸ä¸æææ¸ç©ºèµæºï¼åªæ¯è®© Skia æ è®°éè¦å¯¹å½å GL ç¶æéæ°è·åèå·²ãå¨æ¬æè¿éå°éè¿ SkiaSharp å°è£ç <code>GRContext.ResetContext</code> è°ç¨å° <code>gr_direct_context_reset_context</code> æ¹æ³</p>
<pre><code class="language-csharp">                grContext.ResetContext();
</code></pre>
<p>å®ä¹é¢è²æ ¼å¼ï¼é¢è²æ ¼å¼æå¥½å DirectX å±ç¸åï¼å¦æ­¤æè½è·åæä½³æ§è½ãç±äº Angle å±æ¯åè½¬åï¼å èå¯¹äºä¸äºç»çº¯è²çæä»¤æ¥è¯´ï¼å³ä½¿é¢è²æ ¼å¼ä¸ç¸åï¼ä¹ä¸ä¼å­å¨æèãä½æ¯å¦ææ¶åå°æäºè¡¨é¢çº¹ççå¤çï¼å°±å¯è½éè¦ GPU ç¨å¾®å¨å·¥æ§è¡ä¸äºè½¬æ¢é»è¾</p>
<pre><code class="language-csharp">                // é¢è²æ ¼å¼ååé¢å®ä¹ç Format colorFormat = Format.B8G8R8A8_UNorm; ç¸å¯¹åº
                var colorType = SKColorType.Bgra8888;
</code></pre>
<p>æ ¹æ®é¢è²æ ¼å¼ï¼æ¥è¯¢å¨å½å GPU/é©±å¨/åç«¯(OpenGL/GLES) + æå®é¢è²æ ¼å¼ä¸ï¼æå¤æ¯æå¤å°ä¸ª MSAA éæ ·æ°ï¼sample count è½å¤æ¯æçæå¤§å¤ééæ ·æ°ï¼ç¨äºåå»ºæ¸²æç®æ  surface è¡¨é¢</p>
<pre><code class="language-csharp">                var maxSamples = grContext.GetMaxSurfaceSampleCount(colorType);
</code></pre>
<p>æ­£å¸¸æ¥è¯´ï¼é½ä¼è®¾ç½®ä¸ä¸ªéæ ·ä¸éï¼éæ ·æ°éè¶å¤§ï¼è´¨éè¶å¥½ï¼ä½æ¯æ§è½æèè¶å¤§ãå¨æ¬æè¿éä½ä¸ºæ¼ç¤ºä»£ç ï¼å°±è·³è¿è¿ä¸æ­¥ï¼æå¤å¥½å°±ç¨å¤å¥½</p>
<p>æé  GRGlFramebufferInfo ç»æä½ï¼ç¨äºåè¯ Skia åå¤ç»å°åªä¸ª OpenGL FBOï¼Framebuffer Objectï¼ ä¸ï¼ä»¥åè¿ä¸ª FBO ï¼Framebuffer Objectï¼çé¢è²æ ¼å¼æ¯ä»ä¹ãååå»º GRBackendRenderTarget å¯¹è±¡ï¼ä¼ å¥å°ºå¯¸ä¿¡æ¯ï¼éæ ·ä¿¡æ¯ï¼åå¥½å¯¹æ¥çåå¤</p>
<pre><code class="language-csharp">                var glInfo = new GRGlFramebufferInfo((uint)fb, colorType.ToGlSizedFormat());
                // ä» OpenGL å¯¹æ¥å° Skia ä¸
                using (var renderTarget = new GRBackendRenderTarget(clientSize.Width,
                           clientSize.Height, maxSamples, eglDisplay.StencilSize, glInfo))
                {
                    ...
                }
</code></pre>
<p>éè¿ <code>SKSurface.Create</code> åå»ºåº <code>SKSurface</code> å¯¹è±¡ï¼ä»èè·åå° SKCanvas ç»æ¿</p>
<pre><code class="language-csharp">                using (var renderTarget = new GRBackendRenderTarget(clientSize.Width,
                           clientSize.Height, maxSamples, eglDisplay.StencilSize, glInfo))
                {
                    var surfaceProperties = new SKSurfaceProperties(SKPixelGeometry.RgbHorizontal);

                    using (var skSurface = SKSurface.Create(grContext, renderTarget, GRSurfaceOrigin.TopLeft,
                               colorType,
                               surfaceProperties))
                    {
                        using (SKCanvas skCanvas = skSurface.Canvas)
                        {
                            // å¨è¿éå°±æ¿å° SKCanvas å¦ï¼å¯ä»¥å¼å§ç»å¶åå®¹äº
                            ...
                        }
                    }
                }
</code></pre>
<p>æ¿å°äº Skia çæ ¸å¿å¥å£ SKCanvas ç±»ï¼æ¥ä¸æ¥çç»å¶é»è¾å°±å¨é¢å Skia äºï¼å¯ä»¥æ è§åé¢çåç§å¯¹æ¥æ¹é»è¾ï¼ä¸ç®¡å¯¹æ¥æ¹æ¯ ANGLE çè¿æ¯ç´æ¥è½¯æ¸²çç­ç­ãç»å¶çé»è¾åªéè¦ç®¡ SKCanvas ç»å¸å°±å¯ä»¥äº</p>
<p>å¨æ¬æè¿éï¼åäºä¸ç¹ç¤ºä¾ä»£ç ï¼ç¨äºç»å¶ä¸ä¸ªæ¼äº®ççé¢ï¼é¡ºå¸¦ä¹ç¨äºæµè¯å¸§ç</p>
<pre><code class="language-csharp">record SkiaRenderDemo(SizeI ClientSize)
{
    // æ­¤ä¸ºè°è¯ä»£ç ï¼ç»å¶ä¸äºç©å½¢æ¡
    private List&lt;RenderInfo&gt;? _renderList;

    public void Draw(SKCanvas canvas)
    {
        var rectWeight = 10;
        var rectHeight = 20;

        var margin = 5;

        if (_renderList is null)
        {
            // å¦ææ¯ç©ºï¼é£å°±æ§è¡åå§å
            _renderList = new List&lt;RenderInfo&gt;();

            for (int top = margin; top &lt; ClientSize.Height - rectHeight - margin; top += rectHeight + margin)
            {
                var skRect = new SKRect(margin, top, margin + rectWeight, top + rectHeight);
                var color = new SKColor((uint)Random.Shared.Next()).WithAlpha(0xFF);
                var step = Random.Shared.Next(1, 20);
                var renderInfo = new RenderInfo(skRect, step, color);

                _renderList.Add(renderInfo);
            }
        }

        using var skPaint = new SKPaint();
        skPaint.Style = SKPaintStyle.Fill;
        for (var i = 0; i &lt; _renderList.Count; i++)
        {
            var renderInfo = _renderList[i];
            skPaint.Color = renderInfo.Color;

            canvas.DrawRect(renderInfo.Rect, skPaint);

            var nextRect = renderInfo.Rect with
            {
                Right = renderInfo.Rect.Right + renderInfo.Step
            };
            if (nextRect.Right &gt; ClientSize.Width - margin)
            {
                nextRect = nextRect with
                {
                    Right = nextRect.Left + rectWeight
                };
            }

            _renderList[i] = renderInfo with
            {
                Rect = nextRect
            };
        }
    }

    private readonly record struct RenderInfo(SKRect Rect, int Step, SKColor Color);
}
</code></pre>
<p>ä»¥ä¸åªæ¯ä¸ºæµè¯ä»£ç ï¼å¤§å®¶å¯ä»¥ç¼åèªå·±ççé¢ç»å¶é»è¾</p>
<h2 id="å·æ°çé¢">å·æ°çé¢</h2>
<p>å®æç»å¶ä¹åï¼è¿éè¦å°ç»é¢æ¨éåºå»ï¼è®©åç¼å­äº¤æ¢ä¸ä¸ï¼ä»£ç å¦ä¸</p>
<pre><code class="language-csharp">                using (var renderTarget = new GRBackendRenderTarget(clientSize.Width,
                           clientSize.Height, maxSamples, eglDisplay.StencilSize, glInfo))
                {
                    var surfaceProperties = new SKSurfaceProperties(SKPixelGeometry.RgbHorizontal);

                    using (var skSurface = SKSurface.Create(grContext, renderTarget, GRSurfaceOrigin.TopLeft,
                               colorType,
                               surfaceProperties))
                    {
                        using (SKCanvas skCanvas = skSurface.Canvas)
                        {
                            // éä¾¿ç»åå®¹
                            skCanvas.Clear();
                            renderDemo.Draw(skCanvas);
                        }
                    }
                }

                // å¦æå¼å¯æ¸²æåæ­¥ç­å¾ï¼åä¼å¨è¿éç­å¾
                grContext.Flush();

                // è®© OpenGL å±å·åºå»
                eglContext.GlInterface.Flush();
                eglInterface.WaitGL();
                eglSurface.SwapBuffers();

                eglInterface.WaitClient();
                eglInterface.WaitGL();
                eglInterface.WaitNative(EglConsts.EGL_CORE_NATIVE_ENGINE);

                // è®©äº¤æ¢é¾æ¨é
                swapChain.Present(1, PresentFlags.None);
</code></pre>
<p>æ¨éçé»è¾æ¯ä¸çº§çº§çï¼åæ¯ Skia å±éè¿ <code>grContext.Flush</code> å°ç»å¶å½ä»¤å·åºå»å° OpenGL å±ãå¨ OpenGL å±éè¿ <code>GlInterface.Flush</code> å <code>SwapBuffers</code> ç­å®æç»å¶ãæååç± DirectX çäº¤æ¢é¾ Present å°ç»é¢æäº¤ç»å°å±å¹</p>
<p>ä»¥ä¸å°±æ¯ä¸ä¸ªæç®çå¯¹æ¥å®ç°ï¼éè¿ ANGLE çè½åï¼è®© Skia å¯ä»¥è°ç¨å° DirectX è¿è¡æ¸²æï¼æå¤§æåæ¸²ææ§è½</p>
<p>ä¹ä»æ­¤è¿ç¨å¯ä»¥çå°ï¼æ²¡æéæ±è¦å° Buffer ä» GPU æ·è´å° CPU ä¸ï¼å¯ä»¥å¨è¿ç¨é½åçå¨ GPU ä¸­ãå°è¯å®éè¿è¡ä»£ç ï¼ä¹å¯ä»¥çå° CPU æ¥è¿ä¸å¨ï¼è GPU å¨å¹²æ´»</p>
<p>æ¬æçå®ç°æ¹æ³æ¯æä» Avalonia æ¡æ¶éé¢å­¦å°çï¼æå¯¹ OpenGL éçï¼å¯¹ DirectX äºè§£ãéè¿éè¯» Avalonia æ¡æ¶æºä»£ç ï¼æå­¦ä¹ äºæ­¤å¯¹æ¥è¿ç¨</p>
<h2 id="æ ¸å¿ä»£ç ">æ ¸å¿ä»£ç </h2>
<p>ä»¥ä¸æ¯ <code>Program.cs</code> æä»¶çå¨é¨ä»£ç </p>
<pre><code class="language-csharp">using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Runtime.InteropServices;
using Windows.Win32.Foundation;
using Windows.Win32.Graphics.Gdi;
using Windows.Win32.UI.WindowsAndMessaging;
using KurbawjeleJarlayenel.Diagnostics;
using KurbawjeleJarlayenel.OpenGL;
using KurbawjeleJarlayenel.OpenGL.Angle;
using KurbawjeleJarlayenel.OpenGL.Egl;
using SkiaSharp;
using Vortice.Direct3D;
using Vortice.Direct3D11;
using Vortice.DXGI;
using Vortice.Mathematics;
using static Windows.Win32.PInvoke;

namespace KurbawjeleJarlayenel;

class Program
{
    [STAThread]
    static unsafe void Main(string[] args)
    {
        // åå»ºçªå£
        var window = CreateWindow();
        // æ¾ç¤ºçªå£
        ShowWindow(window, SHOW_WINDOW_CMD.SW_NORMAL);

        // åå§åæ¸²æ
        // åå§å DX ç¸å³
        #region åå§å DX ç¸å³

        var dxgiFactory2 = DXGI.CreateDXGIFactory1&lt;IDXGIFactory2&gt;();

        IDXGIAdapter1? hardwareAdapter = GetHardwareAdapter(dxgiFactory2)
            // è¿é ToList åªæ¯æ³ååºææç IDXGIAdapter1 å¨å®éä»£ç éï¼å¤§é¨åé½æ¯è·åç¬¬ä¸ä¸ª
            .ToList().FirstOrDefault();
        if (hardwareAdapter == null)
        {
            throw new InvalidOperationException("Cannot detect D3D11 adapter");
        }

        FeatureLevel[] featureLevels = new[]
        {
            FeatureLevel.Level_11_1,
            FeatureLevel.Level_11_0,
            FeatureLevel.Level_10_1,
            FeatureLevel.Level_10_0,
            FeatureLevel.Level_9_3,
            FeatureLevel.Level_9_2,
            FeatureLevel.Level_9_1,
        };

        IDXGIAdapter1 adapter = hardwareAdapter;
        DeviceCreationFlags creationFlags = DeviceCreationFlags.BgraSupport;
        var result = D3D11.D3D11CreateDevice
        (
            adapter,
            DriverType.Unknown,
            creationFlags,
            featureLevels,
            out ID3D11Device d3D11Device, out FeatureLevel featureLevel,
            out ID3D11DeviceContext d3D11DeviceContext
        );

        _ = featureLevel;

        result.CheckError();

        // å¤§é¨åæåµä¸ï¼ç¨çæ¯ ID3D11Device1 å ID3D11DeviceContext1 ç±»å
        // ä» ID3D11Device è½¬æ¢ä¸º ID3D11Device1 ç±»å
        ID3D11Device1 d3D11Device1 = d3D11Device.QueryInterface&lt;ID3D11Device1&gt;();
        var d3D11DeviceContext1 = d3D11DeviceContext.QueryInterface&lt;ID3D11DeviceContext1&gt;();
        _ = d3D11DeviceContext1;

        // è·åå°äºæ°çä¸¤ä¸ªæ¥å£ï¼å°±å¯ä»¥åå° `d3D11Device` å `d3D11DeviceContext` çå¼ç¨è®¡æ°ãè°ç¨ Dispose ä¸ä¼éæ¾æåæç³è¯·ç D3D èµæºï¼åªæ¯åå°å¼ç¨è®¡æ°
        d3D11Device.Dispose();
        d3D11DeviceContext.Dispose();

        RECT windowRect;
        GetClientRect(window, &amp;windowRect);
        var clientSize = new SizeI(windowRect.right - windowRect.left, windowRect.bottom - windowRect.top);

        // é¢è²æ ¼å¼æè¦æ±ï¼æè½å Angle æ­£ç¡®äº¤äº
        Format colorFormat = Format.B8G8R8A8_UNorm;

        // ç¼å­çæ°éï¼åæ¬åç¼å­ãå¤§é¨ååºç¨æ¥è¯´ï¼è³å°éè¦ä¸¤ä¸ªç¼å­ï¼è¿ä¸ªç©è¿æ¸¸æçä¼ä¼´é½ç¥é
        const int frameCount = 2;
        SwapChainDescription1 swapChainDescription = new()
        {
            Width = (uint)clientSize.Width,
            Height = (uint)clientSize.Height,
            Format = colorFormat, // B8G8R8A8_UNorm
            BufferCount = frameCount,
            BufferUsage = Usage.RenderTargetOutput,
            SampleDescription = SampleDescription.Default,
            Scaling = Scaling.Stretch,
            SwapEffect = SwapEffect.FlipSequential,
            AlphaMode = AlphaMode.Ignore,
            Flags = SwapChainFlags.None,
        };

        var fullscreenDescription = new SwapChainFullscreenDescription()
        {
            Windowed = true,
        };

        IDXGISwapChain1 swapChain =
            dxgiFactory2.CreateSwapChainForHwnd(d3D11Device1, window, swapChainDescription, fullscreenDescription);

        // ä¸è¦è¢«æä¸ alt+enter è¿å¥å¨å±
        dxgiFactory2.MakeWindowAssociation(window,
            WindowAssociationFlags.IgnoreAltEnter | WindowAssociationFlags.IgnorePrintScreen);

        #endregion

        // åå§å Angle å OpenGL ç¸å³

        #region åå§å Angle ç¸å³

        var egl = new Win32AngleEglInterface();
        // ä¼ å¥ ID3D11Device1 çæéï¼å° D3D11 è®¾å¤å AngleDevice ç»å®
        var angleDevice = egl.CreateDeviceANGLE(EglConsts.EGL_D3D11_DEVICE_ANGLE, d3D11Device1.NativePointer, null);
        var display = egl.GetPlatformDisplayExt(EglConsts.EGL_PLATFORM_DEVICE_EXT, angleDevice, null);

        var angleWin32EglDisplay = new AngleWin32EglDisplay(display, egl);

        EglContext eglContext = angleWin32EglDisplay.CreateContext();

        var makeCurrent = eglContext.MakeCurrent();

        var grGlInterface = GRGlInterface.CreateGles(proc =&gt;
        {
            var procAddress = eglContext.GlInterface.GetProcAddress(proc);
            return procAddress;
        });

        var grContext = GRContext.CreateGl(grGlInterface, new GRContextOptions()
        {
            AvoidStencilBuffers = true
        });
        makeCurrent.Dispose();

        #endregion

        // éè¿ Angle å³è DX å OpenGL çº¹ç

        #region å³è DX å OpenGL çº¹ç

        // åä»äº¤æ¢é¾ååºæ¸²æç®æ çº¹ç
        ID3D11Texture2D d3D11Texture2D = swapChain.GetBuffer&lt;ID3D11Texture2D&gt;(0);
        Debug.Assert(d3D11Texture2D.Description.Width == clientSize.Width);
        Debug.Assert(d3D11Texture2D.Description.Height == clientSize.Height);

        // å³é®ä»£ç ï¼ éè¿ eglCreatePbufferFromClientBuffer å° D3D11 çº¹çåè£ä¸º EGLSurface
        // è¿ä¸æ­¥çåç½®æ¯å¨ eglCreateDeviceANGLE éé¢å° ID3D11Texture2D æå¨ç D3D11 è®¾å¤å³èï¼ `egl.CreateDeviceANGLE(EglConsts.EGL_D3D11_DEVICE_ANGLE, d3D11Device1.NativePointer, null)`
        EglSurface eglSurface =
            angleWin32EglDisplay.WrapDirect3D11Texture(d3D11Texture2D.NativePointer, 0, 0,
                (int)d3D11Texture2D.Description.Width, (int)d3D11Texture2D.Description.Height);

        // åç»­ Skia ä¹è®¸ä¼ä½¿ç¨ Graphite ç Dawn æ¯æ D3D èä¸æ¯ EGL çæ¹å¼
        // &gt; Current plans for Graphite are to support D3D11 and D3D12 through the Dawn backend.
        // è¯¦ç»è¯·ç
        // https://groups.google.com/g/skia-discuss/c/WY7yzRjGGFA
        // &gt; GaneshåGraphiteæ¯ä¸¤ç»ææ¯ï¼Ganeshæ´èæ´ç¨³å®ï¼Graphiteæ´æ°ãæ´å¿«ï¼å¤çº¿ç¨æ¯ææ´å¥½ï¼ãæ´ä¸ç¨³å®ï¼ä½å®æ¯è¶å¿ï¼æ¯Skiaå¢éçä¸»æ»æ¹åãChromeå·²ç»å¨ä¸ªå«å°æ¹ä½¿ç¨Graphiteäº
        // https://zhuanlan.zhihu.com/p/20265941170

        #endregion

        SkiaRenderDemo renderDemo = new(clientSize);

        while (true)
        {
            // çé¢æ¸²æ
            using var step = StepPerformanceCounter.RenderThreadCounter.StepStart("Render");

            // ä»¥ä¸æ¯æ¯æ¬¡ç»é¢æ¸²ææ¶é½è¦æ§è¡çé»è¾
            // å° EGLSurface ç»å®å° Skia ä¸
            using (eglContext.MakeCurrent(eglSurface))
            {
                EglInterface eglInterface = angleWin32EglDisplay.EglInterface;
                Debug.Assert(ReferenceEquals(egl, eglInterface));

                eglInterface.WaitClient();
                eglInterface.WaitGL();
                eglInterface.WaitNative(EglConsts.EGL_CORE_NATIVE_ENGINE);

                eglContext.GlInterface.BindFramebuffer(GlConsts.GL_FRAMEBUFFER, 0);

                eglContext.GlInterface.GetIntegerv(GlConsts.GL_FRAMEBUFFER_BINDING, out var fb);
                // é¢è²æ ¼å¼ååé¢å®ä¹ç Format colorFormat = Format.B8G8R8A8_UNorm; ç¸å¯¹åº
                var colorType = SKColorType.Bgra8888;
                // å½ç¶ï¼åæ SKColorType.Rgba8888 ä¹æ¯è½è¢«å¼å®¹ç
                // https://github.com/AvaloniaUI/Avalonia/discussions/20559
                grContext.ResetContext();

                var maxSamples = grContext.GetMaxSurfaceSampleCount(colorType);

                EglDisplay eglDisplay = angleWin32EglDisplay;

                var glInfo = new GRGlFramebufferInfo((uint)fb, colorType.ToGlSizedFormat());
                // ä» OpenGL å¯¹æ¥å° Skia ä¸
                using (var renderTarget = new GRBackendRenderTarget(clientSize.Width,
                           clientSize.Height, maxSamples, eglDisplay.StencilSize, glInfo))
                {
                    var surfaceProperties = new SKSurfaceProperties(SKPixelGeometry.RgbHorizontal);

                    using (var skSurface = SKSurface.Create(grContext, renderTarget, GRSurfaceOrigin.TopLeft,
                               colorType,
                               surfaceProperties))
                    {
                        using (SKCanvas skCanvas = skSurface.Canvas)
                        {
                            // éä¾¿ç»åå®¹
                            skCanvas.Clear();
                            renderDemo.Draw(skCanvas);
                        }
                    }
                }

                // å¦æå¼å¯æ¸²æåæ­¥ç­å¾ï¼åä¼å¨è¿éç­å¾
                grContext.Flush();

                // è®© OpenGL å±å·åºå»
                eglContext.GlInterface.Flush();
                eglInterface.WaitGL();
                eglSurface.SwapBuffers();

                eglInterface.WaitClient();
                eglInterface.WaitGL();
                eglInterface.WaitNative(EglConsts.EGL_CORE_NATIVE_ENGINE);

                // è®©äº¤æ¢é¾æ¨é
                swapChain.Present(1, PresentFlags.None);
            }

            // ä»¥ä¸åªæ¯ä¸ºäºé²æ­¢çªå£æ ååºèå·²
            var success = PeekMessage(out var msg, HWND.Null, 0, 0, PEEK_MESSAGE_REMOVE_TYPE.PM_REMOVE);
            if (success)
            {
                // å¤ççªå£æ¶æ¯
                TranslateMessage(&amp;msg);
                DispatchMessage(&amp;msg);
            }
        }

        Console.ReadLine();
    }

    private static unsafe HWND CreateWindow()
    {
        DwmIsCompositionEnabled(out var compositionEnabled);

        if (!compositionEnabled)
        {
            Console.WriteLine($"æ æ³å¯ç¨éæçªå£ææ");
        }

        WINDOW_EX_STYLE exStyle = WINDOW_EX_STYLE.WS_EX_OVERLAPPEDWINDOW;

        var style = WNDCLASS_STYLES.CS_OWNDC | WNDCLASS_STYLES.CS_HREDRAW | WNDCLASS_STYLES.CS_VREDRAW;

        var defaultCursor = LoadCursor(
            new HINSTANCE(IntPtr.Zero), new PCWSTR(IDC_ARROW.Value));

        var className = $"lindexi-{Guid.NewGuid().ToString()}";
        var title = "The Title";
        fixed (char* pClassName = className)
        fixed (char* pTitle = title)
        {
            var wndClassEx = new WNDCLASSEXW
            {
                cbSize = (uint)Marshal.SizeOf&lt;WNDCLASSEXW&gt;(),
                style = style,
                lpfnWndProc = new WNDPROC(WndProc),
                hInstance = new HINSTANCE(GetModuleHandle(null).DangerousGetHandle()),
                hCursor = defaultCursor,
                hbrBackground = new HBRUSH(IntPtr.Zero),
                lpszClassName = new PCWSTR(pClassName)
            };
            ushort atom = RegisterClassEx(in wndClassEx);

            var dwStyle = WINDOW_STYLE.WS_OVERLAPPEDWINDOW;

            var windowHwnd = CreateWindowEx(
                exStyle,
                new PCWSTR((char*)atom),
                new PCWSTR(pTitle),
                dwStyle,
                0, 0, 1900, 1000,
                HWND.Null, HMENU.Null, HINSTANCE.Null, null);

            return windowHwnd;
        }

        static LRESULT WndProc(HWND hwnd, uint message, WPARAM wParam, LPARAM lParam)
        {
            WindowsMessage windowsMessage = (WindowsMessage)message;
            if (windowsMessage == WindowsMessage.WM_CLOSE)
            {
                Environment.Exit(0);
            }

            return DefWindowProc(hwnd, message, wParam, lParam);
        }
    }

    private static IEnumerable&lt;IDXGIAdapter1&gt; GetHardwareAdapter(IDXGIFactory2 factory)
    {
        using IDXGIFactory6? factory6 = factory.QueryInterfaceOrNull&lt;IDXGIFactory6&gt;();
        if (factory6 != null)
        {
            // è¿ä¸ªç³»ç»ç DX æ¯æ IDXGIFactory6 ç±»å
            // ååè¯ç³»ç»ï¼è¦é«æ§è½çæ¾å¡
            for (uint adapterIndex = 0;
                 factory6.EnumAdapterByGpuPreference(adapterIndex, GpuPreference.HighPerformance,
                     out IDXGIAdapter1? adapter).Success;
                 adapterIndex++)
            {
                if (adapter == null)
                {
                    continue;
                }

                AdapterDescription1 desc = adapter.Description1;
                if ((desc.Flags &amp; AdapterFlags.Software) != AdapterFlags.None)
                {
                    // Don't select the Basic Render Driver adapter.
                    adapter.Dispose();
                    continue;
                }

                yield return adapter;
            }
        }
        else
        {
            // ä¸æ¯æå°±ä¸æ¯æå¯ï¼ç¨æ§çæ¬çæ¹å¼è·åæ¾ç¤ºééå¨æ¥å£
        }

        // å¦ææä¸¾ä¸å°ï¼é£ç³»ç»è¿åå¥é½å¯ä»¥
        for (uint adapterIndex = 0;
             factory.EnumAdapters1(adapterIndex, out IDXGIAdapter1? adapter).Success;
             adapterIndex++)
        {
            AdapterDescription1 desc = adapter.Description1;

            if ((desc.Flags &amp; AdapterFlags.Software) != AdapterFlags.None)
            {
                // Don't select the Basic Render Driver adapter.
                adapter.Dispose();

                continue;
            }

            yield return adapter;
        }
    }
}

record SkiaRenderDemo(SizeI ClientSize)
{
    // æ­¤ä¸ºè°è¯ä»£ç ï¼ç»å¶ä¸äºç©å½¢æ¡
    private List&lt;RenderInfo&gt;? _renderList;

    public void Draw(SKCanvas canvas)
    {
        var rectWeight = 10;
        var rectHeight = 20;

        var margin = 5;

        if (_renderList is null)
        {
            // å¦ææ¯ç©ºï¼é£å°±æ§è¡åå§å
            _renderList = new List&lt;RenderInfo&gt;();

            for (int top = margin; top &lt; ClientSize.Height - rectHeight - margin; top += rectHeight + margin)
            {
                var skRect = new SKRect(margin, top, margin + rectWeight, top + rectHeight);
                var color = new SKColor((uint)Random.Shared.Next()).WithAlpha(0xFF);
                var step = Random.Shared.Next(1, 20);
                var renderInfo = new RenderInfo(skRect, step, color);

                _renderList.Add(renderInfo);
            }
        }

        using var skPaint = new SKPaint();
        skPaint.Style = SKPaintStyle.Fill;
        for (var i = 0; i &lt; _renderList.Count; i++)
        {
            var renderInfo = _renderList[i];
            skPaint.Color = renderInfo.Color;

            canvas.DrawRect(renderInfo.Rect, skPaint);

            var nextRect = renderInfo.Rect with
            {
                Right = renderInfo.Rect.Right + renderInfo.Step
            };
            if (nextRect.Right &gt; ClientSize.Width - margin)
            {
                nextRect = nextRect with
                {
                    Right = nextRect.Left + rectWeight
                };
            }

            _renderList[i] = renderInfo with
            {
                Rect = nextRect
            };
        }
    }

    private readonly record struct RenderInfo(SKRect Rect, int Step, SKColor Color);
}
</code></pre>
<h2 id="å¨é¨ä»£ç ">å¨é¨ä»£ç </h2>
<p>æ¬æä»£ç æ¾å¨ <a href="https://github.com/lindexi/lindexi_gd/tree/6bd17b7dcb57c5c0bc0958c7428ba589733ba71f/DirectX/Angle/KurbawjeleJarlayenel" target="_blank" rel="noopener nofollow">github</a> å <a href="https://gitee.com/lindexi/lindexi_gd/tree/6bd17b7dcb57c5c0bc0958c7428ba589733ba71f/DirectX/Angle/KurbawjeleJarlayenel" target="_blank" rel="noopener nofollow">gitee</a> ä¸ï¼å¯ä»¥ä½¿ç¨å¦ä¸å½ä»¤è¡æåä»£ç ãææ´ä¸ªä»£ç ä»åºæ¯è¾åºå¤§ï¼ä½¿ç¨ä»¥ä¸å½ä»¤è¡å¯ä»¥è¿è¡é¨åæåï¼æåéåº¦æ¯è¾å¿«</p>
<p>ååå»ºä¸ä¸ªç©ºæä»¶å¤¹ï¼æ¥çä½¿ç¨å½ä»¤è¡ cd å½ä»¤è¿å¥æ­¤ç©ºæä»¶å¤¹ï¼å¨å½ä»¤è¡éé¢è¾å¥ä»¥ä¸ä»£ç ï¼å³å¯è·åå°æ¬æçä»£ç </p>
<pre><code>git init
git remote add origin https://gitee.com/lindexi/lindexi_gd.git
git pull origin 6bd17b7dcb57c5c0bc0958c7428ba589733ba71f
</code></pre>
<p>ä»¥ä¸ä½¿ç¨çæ¯å½åç gitee çæºï¼å¦æ gitee ä¸è½è®¿é®ï¼è¯·æ¿æ¢ä¸º github çæºãè¯·å¨å½ä»¤è¡ç»§ç»­è¾å¥ä»¥ä¸ä»£ç ï¼å° gitee æºæ¢æ github æºè¿è¡æåä»£ç ãå¦æä¾ç¶æåä¸å°ä»£ç ï¼å¯ä»¥åé®ä»¶åæè¦ä»£ç </p>
<pre><code>git remote remove origin
git remote add origin https://github.com/lindexi/lindexi_gd.git
git pull origin 6bd17b7dcb57c5c0bc0958c7428ba589733ba71f
</code></pre>
<p>è·åä»£ç ä¹åï¼è¿å¥ DirectX/Angle/KurbawjeleJarlayenel æä»¶å¤¹ï¼å³å¯è·åå°æºä»£ç </p>
<h2 id="æ´å¤åå®¢">æ´å¤åå®¢</h2>
<p>æ¸²æé¨åï¼å³äº SharpDx å Vortice çä½¿ç¨æ¹æ³ï¼åæ¬å¥é¨çº§æç¨ï¼è¯·åéï¼</p>
<ul>
<li><a href="https://blog.lindexi.com/post/WPF-%E4%BD%BF%E7%94%A8-SharpDx-%E6%B8%B2%E6%9F%93%E5%8D%9A%E5%AE%A2%E5%AF%BC%E8%88%AA.html" target="_blank" rel="noopener nofollow">æ¸²æåå®¢å¯¼èª</a></li>
<li><a href="https://blog.lindexi.com/post/sharpdx.html" target="_blank" rel="noopener nofollow">SharpDX ç³»å</a></li>
</ul>
<p>æ´å¤å³äºæåå®¢è¯·åé <a href="https://blog.lindexi.com/post/%E5%8D%9A%E5%AE%A2%E5%AF%BC%E8%88%AA.html" target="_blank" rel="noopener nofollow">åå®¢å¯¼èª</a></p>


</div>
<div id="MySignature" role="contentinfo">
    <p>åå®¢å­åå®¢åªåå¤ä»½ï¼åå®¢åå¸å°±ä¸åæ´æ°ï¼å¦ææ³çææ°åå®¢ï¼è¯·è®¿é® https://blog.lindexi.com/</p>

<p>å¦å¾ççä¸è§ï¼è¯·å¨æµè§å¨å¼å¯ä¸å®å¨httpåå®¹å¼å®¹</p>

<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="ç¥è¯å±äº«è®¸å¯åè®®" style="border-width: 0" src="https://licensebuttons.net/l/by-nc-sa/4.0/88x31.png"></a><br>æ¬ä½åéç¨<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">ç¥è¯å±äº«ç½²å-éåä¸æ§ä½¿ç¨-ç¸åæ¹å¼å±äº« 4.0 å½éè®¸å¯åè®®</a>è¿è¡è®¸å¯ãæ¬¢è¿è½¬è½½ãä½¿ç¨ãéæ°åå¸ï¼ä½å¡å¿ä¿çæç« ç½²å[æå¾·ç](https://www.cnblogs.com/lindexi)(åå«é¾æ¥:https://www.cnblogs.com/lindexi )ï¼ä¸å¾ç¨äºåä¸ç®çï¼åºäºæ¬æä¿®æ¹åçä½åå¡å¿ä»¥ç¸åçè®¸å¯åå¸ãå¦æä»»ä½çé®ï¼è¯·ä¸æ[èç³»](mailto:lindexi_gd@163.com)ã
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-09 08:39">2026-02-09 08:39</span>&nbsp;
<a href="https://www.cnblogs.com/lindexi">lindexi</a>&nbsp;
éè¯»(<span id="post_view_count">95</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19593476);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19593476', targetLink: 'https://www.cnblogs.com/lindexi/p/19593476', title: 'dotnet Vortice éè¿ Angle å° Skia å DirectX å¯¹æ¥' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ MAFå¿«éå¥é¨ï¼15ï¼Agentè°è¯å©å¨ï¼DevUI ]]></title>
    <link>https://www.cnblogs.com/edisontalk/p/-/quick-start-on-maf-chatper15</link>
    <guid>0d4bf187e29fb7c980a559feea18c608</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/edisontalk/p/-/quick-start-on-maf-chatper15" title="åå¸äº 2026-02-09 08:30">
    <span role="heading" aria-level="2">MAFå¿«éå¥é¨ï¼15ï¼Agentè°è¯å©å¨ï¼DevUI</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/381412/202602/381412-20260206203907269-1893526876.png" alt="MAFå¿«éå¥é¨ï¼15ï¼Agentè°è¯å©å¨ï¼DevUI" class="desc_img">
        DevUI æ¯ä¸ä¸ªå¼ç®±å³ç¨çäº¤äºå¼ Web è°è¯çé¢ï¼æ éé¢å¤å¼åï¼å¯ç¨åå°±è½å¯è§åæµè¯ãè°è¯ AI ä»£çï¼ä» Agent åè¡¨æ¥çãå·¥å·è°ç¨éªè¯å°å·¥ä½æµæµè½¬ï¼å¨æµç¨å¯è§åï¼è®© AI æºè½ä½å¼åä» âç²è°â å âæè°âãæ¬æä»ç»äºDevUIæ¯ä»ä¹ï¼å®æä»ä¹æ ·çä¼å¿ï¼éåä»ç»äºå¦ä½å¨MAFä¸­å¿«ééæDevUIç¨äºå¼åè°è¯è·å¾åå¥½çå¼åè°è¯ä½éªã
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p><span><span>å¤§å®¶å¥½ï¼ææ¯Edisonã</span></span></p>
<p><span><span>æè¿æä¸ç´å¨è·çå£æ°çã<a class="normal_text_link mp_article_text_link" href="https://mp.weixin.qq.com/s?__biz=MzA4NzQzNTg4Ng==&amp;mid=2651744458&amp;idx=1&amp;sn=139f7584e81aeecd0945133bdc2b4791&amp;scene=21#wechat_redirect" target="_blank" data-itemshowtype="0" data-linktype="2" rel="noopener nofollow"><span>.NET+AIæºè½ä½å¼åè¿é¶</span></a><span>ãè¯¾ç¨å­¦ä¹ MAFå¼åå¤æºè½ä½å·¥ä½æµï¼æå¼ºçæ¨èä½ ä¹ä¸è½¦è·æä¸èµ·åºåï¼</span></span></span></p>
<p><span><a class="normal_text_link mp_article_text_link" href="https://www.cnblogs.com/edisontalk/p/-/quick-start-on-maf-chatper14" target="_blank" data-itemshowtype="0" data-linktype="2"><span>ä¸ä¸ç¯</span></a><span>ï¼æä»¬å­¦ä¹ äºMAFä¸­<span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;p&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;margin: 8px;padding: 0px;outline: 0px;max-width: 100%;color: rgb(34, 34, 34);font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.544px;orphans: 2;text-indent: 0px;text-transform: none;white-space: normal;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;font-family: -apple-system-font, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;PingFang SC\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;min-height: 1em;text-align: justify;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;span&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;font-family: system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;PingFang SC\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 15px;letter-spacing: 0.544px;text-align: left;caret-color: var(--weui-BRAND);&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span>å¿«ééæA2A (Agent to Agent)<span><span>ãæ¬ç¯ï¼æä»¬æ¥äºè§£ä¸å¨MAFæä¾çè°è¯å©å¨ï¼DevUIã</span></span></span></span></span></span></p>
<h1><strong>1 ä»ä¹æ¯DevUI</strong></h1>
<p><span><span><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;p&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;margin: 8px;padding: 0px;outline: 0px;max-width: 100%;color: rgb(34, 34, 34);font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.544px;orphans: 2;text-indent: 0px;text-transform: none;white-space: normal;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;font-family: -apple-system-font, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;PingFang SC\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;min-height: 1em;text-align: justify;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;span&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;font-family: system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;PingFang SC\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 15px;letter-spacing: 0.544px;text-align: left;caret-color: var(--weui-BRAND);&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span><span><span><span data-pm-slice="0 0 []"><span><span>DevUI æ¯ä¸ä¸ªå¼ç®±å³ç¨ç<span><strong>äº¤äºå¼ Web è°è¯çé¢</strong><span>ï¼æ éé¢å¤å¼åï¼å¯ç¨åå°±è½å¯è§åæµè¯ãè°è¯ AI ä»£çï¼ä» Agent åè¡¨æ¥çãå·¥å·è°ç¨éªè¯å°å·¥ä½æµæµè½¬ï¼å¨æµç¨å¯è§åï¼<span>è®© AI æºè½ä½å¼åä» âç²è°â å âæè°â<span>ã</span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;p&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;margin: 8px;padding: 0px;outline: 0px;max-width: 100%;color: rgb(34, 34, 34);font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.544px;orphans: 2;text-indent: 0px;text-transform: none;white-space: normal;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;font-family: -apple-system-font, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;PingFang SC\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;min-height: 1em;text-align: justify;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;span&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;font-family: system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;PingFang SC\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 15px;letter-spacing: 0.544px;text-align: left;caret-color: var(--weui-BRAND);&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">DevUI åè®¸å¼åèï¼</span></p>
<ul class="list-paddingleft-1">
<li>
<p><span>ð§ª&nbsp;<strong>å¨æµè§å¨ä¸­æµè¯ Agent</strong><span>ï¼æ éç¼åå®¢æ·ç«¯ä»£ç å³å¯ä¸ Agent å¯¹è¯ã</span></span></p>
</li>
<li>
<p><span>ð&nbsp;<strong>æ¥çå¯¹è¯åå²</strong><span>ï¼æ¸æ°å±ç¤º User å Agent ä¹é´çæ¶æ¯äº¤äºã</span></span></p>
</li>
<li>
<p><span>ð&nbsp;<strong>è°è¯å¤ Agent ç³»ç»</strong><span>ï¼æ¯æåæ¢ä¸åç Agent å Workflow è¿è¡æµè¯ã</span></span></p>
</li>
<li>
<p><span>ð ï¸&nbsp;<strong>é¶éç½®å¯å¨</strong><span>ï¼åªéç®åçéç½®å³å¯éæå° ASP.NET Core åºç¨ä¸­ã</span></span></p>
</li>
</ul>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;p&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;margin: 8px;padding: 0px;outline: 0px;max-width: 100%;color: rgb(34, 34, 34);font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.544px;orphans: 2;text-indent: 0px;text-transform: none;white-space: normal;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;font-family: -apple-system-font, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;PingFang SC\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;min-height: 1em;text-align: justify;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;span&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;font-family: system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;PingFang SC\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 15px;letter-spacing: 0.544px;text-align: left;caret-color: var(--weui-BRAND);&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">ç»¼ä¸æè¿°ï¼DevUI å°±åæ¯ Agent ç<strong> âæµè§å¨å¼åèå·¥å·â</strong>ï¼è®©ä½ è½å¤ç´è§çå° Agent ç âä¸ä¸¾ä¸å¨âï¼å¿«éè°è¯åå®ä½é®é¢ã</span></p>
<p><span style="text-decoration: underline"><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;p&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;margin: 8px;padding: 0px;outline: 0px;max-width: 100%;color: rgb(34, 34, 34);font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.544px;orphans: 2;text-indent: 0px;text-transform: none;white-space: normal;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;font-family: -apple-system-font, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;PingFang SC\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;min-height: 1em;text-align: justify;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;span&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;font-family: system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;PingFang SC\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 15px;letter-spacing: 0.544px;text-align: left;caret-color: var(--weui-BRAND);&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">ç»å¤é³ï¼DevUI å³ Developer UI, it's For Developers!</span></span></p>
<h1><strong><span>2 å¿«éå¼å§ï¼åå»ºä¸ä¸ªDevUIç¤ºä¾<strong><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;letter-spacing: 0.578px;text-align: left;margin: 8px;&quot;,&quot;data-pm-slice&quot;:&quot;6 3 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;para&quot;,{&quot;tagName&quot;:&quot;p&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;outline: 0px;visibility: visible;line-height: 1.75em;margin-top: 16px;margin-bottom: 16px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;span&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;color: rgb(0, 179, 139);font-family: \&quot;PingFang SC\&quot;, \&quot;Lantinghei SC\&quot;, \&quot;Microsoft Yahei\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft Sans Serif\&quot;, \&quot;WenQuanYi Micro Hei\&quot;, Helvetica, sans-serif;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;span&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;letter-spacing: 0.544px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><br></span></strong></span></strong></h1>
<p data-pm-slice="0 0 []">å¨MAFä¸­æä¾äºä¸ä¸ªåç½®çDevUIç»ä»¶ï¼æä»¬å¯ä»¥éå¸¸æ¹ä¾¿å°åå»ºéæDevUIçAgentåºç¨ã</p>
<p data-pm-slice="0 0 []">æ¥ä¸æ¥ï¼æä»¬å°±ä¸æ­¥ä¸æ­¥å®æä¸ä¸ªDevUIç¤ºä¾ã</p>
<p data-pm-slice="0 0 []">é¦åï¼æä»¬åå»ºä¸ä¸ªASP.NET Webåºç¨ï¼å®è£ä»¥ä¸NuGetåï¼</p>
<div class="cnblogs_code">
<pre>&lt;PackageReference Include=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Microsoft.Agents.AI.OpenAI</span><span style="color: rgba(128, 0, 0, 1)">"</span> Version=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">1.0.0-preview.260128.1</span><span style="color: rgba(128, 0, 0, 1)">"</span> /&gt;
&lt;PackageReference Include=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Microsoft.Agents.AI.Workflows</span><span style="color: rgba(128, 0, 0, 1)">"</span> Version=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">1.0.0-preview.260128.1</span><span style="color: rgba(128, 0, 0, 1)">"</span> /&gt;
&lt;PackageReference Include=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Microsoft.Agents.AI.DevUI</span><span style="color: rgba(128, 0, 0, 1)">"</span> Version=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">1.0.0-preview.260128.1</span><span style="color: rgba(128, 0, 0, 1)">"</span> /&gt;
&lt;PackageReference Include=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Microsoft.Agents.AI.Hosting</span><span style="color: rgba(128, 0, 0, 1)">"</span> Version=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">1.0.0-preview.260128.1</span><span style="color: rgba(128, 0, 0, 1)">"</span> /&gt;
&lt;PackageReference Include=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Microsoft.Agents.AI.Hosting.OpenAI</span><span style="color: rgba(128, 0, 0, 1)">"</span> Version=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">1.0.0-alpha.260128.1</span><span style="color: rgba(128, 0, 0, 1)">"</span> /&gt;
&lt;PackageReference Include=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Microsoft.Extensions.AI.OpenAI</span><span style="color: rgba(128, 0, 0, 1)">"</span> Version=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">10.2.0-preview.1.26063.2</span><span style="color: rgba(128, 0, 0, 1)">"</span> /&gt;</pre>
</div>
<p data-pm-slice="0 0 []">ç¶åï¼å°±æ¯æ´ä¸ªç¤ºä¾çæ ¸å¿é¨åï¼æä»¬ä¸åä¸åæ¥è¯´ï¼</p>
<p>ï¼1ï¼åå»ºå¹¶æ³¨åChatClient</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">var</span> builder =<span style="color: rgba(0, 0, 0, 1)"> WebApplication.CreateBuilder(args);
</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Step0. Load Configuration</span>
<span style="color: rgba(0, 0, 255, 1)">var</span> config = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> ConfigurationBuilder()
    .AddJsonFile($</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">appsettings.json</span><span style="color: rgba(128, 0, 0, 1)">"</span>, optional: <span style="color: rgba(0, 0, 255, 1)">false</span>, reloadOnChange: <span style="color: rgba(0, 0, 255, 1)">true</span><span style="color: rgba(0, 0, 0, 1)">)
    .Build();
</span><span style="color: rgba(0, 0, 255, 1)">var</span> openAIProvider = config.GetSection(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">OpenAI</span><span style="color: rgba(128, 0, 0, 1)">"</span>).Get&lt;OpenAIProvider&gt;<span style="color: rgba(0, 0, 0, 1)">();
</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Step1. Register one ChatClient</span>
<span style="color: rgba(0, 0, 255, 1)">var</span> chatClient = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> OpenAIClient(
        </span><span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> ApiKeyCredential(openAIProvider.ApiKey),
        </span><span style="color: rgba(0, 0, 255, 1)">new</span> OpenAIClientOptions { Endpoint = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> Uri(openAIProvider.Endpoint) })
    .GetChatClient(openAIProvider.ModelId)
    .AsIChatClient();
builder.Services.AddChatClient(chatClient);</span></pre>
</div>
<p>ï¼2ï¼åå»ºå¹¶æ³¨åä¸äºç¤ºä¾Agentsï¼</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Step2. Register some Agents</span>
builder.AddAIAgent(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Assistant</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ä½ æ¯ä¸ä½ä¹äºå©äººçå©æãåç­é®é¢ç®æ´åç¡®ã</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
builder.AddAIAgent(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Poet</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ä½ æ¯ä¸ä½å¯æåé åçè¯äººãä½¿ç¨ä¼ç¾çè¯ç¯åç­ææçè¯·æ±</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
builder.AddAIAgent(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Coder</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ä½ æ¯ä¸ä½èµæ·±çç¨åºåãè¯·åå©ç¨æ·è§£å³ç¼ç¨é®é¢ï¼å¹¶æä¾ä»£ç ç¤ºä¾ã</span><span style="color: rgba(128, 0, 0, 1)">"</span>);</pre>
</div>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;p&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);margin: 8px 0px;padding: 0px;outline: 0px;max-width: 100%;clear: both;min-height: 1em;color: rgba(0, 0, 0, 0.9);font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.578px;orphans: 2;text-align: left;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;line-height: 1.75em;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);padding: 0px;outline: 0px;max-width: 100%;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">ï¼3ï¼åå»ºå¹¶æ³¨åä¸ä¸ªWorkflowï¼</span></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Step3. Register one Workflow</span>
<span style="color: rgba(0, 0, 255, 1)">var</span> writerAgent = builder.AddAIAgent(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Writer</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ä½ æ¯ä¸ä½ä¹äºå©äººçå©æï¼åäºåç­ç¨æ·æåºçåç§é®é¢ã</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 0, 255, 1)">var</span> reviewerAgent = builder.AddAIAgent(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Reviewer</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ä½ æ¯ä¸ä½ä¸ä¸å®¡éèï¼è¯·åå©å®¡éå¹¶è¯ä»·ä¹åçåå¤ã</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
builder.AddWorkflow(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">TestWorkflow</span><span style="color: rgba(128, 0, 0, 1)">"</span>, (sp, key) =&gt;<span style="color: rgba(0, 0, 0, 1)">
{
    </span><span style="color: rgba(0, 0, 255, 1)">var</span> aiAgents = <span style="color: rgba(0, 0, 255, 1)">new</span> List&lt;IHostedAgentBuilder&gt;<span style="color: rgba(0, 0, 0, 1)">()
    {
        writerAgent,
        reviewerAgent
    }
    .Select(hab </span>=&gt; sp.GetRequiredKeyedService&lt;AIAgent&gt;<span style="color: rgba(0, 0, 0, 1)">(hab.Name));
    </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> AgentWorkflowBuilder.BuildSequential(
        workflowName: key,
        agents: aiAgents);
}).AddAsAIAgent();</span></pre>
</div>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;p&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);margin: 8px 0px;padding: 0px;outline: 0px;max-width: 100%;clear: both;min-height: 1em;color: rgba(0, 0, 0, 0.9);font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.578px;orphans: 2;text-align: left;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;line-height: 1.75em;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);padding: 0px;outline: 0px;max-width: 100%;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">ï¼4ï¼æ³¨åDevUIç¸å³æå¡ï¼</span></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Step4. Register DevUI related services</span>
<span style="color: rgba(0, 0, 0, 1)">builder.Services.AddOpenAIResponses();
builder.Services.AddOpenAIConversations();</span></pre>
</div>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;p&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);margin: 8px 0px;padding: 0px;outline: 0px;max-width: 100%;clear: both;min-height: 1em;color: rgba(0, 0, 0, 0.9);font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.578px;orphans: 2;text-align: left;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;line-height: 1.75em;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);padding: 0px;outline: 0px;max-width: 100%;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">ï¼5ï¼æ å°DevUIç¸å³ç«¯ç¹ï¼</span></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">var</span> app =<span style="color: rgba(0, 0, 0, 1)"> builder.Build();
</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Step5. Mapping DevUI related endpoints</span>
<span style="color: rgba(0, 0, 0, 1)">app.MapOpenAIResponses();
app.MapOpenAIConversations();
</span><span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)"> (app.Environment.IsDevelopment())
{
    app.MapDevUI();
}
......
app.Run();</span></pre>
</div>
<p>å¯ä»¥çå°ï¼æä»¬ä»ç¨ä¸è¡ä»£ç  app.MapDevUI() å°±å¯ç¨äºDevUIï¼æ éå¼åä»»ä½åç«¯ä»£ç ã</p>
<p>ç»¼ä¸æè¿°ï¼æä»¬åå»ºäºä¸äºç¤ºä¾Agent å ä¸ä¸ªWorkflow ä½ä¸ºåç»­æ¼ç¤ºã</p>
<h1><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;p&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0); margin: 8px; padding: 0px; outline: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgba(0, 0, 0, 0.9); font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif; font-size: 17px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: 0.578px; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; line-height: 1.75em; visibility: visible; box-sizing: border-box !important; overflow-wrap: break-word !important;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0); margin-right: 0px; margin-left: 0px; padding: 0px; outline: 0px; max-width: 100%; visibility: visible; box-sizing: border-box !important; overflow-wrap: break-word !important;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">3 å¼å¯è°è¯ï¼åå¥½ä½éª</span></h1>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);margin: 8px;padding: 0px;outline: 0px;max-width: 100%;clear: both;min-height: 1em;color: rgba(0, 0, 0, 0.9);font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.578px;orphans: 2;text-align: left;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;line-height: 1.75em;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">è¿éæä»¬å¯å¨èµ·æ¥ï¼å°±ä¼çå°å¦ä¸æç¤ºççé¢ï¼</span></p>
<p><img src="https://img2024.cnblogs.com/blog/381412/202602/381412-20260206203358540-716971522.png" alt="image" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);margin: 8px;padding: 0px;outline: 0px;max-width: 100%;clear: both;min-height: 1em;color: rgba(0, 0, 0, 0.9);font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.578px;orphans: 2;text-align: left;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;line-height: 1.75em;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);margin: 8px;padding: 0px;outline: 0px;max-width: 100%;clear: both;min-height: 1em;color: rgba(0, 0, 0, 0.9);font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.578px;orphans: 2;text-align: left;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;line-height: 1.75em;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">æ´ä¸ªDevUIçé¢æ°å´ä¸¤é¨åï¼</span></span></p>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);margin: 8px;padding: 0px;outline: 0px;max-width: 100%;clear: both;min-height: 1em;color: rgba(0, 0, 0, 0.9);font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.578px;orphans: 2;text-align: left;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;line-height: 1.75em;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);margin: 8px;padding: 0px;outline: 0px;max-width: 100%;clear: both;min-height: 1em;color: rgba(0, 0, 0, 0.9);font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.578px;orphans: 2;text-align: left;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;line-height: 1.75em;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">ï¼1ï¼å·¦è¾¹æ¯è°è¯åº å å±ç¤ºåºï¼å¯ä»¥çå°å¯¹è¯è®°å½ å Workflowèç¹ç¶æï¼</span></span></p>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);margin: 8px;padding: 0px;outline: 0px;max-width: 100%;clear: both;min-height: 1em;color: rgba(0, 0, 0, 0.9);font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.578px;orphans: 2;text-align: left;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;line-height: 1.75em;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);margin: 8px;padding: 0px;outline: 0px;max-width: 100%;clear: both;min-height: 1em;color: rgba(0, 0, 0, 0.9);font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.578px;orphans: 2;text-align: left;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;line-height: 1.75em;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">ï¼2ï¼å³è¾¹æ¯è·è¸ªåºï¼å±ç¤ºTrace å Event ç­æ§è¡è®°å½ï¼ä»¥ä¾¿å¿«éå®ä½é®é¢ï¼</span></span></p>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);margin: 8px;padding: 0px;outline: 0px;max-width: 100%;clear: both;min-height: 1em;color: rgba(0, 0, 0, 0.9);font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.578px;orphans: 2;text-align: left;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;line-height: 1.75em;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);margin: 8px;padding: 0px;outline: 0px;max-width: 100%;clear: both;min-height: 1em;color: rgba(0, 0, 0, 0.9);font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.578px;orphans: 2;text-align: left;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;line-height: 1.75em;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">æä»¬å¯ä»¥éè¿ç¹å»å·¦ä¸è§çä¸ææ¡ï¼çå°æä»¬æ³¨åçææAgent å Workflowï¼</span></span></p>
<p><img src="https://img2024.cnblogs.com/blog/381412/202602/381412-20260206203415835-431030566.png" alt="image" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);margin: 8px;padding: 0px;outline: 0px;max-width: 100%;clear: both;min-height: 1em;color: rgba(0, 0, 0, 0.9);font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.578px;orphans: 2;text-align: left;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;line-height: 1.75em;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);margin: 8px;padding: 0px;outline: 0px;max-width: 100%;clear: both;min-height: 1em;color: rgba(0, 0, 0, 0.9);font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.578px;orphans: 2;text-align: left;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;line-height: 1.75em;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);margin: 8px;padding: 0px;outline: 0px;max-width: 100%;clear: both;min-height: 1em;color: rgba(0, 0, 0, 0.9);font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.578px;orphans: 2;text-align: left;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;line-height: 1.75em;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">è¿å°±æå³çï¼æä»¬å¯ä»¥å¯¹æææ³¨åçAgentå¯¹è±¡è¿è¡è°è¯ï¼</span></span></span></p>
<h3 data-pm-slice="2 3 []"><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;p&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;background-color: rgb(255, 255, 255);outline: 0px;visibility: visible;line-height: 1.75em;margin-top: 16px;margin-bottom: 16px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span>3.1 è°è¯åä¸ªAgent</span></span></h3>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);margin: 8px;padding: 0px;outline: 0px;max-width: 100%;clear: both;min-height: 1em;color: rgba(0, 0, 0, 0.9);font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.578px;orphans: 2;text-align: left;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;line-height: 1.75em;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);margin: 8px;padding: 0px;outline: 0px;max-width: 100%;clear: both;min-height: 1em;color: rgba(0, 0, 0, 0.9);font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.578px;orphans: 2;text-align: left;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;line-height: 1.75em;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);margin: 8px;padding: 0px;outline: 0px;max-width: 100%;clear: both;min-height: 1em;color: rgba(0, 0, 0, 0.9);font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.578px;orphans: 2;text-align: left;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;line-height: 1.75em;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span data-pm-slice="0 0 []"><span data-pm-slice="0 0 []"><span data-pm-slice="1 1 [&quot;para&quot;,null,&quot;node&quot;,{&quot;tagName&quot;:&quot;span&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;color: rgb(0, 0, 0); font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif; font-size: 15px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: 0.578px; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;  background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span>è¿éæä»¬æµè¯Poet å Coderä¸¤ä¸ªAgentï¼</span></span></span></span></span></span></span></p>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);margin: 8px;padding: 0px;outline: 0px;max-width: 100%;clear: both;min-height: 1em;color: rgba(0, 0, 0, 0.9);font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.578px;orphans: 2;text-align: left;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;line-height: 1.75em;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);margin: 8px;padding: 0px;outline: 0px;max-width: 100%;clear: both;min-height: 1em;color: rgba(0, 0, 0, 0.9);font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.578px;orphans: 2;text-align: left;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;line-height: 1.75em;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);margin: 8px;padding: 0px;outline: 0px;max-width: 100%;clear: both;min-height: 1em;color: rgba(0, 0, 0, 0.9);font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.578px;orphans: 2;text-align: left;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;line-height: 1.75em;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span data-pm-slice="0 0 []"><span data-pm-slice="0 0 []"><span data-pm-slice="1 1 [&quot;para&quot;,null,&quot;node&quot;,{&quot;tagName&quot;:&quot;span&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;color: rgb(0, 0, 0); font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif; font-size: 15px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: 0.578px; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;  background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span>é¦åæ¯Poetï¼æä»¬è®©å®ä½ä¸é¦è¯ã</span></span></span></span></span></span></span></p>
<p><img src="https://img2024.cnblogs.com/blog/381412/202602/381412-20260206203444802-128625023.png" alt="image" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);margin: 8px;padding: 0px;outline: 0px;max-width: 100%;clear: both;min-height: 1em;color: rgba(0, 0, 0, 0.9);font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.578px;orphans: 2;text-align: left;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;line-height: 1.75em;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);margin: 8px;padding: 0px;outline: 0px;max-width: 100%;clear: both;min-height: 1em;color: rgba(0, 0, 0, 0.9);font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.578px;orphans: 2;text-align: left;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;line-height: 1.75em;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);margin: 8px;padding: 0px;outline: 0px;max-width: 100%;clear: both;min-height: 1em;color: rgba(0, 0, 0, 0.9);font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.578px;orphans: 2;text-align: left;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;line-height: 1.75em;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span data-pm-slice="0 0 []"><span data-pm-slice="0 0 []"><span data-pm-slice="1 1 [&quot;para&quot;,null,&quot;node&quot;,{&quot;tagName&quot;:&quot;span&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;color: rgb(0, 0, 0); font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif; font-size: 15px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: 0.578px; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;  background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span>å¶æ¬¡æ¯Coderï¼æä»¬è®©å®åä¸æ®µä»£ç ã</span></span></span></span></span></span></span></p>
<p><img src="https://img2024.cnblogs.com/blog/381412/202602/381412-20260206203459831-1485532135.png" alt="image" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p data-pm-slice="0 0 []"><span>å¯ä»¥çå°ï¼å®çè¾åºæ¯<span>æµå¼<span>çï¼ä¸éå¯¹åä»£ç è¿åè¾åºåäºä»£ç åçå±ç¤ºï¼æ»ä¹æ¾ç¤ºå°å¾åå¥½ï¼çèµ·æ¥å¾èæã</span></span></span></p>
<h3 data-pm-slice="2 3 []"><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;p&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;outline: 0px;visibility: visible;line-height: 1.75em;margin-top: 16px;margin-bottom: 16px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span>3.2 è°è¯ä¸ä¸ªWorkflow</span></span></h3>
<p data-pm-slice="0 0 []"><span><span><span><span data-pm-slice="0 0 []"><span><span>è¿éæä»¬æµè¯ä¸ä¸æ³¨åçWorkflowï¼è¿æ¯ä¸ä¸ª Editor -&gt; Reviewer çå¸åé¡ºåºå·¥ä½æµï¼é¦åç±åä½èç¼ååç¨¿ï¼ç¶åç±å®¡éèè¿è¡å®¡éï¼æç»è¾åºç»ç¨æ·ã</span></span></span></span></span></span></p>
<p data-pm-slice="0 0 []"><span><span><span><span data-pm-slice="0 0 []"><span><span>ä¸å¾å±ç¤ºåæ¢å°Workflowçå±ç¤ºï¼</span></span></span></span></span></span></p>
<p><img src="https://img2024.cnblogs.com/blog/381412/202602/381412-20260206203534335-1915055144.png" alt="image" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p data-pm-slice="0 0 []"><span><span><span><span data-pm-slice="0 0 []"><span><span><span data-pm-slice="0 0 []"><span><span>å¯ä»¥çå°ï¼å®æ¸æ°å°å±ç¤ºäºå·¥ä½æµçèç¹åé¡ºåºã</span></span></span></span></span></span></span></span></span></p>
<p data-pm-slice="0 0 []"><span><span><span><span data-pm-slice="0 0 []"><span><span><span data-pm-slice="0 0 []"><span><span>ç¶åï¼ç¹å»Runæé®å³å¯è¾å¥å¯å¨åå®¹ï¼</span></span></span></span></span></span></span></span></span></p>
<p><img src="https://img2024.cnblogs.com/blog/381412/202602/381412-20260206203549664-1376363888.png" alt="image" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p data-pm-slice="0 0 []"><span><span><span><span data-pm-slice="0 0 []"><span><span>éåï¼å¯ä»¥çå°å®æ§è¡çå¨è¿ç¨ï¼éè¿å³è¾¹çåºåå¯ä»¥çå°æ¯ä¸ªæ§è¡æ­¥éª¤çè¿ç¨ï¼</span></span></span></span></span></span></p>
<p><img src="https://img2024.cnblogs.com/blog/381412/202602/381412-20260206203605602-2134132627.png" alt="image" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p data-pm-slice="0 0 []"><span><span><span><span data-pm-slice="0 0 []"><span><span><span><span>æç»ï¼æ´ä¸ªå·¥ä½æµèç¹é½åæäºç»¿è²çå®æç¶æï¼æä»¬å¯ä»¥å¨å³è¾¹ç¹å»æ§è¡è¿ç¨çå°ä¸­é´è¾åºåå®¹ å æç»è¾åºåå®¹ã</span></span></span></span></span></span></span></span></p>
<p data-pm-slice="0 0 []"><span><span><span><span data-pm-slice="0 0 []"><span><span><span><span>æ­¤å¤ï¼å¦ææ¶åå·¥å·è°ç¨çè¯ï¼è¿å¯ä»¥ç¹å» Tools åºåæ¥çè°ç¨å·¥å·çè®°å½ï¼å®å¨ä¸è¦å¤ªæ¹ä¾¿ï¼</span></span></span></span></span></span></span></span></p>
<h1 data-pm-slice="0 0 []"><span data-pm-slice="0 0 []">4 æ³¨æäºé¡¹</span></h1>
<p data-pm-slice="0 0 []"><span data-pm-slice="0 0 []">DevUI è½å¥½ï¼ä½æ¯å¶æ¬èº«åªæ¯ç¨æ¥æå¡å¼åé¶æ®µçï¼å æ­¤å»ºè®®ï¼</span></p>
<ul class="list-paddingleft-1">
<li><strong>ä»å¨å¼åç¯å¢å¯ç¨DevUI</strong>ï¼çäº§ç¯å¢è¯·å³é­DevUIã</li>
<li>å¦éå¨æµè¯ç¯å¢å¯ç¨DevUIï¼<strong>å»ºè®®æ·»å è®¿é®æéæ§å¶</strong>ï¼é¿åæ´é²ææä¿¡æ¯ã</li>
</ul>
<h1 data-pm-slice="0 0 []"><span data-pm-slice="0 0 []">5 å°ç»</span></h1>
<p data-pm-slice="0 0 []"><span data-pm-slice="0 0 []"><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;text-transform: none;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;text-align: left;line-height: 1.75em;margin-bottom: 16px;margin-top: 16px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;margin-top: 8px;margin-bottom: 8px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span>æ¬æä»ç»äºDevUIæ¯ä»ä¹ï¼å®æä»ä¹æ ·çä¼å¿ï¼éåä»ç»äºå¦ä½å¨MAFä¸­å¿«ééæDevUIç¨äºå¼åè°è¯è·å¾åå¥½çå¼åè°è¯ä½éªï¼å¸ææ¬æçæ¡ä¾å¯¹ä½ ææå¸®å©ã</span></span><br></span></p>
<h1>ç¤ºä¾æºç </h1>
<p>GitHub:&nbsp;<a href="https://github.com/EdisonTalk/MAFD" target="_blank" rel="noopener nofollow">https://github.com/EdisonTalk/MAFD</a></p>
<h1>åèèµæ</h1>
<p><span data-pm-slice="0 0 []"><span>å£æ°ï¼ã<a href="https://www.cnblogs.com/sheng-jie/p/19200934" target="_blank">.NET + AI æºè½ä½å¼åè¿é¶</a>ãï¼æ¨èææ°ï¼âââââï¼</span></span></p>
<p><span data-pm-slice="0 0 []"><span>Microsoft Learnï¼<span>ã<a href="https://learn.microsoft.com/en-us/agent-framework/overview/agent-framework-overview?wt.mc_id=MVP_397012" target="_blank" rel="noopener nofollow">Agent Framework Tutorials</a>ã</span></span></span></p>
<div><span data-pm-slice="0 0 []"><span>&nbsp;</span></span></div>
<p style="text-align: center"><img src="https://images.cnblogs.com/cnblogs_com/edisonchou/1647700/o_200902144330EdisonTalk-Footer.jpg" alt="" style="width: 65%; border: 1px solid rgba(221, 221, 221, 1); border-radius: 3px; box-shadow: 0 4px 8px rgba(3, 27, 78, 0.12)"></p>
<div id="Copyright">
<p>ä½èï¼<span style="text-decoration: underline">ç±è¿ªç</span></p>
<p>åºå¤ï¼<a title="from" href="https://edisontalk.cnblogs.com" target="_blank">https://edisontalk.cnblogs.com</a></p>
<p>æ¬æçæå½ä½èååå®¢å­å±æï¼æ¬¢è¿è½¬è½½ï¼ä½æªç»ä½èåæå¿é¡»ä¿çæ­¤æ®µå£°æï¼ä¸å¨æç« é¡µé¢ææ¾ä½ç½®ç»åºåæé¾æ¥ã</p>

</div>

</div>
<div id="MySignature" role="contentinfo">
    <div align="center"><a href="https://weibo.com/u/2068032061?s=6uyXnP" target="_blank"><img border="0" src="http://service.t.sina.com.cn/widget/qmd/2068032061/d643d182/10.png"></a></div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-09 08:30">2026-02-09 08:30</span>&nbsp;
<a href="https://www.cnblogs.com/edisontalk">EdisonZhou</a>&nbsp;
éè¯»(<span id="post_view_count">14</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19586185);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19586185', targetLink: 'https://www.cnblogs.com/edisontalk/p/-/quick-start-on-maf-chatper15', title: 'MAFå¿«éå¥é¨ï¼15ï¼Agentè°è¯å©å¨ï¼DevUI' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ PHP åºç¨é­é DDoS æ»å»æ¶ä¼åçä»ä¹ ä»å¥é¨å°è¿é¶çé²æ¤æå ]]></title>
    <link>https://www.cnblogs.com/catchadmin/p/19593334</link>
    <guid>03d5d52ff140a3c185f29268935bb6e0</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/catchadmin/p/19593334" title="åå¸äº 2026-02-09 07:58">
    <span role="heading" aria-level="2">PHP åºç¨é­é DDoS æ»å»æ¶ä¼åçä»ä¹ ä»å¥é¨å°è¿é¶çé²æ¤æå</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="php-åºç¨é­é-ddos-æ»å»æ¶ä¼åçä»ä¹-ä»å¥é¨å°è¿é¶çé²æ¤æå">PHP åºç¨é­é DDoS æ»å»æ¶ä¼åçä»ä¹ ä»å¥é¨å°è¿é¶çé²æ¤æå</h1>
<h2 id="æ´é£é¨åçå®é">æ´é£é¨åçå®é</h2>
<p>æ³è±¡ä¸ä¸ï¼é»è²ææäºæèæä¸ªå¤§ä¿æ´»å¨ãä½ ç¨ PHP æ­å»ºççµåå¹³å°æ­£å¨è¿æ¥åææªæçæµéï¼è®¢åæºæºä¸æ­ï¼ç¨æ·ç­æé«æ¶¨ï¼PHP åºç¨æ¼å°½å¨åå¨æãç¶åââåªââç½ç«çªç¶å´©äºã</p>
<p>ä½ æ¥æ¥å¿ï¼å°åºæä¹äºï¼æµéç¡®å®é£äºï¼ä½è¿æ¬¡ä¸æ¯å ä¸ºç¨æ·å¤ªå¤ï¼èæ¯ä¸æ¬¡ DDoSï¼åå¸å¼æç»æå¡ï¼æ»å»ã</p>
<p>DDoS æ»å»å°±åä¸åºäººé æ´ªæ°´ï¼ç¨å¤§éä¼ªé çè¯·æ±æä½ çæå¡å¨æ·¹æãä½å·ä½å°ä¸ä¸ª PHP åºç¨ï¼è¢«æçæ¶åå°åºåçäºä»ä¹ï¼æä¹å¤æ­èªå·±æ¯ä¸æ¯æ­£å¨è¢«æ»å»ï¼æ´éè¦çæ¯ââæä¹é²ï¼</p>
<p>è¿ç¯æç« ä¼å¸¦ä½ ææ¸æ¥ PHP åºç¨é­é DDoS æ¶çå¨è¿ç¨ï¼ä»è¯å«æ»å»å°ä¿æ¤ä½ çåºç¨ä¸è¢«æè¶´ã</p>
<h2 id="ä»ä¹æ¯-ddos-æ»å»">ä»ä¹æ¯ DDoS æ»å»</h2>
<p>DDoS æ»å»æç¹åäºèç½ä¸çäº¤éå µå¡ãæ³è±¡ä½ è¦è¿ä¸å®¶ç­é¨åºéºï¼ç»æçªç¶ååºæç¾ä¸åä¸ª"åé¡¾å®¢"å µå¨é¨å£ï¼çæ­£çé¡¾å®¢æ ¹æ¬æ¤ä¸è¿å»ãåºéºï¼ä½ ç PHP åºç¨ï¼è¢«æ¤çäºï¼æç»åªè½å³é¨ã</p>
<p>ç¨ææ¯è¯­è¨è¯´ï¼DDoS æ»å»æ¯æ»å»èï¼æåµå°¸ç½ç»ï¼åç®æ ç½ç«åéæµ·éæµéï¼èå°½å¶èµæºãç®çå¾ç®åï¼è®©ç½ç«åæ¢æèç´æ¥æç«ã</p>
<p>å¯¹ PHP åºç¨æ¥è¯´ï¼æ»å»ä¼å²å»ä»¥ä¸å ä¸ªç¯èï¼</p>
<ul>
<li><strong>Web æå¡å¨</strong>ï¼PHP éè¦å¤çæ¯ä¸ä¸ªè¯·æ±ï¼ç­æ¶é´åæ¶å¥å¤§éè¯·æ±ä¼èå°½æå¡å¨èµæºã</li>
<li><strong>æ°æ®åº</strong>ï¼è¿å¤çæ¥è¯¢ä¼ææ¢çè³æå´©æ°æ®åºã</li>
<li><strong>å¸¦å®½</strong>ï¼æµéå¤ªå¤§ä¼åæ»¡ç½ç»å¸¦å®½ï¼å¯¼è´æ´ä½æ§è½ä¸éã</li>
</ul>
<h2 id="ddos-æ»å»å¦ä½å½±åä½ ç-php-åºç¨">DDoS æ»å»å¦ä½å½±åä½ ç PHP åºç¨</h2>
<p>PHP åºç¨è¢« DDoS æä¸­æ¶ï¼èååçäºè¿äºäºæï¼</p>
<h3 id="web-æå¡å¨è´è½½é£å">Web æå¡å¨è´è½½é£å</h3>
<p>ç¨æ·åèµ·è¯·æ±åï¼Web æå¡å¨ï¼æ¯å¦ Apache æ Nginxï¼ä¼è¿è¡ PHP èæ¬ãæ¥æ°æ®åºãè¿åå¨æåå®¹ãæ­£å¸¸æåµä¸è¿æ²¡ä»ä¹é®é¢ï¼ä½å½æåä¸ä¸ï¼çè³ä¸ç¾ä¸ï¼çè¯·æ±åæ¶æ¶å¥ï¼æå¡å¨å¾å¿«å°±æä¸ä½äºã</p>
<ul>
<li><strong>CPU ææ»¡</strong>ï¼PHP éè¦å¤çæ¯ä¸ªè¯·æ±ï¼å¤§éè¯·æ±ä¼è®© CPU ä½¿ç¨çç´æ¥ææ»¡ã</li>
<li><strong>åå­åç´§</strong>ï¼PHP åºç¨éå¸¸ä¼å¨åå­ä¸­ä¿å­ä¼è¯æ°æ®æç¼å­ï¼è¯·æ±å¤ªå¤ä¼å¯¼è´åå­èå°½ï¼è½»ååæ¢ï¼éåå´©æºã</li>
</ul>
<h3 id="æ°æ®åºè¿è½½">æ°æ®åºè¿è½½</h3>
<p>PHP åºç¨éå¸¸ä¾èµæ°æ®åºæ¥è·ååå±ç¤ºå¨æåå®¹ãä¸ä¸ªå¸åçè¯·æ±å¯è½æ¶åæ¥åºå­ãå¤çç»å½ãæ¸²æé¡µé¢ç­æä½ãDDoS æ»å»æ¶ï¼æ¯ä¸ªè¯·æ±é½å¯è½è§¦åå¼éå¾å¤§çæ°æ®åºæ¥è¯¢ï¼ç»æå°±æ¯ï¼</p>
<ul>
<li><strong>æ°æ®åºç¶é¢</strong>ï¼æ°æ®åºæä¸ä½è¿ç§éçº§çè´è½½ï¼æ¥è¯¢å¼å§åæ¢ãè¶æ¶çè³ç´æ¥å¤±è´¥ã</li>
<li><strong>ååºè¿é</strong>ï¼æ°æ®åºæå¡å¨åå¾æ ååºï¼åå®¹ååè¢«ä¸¥éå»¶è¿ã</li>
</ul>
<h3 id="å¸¦å®½ææ»¡">å¸¦å®½ææ»¡</h3>
<p>æ¯ä¸ª DDoS è¯·æ±é½ä¼æ¶èå¸¦å®½ãå½æ¶ææµéå¤§å°ä¸å®ç¨åº¦ï¼ä¼æä½ çç½ç»å¸¦å®½å¨é¨åæï¼çå®ç¨æ·çè¯·æ±æ ¹æ¬è¿ä¸æ¥ã</p>
<ul>
<li><strong>è¿æ¥æ°ä¸é</strong>ï¼ç½ç»è¿æ¥è¢«ææ»¡åï¼æ­£å¸¸ç¨æ·è®¿é®ä½ çç½ç«è¦ä¹ææ¢ï¼è¦ä¹å®å¨æä¸å¼ã</li>
</ul>
<h3 id="php-èæ¬è¶æ¶">PHP èæ¬è¶æ¶</h3>
<p>PHP èæ¬çæ§è¡æ¶é´æ¯æä¸éçãæå¡å¨è¢«å¤§éè¯·æ±æ·¹æ²¡æ¶ï¼PHP èæ¬å¯è½æ¥ä¸åå¨è§å®æ¶é´åè·å®ï¼ç»æå°±æ¯ï¼</p>
<ul>
<li><strong>500 éè¯¯</strong>ï¼æå¡å¨å èµæºèå°½æ æ³å¤çè¯·æ±ã</li>
<li><strong>è¿æ¥è¶æ¶</strong>ï¼PHP èæ¬æ§è¡æ¶é´è¿é¿ï¼è¿æ¥ç´æ¥æ­æã</li>
</ul>
<h2 id="å¦ä½å¤æ­ä½ ç-php-åºç¨æ­£å¨è¢«-ddos">å¦ä½å¤æ­ä½ ç PHP åºç¨æ­£å¨è¢« DDoS</h2>
<p>åæ¶è¯å« DDoS æ»å»è³å³éè¦ãä»¥ä¸æ¯ä¸äºå³é®çææ¯ææ ï¼</p>
<h3 id="æµéçªç¶é£å">æµéçªç¶é£å</h3>
<p>æµéå¨ç­æ¶é´åæ´æ¶¨ââå°¤å¶æ¥æºå¼å¸¸ï¼æ¯å¦æ¥èªä¸å¸¸è§çå°åºæ IP æ®µï¼ââå°±è¦è­¦æäºãå¯ä»¥æ¥çæå¡å¨æ¥å¿æ¥ææ¥å¼å¸¸æµéæ¨¡å¼ã</p>
<p>ç¨ Apache æ Nginx æ¥å¿æ£æ¥æ¯å¦æå¤§éè¯·æ±æ¥èªåä¸ä¸ª IP æä¸æ¹å¯çå°åï¼</p>
<pre><code class="language-bash"># Apacheï¼æ£æ¥è®¿é®æ¥å¿ä¸­ç IP è¯·æ±é¢æ¬¡
cat /var/log/apache2/access.log | awk '{print $1}' | sort | uniq -c | sort -n
</code></pre>
<h3 id="æ§è½ä¸éåè¶æ¶">æ§è½ä¸éåè¶æ¶</h3>
<p>å¦æç½ç«çªç¶åæ¢æèé¢ç¹åºç°è¶æ¶éè¯¯ï¼å¯è½å°±æ¯ DDoS å¨æé¬¼ãPHP èæ¬å¤çä¸è¿æ¥æ¶å¥çè¯·æ±ï¼å¼å§æ¥ 500 éè¯¯æèè¶æ¶ã</p>
<h3 id="èµæºå ç¨å¼å¸¸">èµæºå ç¨å¼å¸¸</h3>
<p>å¦ææå¡å¨ç CPU ååå­ä½¿ç¨ççªç¶é£é«ï¼è¯´æ PHP æ­£å¨è¦è¦æ¯æãå¯ä»¥ç¨ <code>htop</code> æ <code>top</code> å®æ¶çæ§èµæºä½¿ç¨æåµï¼</p>
<pre><code class="language-bash"># å®æ¶çæ§ CPU ååå­ä½¿ç¨æåµ
top -d 1
</code></pre>
<p>å¦æ CPU æåå­é¿æ¶é´å¤äºé«ä½ï¼å°±è¯¥è¿ä¸æ­¥ææ¥äºã</p>
<h2 id="php-åºç¨ç-ddos-é²æ¤ç­ç¥">PHP åºç¨ç DDoS é²æ¤ç­ç¥</h2>
<p>å®å¨æç» DDoS æ»å»å¾é¾ï¼ä½æä¸å°ææ®µå¯ä»¥å¤§å¹éä½å¶å½±åãä¸é¢æ¯ä¸äºä¿æ¤ PHP åºç¨çå®ç¨æ¹æ¡ã</p>
<h3 id="éæµç¬¬ä¸éé²çº¿">éæµï¼ç¬¬ä¸éé²çº¿</h3>
<p>éæµå°±æ¯éå¶æ¯ä¸ªç¨æ·å¨ä¸æ®µæ¶é´åè½åèµ·çè¯·æ±æ°éãæ¹æ³ç®åä½å¾ææï¼è½æ¡ä½å¤§é¨åæºå¨äººåæ¶æè¯·æ±ã</p>
<p><strong>ç¨ Redis å®ç°éæµ</strong></p>
<p>å¯ä»¥ç¨ Redis è¿½è¸ªæ¯ä¸ªç¨æ·çè¯·æ±æ¬¡æ°ï¼è¶è¿éå¼å°±æç»ï¼</p>
<pre><code class="language-php">$redis = new Redis();
$redis-&gt;connect('localhost', 6379);
$ip = $_SERVER['REMOTE_ADDR'];
$key = "request_count:{$ip}";
$limit = 100;  // Max requests per minute
$window = 60;  // 1 minute time window
$request_count = $redis-&gt;get($key);
if ($request_count &amp;&amp; $request_count &gt;= $limit) {
    // Too many requests, reject the user
    header('HTTP/1.1 429 Too Many Requests');
    exit('Rate limit exceeded');
}
$redis-&gt;incr($key);
$redis-&gt;expire($key, $window);  // Reset the count after 1 minute
</code></pre>
<p>è¿ä¸ªåºç¡éæµæ¹æ¡å¯ä»¥ææèæµé£äºè¯å¾ç¨å¤§éè¯·æ±æ·¹æ²¡ä½ æå¡å¨çç¨æ·ææºå¨äººã</p>
<h3 id="cdnåæµæ¶ææµé">CDNï¼åæµæ¶ææµé</h3>
<p>CDNï¼åå®¹ååç½ç»ï¼ä¼ç¼å­éæèµæºï¼å¾çãCSSãJavaScriptï¼ï¼éè¿åå¸å¨å¨ççè¾¹ç¼èç¹æä¾æå¡ãDDoS æ»å»æ¶ï¼CDN å¯ä»¥å¸æ¶å¤§éæµéï¼è®©ä½ ç PHP æå¡å¨ä¸å¿å¤çå¨æè¯·æ±ï¼æ¯å¦ç¨æ·ç»å½ãè®¢åå¤çï¼ã</p>
<p><strong>éè¿ CDN ååéæèµæº</strong></p>
<pre><code class="language-html">&lt;!-- éè¿ CDN æä¾éæèµæº --&gt;
&lt;link rel="stylesheet" href="https://cdn.yoursite.com/styles.css"&gt;
&lt;script src="https://cdn.yoursite.com/app.js"&gt;&lt;/script&gt;
&lt;img src="https://cdn.yoursite.com/images/product.jpg" alt="Product"&gt;
</code></pre>
<p>æéæèµæºäº¤ç» CDNï¼æ¢è½åè½» PHP åºç¨çè´è½½ï¼ä¹è½è®© DDoS æµéæ´é¾ç´æ¥æå°ä½ çåºç¨æ ¸å¿ã</p>
<h3 id="wafåºç¨å±é²æ¤">WAFï¼åºç¨å±é²æ¤</h3>
<p>WAFï¼Web åºç¨é²ç«å¢ï¼æ¯ä¸ç§é«çº§å·¥å·ï¼ä¸é¨æ£æ¥åè¿æ»¤åå¾ PHP åºç¨ç HTTP æµéãWAF å¯ä»¥æ ¹æ®é¢è®¾è§åæ£æµå¹¶æ¦æªæ¶æè¯·æ±ï¼æ¯å¦å°ç¦å¯ç IP æå±è½ç¹å®å°åºçæµéã</p>
<p><strong>ä»¥ AWS WAF ä¸ºä¾</strong></p>
<ol>
<li>åå»º Web ACLï¼è®¿é®æ§å¶åè¡¨ï¼ï¼å®ä¹æµéè¿æ»¤è§åã</li>
<li>æ·»å è§åæ¥æ¦æª HTTP æ´ªæ°´æ»å»ãSQL æ³¨å¥ãIP ä¿¡èªè¿æ»¤ç­ã</li>
</ol>
<pre><code class="language-bash">aws wafv2 create-web-acl --name "MyWAF" --scope "REGIONAL" --default-action "ALLOW" --rules ...
</code></pre>
<p>éç½®å®æåï¼PHP åºç¨å°±æäºä¸å±ä¸é¨çé²æ¤ï¼æ¶ææµéä¼è¢«æ¦æªï¼æ­£å¸¸ç¨æ·ä¸åå½±åã</p>
<h3 id="åå©ç¬¬ä¸æ¹-ddos-é²æ¤æå¡">åå©ç¬¬ä¸æ¹ DDoS é²æ¤æå¡</h3>
<p>CloudflareãAWS Shield è¿ç±»æå¡æ¯ä¸ä¸å DDoS é²æ¤çãå®ä»¬æä¾çé«çº§é²æ¤è½èªå¨è¿æ»¤æ¶ææµéï¼ä¿è¯ä½ ç PHP åºç¨æç»­å¨çº¿ã</p>
<p>æ¥å¥æ¹å¼å¾ç®åï¼</p>
<ol>
<li>æ³¨å Cloudflare æ AWS Shieldã</li>
<li>æååçæµéè·¯ç±å°å®ä»¬çæå¡ã</li>
<li>å®ä»¬ä¼èªå¨æ£æµå¹¶æ¦æª DDoS æµéã</li>
</ol>
<p>éè¿ç¬¬ä¸æ¹æå¡ï¼ç»å¤§é¨åæ»å»æµéå¨å°è¾¾ä½ ç PHP åºç¨ä¹åå°±å·²ç»è¢«æ¡æäºã</p>
<h3 id="å®æ¶çæ§åæ¥å¿è®°å½">å®æ¶çæ§åæ¥å¿è®°å½</h3>
<p>æç»­çæ§æµéåæå¡å¨æ§è½æå©äºå®æ¶åç° DDoS æ»å»ãDatadogãNew RelicãAWS CloudWatch è¿ç±»å·¥å·å¯ä»¥å¸®ä½ ææå¼å¸¸æµéãæ§è½ä¸éç­é®é¢ã</p>
<p><strong>è®°å½å¯ç IP</strong></p>
<pre><code class="language-php">// Example: Log suspicious IPs for later analysis
$suspicious_ip = $_SERVER['REMOTE_ADDR'];
$log_file = '/path/to/your/log/file.log';
file_put_contents($log_file, "Suspicious IP: {$suspicious_ip}\n", FILE_APPEND);
// Optionally, block IP if it exceeds request limit
if ($request_count &gt; $limit) {
    // Block the IP
    $blocked_ips[] = $suspicious_ip;
}
</code></pre>
<p>éè¿è®°å½å¯çæ´»å¨ï¼ä½ å¯ä»¥äºåå°ç¦æ¶æç¨æ·ï¼ä¹è½ä¸æ­ä¼åèªå·±çé²æ¤ç­ç¥ã</p>
<h2 id="æ»ç»">æ»ç»</h2>
<p>DDoS æ»å»å¬èµ·æ¥å¯æï¼ä½åªè¦ç¨å¯¹å·¥å·åç­ç¥ï¼ä½ å®å¨å¯ä»¥ä¿æ¤å¥½èªå·±ç PHP åºç¨ãä»éæµãCDNï¼å° WAF åç¬¬ä¸æ¹é²æ¤æå¡ï¼å¯éçæ¹æ¡å¹¶ä¸å°ã</p>
<p>å«æââä¸»å¨é²å¾¡æ¯è¢«å¨åºå¯¹å¼ºå¾å¤ãä»å¤©å°±æè¿äºé²çº¿æ­èµ·æ¥ï¼ç­æ»å»çæ¥çæ¶åä½ æä¸ä¼æå¿èä¹±ãæç»­çæ§ãå®æ¶åè­¦ãéµå¾ªæä½³å®è·µï¼å³ä½¿é¢å¯¹ DDoSï¼ä½ ç PHP åºç¨ç§æ ·è½ç¨³ç¨³å°è·çã<br>
<a href="https://catchadmin.com/post/2026-02/php-application-ddos-guide" target="_blank" rel="noopener nofollow">PHP åºç¨é­é DDoS æ»å»æ¶ä¼åçä»ä¹ï¼ä»å¥é¨å°è¿é¶çé²æ¤æå</a></p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-09 07:59">2026-02-09 07:58</span>&nbsp;
<a href="https://www.cnblogs.com/catchadmin">JaguarJack</a>&nbsp;
éè¯»(<span id="post_view_count">39</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19593334);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19593334', targetLink: 'https://www.cnblogs.com/catchadmin/p/19593334', title: 'PHP åºç¨é­é DDoS æ»å»æ¶ä¼åçä»ä¹ ä»å¥é¨å°è¿é¶çé²æ¤æå' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Concept Bottleneck Models-æ¦å¿µç¶é¢æ¨¡åç¨äºå¯è§£éå³ç­ï¼è¿å±ãåç±»ä½ç³» ä¸æªæ¥æ¹åç»¼è¿° ]]></title>
    <link>https://www.cnblogs.com/lemonzhang/p/19592426</link>
    <guid>24159a1926f15c69818d8c6c0796de40</guid>
    <description>
    <![CDATA[ 
		<h1 class="postTitle">
			<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/lemonzhang/p/19592426" title="åå¸äº 2026-02-08 19:27">
    <span role="heading" aria-level="2">Concept Bottleneck Models-æ¦å¿µç¶é¢æ¨¡åç¨äºå¯è§£éå³ç­ï¼è¿å±ãåç±»ä½ç³» ä¸æªæ¥æ¹åç»¼è¿°</span>
    

</a>

		</h1>
		<div class="clear"></div>
		<div class="postBody">
			    <div id="cnblogs_post_description" style="display: none">
        
        æ·±åº¦ç¥ç»ç½ç»è½ç¶è¡¨ç°åºä¼å¼çæ§è½ï¼ä½å¶ä¸éææ§éå¶äºå¶å¨éè¦éæåº¦åäººå·¥çç®¡çé«é£é©é¢åä¸­çåºç¨ãæ¦å¿µç¶é¢æ¨¡å(Concept Bottleneck Models, CBMs)éè¿å¼å¥ä¸ä¸ªäººç±»å¯çè§£çæ¦å¿µå±æ¥è¿æ¥è¾å¥ä¸å³ç­ï¼ä»èè§£å³äºè¿ä¸å·®è·ï¼å®ç°äºè¯­ä¹è§£éåæµè¯æ¶å¹²é¢ãæ¬ç»¼è¿°ä»åä¸ªç»´åº¦æä¾äºä¸ä¸ªç»ä¸çCBMsæ¦è§ï¼æ¦å¿µè·åãåºäºæ¦å¿µçå³ç­å¶å®ãæ¦å¿µå¹²é¢åæ¦å¿µè¯ä¼°ãæä»¬æ»ç»äºæ¦å¿µæå»ºçæ¼åè¿ç¨ï¼ä»äººå·¥æ æ³¨å°åºäºè¯å¸çææãå¤§è¯­è¨æ¨¡å(LLM)/è§è§è¯­è¨æ¨¡å(VLMï¼å¼å¯¼ççæï¼ä»¥åéè¿åååæ©æ£æ¨¡åå®ç°çè§è§å³èåç°ï¼åé¡¾äºè¶è¶ä¸¥æ ¼ç¶é¢çæ°å´CBMæ¶æï¼å¹¶æ´åäºå¼ºè°å¿ å®åº¦ãç¨çæ§åå¯å¹²é¢æ§çè¯ä¼°ä¸å¹²é¢åè®®ï¼è¿äºå¯¹å»çä¿å¥ç­é«é£é©é¢åå°¤ä¸ºéè¦ãæä»¬ç»¼åäºé¶æ£çæç®ï¼å¹¶å¾åäºåºäºæ¦å¿µçå¯è§£éå³ç­é¢ä¸´çå³é®ææåæªæ¥æ¹åã
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p><span style="font-size: 16px">æ·±åº¦ç¥ç»ç½ç»è½ç¶è¡¨ç°åºä¼å¼çæ§è½ï¼ä½å¶ä¸éææ§éå¶äºå¶å¨éè¦éæåº¦åäººå·¥çç®¡çé«é£é©é¢åä¸­çåºç¨ãæ¦å¿µç¶é¢æ¨¡å(Concept Bottleneck Models, CBMs)éè¿å¼å¥ä¸ä¸ªäººç±»å¯çè§£çæ¦å¿µå±æ¥è¿æ¥è¾å¥ä¸å³ç­ï¼ä»èè§£å³äºè¿ä¸å·®è·ï¼å®ç°äºè¯­ä¹è§£éåæµè¯æ¶å¹²é¢ãæ¬ç»¼è¿°ä»åä¸ªç»´åº¦æä¾äºä¸ä¸ªç»ä¸çCBMsæ¦è§ï¼æ¦å¿µè·åãåºäºæ¦å¿µçå³ç­å¶å®ãæ¦å¿µå¹²é¢åæ¦å¿µè¯ä¼°ãæä»¬æ»ç»äºæ¦å¿µæå»ºçæ¼åè¿ç¨ï¼ä»äººå·¥æ æ³¨å°åºäºè¯å¸çææãå¤§è¯­è¨æ¨¡å(LLM)/è§è§è¯­è¨æ¨¡å(VLMï¼å¼å¯¼ççæï¼ä»¥åéè¿åååæ©æ£æ¨¡åå®ç°çè§è§å³èåç°ï¼åé¡¾äºè¶è¶ä¸¥æ ¼ç¶é¢çæ°å´CBMæ¶æï¼å¹¶æ´åäºå¼ºè°å¿ å®åº¦ãç¨çæ§åå¯å¹²é¢æ§çè¯ä¼°ä¸å¹²é¢åè®®ï¼è¿äºå¯¹å»çä¿å¥ç­é«é£é©é¢åå°¤ä¸ºéè¦ãæä»¬ç»¼åäºé¶æ£çæç®ï¼å¹¶å¾åäºåºäºæ¦å¿µçå¯è§£éå³ç­é¢ä¸´çå³é®ææåæªæ¥æ¹åã</span></p>
<div class="cnblogs_Highlighter">
<pre class="brush:bash;gutter:true;">@article{Wang2026CBMSurvey,
  title   = {Concept Bottleneck Models for Explainable Decision Making: A Survey of Progress, Taxonomy, and Future Directions},
  author  = {Wang, Chunjiang and Li, Fan and Hu, Wenbo and Yan, Rui and Zhang, Kun and Zhou, Shaohua Kevin},
  journal = {ResearchGate Preprint},
  year    = {2026},
  doi     = {10.13140/RG.2.2.30356.16002},
  url     = {https://www.researchgate.net/publication/399898851_Concept_Bottleneck_Models_for_Explainable_Decision_Making_A_Survey_of_Progress_Taxonomy_and_Future_Directions}
}
</pre>
</div>
<p>&nbsp;This blog is from kkzhang at <a href="https://www.cnblogs.com/lemonzhang/p/19592426" target="_blank">https://www.cnblogs.com/lemonzhang/p/19592426</a>.</p>
<h1><span style="font-size: 15pt; font-family: é»ä½" lang="EN-US">1 </span><span style="font-size: 15pt; font-family: é»ä½">å¼è¨</span></h1>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ·±åº¦ç¥ç»ç½ç»å¨è§è§ãè¯­è¨åå¤æ¨¡æå­¦ä¹ æ¹é¢åå¾äºå¼ºå¤§çæ§è½ï¼ä½¿å¶å¨å»çä¿å¥</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[1]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ãå»å­¦</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[2]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">åéè</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[3]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ç­ç°å®ä¸çä¸­å¾å°å¹¿æ³éç¨ãç¶èï¼å®ä»¬çå³ç­è¿ç¨å¾å¾æ¯ä¸éæçï¼è¿å¨éè¦ä¿¡ä»»ãé®è´£å¶åäººç±»çç£çé«é£é©ç¯å¢ä¸­é æäºé£é©</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[4]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ãè¿ç§æ§è½ä¸å¯è§£éæ§ä¹é´çå·®è·æ¨å¨äºå¯è§£é</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">AI (XAI)</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">çåå±ï¼æ¨å¨ä½¿æ¨¡åçæ¨çè¿ç¨å¯¹äººç±»èè¨æ¯å¯çè§£ãå¯éªè¯åå¯ä¿®æ­£çã</span></p>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ¦å¿µç¶é¢æ¨¡å</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(CBMs)</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å·²æä¸ºè§£å³è¿ä¸ææçä¸ä¸ªååæ§ä¸æå½±ååçèå¼</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[5]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ã</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ä¸æ¯ç´æ¥å°è¾å¥æ å°å°è¾åºï¼èæ¯éè¿å¨è¾å¥åå³ç­ä¹é´å¼å¥ä¸ä¸ªäººç±»å¯çè§£çä¸­é´æ¦å¿µå±ï¼æ¾å¼å°å¯¹é¢æµè¿ç¨è¿è¡å å¼åè§£ãè¿ç§ç»æåçåè§£å®ç°äºè¯­ä¹è§£éï¼ä¾¿äºä¸å®¶æ£æ¥ä¸­é´æ¨çè¿ç¨ï¼å¹¶éè¿æ¦å¿µä¿®æ­£æ¯ææµè¯æ¶å¹²é¢ãè¿äºç¹æ§å°</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ä¸äºåè§£éææ¯</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[6]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">åºåå¼æ¥ï¼å¹¶å°å¶å®ä½ä¸ºå¯è§£éåå¯æ§å³ç­çç»ä¸æ¡æ¶ã</span></p>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ©æçæ¦å¿µç¶é¢æ¨¡åä¾èµäºæå¨å®ä¹åæ æ³¨çæ¦å¿µï¼ä¾å¦è§è§å±æ§æä¸´åºåç°ï¼æ¥æä¾éæçä¸­é´æ¥å£ï¼ä½åå°æ æ³¨ææ¬ãè¦çèå´ä¸å¨åæ ç­¾åªå£°çéå¶</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[5]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ãæè¿çè¿å±å¯ä»¥ç»ç»ä¸ºåºäºæ¦å¿µæ¨ççåä¸ªé¶æ®µï¼æ¦å¿µè·åæ­£ä»äººå·¥ç­å±è½¬åå¯æ©å±çè¯å¸ææã</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">LLM/VLM</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å¼å¯¼ççæï¼ä»¥åéè¿ååææ©æ£æ¨¡åå®ç°çè§è§æ¥å°åç°ï¼è¿äºé½å¾çäºå¤§è§æ¨¡åºç¡æ¨¡å</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[7, 8, 9]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ï¼åºäºæ¦å¿µçå³ç­æ­£ä»ä¸¥æ ¼çç¶é¢åè½¯æ§ãæ··åãæ¦çååºäºè½éçè®¾è®¡æ¼åï¼è¿äºè®¾è®¡å¨ä¿çæ¦å¿µæ¥å£çåæ¶æé«äºé¢æµè½å</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[10, 11, 12, 13]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ï¼æ¦å¿µå¹²é¢è¶æ¥è¶å¤å°æ¯æç»æååæç¥ä¾èµå³ç³»çä¿®æ­£ï¼ä»¥ä¾¿éè¿æ¦å¿µå±æ´å¥½å°ä¼ æ­äººç±»åé¦</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[14, 15]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ï¼æ¦å¿µè¯ä¼°æ­£ä»åç¡®æ§æ©å±å°ä»¥å¯è§£éæ§ä¸ºä¸­å¿çææ ï¼ä¾å¦å¿ å®åº¦ãå¹²é¢ä¸çä¸è´æ§ãå¯¹åªå£°æç¼ºå¤±æ¦å¿µçé²æ£æ§ï¼ï¼ä½å¨è§è§æ¥å°ãè¯­ä¹ç¨³å®æ§åä¸äººç±»æ¨çå¯¹é½æ¹é¢ä»é¢ä¸´ææ</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[8]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ã</span></p>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å°½ç®¡è¿å±è¿éï¼ä½</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBM</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æç®ä»ç¶æ¯ç¢çåçãç°æçç»¼è¿°</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[16]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">åè¯è®ºéå¸¸ä¾§éäºå±æ§å­¦ä¹ ãåºäºååçè§£éæä¸è¬çå¯è§£éæ§æ¹æ³ï¼ä½å®ä»¬å¹¶æªææå°</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ä½ä¸ºæ¶µçæ¦å¿µè·åãå³ç­æ¶æãå¹²é¢æºå¶åè¯ä¼°åè®®çç»¼åæ¡æ¶çæ´å¹¿æ³æ¼åãç¹å«æ¯ï¼</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ä¸åºç¡æ¨¡åãå¯ç¼è¾å­¦ä¹ åå¤æ¨¡æäº¤äºçè¿æèåå°æªå¾å°ç³»ç»æ§çç»¼åã</span></p>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ¬ç»¼è¿°çä¸»è¦è´¡ç®æ»ç»å¦ä¸ï¼</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US"> (1) </span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æåºäºæ¶µçæ¦å¿µè·åãå³ç­ãå¹²é¢åè¯ä¼°ç</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ç»ä¸åç±»æ³ã</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US"> (2) </span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ç³»ç»åé¡¾äºæ¦å¿µæå»ºæ¹æ³ï¼ä»äººå·¥æ æ³¨å°</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">LLM</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å¼å¯¼ååºäºååçåç°ã</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US"> (3) </span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ç»¼åäºå·æä¸åç¶é¢è®¾è®¡åå¯ç¼è¾ç¨åº¦çæ°å´</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBM</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ¶æã</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US"> (4) </span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ´åäºè¯ä¼°åè®®ååºåï¼éç¹å³æ³¨å¿ å®åº¦ãç¨çæ§ãå¯å¹²é¢æ§åå»å­¦åºç¨ã</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æä»¬å¨</span><span lang="EN-US"><a href="https://github.com/kkzhang95/Awesome_Concept_Bottleneck_Models" rel="noopener nofollow"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½">Awesome Concept Bottleneck Models</span></a></span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ç»´æ¤äºä¸ä¸ªåå«ä»£è¡¨æ§</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBM</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">è®ºæãä»£ç ååºåçæ´æ°ä»åºï¼ä»¥æ¯æå¤ç°åç¤¾åºä½¿ç¨ã</span></p>
<h1><span style="font-size: 15pt; font-family: é»ä½" lang="EN-US">2 </span><span style="font-size: 15pt; font-family: é»ä½">é¢å¤ç¥è¯</span></h1>
<h2><span style="font-size: 14pt; font-family: é»ä½" lang="EN-US">2.1 </span><span style="font-size: 14pt; font-family: é»ä½">æ¦å¿µç¶é¢æ¨¡å</span></h2>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ¦å¿µç¶é¢æ¨¡å</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(CBMs)<sup>[5]</sup></span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ¯ä¸ç±»å¯è§£éçç¥ç»æ¶æï¼éè¿ç§°ä¸ºæ¦å¿µçäººç±»å¯çè§£çä¸­é´åéï¼æ¾å¼å°å°é¢æµåè§£ä¸ºä¸¤ä¸ªé¶æ®µãå½¢å¼ä¸ï¼</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBM</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å°ä»è¾å¥$x \in \mathcal{X}$</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å°ç®æ $y \in \mathcal{Y}$</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">çæ å°å å¼åè§£ä¸ºï¼</span><span style="font-size: 10.5pt; mso-bidi-font-size: 11.0pt; font-family: &quot;Calibri&quot;, &quot;sans-serif&quot;; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: å®ä½; mso-fareast-theme-font: minor-fareast; mso-hansi-theme-font: minor-latin; mso-bidi-font-family: 'Times New Roman'; mso-bidi-theme-font: minor-bidi; position: relative; top: 3pt; mso-text-raise: -3.0pt; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA" lang="EN-US"></span></p>
<p>\begin{equation}<br>	x \;\rightarrow\; c \;\rightarrow\; y,<br>\end{equation}&nbsp;<span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å¶ä¸­$c = (c_1, \ldots, c_K) \in \mathcal{C}^K$</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">è¡¨ç¤ºä¸ç»å¯è§£éçæ¦å¿µï¼å¦è§è§å±æ§ãè§£åç»æãççåç°æè¯­ä¹æè¿°ã</span></p>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ä¸ä¸ªå¸åç</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBM</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ç±ä¸¤ä¸ªç»ä»¶ç»æï¼æ¦å¿µé¢æµå¨$f_{\theta}: \mathcal{X} \rightarrow \mathcal{C}^K$</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ï¼å®å°åå§è¾å¥æ å°å°æ¦å¿µæ¿æ´»ï¼ä»¥åä»»å¡é¢æµå¨$g_{\phi}: \mathcal{C}^K \rightarrow \mathcal{Y}$</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ï¼å®ä»åºäºé¢æµçæ¦å¿µäº§çæç»é¢æµãæ´ä½æ¨¡åå¯ä»¥åä¸ºï¼</span></p>
<p>\begin{equation}<br>	\hat{y} = g_{\phi}(f_{\theta}(x)).<br>\end{equation}</p>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">è¿ç§ç»æå®ç°äº</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">çä¸¤ä¸ªå³å®æ§è½åï¼</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(i) </span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">è¯­ä¹å¯è§£éæ§ï¼å ä¸ºæ¯ä¸ªæ¦å¿µç»´åº¦é½ä¸äººç±»å¯è¯å«çå±æ§å¯¹é½ï¼</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(ii) </span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å¯å¹²é¢æ§ï¼å ä¸ºç¨æ·å¯ä»¥å¨æµè¯æ¶æ£æ¥æä¿®æ¹</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ä»¥çº æ­£æ¨çéè¯¯ãè¿äºç¹æ§æ¿åäºæ¬ç»¼è¿°ç¨åè®¨è®ºçä¸ç³»åæ¶æåä½ï¼åæ¬æ¾å®½ä¸¥æ ¼ç¶é¢çº¦æãç»åæ¦å¿µé´ç»æåä¾èµå³ç³»æå©ç¨å¤æ¨¡æåºç¡æ¨¡åç­å¤é¨ç¥è¯çæ¨¡åã</span></p>
<p><img alt="image" loading="lazy" style="display: block; margin-left: auto; margin-right: auto" data-src="https://img2024.cnblogs.com/blog/1070495/202602/1070495-20260208192053730-1384318721.png" class="lazyload">&nbsp;</p>
<p class="MsoNormal" style="text-indent: 24pt; line-height: 150%; text-align: center"><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å¾</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">1 CBM</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æµç¨æ¦è§ãè¯¥å¾å±ç¤ºäºæ¦å¿µæ¯å¦ä½è¢«è·åãæ´åè³å³ç­å¶å®ãè¿è¡å¹²é¢ä»¥åè¯ä¼°ï¼ä»èçæå¯è§£éé¢æµçã</span></p>
<h2><span style="font-size: 14pt; font-family: é»ä½" lang="EN-US">2.2 </span><span style="font-size: 14pt; font-family: é»ä½">åç±»æ³</span></h2>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å¾</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">1</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å±ç¤ºäºæ¦å¿µç¶é¢æ¨¡åçåé¨ååç±»æ³ï¼èè¡¨</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">1</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ»ç»äºè¿äºç»´åº¦ä¸çä»£è¡¨æ§æ¹æ³ãæä»¬åºåäºåä¸ªä¸»è¦ç»´åº¦ï¼</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(1) </span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ¦å¿µè·åï¼å³æ³¨å¦ä½æå»ºäººç±»å¯è§£éçæ¦å¿µï¼èå´ä»ä¸å®¶æ æ³¨å°èªå¨åç°åè¯­è¨è¯±å¯¼çè¯æ±è¡¨ï¼</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(2) </span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">åºäºæ¦å¿µçå³ç­ï¼æå®æ¦å¿µå±å¦ä½ä¸­ä»é¢æµï¼åæ¬ä¸¥æ ¼ç¶é¢ä»¥åæ¾å¼ææ··åè®¾è®¡ï¼</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(3) </span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ¦å¿µå¹²é¢ï¼ç ç©¶äººç±»æå¤é¨ç³»ç»å¦ä½å¨æ¨çæ¶ä¸æ¦å¿µäº¤äºä»¥çº æ­£ææå¯¼æ¨çï¼</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(4) </span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ¦å¿µè¯ä¼°ï¼è¯ä¼°ä»¥å¯è§£éæ§ä¸ºå¯¼åçå±æ§ï¼å¦å¿ å®åº¦ãç¨çæ§åå¹²é¢ä¸çé²æ£æ§ã</span></p>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">éè¦çæ¯ï¼è¶æ¥è¶å¤çå·¥ä½è·¨è¶äºè¿äºç»´åº¦ï¼ä¾å¦å¨ä¸ä¸ªæ¶æä¸­èåéææ¦å¿µè·åãå³ç­åå¹²é¢ãå æ­¤ï¼æä»¬ä¾æ¬¡åé¡¾æ¯ä¸ªç»´åº¦å¹¶å¼ºè°ä»£è¡¨æ§æ¹æ³ã</span></p>
<p><img alt="image" loading="lazy" style="display: block; margin-left: auto; margin-right: auto" data-src="https://img2024.cnblogs.com/blog/1070495/202602/1070495-20260208192132128-733161976.png" class="lazyload"></p>
<p style="text-align: center"><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">è¡¨</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">1 </span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ¶µçæ¦å¿µè·åãå³ç­ãå¹²é¢åè¯ä¼°ç</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBM</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ¹æ³çç»ä¸åç±»ä½ç³»ãæ¦å¿µæ¥æºï¼äººå·¥æ æ³¨</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(manual)</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ãè¯å¸</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(dict.)</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ãè§è§åå</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(proto.)</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ãå¤§åè¯­è¨æ¨¡å</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(LLM)</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ï¼æ¦å¿µç©ºé´ç²åº¦</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(Gran.)</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ï¼æ¦å¿µä¸è§è§è¯æ®å¯¹é½çç©ºé´å±çº§ï¼å¨å±</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(global)</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ãå±é¨</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(local)</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æä¸¤èï¼æ¦å¿µçç£</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(Sup.)</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ï¼å¼º</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(strong)</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ãå¼±</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(weak)</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ãæ çç£</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(unsup.)</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ï¼æ¦å¿µç¶é¢å±</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(Bottleneck)</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ï¼</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ç¡¬</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(hard)</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ãè½¯</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(soft)</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ãæ··å</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(hybrid)</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ï¼æ¦å¿µç¸å³æ§å»ºæ¨¡</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(corr.)</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ï¼ç¬ç«</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(indep.)</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ãèå</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(joint)</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ãå¾</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(graph)</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ãå±çº§</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(hier.)</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ãå æ</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(causal)</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ï¼å¹²é¢æºå¶ï¼æ°å¼è°æ´</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(scalar)</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ãåæ°å</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(param.)</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ãæ©ç </span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">/</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ³¨æåç¼è¾</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(spatial)</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ãèªç¶è¯­è¨å¯¹è¯</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(lang.)</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ï¼å¹²é¢ç­ç¥ï¼éæº</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">/</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">äººå·¥éæ©</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(vanilla)</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ãæ¨¡åé©±å¨å»ºè®®</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(active)</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ãä¿®æ­£ä¼ æ­</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(prop.)</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ï¼ä»£ç ï¼</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">Link</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ï¼é¾æ¥ï¼ã</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">â (</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æªåå¸</span><span style="font-size: 12pt; line-height: 150%; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">)</span><span style="font-size: 12pt; line-height: 150%; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ã</span></p>
<h1><span style="font-size: 15pt; font-family: é»ä½" lang="EN-US">3 </span><span style="font-size: 15pt; font-family: é»ä½">æ¦å¿µè·å</span></h1>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ¦å¿µæå»ºæ¯æ¦å¿µç¶é¢æ¨¡åçåºç¡ï¼å®ä¹äºè¾å¥åé¢æµä¹é´çäººç±»å¯è§£éæ¥å£ãæ¦å¿µæå»ºå·²ç»ä»å®å¨çäººå·¥æ æ³¨æ¼åä¸ºåºäºè¯å¸çææã</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">LLM/VLM</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å¼å¯¼ççæåè§è§åååç°ãæ»ä½è¶å¿æ¯å¨æé«æ¦å¿µè´¨éãå¯æ©å±æ§åè§è§æ¥å°çåæ¶åå°äººå·¥çç£ãæ¬èåé¡¾åç§ä»£è¡¨æ§èå¼åå¶æ ¸å¿æºå¶ã</span></p>
<h2><span style="font-size: 14pt; font-family: é»ä½" lang="EN-US">3.1 </span><span style="font-size: 14pt; font-family: é»ä½">åºäºäººå·¥æ æ³¨çæ¦å¿µ</span></h2>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">äººå·¥æ æ³¨éè¿ä¾èµä¸å®¶å®ä¹åæ¾å¼æ è®°çæ¦å¿µï¼å¦è§è§å±æ§æä¸´åºåç°ï¼æä¾äºæå¼ºçè¯­ä¹æ¥å°ãè¿ç§èå¼ç¡®ä¿äºé«å¯è§£éæ§ä»¥åä¸é¢åç¥è¯çæ¸æ°å¯¹é½ï¼ä½ä»æ ¹æ¬ä¸åå°æ æ³¨ææ¬ãä¸å®å¨çæ¦å¿µè¦çåæ ç­¾åªå£°çéå¶ã</span></p>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">è¯¥èå¼æè¿çå·¥ä½ä¾§éäºå¨ä¸å®ç¾çç£ä¸æé«é²æ£æ§åçµæ´»æ§ãä¸ä¸ªç ç©¶æ¹åæ¯éè¿ä¿®æ¹è®­ç»ç®æ æ¥è§£å³åªå£°æç¼ºå¤±æ æ³¨çé®é¢ï¼ä¾å¦</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CPO<sup>[17]</sup></span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ï¼å®å¼å¥åºäºåå¥½çä¼åæ¥èåç¨³å®æ¦å¿µé¢æµåä¸æ¸¸æ§è½ãä¸ä¸ªäºè¡¥çæ¹åæ¯å¯¹æ æ³¨æ¦å¿µé´çä¾èµå³ç³»è¿è¡å»ºæ¨¡ï¼ä»¥åè½»æ³æ¼åè¡¨è¾¾è½åçéå¶ã</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">Havasi</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ç­äºº</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[18]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ç¨æ½å¨ä¾§ä¿¡éåéå¢å¼ºäºäººå·¥æ æ³¨çæ¦å¿µï¼å¹¶éç¨èªåå½é¢æµå¨æ¥æææ¦å¿µé´çç»æãä¸ºäºæ¯æå®éé¨ç½²ï¼</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">Editable CBMs<sup>[19]</sup></span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ¯æä½¿ç¨åºäºå½±åå½æ°çæ´æ°å¯¹æ¦å¿µå®ä¹åæ°æ®éæ ç­¾è¿è¡äºåä¿®æ­£ï¼èæ éå®å¨éæ°è®­ç»ãå°½ç®¡æè¿äºè¿å±ï¼äººå·¥æ æ³¨ä»ç¶é¾ä»¥æ©å±å°å¤æé¢åï¼ä¸å¶å¯¹é¢å®ä¹æ¦å¿µéçä¾èµéå¶äºå¯¹ä¸æ­ååä»»å¡çéåºæ§ã</span></p>
<h2><span style="font-size: 14pt; font-family: é»ä½" lang="EN-US">3.2 </span><span style="font-size: 14pt; font-family: é»ä½">åºäºè¯å¸çæ¦å¿µæå»º</span></h2>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">åºäºè¯å¸çæ¹æ³ç¨ä»é¢å®ä¹è¯æ±è¡¨ï¼å¦å½¢å®¹è¯åè¡¨æå»å­¦æè¿°ç¬¦ï¼ä¸­çå¯æ©å±åç°åä»£äºç¹å®ä»»å¡çäººå·¥å®ä¹ãéè¿å°æ¦å¿µç©ºé´éå¶ä¸ºè¯­è¨ä¸ææä¹çååï¼ä¸å¨èªå¨çæç¸æ¯ï¼è¿äºæ¹æ³æä¾äºæ´å¥½çå¯æ§æ§åéæåº¦ã</span></p>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ä»£è¡¨æ§æ¹æ³ä¾§éäºä»å¤§åè¯åºä¸­è¿æ»¤åºè§è§æ¥å°çæ¦å¿µã</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">V2C-CBM<sup>[20]</sup></span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æå»ºäºä¸ä¸ª</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">n-gram</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">åéæ± ï¼å¹¶ä½¿ç¨åºäº</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CLIP</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">çè§è§</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">-</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">è¯­è¨ç¸ä¼¼åº¦æ¥ç§»é¤ä¸è§è§æ å³ææ¥å°è¾å¼±çæ¡ç®ï¼äº§çç´§åä¸å¯è§£éçæ¦å¿µéã</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">OpenCBM<sup>[9]</sup></span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">è¿ä¸æ­¥å°å¯è®­ç»çè§è§ç¹å¾ä¸</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CLIP</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">åµå¥å¯¹é½ï¼å¹¶å¼å¥äºåç°ç¼ºå¤±æ¦å¿µçæºå¶ï¼ä»èæé«äºè¶åºåå§è¯å¸çè¦çèå´ã</span></p>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">è½ç¶åºäºè¯å¸çæå»ºéä½äºæ æ³¨ææ¬å¹¶éå¶äºå¹»è§é£é©ï¼ä½å¶è¡¨è¾¾è½åä»ç¶åå°é¢å®ä¹è¯æ±è¡¨çéå¶ï¼å¯è½æ æ³ææç»ç²åº¦æç¹å®ä»»å¡çè¯­ä¹ã</span></p>
<h2><span style="font-size: 14pt; font-family: é»ä½" lang="EN-US">3.3 </span><span style="font-size: 14pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;" lang="EN-US">LLM/VLM</span><span style="font-size: 14pt; font-family: é»ä½">å¼å¯¼çæ¦å¿µçæ</span></h2>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">LLM</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">VLM</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å¼å¯¼çæ¦å¿µçæéè¿å©ç¨å¤§åè¯­è¨æ¨¡åäº§çå¤æ ·åãé«å±æ¬¡ä¸éå¸¸æ¯åå±çè¯­ä¹ï¼å¤§å¹æ©å±äºæ¦å¿µç©ºé´ãè¿ç§èå¼æä¾äºå¼ºå¤§çå¯æ©å±æ§åçµæ´»æ§ï¼ä½ä¹å¼å¥äºä¸å¹»è§ãå¼±è§è§æ¥å°åè¯­ä¹ä¸ç¨³å®æ§ç¸å³çæ°ææã</span></p>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æè¿çå·¥ä½éè¿ç»æãå¯¹é½åç»è®¡æ­£ååæ¥è§£å³è¿äºé®é¢ã</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">Med-MICN<sup>[21]</sup></span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å°æ¦å¿µç»ç»æå¤å±çº§ç»æï¼å¹¶éç¨é¨æ§æºå¶æ¥æ§å¶æ½è±¡ç¨åº¦ãè§è§</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">-</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">è¯­è¨ä¸è´æ§çº¦æ</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[22, 23, 24]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">åæç¤ºçº§å¯¹é½ç­ç¥</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[25]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">è¿ä¸æ­¥æé«äºæ¥å°çå¯é æ§ãä»çç£è§åº¦æ¥çï¼</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">Label-free CBMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">FCBM<sup>[26, 27]</sup></span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">è¯æï¼åªè¦æ½å äºå¼ºå¤§çè§è§æ­£ååï¼éè¿å°</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">LLM</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ä¸</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CLIP</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ç»åï¼å¯ä»¥å¨æ²¡ææ¾å¼æ æ³¨çæåµä¸è¯±å¯¼åºå¯ç¨æ¦å¿µã</span></p>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ»ä½èè¨ï¼</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">LLM/VLM</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å¼å¯¼çæ¦å¿µè·åæ¾èéä½äºäººç±»çç£è¦æ±ï¼ä½å¶å¯è§£éæ§æç»åå³äºè¯­è¨åéªçå¯é æ§åæ¥å°çº¦æçæææ§ã</span></p>
<h2><span style="font-size: 14pt; font-family: é»ä½" lang="EN-US">3.4 </span><span style="font-size: 14pt; font-family: é»ä½">åºäºè§è§ååçæ¦å¿µåç°</span></h2>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">åºäºè§è§ååçæ¹æ³éè¿æåä»£è¡¨æ§åºåãé¨ä»¶æè§£ç¼ ç»ä»¶ï¼ç´æ¥ä»å¾åç©ºé´å­¦ä¹ æ¦å¿µï¼äº§çå¼ºå¤§çè§è§æ¥å°åç©ºé´å®ä½ãè¿ç§èå¼å¯¹äºå»å­¦æååå¶ä»å½¢æå­¦è¯æ®å¯¹å³ç­è³å³éè¦çé¢åç¹å«æå¸å¼åã</span></p>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">åºäºååçåç°é¢ä¸´åºæçææï¼åæ¬ä¸ç¨³å®çè¯­ä¹å½åãæ¾èæ§é©±å¨çèåç¸å³æ§ä»¥åååç²åº¦ä¸è¦çèå´ä¹é´çæè¡¡ãæè¿çå·¥ä½æ¢ç´¢äºå ç§è®¾è®¡æ¨¡å¼æ¥åè½»è¿äºéå¶ãé¢åè§£ç¼ çæ¹æ³ï¼å¦</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">HU-MCD</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ã</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">LCBM<sup>[28, 29]</sup></span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ï¼å­¦ä¹ å¤ç»´æ¦å¿µå å­ä»¥åå°è¯­ä¹æªæææ§ãé¢åé¨ç½²çæ¹æ³</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[30, 31]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ä¸æ³¨äºä»é¢è®­ç»æ¨¡åä¸­æåååè¯å¸ä»¥å®ç°äºåå¯è§£éæ§ãé¢åäº¤äºçè®¾è®¡</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[32, 33]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ¾å¼å°å°ååä¸ç©ºé´åºåå³èï¼æ¯æåºåçº§çæ£æ¥åå¹²é¢ã</span></p>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å°½ç®¡æ¥å°ä¿çåº¦æææé«ï¼ä½å¨æ°æ®éä¹é´å®ç°è§è§ååçç¨³å®è¯­ä¹å¯¹é½åå¯æ©å±éç¨ä»ç¶æ¯ä¸ä¸ªå¼æ¾çææã</span></p>
<p class="MsoNormal" style="text-indent: 24.1pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><strong><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ»ç»ã</span></strong><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US"> CBMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ä¸­çæ¦å¿µè·åæ¶µçäºä»ä¸å®¶å®ä¹çè¯­ä¹å°èªå¨åç°çèå´ï¼åæ äºè¯­ä¹ç²¾åº¦ãçç£ææ¬åé²æ£æ§ä¹é´çæè¡¡ï¼å¹¶æ¿åäºæ´åè¯­è¨åè§è§çº¿ç´¢çæ··åè®¾è®¡ã</span></p>
<h1><span style="font-size: 15pt; font-family: é»ä½" lang="EN-US">4 </span><span style="font-size: 15pt; font-family: é»ä½">åºäºæ¦å¿µçå³ç­</span></h1>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ¦å¿µç¶é¢æ¨¡å</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(CBMs)</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">éè¿å¯è§£éæ¦å¿µå±ä¸­ä»é¢æµæ¥æé«å¯è§£éæ§ï¼ä½¿éªè¯åå¹²é¢æä¸ºå¯è½ãé¤äºæ¦å¿µæå»ºï¼</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBM</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ¶æä¹å¨ä¸æ­æ¼åä»¥å¢å¼ºçµæ´»æ§åå¯é¨ç½²æ§ãæ¬èåé¡¾ä¸ä¸ªå³é®æ¹åï¼ç¶é¢è®¾è®¡ãæ¦å¿µçç£åæ¨¡åéåºï¼å¼ºè°äºä»ç¡¬æ§æµç¨åèªéåºãä¸äººç±»å¯¹é½çå³ç­è½¬åã</span></p>
<h2><span style="font-size: 14pt; font-family: é»ä½" lang="EN-US">4.1 </span><span style="font-size: 14pt; font-family: é»ä½">ç¶é¢è®¾è®¡</span></h2>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">çä¸é¡¹æ ¸å¿åæ°å¨äºæ¦å¿µç¶é¢å¦ä½éè¿ä¸­ä»è¾å¥åè¾åºä¹é´çä¿¡æ¯æµæ¥ç®¡çå³ç­è¿ç¨ãæ©æçè®¾è®¡å¼ºå¶æ§è¡ä¸¥æ ¼çæµç¨ï¼å³ææé¢æµä¿¡å·å¿é¡»éè¿ç¦»æ£çãå¯è§£éçæ¦å¿µå±ï¼ä»èæå¤§åéæåº¦åå¯å¹²é¢æ§ãç¶èï¼è¿ç§åæ§ç»æå¾å¾éå¶äºè¡¨ç¤ºè½åï¼å¹¶å¨ä¸å®ç¾çæ¦å¿µçç£ä¸æå®³æ§è½ã</span></p>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ä¸ºäºè§£å³è¿äºéå¶ï¼å¼å¥äºè½¯ç¶é¢</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[33, 34]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ï¼å®ç°äºè¿ç»­çæ¦å¿µæ¿æ´»ä»¥åæ¦å¿µåä»»å¡é¢æµå¨çèåä¼åãéåçåä½éè¿æ®å·®éè·¯</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[49]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">åç»æåä¾èµå³ç³»æ¾å®½äºä¸¥æ ¼ç¶é¢ï¼åæ¬èªåå½åºå</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[15]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ãå¾åéª</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[61, 52]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">åéæºæ½åé</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[57]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ã</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">Energy-based CBMs<sup>[60]</sup></span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">è¿ä¸æ­¥å¨èåæ¦çæ¡æ¶åç»ä¸äºé¢æµåå¹²é¢ãæ´è¿æçå·¥ä½å°æ´é«å±æ¬¡çç»ææ³¨å¥ç¶é¢ï¼ä¾å¦ç¨äºé²æ£å¹²é¢çå æå¾</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[6]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ï¼ç¨äºåè½»æ¦å¿µ</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">-</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ ç­¾å¤±ççæ¦å¿µè§£è¦</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[64]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ï¼ä»¥åç¨äºå¨å¤æè®¾ç½®ä¸­è¶è¶çº¿æ§èåçå¯å¾®é»è¾ç»å</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[58, 13]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ã</span></p>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">è¿äºè¿å±å±ååæ äºä¸¥æ ¼ç¶é¢åæ´å·è¡¨è¾¾ååç»æåæ¶æçéæ¸æ¾æ¾ï¼ä½¿</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">è½å¤å¨å¤æçç°å®ç¯å¢ä¸­æ´å¥½å°å¹³è¡¡å¯è§£éæ§åé¢æµè½åï¼åæ¶ä¿çæ¦å¿µå±ä½ä¸ºè§£éåå¹²é¢çå¯¹é½è¯­ä¹æ¥å£ã</span></p>
<h2><span style="font-size: 14pt; font-family: é»ä½" lang="EN-US">4.2 </span><span style="font-size: 14pt; font-family: é»ä½">æ¦å¿µçç£</span></h2>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ¦å¿µçç£å®ä¹äº</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">çä¸­é´è¯­ä¹å±æ¯å¦ä½æå»ºåæ¥å°çãè½ç¶æ©ææ¨¡åä¾èµäºå·æå¼ºé¢åè¯­ä¹çäººå·¥æ æ³¨æ¦å¿µ</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[5]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ï¼ä½è¿ç§çç£éå¸¸ææ¬é«æãç¨çæç¹å®äºé¢åãå æ­¤ï¼æè¿çç ç©¶å¯»æ±å¯æ©å±å°æ´å¹¿æ³ä»»å¡ä¸åæ¶ä¿çè¯­ä¹å¯è§£éæ§çæ¿ä»£æ¹æ¡ã</span></p>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">Post-hoc CBMs<sup>[44]</sup></span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">éè¿å¨å»ç»çç¼ç å¨ä¹ä¸å­¦ä¹ æ¦å¿µé¢æµå¨æ¥ç»è¿æ¶æçº¦æï¼æ ééæ°è®­ç»å³å¯æ¢å¤æ¦å¿µå¯è§£éæ§ãåºäºæ¢æµçæ¹æ³</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[45]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ååååç°æ¹æ³</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[32, 30]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ä½¿ç¨ç¨çæ­£ååæåºäºé¨ä»¶çåè§£ä»é¢è®­ç»ç¹å¾ä¸­æåå¯è§£éååãå©ç¨è§è§</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">-</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">è¯­è¨æ¨¡åï¼åºäº</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CLIP</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">çæµç¨</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[46, 26, 47]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å°æ¦å¿µæ ç­¾ä¸ææ¬æç¤ºå¯¹é½ï¼å®ç°å¼æ¾è¯æ±çç£ã</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">LLM</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å¼å¯¼çç­ç¥</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[21, 22, 48, 49]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ´è¿ä¸æ­¥ï¼éè¿çæåå±æç¹å®ä»»å¡çæ¦å¿µï¼å°½ç®¡è§è§æ¥å°åå¹»è§æ¹é¢çææä»ç¶å­å¨ã</span></p>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">è¿äºæ¹æ³å°æ¦å¿µçç£ä»ç´æ¥æ æ³¨è½¬åä¸ºåºäºå¯¹é½åæç¤ºçå½çº³ï¼å®ç°äºå¯æ©å±åèªéåºçæ¦å¿µæå»ºãè¿ç§æ¼åä¿çäº</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ä¸äººç±»å¯¹é½çè¯­ä¹ï¼åæ¶æé«äºè·¨ä»»å¡åé¢åççµæ´»æ§ã</span></p>
<h2><span style="font-size: 14pt; font-family: é»ä½" lang="EN-US">4.3 </span><span style="font-size: 14pt; font-family: é»ä½">æ¨¡åéåº</span></h2>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ä¸ºäºä½¿</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å¨ç°å®ä¸çåä¸æ­ååçç¯å¢ä¸­å·æå®ç¨ä»·å¼ï¼å®ä»¬å¿é¡»æ¯æå¨æéåºãå·æåºå®æ¦å¿µçéææµç¨å¨ä»»å¡éæ±è½¬åãæ°æ¦å¿µåºç°æéè¦ç¨æ·ä¿®æ­£æ¶é¾ä»¥æ´æ°ãå æ­¤ï¼æ¨¡åéåºå·²æä¸ºå¯æä½</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">çä¸ä¸ªå³é®åæ²¿ã</span></p>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">Editable CBMs<sup>[19]</sup></span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å¼å¥äºåºäºå½±åå½æ°çåæ°æ´æ°ï¼åè®¸å¯¹æ¦å¿µãå®ä¾ææ ç­¾é¢æµè¿è¡å±é¨æ´æ¹ï¼èæ éå®å¨éæ°è®­ç»ãè¿åè®¸å¨ä¿çæ¨¡åæ´ä½ç»æçåæ¶è¿è¡ç»ç²åº¦çä¿®æ­£åæ°æ®éæ´æ°ãæ¦çè½éæ¨¡å</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[13]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">éè¿å°æ¨çå¬å¼åä¸ºè¾å¥ãæ¦å¿µåè¾åºä¸çè½éæå°åæ¥æ¯ææµè¯æ¶ä¿®æ­£ãæ´å·äº¤äºæ§çæ¯ï¼æè¿çæ¹æ³å¦</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">Chat-CBM<sup>[50]</sup></span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">SALF<sup>[51]</sup></span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ©å±äºæ¨¡åæ¥å£ä»¥æ¯æèªç¶è¯­è¨ååºäºç©ºé´åºåçå¹²é¢ï¼ä½¿éææ¯ç¨æ·ä¹è½è¿è¡éåºãæ éè®­ç»çæµè¯æ¶éåº</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[52, 53]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">è¿ä¸æ­¥ä½¿</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">è½å¤ä»ä½¿ç¨å°éå¾åçº§æ ç­¾å¤çæ¦å¿µçº§åå¸åç§»ï¼èæ ééæ°è®­ç»ææ¦å¿µçç£ã</span></p>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">è¿äºè¿å±æ å¿çä»éæå¯è§£éæ§åå¨æãäººå¨åè·¯å³ç­çè½¬åãéåºæ§</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ä¿çäºå¶æ ¸å¿è¯­ä¹ç¶é¢ï¼åæ¶åè®¸é¨ç½²åç¼è¾ãä¿®æ­£ååä½ï¼æ©å±äºå¶å¨ç°å®ä¸çé«é£é©ç³»ç»ä¸­ççå­è½åã</span></p>
<p class="MsoNormal" style="text-indent: 24.1pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><strong><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ»ç»ã</span></strong><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US"> CBMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ä¸­çåºäºæ¦å¿µçå³ç­å·²ä»ä¸¥æ ¼çç¶é¢ç®¡éæ¼åä¸ºæ´çµæ´»çæ¶æï¼æ´å¥½å°å¹³è¡¡äºå¯è§£éæ§åæ§è½ãç¶é¢è®¾è®¡ãçç£åæ¨¡åéåºæ¹é¢çè¿æ­¥å°æ¦å¿µå±å®ä½ä¸ºç¨äºé¢æµåå¹²é¢çå¨ææ¥å£ã</span></p>
<h1><span style="font-size: 15pt; font-family: é»ä½" lang="EN-US">5 </span><span style="font-size: 15pt; font-family: é»ä½">æ¦å¿µå¹²é¢</span></h1>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ¦å¿µå¹²é¢éè¿ä¿®æ­£ä¸­é´æ¦å¿µå®ç°äººç±»ä¸</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">AI</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">çåä½ï¼å°</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ä»è¢«å¨çå¯è§£éæ¨¡åè½¬åä¸ºäº¤äºå¼ç³»ç»ãå¨</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">Koh</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ç­äºº</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[5]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">çå¼åæ§å·¥ä½ä¸­ï¼å¹²é¢è¢«å¬å¼åä¸ºåè®¸ç¨æ·ä¿®æ¹æ¦å¿µæ¿æ´»å¼çæµè¯æ¶ç¼è¾ãè½ç¶å·æåºç¡æä¹ï¼ä½è¿ç§èå¼ä¾èµäºå¼ºç¬ç«æ§åè®¾ï¼äº§çé«æçäººåææ¬ï¼å¹¶æ¯ææéçäº¤äºæ¨¡å¼ã</span></p>
<h2><span style="font-size: 14pt; font-family: é»ä½" lang="EN-US">5.1 </span><span style="font-size: 14pt; font-family: é»ä½">æ¦å¿µç¸å³æ§</span></h2>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ©æçå¹²é¢æºå¶éå¸¸åè®¾æ¦å¿µæ¯ç¬ç«çï¼è¿æå³çä¿®æ¹ä¸ä¸ªæ¦å¿µä¸ä¼å½±åå¶ä»æ¦å¿µãè¿ç§åè®¾å¨ç°å®ä¸çè®¾ç½®ä¸­éå¸¸æ¯ä¸ç°å®çï¼å ä¸ºæ¦å¿µå¨å¤æå³ç­ä»»å¡ä¸­å®éä¸è¡¨ç°åºå¾å¼ºçè¯­ä¹åç»è®¡ä¾èµæ§ãä¸ºäºè§£å³è¿ä¸éå¶ï¼ç¸å³æ§æç¥çå¹²é¢æ¹æ³æ¾å¼å°å¯¹æ¦å¿µé´å³ç³»è¿è¡å»ºæ¨¡å¹¶æ®æ­¤ä¼ æ­ä¿®æ­£ã</span></p>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">Havasi</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ç­äºº</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[18]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æåºäºèªåå½æ¦å¿µé¢æµå¨ï¼åè®¸å¯¹åæ¦å¿µçå¹²é¢éè¿åºåä¾èµå»ºæ¨¡å½±ååç»­é¢æµã</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">Stochastic CBMs<sup>[39]</sup></span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">éè¿å°æ¦å¿µ</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">Logits</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å»ºæ¨¡ä¸ºå¤åæ­£æåå¸ï¼è¿ä¸æ­¥æé«äºæçï¼å®ç°äºéè¿å­¦ä¹ å°çåæ¹å·®ç»æå³æ¶ä¼ æ­åä¸ªå¹²é¢ã</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">Energy-Based CBMs<sup>[13]</sup></span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">éç¨è¾å¥ãæ¦å¿µåè¾åºä¸çèåè½éå¬å¼ï¼åè®¸æ¦å¿µä¿®æ­£éè¿è½éæå°åè¿è¡ä¼ æ­ã</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">Singhi</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ç­äºº</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[38]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å¼å¥äºäºåæ¦å¿µéå¯¹é½æ¨¡å</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(CIRM)</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ï¼æ ¹æ®å­¦ä¹ å°çç»è®¡ç¸å³æ§æ´æ°æªå¹²é¢çæ¦å¿µã</span></p>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">è½ç¶è¿äºæ¹æ³æ¾èæé«äºå¹²é¢çä¸è´æ§åæçï¼ä½å®ä»¬å³é®å°ä¾èµäºå­¦ä¹ å°çç¸å³æ§çè´¨éãå¦æææå°èåä¾èµå³ç³»ï¼å¹²é¢å¯è½ä¼ä¼ æ­éè¯¯èä¸æ¯ä¿®æ­£ï¼è¿çªæ¾äºä¸ä¸ªéè¦çå¼æ¾ææã</span></p>
<h2><span style="font-size: 14pt; font-family: é»ä½" lang="EN-US">5.2 </span><span style="font-size: 14pt; font-family: é»ä½">æ¦å¿µå®ä½</span></h2>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ç¡®å®å¹²é¢åªäºæ¦å¿µä»ç¶æ¯å®éé¨ç½²ä¸­çä¸»è¦ç¶é¢ï¼å ä¸ºäººå·¥éæ©æ¯å³å¨å¯éçä¸å¯¹è®¤ç¥å·æé«è¦æ±çãä¸ºäºåè½»è¿ä¸è´æï¼æè¿çå·¥ä½å·²è½¬åæ¨¡åå¼å¯¼çå®ä½ç­ç¥ï¼ä¼åèèé«å½±ååçå¹²é¢ç®æ ã</span></p>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ä¸äºæ¹æ³å°å®ä½ååå°è®­ç»ææ¨¡åè®¾è®¡ä¸­ã</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">Espinosa Zarlenga</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ç­äºº</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[10]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å¼å¥äºæç¥å¹²é¢çè®­ç»ï¼å¨å­¦ä¹ è¿ç¨ä¸­æ¨¡ææµè¯æ¶å¹²é¢ï¼ä½¿æ¨¡åè½å¤æ¨èéè¦ä¿®æ­£çæ¦å¿µã</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">Evidential CEM(evi-CEM)<sup>[54]</sup></span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å°æ¦å¿µé¢æµå»ºæ¨¡ä¸º</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">Beta</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">åå¸ï¼å©ç¨è®¤ç¥ä¸ç¡®å®æ§æå¯¼å¯¹æ¨¡ç³æ¦å¿µçå¹²é¢ãå¶ä»æ¹æ³ä¾èµäºäºååææè¾å©ç»æã</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">Shin</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ç­äºº</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[14]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æåºäºåºäºä¸ç¡®å®æ§çæ¦å¿µæ½å</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(UCP)</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">åæ¦å¿µé¢æµæå¤±</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(LCP)</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ç­ææ æ¥å¯¹å¹²é¢ä¼åçº§è¿è¡æåºã</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">Shen</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ç­äºº</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[55]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">è¿ä¸æ­¥å¼å¥äº</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">FIGS-BD</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ï¼å°é¢æµå¨è¸é¦ä¸ºè´ªå©ªæ±åæ ï¼ä»¥è¯å«å·æé«è´¡ç®æ¹å·®çæ¦å¿µç»ã</span></p>
<h2><span style="font-size: 14pt; font-family: é»ä½" lang="EN-US">5.3 </span><span style="font-size: 14pt; font-family: é»ä½">æ¦å¿µäº¤äº</span></h2>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">é¤äºéæ©åä¿®æ­£æ¦å¿µå¼ä¹å¤ï¼æè¿çå·¥ä½è¶æ¥è¶å¤å°æ¢ç´¢æ´ä¸°å¯çäº¤äºæ¨¡å¼ï¼è¿äºæ¨¡å¼å¯¹äººç±»ç¨æ·æ¥è¯´æ´ç´è§</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[56]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ã</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">Chat-CBM<sup>[50]</sup></span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ç¨å¤§è¯­è¨æ¨¡åæ¿æ¢åºäºæ¦å¿µçé¢æµå¨ï¼åè®¸ç¨æ·éè¿èªç¶è¯­è¨å¯¹è¯è¿è¡å¹²é¢ãè½ç¶è¿å¨å®è·µä¸­æé«äºå¯ç¨æ§ï¼ä½å¯è½ä¼åå¼±ä¼ ç»</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">çä¸¥æ ¼å¯è§£éæ§ä¿è¯ã</span></p>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å¨è§è§é¢åï¼</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">Concept-based Similarity Reasoning (CSR)<sup>[33]</sup></span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">éè¿åè®¸ç¨æ·ç»å¶è¾¹çæ¡æ¥å¼å¯¼æ¨¡åæ³¨æåï¼å®ç°äºç©ºé´äº¤äºãç¶èï¼è¿ç§ç©ºé´å¼å¯¼å¹¶æ²¡ææ¾å¼å°è§£è¦ä¸åæ¦å¿µé´çå¹²é¢ã</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">Spatially-Aware and Label-Free (SALF) CBM<sup>[51]</sup></span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">éè¿å©ç¨ç©ºé´æ¦å¿µå¾è§£å³äºè¿ä¸éå¶ï¼ä½¿ç¨æ·è½å¤æå®æå´è¶£çåºåå¹¶éæ©æ§å°è°èè¯¥åºåååä¸ªæ¦å¿µçæ¿æ´»ãé¤äºå¤å«æ¨¡åï¼æ¦å¿µç¶é¢çææ¨¡åå°æ¦å¿µçº§äº¤äºæ©å±å°</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">GANs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ã</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">VAEs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">åæ©æ£æ¨¡åï¼å®ç°äºçæçå¯è§£éå¼å¯¼åè°è¯</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[57]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ã</span></p>
<p class="MsoNormal" style="text-indent: 24.1pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><strong><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ»ç»ã</span></strong><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ¦å¿µå¹²é¢å°</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ä»éæè§£éæ¨¡åè½¬åä¸ºäº¤äºå¼çäººå¨åè·¯ç³»ç»ãéè¿å»ºæ¨¡æ¦å¿µç¸å³æ§ãå®ç°å¹²é¢ç®æ çææå®ä½ä»¥åæ¯ææ´ä¸°å¯çäº¤äºæ¨¡å¼ï¼æè¿çè¿å±æé«äºæ¦å¿µçº§ä¿®æ­£çæææ§åå¯ç¨æ§ã</span></p>
<h1><span style="font-size: 15pt; font-family: é»ä½" lang="EN-US">6 </span><span style="font-size: 15pt; font-family: é»ä½">æ¦å¿µç¶é¢æ¨¡åçè¯ä¼°</span></h1>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ¦å¿µç¶é¢æ¨¡åå¼å¥äºå¯è§£éåå¯å¹²é¢çä¸­é´æ¦å¿µï¼è¿è¦æ±è¯ä¼°åè®®è¶è¶ä¸æ¸¸ä»»å¡æ§è½ãå æ­¤ï¼ç°æçè¯ä¼°æ¡æ¶è¯ä¼°ä¸ä¸ªæ ¸å¿ç»´åº¦ï¼æ¦å¿µå¿ å®åº¦ãæ¦å¿µç¨çæ§åå¯å¹²é¢æ§ï¼ä»èææè¯­ä¹æææ§ãè®¤ç¥æå¤çæ§åäººå¨åè·¯çå¯æ§æ§ã</span></p>
<h2><span style="font-size: 14pt; font-family: é»ä½" lang="EN-US">6.1 </span><span style="font-size: 14pt; font-family: é»ä½">æ¦å¿µå¿ å®åº¦</span></h2>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ¦å¿µå¿ å®åº¦è¡¡éå­¦ä¹ å°çç¶é¢è¡¨ç¤ºæ¯å¦ä¸äººç±»å¯çè§£çè¯­ä¹å¯¹é½ï¼è¿æ¯å®è·µä¸­å¯é è§£éåææå¹²é¢çåæãè¯ä¼°ç­ç¥å·²ä»ç´æ¥æ ç­¾å¹éæ¼åä¸ºå¯¹åå¨ç»æåå¤é¨æ¥å°çæ´ä¸¥æ ¼è¯ä¼°ã</span></p>
<p class="MsoNormal" style="text-indent: 24.1pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><strong><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ ç­¾å¯¹é½ã</span></strong><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ä¸ç§å¸¸è§çæ¹æ³æ¯ä½¿ç¨æ åææ ï¼å¦åç¡®çå</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">F1</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">åæ°ï¼è¯ä¼°é¢æµæ¦å¿µä¸çå®æ æ³¨ä¹é´çä¸è´æ§ãç¶èï¼å¨é«ç»´åç¨çæ¦å¿µç©ºé´ä¸­ï¼è¿äºææ å¯è½ç±çè´æ ·æ¬ä¸»å¯¼ãä¸ºäºåè½»è¿ç§åå·®ï¼æè¿çå·¥ä½å¼ºè°ä½¿ç¨</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">Jaccard</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ç¸ä¼¼åº¦</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[58]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">åæ¦å¿µå­å¨åº¦é</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(CEM)<sup>[59]</sup></span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ç­ææ è¿è¡ä¸»å¨æ¦å¿µè¯ä¼°ï¼è¿äºææ ä¾§éäºè¢«æ­£åæ¿æ´»çæ¦å¿µã</span></p>
<p class="MsoNormal" style="text-indent: 24.1pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><strong><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">åå¨è¡¨ç¤ºè´¨éã</span></strong><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">é¤äºæ ç­¾å¹éå¤ï¼ææçæ¦å¿µè¡¨ç¤ºåºå·æè¿è´¯çææç»æåææ¾çå¯åç¦»æ§ãå¨åºäºåµå¥çæ¨¡åä¸­ï¼æ¦å¿µå¯¹é½åæ°</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(CAS)<sup>[10]</sup></span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">è§£å³äºçåèçè¯ä¼°ï¼éªè¯é«ç»´ç©ºé´ä¸­çå±é¨é»åæ¯å¦ä¿æè¯­ä¹åè´¨æ§ãä½ä¸ºè¡¥åï¼ä¸ºäºå¨åºäºæ éçç¶é¢ä¸­è§£å³çåèçè¯ä¼°ï¼</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">Gap<sup>[60, 61]</sup></span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">éè¿æµéæ­£è´æ¿æ´»åå¸ä¹é´çæ£åº¦æ¥è¯ä¼°æ½å¨ç©ºé´çå¯åæ§ï¼ä»èéåè¡¨ç¤ºçåå¨å¤å«è´¨éã</span></p>
<p class="MsoNormal" style="text-indent: 24.1pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><strong><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">è¯­ä¹åè§è§æ¥å°ã</span></strong><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ä¸ºäºæ£æµèåç¸å³æ§ï¼è¿ä¸æ­¥çè¯ä¼°å°å­¦ä¹ å°çæ¦å¿µä¸å¤é¨è¯­ä¹æè§è§åèå¯¹é½ãè¯­ä¹æ¥å°ææ ï¼åæ¬</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CGIM<sup>[59]</sup></span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ã</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">Similarity<sup> [36]</sup></span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">åæ¦å¿µçº¯åº¦</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[11]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ï¼è¯ä¼°ä¸äººç±»å®ä¹çéè¦æ§æä¸è§èåµå¥çä¸è´æ§ãè§è§æ¥å°ææ ï¼å¦æ¦å¿µå¯ä¿¡åº¦åæ°</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[32]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CLM<sup>[59]</sup></span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ï¼éåæ¦å¿µæ¿æ´»ä¸æ æ³¨åºåä¹é´çç©ºé´å¯¹é½ãè½ç¶å¨å®è·µä¸­ææï¼ä½è¿äºæ¹æ³éå¸¸éè¦æè´µçæ æ³¨ï¼åºäº</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">VLM</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">çæ¿ä»£æ¹æ¡å¦æ¦å¿µ</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">-</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å¾åç¸å³æ§</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[11]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">åå°äºçç£ï¼ä½å¼å¥äºæ½å¨çå¹»è§é£é©ã</span></p>
<h2><span style="font-size: 14pt; font-family: é»ä½" lang="EN-US">6.2 </span><span style="font-size: 14pt; font-family: é»ä½">æ¦å¿µç¨çæ§</span></h2>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ¦å¿µç¨çæ§è¯ä¼°</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ¯å¦ä¾èµäºä¸ç»æå°ä¸è®¤ç¥ä¸å¯ç®¡ççæ¦å¿µãè¿åº¦å¯éçç¶é¢ç ´åäºå¯è§£éæ§å¹¶å¢å äºä¿¡æ¯æ³æ¼çé£é©ãç¨çåº¦</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[58]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">åæææ¦å¿µæ°</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(NEC)<sup>[62]</sup></span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ç­ææ éåäºæ¿æ´»å¯åº¦åæ¨çå¤ææ§ãç¶èï¼ç¨çæ§å¿é¡»ä¸ä»»å¡æ§è½èåèèãä¸ºäºææè¿ç§æè¡¡ï¼æ¦å¿µå©ç¨æç</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(CUE)<sup>[36]</sup></span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">åæ¦å¿µé«æåç¡®ç</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(CEA)<sup>[63]</sup></span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ç­å¤åææ å¨é¢æµåç¡®çä¸æ¦å¿µä½¿ç¨ä¹é´è¿è¡å¹³è¡¡ï¼å¶ä¸­</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CEA</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æä¾äºä¸ä¸ªæççãææ¬ä¸åçå¬å¼ä»¥è¿è¡ç¨³å¥æ¯è¾ã</span></p>
<h2><span style="font-size: 14pt; font-family: é»ä½" lang="EN-US">6.3 </span><span style="font-size: 14pt; font-family: é»ä½">å¯å¹²é¢æ§</span></h2>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å¯å¹²é¢æ§åæ äº</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å¨æ¨çæ¶æ¯æææäººç±»ä¿®æ­£çè½åãæ­¤ç±»å«çè¯ä¼°åè®®è¯ä¼°æ¨¡åé¢æµå¯¹æ¦å¿µçº§ä¿®æ­£çååºè½åä»¥åå¹²é¢ç­ç¥çæçãæµè¯æ¶å¹²é¢</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(TTI)</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ²çº¿</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[5]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">åå¶æ²çº¿ä¸é¢ç§¯åä½</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[64]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">è¢«å¹¿æ³ç¨äºæ»ç»å¨å¢å å¹²é¢é¢ç®ä¸çæ§è½å¢çãæ©å±è¿ä¸åæï¼æè¿çå·¥ä½æ£æ¥äºç¸å³æ¦å¿µé´çä¿®æ­£ä¼ æ­</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[39]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ï¼å¹¶éè¿ç»éªç¨æ·æ¶é´</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[60]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æçè®ºå¤ææ§</span><sup><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[14, 65]</span></sup><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ¾å¼å°å»ºæ¨¡å¹²é¢ææ¬ã</span></p>
<p class="MsoNormal" style="text-indent: 24.1pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><strong><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ»ç»ã</span></strong><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">è¯ä¼°</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">éè¦è¶è¶ä¸æ¸¸åç¡®ççæ´ä½åè®®ãæ¦å¿µå¿ å®åº¦ç¡®ä¿è¯­ä¹æææ§ï¼æ¦å¿µç¨çæ§ä¿æè®¤ç¥æå¤çæ§ï¼å¯å¹²é¢æ§éåäººå¨åè·¯ä¿®æ­£çæææ§åææ¬ãè¿äºç»´åº¦å±åææäºè¯ä¼°</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å¯è§£éæ§ãå¯é æ§åå®ç¨æ§çåååºç¡ã</span></p>
<h1><span style="font-size: 15pt; font-family: é»ä½" lang="EN-US">7 </span><span style="font-size: 15pt; font-family: é»ä½">åºå</span></h1>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">è¡¨</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">2</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ»ç»äºç¨äºè¯ä¼°ä¸è¬åå»çé¢åæ¦å¿µç¶é¢æ¨¡å</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(CBMs)</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">çä»£è¡¨æ§åºåãè¿äºæ°æ®éå¨æ¦å¿µæ æ³¨æ¥æºãçç£ç²åº¦åå¯¹æ¦å¿µçº§å¹²é¢çæ¯ææ¹é¢å­å¨æ¾èå·®å¼ï¼è¿åè¿æ¥å³å®äº</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">çåªäºæ¹é¢ï¼å¦å¿ å®åº¦ãå¯æ©å±æ§æå¯å¹²é¢æ§ï¼å¯ä»¥å¾å°å¯é è¯ä¼°ãä¸æ·±åº¦æ¨¡åä¸åï¼</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ä¾èµäºåºåè®¾è®¡æ¥éªè¯æ¦å¿µå¿ å®åº¦åå¹²é¢æææ§ã</span></p>
<p class="MsoNormal" style="text-indent: 24.1pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><strong><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ä¸è¬é¢åæ°æ®éã</span></strong><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ä¸è¬é¢ååºåå¨è§è§åææ¬è¯å«ä»»å¡ä¸è¯ä¼°</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ï¼åæ¬ç»ç²åº¦åç±»ãé¶æ ·æ¬å­¦ä¹ å</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">NLP</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">åºç¨ãä¸ä¸ªå³é®åºå«å¨äºæ¦å¿µçç£ãå·æäººå·¥æ æ³¨æ¦å¿µçæ°æ®éï¼å¦</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CUB-200-2011</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">AWA2</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ï¼æ¯ææ¦å¿µè¯ä¼°åæµè¯æ¶å¹²é¢ï¼ä½¿æ¦å¿µä¿®æ­£çå æåææä¸ºå¯è½ãç¸æ¯ä¹ä¸ï¼ä¾èµ</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">LLM</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">VLM</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">çææ¦å¿µçå¤§è§æ¨¡åºåè¯ä¼°å¯æ©å±æ§åå¼æ¾è¯æ±è½åï¼ä½ç¼ºä¹ç»è¿éªè¯ççå®å¼ï¼å æ­¤æ æ³æ¯æåºäºå¹²é¢çè¯ä¼°ã</span></p>
<p class="MsoNormal" style="text-indent: 24.1pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><strong><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å»çé¢åæ°æ®éã</span></strong><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å»çåºåå¼ºè°ä¸´åºä¸ææä¹çæ¦å¿µåå®å¨å³é®çå¯è§£éæ§ï¼ä½¿å¶ç¹å«éåè¯ä¼°æ¦å¿µå¿ å®åº¦åå¹²é¢æææ§ãå·æä¸å®¶æ æ³¨ãæåºæè¿ç»­æ¦å¿µçæ°æ®éæ¾å¼æ¯æå¹²é¢å®éªï¼å¹¶è½å¤éªè¯ç°å®ä¸´åºè®¾ç½®ä¸­äººå¨åè·¯çä¿®æ­£ãä¾èµèªå¨çææ¦å¿µçå¤§åå»çæ°æ®éæé«äºè¦çèå´åå¯æ©å±æ§ï¼ä½ç¼ºä¹ç»è¿éªè¯çæ¦å¿µæ æ³¨éå¸¸éå¶äºå®ä»¬è¿è¡ä¸¥æ ¼å¹²é¢åå æåæçéç¨æ§ã</span></p>
<p><img alt="image" loading="lazy" style="display: block; margin-left: auto; margin-right: auto" data-src="https://img2024.cnblogs.com/blog/1070495/202602/1070495-20260208192204239-306484748.png" class="lazyload"></p>
<p style="text-align: center">&nbsp;<span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">è¡¨</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">2 </span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">éç¨åå»çé¢åä¸­è¯ä¼°æ¦å¿µç¶é¢æ¨¡å</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(CBMs)</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">çä»£è¡¨æ§åºå</span></p>
<h1><span style="font-size: 15pt; font-family: é»ä½" lang="EN-US">8 </span><span style="font-size: 15pt; font-family: é»ä½">æ»ç»ä¸æªæ¥æ¹å</span></h1>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ¦å¿µç¶é¢æ¨¡åéè¿å°é¢æµå»ºç«å¨äººç±»å¯çè§£çæ¦å¿µä¹ä¸ï¼ä¸ºå¯è§£éåå¯æ§çå³ç­æä¾äºä¸ä¸ªååæ§æ¡æ¶ãæ¬ç»¼è¿°ç»ä¸äºæ¶µçæ¦å¿µè·åãå³ç­ãå¹²é¢åè¯ä¼°å¨æµç¨ç</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBM</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ç ç©¶ï¼ç¹å«å¼ºè°äºé«é£é©å»çåºç¨ãå°½ç®¡åå¾äºå®è´¨æ§è¿å±ï¼ä½ä»å­å¨è¥å¹²åºæ¬ææã</span></p>
<p class="MsoNormal" style="text-indent: 24pt; mso-char-indent-count: 2.0; line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">çæªæ¥ç ç©¶æ¹ååæ¬ï¼</span><strong><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">(1) </span></strong><strong><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">èªéåºæ¦å¿µè·åã</span></strong><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æªæ¥ç</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">CBMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">åºè¶è¶åºå®çç¶é¢è®¾è®¡ï¼è½¬åèªéåºåç»æåçæ¦å¿µè¡¨ç¤ºï¼å¦åå±ãç»åæç¨çæ¿æ´»çç¶é¢ãè¿ç§è®¾è®¡æ´å¥½å°åæ äºäººç±»è¯­ä¹çå¤å±æ¬¡åä»»å¡ä¾èµæ§è´¨ï¼åæ¶æé«äºæçã</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½"> <strong><span lang="EN-US">(2) </span></strong></span><strong><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">å¿ å®å¯é çæ¦å¿µã</span></strong><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ç¡®ä¿å­¦ä¹ å°çæ¦å¿µå¿ å®å°å¯¹åºå¶é¢æè¯­ä¹ä»ç¶æ¯ä¸ä¸ªæ ¸å¿ææï¼ç¹å«æ¯å¨å¼±çç£ä¸ææ¦å¿µæºèª</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">LLMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">VLMs</span><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">æ¶ãæåæ¯çæ¹ååæ¬ä¸ç¡®å®æ§æç¥å»ºæ¨¡ãåè½»èåç¸å³æ§çå æè¡¨ç¤ºå­¦ä¹ ï¼ä»¥åæ£æµæçº æ­£ä¸ç¨³å®æ¦å¿µçæºå¶ã</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½"> <strong><span lang="EN-US">(3) </span></strong></span><strong><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">ç»æåæ¦å¿µå¹²é¢ã</span></strong><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">é¤äºç´æ¥çæ¦å¿µæ¿æ¢ï¼æªæ¥çå·¥ä½åºæ¢ç´¢ç»æåå¹²é¢ç­ç¥ï¼èèæ¦å¿µé´çä¾èµå³ç³»å¹¶è¯å«å³ç­å³é®å­éãæ¯æé¨åæè½¯å¹²é¢å¯¹äºåå°å·¥ä½éå¹¶å¨å®å¨å³é®é¢åå®ç°å¯æ©å±çä¸å®¶å¨ç¯é¨ç½²è³å³éè¦ã</span><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½"> <strong><span lang="EN-US">(4) </span></strong></span><strong><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">é²æ£çæ¦å¿µè¯ä¼°ã</span></strong><span style="font-size: 12pt; font-family: å®ä½; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'">é²æ£è¯ä¼°å¯¹äºå¯é é¨ç½²ä»ç¶æ¯å¿è¦çãæªæ¥çç ç©¶åºå®¡æ¥æ¦å¿µè¡¨ç¤ºåå¹²é¢ææå¦ä½å¨è·¨é¢åååç§»ä¸­æ³åï¼ä»¥ååºäºæ¦å¿µçæ¨çå¦ä½æ¯æä¸ç¡®å®æ§ä¼°è®¡ãåå¸å¤æ£æµåæç¥å¹²é¢çè¯ä¼°åè®®ã</span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">&nbsp;</span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">&nbsp;</span></p>
<h1 style="text-align: center" align="center"><span style="font-size: 16pt; font-family: é»ä½">åèæç®</span></h1>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[1] Andre Esteva, Alexandre Robicquet, et al. A guide to deep learning in healthcare. In Nat. Med., 2019. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[2] Berthine Nyunga Mpinda, Mehran Hosseinzadeh, et al. Towards multi-label concept bottleneck models in medical imaging: An exploratory survey. In Medical Imaging with Deep Learning-Validation Papers, 2026. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[3] Ahmet Murat Ozbayoglu, Mehmet Ugur Gudelek, et al. Deep learning for financial applications: A survey. In Appl. Soft Comput., 2020. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[4] Tim Miller. Explanation in artificial intelligence: Insights from the social sciences. In Artif. Intell, 2019.</span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[5] Pang Wei Koh, Thao Nguyen, et al. Concept bottleneck models. In ICML, 2020. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[6] Ramprasaath R Selvaraju, Michael Cogswell, et al. Grad-cam: Visual explanations from deep networks via gradient-based localization. In ICCV, 2017. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[7] Alec Radford, Jong Wook Kim, et al. Learning transferable visual models from natural language supervision. In ICML, 2021.</span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[8] Yue Yang, Artemis Panagopoulou, et al. Language in a bottle: Language model guided concept bottlenecks for interpretable image classification. In CVPR, 2023. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[9] Andong Tan, Fengtao Zhou, et al. Explain via any concept: Concept bottleneck model with open vocabulary concepts. In ECCV, 2024. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[10] Mateo Espinosa Zarlenga, Pietro Barbiero, et al. Concept embedding models: Beyond the accuracy-explainability trade-off. In NeurIPS, 2022. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[11] Yang Liu, Tianwei Zhang, et al. Hybrid concept bottleneck models. In CVPR, 2025. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[12] Eunji Kim, Dahuin Jung, et al. Probabilistic concept bottleneck models. In ICML, 2023. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[13] Xinyue Xu, Yi Qin, et al. Energy-based concept bottleneck models: Unifying prediction, concept intervention, and probabilistic interpretations. In ICLR. 2024. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[14] Sungbin Shin, Yohan Jo, et al. A closer look at the intervention procedure of concept bottleneck models. In ICML, 2023. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[15] Sujin Jeon, Inwoo Hwang, et al. Locality-aware concept bottleneck model. In UniReps. 2024. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[16] Junlin Hou, Sicen Liu, et al. Self-explainable ai for medical image analysis: A survey and new outlooks. In arXiv preprint arXiv:2410.02331, 2024. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[17] Emiliano Penaloza, Tianyue H Zhang, et al. Addressing concept mislabeling in concept bottleneck models through preference optimization. In ICML, 2025. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[18] Marton Havasi, Sonali Parbhoo, et al. Addressing leakage in concept bottleneck models. In NeurIPS, 2022. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[19] Lijie Hu, Chenyang Ren, et al. Editable concept bottleneck models. In ICML, 2025. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[20] Hangzhou He, Lei Zhu, et al. V2c-cbm: Building concept bottlenecks with vision-to-concept tokenizer. In AAAI, 2025. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[21] Lijie Hu, Songning Lai, et al. Towards multi-dimensional explanation alignment for medical classification. In NeurIPS, 2024. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[22] Songning Lai, Lijie Hu, et al. Faithful vision-language interpretation via concept bottleneck models. In ICLR, 2023. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[23] Sukrut Rao, Sweta Mahajan, et al. Discover-then-name: Task-agnostic concept bottlenecks via automated concept discovery. In ECCV, 2024. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[24] Simon Schrodi, Julian Schur, et al. Selective concept bottlenecks without predefined concepts. In TMLR, 2025. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[25] Yequan Bie, Luyang Luo, et al. Xcoop: Explainable prompt learning for computer-aided diagnosis via concept-guided context optimization. In MICCAI, 2024. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[26] Tuomas Oikarinen, Subhro Das, et al. Label-free concept bottleneck models. In ICLR. 2023. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[27] Xingbo Du, Qiantong Dou, et al. Flexible concept bottleneck model. In AAAI, 2025. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[28] Arne GrobrÃ¼gge, Niklas KÃ¼hl, et al. Towards human-understandable multi-dimensional concept discovery. In CVPR, 2025. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[29] Sujin Jeon, Inwoo Hwang, et al. Locality-aware concept bottleneck model. In UniReps: 2nd Edition of the Workshop on Unifying Representations in Neural Models, 2024. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[30] Andong Tan, ZHOU Fengtao, et al. Post-hoc part-prototype networks. In ICML, 2024. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[31] Mohammad Amin Choukali, Mehdi Chehel Amirani, et al. Pseudo-class part prototype networks for interpretable breast cancer classification. In Sci. Rep, 2024. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[32] Qihan Huang, Jie Song, et al. On the concept trustworthiness in concept bottleneck models. In AAAI, 2024. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[33] Ta Duc Huy, Sen Kim Tran, et al. Interactive medical image analysis with concept-based similarity reasoning. In CVPR, 2025. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[34] Anita Mahinpei, Justin Clark, et al. Promises and pitfalls of black-box concept learning models. In arXiv preprint arXiv:2106.13314, 2021. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[35] Andrei Margeloiu, Matthew Ashman, et al. Do concept bottleneck models learn as intended? In ICLR Workshop on Responsible AI, 2021. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[36] Chenming Shang, Shiji Zhou, et al. Incremental residual concept bottleneck models. In CVPR. 2024. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[37] Haotian Xu, Tsui-Wei Weng, et al. Graph concept bottleneck models. In arXiv preprint arXiv:2508.14255, 2025. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[38] Nishad Singhi, Jae Myung Kim, et al. Improving intervention efficacy via concept realignment in concept bottleneck models. In ECCV, 2024. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[39] Moritz Vandenhirtz, Sonia Laguna, et al. Stochastic concept bottleneck models. In NeurIPS, 2024. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[40] Giovanni De Felice, Arianna Casanova, et al. Causally reliable concept bottleneck models. In ICLR 2025 Workshop: XAI4Science: From Understanding Model Behavior to Discovering New Scientific Knowledge, 2025. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[41] Rui Zhang, Xingbo Du, et al. The decoupling concept bottleneck model. In TPAMI, 2024. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[42] Deepika SN Vemuri, Gautham Bellamkonda, et al. Logiccbms: Logic-enhanced concept-based learning. In WACV, 2026. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[43] Yibo Gao, Hangqi Zhou, et al. Learning concept-driven logical rules for interpretable and generalizable medical image classification. In MICCAI, 2025. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[44] Mert Yuksekgonul, Maggie Wang, et al. Post-hoc concept bottleneck models. In ICLR, 2023. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[45] Andrei Semenov, Vladimir Ivanov, et al. Sparse concept bottleneck models: Gumbel tricks in contrastive learning. In arXiv preprint arXiv:2404.03323, 2024. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[46] RÃ©mi Kazmierczak, EloÃ¯se Berthier, et al. Clip-qda: An explainable concept bottleneck model. In TMLR, 2024. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[47] Jiakai Lin, Jinchang Zhang, et al. Graph integrated multimodal concept bottleneck model. In arXiv preprint arXiv:2510.00701, 2025. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[48] Yunhe Gao, Difei Gu, et al. Aligning human knowledge with visual concepts towards explainable medical image classification. In MICCAI, 2024. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[49] Chunjiang Wang, Kun Zhang, et al. Mvp-cbm: Multi-layer visual preference-enhanced concept bottleneck model for explainable medical image classification. In IJCAI, 2025. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[50] Hangzhou He, Lei Zhu, et al. Chat-cbm: Towards interactive concept bottleneck models with frozen large language models. In arXiv preprint arXiv:2509.17522, 2025. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[51] Itay Benou and Tammy Riklin Raviv. Show and tell: Visually explainable deep neural nets via spatially-aware concept bottleneck models. In CVPR, 2025. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[52] Townim F Chowdhury, Vu Minh Hieu Phan, et al. Adacbm: An adaptive concept bottleneck model for explainable and accurate diagnosis. In MICCAI, 2024. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[53] Hangzhou He, Jiachen Tang, et al. Training-free test-time improvement for explainable medical image classification. In MICCAI, 2025. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[54] Yibo Gao, Zheyao Gao, et al. Evidential concept embedding models: Towards reliable concept explanations for skin disease diagnosis. In MICCAI, 2024. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[55] Matthew Shen, Aliyah R Hsu, et al. Adaptive test-time intervention for concept bottleneck models. In ICLR 2025 Workshop Building Trust, 2025. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[56] David Steinmann, Wolfgang Stammer, et al. Learning to intervene on concept bottlenecks. In ICML, 2024. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[57] Aya Abdelsalam Ismail, Julius Adebayo, et al. Concept bottleneck generative models. In ICLR, 2024. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[58] Konstantinos P Panousis, Dino Ienco, et al. Coarse-to-fine concept bottleneck models. In NeurIPS, 2024. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[59] Halil Ibrahim AYSEL, Xiaohao Cai, et al. Concept-based explainable artificial intelligence: Metrics and benchmarks. In Available at SSRN 5210908. 2025. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[60] Nesta Midavaine, Gregory Hok Tjoan Go, et al. [re] on the reproducibility of post-hoc concept bottleneck models. In TMLR, 2024. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[61] Seonghwan Park, Jueun Mun, et al. An analysis of concept bottleneck models: Measuring, understanding, and mitigating the impact of noisy annotations. In NeurIPS, 2025. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[62] Divyansh Srivastava, Ge Yan, et al. Vlg-cbm: Training concept bottleneck models with vision-language guidance. In NeurIPS, 2024. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[63] Delong Zhao, Qiang Huang, et al. Partially shared concept bottleneck models. In AAAI, 2026. </span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[64] Mateo Espinosa Zarlenga, Katie Collins, et al. Learning to receive help: Intervention-aware concept embedding models. In NeurIPS, 2023.</span></p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: &quot;Times New Roman&quot;, &quot;serif&quot;; mso-fareast-font-family: å®ä½" lang="EN-US">[65] Andrea Pugnana, Riccardo Massidda, et al. Deferring concept bottleneck models: Learning to defer interventions to inaccurate experts. In NeurIPS. 2025.</span></p>
<p>&nbsp;</p>
<p class="MsoNormal" style="line-height: 20pt; mso-line-height-rule: exactly"><span style="font-size: 12pt; font-family: å®ä½" lang="EN-US">&nbsp;</span></p>

</div>
<div class="clear"></div>

		</div>
		<div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.003472222222222222" data-date-updated="2026-02-08 19:32">2026-02-08 19:27</span>&nbsp;
<a href="https://www.cnblogs.com/lemonzhang">kkzhang</a>&nbsp;
éè¯»(<span id="post_view_count">44</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19592426);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19592426', targetLink: 'https://www.cnblogs.com/lemonzhang/p/19592426', title: 'Concept Bottleneck Models-æ¦å¿µç¶é¢æ¨¡åç¨äºå¯è§£éå³ç­ï¼è¿å±ãåç±»ä½ç³» ä¸æªæ¥æ¹åç»¼è¿°' })">ä¸¾æ¥</a>
</div>
	 ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ è¿ä¸çå°±æ¯ä¸ªå·¨å¤§çèå°ç­å­-ä½ çé£çnasä¸­æäºå ]]></title>
    <link>https://www.cnblogs.com/bugshare/p/19591372</link>
    <guid>492ff640b20659e3fdccb2ef101f058d</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/bugshare/p/19591372" title="åå¸äº 2026-02-08 12:50">
    <span role="heading" aria-level="2">è¿ä¸çå°±æ¯ä¸ªå·¨å¤§çèå°ç­å­-ä½ çé£çnasä¸­æäºå</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>æ¬æ¥ææ¯ççä¸å¤ªæ³åè¿ç¯æç« ã<br>
ä¸æ¹é¢ï¼è¿äºå·²ç»åéµæºä¹äºï¼å®æ¹ä¹ç®æ¯åºäºä¿®å¤çæ¬ï¼<br>
å¦ä¸æ¹é¢ââè¯´å¥å®è¯ï¼åèµ·æ¥ççå¿ç¼ï¼<br>
æçç§çãæçèµæãæçå¤ä»½ï¼å¯è½ç°å¨å·²ç»ä¸ä»å±äºæäº...ð­</p>
<p>ç»æç°å¨åå¤´ä¸æ³ï¼<br>
<strong>è¿æ¯æå¿è¦æè¿æ¬¡æ¨éçæè®­è®°å½ä¸å§ï¼åä¸å ,é¿ä¸æºã</strong>=</p>
<p>æè¿ï¼å½äº§ç§æäºç³»ç» <strong>é£ç NASï¼fnOSï¼</strong> è¢«æåºå­å¨<strong>ä¸¥éå®å¨æ¼æ´</strong>ã<br>
ä¸å°ç¨æ·åé¦ï¼</p>
<ul>
<li>è®¾å¤åºç°å¼å¸¸è®¿é®</li>
<li>æ°æ®å­å¨è¢«è¯»åé£é©</li>
<li>çè³è¿æäººåç°è¢«æ¤å¥äºä¸æç¨åº</li>
</ul>
<p>è¿å·²ç»ä¸æ¯âæä¸ªåè½ä¸å¥½ç¨âï¼<br>
ä¹ä¸æ¯âå¶å°å´©ä¸ä¸âçé®é¢äºã</p>
<p><strong>è¿æ¯ä¸æ¬¡å®æå®ï¼ç´æ¥å²çç¨æ·æ°æ®æ¥çç³»ç»çº§å®å¨äºæã</strong></p>
<p>æ´è®©äººé¾åçæ¯ï¼<br>
<strong>ä¸å¼å§ï¼å®æ¹å¯¹è¿ä¸ªæ¼æ´çæåº¦ï¼å¹¶ä¸éè§ã</strong><br>
<img alt="feiniu.jpg" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3715916/202602/3715916-20260208123936114-1068559692.jpg" class="lazyload"></p>
<hr>
<h1 id="ä¸é£ç-nas-ä¸ºå¥ä¼ç¿»è¿ä¹å¤§çè½¦">ä¸ãé£ç NAS ä¸ºå¥ä¼ç¿»è¿ä¹å¤§çè½¦ï¼</h1>
<h2 id="1ï¸â£-åè¯´èæ¯nas-æ­£å¨åæå®¶åº­æå¡å¨">1ï¸â£ åè¯´èæ¯ï¼NAS æ­£å¨åæâå®¶åº­æå¡å¨â</h2>
<p>é£çç§æäº <strong>fnOS</strong>ï¼æ¬è´¨ä¸æ¯ä¸å¥åºäº Debian Linux æ·±åº¦å®å¶ç NAS æä½ç³»ç»ã<br>
ç®æ ç¨æ·å¾æç¡®ï¼</p>
<ul>
<li>å®¶åº­ç¨æ·</li>
<li>å°å¢é</li>
<li>æé²ç½® PC / æå¡å¨å½ç§æäºç¨çäºº</li>
</ul>
<p>æä»¶å­å¨ãå½±è§åºãè¿ç¨è®¿é®ãåºç¨ä¸­å¿â¦â¦<br>
<strong>è¯¥æçé½æï¼èä¸ä¸å°äººæ¯ç´æ¥æ´é²å¨å¬ç½ç¨çã</strong></p>
<p>è¯´ç½äºï¼</p>
<blockquote>
<p><strong>ç°å¨ç NASï¼æ¬è´¨å°±æ¯ä¸å° 7Ã24 å°æå¡å¨ã</strong></p>
</blockquote>
<p>ä½é®é¢ä¹å¨è¿ã</p>
<hr>
<h2 id="2ï¸â£-çæ­£çæ ¹å å¸åè´å½çè·¯å¾ç©¿è¶æ¼æ´">2ï¸â£ çæ­£çæ ¹å ï¼å¸åè´å½çè·¯å¾ç©¿è¶æ¼æ´</h2>
<p>è¿æ¬¡ç¿»è½¦çæ ¸å¿åå ï¼å¶å®ä¸ç¹é½ä¸è±å¨ã</p>
<p>é®é¢åºå¨ <strong>Web ç®¡çæå¡å¯¹è·¯å¾çå¤çä¸</strong>ã</p>
<p>è¯´äººè¯å°±æ¯ä¸å¥è¯ï¼</p>
<blockquote>
<p><strong>åå°æ²¡æ <code>../</code> è¿ç§è·¯å¾è·³è½¬ç»æ¦ä½ã</strong></p>
</blockquote>
<p>ç»æå°±æ¯ââ<br>
æ»å»èå¯ä»¥æé ç¹æ®è¯·æ±ï¼</p>
<ul>
<li>ç»è¿ç®å½éå¶</li>
<li>æ³è¯»åªå°±è¯»åª</li>
<li>ç³»ç»æä»¶ãéç½®æä»¶ï¼ç´æ¥æ´é²</li>
</ul>
<p>è¿ç§æ¼æ´å¨å®å¨åæä¸ªåå­ï¼å«ï¼</p>
<blockquote>
<p><strong>Path Traversalï¼è·¯å¾ç©¿è¶ï¼</strong></p>
</blockquote>
<p>å®çæ­£ææçå°æ¹å¨äºï¼</p>
<ul>
<li>â ä¸ç¨ç»å½</li>
<li>â ä¸è¦è´¦å·</li>
<li>â ä¸ç¨çç ´</li>
<li>â ä¸éè¦ä½ ç¹ä»»ä½é¾æ¥</li>
</ul>
<p><strong>åªè¦ä½ ç NAS å¨å¬ç½ï¼æ«å°å°±è½æã</strong></p>
<hr>
<h1 id="äºè¿ä¸ªæ¼æ´æ¯æä¹è¢«å©ç¨ç">äºãè¿ä¸ªæ¼æ´æ¯æä¹è¢«å©ç¨çï¼</h1>
<h2 id="-å¤ç°åçççå¾ä½çº§ä½å°±è¿ä¹è´å½">ð å¤ç°åçï¼ççå¾âä½çº§âï¼ä½å°±è¿ä¹è´å½ï¼</h2>
<p>æ­£å¸¸æåµä¸ï¼Web åªåè®¸ä½ è®¿é®ç±»ä¼¼è¿ç§èµæºï¼</p>
<pre><code class="language-http">/app-center-static/xxx/icon.png
</code></pre>
<p>ä½å¦æåç«¯ä¸æ ¡éªè·¯å¾ï¼<br>
æ»å»èå°±å¯ä»¥è¿ä¹ç©ï¼</p>
<pre><code class="language-http">http://[ip]:[port]/app-center-static/serviceicon/myapp/%7B0%7D/?size=../../../../vol1/1000/a/
</code></pre>
<p><img alt="PixPin_2026-02-08_01-06-03.png" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3715916/202602/3715916-20260208123948395-1421581083.png" class="lazyload"></p>
<p>çè³ç´æ¥è¯»ç³»ç»æä»¶ï¼</p>
<pre><code class="language-http">http://[ip]:[port]/app-center-static/serviceicon/myapp/%7B0%7D/?size=../../../../etc/passwd
</code></pre>
<p><img alt="PixPin_2026-02-08_01-00-52.png" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3715916/202602/3715916-20260208123950590-497762052.png" class="lazyload"></p>
<p>æææ¯ä»ä¹ï¼</p>
<blockquote>
<p><strong>è¡¨é¢ä¸æ¯è¯·æ±âåºç¨å¾æ âï¼<br>
å®éä¸è¯»çæ¯ä½  NAS éççå®æä»¶ã</strong></p>
</blockquote>
<p>è¿ä¸æ¯é»ç§æï¼<br>
è¿æ¯<strong>åºç¡è·¯å¾æéæ²¡æ§å¶å¥½ã</strong></p>
<hr>
<h2 id="-æ´å¯æçè¯»æä»¶åªæ¯å¼å§">ð æ´å¯æçï¼è¯»æä»¶åªæ¯å¼å§</h2>
<p>å¾å¤äººçå°âåªè½è¯»æä»¶âï¼ä¼ä¸æè¯æ¾ä¸å£æ°ã</p>
<p>ä½ç°å®æ¯ï¼<br>
<strong>è·¯å¾ç©¿è¶ï¼å ä¹ä»æ¥ä¸æ¯ç»ç¹ã</strong></p>
<p>ä¸æ¦è½è¯»å°è¿äºä¸è¥¿ï¼</p>
<ul>
<li>ç³»ç»éç½®</li>
<li>ç¨æ·ä¿¡æ¯</li>
<li>Token / Key</li>
<li>Web æå¡è·¯å¾</li>
</ul>
<p>æ¥ä¸æ¥è½å¹²ä»ä¹ï¼</p>
<ul>
<li>è®¤è¯ç»è¿</li>
<li>åå¥æ¶ææä»¶</li>
<li>æ§è¡å½ä»¤</li>
<li>é¿ææ§å¶è®¾å¤</li>
</ul>
<p>è¿ä¹æ­£å¥½å¯¹åºäºä¸äºç¨æ·ççå®åé¦ï¼</p>
<blockquote>
<p>CPU è¢«åæ»¡<br>
å¸¦å®½å¼å¸¸<br>
NAS åâä¸æ¯èªå·±çäºâ</p>
</blockquote>
<hr>
<h1 id="ä¸è¿äºå¯¹æ®éå®¶ç¨ç¨æ·å°åºæå¤ä¸¥é">ä¸ãè¿äºå¯¹âæ®éå®¶ç¨ç¨æ·âå°åºæå¤ä¸¥éï¼</h1>
<p>æç¥éï¼è¯å®æäººä¼æ³ï¼</p>
<blockquote>
<p>âæå°±å®¶éæ¾ä¸ª NASï¼åä¸æ¯å¬å¸æå¡å¨ãâ</p>
</blockquote>
<p>ä½ç°å®åå¥½ç¸åã</p>
<p><strong>NAS éçæ°æ®ï¼å¾å¾æ¯æå¡å¨æ´ç§å¯ã</strong></p>
<h2 id="ï¸-æç´æ¥çé£é©åæ¬">â ï¸ æç´æ¥çé£é©åæ¬ï¼</h2>
<ul>
<li>ð ç§çãè§é¢ãææ¡£è¢«è¯»èµ°</li>
<li>ð ç³»ç»è´¦å·ãéç½®æ³é²</li>
<li>ðª è¢«å·å·å¡æç¿ãæ¨é©¬</li>
<li>ð æä¸ºæ»å»å«äººçè·³æ¿</li>
<li>â ç³»ç»è¢«æ¹ï¼åçº§ãæ¢å¤å¨ç¿»è½¦</li>
</ul>
<p>æå¯æçä¸ç¹æ¯ï¼</p>
<blockquote>
<p><strong>ç»å¤§å¤æ°ç¨æ·ï¼æ ¹æ¬ä¸ç¥éèªå·±ææ²¡æä¸­æã</strong></p>
</blockquote>
<hr>
<h1 id="åå®æ¹åæ¥ä¿®äºä½é®é¢ççç»æäºå">åãå®æ¹åæ¥ä¿®äºï¼ä½é®é¢ççç»æäºåï¼</h1>
<h2 id="-å®¢è§è¯´ä¸å¥è¡¥ä¸æ¯æçä¹ç¡®å®ä¿®äº">â å®¢è§è¯´ä¸å¥ï¼è¡¥ä¸æ¯æçï¼ä¹ç¡®å®ä¿®äº</h2>
<p>é£çåæ¥åå¸äºå¤ä¸ªçæ¬æ´æ°ï¼ä¸»è¦åäºè¿äºäºï¼</p>
<ul>
<li>ä¸¥æ ¼æ ¡éªè·¯å¾åæ°</li>
<li>ä¿®å¤éæèµæºè®¿é®é»è¾</li>
<li>å¢å å¼å¸¸è¯·æ±æ¦æª</li>
</ul>
<p><strong>ä»çº¯ææ¯è§åº¦è®²ï¼è¡¥ä¸æ¯ææçã</strong></p>
<hr>
<h2 id="ï¸-ä½çæ­£çé®é¢ä¸åªæ¯ææ²¡æè¡¥ä¸">â ï¸ ä½çæ­£çé®é¢ï¼ä¸åªæ¯âææ²¡æè¡¥ä¸â</h2>
<p>è¿æ¬¡äºè®®çæ ¸å¿ï¼å¶å®å¨è¿ï¼</p>
<ul>
<li>æ¼æ´æåæ¶ï¼å·²ç»æå¤§éè®¾å¤è£¸å¥å¨å¬ç½</li>
<li>å¾å¤ç¨æ·æ ¹æ¬ä¸ç¥é NAS ä¸è¯¥è¿ä¹ç¨</li>
<li>å®å¨é£é©æç¤ºä¸ç´è§</li>
<li>é»è®¤éç½®å¯¹æ°æå¹¶ä¸åå¥½</li>
</ul>
<p><strong>å®å¨ä¸æ¯åå®ä»£ç å°±ç»æäºã</strong></p>
<p><img alt="PixPin_2026-02-08_01-30-12.png" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3715916/202602/3715916-20260208123946861-42674131.png" class="lazyload"></p>
<p><img alt="154902xzluhy0ttttsbeyg.png" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3715916/202602/3715916-20260208123959320-1980489924.png" class="lazyload"></p>
<hr>
<h1 id="äºå¦æä½ å¨ç¨é£çç°å¨è¯·å¡å¿åè¿å ä»¶äº">äºãå¦æä½ å¨ç¨é£çï¼ç°å¨è¯·å¡å¿åè¿å ä»¶äº</h1>
<h2 id="-1ï¸â£-ç«å»ç¡®è®¤ææ²¡ææ´é²å¨å¬ç½">ð 1ï¸â£ ç«å»ç¡®è®¤ï¼ææ²¡ææ´é²å¨å¬ç½</h2>
<p>èªæ¥è¿å é¡¹ï¼</p>
<ul>
<li>ç«¯å£æ å°</li>
<li>å®æ¹ä¸­ç»§</li>
<li>ç®¡çåå°å¬ç½å¯è®¿é®</li>
</ul>
<p><strong>åªè¦æä¸ä¸ªæ¯ï¼å»ºè®®ç«å»å³ã</strong></p>
<hr>
<h2 id="-2ï¸â£-ç«å»åçº§å°ææ°-fnos">ð 2ï¸â£ ç«å»åçº§å°ææ° fnOS</h2>
<p>å«è§æï¼å«ç­ç­ã</p>
<blockquote>
<p><strong>å®å¨æ¼æ´ï¼ä»æ¥ä¸ç­äººã</strong></p>
</blockquote>
<hr>
<h2 id="-3ï¸â£-æ£æ¥ææ²¡æä¸å¯¹å²">ð 3ï¸â£ æ£æ¥ææ²¡æâä¸å¯¹å²â</h2>
<p>éç¹çï¼</p>
<ul>
<li>CPU / åå­æ¯å¦å¼å¸¸</li>
<li>ææ²¡æä¸è®¤è¯çè¿ç¨</li>
<li>å¯å¨é¡¹ææ²¡æè¢«å¨è¿</li>
<li>Web æ¥å¿éææ²¡æå¥æªè¯·æ±</li>
</ul>
<p>å¦æä½ å·²ç»å¼å§ä¸æ¾å¿äºï¼</p>
<blockquote>
<p><strong>å¤ä»½ â éè£ â åæ¢å¤<br>
æ¯ä»»ä½âå¿çå®æ°âé½ç®¡ç¨ã</strong></p>
</blockquote>
<hr>
<h1 id="å­æ¯ä¿®æ¼æ´æ´éè¦çä»¥å-nas-åºè¯¥æä¹ç¨">å­ãæ¯ä¿®æ¼æ´æ´éè¦çï¼ä»¥å NAS åºè¯¥æä¹ç¨</h1>
<p>è¿æ¬¡äºï¼è¯´å°åºä¸åªæ¯é£ççé®é¢ã</p>
<h2 id="-ä¸ä¸ªæ´å®å¨ç-nas-ä½¿ç¨ä¹ æ¯">â ä¸ä¸ªæ´å®å¨ç NAS ä½¿ç¨ä¹ æ¯</h2>
<ul>
<li>â å«æç®¡çç«¯å£ç´æ¥ä¸¢å¬ç½</li>
<li>â SSH ä¸ç¨å°±å³</li>
<li>â ç¨ VPNï¼WireGuard / Tailscaleï¼</li>
<li>â ç®¡çåæ°æ®è®¿é®åå¼</li>
<li>â å»æåçº§ä¹ æ¯</li>
<li>â å¤ççå®å¨å¬å</li>
</ul>
<p>ä¸å¥è¯éç»ææ NAS ç¨æ·ï¼</p>
<blockquote>
<p><strong>NAS è¦æâæå¡å¨âçæ åå¯¹å¾ï¼<br>
èä¸æ¯å½ä¸ªè·¯ç±å¨æä»¶ã</strong></p>
</blockquote>
<p><img alt="PixPin_2026-02-08_01-24-15.png" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3715916/202602/3715916-20260208123944750-1925409861.png" class="lazyload"></p>
<p><img alt="PixPin_2026-02-08_01-26-40.png" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3715916/202602/3715916-20260208123942482-1806901715.png" class="lazyload"></p>
<hr>
<h1 id="ä¸æåè¯´ä¸å¥è¿ä¸æ¯ç»ç¹èæ¯ä¸è®°è­¦é">ä¸ãæåè¯´ä¸å¥ï¼è¿ä¸æ¯ç»ç¹ï¼èæ¯ä¸è®°è­¦é</h1>
<p>é£ç NAS çè¿æ¬¡æ¼æ´ï¼å¹¶ä¸ç½è§ã</p>
<p>çæ­£å¼å¾è­¦æçæ¯ï¼</p>
<ul>
<li>ç§æäºè¶æ¥è¶å¤æ</li>
<li>å¾å¤äº§ååè½å¤æ ·åä¸å»äºï¼å®å¨è®¾è®¡å´ææ¾æ»å</li>
<li>ç¨æ·è¢«è¿«æ¿æäºæ¬ä¸è¯¥æ¿æçå®å¨ææ¬</li>
</ul>
<p>å¸æè¿æ¬¡ä¹åï¼</p>
<ul>
<li>ç¨æ·è½å¯¹å¬ç½è®¿é®å¤ä¸åè­¦æ</li>
<li>ååè½æå®å¨å½æç¬¬ä¸ä¼åçº§</li>
<li>å½äº§ NAS çæï¼è½å°ä¸ç¹âèå°ç­å­â</li>
</ul>
<blockquote>
<p><strong>æ°æ®ä¸æ¦æ³é²ï¼<br>
æ¯æ²¡æä»»ä½è¡¥ä¸è½å¸®ä½ ä¿®åæ¥çã</strong></p>
</blockquote>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-08 12:51">2026-02-08 12:50</span>&nbsp;
<a href="https://www.cnblogs.com/bugshare">BugShare</a>&nbsp;
éè¯»(<span id="post_view_count">406</span>)&nbsp;
è¯è®º(<span id="post_comment_count">3</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19591372);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19591372', targetLink: 'https://www.cnblogs.com/bugshare/p/19591372', title: 'è¿ä¸çå°±æ¯ä¸ªå·¨å¤§çèå°ç­å­-ä½ çé£çnasä¸­æäºå' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ C++ åå­é¿åæåï¼å¦ä½ç¨ç§»å¨è¯­ä¹åæºè½æéè§£å³âæ·±æ·è´âä¸âåå­æ³æ¼â ]]></title>
    <link>https://www.cnblogs.com/kaiux/p/19592912</link>
    <guid>a1181fae9222208ea3fc7dfca78c3a31</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/kaiux/p/19592912" title="åå¸äº 2026-02-08 22:51">
    <span role="heading" aria-level="2">C++ åå­é¿åæåï¼å¦ä½ç¨ç§»å¨è¯­ä¹åæºè½æéè§£å³âæ·±æ·è´âä¸âåå­æ³æ¼â</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/1158182/202602/1158182-20260208225153165-194422412.png" alt="C++ åå­é¿åæåï¼å¦ä½ç¨ç§»å¨è¯­ä¹åæºè½æéè§£å³âæ·±æ·è´âä¸âåå­æ³æ¼â" class="desc_img">
        æ¬ææ·±åº¦åæäº C++ ä¸ Java å¨åå­ç®¡çä¸çæ¬è´¨å·®å¼ãä»å½æ°ä¼ åçâå¼è¯­ä¹âé·é±åå¥ï¼è¯¦ç»éè¿°äº C++ ä¸ºä½é»è®¤è¿è¡æ·±æ·è´åå¶æ§è½ä»£ä»·ãæç« éç¹è®²è§£äºæ ¸å¿æºå¶ RAII å¦ä½æ¿ä»£ GC å®ç°ç¡®å®çèµæºç®¡çï¼éè¿å¾è§£âç§»å¨è¯­ä¹âä¸âå³å¼å¼ç¨âæ­ç¤ºäºé«æ§è½é¶æ·è´çå¥¥ç§ï¼å¹¶ç³»ç»ä»ç»äº unique_ptr ç­æºè½æéçæä½³å®è·µä¸å¾ªç¯å¼ç¨é¿åæåï¼å¸®å©å¼åèéå¡åå­æç»´æ¨¡åã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="1-å½æ°ä¼ å">1. å½æ°ä¼ å</h2>
<p>å¨ Java ä¸­ï¼å½æä»¬æä¸ä¸ªãå¯¹è±¡ãä¼ ç»å½æ°æ¶ï¼å¶å®ä¸éè¦æèå¤ªå¤ï¼ä¼ è¿å»çæ¯å¼ç¨çæ·è´ï¼å½æ°éä¿®æ¹çå¯¹è±¡çåå®¹ä¹ä¼ååºå°å¤é¢ã</p>
<p>ä½å¨ C++ ä¸­æåµå¯è½ä¸å¤ªä¸æ ·ï¼ä¸è¬æ¥è¯´æä»¬æä¸ä¸ªéæ©ï¼</p>
<h3 id="11-å¼ä¼ é-pass-by-valueé»è®¤çæ·±æ·è´">1.1. å¼ä¼ é (Pass-by-Value)ï¼é»è®¤çãæ·±æ·è´ã</h3>
<p>è¿æ¯ C++ å Java æå¤§çç´è§å²çªç¹ã<strong>å¨ C++ ä¸­ï¼å¦ææ²¡æä»»ä½ä¿®é¥°ç¬¦ï¼ç¼è¯å¨ä¼ææ´ä¸ªå¯¹è±¡å®æ´å°åéä¸ä»½ã</strong> æä»¬çä¸é¢çä¾å­ï¼</p>
<pre><code class="language-cpp">#include &lt;vector&gt;
#include &lt;iostream&gt;

// è¿éä¼è§¦å std::vector çæ·è´æé å½æ°
void modify(std::vector&lt;int&gt; v) { 
    v.push_back(999);
    std::cout &lt;&lt; "modifyåvectorçé¿åº¦ä¸º: " &lt;&lt; v.size() &lt;&lt; std::endl;
    // å½æ°ç»æï¼å±é¨åé v è¢«éæ¯ï¼999 ä¹éä¹æ¶å¤±
    // å¤é¨ç list æ¯«åæ æ
}

int main() {
    // åè®¾è¿æ¯ä¸ä¸ªåå« 100 ä¸ä¸ªåç´ çåè¡¨
    std::vector&lt;int&gt; bigList(1000000, 1);
    
    // è°ç¨æ¶åç Deep Copyï¼æ§è½å¼éæå¤§
    modify(bigList); 

    std::cout &lt;&lt; "mainå½æ°åvectorçé¿åº¦ä¸º: " &lt;&lt; bigList.size() &lt;&lt; std::endl;

    return 0;
}

</code></pre>
<p>è¿è¡ç»æä¸ºï¼</p>
<pre><code class="language-text">modifyåvectorçé¿åº¦ä¸º: 1000001
mainå½æ°åvectorçé¿åº¦ä¸º: 1000000
</code></pre>
<p>å¯¹æ¯ä¸ä¸Javaä»£ç ï¼</p>
<pre><code class="language-java">import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

public class Main {

    // Java æ»æ¯æå¼ä¼ éï¼ä½å¯¹äºå¯¹è±¡ï¼ä¼ éçæ¯âå¼ç¨çå¼â
    public static void modify(List&lt;Integer&gt; v) {
        v.add(999);
        System.out.println("modifyåListçé¿åº¦ä¸º: " + v.size());
    }

    public static void main(String[] args) {
        // åå»ºåå« 100 ä¸ä¸ªåç´ çåè¡¨
        List&lt;Integer&gt; bigList = new ArrayList&lt;&gt;(Collections.nCopies(1000000, 1));

        // è¿éä¼ éçæ¯å¼ç¨ï¼æ²¡ææ·±æ·è´ï¼æ§è½å¼éæå°
        modify(bigList);

        // æ³¨æï¼è¿éçé¿åº¦ä¼åæ 1000001
        System.out.println("mainä¸­Listçé¿åº¦ä¸º: " + bigList.size());
    }
}
</code></pre>
<p>è¿è¡ç»æä¸ºï¼</p>
<pre><code class="language-text">modifyåListçé¿åº¦ä¸º: 1000001
mainä¸­Listçé¿åº¦ä¸º: 1000001
</code></pre>
<p>ç±æ­¤æä»¬å¯ä»¥å¾åºä»¥ä¸çç»è®ºï¼</p>
<ul>
<li><strong>Java</strong>ï¼å½æ°è°ç¨æ¶ä¼ éçæ¯å¼ç¨å¼ãJava æ°¸è¿ä¸ä¼éå¼å°ææ´ä¸ªå ä¸çå¤§å¯¹è±¡å¤å¶ä¸éã</li>
<li><strong>C++</strong>ï¼æ¯âå¼è¯­ä¹âãå½æ°éç <code>v</code> æ¯ <code>bigList</code> çå®å¨ç¬ç«å¯æ¬ãä½ å¨å¯æ¬ä¸åçä»»ä½ä¿®æ¹ï¼é½ä¸ä¼å½±åæ¬ä½ã</li>
</ul>
<h3 id="12-cçå¼ç¨ä¼ é-pass-by-reference">1.2. C++çå¼ç¨ä¼ é (Pass-by-Reference)ï¼<code>&amp;</code></h3>
<p>ä¸ºäºæ¢è½ä¿®æ¹å¤é¨å¯¹è±¡ï¼åé¿åæè´µçæ·è´ï¼C++ æä¾äº <strong>å¼ç¨ï¼Referenceï¼</strong>ã</p>
<p>å¨ç±»ååé¢å ä¸ä¸ª <code>&amp;</code>ï¼åéå°±åæäºå¤é¨å¯¹è±¡ç<strong>å«åï¼Aliasï¼</strong>ãæä»¬çä¸é¢çä»£ç ï¼</p>
<pre><code class="language-cpp">#include &lt;vector&gt;
#include &lt;iostream&gt;

// å¼ç¨ä¼ é
void modify(std::vector&lt;int&gt;&amp; v) { 
    v.push_back(999);
    // ç´æ¥æä½åå­ä¸­çåä¸ä»½æ°æ®
    std::cout &lt;&lt; "modifyåvectorçé¿åº¦ä¸º: " &lt;&lt; v.size() &lt;&lt; std::endl;
}

int main() {

    std::vector&lt;int&gt; bigList(1000000, 1);

    modify(bigList); 

    std::cout &lt;&lt; "mainå½æ°åvectorçé¿åº¦ä¸º: " &lt;&lt; bigList.size() &lt;&lt; std::endl;

    return 0;
}
</code></pre>
<p>è¿è¡ç»æä¸ºï¼</p>
<pre><code class="language-text">modifyåvectorçé¿åº¦ä¸º: 1000001
mainå½æ°åvectorçé¿åº¦ä¸º: 1000001
</code></pre>
<p><strong>ç¹ç¹</strong>ï¼</p>
<ol>
<li><strong>é¶æ·è´</strong>ï¼æ è®º List æå¤å¤§ï¼è¿éåªä¼ éä¸ä¸ªç»å®çå³ç³»ï¼åºå±éå¸¸æ¯æéå®ç°ï¼ã</li>
<li><strong>éç©ºä¿è¯</strong>ï¼å¼ç¨<strong>å¿é¡»</strong>ç»å®å°ä¸ä¸ªå­å¨çå¯¹è±¡ä¸ï¼ä¸å­å¨ <code>null</code> å¼ç¨ãè¿æ¯ Java å®å¨ã</li>
<li><strong>è¯­æ³éæ</strong>ï¼å¨å½æ°åé¨ï¼ä½ ä¸éè¦åæéé£æ ·è§£å¼ç¨ï¼åæä½æ®éåéä¸æ ·æä½å®å³å¯ã</li>
</ol>
<h3 id="13-æéä¼ é-pass-by-pointerç»å¸çå°åä¼ é-">1.3. æéä¼ é (Pass-by-Pointer)ï¼ç»å¸çâå°åâä¼ é <code>*</code></h3>
<p>è¿å¶å®æ¯ææ¥è¿ Java åºå±å®ç°çæ¹å¼ãå¦æéè¦ä¼ éå¤§å¯¹è±¡ï¼æèå¯¹è±¡å¯è½æ¯ç©ºçï¼<code>nullptr</code>ï¼ï¼æä»¬å°±ä¼ éå®ç<strong>åå­å°å</strong>ã</p>
<pre><code class="language-cpp">#include &lt;vector&gt;
#include &lt;iostream&gt;

// æéä¼ é
void modify(std::vector&lt;int&gt;* v) { 
    // å¤æ­æ¯å¦ä¸ºç©ºï¼é²æ­¢ Crash
    if (v != nullptr) {
        // è¯­æ³ååï¼ç¨ '-&gt;' æ¥è®¿é®æå
        v-&gt;push_back(999); 
        std::cout &lt;&lt; "modifyåvectorçé¿åº¦ä¸º: " &lt;&lt; v-&gt;size() &lt;&lt; std::endl;
    }
}

int main() {

    std::vector&lt;int&gt; bigList(1000000, 1);

    // è°ç¨ååï¼å¿é¡»æ¾å¼ååºå°å (&amp;) ä¼ è¿å»
    modify(&amp;bigList); 

    std::cout &lt;&lt; "mainå½æ°åvectorçé¿åº¦ä¸º: " &lt;&lt; bigList.size() &lt;&lt; std::endl;

    return 0;
}
</code></pre>
<p>è¿è¡ç»æä¸ºï¼</p>
<pre><code class="language-text">modifyåvectorçé¿åº¦ä¸º: 1000001
mainå½æ°åvectorçé¿åº¦ä¸º: 1000001
</code></pre>
<ul>
<li>
<p><strong>å¯¹æ¯ Java</strong>ï¼Java çå¼ç¨å¶å®å°±æ¯âåéçæéâã</p>
</li>
<li>
<p>Java: <code>modify(list)</code> éå¼ä¼ éäºå°åã</p>
</li>
<li>
<p>C++: <code>modify(&amp;list)</code> æ¾å¼ä¼ éäºå°åã</p>
</li>
<li>
<p><strong>ä½¿ç¨åºæ¯</strong>ï¼éå¸¸ç¨äºå¼å®¹ C è¯­è¨æ¥å£ï¼æèå½åæ°æ¯âå¯éçâï¼å¯ä»¥ä¼  <code>nullptr</code> è¡¨ç¤ºå¿½ç¥ï¼æ¶ã</p>
</li>
</ul>
<h3 id="14-ä¸ç§æ¹å¼å¯¹æ¯æ»ç»">1.4. ä¸ç§æ¹å¼å¯¹æ¯æ»ç»</h3>
<p><img src="https://img2024.cnblogs.com/blog/1158182/202602/1158182-20260208224333675-1791870738.jpg" alt="å½æ°ä¼ å" loading="lazy"></p>
<table>
<thead>
<tr>
<th>ç¹æ§</th>
<th><strong>å¼ä¼ é (T)</strong></th>
<th><strong>å¼ç¨ä¼ é (T&amp;)</strong></th>
<th><strong>æéä¼ é (T*)</strong></th>
<th>Java (Object)</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>åå­è¡ä¸º</strong></td>
<td><strong>æ·±æ·è´ (Deep Copy)</strong></td>
<td><strong>é¶æ·è´</strong> (å«å)</td>
<td><strong>é¶æ·è´</strong> (ä¼ éå°å)</td>
<td>æµæ·è´  (å¤å¶å¼ç¨)</td>
</tr>
<tr>
<td><strong>ä¿®æ¹å¤é¨?</strong></td>
<td>â ä¸è½</td>
<td>â è½</td>
<td>â è½</td>
<td>â è½</td>
</tr>
<tr>
<td><strong>è½å¦ä¸º Null</strong></td>
<td>â ä¸æ¶å</td>
<td><strong>â ä¸è½</strong> (å¿é¡»ç»å®å¯¹è±¡)</td>
<td><strong>â è½</strong> (<code>nullptr</code>)</td>
<td>â è½</td>
</tr>
<tr>
<td><strong>è¯­æ³å¤æåº¦</strong></td>
<td>ç®å</td>
<td>ç®å</td>
<td>ç¹ç (<code>*</code>, <code>&amp;</code>, <code>-&gt;</code>)</td>
<td>ç®å</td>
</tr>
<tr>
<td><strong>éç¨åºæ¯</strong></td>
<td><code>int</code>, <code>bool</code> ç­å°ç±»å</td>
<td><strong>é¦éæ¹æ¡</strong> (éç©ºå¯¹è±¡)</td>
<td>å¼å®¹ C</td>
<td>é»è®¤è¡ä¸º</td>
</tr>
</tbody>
</table>
<h2 id="2-å¯¹è±¡ççå½å¨æä»æå¨ç®¡çå°-raii-ä¸ç§»å¨è¯­ä¹">2. å¯¹è±¡ççå½å¨æï¼ä»æå¨ç®¡çå° RAII ä¸ç§»å¨è¯­ä¹</h2>
<p>å¨ç¬¬ä¸ç« æä»¬çå°ï¼C++ é»è®¤çâå¼ä¼ éâä¼å¯¼è´æ§è½é®é¢ï¼æ·±æ·è´ï¼ï¼èâæéä¼ éâè½ç¶å¿«ï¼ä½ä¼å¯¼è´ææææ¨¡ç³ã</p>
<p>è¿ä¸ç« æä»¬æ·±å¥æ¢è®¨å¦ä½æ¢è§£å³<strong>å®å¨é®é¢</strong>ï¼åå­æ³æ¼ï¼ï¼åè§£å³<strong>æ§è½é®é¢</strong>ï¼æ·è´å¼éï¼ã</p>
<h3 id="21-çç¹è£¸æéå¸¦æ¥çåå­æ³æ¼å±æº">2.1. çç¹ï¼è£¸æéå¸¦æ¥çâåå­æ³æ¼âå±æº</h3>
<p>å½æä»¬ä¼ éä¸ä¸ªæéï¼æèä»å½æ°è¿åä¸ä¸ªæéï¼æ¶ï¼ç¼è¯å¨åªè´è´£ä¼ éå°åã<strong>è¿å°±å¸¦æ¥äºä¸ä¸ªçµé­æ·é®ï¼è°è´è´£ <code>delete</code> è¿ä¸ªå¯¹è±¡ï¼</strong></p>
<p>çä¸é¢è¿ä¸ªçä¼¼æ­£å¸¸çä¾å­ï¼</p>
<pre><code class="language-cpp">#include &lt;iostream&gt;

class Enemy {
public:
    Enemy() { std::cout &lt;&lt; "Enemy Created" &lt;&lt; std::endl; }
    ~Enemy() { std::cout &lt;&lt; "Enemy Destroyed" &lt;&lt; std::endl; }
    void attack() { std::cout &lt;&lt; "Enemy attacks!" &lt;&lt; std::endl; }
};

// å·¥åå½æ°ï¼å¨å ä¸åå»ºä¸ä¸ªå¯¹è±¡ï¼å¹¶è¿åæé
Enemy* createEnemy() {
    // å±é©çæºå¤´ï¼new åºæ¥çåå­ï¼å¿é¡»æäºº delete
    return new Enemy(); 
}

void gameLogic() {
    // è·åæé
    Enemy* boss = createEnemy();
    
    boss-&gt;attack();

    // åè®¾è¿éæä¸æ®µå¤æçé»è¾
    if (true) {
        std::cout &lt;&lt; "Player died, game over early." &lt;&lt; std::endl;
        // è´å½é®é¢ï¼å½æ°ç´æ¥è¿åäºï¼ä½ boss æåçåå­æ²¡éæ¾ï¼
        return; 
    }

    // åªæä»£ç èµ°å°è¿éï¼åå­æä¼è¢«éæ¾
    delete boss; 
}

</code></pre>
<p><strong>åæ</strong>ï¼åªè¦ä½ å¨ <code>delete</code> ä¹ååäºä¸ä¸ª <code>return</code>ï¼æèæåºäºä¸ä¸ªå¼å¸¸ï¼Exceptionï¼ï¼è¿ååå­å°±æ°¸è¿ä¸¢äºãJava ç¨åºåå¯è½å¯¹æ­¤æ¯«æ æè§ ï¼JVMæGCæºå¶ï¼ï¼ä½å¨é¿æ¶é´è¿è¡çC++æå¡å¨ç¨åºï¼å¦æ°æ®åºï¼ä¸­ï¼è¿ä¼å¯¼è´åå­èå°½ï¼OOMï¼å¹¶å´©æºã</p>
<p><img src="https://img2024.cnblogs.com/blog/1158182/202602/1158182-20260208224359981-1634411041.jpg" alt="åå­æ³é²" loading="lazy"></p>
<h3 id="22-è§£å³æ¹æ¡gc-vs-raii">2.2. è§£å³æ¹æ¡ï¼GC vs. RAII</h3>
<p>ä¸ºäºè§£å³è¿ä¸ªé®é¢ï¼Java å C++ æ¯èµ°äºä¸¤æ¡å®å¨ä¸åçè·¯ã</p>
<h4 id="221-java-çåæ³åå¾åæ¶-gc">2.2.1. Java çåæ³ï¼åå¾åæ¶ (GC)</h4>
<p>Java è®¤ä¸ºï¼<strong>ç¨åºåä¸åºè¯¥æå¿åå­éæ¾ï¼äº¤ç»èææºï¼JVMï¼ã</strong></p>
<ul>
<li><strong>æºå¶</strong>ï¼JVM è¿è¡åå°çº¿ç¨ï¼å®ææ«æï¼åç°æ²¡äººå¼ç¨çå¯¹è±¡å°±åæ¶ã</li>
<li><strong>ä»£ä»·</strong>ï¼<strong>ä¸ç¡®å®æ§</strong>ï¼ä½ ä¸ç¥éå®ä»ä¹æ¶ååæ¶ï¼å <strong>STW (Stop The World)</strong>ï¼GC å·¥ä½æ¶å¯è½ä¼æåç¨åºï¼ã</li>
</ul>
<h4 id="222-c-çåæ³raii-èµæºè·åå³åå§å">2.2.2. C++ çåæ³ï¼RAII (èµæºè·åå³åå§å)</h4>
<p>C++ è®¤ä¸ºï¼<strong>æ§è½åç¡®å®æ§ç¬¬ä¸ãæä¸è¦åå°çº¿ç¨ï¼æè¦å©ç¨âæ âçç¹æ§æ¥èªå¨ç®¡çå åå­ã</strong></p>
<p>RAII (Resource Acquisition Is Initialization) çæ ¸å¿åçæ¯å°å åå­ç»å®å°æ å¯¹è±¡ä¸ï¼</p>
<ol>
<li><strong>æ å¯¹è±¡çéå¾</strong>ï¼æ å¯¹è±¡ï¼å±é¨åéï¼ä¸æ¦ç¦»å¼å®çä½ç¨åï¼å³å¤§æ¬å· <code>{}</code> ç»æï¼ï¼ç¼è¯å¨<strong>ä¸å®ä¼</strong>èªå¨è°ç¨å®ç<strong>ææå½æ°ï¼Destructorï¼</strong>ãæ è®ºæ¯å ä¸ºæ­£å¸¸æ§è¡å®ãè¿æ¯ä¸­é´ <code>return</code> äºãè¿æ¯æå¼å¸¸äºï¼<strong>å¿æ­»æ ç</strong>ã</li>
<li><strong>RAII çç­ç¥</strong>ï¼</li>
</ol>
<ul>
<li><strong>æé æ¶</strong>ï¼å¨æé å½æ°é <code>new</code> åå­ã</li>
<li><strong>æææ¶</strong>ï¼å¨ææå½æ°é <code>delete</code> åå­ã</li>
</ul>
<p>çä¸é¢çä»£ç ï¼æä»¬åä¸ä¸ªåè£ç±» <code>EnemyWrapper</code>ï¼</p>
<pre><code class="language-cpp">#include &lt;iostream&gt;

class Enemy {
public:
    Enemy() { std::cout &lt;&lt; "Enemy Created" &lt;&lt; std::endl; }
    ~Enemy() { std::cout &lt;&lt; "Enemy Destroyed" &lt;&lt; std::endl; }
    void attack() { std::cout &lt;&lt; "Enemy attacks!" &lt;&lt; std::endl; }
};

// å·¥åå½æ°ï¼å¨å ä¸åå»ºä¸ä¸ªå¯¹è±¡ï¼å¹¶è¿åæé
Enemy* createEnemy() {
    // å±é©çæºå¤´ï¼new åºæ¥çåå­ï¼å¿é¡»æäºº delete
    return new Enemy(); 
}

class EnemyWrapper {
private:
    // ææåå§æé
    Enemy* ptr;
public:
    // ãæé å½æ°ãï¼è·åèµæº
    EnemyWrapper() {
        ptr = new Enemy(); 
    }

    // ãææå½æ°ãï¼éæ¾èµæº (è¿æ¯ RAII ççµé­)
    ~EnemyWrapper() {
        if (ptr != nullptr) {
            delete ptr; // åªè¦ Wrapper è¢«éæ¯ï¼ptr æåçåå­å¿è¢«éæ¾
            std::cout &lt;&lt; "Wrapper triggered delete!" &lt;&lt; std::endl;
        }
    }
    
    // æ¨¡ææéæä½
    void attack() { ptr-&gt;attack(); }
};

void gameLogicSafe() {
    // è¿æ¯ä¸ä¸ªæ å¯¹è±¡
    EnemyWrapper boss; 
    
    boss.attack();

    if (true) {
        std::cout &lt;&lt; "Game over early." &lt;&lt; std::endl;
        // å³ä½¿è¿é returnï¼æ åé boss ä¹ä¼å¼¹åº
        return;
        // ç¼è¯å¨èªå¨æå¥ä»£ç ï¼call boss.~EnemyWrapper() -&gt; delete ptr
    }
}

int main() {
    gameLogicSafe();
    return 0;
}

</code></pre>
<p>è¿è¡ç»æï¼</p>
<pre><code class="language-text">Enemy Created
Enemy attacks!
Game over early.
Enemy Destroyed
Wrapper triggered delete!
</code></pre>
<p><strong>ç»è®º</strong>ï¼ä¸ç®¡ä½ æä¹åé»è¾ï¼åå­æ°¸è¿ä¸ä¼æ³æ¼ã</p>
<p><img src="https://img2024.cnblogs.com/blog/1158182/202602/1158182-20260208224425979-1751909243.jpg" alt="RAIIvsJava" loading="lazy"></p>
<h3 id="23-raii-çæ°é®é¢">2.3. RAII çæ°é®é¢</h3>
<p>ç°å¨ RAII è§£å³äºåå­æ³æ¼é®é¢ãä½æ¯ï¼å½æä»¬æ³æè¿ä¸ªå¯¹è±¡<strong>ä¼ éåºå»</strong>ï¼æ¯å¦ä»å½æ°è¿åï¼æ¶ï¼å°±åæé®é¢äºï¼</p>
<h4 id="231-æ¹æ¡-aç´æ¥ä¼ åé¨æéç ´åå°è£åå°è§£æ¾å">2.3.1. æ¹æ¡ Aï¼ç´æ¥ä¼ åé¨æéï¼ç ´åå°è£ï¼åå°è§£æ¾åï¼</h4>
<p>å¦ææ RAII å¯¹è±¡éçæéæ¿åºæ¥ä¼ éï¼é£å°±ä¸åå RAII ä¿æ¤äºãæä»¬çä¸é¢çä»£ç ï¼</p>
<pre><code class="language-cpp">Enemy* getBoss() {
    // æ å¯¹è±¡
    EnemyWrapper wrapper; 
    // æå¶å±é©ï¼
    return wrapper.ptr;   
} // å½æ°ç»æ -&gt; wrapper ææ -&gt; wrapper.ptr è¢« delete

void main() {
    Enemy* p = getBoss(); 
    // å´©æºï¼p æåçåå­å·²ç»è¢« wrapper å æäºï¼æ¬ç©ºæéï¼
    p-&gt;attack(); 
}

</code></pre>
<p><strong>ç»è®º</strong>ï¼ç»å¯¹ä¸è½æ RAII ç®¡ççè£¸æéæ³é²åºå»ï¼å¦å RAII å°±ç½åäºã</p>
<h4 id="232-æ¹æ¡-bæ·è´-raii-å¯¹è±¡å®å¨ä½ææ¢">2.3.2. æ¹æ¡ Bï¼æ·è´ RAII å¯¹è±¡ï¼å®å¨ä½ææ¢ï¼</h4>
<p>æ¢ç¶ä¸è½ä¼ è£¸æéï¼é£æä»¬åªè½ä¼  <code>EnemyWrapper</code> è¿ä¸ªå¯¹è±¡æ¬èº«ãå¨ C++11 ä¹åï¼è¿æå³ç<strong>æ·±æ·è´</strong>ãæä»¬çä¸é¢çä»£ç ï¼</p>
<pre><code class="language-cpp">#include &lt;iostream&gt;

// æ¨¡æä¸ä¸ªâæè´µâçèµæº
class Enemy {
public:
    Enemy() { std::cout &lt;&lt; "  [å èµæº] Enemy è¢« new åºæ¥äº (èæ¶æä½...)" &lt;&lt; std::endl; }
    ~Enemy() { std::cout &lt;&lt; "  [å èµæº] Enemy è¢« delete æäº" &lt;&lt; std::endl; }
};

// RAII åè£ç±»
class EnemyWrapper {
private:
    Enemy* ptr;

public:
    // ãæé å½æ°ãï¼è·åèµæº
    EnemyWrapper() {
        std::cout &lt;&lt; "[Wrapper] æ®éæé " &lt;&lt; std::endl;
        ptr = new Enemy(); 
    }

    // ãææå½æ°ãï¼éæ¾èµæº
    ~EnemyWrapper() {
        if (ptr != nullptr) {
            delete ptr;
            std::cout &lt;&lt; "[Wrapper] ææï¼éæ¾èµæº" &lt;&lt; std::endl;
        }
    }

    // ==========================================
    // ãæ·è´æé å½æ°ã(Deep Copy) -&gt; æ§è½ç¶é¢å¨è¿éï¼
    // ==========================================
    // å½æä»¬éè¦å¤å¶è¿ä¸ªå¯¹è±¡æ¶ï¼æ¯å¦å½æ°è¿åï¼ï¼å¿é¡»è°ç¨è¿ä¸ªå½æ°
    EnemyWrapper(const EnemyWrapper&amp; other) {
        std::cout &lt;&lt; "[Wrapper] â ï¸ è§¦åæ·±æ·è´ï¼å¿é¡»åéæ°åå­..." &lt;&lt; std::endl;
        
        // ç¬¨éçæ·±æ·è´ï¼
        // A. å¿é¡» new ä¸ä¸ªæ°ç Enemy (ä¸è½å±ç¨æéï¼å¦åä¼ double free)
        ptr = new Enemy(); 
        
        // B. (å¦æææ°æ®) è¿è¦æ other.ptr éçæ°æ®å¤å¶è¿æ¥
        // *ptr = *(other.ptr); 
    }
};

// è§¦åæ·è´çå½æ°
EnemyWrapper createBoss() {
    std::cout &lt;&lt; "--- è¿å¥å½æ° ---" &lt;&lt; std::endl;
    
    // Step 1: temp åå»ºï¼new Enemy (å°å A)
    EnemyWrapper temp; 
    
    std::cout &lt;&lt; "--- åå¤è¿å ---" &lt;&lt; std::endl;
    
    // Step 2: return æ¶ï¼å ä¸ºè¦ä¼ å¼ç»å¤é¢ï¼å¿é¡»ãæ·è´ãtemp
    // è¿æå³çï¼è°ç¨æ·è´æé å½æ° -&gt; new Enemy (å°å B) -&gt; å¤å¶æ°æ®
    return temp; 
    
    // Step 3: å½æ°ç»æï¼temp ç¦»å¼ä½ç¨åï¼delete A
    // (ç»æï¼æä»¬ä¸ºäºå¾å° Bï¼ç³è¯·äº Aï¼å¤å¶ç» Bï¼ç¶åå äº AãA åªæ¯ä¸ªä¸­é´åã)
}

int main() {
    std::cout &lt;&lt; "=== æ¼ç¤ºå¼å§ ===" &lt;&lt; std::endl;
    EnemyWrapper boss = createBoss();
    std::cout &lt;&lt; "=== æ¼ç¤ºç»æ ===" &lt;&lt; std::endl;
    return 0;
}

</code></pre>
<p>æ³¨æï¼è¿è¡ä¸é¢çä»£ç éè¦å³é­RVOï¼è¿åå¼ä¼åï¼ï¼éè¦å¨ç¼è¯å½ä»¤ä¸å <code>-fno-elide-constructors</code>åæ°ï¼ä¾å¦ï¼<code>g++ example.cpp -fno-elide-constructors -o example</code>ã</p>
<p>æè°çRVOæ­£ç°ä»£ C++ ç¼è¯å¨æâèªæâçå°æ¹ä¹ä¸ï¼æ¬æ¥æç§ C++ çè¯­æ³è§åï¼</p>
<ol>
<li><code>createBoss</code> éåå»º <code>temp</code>ã</li>
<li><code>return</code> æ¶ï¼åºè¯¥æ <code>temp</code> <strong>æ·è´</strong> ç» <code>main</code> éç <code>boss</code>ã</li>
<li>éæ¯ <code>temp</code>ã</li>
</ol>
<p>ä½æ¯ç¼è¯å¨è§å¾è¿æ ·å¤ªè ¢äºï¼æä»¥å®<strong>âä½å¼â</strong>äºï¼<br>
å®æ ¹æ¬æ²¡æå¨ <code>createBoss</code> éåå»º <code>temp</code>ï¼èæ¯<strong>ç´æ¥å¨ <code>main</code> å½æ°é <code>boss</code> çåå­å°åä¸</strong>æ§è¡äºæé å½æ°ã<br>
ç»æå°±æ¯ï¼<strong>0 æ¬¡æ·è´ï¼0 æ¬¡ç§»å¨ï¼ç´æ¥æé ã</strong></p>
<p>è½ç¶ç¼è¯å¨è½ä¼å <code>return</code>ï¼ä½ä¹å­å¾å¤å¨ç¼è¯å¨<strong>æ æ³ä¼å</strong>çåºæ¯ï¼æ¯å¦ <code>vector.push_back</code> æèå¤æçèµå¼ï¼ã</p>
<p>ä¸è¿°ä¾å­ç¦ç¨ä¼åä¹åçè¿è¡ç»æä¸ºï¼</p>
<pre><code class="language-text">=== æ¼ç¤ºå¼å§ ===
--- è¿å¥å½æ° ---
[Wrapper] æ®éæé 
  [å èµæº] Enemy è¢« new åºæ¥äº (èæ¶æä½...)
--- åå¤è¿å ---
[Wrapper] â ï¸ è§¦åæ·±æ·è´ï¼å¿é¡»åéæ°åå­...
  [å èµæº] Enemy è¢« new åºæ¥äº (èæ¶æä½...)
  [å èµæº] Enemy è¢« delete æäº
[Wrapper] ææï¼éæ¾èµæº
=== æ¼ç¤ºç»æ ===
  [å èµæº] Enemy è¢« delete æäº
[Wrapper] ææï¼éæ¾èµæº
</code></pre>
<p><strong>è¿éççç¹</strong>ï¼<br>
æä»¬é·å¥äºæ­»å¾ªç¯ï¼</p>
<ul>
<li>æ³<strong>å¿«</strong>ï¼ç¨æé -&gt; <strong>ä¸å®å¨</strong>ï¼åå­æ³æ¼ææ¬ç©ºæéï¼ã</li>
<li>æ³<strong>å®å¨</strong>ï¼ç¨ RAII -&gt; <strong>æ¢</strong>ï¼å¿é¡»æ·±æ·è´ï¼å ä¸ºä¸è½è®©ä¸¤ä¸ª RAII å¯¹è±¡åæ¶æ¥æåä¸ä¸ªæéï¼å¦åä¼ double freeï¼ã</li>
</ul>
<p><strong>æä»¬éè¦ä¸ç§æºå¶ï¼æ¢è½ä¿ç RAII çå£³å­ï¼å®å¨ï¼ï¼åè½åæéä¸æ ·åªä¼ éå°åï¼å¿«ï¼ã</strong></p>
<p><img src="https://img2024.cnblogs.com/blog/1158182/202602/1158182-20260208224449858-1537769784.jpg" alt="RAIIçé®é¢" loading="lazy"></p>
<h3 id="24-ä»ä¹æ¯å³å¼-rvalue">2.4. ä»ä¹æ¯å³å¼ (Rvalue)ï¼</h3>
<p>ä¸ºäºæç ´è¿ä¸ªåµå±ï¼C++11 å¼å¥äº <strong>å³å¼å¼ç¨ (<code>&amp;&amp;</code>)</strong>ãä½é¦åï¼æä»¬è¦ææ¸æ¥ä»ä¹æ¯âå³å¼âã</p>
<p>ä½ä¸ºå¼åèï¼ä¸éè¦èè¯µå¤æçå®ä¹ï¼åªéè¦ææ¡ä¸ä¸ª<strong>é»éæ³å</strong>ï¼</p>
<blockquote>
<p><strong>è½å¯¹å®åå°å (<code>&amp;</code>) çï¼å°±æ¯å·¦å¼ (Lvalue)ã</strong><br>
<strong>ä¸è½å¯¹å®åå°åçï¼å°±æ¯å³å¼ (Rvalue)ã</strong></p>
</blockquote>
<h4 id="241-è°æ¯å·¦å¼è°æ¯å³å¼">2.4.1. è°æ¯å·¦å¼ï¼è°æ¯å³å¼ï¼</h4>
<p>æä»¬éè¿å è¡ç®åçä»£ç æ¥åè¾¨ï¼</p>
<pre><code class="language-cpp">int a = 10; 

</code></pre>
<ul>
<li>
<p><strong><code>a</code> æ¯å·¦å¼</strong>ï¼</p>
</li>
<li>
<p><strong>ä¸ºä»ä¹ï¼</strong> å ä¸ºä½ å¯ä»¥å <code>&amp;a</code>ï¼è½æ¿å°å®çåå­å°åãå®å¨æ ä¸æä¸ä¸ªåºå®çå®¶ã</p>
</li>
<li>
<p><strong>çå½å¨æ</strong>ï¼æä¹ï¼ç´å°å¤§æ¬å· <code>}</code> ç»æã</p>
</li>
<li>
<p><strong><code>10</code> æ¯å³å¼</strong>ï¼</p>
</li>
<li>
<p><strong>ä¸ºä»ä¹ï¼</strong> å®æ¯å­é¢éãä½ è¯çå <code>int* p = &amp;10;</code>ï¼ç¼è¯å¨ä¼ç´æ¥æ¥éãå®æ²¡æå°åï¼å®åªæ¯ä»£ç éçä¸ä¸ªæ°å­ã</p>
</li>
</ul>
<h4 id="242-éèçå³å¼ä¸´æ¶å¯¹è±¡">2.4.2. éèçå³å¼ï¼ä¸´æ¶å¯¹è±¡ï¼</h4>
<p>å¯¹äºå¯¹è±¡æ¥è¯´ï¼å³å¼å¾å¾æ¯ä¸ä¸ª<strong>âæ åæ å§çå¹½çµå¯¹è±¡â</strong>ãè¿æ¯æå®¹æè¢«å¿½è§çåºæ¯ã</p>
<pre><code class="language-cpp">EnemyWrapper getBoss() {
    // è¿åä¸ä¸ªæ°åå»ºçå¯¹è±¡
    return EnemyWrapper();
}

void main() {
    EnemyWrapper boss = getBoss(); 
}

</code></pre>
<p><strong>é®é¢ï¼<code>getBoss()</code> æ§è¡å®çé£ä¸ç¬é´ï¼åçäºä»ä¹ï¼</strong></p>
<ol>
<li>å½æ°åé¨åå»ºäºä¸ä¸ª <code>EnemyWrapper</code> å¯¹è±¡ã</li>
<li>å½æ°è¿åæ¶ï¼è¿ä¸ªå¯¹è±¡è¢«æäºåºæ¥ã</li>
<li><strong>å¨å®è¢«èµå¼ç»åé <code>boss</code> ä¹åï¼å®æ¼æµ®å¨èç©ºä¸­ã</strong></li>
</ol>
<p>è¿ä¸ªæ¼æµ®å¨èç©ºä¸­çå¯¹è±¡ï¼å°±æ¯ <strong>å³å¼</strong>ã</p>
<ul>
<li><strong>ç¹å¾</strong>ï¼å®å­å¨ï¼å ç¨äºåå­ï¼ä½<strong>æ²¡æåå­</strong>ã</li>
<li><strong>å½è¿</strong>ï¼<strong>å®é©¬ä¸å°±è¦æ­»äº</strong>ãä¸æ¦èµå¼è¯­å¥ç»æï¼è¿ä¸ªä¸´æ¶å¯¹è±¡å°±ä¼ææã</li>
</ul>
<h4 id="243-stdmove-å°åºåäºä»ä¹">2.4.3. <code>std::move()</code> å°åºåäºä»ä¹ï¼</h4>
<p>ä½ ç»å¸¸ä¼çå° <code>std::move(x)</code>ãå¾å¤äººè¯¯ä»¥ä¸ºå®ä¼ç§»å¨æ°æ®ï¼å¶å®å®ä»ä¹é½æ²¡ç§»å¨ãå®çä½ç¨åªæä¸ä¸ªï¼<strong>èº«ä»½æ¬ºè¯</strong>ã</p>
<pre><code class="language-cpp">// a æ¯å·¦å¼ï¼æ´»å¾å¥½å¥½ç
EnemyWrapper a; 

// å¼ºè¡æ a æ è®°ä¸ºå³å¼
EnemyWrapper b = std::move(a); 

</code></pre>
<ul>
<li><code>a</code> æ¬æ¥æ¯å·¦å¼ã</li>
<li><code>std::move(a)</code> ç¸å½äºç» <code>a</code> è´´äºä¸ªæ¡å­ï¼â<strong>è¿è¾è½¦æä¸æ³è¦äºï¼å½åºåå¤ç</strong>âã</li>
<li>äºæ¯ï¼<code>a</code> è¢«å¼ºå¶è½¬æ¢æäº <strong>å³å¼</strong>ã</li>
<li><code>b</code> çå°è¿ä¸ªæ¡å­ï¼å°±ä¼è®¤ä¸º <code>a</code> æ¯ä¸ªå°æ­»ä¹ç©ï¼ä»èç´æ¥âå·èµ°âå®çèµæºã</li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/1158182/202602/1158182-20260208224512528-1563159360.jpg" alt="ä»ä¹æ¯å³å¼" loading="lazy"></p>
<h3 id="25-ç»ææ¹æ¡ç§»å¨è¯­ä¹-move-semantics">2.5. ç»ææ¹æ¡ï¼ç§»å¨è¯­ä¹ (Move Semantics)</h3>
<p>æ¢ç¶æä»¬è½è¯å«åºå³å¼ï¼å°æ­»ä¹ç©ï¼ï¼æä»¬å°±å¯ä»¥å©ç¨è¿ä¸ç¹æ¥ä¼å RAIIã</p>
<p>æä»¬å¨ <code>EnemyWrapper</code> éå ä¸ä¸ªç¹æ®çæé å½æ°ââ<strong>ç§»å¨æé å½æ°</strong>ãå®ä¸é¨æ¥æ¶å³å¼å¼ç¨ (<code>&amp;&amp;</code>)ã</p>
<p><strong>ç§»å¨çæ¬è´¨å°±æ¯ï¼åæ³ççªåã</strong></p>
<pre><code class="language-cpp">#include &lt;iostream&gt;

// æ¨¡æä¸ä¸ªâæè´µâçèµæº
class Enemy {
public:
    Enemy() { std::cout &lt;&lt; "  [å èµæº] Enemy è¢« new åºæ¥äº (èæ¶æä½...)" &lt;&lt; std::endl; }
    ~Enemy() { std::cout &lt;&lt; "  [å èµæº] Enemy è¢« delete æäº" &lt;&lt; std::endl; }
};

// RAII åè£ç±»
class EnemyWrapper {
private:
    Enemy* ptr;

public:
    // ãæé å½æ°ãï¼è·åèµæº
    EnemyWrapper() {
        std::cout &lt;&lt; "[Wrapper] æ®éæé " &lt;&lt; std::endl;
        ptr = new Enemy(); 
    }

    // ãææå½æ°ãï¼éæ¾èµæº
    ~EnemyWrapper() {
        if (ptr != nullptr) {
            delete ptr;
            std::cout &lt;&lt; "[Wrapper] ææï¼éæ¾èµæº" &lt;&lt; std::endl;
        }
    }

    // ==========================================
    // ãæ·è´æé å½æ°ã(Deep Copy) -&gt; æ§è½ç¶é¢å¨è¿éï¼
    // ==========================================
    // å½æä»¬éè¦å¤å¶è¿ä¸ªå¯¹è±¡æ¶ï¼æ¯å¦å½æ°è¿åï¼ï¼å¿é¡»è°ç¨è¿ä¸ªå½æ°
    EnemyWrapper(const EnemyWrapper&amp; other) {
        std::cout &lt;&lt; "[Wrapper] â ï¸ è§¦åæ·±æ·è´ï¼å¿é¡»åéæ°åå­..." &lt;&lt; std::endl;
        
        // ç¬¨éçæ·±æ·è´ï¼
        // A. å¿é¡» new ä¸ä¸ªæ°ç Enemy (ä¸è½å±ç¨æéï¼å¦åä¼ double free)
        ptr = new Enemy(); 
        
        // B. (å¦æææ°æ®) è¿è¦æ other.ptr éçæ°æ®å¤å¶è¿æ¥
        // *ptr = *(other.ptr); 
    }

    // ãç§»å¨æé ã(Move) - C++11 çæ°æ¹æ¡
    // åæ°æ¯ &amp;&amp;ï¼è¡¨ç¤ºå¯¹æ¹æ¯âå°æ­»ä¹ç©â
    EnemyWrapper(EnemyWrapper&amp;&amp; other) noexcept {
        // 1. å·æ¢æ¢æ±ï¼æå¯¹æ¹çæéæ¿è¿æ¥
        this-&gt;ptr = other.ptr;
        
        // 2. æ¯ç­è¯æ®ï¼æå¯¹æ¹çæéè®¾ä¸º nullptr
        // è¿ä¸æ­¥è³å³éè¦ï¼
        // å½ other æææ¶ï¼å®ä¼ delete nullptr (ä»ä¹ä¹ä¸å)
        // ä»èé¿åäºèµæºè¢«è¯¯å 
        other.ptr = nullptr; 
        
        std::cout &lt;&lt; "Move: Ownership transferred!" &lt;&lt; std::endl;
    }
};

// è§¦åç§»å¨æé å½æ°
EnemyWrapper createBoss() {
    // è¿ä¸è¡ä»£ç åäºä¸¤ä»¶äºï¼
    // 1. å¨ãæ ãä¸åéäº EnemyWrapper è¿ä¸ªå£³å­çåå­ï¼éå¸¸å¿«ï¼ä¸éè¦ newï¼
    // 2. èªå¨è°ç¨äºå®çæé å½æ°
    EnemyWrapper temp; 
    // temp æ¯å±é¨åéï¼è¿åæ¶è¢«è§ä¸ºå³å¼
    return temp; 
}

int main() {
    // 1. createBoss è¿åä¸´æ¶å¯¹è±¡ï¼å³å¼ï¼
    // 2. è§¦åãç§»å¨æé å½æ°ã
    // 3. main éç boss ç´æ¥æ¥ç®¡äº temp éçæé
    // 4. temp åæç©ºå£³è¢«éæ¯
    EnemyWrapper boss = createBoss(); 
    
    // ç»æï¼
    // - æ²¡æåç Deep Copy (çäº new/copy)
    // - æ²¡æä¼ éè£¸æé (å¨ç¨é½å¨ RAII åè£ä¸ï¼éå¸¸å®å¨)
}

</code></pre>
<p>è¿è¡ç»æï¼</p>
<pre><code class="language-text">[Wrapper] æ®éæé 
  [å èµæº] Enemy è¢« new åºæ¥äº (èæ¶æä½...)
Move: Ownership transferred!
  [å èµæº] Enemy è¢« delete æäº
[Wrapper] ææï¼éæ¾èµæº
</code></pre>
<p>å¯ä»¥çå°ï¼ç°å¨æ²¡ææ·±æ·è´æä½äºãä½çå°è¿éï¼å¯è½å¤§å®¶è¿ææå ä¸ªé®é¢ï¼</p>
<h4 id="251-é®é¢-1ä¸ºä»ä¹ä¸è½å¨æ·è´æé å½æ°ä¸­æ å¤ºèµæº">2.5.1 é®é¢ 1ï¼ä¸ºä»ä¹ä¸è½å¨æ·è´æé å½æ°ä¸­âæ å¤ºâèµæºï¼</h4>
<p>ä½ å¯è½ä¼æ³ï¼âè½ä¸è½å«æä»ä¹ç§»å¨æé å½æ°äºï¼ç´æ¥æ¹åæ·è´æé å½æ°ï¼æ <code>const</code> å»æï¼ç¶åå¨éé¢å·æéï¼â</p>
<p><strong>ç­æ¡æ¯ï¼è¯­æ³ä¸è¡å¾éï¼ä½å¨é»è¾ä¸æ¯âç¾é¾âã</strong></p>
<h5 id="2511-çç±-aå¥çº¦ç²¾ç¥-è¯­ä¹æ··æ·">2.5.1.1. çç± Aï¼å¥çº¦ç²¾ç¥ (è¯­ä¹æ··æ·)</h5>
<p>å¨ç¼ç¨ä¸çéï¼â<strong>æ·è´ (Copy)</strong>âè¿ä¸ªè¯æ¯ææç¡®å®ä¹çï¼<strong>å¶ä½å¯æ¬ï¼åä»¶ä¸åå½±åã</strong></p>
<p>å¦ææå <code>b = a;</code>ï¼æç§äººç±»çç´è§ï¼<code>a</code> åºè¯¥è¿å¨é£éï¼å®å¥½æ æã<br>
å¦æä½ å¨æ·è´å½æ°éæâæ å¤ºâï¼å°±ä¼åºç°è¿ç§ææåºæ¯ï¼</p>
<pre><code class="language-cpp">// åè®¾è¿æ¯âé­æ¹çâçæ·è´æé å½æ° (æ²¡æ const)
EnemyWrapper(EnemyWrapper&amp; other) {
    this-&gt;ptr = other.ptr;
    other.ptr = nullptr; // å·å·æåä»¶æ¯äºï¼
}

void logicalDisaster() {
    EnemyWrapper a; // a æèµæº
    
    // æåªæ³åä¸ä¸ªå¤ä»½
    EnemyWrapper b = a; 
    
    // ç¾é¾åçï¼a åæç©ºå£³äºï¼
    // åé¢çä»£ç å¦æç»§ç»­ç¨ aï¼ç¨åºç´æ¥å´©æºã
    a.attack(); // Crash!
}

</code></pre>
<p><strong>ç»è®º</strong>ï¼å¦ææ·è´ä¼ç ´ååä»¶ï¼é£å°±ä¸è½å«âæ·è´âï¼é£å«âæ¢å«âãç¨åºåæ æ³éè¿ä»£ç ä¸ç¼çåº <code>b = a</code> å°åºå®å¨ä¸å®å¨ãä¸ºäºåºåâå¤å¶âåâè½¬ç§»âï¼æä»¬éè¦ä¸¤ä¸ªä¸åçå½æ°ã</p>
<h5 id="2512-çç±-bè¯­æ³éå¶-const-correctness">2.5.1.2. çç± Bï¼è¯­æ³éå¶ (Const Correctness)</h5>
<p>æ åçæ·è´æé å½æ°ç­¾åæ¯ <code>const EnemyWrapper&amp; other</code>ã</p>
<ul>
<li>é£ä¸ª <strong><code>const</code></strong> æ¯éå¾ãå®åè°ç¨èä¿è¯ï¼âä½ æ¾å¿ä¼ ç»æï¼æç»ä¸å¨ä½ çä¸æ ¹æ¯«æ¯âã</li>
<li>å ä¸ºæ <code>const</code>ï¼ç¼è¯å¨ç¦æ­¢ä½ å <code>other.ptr = nullptr;</code>ã</li>
<li>å¦æä½ å¼ºè¡å»æ <code>const</code>ï¼å®å°±æ æ³æ¥åä¸´æ¶å¯¹è±¡ï¼å ä¸ºä¸´æ¶å¯¹è±¡éå¸¸ç»å®å° const å¼ç¨ï¼ï¼å¯¼è´éç¨æ§å¤§æææ£ã</li>
</ul>
<h4 id="252-é®é¢-2ç¼è¯å¨æ¯å¦ä½åºåè°ç¨æ·è´è¿æ¯ç§»å¨ç">2.5.2 é®é¢ 2ï¼ç¼è¯å¨æ¯å¦ä½åºåè°ç¨âæ·è´âè¿æ¯âç§»å¨âçï¼</h4>
<p>è¿æ¯ä¸ä¸ªéå¸¸ç²¾å½©ç<strong>âå½æ°éè½½å³è®®â (Overload Resolution)</strong> è¿ç¨ã</p>
<p>ç¼è¯å¨å¹¶ä¸æ¯éè¿âçâä½ çæå¾æ¥å³å®çï¼å®æ¯éè¿<strong>åæ°ç±»åå¹é</strong>æ¥å³å®çã</p>
<h5 id="2521-ä¸¤ä¸ªå½æ°çç­¾åå¯¹æ¯">2.5.2.1. ä¸¤ä¸ªå½æ°çç­¾åå¯¹æ¯</h5>
<ul>
<li><strong>æ·è´æé </strong>ï¼<code>EnemyWrapper(const EnemyWrapper&amp;)</code> -&gt; æ¥æ¶ <strong>å·¦å¼</strong> (åå³å¼ï¼ä½ä¸ºå¤è)ã</li>
<li><strong>ç§»å¨æé </strong>ï¼<code>EnemyWrapper(EnemyWrapper&amp;&amp;)</code>      -&gt; ä¸é¨æ¥æ¶ <strong>å³å¼</strong>ã</li>
</ul>
<h5 id="2522-createboss-éçå³ç­è¿ç¨">2.5.2.2. <code>createBoss</code> éçå³ç­è¿ç¨</h5>
<p>å½ä½ å¨ <code>return temp;</code> æ¶ï¼åè®¾ RVO è¢«ç¦ç¨ï¼å¿é¡»åçä¼ éï¼ï¼</p>
<ol>
<li><strong>å¤å® <code>temp</code> çç¶æ</strong>ï¼<br>
è½ç¶ <code>temp</code> å¨å½æ°éå®ä¹æ¶æ¯ä¸ªå·¦å¼ï¼ä½<strong>å ä¸ºå®é©¬ä¸è¦è¢« return äºï¼å³å°éæ¯</strong>ï¼C++ ç¼è¯å¨ä¼èªå¨æå®è§ä¸º <strong>xvalue (å°äº¡å¼)</strong>ï¼ä¹å°±æ¯ä¸ç§<strong>å³å¼</strong>ã</li>
<li><strong>å¼å§å¹éæé å½æ°</strong>ï¼<br>
ç¼è¯å¨çç <code>main</code> å½æ°éæ­£å¨ç­å¾æ¥æ¶ç <code>boss</code> å¯¹è±¡ï¼é®ï¼âææéæä¸ä¸ª<strong>å³å¼</strong>ï¼æè¯¥è°ç¨åªä¸ªæé å½æ°æ¥åå§å <code>boss</code>ï¼â</li>
</ol>
<ul>
<li><strong>éæ A (æ·è´)</strong>ï¼æè¦ <code>const &amp;</code>ãå¯ä»¥æ¥æ¶å³å¼åï¼<strong>å¯ä»¥</strong>ï¼const å¼ç¨è½æ¥ä¸ç©ï¼ï¼ä½åªæ¯âå¼å®¹âã</li>
<li><strong>éæ B (ç§»å¨)</strong>ï¼æè¦ <code>&amp;&amp;</code>ãå¯ä»¥æ¥æ¶å³å¼åï¼<strong>å®ç¾å¹éï¼</strong></li>
</ul>
<ol start="3">
<li><strong>æ©ä¼å½å</strong>ï¼<br>
ç¼è¯å¨åç°éæ B æ¯<strong>ç²¾ç¡®å¹é (Exact Match)</strong>ï¼æä»¥æ¯«ä¸ç¹è±«å°éæ©äº<strong>ç§»å¨æé å½æ°</strong>ã</li>
</ol>
<h5 id="2523-åªææ·è´æé å½æ°æ¶ä¼ææ ·">2.5.2.3. åªææ·è´æé å½æ°æ¶ä¼ææ ·ï¼</h5>
<p>å¦æä½ æ²¡åç§»å¨æé å½æ°ï¼C++98 çæåµï¼ï¼</p>
<ul>
<li>ç¼è¯å¨æéæ¿çå³å¼ï¼åç°æ²¡æ <code>&amp;&amp;</code> çæé å½æ°ã</li>
<li>å®ä¼éèæ±å¶æ¬¡ï¼åç° <code>const &amp;</code>ï¼æ·è´æé ï¼ä¹è½æ¥æ¶å³å¼ã</li>
<li>äºæ¯å«æ³ªè°ç¨äºæ·è´æé å½æ°ï¼æ·±æ·è´ï¼ã</li>
</ul>
<h4 id="253-æ»ç»">2.5.3. æ»ç»</h4>
<table>
<thead>
<tr>
<th>åºæ¯</th>
<th>ä¼ éç»æé å½æ°çåæ°</th>
<th>ä¼åå¹é</th>
<th>å¤éå¹é</th>
<th>ç»æ</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>EnemyWrapper b = a;</code></td>
<td><strong>å·¦å¼</strong> (a è¿è¦æ¥çç¨)</td>
<td><code>(const T&amp;)</code> æ·è´</td>
<td>æ </td>
<td><strong>æ·±æ·è´</strong></td>
</tr>
<tr>
<td><code>return temp;</code></td>
<td><strong>å³å¼</strong> (temp é©¬ä¸æ­»)</td>
<td><code>(T&amp;&amp;)</code> ç§»å¨</td>
<td><code>(const T&amp;)</code> æ·è´</td>
<td><strong>ç§»å¨ (å·)</strong></td>
</tr>
<tr>
<td><code>b = std::move(a);</code></td>
<td><strong>å³å¼</strong> (å¼ºè½¬ç)</td>
<td><code>(T&amp;&amp;)</code> ç§»å¨</td>
<td><code>(const T&amp;)</code> æ·è´</td>
<td><strong>ç§»å¨ (å·)</strong></td>
</tr>
</tbody>
</table>
<p><strong>ä¸å¥è¯æ»ç»ï¼ç¼è¯å¨çâåæ°ç±»åâãå¦ææ¯âå°æ­»ä¹ç©ï¼å³å¼ï¼âï¼ä¼åå¹é <code>&amp;&amp;</code> çï¼ç§»å¨ï¼ï¼å¦ææ¯âæ®éå¯¹è±¡ï¼å·¦å¼ï¼âï¼åªè½å¹é <code>const &amp;</code> çï¼æ·è´ï¼ã</strong></p>
<p><img src="https://img2024.cnblogs.com/blog/1158182/202602/1158182-20260208224541966-1378007066.jpg" alt="ç§»å¨è¯­ä¹" loading="lazy"></p>
<h3 id="26-é¿åæåreturn-æ¶åä¸å«ç¨-move">2.6. é¿åæåï¼<code>return</code> æ¶åä¸å«ç¨ <code>move</code></h3>
<p>é£<strong>å¨ <code>createBoss</code> å½æ°éï¼éè¦å <code>return std::move(temp);</code> åï¼</strong></p>
<p><strong>ç­æ¡æ¯ï¼ä¸è¦ï¼</strong></p>
<pre><code class="language-cpp">EnemyWrapper createBoss() {
    EnemyWrapper temp; 
    
    // æ­£ç¡®åæ³ï¼ç¼è¯å¨ä¼èªå¨ä¼å (RVO)
    // ç¼è¯å¨ä¼ç´æ¥å¨å¤é¨åéçåå­å°åä¸æé  tempï¼è¿âç§»å¨âé½ä¸éè¦åï¼
    // ææ¬ = 0
    return temp; 
    
    // éè¯¯åæ³ï¼ç»èæ·»è¶³
    // return std::move(temp); 
    // è¿ä¼å¼ºè¡ææ­ç¼è¯å¨ç RVO ä¼åï¼å¼ºå¶æ§è¡ä¸æ¬¡âç§»å¨æé âã
    // ææ¬ &gt; 0 (è½ç¶ä¹å¾ä½ï¼ä½æ¯å±äºâè´ä¼åâ)
}

</code></pre>
<p><strong>é£ <code>std::move</code> å°åºç¨å¨åªéï¼</strong><br>
ç¨å¨ä½ éè¦<strong>æ¾å¼è½¬ç§»</strong>ä¸ä¸ªå·¦å¼çææææ¶ï¼</p>
<pre><code class="language-cpp">int main() {
    // 1. RVO èªå¨ä¼åï¼è¿éæ²¡ææ·è´ï¼ä¹æ²¡æç§»å¨
    EnemyWrapper boss1 = createBoss(); 

    // 2. åè®¾ä½ æ³æ boss1 è½¬ç» boss2
    // EnemyWrapper boss2 = boss1; // ç¼è¯æ¥éï¼åè®¾ç¦ç¨äºæ·è´ï¼ææ·±æ·è´ï¼æ¢ï¼

    // 3. è¿éå¿é¡»ç¨ std::moveï¼
    // å ä¸º boss1 æ¯ä¸ªæ´»ççå·¦å¼ï¼ç¼è¯å¨ä¸æ¢èªå¨å¨å®ã
    // ä½ å¿é¡»æå¨ç­¾ç½²âæ¾å¼æææä¹¦âã
    EnemyWrapper boss2 = std::move(boss1); 

    // æ­¤å»ï¼boss2 æ¿å°äºæéï¼boss1 åæäºç©ºå£³ã
}

</code></pre>
<h3 id="27-ç§»å¨è¯­ä¹çæ¬è´¨æææè½¬ç§»-ownership-transfer">2.7. ç§»å¨è¯­ä¹çæ¬è´¨ï¼æææè½¬ç§» (Ownership Transfer)</h3>
<p>å¾å¤ä» Java/Python è½¬è¿æ¥çå¼åèï¼å¨çè§£âç§»å¨âæ¶å®¹æé·å¥è¯¯åºï¼è®¤ä¸ºæ°æ®ççå¨åå­éâæ¬å®¶âäºã</p>
<p><strong>ç§»å¨è¯­ä¹çæ¬è´¨ï¼å¹¶ä¸æ¯ç§»å¨æ°æ®ï¼èæ¯âæææçäº¤æ¥âã</strong></p>
<h4 id="271-æ ¸å¿ææ³å¯ä¸è´£ä»»å¶-sole-ownership">2.7.1. æ ¸å¿ææ³ï¼å¯ä¸è´£ä»»å¶ (Sole Ownership)</h4>
<p>å¨ Java ä¸­ï¼å¯¹è±¡çææææ¯<strong>å±äº«ç</strong>ï¼Sharedï¼ã</p>
<ul>
<li>ä½ æä¸ä¸ª <code>List</code>ï¼ä¼ ç»å½æ° Aï¼ä¼ ç»å½æ° Bï¼å¤§å®¶é½æ¿çå¼ç¨çå¯æ¬ã</li>
<li>è°è´è´£éæ¯å®ï¼è°é½ä¸è´è´£ãGC è´è´£ã</li>
<li>è¿ç§æ¨¡å¼å¾çå¿ï¼ä½å¨èµæºææï¼å¦æä»¶å¥æãç½ç»è¿æ¥ãäºæ¥éï¼æé«æ§è½åºæ¯ä¸ï¼ä¼å¯¼è´èµæºéæ¾çä¸å¯æ§ã</li>
</ul>
<p>å¨ç°ä»£ C++ï¼RAII + Moveï¼ä¸­ï¼æä»¬å¼ºè°<strong>ç¬å æææ</strong>ï¼Exclusive Ownershipï¼ã</p>
<ul>
<li><strong>åå</strong>ï¼å¯¹äºæä¸åå åå­èµæºï¼å¨ä»»ä½æ¶å»ï¼<strong>åªè½æä¸ä¸ª</strong>å¯¹è±¡å¯¹å®è´è´£ã</li>
<li><strong>æ¨è®º</strong>ï¼æ¢ç¶åªæä¸ä¸ªä¸»äººï¼é£ä¹å½è¿ä¸ªä¸»äººè¢«éæ¯æ¶ï¼èµæºå¿é¡»è¢«éæ¯ã</li>
</ul>
<h4 id="272-ç§»å¨çç©çå¨ä½æµæ·è´--æ¹é¤åä¸»-shallow-copy--nullify">2.7.2. ç§»å¨çç©çå¨ä½ï¼æµæ·è´ + æ¹é¤åä¸» (Shallow Copy + Nullify)</h4>
<p>æ¢ç¶èµæºåªè½æä¸ä¸ªä¸»äººï¼é£ä¹å½æä»¬éè¦æèµæºä¼ ç»å«äººæ¶ï¼å°±ä¸è½æ¯âåäº«âï¼Copyï¼ï¼åªè½æ¯âè¿æ·âï¼Moveï¼ã</p>
<p><strong>ç§»å¨è¯­ä¹å¨æ±ç¼å±é¢çæ¬è´¨åªæä¸¤æ­¥ï¼</strong></p>
<ol>
<li><strong>çªåæéï¼Shallow Copyï¼</strong>ï¼</li>
</ol>
<ul>
<li>æ°ä¸»äººï¼<code>dest</code>ï¼ææ§ä¸»äººï¼<code>src</code>ï¼æéçæéå¼ï¼å°åï¼å¤å¶è¿æ¥ã</li>
<li><em>æ­¤å»ï¼ä¸¤ä¸ªäººé½æåäºåä¸ä¸ªèµæºï¼å±é©ç¶æï¼ï¼ã</em></li>
</ul>
<ol start="2">
<li><strong>æ¹é¤æ§ä¸»ï¼Nullifyï¼</strong>ï¼</li>
</ol>
<ul>
<li><strong>æå³é®çä¸æ­¥</strong>ï¼ææ§ä¸»äººï¼<code>src</code>ï¼æéçæéè®¾ä¸º <code>nullptr</code>ã</li>
<li><em>ç»æï¼æ§ä¸»äººå¤±å»äºå¯¹èµæºçæ§å¶æï¼åæäºç©ºå£³ã</em></li>
</ul>
<h4 id="273-ç°å®ä¸ççç±»æ¯">2.7.3. ç°å®ä¸ççç±»æ¯</h4>
<p>ä¸ºäºçè§£âæ·è´âåâç§»å¨âçåºå«ï¼æä»¬å¯ä»¥ç¨ <strong>âæ¿äº§è¯â</strong> åæ¯å»ï¼</p>
<ul>
<li><strong>èµæºï¼Resourceï¼</strong>ï¼æ¿å­ï¼ä¸å¨äº§ï¼å¾è´µï¼æ¬ä¸å¨ï¼ã</li>
<li><strong>æéï¼Pointerï¼</strong>ï¼æ¿äº§è¯ï¼ä¸å¼ çº¸ï¼å¾è½»ï¼ã</li>
</ul>
<p><strong>åºæ¯ Aï¼æ·±æ·è´ (Deep Copy) ââ C++98 çåæ³</strong></p>
<ul>
<li><strong>æä½</strong>ï¼ä½ æ³ææ¿å­ç»ä½ çå¿å­ã</li>
<li><strong>C++98</strong>ï¼ä½ å¿é¡»å¨éå£çä¸æ <strong>ä¸æ¨¡ä¸æ ·</strong>çæ°æ¿å­ï¼<code>new</code>ï¼ï¼ç¶åææ°æ¿å­çæ¿äº§è¯ç»å¿å­ã</li>
<li><strong>ä»£ä»·</strong>ï¼æåº¦æµªè´¹é±åæ¶é´ã</li>
</ul>
<p><strong>åºæ¯ Bï¼ç§»å¨è¯­ä¹ (Move Semantics) ââ C++11 çåæ³</strong></p>
<ul>
<li><strong>æä½</strong>ï¼ä½ æ³ææ¿å­ç»ä½ çå¿å­ã</li>
<li><strong>C++11</strong>ï¼ä½ ææéç<strong>æ¿äº§è¯</strong>ç´æ¥äº¤ç»å¿å­ï¼ç¶åæä½ èªå·±çåå­ä»æ¿ç®¡å±æ³¨éã</li>
<li><strong>ä»£ä»·</strong>ï¼æ¿å­æ ¹æ¬æ²¡å¨ï¼åªæ¯<strong>ææäººåäº</strong>ã</li>
</ul>
<h4 id="274-ä¸ºä»ä¹è¯´è¿æ¯æææçä½ç°">2.7.4. ä¸ºä»ä¹è¯´è¿æ¯âæææâçä½ç°ï¼</h4>
<p>åå°æä»¬ä¹åç <code>EnemyWrapper</code> ä»£ç ï¼</p>
<pre><code class="language-cpp">EnemyWrapper(EnemyWrapper&amp;&amp; other) noexcept {
    // 1. æ¥è¿æ¿äº§è¯
    this-&gt;ptr = other.ptr; 
    
    // 2. åä¸»æ³¨éï¼ä»æ­¤è¿æ¿å­åä½ æ å³äº
    other.ptr = nullptr; 
}

</code></pre>
<p>è¿éä½ç°äº C++ æç¡¬æ ¸çå¥çº¦ç²¾ç¥ï¼</p>
<blockquote>
<p><strong>"æç§»å¨äºä½ ï¼ä½ å°±ä¸åæ¥æå®ãåç»­çæ¸çå·¥ä½ç±æè´è´£ï¼ä½ åªéå®éå°ç¦»å¼ã"</strong></p>
</blockquote>
<p>è¿è§£å³äº C++ é¿æä»¥æ¥ç<strong>âåééæ¾â (Double Free)</strong> é®é¢ï¼å ä¸ºåä¸»åæäº <code>nullptr</code>ï¼å®çææå½æ° <code>delete nullptr</code> ä¸ä¼äº§çä»»ä½å¯ä½ç¨ã</p>
<h3 id="28-æ»ç»">2.8. æ»ç»</h3>
<ol>
<li><strong>è£¸æé</strong>ï¼è½å¿«ï¼ä½æ æ³ä¿è¯åå­ä¸å®ä¼éæ¾ï¼å®¹ææ³æ¼ï¼ã</li>
<li><strong>RAII</strong>ï¼éè¿åè£ç±»ä¿è¯äºåå­ä¸å®éæ¾ï¼ä½å¨ C++98 ä¸­ï¼ä¸ºäºä¿è¯å®å¨ï¼é²æ­¢å¤æ¬¡éæ¾ï¼ï¼ä¼ éå¯¹è±¡æ¶å¿é¡»è¿è¡<strong>æ·±æ·è´</strong>ï¼å¯¼è´æ§è½ä½ä¸ã</li>
<li><strong>å³å¼ (Rvalue)</strong>ï¼æé£äºæ²¡æåå­ãå³å°éæ¯çä¸´æ¶å¯¹è±¡ï¼ä¸è½åå°åï¼ã</li>
<li><strong>ç§»å¨è¯­ä¹ (Move)</strong>ï¼æ¯å®ç¾çæä¸­æ¹æ¡ãå®åè®¸ RAII å¯¹è±¡å¨âäº¤æ¥ç­âæ¶ï¼éè¿è¯å«å³å¼ï¼ç´æ¥æåé¨çæéæææ<strong>è½¬ç§»</strong>ç»å¯¹æ¹ï¼æ¢ä¿çäº RAII çå¤å£³ï¼å®å¨ï¼ï¼ååªä¼ éäºæéï¼é«æï¼ã</li>
</ol>
<h2 id="3-æºè½æéä¸-java-gc">3. æºè½æéä¸ Java GC</h2>
<p>å¨åä¸¤ç« èä¸­ï¼æä»¬å·²ç»ææ¡äº <strong>RAIIï¼å©ç¨æ ç®¡çå ï¼</strong> å <strong>ç§»å¨è¯­ä¹ï¼æææè½¬ç§»ï¼</strong>ãå¦æä»ç»è§å¯ï¼ä¼åç°æä»¬æåç <code>EnemyWrapper</code> å¶å®å°±æ¯ä¸ä¸ªç®éçâæºè½æéâã</p>
<p>C++ æ ååºæè¿ç§æ¨¡å¼æ ååäºï¼æä¾äºä¸ä¸ªç°æçå·¥å·ï¼ç»ç§°ä¸º <strong>æºè½æé (Smart Pointers)</strong>ãå®ä»¬å½»åºç»ç»äºæå¨å <code>delete</code> çåå²ã</p>
<h3 id="31-ä»ä¹æ¯æºè½æé">3.1. ä»ä¹æ¯æºè½æéï¼</h3>
<p>æºè½æéä¸æ¯æéï¼å®æ¯ä¸ä¸ª <strong>C++ ç±»ï¼Classï¼</strong>ã</p>
<ul>
<li>å®å¨æ ä¸ï¼åä¸ªæ®éåéï¼ã</li>
<li>å®éé¢èçä¸ä¸ªè£¸æéï¼æåå ï¼ã</li>
<li>å®å©ç¨ RAIIï¼å¨ææå½æ°éèªå¨ <code>delete</code> é£ä¸ªè£¸æéã</li>
<li>å®éè½½äº <code>*</code> å <code>-&gt;</code> è¿ç®ç¬¦ï¼è®©ä½ ç¨èµ·æ¥æè§åä¸ªæéã</li>
</ul>
<p>C++ æä¾äºä¸ç§æºè½æéï¼åå«å¯¹åºä¸ç§<strong>ææææ¨¡å¼</strong>ï¼</p>
<ol>
<li><strong><code>std::unique_ptr</code></strong>ï¼ä½ æ¯æçå¯ä¸ï¼ç¬å æææï¼ã</li>
<li><strong><code>std::shared_ptr</code></strong>ï¼æä»¬å±äº«å®ï¼å±äº«æææï¼ã</li>
<li><strong><code>std::weak_ptr</code></strong>ï¼æå°±ééå°ççä½ ï¼å¼±å¼ç¨ï¼ä¸å¢å è®¡æ°ï¼ã</li>
</ol>
<h3 id="32-stdunique_ptr-ç¬å ">3.2. <code>std::unique_ptr</code> (ç¬å )</h3>
<p>è¿æ¯ C++ ä¸­<strong>ææ¨èãæå¸¸ç¨</strong>çæºè½æéã90% çåºæ¯é½åºè¯¥ç¨å®ã</p>
<h4 id="321-æ ¸å¿ç¹æ§">3.2.1. æ ¸å¿ç¹æ§</h4>
<ul>
<li><strong>ç¬å æ§</strong>ï¼åä¸æ¶é´ï¼åªè½æä¸ä¸ª <code>unique_ptr</code> æåé£ä¸ªå¯¹è±¡ã</li>
<li><strong>ä¸å¯æ·è´</strong>ï¼ä½ ä¸è½å¤å¶å®ï¼å¦åä¼æä¸¤ä¸ªä¸»äººï¼è¿å°±æ¯æä»¬ä¹åæå¨ç¦ç¨çæ·è´æé ï¼ã</li>
<li><strong>å¯ç§»å¨</strong>ï¼ä½ å¯ä»¥ææææç§»äº¤ç»å«äººï¼å©ç¨ç§»å¨è¯­ä¹ï¼ã</li>
<li><strong>é¶å¼é</strong>ï¼å®çæ§è½åè£¸æé<strong>å®å¨ä¸æ ·</strong>ãå®åªæ¯å¤äºä¸å±ç¼è¯æçæ£æ¥ï¼è¿è¡æ¶æ²¡æä»»ä½é¢å¤è´æã</li>
</ul>
<h4 id="322-ä»£ç ç¤ºä¾">3.2.2. ä»£ç ç¤ºä¾</h4>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;memory&gt; // å¿é¡»åå«è¿ä¸ªå¤´æä»¶

// æ¨¡æä¸ä¸ªâæè´µâçèµæº
class Enemy {
public:
    Enemy() { std::cout &lt;&lt; "  [å èµæº] Enemy è¢« new åºæ¥äº (èæ¶æä½...)" &lt;&lt; std::endl; }
    ~Enemy() { std::cout &lt;&lt; "  [å èµæº] Enemy è¢« delete æäº" &lt;&lt; std::endl; }
    void attack() { std::cout &lt;&lt; "Enemy attacks!" &lt;&lt; std::endl; }
};


void uniqueDemo() {
    // 1. åå»º (æ¨èç¨ make_uniqueï¼ä¸è¦ç´æ¥ new)
    std::unique_ptr&lt;Enemy&gt; boss = std::make_unique&lt;Enemy&gt;(); 
    
    boss-&gt;attack(); // ç¨èµ·æ¥åæé
    
    // 2. ç¦æ­¢æ·è´ï¼
    // std::unique_ptr&lt;Enemy&gt; boss2 = boss; // â ç¼è¯æ¥éï¼
    
    // 3. å¯ä»¥ç§»å¨ï¼
    // è¿éç move å°±åæä»¬å¨ Part 2 å­¦çé£æ ·ï¼ææææè½¬ç» p2
    std::unique_ptr&lt;Enemy&gt; boss2 = std::move(boss); 
    
    // æ­¤æ¶ï¼
    // boss åæäº nullptr (ç©º)
    // boss2 æ¥æäºå¯¹è±¡
    
} // å½æ°ç»æ -&gt; boss2 ææ -&gt; èªå¨ delete Enemy

int main() {
    uniqueDemo();
    return 0;
}

</code></pre>
<p>è¿è¡ç»æå¦ä¸ï¼</p>
<pre><code class="language-text">  [å èµæº] Enemy è¢« new åºæ¥äº (èæ¶æä½...)
Enemy attacks!
  [å èµæº] Enemy è¢« delete æäº
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1158182/202602/1158182-20260208224619193-1813415551.jpg" alt="uniq_ptr" loading="lazy"></p>
<h3 id="33-stdshared_ptr-å±äº«">3.3. <code>std::shared_ptr</code> (å±äº«)</h3>
<p>è¿è´§çèµ·æ¥æå Java çå¼ç¨ãå®åè®¸å¤ä¸ªæéæååä¸ä¸ªå¯¹è±¡ã</p>
<h4 id="331-æ ¸å¿ç¹æ§">3.3.1. æ ¸å¿ç¹æ§</h4>
<ul>
<li>
<p><strong>å¼ç¨è®¡æ° (Reference Counting)</strong>ï¼å®åé¨ç»´æ¤ä¸ä¸ªè®¡æ°å¨ã</p>
</li>
<li>
<p>æ¯å¤ä¸ä¸ªäººæåå®ï¼è®¡æ° +1ã</p>
</li>
<li>
<p>æ¯æä¸ä¸ªäººéæ¯æä¸åæåå®ï¼è®¡æ° -1ã</p>
</li>
<li>
<p><strong>å½è®¡æ°åæ 0 æ¶ï¼èªå¨ <code>delete</code> å¯¹è±¡ã</strong></p>
</li>
<li>
<p><strong>æå¼é</strong>ï¼ä¸ºäºç»´æ¤è¿ä¸ªè®¡æ°å¨ï¼èä¸è¦ä¿è¯å¤çº¿ç¨å®å¨ï¼ï¼å®æ¯ <code>unique_ptr</code> æ¢ä¸ç¹ç¹ï¼åå­ä¹å¤ä¸ç¹ï¼å ä¸ºè¦å­è®¡æ°å¨ï¼ã</p>
</li>
</ul>
<h4 id="332-ä»£ç ç¤ºä¾">3.3.2. ä»£ç ç¤ºä¾</h4>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;memory&gt; // å¿é¡»åå«è¿ä¸ªå¤´æä»¶

// æ¨¡æä¸ä¸ªâæè´µâçèµæº
class Enemy {
public:
    Enemy() { std::cout &lt;&lt; "  [å èµæº] Enemy è¢« new åºæ¥äº (èæ¶æä½...)" &lt;&lt; std::endl; }
    ~Enemy() { std::cout &lt;&lt; "  [å èµæº] Enemy è¢« delete æäº" &lt;&lt; std::endl; }
    void attack() { std::cout &lt;&lt; "Enemy attacks!" &lt;&lt; std::endl; }
};


void sharedDemo() {
    // 1. åå»º (å¼ç¨è®¡æ° = 1)
    std::shared_ptr&lt;Enemy&gt; p1 = std::make_shared&lt;Enemy&gt;();
    
    {
        // 2. æ·è´ (å¼ç¨è®¡æ° = 2)
        // æ³¨æï¼è¿éæ¯å¯ä»¥ç´æ¥ "=" èµå¼çï¼å ä¸ºå®æ¯å±äº«ç
        std::shared_ptr&lt;Enemy&gt; p2 = p1; 
        
        p2-&gt;attack();
        std::cout &lt;&lt; "å½åå¼ç¨æ°: " &lt;&lt; p1.use_count() &lt;&lt; std::endl; // è¾åº 2
    } 
    // p2 ç¦»å¼ä½ç¨åï¼å¼ç¨è®¡æ° -1 (åå 1)ãå¯¹è±¡è¿æ´»çï¼
    
    p1-&gt;attack(); 
    
} // å½æ°ç»æï¼p1 ç¦»å¼ï¼å¼ç¨è®¡æ° -1 (åæ 0) -&gt; delete Enemy

int main() {
    sharedDemo();
    return 0;
}
</code></pre>
<p>è¿è¡ç»æå¦ä¸ï¼</p>
<pre><code class="language-text">  [å èµæº] Enemy è¢« new åºæ¥äº (èæ¶æä½...)
Enemy attacks!
å½åå¼ç¨æ°: 2
Enemy attacks!
  [å èµæº] Enemy è¢« delete æäº
</code></pre>
<h3 id="34-c-shared_ptr-vs-java-gc">3.4. C++ shared_ptr vs Java GC</h3>
<p>è¿æ¯é¢è¯åæ¶æè®¾è®¡ä¸­çæ ¸å¿èç¹ãC++ ç <code>shared_ptr</code> å Java çå¼ç¨çèµ·æ¥å¾åï¼ä½åºå±é»è¾å®å¨ä¸åã</p>
<h4 id="341-æºå¶å¯¹æ¯å¼ç¨è®¡æ°-vs-å¯è¾¾æ§åæ">3.4.1. æºå¶å¯¹æ¯ï¼å¼ç¨è®¡æ° vs å¯è¾¾æ§åæ</h4>
<table>
<thead>
<tr>
<th>ç¹æ§</th>
<th><strong>C++ (<code>shared_ptr</code>)</strong></th>
<th><strong>Java (Garbage Collection)</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>æ ¸å¿ç®æ³</strong></td>
<td><strong>å¼ç¨è®¡æ° (Reference Counting)</strong></td>
<td><strong>å¯è¾¾æ§åæ (Tracing / Reachability)</strong></td>
</tr>
<tr>
<td><strong>å¤å®æ­»äº¡</strong></td>
<td>åªè¦è®¡æ°å¨å½é¶ï¼<strong>ç«å»</strong>æ­»äº¡ã</td>
<td>ä» GC Roots (å¦æ åé) åºåï¼<strong>æ¾</strong>ä¸å°çå¯¹è±¡æç®æ­»ã</td>
</tr>
<tr>
<td><strong>éæ¾æ¶æº</strong></td>
<td><strong>ç¡®å®æ§ (Deterministic)</strong>ãæåä¸ä¸ªæééæ¯çé£ä¸ç¬é´ï¼å¯¹è±¡å¿æ­»ã</td>
<td><strong>ä¸ç¡®å®æ§</strong>ãç GC å¿æï¼å¯è½å ç§åï¼å¯è½åå­ä¸å¤æ¶ã</td>
</tr>
<tr>
<td><strong>æ§è½å¼é</strong></td>
<td><strong>å¹³æ</strong>ãæ¯æ¬¡èµå¼é½æå¾®å°çåå­æä½å¼éã</td>
<td><strong>éä¸­</strong>ãå¹³æ¶å¾å¿«ï¼ä½ GC è¿è¡æ¶å¯è½å¯¼è´ "Stop The World" (å¡é¡¿)ã</td>
</tr>
<tr>
<td><strong>å¾ªç¯å¼ç¨</strong></td>
<td><strong>æ æ³å¤ç</strong>ãA æå Bï¼B æå Aï¼ä¸¤äººè®¡æ°é½æ¯ 1ï¼æ°¸è¿ä¸å½é¶ -&gt; <strong>åå­æ³æ¼</strong>ã</td>
<td><strong>å®ç¾å¤ç</strong>ãGC åç°è¿ä¿©è´§è½ç¶äºç¸æï¼ä½å¤é¢æ²¡äººæå®ä»¬ï¼ç´æ¥ä¸éç«¯ã</td>
</tr>
</tbody>
</table>
<h4 id="342-åºæ¯æ¼ç¤ºå¾ªç¯å¼ç¨-c-çé¿åçæ¯ä¹è¸µ">3.4.2. åºæ¯æ¼ç¤ºï¼å¾ªç¯å¼ç¨ (C++ çé¿åçæ¯ä¹è¸µ)</h4>
<p>è¿æ¯ C++ <code>shared_ptr</code> æå¤§çåã</p>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;memory&gt;

// åç½®å£°æï¼å ä¸º A éé¢è¦ç¨ Bï¼B éé¢è¦ç¨ Aï¼å¿é¡»ååè¯ç¼è¯å¨ B æ¯ä¸ªç±»
class B; 

class A {
public:
    // A ææ B çå¼ºå¼ç¨ (shared_ptr)
    std::shared_ptr&lt;B&gt; ptrB; 
    
    A() { std::cout &lt;&lt; "A Created (æé )" &lt;&lt; std::endl; }
    ~A() { std::cout &lt;&lt; "A Destroyed (ææ) &lt;--- å¦æçå°è¿å¥è¯ï¼è¯´ææ²¡æ³é²" &lt;&lt; std::endl; }
};

class B {
public:
    // B ææ A çå¼ºå¼ç¨ (shared_ptr) -&gt; å¯¼è´æ­»é
    std::shared_ptr&lt;A&gt; ptrA; 
    
    B() { std::cout &lt;&lt; "B Created (æé )" &lt;&lt; std::endl; }
    ~B() { std::cout &lt;&lt; "B Destroyed (ææ) &lt;--- å¦æçå°è¿å¥è¯ï¼è¯´ææ²¡æ³é²" &lt;&lt; std::endl; }
};

int main() {
    std::cout &lt;&lt; "=== è¿å¥ä½ç¨å ===" &lt;&lt; std::endl;
    
    {
        // 1. åå»ºå¯¹è±¡
        // æ­¤æ¶ A çè®¡æ° = 1 (åªæåé a æåå®)
        // æ­¤æ¶ B çè®¡æ° = 1 (åªæåé b æåå®)
        std::shared_ptr&lt;A&gt; a = std::make_shared&lt;A&gt;();
        std::shared_ptr&lt;B&gt; b = std::make_shared&lt;B&gt;();

        std::cout &lt;&lt; "1. åå§å¼ç¨è®¡æ°:" &lt;&lt; std::endl;
        std::cout &lt;&lt; "   A counts: " &lt;&lt; a.use_count() &lt;&lt; std::endl;
        std::cout &lt;&lt; "   B counts: " &lt;&lt; b.use_count() &lt;&lt; std::endl;

        // 2. å»ºç«å¾ªç¯å¼ç¨ (äºç¸éæ­»)
        std::cout &lt;&lt; "2. å»ºç«å¾ªç¯å¼ç¨ (a-&gt;ptrB = b; b-&gt;ptrA = a;)" &lt;&lt; std::endl;
        a-&gt;ptrB = b; // B çè®¡æ° +1 -&gt; åæ 2 (b åé + a.ptrB)
        b-&gt;ptrA = a; // A çè®¡æ° +1 -&gt; åæ 2 (a åé + b.ptrA)

        std::cout &lt;&lt; "   A counts: " &lt;&lt; a.use_count() &lt;&lt; std::endl;
        std::cout &lt;&lt; "   B counts: " &lt;&lt; b.use_count() &lt;&lt; std::endl;

        std::cout &lt;&lt; "--- åå¤ç¦»å¼ä½ç¨å ---" &lt;&lt; std::endl;
    } // 3. è¿éï¼ç¦»å¼ä½ç¨åï¼
    
    // æ­£å¸¸é»è¾ï¼
    // - æ åé a éæ¯ -&gt; A è®¡æ°å 1 (2 -&gt; 1) -&gt; ä¸ä¸º 0ï¼A ä¸æ­»ï¼
    // - æ åé b éæ¯ -&gt; B è®¡æ°å 1 (2 -&gt; 1) -&gt; ä¸ä¸º 0ï¼B ä¸æ­»ï¼
    
    // ç»æï¼A æ¿ç Bï¼B æ¿ç Aï¼è°ä¹æä¸å¼æãå åå­æ°¸è¿æ æ³éæ¾ã

    std::cout &lt;&lt; "=== ç¦»å¼ä½ç¨å (main ç»æ) ===" &lt;&lt; std::endl;
    std::cout &lt;&lt; "è­¦åï¼ä½ æ²¡æçå°ææå½æ°çæ¥å¿ï¼è¯´æåçäºåå­æ³æ¼ï¼" &lt;&lt; std::endl;

    return 0;
}

</code></pre>
<p>è¿è¡ç»æå¦ä¸ï¼</p>
<pre><code class="language-text">=== è¿å¥ä½ç¨å ===
A Created (æé )
B Created (æé )
1. åå§å¼ç¨è®¡æ°:
   A counts: 1
   B counts: 1
2. å»ºç«å¾ªç¯å¼ç¨ (a-&gt;ptrB = b; b-&gt;ptrA = a;)
   A counts: 2
   B counts: 2
--- åå¤ç¦»å¼ä½ç¨å ---
=== ç¦»å¼ä½ç¨å (main ç»æ) ===
è­¦åï¼ä½ æ²¡æçå°ææå½æ°çæ¥å¿ï¼è¯´æåçäºåå­æ³æ¼ï¼
</code></pre>
<p><strong>èJava å¯¹æ­¤è¡¨ç¤ºæ¯«æ åå</strong>ï¼Java GC ç±äºæGC Rootï¼ä¼åç° A å B è¿ä¸å¨ä¸è¥¿åå¤çæ­å¼äºèç³»ï¼ç´æ¥æå®ä¿©é½åæ¶äºã</p>
<p><img src="https://img2024.cnblogs.com/blog/1158182/202602/1158182-20260208224713082-1422598190.jpg" alt="shared_ptr" loading="lazy"></p>
<h3 id="35-stdweak_ptr-æç ´å¾ªç¯çææ">3.5. <code>std::weak_ptr</code> (æç ´å¾ªç¯çææ)</h3>
<p>ä¸ºäºè§£å³ä¸é¢çå¾ªç¯å¼ç¨é®é¢ï¼C++ å¼å¥äº <code>weak_ptr</code>ã</p>
<ul>
<li><strong>å¼±å¼ç¨</strong>ï¼å®æå <code>shared_ptr</code> ç®¡ççå¯¹è±¡ï¼ä½æ¯<strong>ä¸å¢å å¼ç¨è®¡æ°</strong>ã</li>
<li><strong>æè§è</strong>ï¼å®åªæ¯ççå¯¹è±¡ï¼ä¸è½ç´æ¥ç¨ãå¦æè¦ç¨ï¼å¿é¡»åâåçº§âä¸º <code>shared_ptr</code>ï¼å¹¶éè¿åçº§ç»æå¤æ­å¯¹è±¡æ¯å¦å·²ç»æ­»äºï¼ã</li>
</ul>
<p><strong>ä¿®å¤ä¸é¢çä»£ç ï¼</strong></p>
<p>æä»¬åªéè¦æ B éé¢çæéæ¹æ <code>weak_ptr</code>ï¼</p>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;memory&gt;

class B; // åç½®å£°æ

class A {
public:
    // A ææ B çãå¼ºå¼ç¨ã(shared_ptr)
    // æå³çï¼åªè¦ A æ´»çï¼B å°±ä¸è½æ­»
    std::shared_ptr&lt;B&gt; ptrB; 
    
    A() { std::cout &lt;&lt; "A Created (æé )" &lt;&lt; std::endl; }
    ~A() { std::cout &lt;&lt; "A Destroyed (ææ)" &lt;&lt; std::endl; }
};

class B {
public:
    // å³é®ä¿®æ¹ï¼B ææ A çãå¼±å¼ç¨ã(weak_ptr)
    // æå³çï¼B åªæ¯çç Aï¼ä½ B ä¸å³å® A ççæ­»ã
    // weak_ptr ä¸ä¼å¢å  shared_ptr çå¼ç¨è®¡æ°ï¼
    std::weak_ptr&lt;A&gt; ptrA; 
    
    B() { std::cout &lt;&lt; "B Created (æé )" &lt;&lt; std::endl; }
    ~B() { std::cout &lt;&lt; "B Destroyed (ææ)" &lt;&lt; std::endl; }
};

int main() {
    std::cout &lt;&lt; "=== è¿å¥ä½ç¨å ===" &lt;&lt; std::endl;
    
    {
        // 1. åå»ºå¯¹è±¡
        std::shared_ptr&lt;A&gt; a = std::make_shared&lt;A&gt;();
        std::shared_ptr&lt;B&gt; b = std::make_shared&lt;B&gt;();

        // 2. å»ºç«å¼ç¨
        std::cout &lt;&lt; "--- å»ºç«è¿æ¥ ---" &lt;&lt; std::endl;
        
        a-&gt;ptrB = b; // A å¼ºå¼ç¨ BãB çè®¡æ° = 2 (mainéçb + AéçptrB)
        b-&gt;ptrA = a; // B å¼±å¼ç¨ AãA çè®¡æ° = 1 (åªæmainéça) !!!
        
        std::cout &lt;&lt; "å½åå¼ç¨è®¡æ° (å³é®ç¹):" &lt;&lt; std::endl;
        // A çè®¡æ°åªæ 1ï¼å ä¸º weak_ptr ä¸ç®æ°
        std::cout &lt;&lt; "   A counts: " &lt;&lt; a.use_count() &lt;&lt; " (åªæ main ææå®)" &lt;&lt; std::endl; 
        // B çè®¡æ°æ¯ 2ï¼å ä¸º A å¼ºå¼ç¨çå®
        std::cout &lt;&lt; "   B counts: " &lt;&lt; b.use_count() &lt;&lt; " (main å A é½ææå®)" &lt;&lt; std::endl;

        std::cout &lt;&lt; "--- åå¤ç¦»å¼ä½ç¨å ---" &lt;&lt; std::endl;
    } 
    // 3. ç¦»å¼ä½ç¨åçè¿ç¨ï¼
    // Step 1: åé 'a' éæ¯ã
    //    A çå¼ç¨è®¡æ°ä» 1 åæ 0ã
    //    -&gt; A æ­»äºï¼æå° "A Destroyed"ã
    //    -&gt; A æææ¶ï¼ä¼èªå¨éæ¯å®çæå ptrBã
    
    // Step 2: A çæå ptrB è¢«éæ¯ã
    //    B çå¼ç¨è®¡æ°ä» 2 åä¸º 1ã
    
    // Step 3: åé 'b' éæ¯ã
    //    B çå¼ç¨è®¡æ°ä» 1 åæ 0ã
    //    -&gt; B æ­»äºï¼æå° "B Destroyed"ã

    std::cout &lt;&lt; "=== ç¦»å¼ä½ç¨å (main ç»æ) ===" &lt;&lt; std::endl;
    
    return 0;
}

</code></pre>
<p>è¿è¡ç»æå¦ä¸ï¼å¯ä»¥çå°æ¸æ°çæææ¥å¿ï¼è¯ææ²¡æåå­æ³æ¼ï¼ï¼ï¼</p>
<pre><code class="language-text">=== è¿å¥ä½ç¨å ===
A Created (æé )
B Created (æé )
--- å»ºç«è¿æ¥ ---
å½åå¼ç¨è®¡æ° (å³é®ç¹):
   A counts: 1 (åªæ main ææå®)
   B counts: 2 (main å A é½ææå®)
--- åå¤ç¦»å¼ä½ç¨å ---
A Destroyed (ææ)
B Destroyed (ææ)
=== ç¦»å¼ä½ç¨å (main ç»æ) ===
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1158182/202602/1158182-20260208224729997-336213178.jpg" alt="weak_ptr" loading="lazy"></p>
<h3 id="36-æ»ç»ä¸æä½³å®è·µ">3.6. æ»ç»ä¸æä½³å®è·µ</h3>
<h4 id="361-å¯¹æ¯æ»ç»">3.6.1. å¯¹æ¯æ»ç»</h4>
<ol>
<li><strong>C++ RAII / æºè½æé</strong>ï¼</li>
</ol>
<ul>
<li><strong>ä¼ç¹</strong>ï¼<strong>å³æ¶éæ¾</strong>ï¼ä¸ç¨ç­ GCï¼ï¼<strong>èµæºå©ç¨çæé«</strong>ï¼<strong>æ  STW å¡é¡¿</strong>ãéå¸¸éååå®æ¶ç³»ç»ãæ¸¸æå¼æãé«é¢äº¤æã</li>
<li><strong>ç¼ºç¹</strong>ï¼ææç»´è´æï¼éè¦æå¨å¤çå¾ªç¯å¼ç¨ï¼<code>weak_ptr</code>ï¼ã</li>
</ul>
<ol start="2">
<li><strong>Java GC</strong>ï¼</li>
</ol>
<ul>
<li><strong>ä¼ç¹</strong>ï¼<strong>å¼åæçé«</strong>ï¼ä¸ç¨å³å¿å¾ªç¯å¼ç¨ï¼åªè¦ä¸çæå¾é¾åå­æ³æ¼ã</li>
<li><strong>ç¼ºç¹</strong>ï¼éæ¾æ¶æºä¸å¯æ§ï¼GC è¿è¡æ¶ææ§è½æ³¢å¨ï¼åå­å ç¨éå¸¸æ¯ C++ é«ã</li>
</ul>
<blockquote>
<p><strong>å³äºå¼éççç¸</strong>ï¼<br>
å¾å¤äººè®¤ä¸º C++ ä¸å®æ¯ Java å¿«ï¼ä½å¨åå­åéä¸ï¼Java å¶å®å¾å¾æ´å¿«ãJava ç <code>new</code> åªæ¯æéåç§»ï¼Pointer Bumpï¼ï¼æå¶å»ä»·ï¼è C++ ç <code>malloc/new</code> éè¦å»ç©ºé²é¾è¡¨ä¸­å¯»æ¾åéçåå­åã<br>
C++ çä¼å¿å¨äº<strong>è¿è¡æ¶æçå¹³ç¨³</strong>ï¼å®æ²¡æ GC é£ä¸ªä¸å®æ¶è§¦åçâå¤§æ«é¤âï¼å æ­¤éå¸¸éåå¯¹<strong>å»¶è¿ (Latency)</strong> æåº¦ææçåºæ¯ï¼å¦é«é¢äº¤æãæ¸¸æå¼æãå®æ¶æ§å¶ç³»ç»ï¼ï¼è Java æ´éåè¿½æ±<strong>ååé (Throughput)</strong> çåç«¯æå¡ã</p>
</blockquote>
<h4 id="362-c-é¿åæå">3.6.2. C++ é¿åæå</h4>
<ol>
<li>**é»è®¤é¦é <code>std::unique_ptr**</code>ãé¤éä½ ççéè¦å¤ä¸ªäººå±äº«æææï¼å¦åå«ç¨ <code>shared_ptr</code>ã</li>
<li>**ç»ä¸ä½¿ç¨ <code>new**</code>ã</li>
</ol>
<ul>
<li>ç¨ <code>std::make_unique&lt;T&gt;()</code> ä»£æ¿ <code>new T()</code>ã</li>
<li>ç¨ <code>std::make_shared&lt;T&gt;()</code> ä»£æ¿ <code>new T()</code>ã</li>
<li>è¿ä¸ä»ä»£ç ç­ï¼èä¸è½é²æ­¢æäºæç«¯æåµä¸çåå­æ³æ¼ã</li>
</ul>
<ol start="3">
<li><strong>éå°å¾ªç¯å¼ç¨</strong>ï¼ç«å»æ³å°æå¶ä¸­ä¸è¾¹æ¢æ <code>std::weak_ptr</code>ã</li>
</ol>
<p>ç°å¨ï¼æä»¬å·²ç»ææ¡äº C++ åå­ç®¡ççæ ¸å¿ï¼<strong>å¯¹è±¡é»è®¤å¨æ ä¸ï¼å å¯¹è±¡ç¨ unique_ptr ç®¡ï¼å±äº«å¯¹è±¡ç¨ shared_ptr ç®¡ï¼å¾ªç¯å¼ç¨ç¨ weak_ptr ç ´ã</strong></p>
<h2 id="4-ç»è¯­">4. ç»è¯­</h2>
<p>ä» Java çâå¨èªå¨é©¾é©¶âåæ¢å° C++ çâæå¨æ¡âï¼æå¤§çææå¾å¾ä¸å¨äºè¯­æ³ï¼èå¨äºæç»´æ¨¡å¼çè½¬åã</p>
<p>C++ å°åå­çæ§å¶æå®å¨äº¤è¿ç»äºç¨åºåï¼è¿æ¢æ¯ç»å¯¹çèªç±ï¼ä¹æ¯æ²éçè´£ä»»ãéè¿æ¬æï¼æä»¬çå° RAII èµäºäºæä»¬ç¡®å®æ§çèµæºéæ¾è½åï¼èç§»å¨è¯­ä¹åæºè½æéåå¨âæè´æ§è½âä¸âåå­å®å¨âä¹é´æ¶èµ·äºæ¡¥æ¢ã</p>
<p>è®°ä½ C++ ç°ä»£å¼åçé»éæ³åï¼<strong>é»è®¤ä½¿ç¨æ å¯¹è±¡ï¼å åå­é¦é <code>unique_ptr</code>ï¼å±äº«èµæºç¨ <code>shared_ptr</code>ï¼å¾ªç¯å¼ç¨é  <code>weak_ptr</code> æç ´ã</strong> ææ¡äºè¿äºï¼æä»¬å°±çæ­£é©¾é©­äºè¿é¨è¯­è¨æéå©çåååã</p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-08 22:52">2026-02-08 22:51</span>&nbsp;
<a href="https://www.cnblogs.com/kaiux">å¿µé£é¶å£¹</a>&nbsp;
éè¯»(<span id="post_view_count">3</span>)&nbsp;
è¯è®º(<span id="post_comment_count">1</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19592912);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19592912', targetLink: 'https://www.cnblogs.com/kaiux/p/19592912', title: 'C++ åå­é¿åæåï¼å¦ä½ç¨ç§»å¨è¯­ä¹åæºè½æéè§£å³âæ·±æ·è´âä¸âåå­æ³æ¼â' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
        </channel>
        </rss>