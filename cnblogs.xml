<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åšå®¢å›­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2025-12-23T01:15:30.477Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åšå®¢å›­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ ä½¿ç”¨ Laravel Workflow ä½œä¸º MCP å·¥å…·æä¾›ç»™ AI å®¢æˆ·ç«¯ ]]></title>
    <link>https://www.cnblogs.com/catchadmin/p/19385107</link>
    <guid>28945f23c704de77cbafd9799a65f3df</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/catchadmin/p/19385107" title="å‘å¸ƒäº 2025-12-23 09:03">
    <span role="heading" aria-level="2">ä½¿ç”¨ Laravel Workflow ä½œä¸º MCP å·¥å…·æä¾›ç»™ AI å®¢æˆ·ç«¯</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="ä½¿ç”¨-laravel-workflow-ä½œä¸º-mcp-å·¥å…·æä¾›ç»™-ai-å®¢æˆ·ç«¯">ä½¿ç”¨ Laravel Workflow ä½œä¸º MCP å·¥å…·æä¾›ç»™ AI å®¢æˆ·ç«¯</h1>
<p><code>Model Context Protocol</code> (MCP) æ­£åœ¨è¿…é€Ÿæˆä¸º AI åŠ©æ‰‹(å¦‚ Claudeã€ChatGPT å’Œ GitHub Copilot)ä¸å¤–éƒ¨å·¥å…·å’ŒæœåŠ¡äº¤äº’çš„æ ‡å‡†æ–¹å¼ã€‚é€šè¿‡ Laravel MCP,ä½ å¯ä»¥å°† Laravel Workflow æµç¨‹æš´éœ²ä¸ºå¯è°ƒç”¨çš„å·¥å…·,ä»»ä½•å…¼å®¹ MCP çš„ AI å®¢æˆ·ç«¯éƒ½å¯ä»¥å‘ç°ã€è°ƒç”¨å’Œç›‘æ§è¿™äº›å·¥å…·ã€‚</p>
<p>åœ¨æœ¬æ–‡ä¸­,æˆ‘ä»¬å°†å±•ç¤ºå¦‚ä½•æ„å»ºä¸€ä¸ª MCP æœåŠ¡å™¨,ä½¿ AI å®¢æˆ·ç«¯èƒ½å¤Ÿ:</p>
<ul>
<li>å‘ç°å¯ç”¨çš„å·¥ä½œæµ</li>
<li>å¼‚æ­¥å¯åŠ¨å·¥ä½œæµ</li>
<li>è½®è¯¢çŠ¶æ€å¹¶æ£€ç´¢ç»“æœ</li>
</ul>
<p>è¿™åˆ›å»ºäº†ä¸€ä¸ªå¼ºå¤§çš„æ¨¡å¼,AI ä»£ç†å¯ä»¥ç¼–æ’é•¿æ—¶é—´è¿è¡Œçš„æŒä¹…åŒ–å·¥ä½œæµ,éå¸¸é€‚åˆæ— æ³•åœ¨å•ä¸ªè¯·æ±‚ä¸­å®Œæˆçš„å¤æ‚ä»»åŠ¡ã€‚</p>
<p><a href="https://catchadmin.com/post/2025-12/laravel-workflows-mcp-tools-ai-clients" target="_blank" rel="noopener nofollow">åŸæ–‡é“¾æ¥ ä½¿ç”¨ Laravel Workflow ä½œä¸º MCP å·¥å…·æä¾›ç»™ AI å®¢æˆ·ç«¯</a></p>
<h2 id="ä¸ºä»€ä¹ˆé€‰æ‹©-mcp--laravel-workflow">ä¸ºä»€ä¹ˆé€‰æ‹© MCP + Laravel Workflow?</h2>
<p>Laravel Workflow æ“…é•¿æŒä¹…åŒ–ã€æœ‰çŠ¶æ€çš„æ‰§è¡Œã€‚MCP æ“…é•¿ä¸º AI å®¢æˆ·ç«¯æä¾›å¯¹å¤–éƒ¨èƒ½åŠ›çš„ç»“æ„åŒ–è®¿é—®ã€‚ä¸¤è€…ç»“åˆå¯ä»¥å®ç°:</p>
<ul>
<li><strong>å¼‚æ­¥ AI æ“ä½œ</strong>:å¯åŠ¨å·¥ä½œæµ,ç»§ç»­å¯¹è¯,ç¨åæ£€æŸ¥ç»“æœ</li>
<li><strong>å¯é æ‰§è¡Œ</strong>:å·¥ä½œæµå¯ä»¥åœ¨å´©æºƒã€é‡è¯•å’Œé•¿æ—¶é—´ç­‰å¾…ä¸­å­˜æ´»</li>
<li><strong>å¯è§‚å¯Ÿæ€§</strong>:é€šè¿‡ Waterline çš„ä»ªè¡¨æ¿è·Ÿè¸ªæ¯ä¸ªå·¥ä½œæµ</li>
<li><strong>æ— çŠ¶æ€æœåŠ¡å™¨</strong>:MCP æœåŠ¡å™¨ä¸ä¿å­˜çŠ¶æ€ã€‚å®¢æˆ·ç«¯è·Ÿè¸ªå·¥ä½œæµ ID</li>
</ul>
<p>è¿™ç±»ä¼¼äºäººç±»å§”æ´¾ä»»åŠ¡çš„æ–¹å¼:"å¼€å§‹è¿™ä¸ªæŠ¥å‘Š,æˆ‘ç¨åå†æ£€æŸ¥ã€‚"</p>
<h2 id="æˆ‘ä»¬è¦æ„å»ºä»€ä¹ˆ">æˆ‘ä»¬è¦æ„å»ºä»€ä¹ˆ</h2>
<p>æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªåŒ…å«ä¸‰ä¸ªå·¥å…·çš„ MCP æœåŠ¡å™¨:</p>
<table>
<thead>
<tr>
<th>å·¥å…·</th>
<th>ç”¨é€”</th>
</tr>
</thead>
<tbody>
<tr>
<td>list_workflows</td>
<td>å‘ç°å¯ç”¨çš„å·¥ä½œæµå¹¶æŸ¥çœ‹æœ€è¿‘çš„è¿è¡Œè®°å½•</td>
</tr>
<tr>
<td>start_workflow</td>
<td>å¯åŠ¨å·¥ä½œæµå¹¶è·å–è·Ÿè¸ª ID</td>
</tr>
<tr>
<td>get_workflow_result</td>
<td>æ£€æŸ¥çŠ¶æ€å¹¶åœ¨å®Œæˆæ—¶æ£€ç´¢è¾“å‡º</td>
</tr>
</tbody>
</table>
<h2 id="åˆ†æ­¥å®ç°">åˆ†æ­¥å®ç°</h2>
<h3 id="å®‰è£…-laravel-mcp">å®‰è£… Laravel MCP</h3>
<pre><code class="language-bash">composer require laravel/mcp
php artisan vendor:publish --tag=ai-routes
</code></pre>
<p>è¿™ä¼šä¸ºä½ æä¾› <code>routes/ai.php</code>,ä½ å°†åœ¨å…¶ä¸­æ³¨å†Œ MCP æœåŠ¡å™¨ã€‚</p>
<h3 id="åˆ›å»º-mcp-æœåŠ¡å™¨">åˆ›å»º MCP æœåŠ¡å™¨</h3>
<pre><code class="language-bash">php artisan make:mcp-server WorkflowServer
</code></pre>
<p>ä¸º AI é…ç½®è¯´æ˜:</p>
<pre><code class="language-php">namespace App\Mcp\Servers;

use App\Mcp\Tools\GetWorkflowResultTool;
use App\Mcp\Tools\ListWorkflowsTool;
use App\Mcp\Tools\StartWorkflowTool;
use Laravel\Mcp\Server;

class WorkflowServer extends Server
{
    protected string $name = 'Laravel Workflow Server';
    protected string $version = '1.0.0';

    protected string $instructions = &lt;&lt;&lt;'MARKDOWN'
        This server allows you to start and monitor Laravel Workflows.

        ## Typical Usage Pattern

        1. Call `list_workflows` to see what workflows are available.
        2. Call `start_workflow` with the workflow name and arguments.
        3. Store the returned `workflow_id`.
        4. Call `get_workflow_result` until status is `WorkflowCompletedStatus`.
        5. Read the `output` field for the result.

        ## Status Values

        - `WorkflowCreatedStatus` - Workflow has been created
        - `WorkflowPendingStatus` - Queued for execution
        - `WorkflowRunningStatus` - Currently executing
        - `WorkflowWaitingStatus` - Waiting (timer, signal, etc.)
        - `WorkflowCompletedStatus` - Finished successfully
        - `WorkflowFailedStatus` - Encountered an error
    MARKDOWN;

    protected array $tools = [
        ListWorkflowsTool::class,
        StartWorkflowTool::class,
        GetWorkflowResultTool::class,
    ];
}
</code></pre>
<h3 id="åˆ›å»ºå¯åŠ¨å·¥ä½œæµå·¥å…·">åˆ›å»ºå¯åŠ¨å·¥ä½œæµå·¥å…·</h3>
<pre><code class="language-bash">php artisan make:mcp-tool StartWorkflowTool
</code></pre>
<pre><code class="language-php">namespace App\Mcp\Tools;

use Illuminate\Contracts\JsonSchema\JsonSchema;
use Illuminate\Support\Arr;
use Laravel\Mcp\Request;
use Laravel\Mcp\Response;
use Laravel\Mcp\Server\Tool;
use Workflow\Workflow;
use Workflow\WorkflowStub;

class StartWorkflowTool extends Tool
{
    protected string $description = &lt;&lt;&lt;'MARKDOWN'
        Start a Laravel Workflow asynchronously and return its workflow ID.
        
        The workflow will execute in the background on the queue. Use the
        `get_workflow_result` tool to poll for status and retrieve results
        once the workflow completes.
    MARKDOWN;

    public function handle(Request $request): Response
    {
        $data = $request-&gt;validate([
            'workflow' =&gt; ['required', 'string'],
            'args' =&gt; ['nullable', 'array'],
            'external_id' =&gt; ['nullable', 'string', 'max:255'],
        ]);

        $workflowKey = $data['workflow'];
        $args = Arr::get($data, 'args', []);
        $externalId = $data['external_id'] ?? null;

        $workflowClass = $this-&gt;resolveWorkflowClass($workflowKey);

        if ($workflowClass === null) {
            return Response::error("Unknown workflow: {$workflowKey}");
        }

        if (! class_exists($workflowClass) || ! is_subclass_of($workflowClass, Workflow::class)) {
            return Response::error("Invalid workflow class: {$workflowClass}");
        }

        $stub = WorkflowStub::make($workflowClass);
        $stub-&gt;start(...array_values($args));

        $status = $stub-&gt;status();
        $statusName = is_object($status) ? class_basename($status) : class_basename((string) $status);

        return Response::json([
            'workflow_id' =&gt; $stub-&gt;id(),
            'workflow' =&gt; $workflowKey,
            'status' =&gt; $statusName,
            'external_id' =&gt; $externalId,
            'message' =&gt; 'Workflow started. Use get_workflow_result to poll status.',
        ]);
    }

    protected function resolveWorkflowClass(string $key): ?string
    {
        $mapped = config("workflow_mcp.workflows.{$key}");
        if ($mapped !== null) {
            return $mapped;
        }

        if (config('workflow_mcp.allow_fqcn', false) &amp;&amp; str_contains($key, '\\')) {
            return $key;
        }

        return null;
    }

    public function schema(JsonSchema $schema): array
    {
        $workflows = implode(', ', array_keys(config('workflow_mcp.workflows', [])));

        return [
            'workflow' =&gt; $schema-&gt;string()
                -&gt;description("The workflow to start. Available: {$workflows}"),
            'args' =&gt; $schema-&gt;object()
                -&gt;description('Arguments for the workflow execute() method.'),
            'external_id' =&gt; $schema-&gt;string()
                -&gt;description('Optional idempotency key for tracking.'),
        ];
    }
}
</code></pre>
<h3 id="åˆ›å»ºè·å–ç»“æœå·¥å…·">åˆ›å»ºè·å–ç»“æœå·¥å…·</h3>
<pre><code class="language-bash">php artisan make:mcp-tool GetWorkflowResultTool
</code></pre>
<pre><code class="language-php">namespace App\Mcp\Tools;

use App\Models\StoredWorkflow;
use Illuminate\Contracts\JsonSchema\JsonSchema;
use Laravel\Mcp\Request;
use Laravel\Mcp\Response;
use Laravel\Mcp\Server\Tool;
use Workflow\States\WorkflowCompletedStatus;
use Workflow\States\WorkflowFailedStatus;
use Workflow\WorkflowStub;

class GetWorkflowResultTool extends Tool
{
    protected string $description = &lt;&lt;&lt;'MARKDOWN'
        Fetch the status and, if completed, the output of a Laravel Workflow.
        
        Use the workflow_id returned by `start_workflow` to check progress.
        Once status is `WorkflowCompletedStatus`, the output field contains the result.
    MARKDOWN;

    public function handle(Request $request): Response
    {
        $data = $request-&gt;validate([
            'workflow_id' =&gt; ['required'],
        ]);

        $workflowId = $data['workflow_id'];
        $stored = StoredWorkflow::find($workflowId);

        if (! $stored) {
            return Response::json([
                'found' =&gt; false,
                'message' =&gt; "Workflow {$workflowId} not found.",
            ]);
        }

        $workflow = WorkflowStub::load($workflowId);
        $status = $workflow-&gt;status();
        $statusName = is_object($status) ? class_basename($status) : class_basename((string) $status);
        $running = $workflow-&gt;running();

        $result = null;
        $error = null;

        if (! $running &amp;&amp; str_contains($statusName, 'Completed')) {
            $result = $workflow-&gt;output();
        }

        if (! $running &amp;&amp; str_contains($statusName, 'Failed')) {
            $exception = $stored-&gt;exceptions()-&gt;latest()-&gt;first();
            $error = $exception?-&gt;exception ?? 'Unknown error';
        }

        return Response::json([
            'found' =&gt; true,
            'workflow_id' =&gt; $workflowId,
            'status' =&gt; $statusName,
            'running' =&gt; $running,
            'output' =&gt; $result,
            'error' =&gt; $error,
            'created_at' =&gt; $stored-&gt;created_at?-&gt;toIso8601String(),
            'updated_at' =&gt; $stored-&gt;updated_at?-&gt;toIso8601String(),
        ]);
    }

    public function schema(JsonSchema $schema): array
    {
        return [
            'workflow_id' =&gt; $schema-&gt;string()
                -&gt;description('The workflow ID returned by start_workflow.'),
        ];
    }
}
</code></pre>
<h3 id="åˆ›å»ºåˆ—è¡¨å·¥ä½œæµå·¥å…·">åˆ›å»ºåˆ—è¡¨å·¥ä½œæµå·¥å…·</h3>
<pre><code class="language-bash">php artisan make:mcp-tool ListWorkflowsTool
</code></pre>
<pre><code class="language-php">namespace App\Mcp\Tools;

use App\Models\StoredWorkflow;
use Illuminate\Contracts\JsonSchema\JsonSchema;
use Laravel\Mcp\Request;
use Laravel\Mcp\Response;
use Laravel\Mcp\Server\Tool;

class ListWorkflowsTool extends Tool
{
    protected string $description = &lt;&lt;&lt;'MARKDOWN'
        List available workflow types and optionally show recent workflow runs.
        
        Use this to discover what workflows can be started, or to see
        the status of recent executions.
    MARKDOWN;

    public function handle(Request $request): Response
    {
        $data = $request-&gt;validate([
            'show_recent' =&gt; ['nullable', 'boolean'],
            'limit' =&gt; ['nullable', 'integer', 'min:1', 'max:50'],
            'status' =&gt; ['nullable', 'string'],
        ]);

        $showRecent = $data['show_recent'] ?? false;
        $limit = $data['limit'] ?? 10;
        $statusFilter = $data['status'] ?? null;

        $availableWorkflows = [];
        foreach (config('workflow_mcp.workflows', []) as $key =&gt; $class) {
            $availableWorkflows[] = ['key' =&gt; $key, 'class' =&gt; $class];
        }

        $response = [
            'available_workflows' =&gt; $availableWorkflows,
        ];

        if ($showRecent) {
            $query = StoredWorkflow::query()
                -&gt;orderBy('created_at', 'desc')
                -&gt;limit($limit);

            if ($statusFilter) {
                $query-&gt;where('status', 'like', "%{$statusFilter}%");
            }

            $response['recent_workflows'] = $query-&gt;get()-&gt;map(function ($w) {
                $status = $w-&gt;status;
                $statusName = is_object($status) ? class_basename($status) : class_basename((string) $status);

                return [
                    'id' =&gt; $w-&gt;id,
                    'class' =&gt; $w-&gt;class,
                    'status' =&gt; $statusName,
                    'created_at' =&gt; $w-&gt;created_at?-&gt;toIso8601String(),
                ];
            });
        }

        return Response::json($response);
    }

    public function schema(JsonSchema $schema): array
    {
        return [
            'show_recent' =&gt; $schema-&gt;boolean()
                -&gt;description('Include recent workflow runs in response.'),
            'limit' =&gt; $schema-&gt;integer()
                -&gt;description('Max recent workflows to return (default: 10).'),
            'status' =&gt; $schema-&gt;string()
                -&gt;description('Filter by status (e.g., "Completed", "Failed").'),
        ];
    }
}
</code></pre>
<h3 id="é…ç½®å¯ç”¨çš„å·¥ä½œæµ">é…ç½®å¯ç”¨çš„å·¥ä½œæµ</h3>
<p>åˆ›å»º <code>config/workflow_mcp.php</code> æ¥å°† AI å®¢æˆ·ç«¯å¯ä»¥å¯åŠ¨çš„å·¥ä½œæµåŠ å…¥ç™½åå•:</p>
<pre><code class="language-php">return [
    'allow_fqcn' =&gt; env('WORKFLOW_MCP_ALLOW_FQCN', false),

    'workflows' =&gt; [
        'simple' =&gt; App\Workflows\Simple\SimpleWorkflow::class,
        'prism' =&gt; App\Workflows\Prism\PrismWorkflow::class,
    ],
];
</code></pre>
<p>è¿™å¯ä»¥é˜²æ­¢ä»»æ„ç±»æ‰§è¡Œã€‚åªæœ‰æ˜ å°„çš„å·¥ä½œæµå¯ä»¥è®¿é—®ã€‚</p>
<h3 id="æ³¨å†Œ-mcp-æœåŠ¡å™¨">æ³¨å†Œ MCP æœåŠ¡å™¨</h3>
<p>æ›´æ–° <code>routes/ai.php</code>:</p>
<pre><code class="language-php">use App\Mcp\Servers\WorkflowServer;
use Laravel\Mcp\Facades\Mcp;

Mcp::web('/mcp/workflows', WorkflowServer::class);
</code></pre>
<h2 id="è¿æ¥-ai-å®¢æˆ·ç«¯">è¿æ¥ AI å®¢æˆ·ç«¯</h2>
<h3 id="vs-code--github-copilot">VS Code / GitHub Copilot</h3>
<p>åœ¨é¡¹ç›®ä¸­åˆ›å»º <code>.vscode/mcp.json</code>:</p>
<pre><code class="language-json">{
  "servers": {
    "laravel-workflow": {
      "type": "http",
      "url": "http://localhost/mcp/workflows"
    }
  }
}
</code></pre>
<p>æ­¤é…ç½®é€‚ç”¨äºæœ¬åœ°å¼€å‘å’Œ GitHub Codespacesã€‚åœ¨ Codespaces ä¸­,VS Code æœåŠ¡å™¨åœ¨å®¹å™¨å†…è¿è¡Œ,å› æ­¤ localhost å¯ä»¥æ­£ç¡®è®¿é—® Laravel æœåŠ¡å™¨,æ— éœ€å…¬å…±ç«¯å£æˆ– <code>*.app.github.dev</code> URLã€‚</p>
<p>é‡æ–°åŠ è½½ VS Code(Cmd/Ctrl+Shift+P â†’ "Developer: Reload Window")å,Copilot å¯ä»¥ç›´æ¥åœ¨èŠå¤©ä¸­ä½¿ç”¨å·¥ä½œæµå·¥å…·ã€‚</p>
<h2 id="å®é™…ä½¿ç”¨">å®é™…ä½¿ç”¨</h2>
<p>è¿æ¥å,ä½ å¯ä»¥ä¸ AI åŠ©æ‰‹è¿›è¡Œè‡ªç„¶å¯¹è¯:</p>
<p><strong>ä½ </strong>:"æœ‰å“ªäº›å·¥ä½œæµå¯ç”¨?"</p>
<p><strong>AI</strong>:è°ƒç”¨ <code>list_workflows</code> "æˆ‘æ‰¾åˆ°äº† 2 ä¸ªå·¥ä½œæµ:simple å’Œ prismã€‚"</p>
<p><strong>ä½ </strong>:"å¯åŠ¨ prism å·¥ä½œæµ"</p>
<p><strong>AI</strong>:è°ƒç”¨ <code>start_workflow</code> "å·²å¯åŠ¨å·¥ä½œæµ ID 42ã€‚æˆ‘ä¼šæ£€æŸ¥å®ƒçš„çŠ¶æ€ã€‚"</p>
<p><strong>AI</strong>:è°ƒç”¨ <code>get_workflow_result</code> "å·¥ä½œæµå·²å®Œæˆ!è¿™æ˜¯ç”Ÿæˆçš„ç”¨æˆ·é…ç½®æ–‡ä»¶:{ name: 'Elena', hobbies: [...] }"</p>
<p>è¿™åˆ›é€ äº†ä¸€ç§æ— ç¼ä½“éªŒ,AI åŠ©æ‰‹å¯ä»¥ç¼–æ’å¤æ‚çš„é•¿æ—¶é—´è¿è¡Œçš„æ“ä½œ,åŒæ—¶è®©ç”¨æˆ·äº†è§£æƒ…å†µã€‚</p>
<h2 id="è¿™ç§æ¨¡å¼çš„å¼ºå¤§ä¹‹å¤„">è¿™ç§æ¨¡å¼çš„å¼ºå¤§ä¹‹å¤„</h2>
<ul>
<li><strong>æŒä¹…åŒ–</strong>:å·¥ä½œæµå¯ä»¥åœ¨æœåŠ¡å™¨é‡å¯å’Œç½‘ç»œæ•…éšœä¸­å­˜æ´»</li>
<li><strong>å¼‚æ­¥è®¾è®¡</strong>:AI å®¢æˆ·ç«¯ä¸ä¼šé˜»å¡ç­‰å¾…å®Œæˆ</li>
<li><strong>å¯è§‚å¯Ÿ</strong>:æ¯ä¸ªå·¥ä½œæµéƒ½åœ¨ Waterline çš„ä»ªè¡¨æ¿ä¸­è·Ÿè¸ª</li>
<li><strong>å®‰å…¨</strong>:åŸºäºç™½åå•çš„å·¥ä½œæµè®¿é—®é˜²æ­¢ä»»æ„æ‰§è¡Œ</li>
<li><strong>æ— çŠ¶æ€ MCP</strong>:æœåŠ¡å™¨ä¸ä¿å­˜çŠ¶æ€ã€‚å®¢æˆ·ç«¯è·Ÿè¸ªå·¥ä½œæµ ID</li>
</ul>
<h2 id="åœ¨æµè§ˆå™¨ä¸­ç«‹å³è¯•ç”¨">åœ¨æµè§ˆå™¨ä¸­ç«‹å³è¯•ç”¨</h2>
<p>æ­¤ MCP é›†æˆå·²åŒ…å«å¹¶é¢„é…ç½®åœ¨ Laravel Workflow Sample App ä¸­ã€‚</p>
<p>è¦è¯•ç”¨:</p>
<ol>
<li>åœ¨ GitHub ä¸Šæ‰“å¼€ sample-app ä»“åº“</li>
<li>ç‚¹å‡» Code â†’ Codespaces â†’ Create codespace on main</li>
<li>ç­‰å¾…ç¯å¢ƒæ„å»º</li>
<li>è®¾ç½®åº”ç”¨å¹¶å¯åŠ¨é˜Ÿåˆ—å·¥ä½œå™¨:</li>
</ol>
<pre><code class="language-bash">php artisan app:init
php artisan queue:work
</code></pre>
<ol start="5">
<li>å¯ç”¨ Laravel Workflow Server MCP å·¥å…·</li>
<li>è®©ä½ çš„ AI åˆ—å‡ºå¹¶è¿è¡Œå·¥ä½œæµ!</li>
</ol>
<h2 id="æ¥ä¸‹æ¥å¯ä»¥åšä»€ä¹ˆ">æ¥ä¸‹æ¥å¯ä»¥åšä»€ä¹ˆ</h2>
<p>ä½ å¯ä»¥æ‰©å±•æ­¤æ¨¡å¼ä»¥å®ç°:</p>
<ul>
<li><strong>å‚æ•°åŒ–å·¥ä½œæµ</strong>:å°†ç”¨æˆ·è¾“å…¥ä¼ é€’ç»™å·¥ä½œæµå‚æ•°</li>
<li><strong>Webhook é€šçŸ¥</strong>:æ¨é€å®Œæˆäº‹ä»¶è€Œä¸æ˜¯è½®è¯¢</li>
<li><strong>å·¥ä½œæµä¿¡å·</strong>:è®© AI å®¢æˆ·ç«¯å‘ç­‰å¾…çš„å·¥ä½œæµå‘é€ä¿¡å·</li>
<li><strong>è¿›åº¦æµå¼ä¼ è¾“</strong>:ä½¿ç”¨ SSE å®æ—¶æµå¼ä¼ è¾“å·¥ä½œæµè¿›åº¦</li>
<li><strong>å¤šæ­¥éª¤ä»£ç†</strong>:åœ¨å¯¹è¯ä¸­å°†å¤šä¸ªå·¥ä½œæµé“¾æ¥åœ¨ä¸€èµ·</li>
</ul>
<p>Laravel Workflow çš„æŒä¹…åŒ–æ‰§è¡Œä¸ MCP çš„å·¥å…·åè®®ç›¸ç»“åˆ,ä¸ºçœŸæ­£æœ‰èƒ½åŠ›çš„ AI ä»£ç†åˆ›å»ºäº†ä¸€ä¸ªåŸºç¡€,è¿™äº›ä»£ç†å¯ä»¥å¤„ç†ç°å®ä¸–ç•Œçš„å¤æ‚æ€§ã€‚</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-23 09:03">2025-12-23 09:03</span>&nbsp;
<a href="https://www.cnblogs.com/catchadmin">JaguarJack</a>&nbsp;
é˜…è¯»(<span id="post_view_count">0</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19385107);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19385107', targetLink: 'https://www.cnblogs.com/catchadmin/p/19385107', title: 'ä½¿ç”¨ Laravel Workflow ä½œä¸º MCP å·¥å…·æä¾›ç»™ AI å®¢æˆ·ç«¯' })">ä¸¾æŠ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ AgentScope Java æ ¸å¿ƒæ¶æ„æ·±åº¦è§£æ ]]></title>
    <link>https://www.cnblogs.com/wasp520/p/19385021</link>
    <guid>d54d606ff799fce216bf29932a44c2f8</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/wasp520/p/19385021" title="å‘å¸ƒäº 2025-12-23 08:33">
    <span role="heading" aria-level="2">AgentScope Java æ ¸å¿ƒæ¶æ„æ·±åº¦è§£æ</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="agentscope-java-æ ¸å¿ƒæ¶æ„æ·±åº¦è§£æä»é›¶åˆ°ç”Ÿäº§çº§çš„æ™ºèƒ½ä½“æ¡†æ¶">AgentScope Java æ ¸å¿ƒæ¶æ„æ·±åº¦è§£æï¼šä»é›¶åˆ°ç”Ÿäº§çº§çš„æ™ºèƒ½ä½“æ¡†æ¶</h1>
<h2 id="æ‘˜è¦">æ‘˜è¦</h2>
<p>AgentScope Java æ˜¯ä¸€ä¸ªé¢å‘ç”Ÿäº§ç¯å¢ƒçš„æ™ºèƒ½ä½“ç¼–ç¨‹æ¡†æ¶ï¼Œå®ƒå·§å¦™åœ°å°†å¤§è¯­è¨€æ¨¡å‹çš„æ¨ç†èƒ½åŠ›ã€å·¥å…·è°ƒç”¨ã€è®°å¿†ç®¡ç†å’Œå¤šæ™ºèƒ½ä½“åä½œæ•´åˆåœ¨ä¸€èµ·ã€‚æœ¬æ–‡å°†ä»æ¶æ„è®¾è®¡è€…çš„è§†è§’ï¼Œæ·±å…¥å‰–æè¿™ä¸ªæ¡†æ¶çš„æ ¸å¿ƒæœºåˆ¶ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦‚ä½•è®©å¼€å‘è€…ç”¨å‡ è¡Œä»£ç å°±èƒ½æ„å»ºå‡ºå…·å¤‡è‡ªä¸»å†³ç­–èƒ½åŠ›çš„ AI æ™ºèƒ½ä½“çš„ã€‚æˆ‘ä»¬ä¼šä» ReAct æ¨ç†å¾ªç¯ã€å·¥å…·ç³»ç»Ÿã€è®°å¿†ç®¡ç†ã€å¤šæ™ºèƒ½ä½“åä½œå’Œç”Ÿäº§å°±ç»ªç‰¹æ€§è¿™äº”ä¸ªç»´åº¦ï¼Œé€ä¸€æ‹†è§£å…¶å®ç°åŸç†ã€‚<br>
<img alt="image.png" loading="lazy" data-src="https://img2024.cnblogs.com/blog/15798/202512/15798-20251223083315032-1403418570.png" class="lazyload"></p>
<h2 id="1-å…¥å£ç±»ä¸æ ¸å¿ƒæ¶æ„">1. å…¥å£ç±»ä¸æ ¸å¿ƒæ¶æ„</h2>
<h3 id="11-å…¥å£ç±»reactagent">1.1 å…¥å£ç±»ï¼šReActAgent</h3>
<p>AgentScope çš„æ ¸å¿ƒå…¥å£æ˜¯ <code>ReActAgent</code>ï¼Œè¿™æ˜¯æ¡†æ¶ä¸­æœ€å¸¸ç”¨çš„æ™ºèƒ½ä½“å®ç°ã€‚å®ƒé‡‡ç”¨å»ºé€ è€…æ¨¡å¼ï¼Œè®©é…ç½®å˜å¾—éå¸¸ç›´è§‚ï¼š</p>
<pre><code class="language-java">ReActAgent agent = ReActAgent.builder()
    .name("Assistant")
    .sysPrompt("You are a helpful assistant.")
    .model(DashScopeChatModel.builder()
        .apiKey(System.getenv("DASHSCOPE_API_KEY"))
        .modelName("qwen-plus")
        .build())
    .memory(new InMemoryMemory())
    .toolkit(new Toolkit())
    .maxIters(10)
    .build();
</code></pre>
<p>ä»ä»£ç ç»“æ„æ¥çœ‹ï¼Œ<code>ReActAgent</code> ç»§æ‰¿è‡ª <code>AgentBase</code>ï¼Œè€Œ <code>AgentBase</code> åˆå®ç°äº† <code>Agent</code> æ¥å£ã€‚è¿™ç§è®¾è®¡è®©æ¡†æ¶æ—¢ä¿è¯äº†çµæ´»æ€§ï¼Œåˆæä¾›äº†ç»Ÿä¸€çš„åŸºç¡€èƒ½åŠ›ã€‚</p>
<h3 id="12-æ ¸å¿ƒç±»å…³ç³»å›¾">1.2 æ ¸å¿ƒç±»å…³ç³»å›¾</h3>
<p><img alt="image.png" loading="lazy" data-src="https://img2024.cnblogs.com/blog/15798/202512/15798-20251223083313395-1129454480.png" class="lazyload"></p>
<p>ä»ç±»å›¾å¯ä»¥çœ‹å‡ºï¼Œæ•´ä¸ªæ¡†æ¶é‡‡ç”¨äº†æ¸…æ™°çš„å±‚æ¬¡ç»“æ„ï¼š</p>
<ul>
<li><strong>Agent æ¥å£</strong>ï¼šå®šä¹‰äº†æ™ºèƒ½ä½“çš„åŸºæœ¬å¥‘çº¦</li>
<li><strong>AgentBase</strong>ï¼šæä¾›åŸºç¡€è®¾æ–½ï¼ˆHookã€ä¸­æ–­ã€çŠ¶æ€ç®¡ç†ï¼‰</li>
<li><strong>ReActAgent</strong>ï¼šå®ç°å…·ä½“çš„ ReAct å¾ªç¯é€»è¾‘</li>
<li><strong>Toolkit</strong>ï¼šç®¡ç†å·¥å…·æ³¨å†Œå’Œæ‰§è¡Œ</li>
<li><strong>Memory</strong>ï¼šç®¡ç†å¯¹è¯å†å²</li>
</ul>
<h2 id="2-react-æ¨ç†å¾ªç¯æ™ºèƒ½ä½“çš„æ€è€ƒ-è¡ŒåŠ¨æœºåˆ¶">2. ReAct æ¨ç†å¾ªç¯ï¼šæ™ºèƒ½ä½“çš„"æ€è€ƒ-è¡ŒåŠ¨"æœºåˆ¶</h2>
<h3 id="21-react-å¾ªç¯æµç¨‹">2.1 ReAct å¾ªç¯æµç¨‹</h3>
<p>ReActï¼ˆReasoning and Actingï¼‰æ˜¯ AgentScope çš„æ ¸å¿ƒæ¨¡å¼ï¼Œå®ƒè®©æ™ºèƒ½ä½“èƒ½å¤Ÿåœ¨æ¨ç†å’Œè¡ŒåŠ¨ä¹‹é—´å¾ªç¯ï¼Œç›´åˆ°å®Œæˆä»»åŠ¡æˆ–è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°ã€‚</p>
<p><img alt="image.png" loading="lazy" data-src="https://img2024.cnblogs.com/blog/15798/202512/15798-20251223083313360-1874877850.png" class="lazyload"></p>
<h3 id="22-å…³é”®æŠ€æœ¯ç‚¹">2.2 å…³é”®æŠ€æœ¯ç‚¹</h3>
<p><strong>Pipeline æ¨¡å¼</strong>ï¼šæ¡†æ¶å°†æ¨ç†å’Œè¡ŒåŠ¨é˜¶æ®µåˆ†åˆ«å°è£…æˆ <code>ReasoningPipeline</code> å’Œ <code>ActingPipeline</code>ï¼Œæ¯ä¸ª Pipeline è´Ÿè´£ä¸€ä¸ªé˜¶æ®µçš„å®Œæ•´æµç¨‹ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯èŒè´£æ¸…æ™°ï¼Œæ˜“äºæ‰©å±•å’Œç»´æŠ¤ã€‚</p>
<p>çœ‹ä¸€æ®µæ ¸å¿ƒä»£ç ï¼š</p>
<pre><code class="language-java">private Mono&lt;Msg&gt; executeIteration(int iter, StructuredOutputHandler handler) {
    if (iter &gt;= maxIters) {
        return summarizing(handler);
    }
    
    return checkInterruptedAsync()
        .then(reasoning(handler))
        .then(Mono.defer(this::checkInterruptedAsync))
        .then(Mono.defer(() -&gt; actingOrFinish(iter, handler)));
}
</code></pre>
<p>è¿™é‡Œæœ‰å‡ ä¸ªå·§å¦™çš„è®¾è®¡ï¼š</p>
<ol>
<li><strong>å“åº”å¼ç¼–ç¨‹</strong>ï¼šä½¿ç”¨ <code>Mono.then()</code> é“¾å¼è°ƒç”¨ï¼Œä¿è¯æ‰§è¡Œé¡ºåº</li>
<li><strong>ä¸­æ–­æ£€æŸ¥</strong>ï¼šåœ¨å…³é”®èŠ‚ç‚¹æ£€æŸ¥ä¸­æ–­æ ‡å¿—ï¼Œæ”¯æŒå®‰å…¨ä¸­æ–­</li>
<li><strong>å»¶è¿Ÿæ‰§è¡Œ</strong>ï¼šä½¿ç”¨ <code>Mono.defer()</code> ç¡®ä¿æ¯æ¬¡è¿­ä»£éƒ½é‡æ–°è®¡ç®—</li>
</ol>
<p><strong>æµå¼å¤„ç†</strong>ï¼šæ¨ç†é˜¶æ®µä½¿ç”¨ <code>Flux&lt;ChatResponse&gt;</code> è¿›è¡Œæµå¼å¤„ç†ï¼Œè¿™æ„å‘³ç€æ¨¡å‹è¿”å›çš„å†…å®¹æ˜¯åˆ†å—åˆ°è¾¾çš„ï¼Œæ¡†æ¶ä¼šå®æ—¶å¤„ç†æ¯ä¸ªå—å¹¶è§¦å‘ç›¸åº”çš„ Hookï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿå®æ—¶çœ‹åˆ°æ™ºèƒ½ä½“çš„"æ€è€ƒè¿‡ç¨‹"ã€‚</p>
<h2 id="3-å·¥å…·è°ƒç”¨ç³»ç»Ÿè®©æ™ºèƒ½ä½“åŠ¨æ‰‹çš„èƒ½åŠ›">3. å·¥å…·è°ƒç”¨ç³»ç»Ÿï¼šè®©æ™ºèƒ½ä½“"åŠ¨æ‰‹"çš„èƒ½åŠ›</h2>
<h3 id="31-å·¥å…·æ³¨å†Œä¸è°ƒç”¨æµç¨‹">3.1 å·¥å…·æ³¨å†Œä¸è°ƒç”¨æµç¨‹</h3>
<p>å·¥å…·ç³»ç»Ÿæ˜¯ AgentScope çš„ä¸€å¤§äº®ç‚¹ï¼Œå®ƒè®©æ™ºèƒ½ä½“èƒ½å¤Ÿè°ƒç”¨å¤–éƒ¨åŠŸèƒ½ï¼Œæ¯”å¦‚æŸ¥è¯¢æ•°æ®åº“ã€è°ƒç”¨ APIã€æ‰§è¡Œè®¡ç®—ç­‰ã€‚<br>
<img alt="image.png" loading="lazy" data-src="https://img2024.cnblogs.com/blog/15798/202512/15798-20251223083313412-859154348.png" class="lazyload"></p>
<h3 id="32-å·¥å…·ç³»ç»Ÿçš„è®¾è®¡äº®ç‚¹">3.2 å·¥å…·ç³»ç»Ÿçš„è®¾è®¡äº®ç‚¹</h3>
<p><strong>æ³¨è§£é©±åŠ¨</strong>ï¼šå·¥å…·æ³¨å†Œéå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨æ–¹æ³•ä¸Šæ·»åŠ  <code>@Tool</code> æ³¨è§£ï¼š</p>
<pre><code class="language-java">@Tool(name = "get_current_time", description = "Get current time")
public String getCurrentTime(@ToolParam(name = "timezone") String timezone) {
    ZoneId zoneId = ZoneId.of(timezone);
    LocalDateTime now = LocalDateTime.now(zoneId);
    return now.format(DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss"));
}
</code></pre>
<p>æ¡†æ¶ä¼šè‡ªåŠ¨ï¼š</p>
<ol>
<li>è§£ææ–¹æ³•ç­¾å</li>
<li>ç”Ÿæˆ JSON Schemaï¼ˆç”¨äº LLM ç†è§£å·¥å…·ï¼‰</li>
<li>å¤„ç†å‚æ•°è½¬æ¢ï¼ˆJSON â†’ Java å¯¹è±¡ï¼‰</li>
<li>æ‰§è¡Œæ–¹æ³•å¹¶è½¬æ¢ç»“æœ</li>
</ol>
<p><strong>å·¥å…·ç»„ç®¡ç†</strong>ï¼š<code>ToolGroupManager</code> å…è®¸å°†å·¥å…·åˆ†ç»„ï¼ŒåŠ¨æ€æ¿€æ´»/åœç”¨æŸäº›å·¥å…·ç»„ã€‚è¿™åœ¨å¤æ‚åœºæ™¯ä¸­éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚ä¸åŒé˜¶æ®µéœ€è¦ä¸åŒçš„å·¥å…·é›†ã€‚</p>
<p><strong>MCP åè®®æ”¯æŒ</strong>ï¼šæ¡†æ¶åŸç”Ÿæ”¯æŒ Model Context Protocolï¼Œè¿™æ„å‘³ç€å¯ä»¥è½»æ¾é›†æˆå¤–éƒ¨ MCP æœåŠ¡æä¾›çš„å·¥å…·ï¼Œæ— éœ€ç¼–å†™é¢å¤–çš„é›†æˆä»£ç ã€‚</p>
<p><strong>å¹¶è¡Œæ‰§è¡Œ</strong>ï¼š<code>ParallelToolExecutor</code> æ”¯æŒå¹¶è¡Œæ‰§è¡Œå¤šä¸ªå·¥å…·è°ƒç”¨ï¼Œæé«˜æ•ˆç‡ã€‚å½“æ¨¡å‹åŒæ—¶è°ƒç”¨å¤šä¸ªå·¥å…·æ—¶ï¼Œå®ƒä»¬å¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œè€Œä¸æ˜¯ä¸²è¡Œç­‰å¾…ã€‚</p>
<h2 id="4-è®°å¿†ç®¡ç†æ™ºèƒ½ä½“çš„è®°å¿†ç³»ç»Ÿ">4. è®°å¿†ç®¡ç†ï¼šæ™ºèƒ½ä½“çš„"è®°å¿†"ç³»ç»Ÿ</h2>
<h3 id="41-è®°å¿†ç³»ç»Ÿæ¶æ„">4.1 è®°å¿†ç³»ç»Ÿæ¶æ„</h3>
<p>AgentScope å°†è®°å¿†åˆ†ä¸ºä¸¤ç±»ï¼šçŸ­æœŸè®°å¿†ï¼ˆMemoryï¼‰å’Œé•¿æœŸè®°å¿†ï¼ˆLongTermMemoryï¼‰ã€‚</p>
<p><img alt="image.png" loading="lazy" data-src="https://img2024.cnblogs.com/blog/15798/202512/15798-20251223083313804-869222024.png" class="lazyload"></p>
<h3 id="42-è®°å¿†ç®¡ç†çš„å®ç°ç»†èŠ‚">4.2 è®°å¿†ç®¡ç†çš„å®ç°ç»†èŠ‚</h3>
<p><strong>çŸ­æœŸè®°å¿†</strong>ï¼š<code>InMemoryMemory</code> æ˜¯æœ€ç®€å•çš„å®ç°ï¼Œå®ƒå°†æ¶ˆæ¯å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ <code>List&lt;Msg&gt;</code> ä¸­ã€‚æ¯æ¬¡è°ƒç”¨æ™ºèƒ½ä½“æ—¶ï¼Œç”¨æˆ·æ¶ˆæ¯å’Œæ™ºèƒ½ä½“å›å¤éƒ½ä¼šè¢«æ·»åŠ åˆ°è®°å¿†ä¸­ï¼Œå½¢æˆå®Œæ•´çš„å¯¹è¯å†å²ã€‚</p>
<p><strong>é•¿æœŸè®°å¿†</strong>ï¼šé•¿æœŸè®°å¿†é€šè¿‡ <code>LongTermMemoryTools</code> æš´éœ²ç»™æ™ºèƒ½ä½“ï¼Œæ™ºèƒ½ä½“å¯ä»¥ä¸»åŠ¨è°ƒç”¨ <code>search_memory</code> å’Œ <code>add_memory</code> å·¥å…·ã€‚æ¡†æ¶è¿˜æ”¯æŒè‡ªåŠ¨ç®¡ç†æ¨¡å¼ï¼Œé€šè¿‡ <code>StaticLongTermMemoryHook</code> åœ¨ç‰¹å®šæ—¶æœºè‡ªåŠ¨ä¿å­˜é‡è¦ä¿¡æ¯ã€‚</p>
<p><strong>çŠ¶æ€æŒä¹…åŒ–</strong>ï¼š<code>Memory</code> æ¥å£ç»§æ‰¿è‡ª <code>StateModule</code>ï¼Œè¿™æ„å‘³ç€è®°å¿†å¯ä»¥è¢«åºåˆ—åŒ–å¹¶æŒä¹…åŒ–åˆ°ä¼šè¯å­˜å‚¨ä¸­ã€‚é…åˆ <code>Session</code> ç³»ç»Ÿï¼Œå¯ä»¥å®ç°å¯¹è¯çš„ä¿å­˜å’Œæ¢å¤ã€‚</p>
<h2 id="5-å¤šæ™ºèƒ½ä½“åä½œmsghub-çš„å·§å¦™è®¾è®¡">5. å¤šæ™ºèƒ½ä½“åä½œï¼šMsgHub çš„å·§å¦™è®¾è®¡</h2>
<h3 id="51-å¤šæ™ºèƒ½ä½“é€šä¿¡æµç¨‹">5.1 å¤šæ™ºèƒ½ä½“é€šä¿¡æµç¨‹</h3>
<p><code>MsgHub</code> æ˜¯ AgentScope ä¸­å®ç°å¤šæ™ºèƒ½ä½“åä½œçš„æ ¸å¿ƒç»„ä»¶ï¼Œå®ƒè§£å†³äº†æ™ºèƒ½ä½“ä¹‹é—´æ¶ˆæ¯ä¼ é€’çš„ç¹çé—®é¢˜ã€‚</p>
<p><img alt="image.png" loading="lazy" data-src="https://img2024.cnblogs.com/blog/15798/202512/15798-20251223083313544-1276036637.png" class="lazyload"></p>
<h3 id="52-msghub-çš„è®¾è®¡ç²¾é«“">5.2 MsgHub çš„è®¾è®¡ç²¾é«“</h3>
<p><strong>è‡ªåŠ¨å¹¿æ’­æœºåˆ¶</strong>ï¼šå½“æ™ºèƒ½ä½“åŠ å…¥ <code>MsgHub</code> åï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨è®¾ç½®è®¢é˜…å…³ç³»ã€‚æ¯ä¸ªæ™ºèƒ½ä½“å‘é€çš„æ¶ˆæ¯ä¼šè‡ªåŠ¨å¹¿æ’­ç»™å…¶ä»–å‚ä¸è€…ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨ <code>observe()</code>ã€‚</p>
<p><strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>ï¼š<code>AgentBase</code> ç»´æŠ¤äº†ä¸€ä¸ª <code>hubSubscribers</code> æ˜ å°„ï¼Œè®°å½•æ¯ä¸ª Hub çš„è®¢é˜…è€…åˆ—è¡¨ã€‚å½“æ™ºèƒ½ä½“è°ƒç”¨ <code>call()</code> æ—¶ï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨å°†æ¶ˆæ¯å‘é€ç»™æ‰€æœ‰è®¢é˜…è€…ã€‚</p>
<p>çœ‹ä¸€æ®µå…³é”®ä»£ç ï¼š</p>
<pre><code class="language-java">// AgentBase ä¸­çš„æ¶ˆæ¯å¹¿æ’­é€»è¾‘
private void broadcastToSubscribers(String hubName, Msg msg) {
    List&lt;AgentBase&gt; subscribers = hubSubscribers.get(hubName);
    if (subscribers != null) {
        for (AgentBase subscriber : subscribers) {
            subscriber.observe(msg).subscribe();
        }
    }
}
</code></pre>
<p><strong>ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>ï¼š<code>MsgHub</code> å®ç°äº† <code>AutoCloseable</code> æ¥å£ï¼Œå¯ä»¥ä½¿ç”¨ try-with-resources è‡ªåŠ¨æ¸…ç†è®¢é˜…å…³ç³»ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</p>
<h2 id="6-ç”Ÿäº§å°±ç»ªç‰¹æ€§ä¼ä¸šçº§èƒ½åŠ›">6. ç”Ÿäº§å°±ç»ªç‰¹æ€§ï¼šä¼ä¸šçº§èƒ½åŠ›</h2>
<h3 id="61-å®‰å…¨ä¸­æ–­æœºåˆ¶">6.1 å®‰å…¨ä¸­æ–­æœºåˆ¶</h3>
<p>AgentScope æä¾›äº†å®Œæ•´çš„ä¸­æ–­æœºåˆ¶ï¼Œæ”¯æŒåœ¨ä»»æ„æ—¶åˆ»å®‰å…¨åœ°æš‚åœæ™ºèƒ½ä½“æ‰§è¡Œï¼š</p>
<pre><code class="language-java">// å¤–éƒ¨ä¸­æ–­
agent.interrupt(userMsg);

// æ™ºèƒ½ä½“å†…éƒ¨æ£€æŸ¥ç‚¹
return checkInterruptedAsync()
    .then(doWork())
    .flatMap(result -&gt; checkInterruptedAsync().thenReturn(result));
</code></pre>
<p>ä¸­æ–­æœºåˆ¶ä½¿ç”¨ <code>AtomicBoolean</code> æ ‡å¿—ä½å’Œå“åº”å¼ç¼–ç¨‹æ¨¡å¼ï¼Œç¡®ä¿ä¸­æ–­ä¿¡å·èƒ½å¤Ÿæ­£ç¡®ä¼ æ’­åˆ° Mono é“¾ä¸­ã€‚</p>
<h3 id="62-hook-ç³»ç»Ÿå¯è§‚æµ‹æ€§å’Œæ‰©å±•æ€§">6.2 Hook ç³»ç»Ÿï¼šå¯è§‚æµ‹æ€§å’Œæ‰©å±•æ€§</h3>
<p>Hook ç³»ç»Ÿå…è®¸å¼€å‘è€…åœ¨æ™ºèƒ½ä½“æ‰§è¡Œçš„å…³é”®ç‚¹æ³¨å…¥è‡ªå®šä¹‰é€»è¾‘ï¼š</p>
<pre><code class="language-java">agent.addHook(new Hook() {
    @Override
    public Mono&lt;List&lt;Msg&gt;&gt; onPreReasoning(PreReasoningEvent event) {
        // åœ¨æ¨ç†å‰ä¿®æ”¹æ¶ˆæ¯
        return Mono.just(modifiedMessages);
    }
    
    @Override
    public Mono&lt;Void&gt; onPostActing(PostActingEvent event) {
        // åœ¨å·¥å…·æ‰§è¡Œåè®°å½•æ—¥å¿—
        logger.info("Tool executed: {}", event.getToolCall());
        return Mono.empty();
    }
});
</code></pre>
<p>æ¡†æ¶å®šä¹‰äº†å¤šä¸ª Hook äº‹ä»¶ç±»å‹ï¼Œè¦†ç›–äº†æ™ºèƒ½ä½“æ‰§è¡Œçš„å„ä¸ªé˜¶æ®µï¼Œè¿™è®©ç›‘æ§ã€æ—¥å¿—ã€è°ƒè¯•å˜å¾—éå¸¸æ–¹ä¾¿ã€‚</p>
<h3 id="63-å“åº”å¼æ¶æ„">6.3 å“åº”å¼æ¶æ„</h3>
<p>æ•´ä¸ªæ¡†æ¶åŸºäº Project Reactorï¼Œæ‰€æœ‰å¼‚æ­¥æ“ä½œéƒ½è¿”å› <code>Mono&lt;T&gt;</code> æˆ– <code>Flux&lt;T&gt;</code>ã€‚è¿™ç§è®¾è®¡å¸¦æ¥çš„å¥½å¤„æ˜¯ï¼š</p>
<ul>
<li><strong>éé˜»å¡æ‰§è¡Œ</strong>ï¼šä¸ä¼šå› ä¸ºç­‰å¾… I/O è€Œé˜»å¡çº¿ç¨‹</li>
<li><strong>èƒŒå‹å¤„ç†</strong>ï¼šFlux å¤©ç„¶æ”¯æŒèƒŒå‹ï¼Œé¿å…å†…å­˜æº¢å‡º</li>
<li><strong>ç»„åˆèƒ½åŠ›</strong>ï¼šå¯ä»¥è½»æ¾ç»„åˆå¤šä¸ªå¼‚æ­¥æ“ä½œ</li>
</ul>
<h3 id="64-çŠ¶æ€ç®¡ç†ä¸ä¼šè¯æŒä¹…åŒ–">6.4 çŠ¶æ€ç®¡ç†ä¸ä¼šè¯æŒä¹…åŒ–</h3>
<p><code>StateModule</code> æ¥å£æä¾›äº†ç»Ÿä¸€çš„çŠ¶æ€ç®¡ç†èƒ½åŠ›ï¼Œä»»ä½•å®ç°äº†è¯¥æ¥å£çš„ç»„ä»¶éƒ½å¯ä»¥è¢«åºåˆ—åŒ–å’ŒæŒä¹…åŒ–ã€‚é…åˆ <code>Session</code> ç³»ç»Ÿï¼Œå¯ä»¥å®ç°ï¼š</p>
<ul>
<li>å¯¹è¯å†å²çš„ä¿å­˜å’Œæ¢å¤</li>
<li>æ™ºèƒ½ä½“çŠ¶æ€çš„æŒä¹…åŒ–</li>
<li>å¤šç§Ÿæˆ·éš”ç¦»</li>
</ul>
<h2 id="7-ä½¿ç”¨ç¤ºä¾‹å¿«é€Ÿä¸Šæ‰‹">7. ä½¿ç”¨ç¤ºä¾‹ï¼šå¿«é€Ÿä¸Šæ‰‹</h2>
<h3 id="71-åŸºç¡€å¯¹è¯ç¤ºä¾‹">7.1 åŸºç¡€å¯¹è¯ç¤ºä¾‹</h3>
<pre><code class="language-java">// åˆ›å»ºæ¨¡å‹
DashScopeChatModel model = DashScopeChatModel.builder()
    .apiKey(System.getenv("DASHSCOPE_API_KEY"))
    .modelName("qwen-plus")
    .build();

// åˆ›å»ºæ™ºèƒ½ä½“
ReActAgent agent = ReActAgent.builder()
    .name("Assistant")
    .sysPrompt("You are a helpful assistant.")
    .model(model)
    .memory(new InMemoryMemory())
    .toolkit(new Toolkit())
    .build();

// è°ƒç”¨æ™ºèƒ½ä½“
Msg response = agent.call(Msg.builder()
    .role(MsgRole.USER)
    .textContent("Hello!")
    .build()).block();

System.out.println(response.getTextContent());
</code></pre>
<h3 id="72-å·¥å…·è°ƒç”¨ç¤ºä¾‹">7.2 å·¥å…·è°ƒç”¨ç¤ºä¾‹</h3>
<pre><code class="language-java">// å®šä¹‰å·¥å…·ç±»
public class SimpleTools {
    @Tool(name = "calculate", description = "Calculate math expression")
    public String calculate(@ToolParam(name = "expression") String expr) {
        // æ‰§è¡Œè®¡ç®—é€»è¾‘
        return result;
    }
}

// æ³¨å†Œå·¥å…·
Toolkit toolkit = new Toolkit();
toolkit.registerTool(new SimpleTools());

// åˆ›å»ºå¸¦å·¥å…·çš„æ™ºèƒ½ä½“
ReActAgent agent = ReActAgent.builder()
    .toolkit(toolkit)
    // ... å…¶ä»–é…ç½®
    .build();
</code></pre>
<h3 id="73-å¤šæ™ºèƒ½ä½“åä½œç¤ºä¾‹">7.3 å¤šæ™ºèƒ½ä½“åä½œç¤ºä¾‹</h3>
<pre><code class="language-java">// åˆ›å»ºå¤šä¸ªæ™ºèƒ½ä½“
ReActAgent alice = ReActAgent.builder().name("Alice").build();
ReActAgent bob = ReActAgent.builder().name("Bob").build();

// ä½¿ç”¨ MsgHub è¿›è¡Œåä½œ
try (MsgHub hub = MsgHub.builder()
        .participants(alice, bob)
        .build()) {
    hub.enter().block();
    
    // Alice çš„å›å¤ä¼šè‡ªåŠ¨å¹¿æ’­ç»™ Bob
    alice.call().block();
    
    // Bob çš„å›å¤ä¼šè‡ªåŠ¨å¹¿æ’­ç»™ Alice
    bob.call().block();
}
</code></pre>
<h2 id="8-æ€»ç»“">8. æ€»ç»“</h2>
<p>AgentScope Java æ˜¯ä¸€ä¸ªè®¾è®¡ç²¾è‰¯çš„æ™ºèƒ½ä½“æ¡†æ¶ï¼Œå®ƒåœ¨æ˜“ç”¨æ€§å’ŒåŠŸèƒ½å®Œæ•´æ€§ä¹‹é—´æ‰¾åˆ°äº†å¾ˆå¥½çš„å¹³è¡¡ã€‚é€šè¿‡æœ¬æ–‡çš„åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š</p>
<ol>
<li><strong>ReAct å¾ªç¯</strong>ï¼šé€šè¿‡ Pipeline æ¨¡å¼å®ç°äº†æ¸…æ™°çš„æ¨ç†-è¡ŒåŠ¨å¾ªç¯ï¼Œæ”¯æŒæµå¼å¤„ç†å’Œä¸­æ–­</li>
<li><strong>å·¥å…·ç³»ç»Ÿ</strong>ï¼šæ³¨è§£é©±åŠ¨çš„å·¥å…·æ³¨å†Œã€å·¥å…·ç»„ç®¡ç†ã€MCP åè®®æ”¯æŒï¼Œè®©æ‰©å±•å˜å¾—ç®€å•</li>
<li><strong>è®°å¿†ç®¡ç†</strong>ï¼šåˆ†ç¦»çš„çŸ­æœŸå’Œé•¿æœŸè®°å¿†ï¼Œæ”¯æŒå¤šç§å­˜å‚¨åç«¯å’ŒæŒä¹…åŒ–</li>
<li><strong>å¤šæ™ºèƒ½ä½“åä½œ</strong>ï¼šMsgHub çš„è‡ªåŠ¨å¹¿æ’­æœºåˆ¶å¤§å¤§ç®€åŒ–äº†å¤šæ™ºèƒ½ä½“åº”ç”¨çš„å¼€å‘</li>
<li><strong>ç”Ÿäº§å°±ç»ª</strong>ï¼šå®‰å…¨ä¸­æ–­ã€Hook ç³»ç»Ÿã€å“åº”å¼æ¶æ„ã€çŠ¶æ€ç®¡ç†ï¼Œè¿™äº›ç‰¹æ€§è®©æ¡†æ¶èƒ½å¤Ÿåº”å¯¹ä¼ä¸šçº§éœ€æ±‚</li>
</ol>
<p>æ¡†æ¶çš„æ¶æ„è®¾è®¡ä½“ç°äº†å‡ ä¸ªé‡è¦çš„è½¯ä»¶å·¥ç¨‹åŸåˆ™ï¼š</p>
<ul>
<li><strong>å•ä¸€èŒè´£</strong>ï¼šæ¯ä¸ªç»„ä»¶éƒ½æœ‰æ˜ç¡®çš„èŒè´£</li>
<li><strong>å¼€é—­åŸåˆ™</strong>ï¼šé€šè¿‡æ¥å£å’ŒæŠ½è±¡ç±»æ”¯æŒæ‰©å±•</li>
<li><strong>ä¾èµ–å€’ç½®</strong>ï¼šä¾èµ–æŠ½è±¡è€Œéå…·ä½“å®ç°</li>
<li><strong>å“åº”å¼ç¼–ç¨‹</strong>ï¼šå……åˆ†åˆ©ç”¨ Reactor çš„èƒ½åŠ›</li>
</ul>
<p>å¯¹äºå¼€å‘è€…æ¥è¯´ï¼ŒAgentScope Java æä¾›äº†ä»ç®€å•å¯¹è¯åˆ°å¤æ‚å¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„å®Œæ•´è§£å†³æ–¹æ¡ˆï¼ŒåŒæ—¶ä¿æŒäº†ä»£ç çš„ç®€æ´æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚æ— è®ºæ˜¯å¿«é€ŸåŸå‹å¼€å‘è¿˜æ˜¯ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ï¼Œè¿™ä¸ªæ¡†æ¶éƒ½èƒ½å¾ˆå¥½åœ°æ»¡è¶³éœ€æ±‚ã€‚</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-23 08:33">2025-12-23 08:33</span>&nbsp;
<a href="https://www.cnblogs.com/wasp520">wasp</a>&nbsp;
é˜…è¯»(<span id="post_view_count">9</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19385021);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19385021', targetLink: 'https://www.cnblogs.com/wasp520/p/19385021', title: 'AgentScope Java æ ¸å¿ƒæ¶æ„æ·±åº¦è§£æ' })">ä¸¾æŠ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ FastAPIå…¥é—¨ï¼šä»ç®€ä»‹åˆ°å®æˆ˜ï¼Œå¯¹æ¯”Flaskå¸®ä½ é€‰å¯¹æ¡†æ¶ ]]></title>
    <link>https://www.cnblogs.com/ymtianyu/p/19385007</link>
    <guid>28a270750c3cf5660b63ac300a4d4458</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ymtianyu/p/19385007" title="å‘å¸ƒäº 2025-12-23 08:25">
    <span role="heading" aria-level="2">FastAPIå…¥é—¨ï¼šä»ç®€ä»‹åˆ°å®æˆ˜ï¼Œå¯¹æ¯”Flaskå¸®ä½ é€‰å¯¹æ¡†æ¶</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        æœ¬æ–‡ä»‹ç»äº†FastAPIçš„åŸºæœ¬æ¦‚å¿µã€å¿«é€Ÿå…¥é—¨æ•™ç¨‹ã€å¸¸ç”¨æ–‡ä»¶ç»“æ„ï¼Œå¹¶ä¸Flaskæ¡†æ¶è¿›è¡Œå¯¹æ¯”ï¼Œåˆ†æå…¶ä¼˜åŠ¿å’Œä¸è¶³ã€‚é€šè¿‡ä»£ç ç¤ºä¾‹å¸®åŠ©è¯»è€…å¿«é€Ÿä¸Šæ‰‹FastAPIå¼€å‘ï¼Œä¸ºé€‰æ‹©åˆé€‚æ¡†æ¶æä¾›å‚è€ƒã€‚
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<div style="font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif; line-height: 1.6; color: rgba(51, 51, 51, 1); padding: 20px; width: 100%">
<p style="font-size: 18px; font-weight: bold">ä½ æ˜¯ä¸æ˜¯è¿˜åœ¨ä¸ºPython Web APIå¼€å‘çš„é€Ÿåº¦å’Œå¤æ‚åº¦å¤´ç–¼ï¼ŸFastAPIçš„GitHubæ˜Ÿæ ‡æ•°åœ¨3å¹´å†…ä»0é£™å‡è‡³è¶…è¿‡60,000ï¼Œæˆä¸ºå¢é•¿æœ€å¿«çš„Pythonæ¡†æ¶ä¹‹ä¸€ï¼</p>
<blockquote style="border-left: 4px solid rgba(186, 55, 42, 1); padding-left: 15px; margin: 20px 0; color: rgba(85, 85, 85, 1)">æœ¬æ–‡ä¸ºPythonå¼€å‘è€…æä¾›ä¸€ä»½å®ç”¨çš„FastAPIå…¥é—¨æŒ‡å—ï¼Œæ¶µç›–å…¶æ ¸å¿ƒç®€ä»‹ã€ç®€æ˜ä½¿ç”¨æ•™ç¨‹ã€å¸¸ç”¨æ–‡ä»¶ç»“æ„ï¼Œå¹¶å¯¹æ¯”Flaskç­‰æ¡†æ¶çš„ä¼˜åŠ¿ä¸ä¸è¶³ã€‚é€šè¿‡ä»£ç ç¤ºä¾‹å’Œç»“æ„è§£æï¼ŒåŠ©ä½ å¿«é€Ÿä¸Šæ‰‹é«˜æ€§èƒ½APIå¼€å‘ã€‚ <br><br>ç›®å½•ï¼š
<ul style="list-style-type: none; padding-left: 0">
<li>- âœ¨ FastAPIæ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>- ğŸš€ å¿«é€Ÿä¸Šæ‰‹ï¼šä¸€ä¸ªæœ€å°ç¤ºä¾‹</li>
<li>- ğŸ“ å¸¸ç”¨æ–‡ä»¶ç»“æ„</li>
<li>- âš–ï¸ FastAPI vs Flaskï¼šä¼˜åŠ¿ä¸ä¸è¶³</li>
<li>- ğŸ’» å®Œæ•´ä»£ç å‚è€ƒ</li>
</ul>
</blockquote>
<h2 style="color: rgba(44, 62, 80, 1)">âœ¨ FastAPIæ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>FastAPIæ˜¯ä¸€ä¸ªåŸºäºPython 3.6+ç±»å‹æç¤ºçš„ç°ä»£Webæ¡†æ¶ï¼Œä¸“ä¸ºæ„å»ºé«˜æ€§èƒ½APIè®¾è®¡ã€‚å®ƒç”±<strong style="color: rgba(186, 55, 42, 1)">SebastiÃ¡n RamÃ­rez</strong>å¼€å‘ï¼Œèåˆäº†Starletteï¼ˆASGIæ¡†æ¶ï¼‰å’ŒPydanticï¼ˆæ•°æ®éªŒè¯ï¼‰ï¼Œè®©ä½ ç”¨æ›´å°‘çš„ä»£ç å®ç°æ›´å¤šåŠŸèƒ½ã€‚</p>
<p>æ ¸å¿ƒç‰¹ç‚¹ä¸€è§ˆï¼š</p>
<ul style="list-style-type: none; padding-left: 0">
<li>- <strong style="color: rgba(186, 55, 42, 1)">æé«˜æ€§èƒ½</strong>ï¼šæ”¯æŒå¼‚æ­¥ç¼–ç¨‹ï¼Œé€Ÿåº¦åª²ç¾Node.jså’ŒGoï¼Œè½»æ¾å¤„ç†é«˜å¹¶å‘è¯·æ±‚ã€‚</li>
<li>- <strong style="color: rgba(186, 55, 42, 1)">å¼€å‘æ•ˆç‡é«˜</strong>ï¼šè‡ªåŠ¨ç”Ÿæˆäº¤äº’å¼APIæ–‡æ¡£ï¼ˆSwagger UIå’ŒReDocï¼‰ï¼Œå‡å°‘æ‰‹åŠ¨ç¼–å†™æ–‡æ¡£çš„éº»çƒ¦ã€‚</li>
<li>- <strong style="color: rgba(186, 55, 42, 1)">ç±»å‹å®‰å…¨</strong>ï¼šåˆ©ç”¨Pythonç±»å‹æç¤ºè¿›è¡Œè‡ªåŠ¨æ•°æ®éªŒè¯å’Œåºåˆ—åŒ–ï¼Œæå‡ä»£ç å¯ç»´æŠ¤æ€§ã€‚</li>
<li>- <strong style="color: rgba(186, 55, 42, 1)">æ˜“äºå­¦ä¹ </strong>ï¼šè®¾è®¡ç®€æ´ï¼Œæ–‡æ¡£æ¸…æ™°ï¼Œå³ä½¿æ–°æ‰‹ä¹Ÿèƒ½å¿«é€Ÿå…¥é—¨ã€‚</li>
</ul>
<h2 style="color: rgba(44, 62, 80, 1)">ğŸš€ å¿«é€Ÿä¸Šæ‰‹ï¼šä¸€ä¸ªæœ€å°ç¤ºä¾‹</h2>
<p>åªéœ€å‡ æ­¥ï¼Œä½ å°±èƒ½è·‘èµ·ç¬¬ä¸€ä¸ªFastAPIåº”ç”¨ã€‚é¦–å…ˆï¼Œå®‰è£…å¿…å¤‡åº“ï¼š</p>
<pre class="language-python highlighter-hljs"><code>uv add fastapi uvicorn[standard]</code></pre>
<p>æ¥ç€ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º<code>main.py</code>çš„æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä»¥ä¸‹ä»£ç ï¼š</p>
<pre class="language-python highlighter-hljs"><code>from fastapi import FastAPI

app = FastAPI()

@app.get("/")
def read_root():
    return {"Hello": "World"}

@app.get("/items/{item_id}")
def read_item(item_id: int, q: str = None):
    return {"item_id": item_id, "q": q}</code></pre>
<p>è¿è¡Œåº”ç”¨ï¼š</p>
<pre class="language-python highlighter-hljs"><code>uv run uvicorn main:app --reload</code></pre>
<p>æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® <code>http://127.0.0.1:8000</code> ä¼šçœ‹åˆ°JSONå“åº”ï¼›è®¿é—® <code>http://127.0.0.1:8000/docs</code> å³å¯ä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆçš„äº¤äº’å¼æ–‡æ¡£æµ‹è¯•APIç«¯ç‚¹ã€‚æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Ÿ</p>
<h2 style="color: rgba(44, 62, 80, 1)">ğŸ“ å¸¸ç”¨æ–‡ä»¶ç»“æ„</h2>
<p>éšç€é¡¹ç›®å˜å¤§ï¼Œè‰¯å¥½çš„æ–‡ä»¶ç»“æ„èƒ½æå‡å¯ç»´æŠ¤æ€§ã€‚ä»¥ä¸‹æ˜¯æ¨èçš„FastAPIé¡¹ç›®å¸ƒå±€ï¼š</p>
<pre class="language-python highlighter-hljs"><code>my_project/
â”œâ”€â”€ .venv/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py               # åˆ›å»ºFastAPIå®ä¾‹å’Œä¸»è·¯ç”±
â”‚   â”œâ”€â”€ api/                  # å­˜æ”¾æ‰€æœ‰è·¯ç”±ç«¯ç‚¹
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ items.py          # ç¤ºä¾‹ï¼šå•†å“ç›¸å…³ç«¯ç‚¹
â”‚   â”‚   â””â”€â”€ users.py          # ç¤ºä¾‹ï¼šç”¨æˆ·ç›¸å…³ç«¯ç‚¹
â”‚   â”œâ”€â”€ models/               # SQLAlchemyç­‰ORMæ¨¡å‹ï¼ˆå¯é€‰ï¼‰
â”‚   â”œâ”€â”€ schemas/              # Pydanticæ¨¡å‹ï¼Œç”¨äºæ•°æ®éªŒè¯
â”‚   â”œâ”€â”€ core/                 # æ ¸å¿ƒé…ç½®ï¼ˆå¦‚æ•°æ®åº“è¿æ¥ã€è®¾ç½®ï¼‰
â”‚   â””â”€â”€ utils/                # å·¥å…·å‡½æ•°
â”œâ”€â”€ tests/                    # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ pyproject.toml
â””â”€â”€ README.md</code></pre>
<p>è¿™ç§ç»“æ„æ¸…æ™°åˆ†ç¦»å…³æ³¨ç‚¹ï¼š<code>main.py</code>åˆå§‹åŒ–åº”ç”¨ï¼Œ<code>api/</code>å¤„ç†è·¯ç”±ï¼Œ<code>schemas/</code>å®šä¹‰æ•°æ®æ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œåœ¨<code>api/items.py</code>ä¸­ï¼š</p>
<pre class="language-python highlighter-hljs"><code>from fastapi import APIRouter

router = APIRouter()

@router.get("/items/")
def get_items():
    return [{"name": "Item 1"}, {"name": "Item 2"}]</code></pre>
<p>ç„¶ååœ¨<code>main.py</code>ä¸­å¯¼å…¥è·¯ç”±ï¼Œè®©é¡¹ç›®æ¨¡å—åŒ–ï¼Œä¾¿äºå›¢é˜Ÿåä½œã€‚</p>
<h2 style="color: rgba(44, 62, 80, 1)">âš–ï¸ FastAPI vs Flaskï¼šä¼˜åŠ¿ä¸ä¸è¶³</h2>
<p>FastAPIå¸¸è¢«æ‹¿æ¥ä¸Flaskæ¯”è¾ƒï¼Œä¸¤è€…éƒ½æ˜¯æµè¡Œçš„Python Webæ¡†æ¶ã€‚ä»¥ä¸‹æ˜¯å…³é”®å¯¹æ¯”ï¼š</p>
<p><strong style="color: rgba(186, 55, 42, 1)">FastAPIçš„ä¼˜åŠ¿ï¼š</strong></p>
<ul style="list-style-type: none; padding-left: 0">
<li>- <strong style="color: rgba(186, 55, 42, 1)">æ€§èƒ½é¢†å…ˆ</strong>ï¼šåŸºäºASGIï¼ŒåŸç”Ÿæ”¯æŒå¼‚æ­¥ï¼Œé€‚åˆé«˜å¹¶å‘åœºæ™¯ï¼›FlaskåŸºäºWSGIï¼Œé€šå¸¸åŒæ­¥è¿è¡Œã€‚</li>
<li>- <strong style="color: rgba(186, 55, 42, 1)">å¼€ç®±å³ç”¨çš„æ–‡æ¡£</strong>ï¼šè‡ªåŠ¨ç”ŸæˆOpenAPIè§„èŒƒæ–‡æ¡£ï¼Œæ— éœ€é¢å¤–é…ç½®ï¼›Flaskéœ€è¦æ‰©å±•å¦‚Flask-RESTXã€‚</li>
<li>- <strong style="color: rgba(186, 55, 42, 1)">ç°ä»£å¼€å‘ä½“éªŒ</strong>ï¼šæ·±åº¦é›†æˆç±»å‹æç¤ºï¼Œç¼–è¾‘å™¨æ”¯æŒå¥½ï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯ï¼›Flaskæ›´ä¾èµ–çº¦å®šå’Œæ‰©å±•ã€‚</li>
<li>- <strong style="color: rgba(186, 55, 42, 1)">æ•°æ®éªŒè¯è‡ªåŠ¨åŒ–</strong>ï¼šé€šè¿‡Pydanticè‡ªåŠ¨éªŒè¯è¯·æ±‚æ•°æ®ï¼›Flaské€šå¸¸éœ€è¦æ‰‹åŠ¨å¤„ç†æˆ–ç¬¬ä¸‰æ–¹åº“ã€‚</li>
</ul>
<p><strong style="color: rgba(186, 55, 42, 1)">FastAPIçš„ä¸è¶³ï¼š</strong></p>
<ul style="list-style-type: none; padding-left: 0">
<li>- <strong style="color: rgba(186, 55, 42, 1)">ç”Ÿæ€ç³»ç»Ÿè¾ƒæ–°</strong>ï¼šFlaskæœ‰æ›´ä¸°å¯Œçš„æ’ä»¶å’Œç¤¾åŒºèµ„æºï¼ŒFastAPIçš„ç¬¬ä¸‰æ–¹åº“ç›¸å¯¹è¾ƒå°‘ã€‚</li>
<li>- <strong style="color: rgba(186, 55, 42, 1)">å¼‚æ­¥å­¦ä¹ æ›²çº¿</strong>ï¼šå¦‚æœä½ ä¸ç†Ÿæ‚‰å¼‚æ­¥ç¼–ç¨‹ï¼Œå¯èƒ½éœ€è¦æ—¶é—´é€‚åº”ï¼›Flaskçš„åŒæ­¥æ¨¡å¼æ›´æ˜“ä¸Šæ‰‹ã€‚</li>
<li>- <strong style="color: rgba(186, 55, 42, 1)">é€‚ç”¨åœºæ™¯</strong>ï¼šFastAPIæ›´é€‚åˆAPIé©±åŠ¨å’Œå¾®æœåŠ¡é¡¹ç›®ï¼›Flaskåœ¨å°å‹å…¨æ ˆåº”ç”¨æˆ–åŸå‹å¼€å‘ä¸­æ›´çµæ´»ã€‚</li>
</ul>
<p>é€‰æ‹©å»ºè®®ï¼šå¦‚æœä½ è¿½æ±‚<strong style="color: rgba(186, 55, 42, 1)">é«˜æ€§èƒ½ã€ç°ä»£APIå¼€å‘</strong>ï¼ŒFastAPIæ˜¯ç†æƒ³é€‰æ‹©ï¼›å¦‚æœéœ€è¦<strong style="color: rgba(186, 55, 42, 1)">å¿«é€ŸåŸå‹æˆ–ä¾èµ–å¤§é‡ç°æœ‰æ’ä»¶</strong>ï¼ŒFlaskå¯èƒ½æ›´åˆé€‚ã€‚</p>
<h2 style="color: rgba(44, 62, 80, 1)">ğŸ’» å®Œæ•´ä»£ç å‚è€ƒ</h2>
<p>è¿™é‡Œæ˜¯ä¸€ä¸ªç»¼åˆç¤ºä¾‹ï¼ŒåŒ…å«è·¯ç”±ã€Pydanticæ¨¡å‹å’Œé”™è¯¯å¤„ç†ï¼Œå¸®ä½ å·©å›ºæ‰€å­¦ï¼š</p>
<pre class="language-python highlighter-hljs"><code>from fastapi import FastAPI, HTTPException
from pydantic import BaseModel
from typing import Optional

app = FastAPI(title="ç¤ºä¾‹API", version="1.0.0")

class Item(BaseModel):
    name: str
    price: float
    description: Optional[str] = None

items_db = []

@app.get("/")
def home():
    return {"message": "æ¬¢è¿ä½¿ç”¨FastAPI API"}

@app.get("/items/", summary="è·å–æ‰€æœ‰å•†å“")
def get_items():
    return items_db

@app.get("/items/{item_id}", summary="æ ¹æ®IDè·å–å•†å“")
def get_item(item_id: int):
    if item_id &lt; 0 or item_id &gt;= len(items_db):
        raise HTTPException(status_code=404, detail="å•†å“æœªæ‰¾åˆ°")
    return items_db[item_id]

@app.post("/items/", summary="åˆ›å»ºæ–°å•†å“")
def create_item(item: Item):
    items_db.append(item)
    return {"message": "å•†å“åˆ›å»ºæˆåŠŸ", "item": item}

@app.put("/items/{item_id}", summary="æ›´æ–°å•†å“")
def update_item(item_id: int, item: Item):
    if item_id &lt; 0 or item_id &gt;= len(items_db):
        raise HTTPException(status_code=404, detail="å•†å“æœªæ‰¾åˆ°")
    items_db[item_id] = item
    return {"message": "å•†å“æ›´æ–°æˆåŠŸ", "item": item}</code></pre>
<p>å°†ä»£ç ä¿å­˜ä¸º<code>main.py</code>ï¼Œè¿è¡Œåè®¿é—®<code>/docs</code>å³å¯æµ‹è¯•æ‰€æœ‰ç«¯ç‚¹ã€‚è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†FastAPIçš„<strong style="color: rgba(186, 55, 42, 1)">è·¯ç”±å®šä¹‰ã€æ¨¡å‹éªŒè¯å’Œé”™è¯¯å¤„ç†</strong>ï¼Œå®æˆ˜æ€§å¾ˆå¼ºã€‚</p>
<hr style="border-top: 1px solid rgba(221, 221, 221, 1); border-right: none; border-bottom: none; border-left: none; margin: 40px auto; width: 50%">
<p style="text-align: center; color: rgba(119, 119, 119, 1)">å–œæ¬¢æœ¬æ–‡ï¼Ÿä¸è¦é”™è¿‡âœ¨ï¼Œç‚¹èµğŸ‘æ”¶è—â­å…³æ³¨æˆ‘ğŸ‘†ï¼Œä¸€èµ·å­¦ä¹ æ›´å¤šæœ‰ç”¨çš„çŸ¥è¯†ï¼Œå®Œå–„ä½ æˆ‘çš„æŠ€èƒ½æ ‘ï¼</p>
</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-23 08:26">2025-12-23 08:25</span>&nbsp;
<a href="https://www.cnblogs.com/ymtianyu">æ›²å¹½</a>&nbsp;
é˜…è¯»(<span id="post_view_count">0</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19385007);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19385007', targetLink: 'https://www.cnblogs.com/ymtianyu/p/19385007', title: 'FastAPIå…¥é—¨ï¼šä»ç®€ä»‹åˆ°å®æˆ˜ï¼Œå¯¹æ¯”Flaskå¸®ä½ é€‰å¯¹æ¡†æ¶' })">ä¸¾æŠ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Unicodeä¸­å¦‚ä½•è¡¨ç¤ºæœªæ”¶å½•çš„ç”Ÿåƒ»å­— --æµ…è°ˆIDS ]]></title>
    <link>https://www.cnblogs.com/electrolyte/p/19384748</link>
    <guid>4dc46233306e48c8231464c17871974a</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/electrolyte/p/19384748" title="å‘å¸ƒäº 2025-12-22 23:37">
    <span role="heading" aria-level="2">Unicodeä¸­å¦‚ä½•è¡¨ç¤ºæœªæ”¶å½•çš„ç”Ÿåƒ»å­— --æµ…è°ˆIDS</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>Unicodeä¸­çš„å­—ç¬¦ç»“æ„è¡¨ç¤º</p>
<p>Unicodeæ ‡å‡†æ˜¯ä¸€ä¸ªå…¨çƒæ™®éæ¥å—çš„æ–‡å­—ç¼–ç æ ‡å‡†ï¼Œå®ƒçš„ç†æƒ³æ˜¯ç”¨ä¸€ä¸ªå·¨å¤§çš„å­—ç¬¦é›†æ¥è¡¨ç¤ºä¸–ç•Œä¸Šæ‰€æœ‰çš„å­—ç¬¦ï¼Œè¿™æ ·è®©å…¨çƒçš„æ–‡å­—äº¤æµç½®äºåŒä¸€ç§ä½“ç³»ä¹‹ä¸‹ï¼Œé¿å…ä»¥å‰å‡ºç°è¿‡çš„ä¸åŒå›½å®¶ä¸åŒå­—ç¬¦é›†äº’ä¸ç»Ÿä¸€é€ æˆçš„ä¹±ç ï¼Œæå¤§æ–¹ä¾¿äº†å…¨çƒçš„ç”µå­ä¿¡æ¯äº¤æµã€‚</p>
<p>æ±‰å­—æ˜¯Unicodeæ ‡å‡†ä¸­å†…å®¹æœ€ä¸ºåºå¤§çš„å­å­—ç¬¦é›†ï¼Œä¸è‹±è¯­ç­‰ä¸åŒï¼Œæ±‰å­—æ˜¯æ¯ä¸ªå­—ç¬¦æœ‰è‡ªå·±ç‹¬ç«‹çš„æ„æ€ï¼Œå› æ­¤å ç”¨çš„å­—ç¬¦æ•°é‡å·¨å¤§ã€‚ç›®å‰Unicode 17æ ‡å‡†ä¸­æœ‰15ä¸‡ä¸ªå­—ç¬¦ï¼Œä¸­æ—¥éŸ©ç»Ÿä¸€æ±‰å­—å°±å åˆ°äº†10ä¸‡ä¸ªä»¥ä¸Šã€‚</p>
<p>ä½†æ˜¯å³ä½¿æ˜¯æ”¶å­—é‡å¦‚æ­¤ä¹‹å¤§ï¼Œç›®å‰ä¹Ÿæ— æ³•æ¶µç›–æ±‰å­—çš„æ‰€æœ‰å­—ç¬¦ï¼Œç‰¹åˆ«æ˜¯æ‰‹ä¹¦æ—¶ä»£æœ‰æ— æ•°ç§ä¸åŒçš„æ±‰å­—å˜ä½“æˆ–è‡ªé€ å­—ï¼Œå› æ­¤æœ‰å¤§é‡å­—ç¬¦æ˜¯ç›®å‰æ²¡æœ‰æ”¶å½•è¿‡çš„ã€‚å¦å¤–è¿˜æœ‰ä¸€äº›æ–°é€ çš„å°‘é‡å­—ç¬¦ç”¨äºç§‘æŠ€é¢†åŸŸã€‚è¿™äº›æœªæ”¶å…¥æ ‡å‡†ä¸­çš„å­—ç¬¦ï¼Œå°±æ²¡æœ‰è§„å®šå®ƒä»¬çš„å­—å½¢ã€‚é‚£è¿™æ ·çš„å­—ç¬¦ï¼Œåº”è¯¥æ€ä¹ˆåœ¨ç”µè„‘æˆ–æ‰‹æœºç­‰æ–‡æœ¬ä¸­è¡¨ç¤ºå®ƒä»¬å‘¢ï¼Ÿï¼ˆæ–‡æœ¬æ–¹å¼ä¹‹å¤–ï¼Œè¿˜æ˜¯æœ‰å¾ˆå¤šåŠæ³•çš„ï¼Œå›¾ç‰‡ï¼ŒçŸ¢é‡å›¾å½¢ï¼Œç‰¹æ®Šçš„æ–‡ä»¶æ ¼å¼è¡¨ç¤ºç­‰ç­‰ï¼Œä½†æ–‡æœ¬æ˜¯æœ€ç®€æ´æœ€æ˜“äº¤æµçš„æ–¹å¼ï¼Œä½¿ç”¨é¢‘ç¹ï¼Œç”šè‡³è¿åŒ–å­¦ç»“æ„çš„è¡¨è¾¾éƒ½æœ‰äººå‘æ˜SMILESæ–‡æœ¬æ¥è¡¨è¾¾ï¼‰ã€‚</p>
<p>ä¸ºäº†åœ¨ç”µè„‘æ—¶ä»£è¡¨ç¤ºè¿™äº›å­—ç¬¦ï¼Œä»¥å‰ç”¨è¿‡è¿™æ ·çš„ç”¨æ³•ï¼Œæ¯”å¦‚æ­˜å­—åœ¨æ—©æœŸçš„å­—ä½“ä¸­ä¸å­˜åœ¨ï¼Œä¸ºäº†è¡¨ç¤ºè¿™ä¸ªå­—ï¼Œæˆ‘ä»¬å°±ç”¨æ–‡å­—è¡¨ç¤ºä¸ºâ€œå·¦ç„±å³æ¬ â€ï¼Œæˆ–è€…æ˜¯â€œç„±æ¬ â€ï¼Œè¿™æ˜¯ä¸å¾—å·²çš„æƒ…å†µä¸‹å˜é€šè¡¨ç¤ºï¼Œè®©è¯»è€…èƒ½å¤Ÿç†è§£çš„ä¸€ç§æ— å¥ˆçš„æ–¹æ³•ï¼Œå®ƒçš„ç¼ºç‚¹å°±æ˜¯ä¸å¤ªå¥½è¡¨è¾¾æ›´ä¸ºå¤æ‚çš„ç»“æ„ã€‚</p>
<p>å› æ­¤ï¼ŒUnicodeä¸­æä¾›äº†ä¸€ç§ç±»ä¼¼çš„æ–¹æ³•ï¼Œè‹±æ–‡å«åšIdeographic Description Characters, ä¸­æ–‡ç¿»è¯‘æˆ è¡¨æ„æ–‡å­—æè¿°ç¬¦ï¼Œé€šè¿‡è¿™äº›è¡¨ç¤ºç»“æ„çš„å­—ç¬¦ä¸æ±‰å­—éƒ¨ä»¶ç»“åˆæ¥è¡¨ç¤ºä¸€ä¸ªå­—çš„ç»“æ„ã€‚å› ä¸ºå®šä¹‰äº†ä¸“é—¨çš„è¡¨ç¤ºç»“æ„çš„å­—ç¬¦ï¼Œå…¶è¡¨è¾¾èƒ½åŠ›å°±å¤§å¤§å¢å¼ºäº†ã€‚</p>
<p>é¦–å…ˆçœ‹æ ‡å‡†ä¸­æä¾›çš„è¡¨ç¤ºç»“æ„çš„ä¸“ç”¨ç¬¦å·ï¼ˆæ¥è‡ªwikiç™¾ç§‘ï¼‰</p>
<p><img alt="IDS å®šä¹‰" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1298095/202512/1298095-20251222233558340-1090135818.png" class="lazyload"></p>
<p>è¿™ç§è¡¨ç¤ºæ³•çš„ç»“æ„ï¼Œæ˜¯å…ˆæ”¾ä¸€ä¸ªç»“æ„ç¬¦å·ï¼Œåé¢æä¾›è¡¨ç¤ºç»“æ„çš„éƒ¨ä»¶ã€‚</p>
<p>æ¯”å¦‚å‰é¢æåˆ°çš„æ­˜å­—ï¼Œç”¨IDSæ¥è¡¨ç¤ºè¡¨ç¤ºï¼Œå°±æ˜¯ â¿°ç„±æ¬ ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦è¡¨ç¤ºè¿™ä¸ªå­—æ˜¯å·¦å³ç»“æ„ï¼Œç›¸å½“äºæ–‡æœ¬æè¿°çš„ å·¦Xå³Yï¼›æ¥ç€æ˜¯ä»å·¦åˆ°å³ï¼ˆæˆ–ä»ä¸Šåˆ°ä¸‹ï¼‰çš„éƒ¨ä»¶ï¼Œåˆ†åˆ«æ˜¯ç„±ã€æ¬ ã€‚è¿™æ ·è¯»è€…å°±å¯ä»¥æ˜ç™½ï¼Œè¿™ä¸ªè¡¨ç¤ºä¸€ä¸ªç»„åˆå­—ï¼Œ å·¦å³ç»“æ„ï¼Œä»å·¦åˆ°å³åˆ†åˆ«æ˜¯ç„±å’Œæ¬ ã€‚</p>
<p>å½“ç„¶ï¼Œæœ‰äº›å­—å½¢æ¯”è¾ƒå¤æ‚ï¼Œå¯èƒ½ç”±å¤šä¸ªéƒ¨ä»¶æ„æˆï¼Œéœ€è¦æ›´è¿›ä¸€æ­¥çš„æ‹†åˆ†æ‰èƒ½è¡¨è¾¾å‡ºæ¥ï¼Œå› æ­¤ç”¨IDSçš„è¡¨ç¤ºæ³•å¯ä»¥è¿›è¡ŒåµŒå¥—è¡¨ç¤ºã€‚æ¯”å¦‚ç„±ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªå­—ç¬¦ï¼Œè¿™ç§å“å­—å‹çš„ç»“æ„ï¼Œå¯ä»¥æŠŠå®ƒæ‹†åˆ†ä¸ºä¸Šä¸‹ç»“æ„ï¼Œä¸‹éƒ¨ç»§ç»­æ‹†è§£ä¸ºå·¦å³ç»“æ„ã€‚å› æ­¤ â¿°ç„±æ¬  å¯ä»¥ç»§ç»­å†™æˆ</p>
<p>â¿°â¿±ç«â¿°ç«ç«æ¬ ã€‚</p>
<p>è¿™ç§ç»“æ„çš„è§£æé¡ºåºï¼Œä»å·¦åˆ°å³ï¼Œæ²¡æœ‰æ‹¬å·æ¥è¡¨è¾¾ä¼˜å…ˆçº§ã€‚ä¸Šé¢è¿™ä¸²å­—ç¬¦ï¼ŒæŒ‰ä»å·¦åˆ°å³è§£è¯»ï¼Œæ„æ€æ˜¯è¯´ï¼Œæ•´ä¸ªå­—æ˜¯å·¦å³ç»“æ„ï¼ˆâ¿°ï¼‰ï¼›å·¦è¾¹æ˜¯ä¸Šä¸‹ç»“æ„ï¼ˆâ¿±ï¼‰ï¼Œä¸Šé¢éƒ¨ä»¶æ˜¯ç«å­—ï¼Œå·¦è¾¹ä¸‹é¢éƒ¨ä»¶æ˜¯å·¦å³ç»„åˆçš„ç»“æ„ï¼ˆâ¿°ç«ç«ï¼‰ã€‚æœ€åï¼Œå³è¾¹æ˜¯ä¸ªæ¬ å­—ã€‚</p>
<p>è§£è¯»æ—¶è¦ç‰¹åˆ«æ³¨æ„è¡¨ç¤ºçš„ç»“æ„ä¸­æœ‰å‡ ä¸ªéƒ¨ä»¶ï¼Œåé¢å°±è¦å¯¹åº”æ¶ˆè€—å‡ ä¸ªéƒ¨ä»¶ã€‚ä¸Šä¾‹ä¸­ï¼Œå·¦è¾¹ä¸Šéƒ¨æ¶ˆè€—ä¸€ä¸ªç«å­—ï¼Œä¸‹é¢æ˜¯å·¦å³ç»“æ„ï¼Œåˆæ¶ˆè€—ä¸¤ä¸ªç«å­—ã€‚æœ€åå‰©ä¸‹çš„æ¬ å­—ï¼Œå¯¹åº”ç€å·¦å³ç»“æ„ä¸­çš„å³è¾¹éƒ¨ä»¶ã€‚</p>
<p>ä½ è‚¯å®šèƒ½æ˜ç™½ï¼Œæ‹†è§£çš„ç²’åº¦ä¸æ–¹æ³•å¹¶ä¸ä¸€å®šæ˜¯å”¯ä¸€çš„ï¼Œé€‰æ‹©çš„éƒ¨ä»¶ä¹Ÿæœªå¿…æ˜¯å”¯ä¸€çš„ï¼Œåªè¦èƒ½å‡†ç¡®è¡¨ç¤ºç»“æ„å°±è¡Œã€‚</p>
<p>è¿™ç§è¡¨ç¤ºæ–¹æ³•å¼€å§‹ç”¨æ—¶ï¼Œå¦‚æœç»“æ„æ¯”å¦‚å¤æ‚å¯èƒ½ä¸å¤ªå¥½æ‡‚ï¼Œéœ€è¦å¤šç»ƒä¹ ä¸€ä¸‹ã€‚ä¸ºäº†æ–¹ä¾¿ç»ƒä¹ ï¼Œæœ‰ä¸ªç½‘ç«™<a href="http://zi.tools" target="_blank" rel="noopener nofollow">zi.tools</a>æä¾›äº†è¿™ç§è¡¨ç¤ºæ³•çš„ç»ƒä¹ å·¥å…·ã€‚æœ‰æ„æ€çš„æ˜¯ï¼Œè¿™ä¸ªç½‘ç«™è¿˜æä¾›äº†æ£€ç´¢å…·æœ‰ç‰¹å®šç»“æ„çš„å­—ç¬¦çš„åŠŸèƒ½ï¼Œè´´ä¸ªå›¾å¤§å®¶å°±å¾ˆå®¹æ˜“æ˜ç™½äº†ï¼Œç”¨ï¼Ÿä»£è¡¨æœç´¢çš„éƒ¨ä»¶å³å¯ã€‚</p>
<p><img alt="é€šè¿‡IDSæŸ¥è¯¢ç±»ä¼¼ç»“æ„çš„æ±‰å­—" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1298095/202512/1298095-20251222233637085-124584678.png" class="lazyload"></p>
<p>è¿™é‡Œéšè—äº†ä¸€ä¸ªé—®é¢˜ï¼Œå³è¿™äº›è¡¨ç¤ºç»“æ„çš„ç¬¦å·å¦‚ä½•è¾“å…¥ï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ä½ åœ¨zi.toolsè¿™ä¸ªç½‘ç«™ä¸ŠæŠŠå­—æ‹†å¥½ï¼Œç„¶åæŠŠå³è¾¹çš„æ¡†å†…ç”Ÿæˆçš„æ–‡å­—å¤åˆ¶è¿‡æ¥ã€‚æˆ‘çŒœæµ‹ä¸€èˆ¬çš„è¾“å…¥æ³•åº”è¯¥ä¸åŒ…æ‹¬è¿™ç§ä¸å¤ªå¸¸ç”¨çš„ç¬¦å·ã€‚</p>
<p>æœ€åï¼Œå±•ç¤ºä¸€ä¸‹ğ°»ğ°»é¢çš„ğ°»å­—çš„IDSè¡¨ç¤ºï¼Œæ³¨æ„è¿™é‡Œæ˜¯æ–‡æœ¬è¡¨ç¤ºï¼š</p>
<p>â¿ºè¾¶â¿³ç©´â¿²æœˆâ¿±â¿²å¹ºè¨€å¹ºâ¿²é•¿é©¬é•¿åˆ‚å¿ƒ</p>
<p>ä¸‹é¢æ˜¯æ‹†è§£æ—¶çš„æˆªå›¾ï¼š</p>
<p><img alt="Biangå­—çš„IDSè¡¨ç¤º" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1298095/202512/1298095-20251222235226675-33799755.png" class="lazyload"></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.013888888888888888" data-date-updated="2025-12-22 23:57">2025-12-22 23:37</span>&nbsp;
<a href="https://www.cnblogs.com/electrolyte">dingxianghuan</a>&nbsp;
é˜…è¯»(<span id="post_view_count">63</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">1</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19384748);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19384748', targetLink: 'https://www.cnblogs.com/electrolyte/p/19384748', title: 'Unicodeä¸­å¦‚ä½•è¡¨ç¤ºæœªæ”¶å½•çš„ç”Ÿåƒ»å­— --æµ…è°ˆIDS' })">ä¸¾æŠ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Flinkæºç é˜…è¯»ï¼šé›†ç¾¤å¯åŠ¨ ]]></title>
    <link>https://www.cnblogs.com/Jackeyzhe/p/19384633</link>
    <guid>d9127f876e0823c699dcd2b74b4260d9</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Jackeyzhe/p/19384633" title="å‘å¸ƒäº 2025-12-22 22:44">
    <span role="heading" aria-level="2">Flinkæºç é˜…è¯»ï¼šé›†ç¾¤å¯åŠ¨</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/1828322/202512/1828322-20251222224421655-1662683197.png" alt="Flinkæºç é˜…è¯»ï¼šé›†ç¾¤å¯åŠ¨" class="desc_img">
        å‰æ–‡ä¸­ï¼Œæˆ‘ä»¬å·²ç»äº†è§£äº† Flink çš„ä¸‰ç§æ‰§è¡Œå›¾æ˜¯æ€ä¹ˆç”Ÿæˆçš„ã€‚ä»Šå¤©ç»§ç»­çœ‹ä¸€ä¸‹ Flink é›†ç¾¤æ˜¯å¦‚ä½•å¯åŠ¨çš„ã€‚
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>å‰æ–‡ä¸­ï¼Œæˆ‘ä»¬å·²ç»äº†è§£äº† Flink çš„ä¸‰ç§æ‰§è¡Œå›¾æ˜¯æ€ä¹ˆç”Ÿæˆçš„ã€‚ä»Šå¤©ç»§ç»­çœ‹ä¸€ä¸‹ Flink é›†ç¾¤æ˜¯å¦‚ä½•å¯åŠ¨çš„ã€‚</p>
<h3 id="å¯åŠ¨è„šæœ¬">å¯åŠ¨è„šæœ¬</h3>
<p>é›†ç¾¤å¯åŠ¨è„šæœ¬çš„ä½ç½®åœ¨ï¼š</p>
<pre><code class="language-bash">flink-dist/src/main/flink-bin/bin/start-cluster.sh
</code></pre>
<p>è„šæœ¬ä¼šè´Ÿè´£å¯åŠ¨ JobManager å’Œ TaskManagerï¼Œæˆ‘ä»¬ä¸»è¦å…³æ³¨ standalone å¯åŠ¨æ¨¡å¼ï¼Œå…·ä½“çš„æµç¨‹è§ä¸‹å›¾ã€‚</p>
<p><img alt="startcluster" loading="lazy" data-src="https://res.cloudinary.com/dxydgihag/image/upload/v1764258366/Blog/flink/11/start-cluster.png" class="lazyload"></p>
<p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡º JobManager æ˜¯é€šè¿‡ jobmanager.sh æ–‡ä»¶å¯åŠ¨çš„ï¼ŒTaskManager æ˜¯é€šè¿‡taskmanager.sh å¯åŠ¨çš„ï¼Œä¸¤è€…éƒ½è°ƒç”¨äº† flink-daemon.shï¼Œé€šè¿‡ä¼ é€’ä¸åŒçš„å‚æ•°ï¼Œæœ€ç»ˆè¿è¡Œä¸åŒçš„ Java ç±»ã€‚</p>
<pre><code class="language-bash">case $DAEMON in
    (taskexecutor)
        CLASS_TO_RUN=org.apache.flink.runtime.taskexecutor.TaskManagerRunner
    ;;

    (zookeeper)
        CLASS_TO_RUN=org.apache.flink.runtime.zookeeper.FlinkZooKeeperQuorumPeer
    ;;

    (historyserver)
        CLASS_TO_RUN=org.apache.flink.runtime.webmonitor.history.HistoryServer
    ;;

    (standalonesession)
        CLASS_TO_RUN=org.apache.flink.runtime.entrypoint.StandaloneSessionClusterEntrypoint
    ;;

    (standalonejob)
        CLASS_TO_RUN=org.apache.flink.container.entrypoint.StandaloneApplicationClusterEntryPoint
    ;;

    (sql-gateway)
        CLASS_TO_RUN=org.apache.flink.table.gateway.SqlGateway
        SQL_GATEWAY_CLASSPATH="`findSqlGatewayJar`":"`findFlinkPythonJar`"
    ;;

    (*)
        echo "Unknown daemon '${DAEMON}'. $USAGE."
        exit 1
    ;;
esac
</code></pre>
<h3 id="jobmanager-å¯åŠ¨æµç¨‹">JobManager å¯åŠ¨æµç¨‹</h3>
<p>åœ¨ StandaloneSessionClusterEntrypoint çš„ main æ–¹æ³•ä¸­ï¼Œä¸»è¦å°±æ˜¯åŠ è½½å„ç§é…ç½®å’Œç¯å¢ƒå˜é‡ï¼Œç„¶åè°ƒç”¨ ClusterEntrypoint.runClusterEntrypoint æ¥å¯åŠ¨é›†ç¾¤ã€‚è·Ÿç€è°ƒç”¨é“¾ä¸€ç›´æ‰¾åˆ° ClusterEntrypoint.runCluster æ–¹æ³•ï¼Œè¿™é‡Œä¼šå¯åŠ¨ ResourceManagerã€DispatcherRunner ç­‰ç»„ä»¶ã€‚</p>
<pre><code class="language-java">private void runCluster(Configuration configuration, PluginManager pluginManager)
        throws Exception {
    synchronized (lock) {
        // åˆå§‹åŒ–å„ç§æœåŠ¡
        initializeServices(configuration, pluginManager);

        // åˆ›å»º DispatcherResourceManagerComponentFactoryï¼Œ
        // åŒ…å«äº†ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶çš„ Factory
        // DispatcherRunnerFactoryã€ResourceManagerFactoryã€RestEndpointFactory
        final DispatcherResourceManagerComponentFactory
                dispatcherResourceManagerComponentFactory =
                        createDispatcherResourceManagerComponentFactory(configuration);

        // å¯åŠ¨ ResourceManagerã€DispatcherRunnerã€WebMonitorEndpoint
        clusterComponent =
                dispatcherResourceManagerComponentFactory.create(
                        configuration,
                        resourceId.unwrap(),
                        ioExecutor,
                        commonRpcService,
                        haServices,
                        blobServer,
                        heartbeatServices,
                        delegationTokenManager,
                        metricRegistry,
                        executionGraphInfoStore,
                        new RpcMetricQueryServiceRetriever(
                                metricRegistry.getMetricQueryServiceRpcService()),
                        failureEnrichers,
                        this);

        // å…³é—­æœåŠ¡
        clusterComponent
                .getShutDownFuture()
                .whenComplete(
                        (ApplicationStatus applicationStatus, Throwable throwable) -&gt; {
                            if (throwable != null) {
                                shutDownAsync(
                                        ApplicationStatus.UNKNOWN,
                                        ShutdownBehaviour.GRACEFUL_SHUTDOWN,
                                        ExceptionUtils.stringifyException(throwable),
                                        false);
                            } else {
                                // This is the general shutdown path. If a separate more
                                // specific shutdown was
                                // already triggered, this will do nothing
                                shutDownAsync(
                                        applicationStatus,
                                        ShutdownBehaviour.GRACEFUL_SHUTDOWN,
                                        null,
                                        true);
                            }
                        });
    }
}
</code></pre>
<p>ä¸‹é¢æ¥è¯¦ç»†çœ‹ä¸€ä¸‹è¿™å‡ ä¸ªæ–¹æ³•ï¼Œ initializeServices å°±æ˜¯è´Ÿè´£åˆå§‹åŒ–å„ç§æœåŠ¡ï¼Œæœ‰å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„å¯ä»¥ç€é‡å…³æ³¨ä¸‹ï¼š</p>
<pre><code class="language-java">// åˆå§‹åŒ–å¹¶å¯åŠ¨ä¸€ä¸ªé€šç”¨çš„ RPC Service
commonRpcService = RpcUtils.createRemoteRpcService(...);

// åˆ›å»ºä¸€ä¸ª IO çº¿ç¨‹æ± ï¼Œçº¿ç¨‹æ•°é‡ä½ CPU æ ¸æ•° * 4
ioExecutor = Executors.newFixedThreadPool(...);

// åˆ›å»º HA æœåŠ¡ç»„ä»¶ï¼Œæ ¹æ®é…ç½®åˆå§‹åŒ– Standaloneã€ZKã€K8S ä¸‰ç§
haServices = createHaServices(configuration, ioExecutor, rpcSystem);

// åˆ›å»ºå¹¶å¯åŠ¨ blobServer,blobServer å¯ä»¥ç†è§£ä¸ºæ˜¯ Flink å†…éƒ¨çš„
blobServer = BlobUtils.createBlobServer(...);
blobServer.start();

// åˆ›å»ºå¿ƒè·³æœåŠ¡
heartbeatServices = createHeartbeatServices(configuration);

// åˆ›å»ºä¸€ä¸ªç›‘æ§æœåŠ¡
processMetricGroup = MetricUtils.instantiateProcessMetricGroup(...);
</code></pre>
<p>createDispatcherResourceManagerComponentFactory è¿™ä¸ªæ–¹æ³•å°±æ˜¯åˆ›å»ºäº†ä¸‰ä¸ªå·¥å‚ç±»ï¼Œä¸éœ€è¦è¿‡å¤šä»‹ç»ã€‚æˆ‘ä»¬é‡ç‚¹å…³æ³¨ dispatcherResourceManagerComponentFactory.create æ–¹æ³•ï¼Œå³ ResourceManagerã€DispatcherRunnerã€WebMonitorEndpoint æ˜¯å¦‚ä½•å¯åŠ¨çš„ã€‚</p>
<h4 id="webmonitorendpoint">WebMonitorEndpoint</h4>
<p>WebMonitorEndpoint çš„å¯åŠ¨æµç¨‹å›¾å¦‚ä¸‹ï¼Œå›¾ä¸­ç»†ç®­å¤´ä»£è¡¨åŒä¸€ä¸ªæ–¹æ³•ä¸­é¡ºåºè°ƒç”¨ï¼Œç²—ç®­å¤´ä»£è¡¨è¿›å…¥ä¸Šä¸€ä¸ªæ–¹æ³•å†…éƒ¨çš„è°ƒç”¨ã€‚</p>
<p><img alt="webMonitorEndpoint" loading="lazy" data-src="https://res.cloudinary.com/dxydgihag/image/upload/v1764428386/Blog/flink/11/webmonitor.png" class="lazyload"></p>
<p>WebMonitorEndpoint åˆ›å»ºå’Œå¯åŠ¨æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>
<p>é€šè¿‡å·¥å‚åˆ›å»ºå‡ºäº† WebMonitorEndpointï¼Œè¿™é‡Œå°±æ˜¯æ¯”è¾ƒå¸¸è§„çš„åˆå§‹åŒ–æ“ä½œã€‚</p>
</li>
<li>
<p>è°ƒç”¨ WebMonitorEndpoint çš„ start æ–¹æ³•å¼€å§‹å¯åŠ¨ï¼Œstart æ–¹æ³•å†…éƒ¨å…ˆæ˜¯åˆ›å»ºäº†ä¸€ä¸ª Router å¹¶è°ƒç”¨ initializeHandlers åˆ›å»ºäº†ä¸€å¤§å † handlerï¼ˆæ˜¯çœŸçš„ä¸€å¤§å †ï¼Œè¿™ä¸ªæ–¹æ³•æœ‰æ¥è¿‘ä¸€åƒè¡Œï¼Œéƒ½æ˜¯åœ¨åˆ›å»º handlerï¼‰ï¼Œåˆ›å»ºå®Œæˆä¹‹åï¼Œå¯¹ handler è¿›è¡Œæ’åºå’Œå»é‡ï¼Œå†æŠŠå®ƒä»¬éƒ½æ³¨å†Œåˆ° Router ä¸­ã€‚è¿™é‡Œæ’åºæ˜¯ä¸ºäº†ç¡®ä¿è·¯ç”±åŒ¹é…çš„æ­£ç¡®æ€§ï¼Œæ’åºè§„åˆ™æ˜¯å…ˆé™æ€è·¯å¾„ï¼ˆ/jobs/overviewï¼‰ï¼ŒååŠ¨æ€è·¯å¾„ï¼ˆ/jobs/:jobidï¼‰ï¼Œå‡å¦‚æˆ‘ä»¬æ²¡æœ‰æ’åºï¼Œå…ˆæ³¨å†Œäº† /jobs/:jobid ï¼Œåæ³¨å†Œ /jobs/overview ï¼Œè¿™æ—¶å½“æˆ‘ä»¬è¯·æ±‚ /jobs/overview æ—¶ï¼Œå°±ä¼šè¢«é”™è¯¯çš„è·¯ç”±åˆ° /jobs/:jobid ä¸Šå»ã€‚</p>
</li>
<li>
<p>æ˜¯è°ƒç”¨ startInternal æ–¹æ³•ï¼Œåœ¨ startInternal æ–¹æ³•å†…éƒ¨åªæœ‰ leader é€‰ä¸¾å’Œå¯åŠ¨ç¼“å­˜æ¸…ç†ä»»åŠ¡ä¸¤ä¸ªæ­¥éª¤ã€‚</p>
</li>
</ol>
<h4 id="resourcemanager">ResourceManager</h4>
<p><img alt="ResourceManager" loading="lazy" data-src="https://res.cloudinary.com/dxydgihag/image/upload/v1764517440/Blog/flink/11/resourceManager.png" class="lazyload"></p>
<p>ResourceManager åˆ›å»ºå’Œå¯åŠ¨æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>
<p>è°ƒç”¨ ResourceManagerServiceImpl.create æ–¹æ³•åˆ›å»º ResourceManagerServiceï¼Œè¿™é‡Œåªæ˜¯åˆ›å»º ResourceManager æœåŠ¡ï¼Œå®é™…åˆ›å»º ResourceManager åœ¨åé¢çš„æ­¥éª¤ä¸­ã€‚</p>
</li>
<li>
<p>è°ƒç”¨ resourceManagerService.start æ–¹æ³•å¯åŠ¨æœåŠ¡ï¼Œè¿™é‡Œå°±æ˜¯å¯åŠ¨é€‰ä¸»æœåŠ¡ï¼Œstandalne æ¨¡å¼ç›´æ¥è°ƒç”¨ grantLeadership æˆä¸º leaderã€‚</p>
</li>
<li>
<p>æˆä¸º leader åï¼Œå°±ä¼šè°ƒç”¨ startNewLeaderResourceManager æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¸­ä¼šè°ƒç”¨ resourceManagerFactory.createResourceManager æ­£å¼åˆ›å»º resourceManagerã€‚åˆ›å»ºå®Œæˆåï¼Œå°±ä¼šè°ƒç”¨ resourceManager.start æ¥å¯åŠ¨å®ƒã€‚</p>
</li>
<li>
<p>å¯åŠ¨åä¼šå›è°ƒ ResourceManager.onStart æ–¹æ³•ã€‚è¿™é‡Œè°ƒç”¨ startHeartbeatServices å¯åŠ¨äº†ä¸¤ä¸ªå¿ƒè·³æœåŠ¡ï¼Œä¸€ä¸ªæ˜¯ ResourceManager å’Œ TaskManager ä¹‹é—´çš„å¿ƒè·³ï¼Œä¸€ä¸ªæ˜¯ ResourceManager å’Œ JobManager ä¹‹é—´çš„å¿ƒè·³ï¼Œç„¶åä¼šå¯åŠ¨ SlotManagerã€‚SlotManager å¯ä»¥è¢«å½“ä½œ Flink é›†ç¾¤çš„èµ„æºè°ƒåº¦ä¸­å¿ƒã€‚å®ƒä¼šè´Ÿè´£ç®¡ç†é›†ç¾¤ä¸­çš„æ‰€æœ‰ Slot èµ„æºï¼Œä¹Ÿéœ€è¦å“åº” JobManager çš„èµ„æºè¯·æ±‚ã€‚</p>
</li>
</ol>
<h4 id="dispatcherrunner">DispatcherRunner</h4>
<p><img alt="dispatcherRunner" loading="lazy" data-src="https://res.cloudinary.com/dxydgihag/image/upload/v1764578180/Blog/flink/11/dispatcherRunner.png" class="lazyload"></p>
<ol>
<li>
<p>å…ˆåˆ›å»ºå·¥å‚ï¼Œåˆ›å»ºå®Œæˆåè°ƒç”¨ DefaultDispatcherRunner.create åˆ›å»ºå‡º DispatcherRunnerï¼Œæ¥ç€æ˜¯è°ƒç”¨ start å¯åŠ¨é€‰ä¸»æµç¨‹ã€‚</p>
</li>
<li>
<p>é€‰ä¸»å®Œæˆåå°±è°ƒç”¨ startNewDispatcherLeaderProcess å¯åŠ¨æ–°çš„æµç¨‹ã€‚å¯åŠ¨æ–°çš„æµç¨‹éœ€è¦å…ˆå…³é—­æ—§æµç¨‹ï¼Œç„¶ååˆ›å»ºæ–°çš„ dispatcherLeaderProcessï¼Œå¹¶è°ƒç”¨ start å¯åŠ¨ã€‚</p>
</li>
<li>
<p>å¯åŠ¨æ—¶ï¼Œä¼šå›è°ƒ onStart æ–¹æ³•ã€‚</p>
</li>
<li>
<p>å›è°ƒæ–¹æ³•ä¸­ï¼Œå…ˆå¯åŠ¨ executionPlanStoreï¼Œå®ƒä¸»è¦æ˜¯ç”¨äºæŒä¹…åŒ– JobGraphã€‚ç„¶åæ¢å¤æ‰§è¡Œè®¡åˆ’ï¼Œé‡å»ºçŠ¶æ€ï¼ˆå¦‚æœæ˜¯ä»å¤±è´¥ä¸­æ¢å¤ï¼‰ï¼Œå®ä¾‹åŒ– Dispatcherï¼Œå®Œæˆä½œä¸šå¯åŠ¨ã€‚</p>
</li>
</ol>
<h3 id="taskmanager-å¯åŠ¨æµç¨‹">TaskManager å¯åŠ¨æµç¨‹</h3>
<p><img alt="taskManager" loading="lazy" data-src="https://res.cloudinary.com/dxydgihag/image/upload/v1764666573/Blog/flink/11/taskManager.png" class="lazyload"></p>
<p>TaskManager æ˜¯ Flink çš„æ‰§è¡ŒèŠ‚ç‚¹ï¼Œå…¶æœ€å°æ‰§è¡Œå•å…ƒæ˜¯ slotã€‚TaskManager å¯åŠ¨æµç¨‹ä¹Ÿä¸»è¦æ˜¯å’Œèµ„æºç®¡ç†ç›¸å…³ï¼ŒåŒ…æ‹¬ slot åˆ—è¡¨çš„ç®¡ç†å’Œä¸ ResourceManager çš„é€šä¿¡ã€‚</p>
<p>TaskManager å¯åŠ¨æµç¨‹å¤§ä½“åˆ†ä¸ºä»¥ä¸‹å‡ éƒ¨åˆ†ï¼š</p>
<ol>
<li>
<p>æ„å»ºå¹¶å¯åŠ¨ TaskManagerRunnerï¼ˆè“è‰²éƒ¨åˆ†ï¼‰</p>
</li>
<li>
<p>å¯åŠ¨ TaskExecutorï¼ˆçº¢è‰²éƒ¨åˆ†ï¼‰</p>
</li>
<li>
<p>å®Œæˆä¸ ResourceManager çš„è¿æ¥ï¼ˆæ©™è‰²éƒ¨åˆ†ï¼‰</p>
</li>
</ol>
<h4 id="å¯åŠ¨-taskmanagerrunner">å¯åŠ¨ TaskManagerRunner</h4>
<p>åœ¨ TaskManagerRunner çš„ start æ–¹æ³•ä¸­ï¼Œæœ‰ä¸¤ä¸ªæ­¥éª¤ï¼š</p>
<p>ç¬¬ä¸€æ­¥æ˜¯è°ƒç”¨ startTaskManagerRunnerServices åˆ›å»ºå’Œå¯åŠ¨äº†å¾ˆå¤šæœåŠ¡ï¼Œè¿™ä¸€ç‚¹å’Œ JobManager çš„å¯åŠ¨æµç¨‹æ¯”è¾ƒåƒã€‚è¿™äº›æœåŠ¡åŒ…æ‹¬äº†é«˜å¯ç”¨æœåŠ¡ã€å¿ƒè·³æœåŠ¡ã€ç›‘æ§æŒ‡æ ‡æœåŠ¡ç­‰ï¼Œè¿™é‡Œä¹Ÿåˆ›å»ºäº† taskExecutorServiceï¼Œå®ƒçš„å¯åŠ¨åœ¨ç¬¬äºŒæ­¥ã€‚</p>
<p>ç¬¬äºŒæ­¥æ˜¯è°ƒç”¨ taskExecutorService.start æ–¹æ³•ï¼Œå¯åŠ¨ TaskExecutorServiceï¼Œå®ƒå†…éƒ¨ä¸»è¦è´Ÿè´£å¯åŠ¨ TaskExecutorã€‚</p>
<h4 id="å¯åŠ¨-taskexecutor">å¯åŠ¨ TaskExecutor</h4>
<p>TaskExecutor æ˜¯ TaskManager å†…éƒ¨çš„ä¸€ä¸ªæ ¸å¿ƒç»„ä»¶ï¼Œè´Ÿè´£å¸®åŠ© TaskManager å®Œæˆ task çš„éƒ¨ç½²å’Œæ‰§è¡Œç­‰æ ¸å¿ƒæ“ä½œã€‚</p>
<p>åœ¨ä¸Šä¸€æ­¥è°ƒç”¨ taskExecutor çš„ start æ–¹æ³•åï¼Œä¼šå›è°ƒ onStart æ–¹æ³•ï¼Œè¿™é‡Œä¸»è¦æ˜¯ä¸‰ä¸ªæ­¥éª¤</p>
<ol>
<li>
<p>è¿æ¥ ResourceManager ä»¥åŠæ³¨å†Œç›‘å¬</p>
</li>
<li>
<p>å¯åŠ¨ taskSlotTable</p>
</li>
<li>
<p>è¿æ¥ JobMaster ä»¥åŠæ³¨å†Œç›‘å¬</p>
</li>
</ol>
<p>ç¬¬ä¸€æ­¥æˆ‘ä»¬åœ¨ä¸‹é¢è¯¦ç»†è§£é‡Šã€‚ç¬¬äºŒæ­¥å¯åŠ¨çš„ TaskSlotTable æ˜¯ TaskManager ä¸­è´Ÿè´£èµ„æºçš„æ ¸å¿ƒç»„ä»¶ï¼Œå®ƒç»´æŠ¤äº†ä¸€ä¸ª Slot åˆ—è¡¨ï¼Œç®¡ç†æ¯ä¸ª Slot çš„çŠ¶æ€ï¼Œè´Ÿè´£ Slot çš„åˆ†é…å’Œé‡Šæ”¾ã€‚ç¬¬ä¸‰æ­¥ä¸»è¦æ˜¯å’Œ JobMaster å»ºç«‹è¿æ¥å¹¶ä¿æŒå¿ƒè·³ï¼ŒåŒæ—¶ä¹Ÿä¼šæ¥æ”¶ Slot ç”³è¯·çš„è¯·æ±‚ã€‚</p>
<h4 id="è¿æ¥-resourcemanager">è¿æ¥ ResourceManager</h4>
<p>TaskExecutor æ³¨å†Œå®Œç›‘å¬ä¹‹åï¼Œä¼šæ”¶åˆ° ResourceManagerLeaderListener.notifyLeaderAddress æ–¹æ³•å›è°ƒã€‚å›è°ƒæ–¹æ³•ä¸­ï¼Œä¼šåˆ›å»ºä¸€ä¸ª TaskExecutorToResourceManagerConnection å®ä¾‹å¹¶å¯åŠ¨å®ƒã€‚è¿™ä¸ªç±»æ˜¯ç”¨æ¥å°† TaskExecutor æ³¨å†Œåˆ° ResourceManagerï¼Œæ³¨å†ŒæˆåŠŸä¼šå›è°ƒ onRegistrationSuccess æ–¹æ³•ã€‚å›è°ƒæˆåŠŸçš„æ–¹æ³•ä¸­ï¼ŒTaskManager ä¼šè°ƒç”¨ resourceManagerGateway.sendSlotReport å°† Slot çš„çŠ¶æ€è¿›è¡Œä¸ŠæŠ¥ã€‚</p>
<h3 id="æ€»ç»“">æ€»ç»“</h3>
<p>æœ¬æ–‡ä»‹ç»äº† Flink é›†ç¾¤åœ¨ Standalone æ¨¡å¼ä¸‹çš„å¯åŠ¨è¿‡ç¨‹ï¼Œå…¶ä¸­ JobManager é‡ç‚¹ä»‹ç»äº† WebMonitorEndpointã€ResourceManager å’Œ DispatcherRunner è¿™ä¸‰ä¸ªç»„ä»¶çš„å¯åŠ¨è¿‡ç¨‹ã€‚TaskManager ä¸»è¦ä»‹ç»äº†å¯åŠ¨ TaskExecutor å’Œè¿æ¥ ResourceManager çš„è¿‡ç¨‹ã€‚</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-22 22:45">2025-12-22 22:44</span>&nbsp;
<a href="https://www.cnblogs.com/Jackeyzhe">Jackeyzhe</a>&nbsp;
é˜…è¯»(<span id="post_view_count">40</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19384633);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19384633', targetLink: 'https://www.cnblogs.com/Jackeyzhe/p/19384633', title: 'Flinkæºç é˜…è¯»ï¼šé›†ç¾¤å¯åŠ¨' })">ä¸¾æŠ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ROS2ä¹‹URDFå»ºæ¨¡ ]]></title>
    <link>https://www.cnblogs.com/zyly/p/19384606</link>
    <guid>5d20f47004e2df5cd9a59e7d093453a6</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/zyly/p/19384606" title="å‘å¸ƒäº 2025-12-22 22:31">
    <span role="heading" aria-level="2">ROS2ä¹‹URDFå»ºæ¨¡</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p><code>ROS</code>æ˜¯æœºå™¨äººæ“ä½œç³»ç»Ÿï¼Œå½“ç„¶è¦ç»™æœºå™¨äººä½¿ç”¨å•¦ï¼Œä¸è¿‡åœ¨ä½¿ç”¨ä¹‹å‰ï¼Œè¿˜å¾—è®©<code>ROS</code>è®¤è¯†ä¸‹æˆ‘ä»¬ä½¿ç”¨çš„æœºå™¨äººï¼Œå¦‚ä½•æŠŠä¸€ä¸ªæœºå™¨äººä»‹ç»ç»™<code>ROS</code>å‘¢ï¼Ÿ</p>
<p>ä¸ºæ­¤ï¼Œ<code>ROS</code>ä¸“é—¨æä¾›äº†ä¸€ç§æœºå™¨äººå»ºæ¨¡æ–¹æ³•â€”â€”<code>URDF</code>ï¼Œç”¨æ¥æè¿°æœºå™¨äººå¤–è§‚ã€æ€§èƒ½ç­‰å„æ–¹é¢å±æ€§ã€‚</p>
<h3 id="ä¸€urdfè¯­æ³•">ä¸€ã€<code>URDF</code>è¯­æ³•</h3>
<h4 id="11-æœºå™¨äººçš„ç»„æˆ">1.1 æœºå™¨äººçš„ç»„æˆ</h4>
<p>å»ºæ¨¡æè¿°æœºå™¨äººçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬è‡ªå·±éœ€è¦å…ˆç†Ÿæ‚‰æœºå™¨äººçš„ç»„æˆå’Œå‚æ•°ï¼Œæ¯”å¦‚æœºå™¨äººä¸€èˆ¬æ˜¯ç”±ç¡¬ä»¶ç»“æ„ã€é©±åŠ¨ç³»ç»Ÿã€ä¼ æ„Ÿå™¨ç³»ç»Ÿã€æ§åˆ¶ç³»ç»Ÿå››å¤§éƒ¨åˆ†ç»„æˆï¼Œå¸‚é¢ä¸Šä¸€äº›å¸¸è§çš„æœºå™¨äººï¼Œæ— è®ºæ˜¯ç§»åŠ¨æœºå™¨äººè¿˜æ˜¯æœºæ¢°è‡‚ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥æŒ‰ç…§è¿™å››å¤§ç»„æˆéƒ¨åˆ†è¿›è¡Œåˆ†è§£ã€‚</p>
<img src="https://gitee.com/zyly2033/blog-pic/raw/master/202512222019489.png" style="zoom: 80%">
<p>å…¶ä¸­ï¼š</p>
<ul>
<li>ç¡¬ä»¶ç»“æ„å°±æ˜¯åº•ç›˜ã€å¤–å£³ã€ç”µæœºç­‰å®æ‰“å®å¯ä»¥çœ‹åˆ°çš„è®¾å¤‡ï¼›</li>
<li>é©±åŠ¨ç³»ç»Ÿå°±æ˜¯å¯ä»¥é©±ä½¿è¿™äº›è®¾å¤‡æ­£å¸¸ä½¿ç”¨çš„è£…ç½®ï¼Œæ¯”å¦‚ç”µæœºçš„é©±åŠ¨å™¨ï¼Œç”µæºç®¡ç†ç³»ç»Ÿç­‰ï¼›</li>
<li>ä¼ æ„Ÿç³»ç»ŸåŒ…æ‹¬ç”µæœºä¸Šçš„ç¼–ç å™¨ã€æ¿è½½çš„<code>IMU</code>ã€å®‰è£…çš„æ‘„åƒå¤´ã€é›·è¾¾ç­‰ç­‰ï¼Œä¾¿äºæœºå™¨äººæ„ŸçŸ¥è‡ªå·±çš„çŠ¶æ€å’Œå¤–éƒ¨çš„ç¯å¢ƒï¼›</li>
<li>æ§åˆ¶ç³»ç»Ÿå°±æ˜¯æˆ‘ä»¬å¼€å‘è¿‡ç¨‹çš„ä¸»è¦è½½ä½“äº†ï¼Œä¸€èˆ¬æ˜¯æ ‘è“æ´¾ã€ç”µè„‘ç­‰è®¡ç®—å¹³å°ï¼Œä»¥åŠé‡Œè¾¹çš„æ“ä½œç³»ç»Ÿå’Œåº”ç”¨è½¯ä»¶ã€‚</li>
</ul>
<p>æœºå™¨äººå»ºæ¨¡çš„è¿‡ç¨‹ï¼Œå…¶å®å°±æ˜¯æŒ‰ç…§ç±»ä¼¼çš„æ€è·¯ï¼Œé€šè¿‡å»ºæ¨¡è¯­è¨€ï¼ŒæŠŠæœºå™¨äººæ¯ä¸€ä¸ªéƒ¨åˆ†éƒ½æè¿°æ¸…æ¥šï¼Œå†ç»„åˆèµ·æ¥çš„è¿‡ç¨‹ã€‚</p>
<h4 id="12-ä»€ä¹ˆæ˜¯urdf">1.2 ä»€ä¹ˆæ˜¯<code>URDF</code></h4>
<p><code>URDF</code>ï¼ˆ<code>Unified Robot Description Format</code>ï¼Œç»Ÿä¸€æœºå™¨äººæè¿°æ ¼å¼ï¼‰æ˜¯ä¸€ç§<code>XML</code>æ ¼å¼çš„æ–‡ä»¶ï¼Œç”¨äºä»ç‰©ç†å’Œé€»è¾‘ä¸Šæè¿°ä¸€ä¸ªæœºå™¨äººæ¨¡å‹ã€‚</p>
<p>ä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºæœºå™¨äººçš„æ•°å­—è¯´æ˜ä¹¦æˆ–ä¸‰ç»´è£…é…å›¾ï¼Œå®ƒå‘Šè¯‰è®¡ç®—æœºï¼š</p>
<ul>
<li>æœºå™¨äººç”±å“ªäº›é›¶ä»¶ï¼ˆè¿æ†ã€å…³èŠ‚ï¼‰ç»„æˆï¼›</li>
<li>è¿™äº›é›¶ä»¶é•¿ä»€ä¹ˆæ ·ï¼ˆå½¢çŠ¶ã€å°ºå¯¸ã€é¢œè‰²ï¼‰ï¼›</li>
<li>é›¶ä»¶ä¹‹é—´å¦‚ä½•è¿æ¥ï¼ˆä½ç½®ã€æ—‹è½¬ã€è¿åŠ¨ç±»å‹ï¼‰ï¼›</li>
<li>é›¶ä»¶çš„ç‰©ç†å±æ€§ï¼ˆè´¨é‡ã€æƒ¯æ€§ï¼‰ï¼›</li>
</ul>
<h4 id="13-urdfç»„æˆ">1.3 <code>URDF</code>ç»„æˆ</h4>
<p><code>URDF</code>ä¸»è¦æè¿°ä¸¤å¤§æ ¸å¿ƒå…ƒç´ ï¼š</p>
<ul>
<li>è¿æ†ï¼ˆ<code>Link</code>ï¼‰ï¼šä»£è¡¨æœºå™¨äººçš„åˆšæ€§éƒ¨ä»¶ï¼Œå¦‚æœºæ¢°è‡‚çš„æ¯ä¸€èŠ‚è‡‚æ†ã€åº•ç›˜ã€è½®å­ã€ä¼ æ„Ÿå™¨æ”¯æ¶ç­‰ï¼ŒåŒ…æ‹¬ï¼š
<ul>
<li>è§†è§‰å±æ€§ï¼šå½¢çŠ¶ï¼ˆç«‹æ–¹ä½“ã€åœ†æŸ±ä½“ã€ç½‘æ ¼æ¨¡å‹ï¼‰ã€å°ºå¯¸ã€é¢œè‰²ã€çº¹ç†ï¼›</li>
<li>ç¢°æ’å±æ€§ï¼šç”¨äºç‰©ç†ä»¿çœŸçš„ç®€åŒ–å‡ ä½•å½¢çŠ¶ï¼›</li>
<li>æƒ¯æ€§å±æ€§ï¼šè´¨é‡ã€è½¬åŠ¨æƒ¯é‡ï¼ˆå¯¹ä»¿çœŸè‡³å…³é‡è¦ï¼‰ã€‚</li>
</ul>
</li>
<li>å…³èŠ‚ï¼ˆ<code>Joint</code>ï¼‰ï¼šå®šä¹‰è¿æ†ä¹‹é—´çš„è¿æ¥æ–¹å¼å’Œè¿åŠ¨å…³ç³»ï¼Œä¸»è¦ç±»å‹ï¼š
<ul>
<li>å›ºå®šå…³èŠ‚ï¼ˆ<code>fixed</code>ï¼‰ï¼šå®Œå…¨å›ºå®šè¿æ¥ï¼›</li>
<li>æ—‹è½¬å…³èŠ‚ï¼ˆ<code>revolute</code>ï¼‰ï¼šç»•å•è½´æ—‹è½¬ï¼Œæœ‰è§’åº¦é™åˆ¶ï¼ˆå¦‚æœºæ¢°è‡‚å…³èŠ‚ï¼‰ï¼›</li>
<li>è¿ç»­å…³èŠ‚ï¼ˆ<code>continuous</code>ï¼‰ï¼šæ— é™æ—‹è½¬ï¼ˆå¦‚è½®å­ï¼‰ï¼›</li>
<li>å¹³ç§»å…³èŠ‚ï¼ˆ<code>prismatic</code>ï¼‰ï¼šçº¿æ€§æ»‘åŠ¨ï¼›</li>
<li>å¹³é¢å…³èŠ‚ï¼ˆ<code>planar</code>ï¼‰ï¼šåœ¨å¹³é¢å†…è¿åŠ¨ï¼›</li>
<li>æµ®åŠ¨å…³èŠ‚ï¼ˆ<code>floating</code>ï¼‰ï¼šå®Œå…¨è‡ªç”±ï¼ˆ<code>6</code>è‡ªç”±åº¦ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<p>æœºå™¨äººæè¿°ç”±ä¸€ç»„è¿æ†å…ƒç´ å’Œä¸€ç»„å°†è¿æ†è¿æ¥èµ·æ¥çš„å…³èŠ‚å…ƒç´ ç»„æˆï¼›</p>
<img src="https://gitee.com/zyly2033/blog-pic/raw/master/202512222052818.png" style="zoom: 80%">
<p>å› æ­¤ï¼Œå…¸å‹çš„æœºå™¨äººæè¿°å¤§è‡´å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="language-xml">&lt;?xml version="1.0"?&gt;
&lt;?xml-model href="https://raw.githubusercontent.com/ros/urdfdom/master/xsd/urdf.xsd" ?&gt;
&lt;robot name="pr2" xmlns="http://www.ros.org"&gt;
  &lt;link&gt; ... &lt;/link&gt;
  &lt;link&gt; ... &lt;/link&gt;
  &lt;link&gt; ... &lt;/link&gt;

  &lt;joint&gt;  ....  &lt;/joint&gt;
  &lt;joint&gt;  ....  &lt;/joint&gt;
  &lt;joint&gt;  ....  &lt;/joint&gt;
&lt;/robot&gt;
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>URDF</code>æ ¼å¼çš„æ ¹å…ƒç´ æ˜¯ä¸€ä¸ª <code>&lt;robot&gt;</code> å…ƒç´ ã€‚</p>
<h5 id="131-linkå…ƒç´ ">1.3.1 <code>link</code>å…ƒç´ </h5>
<p><code>link</code>å…ƒç´ æè¿°äº†ä¸€ä¸ªå…·æœ‰æƒ¯æ€§ã€è§†è§‰ç‰¹å¾å’Œç¢°æ’å±æ€§çš„åˆšä½“ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ª<code>link</code>å…ƒç´ çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="language-xml">&lt;link name="my_link"&gt;
  &lt;inertial&gt;
    &lt;origin xyz="0 0 0.5" rpy="0 0 0"/&gt;
    &lt;mass value="1"/&gt;
    &lt;inertia ixx="100"  ixy="0"  ixz="0" iyy="100" iyz="0" izz="100" /&gt;
  &lt;/inertial&gt;

  &lt;visual&gt;
    &lt;origin xyz="0 0 0" rpy="0 0 0" /&gt;
    &lt;geometry&gt;
      &lt;box size="1 1 1" /&gt;
    &lt;/geometry&gt;
    &lt;material name="Cyan"&gt;
      &lt;color rgba="0 1.0 1.0 1.0"/&gt;
    &lt;/material&gt;
  &lt;/visual&gt;

  &lt;collision&gt;
    &lt;origin xyz="0 0 0" rpy="0 0 0"/&gt;
    &lt;geometry&gt;
      &lt;cylinder radius="1" length="0.5"/&gt;
    &lt;/geometry&gt;
  &lt;/collision&gt;
&lt;/link&gt;
</code></pre>
<img src="https://gitee.com/zyly2033/blog-pic/raw/master/202512222058481.png" style="zoom: 80%">
<p><code>link</code>å…ƒç´ æœ‰ä¸€ä¸ªå±æ€§ï¼Œå³<code>name</code>ï¼ˆå¿…é€‰ï¼‰ï¼šç”¨æ¥æè¿°è¿æ†æœ¬èº«çš„åç§°.ã€‚æ­¤å¤–ï¼Œ<code>link</code>åŒ…å«è‹¥å¹²éƒ¨å…ƒç´ ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¸€ä¸€ä»‹ç»ã€‚</p>
<h6 id="1311--æƒ¯æ€§å±æ€§inertial">1.3.1.1  æƒ¯æ€§å±æ€§<code>inertial</code></h6>
<p><code>inertial</code>ï¼ˆå¯é€‰ï¼‰ï¼šç”¨äºæè¿°è¿æ†çš„è´¨é‡ã€å…¶è´¨å¿ƒçš„ä½ç½®ä»¥åŠå…¶ä¸­å¿ƒæƒ¯æ€§å±æ€§ã€‚</p>
<p>å…¶ä¸‹å¯ä»¥åŒ…å«å¦‚ä¸‹å…ƒç´ ï¼š</p>
<ul>
<li><code>origin</code>ï¼ˆå¯é€‰ï¼‰ï¼šæ­¤ä½å§¿ï¼ˆå¹³ç§»ã€æ—‹è½¬ï¼‰æè¿°äº†è¿æ†è´¨å¿ƒåæ ‡ç³»<code>C</code>ç›¸å¯¹äºè¿æ†åæ ‡ç³»<code>L</code>çš„ä½ç½®å’Œæ–¹å‘ã€‚
<ul>
<li><code>xyz</code> (å¯é€‰)ï¼šè¡¨ç¤ºä»<code>Lo</code>ï¼ˆè¿æ†åæ ‡ç³»åŸç‚¹ï¼‰åˆ°<code>Co</code>ï¼ˆè¿æ†è´¨å¿ƒï¼‰çš„ä½ç½®å‘é‡ï¼Œå½¢å¼ä¸º <code>x LÌ‚x + y LÌ‚y + z LÌ‚z</code>ï¼Œå…¶ä¸­ <code>LÌ‚x</code>ã€<code>LÌ‚y</code>ã€<code>LÌ‚z</code> æ˜¯è¿æ†åæ ‡ç³»<code>L</code>çš„æ­£äº¤å•ä½å‘é‡ï¼›</li>
<li><code>rpy</code>ï¼ˆå¯é€‰ï¼‰ï¼šè¡¨ç¤º<code>C</code>çš„å•ä½å‘é‡<code>CÌ‚x</code>ã€<code>CÌ‚y</code>ã€<code>CÌ‚z</code>ç›¸å¯¹äºè¿æ†åæ ‡ç³»<code>L</code>çš„æ–¹å‘ï¼Œä»¥æ¬§æ‹‰æ—‹è½¬ï¼ˆæ¨ªæ»š<code>roll</code>ã€ä¿¯ä»°<code>pitch</code>ã€åèˆª<code>yaw</code>ï¼‰åºåˆ—è¡¨ç¤ºï¼Œå•ä½ä¸ºå¼§åº¦ã€‚æ³¨æ„ï¼š<code>CÌ‚x</code>ã€<code>CÌ‚y</code>ã€<code>CÌ‚z</code>ä¸éœ€è¦ä¸è¿æ†çš„æƒ¯æ€§ä¸»è½´å¯¹é½ï¼›</li>
</ul>
</li>
<li><code>mass</code>ï¼šè¿æ†çš„è´¨é‡ç”±è¯¥å…ƒç´ çš„<code>value</code>å±æ€§è¡¨ç¤ºï¼›</li>
<li><code>inertia</code>ï¼šæ­¤è¿æ†å…³äº<code>Co</code>ï¼ˆè¿æ†è´¨å¿ƒï¼‰çš„æƒ¯æ€§çŸ©<code>ixx</code>ã€<code>iyy</code>ã€<code>izz</code>å’Œæƒ¯æ€§ç§¯ <code>ixy</code>ã€<code>ixz</code>ã€<code>iyz</code>ï¼Œè¿™äº›å€¼å¯¹åº”äºå›ºå®šåœ¨è´¨å¿ƒåæ ‡ç³»<code>C</code>ä¸­çš„å•ä½å‘é‡<code>CÌ‚x</code>ã€<code>CÌ‚y</code>ã€<code>CÌ‚z</code>ã€‚æ³¨æ„ï¼š<code>CÌ‚x</code>ã€<code>CÌ‚y</code>ã€<code>CÌ‚z</code>ç›¸å¯¹äº<code>LÌ‚x</code>ã€<code>LÌ‚y</code>ã€<code>LÌ‚z</code> çš„æ–¹å‘ç”± <code>&lt;origin&gt;</code> æ ‡ç­¾ä¸­çš„<code>rpy</code>å€¼æŒ‡å®šã€‚</li>
</ul>
<h6 id="1312-è§†è§‰å±æ€§visual">1.3.1.2 è§†è§‰å±æ€§<code>visual</code></h6>
<p><code>visual</code>ï¼ˆå¯é€‰ï¼‰ï¼šè¿æ†çš„è§†è§‰å±æ€§ï¼Œæ­¤å…ƒç´ æŒ‡å®šäº†ç”¨äºå¯è§†åŒ–ç›®çš„çš„å¯¹è±¡å½¢çŠ¶ï¼ˆé•¿æ–¹ä½“ã€åœ†æŸ±ä½“ç­‰ï¼‰ã€‚</p>
<p>æ³¨æ„ï¼šåŒä¸€ä¸ªè¿æ†å¯ä»¥å­˜åœ¨å¤šä¸ª <code>&lt;visual&gt;</code> æ ‡ç­¾å®ä¾‹ã€‚å®ƒä»¬å®šä¹‰çš„å‡ ä½•ä½“çš„å¹¶é›†å½¢æˆäº†è¯¥è¿æ†çš„è§†è§‰è¡¨ç¤ºã€‚</p>
<p>å…¶ä¸‹å¯ä»¥åŒ…å«å¦‚ä¸‹å…ƒç´ ï¼š</p>
<ul>
<li><code>origin</code> (å¯é€‰)ï¼šè§†è§‰å…ƒç´ ç›¸å¯¹äºè¿æ†åæ ‡ç³»çš„å‚è€ƒåæ ‡ç³»ï¼›
<ul>
<li><code>xyz</code> (å¯é€‰)ï¼šåˆ†åˆ«æ˜¯<code>x</code>ã€<code>y</code>ã€<code>z</code>æ–¹å‘ä¸Šçš„å¹³ç§»ï¼›</li>
<li><code>py</code> (å¯é€‰)ï¼šè¡¨ç¤ºå›ºå®šè½´çš„æ¨ªæ»šã€ä¿¯ä»°å’Œåèˆªè§’åº¦ï¼Œå•ä½ä¸ºå¼§åº¦ï¼›</li>
</ul>
</li>
<li><code>geometry</code>ï¼ˆå¿…é€‰ï¼‰ï¼šè¡¨ç¤ºå‡ ä½•å½¢çŠ¶ï¼Œå¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š
<ul>
<li><code>&lt;box&gt;</code>
<ul>
<li><code>size</code>å±æ€§åŒ…å«é•¿æ–¹ä½“çš„ä¸‰ä¸ªè¾¹é•¿ï¼Œé•¿æ–¹ä½“çš„åŸç‚¹ä½äºå…¶ä¸­å¿ƒï¼›</li>
</ul>
</li>
<li><code>&lt;cylinder&gt;</code>
<ul>
<li>æŒ‡å®šåŠå¾„å’Œé•¿åº¦ã€‚åœ†æŸ±ä½“çš„åŸç‚¹ä½äºå…¶ä¸­å¿ƒï¼›</li>
</ul>
</li>
<li><code>&lt;sphere&gt;</code>
<ul>
<li>æŒ‡å®šåŠå¾„ã€‚çƒä½“çš„åŸç‚¹ä½äºå…¶ä¸­å¿ƒï¼›</li>
</ul>
</li>
<li><code>&lt;mesh&gt;</code>
<ul>
<li>ç”±æ–‡ä»¶åæŒ‡å®šçš„ä¸‰è§’ç½‘æ ¼å…ƒç´ ï¼Œä»¥åŠä¸€ä¸ªå¯é€‰çš„ç¼©æ”¾æ¯”ä¾‹ï¼Œç”¨äºç¼©æ”¾ç½‘æ ¼çš„è½´å¯¹é½è¾¹ç•Œæ¡†ã€‚ä»»ä½•å‡ ä½•æ ¼å¼éƒ½å¯ä»¥æ¥å—ï¼Œä½†å…·ä½“åº”ç”¨ç¨‹åºçš„å…¼å®¹æ€§å–å†³äºå®ç°ã€‚å¯¹äºæœ€ä½³çº¹ç†å’Œé¢œè‰²æ”¯æŒï¼Œæ¨èçš„æ ¼å¼æ˜¯ <code>Collada .dae</code>æ–‡ä»¶ã€‚å¼•ç”¨åŒä¸€æ¨¡å‹çš„æœºå™¨ä¹‹é—´ä¸ä¼šä¼ è¾“ç½‘æ ¼æ–‡ä»¶ã€‚å®ƒå¿…é¡»æ˜¯æœ¬åœ°æ–‡ä»¶ã€‚åœ¨æ–‡ä»¶åå‰åŠ ä¸Š <code>package://&lt;packagename&gt;/&lt;path&gt;</code> å¯ä»¥ä½¿ç½‘æ ¼æ–‡ä»¶çš„è·¯å¾„ç›¸å¯¹äºåŒ… <code>&lt;packagename&gt;</code>ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><code>material</code>ï¼ˆå¯é€‰ï¼‰ï¼šè§†è§‰å…ƒç´ çš„æè´¨ï¼Œå…¶<code>name</code>å±æ€§å¯ä»¥ç”¨äºæŒ‡å®šæè´¨çš„åç§°ï¼›
<ul>
<li><code>&lt;color&gt;</code> (å¯é€‰)
<ul>
<li><code>rgba</code>ç”±ä¸€ç»„å››ä¸ªæ•°å­—ï¼ˆä»£è¡¨çº¢/ç»¿/è“/é€æ˜åº¦<code>alpha</code>ï¼‰æŒ‡å®šçš„æè´¨é¢œè‰²ï¼Œæ¯ä¸ªæ•°å­—çš„èŒƒå›´ä¸º [<code>0</code>,<code>1</code>]ï¼›</li>
</ul>
</li>
<li><code>&lt;texture&gt;</code> (å¯é€‰)
<ul>
<li>æè´¨çš„çº¹ç†ç”±æ–‡ä»¶åæŒ‡å®šã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<h6 id="1313-ç¢°æ’å±æ€§collision">1.3.1.3 ç¢°æ’å±æ€§<code>collision</code></h6>
<p><code>collision</code>ç”¨äºæè¿°ç¢°æ’å‚æ•°ï¼Œé‡Œè¾¹çš„å†…å®¹ä¼¼ä¹å’Œ<code>&lt;visual&gt;</code>ä¸€æ ·ï¼Œä¹Ÿæœ‰<code>&lt;geometry&gt;</code>å’Œ<code>&lt;origin&gt;</code>ï¼Œçœ‹ä¼¼ç›¸åŒï¼Œå…¶å®åŒºåˆ«è¿˜æ˜¯æ¯”è¾ƒå¤§çš„ï¼›</p>
<ul>
<li><code>origin</code> (å¯é€‰)ï¼šç¢°æ’å…ƒç´ ç›¸å¯¹äºè¿æ†åæ ‡ç³»çš„å‚è€ƒåæ ‡ç³»ï¼›
<ul>
<li><code>xyz</code> (å¯é€‰)ï¼šåˆ†åˆ«æ˜¯<code>x</code>ã€<code>y</code>ã€<code>z</code>æ–¹å‘ä¸Šçš„å¹³ç§»ï¼›</li>
<li><code>py</code> (å¯é€‰)ï¼šè¡¨ç¤ºå›ºå®šè½´çš„æ¨ªæ»šã€ä¿¯ä»°å’Œåèˆªè§’åº¦ï¼Œå•ä½ä¸ºå¼§åº¦ï¼›</li>
</ul>
</li>
<li><code>geometry</code>ï¼šè¯·å‚è§ä¸Šè¿°è§†è§‰å…ƒç´ ä¸­çš„å‡ ä½•æè¿°ã€‚</li>
</ul>
<h5 id="132-jointå…ƒç´ ">1.3.2 <code>joint</code>å…ƒç´ </h5>
<p><code>joint</code>å…ƒç´ æè¿°äº†å…³èŠ‚çš„è¿åŠ¨å­¦å’ŒåŠ¨åŠ›å­¦ç‰¹æ€§ï¼Œå¹¶æŒ‡å®šäº†å…³èŠ‚çš„å®‰å…¨é™åˆ¶ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ª<code> joint</code>å…ƒç´ çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="language-xml">&lt;joint name="my_joint" type="floating"&gt;
   &lt;origin xyz="0 0 1" rpy="0 0 3.1416"/&gt;
   &lt;parent link="link1"/&gt;
   &lt;child link="link2"/&gt;

   &lt;calibration rising="0.0"/&gt;
   &lt;dynamics damping="0.0" friction="0.0"/&gt;
   &lt;limit effort="30" velocity="1.0" lower="-2.2" upper="0.7" /&gt;
   &lt;safety_controller k_velocity="10" k_position="15" soft_lower_limit="-2.0" soft_upper_limit="0.5" /&gt;
&lt;/joint&gt;
</code></pre>
<p>ä¸‹é¢å›¾ä¸­ï¼Œè“è‰²å…³èŠ‚è¡¨ç¤ºå‡ºä¸€ä¸ªè¿åŠ¨çš„è½´ï¼Œè“è‰²å…³èŠ‚æ˜¯å¯ä»¥å›´ç»•è“è‰²çš„è½´æ—‹è½¬çš„ï¼Œä¹Ÿå°±æ˜¯<code>child</code>è¿™ä¸ª<code>link</code>æ˜¯å¯ä»¥å›´ç»•<code>joint</code>ä¸Šä¸‹æ—‹è½¬ã€‚</p>
<p><code>joint</code>è¿æ¥ä¸¤ä¸ª<code>link</code>ï¼Œéœ€è¦åˆ†ä¸€ä¸ªä¸»æ¬¡å…³ç³»ï¼Œä¸»å…³èŠ‚æ˜¯<code>parent link</code>ï¼Œå­å…³èŠ‚æ˜¯<code>child link</code>ï¼Œ åœ¨<code>xml</code>å½¢å¼çš„æè¿°ä¸­è¿™ä¸ªä¸¤ä¸ª<code>link</code>æ˜¯å¿…é¡»å­˜åœ¨çš„ã€‚</p>
<img src="https://gitee.com/zyly2033/blog-pic/raw/master/202512222129254.png" style="zoom: 80%">
<p><code>joint</code>å…ƒç´ æœ‰ä¸¤ä¸ªå±æ€§ï¼š</p>
<ul>
<li>
<p><code>name</code>ï¼ˆå¿…é¡»ï¼‰ï¼šæŒ‡å®šå…³èŠ‚çš„å”¯ä¸€åç§°ï¼›</p>
</li>
<li>
<p><code>type</code>ï¼ˆå¿…é¡»ï¼‰ï¼šæŒ‡å®šå…³èŠ‚çš„ç±»å‹ï¼Œç±»å‹å¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼›</p>
<ul>
<li>
<p><code>revolute</code> ï¼šæ—‹è½¬å…³èŠ‚ï¼Œå’Œ<code>continuous</code>ç±»å‹çš„åŒºåˆ«åœ¨äºä¸èƒ½æ— é™æ—‹è½¬ï¼Œè€Œæ˜¯å¸¦æœ‰è§’åº¦é™åˆ¶ï¼Œæ¯”å¦‚æœºæ¢°è‡‚çš„ä¸¤ä¸ªè¿æ†ï¼Œå°±å±äºè¿™ç§è¿åŠ¨ï¼›</p>
</li>
<li>
<p><code>continuous</code>ï¼šæ—‹è½¬å…³èŠ‚ï¼Œå¯ä»¥å›´ç»•å•è½´æ— é™æ—‹è½¬ï¼›æ¯”å¦‚å°è½¦çš„è½®å­ï¼Œå°±å±äºè¿™ç§ç±»å‹ï¼›</p>
</li>
<li>
<p><code>prismatic</code>ï¼šæ»‘åŠ¨å…³èŠ‚ï¼Œå¯ä»¥æ²¿æŸä¸€ä¸ªè½´å¹³ç§»ï¼Œä¹Ÿå¸¦æœ‰ä½ç½®çš„æé™ï¼Œä¸€èˆ¬ç›´çº¿ç”µæœºå°±æ˜¯è¿™ç§è¿åŠ¨æ–¹å¼ï¼›</p>
</li>
<li>
<p><code>fixed</code>ï¼šå›ºå®šå…³èŠ‚ï¼Œæ˜¯å”¯ä¸€ä¸€ç§ä¸å…è®¸è¿åŠ¨çš„å…³èŠ‚ï¼Œä¸è¿‡ä½¿ç”¨è¿˜æ˜¯æ¯”è¾ƒé¢‘ç¹çš„ï¼Œæ¯”å¦‚ç›¸æœºè¿™ä¸ªè¿æ†ï¼Œå®‰è£…åœ¨æœºå™¨äººä¸Šï¼Œç›¸å¯¹ä½ç½®æ˜¯ä¸ä¼šå˜åŒ–çš„ï¼Œæ­¤æ—¶ä½¿ç”¨çš„è¿æ¥æ–¹å¼å°±æ˜¯<code>fixed</code>ï¼›</p>
</li>
<li>
<p><code>floating</code>ï¼šæµ®åŠ¨å…³èŠ‚ï¼Œå…è®¸è¿›è¡Œå¹³ç§»ã€æ—‹è½¬è¿åŠ¨ï¼›</p>
</li>
<li>
<p><code>planar</code> ï¼šå¹³é¢å…³èŠ‚ï¼Œå…è®¸åœ¨å¹³é¢æ­£äº¤æ–¹å‘ä¸Šå¹³ç§»æˆ–è€…æ—‹è½¬ï¼›</p>
</li>
</ul>
</li>
</ul>
<p>æ­¤å¤–ï¼Œ<code>joint</code>åŒ…å«è‹¥å¹²éƒ¨å…ƒç´ ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æŒ‘é€‰éƒ¨åˆ†ä»‹ç»ä»‹ç»ã€‚</p>
<h6 id="1321-origin">1.3.2.1 <code>origin</code></h6>
<p><code>origin</code>ï¼ˆå¯é€‰ï¼‰ï¼šè¡¨ç¤ºä»çˆ¶è¿æ†åˆ°å­è¿æ†çš„å˜æ¢ï¼Œå…ƒç´ å±æ€§æœ‰ï¼š</p>
<ul>
<li><code>xyz</code> (å¯é€‰)ï¼šè¡¨ç¤º<code>x</code>ã€<code>y</code>ã€<code>z</code> åç§»é‡ï¼Œæ‰€æœ‰ä½ç½®å‡ä»¥ç±³ä¸ºå•ä½æŒ‡å®šï¼›</li>
<li><code>rpy</code> (å¯é€‰)ï¼šè¡¨ç¤ºç»•å›ºå®šè½´çš„æ—‹è½¬ï¼šå…ˆç»•<code>x</code>è½´æ¨ªæ»šï¼ˆ<code>roll</code>ï¼‰ï¼Œç„¶åç»•<code>y</code>è½´ä¿¯ä»°ï¼ˆ<code>pitch</code>ï¼‰ï¼Œæœ€åç»•<code>z</code>è½´åèˆªï¼ˆ<code>yaw</code>ï¼‰ï¼Œæ‰€æœ‰è§’åº¦å‡ä»¥å¼§åº¦ä¸ºå•ä½æŒ‡å®šã€‚</li>
</ul>
<h6 id="1322-parent">1.3.2.2 <code>parent</code></h6>
<p><code>parent</code>æè¿°çˆ¶è¿æ†åç§°ï¼Œå…ƒç´ å±æ€§æœ‰ï¼š</p>
<ul>
<li><code>link</code>ï¼šåœ¨æœºå™¨äººæ ‘ç»“æ„ä¸­ä½œä¸ºæ­¤è¿æ†çˆ¶è¿æ†çš„è¿æ†åç§°ã€‚</li>
</ul>
<h6 id="1323-child">1.3.2.3 <code>child</code></h6>
<p><code>child</code>æè¿°å­è¿æ†åç§°ï¼Œå…ƒç´ å±æ€§æœ‰ï¼š</p>
<ul>
<li><code>link</code>ï¼šä½œä¸ºå­è¿æ†çš„è¿æ†åç§°ã€‚</li>
</ul>
<h6 id="1324-calibration-">1.3.2.4 <code>calibration </code></h6>
<p>å…³èŠ‚çš„å‚è€ƒä½ç½®ï¼Œç”¨æ¥æ ¡å‡†å…³èŠ‚çš„ç»å¯¹ä½ç½®ã€‚</p>
<h6 id="1325-dynamics--">1.3.2.5 <code>dynamics  </code></h6>
<p>æè¿°å…³èŠ‚çš„ç‰©ç†å±æ€§ï¼Œä¾‹å¦‚é˜»å°¼å€¼ã€ç‰©ç†é™æ‘©æ“¦åŠ›ç­‰ï¼Œç»å¸¸åœ¨åŠ¨åŠ›å­¦ä»¿çœŸä¸­ç”¨åˆ°ã€‚</p>
<h6 id="1326-limit---">1.3.2.6 <code>limit   </code></h6>
<p>æè¿°è¿åŠ¨çš„ä¸€äº›æé™å€¼ï¼ŒåŒ…æ‹¬å…³èŠ‚è¿åŠ¨çš„ä¸Šä¸‹é™ä½ç½®ã€é€Ÿåº¦é™åˆ¶ã€åŠ›çŸ©é™åˆ¶ç­‰ã€‚</p>
<h6 id="1327-mimic---">1.3.2.7 <code>mimic   </code></h6>
<p>æè¿°è¯¥å…³èŠ‚ä¸å·²æœ‰å…³èŠ‚çš„å…³ç³»ã€‚</p>
<h6 id="1328-safety_controller--">1.3.2.8 <code>safety_controller  </code></h6>
<p>æè¿°å®‰å…¨æ§åˆ¶å™¨å‚æ•°ã€‚ä¿æŠ¤æœºå™¨äººå…³èŠ‚çš„è¿åŠ¨ã€‚</p>
<h3 id="äºŒurdfæ¡ˆä¾‹">äºŒã€<code>URDF</code>æ¡ˆä¾‹</h3>
<p>åˆ›å»º<code>my_learning_urdf</code>çš„<code>Python</code>ç‰ˆæœ¬çš„åŠŸèƒ½åŒ…ï¼›</p>
<pre><code class="language-shell">pi@NanoPC-T6:~/dev_ws$ cd src
pi@NanoPC-T6:~/dev_ws/src$ ros2 pkg create --build-type ament_python my_learning_urdf
</code></pre>
<p>åœ¨åŒ…ä¸­åˆ›å»ºå¦‚ä¸‹æ–‡ä»¶å¤¹ï¼š</p>
<ul>
<li><code>urdf</code>ï¼šå­˜æ”¾æœºå™¨äººæ¨¡å‹çš„<code>URDF</code>æˆ–<code>xacro</code>æ–‡ä»¶ï¼›</li>
<li><code>meshes</code>ï¼šæ”¾ç½®<code>URDF</code>ä¸­å¼•ç”¨çš„æ¨¡å‹æ¸²æŸ“æ–‡ä»¶ï¼›</li>
<li><code>launch</code>ï¼šä¿å­˜ç›¸å…³å¯åŠ¨æ–‡ä»¶ï¼›</li>
<li><code>rviz</code>ï¼šä¿å­˜<code>rviz</code>çš„é…ç½®æ–‡ä»¶ã€‚</li>
</ul>
<p>æˆ‘ä»¬éœ€è¦ä¿®æ”¹<code>setup.py</code>æ–‡ä»¶ï¼Œæ·»åŠ é…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="language-python">import os
from glob import glob

    ...

    data_files=[
        ('share/ament_index/resource_index/packages',
            ['resource/' + package_name]),
        ('share/' + package_name, ['package.xml']),
        (os.path.join('share', package_name, 'launch'), glob(os.path.join('launch', '*.launch.py'))),
        (os.path.join('share', package_name, 'urdf'), glob(os.path.join('urdf', '*.*'))),
        (os.path.join('share', package_name, 'urdf/sensors'), glob(os.path.join('urdf/sensors', '*.*'))),
        (os.path.join('share', package_name, 'meshes'), glob(os.path.join('meshes', '*.*'))),
        (os.path.join('share', package_name, 'rviz'), glob(os.path.join('rviz', '*.rviz'))),
    ],

    ...
</code></pre>
<h4 id="21-æ¨¡å‹æ–‡ä»¶">2.1 æ¨¡å‹æ–‡ä»¶</h4>
<p>åœ¨<code>urdf</code>ä¸‹æ–°å»ºæ–‡ä»¶<code>mbot_base.urdf</code>ï¼›</p>
<pre><code class="language-xml">&lt;?xml version="1.0" ?&gt;
&lt;robot name="mbot"&gt;

    &lt;link name="base_link"&gt;
        &lt;visual&gt;
            &lt;origin xyz=" 0 0 0" rpy="0 0 0" /&gt; &lt;!-- æœºå™¨äººä¸­å¿ƒï¼Œåæ ‡ç³»åŸç‚¹ --&gt;
            &lt;geometry&gt;
                &lt;cylinder length="0.16" radius="0.20"/&gt; &lt;!-- ç›´å¾„0.4mï¼Œé«˜0.16mçš„åœ†æŸ± --&gt;
            &lt;/geometry&gt;
            &lt;material name="yellow"&gt;
                &lt;color rgba="1 0.4 0 1"/&gt; &lt;!-- æ©™é»„è‰² --&gt;
            &lt;/material&gt;
        &lt;/visual&gt;
    &lt;/link&gt;

    &lt;joint name="left_wheel_joint" type="continuous"&gt;
        &lt;origin xyz="0 0.19 -0.05" rpy="0 0 0"/&gt; &lt;!-- ä½ç½®ï¼šYè½´+0.19ï¼ŒZè½´-0.05 --&gt;
        &lt;parent link="base_link"/&gt;
        &lt;child link="left_wheel_link"/&gt;
        &lt;axis xyz="0 1 0"/&gt;  &lt;!-- ç»•Yè½´æ—‹è½¬ --&gt;
    &lt;/joint&gt;

    &lt;link name="left_wheel_link"&gt;
        &lt;visual&gt;
            &lt;origin xyz="0 0 0" rpy="1.5707 0 0" /&gt; &lt;!-- æ—‹è½¬90åº¦ï¼ˆÏ€/2=1.5707ï¼‰ --&gt;
            &lt;geometry&gt;
                &lt;cylinder radius="0.06" length = "0.025"/&gt; &lt;!-- åŠå¾„0.06mï¼Œåš0.025m --&gt;
            &lt;/geometry&gt;
            &lt;material name="white"&gt;
                &lt;color rgba="1 1 1 0.9"/&gt;
            &lt;/material&gt;
        &lt;/visual&gt;
    &lt;/link&gt;

    &lt;joint name="right_wheel_joint" type="continuous"&gt;
        &lt;origin xyz="0 -0.19 -0.05" rpy="0 0 0"/&gt;
        &lt;parent link="base_link"/&gt;
        &lt;child link="right_wheel_link"/&gt;
        &lt;axis xyz="0 1 0"/&gt;
    &lt;/joint&gt;

    &lt;link name="right_wheel_link"&gt;
        &lt;visual&gt;
            &lt;origin xyz="0 0 0" rpy="1.5707 0 0" /&gt;
            &lt;geometry&gt;
                &lt;cylinder radius="0.06" length = "0.025"/&gt;
            &lt;/geometry&gt;
            &lt;material name="white"&gt;
                &lt;color rgba="1 1 1 0.9"/&gt;
            &lt;/material&gt;
        &lt;/visual&gt;
    &lt;/link&gt;

    &lt;joint name="front_caster_joint" type="continuous"&gt;
        &lt;origin xyz="0.18 0 -0.095" rpy="0 0 0"/&gt;
        &lt;parent link="base_link"/&gt;
        &lt;child link="front_caster_link"/&gt;
        &lt;axis xyz="0 1 0"/&gt;
    &lt;/joint&gt;

    &lt;link name="front_caster_link"&gt;
        &lt;visual&gt;
            &lt;origin xyz="0 0 0" rpy="0 0 0"/&gt;
            &lt;geometry&gt;
                &lt;sphere radius="0.015" /&gt;
            &lt;/geometry&gt;
            &lt;material name="black"&gt;
                &lt;color rgba="0 0 0 0.95"/&gt;
            &lt;/material&gt;
        &lt;/visual&gt;
    &lt;/link&gt;

    &lt;joint name="back_caster_joint" type="continuous"&gt;
        &lt;origin xyz="-0.18 0 -0.095" rpy="0 0 0"/&gt;
        &lt;parent link="base_link"/&gt;
        &lt;child link="back_caster_link"/&gt;
        &lt;axis xyz="0 1 0"/&gt;
    &lt;/joint&gt;

    &lt;link name="back_caster_link"&gt;
        &lt;visual&gt;
            &lt;origin xyz="0 0 0" rpy="0 0 0"/&gt;
            &lt;geometry&gt;
                &lt;sphere radius="0.015" /&gt;
            &lt;/geometry&gt;
            &lt;material name="black"&gt;
                &lt;color rgba="0 0 0 0.95"/&gt;
            &lt;/material&gt;
        &lt;/visual&gt;
    &lt;/link&gt;

&lt;/robot&gt;
</code></pre>
<p>è¿™å°†ä¼šåˆ›å»ºä¸€ä¸ªä¸¤è½®å·®åˆ†é©±åŠ¨æœºå™¨äººçš„<code>URDF</code>æ¨¡å‹ï¼ŒåŒ…å«è‹¥å¹²ä¸ªéƒ¨åˆ†ã€‚</p>
<h5 id="211-1ä¸ªä¸»ä½“base_link">2.1.1 <code>1</code>ä¸ªä¸»ä½“<code>base_link</code></h5>
<p>åœ†æŸ±ä½“ï¼ˆç›´å¾„<code>0.4</code>ç±³ï¼Œé«˜<code>0.16</code>ç±³ï¼‰ï¼Œæ©™é»„è‰²ï¼Œæœºå™¨äººä¸­å¿ƒï¼Œåæ ‡ç³»åŸç‚¹ã€‚</p>
<h5 id="212-2ä¸ªé©±åŠ¨è½®å·¦å³è½®">2.1.2 <code>2</code>ä¸ªé©±åŠ¨è½®ï¼ˆå·¦å³è½®ï¼‰</h5>
<p>åˆ†åˆ«ä¸º<code>left_wheel_link</code>ã€<code>right_wheel_link</code>ï¼š</p>
<ul>
<li><code>left_wheel_link</code>ï¼š
<ul>
<li>åœ†æŸ±ä½“ï¼ˆåŠå¾„<code>0.06</code>ç±³ï¼Œåšåº¦<code>0.025</code>ç±³ï¼‰ï¼›</li>
<li>åœ¨åŸºåº§åæ ‡ç³»ä¸­ <code>(0, 0.19, -0.05)</code>ï¼›</li>
<li>å…³èŠ‚ç±»å‹ï¼š<code>continuous</code>ï¼ˆè¿ç»­æ—‹è½¬å…³èŠ‚ï¼Œæ— é™æ—‹è½¬ï¼‰ï¼›</li>
<li>æ—‹è½¬è½´ï¼šç»•<code>Y</code>è½´ <code>(0, 1, 0)</code>ï¼›</li>
<li>è§†è§‰æ—‹è½¬ï¼š<code>rpy="1.5707 0 0"</code> å°†åœ†æŸ±æ—‹è½¬90åº¦ï¼Œä½¿å…¶ç›´ç«‹ï¼ˆå‡è®¾åŸå§‹åœ†æŸ±æ˜¯å¹³æ”¾çš„ï¼‰ï¼›</li>
</ul>
</li>
<li><code>right_wheel_link</code>ï¼šä¸å·¦è½®å¯¹ç§°å¸ƒç½®ï¼Œ<code>Y</code>åæ ‡ä¸ºè´Ÿï¼›</li>
</ul>
<h5 id="213-2ä¸ªä¸‡å‘è½®å‰åè„šè½®ç”¨äºæ”¯æ’‘">2.1.3 <code>2</code>ä¸ªä¸‡å‘è½®ï¼ˆå‰åè„šè½®ï¼Œç”¨äºæ”¯æ’‘ï¼‰</h5>
<p>åˆ†åˆ«ä¸º<code>front_caster_link</code>ã€<code>back_caster_link</code>ï¼š</p>
<ul>
<li><code>front_caster_link</code>ï¼š
<ul>
<li>å½¢çŠ¶ï¼šå°çƒä½“ï¼ˆåŠå¾„<code>0.015</code>ç±³ï¼‰ï¼Œæ¨¡æ‹Ÿä¸‡å‘è½®ï¼›</li>
<li>åœ¨åŸºåº§åæ ‡ç³»ä¸­å‰æ–¹ <code>(0.18, 0, -0.095)</code>ï¼›</li>
<li>é¢œè‰²ï¼šé»‘è‰²ï¼›</li>
</ul>
</li>
<li><code>back_caster_link</code>ï¼šä¸å‰ä¸‡å‘è½®å¯¹ç§°å¸ƒç½®ï¼Œ<code>X</code>åæ ‡ä¸ºè´Ÿï¼ˆ<code>-0.18</code>ï¼‰ã€‚</li>
</ul>
<h4 id="22-launchæ–‡ä»¶">2.2 <code>launch</code>æ–‡ä»¶</h4>
<p>åœ¨<code>launch</code>æ–‡ä»¶å¤¹ä¸‹åˆ›å»º<code>display.launch.py</code>æ–‡ä»¶ï¼›</p>
<pre><code class="language-python">from ament_index_python.packages import get_package_share_path

from launch import LaunchDescription
from launch.actions import DeclareLaunchArgument
from launch.conditions import IfCondition, UnlessCondition
from launch.substitutions import Command, LaunchConfiguration

from launch_ros.actions import Node
from launch_ros.parameter_descriptions import ParameterValue

def generate_launch_description():
    urdf_tutorial_path = get_package_share_path('my_learning_urdf')
    # è®¾ç½®é»˜è®¤çš„URDFæ–‡ä»¶å’ŒRVizé…ç½®æ–‡ä»¶è·¯å¾„
    default_model_path = urdf_tutorial_path / 'urdf/mbot_base.urdf'
    default_rviz_config_path = urdf_tutorial_path / 'rviz/urdf.rviz'

    # å‘½ä»¤è¡Œå‚æ•°ï¼š--gui true/falseï¼Œæ§åˆ¶æ˜¯å¦ä½¿ç”¨GUIç•Œé¢å‘å¸ƒå…³èŠ‚çŠ¶æ€
    gui_arg = DeclareLaunchArgument(name='gui', default_value='false', choices=['true', 'false'],
                                    description='Flag to enable joint_state_publisher_gui')
    
    # å‘½ä»¤è¡Œå‚æ•°ï¼š--model &lt;è·¯å¾„&gt;ï¼ŒæŒ‡å®šURDFæ–‡ä»¶è·¯å¾„
    model_arg = DeclareLaunchArgument(name='model', default_value=str(default_model_path),
                                      description='Absolute path to robot urdf file')
    
    # å‘½ä»¤è¡Œå‚æ•°ï¼š--rvizconfig &lt;è·¯å¾„&gt;ï¼ŒæŒ‡å®šRVizé…ç½®æ–‡ä»¶
    rviz_arg = DeclareLaunchArgument(name='rvizconfig', default_value=str(default_rviz_config_path),
                                     description='Absolute path to rviz config file')

    # å…³é”®ï¼šä½¿ç”¨xacroå‘½ä»¤è§£æURDFæ–‡ä»¶ï¼ˆæ”¯æŒå‚æ•°åŒ–ã€å®ç­‰é«˜çº§ç‰¹æ€§ï¼‰
    robot_description = ParameterValue(Command(['xacro ', LaunchConfiguration('model')]),
                                       value_type=str)
	
    # robot_state_publisher èŠ‚ç‚¹
    robot_state_publisher_node = Node(
        package='robot_state_publisher',
        executable='robot_state_publisher',
        parameters=[{'robot_description': robot_description}]
    )

    # å…³èŠ‚çŠ¶æ€å‘å¸ƒå™¨ï¼ˆäºŒé€‰ä¸€ï¼‰
    # æ–‡æœ¬ç‰ˆæœ¬ï¼ˆæ— GUIï¼‰
    joint_state_publisher_node = Node(
        package='joint_state_publisher',
        executable='joint_state_publisher',
        condition=UnlessCondition(LaunchConfiguration('gui'))
    )

    # GUIç‰ˆæœ¬ï¼ˆå¸¦æ»‘åŠ¨æ¡æ§åˆ¶ï¼‰
    joint_state_publisher_gui_node = Node(
        package='joint_state_publisher_gui',
        executable='joint_state_publisher_gui',
        condition=IfCondition(LaunchConfiguration('gui'))
    )

    # rviz2 å¯è§†åŒ–èŠ‚ç‚¹
    rviz_node = Node(
        package='rviz2',
        executable='rviz2',
        name='rviz2',
        output='screen',
        arguments=['-d', LaunchConfiguration('rvizconfig')],
    )

    return LaunchDescription([
        gui_arg,
        model_arg,
        rviz_arg,
        joint_state_publisher_node,
        joint_state_publisher_gui_node,
        robot_state_publisher_node,
        rviz_node
    ])
</code></pre>
<p>è¿™ä¸ª<code>Launch</code>æ–‡ä»¶ä¸»è¦åšä¸‰ä»¶äº‹ï¼š</p>
<ul>
<li>åŠ è½½æœºå™¨äºº<code>URDF</code>æ¨¡å‹ï¼ˆæ”¯æŒ<code>xacro</code>æ ¼å¼ï¼‰ï¼›</li>
<li>å‘å¸ƒæœºå™¨äººçš„çŠ¶æ€å˜æ¢ï¼ˆ<code>TF</code>ï¼‰ï¼›</li>
<li>åœ¨<code>rviz2</code>ä¸­å¯è§†åŒ–æœºå™¨äººã€‚</li>
</ul>
<h5 id="221-èŠ‚ç‚¹">2.2.1 èŠ‚ç‚¹</h5>
<p>è„šæœ¬è¿è¡Œä¼šåˆ›å»ºä»¥ä¸‹å‡ ä¸ªèŠ‚ç‚¹ï¼š</p>
<ul>
<li><code>joint_state_publisher</code>ï¼šå‘å¸ƒæ¯ä¸ª<code>joint</code>ï¼ˆé™¤<code>fixed</code>ç±»å‹ï¼‰çš„çŠ¶æ€ï¼Œä¸€ä¸ªæ— ç•Œé¢çš„ã€åŸºç¡€ç‰ˆçš„å…³èŠ‚çŠ¶æ€å‘å¸ƒå™¨ï¼›</li>
<li><code>joint_state_publisher_gui</code>ï¼šå‘å¸ƒæ¯ä¸ª<code>joint</code>ï¼ˆé™¤<code>fixed</code>ç±»å‹ï¼‰çš„çŠ¶æ€ï¼Œå¯ä»¥é€šè¿‡<code>UI</code>ç•Œé¢å¯¹<code>joint</code>è¿›è¡Œæ§åˆ¶ï¼›</li>
<li><code>robot_state_publisher</code>ï¼šå°†æœºå™¨äººå„ä¸ª<code>links</code>ã€<code>joints</code>ä¹‹é—´çš„å…³ç³»ï¼Œé€šè¿‡<code>TF</code>çš„å½¢å¼ï¼Œæ•´ç†æˆä¸‰ç»´å§¿æ€ä¿¡æ¯å‘å¸ƒã€‚</li>
<li><code>rviz2</code>ï¼šåœ¨<code>rviz2</code>ä¸­å¯è§†åŒ–æœºå™¨äººï¼›</li>
</ul>
<p><code>joint_state_publisher</code>è¿™æ˜¯ä¸€ä¸ªå®˜æ–¹<code>ROS2</code>åŒ…ï¼Œä¸»è¦åŠŸèƒ½ï¼š</p>
<ul>
<li>
<p>è¾“å…¥ï¼š</p>
<ul>
<li>
<p>è¯»å–<code>URDF</code>ä¸­çš„å…³èŠ‚å®šä¹‰ï¼›</p>
</li>
<li>
<p>æ¥æ”¶ç”¨æˆ·æˆ–ç¨‹åºæŒ‡å®šçš„å…³èŠ‚è§’åº¦ï¼›</p>
</li>
</ul>
</li>
<li>
<p>è¾“å‡ºï¼š</p>
<ul>
<li>
<p>å‘å¸ƒ <code>/joint_states</code> è¯é¢˜ï¼Œæ¶ˆæ¯ç±»å‹ä¸º <code>sensor_msgs/msg/JointState</code>ï¼›</p>
</li>
<li>
<p>åŒ…å«æ‰€æœ‰å…³èŠ‚çš„åç§°ã€ä½ç½®ã€é€Ÿåº¦ã€åŠ›ç­‰ä¿¡æ¯ã€‚</p>
</li>
</ul>
</li>
</ul>
<h5 id="222-æ•°æ®æµä¸èŠ‚ç‚¹å…³ç³»">2.2.2 æ•°æ®æµä¸èŠ‚ç‚¹å…³ç³»</h5>
<p>æ•°æ®æµä¸èŠ‚ç‚¹å…³ç³»:</p>
<pre><code class="language-tex">ç”¨æˆ·é€šè¿‡æ»‘åŠ¨æ¡/GUIæˆ–ç¨‹åº â†’ joint_state_publisher(_gui)
                                     â†“ å‘å¸ƒ/joint_statesè¯é¢˜
                        robot_state_publisher
                                     â†“ è®¡ç®—å¹¶å‘å¸ƒTFå˜æ¢
                              rviz2 å’Œå…¶ä»–èŠ‚ç‚¹
                                     â†“ æ¥æ”¶TFå¹¶å¯è§†åŒ–
</code></pre>
<h4 id="23-urdfrviz">2.3 <code>urdf.rviz</code></h4>
<p>åœ¨<code>rviz</code>ç›®å½•ä¸‹æ–°å»º<code>urdf.rviz</code>æ–‡ä»¶ï¼›</p>
<pre><code class="language-yaml">Panels:
  - Class: rviz_common/Displays
    Name: Displays
  - Class: rviz_common/Views
    Name: Views
Visualization Manager:
  Class: ""
  Displays:
    - Class: rviz_default_plugins/Grid
      Name: Grid
      Value: true
    - Alpha: 0.8
      Class: rviz_default_plugins/RobotModel
      Description Source: Topic
      Description Topic:
        Value: /robot_description
      Enabled: true
      Name: RobotModel
      Value: true
    - Class: rviz_default_plugins/TF
      Name: TF
      Value: true
  Global Options:
    Fixed Frame: base_link
    Frame Rate: 30
  Name: root
  Tools:
    - Class: rviz_default_plugins/MoveCamera
  Value: true
  Views:
    Current:
      Class: rviz_default_plugins/Orbit
      Distance: 1.7
      Name: Current View
      Pitch: 0.33
      Value: Orbit (rviz)
      Yaw: 5.5
Window Geometry:
  Height: 800
  Width: 1200
</code></pre>
<h4 id="24-ç¼–è¯‘è¿è¡Œ">2.4 ç¼–è¯‘è¿è¡Œ</h4>
<p>ç¼–è¯‘ç¨‹åºï¼š</p>
<pre><code class="language-shell">pi@NanoPC-T6:~/dev_ws$ colcon build --paths src/my_learning_urdf
pi@NanoPC-T6:~/dev_ws$ source install/setup.sh
</code></pre>
<h5 id="241-å¯è§†åŒ–">2.4.1 å¯è§†åŒ–</h5>
<p>å¯åŠ¨ç»ˆç«¯ï¼Œè¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼›</p>
<pre><code class="language-shell">pi@NanoPC-T6:~/dev_ws$ ros2 launch my_learning_urdf display.launch.py
</code></pre>
<p>å¾ˆå¿«å°±å¯ä»¥çœ‹åˆ°<code>rviz</code>ä¸­æ˜¾ç¤ºçš„æœºå™¨äººæ¨¡å‹å•¦ï¼Œå¤§å®¶å¯ä»¥ä½¿ç”¨é¼ æ ‡æ‹–æ‹½è§‚å¯Ÿï¼›</p>
<img src="https://gitee.com/zyly2033/blog-pic/raw/master/202512222247733.png" style="zoom: 80%">
<p>ä»å¯è§†åŒ–çš„æ•ˆæœæ¥çœ‹ï¼Œè¿™ä¸ªæœºå™¨äººç”±<code>5</code>ä¸ª<code>link</code>å’Œ<code>4</code>ä¸ª<code>joint</code>ç»„æˆã€‚</p>
<h5 id="242-æŸ¥çœ‹urdfæ¨¡å‹ç»“æ„">2.4.2 æŸ¥çœ‹<code>URDF</code>æ¨¡å‹ç»“æ„</h5>
<p>æˆ‘ä»¬åˆ†æçš„å¯¹ä¸å¯¹å‘¢ï¼Œå¯ä»¥åœ¨æ¨¡å‹æ–‡ä»¶çš„è·¯å¾„ä¸‹ï¼Œä½¿ç”¨<code>urdf_to_graphviz</code>è¿™ä¸ªå°å·¥å…·æ¥åˆ†æä¸‹;</p>
<pre><code class="language-shell">pi@NanoPC-T6:~/dev_ws/src/my_learning_urdf/urdf$ urdf_to_graphviz mbot_base.urdf
WARNING: OUTPUT not given. This type of usage is deprecated!Usage: urdf_to_graphviz input.xml [OUTPUT]  Will create either $ROBOT_NAME.gv &amp; $ROBOT_NAME.pdf in CWD  or OUTPUT.gv &amp; OUTPUT.pdf.
Created file mbot.gv
Created file mbot.pdf

pi@NanoPC-T6:~/dev_ws/src/my_learning_urdf/urdf$ ls
mbot_base.urdf  mbot.gv  mbot.pdf
</code></pre>
<p>è¿è¡ŒæˆåŠŸåä¼šäº§ç”Ÿä¸€ä¸ª<code>pdf</code>æ–‡ä»¶ï¼Œæ‰“å¼€ä¹‹åå°±å¯ä»¥çœ‹åˆ°<code>URDF</code>æ¨¡å‹åˆ†æçš„ç»“æœå•¦ï¼Œæ˜¯ä¸æ˜¯å’Œæˆ‘ä»¬çš„çŒœæµ‹å®Œå…¨ç›¸åŒå‘¢ï¼</p>
<img src="https://gitee.com/zyly2033/blog-pic/raw/master/202512222230527.png" style="zoom: 80%">
<p><strong>å‚è€ƒæ–‡ç« </strong></p>
<p><strong>[1] <a href="https://book.guyuehome.com/ROS2/3.%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/3.3_URDF/" target="_blank" rel="noopener nofollow">å¤æœˆå±…<code>ROS2</code>å…¥é—¨æ•™ç¨‹å­¦ä¹ ç¬”è®°</a></strong></p>
<p><strong>[2] <a href="https://zhuanlan.zhihu.com/p/341599469" target="_blank" rel="noopener nofollow"><code>ROS</code>ä¸­é˜¶ç¬”è®°ï¼ˆäºŒï¼‰ï¼šæœºå™¨äººç³»ç»Ÿè®¾è®¡â€”<code>URDF</code>æœºå™¨äººå»ºæ¨¡</a></strong></p>
<p><strong>[3] <a href="https://wiki.ros.org/urdf/XML/model" target="_blank" rel="noopener nofollow"><code>XML Robot Description Format</code> (<code>URDF</code>)</a></strong></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.4284722222222222" data-date-updated="2025-12-23 08:48">2025-12-22 22:31</span>&nbsp;
<a href="https://www.cnblogs.com/zyly">å¤§å¥¥ç‰¹æ›¼æ‰“å°æ€ªå…½</a>&nbsp;
é˜…è¯»(<span id="post_view_count">32</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19384606);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19384606', targetLink: 'https://www.cnblogs.com/zyly/p/19384606', title: 'ROS2ä¹‹URDFå»ºæ¨¡' })">ä¸¾æŠ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ åŒ–æ•´ä¸ºé›¶ã€åˆ†è€Œæ²»ä¹‹ã€å¼‚æ­¥ç¼–æ’ï¼šä¸€æ–‡è¯»æ‡‚ç°ä»£å¹¶å‘çš„åº•å±‚å¿ƒæ³• ]]></title>
    <link>https://www.cnblogs.com/poemyang/p/19384431</link>
    <guid>705b50635a578b80efd5de08849cf652</guid>
    <description>
    <![CDATA[ 
        <h2 class="post-title">
            <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/poemyang/p/19384431" title="å‘å¸ƒäº 2025-12-22 21:34">
    <span role="heading" aria-level="2">åŒ–æ•´ä¸ºé›¶ã€åˆ†è€Œæ²»ä¹‹ã€å¼‚æ­¥ç¼–æ’ï¼šä¸€æ–‡è¯»æ‡‚ç°ä»£å¹¶å‘çš„åº•å±‚å¿ƒæ³•</span>
    

</a>

        </h2>
        <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p><strong>LongAdderï¼šåŒ–æ•´ä¸ºé›¶ï¼Œçƒ­ç‚¹åˆ†æ•£</strong><br>
åœ¨Javaå¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ï¼Œâ€ŒåŸå­å˜é‡ï¼ˆå¦‚AtomicLongï¼‰â€Œé€šè¿‡CASæ“ä½œå®ç°çº¿ç¨‹å®‰å…¨çš„ç´¯åŠ ã€‚ç„¶è€Œï¼Œåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå¤§é‡çº¿ç¨‹äº‰æŠ¢åŒä¸€åŸå­å˜é‡ä¼šå¼•å‘ä¸¥é‡çš„â€Œç¼“å­˜ä¸€è‡´æ€§é—®é¢˜â€Œã€‚<br>
â€Œ 1ï¼‰ç¼“å­˜è¡Œä¼ªå…±äº«â€Œï¼šå¤šä¸ªçº¿ç¨‹é¢‘ç¹æ›´æ–°åŒä¸€ç¼“å­˜è¡Œï¼Œå¯¼è‡´ç¼“å­˜å¤±æ•ˆå’ŒMESIåè®®é¢‘ç¹è§¦å‘ï¼Œå¤„ç†å™¨æ€§èƒ½æ€¥å‰§ä¸‹é™ã€‚<br>
â€Œ 2ï¼‰CASå†²çªå¼€é”€â€Œï¼šCASæ“ä½œéœ€è‡ªæ—‹é‡è¯•ï¼Œçº¿ç¨‹ç«äº‰æ¿€çƒˆæ—¶é‡è¯•æ¬¡æ•°å¢åŠ ï¼Œè¿›ä¸€æ­¥æ‹–æ…¢æ€§èƒ½ã€‚<br>
ä¸ºè§£å†³ä¸Šè¿°ç“¶é¢ˆï¼ŒJava 8å¼•å…¥äº†â€ŒLongAdderâ€Œï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯â€Œâ€œåˆ†æ•£ç«äº‰ï¼Œå»¶è¿Ÿæ±‚å’Œâ€Œâ€ã€‚<br>
â€Œ 1ï¼‰åˆ†æ®µç´¯åŠ â€Œï¼šå°†å•ä¸€ç´¯åŠ å˜é‡æ‹†åˆ†ä¸ºå¤šä¸ªâ€Œåˆ†æ®µå˜é‡ï¼ˆcellsï¼‰â€Œï¼Œæ¯ä¸ªçº¿ç¨‹ä»…æ›´æ–°å…¶ä¸“å±çš„åˆ†æ®µï¼Œé¿å…å…¨å±€ç«äº‰ã€‚<br>
â€Œ 2ï¼‰åŸºç¡€å€¼ä¼˜åŒ–â€Œï¼šåœ¨ä½å¹¶å‘åœºæ™¯ä¸‹ï¼Œç›´æ¥æ›´æ–°åŸºç¡€å€¼ï¼ˆbaseï¼‰ï¼Œå‡å°‘åˆ†æ®µæ•°ç»„çš„å¼€é”€ã€‚<br>
â€Œ 3ï¼‰æœ€ç»ˆä¸€è‡´æ€§æ±‚å’Œâ€Œï¼šé€šè¿‡éå†æ‰€æœ‰åˆ†æ®µå’ŒåŸºç¡€å€¼ï¼Œå»¶è¿Ÿè®¡ç®—æ€»å’Œï¼Œé™ä½å®æ—¶ç«äº‰å‹åŠ›ã€‚<br>
<img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/757914/202512/757914-20251222213334386-1756695412.png" class="lazyload"></p>
<p>LongAdderçš„å†…éƒ¨å®ç°åŸç†ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ä¼ªä»£ç æ¼”ç¤ºã€‚</p>
<pre><code class="language-java">public class LongAdder {
    private final AtomicLong[] cells; // åˆ†æ®µæ•°ç»„ï¼Œæ¯ä¸ªçº¿ç¨‹æ˜ å°„åˆ°ç‰¹å®šåˆ†æ®µ
    private final AtomicLong base;    // åŸºç¡€å€¼ï¼Œä½å¹¶å‘æ—¶ç›´æ¥æ›´æ–°

    public LongAdder() {
        cells = new AtomicLong[16]; // å‡è®¾åˆå§‹åŒ–16ä¸ªåˆ†æ®µ
        for (int i = 0; i &lt; cells.length; i++) {
            cells[i] = new AtomicLong(0); // åˆå§‹åŒ–åˆ†æ®µå€¼ä¸º0
        }
        base = new AtomicLong(0); // åˆå§‹åŒ–åŸºç¡€å€¼ä¸º0
    }

    public void add(long x) {
        // 1. è®¡ç®—çº¿ç¨‹å¯¹åº”çš„åˆ†æ®µç´¢å¼•ï¼ˆç®€å•å–æ¨¡å®ç°ï¼‰
        int index = (int) (Thread.currentThread().getId() % cells.length);
        // 2. å¯¹ä¸“å±åˆ†æ®µæ‰§è¡ŒCASç´¯åŠ ï¼Œé¿å…å…¨å±€ç«äº‰
        cells[index].addAndGet(x);
    }

    public long sum() {
        // 3. æ±‚å’Œï¼šç´¯åŠ åŸºç¡€å€¼å’Œæ‰€æœ‰åˆ†æ®µå€¼
        long sum = base.get();
        for (AtomicLong cell : cells) {
            sum += cell.get();
        }
        return sum;
    }
}
</code></pre>
<p>ç„¶è€Œï¼ŒLongAdder å¹¶éä¸‡èƒ½é’¥åŒ™ã€‚åœ¨å¹¶å‘åº¦è¾ƒä½çš„åœºæ™¯ï¼ŒAtomicLong çš„ç®€å•ç›´æ¥åè€Œæ›´é«˜æ•ˆï¼Œå°±å¥½æ¯”å°å‹èšä¼šä¸­ï¼Œå¤§å®¶ç›´æ¥å…±äº«ä¸€ä¸ªæœç›˜æ›´æ–¹ä¾¿ï¼Œè€Œä¸éœ€è¦å¤šä¸ªæœç¯®ã€‚å¦å¤–ï¼Œå½“éœ€è¦é¢‘ç¹è¯»å–ç´¯è®¡ç»“æœæ—¶ï¼ŒLongAdder çš„æ±‡æ€»è¿‡ç¨‹å°±åƒé€ä¸ªç¯®å­ç»Ÿè®¡æ°´æœæ•°é‡ï¼Œç•¥æ˜¾ç¹çï¼Œæ€§èƒ½ä¼šå—å½±å“ã€‚Fork/Joinï¼šåˆ†è€Œæ²»ä¹‹ï¼Œä»»åŠ¡çªƒå–<br>
Java 7 å¼•å…¥çš„ â€ŒFork/Join Frameworkâ€Œ æ˜¯ä¸€ç§å¼ºå¤§çš„å¹¶è¡Œç¼–ç¨‹æ¨¡å‹ï¼Œä¸“ä¸ºè§£å†³â€œåˆ†è€Œæ²»ä¹‹â€ï¼ˆDivide and Conquerï¼‰ç±»å‹çš„é—®é¢˜è€Œè®¾è®¡ã€‚å®ƒå……åˆ†åˆ©ç”¨å¤šæ ¸å¤„ç†å™¨çš„è®¡ç®—èƒ½åŠ›ï¼Œé€šè¿‡åˆ†è§£ä»»åŠ¡ã€å¹¶è¡Œæ‰§è¡Œå’Œåˆå¹¶ç»“æœï¼Œæ˜¾è‘—æå‡ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚<br>
Fork/Joinç‰¹åˆ«é€‚åˆå¤„ç†å¯ä»¥è¢«åˆ†è§£æˆç‹¬ç«‹å­ä»»åŠ¡çš„é—®é¢˜ï¼Œä»¥å®ç°ä»»åŠ¡çš„å¹¶è¡Œæ‰§è¡Œï¼Œå¦‚æ’åºã€æœç´¢ç­‰ã€‚<br>
<img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/757914/202512/757914-20251222213344110-564578910.png" class="lazyload"></p>
<pre><code class="language-java">if (ä»»åŠ¡è¶³å¤Ÿå°) {
    ç›´æ¥è®¡ç®—å¹¶è¿”å›ç»“æœ;
} else {
    å°†ä»»åŠ¡æ‹†åˆ†ä¸ºNä¸ªå­ä»»åŠ¡;
    å¯¹æ¯ä¸ªå­ä»»åŠ¡è°ƒç”¨ fork() è¿›è¡Œå¹¶è¡Œè®¡ç®—;
    è°ƒç”¨ join() åˆå¹¶å­ä»»åŠ¡çš„ç»“æœ;
    è¿”å›æœ€ç»ˆç»“æœ;
}
</code></pre>
<p>åœ¨Java 8ä¸­å¼•å…¥çš„å¹¶è¡Œæµè®¡ç®—ï¼ˆParallel stream computingï¼‰ï¼Œå†…éƒ¨å°±æ˜¯é‡‡ç”¨çš„ForkJoinPoolæ¥å®ç°çš„ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢ä½¿ç”¨å¹¶è¡Œæµå®ç°æ•°ç»„å¹¶è¡Œæ±‚å’Œè®¡ç®—ã€‚</p>
<pre><code class="language-java">public class SumArray {
    public static void main(String[] args) {
        List&lt;Integer&gt; numbers = Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8, 9);
         // mapåœ¨å®é™…ç¼–ç¨‹ä¸­ï¼Œå¯ä»¥æ˜¯è€—æ—¶é«˜ï¼Œè®¡ç®—é‡å¤§çš„ä»»åŠ¡
        int sum = numbers.parallelStream().map(i -&gt; i * i).reduce(0, Integer::sum);
    }
}
</code></pre>
<p><strong>å¹¶è¡Œç¼–ç¨‹æ¨¡å‹</strong><br>
å¹¶è¡Œç¼–ç¨‹æ¨¡å‹ï¼ˆParallel programming modelï¼‰æ˜¯ä¸€ç§ç”¨äºæè¿°å’Œç»„ç»‡å¹¶è¡Œè®¡ç®—çš„æ¡†æ¶æˆ–èŒƒå¼ã€‚å®ƒæä¾›äº†ä¸€ç»„æŠ½è±¡æ¦‚å¿µã€ç¼–ç¨‹æ¥å£å’Œè§„èŒƒï¼Œç”¨äºæŒ‡å¯¼å¼€å‘è€…åœ¨å¤šæ ¸å¤„ç†å™¨ã€åˆ†å¸ƒå¼ç³»ç»Ÿæˆ–å¹¶è¡Œè®¡ç®—ç¯å¢ƒä¸­ç¼–å†™å¹¶è¡Œç¨‹åºã€‚<br>
å¸¸è§çš„å¹¶è¡Œç¼–ç¨‹æ¨¡å‹åŒ…æ‹¬ï¼šæ•°æ®å¹¶è¡Œï¼ˆData parallelismï¼‰ã€ä»»åŠ¡å¹¶è¡Œï¼ˆTask parallelismï¼‰ã€å¤šçº¿ç¨‹å¹¶è¡Œï¼ˆMultithread parallelismï¼‰ç­‰ã€‚å·¥ä½œçªƒå–<br>
å·¥ä½œçªƒå–ï¼ˆWork Stealingï¼‰æ˜¯ä¸€ç§é«˜æ•ˆçš„å¹¶è¡Œè®¡ç®—è°ƒåº¦ç­–ç•¥ï¼Œå…¶ä¸»è¦ç›®æ ‡æ˜¯è§£å†³è´Ÿè½½ä¸å‡è¡¡é—®é¢˜ï¼Œä»¥å……åˆ†åˆ©ç”¨æ‰€æœ‰çš„å¤„ç†å™¨æ ¸å¿ƒï¼Œä»è€Œæå‡ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚<br>
åœ¨å·¥ä½œçªƒå–æ¨¡å‹ä¸­ï¼Œæ¯ä¸ªå¤„ç†å™¨éƒ½ç»´æŠ¤ç€è‡ªå·±çš„åŒç«¯é˜Ÿåˆ—ï¼ˆDequeï¼‰ï¼Œç”¨äºå­˜å‚¨åˆ†é…ç»™è‡ªå·±çš„ä»»åŠ¡ã€‚å½“ä¸€ä¸ªå¤„ç†å™¨å®Œæˆäº†æ‰€æœ‰è‡ªå·±çš„ä»»åŠ¡åï¼Œå®ƒä¼šå°è¯•ä»å…¶ä»–å¤„ç†å™¨çš„ä»»åŠ¡é˜Ÿåˆ—çš„æœ«å°¾â€œçªƒå–â€ä»»åŠ¡æ¥æ‰§è¡Œã€‚è¿™ç§ç­–ç•¥ç¡®ä¿äº†æ‰€æœ‰çš„å¤„ç†å™¨éƒ½èƒ½å°½å¯èƒ½åœ°ä¿æŒå¿™ç¢ŒçŠ¶æ€ï¼Œä»è€Œæé«˜æ•´ä½“çš„å¹¶è¡Œæ€§èƒ½ã€‚<br>
å·¥ä½œçªƒå–ç­–ç•¥çš„ä¸€ä¸ªæ˜¾è‘—ä¼˜ç‚¹æ˜¯å…¶èƒ½å¤ŸåŠ¨æ€åœ°å¹³è¡¡è´Ÿè½½ã€‚è¿™æ„å‘³ç€å®ƒèƒ½å¤Ÿé€‚åº”å„ç§ä¸åŒçš„ä»»åŠ¡åˆ†å¸ƒå’Œå¤„ç†å™¨æ€§èƒ½ï¼Œä»è€Œåœ¨å„ç§æƒ…å†µä¸‹éƒ½èƒ½æä¾›ä¼˜ç§€çš„æ€§èƒ½ã€‚<br>
åœ¨å®é™…ç¼–ç¨‹å®è·µä¸­ï¼Œå·¥ä½œçªƒå–è°ƒåº¦ç­–ç•¥é€šå¸¸ç”±å¹¶è¡Œç¼–ç¨‹æ¡†æ¶æˆ–åº“æ¥å®ç°ã€‚ä¾‹å¦‚ï¼ŒJavaçš„Fork/Joinæ¡†æ¶å°±é‡‡ç”¨äº†å·¥ä½œçªƒå–ç­–ç•¥æ¥åŠ¨æ€åœ°åˆ†é…ä»»åŠ¡ï¼ŒC++çš„Intel TBBï¼ˆThreading Building Blocksï¼‰åº“ä¹Ÿä½¿ç”¨äº†ç±»ä¼¼çš„ç­–ç•¥ã€‚<br>
<img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/757914/202512/757914-20251222213355165-1177992061.png" class="lazyload"></p>
<p><strong>CompletableFutureï¼šæ„å»ºä¼˜é›…çš„å¼‚æ­¥æµæ°´çº¿</strong><br>
CompletableFuture æ˜¯ Java 8 å¼•å…¥çš„ä¸€ä¸ªæ ¸å¿ƒç±»ï¼Œå®ƒå®ç°äº† Future æ¥å£ï¼Œå¹¶åœ¨å…¶åŸºç¡€ä¸Šæä¾›äº†æ›´å¼ºå¤§ã€æ›´çµæ´»çš„å¼‚æ­¥ç¼–ç¨‹èƒ½åŠ›ã€‚ä¸ä¼ ç»Ÿçš„ Future ç›¸æ¯”ï¼ŒCompletableFuture ä¸ä»…èƒ½å¤Ÿè¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥è®¡ç®—çš„ç»“æœï¼Œè¿˜æ”¯æŒä¸°å¯Œçš„å‡½æ•°å¼ç¼–ç¨‹ç‰¹æ€§ï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿä»¥å£°æ˜å¼çš„æ–¹å¼å¤„ç†å¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œæµç¨‹ã€‚<br>
CompletableFuture çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå…¶æ”¯æŒé“¾å¼è°ƒç”¨ï¼ˆChainingï¼‰ï¼Œå…è®¸åœ¨ä¸€ä¸ª CompletableFuture ä¸Šé™„åŠ å¤šä¸ªæ“ä½œï¼ˆå¦‚è½¬æ¢ç»“æœã€å¤„ç†å¼‚å¸¸ã€ç»„åˆå¤šä¸ªä»»åŠ¡ç­‰ï¼‰ã€‚è¿™äº›æ“ä½œä¼šåœ¨ CompletableFuture å®Œæˆæ—¶è‡ªåŠ¨è§¦å‘ï¼Œä»è€Œå½¢æˆä¸€ä¸ªæµæ°´çº¿å¼çš„ä»»åŠ¡å¤„ç†æµç¨‹ã€‚<br>
â€Œ ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå±•ç¤ºäº† â€ŒCompletableFutureâ€Œ çš„é“¾å¼è°ƒç”¨ã€‚</p>
<pre><code class="language-java">// supplyAsyncæ–¹æ³•ç”¨äºå¯åŠ¨ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼ŒthenApplyæ–¹æ³•ç”¨äºåœ¨ä»»åŠ¡å®Œæˆæ—¶å¯¹ç»“æœè¿›è¡Œè½¬æ¢
CompletableFuture&lt;String&gt; future = CompletableFuture.supplyAsync(() -&gt; {
     ......
    // å¼‚æ­¥ä»»åŠ¡ï¼Œæ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚
    return "Hello";
}).thenApply(result -&gt; {
    // å¯¹ç»“æœè¿›è¡Œè½¬æ¢
    return result + " World";
});
// ä¸»çº¿ç¨‹ç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆ
future.join();
// è·å–å¼‚æ­¥æ‰§è¡Œç»“æœ
future.get();
</code></pre>
<p><strong>å¼‚æ­¥ç¼–ç¨‹</strong><br>
å¼‚æ­¥ç¼–ç¨‹æ˜¯ä¸€ç§é«˜æ•ˆçš„ç¼–ç¨‹èŒƒå¼ï¼Œæ—¨åœ¨ä¼˜åŒ–ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡å’Œèµ„æºåˆ©ç”¨ç‡ã€‚å®ƒé€šè¿‡å…è®¸ç¨‹åºåœ¨ç­‰å¾…è€—æ—¶æ“ä½œï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶I/Oç­‰ï¼‰å®Œæˆçš„åŒæ—¶ï¼Œç»§ç»­æ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œä»è€Œé¿å…äº†ä¼ ç»ŸåŒæ­¥ç¼–ç¨‹ä¸­çš„çº¿ç¨‹é˜»å¡é—®é¢˜ã€‚è¿™ç§éé˜»å¡çš„æ‰§è¡Œæ–¹å¼æ˜¾è‘—æå‡äº†ç¨‹åºçš„å“åº”é€Ÿåº¦å’Œå¹¶å‘å¤„ç†èƒ½åŠ›ï¼Œå°¤å…¶é€‚ç”¨äºI/Oå¯†é›†å‹ä»»åŠ¡ã€‚<br>
åœ¨ä¼ ç»Ÿçš„åŒæ­¥ç¼–ç¨‹æ¨¡å‹ä¸­ï¼Œå½“ä¸€ä¸ªæ“ä½œéœ€è¦è¾ƒé•¿æ—¶é—´å®Œæˆæ—¶ï¼Œç¨‹åºä¼šåœæ»åœ¨è¯¥æ“ä½œä¸Šï¼Œç›´åˆ°æ“ä½œç»“æŸï¼Œè¿™ç§ç°è±¡ç§°ä¸ºé˜»å¡ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œå¼‚æ­¥ç¼–ç¨‹æ¨¡å‹å…è®¸ç¨‹åºåœ¨å¯åŠ¨ä¸€ä¸ªè€—æ—¶æ“ä½œåï¼Œç«‹å³è½¬è€Œæ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œè€Œæ— éœ€ç­‰å¾…è¯¥æ“ä½œå®Œæˆã€‚å½“æ“ä½œå®Œæˆåï¼Œç¨‹åºä¼šé€šè¿‡å›è°ƒã€äº‹ä»¶æˆ–Futureç­‰æœºåˆ¶æ”¶åˆ°é€šçŸ¥ï¼Œå¹¶å¤„ç†æ“ä½œç»“æœã€‚<br>
å¼‚æ­¥ç¼–ç¨‹åœ¨å¤šç§ç¼–ç¨‹è¯­è¨€ä¸­éƒ½æœ‰åº”ç”¨å’Œå®ç°ã€‚ä¾‹å¦‚ï¼ŒJavaä¸­çš„CompletableFutureã€JavaScriptä¸­çš„Promiseï¼Œä»¥åŠPythonä¸­çš„asyncioåº“ç­‰ï¼Œéƒ½æä¾›äº†å¼ºå¤§çš„å¼‚æ­¥ç¼–ç¨‹æ”¯æŒã€‚<br>
ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„åŒæ­¥ä¸å¼‚æ­¥è¯»å–æ–‡ä»¶çš„å¯¹æ¯”ç¤ºä¾‹ï¼ˆä¼ªä»£ç ï¼‰ã€‚</p>
<pre><code class="language-java">// åŒæ­¥æ‰§è¡Œè¯»å–æ–‡ä»¶æ“ä½œ
let a = read("a.txt");
// åŒæ­¥ç­‰å¾…ä¸Šæ¬¡ä¸€æ¬¡æ–‡ä»¶æ“ä½œå®Œæˆ
let b = read("b.txt");
// å‡è®¾å•ä¸ªæ–‡ä»¶è¯»å–è€—æ—¶50msï¼Œä¸€å…±éœ€è¦è€—æ—¶100ms
print(a+b)

// å¼‚æ­¥æ‰§è¡Œè¯»å–æ–‡ä»¶æ“ä½œ
let op_a = read_async("a.txt");
let op_b = read_async("b.txt");
let a = wait_until_get_ready(op_a);
let b = wait_until_get_ready(op_b);
// å‡è®¾å•ä¸ªæ–‡ä»¶è¯»å–è€—æ—¶50msï¼Œ ç”±äºä¸¤æ¬¡è¯»å–æ–‡ä»¶æ“ä½œåŒæ—¶å¼‚æ­¥æ‰§è¡Œï¼Œæœ€ç»ˆè€—æ—¶50ms
print(a+b);

fn wait_until_get_ready(Operation) -&gt; Response {
  // é˜»å¡ä»»åŠ¡ï¼ŒæŒ‚èµ·çº¿ç¨‹ï¼Œç›´åˆ°operationå°±ç»ªå†å”¤é†’çº¿ç¨‹ï¼ˆå”¤é†’æ“ä½œï¼Œéœ€è¦æ“ä½œç³»ç»Ÿå’Œç¡¬ä»¶çš„åº•å±‚æ”¯æ’‘ï¼‰
}
</code></pre>
<p>å¼‚æ­¥ç¼–ç¨‹å¯ä»¥æ›´æœ‰æ•ˆåœ°å¤„ç†å¹¶å‘é—®é¢˜ã€‚å½“ç¨‹åºéœ€è¦åŒæ—¶å¤„ç†å¤šä¸ªä»»åŠ¡æ—¶ï¼Œå¼‚æ­¥ç¼–ç¨‹å¯ä»¥è®©è¿™äº›ä»»åŠ¡å¹¶å‘æ‰§è¡Œï¼Œè€Œä¸æ˜¯æŒ‰é¡ºåºä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ‰§è¡Œã€‚ç„¶è€Œï¼Œå¼‚æ­¥ç¼–ç¨‹çš„å®ç°ç¦»ä¸å¼€æ“ä½œç³»ç»Ÿå’Œç¡¬ä»¶çš„åº•å±‚æ”¯æŒã€‚å¦‚æœåœ¨å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œå®Œä¹‹å‰ï¼Œå¤„ç†çº¿ç¨‹ä¸€ç›´å¯¹å¼‚æ­¥ä»»åŠ¡æ‰§è¡ŒçŠ¶æ€è¿›è¡Œç©ºè½®è¯¢ï¼Œè¿™å°†ä¼šæµªè´¹å¤„ç†å™¨èµ„æºã€‚å› æ­¤ï¼Œæ“ä½œç³»ç»Ÿå’Œç¡¬ä»¶çš„åº•å±‚æ”¯æŒï¼Œå¦‚Linuxç³»ç»Ÿæ”¯æŒçš„selectã€pollã€epollç­‰æŠ€æœ¯ï¼Œå¯¹äºå¼‚æ­¥ç¼–ç¨‹çš„å®ç°è‡³å…³é‡è¦ã€‚<br>
ä»¥ä¸‹æ˜¯ä¸€ä¸ªæ²¡æœ‰åº•å±‚æ”¯æŒæ—¶ï¼Œå¼‚æ­¥ç¼–ç¨‹å¯èƒ½é¢ä¸´çš„é—®é¢˜çš„ç¤ºä¾‹ï¼ˆä¼ªä»£ç ï¼‰ã€‚</p>
<pre><code class="language-java">let op_a = read_async("a.txt");
let a = "";
// å¦‚æœæ²¡æœ‰æ“ä½œç³»ç»Ÿå’Œç¡¬ä»¶çš„åº•å±‚æ”¯æ’‘ï¼Œå°†ä¸æ–­è½®è¯¢op_açš„ä»»åŠ¡çŠ¶æ€
while true {
  if op_a.is_finish() {
    a = op_a.get_content();
    break;
  }
}
print(a);
</code></pre>
<p><strong>é“¾å¼è°ƒç”¨</strong><br>
â€œå›è°ƒåœ°ç‹±â€ï¼ˆCallback Hellï¼‰æ˜¯å¼‚æ­¥ç¼–ç¨‹ä¸­å¸¸è§çš„ä¸€ä¸ªé—®é¢˜ï¼Œå°¤å…¶åœ¨ JavaScript ç­‰å•çº¿ç¨‹ã€äº‹ä»¶é©±åŠ¨å‹è¯­è¨€ä¸­å°¤ä¸ºçªå‡ºã€‚å½“å¤šä¸ªå¼‚æ­¥æ“ä½œéœ€è¦æŒ‰ç…§ç‰¹å®šé¡ºåºæ‰§è¡Œæ—¶ï¼Œå¼€å‘è€…å¯èƒ½ä¸å¾—ä¸åœ¨ä¸€ä¸ªå›è°ƒå‡½æ•°ä¸­åµŒå¥—å¦ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå¯¼è‡´ä»£ç å±‚çº§è¿‡æ·±ã€å¯è¯»æ€§å·®ã€éš¾ä»¥ç»´æŠ¤ã€‚<br>
ä»¥ä¸‹æ˜¯ä¸€ä¸ªå…¸å‹çš„â€œå›è°ƒåœ°ç‹±â€ç¤ºä¾‹ï¼ˆJavaScriptï¼‰ã€‚</p>
<pre><code class="language-java">login(user =&gt; {
    getStatus(status =&gt; {
        getOrder(order =&gt; {
            getPayment(payment =&gt; {
                getRecommendAdvertisements(ads =&gt; {
                    setTimeout(() =&gt; {
                        alert(ads)
                    }, 1000)
                })
            })
        })
    })
})
</code></pre>
<p>é“¾å¼è°ƒç”¨ï¼ˆChainingï¼‰æˆä¸ºä¸€ç§å¸¸ç”¨çš„ä¼˜åŒ–æ‰‹æ®µã€‚åœ¨ JavaScript ä¸­ï¼Œâ€ŒPromiseâ€Œ æœºåˆ¶æä¾›äº†é“¾å¼è°ƒç”¨çš„èƒ½åŠ›ã€‚æ¯ä¸ª â€ŒPromiseâ€Œ å¯¹è±¡éƒ½åŒ…å«ä¸€ä¸ª â€Œthenâ€Œ æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„ â€ŒPromiseâ€Œ å¯¹è±¡ï¼Œä»è€Œå…è®¸å¼€å‘è€…å°†å¤šä¸ªå¼‚æ­¥æ“ä½œä¸²è”èµ·æ¥ï¼Œå½¢æˆæ¸…æ™°çš„é€»è¾‘æµã€‚<br>
ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ â€ŒPromiseâ€Œ é“¾å¼è°ƒç”¨çš„ç¤ºä¾‹ï¼ˆJavaScriptï¼‰ã€‚</p>
<pre><code class="language-java">login(username, password)
    .then(user =&gt; getStatus(user.id))
    .then(status =&gt; getOrder(status.id))
    .then(order =&gt; getPayment(order.id))
    .then(payment =&gt; getRecommendAdvertisements(payment.total_amount))
    .then(ads =&gt; {/*...*/});
</code></pre>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œâ€ŒPromiseâ€Œ å¹¶ä¸æ˜¯ä¸€ç§å¯ä»¥å°†åŒæ­¥ä»£ç è½¬å˜ä¸ºå¼‚æ­¥ä»£ç çš„é­”æ³•å·¥å…·ã€‚å®ƒåªæ˜¯ä¸€ç§ç¼–ç¨‹æ‰‹æ³•ï¼Œæˆ–è€…è¯´æ˜¯ä¸€ç§å°è£…æ–¹å¼ï¼Œå¹¶æ²¡æœ‰å€ŸåŠ©æ“ä½œç³»ç»Ÿçš„é¢å¤–èƒ½åŠ›ã€‚â€ŒPromiseâ€Œ çš„ä¸»è¦ä½œç”¨æ˜¯æä¾›äº†ä¸€ç§æ›´ä¼˜é›…çš„æ–¹å¼æ¥ç»„ç»‡å’Œç®¡ç†å¼‚æ­¥æ“ä½œï¼Œä½¿å¾—ä»£ç æ›´æ˜“äºé˜…è¯»å’Œç†è§£ã€‚</p>
<p><strong>æ€»ç»“ï¼šä¸ç¡¬ä»¶å…±èˆï¼Œä¸å†²çªå’Œè§£</strong><br>
Disruptorçš„ç¯å½¢ç¼“å†²ã€LongAdderçš„åˆ†æ•£çƒ­ç‚¹ã€Fork/Joinçš„å·¥ä½œçªƒå–ã€CompletableFutureçš„å¼‚æ­¥ç¼–æ’â€”â€”è¿™äº›çœ‹ä¼¼è¿¥å¼‚çš„æŠ€æœ¯ï¼Œå®åˆ™æ®Šé€”åŒå½’ã€‚å®ƒä»¬å…±åŒæ­ç¤ºäº†ç°ä»£å¹¶å‘è®¾è®¡çš„æ ¸å¿ƒè¦ä¹‰ï¼šä¸å…¶åœ¨å†²çªå‘ç”Ÿåè¢«åŠ¨åœ°åŠ é”ä»²è£ï¼Œä¸å¦‚åœ¨è®¾è®¡ä¹‹åˆå°±ä¸»åŠ¨åœ°æ¶ˆé™¤å†²çªã€‚<br>
è¿™æ ‡å¿—ç€å¹¶å‘ç¼–ç¨‹çš„å…³æ³¨ç‚¹ï¼Œå·²ä»â€œå¦‚ä½•æ­£ç¡®åŠ é”â€çš„æˆ˜æœ¯å±‚é¢ï¼Œå‡åä¸ºâ€œå¦‚ä½•ç²¾å¦™åˆ†å·¥ã€é¿å…é”â€çš„æˆ˜ç•¥é«˜åº¦ã€‚<br>
å½“æ‘©å°”å®šå¾‹çš„çº¢åˆ©é€æ¸æ¶ˆé€€ï¼ŒçœŸæ­£çš„æ€§èƒ½çªç ´ä¸å†ä¾èµ–äºç¡¬ä»¶çš„æš´åŠ›å †ç Œï¼Œè€Œæ˜¯æºäºè½¯ä»¶å±‚é¢ä¸ç¡¬ä»¶åº•å±‚æœºåˆ¶çš„â€œå…±èˆâ€ã€‚æ— è®ºæ˜¯åˆ©ç”¨ç¼“å­˜è¡Œç‰¹æ€§çš„å†…å­˜å¯¹é½ï¼Œè¿˜æ˜¯å€ŸåŠ©CASåŸå­æŒ‡ä»¤çš„ä¹è§‚æ›´æ–°ï¼Œæ¯ä¸€æ¬¡æŠ€æœ¯ä¼˜åŒ–éƒ½å°è¯äº†ä¸€ä¸ªç†å¿µï¼šç¡¬ä»¶æ€§èƒ½çš„æè‡´å‘æŒ¥ï¼Œæºäºå¯¹è®¡ç®—æœ¬è´¨çš„æ·±åˆ»ç†è§£ã€‚è¿™æ­£æ˜¯å¹¶å‘ç¼–ç¨‹ä»æŠ€æœ¯è¿ˆå‘è‰ºæœ¯çš„ç²¾é«“æ‰€åœ¨ã€‚</p>
<p><strong>å¾ˆé«˜å…´ä¸ä½ ç›¸é‡ï¼å¦‚æœä½ å–œæ¬¢æœ¬æ–‡å†…å®¹ï¼Œè®°å¾—å…³æ³¨å“¦!!!</strong></p>

</div>
<div id="MySignature" role="contentinfo">
    <p>æœ¬æ–‡æ¥è‡ªåšå®¢å›­ï¼Œä½œè€…ï¼š<a href="https://www.cnblogs.com/poemyang/" target="_blank">poemyang</a>ï¼Œè½¬è½½è¯·æ³¨æ˜åŸæ–‡é“¾æ¥ï¼š<a href="https://www.cnblogs.com/poemyang/p/19384431" target="_blank">https://www.cnblogs.com/poemyang/p/19384431</a></p>
</div>
<div class="clear"></div>

        <p class="postfoot">
            posted on 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-22 21:34">2025-12-22 21:34</span>&nbsp;
<a href="https://www.cnblogs.com/poemyang">poemyang</a>&nbsp;
é˜…è¯»(<span id="post_view_count">44</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19384431);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19384431', targetLink: 'https://www.cnblogs.com/poemyang/p/19384431', title: 'åŒ–æ•´ä¸ºé›¶ã€åˆ†è€Œæ²»ä¹‹ã€å¼‚æ­¥ç¼–æ’ï¼šä¸€æ–‡è¯»æ‡‚ç°ä»£å¹¶å‘çš„åº•å±‚å¿ƒæ³•' })">ä¸¾æŠ¥</a>

        </p>
     ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ä»æºç è§’åº¦è§£æC++20æ–°ç‰¹æ€§å¦‚ä½•ç®€åŒ–çº¿ç¨‹è¶…æ—¶å–æ¶ˆ ]]></title>
    <link>https://www.cnblogs.com/apocelipes/p/19384377</link>
    <guid>f70ef329719078d279e9912cea847e9a</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/apocelipes/p/19384377" title="å‘å¸ƒäº 2025-12-22 21:15">
    <span role="heading" aria-level="2">ä»æºç è§’åº¦è§£æC++20æ–°ç‰¹æ€§å¦‚ä½•ç®€åŒ–çº¿ç¨‹è¶…æ—¶å–æ¶ˆ</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>C++20ä¸­å¢åŠ äº†å¾ˆå¤šé‡é‡çº§æ–°ç‰¹æ€§ï¼Œå®ƒä¸ä»…å¸¦æ¥äº†rangesã€conceptå’Œåç¨‹ï¼Œä¹Ÿä¸ºå¤šçº¿ç¨‹ç¼–ç¨‹å¸¦æ¥äº†jthreadå’Œstop_sourceè¿™äº›å¼ºåŠ›è¾…åŠ©ã€‚åˆ©ç”¨è¿™äº›æ–°ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥æ›´é«˜æ•ˆåœ°ç¼–å†™å¹¶å‘ç¨‹åºã€‚</p>
<p>ä»Šå¤©è¦è¯´çš„å°±æ˜¯åˆ©ç”¨jthreadå’Œstop_sourceæ¥ç®€åŒ–çº¿ç¨‹è¶…æ—¶æ§åˆ¶çš„å®ç°ï¼Œæœ€ç»ˆæˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ªç®€å•é«˜æ•ˆã€å¯ç»´æŠ¤æ€§ä¸è¾“ç»™å·ç§°â€œå¤©ç”Ÿæ”¯æŒå¹¶å‘â€çš„Goè¯­è¨€çš„ç‰ˆæœ¬ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆéœ€è¦è¶…æ—¶æ§åˆ¶">ä¸ºä»€ä¹ˆéœ€è¦è¶…æ—¶æ§åˆ¶</h2>
<p>è¶…æ—¶æ§åˆ¶æ˜¯å¾ˆå¸¸è§çš„éœ€æ±‚ï¼Œæœ€æ™®éçš„åœºæ™¯æ˜¯ä¸ºäº†é˜²æ­¢ç¨‹åºå¡ä½æˆ–è€…é•¿æ—¶é—´å ç”¨èµ„æºï¼Œç¨‹åºä¼šä¸»åŠ¨å–æ¶ˆæ‰ä¸€äº›è¶…è¿‡å…è®¸è¿è¡Œæ—¶é—´çš„æˆ–è€…æ— å“åº”çš„çº¿ç¨‹ï¼Œæ¯”å¦‚ä¸€äº›è€—æ—¶å¾ˆé•¿çš„ç½‘ç»œè¿æ¥å¤„ç†çº¿ç¨‹ç­‰ã€‚å½“ç„¶ç”¨æˆ·ç­‰å¾—ä¸è€çƒ¦äº†æ‰‹åŠ¨ç‚¹å‡»å–æ¶ˆä»»åŠ¡æ‰§è¡Œä¹Ÿå‹‰å¼ºå¯ä»¥ç®—åœ¨å†…ã€‚</p>
<p>é€šå¸¸è¶…æ—¶å‘ç”Ÿæˆ–è€…ç”¨æˆ·ç‚¹å‡»å–æ¶ˆä¹‹åï¼Œæˆ‘ä»¬éƒ½æœŸå¾…çº¿ç¨‹èƒ½è¿…é€Ÿç»ˆæ­¢æ‰§è¡Œå¹¶è®©æ•´ä¸ªç¨‹åºä¿æŒä¸€ä¸ªå®Œæ•´ä¸”å®‰å…¨çš„çŠ¶æ€ã€‚ç„¶è€Œç°å®æ˜¯å¤æ‚çš„ï¼Œæƒ³å®ç°ä¸Šè¿°åŠŸèƒ½å¯¹äºçº¿ç¨‹æ¥è¯´æ˜¯ä¸€ä»¶éš¾äº‹ï¼Œå°¤å…¶åœ¨Linuxç³»ç»Ÿä¸Šã€‚</p>
<p>ç¬¬ä¸€ä¸ªéš¾ç‚¹æ˜¯å¦‚ä½•è®©çº¿ç¨‹çŸ¥é“è‡ªå·±è¦é€€å‡ºã€‚å¯¹äºè¿›ç¨‹æ¥è¯´è¿™ä¸æ˜¯éš¾ç‚¹ï¼Œå› ä¸ºä¸ç®¡è¿›ç¨‹åœ¨åšä»€ä¹ˆï¼Œæˆ‘ä»¬éƒ½å¯ä»¥é å‘å…¶å‘é€ä¿¡å·æ¥ç«‹å³ä¸­æ–­è¿›ç¨‹çš„æ‰§è¡Œï¼ˆå‰ææ˜¯çº¿ç¨‹æ²¡æœ‰å±è”½è¿™ä¸ªä¿¡å·ï¼‰ï¼Œè¿™æ ·è¿›ç¨‹çš„åœæ­¢è¯·æ±‚å¯ä»¥è¢«ç«‹å³æ„ŸçŸ¥åˆ°ï¼Œè¿›ç¨‹ä»è€Œå¯ä»¥å°½å¿«å®Œæˆå–„åå·¥ä½œé€€å‡ºæ‰§è¡Œã€‚åŒæ ·çš„æ‹›æ•°å¯¹å¤šçº¿ç¨‹ç¨‹åºæ¥è¯´å°±æ²¡é‚£ä¹ˆå¥½ç”¨äº†â€”â€”ä¿¡å·é»˜è®¤æ˜¯å‘ç»™æ•´ä¸ªè¿›ç¨‹çš„ï¼Œä¸ºäº†èƒ½è®©æ¯ä¸ªçº¿ç¨‹ç‹¬ç«‹åœ°æ¥æ”¶ä¿¡å·ï¼Œæˆ‘ä»¬éœ€è¦ä¿å­˜çº¿ç¨‹çš„æ ‡è¯†ç¬¦å¹¶åœ¨æ¯ä¸ªçº¿ç¨‹ä¸­è®¾ç½®æ¥æ”¶å’Œå±è”½ä¿¡å·çš„maskï¼Œè¿™å¤§å¤§å¢åŠ äº†ç¨‹åºçš„å¤æ‚æ€§ï¼›å…¶æ¬¡ä¿¡å·å¤„ç†å‡½æ•°æ˜¯æ•´ä¸ªè¿›ç¨‹å†…æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ï¼Œæˆ‘ä»¬éœ€è¦é¢å¤–çš„æ‰‹æ®µæ¥ä¿è¯å¹¶å‘å®‰å…¨ï¼ŒåŒæ—¶è¿˜å¾—å…¼é¡¾ä¿¡å·å¤„ç†å‡½æ•°éœ€è¦å¯é‡å…¥ã€å¿«é€Ÿæ‰§è¡Œçš„æœ€ä½³å®è·µï¼Œè¿™ä¼šæé«˜ç¨‹åºçš„å¼€å‘éš¾åº¦ã€‚</p>
<p>ç¬¬äºŒä¸ªéš¾ç‚¹åœ¨äºå¦‚ä½•ä¿è¯çº¿ç¨‹ä¸€å®šä¼šé€€å‡ºæ‰§è¡Œã€‚å‰é¢è¯´åˆ°ä¿¡å·å¯ä»¥æ‰“æ–­è¿›ç¨‹çš„æ‰§è¡Œï¼Œä½†è¿™åªæ˜¯é€šçŸ¥ï¼Œå®é™…ä¸Šè¿›ç¨‹å®Œå…¨å¯ä»¥åœ¨ä¿¡å·å¤„ç†å‡½æ•°è¿”å›åæ— è§†è¿™ä¸ªé€šçŸ¥ç»§ç»­è¿è¡Œï¼Œæˆ–è€…æœ‰ä¸€ç§æ›´æ™®éçš„åœºæ™¯â€”â€”ç¨‹åºæ­£å¥½å¡åœ¨æŸä¸ªç³»ç»Ÿè°ƒç”¨ä¸Šï¼Œè€Œç¨‹åºåˆè®¾ç½®äº†ç³»ç»Ÿè°ƒç”¨è¢«ä¿¡å·ä¸­æ–­åè‡ªåŠ¨é‡å¯ï¼Œè¿™æ ·å³ä½¿æˆ‘ä»¬æœ‰æ•ˆé€šçŸ¥äº†è¿›ç¨‹ï¼Œè¿›ç¨‹ä¹Ÿä¼šåœ¨æ”¶å®Œé€šçŸ¥ä¹‹åå†æ¬¡è¿›å…¥ç³»ç»Ÿè°ƒç”¨ä»è€Œæ— æ³•å“åº”åœæ­¢è¯·æ±‚ã€‚æ‰€ä»¥ä½œä¸ºä¿åº•æ‰‹æ®µï¼ŒLinuxå¯ä»¥å‘é€<code>SIGKILL</code>è¿™ä¸ªä¿¡å·å¼ºåˆ¶ç»ˆæ­¢è¿›ç¨‹ï¼Œè¿™ä¸ªä¿¡å·æ— æ³•æ•è·ä¹Ÿæ— æ³•å±è”½ï¼Œæ˜¯æˆ‘ä»¬è´§çœŸä»·å®çš„â€œåº•ç‰Œâ€ã€‚</p>
<p>ä¸Šè¿°çš„æƒ…å†µåœ¨å¤šçº¿ç¨‹ä¸­åŒæ ·å­˜åœ¨ï¼Œè€Œä¸”æˆ‘ä»¬æ²¡æœ‰â€œåº•ç‰Œâ€å¯ç”¨â€”â€”å› ä¸ºä¸ç®¡ç»™å“ªä¸ªçº¿ç¨‹å‘é€<code>SIGKILL</code>ï¼Œéƒ½ä¼šæ€æ­»æ•´ä¸ªè¿›ç¨‹è€Œä¸æ˜¯å•ç‹¬æ¥æ”¶åˆ°ä¿¡å·çš„é‚£ä¸ªçº¿ç¨‹ã€‚å¦å¤–å³ä½¿æœ‰åŠæ³•å¼ºåˆ¶ç»ˆæ­¢çº¿ç¨‹ï¼ˆæ¯”å¦‚æ—©æœŸçš„JVMï¼‰ï¼Œæˆ‘ä»¬è¿˜ä¼šé‡åˆ°èµ„æºé‡Šæ”¾çš„é—®é¢˜ã€‚è¿›ç¨‹é€€å‡ºæ‰§è¡Œä¹‹åï¼Œå†…æ ¸ä¼šå°½å¯èƒ½é‡Šæ”¾è¿›ç¨‹æŒæœ‰çš„æ‰€æœ‰èµ„æºï¼Œæ‰“å¼€çš„æ–‡ä»¶ä¼šè¢«å…³é—­ï¼Œç¼“å†²åŒºçš„å†…å®¹ä¼šè¢«åˆ·æ–°ï¼Œæ–‡ä»¶é”ä¹‹ç±»çš„åŒæ­¥æœºåˆ¶ä¹Ÿä¼šæ­£å¸¸è§£é”ï¼›ä½†çº¿ç¨‹å¹¶æ²¡æœ‰è¿™ç§è‡ªåŠ¨æ¸…ç†æœºåˆ¶ï¼Œæ¸…ç†å·¥ä½œå®Œå…¨éœ€è¦æ‰‹åŠ¨æ‰§è¡Œï¼Œä¸€æ—¦è¿›ç¨‹æ²¡æœ‰é‡Šæ”¾è‡ªå·±æŒæœ‰çš„èµ„æºå°±é€€å‡ºï¼Œç³»ç»Ÿå°±ä¼šé‡åˆ°å„ç§æ•°æ®æŸåå’Œæ­»é”ç­‰å¹¶å‘é—®é¢˜ï¼Œæ’æŸ¥å’Œä¿®å¤ä¼šæå…¶å›°éš¾ã€‚</p>
<p>ä¸ºäº†å…‹æœä¸Šè¿°éš¾ç‚¹å¹¶å®‰å…¨é«˜æ•ˆåœ°å®ç°ç»ˆæ­¢è¶…æ—¶çº¿ç¨‹çš„æ‰§è¡Œï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›é¢å¤–çš„æ§åˆ¶æ‰‹æ®µã€‚è¿™ä¹Ÿä¸€ç›´éƒ½æ˜¯å¼€å‘è€…ä¸­çš„çƒ­é—¨è¯é¢˜ã€‚</p>
<p>åœ¨ä»‹ç»C++20å¦‚ä½•ç®€åŒ–è¶…æ—¶æ§åˆ¶ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å‰äººçš„æ™ºæ…§æˆæœã€‚</p>
<h2 id="golangå®ç°è¶…æ—¶æ§åˆ¶">Golangå®ç°è¶…æ—¶æ§åˆ¶</h2>
<p>Golangæ˜¯å¤©ç”Ÿæ”¯æŒå¹¶å‘çš„è¯­è¨€ï¼Œè¿™ä¸€ç‚¹å¯è°“åå‰¯å…¶å®ï¼Œå°¤å…¶æ˜¯åœ¨è¶…æ—¶æ§åˆ¶ä¸Šã€‚</p>
<p>æˆ‘ä»¬ç›´æ¥çœ‹ä¸ªä¾‹å­ï¼Œä¾‹å­é‡Œæœ‰ä¸»çº¿ç¨‹å’Œå·¥ä½œçº¿ç¨‹ï¼Œå·¥ä½œçº¿ç¨‹è¶…æ—¶æ—¶é—´ä¸º5ç§’ï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªæ—¶é—´è¿˜æœ‰çº¿ç¨‹æ²¡å®Œæˆå·¥ä½œï¼Œå°±å–æ¶ˆæ‰€æœ‰çº¿ç¨‹çš„æ‰§è¡Œã€‚Golangé‡Œæ²¡æœ‰ç³»ç»Ÿçº§çš„çº¿ç¨‹ï¼Œä½†æˆ‘ä»¬å¯ä»¥ç”¨goroutineæ¨¡æ‹Ÿã€‚</p>
<p>åœ¨å·¥ä½œçº¿ç¨‹ä¸­æˆ‘ä»¬ç”¨sleepä»£æ›¿è€—æ—¶çš„å·¥ä½œï¼Œè¿™æ ·ä¾¿äºæµ‹è¯•ï¼š</p>
<pre><code class="language-golang">func Work(ctx context.Context, id int) error {
	for range 10 {
		select {
		case &lt;-ctx.Done():
			fmt.Printf("worker %d: canceled\n", id)
			return ctx.Err()
		default:
		}
		if rand.IntN(2) == 0 {
			time.Sleep(500 * time.Millisecond)
		} else {
			time.Sleep(time.Second)
		}
	}
	fmt.Printf("worker %d: done\n", id)
	return nil
}
</code></pre>
<p>è¶…æ—¶æ§åˆ¶æ˜¯<code>ctx</code>å‚æ•°å®ç°çš„ï¼Œæ¯æ¬¡å¾ªç¯å¤„ç†å‰æˆ‘ä»¬éƒ½ä¼šä¸»åŠ¨æ£€æŸ¥çº¿ç¨‹æ˜¯å¦éœ€è¦é€€å‡ºï¼Œè¿™ç§åä½œå¼çš„â€œè¯·æ±‚-æ£€æŸ¥-å“åº”â€æ˜¯å„ç§è¯­è¨€ä¸­å–æ¶ˆçº¿ç¨‹æ‰§è¡Œçš„å¸¸è§åšæ³•ã€‚</p>
<p>è¿™ä¸ªå·¥ä½œå‡½æ•°æ‰§è¡Œæ—¶é—´åœ¨5ç§’åˆ°10ç§’ä¹‹é—´ï¼Œå–å€¼çš„æ­¥é•¿åœ¨0.5ç§’ï¼ŒåŠ ä¸Šgoæ ‡å‡†åº“é»˜è®¤éšæœºæ•°æ˜¯å‡åŒ€åˆ†å¸ƒçš„ï¼Œæ‰€ä»¥æ•´ä½“æ‰§è¡Œæ—¶é—´çš„æ¦‚ç‡æ˜¯æ­£æ€åˆ†å¸ƒçš„ï¼Œåœ¨7.5ç§’å·¦å³æˆ‘ä»¬å¾ˆå®¹æ˜“çœ‹åˆ°è¶…æ—¶å’Œæ­£å¸¸è¿è¡Œç»“æŸä¸¤ç§æƒ…å†µã€‚æ‰€ä»¥æˆ‘ä»¬æŠŠè¶…æ—¶æ—¶é—´åˆ†åˆ«è®¾ä¸º4ç§’ã€7.5ç§’ã€11ç§’ï¼Œæ¥è¿›è¡Œæ¨¡æ‹Ÿè¿è¡Œå®éªŒï¼š</p>
<pre><code class="language-golang">func main() {
    // ä»å‘½ä»¤è¡Œè·å–è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ¯«ç§’
    timeout, err := strconv.Atoi(os.Args[1])
    if err != nil {
        panic(err)
    }
	ctx, cancel := context.WithTimeout(context.Background(), time.Duration(timeout)*time.Millisecond)
	now := time.Now()
	defer cancel()
	g := &amp;errgroup.Group{}
	for i := range 3 {
		g.Go(func() error {
			return Work(ctx, i)
		})
	}
	err = g.Wait()
	fmt.Printf("run time: %s\n", time.Since(now))
	if err != nil {
		if errors.Is(err, context.DeadlineExceeded) {
			fmt.Println("Tasks canceled")
			return
		}
		panic(err)
	}
	fmt.Println("All work done!")
}
</code></pre>
<p>ä»£ç å¾ˆç®€å•ï¼Œå…³é”®åœ¨è¿™è¡Œï¼š<code>ctx, cancel := context.WithTimeout(context.Background(), 7500*time.Millisecond)</code>ï¼Œåªè¦æˆ‘ä»¬è®¾å®šçš„æ—¶é—´åˆ°äº†ï¼Œ<code>&lt;-ctx.Done()</code>å°±ä¼šä»é˜»å¡å˜ä¸ºéé˜»å¡ï¼Œå¾ªç¯å¼€å§‹å¤„çš„æ£€æŸ¥ä¼šå‘ç°è¿™ä¸ªå˜åŒ–ï¼Œç„¶åä¼šé€€å‡ºçº¿ç¨‹çš„æ‰§è¡Œã€‚ä»£ç ä¸­ä½¿ç”¨äº†<code>errgroup</code>ï¼Œä½†è¿™ä¸æ˜¯å¿…é¡»çš„ï¼Œå®é™…ä¸Šæœ‰å¾ˆå¤šåŠæ³•å¯ä»¥é€šçŸ¥ä¸»çº¿ç¨‹ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©äº†ä¸€ç§æœ€é€šç”¨çš„ï¼Œä»£ä»·æ˜¯ä»£ç ä¼šç¨å¾®å¤æ‚ä¸€äº›ã€‚</p>
<p>è¿è¡Œä»£ç ï¼Œä¼šçœ‹åˆ°ä¸‹é¢è¿™æ ·çš„è¾“å‡ºï¼Œç»“æœæœ‰å¾ˆå¤§çš„éšæœºæˆåˆ†ï¼Œä¸‹é¢åªæ˜¯æ— æ•°ç§å¯èƒ½ä¸­çš„ä¸€ç§ï¼š</p>
<pre><code class="language-console">$ go build -o test

$ ./test 4000
worker 1: canceled
worker 0: canceled
worker 2: canceled
run time: 4.00431275s
Tasks canceled

$ ./test 7500
worker 0: done
worker 2: done
worker 1: canceled
run time: 7.507776458s
Tasks canceled

$ ./test 11000
worker 1: done
worker 2: done
worker 0: done
run time: 8.509193125s
All work done!
</code></pre>
<p>å¯ä»¥çœ‹åˆ°è¶…æ—¶æ§åˆ¶å‘æŒ¥äº†ä½œç”¨ï¼Œå°½ç®¡å†…ç½®çš„timeè®¡æ—¶æœ‰ä¸€äº›è¯¯å·®ï¼Œä½†ç¨‹åºçš„æ€»ä½“çš„è¿è¡Œæ—¶é—´æ˜¯å°äºç­‰äºè¶…æ—¶æ—¶é—´çš„ã€‚</p>
<p>Golangçš„è¶…æ—¶æ§åˆ¶å¯ä»¥é€šè¿‡<code>context</code>ç®€å•å®ç°ï¼Œä½†éœ€è¦å·¥ä½œçº¿ç¨‹ä¸»åŠ¨æ£€æŸ¥ä¸»åŠ¨é…åˆï¼Œå‰æ–‡æˆ‘ä»¬ä¹Ÿæåˆ°äº†å¼ºåˆ¶ç»ˆæ­¢å·¥ä½œçº¿ç¨‹å¾ˆå¯èƒ½ä¼šé€ æˆå¹¶å‘é—®é¢˜ï¼Œå› æ­¤æ‰€æœ‰çš„çº¿ç¨‹è¶…æ—¶æ§åˆ¶ä¸­éƒ½æ˜¯é‡‡ç”¨çš„è¿™ç§åä½œå¼é€€å‡ºæœºåˆ¶ï¼Œå³ä½¿å¤©ç”Ÿå¹¶å‘çš„è¯­è¨€ä¹Ÿä¸èƒ½å…ä¿—ã€‚ä½œä¸ºä»£ä»·ï¼Œæˆ‘ä»¬éœ€è¦è°¨æ…ç¼–ç ä»¥å…å·¥ä½œçº¿ç¨‹æ— æ³•å“åº”é€€å‡ºè¯·æ±‚ï¼ŒåŒæ—¶è¿˜éœ€è¦ä»˜å‡ºä¸€ç‚¹åœ¨å¾ªç¯é‡Œæ£€æŸ¥æ˜¯å¦éœ€è¦é€€å‡ºæ‰§è¡Œçš„æ€§èƒ½æŸå¤±ã€‚</p>
<h2 id="cä¸­çš„å…¸å‹è¶…æ—¶æ§åˆ¶å®ç°">C++ä¸­çš„å…¸å‹è¶…æ—¶æ§åˆ¶å®ç°</h2>
<p>c++æ²¡æœ‰æ–¹ä¾¿å¥½ç”¨çš„<code>context</code>ï¼Œæƒ³è¦å®ç°åä½œå¼é€€å‡ºå¾—è‡ªå·±é€ è½®å­ã€‚</p>
<p>Golangå¥½ç”¨æ˜¯å› ä¸ºæ ‡å‡†åº“å’Œè¿è¡Œæ—¶è°ƒåº¦å™¨éšè—äº†å®ç°çš„ç»†èŠ‚ï¼š<code>WithTimeout</code>å®é™…ä¸Šä¼šåˆ›å»ºä¸€ä¸ªå®šæ—¶å™¨ï¼Œåˆ°æ—¶é—´åè°ƒåº¦å™¨ä¼šæ‰§è¡Œå®šæ—¶å™¨çš„å›è°ƒå‡½æ•°ä¸»åŠ¨å…³é—­<code>ctx</code>å†…éƒ¨çš„channelï¼Œè¿™æ ·<code>&lt;-ctx.Done()</code>å°±ä¼šä»é˜»å¡å˜æˆéé˜»å¡ï¼Œåç¨‹å°±èƒ½æ£€æŸ¥åˆ°è¿™ä¸€å˜åŒ–ä»è€Œé€€å‡ºæ‰§è¡Œã€‚</p>
<p>æ ¸å¿ƒåªåœ¨äºä¸¤ç‚¹ï¼Œä»¥åˆé€‚çš„æ–¹æ³•æ ‡è®°çº¿ç¨‹å·²è¢«å–æ¶ˆå’Œå¼‚æ­¥åœ°åœ¨è¶…æ—¶åè®¾ç½®å–æ¶ˆæ ‡è®°ã€‚</p>
<p>ç¬¬ä¸€ç‚¹å¾ˆå®¹æ˜“è§£å†³ï¼Œä½¿ç”¨åŸå­å˜é‡å³å¯ã€‚ç¬¬äºŒç‚¹çš„å¼‚æ­¥é€šçŸ¥æœ‰äº›æ£˜æ‰‹ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯æœ‰å‡ ç§é€‰æ‹©ï¼š</p>
<ol>
<li>ä½¿ç”¨alarmå’Œä¿¡å·: <code>alarm</code>ä¼šæ³¨å†Œä¸€ä¸ªå®šæ—¶å™¨ï¼Œåˆ°æ—¶é—´åç»™è¿›ç¨‹å‘é€<code>SIGALRM</code>ä¿¡å·ï¼Œè™½è¯´å¤šçº¿ç¨‹ç¨‹åºé‡Œä¸æ¨èç”¨ä¿¡å·ï¼Œä½†åœ¨è¿™ä¸ªåœºæ™¯ä¸‹åœ¨ä¿¡å·å¤„ç†å‡½æ•°é‡Œè®¾ç½®åŸå­å˜é‡æ˜¯åˆé€‚çš„ï¼Œå¦å¤–ä½¿ç”¨<code>alarm(0)</code>å¯ä»¥å–æ¶ˆä¹‹å‰æ³¨å†Œçš„å®šæ—¶å™¨ã€‚</li>
<li>ä½¿ç”¨å¤šçº¿ç¨‹ï¼šæˆ‘ä»¬å¯ä»¥å¦å¤–åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œå¹¶åœ¨å…¶ä¸­ç­‰å¾…åˆ°è¶…æ—¶æ—¶é—´è¿‡å»ä¹‹åè®¾ç½®æ ‡å¿—ï¼Œè¿™æ ·ä¸»çº¿ç¨‹ä¹Ÿä¸ä¼šé˜»å¡ã€‚</li>
</ol>
<p>å½“ç„¶ä¸¤ä¸ªæ–¹æ¡ˆå„æœ‰ç¼ºç‚¹ï¼š</p>
<ol>
<li><code>alarm</code>æ˜¯æ•´ä¸ªè¿›ç¨‹å…±äº«çš„ï¼Œä¸”åŒæ—¶åªèƒ½è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œæœ€åå®ƒåªèƒ½è®¾ç½®ç§’çº§ç²¾åº¦çš„è¶…æ—¶æ—¶é—´ï¼›ä½¿ç”¨<code>setitimer</code>å¯ä»¥è§£å†³ä¸Šé¢è¿™äº›é—®é¢˜ï¼Œä½†ä¼šå‡ºç°ä¸çŸ¥é“ä¿¡å·æ˜¯å“ªä¸ªè¶…æ—¶çš„å®šæ—¶å™¨å‘é€çš„é—®é¢˜ã€‚</li>
<li>å¤šçº¿ç¨‹æ–¹æ¡ˆé—®é¢˜æ¯”è¾ƒå°‘ï¼Œé›†ä¸­åœ¨å˜é‡ç”Ÿå‘½å‘¨æœŸå’Œä»»åŠ¡æ­£å¸¸å®Œæˆå¦‚ä½•å–æ¶ˆè¶…æ—¶æ§åˆ¶çº¿ç¨‹è¿™ä¸¤ç‚¹ä¸Šã€‚</li>
</ol>
<p>ç»¼åˆæ¥çœ‹ä½¿ç”¨å¤šçº¿ç¨‹æ–¹æ¡ˆæ‰èƒ½çœŸæ­£è§£å†³é—®é¢˜ï¼Œè·¨å¹³å°æ€§ä¹Ÿæ›´å¼ºã€‚çŸ¥é“åŸç†åæˆ‘ä»¬å°±å¯ä»¥å†™å®éªŒä»£ç äº†ã€‚</p>
<p>è½¬æ¢åçš„å·¥ä½œå‡½æ•°æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="language-c++">namespace {
    std::atomic&lt;int&gt; canceled_flag{0};
    std::atomic&lt;int&gt; is_canceled{0};
}

void Work(int id)
{
    std::mt19937 rng{std::random_device{}()};
    std::uniform_int_distribution&lt;int&gt; dist(0, 1);

    for (int i = 0; i &lt; 10; ++i) {
        if (canceled_flag.load(std::memory_order_acquire) == 1) {
            std::osyncstream{std::cout} &lt;&lt; "worker: " &lt;&lt; id &lt;&lt; " canceled\n";
            is_canceled.store(1, std::memory_order_release);
            return;
        }
        if (dist(rng) == 0) {
            std::this_thread::sleep_for(std::chrono::milliseconds(500));
        } else {
            std::this_thread::sleep_for(std::chrono::seconds(1));
        }
    }

    std::osyncstream{std::cout} &lt;&lt; "worker: " &lt;&lt; id &lt;&lt; " done\n";
}
</code></pre>
<p>ä»£ç å’Œgoç‰ˆæœ¬çš„æ²¡æœ‰å¤ªå¤§å·®å¼‚ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯æˆ‘ä»¬ä¸é è¿”å›å€¼è€Œæ˜¯<code>is_canceled</code>æ ‡å¿—æ¥åŒºåˆ†çº¿ç¨‹æ˜¯å¦å› ä¸ºè¢«å–æ¶ˆè€Œé€€å‡ºã€‚åªä½¿ç”¨<code>canceled_flag</code>ä¼šå¯¼è‡´ç«æ€æ¡ä»¶å¹¶å¯¼è‡´è¯¯åˆ¤ï¼Œä½ å¯ä»¥æƒ³æƒ³æ˜¯ä¸ºä»€ä¹ˆï¼Œè¿™ç®—æ˜¯è¯¾åç»ƒä¹ ã€‚å¦å¤–æˆ‘åœ¨è¿™è¿˜ä½¿ç”¨äº†memory_orderï¼Œè¿™ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†é»˜è®¤çš„cstå†…å­˜åºå¤šå°‘æœ‰äº›æ€é¸¡ç”¨ç‰›åˆ€ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸»çº¿ç¨‹å’Œè¶…æ—¶æ§åˆ¶çº¿ç¨‹çš„é€»è¾‘ï¼š</p>
<pre><code class="language-c++">int main(int argc, const char *argv[])
{
    if (argc != 2) {
        std::cerr &lt;&lt; "wrong arg\n";
        return 1;
    }
    auto timeout = std::stoi(argv[1]);

    std::vector&lt;std::thread&gt; workers;
    constexpr int worker_num = 3;
    workers.reserve(worker_num);
    for (int i = 0; i &lt; worker_num; ++i) {
        workers.emplace_back(work, i);
    }

    std::atomic&lt;int&gt; timeout_cancel_flag{0};
    std::thread{
        // è¶…æ—¶æ§åˆ¶çº¿ç¨‹
        [&amp;timeout_cancel_flag](auto timeout){
            std::this_thread::sleep_for(timeout);
            if (timeout_cancel_flag.load(std::memory_order_acquire) == 1) { // å±é™©
                return;
            }
            canceled_flag.store(1, std::memory_order_release);
        }, std::chrono::milliseconds(timeout)
    }.detach();

    for (auto &amp;worker: workers) {
        worker.join();
    }
    timeout_cancel_flag.store(1, std::memory_order_release);

    if (is_canceled.load(std::memory_order_acquire) != 1) {
        std::osyncstream{std::cout} &lt;&lt; "All works done!\n";
    } else {
        std::osyncstream{std::cout} &lt;&lt; "Tasks canceled\n";
    }
}
</code></pre>
<p>æ•´ä½“ä¸Šæ²¡ä»€ä¹ˆéš¾æ‡‚çš„åœ°æ–¹ï¼ŒåŸºæœ¬å¯ä»¥çœ‹åšGolangç‰ˆæœ¬çš„è½¬è¯‘ï¼Œå¦‚æœçº¿ç¨‹éƒ½é€€å‡ºä¹‹åä¸ç®¡æ˜¯å¦è¶…æ—¶æˆ‘ä»¬éƒ½è¦å–æ¶ˆè¶…æ—¶æ§åˆ¶çº¿ç¨‹ã€‚æ•´ä½“ä¸Šåªæœ‰ä¸€ç‚¹ä¸ä¸€æ ·ï¼šè¶…æ—¶æ§åˆ¶çº¿ç¨‹æ˜¯detachçš„ï¼Œå› ä¸ºæˆ‘ä»¬ä¸èƒ½è®©ä¸»çº¿ç¨‹é˜»å¡ã€‚</p>
<p>ç„¶è€Œè¿™æ®µä»£ç æœ‰å¾ˆè‡´å‘½çš„ç”Ÿå‘½å‘¨æœŸé—®é¢˜ï¼Œæƒ³è±¡ä¸€ä¸‹å¦‚æœworkeréƒ½åœ¨timeoutä¹‹å‰å®Œæˆå·¥ä½œï¼Œä¸”å‡½æ•°åœ¨timeoutä¹‹å‰é€€å‡ºï¼Œä½†è¶…æ—¶æ§åˆ¶çº¿ç¨‹ä»ç„¶éœ€è¦ç¡çœ åˆ°timeoutä¸ºæ­¢ï¼Œè¿™æ—¶å€™å®ƒé†’æ¥è®¿é—®åˆ°çš„<code>timeout_cancel_flag</code>å°†ä¼šæ˜¯ä¸€ä¸ªæ— æ•ˆå€¼ã€‚</p>
<p>é—®é¢˜å‡ºåœ¨ä¸¤ä¸ªåœ°æ–¹ï¼Œç¬¬ä¸€ä¸ªæ˜¯æˆ‘ä»¬ç”¨äº†sleepï¼Œè¿™ä¸å¯ä¸­æ–­ï¼Œçº¿ç¨‹å¿…é¡»è¦ç­‰æ»¡timeoutæ—¶é—´æ‰èƒ½é€€å‡ºï¼Œè¿™ä¼šé€ æˆçº¿ç¨‹æ³„æ¼ï¼›ç¬¬äºŒæ˜¯å› ä¸ºsleepä¸å¯ä¸­æ–­ï¼Œå¯¼è‡´æˆ‘ä»¬çš„è¶…æ—¶æ§åˆ¶çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸé•¿äºä¸»çº¿ç¨‹å’Œå·¥ä½œçº¿ç¨‹ï¼Œåœ¨å…¶ä¸­å¼•ç”¨çš„ä¸»çº¿ç¨‹çš„å±€éƒ¨å˜é‡å¾ˆå¯èƒ½ä¼šå¤±æ•ˆã€‚</p>
<p>è§£å†³æ–¹æ¡ˆå½“ç„¶ä¹Ÿå¾ˆå¤šï¼Œæœ€ç®€å•çš„å°±æ˜¯ç”¨<code>std::shared_ptr</code>åŒ…è£¹æˆ‘ä»¬éœ€è¦è·¨çº¿ç¨‹è®¿é—®çš„èµ„æºï¼Œè¿™å’Œåœ¨rustä¸­ä½¿ç”¨<code>Arc</code>æ˜¯ä¸€æ ·çš„ã€‚ä½†è¿™ç§æ–¹æ¡ˆæ²»æ ‡ä¸æ²»æœ¬ï¼Œæˆ‘ä»¬çš„è¶…æ—¶æ§åˆ¶çº¿ç¨‹ä»ç„¶ä¼šæœ‰æ¯”å…¶ä»–çº¿ç¨‹é•¿çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<p>ç¬¬äºŒç§åˆ™æ˜¯ä½¿ç”¨ä¸€ç§åœ¨è¶…æ—¶ç­‰å¾…ä¸­å¯ä»¥è¢«ä¸­æ–­çš„æœºåˆ¶ï¼Œc++20å‰æˆ‘ä»¬æœ‰<code>std::timed_mutex</code>å’Œæ¡ä»¶å˜é‡å¯ç”¨ã€‚</p>
<p>æ”¹è¿›åçš„ä»£ç ï¼š</p>
<pre><code class="language-c++">auto timeout_cancel_flag = std::make_shared&lt;std::condition_variable&gt;();
std::thread{
    [timeout_cancel_flag](auto timeout){
        std::mutex timeout_lock;
        std::unique_lock u{timeout_lock};
        if (timeout_cancel_flag-&gt;wait_for(u, timeout) == std::cv_status::timeout) {
            std::osyncstream{std::cout} &lt;&lt; "cancel all threads\n";
            canceled_flag.store(1, std::memory_order_release);
        } else {
            std::osyncstream{std::cout} &lt;&lt; "self was canceled by main thread\n";
        }
    }, std::chrono::milliseconds(timeout)
}.detach();

for (auto &amp;worker: workers) {
    worker.join();
}

timeout_cancel_flag-&gt;notify_all(); // å–æ¶ˆè¶…æ—¶æ§åˆ¶çº¿ç¨‹
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ¡ä»¶å˜é‡çš„<code>wait_for</code>æ–¹æ³•ï¼Œå®ƒå¯ä»¥è®©å½“å‰çº¿ç¨‹é˜»å¡åˆ°æŒ‡å®šçš„æ—¶é—´ï¼Œæˆ–è€…ä¸­é€”è¢«<code>notify</code>å”¤é†’ã€‚è¿™å®Œç¾å®ç°äº†æˆ‘ä»¬æ—¢è¦è¶…æ—¶ç­‰å¾…åˆè¦ä¸­é€”å¯è¢«æ‰“æ–­çš„éœ€æ±‚ã€‚å¹¶ä¸”æ¡ä»¶å˜é‡æœ¬èº«ç”¨<code>std::shared_ptr</code>åŒ…è£¹ï¼Œä¸ä¼šæœ‰ä»»ä½•ç”Ÿå‘½å‘¨æœŸé—®é¢˜ã€‚</p>
<p>ç„¶è€Œæ²¡æœ‰äº†ç”Ÿå‘½å‘¨æœŸé—®é¢˜ï¼Œæˆ‘ä»¬è¿˜æœ‰æ—¶åºé—®é¢˜ï¼Œå¦‚æœä¸»çº¿ç¨‹ä¸­çš„<code>notify_all()</code>æ—©äºæ§åˆ¶çº¿ç¨‹ä¸­çš„<code>wait_for</code>æ‰§è¡Œï¼ˆæ¦‚ç‡æ¯”è¾ƒå°ä½†ä¸ä¸º0ï¼‰ï¼Œé‚£ä¹ˆè¿™æ¬¡notifyè¶…æ—¶æ§åˆ¶çº¿ç¨‹æ˜¯æ”¶ä¸åˆ°çš„ï¼Œwaitä¼šä¸€ç›´é˜»å¡åˆ°è¶…è¿‡timeoutï¼Œè¿™æ—¶å€™å†è®¾ç½®å–æ¶ˆæ ‡å¿—å°±æ²¡æœ‰æ„ä¹‰äº†ã€‚æƒ³è¦è§£å†³è¿™ç§â€œå”¤é†’ä¸¢å¤±â€é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å€ŸåŠ©waité‡è½½çš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œè®©å®ƒå‘Šè¯‰æˆ‘ä»¬è¶…æ—¶æ§åˆ¶çº¿ç¨‹æœ¬èº«æ˜¯å¦è¢«å–æ¶ˆï¼š</p>
<pre><code class="language-c++">struct TimeoutContext {
    std::atomic&lt;int&gt; canceled{0};
    std::mutex lock;
    std::condition_variable cv;
};

auto timeout_ctx = std::make_shared&lt;TimeoutContext&gt;();
std::thread{
    [timeout_ctx](auto timeout){
        // å¿…é¡»ä½¿ç”¨ctxé‡Œçš„é”æ‰èƒ½æœ‰æ•ˆé¿å…ç«æ€æ¡ä»¶
        std::unique_lock u{timeout_ctx-&gt;lock};
        if (!timeout_cancel_flag-&gt;wait_for(u, timeout, [&amp;](){ return timeout_ctx-&gt;canceled.load(std::memory_order_acquire) == 1; })) {
            // wait_for è¿”å› falseï¼Œcanceledæ˜¯å€¼è¿˜æ˜¯0ï¼Œè¯´æ˜æ˜¯è¶…æ—¶å¯¼è‡´çš„è¿”å›
            std::osyncstream{std::cout} &lt;&lt; "cancel all threads\n";
            canceled_flag.store(1, std::memory_order_release);
        } else {
            // wait_for è¿”å› trueï¼Œcanceledè¢«è®¾ç½®ä¸º1ï¼Œè¯´æ˜ä¸»çº¿ç¨‹é€šçŸ¥äº†å–æ¶ˆ
            std::osyncstream{std::cout} &lt;&lt; "self was canceled by main thread\n";
        }
    }, std::chrono::milliseconds(timeout)
}.detach();

for (auto &amp;worker: workers) {
    worker.join();
}

// å–æ¶ˆè¶…æ—¶æ§åˆ¶çº¿ç¨‹
{
    // è·å–åŒä¸€æŠŠé”ï¼Œä¿®æ”¹çŠ¶æ€æ—¶è¦ä¹ˆè¶…æ—¶æ§åˆ¶çº¿ç¨‹è¿˜æ²¡è¿è¡Œï¼Œè¦ä¹ˆå·²ç»åœ¨waitäº†
    std::lock_guard lk(timeout_ctx-&gt;lock);
    timeout_ctx-&gt;canceled.store(1, std::memory_order_release);
}
// è§£é”åæ‰èƒ½é€šçŸ¥
timeout_ctx-&gt;cv.notify_all();
</code></pre>
<p>å› ä¸ºæœ‰é”å­˜åœ¨ï¼Œæ‰€ä»¥ä¸ç®¡æ€ä¹ˆæ ·è¿è¡Œé¡ºåºåªæœ‰ä¸¤ç§ï¼š</p>
<ol>
<li>è¶…æ—¶çº¿ç¨‹å…ˆè¿è¡Œï¼Œä¸€ç›´åˆ°waitæ–¹æ³•é‡Œè§£é”ï¼Œæˆ‘ä»¬å¯ä»¥ä¿è¯waitä¸€å®šåœ¨notifyä¹‹å‰è¿è¡Œ</li>
<li>ä¸»çº¿ç¨‹è®¾ç½®è¶…æ—¶çº¿ç¨‹å–æ¶ˆæ ‡å¿—çš„ä»£ç å…ˆè¿è¡Œï¼Œè¿™æ—¶waitæ˜¯æ™šäºnotifyæ‰§è¡Œçš„ï¼Œä½†æˆ‘ä»¬è®¾ç½®å–æ¶ˆæ ‡å¿—æ˜¯å…ˆäºwaitçš„ï¼Œè€Œwaitåœ¨ä¼‘çœ å‰ä¼šå…ˆæ£€æŸ¥è°“è¯æ¡ä»¶ï¼Œæ‰€ä»¥æ¡ä»¶å˜é‡ä¼šé©¬ä¸Šé€€å‡ºä¸ä¼šè¿›è¡Œç­‰å¾…ã€‚</li>
<li>ä¼šä¸ä¼šå­˜åœ¨waitä¸­æ¡ä»¶å˜é‡è§£é™¤äº†é”ï¼Œåœ¨å³å°†è¿›å…¥ä¼‘çœ å‰ä¸»çº¿ç¨‹å®Œæˆäº†æ‰§è¡Œï¼Ÿç­”æ¡ˆæ˜¯ä¸ä¼šçš„ï¼Œæ ‡å‡†æœ‰æ˜æ–‡è¦æ±‚waitå’Œå®ƒçš„å…„å¼Ÿå‡½æ•°é‡Œunlock+waitåŠ åœ¨ä¸€èµ·æ˜¯åŸå­çš„ï¼ˆå®é™…ä¸Šåˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼Œè§£é”+ä¼‘çœ ã€è¢«å”¤é†’ã€é‡æ–°åŠ é”ï¼Œå®ƒä»¬å„è‡ªéƒ½æ˜¯åŸå­çš„ï¼‰ä¸”å’Œnotifyä¹‹é—´æ˜¯å…¨åºå…³ç³»â€”â€”è¦ä¹ˆnotifyåœ¨å‰ä»–ä»¬åœ¨åæˆ–è€…åè¿‡æ¥ï¼Œä¸å¯èƒ½åŒæ—¶æ‰§è¡Œã€‚ç®€å•è¯´ï¼Œå¦‚æœè¶…æ—¶æ§åˆ¶çº¿ç¨‹æ­£åœ¨æ‰§è¡Œunlock+waitï¼Œè¿™è¯´æ˜ä¸»çº¿ç¨‹æ²¡æœ‰æ‹¿åˆ°é”ï¼Œæ­¤æ—¶ä¸»çº¿ç¨‹è¦ä¹ˆè¿˜æ²¡è¿è¡Œåˆ°notifyï¼ˆè¿™ç§æƒ…å†µä¸ä¼šä¸¢å¤±å”¤é†’ï¼‰ï¼Œè¦ä¹ˆå·²ç»è®¾ç½®äº†æ ‡å¿—å¹¶é‡Šæ”¾äº†é”ï¼Œè°“è¯ä¼šæ£€æµ‹åˆ°æ ‡å¿—è¢«è®¾ç½®ï¼ˆè°“è¯æ£€æµ‹åœ¨é”çš„ä¿æŠ¤ä¸­ï¼‰ï¼Œæ¡ä»¶å˜é‡ä¸è¿›å…¥ä¼‘çœ ï¼›å¦‚æœnotifyåœ¨ä¹‹åè¿è¡Œï¼Œåˆ™notifyä¼šçœ‹åˆ°è¶…æ—¶æ§åˆ¶çº¿ç¨‹å·²ç»è¿›å…¥waitï¼Œä¼šå”¤é†’å®ƒã€‚æ‰€ä»¥ä¸å­˜åœ¨ä¸­é—´å¯ä»¥è¢«æ‰“æ–­çš„åœºæ™¯ã€‚</li>
</ol>
<p>ç°åœ¨ä¸å†æœ‰æ—¶åºé—®é¢˜äº†ã€‚</p>
<p>æ€»ä½“æ¥è¯´è¿™ä¸ªå®ç°è¿˜ä¸é”™ï¼Œèƒ½æ­£å¸¸å·¥ä½œæ€§èƒ½ä¹Ÿå°šå¯ï¼Œå¾ˆå¤šæ¡†æ¶ä¹Ÿé€‰æ‹©äº†ç±»ä¼¼çš„æ–¹æ¡ˆæ¥å®ç°çº¿ç¨‹çš„è¶…æ—¶å–æ¶ˆï¼Œæ¯”å¦‚Qtã€‚ç„¶è€Œå®ƒæœ‰å‡ ä¸ªæ˜¾è‘—çš„ç¼ºç‚¹ï¼š</p>
<ol>
<li>ä»£ç ä¾èµ–å¾ˆå¤šå…¨å±€çŠ¶æ€</li>
<li>æˆ‘ä»¬éœ€è¦ç”¨<code>join</code>ç­‰å¾…æ‰€æœ‰çº¿ç¨‹é€€å‡ºï¼Œè¿™æ˜¯å› ä¸ºæ ‡å‡†åº“çš„threadä¸joinå°±ææ„ä¼šå¯¼è‡´ç¨‹åºå´©æºƒï¼Œç„¶è€Œè¿™æ˜¯ä¸å¿…è¦çš„ï¼Œæˆ‘ä»¬åªå…³å¿ƒå·¥ä½œæ˜¯å¦å®Œæˆï¼Œå‰©ä¸‹çš„èµ„æºé‡Šæ”¾å’Œçº¿ç¨‹é€€å‡ºæ— éœ€å»ç­‰å¾…</li>
<li>çº¿ç¨‹ä¹‹é—´æš´éœ²äº†è¿‡å¤šçš„å®ç°ç»†èŠ‚ï¼Œæ¯”å¦‚flagå…·ä½“çš„å€¼ï¼Œå†æ¯”å¦‚<code>std::condition_variable</code>ç”¨æ¥é€šçŸ¥è¶…æ—¶æ§åˆ¶çº¿ç¨‹</li>
<li>ä»£ç çœŸçš„å¾ˆå¤æ‚ï¼Œæƒ³æ­£ç¡®å®ç°æ•´ä½“é€»è¾‘ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œæ¯”å¦‚æœç»å”¤é†’ä¸¢å¤±</li>
</ol>
<p>å°½ç®¡æœ‰è¿™äº›ç¼ºç‚¹ï¼Œä½†åœ¨æ–°æ ‡å‡†ä¹‹å‰æˆ‘ä»¬åªèƒ½ä½¿ç”¨è¿™ä¸ªæ–¹æ¡ˆã€‚å½“ç„¶å¦‚æœæ”¾å¼ƒè·¨å¹³å°çš„è¯ï¼ŒLinuxä¸Šæ›´å®‰å…¨æ›´ç®€å•çš„åšæ³•å…¶å®æ˜¯<code>eventfd+epoll_wait</code>ï¼Œå®ƒä¸éœ€è¦å¤ªå¤šçš„å¤–éƒ¨çŠ¶æ€ï¼Œä¸”é€»è¾‘ç®€å•æ˜“æ‡‚ï¼Œæ¯”ç”¨æ¡ä»¶å˜é‡è¿˜è¦é¢„é˜²å”¤é†’ä¸¢å¤±å¼ºå¤ªå¤šäº†ï¼Œä½¿ç”¨å¾—å½“çš„è¯å®ƒçš„æ€§èƒ½ä¹Ÿä¸ä¼šæ¯”çº¯å†…å­˜æ“ä½œçš„æ¡ä»¶å˜é‡å·®å¤šå°‘ã€‚</p>
<h2 id="c20å¸¦æ¥çš„ç®€åŒ–">C++20å¸¦æ¥çš„ç®€åŒ–</h2>
<p>C++20ä¸ºå¹¶å‘ç¼–ç¨‹ä½“éªŒå¸¦æ¥äº†ä¸å°‘æå‡ã€‚</p>
<p>ç¬¬ä¸€ä¸ªå°±æ˜¯<code>std::jthread</code>ï¼Œå®ƒä¼šåœ¨ææ„çš„æ—¶å€™è‡ªåŠ¨joinï¼Œä»è€Œé¿å…äº†<code>std::thread</code>æ‰‹åŠ¨æ“ä½œçš„éº»çƒ¦ã€‚ä¸ä»…å¦‚æ­¤ï¼Œæ¯ä¸ª<code>jthread</code>ä¸­è¿˜åŒ…å«ä¸€ä¸ª<code>std::stop_token</code>ï¼Œè¿™å¯ä»¥ç®€å•å®ç°çº¿ç¨‹çš„åä½œå¼å–æ¶ˆæ‰§è¡Œã€‚ä»…ä»…è¿™ä¸€ä¸ªæ–°ç‰¹æ€§å°±å·²ç»è§£å†³äº†ä¸Šä¸€èŠ‚è¯´çš„ç¼ºç‚¹ä¸­çš„å‰ä¸¤æ¡ã€‚</p>
<p>ç¬¬äºŒä¸ªæœ‰ç”¨çš„æ–°ç‰¹æ€§æ˜¯<code>std::stop_source</code>å’Œ<code>std::stop_token</code>ã€‚ä¸€ä¸ª<code>std::stop_source</code>å¯ä»¥äº§ç”Ÿå¤šä¸ª<code>std::stop_token</code>ï¼Œå½“ä¸€ä¸ªsourceè¢«å–æ¶ˆçš„æ—¶å€™ï¼Œæ¯ä¸ªä»å®ƒé‚£æ´¾ç”Ÿå‡ºæ¥çš„tokenéƒ½ä¼šæ”¶åˆ°é€šçŸ¥ï¼Œè¿™å¯ä»¥ä¸Šä½æ›¿ä»£æˆ‘ä»¬ä¹‹å‰ä½¿ç”¨çš„<code>canceled_flag</code>ã€‚</p>
<p>ç¬¬ä¸‰ä¸ªæ˜¯<code>std::latch</code>ï¼Œä½ å¯ä»¥æŠŠå®ƒå½“æˆgoçš„<code>sync.WaitGroup</code>ï¼Œå®ƒå¯ä»¥è®©æˆ‘ä»¬åœ¨å·¥ä½œçº¿ç¨‹å®Œæˆå·¥ä½œä¹‹åç«‹å³é€šçŸ¥ä¸»çº¿ç¨‹ï¼Œè€Œä¸ç”¨è°ƒç”¨<code>join</code>ç­‰å¾…çº¿ç¨‹å®Œå…¨é€€å‡ºã€‚</p>
<p>æœ€åä¸€ä¸ªåˆ™æ˜¯<code>std::condition_variable_any</code>æ–°å¢äº†å¯ä»¥ç”¨<code>stop_token</code>ä¸­æ–­ç­‰å¾…çš„æ–¹æ³•ï¼Œæ— éœ€æˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨notifyï¼Œè¿™æ ·å¯ä»¥å°½é‡éšè—å®ç°ç»†èŠ‚ã€‚</p>
<p>æˆ‘ä»¬é¦–å…ˆæ”¹é€ å·¥ä½œå‡½æ•°ï¼š</p>
<pre><code class="language-c++">bool work(std::stop_token stoken, int id)
{
    std::mt19937 rng{std::random_device{}()};
    std::uniform_int_distribution&lt;int&gt; dist(0, 1);

    for (int i = 0; i &lt; 10; ++i) {
        if (stoken.stop_requested()) {
            std::osyncstream{std::cout} &lt;&lt; "worker: " &lt;&lt; id &lt;&lt; " canceled\n";
            return false;
        }
        if (dist(rng) == 0) {
            std::this_thread::sleep_for(std::chrono::milliseconds(500));
        } else {
            std::this_thread::sleep_for(std::chrono::seconds(1));
        }
    }

    std::osyncstream{std::cout} &lt;&lt; "worker: " &lt;&lt; id &lt;&lt; " done\n";
    return true;
}
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬ä¸ä¾èµ–å…¨å±€å˜é‡é€šçŸ¥çº¿ç¨‹é€€å‡ºäº†ã€‚å¹¶ä¸”å‡½æ•°çš„è¿”å›å€¼æ”¹æˆäº†boolï¼Œä»¥è¡¨ç¤ºçº¿ç¨‹æ˜¯å¦æ˜¯å› ä¸ºè¢«å–æ¶ˆè€Œé€€å‡ºçš„ã€‚æˆ‘ä»¬é€šè¿‡<code>stoken.stop_requested()</code>åˆ¤æ–­çº¿ç¨‹æ˜¯å¦è¢«å–æ¶ˆã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬åˆ©ç”¨C++20æ”¹é€ ä¸»çº¿ç¨‹å’Œè¶…æ—¶æ§åˆ¶ï¼š</p>
<pre><code class="language-c++">int main(int argc, const char *argv[])
{
    if (argc != 2) {
        std::cerr &lt;&lt; "wrong arg\n";
        return 1;
    }
    auto timeout = std::stoi(argv[1]);

    std::atomic&lt;int&gt; is_canceled{0};
    std::stop_source source;
    std::vector&lt;std::jthread&gt; workers;
    constexpr int worker_num = 3;
    std::latch wait_group{worker_num};
    workers.reserve(worker_num);
    for (int i = 0; i &lt; worker_num; ++i) {
        workers.emplace_back([&amp;](int id){
            if (!work(source.get_token(), id)) {
                is_canceled.store(1, std::memory_order_release);
            }
            wait_group.count_down(); // ä¸‰ä¸ªçº¿ç¨‹éƒ½è°ƒç”¨è¿‡ä¹‹åï¼Œwaitä¼šè§£é™¤é˜»å¡
        }, i);
    }

    // ç°åœ¨ä¸éœ€è¦ä¸“é—¨detachäº†ï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„
    std::jthread timeout_control{
        [&amp;source](std::stop_token stoken, std::chrono::milliseconds timeout){
            std::mutex timeout_lock;
            std::unique_lock u{timeout_lock};
            std::condition_variable_any timeout_cancel;
            if (!timeout_cancel.wait_for(u, stoken, timeout, [&amp;stoken] { return stoken.stop_requested(); })) {
                std::osyncstream{std::cout} &lt;&lt; "cancel all threads\n";
                source.request_stop();
            } else {
                std::osyncstream{std::cout} &lt;&lt; "self was canceled by main thread\n";
            }
        }, std::chrono::milliseconds(timeout)
    };

    wait_group.wait(); // ç­‰å·¥ä½œçº¿ç¨‹å®Œæˆ
    timeout_control.request_stop(); // å·¥ä½œçº¿ç¨‹é€€å‡ºåç«‹å³å–æ¶ˆè¶…æ—¶æ§åˆ¶çº¿ç¨‹ï¼Œå³ä½¿çº¿ç¨‹å·²ç»æ‰§è¡Œå®Œæˆä¹Ÿèƒ½å®‰å…¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•

    if (is_canceled.load(std::memory_order_acquire) != 1) {
        std::osyncstream{std::cout} &lt;&lt; "All works done!\n";
    } else {
        std::osyncstream{std::cout} &lt;&lt; "Tasks canceled\n";
    }
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ç°åœ¨å®Œå…¨ä¸ä½¿ç”¨å…¨å±€å˜é‡äº†ï¼Œè€Œä¸”çº¿ç¨‹çš„åä½œå¼å–æ¶ˆæ˜¯<code>request_stop()</code>å’Œ<code>stop_requested()</code>å…±åŒå®Œæˆçš„ï¼Œä¸ä¼šæš´éœ²å¤ªå¤šå®ç°ç»†èŠ‚ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯<code>!timeout_cancel.wait_for(u, stoken, timeout, [&amp;stoken] { return stoken.stop_requested(); })</code>è¿™è¡Œä»£ç ã€‚è¿™è¡Œä»£ç å’Œæ™®é€šæ¡ä»¶å˜é‡çš„<code>wait_for</code>ä¸€æ ·ï¼Œåªä¸è¿‡å¤šäº†ä¸€ä¸ªå‚æ•°<code>stoken</code>ï¼Œè¿™ä¸ªå‡½æ•°ä¼šé˜»å¡ä½å½“å‰çº¿ç¨‹ï¼Œç›´åˆ°è¶…æ—¶ã€è¢«notifyæˆ–è€…stokenè¢«å–æ¶ˆã€‚æœ€åä¸€ä¸ªå‚æ•°lambdaçš„è¿”å›å€¼ä¼šä½œä¸º<code>wait_for</code>çš„è¿”å›å€¼ï¼Œè¿™ä¸ªlambdaä¼šåœ¨é˜»å¡è§£é™¤åç«‹å³è°ƒç”¨ï¼Œå› æ­¤æˆ‘ä»¬åœ¨è¿™ä¸ªå‡½æ•°é‡Œæ£€æŸ¥<code>stoken</code>æ˜¯å¦è¢«å–æ¶ˆã€‚å¦‚æœ<code>stoken</code>æ²¡æœ‰è¢«å–æ¶ˆï¼Œè¯´æ˜æ˜¯å› ä¸ºè¶…æ—¶å¯¼è‡´çš„è¿”å›ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨å…¶ä»–åœ°æ–¹è°ƒç”¨notifyï¼Œå› æ­¤åœ¨è¿™æ—¶æˆ‘ä»¬éœ€è¦å–æ¶ˆå…¶ä»–å·¥ä½œçº¿ç¨‹ã€‚</p>
<p>æ–°ä»£ç ä¸ä»…æ›´ç®€æ´ï¼Œè€Œä¸”æ²¡æœ‰ä¸Šä¸€èŠ‚é‚£æ ·çš„æ—¶åºé—®é¢˜ï¼š</p>
<ol>
<li>å¦‚æœstokençš„å–æ¶ˆå‘ç”Ÿåœ¨æ•´ä¸ªwaitä¹‹å‰ã€‚waité‡Œçš„è°“è¯æ£€æµ‹ä¼šå‘ç°waitè¢«å–æ¶ˆ</li>
<li>stokençš„å–æ¶ˆå‘ç”Ÿåœ¨è°“è¯æ£€æµ‹ä¹‹åã€unlock+waitä¹‹å‰ã€‚<code>condition_variable_any</code>é‡Œæœ‰å†…éƒ¨é”ï¼Œè°ƒç”¨<code>notify_all</code>ï¼ˆå–æ¶ˆstokenä¼šè‡ªåŠ¨è°ƒç”¨ï¼‰å’Œ<code>unlock+wait</code>ä¹‹å‰éƒ½ä¼šå…ˆå°è¯•è·å–è¿™ä¸ªé”ï¼Œ<code>unlock+wait</code>åœ¨è·å–é”ä¹‹åä¼šæ£€æŸ¥stokenæ˜¯å¦è¢«å–æ¶ˆï¼Œæ‰€ä»¥å¦‚æœ<code>notify</code>å…ˆæ‰§è¡Œï¼Œé‚£ä¹ˆwaitä¼šæ£€æµ‹åˆ°stokenå·²å–æ¶ˆï¼›å¦‚æœ<code>unlock+wait</code>å…ˆæ‰§è¡Œï¼Œé‚£ä¹ˆnotifyä¸€å®šæ˜¯åœ¨waitä¹‹åæ‰§è¡Œçš„ï¼Œä¸å­˜åœ¨ä¸¢å¤±</li>
<li>å–æ¶ˆå‘ç”Ÿåœ¨waitä¹‹åï¼Œè¿™æ˜¯æœ€å®‰å…¨çš„æƒ…å†µï¼Œä¸ä¼šæœ‰å”¤é†’ä¸¢å¤±ã€‚</li>
</ol>
<p><code>condition_variable_any</code>å†…éƒ¨æŒæœ‰çš„é”æ­£å¥½å¯¹åº”æˆ‘ä»¬ä¸Šä¸€èŠ‚çš„<code>TimeoutContext::lock</code>ï¼Œè€Œ<code>stop_token</code>å¯¹åº”<code>TimeoutContext::canceled</code>ï¼Œ<code>request_stop()</code>åˆ™å¯¹åº”äº†åŠ é”è®¾ç½®æ ‡å¿—å¹¶è°ƒç”¨notifyã€‚ç°åœ¨æ‰€æœ‰æ“ä½œall in oneï¼Œä»£ç åœ¨ä¿è¯å®‰å…¨çš„åŒæ—¶å°†å¤æ‚çš„ç»†èŠ‚å…¨éƒ¨éšè—ã€‚</p>
<p>å°½ç®¡ä»æœ‰ä¸€å®šå¤æ‚æ€§ï¼Œä½†åˆ©ç”¨<code>condition_variable_any</code>å·²ç»æ˜¯æ¯”è¾ƒç†æƒ³çš„è¶…æ—¶æ§åˆ¶è§£å†³æ–¹æ¡ˆäº†ã€‚</p>
<h3 id="condition_variable_anyæ˜¯å¦‚ä½•é…åˆstop_tokençš„">condition_variable_anyæ˜¯å¦‚ä½•é…åˆstop_tokençš„</h3>
<p>æœ€åè¿˜æœ‰ä¸€ä¸ªå°æ’æ›²ï¼Œ<code>condition_variable_any</code>æ˜¯å¦‚ä½•é…åˆ<code>stop_token</code>çš„ã€‚</p>
<p>C++20åªç»™<code>condition_variable_any</code>æ·»åŠ äº†æ”¯æŒ<code>stop_token</code>çš„æ¥å£ï¼Œè¿™æ˜¯å› ä¸ºæ™®é€šçš„æ¡ä»¶å˜é‡å’Œå…¶ä»–çš„é”å‡ ä¹éƒ½æ˜¯ç³»ç»Ÿæ¥å£çš„ç®€å•åŒ…è£…ï¼Œè¿™äº›ç³»ç»Ÿæ¥å£æœ¬èº«ä¸æ”¯æŒä¸­æ–­ï¼Œå› æ­¤ä¹Ÿæ²¡æ³•ä¸ºè¿™äº›åŒ…è£…æ¥å£æ·»åŠ æ”¯æŒï¼Œè€Œ<code>condition_variable_any</code>ä¸ºäº†æ”¯æŒæ‰€æœ‰ç§ç±»çš„é”ï¼Œå‡ ä¹æ‰€æœ‰æ ‡å‡†åº“çš„å®ç°éƒ½åœ¨è‡ªå·±å†…éƒ¨åˆ›å»ºäº†ä¸€ä¸ªæ™®é€šçš„æ¡ä»¶å˜é‡å’Œå†…éƒ¨é”ï¼Œå¹¶åŸºäºè¿™ä¸ªæ¡ä»¶å˜é‡é‡æ–°å®ç°äº†æ‰€æœ‰æ¥å£ï¼Œå› æ­¤ç»™æ”¯æŒ<code>stop_token</code>ç•™ä¸‹äº†ä½™åœ°ã€‚</p>
<p>æˆ‘ä»¬ä»¥libcxxçš„å®ç°ä¸ºä¾‹ï¼š</p>
<pre><code class="language-c++">// notifyå…¨éƒ½è¦å…ˆåŠ å†…éƒ¨é”
inline void condition_variable_any::notify_one() _NOEXCEPT {
  { lock_guard&lt;mutex&gt; __lx(*__mut_); }
  // notifyæ—¶æœ€å¥½è¦è§£é”ï¼Œå¦åˆ™waitçº¿ç¨‹è¢«å”¤é†’åå‘ç°åŠ ä¸äº†é”åˆä¼šå†æ¬¡ä¼‘çœ ï¼Œæ•ˆç‡å¾ˆä½
  // é”åªæ˜¯ä¸ºäº†è®©notifyçš„è°ƒç”¨å’Œunlock+waitäº’æ–¥
  __cv_.notify_one();
}

inline void condition_variable_any::notify_all() _NOEXCEPT {
  { lock_guard&lt;mutex&gt; __lx(*__mut_); }
  __cv_.notify_all();
}

// wait_foræœ€ç»ˆè°ƒç”¨çš„è¿™ä¸ªæ–¹æ³•
template &lt;class _Lock, class _Clock, class _Duration, class _Predicate&gt;
bool condition_variable_any::wait_until(
    _Lock&amp; __user_lock,
    stop_token __stoken,
    const chrono::time_point&lt;_Clock, _Duration&gt;&amp; __abs_time,
    _Predicate __pred) {
    // å…ˆæ£€æŸ¥ä¸€æ¬¡æ˜¯å¦è¢«å–æ¶ˆï¼Œå› ä¸ºåé¢çš„æ“ä½œéƒ½å¾ˆé‡é‡çº§ä¼šæµªè´¹æ€§èƒ½
  if (__stoken.stop_requested())
    return __pred();

  shared_ptr&lt;mutex&gt; __mut = __mut_;
  // è¿™è¡Œæ˜¯å…³é”®ï¼Œè®©åº•å±‚çš„æ™®é€šæ¡ä»¶å˜é‡å¯ä»¥ä»waitä¸­è‹é†’
  stop_callback __cb(__stoken, [this] { notify_all(); });

  while (true) {
    // ä»waitä¸­å› ä¸ºnotifyé†’æ¥ä¼šå›åˆ°è¿™é‡Œï¼Œè°ƒç”¨æœ€åçš„lambdaæ¥æ£€æŸ¥æ˜¯å¦åº”è¯¥é€€å‡ºç­‰å¾…
    // åˆæ¬¡è¿›å…¥å¾ªç¯ä¹Ÿä¼šæ£€æŸ¥ï¼Œä»¥å…è¿›è¡Œä¸å¿…è¦çš„ç­‰å¾…
    // æ£€æŸ¥å…¶å®åœ¨ä¸´ç•ŒåŒºä¹‹å¤–ï¼Œæ‰€ä»¥å…¶å®æœ€å¥½æˆ‘ä»¬å¾—æŒæœ‰ä¼ å…¥çš„å¤–éƒ¨é”æ‰èƒ½å®Œå…¨é¿å…é™æ€æ¡ä»¶
    // åªä¸è¿‡æ°å¥½æˆ‘ä»¬çš„è°“è¯æ£€æŸ¥åªæ£€æŸ¥äº†stokenæ˜¯å¦è¢«å–æ¶ˆï¼Œå’Œä¸‹é¢ä¸´ç•ŒåŒºå†…çš„ä¸€æ ·ï¼Œæ‰€ä»¥è¿™åœ°æ–¹çš„æ—¶åºæ²¡æœ‰å½±å“ã€‚æˆ‘ä»¬åœ¨ä¸»çº¿ç¨‹ä¸­ä¹Ÿæ— éœ€åŠ å¤–éƒ¨é”
    if (__pred())
      return true;

    // å…ˆåŠ å†…éƒ¨é”ï¼Œä»¥å…ç«æ€æ¡ä»¶å‡ºç°ï¼Œä»£ç æœ¬èº«çš„æ³¨é‡Šå·²ç»è§£é‡Šæ¸…æ¥šäº†ï¼Œæ— éœ€å¤šè¨€
    // We need to take the internal lock before checking stop_requested,
    // so that the notification cannot come in between the stop_requested
    // check and entering the wait.
    // Note that the stop_callback takes the same internal lock before notifying
    unique_lock&lt;mutex&gt; __internal_lock(*__mut);
    // æ£€æŸ¥stop_tokenæ˜¯å¦è¢«å–æ¶ˆ
    // notifyæ‹¿åˆ°é”å…ˆè¿è¡Œçš„è¯å¾ªç¯å°±ä¼šåœ¨è¿™é‡Œé€€å‡º
    if (__stoken.stop_requested())
      break;

    // è§£é”ç”¨æˆ·ä¼ å…¥çš„å¤–éƒ¨é”ï¼Œå’Œæ™®é€šçš„æ¡ä»¶å˜é‡ä¸€æ ·
    __unlock_guard&lt;_Lock&gt; __unlock(__user_lock);
    unique_lock&lt;mutex&gt; __internal_lock2(
        std::move(__internal_lock)); // switch unlock order between __internal_lock and __user_lock

    // å†…éƒ¨é”çš„unlock+wait
    if (__cv_.wait_until(__internal_lock2, __abs_time) == cv_status::timeout)
      // è¶…æ—¶ä¹‹åç›´æ¥é€€å‡ºå¾ªç¯ï¼Œå¦åˆ™å›åˆ°å¾ªç¯å¼€å§‹å¤„
      break;
  } // __internal_lock2.unlock(), __user_lock.lock()
  // è¿˜ä¼šè°ƒç”¨è°“è¯ï¼Œå› æ­¤è¿”å›å€¼æ€»æ˜¯èƒ½ååº”stokenæ˜¯å¦è¢«å–æ¶ˆ
  return __pred();
}

template &lt;class _Lock&gt;
struct __unlock_guard {
  _Lock&amp; __lock_;

  // å¯¹è±¡åˆ›å»ºçš„æ—¶å€™è§£é”ï¼Œææ„çš„æ—¶å€™åŠ é”
  _LIBCPP_HIDE_FROM_ABI __unlock_guard(_Lock&amp; __lock) : __lock_(__lock) { __lock_.unlock(); }

  _LIBCPP_HIDE_FROM_ABI ~__unlock_guard() _NOEXCEPT // turns exception to std::terminate
  {
    __lock_.lock();
  }

  __unlock_guard(const __unlock_guard&amp;)            = delete;
  __unlock_guard&amp; operator=(const __unlock_guard&amp;) = delete;
};
</code></pre>
<p>æ ¸å¿ƒåœ¨äº<code>stop_callback __cb(__stoken, [this] { notify_all(); });</code>è¿™ä¸€è¡Œï¼Œ<code>std::stop_callback</code>å¯ä»¥æŠŠå›è°ƒå‡½æ•°æ³¨å†Œç»™<code>stop_token</code>å…³è”çš„<code>stop_source</code>ï¼Œå½“sourceè¢«è¦æ±‚åœæ­¢æ—¶ï¼Œæ³¨å†Œçš„å›è°ƒä¼šåœ¨è°ƒç”¨<code>request_stop()</code>çš„é‚£ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œå›è°ƒå¯ä»¥æ³¨å†Œå¤šä¸ªï¼Œè°ƒç”¨é¡ºåºæ˜¯ä¸ç¡®å®šçš„ã€‚</p>
<p>æ‰€ä»¥è¿™è¡Œä»£ç ç­‰äºåœ¨æˆ‘ä»¬è¦æ±‚å–æ¶ˆ<code>stoken</code>çš„æ—¶å€™ï¼Œé¡ºæ‰‹è°ƒç”¨<code>notify_all()</code>æŠŠåº•å±‚çš„æ¡ä»¶å˜é‡å”¤é†’äº†ï¼Œå”¤é†’ä¹‹åå¾ªç¯ä¼šæ£€æŸ¥lambdaå’Œ<code>stoken</code>ï¼Œç„¶åå‘ç°è‡ªå·±è¢«å–æ¶ˆä»è€Œä»waitä¸­é€€å‡ºã€‚è¿™å°±æ˜¯waitå¯ä»¥è¢«ç«‹å³ä¸­æ–­çš„ç§˜å¯†ã€‚</p>
<p>ä¸è¿‡å¦‚æœtokenå·²ç»å–æ¶ˆï¼Œ<code>stop_callback</code>æ˜¯ä¸ç”Ÿæ•ˆçš„ï¼Œä½†è¿™ä¹Ÿæ²¡å…³ç³»ï¼Œå› ä¸ºåœ¨è¿›å…¥çœŸæ­£çš„ç­‰å¾…æ”¯æŒï¼Œæˆ‘ä»¬è‡³å°‘æ£€æŸ¥äº†ä¸¤æ¬¡<code>stoken</code>æ˜¯å¦è¢«å–æ¶ˆï¼Œä¸”ç¬¬äºŒæ¬¡æ£€æŸ¥æ˜¯è¢«é”ä¿æŠ¤çš„ï¼Œnotifyçš„callbackä¸ç”Ÿæ•ˆæˆ–è€…å”¤é†’ä¸¢å¤±äº†æˆ‘ä»¬ä¹Ÿèƒ½æ£€æŸ¥åˆ°stokenå·²ç»è¢«å–æ¶ˆï¼Œä¸ä¼šè¿›å…¥æ— æ„ä¹‰çš„ç­‰å¾…ã€‚</p>
<p>ä¸Šé¢çš„ä»£ç ä¹Ÿå±•ç°äº†<code>condition_variable_any</code>çš„é—®é¢˜ï¼Œç›¸æ¯”ç›´æ¥è½¬å‘åˆ°ç³»ç»Ÿæ¥å£çš„å…¶ä»–æ ‡å‡†åº“åŠŸèƒ½ï¼Œå®ƒçš„æ€§èƒ½é€šå¸¸è¦å·®ä¸€äº›ï¼Œå¯¹äºæ€§èƒ½è¦æ±‚è¾ƒé«˜çš„åœºæ™¯å¿…é¡»è°¨æ…ä½¿ç”¨ã€‚</p>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>ä¸ºäº†ä¿è¯å¹¶å‘å®‰å…¨ï¼Œä¸Šé¢çš„é€»è¾‘æ˜¯æœ‰äº›ç»•çš„ï¼Œä½†æ€»ç»“èµ·æ¥ä¹Ÿå°±å‡ å¥è¯ï¼š</p>
<ol>
<li>è®¾ç½®å–æ¶ˆæ ‡å¿—éœ€è¦å’Œunlock+waitäº’æ–¥ï¼Œè¿™æ ·è¶…æ—¶æ§åˆ¶çº¿ç¨‹æ‰æœ‰æœºä¼šæ£€æµ‹è‡ªå·±æ˜¯å¦è¢«å–æ¶ˆã€‚</li>
<li>è¶…æ—¶æ§åˆ¶çº¿ç¨‹ä¸­çš„å–æ¶ˆæ ‡å¿—æ£€æŸ¥ï¼ˆC++20å‰çš„è°“è¯åŒ¿åå‡½æ•°ã€C++20é‡Œçš„<code>stoken.stop_requested</code>ï¼‰éœ€è¦å’Œunlock+waitåœ¨åŒä¸€å—ä¸´ç•ŒåŒºé‡Œï¼Œè¿™æ ·æ‰èƒ½ä¿è¯è¿›å…¥waitä¹‹å‰å–æ¶ˆæ ‡å¿—è¢«æ­£ç¡®æ£€æµ‹åˆ°æˆ–è€…notifyåœ¨waitä¹‹åæ‰è¢«è°ƒç”¨ã€‚</li>
<li>notifyé€šå¸¸åœ¨è®¾ç½®å®Œå–æ¶ˆæ ‡å¿—ä¹‹åæ‰§è¡Œï¼Œä½†ä¸éœ€è¦åœ¨ä¸´ç•ŒåŒºé‡Œï¼Œå³ä½¿å”¤é†’é”™è¿‡äº†æˆ‘ä»¬ä¹Ÿæœ‰ä¿åº•æªæ–½ã€‚</li>
</ol>
<p>åªè¦æƒ³æ˜ç™½è¿™ä¸‰ç‚¹ä½ å°±æŒæ¡äº†è¿™ç§æ¨¡å¼ï¼Œä»¥åé‡åˆ°è¶…æ—¶å–æ¶ˆæˆ–è€…é˜²æ­¢å”¤é†’ä¸¢å¤±çš„åœºæ™¯æ—¶ä¸è‡³äºä¸¤çœ¼ä¸€é»‘äº†ã€‚</p>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¦ç”¨ç°ä»£C++ï¼Œæ–°ç‰¹æ€§æœ‰æ—¶å€™çœŸçš„å¯ä»¥é£è·ƒå¼æå‡å¼€å‘æ•ˆç‡ï¼Œè™½è¯´è¿™ç§ç¨‹åº¦å’ŒGolangç›¸æ¯”è¿˜ç§°ä¸ä¸Šä¼˜é›…ï¼Œä½†å¿ƒæ™ºè´Ÿæ‹…å‡è½»äº†å¾ˆå¤šåŠ ç­ä¹Ÿæ²¡é‚£ä¹ˆç´¯äº†ã€‚</p>
<p>ä½†è¯è¯´å›æ¥ï¼ŒåŒæ ·çš„éœ€æ±‚å¦‚æœä¸æ˜¯è¿½æ±‚æè‡´æ€§èƒ½/åªèƒ½ç”¨C++ï¼Œæˆ‘æ›´ä¹æ„ç”¨Golangå»å®ç°ã€‚</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-22 21:15">2025-12-22 21:15</span>&nbsp;
<a href="https://www.cnblogs.com/apocelipes">apocelipes</a>&nbsp;
é˜…è¯»(<span id="post_view_count">41</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19384377);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19384377', targetLink: 'https://www.cnblogs.com/apocelipes/p/19384377', title: 'ä»æºç è§’åº¦è§£æC++20æ–°ç‰¹æ€§å¦‚ä½•ç®€åŒ–çº¿ç¨‹è¶…æ—¶å–æ¶ˆ' })">ä¸¾æŠ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ C#/.NET/.NET CoreæŠ€æœ¯å‰æ²¿å‘¨åˆŠ | ç¬¬ 64 æœŸï¼ˆ2025å¹´12.1-12.21ï¼‰ ]]></title>
    <link>https://www.cnblogs.com/Can-daydayup/p/19384367</link>
    <guid>6ab9454194159f7c496e6e62337f9e99</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Can-daydayup/p/19384367" title="å‘å¸ƒäº 2025-12-22 21:12">
    <span role="heading" aria-level="2">C#/.NET/.NET CoreæŠ€æœ¯å‰æ²¿å‘¨åˆŠ | ç¬¬ 64 æœŸï¼ˆ2025å¹´12.1-12.21ï¼‰</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p><img src="https://img2024.cnblogs.com/blog/1336199/202509/1336199-20250902130707396-140987169.png" alt="image" loading="lazy"></p>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">å‰è¨€</span></span></h2>
<p data-tool="mdniceç¼–è¾‘å™¨">C#/.NET/.NET CoreæŠ€æœ¯å‰æ²¿å‘¨åˆŠï¼Œä½ çš„æ¯å‘¨æŠ€æœ¯æŒ‡å—é’ˆï¼è®°å½•ã€è¿½è¸ªC#/.NET/.NET Coreé¢†åŸŸã€ç”Ÿæ€çš„æ¯å‘¨æœ€æ–°ã€æœ€å®ç”¨ã€æœ€æœ‰ä»·å€¼çš„æŠ€æœ¯æ–‡ç« ã€ç¤¾åŒºåŠ¨æ€ã€ä¼˜è´¨é¡¹ç›®å’Œå­¦ä¹ èµ„æºç­‰ã€‚è®©ä½ æ—¶åˆ»ç«™åœ¨æŠ€æœ¯å‰æ²¿ï¼ŒåŠ©åŠ›æŠ€æœ¯æˆé•¿ä¸è§†é‡æ‹“å®½ã€‚</p>
<blockquote class="custom-blockquote multiquote-1" data-tool="mdniceç¼–è¾‘å™¨">
<p>æ¬¢è¿æŠ•ç¨¿ã€æ¨èæˆ–è‡ªèä¼˜è´¨æ–‡ç« ã€é¡¹ç›®ã€å­¦ä¹ èµ„æºç­‰ã€‚</p>
</blockquote>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>ğŸ†æŠ€æœ¯å‰æ²¿å‘¨åˆŠGiteeå¼€æºåœ°å€ï¼š</strong> <a href="https://gitee.com/ysgdaydayup/DotNetGuide/blob/main/docs/DotNet/DotNetWeekly.md" rel="noopener nofollow">https://gitee.com/ysgdaydayup/DotNetGuide/blob/main/docs/DotNet/DotNetWeekly.md</a></li>
<li><strong>ğŸ“°æŠ€æœ¯å‰æ²¿å‘¨åˆŠGitHubå¼€æºåœ°å€ï¼š</strong> <a href="https://github.com/YSGStudyHards/DotNetGuide/blob/main/docs/DotNet/DotNetWeekly.md" rel="noopener nofollow">https://github.com/YSGStudyHards/DotNetGuide/blob/main/docs/DotNet/DotNetWeekly.md</a></li>
</ul>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">ç²¾é€‰ 8 ä¸ª .NET å¼€å‘å®ç”¨çš„ç±»åº“ï¼Œæ•ˆç‡æå‡åˆ©å™¨ï¼</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> ç²¾é€‰ 8 ä¸ª .NET å¼€å‘å®ç”¨çš„ç±»åº“ï¼Œ.NET å¼€å‘æ•ˆç‡æå‡åˆ©å™¨ï¼</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> <a href="https://mp.weixin.qq.com/s/hzHCwM3BaUyZO9HCqODIEQ" rel="noopener nofollow">https://mp.weixin.qq.com/s/hzHCwM3BaUyZO9HCqODIEQ</a></li>
</ul>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">Visual Studio 2026 æ­£å¼ç‰ˆä¸‹è½½ä¸å®‰è£…è¯¦ç»†æ•™ç¨‹ï¼ˆé™„å¸¦äº§å“å¯†é’¥ï¼‰ï¼</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> æœ€è¿‘å‘ç°å¾ˆå¤šå°ä¼™ä¼´åé¦ˆ Visual Studio 2026 å®‰è£…å ç”¨ç£ç›˜ç©ºé—´è¾ƒå¤§ï¼Œä»Šå¤©å¤§å§šå‡ºä¸€æœŸ Visual Studio 2026 æ­£å¼ç‰ˆä¸‹è½½ä¸å®‰è£…è¯¦ç»†æ•™ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»…é€‰æ‹©æ‰€éœ€çš„å·¥ä½œè´Ÿè·ã€ç»„ä»¶ã€è¯­è¨€åŒ…æ¥èŠ‚çœå®‰è£…æ—¶é—´å’Œç£ç›˜ç©ºé—´ï¼Œå¸Œæœ›å¯ä»¥å¸®åŠ©åˆ°æœ‰éœ€è¦çš„å°ä¼™ä¼´ï¼</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> <a href="https://mp.weixin.qq.com/s/wbZiTPjhKlFOeU3MgIbq0A" rel="noopener nofollow">https://mp.weixin.qq.com/s/wbZiTPjhKlFOeU3MgIbq0A</a></li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202512/1336199-20251222211437061-990924613.png" alt="image" loading="lazy"></p>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">ä¸€ä¸ª .NET å¼€æºå…è´¹ã€åŠŸèƒ½å¼ºå¤§çš„ UI è‡ªåŠ¨åŒ–åº“</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> FlaUI æ˜¯ä¸€ä¸ª .NET å¼€æºå…è´¹ï¼ˆMIT licenseï¼‰ã€åŠŸèƒ½å¼ºå¤§ çš„ UI è‡ªåŠ¨åŒ–åº“ï¼Œä¸“ä¸º Windows æ¡Œé¢åº”ç”¨ç¨‹åºï¼ˆå¦‚ Win32ã€WinFormsã€WPFã€Store Apps ç­‰åº”ç”¨ï¼‰çš„è‡ªåŠ¨åŒ–æµ‹è¯•è€Œè®¾è®¡ã€‚è¯¥é¡¹ç›®åŸºäº Microsoft çš„åŸç”Ÿ UI Automation åº“æ„å»ºï¼Œå¹¶ä½œä¸ºè¿™äº›åº“çš„å°è£…å™¨ï¼Œæä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½å’Œçµæ´»çš„ APIï¼Œä»¥ä¾¿å¼€å‘è€…èƒ½å¤Ÿé«˜æ•ˆåœ°ç¼–å†™è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> <a href="https://mp.weixin.qq.com/s/PE4S-fUyeG7U8Z78NYu6Rw" rel="noopener nofollow">https://mp.weixin.qq.com/s/PE4S-fUyeG7U8Z78NYu6Rw</a></li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202512/1336199-20251222211450021-574322057.png" alt="image" loading="lazy"></p>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">Newtonsoft.Json ä¸ System.Text.Json å¤šæ€ååºåˆ—åŒ–çš„å®‰å…¨æ€§å·®å¼‚è§£æ</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> å¤šæ€ååºåˆ—åŒ–æ˜¯å¤„ç†ç»§æ‰¿ç»“æ„å¯¹è±¡åºåˆ—åŒ–çš„å¸¸è§éœ€æ±‚ï¼Œä½†ä¸åŒ JSON åºåˆ—åŒ–åº“çš„å®ç°æœºåˆ¶å·®å¼‚ä¼šå¸¦æ¥æ˜¾è‘—çš„å®‰å…¨é£é™©ã€‚å¾®è½¯ CA2326 è§„åˆ™æ˜ç¡®è­¦ç¤ºï¼šé¿å…ä½¿ç”¨éå®‰å…¨çš„ JsonSerializerSettings é…ç½®ï¼ˆå¦‚ Newtonsoft.Json çš„ TypeNameHandling é None å€¼ï¼‰ï¼Œå¦åˆ™å¯èƒ½å¼•å‘ç±»å‹æ³¨å…¥æ”»å‡»ã€‚æœ¬æ–‡å°†å¯¹æ¯” Newtonsoft.Json ä¸ System.Text.Json åœ¨å¤šæ€ååºåˆ—åŒ–ä¸­çš„å®ç°å·®å¼‚ï¼Œé‡ç‚¹åˆ†æå®‰å…¨æ€§é—®é¢˜ï¼Œå¹¶é€šè¿‡ä»£ç å®ä¾‹éªŒè¯ä¸¤è€…çš„å®‰å…¨è¡¨ç°ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> https://www.cnblogs.com/MeteorSeed/p/19366736</li>
</ul>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">.NET å’Œ .NET Framework 2025 å¹´ 12 æœˆæœåŠ¡å‘å¸ƒæ›´æ–°</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> æ¬¢è¿æ¥åˆ°æˆ‘ä»¬ 2025 å¹´ 12 æœˆçš„è”åˆ.NET æœåŠ¡æ›´æ–°ã€‚è®©æˆ‘ä»¬è¿›å…¥.NET å’Œ.NET Framework çš„æœ€æ–°ç‰ˆæœ¬ï¼Œè¿™é‡Œç®€è¦ä»‹ç»ä¸€ä¸‹æˆ‘ä»¬æœåŠ¡ç‰ˆæœ¬ä¸­çš„æ–°å†…å®¹ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> https://devblogs.microsoft.com/dotnet/dotnet-and-dotnet-framework-december-2025-servicing-updates/</li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202512/1336199-20251222211504791-248672978.png" alt="image" loading="lazy"></p>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">å¦‚ä½•æ„å»ºå¸¦æœ‰.NET MAUI çš„ iOS å°éƒ¨ä»¶</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> æˆ‘æ˜¯ä¸€å.NET å¼€å‘è€…ï¼Œä¸»è¦ä¸“æ³¨äº.NET MAUI åˆ° ASP.NET åç«¯æœåŠ¡ã€‚å› ä¸ºæˆ‘æœ€è¿‘å¤§é‡æ¥è§¦å°éƒ¨ä»¶ï¼Œé‡åˆ°äº†è®¸å¤šéšœç¢å’Œæå…¶æœ‰é™çš„æ–‡æ¡£ï¼Œæˆ‘å†³å®šå†™è¿™ç¯‡æ–‡ç« ï¼Œå±•ç¤ºç”¨ .NET MAUI æ„å»ºå®Œæ•´å°éƒ¨ä»¶æ˜¯å®Œå…¨å¯èƒ½çš„ã€‚è€Œä¸”è¿˜èƒ½ä»¥ç±»ä¼¼åŸç”Ÿå¼€å‘ç¯å¢ƒçš„ä¸“ä¸šæ–¹å¼å®Œæˆï¼Œä¸ç”¨æ‹…å¿ƒæ¯æ¬¡æ–°æ„å»ºæˆ–æ›´æ–°éƒ½ä¼šè®©ä¸€åˆ‡å´©æºƒã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> https://devblogs.microsoft.com/dotnet/how-to-build-ios-widgets-with-dotnet-maui</li>
</ul>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">.NET 10 ç½‘ç»œæ”¹è¿›</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> å’Œæ¯æ¬¡ç‰ˆæœ¬ä¸€æ ·ï¼Œæˆ‘ä»¬ä¼šå‘å¸ƒä¸€ç¯‡å…³äº.NET ç½‘ç»œé¢†åŸŸæ–°é¢–æœ‰è¶£å˜åŒ–å’Œæ–°å¢å†…å®¹çš„åšå®¢æ–‡ç« ã€‚è¿™æ¬¡ï¼Œæˆ‘ä»¬å°†è®¨è®º HTTP æ”¹è¿›ã€æ–°çš„ Web å¥—æ¥å­— APIã€ å®‰å…¨å˜æ›´ä»¥åŠè®¸å¤šç½‘ç»œåŸè¯­çš„ç‹¬ç‰¹æ–°å¢å†…å®¹ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> https://devblogs.microsoft.com/dotnet/dotnet-10-networking-improvements/</li>
</ul>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">åˆ†äº« 4 æ¬¾åŸºäº C# ç¼–å†™ã€å®ç”¨ã€å¼€æºçš„ Visual Studio æ‰©å±•æ’ä»¶</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> EFCore.Visualizer æ˜¯ä¸€æ¬¾å¯ä»¥ç›´æ¥åœ¨ Visual Studio ä¸­æŸ¥çœ‹ EF Core æŸ¥è¯¢è®¡åˆ’è°ƒè¯•å™¨å¯è§†åŒ–å·¥å…·ï¼ˆå¸®åŠ©å¼€å‘è€…åˆ†æå’Œä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½ï¼‰ï¼Œç›®å‰ï¼Œè¯¥å¯è§†åŒ–å·¥å…·æ”¯æŒ SQL Serverã€PostgreSQLã€SQLiteã€MySQL å’Œ Oracleã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> <a href="https://mp.weixin.qq.com/s/DTX-UAZhle9dxnD4MjebCw" rel="noopener nofollow">https://mp.weixin.qq.com/s/DTX-UAZhle9dxnD4MjebCw</a></li>
</ul>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">å®Œç¾å¤åˆ»ï¼ä¸€ä¸ªåŸºäº C# å’Œ WPF å¼€æºçš„ç½‘æ˜“äº‘éŸ³ä¹å®¢æˆ·ç«¯</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> MusicApp æ˜¯ä¸€ä¸ªåŸºäº C# å’Œ WPF æŠ€æœ¯å¼€å‘çš„æ¨¡ä»¿ç½‘æ˜“äº‘éŸ³ä¹ç•Œé¢çš„éŸ³ä¹åº”ç”¨é¡¹ç›®ã€‚è¯¥é¡¹ç›®æ—¨åœ¨é€šè¿‡å®è·µå­¦ä¹  WPF å¼€å‘ï¼Œéå¸¸é€‚åˆ WPF å…¥é—¨å­¦ä¹ è€…ä½œä¸ºå…¥é—¨å‚è€ƒé¡¹ç›®ï¼Œæœ¬é¡¹ç›®å·²å®ç°åŸºæœ¬éŸ³ä¹æ’­æ”¾åŠŸèƒ½ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> <a href="https://mp.weixin.qq.com/s/CIWd7qx-S95Xv02pZCBpgw" rel="noopener nofollow">https://mp.weixin.qq.com/s/CIWd7qx-S95Xv02pZCBpgw</a></li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202512/1336199-20251222211523726-2094328585.png" alt="image" loading="lazy"></p>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">ä¸€æ¬¾åŸºäº .NET å’Œ Quartz.NET å¼€æºçš„ä»»åŠ¡è°ƒåº¦ Web ç•Œé¢ç®¡ç†</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> quartzui æ˜¯ä¸€æ¬¾åŸºäº Quartz.NET 3.0ï¼ˆåå‡çº§è‡³3.2.4ï¼‰çš„ä»»åŠ¡è°ƒåº¦ Web ç•Œé¢ç®¡ç†å·¥å…·ï¼Œä¸“ä¸ºç®€åŒ–ä»»åŠ¡è°ƒåº¦ç®¡ç†è€Œè®¾è®¡ã€‚è¯¥é¡¹ç›®æ”¯æŒé€šè¿‡ Web ç•Œé¢è¿›è¡Œä»»åŠ¡è°ƒåº¦é…ç½®ã€ç›‘æ§åŠç®¡ç†ï¼Œæå¤§åœ°æé«˜äº†ä»»åŠ¡è°ƒåº¦çš„ä¾¿æ·æ€§å’Œæ•ˆç‡ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> <a href="https://mp.weixin.qq.com/s/qByA7G0EFVY0S2J5l9in1A" rel="noopener nofollow">https://mp.weixin.qq.com/s/qByA7G0EFVY0S2J5l9in1A</a></li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202512/1336199-20251222211541692-730702520.png" alt="image" loading="lazy"></p>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">ä¸€ä¸ª WPF å¼€æºã€å…è´¹çš„ SVG å›¾åƒæŸ¥çœ‹æ§ä»¶</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> SVGImage æ˜¯ä¸€ä¸ªä¸º WPFï¼ˆWindows Presentation Foundationï¼‰åº”ç”¨ç¨‹åºè®¾è®¡ã€å¼€æºï¼ˆMIT licenseï¼‰ã€å…è´¹çš„ SVGï¼ˆScalable Vector Graphicsï¼‰å›¾åƒæŸ¥çœ‹æ§ä»¶ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> <a href="https://mp.weixin.qq.com/s/69x0B6jhYja58Ze0NSi9ew" rel="noopener nofollow">https://mp.weixin.qq.com/s/69x0B6jhYja58Ze0NSi9ew</a></li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202512/1336199-20251222211555043-1633800824.png" alt="image" loading="lazy"></p>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">ä¸€ä¸ªåŸºäº .NET + Vue3 å¼€æºã€å…è´¹ã€ç²¾ç¾çš„é€šç”¨ä¸šåŠ¡å‹åå°ç®¡ç†ç³»ç»Ÿ</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> SimpleAdmin æ˜¯ä¸€ä¸ªåŸºäº .NET + Vue3 å¼€å‘çš„é€šç”¨ä¸šåŠ¡å‹åå°ç®¡ç†ç³»ç»Ÿï¼Œé€‚ç”¨äºå„ç±»éœ€è¦åå°ç®¡ç†åŠŸèƒ½çš„ä¼ä¸šçº§åº”ç”¨ã€ç½‘ç«™åå°ã€æ•°æ®ç›‘æ§å¹³å°ç­‰åœºæ™¯ã€‚å®ƒæä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½æ¨¡å—å’Œç²¾ç¾çš„ç”¨æˆ·ç•Œé¢ï¼Œèƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ­å»ºèµ·ç¨³å®šã€é«˜æ•ˆçš„åå°ç®¡ç†ç³»ç»Ÿï¼Œæå‡å¼€å‘æ•ˆç‡å’Œç®¡ç†æ°´å¹³ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> <a href="https://mp.weixin.qq.com/s/QV2B3et6Df9FrU3RzYDWrQ" rel="noopener nofollow">https://mp.weixin.qq.com/s/QV2B3et6Df9FrU3RzYDWrQ</a></li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202512/1336199-20251222211607946-944175912.png" alt="image" loading="lazy"></p>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">ç²¾é€‰ 6 æ¬¾å¼€æºçš„ WinForm UI æ§ä»¶åº“ï¼Œè½»æ¾è®©ä½ çš„è€ç‰Œ WinForm åº”ç”¨ç„•ç„¶ä¸€æ–°ï¼</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> ä»Šå¤©å¤§å§šç»™å¤§å®¶åˆ†äº« 6 æ¬¾å¼€æºçš„ WinForm UI æ§ä»¶åº“ï¼Œè½»æ¾è®©ä½ çš„è€ç‰Œ WinForm åº”ç”¨ç„•ç„¶ä¸€æ–°ï¼</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> https://mp.weixin.qq.com/s/l4ccmjKzodcwhxYDRTdukg</li>
</ul>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">å…¨é¢æ”¯æŒå›½äº§åŒ–ï¼C# å¼€æºè·¨å¹³å° UI æ¡†æ¶ï¼Œæ”¯æŒ Windowsã€Macã€Linux</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> CPFï¼ˆCross-Platform Frameworkï¼‰&nbsp;æ˜¯ä¸€æ¬¾åŸºäº C# å¼€å‘çš„å¼€æºè·¨å¹³å° UI æ¡†æ¶ï¼Œä¸“æ³¨äºå›½äº§åŒ–é€‚é…ä¸å…¨å¹³å°æ”¯æŒï¼ˆWindows/macOS/Linuxï¼‰ã€‚é¡¹ç›®é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œæä¾›é«˜æ€§èƒ½çš„æ¸²æŸ“å¼•æ“ä¸ä¸°å¯Œçš„æ§ä»¶åº“ï¼Œæ—¨åœ¨è§£å†³å›½äº§æ“ä½œç³»ç»Ÿç”Ÿæ€ä¸­ç¼ºä¹æˆç†Ÿ C# UI è§£å†³æ–¹æ¡ˆçš„ç—›ç‚¹ï¼ŒåŒæ—¶å…¼å®¹ä¸»æµå›½é™…å¹³å°ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> https://mp.weixin.qq.com/s/qbmUS5gT1be6ZWpYm0FRPw</li>
</ul>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">ä¸€ä¸ªåŸºäº .NET å¼€æºã€é«˜æ€§èƒ½ã€å¯æ‰©å±•çš„å¥—æ¥å­—æœåŠ¡å™¨åº”ç”¨ç¨‹åºæ¡†æ¶</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> SuperSocket æ˜¯ä¸€ä¸ªç”¨äº .NET çš„é«˜æ€§èƒ½ã€å¯æ‰©å±•çš„å¥—æ¥å­—æœåŠ¡å™¨åº”ç”¨ç¨‹åºæ¡†æ¶ã€‚å®ƒä¸ºå¼€å‘è€…æä¾›äº†æ„å»ºè‡ªå®šä¹‰ç½‘ç»œé€šä¿¡åº”ç”¨ç¨‹åºçš„å¼ºå¤§æ¶æ„ï¼Œæ”¯æŒåŒ…æ‹¬ TCPã€UDP å’Œ WebSocket åœ¨å†…çš„å¤šç§åè®®ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> https://mp.weixin.qq.com/s/oNA-dDh80e-WI__9Itf2JA</li>
</ul>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">C#AIç³»åˆ—(7):ä»é›¶å¼€å§‹LLMä¹‹Tokenizerå®ç°</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> LLMåªåšä¸€ä¸ªäº‹æƒ…ï¼Œå°±æ˜¯åƒæ‰tokenåå‡ºtokenï¼Œtokenæ˜¯LLMï¼ˆå¤§è¯­è¨€æ¨¡å‹ï¼‰çš„åŸºæœ¬å…ƒç´ ã€‚tokenä¸LLMçš„å…³ç³»ï¼Œç›¸å½“äºä¹é«˜ç§¯æœ¨ä¸ä¹é«˜å·¥å‚ï¼Œæˆ‘çš„ä¸–ç•Œæ–¹å—ä¸æˆ‘çš„ä¸–ç•Œæ¸¸æˆã€‚é‚£ä¹ˆtokenåˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæœ‰äººç¿»è¯‘æˆä»¤ç‰Œï¼Œæœ‰äººç¿»è¯‘æˆè¯æºã€‚æˆ‘ä»¬ä¸å¦¨æ¢ä¸ªæ¦‚å¿µç†è§£ï¼Œtokenå°±æ˜¯æœ€å°æ“ä½œã€æœ€å°ä¿¡æ¯å•å…ƒçš„æ„æ€ã€‚è¿™ä¸ªæœ€å°æ˜¯ç›¸å¯¹äºLLMè¦å¤„ç†çš„åŸå§‹æ–‡æœ¬æ¥è¯´çš„ã€‚ä¸¾ä¸ªæ —å­ï¼Œå½“ä¸€ä¸ªå¥å­æ–‡æœ¬è¾“å…¥åˆ°ç”µè„‘ä¸­ï¼Œå¤©ç„¶å°±å°±å…·æœ‰å­—ç¬¦çº§åˆ«çš„åˆ‡åˆ†ã€‚å¦‚æœä¸æ‰“ç®—ç»§ç»­æ‹†åˆ†æˆ–ç»„åˆï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªæ˜ å°„å…³ç³»ï¼Œå°†ç°æœ‰è¿™äº›å­—ç¬¦è½¬æ¢ä¸ºæ•´æ•°æ•°ç»„ï¼Œç§°ä¸ºç¼–ç è¿‡ç¨‹ã€‚ç¼–ç åæ•°ç»„å†…çš„å…ƒç´ å°±æ˜¯tokenï¼Œå…ƒç´ å–å€¼å°±ç­‰äºtokenå–å€¼ã€‚LLMå¯ä»¥åƒæ‰è¿™ä¸ªtokenæ•°ç»„ï¼Œå¹¶åå‡ºæ–°æ•°ç»„ã€‚å¯¹è¿™ä¸ªæ–°æ•°ç»„æŒ‰å‰å‰è¿°çš„æ˜ å°„è¿›è¡Œé€†è½¬æ¢ï¼Œç§°ä¸ºè§£ç è¿‡ç¨‹ã€‚è§£ç åæˆ‘ä»¬å°±èƒ½å¾—åˆ°äººç±»å¯ä»¥ç†è§£çš„æ–‡æœ¬äº†ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> https://www.cnblogs.com/luojin765/p/19378939</li>
</ul>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">.NET10 New feature æ–°å¢åŠŸèƒ½ä»‹ç»-JITç¼–è¯‘å™¨æ”¹è¿›</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> é¦–å…ˆ.NET10æ˜¯ä¸€ä¸ªLTSç‰ˆæœ¬ï¼Œå¾®è½¯å®˜æ–¹æ”¯æŒ3å¹´ï¼Œæ‰€ä»¥ä½œä¸ºæœ€æ–°çš„ä¸»åŠ›ç‰ˆæœ¬ï¼Œå¯ä»¥å°½å¿«å‡çº§ä½¿ç”¨ã€‚ä»Šå¤©æˆ‘ä»¬è¯¦ç»†ä»‹ç»ä¸€ä¸‹.NET 10çš„ä¸€äº›æ–°åŠŸèƒ½-JITç¼–è¯‘å™¨æ”¹è¿›ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> https://www.cnblogs.com/tianqing/p/19378803</li>
</ul>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">.Neté€šè¿‡EFCoreå’Œä»“å‚¨æ¨¡å¼å®ç°ç»Ÿä¸€æ•°æ®æƒé™ç®¡æ§å¹¶ä¸”ç›¸å…³æƒé™é…ç½®åŠ¨æ€ç”Ÿæˆ</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> .Neté€šè¿‡EFCoreå’Œä»“å‚¨æ¨¡å¼å®ç°ç»Ÿä¸€æ•°æ®æƒé™ç®¡æ§å¹¶ä¸”ç›¸å…³æƒé™é…ç½®åŠ¨æ€ç”Ÿæˆã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> https://www.cnblogs.com/net-kevin-li/p/19368351</li>
</ul>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">OpenCVSharpï¼šHOGè¡Œäººæ£€æµ‹</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> HOGè¡Œäººæ£€æµ‹æ˜¯ä¸€ç§åŸºäºæ–¹å‘æ¢¯åº¦ç›´æ–¹å›¾ç‰¹å¾çš„è®¡ç®—æœºè§†è§‰ç›®æ ‡æ£€æµ‹æŠ€æœ¯ï¼Œå®ƒé€šè¿‡è®¡ç®—å›¾åƒå±€éƒ¨åŒºåŸŸçš„æ¢¯åº¦æ–¹å‘ç›´æ–¹å›¾æ¥æè¿°ç›®æ ‡çš„å¤–è§‚å½¢çŠ¶ç‰¹å¾ã€‚è¯¥ç®—æ³•é¦–å…ˆå°†å›¾åƒåˆ†å‰²ä¸ºå°çš„è¿é€šåŒºåŸŸï¼ˆç»†èƒå•å…ƒï¼‰ï¼Œè®¡ç®—æ¯ä¸ªå•å…ƒå†…åƒç´ çš„æ¢¯åº¦æ–¹å‘å¹¶ç”Ÿæˆç›´æ–¹å›¾ï¼Œç„¶åå°†ç›¸é‚»çš„ç»†èƒå•å…ƒç»„åˆæˆå—å¹¶å¯¹å—å†…çš„ç›´æ–¹å›¾è¿›è¡Œå½’ä¸€åŒ–å¤„ç†ï¼Œæœ€ç»ˆå½¢æˆèƒ½å¤Ÿæœ‰æ•ˆæè¿°è¡Œäººè½®å»“å’Œå½¢çŠ¶çš„ç‰¹å¾å‘é‡ã€‚è¿™äº›ç‰¹å¾å‘é‡è¢«è¾“å…¥åˆ°é¢„å…ˆè®­ç»ƒå¥½çš„SVMåˆ†ç±»å™¨ä¸­ï¼Œåˆ¤æ–­å›¾åƒåŒºåŸŸæ˜¯å¦åŒ…å«è¡Œäººï¼Œå¹¶é€šè¿‡å¤šå°ºåº¦æ‰«æç­–ç•¥åœ¨ä¸åŒå¤§å°çš„çª—å£ä¸­æœç´¢ç›®æ ‡ï¼Œä»è€Œå®ç°å¯¹å›¾åƒä¸­è¡Œäººçš„å‡†ç¡®æ£€æµ‹å’Œå®šä½ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> https://www.cnblogs.com/mingupupu/p/19365183</li>
</ul>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">OpenCVSharpï¼šå­¦ä¹ äººè„¸æ£€æµ‹ä¾‹å­</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> OpenCVSharpå…³äºäººè„¸æ£€æµ‹æä¾›äº†ä¸¤ä¸ªä¾‹å­ï¼Œä¸€ä¸ªæ˜¯ä½¿ç”¨çº§è”åˆ†ç±»å™¨å¦ä¸€ä¸ªæ˜¯ä½¿ç”¨DNNæ¨¡å‹ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> https://www.cnblogs.com/mingupupu/p/19363129</li>
</ul>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">Aspire 13ï¼šä».NET ç¼–æ’å·¥å…·åˆ°çœŸæ­£çš„å¤šè¯­è¨€äº‘åŸç”Ÿåº”ç”¨å¹³å°</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> Aspire 13 çš„å‘å¸ƒæ ‡å¿—ç€å¾®è½¯äº‘åŸç”Ÿå¼€å‘å·¥å…·é“¾çš„ä¸€ä¸ªå†³å®šæ€§è½¬æŠ˜ç‚¹ã€‚é€šè¿‡æ­£å¼å»é™¤ ".NET" å‰ç¼€å¹¶æ›´åä¸º "Aspire"ï¼Œè¯¥å¹³å°å·²ä»ä¸€ä¸ªä»¥.NET ä¸ºä¸­å¿ƒçš„ç¼–æ’å™¨æ¼”å˜ä¸ºä¸€ä¸ªå¹¿æ³›çš„ã€å¤šè¯­è¨€é€šç”¨çš„åº”ç”¨å¹³å° 1ã€‚è¿™ä¸€æˆ˜ç•¥è½¬å˜çš„æ ¸å¿ƒåœ¨äºå°† Python å’Œ JavaScript (Node.js) æå‡ä¸ºä¸.NET åŒç­‰çš„ä¸€ç­‰å…¬æ°‘ï¼Œå½»åº•è§£å†³äº†ç°ä»£åˆ†å¸ƒå¼ç³»ç»Ÿå¼€å‘ä¸­è·¨è¯­è¨€åä½œçš„ç¢ç‰‡åŒ–ç—›ç‚¹ 2ã€‚æœ¬æ–‡å°†æ·±å…¥å‰–æ Aspire 13 çš„æ¶æ„å˜é©ï¼Œé‡ç‚¹é˜è¿°å…¶å¦‚ä½•é€šè¿‡æ ‡å‡†åŒ–çš„ "AppHost" æ¨¡å‹æ¥ç»Ÿä¸€ç®¡ç†å¼‚æ„å¾®æœåŠ¡çš„ç”Ÿå‘½å‘¨æœŸã€‚æˆ‘ä»¬å°†è¯¦ç»†æ¢è®¨æ–°å¢çš„ Aspire.Hosting.Python åŒ…åŠå…¶å¯¹ Python ç”Ÿæ€ç³»ç»Ÿï¼ˆå¦‚ uv åŒ…ç®¡ç†å™¨ã€ASGI æ ‡å‡†ã€è™šæ‹Ÿç¯å¢ƒï¼‰çš„æ·±åº¦é›†æˆï¼›åˆ†æåŸºäº OpenTelemetry (OTLP) çš„ç»Ÿä¸€å¯è§‚æµ‹æ€§æ¶æ„å¦‚ä½•æ¶ˆé™¤è¯­è¨€é—´çš„ç›‘æ§å£å’ï¼›å¹¶æ­ç¤º Aspire 13 å¦‚ä½•é€šè¿‡æ™ºèƒ½åŒ–çš„ç¯å¢ƒå˜é‡æ³¨å…¥å’Œè‡ªåŠ¨åŒ–çš„ Dockerfile ç”Ÿæˆï¼Œé‡å¡‘äº†ä»æœ¬åœ°å¼€å‘åˆ°ç”Ÿäº§éƒ¨ç½²çš„å®Œæ•´å·¥ä½œæµ 1ã€‚æ­¤å¤–ï¼Œæœ¬æ–‡è¿˜å°†å®¡è§†è¿™ä¸€ç‰ˆæœ¬å¯¹åº•å±‚åŸºç¡€è®¾æ–½çš„è¦æ±‚ï¼ŒåŒ…æ‹¬å¯¹.NET 10 SDK çš„ä¾èµ–ä»¥åŠå…¨æ–°çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†å·¥å…· aspire do çš„å¼•å…¥ 2ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> https://www.cnblogs.com/shanyou/p/19360467</li>
</ul>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">ç”¨ .NET æœ€å°åŒ– API æ„å»ºé«˜æ€§èƒ½ API</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> åœ¨å½“ä»Šå¿«é€Ÿå‘å±•çš„åº”ç”¨å¼€å‘é¢†åŸŸï¼Œæ„å»ºå¿«é€Ÿã€å¯æ‰©å±•ä¸”å¯ç»´æŠ¤çš„APIå·²æˆä¸ºç°ä»£åº”ç”¨çš„å…³é”®è¦æ±‚ã€‚éšç€.NETæŠ€æœ¯çš„ä¸æ–­æ¼”è¿›ï¼Œå¾®è½¯æ¨å‡ºäº†æœ€å°åŒ–API(Minimal APIs)è¿™ä¸€åˆ›æ–°æ¶æ„ï¼Œæ—¨åœ¨ç®€åŒ–APIå¼€å‘æµç¨‹åŒæ—¶æ˜¾è‘—æå‡æ€§èƒ½ã€‚æœ€å°åŒ–APIé€šè¿‡å‡å°‘æ¨¡æ¿ä»£ç ã€ä¼˜åŒ–å¯åŠ¨æ—¶é—´ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿä¸“æ³¨äºä¸šåŠ¡é€»è¾‘è€Œéæ¡†æ¶å¤æ‚æ€§ï¼Œä¸ºæ„å»ºé«˜æ€§èƒ½APIæä¾›äº†å…¨æ–°çš„è§£å†³æ–¹æ¡ˆã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨å¦‚ä½•åˆ©ç”¨.NETä¸­çš„æœ€å°åŒ–APIæ¶æ„æ„å»ºé«˜æ€§èƒ½APIï¼Œé€šè¿‡ç®€æ´çš„ä»£ç ç¤ºä¾‹å’Œå®ç”¨å»ºè®®ï¼Œå¸®åŠ©å¼€å‘è€…æŒæ¡è¿™ä¸€ç°ä»£APIå¼€å‘æ–¹æ³•ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> https://www.cnblogs.com/powertoolsteam/p/19360421</li>
</ul>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">2025å¹´ WebTransport ç”Ÿæ€æ·±åº¦ç ”ç©¶ï¼šJavaScript å®¢æˆ·ç«¯ä¸.NET 10 SignalR çš„æ¼”è¿›ä¸èåˆ</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> åœ¨å®æ—¶ç½‘ç»œé€šä¿¡é¢†åŸŸï¼Œ2025å¹´æ ‡å¿—ç€ä»ä¼ ç»Ÿçš„åŸºäº TCP çš„ WebSocket åè®®å‘åŸºäº UDP å’Œ QUIC çš„ä¸‹ä¸€ä»£ä¼ è¾“åè®®â€”â€”WebTransport çš„å…³é”®è½¬å‹æœŸã€‚æœ¬æŠ¥å‘Šæ—¨åœ¨é’ˆå¯¹ WebTransport åœ¨ JavaScript å®¢æˆ·ç«¯ç”Ÿæ€ç³»ç»Ÿä¸­çš„æ”¯æŒç°çŠ¶ï¼Œä»¥åŠå¾®è½¯.NET 10 æ¡†æ¶ä¸‹ ASP.NET Core SignalR å¯¹è¯¥åè®®çš„æœåŠ¡ç«¯å®ç°èƒ½åŠ›ï¼Œè¿›è¡Œè¯¦å°½çš„åŸºå‡†æµ‹è¯•ä¸æ¶æ„åˆ†æã€‚ç ”ç©¶æ˜¾ç¤ºï¼Œæˆªè‡³ 2025 å¹´ç¬¬å››å­£åº¦ï¼ŒWebTransport çš„ç”Ÿæ€å‘ˆç°å‡ºæ˜¾è‘—çš„â€œä¸¤æåˆ†åŒ–â€ç‰¹å¾ã€‚åœ¨å®¢æˆ·ç«¯æ–¹é¢ï¼Œä»¥ Chrome å’Œ Firefox ä¸ºä»£è¡¨çš„æµè§ˆå™¨é˜µè¥å·²ç»å®ç°äº†é«˜åº¦æˆç†Ÿä¸”ç¨³å®šçš„æ”¯æŒï¼Œä¸ä»…å®Œå…¨éµå¾ª W3C æ ‡å‡†ï¼Œæ›´åœ¨æµæ§åˆ¶å’Œæ‹¥å¡ç®¡ç†ä¸Šè¡¨ç°ä¼˜å¼‚ï¼›ç„¶è€Œï¼ŒApple çš„ WebKit å†…æ ¸ï¼ˆSafariï¼‰ä¾æ—§æ˜¯æ™®åŠçš„æœ€å¤§é˜»ç¢ï¼Œä»…åœ¨å®éªŒæ€§ç‰ˆæœ¬ä¸­æœ‰é™åº¦å¼€æ”¾ã€‚åœ¨æœåŠ¡ç«¯æ–¹é¢ï¼Œéšç€.NET 10 çš„å‘å¸ƒï¼ŒASP.NET Core SignalR å°† WebTransport ä»â€œå®éªŒæ€§é¢„è§ˆâ€æ­£å¼æ¨è¿›è‡³â€œç”Ÿäº§å°±ç»ªâ€é˜¶æ®µï¼Œå°½ç®¡å…¶å¯¹åº•å±‚æ“ä½œç³»ç»Ÿï¼ˆå¦‚ Windows Server 2022/2025 å’Œç‰¹å®š Linux å‘è¡Œç‰ˆï¼‰çš„ä¾èµ–ä¾ç„¶æ„æˆäº†éƒ¨ç½²é—¨æ§›ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> https://www.cnblogs.com/shanyou/p/19355053</li>
</ul>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">OpenCVSharpï¼šäº†è§£å‡ ç§ç‰¹å¾æ£€æµ‹</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> å‰é¢å·²ç»ä»‹ç»è¿‡äº†OpenCVSharpä¸­å°è£…çš„å‡ ä¸ªç‰¹å¾æ£€æµ‹ç®—æ³•ï¼Œå…¶å®é‡Œé¢è¿˜æœ‰å¾ˆå¤šç‰¹å¾æ£€æµ‹ç®—æ³•ï¼Œä¸å†ä¸€ç¯‡ä¸€ç¯‡åœ°ä»‹ç»äº†ï¼Œå…¶å®ƒçš„éƒ½æ”¾åœ¨è¿™ä¸€ç¯‡ï¼Œç®€å•è¿‡ä¸€ä¸‹ï¼Œæœ‰ç‚¹å°è±¡å³å¯ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> https://www.cnblogs.com/mingupupu/p/19352075</li>
</ul>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">C#AIç³»åˆ—(6): C#ç¦»çº¿å®ç°é«˜æ•ˆOCR</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> å®ç°OCRï¼Œæˆ‘ä»¬ç›´æ¥ä»Tesseractï¼ˆApache 2.0ï¼Œstar 71.4Kï¼‰å¼€å§‹ã€‚Tesseract æ˜¯ç›®å‰æœ€æ´»è·ƒã€æœ€ç²¾ç¡®çš„å¼€æº OCRï¼ˆå…‰å­¦å­—ç¬¦è¯†åˆ«ï¼‰å¼•æ“ä¹‹ä¸€ï¼Œç”± Google ç»´æŠ¤ã€‚å®ƒèƒ½æŠŠå›¾ç‰‡ä¸­çš„å°åˆ·æˆ–æ‰‹å†™æ–‡å­—è½¬æ¢æˆå¯ç¼–è¾‘çš„çº¯æ–‡æœ¬ã€PDFã€HTML ç­‰å¤šç§æ ¼å¼ï¼Œæ”¯æŒåŒ…æ‹¬ä¸­æ–‡ç­‰ 100 å¤šç§è¯­è¨€ã€‚Tesseract 4 ä»¥åå¼•å…¥åŸºäºæ·±åº¦å­¦ä¹ çš„ LSTM ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œå¯¹æ•´è¡Œæ–‡å­—è¿›è¡Œè¯†åˆ«ï¼Œå‡†ç¡®ç‡å¤§å¹…æå‡ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> https://www.cnblogs.com/luojin765/p/19346320</li>
</ul>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">OpenCVSharpï¼šå­¦ä¹ è¿é€šæ€§æ£€æµ‹çš„ä½¿ç”¨</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> è¿é€šæ€§æ£€æµ‹æ˜¯è®¡ç®—æœºè§†è§‰ä¸­çš„ä¸€ç§åŸºç¡€å›¾åƒå¤„ç†æŠ€æœ¯ï¼Œç”¨äºè¯†åˆ«å’Œæ ‡è®°äºŒå€¼å›¾åƒä¸­ç›¸äº’è¿æ¥çš„åƒç´ åŒºåŸŸã€‚ç®€å•æ¥è¯´ï¼Œå®ƒèƒ½å¤Ÿæ‰¾å‡ºå›¾åƒä¸­æ‰€æœ‰ç‹¬ç«‹çš„"è¿é€šåŒºåŸŸ"ï¼ˆå³åƒç´ ä¹‹é—´ç›¸äº’è¿æ¥å½¢æˆçš„åŒºåŸŸï¼‰ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> https://www.cnblogs.com/mingupupu/p/19344713</li>
</ul>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">WPFä¸ªäººæ–‡æ¡£ï¼ˆä¸€ï¼‰â€”â€” åŸºç¡€è¯­æ³•&amp;ç»„ä»¶ç¯‡</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> WPFä¸ªäººæ–‡æ¡£ï¼ˆä¸€ï¼‰â€”â€” åŸºç¡€è¯­æ³•&amp;ç»„ä»¶ç¯‡ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> https://www.cnblogs.com/leaf-7-scouts/p/19336808</li>
</ul>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">.Netå¾®æœåŠ¡ç½‘å…³æ³¨å†Œå’Œç®¡ç†ï¼ˆåŸºäºConsul + Nginxå®ç°ï¼‰</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼ŒAPIç½‘å…³ä½œä¸ºè¯·æ±‚å…¥å£ï¼Œè´Ÿè´£è·¯ç”±è½¬å‘ã€è´Ÿè½½å‡è¡¡ã€è®¤è¯é‰´æƒç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚Consulæä¾›æœåŠ¡æ³¨å†Œä¸å‘ç°èƒ½åŠ›ï¼ŒNginxä½œä¸ºé«˜æ€§èƒ½åå‘ä»£ç†ï¼ŒäºŒè€…ç»“åˆå¯å®ç°åŠ¨æ€ç½‘å…³ç®¡ç†ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> https://www.cnblogs.com/net-kevin-li/p/19332353</li>
</ul>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">.NET 10 ç½‘ç»œæ”¹è¿›ï¼šHTTPã€å®‰å…¨ä¸ç½‘ç»œåŸè¯­çš„å…¨é¢å‡çº§</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> éšç€.NET 10çš„å‘å¸ƒï¼Œå¾®è½¯åœ¨ç½‘ç»œæŠ€æœ¯æ ˆä¸Šå¸¦æ¥äº†ä¸€ç³»åˆ—ä»¤äººå…´å¥‹çš„æ”¹è¿›å’Œæ–°å¢åŠŸèƒ½ã€‚è¿™äº›æ”¹è¿›è¦†ç›–äº†HTTPåè®®å¤„ç†ã€WebSockets APIã€å®‰å…¨å¢å¼ºä»¥åŠç½‘ç»œåŸºç¡€åŸè¯­ç­‰å¤šä¸ªæ–¹é¢ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨è¿™äº›æŠ€æœ¯æ”¹è¿›ï¼Œå¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°ç†è§£å’Œåˆ©ç”¨.NET 10åœ¨ç½‘ç»œç¼–ç¨‹æ–¹é¢çš„æœ€æ–°èƒ½åŠ›ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> https://www.cnblogs.com/powertoolsteam/p/19330426</li>
</ul>
<h2 data-tool="mdniceç¼–è¾‘å™¨"><span class="prefix"><span class="content">C#å®ç°ä¸‰è±MCé€šè®¯åè®®åº“ï¼ˆ4Cå¸§-æ ¼å¼1ï¼‰</span></span></h2>
<ul data-tool="mdniceç¼–è¾‘å™¨">
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> æ ¹æ®ä¸‰è±çš„ Melsec é€šè®¯åè®®(æœ¬æ–‡ç§°MCåè®®)æ‰‹å†Œå†…å®¹ï¼Œä½¿ç”¨ä¸²å£å®ç°äº† PC ä¸ PLC çš„é€šè®¯ï¼Œèƒ½å¤Ÿé€šè¿‡QnAå…¼å®¹4Cå¸§çš„æ ¼å¼1å®ç° PC è¯»å†™ PLC çš„è½¯å…ƒä»¶å­˜å‚¨å™¨å†…å®¹(å¼‚æ­¥æ–¹æ³•)ï¼Œæœ€åç”¨ä¸€ä¸ª C#æ§åˆ¶å°é¡¹ç›®æµ‹è¯•äº†é€šè®¯åº“åŠŸèƒ½ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> https://www.cnblogs.com/dragonet-Z/p/19318911</li>
</ul>
</div>
<div id="MySignature" role="contentinfo">
    <blockquote>
<p style="font-family:YouYuan;font-size: 16px;margin: 0 auto 0.01em auto;"><span style="font-size: 17px; ">ä½œè€…åç§°ï¼š</span><a href="https://www.cnblogs.com/Can-daydayup/" target="_blank">è¿½é€æ—¶å…‰è€…</a></p>
<p style="font-family:YouYuan;font-size: 16px;margin: 0 auto 0.01em auto;"><span style="font-size: 17px; ">ä½œè€…ç®€ä»‹ï¼š</span>ä¸€ä¸ªçƒ­çˆ±ç¼–ç¨‹ã€å–„äºåˆ†äº«ã€å–œæ¬¢å­¦ä¹ ã€æ¢ç´¢ã€å°è¯•æ–°äº‹ç‰©å’Œæ–°æŠ€æœ¯çš„å…¨æ ˆè½¯ä»¶å·¥ç¨‹å¸ˆã€‚</p>
<p style="font-family:YouYuan;font-size: 16px;margin: 0 auto 0.01em auto;">
æœ¬æ–‡ç‰ˆæƒå½’ä½œè€…å’Œåšå®¢å›­å…±æœ‰ï¼Œæ¬¢è¿è½¬è½½ï¼Œä½†æœªç»ä½œè€…åŒæ„å¿…é¡»ä¿ç•™æ­¤æ®µå£°æ˜ï¼Œä¸”åœ¨æ–‡ç« é¡µé¢æ˜æ˜¾ä½ç½®ç»™å‡ºåŸæ–‡é“¾æ¥ï¼Œå¦åˆ™ä¿ç•™è¿½ç©¶æ³•å¾‹è´£ä»»çš„æƒåˆ©ã€‚å¦‚æœè¯¥ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©çš„è¯ï¼Œå¯ä»¥ç‚¹ä¸€ä¸‹å³ä¸‹è§’çš„<a onclick="votePost(cb_entryId,'Digg')" href="javascript:void(0)" style="color:red;">ã€â™¥æ¨èâ™¥ã€‘</a>ï¼Œå¸Œæœ›èƒ½å¤ŸæŒç»­çš„ä¸ºå¤§å®¶å¸¦æ¥å¥½çš„æŠ€æœ¯æ–‡ç« ï¼Œæ–‡ä¸­å¯èƒ½å­˜åœ¨æè¿°ä¸æ­£ç¡®çš„åœ°æ–¹ï¼Œæ¬¢è¿æŒ‡æ­£æˆ–è¡¥å……ï¼Œä¸èƒœæ„Ÿæ¿€ã€‚
</p>
</blockquote>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.002777777777777778" data-date-updated="2025-12-22 21:16">2025-12-22 21:12</span>&nbsp;
<a href="https://www.cnblogs.com/Can-daydayup">è¿½é€æ—¶å…‰è€…</a>&nbsp;
é˜…è¯»(<span id="post_view_count">135</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19384367);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19384367', targetLink: 'https://www.cnblogs.com/Can-daydayup/p/19384367', title: 'C#/.NET/.NET CoreæŠ€æœ¯å‰æ²¿å‘¨åˆŠ | ç¬¬ 64 æœŸï¼ˆ2025å¹´12.1-12.21ï¼‰' })">ä¸¾æŠ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ MQ é€‰å‹æ¡†æ¶â€”â€”Kafka/RabbitMQ/RocketMQ çš„æ¨¡å‹å·®å¼‚ä¸ä¸šåŠ¡åŒ¹é…æ¸…å• ]]></title>
    <link>https://www.cnblogs.com/shiyuelp/p/19384355</link>
    <guid>fd7926119917bd0fabf846696ad776af</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/shiyuelp/p/19384355" title="å‘å¸ƒäº 2025-12-22 21:07">
    <span role="heading" aria-level="2">MQ é€‰å‹æ¡†æ¶â€”â€”Kafka/RabbitMQ/RocketMQ çš„æ¨¡å‹å·®å¼‚ä¸ä¸šåŠ¡åŒ¹é…æ¸…å•</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p><strong>å†™åœ¨å‰é¢ï¼Œæœ¬äººç›®å‰å¤„äºæ±‚èŒä¸­ï¼Œå¦‚æœ‰åˆé€‚å†…æ¨å²—ä½ï¼Œè¯·åŠ å¾®ä¿¡ï¼šlpshiyue æ„Ÿè°¢</strong></p>
<blockquote>
<p>æ¶ˆæ¯é˜Ÿåˆ—é€‰å‹ä¸æ˜¯æŠ€æœ¯å‚æ•°çš„ç®€å•å¯¹æ¯”ï¼Œè€Œæ˜¯ä¸šåŠ¡éœ€æ±‚ä¸æŠ€æœ¯ç‰¹æ€§çš„ç²¾å‡†åŒ¹é…è‰ºæœ¯</p>
</blockquote>
<p>åœ¨å®Œæˆç³»ç»Ÿç›‘æ§ä½“ç³»çš„å»ºè®¾åï¼Œæˆ‘ä»¬é¢ä¸´å¦ä¸€ä¸ªå…³é”®æ¶æ„å†³ç­–ï¼šå¦‚ä½•é€‰æ‹©é€‚åˆä¸šåŠ¡éœ€æ±‚çš„æ¶ˆæ¯ä¸­é—´ä»¶ã€‚æ¶ˆæ¯é˜Ÿåˆ—ä½œä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿçš„â€œè¡€æ¶²å¾ªç¯ç³»ç»Ÿâ€ï¼Œå…¶é€‰å‹ç›´æ¥å½±å“ç€æ¶æ„çš„æ‰©å±•æ€§ã€å¯é æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚æœ¬æ–‡å°†æ·±å…¥è§£æä¸‰å¤§ä¸»æµæ¶ˆæ¯é˜Ÿåˆ—çš„æ ¸å¿ƒå·®å¼‚ï¼Œæä¾›ç§‘å­¦çš„é€‰å‹æ¡†æ¶å’Œä¸šåŠ¡åŒ¹é…æ¸…å•ï¼Œå¸®åŠ©æ‚¨åœ¨å¤æ‚çš„æŠ€æœ¯é€‰é¡¹ä¸­åšå‡ºæ˜æ™ºå†³ç­–ã€‚</p>
<h2 id="1-æ¶ˆæ¯é˜Ÿåˆ—é€‰å‹çš„æ ¸å¿ƒç»´åº¦ä¸ä¸šåŠ¡å½±å“">1 æ¶ˆæ¯é˜Ÿåˆ—é€‰å‹çš„æ ¸å¿ƒç»´åº¦ä¸ä¸šåŠ¡å½±å“</h2>
<h3 id="11-é€‰å‹å†³ç­–çš„äº”ä¸ªå…³é”®ç»´åº¦">1.1 é€‰å‹å†³ç­–çš„äº”ä¸ªå…³é”®ç»´åº¦</h3>
<p>æ¶ˆæ¯é˜Ÿåˆ—é€‰å‹éœ€è¦è¶…è¶Šç®€å•çš„æ€§èƒ½å‚æ•°å¯¹æ¯”ï¼Œä»â€‹<strong>æ¶æ„åŒ¹é…åº¦</strong>â€‹ã€â€‹<strong>æ€§èƒ½ç‰¹å¾</strong>â€‹ã€â€‹<strong>å¯é æ€§è¦æ±‚</strong>â€‹ã€<strong>ç”Ÿæ€å…¼å®¹æ€§</strong>å’Œ<strong>å›¢é˜Ÿèƒ½åŠ›</strong>äº”ä¸ªç»´åº¦è¿›è¡Œç»¼åˆè¯„ä¼°ã€‚æ¯ä¸ªç»´åº¦éƒ½å¯¹åº”ç€ä¸åŒçš„ä¸šåŠ¡éœ€æ±‚å’ŒæŠ€æœ¯çº¦æŸã€‚</p>
<p><strong>æ¶æ„åŒ¹é…åº¦</strong>æ˜¯é€‰å‹çš„é¦–è¦è€ƒé‡ï¼ŒåŒ…æ‹¬æ¶ˆæ¯æ¨¡å‹ï¼ˆå‘å¸ƒ-è®¢é˜… vs ç‚¹å¯¹ç‚¹ï¼‰ã€è·¯ç”±æœºåˆ¶å’Œæ‰©å±•æ–¹å¼ã€‚<strong>æ€§èƒ½ç‰¹å¾</strong>æ¶‰åŠååé‡ã€å»¶è¿Ÿå’Œèµ„æºæ¶ˆè€—çš„å¹³è¡¡ã€‚<strong>å¯é æ€§è¦æ±‚</strong>æ¶µç›–æ¶ˆæ¯æŒä¹…åŒ–ã€äº‹åŠ¡æ”¯æŒå’Œæ•…éšœæ¢å¤æœºåˆ¶ã€‚<strong>ç”Ÿæ€å…¼å®¹æ€§</strong>è¯„ä¼°ä¸ç°æœ‰æŠ€æœ¯æ ˆçš„é›†æˆæˆæœ¬ã€‚<strong>å›¢é˜Ÿèƒ½åŠ›</strong>è€ƒé‡æŠ€æœ¯å‚¨å¤‡å’Œè¿ç»´æˆæœ¬ã€‚</p>
<p>å¿½è§†ä»»ä¸€ç»´åº¦éƒ½å¯èƒ½å¯¼è‡´é€‰å‹åå·®ã€‚ä¾‹å¦‚ï¼Œå•çº¯è¿½æ±‚é«˜ååè€Œå¿½ç•¥å›¢é˜Ÿå¯¹å¤æ‚ç³»ç»Ÿçš„è¿ç»´èƒ½åŠ›ï¼Œå°†åœ¨åæœŸäº§ç”Ÿå·¨å¤§æŠ€æœ¯å€ºåŠ¡ã€‚ä¼˜ç§€çš„é€‰å‹æ˜¯è¿™äº›ç»´åº¦ä¸ä¸šåŠ¡åœºæ™¯çš„æœ€ä¼˜å¹³è¡¡ã€‚</p>
<h3 id="12-ä¸šåŠ¡åœºæ™¯çš„æŠ€æœ¯æ˜ å°„">1.2 ä¸šåŠ¡åœºæ™¯çš„æŠ€æœ¯æ˜ å°„</h3>
<p>æ¶ˆæ¯é˜Ÿåˆ—é€‰å‹çš„æœ¬è´¨æ˜¯å°†<strong>ä¸šåŠ¡ç‰¹å¾</strong>è½¬åŒ–ä¸º<strong>æŠ€æœ¯éœ€æ±‚</strong>çš„æ˜ å°„è¿‡ç¨‹ã€‚ç”µå•†è®¢å•ç³»ç»Ÿéœ€è¦å¼ºä¸€è‡´æ€§å’Œé¡ºåºæ¶ˆæ¯ï¼Œç‰©è”ç½‘å¹³å°å…³æ³¨ä½å»¶è¿Ÿå’Œåè®®æ”¯æŒï¼Œå¤§æ•°æ®å¹³å°è¿½æ±‚é«˜ååå’Œæµå¤„ç†èƒ½åŠ›ã€‚</p>
<p>ä¸šåŠ¡åœºæ™¯çš„æŠ€æœ¯æ˜ å°„éœ€è€ƒè™‘å…­å¤§å› ç´ ï¼šâ€‹<strong>æ•°æ®è§„æ¨¡</strong>â€‹ï¼ˆæ—¥æ¶ˆæ¯é‡ï¼‰ã€â€‹<strong>å®æ—¶æ€§è¦æ±‚</strong>â€‹ï¼ˆå»¶è¿Ÿæ•æ„Ÿåº¦ï¼‰ã€â€‹<strong>ä¸€è‡´æ€§çº§åˆ«</strong>â€‹ï¼ˆå¼ºä¸€è‡´æ€§ vs æœ€ç»ˆä¸€è‡´æ€§ï¼‰ã€â€‹<strong>æ¶ˆæ¯ä¼˜å…ˆçº§</strong>â€‹ï¼ˆé¡ºåºä¿è¯ï¼‰ã€â€‹<strong>åè®®éœ€æ±‚</strong>â€‹ï¼ˆå¤šç§åè®®æ”¯æŒï¼‰å’Œâ€‹<strong>è¿ç»´æˆæœ¬</strong>â€‹ï¼ˆå›¢é˜Ÿç†Ÿæ‚‰åº¦ï¼‰ã€‚</p>
<h2 id="2-ä¸‰å¤§æ¶ˆæ¯é˜Ÿåˆ—æ¶æ„æ·±åº¦è§£æ">2 ä¸‰å¤§æ¶ˆæ¯é˜Ÿåˆ—æ¶æ„æ·±åº¦è§£æ</h2>
<h3 id="21-kafkaé«˜ååçš„åˆ†å¸ƒå¼æµå¤„ç†å¹³å°">2.1 Kafkaï¼šé«˜ååçš„åˆ†å¸ƒå¼æµå¤„ç†å¹³å°</h3>
<p>Kafka é‡‡ç”¨â€‹<strong>å‘å¸ƒ-è®¢é˜…æ¨¡å‹</strong>â€‹ï¼Œæ ¸å¿ƒæ¶æ„åŸºäº<strong>ä¸»é¢˜-åˆ†åŒº-å‰¯æœ¬</strong>çš„ä¸‰çº§è®¾è®¡ã€‚ä¸»é¢˜ï¼ˆTopicï¼‰æ˜¯æ¶ˆæ¯çš„é€»è¾‘åˆ†ç±»ï¼Œæ¯ä¸ªä¸»é¢˜è¢«åˆ’åˆ†ä¸ºå¤šä¸ªåˆ†åŒºï¼ˆPartitionï¼‰å®ç°å¹¶è¡Œå¤„ç†ï¼Œæ¯ä¸ªåˆ†åŒºåˆæœ‰å¤šä¸ªå‰¯æœ¬ï¼ˆReplicaï¼‰ä¿è¯é«˜å¯ç”¨ã€‚</p>
<p>â€‹<strong>è®¾è®¡å“²å­¦</strong>â€‹ï¼šKafka è¿½æ±‚æè‡´çš„ååé‡å’ŒæŒä¹…åŒ–èƒ½åŠ›ï¼Œé‡‡ç”¨é¡ºåº I/O å’Œé›¶æ‹·è´æŠ€æœ¯ä¼˜åŒ–æ•°æ®ä¼ è¾“ã€‚å…¶æ¶ˆè´¹æ¨¡å¼ä¸ºâ€‹<strong>æ‹‰æ¨¡å¼</strong>â€‹ï¼ˆPullï¼‰ï¼Œæ¶ˆè´¹è€…ä¸»åŠ¨ä» Broker æ‹‰å–æ¶ˆæ¯ï¼Œé€‚åˆé«˜ååä½†ä¸ä¿è¯æä½å»¶è¿Ÿçš„åœºæ™¯ã€‚</p>
<p>â€‹<strong>æ ¸å¿ƒä¼˜åŠ¿</strong>â€‹ï¼š</p>
<ul>
<li>â€‹<strong>ååé‡æè‡´</strong>â€‹ï¼šå•æœºæ¯ç§’å¯å¤„ç†ç™¾ä¸‡çº§æ¶ˆæ¯</li>
<li>â€‹<strong>æŒä¹…åŒ–èƒ½åŠ›</strong>â€‹ï¼šæ¶ˆæ¯æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œæ”¯æŒé•¿æœŸå­˜å‚¨å’Œå›æº¯</li>
<li>â€‹<strong>æ°´å¹³æ‰©å±•</strong>â€‹ï¼šé€šè¿‡å¢åŠ åˆ†åŒºå’Œ Broker è½»æ¾æ‰©å±•å®¹é‡</li>
<li>â€‹<strong>æµå¤„ç†ç”Ÿæ€</strong>â€‹ï¼šä¸ Flinkã€Spark ç­‰æµå¤„ç†æ¡†æ¶æ— ç¼é›†æˆ</li>
</ul>
<p>â€‹<strong>æ¶æ„å±€é™</strong>â€‹ï¼š</p>
<ul>
<li>â€‹<strong>å»¶è¿Ÿç›¸å¯¹è¾ƒé«˜</strong>â€‹ï¼šæ‰¹é‡å¤„ç†æœºåˆ¶å¯¼è‡´å»¶è¿Ÿåœ¨æ¯«ç§’çº§</li>
<li>â€‹<strong>åŠŸèƒ½ç›¸å¯¹ç®€å•</strong>â€‹ï¼šç¼ºå°‘çµæ´»çš„è·¯ç”±å’Œå¤æ‚çš„äº‹åŠ¡æ”¯æŒ</li>
<li>â€‹<strong>è¿ç»´å¤æ‚åº¦é«˜</strong>â€‹ï¼šä¾èµ– ZooKeeperï¼ˆæ–°ç‰ˆæœ¬å·²å†…ç½® Raftï¼‰</li>
</ul>
<h3 id="22-rabbitmqä¼ä¸šçº§å¯é æ¶ˆæ¯ä»£ç†">2.2 RabbitMQï¼šä¼ä¸šçº§å¯é æ¶ˆæ¯ä»£ç†</h3>
<p>RabbitMQ åŸºäº AMQP åè®®ï¼Œé‡‡ç”¨<strong>äº¤æ¢æœº-é˜Ÿåˆ—-ç»‘å®š</strong>çš„æ ¸å¿ƒæ¶æ„ã€‚ç”Ÿäº§è€…å°†æ¶ˆæ¯å‘é€åˆ°äº¤æ¢æœºï¼ˆExchangeï¼‰ï¼Œäº¤æ¢æœºæ ¹æ®ç»‘å®šè§„åˆ™å’Œè·¯ç”±é”®å°†æ¶ˆæ¯è·¯ç”±åˆ°ç›¸åº”é˜Ÿåˆ—ï¼ˆQueueï¼‰ï¼Œæ¶ˆè´¹è€…ä»é˜Ÿåˆ—è·å–æ¶ˆæ¯ã€‚</p>
<p>â€‹<strong>è®¾è®¡å“²å­¦</strong>â€‹ï¼šRabbitMQ æ³¨é‡æ¶ˆæ¯çš„å¯é ä¼ é€’å’Œçµæ´»è·¯ç”±ï¼Œæ”¯æŒå¤šç§äº¤æ¢æœºç±»å‹ï¼ˆDirectã€Topicã€Fanout ç­‰ï¼‰å®ç°å¤æ‚è·¯ç”±é€»è¾‘ã€‚å…¶æ¶ˆè´¹æ¨¡å¼ä¸ºâ€‹<strong>æ¨æ¨¡å¼</strong>â€‹ï¼ˆPushï¼‰ï¼ŒBroker ä¸»åŠ¨å°†æ¶ˆæ¯æ¨é€ç»™æ¶ˆè´¹è€…ï¼Œå®ç°ä½å»¶è¿Ÿã€‚</p>
<p>â€‹<strong>æ ¸å¿ƒä¼˜åŠ¿</strong>â€‹ï¼š</p>
<ul>
<li>â€‹<strong>åè®®æ”¯æŒä¸°å¯Œ</strong>â€‹ï¼šæ”¯æŒ AMQPã€MQTTã€STOMP ç­‰å¤šç§åè®®</li>
<li>â€‹<strong>è·¯ç”±çµæ´»</strong>â€‹ï¼šé€šè¿‡äº¤æ¢æœºå®ç°å¤æ‚çš„æ¶ˆæ¯è·¯ç”±ç­–ç•¥</li>
<li>â€‹<strong>ä½å»¶è¿Ÿ</strong>â€‹ï¼šå¾®ç§’çº§å»¶è¿Ÿï¼Œé€‚åˆå®æ—¶æ€§è¦æ±‚é«˜çš„åœºæ™¯</li>
<li>â€‹<strong>ç®¡ç†ç•Œé¢å®Œå–„</strong>â€‹ï¼šæä¾›å‹å¥½çš„ Web ç®¡ç†ç•Œé¢</li>
</ul>
<p>â€‹<strong>æ¶æ„å±€é™</strong>â€‹ï¼š</p>
<ul>
<li>â€‹<strong>ååé‡ç›¸å¯¹è¾ƒä½</strong>â€‹ï¼šå•æœºååé‡åœ¨ä¸‡çº§åˆ°åä¸‡çº§</li>
<li>â€‹<strong>æ‰©å±•æ€§å—é™</strong>â€‹ï¼šé˜Ÿåˆ—ä¸èŠ‚ç‚¹å¼ºè€¦åˆï¼Œæ°´å¹³æ‰©å±•å›°éš¾</li>
<li>â€‹<strong>Erlang æŠ€æœ¯æ ˆ</strong>â€‹ï¼šåŸºäº Erlang å¼€å‘ï¼Œå®šåˆ¶å’ŒäºŒæ¬¡å¼€å‘é—¨æ§›è¾ƒé«˜</li>
</ul>
<h3 id="23-rocketmqé‡‘èçº§å¯é çš„æ¶ˆæ¯é˜Ÿåˆ—">2.3 RocketMQï¼šé‡‘èçº§å¯é çš„æ¶ˆæ¯é˜Ÿåˆ—</h3>
<p>RocketMQ é‡‡ç”¨<strong>ä¸»é¢˜-é˜Ÿåˆ—-æ¶ˆè´¹ç»„</strong>çš„æ¶æ„æ¨¡å¼ã€‚æ ¸å¿ƒç»„ä»¶åŒ…æ‹¬ NameServerï¼ˆè·¯ç”±ç®¡ç†ï¼‰ã€Brokerï¼ˆæ¶ˆæ¯å­˜å‚¨ï¼‰å’Œ Clientï¼ˆç”Ÿäº§æ¶ˆè´¹ç«¯ï¼‰ã€‚NameServer è´Ÿè´£è·¯ç”±ç®¡ç†ï¼ŒBroker é›†ç¾¤è´Ÿè´£æ¶ˆæ¯å­˜å‚¨ï¼Œæ”¯æŒä¸»ä»å¤åˆ¶ã€‚</p>
<p>â€‹<strong>è®¾è®¡å“²å­¦</strong>â€‹ï¼šRocketMQ åœ¨ååé‡å’Œå¯é æ€§ä¹‹é—´å¯»æ±‚å¹³è¡¡ï¼Œæ—¢ä¿è¯é«˜åååˆæä¾›å¼ºä¸€è‡´æ€§ä¿éšœã€‚å…¶æ¶ˆè´¹æ¨¡å¼æ”¯æŒ<strong>æ‹‰æ¨¡å¼</strong>å’Œâ€‹<strong>æ¨æ¨¡å¼</strong>â€‹ï¼Œå…¼å…·çµæ´»æ€§å’Œå®æ—¶æ€§ã€‚</p>
<p>â€‹<strong>æ ¸å¿ƒä¼˜åŠ¿</strong>â€‹ï¼š</p>
<ul>
<li>â€‹<strong>é‡‘èçº§å¯é æ€§</strong>â€‹ï¼šæ”¯æŒäº‹åŠ¡æ¶ˆæ¯ã€é¡ºåºæ¶ˆæ¯ç­‰é«˜çº§ç‰¹æ€§</li>
<li>â€‹<strong>ååé‡ä¸å»¶è¿Ÿå¹³è¡¡</strong>â€‹ï¼šå•æœºååé‡è¾¾åä¸‡çº§ï¼Œå»¶è¿Ÿåœ¨æ¯«ç§’çº§</li>
<li>â€‹<strong>æ¶ˆæ¯å›æº¯</strong>â€‹ï¼šæ”¯æŒæŒ‰æ—¶é—´åç§»é‡å›æº¯æ¶ˆæ¯</li>
<li>â€‹<strong>åˆ†å¸ƒå¼äº‹åŠ¡</strong>â€‹ï¼šæä¾›å®Œæ•´çš„åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆ</li>
</ul>
<p>â€‹<strong>æ¶æ„å±€é™</strong>â€‹ï¼š</p>
<ul>
<li>â€‹<strong>ç”Ÿæ€ç³»ç»Ÿç›¸å¯¹å±€é™</strong>â€‹ï¼šä¸»è¦é¢å‘ Java ç”Ÿæ€</li>
<li>â€‹<strong>ç¤¾åŒºæ´»è·ƒåº¦ä¸€èˆ¬</strong>â€‹ï¼šç›¸æ¯” Kafka ç¤¾åŒºæ´»è·ƒåº¦è¾ƒä½</li>
<li>â€‹<strong>é…ç½®å¤æ‚åº¦é«˜</strong>â€‹ï¼šéœ€è¦è°ƒæ•´è¾ƒå¤šå‚æ•°æ‰èƒ½è¾¾åˆ°æœ€ä¼˜æ€§èƒ½</li>
</ul>
<h2 id="3-æ ¸å¿ƒç‰¹æ€§å¯¹æ¯”ä¸æ€§èƒ½åˆ†æ">3 æ ¸å¿ƒç‰¹æ€§å¯¹æ¯”ä¸æ€§èƒ½åˆ†æ</h2>
<h3 id="31-æ€§èƒ½æŒ‡æ ‡å¯¹æ¯”åˆ†æ">3.1 æ€§èƒ½æŒ‡æ ‡å¯¹æ¯”åˆ†æ</h3>
<p>ä»¥ä¸‹æ˜¯ä¸‰å¤§æ¶ˆæ¯é˜Ÿåˆ—åœ¨å…³é”®æ€§èƒ½æŒ‡æ ‡ä¸Šçš„é‡åŒ–å¯¹æ¯”ï¼š</p>
<table>
<thead>
<tr>
<th><strong>æ€§èƒ½æŒ‡æ ‡</strong>â€‹</th>
<th><strong>Kafka</strong>â€‹</th>
<th><strong>RabbitMQ</strong>â€‹</th>
<th><strong>RocketMQ</strong>â€‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ååé‡</strong>â€‹</td>
<td>ç™¾ä¸‡çº§/ç§’</td>
<td>ä¸‡çº§-åä¸‡çº§/ç§’</td>
<td>åä¸‡çº§-ç™¾ä¸‡çº§/ç§’</td>
</tr>
<tr>
<td><strong>å»¶è¿Ÿ</strong>â€‹</td>
<td>æ¯«ç§’çº§(2-5ms)</td>
<td>å¾®ç§’çº§(å¾®ç§’çº§)</td>
<td>æ¯«ç§’çº§(3-10ms)</td>
</tr>
<tr>
<td><strong>æŒä¹…åŒ–</strong>â€‹</td>
<td>å¼º(ç£ç›˜é¡ºåºå†™)</td>
<td>ä¸­(å†…å­˜/ç£ç›˜)</td>
<td>å¼º(CommitLog)</td>
</tr>
<tr>
<td><strong>å¯ç”¨æ€§</strong>â€‹</td>
<td>æé«˜(å¤šå‰¯æœ¬ ISR)</td>
<td>é«˜(é•œåƒé˜Ÿåˆ—)</td>
<td>æé«˜(ä¸»ä»åŒæ­¥)</td>
</tr>
</tbody>
</table>
<p><em>æ•°æ®æ¥æºï¼š</em></p>
<p>â€‹<strong>ååé‡åˆ†æ</strong>â€‹ï¼šKafka çš„ååé‡ä¼˜åŠ¿æºäº<strong>é¡ºåº I/O</strong> å’Œ<strong>é›¶æ‹·è´</strong>æŠ€æœ¯ï¼Œé€‚åˆå¤§æ•°æ®é‡ä¼ è¾“ã€‚RabbitMQ å›  AMQP åè®®å¼€é”€å’Œ Erlang è™šæ‹Ÿæœºç‰¹æ€§ï¼Œååé‡ç›¸å¯¹è¾ƒä½ä½†è¶³å¤Ÿæ»¡è¶³å¤šæ•°ä¼ä¸šåº”ç”¨ã€‚RocketMQ åœ¨ååé‡å’ŒåŠŸèƒ½ä¸°å¯Œæ€§ä¹‹é—´å–å¾—äº†è¾ƒå¥½å¹³è¡¡ã€‚</p>
<p>â€‹<strong>å»¶è¿Ÿåˆ†æ</strong>â€‹ï¼šRabbitMQ çš„å¾®ç§’çº§å»¶è¿Ÿä½¿å…¶æˆä¸ºå®æ—¶æ€§è¦æ±‚é«˜åœºæ™¯çš„é¦–é€‰ã€‚Kafka å’Œ RocketMQ çš„æ¯«ç§’çº§å»¶è¿Ÿåœ¨å¤§å¤šæ•°ä¸šåŠ¡åœºæ™¯ä¸­å¯æ¥å—ï¼Œç‰¹åˆ«æ˜¯è€ƒè™‘åˆ°å®ƒä»¬çš„é«˜ååä¼˜åŠ¿ã€‚</p>
<h3 id="32-é«˜çº§åŠŸèƒ½å¯¹æ¯”">3.2 é«˜çº§åŠŸèƒ½å¯¹æ¯”</h3>
<p>â€‹<strong>æ¶ˆæ¯é¡ºåºæ€§</strong>â€‹ï¼šKafka å’Œ RocketMQ é€šè¿‡åˆ†åŒº/é˜Ÿåˆ—å†…é¡ºåºä¿è¯å®ç°æ¶ˆæ¯æœ‰åºï¼Œä½†å…¨å±€æœ‰åºä¼šç‰ºç‰²å¹¶å‘æ€§ã€‚RabbitMQ åœ¨å•é˜Ÿåˆ—å†…å¯ä¿è¯é¡ºåºï¼Œä½†å¤æ‚è·¯ç”±åœºæ™¯ä¸‹éš¾ä»¥ä¿è¯ã€‚</p>
<p>â€‹<strong>äº‹åŠ¡æ”¯æŒ</strong>â€‹ï¼šRocketMQ æä¾›æœ€å¼ºçš„äº‹åŠ¡æ”¯æŒï¼Œå°¤å…¶æ˜¯åˆ†å¸ƒå¼äº‹åŠ¡åœºæ™¯ã€‚Kafka çš„äº‹åŠ¡ä¸»è¦æœåŠ¡äº Exactly-Once è¯­ä¹‰ã€‚RabbitMQ çš„äº‹åŠ¡æ€§èƒ½è¾ƒå·®ï¼Œä¸€èˆ¬ä¸å»ºè®®åœ¨é«˜å¹¶å‘åœºæ™¯ä½¿ç”¨ã€‚</p>
<p>â€‹<strong>å»¶è¿Ÿæ¶ˆæ¯</strong>â€‹ï¼šRocketMQ åŸç”Ÿæ”¯æŒå»¶è¿Ÿæ¶ˆæ¯ï¼Œæä¾›å¤šä¸ªå›ºå®šå»¶è¿Ÿçº§åˆ«ã€‚RabbitMQ é€šè¿‡ DLX+TTL æ¨¡æ‹Ÿå»¶è¿Ÿæ¶ˆæ¯ï¼Œçµæ´»æ€§å·®ã€‚Kafka åŸç”Ÿä¸æ”¯æŒå»¶è¿Ÿæ¶ˆæ¯ï¼Œéœ€åº”ç”¨å±‚å®ç°ã€‚</p>
<h2 id="4-ä¸šåŠ¡åœºæ™¯åŒ¹é…æŒ‡å—">4 ä¸šåŠ¡åœºæ™¯åŒ¹é…æŒ‡å—</h2>
<h3 id="41-å…¸å‹ä¸šåŠ¡åœºæ™¯æŠ€æœ¯é€‰å‹">4.1 å…¸å‹ä¸šåŠ¡åœºæ™¯æŠ€æœ¯é€‰å‹</h3>
<p>â€‹<strong>å¤§æ•°æ®æ—¥å¿—é‡‡é›†</strong>â€‹ï¼šæ¨è Kafka</p>
<ul>
<li>â€‹<strong>æ ¸å¿ƒéœ€æ±‚</strong>â€‹ï¼šé«˜ååã€æŒä¹…å­˜å‚¨ã€æµå¼å¤„ç†</li>
<li>â€‹<strong>é…ç½®å»ºè®®</strong>â€‹ï¼šå¤šåˆ†åŒºå¹¶è¡Œã€å¼‚æ­¥åˆ·ç›˜ã€é€‚å½“å‰¯æœ¬æ•°</li>
<li>â€‹<strong>è§„é¿ç‚¹</strong>â€‹ï¼šé¿å…éœ€è¦ä½å»¶è¿Ÿæˆ–å¤æ‚è·¯ç”±çš„åœºæ™¯</li>
</ul>
<p>â€‹<strong>ç”µå•†äº¤æ˜“ç³»ç»Ÿ</strong>â€‹ï¼šæ¨è RocketMQ</p>
<ul>
<li>â€‹<strong>æ ¸å¿ƒéœ€æ±‚</strong>â€‹ï¼šäº‹åŠ¡æ¶ˆæ¯ã€é¡ºåºæ¶ˆæ¯ã€é«˜å¯é æ€§</li>
<li>â€‹<strong>é…ç½®å»ºè®®</strong>â€‹ï¼šåŒæ­¥åˆ·ç›˜ã€ä¸»ä»åŒæ­¥ã€äº‹åŠ¡æ¶ˆæ¯å¼€å…³</li>
<li>â€‹<strong>è§„é¿ç‚¹</strong>â€‹ï¼šé¿å…åè®®å¤šæ ·æ€§è¦æ±‚é«˜çš„åœºæ™¯</li>
</ul>
<p>â€‹<strong>ç‰©è”ç½‘å®æ—¶é€šä¿¡</strong>â€‹ï¼šæ¨è RabbitMQ</p>
<ul>
<li>â€‹<strong>æ ¸å¿ƒéœ€æ±‚</strong>â€‹ï¼šä½å»¶è¿Ÿã€å¤šåè®®æ”¯æŒã€è®¾å¤‡çº§è·¯ç”±</li>
<li>â€‹<strong>é…ç½®å»ºè®®</strong>â€‹ï¼šå†…å­˜é˜Ÿåˆ—ã€é€‚å½“é¢„å–å€¼ã€MQTT æ’ä»¶</li>
<li>â€‹<strong>è§„é¿ç‚¹</strong>â€‹ï¼šé¿å…å¤§æ•°æ®é‡æŒä¹…åŒ–åœºæ™¯</li>
</ul>
<p>â€‹<strong>é‡‘èæ”¯ä»˜ç³»ç»Ÿ</strong>â€‹ï¼šæ¨è RocketMQ</p>
<ul>
<li>â€‹<strong>æ ¸å¿ƒéœ€æ±‚</strong>â€‹ï¼šé‡‘èçº§å¯é ã€æ¶ˆæ¯å›æº¯ã€åˆ†å¸ƒå¼äº‹åŠ¡</li>
<li>â€‹<strong>é…ç½®å»ºè®®</strong>â€‹ï¼šåŒæ­¥åŒå†™ã€å¤šå‰¯æœ¬ã€ä¸¥æ ¼æœ‰åº</li>
<li>â€‹<strong>è§„é¿ç‚¹</strong>â€‹ï¼šé¿å…å¼±ä¸€è‡´æ€§è¦æ±‚çš„ç®€å•åœºæ™¯</li>
</ul>
<p>â€‹<strong>å¾®æœåŠ¡å¼‚æ­¥é€šä¿¡</strong>â€‹ï¼šè§†åœºæ™¯é€‰æ‹©</p>
<ul>
<li>â€‹<strong>ç®€å•è§£è€¦</strong>â€‹ï¼šRabbitMQï¼ˆè·¯ç”±çµæ´»ï¼‰</li>
<li>â€‹<strong>æ•°æ®åŒæ­¥</strong>â€‹ï¼šKafkaï¼ˆååä¼˜å…ˆï¼‰</li>
<li>â€‹<strong>äº‹åŠ¡åè°ƒ</strong>â€‹ï¼šRocketMQï¼ˆå¼ºä¸€è‡´æ€§ï¼‰</li>
</ul>
<h3 id="42-é€‰å‹å†³ç­–æ¡†æ¶">4.2 é€‰å‹å†³ç­–æ¡†æ¶</h3>
<p>åŸºäºä¸šåŠ¡ç‰¹å¾çš„é€‰å‹å†³ç­–æ ‘å¯ç®€åŒ–ä¸ºä»¥ä¸‹è·¯å¾„ï¼š</p>
<ol>
<li>
<p><strong>æ˜¯å¦éœ€è¦æé«˜åå(&gt;50 ä¸‡ TPS)ï¼Ÿ</strong></p>
<ul>
<li>æ˜¯ â†’ é€‰æ‹© Kafka</li>
<li>å¦ â†’ è¿›å…¥ä¸‹ä¸€æ­¥</li>
</ul>
</li>
<li>
<p><strong>æ˜¯å¦éœ€è¦å¾®ç§’çº§å»¶è¿Ÿï¼Ÿ</strong></p>
<ul>
<li>æ˜¯ â†’ é€‰æ‹© RabbitMQ</li>
<li>å¦ â†’ è¿›å…¥ä¸‹ä¸€æ­¥</li>
</ul>
</li>
<li>
<p><strong>æ˜¯å¦éœ€è¦å¼ºäº‹åŠ¡æ”¯æŒï¼Ÿ</strong></p>
<ul>
<li>æ˜¯ â†’ é€‰æ‹© RocketMQ</li>
<li>å¦ â†’ è¿›å…¥ä¸‹ä¸€æ­¥</li>
</ul>
</li>
<li>
<p><strong>æŠ€æœ¯å›¢é˜Ÿç†Ÿæ‚‰åº¦ï¼Ÿ</strong></p>
<ul>
<li>Java æŠ€æœ¯æ ˆ â†’ RocketMQ/Kafka</li>
<li>å¤šè¯­è¨€å›¢é˜Ÿ â†’ RabbitMQ</li>
<li>å¤§æ•°æ®å›¢é˜Ÿ â†’ Kafka</li>
</ul>
</li>
</ol>
<h2 id="5-é›†ç¾¤éƒ¨ç½²ä¸è¿ç»´è€ƒé‡">5 é›†ç¾¤éƒ¨ç½²ä¸è¿ç»´è€ƒé‡</h2>
<h3 id="51-è¿ç»´å¤æ‚åº¦å¯¹æ¯”">5.1 è¿ç»´å¤æ‚åº¦å¯¹æ¯”</h3>
<p><strong>Kafka</strong> è¿ç»´å¤æ‚åº¦æœ€é«˜ï¼Œéœ€ç®¡ç† ZooKeeper é›†ç¾¤ï¼ˆæ–°ç‰ˆæœ¬å·²å†…ç½® Raftï¼‰ã€Broker é›†ç¾¤å’Œç›‘æ§ä½“ç³»ã€‚åˆ†åŒºé‡å¹³è¡¡å’Œæ•°æ®è¿ç§»è¾ƒä¸ºå¤æ‚ï¼Œä½†ç”Ÿæ€å·¥å…·ä¸°å¯Œã€‚</p>
<p><strong>RabbitMQ</strong> è¿ç»´ç›¸å¯¹ç®€å•ï¼Œé•œåƒé˜Ÿåˆ—é…ç½®ç›´è§‚ï¼Œç®¡ç†ç•Œé¢å‹å¥½ã€‚ä½†é›†ç¾¤æ‰©å±•æ€§å—é™ï¼Œè·¨æœºæˆ¿åŒæ­¥éœ€è¦é¢å¤–é…ç½®ã€‚</p>
<p><strong>RocketMQ</strong> è¿ç»´å¤æ‚åº¦ä¸­ç­‰ï¼ŒNameServer æ— çŠ¶æ€è®¾è®¡ç®€åŒ–äº†éƒ¨ç½²ï¼Œä½†æ€§èƒ½è°ƒä¼˜éœ€è¦è¾ƒå¤šç»éªŒã€‚ä¸»ä»åˆ‡æ¢å’Œæ•…éšœæ¢å¤æœºåˆ¶è¾ƒä¸ºå®Œå–„ã€‚</p>
<h3 id="52-èµ„æºæ¶ˆè€—æ¨¡å‹">5.2 èµ„æºæ¶ˆè€—æ¨¡å‹</h3>
<p>â€‹<strong>å†…å­˜æ¶ˆè€—</strong>â€‹ï¼šRabbitMQ å¯¹å†…å­˜æœ€ä¸ºæ•æ„Ÿï¼Œå¤§é‡è¿æ¥å’Œé˜Ÿåˆ—ä¼šæ˜¾è‘—å¢åŠ å†…å­˜å‹åŠ›ã€‚Kafka å’Œ RocketMQ é€šè¿‡é¡µç¼“å­˜å’Œç£ç›˜é¡ºåºå†™ä¼˜åŒ–å†…å­˜ä½¿ç”¨ã€‚</p>
<p>â€‹<strong>CPU æ¶ˆè€—</strong>â€‹ï¼šKafka çš„å‹ç¼©å’Œåºåˆ—åŒ–æ“ä½œå¯¹ CPU æ¶ˆè€—è¾ƒé«˜ã€‚RabbitMQ çš„ Erlang è™šæ‹Ÿæœºåœ¨å¹¶å‘è¿æ¥å¤„ç†ä¸Šæ•ˆç‡è¾ƒé«˜ã€‚RocketMQ çš„ Java å®ç°éœ€è¦å…³æ³¨ GC è°ƒä¼˜ã€‚</p>
<p>â€‹<strong>ç½‘ç»œ IO</strong>â€‹ï¼šKafka çš„æ‰¹é‡ä¼ è¾“å‡å°‘ç½‘ç»œå¾€è¿”ï¼Œä½†å‰¯æœ¬åŒæ­¥å¢åŠ å†…ç½‘æµé‡ã€‚RabbitMQ çš„å•ä¸ªæ¶ˆæ¯ä¼ è¾“æ•ˆç‡ä½ï¼Œä½†æ€»ä½“ç½‘ç»œæ¶ˆè€—ä¸è´Ÿè½½æˆæ­£æ¯”ã€‚</p>
<h2 id="6-æ··åˆæ¶æ„ä¸è¿ç§»ç­–ç•¥">6 æ··åˆæ¶æ„ä¸è¿ç§»ç­–ç•¥</h2>
<h3 id="61-å¤šæ¶ˆæ¯é˜Ÿåˆ—å…±å­˜æ¨¡å¼">6.1 å¤šæ¶ˆæ¯é˜Ÿåˆ—å…±å­˜æ¨¡å¼</h3>
<p>åœ¨å¤æ‚ç³»ç»Ÿä¸­ï¼Œå¯é‡‡ç”¨<strong>æ··åˆæ¶æ„</strong>å‘æŒ¥å„æ¶ˆæ¯é˜Ÿåˆ—ä¼˜åŠ¿ã€‚å¸¸è§æ¨¡å¼åŒ…æ‹¬ï¼š</p>
<p>â€‹<strong>Kafka+RabbitMQ æ··åˆ</strong>â€‹ï¼šKafka å¤„ç†å¤§æ•°æ®æµï¼ŒRabbitMQ å¤„ç†å®æ—¶ä¸šåŠ¡æ¶ˆæ¯ã€‚é€šè¿‡è¿æ¥å™¨å®ç°æ•°æ®åŒå‘åŒæ­¥ï¼Œå…¼é¡¾ååé‡ä¸å®æ—¶æ€§ã€‚</p>
<p>â€‹<strong>åˆ†å±‚æ¶ˆæ¯æ¶æ„</strong>â€‹ï¼šæ¥å…¥å±‚ä½¿ç”¨ RabbitMQ å¤„ç†è®¾å¤‡è¿æ¥ï¼Œæ ¸å¿ƒå±‚ä½¿ç”¨ RocketMQ ä¿è¯äº‹åŠ¡ï¼Œåˆ†æå±‚ä½¿ç”¨ Kafka è¿›è¡Œæµå¤„ç†ã€‚å„å±‚é€šè¿‡æ¶ˆæ¯è·¯ç”±è¿æ¥ã€‚</p>
<h3 id="62-è¿ç§»ä¸å‡çº§ç­–ç•¥">6.2 è¿ç§»ä¸å‡çº§ç­–ç•¥</h3>
<p>â€‹<strong>ä» RabbitMQ è¿ç§»åˆ° Kafka</strong>â€‹ï¼šé‡‡ç”¨åŒå†™åŒè¯»ç­–ç•¥ï¼Œé€æ­¥è¿ç§»æ¶ˆè´¹è€…ï¼Œæœ€åè¿ç§»ç”Ÿäº§è€…ã€‚æ³¨æ„æ¶ˆæ¯æ¨¡å‹ä»é˜Ÿåˆ—åˆ°ä¸»é¢˜çš„è½¬æ¢ã€‚</p>
<p>â€‹<strong>ä» Kafka å‡çº§é›†ç¾¤</strong>â€‹ï¼šåˆ©ç”¨æ»šåŠ¨é‡å¯å’Œå‰¯æœ¬æœºåˆ¶å®ç°é›¶åœæœºå‡çº§ã€‚æ³¨æ„ç‰ˆæœ¬å…¼å®¹æ€§å’Œæ–°ç‰¹æ€§é€‚é…ã€‚</p>
<p>â€‹<strong>å¤šæ¶ˆæ¯é˜Ÿåˆ—å…±å­˜</strong>â€‹ï¼šé€šè¿‡æ˜ç¡®è¾¹ç•Œå’ŒèŒè´£åˆ’åˆ†ï¼Œé¿å…åŠŸèƒ½é‡å ã€‚å»ºç«‹ç»Ÿä¸€ç›‘æ§ä½“ç³»ï¼Œç¡®ä¿æ•´ä½“ç³»ç»Ÿå¯è§‚æµ‹æ€§ã€‚</p>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>æ¶ˆæ¯é˜Ÿåˆ—é€‰å‹æ˜¯æŠ€æœ¯å†³ç­–ä¸ä¸šåŠ¡éœ€æ±‚çš„ç²¾å‡†åŒ¹é…è¿‡ç¨‹ï¼Œæ²¡æœ‰æ”¾ä¹‹å››æµ·çš†çš†å‡†çš„æœ€ä¼˜è§£ã€‚<strong>Kafka</strong> é€‚ç”¨äºå¤§æ•°æ®åœºæ™¯çš„â€œé‡è½½å¡è½¦â€ï¼Œ<strong>RabbitMQ</strong> å¥½ä¼¼åŸå¸‚ä¸­çš„â€œè·‘è½¦â€çµæ´»å¿«é€Ÿï¼Œ<strong>RocketMQ</strong> åˆ™æ˜¯å…¨èƒ½çš„â€œSUVâ€å¹³è¡¡å¯é ä¸æ€§èƒ½ã€‚</p>
<p>é€‰å‹å†³ç­–åº”åŸºäº<strong>ä¸šåŠ¡åœºæ™¯</strong>è€ŒéæŠ€æœ¯å‚æ•°ï¼Œç»¼åˆè€ƒè™‘å›¢é˜Ÿèƒ½åŠ›å’Œè¿ç»´æˆæœ¬ã€‚åœ¨å¤æ‚ç³»ç»Ÿä¸­ï¼Œæ··åˆæ¶æ„å¾€å¾€æ¯”å•ä¸€æŠ€æœ¯é€‰å‹æ›´ä¸ºå®ç”¨ã€‚é€šè¿‡ç§‘å­¦çš„é€‰å‹æ¡†æ¶å’ŒæŒç»­çš„æ•ˆèƒ½è¯„ä¼°ï¼Œæ‰èƒ½æ„å»ºæ—¢æ»¡è¶³å½“å‰éœ€æ±‚åˆé€‚åº”æœªæ¥å‘å±•çš„æ¶ˆæ¯æ¶æ„ã€‚</p>
<blockquote>
<p>â€‹<strong>æŠ€æœ¯é€‰å‹å£è¯€</strong>â€‹ï¼šå°é‡ä½å»¶ RabbitMQï¼Œå¤§æ•°æ®æµç”¨ Kafkaï¼Œé‡‘èå¯é  RocketMQ</p>
</blockquote>
<hr>
<p><strong>ğŸ“š ä¸‹ç¯‡é¢„å‘Š</strong>â€‹</p>
<p>ã€ŠKafka å…¥é—¨å¿…çŸ¥æ¦‚å¿µâ€”â€”Topicã€åˆ†åŒºã€Offsetã€æ¶ˆè´¹ç»„çš„åä½œæœºåˆ¶ä¸å½±å“ã€‹â€”â€” æˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ï¼š</p>
<ul>
<li>ğŸ“Š â€‹<strong>Topic è®¾è®¡åŸåˆ™</strong>â€‹ï¼šåˆ†åŒºç­–ç•¥ã€å‰¯æœ¬å› å­ä¸æ¶ˆæ¯ä¿åºçš„å¹³è¡¡ä¹‹é“</li>
<li>ğŸ”„ â€‹<strong>æ¶ˆè´¹ç»„åè°ƒ</strong>â€‹ï¼šé‡å¹³è¡¡æœºåˆ¶ã€åˆ†åŒºåˆ†é…ç®—æ³•ä¸æ¶ˆè´¹è€…æ•…éšœè½¬ç§»</li>
<li>ğŸ“ â€‹<strong>Offset ç®¡ç†ç­–ç•¥</strong>â€‹ï¼šæäº¤æ—¶æœºã€è¯­ä¹‰é€‰æ‹©ä¸æ•°æ®ä¸€è‡´æ€§ä¿éšœ</li>
<li>âš™ï¸ â€‹<strong>ç”Ÿäº§è€…è°ƒä¼˜</strong>â€‹ï¼šACK æœºåˆ¶ã€æ‰¹é‡å‹ç¼©ä¸å¹‚ç­‰å‘é€çš„é…ç½®è¦ç‚¹</li>
<li>ğŸ” â€‹<strong>æ•…éšœè¯Šæ–­æŒ‡å—</strong>â€‹ï¼šå¸¸è§æ¶ˆè´¹å»¶è¿Ÿã€é‡å¤æ¶ˆè´¹ä¸æ•°æ®ä¸¢å¤±çš„è§£å†³æ–¹æ¡ˆ</li>
</ul>
<p><strong>â€‹ç‚¹å‡»å…³æ³¨ï¼ŒæŒæ¡ Kafka æ ¸å¿ƒåŸç†ä¸æœ€ä½³å®è·µï¼â€‹</strong>â€‹</p>
<blockquote>
<p>â€‹<strong>ä»Šæ—¥è¡ŒåŠ¨å»ºè®®</strong>â€‹ï¼š</p>
<ol>
<li>åˆ†æå½“å‰ä¸šåŠ¡çš„æ¶ˆæ¯åœºæ™¯ï¼Œæ˜ç¡®ååé‡ã€å»¶è¿Ÿå’Œå¯é æ€§éœ€æ±‚</li>
<li>è¯„ä¼°å›¢é˜ŸæŠ€æœ¯æ ˆï¼Œé€‰æ‹©åŒ¹é…åº¦æœ€é«˜çš„æ¶ˆæ¯é˜Ÿåˆ—æ–¹æ¡ˆ</li>
<li>è®¾è®¡æ¦‚å¿µéªŒè¯ï¼Œåœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯é€‰å‹å‡è®¾</li>
<li>åˆ¶å®šæ¸è¿›å¼è¿ç§»ç­–ç•¥ï¼Œé™ä½ç”Ÿäº§ç¯å¢ƒé£é™©</li>
</ol>
</blockquote>

</div>
<div id="MySignature" role="contentinfo">
    è¿›é˜¶ä¹‹è·¯ï¼Œç¥æŒ¡æ€ç¥ä½›æŒ¡æ€ä½›ï¼Œæ¬¢è¿å¤§å®¶ä¸€èµ·åŠ ï¼±ï¼±ç¾¤å…±åŒè®¨è®ºæˆé•¿ï¼Œç¾¤å·ï¼š<a href="https://jq.qq.com/?_wv=1027&amp;k=4AiobC0" target="view_window">620095084</a>
<br>
æ¬¢è¿æœç´¢å…³æ³¨å¾®ä¿¡å…¬ä¼—å· åŸºç¡€å…¨çŸ¥é“ ï¼šJavaBasis ï¼Œç¬¬ä¸€æ—¶é—´é˜…è¯»æœ€æ–°æ–‡ç« 
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-12-22 21:07">2025-12-22 21:07</span>&nbsp;
<a href="https://www.cnblogs.com/shiyuelp">åæœˆå—åŸ</a>&nbsp;
é˜…è¯»(<span id="post_view_count">46</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19384355);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19384355', targetLink: 'https://www.cnblogs.com/shiyuelp/p/19384355', title: 'MQ é€‰å‹æ¡†æ¶â€”â€”Kafka/RabbitMQ/RocketMQ çš„æ¨¡å‹å·®å¼‚ä¸ä¸šåŠ¡åŒ¹é…æ¸…å•' })">ä¸¾æŠ¥</a>
</div>
         ]]>
    </description>
    </item>
        </channel>
        </rss>