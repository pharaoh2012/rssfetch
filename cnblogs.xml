<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åå®¢å­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2026-02-05T01:29:44.795Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åå®¢å­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ ä»Promptå·¥ç¨å°Skillå·¥ç¨ï¼Agent Skillså¼æ¾æ åå½»åºæ¹åäºAIåä½æ¹å¼ ]]></title>
    <link>https://www.cnblogs.com/zlt2000/p/19577443</link>
    <guid>0c65bca507f66341b5ba766d81878212</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/zlt2000/p/19577443" title="åå¸äº 2026-02-05 09:20">
    <span role="heading" aria-level="2">ä»Promptå·¥ç¨å°Skillå·¥ç¨ï¼Agent Skillså¼æ¾æ åå½»åºæ¹åäºAIåä½æ¹å¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p><img alt="0-å°é¢" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1769816/202602/1769816-20260205091841787-1476633608.png" class="lazyload"></p>
<h2 id="ä¸ä¸ºä»ä¹-agent-skill-çªç¶ç«äº">ä¸ãä¸ºä»ä¹ Agent Skill çªç¶ç«äºï¼</h2>
<p>ä½ æ¯ä¸æ¯ä¹æè¿è¿æ ·çå´©æºæ¶å»ï¼</p>
<ul>
<li>æ¯æ¬¡è®© <code>Claude</code> åä»£ç ï¼é½è¦éå¤ç²è´´ <strong>è¯·ä½¿ç¨æä»¬çä»£ç è§èï¼é©¼å³°å½åã2ç©ºæ ¼ç¼©è¿ãå¿é¡»åååæµè¯</strong> ââåæäºæ¯å¤©å¥èæ°å¬å¸ï¼</li>
<li>å¥½ä¸å®¹æè°æå¥½ç <code>Prompt</code> æ¢ä¸ªé¡¹ç®å°±å®å¨å¤±æï¼ä¹åçè°æç»éªå½é¶ï¼</li>
<li>å¢ééæ¯ä¸ªäººç» AI çæä»¤ä¸ä¸æ ·ï¼å¯¼è´è¾åºçåå®¹ä¸ä¼å¿åèµæ·±æ¶æå¸ï¼ä¸ä¼å¿ååæ¯ä¸çæ°æã</li>
</ul>
<p>è¿äºé®é¢çæ ¹æºï¼å¶å®æ¯ <code>AI</code> ç <strong>ä¸ä¸è½åæ æ³æ²æ·</strong>ãç´å° 2025 å¹´ 10 æ <code>Anthropic</code> æ¨åº <code>Agent Skill</code>ï¼åå Claude Code Skillï¼æ­£æ¯ä¸ºè§£å³è¿äºé®é¢èçãè¿ä¸ä»æ¯ <code>Claude</code> çæ°åè½ï¼æ´æ¯ä¸ä¸ª <strong>å¼æ¾çè·¨å¹³å°æ å</strong>ï¼ç®åå·²è¢« <code>OpenAI</code>ã<code>Cursor</code>ã<code>Trae</code> ç­ä¸»æµå·¥å·è·è¿æ¯æã</p>
<p>æ¬æå°å¸¦ä½ ä» <strong>æ¯ä»ä¹</strong> å° <strong>æä¹ç¨å¨å®éå·¥ä½ä¸­</strong>ï¼å½»åºææ¡è¿ä¸ªæ¯ <code>Prompt</code> æ´é«çº§ãæ¯ <code>MCP</code> æ´æç¨ç <code>AI</code> ç¼ç¨ç¥å¨ã</p>
<p>&nbsp;</p>
<h2 id="äºå°åºä»ä¹æ¯-agent-skill">äºãå°åºä»ä¹æ¯ Agent Skillï¼</h2>
<p>ç¨æéä¿çæ¯å»ï¼<code>Agent Skill</code> æ¯ <code>AI</code> ç <strong>å¥èæå + å·¥å·ç®±</strong>ã</p>
<p>æ³è±¡ä½ æäºä¸ä½å¤©æå®ä¹ ç <code>Claude</code> ä»æºåæé«ä½ä¸æä½ ä»¬å¬å¸çä¸å¡ãä¼ ç»çåæ³æ¯æ¯æ¬¡å¸ç½®ä»»å¡é½å£å¤´äº¤ä»£ä¸é <code>Prompt</code> è <code>Agent Skill</code> åæ¯ç»ä»ä¸æ¬å®æ´çæ åä½ä¸ç¨åº <code>SOP</code>ï¼</p>
<ul>
<li>ð å¥èæåï¼SKILL.mdï¼ï¼åå«å²ä½æè¿°ãå·¥ä½æµç¨ãæ³¨æäºé¡¹</li>
<li>ð§° å·¥å·ç®±ï¼Scriptsï¼ï¼å¤çç¹å®ä»»å¡çèæ¬åä»£ç </li>
<li>ð åèèµæï¼Referencesï¼ï¼è¡ä¸è§èãæ¨¡æ¿ç´ æãAPIææ¡£</li>
</ul>
<p>ææ¯æ¬è´¨ï¼<code>Agent Skill</code> æ¯ä¸ä¸ªæ ååçæä»¶å¤¹ç»æï¼æ ¸å¿å¿é¡»åå« <code>SKILL.md</code> æä»¶ï¼YAMLåæ°æ® + Markdownè¯´æï¼ï¼å¯éåå«èæ¬ãæ¨¡æ¿ç­èµæºæä»¶ã</p>
<pre><code>my-skill/            # æè½åæ ¹ç®å½
âââ SKILL.md         # ð æ ¸å¿æä»¶ï¼åæ°æ® + å·¥ä½æµæä»¤ï¼å¿é¡»ï¼
âââ scripts/         # ð§ å¯éï¼èªå¨åèæ¬ï¼Python/Bashï¼
âââ references/      # ð å¯éï¼ä¸ä¸ææ¡£ãAPIæåãFAQ
âââ assets/          # ð¨ å¯éï¼æ¨¡æ¿ãç¤ºä¾ãéæèµæº
</code></pre>
<p>å½ <code>AI</code> æ£æµå°ç¸å³ä»»å¡æ¶ï¼ä¼èªå¨ <strong>ç¿»å¼</strong> å¯¹åºçæåï¼ä¸¥æ ¼æç§æ¢å®æµç¨æ§è¡ï¼æ éä½ æ¯æ¬¡é½éå¤äº¤ä»£ã</p>
<p>&nbsp;</p>
<h2 id="ä¸skillå·¥ä½åç">ä¸ãSkillå·¥ä½åç</h2>
<p><code>Skill</code> æç²¾å¦çè®¾è®¡ï¼æ¯å®ç <strong>æ¸è¿å¼å è½½æºå¶</strong> ââ å°±åä½ æ¥å­å¸ï¼åçç®å½ï¼åç¿»å¯¹åºç« èï¼æåæ¥éå½ï¼ä¸ä¼ä¸ä¸æ¥å°±ææ´æ¬ä¹¦å¡è¿èå­éã</p>
<h3 id="31-ä¸å±å è½½ç¨æå°ç-token-åæå¤çäº">3.1. ä¸å±å è½½ï¼ç¨æå°ç Token åæå¤çäº</h3>
<p><img alt="1-æ ¸å¿æºå¶" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1769816/202602/1769816-20260205091903502-872552372.png" class="lazyload"></p>
<table>
<thead>
<tr>
<th>å è½½å±çº§</th>
<th>åå®¹ç±»å</th>
<th>å è½½æ¶æº</th>
<th>ä½ç¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>L1</td>
<td>åæ°æ®ï¼åçï¼</td>
<td>Agent å¯å¨æ¶èªå¨å è½½</td>
<td>è®©AIç¥éâæä»ä¹æè½å¯ç¨â</td>
</tr>
<tr>
<td>L2</td>
<td>è¯´æææ¡£ï¼æ­£æï¼</td>
<td>å¹éç¨æ·éæ±æ¶å è½½</td>
<td>æAIâå·ä½æä¹åâ</td>
</tr>
<tr>
<td>L3</td>
<td>èµæºæä»¶ï¼èæ¬ / æ¨¡æ¿ï¼</td>
<td>æ§è¡ä¸­æéå è½½</td>
<td>æä¾âå·¥å·/ç´ ææ¯æâ</td>
</tr>
</tbody>
</table>
<h3 id="32-åæ­¥æ§è¡æµç¨">3.2. åæ­¥æ§è¡æµç¨</h3>
<p><img alt="2-æ§è¡æµç¨" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1769816/202602/1769816-20260205091916691-679024495.png" class="lazyload"></p>
<ol>
<li>ð¯ æå¾å¹éï¼AI æ«æææ Skill çåæ°æ®ï¼æ¾å°æå¹éå½åä»»å¡çæè½</li>
<li>ð è¯»åæåï¼å è½½å¯¹åº SKILL.mdï¼ææ¡æ§è¡æ­¥éª¤ãæ£æ¥ç¹ãè¾åºè§è</li>
<li>ð§ æéæ§è¡ï¼è°ç¨ scripts/ ä¸­çèæ¬ï¼æ¥è¯¢ references/ ä¸­çèµæ</li>
<li>â åé¦ç»æï¼ææ¨¡æ¿è¾åºææï¼æè¯¢é®ç¼ºå¤±ä¿¡æ¯</li>
</ol>
<p>&nbsp;</p>
<h2 id="åç°æææ¯çå¯¹æ¯">åãç°æææ¯çå¯¹æ¯</h2>
<h3 id="41-agent-skill-vs-prompt">4.1. Agent Skill vs Prompt</h3>
<table>
<thead>
<tr>
<th>ç»´åº¦</th>
<th>æ®é Prompt</th>
<th>Agent Skill</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>æ§è´¨</strong></td>
<td>ä¸´æ¶æä»¤ï¼ç¨å®å³èµ°</td>
<td>æ ååæµç¨ï¼æ°¸ä¹å¤ç¨</td>
</tr>
<tr>
<td><strong>å è½½æ¹å¼</strong></td>
<td>æ¯æ¬¡å¨éè¾å¥</td>
<td>æéæ¸è¿å è½½</td>
</tr>
<tr>
<td><strong>ç¨³å®æ§</strong></td>
<td>ä¾èµæ¨¡å"è®°å¿"ï¼ææ¼ç§»</td>
<td>åºåæ£æ¥ç¹ï¼å¼ºå¶æ§è¡</td>
</tr>
<tr>
<td><strong>ç®¡ç</strong></td>
<td>åæ£å¨èå¤©è®°å½é</td>
<td>æä»¶åãçæ¬å¯æ§</td>
</tr>
<tr>
<td><strong>å±äº«</strong></td>
<td>å¤å¶ç²è´´ï¼æä¸¢å¤±æ ¼å¼</td>
<td>æ´ååäº«ï¼å¼ç®±å³ç¨</td>
</tr>
</tbody>
</table>
<blockquote>
<p>ä¸å¥è¯æ»ç»ï¼Prompt æ¯ <strong>å£å¤´äº¤ä»£</strong>ï¼Skills æ¯<strong>ä¹¦é¢ SOP + å·¥å·ç®±</strong>ã</p>
</blockquote>
<h3 id="42-agent-skill-vs-å¤-agent-æ¶æ">4.2. Agent Skill vs å¤ Agent æ¶æ</h3>
<table>
<thead>
<tr>
<th>ç»´åº¦</th>
<th>å¤ Agent æ¶æ</th>
<th>Agent Skill</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>å¤æåº¦</strong></td>
<td>ééçº§ï¼éè¦æ¶æè®¾è®¡</td>
<td>è½»éçº§ï¼åä¸ªæä»¶å¤¹å³å¯</td>
</tr>
<tr>
<td><strong>éç¨åºæ¯</strong></td>
<td>å¤æå¹¶è¡ä»»å¡ï¼å¦ç ç©¶+åä½+å®¡æ ¸åæ¶è¿è¡ï¼</td>
<td>åé¢åæ·±åº¦ä»»å¡ï¼å¦ä¸ä¸ä»£ç å®¡æ¥ï¼</td>
</tr>
<tr>
<td><strong>èµæºæ¶è</strong></td>
<td>é«ï¼éè°åº¦å¤ä¸ª Agent å®ä¾</td>
<td>ä½ï¼å Agent åè½ååæ¢</td>
</tr>
<tr>
<td><strong>å¯å¨ææ¬</strong></td>
<td>éè¦æ­å»º Agent æ¡æ¶</td>
<td>é¶ææ¬ï¼å¤å¶æä»¶å¤¹å³å¯</td>
</tr>
<tr>
<td><strong>å³ç³»</strong></td>
<td>ä½ç³»çº§è§£å³æ¹æ¡</td>
<td>ååçº§è½åæ¨¡åï¼å¯è¢«å¤ Agent è°ç¨</td>
</tr>
</tbody>
</table>
<h3 id="43-agent-skill-vs-mcp">4.3. Agent Skill vs MCP</h3>
<table>
<thead>
<tr>
<th>ç»´åº¦</th>
<th>MCP</th>
<th>Agent Skill</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>å®ä½</strong></td>
<td>è¿æ¥åè®®ï¼AI ä¸å¤é¨ç³»ç»ç"USB æ¥å£"</td>
<td>æ§è¡æ åï¼AI åäºç"æä½æå"</td>
</tr>
<tr>
<td><strong>è§£å³çé®é¢</strong></td>
<td><strong>è½ä¸è½è¿</strong>ï¼è®¿é®æ°æ®åºãAPIãæä»¶ç³»ç»ï¼</td>
<td><strong>æä¹å</strong>ï¼æµç¨ãè§èãæä½³å®è·µï¼</td>
</tr>
<tr>
<td><strong>ææ¯å½¢æ</strong></td>
<td>éè¦è¿è¡ MCP Serverï¼TypeScript/Pythonï¼</td>
<td>éææä»¶å¤¹ï¼Markdown + èæ¬ï¼</td>
</tr>
<tr>
<td><strong>å è½½æ¶æº</strong></td>
<td>å¯å¨æ¶å»ºç«è¿æ¥</td>
<td>æéæ¸è¿å è½½</td>
</tr>
<tr>
<td><strong>å³ç³»</strong></td>
<td><strong>äºè¡¥</strong>ï¼MCP æä¾âå·¥å·â</td>
<td>Skills æä¾âä½¿ç¨æåâ</td>
</tr>
</tbody>
</table>
<blockquote>
<p>MCP è®© AI è½è¿ä¸æ°æ®åºï¼Skill æ AI æä¹æä½ ä»¬å¬å¸çè§èæ¥æ°æ®ãçææ¥è¡¨ãå¤çå¼å¸¸ãä¸¤èéåï¼AI æè½çæ­£æä¸º"æè¡çä¸å®¶"ã</p>
</blockquote>
<p>&nbsp;</p>
<h2 id="äºåå»ºä½ çç¬¬ä¸ä¸ª-agent-skill">äºãåå»ºä½ çç¬¬ä¸ä¸ª Agent Skill</h2>
<p>ä¸é¢ç¨ <code>ä¼è®®çºªè¦æ´çå©æ</code> ä¸ºä¾ï¼ä»é¶åå»ºä¸ä¸ª Skill</p>
<p><strong>åºæ¯</strong>ï¼å¼ä¼å½é³è½¬æå­åï¼éè¦æ´çæç»æåä¼è®®çºªè¦ãä¸åä¼è®®ç±»åï¼å¨ä¼/é¡¹ç®å¤ç/å®¢æ·æ²éï¼éè¦ä¸åçæ´çæ¨¡æ¿ã</p>
<h3 id="51-åå»º-skill-æä»¶å¤¹ç»æ">5.1. åå»º Skill æä»¶å¤¹ç»æ</h3>
<p>æ°å»ºä¸ä¸ªåä¸º <code>meeting-minutes</code> çæä»¶å¤¹ï¼æ»ä½çæä»¶ç»æå¦ä¸ï¼</p>
<pre><code>/meeting-minutes/
âââ SKILL.md                    # L1ï¼æè½åæ°æ®ï¼L2ï¼åå®¹
âââ references/                 # L3ï¼æä¼è®®ç±»åæéå è½½
â   âââ weekly-rule.md          # å¨ä¼æ¨¡æ¿
â   âââ retro-rule.md           # å¤çæ¨¡æ¿
â   âââ client-rule.md          # å®¢æ·æ²éæ¨¡æ¿
</code></pre>
<h3 id="52-skillmdæ ¸å¿æä»¶">5.2. SKILL.mdï¼æ ¸å¿æä»¶ï¼</h3>
<h4 id="521-åæ°æ®">5.2.1. åæ°æ®</h4>
<p>å¨ <code>SKILL.md</code> æä»¶æå¼å¤´ä»¥ä¸ä¸ä¸¤ä¸ª <code>---</code> ä½ä¸ºåæ°æ®æ è¯</p>
<pre><code class="language-markdown">---
name: meeting-minutes
description: åå¬å®¤éç¨ä¼è®®çºªè¦æ´çå©æï¼æ¯æå¨ä¼/é¡¹ç®å¤çä¼/å®¢æ·æ²éä¼ä¸ç±»åºæ¯ï¼èªå¨è¯å«ä¼è®®ç±»åï¼æéå è½½å¯¹åºä¼è®®è§åï¼æºè½æåå³é®ä¿¡æ¯ï¼è¾åºç»æåçºªè¦ã
---
</code></pre>
<h4 id="522-skillåå®¹">5.2.2. SKILLåå®¹</h4>
<p><img alt="3-ç¼åSKILL" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1769816/202602/1769816-20260205091933122-75200078.png" class="lazyload"></p>
<h3 id="53-ç¼åæ¨¡ååéç½®references">5.3. ç¼åæ¨¡ååéç½®references</h3>
<p><img alt="4-ç¼åæ¨¡ååéç½®references" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1769816/202602/1769816-20260205091944212-1744002855.png" class="lazyload"></p>
<blockquote>
<p>éè¿æä»¶åç¦»ï¼AIæ¯æ¬¡åªè¯»åå½åä»»å¡æéçè§åï¼é¿å Context æ±¡æ</p>
</blockquote>
<h3 id="54-æµè¯ä½ ç-skillä»¥-trae-ä¸ºä¾">5.4. æµè¯ä½ ç Skillï¼ä»¥ Trae ä¸ºä¾ï¼</h3>
<p><code>Trae</code> ä½ä¸ºå½åç <code>AI IDE</code> å·²åçæ¯æ <code>Agent Skills</code></p>
<ul>
<li>
<p>å®ç½ï¼<code>https://www.trae.cn/</code></p>
</li>
<li>
<p>ä¸è½½å¹¶å®è£ <code>TRAE IDE</code></p>
</li>
</ul>
<h4 id="541-å¯¼å¥skill">5.4.1. å¯¼å¥Skill</h4>
<ol>
<li>åå»ºä¸ä¸ªæä»¶å¤¹ï¼ä¾å¦ <code>my_skills</code></li>
<li>ä½¿ç¨ <code>TRAE IDE</code> æå¼è¿ä¸ªæä»¶å¤¹</li>
<li>å° <code>meeting-minutes</code> æä»¶å¤¹å¤å¶å° my_skills/.trae/skills/ ç®å½ä¸</li>
</ol>
<h4 id="542-è¾å¥æç¤ºè¯">5.4.2. è¾å¥æç¤ºè¯</h4>
<p>éè¦åæ¢ä¸º <code>SOLO</code> æ¨¡å¼ï¼ç¶åå¨å¯¹è¯æ¡è¾å¥ä»¥ä¸æç¤ºè¯ï¼</p>
<pre><code class="language-bash">å¸®æçæå¨ä¼ä¼è®®çºªè¦

åå§ææ¬ï¼
å°æï¼ç¨æ·æ¨¡åææå®äºï¼å·²ç»ææµã
å°çº¢ï¼æ¥å£ææ¡£æè¿æ²¡å¼ï¼æè´è´£åï¼å¨äºåç»åºæ¥ã
å¼ ä¸ï¼æµè¯ç¯å¢é£ä¸ªé®é¢æä¸å®ï¼éè¦è¿ç»´èéå¸®å¿ççã
æåï¼ä¸å¨ææç®å¼å§è®¢åæ¨¡åï¼å¨ä¸ååºä¸ªææ¯æ¹æ¡ççã
çäºï¼æ°æ®åºè®¾è®¡è°reviewä¸ä¸ï¼
å°æï¼ææ¥å§ï¼ä¸è¿å¾æå¤©ææç©ºã
</code></pre>
<h4 id="543-æ§è¡skill">5.4.3. æ§è¡Skill</h4>
<p><img alt="5-traeæ§è¡è¿ç¨" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1769816/202602/1769816-20260205092000055-509124481.png" class="lazyload"></p>
<h4 id="544-æç»è¾åºä»¥ä¸åå®¹">5.4.4. æç»è¾åºä»¥ä¸åå®¹</h4>
<p><img alt="6-æ§è¡ææ" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1769816/202602/1769816-20260205092007763-1423857593.png" class="lazyload"></p>
<p>&nbsp;</p>
<h2 id="å­æ¬æskillä¸è½½å°å">å­ãæ¬æSkillä¸è½½å°å</h2>
<p>æ¬ææ¡ä¾ <code>ä¼è®®çºªè¦æ´çå©æ</code> Skill çä¸è½½å°åå¦ä¸ï¼</p>
<ul>
<li>Giteeå°åï¼</li>
</ul>
<p><a href="https://gitee.com/zlt2000/my-agent-skill/tree/master/meeting-minutes" target="_blank" rel="noopener nofollow">https://gitee.com/zlt2000/my-agent-skill/tree/master/meeting-minutes</a></p>
<ul>
<li>Githubå°åï¼</li>
</ul>
<p><a href="https://github.com/zlt2000/my-agent-skill/tree/master/meeting-minutes" target="_blank" rel="noopener nofollow">https://github.com/zlt2000/my-agent-skill/tree/master/meeting-minutes</a></p>
<blockquote>
<p>å¨å®éä½¿ç¨è¿ç¨ä¸­æ¬æ Skill è¿å¯ä»¥è¿è¡ä»¥ä¸è¿­ä»£ä¼åï¼</p>
<ol>
<li>å¨ <code>references</code> éæ©å±æ´å¤ç <strong>ä¼è®®ç±»å</strong> æ¨¡æ¿ï¼</li>
<li>å¨ <code>script</code> æä»¶å¤¹å <code>Python</code> èæ¬ï¼å®ç°è¾åºåå®¹ <strong>å¯¼åºwordææ¡£</strong> æè <strong>åæ­¥ç»é£ä¹¦</strong>ã</li>
</ol>
</blockquote>
<p>&nbsp;</p>
<h2 id="ä¸æ»ç»">ä¸ãæ»ç»</h2>
<p><code>Agent Skills</code> çæ­£å¼åå¸ï¼æ å¿ç AI åä½ä» <strong>æç¤ºè¯å·¥ç¨</strong> æ­£å¼è¿å¥ <strong>æè½å·¥ç¨</strong> çå¨æ°èå¼ãå®å°äººç±»ä¸å®¶çç»éªãæ ååæµç¨ä¸è¡ä¸æä½³å®è·µï¼å°è£æ <code>AI</code> å¯çè§£ãå¯æ§è¡ãå¯å¤ç¨çæ°å­èµäº§ã</p>
<p>æ ¸å¿ä»·å¼ä¼å¿ï¼</p>
<ol>
<li><strong>éæ¬å¢æï¼</strong> éè¿æ¸è¿å¼æ«é²ãæéå è½½æºå¶ï¼å¤§å¹åå° Token æ¶èï¼åæ¶è®© AI èç¦æ ¸å¿ä»»å¡ï¼æ¨çæçä¸æ§è¡ç¨³å®æ§åæ­¥æåï¼</li>
<li><strong>è·¨å¹³å°äºéï¼</strong> ä½ä¸ºå¼æ¾æ åï¼å®ç° âä¸æ¬¡æå»ºãå¤ç«¯å¤ç¨âï¼Skill å¯æ ç¼éé ClaudeãCursorãTraeãCopilot ç­ä¸»æµå¹³å°ï¼æç ´å·¥å·å£åï¼</li>
<li><strong>Skill å¸åºï¼</strong> æå»ºèµ·ç±»ä¼¼ VS Code æä»¶å¸åºç Skill çæï¼å®æ¹ä¸ç¤¾åºå±åæé æè½ååºï¼è®©ä¸ä¸è½åå¯åäº«ãå¯è¿­ä»£ãå¯è§æ¨¡ååºç¨ã</li>
</ol>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-05 09:21">2026-02-05 09:20</span>&nbsp;
<a href="https://www.cnblogs.com/zlt2000">zlt2000</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19577443);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19577443', targetLink: 'https://www.cnblogs.com/zlt2000/p/19577443', title: 'ä»Promptå·¥ç¨å°Skillå·¥ç¨ï¼Agent Skillså¼æ¾æ åå½»åºæ¹åäºAIåä½æ¹å¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Obsidian Ã Claudian Ã Skillsï¼æé çæ­£ä¼âæèâçä¸ªäººç¥è¯åº ]]></title>
    <link>https://www.cnblogs.com/bugshare/p/19577439</link>
    <guid>6040c80d3ba8f7cb0d9c1506c7f6ae0e</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/bugshare/p/19577439" title="åå¸äº 2026-02-05 09:19">
    <span role="heading" aria-level="2">Obsidian Ã Claudian Ã Skillsï¼æé çæ­£ä¼âæèâçä¸ªäººç¥è¯åº</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>å¨ä¸ä¸ç¯æç«  <strong>ãObsidian ä½¿ç¨æåï¼ä»é¶å¼å§æ­å»ºä½ çä¸ªäººç¥è¯åºã</strong> ä¸­ï¼æä»¬ä»ç»äº Obsidian çåºç¡ä½¿ç¨æ¹å¼ï¼<br>
å¦ä½ç¨ Markdown è®°å½ç¥è¯ãç¨åé¾ç»ç»æè·¯ãéæ­¥æ­å»ºå±äºèªå·±çç¥è¯ä½ç³»ã</p>
<p>ä½é®é¢ä¹éä¹èæ¥ï¼</p>
<blockquote>
<p><strong>å½ç¬è®°è¶æ¥è¶å¤ï¼å®ä»¬ççâæ´»âèµ·æ¥äºåï¼</strong></p>
</blockquote>
<p>æè¿ä¸æ®µæ¶é´ï¼<strong>Claude Code + Skills</strong> å¨å¼åèåå­ééå¸¸ç«ð¥<br>
å®ä¸ä»æ¯ä¸ä¸ª AI èå¤©å·¥å·ï¼èæ¯ä¸ä¸ª<strong>å¯ä»¥çè§£ä¸ä¸æãæ§è¡æè½ãåä¸åä½ç AI ç¼ç¨ä¸æèå©æ</strong>ã</p>
<p>é£ä¹é®é¢æ¥äºï¼</p>
<blockquote>
<p><strong>Obsidian è½ä¸è½æ¥å¥ Claude Codeï¼<br>
è®© AI ä¸åªæ¯âå¸®ä½ åâï¼èæ¯çæ­£åä¸âæèâåâæ´çç¥è¯âï¼</strong></p>
</blockquote>
<p>ç­æ¡æ¯ï¼<strong>å¯ä»¥ï¼èä¸ä½éªéå¸¸å¥½ã</strong></p>
<p>æ¬æå°å¸¦ä½ ä¸æ­¥æ­¥å®æï¼</p>
<ul>
<li>å¨ Obsidian ä¸­æ¥å¥ <strong>Claude Code</strong></li>
<li>éè¿ <strong>Claudian æä»¶</strong>ï¼æ Claude åæä½ ç<strong>AI åä½å©æ</strong></li>
<li>å©ç¨ <strong>Skills</strong>ï¼è®© AI ç´æ¥åä¸ç¬è®°ç¼è¾ãéæä¸æè</li>
</ul>
<hr>
<h1 id="ä¸ºä»ä¹è¦æ-claude-æ¥å¥-obsidian">ä¸ºä»ä¹è¦æ Claude æ¥å¥ Obsidianï¼</h1>
<p>å¨å¼å§ä¹åï¼åè¯´æ¸æ¥<strong>è¿å¥ç»åè§£å³ä»ä¹é®é¢</strong>ã</p>
<p>ä¼ ç» AI + ç¬è®°çæ¹å¼ï¼éå¸¸æ¯ï¼</p>
<ul>
<li>å¤å¶ä¸æ®µåå®¹</li>
<li>æå¼ç½é¡µ / Chat å®¢æ·ç«¯</li>
<li>è®© AI å¸®ä½ æ¹å / æ»ç»</li>
<li>åç²è´´åæ¥</li>
</ul>
<p>è <strong>Obsidian Ã Claude Code Ã Skills</strong> çæ ¸å¿ä»·å¼å¨äºï¼</p>
<h2 id="-ai-å°±å¨ä½ çç¥è¯åºéå·¥ä½">â AI å°±å¨ä½ çç¥è¯åºéå·¥ä½</h2>
<ul>
<li>ä¸éè¦æ¥ååæ¢çªå£</li>
<li>ç´æ¥çè§£ä½ å½åç¬è®°åå®¹</li>
<li>å¨<strong>åå°è¿è¡åèç¼è¾</strong></li>
</ul>
<h2 id="-claude-code--skills--æ®éèå¤©">â Claude Code + Skills â  æ®éèå¤©</h2>
<ul>
<li>è½è°ç¨ <strong>Skillï¼æè½ï¼</strong></li>
<li>è½æ§è¡å¤ææä»¤ï¼éåãæè§£ãç»æåãè¡¥åï¼</li>
<li>æ´åä¸ä¸ªã<strong>åä½ä¼ä¼´</strong>ãï¼èä¸æ¯é®ç­æºå¨äºº</li>
</ul>
<h2 id="-éä¾µå¥å¼å®å¨æ¬å°åå¥½">â éä¾µå¥å¼ãå®å¨æ¬å°åå¥½</h2>
<ul>
<li>Obsidian ä»ç¶æ¯ä½ çæ¬å° Markdown</li>
<li>Claude åªæ¯âåä¸ç¼è¾âï¼ä¸å«æä½ çæ°æ®ç»æ</li>
</ul>
<hr>
<h1 id="claudian-æä»¶ä»ç»">Claudian æä»¶ä»ç»</h1>
<p>å®ç°è¿ä¸åçå³é®ï¼å°±æ¯ <strong>Claudian æä»¶</strong>ã</p>
<blockquote>
<p>GitHubï¼<br>
<a href="https://github.com/YishenTu/claudian" target="_blank" rel="noopener nofollow">https://github.com/YishenTu/claudian</a></p>
</blockquote>
<p><strong>Claudian æ¯ä»ä¹ï¼</strong></p>
<ul>
<li>ä¸ä¸ª Obsidian æ¡é¢ç«¯æä»¶</li>
<li>ç¨äºè¿æ¥ <strong>Claude Code CLI</strong></li>
<li>æ¯æ <strong>Claude Code ç Skills ä½ç³»</strong></li>
<li>å¯å¨ Obsidian åç´æ¥ä¸ Claude äº¤äºãç¼è¾ææ¬</li>
</ul>
<p>ä¸å¥è¯æ»ç»ï¼</p>
<blockquote>
<p><strong>Claudian = æ Claude Code æ¬è¿ Obsidianã</strong></p>
</blockquote>
<hr>
<h1 id="ä½¿ç¨åçè¦æ±">ä½¿ç¨åçè¦æ±</h1>
<p>å¨å®è£åï¼è¯·ç¡®ä¿ä½ çç¯å¢æ»¡è¶³ä»¥ä¸æ¡ä»¶ï¼</p>
<ul>
<li>
<p>â å·²å®è£ <a href="https://code.claude.com/docs/en/overview" target="_blank" rel="noopener nofollow">Claude Code CLI</a><br>
ð <strong>å¼ºçå»ºè®®ä½¿ç¨ Native Install</strong></p>
</li>
<li>
<p>â Obsidian <strong>v1.8.9+</strong></p>
</li>
<li>
<p>â æ¥ææ¯æ <strong>Anthropic API æ ¼å¼</strong> ç Claude è®¢é / API Key<br>
æä½¿ç¨ä»¥ä¸å¼å®¹å¹³å°ä¹ä¸ï¼</p>
<ul>
<li><a href="https://openrouter.ai/docs/guides/guides/claude-code-integration" target="_blank" rel="noopener nofollow">OpenRouter</a></li>
<li><a href="https://platform.moonshot.ai/docs/guide/agent-support" target="_blank" rel="noopener nofollow">Kimiï¼æä¹æé¢ï¼</a></li>
<li><a href="https://docs.z.ai/devpack/tool/claude" target="_blank" rel="noopener nofollow">GLMï¼æºè°± BigModelï¼</a></li>
<li><a href="https://api-docs.deepseek.com/guides/anthropic_api" target="_blank" rel="noopener nofollow">DeepSeek</a></li>
</ul>
</li>
<li>
<p>â <strong>ä»æ¯ææ¡é¢ç«¯</strong>ï¼macOS / Linux / Windowsï¼</p>
</li>
</ul>
<blockquote>
<p>å¦æä½ å¯¹ Claude CodeãSkillsãææºè°±æ¨¡åçæ¥å¥è¿ä¸çæï¼å¯ä»¥ååèæä¹åçä¸¤ç¯æç« ï¼</p>
<ul>
<li>ãClaude Code Ã æºè°± BigModel å®æéææåã</li>
<li>ãClaude Code æ¯æéç£æ©å± Skillsã</li>
</ul>
</blockquote>
<hr>
<h1 id="claudian-æä»¶å®è£æå¨">Claudian æä»¶å®è£ï¼æå¨ï¼</h1>
<p>ç®å Claudian <strong>å°æªä¸æ¶ Obsidian ç¤¾åºå¸åº</strong>ï¼éè¦æå¨å®è£ã</p>
<h2 id="1ï¸â£-ä¸è½½æä»¶æä»¶">1ï¸â£ ä¸è½½æä»¶æä»¶</h2>
<p>åå¾ GitHub Releases é¡µé¢ï¼ä¸è½½ææ°çæ¬ï¼</p>
<p>ð <a href="https://github.com/YishenTu/claudian/releases/latest" target="_blank" rel="noopener nofollow">https://github.com/YishenTu/claudian/releases/latest</a></p>
<p>éè¦ä»¥ä¸ä¸ä¸ªæä»¶ï¼</p>
<ul>
<li><code>main.js</code></li>
<li><code>manifest.json</code></li>
<li><code>styles.css</code></li>
</ul>
<hr>
<h2 id="2ï¸â£-åå»ºæä»¶ç®å½">2ï¸â£ åå»ºæä»¶ç®å½</h2>
<p>å¨ä½ ç Obsidian Vault ä¸­ï¼åå»ºæä»¶ç®å½ï¼</p>
<pre><code class="language-text">/path/to/vault/.obsidian/plugins/claudian/
</code></pre>
<hr>
<h2 id="3ï¸â£-æ·è´æä»¶">3ï¸â£ æ·è´æä»¶</h2>
<p>å°ä¸è½½çä¸ä¸ªæä»¶å¤å¶å° <code>claudian</code> æä»¶å¤¹ä¸­ã</p>
<hr>
<h2 id="4ï¸â£-å¨-obsidian-ä¸­å¯ç¨æä»¶">4ï¸â£ å¨ Obsidian ä¸­å¯ç¨æä»¶</h2>
<p>è·¯å¾å¦ä¸ï¼</p>
<ul>
<li><strong>è®¾ç½® â ç¤¾åºæä»¶</strong></li>
<li>å¯ç¨ <strong>Claudian</strong></li>
</ul>
<p><img alt="PixPin_2026-02-01_18-40-08.png" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3715916/202602/3715916-20260205091302192-1720110956.png" class="lazyload"></p>
<hr>
<h1 id="å¯ç¨-claudian-æä»¶">å¯ç¨ Claudian æä»¶</h1>
<p>å¦ææä»¶æ²¡æç«å»æ¾ç¤ºï¼å¯ä»¥ï¼</p>
<ul>
<li>è®¾ç½® â ç¬¬ä¸æ¹æä»¶</li>
<li>ç¹å» <strong>å·æ°</strong></li>
<li>å¯ç¨ <strong>Claudian</strong></li>
</ul>
<p><img alt="PixPin_2026-02-01_18-41-08.png" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3715916/202602/3715916-20260205091302203-714426681.png" class="lazyload"></p>
<hr>
<h1 id="éç½®-claude--æ¨¡åç¯å¢">éç½® Claude / æ¨¡åç¯å¢</h1>
<p>è¿å¥æä»¶è®¾ç½®ï¼</p>
<p><strong>è®¾ç½® â Claudian â Environmentï¼ç¯å¢ï¼</strong></p>
<p>è¿éå¯ä»¥éç½® Claude APIï¼ä¹å¯ä»¥éç½®ä½ å¨åæä¸­ä½¿ç¨è¿ç <strong>æºè°± BigModelï¼GLMï¼</strong>ã</p>
<p>ç¤ºä¾éç½®å¦ä¸ï¼</p>
<pre><code class="language-conf">ANTHROPIC_API_KEY=your api key
ANTHROPIC_BASE_URL=https://open.bigmodel.cn/api/anthropic
ANTHROPIC_MODEL=glm-4.7
</code></pre>
<p><img alt="PixPin_2026-02-01_19-14-11.png" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3715916/202602/3715916-20260205091302201-1697145927.png" class="lazyload"></p>
<blockquote>
<p>ð¡ Claudian çä¼å¿ä¹ä¸å°±å¨äºï¼<br>
<strong>å®ä¸éå®å®æ¹ Claudeï¼åªè¦å¼å®¹ Anthropic API å³å¯ã</strong></p>
</blockquote>
<hr>
<h1 id="å¨-obsidian-ä¸­ä½¿ç¨-claude">å¨ Obsidian ä¸­ä½¿ç¨ Claude</h1>
<p>å®æéç½®åï¼å°±å¯ä»¥æ­£å¼å¼å§ä½¿ç¨äºã</p>
<h2 id="åºç¡ä½¿ç¨æ¹å¼">åºç¡ä½¿ç¨æ¹å¼</h2>
<ol>
<li>ç¹å» Obsidian å·¦ä¾§åè½åºç ð¤ æºå¨äººå¾æ <br>
æä½¿ç¨ <strong>å½ä»¤é¢æ¿</strong> æå¼ Claude èå¤©çªå£</li>
<li>å¨ç¬è®°ä¸­ <strong>éä¸­ä¸æ®µææ¬</strong></li>
<li>ä½¿ç¨å¿«æ·é®ï¼è®© Claude <strong>ç´æ¥è¿è¡åèç¼è¾</strong></li>
</ol>
<p><img alt="PixPin_2026-02-01_19-18-15.png" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3715916/202602/3715916-20260205091302826-394611229.png" class="lazyload"></p>
<p>è¿ä¸æ­¥çä½éªéå¸¸å³é®ï¼</p>
<blockquote>
<p><strong>AI ä¸åæ¯âç»ä½ å»ºè®®âï¼èæ¯âç´æ¥å¸®ä½ æ¹ææ¡£âã</strong></p>
</blockquote>
<hr>
<h1 id="skillsè®©-claude-çæ­£ä¼å¹²æ´»">Skillsï¼è®© Claude çæ­£âä¼å¹²æ´»â</h1>
<p>Claudian æå¤§çäº®ç¹ä¹ä¸ï¼å°±æ¯ <strong>å®æ´æ¯æ Claude Code ç Skills</strong>ã</p>
<p>å¨è¾å¥æ¡ä¸­è¾å¥ <code>/</code>ï¼å³å¯å¼¹åºï¼</p>
<ul>
<li>å¯ç¨å½ä»¤</li>
<li>å·²æ³¨åç Skills</li>
</ul>
<p><img alt="PixPin_2026-02-01_19-28-15.png" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3715916/202602/3715916-20260205091302594-355521198.png" class="lazyload"></p>
<p>è¿æå³çä»ä¹ï¼</p>
<p>ä½ å¯ä»¥å¨ Obsidian éç´æ¥è®© Claudeï¼</p>
<ul>
<li>éæä¸ç¯ææ¯æç« </li>
<li>æè§£å¤ææ¦å¿µ</li>
<li>çæå¤§çº² / TODO / ç¥è¯å¡ç</li>
<li>ç»ä¸ææ¡£é£æ ¼</li>
<li>æâé¶æ£ç¬è®°âæ´çæâç³»ç»ç¥è¯â</li>
</ul>
<p><strong>è¿å·²ç»ä¸æ¯ç®åç AI è¾å©åä½ï¼èæ¯ AI åä½ç¼è¾ã</strong></p>
<hr>
<h1 id="åå¨æå">åå¨æå</h1>
<p>å¦æè¯´ï¼</p>
<ul>
<li><strong>Obsidian</strong> è§£å³çæ¯ã<strong>ç¥è¯å¦ä½å­å¨ä¸è¿æ¥</strong>ã</li>
<li>é£ä¹ <strong>Claude Code + Skills</strong> è§£å³çå°±æ¯ã<strong>ç¥è¯å¦ä½è¢«æç»­å å·¥ä¸è¿å</strong>ã</li>
</ul>
<p>è <strong>Claudian æä»¶</strong>ï¼æ­£å¥½æè¿ä¸¤ä»¶äºæ ç¼è¿æ¥å¨ä¸èµ·ã</p>
<blockquote>
<p>ä»æ­¤ä½ ç Obsidian ä¸åªæ¯ç¬è®°åºï¼èæ¯ä¸ä¸ª<br>
<strong>å¯ä»¥è¢« AI åä¸æèãä¸æ­æ¼åçä¸ªäººç¥è¯ç³»ç»ã</strong></p>
</blockquote>
<p>å¦æä½ è§å¾è¿ç¯æç« æå¸®å©ï¼æ¬¢è¿ <strong>ç¹èµ / è½¬å / æ¶è</strong>ã<br>
æä»¬ä¸ç¯è§ã ð</p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-05 09:20">2026-02-05 09:19</span>&nbsp;
<a href="https://www.cnblogs.com/bugshare">BugShare</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19577439);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19577439', targetLink: 'https://www.cnblogs.com/bugshare/p/19577439', title: 'Obsidian &amp;#215; Claudian &amp;#215; Skillsï¼æé çæ­£ä¼âæèâçä¸ªäººç¥è¯åº' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ åºäº Starlight ææ¡£ç«ç¹æ¥å¥ Microsoft Clarity çå®æ´å®è·µæå ]]></title>
    <link>https://www.cnblogs.com/newbe36524/p/19577415</link>
    <guid>3f3d5df0706a9179808f2c04abe55b6d</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/newbe36524/p/19577415" title="åå¸äº 2026-02-05 09:13">
    <span role="heading" aria-level="2">åºäº Starlight ææ¡£ç«ç¹æ¥å¥ Microsoft Clarity çå®æ´å®è·µæå</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="ä»æ°æ®æ´å¯å°ç¨æ·å¢é¿hagicode-åå®¢æ¥å¥-clarity-analytics-çå®æ´æå">ä»æ°æ®æ´å¯å°ç¨æ·å¢é¿ï¼HagiCode åå®¢æ¥å¥ Clarity Analytics çå®æ´æå</h1>
<blockquote>
<p>æ¬æå°åäº«å¦ä½å¨ Starlight ææ¡£ç«ç¹ä¸­ä¼éå°æ¥å¥ Microsoft Clarityï¼ä¸ä»è½çæ¸ç¨æ·è¡ä¸ºï¼è¿è½ç¡®ä¿éç§åè§ãè¿å¥æ¹æ¡æ¯æä»¬å¨ HagiCode é¡¹ç®ä¸­å®è·µæ»ç»åºæ¥çï¼å¸æè½ç»åæ ·å¨æè¾æ°æ®ç»è®¡çä½ ä¸ç¹åèã</p>
</blockquote>

<h2 id="èæ¯ä¸ºä»ä¹æä»¬éè¦-clarity">èæ¯ï¼ä¸ºä»ä¹æä»¬éè¦ Clarityï¼</h2>
<p>ä»¥ä¸ä»£ç å±ç¤ºäºå¦ä½å¨ Astro éæä¸­æ ¹æ®ç¯å¢åéå¨ææ³¨å¥ Microsoft Clarity èæ¬ï¼ä»å¨çææ¶è¿è¡çäº§ç¯å¢å è½½ã</p>

<pre><code class="language-markdown">105 | interface Props {
106 |   // æªæ¥å¯æ©å±: åè®¸æå¨è¦ç Project ID
107 |   projectId?: string;
108 | }
109 | 
110 | const {
111 |   projectId = import.meta.env.CLARITY_PROJECT_ID,
112 | } = Astro.props;
113 | 
114 | const isProduction = import.meta.env.PROD;
115 | ---
116 | 
117 | {isProduction &amp;&amp; projectId &amp;&amp; (
118 |   &lt;script is:inline define:vars={{projectId}}&gt;
119 |     (function(c,l,a,r,i,t,y){
</code></pre>
<p><em>æä»¶ï¼<code>openspec/changes/archive/2026-01-30-microsoft-clarity-integration/design.md</code></em></p>
<p>å¨è¿è¥ <strong>HagiCode</strong> çè¿ç¨ä¸­ï¼æä»¬ä¸ç´é¢ä¸´ä¸ä¸ª"ç²ç"é®é¢ï¼æä»¬äº§åºåå®¹ï¼ä½ä¸æ¸æ¥ç¨æ·æ¯å¦ä½éè¯»çãè½ç¶ GitHub è½çå° Star æ°ï¼ä½è¿å¤ªæ»åäºãæä»¬éè¦ç¥éï¼</p>
<ul>
<li>ç¨æ·å°åºææ²¡æçå®æä»¬çæç¨ï¼</li>
<li>é£äºå¤æçéç½®ææ¡£ï¼æ¯å¨åªä¸æ­¥åéäºç¨æ·çï¼</li>
<li>æä»¬ç SEO ä¼åæ¯å¦ççå¸¦æ¥äºæææµéï¼</li>
</ul>
<p>å¸é¢ä¸æå¾å¤åæå·¥å·ï¼æ¯å¦ Google Analyticsï¼GAï¼å Microsoft ClarityãGA åè½å¼ºå¤§ä½éç½®å¤æï¼ä¸åå°éç§æ³è§ï¼å¦ GDPRï¼çä¸¥æ ¼éå¶ãè Clarity ä½ä¸ºå¾®è½¯æ¨åºçåè´¹ç­åå¾å·¥å·ï¼ä¸ä»åè½ç´è§ï¼èä¸å¨éç§åè§ä¸ç¸å¯¹å®½æ¾ï¼éå¸¸éåææ¯ææ¡£ç«ç¹ã</p>
<p><strong>æä»¬çç®æ å¾æç¡®</strong>ï¼å¨ <strong>HagiCode</strong> çææ¡£ç«ç¹ä¸­æ ç¼éæ Clarityï¼æ¢è¦å¨ææé¡µé¢çæï¼åè¦ç»ç¨æ·çæ"éåº"çæå©ï¼éç§åè§ï¼ã</p>
<h2 id="å³äº-hagicode">å³äº HagiCode</h2>
<p>HagiCode ä¸»é¢åå§åé»è¾ï¼ä¼åè¯»åæ¬å°å­å¨ï¼åéè³ç³»ç»åå¥½ï¼é»è®¤æè²ã</p>

<pre><code class="language-markdown">67 | function getInitialTheme(): Theme {
68 |   // 1. æ£æ¥ localStorage
69 |   const stored = localStorage.getItem('hagicode-theme');
70 |   if (stored) return stored as Theme;
71 | 
72 |   // 2. æ£æµç³»ç»åå¥½
73 |   const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
74 |   if (systemDark) return 'dark';
75 | 
76 |   // 3. é»è®¤æè²
77 |   return 'dark';
78 | }
79 | ```
80 | 
81 | ### å³ç­ 3ï¼ä¸»é¢åºç¨æ¹å¼
82 | 
83 | **éæ©**ï¼å¨ `&lt;html&gt;` æ ¹åç´ è®¾ç½® `data-theme` å±æ§
84 | 
85 | **å¯¹æ¯æ¹æ¡**ï¼
86 | 
</code></pre>
<p><em>æä»¶ï¼<code>openspec/changes/archive/2026-01-29-theme-toggle-implementation/design.md</code></em></p>
<p>æ¬æåäº«çæ¹æ¡æ¥èªæä»¬å¨ <a href="https://github.com/HagiCode-org/site" target="_blank" rel="noopener nofollow">HagiCode</a> é¡¹ç®ä¸­çå®è·µç»éªãHagiCode æ¯ä¸ä¸ªåºäº AI çä»£ç è¾å©å·¥å·ï¼å¨å¼åè¿ç¨ä¸­ï¼æä»¬éè¦ç»´æ¤å¤§éçææ¯ææ¡£ååå®¢ãä¸ºäºæ´å¥½å°çè§£ç¨æ·éæ±ï¼æä»¬æ¢ç´¢å¹¶å®æ½äºè¿å¥æ°æ®æ¥å¥æ¹æ¡ã</p>
<h2 id="ææ¯éåä¸æ¢ç´¢">ææ¯éåä¸æ¢ç´¢</h2>
<p>èµ·åï¼æä»¬å¨ Proposal é¶æ®µè®¨è®ºäºå¤ç§éææ¹å¼ãæ¢ç¶æä»¬ä½¿ç¨çæ¯ Starlightï¼åºäº Astro çææ¡£æ¡æ¶ï¼ï¼æç´è§çæ³æ³æ¯å©ç¨ Astro ç Hooksã</p>
<p>æä»¬é¦åå°è¯äºä¿®æ¹ <code>astro.config.mjs</code>ï¼è®¡åå¨æå»ºæ¶æ³¨å¥ Clarity èæ¬ãè½ç¶è¿ç§æ¹å¼è½ä¿è¯å¨å±è¦çï¼ä½ç¼ºä¹çµæ´»æ§ââæä»¬æ æ³æ ¹æ®ç¨æ·çåå¥½å¨æå è½½æå¸è½½èæ¬ã</p>
<p>èèå°ç¨æ·ä½éªåéç§æ§å¶ï¼æä»¬æç»å³å®éç¨ <strong>ç»ä»¶è¦ç</strong> çæ¹æ¡ãStarlight åè®¸å¼åèè¦çå¶åé¨ç»ä»¶ï¼è¿æå³çæä»¬å¯ä»¥æ¥ç®¡ <code>&lt;footer&gt;</code> æ <code>&lt;head&gt;</code> çæ¸²æé»è¾ï¼ä»èç²¾ç»æ§å¶ Clarity çå è½½æ¶æºã</p>
<p>è¿éæä¸ä¸ªå°ææ²ï¼åæ¬æä»¬æ³åå»ºä¸ä¸ªåä¸º <code>StarlightWrapper.astro</code> çå¸å±åè£å¨ãä½å¨å®éè°è¯ä¸­åç°ï¼Starlight çè·¯ç±æºå¶å¹¶ä¸ä¼èªå¨è°ç¨è¿ä¸ªèªå®ä¹ Wrapperï¼è¿å¯¼è´èæ¬å¨é¨åé¡µé¢å¤±æãè¿ç®æ¯ä¸ä¸ªå¸åç"æ³å½ç¶"è¸©åç»åï¼æéæä»¬<strong>å¿é¡»æ·±å¥çè§£æ¡æ¶çæ¸²ææµç¨ï¼èä¸æ¯ç²ç®å¥ç¨éç¨æ¡æ¶æ¨¡å¼</strong>ã</p>
<h2 id="æ ¸å¿æ¹æ¡footer-ç»ä»¶è¦ç">æ ¸å¿æ¹æ¡ï¼Footer ç»ä»¶è¦ç</h2>
<p>ä¸ºäºç¡®ä¿ Clarity èæ¬å¨ææé¡µé¢ï¼åæ¬ææ¡£ååå®¢ï¼å è½½ï¼å¹¶ä¸ä¸ç ´ååæçé¡µé¢ç»æï¼æä»¬éæ©äºè¦ç Starlight ç <code>Footer</code> ç»ä»¶ã</p>
<h3 id="ä¸ºä»ä¹æ¯-footer">ä¸ºä»ä¹æ¯ Footerï¼</h3>
<ol>
<li><strong>å¨å±æ§</strong>ï¼Footer å ä¹å¨æææ åé¡µé¢é½ä¼åºç°ã</li>
<li><strong>éä¾µå¥æ§</strong>ï¼å°èæ¬æ¾å¨ Footer åºåï¼å®éæ¸²æå¨ body åºé¨ï¼ä¸ä¼é»å¡é¡µé¢çå³é®æ¸²æè·¯å¾ï¼LCPï¼ï¼å¯¹æ§è½å½±åæå°ã</li>
<li><strong>é»è¾éä¸­</strong>ï¼å¯ä»¥å¨ç»ä»¶åé¨ç»ä¸å¤ç Cookie åæé»è¾ã</li>
</ol>
<h3 id="å®æ½æ­¥éª¤">å®æ½æ­¥éª¤</h3>
<h4 id="1-åå¤-clarity-é¡¹ç®">1. åå¤ Clarity é¡¹ç®</h4>
<p>é¦åï¼ä½ éè¦å¨ <a href="https://clarity.microsoft.com/" target="_blank" rel="noopener nofollow">Microsoft Clarity</a> æ³¨åå¹¶åå»ºä¸ä¸ªæ°é¡¹ç®ãè·åä½ ç Project IDï¼ç±»ä¼¼ <code>k8z2ab3xxx</code> è¿æ ·çå­ç¬¦ä¸²ï¼ã</p>
<h4 id="2-ç¯å¢åééç½®">2. ç¯å¢åééç½®</h4>
<p>ä¸é¢éè¿ç¯å¢åééç½®ä¸æ¥æå¤æ­ä»£ç ï¼å®ç°æ°å¹´æé´çé»è¾æ§å¶ï¼è¯·åèå·ä½å®ç°ã</p>

<pre><code class="language-text">46 |         function isLunarNewYearPeriod() {
47 |           const now = new Date();
48 |           const year = now.getFullYear();
49 |           const month = now.getMonth() + 1; // 1-12
50 |           const day = now.getDate();
51 | 
52 |           // 2025å¹´èå¹´æ°å¹´æé´ (1æ29æ¥ - 2æ12æ¥)
53 |           if (year === 2025) {
54 |             if (month === 1 &amp;&amp; day &gt;= 29) return true;
55 |             if (month === 2 &amp;&amp; day &lt;= 12) return true;
56 |           }
57 |           // 2026å¹´é©¬å¹´æ°å¹´æé´ (2æ17æ¥ - 3æ3æ¥)
58 |           if (year === 2026) {
59 |             if (month === 2 &amp;&amp; day &gt;= 17) return true;
60 |             if (month === 3 &amp;&amp; day &lt;= 3) return true;
61 |           }
62 |           return false;
63 |         }
64 | 
65 |         const stored = localStorage.getItem('starlight-theme');
</code></pre>
<p><em>æä»¶ï¼<code>src/pages/index.astro</code></em></p>
<p>ä¸ºäºå®å¨èµ·è§ï¼ä¸è¦ç¡¬ç¼ç  IDãå»ºè®®å° ID å­å¥ç¯å¢åéã</p>
<p>å¨é¡¹ç®æ ¹ç®å½åå»º <code>.env</code> æä»¶ï¼</p>
<pre><code class="language-bash"># Microsoft Clarity ID
PUBLIC_CLARITY_ID="ä½ ç_Clarity_ID"
</code></pre>
<h4 id="3-åå»ºè¦çç»ä»¶">3. åå»ºè¦çç»ä»¶</h4>
<p>ä»¥ä¸æ¯çå¬ç³»ç»ä¸»é¢ååçå®ç°ä»£ç ï¼å±ç¤ºäºå¦ä½ä»å¨æªæå¨è®¾ç½®æ¶è·éç³»ç»åæ¢ä¸»é¢ã</p>

<pre><code class="language-markdown">445 |     const handleChange = (e: MediaQueryListEvent) =&gt; {
446 |       // ä»å¨ç¨æ·æªæå¨è®¾ç½®æ¶è·éç³»ç»
447 |       if (!localStorage.getItem(THEME_KEY)) {
448 |         setThemeState(e.matches ? 'dark' : 'light');
449 |       }
450 |     };
451 | 
452 |     mediaQuery.addEventListener('change', handleChange);
453 |     return () =&gt; mediaQuery.removeEventListener('change', handleChange);
454 |   }, []);
455 | 
456 |   return { theme, toggleTheme, setTheme: manuallySetTheme };
457 | }
458 | ```
459 | 
460 | #### 3. `src/components/ThemeButton.tsx` - æé®ç»ä»¶
461 | 
462 | **èè´£**ï¼æ¸²æä¸»é¢åæ¢æé®ï¼å¤çç¨æ·äº¤äº
463 | 
464 | **ç»ä»¶æ¥å£**ï¼
</code></pre>
<p><em>æä»¶ï¼<code>openspec/changes/archive/2026-01-29-theme-toggle-implementation/design.md</code></em></p>
<p>å¨ <code>src/components/</code> ç®å½ä¸åå»ºæä»¶ <code>StarlightFooter.astro</code>ãStarlight ä¼èªå¨è¯å«è¿ä¸ªæä»¶å¹¶è¦çé»è®¤ç Footerã</p>
<p>æ ¸å¿ä»£ç é»è¾å¦ä¸ï¼</p>
<pre><code class="language-astro">---
// src/components/StarlightFooter.astro
// 1. å¼å¥åå§ç»ä»¶ä»¥ä¿çå¶é»è®¤åè½
import DefaultFooter from '@astrojs/starlight/components/StarlightFooter.astro';

// 2. è·åç¯å¢åé
const clarityId = import.meta.env.PUBLIC_CLARITY_ID;

// 3. å®ä¹ç®åçæ³¨å¥èæ¬ï¼åèæ¹å¼ï¼
// æ³¨æï¼çäº§ç¯å¢å»ºè®®å°æ­¤é»è¾æ½ç¦»å°åç¬ç .js æä»¶ä¸­ä»¥å©ç¨ç¼å­
const initScript = `
(function(c,l,a,r,i,t,y){
    c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
    t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
    y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
})(window, document, "clarity", "script", "${clarityId}");
`;
---

&lt;DefaultFooter {...Astro.props} /&gt;

{/* ä»å¨çäº§ç¯å¢ä¸ ID å­å¨æ¶æ³¨å¥èæ¬ */}
{import.meta.env.PROD &amp;&amp; clarityId &amp;&amp; (
  &lt;script is:inline define:vars={{ clarityId }}&gt;
    {initScript}
  &lt;/script&gt;
)}
</code></pre>
<p><strong>å³é®ç¹è§£æ</strong>ï¼</p>
<ul>
<li><code>is:inline</code>ï¼åè¯ Astro ä¸è¦å¤çè¿ä¸ª script æ ç­¾åçåå®¹ï¼ç´æ¥è¾åºå° HTMLãè¿å¯¹ç¬¬ä¸æ¹ç»è®¡èæ¬è³å³éè¦ï¼å¦å Astro çæåä¼åå¯è½ä¼å¯¼è´èæ¬å¤±æã</li>
<li><code>define:vars</code>ï¼è¿æ¯ Astro 3+ çç¹æ§ï¼åè®¸å¨ä½ç¨ååå®å¨å°æ³¨å¥åéã</li>
<li><code>import.meta.env.PROD</code>ï¼ç¡®ä¿å¨æ¬å°å¼åæ¶ï¼é¤éä¸ºäºè°è¯ï¼ä¸äº§çæ æç»è®¡ï¼ä¿ææ°æ®çº¯åã</li>
</ul>
<h3 id="è¿é¶éç§åè§ä¸-cookie-æ§å¶">è¿é¶ï¼éç§åè§ä¸ Cookie æ§å¶</h3>
<p>ä»ä»å ä¸ä»£ç æ¯ä¸å¤çï¼ç¹å«æ¯å¨ GDPR ç®¡è¾åºåãæä»¬éè¦å°éç¨æ·çéæ©ã</p>
<p>HagiCode çåæ³æ¯æä¾ä¸ä¸ªç®åçå¼å³ãè½ç¶è¿ä¸æ¯å¨åè½ç Cookie Bannerï¼ä½å¯¹äºçº¯å±ç¤ºçææ¯ææ¡£ç«ç¹æ¥è¯´ï¼éå¸¸å±äº"å¿è¦"æ"ç»è®¡"ç±» Cookieï¼å¯ä»¥éè¿éç§å£°æåç¥å¹¶é»è®¤å¼å¯ï¼æèå¨ Footer é¾æ¥å°éç§è®¾ç½®é¡µé¢ã</p>
<p>å¦æéè¦æ´ä¸¥è°¨çæ§å¶ï¼ä½ å¯ä»¥ç»å <code>localStorage</code> æ¥è®°å½ç¨æ·çéæ©ï¼</p>
<p>æ¬æå°ä»ç»ç¨äºä¸»é¢åæ¢ä¸æä¹åç TypeScript å·¥å·å½æ°ï¼éè¿ç±»åå®å¨ä¸ç¯å¢æ£æµå®ç°ä¸¥è°¨æ§å¶ã</p>

<pre><code class="language-markdown">367 | export function getInitialTheme(): Theme;
368 | export function getSystemTheme(): Theme;
369 | export function setTheme(theme: Theme): void;
370 | export function applyTheme(theme: Theme): void;
371 | ```
372 | 
373 | **è®¾è®¡åå**ï¼
374 | - **çº¯å½æ°**ï¼æ å¯ä½ç¨ï¼é¤äº `setTheme` å `applyTheme`ï¼
375 | - **ç±»åå®å¨**ï¼å®æ´ç TypeScript ç±»åæ¨å¯¼
376 | - **ç¯å¢æ£æµ**ï¼SSR å®å¨ï¼`typeof window` æ£æ¥ï¼
377 | - **åä¸èè´£**ï¼æ¯ä¸ªå½æ°åªåä¸ä»¶äº
378 | 
379 | **å³é®å®ç°**ï¼
380 | ```typescript
381 | export function getInitialTheme(): Theme {
382 |   if (typeof window === 'undefined') return 'dark';
383 | 
384 |   const stored = localStorage.getItem(THEME_KEY);
385 |   if (stored === 'light' || stored === 'dark') return stored;
386 | 
</code></pre>
<p><em>æä»¶ï¼<code>openspec/changes/archive/2026-01-29-theme-toggle-implementation/design.md</code></em></p>
<pre><code class="language-javascript">// ç®åç¤ºä¾ï¼æ£æ¥ç¨æ·æ¯å¦æç»ç»è®¡
const consent = localStorage.getItem('clarity_consent');
if (consent !== 'denied') {
    // æ§è¡ä¸é¢ç Clarity åå§åä»£ç 
    window.clarity('start', clarityId);
}
</code></pre>
<h2 id="ç»éªæ»ç»ä¸åç¹">ç»éªæ»ç»ä¸åç¹</h2>
<p>å¨å°è¿å¥æ¹æ¡è½å°å° HagiCode çè¿ç¨ä¸­ï¼æä»¬æ»ç»äºå ä¸ªå®¹æè¢«å¿½è§çç»èï¼</p>
<ol>
<li>
<p><strong><code>StarlightWrapper.astro</code> æ¯ä¸ªé·é±</strong>ï¼<br>
å¦åæè¿°ï¼ä¸è¦è¯å¾å»åå»ºä¸ä¸ªå¨å± Wrapper æ¥æ³¨å¥èæ¬ï¼è¿å¨ Starlight ä¸­è¡ä¸éãèèå®å®è¦çç¹å®ç»ä»¶ï¼å¦ <code>StarlightFooter.astro</code> æ <code>StarlightHead.astro</code>ï¼ææ¯æ­£è§£ã</p>
</li>
<li>
<p><strong>èæ¬ä½ç½®çæ§è½èé</strong>ï¼<br>
è½ç¶ Clarity å»ºè®®æ¾å¨ <code>&lt;head&gt;</code> ä¸­ä»¥ç¡®ä¿æ°æ®åç¡®æ§ï¼ä½å¯¹äºææ¡£ç«ç¹ï¼é¦å±å è½½éåº¦ï¼LCPï¼ç´æ¥å½±åäº SEO åç¨æ·çå­ãæä»¬éæ©äºæ¾å¨ Footerï¼Body åºé¨ï¼ï¼è¿ä¼è½»å¾®ä¸¢å¤±æå°é"ç§é"ç¨æ·çæ°æ®ï¼ä½æ¢æ¥äºæ´å¿«çé¡µé¢å è½½ä½éªï¼è¿æ¯ä¸ä¸ªå¼å¾çæè¡¡ã</p>
</li>
<li>
<p><strong>å¼åç¯å¢çå¹²æ°</strong>ï¼<br>
ä¸å®è¦å ä¸ <code>import.meta.env.PROD</code> å¤æ­ãå¨å¼åæ¨¡å¼ä¸ï¼ä½ ä¼é¢ç¹å·æ°é¡µé¢ï¼è¿ä¼äº§çå¤§éæ æä¹çæµè¯æ°æ®ï¼æ±¡æä½ ç Clarity ä»ªè¡¨çã</p>
</li>
</ol>
<h2 id="ææéªè¯">ææéªè¯</h2>
<p>é¨ç½²å®æåï¼ä½ å¯ä»¥å¨ Clarity æ§å¶å°æ¥çå®æ¶æ°æ®ãéå¸¸å¨å åéåï¼ä½ å°±è½çå°ç¨æ·çheatmapï¼ç­åå¾ï¼å recordingsï¼å½å±ï¼ã</p>
<p>å¯¹äº HagiCode æ¥è¯´ï¼éè¿è¿äºæ°æ®æä»¬åç°ï¼</p>
<ul>
<li>å¾å¤ç¨æ·ä¼åå¤æ¥ç"å¿«éå¼å§"ç« èï¼è¯´ææä»¬çå®è£æå¼å¯è½è¿ä¸å¤ç´è§ã</li>
<li>"API åè"é¡µé¢çåçæ¶é´æé¿ï¼è¯å®äºæä»¬æ ¸å¿ç¨æ·ç¾¤ä½çéæ±ã</li>
</ul>
<h2 id="æ»ç»">æ»ç»</h2>
<p>æ¥å¥ Microsoft Clarity å¹¶ä¸éè¦å¤æçæå¡ç«¯æ¹é ï¼ä¹ä¸éè¦å¼å¥æ²éç SDKã</p>
<p>å©ç¨ Starlight çç»ä»¶è¦çæºå¶ï¼æä»¬ä»éè¿ä¸ä¸ªè½»éçº§ç <code>StarlightFooter.astro</code> ç»ä»¶ï¼å°±å®ç°äºå¨å±æ°æ®ç»è®¡ãè¿ç§"å¾®éæ"çæ¹å¼ï¼æ¢ä¿è¯äºä»£ç çæ´æ´ï¼åèµäºäºæä»¬æ´å¯ç¨æ·è¡ä¸ºçè½åã</p>
<p>å¦æä½ ä¹å¨è¿è¥ææ¯ç±»é¡¹ç®ï¼ç¹å«æ¯å <strong>HagiCode</strong> è¿æ ·éè¦ä¸æ­è¿­ä»£ææ¡£çé¡¹ç®ï¼å¼ºçå»ºè®®å°è¯æ¥å¥ Clarityãæ°æ®ä¼åè¯ä½ ï¼ç¨æ·çæ­£ççç¹å¨åªéã</p>
<h2 id="åèèµæ">åèèµæ</h2>
<ul>
<li><a href="https://github.com/HagiCode-org/site" target="_blank" rel="noopener nofollow">HagiCode GitHub ä»åº</a> - æ¥çæä»¬å¨å®éé¡¹ç®ä¸­çéç½®æä»¶</li>
<li><a href="https://learn.microsoft.com/en-us/clarity/" target="_blank" rel="noopener nofollow">Microsoft Clarity å®æ¹ææ¡£</a></li>
<li><a href="https://starlight.astro.build/guides/overriding-components/" target="_blank" rel="noopener nofollow">Starlight ç»ä»¶è¦çæå</a></li>
</ul>
<hr>
<p>æè°¢æ¨çéè¯»,å¦ææ¨è§å¾æ¬ææç¨,å¿«ç¹å»ä¸æ¹ç¹èµæé®ð,è®©æ´å¤çäººçå°æ¬æã</p>
<p>æ¬åå®¹éç¨äººå·¥æºè½è¾å©åä½,ç»æ¬äººå®¡æ ¸,ç¬¦åæ¬äººè§ç¹ä¸ç«åºã</p>
<ul>
<li><strong>æ¬æä½è:</strong> <a href="https://www.newbe.pro" target="_blank" rel="noopener nofollow">newbe36524</a></li>
<li><strong>æ¬æé¾æ¥:</strong> <a href="https://hagicode-org.github.io/site/blog/2026-02-04-starlight-docs-integration-microsoft-clarity/" target="_blank" rel="noopener nofollow">https://hagicode-org.github.io/site/blog/2026-02-04-starlight-docs-integration-microsoft-clarity/</a></li>
<li><strong>çæå£°æ:</strong> æ¬åå®¢æææç« é¤ç¹å«å£°æå¤,åéç¨ BY-NC-SA è®¸å¯åè®®ãè½¬è½½è¯·æ³¨æåºå¤!</li>
</ul>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-05 09:14">2026-02-05 09:13</span>&nbsp;
<a href="https://www.cnblogs.com/newbe36524">Newbe36524</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19577415);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19577415', targetLink: 'https://www.cnblogs.com/newbe36524/p/19577415', title: 'åºäº Starlight ææ¡£ç«ç¹æ¥å¥ Microsoft Clarity çå®æ´å®è·µæå' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ åºäºAi Coding,20å¤©å®æä¸ä¸ªåºäºå¤§æ¨¡åçå»å­¦åæç³»ç»ï¼Aiä½å¾åæå©æ ]]></title>
    <link>https://www.cnblogs.com/lsjwq/p/19577341</link>
    <guid>a488d7fb700f5157fb3547140cbd337b</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/lsjwq/p/19577341" title="åå¸äº 2026-02-05 08:52">
    <span role="heading" aria-level="2">åºäºAi Coding,20å¤©å®æä¸ä¸ªåºäºå¤§æ¨¡åçå»å­¦åæç³»ç»ï¼Aiä½å¾åæå©æ</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        ææ¯ä¸åé¿æä½¿ç¨C#å¼ååå°æå¡ä¸æ°æ®åºçå¼åèï¼å¨ç­ç­20å¤©åï¼ç¬ç«å®æä¸ä¸ªè·¨ååç«¯ãè´´åå»çå¥åº·åºæ¯åæçå®æ´ç³»ç»ï¼Aiä½å¾åæå©æï¼æ¯æªæ¾æ³è¿çãå¾çäºAI Codingå·¥å·çæ·±åº¦å®è·µä¸åºç¨åå»çé¢åå¤§æ¨¡åçåºç¨ï¼è®©æå¯¹AIæ¶ä»£çè½¯ä»¶å¼åæäºå¨æ°çè®¤ç¥ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>ç®å½</p>
<p><strong>1.Ai Copilot</strong><strong>å®è·µä¸åºç¨</strong>... 1</p>
<p><strong>2.Ai Coding</strong><strong>å¸¦æ¥çå¥½å¤ä¸ææ</strong>... 1</p>
<p><strong>2.1 </strong><strong>å¸¦æ¥çå¥½å¤</strong>... 2</p>
<p><strong>2.2 </strong><strong>é¢ä¸´çææ</strong>... 2</p>
<p><strong>3.Ai</strong><strong>ä½å¾åæå©æé¡¹ç®ä»ç»</strong>... 2</p>
<p><strong>3.1</strong><strong>ä¸å¡ä»ç»</strong>... 2</p>
<p><strong>3.2</strong><strong>ææ¯ä½ç³»</strong>... 7</p>
<p><strong>4.</strong><strong>æ»ç»</strong>... 8</p>
<hr>
<p style="text-align: center">&nbsp;<strong>åºäº</strong><strong>Ai Coding</strong><strong>ï¼</strong><strong>20</strong><strong>å¤©å®æä¸ä¸ªåºäºå¤§æ¨¡åçå»å­¦åæç³»ç»ï¼</strong><strong>Ai</strong><strong>ä½å¾åæå©æ</strong>&nbsp;</p>
<p><span style="font-size: 16px">ããææ¯ä¸åé¿æä½¿ç¨C#å¼ååå°æå¡ä¸æ°æ®åºçå¼åèï¼å¨ç­ç­20å¤©åï¼ç¬ç«å®æä¸ä¸ªè·¨ååç«¯ãè´´åå»çå¥åº·åºæ¯åæçå®æ´ç³»ç»ï¼<a href="https://www.aineuos.net/" rel="noopener nofollow">Aiä½å¾åæå©æ</a>ï¼æ¯æªæ¾æ³è¿çãå¾çäºAI Codingå·¥å·çæ·±åº¦å®è·µä¸åºç¨åå»çé¢åå¤§æ¨¡åçåºç¨ï¼è®©æå¯¹AIæ¶ä»£çè½¯ä»¶å¼åæäºå¨æ°çè®¤ç¥ã</span></p>
<p><span style="font-size: 16px"><img src="https://img2024.cnblogs.com/blog/279374/202602/279374-20260205085311503-166624795.jpg" alt="Snipaste_2026-02-04_14-30-34" loading="lazy"></span></p>
<p>&nbsp;</p>
<p><span style="font-size: 18px"><strong>1.Ai Copilot</strong><strong>å®è·µä¸åºç¨</strong></span></p>
<p><span style="font-size: 16px">ããå¨æ¬æ¬¡Aiä½å¾åæå©æçå¼åè¿ç¨ä¸­ï¼æå¨ç¨ä»¥VSCode+AI Copilotä¸ºæ ¸å¿å¼åå·¥å·ï¼åæèªå·±åäºä¸ä¸ªç®åçæ³æ³åéæ±ï¼ä½æ¯éæ±åæ´å¾å¤§ãAI Copilotå¨ç¨åä¸äºå¶ä»ç¯èï¼çé¢çæãä»£ç å¼åãååç«¯æµè¯ãåçåå»ºè®®ç­ï¼éè¦å¼åèä¸å·¥å·å½¢æé«æéåãæä¸ä¸ªå®è·µææï¼</span></p>
<p><span style="font-size: 16px"><strong>ããé¦åï¼</strong><strong>AI Copilot</strong><strong>çä»è´¹æ¨¡å¼æ§ä»·æ¯é«</strong>ï¼æåªæ¯ä¸ªäººä»è´¹çæ¬ï¼ä¸æ¯ä¸ä¸çæ¬ï¼ç¸è¾äºèè¯·ä¸ä¸çååç«¯å¼åäººåï¼ä»è´¹å·¥å·çææ¬å ä¹å¯ä»¥å¿½ç¥ä¸è®¡ï¼æ éæå¿æ²éææ¬ãæ¶é´åè°ç­é®é¢ï¼ä¸è¬å¹²å°æä¸10ç¹ï¼ææ¶åæ©ä¸5ç¹èµ·æ¥æ¥çå¹²ã</span></p>
<p><span style="font-size: 16px"><strong>ããå¶æ¬¡ï¼</strong><strong>AI Copilot</strong><strong>è½å¤å®ç°ååç«¯ä»£ç çååçæ</strong>ï¼å¤§å¹ç¼©ç­å¼åå¨æãä»¥å¾åç«¯ãåç«¯åå¼ç¼åä»£ç ï¼è±è´¹å¤§éæ¶é´ãæ¬æ¬¡å¼åä¸­ï¼æåªéæç¡®éæ±ï¼ä¾å¦âå¼åä¸ä¸ªå»å­¦å½±åä¸ä¼ æ¥å£ï¼å¯¹æ¥åç«¯PostgreSQLæ°æ®åºâãâå¼ååç«¯å½±åä¸ä¼ ç»ä»¶ï¼ééçµèç«¯åææºç«¯æµè§å¨âç­ï¼ï¼AI Copilotå°±è½çæå¯¹åºçåç«¯Flaskæ¥å£ä»£ç ãåç«¯Vueç»ä»¶ä»£ç ï¼çè³èªå¨çææ¥å£è°ç¨ç¤ºä¾åè°è¯ä»£ç ãå½ç¶ï¼è¿æå¶ä»ä»£ç æç¤ºãåçåå»ºè®®ç­æ¹é¢çä¼å¿ ã</span></p>
<p><span style="font-size: 16px"><strong>ããæåï¼</strong><strong>AI</strong><strong>çæä»£ç é»è¾éè¦å¼åèäº²èª</strong><strong>review</strong><strong>éªè¯</strong>ãAI Copilotè½ç¶è½å¿«éçæä»£ç ï¼ä½æ¯æ æ³å®å¨çè§£é¡¹ç®çæ´ä½æ¶æé»è¾åä¸å¡ç»èï¼å¶å°ä¼åºç°ä»£ç é»è¾ä¸ä¸¥è°¨ãåæ°ç¼ºå¤±ãå®å¨æ¼æ´ï¼ä¾å¦ç¨æ·è®¤è¯é»è¾ä¸å®åãæ¯ä»æ¥å£ç­¾åéè¯¯ï¼ç­é®é¢ãå æ­¤ï¼ç»åé¡¹ç®éæ±è°æ´é»è¾ãè¡¥åç»èãä¿®å¤æ¼æ´ç­ã</span></p>
<p><span style="font-size: 18px"><strong>2.Ai Coding</strong><strong>å¸¦æ¥çå¥½å¤ä¸ææ</strong></span></p>
<p><span style="font-size: 16px">ãã20å¤©çå¼ååç¨ï¼ä»å¨æ°çå»çåºæ¯éæ±ï¼å°å¯æ­£å¸¸è¿è¡çè·¨ç«¯ç³»ç»ï¼AI Codingç»æå¸¦æ¥çä¸ä»æ¯å¼åæççæåï¼æ´æå¯¹èä¸åå±ãå·¥ä½çæ´»æ¹å¼çæ·±å»å½±åã</span></p>
<p><span style="font-size: 18px"><strong>2.1 </strong><strong>å¸¦æ¥çå¥½å¤</strong></span></p>
<p><span style="font-size: 16px">ããï¼1ï¼<strong>å¤§å¹æåå¼åæçï¼éä½å°å¢ä½ä¸ä¸ªäººåä¸çé¨æ§</strong>ãæåæ¬åªæé¿C#åç«¯å¼åï¼å¯¹PythonãVueãTypeScriptç­ææ¯å¹¶ä¸çæï¼ä½æ¯åå©AI Codingï¼é¡ºå©å®ææ¥å£å¼åãåç«¯é¡µé¢ãè·¨ç«¯ééç­ï¼20å¤©å¼åå¨æï¼ç¸è¾äºä¼ ç»å¼åæ¨¡å¼å¤§å¹ç¼©åå¼åå¨æï¼å¨ç¨æ éä¾èµå¶ä»å¼åèï¼è®©ä¸ªäººåä¸çé¨æ§å¤§å¹éä½ã</span></p>
<p><span style="font-size: 16px">ããï¼2ï¼<strong>æ¹åå·¥ä½ä¸çæ´»çæ¨¡å¼ï¼è®©é¶ç¢æ¶é´åæ¥æ´å¤§ä»·å¼</strong>ãä»¥å¾å¼åä¸ä¸ªå®æ´çé¡¹ç®ï¼å¾å¾éè¦éä¸­å¤§éçæ´åæ¶é´ãè¿ç§å¼åæ¨¡å¼æ ééä¸­æ´åæ¶é´ï¼æ¢è½å¼é¡¾å¨èå·¥ä½ï¼åè½å©ç¨é¶ç¢æ¶é´åèªå·±åæ¬¢çäºæãä½æ¯ï¼å¨âé«æå©ç¨æ¶é´âçåæ¶ï¼ä¹ä¼ä¿ä½¿äººæ´å æåè¿«æï¼æä»¥éè¦ä¸ªäººæ¥è°èç¶æã</span></p>
<p><span style="font-size: 16px">ããï¼3ï¼<strong>æç ´ææ¯å£åï¼ä¸ºè·¨çå¼åæä¾äºæ´å¤§å¯è½</strong>ãè·¨çå¼åéè¦è±è´¹å¤§éæ¶é´å­¦ä¹ æ°çææ¯æ ï¼æåæ¬ä¸æ³¨äºC#åç«¯æå¡ä¸æ°æ®åºå¼åï¼ä½å¨æ¬æ¬¡é¡¹ç®å¼åä¸­ï¼ç­ç­20å¤©ï¼æç ´ææ¯è¾¹çï¼ä¸ä¸ªäººä½¿ç¨AI Codingå®æpythonãvueãæ°æ®åºãå¤§æ¨¡åç­æ´åã</span></p>
<p><span style="font-size: 18px"><strong>2.2 </strong><strong>é¢ä¸´çææ</strong></span></p>
<p><span style="font-size: 16px"><strong>ããï¼</strong><strong>1</strong><strong>ï¼æ®éå·¥ç¨å¸é¢ä¸´å¤±ä¸é£é©ï¼ææ¯é¨æ§éæ°å®ä¹</strong>ãAI Codingè½å¤å¿«éçæåºç¡ä»£ç ãå®æéå¤æ§å¼åå·¥ä½ï¼è¿å¯¹äºä»äºåºç¡ä»£ç ç¼åçæ®éå·¥ç¨å¸èè¨ï¼æªæ¥é¢ä¸´å¾å¤§å¤±ä¸é£é©ã</span></p>
<p><span style="font-size: 16px"><strong>ããï¼</strong><strong>2</strong><strong>ï¼è¡ä¸å¯¹åæ°ä¸è®¾è®¡äººæçéæ±å¤§å¹æå</strong>ãAI Codingè§£å³âæä¹åä»£ç âçé®é¢ï¼ä½æ æ³è§£å³âåä»ä¹ä»£ç ââä¸ºä»ä¹è¦è¿ä¹åâçé®é¢ï¼è¿æå³çï¼ä¸åæ¯ä¼åä»£ç å°±è½ç«è¶³ï¼æ´éè¦å·å¤éæ±æ¢³çãæ¶æè®¾è®¡ãäº§ååæ°è½åçäººã</span></p>
<p><span style="font-size: 16px"><strong>ããï¼</strong><strong>3</strong><strong>ï¼</strong><strong>AI Coding</strong><strong>å¹¶é</strong><strong>â</strong><strong>é¶é¨æ§</strong><strong>â</strong><strong>ï¼ä¸æç¼ç¨çäººé¾ä»¥ç¬ç«å®æå·¥ç¨é¡¹ç®</strong>ãAI Codingçæ ¸å¿ä»·å¼æ¯âè¾å©âï¼èéâæ¿ä»£âââå®éè¦å¼åèå·å¤åºæ¬çç¼ç¨ç¥è¯ãé»è¾æç»´è½åï¼è½å¤æç¡®éæ±ãæ¢³çé»è¾ãreviewä»£ç ç­ãAI Codingéä½äºè½¯ä»¶å¼åâææ¯é¨æ§âï¼ä½å¹¶æªæ¶é¤é¨æ§ï¼å®æ´éåæä¸å®ç¼ç¨åºç¡ãè½å¤ä¸AIé«æéåçå¼åèï¼èéå®å¨ä¸æç¼ç¨çâå°ç½âã</span></p>
<p><span style="font-size: 18px"><strong>3.Ai</strong><strong>ä½å¾åæå©æé¡¹ç®ä»ç»</strong></span></p>
<p><span style="font-size: 18px"><strong>3.1</strong><strong>ä¸å¡</strong><strong>ä»ç»</strong></span></p>
<p><span style="font-size: 16px">ããAiä½å¾åæå©æçå£å·ï¼â<strong>è®©å»çæ´æºæ§ï¼è®©å¥åº·æ´æ®æ </strong>âã</span></p>
<p><span style="font-size: 16px">ããAiä½å¾åæå©æä¾æåè¿çäººå·¥æºè½ä¸ä¸æ¨¡åï¼è½å¤ç²¾åè§£è¯»ååæåç±»å»å­¦å½±åä¸å¥åº·æ°æ®ï¼å¨é¢è¦çæ®éå¤§ä¼çåºç¡å¥åº·ç­æ¥éæ±ã</span></p>
<p><span style="font-size: 16px"><strong>ãã- **</strong><strong>å»å­¦å½±å</strong><strong>**</strong><strong>ï¼</strong><strong>CT</strong><strong>æ«æãæ ¸ç£å±æ¯</strong><strong>(MRI)</strong><strong>å½±åãç»ç»ççæåç­</strong></span></p>
<p><span style="font-size: 16px"><strong>ãã- **</strong><strong>ä¸´åºå½±å</strong><strong>**</strong><strong>ï¼è¸é¨</strong><strong>X</strong><strong>åçãç®è¤ç§å¾åãç¼ç§å¾åç­</strong></span></p>
<p><span style="font-size: 16px"><strong>ãã- **</strong><strong>å»çæ°æ®</strong><strong>**</strong><strong>ï¼å»çè¯æ­çåãçµå­å¥åº·è®°å½</strong><strong>(EHR)</strong><strong>ãè§£åç¹å¾æ°æ®</strong></span></p>
<p><span style="font-size: 16px">ããåå°äººå·¥æºè½å»å­¦æ¨¡åï¼å·²ç»å¨å¤é¡¹ä¸´åºç¸å³åºåè¯ä¼°ä¸­å±ç°åºç¨³å®ãå¯é çåºç¡æ§è½ï¼è½å¤ä¸ºåæç»ææä¾æåçææ¯ä¿éï¼ç¡®ä¿åæå»ºè®®çç§å­¦æ§ãåèæ§ã</span></p>
<p><span style="font-size: 16px">ããAiä½å¾åæå©ææ<strong>åå¤§æ ¸å¿ä¼å¿</strong>ï¼è½å¤åå®è§£å³å¤§å®¶å¨å¥åº·ç­æ¥ãå°±å»è¿ç¨ä¸­éå°ççç¹é®é¢ï¼</span></p>
<p><span style="font-size: 16px"><strong>ããï¼1ï¼å±å®¶ææ©ç­æ¥</strong>ï¼å¨å®¶å³å¯å®æåæ­¥å¥åº·ç­æ¥ï¼ä¸»å¨é¢é²ç¾çï¼å®æ¤æ®éå¤§ä¼çå¥åº·ã</span></p>
<p><span style="font-size: 16px"><strong>ããï¼2ï¼é«æä¾¿æ·</strong>ï¼å¿«éåæå½±åä¸çåï¼ç¼©ç­å°±å»ç­å¾æ¶é´ï¼ç¼è§£å°±å»ç¦èã</span></p>
<p><span style="font-size: 16px"><strong>ããï¼3ï¼æç ´å°ååèµæºå£å</strong>ï¼è®©ä¼è´¨å»çAIèµæºè·¨è¶å°åï¼ç¹å«æ¯è®©åè¿å°åºçæ®éå¤§ä¼ä¹è½äº«åå°ä¼è´¨çAIå»çæå¡ã</span></p>
<p><span style="font-size: 16px"><strong>ããï¼4ï¼ç»æµå®æ </strong>ï¼è¾å©åæéªè¯ä¿¡æ¯ï¼ææéä½å»çææ¬ï¼è®©æ®æ å»ççæ­£è½å°ã</span></p>
<p><span style="font-size: 16px">ããAiä½å¾åæå©æçæ ¸å¿ç®æ ï¼è®©äººå·¥æºè½èµ°è¿åå®¶ä¸æ·ï¼è®©æ®éå¤§ä¼å¨å®¶å°±è½å®æåæ­¥å¥åº·ç­æ¥ï¼ä¸ç¨åä¸ºäºç®åçå¥åº·å¨è¯¢å¥æ³¢å¾è¿å»é¢ï¼è½»æ¾å®ç°ç¾çæ©åç°ãæ©é¢é²ï¼å¤§å¤§æåå¤§å®¶ç¾çé¢é²çä¸»å¨æ§ã</span></p>
<p><span style="font-size: 16px">ããç¹å«æéå¤§å®¶ï¼<strong>AI</strong><strong>ä½å¾åæå©æä»ä¸ºäººå·¥æºè½æ¨¡ååæå¾åºçåèç»æï¼ä¸è½æ¿ä»£æ­£è§å»é¢çä¸ä¸è¯æ­ï¼è¥æå¥åº·çèï¼è¯·å¡å¿å¨è¯¢ä¸ä¸å»çæºæåå»ç</strong>ã</span></p>
<p><span style="font-size: 16px">ããï¼1ï¼&nbsp;&nbsp;&nbsp; <strong>çµèç«¯æµè§å¨åºç¨</strong>ï¼å»å­¦åæãåå²åæãéè¯·è®°å½ãèµå©è®°å½ãæç°è®°å½ãæçä¿¡æ¯ãéè¯·å¥½åç­ã</span></p>
<p><span style="font-size: 16px"><img src="https://img2024.cnblogs.com/blog/279374/202602/279374-20260205085043467-1636338170.jpg" alt="1" loading="lazy"></span></p>
<p><img src="https://img2024.cnblogs.com/blog/279374/202602/279374-20260205085055078-1972974666.jpg" alt="2" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/279374/202602/279374-20260205085101120-1634808551.jpg" alt="3" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/279374/202602/279374-20260205085109946-801721347.jpg" alt="4" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/279374/202602/279374-20260205085115893-1478473000.jpg" alt="5" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/279374/202602/279374-20260205085122155-1181622956.jpg" alt="6" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/279374/202602/279374-20260205085127663-613759521.jpg" alt="7" loading="lazy"></p>
<p><span style="font-size: 16px">ãã</span><span style="font-size: 16px">ï¼2ï¼&nbsp;&nbsp;&nbsp; </span><strong style="font-size: 16px">ææºç«¯æµè§å¨åºç¨</strong><span style="font-size: 16px">ï¼å»å­¦åæãåå²åæãéè¯·è®°å½ãèµå©è®°å½ãæç°è®°å½ãæçä¿¡æ¯ãéè¯·å¥½åç­ã</span></p>
<p><span style="font-size: 16px"><img src="https://img2024.cnblogs.com/blog/279374/202602/279374-20260205085141446-1921050907.png" alt="å¨é¨" loading="lazy"></span></p>
<p><strong style="font-size: 18px">3.2</strong><strong style="font-size: 18px">ææ¯ä½ç³»</strong></p>
<p>&nbsp;</p>
<p><span style="font-size: 16px"><strong>## åç«¯ææ¯æ </strong></span></p>
<p><span style="font-size: 16px">- **æ¡æ¶**ï¼Flask 3.x</span></p>
<p><span style="font-size: 16px">- **æ°æ®åº**ï¼PostgreSQL + SQLAlchemy ORM</span></p>
<p><span style="font-size: 16px">- **é´æ**ï¼JWT Token</span></p>
<p><span style="font-size: 16px">- **æ¯ä»**ï¼å¾®ä¿¡æ¯ä» V3ï¼Native/JSAPIï¼</span></p>
<p><span style="font-size: 16px">- **ç­ä¿¡**ï¼é¿éäºç­ä¿¡</span></p>
<p><span style="font-size: 16px">- **æ¨¡å**ï¼PyTorch + Transformersï¼å»å­¦è¯æ­æ¨¡åï¼</span></p>
<p><span style="font-size: 16px">- **API**ï¼RESTful APIè®¾è®¡</span></p>
<p><span style="font-size: 16px"><strong>## åç«¯ææ¯æ </strong></span></p>
<p><span style="font-size: 16px">- **æ¡æ¶**ï¼Vue 3 + TypeScript</span></p>
<p><span style="font-size: 16px">- **æå»ºå·¥å·**ï¼Vite</span></p>
<p><span style="font-size: 16px">- **è·¯ç±**ï¼Vue Router</span></p>
<p><span style="font-size: 16px">- **æ ·å¼**ï¼Scoped CSS</span></p>
<p><span style="font-size: 16px">- **ææ¡£æ¸²æ**ï¼@kangc/v-md-editor / Marked</span></p>
<p><span style="font-size: 16px">- **å¯¼åº**ï¼HTML2Canvas + HTML2PDF</span></p>
<p><span style="font-size: 16px">- **å¶ä»**ï¼QRCode</span></p>
<p><span style="font-size: 16px"><strong>## æ ¸å¿æ¨¡å</strong></span></p>
<p><span style="font-size: 16px">| æ¨¡å | åè½ | è¯´æ |</span></p>
<p><span style="font-size: 16px">|------|------|------|</span></p>
<p><span style="font-size: 16px">| ç¨æ·è®¤è¯ | æ³¨åãç»å½ãä¿¡æ¯ç®¡ç | å®å¨çèº«ä»½éªè¯ |</span></p>
<p><span style="font-size: 16px">| å»å­¦è¯æ­ | å½±åä¸ä¼ ãåæãç»æå±ç¤º | AIè¯æ­æ ¸å¿æ¨¡å |</span></p>
<p><span style="font-size: 16px">| åæåå² | è®°å½æ¥è¯¢ãå é¤ãPDFä¸è½½ | å®æ´çæ°æ®ç®¡ç |</span></p>
<p><span style="font-size: 16px">| ä¸ªäººä¸­å¿ | ç¨æ·ä¿¡æ¯ä¿®æ¹ãå¯ç ä¿®æ¹ | ç¨æ·èªå©ç®¡ç |</span></p>
<p><span style="font-size: 16px">| æ¯ä»ä¸æç° | å¾®ä¿¡æ¯ä»ãæç°ãæ¯ä»è®°å½ãæç°è®°å½ | èµéç¸å³è½å |</span></p>
<p><span style="font-size: 16px">| éè¯·å¥½å | éè¯·ç çæãéè¯·è®°å½ | ç¨æ·å¢é¿ä¸å¥å± |</span></p>
<p><span style="font-size: 16px"><strong>## ä½¿ç¨è¯´æ</strong></span></p>
<p><span style="font-size: 16px">1. **æ³¨åç»å½** - åå»ºè´¦æ·æä½¿ç¨ç°æè´¦æ·ç»å½</span></p>
<p><span style="font-size: 16px">2. **æäº¤è¯æ­** - ä¸ä¼ å»å­¦å½±ååå¿è¦çå»å­¦æè¿°</span></p>
<p><span style="font-size: 16px">3. **ç­å¾åæ** - ç³»ç»è¿è¡AIåæï¼æ¾ç¤ºåæç¶æï¼</span></p>
<p><span style="font-size: 16px">4. **æ¥çç»æ** - æ¥çè¯¦ç»çåæç»æåå»ºè®®</span></p>
<p><span style="font-size: 16px">5. **ç®¡çè®°å½** - æ¥çåå²è®°å½ãä¸è½½æ¥åãå é¤æ°æ®</span></p>
<p><span style="font-size: 18px"><strong>4.</strong><strong>æ»ç»</strong></span></p>
<p><span style="font-size: 16px">ããä»éæ±æ¢³çå°ä»£ç è½å°ï¼ä»åè½è°è¯å°æç»ä¸çº¿ï¼20å¤©çå¼ååç¨ï¼è¿æ¯ç¢³åºçå½+ç¡åºçå½çå®ç¾åä½ï¼è®©æå¯¹è½¯ä»¶å¼åçæªæ¥æäºå¨æ°çè®¤ç¥ãAIä¸ä¼æ¿ä»£å¼åèï¼ä½ä¼æ·æ±°ä¸æå¾å©ç¨AIãä¸æå¾æåèªå·±çå¼åèãè®©æä»¬å©ç¨AIææ¯åä¸äºæ´ææä¹çäºã</span></p>
<p><span style="font-size: 16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Github</strong>: <a href="https://github.com/wxzz/" rel="noopener nofollow">https://github.com/wxzz/</a>ã</span></p>
<p><span style="font-size: 16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>åå®¢</strong>ï¼<a href="https://www.cnblogs.com/lsjwq">https://www.cnblogs.com/lsjwq</a>ã</span></p>
<p><span style="font-size: 16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Ai</strong><strong>ä½å¾åæå©æè¯ç¨</strong>ï¼<a href="https://www.aineuos.net/" rel="noopener nofollow">https://www.aineuos.net/</a>ã</span></p>
<hr>
<p>ç©èç½&amp;å¤§æ°æ®ææ¯ QQç¾¤ï¼54256083</p>
<p>ç©èç½&amp;å¤§æ°æ®é¡¹ç® QQç¾¤ï¼727664080</p>
<p>QQï¼504547114</p>
<p><img src="https://img2024.cnblogs.com/blog/279374/202509/279374-20250924180005285-1427975355.png" alt="image" width="243" height="121" loading="lazy"></p>
<p>&nbsp;</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.0006944444444444445" data-date-updated="2026-02-05 08:53">2026-02-05 08:52</span>&nbsp;
<a href="https://www.cnblogs.com/lsjwq">iNeuOSå·¥ä¸äºèç½ç³»ç»</a>&nbsp;
éè¯»(<span id="post_view_count">66</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19577341);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19577341', targetLink: 'https://www.cnblogs.com/lsjwq/p/19577341', title: 'åºäºAi Coding,20å¤©å®æä¸ä¸ªåºäºå¤§æ¨¡åçå»å­¦åæç³»ç»ï¼Aiä½å¾åæå©æ' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ [å¼æºåäº«] ChatGPT æµè§å¨æçæä»¶ï¼å¯¹è¯å¯è§åä¸ºå¾è°±åæ¶é´çº¿ï¼å¿«éå®ä½æ¶æ¯ï¼ææ¡å¯¹è¯èç» ]]></title>
    <link>https://www.cnblogs.com/roberick/p/19577242</link>
    <guid>5c5772dab21493307dd67796a203b80b</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/roberick/p/19577242" title="åå¸äº 2026-02-05 08:28">
    <span role="heading" aria-level="2">[å¼æºåäº«] ChatGPT æµè§å¨æçæä»¶ï¼å¯¹è¯å¯è§åä¸ºå¾è°±åæ¶é´çº¿ï¼å¿«éå®ä½æ¶æ¯ï¼ææ¡å¯¹è¯èç»</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/2733976/202602/2733976-20260205082744246-958830395.png" alt="[å¼æºåäº«] ChatGPT æµè§å¨æçæä»¶ï¼å¯¹è¯å¯è§åä¸ºå¾è°±åæ¶é´çº¿ï¼å¿«éå®ä½æ¶æ¯ï¼ææ¡å¯¹è¯èç»" class="desc_img">
        å° ChatGPT è½¬åä¸ºå¯å¯¼èªçç¥è¯å¾è°±ãå©ç¨å¾è°±è§å¾å¯è§åå¤æåæ¯ï¼éè¿ Git é£æ ¼çæ¶é´çº¿æ ç®¡çåå²è®°å½ï¼å¹¶å°ä¸æ­å®ç°ä¸°å¯çå®ç¨åè½ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<div align="center">
<img alt="ChatGPT Graph" width="128" data-src="https://img2024.cnblogs.com/blog/2733976/202602/2733976-20260205081321317-1142290467.png" class="lazyload">
<h1>ChatGPT Graph Navigator</h1>
<table>
<tbody><tr>
<td align="center" width="200">
<img width="45" height="45" alt="Graph View Icon" data-src="https://img2024.cnblogs.com/blog/2733976/202602/2733976-20260205081441406-1351706513.svg" class="lazyload">
</td>
<td align="center" width="200">
<img width="45" height="45" alt="Timeline Tree Icon" data-src="https://img2024.cnblogs.com/blog/2733976/202602/2733976-20260205081457832-1471647656.svg" class="lazyload">
</td>
<td align="center" width="200">
<img width="45" height="45" alt="Workflow Utils Icon" data-src="https://img2024.cnblogs.com/blog/2733976/202602/2733976-20260205081509812-1725707133.svg" class="lazyload">
</td>
</tr>
<tr>
<td align="center">
<strong>å¾è°±è§å¾</strong>
</td>
<td align="center">
<strong>æ¶é´çº¿æ </strong>
</td>
<td align="center">
<strong>å®ç¨å·¥å·</strong>
</td>
</tr>
<tr>
<td align="center">
<sub>ç©ºé´å¯è§å<br>é»è¾å¨æ¯æ¦è§</sub>
</td>
<td align="center">
<sub>åæ¯å¿«éå¯¼èª<br>Git é£æ ¼åå²è®°å½</sub>
</td>
<td align="center">
<sub>æ¶æ¯æå <br>åæªæ¥æ´å¤åè½</sub>
</td>
</tr>
</tbody></table>
<h4>
â¨ å°èå¤©è®°å½è½¬åä¸ºäº¤äºå¼æ ç¶å¾ã<br>
ä¸ä¸º ChatGPT å¯¹è¯æé çé«ææç»´å¯¼å¾UIã
</h4></div>

<hr>
<div align="center">
ä»åºé¾æ¥ï¼<a href="https://github.com/Robbings/chatgpt-graph-navigator" target="_blank" style="display: inline-block; padding: 10px 20px; background-color: rgba(36, 41, 46, 1); color: rgba(255, 255, 255, 1); text-decoration: none; border-radius: 6px; font-weight: bold" rel="noopener nofollow"> https://github.com/Robbings/chatgpt-graph-navigator </a>
</div>
<hr>
<h2 id="ä¸ä¸ºä»ä¹æä»¬éè¦éçº¿æ§å¯¹è¯">ä¸ãä¸ºä»ä¹æä»¬éè¦éçº¿æ§å¯¹è¯ï¼</h2>
<p>ç¸æ¯äºGeminiï¼ChatGPTæ¯æéè¿ä¿®æ¹æé®æèåç­ï¼äº§çæ°çå¯¹è¯åæ¯ï¼å¹¶ä¸æ¯ä¸ä¸ªåæ¯é½å¯ä»¥è¢«ä¿å­åéæ°è®¿é®ã</p>
<p><img alt="intro1" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2733976/202602/2733976-20260205080844865-1573745973.png" class="lazyload"></p>
<p>æä¸ªäººéå¸¸åæ¬¢è¿ä¸ªåè½ãå ä¸º<strong>å¤æé®é¢çè§£å³åå«äºä¸æ­å°åè®¾ï¼è¯éååæ¯æ¢ç´¢</strong> ï¼èè¿ä¸ªåè½è®©å¤åæ¯çå¾è°±å¼å¯¹è¯æä¸ºå¯è½ã</p>
<p>ä¸¾ä¸ªæ å­ï¼æ¯å¦æç§ç æèå¼åä¸ä¸ªé¡¹ç®çæ¶åè®©GPTçææ¹æ¡ï¼å®ä¼æä¾å¤ä¸ªéæ©ï¼éå¯¹æ¯ä¸ä¸ªæ¹æ¡æéè¦å¹¶è¡å°è®¨è®ºï¼ç¶åç¡®è®¤å¦ä½éæ©ãå¦æçº¯çº¿æ§å¯¹è¯ï¼ä¸æ¹é¢åç»­å¾é¾å®ä½åå¤çï¼å¦ä¸æ¹é¢ï¼åè®¾ææç»éå®ä¸å¥æ¹æ¡ï¼å¶ä»æ¹æ¡çå¤§éå¯¹è¯å°±ä¼åææ ç¨çä¸ä¸æï¼å¹²æ°æ¨¡åæèååç»­çå¤çãèæ¹æ¡å¼å§å®æ½åæä¹ä¼éå°å¾å¤é®é¢éè¦å¤çï¼è¿äºé®é¢æäºå½¼æ­¤ç¸å³ï¼æäºå½¼æ­¤æ å³ï¼è¿æ¶æä¹ä¼ä½¿ç¨åæ¯åè½ï¼æ¯ä¸ªåæ¯è§£å³ä¸ä¸ªç¬ç«çé®é¢ã</p>
<p>æä»¥å¨è¿è¡å¤æå¯¹è¯çæ¶åï¼å¦æéç¨çº¿æ§å¯¹è¯ï¼ä¼æè¯¸å¤å¼ç«¯ï¼æ¯å¦ï¼</p>
<ul>
<li><strong>ð âä¸ä¸ææ±¡æâé®é¢ï¼</strong>  å½ä½ å¨åä¸ä¸ªå¯¹è¯æµä¸­æé¡ºåºå°è¯ä¸åæ¹æ¡æ¶ï¼æ å³çä¸ä¸æåå¤±è´¥çå°è¯ä¼ä¸æ­å ç§¯ãè¿ç§âåªé³âä¸ä»æ¶è Token éé¢ï¼è¿ä¼å¹²æ°æ¨¡åçæ³¨æåï¼ä½¿å¶é¾ä»¥éå¯¹ä½ å½åçç­ç¥æä¾æç²¾åçåæã</li>
<li><strong>ð âå¹¶è¡æ¢ç´¢âçåéï¼</strong>  ä¸ºäºè·åæä½³ç»æï¼ä½ å¾å¾éè¦å¯¹å¯¹è¯è¿è¡âååâââéè¿ä¿®æ¹ Prompt æéæ°çæåå¤æ¥æµè¯ä¸åçè·¯å¾ãå¨çº¿æ§çé¢ä¸­ï¼ç®¡çè¿äºâå¹³è¡å®å®âç®ç´æ¯ä¸åºç¾é¾ãä½ å¾å®¹æå¿è®°æè·¯æ¯å¨åªéåå²çï¼ä¹è®°ä¸æ¸åªä¸ªåæ¯äº§åºäºæä½³ç»æã</li>
<li><strong>ð§  é»è¾æ··ä¹±ï¼å®ä½å°é¾ï¼</strong>  è¯å¾å¨èæµ·ä¸­å¤ç 20 åéåç Prompt ä¸åååå¥½çæ°åä½ä¹é´çé»è¾å³ç³»ï¼æ¯ä¸ä»¶æåº¦æ¶èç²¾åçäºæã</li>
</ul>
<p><strong>ChatGPT Graph Navigator ä¸ä¸ºè§£å³æ­¤é®é¢èçã</strong>  æä»¬å°ä½ çåæ¯å¯è§åï¼å¸®å©ä½ <strong>éç¦»ä¸ä¸æ</strong>ä»¥è·åæ´çº¯åçæ¨¡åè¾åºï¼åæ¶è®©ä½ åæ¬å¤æçæ¨çç»æåå¾äºäºææ¡ã</p>
<h2 id="äºåè½ä»ç»">äºãåè½ä»ç»</h2>
<p><img alt="main_feature" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2733976/202602/2733976-20260205081023822-1690005422.png" class="lazyload"></p>
<h3 id="æ ¸å¿è½åä¸è§">æ ¸å¿è½åä¸è§ï¼</h3>
<ul>
<li><strong>ð¨ ä¸¤ç§çé¢ï¼</strong> éæ© <strong>ä¾§è¾¹æ  (Sidebar)</strong> äº«åå¸¸é©»çæ²æµ¸å¼å·¥ä½æµï¼æä½¿ç¨ <strong>æ¬æµ®çª (Floating Window)</strong> è¿è¡éå«éå°çè½»éåæ¥çã</li>
<li><strong>ðï¸ ä¸¤ä¸ªå¯è§åè§å¾ï¼</strong></li>
<li><strong>å¾è°±è§å¾ (Graph View)ï¼</strong> éç¨æç»´å¯¼å¾ç»æï¼å©ä½ ä¸ç¼ææ¡å¯¹è¯âå¨å±âä¸é»è¾èç»ã</li>
<li><strong>æ¶é´çº¿æ  (Timeline Tree)ï¼</strong> éç¨ Git é£æ ¼çåç´æ ç¶å¾ï¼ç²¾åè¿½è¸ªæ¯ä¸æ¬¡ç»å¾®çä¿®æ¹ä¸åæ¯ã</li>
<li><strong>â¡ å¯¼èªï¼</strong> ç¹å»ä»»æèç¹å³å¯ <strong>ç´æ¥è·³è½¬</strong> è³å¯¹åºåæ¯çå·ä½æ¶æ¯ï¼ç¬é´è¿ååå²ä¸ä¸æã</li>
<li><strong>ð æç´¢ï¼</strong> å¨æ´ä¸ªå¯¹è¯æ ä¸­å¿«éå®ä½ç¹å®ç Prompt æ AI åå¤ï¼ä¸åè¿·å¤±å¨é¿å¯¹è¯ä¸­ã</li>
<li><strong>ð ï¸ å®ç¨å·¥å·ï¼</strong> åç½®é¿æ¶æ¯èªå¨æå åè½ï¼å¹¶è®¡åæç»­éææ´å¤æçå·¥å·ï¼å¦å¯¼åºãæ ¼å¼åç­ï¼ã</li>
</ul>
<h3 id="æ´å¤åè½å±ç¤º">æ´å¤åè½å±ç¤º</h3>
<h4 id="1-ä¾§è¾¹æ ">1. ä¾§è¾¹æ </h4>
<p><img alt="sidepanel" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2733976/202602/2733976-20260205081052525-214114000.gif" class="lazyload"></p>
<p>ä¾§è¾¹æ ä¸ä¸ºæåæçèçï¼æä¾ä¸¤ç§æ¨¡å¼ä»¥å¥åæ¨çå·¥ä½æµï¼</p>
<h4 id="a-å¾è°±æ¨¡å¼-graph-mode">a. å¾è°±æ¨¡å¼ (Graph Mode)</h4>
<p><em>ææ§ç»æä¸ä¸ä¸æè·³è½¬çæä½³éæ©ã</em></p>
<ul>
<li><strong>ç©ºé´ææ§ï¼</strong> æ¯æèªç±ç¼©æ¾ä¸å¹³ç§»ï¼ç¬é´ææ¡å¯¹è¯ä¸»é¢çå®æ´ææç»æã</li>
<li><strong>ä¸é®è·³è½¬ï¼</strong> ç¹å»å¾è°±ä¸­çä»»ææ¶æ¯èç¹ï¼å³å¯ <strong>ç¬é´è·³è½¬</strong> å°ä»»æåæ¯çä»»æå¯¹è¯ï¼å¹¶ç«å³æ¢å¤å½æ¶çä¸ä¸æç¯å¢ã</li>
</ul>
<h4 id="b-æ¶é´çº¿æ¨¡å¼-timeline-mode">b. æ¶é´çº¿æ¨¡å¼ (Timeline Mode)</h4>
<p><em>ç²¾åå®ä½ä¸åå®¹æ£ç´¢çå©å¨ã</em></p>
<ul>
<li><strong>ä¸æ³¨ç­éï¼</strong> ä¿¡æ¯åªé³å¤ªå¤ï¼åæ¢è¿æ»¤å¨ä»¥æ¾ç¤º <strong>å¨é¨é®ç­</strong>ã<strong>ä»é®é¢ (Prompts)</strong> æ **ä»åç­ **ãéå¸¸éåå¿«éåé¡¾æ¨ç Prompt è¿­ä»£åå²ãåæ¶ä¹æ¯æç¹å»è·³è½¬ã</li>
<li><strong>å³æ¶æç´¢ï¼</strong> ä½¿ç¨åç½®æç´¢æ å¿«éå®ä½å³é®è¯ï¼å¿«éå®ä½æ¶æ¯ï¼åè½¦ç´æ¥è·³è½¬ã</li>
</ul>
<h4 id="2-æ¬æµ®çª">2. æ¬æµ®çª</h4>
<p><img alt="float_main" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2733976/202602/2733976-20260205081115735-1628812932.png" class="lazyload"></p>
<ul>
<li>ð <strong>ææ½ä¸ç¼©æ¾ï¼</strong> å¨å±å¹ä»»æä½ç½®è®¿é®å®æ´çå¾è°±/æ¶é´çº¿è§å¾ã</li>
<li>ð» <strong>ç©¿éæ¨¡å¼ï¼</strong> ç¹å»ç©¿éæé®ï¼ç´æ¥ä¸æ¬æµ®çªèåçé¡µé¢è¿è¡äº¤äºï¼äºä¸å¹²æ°ã</li>
<li>ð <strong>åºå®ä¸èåï¼</strong> æ¯æçªå£ <strong>ç½®é¡¶</strong> å¹¶èªç±è°è <strong>éæåº¦</strong>ã</li>
</ul>
<h4 id="3-é¿æ¶æ¯æå ">3. é¿æ¶æ¯æå </h4>
<p><img alt="fold" loading="lazy" data-src="https://img2024.cnblogs.com/blog/2733976/202602/2733976-20260205081143934-1654265703.png" class="lazyload"></p>
<ul>
<li><strong>ð æ¶æ¯èªå¨æå </strong>ï¼é¿åå¤/ä»£ç åå¯èªå¨ææå¨æå ï¼çé¢æ´æ¸ç½ã</li>
<li>æ¯æèªå®ä¹æå æé®æåç­ï¼å¯ä»¥è®¾ç½®æå éå¼ï¼ä¹å¯ä»¥æå¨æå ã</li>
</ul>
<h2 id="ä¸åç»­è®¡å">ä¸ãåç»­è®¡å</h2>
<p>ç°å¨æä»¶è¿å¨å¿«éå¼åè¿­ä»£çé¶æ®µï¼åç»­çè®¡åä¸»è¦åæ¬ï¼</p>
<ol>
<li>èç¹ååæ¯çé«äº®ï¼æ¶èï¼åç±»ç­åè½ã</li>
<li>æ´å¤å·¥å·çéæï¼ç®åè®¡åæ·»å ï¼å¯¹è¯æèæ¶æ¯çº§å«çå¯¼åºï¼å¶ä»åè½å¦æéè¦æ¬¢è¿issueã</li>
<li><strong>å¾è°±ç¼è¾ï¼</strong> å é¤ä¸éè¦çåæ¯æèç¹ï¼ä»¥åæå¨ç¼è¾å¾è°±ç»æï¼æ¯å¦å é¤ï¼æ·»å èç¹é´çè¿çº¿ï¼ä»èä»¤å¾è°±ä¸åå±éäºæ¶æ¯ç»æï¼è®©é»è¾æ´å æ¸æ°ã</li>
<li><strong>å¨å±ç¥è¯å¾è°±ï¼</strong> å®ç°éå¯¹é¡¹ç®æèèªå®ä¹è·¨å¯¹è¯çæ´å¤æçç¥è¯å¾è°±æå»ºåç®¡çã</li>
<li><strong>ä¸ªäººç¥è¯åºçç®¡çï¼</strong> åºäºå¾è°±æå»ºä¸ªäººçç¥è¯åºï¼å¹¶æ¯æç¥è¯åºçç®¡çï¼æ£ç´¢ï¼å¯¼åºï¼å¨å¯¹è¯ä¸­å¯¼å¥ç­åè½ã</li>
</ol>
<h3 id="ååå¨æå">åãåå¨æå</h3>
<p>æåçæåï¼éå¸¸æ¬¢è¿æå´è¶£çæåä»¬è¯ç¨æ¬æä»¶ï¼ ç®åé¡¹ç®è¿å¤äºæ©æé¶æ®µï¼è¿æè¯¸å¤ Bug åä¸è¶³ï¼éå¸¸æ¬¢è¿å¤§å®¶å¨ Issues éåé¦ãå¦æè§å¾è¿ä¸ªå°å·¥å·å¯¹ä½ æå¸®å©ï¼<strong>ååå¸æè½å¾å°æ¨çä¸ä¸ª Star</strong>ï¼è¿å¯¹ææ¯è«å¤§çé¼å±ã</p>
<p>å¦ææ¨ææ°çæ³æ³éå¸¸æ¬¢è¿Forkæä»¬çé¡¹ç®ï¼å¹¶æäº¤PRï¼</p>
<p>æåæåçæåï¼åè´´ä¸ä¸é¡¹ç®ä¸­æREADMEçé¾æ¥ï¼é¡¹ç®åå®æ´çä»ç»è¯·åè§ï¼<a href="https://github.com/Robbings/chatgpt-graph-navigator/blob/master/README_ZH.md" target="_blank" rel="noopener nofollow">https://github.com/Robbings/chatgpt-graph-navigator/blob/master/README_ZH.md</a></p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-05 08:28">2026-02-05 08:28</span>&nbsp;
<a href="https://www.cnblogs.com/roberick">Roberick</a>&nbsp;
éè¯»(<span id="post_view_count">42</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19577242);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19577242', targetLink: 'https://www.cnblogs.com/roberick/p/19577242', title: '[å¼æºåäº«] ChatGPT æµè§å¨æçæä»¶ï¼å¯¹è¯å¯è§åä¸ºå¾è°±åæ¶é´çº¿ï¼å¿«éå®ä½æ¶æ¯ï¼ææ¡å¯¹è¯èç»' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ [å¤§æ¨¡åå®æ 03é¢å¤] äºç«¯ç¼ä¸¹æ¿ 2ï¼Kaggle ä¸ææå ]]></title>
    <link>https://www.cnblogs.com/algieba/p/19576331</link>
    <guid>0183d382db088ace3e48d3c01bc18286</guid>
    <description>
    <![CDATA[ 
		<div class="postcontent">
			    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/3169973/202602/3169973-20260204195327324-384345256.png" alt="[å¤§æ¨¡åå®æ 03é¢å¤] äºç«¯ç¼ä¸¹æ¿ 2ï¼Kaggle ä¸ææå" class="desc_img">
        Colab é¢åº¦ç¨å®äºï¼Kaggle å¸¦çä¸¤å¼  T4 æ¾å¡æ¥äºï¼æ¬æè¯¦è§£ Kaggle è´¦å·ææºéªè¯ãå¼å¯ Internet èç½ãéç½®å T4 GPU ç¯å¢ï¼ä»¥åå¦ä½å©ç¨ Kaggle ç¹æç Dataset æºå¶æä¹åä¿å­ HuggingFace æ¨¡åã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="å¤§æ¨¡åå®æ-03é¢å¤-äºç«¯ç¼ä¸¹æ¿-2kaggle-ä¸ææå">[å¤§æ¨¡åå®æ 03é¢å¤] äºç«¯ç¼ä¸¹æ¿ 2ï¼Kaggle ä¸ææå</h1>
<blockquote>
<p><strong>æ ¸å¿æè¦ (TL;DR)</strong></p>
<ul>
<li><strong>çç¹</strong>ï¼Colab åè´¹é¢åº¦èå°½ï¼æèåå¼  T4 æ¾å­ï¼16GBï¼æ æ³æ»¡è¶³æ´å¤§åæ°æ¨¡åçå¾®è°éæ±ã</li>
<li><strong>æ¹æ¡</strong>ï¼å©ç¨ <strong>Kaggle</strong> æä¾ç <strong>æ¯å¨ 30 å°æ¶åè´¹åè·¯ T4 GPU (T4 x2)</strong> ç®åã</li>
<li><strong>æå·§</strong>ï¼éè¿ <strong>ææºå·éªè¯</strong> è§£éèç½æéï¼å©ç¨ <strong>Kaggle Datasets</strong> å®ç°æ¨¡åçæä¹åå­å¨ã</li>
<li><strong>ç®æ </strong>ï¼ä½ä¸º Colab çå¼ºåæ¿è¡¥ï¼çè³ä¸ä½ï¼ï¼æ­å»ºå¤ç¨äºç«¯ç¼ä¸¹ç¯å¢ã</li>
</ul>
</blockquote>
<h2 id="åè¨">åè¨</h2>
<p>ä¸ä¸ç¯ä¸­ï¼æ¬æ¥æ³ç´æ¥åå°Google Colabçå¤§æ¨¡åæ¨çèæ¬ï¼è®©åä½åäººä»¬æåä¸ä¸å¨å¨åæ°7Bæ¨¡åçè½åï¼ä½æ¯æè¾äºå¾ä¹ï¼Colabè¯»driverèæ¯å¤±è´¥ï¼å½ææ³ç´æ¥ä¸è½½å°äºç«¯ä¸»æºèä¸æ¯driverçæ¶åï¼GPUçé¢åº¦å·²ç»èå°½ãç´¢æ§ä»å¤©å¨Kaggleçè¿ç¯åæä¸­æ¥è®²ï¼åºè¯¥ä¹åä¹ä¸»è¦ç¨Kaggleæ¥è¿è¡äºç«¯å¼åï¼æ¯ç«Colabé¢åº¦å°ï¼è¿å¾ç¯çï¼é¿æ¶é´ä¸çä¼æ­æè¿æ¥ã</p>
<p>å¥½ï¼æä»¬æ¥åä»ç»ä¸ä¸ä»å¤©çä¸»è§ï¼Google æä¸çå¦ä¸ä¸ªç¥å¨ï¼<a href="https://www.kaggle.com/" target="_blank" rel="noopener nofollow"><strong>Kaggle</strong></a>ãColabå¦æè¯´å¶æ¬èå°±æ¯æ¨¡åè®­ç»ï¼é£<strong>Kaggle</strong>æ¬èº«å¶å®æ¯ä¸ä¸ªæ°æ®ç§å­¦çç«èµå¹³å°ï¼æ¯ç«æ¯æ°æ®ç§å­¦ç«èµåï¼é£èªç¶å¾éè¦ç®åèµæºï¼<strong>Kaggle</strong>ä¸ºäºæ¹ä¾¿ï¼ä¹åæ¥äºè°·æ­å¤§åäººçä¼è¯åè´¨ï¼åè´¹æä¾äºå¤§æ¹çè®¡ç®èµæºãè·Colabå¯¹æ¯èµ·æ¥ï¼Kaggleçä¼å¿å°±æ¯ï¼æ´ç¨³å®ï¼æ´æ¹ä¾¿ï¼èµæºç»çé¢åº¦æ´å¤ã</p>
<h2 id="1-kaggle-notebooks-æ ¸å¿æ¦å¿µ">1. Kaggle Notebooks æ ¸å¿æ¦å¿µ</h2>
<p>Kaggle çæ ¸å¿ç¼ç¨ç¯å¢å« <strong>Kernels (ç°å¨ç»ç§° Notebooks)</strong>,ä¸ç¨å®³æï¼è¯¶ï¼å®å°±æ¯æä»¬æ¨å¿åè®¤è¯ççäºº<strong>äºç«¯æå¡å¨ç</strong>ç<strong>Jupyter Notebook</strong>,ä½æ¯åColabä¸å¤ªç¸åçæ¯Kaggleçæä»¶ç»æï¼å®ææ¾å¾åºåäºè¾å¥åºåï¼è¾åºåºåï¼æå­åºå, è¿æ¯ä¹æä»¬åä¸æå®¹ææµçå°æ¹:</p>
<ul>
<li><strong>Input (<code>/kaggle/input</code>)</strong>ï¼<strong>åªè¯»åºå</strong>ãè¿éå­æ¾ä½ ä¸ä¼ çæ°æ®éææè½½çæ¨¡åãè¯»åéåº¦æå¿«ï¼ä½æ æ³åå¥ã</li>
<li><strong>Output (<code>/kaggle/working</code>)</strong>ï¼<strong>å¯è¯»ååºå</strong>ãè¿æ¯ä½ çä¸»å·¥ä½åºï¼ä»£ç è¿è¡ç»æãä¸è½½çæ¨¡åå¿é¡»å­å¨è¿éãä½æ³¨æï¼éå¯ Session åï¼è¿éçåå®¹å¦æä¸ä¿å­ä¸º Dataset ä¹ä¼æ¶å¤±ã</li>
<li><strong>Temp (<code>/kaggle/temp</code>)</strong>ï¼<strong>ä¸´æ¶æå­åº</strong>ãç©ºé´è¾å¤§ï¼åªæå½åä¼è¯ææï¼ï¼éåä¸è½½è§£åä¸´æ¶çå¤§æä»¶ã</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm02-2-online-environment-kaggle/kaggle_input_working_temp.png" alt="Kaggle notebook æä»¶ç³»ç»ç»æå¾ï¼å±ç¤º input/working/temp çåºå«çæªå¾" loading="lazy"></p>
<h2 id="2-å¿«éä¸ææ³¨åä¸è§£é">2. å¿«éä¸æï¼æ³¨åä¸âè§£éâ</h2>
<h3 id="21-æ³¨åä¸å³é®éªè¯-å¿å">2.1 æ³¨åä¸å³é®éªè¯ (å¿å)</h3>
<p>æä»¬æ°ç¨æ·ç»å½åå»ºnotebookåä¼åç°ï¼æä»¬æ²¡æç¡¬ä»¶å éè®¾å¤å¯éã<br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm02-2-online-environment-kaggle/no_gpu.png" alt="æ°ç¨æ·çacceleratoré¨åæ¯ç°è²çæªå¾" loading="lazy"><br>
æ ¹æ¬åå å°±æ¯å±ä»¬æ²¡æè¿è¡ææºéªè¯ï¼åååï¼å¯ä»¥çè§£ï¼æ¯ç«æ¬èº«kaggleå°±ä¸ç¨ç»å¡ï¼å ä¸ææºéªè¯å¯è½ä¼æç»æä¸å¤§é¨åè®¡ç®èµæºæ»¥ç¨ã</p>
<ol>
<li>è®¿é® <a href="https://www.kaggle.com/" target="_blank" rel="noopener nofollow">Kaggle å®ç½</a> å¹¶æ³¨åè´¦å·ã</li>
<li><strong>å³é®æ­¥éª¤</strong>ï¼ç¹å»å³ä¸è§å¤´å -&gt; <strong>Settings</strong>ã</li>
<li>æ¾å° <strong>Phone Verification</strong>ï¼ææºéªè¯ï¼ã<strong>å¿é¡»å®æè¿ä¸æ­¥</strong>ï¼å¦åæ æ³å¼å¯ GPU å Internetï¼èç½ï¼åè½ã<br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm02-2-online-environment-kaggle/phone_verification.png" alt="Kaggle è´¦æ·è®¾ç½®é¡µé¢çæªå¾ï¼é«äº® Phone Verification åºå" loading="lazy"></li>
</ol>
<p>è®¤è¯å®æ¯å°±å¯ä»¥ä½¿ç¨GPUèµæºäº<br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm02-2-online-environment-kaggle/gpu_access.png" alt="å½è®¤è¯äºææºå·ä¹åæ¾ç¤ºacceleratorä¸­æå¯ç¨çGPUèµæºçæªå¾" loading="lazy"><br>
å¦æç»§ç»­åäº<strong>Identity verification</strong>ä¹åï¼å¯ä»¥ä½¿ç¨TPUèµæºï¼ä¸è¿æä»¬ææ¶ç¨ä¸å°ï¼ç®åçGPUèµæºå·²ç»å¤å±ä»¬å¤§ç©ä¸åºäºã</p>
<h3 id="22-åå»ºç¬è®°æ¬">2.2 åå»ºç¬è®°æ¬</h3>
<ol>
<li>ç¹å»å·¦ä¾§èåæ ç <strong>Create</strong> -&gt; <strong>New Notebook</strong>ã</li>
<li>è¿å¥ç¼è¾å¨çé¢ï¼ä½ ä¼åç°çé¢å¸å±æ¯ Colab æ´å ç´§åä¸åè½ååºæç¡®ã<br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm02-2-online-environment-kaggle/the_whole_UI.png" alt="kaggleçç¼è¾å¨é¡µé¢å¸å±çæªå¾" loading="lazy"></li>
</ol>
<h3 id="23-çé¢å¸å±éè§">2.3 çé¢å¸å±éè§</h3>
<ul>
<li><strong>å·¥ä½åº</strong>ï¼ä½äºå³ä¾§ï¼æ¾ç¤ºäºInput-&gt;æä»¬çæè½½èµæºï¼ä¸ä¼ çæ°æ®éåæ¨¡åç­ç­ï¼Output-&gt;æä»¬è¾åºçç»æèµæºãnotebookåå®¹éè§,ä»¥åä¸é¢çsession optionsç¯å¢å¿«æ·éç½®ç­ç­<br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm02-2-online-environment-kaggle/workspace.png" alt="ç¼è¾å¨å³ä¾§çå·¥ä½åºï¼åå«Inputåºåoutputåºçæªå¾" loading="lazy"><br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm02-2-online-environment-kaggle/session_options.png" alt="ç¼è¾å¨å³ä¾§å·¥ä½åºå©ä½é¨åï¼æ¥ç­session optionsçæªå¾" loading="lazy"></li>
<li><strong>å¿«æ·æä½æ </strong>ï¼ å¨ä»£ç åºä¸æ¹ï¼åColabå·®å«ä¸å¤§ï¼å¯ä»¥å¿«éè¿è¡ï¼æå¥ååæ ¼ï¼å¤å¶ç²è´´ç­ç­<br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm02-2-online-environment-kaggle/quick_action.png" alt="å¨ç¼è¾å¨ä¸æ¹çå¿«æ·æä½æ çæªå¾" loading="lazy"></li>
<li><strong>ä»£ç åº</strong>ï¼åColabä¸æ ·, æ åç Jupyter ååæ ¼ã</li>
</ul>
<p>æ³¨æï¼</p>
<ol>
<li>åColabä¸ä¸æ ·çæ¯ï¼Kaggleçæä»¶åæ²¡æåç¼ï¼ä¸ç¨å ipynbåç¼</li>
<li>å±ä»¬çç¡¬ä»¶å éï¼GPU/TPUè®¡ç®èµæºï¼è¢«æ¾å°äºé¡¶é¨èåæ ç<strong>Settings</strong>ä¸­ç<strong>accelerator</strong>ä¸­äº</li>
<li>åColabä¸åï¼å ä¸ºKaggleæ¯ä¸ºç«èµæå¡ï¼å¾å¤ç«èµæ¯è¦æ±æ¨¡åä¸èç½çï¼æä»¥æä»¬å¨è®­ç»æ¨¡åçæ¶åï¼éè¦æå¨å¼å¯ç½ç»ï¼ä¹å¨é¡¶é¨èåæ ç<strong>Settings</strong>ä¸­ï¼ç¹å»<strong>Turn On Internet</strong>æå¼å³å¯èç½ä¸è½½æ¨¡åæèæ°æ®éã<br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm02-2-online-environment-kaggle/settings.png" alt="Kaggle NotebookçSettingsä¸æèåï¼åå«ç¡¬ä»¶å éè®¾å¤åå¼å¯èç½éé¡¹çæªå¾" loading="lazy"></li>
<li>å¯é¥ç®¡çè¢«æ¾å°äºé¡¶é¨èåæ ç<strong>Add-ons</strong>ä¸äº<br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm02-2-online-environment-kaggle/add-on.png" alt="Kaggle NotebookçAdd-onä¸æ¥èåï¼åå«å¯é¥ç®¡çéé¡¹çæªå¾" loading="lazy"></li>
</ol>
<h2 id="3-ç¯å¢éç½®å¼å¯åæ¾å¡ä¸èç½">3. ç¯å¢éç½®ï¼å¼å¯åæ¾å¡ä¸èç½</h2>
<p>Kaggle é»è®¤ç¯å¢æ¯ <strong>CPU</strong> ä¸ <strong>æ­ç½</strong> çãæä»¬éè¦æå¨âè§£é¤å°å°âã</p>
<h3 id="31-å¼å¯èç½-internet-on">3.1 å¼å¯èç½ (Internet On)</h3>
<p>å¯ä»¥æç§åæè¯´çå¨é¡¶é¨èåæ æå¼ï¼ä¹å¯ä»¥å¨å³ä¾§è¾¹æ ç <strong>Session Options</strong> ä¸­ï¼æ¾å° <strong>Internet</strong> éé¡¹ãå°å¼å³æ¨å° <strong>On</strong>ã<br>
<em>æ³¨æï¼å¦ææ²¡æææºéªè¯ï¼æ­¤éé¡¹ä¸ºç°è²ä¸å¯ç¨ã</em></p>
<h3 id="32-å¼å¯-gpu-å é-t4-x2">3.2 å¼å¯ GPU å é (T4 x2)</h3>
<ol>
<li>
<p>å¨å³ä¾§è¾¹æ æ¾å° <strong>Accelerator</strong>ã</p>
</li>
<li>
<p>ä¸æéæ© <strong>GPU T4 x2</strong>ã</p>
<ul>
<li><strong>GPU T4 x2</strong>ï¼ä¸¤å¼ æ¾å¡ï¼çº¦ 30GB æ¾å­ï¼éåå¤§æ¨¡åæ¨çåå¾®è°ã</li>
<li><strong>GPU P100</strong>ï¼åå¼ æ§æ¶æå¡ï¼è½ç¶éåº¦å¿«ä½æ¾å­ä» 16GBï¼éå¸¸ä¸æ¨èã</li>
</ul>
</li>
<li>
<p>å¼å¯åï¼é¡¶é¨ä¼æ¾ç¤º <strong>Session Storage</strong> å <strong>GPU Quota</strong>ï¼æ¯å¨ 30 å°æ¶é¢åº¦ï¼éå¸¸å¨å­å·æ°ï¼ã<br>
ç¹å»èªå·±çå¤´åï¼å¯ä»¥çè§èªå·±çé¢åº¦<strong>GPU Quata</strong><br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm02-2-online-environment-kaggle/GPU_Quata.png" alt="ç¹å»èªå·±çå¤´åï¼å¯ä»¥çè§èªå·±çé¢åº¦çæªå¾" loading="lazy"></p>
</li>
</ol>
<h3 id="33-éªè¯åå¡ç¯å¢">3.3 éªè¯åå¡ç¯å¢</h3>
<p>è¾å¥å¹¶è¿è¡ä»¥ä¸ä»£ç ï¼ç¡®è®¤æä»¬æ¯å¦ççæ¥æäºä¸¤å¼ æ¾å¡ï¼</p>
<pre><code class="language-python">!nvidia-smi
</code></pre>
<p>ä½ åºå½è½çå° <strong>ä¸¤å¼ </strong> Tesla T4 æ¾å¡çåè¡¨ (GPU 0 å GPU 1)ã<br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm02-2-online-environment-kaggle/nvidia-smi.png" alt="nvidia-smiçè¿è¡ç»æï¼æ¾ç¤ºä¸¤å¼ Tesla T4å¡" loading="lazy"></p>
<h2 id="4-å®æä¸è½½å¹¶è¿è¡å¤§æ¨¡å">4. å®æï¼ä¸è½½å¹¶è¿è¡å¤§æ¨¡å</h2>
<p>å¨ Kaggle ä¸ä½¿ç¨æ¨¡åä¸»è¦æä¸¤ç§âæµæ´¾âï¼<strong>ä»£ç ä¸è½½æ´¾</strong> å <strong>åçæè½½æ´¾</strong>ã</p>
<h3 id="æ¹å¼ä¸å©ç¨-huggingface-cli-ä¸è½½-å·¥ç¨åæ¨è">æ¹å¼ä¸ï¼å©ç¨ HuggingFace CLI ä¸è½½ (å·¥ç¨åæ¨è)</h3>
<p>è¿ç§æ¹å¼æçµæ´»ï¼éåéè¦ç²¾ç¡®æ§å¶æ¨¡åçæ¬çæåµãç±äº Kaggle æ²¡æ Google Driveï¼æä»¬å°æ¨¡åä¸è½½å° <code>/kaggle/working/</code> ç®å½ã</p>
<p><strong>æ­¥éª¤ 1ï¼å®è£ä¸éç½®</strong></p>
<pre><code class="language-python"># Kaggle é¢è£åºå¾å¤ï¼ä½ transformers çæ¬å¯è½æ»åï¼å»ºè®®æ´æ°
!pip install -U transformers huggingface_hub accelerate bitsandbytes
</code></pre>
<p>ç¹å»é¡¶é¨èå <strong>Add-ons</strong> -&gt; <strong>Secrets</strong>ï¼æ·»å  <code>HF_TOKEN</code>ï¼ä½ ç HuggingFace è®¿é®ä»¤çï¼ã</p>
<p><strong>æ­¥éª¤ 2ï¼ä¸è½½èæ¬</strong></p>
<pre><code class="language-python">import os
from huggingface_hub import login, snapshot_download
from kaggle_secrets import UserSecretsClient

# 1. ç»å½ (èªå¨è¯»å Secrets)
user_secrets = UserSecretsClient()
hf_token = user_secrets.get_secret("HF_TOKEN")
login(token=hf_token)

# 2. å®ä¹ä¸è½½è·¯å¾ (æ³¨æï¼å¿é¡»å¨ /kaggle/working ä¸)
model_dir = "/kaggle/working/model_cache"
os.makedirs(model_dir, exist_ok=True)

# 3. ä¸è½½æ¨¡å
model_id = "Qwen/Qwen2.5-7B-Instruct"
print(f"å¼å§ä¸è½½ {model_id} ...")

# Kaggle å»ºè®®ä¸è½½å®æä»¶ (local_dir_use_symlinks=False)
snapshot_download(
    repo_id=model_id,
    local_dir=model_dir,
    local_dir_use_symlinks=False,
    token=hf_token
)

print("ä¸è½½å®æï¼")
</code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm02-2-online-environment-kaggle/download_model.png" alt="ä¸è½½å®æçç»ææªå¾" loading="lazy"></p>
<h3 id="æ¹å¼äºadd-input-kaggle-åçæ¹å¼">æ¹å¼äºï¼Add Input (Kaggle åçæ¹å¼)</h3>
<p>è¿æ¯ Kaggle æå¼ºå¤§çåè½ãä½ å¯ä»¥ç´æ¥å¨ç½é¡µç«¯æç´¢ç°æçæ¨¡åï¼åæè½½ U çä¸æ ·æè½½è¿æ¥ï¼<strong>ä¸æ¶èä¸è½½æµéåæ¶é´</strong>ã</p>
<ol>
<li>ç¹å»å³ä¾§è¾¹æ ç <strong>Add Input</strong>ã</li>
<li>éæ© <strong>Models</strong> æ ç­¾é¡µã</li>
<li>æç´¢ <code>Qwen2.5</code>ã</li>
<li>ç¹å» <strong>+</strong> å·æ·»å ã<br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm02-2-online-environment-kaggle/qwen_downloading.png" alt="Kaggle Add Input æç´¢æ¨¡åçå¼¹çªæªå¾" loading="lazy"></li>
<li>éæ©FRAMEWORKéæ©<strong>Transformers</strong>æ¶æ, VARIATIONéæ©<strong>7b-instruct</strong>, ä¹åçåæä¼è·åä½åäººè§£éè¿äºåæ°çå·®å«<br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm02-2-online-environment-kaggle/qwen2_5_params.png" alt="ä¸è½½Qwen2.5æ¨¡åéè¦å¡«åçæ¶æååæ°ç¤ºææªå¾" loading="lazy"></li>
<li>æ¨¡åä¼ç´æ¥åºç°å¨ <code>/kaggle/input/</code> ç®å½ä¸ï¼åªè¯»ï¼ï¼è·¯å¾éå¸¸é¿å¾å <code>/kaggle/input/qwen2.5/transformers/7b-instruct/1</code>ã</li>
</ol>
<h2 id="5-å è½½æ¨¡åä¸åå¡æ¨ç">5. å è½½æ¨¡åä¸åå¡æ¨ç</h2>
<p>æ¥æåå¡ T4 åï¼å è½½æ¨¡åæ¶æä¸ä¸ªå³é®åæ°ï¼<code>device_map="auto"</code>ãå®ä¼èªå¨å°æ¨¡åååå°ä¸¤å¼ æ¾å¡ä¸ï¼ä»èè®©æä»¬è½è¿è¡æ´å¤§çæ¨¡åã</p>
<pre><code class="language-python">import torch
from transformers import AutoTokenizer, AutoModelForCausalLM

# è·¯å¾æ ¹æ®ä½ çä¸è½½æ¹å¼è°æ´
# æ¹å¼ä¸è·¯å¾: "/kaggle/working/model_cache"
# æ¹å¼äºè·¯å¾: "/kaggle/input/qwen2.5/transformers/7b-instruct/1/" (å·ä½å¯ä»¥è¿è¡é»è®¤åå»ºçç¬¬ä¸ä¸ªååæ ¼ï¼æ¥çinputç®å½ç»æ,å°è½çè§config.jsonçç®å½å³å¯)
model_path = "/kaggle/working/model_cache"

print("æ­£å¨å è½½æ¨¡å (åå¡æ¨¡å¼)...")

tokenizer = AutoTokenizer.from_pretrained(model_path, trust_remote_code=True)

# å³é®ï¼device_map="auto" ä¼èªå¨å©ç¨ä¸¤å¼  T4
model = AutoModelForCausalLM.from_pretrained(
    model_path,
    device_map="auto",
    torch_dtype=torch.float16,
    trust_remote_code=True
)

print(f"æ¨¡åå è½½æåï¼æ¾å­åå¸: {model.hf_device_map}")

# æµè¯å¯¹è¯
prompt = "ä½ å¥½ï¼è¯·ç¨ä¸å¥è¯å½¢å®¹ Kaggle çå T4 æ¾å¡æå¤é¦ï¼"
messages = [{"role": "user", "content": prompt}]
text = tokenizer.apply_chat_template(messages, tokenize=False, add_generation_prompt=True)
inputs = tokenizer([text], return_tensors="pt").to(model.device)

with torch.no_grad():
    generated_ids = model.generate(**inputs, max_new_tokens=200)

response = tokenizer.batch_decode(generated_ids, skip_special_tokens=True)[0]
print(f"Qwen: {response.split('assistant')[-1].strip()}")
</code></pre>
<h2 id="6-è¿é¶å¦ä½æä¹åä¿å­save-version">6. è¿é¶ï¼å¦ä½æä¹åä¿å­ï¼(Save Version)</h2>
<p>Kaggle æ²¡æ Google Driveï¼é£æä¹ä¿å­ä¸è½½å¥½çæ¨¡åæè®­ç»ç»æå¢ï¼</p>
<p><strong>ç­æ¡ï¼æ Output åæ Datasetã</strong></p>
<ol>
<li>å½ä½ çä»£ç è¿è¡å®æ¯ï¼æ¨¡åä¿å­å¨ <code>/kaggle/working</code> åã</li>
<li>ç¹å»å³ä¸è§ç <strong>Save Version</strong> æé®ã</li>
<li>éæ© <strong>Save &amp; Run All</strong> (éæ°è·ä¸é),å¿é¡»ç­å°ä¸æ¹å¼¹åºçä¿å­ä»»å¡å®æã<br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm02-2-online-environment-kaggle/job_running_done.png" alt="ä¿å­ä»»å¡å®æçæªå¾" loading="lazy"></li>
<li>ä¿å­æååï¼ä½ å¯ä»¥å»ä¸»é¡µç<strong>Your Work</strong>ç¹å»åæçNotebook,è¿å¥<strong>Output</strong> æ ç­¾é¡µéï¼ç¹å»æå³è¾¹çOutputçä¸ä¸ªç¹ï¼ç¶åç¹å» <strong>New Dataset</strong>ã<br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm02-2-online-environment-kaggle/new_data.png" alt="å¨Outputæ ç­¾é¡µçNew Datasetç¤ºæå¾" loading="lazy"></li>
<li>è¿æ ·ï¼æä»¬åæçæ¨¡åå°±åæäºä¸ä¸ªå¯ä»¥å¨å¶ä» Notebook éç´æ¥ <strong>Add Input</strong> çæ°æ®éäºï¼</li>
</ol>
<p><strong>PS:é¤å¼èªè®­ç»çç¹æ®æ¨¡ååä¸äºå¨Inputæ¾ä¸å°çæ¨¡åï¼æå¥½é½ç´æ¥ä½¿ç¨Inputå¯¼å¥æ´ä¸ºå¿«æ·</strong></p>
<h2 id="7-å¸¸è§é®é¢-qa">7. å¸¸è§é®é¢ (Q&amp;A)</h2>
<p><strong>Q: Colab å Kaggle æè¯¥éè°ï¼</strong><br>
<strong>A:</strong></p>
<ul>
<li><strong>Colab</strong>: éåå¿«éå®éªãæè½½ Google Drive æ¹ä¾¿ãä½ T4 åªæä¸å¼ ï¼ä¸æè¿å°å·è¾ä¸¥ã</li>
<li><strong>Kaggle</strong>: éåéè¦å¤§æ¾å­ï¼T4 x2ï¼çä»»å¡ãç¯å¢æ´ç¨³å®ï¼ä¸æ 30 å°æ¶/å¨çæç¡®é¢åº¦ï¼ä¸ç¨æå¿ç¨å°ä¸åè¢«è¸¢ä¸çº¿ã</li>
</ul>
<p><strong>Q: ä¸ºä»ä¹æçä»£ç æ¥é <code>Internet connection is closed</code>ï¼</strong><br>
<strong>A:</strong> è¿æ¯ä¸ä¸ªç»å¸éè¯¯ãè¯·æ£æ¥å³ä¾§è¾¹æ ç <strong>Internet</strong> å¼å³æ¯å¦ä¸º Onãå¦æå¼å³æ¯ç°è²çï¼è¯·æ£æ¥æ¯å¦å®æäºè´¦å·ç <strong>ææºå·éªè¯</strong>ã</p>
<p><strong>Q: <code>/kaggle/working</code> éçæä»¶éå¯åè¿æåï¼</strong><br>
<strong>A:</strong> æ²¡æäºãKaggle ç Session ä¹æ¯ä¸´æ¶çãå¦æéè¦æä¹åï¼è¯·å¡å¿ä½¿ç¨ <strong>Save Version</strong> åè½å°å¶ä¿å­ä¸º Datasetï¼æèå¨ä»£ç æåå ä¸æ®µä¸ä¼ å° HuggingFace Hub çä»£ç ã</p>
<hr>
<p><strong>æ¬æä½èï¼</strong> Algieba<br>
<strong>æ¬æé¾æ¥ï¼</strong> <a href="https://blog.algieba12.cn/llm02-2-online-environment-kaggle/" target="_blank" rel="noopener nofollow">https://blog.algieba12.cn/llm02-2-online-environment-kaggle/</a><br>
<strong>çæå£°æï¼</strong> æ¬åå®¢æææç« é¤ç¹å«å£°æå¤ï¼åéç¨ BY-NC-SA è®¸å¯åè®®ãè½¬è½½è¯·æ³¨æåºå¤ï¼</p>
<pre><code>
</code></pre>


</div>
<div class="clear"></div>

		</div>
		<div class="itemdesc">
			åè¡¨äº 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-04 19:54">2026-02-04 19:53</span>&nbsp;
<a href="https://www.cnblogs.com/algieba">é¿å°çä»£ç å±</a>&nbsp;
éè¯»(<span id="post_view_count">34</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19576331);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19576331', targetLink: 'https://www.cnblogs.com/algieba/p/19576331', title: '[å¤§æ¨¡åå®æ 03é¢å¤] äºç«¯ç¼ä¸¹æ¿ 2ï¼Kaggle ä¸ææå' })">ä¸¾æ¥</a>

		</div>
	 ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ V8å¼æ ç²¾åæ¼«æ¸¸æå--Ignitionç¯(ä¸) æä»¤ æ å¸§ æ§½ä½ è°ç¨çº¦å® åå­å¸å± åºç¡åå®¹ ]]></title>
    <link>https://www.cnblogs.com/f20171110/p/19576264</link>
    <guid>8dae7275559ff858e0e2a36c397f609a</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/f20171110/p/19576264" title="åå¸äº 2026-02-04 19:19">
    <span role="heading" aria-level="2">V8å¼æ ç²¾åæ¼«æ¸¸æå--Ignitionç¯(ä¸) æä»¤ æ å¸§ æ§½ä½ è°ç¨çº¦å® åå­å¸å± åºç¡åå®¹</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        è¿æ¯ç¬¬äºç¯çä¸åé¨åï¼æä»¬ä¸»è¦å­¦ä¹ ignition V8çè§£éå¨çä¸äºåºç¡ååç½®ç¥è¯ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="äº-ignitionè§£éå¨ä¸">äº. Ignitionè§£éå¨(ä¸)</h1>
<p>è¿æ¯ç¬¬äºç¯çä¸åé¨åï¼æä»¬ä¸»è¦å­¦ä¹ ignition V8çè§£éå¨çä¸äºåºç¡ååç½®ç¥è¯ã</p>
<p>è¿é¨ååå®¹ï¼ä¸»è¦æ¯ä»¥äºè§£ä¸ºä¸»ï¼æä»¥å¨å­¦ä¹ çæ¶åï¼é¤äºç¬¬ä¸ç¯ä¸­è¯´ç æäºç»èåäºçç¥  æäºè¾¹çæåµåäºç®åè¡¨è¿°ä»¥å¤ï¼ä¹ä¸éè¦è¿å¤çæ·±å¥ã è¯»å®äºå°±å¥½ã ç®çå°±æ¯å¯¹äºignitionè§£éå¨çä¸ä¸ªç¥é­ã</p>
<p>å½ç¶ï¼æå´è¶£çæåä¹å¯ä»¥è®¤çéè¯»ï¼æ¬æåå®¹ä¾æ§ä¿æä¸å®çæ·±åº¦ï¼ä¾æ§æ¯åæ±é«åç¡®æ§ï¼ç¬¦åè§èï¼è´´åå®ç°ã ä½éæ³¨æçæ¯ï¼ä¸ºäºæç« çå¯è¯»æ§ï¼æå¯è½<strong>å¨åé¢</strong>ä»åç®åçéä¿çæè¿°ï¼<strong>å¨åé¢</strong>åäºè¯¦ç»çè®²è§£æè¿°ï¼æä»¥ï¼å¯è½çæåµä¸ï¼è¯·å°½ééè¯»å¨æã</p>
<p>éè¿ä¸ä¸ç¯çè§£æï¼æä»¬æéå·²ç»æ¿å°äºä¸ä»½å®æ´çASTæ½è±¡è¯­æ³æ ã ä½æ¯å¯¹äºcpuæ¥è¯´ï¼å®åªè®¤æä»¤ã</p>
<p>å¨æ©æçæ¬ç V8 ä¸­ï¼JavaScript ä»£ç å¨è§£æå®æåï¼ä¼ç´æ¥è¢«ç¼è¯ææ¬æºæºå¨ç æ§è¡ãè¿ç§æ¹å¼è¿è¡å¾å¾å¿«ï¼ä½æºå¨ç ä½ç§¯éå¸¸æ¯è¾å¤§ï¼ä¹ä¸å¤çµæ´»ã</p>
<p>å¨åæ¥ï¼ç´å°ç°å¨ï¼V8ä¸åç´æ¥çæåºå¤§å¤æçæºå¨ç ï¼èæ¯çæäºä¸ç§éå¸¸ç´§å å°å·§çä¸­é´ä»£ç ï¼å°±æ¯ å­èç  bytecodeã</p>
<p>ä½æ¯cpuä¹ä¸è®¤è¯å­èç ï¼V8ä½¿ç¨ ignition æ¨¡æäºä¸ä¸ªå¯ä»¥è¿è¡å­èç çç¯å¢ï¼ç¸å½äºä¸ä¸ªæå¶è½»éçèææºã</p>
<h2 id="1--ignitionæ¯ä»ä¹">1 . ignitionæ¯ä»ä¹</h2>
<p>Ignition æ¯ V8 å¼æéç<strong>å­èç è§£éå¨</strong>ï¼å®æ JavaScript ç AST ç¼æç´§åçå­èç ï¼ç¶åå¨èææºéè§£éæ§è¡ï¼åæ¶æ¶éåç§ä¿¡æ¯ï¼ä¾ä¼åå¨çææ´å¿«çæºå¨ç ã</p>
<p>ignitionçå·¥ä½  æä¸»è¦æ¯ä¸é¢ä¸ä¸ªï¼</p>
<p><strong>ç¿»è¯</strong>ï¼æ AST ç¿»è¯æå­èç ã</p>
<p><strong>æ§è¡</strong>ï¼å¨ä¸ä¸ªèæçå¯å­å¨æºéæ§è¡è¿äºå­èç ã</p>
<p><strong>æ¶éææ¥</strong>ï¼å¨æ§è¡è¿ç¨ä¸­ï¼å·å·è®°å½ç±»åä¿¡æ¯ï¼ä¸ºåç»­çä¼åååå¤ã</p>
<p>Ignition å¨è½¯ä»¶å±é¢æ¨¡æäºä¸å¥  <strong>ç±» CPU</strong> çå·¥ä½æ¨¡å¼ï¼<br>
å®ä¸æ¯åªç¨æ ï¼ä¹ä¸æ¯çº¯å¯å­å¨æºï¼èæ¯éç¨â<strong>èæå¯å­å¨ + ç´¯å å¨ï¼Accumulatorï¼</strong>âçæ¨¡å¼ã</p>
<p>è¿éçå¯å­å¨å¹¶ä¸æ¯ CPU éçç¡¬ä»¶å¯å­å¨ï¼èæ¯å½æ°æ å¸§éçä¸äºæ§½ä½ï¼slotsï¼ï¼åªæ¯æå®æ½è±¡æå¯å­å¨æ¥ä½¿ç¨ï¼çèµ·æ¥æ´å CPU å·¥ä½æ¹å¼ï¼ä½ææ¬éå¸¸ä½ã</p>
<p>Ignition è¿è®¾è®¡äºä¸ä¸ª<strong>è§£éå¨ç¬å çç´¯å å¨ acc</strong>ãå¤§å¤æ°è¿ç®çä¸­é´ç»æé½ä¼ä¸´æ¶å­æ¾å¨ acc éï¼è¿æ ·æä»¤åªéè¦æºå¸¦ä¸ä¸ªåæ°ï¼å°±ä¸ç¨å¨é¨ååºææçç®çå¯å­å¨ï¼å­èç å°±ä¼åå¾éå¸¸ç­å°ã</p>
<p>å½ä¸ä¸ªå½æ°å¼å§æ§è¡æ¶ï¼Ignition ä¼å¨åå­ç æ  (Stack) ä¸ååºä¸åå°çï¼ è·èµ·æ¥çæ¶åï¼æ¬è´¨ä¸å°±æ¯å¨é£åæ åå­ä¸ï¼ä¸åå°ææ°æ®ä»ä¸ä¸ªä½ç½®æ¬å°å¦ä¸ä¸ªä½ç½®ï¼è®¡ç®ï¼ç¶ååæ¬åå¦ä¸ä¸ªä½ç½®ï¼å°±æ¯è¿æ ·æ¬æ¥æ¬å»ãignitionæä½çå¹¶ä¸æ¯çæ­£çcpuåçå¯å­å¨ï¼å®æä½çæ¯åå­ä½ç½®/æ§½ä½ã</p>
<h2 id="2--å ä¸ªç®åçæä»¤">2 . å ä¸ªç®åçæä»¤</h2>
<p>ignitionå°±åä¸ä¸ªå¤å³å¹²æ´»çèå¸åï¼ä»æä¸ä¸ªéèº«è°åï¼ä»ä¸ç®¡å¹²ä»ä¹æ´»ï¼ä¸ç®¡éè¦ç¨ä»ä¹å·¥å·ï¼é½æ¯ä¼åç¨éèº«è°åéçä¸è¥¿ï¼ å¹²å®æ´»å¾å°çç»æï¼ä¹é¡ºæå¡åèªå·±çéèº«è°åéã</p>
<p><strong>èå¸åæä¸ªéèº«è°åï¼ ä¸ç®¡å¹²ä»ä¹ï¼é½ä¼åä½¿ç¨éèº«è°åã</strong></p>
<p><strong>ææ¾åç§ææçåææ¶ï¼ä¸æ ¼ä¸æ ¼çï¼ r0 ï¼r1ï¼r2.ãããç¼çå·ï¼ä¸é¢ææ»¡äºåææã</strong></p>
<p>å¥½äºï¼è¿å°±æ¯ignitionçæ¶æãå°±æ¯è¿ä¹ç®åã</p>
<p>è¿ä¸ªéèº«è°åï¼å°±æ¯èå¸åæéè¦çä¸è¥¿äºãå¸åå·æå¨é å®äºã</p>
<p>åå¦æ²¡æè¿ä¸ªéèº«åï¼æ³è±¡ä¸ä¸ï¼èæ¿ä¸è¾¾æä»¤éå¸¸å°å¦éº»ç¦ï¼</p>
<p>æ r1åææ¶ çä¸è¥¿ å r2åææ¶ çä¸è¥¿æ¿ä¸æ¥ï¼æ¼è£å¥½ï¼ç¶ååæ¾å r3åææ¶ å»</p>
<p>(ç±»ä¼¼äºæä»¤ï¼ADD r1, r2, r3)</p>
<p>â     èèå¸åæäºéèº«åï¼å°±ç®åäºï¼èæ¿åªéè¦åä¸å£°ï¼</p>
<p>âå»æ r2 åææ¶çä¸è¥¿æ¼è¿æ¥ï¼â</p>
<p>(æä»¤ï¼Add r2)</p>
<p>èæ¿å®å¨ä¸éè¦åºè¯âè·è°æ¼âï¼é»è®¤è·åéçä¸è¥¿æ¼ï¼ï¼ä¹ä¸éè¦åºè¯âæ¼å®æ¾åªâï¼é»è®¤æ¼å®è¿æ¾å¨åéï¼ã</p>
<p>è¿å°±æ¯ Ignition çæ ¸å¿èçç§ç±ãéè¿å¼ºè¡è§å®âéèº«åä¼åâï¼æ¯ä¸æ¡æä»¤é½è½çæå¥½å ä¸ªåæ°çä½ç½®ãæåä¸ä¸è¡ä»£ç è·ä¸æ¥ï¼çä¸çåå­å°±æ¯ä¸ä¸ªå¤©ææ°å­ã</p>
<p>è¿ä¸ªèå¸åç<strong>éèº«å å°±æ¯ç´¯å å¨</strong>ï¼åææ¶ å°±æ¯åå­ä½ç½®/æ§½ä½</p>
<ul>
<li>
<p><code>Lda</code> (Load Accumulator) ---Lda æ¯ä¸ªåç¼ï¼å®éä½¿ç¨æ¶ï¼åé¢å¯è·å¾å¤åæ³çæ°æ®æ¥æºï¼æ¯å¦ LdaSmi<code>ã</code>LdaConstant<code>ã</code>LdaUndefinedãLdar ç­ç­ããã</p>
<p>è¿æ¯ä½¿ç¨æé«é¢çæä»¤ï¼å ä¸ºææçæ´» é½å¾å¨éèº«åéå¹²ï¼æä»¥ç¬¬ä¸æ­¥ï¼åºæ¬ä¸é½æ¯æä¸è¥¿è£è¿åéã</p>
<ul>
<li><strong>æä»¤</strong>ï¼<code>Ldar r1</code> (Load Accumulator from Register r1)</li>
<li><strong>å¨ä½</strong>ï¼èå¸åèµ°å° r1 åææ¶ï¼æé£éçæææ¿ä¸æ¥ï¼<strong>å¡è¿éèº«åé</strong>ã</li>
<li><strong>ç¶æ</strong>ï¼æ­¤æ¶ï¼éèº«åéçä¸è¥¿ = r1 çä¸è¥¿ã</li>
<li>Ldar è¿ä¸ªæä»¤  å¾å¥½è®°å¿ï¼ldæ¯è£è½½ï¼aæ¯ç´¯å å¨ï¼ræ¯å¯å­å¨ï¼ldarå°±æ¯è£è½½ç´¯å å¨fromå¯å­å¨ï¼  <strong>æå¯å­å¨çåå®¹è£è¿ç´¯å å¨</strong>ã</li>
<li>Ldar r1  å°±æ¯æå¯å­å¨r1éçä¸è¥¿ è£è¿ç´¯å å¨ã</li>
<li>èå¸åær1çåæè£è¿éèº«åéã</li>
</ul>
</li>
<li>
<p><code>Star</code> (Store Accumulator)</p>
<p>æ´»å¹²å®äºï¼ç»ææ»ä¸è½ä¸ç´çå¨åéï¼å¾è¾åºå°æ¹å¹²ä¸ä¸ç¥¨ï¼æèæç»æå­èµ·æ¥ã</p>
<ul>
<li><strong>æä»¤</strong>ï¼<code>Star r2</code> (Store Accumulator to Register r2)</li>
<li><strong>å¨ä½</strong>ï¼èå¸åæ<strong>éèº«åé</strong>ååå å·¥å¥½çæåæåºæ¥ï¼æ¾å° r2 åææ¶ä¸å»ã</li>
<li><strong>ç¶æ</strong>ï¼æ­¤æ¶ï¼r2 åææ¶çä¸è¥¿ = éèº«åéçä¸è¥¿ã</li>
<li>star è¿ä¸ªæä»¤ï¼ä¹å¾å¥½è®°å¿ï¼stæ¯å¨å­ï¼aæ¯ç´¯å å¨ï¼ræ¯å¯å­å¨ï¼starå°±æ¯å­å¨ç´¯å å¨éçä¸è¥¿å°å¯å­å¨ã</li>
</ul>
</li>
<li>
<p><code>Add</code> / <code>Sub</code> ...</p>
<p>è¿æ¯çæ­£çå³é®æ­¥éª¤ã</p>
<ul>
<li><strong>æä»¤</strong>ï¼<code>Add r0</code></li>
<li><strong>å¨ä½</strong>ï¼èå¸åèµ°å° r0 åææ¶ï¼æ¿ä¸ªä¸è¥¿ï¼ç´æ¥è·<strong>éèº«åé</strong>åæ¬çä¸è¥¿è¿è¡åä½ï¼ç¸å ï¼ã</li>
<li><strong>ç¶æ</strong>ï¼éèº«åéçä¸è¥¿ = ååéçå¼ + r0 çå¼ã</li>
<li><strong>éç¹</strong>ï¼æ³¨æ <strong>ç»æä¾ç¶çå¨åé</strong>ï¼èå¸åå¹¶æ²¡ææ¥çå»å¨å­ç»æã</li>
</ul>
<p>æä»¤é½å¾ç®åï¼<strong>ld</strong>  <em>load</em>ï¼<strong>st</strong>  <em>store</em>ï¼<strong>a</strong>  <em>accumulator</em>ï¼<strong>r</strong>  <em>register</em></p>
<p>ç±»ä¼¼ç  ldglobal  stglobal ldarg0  ldcurrentcontext  ä¹é½å·®ä¸å¤ï¼</p>
<p>åºæ¬ä¸é½æ¯  å¨ä½+å¯¹è±¡  çæ¨¡å¼ã</p>
<p>å¦å¤éè¦æ³¨æçæ¯ï¼ç´¯å å¨ Accumulator éå¸¸ä¼åä½ accãè½ç¶å®å«âç´¯å å¨âï¼ä½åä¸ä¸è¦çè§£æå®åªè½åå æ³è¿ç®ã<strong>ä»æ¬è´¨ä¸è®²ï¼acc å°±æ¯è§£éå¨éå¯ä¸çâéç¨ä¸´æ¶å¯å­å¨â</strong>ï¼å½åè¿æ¡å­èç è¦å¤ççå¼ï¼æèè¿ç®åçä¸­é´ç»æï¼å ä¹é½ä¼ææ¶æ¾å¨è¿éã</p>
<p>acc éå¯ä»¥è£ä»»ä½ JavaScript çå¼ï¼æ¯å¦å¸¸éãå°æ´æ°ãå­ç¬¦ä¸²ãå¯¹è±¡å¼ç¨ã<code>undefined</code> ç­ãä¹æä»¥è¦è®¾è®¡è¿ä¹ä¸ä¸ªâç»ä¸çä¸´æ¶ä½ç½®âï¼å°±æ¯ä¸ºäºè®©å¤§å¤æ°å­èç åªéè¦åæâå¦ä¸ä¸ªåä¸è¿ç®çå¯¹è±¡æ¯è°âï¼èä¸ç¨æ¯æ¬¡é½é¢å¤å£°æå¤ä¸ªå¯å­å¨åæ°ï¼ä»è<strong>è®©å­èç æ´ç­ãæ´è§æ´ï¼ä¹è®©è§£éå¨å®ç°æ´ç®å</strong>ã</p>
</li>
</ul>
<pre><code>  Ldar r1   ; acc = r1
  Add r0    ; acc = acc + r0
  Star r2   ; r2 = acc
  
  ç´¯å å¨accçååã    æ¯ä¸æ¯éå¸¸ç®åã
</code></pre>
<h2 id="3--æ å¸§åæ§½ä½">3 . æ å¸§åæ§½ä½</h2>
<p>å¨ç¬¬ä¸é¨åè§£æç¯é  æä»¬ä¹æå°è¿ æ§½ä½ è¿ä¸ªæ¯è¯­ï¼ ä¸é¢åæå°äºï¼é£ä¹ï¼æ§½ä½å°åºæ¯ä»ä¹å¢ï¼</p>
<p><strong>æ§½ä½ï¼slotï¼å°±æ¯æ å¸§éä¸æ ¼ä¸æ ¼åºå®å¤§å°çâå­å¨ååâæâæ ¼å­âï¼ç¨äºæç´¢å¼å­æ¾å½æ°çåæ°ãå±é¨åéãä¸´æ¶å¼ãä»¥åå¶å®åæ°æ®ã</strong> å®ä¸ä»æ¯âä½ç½®âï¼è¿éå«äºå¤§å°ãç±»åï¼éå¸¸æ¯æé/Tagged å¼ï¼ãå°åè®¡ç®è§ååçå½å¨æè¯­ä¹ã</p>
<p>åå­å¯å¯»åçæå°åä½æ¯ 8bit å³ä¸å­èï¼ è½ç¶æå°ä½¿ç¨åä½æ¯8bit å³ä¸å­èãä½æ¯ï¼å ä¸ºéè¦å­èå¯¹é½ å æºå¨æéå¤§å°çè¦æ±ï¼æä»¥ å¨32ä½ç³»ç»ä¸ï¼  éè¦4å­èè¡¨ç¤ºæéï¼ 64ä½ç³»ç»ä¸  éè¦8å­èè¡¨ç¤ºæéã æ¯ä¸ªæ§½ä½çå¤§å°ï¼ä¹æ¯æç§æä½ç³»ç»æºå¨æéçå¤§å°æ¥ååçã å³   64ä½ç³»ç»ï¼ä¸ä¸ªæ§½ä½  å  8ä¸ªå­è ã åªæè¿æ ·ï¼<strong>64ä½ç³»ç»</strong>ä½¿ç¨æéå¯»åæ¶ï¼8å­èï¼å³64bitï¼æè½å¤è£å¾ä¸ä¸ä¸ªæéã</p>
<p>æä»¥ï¼æ¯ä¸ªæ§½ä½ï¼slotï¼å  8ä¸ªå­èå¤§å°ã</p>
<p>å½å½æ°å¼å§æ§è¡æ¶ï¼è¿è¡æ¶runtimeå¨æ ä¸ä¸ºå®åéä¸æ®µè¿ç»­åå­ä½ä¸º<strong>æ å¸§</strong>ãå¨ Ignition ä¸­ï¼æ å¸§å¤§è´åä¸ºä¸é¨åï¼<strong>åæ°åº</strong>ã<strong>åºå®å¤´é¨</strong>ï¼  <strong>å·¥ä½åº</strong> ãæ å¸§éçæ¯ä¸ªâæ ¼å­âç§°ä¸º<strong>æ§½ä½ï¼slotï¼</strong>ï¼æç´¢å¼å­æ¾å±é¨åéåä¸´æ¶å¼ï¼æ§½ä½çå¤§å°éå¸¸ç­äºæºå¨æéå¤§å°ï¼ <strong>64 ä½</strong>ä¸ä¸º 8 å­èã</p>
<p><strong>ç¹å«æ³¨æ</strong>ï¼åé¢æä»¬ä¸è¬å¹¶æ²¡ææç¡®çåºåæ å¸§éæ§½ä½åå­æ®µï¼ç°å¨æç¡®ä¸ä¸ï¼æä»¬<strong>ä»ä»æ¯æå·¥ä½åºä¸­</strong>æç´¢å¼çæ ¼å­ï¼<code>r0, r1, r2â¦</code>ï¼ç§°ä¸º<strong>æ§½ä½ï¼frame slotsï¼</strong>ãåºå®å¤´é¨éçå­æ®µï¼è¿åå°åãsaved FPãContextãBytecodeArray ç­ï¼æä»¬<strong>ä¸</strong>æå®ä»¬ç§°ä¸ºæ§½ä½ï¼åæ°ä¸è¬ç§°ä¸º argument slotsï¼<code>a0,a1</code>ï¼æåç¬æè¿°ã</p>
<p>ä¸¥æ ¼ä» V8 åå­è§è§æ¥çï¼æ å¸§ä¸­çæ¯ä¸ä¸ª 8 å­èå­å¨ååï¼æ è®ºæ¯ Contextãè¿åå°åè¿æ¯å±é¨åéï¼å¨æºç ä¸­é½ç»ç§°ä¸º <strong>Slot</strong>ã</p>
<p>ä½å¨è§£éå¨å­èç çè¯­å¥ç¯å¢ä¸­ï¼ä¸ºäº<strong>åºååè½</strong>ï¼</p>
<ul>
<li>æä»¬å°åºå®ä½ç½®ãç¨éåä¸çåºåç§°ä¸º <strong>âåºå®å¤´é¨å­æ®µâ</strong>ï¼å¦ Function, Contextï¼ã</li>
<li>æä»¬å°ç¨äºå­å¨å±é¨åéåä¸´æ¶ç»æãéè¿ç´¢å¼å¨æè®¿é®çåºåç¹ç§°ä¸º <strong>âå¯å­å¨æ§½ä½â</strong> æ <strong>âå±é¨åéæ§½ä½â</strong> æç®ç§°ä¸º <strong>æ§½ä½</strong> ã</li>
<li><strong>ææ¶åå¯è½ä¼ææ··ç¨ï¼å°æ ä¸æå­æ®µä¹ç§°ä¸ºæ§½ä½ï¼ä»è§èä»v8æºç ä¸æ¥è¯´ï¼å®å¨æ²¡æéè¯¯ï¼åªæ¯å ä¸ºæææèåå¿«äºï¼æ²¡ææç§æä»¬éå¸¸çæåè½åºåççº¦å®ç§°å¼ã</strong></li>
<li>å½ç¶ï¼ä½ å¯ä»¥æç§èªå·±çææ¿ï¼åºåæèä¸åºåï¼<strong>é½æ¯æ­£ç¡®ç</strong>ãåææ¯  ä½ è¦ç¥éè§å¯çè§è§çä¸åã</li>
</ul>
<p>ä¸é¢æä»¬è¯¦ç»ä»ç»ä¸ä¸æ å¸§çç»æã</p>
<p>æ ççé¿é¡ºåºï¼æ¯<strong>ä»é«å°åå°ä½å°å</strong>ï¼å³å¥æ æ©çå¨é«å°åï¼ æåå¥æ çå¤äºæ é¡¶ å¨ä½å°åã</p>
<p>æä»¬é¦åä»ç»ä¸ªæ¯è¯­ï¼Tagged Pointer</p>
<blockquote>
<h4 id="tagged-pointer--æ ç­¾æé">Tagged Pointer  æ ç­¾æé</h4>
<p>64ä½ç³»ç»ä¸­ï¼æ¯ä¸ªæ§½ä½é½æ¯ 8 å­èï¼64 ä½ï¼ï¼V8 å¨è¿éé¢å­æ°æ®æ¶ï¼ä½¿ç¨äºä¸ä¸ªç¼ç æå·§ï¼å«å <strong>Tagged Pointer (å¸¦æ ç­¾çæé)</strong>ã</p>
<p>å¨éæè¯­è¨ç«ï¼æ¯å¦ C++ è¿ç§éæè¯­è¨ï¼ç¼è¯å¨ç¥éåéæ¯ <code>int</code> è¿æ¯ <code>Object*</code>ãä½å¨ JavaScript ä¸­ï¼ç±»åæ¯å¨æçãå¦æ V8 ä¸ºæ¯ä¸ªåéé¢å¤å­ä¸ä¸ªâç±»åå­æ®µâï¼åå­æ¶èä¼ç¿»åã V8 çåæ³æ¯ï¼<strong>æç±»åä¿¡æ¯ç´æ¥ç¼ç è¿è¿ 64 ä½æ°æ®æ¬èº«ã</strong></p>
<p><strong>æ¹æ³å°±æ¯å¤ç¨âå¯¹é½çä¸çä½ä½â</strong> å¨ 64 ä½å¹³å°ä¸ï¼åå­å°åéå¸¸æ¯ <strong>8 å­èå¯¹é½</strong> çãåæ³å°åçäºè¿å¶å½¢å¼ï¼<strong>æä½çå ä½éå¸¸é½æ¯ 0</strong>ã V8 å°±æ¯ä½¿ç¨äºè¿äºé²ç½®çä½ä½ï¼ç¨æ¥æä¸ç±»åæ ç­¾Tagã</p>
<p><strong>Tagged Value çåç±»ï¼</strong> V8 ææ§½ä½éçæºå¨å­ç»ç§°ä¸º <strong>Tagged Value</strong>ï¼æ ¹æ®ä½ä½æ ç­¾ä¸åï¼åä¸ºä¸¤ç±»ï¼</p>
<p><strong>Smi (Small Integerï¼æ ç­¾ç«å³é)</strong></p>
<ul>
<li><strong>ç¹å¾</strong>ï¼æä½ä½éå¸¸ä¸º <code>0</code>ã</li>
<li><strong>å«ä¹</strong>ï¼è¿ <strong>ä¸æ¯</strong> æéï¼è¿ 64 ä½æ°æ®æ¬èº«å°±å­çä¸ä¸ªæ´æ°ã</li>
<li><strong>ä¼å¿</strong>ï¼æ´æ°ç´æ¥ä½å¨æ ä¸ï¼ä¸éè¦å»å éç³è¯·åå­ï¼éåº¦æå¿«ã</li>
<li><strong>è¿å</strong>ï¼ä½¿ç¨æ¶ï¼éè¿<strong>å³ç§» (Shift)</strong> è¿ç®å»ææ ç­¾ï¼å°±è½å¾å°æ´æ°å¼ã</li>
</ul>
<p><strong>Tagged Pointer (å å¯¹è±¡å¼ç¨)</strong></p>
<ul>
<li><strong>ç¹å¾</strong>ï¼æä½ä½éå¸¸ä¸º <code>1</code>ã</li>
<li><strong>å«ä¹</strong>ï¼è¿æ¯ä¸ä¸ªæåå åå­ä¸­å¯¹è±¡ï¼HeapObjectï¼ç <strong>å¼ºå¼ç¨</strong>ã</li>
<li><strong>æ³¨æ</strong>ï¼å®ä¸è½ç´æ¥å½åç©çå°åç¨ã</li>
<li><strong>è¿å</strong>ï¼ä½¿ç¨æ¶ï¼å¿é¡»éè¿<strong>ä½æ©ç  (Mask)</strong> è¿ç®å»ææ ç­¾ï¼Untagï¼ï¼è¿åæçº¯åçåå­å°åï¼æè½å»è®¿é®å éçå¯¹è±¡ã</li>
</ul>
<p>è¿æ ·ä½¿ç¨Tagä»¥åï¼ Tagged value å°±åç»æ°æ®ç©¿äºä¸ä»¶âé©¬ç²âãIgnition çä¸ç¼é©¬ç²ï¼æ ç­¾ä½ï¼ï¼å°±ç¥éæ¯æ´æ°è¿æ¯å¯¹è±¡ãè½ç¶ä½¿ç¨åå¿é¡»âè±é©¬ç²âï¼Untagï¼ï¼ä½è¿å¸¦æ¥çæ§è½æåååå­èçæ¯å·¨å¤§çã</p>
<p>å¦å¤éè¦æ³¨æï¼ä½¿ç¨tagæ è®°ï¼  è½ç´æ¥å¤å®çç±»åéåå¾å°ï¼ä¸»è¦æ¯ Smi æHeapObjectï¼ï¼æ´ç»çç±»åï¼éè¦è¯»åå¯¹è±¡å¤´æ¥è·åã</p>
</blockquote>
<p>é£ä¹ ï¼æ å¸§çç»ææ¯ææ ·çå¢ï¼å®çç»æå¦ä¸ï¼</p>
<ul>
<li>
<p>ç¬¬ä¸å±  åæ°åº Arguments</p>
<p>å½è°ç¨ä¸ä¸ªå½æ°æ¶ï¼è°ç¨èCalleréè¦ç»å®ä¼ å®åï¼åæ¶è¿æä¸ªéå½¢åæ°thisï¼è¿äºåå®¹ï¼é½å¨æ å¸§çç¬¬ä¸å±åæ°åºã</p>
<ul>
<li><strong>Receiver (this)</strong>ï¼
<ul>
<li>è¿æ¯ä¸ªéå½¢åæ°ãå½ä½ å <code>obj.func()</code> æ¶ï¼<code>obj</code> å°±æ¯ Receiverãå®æ¯åæ°åè¡¨éçéå½¢èå¤§å¥ã</li>
</ul>
</li>
<li><strong>Arguments (<code>a0</code>, <code>a1</code>...)</strong>ï¼
<ul>
<li>è¿å°±æ¯ <code>function foo(x, y)</code> éç <code>x</code> å <code>y</code>ã</li>
<li>Ignition ç»å®ä»¬ç¼çå·æ¯ <code>a0</code>, <code>a1</code>...</li>
<li>è¦æ³¨æçæ¯ï¼è¿éç <code>a</code> ä»£è¡¨ Argumentï¼ä¸è¦å Accumulator ææ··äºã</li>
</ul>
</li>
</ul>
</li>
<li>
<p>ç¬¬äºå±  åºå®å¤´é¨  Fixed header / fixed frame part</p>
<p>è¿æ¯æ´ä¸ªæ å¸§ä¸­æéè¦ãæå³é®çåºåã</p>
<p>æ¢ç¶ Ignition æ¯ä¸ªè½¯ä»¶æ¨¡æç CPUï¼é£ CPU è¿è¡æ¶éè¦çé£äºç¶æ  æ¯å¦âæç°å¨è¿è¡å°åªä¸è¡äºï¼âãâæçç¯å¢æ¯è°ï¼â  ãããç­ç­ä¿¡æ¯ï¼ é½æ¯å­å¨åªçï¼</p>
<p>æ²¡éï¼å°±å­å¨è¿å¿ï¼åºå®å¤´é¨ã</p>
<p>æ¯ä¸ªå½æ°æ å¸§çä¸­é´ï¼é½å¤¹çè¿ä¹ä¸åé·æä¸å¨çåºåï¼ä¿å­çç»´æèææºè¿è¡ç<strong>åæ°æ®</strong></p>
<p>å®éé¢çä¸»è¦åå®¹ï¼</p>
<ol>
<li>
<p><strong>Return Address (è¿åå°å)</strong>ï¼</p>
<ul>
<li><em>ä½ç¨</em>ï¼ç­è¿ä¸ªå½æ°æ§è¡å®ï¼åºå±è°ç¨æ å°±ä¼æ ¹æ®è¿ä¸ªè¿åå°åï¼è·³åè°ç¨å¤ç»§ç»­æ§è¡ã</li>
<li>è¿éè°æ³¨æï¼è¿åå°åï¼ æ¯æ§å¶æµï¼æ¯è¿åçåºè¯¥å°ä»£ç çåªä¸ªä½ç½®å»ç»§ç»­æ§è¡ã</li>
</ul>
</li>
<li>
<p><strong>Caller's Frame Pointer (ä¸ä¸å±æ å¸§æé)</strong>ï¼</p>
<ul>
<li>
<p><em>ä½ç¨</em>ï¼é¾è¡¨æéãå½åå½æ°æ§è¡å®ãè°ç¨èçæ å¸§å¨åªéï¼</p>
</li>
<li>
<p>è¿æ ·ä¾æ§è¦æ³¨æï¼è¿ä¸ªæéï¼æçæ¯æ°æ®ï¼ä¸ä¸ªå­æ®µè¿åå°åï¼æ¯æ§å¶æµçè¿åï¼è¿é</p>
</li>
<li>
<p>çä¸å±æ å¸§æéï¼æ¯æ§å¶æµè¿åä»¥åï¼ç»§ç»­æ§è¡ï¼ åºè¯¥ä»åªéå»æ¾åéï¼è¿åçæ¯é£ä¸ª</p>
</li>
<li>
<p>æ å¸§ï¼å¯ä»¥çè§£ä¸ºæ°æ®ã</p>
</li>
<li>
<p>å¨çè§£ä¸ï¼è¿å¯ä»¥å¤§è´è®¤ä¸ºï¼</p>
</li>
<li>
<p>è¿åå°åæ¯ç­è¿ä¸ªå½æ°æ§è¡å®ï¼è¦åå°åªä¸è¡ç»§ç»­æ§è¡ä»£ç ï¼ä¹å°±æ¯<strong>æ§å¶æµ</strong>è¯¥è·³ååªéãè¿æ¯æ¶é´ä¸çè¿å ï¼ä»£ç ç»§ç»­ä»åªéè·ã</p>
<p>ä¸ä¸å±æ å¸§æéæ¯è°ç¨æçé£ä¸ªå½æ°ï¼å®çæ å¸§ä»åªéå¼å§ï¼<br>
è¿æ¯ç©ºé´ä¸çè¿å ï¼è¦å»åªä¸ååå­éç»§ç»­è®¿é®å±é¨åéåä½ç¨åæ°æ®ã</p>
</li>
</ul>
</li>
<li>
<p><strong>Context (ä¸ä¸ææé)</strong></p>
<ul>
<li>
<p><em>è¿æ¯ä»ä¹</em>ï¼å®æå <strong>å åå­ (Heap)</strong> ä¸­ä¸ä¸ªå«å <code>Context</code> çå¯¹è±¡ã</p>
</li>
<li>
<p>ä¸ºä»ä¹è¦å®ï¼</p>
<p>å¦æå½æ°éç¨å°çåéæ¯èªå·±ç let aï¼ç´æ¥å»æ ä¸æ¾ï¼r0ï¼ã</p>
<p>ä½å¦æç¨å°äºé­ååéï¼å¤å±å½æ°çåéï¼ï¼Ignition å¿é¡»æ¿çè¿ä¸ª Context æéï¼å»å éçä¸ä¸æé¾è¡¨ä¸ä¸å±å±æ¾ã</p>
</li>
<li>
<p><em>å°ä½</em>ï¼å®æ¯è¿æ¥ <strong>âæ ä¸çï¼ä¸´æ¶æ°æ®ï¼â</strong> å <strong>âå ä¸çï¼æä¹æ°æ®ï¼â</strong> çå¯ä¸æ¡¥æ¢ã</p>
</li>
<li>
<p>è¿ä¸ªæ¦å¿µéå¸¸éè¦ï¼å¼å¾æä»¬æ·±å¥äºè§£ãå¦å¤æä¸å¥ï¼è½ç¶è¯´  è¿æ´ä¸ªé¨åé½å¯ä»¥äºè§£ä¸ºä¸»ï¼ä½æ¯å¦æè®¤çå­¦ä¹ ï¼è½å¤ææ¡ï¼è¿æ¯æå¾å¤§çç¨å¤ãæ¯å¦è¿ä¸ªæ å¸§ï¼å¯¹äºjså¼åè¿æ¯å¾éè¦çã</p>
</li>
<li>
<p>ä¸é¢æä¸ªä¸ä¸å±æ å¸§æéï¼è¿éåæä¸ªä¸ä¸ææéï¼æä¹æ­£ç¡®èæ·±å¥ççè§£ä»ä»¬å¢ï¼</p>
</li>
<li>
<p>**ä¸ä¸å±æ å¸§æéæ¯âå¨æè°ç¨é¾â **</p>
<ul>
<li><strong>åç­çé®é¢ï¼</strong> âææ¯è¢«è°è°ç¨çï¼â</li>
<li><strong>æååªéï¼</strong> æå<strong>æ ï¼Stackï¼</strong>ä¸çä¸ä¸çº§æ å¸§ã</li>
<li><strong>ä½ç¨ï¼</strong> å½æ°æ§è¡å®ï¼returnï¼åï¼åºå±ä¼æ ¹æ®è¿åå°åè·³åè°ç¨èç»§ç»­æ§è¡ï¼èä¸ä¸å±æ å¸§æéåç¨æ¥æ¢å¤è°ç¨èçæ å¸§å¸å±ï¼ç¨äºç»§ç»­è®¿é®å®çå±é¨åéç­æ°æ®ã</li>
</ul>
<p>**Context æ¯âéæä½ç¨åé¾â **</p>
<ul>
<li><strong>åç­çé®é¢ï¼</strong> âææ¯è¢«å®ä¹å¨åªéçï¼â</li>
<li><strong>æååªéï¼</strong> æå<strong>å ï¼Heapï¼</strong>ä¸ç Context å¯¹è±¡ã</li>
<li><strong>ä½ç¨ï¼</strong> å®æ¯<strong>æ°æ®æµ</strong>çæ¥æ¾è·¯çº¿ãå½å½æ°è®¿é®ä¸ä¸ªä¸å¨èªå·±åé¨çåéï¼èªç±åéï¼æ¶ï¼V8 ä¼é¡ºçè¿æ¡é¾å»æ¥æ¾ã</li>
</ul>
</li>
<li>
<p>çè§£çå³é®ç¹</p>
</li>
<li>
<p><strong>ä¸ä¸å±æ å¸§æåçæ¯æ åå­</strong>ï¼æ å¸§æ¯ä¸´æ¶çï¼å½æ°ä¸è¿åï¼æ å¸§å°±éæ¯äºã</p>
<p><strong>Context æåçæ¯å åå­</strong>ï¼è¿æ¯ä¸ºäºå®ç° JavaScript ç<strong>é­å</strong>ç¹æ§ã</p>
</li>
</ul>
</li>
<li>
<p><strong>Function / Frame Marker (å½æ°/å¸§ç±»åæ è®°)</strong>ï¼</p>
<ul>
<li>
<p>è¿ä¸ªå­æ®µç<strong>ä½ç½®</strong>å¨<code>[FP - 16]</code>  <strong>è¯·æ³¨æ</strong>  è¿éçåç§»å¼ 16 ä»æ¯<strong>ç¤ºæ</strong>ã  è¿ç§è¡¨ç¤ºæ¹æ³ï¼åé¢ä¼è¯¦ç»ä»ç»ã</p>
</li>
<li>
<p>è¿æ¯ä¸ä¸ªå·æ<strong>å¤ææ§ (Polymorphic)</strong> çå³é®æ§½ä½ãå®ç¨äºå½åæ å¸§çèº«ä»½è¯å«ãV8 å¼æå©ç¨è¿ä¸ªæ§½ä½æ¥åºåå½åæ å¸§æ¯å±äºæ åç JavaScript å½æ°è°ç¨ï¼è¿æ¯å±äºå¼æåé¨ç C++ è°ç¨ã</p>
</li>
<li>
<p>V8 çæ éåå¨ï¼Stack Walkerï¼å¨æ«æå æ æ¶ï¼ä¾å¦è¿è¡ GC æ è®°ãçæéè¯¯å æ æåä¼åæ¶ï¼ï¼ä¼è¯»åè¯¥æ§½ä½çå¼ï¼å¹¶æ ¹æ® <strong>æéæ è®°ä½ (Tag Bit)</strong> è¿è¡å¤æ­ï¼</p>
<ul>
<li><strong>å¦ææ¯å¯¹è±¡æéï¼Heap Objectï¼</strong>ï¼å¤å®ä¸º <strong>Interpreted Frame</strong>ï¼è§£éå¨å¸§ï¼ã</li>
<li><strong>å¦ææ¯å°æ´æ°ï¼Smiï¼</strong>ï¼å¤å®ä¸º <strong>Internal Frame</strong>ï¼åé¨å¸§ï¼ã</li>
</ul>
</li>
<li>
<p>å·æä¸¤ç§å¯è½çç¶æï¼</p>
</li>
<li>
<p>ç¶æ Aï¼å­æ¾ <code>JSFunction</code> (Closure)</p>
<ul>
<li><strong>åºæ¯</strong>ï¼å½æ§è¡å¸¸è§ JavaScript ä»£ç æ¶ã</li>
<li><strong>åå®¹</strong>ï¼æåå½åæ­£å¨æ§è¡çå½æ°å¯¹è±¡ï¼é­åï¼çæéã</li>
<li><strong>ä½ç¨</strong>ï¼
<ol>
<li>ä½ä¸º<strong>èµæºå¥å£</strong>ï¼è§£éå¨éè¿å®è®¿é® <code>SharedFunctionInfo</code>ï¼è·åå­èç ï¼å <code>FeedbackVector</code>ï¼è·åä¼ååé¦ï¼ã</li>
<li>è¿æ¥<strong>å ä¸æ </strong>ï¼ä¿æå¯¹å ä¸å½æ°å¯¹è±¡çå¼ºå¼ç¨ï¼é²æ­¢è¢« GC åæ¶ã</li>
</ol>
</li>
</ul>
<p><strong>ç¶æ Bï¼å­æ¾ <code>StackFrame::Type</code> (Marker)</strong></p>
<ul>
<li><strong>åºæ¯</strong>ï¼å½æ§è¡ V8 åé¨ä»£ç ï¼å¦ <code>EntryFrame</code>, <code>ConstructFrame</code>, <code>BuiltinFrame</code>ï¼æ¶ã</li>
<li><strong>åå®¹</strong>ï¼ä¸ä¸ªæä¸¾å¼ï¼Smiï¼ï¼æ è¯å·ä½çå¸§ç±»åã</li>
<li><strong>ä½ç¨</strong>ï¼
<ol>
<li><strong>è·¯æ ä½ç¨</strong>ï¼åè¯æ éåå¨å¦ä½è§£æå½åå¸§çå¶ä½é¨åï¼ä¸åç±»åçåé¨å¸§ï¼å¸å±å¯è½ä¸åï¼ã</li>
<li><strong>è¾¹ççå®</strong>ï¼æ è®° JS ä»£ç ä¸ C++ ä»£ç çè½¬æ¢è¾¹ç</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Bytecode Array (å­èç æ°ç»æé)</strong>ï¼</p>
<ul>
<li>
<p><strong>è¿ä¸ªå­æ®µçä½ç½®ï¼</strong> <code>[FP - 24]</code>   ä¾æ§è¯·æ³¨æï¼åç§»å¼ 24 ä»æ¯ç¤ºæã</p>
</li>
<li>
<p><strong>è¿ä¸ªå­æ®µçåå®¹ï¼</strong> ä¸ä¸ªæåå åå­ä¸­ <code>BytecodeArray</code> å¯¹è±¡ç <strong>Tagged Pointer</strong>ã</p>
</li>
<li>
<p><strong>å®ä¹ï¼</strong> å®æ¯è§£éå¨ Ignition çæ­£âè¯»åâåâæ§è¡âçæä»¤åºåæºå¤´ã</p>
</li>
<li>
<p>è¿ä¸ªå­æ®µæ¯ä¸ä¸ªæéï¼æåå ï¼Heapï¼ä¸çä¸ä¸ª<code>BytecodeArray</code> å¯¹è±¡ã</p>
<p>ä¹æä»¥å« <code>Array</code>ï¼æ¯å ä¸ºå®ç<strong>ä¸»ä½é¨å</strong>ç¡®å®æ¯ä¸ä¸²è¿ç»­çãåé¿çå­èåºåã</p>
<p>å¨ V8 çåºå± C++ å®ä¹ä¸­ï¼å¡æ¯ç¬¦å <strong>âå®é¿å¤´é¨ + åé¿å°¾é¨â</strong> ç»æçå¯¹è±¡ï¼éå¸¸é½ä»¥æ­¤å½åã</p>
<ul>
<li><strong>æ®éå¯¹è±¡ (<code>JSObject</code>)</strong>ï¼å¤§å°éå¸¸æ¯åºå®çï¼æèç± Map æè¿°ï¼ã</li>
<li><strong>æ°ç»ç±»å¯¹è±¡ (<code>FixedArray</code>, <code>ByteArray</code>)</strong>ï¼
<ol>
<li>å®æ¯<strong>åé¿</strong>çï¼å¨åéæ¶å³å®å¤§å°ï¼ã</li>
<li>å®ç<strong>ä¸»è¦åå®¹</strong>æ¯å¯ä»¥éè¿ç´¢å¼ï¼Indexï¼è®¿é®çåºåã</li>
</ol>
</li>
</ul>
<p>ä¹æä»¥å« <code>BytecodeArray</code> æ¯ä¸ºäºå¼ºè°å®ç<strong>å­å¨å½¢æ</strong>æ¯çº¿æ§çå­èåºåã</p>
</li>
</ul>
</li>
<li>
<p><strong>Bytecode Offset (å­èç åç§»é / PC)</strong>ï¼</p>
<ul>
<li><em>ä½ç¨</em>ï¼<strong>ç¨åºè®¡æ°å¨</strong>ãè®°å½å½åæ§è¡å°ç¬¬å æ¡æä»¤äºã</li>
<li><strong>ä½ç½®ï¼</strong> <code>[FP - 32]</code> (å³ <code>StandardFrameConstants::kBytecodeOffset</code>)  ï¼åç§»å¼32ï¼ä»ä¸ºç¤ºæï¼å¹¶éç¡®å®å¼ã</li>
<li><strong>å½¢å¼ï¼</strong> <strong>Smi (å°æ´æ°)</strong>ã</li>
<li><strong>å«ä¹ï¼</strong> å®è®°å½äºå½åæ§è¡å°äº <code>BytecodeArray</code> ä¸­ç<strong>ç¬¬å ä¸ªå­è</strong>ã</li>
<li><em>ç»è</em>ï¼å¨æ­£å¸¸è§£éæ§è¡æé´ï¼PC ç¶æå¸¸é©»å¨<strong>çå®çç©çå¯å­å¨</strong>ï¼å¨ä¹ä¸­ä¸åçåå¨ï¼åªæå¨éè¦å¤é¨å¯è§ææ¢å¤æ¶ï¼GC/ä¸­æ­/æ­ç¹/åä¼å/è¿å¥ runtime ç­ï¼ï¼è§£éå¨ä¼æå¯å­å¨çå¼ååæ å¸§ BytecodeOffset å­æ®µï¼ãæ¢å¤æ¶ä¼æå®åè£åç©çå¯å­å¨ã</li>
</ul>
</li>
</ol>
</li>
<li>
<p>ç¬¬ä¸å±   å·¥ä½åº  Work Area / Virtual Registers</p>
<p>è¿æ¯æ å¸§ä¸­ä½äºåºå®å¤´é¨åé¢ãåä½å°åå»¶ä¼¸çåºåã</p>
<p>Ignition å°è¿æ®µè¿ç»­çåå­æ§½ä½ï¼ç»å®ä»¬ç¼ä¸å·ï¼<code>r0</code>, <code>r1</code>, <code>r2</code>...</p>
<p>è½ç¶å®ä»¬å¨ç©çä¸åªæ¯è¿ç»­ç 8 å­èåå­æ ¼å­ï¼ä½å¨é»è¾ä¸ï¼å®ä»¬éå¸¸ååæäºä¸ç§æªç¶ä¸åçç¨éã</p>
<h4 id="1-æ¾å¼å±é¨åé-explicit-locals">1. æ¾å¼å±é¨åé (Explicit Locals)</h4>
<p>è¿æ¯æå¥½çè§£çé¨åãå®ä»¬ç´æ¥å¯¹åºä½ å¨ JavaScript ä»£ç ä¸­å£°æçå±é¨åéã</p>
<p>çæå¨ï¼BytecodeGeneratorï¼ä¼æç§ç¹å®ç®æ³ï¼éå¸¸ä¸å£°æé¡ºåºç¸å³ï¼ä¸ºè¿äºåéåéæ§½ä½ã</p>
<ul>
<li>ç¤ºä¾</li>
</ul>
<p>function demo() {<br>
var name = 'v8';  // ç¼è¯å¨å³å®ï¼åéç» r0<br>
let age = 10;     // ç¼è¯å¨å³å®ï¼åéç» r1<br>
}</p>
<p>å½ä»£ç æ§è¡å°è¿éæ¶ï¼<code>r0</code> æ§½ä½éå°±å¡«å¥äº <code>"v8"</code> çæéï¼<code>r1</code> æ§½ä½éå¡«å¥äº <code>10</code> ç Smi å¼ã</p>
<ul>
<li>
<p><strong>å³é®ç¹ï¼ä½ç¨ååæ (Scope Analysis)</strong></p>
<p><strong>è¦æ³¨æ</strong>  å¹¶ä¸æ¯ä½ åçææå±é¨åéé½è½ä½å¨è¿ä¸ªâæ ä¸çå·¥ä½åºâã</p>
<p>å¨çæå­èç ä¹åï¼V8 ä¼åè¿è¡ä¸æ¬¡ <strong>ä½ç¨ååæ</strong>ã</p>
<ul>
<li><strong>å¤æ­æ å</strong>ï¼å¦æä¸ä¸ªåéè¢«åé¨å½æ°ï¼é­åï¼<strong>æè· (Captured)</strong> äºï¼å®å°±ä¸è½ä½å¨æ ä¸</li>
<li><strong>åå </strong>ï¼æ å¸§çå½æ¯æéçï¼å½æ°æ§è¡å®å°±éæ¯äºãä½é­åå¯è½å¨å½æ°æ§è¡å®åè¿éè¦è®¿é®è¿ä¸ªåéã</li>
<li><strong>ç»æ</strong>ï¼è¢«æè·çåéä¼è¢«è¯·å°å åå­ç <strong>Context å¯¹è±¡</strong> ä¸­ã</li>
<li><strong>ç»è®º</strong>ï¼æä»¥ï¼è½å®ç¨³ä½å¨ <code>r0, r1</code> éçï¼é½æ¯èº«å®¶æ¸ç½çã<strong>æªè¢«æè·</strong>çå±é¨åéã</li>
</ul>
</li>
</ul>
<h4 id="2-éå¼ä¸´æ¶åé-implicit-temporaries">2. éå¼ä¸´æ¶åé (Implicit Temporaries)</h4>
<p>è¿æ¯å¨æºä»£ç éå®å¨çä¸å°ï¼ä½æºå¨æ§è¡æ¶å¿é¡»å­å¨çåéãè¿ä¹æ¯ <strong>å¯å­å¨åé (Register Allocation)</strong> ç®æ³å¤§æ¾èº«æçå°æ¹ã</p>
<ul>
<li>
<p><strong>ä¸ºä»ä¹è¦ä¸´æ¶åéï¼</strong></p>
<p>æ³è±¡ä¸ä¸è®¡ç® <code>var x = a + b + c;</code></p>
<p>Ignition çç´¯å å¨ï¼èå¸åçéèº«åï¼åªæä¸ä¸ªã</p>
<ol>
<li>åæ <code>a</code> æ¿è¿åï¼æ <code>b</code> å è¿æ¥ãåéç°å¨æ¯ <code>(a+b)</code>ã</li>
<li>ä¸ä¸æ­¥è¦å  <code>c</code>ãæä»¤è¦æ± <code>Add c</code>ã</li>
<li><strong>åçå²çª</strong>ï¼å¦æ <code>c</code> çè·åè¿ç¨å¾å¤æï¼æ¯å¦ <code>c</code> æ¯ä¸ªå½æ°è°ç¨ <code>getC()</code>ï¼ï¼é£ä¹å¨æ§è¡ <code>getC()</code> çè¿ç¨ä¸­ï¼ç´¯å å¨ä¼è¢«åå¤ä½¿ç¨ãè¦çã</li>
<li><strong>å¦ä½è§£å³</strong>ï¼å¿é¡»åæ <code>(a+b)</code> çç»ææ¾ä¸ªæ ¼å­ <strong>æå­ Spill</strong> èµ·æ¥ã</li>
</ol>
</li>
<li>
<p><strong>ç©çå­å¨</strong>ï¼</p>
<p>Ignition ä¼å¨å±é¨åéåé¢ï¼ååºä¸äºæ ¼å­ä½ä¸º <strong>ä¸´æ¶å¯å­å¨</strong>ã</p>
<p>è¿äºæ ¼å­å°±åèå¸åæè¾¹çâå°é»æ¿âã</p>
<ul>
<li><strong>å¤ç¨æ§</strong>ï¼è¿è¡ä»£ç ç®å®äºï¼è¿å¼ âå°é»æ¿âæ¦å¹²åï¼ç«å»ç»ä¸ä¸è¡ä»£ç å¤ç¨ãæä»¥å³ä½¿ä»£ç å¾é¿ï¼åªè¦ä¸åæ¶éè¿å¤§éä¸­é´ç»æï¼Frame Size ä¹ä¸ä¼å¾å¤§ã</li>
</ul>
</li>
</ul>
<h4 id="3-ç¥ç§çæ´-the-hole">3. ç¥ç§çæ´ (The Hole)</h4>
<p>è¿æ¯ ES6 å¼å¥ <code>let/const</code> åï¼V8 å¨åºå±å®ç° <strong>TDZ (ææ¶æ§æ­»åº)</strong> çæç¡¬æ ¸ææ®µã</p>
<p>å¨ç¬¬ä¸é¨åè§£æç¯ä¸­ï¼æä»¬å·²ç»è¯¦ç»å­¦ä¹ äºè¿ä¸ª ä¼å¹å¨å­çè­¦å«theholeï¼å¿è®°äºçæåï¼å¯ä»¥å¤ä¹ ä¸ä¸ç¬¬ä¸ç¯ä¸­çç¸å³åå®¹ãè¿éæä»¬ç¥å¾®çåè®²ä¸ä¸ã</p>
<p>å¨æ å¸§ååè¢«åå»ºï¼ä½ä»£ç è¿æ²¡æ§è¡å° <code>let a = ...</code> è¿ä¸è¡æ¶ï¼<code>rX</code> æ§½ä½éæ¾çæ¯ä»ä¹ï¼</p>
<ul>
<li>
<p><strong>å¯¹äº <code>var</code></strong>ï¼</p>
<p>V8 ä¼æå¯¹åºçæ§½ä½åå§åä¸º <code>undefined</code>ãæä»¥å¨èµå¼åè®¿é®å®ï¼æ¿å°çå°±æ¯ <code>undefined</code>ï¼åéæåï¼ã</p>
</li>
<li>
<p><strong>å¯¹äº <code>let / const</code></strong>ï¼</p>
<p>V8 ä¼æå¯¹åºçæ§½ä½å¡«å¥ä¸ä¸ªç¹æ®ç <strong>ä¼å¹å¨å­çè­¦å«</strong>ï¼å¨åé¨è¢«ç§°ä¸º <strong><code>The Hole</code></strong>ã</p>
</li>
<li>
<p><strong>æ§è¡æ¶çæ£æ¥æºå¶</strong>ï¼</p>
<p>Ignition å¨æ§è¡è¯»ååéçæä»¤ï¼å¦ <code>LdaRep</code>ï¼æ¶ï¼åç½®äºä¸æ®µå°é»è¾ï¼</p>
<p>// ä¼ªä»£ç <br>
value = load(r1);<br>
if (value == The_Hole_Value) {<br>
throw ReferenceError("Cannot access before initialization");<br>
}</p>
<p>TDZ å¹¶ä¸é¾çè§£ï¼å®å¨ç©çå±é¢ä¸ï¼å°±æ¯ä¸ä¸ªæ§½ä½éæ¾ç <code>The Hole</code>ï¼èè§£éå¨å¨è¯»åæ¶ä¸ä»è¯»æ°æ®ï¼è¿é¡ºæåäºä¸æ¬¡å®å¨æ£æ¥ï¼å¦ææ¸å°çæ¯è­¦å«ï¼å¨å­å°±åã</p>
</li>
</ul>
<h4 id="4-å¯»åæºå¶å¦ä½æ¾å°-r5">4. å¯»åæºå¶ï¼å¦ä½æ¾å° <code>r5</code>ï¼</h4>
<p>å·¥ä½åºåªæ¯ä¸æ®µè¿ç»­çåå­ï¼Ignition æä¹ç¥é <code>r5</code> å¨åªï¼</p>
<p>è¿å°±è¦ç¨å°æ±ç¼éç <strong>åºåå¯»å</strong> äºã</p>
<ul>
<li>
<p><strong>åºåç¹</strong>ï¼<strong>FP (Frame Pointer)</strong>ï¼æååºå®å¤´é¨çç¹å®ä½ç½®ã</p>
</li>
<li>
<p>ææåå¯è½ä¼æçé®äºï¼åé¢è¯´æ å¸§æ3é¨åï¼ç¬¬ä¸é¨åæ¯åæ°åºï¼å¯æ¯ä¸ºä»ä¹FPåºåç¹æååºå®å¤´é¨ ï¼èä¸æ¯æååæ°é¨åã</p>
</li>
<li>
<p>åæ°ç©ºé´æ¯<strong>è°ç¨è</strong>çåºåï¼å æ­¤å¨è¯­ä¹ä¸å®å±äºcaller çé¨å ï¼èä¸æ¯ callee ç¨æ¥åéæ¬å°åé/ä¸´æ¶ç workspaceãFP ä½ä¸ºè¢«è°ç¨èçæ å¸§åºåç¹ï¼éå¸¸æ¯ä¸åæ¬åæ°åºçã</p>
</li>
<li>
<p><strong>è®¡ç®å¬å¼</strong>ï¼</p>
<p>ç±äºæ æ¯åä½å°åå¢é¿çï¼æä»¥å¯å­å¨çå°åæ¯ FP åå»ä¸ä¸ªåç§»éã</p>
<p>Address(rn) = FP - fixed_header_size - (n * slot_size)</p>
<p>å¶ä¸­ <code>fixed_header_size</code> æ¯åºå®å¤´é¨çå­èé¿åº¦ï¼<code>slot_size</code> éå¸¸ç­äºæºå¨æéå¤§å°ï¼å¨ 64 ä½ç³»ç»ä¸å¸¸ä¸º 8 å­èï¼</p>
</li>
<li>
<p><strong>ç¤ºä¾ï¼</strong></p>
<ul>
<li><code>FP</code> æåè¿éã</li>
<li>å¾ä¸èµ° 8 å­è... æ¯ <code>Context</code> <code>[FP-8]</code>ã</li>
<li>åå¾ä¸... æ¯ <code>Function</code> <code>[FP-16]</code>ã</li>
<li>åå¾ä¸... æ¯ <code>BytecodeArray</code> <code>[FP-24]</code>ã</li>
<li>åå¾ä¸... æ¯ <code>BytecodeOffset</code> <code>[FP-32]</code>ã<strong>(åºå®å¤´é¨ç»æ)</strong></li>
<li><strong>åå¾ä¸... ç»äºå°äºå·¥ä½åºç r0</strong> <code>[FP-40]</code>ã</li>
<li><code>r0</code> åå¾ä¸ 8 å­èæ¯ <code>r1</code>ã</li>
</ul>
<p>æä»¥ï¼å­èç éçç®åæä»¤ <code>Ldar r5</code>ï¼ç¿»è¯å°åºå± CPU å¨ä½ï¼å°±æ¯å»è¯»æ´æ·±å¤çåå­å°åã</p>
</li>
</ul>
</li>
</ul>
<h2 id="4--è°ç¨çº¦å®ååå­å¸å±">4 . è°ç¨çº¦å®ååå­å¸å±</h2>
<p>éè¿åé¢çå­¦ä¹ ï¼æä»¬å·²ç»å¤§è´äºè§£äºæ å¸§çåå®¹ï¼ç°å¨æä»¬å°±éè¦å¨èå­ä¸­å»ºç«èµ·å¨æçæ å¸§æ¨¡åã</p>
<ul>
<li>
<p>å»ºç«æä»¬èªå·±çå¿æºæ¨¡åï¼åå­çæ³è±¡å¾</p>
<p>é£ä¹ æä»¬æä¹æ³è±¡åå­å¢ï¼ æ¢¯å­ï¼é«è¸å¥äºçæ¢¯å­ï¼ä¸æ ¼ä¸æ ¼çä»£è¡¨åå­ååã</p>
<p><strong>å°é¢ï¼æåºä¸ï¼</strong>ï¼æ¯ <strong>é«å°å</strong>ï¼æ¯å¦ <code>0xFF...</code>ï¼ãå¯¹äºæ å¸§æ¥è®²ï¼è¿æ¯ç¨³åºçå°åºã</p>
<p><strong>å¤©ç©ºï¼å¾ä¸çï¼</strong>ï¼æ¯ <strong>ä½å°å</strong>ï¼æ¯å¦ <code>0x00...</code>ï¼ãè¿æ¯å»¶ä¼¸ç©ºé´ã</p>
<p>æåºä¸æ¯é«å°åï¼è¶å¾ä¸ï¼å°åè¶ä½ã</p>
<p>ææåå¯è½ä¼é®ï¼âä¹¦ä¸æè V8 æºç æ³¨ééï¼éå¸¸é½æ¯ç»âé«å°åå¨ä¸ï¼ä½å°åå¨ä¸âï¼æ æ¯âåä¸çé¿âçï¼ä¸ºä»ä¹æä»¬è¦åçæ¥ï¼â</p>
<p>è¿å¶å®æ¯ä¸ºäºè´´å<strong>ç´è§</strong>ã å¦æä½ ä½¿ç¨è¿ OllyDbgãx64dbg æ IDA ç­è°è¯å·¥å·ï¼ä½ ä¼åç°å®ä»¬çåå­è§å¾éå¸¸æ¯è¿æ ·çï¼</p>
<ul>
<li><strong>ä¸é¢</strong> æ¾ç¤ºçæ¯ <strong>ä½å°å</strong>ã</li>
<li><strong>ä¸é¢</strong> æ¾ç¤ºçæ¯ <strong>é«å°å</strong>ã</li>
</ul>
<p><strong>è¿ç§è§è§çå¥½å¤æå¶ç´è§ï¼</strong></p>
<ul>
<li><strong>å¥æ  Push</strong>ï¼å°±åçæ¥¼ä¸æ ·ï¼å¨ç°æçæ¥¼é¡¶ä¸ï¼<strong>å¾ä¸</strong> åçä¸å±ï¼å°ååä½/åå°ï¼ã</li>
<li><strong>åºæ  Pop</strong>ï¼å°±åææ¥¼ä¸æ ·ï¼ææä¸é¢çä¸å±ææï¼å°åååé«/åå¤§ï¼ã</li>
<li><strong>æ åº</strong>ï¼å¨æä¸é¢ï¼é«å°åï¼ï¼éå¸¸å­æ¾çè°ç¨èçç¯å¢ï¼å¨ä¸ä¸ªæ å¸§ä¸­ï¼å¾å°åå¨ã</li>
<li><strong>æ é¡¶</strong>ï¼å¨æä¸é¢ï¼ä½å°åï¼ï¼æ°æ®é¢ç¹è¿è¿åºåºåºæ å¥æ ï¼åå¨å§çã</li>
</ul>
<p>æä»¥ï¼ä¸ºäºçè§£èµ·æ¥æ´é¡ºçï¼å»ºè®®æä»¬å¨èæµ·ä¸­å»ºç«çæ¨¡åå¦ä¸ï¼</p>
<ul>
<li><strong>é«å°åå¨ä¸</strong>ï¼å°åºï¼ã</li>
<li><strong>ä½å°åå¨ä¸</strong>ï¼å¤©ç©ºï¼ã</li>
<li><strong>æ å¸§ççé¿æ¹å</strong>ï¼ä»ä¸å¾ä¸ï¼<strong>åä½å°åçé¿</strong>ã</li>
</ul>
</li>
<li>
<p>æéååå­åå</p>
<p><strong>æå°å»åº¦ï¼å­è (Byte)</strong> å¨è®¡ç®æºéï¼<strong>8 bit (1å­è)</strong> æ¯åå­å¯å¯»åçæå°åä½ã</p>
<p><strong>å®éæ­¥é¿ï¼</strong>    è½ç¶å»åº¦æ¯æ å­è ç»çï¼ä½å¨ 64 ä½ç³»ç»éï¼Ignition è¿ä¸ªèå¸åæå¾å¤§ã ä»å¹²æ´»æ¶ï¼<strong>ä¸ä¼åå­¦åå¥é£æ ·æçå°è±æå»æ 1 ä¸ªå­èã</strong>   ä»<strong>æ¯ä¸æ¬¡ä¼¸æï¼é½è¦æèµ° 8 ä¸ªå­è</strong>ï¼64 bitï¼ãè¿ 8 ä¸ªå­èåèµ·æ¥ï¼æææäºä¸ä¸ªå®æ´ç <strong>æ§½ä½ (Slot)</strong>ã</p>
<p><strong>åå­å¯¹é½ï¼</strong> æ¯ä¸æ¬¡é½è¦æä½ 8 ä¸ªå­èï¼æä»¥ï¼ææä½çå°åï¼é½æ¯8çåæ°ï¼</p>
<p>0  8  16  24 ãããï¼è¿äºæ°å­ä»ä»æ¯ç¤ºæå°åæ¯8çåæ°ï¼</p>
<p>è¿å°±æ¯ <strong>åå­å¯¹é½</strong>ã</p>
<p><strong>æ³¨æï¼</strong> è¿å¹¶ä¸ä»£è¡¨å°å <code>1, 2, 3...7</code> æ¯âç©ºé²âæèâæ²¡ç¨âçã å½ä½ åå°å <code>0</code> åå¥ä¸ä¸ª 64 ä½æéæèæ°æ®æ¶ï¼è¿ä¸ªæéææ°æ®ç¨64bitçåºå¤§çèº«èº¯<strong>å¡«æ»¡</strong>äºä» <code>0</code> å° <code>7</code> çææç©ºé´ã åªä¸è¿ï¼å½æä»¬æ³<strong>æ¾å°</strong>è¿ä¸ªæ°æ®æ¶ï¼æä»¬åªå¨è¿ä¸ªæ°æ®ç<strong>å¤´é¨ï¼é¦å°åï¼</strong> æ¾èµ·ã</p>
<p><strong>å°å 0</strong>ï¼æ¯ç¬¬ä¸ä¸ªæ§½ä½ç<strong>é¨å£</strong>ã<strong>å°å 8</strong>ï¼æ¯ç¬¬äºä¸ªæ§½ä½ç<strong>é¨å£</strong>ã</p>
<p>è¿å°±è§£éäºæä»¬å¨åé¢åå®¹ä¸­æå°ç <strong>Tagged Pointer</strong> åçï¼ å ä¸ºå°ååªå¨ <code>0, 8, 16</code> è¿äº <code>8</code> çåæ°ä¸ï¼æä»¥è¿äºå°åçäºè¿å¶è¡¨ç¤ºï¼<strong>æå 3 ä½éå¸¸æ¯ 0</strong>ã V8 ä¹æ¯çåäºè¿ä¸ç¹ï¼ææ¢æè¿ 3 ä½æªä½ä»ç¨ï¼å­ç±»å Tagï¼ã</p>
<p><strong>æé</strong>   å¦ä½çè§£ï¼</p>
<p>æéå°±æ¯å°åï¼ä¹æä»¥è¯´æ¯æé èä¸æ¯ç´æ¥è¯´å°åï¼æ¯å ä¸º æéæ¶ç´§äºå°åçæ¦å¿µã</p>
<p>âå°åâæ¯ç©çå±é¢çå®¢è§å­å¨ï¼èâæéâæ¯è½¯ä»¶å±é¢çä¸»è§å®ä¹ãæéå¯¹å°åå·ææ¶ç´§åçº¦æä½ç¨ã</p>
<p>åç¡®çè¯´  <strong>æéæ¯å¯¹å°åæ¦å¿µçä¸æ¬¡âæ¶ç´§âåâèµäºè¯­ä¹â</strong>ã</p>
<ul>
<li>
<p><strong>å°å</strong></p>
</li>
<li>
<p><strong>æ¬è´¨</strong>ï¼å®åªæ¯ä¸ä¸ªå·å°å°çæ°å­ç¼å·ï¼æ¯å¦ <code>0x0000FFFF</code>ï¼ã</p>
</li>
<li>
<p><strong>ç¼ºé·</strong>ï¼å®æ²¡æä»»ä½çº¦æãç»ä½ ä¸ä¸ªå°åï¼ä½ æ ¹æ¬ä¸ç¥éé£éä½çæ¯ä»ä¹ã</p>
<ul>
<li>æ¯ 4 ä¸ªå­èçæ´æ°ï¼</li>
<li>è¿æ¯ 1 ä¸ªå­èçå­ç¬¦ï¼</li>
<li>æèæ¯ä¸æ®µå¯æ§è¡çä»£ç ï¼</li>
<li>çè³å¯è½æ¯ä¸ä¸ªæ æçåå¾å¼ï¼</li>
</ul>
</li>
<li>
<p><strong>ç¶æ</strong>ï¼å¦æä½ åªæ¿å°äºä¸ä¸ªå°åï¼ä½ é¢å¯¹çæ¯æªç¥çãæ··ä¹±çåå­ç©ºé´ã</p>
</li>
<li>
<p>**æé **</p>
</li>
<li>
<p><strong>æ¬è´¨</strong>ï¼<strong>æé = å°å + ç±»åçº¦æï¼è§£éæ¹å¼ï¼</strong>ã</p>
</li>
<li>
<p><strong>æ¶ç´§çæ¦å¿µ</strong>ï¼</p>
<p>å½æä»¬å®ä¹ä¸ä¸ªæéï¼æ¯å¦ C++ éç <code>int* p</code> æ V8 éç <code>Tagged Pointer</code>ï¼æ¶ï¼æä»¬å®éä¸æ¯<strong>æ¶ç´§</strong>äºå¯¹é£ä¸ªåå­å°åçæä½æéåçè§£æ¹å¼ã</p>
<ul>
<li>å®åè¯ CPUï¼âå«ä¹±çäºï¼è¿ä¸ªå°åéå­çä¸å®æ¯ <strong>å¯¹è±¡</strong>ï¼èä¸æ¯æ´æ°ãâ</li>
<li>å®åè¯ç¼è¯å¨ï¼âå½ä½ å»è¯»è¿ä¸ªå°åæ¶ï¼è¯·æç§ <strong>8 å­è</strong> ä¸ºåä½å»è¯»ï¼ä¸è¦åªè¯» 1 ä¸ªå­èãâ</li>
</ul>
</li>
</ul>
<p>å¨ V8 ç Ignition ä¸­ï¼è¿ç§âæ¶ç´§âä½ç°å¾æ´å¨é¢ï¼</p>
<ol>
<li>
<p><strong>æ ç­¾ (Tagging)</strong>ï¼</p>
<p>V8 çæéï¼Tagged Pointerï¼å©ç¨æä½ä½ï¼Tag Bitï¼å¼ºè¡è§å®äºè¯­ä¹ã</p>
<ul>
<li>å¦ææåä¸ä½æ¯ <code>0</code>ï¼<strong>æ¶ç´§ä¸ºâç«å³æ°â</strong>ï¼Smiï¼ãä¸éè¦å»åå­éæ¾ï¼å®èªå·±å°±æ¯å¼ã</li>
<li>å¦ææåä¸ä½æ¯ <code>1</code>ï¼<strong>æ¶ç´§ä¸ºâå æéâ</strong>ï¼HeapObjectï¼ãå¿é¡»å»å éæ¾ã</li>
</ul>
</li>
<li>
<p><strong>éèç±» (Map/Hidden Class)</strong>ï¼</p>
<p>å½ä½ é¡ºç V8 çæéæ¾å°å éçå¯¹è±¡æ¶ï¼å¯¹è±¡çç¬¬ä¸ä¸ªå±æ§éå¸¸æ¯ <strong>Map</strong>ï¼éèç±»ï¼ã</p>
<p>è¿å®éä¸æ¯è¿ä¸æ­¥çâæ¶ç´§âï¼</p>
<ul>
<li>âè¿ä¸ªå°åä¸ä»æ¯ä¸ªå¯¹è±¡ï¼èä¸å®æ¯ä¸ä¸ª <strong>æ°ç»</strong>ï¼é¿åº¦æ¯ 10ï¼åç´ ç±»åæ¯...âã</li>
</ul>
</li>
</ol>
<p>æåéè¦æ³¨æï¼è¶å¾åºå±ï¼æ¯å¦å°äºæ±ç¼  å°äºä»£ç è°è¯ ï¼å¯¹äºæéåå°åçåºåï¼å°±è¶è¶è¿äºæ ï¼å¾å¤æ¶åï¼é½æ¯æ··çå«çï¼åºæ¬ä¸é½æ¯ä½¿ç¨æéå°±æ¯å°å è¿ä¸ªæ¬è´¨æ¦å¿µäºãå ä¸ºçº¦æå·²ç»å¥ç¦»ï¼åªå©æ¬è´¨äºã</p>
<p><strong>è°ç¨çº¦å®</strong></p>
<p>æä»¬å¨åé¢å­¦ä¹ äºæ å¸§çç©çç»æï¼åæ°å¨é«å°åï¼è¿åå°åå¨ä¸­é´ï¼åéå¨ä½å°åã</p>
<p>è¿æ¶åï¼æ ä¸­çåçæåååºç°äºï¼ä¸ºä»ä¹è¦è¿ä¹æ¾ï¼æåè¿æ¥æ¾ä¸è¡å  ææ··çæ¾ä¸è¡åï¼</p>
<p>è¿å°±å¼åºäºä¸ä¸ªéè¦çæ¦å¿µ è°ç¨çº¦å®ã</p>
<ul>
<li>
<p>ç®åæ¥è¯´ï¼è°ç¨çº¦å®å°±æ¯ <strong>è°ç¨è (Caller)</strong> å <strong>è¢«è°ç¨è (Callee)</strong> ä¹é´è¾¾æçä¸ä»½ <strong>âåè®®â</strong> æ <strong>âååâ</strong>ã</p>
<p>æ³è±¡ä¸ä¸ä¸¤ä¸ªäººå¨ç©ççï¼</p>
<ul>
<li>
<p><strong>Caller</strong> è¯´ï¼âæä¼æçæå°<strong>ä½ çå·¦æè¾¹</strong>ãâ</p>
</li>
<li>
<p><strong>Callee</strong> è¯´ï¼âå¥½çï¼æä¼è·å°<strong>å·¦æè¾¹</strong>å»æ¥çãâ</p>
<p>è¿å°±æ¯çº¦å®ãå¦æ Caller æåå·¦è¾¹ï¼è Callee è·å»å³è¾¹æ¥ï¼çå°±æäºï¼ç¨åºå´©æºï¼ã</p>
</li>
</ul>
</li>
</ul>
<p>å¨ V8 éï¼è¿ä»½ åè®®/åå è§å®äºä¸ä¸ªææ ¸å¿çé®é¢ï¼</p>
<ol>
<li><strong>åæ°æ¾åªï¼</strong> (ä¼ éæ¹å¼)
<ul>
<li>æ¯æ¾å¨ CPU å¯å­å¨éï¼è¿æ¯åå°æ åå­éï¼</li>
<li>å¦ææ¯åæ ï¼æ¯ä»å·¦å¾å³åï¼è¿æ¯ä»å³å¾å·¦åï¼</li>
</ul>
</li>
<li><strong>ç»ææ¾åªï¼</strong> (è¿åæ¹å¼)
<ul>
<li>å½æ°ç®å®äºï¼ç»ææ¾å¨åªä¸ªå¯å­å¨éå¸¦åå»ï¼ï¼éå¸¸æ¯ç´¯å å¨/raxï¼ã</li>
</ul>
</li>
<li><strong>è°æ¥ææ«å«çï¼</strong> (å æ å¹³è¡¡)
<ul>
<li>åæ°å ç¨çæ ç©ºé´ï¼æ¯ Caller è´è´£åæ¶ï¼è¿æ¯ Callee è´è´£åæ¶ï¼</li>
</ul>
</li>
</ol>
<p><strong>V8çç¹æ®ä¹å¤ï¼åå¾åæ¶</strong></p>
<p>å¨c / c++ ä¸­ï¼ æ åçº¦å®éå¸¸ä¼ä¼åæåå ä¸ªåæ°æ¾å¨ <strong>ç©çå¯å­å¨</strong> éä¼ éï¼è¿æ ·éåº¦ä¼è¾¾å°æè´ã</p>
<p>ä½æ¯å¨V8ç Ignition è§£éå¨éï¼æä»¬çå°åæ°å ä¹é½æ¯ä¹å·§çæåå¨æ ä¸ãè¿æ¯ä¸ºä»ä¹ï¼</p>
<p>å ä¸º V8 æä¸ä¸ªå¹½çµæå« ï¼è¿å°±æ¯ <strong>åå¾åæ¶å¨ (GC)</strong>ã</p>
<ul>
<li><strong>GC çå¨å¹´æ ä¼</strong>ï¼GC éè¦æ¶å»æ«æåå­ï¼ççåªäºå¯¹è±¡è¿æ´»çï¼ææéæåå®ï¼ã</li>
<li><strong>å¯å­å¨æ æ³è·è¸ª</strong>ï¼å¦æåæ°æ£è½å¨åç§ç©çå¯å­å¨éï¼è¿å°±å¾é¾è¿½è¸ªã</li>
<li><strong>V8 çæä¸­æé</strong>ï¼<strong>ç¡®ä¿æ ä¸æä¸ä»½âå¯æ«æâçå¤ä»½ã</strong></li>
</ul>
<p>å³ä½¿æäºåæ°æ¯éè¿å¯å­å¨ä¼ è¿æ¥çï¼ä¸ºäºæ¹ä¾¿ GC æ¸ç¾èä¸²å¼çæ«æï¼V8 éå¸¸ä¹ä¼ä¿è¯è¿äºåæ°å¨æ ä¸æä¸ä¸ªç¡®å®çä½ç½®ï¼æèæå¯å­å¨çå¼âæåâå°æ ä¸ï¼ãè®°å¾åé¢è¯´PCçæ¶åï¼æè¿ä¸æ¬¡ã</p>
<p>so  è¿å°±å½¢æäºæä»¬å¨æ å¸§å¾ä¸­çå°çé£æ ·,åæ°å¨åå­éè¿ç»­æåï¼GC æ«èµ·æ¥éå¸¸èæã</p>
<p><strong>åè¯´æ å¸§çåå­å¸å±</strong></p>
<p>å¨åé¢æä»¬è®²æ å¸§çç»ææ¶ï¼ä»é«å°åå°ä½å°åï¼ä¾æ¬¡æ¯  åæ°åº--åºå®å¤´é¨åº--å·¥ä½åºï¼ä½æ¯</p>
<p>å¯¹äºæ å¸§çåçåå­æ®µçææèï¼å¹¶æ²¡æè¯¦ç»çè¯´æã ç°å¨æä»¬æäºè¶³å¤çéºå«ï¼å¯ä»¥è¯¦ç»äºè§£äºã</p>
<p>æä»¬éè¦æ<strong>æ¶é´é¡ºåº</strong>èµ°ä¸éæµç¨ã</p>
<p>è¿å¯¹äºçè§£ FPï¼æ å¸§æéï¼è¿ä¸ªâçç¢âè³å³éè¦ã</p>
<p><strong>ç¬¬ä¸é¶æ®µï¼è°ç¨èåå¤å·¥ä½</strong></p>
<p>è°ç¨èå¨æ§è¡ <code>CALL</code> æä»¤ä¹åï¼éè¦ååå¤å¥½è´¡åï¼</p>
<ol>
<li>
<p><strong>Push åæ°</strong>ï¼è°ç¨èæåæ°ï¼Receiver, a0, a1...ï¼æé¡ºåºåå¥æ ã</p>
<ul>
<li><em>(è¿æ¯ Caller åæ¨çåå­ï¼å±äº Caller çæ å¸§èå´ï¼ä½ä¾ Callee ä½¿ç¨)</em></li>
</ul>
</li>
<li>
<p><strong>æ§è¡ CALL æä»¤</strong>ï¼CPU èªå¨å° <strong>è¿åå°å (Return Address)</strong> åå¥æ é¡¶ï¼å¹¶è·³è½¬å° Callee çä»£ç å¤ã</p>
<ul>
<li><em>(æ­¤æ¶ï¼FP æéä¾ç¶æå Caller çèåºåç¹)</em></li>
</ul>
</li>
</ol>
<p><strong>ç¬¬äºé¶æ®µï¼è¢«è°ç¨èæ¥æ</strong></p>
<p>æ§å¶ææ¥å°äº Ignitionï¼è¢«è°ç¨èï¼æä¸­ï¼å®è¿é¨åç<strong>å¤´ç­å¤§äº</strong>å°±æ¯å»ºç«èªå·±çå®é¨ï¼æ å¸§ï¼ï¼</p>
<ol>
<li><strong>Push Caller's FP</strong>ï¼Ignition åçç¬¬ä¸ä»¶äºï¼å°±æ¯ææ§ç FPï¼ä¸ä¸å±çåºåç¹ï¼åå¥æ ä¸­ä¿å­èµ·æ¥ã
<ul>
<li><em>(è¿ä¸æ­¥å½¢æäº Saved FPï¼ä¹å°±æ¯æ å¸§ä¸­é´çé£ä¸ªè¿æ¥ç¹)</em></li>
</ul>
</li>
<li><strong>Set New FP</strong>ï¼Ignition æå½åçæ é¡¶æé (SP) èµå¼ç» FPã
<ul>
<li><em>(ä»æ­¤ï¼FP æåäº Saved FPãæ°çæ å¸§åºåç¹æ­£å¼å»ºç«)</em></li>
</ul>
</li>
<li><strong>Push Fixed Header</strong>ï¼æ¥çï¼Ignition ä¾æ¬¡åå¥ ContextãFunctionãBytecodeArrayãBytecodeOffset ç­åºå®å­æ®µã</li>
<li><strong>Allocate Locals</strong>ï¼æåï¼æ ¹æ® Frame Sizeï¼ä¸æ¬¡æ§ææ é¡¶æé (SP) å¾ä¸ç§»ï¼ä¸ºå±é¨åéï¼r0, r1...ï¼çåºç©ºé´ï¼å¹¶åå§åä¸º <code>undefined</code> æ <code>The Hole</code>ã</li>
</ol>
<h3 id="_"></h3>
<p>æäºè¿ä¸ªæµç¨ï¼æä»¬åçâæ·å£å½å±âå°±éå¸¸æ¸æ°äºï¼</p>
<ul>
<li>
<p><strong>FP åå¶ä¸æ¹ (åæ°ãè¿åå°å)</strong>ï¼ è½ç¶ç©çä¸å FP è¿å¨ä¸èµ·ï¼ä½å®ä»¬æ¯ <strong>Caller</strong> å¨ç¬¬ä¸é¶æ®µçä¸çâéäº§âã</p>
<ul>
<li>åæ°æ¯ Caller å¸¦æ¥çã</li>
<li>è¿åå°åæ¯ Caller å¸¦æ¥çã</li>
<li>Saved FP æ¯ Callee ä¸ºäºä¿æ¤ Caller èå­çã</li>
</ul>
</li>
<li>
<p><strong>FP ä¸æ¹ (åºå®å¤´é¨ãå·¥ä½åº)</strong>ï¼ è¿æ¯ <strong>Callee</strong> å¨ç¬¬äºé¶æ®µäº²æåå»ºçâèµäº§âã</p>
<ul>
<li>Context æ¯ Callee æ¾æ¥çã</li>
<li>å±é¨åéæ¯ Callee åéçã</li>
</ul>
</li>
</ul>
<p>è¿æ ·ï¼æä»¬åæ¥çæ å¸§çç»æï¼çè§£ä¸çé»è¾å°±å®å¨é­ç¯äºï¼ <strong>Caller ç»èµæºï¼åæ°ï¼ --- ç¡¬ä»¶ç»éè·¯ï¼è¿åå°åï¼ ---  Callee å»ºå°åºï¼ä¿å­æ§FPï¼ ---  Callee å»ºæ¿å­ï¼å¤´é¨ååéï¼ã</strong></p>
<p><strong>FPååç§»é</strong></p>
<p>å¨åé¢æä»¬å­¦ä¹ æ å¸§çåºå®å¤´é¨ä¸­çå­æ®µæ¶ï¼æä»¬ä½¿ç¨äº FPå åç§»å¼ çè¡¨ç¤ºæ¹å¼ã</p>
<p>ç±ç¢ç£¨çæåè¯å®ä¼æçé®ï¼<strong>ä¸ºä»ä¹ææä¸è¥¿é½è¦ç¯ç FP çï¼ä¸ºä»ä¹æ¯è¿äºç¹å®çæ°å­ï¼FP éé¢å°åºè£äºä»ä¹ï¼</strong></p>
<ol>
<li><strong>ä¸ºä»ä¹é FP (Frame Pointer) ååºåï¼</strong></li>
</ol>
<p>ä½ å¯è½ä¼é®ï¼âæ é¡¶æé <strong>SP (Stack Pointer)</strong> ä¹æ¯ä¸ªæéï¼èä¸å®å°±å¨æ é¡¶ï¼ä¸ºä»ä¹ä¸ç¨ SP æ¥æ¾æ°æ®ï¼éè¦ä¸é¨ç»´æ¤ä¸ä¸ª FP å¢ï¼â</p>
<p><strong>åå å°±æ¯ï¼SP æ¯âå¨âçï¼FP æ¯âéâçã</strong></p>
<ul>
<li>
<p><strong>SP çå¨å¦è±å</strong>ï¼</p>
<p>å¨å½æ°æ§è¡è¿ç¨ä¸­ï¼Ignition å¯è½ä¼é¢ç¹å°å¥æ ãåºæ ï¼æ¯å¦åå¥ä¸´æ¶åéãåå¤å­å½æ°åæ°ï¼ã</p>
<p>è¿å°±å¯¼è´ SP çä½ç½®ä¸ç´å¨åã</p>
<p>å¦æç¨ SP ååºåï¼å½ä½ æ¾ <code>åé a</code> æ¶ï¼ä¸ä¸è¡ä»£ç å¯è½æ¯ <code>[SP + 8]</code>ï¼ä¸ä¸è¡ä»£ç å ä¸ºåäºä¸ªä¸´æ¶å¼ï¼å°±åæ <code>[SP + 16]</code> äºãç¼è¯å¨è®¡ç®èµ·æ¥ä¼ç¯æã</p>
</li>
<li>
<p><strong>FP çéå¦ç«çª</strong>ï¼</p>
<p>ä¸æ¦æ å¸§å»ºç«å®æ¯ï¼Prologue ç»æï¼ï¼å¨æ´ä¸ªå½æ°æ§è¡æé´ï¼<strong>FP æéå°±æ¯éå¨æ å¸§çåºå®ä½ç½®ï¼Saved FP é£ä¸ªæ§½ä½ï¼ï¼é·æä¸å¨ã</strong></p>
<p>æ­¤æ¶ï¼æä»¬ä»¥ FP ä¸ºåç¹ï¼åä¸ä¸çï¼</p>
<p><strong>å¾ä¸çï¼åå°åº/é«å°åï¼</strong>ï¼ä¸ç®¡æ é¡¶æä¹åï¼åæ° <code>a0</code> æ°¸è¿å¨ FP <strong>å¾ä¸æ°</strong> ç¬¬ 2 æ ¼çä½ç½®ï¼åç§»éæ¯æ­£æ°ï¼å¦ <code>FP + 16</code>ï¼ã</p>
<p><strong>å¾ä¸çï¼åå¤©ç©º/ä½å°åï¼</strong>ï¼ä¸ç®¡æ é¡¶æä¹åï¼åé <code>r0</code> æ°¸è¿å¨ FP <strong>å¾ä¸æ°</strong> ç¬¬ 5 æ ¼çä½ç½®ï¼åç§»éæ¯è´æ°ï¼å¦ <code>FP - 40</code>ï¼ã</p>
</li>
</ul>
<p><strong>æä»¥</strong>ï¼FP æä¾äºä¸ä¸ª<strong>éæçãç»å¯¹ç</strong>åèåæ ç³»ã</p>
<ol start="2">
<li>**FPåå°åååå®¹ **</li>
</ol>
<p>è¿æ¯åæ¥è§¦çæåï¼çè§£æ å¸§é¾è¡¨æå®¹æè¿·ç³çå°æ¹ã</p>
<p>æä»¬è¦åºåä¸ä¸ªæ¦å¿µï¼</p>
<ul>
<li><strong>FP å¯å­å¨</strong>ï¼</li>
</ul>
<p>å¯ä»¥ç®åçè§£ä¸ºï¼è¿æ¯ CPU éçä¸ä¸ªç©çé¨ä»¶ï¼æ Ignition çèææéï¼ã</p>
<ul>
<li><strong>FP ä¸­çåå®¹</strong>ï¼</li>
</ul>
<p>FPä¸­çåå®¹å°±æ¯ ä¸ä¸ªåå­å°åã</p>
<p>è¿ä¸ªåå­å°åæ¯ä¸ªæéï¼æåå½åæ å¸§ä¸­çä¸ä¸ªå­æ®µï¼</p>
<p>åæ¶ï¼è¿ä¸ªåå­å°å/æéï¼ä¹æ¯å½åæ å¸§ç <strong>âé¶ç¹â</strong>ãå³ <code>Offset = 0</code>ã</p>
<ul>
<li><strong>FP æåçåå­å°åéå­çåå®¹</strong>ï¼</li>
</ul>
<p>é£ä¹ è¿ä¸ªæ å¸§ä¸­çå­æ®µï¼éé¢çåå®¹æ¯ä»ä¹ï¼</p>
<p><strong>ç­æ¡æ¯ï¼Caller's FP (è°ç¨èç FP)ã</strong></p>
<p>å³ï¼ä¸ä¸å±æ å¸§çåºåå°åã</p>
<p><strong>è¿åæ¶ä¹æ¯âæ åæº¯âçåçï¼</strong></p>
<ul>
<li>å½å FP æå <code>Saved FP</code>ã</li>
<li><code>Saved FP</code> éå­ç <code>ä¸ä¸å± FP</code>ã</li>
<li><code>ä¸ä¸å± FP</code> éå­ç <code>ä¸ä¸å± FP</code>ã</li>
<li>...</li>
<li>è¿å°±å½¢æäºä¸æ¡<strong>é¾è¡¨</strong>ãè°è¯å¨ï¼Debuggerï¼å°±æ¯é¡ºçè¿æ¡é¾å­ï¼ä¸å±å±å¾ä¸ç¬ï¼ææå°åºäºå®æ´çè°ç¨æ ã</li>
</ul>
<ol start="3">
<li><strong>åç§»é (Offset) æ¯æä¹ç¡®å®çï¼</strong></li>
</ol>
<p>ææäº FP æ¯é¶ç¹ï¼é£ä¹ï¼å¯¹äºåæ°ååéçå¯»åï¼å°±éå¸¸å®¹æçè§£äºã</p>
<p>è®©æä»¬ç«å¨ FP è¿ä¸ªé¶ç¹ï¼å¼å§å·¡è§ï¼</p>
<p><strong>A. å¾ä¸çï¼Caller çä¸çéäº§ (å ä¸ºæä»¬ä½¿ç¨é«å°åå¨ä¸ï¼ä½å°åå¨ä¸çæ¨¡å¼)</strong></p>
<p>è¿éæ¯å°å <strong>å¢å </strong> çæ¹åï¼Offset æ¯ <strong>æ­£æ° +</strong>ï¼ï¼å ä¸ºæä»¬å¨å¾é«å°åèµ°ã</p>
<ul>
<li><strong>Offset     +0 (<code>[FP + 0]</code>)</strong>ï¼ å°±æ¯èä¸ãè¿éå­çæ¯ <strong>Saved FP</strong>ã</li>
<li><strong>Offset     +8 (<code>[FP + 8]</code>)</strong>ï¼ <strong>å¾ä¸</strong> èµ° 1 æ ¼ã è¿éæ¯ <strong>Return Address</strong>ã <em>(ä¸ºä»ä¹æ¯ +8ï¼å ä¸ºå¾é«å°åèµ°äº 8 å­èã)</em></li>
<li><strong>Offset     +16 (<code>[FP + 16]</code>)</strong>ï¼ <strong>åå¾ä¸</strong> èµ° 1 æ ¼ã è¿éæ¯ <strong>Receiver (this)</strong>ã <em>(æ³¨ï¼è¿æ¯é·æä¸å¨çä¸åº§ï¼ç¦» FP æè¿çåæ°ã)</em></li>
<li><strong>Offset     +24 (<code>[FP + 24]</code>)</strong>ï¼ <strong>åå¾ä¸</strong> èµ° 1 æ ¼ã è¿éæ¯ <strong>ç¬¬ä¸ä¸ªæ¾å¼åæ° (Arguments a0)</strong>ã <em>(æ³¨ï¼å¦æææ´å¤åæ° a1, a2... ä¼ç»§ç»­å¾ä¸æå¨ +32, +40...)</em></li>
</ul>
<p><strong>B. å¾ä¸çï¼Callee èªå·±çèµäº§ (ä½å°ååº)</strong></p>
<p>å³äºåç§»éçå·ä½å¼ï¼å¨åé¢ï¼ç¹å«è¯´ææ¯ç¨äº  <strong>ç¤ºæ</strong>  ï¼  V8æºç ä¸­çåç§»å¦ä¸ï¼ææ¶å¯ä»¥ä½ä¸ºç¡®å®å¼ï¼ä½æ¯ä»¥åå¾æ<strong>å¯è½ä¼æ´æ¹</strong>ã</p>
<blockquote>
<p><strong>FP (åºå)</strong></p>
<p><strong>[FP - 8]</strong>: <code>StandardFrameConstants::kContextOffset</code> -&gt; <strong>Context</strong></p>
<p><strong>[FP - 16]</strong>: <code>StandardFrameConstants::kFunctionOffset</code> -&gt; <strong>Function</strong></p>
<p><strong>[FP - 24]</strong>: <code>InterpretedFrameConstants::kBytecodeArrayFromFp</code> -&gt; <strong>BytecodeArray</strong> (è§£éå¨ç¹æ)</p>
<p><strong>[FP - 32]</strong>: <code>InterpretedFrameConstants::kBytecodeOffsetFromFp</code> -&gt; <strong>BytecodeOffset (PC)</strong></p>
<p><strong>[FP - 40]</strong>: <code>InterpretedFrameConstants::kRegisterFileFromFp</code> -&gt; <strong>r0 (Register 0)</strong> (å·¥ä½åºèµ·ç¹)</p>
</blockquote>
<p>è¿éä¹éè¦å ä¸ä¸ªéå®ï¼</p>
<p><strong>å¨ 64 ä½ç³»ç»ä¸ï¼Ignition è§£éå¨æ å¸§çåºå®å¤´é¨å¸å±éå¸¸å¦ä¸ï¼</strong></p>
<p>è¿éæ¯å°å <strong>åå°</strong> çæ¹åï¼Offset æ¯ <strong>è´æ° -</strong>ï¼ï¼å ä¸ºæä»¬å¨å¾ä½å°åï¼æ é¡¶ï¼æ¹åç¬ã</p>
<ul>
<li><strong>Offset     -8 (<code>[FP - 8]</code>)</strong>ï¼ <strong>å¾ä¸</strong> ç¬ 1 æ ¼ã è¿éæ¯ <strong>Context</strong>ã <em>(ä¸ºä»ä¹æ¯è´æ°ï¼å ä¸ºç¦»å¤©ç©ºæ´è¿äºï¼å°ååå°äºã)</em></li>
<li><strong>Offset    -16 (<code>[FP - 16]</code>)</strong>ï¼ <strong>åå¾ä¸</strong> ç¬ 1 æ ¼ã è¿éæ¯ <strong>Function</strong>ã</li>
<li><strong>Offset    -24 (<code>[FP - 24]</code>)</strong>ï¼ <strong>åå¾ä¸</strong> ç¬ 1 æ ¼ã è¿éæ¯ <strong>BytecodeArray</strong>ã</li>
<li><strong>Offset    -32 (<code>[FP - 32]</code>)</strong>ï¼ <strong>åå¾ä¸</strong> ç¬ 1 æ ¼ã è¿éæ¯ <strong>BytecodeOffset (PC)</strong>ã <em>(æ³¨ï¼å°è¿éï¼åºå®å¤´é¨ç»æ)</em></li>
<li><strong>Offset     -40 (<code>[FP - 40]</code>)</strong>ï¼ <strong>åå¾ä¸</strong> ç¬ 1 æ ¼ã ç»äºå°äº <strong>å·¥ä½åº</strong>ãè¿éæ¯ <strong>r0</strong>ã</li>
</ul>
</li>
</ul>
<hr>
<p>ignitionè§£éå¨çç¬¬ä¸é¨åï¼å·²ç»å®æäºï¼åé¢å°æ¯ignitionç¯çç¬¬äºé¨åBytecodeGeneratorã</p>
<p>æ¬æ³æ§å¶ç¯å¹ï¼ä½æ¯ä¾æ§æ¯å°äºä¸ä¸ä¸åå¤å­ï¼è¿é¨ååå®¹ï¼é¾åº¦ä¸å¤§ï¼æ·±åº¦ä¸æ·±ï¼ä¸»è¦é½æ¯ä¸äºåç½®ååºç¡ç¥è¯ãæå´è¶£çæåï¼å¤è¯»å éï¼é½å¯ä»¥çè§£çã æè§å¾  èµ·ç æ¯è§£æç¯å®¹æçè§£å¤äºã</p>
<p>æ¬æé¦åäºï¼ <a href="https://juejin.cn/user/565561530002222/posts" target="_blank" rel="noopener nofollow">æéç¤¾åº</a></p>
<p>åæ­¥åè¡¨äºï¼ <a href="https://blog.csdn.net/f20171110?type=blog" target="_blank" rel="noopener nofollow">csdn</a></p>
<p><a href="https://www.cnblogs.com/f20171110" target="_blank">åå®¢å­</a></p>
<p><strong>ç å­è½ä¸æ ç¥è¯èç»çæ¢³çæ´æ¯ä¸æ ï¼ä½æ¯ç¥è¯çä¼ æ­æ´éè¦ï¼</strong></p>
<p><strong>æ¬¢è¿è½¬è½½ï¼è¯·ä¿æå¨æå®æ´ã</strong></p>
<p><strong>è°¢ç»çæ®µæå½ã</strong></p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-04 19:19">2026-02-04 19:19</span>&nbsp;
<a href="https://www.cnblogs.com/f20171110">ç¨æ·æ°</a>&nbsp;
éè¯»(<span id="post_view_count">36</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19576264);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19576264', targetLink: 'https://www.cnblogs.com/f20171110/p/19576264', title: 'V8å¼æ ç²¾åæ¼«æ¸¸æå--Ignitionç¯(ä¸) æä»¤ æ å¸§ æ§½ä½ è°ç¨çº¦å® åå­å¸å± åºç¡åå®¹' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ LLVM Passå¿«éå¥é¨(å)ï¼ä»£ç ææ¡© ]]></title>
    <link>https://www.cnblogs.com/ClownLMe/p/19575719</link>
    <guid>7b29632e2a98bce4814cd7b604ea715d</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ClownLMe/p/19575719" title="åå¸äº 2026-02-04 17:49">
    <span role="heading" aria-level="2">LLVM Passå¿«éå¥é¨(å)ï¼ä»£ç ææ¡©</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        ä»0å°1ï¼å¿«éå¥é¨ LLVM pass ç¼å
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="ä»£ç ææ¡©">ä»£ç ææ¡©</h1>
<p>é¡¹ç®éæ±ï¼å¨å½æ°è¿è¡æ¶æå°åºè¿è¡çå½æ°å</p>
<h1 id="é¡¹ç®ç®å½å¦ä¸">é¡¹ç®ç®å½å¦ä¸</h1>
<pre><code>/MyProject
âââ CMakeLists.txt # CMake éç½®æä»¶
âââ build/ #æå»ºç®å½
â   âââ test.c #æµè¯ç¼è¯ä»£ç 
âââ mypass3.cpp # pass é¡¹ç®ä»£ç 
</code></pre>
<h3 id="ä¸æµè¯ä»£ç ç¤ºä¾">ä¸ï¼æµè¯ä»£ç ç¤ºä¾</h3>
<p><strong>test.c</strong></p>
<pre><code class="language-c">#include &lt;stdio.h&gt;

void func_A() {
    int a = 1;
}

void func_B() {
    func_A();
}

int main() {
    printf("hello world!\n");
    func_A();
    func_B();
    return 0;
}
</code></pre>
<h3 id="äºç¼åpass">äºï¼ç¼åPass</h3>
<p><mark>å¶ä»çåºå®çæ¨¡æ¿ä¹åæç« æ³¨éæï¼è¿éæåªæ³¨éå½åé¡¹ç®éè¦çé¨å</mark><br>
<strong>ä»£ç æµç¨ï¼</strong> éåæä»¤å¹¶å¹é<code>ADD</code>æä»¤-&gt;æ¿æ¢ä¸º<code>sub</code>æä»¤</p>
<pre><code class="language-cpp">#include "llvm/IR/PassManager.h"
#include "llvm/Passes/PassBuilder.h"
#include "llvm/Passes/PassPlugin.h"
#include "llvm/Support/raw_ostream.h"
#include "llvm/IR/Function.h"
#include "llvm/IR/BasicBlock.h"
#include "llvm/IR/Instruction.h"
#include "llvm/IR/Instructions.h"
#include "llvm/IR/IRBuilder.h" 

using namespace llvm;

namespace {

struct mypass3 : public PassInfoMixin&lt;mypass3&gt; {
    
    PreservedAnalyses run(Function &amp;F, FunctionAnalysisManager &amp;) {
        //è¿æ»¤å½æ°
        //è¿æ»¤æprintfåprintfæå³çå½æ°ï¼é²æ­¢å¨printfä¸­æå¥printfé æéå½ï¼æ­»å¾ªç¯ï¼
        if(F.isDeclaration() || F.getName().starts_with("_") || F.getName().contains("printf")){
            return PreservedAnalyses::all();
        }
        errs() &lt;&lt; "handle func:" &lt;&lt; F.getName() &lt;&lt; "\n";
		
		//è·åæ¨¡å
        Module *M = F.getParent();
        //è·åæ¨¡åä¸ä¸æ
        //ä¸ä¸æä¸­åå«äºæ°æ®çç±»å
        LLVMContext &amp;Ctx = M-&gt;getContext();
        
        //ä¸é¢æ¯åå»ºå½æ°ï¼ç±»æ¯javaåå°ï¼æèfridaçhook
        //å®ä¹printfçåæ°ç±»åï¼ç¸å½äºå½æ°æ¬å·ä¸­çåå®¹ï¼è¿éçPointerTypeæ¯æéç±»å
        std::vector&lt;Type*&gt; printfArgs = {PointerType::getUnqual(Ctx)};
		//å®ä¹å½æ°ç±»åï¼è¿éç¸å½äºå®ä¹ï¼int (void*, ...)
        FunctionType *printfType = FunctionType::get(
            Type::getInt32Ty(Ctx),//å½æ°è¿åå¼ç±»å
            printfArgs,//å½æ°çåæ°ç±»å(vector)
            true//æ¯å¦æ¯å¯ååæ°
        );
		//å¦æprintfå­å¨åå¼ç¨ï¼å¦æä¸å­å¨ï¼ååå»ºä¸ä¸ªæ°çprintf
        FunctionCallee printfFunc = M-&gt;getOrInsertFunction("printf", printfType);
		
		//ä¸é¢æ¯æå¥å½æ°
		//å°ä¿®æ¹çä½ç½®å®ä½å°è¦ææ¡©å½æ°çå¤´é¨
        IRBuilder&lt;&gt; builder(&amp;F.getEntryBlock().front());
        //å£°æå¨å±åéï¼è¿éæ¯è¦ä¼ ç»printfçæ ¼å¼åå­ç¬¦ä¸²ï¼
        Value* formatStr = builder.CreateGlobalStringPtr("&gt;&gt; enter function %s &lt;&lt;\n", "my_format");
        //å£°æå¨å±åéï¼è¿éå®ä¹äºå½æ°åç§°çå­ç¬¦ä¸²åé
        Value* funcName = builder.CreateGlobalStringPtr(F.getName(), "my_func_name");
        //å°ä¸é¢å®ä¹çå®éåæ°ä¼ å¥
        std::vector&lt;Value*&gt; printfArgsVec = {formatStr, funcName};
        //åå»ºå½æ°è°ç¨
        builder.CreateCall(printfFunc, printfArgsVec);
        
        return PreservedAnalyses::none();
    }
};

} 

extern "C" LLVM_ATTRIBUTE_WEAK ::llvm::PassPluginLibraryInfo
llvmGetPassPluginInfo() {
    return {
        LLVM_PLUGIN_API_VERSION,
        "mypass3",
        "v0.1",
        [](PassBuilder &amp;PB) {
            PB.registerPipelineParsingCallback(
                [](StringRef Name, FunctionPassManager &amp;FPM,
                   ArrayRef&lt;PassBuilder::PipelineElement&gt;) {
                    if (Name == "mypass3") {
                        FPM.addPass(mypass3());
                        return true;
                    }
                    return false;
                });
        }};
}
</code></pre>
<h3 id="ä¸passçæå»º">ä¸ï¼Passçæå»º</h3>
<p><mark><strong>ä¸é¢å¼ç¨çæ¯ä¹åæç« çåå®¹</strong></mark><br>
æå»ºLLVM Passéè¦å<code>CMakeLists.txt</code>æå»ºå£°æ</p>
<h5 id="1-éç½®cmakeéç½®æä»¶">1. éç½®CMakeéç½®æä»¶</h5>
<p><strong>CMakeLists.txt</strong><br>
ä¸é¢ç<code>cmake</code>éç½®å¯ä»¥ç´æ¥æ¿å»ç¨ï¼æå·²ç»æ æ³¨å¥½éè¦ä¿®æ¹çä½ç½®</p>
<pre><code class="language-python">#cmake çæ¬ï¼å¯éè¿ cmake --version å¤æ­
cmake_minimum_required(VERSION 4.1.1) #----&gt;ä¿®æ¹ cmakeçæ¬å·
#é¡¹ç®åå­
project(mypass3) #----&gt;ä¿®æ¹ é¡¹ç®åç§°

#å¯¼å¥é¡¹ç®ç LLVM cmake éç½®æä»¶è·¯å¾(å¦ææ ¹æ®æä¹åæç« å®è£è¿éå°±ç¸å)
set(LLVM_DIR "D:/LLVM/llvm-project/build/lib/cmake/llvm")#----&gt;ä¿®æ¹ llvm cmakeéç½®è·¯å¾
#å¯»æ¾ LLVM çåæä»¶
#REQUIRED æ¾ä¸å° LLVM ååæ­¢æå»º
#å¼ºå¶ä½¿ç¨ LLVM å®è£æ¶çæçéç½®æä»¶è¿è¡å®ä½
find_package(LLVM REQUIRED CONFIG)
#å° LLVM ç CMake æ¨¡åè·¯å¾æ·»å å°å½å CMake æç´¢è·¯å¾ä¸­ï¼ä»¥ä¾¿åç»­ä½¿ç¨ include(AddLLVM)ã
list(APPEND CMAKE_MODULE_PATH "${LLVM_CMAKE_DIR}")

#å¼å¥ LLVM æä¾çä¸ç¨ CMake å®
include(AddLLVM)
#å° LLVM çå¤´æä»¶ç®å½ï¼å¦ llvm/IR/Function.hï¼å å¥ç¼è¯å¨çæç´¢è·¯å¾
include_directories(${LLVM_INCLUDE_DIRS})
#å¯¼å¥ LLVM ç¼è¯æ¶ä½¿ç¨çå®å®ä¹
add_definitions(${LLVM_DEFINITIONS})
#è®¾ç½® C++ æ åä¸º C++17ã(è¿éå¦æä¸ç¨17ç¼è¯ä¼æ¥é)
set(CMAKE_CXX_STANDARD 17)
#å¼ºå¶è¦æ±å¿é¡»æ¯æ C++17ï¼å¦æç¼è¯å¨ä¸æ¯æåå¤±è´¥ã
set(CMAKE_CXX_STANDARD_REQUIRED ON)

#åå»ºä¸ä¸ªæ¨¡ååçåº(.dll)
add_library(mypass3 MODULE mypass3.cpp) #----&gt;ä¿®æ¹ é¡¹ç®åç§°ï¼æä»¶å
#windowsä¸ç¨ä¼æ¥éï¼å¯¼åºç¬¦å·
#LLVM Pass éè¦æ´é²ä¸äºç¹å®çå¥å£ç¹ï¼å¦ getAnalysisUsageï¼ç» opt å·¥å·è°ç¨ã
set_target_properties(mypass3 PROPERTIES WINDOWS_EXPORT_ALL_SYMBOLS ON) #----&gt;ä¿®æ¹ é¡¹ç®åç§°
# æå®è¯¥ Pass éè¦é¾æ¥ç LLVM æ ¸å¿ç»ä»¶ã 
# LLVMCore: æä¾ IRãFunctionãModule ç­æ ¸å¿ç±»ã 
# LLVMSupport: æä¾åç§è¾å©å·¥å·ç±»ï¼å¦ errs() è¾åºï¼ã
target_link_libraries(mypass3 LLVMCore LLVMSupport) #----&gt;ä¿®æ¹ é¡¹ç®åç§°ï¼æä»¶å  
# ä¸ºè¯¥ç®æ è®¾ç½®ç¹å®çç¼è¯å¨éé¡¹ã 
# /utf-8: åè¯ MSVC ç¼è¯å¨ä½¿ç¨ UTF-8 ç¼ç å¤çæºä»£ç ï¼é²æ­¢ä¸­ææ³¨éå¼èµ·çä¹±ç æç¼è¯éè¯¯ã  
target_compile_options(mypass3 PRIVATE /utf-8)#----&gt;ä¿®æ¹ é¡¹ç®åç§°ï¼æä»¶å
</code></pre>
<h5 id="2ç¼è¯å¹¶æå»ºpass">2.ç¼è¯å¹¶æå»ºPass</h5>
<p><strong>æå¼visual studio<code>çå·¥ä½å°ï¼æè¿éæ¯</code>x64 Native Tools Command Prompt for VS 2022`</strong></p>
<p>è¿å°<code>build</code>ç®å½</p>
<pre><code class="language-bash">#æå»ºé¡¹ç®
#å¶ä¸­-DCMAKE_BUILD_TYPE=RelWithDebInfoä¸éä¼æ¥éï¼ç±äºæä¹åç¼è¯çæ¯å¸¦ç¬¦å·çrelaseçæ¬
cmake -G "Ninja"  -DCMAKE_BUILD_TYPE=RelWithDebInfo ..
#ç¼è¯
ninja
</code></pre>
<p>æååºç°ä¸é¢æç¤ºï¼å³ä¸ºç¼è¯æå</p>
<pre><code class="language-bash">[2/2] Linking CXX shared module mypass3.dll
</code></pre>
<h3 id="åä½¿ç¨ææ¡©passå¯¹æºç è¿è¡ææ¡©">åï¼ä½¿ç¨ææ¡©Passå¯¹æºç è¿è¡ææ¡©</h3>
<p>è¿å°<code>build</code>ç®å½</p>
<pre><code class="language-bash">#æ.cæä»¶ç¼è¯ä¸º.ll
#-O1 ä½¿ç¨O1ä¼åï¼è¿éæå°è¯-O0ä¸ä¼åï¼ä¼å¯¼è´æçpassæ æ³åºç¨ï¼
#-Xclang -disable-llvm-passes ä¸ä½¿ç¨é»è®¤çpassä¼å
clang -S -emit-llvm -O1 -Xclang -disable-llvm-passes test.c -S -o test.ll

#ä½¿ç¨pass
opt -load-pass-plugin=mypass3.dll -passes=mypass3  test.ll -S -o test_opt.ll

#ç¼è¯ä½¿ç¨passåçexe
clang test_opt.ll -o test_opt.exe
#ç¼è¯ä½¿ç¨passåçexe
clang test.ll -o test.exe
</code></pre>
<p><strong>è¾åºç»æ</strong><br>
<code>è¿è¡test.exe</code>ï¼<strong>ä¸ä½¿ç¨</strong>passï¼è¾åºç»æå¦ä¸ï¼</p>
<pre><code>hello world!
</code></pre>
<p><code>è¿è¡test_opt.exe</code>ï¼<strong>ä½¿ç¨</strong>passåï¼è¾åºç»æå¦ä¸ï¼</p>
<pre><code>&gt;&gt; enter function main &lt;&lt;
hello world!
&gt;&gt; enter function func_A &lt;&lt;
&gt;&gt; enter function func_B &lt;&lt;
&gt;&gt; enter function func_A &lt;&lt;
</code></pre>
<p><strong>æä»¬æåå¨æä»¬è°ç¨å½æ°ä¹åææ¡©ï¼æå°åºè°ç¨çå½æ°</strong></p>
<p><strong>å¦æâ¤åæ¬¢â¤æ¬ç³»åæç¨ï¼å°±ç¹ä¸ªå³æ³¨å§ï¼åç»­ä¸å®ææ´æ°~</strong></p>


</div>
<div id="MySignature" role="contentinfo">
    <p>æ¬ææ¥èªåå®¢å­ï¼ä½èï¼<a href="https://www.cnblogs.com/ClownLMe/" target="_blank">ClownLMe</a>ï¼è½¬è½½è¯·æ³¨æåæé¾æ¥ï¼<a href="https://www.cnblogs.com/ClownLMe/p/19575719" target="_blank">https://www.cnblogs.com/ClownLMe/p/19575719</a></p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.004166666666666667" data-date-updated="2026-02-04 17:55">2026-02-04 17:49</span>&nbsp;
<a href="https://www.cnblogs.com/ClownLMe">ClownLMe</a>&nbsp;
éè¯»(<span id="post_view_count">40</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19575719);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19575719', targetLink: 'https://www.cnblogs.com/ClownLMe/p/19575719', title: 'LLVM Passå¿«éå¥é¨(å)ï¼ä»£ç ææ¡©' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ é¸¿èåºç¨å¼åUIåºç¡ç¬¬äºèï¼é¸¿èåºç¨ç¨åºæ¡æ¶æ ¸å¿è§£æä¸å®æ ]]></title>
    <link>https://www.cnblogs.com/san-xiu/p/19575201</link>
    <guid>7726aaf5f2a8c9e25099652324dffb06</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/san-xiu/p/19575201" title="åå¸äº 2026-02-04 16:36">
    <span role="heading" aria-level="2">é¸¿èåºç¨å¼åUIåºç¡ç¬¬äºèï¼é¸¿èåºç¨ç¨åºæ¡æ¶æ ¸å¿è§£æä¸å®æ</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="å­¦ä¹ ç®æ ">å­¦ä¹ ç®æ </h2>
<ol>
<li>å»ºç«é¸¿èåºç¨âå®è§-å¾®è§âå®æ´è®¤ç¥ï¼æç¡®åºç¨ãåºç¨ç¨åºåãHAP/HSPãç»ä»¶ãé¡µé¢çå±çº§å³ç³»ï¼çè§£ Stage æ¨¡åç¼è¯æä¸è¿è¡ææ¦å¿µçå¯¹åºé»è¾ï¼</li>
<li>æ¸æ°åºå Stage æ¨¡åä¸ FA æ¨¡åçæ ¸å¿å·®å¼ï¼çè§£ Stage æ¨¡åå¨èµæºå©ç¨ãéç½®ç®¡çãè·¨ç«¯ééç­å®éå¼ååºæ¯ä¸­çæ ¸å¿ä¼å¿ï¼</li>
<li>ææ¡ Stage æ¨¡åè¿ç¨/çº¿ç¨ç®¡çæºå¶ï¼çè§£ UIAbility ä¸ ExtensionAbility ççº¿ç¨éç¦»ç¹æ§ï¼ä»¥åå¤çº¿ç¨å¼åçæ ¸å¿æè·¯ï¼</li>
<li>çç»ææ¡ UIAbility å¨ module.json5 ä¸­çæ ¸å¿éç½®é¡¹åè§åï¼ç²¾åå®ä½ Stage å·¥ç¨æ ¸å¿æä»¶å¹¶çæ¸ä¾èµé¾è·¯ï¼</li>
<li>è½ç¬ç«å®æåºç¨åç§°/å¾æ ä¿®æ¹ãUIAbility éç½®è°æ´ãé¡µé¢å è½½è·¯å¾åæ¢ç­å®æï¼ç»åå·¥ç¨ç¼è¯æºå¶éªè¯ææå¹¶ææ¥åºç¡éç½®ä¸ç¼è¯éè¯¯ã</li>
</ol>
<p>ä¸ä¸èæä»¬ææ¡äºåºç¨éç½®ç­¾åçæºè°è¯ï¼æ¬èå¼å§ä»âåºç¨æ´ä½æ¶æâåå¥ï¼èç¦ Stage æ¨¡åæ ¸å¿äº¤äºç»ä»¶ UIAbility æ ¸å¿è½åå±å¼ï¼ç»åå·¥ç¨ç¼è¯æºå¶ï¼å¸®å©æå»ºé¸¿èåºç¨å¼ååºç¡è®¤ç¥ä½ç³»ï¼ä¸ºåç»­åºç¨çå½å¨æãContext ä¸ä¸æãè¿ç¨éä¿¡ç­è¿é¶åå®¹å­¦ä¹ æä¸åºç¡ã</p>
<h2 id="ä¸åé¡¾é¸¿èç³»ç»æ¶æ">ä¸ãåé¡¾é¸¿èç³»ç»æ¶æ</h2>
<p>é¸¿èç³»ç»éç¨åå±æ¶æï¼å±åå±ï¼å¼åèæ ¸å¿å·¥ä½éä¸­å¨é¡¶å±ä¸¤å±ï¼</p>
<ol>
<li><strong>åºç¨å±</strong>ï¼é¢åç¨æ·çåºç¨è½½ä½ï¼åå«ä¸¤ç§å½¢æ
<ul>
<li>åçåºç¨ï¼åºäº ArkTS å¼åï¼æ§è½æä¼ï¼è½æ·±åº¦è°ç¨åå¸å¼è½åï¼æ¯é¸¿èçææ ¸å¿ï¼</li>
<li>åæå¡ï¼åå®è£ãè½»éä¾¿æ·ï¼éåé«é¢æ¬¡ãä½çå­åºæ¯ï¼å¦æ«ç æ¯ä»ï¼ï¼</li>
</ul>
</li>
<li><strong>æ¡æ¶å±</strong>ï¼å¼åèç¦å¨æ¡æ¶å±ï¼æä¾ ArkUI ç»ä»¶ãç¶æç®¡çãè·¯ç±/å¯¼èªè·³è½¬ç­æ ¸å¿è½åï¼åç»­ç»ä»¶å¼åãå¸å±è®¾è®¡åä¾èµæ­¤å±ï¼</li>
<li><strong>ç³»ç»æå¡å±</strong>ï¼å°è£åå¸å¼è½åãè®¾å¤ç®¡çç­åºç¡æå¡ï¼å¼åèéè¿ API è°ç¨å³å¯ï¼æ éå³æ³¨åºå±å®ç°ï¼</li>
<li><strong>åæ ¸å±</strong>ï¼è´è´£è¿ç¨è°åº¦ãåå­ç®¡çç­åºå±æä½ï¼å¼åèæ éæ·±å¥æ¥è§¦ã</li>
</ol>
<p><strong>å¾ 1ï¼é¸¿èç³»ç»æ¶æå¾</strong> - å±ç¤ºåå±æ¶æå±çº§å³ç³»ï¼æ æ³¨å¼åèæ ¸å¿å³æ³¨çåºç¨å±ä¸æ¡æ¶å±ã</p>
<p><img alt="é¸¿èç³»ç»æ¶ææå­¦çæ¬" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3730991/202601/3730991-20260102093207059-982384169.png" class="lazyload"></p>
<blockquote>
<p>HarmonyOS 5.0 å¼å§å½»åºå®æ Linux åæ ¸åå®åå¼æ¾æºä»£ç é¡¹ç®ï¼AOSPï¼çå¨é¢æ¿æ¢ï¼éç¨çº¯é¸¿èåæ ¸ï¼HarmonyOS Kernelï¼ï¼å®ç°å¨æ èªç ãæ¬é¶æ®µææåå®¹ååºäºé¸¿è 5.0~6.0 çæ¬è¿è¡åºç¨å¼åè®²è§£ã</p>
</blockquote>
<h2 id="äºç¨åºæ¡æ¶æå¡ability-kit">äºãç¨åºæ¡æ¶æå¡ï¼Ability Kitï¼</h2>
<h3 id="ä¸æ ¸å¿å®ä¹">ï¼ä¸ï¼æ ¸å¿å®ä¹</h3>
<p>Ability Kitï¼ç¨åºæ¡æ¶æå¡ï¼æ¯é¸¿èç³»ç»ä¸ºåºç¨æä¾çæ ¸å¿è¿è¡æ¶åºç¡æ¡æ¶ï¼æ½è±¡æç¼åºç¨å¼åæéæ ¸å¿è½åï¼æä¾æ ååç»ä»¶ä½ç³»åè¿è¡æºå¶ã<strong>æ ¸å¿ä»·å¼æ¯è®©å¼åèåºäºç»ä¸æ¨¡åå¼ååºç¨ï¼åæ¶ä¿éåºç¨å¨å¤è®¾å¤ãå¤åºæ¯ä¸çå¼å®¹æ§ä¸æ§è½</strong>ã</p>
<h3 id="äºæ ¸å¿è½åä¸ä½¿ç¨åºæ¯">ï¼äºï¼æ ¸å¿è½åä¸ä½¿ç¨åºæ¯</h3>
<table>
<thead>
<tr>
<th>è½åèå´</th>
<th>å·ä½åå®¹</th>
<th>å¸åä½¿ç¨åºæ¯</th>
</tr>
</thead>
<tbody>
<tr>
<td>çå½å¨æä¸è¿ç¨ç®¡ç</td>
<td>åºç¨/ç»ä»¶è¿ç¨åå»ºéæ¯ãçå½å¨æè°åº¦</td>
<td>å¤ Module åºç¨å¼åï¼HAP/HSP åå·¥å®ç°åè½</td>
</tr>
<tr>
<td>ç»ä»¶äº¤äºè½å</td>
<td>ç»ä»¶é´/åºç¨é´è·³è½¬ãè·¨è®¾å¤æµè½¬</td>
<td>åå¬åºç¨åå¯å¨è§é¢ä¼è®®ç»ä»¶ãè´­ç©åºç¨è·³è½¬æ¯ä»åºç¨ãè§é¢è·¨è®¾å¤æµè½¬</td>
</tr>
<tr>
<td>åºç¡æ¯æè½å</td>
<td>ä¸ä¸æç¯å¢ãç³»ç»äºä»¶çå¬ãå¯å¨æ¡æ¶ãæå¾æ¡æ¶ç­</td>
<td>åºç¨å¿«æ·æ¹å¼éç½®ãç¨åºè®¿é®æ§å¶ãå¯ç èªå¨å¡«å</td>
</tr>
</tbody>
</table>
<h3 id="ä¸æ ¸å¿ç¹å¾">ï¼ä¸ï¼æ ¸å¿ç¹å¾</h3>
<ol>
<li><strong>æ ååå¼åèå¼</strong>ï¼æ½è±¡åºç¨å¼åéç¨è½åï¼æä¾ç»ä¸çç»ä»¶ä½ç³»ãçå½å¨æè§åï¼éä½è·¨è®¾å¤/è·¨çæ¬ééææ¬ï¼</li>
<li><strong>é«æèµæºè°åº¦</strong>ï¼ç»ä¸ç®¡çåºç¨è¿ç¨/çº¿ç¨ï¼ä¼åç»ä»¶å¯å¨ãåå­å ç¨ç­æ§è½ææ ï¼</li>
<li><strong>ç³»ç»è½åå°è£</strong>ï¼åç½®æå¾æ¡æ¶ãå¯å¨æ¡æ¶ãæµè½¬è½åç­ï¼æ éå¼åèæå¨å¯¹æ¥åºå±ç³»ç» APIï¼</li>
<li><strong>å¤åºæ¯æ¯æ</strong>ï¼éè¿ ExtensionAbility è¦çå¤ä»½ãè¾å¥æ³ãå¡çç­æ  UI/è½» UI åºæ¯ï¼å¹³è¡¡åè½æ©å±ä¸ç³»ç»ç®¡æ§ã</li>
</ol>
<h3 id="åæ ¸å¿å³è">ï¼åï¼æ ¸å¿å³è</h3>
<ul>
<li><strong>ArkUI</strong>ï¼UIAbility ç»ä»¶ä¸­å¯ä½¿ç¨ ArkUI çç»ä»¶ãäºä»¶ãå¨æãç¶æç®¡çç­è½åå®ç°çé¢å¼åï¼</li>
<li><strong>ArkTS</strong>ï¼æä¾è¯­è¨è¿è¡æ¶è½åï¼æ¯æ Ability Kit çä»£ç æ§è¡ï¼</li>
<li><strong>Hvigor</strong>ï¼é¸¿èå®æ¹æå»ºå·¥å·ï¼ä¸º Ability Kit ç¸å³ç»ä»¶ä¸éç½®æä¾ç¼è¯æå»ºè½åï¼å®ç°ä»£ç ä¸éç½®çå·¥ç¨åè½å°ã</li>
</ul>
<h2 id="ä¸é¸¿èåºç¨æ¨¡å">ä¸ãé¸¿èåºç¨æ¨¡å</h2>
<h3 id="ä¸æ ¸å¿å®ä¹ä¸ææè¦ç´ ">ï¼ä¸ï¼æ ¸å¿å®ä¹ä¸ææè¦ç´ </h3>
<p>åºç¨æ¨¡åæ¯ Ability Kit å¯¹åºç¨å¼åè½åçæ½è±¡å°è£ï¼å®ä¹åºç¨çç»ä»¶ä½ç³»ãè¿è¡æºå¶ãéç½®è§èç­æ ¸å¿è§åï¼æ ¸å¿ææè¦ç´ å¦ä¸ï¼</p>
<table>
<thead>
<tr>
<th>ææè¦ç´ </th>
<th>æ ¸å¿ä½ç¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>åºç¨ç»ä»¶</td>
<td>åºç¨è¿è¡å¥å£ï¼éè¿çå½å¨æåè°æç¥ç¶æåå</td>
</tr>
<tr>
<td>è¿ç¨/çº¿ç¨æ¨¡å</td>
<td>å®ä¹è¿ç¨/çº¿ç¨çåå»ºãéæ¯åéä¿¡æ¹å¼</td>
</tr>
<tr>
<td>ä»»å¡ç®¡çæ¨¡å</td>
<td>å®ä¹ä»»å¡åå»ºãéæ¯åä¸ç»ä»¶çå³èï¼ä»ç³»ç»åºç¨ï¼</td>
</tr>
<tr>
<td>åºç¨éç½®æä»¶</td>
<td>å­å¨åºç¨/ç»ä»¶éç½®ãæéç­ä¿¡æ¯ï¼ä¾ç¼è¯/è¿è¡é¶æ®µä½¿ç¨</td>
</tr>
</tbody>
</table>
<h3 id="äºæ¼è¿åç¨fa-æ¨¡å--stage-æ¨¡å">ï¼äºï¼æ¼è¿åç¨ï¼FA æ¨¡å â Stage æ¨¡å</h3>
<table>
<thead>
<tr>
<th>æ¨¡åç±»å</th>
<th>ééçæ¬</th>
<th>æ ¸å¿ç¶æ</th>
<th>å®æ¹å¼åä¼å¿</th>
</tr>
</thead>
<tbody>
<tr>
<td>FA æ¨¡å</td>
<td>API 7~8</td>
<td>å·²åæ­¢æ´æ°</td>
<td>-</td>
</tr>
<tr>
<td>Stage æ¨¡å</td>
<td>API 9+</td>
<td>ä¸»æ¨ä¸é¿ææ¼è¿</td>
<td>1. ç»ä»¶èè´£æ¸æ°ï¼å¼åæçæ´é«ï¼2. èµæºå ç¨æ´ä½ï¼å¯å¨éåº¦æ´å¿«ï¼3. è·¨ç«¯ééæ´ä¾¿æ·ï¼4. ç³»ç»è½åéææ´ç®åï¼5. ç¼è¯åå±è®¾è®¡ï¼æ¯ææ¨¡åæéç¼è¯ï¼æåå¼åæç</td>
</tr>
</tbody>
</table>
<h3 id="ä¸fa-æ¨¡åä¸-stage-æ¨¡åæ ¸å¿å·®å¼">ï¼ä¸ï¼FA æ¨¡åä¸ Stage æ¨¡åæ ¸å¿å·®å¼</h3>
<table>
<thead>
<tr>
<th>å¯¹æ¯ç»´åº¦</th>
<th>FA æ¨¡å</th>
<th>Stage æ¨¡å</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç»ä»¶ä½ç³»</td>
<td>Page/Service/DataAbilityï¼å¿åå¯¹è±¡ï¼</td>
<td>UIAbility+ExtensionAbilityï¼ç±»ç»§æ¿ï¼</td>
</tr>
<tr>
<td>å¼ææºå¶</td>
<td>æ¯ä¸ªç»ä»¶ç¬äº« ArkTS å¼æå®ä¾</td>
<td>ææç»ä»¶å±äº«ä¸ä¸ª ArkTS å¼æå®ä¾</td>
</tr>
<tr>
<td>è¿ç¨æ¨¡å</td>
<td>ä¸»è¿ç¨+æ¸²æè¿ç¨</td>
<td>ä¸»è¿ç¨+å¯éç½®ç¬ç«è¿ç¨ï¼ExtensionAbilityæ¯æè¿ç¨èªå®ä¹ï¼</td>
</tr>
<tr>
<td>çº¿ç¨æ¨¡å</td>
<td>å¼æå®ä¾å¨éä¸»çº¿ç¨åå»ºï¼ä¸æ¯æè¿ç¨åå¯¹è±¡å±äº«</td>
<td>å¼æå®ä¾å¨ä¸»çº¿ç¨åå»ºï¼æ¯æè¿ç¨åå¯¹è±¡å±äº«</td>
</tr>
<tr>
<td>éç½®æä»¶</td>
<td>åä¸ config.jsonï¼æ··ç¼å¨å±/æ¨¡åéç½®ï¼</td>
<td>app.json5ï¼åºç¨çº§ï¼+ module.json5ï¼æ¨¡åçº§ï¼</td>
</tr>
<tr>
<td>ç¼è¯æºå¶</td>
<td>æ´ä½å·¥ç¨ç¼è¯ï¼ä¿®æ¹å±é¨ééæ°ç¼è¯å¨é¨</td>
<td>åå±ç¼è¯ï¼æ¯ææ¨¡å/å¨å±ç¼è¯ï¼æéç¼è¯ä¿®æ¹é¨åï¼æçæ´é«</td>
</tr>
</tbody>
</table>
<h3 id="åstage-æ¨¡åæ ¸å¿æ¶æä¸ç»æ">ï¼åï¼Stage æ¨¡åæ ¸å¿æ¶æä¸ç»æ</h3>
<h4 id="1-stage-æ¨¡åæ ¸å¿æ¶æå¾">1. Stage æ¨¡åæ ¸å¿æ¶æå¾</h4>
<p><strong>å¾ 2ï¼Stage æ¨¡åç¼è¯æ-è¿è¡ææ¶æå¾</strong> - å·¦ä¾§ä¸ºè¿è¡ææ¦å¿µï¼åºç¨å®ä¾åæµç¨ï¼ï¼å³ä¾§ä¸ºç¼è¯ææ¦å¿µï¼å¼åæåæµç¨ï¼ï¼å±ç¤ºâæ¨¡åâç»ä»¶âé¡µé¢âçæåä¸å®ä¾åå¯¹åºå³ç³»ã</p>
<p><img alt="Stageæ¨¡åå¼åæ¦è¿°" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3730991/202602/3730991-20260204163601834-1982599659.png" class="lazyload"></p>
<h4 id="2-æ ¸å¿ç»æåå">2. æ ¸å¿ç»æåå</h4>
<ol>
<li><strong>AbilityStage</strong>ï¼å¯éå®ç°ï¼è¥ä¸å®ç°ï¼ç³»ç»é»è®¤åå»ºï¼ï¼Entry/Feature ç±»å HAP çè¿è¡æ¶è½½ä½ï¼<strong>ä¸ä¸ª HAP å¯¹åºä¸ä¸ª AbilityStage å®ä¾</strong>ï¼è´è´£ HAP çåå§åãç»ä»¶åå»ºååãæ¨¡åçº§çå½å¨æç®¡çï¼</li>
<li><strong>UIAbility</strong>ï¼å¸¦ UI çæ ¸å¿äº¤äºç»ä»¶ï¼éè¿ WindowStage ç®¡ççªå£ï¼å®ç°ç¨æ·äº¤äºï¼</li>
<li><strong>ExtensionAbility</strong>ï¼é¢åç¹å®åºæ¯çæ©å±ç»ä»¶ï¼å¦ EntryBackupAbilityãInputMethodExtensionAbilityï¼ï¼æ¯ UIAbility çæ©å±ï¼ç¨äºæ çé¢çåå°è½åï¼å¦å¤ä»½ãè¾å¥æ³ï¼ï¼</li>
<li><strong>WindowStage</strong>ï¼ä¸ UIAbility å®ä¾ç»å®ççªå£ç®¡çå¨ï¼è´è´£çªå£åå»ºãéæ¯ï¼ä¸º ArkUI æä¾ç»å¶åºåï¼</li>
<li><strong>Context</strong>ï¼æ´¾çç±»ï¼ApplicationContext/AbilityStageContext/UIAbilityContextï¼ä¸ºä¸åå±çº§æä¾è¿è¡æèµæºè°ç¨ãæéç®¡çç­è½åï¼</li>
<li><strong>ä¸çº§çå½å¨æ</strong>ï¼Applicationï¼åºç¨çº§ï¼â AbilityStageï¼æ¨¡åçº§ï¼â UIAbility/ExtensionAbilityï¼ç»ä»¶çº§ï¼ï¼ç± Ability Kit ç»ä¸è°åº¦ï¼å®ç°èµæºç²¾ç»åç®¡çã</li>
</ol>
<h4 id="3-æ ¸å¿å±çº§å³ç³»è¯´æ">3. æ ¸å¿å±çº§å³ç³»è¯´æ</h4>
<ol>
<li>å±çº§å³èï¼Applicationï¼åºç¨å¨å±ï¼â AbilityStageï¼HAP æ¨¡åï¼â UIAbility/ExtensionAbilityï¼ç»ä»¶ï¼ï¼ä¾æ¬¡ä¾èµåå»ºï¼</li>
<li>ææå³ç³»ï¼UIAbilityâWindowStageâWindowâArkUI Pageï¼ä¸åå±çº§åææå¯¹åº Contextï¼</li>
<li>å¯¹åºå³ç³»ï¼Application â Bundleï¼AbilityStage â HAPï¼1:1 ç»å®ï¼ã</li>
</ol>
<pre><code># ç¼è¯æï¼å¼å/æåï¼
åºç¨ç¨åºåï¼Bundleï¼ â æ¨¡åï¼HAP/HSPï¼ â ç»ä»¶ï¼UIAbility/ExtensionAbilityï¼ â é¡µé¢ï¼Pageï¼

# è¿è¡æï¼å®è£/å¯å¨ï¼
Applicationï¼åºç¨å¨å±å®ä¾ï¼ â AbilityStageï¼HAP æ¨¡åå®ä¾ï¼ â ç»ä»¶å®ä¾ â é¡µé¢æ¸²æ
</code></pre>
<h3 id="äºstage-æ¨¡åå¼åä¸è¿è¡å¨æµç¨">ï¼äºï¼Stage æ¨¡åå¼åä¸è¿è¡å¨æµç¨</h3>
<h4 id="1-å¼åé¶æ®µ">1. å¼åé¶æ®µ</h4>
<p>å¼åèåºäº Stage æ¨¡åå®æåºç¨åè½å¼åä¸éç½®ï¼æ ¸å¿å·¥ä½åæ¬ï¼</p>
<ul>
<li><strong>åºç¨ç»ä»¶å¼å</strong>ï¼éè¿ UIAbility ç»ä»¶å¼åå¸¦çé¢çç¨æ·äº¤äºæ¨¡åï¼å¦åºç¨ä¸»çé¢ï¼ï¼éè¿ ExtensionAbility ç­ç»ä»¶å¼ååç±»æ©å±åè½æ¨¡åï¼</li>
<li><strong>æ¨¡åè§£è¦è®¾è®¡</strong>ï¼ä¸ºåå°ä¸ååè½æ¨¡åé´çä¾èµåè¦åï¼å¯å° UIAbility ååç±» ExtensionAbility çå®ç°åå«æ¾å¨ä¸åç HAP åä¸­ï¼åæ¶å°ä¸¤èå±åä¾èµçéç¨åè½æ¾å¨ HSP åä¸­ï¼</li>
<li><strong>éç½®æä»¶ç¼å</strong>ï¼å¨ app.json5 ä¸­éç½®åºç¨åç§°ãçæ¬å·ãåºç¨å¾æ ç­å¨å±ä¿¡æ¯ï¼å¨ module.json5 ä¸­éç½®å¯¹åº HAP åä¸çç»ä»¶æ¸åãç»ä»¶æéãè¿ç¨å½å±ç­æ¨¡åçº§ä¿¡æ¯ï¼éç½®ä¿¡æ¯ä¼å¨åºç¨ç¼è¯ãå®è£æ¶è¢«ç³»ç»è§£æï¼ä¾¿äºç³»ç»åå¶ä»æ¨¡åè¯å«ãäº¤äºã</li>
</ul>
<h4 id="2-è¿è¡é¶æ®µ">2. è¿è¡é¶æ®µ</h4>
<p>å½åºç¨å®è£å°è®¾å¤è¿è¡æ¶ï¼ç³»ç»éè¿ä¸å¥åºç¨è¿ç¨åçº¿ç¨çç®¡çæºå¶ï¼ç¡®ä¿åè½çæåºè¿è¡ï¼</p>
<ul>
<li>è¿ç¨æ¯åºç¨è¿è¡çåºç¡ååï¼è´è´£èµæºåéåéç¦»ï¼</li>
<li>çº¿ç¨æ¯è¿ç¨åçæ§è¡ååï¼è´è´£å·ä½ä»£ç é»è¾çæ§è¡ï¼</li>
<li>Ability Kit ç»ä¸ç®¡æ§è¿ç¨/çº¿ç¨çåå»ºãéæ¯åè°åº¦ï¼ä¿éåºç¨ç¨³å®è¿è¡ã</li>
</ul>
<h4 id="3-è¿ç¨æ¨¡å">3. è¿ç¨æ¨¡å</h4>
<ul>
<li>åºç¡è§åï¼UIAbility ç»ä»¶é»è®¤è¿è¡å¨åºç¨ä¸»è¿ç¨ä¸­ï¼ ExtensionAbility ç»ä»¶<strong>è¿ç¨è¡ä¸ºå¯éç½®</strong>ï¼å¯éè¿<code>module.json5</code>ä¸­ç<code>process</code>å­æ®µè¿è¡éç½®ï¼</li>
<li>éç½®æ¹å¼ï¼å¨ ExtensionAbility ç»ä»¶çéç½®èç¹ä¸­æ·»å <code>process</code>å­æ®µï¼å¼ä»¥<code>:</code>å¼å¤´è¡¨ç¤ºéç½®ä¸ºç¬ç«è¿ç¨è¿è¡ï¼æªéç½®åé»è®¤ä¸ UIAbility åè¿ç¨è¿è¡ï¼</li>
<li>éä¿¡è§åï¼ExtensionAbility ä¸ UIAbility åè¿ç¨æ¶ä¸ºçº¿ç¨éç¦»ç¶æï¼æ°æ®åèµæºä¸ç´æ¥äºéï¼ç¬ç«è¿ç¨æ¶ééè¿è·¨è¿ç¨éä¿¡æºå¶å®ç°æ°æ®äº¤äºï¼</li>
<li>æ ¸å¿ä»·å¼ï¼è¿ç¨å¯éç½®æ§å¼é¡¾äºåºç¨æ§è½åç¨³å®æ§ââè½»éæ©å±ç»ä»¶ä¸ä¸»è¿ç¨å±äº«èµæºï¼åå°è¿ç¨å¼éï¼æ ¸å¿/é«éç¦»æ§æ©å±ç»ä»¶ç¬ç«è¿ç¨è¿è¡ï¼é¿ååä¸ç»ä»¶å¼å¸¸å½±åæ´ä¸ªåºç¨ã</li>
</ul>
<h4 id="4-ç»ä»¶éä¿¡æºå¶">4. ç»ä»¶éä¿¡æºå¶</h4>
<p>é¸¿èæä¾å¤å¥éä¿¡æºå¶ï¼ééä¸åç»ä»¶ç±»åãä¸åè¿ç¨å½å±çéä¿¡åºæ¯ï¼æ ¸å¿åç±»å¦ä¸ï¼</p>
<ul>
<li><strong>è¿ç¨åéä¿¡</strong>ï¼éç¨äºåä¸è¿ç¨åç UIAbility ä¸ ExtensionAbilityãUIAbility ä¸é¡µé¢é´ï¼ä¼åä½¿ç¨<strong>EventHub</strong>ï¼è½»éé«æãæ éå¤æéç½®ï¼</li>
<li><strong>è·¨è¿ç¨éä¿¡</strong>ï¼éç¨äºè·¨åºç¨ãç¬ç«è¿ç¨ç HAP ä¹é´ãç¬ç«è¿ç¨ ExtensionAbility ä¸ UIAbility ä¹é´ï¼ä½¿ç¨<strong>IPC</strong>åºç¡éä¿¡æºå¶ï¼</li>
<li><strong>ExtensionAbility ä¸å±éä¿¡</strong>ï¼ä¸åç±»åç ExtensionAbility æä¾ä¸å±éä¿¡æ¥å£ï¼ééèªèº«ä¸å¡åºæ¯ï¼æ ¸å¿æ¥å£å¦ä¸ï¼
<ul>
<li>ServiceExtensionAbilityï¼éè¿<code>connectServiceExtensionAbility()</code>å»ºç«è¿æ¥ï¼å®ç°ä¸»ä»ç»ä»¶çååéä¿¡ï¼</li>
<li>DataShareExtensionAbilityï¼éè¿<code>createDataShareHelper()</code>åå»ºå©æå®ä¾ï¼å®ç°æ°æ®çå¢å æ¹æ¥å±äº«ã</li>
</ul>
</li>
</ul>
<blockquote>
<p>çº¯ ArkTS åè¿ç¨åºç¨ï¼ä¼åä½¿ç¨ EventHub å®ç°ç»ä»¶/çº¿ç¨é´éä¿¡ï¼æ¶åç¬ç«è¿ç¨æè·¨åºç¨äº¤äºæ¶ï¼æ ¹æ®ç»ä»¶ç±»åéæ©å¯¹åºä¸å±éä¿¡æ¥å£æåºç¡ IPC æºå¶ã</p>
</blockquote>
<h4 id="5-çº¿ç¨æ¨¡å">5. çº¿ç¨æ¨¡å</h4>
<ul>
<li>åºç¡æ¯æï¼Stage æ¨¡åæä¾ workerãtaskpool ç­æºå¶æ¯æåºç¨å¤çº¿ç¨å¼ååºæ¯ï¼</li>
<li>å¼åå»ºè®®ï¼åºç¨è¥æå¤æçèæ¶é»è¾ï¼å¦å¤§æ°æ®å¤çãç½ç»è¯·æ±ãå¤æè®¡ç®ï¼ï¼å»ºè®®éè¿åå»º worker çº¿ç¨çæ¹å¼å¤çï¼é¿åé»å¡ä¸»çº¿ç¨ï¼UI çº¿ç¨ï¼ï¼ä¿éåºç¨çé¢æµçæ§ï¼</li>
<li>çº¿ç¨éç¦»ï¼æ è®º ExtensionAbility ä¸ UIAbility åè¿ç¨è¿æ¯ç¬ç«è¿ç¨ï¼å¶åé¨åä¸ºçº¿ç¨éç¦»è®¾è®¡ï¼èæ¶é»è¾åéæ¾å¨å­çº¿ç¨æ§è¡ï¼ä¸å¯ç´æ¥å¨ç»ä»¶ä¸»çº¿ç¨å¤çã</li>
</ul>
<h3 id="å­stage-æ¨¡åå¼åæµç¨">ï¼å­ï¼Stage æ¨¡åå¼åæµç¨</h3>
<table>
<thead>
<tr>
<th>æ ¸å¿ä»»å¡</th>
<th>å³é®åå®¹</th>
</tr>
</thead>
<tbody>
<tr>
<td>åºç¨ç»ä»¶å¼å</td>
<td>å¼å UIAbility/ExtensionAbilityï¼æåè½æåå°ä¸å HAPï¼éç¨è½åæ½ç¦»å° HSP</td>
</tr>
<tr>
<td>è¿ç¨/çº¿ç¨æ¨¡åéé</td>
<td>åºäºä¸å¡éæ±éç½® ExtensionAbility è¿ç¨å½å±ï¼èæ¶é»è¾éè¿ worker å¤çï¼éµå¾ªçº¿ç¨éç¦»è§å</td>
</tr>
<tr>
<td>éç½®æä»¶ç¼å</td>
<td>éç½® app.json5ï¼å¨å±ï¼/module.json5ï¼æ¨¡åï¼çåºç¨/ç»ä»¶/è¿ç¨ä¿¡æ¯ï¼ä¿è¯è·¯å¾ä¸è¯­æ³åè§</td>
</tr>
<tr>
<td>éä¿¡æºå¶å®ç°</td>
<td>æè¿ç¨å½å±åç»ä»¶ç±»åéæ© EventHubãä¸å±æ¥å£æ IPC å®ç°éä¿¡</td>
</tr>
<tr>
<td>ææéªè¯</td>
<td>åºäºæ¨¡åç¼è¯éªè¯å±é¨ä¿®æ¹ææï¼å¨å±ç¼è¯çæå®æ´åºç¨å</td>
</tr>
</tbody>
</table>
<h2 id="åé¸¿èåºç¨ç»æç»æ">åãé¸¿èåºç¨ç»æç»æ</h2>
<h3 id="ä¸åºç¨ç¨åºåbundle">ï¼ä¸ï¼åºç¨ç¨åºåï¼Bundleï¼</h3>
<ul>
<li>å®ä¹ï¼é¸¿èåºç¨ååãå®è£çæå°åä½ï¼åç¼<code>.app</code>ï¼ï¼ç±å¨å±ç¼è¯æ´åææ HAP/HSP æ¨¡åç¼è¯äº§ç©çæï¼</li>
<li>ææï¼Entry HAPï¼å¿éï¼åºç¨å¯å¨å¥å£ï¼ãFeature HAPï¼å¯éï¼æ©å±åè½ï¼ãHSPï¼å¯éï¼ä»£ç /èµæºå±äº«ï¼ï¼</li>
<li>å¤åæºå¶ï¼1 ä¸ª Bundle å¯åå«å¤ä¸ª HAPï¼Entry HAP æå¤ 1 ä¸ªï¼Feature HAP ä¸éï¼ï¼HAP ä¹é´éè¿ HSP å±äº«ä»£ç /èµæºï¼åæ¨¡åå¯ç¬ç«ç¼è¯ï¼æç»æ´åè³ Bundleã</li>
</ul>
<h3 id="äºæ¨¡åhaphsp">ï¼äºï¼æ¨¡åï¼HAP/HSPï¼</h3>
<table>
<thead>
<tr>
<th>æ¨¡åç±»å</th>
<th>æ ¸å¿ä½ç¨</th>
<th>å³é®ç¹å¾</th>
<th>è¿è¡æå³èå®ä¾</th>
<th>å¸åä½¿ç¨åºæ¯</th>
<th>ç¼è¯ç¹æ§</th>
</tr>
</thead>
<tbody>
<tr>
<td>Entry HAP</td>
<td>åºç¨ä¸»æ¨¡åï¼æä¾å¯å¨å¥å£</td>
<td>å¿éï¼åå«ä¸» UIAbilityï¼å¯åç¬å®è£è¿è¡</td>
<td>å¯¹åº 1 ä¸ª AbilityStage å®ä¾</td>
<td>åºç¨ä¸»çé¢ãæ ¸å¿äº¤äºåè½</td>
<td>å¯ç¬ç«ç¼è¯ä¸º HAP åï¼æ¯æåç¬è¿è¡éªè¯</td>
</tr>
<tr>
<td>Feature HAP</td>
<td>æ©å±åè½æ¨¡å</td>
<td>å¯éï¼ä¾èµ Entry HAP è¿è¡ï¼æ¯ææéå è½½</td>
<td>å¯¹åº 1 ä¸ª AbilityStage å®ä¾</td>
<td>å¤ä»½ãè¾å¥æ³ç­æ©å±åè½</td>
<td>å¯ç¬ç«ç¼è¯ï¼éç»å Entry HAP è¿è¡</td>
</tr>
<tr>
<td>HSP</td>
<td>ä»£ç /èµæºå±äº«å</td>
<td>å¯éï¼æ ç¬ç«è¿è¡ç»ä»¶ï¼ä»ç¨äºæ¨¡åé´å¤ç¨</td>
<td>æ å¯¹åºç AbilityStage å®ä¾</td>
<td>éç¨å·¥å·ç±»ãå¸¸éå®ä¹ãå¬å±èµæº</td>
<td>ç¼è¯ä¸ºå±äº«åï¼è¢«å¶ä» HAP ä¾èµè°ç¨</td>
</tr>
</tbody>
</table>
<blockquote>
<p>å³äºåçç±»åä»¥åä½¿ç¨åå»ºæ¹æ³ï¼æä»¬ä¼å¨é¡¹ç®é¶æ®µå­¦ä¹ ææ¡ã</p>
</blockquote>
<h3 id="ä¸æ ¸å¿ç»ä»¶stage-æ¨¡åä¸¤ç±»ç»ä»¶">ï¼ä¸ï¼æ ¸å¿ç»ä»¶ï¼Stage æ¨¡åä¸¤ç±»ç»ä»¶ï¼</h3>
<table>
<thead>
<tr>
<th>ç»ä»¶ç±»å</th>
<th>æ ¸å¿ä½ç¨</th>
<th>äº¤äºæ¹å¼</th>
<th>å¼åæ¹å¼</th>
<th>è¿ç¨é»è®¤éç½®</th>
<th>ç»åç±»å/ç¤ºä¾æä»¶</th>
</tr>
</thead>
<tbody>
<tr>
<td>UIAbility</td>
<td>åºç¨å¥å£+çªå£ç®¡çï¼å®ç°ç¨æ·äº¤äº</td>
<td>æ¡é¢å¯å¨ãå¯è§åäº¤äº</td>
<td>é¢åå¯¹è±¡å¼åï¼ç±»ç»§æ¿ï¼</td>
<td>åºç¨ä¸»è¿ç¨</td>
<td>EntryAbility.etsï¼åºç¨ä¸»çé¢ï¼</td>
</tr>
<tr>
<td>ExtensionAbility</td>
<td>å¤ä»½/è¾å¥æ³ç­æ  UI/è½» UI åºæ¯</td>
<td>ç³»ç»/äºä»¶è§¦å</td>
<td>é¢åå¯¹è±¡å¼åï¼æ´¾çç±»å®ç°ï¼</td>
<td>åºç¨ä¸»è¿ç¨</td>
<td>EntryBackupAbility.etsï¼å¤ä»½ï¼ãDataShareExtensionAbility.etsï¼æ°æ®å±äº«ï¼</td>
</tr>
</tbody>
</table>
<h2 id="äºå·¥ç¨ç»æ">äºãå·¥ç¨ç»æ</h2>
<p>å»¶ç¨ä¸ä¸èåå»ºçé¡¹ç®<code>FirstApplication</code>ï¼åºäºé¸¿è 5.0 API 12 + DevEco Studio 6.0+ï¼ï¼å·¥ç¨æ ¸å¿ç»æå¦ä¸ï¼å¶ä¸­<code>build</code>ç®å½ä¸ºç¼è¯åèªå¨çæï¼<code>build-profile.json5</code>å<code>hvigorfile.ts</code>ä¸ºé¸¿è Hvigor æå»ºå·¥å·çæ ¸å¿ç¼è¯éç½®æä»¶ï¼å®ç°å·¥ç¨ä¸æ¨¡åçåå±ç¼è¯ç®¡çï¼</p>
<pre><code>FirstApplication                    
âââ AppScope/                # åºç¨å¨å±éç½®ç®å½
â   âââ resources/           # åºç¨å¨å±èµæºç®å½
â   â   âââ base/            # å¨å±åºç¡èµæºç®å½
â   â   â   âââ element/     # å¨å±å­ç¬¦ä¸²ãé¢è²ç­éç½®
â   â   â   â   âââ string.json
â   â   â   âââ media/       # å¨å±åªä½èµæºï¼å±å å¾æ éç½®ãååºå¾æ ï¼
â   â   â   â   âââ app_icon.png // èªå®ä¹çåºç¨å¾æ 
â   â   â   â   âââ background.png
â   â   â   â   âââ foreground.png
â   â   â   â   âââ layered_image.json
â   â   â   âââ profile/     # å¨å±éç½®æä»¶ï¼å¦é¡µé¢è·¯ç±ãå¤ä»½éç½®ç­ï¼
â   âââ app.json5            # å¨å±éç½®æä»¶ï¼ååãçæ¬ãå¾æ ãåç§°ç­ï¼ä¾å¨å±ç¼è¯è§£æï¼
âââ entry/                   # Entry HAPä¸»æ¨¡åï¼æ ¸å¿å¼åç®å½ï¼
â   âââ build/               # æ¨¡åç¼è¯äº§ç©ç®å½ï¼ç¼è¯åèªå¨çæï¼å­æ¾entryæ¨¡åHAPåï¼
â   âââ src/
â   â   âââ main/            # entryæ¨¡åæ ¸å¿æºç ç®å½
â   â   â   âââ ets/         # ArkTSä»£ç ç®å½
â   â   â   â   âââ entryability/ # UIAbilityæ ¸å¿ç»ä»¶ç®å½
â   â   â   â   â   âââ EntryAbility.ets
â   â   â   â   âââ entrybackupability/ # å¤ä»½æ©å±ç»ä»¶ç®å½
â   â   â   â   â   âââ EntryBackupAbility.ets
â   â   â   â   âââ pages/   # é¡µé¢ç®å½
â   â   â   â       âââ Index.ets
â   â   â   â       âââ Home.ets
â   â   â   âââ resources/   # æ¨¡åçº§éæèµæºç®å½ï¼ç¼è¯æ¶èªå¨æåä¼åï¼
â   â   â   â   âââ base/    # åºç¡èµæºç®å½ï¼é»è®¤ä¸»é¢ï¼
â   â   â   â   â   âââ element/ # æ¨¡åçº§åç´ éç½®
â   â   â   â   â   âââ media/   # æ¨¡åçº§åªä½èµæº
â   â   â   â   â   â   âââ background.png
â   â   â   â   â   â   âââ foreground.png
â   â   â   â   â   â   âââ startIcon.png // é»è®¤ççªå£å¾æ 
â   â   â   â   â   â   âââ layered_image.json
â   â   â   â   âââ dark/    # æ·±è²æ¨¡å¼èµæºç®å½
â   â   â   â   âââ rawfile/ # åçæä»¶ç®å½ï¼æ éç¼è¯çéææä»¶ï¼
â   â   â   âââ module.json5 # Entry HAPæ¨¡åéç½®æä»¶ï¼ç»ä»¶ãæéãè¿ç¨ç­ï¼ä¾æ¨¡åç¼è¯è§£æï¼
â   âââ mock/                # æ¨¡ææ°æ®ç®å½ï¼æµè¯ç¨ï¼
â   âââ ohosTest/            # OpenHarmonyæµè¯ç®å½
â   âââ test/                # æ¬å°æµè¯ç®å½
â   âââ .gitignore           # Gitå¿½ç¥æä»¶éç½®
â   âââ build-profile.json5  # æ¨¡åç¼è¯éç½®æä»¶ï¼æå®SDKçæ¬ãç­¾åå³èç­ç¼è¯è§åï¼
â   âââ hvigorfile.ts        # æ¨¡åç¼è¯èæ¬ï¼Hvigoræå»ºå·¥å·æ¨¡åçº§æ§è¡å¥å£ï¼
âââ build/                   # å·¥ç¨å¨å±ç¼è¯äº§ç©ç®å½ï¼ç¼è¯åèªå¨çæï¼å­æ¾å¨å±æ´åçHAP/APPåï¼
âââ build-profile.json5      # å·¥ç¨å¨å±ç¼è¯éç½®æä»¶ï¼ç»ä¸ç®¡çæææ¨¡åç¼è¯è§åãç¼è¯æ¨¡å¼ï¼
âââ hvigorfile.ts            # å·¥ç¨å¨å±ç¼è¯èæ¬ï¼Hvigoræå»ºå·¥å·å¨å±æ§è¡å¥å£ï¼è§¦åæææ¨¡åç¼è¯ï¼
âââ oh-package.json5         # ohpmä¾èµéç½®æä»¶ï¼ç¼è¯åèªå¨è§£æä¸è½½ä¾èµï¼
âââ oh-package-lock.json5    # ohpmä¾èµçæ¬éå®æä»¶
</code></pre>
<blockquote>
<p>è¯´æï¼é¸¿èå·¥ç¨åºäº<strong>Hvigor</strong>ï¼é¸¿èå®æ¹èªç æå»ºå·¥å·ï¼å®ç°ç¼è¯ï¼éç¨<strong>æéç¼è¯</strong>ååï¼ä»ä¿®æ¹è¿çæ¨¡å/æä»¶ä¼éæ°ç¼è¯ï¼æªä¿®æ¹é¨åå¤ç¨åæç¼è¯äº§ç©ï¼æåå¼åæçï¼<code>build</code>ç®å½å é¤åå¯éè¿éæ°ç¼è¯çæï¼ä¸å½±åå·¥ç¨æºç ã</p>
</blockquote>
<h2 id="å­uiability-æ ¸å¿å®æ">å­ãUIAbility æ ¸å¿å®æ</h2>
<h3 id="ä¸æ ¸å¿å®ä½">ï¼ä¸ï¼æ ¸å¿å®ä½</h3>
<ol>
<li><strong>åºç¨å¥å£</strong>ï¼ç¨æ·ç¹å»åºç¨å¾æ åï¼ç³»ç»é¦ååå»ºå¹¶å¯å¨ UIAbility å®ä¾ï¼</li>
<li><strong>çªå£ç®¡çè½½ä½</strong>ï¼æ¯ä¸ª UIAbility å®ä¾å¯å¨åä¼åå»ºä¸ä¸ª WindowStageï¼çªå£ç®¡çå¨ï¼ï¼è´è´£çªå£çåå»ºãéæ¯ï¼å¹¶<strong>éè¿ WindowStage å è½½ ArkUI é¡µé¢</strong>ï¼</li>
<li><strong>å®ä¾æ¨¡å¼</strong>ï¼æ¯æåå®ä¾ãå¤å®ä¾ãæå®å®ä¾ç­éç½®ï¼éè¿ module.json5 ç<code>launchType</code>å­æ®µï¼ï¼æ»¡è¶³ä¸åä¸å¡åºæ¯éæ±ï¼</li>
<li><strong>ç¼è¯å³è</strong>ï¼UIAbility çç±»åãæä»¶è·¯å¾éä¸ module.json5 ä¸­<code>name</code>ã<code>srcEntry</code>éç½®å®å¨ä¸è´ï¼å¦åä¼å¯¼è´æ¨¡åç¼è¯å¤±è´¥ï¼æ æ³çæ HAP åï¼</li>
<li><strong>æéæ ¸å¿</strong>ï¼ä½ä¸ºåºç¨æ ¸å¿äº¤äºç»ä»¶ï¼UIAbility æ¯åºç¨æéç³è¯·åæ ¡éªçæ ¸å¿è½½ä½ï¼åå°å¯å¨å¶ä»ç»ä»¶éä¾èµä¸å±ç³»ç»æéã</li>
</ol>
<h3 id="äºæ ¸å¿éç½®">ï¼äºï¼æ ¸å¿éç½®</h3>
<h4 id="1-æ¨¡åçº§éç½®modulejson5">1. æ¨¡åçº§éç½®ï¼module.json5ï¼</h4>
<pre><code class="language-json">{
  "module": {
    "name": "entry", // æ¨¡ååç§°
    "type": "entry", // æ¨¡åç±»åï¼entry/feature/har/hsp
    "description": "$string:module_desc", // æ¨¡åæè¿°
    "mainElement": "EntryAbility", // é»è®¤å¯å¨ç»ä»¶
    "deviceTypes": [ // æ¯æçè®¾å¤ç±»å
      "phone"
    ],
    "deliveryWithInstall": true, // æ¯å¦éåºç¨å®è£äº¤ä»
    "installationFree": false, // æ¯å¦åå®è£
    "pages": "$profile:main_pages", // é¡µé¢è·¯ç±éç½®
    "abilities": [ // UIAbilityç»ä»¶éç½®
      {
        "name": "EntryAbility", // ç»ä»¶åç§°ï¼ä¸ä»£ç ç±»åä¸è´ï¼ç¼è¯æ ¡éªå³é®ï¼
        "srcEntry": "./src/main/ets/entryability/EntryAbility.ets", // å¥å£è·¯å¾ï¼å¿é¡»./å¼å¤´ï¼ç¼è¯æ ¡éªå³é®ï¼
        "description": "$string:EntryAbility_desc", // ç»ä»¶æè¿°
        "icon": "$media:layered_image", // ç»ä»¶å¾æ ï¼æ¨¡åçº§ï¼ä¸éåçæåµä¸ä¼åçæï¼
        "label": "$string:EntryAbility_label", // ç»ä»¶æ¾ç¤ºåç§°ï¼æ¨¡åçº§ï¼ä¼åçº§æ´é«ï¼
        "startWindowIcon": "$media:startIcon", // å¯å¨çªå£å¾æ 
        "startWindowBackground": "$color:start_window_background", // å¯å¨çªå£èæ¯
        "exported": true, // æ¯å¦åè®¸è·¨åºç¨è°ç¨
        "launchType": "singleton", // é»è®¤çå¯å¨æ¨¡å¼ï¼å¯ä»¥ä¸å
        "skills": [ // æ¡é¢å¾æ å¿éï¼ç¼ºå°åæ¡é¢æ åºç¨å¾æ 
          {
            "entities": [
              "entity.system.home" // æ¡é¢å¥å£æ è¯
            ],
            "actions": [
              "ohos.want.action.home" // æ¡é¢å¯å¨å¨ä½
            ]
          }
        ]
      }
    ],
    "extensionAbilities": [ // æ©å±ç»ä»¶éç½®
      {
        "name": "EntryBackupAbility", // å¤ä»½æ©å±ç»ä»¶åç§°
        "srcEntry": "./src/main/ets/entrybackupability/EntryBackupAbility.ets", 
        "type": "backup", // æ©å±ç±»åï¼backup/dataShare/inputMethodç­ï¼
        "exported": false, // ä»åé¨ä½¿ç¨
        "metadata": [ // æ©å±åæ°æ®
          {
            "name": "ohos.extension.backup", // åæ°æ®åç§°
            "resource": "$profile:backup_config" // åæ°æ®éç½®æä»¶
          }
        ]
      }
    ]
  }
}
</code></pre>
<h4 id="2-éç½®å³é®è§å">2. éç½®å³é®è§å</h4>
<ul>
<li><code>mainElement</code>ï¼Entry HAP å¿é¡»éç½®ä¸º UIAbilityï¼Feature HAP æ é»è®¤å¯å¨ç»ä»¶ï¼</li>
<li><code>name</code>ï¼ç»ä»¶åç§°å¿é¡»ä¸ä»£ç ä¸­å¯¼åºçç±»åä¸è´ï¼ä¸å¯éæä¿®æ¹ï¼ç¼è¯æ¶ä¼ä¸¥æ ¼æ ¡éªï¼</li>
<li><code>srcEntry</code>ï¼è·¯å¾éä»¥<code>./</code>å¼å¤´ï¼ä¸¥æ ¼å¹éæä»¶çç®å½/æä»¶åï¼åºåå¤§å°åï¼ï¼è·¯å¾éè¯¯ä¼ç´æ¥å¯¼è´ç¼è¯å¤±è´¥ï¼</li>
<li><code>exported</code>ï¼è·¨åºç¨è°ç¨çç»ä»¶éè®¾ä¸º trueï¼ä»åé¨ä½¿ç¨çç»ä»¶è®¾ä¸º false å³å¯ï¼</li>
<li><code>skills</code>ï¼ä» UIAbility ééç½®ï¼æ¡é¢å¾æ å±ç¤ºï¼ï¼ExtensionAbility æ ééç½®ï¼ç¼ºå¤±æéç½®ä¸å¨åæ¡é¢æ å¾æ ï¼ç¹å»å¾æ è¿å¥åºç¨è¯¦æé¡µï¼</li>
<li><code>type</code>ï¼ExtensionAbility å¿éå­æ®µï¼éä¸æ©å±ç±»åå¹éï¼å¦ backupãdataShareãinputMethod ç­ï¼ï¼</li>
<li><code>process</code>ï¼ExtensionAbility å¯ééç½®å­æ®µï¼ç¨äºè®¾ç½®è¿ç¨å½å±ï¼å¼ä»¥<code>:</code>å¼å¤´è¡¨ç¤ºç¬ç«è¿ç¨ï¼æªéç½®åé»è®¤ä¸ä¸»è¿ç¨åè¿ç¨ï¼</li>
<li>JSON è¯­æ³ï¼ç¦æ­¢æ«å°¾å¤ä½éå·ï¼éç½®é¡¹ãæä»¶/ç®å½åç§°ååºåå¤§å°åï¼è¯­æ³éè¯¯ä¼å¯¼è´ç¼è¯è§£æå¤±è´¥ã</li>
</ul>
<h4 id="3-å¨å±éç½®appjson5">3. å¨å±éç½®ï¼app.json5ï¼</h4>
<pre><code class="language-json">{
  "app": {
    "bundleName": "com.sanxiu.firstapp",
    "vendor": "example",
    "versionCode": 1000000,
    "versionName": "1.0.0",
    "icon": "$media:layered_image", // å¨å±åºç¨å¾æ 
    "label": "$string:app_name" // å¨å±åºç¨åç§°
  }
}
</code></pre>
<h4 id="4-å±å å¾æ éç½®layered_imagejson">4. å±å å¾æ éç½®ï¼layered_image.jsonï¼</h4>
<p><strong>è·¯å¾</strong>ï¼</p>
<ul>
<li>å¨å±ï¼AppScope/resources/base/media/layered_image.json</li>
<li>æ¨¡åçº§ï¼entry/src/main/resources/base/media/layered_image.json</li>
</ul>
<pre><code class="language-json">{
  "layered-image": {
    "background": "$media:background",
    "foreground": "$media:foreground"
  }
}
</code></pre>
<p><strong>æ ¸å¿è§å</strong>ï¼</p>
<ul>
<li>èµæºè¦çï¼ç¼è¯æ AppScope åæ¨¡ååéåèµæºï¼AppScope èµæºä¼åçº§æ´é«ï¼</li>
<li>æ¨¡åçº§ icon çæåæï¼UIAbility ç <code>skills</code> å­æ®µå¿é¡»åå«<code>entity.system.home</code>å<code>ohos.want.action.home</code>ï¼å¤ Ability æ¶å<code>mainElement</code>å¯¹åºéç½®ï¼</li>
<li>å¾æ å°ºå¯¸è§èï¼é¸¿èå±å å¾æ æ¨èåºç¡å°ºå¯¸ï¼foreground/background åä¸º<strong>1024Ã1024</strong>ï¼png æ ¼å¼ï¼éæèæ¯ï¼ï¼ç¼è¯æ¶ç³»ç»ä¼èªå¨ééä¸åè®¾å¤çå¾æ å°ºå¯¸ï¼æ éæå¨å¶ä½å¤å°ºå¯¸çæ¬ã</li>
</ul>
<h4 id="5-é¡µé¢è·¯ç±éç½®main_pagesjson">5. é¡µé¢è·¯ç±éç½®ï¼main_pages.jsonï¼</h4>
<p>éè¿ <code>New -&gt; Page -&gt; Empty Page</code> åå»ºçé¡µé¢ä¼èªå¨å¯¼å¥<code>main_pages.json</code>ï¼å¶ä»æ¹æ³åå»ºçé¡µé¢éè¦æå¨ç®¡çè·¯ç±éç½®ã</p>
<pre><code class="language-json">{
  "src": [
    "pages/Index",
    "pages/Home" // æ°å¢Homeé¡µé¢è·¯å¾
  ]
}
</code></pre>
<h3 id="ä¸é¡µé¢å è½½æ ¸å¿é»è¾entryabilityets">ï¼ä¸ï¼é¡µé¢å è½½æ ¸å¿é»è¾ï¼EntryAbility.etsï¼</h3>
<pre><code class="language-typescript">import UIAbility from '@ohos.app.ability.UIAbility';
import window from '@ohos.window';
import hilog from '@ohos.hilog';
import { AbilityConstant, Want } from '@kit.AbilityKit';
import { BusinessError } from '@ohos.base'; 

const DOMAIN: number = 0x0000;
const TAG: string = 'EntryAbility';

export default class EntryAbility extends UIAbility {
  // ç»ä»¶åå»ºæ¶è§¦åï¼å¯åå§åèµæº
  onCreate(want: Want, launchParam: AbilityConstant.LaunchParam): void {
    hilog.info(DOMAIN, TAG, 'EntryAbility onCreate called');
  }

  // ç»ä»¶éæ¯æ¶è§¦åï¼å¯éæ¾èµæº
  onDestroy() {
    hilog.info(DOMAIN, TAG, 'EntryAbility onDestroy called');
  }

  // çªå£åå»ºåè§¦åï¼ä»æ­¤å¤å¯å è½½é¡µé¢
  onWindowStageCreate(windowStage: window.WindowStage): void {
    hilog.info(DOMAIN, TAG, '--- onWindowStageCreate è§¦åï¼å è½½é¡µé¢ï¼---');
    // å è½½é¡µé¢
    windowStage.loadContent('pages/Index', (err) =&gt; {
      if (err.code) {
        hilog.error(DOMAIN, TAG, `é¡µé¢å è½½å¤±è´¥ï¼code=${err.code}, message=${err.message}`);
        return;
      }
      hilog.info(DOMAIN, TAG, 'Indexé¡µé¢å è½½æå');
    });
  }

  onWindowStageDestroy(): void {
    // Main window is destroyed, release UI related resources
    hilog.info(DOMAIN, TAG, '%{public}s', 'ä¸»çªå£å³å°éæ¯ï¼éæ¾UIç¸å³èµæº');
  }

  onForeground(): void {
    // Ability has brought to foreground
    hilog.info(DOMAIN, TAG, '%{public}s', 'åºç¨åæ¢è³åå°ï¼æ¢å¤ä¸å¡é»è¾');
  }

  onBackground(): void {
    // Ability has back to background
    hilog.info(DOMAIN, TAG, '%{public}s', 'åºç¨åæ¢è³åå°ï¼æåä¸å¡é»è¾ï¼ä¸å¯å¯å¨å¶ä»ç»ä»¶');
  }
}
</code></pre>
<h4 id="é¡µé¢å è½½è§å">é¡µé¢å è½½è§å</h4>
<ol>
<li>ä»è½éè¿<code>WindowStage.loadContent()</code>å è½½é¡µé¢ï¼</li>
<li>è¯¥æ¹æ³ä»å¯å¨<code>onWindowStageCreate</code>çå½å¨æä¸­è°ç¨ï¼</li>
<li>è·¯å¾éä¸¥æ ¼éµå¾ªâæ .etsåç¼ãåºåå¤§å°åãåºäºpagesæ ¹ç®å½çç¸å¯¹è·¯å¾âï¼ä¸éä¸<code>main_pages.json</code>ä¸­æ³¨åçè·¯å¾å®å¨ä¸è´ï¼å¦åç¼è¯éè¿ä½è¿è¡æ¶é¡µé¢å è½½å¤±è´¥ï¼</li>
<li>é¡µé¢æä»¶å½åãè·¯å¾éè¯¯ä¼å¯¼è´ç¼è¯æ¶èµæºæåå¤±è´¥ï¼æè¿è¡æ¶é¡µé¢ç©ºç½ã</li>
</ol>
<h3 id="åèªå®ä¹é¦é¡µå¼å">ï¼åï¼èªå®ä¹é¦é¡µå¼å</h3>
<h4 id="æ­¥éª¤-1åå»º-home-é¡µé¢pageshomeets">æ­¥éª¤ 1ï¼åå»º Home é¡µé¢ï¼pages/Home.etsï¼</h4>
<pre><code class="language-typescript">@Entry
@Component
struct Home {
  build() {
    Column({ space: 20 }) {
      Text('æçStageåºç¨é¦é¡µ')
        .fontSize(30)
        .fontWeight(FontWeight.Bold);
    }
    .width('100%')
    .height('100%')
    .justifyContent(FlexAlign.Center);
  }
}
</code></pre>
<h4 id="æ­¥éª¤-2æ³¨å-home-é¡µé¢å°è·¯ç±éç½®main_pagesjson">æ­¥éª¤ 2ï¼æ³¨å Home é¡µé¢å°è·¯ç±éç½®ï¼main_pages.jsonï¼</h4>
<p>æå¼è·¯å¾ï¼<code>entry/src/main/resources/base/profile/main_pages.json</code>ï¼å¨<code>src</code>æ°ç»ä¸­æ°å¢ Home é¡µé¢è·¯å¾ï¼ç¡®ä¿ä¸å®éæä»¶è·¯å¾ä¸è´ï¼</p>
<pre><code class="language-json">{
  "src": [
    "pages/Index",
    "pages/Home" // å¿é¡»æ³¨åï¼å¦åè¿è¡æ¶é¡µé¢å è½½å¤±è´¥
  ]
}
</code></pre>
<h4 id="æ­¥éª¤-3ä¿®æ¹é¡µé¢å è½½è·¯å¾entryabilityets">æ­¥éª¤ 3ï¼ä¿®æ¹é¡µé¢å è½½è·¯å¾ï¼EntryAbility.etsï¼</h4>
<p>å°<code>windowStage.loadContent('pages/Index', ...)</code>ä¿®æ¹ä¸ºï¼</p>
<pre><code class="language-typescript">// å è½½é¡µé¢
windowStage.loadContent('pages/Home').then(()=&gt;{
  hilog.info(DOMAIN, TAG, 'Homeé¡µé¢å è½½æå');
}).catch((err: BusinessError)=&gt;{
  hilog.error(DOMAIN, TAG, `é¡µé¢å è½½å¤±è´¥ï¼code=${err.code}, message=${err.message}`);
})
</code></pre>
<h4 id="ææéªè¯">ææéªè¯</h4>
<p><img alt="ä¿®æ¹å è½½é¡µé¢.png" loading="lazy" data-src="./%E8%B5%84%E6%BA%90%E5%9B%BE%E7%89%87/%E4%BF%AE%E6%94%B9%E5%8A%A0%E8%BD%BD%E9%A1%B5%E9%9D%A2.png" class="lazyload"></p>
<ol>
<li><strong>åºç¨åéªè¯</strong>ï¼æ­£å¸¸å±ç¤º<code>æçStageåºç¨é¦é¡µ</code>ï¼æ ç©ºç½ãæ æ¥éï¼</li>
<li><strong>æ¥å¿ç«¯éªè¯</strong>ï¼Logcat ä¸­ç­é<code>TAG:EntryAbility</code>ï¼å¯çå°âHomeé¡µé¢å è½½æåâç¸å³æ¥å¿ã</li>
</ol>
<h3 id="äºéç½®åºç¨åç§°åå¾æ ">ï¼äºï¼éç½®åºç¨åç§°åå¾æ </h3>
<h4 id="1-å±å å¾æ æ¹æ¡-æ¨¡åçº§éç½®">1. å±å å¾æ æ¹æ¡-æ¨¡åçº§éç½®</h4>
<p>é»è®¤å·¥ç¨ä¸­ï¼å¨å±åºç¨å¾æ ãæ¨¡åçº§å¾æ ãlayered-image åååèæ¯å¾çå½ååä¸è´ã<br>
è¥éè®©æ¨¡åçº§åºç¨å¾æ çæï¼éå é¤<strong>AppScope/resources/base/media/</strong> ç®å½ä¸ç layered-image ç¸å³æä»¶ï¼å«<code>layered_image.json</code>ã<code>background.png</code>ã<code>foreground.png</code>ï¼ï¼é¿åå¨å±éåèµæºè¦çï¼ä¸æ¨èï¼ã</p>
<p><strong>æ¨èæ¹æ¡</strong>ï¼ç¡®ä¿èµæºä¸éåï¼ä½¿ç¨èªå®ä¹å¾æ åç§°ï¼åæ¶ä¿è¯<code>module.json5</code> ä¸­éç½®äº<code>skills</code>å­æ®µï¼æ¡é¢å¾æ æ­£å¸¸æ¾ç¤ºåæï¼ï¼</p>
<ul>
<li>ç¡®è®¤ entry æ¨¡å<code>layered_image.json</code>éç½®ï¼è·¯å¾ï¼entry/src/main/resources/base/media/layered_image.jsonï¼ï¼</li>
<li>ç¡®ä¿ module.json5 ä¸­ UIAbility éç½®<code>"icon": "$media:layered_image"</code>ã</li>
</ul>
<h4 id="2-å±å å¾æ æ¹æ¡-å¨å±çº§éç½®">2. å±å å¾æ æ¹æ¡-å¨å±çº§éç½®</h4>
<p>ç´æ¥å°åºç¨å¾æ å¾çå½åä¸º<code>foreground</code>ï¼æèªå®ä¹ layered_image.json ä¸­<code>foreground</code>çèµæºå¼ç¨ä¸º<code>"foreground": "$media:app_icon"</code>ï¼</p>
<ol>
<li>éç½® AppScope ä¸<code>layered_image.json</code>ï¼è·¯å¾ï¼AppScope/resources/base/media/layered_image.jsonï¼ï¼</li>
<li>å¨<code>AppScope/app.json5</code>ä¸­éç½®å¨å±å¾æ ï¼<code>"icon": "$media:layered_image"</code>ã</li>
</ol>
<h4 id="3-åºç¨åç§°éç½®">3. åºç¨åç§°éç½®</h4>
<p>åºç¨åç§°çéç½®ä¼åçº§ï¼<strong>æ¨¡åçº§å« &gt; å¨å±çº§å«</strong>ãè¥éè®©å¨å±èµæºéç½®çåºç¨åç§°çæï¼éå¨ module.json5 ä¸­æ³¨é/å é¤ UIAbility ç label éç½®ï¼<code>"label": "$string:EntryAbility_label"</code>ã</p>
<ul>
<li>åç§°ä¿®æ¹åéæ£æ¥<code>string.json</code>ä¸­å¯¹åºå­ç¬¦æ¯å¦å­å¨ï¼å­ç¬¦ç¼ºå¤±ä¼å¯¼è´ç¼è¯æ¶èµæºè§£æéè¯¯ï¼</li>
<li>éç½®å®æåæ§è¡æ¨¡åç¼è¯ï¼éªè¯æ¡é¢åºç¨åç§°æ¯å¦æ´æ°ï¼</li>
<li>å¨å±åç§°è·¯å¾ï¼<code>AppScope/resources/base/element/string.json</code><pre><code class="language-json">{
  "string": [
    {
      "name": "app_name",
      "value": "ç¬¬ä¸ä¸ªåºç¨"
    }
  ]
}
</code></pre>
</li>
</ul>
<h4 id="è¿è¡éªè¯">è¿è¡éªè¯</h4>
<p>å°åºç¨è¿è¡è³çæº/æ¨¡æå¨ï¼æ¡é¢ç«¯åºç¨åç§°æ¾ç¤ºä¸º<code>ç¬¬ä¸ä¸ªåºç¨</code>ï¼å¾æ ä¸ºå¨å±éç½®çå±å æ ·å¼ã</p>
<p><img alt="ä¿®æ¹åºç¨åç§°åå¾æ " loading="lazy" data-src="https://img2024.cnblogs.com/blog/3730991/202602/3730991-20260204163027740-1003594037.png" class="lazyload"></p>
<h2 id="ä¸æ¸çæå»ºhapappå">ä¸ãæ¸çãæå»ºHAP/APPå</h2>
<p>é¸¿èå·¥ç¨åºäºHvigoræå»ºå·¥å·å®ç°æ¨¡åçº§ç¼è¯åå¨å±çº§æå»ºï¼<strong>é¡¶é¨èåæ Build</strong>ä¸ºæ ¸å¿æä½å¥å£ï¼è¦çãæ¸ç-ç¼è¯-æå»º-åå¸ãå¨æµç¨ï¼ä»¥ä¸ä¸ºç²¾åå®æåå·¥å·è¯´æï¼</p>
<h3 id="1-æ¸çæä½">1. æ¸çæä½</h3>
<ul>
<li>æä½ï¼é¡¶é¨èåæ <code>Build &gt; Clean Project</code></li>
<li>åè½ï¼å é¤å¨å·¥ç¨ææç¼è¯ç¸å³æä»¶ï¼ç¼å­ãä¸´æ¶äº§ç©ãå·²çæçåæä»¶ç­ï¼ï¼ä»ä¿çæºç ãéç½®åèµæºæä»¶</li>
<li>ä½ç¨ï¼è§£å³ç¼è¯å¼å¸¸ãç¼å­å²çªãéç½®ä¿®æ¹ä¸çæç­é®é¢ï¼æ¸çå®ææ§å¶å°æ¾ç¤º<code>BUILD SUCCESSFUL</code></li>
</ul>
<h3 id="2-æ¨¡åç¼è¯">2. æ¨¡åç¼è¯</h3>
<p>éç¨äºä¿®æ¹entryæ¨¡ååå¿«ééªè¯å±é¨ææï¼ä»çæåæ¨¡åHAPåï¼</p>
<ol>
<li>æä½ï¼éä¸­<code>entry</code>æä»¶ï¼ç¹å»é¡¶é¨èåæ <code>Build &gt; Make Module 'entry'</code></li>
<li>ç»æï¼æ§å¶å°æ¾ç¤º<code>BUILD SUCCESSFUL</code>å³ä¸ºæåï¼HAPåå­æ¾äº<code>entry/build/outputs/hap/</code></li>
<li>ä½ç¨ï¼å¿«ééªè¯entryæ¨¡åä»£ç /éç½®ä¿®æ¹ææ</li>
</ol>
<p><img alt="ç¼è¯entryæ¨¡å_20260203211239_98_1340" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3730991/202602/3730991-20260204163108603-2034847660.png" class="lazyload"></p>
<h3 id="3-æå»ºå®æ´åºç¨åç¨äºå®è£ååä¸æ¶">3. æå»ºå®æ´åºç¨åï¼ç¨äºå®è£/åå/ä¸æ¶ï¼</h3>
<p>éç¨äºçæº/æ¨¡æå¨é¨ç½²ãåºç¨åå¸ä¸æ¶ï¼æ´åå¨æ¨¡åçæå®æ´.appåï¼</p>
<ol>
<li>æä½ï¼é¡¶é¨èåæ <code>Build &gt; Build Hap(s)/APP(s) &gt; Build App(s)</code></li>
<li>ç»æï¼æ§å¶å°æ¾ç¤º<code>BUILD SUCCESSFUL</code>å³ä¸ºæåï¼.appåå­æ¾äº<code>build/outputs/app/</code>ï¼ä¸»æ¨¡åentryæåäº§åº.hapå</li>
<li>ä½ç¨ï¼çæå¯é¨ç½²/åå¸çå®æ´Bundleåºç¨å</li>
</ol>
<p><img alt="æå»ºåºç¨ç¨åºå_20260203211834_100_1340" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3730991/202602/3730991-20260204163158358-263756083.png" class="lazyload"></p>
<h3 id="4-buildèåæ ¸å¿å·¥å·éé¡¹å¨è§£">4. Buildèåæ ¸å¿å·¥å·éé¡¹å¨è§£</h3>
<table>
<thead>
<tr>
<th>éé¡¹åç§°</th>
<th>æ ¸å¿ä½ç¨</th>
<th>å¸åä½¿ç¨åºæ¯</th>
</tr>
</thead>
<tbody>
<tr>
<td>Make Module 'entry'</td>
<td>ç¼è¯entryæ¨¡åï¼çæåæ¨¡åHAPå</td>
<td>éªè¯entryæ¨¡åå±é¨ä¿®æ¹ææ</td>
</tr>
<tr>
<td>Build Hap(s)/APP(s)</td>
<td>Build Hap(s)ï¼ç¼è¯å/å¤æ¨¡åçæHAPåï¼Build App(s)ï¼æ´åå¨æ¨¡åçæ.appå</td>
<td>å±é¨è°è¯ç¨Hap(s)ï¼é¨ç½²/åå¸ç¨App(s)</td>
</tr>
<tr>
<td>Generate Build Profile 'entry'</td>
<td>çæentryæ¨¡åä¸å±ç¼è¯éç½®æä»¶</td>
<td>èªå®ä¹entryæ¨¡åç¼è¯è§å</td>
</tr>
<tr>
<td>Clean Project</td>
<td>å é¤å¨å·¥ç¨ææç¼è¯æä»¶ï¼å½»åºæ¸çç¼å­</td>
<td>ç¼è¯å¼å¸¸ãç¼å­å²çªãéç½®ä¿®æ¹ä¸çæ</td>
</tr>
<tr>
<td>Rebuild Project</td>
<td>åæ§è¡Clean Projectï¼åå¨å·¥ç¨éæ°ç¼è¯</td>
<td>æ¸çåä»ç¼è¯å¤±è´¥ãå·¥ç¨é¿ææªç¼è¯</td>
</tr>
<tr>
<td>Generate Key and CSR</td>
<td>çæ.p12å¯é¥+CSRæä»¶ï¼ç¨äºç³è¯·å®æ¹åå¸ç­¾å</td>
<td>åºç¨æ­£å¼åå¸ä¸æ¶</td>
</tr>
<tr>
<td>Upload Product</td>
<td>å°æ­£å¼ç.appåä¸ä¼ è³åä¸ºåºç¨å¸åºåå°</td>
<td>åºç¨æäº¤ä¸æ¶æå®¡</td>
</tr>
<tr>
<td>Build Analyzer</td>
<td>åææå»ºèæ¶ãèµæºå ç¨ï¼å®ä½æå»ºå¤±è´¥åå </td>
<td>æå»ºéåº¦æ¢ãææ¥æå»ºå¤±è´¥é®é¢</td>
</tr>
</tbody>
</table>
<h2 id="å«ä»£ç ä»åº">å«ãä»£ç ä»åº</h2>
<ul>
<li>å·¥ç¨åç§°ï¼FirstApplication</li>
<li>ä»åºå°åï¼<a href="https://gitee.com/HarmonyOS-UI-Basics/harmony-os-ui-basics.git" target="_blank" rel="noopener nofollow">https://gitee.com/HarmonyOS-UI-Basics/harmony-os-ui-basics.git</a></li>
</ul>
<h2 id="ä¹ä¸èé¢å">ä¹ãä¸èé¢å</h2>
<p>ä¸ä¸èå°æ·±å¥å­¦ä¹  UIAbility çå½å¨æå¨è§£æï¼æ ¸å¿åå®¹åæ¬ï¼</p>
<ol>
<li>UIAbility å¨çå½å¨ææ ¸å¿æ¹æ³çè§¦åæ¶æºãæ ¸å¿ä½ç¨åæ§è¡æ¬¡æ°çº¦æï¼</li>
<li>WindowStage äºä»¶ä½ç³»ä¸çå½å¨æçèå¨é»è¾ï¼ææ¡çªå£ç¶æï¼è·ç¦/å¤±ç¦ãåå°/åå°ï¼çåæ³çå¬æ¹å¼ï¼</li>
<li><code>onDestroy</code> æ¹æ³çç¹æ®è§¦åè§åï¼API 13+ä¸é®æ¸çãè°è¯æ¨¡å¼ãæå¨è°ç¨APIç­ä¸ååºæ¯ï¼ï¼</li>
<li>é¡µé¢ä»è½å¨ <code>onWindowStageCreate</code> å è½½çåºå±åå åçå½å¨æç¸å³å¼åé¿åè¦ç¹ï¼</li>
<li>å®æéªè¯å¯å¨/ååå°åæ¢/å³é­ç­åºæ¯ä¸ççå½å¨ææ§è¡é¡ºåºï¼ææ¡å³é®æ°æ®çå®å¨ä¿å­ç­ç¥ã</li>
</ol>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.00625" data-date-updated="2026-02-04 16:45">2026-02-04 16:36</span>&nbsp;
<a href="https://www.cnblogs.com/san-xiu">é¸¿è-æ£ä¿®</a>&nbsp;
éè¯»(<span id="post_view_count">89</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19575201);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19575201', targetLink: 'https://www.cnblogs.com/san-xiu/p/19575201', title: 'é¸¿èåºç¨å¼åUIåºç¡ç¬¬äºèï¼é¸¿èåºç¨ç¨åºæ¡æ¶æ ¸å¿è§£æä¸å®æ' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ MAFå¿«éå¥é¨ï¼14ï¼å¿«ééæA2A Agent ]]></title>
    <link>https://www.cnblogs.com/edisontalk/p/-/quick-start-on-maf-chatper14</link>
    <guid>c51d4191ecabc21d80bf6650d1fe84f8</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/edisontalk/p/-/quick-start-on-maf-chatper14" title="åå¸äº 2026-02-04 22:17">
    <span role="heading" aria-level="2">MAFå¿«éå¥é¨ï¼14ï¼å¿«ééæA2A Agent</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/381412/202602/381412-20260204221255430-336185513.png" alt="MAFå¿«éå¥é¨ï¼14ï¼å¿«ééæA2A Agent" class="desc_img">
        A2A å³ Agent-to-Agentï¼ç¿»è¯è¿æ¥å°±æ¯âæºè½ä»£çä¹é´çåè®®âï¼æä»¬å¯ä»¥çè§£ä¸ºå®å°±æ¯ä¸ä¸ªå¤§æ¨¡åAgentä»¬ç¨æ¥âèå¤©âçâéç¨è¯­è¨âãæ¬æä»ç»äºMAFä¸­éæA2A Agentçæ ¸å¿æä½ï¼å°A2A Agentè½¬æ¢ä¸ºAIFunctionå·¥å·ï¼ç¶åç±ä¸»Agentèªä¸»éæ©è°ç¨ä¸ä¸ªæå¤ä¸ªA2A Agentè·åä¿¡æ¯æ´ååæç»çæåç­ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>å¤§å®¶å¥½ï¼ææ¯Edisonã</p>
<p>æè¿æä¸ç´å¨è·çå£æ°çã<a class="normal_text_link mp_article_text_link" href="https://mp.weixin.qq.com/s?__biz=MzA4NzQzNTg4Ng==&amp;mid=2651744458&amp;idx=1&amp;sn=139f7584e81aeecd0945133bdc2b4791&amp;scene=21#wechat_redirect" target="_blank" data-itemshowtype="0" data-linktype="2" rel="noopener nofollow">.NET+AIæºè½ä½å¼åè¿é¶</a>ãè¯¾ç¨å­¦ä¹ MAFå¼åå¤æºè½ä½å·¥ä½æµï¼æå¼ºçæ¨èä½ ä¹ä¸è½¦è·æä¸èµ·åºåï¼</p>
<p><a class="normal_text_link mp_article_text_link" href="https://www.cnblogs.com/edisontalk/p/-/quick-start-on-maf-chatper13" target="_blank" data-itemshowtype="0" data-linktype="2"><span>ä¸ä¸ç¯</span></a><span>ï¼æä»¬å­¦ä¹ äºMAFä¸­å¸¸è§çå¤æºè½ä½ç¼ææ¨¡å¼<span>ãæ¬ç¯ï¼æä»¬æ¥äºè§£ä¸å¨MAFä¸­å¦ä½å¿«ééæA2A (Agent to Agent)ã</span></span></p>
<h1>1 A2Aåè®®ä»ç»</h1>
<p>å¨ä¹åçç³»åæç« ä¸­æä»¬å¶å®å·²ç»ä»ç»è¿A2Aåè®®äºï¼è¿éæä»¬å¿«éæ¸©ä¹ ä¸ä¸ãA2A å³ Agent-to-Agentï¼ç¿»è¯è¿æ¥å°±æ¯âæºè½ä»£çä¹é´çåè®®âï¼æä»¬å¯ä»¥çè§£ä¸ºå®å°±æ¯ä¸ä¸ªå¤§æ¨¡åAgentä»¬ç¨æ¥âèå¤©âçâéç¨è¯­è¨âã</p>
<p><img src="https://img2024.cnblogs.com/blog/381412/202602/381412-20260204220340896-177118451.png" alt="image" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>A2Aå®ä¹äºä¸å¥æ¸æ°ãæ åçæ²éæ¹å¼ï¼è®©Agentä»¬å¯ä»¥é¡ºçå°äº¤æµï¼è®©ä¸åå¹³å°åæ¡æ¶ä¸çAgenté½è½å¤è¯´âåä¸ç§è¯âï¼å®ç°æ éç¢çä¿¡æ¯äº¤æ¢ååä½ã</p>
<p>æ´å¤å³äºA2Aåè®®çåå®¹ï¼</p>
<ul>
<li><strong data-pm-slice="0 0 []"><strong data-pm-slice="0 0 []"><span><a class="normal_text_link mp_article_text_link" href="https://www.cnblogs.com/edisontalk/p/-/quick-start-agent-to-agent-part01" target="_blank" data-itemshowtype="0" data-linktype="2"><span>å¤Agentåä½å¥é¨ï¼åºäºA2Aåè®®çAgentéä¿¡ï¼ä¸ï¼</span></a></span></strong></strong></li>
<li><strong data-pm-slice="0 0 []"><strong data-pm-slice="0 0 []"><span><a class="normal_text_link mp_article_text_link" href="https://www.cnblogs.com/edisontalk/p/-/quick-start-agent-to-agent-part02" target="_blank" data-itemshowtype="0" data-linktype="2"><span>å¤Agentåä½å¥é¨ï¼åºäºA2Aåè®®çAgentéä¿¡ï¼ä¸­ï¼</span></a></span></strong></strong></li>
</ul>
<h1><strong><span>2 å°A2A Agentå°è£ä¸ºTool<strong><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;letter-spacing: 0.578px;text-align: left;margin: 8px;&quot;,&quot;data-pm-slice&quot;:&quot;6 3 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;para&quot;,{&quot;tagName&quot;:&quot;p&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;outline: 0px;visibility: visible;line-height: 1.75em;margin-top: 16px;margin-bottom: 16px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;span&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;color: rgb(0, 179, 139);font-family: \&quot;PingFang SC\&quot;, \&quot;Lantinghei SC\&quot;, \&quot;Microsoft Yahei\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft Sans Serif\&quot;, \&quot;WenQuanYi Micro Hei\&quot;, Helvetica, sans-serif;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;span&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;letter-spacing: 0.544px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><br></span></strong></span></strong></h1>
<p>å¨MAFéæA2A Agentï¼æä¸»è¦çæä½å°±æ¯ï¼<strong>å°A2A Agentå°è£ä¸ºä¸ä¸ªTool</strong>ï¼è¿ä¸ªToolå¯¹åºå°MAFä¸­å°±æ¯ä¸ä¸ª<strong>AIFunction</strong>å¯¹è±¡ã</p>
<p>åé¢æä»¬æå°å¯ä»¥å°MCPæå¡ä¹å°è£ä¸ºä¸ä¸ªToolï¼AIFunctionï¼è®©Agentè°ç¨ï¼è¿éA2A Agentä¹æ¯ä¸æ ·çéçã</p>
<p>è¿æ ·åçå¥½å¤æ¯ï¼<strong>è®©MAFä¸­çAgentåè°ç¨æ¬å°å½æ°ä¸æ ·è°ç¨è¿ç¨A2A Agent&nbsp;æ MCP Server</strong>ã</p>
<p>ä¸é¢çä»£ç å±ç¤ºäºå¨MAFä¸­å°A2A Cardè½¬æ¢ä¸ºAgentï¼ç¶ååå°Agentè½¬æ¢ä¸ºAIFunctionï¼</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 0, 1)">......
</span><span style="color: rgba(0, 0, 255, 1)">var</span> functionTools = <span style="color: rgba(0, 0, 255, 1)">new</span> List&lt;AIFunction&gt;<span style="color: rgba(0, 0, 0, 1)">();
</span><span style="color: rgba(0, 0, 255, 1)">foreach</span> (<span style="color: rgba(0, 0, 255, 1)">var</span> endpoint <span style="color: rgba(0, 0, 255, 1)">in</span><span style="color: rgba(0, 0, 0, 1)"> agentEndpoints)
{
    </span><span style="color: rgba(0, 0, 255, 1)">var</span> resolver = <span style="color: rgba(0, 0, 255, 1)">new</span> A2ACardResolver(<span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> Uri(endpoint));
    </span><span style="color: rgba(0, 0, 255, 1)">var</span> card = <span style="color: rgba(0, 0, 255, 1)">await</span><span style="color: rgba(0, 0, 0, 1)"> resolver.GetAgentCardAsync();
    </span><span style="color: rgba(0, 0, 255, 1)">var</span> agent = card.AsAIAgent(); <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Convert A2A Agent to AIAgent instance</span>
<span style="color: rgba(0, 0, 0, 1)">
    functionTools.AddRange(AgentFunctionHelper.CreateFunctionTools(agent, card));
}
......</span></pre>
</div>
<p>ä¸é¢æ¯AgentFunctionHelperç±»çä»£ç å®ç°ï¼</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> AgentFunctionHelper
{
    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">static</span> IEnumerable&lt;AIFunction&gt;<span style="color: rgba(0, 0, 0, 1)"> CreateFunctionTools(AIAgent a2aAgent, AgentCard agentCard)
    {
        </span><span style="color: rgba(0, 0, 255, 1)">foreach</span> (<span style="color: rgba(0, 0, 255, 1)">var</span> skill <span style="color: rgba(0, 0, 255, 1)">in</span><span style="color: rgba(0, 0, 0, 1)"> agentCard.Skills)
        {
            AIFunctionFactoryOptions options </span>= <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)">()
            {
                Name </span>=<span style="color: rgba(0, 0, 0, 1)"> Sanitize(skill.Id),
                Description </span>= $$<span style="color: rgba(128, 0, 0, 1)">"""
</span><span style="color: rgba(0, 0, 0, 1)">                {
                    </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">description</span><span style="color: rgba(128, 0, 0, 1)">"</span>: <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">{{skill.Description}}</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
                    </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">tags</span><span style="color: rgba(128, 0, 0, 1)">"</span>: <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">[{{string.Join(</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">, skill.Tags ?? [])}}]</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
                    </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">examples</span><span style="color: rgba(128, 0, 0, 1)">"</span>: <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">[{{string.Join(</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">, skill.Examples ?? [])}}]</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
                    </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">inputModes</span><span style="color: rgba(128, 0, 0, 1)">"</span>: <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">[{{string.Join(</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">, skill.InputModes ?? [])}}]</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
                    </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">outputModes</span><span style="color: rgba(128, 0, 0, 1)">"</span>: <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">[{{string.Join(</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">, skill.OutputModes ?? [])}}]</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">
                }
                </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(128, 0, 0, 1)">,</span>
<span style="color: rgba(0, 0, 0, 1)">            };

            </span><span style="color: rgba(0, 0, 255, 1)">yield</span> <span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> AIFunctionFactory.Create(RunAgentAsync, options);
        }

        </span><span style="color: rgba(0, 0, 255, 1)">async</span> Task&lt;<span style="color: rgba(0, 0, 255, 1)">string</span>&gt; RunAgentAsync(<span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)"> input, CancellationToken cancellationToken)
        {
            </span><span style="color: rgba(0, 0, 255, 1)">var</span> response = <span style="color: rgba(0, 0, 255, 1)">await</span> a2aAgent.RunAsync(input, cancellationToken: cancellationToken).ConfigureAwait(<span style="color: rgba(0, 0, 255, 1)">false</span><span style="color: rgba(0, 0, 0, 1)">);

            </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> response.Text;
        }
    }

    </span><span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">static</span> <span style="color: rgba(0, 0, 255, 1)">readonly</span> Regex InvalidNameCharsRegex = <span style="color: rgba(0, 0, 255, 1)">new</span> Regex(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">[^0-9A-Za-z]+</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, RegexOptions.Compiled);

    </span><span style="color: rgba(0, 0, 255, 1)">public</span> staticstringSanitize(<span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)"> name)
    {
        </span><span style="color: rgba(0, 0, 255, 1)">return</span> InvalidNameCharsRegex.Replace(name, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">_</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
    }
}</span></pre>
</div>
<p>å¶ä¸­çCreateFunctionToolsæ¹æ³å®ç°äºå°A2A Agentçææå¬å¼æè½è½¬æ¢ä¸ºAIFunctionå·¥å·ã</p>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;p&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0); margin: 8px; padding: 0px; outline: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgba(0, 0, 0, 0.9); font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif; font-size: 17px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: 0.578px; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; line-height: 1.75em; visibility: visible; box-sizing: border-box !important; overflow-wrap: break-word !important;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0); margin-right: 0px; margin-left: 0px; padding: 0px; outline: 0px; max-width: 100%; visibility: visible; box-sizing: border-box !important; overflow-wrap: break-word !important;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">èSanitizeæ¹æ³åå®ç°äºå½æ°åç§°çè§èåï¼å ä¸ºAIFunctionçåç§°å¿é¡»ç¬¦åä¸å®è§èï¼ä»éå­æ¯ãæ°å­åä¸åçº¿ï¼ï¼å æ­¤éè¦ä¸»å¨å¯¹æè½åç§°è¿è¡è§èåã</span></p>
<h1><strong><strong><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;p&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0); margin: 8px; padding: 0px; outline: 0px; max-width: 100%; clear: both; min-height: 1em; color: rgba(0, 0, 0, 0.9); font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif; font-size: 17px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: 0.578px; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; line-height: 1.75em; visibility: visible; box-sizing: border-box !important; overflow-wrap: break-word !important;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0); margin-right: 0px; margin-left: 0px; padding: 0px; outline: 0px; max-width: 100%; visibility: visible; box-sizing: border-box !important; overflow-wrap: break-word !important;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span>3 å®æ´éæç¤ºä¾</span></span></strong></strong></h1>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);margin: 8px;padding: 0px;outline: 0px;max-width: 100%;clear: both;min-height: 1em;color: rgba(0, 0, 0, 0.9);font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.578px;orphans: 2;text-align: left;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;line-height: 1.75em;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">è¿æ¬¡æä»¬è¿æ¯ä½¿ç¨ä¸æ¬¡æç« ä¸­çæ¡ä¾ï¼å³ä¸ä¸ªææ¸¸å©æï¼å®å¯ä»¥éè¿A2Aåè®®è°ç¨å¤ä¸ªAgentçæè½ã</span></p>
<p><img src="https://img2024.cnblogs.com/blog/381412/202602/381412-20260204220618986-812169228.png" alt="image" width="912" height="550" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p data-pm-slice="0 0 []"><span><span>æä»¬éè¦åå»ºåä¸ª.NETé¡¹ç®ï¼å¶ä¸­ï¼</span></span></p>
<ul class="list-paddingleft-1">
<li>
<p><span><span>1ä¸ª.NETæ§å¶å°é¡¹ç®ï¼ä¸»å©æ</span></span></p>
</li>
<li>
<p><span><span>3ä¸ªASP.NET Webé¡¹ç®ï¼å¤©æ°æºè½ä½ãéåºæºè½ä½ãè·¯çº¿æºè½ä½</span></span></p>
</li>
</ul>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);margin: 8px;padding: 0px;outline: 0px;max-width: 100%;clear: both;min-height: 1em;color: rgba(0, 0, 0, 0.9);font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;font-weight: 400;letter-spacing: 0.578px;orphans: 2;text-align: left;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;line-height: 1.75em;visibility: visible;box-sizing: border-box !important;overflow-wrap: break-word !important;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">å¨VSä¸­çé¡¹ç®ç»æå¦ä¸ï¼</span></p>
<p><img src="https://img2024.cnblogs.com/blog/381412/202602/381412-20260204220634044-600923620.png" alt="image" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>æ¬æ¬¡æ¡ä¾æä»¬å¸æå®ç°ä¸»å©æå¯ä»¥åç­ç¨æ·å³äºä¸åä¸»é¢ï¼æ¯ç¹ï¼éåºï¼å¤©æ°ï¼çé®é¢ï¼å®å¯ä»¥æ ¹æ®é®é¢èªä¸»éæ©éè¦è°ç¨ä¸ä¸ªæå¤ä¸ªAgentå»è·åå¿è¦çä¿¡æ¯åè¿è¡æ´åä¼ååååå¤ç¨æ·ã</p>
<h3><span><span>3.1 å¤©æ°Agent</span></span></h3>
<p data-pm-slice="0 0 []"><span><span>æ·»å NuGetåï¼åç»­A2A Agenté¡¹ç®é½éè¦å®è£æ­¤åï¼ä¸åèµè¿°ï¼</span></span></p>
<div class="cnblogs_code">
<pre>A2A.AspNetCore</pre>
</div>
<p>åå»ºä¸ä¸ª WeatherAgentç±»ï¼å®ä¹å¶è½å å AgentCardï¼è¿éæä»¬éè¦å¬å¼ä¸ä¸ªAgentSkillå³å¤©æ°æ¥è¯¢çè½åï¼</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> WeatherAgent
{
    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">void</span><span style="color: rgba(0, 0, 0, 1)"> Attach(ITaskManager taskManager)
    {
        taskManager.OnMessageReceived </span>=<span style="color: rgba(0, 0, 0, 1)"> QueryWeatherAsync;
        taskManager.OnAgentCardQuery </span>=<span style="color: rgba(0, 0, 0, 1)"> GetAgentCardAsync;
    }

    </span><span style="color: rgba(0, 0, 255, 1)">private</span> Task&lt;A2AResponse&gt;<span style="color: rgba(0, 0, 0, 1)"> QueryWeatherAsync(MessageSendParams messageSendParams, CancellationToken cancellationToken)
    {
        </span><span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)"> (cancellationToken.IsCancellationRequested)
        {
            </span><span style="color: rgba(0, 0, 255, 1)">return</span> Task.FromCanceled&lt;A2AResponse&gt;<span style="color: rgba(0, 0, 0, 1)">(cancellationToken);
        }

        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Process the message</span>
        <span style="color: rgba(0, 0, 255, 1)">var</span> messageText = messageSendParams.Message.Parts.OfType&lt;TextPart&gt;<span style="color: rgba(0, 0, 0, 1)">().First().Text;

        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Create and return an artifact</span>
        <span style="color: rgba(0, 0, 255, 1)">var</span> message = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> AgentMessage()
        {
            Role </span>=<span style="color: rgba(0, 0, 0, 1)"> MessageRole.Agent,
            MessageId </span>=<span style="color: rgba(0, 0, 0, 1)"> Guid.NewGuid().ToString(),
            ContextId </span>=<span style="color: rgba(0, 0, 0, 1)"> messageSendParams.Message.ContextId,
            Parts </span>= [<span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> TextPart() {
                Text </span>= $<span style="color: rgba(128, 0, 0, 1)">"""
</span>                    ð¤ï¸ **å¤©æ°æ¥è¯¢ç»æ**<span style="color: rgba(0, 0, 0, 1)">

                    æ¥è¯¢æ¶é´ï¼{DateTime.Now:yyyy</span>-MM-<span style="color: rgba(0, 0, 0, 1)">dd HH:mm}

                    </span>**åäº¬å¤©æ°**
                    - ä»æ¥ï¼æ´è½¬å¤äºï¼æ°æ¸© -<span style="color: rgba(128, 0, 128, 1)">2</span>Â°C ~ <span style="color: rgba(128, 0, 128, 1)">8</span><span style="color: rgba(0, 0, 0, 1)">Â°C
                    </span>- ææ¥ï¼å¤äºï¼æ°æ¸© <span style="color: rgba(128, 0, 128, 1)">0</span>Â°C ~ <span style="color: rgba(128, 0, 128, 1)">10</span><span style="color: rgba(0, 0, 0, 1)">Â°C
                    </span>- åæ¥ï¼é´ï¼æ°æ¸© <span style="color: rgba(128, 0, 128, 1)">2</span>Â°C ~ <span style="color: rgba(128, 0, 128, 1)">9</span><span style="color: rgba(0, 0, 0, 1)">Â°C

                    </span>**ä¸æµ·å¤©æ°**
                    - ä»æ¥ï¼å¤äºï¼æ°æ¸© <span style="color: rgba(128, 0, 128, 1)">5</span>Â°C ~ <span style="color: rgba(128, 0, 128, 1)">12</span><span style="color: rgba(0, 0, 0, 1)">Â°C
                    </span>- ææ¥ï¼å°é¨ï¼æ°æ¸© <span style="color: rgba(128, 0, 128, 1)">6</span>Â°C ~ <span style="color: rgba(128, 0, 128, 1)">10</span><span style="color: rgba(0, 0, 0, 1)">Â°C
                    </span>- åæ¥ï¼é´è½¬æ´ï¼æ°æ¸© <span style="color: rgba(128, 0, 128, 1)">4</span>Â°C ~ <span style="color: rgba(128, 0, 128, 1)">11</span><span style="color: rgba(0, 0, 0, 1)">Â°C

                    ð ç©¿è¡£å»ºè®®ï¼åäº¬è¾å·ï¼å»ºè®®ç©¿ç¾½ç»æï¼ä¸æµ·æ¸©åï¼å»ºè®®ç©¿å¤¹åå¤å¥ï¼å¸¦å¥½é¨å·ã
                    </span><span style="color: rgba(128, 0, 0, 1)">"""
</span><span style="color: rgba(0, 0, 0, 1)">            }]
        };

        </span><span style="color: rgba(0, 0, 255, 1)">return</span> Task.FromResult&lt;A2AResponse&gt;<span style="color: rgba(0, 0, 0, 1)">(message);
    }

    </span><span style="color: rgba(0, 0, 255, 1)">private</span> Task&lt;AgentCard&gt; GetAgentCardAsync(<span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)"> agentUrl, CancellationToken cancellationToken)
    {
        </span><span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)"> (cancellationToken.IsCancellationRequested)
        {
            </span><span style="color: rgba(0, 0, 255, 1)">return</span> Task.FromCanceled&lt;AgentCard&gt;<span style="color: rgba(0, 0, 0, 1)">(cancellationToken);
        }

        </span><span style="color: rgba(0, 0, 255, 1)">var</span> capabilities = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> AgentCapabilities()
        {
            Streaming </span>= <span style="color: rgba(0, 0, 255, 1)">true</span><span style="color: rgba(0, 0, 0, 1)">,
            PushNotifications </span>= <span style="color: rgba(0, 0, 255, 1)">false</span><span style="color: rgba(0, 0, 0, 1)">,
        };

        </span><span style="color: rgba(0, 0, 255, 1)">return</span> Task.FromResult(<span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> AgentCard()
        {
            Name </span>= <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">weather agent</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
            Description </span>= <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">weather information agent</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
            Url </span>=<span style="color: rgba(0, 0, 0, 1)"> agentUrl,
            Version </span>= <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">1.0.0</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
            DefaultInputModes </span>= [<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">text</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">],
            DefaultOutputModes </span>= [<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">text</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">],
            Capabilities </span>=<span style="color: rgba(0, 0, 0, 1)"> capabilities,
            Skills </span>=<span style="color: rgba(0, 0, 0, 1)"> [
                </span><span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> AgentSkill
                {
                    Id </span>= <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">weather-query</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
                    Name </span>= <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">å¤©æ°æ¥è¯¢</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
                    Description </span>= <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">æ¥è¯¢æå®åå¸çå¤©æ°é¢æ¥ï¼åæ¬æ¸©åº¦ãéæ°´æ¦çãç©¿è¡£å»ºè®®ç­</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
                    Tags </span>= [<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">weather</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">forecast</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">climate</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">],
                    Examples </span>= [<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ä¸æµ·æå¤©å¤©æ°æä¹æ ·</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">æé½è¿å¨çå¤©æ°é¢æ¥</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">æ­å·ä¸é¨å</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">],
                    InputModes </span>= [<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">text</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">],
                    OutputModes </span>= [<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">text</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">]
                }],
        });
    }
}</span></pre>
</div>
<p>è¿éè¯´æä¸ä¸ï¼è¿éä¸ºäºæ¹ä¾¿æ¯ç´æ¥è¿åäºä¸ä¸ªåºå®çå¤©æ°ä¿¡æ¯è¾åºåå®¹ï¼ä½å¨å®éåºç¨ä¸­å¾å¾éè¦è¿è¡å·ä½ç<strong>ä¸å¡é»è¾å¤ç</strong>&nbsp;æ&nbsp;<strong>è°ç¨å¤§æ¨¡å</strong>è¿è¡å¤çã</p>
<p>ä¸é¢çå ä¸ªAgentä¹æ¯ç±»ä¼¼çæåµï¼å°±ä¸åèµè¿°ã<span data-pm-slice="0 0 []">ç¶åï¼å¨Program.csä¸­è¿è¡æ³¨åï¼å®æç«¯å£æ å°ï¼</span></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> A2A;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> A2A.AspNetCore;
</span><span style="color: rgba(0, 0, 255, 1)">using</span><span style="color: rgba(0, 0, 0, 1)"> WeatherAgentServer;

</span><span style="color: rgba(0, 0, 255, 1)">var</span> builder =<span style="color: rgba(0, 0, 0, 1)"> WebApplication.CreateBuilder(args);
</span><span style="color: rgba(0, 0, 255, 1)">var</span> app =<span style="color: rgba(0, 0, 0, 1)"> builder.Build();

</span><span style="color: rgba(0, 0, 255, 1)">var</span> taskManager = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> TaskManager();
</span><span style="color: rgba(0, 0, 255, 1)">var</span> agent = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> WeatherAgent();
agent.Attach(taskManager);
</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Add JSON-RPC endpoint for A2A</span>
app.MapA2A(taskManager, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">/weather</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Add well-known agent card endpoint for A2A</span>
app.MapWellKnownAgentCard(taskManager, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">/weather</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Add HTTP endpoint for A2A</span>
app.MapHttpA2A(taskManager, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">/weather</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);

app.Run();</span></pre>
</div>
<h3><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;p&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;outline: 0px;visibility: visible;line-height: 1.75em;margin-top: 16px;margin-bottom: 16px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span>3.2 éåºAgent</span></span></h3>
<p><span data-pm-slice="0 0 []">åå»ºä¸ä¸ªHotelAgentç±»ï¼å®ä¹å¶è½å å AgentCardï¼</span></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> HotelAgent
{
    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">void</span><span style="color: rgba(0, 0, 0, 1)"> Attach(ITaskManager taskManager)
    {
        taskManager.OnMessageReceived </span>=<span style="color: rgba(0, 0, 0, 1)"> QueryHotelsAsync;
        taskManager.OnAgentCardQuery </span>=<span style="color: rgba(0, 0, 0, 1)"> GetAgentCardAsync;
    }

    </span><span style="color: rgba(0, 0, 255, 1)">private</span> Task&lt;A2AResponse&gt;<span style="color: rgba(0, 0, 0, 1)"> QueryHotelsAsync(MessageSendParams messageSendParams, CancellationToken cancellationToken)
    {
        </span><span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)"> (cancellationToken.IsCancellationRequested)
        {
            </span><span style="color: rgba(0, 0, 255, 1)">return</span> Task.FromCanceled&lt;A2AResponse&gt;<span style="color: rgba(0, 0, 0, 1)">(cancellationToken);
        }

        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Process the message</span>
        <span style="color: rgba(0, 0, 255, 1)">var</span> messageText = messageSendParams.Message.Parts.OfType&lt;TextPart&gt;<span style="color: rgba(0, 0, 0, 1)">().First().Text;

        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Create and return an artifact</span>
        <span style="color: rgba(0, 0, 255, 1)">var</span> message = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> AgentMessage()
        {
            Role </span>=<span style="color: rgba(0, 0, 0, 1)"> MessageRole.Agent,
            MessageId </span>=<span style="color: rgba(0, 0, 0, 1)"> Guid.NewGuid().ToString(),
            ContextId </span>=<span style="color: rgba(0, 0, 0, 1)"> messageSendParams.Message.ContextId,
            Parts </span>= [<span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> TextPart() {
                Text </span>= $<span style="color: rgba(128, 0, 0, 1)">"""
</span>                    ð¨ **éåºæ¨è**<span style="color: rgba(0, 0, 0, 1)">

                    æ ¹æ®æ¨çéæ±ï¼ä¸ºæ¨æ¨èä»¥ä¸éåºï¼

                    </span>**è±ªåå â­â­â­â­â­**
                    <span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">. ä¸æµ·å¤æ»©åå°éå¤«éåº
                       </span>-<span style="color: rgba(0, 0, 0, 1)"> ð å¤æ»©æ ¸å¿ä½ç½®ï¼æ±æ¯æ¿
                       </span>- ð° Â¥<span style="color: rgba(128, 0, 128, 1)">2</span>,<span style="color: rgba(128, 0, 128, 1)">500</span>/<span style="color: rgba(0, 0, 0, 1)">æèµ·
                       </span>- â­ è¯å <span style="color: rgba(128, 0, 128, 1)">4.9</span>/<span style="color: rgba(128, 0, 128, 1)">5.0</span>

                    **èéå â­â­â­â­**
                    <span style="color: rgba(128, 0, 128, 1)">2</span><span style="color: rgba(0, 0, 0, 1)">. ä¸æµ·éå®é¦æ ¼éæå¤§éåº
                       </span>-<span style="color: rgba(0, 0, 0, 1)"> ð éå®å¯ºååï¼äº¤éä¾¿å©
                       </span>- ð° Â¥<span style="color: rgba(128, 0, 128, 1)">1</span>,<span style="color: rgba(128, 0, 128, 1)">200</span>/<span style="color: rgba(0, 0, 0, 1)">æèµ·
                       </span>- â­ è¯å <span style="color: rgba(128, 0, 128, 1)">4.7</span>/<span style="color: rgba(128, 0, 128, 1)">5.0</span>

                    **ç»æµå â­â­â­**
                    <span style="color: rgba(128, 0, 128, 1)">3</span><span style="color: rgba(0, 0, 0, 1)">. å¨å­£éåºï¼ä¸æµ·åäº¬è·¯åºï¼
                       </span>-<span style="color: rgba(0, 0, 0, 1)"> ð åäº¬è·¯æ­¥è¡è¡æ
                       </span>- ð° Â¥<span style="color: rgba(128, 0, 128, 1)">380</span>/<span style="color: rgba(0, 0, 0, 1)">æèµ·
                       </span>- â­ è¯å <span style="color: rgba(128, 0, 128, 1)">4.5</span>/<span style="color: rgba(128, 0, 128, 1)">5.0</span><span style="color: rgba(0, 0, 0, 1)">

                    ð¡ æç¤ºï¼å»ºè®®æåé¢è®¢ï¼å¨æ«åèåæ¥ä»·æ ¼å¯è½ä¸æ¶¨ </span><span style="color: rgba(128, 0, 128, 1)">20</span>-<span style="color: rgba(128, 0, 128, 1)">50</span>%<span style="color: rgba(0, 0, 0, 1)">ã
                    </span><span style="color: rgba(128, 0, 0, 1)">"""
</span><span style="color: rgba(0, 0, 0, 1)">            }]
        };

        </span><span style="color: rgba(0, 0, 255, 1)">return</span> Task.FromResult&lt;A2AResponse&gt;<span style="color: rgba(0, 0, 0, 1)">(message);
    }

    </span><span style="color: rgba(0, 0, 255, 1)">private</span> Task&lt;AgentCard&gt; GetAgentCardAsync(<span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)"> agentUrl, CancellationToken cancellationToken)
    {
        </span><span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)"> (cancellationToken.IsCancellationRequested)
        {
            </span><span style="color: rgba(0, 0, 255, 1)">return</span> Task.FromCanceled&lt;AgentCard&gt;<span style="color: rgba(0, 0, 0, 1)">(cancellationToken);
        }

        </span><span style="color: rgba(0, 0, 255, 1)">var</span> capabilities = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> AgentCapabilities()
        {
            Streaming </span>= <span style="color: rgba(0, 0, 255, 1)">true</span><span style="color: rgba(0, 0, 0, 1)">,
            PushNotifications </span>= <span style="color: rgba(0, 0, 255, 1)">false</span><span style="color: rgba(0, 0, 0, 1)">,
        };

        </span><span style="color: rgba(0, 0, 255, 1)">return</span> Task.FromResult(<span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> AgentCard()
        {
            Name </span>= <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">hotel-a2a-agent</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
            Description </span>= <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">hotel information agent</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
            Url </span>=<span style="color: rgba(0, 0, 0, 1)"> agentUrl,
            Version </span>= <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">1.0.0</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
            DefaultInputModes </span>= [<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">text</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">],
            DefaultOutputModes </span>= [<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">text</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">],
            Capabilities </span>=<span style="color: rgba(0, 0, 0, 1)"> capabilities,
            Skills </span>=<span style="color: rgba(0, 0, 0, 1)"> [
                </span><span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> AgentSkill
                {
                    Id </span>= <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">hotel-recommendation</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
                    Name </span>= <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">éåºæ¨è</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
                    Description </span>= <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">æ ¹æ®ç®çå°åé¢ç®æ¨èåéçéåºï¼åæ¬è±ªååãèéåãç»æµå</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
                    Tags </span>= [<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">hotel</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">accommodation</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">booking</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">travel</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">],
                    Examples </span>= [<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">æ¨èä¸æµ·çéåº</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ä¸æµ·å¤æ»©éè¿æä»ä¹å¥½éåº</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">é¢ç®500ä»¥åçåäº¬éåº</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">],
                    InputModes </span>= [<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">text</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">],
                    OutputModes </span>= [<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">text</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">]
                }
                ],
        });
    }
}</span></pre>
</div>
<p>åæ ·ï¼è¯·åèå¤©æ°Agentå®æProgram.csä¸­çæ³¨åã</p>
<h3 data-pm-slice="2 3 []"><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;p&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;outline: 0px;visibility: visible;line-height: 1.75em;margin-top: 16px;margin-bottom: 16px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span>3.3 æ¯ç¹Agent</span></span></h3>
<p><span data-pm-slice="0 0 []">åå»ºä¸ä¸ªPlanAgentç±»ï¼å®ä¹å¶è½å å AgentCardï¼</span></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> PlanAgent
{
    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">void</span><span style="color: rgba(0, 0, 0, 1)"> Attach(ITaskManager taskManager)
    {
        taskManager.OnMessageReceived </span>=<span style="color: rgba(0, 0, 0, 1)"> QueryPlansAsync;
        taskManager.OnAgentCardQuery </span>=<span style="color: rgba(0, 0, 0, 1)"> GetAgentCardAsync;
    }

    </span><span style="color: rgba(0, 0, 255, 1)">private</span> Task&lt;A2AResponse&gt;<span style="color: rgba(0, 0, 0, 1)"> QueryPlansAsync(MessageSendParams messageSendParams, CancellationToken cancellationToken)
    {
        </span><span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)"> (cancellationToken.IsCancellationRequested)
        {
            </span><span style="color: rgba(0, 0, 255, 1)">return</span> Task.FromCanceled&lt;A2AResponse&gt;<span style="color: rgba(0, 0, 0, 1)">(cancellationToken);
        }

        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Process the message</span>
        <span style="color: rgba(0, 0, 255, 1)">var</span> messageText = messageSendParams.Message.Parts.OfType&lt;TextPart&gt;<span style="color: rgba(0, 0, 0, 1)">().First().Text;

        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Create and return an artifact</span>
        <span style="color: rgba(0, 0, 255, 1)">var</span> message = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> AgentMessage()
        {
            Role </span>=<span style="color: rgba(0, 0, 0, 1)"> MessageRole.Agent,
            MessageId </span>=<span style="color: rgba(0, 0, 0, 1)"> Guid.NewGuid().ToString(),
            ContextId </span>=<span style="color: rgba(0, 0, 0, 1)"> messageSendParams.Message.ContextId,
            Parts </span>= [<span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> TextPart() {
                Text </span>= $<span style="color: rgba(128, 0, 0, 1)">"""
</span>                    ð¡ **æ¯ç¹æ¨è**<span style="color: rgba(0, 0, 0, 1)">

                    ä¸ºæ¨æ¨èä¸æµ·å¿æ¸¸æ¯ç¹ï¼

                    </span>**åå²æåç±»**
                    <span style="color: rgba(128, 0, 128, 1)">1</span>. ðï¸ å¤æ»© -<span style="color: rgba(0, 0, 0, 1)"> æ¬£èµä¸å½å»ºç­åè§ç¾¤
                    </span><span style="color: rgba(128, 0, 128, 1)">2</span>. ð¯ è±«å­ -<span style="color: rgba(0, 0, 0, 1)"> æ±åå¤å¸å­æä»£è¡¨
                    </span><span style="color: rgba(128, 0, 128, 1)">3</span>. ð åéåº -<span style="color: rgba(0, 0, 0, 1)"> åå°å°éä¸æµ·å°å

                    </span>**ç°ä»£é½å¸ç±»**
                    <span style="color: rgba(128, 0, 128, 1)">4</span>. ð¼ ä¸æ¹æç å¡ -<span style="color: rgba(0, 0, 0, 1)"> ä¸æµ·å°æ ï¼ä¿¯ç°æµ¦æ±ä¸¤å²¸
                    </span><span style="color: rgba(128, 0, 128, 1)">5</span>. ð éå®¶å´ -<span style="color: rgba(0, 0, 0, 1)"> éèä¸­å¿ï¼ä¸æµ·ä¹å·
                    </span><span style="color: rgba(128, 0, 128, 1)">6</span>. ðï¸ åäº¬è·¯æ­¥è¡è¡ -<span style="color: rgba(0, 0, 0, 1)"> è´­ç©å¤©å 

                    </span>**æèºä¼é²ç±»**
                    <span style="color: rgba(128, 0, 128, 1)">7</span>. ð¨ ç°å­å -<span style="color: rgba(0, 0, 0, 1)"> æèºå°åºèéå°
                    </span><span style="color: rgba(128, 0, 128, 1)">8</span>. ð æ­¦åº·è·¯ -<span style="color: rgba(0, 0, 0, 1)"> æ¢§æ¡æ ä¸çæ³å¼é£æ
                    </span><span style="color: rgba(128, 0, 128, 1)">9</span>. ð³ ä¸çºªå¬å­ -<span style="color: rgba(0, 0, 0, 1)"> åå¸ç»¿èºï¼äº²å­æ¸¸é¦é

                    ð å»ºè®®æ¸¸ç©æ¶é´ï¼</span><span style="color: rgba(128, 0, 128, 1)">3</span>-<span style="color: rgba(128, 0, 128, 1)">4</span><span style="color: rgba(0, 0, 0, 1)"> å¤©å¯è¦çä¸»è¦æ¯ç¹
                    </span><span style="color: rgba(128, 0, 0, 1)">"""
</span><span style="color: rgba(0, 0, 0, 1)">            }]
        };

        </span><span style="color: rgba(0, 0, 255, 1)">return</span> Task.FromResult&lt;A2AResponse&gt;<span style="color: rgba(0, 0, 0, 1)">(message);
    }

    </span><span style="color: rgba(0, 0, 255, 1)">private</span> Task&lt;AgentCard&gt; GetAgentCardAsync(<span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)"> agentUrl, CancellationToken cancellationToken)
    {
        </span><span style="color: rgba(0, 0, 255, 1)">if</span><span style="color: rgba(0, 0, 0, 1)"> (cancellationToken.IsCancellationRequested)
        {
            </span><span style="color: rgba(0, 0, 255, 1)">return</span> Task.FromCanceled&lt;AgentCard&gt;<span style="color: rgba(0, 0, 0, 1)">(cancellationToken);
        }

        </span><span style="color: rgba(0, 0, 255, 1)">var</span> capabilities = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> AgentCapabilities()
        {
            Streaming </span>= <span style="color: rgba(0, 0, 255, 1)">true</span><span style="color: rgba(0, 0, 0, 1)">,
            PushNotifications </span>= <span style="color: rgba(0, 0, 255, 1)">false</span><span style="color: rgba(0, 0, 0, 1)">,
        };

        </span><span style="color: rgba(0, 0, 255, 1)">return</span> Task.FromResult(<span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> AgentCard()
        {
            Name </span>= <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">plan agent</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
            Description </span>= <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">travel plan &amp; attraction agent</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
            Url </span>=<span style="color: rgba(0, 0, 0, 1)"> agentUrl,
            Version </span>= <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">1.0.0</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
            DefaultInputModes </span>= [<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">text</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">],
            DefaultOutputModes </span>= [<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">text</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">],
            Capabilities </span>=<span style="color: rgba(0, 0, 0, 1)"> capabilities,
            Skills </span>=<span style="color: rgba(0, 0, 0, 1)"> [
                </span><span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> AgentSkill
                {
                    Id </span>= <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">attraction-recommendation</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
                    Name </span>= <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">æ¯ç¹æ¨è</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
                    Description </span>= <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">æ¨èç®çå°çç­é¨æ¯ç¹åæ¸¸ç©è·¯çº¿ï¼åæ¬åå²æåãç°ä»£é½å¸ãæèºä¼é²ç­ç±»å</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
                    Tags </span>= [<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">attraction</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">sightseeing</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">tourism</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">travel</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">],
                    Examples </span>= [<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ä¸æµ·æä»ä¹å¥½ç©ç</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">åäº¬å¿å»çæ¯ç¹</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">æ­å·è¥¿æ¹æä¹ç©</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">],
                    InputModes </span>= [<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">text</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">],
                    OutputModes </span>= [<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">text</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">]
                }
                ],
        });
    }
}</span></pre>
</div>
<p>åæ ·ï¼è¯·åèå¤©æ°Agentå®æProgram.csä¸­çæ³¨åã</p>
<h3 data-pm-slice="2 3 []"><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;p&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;outline: 0px;visibility: visible;line-height: 1.75em;margin-top: 16px;margin-bottom: 16px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span>3.4 ä¸»å©æ</span></span></h3>
<p><span data-pm-slice="0 0 []"><span><span>è¿éæä»¬æä¸å½åä¸ºTravelPlannerClientï¼å¨è¯¥é¡¹ç®ä¸­æä»¬éè¦ç¨å°<span>MAF<span>ï¼å æ­¤æä»¬åå®è£ä¸ä¸ç¸å³NuGetåï¼</span></span></span></span></span></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 0, 1)">Microsoft.Extensions.AI.OpenAI
Microsoft.Agents.AI.A2A
Microsoft.Agents.AI.Abstractions
Microsoft.Extensions.AI.Abstractions</span></pre>
</div>
<p>é¦åï¼åå»ºä¸ä¸ªChatClientä¾ä¸»å©æä½¿ç¨ï¼</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">var</span> chatClient = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> OpenAIClient(
        </span><span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> ApiKeyCredential(openAIProvider.ApiKey),
        </span><span style="color: rgba(0, 0, 255, 1)">new</span> OpenAIClientOptions { Endpoint = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> Uri(openAIProvider.Endpoint) })
    .GetChatClient(openAIProvider.ModelId)
    .AsIChatClient();</span></pre>
</div>
<p>å¶æ¬¡ï¼å°è¿ç¨A2A Agentsè½¬æ¢ä¸ºAIFunction Toolsï¼</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">var</span> agentEndpoints = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)">[]
{
    </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">https://localhost:7021/a2a</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> hotel agent </span>
    <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">https://localhost:7011/a2a</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> weather agent</span>
    <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">https://localhost:7031/a2a</span><span style="color: rgba(128, 0, 0, 1)">"</span> <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> plan agent</span>
<span style="color: rgba(0, 0, 0, 1)">};

</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Collecting all AI Tools</span>
<span style="color: rgba(0, 0, 255, 1)">var</span> functionTools = <span style="color: rgba(0, 0, 255, 1)">new</span> List&lt;AIFunction&gt;<span style="color: rgba(0, 0, 0, 1)">();
</span><span style="color: rgba(0, 0, 255, 1)">foreach</span> (<span style="color: rgba(0, 0, 255, 1)">var</span> endpoint <span style="color: rgba(0, 0, 255, 1)">in</span><span style="color: rgba(0, 0, 0, 1)"> agentEndpoints)
{
    </span><span style="color: rgba(0, 0, 255, 1)">var</span> resolver = <span style="color: rgba(0, 0, 255, 1)">new</span> A2ACardResolver(<span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> Uri(endpoint));
    </span><span style="color: rgba(0, 0, 255, 1)">var</span> card = <span style="color: rgba(0, 0, 255, 1)">await</span><span style="color: rgba(0, 0, 0, 1)"> resolver.GetAgentCardAsync();
    </span><span style="color: rgba(0, 0, 255, 1)">var</span> agent = card.AsAIAgent(); <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Convert A2A Agent to AIAgent instance</span>
<span style="color: rgba(0, 0, 0, 1)">
    functionTools.AddRange(AgentFunctionHelper.CreateFunctionTools(agent, card));
}</span></pre>
</div>
<p>ç¶åï¼åå»ºä¸ä¸ªå¯ä»¥è°ç¨A2A Agentsçä¸»Agentï¼è¿ä¸æ­¥æ¯æ ¸å¿æå¨ï¼</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">var</span> mainAgent = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> ChatClientAgent(
    chatClient: chatClient,
    instructions: </span><span style="color: rgba(128, 0, 0, 1)">"""
</span><span style="color: rgba(0, 0, 0, 1)">    ä½ æ¯ä¸ä¸ªæºè½æè¡è§åå©æãä½ å¯ä»¥å©ç¨å¯ç¨çå·¥å·æ¥å¸®å©ç¨æ·å®æä»»å¡ã
    å½ç¨æ·è¯¢é®æ¶ï¼è¯·ä½¿ç¨åéçå·¥å·è·åä¿¡æ¯ï¼ç¶ååå¤ç¨æ·ã
    </span><span style="color: rgba(128, 0, 0, 1)">"""</span><span style="color: rgba(128, 0, 0, 1)">,</span>
<span style="color: rgba(0, 0, 0, 1)">    tools: [.. functionTools]
   );</span></pre>
</div>
<p>æåï¼æä»¬å¯ä»¥åä¸æµè¯ï¼</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ç¨æ·è¯·æ± - æµè¯ä¸åçæè½è°ç¨</span>
<span style="color: rgba(0, 0, 255, 1)">var</span> userRequests = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)">[]
{
    </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">æ¥è¯¢ä¸ä¸ä¸æµ·çå¤©æ°æåµ</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
    </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">æ¨èä¸ä¸ä¸æµ·çéåº</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
    </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">å¸®æè§åä¸ä¸ä»æ¥ä¸æµ·çä¸æ¥æ¸¸æ¯ç¹ï¼å¹¶åè¯æè¯¥å¦ä½ç©¿è¡£æ</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
};

</span><span style="color: rgba(0, 0, 255, 1)">foreach</span> (<span style="color: rgba(0, 0, 255, 1)">var</span> userRequest <span style="color: rgba(0, 0, 255, 1)">in</span><span style="color: rgba(0, 0, 0, 1)"> userRequests)
{
    Console.WriteLine(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ââââââââââââââââââââââââââââââââââââââââ</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
    Console.WriteLine($</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ð¤ ç¨æ·è¯·æ±: {userRequest}</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
    Console.WriteLine(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ââââââââââââââââââââââââââââââââââââââââ</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);

    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æ§è¡ Agent</span>
    Console.WriteLine(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">â±ï¸ ä¸» Agent å¤çä¸­...</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
    </span><span style="color: rgba(0, 0, 255, 1)">var</span> response = <span style="color: rgba(0, 0, 255, 1)">await</span><span style="color: rgba(0, 0, 0, 1)"> mainAgent.RunAsync(userRequest);
    Console.WriteLine($</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ð¬ åç­:\n{response.Text}</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">);
    Console.WriteLine();
}</span></pre>
</div>
<p>ç°å¨ï¼æä»¬æ¥ççæµè¯ç»æï¼</p>
<p><strong><strong><strong data-pm-slice="0 0 []"><span><span>case1ï¼<span><span>æ¥è¯¢ä¸ä¸ä¸æµ·çå¤©æ°æåµï¼<strong><strong><strong data-pm-slice="0 0 []"><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;text-transform: none;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;text-align: left;line-height: 1.75em;margin-bottom: 8px;margin-top: 8px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);margin: 0px;padding: 0px;outline: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgba(0, 0, 0, 0.9);font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;letter-spacing: 0.578px;orphans: 2;text-align: left;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;visibility: visible;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span>ç®åä»»å¡</span></span></strong></strong></strong><span><span>ï¼</span></span></span></span></span></span></strong></strong></strong></p>
<p><img src="https://img2024.cnblogs.com/blog/381412/202602/381412-20260204221026757-365275321.png" alt="image" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>å¯ä»¥çå°ï¼ä¸»å©æéè¿è°ç¨å¤©æ°Agentè·åå¤©æ°ä¿¡æ¯å®æäºåç­ã</p>
<p data-pm-slice="0 0 []"><span><span><strong><strong data-pm-slice="2 2 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;text-transform: none;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;text-align: left;line-height: 1.75em;margin-bottom: 8px;margin-top: 8px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span><span>case2ï¼<span>æ¨èä¸æµ·çéåºï¼ç®åä»»å¡ï¼</span></span></span></strong></strong></span></span></p>
<p><img src="https://img2024.cnblogs.com/blog/381412/202602/381412-20260204221108758-778672394.png" alt="image" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p data-pm-slice="0 0 []">&nbsp;</p>
<p data-pm-slice="0 0 []"><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;text-transform: none;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;text-align: left;line-height: 1.75em;margin-bottom: 8px;margin-top: 8px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);margin: 0px;padding: 0px;outline: 0px;max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;color: rgba(0, 0, 0, 0.9);font-family: \&quot;PingFang SC\&quot;, system-ui, -apple-system, BlinkMacSystemFont, \&quot;Helvetica Neue\&quot;, \&quot;Hiragino Sans GB\&quot;, \&quot;Microsoft YaHei UI\&quot;, \&quot;Microsoft YaHei\&quot;, Arial, sans-serif;font-size: 17px;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;letter-spacing: 0.578px;orphans: 2;text-align: left;text-indent: 0px;text-transform: none;widows: 2;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;background-color: rgb(255, 255, 255);text-decoration-thickness: initial;text-decoration-style: initial;text-decoration-color: initial;visibility: visible;&quot;,&quot;data-pm-slice&quot;:&quot;0 0 []&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">å¯ä»¥çå°ï¼ä¸»å©æéè¿è°ç¨éåºAgentè·åéåºä¿¡æ¯å®æäºåç­</span></p>
<p data-pm-slice="0 0 []"><strong><strong><strong data-pm-slice="0 0 []"><strong><strong data-pm-slice="2 2 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{&quot;style&quot;:&quot;font-style: normal;font-variant-ligatures: normal;font-variant-caps: normal;text-transform: none;word-spacing: 0px;-webkit-text-stroke-width: 0px;white-space: normal;text-align: left;line-height: 1.75em;margin-bottom: 8px;margin-top: 8px;&quot;},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;},&quot;node&quot;,{&quot;tagName&quot;:&quot;strong&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span><span>case3ï¼å¸®æè§åä¸ä¸ä»æ¥ä¸æµ·çä¸æ¥æ¸¸æ¯ç¹ï¼å¹¶åè¯æè¯¥å¦ä½ç©¿è¡£æ<span><span>ï¼å¤æä»»å¡ï¼</span></span></span></span></strong></strong></strong></strong></strong></p>
<p><img src="https://img2024.cnblogs.com/blog/381412/202602/381412-20260204221128267-114288133.png" alt="image" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p data-pm-slice="0 0 []">å¯ä»¥çå°ï¼ä¸»å©æè°ç¨äºå¤ä¸ªAgentï¼æ¯ç¹Agent å å¤©æ°Agentï¼è·åä¿¡æ¯ï¼è¿å¨æ­¤ä¹ä¸è¿è¡äºæ´åä¼åï¼æåè¾åºäºå®åçåå¤ã</p>
<h1 data-pm-slice="0 0 []">4 å°ç»</h1>
<p data-pm-slice="0 0 []">æ¬æä»ç»äºMAFä¸­éæA2A Agentçæ ¸å¿æä½ï¼å°A2A Agentè½¬æ¢ä¸ºAIFunctionå·¥å·ï¼ç¶åç±ä¸»Agentèªä¸»éæ©è°ç¨æç»çæåç­ï¼å¸ææ¬æçæ¡ä¾å¯¹ä½ ææå¸®å©ã</p>
<h1>ç¤ºä¾æºç </h1>
<p>GitHub:&nbsp;<a href="https://github.com/EdisonTalk/MAFD" target="_blank" rel="noopener nofollow">https://github.com/EdisonTalk/MAFD</a></p>
<h1>åèèµæ</h1>
<p><span data-pm-slice="0 0 []"><span>å£æ°ï¼ã<a href="https://www.cnblogs.com/sheng-jie/p/19200934" target="_blank">.NET + AI æºè½ä½å¼åè¿é¶</a>ãï¼æ¨èææ°ï¼âââââï¼</span></span></p>
<p><span data-pm-slice="0 0 []"><span>Microsoft Learnï¼<span>ã<a href="https://learn.microsoft.com/en-us/agent-framework/overview/agent-framework-overview?wt.mc_id=MVP_397012" target="_blank" rel="noopener nofollow">Agent Framework Tutorials</a>ã</span></span></span></p>
<div><span data-pm-slice="0 0 []"><span>&nbsp;</span></span></div>
<p style="text-align: center"><img src="https://images.cnblogs.com/cnblogs_com/edisonchou/1647700/o_200902144330EdisonTalk-Footer.jpg" alt="" style="width: 65%; border: 1px solid rgba(221, 221, 221, 1); border-radius: 3px; box-shadow: 0 4px 8px rgba(3, 27, 78, 0.12)"></p>
<div id="Copyright">
<p>ä½èï¼<span style="text-decoration: underline">ç±è¿ªç</span></p>
<p>åºå¤ï¼<a title="from" href="https://edisontalk.cnblogs.com" target="_blank">https://edisontalk.cnblogs.com</a></p>
<p>æ¬æçæå½ä½èååå®¢å­å±æï¼æ¬¢è¿è½¬è½½ï¼ä½æªç»ä½èåæå¿é¡»ä¿çæ­¤æ®µå£°æï¼ä¸å¨æç« é¡µé¢ææ¾ä½ç½®ç»åºåæé¾æ¥ã</p>
</div>

</div>
<div id="MySignature" role="contentinfo">
    <div align="center"><a href="https://weibo.com/u/2068032061?s=6uyXnP" target="_blank"><img border="0" src="http://service.t.sina.com.cn/widget/qmd/2068032061/d643d182/10.png"></a></div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-04 22:17">2026-02-04 22:17</span>&nbsp;
<a href="https://www.cnblogs.com/edisontalk">EdisonZhou</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19576617);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19576617', targetLink: 'https://www.cnblogs.com/edisontalk/p/-/quick-start-on-maf-chatper14', title: 'MAFå¿«éå¥é¨ï¼14ï¼å¿«ééæA2A Agent' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
        </channel>
        </rss>