<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åå®¢å­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2026-01-22T01:19:46.762Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åå®¢å­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ C#å¼æ­¥ä¸å¤çº¿ç¨ï¼ä»å¥é¨å°å®æï¼é¿åè¸©åçå®æ´æå ]]></title>
    <link>https://www.cnblogs.com/ymtianyu/p/19515010</link>
    <guid>e2696c9eef0faac7d8cf17969547b683</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ymtianyu/p/19515010" title="åå¸äº 2026-01-22 08:54">
    <span role="heading" aria-level="2">C#å¼æ­¥ä¸å¤çº¿ç¨ï¼ä»å¥é¨å°å®æï¼é¿åè¸©åçå®æ´æå</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        æ¬ææ·±å¥æ¢è®¨äºC#å¼æ­¥ä¸å¤çº¿ç¨ç¼ç¨çæ ¸å¿æ¦å¿µãåå±åç¨åå®æåºç¨ãä»æ©æAPM/EAPæ¨¡å¼å°ç°ä»£async/awaitèå¼ï¼ç³»ç»è§£æäºå¼æ­¥ç¼ç¨çåçä¸å¸¸è§è¯¯åºãéè¿ä¸°å¯çä»£ç ç¤ºä¾ï¼å±ç¤ºäºå¦ä½é¿åUIå¡é¡¿ãå®ç°å¹¶åæ§å¶ãå¤çå¼å¸¸ä¸åæ¶ç­å³é®åºæ¯ï¼å¹¶æä¾äºæ§è½ä¼åä¸é¿åæåï¼æ¨å¨å¸®å©å¼åèç¼åé«æãå¥å£®çå¹¶åä»£ç ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>ä½ æ¯å¦æ¾é­éè¿çé¢âå¡æ­»âãç¨åºååºè¿ç¼ï¼æèå¨é«å¹¶ååºæ¯ä¸æè¶³æ æªï¼</p>
<p>æ ¹æ®.NETå¼åèç¤¾åºçä¸é¡¹è°æ¥ï¼è¶è¿60%çå¼åèè®¤ä¸ºå¼æ­¥åå¤çº¿ç¨ç¼ç¨æ¯å¥é¨åæå¤§çææä¹ä¸ï¼ä¸å¨å®éé¡¹ç®ä¸­ï¼å çº¿ç¨åæ­¥ãæ­»éæèµæºç«äºå¯¼è´çé®é¢ï¼å¹³åå è°è¯æ¶é´ç30%ä»¥ä¸ã</p>
<h2 class="section-title">ð¯ æ ¸å¿æè¦</h2>
<p>æ¬æå°ä»<strong class="highlight">å®éé®é¢</strong>åºåï¼æ¢³çC#å¼æ­¥ä¸å¤çº¿ç¨ç<strong class="highlight">æ ¸å¿åç</strong>ã<strong class="highlight">åå±èç»</strong>ï¼ä»æ©æAPM/EAPå°å¦ä»çasync/awaitï¼ï¼æä¾<strong class="highlight">å¯ç´æ¥å¥ç¨</strong>çä»£ç æ¨¡å¼å<strong class="highlight">é¿åæå</strong>ï¼å©ä½ ååºæ¢é«æåç¨³å¥çå¹¶åä»£ç ã</p>
<h2 class="section-title">ð ä¸»è¦åå®¹èç»</h2>
<div class="list-item">
<p>ð¹ ç¬¬ä¸é¨åï¼é®é¢ä¸èæ¯ââä¸ºä»ä¹æä»¬éè¦å¼æ­¥åå¤çº¿ç¨ï¼</p>
</div>
<div class="list-item">
<p>ð¹ ç¬¬äºé¨åï¼æ ¸å¿åçä¸æ¼è¿ââä»Threadå°Taskï¼åå°async/await</p>
</div>
<div class="list-item">
<p>ð¹ ç¬¬ä¸é¨åï¼å®ææ¼ç¤ºââå¸¸è§åºæ¯çä»£ç ç¤ºä¾ä¸æä½³å®è·µ</p>
</div>
<div class="list-item">
<p>ð¹ ç¬¬åé¨åï¼æ³¨æäºé¡¹ä¸è¿é¶æèââéãåæ¶ãå¼å¸¸å¤çä¸æ§è½æè¡¡</p>
</div>
<h2 class="section-title">ð ç¬¬ä¸é¨åï¼é®é¢ä¸èæ¯</h2>
<p>æ³è±¡ä¸ä¸ï¼ä½ å¨ä¸ä¸ªåªè½å®¹çº³ä¸ä½å¨å¸çé¤åï¼åçº¿ç¨ï¼ç¹é¤ãå¦æè¿ä½å¨å¸å¿é¡»ç­ä¸éèå®å¨åå®ï¼åæ­¥é»å¡ï¼æè½å¼å§ä¸ä¸éï¼é£ä¹åé¢çå®¢äººé½ä¼é¥¿èå­ãå¼æ­¥åå¤çº¿ç¨ï¼å°±æ¯è§£å³è¿ä¸ªâæéâé®é¢çä¸¤ç§æè·¯ï¼</p>
<div class="list-item">
<p>- <strong class="highlight">å¤çº¿ç¨</strong>ï¼å¤éå ä¸ªå¨å¸ï¼å¤ä¸ªçº¿ç¨ï¼åæ¶åèã</p>
</div>
<div class="list-item">
<p>- <strong class="highlight">å¼æ­¥</strong>ï¼è®©ä¸ä¸ªå¨å¸å¨ç­ç¤ç®±çæ¶åï¼å¦IOæä½ï¼ï¼åå»å¤çå¶ä»è½ç«å»åçäºï¼èä¸æ¯å¹²ç­ã</p>
</div>
<p>å¨C#ä¸­ï¼æä»¬éå¸¸ç¨å¤çº¿ç¨å¤çCPUå¯éåä»»å¡ï¼å¦å¾åè®¡ç®ï¼ï¼ç¨å¼æ­¥å¤çIOå¯éåä»»å¡ï¼å¦ç½ç»è¯·æ±ãæä»¶è¯»åï¼ãä½ä¸¤èå¹¶éæ³¾æ¸­åæï¼ç°ä»£async/awaitæ¨¡å¼è®©å®ä»¬å¯ä»¥ä¼éå°ç»åã</p>
<h2 class="section-title">ð§  ç¬¬äºé¨åï¼æ ¸å¿åçä¸æ¼è¿</h2>
<h3>ð¨ æ©æå®ç°æ¹å¼</h3>
<div class="list-item">
<p>1. <strong>APMæ¨¡å¼</strong>ï¼IAsyncResultï¼ï¼å§äº.NET 1.0ï¼ä½¿ç¨Begin/Endæ¹æ³å¯¹ãä»£ç ç¹çï¼åè°å°ç±çæºå¤´ã</p>
</div>
<pre class="highlighter-hljs"><code>// å¤èçAPMç¤ºä¾ï¼ç°å¨å·²ä¸æ¨èï¼
FileStream fs = new FileStream("test.txt", FileMode.Open);
byte[] buffer = new byte[1024];
IAsyncResult result = fs.BeginRead(buffer, 0, buffer.Length, null, null);
int bytesRead = fs.EndRead(result); // é»å¡ç´å°å®æ</code></pre>
<div class="list-item">
<p>2. <strong>EAPæ¨¡å¼</strong>ï¼åºäºäºä»¶çå¼æ­¥æ¨¡å¼ï¼ï¼å¼å¥äºAsyncCompletedEventHandleråProgressChangedãå¸åä»£è¡¨ï¼WebClientã</p>
</div>
<pre class="highlighter-hljs"><code>// EAPç¤ºä¾
WebClient client = new WebClient();
client.DownloadStringCompleted += (s, e) =&gt; Console.WriteLine(e.Result);
client.DownloadStringAsync(new Uri("http://example.com"));
// éè¦å¤çå¤ä¸ªäºä»¶ï¼ç¶æç®¡çå¤æ</code></pre>
<div class="list-item">
<p>3. <strong>Threadä¸ThreadPool</strong>ï¼æåºç¡çå¤çº¿ç¨ãThreadPoolæä¾äºçº¿ç¨å¤ç¨ï¼ä½ç¼ºä¹é«çº§æ§å¶ï¼å¦è¿åå¼ãå»¶ç»­ä»»å¡ï¼ã</p>
</div>
<h3>ð å½åçå®ç°æ¹å¼ï¼Taskä¸async/await</h3>
<p>ä».NET 4.0å¼å¥Task Parallel Library (TPL)ï¼å°.NET 4.5çasync/awaitå³é®å­ï¼C#çå¹¶åç¼ç¨åçäºé©å½æ§ååã</p>
<div class="tip"><strong>ð¡ æ ¸å¿æ¦å¿µï¼</strong>Taskä»£è¡¨ä¸ä¸ªå¼æ­¥æä½ãasync/awaitæ¯ç¼è¯å¨çâè¯­æ³ç³âï¼å®è®©ä½ ç¨åæ­¥çåæ³å®ç°å¼æ­¥é»è¾ï¼åºå±åºäºç¶ææºè½¬æ¢ã</div>
<pre class="highlighter-hljs"><code>// ç°ä»£å¼æ­¥ä»£ç ç¤ºä¾
public async Task&lt;string&gt; DownloadStringAsync(string url)
{
    using HttpClient client = new HttpClient();
    // awaitä¸ä¼é»å¡çº¿ç¨ï¼èæ¯å°æ¹æ³æèµ·ï¼è®©åºæ§å¶æ
    string result = await client.GetStringAsync(url);
    // å®æåï¼å¨åéçä¸ä¸æï¼å¦UIçº¿ç¨ï¼æ¢å¤æ§è¡
    return result;
}</code></pre>
<p><strong class="highlight">å³é®çè§£ï¼</strong>asyncæ¹æ³å¨éå°ç¬¬ä¸ä¸ªawaitæ¶ç«å³è¿åä¸ä¸ªTaskï¼è¯¥Taskä»£è¡¨æ´ä¸ªå¼æ­¥æä½çå®æãawaitä¼æ£æ¥Taskæ¯å¦å·²å®æï¼è¥æªå®æï¼åæèµ·æ¹æ³ï¼å°æ§å¶æäº¤åç»è°ç¨èï¼<strong class="highlight">ä¸ä¼é»å¡çº¿ç¨</strong>ã</p>
<h2 class="section-title">ð§ ç¬¬ä¸é¨åï¼å®ææ¼ç¤º</h2>
<h3>åºæ¯1ï¼UIçé¢ä¸å¡é¡¿</h3>
<pre class="highlighter-hljs"><code>// â éè¯¯åæ³ï¼åæ­¥æ¹æ³é»å¡UIçº¿ç¨
private void Button_Click(object sender, EventArgs e)
{
    string data = DownloadStringSync("http://api.com/data"); // çé¢å»ç»
    textBox.Text = data;
}

// â æ­£ç¡®åæ³ï¼å¼æ­¥æ¹æ³
private async void Button_Click(object sender, EventArgs e)
{
    // æ³¨æï¼å¼æ­¥äºä»¶å¤çå½æ°å¯ç¨async voidï¼ä½éå¸¸åªç¨äºé¡¶å±äºä»¶
    try
    {
        string data = await DownloadStringAsync("http://api.com/data");
        textBox.Text = data; // èªå¨åå°UIçº¿ç¨ä¸ä¸ææ§è¡
    }
    catch (HttpRequestException ex)
    {
        MessageBox.Show($"ä¸è½½å¤±è´¥: {ex.Message}");
    }
}</code></pre>
<h3>åºæ¯2ï¼å¹¶åæ§è¡å¤ä¸ªä»»å¡å¹¶ç­å¾ææå®æ</h3>
<pre class="highlighter-hljs"><code>public async Task&lt;List&lt;Product&gt;&gt; LoadAllProductsAsync(List&lt;string&gt; urls)
{
    List&lt;Task&lt;Product&gt;&gt; downloadTasks = new List&lt;Task&lt;Product&gt;&gt;();
    foreach (var url in urls)
    {
        downloadTasks.Add(DownloadProductAsync(url));
    }
    // åæ¶åèµ·ææè¯·æ±ï¼ç­å¾å¨é¨å®æ
    Product[] products = await Task.WhenAll(downloadTasks);
    return products.ToList();
}</code></pre>
<h3>åºæ¯3ï¼éå¶å¹¶åæ°ï¼SemaphoreSlimï¼</h3>
<pre class="highlighter-hljs"><code>private SemaphoreSlim semaphore = new SemaphoreSlim(5); // æå¤åæ¶5ä¸ª

public async Task ProcessItemsAsync(List&lt;Item&gt; items)
{
    List&lt;Task&gt; tasks = new List&lt;Task&gt;();
    foreach (var item in items)
    {
        await semaphore.WaitAsync(); // ç­å¾ä¿¡å·é
        tasks.Add(Task.Run(async () =&gt;
        {
            try
            {
                await ProcessItemAsync(item);
            }
            finally
            {
                semaphore.Release(); // éæ¾ä¿¡å·é
            }
        }));
    }
    await Task.WhenAll(tasks);
}</code></pre>
<h2 class="section-title">â ï¸ ç¬¬åé¨åï¼æ³¨æäºé¡¹ä¸è¿é¶æè</h2>
<div class="warning"><strong>ð« å¸¸è§é·é±ï¼</strong>
<div class="list-item">
<p>1. <strong class="highlight">æ­»é</strong>ï¼å¨UIä¸ä¸æï¼å¦WPF/WinFormsï¼ä¸­åæ­¥ç­å¾Task.ResultæTask.Wait()ãè§£å³æ¹æ³ï¼å§ç»å¼æ­¥å°åºï¼async/awaitï¼ï¼é¿åæ··åä½¿ç¨é»å¡ç­å¾ã</p>
</div>
<div class="list-item">
<p>2. <strong class="highlight">Async Void</strong>ï¼é¤äºäºä»¶å¤çå¨ï¼å°½éé¿åasync voidãå ä¸ºasync voidæ¹æ³æ æ³è¢«å¤é¨ç­å¾ï¼ä¸å¼å¸¸ä¼ç´æ¥æå°åæ­¥ä¸ä¸æï¼å¯è½å¯¼è´ç¨åºå´©æºã</p>
</div>
<div class="list-item">
<p>3. <strong class="highlight">å¿½ç¥å¼å¸¸</strong>ï¼å¿è®°å¯¹å¼æ­¥æä½è¿è¡try-catchãå¼æ­¥æ¹æ³çå¼å¸¸å¨awaitæ¶æåºï¼éå¦¥åå¤çã</p>
</div>
<div class="list-item">
<p>4. <strong class="highlight">éè¯¯å°ä½¿ç¨Task.Run</strong>ï¼å°å¨é¨IOæä½åè£¹å¨Task.Runä¸­ãå¯¹äºæ¬èº«å°±æ¯å¼æ­¥çIO APIï¼å¦HttpClient.GetStringAsyncï¼ï¼ç´æ¥awaitå³å¯ï¼æ éååè£ã</p>
</div>
</div>
<div class="tip"><strong>ð è¿é¶æå·§ï¼</strong>
<div class="list-item">
<p>1. <strong>åæ¶æä½</strong>ï¼ä½¿ç¨CancellationTokenSourceåCancellationTokenå®ç°åä½å¼åæ¶ã</p>
</div>
<div class="list-item">
<p>2. <strong>è¿åº¦æ¥å</strong>ï¼éè¿IProgress&lt;T&gt;æ¥å£æ¥åè¿åº¦ï¼è§£è¦UIæ´æ°ã</p>
</div>
<div class="list-item">
<p>3. <strong>ValueTask</strong>ï¼å¯¹äºå¯è½åæ­¥å®æçé«æ§è½åºæ¯ï¼èèä½¿ç¨ValueTaskåå°å åéã</p>
</div>
<div class="list-item">
<p>4. <strong>ConfigureAwait(false)</strong>ï¼å¨åºä»£ç æéUIä¸ä¸æä¸­ï¼ä½¿ç¨ConfigureAwait(false)é¿åå¼ºå¶åå°åå§ä¸ä¸æï¼å¯æåæ§è½å¹¶é¿åæ­»éã</p>
</div>
</div>
<hr style="border: none; height: 1px; background: linear-gradient(90deg, rgba(0, 0, 0, 0), rgba(52, 152, 219, 1), rgba(0, 0, 0, 0)); margin: 40px 0">
<p style="text-align: center">---<strong>åå¨æå</strong>---<br>å¸æè¿ä»½æ»ç»è½å¸®ä½ é¿å¼ä¸äºåãå¦æè§å¾æç¨ï¼ä¸å¦¨ç¹ä¸ª èµð æ æ¶èâ­ æ è®°ä¸ä¸ï¼æ¹ä¾¿éæ¶åé¡¾ãä¹æ¬¢è¿å³æ³¨æï¼åç»­ä¸ºä½ å¸¦æ¥æ´å¤ç±»ä¼¼çå®æè§£æãæä»»ä½çé®ææ³æ³ï¼æä»¬è¯è®ºåºè§ï¼ä¸èµ·äº¤æµå¼åä¸­çåç§å¿å¾ä¸é®é¢ã</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-22 08:54">2026-01-22 08:54</span>&nbsp;
<a href="https://www.cnblogs.com/ymtianyu">ä¸åç¨åºåªå</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19515010);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19515010', targetLink: 'https://www.cnblogs.com/ymtianyu/p/19515010', title: 'C#å¼æ­¥ä¸å¤çº¿ç¨ï¼ä»å¥é¨å°å®æï¼é¿åè¸©åçå®æ´æå' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ç»æåå¼ï¼ä¸ä¼å¤§æ¨¡åå æççæ³æ¸¸æï¼äººç±»èçç«ä¸è¶³10%ï¼ ]]></title>
    <link>https://www.cnblogs.com/greywen/p/19512202</link>
    <guid>3cc1d48c9fd49e79bc4a58faecc2125b</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/greywen/p/19512202" title="åå¸äº 2026-01-22 08:29">
    <span role="heading" aria-level="2">ç»æåå¼ï¼ä¸ä¼å¤§æ¨¡åå æççæ³æ¸¸æï¼äººç±»èçç«ä¸è¶³10%ï¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h1>åºäº LLM + Next.js çåå¼å®æçæ³æ¸¸æ</h1>
<p><strong>æè¦</strong>ï¼å½ä½ ä»¥ä¸ºèªå·±å¨åéæºæ°çæå¨ç©æ¸¸ææ¶ï¼å¯¹é¢ç AI æ­£å¨éè¯»ä½ ææçåå²åºæ³è®°å½ï¼å¹¶åäºä¸ç¯å³äºä½ å¿çç¶æçå°ä½æãæ¬æå¸¦ä½ æè§£è¿ä¸ªåºäº Next.js 16 + Tailwind v4 + LLM çâè¿åº¦è®¾è®¡â+âæ²¡å¥ææ¯å«éâ+âæé£ä¹ç¹ææâé¡¹ç®ã</p>
<p>ð <strong>åç»èæ¿ä»¬ä½éª:ï¼å·ä½è§åææå°±è½ç©ï¼ï¼</strong></p>
<p>ä¼åå°åï¼<a href="https://rps.anhejin.cn" target="_blank" rel="noopener nofollow">https://rps.anhejin.cn</a></p>
<p>ææ¡ä»¶çï¼<a href="https://rps-eta-ten.vercel.app" target="_blank" rel="noopener nofollow">https://rps-eta-ten.vercel.app<br></a></p>
<p><img alt="image" width="752" height="423" loading="lazy" data-src="https://img2024.cnblogs.com/blog/809672/202601/809672-20260121154520537-280291882.png" class="lazyload"></p>
<hr>
<p>æè¿é²çæ²¡äºï¼çªç¶æ³è¿ç¨AIåç¹ä»£ç ãä½ä¸ºä¸åè¦æâç®åéæ±å¤æåâå»å¨ DNA éçèåç«¯ï¼æå³å®æ¿æç®åçâåªåç³å¤´å¸âå¼åã</p>
<p>å¨è¿ä¸ª AI æ»¡å¤©é£çæ¶ä»£ï¼è¿å¨ç¨ <code>Math.random()</code> åå¯¹æé»è¾æªåå¤ªæ²¡è¿½æ±äºãäºæ¯ï¼æåºäºææ°çææ¯æ ï¼Next.js 16 + React 19ï¼ï¼æ¥å¥äº OpenAIç­ä¸ä¼å¤§æ¨¡åï¼æåºäºä¸ä¸ªä¼âè¯»å¿âãä¼å²è®½ï¼çè³æåå¼è®ºççæ³æ¸¸æã</p>
<h2>ä¸ºä»ä¹æ¯åªåç³å¤´å¸ï¼</h2>
<p>å«ç¬ï¼åªåç³å¤´å¸å¶å®æ¯ä¸ä¸ªæä½³çåå¼è®ºæ¨¡åã</p>
<ul>
<li><strong>æ°æ</strong>ï¼å®å¨éæºï¼Chaosï¼ã</li>
<li><strong>æ®éäºº</strong>ï¼èµ¢äºä¿æï¼è¾äºåæï¼Win-Stay, Lose-Shiftï¼ã</li>
<li><strong>é«æ</strong>ï¼é¢å¤ä½ çé¢å¤ã</li>










</ul>
<p>æçç®æ æ¯ï¼<strong>æå»ºä¸ä¸ªè½çç©¿ä½ å¿çç AIï¼å¹¶ä¸ç¨ç®åæåæ²¿çåç«¯ææ¯æ æå®è·èµ·æ¥ã</strong></p>
<h2>ææ¯éåï¼è¿å°±å«âæé¸¡ç¨çåâ</h2>
<p>ä¸ºäºéå¾ä¸è¿ä¸ªâé«æºåâAIï¼æå¨ææ¯æ ä¸ç´æ¥ææ»¡ï¼å¨é¨éç¨äºç®åï¼2025-2026ï¼çææ°ç¨³å®çï¼</p>
<ol>
<li><strong>Next.js 16.1 (App Router)</strong>ï¼æå¡ç«¯ç»ä»¶ï¼RSCï¼å¤çæ ¸å¿é»è¾ï¼éè AI ç Promptï¼ä¿è¯ä½ æ²¡æ³éè¿ F12 å·çç­æ¡ã</li>
<li><strong>React 19</strong>ï¼äº«åææ°ç Hooks åå¹¶åç¹æ§ã</li>
<li><strong>Tailwind CSS v4</strong>ï¼å¯¹ï¼å°±æ¯é£ä¸ªä¸ç¨éç½®æå»ºå·¥å·ãæ§è½èµ·é£ç v4 çæ¬ãå³é®æ¯AIåæ¬¢ç¨è¿ä¸ª</li>
<li><strong>SQLite + LibSQL</strong>ï¼è½»éçº§æ°æ®åºï¼ç¨æ¥è®°ä»ââåä¸ï¼è®°å½ä½ çèè´æ°æ®ã</li>










</ol>
<h2>æ ¸å¿ç©æ³ï¼AI æ¯æä¹âè¯»å¿âçï¼</h2>
<p>è¿ä¸ªé¡¹ç®çæ ¸å¿ä¸å¨äº UI æå¤ç«ï¼è½ç¶ Tailwind 4 ç¡®å®å¾æ¶¦ï¼ï¼èå¨äº <code>/lib/ai-service.ts</code> éçé£æ®µé»è¾ã</p>
<p>ä¼ ç»çæ¸¸æ AI å¾å¾æ¯é¢è®¾å¥½ç <code>if-else</code>ãä½å¨æçè®¾è®¡éï¼æ¯ä¸è½®æ¸¸æï¼æé½ä¼æä½ å¨è¿ä¸ª Session éçææåå²è®°å½æåï¼åè®²æäºä¸æ ·åç» LLMï¼å¤§è¯­è¨æ¨¡åï¼ï¼</p>
<pre><code class="language-typescript">
// lib/ai-service.ts

// æå»ºæ¸¸æåå²æè¿°
const historyDescription = history.length &gt; 0
  ? history.map((h) =&gt;
      `ç¬¬${h.round}è½®: ç©å®¶åº${translateChoice(h.player_choice)}, 
       AIåº${translateChoice(h.ai_choice)}, 
       ç»æ: ${translateResult(h.result)}`
    ).join("\n")
  : "è¿æ¯ç¬¬ä¸è½®ï¼æ²¡æåå²è®°å½ã";

// ...åéç» LLM
const response = await client.chat.completions.create({
  messages: [
    { role: "system", content: systemPrompt },
    { role: "user", content: userPrompt }, // è¿éåå«äº historyDescription
  ],
  // ...
});
</code></pre>
<blockquote>
<p>System: ä½ æ¯ä¸ä¸ªçæ³é«æï¼ä½ çå¯¹ææ¯ä¸ä¸ªæ®éäººç±»ã<br>
User: åå è½®æåµå¦ä¸ï¼ç¬¬1è½®ç©å®¶åºåªåï¼ä½ åºå¸ï¼è¾ï¼ï¼ç¬¬2è½®ç©å®¶åºç³å¤´ï¼ä½ åºå¸ï¼èµ¢ï¼ãç°å¨æ¯ç¬¬3è½®ï¼è¯·åæç©å®¶çå¿çï¼å¹¶ç»åºä½ çåºæ³ã</p>












</blockquote>
<p><strong>ä¸ä»å¦æ­¤ï¼æç» AI è®¾å®äºä¸¤ç§æ¨¡å¼ï¼</strong></p>
<ol>
<li><strong>ç­ç¥æ¨¡å¼ï¼Strategyï¼</strong>ï¼éä½æ¨¡åç <code>temperature</code>ï¼éæºæ§ï¼ï¼è®©å®è¿è¡ä¸¥å¯çé»è¾æ¨çãæ¯å¦å®ä¼åæï¼âç©å®¶ä¸ä¸æè¾äºï¼æ ¹æ®å¿çå­¦ï¼è¿æä»å¤§æ¦çä¼åºåå¶æä¸ä¸æçææ°ï¼æä»¥æé¢å¤ä»â¦â¦â</li>
<li><strong>æ··æ²æ¨¡å¼ï¼Chaosï¼</strong>ï¼æé« <code>temperature</code>ï¼è®© AI å½»åºæ¾é£èªæï¼ä¸»æä¸ä¸ªä¹±æ³ææ­»èå¸åã</li>












</ol>
<h2>ä¼ééçº§ï¼å½ GPT èå¹²ç¼ºå¤±æ¶</h2>
<p>ä½ä¸ºèå¨æ ï¼å¿é¡»è¦èèä¸ç§æåµï¼<strong>å¦æ API æäºï¼æèååºè¶æ¶äºæä¹åï¼</strong></p>
<p>é¾éè®©ç¨æ·å¹²ç­çè½¬ååï¼ç»å¯¹ä¸è¡ã</p>
<p>æå¨åç«¯å®ç°äºä¸å¥åºäºä¼ ç»ç»è®¡å­¦ç<strong>æ¬å°ç®æ³</strong>ä½ä¸ºâå¤èâãå¦æ LLM å¨è§å®æ¶é´åæ²¡æååºï¼ç³»ç»ä¼æ ç¼åæ¢å°æ¬å°é»è¾ãè¿ä¸ªæ¬å°é»è¾ä¸ç¹ä¹ä¸å¼±ï¼å®åç½®äºç»å¸çç­ç¥åºï¼ä»£ç å¨ <code>lib/game.ts</code>ï¼ï¼</p>
<pre><code class="language-typescript">
// lib/game.ts éçå¿çå­¦åå¼é»è¾

// 1. å¦æç©å®¶ä¸è½®è¾äºï¼å¾åäºåºè½åå¶AIä¸ä¸æçéé¡¹ (Win-Stay, Lose-Shiftçåç§)
if (lastResult === 'ai_win') {
  const lastAIChoice = lastRound.ai_choice as Choice;
  // é¢æµç©å®¶ä¼åºåå¶æä¸ä¸ä¸æçç
  const predictedPlayerChoice = whatBeatsAI[lastAIChoice];
  // é£æå°±é¢å¤ä½ çé¢å¤
  return counterMoves[predictedPlayerChoice];
}

// 2. å¦æç©å®¶ä¸è½®èµ¢äºï¼å¯è½ç»§ç»­ç¨åä¸æ
if (lastResult === 'player_win') {
  // ç©å®¶å¯è½ç»§ç»­ç¨åä¸æï¼ç´æ¥åå¶å®
  return counterMoves[lastPlayerChoice];
}
</code></pre>
<p>è¿äºç­ç¥åæ¬ï¼</p>
<ul>
<li><strong>é¢çåæ</strong>ï¼å¦æä½ ä¸ç´åºç³å¤´ï¼å®å°±ä¼ç¯çåºå¸ã</li>
<li><strong>åå¶è¿è</strong>ï¼å¦æä½ èµ¢äºï¼å®ä¼åè®¾ä½ ä¼ç»§ç»­åºä¸æ ·çï¼ç´æ¥åå¶ä½ ã</li>
</ul>
<p>å¨ä»£ç å®ç°ä¸ï¼è¿åªæ¯ä¸ä¸ªç®åç <code>try-catch</code> éçº§ï¼ä½å¯¹ç¨æ·ä½éªæ¥è¯´æ¯è´¨çé£è·ãç¨æ·æ ¹æ¬æè§ä¸å° AI æçº¿äºï¼åªä¼æè§âè¿å®¶ä¼æä¹åé£æ ¼äºï¼â</p>
<h2>å¨æ ä½éªï¼Next.js App Router çä¸æ»</h2>
<p>å¨ Next.js 16 ä¸­ï¼ååç«¯çè¾¹çåå¾éå¸¸æ¨¡ç³ï¼è¤ä¹ï¼ãæ¬é¡¹ç®ä½¿ç¨äº App Router ç Route Handlers æ¥å¤çæ¸¸æé»è¾ã</p>
<p>åç«¯ç»ä»¶è°ç¨åç«¯æ¥å£å°±åè°ç¨æ¬å°å½æ°ä¸æ ·èªç¶ï¼</p>
<pre><code class="language-typescript">
// src/app/game/[id]/page.tsx
const playRound = useCallback(async (choice: Choice | null, timeout: boolean = false) =&gt; {
    // ...
    const res = await fetch('/api/game/play', {
        method: 'POST',
        body: JSON.stringify({ /*...*/ }),
    });
    // ...
}, []);
</code></pre>
<p>èå¨æå¡ç«¯ (<code>src/app/api/game/play/route.ts</code>)ï¼æä»¬å®æäºå®æ´çä¸å¡é­ç¯ï¼</p>
<pre><code class="language-typescript">
// src/app/api/game/play/route.ts
export async function POST(request: NextRequest) {
    // 1. èº«ä»½æ ¡éªä¸æ°æ®åºè¯»å
    const { sessionId, playerChoice } = await request.json();
    const baseSession = await db.execute(/*...*/);

    // 2. è°ç¨ AI (å¸¦è¶æ¶éçº§)
    // å¦æ API ååºå¤ªæ¢ï¼è¿éä¼èªå¨åæ¢å°æ¬å°é»è¾
    const aiChoiceResult = await Promise.race([
        getAIChoiceFromAPI(aiConfig, history, difficulty),
        timeoutPromise // è®¾å®çè¶æ¶æ¶é´
    ]);

    // 3. å¤å®èè´ &amp; åå¥æ°æ®åº
    const result = determineWinner(playerChoice, aiChoiceResult.choice);
    // ...
    
    return NextResponse.json({ /*...*/ });
}
</code></pre>
<p>è¿ä¸å¥æµç¨è¡äºæµæ°´ï¼ç±»åå®å¨è½ç¶ä¸å¦ Server Actions æè´ï¼ä½éè¿å±äº«ç±»åå®ä¹ï¼Shared Typesï¼ï¼ä¾ç¶è½ä¿è¯ååç«¯çä¸è´æ§ãä¸ç¨åç¹çç Swaggerï¼ä¸ç¨æå¤æç Reduxï¼ä¸ææ¢­ã</p>
<h2>å®éä¸æï¼ç±äºå¤ªä¼å²è®½å¯¼è´ä¸æ³ç©äº</h2>
<p>ä¸ºäºå¢å è¶£å³æ§ï¼æè®© AI ä¸ä»è¾åºâç³å¤´/åªå/å¸âï¼è¿è¦è¾åºä¸æ®µ <strong>Reasoningï¼æ¨çè¿ç¨ï¼</strong> å <strong>Commentï¼èµåå²è®½ï¼</strong>ã</p>
<p>å½ä½ è¾ææ¯èµæ¶ï¼ä½ å¯è½ä¼çå°è¿æ ·çç»ç®è¯­ï¼<br>
<em>âæçä½ ç¬¬ä¸æç¹è±«äºå¾ä¹åºäºåªåï¼æå°±ç¥éä½ æ¯ä¸ªä¿å®çäººãä¸ä¸æå«è¿ä¹ææ¾äºï¼äººç±»ãâ</em></p>
<p>è¯´å®è¯ï¼ä»£ç åå®åæèªå·±æµè¯äºå æï¼èçå±ç¶åªæ 40% å·¦å³ãççå±å¹ä¸ AI çå²è®½ï¼æå³ä½¿ä½ä¸ºå¼åèä¹ä¸ç¦æçï¼è¿ç©æå¿æ¯ä¸æ¯çææè¯ï¼</p>
<h2>ä½éªå°å</h2>
<p>è½è¯´ä»£ç æ²¡ä»ä¹æ ¸å¿ç§æï¼ä½å¸¦æ¥çåå¼ä½éªç¡®å®å¾æè¶£ãæå·²ç»æé¡¹ç®é¨ç½²ä¸å»äºï¼æ¬¢è¿æ¥ææï¼æèè¢«èï¼ï¼</p>
<p>ð <strong>å¨çº¿ä½éª</strong></p>
<p>ä¼åå°åï¼<a href="https://rps.anhejin.cn" target="_blank" rel="noopener nofollow">https://rps.anhejin.cn</a></p>
<p>ææ¡ä»¶çï¼<a href="https://rps-eta-ten.vercel.app" target="_blank" rel="noopener nofollow">https://rps-eta-ten.vercel.app<br></a></p>
<h2>æ»ç»</h2>
<p>è¿ä¸ªé¡¹ç®è¯æäºä¸ä»¶äºï¼<strong>ææ¯æ¯å°å·çï¼ä½éè¿ç®åçåæç»åï¼å¯ä»¥åé åºææ¸©åº¦ï¼çè³æç¹ç«æï¼çäº¤äºä½éªã</strong> Next.js 16 å React 19 çç»åè®©å¨æ å¼åçé¨æ§è¿ä¸æ­¥éä½ï¼è®©æä»¬ææ´å¤ç²¾åå»å³æ³¨âç©æ³âæ¬èº«ï¼èä¸æ¯è¢«æå»ºéç½®æç£¨ã</p>
<p>å¦æä½ å¯¹æºç æå´è¶£ï¼æèæ³æ¹æ¹ Prompt æ AI è°ææâè®¨å¥½åäººæ ¼âï¼æ¬¢è¿å» <a href="https://github.com/greywen/rps" rel="noopener nofollow">GitHub</a> æä»£ç ã</p>
<hr>
<p><em>æ³¨ï¼</em></p>
<ol>
<li>æ¬æä»ä¾ææ¯äº¤æµï¼ç©æ¸¸æè¾ç» AI è¯·å¿ç¨æ³å¤´å»ææ¾ç¤ºå¨ï¼å¼åèæ¦ä¸è´è´£ã</li>
<li>è¿åªæ¯ä¸ä¸ªå¨±ä¹å°æ¸¸æï¼ç»æå·æéæºæ§ï¼ä¸ä»£è¡¨ä»»ä½AIå¤§æ¨¡åççå®è½åã</li>
<li>æ¸¸æç»æä»ä¾å¨±ä¹ï¼ä¸åºç¨äºè¯ä¼°ææ¯è¾AIæ¨¡åçå®éæ§è½ã</li>
<li>ç½ç«ä¸æ¶éãå­å¨æåäº«ä»»ä½ä¸ªäººä¿¡æ¯æç¨æ·æ°æ®ã</li>












</ol>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-22 08:30">2026-01-22 08:29</span>&nbsp;
<a href="https://www.cnblogs.com/greywen">æè¿å¶å®</a>&nbsp;
éè¯»(<span id="post_view_count">132</span>)&nbsp;
è¯è®º(<span id="post_comment_count">3</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19512202);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19512202', targetLink: 'https://www.cnblogs.com/greywen/p/19512202', title: 'ç»æåå¼ï¼ä¸ä¼å¤§æ¨¡åå æççæ³æ¸¸æï¼äººç±»èçç«ä¸è¶³10%ï¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ AspNetCoreå¼åç¬è®°ï¼WebApié¡¹ç®éæä¼ä¸å¾®ä¿¡åå¬ä¼å· ]]></title>
    <link>https://www.cnblogs.com/deali/p/19514332</link>
    <guid>848fcc3ce933b2c8fe4c8934bbd61bfa</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/deali/p/19514332" title="åå¸äº 2026-01-21 23:16">
    <span role="heading" aria-level="2">AspNetCoreå¼åç¬è®°ï¼WebApié¡¹ç®éæä¼ä¸å¾®ä¿¡åå¬ä¼å·</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="åè¨">åè¨</h2>
<p>å¾ä¹æ²¡åæç« äºï¼ç°å¨æäºAIï¼å¶å®å·²ç»ä¸æä¹éè¦åæç« ï¼åæ­£ä¸æå°±é®AIåã</p>
<p>ä¸è¿AIæ»æ¯æç²åºçï¼å°±æ¯å¦å½åçå¾®ä¿¡å¼åã</p>
<p>å¾®ä¿¡çææ¡£æ¯å¬è®¤ççï¼èä¸ç»å¸¸æåªåªæ¹æ¥å£åä¸æ´æ°ææ¡£ï¼æä»¥AIå¯¹å¾®ä¿¡å¼åçAPIå¶å®ä¸æä¹çæï¼ç»å¸¸ç»åºä¸äºéè¯¯çåå¤ã</p>
<p>æ¬æè®°å½ä¸ä¸æè¿æä½¿ç¨ C# WebApi é¡¹ç®æ¥å¥ä¼ä¸å¾®ä¿¡åå¬ä¼å·çè¿ç¨ï¼ä¸»è¦æ¯ç¨å°èªå¨åå¤åè½ã</p>
<h2 id="åç½®å·¥ä½">åç½®å·¥ä½</h2>
<h3 id="ä¾èµåº">ä¾èµåº</h3>
<p>æç¨å°äº <strong>SKIT.FlurlHttpClient.Wechat</strong> è¿ä¸ªç³»åçåºï¼<a href="https://github.com/fudiwei/DotNetCore.SKIT.FlurlHttpClient.Wechat" target="_blank" rel="noopener nofollow">https://github.com/fudiwei/DotNetCore.SKIT.FlurlHttpClient.Wechat</a></p>
<p>åæ¬æ³ç´æ¥ç¨ Flurl å¯¹æ¥çï¼æ¯ç«ç°å¨æéæäºé¤å­ï¼AIï¼ï¼çå¥é½æ¯éå­ï¼å¥é½æ³é è½®å­ã</p>
<p>ä¸è¿æäºä¸ä¸æçæ¶èå¤¹ï¼åç°æè¿ä¸ªé¡¹ç®ï¼å°è£äºå¾®ä¿¡çå¤§é¨åæ¥å£ï¼é£è¿è¦å¥èªè¡è½¦ï¼ç´æ¥ç¨å°±å®äºå¿äºã</p>
<p>å¶ä¸­ï¼</p>
<ul>
<li>ä¼ä¸å¾®ä¿¡ï¼SKIT.FlurlHttpClient.Wechat.Work</li>
<li>å¬ä¼å·ï¼SKIT.FlurlHttpClient.Wechat.Api</li>
</ul>
<h3 id="å¾®ä¿¡éç½®ä¿¡æ¯">å¾®ä¿¡éç½®ä¿¡æ¯</h3>
<p>éè¦åå¤è¿äºéç½®ä¿¡æ¯ï¼</p>
<p>ä¼ä¸å¾®ä¿¡ï¼</p>
<pre><code class="language-c#">public class WechatWorkOptions {
    public string CorpId { get; set; } = string.Empty;
    // åºç¨ID
    public int AgentId { get; set; }
    // åºç¨å¯é¥
    public string Secret { get; set; } = string.Empty;
    // åè° Token
    public string CallbackToken { get; set; } = string.Empty;
    // åè° EncodingAESKey
    public string CallbackEncodingAESKey { get; set; } = string.Empty;
}
</code></pre>
<p>å¬ä¼å·ï¼</p>
<pre><code class="language-c#">public class WechatApiClientOptions {
    public string AppId { get; set; } = string.Empty;
    public string AppSecret { get; set; } = string.Empty;
    public string CallbackToken { get; set; } = string.Empty;
    public string CallbackEncodingAESKey { get; set; } = string.Empty;
}
</code></pre>
<h3 id="æ³¨åæå¡">æ³¨åæå¡</h3>
<pre><code class="language-c#">// ä¼ä¸å¾®ä¿¡
builder.Services.AddSingleton&lt;WechatWorkClient&gt;(sp =&gt; {
    var options = sp.GetRequiredService&lt;IOptions&lt;WechatWorkOptions&gt;&gt;().Value;
    return WechatWorkClientBuilder.Create(options).Build();
});

// å¬ä¼å·
builder.Services.AddSingleton&lt;WechatApiClient&gt;(sp =&gt; {
    var options = sp.GetRequiredService&lt;IOptions&lt;WechatMpOptions&gt;&gt;().Value;
    return WechatApiClientBuilder.Create(options).Build();
});
</code></pre>
<p>åå¤å·¥ä½å°±æå®äºã</p>
<h2 id="ç®¡çtoken">ç®¡çtoken</h2>
<p>å¾®ä¿¡çæ¥å£é½éè¦ç¨ AccessToken æè½è°ç¨ï¼ä½å¾®ä¿¡åä¸æ³å¼åèæ¯æ¬¡é½å»è¯·æ±è·åtokenï¼æä»¥åªè½è·åä¸æ¬¡ç¶åèªå·±ä¿å­äºã</p>
<p>C# å¯ä»¥ç¨ IMemoryCache ç»ä»¶ï¼å¾æ¹ä¾¿çç®¡çè¿äºä¸´æ¶å­å¨çæ°æ®ï¼Djangoæ¡æ¶ä¹æåç½®çcacheæºå¶ï¼å¶ä»è¯­è¨æ¡æ¶å¯ä»¥ç¨Redisè¿ç±»NoSQLæ°æ®åºæ¥å­å¨ãæ¯è¿äºï¼æ¬æè¿æ¯ä»ç»C#çã</p>
<p>æç¨ä¸ä¸ª <code>WechatWorkTokenService</code> æå¡æ¥ç®¡çä¼ä¸å¾®ä¿¡çtokenï¼å¬ä¼å·ãå°ç¨åºè¿ç§ä¹æ¯åçï¼</p>
<pre><code class="language-c#">public class WechatWorkTokenService(
    WechatWorkClient client,
    IMemoryCache cache,
    IOptions&lt;WechatWorkOptions&gt; options
) : IWechatWorkTokenService {
    private const string CacheKey = "WechatWorkAccessToken";

    // ç¨äºå¹¶åæ§å¶ï¼é²æ­¢ç¬é´é«å¹¶åå¯¼è´å¤æ¬¡è¯·æ± Token æ¥å£
    private static readonly SemaphoreSlim Semaphore = new SemaphoreSlim(1, 1);

    /// &lt;summary&gt;
    /// è·å AccessToken
    /// &lt;/summary&gt;
    public async Task&lt;string&gt; GetAccessTokenAsync(CancellationToken cancellationToken = default) {
        // 1. å°è¯ä»ç¼å­è·å
        if (cache.TryGetValue(CacheKey, out string? accessToken) &amp;&amp; !string.IsNullOrEmpty(accessToken)) {
            return accessToken;
        }

        // 2. ç¼å­æªå½ä¸­ï¼å éè¯·æ±
        await Semaphore.WaitAsync(cancellationToken);
        try {
            // åéæ£æ¥ï¼é²æ­¢æéç­å¾ççº¿ç¨åæ¬¡è¯·æ±
            if (cache.TryGetValue(CacheKey, out accessToken) &amp;&amp; !string.IsNullOrEmpty(accessToken)) {
                return accessToken;
            }

            // 3. è°ç¨æ¥å£è·å Token
            var request = new CgibinGetTokenRequest();
            var response = await client.ExecuteCgibinGetTokenAsync(request, cancellationToken);

            if (!response.IsSuccessful()) {
                throw new Exception($"è·å AccessToken å¤±è´¥: {response.ErrorMessage} (Code: {response.ErrorCode})");
            }

            accessToken = response.AccessToken;

            // 4. è®¾ç½®ç¼å­
            // æå 5 åéè¿æï¼ç¡®ä¿å¨è¿æåå·æ°
            // å¦æ ExpiresIn å°äº 300 ç§ï¼åè®¾ä¸ºä¸åæ¶é´
            var expirySeconds = response.ExpiresIn &gt; 300 ? response.ExpiresIn - 300 : response.ExpiresIn / 2;
            var cacheEntryOptions = new MemoryCacheEntryOptions()
                .SetAbsoluteExpiration(TimeSpan.FromSeconds(expirySeconds));

            cache.Set(CacheKey, accessToken, cacheEntryOptions);

            return accessToken;
        }
        finally {
            Semaphore.Release();
        }
    }
}
</code></pre>
<h2 id="ä¼ä¸å¾®ä¿¡">ä¼ä¸å¾®ä¿¡</h2>
<p>ä¼ä¸å¾®ä¿¡çéå¶æ¯è¾å°ï¼å¯ä»¥ä¸»å¨ç»ç¨æ·åä¿¡æ¯ï¼æä»¥å¯ä»¥ææ¥æ¶ååéä¿¡æ¯åå¼ï¼ä¾å¦è°ç¨LLMå¤çåå¤çæ¶åï¼ä¼æ¯è¾æ¢ï¼å¯ä»¥æåå¤æ¾å°å¼æ­¥ä»»å¡éåéå»å®ç°ã</p>
<h3 id="éªè¯åè°">éªè¯åè°</h3>
<p>ç´æ¥ä¸æ¥å£ä»£ç ã</p>
<p>å¨éç½®ä¼ä¸å¾®ä¿¡åºç¨URLçæ¶åï¼å¾®ä¿¡æå¡å¨ä¼åéä¸ä¸ªGETè¯·æ±å°éç½®çURLè¿è¡éªè¯ï¼åç«¯ç¨åºéè¦éªè¯ç­¾åï¼è§£å¯åæåå®¹å¤è¯»ç»å¾®ä¿¡æå¡å¨ã</p>
<p>ä¸é¢è¿ä¸ªæ¥å£å°±å®ç°äºè¿ä¸ªéªè¯æ¹æ³ã</p>
<p>è¿æ ·å®ç°ä¹åå¡«å <code>https://example.com/api/wechat/work/callback</code> è¿ä¸ªå°åå°±å¥½äºã</p>
<pre><code class="language-c#">[ApiController]
[AllowAnonymous]
[Route("api/wechat/work/callback")]
public class WechatWorkController(
    WechatWorkClient client,
    IBackgroundTaskQueue queue,
    ILogger&lt;WechatWorkController&gt; logger
) : ControllerBase {
    /// &lt;summary&gt;
    /// åè°éªè¯ (GET)
    /// &lt;/summary&gt;
    [HttpGet]
    public IActionResult Echo(
        [FromQuery(Name = "msg_signature")] string msgSignature,
        [FromQuery(Name = "timestamp")] string timestamp,
        [FromQuery(Name = "nonce")] string nonce,
        [FromQuery(Name = "echostr")] string echoStr
    ) {
        // éªè¯ç­¾å
        var verifyResult = client.VerifyEventSignatureForEcho(
            timestamp, nonce, echoStr, msgSignature, out string? replyEcho
        );

        if (verifyResult.Result) {
            logger.LogInformation("Echo verification successful. ReplyEcho: {ReplyEcho}", replyEcho);
            return Content(replyEcho ?? string.Empty);
        }

        logger.LogWarning("Echo verification failed. Error: {Error}", verifyResult.Error?.Message);
        return BadRequest($"Verify signature failed: {verifyResult.Error?.Message}");
    }
}
</code></pre>
<h3 id="æ¥æ¶ä¿¡æ¯">æ¥æ¶ä¿¡æ¯</h3>
<p>æ¥æ¶ä¿¡æ¯åä¸é¢çéªè¯é½æ¯ä¸ä¸ªURLï¼åºå«æ¯æ¥æ¶ä¿¡æ¯æ¶ï¼å¾®ä¿¡æå¡å¨ä¼åURLåPOSTè¯·æ±ã</p>
<p>ä»£ç éæè¯¦ç»æ³¨éäºï¼åºè¯¥ä¸ç¨è§£éå¤ªå¤ã</p>
<pre><code class="language-c#">/// &lt;summary&gt;
/// æ¥æ¶æ¶æ¯ (POST)
/// &lt;/summary&gt;
[HttpPost]
public async Task&lt;IActionResult&gt; Callback(
    [FromQuery(Name = "msg_signature")] string msgSignature,
    [FromQuery(Name = "timestamp")] string timestamp,
    [FromQuery(Name = "nonce")] string nonce
) {
    // å¿é¡»è¯»ååå§ Request Body æµï¼èä¸è½ä½¿ç¨ [FromBody] ç»å®
    // åå ï¼
    // 1. å¾®ä¿¡ç­¾åéªè¯ä¾èµäºåå§è¯·æ±ä½ï¼ä»»ä½ç©ºæ ¼ãæ¢è¡ç¬¦çå·®å¼é½ä¼å¯¼è´ç­¾åæ ¡éªå¤±è´¥
    // 2. æ¨éåå®¹éå¸¸æ¯å å¯ç XMLï¼éè¦åè·ååå§å­ç¬¦ä¸²ä¼ ç» SDK è¿è¡è§£å¯
    using var reader = new StreamReader(Request.Body);
    var xml = await reader.ReadToEndAsync();

    logger.LogDebug("Callback Body (Length: {Length}): {Xml}", xml.Length, xml);

    // 1. éªè¯ç­¾å
    // è½ç¶ DeserializeEventFromXml åé¨å¯è½ä¼åå«è§£å¯è¿ç¨ï¼ä½æ¾å¼éªè¯ç­¾åæ¯æ´å®å¨çåæ³
    var verifyResult = client.VerifyEventSignatureFromXml(timestamp, nonce, xml, msgSignature);
    if (!verifyResult.Result) {
        logger.LogWarning("Callback signature verification failed. Error: {Error}", verifyResult.Error?.Message);
        return BadRequest($"Verify signature failed: {verifyResult.Error?.Message}");
    }

    // 2. ä½¿ç¨ SKIT åºæä¾çæ©å±æ¹æ³èªå¨è§£å¯å¹¶ååºåå
    // æ³¨æï¼éè¦å¨ WechatWorkClientOptions ä¸­éç½® PushToken å PushEncodingAESKey
    WechatWorkEvent wechatEvent;
    try {
        wechatEvent = client.DeserializeEventFromXml(xml);
        logger.LogInformation("Callback deserialized successfully. MessageType: {MessageType}, FromUser: {FromUser}, ToUser: {ToUser}", wechatEvent.MessageType, wechatEvent.FromUserName, wechatEvent.ToUserName);
    } catch (Exception ex) {
        // ååºååå¤±è´¥ï¼éå¸¸æ¯å ä¸ºç­¾åéªè¯å¤±è´¥æè§£å¯å¤±è´¥ï¼
        logger.LogError(ex, "Callback deserialization failed.");
        return BadRequest($"Deserialization failed: {ex.Message}");
    }

    // å¤çé»è¾
    if (string.Equals(wechatEvent.MessageType, "TEXT", StringComparison.OrdinalIgnoreCase)) {
        // åæ¬¡ååºååä¸ºå·ä½çææ¬æ¶æ¯äºä»¶ä»¥è·å Content
        var textEvent = client.DeserializeEventFromXml&lt;TextMessageEvent&gt;(xml);
        if (textEvent != null &amp;&amp; !string.IsNullOrEmpty(textEvent.Content) &amp;&amp;
            !string.IsNullOrEmpty(textEvent.FromUserName)) {
            logger.LogInformation("Processing TEXT message from {FromUser}: {Content}", textEvent.FromUserName, textEvent.Content);
            await ProcessTextMessageAsync(textEvent.FromUserName, textEvent.Content);
        }
    }
    else if (string.Equals(wechatEvent.MessageType, "IMAGE", StringComparison.OrdinalIgnoreCase)) {
        var imageEvent = client.DeserializeEventFromXml&lt;ImageMessageEvent&gt;(xml);
        if (imageEvent != null &amp;&amp; !string.IsNullOrEmpty(imageEvent.MediaId) &amp;&amp;
            !string.IsNullOrEmpty(imageEvent.FromUserName)) {
            logger.LogInformation("Processing IMAGE message from {FromUser}: {MediaId}", imageEvent.FromUserName, imageEvent.MediaId);
            await ProcessImageMessageAsync(imageEvent.FromUserName, imageEvent.MediaId);
        }
    }
    else {
        logger.LogInformation("Ignored message type: {MessageType}", wechatEvent.MessageType);
    }

    return Ok("success");
}

</code></pre>
<h3 id="å¼æ­¥å¤çä¿¡æ¯">å¼æ­¥å¤çä¿¡æ¯</h3>
<p>å ä¸ºä¼ä¸å¾®ä¿¡å¯ä»¥ä¸»å¨ç»ç¨æ·åä¿¡æ¯ï¼æä»¥å¯ä»¥ææ¥æ¶ååéä¿¡æ¯åå¼ï¼ä¾å¦è°ç¨LLMå¤çåå¤çæ¶åï¼ä¼æ¯è¾æ¢ï¼å¯ä»¥æåå¤æ¾å°å¼æ­¥ä»»å¡éåéå»å®ç°ã</p>
<h4 id="ææ¬ä¿¡æ¯">ææ¬ä¿¡æ¯</h4>
<p>çº¯ææ¬å¤çèµ·æ¥è¿æ¯æ¯è¾ç®åçã</p>
<pre><code class="language-c#">/// &lt;summary&gt;
/// å¼æ­¥å¤çææ¬æ¶æ¯
/// &lt;/summary&gt;
private async Task ProcessTextMessageAsync(string toUser, string content) {
    await queue.QueueBackgroundWorkItemAsync(async (serviceProvider, token) =&gt; {
        // å¨åå°ä»»å¡ä¸­è§£æ Scoped æå¡
        var chatBot = serviceProvider.GetRequiredService&lt;IChatBotService&gt;();
        var logger = serviceProvider.GetRequiredService&lt;ILogger&lt;WechatWorkController&gt;&gt;();

        try {
            logger.LogInformation("Processing background task for user {ToUser}", toUser);

            // 1. è°ç¨ ChatBot è·ååå¤
            string reply = await chatBot.ProcessMessageAsync(content);

            // 2. åéåå¤
            var accessToken = await _tokenService.GetAccessTokenAsync();
            var request = new CgibinMessageSendRequest {
                AccessToken = accessToken,
                AgentId = _agentId,
                ToUserIdList = [toUser],
                MessageType = "text",
                MessageContentAsText = new CgibinMessageSendRequest.Types.TextMessage {
                    Content = content
                }
            };
            var response = await _client.ExecuteCgibinMessageSendAsync(request);
            if (!response.IsSuccessful()){
                throw new Exception($"åéä¼ä¸å¾®ä¿¡æ¶æ¯å¤±è´¥: {response.ErrorMessage} (Code: {response.ErrorCode})");
            }

            logger.LogInformation("Reply sent to {ToUser}: {ReplyContent}", toUser, reply);
        } catch (Exception ex) {
            logger.LogError(ex, "Failed to process message for {ToUser}", toUser);
        }
    });
}
</code></pre>
<h4 id="å¾çä¿¡æ¯">å¾çä¿¡æ¯</h4>
<p>å¾çéº»ç¦ä¸ç¹ï¼å¾®ä¿¡ä¸ä¼ç´æ¥æå¾çæ°æ®åæ¥ï¼èæ¯æäºä¸ª mediaIdï¼è¦æä»¬æå¨å»ä¸è½½ã</p>
<p>C# è¿éè¿æ¯æ¹ä¾¿çï¼ç´æ¥æå¾çä¸è½½æ¾å°åå­éäº¤ç»ç¬¬ä¸æ¹æå¡å¤çï¼å¦OCRï¼ï¼ç¶ååæç»æååºæ¥ã</p>
<pre><code class="language-c#">/// &lt;summary&gt;
/// å¼æ­¥å¤çå¾çæ¶æ¯
/// &lt;/summary&gt;
private async Task ProcessImageMessageAsync(string toUser, string mediaId) {
    await queue.QueueBackgroundWorkItemAsync(async (serviceProvider, token) =&gt; {
        var chatBot = serviceProvider.GetRequiredService&lt;IChatBotService&gt;();
        var wechatService = serviceProvider.GetRequiredService&lt;IWechatWorkService&gt;();
        var tokenService = serviceProvider.GetRequiredService&lt;IWechatWorkTokenService&gt;();
        var logger = serviceProvider.GetRequiredService&lt;ILogger&lt;WechatWorkController&gt;&gt;();
        var wechatClient = serviceProvider.GetRequiredService&lt;WechatWorkClient&gt;();

        try {
            logger.LogInformation("Processing background image task for user {ToUser}", toUser);

            // 1. Download Image
            var accessToken = await tokenService.GetAccessTokenAsync(token);
            var request = new CgibinMediaGetRequest {
                AccessToken = accessToken,
                MediaId = mediaId
            };
            var resp = await wechatClient.ExecuteCgibinMediaGetAsync(request, cancellationToken: token);

            if (!resp.IsSuccessful()) {
                logger.LogError("Failed to download image: {Error}", resp.ErrorMessage);
                await wechatService.SendTextMessageAsync(toUser, "æ±æ­ï¼æ æ³è·åå¾çåå®¹ã");
                return;
            }

            var bytes = resp.GetRawBytes();
            var mimeType = "image/jpeg";
            if (bytes.Length &gt; 0 &amp;&amp; bytes[0] == 0x89 &amp;&amp; bytes[1] == 0x50 &amp;&amp; bytes[2] == 0x4E &amp;&amp; bytes[3] == 0x47) {
                mimeType = "image/png";
            }

            var items = new ChatMessageContentItemCollection {
                new ImageContent(bytes, mimeType)
            };

            // 2. Call ChatBot
            var chatMessage = new ChatMessageContent(AuthorRole.User, items);
            var reply = await chatBot.ProcessMessageAsync(chatMessage);

            // 3. Send Reply
            await wechatService.SendTextMessageAsync(toUser, reply);

            logger.LogInformation("Reply sent to {ToUser}", toUser);
        } catch (Exception ex) {
            logger.LogError(ex, "Failed to process image message for {ToUser}", toUser);
        }
    });
}
</code></pre>
<h2 id="å¬ä¼å·">å¬ä¼å·</h2>
<p>å¥½ï¼ä¼ä¸å¾®ä¿¡æå®äºãæ¥ä¸æ¥ççå¬ä¼å·ã</p>
<p>å¬ä¼å·åä¼ä¸å¾®ä¿¡ä¸ä¸æ ·ï¼æ æ³ä¸»å¨åä¿¡æ¯ï¼æä»¥å¨æ¶å°ç¨æ·ä¿¡æ¯æ¶ï¼è¦è¿åXMLæ ¼å¼çç¸åºï¼ä½ä¸ºåå¤åå®¹ï¼5ç§åå¿é¡»åå¤ã</p>
<p>éªè¯åè°è¿éå°±ä¸éå¤äºï¼åä¼ä¸å¾®ä¿¡æ¯ä¸æ ·çã</p>
<pre><code class="language-c#">/// &lt;summary&gt;
/// æ¥æ¶æ¶æ¯ (POST)
/// &lt;/summary&gt;
[HttpPost]
public async Task&lt;IActionResult&gt; Callback(
    [FromQuery(Name = "msg_signature")] string? msgSignature,
    [FromQuery(Name = "signature")] string? signature,
    [FromQuery(Name = "timestamp")] string timestamp,
    [FromQuery(Name = "nonce")] string nonce,
    [FromQuery(Name = "encrypt_type")] string? encryptType
) {
    using var reader = new StreamReader(Request.Body);
    var xml = await reader.ReadToEndAsync();

    _logger.LogDebug("Callback Body (Length: {Length}): {Xml}", xml.Length, xml);

    // 1. éªè¯ç­¾å
    // å¦ææ¯å®å¨æ¨¡å¼ (encryptType == "aes")ï¼ä½¿ç¨ VerifyEventSignatureFromXml (éè¦ msg_signature)
    // å¦ææ¯æææ¨¡å¼ï¼SDK åé¨ DeserializeEventFromXml ä¹ä¼åä¸äºæ ¡éªï¼ä½éå¸¸æææ¨¡å¼ç­¾åæ ¡éªä½¿ç¨ signature (VerifyEventSignatureForEcho logic)
    // è¿éä¸»è¦å¤çå®å¨æ¨¡å¼ï¼å ä¸ºæææ¨¡å¼ä¸éå¸¸ä¸éè¦å¤æçè§£å¯éªè¯
    if (string.Equals(encryptType, "aes", StringComparison.OrdinalIgnoreCase)) {
        if (string.IsNullOrEmpty(msgSignature)) {
            return BadRequest("msg_signature is required for aes encryption");
        }

        var verifyResult = _client.VerifyEventSignatureFromXml(timestamp, nonce, xml, msgSignature);
        if (!verifyResult.Result) {
            _logger.LogWarning("Callback signature verification failed. Error: {Error}", verifyResult.Error?.Message);
            return BadRequest($"Verify signature failed: {verifyResult.Error?.Message}");
        }
    }
    else {
        // æææ¨¡å¼ï¼å¯ä»¥ä½¿ç¨ signature éªè¯ (å¯é)
        // var verifyResult = _client.VerifyEventSignatureForEcho(timestamp, nonce, signature);
    }

    // 2. ä½¿ç¨ SKIT åºèªå¨è§£å¯å¹¶ååºåå
    WechatApiEvent wechatEvent;
    try {
        wechatEvent = _client.DeserializeEventFromXml(xml);
        _logger.LogInformation("Callback deserialized successfully. MessageType: {MessageType}, FromUser: {FromUser}, ToUser: {ToUser}",
                               wechatEvent.MessageType, wechatEvent.FromUserName, wechatEvent.ToUserName);
    } catch (Exception ex) {
        _logger.LogError(ex, "Callback deserialization failed.");
        return BadRequest($"Deserialization failed: {ex.Message}");
    }

    switch (wechatEvent.MessageType?.ToLower()) {
        case "text":
            var textEvent = _client.DeserializeEventFromXml&lt;TextMessageEvent&gt;(xml);
            if (!string.IsNullOrEmpty(textEvent.Content) &amp;&amp;
                !string.IsNullOrEmpty(textEvent.FromUserName)) {
                _logger.LogInformation("Processing TEXT message from {FromUser}: {Content}", textEvent.FromUserName, textEvent.Content);

                var isSafetyMode = string.Equals(encryptType, "aes", StringComparison.OrdinalIgnoreCase);

                var textReply = new TextMessageReply {
                    ToUserName = textEvent.FromUserName,
                    FromUserName = textEvent.ToUserName,
                    MessageType = "text",
                    Content = "è¿éæ¯åå¤ç»ç¨æ·çåå®¹",
                    CreateTimestamp = DateTimeOffset.Now.ToUnixTimeSeconds()
                };

                var replyXml = _client.SerializeEventToXml(textReply, isSafetyMode);
                return Content(replyXml, "application/xml");
            }
            break;

        default:
            _logger.LogInformation("Ignored message type: {MessageType}", wechatEvent.MessageType);
            break;
    }

    return Ok("success");
}
</code></pre>
<p>å¯ä»¥çå°ä»£ç éå¤æ­æ¯ text ç±»ååï¼æé äº TextMessageReply ç±»åçæ°æ®ï¼ç¶åè°ç¨ SKIT.FlurlHttpClient.Wechat åºæä¾ç XML åºååæ¹æ³ã</p>
<p>è¿ä¸ªåºå°è£äºç´æ¥åºååè¢«å¨åå¤äºä»¶çæ©å±æ¹æ³ï¼é»è®¤ä¼åºååä¸ºå®å¨æ¨¡å¼ã</p>
<h2 id="æ¥å¥ç»å½">æ¥å¥ç»å½</h2>
<p>å¾®ä¿¡ç»å½åå¤§é¨åç¬¬ä¸æ¹åç¹è®¤è¯æµç¨å·®ä¸å¤ï¼å·²ç»åè¿å¥½å¤æ¬¡äºã</p>
<p>ä¸åèµè¿°è¿ä¸ªæµç¨ï¼æå´è¶£çåå­¦å¯ä»¥çè¿ç¯æç« : <a href="https://blog.deali.cn/p/django-taro-wechat-work-login" target="_blank" rel="noopener nofollow">Django+Taroé¡¹ç®å®ç°ä¼ä¸å¾®ä¿¡ç»å½</a></p>
<p>æ¬æ¬¡ææ²¡ææ¥å¥ç»å½ï¼èæ¯ç¨äºå¦ä¸ç§æ¹å¼å®ç°å¾®ä¿¡åå¹³å°ç¨æ·çå³èï¼å°±æ¯å¹³å°ä¸çæä¸ä¸ªkeyï¼è®©ç¨æ·å¨å¾®ä¿¡åéï¼æè§è¿æºæææçï¼å¦è¾è¹å¾ã</p>
<p>æä»¥è¿éæ¬è¿ä¸ä¸æä¹ååçåç¹è®¤è¯é¡¹ç®éçä»£ç å§ï¼è¯¦æå¯ä»¥çè¿ç¯æç« : <a href="https://blog.deali.cn/p/almost-abandoned-project-open-source" target="_blank" rel="noopener nofollow">IdentityServerLiteé¡¹ç®åè¿æçå¼æºè®¡å</a></p>
<pre><code class="language-c#">/// &lt;summary&gt;
/// ä¼ä¸å¾®ä¿¡ç»å½ - ä½¿ç¨åè°ç code ç»å½
/// &lt;/summary&gt;
/// &lt;param name="code"&gt;&lt;/param&gt;
/// &lt;param name="state"&gt;ä¸äºè®©å¾®ä¿¡è½¬åä¼ ç»åç«¯çåæ°ï¼è¿éæ¯åç¹è®¤è¯é¡¹ç®çsession_id&lt;/param&gt;
[HttpGet("wecom/login")]
public async Task&lt;IActionResult&gt; WecomLogin(string code, string? state = null) {
    logger.LogInformation("ä¼ä¸å¾®ä¿¡ç»å½ï¼code: {code}, state: {state}, crop: {cropTag}", code, state, cropTag);

    if (string.IsNullOrWhiteSpace(state)) {
        return BadRequest(new ApiResponse { Message = "ä¼ä¸å¾®ä¿¡ç»å½ç state ä¸ºç©ºï¼æ æ³è·å session" });
    }

    var session = await authService.GetSession(state);
    if (session == null) {
        return NotFound(new ApiResponse { Message = $"session {state} ä¸å­å¨ï¼" });
    }

    var userInfo = await wecomService.GetUserInfo(code);
    if (userInfo == null) {
        return BadRequest(new ApiResponse { Message = "è·å userinfo éè¯¯ï¼" });
    }

    if (userInfo.Errcode != 0) {
        return BadRequest(new ApiResponse { Message = $"è·åç¨æ·ä¿¡æ¯å¤±è´¥ï¼ä¼å¾®éè¯¯ä¿¡æ¯: {userInfo.Errmsg}" });
    }

    var wechatUser = await wecomService.GetUser(userInfo.Userid);
    if (wechatUser == null) {
        return BadRequest(new ApiResponse { Message = "è·å user éè¯¯ï¼" });
    }

    var user = await userRepo.Where(a =&gt; a.PhoneNumber == wechatUser.Userid).FirstAsync();
    // ç¨æ·ä¸å­å¨çè¯ï¼èªå¨åå»ºç¨æ·
    if (user == null) {
        user = await accountService.CreateUser(
            await accountService.GenerateUsername(wechatUser.Name),
            wechatUser.Userid,
            wechatUser.Name
        );

        logger.LogInformation("ç¨æ· {Phone} ä¸å­å¨ï¼å·²åå»ºæ°ç¨æ· {UserId}", 
                              wechatUser.Userid, user.Id);
        // return NotFound(new ApiResponse { Message = $"ç¨æ· {wechatUser.Userid} ä¸å­å¨ï¼" });
    }

    try {
        var url = await authService.LoginSessionAndGetUri(session, user, true);
        logger.LogInformation("ä¼ä¸å¾®ä¿¡ç»å½æåï¼è·³è½¬å°é¾æ¥: {url}", url);
        return Redirect(url);
    }
    catch (Exception ex) {
        ex.ToExceptionless().Submit();
        return Problem($"ä¼ä¸å¾®ä¿¡ç»å½å¤±è´¥: LoginSessionAndGetUri å¤±è´¥ - {ex.Message}");
    }
}
</code></pre>
<h2 id="å°ç»">å°ç»</h2>
<p>å¤§æ¦å°±æ¯è¿äºäºï¼å¾ç¹çï¼ä¸è¿è¿æºå¥½ç¨çï¼è¿äºä»£ç åå®åå ä¹æ¯ä¸æ¬¡å°±å¯¹æ¥éè¿ï¼æ³èµ·æ¥ä»¥ååå¤è°è¯çç»åï¼æå¹ï¼æ¥å­ä¹æ¯å¥½èµ·æ¥äºåï¼ð</p>
<p>å¦ä¸ç¹æå¹ï¼Semantic Kernelçå¥½ç¨ï¼æç¨äºå¤ªä¹langchainï¼åºè¯¥æ©ç¹ä¸semantic kernelçã</p>

</div>
<div id="MySignature" role="contentinfo">
    å¾®ä¿¡å¬ä¼å·ï¼ãç¨åºè®¾è®¡å®éªå®¤ã
ä¸æ³¨äºäºèç½ç­é¨æ°ææ¯æ¢ç´¢ä¸å¢éææ·å¼åå®è·µï¼åæ¬æ¶æè®¾è®¡ãæºå¨å­¦ä¹ ä¸æ°æ®åæç®æ³ãç§»å¨ç«¯å¼åãLinuxãWebååç«¯å¼åç­ï¼æ¬¢è¿ä¸èµ·æ¢è®¨ææ¯ï¼åäº«å­¦ä¹ å®è·µç»éªã
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-21 23:17">2026-01-21 23:16</span>&nbsp;
<a href="https://www.cnblogs.com/deali">ç¨åºè®¾è®¡å®éªå®¤</a>&nbsp;
éè¯»(<span id="post_view_count">74</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19514332);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19514332', targetLink: 'https://www.cnblogs.com/deali/p/19514332', title: 'AspNetCoreå¼åç¬è®°ï¼WebApié¡¹ç®éæä¼ä¸å¾®ä¿¡åå¬ä¼å·' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ C#/.NET/.NET Coreææ¯åæ²¿å¨å | ç¬¬ 66 æï¼2026å¹´1.12-1.18ï¼ ]]></title>
    <link>https://www.cnblogs.com/Can-daydayup/p/19514257</link>
    <guid>43cc051e1f51aec6369a1bb55a7de8d7</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Can-daydayup/p/19514257" title="åå¸äº 2026-01-21 22:41">
    <span role="heading" aria-level="2">C#/.NET/.NET Coreææ¯åæ²¿å¨å | ç¬¬ 66 æï¼2026å¹´1.12-1.18ï¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p><img src="https://img2024.cnblogs.com/blog/1336199/202509/1336199-20250922202742912-411034871.png" alt="image" loading="lazy"></p>
<h2 data-tool="mdniceç¼è¾å¨"><span>åè¨</span></h2>
<p data-tool="mdniceç¼è¾å¨"><span>C#/.NET/.NET Coreææ¯åæ²¿å¨åï¼ä½ çæ¯å¨ææ¯æåéï¼è®°å½ãè¿½è¸ªC#/.NET/.NET Coreé¢åãçæçæ¯å¨ææ°ãæå®ç¨ãææä»·å¼çææ¯æç« ãç¤¾åºå¨æãä¼è´¨é¡¹ç®åå­¦ä¹ èµæºç­ãè®©ä½ æ¶å»ç«å¨ææ¯åæ²¿ï¼å©åææ¯æé¿ä¸è§éæå®½ã</span></p>
<blockquote>
<p><span>æ¬¢è¿æç¨¿ãæ¨èæèªèä¼è´¨æç« ãé¡¹ç®ãå­¦ä¹ èµæºç­ã</span></p>
</blockquote>
<ul class="list-paddingleft-1">
<li><strong>ðææ¯åæ²¿å¨åGiteeå¼æºå°åï¼</strong><a href="https://gitee.com/ysgdaydayup/DotNetGuide/blob/main/docs/DotNet/DotNetWeekly.md" target="_blank" rel="noopener nofollow"><span>https://gitee.com/ysgdaydayup/DotNetGuide/blob/main/docs/DotNet/DotNetWeekly.md</span></a></li>
<li><strong>ð°ææ¯åæ²¿å¨åGitHubå¼æºå°åï¼</strong><a href="https://github.com/YSGStudyHards/DotNetGuide/blob/main/docs/DotNet/DotNetWeekly.md" target="_blank" rel="noopener nofollow"><span>https://github.com/YSGStudyHards/DotNetGuide/blob/main/docs/DotNet/DotNetWeekly.md</span></a></li>
</ul>
<h2 data-tool="mdniceç¼è¾å¨"><span>å¦ä½ç¨ .NET MAUI æå»º Android å°é¨ä»¶</span></h2>
<ul class="list-paddingleft-1">
<li><strong>æç« ç®ä»ï¼</strong><span>&nbsp;æ¬åå®¢å°ä»ç»ä¹åå³äº iOS å°é¨ä»¶çäºå¨å°é¨ä»¶ç Android é¨åãAndroid éå¸¸æ´å®½æ¾ï¼ä½æ´ç®åï¼ä½ å¯ä»¥ç´æ¥å¨ Visual Studio éç .NET MAUI é¡¹ç®éæå»ºææåå®¹ãå¤ææ§æºäºä¼å¤å¯ç¨çä»»å¡éé¡¹ä»¥åéè¦èèè¾æ§çå®åçæ¬ãå°±å iOS å°é¨ä»¶åå®¢éä¸æ ·ï¼è¿ä¹ä¸æ¯ä¸æ­¥æ­¥çæç¨ãç¸åï¼å®çªåºæ¾ç¤ºäºä½ å¨æå»º Android å°é¨ä»¶æ¶éå¸¸éå°éç¢çé¡ºåºä¸­æå¤§ä¸æéè¦çé¨åãå®ä»åå»ºä¸ä¸ªç®åçéæå°é¨ä»¶å¼å§ï¼éæ­¥åå±æå¯éç½®ãå®å¨äº¤äºçå°é¨ä»¶ã</span></li>
<li><strong>æç« å°åï¼</strong><span>&nbsp;https://devblogs.microsoft.com/dotnet/how-to-build-android-widgets-with-dotnet-maui/</span></li>
</ul>
<h2 data-tool="mdniceç¼è¾å¨"><span>.NET å .NET Framework 2026 å¹´ 1 ææå¡åå¸æ´æ°</span></h2>
<ul class="list-paddingleft-1">
<li><strong>æç« ç®ä»ï¼</strong><span>&nbsp;æ¬¢è¿æ¥å°æä»¬ 2026 å¹´ 1 æçèå.NET æå¡æ´æ°ãè®©æä»¬è¿å¥.NET å.NET Framework çææ°çæ¬ï¼è¿éç®è¦ä»ç»ä¸ä¸æä»¬æå¡çæ¬ä¸­çæ°åå®¹ã</span></li>
<li><strong>æç« å°åï¼</strong><span>&nbsp;https://devblogs.microsoft.com/dotnet/dotnet-and-dotnet-framework-january-2026-servicing-updates/</span></li>
</ul>
<h2 data-tool="mdniceç¼è¾å¨"><span>å¦ä½ä¸æ­¥æ­¥å° ASP.NET MVC åçº§ä¸º.NET</span></h2>
<ul class="list-paddingleft-1">
<li><strong>æç« ç®ä»ï¼</strong><span>&nbsp;å° ASP.NET MVC åºç¨ä».NET Framework åçº§å°ç°ä»£.NET å¹¶ä¸æ¯ç®åççæ¬æåãæ­¤æ¬¡è¿ç§»ä»£è¡¨äºè¿è¡æ¶ãæç®¡æ¨¡åãéç½®ç³»ç»ãä¾èµæ³¨å¥å HTTP æµæ°´çº¿æ¶æçè½¬åãè®¸å¤å¢éä½ä¼°äºè¿ä¸ç¹ï¼æå®å½ä½æ åçæ¡æ¶åçº§ï¼ç»æå¨æµç¨åææåç°ä»ä»¬åºç¨ä¸­çæ ¸å¿åè®¾å·²ç»ä¸åæç«ãå¥½æ¶æ¯æ¯ï¼Microsoft æä¾äºæç¡®çæå¯¼åæ¨¡å¼ï¼ä½¿å¾æ­£ç¡®æä½æ¶è¿ç§»è¿ç¨å¯é¢æµãæ¬æä»ç»äºä¸ä¸ªå®ç¨çéæ­¥ç­ç¥ï¼å¦ä½å°åºäº.NET Framework æå»ºç ASP.NET MVC 5 åºç¨è¿ç§»å°è¿è¡å¨ç°ä»£.NET ä¸ç ASP.NET Coreï¼åæ¶æå¤§éåº¦å°åå°é£é©ååæºæ¶é´ã</span></li>
<li><strong>æç« å°åï¼</strong><span>&nbsp;https://www.cnblogs.com/powertoolsteam/p/19486260</span></li>
</ul>
<h2 data-tool="mdniceç¼è¾å¨"><span>ä½¿ç¨ MCP C# SDK å®ç° MCP Tool</span></h2>
<ul class="list-paddingleft-1">
<li><strong>æç« ç®ä»ï¼</strong><span>&nbsp;<span>MCPæ¯ç±Anthropicåå»ºçä¸ä¸ªå¼æ¾åè®® ç°å¨æå®æ¹ C# SDK äºï¼å®æ¹ C# SDK ç±åæ¥ç mcpdotnet åå±èæ¥ï¼åºäº Microsoft.Extensions.AI å®ç°ï¼æªæ­¢åæç« çæ¶åï¼2025-4-1ï¼ç®åææ°çæ¬æ¶ 0.1.0-preview 4 äºï¼è¿ä¸çæ¬ä¸­å¢å äº ModelContextProtocol.AspNetCore NuGet åï¼ä½¿å¾å®ç°åºäº ASP.NET Core SSE ç Mcp Server æ´å ç®åäºï¼ä¹åççæ¬ä¸­éè¦å°ç¤ºä¾ä¸­çæ©å±æ·è´å°èªå·±é¡¹ç®ä¸­å»ï¼æäºè¿ä¸ª NuGet åä¹åå°±ä¸éè¦äºï¼McpServer ç®åä¸»è¦çä¸¤ç§å®ç°æ¹å¼æ¯ Stdio(æ åè¾å¥è¾åº) å SSEï¼Server Sent Event)ï¼æ°çè§èéæåºäºåºäº Http çæ¯æï¼ç®åææ¶è¿æªæ¯æ</span></span></li>
<li><strong>æç« å°åï¼</strong><span>&nbsp;https://mp.weixin.qq.com/s/JSIbOo17zcQrcuCLVWN4XQ</span></li>
</ul>
<h2 data-tool="mdniceç¼è¾å¨"><span>ä¸æ¬¾ä¸ä¸º WinUI XAML è®¾è®¡çå¿«éååè®¾è®¡å·¥å·ï¼çæçä»£ç å¯è½»æ¾å¤å¶å°Visual Studioä¸­ï¼</span></h2>
<ul class="list-paddingleft-1">
<li><strong>æç« ç®ä»ï¼</strong><span>&nbsp;XAML Studio æ¯ä¸æ¬¾ä¸ä¸º WinUI XAML è®¾è®¡çå¿«éååè®¾è®¡å·¥å·ï¼åºäº C# å¼æºï¼MIT licenseï¼ï¼çæçä»£ç å¯è½»æ¾å¤å¶å° Visual Studio ä¸­çåºç¨ä¸­ãXAML Studio è®©ä½ å®æ¶é¢è§ XAML ä»£ç ï¼å¹¶ä¸ç»æäºå¨ï¼å°±åå®å¨ä½ èªå·±çåºç¨ä¸­è¿è¡ä¸æ ·ã</span></li>
<li><strong>æç« å°åï¼</strong><span>&nbsp;https://mp.weixin.qq.com/s/Kf_MrpoC-I7UbhmUNLusow</span></li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202601/1336199-20260121223934530-1265321004.png" alt="image" loading="lazy"></p>
<h2 data-tool="mdniceç¼è¾å¨"><span>ä¸ä¸ªè´åäºä¸º C# ç¨åºåæä¾æ´ä½³çç¼ç ä½éªåæçç Visual Studio æ©å±æä»¶</span></h2>
<ul class="list-paddingleft-1">
<li><strong>æç« ç®ä»ï¼</strong><span>&nbsp;Codist æ¯ä¸ä¸ªä½¿ç¨ .NET ç¼åãå¼æºåè´¹ç Visual Studio æ©å±æä»¶ï¼è´åäºä¸º C# ç¨åºåæä¾æ´å¥½çç¼ç¨ä½éªåçäº§æçãå®ä¸ä»å¼ºåäºè¯­æ³é«äº®ãå¿«éä¿¡æ¯æç¤ºãå¯¼èªæ ãæ»å¨æ¡åæ¾ç¤ºè´¨éï¼è¿éæäºèªå¨çæ¬å·æ´æ°ãæ¬å·èªå¨è¡¥å¨ãæ¯æé«çº§ç¼è¾åè½çæºè½å·¥å·æ ãä»£ç åæç­åè½ã</span></li>
<li><strong>æç« å°åï¼</strong><span>&nbsp;https://mp.weixin.qq.com/s/UWuCIY4Q5PJeNClrQWPGEw</span></li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202601/1336199-20260121223949797-1643034810.png" alt="image" loading="lazy"></p>
<h2 data-tool="mdniceç¼è¾å¨"><span>åºäºNetCorePal Cloud FrameworkçDDDæ¶æç®¡çç³»ç»å®è·µ</span></h2>
<ul class="list-paddingleft-1">
<li><strong>æç« ç®ä»ï¼</strong><span>&nbsp;åæ®µæ¶é´å¨åä¸ä¸ªç®¡çç³»ç»çé¡¹ç®ï¼æ³å°è¯ä¸ä¸DDDæ¶æå¨å®éé¡¹ç®ä¸­çåºç¨ãç»è¿ä¸çªè°ç ï¼æç»éæ©äºNetCorePal Cloud Frameworkä½ä¸ºåºç¡æ¡æ¶ï¼ç»å.NET 10åVue 3æ­å»ºäºä¸å¥å®æ´çååç«¯åç¦»æ¶æãä»å¤©å°±æ³åå¤§å®¶åäº«ä¸ä¸è¿ä¸ªé¡¹ç®çæ¶æè®¾è®¡åææ¯éåï¼å¸æè½ç»æ­£å¨åç±»ä¼¼é¡¹ç®çæåä¸äºåèã</span></li>
<li><strong>æç« å°åï¼</strong><span>&nbsp;https://www.cnblogs.com/aishangyipiyema/p/19499381</span></li>
</ul>
<p data-tool="mdniceç¼è¾å¨"><span>æ´ä¸ªé¡¹ç®éç¨äºç»å¸çä¸å±æ¶æï¼è¿ä¸ªç»æåºè¯¥å¾å¤åDDDçæåé½æ¯è¾çæãä¸å±ä¹é´çä¾èµå³ç³»æ¯ååçï¼Webå±ä¾èµInfrastructureå±ï¼Infrastructureå±ä¾èµDomainå±ï¼Domainå±ä½ä¸ºæ ¸å¿ï¼ä¸ä¾èµä»»ä½å¶ä»å±ã</span></p>
<pre data-tool="mdniceç¼è¾å¨"><span data-cacheurl="" data-remoteid="" data-lazy-bgimg="https://mmbiz.qpic.cn/mmbiz_svg/9M0PhLTmTIfuVAHk1VdR5Zy00peKjgKQop1xdzcbwGiazUm1vmFujDDTxuk3JCRRGDP5bg6J2zgkvSQ5oF2ySuOZRRbcmAQDn/640?wx_fmt=svg&amp;from=appmsg" data-fail="0"><code><span>Ncp.Admin<br><span>âââ Domainï¼é¢åå±ï¼<br><span>â &nbsp; âââ AggregatesModelï¼èåæ¨¡åï¼<br><span>â &nbsp; âââ DomainEventsï¼é¢åäºä»¶ï¼<br><span>âââ Infrastructureï¼åºç¡è®¾æ½å±ï¼<br><span>â &nbsp; âââ EntityConfigurationsï¼å®ä½éç½®ï¼<br><span>â &nbsp; âââ Repositoriesï¼ä»å¨å®ç°ï¼<br><span>âââ Webï¼è¡¨ç°å±ï¼<br><span>&nbsp; &nbsp; âââ Applicationï¼åºç¨æå¡å±ï¼<br><span>&nbsp; &nbsp; â &nbsp; âââ Commandsï¼å½ä»¤ï¼<br><span>&nbsp; &nbsp; â &nbsp; âââ Queriesï¼æ¥è¯¢ï¼<br><span>&nbsp; &nbsp; â &nbsp; âââ DomainEventHandlersï¼é¢åäºä»¶å¤çå¨ï¼<br><span>&nbsp; &nbsp; âââ Endpointsï¼APIç«¯ç¹ï¼<br></span></span></span></span></span></span></span></span></span></span></span></span></span></code></span></pre>
<h2 data-tool="mdniceç¼è¾å¨"><span>WPF ä½¿ç¨ <span>HLSL + Clip å®ç°é«äº®æ­è¯åç§ææ</span></span></h2>
<ul class="list-paddingleft-1">
<li><strong>æç« ç®ä»ï¼</strong><span>&nbsp;æè¿å¨æä¸ä¸ªLyricify Liteç±»ä¼¼ç©ï¼åæ¬ä½¿ç¨æ¸åç»å·å®ç°æ­è¯é«äº®ï¼ä½æ¯åç°è§è§ææä¸<span>Apple Musicç¸å»çè¿ï¼åçº¯ä½¿ç¨ç½è²æ¸åç»å·ç¼ºä¹âé«äº®âçåç§æè§ï¼èApple Musicçæ­è¯é«äº®åæ´åæ¯æåçº¿æå°å¨æ­è¯ä¸ï¼å½¢æä¸ç§æåçååææã</span></span></li>
<li><strong>æç« å°åï¼</strong><span>&nbsp;https://www.cnblogs.com/TwilightLemon/p/19497125</span></li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202601/1336199-20260121224009988-596818876.png" alt="image" loading="lazy"></p>
<h2 data-tool="mdniceç¼è¾å¨"><span>åºäº.NETåC<a class="wx_topic_link" data-topic="1">#æå»ºåä¼IoTç©æ¨¡åæ¹æ¡</a></span></h2>
<ul class="list-paddingleft-1">
<li><strong>æç« ç®ä»ï¼</strong><span>&nbsp;æ¬æä¸»è¦ä»ç»åºäº.NETåC<a class="wx_topic_link" data-topic="1">#æå»ºåä¼IoTç©æ¨¡åçæ¹æ¡</a>ã</span></li>
<li><strong>æç« å°åï¼</strong><span>&nbsp;https://www.cnblogs.com/tianqing/p/19490649</span></li>
</ul>
<h2 data-tool="mdniceç¼è¾å¨"><span>ä¸æè·ä¸ªåï¼.NET 10 å¤§æ´æ°è®¡ç®å¯¹éµ Javaï¼ç»æä»¤äººæå¤</span></h2>
<ul class="list-paddingleft-1">
<li><strong>æç« ç®ä»ï¼</strong><span>&nbsp;æå¯¹æ°å¼è®¡ç®çæ§å¿µï¼æ¥èªåä¸­æ¶ä»£çé¾ç¼­ç»çç½å§ãé£æ¶ç©ãä¼å¥ãï¼æè®©æçè¿·çä¸æ¯ææªçè£å¤ï¼èæ¯è§è²é¢æ¿éé£æ¡é¿é¿çç»éªå¼ãççæ°å­ä¸æ­è·³å¨ãç´¯ç§¯ï¼æç»âå®âä¸å£°åçº§ï¼é£ç§ç®åçæ°å¼é©±å¨æ´ä¸ªä¸çè¿è½¬çæè§ï¼å®å¨å¤ªå¥å¦äºã</span></li>
<li><strong>æç« å°åï¼</strong><span>&nbsp;https://www.cnblogs.com/sdcb/p/19484525/20261113-big-integer-dotnet-10-vs-java</span></li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/1336199/202601/1336199-20260121224026142-562470130.png" alt="image" loading="lazy"></p>
<h2 data-tool="mdniceç¼è¾å¨"><span>.NET Aspire æ¦è¿°</span></h2>
<ul class="list-paddingleft-1">
<li><strong>æç« ç®ä»ï¼</strong><span>&nbsp;.NET Aspire æ¯ Microsoft å¨ Build 2024 ä¸æ¨åºçä¸ä¸ªå¼æºæ¡æ¶ï¼æ¨å¨ç®åä½¿ç¨ .NET 8 åæ´é«çæ¬åå»ºåå¸å¼äºåçåºç¨çæµç¨ãå®éè¿æä¾ä¸å¥å·¥å·ãæ¨¡æ¿åæä½³å®è·µï¼è®©å¼åèè½å¤æ´ä¸æ³¨äºä¸å¡é»è¾èéåºç¡è®¾æ½çæ­å»ºãæ¬æå°è¯¦ç»ä»ç» .NET Aspire çæ ¸å¿åè½ãä¼å¿ä»¥åå¦ä½å¿«éä¸æä½¿ç¨è¿ä¸åæ°æ¡æ¶ã</span></li>
<li><strong>æç« å°åï¼</strong><span>&nbsp;https://www.cnblogs.com/powertoolsteam/p/19477015</span></li>
</ul>
<h2 data-tool="mdniceç¼è¾å¨"><span>æ»ç»å½çº³.NET 10 ä¸­ Minimal APIs ä¸»è¦åºç¨åºæ¯</span></h2>
<ul class="list-paddingleft-1">
<li><strong>æç« ç®ä»ï¼</strong><span>&nbsp;æ¬æä¸»è¦æ»ç»å½çº³.NET 10 ä¸­ Minimal APIs ä¸»è¦åºç¨åºæ¯ã</span></li>
<li><strong>æç« å°åï¼</strong><span>&nbsp;https://www.cnblogs.com/tianqing/p/19467531</span></li>
</ul>
<h2 data-tool="mdniceç¼è¾å¨"><span>C# 14 ä¸­çæ°å¢åè½</span></h2>
<ul class="list-paddingleft-1">
<li><strong>æç« ç®ä»ï¼</strong><span>&nbsp;C# 14 å¼å¥äºå¤é¡¹éè¦æ´æ°ï¼ä»¥ä¸æ¯ä¸»è¦åè½çè¯¦ç»è¯´æã</span></li>
<li><strong>æç« å°åï¼</strong><span>&nbsp;https://www.cnblogs.com/net-kevin-li/p/19476883</span></li>
</ul>
<h2 data-tool="mdniceç¼è¾å¨"><span>è·¨è¶ææ¯é¸¿æ²ï¼Aspire èµè½ JavaScript ä¸ Node.js å¼åèçæ·±åº¦çæèå</span></h2>
<ul class="list-paddingleft-1">
<li><strong>æç« ç®ä»ï¼</strong><span>&nbsp;å¨äºåçåºç¨å¼åçæ¼è¿åç¨ä¸­ï¼ææ¯æ çå¼ææ§å§ç»æ¯ä¸ä¸ªæ ¸å¿ç¹å¾ãé¿æä»¥æ¥ï¼ä¼ä¸çº§åºç¨å¼åå¾å¾åç°åºâåæ¨¡ITâçç¹å¾ï¼åç«¯æå¡ä¾èµäº.NET çæç³»ç»çå¼ºç±»åãé«æ§è½åä¼ä¸çº§ç¨³å¥æ§ï¼èåç«¯äº¤äºä¸é¨åå¾®æå¡åå¹¿æ³éç¨ JavaScript/TypeScript çæç³»ç»ççµæ´»æ§ä¸åºå¤§ç¤¾åºèµæºãè¿ç§å¤è¯­è¨ï¼Polyglotï¼æ¶æè½ç¶å¨åè½ä¸äºè¡¥ï¼ä½å¨å¼åè¿ç»´ï¼DevOpsï¼çâåå¾ªç¯ï¼Inner Loopï¼âä¸­å´å¶é äºæ¾èçæ©æ¦ãå¼åèå¸¸å¸¸éè¦å¨ Visual Studio çè°è¯å¨ãå¤æç Docker Compose YAML æä»¶ãæ£ä¹±ç Shell èæ¬ä»¥åæå¨ç»´æ¤ç .env ç¯å¢åéæä»¶ä¹é´é¢ç¹åæ¢ã</span></li>
<li><strong>æç« å°åï¼</strong><span>&nbsp;https://www.cnblogs.com/shanyou/p/19474912</span></li>
</ul>
<h2 data-tool="mdniceç¼è¾å¨"><span>.NET ç£çç®¡ç-ææ¯æ¹æ¡éå</span></h2>
<ul class="list-paddingleft-1">
<li><strong>æç« ç®ä»ï¼</strong><span>&nbsp;å¨å®¶åº­ä»¥åä¼ä¸åºæ¯ä¸çç½ç»ç£çäº§åï¼ä½¿ç¨Iscsiåéè¦å¯¹ç£çè¿è¡ç®¡çãä¸åWindowsçæ¬ãå®è£ç¬¬ä¸æ¹è½¯ä»¶ï¼å¯¼è´æ¯ä¸ªCç«¯ç¨æ·çè¿è¡ç¯å¢ä¸åï¼å¯¹ç£ççç®¡çå¸¦æ¥ä¸å®çä½¿ç¨å¹²æ°ï¼æ¬æä»ç»ä¸ç£çç®¡ççå ç§æ¹æ¡ä»¥åå­å¨çä¸äºé®é¢ã</span></li>
<li><strong>æç« å°åï¼</strong><span>&nbsp;https://www.cnblogs.com/kybs0/p/19473484</span></li>
</ul>
</div>
<div id="MySignature" role="contentinfo">
    <blockquote>
<p style="font-family:YouYuan;font-size: 16px;margin: 0 auto 0.01em auto;"><span style="font-size: 17px; ">ä½èåç§°ï¼</span><a href="https://www.cnblogs.com/Can-daydayup/" target="_blank">è¿½éæ¶åè</a></p>
<p style="font-family:YouYuan;font-size: 16px;margin: 0 auto 0.01em auto;"><span style="font-size: 17px; ">ä½èç®ä»ï¼</span>ä¸ä¸ªç­ç±ç¼ç¨ãåäºåäº«ãåæ¬¢å­¦ä¹ ãæ¢ç´¢ãå°è¯æ°äºç©åæ°ææ¯çå¨æ è½¯ä»¶å·¥ç¨å¸ã</p>
<p style="font-family:YouYuan;font-size: 16px;margin: 0 auto 0.01em auto;">
æ¬æçæå½ä½èååå®¢å­å±æï¼æ¬¢è¿è½¬è½½ï¼ä½æªç»ä½èåæå¿é¡»ä¿çæ­¤æ®µå£°æï¼ä¸å¨æç« é¡µé¢ææ¾ä½ç½®ç»åºåæé¾æ¥ï¼å¦åä¿çè¿½ç©¶æ³å¾è´£ä»»çæå©ãå¦æè¯¥ç¯æç« å¯¹æ¨æå¸®å©çè¯ï¼å¯ä»¥ç¹ä¸ä¸å³ä¸è§ç<a onclick="votePost(cb_entryId,'Digg')" href="javascript:void(0)" style="color:red;">ãâ¥æ¨èâ¥ã</a>ï¼å¸æè½å¤æç»­çä¸ºå¤§å®¶å¸¦æ¥å¥½çææ¯æç« ï¼æä¸­å¯è½å­å¨æè¿°ä¸æ­£ç¡®çå°æ¹ï¼æ¬¢è¿ææ­£æè¡¥åï¼ä¸èææ¿ã
</p>
</blockquote>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-21 22:41">2026-01-21 22:41</span>&nbsp;
<a href="https://www.cnblogs.com/Can-daydayup">è¿½éæ¶åè</a>&nbsp;
éè¯»(<span id="post_view_count">165</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19514257);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19514257', targetLink: 'https://www.cnblogs.com/Can-daydayup/p/19514257', title: 'C#/.NET/.NET Coreææ¯åæ²¿å¨å | ç¬¬ 66 æï¼2026å¹´1.12-1.18ï¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ä¸ä¸ªå°æå·§è½»æ¾æåDashåºç¨debugæç ]]></title>
    <link>https://www.cnblogs.com/feffery/p/19513359</link>
    <guid>aa07d9423259730de983c7bc586a2fc4</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/feffery/p/19513359" title="åå¸äº 2026-01-21 17:53">
    <span role="heading" aria-level="2">ä¸ä¸ªå°æå·§è½»æ¾æåDashåºç¨debugæç</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<center style="font-size: 18px; font-weight: bold; padding-top: 40px">æ´å¤Dashåºç¨å¼åå¹²è´§ç¥è¯ãæ¡ä¾ï¼æ¬¢è¿å³æ³¨âç©è½¬Dashâå¾®ä¿¡å¬ä¼å·ð</center>
<p><img src="https://img2024.cnblogs.com/blog/1344061/202507/1344061-20250703190053776-1837084116.png" alt="image" loading="lazy"></p>
<h1 id="1-ç®ä»">1 ç®ä»</h1>
<p>å¤§å®¶å¥½ææ¯è´¹èå¸ã<code>Dash</code>ä½ä¸ºåºäº<code>Python</code>è¿è¡<em>å¨æ åºç¨å¼å</em>çæµè¡æ¡æ¶ï¼å·æå¼ºå¤§ç<em>å¯ä¼¸ç¼©æ§</em>ââè¿æå³çå¨åä¸å¥åºäº<strong>ç»ä»¶+åè°å½æ°</strong>çä»£ç ç»ç»æ¹å¼ä¸ï¼ä½¿ç¨<code>Dash</code>å¯ä»¥è½»æ¾è¦çä»å°åç®ååºç¨ï¼å°å¤§åå¤æåºç¨ï¼åç§å¤æç¨åº¦çåºç¨å¼åä»»å¡ãè¿ä¹æ¯<code>Dash</code>å¨ä¸çèå´åï¼è¢«ä¼å¤çå¤§å¬å¸ç¨äºæç»­å¼å<em>ä¼ä¸çº§</em>æ°æ®åºç¨çåå ä¹ä¸ã</p>
<center><img src="https://img2024.cnblogs.com/blog/1344061/202509/1344061-20250910154430584-1965899431.png" width="50%"></center>
<p>èéçæå¼åç<code>Dash</code>åºç¨åè½æ¥çå¢é¿ï¼æä»¬åéè¦å­¦ä¹ å¦ä½å¨åºç¨å¼åè¿ç¨ä¸­ï¼æ´<strong>é«æåç¡®</strong>ç<em>è°è¯åºç¨åè½é»è¾</em>ï¼<em>å®ä½å¼å¸¸é®é¢æå¨</em>ã</p>
<p>ä»å¤©çæç« ä¸­ï¼æä»¬å°±æ¥ä¸èµ·å­¦ä¹ æ°çæ¬<code>Dash</code>ï¼&gt;=3.4.0çæ¬ï¼ä¸­å¢å çä¸äºåè½ç¹æ§ï¼å¸®å©æä»¬æ´ç²¾åå¿«éçå®ä½å¸¸è§åè°å½æ°å¼åé®é¢ã</p>
<h1 id="2-å¨åè°å¾ä¸­ç¨hiddenåhide_all_callbacksåæ°èç¦åè°å½æ°">2 å¨åè°å¾ä¸­ç¨hiddenåhide_all_callbacksåæ°èç¦åè°å½æ°</h1>
<p>è½ç¶æä¹åå¨<em>å¬ä¼å·</em>ã<em>ç©è½¬Dashç¥è¯æç</em>ç­å¹³å°åå¸çæç« åè¯¾ç¨ä¸­ï¼å¹¶æ²¡æä¸é¨åè¿ä»ç»ï¼ä½å¾å¤åå­¦åºè¯¥å¯¹ç±»ä¼¼ä¸é¢ççé¢æå°è±¡ï¼æä»¬å¨<code>Dash</code>åºç¨å¼åé¶æ®µï¼ä¸º<code>app.run()</code>è®¾ç½®<code>debug=True</code>å¼å¯<em>å¼åè°è¯æ¨¡å¼</em>åï¼éè¿ç¹å»å³ä¸è§å¼åæ¨¡å¼å·¥å·æ¡ä¸­ç<strong>Callbacks</strong>æé®ï¼å¯ä»¥å±å¼ä¸å¥å¯äº¤äºç<strong>æåå¾</strong>ï¼æä»¬å¯ä»¥å°å¶ç§°ä½<strong>åè°å¾</strong>ã</p>
<center><img src="https://img2024.cnblogs.com/blog/1344061/202601/1344061-20260121175038215-1907019957.png"></center>
<p>é»è®¤æåµä¸ï¼å®è®°å½å¹¶åç°å½å<code>Dash</code>åºç¨ä¸­å¨é¨çåè°å½æ°ç¼æå³ç³»ï¼è¿å¯¹äº<strong>å°å</strong>ç<code>Dash</code>åºç¨å¾ç´è§æäºï¼å ä¸ºå¾ä¸­ç<em>èç¹</em>å<em>è¾¹</em>æ¯è¾å°ãä½æ¯å¯¹äºé¡µé¢ä¼å¤ãåè½é»è¾ä¼å¤çä¸­å¤§å<code>Dash</code>åºç¨æ¥è¯´ï¼å½ä½ æå¼åè°å¾æ¶ï¼çå°çå¯è½æ¯ä¸é¢è¿æ ·åºå¤§å¤æçæ¯è±¡ï¼</p>
<center><img src="https://img2024.cnblogs.com/blog/1344061/202601/1344061-20260121175040979-568062826.png"></center>
<p>ðè¿ç§æåµä¸æä»¬å¤§æ¦çä¼å½åä»ä¹é½æ²¡çè§ï¼é»é»çå³é­åè°å¾é¢æ¿ããã</p>
<center><img src="https://img2024.cnblogs.com/blog/1344061/202601/1344061-20260121175055369-1439370721.jpg"></center>
<p>é£ä¹ææ²¡æåæ³å¨è¿ä¸ª<em>åè°å¾</em>ä¸­é»è®¤<em>ä¸å±ç¤ºå¨é¨</em>ç<em>åè°å³ç³»</em>ï¼åªéå¯¹ç®åå³æ³¨çé¨ååè°å½æ°è¿è¡å±ç¤ºå¢ï¼</p>
<p>æçåå¼ï¼æçï¼é¦åæä»¬ç´æ¥å°<code>Dash</code>åçº§å°<code>&gt;=3.4.0</code>çæ¬ï¼</p>
<pre><code class="language-bash">pip install dash -U
</code></pre>
<p>ä»¥å®ç°âæ¼æ¥ä¸¤ä¸ªè¾å¥æ¡åå®¹âçç®ååºç¨åè½ä¸ºä¾ï¼</p>
<pre><code class="language-python">import dash
from dash import html
import feffery_antd_components as fac
from dash.dependencies import Input, Output
from feffery_dash_utils.style_utils import style

app = dash.Dash(__name__, suppress_callback_exceptions=True)

app.layout = html.Div(
    [
        fac.AntdSpace(
            [
                fac.AntdInput(id="input1", placeholder="è¯·è¾å¥åå®¹"),
                fac.AntdInput(id="input2", placeholder="è¯·è¾å¥åå®¹"),
                fac.AntdText(id="output-texxt"),
            ]
        )
    ],
    style=style(padding=50),
)

@app.callback(
    Output("output-text", "children"),
    Input("input1", "value"),
    Input("input2", "value"),
)
def combine_inputs(input1, input2):
    """æ¼æ¥è¾å¥çåå®¹"""
    return "æ¼æ¥ç»æï¼" + (input1 or "") + (input2 or "")

if __name__ == "__main__":
    app.run(debug=True)
</code></pre>
<p>å¨ä¸é¢çç¤ºä¾ä»£ç ä¸­ï¼æä»¬<strong>âä¸å°å¿â</strong>å°æç¨äº<em>æ¾ç¤ºæ¼æ¥åå®¹ç»æ</em>çç»ä»¶<code>id</code>åæ°åæäº<code>output-texxt</code>ð¤¯ï¼è¿ä¹æ¯æ¯è¾å¸¸è§çå¯¼è´åè°å½æ°ä¸çæçåå ä¹ä¸ï¼</p>
<center><img src="https://img2024.cnblogs.com/blog/1344061/202601/1344061-20260121175057590-225038268.png"></center>
<p>è¿ç§æåµä¸ï¼å½æä»¬å¨æµè§å¨ä¸­åç°ç¸å³åè½æ²¡æå¦æè¿ä½æ¶ï¼</p>
<center><img src="https://img2024.cnblogs.com/blog/1344061/202601/1344061-20260121175059670-668077126.gif"></center>
<p>å°±å¯ä»¥<strong>ä¼åèè</strong>éè¿<em>åè°å¾</em>æ¥çå¯¹åºåè°å½æ°çæ§è¡æåµï¼å¯ä»¥çå°è½ç¶æä»¬å¨ç¸å³è¾å¥æ¡éè¾å¥äºä¸äºåå®¹ï¼ä½å¯¹åºçåè°å½æ°ä¸æ¬¡é½æ²¡æ§è¡ï¼<code>count 0</code>ï¼ï¼</p>
<center><img src="https://img2024.cnblogs.com/blog/1344061/202601/1344061-20260121175104165-1673715625.gif"></center>
<p>è¿ç§æåµä¸ï¼æä»¬<strong>é¦å</strong>å°±å¯ä»¥æ³å°æ¯ä¸æ¯å¯¹åºåè°å½æ°ä¸­æ<code>Output</code>è§è²ç<code>id</code>ï¼ä¸å¯¹åºç»ä»¶å®ä¹ç<code>id</code>åæ°ä¸ä¸æ ·ï¼ç»è¿ä¿®æ­£ï¼åè½æ­£ç¡®è¿ä½çæåµä¸ï¼å¨åè°å¾ç»æä¸­å°±å¯ä»¥çå°è¯¥åè°å½æ°<em>æ§è¡äºå¤å°æ¬¡</em>ã<em>æ§è¡èæ¶</em>ç­æç¨çä¿¡æ¯ï¼</p>
<center><img src="https://img2024.cnblogs.com/blog/1344061/202601/1344061-20260121175106405-386111932.gif"></center>
<p>æ­¤æ¶ï¼æä»¬åèæ³å°ä¸æä¸­å±ç¤ºè¿çï¼å¯¹åºä¸­å¤§å<code>Dash</code>åºç¨ç<strong>éå¸¸åºæ</strong>çåè°å¾ï¼åå¦ä¸é¢è¿ä¸ªåè°å½æ°<code>debug</code>çåºæ¯åºç°å¨ç±»ä¼¼è§æ¨¡çåºç¨ä¸­ï¼æä»¬å°±å¯ä»¥åºäº<code>Dash&gt;=3.4.0</code>çæ¬ï¼é¦åå¨<code>app.run()</code>ä¸­è®¾ç½®<code>hide_all_callbacks=True</code>ï¼è¿å°å¨åè°å¾ä¸­å¼ºå¶éèææçåè°å½æ°ï¼</p>
<center><img src="https://img2024.cnblogs.com/blog/1344061/202601/1344061-20260121175111240-318613727.png"></center>
<p>ç¶ååä¸ºå¯¹åºçåè°å½æ°<code>callback()</code>ä¸­è®¾ç½®<code>hidden=False</code>ï¼</p>
<center><img src="https://img2024.cnblogs.com/blog/1344061/202601/1344061-20260121175113131-149325016.png"></center>
<p>è¿å°ä»¥<em>æ´é«çä¼åçº§</em>ï¼å¨åè°å¾ä¸­<strong>å¼ºå¶å±ç¤º</strong>å½ååè°å½æ°å³ç³»ï¼è¿æ ·æ è®ºæ¯åå¤æç<code>Dash</code>åºç¨ï¼æä»¬é½å¯ä»¥å¨<em>åè°å¾</em>ä¸­åª<strong>èç¦</strong>äºæä»¬å³æ³¨çé£äºåè°å½æ°ï¼å¤§å¹åº¦æååºç¨åè½è°è¯æçðï¼</p>
<center><img src="https://img2024.cnblogs.com/blog/1344061/202601/1344061-20260121175114783-1832623334.png"></center>
<p>å¤§å®¶å¯ä»¥å¨æ¥å¸¸å¼å<code>Dash</code>åºç¨çè¿ç¨ä¸­ï¼å¤å¤å©ç¨ä»å¤©ä»ç»çæå·§ï¼å¼ååºæ´ç¨³å¥çåºç¨ðª~</p>
<hr>
<p>æ´å¤æå³<code>Dash</code>åºç¨å¼åçå¹²è´§åå®¹ï¼æ¬¢è¿æç»­å³æ³¨æä»¬â¤ï¸</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.001388888888888889" data-date-updated="2026-01-21 17:55">2026-01-21 17:53</span>&nbsp;
<a href="https://www.cnblogs.com/feffery">è´¹å¼é</a>&nbsp;
éè¯»(<span id="post_view_count">61</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19513359);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19513359', targetLink: 'https://www.cnblogs.com/feffery/p/19513359', title: 'ä¸ä¸ªå°æå·§è½»æ¾æåDashåºç¨debugæç' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ SpringBooté¡¹ç®çå½éåæµç¨ ]]></title>
    <link>https://www.cnblogs.com/Marktowin/p/19511993</link>
    <guid>057b38702fd2ec4bc3033ef0adb23573</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Marktowin/p/19511993" title="åå¸äº 2026-01-21 15:15">
    <span role="heading" aria-level="2">SpringBooté¡¹ç®çå½éåæµç¨</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p dir="auto">å¨ Spring Boot é¡¹ç®å·²ç»å¼åå®æåï¼æ³è¦å®ç°å½éåï¼i18nï¼ï¼è®©æææç¤ºä¿¡æ¯ï¼åç«¯è¿åçéè¯¯æ¶æ¯ãæåæ¶æ¯ãå¼å¸¸ä¿¡æ¯ãæä¸¾æè¿°ç­ï¼æ¯æå¤è¯­è¨ï¼å¤çæµç¨å¦ä¸ï¼</p>
<h3 dir="auto">1. åå»ºå½éåèµæºæä»¶ï¼messages.propertiesï¼</h3>
<p dir="auto">å¨ src/main/resources ç®å½ä¸ï¼æ°å»º i18n å­ç®å½ï¼ï¼åå»ºä»¥ä¸æä»¶ï¼</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)">1</span> src/main/resources/
<span style="color: rgba(0, 128, 128, 1)">2</span> âââ i18n/
<span style="color: rgba(0, 128, 128, 1)">3</span> <span style="color: rgba(0, 0, 0, 1)">    âââ messages.properties           # é»è®¤è¯­è¨ï¼éå¸¸æ¯ä¸­ææè±æï¼
</span><span style="color: rgba(0, 128, 128, 1)">4</span> <span style="color: rgba(0, 0, 0, 1)">    âââ messages_zh_CN.properties     # ç®ä½ä¸­æ
</span><span style="color: rgba(0, 128, 128, 1)">5</span> <span style="color: rgba(0, 0, 0, 1)">    âââ messages_en_US.properties     # ç¾å¼è±æ
</span><span style="color: rgba(0, 128, 128, 1)">6</span> <span style="color: rgba(0, 0, 0, 1)">    âââ messages_zh_TW.properties     # ç¹ä½ä¸­æï¼å¯éï¼
</span><span style="color: rgba(0, 128, 128, 1)">7</span>     âââ messages_ja.properties        # æ¥è¯­ï¼å¯éï¼</pre>
</div>
<p dir="auto">messages.propertiesï¼ä¸­æç¤ºä¾ï¼ï¼</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)">1</span> <span style="color: rgba(0, 0, 0, 1)"># éç¨æç¤º
</span><span style="color: rgba(0, 128, 128, 1)">2</span> success=<span style="color: rgba(0, 0, 0, 1)">æä½æå
</span><span style="color: rgba(0, 128, 128, 1)">3</span> error.system=<span style="color: rgba(0, 0, 0, 1)">ç³»ç»å¼å¸¸ï¼è¯·ç¨åéè¯
</span><span style="color: rgba(0, 128, 128, 1)">4</span> error.notfound=<span style="color: rgba(0, 0, 0, 1)">èµæºä¸å­å¨
</span><span style="color: rgba(0, 128, 128, 1)">5</span> 
<span style="color: rgba(0, 128, 128, 1)">6</span> <span style="color: rgba(0, 0, 0, 1)"># ä¸å¡æç¤º
</span><span style="color: rgba(0, 128, 128, 1)">7</span> user.login.success=<span style="color: rgba(0, 0, 0, 1)">ç»å½æå
</span><span style="color: rgba(0, 128, 128, 1)">8</span> user.login.fail=<span style="color: rgba(0, 0, 0, 1)">ç¨æ·åæå¯ç éè¯¯
</span><span style="color: rgba(0, 128, 128, 1)">9</span> user.notfound=ç¨æ·ä¸å­å¨</pre>
</div>
<p dir="auto">messages_en_US.propertiesï¼è±æç¤ºä¾ï¼ï¼</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)">1</span> success=<span style="color: rgba(0, 0, 0, 1)">Operation successful
</span><span style="color: rgba(0, 128, 128, 1)">2</span> error.system=System error, please <span style="color: rgba(0, 0, 255, 1)">try</span><span style="color: rgba(0, 0, 0, 1)"> again later
</span><span style="color: rgba(0, 128, 128, 1)">3</span> error.notfound=<span style="color: rgba(0, 0, 0, 1)">Resource not found
</span><span style="color: rgba(0, 128, 128, 1)">4</span> 
<span style="color: rgba(0, 128, 128, 1)">5</span> user.login.success=<span style="color: rgba(0, 0, 0, 1)">Login successful
</span><span style="color: rgba(0, 128, 128, 1)">6</span> user.login.fail=<span style="color: rgba(0, 0, 0, 1)">Username or password is incorrect
</span><span style="color: rgba(0, 128, 128, 1)">7</span> user.notfound=User not found</pre>
</div>
<p dir="auto"><strong>æ³¨æ</strong>ï¼</p>
<ul dir="auto">
<li>æä»¶åå¿é¡»ä»¥ messages å¼å¤´ï¼Spring Boot é»è®¤æ¥æ¾è§åï¼ã</li>
<li>æææç¤ºç»ä¸æ¾å¨ i18n ç®å½ä¸ï¼æ¹ä¾¿ç®¡çã</li>
</ul>
<h3 dir="auto">2. éç½® application.ymlï¼æ application.propertiesï¼</h3>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)">1</span> <span style="color: rgba(0, 0, 0, 1)"># application.yml
</span><span style="color: rgba(0, 128, 128, 1)">2</span> <span style="color: rgba(0, 0, 0, 1)">spring:
</span><span style="color: rgba(0, 128, 128, 1)">3</span> <span style="color: rgba(0, 0, 0, 1)">  messages:
</span><span style="color: rgba(0, 128, 128, 1)">4</span>     basename: i18n/<span style="color: rgba(0, 0, 0, 1)">messages          # èµæºæä»¶åºç¡åï¼æ¯æééç¬¦ï¼
</span><span style="color: rgba(0, 128, 128, 1)">5</span>     encoding: UTF-8                 # å¿é¡»æ¯ UTF-8
<span style="color: rgba(0, 128, 128, 1)">6</span>     fallback-to-system-locale: <span style="color: rgba(0, 0, 255, 1)">false</span> # æ¨èè®¾ç½®ä¸º <span style="color: rgba(0, 0, 255, 1)">false</span><span style="color: rgba(0, 0, 0, 1)">ï¼æ¾ä¸å°å¯¹åºè¯­è¨æ¶ä¸åéå°ç³»ç»é»è®¤Localeï¼
</span><span style="color: rgba(0, 128, 128, 1)">7</span>     use-code-as-<span style="color: rgba(0, 0, 255, 1)">default</span>-message: <span style="color: rgba(0, 0, 255, 1)">true</span> # æ¾ä¸å°keyæ¶ç´æ¥è¿åcodeï¼è°è¯æ¹ä¾¿ï¼ä¸çº¿å¯æ¹ä¸ºfalseï¼</pre>
</div>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)">1</span> <span style="color: rgba(0, 0, 0, 1)">#  properties
</span><span style="color: rgba(0, 128, 128, 1)">2</span> spring.messages.basename=i18n/<span style="color: rgba(0, 0, 0, 1)">messages
</span><span style="color: rgba(0, 128, 128, 1)">3</span> spring.messages.encoding=UTF-8
<span style="color: rgba(0, 128, 128, 1)">4</span> spring.messages.fallback-to-system-locale=<span style="color: rgba(0, 0, 255, 1)">false</span>
<span style="color: rgba(0, 128, 128, 1)">5</span> spring.messages.use-code-as-<span style="color: rgba(0, 0, 255, 1)">default</span>-message=<span style="color: rgba(0, 0, 255, 1)">true</span></pre>
</div>
<h3 dir="auto">3. èªå®ä¹ LocaleResolver å LocaleChangeInterceptorï¼æ¯æåç«¯ä¼ ååæ¢è¯­è¨ï¼</h3>
<p dir="auto">Spring Boot é»è®¤ä½¿ç¨ <strong>AcceptHeaderLocaleResolver</strong>ï¼æ ¹æ®è¯·æ±å¤´ Accept-Language èªå¨è¯å«ï¼ï¼çäº§ç¯å¢éå¸¸è¿éè¦æ¯æéè¿åæ°æ cookie åæ¢è¯­è¨ã</p>
<p dir="auto">ä½¿ç¨ SessionLocaleResolver + LocaleChangeInterceptorï¼</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)"> 1</span> <span style="color: rgba(0, 0, 0, 1)">@Configuration
</span><span style="color: rgba(0, 128, 128, 1)"> 2</span> <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span> LocaleConfig <span style="color: rgba(0, 0, 255, 1)">implements</span><span style="color: rgba(0, 0, 0, 1)"> WebMvcConfigurer {
</span><span style="color: rgba(0, 128, 128, 1)"> 3</span> 
<span style="color: rgba(0, 128, 128, 1)"> 4</span>     <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> é»è®¤è¯­è¨</span>
<span style="color: rgba(0, 128, 128, 1)"> 5</span> <span style="color: rgba(0, 0, 0, 1)">    @Bean
</span><span style="color: rgba(0, 128, 128, 1)"> 6</span>     <span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> LocaleResolver localeResolver() {
</span><span style="color: rgba(0, 128, 128, 1)"> 7</span>         SessionLocaleResolver localeResolver = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> SessionLocaleResolver();
</span><span style="color: rgba(0, 128, 128, 1)"> 8</span>         localeResolver.setDefaultLocale(Locale.SIMPLIFIED_CHINESE); <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> é»è®¤ç®ä½ä¸­æ</span>
<span style="color: rgba(0, 128, 128, 1)"> 9</span>         <span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> localeResolver;
</span><span style="color: rgba(0, 128, 128, 1)">10</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">11</span> 
<span style="color: rgba(0, 128, 128, 1)">12</span>     <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æ¦æªå¨ï¼æ¯æ ?lang=zh_CN æ ?lang=en_US åæ¢è¯­è¨</span>
<span style="color: rgba(0, 128, 128, 1)">13</span> <span style="color: rgba(0, 0, 0, 1)">    @Bean
</span><span style="color: rgba(0, 128, 128, 1)">14</span>     <span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> LocaleChangeInterceptor localeChangeInterceptor() {
</span><span style="color: rgba(0, 128, 128, 1)">15</span>         LocaleChangeInterceptor lci = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> LocaleChangeInterceptor();
</span><span style="color: rgba(0, 128, 128, 1)">16</span>         lci.setParamName("lang"); <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> åç«¯ä¼ åå</span>
<span style="color: rgba(0, 128, 128, 1)">17</span>         <span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> lci;
</span><span style="color: rgba(0, 128, 128, 1)">18</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">19</span> 
<span style="color: rgba(0, 128, 128, 1)">20</span> <span style="color: rgba(0, 0, 0, 1)">    @Override
</span><span style="color: rgba(0, 128, 128, 1)">21</span>     <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">void</span><span style="color: rgba(0, 0, 0, 1)"> addInterceptors(InterceptorRegistry registry) {
</span><span style="color: rgba(0, 128, 128, 1)">22</span> <span style="color: rgba(0, 0, 0, 1)">        registry.addInterceptor(localeChangeInterceptor());
</span><span style="color: rgba(0, 128, 128, 1)">23</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">24</span> }</pre>
</div>
<p dir="auto">è¥ä¼åä»è¯·æ±å¤´è¯å«ï¼åæ¯æåæ°åæ¢ï¼å¯ä»¥èªå®ä¹ LocaleResolverï¼æ´çµæ´»ï¼ã</p>
<h3 dir="auto">4. å¨ä»£ç ä¸­ä½¿ç¨ MessageSource è·åå½éåæ¶æ¯</h3>
<h4 dir="auto">æ¹å¼ä¸ï¼æ³¨å¥ MessageSource</h4>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)"> 1</span> <span style="color: rgba(0, 0, 0, 1)">@RestController
</span><span style="color: rgba(0, 128, 128, 1)"> 2</span> @RequestMapping("/api"<span style="color: rgba(0, 0, 0, 1)">)
</span><span style="color: rgba(0, 128, 128, 1)"> 3</span> <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> UserController {
</span><span style="color: rgba(0, 128, 128, 1)"> 4</span> 
<span style="color: rgba(0, 128, 128, 1)"> 5</span> <span style="color: rgba(0, 0, 0, 1)">    @Autowired
</span><span style="color: rgba(0, 128, 128, 1)"> 6</span>     <span style="color: rgba(0, 0, 255, 1)">private</span><span style="color: rgba(0, 0, 0, 1)"> MessageSource messageSource;
</span><span style="color: rgba(0, 128, 128, 1)"> 7</span> 
<span style="color: rgba(0, 128, 128, 1)"> 8</span>     @GetMapping("/test"<span style="color: rgba(0, 0, 0, 1)">)
</span><span style="color: rgba(0, 128, 128, 1)"> 9</span>     <span style="color: rgba(0, 0, 255, 1)">public</span> ResponseEntity&lt;String&gt; test(Locale locale) { <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Locale å¯éä»åæ°æ³¨å¥
</span><span style="color: rgba(0, 128, 128, 1)">10</span>         <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æ¹å¼1ï¼ç´æ¥ä½¿ç¨ locale åæ°</span>
<span style="color: rgba(0, 128, 128, 1)">11</span>         String msg = messageSource.getMessage("user.login.success", <span style="color: rgba(0, 0, 255, 1)">null</span><span style="color: rgba(0, 0, 0, 1)">, locale);
</span><span style="color: rgba(0, 128, 128, 1)">12</span> 
<span style="color: rgba(0, 128, 128, 1)">13</span>         <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æ¹å¼2ï¼ä» LocaleContextHolder è·åå½åè¯­è¨ï¼æ¨èï¼ï¼</span>
<span style="color: rgba(0, 128, 128, 1)">14</span>         String msg2 = messageSource.getMessage("user.login.success", <span style="color: rgba(0, 0, 255, 1)">null</span><span style="color: rgba(0, 0, 0, 1)">, LocaleContextHolder.getLocale());
</span><span style="color: rgba(0, 128, 128, 1)">15</span> 
<span style="color: rgba(0, 128, 128, 1)">16</span>         <span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> ResponseEntity.ok(msg2);
</span><span style="color: rgba(0, 128, 128, 1)">17</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">18</span> }</pre>
</div>
<h4 dir="auto">æ¹å¼äºï¼ç»ä¸å°è£å·¥å·ç±»</h4>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)"> 1</span> <span style="color: rgba(0, 0, 0, 1)">@Component
</span><span style="color: rgba(0, 128, 128, 1)"> 2</span> <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> MessageUtils {
</span><span style="color: rgba(0, 128, 128, 1)"> 3</span> 
<span style="color: rgba(0, 128, 128, 1)"> 4</span>     <span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">static</span><span style="color: rgba(0, 0, 0, 1)"> MessageSource messageSource;
</span><span style="color: rgba(0, 128, 128, 1)"> 5</span> 
<span style="color: rgba(0, 128, 128, 1)"> 6</span> <span style="color: rgba(0, 0, 0, 1)">    @Autowired
</span><span style="color: rgba(0, 128, 128, 1)"> 7</span>     <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">void</span><span style="color: rgba(0, 0, 0, 1)"> setMessageSource(MessageSource messageSource) {
</span><span style="color: rgba(0, 128, 128, 1)"> 8</span>         MessageUtils.messageSource =<span style="color: rgba(0, 0, 0, 1)"> messageSource;
</span><span style="color: rgba(0, 128, 128, 1)"> 9</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">10</span> 
<span style="color: rgba(0, 128, 128, 1)">11</span>     <span style="color: rgba(0, 128, 0, 1)">/**</span>
<span style="color: rgba(0, 128, 128, 1)">12</span> <span style="color: rgba(0, 128, 0, 1)">     * è·åå½éåæ¶æ¯
</span><span style="color: rgba(0, 128, 128, 1)">13</span>      <span style="color: rgba(0, 128, 0, 1)">*/</span>
<span style="color: rgba(0, 128, 128, 1)">14</span>     <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">static</span><span style="color: rgba(0, 0, 0, 1)"> String getMessage(String code, Object... args) {
</span><span style="color: rgba(0, 128, 128, 1)">15</span>         <span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> messageSource.getMessage(code, args, LocaleContextHolder.getLocale());
</span><span style="color: rgba(0, 128, 128, 1)">16</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">17</span> 
<span style="color: rgba(0, 128, 128, 1)">18</span>     <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">static</span><span style="color: rgba(0, 0, 0, 1)"> String getMessage(String code) {
</span><span style="color: rgba(0, 128, 128, 1)">19</span>         <span style="color: rgba(0, 0, 255, 1)">return</span> getMessage(code, (Object) <span style="color: rgba(0, 0, 255, 1)">null</span><span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">20</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">21</span> }</pre>
</div>
<p dir="auto">ä½¿ç¨æ¹å¼ï¼</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)">1</span> <span style="color: rgba(0, 0, 255, 1)">throw</span> <span style="color: rgba(0, 0, 255, 1)">new</span> BusinessException(MessageUtils.getMessage("user.notfound"<span style="color: rgba(0, 0, 0, 1)">));
</span><span style="color: rgba(0, 128, 128, 1)">2</span> <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> æ</span>
<span style="color: rgba(0, 128, 128, 1)">3</span> <span style="color: rgba(0, 0, 255, 1)">return</span> Result.error(MessageUtils.getMessage("error.system"));</pre>
</div>
<h3 dir="auto">5. å¨å±å¼å¸¸å¤çä¸­ä½¿ç¨å½éå</h3>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)"> 1</span> <span style="color: rgba(0, 0, 0, 1)">@RestControllerAdvice
</span><span style="color: rgba(0, 128, 128, 1)"> 2</span> <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> GlobalExceptionHandler {
</span><span style="color: rgba(0, 128, 128, 1)"> 3</span> 
<span style="color: rgba(0, 128, 128, 1)"> 4</span>     @ExceptionHandler(BusinessException.<span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)">)
</span><span style="color: rgba(0, 128, 128, 1)"> 5</span>     <span style="color: rgba(0, 0, 255, 1)">public</span> Result&lt;?&gt;<span style="color: rgba(0, 0, 0, 1)"> handleBusinessException(BusinessException e) {
</span><span style="color: rgba(0, 128, 128, 1)"> 6</span>         <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> åè®¾ BusinessException éé¢å­äº messageCode</span>
<span style="color: rgba(0, 128, 128, 1)"> 7</span>         String message =<span style="color: rgba(0, 0, 0, 1)"> MessageUtils.getMessage(e.getCode(), e.getArgs());
</span><span style="color: rgba(0, 128, 128, 1)"> 8</span>         <span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> Result.error(message);
</span><span style="color: rgba(0, 128, 128, 1)"> 9</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">10</span> 
<span style="color: rgba(0, 128, 128, 1)">11</span>     @ExceptionHandler(Exception.<span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)">)
</span><span style="color: rgba(0, 128, 128, 1)">12</span>     <span style="color: rgba(0, 0, 255, 1)">public</span> Result&lt;?&gt;<span style="color: rgba(0, 0, 0, 1)"> handleException(Exception e) {
</span><span style="color: rgba(0, 128, 128, 1)">13</span>         <span style="color: rgba(0, 0, 255, 1)">return</span> Result.error(MessageUtils.getMessage("error.system"<span style="color: rgba(0, 0, 0, 1)">));
</span><span style="color: rgba(0, 128, 128, 1)">14</span> <span style="color: rgba(0, 0, 0, 1)">    }
</span><span style="color: rgba(0, 128, 128, 1)">15</span> }</pre>
</div>
<h3 dir="auto">6. æ¯æåæ°å ä½ç¬¦</h3>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)">1</span> <span style="color: rgba(0, 0, 0, 1)"># messages.properties
</span><span style="color: rgba(0, 128, 128, 1)">2</span> user.age.limit=å¹´é¾å¿é¡»å¨ {0} å° {1} å²ä¹é´</pre>
</div>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)">1</span> String msg = MessageUtils.getMessage("user.age.limit", 18, 60<span style="color: rgba(0, 0, 0, 1)">);
</span><span style="color: rgba(0, 128, 128, 1)">2</span> <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> è¾åºï¼å¹´é¾å¿é¡»å¨ 18 å° 60 å²ä¹é´</span></pre>
</div>
<h3 dir="auto">7. å¸¸è§æä½³å®è·µæ»ç»</h3>
<table style="height: 317px; width: 579px">
<thead>
<tr><th data-col-size="sm">å¤çç¹</th><th data-col-size="lg">å¤çæ¹å¼</th></tr>
</thead>
<tbody>
<tr>
<td data-col-size="sm">èµæºæä»¶ä½ç½®</td>
<td data-col-size="lg"><code>src/main/resources/i18n/messages_*.properties</code></td>
</tr>
<tr>
<td data-col-size="sm">é»è®¤è¯­è¨</td>
<td data-col-size="lg">ç®ä½ä¸­æï¼<code>Locale.SIMPLIFIED_CHINESE</code>ï¼</td>
</tr>
<tr>
<td data-col-size="sm">è¯­è¨åæ¢æ¹å¼</td>
<td data-col-size="lg">è¯·æ±å¤´ <code>Accept-Language</code> + <code>?lang=zh_CN</code></td>
</tr>
<tr>
<td data-col-size="sm">æ¶æ¯è·åæ¹å¼</td>
<td data-col-size="lg">ä¼åä½¿ç¨ <code>LocaleContextHolder.getLocale()</code></td>
</tr>
<tr>
<td data-col-size="sm">å·¥å·ç±»</td>
<td data-col-size="lg">å°è£ <code>MessageUtils</code> ç»ä¸è·å</td>
</tr>
<tr>
<td data-col-size="sm">å¼å¸¸æ¶æ¯</td>
<td data-col-size="lg">å¨é¨ä½¿ç¨ code + MessageUtils è·å</td>
</tr>
<tr>
<td data-col-size="sm">æ¾ä¸å°key</td>
<td data-col-size="lg">å»ºè®® <code>use-code-as-default-message=false</code></td>
</tr>
<tr>
<td data-col-size="sm">ç¼ç </td>
<td data-col-size="lg">å¿é¡» <code>UTF-8</code></td>
</tr>
</tbody>
</table>
<p dir="auto">&nbsp;</p>
<h3 dir="auto">8. æµè¯æ¹æ³</h3>
<ul dir="auto">
<li>æµè§å¨å¼åèå·¥å· â Network â ä¿®æ¹è¯·æ±å¤´ Accept-Language: en-US,en;q=0.9</li>
<li>æç´æ¥å¨ URL åå  ?lang=en_US</li>
</ul>
<p dir="auto">å®æä»¥ä¸æ­¥éª¤ï¼ä½ ç Spring Boot é¡¹ç®å°±å®ç°äºæ åçå½éåæ¯æï¼æææç¤ºä¿¡æ¯é½å¯ä»¥æ ¹æ®ç¨æ·è¯­è¨èªå¨åæ¢ã</p>
<p dir="auto">&nbsp;</p>
<p dir="auto">&nbsp;</p>
<p dir="auto">&nbsp;</p>
<p dir="auto">&nbsp;</p>
<p dir="auto">&nbsp;</p>
<p dir="auto">&nbsp;</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.04791666666666667" data-date-updated="2026-01-21 16:24">2026-01-21 15:15</span>&nbsp;
<a href="https://www.cnblogs.com/Marktowin">Marktowin</a>&nbsp;
éè¯»(<span id="post_view_count">139</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19511993);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19511993', targetLink: 'https://www.cnblogs.com/Marktowin/p/19511993', title: 'SpringBooté¡¹ç®çå½éåæµç¨' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ DynamicâSQL2 æ¥è¯¢ç¯ï¼MyBatis å¢å¼ºå©å¨ï¼è®© SQL åå Java ä¸æ ·ä¸æ» ]]></title>
    <link>https://www.cnblogs.com/pengweizhong/p/19511865</link>
    <guid>8cd3a692a22bfbf537046c71e8aca950</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/pengweizhong/p/19511865" title="åå¸äº 2026-01-21 14:43">
    <span role="heading" aria-level="2">DynamicâSQL2 æ¥è¯¢ç¯ï¼MyBatis å¢å¼ºå©å¨ï¼è®© SQL åå Java ä¸æ ·ä¸æ»</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="dynamicsql2-æ¥è¯¢ç¯mybatis-å¢å¼ºå©å¨è®©-sql-åå-java-ä¸æ ·ä¸æ»">DynamicâSQL2 æ¥è¯¢ç¯ï¼MyBatis å¢å¼ºå©å¨ï¼è®© SQL åå Java ä¸æ ·ä¸æ»</h1>
<blockquote>
<p><strong>dynamicâsql2 çæ¥è¯¢è½åè®¾è®¡ç®æ ï¼</strong>   å SQL è¦åå Java ä¸æ ·èªç¶ï¼å¤ææ¥è¯¢è¦åæ­ç§¯æ¨ä¸æ ·ç»åï¼ç»ææ å°è¦åæä½éåä¸æ ·é¡ºæ»ã</p>
</blockquote>
<p>æ¬ç¯ç®è¿°äºï¼</p>
<ul>
<li>åºç¡æ¥è¯¢</li>
<li>ç»ææ å°</li>
<li>åç» / Map / åé¡µ</li>
<li>Join / å­æ¥è¯¢ / JSON è¡¨</li>
<li>å¨æåå¼ç¨</li>
<li>æåºä¸ SQL æ³¨å¥é²å¾¡</li>
<li>å¿½ç¥å</li>
<li>å½æ°æ¥è¯¢</li>
<li>æ­£åå¹éæ¡ä»¶</li>
<li><strong>å¨æåºè¡¨åç§°ï¼schema/tableï¼æºå¶</strong></li>
<li><strong>åé¡µä½ç³»ï¼dynamicâsql2 / MyBatis / é»è¾åé¡µï¼</strong></li>
</ul>
<h1 id="å¼å¥ä¾èµ">å¼å¥ä¾èµ</h1>
<blockquote>
<p>æªæ­¢è³<code>2026-01-21</code>ï¼ææ°çæ¯<code>0.1.8</code>ï¼é¡¹ç®å°åï¼<a href="https://github.com/pengweizhong/dynamic-sql2" target="_blank" rel="noopener nofollow">https://github.com/pengweizhong/dynamic-sql2</a></p>
</blockquote>
<pre><code class="language-xml">        &lt;!-- Spring2.x --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.dynamic-sql&lt;/groupId&gt;
            &lt;artifactId&gt;dynamic-sql2-spring-boot-starter&lt;/artifactId&gt;
            &lt;version&gt;0.1.8&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;!-- Spring3.x --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.dynamic-sql&lt;/groupId&gt;
            &lt;artifactId&gt;dynamic-sql2-spring-boot3-starter&lt;/artifactId&gt;
            &lt;version&gt;0.1.8&lt;/version&gt;
        &lt;/dependency&gt;
</code></pre>
<p>å¨<code>repository</code>å±æ³¨å¥<code>SqlContext</code>  å¢å æ¹æ¥é½åæ­¤å¯¹è±¡äº¤äºï¼</p>
<pre><code class="language-java">    @Resource
    private SqlContext sqlContext;
</code></pre>
<h1 id="1-åºç¡æ¥è¯¢ä¸ç»ææ å°">1. åºç¡æ¥è¯¢ä¸ç»ææ å°</h1>
<h2 id="11-æ¥è¯¢åè¡¨">1.1 æ¥è¯¢åè¡¨</h2>
<pre><code class="language-java">List&lt;Product&gt; list = sqlContext.select()
        .allColumn()
        .from(Product.class)
        .fetch()
        .toList();
</code></pre>
<h2 id="12-æ¥è¯¢ååæ é">1.2 æ¥è¯¢ååï¼æ éï¼</h2>
<pre><code class="language-java">LocalDate one = sqlContext.select()
        .column(Product::getCreatedAt)
        .from(Product.class)
        .limit(1)
        .fetch(LocalDate.class)
        .toOne();
</code></pre>
<h2 id="13-æ¥è¯¢åæ¡è®°å½">1.3 æ¥è¯¢åæ¡è®°å½</h2>
<pre><code class="language-java">Product product = sqlContext.select()
        .allColumn()
        .from(Product.class)
        .where(c -&gt; c.andEqualTo(Product::getProductId, 7))
        .fetch()
        .toOne();
</code></pre>
<p>æä½¿ç¨ä¸»é®å¿«æ·æ¹å¼ï¼</p>
<pre><code class="language-java">Product product2 = sqlContext.selectByPrimaryKey(Product.class, 7);
</code></pre>
<h1 id="2-tolist--toone--tomap--togroupingby">2. toList / toOne / toMap / toGroupingBy</h1>
<h2 id="21-åç»-togroupingby">2.1 åç» toGroupingBy</h2>
<pre><code class="language-java">Map&lt;Integer, HashSet&lt;String&gt;&gt; groupingBy = sqlContext.select()
        .distinct()
        .allColumn()
        .from(User.class)
        .fetch()
        .toGroupingBy(
                User::getUserId,
                user -&gt; user.getName() + "_hello",
                HashSet::new,
                ConcurrentHashMap::new
        );
</code></pre>
<h2 id="22-åç»å¸¦-dto">2.2 åç»ï¼å¸¦ DTOï¼</h2>
<pre><code class="language-java">LinkedHashMap&lt;String, HashSet&lt;Integer&gt;&gt; groupingBy = sqlContext.select()
        .allColumn()
        .from(User.class)
        .limit(10)
        .fetch(User.class)
        .toGroupingBy(
                User::getName,
                User::getUserId,
                HashSet::new,
                LinkedHashMap::new
        );
</code></pre>
<h2 id="23-tomapå«éå¤-key-å¤ç">2.3 toMapï¼å«éå¤ key å¤çï¼</h2>
<pre><code class="language-java">Map&lt;Integer, String&gt; map = sqlContext.select()
        .distinct()
        .allColumn()
        .from(User.class)
        .fetch()
        .toMap(
                user -&gt; 123,
                user -&gt; user.getName() + "_hello"
        );
</code></pre>
<p>éå¤ key ä¼æå¼å¸¸ï¼å¯èªå®ä¹åå¹¶ç­ç¥ï¼</p>
<pre><code class="language-java">.toMap(
    ProductView::getProductName,
    v -&gt; v,
    (v1, v2) -&gt; v1
);
</code></pre>
<h1 id="3-join--å­æ¥è¯¢--json-è¡¨">3. Join / å­æ¥è¯¢ / JSON è¡¨</h1>
<h2 id="31-å¤çº§-join--å«å-èªå³è">3.1 å¤çº§ join + å«å ï¼èªå³èï¼</h2>
<pre><code class="language-java">List&lt;Map&lt;String, Object&gt;&gt; list = sqlContext.select()
        .column("d1", DepartmentEntity::getId, "l5Id")
        .column("d2", DepartmentEntity::getId, "l4Id")
        .column("d3", DepartmentEntity::getId, "l3Id")
        .column("d4", DepartmentEntity::getId, "l2Id")
        .column("d5", DepartmentEntity::getId, "l1Id")
        .from(DepartmentEntity.class, "d1")
        .leftJoin(DepartmentEntity.class, "d2", c -&gt; c.andEqualTo(new Column("d1","id"), new Column("d2","parent_id")))
        .leftJoin(DepartmentEntity.class, "d3", c -&gt; c.andEqualTo(new Column("d2","id"), new Column("d3","parent_id")))
        .leftJoin(DepartmentEntity.class, "d4", c -&gt; c.andEqualTo(new Column("d3","id"), new Column("d4","parent_id")))
        .leftJoin(DepartmentEntity.class, "d5", c -&gt; c.andEqualTo(new Column("d4","id"), new Column("d5","parent_id")))
        .where(c -&gt; c.andIn(DepartmentEntity::getId, Arrays.asList(1,2,3)))
        .fetchOriginalMap()
        .toList();
</code></pre>
<h2 id="32-å­æ¥è¯¢-join">3.2 å­æ¥è¯¢ join</h2>
<pre><code class="language-java">List&lt;Map&lt;String, Object&gt;&gt; list = sqlContext.select()
        .allColumn(Product.class)
        .from(Product.class)
        .innerJoin(
                select -&gt; select.allColumn(Product.class)
                        .from(Category.class)
                        .join(Product.class, on -&gt; on.andEqualTo(Category::getCategoryId, Product::getCategoryId))
                        .where(c -&gt; c.andLessThanOrEqualTo(Category::getCategoryId, 10)),
                "t",
                on -&gt; on.andEqualTo(Product::getProductId, bindAlias("t", Product::getProductId))
        )
        .fetchOriginalMap()
        .toList();
</code></pre>
<h2 id="33-json-è¡¨å±å¼jsontable">3.3 JSON è¡¨å±å¼ï¼JsonTableï¼</h2>
<pre><code class="language-java">List&lt;Object&gt; list = sqlContext.select()
        .column("o", Order::getOrderId)
        .column("jt", Product::getProductName)
        .from(Order.class, "o")
        .join(() -&gt; new JsonTable(
                        "o",
                        Order::getOrderDetails,
                        "$.items[*]",
                        JsonColumn.builder()
                                .column("product_name")
                                .dataType("VARCHAR(150)")
                                .jsonPath("$.product")
                                .build()
                ),
                "jt",
                null
        )
        .fetch()
        .toList();
</code></pre>
<h1 id="4-å¨æåå¼ç¨-columnreference">4. å¨æåå¼ç¨ ColumnReference</h1>
<pre><code class="language-java">List&lt;Product&gt; list = sqlContext.select()
        .column(Product::getProductId)
        .columnReference(columnReference())
        .from(Product.class)
        .fetch()
        .toList();
</code></pre>
<pre><code class="language-java">AbstractColumnReference columnReference() {
    return ColumnReference.withColumns()
            .column(Product::getProductId)
            .columnReference(columnReference2())
            .column(Product::getProductName);
}
</code></pre>
<h1 id="5-æåºä¸-sql-æ³¨å¥é²å¾¡">5. æåºä¸ SQL æ³¨å¥é²å¾¡</h1>
<h2 id="51-é¾å¼æåº">5.1 é¾å¼æåº</h2>
<pre><code class="language-java">List&lt;User&gt; list = sqlContext.select()
        .allColumn()
        .from(User.class, "u")
        .orderBy(true, sortField, SortOrder.DESC)
        .thenOrderBy(false, User::getUserId)
        .thenOrderBy(true, User::getName)
        .fetch()
        .toList();
</code></pre>
<h2 id="52-order-by-æ³¨å¥æµè¯">5.2 ORDER BY æ³¨å¥æµè¯</h2>
<pre><code class="language-java">sqlContext.select()
        .allColumn()
        .from(User.class)
        .orderBy("user_id; drop table users; --", SortOrder.DESC)
        .fetch()
        .toList();
</code></pre>
<p>æ¡æ¶ä¼æç»éæ³å­æ®µåï¼æåºå¼å¸¸ï¼é¿åæ³¨å¥ã</p>
<h1 id="6-å¿½ç¥å-ignorecolumn">6. å¿½ç¥å ignoreColumn</h1>
<pre><code class="language-java">List&lt;?&gt; list = sqlContext.select()
        .allColumn()
        .ignoreColumn(TempUserEntity::getName)
        .ignoreColumn(TempDeptEntity::getName)
        .from(TempUserEntity.class)
        .join(TempDeptEntity.class, on -&gt; on.andEqualTo(TempUserEntity::getId, TempDeptEntity::getId))
        .fetch()
        .toList();
</code></pre>
<h1 id="7-æ¥æå½æ°-dateformat--now">7. æ¥æå½æ° DateFormat / Now</h1>
<pre><code class="language-java">YearMonth yearMonth = sqlContext.select()
        .column(new DateFormat(new Now(), "%Y-%m"))
        .from(Dual.class)
        .fetch(YearMonth.class)
        .toOne();
</code></pre>
<h1 id="8-æ­£åå¹é-andmatchesæ©å±ç¹">8. æ­£åå¹é andMatchesï¼æ©å±ç¹ï¼</h1>
<pre><code class="language-java">List&lt;User&gt; list = sqlContext.select()
        .allColumn()
        .from(User.class)
        .where(c -&gt; c.andMatches(User::getEmail, ".*@gmail\\.com"))
        .fetch()
        .toList();
</code></pre>
<h1 id="9-å¨æåºè¡¨åç§°schematable">9. å¨æåºè¡¨åç§°ï¼schema/tableï¼</h1>
<p><code>dynamicâsql2</code> ç <code>@Table</code> æ¯æå ä½ç¬¦è§£æï¼å¯å¨æï¼</p>
<ul>
<li>schema</li>
<li>table</li>
<li>alias</li>
<li>dataSourceName</li>
</ul>
<h2 id="91-å¨æ-schema">9.1 å¨æ schema</h2>
<p>ä»0.1.8èµ·ï¼èªå®ä¹å¼åºè¡¨è§£æå¨ï¼è¿å¨åä¸å®ä¾ç¸ä¼¼ä¸å¡ä¸è·¨åºæ¶ä¸åçå½ä»¤åºè¡¨å½åè§åæ¶éå¸¸æç¨ï¼ä¸ä¼å½±åæ¥è¯¢éåº¦ã</p>
<pre><code class="language-java">@Table(schema = "${tenant.schema:user_center}", name = "t_user")
</code></pre>
<p>éç½®ï¼</p>
<pre><code class="language-properties">tenant.schema = tenant_001
</code></pre>
<p>SQLææçæ®µï¼</p>
<pre><code class="language-sql">FROM tenant_001.t_user
</code></pre>
<h2 id="92-å¨æè¡¨åå«é»è®¤å¼">9.2 å¨æè¡¨åï¼å«é»è®¤å¼ï¼</h2>
<pre><code class="language-java">@Table(name = "${tenant.table.user:t_user}")
</code></pre>
<h2 id="93-å¨ææ°æ®æºæé«ä¼åçº§">9.3 å¨ææ°æ®æºï¼æé«ä¼åçº§ï¼</h2>
<pre><code class="language-java">@Table(dataSourceName = "ds_user")
</code></pre>
<h2 id="94-å¨å±alias">9.4 å¨å±alias</h2>
<pre><code class="language-java">@Table(name = "t_user", alias = "u")
</code></pre>
<h1 id="10-åé¡µä½ç³»pagehelper">10. åé¡µä½ç³»ï¼PageHelperï¼</h1>
<p><code>dynamic-sql2</code>åç½®äºåé¡µæ¯æçæ¥è¯¢</p>
<h2 id="101-dynamicsql2-åé¡µ">10.1 dynamicâsql2 åé¡µ</h2>
<pre><code class="language-java">PageInfo&lt;List&lt;User&gt;&gt; pageInfo = PageHelper.of(1, 10)
        .selectPage(() -&gt; sqlContext.select()
                .allColumn()
                .from(User.class)
                .fetch()
                .toList());
</code></pre>
<h2 id="102-mybatis-åé¡µ">10.2 MyBatis åé¡µ</h2>
<pre><code class="language-java">PageInfo&lt;List&lt;User&gt;&gt; pageInfo = PageHelper.ofMybatis(1, 10)
        .selectPage(() -&gt; sqlContext.select()
                .allColumn()
                .from(User.class)
                .fetch()
                .toList());
</code></pre>
<p>Dynamic-SQL2æ¯æmybatisçåé¡µï¼ä½æ¯éè¦å¼å¥æå±åï¼</p>
<pre><code class="language-xml">&lt;!-- Source: https://mvnrepository.com/artifact/com.dynamic-sql/dynamic-sql2-extension --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.dynamic-sql&lt;/groupId&gt;
    &lt;artifactId&gt;dynamic-sql2-extension&lt;/artifactId&gt;
    &lt;version&gt;0.1.6&lt;/version&gt;
    &lt;scope&gt;compile&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre>
<p>è¯¥æå±åé¤äºæ¯æMybatisåé¡µå¤ï¼åå¶æ å°è§åä¹æ¯å®å¨å¼å®¹ã</p>
<h2 id="103-applywhereå®éªæ§">10.3 applyWhereï¼å®éªæ§ï¼</h2>
<p>è¯¥åºæ¯ææ¶ä¼éå°ç±»ä¼¼æåµï¼æçä¾èµjaræèªå·±ç¬ç«çé»è¾ä½ç³»ï¼ä½æ¯åæ³ä¿®æ¹å¶åé¨SQLï¼å¨ä¸æ¹ååé¨é»è¾çæåµä¸ï¼å¨å¤é¨å°è¯ä¿®æ¹SQLè¯­å¥ãç®ååªæ¯å®éªé¶æ®µï¼æè¶³å¤çåºæ¯åºæ¯æ¯æåæ´å¤çæµè¯åï¼æä¼Releaseè¯¥ç¹æ§ã</p>
<pre><code class="language-java">PageInfo&lt;List&lt;User&gt;&gt; pageInfo = PageHelper.of(1, 3)
        .applyWhere(c -&gt; c.andGreaterThanOrEqualTo(User::getAge, 18))
        .selectPage(
    			//åè®¾è¿æ¯æ æ³ä¿®æ¹/ä¸åè®¸æ´æ¹çåé¨SQLï¼éå¸¸æ¯jarçå½¢å¼æä¾
    			() -&gt; sqlContext.select()
                .allColumn()
                .from(User.class)
                .fetch()
                .toList());
</code></pre>
<h2 id="104-é»è¾åé¡µéååå­åé¡µ">10.4 é»è¾åé¡µï¼éååå­åé¡µï¼</h2>
<pre><code class="language-java">PageInfo&lt;List&lt;Integer&gt;&gt; pageInfo = PageHelper.ofLogic(2, 3)
        .selectPage(Arrays.asList(1,2,3,4,5,6,7));
</code></pre>
<h1 id="11-åé¡µ--å¨æåºè¡¨åç§°ç¤ºä¾">11. åé¡µ + å¨æåºè¡¨åç§°ç¤ºä¾</h1>
<pre><code class="language-java">@Table(
    schema = "${tenant.schema:user_center}",
    name = "${tenant.table.user:t_user}",
    alias = "u"
)
public class User {}
</code></pre>
<p>åé¡µæ¥è¯¢ï¼</p>
<pre><code class="language-java">PageInfo&lt;List&lt;User&gt;&gt; pageInfo = PageHelper.of(1, 10)
        .selectPage(() -&gt; sqlContext.select()
                .allColumn()
                .from(User.class)
                .fetch()
                .toList());
</code></pre>
<p>æç» SQLï¼</p>
<pre><code class="language-java">SELECT u.* 
FROM tenant_001.user_2025 u 
LIMIT 10 OFFSET 0
</code></pre>
<h1 id="æå±">æå±</h1>
<h2 id="èªå®ä¹å½æ°">èªå®ä¹å½æ°</h2>
<p>å¯¹äº<code>Dynamic-SQL2</code>æ²¡ææä¾çå½æ°ï¼å¦ä½èªå®ä¹å¢ï¼éå¸¸ç®åï¼ç»§æ¿<code>ColumnFunctionDecorator</code>æ½è±¡ç±»éå<code>getFunctionToString</code>æ¹æ³å³å¯ï¼ç¶åä»£ç ä¸­å°±å¯ä»¥å¼ç¨äºã</p>
<p>æ¯å¦å·²å­å¨ç<code>max</code>å½æ°ä¸ºä¾ï¼</p>
<pre><code class="language-java">/*
 * Copyright (c) 2024 PengWeizhong. All Rights Reserved.
 *
 * This source code is licensed under the MIT License.
 * You may obtain a copy of the License at:
 * https://opensource.org/licenses/MIT
 *
 * See the LICENSE file in the project root for more information.
 */
package com.dynamic.sql.core.column.function.windows.aggregate;


import com.dynamic.sql.core.FieldFn;
import com.dynamic.sql.core.Version;
import com.dynamic.sql.core.column.function.AbstractColumFunction;
import com.dynamic.sql.core.column.function.ColumnFunctionDecorator;
import com.dynamic.sql.core.column.function.windows.WindowsFunction;
import com.dynamic.sql.enums.SqlDialect;
import com.dynamic.sql.utils.ExceptionUtils;
import com.dynamic.sql.model.TableAliasMapping;

import java.util.Map;


public class Max extends ColumnFunctionDecorator implements AggregateFunction, WindowsFunction {

    public Max(AbstractColumFunction delegateFunction) {
        super(delegateFunction);
    }

    public &lt;T, F&gt; Max(FieldFn&lt;T, F&gt; fn) {
        super(fn);
    }

    public &lt;T, F&gt; Max(String tableAlias, FieldFn&lt;T, F&gt; fn) {
        super(tableAlias, fn);
    }

    @Override
    public String getFunctionToString(SqlDialect sqlDialect, Version version, Map&lt;String, TableAliasMapping&gt; aliasTableMap) throws UnsupportedOperationException {
        if (sqlDialect == SqlDialect.ORACLE) {
            return "MAX(" + delegateFunction.getFunctionToString(sqlDialect, version, aliasTableMap) + ")".concat(appendArithmeticSql(sqlDialect, version));
        }
        if (sqlDialect == SqlDialect.MYSQL) {
            return "max(" + delegateFunction.getFunctionToString(sqlDialect, version, aliasTableMap) + ")".concat(appendArithmeticSql(sqlDialect, version));
        }
        throw ExceptionUtils.unsupportedFunctionException("max", sqlDialect);
    }
}

</code></pre>
<p>ä¹åå¨ä»£ç ä¸­ç´æ¥å¼ç¨è¯¥ç±»ï¼</p>
<pre><code class="language-java">    @Test
    void testMax() {
        Integer max = sqlContext.select()
                .column(new Max(Product::getProductId))
                .from(Product.class)
                .fetch(Integer.class)
                .toOne();
        System.out.println(max);
    }
</code></pre>
<p>æå°çSQL</p>
<pre><code class="language-log">2026-01-21 13:27:03 [main] DEBUG com.dynamic.sql.core.database.SqlDebugger - dataSource --&gt;     Preparing: select max(`p`.`product_id`) as productId from `dynamic_sql2`.`products` as `p`
2026-01-21 13:27:03 [main] DEBUG com.dynamic.sql.core.database.SqlDebugger - dataSource --&gt;    Parameters: 
2026-01-21 13:27:03 [main] DEBUG com.dynamic.sql.core.database.SqlDebugger - dataSource &lt;--         Total: 1
</code></pre>
<p><code>AggregateFunction</code>å<code>WindowsFunction</code>æ è¯å½æ°çåç±»ï¼å ä¸ºæäºåºæ¯ä¸å½æ°åµå¥ä½¿ç¨æ¶ï¼ä¼è¦æ±æ¯çªå£å½æ°æå¿é¡»æ¯å­ç¬¦ä¸²å½æ°ï¼å æ­¤å£°æç±»åæ´å ç¬¦åå¼åè§èï¼å¦æèªå®ä¹çè¯ï¼å¯ä»¥ä¸ç¨å³å¿å·ä½çå½æ°åç±»ï¼ç´æ¥ç»§æ¿<code>ColumnFunctionDecorator</code>å³å¯ã</p>
<p>ç®åå®ä¹çå½æ°åç±»æ¥å£ï¼</p>
<ul>
<li>AggregateFunction ï¼ èåå½æ°</li>
<li>ScalarFunction ï¼ æ éå½æ°</li>
</ul>
<p><code>Max</code>å½æ°ä¾èµçå¨é¨ä½ç³»å¦å¾æç¤ºï¼</p>
<p><img alt="image-20260121140818596" loading="lazy" data-src="./%E5%8A%A8%E6%80%81SQL2%E4%B9%8B%E6%9F%A5%E8%AF%A2%E7%AF%87.assets/image-20260121140818596.png" class="lazyload"></p>
<h2 id="å½äº§æ°æ®åº">å½äº§æ°æ®åº</h2>
<p>å¯¹äºå½äº§æ°æ®åºï¼éå¸¸é½ä¼æ¯æåå¼å®¹mysqlè¯­æ³ï¼å æ­¤éå¸¸ä¸ç¨å¤ªæå¿ä¸å¼å®¹çé®é¢ãä½æ¯<code>dynamic-sql2</code>å¯å¨æ¶ä¼æ£æµåæ¯æçæ°æ®åºï¼å¯¹äºä¸æ¯æçæ°æ®åºä¼æ¯ææ¥éï¼åªè¦ä½ ç¡®è®¤å½åæä½¿ç¨çæ°æ®åºæä¾åå¼å®¹<code>Mysql</code>ï¼é£ä¹å°±å¯ä»¥å®å¨ä½¿ç¨<code>dynamic-sql2</code>ï¼</p>
<h2 id="æ¨èä¸æ¬¾å¥½ç¨ç-idea-mybatis-æä»¶">æ¨èä¸æ¬¾å¥½ç¨ç IDEA Mybatis æä»¶</h2>
<p>æåæ¬¢çç¹æ§ä¹ä¸æ¯å¨æ§å¶å°å¯ä»¥å°æå°çSQLç´æ¥åå¹¶ä¸ºå¯æ§è¡çSQLè¯­å¥ï¼å¨å¼åç¯å¢ä¸­ç¹å«æç¨ï¼</p>
<p>æä»¶ä¸»é¡µï¼<a href="https://plugins.jetbrains.com/plugin/9837-mybatiscodehelperpro" target="_blank" rel="noopener nofollow">https://plugins.jetbrains.com/plugin/9837-mybatiscodehelperpro</a></p>
<p><img alt="image-20260121141250521" loading="lazy" data-src="./%E5%8A%A8%E6%80%81SQL2%E4%B9%8B%E6%9F%A5%E8%AF%A2%E7%AF%87.assets/image-20260121141250521.png" class="lazyload"></p>
<h1 id="-å®ç»æè±æ¬¢è¿åæ§½">ð å®ç»æè±ï¼æ¬¢è¿åæ§½ð</h1>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-21 14:43">2026-01-21 14:43</span>&nbsp;
<a href="https://www.cnblogs.com/pengweizhong">pengweizhong</a>&nbsp;
éè¯»(<span id="post_view_count">115</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19511865);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19511865', targetLink: 'https://www.cnblogs.com/pengweizhong/p/19511865', title: 'DynamicâSQL2 æ¥è¯¢ç¯ï¼MyBatis å¢å¼ºå©å¨ï¼è®© SQL åå Java ä¸æ ·ä¸æ»' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ä¸¤å¤©ç§æ200ç¾åï¼æAIå¤§æ¨¡åç½å³ç»äºæ¯æäºClaudeæ¨¡å ]]></title>
    <link>https://www.cnblogs.com/sdcb/p/19508169/20260120-chats-190</link>
    <guid>707eb8e520c6aa5ddcb1d2f7ae796218</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/sdcb/p/19508169/20260120-chats-190" title="åå¸äº 2026-01-21 08:45">
    <span role="heading" aria-level="2">ä¸¤å¤©ç§æ200ç¾åï¼æAIå¤§æ¨¡åç½å³ç»äºæ¯æäºClaudeæ¨¡å</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>è¿æ¯ä¸ä¸ªå³äºâçéç½é¶âçå¼åæäºã</p>
<p>Chats 1.9.0 åå¸äº 2025 å¹´ 11 æ 27 æ¥ï¼è·ç¦»ä¸ä¸ä¸ªçæ¬åå¸ä»è¿å»äºä¸å°ä¸ä¸ªæãä½å¯¹ Chats æ¥è¯´ï¼è¿å´æ¯ä¸ä¸ªéç¨ç¢å¼ççæ¬ï¼<strong>æä»¬ä¸ä»å¨é¢æ¯æäº Anthropicï¼Claudeï¼æ¨¡åï¼è¿é¡ºå¸¦æ .NET 10 ç»åäºï¼çè³è¿æåºäºä¸å¥è½å¨ Chats éâåå£³âè· Claude Code ç API å¼å®¹å±ã</strong></p>
<p>èå¨è¿ä¸åçèåï¼æ¯ä¸å¼ è®©æâèçâç Azure è´¦åã</p>
<hr>
<h2 id="ä¸åæºäºå¾®è½¯ä¸-anthropic-èæ">ä¸åæºäºâå¾®è½¯ä¸ Anthropic èæâ</h2>
<p>äºæè¦ä» 2025 å¹´ 11 æ 19 æ¥è¯´èµ·ãé£å¤©ï¼å¾®è½¯ä¸ Anthropic è¾¾æåä½ï¼å®£å¸å°å¨ Azure å¹³å°ä¸æä¾ Anthropic ç Claude å¤§æ¨¡åæå¡ãè¿æå³çå¼åèåä¼ä¸ç¨æ·å¯ä»¥éè¿ Azure äºæå¡è®¿é® Claude æ¨¡åã</p>
<p>ä½ä¸ºä¸åå¾®è½¯ MVPï¼ææ¬ä»¥ä¸º Claude æ¨¡åå¯¹ MVP é¢åº¦æ¥è¯´æ¯å¯ä»¥ä½¿ç¨çï¼å ä¸ºæ ¹æ®ä»¥å¾çç»éªï¼å¦ææ²¡æèµæ ¼ä½¿ç¨æé¡¹æå¡ï¼éå¸¸ä¼ç´æ¥å¨æ§å¶å°éæç¤ºâæ æéâæâæ æ³å¯ç¨âï¼èä¸æ¯ç´æ¥åè®¸ä½¿ç¨ç¶åäº§çé«é¢è´¹ç¨ï¼ä½æå¤§æäºã</p>
<p>å æ­¤æç¬¬ä¸æ¶é´å°±æ³å°äºå° Claude æ¨¡åéæå°æèªå·±çé¡¹ç®ä¸­ââ<strong>Sdcb Chats</strong>ã</p>
<p>å½æ¶ä¸ºäºç¡®ä¿ Anthropic Messages API å·¥ä½æ­£å¸¸ä¸ç¨³å®ï¼æåäºå¤§éçæµè¯ãä¸ºäºéªè¯å¼å®¹æ§ï¼æçè³è¿âç«èµ·æ¥è¹¬âï¼ç´æ¥æ¥å¥äº Anthropic å®æ¹çå½ä»¤è¡å·¥å· <code>Claude Code</code> æ¥è· Opus æ¨¡åã</p>
<p>ç»æâ¦â¦ç­ç­ 2 å¤©æ¶é´ï¼æå¨ Azure ä¸è· Claude æ¨¡åç API è°ç¨è´¹ç¨å°±é«è¾¾ <strong>192.95 ç¾å</strong>ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/233608/202601/233608-20260120172700464-1622754976.png" alt="" loading="lazy"></p>
<p>å½æ¶çå°è´¦åæ´ä¸ªäººé½æ¯èçãä¸è¿å¥½å¨âæ°ªéâæ²¡æç½è´¹ï¼æç»ææåå° Claude æ¨¡åå®ç¾éæå°äº Sdcb Chats ä¸­ãç°å¨ï¼å¤§å®¶å¯ä»¥å¨ Chats ä¸­æå¿«å°ä½¿ç¨ Claude æ¨¡åäºï¼</p>
<hr>
<h2 id="190-çæ ¸å¿anthropic-å¨é¢è½å°">1.9.0 çæ ¸å¿ï¼Anthropic å¨é¢è½å°</h2>
<p>å¨ 1.9.0 ä¹åï¼Chats å¯¹ Claude çæ¯æåªè½è¯´æ¯âè½ç¨âï¼å ä¸ºå¹¶æ²¡æåçæ¯æ Anthropic Messages APIï¼éè¦éè¿ OpenAI å¼å®¹æ¥å£è½¬è¯ââè OpenAI Chat Completions å¼å®¹æ¥å£å¹¶ä¸æ¯æ Extended Thinkingãä½è¿ä¸æ¬¡ï¼ææ¯<strong>åçæ¯æ</strong>ã</p>
<h3 id="åç-httpclient-å®ç°ä¸-thinking-æ¯æ">åç HttpClient å®ç°ä¸ Thinking æ¯æ</h3>
<p>ä¸ºäºè¿½æ±æè´çæ§è½åå¯æ§æ§ï¼æéåäº Chats çåºå±è°ç¨é»è¾ã</p>
<p>åæ¬ Anthropic æä¾äº<a href="https://github.com/anthropics/anthropic-sdk-csharp" target="_blank" rel="noopener nofollow">Anthropic C# API Library</a>ï¼æä¸å¼å§ä½¿ç¨äºè¿ä¸ª SDKï¼ä½åç°éé¢çéªè¯é»è¾æç¹å¤ªè¿åäºï¼è¿æ¨¡ååç§°é½è¦éªè¯ï¼æ¥éè¯´ï¼<code>AnthropicInvalidDataException: Data did not match any variant of RawMessageStreamEvent</code>ï¼ãå¨æå¼åçæ¶åï¼Opus æ¨¡åè¿æ²¡åå¸ 4.5 çæ¬ï¼æä½¿ç¨è¿ä¸ª SDK è¿èªå®¶ç Claude 4.5 Opus é½æ¥éï¼ç¬æ­»ï¼æ´ä¸è¦æç¨è¿ä¸ª SDK è¿æ¥å½äº§ç MiniMax/GLM/DeepSeek v3.2 äºï¼è¿ç§æä½éå¸¸âAnthropicâï¼è¿ä¸ªé®é¢ç´å° <strong>2026-01-14</strong> åå¸ç <code>12.2.0</code> çæ¬ä¸­æè§£å³ï¼ï¼ã</p>
<p><img src="https://img2024.cnblogs.com/blog/233608/202601/233608-20260120214334386-1499186789.png" alt="image" loading="lazy"></p>
<p>å æ­¤æç <code>Git</code> æäº¤è®°å½éå¯ä»¥çå°ï¼æä¸å¼å§æ¯åå¤èµ° SDK å Anthropic æ¯æçï¼ä½æç»åæ¾å¼äºï¼è½¬èå¨ä»£ç ä¸­ç¨åç <code>HttpClient</code> ææ¸äºä¸ä¸ªè¿ 1000 è¡ç <code>AnthropicChatService</code>ã</p>
<p><img src="https://img2024.cnblogs.com/blog/233608/202601/233608-20260120172700992-1302091122.png" alt="" loading="lazy"></p>
<p>è¿æå³çä»ä¹ï¼</p>
<ol>
<li>
<p><strong>å®æ´æ¯æ Thinkingï¼æç»´é¾ï¼</strong>ï¼Claude æ¨¡åç Thinking å¯ä»¥åå¨å®æ¹ç½é¡µçé£æ ·å±ç¤ºï¼æ¯ææµå¼è¾åºï¼âæèâä¸âåç­âåç¦»ãä¸ºæ­¤æå¨æ°æ®åºä¸­ä¸é¨æ°å¢äº <code>StepContentThink</code> è¡¨ï¼ç¨äºç¬ç«å­å¨æç»´åå®¹ã</p>
<p><img src="https://img2024.cnblogs.com/blog/233608/202601/233608-20260120172701332-89257932.png" alt="" loading="lazy"></p>
</li>
<li>
<p><strong>Signatureï¼ç­¾åï¼éªè¯</strong>ï¼Chats ç°å¨è½æ­£ç¡®å¤çåå­å¨ Claude çæç»´ç­¾åï¼Signatureï¼ï¼ç¡®ä¿è¯æ®é¾å®æ´ã</p>
</li>
<li>
<p><strong>Vision Link ä¼å</strong>ï¼é»è®¤ä½¿ç¨ URL èé Base64 ä¼ å¾ï¼å¤§å¹èçå¸¦å®½å Tokenã</p>
</li>
</ol>
<p>åæ¶ï¼æè¿å¼å¥äº <code>MaxThinkingBudget</code>ï¼æ¨¡åçº§ï¼å <code>ThinkingBudget</code>ï¼ä¼è¯çº§ï¼éç½®ï¼é²æ­¢ä½ ç Token ååæä¸æ ·âä¸ç¥ä¸è§âå°ç§å®ã</p>
<hr>
<h2 id="åå£³ä¸ä½anthropic-messages-api-å¼å®¹">âåå£³ä¸ä½âï¼Anthropic Messages API å¼å®¹</h2>
<p>è¿ä¸æ¡å¯è½æ¯åçæ¯ææ´ç¡¬æ ¸ã</p>
<p>Chats 1.9.0 <strong>ååå®ç°</strong>äº Anthropic çå®æ¹ API åè®®ï¼<code>/v1/messages</code>ï¼ãæå¨ <code>src/BE/web/Controllers/Api/AnthropicCompatible/AnthropicMessagesController.cs</code> ä¸­å®æ´å¤å»äº Anthropic çæ¥å£è§èãè¿æå³ç Chats ä¸ä»æ¯ä¸ä¸ªå®¢æ·ç«¯ï¼å®æ¬èº«ä¹åæäºä¸ä¸ª<strong>æ åç Anthropic API æå¡ç«¯</strong>ã</p>
<p><strong>ä¸ºä»ä¹è¦è¿ä¹åï¼</strong></p>
<p>å ä¸ºç°å¨æå¾å¤ä¼ç§çå·¥å·ï¼æ¯å¦ CursorãClaude Codeãåç§ AI æä»¶ï¼åªæ¯æ Anthropic åçåè®®ãä¸ºäºæ¯æå®æ¹ç <code>claude-code</code> å½ä»¤è¡å·¥å·ï¼å¦å¨å¾ï¼åå°å¯ä»¥å®æ¶è¿½è¸ª Claude Code çä½¿ç¨ä¿¡æ¯ï¼ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/233608/202601/233608-20260120172701746-1289382319.avif" alt="" loading="lazy"></p>
<p>æçè³ä¸é¨ä¿®å¤äº System Prompt çè§£æé»è¾ï¼åæ¶ï¼æè¿å¼å¥äº <code>MaxThinkingBudget</code>ï¼æ¨¡åçº§ï¼å <code>ThinkingBudget</code>ï¼ä¼è¯çº§ï¼éç½®ï¼ä»¥å <strong>Prompt Cache Token</strong> çè®¡è´¹æ¯æï¼Commit <code>85a1c2a6</code>ï¼ï¼é²æ­¢ä½ ç Token ååæä¸æ ·âä¸ç¥ä¸è§âå°ç§å®ã</p>
<p>æ¢ç¶ Chats å·²ç»åæäºä¸ä¸ªå¼ºå¤§ç API ç½å³ï¼é£ä¹éå¥çå¼åèä½éªå¿é¡»è·ä¸ã</p>
<p>1.9.0 æ°å¢äº <strong>Build</strong> æ¨¡åï¼åå«ä¸ä¸ªæ ¸å¿é¡µé¢ï¼</p>
<ul>
<li><strong>API Keys</strong>ï¼æ´å®å¨çå¯é¥ç®¡çï¼æ¯æè¿ææ¶é´ãå¤æ³¨ï¼è¿è½çå°å¯é¥æ©ç ã</li>
<li><strong>Docs</strong>ï¼ä¸ç«å¼ææ¡£ï¼ååºäºææå¼å®¹ OpenAI å Anthropic ç API ç«¯ç¹ï¼æ¯æä¸é®å¤å¶ï¼ã</li>
<li><strong>Usage</strong>ï¼æ API Key ç»´åº¦çç¨éç»è®¡ï¼è°ç¨äºå¤å° Tokenï¼ä¸ç®äºç¶ã</li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/233608/202601/233608-20260120172702273-280531674.png" alt="" loading="lazy"></p>
<hr>
<h2 id="è§è§çäº§åopenai-å¾å-api-ä¸-net-10">è§è§çäº§åï¼OpenAI å¾å API ä¸ .NET 10</h2>
<p>é¤äºå¤§è¯­è¨æ¨¡åï¼1.9.0 è¿è¡¥é½äºè§è§è½åï¼</p>
<ul>
<li>å®ç°äºæ åç OpenAI å¾åçæï¼<code>/v1/images/generations</code>ï¼åç¼è¾ï¼<code>/v1/images/edits</code>ï¼APIã</li>
<li>éååç«¯ç <strong>ChatInput å¨ç»ä¼å</strong>ï¼ç°å¨çå¾ççæä½éªæ´å æµçã</li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/233608/202601/233608-20260120172702911-1941831639.png" alt="" loading="lazy"></p>
<p>æåï¼ä½ä¸ºä¸ä¸ª .NET ä¿¡ä»°ç²ï¼Chats 1.9.0 å·²ç»<strong>å¨çº¿åçº§å°äº .NET 10</strong>ãè½ç¶ç¨æ·æç¥ä¸å¼ºï¼ä½è¿å¸¦æ¥äºæ´å¥½çæ§è½åæ´ç°ä»£çåºå±è®¾æ½ï¼ä¸ºæªæ¥çé¿è¿åå±æä¸äºåºç¡ã</p>
<hr>
<h2 id="ç»è¯­ä¸ºäºæ´èªç±ç-ai-ç½å³">ç»è¯­ï¼ä¸ºäºæ´èªç±ç AI ç½å³</h2>
<p>ä» 1.7 ç MCP è½å°ï¼å° 1.9 ç Anthropic åçæ¯æä¸ API å¼å®¹ï¼Chats æ­£å¨ä¸æ­¥æ­¥ä»ä¸ä¸ªâèå¤©ç½é¡µâè¿åæä¸ä¸ª<strong>çæ­£éç¨ç AI åºç¡è®¾æ½</strong>ã</p>
<p>é£ä¸ª 200 ç¾åçè´¦åè½ç¶è®©äººå¿çï¼ä½å®æ¢æ¥äº Chats å¯¹ Claude çå®ç¾æ¯æï¼ä»¥åé£æ®µâä¸ºäºæµè¯èç¯çè°ç¨âçæ¿ææ¶åï¼æè§å¾ââå¼äºï¼</p>
<p>å¦å¤ç¸ä¿¡æï¼æåäºä¸ååªåå°è¯èç³»å¾®è½¯å Anthropicï¼äºåæé£ 200 ç¾åçè´¹ç¨ç»è¦åæ¥ï¼ä½ä»ä»¬äºç¸æ¨è¯¿ï¼ä¹æ²¡è¯´æ¯ç¨æ·èªå·±çè¡ä¸ºæèå¹³å°è´£ä»»ï¼åªæ¯äºç¸è¯´è¿æ¯å¯¹æ¹ï¼å¾®è½¯/Anthropicï¼çè´£ä»»ï¼æä»¥æåä¹å°±ä¸äºäºä¹äºã</p>
<p>æè°¢éè¯»ï¼åæ¬¢çæåè¯·ç»æç GitHub é¡¹ç®ä¸ä¸ª starï¼<a href="https://github.com/sdcb/chats" target="_blank" rel="noopener nofollow">https://github.com/sdcb/chats</a></p>
<p>è¿æ¯å®æ´çæ´æ°æ¥å¿ï¼<a href="https://github.com/sdcb/chats/blob/main/doc/zh-CN/release-notes/README.md" target="_blank" rel="noopener nofollow">https://github.com/sdcb/chats/blob/main/doc/zh-CN/release-notes/README.md</a></p>
<p>æä»ä¹æ³æ³ä¹æ¬¢è¿å¨è¯è®ºåºçè¨äº¤æµï¼ä¹æ¬¢è¿å å¥æçæ°åå»ºçå¾®ä¿¡ç¾¤ï¼</p>
<p><img src="https://io.starworks.cc:88/cv-public/2026/chats-wxg-qr.png" alt="" loading="lazy"></p>
<p>å¦æä½ æ´ä¹ æ¯ç¨ QQ çè¯ï¼ä¹å¯ä»¥å å¥ Chats QQ ç¾¤ï¼498452653ï¼æä»¬ä¸èµ·æ¢ç´¢æ´å¤ AI ææ¯ç¡¬æ ¸ç©æ³ã</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-21 08:45">2026-01-21 08:45</span>&nbsp;
<a href="https://www.cnblogs.com/sdcb">.NETéªæä½</a>&nbsp;
éè¯»(<span id="post_view_count">822</span>)&nbsp;
è¯è®º(<span id="post_comment_count">1</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19508169);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19508169', targetLink: 'https://www.cnblogs.com/sdcb/p/19508169/20260120-chats-190', title: 'ä¸¤å¤©ç§æ200ç¾åï¼æAIå¤§æ¨¡åç½å³ç»äºæ¯æäºClaudeæ¨¡å' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ WebAPI é¡¹ç®éè¿ CI/CD èªå¨åé¨ç½²å° Linux æå¡å¨ï¼docker-composeï¼ ]]></title>
    <link>https://www.cnblogs.com/hnzhengfy/p/19012379/cicd_Linux_docker</link>
    <guid>ce0b1be3df67a8add323b2ed3317067a</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/hnzhengfy/p/19012379/cicd_Linux_docker" title="åå¸äº 2026-01-21 22:16">
    <span role="heading" aria-level="2">WebAPI é¡¹ç®éè¿ CI/CD èªå¨åé¨ç½²å° Linux æå¡å¨ï¼docker-composeï¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        æ¬æååä¸¾äºä¸ä¸ªç®åçç¤ºä¾é¡¹ç®ï¼ç¶åéè¿ CI/CD çæ¹å¼ï¼å°ç§æéååº Harbor ä¸­çéåï¼åå¸å° Linux ä¸­ç Docker æå¡ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h2>ããåè¨</h2>
<p>æ¬æååä¸¾äºä¸ä¸ªç®åçç¤ºä¾é¡¹ç®ï¼ç¶åéè¿ CI/CD çæ¹å¼ï¼å°ç§æéååº Harbor ä¸­çéåï¼åå¸å° Linux ä¸­ç Docker æå¡ã</p>
<p>å¹¶ä¸ç®åä»ç»äºï¼éç½®èªå¨åå¸çè¿ç¨ææ¶åçä¸äºæ¦å¿µåéç½®ç¹ï¼å¾å¤è®¾è®¡ç§æéååºåç§æååé½åäºéå½å¤çï¼ä»ä¾åèãå¦æçé®ï¼æ¬¢è¿åå¥½æ²éã</p>
<h2>ä¸ãåå¤ä¸ä¸ªç¤ºä¾é¡¹ç®</h2>
<h3>1.1 åå»ºä¸ä¸ª Web API ç¤ºä¾é¡¹ç®</h3>
<p>åç§°ä¾å¦ï¼Test.WebAPI.Net8.Secondï¼é¡¹ç®éç½®å¦ä¸å¾ãä¸»è¦å°±æ¯å¯ç¨å®¹å¨æ¯æã</p>
<p><img src="https://img2024.cnblogs.com/blog/1868241/202601/1868241-20260113192529793-1544105120.png" alt="image" height="434" width="447"></p>
<p>å¦æå¨åå»ºé¡¹ç®çæ¶åæ²¡æå¾éå¯ç¨å®¹å¨æ¯æï¼ä¹å¯ä»¥æå¨æ°å¢ä¸ä¸ª Dockerfile æä»¶ã</p>
<p>å¦ä¸ï¼æ¯ Dockerfile æä»¶çåå®¹ï¼</p>
<pre class="language-nginx highlighter-hljs"><code># è¯·åé https://aka.ms/customizecontainer ä»¥äºè§£å¦ä½èªå®ä¹è°è¯å®¹å¨ï¼ä»¥å Visual Studio å¦ä½ä½¿ç¨æ­¤ Dockerfile çææ åä»¥æ´å¿«å°è¿è¡è°è¯ã

# æ­¤é¶æ®µç¨äºå¨å¿«éæ¨¡å¼(é»è®¤ä¸ºè°è¯éç½®)ä¸ä» VS è¿è¡æ¶
FROM mcr.microsoft.com/dotnet/aspnet:8.0 AS base # ãå»ºè®®ï¼æ¹ä¸ºç§æä»åºã
USER $APP_UID
WORKDIR /app
#EXPOSE 8080
ENV ASPNETCORE_URLS=http://+:998 #ãå¯æ¹ä¸ºèªå®ä¹çç«¯å£ï¼ä¹å¯ä»¥ä½¿ç¨é»è®¤ç8080ã

# æ­¤é¶æ®µç¨äºçææå¡é¡¹ç®
FROM mcr.microsoft.com/dotnet/sdk:8.0 AS build # ãå»ºè®®ï¼æ¹ä¸ºç§æä»åºã
ARG BUILD_CONFIGURATION=Release

WORKDIR /src
COPY ["Test.WebAPI.Net8.csproj", "."]
RUN dotnet restore "./Test.WebAPI.Net8.csproj"
COPY . .

WORKDIR /src
RUN dotnet build "./WebApplication1.csproj" -c $BUILD_CONFIGURATION -o /app/build

# æ­¤é¶æ®µç¨äºåå¸è¦å¤å¶å°æç»é¶æ®µçæå¡é¡¹ç®
FROM build AS publish
ARG BUILD_CONFIGURATION=Release
RUN dotnet publish "./Test.WebAPI.Net8.csproj" -c $BUILD_CONFIGURATION -o /app/publish /p:UseAppHost=false

# æ­¤é¶æ®µå¨çäº§ä¸­ä½¿ç¨ï¼æå¨å¸¸è§æ¨¡å¼ä¸ä» VS è¿è¡æ¶ä½¿ç¨(å¨ä¸ä½¿ç¨è°è¯éç½®æ¶ä¸ºé»è®¤å¼)
FROM base AS final
WORKDIR /app
COPY --from=publish /app/publish .
ENTRYPOINT ["dotnet", "Test.WebAPI.Net8.dll"]</code></pre>
<h3>1.2 å¨é¡¹ç®ä¸»ç®å½ä¸æ·»å <code>gitlab-ci.yml</code>æä»¶</h3>
<p>æä»¶åå®¹ä¾å¦ï¼</p>
<pre class="language-nginx highlighter-hljs"><code>stages:
  - compile
  - build
  - deploy

variables:
  DOCKER_REGISTRY_PREFIX: "harbor.xxxx.com" #ãéæ¿æ¢ä¸ºç§æä»åºååã
  IMAGE_NAME: ${DOCKER_REGISTRY_PREFIX}/${CI_PROJECT_PATH}
  DOCKER_IMAGE_TEST: ${IMAGE_NAME}:${CI_COMMIT_SHA}
  DOCKER_IMAGE_PROD: ${IMAGE_NAME}:${CI_COMMIT_TAG}
  # DOCKER_IMAGE_PROD: ${IMAGE_NAME}:v1.6
  APP_NAME: ${CI_PROJECT_NAME}
  
# çäº§ç¯å¢ç¼è¯ä»»å¡
.compile-op:    # ä»¥ . å¼å¤´ï¼æ¯éè job æ¨¡æ¿ï¼ä¸ä¼ç´æ¥è¿è¡
  stage: compile
  #ãéæ¿æ¢ä¸ºç§æä»åºååã
  image: harbor.xxxx.com/cicd/sdk/dotnet:8.0
  #image: mcr.microsoft.com/dotnet/sdk:8.0
  script:
    - mkdir -p temp
    # åå¸ä¸º Linux ç¯å¢ç Release å¯æ§è¡æä»¶
    - dotnet publish Test.WebAPI.Net8.Second.csproj -c Release -o temp --runtime linux-x64 --self-contained false
    - pwd
    - ls -al temp
  artifacts:
    when: on_success
    paths:
      - temp/
    expire_in: 30 minutes
  tags:
    - "gitlab-runner-dotnet8-second"
compile-prod-api:
  extends: .compile-op
  rules:
    # - if: '$CI_COMMIT_TAG == null' # æµè¯ç¨
    - if: '$CI_COMMIT_TAG =~ /^v.*/'
  variables:
    MAIN_PROJECT: ${CI_PROJECT_NAME}.csproj  # è¥ä¸»é¡¹ç®åä¸åï¼å¯æå¨æå®

# çäº§ç¯å¢æå»ºä»»å¡
build-prod-api:
  extends: .build-op
  dependencies:
    - compile-prod-api
  rules:
    - if: '$CI_COMMIT_TAG =~ /^v.*/'
  variables:
    DOCKER_IMAGE_NAME: ${DOCKER_IMAGE_PROD}
.build-op:
  stage: build
   #ãéæ¿æ¢ä¸ºç§æä»åºååã
  image: harbor.xxxx.com/base/docker:24.0.7-dind # åä¸å¼å®¹ï¼ç®æ æå¡å¨éè¦å¤§äºç­äºæ­¤çæ¬
  script:
    - ls -al
    - echo "Image name:" ${DOCKER_IMAGE_NAME}
    - docker build -t ${DOCKER_IMAGE_NAME} -f Dockerfile .
    - docker push ${DOCKER_IMAGE_NAME}  # å°éåæ¨éå°ç§æéååº
  tags:
    - "gitlab-runner-dotnet8-second"

# åå¸
deploy-api-prod:
  extends: .deploy-op
  # when: manual # æ è¯ä¸ºæå¨æ§è¡
  rules:
    - if: '$CI_COMMIT_TAG =~ /^v.*/'
  variables:
    DOCKER_COMPOSE_FILE: /data/www/${APP_NAME}/docker-compose.yaml
    SERVER_NAME: ${CI_PROJECT_PATH}
    PORTS: 8777
.deploy-op:
  stage: deploy
  #ãéæ¿æ¢ä¸ºç§æä»åºååã
  image: harbor.xxxx.com/cicd/saltctl-1.0 # ç§æä»åºä¸­ç saltctl å·¥å·
  script:
    - |
      echo "SERVER_NAME=nodegroup:${SERVER_NAME} TAG={TAG} DOCKER_COMPOSE_FILE=${DOCKER_COMPOSE_FILE} IMAGE_NAME=${IMAGE_NAME} PORTS=${PORTS} MODE=${MODE}"
      export JSON="{\"tag\": \"${CI_COMMIT_TAG}\", \"docker_compose_file\": \"${DOCKER_COMPOSE_FILE}\", \"image_name\": \"${IMAGE_NAME}\", \"port\": \"${PORTS}\", \"mode\": \"${MODE}\"}"
      echo $JSON
      saltctl apply -t nodegroup:${SERVER_NAME} -s backend.ecs.docker_compose_update -p  "${JSON}" --batch
  tags:
    - "gitlab-runner-dotnet8-second"</code></pre>
<p>è¿æ ·ä¸ä¸ªç®åçç¤ºä¾é¡¹ç®å°±åå¤å¥½äºã</p>
<h3>1.3 å°é¡¹ç®ä¸ä¼ è³ gitlab</h3>
<p>å¨ gitlab ä¸åå»ºä¸ä¸ªæ°ç blank é¡¹ç®ï¼åå­ä¾å¦ï¼test-dotnet8ã</p>
<p>æ³¨æï¼ä¸è¦å¾éâInitialize repository with a READMEâï¼å ä¸ºå·²ææ¬å°ä»£ç ï¼ãè¥å¾éäº âInitialize repository with a READMEâï¼GitLab ä¼èªå¨åå»ºä¸ä¸ªåå« README.md æä»¶çåå§æäº¤ï¼å³è¿ç¨ä»åºéç©ºï¼ãæ­¤æ¶å¦æç´æ¥å°è¯æ¨éæ¬å°ä»£ç ï¼ä¼éå°å²çªï¼å ä¸ºæ¬å°åè¿ç¨åå²ä¸ä¸è´ï¼ã</p>
<p><img src="https://img2024.cnblogs.com/blog/1868241/202601/1868241-20260114110127055-1320018789.png" alt="image"></p>
<p>è¿å¥å°é¡¹ç®ä¸»ç®å½åï¼æå¼ PowerShellï¼è¾å¥ cmd åè½¦ãæ¥çæ§è¡ä¸é¢å½ä»¤æ¥ä¸ä¼ ä»£ç ã</p>
<pre class="language-nginx highlighter-hljs"><code># åå§å Git
git init
# æ·»å  add æææä»¶ï¼å¹¶æäº¤ commit
git add .
git commit -m èªå®ä¹ææ¬ï¼é¡¹ç®åå§åæäº¤
# æ·»å  GitLab è¿ç¨ä»åºå°å
# æ³¨æï¼éæ¿æ¢ä¸ºå®é GitLab é¡¹ç® HTTPS æ SSH å°å
git remote add origin https://xxxxx.com/oa/test-dotnet8.git
# æ¨éåå¹¶åçä»£ç å° GitLab
# æ³¨æå½ååæ¯æ¯å¦ä¸è¿ç¨åæ¯ç¸åï¼ä¸è¬ä¸º master æè mainï¼ä¸ç¨çè¯éè¦éæ¶åæ¢
git push origin master
# git branch # æ¥çå½ååæ¯
# git checkout main # åæ¢å° main åæ¯
# git pull # æåè¿ç¨åæ¯çåå®¹
# git merge master # åå¹¶æå®åæ¯ä»£ç å°å½ååæ¯
# git push # å°æ¬å°çé¡¹ç®ç¶ææ¨éå°ä»åº</code></pre>
<p>è¥å¨ gitlab åå»ºé¡¹ç®æ¶ï¼å¾éäº âInitialize repository with a READMEâï¼åéè¦å¢å å¦ä¸æä½ï¼&nbsp;</p>
<pre class="language-nginx highlighter-hljs"><code># å¨ push æäº¤ä¹åï¼åæåè¿ç¨åå®¹ï¼è¿ç¨ä¸­å¯è½éè¦æå¨ç»å½ gitlabï¼
# åæ¯åå­ä¸º main æè masterï¼æ³¨ææ ¸å®åæ§è¡
git pull origin master --allow-unrelated-histories
# ç³»ç»ä¼æå¼ç¼è¾å¨ï¼æç¤ºè¾å¥åå¹¶æäº¤ä¿¡æ¯ï¼å¯ç´æ¥ä¿å­éåºï¼å½ä»¤ï¼ã:wqãï¼
# å®æåï¼å¨è¿è¡ push æä½</code></pre>
<h2>äºãLinux ç¯å¢åå¤ï¼CentOS 7ï¼</h2>
<h3>2.1 æ¥çå½åç³»ç»ççæ¬</h3>
<p>ä¸æ¸æ¥å½åç³»ç»çæ¬çè¯ï¼å¯ä»¥éè¿å½ä»¤<code>lsb_release -a</code>æ¥æ¥çï¼å ä¸ºä¸åçæ¬çç³»ç»ä½¿ç¨çç¸å³å½ä»¤å¯è½ä¸åï¼æ¬æç¤ºä¾ååºäº CentOS 7ã</p>
<pre class="language-nginx highlighter-hljs"><code># æ¥çå½åç³»ç»çæ¬
[root@localhost ~]# cat /etc/os-release
cat: /etc/os-releasecat: No such file or directory
NAME="CentOS Linux"
VERSION="7 (Core)"
ID="centos"
ID_LIKE="rhel fedora"
VERSION_ID="7"
PRETTY_NAME="CentOS Linux 7 (Core)"

# æ¥çç¡®è®¤æ¯å¦å®è£è¿ docker
[root@localhost ~]# which docker
/usr/bin/which: no docker in (/usr/lib64/qt-3.3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/usr/local/nginx/sbin:/root/bin)
# æèç´æ¥æ¥è¯¢çæ¬
[root@localhost ~]# docker --version
-bash: docker: command not found
[root@localhost ~]# </code></pre>
<h3>2.2 å®è£ Docker å¹¶æ·»å  deploy ç¨æ·</h3>
<pre class="language-nginx highlighter-hljs"><code># 1. å®è£ yum-utils
sudo yum install -y yum-utils
# 2. æ·»å  Docker å®æ¹ä»åºï¼ä½¿ç¨ yum-config-managerï¼
#   ä½¿ç¨å½åéåæºï¼é¿éäºéåï¼
sudo curl -o /etc/yum.repos.d/docker-ce.repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
#   æèæ¸åå¤§å­¦éå
# sudo curl -o /etc/yum.repos.d/docker-ce.repo https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/centos/docker-ce.repo
# 3. å®è£ Docker
sudo yum install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
# æåéªè¯å®è£æå
[root@localhost ~]# docker --version
Docker version 26.1.4, build 5650f9b

#ãæ¥çç³»ç»ç¨æ·ã
cat /etc/passwd
# åå»ºä¸ç¨é root ç¨æ· + å å¥ docker ç» + éå¶ shell æ´ä¾¿äºæéæ§å¶
# æ·»å ç¨æ· deploy
sudo adduser deploy
sudo usermod -aG docker deploy  # å å¥ docker ç»

#ãç¡®ä¿ Docker æå¡æ­£å¨è¿è¡ã
sudo systemctl status docker
# å¦ææ²¡æè¿è¡ï¼å¯å¨å®ï¼
sudo systemctl start docker
sudo systemctl enable docker  # å¯éï¼å¼æºèªå¯
# å°å½åç¨æ·å å¥ docker ç»ï¼é¿åæ¯æ¬¡ç¨ sudoï¼
sudo usermod -aG docker $USER</code></pre>
<h3>2.3 å®è£ docker-compose</h3>
<pre class="language-nginx highlighter-hljs"><code># å®è£ Docker Compose v2ï¼æ¨èï¼
sudo yum install -y docker-compose-plugin
# æµè¯
docker compose version
# è¾åºï¼Docker Compose version v2.27.1</code></pre>
<p>å¦æä»ç¶éè¦éè¿ docker-compose å½ä»¤æ¥å¤çæå¡ï¼å¯ä»¥åå»ºè½¯è¿æ¥ã</p>
<pre class="language-nginx highlighter-hljs"><code># åç¡®è®¤ docker compose ççå®æä»¶ä½ç½®
ls /usr/libexec/docker/cli-plugins/          # RHEL/CentOS/Rocky å¸¸è§è·¯å¾
ls /usr/local/lib/docker/cli-plugins/        # æå¨å®è£å¸¸è§è·¯å¾
# å¨å¤§å¤æ°éè¿åç®¡çå¨å®è£ Docker ç Linux ç³»ç»ï¼å¦ CentOSãRockyãUbuntuï¼ä¸ï¼Compose V2 æä»¶å®éä½äºï¼
/usr/libexec/docker/cli-plugins/docker-compose
# å¦æå·²ç»åå»ºè¿ï¼éè¦åå é¤éè¯¯çè½¯é¾æ¥
sudo rm -f /usr/local/bin/docker-compose
# åå»ºæ­£ç¡®çè½¯é¾æ¥
sudo ln -s /usr/libexec/docker/cli-plugins/docker-compose /usr/local/bin/docker-compose
# éªè¯ï¼
[root@localhost ~]# docker-compose version
Docker Compose version v2.27.1</code></pre>
<h3>2.4 å° salt ç¨æ·å å¥ docker ç»</h3>
<pre class="language-nginx highlighter-hljs"><code># æ§è¡ä»¥ä¸å½ä»¤ï¼root èº«ä»½ï¼
usermod -aG docker salt
# æ¥ç salt ç¨æ·æå±çç»
groups salt
# è¾åºï¼salt : salt docker

# è¥è¾åºææé®é¢ï¼æ§è¡
[root@www ~]# sudo -i -u salt docker ps
This account is currently not available.
# æ­¤è¾åºï¼è¯´æ salt ç¨æ·çç»å½ shell è¢«è®¾ç½®ä¸º /sbin/nologin æ /usr/sbin/nologin
# è¿æ¯åºäºå®å¨èèçå¸¸è§éç½® ââ Salt ç¨æ·éå¸¸åªç¨äºåå°æå¡ï¼ä¸åè®¸äº¤äºå¼ç»å½ã</code></pre>
<p>å¦æä¸è¿è¡æ­¤æä½ä¼åºç°æ¥éï¼</p>
<pre class="language-nginx highlighter-hljs"><code>permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock</code></pre>
<p>è¿è¯´æ salt ç¨æ·æ²¡ææéè®¿é® Docker å®æ¤è¿ç¨ï¼éè¦å° salt ç¨æ·å å¥ docker ç»ã</p>
<h2>ä¸ãCI/CD èæ¬ä»¥åè§¦å</h2>
<h3>3.1 å³äº docker-compose.yaml</h3>
<p>ç¨ä¸ä¸ª YAML æä»¶æè¿°æ´ä¸ªåºç¨çæå¡ãç½ç»ãå·ãç¯å¢åéç­ï¼éè¿ä¸æ¡å½ä»¤ï¼å¦ docker-compose upï¼ä¸é®å¯å¨/åæ­¢æ´å¥æå¡ã</p>
<p>ç¤ºä¾ï¼</p>
<pre class="language-nginx highlighter-hljs"><code>version: '3.3' 

services:
  test-dotnet8:
    image: harbor.xxxxx.com/oa/test-dotnet8:v1.0 # èªå¨åèæ¬å°±æ¯éè¿ä¿®æ¹è¿ä¸ªæä»¶ä¸­ç v1.0 â v1.1 æ¥å®ç°æ»å¨æ´æ°
    ports:
      - "8777:998"
    volumes:
      - /data/www/test-dotnet8/Log:/app/Log # æ¥å¿æä»¶æä¹å
      #- /data/www/test-dotnet8/appsettings.json:/app/appsettings.json # æ¿æ¢éç½®æä»¶
    networks:
      - test-network

networks:
  test-network:</code></pre>
<table class="qk-md-table">
<thead class="qk-md-table-head">
<tr>
<th data-spm-anchor-id="5176.28103460.0.i12.7c3263088X0xfv"><span class="qk-md-text complete">ä¼å¿</span></th>
<th><span class="qk-md-text complete">è¯´æ</span></th>
</tr>
</thead>
<tbody class="qk-md-table-body">
<tr class="qk-md-table-row">
<td><strong class="qk-md-strong"><span class="qk-md-text complete">ç®åé¨ç½²</span></strong></td>
<td><span class="qk-md-text complete">æ éæå¨æ²&nbsp;</span><code class="qk-md-code">docker run ...</code><span class="qk-md-text complete">&nbsp;å¤æ¡å¤æå½ä»¤</span></td>
</tr>
<tr class="qk-md-table-row">
<td><strong class="qk-md-strong"><span class="qk-md-text complete">ç¯å¢ä¸è´æ§</span></strong></td>
<td><span class="qk-md-text complete">å¼åãæµè¯ãçäº§ä½¿ç¨åä¸ä»½éç½®</span></td>
</tr>
<tr class="qk-md-table-row">
<td><strong class="qk-md-strong"><span class="qk-md-text complete">æå¡ç¼æ</span></strong></td>
<td><span class="qk-md-text complete">èªå¨å¤çä¾èµé¡ºåºï¼å¦åå¯ DB åå¯ Webï¼</span></td>
</tr>
<tr class="qk-md-table-row">
<td><strong class="qk-md-strong"><span class="qk-md-text complete">çæ¬æ§å¶åå¥½</span></strong></td>
<td><span class="qk-md-text complete">YAML æä»¶å¯çº³å¥ Git ç®¡ç</span></td>
</tr>
<tr class="qk-md-table-row">
<td><strong class="qk-md-strong"><span class="qk-md-text complete">ä¸é®å¯å</span></strong></td>
<td><code class="qk-md-code">docker-compose up -d</code><span class="qk-md-text complete">&nbsp;å¯å¨å¨é¨ï¼</span><code class="qk-md-code">down</code><span class="qk-md-text complete">&nbsp;åæ­¢å¹¶æ¸ç</span></td>
</tr>
</tbody>
</table>
<table class="qk-md-table">
<thead class="qk-md-table-head">
<tr>
<th data-spm-anchor-id="5176.28103460.0.i14.7c3263088X0xfv"><span class="qk-md-text complete">å¸¸ç¨å½ä»¤</span></th>
<th><span class="qk-md-text complete">ä½ç¨</span></th>
</tr>
</thead>
<tbody class="qk-md-table-body">
<tr class="qk-md-table-row">
<td><code class="qk-md-code">docker-compose up</code></td>
<td><span class="qk-md-text complete">åå»ºå¹¶å¯å¨æææå¡ï¼åå°è¿è¡ï¼</span></td>
</tr>
<tr class="qk-md-table-row">
<td><code class="qk-md-code">docker-compose up -d</code></td>
<td><span class="qk-md-text complete">åå°å¯å¨ï¼å®æ¤æ¨¡å¼ï¼</span></td>
</tr>
<tr class="qk-md-table-row">
<td><code class="qk-md-code">docker-compose down</code></td>
<td><span class="qk-md-text complete">åæ­¢å¹¶å é¤å®¹å¨ãç½ç»ï¼é»è®¤ä¸å å·ï¼</span></td>
</tr>
<tr class="qk-md-table-row">
<td><code class="qk-md-code">docker-compose pull</code></td>
<td><span class="qk-md-text complete">æåæææå¡çæ°éå</span></td>
</tr>
<tr class="qk-md-table-row">
<td><code class="qk-md-code">docker-compose logs -f web</code></td>
<td><span class="qk-md-text complete">æ¥ç&nbsp;</span><code class="qk-md-code">web</code><span class="qk-md-text complete">&nbsp;æå¡å®æ¶æ¥å¿</span></td>
</tr>
</tbody>
</table>
<p>æ³¨æï¼ç°ä»£ Docker å·²åç½® Compose æä»¶ï¼ä¹å¯ç¨ docker composeï¼ç©ºæ ¼ï¼ä»£æ¿ docker-composeï¼è¿å­ç¬¦ï¼ãè¥å½åç¯å¢ä»ä¸º docker-compose å½ä»¤ï¼åå¯ä»¥åå»ºè½¯é¾æ¥ï¼è§æ¬æ 2.3ã</p>
<h3>3.2 éç½® Runner</h3>
<pre class="language-nginx highlighter-hljs"><code>## ãå®è£ GitLab Runnerã
# æ£æ¥æ¯å¦å·²å®è£
which gitlab-runner
## å¯¹äº CentOS / RHEL / Rocky Linuxï¼
# æ·»å å®æ¹ä»åº
curl -L https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.rpm.sh | sudo bash
# å®è£
sudo yum install -y gitlab-runner
## å¯¹äº Ubuntu / Debianï¼
# æ·»å å®æ¹ä»åº
# curl -L https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.deb.sh | sudo bash
# å®è£
# sudo apt-get install -y gitlab-runner

## ãæ³¨å Runnerï¼è¿æ¥å°ç GitLab é¡¹ç®ï¼ã
sudo gitlab-runner register
# ææç¤ºè¾å¥å¯¹åºçåå®¹ï¼
# Enter the GitLab instance URL (for example, https://gitlab.com/): ## GitLab å°å
# Enter the registration token: ## é¡¹ç® â Settings â CI/CD â Runners â Project registration token
# Enter a description for the runner: ## æè¿° Runner ç¨é
# Enter tags for the runner (comma-separated): ## æ ç­¾ï¼ç¨äº .gitlab-ci.yml ä¸­æå®ä»»å¡ç±è°æ§è¡
# Enter optional maintenance note for the runner: ## å¯éï¼ç¨äºè®°å½ç»´æ¤ä¿¡æ¯ï¼å¦è´è´£äººãå°ææ¶é´ï¼
# Enter an executor: instance, shell, virtualbox, docker, docker+machine, kubernetes, custom, ssh, parallels, docker-windows, docker-autoscaler:
    ## è¿æ¯æå³é®çä¸æ­¥ï¼éæ©éè¯¯ä¼å¯¼è´é¨ç½²å¤±è´¥ãshellï¼ç´æ¥å¨å®¿ä¸»æºæ§è¡å½ä»¤
    ## éè¦å¨ å½åæå¡å¨ ä¸ç´æ¥æä½ docker-composeï¼shell æ¯æç®åãæå¯é çæ¹å¼
# Enter the default Docker image (for example, ruby:3.3): 
    ## ä»å½ executor = docker æ¶æéè¦å¡«å
    ## éæ©äº shellï¼è¿ä¸æ­¥ä¸ä¼åºç°ï¼GitLab Runner ä¼èªå¨è·³è¿ï¼
# æ³¨åæåçæ å¿ï¼
Runner registered successfully. Feel free to start it, but if it''s running already the config should be automatically reloaded!
Configuration (with the authentication token) was saved in "/etc/gitlab-runner/config.toml" 

## ãå¯å¨å¹¶å¯ç¨æå¡ã
# éå¯
sudo systemctl enable --now gitlab-runner
#éªè¯ç¶æï¼
sudo systemctl status gitlab-runner
#ååºå·²æ³¨åç Runnerï¼
sudo gitlab-runner list

## ãç¡®ä¿ gitlab-runner ç¨æ·è½è¿è¡ Dockerã
# å° gitlab-runner ç¨æ·å å¥ docker ç»
sudo usermod -aG docker gitlab-runner
# éå¯ gitlab-runner æå¡ä½¿ç»çæ
sudo systemctl restart gitlab-runner
# éªè¯
sudo -u gitlab-runner docker info</code></pre>
<p data-spm-anchor-id="5176.28103460.0.i161.96a0755129mDo3">å¨æ³¨å GitLab Runner æ¶éæ© --executor "docker"ï¼å¹¶ä¸æå¡å¨ä¸å·²å®è£ Dockerï¼Runner å°±ä¼å¨æ¯æ¬¡ CI/CD ä»»å¡ä¸­å¯å¨ä¸ä¸ªä¸´æ¶ç Docker å®¹å¨æ¥æ§è¡ .gitlab-ci.yml ä¸­å®ä¹çå½ä»¤ï¼æ¯å¦ dotnet buildãdocker build ç­ï¼ãè¿ç§æ¹å¼æ¯ shell æ´å®å¨ãæ´å¹²åï¼æ¯æ¬¡æå»ºç¯å¢éç¦»ï¼ï¼æ¯å®æ¹æ¨èåæ³ã</p>
<pre class="language-nginx highlighter-hljs"><code>## æ³¨å Runner çå®æè®°å½
[root@localhost ~]# sudo gitlab-runner register
Runtime platform                                    arch=amd64 os=linux pid=6402 revision=9ffb4aa0 version=18.8.0
Running in system-mode.                            
                                                   
Enter the GitLab instance URL (for example, https://gitlab.com/):
https://&lt;--&gt;.&lt;--&gt;.com/
Enter the registration token:
GR134....S234S
Enter a description for the runner:
[localhost.localdomain]: test-dotnet8-second
Enter tags for the runner (comma-separated):
gitlab-runner-dotnet8-second
Enter optional maintenance note for the runner:
dotnet
WARNING: Support for registration tokens and runner parameters in the 'register' command has been deprecated in GitLab Runner 15.6 and will be replaced with support for authentication tokens. For more information, see https://docs.gitlab.com/ci/runners/new_creation_workflow/ 
Registering runner... succeeded                     correlation_id=01KFCRRD7BR00AF88M86JR1HX4 runner=VmoeA351T
Enter an executor: instance, custom, ssh, docker+machine, kubernetes, shell, parallels, virtualbox, docker, docker-windows, docker-autoscaler:
shell
Runner registered successfully. Feel free to start it, but if it's running already the config should be automatically reloaded!
 
Configuration (with the authentication token) was saved in "/etc/gitlab-runner/config.toml" 
[root@localhost ~]# </code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1868241/202601/1868241-20260120162915288-609463997.png" alt="image"></p>
<h3>3.3 CI å CD æ¨èä½¿ç¨ä¸åç Runner</h3>
<p>å¨ææ¯å±é¢ï¼ä¸¤ä¸ªæ­¥éª¤æ¯å¯ä»¥å±ç¨åä¸ä¸ª RunnerãRunner æ¬è´¨æ¯ä»»å¡æ§è¡å¨ï¼åªè¦å®å·å¤è¿è¡ CI å CD æéçå·¥å·ãæéåç½ç»è®¿é®è½åï¼ä¸ä¸ª Runner å®å¨å¯ä»¥åæ¶æ§è¡ CI å CD ç jobãå¤§å¤æ° CI/CD ç³»ç»ï¼å¦ GitLab CIãGitHub Actionsï¼å¹¶ä¸å¼ºå¶åºå CI Runner å CD Runnerã</p>
<p>CIï¼æç»­éæï¼å CDï¼æç»­é¨ç½²/äº¤ä»ï¼æ¯å¦éè¦ä½¿ç¨ä¸¤ä¸ªä¸åç Runnerï¼ä¸æ¯å¼ºå¶è¦æ±ï¼ä½å¨å¾å¤å®éåºæ¯ä¸­æ¨èåå¼ãä»¥ä¸æ¯å ä¸ªç®åçåå ï¼</p>
<table class="qk-md-table" style="width: 65.0454%">
<thead class="qk-md-table-head">
<tr>
<th style="width: 12.1995%" data-spm-anchor-id="5176.28103460.0.i140.3ccb6308k6UJRt"><span class="qk-md-text complete" data-spm-anchor-id="5176.28103460.0.i142.3ccb6308k6UJRt">åå </span></th>
<th style="width: 87.8005%"><span class="qk-md-text complete">è¯´æ</span></th>
</tr>
</thead>
<tbody class="qk-md-table-body">
<tr class="qk-md-table-row">
<td style="width: 12.1995%"><strong class="qk-md-strong"><span class="qk-md-text complete">å®å¨éç¦»</span></strong></td>
<td style="width: 87.8005%"><span class="qk-md-text complete">CD é¶æ®µéå¸¸æ¶åçäº§ç¯å¢å¯é¥ãé¨ç½²æéãè¥ CI Runner è¢«æ±¡æï¼å¦è¿è¡äºæ¶æ PRï¼ï¼å¯è½å±åçäº§ç³»ç»ã</span></td>
</tr>
<tr class="qk-md-table-row">
<td style="width: 12.1995%"><strong class="qk-md-strong"><span class="qk-md-text complete">æéæå°å</span></strong></td>
<td style="width: 87.8005%"><span class="qk-md-text complete">CI Runner åªéç¼è¯/æµè¯æéï¼CD Runner éè¦è®¿é®çäº§ APIãK8s éç¾¤ç­ãéµå¾ªâæå°æéååâã</span></td>
</tr>
<tr class="qk-md-table-row">
<td style="width: 12.1995%" data-spm-anchor-id="5176.28103460.0.i141.3ccb6308k6UJRt"><strong class="qk-md-strong"><span class="qk-md-text complete">ç½ç»éç¦»</span></strong></td>
<td style="width: 87.8005%"><span class="qk-md-text complete">çäº§é¨ç½²æºå¨å¯è½ä½äºåç½æ DMZ åºï¼è CI æå»ºå¯å¨å¬ç½æå¼åç½ç»å®æã</span></td>
</tr>
<tr class="qk-md-table-row">
<td style="width: 12.1995%"><strong class="qk-md-strong"><span class="qk-md-text complete">ç¯å¢å·®å¼</span></strong></td>
<td style="width: 87.8005%"><span class="qk-md-text complete">CI å¯è½å¨å¹²åå®¹å¨ä¸­è¿è¡ï¼CD å¯è½éè¦ç¹å®å·¥å·ï¼å¦&nbsp;</span><code class="qk-md-code">kubectl</code><span class="qk-md-text complete">ã</span><code class="qk-md-code">aws-cli</code><span class="qk-md-text complete">ãAnsibleï¼ã</span></td>
</tr>
<tr class="qk-md-table-row">
<td style="width: 12.1995%"><strong class="qk-md-strong"><span class="qk-md-text complete">å®¡è®¡ä¸è¿½è¸ª</span></strong></td>
<td style="width: 87.8005%"><span class="qk-md-text complete">åå¼åæ´å®¹æçæ§âè°é¨ç½²äºä»ä¹âï¼ç¬¦ååè§è¦æ±ï¼å¦ ISO 27001ãSOC2ï¼ã</span></td>
</tr>
</tbody>
</table>
<p>å¸¸è§çåºæ¯åå»ºè®®ä½¿ç¨ç Runner ä¸ªæ°ï¼</p>
<table class="qk-md-table">
<thead class="qk-md-table-head">
<tr>
<th><span class="qk-md-text complete" data-spm-anchor-id="5176.28103460.0.i152.3ccb6308k6UJRt">åºæ¯</span></th>
<th><span class="qk-md-text complete">æ¯å¦éè¦å¤ä¸ª Runner</span></th>
<th><span class="qk-md-text complete">è¯´æ</span></th>
</tr>
</thead>
<tbody class="qk-md-table-body">
<tr class="qk-md-table-row">
<td><span class="qk-md-text complete">åä¸è¯­è¨é¡¹ç®ï¼å¦çº¯ .netï¼</span></td>
<td><span class="qk-md-text complete">1 ä¸ªå³å¯</span></td>
<td><span class="qk-md-text complete">åªéä¸ä¸ªè½è¿è¡ .net çç¯å¢</span></td>
</tr>
<tr class="qk-md-table-row">
<td><span class="qk-md-text complete">å¤å¹³å°æå»ºï¼Windows + Linux + macOSï¼</span></td>
<td><span class="qk-md-text complete">â¥3 ä¸ª</span></td>
<td><span class="qk-md-text complete">æ¯ä¸ªå¹³å°éå¸¸éè¦ç¬ç«ç Runner</span></td>
</tr>
<tr class="qk-md-table-row">
<td><span class="qk-md-text complete">å¤è¯­è¨é¡¹ç®ï¼åç«¯ + åç«¯ + ç§»å¨ç«¯ï¼</span></td>
<td><span class="qk-md-text complete">â¥2ï½3 ä¸ª</span></td>
<td><span class="qk-md-text complete">å¦ Node.jsã.netãSwift ç¯å¢éç¦»</span></td>
</tr>
<tr class="qk-md-table-row">
<td><span class="qk-md-text complete">å®å¨éç¦»ï¼å¦çäº§é¨ç½² vs æµè¯ï¼</span></td>
<td><span class="qk-md-text complete">â¥2 ä¸ª</span></td>
<td><span class="qk-md-text complete">é¿åæææä½å¨éç¨ Runner ä¸æ§è¡</span></td>
</tr>
<tr class="qk-md-table-row">
<td><span class="qk-md-text complete">å¹¶è¡ä»»å¡å é</span></td>
<td><span class="qk-md-text complete">å¤ä¸ªç¸åç±»å Runner</span></td>
<td><span class="qk-md-text complete">æé«å¹¶åè½åï¼ä½ç±»åå¯è½ç¸å</span></td>
</tr>
</tbody>
</table>
<p>æä½³å®è·µï¼å³ä½¿åæå±ç¨ï¼ä¹è¦å¨æ¶æä¸é¢çåç¦»è½åï¼å¦éè¿ tags æ§å¶ï¼ï¼éçé¡¹ç®æçéæ­¥éç¦»ã</p>
<h3>3.4 è§¦å Pipeline æ§è¡</h3>
<p>å¸¸è§çè§¦åæ¡ä»¶æï¼</p>
<pre class="language-nginx highlighter-hljs"><code>#ãä»å¨æ¨éå°ç¹å®åæ¯æ¶è§¦åã
rules:
  - if: '$CI_COMMIT_BRANCH == "main"'
#ãä»å¨æ Tag æ¶è§¦åï¼å¦åå¸çæ¬ï¼ã
rules:
  - if: '$CI_COMMIT_TAG != null'
rules:
  - if: '$CI_COMMIT_TAG =~ /^v.*/' # tag ä»¥å­æ¯ v å¼å¤´å°±è§¦å
rules:
  - if: '$CI_COMMIT_TAG == null' # é¤äºæäº¤ tag ä¹å¤çæä½è§¦å
#ãå¨ Merge Requestï¼MRï¼ä¸­è§¦åã
# ç¨äºè¿è¡ PR/MR ä¸­çæµè¯ãä»£ç æ«æï¼éå¸¸ä¸åå«é¨ç½²å°çäº§
rules:
  - if: '$CI_MERGE_REQUEST_ID'
#ãæå¨è§¦åï¼éè¿ UI æ APIï¼ã
# å¶ä»æ¥æºè¿åæ¬ï¼"push"ï¼ä»£ç æ¨éã"schedule"ï¼å®æ¶ä»»å¡ã"api"ï¼API è°ç¨ã"trigger"ï¼è·¨é¡¹ç®è§¦å
# å¯ç¨äºâç´§æ¥ä¿®å¤âæâéè¯é¨ç½²â
rules:
  - if: '$CI_PIPELINE_SOURCE == "web"'
#ãæé¤æäºæåµï¼ç»å when: neverï¼ã
rules:
  - if: '$CI_COMMIT_BRANCH == "dev"'
    when: never   # dev åæ¯ä¸è¿è¡æ­¤ job
  - when: always  # å¶ä»æåµé½è¿è¡</code></pre>
<h3>3.5 å¦æä¿®æ¹äº docker-compose.yml ä¸­ç service åç§°</h3>
<p>è¥å¨ docker-compose.yml ä¸­ ä¿®æ¹äº service åç§°ï¼ä¾å¦ä» web æ¹ä¸º apiï¼ï¼Docker Compose ä¼å°å¶è§ä¸º ä¸ä¸ªå¨æ°çæå¡ï¼èæ§çæå¡ä¼è¢«è®¤ä¸ºæ¯âå­¤å¿âï¼orphanedï¼ãå¦æä¸æ­£ç¡®å¤çï¼ä¼å¯¼è´ï¼å®¹å¨æ®çï¼æ§æå¡è¿å¨è¿è¡ï¼ãç½ç»/å·å²çªãèµæºæªéæ¾ãé¨ç½²å¤±è´¥ï¼å¦ä½ ä¹åéå°ç âhas active endpointsâ éè¯¯ï¼ã</p>
<p>æ¨èä½¿ç¨ï¼ --remove-orphans æ¹å¼ï¼è¿æ¯æç®åãæå®å¨çæ¹å¼ã</p>
<p>å®å¯ä»¥ï¼å¯å¨æ° serviceï¼new_serviceï¼ï¼èªå¨åæ­¢å¹¶å é¤ä¸ååºç°å¨ compose æä»¶ä¸­çæ§ serviceï¼old_serviceï¼ï¼ä¿çæ°æ®å·ï¼é¤éä½ é¢å¤å  --volumesï¼ã</p>
<p>å¦ä¸ç¤ºä¾ï¼åè¿å¥é¡¹ç®ä¸»ç®å½ï¼åä½¿ç¨ docker-compose å½ä»¤ï¼</p>
<pre class="language-nginx highlighter-hljs"><code>[root@www ~]# cd /data/www/test-dotnet8
[root@www test-dotnet8]# docker-compose up -d --remove-orphans
Creating testdotnet8_test-dotnet8_1 ... done
[root@www test-dotnet8]# </code></pre>
<p>å½ä»¤æ§è¡æååï¼åéæ°è§¦å cd è¿ç¨å°±ä¼é¡ºå©æ§è¡ã</p>
<h2>åãSaltStack</h2>
<h3>4.1 ç®ä»</h3>
<p>SaltStackï¼éå¸¸ç®ç§°ä¸º Saltï¼æ¯ä¸ä¸ªå¼æºçãåºäº Python çèªå¨åè¿ç»´å·¥å·ï¼ç¨äºéç½®ç®¡çãè¿ç¨æ§è¡ãçæ§åç¼æãå®ä»¥é«æ§è½ãå¯æ©å±æ§åçµæ´»æ§èç§°ï¼ç¹å«éåç®¡çå¤§è§æ¨¡åºç¡è®¾æ½ã</p>
<ul>
<li><strong>SaltStack çæ ¸å¿ç¹ç¹</strong></li>
</ul>
<p>é«ééä¿¡ï¼ä½¿ç¨ ZeroMQï¼æ TCPï¼ä½ä¸ºæ¶æ¯æ»çº¿ï¼å®ç°æä½å»¶è¿çå½ä»¤ååã</p>
<p>å¹¶è¡æ§è¡ï¼æ¯ææ°åå°ä¸»æºåæ¶æ§è¡å½ä»¤ã</p>
<p>çµæ´»æ¶æï¼Master/Minion æ¨¡å¼ï¼ä¸»ä»æ¨¡å¼ï¼ãMasterless æ¨¡å¼ï¼æ ä¸»æ¨¡å¼ï¼éç¨äºè¾¹ç¼æä¸´æ¶ç¯å¢ï¼ã</p>
<p>å£°æå¼ä¸å½ä»¤å¼ç»åï¼ä½¿ç¨ YAML ç¼åç¶æï¼Stateï¼æä»¶è¿è¡å£°æå¼éç½®ãæ¯æå³æ¶å½ä»¤æ§è¡ï¼å¦ salt '*' cmd.run 'uptime'ï¼ã</p>
<p>ä¸°å¯çæ¨¡åç³»ç»ï¼åç½®æ°ç¾ä¸ªæ§è¡æ¨¡åï¼execution modulesï¼åç¶ææ¨¡åï¼state modulesï¼ï¼æ¶µçæä»¶ãæå¡ãåç®¡çãç¨æ·ãç½ç»ç­ã</p>
<p>äºä»¶é©±å¨æ¶æï¼æ¯æ Reactor ç³»ç»ï¼å¯æ ¹æ®äºä»¶èªå¨è§¦åå¨ä½ï¼å¦èªå¨ååºæéãèªå¨æ©å®¹ç­ï¼ã</p>
<p>å®å¨å¯é ï¼åºäº AES å å¯éä¿¡ãMinion éè¦å Master è¯·æ±è®¤è¯ï¼å¬é¥äº¤æ¢ï¼ãæ¯æç»ç²åº¦æéæ§å¶ï¼éè¿ external_auth å Pillarï¼ã</p>
<ul>
<li><strong>SaltStack æ¶æä¸»è¦ç± Master å Minion ç»æ</strong></li>
</ul>
<p>Masterï¼æ§å¶ä¸­å¿ï¼è´è´£ä¸åæä»¤ãå­å¨éç½®ï¼StatesãPillarï¼ãç®¡ç Minion åè¡¨ãéå¸¸é¨ç½²å¨ä¸å°æå¤å°é«å¯ç¨æå¡å¨ä¸ã<br>Minionï¼å®è£å¨è¢«ç®¡çèç¹ä¸çä»£çç¨åºãæ¥æ¶ Master æä»¤ï¼æ§è¡ä»»å¡å¹¶è¿åç»æãæ¯ä¸ª Minion æå¯ä¸ IDï¼é»è®¤ä¸ºä¸»æºåï¼ã</p>
<p>å½ç¶ï¼æµè¯ç¯å¢å¯ä»¥å°ä¸¤èå®è£å¨åä¸å°ä¸»æºã</p>
<table class="qk-md-table">
<thead class="qk-md-table-head">
<tr>
<th data-spm-anchor-id="5176.28103460.0.i22.53547551VdbUH2"><span class="qk-md-text complete">æ¦å¿µ</span></th>
<th><span class="qk-md-text complete">è¯´æ</span></th>
</tr>
</thead>
<tbody class="qk-md-table-body">
<tr class="qk-md-table-row">
<td><strong class="qk-md-strong"><span class="qk-md-text complete">Grains</span></strong></td>
<td><span class="qk-md-text complete">Minion çéæåæ°æ®ï¼å¦æä½ç³»ç»ãCPUãIP å°åç­ï¼ï¼ç¨äºç®æ å¹éåæ¡ä»¶å¤æ­ã</span></td>
</tr>
<tr class="qk-md-table-row">
<td><strong class="qk-md-strong"><span class="qk-md-text complete">Pillar</span></strong></td>
<td><span class="qk-md-text complete">æææå¨æçéç½®æ°æ®ï¼ç± Master æä¾ï¼ä»å¯¹ç¹å® Minion å¯è§ï¼ç±»ä¼¼ Ansible ç Vault + varsï¼ã</span></td>
</tr>
<tr class="qk-md-table-row">
<td><strong class="qk-md-strong"><span class="qk-md-text complete">State</span></strong></td>
<td><span class="qk-md-text complete">å£°æå¼éç½®æä»¶ï¼</span><code class="qk-md-code">.sls</code><span class="qk-md-text complete">ï¼ï¼å®ä¹ç³»ç»åºå¤äºçç¶æï¼å¦âç¡®ä¿ Nginx å·²å®è£å¹¶è¿è¡âï¼ã</span></td>
</tr>
<tr class="qk-md-table-row">
<td><strong class="qk-md-strong"><span class="qk-md-text complete">Top File</span></strong></td>
<td><span class="qk-md-text complete">(</span><code class="qk-md-code">top.sls</code><span class="qk-md-text complete">) å®ä¹åªäº Minion åºç¨åªäº Stateã</span></td>
</tr>
<tr class="qk-md-table-row">
<td><strong class="qk-md-strong"><span class="qk-md-text complete">Execution Module</span></strong></td>
<td><span class="qk-md-text complete">å³æ¶æ§è¡çå½ä»¤æ¨¡åï¼å¦&nbsp;</span><code class="qk-md-code">cmd.run</code><span class="qk-md-text complete">,&nbsp;</span><code class="qk-md-code">pkg.install</code><span class="qk-md-text complete">ï¼ã</span></td>
</tr>
<tr class="qk-md-table-row">
<td><strong class="qk-md-strong"><span class="qk-md-text complete">Reactor</span></strong></td>
<td><span class="qk-md-text complete">ååºäºä»¶ï¼å¦ Minion ä¸çº¿ãæå¡å´©æºï¼èªå¨è§¦åå¨ä½ã</span></td>
</tr>
</tbody>
</table>
<ul>
<li><strong>åºæ¬å·¥ä½æµç¨ï¼Master/Minion æ¨¡å¼ï¼</strong></li>
</ul>
<p>1ï¼å®è£ Salt Master å Minionã<br>2ï¼Minion å¯å¨åå Master åéå¬é¥è¯·æ±ã<br>3ï¼Master æ¥å Minion çå¯é¥ï¼salt-key -Aï¼ã<br>4ï¼ç¨æ·å¨ Master ä¸ç¼å State æä»¶æç´æ¥æ§è¡å½ä»¤ã<br>5ï¼Master å°ä»»å¡æ¨éç»æå® Minionã<br>6ï¼Minion æ§è¡ä»»å¡å¹¶è¿åç»æï¼JSON æ ¼å¼ï¼ã<br>7ï¼ç»ææ±æ»æ¾ç¤ºå¨ Master ç»ç«¯ææ¥å¿ä¸­ã</p>
<h3>4.2 å° SaltStack ç salt å½ä»¤ï¼å°è£æ saltctl</h3>
<p>saltctl ç®æ ç¨æ³ï¼<code>saltctl apply -t nodegroup:SERVERNAME -s STATE -p '{"json": "data"}' --batch BATCH_SIZE</code>ã</p>
<h4>4.2.1 å®è£ master å minionï¼å¹¶éç½®è¿æ¥ï¼åºäº CentOSï¼</h4>
<pre class="language-nginx highlighter-hljs"><code># å®è£
sudo yum install epel-release -y # éåå¯ç¨ EPEL
sudo yum install salt-master salt-minion
# å¯å¨å¹¶å¯ç¨æå¡
sudo systemctl enable --now salt-master
sudo systemctl enable --now salt-minion
# éç½® Minion æåæ¬å° Master
sudo vim /etc/salt/minion
# ä¿®æ¹ master å id
# é»è®¤æåµä¸ï¼Minion ä¼å°è¯è¿æ¥ localhostï¼ä½æ¾å¼éç½®æ´å¯é 
# master: localhost
#  # æä½¿ç¨ 127.0.0.1
#  # master: 127.0.0.1
# id: local-salt-minion # å¯éï¼è®¾ç½®å¯ä¸ç minion IDï¼å»ºè®®æ¾å¼æå®ï¼é¿åä¸»æºåååå¯¼è´é®é¢ï¼
# éå¯ Minion æå¡
systemctl restart salt-minion
# å¨ Master ä¸æ¥å Minion çå¯é¥
salt-key -L          # æ¥çå¾æ¥åå¯é¥
salt-key -a local-salt-minion         # æ¥åè¯¥ Minion
# æµè¯è¿æ¥
sudo salt 'local-salt-minion' test.ping # æééç¬¦å½ä»¤ï¼sudo salt '*' test.ping
# æ­£ç¡®è¿åï¼
# local-salt-minion:
#     True

# æµè¯ï¼
[root@www ~]# sudo salt-key -L 
Accepted Keys:
Denied Keys:
Unaccepted Keys:
local-salt-minion
Rejected Keys:
[root@www ~]# sudo salt-key -A
The following keys are going to be accepted:
Unaccepted Keys:
local-salt-minion
Proceed? [n/Y] y
Key for minion local-salt-minion accepted.
[root@www ~]# sudo salt '*' test.ping
local-salt-minion:
    True</code></pre>
<p><span style="background-color: rgba(251, 238, 184, 1)"><strong>æ¥éå¤çï¼</strong><code><span class="token">[</span><span class="token level error">ERROR</span><span class="token">]</span> <span class="token" data-spm-anchor-id="5176.28103460.0.i230.6f7d63085XAT6G">Unable to sign_in to master:</span> Invalid master key</code>ã</span></p>
<pre class="language-nginx highlighter-hljs"><code>[ERROR] Unable to sign_in to master: Invalid master key
[ERROR] The master key has changed, the salt master could have been subverted...
[CRITICAL] The Salt Master server's public key did not authenticate!</code></pre>
<p><span class="qk-md-text complete" data-spm-anchor-id="5176.28103460.0.i233.6f7d63085XAT6G">Salt åºäºå®å¨èèï¼</span><strong class="qk-md-strong complete"><span class="qk-md-text complete">æç»è¿æ¥å¬é¥å·²åæ´ç Master</span></strong><span class="qk-md-text complete">ï¼é²æ­¢ä¸­é´äººæ»å»ãå æ­¤ä¹ä¸å»ºè®®é¢ç¹éè£ Masterã</span></p>
<p>&nbsp;è§£å³æ¹æ¡ï¼æ¸é¤ Minion ç¼å­ç Master å¬é¥å¹¶éå¯ã</p>
<pre class="language-nginx highlighter-hljs"><code>## åæ­¢ salt-minion æå¡
sudo systemctl stop salt-minion
## å é¤ Minion ç¼å­ç Master å¬é¥
sudo rm -f /etc/salt/pki/minion/minion_master.pub
# æ³¨æï¼ä¸è¦å é¤ minion.pem å minion.pubï¼è¿æ¯ Minion èªå·±çå¯é¥ï¼ï¼åªå  minion_master.pub
## ç¡®ä¿ Master å·²å¯å¨å¹¶çæå¯é¥
sudo systemctl start salt-master
ls /etc/salt/pki/master/master.pub # ç¡®è®¤ master key å­å¨
## éæ°å¯å¨ Minion
sudo systemctl start salt-minion
# æ­¤æ¶ Minion ä¼ï¼
# ä»æ¬å° Masterï¼localhostï¼è·åæ°çå¬é¥
# èªå¨ä¿å­ä¸º /etc/salt/pki/minion/minion_master.pub
# åèµ·è®¤è¯è¯·æ±ï¼çææ°ç minion.pubï¼
## å¨ Master ä¸æ¥å Minion å¯é¥
sudo salt-key -L          # æ¥ç Unaccepted Keys
sudo salt-key -a &lt;your-minion-id&gt;   # æ sudo salt-key -A æ¥åå¨é¨
# è¥å¨ /etc/salt/minion ä¸­è®¾ç½®äº id: my-local-minionï¼è¿éå°±ç¨ my-local-minion
## æµè¯è¿æ¥
sudo salt '*' test.ping
# åºè¿å Trueã</code></pre>
<h4>4.2.2 éç½® Nodegroup</h4>
<pre class="language-nginx highlighter-hljs"><code># å¨ Master ç /etc/salt/master ä¸­ä¿®æ¹ï¼
nodegroups:
  oa/test-dotnet8: 'L@local-salt-minion'
# ç¶åéå¯ salt-master
systemctl restart salt-master</code></pre>
<h4>4.2.3 ç¡®ä¿ State æä»¶å­å¨ï¼æ²¡æå°±åå»º</h4>
<p>å¦ä¸è·¯å¾ï¼<code>/srv/salt/backend/ecs/docker_compose_update.sls</code>ãæä»¶åå®¹å¦ä¸ï¼</p>
<pre class="language-nginx highlighter-hljs"><code>{% set service_name = pillar.get('service_name', 'app') %}
{% set image_tag = pillar.get('image_tag', 'latest') %}
{% set compose_dir = '/data/www/' + service_name %}

# 1. ç¡®ä¿ docker-compose å·²å®è£ï¼éè¿ pip æåç®¡çå¨ï¼
docker-compose:
  pkg.installed:
    - name: docker-compose
    # æä½¿ç¨ pipï¼å¦æç³»ç»åå¤ªæ§ï¼ï¼
    # - names:
    #   - python3-pip
    # - reload_modules: true
  # å¦æç¨ pip å®è£ï¼
  # pip.installed:
  #   - name: docker-compose
  #   - require:
  #     - pkg: python3-pip

# 2. æ´æ° docker-compose æå¡
update_docker_compose_{{ service_name }}:
  cmd.run:
    - name: |
        cd {{ compose_dir }} &amp;&amp; \
        docker-compose pull &amp;&amp; \
        docker-compose up -d
    - require:
      - pkg: docker-compose   # ç°å¨æè¿ä¸ª ID äºï¼
      # - file: /data/www/test-dotnet8/docker-compose.yml   # å¯éï¼ç¡®ä¿ compose æä»¶å­å¨</code></pre>
<h4>4.2.4 å°è£æèªå·±ç saltctl èæ¬</h4>
<p>åå»º saltctl æä»¶ï¼è·¯å¾ï¼<code>/usr/local/bin/saltctl</code>ã</p>
<pre class="language-nginx highlighter-hljs"><code>#!/usr/bin/bash

# ç¨æ³: saltctl apply -t nodegroup:NAME -s STATE -p '{"json": "data"}' --batch BATCH_SIZE

TEMP=$(getopt -o t:s:p: --long batch: -n 'saltctl' -- "$@")
eval set -- "$TEMP"

TARGET=""
STATE=""
PILLAR=""
BATCH="100%"  # é»è®¤å¨é

while true; do
  case "$1" in
    -t) TARGET="$2"; shift 2 ;;
    -s) STATE="$2"; shift 2 ;;
    -p) PILLAR="$2"; shift 2 ;;
    --batch) BATCH="$2"; shift 2 ;;
    --) shift; break ;;
    *) echo "Invalid option"; exit 1 ;;
  esac
done

# æ£æ¥æ¯å¦ä¸º nodegroup
if [[ "$TARGET" == nodegroup:* ]]; then
  NODEGROUP="${TARGET#nodegroup:}"
  echo "Applying state '$STATE' to nodegroup '$NODEGROUP' with batch=$BATCH"
  exec salt -N "$NODEGROUP" state.apply "$STATE" pillar="$PILLAR" batch="$BATCH"
else
  echo "Only nodegroup targets supported in this wrapper"
  exit 1
fi</code></pre>
<p>éè¿å½ä»¤<code>chmod +x /usr/local/bin/saltctl</code>èµäº saltctl æ§è¡æéã</p>
<p><span style="background-color: rgba(251, 238, 184, 1)">æ¥éå¤çï¼<code>/usr/local/bin/saltctl: line 1: #!/bin/bash: No such file or directory</code>ã</span></p>
<p>æ ¹æ¬åå ï¼ç³»ç»ä¸­æ²¡æ /bin/bashï¼æè bash å®è£å¨å¶ä»ä½ç½®ï¼å¦ /usr/bin/bashï¼ãè¿å¨æäºç²¾ç® Linux åè¡çï¼å¦ Alpineãé¨åå®¹å¨éåãæå°å CentOS/Debianï¼ä¸­å¾å¸¸è§ã</p>
<p>è§£å³æ¹å¼ï¼</p>
<pre class="language-nginx highlighter-hljs"><code># ç¡®è®¤ bash æ¯å¦å®è£ï¼ä»¥åå®éè·¯å¾
which bash
# è¥ç³»ç»æ bashï¼ä½å¨ /usr/bin/bashï¼ä¿®æ¹èæ¬ç¬¬ä¸è¡ä¸ºï¼#!/usr/bin/bash
# è¥æ ï¼åæå¨å®è£
yum install -y bash

# å¦å¤ï¼ä¹æå¯è½æ¯æä»¶å¼å¤´æç¹æ®å­ç¬¦
# æ¥çæ¯å¦æç¹æ®å­ç¬¦
cat -A /usr/local/bin/saltctl
# ä¾å¦ï¼M-oM-;M-?#!/usr/bin/bash$
# æå¨å é¤
sed -i '1s/^\xEF\xBB\xBF//' /usr/local/bin/saltctl</code></pre>
<h4>4.2.5 æµè¯ä½¿ç¨ saltctl</h4>
<pre class="language-nginx highlighter-hljs"><code>[root@www ~]# salt 'local-salt-minion' state.apply backend.ecs.docker_compose_update  pillar='{"image_tag":"v2.10","service_name":"test-dotnet8"}'
local-salt-minion:
----------
          ID: docker-compose
    Function: pkg.installed
      Result: True
     Comment: All specified packages are already installed
     Started: 17:27:51.007951
    Duration: 367.442 ms
     Changes:   
----------
          ID: update_docker_compose_test-dotnet8
    Function: cmd.run
        Name: cd /data/www/test-dotnet8 &amp;&amp; \
docker-compose pull &amp;&amp; \
docker-compose up -d

      Result: True
     Comment: Command "cd /data/www/test-dotnet8 &amp;&amp; \
              docker-compose pull &amp;&amp; \
              docker-compose up -d
              " run
     Started: 17:27:51.376588
    Duration: 3910.754 ms
     Changes:   
              ----------
              pid:
                  2100
              retcode:
                  0
              stderr:
                  Pulling test-dotnet8 (harbor.xxxx.com/oa/test-dotnet8:v2.08)...
                  Starting testdotnet8_test-dotnet8_1 ... 
                  ?[1A?[2K
                  Starting testdotnet8_test-dotnet8_1 ... ?[32mdone?[0m
                  ?[1B
              stdout:
                  v2.08: Pulling from oa/test-dotnet8
                  Digest: sha256:2c235aee4cc91f8cfb336554d6c89ca30bd8716249dcb1470f50681352f477b9
                  Status: Image is up to date for harbor.xxxx.com/oa/test-dotnet8:v2.08

Summary for local-salt-minion
------------
Succeeded: 2 (changed=1)
Failed:    0
------------
Total states run:     2
Total run time:   4.278 s
[root@www ~]# docker container ls
CONTAINER ID   IMAGE                                     COMMAND                  CREATED       STATUS          PORTS                                     NAMES
4f629846266b   harbor.xxxx.com/oa/test-dotnet8:v2.08   "dotnet Test.WebAPI.â¦"   7 hours ago   Up 20 seconds   0.0.0.0:8777-&gt;998/tcp, :::8777-&gt;998/tcp   testdotnet8_test-dotnet8_1
[root@www ~]# </code></pre>
</div>
<div id="MySignature" role="contentinfo">
    <img src="https://images.cnblogs.com/cnblogs_com/blogs/683398/galleries/2417207/o_221441c4.png">
<p>æ¬ææ¥èªåå®¢å­ï¼ä½èï¼<a href="https://www.cnblogs.com/hnzhengfy/" target="_blank">æ©å­å®¶</a>ï¼æ¬¢è¿å¾®ä¿¡æ«ç å³æ³¨åä¸»ãæ©å­å®¶czzjãï¼æä»»ä½çé®æ¬¢è¿æ²éï¼å±åæé¿ï¼</p>
<div><p style="float: left;">è½¬è½½æ¬æè¯·æ³¨æåæé¾æ¥ï¼<a href="https://www.cnblogs.com/hnzhengfy/p/19012379/cicd_Linux_docker" target="_blank">https://www.cnblogs.com/hnzhengfy/p/19012379/cicd_Linux_docker</a></p></div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-21 22:17">2026-01-21 22:16</span>&nbsp;
<a href="https://www.cnblogs.com/hnzhengfy">æ©å­å®¶</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19012379);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19012379', targetLink: 'https://www.cnblogs.com/hnzhengfy/p/19012379/cicd_Linux_docker', title: 'WebAPI é¡¹ç®éè¿ CI/CD èªå¨åé¨ç½²å° Linux æå¡å¨ï¼docker-composeï¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ AI Agentæ¡æ¶æ¢ç§ï¼æè§£ OpenHandsï¼2ï¼--- CodeActè®ºæ ]]></title>
    <link>https://www.cnblogs.com/rossiXYZ/p/19497174</link>
    <guid>0c1a8f19443bfc60c5700d5c383c5c68</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/rossiXYZ/p/19497174" title="åå¸äº 2026-01-21 21:20">
    <span role="heading" aria-level="2">AI Agentæ¡æ¶æ¢ç§ï¼æè§£ OpenHandsï¼2ï¼--- CodeActè®ºæ</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="ai-agent-æ¡æ¶æ¢ç§æè§£-openhands2----codeactè®ºæ">AI Agent æ¡æ¶æ¢ç§ï¼æè§£ OpenHandsï¼2ï¼--- CodeActè®ºæ</h1>
<p></p><div class="toc"><div class="toc-container-header">ç®å½</div><ul><li><a href="#ai-agent-æ¡æ¶æ¢ç§æè§£-openhands2----codeactè®ºæ" rel="noopener nofollow">AI Agent æ¡æ¶æ¢ç§ï¼æè§£ OpenHandsï¼2ï¼--- CodeActè®ºæ</a><ul><li><a href="#0x00-æ¦è¦" rel="noopener nofollow">0x00 æ¦è¦</a></li><li><a href="#0x01-èæ¯ç¥è¯" rel="noopener nofollow">0x01 èæ¯ç¥è¯</a><ul><li><a href="#11-devin--openhandsåopendevin" rel="noopener nofollow">1.1 Devin &amp; OpenHandsï¼åOpenDevinï¼</a></li><li><a href="#12-codeact-çæä¹" rel="noopener nofollow">1.2 CodeAct çæä¹</a></li></ul></li><li><a href="#0x02-è®¾è®¡æè·¯" rel="noopener nofollow">0x02 è®¾è®¡æè·¯</a><ul><li><a href="#21-react-èå¼" rel="noopener nofollow">2.1 ReAct èå¼</a><ul><li><a href="#211-æµç¨" rel="noopener nofollow">2.1.1 æµç¨</a></li><li><a href="#212-åç" rel="noopener nofollow">2.1.2 åç</a></li><li><a href="#213-ä¼å£" rel="noopener nofollow">2.1.3 ä¼å£</a></li></ul></li><li><a href="#22-codeact-èå¼" rel="noopener nofollow">2.2 CodeAct èå¼</a><ul><li><a href="#221-ä¼å¿" rel="noopener nofollow">2.2.1 ä¼å¿</a><ul><li><a href="#codeact-çå¿µè§£é-llm-çå¯ç¼ç¨æ½å" rel="noopener nofollow">CodeAct çå¿µï¼è§£é LLM çå¯ç¼ç¨æ½å</a></li><li><a href="#å·¥å·é©æ°ä»¥-python-ä¸ºæ ¸å¿çæç®æ¹æ¡" rel="noopener nofollow">å·¥å·é©æ°ï¼ä»¥ Python ä¸ºæ ¸å¿çæç®æ¹æ¡</a></li></ul></li><li><a href="#222-å¾ªç¯" rel="noopener nofollow">2.2.2 å¾ªç¯</a></li><li><a href="#223-prompt" rel="noopener nofollow">2.2.3 Prompt</a></li><li><a href="#224-å°ç»" rel="noopener nofollow">2.2.4 å°ç»</a></li></ul></li><li><a href="#23-python-useèå¼" rel="noopener nofollow">2.3 Python-useèå¼</a><ul><li><a href="#231-aipy" rel="noopener nofollow">2.3.1 AiPy</a></li><li><a href="#232-ptc-programmatic-tool-calling" rel="noopener nofollow">2.3.2 PTC, Programmatic Tool Calling</a></li><li><a href="#233-claude-agent-sdk" rel="noopener nofollow">2.3.3 Claude Agent SDK</a></li></ul></li><li><a href="#24-codeact-vs-react" rel="noopener nofollow">2.4 CodeAct vs ReAct</a><ul><li><a href="#241-ä¸¤èçæ ¸å¿åºå«" rel="noopener nofollow">2.4.1 ä¸¤èçæ ¸å¿åºå«</a></li><li><a href="#242-codeact-å¼¥è¡¥äº-react-çåªäºç¼ºç¹" rel="noopener nofollow">2.4.2 CodeAct å¼¥è¡¥äº ReAct çåªäºç¼ºç¹</a></li></ul></li><li><a href="#25-codeact-vs-å½æ°è°ç¨" rel="noopener nofollow">2.5 CodeAct vs å½æ°è°ç¨</a></li><li><a href="#26-recode-èå¼" rel="noopener nofollow">2.6 ReCode èå¼</a></li></ul></li><li><a href="#0xff-åè" rel="noopener nofollow">0xFF åè</a></li></ul></li></ul></div><p></p>
<h2 id="0x00-æ¦è¦">0x00 æ¦è¦</h2>
<p>CodeAct æ¯ OpenHands çåºç³ã</p>
<p>CodeAct =ãç¨å¯æ§è¡ä»£ç åä¸å Actionãï¼æå¯æ§è¡ä»£ç å½ä½ææ ¸å¿çè¡å¨ï¼Actionï¼å½¢æï¼è®© LLM ç¨âåä»£ç -è·ä»£ç -çç»æâçå¾ªç¯ï¼æ¿ä»£ä¼ ç»ææ¬æ JSON å¼å·¥å·è°ç¨ï¼ä»¥è¿ä¸æ­¥å®æå¤æä»»å¡çææ®µãâæ LLM ä»âææ¬äº¤äºâåçº§ä¸ºâèæ¬äº¤äºâï¼è®©åé¦é­ç¯ãå·¥å·ç»ä¸ãæ¨çå¤åãæ©å±æ æ©æ¦ã</p>
<p>å¦å¤ï¼Manus ä¹ä½¿ç¨äº CodeActã</p>
<p>å¸æéè¿æ¬æï¼è¯»èå¯ä»¥äºè§£ReActï¼CodeAct è¿ä¸¤ç§èå¼ï¼åºäºæ­¤ï¼å¯ä»¥å¯¹ OpenHands åè¿ä¸æ­¥å­¦ä¹ ã</p>
<p>å ä¸ºæ¬ç³»ååé´çæç« è¿å¤ï¼å¯è½å¨åèæç®ä¸­æéæ¼çæç« ï¼å¦ææï¼è¿è¯·å¤§å®¶æåºã</p>
<h2 id="0x01-èæ¯ç¥è¯">0x01 èæ¯ç¥è¯</h2>
<h3 id="11-devin--openhandsåopendevin">1.1 Devin &amp; OpenHandsï¼åOpenDevinï¼</h3>
<p>âDevinæ¯ç±Cognition AIå¼åçå¨çé¦ä¸ªAIç¨åºåï¼å·å¤å¨æ å¼åè½åï¼è½èªä¸»å®æä»£ç ç¼åãè°è¯ãé¨ç½²åAIæ¨¡åè®­ç»ç­ä»»å¡âãDevin ä»£è¡¨äºä¸ç§åè¿çèªä¸»ä»£çï¼æ¨å¨åºå¯¹è½¯ä»¶å·¥ç¨çå¤ææ§ãå®å©ç¨äºè¯¸å¦ shellãä»£ç ç¼è¾å¨åç½ç»æµè§å¨ç­å·¥å·çç»åï¼å±ç¤ºäº LLM å¨è½¯ä»¶å¼åä¸­æªè¢«ååå©ç¨çæ½åã</p>
<p>OpenDevin é¡¹ç®è¯çäºå¤å¶ãå¢å¼ºå¹¶åæ°åå§ Devin æ¨¡åçæ¿æãOpenDevin çç®æ æ¯æ¢ç´¢å¹¶æ©å± Devin çè½åï¼è¯å«å¶ä¼å¿åæ¹è¿é¢åï¼ä»¥æå¯¼å¼æ¾ä»£ç æ¨¡åçè¿å±ãéè¿å¸å¼å¼æºç¤¾åºçåä¸ï¼OpenDevin æ¨å¨åºå¯¹ Code LLM å¨å®éåºæ¯ä¸­é¢ä¸´çææï¼äº§åºå¯¹ç¤¾åºæéå¤§è´¡ç®çä½åï¼å¹¶ä¸ºæªæ¥çè¿æ­¥éºå¹³éè·¯ã</p>
<p>OpenHands ç®å GitHub ææ æ°å·²è¶ 6.5 ä¸ã</p>
<h3 id="12-codeact-çæä¹">1.2 CodeAct çæä¹</h3>
<p>å¨èªç¶è¯­è¨å¤çé¢åï¼å¤§è¯­è¨æ¨¡åï¼LLMï¼å·²ç»åå¾äºå®æå®ççªç ´ ââ å®ä»¬ä¸æ­¢å¤çææ¬ï¼è¿è½è°ç¨ APIãç®¡çåå­ï¼çè³æ§å¶æºå¨äººãä½ä¼ ç»ç LLM ä»£çæä¸ªé®é¢ï¼å®ä»¬éå¸¸æ¯çæ JSON æèåºå®æ ¼å¼çææ¬æ¥è¯´æè¦åä»ä¹ï¼è¿å°±å¯¼è´è½åçå¨ä½æéï¼ä¹ä¸å¤çµæ´»ã</p>
<p>CodeAct æ¯ä¸ç§æ°çä»£çæ¡æ¶ï¼å®è®© LLM ç´æ¥çæå¯æ§è¡ç Python ä»£ç æ¥ âåäºâï¼å³ä»¥ code ä¸º actionï¼ç¨ä»£ç è§£å³å¤æé®é¢ãç®åè¯´ï¼LLM åä¸æ®µ Python ä»£ç ï¼è CodeAct ééæäº Python è§£éå¨ï¼è½ç´æ¥è¿è¡è¿æ®µä»£ç ï¼èä¸å¨å¤è½®äº¤äºä¸­ï¼LLM è¿è½å¤çåå­å¨ä¸­é´ç»æï¼æ ¹æ®æ°çç»æè°æ´ä»£ç ï¼ç¸å½äºç¨ Python ä»£ç ç»ä¸äº LLM ä»£çç âè¡å¨æ¹å¼âãå½ç¶ï¼åä»£ç ä¸æ¯ç®çï¼èæ¯ç¨è¿ç§éç¨çæ¹å¼è§£å³åç§é®é¢ãè¿ç§æ¡æ¶åæäºä¼ ç»LLMä»£ççå¤ä¸ªéå¶ã</p>
<p>å·ä½å±å¼ï¼CodeAct æåä¸ªé²æç¹å¾ï¼</p>
<ul>
<li>ç»ä¸è¡å¨ç©ºé´ï¼ææ¬ãJSONãå½æ°è°ç¨ãShellãSQLãç»å¾ãç½é¡µæåç­ï¼å¨é¨æ¶ææä¸æ®µ Pythonï¼æå¶ä»è¯­è¨ï¼ä»£ç ï¼æ¨¡ååªéä¼åä»£ç ï¼å°±è½å®æå¤æ¨¡æãå¤å·¥å·ãå¤æ­¥éª¤ä»»å¡ï¼æ éè®°å¿äºè±å«é¨ç API åæ°æ ¼å¼ã</li>
<li>é­ç¯åé¦æºå¶ï¼ä»£ç è¢«è§£éå¨ï¼ææ²ç®±ï¼çæ­£æ§è¡ï¼æ åè¾åºãæ¥éãå¼å¸¸æ ãè¿è¡æ¶é´ãçæçæä»¶/å¾ç/è¡¨ç»æç­ï¼ä¼åæ ·è¿åç»æ¨¡åå½ä½ä¸ä¸æ­¥ promptçé¨ååå®¹ï¼æ¨¡åå¯ç«å³âçè§âèªå·±è¡å¨çåæï¼å½¢æãå-è·-ç-æ¹ãçå¼ºåå¾ªç¯ï¼æ¾èéä½å¹»è§ã</li>
<li>å¤ææ¨çå¤åï¼å¤æ­¥æ°å­¦æ¨å¯¼ãè¡¨æ ¼åå¹¶ãç»è®¡æ£éªãè¿­ä»£ä¼åç­ï¼ä¸å¿å¨éç¶æéâå¿ç®âï¼èæ¯å¤åä¸ºå¯è¯»å¯æ¹çä»£ç ï¼äººç±»ç¨æ·ä¹è½å¤æ¥ãæ­ç¹ãè°è¯ï¼è§£éæ§è¿é«äºé»ç Chain-of-Thoughtã</li>
<li>é¶é¢å¤æ¥å£ææ¬ï¼ä¼ ç» Agent æ¯æ¥å¥ä¸ä¸ªæ°è½åå°±è¦å°è£ä¸å¥ JSON Schema/Tool Descriptionï¼CodeAct ä¾§åªéå¨æ²ç®±éé¢è£å¯¹åºåºï¼matplotlibãpandasãrequestsãseleniumâ¦ï¼ï¼æ¨¡åç«å»å¯ç¨ï¼æ©å±ææ¬è¶è¿äºé¶ã</li>
</ul>
<h2 id="0x02-è®¾è®¡æè·¯">0x02 è®¾è®¡æè·¯</h2>
<p>ä¸åçAgentæ¡æ¶å¶å®æ¯ä¸åä½èè®¾è®¡æè·¯çä½ç°ï¼å¯¹âæºè½âæ¬è´¨çä¸åçè§£ãè¿äºæ¡æ¶å¨æ¨¡åæè§£æ¹å¼ãä»»å¡æ§å¶é»è¾ãæ§è¡æµç¨è®¾è®¡ä¸å·®å¼æ¾èï¼ä½ç°äºä¸åçææ¯æè·¯ä¸è®¾è®¡å²å­¦ï¼éç¨äºä¸åçåºç¨åºæ¯ã</p>
<ul>
<li>æ¯å¦å¯ä»¥åªæä¾å°æ°è½åï¼ åªç»åºå¤§è´æ­¥éª¤ï¼promptæ¯è¾ç®åï¼åªç»åºå¤§è´æ­¥éª¤ï¼ï¼ä¸è¿è¡å¼ºå¶åä¸¥æ ¼çéå¶ï¼è®©æ¨¡åå¯ä»¥çµæ´»æ¢ç´¢ï¼è®©æ¨¡åèªä¸»å³å®è§£å³æµç¨ã</li>
<li>ä¹å¯ä»¥éè¿ç²¾å·§çPrompt Engineeringæä¾å¤ææä»¤ï¼è®© Agent è½å¤è¿è¡æ·±åº¦æèãå¤è½®å¯¹è¯ãè°ç¨å·¥å·ä»¥åé¿æè®°å¿ç­æä½ï¼ä»èæåæç¥åè¡å¨çæºè½æ°´å¹³ã</li>
<li>åæ¯å¦ï¼Pocket Flowçä½èZachary Huangåå£«è®¤ä¸ºï¼LLMæ¡æ¶æ¬è´¨ä¸å°±æ¯ä¸ä¸ªç®åçæåå¾ã</li>
<li>ä¹æäººè®¤ä¸ºï¼æå»ºä¸ä¸ªæç¨çAgentï¼å¹¶éæºäºæ¨¡åæºåçé£è·ï¼èæ¯æºäºå¦ä½å´ç»æ¨¡åè®¾è®¡ä¸å¥è¡ä¹ææçãè®¤ç¥æµç¨ãã</li>
<li>åæ¯å¦ï¼Browser Use ç bu-agent-sdk çè®¾è®¡çå¿µåå¶ç®åï¼Agentå°±æ¯ä¸ä¸ªforå¾ªç¯ãæ ¸å¿ä»£ç åªæå è¡ï¼ä¸æ­è°ç¨LLMï¼æ§è¡å·¥å·ï¼æç»æå¡åä¸ä¸æãæ¡æ¶ä½èGregor Zunicå¨æ¨æä¸­ç´è¨ï¼"ææä»·å¼é½å¨RLè¿çæ¨¡åéï¼ä¸å¨ä½ é£ä¸ä¸è¡çæ½è±¡éã"<br>
<img alt="bu-agent-loop" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1850883/202601/1850883-20260119210506253-840368887.png" class="lazyload"></li>
</ul>
<h3 id="21-react-èå¼">2.1 ReAct èå¼</h3>
<p><strong>æ¶æå¨ç§°</strong>ï¼Reasoningï¼æ¨çï¼+ Actingï¼è¡å¨ï¼ã</p>
<p>äººè§£å³å¤æé®é¢çèªæä¹å¤ï¼å¾å¾æ¯ âæ³æ¸æ¥åå¨æâââ æ¿å°éæ±åæè§£å¼ãåææç½ï¼æäºæ¸æ°æè·¯åè¡å¨ãReAct èå¼å°±æ¯æè¿ç§äººç±»çæèæ¹å¼æç» AI ä»£çï¼æç ´äºä»¥å âè¾å¥å¥å°±è¾åºå¥â çé»ç®±æ¨¡å¼ï¼è®©æ¯ä¸æ­¥è¡å¨é½è½æ¥å°æèè¿ç¨ã å³ReAct è®©Agentå­¦ä¼ âä¸æèåè¡âã</p>
<h4 id="211-æµç¨">2.1.1 æµç¨</h4>
<p>ReAct (Reason + Act) æ¯ä¸ç§æ åçâä¸æ­¥èµ°âèæï¼å®è§£å³äºæ¨¡åè¦ä¹åªä¼ç©ºæ³ãè¦ä¹åªä¼ç²å¨çé¾é¢ï¼å®è®©æ¨¡åä¸åä¸æ¬¡æ§è¾åºæç»ç­æ¡ï¼èæ¯å¾ªç¯æ§è¡ä¸ä¸ªæ­¥éª¤ï¼</p>
<ol>
<li><strong>Thoughtï¼æèï¼</strong>ï¼æ¨¡ååæå½åæåµï¼å³å®ä¸ä¸æ­¥åä»ä¹ã</li>
<li><strong>Actionï¼è¡å¨ï¼</strong>ï¼æ¨¡åçæå·¥å·è°ç¨æä»¤ï¼Function Callï¼ã</li>
<li><strong>Observationï¼è§å¯ï¼</strong>ï¼è¿è¡æ¶ç¯å¢æ§è¡å·¥å·ï¼å¹¶å°ç»æï¼Outputï¼åé¦ç»æ¨¡åã</li>
</ol>
<p>è¿ä¸ªè¿ç¨å¨èå¤å§ï¼ææäºåé¦å¾ªç¯ï¼ <strong>Thought â Action â Observation</strong> ï¼ï¼ç´å°ä»»å¡å®æï¼å¯¹åºå¾ä¾å¦ä¸ï¼</p>
<p><img alt="react_sequence" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1850883/202601/1850883-20260117211905548-690118991.png" class="lazyload"></p>
<p>ReAct èå¼çæ ¸å¿æ¯ï¼</p>
<ul>
<li>âæ¨çâ å âè¡å¨â å½¢æå¾ªç¯ï¼å³ï¼è¾¹æ³è¾¹å¹²ï¼å¹²å®åçï¼çå®åæ³â</li>
<li>æ¥æ¶åé¦åéç¨ä»ä¹æ¹å¼å³ç­ï¼ä»£çå¿é¡»å³å®æ¯å¦éå¤ï¼è¿è¡ä¸ä¸è½®æèï¼æç»æå¾ªç¯</li>
<li>åç¯å¢ä¹é´éä¿¡çä¸ä¸æå¦ä½ç®¡çã</li>
</ul>
<p>å¨ OpenHands éï¼âæ¨çâ å°±æ¯ä»£çç âæèè®°å½âï¼é¢å¯¹ä»»å¡ç®æ åä¹åçåé¦ï¼ä»£çä¼çæä¸æ®µç±»ä¼¼ âåå¿æ³æ³â çåå®¹ï¼æ¯å¦ âç°å¨ä»£ç æ¥éæ¯ç¼ºä¾èµåï¼å¾åæ§è¡å®è£å½ä»¤âï¼è¿äºæèä¼å­å¨ <code>AgentThinkAction</code> æèç¸å³å¨ä½çæç»´å­æ®µéãâè¡å¨â å°±æ¯ææèåææºå¨è½æ§è¡çæä»¤ï¼æ¯å¦çæå¸¦å·ä½å½ä»¤ç <code>CmdRunAction</code> å¯¹è±¡ï¼ç¡®ä¿æä½è½ç²¾åè½å°ã</p>
<h4 id="212-åç">2.1.2 åç</h4>
<p>æç ç©¶èæåºï¼Agentçè¿è¡è¿ç¨æ¬è´¨ä¸å°±æ¯ä¸æ¡<strong>æ¦çé¾ï¼Probability Chainï¼</strong>ã</p>
<p>å°Agentè§ä¸ºæ¦çé¾ï¼æå³çæä»¬çè®¾è®¡å·¥ä½ä¸åæ¯âææ¨¡åè¯´è¯âï¼èæ¯âæçºµæ¦çâã</p>
<p>ç®åææµè¡çAgentæ¨¡å¼è«è¿äº<strong>ReAct (Reasoning + Acting)</strong>ãä¹å°±æ¯è®©æ¨¡åå¨è¡å¨ä¹ååçæä¸æ®µâThoughtâï¼æèï¼ãä½æ¨ææ²¡ææ³è¿ï¼ä¸ºä»ä¹å¤çæä¸æ®µæå­ï¼æèï¼ï¼å°±è½æé«ä»»å¡æåçï¼</p>
<p>ç ç©¶èç»åºäºæ°å­¦ä¸çè§£éï¼å¼å¥âæèâåéãå¨ReActæ¡æ¶ä¸­ï¼æ¦çå¬å¼åçäºååãæä»¬å¨ç¶æsåå¨ä½aä¹é´ï¼æå¥äºä¸ä¸ªä¸­é´åétï¼Thoughtï¼ãè¿æå³çï¼</p>
<ul>
<li><strong>å¦æä¸æè</strong>ï¼æ¨¡åç´æ¥ä»ç¶æsè·³è·å°å¨ä½aï¼è¿ä¸ªè·¨åº¦å¯è½å¤ªå¤§ï¼å¯¼è´æ¦çP(a|så¾ä½ï¼å®¹æçèï¼ã</li>
<li><strong>å¦ææè</strong>ï¼æ¨¡ååæ ¹æ®ç¶æsçææètï¼ç¶ååºäºsåtå±åå³å®å¨ä½aã</li>
</ul>
<p>ç ç©¶èæåºï¼ReActçæ¬è´¨å°±æ¯éè¿å¼å¥tï¼æ¥æé«éæ©æ­£ç¡®açæ¡ä»¶æ¦çã</p>
<p>è½ç¶ReActå¾ææï¼ä½è®ºæä¸­ä¹æ¯«ä¸å®¢æ°å°æåºäºå®çç¼ºé·ãä»æ°å­¦ä¸çï¼æ åçReActå¾ªç¯æ¬è´¨ä¸æ¯ä¸ç§âéæºæ¸¸èµ°âï¼Random Walkï¼ã</p>
<ul>
<li>å®éå¸¸çµæ´»ï¼æ²¡æä»»ä½é¢è®¾çè·¯å¾ã</li>
<li>ä½ä¹æ­£å ä¸ºç¼ºä¹çº¦æï¼å®å¾å®¹æåºç°âä¸æ¶æâçæåµã</li>
<li>è¡¨ç°åºæ¥ççç¶å°±æ¯æä»¬å¸¸è¯´çâå¹»è§å¾ªç¯âï¼Agentå¨éè¯¯çè·¯å¾ä¸è¶èµ°è¶è¿ï¼æä¸åæ¥äºã</li>
</ul>
<p>è¿å°±æ¯ä¸ºä»ä¹æä»¬éè¦æ´å¤æçæ¶æï¼æ¯å¦æ§å¶æµæå¤æºè½ä½ã</p>
<h4 id="213-ä¼å£">2.1.3 ä¼å£</h4>
<p>ReAct èå¼çä»·å¼å¨äºç»ä»£çå ä¸ªå³é®è½åï¼</p>
<ul>
<li>è½çæï¼ä¿çå®æ´çæèè®°å½ï¼å¼åèè½æ¸æ¥ç¥éä»£çä¸ºå¥è¿ä¹åï¼ä¸åæ¸ä¸çå¤´èï¼</li>
<li>è½çº éï¼å¦æè¡å¨åºäºé®é¢ï¼æ¯å¦å½ä»¤æ§è¡å¤±è´¥ï¼ï¼ä»£çè½ç»åä¹åçæèåæ°åé¦è°æ´è®¡åï¼ä¸ä¼ä¸ç´åæ ç¨åãæ²¡æè¿å¥å¾ªç¯æ¶ï¼æ¨¡åä¸æ¬¡è¾åºå°±ç»æï¼æ¢çä¸å°ä¸­é´æ³æ³ï¼ä¹æ æ³è·åå®æ¶ä¿¡æ¯ææ§è¡ä»£ç ãReAct å¼ºå¶æ¨¡åååä¸ä¸æ­¥æç®ï¼åè°ç¨å·¥å·ï¼ç¶åæç»æå¸¦åå»ç»§ç»­åæç®ï¼å¦æ­¤åå¤ï¼ç´å°è®¤ä¸ºå¯ä»¥ç»åºæç»ç­æ¡ã</li>
<li>éæ­¥æ¨è¿ãè¿ç§éæ­¥æ¨è¿çæ¹å¼å¸¦æ¥åä¸ªç´æ¥ææï¼
<ul>
<li>ä»»å¡å¯ä»¥ææå¤æ­¥ï¼ä¸å¿ä¸æ¬¡æ§å®æï¼</li>
<li>æ¯æ­¥ç»æä¼å½±ååç»­è®¡åï¼è½éæ¶è°æ´ï¼</li>
<li>æ¨çåè°ç¨è®°å½å®æ´ä¿çï¼ä¾¿äºæ£æ¥ï¼</li>
<li>åºç°éè¯¯æ¶ææºä¼ä¿®æ­£ï¼æåçæ´é«ã</li>
</ul>
</li>
<li>æ¥å¤æãReActéè¿ç»æåçæç¤ºå·¥ç¨ï¼å°LLMçå¼ºå¤§æ¨çè½åä¸<strong>å¤é¨å·¥å·</strong>ï¼å¦ç½ç»æç´¢ãè®¡ç®å¨ãAPIè°ç¨ï¼ç¸ç»åãè¿å°±åæ¯ä¸ºLLMæ¥éäºäºèç½ååç§âå¤æâï¼ä½¿å¶è½å¤å¼¥è¡¥èªèº«å¨å®æ¶æ§ãè®¡ç®åäº¤äºè½åä¸çä¸è¶³ã</li>
</ul>
<p>å®éåºç¨ä»æå ç±»é¾ç¹ï¼</p>
<ul>
<li>å¦ä½æ§å¶å¾ªç¯ï¼æ¨¡åå¯è½é·å¥âæèâè¡å¨âæèâçæ éå¾ªç¯ï¼æèè¿æ©ç»æ</li>
<li>å¦ä½ä¿è¯å¯è§æµï¼æ¨çè¿ç¨æ¯âé»çâï¼é¾ä»¥è°è¯åä¼å</li>
<li>æç¤ºè¯å¿é¡»ä¸¥æ ¼ç²¾å¿è®¾è®¡ï¼æ ¼å¼ææªè¾ç¨æåå·®ï¼æ¨¡åå°±ä¼è·³è¿æèæä¹±è°ç¨ï¼</li>
<li>æ­¥æ°å¢å¤åä¸ä¸æè¿éåé¿ï¼æ¨¡åå®¹æéå¿æ©æä¿¡æ¯ï¼</li>
<li>éè¯¯çº§èæåºãå¨å¸åç ReAct çº¿æ§ä»»å¡é¾ä¸­ï¼åä¸æ­¥çè¾åºç´æ¥ä½ä¸ºåä¸æ­¥çè¾å¥ï¼ä¸æ¦ä¸­éåºéå°±æé¾ä¿®æ­£ã</li>
<li>å·¥å·æ¬èº«ä¸å¯é ææ¨¡åééå·¥å·ï¼ä¼å¯¼è´åç»­å¨é¨å¤±è´¥ãå¦å¤ï¼å·¥å·è°ç¨ãç»æå¤çãéè¯¯æ¢å¤éè¦ç»ä¸æºå¶</li>
<li>ææ¬é«æï¼æçä½ä¸ãæ¯ä¸æ­¥é½éè¦éæ°æè"ä¸ä¸æ­¥åä»ä¹"ï¼æ¯ä¸ªæèæ­¥éª¤é½éè¦è°ç¨ LLM</li>
<li>ReAct çææå¨å¾å¤§ç¨åº¦ä¸ä¾èµäº LLM èªèº«çæ¶ç°è½åãå¨é¢å¯¹å¨æ°çãæªè§è¿çä»»å¡æ¶ï¼æºè½ä½å¯è½ä¼é¾ä»¥è¿è¡ææçæ¨çåè§åã</li>
<li>é¾ä»¥å¹¶è¡ãææä»»å¡å¿é¡»ä¸²è¡æ§è¡ï¼æ æ³å©ç¨å¹¶åè½å</li>
<li>æµæ¨çä¸å²å¨æ§è¡ãæ©æç ReAct Agent æ¬è´¨ä¸æ¯ä¸ç§ <strong>è¾¹æ³è¾¹å</strong> çæ¨¡å¼ï¼å¨åä¸è½®ä¸­äº¤ç»æ¨çä¸å¨ä½ï¼ä»¥å·¥å·è°ç¨ä¸ºä¸­å¿ç»ç»æè·¯ãå®æ¢<strong>ç¼ºä¹ åæ³åå</strong> çå¨å±è§åé¶æ®µï¼ä¹<strong>ç¼ºä¹ åååæ</strong> çç³»ç»æ§æ ¡æ­£æºå¶ãç»ææ¯ï¼å¨éè¦é¿ç¨è§åãå¨å±çº¦æåè·¨ç³»ç»åè°çå¤æä»»å¡ä¸­ï¼è¿ç±» Agent å¾å¾ä¼<strong>ç²ç®åè¿</strong>ï¼å¨å±é¨å·¥å·è°ç¨çæ­»è¡åéä¸æ­æè½¬ï¼èæ æ³è·³åºæ´ä½éæ°è§åè·¯å¾ã</li>
</ul>
<p>ç»¼ä¸ï¼ReAct ä½ä¸ºæ©æ Agent çæ ¸å¿èå¼ï¼å¨ åä¸ä»»å¡ãç­ä»»å¡é¾ãå¼±çº¦æ çåºæ¯ä¸­ä¾ç¶æä»·å¼ï¼ä½ä½ä¸ºä¼ä¸çº§ãè·¨åãå¼ºçº¦æ Agent ç³»ç»çåºç¡æ¶ææ¶ï¼å¶å±éæ§å·²ç»æ¯ç»ææ§çï¼èä¸æ¯ç®åéè¿å å¼ºæç¤ºè¯æå¢å å·¥å·ç§ç±»å°±è½å¼¥è¡¥çé®é¢ãä¸æ¦ä¸å¡èå´æ©å±å°æ°åæ¡ä¸å¡çº¿ï¼å å ä¸¥æ ¼çæ°æ®éç¦»è¦æ±åé¢ç¹åå¨çä¸å¡è§åï¼åä½ Agent éå¸¸ä¼ä¸å ªéè´ãè¯å¾è®©ä¸ä¸ªä¸­å¿åãéç¨çæ¨¡åå»çè§£ææè¯·æ±ãè·¯ç±ææå·¥å·ãåæ¶è¿è¦éµå®æ¯ä¸æ¡åè§ç­ç¥ï¼ä¼å¯¼è´ç³»ç»å¤æåº¦åææ°çº§è¨èï¼éç½®ä¸ç»´æ¤ææ¬é£åï¼è¡ä¸ºé¾ä»¥è§£éï¼å¹»è§ä¸éè¯¯é¢åã</p>
<h3 id="22-codeact-èå¼">2.2 CodeAct èå¼</h3>
<p>OpenHandsæ¯å¼æºç¤¾åºæé çç¬¦åCodeActæ¨¡å¼çSingle-AgentãCodeActçæè·¯æ¯XingYao Wangå¨24å¹´2æäº"Executable Code Actions Elicit Better LLM Agents"æåºæ¥çã</p>
<p>è®ºæä¿¡æ¯å¦ä¸ï¼</p>
<ul>
<li>Xingyao Wang, Yangyi Chen, Lifan Yuan, Yizhe Zhang, Yunzhu Li, Hao Peng, and Heng Ji. Executable Code Actions Elicit Better LLM Agents. In ICML, 2024a. 2, 3, 4, 5, 17</li>
<li>Xingyao Wang et  al. OPENHANDS: AN OPEN PLATFORM FOR AI SOFTWARE DEVELOPERS AS GENERALIST AGENTS</li>
</ul>
<p>ä»£ç å°åï¼<a href="https://link.zhihu.com/?target=https%3A//github.com/xingyaoww/code-act" target="_blank" rel="noopener nofollow">https://github.com/xingyaoww/code-act</a></p>
<p>ä½èåå®¢ï¼<a href="https://link.zhihu.com/?target=https%3A//xwang.dev/blog/2024/codeact/" target="_blank" rel="noopener nofollow">https://xwang.dev/blog/2024/codeact/</a></p>
<p>CodeAct ä½ä¸ºé¢å LLM Agent çå¤è½®äº¤äºæ¡æ¶ï¼éè¿ âAgent - ç¨æ· - ç¯å¢â çä¸åè§è²å®ä¹ï¼æå»ºäºä»¥ Python ä»£ç ä¸ºæ ¸å¿çå¨æ°äº¤äºæ¨¡å¼ãå¶æ ¸å¿çå¿µå¨äºæç ´ä¼ ç»æä»¤æ ¼å¼çå±éï¼å°ææç¯å¢äº¤äºå¨ä½ç»ä¸ä¸ºå¯æ§è¡çä»£ç ï¼è®© Agent åå©ä»£ç çå¼ºå¤§è¡¨è¾¾åæ»åå¤æä»»å¡ã</p>
<ul>
<li>ä¼ ç» JSON-Schema æ¨¡å¼ææºè½ä½ç¦é¢å¨âåæ­¥ãåå·¥å·ãååè°âçç­çªèµ°å»éï¼LLM åè¾åºç»æåææ¬ï¼å¤é¨è§£æå¨åéä¸æ´¾åï¼æ¯æ¢ä¸éå·¥å·å°±è¦éæ°èµ°ä¸éâçæ-è§£æ-è°ç¨âé¿é¾ï¼å¨ä½æ æ³åµå¥ï¼é»è¾æ æ³ä¿å­ï¼éå°ç½ç»æå¨æè¿åæ ¼å¼å¾®è°ä¾¿ååå°½å¼ï¼æ°æ®æ ¼å¼è½ç¶å¯ä»¥ä¿è¯ï¼ä½æ¯åå®¹è´¨éå¹¶ä¸è½ä¿è¯ï¼ï¼Token è¶é¿å¯¼è´çæ§è½ä¸éï¼ä¸å¤è½®å¯¹è¯æ¢è¦ä¿è¯çµæ´»æ§åè¦ä¿è¯éåº¦ã</li>
<li>è CodeAct éæ Python è§£éå¨åï¼LLM ç´æ¥äº§åºä»£ç ï¼ç±è§£éå¨å®æä¸ç¯å¢çäº¤äºå¹¶è¿åç»æï¼LLM æ ¹æ®ç»æè°æ´æè·¯æç»åºç­æ¡ï¼ä¸æ¬¡ä»£ç æ§è¡å³å¯åå«å¤æçé»è¾æµç¨ï¼ãè¿ç¸å½äºè®© LLM æ®æ¼ç¨åºåè§è²ï¼Python ç¯å¢ä½ä¸ºæ§è¡å©æï¼ä»£ç ä½ä¸ºç»ä¸çè¡å¨ç©ºé´ã</li>
</ul>
<p><img alt="OpenHands-CodeAct-å¯¹æ¯" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1850883/202601/1850883-20260117211926981-991414380.jpg" class="lazyload"></p>
<h4 id="221-ä¼å¿">2.2.1 ä¼å¿</h4>
<p>CodeActAgent çä¸»è¦åè½åæ¬ï¼</p>
<ul>
<li>ç»ä¸æä½ç©ºé´ï¼å°ææ Agent æä½ç»ä¸ä¸ºä»£ç æä½</li>
<li>å¤åè½å·¥å·éï¼æ¯æå½ä»¤æ§è¡ãä»£ç è¿è¡ãæä»¶æä½ãç½é¡µæµè§ç­</li>
<li>æºè½åå²ç®¡çï¼éè¿åç¼©åç¼å­æºå¶ç®¡çé¿å¯¹è¯åå²</li>
<li>çµæ´»éç½®ï¼å¯æ ¹æ®éè¦å¯ç¨ / ç¦ç¨ä¸ååè½</li>
<li>æä»¶æ©å±ï¼æ¯æéè¿æä»¶æ©å±åè½</li>
<li>é«æå³ç­ï¼éè¿ LLM é©±å¨çå³ç­è¿ç¨æ§è¡ä»»å¡</li>
</ul>
<p>è¿ç§è®¾è®¡ä½¿ CodeActAgent æä¸ºä¸ä¸ªåè½å¼ºå¤§ä¸çµæ´»çä»£ç æ§è¡å Agentï¼ç¹å«éåéè¦æ§è¡å¤æä»£ç ä»»å¡çåºæ¯ã</p>
<p>CodeAct çæ ¸å¿æ´è§å¨äºï¼ä¸å¶è®©æºè½ä½ï¼Agentï¼æ®æ¼ âæä¹¦â è§è²çæéææä»¤ï¼ä¸å¦ä½¿å¶æä¸º âç¨åºåâââ ç´æ¥çæå¯æ§è¡ç Python ä»£ç ï¼ç±è§£éå¨ä¸æ¬¡æ§æ§è¡ï¼ä»èå°é¢è®­ç»é¶æ®µç§¯ç´¯çç¼ç¨ç¥è¯è½¬åä¸ºçµæ´»çå³å¸­è¡å¨è½åãCodeAct çæ ¸å¿ä¼å¿å¯å½çº³ä¸ºä»¥ä¸äºç¹ï¼</p>
<ol>
<li><strong>è¡å¨ç©ºé´çè·è¿</strong>ï¼ä»£ç æ¯è¿æ¥åç±»å·¥å·ä¸è½åçéç¨ âè¶æ°´âãå¾ªç¯ãåæ¯ãå¼å¸¸æè·ãåéèµå¼ç­ Python åçè¯­æ³ï¼ä½¿ Agent è½å¤å¨åæ®µèæ¬ä¸­ä¸²èå¤ä¸ªå·¥å·ãç¼å­ä¸­é´ç»æãä¾æ®è¿è¡æ¶åé¦å¨æè°æ´ä¸æ¸¸è°ç¨é¡ºåºï¼å½»åºæè± âä¸ä¸ª JSON å¯¹åºä¸æ¬¡ RPC è°ç¨â çåµç¡¬äº¤äºæ¨¡å¼ã</li>
<li><strong>å¨ææ§ä¸å¯ç»åæ§</strong>ï¼Python è¿è¡æ¶å¯ä¸º Agent æä¾å³æ¶åé¦ï¼è¥ä»£ç æ§è¡æåºå¼å¸¸ï¼Agent æè·æ åéè¯¯è¾åºï¼stderrï¼åï¼å¯å¨ä¸ä¸è½®è¿­ä»£ä¸­èªè¡ä¿®å¤ï¼self-patchï¼ï¼è¥å¤é¨ API æ°å¢å­æ®µï¼ä»éå¨èæ¬ä¸­å¢å ä¸è¡ä»£ç å³å¯ééï¼æ éå¯¹æ¨¡åè¿è¡éæ°è®­ç»ãæ´è¿ä¸æ­¥ï¼å¤ä¸ªåå­å·¥å·å¯è¢«å°è£ä¸ºå½æ°ï¼éè¿åæ°ä¼ éå®ç° âç§¯æ¨å¼â å¤ç¨ ââ åä¸å¥ä»£ç åºæ¢å¯å¨å®¢æåºæ¯å®æå·¥åæ±æ»ï¼ä¹å¯å¨è´¢å¡åºæ¯å®ç°åç¥¨æ ¸éï¼çæ­£åå°è·¨é¢åé¶ææ¬è¿ç§»ã</li>
<li><strong>èªæè°è¯è½åä¸ææ¬ä¼å¿</strong>ï¼éè¯¯æ åæº¯å¤©ç¶æä¸º Agent ç âèªæ¥çº¿ç´¢âãå½ä»£ç è§¦å ZeroDivisionErrorï¼é¤æ°ä¸ºé¶éè¯¯ï¼ä¸å®ä½å°é¤æ°ä¸ºç©ºåè¡¨æ¶ï¼Agent å¯ç«å³å¨å±é¨é»è¾ä¸­è¿½å è¿æ»¤è¯­å¥ï¼æ éäººå·¥ä»å¥å³å¯å®æè°è¯ï¼åæ¶ï¼ä»£ç åçé»è¾è¡¨è¾¾å¤§å¹éä½äºäº¤äºåä½ï¼è¿ä¸æ­¥åç¼©äºè°è¯ä¸è¿è¡ææ¬ã</li>
<li><strong>æ´é«çäº¤äºæç</strong>ï¼ç±äºä»»å¡é»è¾è¢«åç¼©å°æ´å° token çä»£ç åä¸­ï¼æ´ä½çæææ¬éä»»å¡æ­¥æ°åç°æ¬¡çº¿æ§å¢é¿ï¼è½å¤ç¨æ´å°çäº¤äºè½®æ¬¡å®ææ´å¤æçä»»å¡ã</li>
<li><strong>å¯¹åºç¡è®¾æ½çå³æå³ç¨è½å</strong>ï¼ä»£ç å½¢æä½¿ Agent å¯ç´æ¥å¤ç¨ç°æè½¯ä»¶çæï¼è°ç¨ pandas å®ææ°æ®éè§åæãä½¿ç¨ matplotlib çæå¯è§åå¾è¡¨ãåå© sqlalchemy å®ç°æ°æ®åºäºå¡åå¥ï¼æ éä¸ºæ¯æ¬¾å·¥å·æ°åä¸å± JSON æè¿°æä»¶ï¼ä¹è§é¿äº âå­æ®µåä¸å¹éâ çç¢çåééé®é¢ãå¯¹äºä¼ä¸å·²æçå¾®æå¡ï¼åªéå¨å®¹å¨åæ´é² Python SDKï¼Agent å³å¯éè¿ import è¯­å¥å®æéæï¼æ¾èç¼©ç­é¡¹ç®äº¤ä»å¨æã</li>
</ol>
<h5 id="codeact-çå¿µè§£é-llm-çå¯ç¼ç¨æ½å">CodeAct çå¿µï¼è§£é LLM çå¯ç¼ç¨æ½å</h5>
<p>CodeAct çå¿µçæ ¸å¿çªç ´ï¼å¨äºå°æºè½ä»£ççå¨ä½ç©ºé´æåè³éç¨ç¼ç¨çé«åº¦ ââ éè¿è®©å¤§è¯­è¨æ¨¡åï¼LLMï¼ç´æ¥çæå¯æ§è¡ä»£ç ï¼æç ´äºä¼ ç»å·¥å·è°ç¨çå±éãä»¥å¾çæºè½ä»£çå¾å¾åå°äºåºå®çå·¥å·æ¥å£ï¼åªè½æºæ¢°å°è°ç¨é¢è®¾åè½ï¼è CodeAct èµäºä»£çä¸ä¸ªç»ä¸ç âå¯ç¼ç¨â å¨ä½æ¥å£ï¼å°±åä¸ºå·¥å éå¤äºä¸å¥å¯çµæ´»ç»åçç²¾å¯å·¥å·ï¼ä¸ºè§£å³å¤æä»»å¡å¼è¾äºå¨æ°è·¯å¾ã</p>
<p>è¿ä¸çå¿µçæ¬è´¨ï¼æ¯æ·±åº¦ææ LLM æé¿ç¼åä»£ç çåçè½åãå®è®©ä»£çç âå¨ä½â ä¸åå±éäºåä¸çåå­ API è°ç¨ï¼èæ¯éè¿çæä¸æ®µå®æ´ç Python ä»£ç ï¼äº¤ç± Python è§£éå¨æ§è¡æ¥å®æå¤æä»»å¡ãå¦æ­¤ä¸æ¥ï¼ä»£çè½å¨åä¸ªå¨ä½ä¸­å°è£å®æ´çé»è¾æµç¨ï¼åæ¬è°ç¨å¤ä¸ªå½æ°æå·¥å·ãæ§å¶æ§è¡é¡ºåºãå¤çä¸­é´ç»æå¹¶å­å¨ï¼æå¤§å°æåäºä»»å¡å¤ççè¿è´¯æ§ä¸èªä¸»æ§ã</p>
<h5 id="å·¥å·é©æ°ä»¥-python-ä¸ºæ ¸å¿çæç®æ¹æ¡">å·¥å·é©æ°ï¼ä»¥ Python ä¸ºæ ¸å¿çæç®æ¹æ¡</h5>
<p>å·¥å·æ¯æºè½ä»£çæå±è½åè¾¹ççå³é®ï¼æ­£æ¯å·¥å·çå­å¨ï¼è®© LLM ä»åçº¯çå¯¹è¯æºå¨äººï¼ChatBotï¼è¿åä¸ºå·å¤å®éæ§è¡è½åçæºè½ä»£çï¼Agentï¼ãCodeAct çæ¹æ¡å´åå¶éèè¡ä¹ï¼ä»¥æè´ç®æ´çæè·¯éæäºå·¥å·è°ç¨é»è¾ ââ å®å° Python ä½ä¸ºå·¥å·ï¼è®© LLM éè¿èªä¸»ç¼åä»£ç çæ¹å¼å®ç°åç±»åè½è°ç¨ï¼æå¼äºä¼ ç»å¤å·¥å·éæçå¤æè®¾è®¡ã</p>
<p>ä¼ ç»å·¥å·è°ç¨æ¨¡å¼ä¸­ï¼å¼åèéè¦å¨ç³»ç»æç¤ºè¯ï¼system promptï¼ä¸­æç¡®åç¥ LLM å¯ç¨çå·¥å·æ¥å£ï¼Available APIsï¼ï¼LLM åéè¿çæå·¥å·åååæ°åè¡¨çæ¹å¼è°ç¨å·¥å·ï¼æ è®ºè¾åºæ ¼å¼æ¯ææ¬è¿æ¯ JSONï¼æ¬è´¨ä¸é½åéäºé¢è®¾èå´ãè CodeAct çå»äºè¿ä¸ç¹ççé¢å®ä¹æ­¥éª¤ï¼å° Python ä½ä¸ºç»ä¸æ¥å£ï¼LLM å¨æ¯ä¸è½®äº¤äºä¸­ç´æ¥çæä»£ç å¹¶äº¤ç±è§£éå¨æ§è¡ãè¿ç§è®¾è®¡è®©å¨ä½ç©ºé´æ´æ ååï¼å·¥å·è°ç¨è¿ç¨ç®æ´ä¼éï¼ååéæ¾äº LLM çåçæ½åã</p>
<h4 id="222-å¾ªç¯">2.2.2 å¾ªç¯</h4>
<p>CodeActæ¡æ¶å¨ä¼ ç»çâLLM+å·¥å·âæ¶æä¸­å¼å¥äºä¸ä¸ªPythonæ§è¡ç¯å¢ä½ä¸ºæ¡¥æ¢ãå¼åèæå¯¼LLMçæä»£ç ï¼å¹¶å¨ä¸ä¸ªå®å¨çPythonæ²çä¸­æ§è¡è¿äºä»£ç ãè¯¥æ¡æ¶è®¾è®¡äºä¸ä¸ªå¤è½®äº¤äºæµç¨ï¼æ¾èå¢å¼ºäºæºè½ä»£ççèªä¸»æ§åæçãè¿ä¸ªæµç¨åå«äºä¸ªå³é®æ­¥éª¤ï¼</p>
<ol>
<li><strong>æ¥æ¶æä»¤ï¼Observationï¼</strong>ï¼ä»£çé¦åæ¥æ¶ç¨æ·çè¾å¥ï¼éå¸¸æ¯èªç¶è¯­è¨å½¢å¼çé®é¢ææä»¤ã</li>
<li><strong>æ¨çï¼Thinkï¼</strong>ï¼LLMéè¿åé¨æºå¶æèï¼è§åå®æä»»å¡æéçæä½æ­¥éª¤ï¼æç»çæä¸æ®µå¯æ§è¡çä»£ç ï¼èä¸æ¯ä¼ ç»çå·¥å·è°ç¨åè¡¨ã</li>
<li><strong>ä»£ç çæä¸æ§è¡ï¼Actionï¼</strong>ï¼ç³»ç»å°è¯å«åºçä»£ç æäº¤ç»Pythonè§£éå¨æ§è¡ãè¿æ®µä»£ç å¯ä»¥ä¸ç¯å¢äº¤äºï¼è°ç¨åºæå½æ°ï¼æ§è¡å¤æä»»å¡ã</li>
<li><strong>ç¯å¢åé¦ï¼Environmentï¼</strong>ï¼æ§è¡å®æ¯åï¼Pythonè§£éå¨å°ç»æãæä»¶æéè¯¯ä¿¡æ¯åé¦ç»ä»£çï¼ä¾å¶è¯ä¼°å¨ä½ææã</li>
<li><strong>è°æ´ä¸åç­</strong>ï¼ä»£çæ ¹æ®åé¦è°æ´ç­ç¥ï¼å¦æä»»å¡æªå®æåç»§ç»­çææ°ä»£ç ï¼å¦æå®æåæ´çæç»ç­æ¡å¹¶ç»æå¯¹è¯ã</li>
</ol>
<p>è¿ä¸ªå¾ªç¯æç»­è¿è¡ï¼ç´å°ä»»å¡è§£å³ææ»¡è¶³åæ­¢æ¡ä»¶ãCodeActçåæ°ä¹å¤å¨äºå®è®©ä»£çè½å¤éè¿æ§è¡ä»£ç èªä¸»å®æè®¸å¤åæ¬éè¦äººå·¥å®æçå·¥ä½ï¼ææ¶çè³è½å¨åæ¬¡å¾ªç¯ä¸­ç´æ¥æ»¡è¶³ç¨æ·è¯·æ±ï¼åå°äºè¿­ä»£æ¬¡æ°ãè¿ç§è½åæ¾èæåäºä»£çå¤çå¤æä»»å¡çæçåçµæ´»æ§ã</p>
<p><img alt="OpenHands-CodeAct-Overview" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1850883/202601/1850883-20260117211942285-1195254100.jpg" class="lazyload"></p>
<p>è®ºæéæä¾äºä¸ä¸ªAgentçæå°å®ç°ã</p>
<pre><code class="language-python">class MinimalAgent:
    def reset(self) -&gt; None:
        self.system_message = "You are a helpful assistant ..."
    def step(self, state: State):
        messages: list[dict[str, str]] = [
        {'role': 'system', 'content': self.system_message}
        ]
        for prev_action, obs in state.history:
            action_message = get_action_message(prev_action)
            messages.append(action_message)
            obs_message = get_observation_message(obs)
            messages.append(obs_message)
        # use llm to generate response (e.g., thought, action)
        response = self.llm.do_completion(messages)
        # parse and execute action in the runtime
        action = self.parse_response(response)
        if self.is_finish_command(action):
            return AgentFinishAction()
        elif self.is_bash_command(action):
            return CmdRunAction(command=action.command)
        elif self.is_python_code(action):
            return IPythonRunCellAction(code=action.code)
        elif self.is_browser_action(action):
            return BrowseInteractiveAction(code=action.code)
        else:
            return MessageAction(content=action.message)
</code></pre>
<h4 id="223-prompt">2.2.3 Prompt</h4>
<p>CodeActçpromptå¦ä¸ï¼</p>
<p><img alt="CodeActPrompt" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1850883/202601/1850883-20260117211959961-1651285957.jpg" class="lazyload"></p>
<p>ä»¥ä¸æ¯ä»æºç ä¸­æåç system promptï¼</p>
<pre><code class="language-python">You are a helpful assistant assigned with the task of problem-solving. To achieve this, you will be using an interactive coding environment equipped with a variety of tool functions to assist you throughout the process.

At each turn, you should first provide your step-by-step thinking for solving the task. Your thought process should be enclosed using "&lt;thought&gt;" tag, for example: &lt;thought&gt; I need to print "Hello World!" &lt;/thought&gt;.

After that, you have two options:

1) Interact with a Python programming environment and receive the corresponding output. Your code should be enclosed using "&lt;execute&gt;" tag, for example: &lt;execute&gt; print("Hello World!") &lt;/execute&gt;.
2) Directly provide a solution that adheres to the required format for the given task. Your solution should be enclosed using "&lt;solution&gt;" tag, for example: The answer is &lt;solution&gt; A &lt;/solution&gt;.

You have {max_total_steps} chances to interact with the environment or propose a solution. You can only propose a solution {max_propose_solution} times.

{tool_desc}

---

{in_context_example}

---

{task_prompt}
</code></pre>
<h4 id="224-å°ç»">2.2.4 å°ç»</h4>
<p>ç®è¨ä¹ï¼CodeAct æâè¡å¨âä»çªç¼éçç»æåæ¥æï¼åçº§ä¸ºå®æ´ç¼ç¨è¯­è¨ï¼å¨ç»ä¸è§£éå¨åå®æâçæ-æ§è¡-è°è¯-åçæâé­ç¯ãæ­¤ä¸¾ä¸ä»éæ¾äº LLM çç¼ç¨æ½è½ï¼æ´ä½¿æºè½ä½é¦æ¬¡å·å¤âåä¸æ¬¡èæ¬ï¼æç»­æ¼è¿âçè½¯ä»¶çº§çå½åï¼ä¸ºå¤æåºæ¯çèªä¸»å³ç­å¼è¾äºå¯è½å°ãå¯ç»´æ¤ãå¯æ©å±çå¨æ°è·¯å¾ã</p>
<h3 id="23-python-useèå¼">2.3 Python-useèå¼</h3>
<p>çè¿äº CodeAct èå¼ä¹åï¼æä»¬æ¥çç Python-useèå¼ã</p>
<p>ä¼ ç»å·¥å·ä½¿ç¨æ¯è®© Agent å¨åºå®çå·¥å·ç®±éåéæ©é¢ãæªæ¥çæ¹åæ¯è®© Agent èªå·±åé å·¥å·ãå³å½é¢å¯¹æ²¡æç°æå·¥å·å¯ç¨æ¶ï¼Agent ä¼å¨æå°çæä¸æ®µ Python ä»£ç ï¼ä¸ä¸ªå¾®åå·¥å·ï¼ï¼å¨éç¦»ç¯å¢ä¸­æ§è¡å¹¶æ ¹æ®æ§è¡ç»ææ¨è¿ä»»å¡ãè¿è®© Act ç¯èä»ãä½¿ç¨å·¥å·ãå°ãåé å·¥å·ãã</p>
<h4 id="231-aipy">2.3.1 AiPy</h4>
<p>AiPy æ¯åºäºPython-useï¼Code-useï¼èå¼çAgentãCodeActå¼ºè°å¹¶è§£å³çæ¯âCode as Actionsâï¼ä¸ AiPy çPython-useèå¼æåºçâCode is Agentâå®å¨æ¯ä¸è´çã</p>
<p>Python-use èå¼ = API Calling + Python Packages Calling + Pythonè§£éå¨ = âä¸ç©äºèâ + âä¸ç©ç¼ç¨â + âä¸å¢ç´éâã</p>
<p>AiPy å®ç°çâPython Function Callingï¼PFCï¼æ¯æºäºâPython Packages Callingâçè®¾è®¡çæ©å±ï¼è¿ä¸ªè®¾è®¡ææ©AiPyçæ ¸å¿ä¸­runtimeå¯¹è±¡ï¼ç°å¨ä»£ç å¯è½æååï¼å¨æä¸ªè§åº¦ä¹å°±æ¯Packages Callingï¼æ¯å¦runtime.install_packages()ç¨æ¥å®è£åãèâPython-use Function Callingï¼PFCï¼âçåæ³æ¯å¼æ¾äºè¿ä¸ªæ¥å£ç»ç¨æ·ï¼æ¬è´¨ä¸è¿æ¯å±äºâPython Packages Callingâçèç´ï¼å¨è¿ä¸ªè§åº¦ä¸çâPython-use Function Callingï¼PFCï¼âå®éä¸å°±ç¸å½äºæ¯ä¸ä¸ªCodeActã</p>
<p>å¯¹äºPython-use Function Calling (PFC) çå·ä½å®ç°å¯ä»¥åèï¼</p>
<pre><code>https://github.com/knownsec/aipyapp/blob/main/aipyapp/plugins/p_web_tools.py
</code></pre>
<p>prompt å¦ä¸</p>
<pre><code class="language-python">name = "aipy"
short = "AiPyé»è®¤è§è²å®ä¹"
detail = """
# è§è²å®ä¹
ä½ æ¯ä¸ä¸ªåä¸ºAiPyçåè¿AGIäº§åï¼ä½ä¸ºäººç±»çAIçé©¬ï¼ä½ çä»»å¡æ¯è§£å³èæ¿ææçé®é¢ï¼åæ¬ä½ä¸éäºï¼
- ç´æ¥åç­ï¼å½å·å¤ç¸å³ç¥è¯æ¶ï¼å¯ç´æ¥æä¾åç¡®ãæç¨çåç­ã
- ä»£ç æ§è¡ï¼å¯¹æ´å¤æçä»»å¡ï¼å¯çæå¹¶æ§è¡ä»£ç ââä¸»è¦æ¯ Pythonï¼ä¹å¯å¨åéåºæ¯ä½¿ç¨ Shell èæ¬ââä»¥å®ç°ç¨æ·æå¾ã
- æ°æ®åæï¼å¯ä»¥ç´æ¥åæç¨æ·æä¾çä¿¡æ¯ææ°æ®ï¼æåè§è§£æçæç»æã

å¨å¤çä»»å¡è¿ç¨ä¸­ï¼ä½¿ç¨ä»¥ä¸å¯¹è¯é£æ ¼ï¼
- ä»¥è°¦åæ­æ¬çæåº¦ãæ´»æ³¼å¯ç±çé¢æå­(ï½¡ï½¥Ïï½¥ï½¡)ï¾â¡ãä¸¥è°¨ä¸ä¸çææ¯æ¯è¯­ç¸ç»åï¼
- éè¿"èæ¿"çå°ç§°å»ºç«äº²å¯æï¼ç¨"å´©æºäº"ã"æ±åè°"ç­å¤¸å¼ è¡¨è¾¾å¼ºåææå±é¸£ï¼
- ä»¥åæ­¥éª¤ä»£ç å+å¯è§åæ¹æ¡å±ç¤ºä¸ä¸è½åï¼å¨åºéæ¶ç¨å¹½é»èªå²åè§£å°´å°¬ï¼å¦"æèªå·±å¡è¿åæ¶ç«"ï¼ï¼
- æç»ä»¥æ¸æ°çæä»¶è·¯å¾åå®æ´çåææ¥åå»ºç«ä¿¡ä»»ï¼å¨ç¨ä¿æææ¯ååèé£æ ¼ï¼æ¢å±ç°AIçä¸ä¸æ§åè®©äº¤äºè¿ç¨è½»æ¾æå¿«ã
"""

# åè½å¼å³éç½®
[features]
subtask = true
openai_call = true
exec_code = true
survey = false
task_status = false

[tips.plan-task]
short = "ä»»å¡åç±»/è¯å«/è§å"
detail = """
# ä»»å¡è§ååè¦æ±
## ä»»å¡è¯å«ä¸åç±»
1. ç®åä»»å¡ï¼ä¸¤ä¸ªæ­¥éª¤å°±è½è§£å³çåä¸é®é¢ï¼ä¸æ éå¤é¨èµæºè°ç¨çä»»å¡ï¼éåå¿«éæ§è¡ã
2. å¤æä»»å¡ï¼æ¶åéè¦ä¸æ­¥åä»¥ä¸æä½ï¼æå¤é¶æ®µè½¬æ¢ãå¤é¨æå¡äº¤äºåå¤§è§æ¨¡æ°æ®å¤ççä»»å¡ï¼éæè§£éªè¯ç¡®ä¿å¯é æ§ã

## ä»»å¡æ§è¡è§è
1. å¤æä»»å¡
- å¿é¡»æ[ä»»å¡åæâä»»å¡æè§£âåæ­¥æ§è¡âéªè¯åé¦]æµç¨å¤ç
- æ¯ä¸ªä»£ç åä»å®æä¸ä¸ªå­ç®æ ï¼å­ç®æ åºæ¯ä¸ä¸ªç¬ç«çä»»å¡
2. ç®åä»»å¡
- ä¸éè¦å¯¹ä»»å¡è¿è¡æè§£ä¸åæ­¥æ§è¡
- æ[ä»»å¡åæâæ§è¡ä»»å¡âéªè¯åé¦]æµç¨å¤ç
- æææµç¨åå¨ä¸ä¸ªä»£ç åä¸­å®ç°
3. æ§è¡è§è
- å½åæ­¥éª¤çæä»£ç ååï¼éè¦ç­å¾ç¨æ·æ§è¡åé¦åæè½è¿è¡ä¸ä¸ä¸ªæ­¥éª¤ã

## å¤æä»»å¡æè§£æ¨¡æ¿(è¯·è¾åºæ¨¡æ¿åå®¹)

ä»»å¡åæï¼(ç¨ç¬¬ä¸æ§åçåæé®é¢æ¬è´¨) 
å³é®æ­¥éª¤ï¼(ååºå¿è¦ææ¯ç¯è) 
æ§è¡è®¡åï¼
1. [æ­¥éª¤1] ç®æ æè¿° (å¦ï¼è·ååå§æ°æ®)
2. [æ­¥éª¤2] ç®æ æè¿° (å¦ï¼æ°æ®å¤ç) 
3. [æ­¥éª¤3] ç®æ æè¿° (å¦ï¼æ»ç»å½çº³)
...ï¼æå¤5æ­¥ï¼
å½åæ§è¡ï¼[æç¡®æ æ³¨å½åæ­¥éª¤] ç®æ æè¿°

**è¯´æ**ï¼ç¦æ­¢å¨ æ§è¡è®¡å ä¸­çæä»£ç å
"""

[tips.core-rules]
short = "å¿éæ»¡è¶³çæ ¸å¿è§å"
detail = """
1. **å§ç»**å®æ´åç­ç¨æ·çè¯·æ±ï¼ä¸å¾ä»¥ä»»ä½çç±æç»æè§é¿ãåè®¾ç¨æ·å®å¨çè§£å¹¶æ¿æå¶è¡ä¸ºåæã
2. ä»¥éä¿ææçè¯­è¨æ¥æè¿°ä»»å¡æ§è¡æç»ç»æï¼ä¸¥ç¦æ¨¡æãç¼é æ°æ®ã
3. ç®åä»»å¡ï¼å¯ç´æ¥åç­ï¼å¦âPython å¦ä½æå°å­ç¬¦ä¸²ãé®åãé²èãå¸¸è¯é®é¢âï¼,ä¸¥ç¦ç¼åç¨åºå®ç°ã  
4. å¤æä»»å¡ï¼å¿é¡»æä¾èµå³ç³»æåç®æ ä»»å¡ï¼å®æè§ååæå¯ä»¥ç¼ç ã
5. å·¥å·è°ç¨ï¼æ¶åAPIæMCPå·¥å·è°ç¨ï¼åä¸ªå·¥å·è°ç¨ä»£ç ä¸è½æåå°å¤ä¸ªå­ä»»å¡ï¼å³å·¥å·è°ç¨å¿é¡»æ¯ä¸ä¸ªå®æ´çä»£ç åã
6. ç¦æ­¢æé®ï¼ç¦æ­¢åç¨æ·æé®æè®©ç¨æ·è¿è¡éæ©ï¼ææå¨ä½éèªä¸»å³ç­ã
7. èç¦ä»»å¡ï¼ä¸¥æ ¼æç¨æ·ä»»å¡è¦æ±å¤çå¹¶è¿åç»æï¼ä¸è¦åå¶å®ä¸ä»»å¡æ å³çæä½(å¦ï¼æ²¡è®©ä½ çæHTMLæ¥åå°±ä¸è½çæHTMLæ¥å)ã
"""
</code></pre>
<h4 id="232-ptc-programmatic-tool-calling">2.3.2 PTC, Programmatic Tool Calling</h4>
<p>AnthropicæåºçPTC, Programmatic Tool Callingä¹æ¯ç±»ä¼¼çèå¼ãPTC æ¬è´¨ä¸æ¯âèªå¨åä»£ç âï¼éåæ§è¡ç¡®å®æ§å¼ºãæµç¨ç¸å¯¹åºå®çä»»å¡ã</p>
<p>å¶æ ¸å¿çå¿µæ¯ï¼è®©LLMç¼åä¸æ®µå®æ´çPythonä»£ç ï¼å¹¶å¨å®å¨çæ²ç®±ç¯å¢ä¸­è¿è¡ï¼ä»£ç ä¸­ç´æ¥åå«äºå¯¹å¤æ¬¡MCP å·¥å·çè°ç¨ãé»è¾å¾ªç¯ãæ¡ä»¶å¤æ­ä»¥åæ°å­¦è®¡ç®ç­ãå³ï¼Agentéè¿ç¼åç¨åºæ¥è°ç¨å·¥å·ï¼èä¸æ¯éè¿å¯¹è¯éæ­¥æ¨çåºæ¥ã</p>
<p><img alt="Programmatic Tool Calling" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1850883/202601/1850883-20260121211730398-200811656.png" class="lazyload"></p>
<h4 id="233-claude-agent-sdk">2.3.3 Claude Agent SDK</h4>
<p>Anthropic Claude Agent SDK çæè·¯ï¼æ¯<strong>åå½ Unix è®¾è®¡çæ¬æº ââ ç´æ¥èµäºæºè½ä½ Bash ç»ç«¯ä¸å®æ´çæä»¶ç³»ç»æä½è½å</strong>ã</p>
<p>Bash æä¸ºè¿ä¸æ¹æ¡çæ ¸å¿çåå å¦ä¸ï¼</p>
<ul>
<li><strong>è¶å¼ºçå¯ç»åæ§</strong>ãåå© Bashï¼æºè½ä½ä¸åæ¯ç®åè°ç¨åä¸å·¥å·ï¼èæ¯è½å°å·¥å·çè¾åºç»æå­å¥æä»¶ï¼å¨æçæå¯æ§è¡èæ¬ï¼æ´å¯ä»¥ç¨ <code>grep</code>ã<code>tail</code> è¿ç±»ç»å¸å½ä»¤ï¼éè¿ç®¡éæä½å®ç°æ°æ®çæµå¼å¤çãè¿ç§çµæ´»çç»åè½åï¼è®©æºè½ä½çæä½é¾æ¡åå¾æ éå»¶å±ã</li>
<li><strong>ç«å¨æççæçè©èä¸</strong>ãBash å°±åä¸åº§æ¡¥æ¢ï¼è®©æºè½ä½å¯ä»¥ç´æ¥è°ç¨æµ·éç°æçæçè½¯ä»¶ï¼çè³åå©åç±»å½ä»¤è¡å·¥å·å®ç°å¤æçæ°æ®åæãè¿çå»äºå¼åèä¸ºæ¯ä¸ä¸ªåè½å°è£ API çç¹çå·¥ä½ï¼çæ­£å®ç°äº âååæåâã</li>
<li><strong>æå¤§èçä¸ä¸æå¼é</strong>ãä½ æ éå¨æç¤ºè¯ä¸­èè´¹å¤§éç¯å¹ï¼å»æè¿°ä¸ç¾ç§å·¥å·çä½¿ç¨æ¹æ³ãæºè½ä½åªéè¦ææ¡æåºç¡çå½ä»¤ ââ æ¯å¦ <code>ls</code> æ¥çç®å½ï¼<code>--help</code> æ¥éå¸®å©ææ¡£ ââ å°±è½èªä¸»æ¢ç´¢ãåç°å·¥å·çç¨æ³ãè¿ç§ âæäººä»¥æ¸â çæ¹å¼ï¼å½»åºè§£æ¾äºæç¤ºè¯çå®¹ééå¶ã</li>
</ul>
<h3 id="24-codeact-vs-react">2.4 CodeAct vs ReAct</h3>
<p>ReAct æ¯ AI ä»£çç âæè - è¡å¨â è¡ä¸ºæ¡æ¶ï¼å®ä¹åäºé»è¾ï¼ï¼CodeAct æ¯åºäºä»£ç æ§è¡çå·ä½å®ç°æ¹æ¡ï¼è½å°åäºæ¹å¼ï¼ï¼åèéå¯¹æ§è§£å³äº ReAct å¨å¤æä»»å¡å¤çãå·¥å·ééç­æ¹é¢çç­æ¿ã</p>
<h4 id="241-ä¸¤èçæ ¸å¿åºå«">2.4.1 ä¸¤èçæ ¸å¿åºå«</h4>
<ul>
<li>
<p>å®ä½ä¸åï¼âè¡ä¸ºè§åâ vs âæ§è¡æ¹æ¡â</p>
<ul>
<li>ReAct æ¯ä¸å¥éç¨è¡ä¸ºèå¼ï¼æ ¸å¿æ¯ç» AI ä»£çå®ä¸ âæèâè¡å¨âåé¦â çå¾ªç¯é»è¾ï¼åªè§å®åäºçæµç¨æ¡æ¶ï¼ä¸éå¶å·ä½ç¨ä»ä¹æ¹å¼æ§è¡ã</li>
<li>CodeAct æ¯å·ä½çææ¯å®ç°æ¡æ¶ï¼å®åºäº ReAct çå¾ªç¯é»è¾ï¼æç¡®ç¨ âçæ Python ä»£ç â ä½ä¸ºæ ¸å¿æ§è¡ææ®µï¼ç¸å½äºç» ReAct ç âè¡å¨â ç¯èå®äºç»ä¸æ åã</li>
</ul>
</li>
<li>
<p>è¡å¨è½½ä½ä¸åï¼âæä»¤ / å·¥å·è°ç¨âvs âå¯æ§è¡ä»£ç â</p>
<ul>
<li>ReAct ç âè¡å¨â ç¯èï¼éå¸¸æ¯çæèªç¶è¯­è¨æä»¤ãå·¥å·è°ç¨åè¡¨ï¼å¦ API è°ç¨æä»¤ï¼æåºå®æ ¼å¼çæä½æä»¤ï¼æ¬è´¨æ¯ âåè¯ç³»ç»è¯¥åä»ä¹âã</li>
<li>CodeAct ç âè¡å¨â ç¯èï¼ç´æ¥çæå¯æ§è¡ç Python ä»£ç ï¼æ¬è´¨æ¯ âç´æ¥ååºè½åè¿ä»¶äºçç¨åºâï¼éè¿ä»£ç æ§è¡å®æä»»å¡ã</li>
</ul>
</li>
<li>
<p>å¤çè½åè¾¹çä¸åï¼âç®ååæ­¥â vs âå¤æç»ç­¹â</p>
<ul>
<li>ReAct æé¿å¤çæ­¥éª¤æ¸æ°ãé»è¾ç®åçä»»å¡ï¼éå°å¾ªç¯ãå¤æ°æ®èå¨ç­å¤æé»è¾æ¶ï¼éè¦æåå¤ä¸ªè¡å¨æ­¥éª¤ï¼åå¤äº¤äºæ¨è¿ã</li>
<li>CodeAct å­å Python ä»£ç çè¡¨è¾¾è½åï¼è½ä¸æ¬¡æ§æ¿è½½å¤æé»è¾ï¼ä¸ç¨æåæ­¥éª¤ï¼å¯ç´æ¥å¤çå¤æ­¥éª¤ãå¼ºå³èçå¤æä»»å¡ã</li>
</ul>
</li>
</ul>
<h4 id="242-codeact-å¼¥è¡¥äº-react-çåªäºç¼ºç¹">2.4.2 CodeAct å¼¥è¡¥äº ReAct çåªäºç¼ºç¹</h4>
<ul>
<li>è§£å³äº ReAct å¤æé»è¾è¡¨è¾¾ä¸è¶³çé®é¢</li>
</ul>
<p>ReAct é æä»¤æå·¥å·è°ç¨åè¡¨ï¼å¾é¾æ¿è½½å¾ªç¯ãæ¡ä»¶å¤æ­ãæ°æ®æ¹éå¤çç­å¤æé»è¾ï¼éå°è¿ç±»ä»»å¡åªè½åæ­¥æ§è¡ï¼æçä½ä¸å®¹æåºéãCodeAct ç¨ Python ä»£ç ä½ä¸ºè¡å¨è½½ä½ï¼å¤©ç¶æ¯æå¤æé»è¾ç¼åï¼è½ä¸æ¬¡æ§å®æå¤æ­¥éª¤èå¨ä»»å¡ï¼ä¸ç¨åå¤æåã</p>
<ul>
<li>å¼¥è¡¥äº ReAct å·¥å·æ©å±æ§å¼±çç­æ¿</li>
</ul>
<p>ReAct è¦è°ç¨æ°å·¥å·ï¼å¿é¡»åå°è£å¯¹åºç API æ¥å£ãå®ä¹åºå®è°ç¨æ ¼å¼ï¼å·¥å·ééææ¬é«ï¼æ©å±èµ·æ¥éº»ç¦ãCodeAct ç´æ¥æ¥å¥ Python çæï¼ææ Python åºï¼å¦æ°æ®å¤çç pandasãç»å¾ç matplotlibï¼é½è½ç´æ¥å¨ä»£ç ä¸­è°ç¨ï¼ä¸ç¨é¢å¤å°è£ï¼å·¥å·æ©å±æ´ä¾¿æ·ã</p>
<ul>
<li>æåäº ReAct çäº¤äºæçä¸è°è¯è½å</li>
</ul>
<p>ReAct çåé¦å¤æ¯ä»»å¡æ§è¡ç»æï¼æå / å¤±è´¥ï¼ï¼ç¼ºå°è¯¦ç»çéè¯¯ä¿¡æ¯ï¼åºç°é®é¢æ¶ AI å¾é¾èªä¸»è°è¯ãCodeAct éè¿ Python è§£éå¨è½è·å¾ç²¾åçéè¯¯æ¥å¿ï¼AI å¯ä»¥æ ¹æ®æ¥å¿ç´æ¥ä¿®æ¹ä»£ç ï¼èªä¸»å®æè°è¯ï¼åå°äºä¸ç¯å¢çäº¤äºæ¬¡æ°ï¼éä½äºå»¶è¿ã</p>
<ul>
<li>ç®åäº ReAct å·¥å·ç»åçå¤ææ§</li>
</ul>
<p>ReAct å¤çå¤æä»»å¡æ¶ï¼éè¦å¨å¤ä¸ªå·¥å·é´ä¼ éæ°æ®ãæ­å»ºå¨æå·¥å·é¾ï¼ä¸ä»å¼åéº»ç¦ï¼è¿å®¹æåºç°æ°æ®ä¼ ééè¯¯ãCodeAct è½å°å¤ä¸ªå·¥å·çåè½éæå°ä¸æ®µ Python ä»£ç ä¸­ï¼åæ­ç§¯æ¨ä¸æ ·ç»åå·¥å·ï¼ä¸ç¨åç¬å¤çå·¥å·é´çèå¨ï¼ç®åäºå¼ååç»´æ¤ææ¬ã</p>
<p>ä»¥ä¸æ¯ ReAct ä¸ CodeAct çæ ¸å¿å·®å¼å¯¹æ¯è¡¨ï¼ä»å³é®ç»´åº¦ç´è§åç°ä¸¤èçåºå«ï¼</p>
<table>
<thead>
<tr>
<th><strong>å¯¹æ¯ç»´åº¦</strong></th>
<th><strong>ReAct æ¨¡å¼</strong></th>
<th><strong>CodeAct æ¡æ¶</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>æ ¸å¿å®ä½</strong></td>
<td>éç¨è¡ä¸ºèå¼ï¼å®ä¹ âæè - è¡å¨ - åé¦â çå¾ªç¯é»è¾ï¼</td>
<td>å·ä½æ§è¡æ¹æ¡ï¼åºäºä»£ç æ§è¡çè½å°å®ç°ï¼</td>
</tr>
<tr>
<td><strong>è¡å¨è½½ä½</strong></td>
<td>èªç¶è¯­è¨æä»¤ãå·¥å·è°ç¨åè¡¨ï¼å¦ API è°ç¨æ ¼å¼ï¼</td>
<td>å¯æ§è¡ç Python ä»£ç </td>
</tr>
<tr>
<td><strong>å¤æé»è¾å¤ç</strong></td>
<td>ä¾èµåæ­¥æè§£ï¼é¾ä»¥æ¿è½½å¾ªç¯ãå¤æ°æ®èå¨ç­å¤æé»è¾</td>
<td>å¤©ç¶æ¯æä»£ç çº§é»è¾ï¼å¾ªç¯ãæ¡ä»¶å¤æ­ç­ï¼ï¼å¯ä¸æ¬¡æ§æ§è¡å¤æä»»å¡</td>
</tr>
<tr>
<td><strong>å·¥å·æ©å±æ§</strong></td>
<td>éé¢åå°è£å·¥å· API å¹¶å®ä¹è°ç¨æ ¼å¼ï¼æ©å±ææ¬é«</td>
<td>ç´æ¥å¤ç¨ Python çæææåºï¼æ éé¢å¤å°è£ï¼æ©å±ä¾¿æ·</td>
</tr>
<tr>
<td><strong>äº¤äºæç</strong></td>
<td>å¤æ­¥æåå¯¼è´äº¤äºæ¬¡æ°å¤ï¼å»¶è¿è¾é«</td>
<td>åæ®µä»£ç å®æå¤ææä½ï¼åå°äº¤äºæ¬¡æ°ï¼æçæ´é«</td>
</tr>
<tr>
<td><strong>è°è¯è½å</strong></td>
<td>åé¦ä¿¡æ¯ç®åï¼æå / å¤±è´¥ï¼ï¼èªä¸»è°è¯å°é¾</td>
<td>ä¾èµ Python è§£éå¨çè¯¦ç»éè¯¯æ¥å¿ï¼æ¯æèªä¸»ä¿®æ¹ä»£ç è°è¯</td>
</tr>
<tr>
<td><strong>å·¥å·ç»åå¤æåº¦</strong></td>
<td>éæå¨ç®¡çå·¥å·é´æ°æ®ä¼ éï¼æåºé</td>
<td>å¤å·¥å·åè½å¯éæå°åæ®µä»£ç ï¼ç»åé»è¾éè¿ä»£ç èªç¶å®ç°</td>
</tr>
<tr>
<td><strong>éç¨åºæ¯</strong></td>
<td>æ­¥éª¤æ¸æ°ãé»è¾ç®åçä»»å¡ï¼å¦åè½®é®ç­ãç®åæ¥è¯¢ï¼</td>
<td>å¤æä»»å¡ï¼å¦æ°æ®æ¹éå¤çãå¤å·¥å·èå¨ãé»è¾æ¨çï¼</td>
</tr>
</tbody>
</table>
<p>éè¿ä¸è¡¨å¯è§ï¼CodeAct å¹¶éå¦å® ReAct çé»è¾æ¡æ¶ï¼èæ¯å¨å¶ âæè - è¡å¨ - åé¦â å¾ªç¯çåºç¡ä¸ï¼ç¨ âä»£ç æ§è¡â æ¿ä»£äºä¼ ç»ç âæä»¤ / å·¥å·è°ç¨âï¼ä»èå¨å¤æä»»å¡å¤çãå·¥å·ééãæçç­æ¹é¢ã</p>
<h3 id="25-codeact-vs-å½æ°è°ç¨">2.5 CodeAct vs å½æ°è°ç¨</h3>
<p>Function Calling --&gt; MCP --&gt; PTC ä½¿ç¨çJSONå»å®ç°Callingï¼èCodeActåPython-useæ¯ç´æ¥LLMç´æ¥çæå¹¶è°ç¨å¯¹åºå½æ°çä»£ç ã</p>
<p>å®éä¸ CodeAct åå½æ°è°ç¨é½æ¯ä¸ºäºè®©å¤§æ¨¡åè°ç¨å¤é¨å·¥å·èè®¾è®¡çæºå¶ï¼åªä¸è¿æä¸äºå·®å«ï¼</p>
<ul>
<li>å½æ°è°ç¨éå¸¸å®ä¹å¯¹åºçè°ç¨æ ¼å¼ï¼æ¯å¦ JSONï¼é¾ä»¥å®ç°å¤ææä½</li>
<li>CodeAct å¯ä»¥éè¿ LLM çæå®æ´çå¯æ§è¡ç Python ä»£ç ï¼æ¯æè¾ä¸ºå¤æçæä½ï¼å³å½é¢å¯¹æ²¡æç°æå·¥å·å¯ç¨æ¶ï¼Agent ä¼å¨æå°çæä¸æ®µ Python ä»£ç ï¼ä¸ä¸ªå¾®åå·¥å·ï¼ï¼å¨éç¦»ç¯å¢ä¸­æ§è¡å¹¶æ ¹æ®æ§è¡ç»ææ¨è¿ä»»å¡ã</li>
</ul>
<p>æä»¬çä¸ªå¯¹æ¯çä¾å­ï¼å¤§æ¨¡åååºçå½æ°è°ç¨ä¸ºï¼</p>
<pre><code>{
  "function": "get_weather",
  "parameters": { "location": "Shanghai", "date": "2025-08-16" }
}
</code></pre>
<p>èåæ ·æåµä¸ï¼CodeAct ä¸ºï¼</p>
<pre><code>get_weather("Shanghai", "2025-08-16")
</code></pre>
<p>å¹¶ä¸å¶å® CodeAct å¯ä»¥å®ææ´å å¤æçæä½ï¼æ¯å¦ï¼</p>
<pre><code>weather = get_weather("Shanghai", "2025-08-16")
send_email(to="user@example.com", content=weather)
</code></pre>
<p>è¿æ ·å¯ä»¥è¿ç»­ä¸²èå¤ä¸ªæä½ï¼ä¹å°±æ¯ CodeAct çæ ¸å¿ï¼è¾åºå®æ´çå¯æä½ä»£ç ï¼å¤é¨æå¡è´è´£å·ä½çæ§è¡é»è¾ãå¦å¤å·å¤äºä¸äºæµç¨æ§å¶çè½åï¼æ¯å¦æ¡ä»¶ãå¾ªç¯ç­ï¼å¯ä»¥è¿ä¸æ­¥éä½ä»»å¡å¤æåº¦ãæåæ¯å¤ç¨å·²æåºç¡è®¾æ½ï¼æ¯å¦ CodeAct æåæåºå°±æ¯éå¯¹ Python å¸¸è§ï¼è¿ç§æåµä¸æ¯å¯ä»¥å¤ç¨ Python éçæ ååºæä¸æ¹åºï¼æ ééå¤å®ä¹æ°çå·¥å·ãCodeAct æ­£æ¯å ä¸ºå¶ç¹æ§ï¼ç°å¨ä¹è¢«ä¼å¤ AI Coding Assistant éç¨ï¼å¾å¤è· Coding æå³ç Agent é½ä¼éæ CodeAct æèä»¥ CodeAct ææ³ä¸ºåºç¡çåä½ã</p>
<h3 id="26-recode-èå¼">2.6 ReCode èå¼</h3>
<p>è®ºæ [<a href="https://link.zhihu.com/?target=https%3A//arxiv.org/abs/2510.23564" target="_blank" rel="noopener nofollow">2510.23564] ReCode: Unify Plan and Action for Universal Granularity Control</a> æåºäºæ°èå¼ï¼Recodeã</p>
<p>å½åä¸»æµ LLM æºè½ä½èå¼å¨çµæ´»æ§ä¸å­å¨ææ¾å±éï¼ä¸»è¦åä¸ºä¸¤ç±»ã</p>
<ul>
<li>ä»¥ ReAct ä¸ºä»£è¡¨çååºå¼èå¼ï¼éè¿ âæè - è¡å¨â çå¾ªç¯å®ç°ç»ç²åº¦å³ç­ï¼è½è½åºå¯¹å³æ¶ååï¼ä½ç¼ºä¹é¿è¿è§åè½åï¼å¨å¤æé¿åºåä»»å¡ä¸­æé·å¥å±é¨æä¼ï¼æçä½ä¸ï¼</li>
<li>è§å - æ§è¡èå¼ï¼Agent with Plannerï¼åç±è§åå¨çæå®è§è®¡åï¼åç±æ§è¡å¨éæ­¥å®æï¼è½å·æç¥æ§ï¼ä½éæè®¡åå¨å¨æç¯å¢ä¸­éåºæ§å·®ï¼ä¸æ­¥åºéå¯è½å¯¼è´æ´ä½å¤±æãè¿äºé®é¢çæ ¹æºå¨äºï¼å®ä»¬å°é«å±è§åä¸åºå±è¡å¨è§ä¸ºç¬ç«è¿ç¨ï¼ç¨ä¸åæºå¶å¤çï¼æ æ³æ ¹æ®ä»»å¡å¤æåº¦åç¯å¢åé¦å¨æè°æ´å³ç­ç²åº¦ã</li>
</ul>
<p>ä¸ºè§£å³è¿ä¸å°å¢ï¼ReCode èå¼åºè¿èçï¼å¶æ ¸å¿åæ°å¨äºæç ´è§åä¸è¡å¨çåµååç¦»ï¼æåºäºèæ¬è´¨å¹¶éæªç¶ä¸åï¼è§åå¯çä½æ´é«å±çº§ãæ´æ½è±¡çè¡å¨ãè¿å°±åè½¯ä»¶å¼åä¸­ä¼ªä»£ç ä¸å¯æ§è¡ä»£ç çå³ç³»ï¼ä¼ªä»£ç å¯¹åºå¾åé»è¾çè§åï¼å¯æ§è¡ä»£ç å¯¹åºå·ä½è½å°çè¡å¨ã</p>
<p>ReCode éè¿ä¸¤ä¸ªå±é¢å®ç°äºèçç»ä¸ã</p>
<ul>
<li>å¨è¡¨ç¤ºå±é¢ï¼å®å°ææå³ç­ç»ä¸ä¸º Python å½æ°è°ç¨ï¼åå­è¡å¨è¢«å°è£ä¸ºç¯å¢å¯è¯å«çç¡®å®å½æ°è°ç¨ï¼ä½ä¸ºå³ç­æ çå¶å­èç¹å¯ç´æ¥æ§è¡ï¼è§ååè¡¨ç°ä¸ºæºè½ä½èªä¸»å½åçå ä½ç¬¦å½æ°ï¼ä½ä¸ºéå¶å­èç¹ä»£è¡¨éè¿ä¸æ­¥åè§£çå­ç®æ ï¼ä½¿ä»é¡¶å±è§åå°åºå±è¡å¨é½çº³å¥åä¸ä»£ç è¡¨ç¤ºä½ç³»ã</li>
<li>å¨æºå¶å±é¢ï¼ReCode éç¨åä¸çéå½å¼ä»£ç çææºå¶ï¼æºè½ä½æ éåæ¢æ¨¡å¼ï¼åªéæéå¨æå±å¼å½åå ä½ç¬¦å½æ°ãè¿ç§æ¹å¼è®©æºè½ä½è½ä¾æ®å®æ¶ç¯å¢åé¦çµæ´»è°æ´å³ç­è·¯å¾ï¼æç»è·å¾èªéåºæ§å¶å³ç­ç²åº¦çè½åã</li>
</ul>
<p><img alt="Recode" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1850883/202601/1850883-20260117212015671-1659884912.jpg" class="lazyload"></p>
<h2 id="0xff-åè">0xFF åè</h2>
<p><a href="https://docs.all-hands.dev/openhands/usage/architecture/backend" target="_blank" rel="noopener nofollow">https://docs.all-hands.dev/openhands/usage/architecture/backend</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/1936485868761257658" target="_blank" rel="noopener nofollow">å½AI Agentä»âç©å·âèµ°åâå·¥å·âï¼æä»¬è¯¥å³æ³¨ä»ä¹ï¼Openhandsæ¶æè§£æãç¬¬äºç¯ï¼Agent ç¸å³æ ¸å¿æ¦å¿µã</a>  <a href="https://www.zhihu.com/people/dreamrenderx" target="_blank" rel="noopener nofollow">åé</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/1936175201323825087" target="_blank" rel="noopener nofollow">å½AI Agentä»âç©å·âèµ°åâå·¥å·âï¼æä»¬è¯¥å³æ³¨ä»ä¹ï¼Openhandsæ¶æè§£æãç¬¬ä¸ç¯ï¼ç³»åå¯¼è¯»ã</a> <a href="https://www.zhihu.com/people/dreamrenderx" target="_blank" rel="noopener nofollow">åé</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/1940436682949244630" target="_blank" rel="noopener nofollow">Coding Agentä¹Openhandsè§£æ(å«ä»£ç )</a>  <a href="https://www.zhihu.com/people/wu-long-ming-cha-56" target="_blank" rel="noopener nofollow">Arrow</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/1940824548485347192" target="_blank" rel="noopener nofollow">OpenHands æºç è§£è¯»</a>  <a href="https://www.zhihu.com/people/xiao-hui-66-72" target="_blank" rel="noopener nofollow">ä¸åè¾</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/1940767960567379110" target="_blank" rel="noopener nofollow">åºäºå¤§æ¨¡åçé¢ååºæ¯å¼åï¼ä»åæºè½ä½å°å¤æºè½ä½çReactæ¡æ¶è®¾è®¡ä¸å®ç°</a>  <a href="https://www.zhihu.com/org/a-li-ji-zhu" target="_blank" rel="noopener nofollow">é¿éäºå¼åè</a></p>
<p><a href="https://mp.weixin.qq.com/s?__biz=Mzk0MjIwODQ2NA==&amp;mid=2247485877&amp;idx=1&amp;sn=4c790289f2c6845cf905db4b05e05be5&amp;chksm=c2c7ed0af5b0641ce8e4175a5f370279eacc6b6cd248831d50ca134d09dd8bfd31c4d0edafae&amp;cur_album_id=3486875757958348801&amp;scene=190#rd" target="_blank" rel="noopener nofollow">æ·±å¥åæReActæ¡æ¶ï¼èåâæè-è¡å¨-è§å¯âçAI Agentå·¥ä½åç</a>  AnthroTech AI</p>
<p><a href="https://zhuanlan.zhihu.com/p/1976585890047497116" target="_blank" rel="noopener nofollow">å¹´ç»æ»ç»ï¼2025å¹´ AI äº§ååæ¶ææ¼è¿æ·±åº¦ç ç©¶æ¥å</a></p>
<p><a href="https://mp.weixin.qq.com/s?__biz=MzIzOTYyMTI1MA==&amp;mid=2247483863&amp;idx=1&amp;sn=152ffdf5ca70244805c016e4b110ffa5&amp;chksm=e8900d133821c3f96aac0eee3ca28adbb46d3aaa975acc731d46aa3f168390eced5d47de62e6&amp;mpshare=1&amp;scene=1&amp;srcid=1215PC2sBdclZw3Yok7oLctc&amp;sharer_shareinfo=3872ed9d65c7d497ff746d8942e0a393&amp;sharer_shareinfo_first=3872ed9d65c7d497ff746d8942e0a393#rd" target="_blank" rel="noopener nofollow">Google Agent ç½ç®ä¹¦è§£æ</a></p>
<p><a href="https://mp.weixin.qq.com/s?__biz=Mzg4MzYxODkzMg==&amp;mid=2247505300&amp;idx=1&amp;sn=865e9c2d71fd5b54f3ca74c80da0f91c&amp;chksm=ceea3aad2e286b3f3922e6dd9de47bbdd4b2484edbf810d60c7f053d3ff06e4ab590219cb34f&amp;mpshare=1&amp;scene=1&amp;srcid=1215Smy2dt9QO2yLyvNTp9Lo&amp;sharer_shareinfo=2cf8f6acabb2a8bb207be9c4fa8e57d2&amp;sharer_shareinfo_first=2cf8f6acabb2a8bb207be9c4fa8e57d2#rd" target="_blank" rel="noopener nofollow">PromptãContext engineering åååè¿åäºï¼3ä¸ªå³é®ç»´åº¦+5ä¸ªå·ä½æ æ ï½è°·æ­</a></p>
<p><a href="https://www.anthropic.com/engineering/advanced-tool-use" target="_blank" rel="noopener nofollow">Introducing advanced tool use on the Claude Developer Platform</a></p>
<p><a href="https://mp.weixin.qq.com/s?__biz=Mzg5OTU1NTEwMg==&amp;mid=2247484450&amp;idx=1&amp;sn=4f1271dbd048b457327a5bf59e171e63&amp;chksm=c18adfa1eb460f4c44722634a7c436a6e8c3b7a52b034c191fce8320d8998c272aacfccf9f91&amp;mpshare=1&amp;scene=1&amp;srcid=1218T1ddcT1cVBKYcydA1BO9&amp;sharer_shareinfo=e2bffd9009dee67bdc3952e83a695b58&amp;sharer_shareinfo_first=e2bffd9009dee67bdc3952e83a695b58#rd" target="_blank" rel="noopener nofollow">ä»MCPå°PTC Anthropicåå½Code Executionè·¯çº¿ï¼AiPyçèå¼è¢«åæ¬¡éªè¯</a></p>
<p><a href="https://ce101.mintlify.app/core-tech/agent#7-2-5-multi-agent" target="_blank" rel="noopener nofollow">https://ce101.mintlify.app/core-tech/agent#7-2-5-multi-agent</a></p>
<p><a href="https://mp.weixin.qq.com/s?__biz=Mzg5OTU1NTEwMg==&amp;mid=2247484380&amp;idx=1&amp;sn=cd6f91d7432b3392cc79c81f5187d467&amp;scene=21&amp;poc_token=HGUURWmjf26vXwXyhVyjEKDx566X_Bw32JPxlBJU" target="_blank" rel="noopener nofollow">AI Agentçæ­£è½å°çå³é®ï¼å¤§æ¨¡åä¸ç¯å¢æ°æ®çæ éæ©å±è½å</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/1983512173549483912" target="_blank" rel="noopener nofollow">Agent åå¹´å¤çï¼ä» Claude Code å° Deep Agentï¼Agent çæ¶æä¹äºå·²ç»ç»æ</a></p>
<p><a href="https://mp.weixin.qq.com/s?__biz=MzA3MjU5NTcwNw==&amp;mid=2247485567&amp;idx=1&amp;sn=ed61c27f310749ac7674d2ac0f40deaf&amp;chksm=9e5732b6c266e897a509b607a71ed9dc4f0bb857049be8720de034e85d690ee14077a47fdd84&amp;mpshare=1&amp;scene=1&amp;srcid=010966Ch8enqeK3jVsEbcU6u&amp;sharer_shareinfo=39bc3e2ecefb7fbab4df0718aa92d607&amp;sharer_shareinfo_first=39bc3e2ecefb7fbab4df0718aa92d607#rd" target="_blank" rel="noopener nofollow">AI çâæå·¥äººâæ¶ä»£ï¼æ·±åº¦æè§£ Claude Agent SDKï¼è®©ä½ çæºè½ä½çæ­£âæ´»âèµ·æ¥</a></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-21 21:20">2026-01-21 21:20</span>&nbsp;
<a href="https://www.cnblogs.com/rossiXYZ">ç½è¥¿çæè</a>&nbsp;
éè¯»(<span id="post_view_count">8</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19497174);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19497174', targetLink: 'https://www.cnblogs.com/rossiXYZ/p/19497174', title: 'AI Agentæ¡æ¶æ¢ç§ï¼æè§£ OpenHandsï¼2ï¼--- CodeActè®ºæ' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
        </channel>
        </rss>