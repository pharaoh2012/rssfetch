<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åå®¢å­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2026-02-06T08:36:45.312Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åå®¢å­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ ArcGISææç®¡çå¨æ­ç½åèªå¨åæ­¢ ]]></title>
    <link>https://www.cnblogs.com/leaguecn/p/19585000</link>
    <guid>b624ee853da9f6616da8b27c73425cb6</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/leaguecn/p/19585000" title="åå¸äº 2026-02-06 16:07">
    <span role="heading" aria-level="2">ArcGISææç®¡çå¨æ­ç½åèªå¨åæ­¢</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="é®é¢çç±æ¥">é®é¢çç±æ¥</h2>
<p>ç³»ç»éè£win10 22h2ï¼éæ°å®è£ArcGIS10.2.2çæ¬ï¼æ­ç½å¯å¨<strong>è®¸å¯æå¡å¨ç®¡çåï¼LicenseManagerï¼</strong> çæ¶åæ æ³å¯å¨ï¼èç½æ¶è¯¥è½¯ä»¶èªå¨å¯å¨äºï¼æ­ç½æ¶åèªå¨åæ­¢äºã</p>
<h3 id="ææ¥">ææ¥</h3>
<p>æ¥çlmgrd9.logæ²¡å¥é®é¢ï¼-&gt;<strong>ææ</strong>-&gt;<strong>æºå¨ID</strong>ï¼å¾å°ä»¥ä¸çå¼å¸¸æ è¯ã</p>
<p><img src="https://img2024.cnblogs.com/blog/1410060/202602/1410060-20260206160653610-505996147.png" alt="image" loading="lazy"></p>
<ul>
<li>å¼å¸¸çæºå¨ID</li>
</ul>
<pre><code>ä¸é¢ååºäºæ­¤è®¡ç®æºçä¸»æºæ è¯ç¬¦:

MAC å°å: xxxxxxxxx
ä¸»æºå: DESKTOP-7E9QMGD
IP å°å: ::1
å: DESKTOP-7E9QMGD
UMN 2: xxxxxxxxxxxxxxxxxxxxxxx
</code></pre>
<p>éæ°è¿æ¥WIFIåï¼æ¥çå°æ­£å¸¸çè¡¨ç¤ºï¼</p>
<ul>
<li>æ­£å¸¸çæºå¨ID</li>
</ul>
<pre><code>ä¸é¢ååºäºæ­¤è®¡ç®æºçä¸»æºæ è¯ç¬¦:

MAC å°å: xxxxxxxxx
ä¸»æºå: DESKTOP-7E9QMGD
IP å°å: 192.168.9.56
å: DESKTOP-7E9QMGD
UMN 2: xxxxxxxxxxxxxxxxxxxxxxx
</code></pre>
<h2 id="çå«ä¸ä¿®å¤">çå«ä¸ä¿®å¤</h2>
<h3 id="å¯è½åºç°çå¼å¸¸åå°è¯">å¯è½åºç°çå¼å¸¸åå°è¯</h3>
<ul>
<li>é¦åææ¥äºHostsæä»¶ï¼ä¸å­å¨localhostè¢«è§£æå°::1è¿ä¸ªipv6ä¸­åå®¹</li>
<li>è°æ´ipv4åipv6é¡ºåºï¼ä½¿æ­ç½æåµä¸æéåç¯å°127.0.0.1ï¼ä½¿å¾ipæå¯ç¨å¼ãè°æ´åï¼è®¸å¯æå¡å¨ç®¡çåæ­ç½ç¶æè·åçIPä¾æ§æ¯::1åç¯å°å</li>
<li>èªè¡ç»å»ºå±åç½ï¼ä½¿å¾æIPå°åã</li>
</ul>
<p>ä½¿ç¨å¤§æ¨¡åè¿è¡æ£ç´¢ï¼</p>
<pre><code>æ­ç½åArcGIS License Managerè·åIPæ¶åºç°ä»¥ä¸çlogï¼ä¸é¢ååºäºæ­¤è®¡ç®æºçä¸»æºæ è¯ç¬¦:

MAC å°å: xxxxxxxxx
ä¸»æºå: DESKTOP-7E9QMGD
IP å°å: ::1
å: DESKTOP-7E9QMGD
UMN 2: xxxxxxxxxxxxxxxxxxxxxxx

</code></pre>
<ul>
<li>ç®åè¯´ï¼æ­ç½åï¼ä½ ççµèæ²¡æçå®çç©çç½ç» IPï¼License Manager åªè½æ£æµå°ç³»ç»é»è®¤çæ¬å°åç¯å°å ::1ï¼è¿ä¼å¯¼è´è®¸å¯éªè¯å¤±è´¥ï¼å ä¸ºè®¸å¯æä»¶ç»å®çæ¯ç©çç½å¡ççå® IP/MACï¼ã</li>
</ul>
<p><strong>æ­ç½æ¶åºç°è¯¥é®é¢çæ ¸å¿åå </strong></p>
<ul>
<li>ArcGIS License Manager éªè¯è®¸å¯æ¶ï¼ä¼ä¼åè¯»åç©çç½å¡ççå® IP å°åï¼å¦ 192.168.1.100ï¼ï¼ä½æ­ç½åï¼</li>
</ul>
<ol>
<li>ç©çç½å¡ï¼ä»¥å¤ªç½ãWiFiï¼å¤äºãæªè¿æ¥ãç¶æï¼ç³»ç»ä¸ä¼åéçå® IPï¼</li>
<li>ç³»ç»ä¼é»è®¤ä½¿ç¨ãåç¯ééå¨ãç IPï¼::1 æ 127.0.0.1ï¼ä½ä¸ºæ¬æºå¯ä¸å¯ç¨ IPï¼</li>
<li>è®¸å¯æä»¶ä¸­ç»å®çæ¯ä½ èç½æ¶çç©çç½å¡ IP/MACï¼ä¸æ­ç½æ¶çåç¯å°åä¸å¹éï¼å¯¼è´éªè¯å¤±è´¥ã</li>
</ol>
<p><strong>è§£å³æ¹æ¡ï¼æ­ç½æ¶è®© License Manager è¯»åå°ãèæ IPã</strong>*<br>
è¦è§£å³è¿ä¸ªé®é¢ï¼æ ¸å¿æ¯ç»çµèæ·»å ä¸ä¸ªå§ç»å­å¨çãèæç½å¡ãï¼è®© License Manager æ è®ºæ¯å¦æ­ç½ï¼é½è½è¯»åå°åºå®ççå® IPï¼èéåç¯å°åï¼ã</p>
<h3 id="ææçè§£å³åæ³">ææçè§£å³åæ³</h3>
<ul>
<li>æ¹æ³ä¸ï¼å®è£ãMicrosoft ç¯åééå¨ã</li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/1410060/202602/1410060-20260206160628370-802218261.png" alt="image" loading="lazy"></p>
<ol>
<li>è¿æ¯ Windows èªå¸¦çèæç½å¡å·¥å·ï¼å®è£åä¼çæä¸ä¸ªèæç©çç½å¡ï¼æ­ç½æ¶ä¹è½åéåºå® IPï¼å®ç¾éé ArcGIS License Managerã</li>
<li>æä½æ­¥éª¤ï¼Windows 10/11 éç¨ï¼ï¼</li>
<li>æå¼ãè®¾å¤ç®¡çå¨ãï¼æä¸ Win+Xï¼éæ©ãè®¾å¤ç®¡çå¨ãï¼</li>
<li>æ·»å è¿æ¶ç¡¬ä»¶ï¼ç¹å»è®¾å¤ç®¡çå¨é¡¶é¨çãæä½ãâãæ·»å è¿æ¶ç¡¬ä»¶ãï¼</li>
<li>å¯å¨ç¡¬ä»¶å®è£åå¯¼ï¼</li>
<li>éæ©ãä¸ä¸æ­¥ãâ éæ©ãå®è£ææå¨ä»åè¡¨éæ©çç¡¬ä»¶ï¼é«çº§ï¼ãâãä¸ä¸æ­¥ãï¼</li>
<li>ä¸æåè¡¨æ¾å°ãç½ç»ééå¨ãâãä¸ä¸æ­¥ãï¼</li>
<li>éæ©ç¯åééå¨ï¼</li>
<li>å·¦ä¾§ååéæ©ãMicrosoftãï¼å³ä¾§åå·éæ©ãMicrosoft KM-TEST ç¯åééå¨ãâãä¸ä¸æ­¥ãï¼</li>
<li>ç»§ç»­ç¹å»ãä¸ä¸æ­¥ãï¼å®æå®è£ï¼ç­å¾å ç§ï¼ç³»ç»ä¼èªå¨éç½®ï¼ï¼</li>
<li>ç»èæç½å¡åéåºå® IPï¼</li>
<li>æå¼ãæ§å¶é¢æ¿âç½ç»åå±äº«ä¸­å¿âæ´æ¹ééå¨è®¾ç½®ãï¼</li>
<li>æ¾å°åå®è£çãä»¥å¤ªç½ 2ãï¼åç§°å¯è½ä¸åï¼å¸¦ãç¯åãæ è¯ï¼ï¼å³é®ãå±æ§ãï¼</li>
<li>åå»ãInternet åè®®çæ¬ 4 (TCP/IPv4)ãï¼</li>
<li>éæ©ãä½¿ç¨ä¸é¢ç IP å°åãï¼è¾å¥åºå® IPï¼å¦ 192.168.100.100ï¼ï¼å­ç½æ©ç å¡« 255.255.255.0ï¼ç½å³çç©ºï¼</li>
<li>ç¹å»ãç¡®å®ãä¿å­ï¼</li>
<li>éå¯ ArcGIS License Manager æå¡ï¼</li>
<li>æä¸ Win+Rï¼è¾å¥ services.msc æå¼æå¡åè¡¨ï¼</li>
<li>æ¾å°ãArcGIS License Managerãï¼å³é®ãéå¯ãï¼</li>
<li>éªè¯ææï¼éæ°æå¼ License Server Administratorï¼æ¥çä¸»æºæ è¯ç¬¦ï¼IP å°åä¼æ¾ç¤ºä¸ºä½ è®¾ç½®ç 192.168.100.100ï¼èé ::1ï¼ï¼è®¸å¯éªè¯å³å¯æ¢å¤æ­£å¸¸ã</li>
</ol>
<ul>
<li>æ¹æ³äºï¼ä¸´æ¶å¯ç¨ãèæ WiFi / ç­ç¹ã<br>
æ­ç½ç¶æä¸ï¼æ æ³éè¿[ç­ç¹]å¾æ ãæé®å¼å¯ç­ç¹ï¼éè¦ä½¿ç¨powershellå½ä»¤ï¼ä»¥ç®¡çåèº«ä»½å¼å¯powershellå½ä»¤è¡ï¼é®å¥ï¼</li>
</ul>
<pre><code class="language-PS"># æ³¨åç­ç¹éç½®
$connectionProfile = [Windows.Networking.Connectivity.NetworkInformation,Windows.Networking.Connectivity,ContentType=WindowsRuntime]::GetInternetConnectionProfile()
$tetheringManager = [Windows.Networking.NetworkOperators.NetworkOperatorTetheringManager,Windows.Networking.NetworkOperators,ContentType=WindowsRuntime]::CreateFromConnectionProfile($connectionProfile)

# å¯å¨ç­ç¹
$tetheringManager.StartTetheringAsync()

# åæ­¢ç­ç¹
$tetheringManager.StopTetheringAsync()
</code></pre>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.0020833333333333333" data-date-updated="2026-02-06 16:10">2026-02-06 16:07</span>&nbsp;
<a href="https://www.cnblogs.com/leaguecn">leaguecn</a>&nbsp;
éè¯»(<span id="post_view_count">21</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19585000);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19585000', targetLink: 'https://www.cnblogs.com/leaguecn/p/19585000', title: 'ArcGISææç®¡çå¨æ­ç½åèªå¨åæ­¢' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Windows + AMD æ¾å¡ï¼ç»äºè½ç¨ PyTorch ç¼ä¸¹äº ]]></title>
    <link>https://www.cnblogs.com/deali/p/19584890</link>
    <guid>a32fd38c895c406f1d0fd5102c8d0db8</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/deali/p/19584890" title="åå¸äº 2026-02-06 15:53">
    <span role="heading" aria-level="2">Windows + AMD æ¾å¡ï¼ç»äºè½ç¨ PyTorch ç¼ä¸¹äº</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="åè¨">åè¨</h2>
<p>ä¸ä¸ç¯æç« éï¼æå¼å§æè¾å¨ Windows11 ä¸ç¼è¯ ROCm çç PyTorchï¼è½ç¶æè¾å¤±è´¥äºï¼ä½ç§¯ç´¯äºä¸äºç»éªã</p>
<p>è¿ä¸ç¬¬äºå¤©å°±ç¼è¯æåäºã</p>
<p><img src="https://blog.deali.cn/media/blog/c4c248b3bf4132cd/77f0fcbc86478c7e.jpg" alt="" loading="lazy"></p>
<h2 id="ç¼è¯äº§ç©">ç¼è¯äº§ç©</h2>
<p>ç½åï¼</p>
<pre><code class="language-bash">-a---            2026/1/5    15:58      151148776 torch-2.9.1+rocm7.11.0a20260104-cp312-cp312-win_amd64.whl
-a---            2026/1/5    15:59         514989 torchaudio-2.9.0+rocm7.11.0a20260104-cp312-cp312-win_amd64.whl
-a---            2026/1/5    16:01        1247290 torchvision-0.24.0+rocm7.11.0a20260104-cp312-cp312-win_amd64.whl
</code></pre>
<p>Windows + AMD + ROCm + PyTorchï¼</p>
<p>æä¸æè¿äºè¯åå¨ä¸èµ·çå«ééåï¼ï¼ð</p>
<h2 id="è¦ç¹">è¦ç¹</h2>
<p>æ»ç»ä¸æ¥è¿æ¬¡ç¼è¯åè½çè¦ç¹å°±ä¿©ã</p>
<h3 id="ä½¿ç¨å®æ¹çç-rocm">ä½¿ç¨å®æ¹çç ROCm</h3>
<p>ä¹åå ä¸ºç½ä¸æ¥å°çèµæé½è¯´å®æ¹è¿æ²¡æ¨åº gfx103x ç ROCmï¼æä»¥æå®è£äºä¸ä¸ªç¬¬ä¸æ¹é¢æå»ºå¥½ççæ¬ï¼å¯è½æ¯å¤ªèäºè¿æ¯åçï¼ç¼è¯ PyTorch æ¶èæ¯å¤±è´¥ã</p>
<p>è¿æ¬¡æä½¿ç¨äºè¿ä¸ªå½ä»¤å®è£ï¼</p>
<pre><code class="language-bash">pip install --index-url https://rocm.nightlies.amd.com/v2-staging/gfx103X-dgpu/ --pre rocm[libraries,devel]
</code></pre>
<p>ä½ å¯ä»¥å¨è¿äºä½ç½®å°è¯æ¾å°å¯¹åºç ROCm è½¯ä»¶åï¼</p>
<ul>
<li><a href="https://rocm.nightlies.amd.com/v2-staging/" target="_blank" rel="noopener nofollow">https://rocm.nightlies.amd.com/v2-staging/</a></li>
<li><a href="https://rocm.nightlies.amd.com/v2/" target="_blank" rel="noopener nofollow">https://rocm.nightlies.amd.com/v2/</a></li>
<li><a href="https://rocm.devreleases.amd.com/v2" target="_blank" rel="noopener nofollow">https://rocm.devreleases.amd.com/v2</a></li>
<li><a href="https://rocm.devreleases.amd.com/v2-staging" target="_blank" rel="noopener nofollow">https://rocm.devreleases.amd.com/v2-staging</a></li>
</ul>
<p>å«è¿·ä¿¡ç¬¬ä¸æ¹åï¼è½ç¨å®æ¹çå°±ç¨å®æ¹çï¼æ²¡æå°±èªå·±ç¼è¯ ROCmï¼å¾å¹¸è¿æè¿ä¸ªå¡æå®æ¹ç ROCm åã</p>
<h3 id="ä½¿ç¨æ§çæ¬-pytorch">ä½¿ç¨æ§çæ¬ PyTorch</h3>
<p>è¿ä¸ç¹ä¸ç¯æç« ä¹è¯´äºï¼ææ°çå¯è½ä¸è¡ï¼æå¨ç½ä¸çæäººç¼è¯ 2.10 çæ¬æåäºã</p>
<p>å¶å®ä¹åæè¾çæ¶åå·²ç»éçº¦æè§å°äºï¼PyTorch çæ¬å¤ªæ°ï¼å¨ Windows + ROCm è¿æ¡è·¯å¾ä¸ï¼æ´å®¹æè¸©åã</p>
<p>ç½ä¸å·²ç»æäººç¡®è®¤ï¼</p>
<ul>
<li>2.10ï¼æäººæå</li>
<li>2.11ï¼å­å¨åç§ä¸ç¡®å®æ§</li>
</ul>
<p>è¿æ¬¡æç´æ¥éäºæ´ä¿å®çæ¹æ¡ï¼<strong>PyTorch 2.9.1</strong></p>
<p>äºå®è¯æï¼è¿ä¸ªéæ©æ¯å¯¹çã</p>
<p>è³äº 2.11 è¡ä¸è¡ï¼</p>
<p>ä»¥åæç²¾ååç»§ç»­æè¾ï¼ç°å¨åäº«åææã</p>
<h2 id="å®è£-wheel">å®è£ wheel</h2>
<p>æ¢ç¶ç¼è¯å¥½äºï¼é£å°±å¯ä»¥å®è£è¯ç¨ä¸ä¸ã</p>
<p>æé¡ºåºå®è£è¿ä¸ä¸ªæä»¶ï¼æ³¨æï¼torch å¿é¡»æåå®è£ï¼</p>
<pre><code class="language-bash">pip install .\torch-2.9.1+rocm7.11.0a20260104-cp312-cp312-win_amd64.whl
pip install .\torchvision-0.24.0+rocm7.11.0a20260104-cp312-cp312-win_amd64.whl
pip install .\torchaudio-2.9.0+rocm7.11.0a20260104-cp312-cp312-win_amd64.whl
</code></pre>
<p><strong>Windows + AMD æ¾å¡ï¼ç¼ä¸¹ééå·²æéã</strong></p>
<h2 id="ä¸ä¸æ­¥åå¥">ä¸ä¸æ­¥åå¥ï¼</h2>
<p>æ¾å¡å éè½ç¨äºï¼é£è½åçäºæå°±å¾å¤äºã</p>
<p>æ·±åº¦å­¦ä¹ è·èµ·æ¥ï¼AIç»å¾ç©èµ·æ¥~</p>
<p>ä¸ä¸æ­¥ææ³åè¯è¯ï¼</p>
<ul>
<li>ä¸äºç®åçæ·±åº¦å­¦ä¹ æ¨¡åè®­ç»ä»»å¡</li>
<li>æ AI ç»å¾éæ°ç©èµ·æ¥</li>
<li>éç¹è¯è¯ Z-Image : <a href="https://huggingface.co/Comfy-Org/z_image_turbo" target="_blank" rel="noopener nofollow">https://huggingface.co/Comfy-Org/z_image_turbo</a></li>
</ul>
<p>è¿ä¸ªç³»ååç»­è¿æå¾å¤å¼å¾è®°å½åäº«çï¼æ¬¢è¿ç»§ç»­å³æ³¨ã</p>


</div>
<div id="MySignature" role="contentinfo">
    å¾®ä¿¡å¬ä¼å·ï¼ãç¨åºè®¾è®¡å®éªå®¤ã
ä¸æ³¨äºäºèç½ç­é¨æ°ææ¯æ¢ç´¢ä¸å¢éææ·å¼åå®è·µï¼åæ¬æ¶æè®¾è®¡ãæºå¨å­¦ä¹ ä¸æ°æ®åæç®æ³ãç§»å¨ç«¯å¼åãLinuxãWebååç«¯å¼åç­ï¼æ¬¢è¿ä¸èµ·æ¢è®¨ææ¯ï¼åäº«å­¦ä¹ å®è·µç»éªã
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-06 15:53">2026-02-06 15:53</span>&nbsp;
<a href="https://www.cnblogs.com/deali">ç¨åºè®¾è®¡å®éªå®¤</a>&nbsp;
éè¯»(<span id="post_view_count">75</span>)&nbsp;
è¯è®º(<span id="post_comment_count">1</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19584890);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19584890', targetLink: 'https://www.cnblogs.com/deali/p/19584890', title: 'Windows + AMD æ¾å¡ï¼ç»äºè½ç¨ PyTorch ç¼ä¸¹äº' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ [å¤§æ¨¡åå®æ 04] ä»ç©å·å°çäº§ï¼åºäº ChromaDB æé å·¥ç¨çº§ RAG ç³»ç» ]]></title>
    <link>https://www.cnblogs.com/algieba/p/19584786</link>
    <guid>f4af9e2e02364e54591f5c5b156d16c8</guid>
    <description>
    <![CDATA[ 
		<div class="postcontent">
			    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/3169973/202602/3169973-20260206153641800-755924643.png" alt="[å¤§æ¨¡åå®æ 04] ä»ç©å·å°çäº§ï¼åºäº ChromaDB æé å·¥ç¨çº§ RAG ç³»ç»" class="desc_img">
        å¤§æ¨¡ååºç¨å¼åå¿ä¿®è¯¾ï¼æ¬æéè¿éä¿ææçæ¡ä¾è¯¦è§£ RAG (æ£ç´¢å¢å¼ºçæ) çæ ¸å¿åçï¼å¯¹æ¯ LlamaIndex ä¸ LangChain çä¼å£ï¼å¹¶æææå¸¦å±ä»¬å¨ Kaggle ç¯å¢ä¸ï¼å©ç¨ ChromaDB å Qwen æ¨¡åæ­å»ºä¸ä¸ªæ¯æç§ææ°æ®é®ç­çä¼ä¸çº§ RAG ç³»ç»ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="å¤§æ¨¡åå®æ-04-ä»ç©å·å°çäº§åºäº-chromadb-æé å·¥ç¨çº§-rag-ç³»ç»">[å¤§æ¨¡åå®æ 04] ä»ç©å·å°çäº§ï¼åºäº ChromaDB æé å·¥ç¨çº§ RAG ç³»ç»</h1>
<blockquote>
<p><strong>æ ¸å¿æè¦ (TL;DR)</strong></p>
<ul>
<li><strong>çç¹</strong>ï¼å¤§æ¨¡åä¸ç¥éææ°çæ°é»ï¼ä¹ä¸ç¥éä¼ä¸çç§æææ¡£ï¼å¦åå·¥æåï¼ã</li>
<li><strong>æ¹æ¡</strong>ï¼<strong>RAG (æ£ç´¢å¢å¼ºçæ)</strong>ãå°±åâå¼å·èè¯âï¼åå»ç¿»ä¹¦æ¾ç­æ¡ï¼ååç­é®é¢ã</li>
<li><strong>å·¥å·é¾</strong>ï¼<strong>LlamaIndex</strong> (æ¡æ¶) + <strong>BGE</strong> (åµå¥æ¨¡å) + <strong>ChromaDB</strong> (åéæ°æ®åº) + <strong>Qwen2.5</strong> (æ¨çæ¨¡å)ã</li>
<li><strong>å®æ</strong>ï¼å¨ Kaggle ä¸ä»é¶æ­å»ºä¸ä¸ªè½åç­âä¼ä¸åé¨æºå¯âç AI å©æã</li>
</ul>
</blockquote>
<h2 id="åè¨">åè¨</h2>
<p>åä½åäººä»¬ï¼å¤§å®¶å¥½ï¼è¿éæ¯<strong>é¿å°</strong>ãå¨ä¸ä¸èä¸­ï¼æä»¬å¤§æ¦ç¥éäºå¤§æ¨¡åçææï¼safetensoræ ¼å¼çå¤§æ¨¡åçæä»¶ç»æï¼transformersåºçåºæ¬ä½¿ç¨ãæä»¬å·²ç»è½å¤ä½¿ç¨å¤§æ¨¡åå»åä¸äºç®åå¯¹è¯åºç¨äºï¼å®å¯ä»¥æ¯ä¸ç¥å¤©æï¼ä¸ç¥å°çï¼ä¸­é´è¿è½ç¥éäººæå·æãä½æ¯ï¼æä»¬éè¦å ä¸ä¸ªéå®è¯ï¼å¨<strong>è®­ç»æ°æ®æªæ­¢æ¥æå</strong>çãå ä¸ºè®­ç»ä¸æ¬¡éè¦èè´¹å¾å¤çè®¡ç®èµæºï¼æ¶é´åäººåï¼å½æä»¬æ³è®©å®ç¥éä¸äºæ°ç¥è¯çæ¶åï¼æ¯å¦è®©å®ç¥éç°å¨ç¾å½çæ»ç»æ¯æç»è¿æ¯ç¹ææ®ï¼æä»¬å¯ä»¥å¨å¯¹è¯ä¸­åè¯ä»ï¼è¿æ²¡é®é¢ï¼ä½æ¯å¦ææä»¬æ³è®©å®ç¥éæ´å¤ï¼æ¯å¦æç<strong>ç§äººæ¥è®°</strong>?æ¯å¦æ<strong>ååçé£ç¯åå®¢</strong>ï¼æ¯å¦å¬å¸ç<strong>åå·¥æå</strong>, æ¯å¦èªå·±äº§åç<strong>ä½¿ç¨è¯´æä¹¦</strong>ï¼</p>
<p>è¿ç±»<strong>ç§ææ°æ®</strong>ï¼æ¯å¤§æ¨¡åä¼ä¸åºç¨ççç¹ï¼æ¯ç«å¤§æ¨¡åæ¯åºäºå¨äºèç½ä¸å¬å¼æ°æ®è®­ç»çãéæ°æè¿é¨åèµæå è¿å»ï¼åè®­ç»ä¸ä¸æ¨¡åï¼ä¹ä¸æ¯ä¸è¡ï¼ä½æ¯æç¹æ²¡ææ§ä»·æ¯ï¼è¿æ¶åå°±å¼åºäºå¤§æ¨¡åè½å°åºç¨çæ ¸å¿ææ¯-&gt; <strong>RAG (Retrieval-Augmented Generationï¼æ£ç´¢å¢å¼ºçæ)</strong>ã<br>
<img src="https://img2024.cnblogs.com/blog/3169973/202602/3169973-20260206153556816-660023016.png" alt="æ¬å°å¤§æ¨¡åççç¹ï¼ä»¥åRAGå¦ä½è§£å³çç¤ºæå¾" loading="lazy"></p>
<h2 id="1-ragæ£ç´¢å¢å¼ºçæ">1. RAGï¼æ£ç´¢å¢å¼ºçæï¼</h2>
<h3 id="11-ä»ä¹æ¯rag">1.1 ä»ä¹æ¯RAG?</h3>
<p>èè¯çæ¶åï¼å¦æèå°ä¸ä¼çç¥è¯ï¼ä¸ç¥éåä½åäººä»¬ä¼ä¸ä¼å¤´ç¼ï¼å¦æè¿æ¶åï¼åè®¸æä»¬ç¿»ä¹¦ï¼ç°å»ä¹¦éæ¾ï¼æä»¬ä¹å¾æå¯è½æ¾å¾å°å¯¹åºçç­æ¡ï¼åªææä»¬å¯è½å®å¨æ²¡å­¦è¿ãè¿å°±æ¯<strong>RAG</strong>çå¤§è´æè·¯ï¼<strong>ä¸è®©æ¨¡åå­ç©ºåå¿ï¼èæ¯åç»å®æ¾èµæã</strong></p>
<p>RAGï¼æ£ç´¢å¢å¼ºçæ,å­é¢ä¸è®²ï¼å°±æ¯ æ¿å°èé¢-&gt;ç¶åå»ç¿»ä¹¦ï¼éè¿ç®å½ä¹ç±»çç´¢å¼ï¼å¿«éç¿»å°ï¼<strong>æ£ç´¢</strong>ï¼ç¸å³çåå®¹-&gt;åæ ¹æ®è¿äºåå®¹ï¼<strong>å¢å¼º</strong>äºçåå®¹ï¼ï¼åç­åºé®é¢ï¼<strong>çæ</strong>åç­ï¼ã</p>
<p>å¯¹æ¯ç®åå°æä¸è¥¿ä¸è¡èå¨é¨è·å¤§æ¨¡åè¯´ä¸éï¼æä»¬è½æ¸æ¥å¾åç°ï¼æä»¬åªç¨äºæ£ç´¢å°çé£ä¸é¨ååå®¹ï¼å¹¶æ²¡æè®©æ´æ¬ä¹¦å¤§æ¨¡åçèå­å°å ç¨, è¿å°±æ¯RAGçæçä½ç°ã<br>
<img src="https://img2024.cnblogs.com/blog/3169973/202602/3169973-20260206153648126-1948951348.png" alt="ç¨å¼å·èè¯æ¯å»RAGåç¦»çº¿æ¨¡åçç¤ºæå¾" loading="lazy"></p>
<h3 id="12-ragçæ­¥éª¤">1.2 RAGçæ­¥éª¤</h3>
<p>RAGææ¯çæè·¯å¾ç®åï¼ä½æ¯å®ç°å¹¶éåªæ¯ä¸ä¸ªåä¸çææ¯è½å®ç°çï¼å®æä¸å¥<strong>æµæ°´çº¿ï¼æµæ°´çº¿ï¼</strong>ã æè¿å¤´"å¤§è±¡"æ¾è¿å°ç®±ï¼æ»å±éè¦ä¸¤æ­¥ï¼<strong>åå¤å¥½æ°æ®</strong>å<strong>è®©æ¨¡åæ¿å°æ°æ®</strong>ã<br>
<img src="https://img2024.cnblogs.com/blog/3169973/202602/3169973-20260206153557028-1079400548.png" alt="ç¨æâå¤§è±¡âè£è¿å°ç®±çæ¯å»æ¥æè¿°RAGçä¸¤ä¸ªè¿ç¨çç¤ºæå¾" loading="lazy"></p>
<h4 id="ç¬¬ä¸ä¸ªé¶æ®µæ°æ®åå¤indexing---æä¹¦è£è¿ä¹¦å">ç¬¬ä¸ä¸ªé¶æ®µï¼æ°æ®åå¤(Indexing) -&gt; æä¹¦è£è¿ä¹¦å</h4>
<p>å¨å¤§æ¨¡åè½å¤<strong>ç¿»ä¹¦</strong>ä¹åï¼å±ä»¬å¾åææä»¬æ³ç»å®çç<strong>ä¹¦</strong>æ´çå¥½ï¼æ¾è¿<strong>ä¹¦å</strong>éã</p>
<ol>
<li><strong>å è½½ (Load)</strong>ï¼å±ä»¬çèµæå¯è½æ¯åç§åæ ·çæ ¼å¼ï¼ä¸è¬å¤§æ¨¡åæ¯ä¸è®¤è¯è¿ä¹äºæ ¼å¼çï¼æä»¥æä»¬å°±éè¦æ PDFãWordãç½é¡µç­åç§æ ¼å¼çæä»¶è¯»è¿æ¥ï¼ç»ä¸æååºçº¯ææ¬ã</li>
<li><strong>åå (Chunking)</strong>ï¼å¤§æ¨¡åä¸æ¬¡åä¸ä¸æ´æ¬ä¹¦,å°±åæä»¬ä¸ç¼çä¸å®æ´æ¬ãä¸å½æ¼ä¹ãä¸æ ·ï¼å®æ<strong>ä¸ä¸æé¿åº¦éå¶</strong>ãæä»¬éè¦æé¿ææ¬åæä¸ä¸ªä¸ªå°ç<strong>çæ®µ (Chunks)</strong>ï¼æ¯å¦æ¯ 500 ä¸ªå­åä¸æ®µã</li>
<li><strong>åéå (Embedding)</strong>ï¼<strong>è¿æ¯æå³é®çä¸æ­¥ï¼</strong>
<ul>
<li>è®¡ç®æºæ æ³ç´æ¥æ¯è¾âè¹æâåâiphoneâæ¯ä¸æ¯ç¸å³çã</li>
<li>æä»¬éè¦ç¨ä¸ä¸ªä¸é¨çæ¨¡åï¼Embedding Modelï¼ï¼ææ¯ä¸æ®µæå­åæä¸ä¸²<strong>æ°å­åé</strong>ï¼æ¯å¦ <code>[0.1, -0.5, 0.8, ...]</code>ï¼,æ¯ä¸æ¯æç¹è³çï¼å¯¹è¿åå¤§æ¨¡åè®­ç»çEmbeddingæ¯ä¸ä¸ªæè·¯ï¼ä½æ¯æä»¬ä¸è¬ä¼ä½¿ç¨<strong>ç¹å¶</strong>çåµå¥æ¨¡åæ¥åè¿ä¸ª<strong>ä¸ä¸</strong>çäºæã</li>
<li>å¨è¿ä¸ªæ°å­¦ç©ºé´éï¼è¯­ä¹ç¸è¿çè¯ï¼è·ç¦»å°±è¶è¿, è¿æ ·æä»¬å°±è½ç¥éï¼è¿æ¬ä¹¦ä¸­çææåéï¼åªäºæ¯åæä»¬çé®é¢ç¸å³çäºã</li>
</ul>
</li>
<li><strong>å­å¨ (Storage)</strong>ï¼æè¿äºåéåå¯¹åºçæå­ï¼å­å¥<strong>åéæ°æ®åº (Vector DB)</strong> ä¸­ã<br>
<img src="https://img2024.cnblogs.com/blog/3169973/202602/3169973-20260206153558790-898603395.png" alt="RAGçæ°æ®åå¤æµç¨ï¼åæ¬âå è½½âï¼âååâï¼âåéåâï¼âå­å¨âç­æ­¥éª¤çç¤ºæå¾" loading="lazy"></li>
</ol>
<h4 id="ç¬¬äºä¸ªé¶æ®µåºç¨æ°æ®ç»å¤§æ¨¡åçæretrieval--generation--å¼å·ç­é¢">ç¬¬äºä¸ªé¶æ®µï¼åºç¨æ°æ®ç»å¤§æ¨¡åçæï¼Retrieval &amp; Generationï¼-&gt; å¼å·ç­é¢</h4>
<p>æ¿å°ä¹¦äºä¹åï¼æä»¬æ³è¦<strong>ç¿»ä¹¦</strong>ï¼å°±å¾æ¾å°åé®é¢<strong>æå³ç³»</strong>çåå®¹ï¼ç¶ååå°è¿äºåå®¹åæä»¬èªå·±çå¸¸è¯<strong>ç»å</strong>èµ·æ¥ï¼å¯¹æåºçé®é¢è¿è¡ç­é¢ã</p>
<ol>
<li><strong>é®é¢åéå(Embedding)</strong>ï¼è¦æ³ç¥éç¨æ·çæé®ï¼ä¾å¦âç«æåºå°åä»ä¹ï¼âï¼ååå®¹çç¸å³æ§ï¼æä»¬å°±éè¦åå¯¹åå¤çæ°æ®ä¸æ ·ï¼ç¨åä¸ä¸ª Embedding æ¨¡åå°é®é¢åæåéã</li>
<li><strong>æ£ç´¢ (Retrieval)</strong>ï¼æ¿çè¿ä¸ªâé®é¢åéâï¼å»åéæ°æ®åºéæ, å»æ¾å°å³ç³»æ§é«çåå®¹ã
<ul>
<li>ç³»ç»ä¼è®¡ç®ï¼âåªä¸ªææ¡£çæ®µçåéï¼åé®é¢åéçè·ç¦»æè¿ï¼â</li>
<li>æ¾åºæç¸ä¼¼çå 3-5 ä¸ªçæ®µ (Top-k)ã</li>
</ul>
</li>
<li><strong>å¢å¼º (Augmentation)</strong>ï¼æè¿ 3-5 ä¸ªçæ®µæ¼å¨ä¸èµ·ï¼åç¨æ·çé®é¢ç»åæä¸ä¸ªè¶çº§é¿ç Promptã
<ul>
<li><em>Prompt æ¨¡æ¿ç¤ºä¾ï¼</em>
<blockquote>
<p>ä½ æ¯ä¸ä¸ªå©æãè¯·æ ¹æ®ä»¥ä¸åèèµæåç­é®é¢ã<br>
åèèµæï¼[çæ®µ1]... [çæ®µ2]...<br>
ç¨æ·é®é¢ï¼ç«æåºå°åä»ä¹ï¼</p>
</blockquote>
</li>
</ul>
</li>
<li><strong>çæ (Generation)</strong>ï¼æè¿ä¸ª Prompt åç»å¤§æ¨¡åï¼LLMï¼ãå¤§æ¨¡åéè¯»èµæï¼æ»ç»å¹¶çææç»ç­æ¡ã<br>
<img src="https://img2024.cnblogs.com/blog/3169973/202602/3169973-20260206153614608-948909083.png" alt="RAGçæ£ç´¢çæé¶æ®µï¼åæ¬åéåï¼æ£ç´¢ï¼å¢å¼ºåçæ" loading="lazy"></li>
</ol>
<h2 id="2-ragææ¯éå">2. RAGææ¯éå</h2>
<p>å¥½äºï¼çè®ºæä»¬å·²ç»æäºï¼ç°å¨æä»¬æ¸èµ·è¢å­ï¼åå¤æ¥å®æä¸ä¸å­å§ãæä»¬æç®<strong>ä»é¶å¼å§</strong>å¿«éæ­å»ºä¸ä¸ª<strong>å·¥ç¨çº§</strong>çRAGç³»ç»: <strong>ç§æAPIå©æ</strong>, å¨æç´æ¥åè¯åä½åäººä»¬æä»¬è¦ç¨å°çå·¥å·åï¼æè§å¾ä¹æå¿è¦å¤§æ¦è®©åä½åäººä»¬ç¥éè¿æåªäºå«çéæ©ï¼æä»¬ä¸ºä»ä¹éæ©äºè¿å ä¸ªã</p>
<h2 id="21-æ¡æ¶-llamaindex-vs-langchain">2.1 æ¡æ¶: LlamaIndex vs. LangChain</h2>
<ul>
<li><strong>LangChain</strong>ï¼ä¸è½è¶æ°´ï¼éååå¤æç Agentï¼æºè½ä½ï¼ï¼ä½å RAG ä»£ç æ¯è¾å°å¦ï¼æ½è±¡å±çº§å¤ªç¢ï¼æä»¬åé¢åæºè½ä½çæ¶åï¼å¦ææç²¾ååæºè½ä½çæç¨çè¯ï¼åæ¥ä½¿ç¨å®ã</li>
<li><strong>LlamaIndex</strong>ï¼<strong>æ°æ®ä¸å®¶</strong>ãä¸é¨ä¸º RAG ä¹å°±æ¯âç´¢å¼åæ£ç´¢âèçãæ¥å£æåº¦ç®æ´ï¼ä¸å¯¹æ°æ®æ¸æ´ï¼Ingestionï¼çå¤çæ´ä¸ä¸ã</li>
<li><strong>ç»è®º</strong>ï¼æä»¬åRAGï¼ç´æ¥åä¸<strong>LlamaIndex</strong>, å¿«éå°å®ç°ææã<br>
<img src="https://img2024.cnblogs.com/blog/3169973/202602/3169973-20260206153543478-1007132028.png" alt="LlamaIndex vs. LangChainçç¤ºæå¾" loading="lazy"></li>
</ul>
<h3 id="22-åµå¥æ¨¡å-embeddingbge-vs-openai">2.2 åµå¥æ¨¡å (Embedding)ï¼BGE vs. OpenAI</h3>
<ul>
<li><strong>OpenAI (text-embedding-3)</strong>ï¼ææå¥½ï¼ä½è¦é±ï¼ä¸æ°æ®è¦ä¼ ç» OpenAIï¼éç§é£é©ï¼ã</li>
<li><strong>BAAI/bge-small-zh-v1.5</strong>ï¼<strong>å½è´§ä¹å</strong>ãä¸­æææé¸æ¦ï¼ä½ç§¯æå°ï¼å ç¾ MBï¼ï¼å®å¨å¯ä»¥å¨ Kaggle æ¬å°è·ã</li>
<li><strong>ç»è®º</strong>ï¼ä¸ºäºåè´¹åéç§ï¼é¦é <strong>BGE-Small</strong>ã</li>
<li><strong>PS</strong>: å¦ææ¯è±æèµæçè¯ï¼å»ºè®®æ¢æ <code>BAAI/bge-small-en-v1.5</code> æè OpenAI ç <code>text-embedding-3-small</code><br>
<img src="https://img2024.cnblogs.com/blog/3169973/202602/3169973-20260206153638605-1843213838.png" alt="BGE vs. OpenAIç¤ºæå¾" loading="lazy"></li>
</ul>
<h3 id="23-åéæ°æ®åºchroma-vs-milvus-vs-pinecone">2.3 åéæ°æ®åºï¼Chroma vs. Milvus vs. Pinecone</h3>
<ul>
<li><strong>Pinecone</strong>ï¼çº¯äºç«¯ SaaSï¼ä¸å¯æ¬å°é¨ç½²ï¼å¯¹ Kaggle ä¸åå¥½ã</li>
<li><strong>Milvus</strong>ï¼æ§è½å¼ºæï¼éååäº¿çº§æ°æ®ï¼éè¦ Docker é¨ç½²ï¼éåæ°æ®éå¤§çæ¶åä½¿ç¨ï¼ä½æ¯å¯¹äºå±ä»¬çè¿ä¸ªé¡¹ç®æ¥è¯´ï¼å¤ªéäºã</li>
<li><strong>ChromaDB</strong>ï¼<strong>è½»éçº§çè</strong>ãå¯ä»¥å SQLite ä¸æ ·ä»¥âæ¬å°æä»¶âå½¢å¼å­å¨ï¼ä¹å¯ä»¥é¨ç½²ææå¡å¨ã</li>
<li><strong>ç»è®º</strong>ï¼ä¸­å°åé¡¹ç®ï¼é¦é <strong>ChromaDB</strong>ã<br>
<img src="https://img2024.cnblogs.com/blog/3169973/202602/3169973-20260206153650391-14712818.png" alt="åéæ°æ®åºï¼Chroma vs. Milvus vs. Pineconeå¯¹æ¯ç¤ºæå¾" loading="lazy"></li>
</ul>
<h2 id="3-ä¸æå®æ">3. ä¸æå®æ</h2>
<p><strong>é¡¹ç®èæ¯</strong>ï¼åè®¾æä»¬æ¯ä¸å®¶åå« "DeepStar" çååå¬å¸ï¼æä»¬æä¸å¥åé¨ç»å¯ç API ææ¡£ï¼æ°æ¥çå®ä¹ çæ»æ¯é®éå¤çé®é¢ãæä»¬è¦ç¨ RAG è®©ä»èªå·±æ¥ã<br>
<img src="https://img2024.cnblogs.com/blog/3169973/202602/3169973-20260206153605492-890080127.png" alt="é¡¹ç®èæ¯çç¤ºæå¾" loading="lazy"></p>
<h3 id="31-ç¯å¢éç½®-kaggle">3.1 ç¯å¢éç½® (Kaggle)</h3>
<p>å¯å¨ Kaggle Notebookï¼ç¡®ä¿ <strong>Internet: On</strong>ï¼<strong>Accelerator: GPU T4 x2</strong>ã</p>
<pre><code class="language-bash"># 1. æ´æ°transformersåå¶ç¸å³åº
!pip install -U transformers peft accelerate bitsandbytes sentence-transformers

# 2. å®è£ LlamaIndex æ ¸å¿åç¸å³æä»¶
!pip install llama-index-core llama-index-llms-huggingface llama-index-embeddings-huggingface

# 3. å®è£ ChromaDB åéåºæ¯æ
!pip install llama-index-vector-stores-chroma chromadb
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3169973/202602/3169973-20260206153548348-1600979809.png" alt="ç¯å¢é¨ç½²æ­¥éª¤çç¤ºæå¾" loading="lazy"><br>
<strong>ä¸è½½ä¾èµåºå¯è½ä¼éè¦ä¸ç¹æ¶é´</strong>ï¼ä¹åæççè½ä¸è½å¨kaggleä¸ç¨uvå»ååç®¡çã</p>
<h3 id="32-é æ°æ®æ¨¡æä¼ä¸åé¨ææ¡£">3.2 é æ°æ®ï¼æ¨¡æä¼ä¸åé¨ææ¡£</h3>
<p>æä»¬åå»ºä¸¤ä»½ææ¡£ï¼ä¸ä»½æ¯æ ¸å¿æ¥å£å®ä¹ï¼ä¸ä»½æ¯éè¯¯ç è¯´æã</p>
<pre><code class="language-python">import os

data_path = "/kaggle/working/data"
# åå»ºæ°æ®ç®å½
os.makedirs(data_path, exist_ok=True)

# ææ¡£ 1: æ ¸å¿ API å®ä¹
api_doc = """
[æºå¯] DeepStar æ ¸å¿äº¤ææ¥å£ v2.0
1. åå»ºè®¢å API: POST /api/v2/order/create
   - å¿å¡«åæ°: 'user_id' (String), 'amount' (Decimal), 'token' (X-Auth-Token)
   - ç¹æ®é»è¾: å¦æ amount &gt; 10000, å¿é¡»é¢å¤ä¼ é 'audit_code' (å®¡è®¡ç )ã
   - é¢çéå¶: åç¨æ·æ¯ç§æå¤ 5 æ¬¡è°ç¨ã
2. æ¥è¯¢ä½é¢ API: GET /api/v2/balance
   - ç¼å­ç­ç¥: é»è®¤ç¼å­ 5 ç§ãä¼ é 'no-cache=true' å¯å¼ºå¶å·æ°ã
"""

# ææ¡£ 2: éè¯¯ç å­å¸
error_doc = """
[æºå¯] DeepStar å¨å±éè¯¯ç å­å¸
- E1001: ç­¾åéªè¯å¤±è´¥ãè¯·æ£æ¥ X-Auth-Token æ¯å¦è¿æã
- E2009: ä½é¢ä¸è¶³ãæ³¨æï¼å»ç»éé¢ä¸è®¡å¥å¯ç¨ä½é¢ã
- E5003: å®¡è®¡é£æ§æ¦æªãå¤§é¢äº¤ææªéè¿èªå¨å®¡è®¡ï¼è¯·èç³»äººå·¥å®¢æã
"""

with open(f"{/data_path}/api_specs.txt", "w") as f:
    f.write(api_doc)
with open(f"/{data_path}/error_codes.txt", "w") as f:
    f.write(error_doc)

print("[Success] ä¼ä¸ææ¡£åºå·²å°±ç»ªï¼")
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3169973/202602/3169973-20260206153620323-1280867794.png" alt="3.2æ¨¡æä¼ä¸åé¨ææ¡£ç¤ºæå¾" loading="lazy"></p>
<h3 id="33-åå§åå¤§èä¸ç¼ç-settings">3.3 åå§åå¤§èä¸ç¼ç (Settings)</h3>
<p>æåæ ¹æ®èªå·±çæåµæ¥éç½®å¾ä¼å¿ç¨ç<strong>è¯åµå¥æ¨¡å</strong>å<strong>æ¨çæ¨¡å</strong>ã</p>
<pre><code class="language-python">embedding_model ="BAAI/bge-small-zh-v1.5"
llm = "Qwen/Qwen2.5-7B-Instruct"
# å¨æ¬å°æå¡å¨ï¼å¯ä»¥ç¨modelscopeä¸è½½ä¸æ¥, æè·¯å¾éç½®å¨è¿å¿
</code></pre>
<p>å©ç¨ <code>Settings</code> å¨å±éç½®ï¼å°é»è®¤ç OpenAI æ¿æ¢ä¸ºæ¬å°æ¨¡åã</p>
<pre><code class="language-python">import torch
from llama_index.core import Settings
from llama_index.llms.huggingface import HuggingFaceLLM
from llama_index.embeddings.huggingface import HuggingFaceEmbedding

# 1. è®¾ç½® Embedding (ç¼ç)
# ä½¿ç¨ BGE-Smallï¼æ¾å­å ç¨æä½ï¼æ£ç´¢ä¸­ææææä½³
print("æ­£å¨å è½½ Embedding æ¨¡å...")

Settings.embed_model = HuggingFaceEmbedding(
    model_name=embedding_model
)

# 2. è®¾ç½® LLM (å¤§è)
# ä½¿ç¨ Qwen2.5-7B-Instruct
print("æ­£å¨å è½½ LLM æ¨¡å...")
Settings.llm = HuggingFaceLLM(
    model_name=llm,
    tokenizer_name=llm,
    context_window=30000,
    max_new_tokens=512,
    generate_kwargs={"temperature": 0.1, "do_sample": True}, # ææ¯ææ¡£è¦æ±ä¸¥è°¨ï¼æ¸©åº¦è°ä½
    device_map="auto",
    model_kwargs={"dtype": torch.float16, "trust_remote_code": True}
)
print("[Success] æ¨¡åå è½½å®æ¯ï¼")
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3169973/202602/3169973-20260206153615744-1133194901.png" alt="åå§åè¯åµå¥æ¨¡ååæ¨çæ¨¡åçç¤ºæå¾" loading="lazy"></p>
<h3 id="34-æ ¸å¿ç»ä»¶chromadb-æä¹åæµæ°´çº¿">3.4 æ ¸å¿ç»ä»¶ï¼ChromaDB æä¹åæµæ°´çº¿</h3>
<p>è¿æ¯æ¬ç¯æå³é®çä»£ç ãæä»¬è¦å®ç°ï¼<strong>å¦ææ¬å°å·²ç»ææ°æ®åºï¼å°±ç´æ¥è¯»ï¼å¦ææ²¡æï¼æå»è§£æææ¡£ã</strong></p>
<pre><code class="language-python">import chromadb
from llama_index.core import VectorStoreIndex, SimpleDirectoryReader, StorageContext
from llama_index.vector_stores.chroma import ChromaVectorStore

# å®ä¹æä¹åè·¯å¾
CHROMA_DB_PATH = "/kaggle/working/chroma_db"
COLLECTION_NAME = "deepstar_docs"

# 1. åå§å Chroma å®¢æ·ç«¯ (PersistentClient å®ç°äºåç¡¬çåè½)
db_client = chromadb.PersistentClient(path=CHROMA_DB_PATH)

# 2. åå»ºæè·åéå (Collection)
chroma_collection = db_client.get_or_create_collection(COLLECTION_NAME)

# 3. å° Chroma å¯¹æ¥ç» LlamaIndex
vector_store = ChromaVectorStore(chroma_collection=chroma_collection)
storage_context = StorageContext.from_defaults(vector_store=vector_store)

# 4. æºè½å è½½é»è¾ (å¹ç­æ§è®¾è®¡)
if chroma_collection.count() == 0:
    print("[Info] æ°æ®åºä¸ºç©ºï¼å¼å§åå§å...")
    # è¯»å data ç®å½ä¸çæææä»¶
    documents = SimpleDirectoryReader("./data").load_data()
    # å»ºç«ç´¢å¼å¹¶èªå¨å­å¥ Chroma (Ingestion)
    index = VectorStoreIndex.from_documents(
        documents, storage_context=storage_context
    )
    print("[Success] æ°æ®åå¥å®æï¼")
else:
    print(f"[Info] åç° {chroma_collection.count()} æ¡å­éæ°æ®ï¼ç´æ¥å è½½...")
    # ç´æ¥ä» Vector Store å è½½ï¼æ ééæ°è®¡ç® Embedding
    index = VectorStoreIndex.from_vector_store(
        vector_store, storage_context=storage_context
    )
    print("[Success] ç´¢å¼å è½½å®æï¼")
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3169973/202602/3169973-20260206153628021-457268917.png" alt="ChromaDBæµæ°´çº¿ç¤ºæå¾" loading="lazy"></p>
<h3 id="35-éªæ¶æµè¯å¤æé»è¾é®ç­">3.5 éªæ¶æµè¯ï¼å¤æé»è¾é®ç­</h3>
<p>ç°å¨ï¼æä»¬æ¨¡æå®ä¹ çæé®ãæ³¨æï¼è¿ä¸ªé®é¢éè¦ç»åä¸¤ä¸ªææ¡£ï¼æ¥å£å®ä¹ + éè¯¯ç ï¼ä»¥åé»è¾æ¨çæè½åç­ã</p>
<pre><code class="language-python"># åå»ºæ¥è¯¢å¼æ
query_engine = index.as_query_engine(similarity_top_k=3)

# å®ä¹ ççæé®
questions = [
    "åå»ºè®¢åæ¶ï¼å¦æä½ åªæ 100 åé±ï¼è½ä¼  amount=20000 åï¼ä¸ºä»ä¹ï¼",
    "ææ¶å°äº E5003 éè¯¯ï¼è¿æ¯ä»ä¹ææï¼è¯¥æä¹åï¼"
]

print("======== å¼å§ RAG é®ç­æµè¯ ========")

for q in questions:
    print(f"\n[Question] {q}")
    response = query_engine.query(q)
    print(f"[Answer]\n{str(response)}")

    # æå°å¼ç¨æº (Debug å¿å¤ï¼ççå®åèäºåªä¸ªæä»¶)
    source_file = response.source_nodes[0].metadata.get('file_name')
    print(f"[Source]: {source_file}")
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3169973/202602/3169973-20260206153610360-1434394446.png" alt="éªæ¶æµè¯é¨åç¤ºæå¾" loading="lazy"></p>
<p><strong>ç­å¤å¦ä¸</strong><br>
<img src="https://img2024.cnblogs.com/blog/3169973/202602/3169973-20260206153607605-376937231.png" alt="RAGçåç­ç¤ºæå¾" loading="lazy"></p>
<hr>
<h2 id="4-è¿é¶æå·§å¦ä½ç®¡çä½ çæ°æ®åº">4. è¿é¶æå·§ï¼å¦ä½ç®¡çä½ çæ°æ®åºï¼</h2>
<p>æ¢ç¶ç¨äº ChromaDBï¼æä»¬å°±å¯ä»¥åæ¥ SQL ä¸æ ·æ¥å®ãè¿å¨ Debug æ¶éå¸¸æç¨ã</p>
<pre><code class="language-python"># å·çæ°æ®åºéçå 2 æ¡è®°å½
data = chroma_collection.peek(limit=2)

print("\n[Debug] æ°æ®åºæ½æ¥:")
for i, doc in enumerate(data['documents']):
    print(f"--- çæ®µ {i} ---")
    print(f"åå®¹: {doc[:50]}...") # åªæå°å50ä¸ªå­
    print(f"æ¥æº: {data['metadatas'][i]}")
</code></pre>
<h2 id="5-å®æ´ä»£ç ">5. å®æ´ä»£ç </h2>
<p>å®æ´ä»£ç å¯ä»¥ç¹å»<a href="https://www.kaggle.com/code/thaodinhoio/llm04-rag-llamaindex-chromadb" target="_blank" rel="noopener nofollow">kaggleç¬è®°</a>è·å</p>
<h2 id="5-å¸¸è§é®é¢-qa">5. å¸¸è§é®é¢ (Q&amp;A)</h2>
<p><strong>Q: ä¸ºä»ä¹ä¸ç´æ¥æææææ¡£é½å¡è¿ Prompt é (Long Context)ï¼</strong><br>
<strong>A:</strong> è½ç¶ç°å¨å¾å¤æ¨¡åæ¯æé¿ææ¬ï¼æ¯å¦ 128kï¼ï¼ä½ç´æ¥å¡ææ¡£æä¸ä¸ªé®é¢ï¼</p>
<ol>
<li><strong>å¤ªè´µ</strong>ï¼Token æ¯è¦é±çï¼å¦æç¨åä¸ APIï¼ã</li>
<li><strong>å¤ªæ¢</strong>ï¼ä¸ä¸æè¶é¿ï¼æ¨çè¶æ¢ã</li>
<li><strong>è®°ä¸ä½</strong>ï¼å¤§æ¨¡åæâé¿ä¸ä¸æè¿·å¤± (Lost in the Middle)âç°è±¡ï¼å¡å¤ªå¤åèä¼å¿½ç¥ä¸­é´çå³é®ç»èãRAG ç¸å½äºååäºä¸æ¬¡ç­éï¼åªç»æ¨¡åçææç¨çï¼ææåèæ´å¥½ã</li>
</ol>
<p><strong>Q: LlamaIndex å LangChain æè¯¥å­¦åªä¸ªï¼</strong><br>
<strong>A:</strong></p>
<ul>
<li>å <strong>RAG/ç¥è¯åº</strong>ï¼é¦é <strong>LlamaIndex</strong>ï¼å®å¯¹æ°æ®ç´¢å¼ãååãåéååäºæå¶æ·±åº¦çä¼åï¼æ¥å£æ´ç®æ´ã</li>
<li>å <strong>Agent/å·¥å·è°ç¨</strong>ï¼é¦é <strong>LangChain</strong>ï¼å®ççæåå·¥å·é¾æ´ä¸°å¯ã</li>
<li><strong>ç»è®º</strong>ï¼å±ä»¬è¿ä¸ªé¡¹ç®ä¸æ³¨äºâæ¾èµæâï¼æä»¥ LlamaIndex æ¯æä½³éæ©ã</li>
</ul>
<p><strong>Q: ChromaDB çæ°æ®å­å¨åªéäºï¼</strong><br>
<strong>A:</strong> å¨ä¸é¢ä»£ç ä¸­ï¼æä»¬éè¿ <code>PersistentClient</code> æå®äºè·¯å¾ <code>/kaggle/working/chroma_db</code>ã<br>
å®å°±å SQLite ä¸æ ·ï¼æ°æ®å°±å­å¨è¿ä¸ªæä»¶å¤¹éç <code>.sqlite3</code> å <code>.bin</code> æä»¶ä¸­ãå±ä»¬å¯ä»¥æè¿ä¸ªæä»¶å¤¹æ·è´å°ä»»ä½çµèä¸ï¼æ ééæ°åéåå°±è½ç´æ¥ä½¿ç¨ã</p>
<hr>
<p><strong>æ¬æä½èï¼</strong> Algieba<br>
<strong>æ¬æé¾æ¥ï¼</strong> <a href="https://blog.algieba12.cn/llm04-rag-llamaindex-chromadb/" target="_blank" rel="noopener nofollow">https://blog.algieba12.cn/llm04-rag-llamaindex-chromadb/</a><br>
<strong>çæå£°æï¼</strong> æ¬åå®¢æææç« é¤ç¹å«å£°æå¤ï¼åéç¨ BY-NC-SA è®¸å¯åè®®ãè½¬è½½è¯·æ³¨æåºå¤ï¼</p>
<pre><code>
</code></pre>


</div>
<div class="clear"></div>

		</div>
		<div class="itemdesc">
			åè¡¨äº 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-06 15:37">2026-02-06 15:37</span>&nbsp;
<a href="https://www.cnblogs.com/algieba">é¿å°çä»£ç å±</a>&nbsp;
éè¯»(<span id="post_view_count">12</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19584786);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19584786', targetLink: 'https://www.cnblogs.com/algieba/p/19584786', title: '[å¤§æ¨¡åå®æ 04] ä»ç©å·å°çäº§ï¼åºäº ChromaDB æé å·¥ç¨çº§ RAG ç³»ç»' })">ä¸¾æ¥</a>

		</div>
	 ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ä»é¶å¼å§å­¦Flinkï¼Flink SQL æç®å¥é¨ ]]></title>
    <link>https://www.cnblogs.com/daimajiangxin/p/19584653</link>
    <guid>2efec58d6039595e9118e9a66593287c</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/daimajiangxin/p/19584653" title="åå¸äº 2026-02-06 15:16">
    <span role="heading" aria-level="2">ä»é¶å¼å§å­¦Flinkï¼Flink SQL æç®å¥é¨</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/3365149/202602/3365149-20260206151553657-54750339.png" alt="ä»é¶å¼å§å­¦Flinkï¼Flink SQL æç®å¥é¨" class="desc_img">
        æ éJava/Scalaä»£ç ï¼æ¬æåºäºFlink 1.20.1çæ¬ï¼ææææä½ å¨WSL2 Ubuntuç¯å¢ä¸æ­å»ºå¼åç¯å¢ï¼ä½¿ç¨SQL Clientä½éªå®æ¶æµè®¡ç®çé­åï¼è½»æ¾è·éç¬¬ä¸ä¸ªæ°æ®æµä»»å¡ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>Flink SQL æ¯ Apache Flink çæ ¸å¿æ¨¡åä¹ä¸ï¼å®è®©å¼åèå¯ä»¥ä½¿ç¨æ åç SQL è¯­æ³æ¥ç¼åæµå¤çåæ¹å¤çä½ä¸ãå¯¹äºä¸æ³æ·±ç©¶ Java/Scala å¤æ API çâå°ç½âæ¥è¯´ï¼Flink SQL æ¯è¿å¥å®æ¶è®¡ç®é¢åçæä½³æ²é¨ç ã</p>
<p>æ¬æå°åºäº <strong>Flink 1.20.1</strong> çæ¬ï¼ææææä½ å¨ WSL2 (Ubuntu) ç¯å¢ä¸æ­å»ºç¯å¢ï¼å¹¶è¿è¡ä½ çç¬¬ä¸ä¸ª Flink SQL ä»»å¡ã</p>
<h2 id="ä¸ä¸ºä»ä¹éæ©-flink-sql">ä¸ãä¸ºä»ä¹éæ© Flink SQLï¼</h2>
<ol>
<li><strong>ä½é¨æ§</strong>ï¼ä¼å SQL å°±è½å¼åå®æ¶ä»»å¡ã</li>
<li><strong>ç»ä¸æ§</strong>ï¼æ¹æµä¸ä½ï¼åä¸å¥ SQL æ¢å¯ä»¥è·åå²æ°æ®ï¼æ¹ï¼ï¼ä¹å¯ä»¥è·å®æ¶æ°æ®ï¼æµï¼ã</li>
<li><strong>çæä¸°å¯</strong>ï¼åç½®äºå¤§éç Connectorï¼è¿æ¥å¨ï¼ï¼è½»æ¾è¿æ¥ KafkaãMySQLãHive ç­ä¸»æµç»ä»¶ã</li>
</ol>
<p><img alt="Flink SQL æ¶æå¾" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3365149/202602/3365149-20260206151529800-1842267300.jpg" class="lazyload"><br>
<em>(å¾ï¼Flink SQL æ¶æç¤ºæå¾ï¼å±ç¤º SQL è§£æãä¼åå°æ§è¡çè¿ç¨)</em></p>
<h2 id="äºç¯å¢åå¤-wsl2-ubuntu">äºãç¯å¢åå¤ (WSL2 Ubuntu)</h2>
<p>æ¬æç¨æ¼ç¤ºç¯å¢ä¸º Windows ä¸ç WSL2 (Ubuntu 20.04/22.04)ï¼è¿æ¯ç®å Windows ç¨æ·ä½éª Linux å¼åç¯å¢çæä½³å§¿å¿ã<br>
åèä»¥åäºçæç« <a href="https://mp.weixin.qq.com/s/2_d434kpSeKrSh-krRgvsQ" target="_blank" rel="noopener nofollow">ä»é¶å¼å§å­¦Flinkï¼æ­å¼å®æ¶è®¡ç®çç¥ç§é¢çº±</a>ï¼æ­å»ºå¥½ Flink ç¯å¢ã</p>
<h2 id="ä¸ä½éª-flink-sql-client">ä¸ãä½éª Flink SQL Client</h2>
<p>Flink æä¾äºä¸ä¸ªäº¤äºå¼çå½ä»¤è¡å·¥å·ï¼<strong>SQL Client</strong>ãå®åè®¸ä½ ç´æ¥å¨ç»ç«¯ç¼ååæäº¤ SQL ä»»å¡ã</p>
<h3 id="1-å¯å¨-sql-client">1. å¯å¨ SQL Client</h3>
<p>å¦ææ²¡æå¯å¨Flinkéç¾¤,ååå¯å¨flinkéç¾¤:</p>
<pre><code class="language-bash">./bin/start-cluster.sh
</code></pre>
<p>,ç¶åå¨ Flink ç®å½ä¸æ§è¡ï¼</p>
<pre><code class="language-bash">./bin/sql-client.sh
</code></pre>
<p>ä½ å°çå°é£åªèåçæ¾é¼  LOGOï¼</p>
<p><img alt="SQLClientå¯å¨çé¢" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3365149/202602/3365149-20260206151529805-1953389710.png" class="lazyload"><br>
<em>(å¾ï¼SQL Client å¯å¨æ¬¢è¿çé¢)</em></p>
<h3 id="2-hello-worldæ°æ®çæä¸æå°">2. Hello Worldï¼æ°æ®çæä¸æå°</h3>
<p>æä»¬ä¸ä¾èµä»»ä½å¤é¨ç»ä»¶ï¼å¦ Kafkaï¼ï¼ç´æ¥ä½¿ç¨ Flink åç½®ç <code>datagen</code> è¿æ¥å¨çææ¨¡ææ°æ®ï¼å¹¶ç¨ <code>print</code> è¿æ¥å¨æå°ç»æã</p>
<p><strong>ç¬¬ä¸æ­¥ï¼åå»ºæºè¡¨ (Source Table)</strong></p>
<p>å¤å¶ä»¥ä¸ SQL å° SQL Client ä¸­æ§è¡ï¼</p>
<pre><code class="language-sql">CREATE TABLE source_table (
    id INT,
    name STRING,
    ts TIMESTAMP(3),
    WATERMARK FOR ts AS ts - INTERVAL '5' SECOND
) WITH (
    'connector' = 'datagen',       -- ä½¿ç¨æ°æ®çæå¨
    'rows-per-second' = '1',       -- æ¯ç§çæ1æ¡æ°æ®
    'fields.id.kind' = 'sequence', -- id å­æ®µä¸ºåºå
    'fields.id.start' = '1',       -- id ä»1å¼å§
    'fields.id.end' = '100'        -- id å°100ç»æ
);
</code></pre>
<p>æ§è¡åæ¾ç¤º <code>[INFO] Execute statement succeed.</code>ã</p>
<p><strong>ç¬¬äºæ­¥ï¼åå»ºç»æè¡¨ (Sink Table)</strong></p>
<pre><code class="language-sql">CREATE TABLE print_table (
    id INT,
    name STRING,
    ts TIMESTAMP(3)
) WITH (
    'connector' = 'print'          -- ä½¿ç¨æ§å¶å°æå°è¿æ¥å¨
);
</code></pre>
<p><strong>ç¬¬ä¸æ­¥ï¼æäº¤ä»»å¡</strong></p>
<p>å°æºè¡¨çæ°æ®æå¥å°ç»æè¡¨ï¼</p>
<pre><code class="language-sql">INSERT INTO print_table SELECT * FROM source_table;
</code></pre>
<p>æ­¤æ¶ï¼SQL Client ä¼æäº¤ä¸ä¸ªå¼æ­¥ä»»å¡å°éç¾¤ãä½ ä¼çå°ç±»ä¼¼ Job ID çè¾åºã</p>
<h3 id="3-æ¥çè¿è¡ç»æ">3. æ¥çè¿è¡ç»æ</h3>
<p>ç±äºæä»¬ä½¿ç¨çæ¯ <code>print</code> è¿æ¥å¨ï¼å¨ Standalone æ¨¡å¼ä¸ï¼è¾åºä¼æå°å° TaskManager çæ¥å¿æä»¶ä¸­ã</p>
<p>æå¼ä¸ä¸ªæ°ç WSL2 ç»ç«¯çªå£ï¼è¿å¥ Flink ç®å½æ¥çæ¥å¿ï¼</p>
<pre><code class="language-bash"># è¿å¥ log ç®å½
cd log

# æ¥çææ°ç .out æä»¶ (æä»¶ååå« taskexecutor)
tail -f flink-*-taskexecutor-*.out
</code></pre>
<p>ä½ åºè¯¥è½çå°å±å¹ä¸ä¸æ­è·³å¨çæ°æ®æµï¼</p>
<p><img alt="è¿è¡ç»ææ¥å¿æªå¾ä½ç½®" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3365149/202602/3365149-20260206151529815-1138475969.png" class="lazyload"><br>
<em>(å¾ï¼ç»ç«¯ tail -f å½ä»¤çå°çå®æ¶æ°æ®è¾åº)</em></p>
<h2 id="åå¸¸ç¨å½ä»¤éæ¥">åãå¸¸ç¨å½ä»¤éæ¥</h2>
<p>å¨ SQL Client ä¸­ï¼ä½ å¯ä»¥ä½¿ç¨ä»¥ä¸å½ä»¤ï¼</p>
<ul>
<li><code>HELP</code>: æ¥çå¸®å©ã</li>
<li><code>SHOW TABLES</code>: æ¥çå½ååå»ºçè¡¨ã</li>
<li><code>SHOW JOBS</code>: æ¥çè¿è¡ä¸­çä½ä¸ã</li>
<li><code>DESCRIBE table_name</code>: æ¥çè¡¨ç»æã</li>
<li><code>QUIT</code>: éåº SQL Clientã</li>
</ul>
<h2 id="äºæ»ç»">äºãæ»ç»</h2>
<p>æ­åä½ ï¼ä½ å·²ç»æåè¿è¡äºäººçä¸­ç¬¬ä¸ä¸ª Flink SQL ä»»å¡ã</p>
<p>éè¿æ¬æï¼æä»¬å®æäºï¼</p>
<ol>
<li>WSL2 ä¸ Java å Flink 1.20.1 çå®è£ã</li>
<li>å¯å¨äº Flink æ¬å°éç¾¤ã</li>
<li>ä½¿ç¨ SQL Client åå»ºäº Source å Sink è¡¨ï¼å¹¶è·éäºæ°æ®æµã</li>
</ol>
<p>ä¸ä¸ç¯ï¼æä»¬å°æ·±å¥è®²è§£ Flink SQL ä¸­ç<strong>çªå£ï¼Windowï¼</strong>æä½ï¼ççå¦ä½å¤çâè¿å»5åéçè®¢åæ»é¢âè¿ç±»ç»å¸éæ±ã</p>
<hr>
<p><strong>åèèµæ</strong>ï¼</p>
<ul>
<li><a href="https://nightlies.apache.org/flink/flink-docs-release-1.20/" target="_blank" rel="noopener nofollow">Flink å®æ¹ææ¡£</a></li>
<li><a href="http://blog.daimajiangxin.com.cn/article/bigdata/flink-10.html" target="_blank" rel="noopener nofollow">åææ¥èª</a></li>
</ul>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-06 15:17">2026-02-06 15:16</span>&nbsp;
<a href="https://www.cnblogs.com/daimajiangxin">ä»£ç å å¿</a>&nbsp;
éè¯»(<span id="post_view_count">29</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19584653);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19584653', targetLink: 'https://www.cnblogs.com/daimajiangxin/p/19584653', title: 'ä»é¶å¼å§å­¦Flinkï¼Flink SQL æç®å¥é¨' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ä»åè°å½æ°å°Promise ]]></title>
    <link>https://www.cnblogs.com/LFeather/p/19583059</link>
    <guid>1359c131e472bccb9c10b337744bddeb</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/LFeather/p/19583059" title="åå¸äº 2026-02-06 10:47">
    <span role="heading" aria-level="2">ä»åè°å½æ°å°Promise</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>æè¿å¨é¢è¯ä¸­éå°äºå¾å¤å³äº <code>Promise</code> çé®é¢ï¼å ä¸ºä»¥åçä¸å¡å¨è¯·æ±æ¹é¢å¹¶ä¸å¤æï¼å¤æ°æ¶åé½æ¯å¨ç¨ <code>async/await</code>ï¼å¯¹ <code>Promise</code> ççè§£è¿æ¯æææ¬ ç¼ºï¼æè¿éæ°å­¦ä¹ äºä¸ä¸ <code>Promise</code>ï¼å°½éé¿ååæAPIå¼çæç« ï¼ä¸»è¦è¿æ¯ç»åèªå·±çä¸äºçè§£åæèæ¥æ´çä¸ä¸ã</p>
<h2 id="ä¸ºä»ä¹è¦ä½¿ç¨-promise">ä¸ºä»ä¹è¦ä½¿ç¨ Promise</h2>
<p>ä¼æå¨ç¥ï¼JavaScript çä¸»çº¿ç¨æ¯åçº¿ç¨æ§è¡çï¼ææçåæ­¥ä»£ç é½æ¯å¨ä¸ä¸ªçº¿ç¨ä¸­æ§è¡çï¼å½éå°ä¸äºèæ¶æä½æ¶ï¼æ¯å¦ç½ç»è¯·æ±ãæä»¶è¯»åç­ï¼ï¼å¦æéç¨åæ­¥çæ¹å¼å»å¤çè¿äºæä½ï¼å°±ä¼é»å¡ä¸»çº¿ç¨ï¼å¯¼è´é¡µé¢å¡é¡¿ï¼ç¨æ·ä½éªåå·®ãä¸ºäºè§£å³è¿ä¸ªé®é¢ï¼æä»¬åæäºå¼æ­¥ç¼ç¨ï¼ææ©çå¼æ­¥ç¼ç¨æ¹å¼æ¯åè°å½æ°ï¼Callbackï¼ï¼æä»¬åçä¸ä¸ªç®åçä¾å­ï¼</p>
<pre><code class="language-javascript">function add(getX, getY, finalCallback) {
  var x, y;
  getX(function (xVal) {
    x = xVal;
    if (y !== undefined) {
      finalCallback(x + y);
    }
  });

  getY(function (yVal) {
    y = yVal;
    if (x !== undefined) {
      finalCallback(x + y);
    }
  });
}

function fetchX(xCallback) {
  setTimeout(function () {
    xCallback(2);
  }, 1000);
}

function fetchY(yCallback) {
  setTimeout(function () {
    yCallback(3);
  }, 1000);
}

add(fetchX, fetchY, function (sum) {
  console.log("Sum is: " + sum);
});
</code></pre>
<p><code>fetchX</code> å <code>fetchY</code> æ¯ä¸¤ä¸ªå¼æ­¥å½æ°ï¼åå«æ¨¡æä»æå¡å¨è·åæ°æ®çè¿ç¨ï¼æä»¬è¦è¿è¡ <code>x+y</code> çè®¡ç®ï¼å¦æå®ä»¬ä¸­çä»»ä½ä¸ä¸ªè¿æ²¡æåå¤å¥½ï¼å°±ç­å¾ä¸¤èé½åå¤å¥½ãæä»¬éæ­¥æè§£è¿ä¸ªè¿ç¨ï¼</p>
<ol>
<li>
<p>è°ç¨ <code>add</code> å½æ°ï¼ä¼ å¥ <code>fetchX</code>ã<code>fetchY</code> ååè°å½æ°ã</p>
</li>
<li>
<p>å¨ <code>add</code> å½æ°åé¨ï¼è°ç¨ <code>getX</code>ï¼å³ <code>fetchX</code>ï¼ï¼ä¼ å¥ä¸ä¸ªåè°å½æ°ã</p>
</li>
</ol>
<pre><code class="language-JavaScript">function (xVal) {
  x = xVal;
  if (y !== undefined) {
    finalCallback(x + y);
  }
}
</code></pre>
<ol start="3">
<li>
<p><code>fetchX</code> å¼å§æ§è¡ï¼ç»è¿1ç§éåï¼è°ç¨ä¼ å¥çåè°å½æ°ï¼<code>xCallback</code>ï¼ï¼å° <code>2</code> ä½ä¸ºåæ°ä¼ éè¿å»ã</p>
</li>
<li>
<p>åè°å½æ°æ§è¡ï¼<code>x</code> è¢«èµå¼ä¸º <code>2</code>ï¼ç¶åæ£æ¥ <code>y</code> æ¯å¦å·²ç»åå¤å¥½ï¼å³ <code>y</code> æ¯å¦ä¸ä¸º <code>undefined</code>ï¼ãæ­¤æ¶ <code>y</code> è¿æ²¡æåå¤å¥½ï¼æä»¥ä¸ä¼è°ç¨æç»ç <code>finalCallback</code>ã</p>
</li>
<li>
<p>åæ ·çè¿ç¨åçå¨ <code>getY</code>ï¼å³ <code>fetchY</code>ï¼ä¸ï¼ç»è¿1ç§éåï¼<code>y</code> è¢«èµå¼ä¸º <code>3</code>ï¼ç¶åæ£æ¥ <code>x</code> æ¯å¦å·²ç»åå¤å¥½ãæ­¤æ¶ <code>x</code> å·²ç»åå¤å¥½äºï¼<code>x=2</code>ï¼ï¼æä»¥è°ç¨ <code>finalCallback</code>ï¼è®¡ç®åºæç»çç»æ <code>5</code>ï¼å¹¶æå°åºæ¥ã</p>
</li>
</ol>
<p>ä»è¿ä¸ªä¾å­ä¸­ï¼æä»¬æ¯å¦è½çåºä½¿ç¨åè°å½æ°æ¥å¤çå¼æ­¥æä½å­å¨ä¸äºé®é¢ï¼é¦åï¼ä¹è®¸è¿ä¸ªæè·¯å¾å·§å¦ï¼ä½æ¯ä»£ç å¾å¤æï¼æå¨éæ­¥æè§£åå¾é¾ç´æ¥çè§£è¿ä¸ªè¿ç¨ãå¶æ¬¡ï¼å¦æææ´å¤çå¼æ­¥æä½éè¦å¤çï¼ä»£ç ä¼åå¾æ´å å¤æï¼é¾ä»¥ç»´æ¤ï¼è¿å°±æ¯èåçâåè°å°ç±âé®é¢ã</p>
<p>åæ³æåä¸ç­æ¶ï¼ä½¿ç¨çè¿æ¯ jQueryï¼jQuery ç Ajax è¯·æ±å°±æ¯åºäºåè°å½æ°çï¼ä»£ç å¦ä¸ï¼</p>
<pre><code class="language-javascript">$.ajax({
  url: "https://api.example.com/data",
  method: "GET",
  success: function (data) {
    console.log("Data received:", data);
    $.ajax({
      url: "https://api.example.com/more-data",
      method: "GET",
      success: function (moreData) {
        console.log("More data received:", moreData);
        // ç»§ç»­åµå¥æ´å¤çåè°...
      },
      error: function (err) {
        console.error("Error fetching more data:", err);
      },
    });
  },
  error: function (err) {
    console.error("Error fetching data:", err);
  },
});
</code></pre>
<p>æ¾ç¶ï¼éçåµå¥å±çº§çå¢å ï¼ä»£ç åå¾è¶æ¥è¶é¾ä»¥éè¯»åç»´æ¤ï¼èä¸éè¯¯å¤çä¹åå¾å¤æãæä»¥åæ¶è¿ä¸èçæ é¢ï¼å ä¸ºç¨åè°å½æ°æ¥å¤çå¼æ­¥æä½ç¡®å®å­å¨ä¸äºé®é¢ï¼</p>
<ol>
<li>å¯è¯»æ§å·®ï¼åµå¥çåè°å½æ°ä½¿ä»£ç é¾ä»¥çè§£ã</li>
<li>éè¯¯å¤çå¤æï¼æ¯ä¸ªåè°å½æ°é½éè¦åç¬å¤çéè¯¯ï¼å¯¼è´ä»£ç åé¿ã</li>
<li>æ§å¶æµå°é¾ï¼ç®¡çå¤ä¸ªå¼æ­¥æä½çé¡ºåºåä¾èµå³ç³»åå¾å¤æã</li>
</ol>
<p>ç­è®²å® <code>Promise</code> ä¹åæä»¬çä¸ <code>Promise</code> æ¯å¦è½è§£å³è¿äºé®é¢ã</p>
<h2 id="promise">Promise</h2>
<h3 id="æ¯ä»ä¹">æ¯ä»ä¹</h3>
<p>éä¿çè¯´ï¼æä»¬å¯ä»¥æ <code>Promise</code> çè§£æä¸ä¸ªå¼æ­¥æä½çä»£çï¼å®æ¯å¼æ­¥æä½çè¿åå¼ï¼åæ¬åªæåæ­¥æä½æè½æè¿åå¼ï¼å¼æ­¥æä½åªè½ä½¿ç¨æä»¬ä¸é¢æè¯´çåè°å½æ°åµå¥æ¥è·å¾ç»æã</p>
<blockquote>
<p>å¼æ­¥æ¹æ³ä¸ä¼ç«å³è¿åæç»å¼ï¼èæ¯è¿åä¸ä¸ª <code>Promise</code>ï¼ä»¥ä¾¿å¨å°æ¥çæä¸ªæ¶é´ç¹æä¾è¯¥å¼ã</p>
</blockquote>
<p><code>Promise</code> çåºæ¬ç¨æ³åºè¯¥é½å¾çæäºï¼æä»¬åå»ºä¸ä¸ª <code>Promise</code> çä¾å­ï¼</p>
<pre><code class="language-javascript">// ES6 åç Promise
const asyncTask = new Promise((resolve, reject) =&gt; {
  // æ¨¡æå¼æ­¥æä½ï¼æ¯å¦æ¥å£è¯·æ±ãæä»¶è¯»åï¼
  setTimeout(() =&gt; {
    const success = true;
    if (success) {
      resolve("æä½æå"); // æååè°
    } else {
      reject("æä½å¤±è´¥"); // å¤±è´¥åè°
    }
  }, 1000);
});

// è°ç¨ Promise
asyncTask
  .then((result) =&gt; console.log(result)) // è¾åºï¼æä½æå
  .catch((error) =&gt; console.log(error))
  .finally(() =&gt; console.log("æä½å®æ"));
</code></pre>
<p>å¯ä»¥çå°ï¼æä»¬æå¼æ­¥æä½ <code>setTimeout</code> åè£å¨ <code>Promise</code> ä¸­ï¼ç¶åéè¿ <code>then</code>ã<code>catch</code> å <code>finally</code> æ¥å¤çç»æåéè¯¯ï¼<code>setTimeout</code> å¯ä»¥æ¯ä»»æå¼æ­¥æä½ï¼æ¯å¦ç½ç»è¯·æ±ãæä»¶è¯»åç­ã</p>
<p>éèå¨è¿äº API ä¹ä¸çè¿æä¸ä¸ªåæ°ï¼ä¸ä¸ª <code>Promise</code> å¿ç¶å¤äºä»¥ä¸ä¸ç§ç¶æä¹ä¸ï¼</p>
<ul>
<li><strong><code>Pending</code>ï¼è¿è¡ä¸­ï¼</strong>ï¼åå§ç¶æï¼æ¢ä¸æ¯æåï¼ä¹ä¸æ¯å¤±è´¥ã</li>
<li><strong><code>Fulfilled</code>ï¼å·²æåï¼</strong>ï¼æä½æåå®æã</li>
<li><strong><code>Rejected</code>ï¼å·²å¤±è´¥ï¼</strong>ï¼æä½å¤±è´¥ã</li>
</ul>
<p>è¿ä¸é¨ååå®¹å¯ä»¥åè MDN ç <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener nofollow">Promise - JavaScript | MDN</a>ï¼è®²å¾å¾æ¸æ¥ã</p>
<p><img src="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/promises.png" alt="" loading="lazy"></p>
<p>åèè¿å¼ å¾ï¼<code>Pending</code> ç¶æéåä¸¤ä¸ªç»æï¼<code>Fulfilled</code> å <code>Rejected</code>ï¼è¿ä¸ªè¿ç¨æ¯ååä¸å¯éçï¼ä¸æ¦ç¶ææ¹åï¼å°±ä¼æ°¸ä¹ä¿æè¯¥ç¶æãå½ä»»æä¸ç§æåµåçæ¶ï¼<code>then</code> æ¹æ³æ³¨åçåè°å½æ°å°±ä¼è¢«è°ç¨ï¼å³ä¸åå¤äº"å¾å®"ï¼<code>Pending</code>ï¼ç¶æï¼ç§°ä¹ä¸º"å·²æ²å®"ï¼<code>Settled</code>ï¼ã</p>
<h4 id="rejected">Rejected</h4>
<p>æä»¬åç <code>Rejected</code> çæåµï¼</p>
<pre><code class="language-JavaScript">// catch
const failedTask = new Promise((resolve, reject) =&gt; {
  setTimeout(() =&gt; {
    reject("æä½å¤±è´¥"); // å¤±è´¥åè°
  }, 1000);
});

failedTask
  .then((result) =&gt; console.log(result))
  .catch((error) =&gt; console.log(error)) // è¾åºï¼æä½å¤±è´¥
  .finally(() =&gt; console.log("æä½å®æ"));

// then ç¬¬äºä¸ªåæ°
const anotherFailedTask = new Promise((resolve, reject) =&gt; {
  setTimeout(() =&gt; {
    reject("æä½å¤±è´¥"); // å¤±è´¥åè°
  }, 1000);
});

anotherFailedTask
  .then(
    (result) =&gt; console.log("æåï¼" + result),
    (error) =&gt; console.log("å¤±è´¥ï¼" + error),
  ) // è¾åºï¼æä½å¤±è´¥
  .finally(() =&gt; console.log("æä½å®æ"));
</code></pre>
<p>æä¸¤ç§æ¹å¼å¯ä»¥æè· <code>Promise</code> çæç»ç¶æï¼ä¸ç§æ¯ä½¿ç¨ <code>catch</code> æ¹æ³ï¼å¦ä¸ç§æ¯å°éè¯¯å¤çå½æ°ä½ä¸º <code>then</code> æ¹æ³çç¬¬äºä¸ªåæ°ä¼ å¥ãä¸¤ç§æ¹å¼é½è½ææå°å¤ç <code>Promise</code> çæç»ç¶æï¼å¦æä¸è¿è¡éè¯¯å¤çï¼æªæè·çæç»ä¼å¯¼è´æªå¤çç <code>Promise</code> æç»è­¦åãæ´è¯¦ç»çè¯´ææä»¬åé¢åèï¼è¿éåªçç¨æ³ã</p>
<h4 id="fulfilled">Fulfilled</h4>
<p>å¨æé å¨ <code>Promise(..)</code> ä¸­ï¼æä»¬éå¸¸ç¨ä¸¤ä¸ªåè°å½æ°æ¥è¡¨ç¤ºæååå¤±è´¥çæåµï¼è¿ä¸¤ä¸ªå½æ°çå½åå¹¶ä¸åºå®ï¼éå¸¸æä»¬ä½¿ç¨ <code>resolve</code> å <code>reject</code>ï¼<code>reject</code> å¾æ¸æ¥å°è¡¨ç¤ºå¤±è´¥ï¼å¹¶ä¸ä»£è¡¨ <code>Promise</code> è¿å¥ <code>Rejected</code> ç¶æï¼èæåçåè°å½æ° <code>resolve</code>ï¼å³è®®ï¼ï¼å®è¡¨ç¤º <code>Promise</code> è¿å¥ <code>Fulfilled</code> ç¶æï¼è¿éç¨ ES6 è§èä¸­çåè°å½åæ¥è¯´æï¼</p>
<pre><code class="language-JavaScript">myPromise.then((result) =&gt; onFulfilled, onRejected)
</code></pre>
<h4 id="é¾å¼è°ç¨">é¾å¼è°ç¨</h4>
<p>å¨æå° <code>Promise</code> æ¶ï¼é¾å¼è°ç¨æ¯ä¸ä¸ªéå¸¸éè¦çæ¦å¿µï¼ä¸é¢çä¾å­ä¸­ï¼æä»¬çå° <code>Promise</code> å¯¹è±¡å¯ä»¥è°ç¨ <code>then</code> æ¹æ³ï¼è <code>then</code> æ¹æ³åå¯ä»¥è°ç¨ <code>catch</code> å <code>finally</code> æ¹æ³ï¼å ä¸º <code>then</code> æ¹æ³è¿åçä»ç¶æ¯ä¸ä¸ª <code>Promise</code> å¯¹è±¡ï¼è <code>catch</code> å <code>finally</code> æ¹æ³åå¨åé¨è°ç¨çä¹æ¯ <code>then</code> æ¹æ³ï¼è¿æ ·å®ä»¬å°±å¯ä»¥é¾å¼è°ç¨ã</p>
<pre><code class="language-JavaScript">// Promise.resolveè¿ç§åæ³æä»¬ä¹åè®¨è®º
Promise.resolve('ç¬¬ä¸æ­¥ç»æ')
  .then(res =&gt; {
    console.log(res); // æå°ï¼ç¬¬ä¸æ­¥ç»æ
    // return æ®éå¼ â æ° Promise ç¶æä¸º fulfilled
    return 'ç¬¬äºæ­¥ç»æ';
  })
  .then(res =&gt; {
    console.log(res); // æå°ï¼ç¬¬äºæ­¥ç»æ
    // return æ° Promise â æ° Promise è·éè¯¥ Promise çç¶æ
    return Promise.resolve('ç¬¬ä¸æ­¥ç»æ');
  })
  .then(res =&gt; {
    console.log(res); // æå°ï¼ç¬¬ä¸æ­¥ç»æ
  });
</code></pre>
<p>éè¿ä¾å­å¯ä»¥çå°ï¼é¾å¼è°ç¨å¯ä»¥å°å¤ä¸ªå¼æ­¥æä½ä¸²èèµ·æ¥ï¼æ¯ä¸ª <code>then</code> æ¹æ³å¤çä¸ä¸ä¸ª <code>Promise</code> çç»æï¼è¿å°±è§£å³äºæä»¬æå¼å§æå°çåè°å°ç±é®é¢ï¼ä½¿ä»£ç æ´å æ¸æ°åæäºç»´æ¤ã</p>
<p>è¿ä¸ªä¾å­ä¸­è¿æä¸ä¸ªç»èï¼å¨ <code>then</code> æ¹æ³ä¸­éè¿ <code>return</code> æ¥ä¼ éå¼ï¼å½ä½¿ç¨ <code>return</code> è¿åä¸ä¸ªæ®éå¼æ¶ï¼æ°ç <code>Promise</code> ä¼è¿å¥ <code>Fulfilled</code> ç¶æï¼ä¹å¯ä»¥è¿åä¸ä¸ªæ°ç <code>Promise</code> å¯¹è±¡ï¼è¿æ ·æ°ç <code>Promise</code> ä¼è·éè¯¥ <code>Promise</code> çç¶æãå¼å¾æ³¨æçæ¯ï¼å¦æè¿åçæ¯ä¸ä¸ª <code>thenable</code> å¯¹è±¡ï¼å·æ <code>then</code> æ¹æ³çå¯¹è±¡ï¼ï¼<code>Promise</code> ä¹ä¼ç­å¾è¯¥å¯¹è±¡è§£å³ï¼è¿ä½¿å¾ <code>Promise</code> å¯ä»¥ä¸å¶ä»å®ç°äºç±» <code>Promise</code> æ¥å£çåºè¿è¡äºæä½ã</p>
<p>å¤§ä½ä¸æä»¬äºè§£äº <code>Promise</code> çç¨æ³ï¼æä»¬ç¨ <code>Promise</code> æ¥å®ç°åµå¥å¼æ­¥æä½ï¼</p>
<pre><code class="language-JavaScript">function getFirstData() {
  // è¿åä¸ä¸ª Promiseï¼ç¨ setTimeout æ¨¡æå¼æ­¥
  return new Promise((resolve) =&gt; {
    setTimeout(() =&gt; {
      const data = "ç¬¬ä¸ä¸ªå¼æ­¥æä½çç»æ";
      console.log("Data received:", data);
      // å¼æ­¥æåï¼ä¼ éç»æç»ä¸ä¸ä¸ª .then()
      resolve(data);
    }, 1000);
  });
}

function getSecondData(prevData) {
  return new Promise((resolve) =&gt; {
    setTimeout(() =&gt; {
      const moreData = `ç¬¬äºä¸ªå¼æ­¥æä½çç»æï¼åºäºä¸ä¸æ­¥ï¼${prevData}ï¼`;
      console.log("More data received:", moreData);
      resolve(moreData); // å¯éï¼ç»§ç»­ä¼ éç»æç»åç»­é¾å¼è°ç¨
    }, 1000);
  });
}

// é¾å¼è°ç¨
getFirstData()
  .then((data) =&gt; {
    // ç¬¬ä¸ä¸ªå¼æ­¥æååï¼æ§è¡ç¬¬äºä¸ªå¼æ­¥
    return getSecondData(data);
  })
  .catch((err) =&gt; {
    // ç»ä¸æè·ææå¼æ­¥æä½çéè¯¯
    console.error("å¼æ­¥æä½åºéï¼", err);
  });
</code></pre>
<h3 id="promise-è§£å³äºä»ä¹é®é¢">Promise è§£å³äºä»ä¹é®é¢</h3>
<p>éè¿è¿ä¸ªä¾å­å¯ä»¥çå°ï¼æä»¬ä¸å¼å§æåºçåè°å½æ°çä¸ä¸ªé®é¢å¾å°äºä¸åç¨åº¦çè§£å³ï¼</p>
<ol>
<li><strong>å¯è¯»æ§æå</strong>ï¼éè¿é¾å¼è°ç¨ï¼ä»£ç ç»ææ´å æ¸æ°ï¼æ¯ä¸ªå¼æ­¥æä½é½å¨èªå·±ç <code>then</code> åä¸­å¤çï¼é¿åäºåµå¥åè°çå¤ææ§ã</li>
<li><strong>ç»ä¸éè¯¯å¤ç</strong>ï¼ä½¿ç¨ <code>catch</code> æ¹æ³å¯ä»¥ç»ä¸æè·ææå¼æ­¥æä½çéè¯¯ï¼ç®åäºéè¯¯å¤çé»è¾ã</li>
<li><strong>æ§å¶æµç®å</strong>ï¼éè¿é¾å¼è°ç¨ï¼å¯ä»¥æ´å®¹æå°ç®¡çå¤ä¸ªå¼æ­¥æä½çé¡ºåºåä¾èµå³ç³»ï¼ä½¿ä»£ç æ´æäºçè§£ã</li>
</ol>
<p>è¿éæç¹åä¸ç§ <code>if</code> è¯­å¥çæ¿ä»£åæ³ï¼</p>
<pre><code class="language-JavaScript">if (condition1) {
  // do something
  if (condition2) {
    // do something
    if (condition3) {
      // do something
    }
  }
}

// å¯ä»¥æ¹åä¸ºï¼

if(!condition1) return;
// do something
if(!condition2) return;
// do something
if(!condition3) return;
// do something

</code></pre>
<p>æ¢ä¸ªæè·¯ï¼ä½ç¨ç¸åï¼ä½ä»£ç çå¯è¯»æ§ä¼åé«ï¼ä¸è¿ <code>Promise</code> è¦å¤æå¾å¤ï¼ææ²¡æç´æ¥ä½¿ç¨ä¸å¼å§çåè°å½æ°çæ¬æ¥å¯¹æ¯ï¼å¹¶éåä¸å°ï¼èæ¯æ¶åäºæ°çç¥è¯ç¹ï¼éè¦ç¨å° <code>Promise</code> çä¸äº APIï¼ææç®æ¢ä¸ç§è§åº¦æ¥çè§£ï¼ç¶åæä»¬ååå¤´çè¿ä¸ªå¯¹æ¯ã</p>
<h3 id="promise-ç-api-ä¸åå">Promise ç API ä¸åå</h3>
<p><code>Promise</code> æ¯ ES6ï¼ES2015ï¼å¼å¥çä¸ç§ç¨äºå¤çå¼æ­¥æä½ç<strong>å¯¹è±¡</strong>ï¼æè¿ååäºä¸ç¯å³äºååçæç« ï¼<a href="https://www.cnblogs.com/LFeather/p/19312203" target="_blank">å¯¹äºååãååé¾åç»§æ¿ççè§£</a>ï¼è¿éå°±æ¯æ³ä»åååé¢åå¯¹è±¡çè§åº¦æ¥å æ·±ä¸ä¸çè§£ï¼æä»¬è¿æ¯ç¨åé¢çä¾å­ï¼åæ­¥æè§£ï¼</p>
<pre><code class="language-javascript">// ES6 åç Promise
const asyncTask = new Promise((resolve, reject) =&gt; {
  // æ¨¡æå¼æ­¥æä½ï¼æ¯å¦æ¥å£è¯·æ±ãæä»¶è¯»åï¼
  setTimeout(() =&gt; {
    const success = true;
    if (success) {
      resolve("æä½æå"); // æååè°
    } else {
      reject("æä½å¤±è´¥"); // å¤±è´¥åè°
    }
  }, 1000);
});

// è°ç¨ Promise
asyncTask
  .then((result) =&gt; console.log(result)) // è¾åºï¼æä½æå
  .catch((error) =&gt; console.log(error))
  .finally(() =&gt; console.log("æä½å®æ"));
</code></pre>
<h4 id="æé å½æ°-promise">æé å½æ° Promise()</h4>
<p>åä»æ ¸å¿è¯­å¥è¯´èµ·ï¼ <code>new Promise((resolve, reject) =&gt; { ... })</code> è¿éäºå³ä¸¤ä¸ªæ¦å¿µï¼æé å½æ°å <code>new</code>ã</p>
<p><code>Promise()</code> æ¯ä¸ä¸ªæé å¨ï¼Constructorï¼æèè¯´æé å½æ°ï¼ç¨äºåå»º <code>Promise</code> å¯¹è±¡ã</p>
<p>ä½¿ç¨æé å½æ°çå½¢å¼æ¥åå»ºå¯¹è±¡æå ä¸ªå¥½å¤ï¼</p>
<ol>
<li>
<p><strong>å°è£åå§åé»è¾</strong>ï¼<code>Promise</code> æé å½æ°åé¨å°è£äºåå§å <code>Promise</code> å¯¹è±¡æéçé»è¾ï¼æ¯å¦è®¾ç½®åå§ç¶æï¼<code>pending</code>ï¼ãè®¾ç½®åè°å½æ°ï¼<code>resolve</code> å <code>reject</code>ï¼ã</p>
</li>
<li>
<p><strong>å±äº«æ¹æ³</strong>ï¼éè¿æé å½æ°åå»ºçå¯¹è±¡å®ä¾å¯ä»¥å±äº«ååä¸çæ¹æ³ï¼å¦ <code>then</code>ã<code>catch</code>ã<code>finally</code>ï¼ï¼é¿åæ¯ä¸ªå®ä¾é½åå»ºä¸ä»½ç¸åçæ¹æ³ï¼èçåå­ã</p>
</li>
<li>
<p><strong>ç«å³æ§è¡</strong>ï¼å½æä»¬åå»ºä¸ä¸ªæ°ç <code>Promise</code> å®ä¾æ¶ï¼ä¼ å¥çæ§è¡å¨å½æ°ï¼executor functionï¼ä¼ç«å³æ§è¡ï¼è¿ä½¿å¾æä»¬å¯ä»¥å¨åå»º <code>Promise</code> çåæ¶å¼å§å¼æ­¥æä½ã</p>
</li>
</ol>
<p>è <code>new</code> å³é®å­ç¨äºåå»ºä¸ä¸ªæ°çå¯¹è±¡å®ä¾ï¼å¹¶å°å¶ååé¾æ¥å°æé å½æ°çååå¯¹è±¡ä¸ï¼ä¹å°±æ¯è®©æ°åå»ºçå¯¹è±¡ç»§æ¿æé å½æ°ååä¸çæ¹æ³åå±æ§ï¼ç»åä¸é¢çä¾å­å°±æ¯è¯´æä»¬åå»ºç <code>asyncTask</code> å¯¹è±¡ä¼ç»§æ¿ <code>Promise.prototype</code> ä¸çæ¹æ³ï¼æ¯å¦ <code>then</code>ã<code>catch</code> å <code>finally</code>ï¼è¿ä¹å°±æ¯ä¸ºä»ä¹æä»¬å¯ä»¥å¨ <code>asyncTask</code> ä¸è°ç¨è¿äºæ¹æ³ï¼ä»¥åè¿è¡åé¢æè¯´çé¾å¼è°ç¨ã</p>
<p>è¦æ³¨æçä¸ç¹æ¯ï¼æ§è¡å¨å½æ°çè¿åå¼å¯¹ <code>Promise</code> çå½±åæéï¼å¨ <code>then</code> æ¹æ³ä¸­æä»¬éè¿ <code>return</code> æ¥ä¼ éå¼ï¼ä½å¨æ§è¡å¨å½æ°ä¸­ <code>return</code> è¯­å¥ä»å½±åæ§å¶æµç¨ï¼å¹¶ä¸ä¼ç´æ¥æ¹å <code>Promise</code> çç¶æï¼<code>Promise</code> çç¶æåªè½éè¿è°ç¨ <code>resolve</code> æ <code>reject</code> æ¥æ¹åã</p>
<pre><code class="language-JavaScript">const myPromise = new Promise((resolve, reject) =&gt; {
  // ä¸äºå¼æ­¥æä½
  if (/* æä½æå */) {
    resolve("æåç»æ");
  } else {
    reject("å¤±è´¥åå ");
  }
  return "è¿ä¸ªè¿åå¼ä¸ä¼å½±å Promise çç¶æ";
});
</code></pre>
<h4 id="å¥å-resolve-reject-">å¥å (resolve, reject) =&gt;</h4>
<p>æ¥ä¸æ¥æä»¬çæé å½æ°çå¥å <code>(resolve, reject) =&gt; { ... }</code> ï¼ä¹å°±æ¯æ§è¡å¨å½æ°ï¼executor functionï¼ï¼å®ä¼å¨ <code>Promise</code> å®ä¾åå»ºæ¶ç«å³æ§è¡ï¼è¿ä¸ªä¸é¢è¯´è¿äºãä½¿ç¨ <code>Promise</code> æ¶ï¼æä»¬ä¸ä¼å³æ³¨æ§è¡å¨å½æ°ï¼ä¸»è¦æ¯ä½¿ç¨è¿ä¸ªå½æ°çå¥å <code>resolve</code> å <code>reject</code> ç¨æ¥æ¹å <code>Promise</code> çç¶æã</p>
<pre><code class="language-JavaScript">function executor(resolveFunc, rejectFunc) {
  // éå¸¸ï¼`executor` å½æ°ç¨äºå°è£æäºæ¥ååè°å½æ°ä½ä¸ºåæ°çå¼æ­¥æä½ï¼æ¯å¦ä¸é¢ç `setTimeout` å½æ°
}
</code></pre>
<p>å½è°ç¨ <code>resolve</code> æ <code>reject</code> æ¶ï¼<code>Promise</code> çç¶æä¼ç«å³æ¹åï¼ä» <code>pending</code> åä¸º <code>fulfilled</code> æ <code>rejected</code>ï¼ç¶åæ§è¡åè°å½æ°ï¼è¿ä¸ªåè°å½æ°å°±æ¯æä»¬éè¿ <code>then</code> æ¹æ³æ³¨åçå½æ°ã</p>
<pre><code class="language-JavaScript">const p = new Promise((resolve) =&gt; {
  console.log('1. æ§è¡å¨å½æ°ç«å³æ§è¡');
  resolve('æå');
  console.log('2. resolve è°ç¨å®æï¼åæ­¥ï¼');
});

console.log('3. Promise åå»ºå®æ');

p.then((value) =&gt; {
  console.log('5. then åè°æ§è¡:', value);
});

console.log('4. then æ¹æ³è°ç¨å®æ');

// è¾åºé¡ºåºï¼
// 1. æ§è¡å¨å½æ°ç«å³æ§è¡
// 2. resolve è°ç¨å®æï¼åæ­¥ï¼
// 3. Promise åå»ºå®æ
// 4. then æ¹æ³è°ç¨å®æ
// 5. then åè°æ§è¡: æå
</code></pre>
<p>ä½æä»¬ç¨å° <code>Promise</code> æ¶ä¸»è¦è¿æ¯ç¨äºå¼æ­¥ä»»å¡ï¼<code>then</code> æ¹æ³æ¯å¸åçå¾®ä»»å¡ï¼microtaskï¼ï¼å¦æ <code>then</code> æ¹æ³åæ§è¡ï¼éé¢çåè°å½æ°ä¼è¢«æ¾å¥å¾®ä»»å¡éåï¼ç­å¾å½åå®ä»»å¡æ§è¡å®æ¯ååæ§è¡ã</p>
<p>å¯¹äºæ´ç»è´çæ§è¡é¡ºåºï¼ä¹åæåè¿ä¸ç¯å³äºäºä»¶å¾ªç¯çæç« ï¼åå¥½æ¯ç¨ <code>Promise</code> ä¸¾ä¾ï¼å¯ä»¥åèï¼<a href="https://www.cnblogs.com/LFeather/p/16139014.html" target="_blank">æå³ JavaScript äºä»¶å¾ªç¯çè¥å¹²çé®æ¢ç©¶</a>ã</p>
<p><code>Promise</code> åé¨çå¤§è´é»è¾æ¯è¿æ ·çï¼</p>
<pre><code class="language-JavaScript">// Promise åé¨ç®åå®ç°
class MyPromise {
  constructor(executor) {
    this.state = 'pending';           // ç¶æ
    this.value = undefined;           // ç»æå¼
    this.onFulfilledCallbacks = [];   // â å­å¨ then çæååè°
    this.onRejectedCallbacks = [];    // â å­å¨ then çå¤±è´¥åè°

    const resolve = (value) =&gt; {
      if (this.state === 'pending') {
        this.state = 'fulfilled';
        this.value = value;
        // â å³é®ï¼éååè°éåï¼å°ææåè°å å¥å¾®ä»»å¡
        this.onFulfilledCallbacks.forEach(callback =&gt; {
          queueMicrotask(() =&gt; callback(value));
        });
      }
    };

    const reject = (reason) =&gt; {
      if (this.state === 'pending') {
        this.state = 'rejected';
        this.value = reason;
        this.onRejectedCallbacks.forEach(callback =&gt; {
          queueMicrotask(() =&gt; callback(reason));
        });
      }
    };

    executor(resolve, reject);
  }

  then(onFulfilled, onRejected) {
    // å¦æ Promise è¿æ¯ pendingï¼å°±æåè°å­èµ·æ¥
    if (this.state === 'pending') {
      this.onFulfilledCallbacks.push(onFulfilled);  // â å­å¨åè°
      this.onRejectedCallbacks.push(onRejected);
    }
    // å¦æ Promise å·²ç» fulfilledï¼ç«å³å°åè°å å¥å¾®ä»»å¡
    else if (this.state === 'fulfilled') {
      queueMicrotask(() =&gt; onFulfilled(this.value));
    }
    // å¦æ Promise å·²ç» rejected
    else if (this.state === 'rejected') {
      queueMicrotask(() =&gt; onRejected(this.value));
    }

    return new MyPromise(() =&gt; {}); // ç®åï¼å®éæ´å¤æ
  }
}
</code></pre>
<p>æä»¥ <code>then</code> ä¸­çåè°å½æ°è¢«æ§è¡çåææ¯ <code>resolve</code> æ <code>reject</code> è¢«è°ç¨å¹¶ä¸ <code>then</code> æ¹æ³ä¹è¢«è°ç¨ï¼è¿ä¹æ¯ <code>Promise</code> è½å¤çå¼æ­¥æä½çå³é®ã</p>
<h4 id="éææ¹æ³">éææ¹æ³</h4>
<p>ç®åæä¸ä¸ï¼éææ¹æ³æ¯ç´æ¥æè½½å¨æé å½æ°ä¸çæ¹æ³ï¼èä¸æ¯å®ä¾å¯¹è±¡ä¸ï¼ä»¥åé¢çä¾å­æ¥è¯´ï¼<code>asyncTask</code> æ¯ <code>Promise</code> çä¸ä¸ªå®ä¾å¯¹è±¡ï¼è <code>Promise.all(..)</code> å <code>Promise.resolve(..)</code> è¿ç§åæ¯ <code>Promise</code> æé å½æ°çä¸ä¸ªéææ¹æ³ã</p>
<p>åºäºä¸é¢çç®åä¾å­ï¼<code>Promise</code> å¤§ä½ä¸çç¨æ³æä»¬å·²ç»äºè§£äºï¼ä½è¿æå¾å¤ API æ²¡ææ¶åå°ï¼æä»¬å¯ä»¥éè¿æå° <code>Promise</code> çååæ¥æ¥çï¼</p>
<pre><code class="language-JavaScript">console.log(Promise.prototype);
</code></pre>
<p><img src="https://blog-1252364274.cos.ap-guangzhou.myqcloud.com/20260205173555584.png" alt="" loading="lazy"></p>
<p>æä»¬å¯ä»¥çå° <code>then</code>ã<code>catch</code> å <code>finally</code> æ¹æ³é½å¨ <code>Promise.prototype</code> ä¸ï¼è¿äºæ¹æ³æ¯å®ä¾æ¹æ³ï¼æå³çå®ä»¬å¯ä»¥è¢«ä»»ä½ <code>Promise</code> å®ä¾è°ç¨ã</p>
<p>ç±äºå®å¨æºå¶ï¼ç´æ¥æå° <code>Promise</code> æ¬èº«æ¯çä¸å°åçä»£ç çï¼æä»¬æ¢ä¸ç§æ¹å¼ï¼åªéè¦å¾å°éææ¹æ³åå°±è¡ï¼</p>
<pre><code class="language-JavaScript">console.log(Object.getOwnPropertyNames(Promise));

// è¾åºï¼['length', 'name', 'prototype', 'all', 'allSettled', 'any', 'race', 'resolve', 'reject', 'withResolvers', 'try']
</code></pre>
<p>è¾åºç»æä¸­æççææçä¸çæï¼å ä¸ºæä¹åå¯¹ <code>Promise</code> ä»åçå¨ä¼ç¨çå±é¢ï¼æä»¥æäºæçè³æ¯ç¬¬ä¸æ¬¡ç¥éï¼ä½æ²¡å³ç³»ï¼éè¿åååå¯¹ç§ MDN ææ¡£ï¼éä¸ªå­¦ä¹ ä¸ä¸ã <code>length</code>ã<code>name</code> å <code>prototype</code> æ¯å½æ°å¯¹è±¡çé»è®¤å±æ§ï¼æä»¬ä¸»è¦å³æ³¨å¶ä»çéææ¹æ³ï¼</p>
<ol>
<li><code>Promise.resolve(..)</code> å <code>Promise.reject(..)</code></li>
</ol>
<p>è¿ä¸¤ä¸ªæ¹æ³åºè¯¥æ¯æå¸¸è§çäºï¼ä¸é¢çä¾å­ä¸­ä¹ç¨å°è¿ï¼<code>reject</code> æ¯è¾ç®åï¼è¿åä¸ä¸ªæç»ç¶æç <code>Promise</code> å¯¹è±¡ï¼å¥åå°±æ¯æç»çåå ï¼</p>
<pre><code class="language-JavaScript">const promiseReject = Promise.reject(new Error("å¤±è´¥åå "));
promiseReject.catch((reason) =&gt; {
  console.log(reason.message);
  // Expected output: å¤±è´¥åå 
});

// æè
function resolved(result) {
  console.log("Resolved");
}

function rejected(result) {
  console.log("Rejected:", result);
}

const promiseReject2 = Promise.reject("å¤±è´¥åå ");
promiseReject2.then(resolved, rejected);
</code></pre>
<p><code>resolve</code> æ¹æ³åæ¯è¾å¤æä¸äºï¼å®æä¸¤ç§è¿åå½¢å¼ï¼1. å¦æå¥åæ¯ä¸ä¸ªæ®éå¼ï¼é <code>Promise</code> å¯¹è±¡ï¼ï¼åè¿åä¸ä¸ªä»¥è¯¥å¼ä¸ºç»æçå·²è§£å³ï¼<code>fulfilled</code>ï¼ç¶æç <code>Promise</code> å¯¹è±¡ï¼è¿ä¸ç¹ä¸ <code>reject</code> å¯¹åºï¼2. å¦æå¥åæ¯ä¸ä¸ª <code>Promise</code> å¯¹è±¡ï¼åè¿åè¯¥ <code>Promise</code> å¯¹è±¡æ¬èº«ã</p>
<pre><code class="language-JavaScript">// å¥åæ¯æ®éå¼
const promise1 = Promise.resolve(123);

promise1.then((value) =&gt; {
  console.log(value);
  // Expected output: 123
});

// å¥åæ¯ Promise å¯¹è±¡
const originalPromise = new Promise((resolve) =&gt; {
  setTimeout(() =&gt; {
    resolve("åå§ Promise ç»æ");
  }, 1000);
});

const promise2 = Promise.resolve(originalPromise);
promise2.then((value) =&gt; {
  console.log(value);
  // Expected output: åå§ Promise ç»æ
});
</code></pre>
<ol start="2">
<li><code>Promise.all(..)</code>ã<code>Promise.race(..)</code>ã<code>Promise.allSettled(..)</code> å <code>Promise.any(..)</code></li>
</ol>
<p>è¿åä¸ªæè§å¾å¯ä»¥æ¾ä¸èµ·ä»ç»ï¼å®ä»¬é½æ¯ç¨äºå¤çå¤ä¸ª <code>Promise</code> å¯¹è±¡çéææ¹æ³ï¼å¥åé½æ¯ä¸ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼éå¸¸æ¯æ°ç»ï¼ï¼åå«å¤ä¸ª <code>Promise</code> å¯¹è±¡ï¼è¿åä¸ä¸ªæ°ç <code>Promise</code> å¯¹è±¡ï¼å¶ä»çåºå«ç¨ä¸å¼ è¡¨æ ¼æ¥è¯´æï¼</p>
<table>
<thead>
<tr>
<th>æ¹æ³</th>
<th>æè¿°</th>
<th>è¿åå¼</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Promise.all(..)</code></td>
<td>å¨æåææåï¼ä¸å¤±è´¥å°±å¤±è´¥ã</td>
<td>æåæ¶è¿åä¸ä¸ªåå«ææç»æçæ°ç»ï¼å¤±è´¥æ¶è¿åç¬¬ä¸ä¸ªå¤±è´¥çåå ã</td>
</tr>
<tr>
<td><code>Promise.allSettled(..)</code></td>
<td>ç­ææå®æï¼æ è®ºæè´¥ã</td>
<td>ç»ææ¯ä¸ä¸ªåå«æ¯ä¸ª <code>Promise</code> ç»æç¶æçæ°ç»ã</td>
</tr>
<tr>
<td><code>Promise.any(..)</code></td>
<td>ä¸æåå°±æåï¼å¨å¤±è´¥æå¤±è´¥ã</td>
<td>æåæ¶è¿åç¬¬ä¸ä¸ªæåçç»æï¼å¤±è´¥æ¶è¿åä¸ä¸ª <code>AggregateError</code>ï¼åå«ææå¤±è´¥çåå ã</td>
</tr>
<tr>
<td><code>Promise.race(..)</code></td>
<td>è°åå®æï¼æè´¥åå¯ï¼ï¼å°±ç¨è°çç»æã</td>
<td>ç»ææ¯ç¬¬ä¸ä¸ªè§£å³ææç»ç <code>Promise</code> çç»ææåå ã</td>
</tr>
</tbody>
</table>
<p>å³äº <code>Promise.all(..)</code> çåºç¨ï¼æä»¬æå¼å§çåè°å½æ°å°±æ¯ä¸ä¸ªå¾å¥½çä¾å­ï¼æä»¬å¯ä»¥ç¨å®æ¥éåï¼</p>
<pre><code class="language-JavaScript">function fetchX() {
  return new Promise((resolve) =&gt; {
    setTimeout(() =&gt; {
      resolve(2);
    }, 1000);
  });
}
function fetchY() {
  return new Promise((resolve) =&gt; {
    setTimeout(() =&gt; {
      resolve(3);
    }, 1000);
  });
}

function add() {
  return Promise.all([fetchX(), fetchY()]).then(([x, y]) =&gt; x + y);
}

add().then((sum) =&gt; {
  console.log("Sum is: " + sum); // è¾åºï¼Sum is: 5
});
</code></pre>
<p>å¦ææä¸ä¸ªå¼æ­¥æä½ï¼</p>
<pre><code class="language-JavaScript">function fetchZ() {
  return new Promise((resolve) =&gt; {
    setTimeout(() =&gt; {
      resolve(4);
    }, 1000);
  });
}

function addThree() {
  return Promise.all([fetchX(), fetchY(), fetchZ()]).then(([x, y, z]) =&gt; x + y + z);
}
</code></pre>
<p>MDNä¸ç <code>Promise.allSettled(..)</code> ä¾å­ï¼</p>
<pre><code class="language-JavaScript">Promise.allSettled([
  Promise.resolve(33),
  new Promise((resolve) =&gt; setTimeout(() =&gt; resolve(66), 0)),
  99,
  Promise.reject(new Error("ä¸ä¸ªéè¯¯")),
]).then((values) =&gt; console.log(values));

// [
//   { status: 'fulfilled', value: 33 },
//   { status: 'fulfilled', value: 66 },
//   { status: 'fulfilled', value: 99 },
//   { status: 'rejected', reason: Error: ä¸ä¸ªéè¯¯ }
// ]
</code></pre>
<p>è¿éçè¿åå¼æäºä¸åï¼æ¯ä¸ä¸ªå¯¹è±¡æ°ç»ï¼æ¯ä¸ªå¯¹è±¡è¡¨ç¤ºå¯¹åº <code>Promise</code> çç¶æåç»æã</p>
<p><code>Promise.any(..)</code> çè¿åå¼æ¯ç¬¬ä¸ä¸ªæåçç»æï¼å¦æææ <code>Promise</code> é½å¤±è´¥äºï¼åè¿åä¸ä¸ª <code>AggregateError</code>ï¼å®åå«ææå¤±è´¥çåå ï¼</p>
<pre><code class="language-JavaScript">const promiseA = Promise.reject("å¤±è´¥åå  A");
const promiseB = Promise.reject("å¤±è´¥åå  B");

Promise.any([promiseA, promiseB])
  .then((value) =&gt; {
    console.log(value);
  })
  .catch((error) =&gt; {
    console.log(error);
  });

// è¾åºï¼AggregateError: All promises were rejected
</code></pre>
<p>ä¸å¶ä»ä¸ä¸ªæ¹æ³ä¸åï¼<code>Promise.race(..)</code> è¿åç <code>Promise</code> ç¶æçæ²å®æ»æ¯å¼æ­¥çï¼åé¢çä¸ç§æ¹æ³å¥åç <code>Promise</code> æ°ç»ä¸­æä¸ä¸ªçè³å¤ä¸ªæ¯å·²ç»è§£å³ï¼<code>fulfilled</code>ï¼ææç»ï¼<code>rejected</code>ï¼ç <code>Promise</code> å¯¹è±¡ï¼ç®åæ¥è¯´ï¼åä¸é¢çå¤§é¨åä¾å­ä¸æ ·ï¼æä»¬ä¼ å¥ä¸ä¸ªç¡®å®çå¼èä¸æ¯å¼æ­¥æ¹æ³ï¼ï¼é£ä¹ <code>Promise.all(..)</code>ã<code>Promise.allSettled(..)</code> å <code>Promise.any(..)</code> ä¼ç«å³è¿åç»æï¼è <code>Promise.race(..)</code> çè¿åå¼åæ¯å¼æ­¥çã</p>
<p>MDN éå¯¹æ¯ä¸ªæ¹æ³çè¿åå¼é½æè¯¦ç»çè¯´æï¼æ¯å¦è¯´ <code>Promise.all(..)</code> ï¼å¦æä¼ å¥çåæ°ä¸ºç©ºï¼åå®çç¶æä¼ç«å³åä¸º <strong>å·²è§£å³ï¼<code>fulfilled</code>ï¼</strong> å¦å¤ä¸¤ç§è¿åç¶æåä¸º <strong>å¼æ­¥åç°ï¼asynchronously fulfilledï¼</strong> å <strong>å¼æ­¥æç»ï¼asynchronously rejectedï¼</strong> ï¼è <code>Promise.any(..)</code> åæ¯ç¸åçï¼å¦æä¼ å¥çåæ°ä¸ºç©ºï¼åå®çç¶æä¼ç«å³åä¸º <strong>å·²æç»ï¼<code>rejected</code>ï¼</strong>ï¼å¶ä»æåµé½æ¯å¼æ­¥çã</p>
<p>å <code>Promise.race(..)</code> ä¼ å¥ä¸ä¸ªç©ºçå¯è¿­ä»£å¯¹è±¡ä¼å¯¼è´è¿åç <code>Promise</code> æ°¸è¿å¤äºæèµ·ç¶æï¼<code>pending</code>ï¼ï¼å ä¸ºæ²¡æä»»ä½ <code>Promise</code> å¯ä»¥åç°ææç»ã</p>
<pre><code class="language-JavaScript">const foreverPendingPromise = Promise.race([]);
console.log(foreverPendingPromise);
setTimeout(() =&gt; {
  console.log("å æ ç°å¨ä¸ºç©º");
  console.log(foreverPendingPromise);
});

// æé¡ºåºæå°ï¼
// Promise { &lt;state&gt;: "pending" }
// å æ ç°å¨ä¸ºç©º
// Promise { &lt;state&gt;: "pending" }
</code></pre>
<p><code>Promise.race(..)</code> çå¼æ­¥æ§æä»ä¹æä¹å¢ï¼åè®¾æä»¬æä¸ä¸ªç½ç»è¯·æ±æä½ï¼æä»¬å¸æå¨ä¸å®æ¶é´åè·å¾ååºï¼å¦åå°±æ¾å¼è¯·æ±ï¼è¿æ¶æä»¬å¯ä»¥ä½¿ç¨ <code>Promise.race(..)</code> æ¥å®ç°è¶æ¶æ§å¶ï¼</p>
<pre><code class="language-JavaScript">const data = Promise.race([
  fetch("/api"),
  new Promise((resolve, reject) =&gt; {
    // 5 ç§åæç»
    setTimeout(() =&gt; reject(new Error("è¯·æ±è¶æ¶")), 5000);
  }),
])
  .then((res) =&gt; res.json())
  .catch((err) =&gt; displayError(err));
</code></pre>
<ol start="3">
<li><code>Promise.try()</code></li>
</ol>
<blockquote>
<p><code>Promise.try()</code> éææ¹æ³æ¥åä¸ä¸ªä»»æç±»åçåè°å½æ°ï¼æ è®ºå¶æ¯åæ­¥æå¼æ­¥ï¼è¿åç»æææåºå¼å¸¸ï¼ï¼å¹¶å°å¶ç»æå°è£æä¸ä¸ª <code>Promise</code>ã</p>
</blockquote>
<p>è¿æ¯ä¸ä¸ªæªæ­¢å°ç®åï¼2026å¹´2æï¼ä»å¨ææ¡é¶æ®µç APIï¼å¨ä¸äºç°ä»£æµè§å¨å Node.js ææ°çæ¬ä¸­å·²ç»å¯ä»¥ä½¿ç¨ï¼ä½ç¨ç±»ä¼¼äº <code>async</code> å½æ°ï¼å¯ä»¥å°åæ­¥ä»£ç åå¼æ­¥ä»£ç ç»ä¸å¤çä¸º <code>Promise</code> å¯¹è±¡ï¼</p>
<pre><code class="language-JavaScript">Promise.try(() =&gt; {
  // è¿éå¯ä»¥æ¯åæ­¥ä»£ç 
  const result = synchronousFunction();
  return result;
})
  .then((value) =&gt; {
    console.log("åæ­¥ç»æ:", value);
  })
  .catch((error) =&gt; {
    console.error("éè¯¯:", error);
  });
// ä¹å¯ä»¥æ¯å¼æ­¥ä»£ç 
Promise.try(async () =&gt; {
  const result = await asynchronousFunction();
  return result;
})
  .then((value) =&gt; {
    console.log("å¼æ­¥ç»æ:", value);
  })
  .catch((error) =&gt; {
    console.error("éè¯¯:", error);
  });
</code></pre>
<ol start="4">
<li><code>Promise.withResolvers()</code></li>
</ol>
<blockquote>
<p><code>Promise.withResolvers()</code> éææ¹æ³è¿åä¸ä¸ªå¯¹è±¡ï¼å¶åå«ä¸ä¸ªæ°ç <code>Promise</code> å¯¹è±¡åä¸¤ä¸ªå½æ°ï¼ç¨äºè§£å³ææç»å®ï¼å¯¹åºäºä¼ å¥ç» <code>Promise()</code> æé å½æ°æ§è¡å¨çä¸¤ä¸ªåæ°ã</p>
</blockquote>
<p>å®å®å¨ç­ä»·äºä¸é¢çä»£ç ï¼</p>
<pre><code class="language-JavaScript">let resolve, reject;
const promise = new Promise((res, rej) =&gt; {
  resolve = res;
  reject = rej;
});
</code></pre>
<p>å®çä½ç¨æ¯ç®ååå»ºä¸ä¸ªå¯æ§ç <code>Promise</code> å¯¹è±¡ï¼æä»¬å¯ä»¥å¨å¤é¨è°ç¨ <code>resolve</code> å <code>reject</code> æ¥æ¹å <code>Promise</code> çç¶æï¼</p>
<pre><code class="language-JavaScript">const { promise, resolve, reject } = Promise.withResolvers();
// æ¨¡æå¼æ­¥æä½
setTimeout(() =&gt; {
  const success = true;
  if (success) {
    resolve("æä½æå");
  } else {
    reject("æä½å¤±è´¥");
  }
}, 1000);
promise
  .then((result) =&gt; console.log(result))
  .catch((error) =&gt; console.log(error))
  .finally(() =&gt; console.log("æä½å®æ"));
</code></pre>
<p>è¿ä¸ª API çä½¿ç¨åºæ¯æ¯è¾å°è§ï¼ç®åæè¿ä¸è½å®å¨çè§£å®çä½ç¨ï¼æå´è¶£å¯ä»¥å° MDN ä¸æ¥çã</p>
<h2 id="asyncawait-ä¸-promise">async/await ä¸ Promise</h2>
<p>æå¼å§å°±è¯´å° <code>async/await</code> äºï¼ææ¯åæ¥è§¦å° <code>async/await</code> è¿ç§åæ³çï¼ç¶åæäºè§£å°å®æ¯åºäº <code>Promise</code> çè¯­æ³ç³ï¼ä¸ªäººçè§£æ¥è¯´ï¼<code>async/await</code> è®©å¼æ­¥ä»£ç çèµ·æ¥æ´ååæ­¥ä»£ç ï¼ä¸»è¦æ¯æé«ä»£ç çå¯è¯»æ§åå¯ç»´æ¤æ§ï¼å°±å <code>Promise</code> ä¹äºåè°å½æ°ä¸æ ·ã</p>
<p>å¨ä½¿ç¨ä¸ï¼<code>async/await</code> çäºè®®éä¸­å¨æ¯å¦è¦ä½¿ç¨ <code>try/catch</code> æ¥å¤çéè¯¯ï¼æä¹åçå¤çæ¹å¼æ¯å¨è¯·æ±çå°è£éä½¿ç¨ <code>try/catch</code> æ¥æè·éè¯¯ï¼è°ç¨æ¶æ­£å¸¸ä½¿ç¨ <code>async/await</code> ï¼å¶ä»å°æ¹å¤çå¼æ­¥æä½è¿æ¯ç´æ¥ä½¿ç¨ <code>Promise</code>ãä»¥åå¶å®æ²¡æå¤ªæ·±å¥èèè¿åçæ§çé®é¢ï¼å¨æ°å¬å¸çä»£ç è§èæ¶åç°ä»ä»¬æéå¯¹è¿ä¸ªé®é¢è®¨è®ºè¿ï¼ææè¯å°è¿ä¸ªé®é¢çéè¦æ§ãå³äºè¿ä¸ªé®é¢äºè®®æ¯è¾å¤§ï¼èä¸å³äº <code>async/await</code> å®å¨å¯ä»¥åç¬åä¸ç¯ï¼è¿ç¯ä¸»è¦è¿æ¯éå¯¹ <code>Promise</code> çå­¦ä¹ è®°å½ï¼ååä¸å»ä¹æäºè¶ç¯å¹äºï¼ä¹åå­¦ä¹ æ¶åºè¯¥è¿ä¼åèå°ã</p>
<h2 id="ç¼ºé·">ç¼ºé·</h2>
<p>è¿ä¸ªé¨åå¯¹äºææ¥è¯´è¿æ¯æäºè¶çº²äºï¼ä½ä¹æåèèµæï¼åä¸ä¸ãä½ ä¸ç¥éçJavaScriptãä¸­å·æå°çå ä¸ªç¼ºé·ï¼ä¸è¿è¿äºçº¸è´¨ä¹¦æä¸å®çæ¶ä»£æ§ï¼åå®¹ä»ä¾åèï¼</p>
<ol>
<li><strong>é¡ºåºéè¯¯å¤ç</strong>ï¼ å¦ææå»ºäºä¸ä¸ªæ²¡æéè¯¯å¤çå½æ°çPromiseé¾ï¼é¾ä¸­åç»­ç <code>then</code> ä»ç¶ä¼è¢«æ§è¡ï¼å¯è½å¯¼è´éè¯¯è¢«å¿½ç¥æå¤çä¸å½ã</li>
<li><strong>åä¸å¼</strong>ï¼ <code>Promise</code> åªè½å¤çåä¸å¼çä¼ éï¼æ æ³ç´æ¥å¤çå¤ä¸ªå¼æå¤æçæ°æ®ç»æï¼å¯ä»¥ä¼ éå°è£çå¯¹è±¡ï¼ä½å¦æå¨é¾ä¸­çæ¯ä¸æ­¥é½è¿è¡å°è£åè§£å°ï¼å°±æäºç¬¨éäºï¼ã</li>
<li><strong>åå³è®®</strong>ï¼ <code>Promise</code> ä¸æ¦è¢«è§£å³ï¼<code>fulfilled</code>ï¼ææç»ï¼<code>rejected</code>ï¼ï¼å¶ç¶æå°±ä¸è½åæ¹åï¼æ æ³éæ°è§£å³ææç»ã</li>
<li><strong>æ¯æ§</strong>ï¼ æ¶ä»£æ§çä½ç°ï¼èèå½æ¶çç¯å¢ <code>Promise</code> è¿æªæ®åï¼ç°å¨åºè¯¥å¯ä»¥å¿½ç¥è¿ä¸ç¹äºã</li>
<li><strong>ä¸å¯åæ¶</strong>ï¼ ä¸æ¦åå»ºï¼<code>Promise</code> å°±ä¼ä¸ç´æ§è¡ï¼æ æ³åæ¶æ­£å¨è¿è¡çå¼æ­¥æä½ãè¿ä¸ªä¹æäºæ¶ä»£æ§äºï¼ç°å¨æ <code>AbortController</code> å¯ä»¥éå <code>fetch</code> æ¥å®ç°åæ¶è¯·æ±çåè½ã</li>
<li><strong>æ§è½</strong>ï¼ ç¸è¾äºåè°å½æ°ï¼<code>Promise</code> å¨åå»ºåç®¡çç¶ææ¹é¢æä¸å®çæ§è½å¼éï¼ä½ä¸ªäººè®¤ä¸ºè¿å¨éå¸¸çåºç¨åºæ¯ä¸­å½±åä¸å¤§ã</li>
</ol>
<h2 id="æ»ç»">æ»ç»</h2>
<p>è¯´å®è¯å¨ç¬ä¹åå°±æ¯è§å¾åºè¯¥åä¸ç¯å³äº <code>Promise</code> çï¼ä½å¼å§åä¹ååç°æ²¡ä»ä¹æ¹åï¼ç¸å³èµæä¹æ¯æµ©å¦çæµ·ï¼åè¿ç¯èè´¹äºéå¸¸å¤çæ¶é´ï¼å¼å§ä¸æ­å°æ·±æç»èåæè§ææ ç©·æ å°½çé®é¢ï¼å¥½å¨ç°å¨éè¿ AI è³å°å¯ä»¥æè¿äºé®é¢å¤§è´çæ¸æ¥ï¼"å¤§è´"çè§£è¯´æè¿æå¾å¤åå®¹æ²¡ææ¶åï¼ä¹åå¨é¡¹ç®ä¸­åºè¯¥ä¼æ´å æ³¨æ <code>Promise</code> çåºç¨ï¼ç¶åæãä½ ä¸ç¥éçJavaScriptãçç¸å³åå®¹çå®ç»åä¸ä¸åºè¯¥è¿å¯ä»¥åæ°´ä¸ç¯ã</p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-06 10:48">2026-02-06 10:47</span>&nbsp;
<a href="https://www.cnblogs.com/LFeather">å¤å°½ä¸¶</a>&nbsp;
éè¯»(<span id="post_view_count">143</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19583059);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19583059', targetLink: 'https://www.cnblogs.com/LFeather/p/19583059', title: 'ä»åè°å½æ°å°Promise' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ååï¼Claude Opus 4.6 å GPT-5.3-Codex åæ¶ç¸åºï¼AI ç¼ç¨è¦åå¤©äº ]]></title>
    <link>https://www.cnblogs.com/yupi/p/19583031</link>
    <guid>1d0c19c3e759a299218d828be00d085a</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/yupi/p/19583031" title="åå¸äº 2026-02-06 10:40">
    <span role="heading" aria-level="2">ååï¼Claude Opus 4.6 å GPT-5.3-Codex åæ¶ç¸åºï¼AI ç¼ç¨è¦åå¤©äº</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/2225420/202602/2225420-20260206102350805-967131892.png" alt="ååï¼Claude Opus 4.6 å GPT-5.3-Codex åæ¶ç¸åºï¼AI ç¼ç¨è¦åå¤©äº" class="desc_img">
        è¿æ¬¡ä¸¤å®¶å·¨å¤´åæ¶åå¸æ°æ¨¡åï¼äºç¸è´´è¸å¼å¤§ï¼å¯¹æä»¬ç¨æ·æ¥è¯´æ¯å¥½äºãå¯ä»¥çå°ï¼è¿ä¸¤ä¸ªæ¨¡åé½å¨å¾ å®ç¨æ¹å çå·ï¼æ¯ççæ³è®©ä½ æ¥å¸¸å·¥ä½ä¸­ç¨å¾ä¸ã
è¿ä¸¤ä¸ªå¤§æ¨¡åä½ ä¼å¦ä½éæ©å¢ï¼
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p class="md-end-block md-heading"><span class="md-plain">å¤§å®¶å¥½ï¼ææ¯ç¨åºåé±¼ç®ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ä»å¤©åæ¨ï¼AI ååååç¸äºãAnthropic å OpenAI å ä¹åæ¶åå¸äºèªå®¶çææ°å¤§æ¨¡å ââ Claude Opus 4.6 å GPT-5.3-Codexï¼ä¸­é¨å¯¹çï¼ç«è¯å³åè¶³ã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260206092008146.png"><img data-src="https://pic.yupi.icu/1/image-20260206092008146.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">è¿æ¬¡ä¸¤å®¶æ¯çå¾ç¼ç¨åå®éå·¥ä½è½åä¸å·äºï¼ä¸æ¯é£ç§ âè·ååäº 2 ä¸ªç¹â å°±åç¯åå®¢çæ·è¡æ´æ°ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">ä¸é¢æå¸¦å¤§å®¶å¿«éäºè§£ä¸ä¸ï¼è¿ä¸¤ä¸ªæ¨¡åå°åºæ´æ°äºä»ä¹ï¼å¯¹æä»¬ç¨åºåå AI ç©å®¶æ¥è¯´æä»ä¹ç¨ï¼</span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">Claude Opus 4.6ï¼æ´èªæãæ´è½å¹²ãæ´æä¹</span></h2>
<p class="md-end-block md-p"><span class="md-plain">åè¯´ Anthropic è¿è¾¹ãClaude Opus 4.6 æ¯ç®å Claude å®¶ææå¼ºçæ¨¡åï¼ä¹åç¨ Claude Opus 4.5 ç¼ç¨å°±å·²ç»è®©ææè§ âAI åä»£ç æ æä¸è½â äºï¼èè¿æ¬¡ç Opus 4.6 å¨å¤é¡¹è¯ä¼°ä¸­åå¤äºæåè¿æ°´å¹³ï¼åæ¬æºè½ç¼ç ãå¤å­¦ç§æ¨çãç¥è¯å·¥ä½åæºè½æç´¢ç­ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">åçè¿ä¸ªè·åæå°±è´¼æ¿å¨äºï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1770339059467-24cdc13f-957e-4ff8-bee2-7b8625d0c4a6.png"><img data-src="https://pic.yupi.icu/1/1770339059467-24cdc13f-957e-4ff8-bee2-7b8625d0c4a6.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">å®éä¸æåï¼ææç´è§çæåå°±æ¯ï¼<span class="md-pair-s "><strong>å¹²æ´»æ´é è°±äº</strong><span class="md-plain">ã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">å·ä½æ´æ°äºè¿äºï¼</span></p>
<p class="md-end-block md-p"><span class="md-plain">1ï¼ç¼ç¨è½åå¤§å¹æåï¼Opus 4.6 è½æ´å¥½å°å¨å¤§åä»£ç åºä¸­å·¥ä½ï¼è°è¯åä»£ç å®¡æ¥è½åå¢å¼ºï¼åå®ä»£ç è¿è½èªå·±æ£æ¥éè¯¯ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">æå®æµäºä¸æ³¢ï¼è®©ä¹åç Opus 4.5 åæ°åºç Opus 4.6 åæ¶å¼åä¸ä¸ªãèåæç´¢å¼æãé¡¹ç®ï¼</span></p>
<pre class="md-fences md-end-block ty-contain-cm modeLoaded"><span>è¯·ä½ å¸®æå¼åä¸ä¸ªèåæç´¢ç½ç«ï¼åå«å®æ´çåç«¯ååç«¯ï¼è½å¤åæ¶ä»å¤ä¸ªä¸åçæç´¢å¼ææç´¢åèåç»æã<br><span>åºè¯¥åå MVP æå°å¯è¡äº§åï¼æ´ä¸ªè¿ç¨ä¸éè¦åæç¡®è®¤ãä¸éè¦ææä¾ API Keyï¼ä½ å¿é¡»ç¡®ä¿åè½æ­£å¸¸å¯ç¨ã</span></span></pre>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260206095821042.png"><img data-src="https://pic.yupi.icu/1/image-20260206095821042.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">å åéåï¼äºèé½å®æäºä»»å¡ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260206100013366.png"><img data-src="https://pic.yupi.icu/1/image-20260206100013366.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">ä½æ¯å¯¹æ¯ä¸ä¸å®éæç´¢ææï¼Opus 4.5 å®è´¥ï¼çå°è¿æå°±æ¾å¿äºï¼ä»¥åæç¨ AI ç¼ç¨ä¼°è®¡ Bug æ´å°äº~</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260206100155670.png"><img data-src="https://pic.yupi.icu/1/image-20260206100155670.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">2ï¼100 ä¸ token ä¸ä¸æçªå£ãOpus ç³»åç¬¬ä¸æ¬¡æ¯æè¿ä¹é¿çä¸ä¸æï¼ç®åæ¥è¯´å°±æ¯ä½ å¯ä»¥ä¸æ¬¡æ§ç»å®ä¸¢ä¸å¤§å æä»¶åä»£ç ï¼å®é½è½è®°ä½å¹¶çè§£ï¼ä¸ä¼åä»¥åé£æ ·èçèçå°±å¤±å¿äºã</span></p>
<p class="md-end-block md-p"><span class="md-plain">è¿ä¹æ¯æææææå¾çç¹æ§ï¼å¤æçååç«¯é¡¹ç®ä¹å¯ä»¥å¨åä¸å¯¹è¯æ¡ä¸­ä¸ææ¢­äºï¼ä¸ç¨æ¥æ¥ååæ»ç»ä¸ä¸æåæ°å¼å¯¹è¯æ¡ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">èµ£ï¼åå¤ååç§ Tokens äºã</span></p>
<p class="md-end-block md-p"><span class="md-plain">3ï¼128k è¾åº tokenãè¾åºé¿åº¦ç¿»åï¼æå³ç Claude å¯ä»¥ä¸æ¬¡æ§çææ´é¿çä»£ç åææ¡£ï¼ä¸ç¨åææå¥½å æ¬¡è¯·æ±äºã</span></p>
<p class="md-end-block md-p"><span class="md-plain">4ï¼èªéåºæèãä»¥åå¼åèåªè½æéå¼å¯æå³é­æ·±åº¦æ¨çï¼ç°å¨ Claude ä¼èªå¨å¤æ­è¿ä¸ªé®é¢éä¸éè¦æ·±åº¦æèãç®åé®é¢ç§åï¼å¤æé®é¢æ¢æ¢æ³ï¼æºè½è°èï¼çæ¶çé±ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">5ï¼ä¸ä¸æåç¼©ãä»¥åè·é¿ä»»å¡çæ¶åï¼AI ç»å¸¸ä¼æå°ä¸ä¸æé¿åº¦çå¤©è±æ¿ãç°å¨ Claude è½èªå¨åç¼©åæ»ç»ä¹åçå¯¹è¯åå®¹ï¼è®©é¿æ¶é´è¿è¡çä»»å¡ä¸ä¼ä¸­éç¿»è½¦ãæ­é 100 ä¸ token ä¸ä¸æï¼ä¸æ¢æ³è±¡æå¤æä¹ï¼</span></p>
<p class="md-end-block md-p"><span class="md-plain">6ï¼Claude Code æ¯æå¤æºè½ä½åä½ãä½ å¯ä»¥åæ¶å¯å¨å¤ä¸ª AI Agent å¹¶è¡å·¥ä½ï¼æ¯å¦è®©å ä¸ª Agent åæ¶å®¡æ¥ä»£ç åºçä¸åé¨åï¼æçç´æ¥ç¿»åã</span></p>
<p class="md-end-block md-p"><span class="md-plain">7ï¼Claude in Excel å¤§åçº§ãç°å¨è½å¤çæ´å¤æçé¿æ¶é´ä»»å¡ï¼æ¯ææ°æ®éè§è¡¨ãå¾è¡¨ä¿®æ¹ãæ¡ä»¶æ ¼å¼ãæ°æ®éªè¯ç­ï¼è¿è½ä¸æ¬¡æ§å¤çå¤æ­¥éª¤æä½ã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/6984ae18765ce9ada0768cfc_ClaudeExcel-Blog-Hero-Desktop.png"><img data-src="https://pic.yupi.icu/1/6984ae18765ce9ada0768cfc_ClaudeExcel-Blog-Hero-Desktop.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">8ï¼Claude in PowerPoint ä¸çº¿ãè½è¯»åä½ å·²æçæ¨¡æ¿ãå­ä½åæ¯çï¼ä¿æåçé£æ ¼ä¸è´ï¼ç¶åç´æ¥å¸®ä½ çæå®æ´ç PPTã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1770339189972-c3c8b2e7-234b-4089-8b69-d172b523d5d4.png"><img data-src="https://pic.yupi.icu/1/1770339189972-c3c8b2e7-234b-4089-8b69-d172b523d5d4.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">å¤§å®¶å¯¹ Opus 4.6 ä¹æ¯ä¸è´å¥½è¯ï¼ä¸å°æ©ææµè¯çå¬å¸é½è¡¨ç¤º âç¨äºåä¸å»âï¼Cursor å®æ¹è¯´ Opus 4.6 æ¯ä»ä»¬åé¨é¿ä»»å¡æµè¯ä¸­çæå¼ºæ¨¡åï¼Replit è¯´å®çä»»å¡æè§£åå¹¶è¡è§åè½åæäºå·¨å¤§é£è·ã</span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">GPT-5.3-Codexï¼OpenAI çç¼ç¨ææé</span></h2>
<p class="md-end-block md-p"><span class="md-plain">åç OpenAI è¿è¾¹ãè¿æ¬¡åå¸ç GPT-5.3-Codexï¼åæ <span class="md-pair-s "><strong>æå¼ºç¼ç¨ Agent</strong><span class="md-plain">ï¼èä¸ä¸åªæ¯åä»£ç ï¼è¿è½åä½ çåäºä¸æ ·è¾¹å¹²æ´»è¾¹åä½ æ²éã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">ç¸æ¯ Claude å®æ¹è¿åå¥½å ä¸ªå¸å­ä»ç»èªå®¶æ°æ¨¡åï¼OpenAI å®æ¹è¿è¾¹åä½è°ä¸å°ãSam Altman äº²èªå¨ X ä¸åè¯ï¼</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/1770340355704-c9569d19-a5f5-4e46-98c4-b6b75dab01bc-20260206093449865.png"><img data-src="https://pic.yupi.icu/1/1770340355704-c9569d19-a5f5-4e46-98c4-b6b75dab01bc-20260206093449865.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">æ¥ççå·ä½æä»ä¹ï¼</span></p>
<p class="md-end-block md-p"><span class="md-plain">1ï¼ç¼ç¨è·åå¨é¢é¢åãSWE-Bench Pro 57% å TerminalBench 2.0 77%ï¼ç¼ç¨ç¸å³åºåé½åäºæ°é«ãå°¤å¶æ¯ OSWorldï¼æµè¯ AI å¨çå®æ¡é¢ç¯å¢ä¸­å®æä»»å¡çè½åï¼ç´æ¥ä»ä¸ä¸ä»£ç 38.2% é£å° 64.7%ï¼è¿ä¸ªæåå¹åº¦ç¸å½ç¸è£ã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260206094035858.png"><img data-src="https://pic.yupi.icu/1/image-20260206094035858.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">2ï¼éåº¦æ´å¿«ãæ´çé±ãå®æåæ ·çä»»å¡ï¼token æ¶èéä¸å°ä¸ä¸ä»£ï¼5.2-Codexï¼çä¸åï¼èä¸æ¯ä¸ª token å¤çéåº¦è¿å¿«äº 25%ãåå¿«åçï¼è¿ææ¯å®å®å¨å¨çä½éªæåã</span></p>
<p class="md-end-block md-p"><span class="md-plain">3ï¼è¾¹å¹²æ´»è¾¹æ±æ¥ãä»¥åä½ ä¸¢ä¸ä¸ªä»»å¡ç» AIï¼åªè½å¹²ç­ç»æãç°å¨ GPT-5.3-Codex ä¼å¨å·¥ä½è¿ç¨ä¸­å®æ¶åè¯ä½ å®å¨åä»ä¹ãåå°åªäºï¼ä½ éæ¶å¯ä»¥æå´è°æ´æ¹åï¼å°±åççå¨åä¸ä¸ªåäºåä½ä¸æ ·ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">4ï¼è¶å¼ºçåç«¯å¼åè½åãå®æ¹ç´æ¥å±ç¤ºäºè®©å®åèµè½¦æ¸¸æåæ½æ°´æ¸¸æçææï¼å®æ´åº¦é«å¾ç¦»è°±ï¼æå¤ä¸ªå°å¾ãéå·ç³»ç»åå®æ´çæ¸¸æé»è¾ã</span></p>
<p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="https://pic.yupi.icu/1/image-20260206094133069.png"><img data-src="https://pic.yupi.icu/1/image-20260206094133069.png" class="lazyload"></span></p>
<p class="md-end-block md-p"><span class="md-plain">çææ®éç½é¡µæ¶ AI ä¹æ´æä½ çæå¾äºï¼é»è®¤å°±è½ç»ä½ ååºåè½æ´ä¸°å¯ãè®¾è®¡æ´åççé¡µé¢ã</span></p>
<p class="md-end-block md-p"><span class="md-plain">5ï¼çµèæä½è½åå¢å¼ºãä¸åªæ¯åä»£ç ï¼å®è¿è½åäººä¸æ ·æä½çµèå®æåç§ä»»å¡ï¼æ¯å¦å PPTãåææ°æ®ãå¤çè¡¨æ ¼ï¼æç¼ç¨ Agent çè¾¹çæ©å±å°äºå¨è½æå·¥ Agentã</span></p>
<p class="md-end-block md-p"><span class="md-plain">6ï¼èªå·±è®­ç»èªå·±ãOpenAI å¢éè¯´ GPT-5.3-Codex æ¯ç¬¬ä¸ä¸ª <span class="md-pair-s "><strong>åä¸äºèªèº«åé </strong><span class="md-plain"> çæ¨¡åãå¢éç¨å®çæ©æçæ¬æ¥è°è¯è®­ç»è¿ç¨ãç®¡çé¨ç½²ãåææµè¯ç»æãä¹å°±æ¯è¯´ï¼AI å¨å é AI èªèº«çè¿åï¼ä»¥åçè¿åéåº¦è¯å®ä¼è¶æ¥è¶å¿«ã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">7ï¼ç½ç»å®å¨è½åå¤§å¹å¢å¼ºãè¿æ¯ç¬¬ä¸ä¸ªè¢« OpenAI å½ç±»ä¸ºé«è½åç½ç»å®å¨æ¨¡åççæ¬ï¼è½ä¸»å¨åç°ä»£ç æ¼æ´ãOpenAI åæ¶æ¿è¯ºæå¥ 1000 ä¸ç¾å API é¢åº¦æ¯æç½ç»é²å¾¡ç ç©¶ã</span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">æççæ³</span></h2>
<p class="md-end-block md-p"><span class="md-plain">è¿æ¬¡ä¸¤å®¶å·¨å¤´åæ¶åå¸æ°æ¨¡åï¼äºç¸è´´è¸å¼å¤§ï¼å¯¹æä»¬ç¨æ·æ¥è¯´æ¯å¥½äºãå¯ä»¥çå°ï¼è¿ä¸¤ä¸ªæ¨¡åé½å¨å¾ <span class="md-pair-s "><strong>å®ç¨æ¹å</strong><span class="md-plain"> çå·ï¼æ¯ççæ³è®©ä½ æ¥å¸¸å·¥ä½ä¸­ç¨å¾ä¸ã</span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">è¿ä¸¤ä¸ªå¤§æ¨¡ååºè¯¥å¦ä½éæ©å¢ï¼</span></p>
<p class="md-end-block md-p"><span class="md-plain">ç®åå¯¹æ¯ä¸ä¸ï¼</span></p>
<ul class="ul-list" data-mark="-">
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">Claude Opus 4.6 æ¯å­è¾¹å½¢æå£«ï¼ç¼ç¨ãåå¬ãç ç©¶æ ·æ ·è¡ï¼ç¹å«æ¯å¨ ExcelãPowerPoint è¿äºåå¬åºæ¯éåäºå¾æ·±çæ´åã</span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">GPT-5.3-Codex æç¼ç¨è½åææ»¡ï¼å¨ä»£ç çæãä»»å¡æ§è¡åäººæºåä½ä¸æåºäºå·®å¼åä¼å¿ã</span></p>
</li>
</ul>
<p class="md-end-block md-p"><span class="md-plain">ä¸è¿æä¼°è®¡ç½ç»åä»·æ ¼å°±å·²ç»åéä¸å¤§æ³¢å½åç¨æ·äºï¼å¦æä½ åªæ¯æ¥å¸¸å­¦ä¹ ãæèååå·¥å·ç±»å°é¡¹ç®ï¼ä¹ä¸å¿ç²ç®è¿½æ±å½å¤çå¤§æ¨¡åãå¾å¿« DeepSeek V4 ç­ä¸ç³»åå½äº§å¤§æ¨¡ååºè¯¥å°±è¦åºæ¥äºï¼æå¾ä¸æ³¢~</span></p>
<p class="md-end-block md-p">&nbsp;</p>
<h2 class="md-end-block md-heading"><span class="md-plain">æ´å¤ç¼ç¨å­¦ä¹ èµæº</span></h2>
<ul class="ul-list" data-mark="-">
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/course" rel="noopener nofollow"><span class="md-plain">Javaåç«¯ç¨åºåå¿åé¡¹ç®å®ææç¨+æ¯è®¾ç½ç«</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/" rel="noopener nofollow"><span class="md-plain">ç¨åºååè´¹ç¼ç¨å­¦ä¹ äº¤æµç¤¾åºï¼èªå­¦å¿å¤ï¼</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/course/cv" rel="noopener nofollow"><span class="md-plain">ç¨åºåä¿å§çº§æ±èåç®åæåï¼æ¾å·¥ä½å¿å¤ï¼</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.mianshiya.com/" rel="noopener nofollow"><span class="md-plain">ç¨åºååè´¹é¢è¯å·é¢ç½ç«å·¥å·ï¼æ¾å·¥ä½å¿å¤ï¼</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640584449888772098" rel="noopener nofollow"><span class="md-plain">ææ°Javaé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + Javaæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640586673306091521" rel="noopener nofollow"><span class="md-plain">ææ°Pythoné¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + Pythonæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640586014108303362" rel="noopener nofollow"><span class="md-plain">ææ°åç«¯é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + åç«¯æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640586867363954689" rel="noopener nofollow"><span class="md-plain">ææ°æ°æ®ç»æåç®æ³é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + ç®æ³æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1644279832026075138" rel="noopener nofollow"><span class="md-plain">ææ°C++é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ãC++æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1641797333479903234" rel="noopener nofollow"><span class="md-plain">ææ°æ°æ®åºé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + æ°æ®åºæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640589994284695553" rel="noopener nofollow"><span class="md-plain">ææ°Redisé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + Redisæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1641035880439271426" rel="noopener nofollow"><span class="md-plain">ææ°è®¡ç®æºåºç¡å¥é¨å­¦ä¹ è·¯çº¿ + è®¡ç®æºåºç¡æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1641366118197153793" rel="noopener nofollow"><span class="md-plain">ææ°å°ç¨åºå¥é¨å­¦ä¹ è·¯çº¿ + å°ç¨åºå¼åæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="http://sqlmother.yupi.icu/" rel="noopener nofollow"><span class="md-plain">ææ°SQLé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + SQLæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640586295529324545" rel="noopener nofollow"><span class="md-plain">ææ°Linuxé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + Linuxæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640588753362108417" rel="noopener nofollow"><span class="md-plain">ææ°Git/GitHubé¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + Gitæç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640587909942099969" rel="noopener nofollow"><span class="md-plain">ææ°æä½ç³»ç»é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + æä½ç³»ç»æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640588119619551233" rel="noopener nofollow"><span class="md-plain">ææ°è®¡ç®æºç½ç»é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + è®¡ç®æºç½ç»æç¨</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-meta-i-c  md-link"><a href="https://www.code-nav.cn/post/1640588392073150465" rel="noopener nofollow"><span class="md-plain">ææ°è®¾è®¡æ¨¡å¼é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + è®¾è®¡æ¨¡å¼æç¨</span></a></span></p>
</li>
<li class="md-list-item md-focus-container">
<p class="md-end-block md-p md-focus"><span class="md-meta-i-c md-link md-expand"><a href="https://www.code-nav.cn/post/1640648711119892481" rel="noopener nofollow"><span class="md-plain">ææ°è½¯ä»¶å·¥ç¨é¶åºç¡å¥é¨å­¦ä¹ è·¯çº¿ + è½¯ä»¶å·¥ç¨æç¨</span></a></span></p>
</li>
</ul>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-06 10:40">2026-02-06 10:40</span>&nbsp;
<a href="https://www.cnblogs.com/yupi">ç¨åºåé±¼ç®</a>&nbsp;
éè¯»(<span id="post_view_count">371</span>)&nbsp;
è¯è®º(<span id="post_comment_count">1</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19583031);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19583031', targetLink: 'https://www.cnblogs.com/yupi/p/19583031', title: 'ååï¼Claude Opus 4.6 å GPT-5.3-Codex åæ¶ç¸åºï¼AI ç¼ç¨è¦åå¤©äº' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Linuxåæ ¸ä¸­æ¨¡åå®ä¹å®æºå¶è§£æ ]]></title>
    <link>https://www.cnblogs.com/ttkwzyttk/p/19582878</link>
    <guid>91875c46b4824a2be53e458e7c86515b</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ttkwzyttk/p/19582878" title="åå¸äº 2026-02-06 10:10">
    <span role="heading" aria-level="2">Linuxåæ ¸ä¸­æ¨¡åå®ä¹å®æºå¶è§£æ</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        æ¬æè§£æäº Linux åæ ¸ä¸­ç module driver helper macroï¼è®²è§£äº module_platform_driver çå®ç°åçä¸è®¾è®¡ææ³ï¼å±ç¤ºäºå®å¦ä½éè¿ å®æ¼æ¥ãå¯ååæ°ã__init/__exit å module_init/module_exit èªå¨çæé©±å¨æ³¨åä¸æ³¨éæ¨¡æ¿ï¼æ¯åæ ¸é©±å¨å¼åèææ¡æ ååæ³çå®ç¨æåã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>å¨ç¼å Linux è®¾å¤é©±å¨æ¶ï¼å°¤å¶æ¯ platformãI2CãSPI ç­æ»çº¿é©±å¨ï¼æä»¬ç»å¸¸ä¼çå°ç±»ä¼¼ä¸é¢çåæ³ï¼</p>
<pre><code class="language-c">module_platform_driver(my_driver);
</code></pre>
<p>è¿ç±»å®çèµ·æ¥å¾âé­æ³âï¼ä½å®éä¸å®ä»¬åªæ¯ Linux åæ ¸ä¸ºäºåå°æ ·æ¿ä»£ç èæä¾çä¸ç§ <strong>driver helper macro</strong>ï¼æ¬æä¸»è¦è®²è§£è¿ç±»å®çç¨æ³ä¸æºå¶</p>
<h1 id="ä¸ä¼ ç»æ¨¡ååå§åæ¹å¼">ä¸ãä¼ ç»æ¨¡ååå§åæ¹å¼</h1>
<p>è¿éä»¥platformé©±å¨ä¸ºä¾ï¼ä¼ ç»çé©±å¨åæ³éå¸¸æ¯è¿æ ·çï¼</p>
<pre><code class="language-c">static struct platform_driver my_platform_driver = {
    .probe  = my_probe,
    .remove = my_remove,
    .driver = {
        .name = "my_driver",
    },
};

static int __init my_init(void)
{
    return platform_driver_register(&amp;my_platform_driver);
}

static void __exit my_exit(void)
{
    platform_driver_unregister(&amp;my_platform_driver);
}

module_init(my_init);
module_exit(my_exit);
MODULE_LICENSE("GPL");
</code></pre>
<p>è¿æ¯ä¸ä¸ªæ åçé©±å¨æ¨¡æ¿ï¼æé©±å¨çå¥å£initå½æ°ä¸åºå£exitå½æ°ï¼å¹¶éè¿<code>module_init</code>å<code>module_exit</code>æ¥å£å½æ°è¿è¡æ³¨åï¼è¿ç§åæ³çæ ·æ¿ä»£ç é«åº¦éå¤ï¼å ä¹æ¯ä¸ä¸ªplatformé©±å¨é½æ¯ä¸æ¨¡ä¸æ ·çï¼åæ ¸ä¸­å­å¨å¤§éè¿ç§åºå®æ¨¡å¼çä»£ç ï¼éå¸¸éåä½¿ç¨å®æ¥ç®å</p>
<h1 id="äºæ¨¡åå®ä¹å®çå¼å¥">äºãæ¨¡åå®ä¹å®çå¼å¥</h1>
<p>ä¸ºäºè§£å³ä¸è¿°é®é¢ï¼Linux åæ ¸å¼å¥äºä¸ç» <strong>module driver helper macro</strong>ï¼ç¨äºç®åé©±å¨çæ³¨åä¸æ³¨éè¿ç¨ã</p>
<p>ä»¥platformé©±å¨ä¸ºä¾ï¼åæ ¸æä¾äº</p>
<pre><code class="language-c">module_platform_driver(...)
</code></pre>
<p>è½ç¶æ¥å£ççåæ¯å½æ°ï¼ä½æ¯ä»æ¯ç±å®æ¥å®ç°çï¼ä½¿ç¨è¯¥å®ä¹åï¼ä¸é¢çä»£ç å°±å¯ä»¥ç®åä¸ºï¼</p>
<pre><code class="language-c">static struct platform_driver my_platform_driver = {
    .probe  = my_probe,
    .remove = my_remove,
    .driver = {
        .name = "my_driver",
    },
};

module_platform_driver(my_platform_driver);
MODULE_LICENSE("GPL");
</code></pre>
<p>å¯ä»¥çè§ï¼ä½¿ç¨è¯¥å®ä¹åï¼å°±ä¸éè¦åæå<code>__init</code>å<code>__exit</code>æ³¨åä¸æ³¨éæ¥å£å½æ°äºï¼ä¹ä¸éè¦åæ¾å¼è°ç¨<code>platform_driver_register</code>å<code>platform_driver_unregister</code>æ¥å£å½æ°äºï¼ä¸ä¼ ç»åæ³å®å¨ç¸å</p>
<p>å½ç¶è¿ç§åæ³ä¸ä»ä»åªæplatformé©±å¨æï¼åæ ¸ä¸ºä¸åçæ»çº¿é½æä¾äºå¯¹åºçå®å®ä¹</p>
<pre><code class="language-c">module_i2c_driver(my_i2c_driver);
module_spi_driver(my_spi_driver);
module_usb_driver(my_usb_driver);
module_pci_driver(my_pci_driver);
.......
</code></pre>
<p>ä»ä»¬éµå¾ªå®å¨ç¸åçè®¾è®¡ææ³ï¼ä¸ä¸ªæ¨¡åï¼åªæ³¨åä¸ä¸ªé©±å¨ï¼ç¨ä¸è¡å®æå®</p>
<h1 id="ä¸æ¬è´¨è§£æ">ä¸ãæ¬è´¨è§£æ</h1>
<p>è¿éè¿æ¯ä»¥platformé©±å¨ä¸ºä¾ï¼<code>module_platform_driver</code> æ¯ä¸ä¸ªå®å°è£ãæä»¬å¯ä»¥æå¼åæ ¸æºç <code>kernel/include/linux/platform_device.h</code>æ¾å°å¯¹åºçå®ï¼å¦æä¸ºå¶ä»æ»çº¿é©±å¨ï¼éè¦å°å¯¹åºçå¤´æä»¶ä¸­æ¥æ¾ï¼å¦ä¸æç¤º</p>
<pre><code class="language-c">/* module_platform_driver() - Helper macro for drivers that don't do
* anything special in module init/exit. This eliminates a lot of
* boilerplate. Each module may only use this macro once, and
* calling it replaces module_init() and module_exit()
*/

#define module_platform_driver(__platform_driver) \
module_driver(__platform_driver, platform_driver_register, \
platform_driver_unregister)
</code></pre>
<p>å¯ä»¥çè§<code>module_platform_driver</code>å®ä¸­åä½¿ç¨äº<code>module_driver</code>è¿ä¸ªå®å®ä¹ï¼è¿ä¸ªå®å®å¨<code>kernel/include/linux/device/driver.h</code>å¤´æä»¶ä¸­ï¼å®ä¹ä»£ç å¦ä¸</p>
<pre><code class="language-c">/**

* module_driver() - Helper macro for drivers that don't do anything
* special in module init/exit. This eliminates a lot of boilerplate.
* Each module may only use this macro once, and calling it replaces
* module_init() and module_exit().
*
* @__driver: driver name
* @__register: register function for this driver type
* @__unregister: unregister function for this driver type
* @...: Additional arguments to be passed to __register and __unregister.
*
* Use this macro to construct bus specific macros for registering
* drivers, and do not use it on its own.
*/
#define module_driver(__driver, __register, __unregister, ...) \
static int __init __driver##_init(void) \
{ \
return __register(&amp;(__driver) , ##__VA_ARGS__); \
} \
module_init(__driver##_init); \
static void __exit __driver##_exit(void) \
{ \
__unregister(&amp;(__driver) , ##__VA_ARGS__); \
} \

module_exit(__driver##_exit);
</code></pre>
<p>å¨<code>module_driver</code>å®ä¸­å°±å¯ä»¥çè§å¯¹åºçé©±å¨æ³¨åä¸æ³¨éçæ¨¡æ¿äºï¼è¿éä¸»è¦å°±æ¯éè¿å®æ¼æ¥ä»¥åå¯ååæ°å®æ¥å®ç°ï¼è¯»èå¯ä»¥èªè¡å®å±å¼è¿è¡åæï¼ææçæ¨¡åå®<code>platform</code>é©±å¨ã<code>pci</code>é©±å¨ã<code>usb</code>é©±å¨ç­ç­ï¼åºå±é½æ¯è°ç¨äº<code>module_driver</code>è¿è¡å®æ¿æ¢ä¸æ¼æ¥ç»ææåçæ¨¡åæ³¨åæ¨¡æ¿ï¼è¿éå°±ä¸åèµè¿°äº</p>
<h1 id="åä½¿ç¨åºæ¯">åãä½¿ç¨åºæ¯</h1>
<p>å¨ä¸»çº¿åæ ¸ä¸­ï¼è¿ç§åæ³å·²ç»æä¸º<strong>äºå®æ å</strong>ï¼åå ä¸»è¦æï¼</p>
<ul>
<li>*<strong>åå°æ ·æ¿ä»£ç </strong></li>
<li><strong>ç»ä¸é©±å¨é£æ ¼</strong></li>
<li><strong>éä½åºéæ¦ç</strong></li>
<li><strong>ä»£ç å®¡æ¥æ´åå¥½</strong></li>
</ul>
<p>å¯¹äºç»´æ¤èæ¥è¯´ï¼ä¸ç¼çå°<code>module_platform_driver(xxx_driver);</code> å°±è½ç«å»ç¥éè¿æ¯ä¸ä¸ªâæ åç platform æ¨¡åé©±å¨ã</p>
<p>è½ç¶ helper macro å¾æ¹ä¾¿ï¼ä½å¹¶éææåºæ¯é½éåãä¸å»ºè®®ä½¿ç¨çæåµåæ¬ï¼</p>
<ul>
<li>ä¸ä¸ªæ¨¡åä¸­æ³¨å <strong>å¤ä¸ª driver</strong></li>
<li>æ¨¡å init é¶æ®µè¿éè¦åé¢å¤åå§åå·¥ä½ï¼ä½¿ç¨æ¨¡åå®çè¯ï¼å®çåºå±åªè½è°ç¨å¯¹åºç<code>register</code>å<code>unregister</code>å½æ°æ æ³åå¶ä»æä½</li>
<li>å¯¹åå§å/éåºé¡ºåºæç²¾ç»æ§å¶éæ±</li>
</ul>
<p>å¨è¿äºåºæ¯ä¸ï¼æå <code>module_init</code> / <code>module_exit</code> åèæ´æ¸æ°ãæä»¥éè¦å·ä½æåµå·ä½åæ</p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-06 10:11">2026-02-06 10:10</span>&nbsp;
<a href="https://www.cnblogs.com/ttkwzyttk">ttkwzyttk</a>&nbsp;
éè¯»(<span id="post_view_count">6</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19582878);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19582878', targetLink: 'https://www.cnblogs.com/ttkwzyttk/p/19582878', title: 'Linuxåæ ¸ä¸­æ¨¡åå®ä¹å®æºå¶è§£æ' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ClawdBot åºåè®°ï¼AI Agent æ­£å¨èµ°åå¤§ä¼ ]]></title>
    <link>https://www.cnblogs.com/bugshare/p/19582865</link>
    <guid>3fdb9776f8cf8dc99a11be50479b561f</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/bugshare/p/19582865" title="åå¸äº 2026-02-06 10:08">
    <span role="heading" aria-level="2">ClawdBot åºåè®°ï¼AI Agent æ­£å¨èµ°åå¤§ä¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>å½åå¤çç¤¾äº¤å¹³å°ä¸ï¼æ è®ºä½ æ¯å¦å³æ³¨ AIï¼æè¿å¤§æ¦çé½å·å°è¿ <strong>ClawdBot / OpenClaw</strong>ãç­ç­å å¤©æ¶é´ï¼è¿ä¸ªé¡¹ç®å¨ GitHub ä¸å·²ç»æ©è·äº <strong>13 ä¸+ Star</strong>ï¼å ªç§°ç°è±¡çº§å¼æºé¡¹ç®ã</p>
<p>å®ä¸ä»åæ¬¡ç¹çäºå¤§ä¼å¯¹ <strong>AI Agent</strong> çç­æï¼ä¹è®©ãè®© AI çæ­£å¸®ä½ å¹²æ´»ãè¿ä»¶äºï¼ä»æå®¢ç©å·éæ­¥èµ°åæ®éç¨æ·ã</p>
<hr>
<h1 id="ç®ä»">ç®ä»</h1>
<h2 id="åå§äºº">åå§äºº</h2>
<p>åæ¥çç ClawdBotï¼ç°å <strong>OpenClaw</strong>ï¼çåå§äºº <strong>Peter Steinberger</strong>ã</p>
<p>ä»æ¯å¥¥å°å©äººï¼æ¯ä¸äº <strong>ç»´ä¹çº³ç§æå¤§å­¦</strong>ï¼æ¯ä¸ä½å¸åçææ¯å¤©æã</p>
<p>å¨å ä¸º OpenClaw è¢«æ´å¤äººçç¥ä¹åï¼Peter å°±å·²ç»æ¯é ä»£ç æååä¸ãå®ç° <strong>èº«å®¶ä¸äº¿æ¬§å</strong>ãæåéä¼çç¨åºåäºãè¿æ¬¡åºå±±ï¼æ´åæ¯ä¸æ¬¡ãææ¯çæ³ä¸»ä¹èãçåå½ã</p>
<p><img alt="steipete.png" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3715916/202602/3715916-20260206095520349-987995217.png" class="lazyload"></p>
<hr>
<h2 id="å½åä¹æä¸åªé¾è¾çèåå²">å½åä¹æï¼ä¸åªé¾è¾çèåå²</h2>
<p>OpenClaw çåå­ï¼å¹¶ä¸æ¯ä¸å¼å§å°±ç¡®å®çï¼åèç»åäºä¸æ®µé¢ææå§æ§çæ¼åè¿ç¨ã</p>
<h3 id="clawd">Clawd</h3>
<p><strong>Clawd</strong> è¯çäº <strong>2025 å¹´ 11 æ</strong>ãä¸åçä¼¼é½å¾å®ç¾ï¼ç´å° <strong>Anthropic çæ³å¡å¢é</strong> éå¸¸ç¤¼è²å°èç³»äºä½èï¼è¯·ä»ãéæ°èèä¸ä¸è¿ä¸ªåå­ãã</p>
<p>åå åï¼å¤§å®¶æç ð</p>
<h3 id="moltbot">Moltbot</h3>
<p>æ¥ä¸æ¥è¯ççæ¯ <strong>Moltbot</strong>ã</p>
<p>è¿ä¸ªåå­æ¯å¨ <strong>åæ¨ 5 ç¹</strong>ï¼ä½èåç¤¾åºæåå¨ Discord ä¸è¿è¡äºä¸åºç¥æ¾æ··ä¹±çå¤´èé£æ´åæ²å®çã</p>
<p>âMoltï¼èç®ï¼âè±¡å¾çæé¿ââå°±åé¾è¾ä¸æ­è±å£³ï¼æç»åææ´å¼ºå¤§çä¸ªä½ãå¯æéå¸¸ç¾å¥½ï¼ä½é®é¢ä¹å¾ææ¾ï¼</p>
<blockquote>
<p>å¬èµ·æ¥æç¹æå£ï¼ä¸å¤ªå¥½å¿µã</p>
</blockquote>
<h3 id="openclawæç»å½¢æ">OpenClawï¼æç»å½¢æï¼</h3>
<p>æç»ï¼é¡¹ç®æ­£å¼æ´åä¸º <strong>OpenClaw</strong>ã</p>
<ul>
<li>åæ æ£ç´¢ç»æï¼â å®å¨</li>
<li>ååï¼â å·²è´­ä¹°</li>
<li>ä»£ç è¿ç§»ï¼â å·²å®æ</li>
</ul>
<p>è¿ä¸ªåå­ä¹æ°å¦å¶åå°æ¦æ¬äºé¡¹ç®çç°ç¶ï¼</p>
<ul>
<li><strong>Open</strong>ï¼å®å¨å¼æºï¼å¯¹ææäººå¼æ¾ï¼ç¤¾åºé©±å¨</li>
<li><strong>Claw</strong>ï¼é¾è¾ä¹çªï¼ä¼ æ¿æåçç²¾ç¥è±¡å¾</li>
</ul>
<hr>
<h2 id="ä»ä¹æ¯-openclaw">ä»ä¹æ¯ OpenClawï¼</h2>
<p>ä¸å¥è¯æ¦æ¬ï¼</p>
<blockquote>
<p><strong>OpenClaw æ¯ä¸ä¸ªè¿è¡å¨ä½ èªå·±çµèä¸çå¼æº AI Agent å¹³å°ã</strong></p>
</blockquote>
<p>å®å¯ä»¥ä¸ä½ æ¥å¸¸ä½¿ç¨çåç§èå¤©å·¥å·æ ç¼éæï¼</p>
<ul>
<li>WhatsApp</li>
<li>Telegram</li>
<li>Discord</li>
<li>Slack</li>
<li>Microsoft Teams</li>
</ul>
<p>æ è®ºä½ èº«å¨ä½å¤ï¼åªè¦è½åæ¶æ¯ï¼å°±è½éæ¶ææ¥ä½ ç AI å©æã</p>
<p>å®ç½ï¼</p>
<p>ð <a href="https://openclaw.ai/" target="_blank" rel="noopener nofollow">https://openclaw.ai/</a></p>
<hr>
<h1 id="å®è£quickstart">å®è£ï¼QuickStartï¼</h1>
<p>ä¸é¢æ¯å®æ¹æä¾çå¿«éä¸ææµç¨ï¼åºæ¬ä¸è·¯åè½¦ + éæ©å³å¯å®æã</p>
<ol>
<li>å¿«éå®è£ <code>curl -fsSL https://openclaw.ai/install.sh | bash</code></li>
<li>æç¤º <em>I understand this is powerful and inherently risky</em> â éæ© <strong>Yes</strong></li>
<li>Onboarding mode â <strong>QuickStart</strong></li>
<li>Model / auth provider â <strong>Z.AI (GLM 4.7)</strong></li>
<li>è¾å¥ <strong>Z.AI API Key</strong></li>
<li>Default model â é»è®¤</li>
<li>Select channel â <strong>WhatsApp (QR link)</strong></li>
<li>WhatsApp phone setup â <strong>This is my personal phone number</strong></li>
<li>è¾å¥ä½ ç <strong>WhatsApp æ³¨åææºå·</strong></li>
<li>Configure skills now? â <strong>Yes</strong></li>
<li>Node manager â <strong>npm</strong></li>
<li>Install missing skill dependencies â <strong>Skip for now</strong></li>
<li>GOOGLE_PLACES_API_KEY â <strong>No</strong></li>
<li>Enable hooks â <strong>Skip for now</strong></li>
<li>Hatch your bot â <strong>Hatch in TUI (recommended)</strong></li>
</ol>
<p><img alt="PixPin_2026-02-01_22-35-27.png" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3715916/202602/3715916-20260206095520117-748411763.png" class="lazyload"></p>
<hr>
<h1 id="openclaw-è½åä»ä¹">OpenClaw è½åä»ä¹ï¼</h1>
<p>ä½ å¯ä»¥æ OpenClaw çè§£ä¸ºï¼</p>
<blockquote>
<p><strong>ä¸ä¸ª 24 å°æ¶å¨çº¿ãå¯é¿æè¿è¡ãè½è®°ä½ä½ ä¹ æ¯çãæ°å­åå·¥ãã</strong></p>
</blockquote>
<p>å®ä¸ä»è½ä¸æ¬¡æ§å®æä»»å¡ï¼è¿å¯ä»¥ï¼</p>
<ul>
<li>æç»­æ§è¡</li>
<li>å®æ¶è§¦å</li>
<li>è®°ä½ä½ çåå¥½</li>
<li>éè¿ææºèå¤©è¿ç¨ææ§ä½ ççµè</li>
</ul>
<h3 id="ä¸äºçå®ä½¿ç¨åºæ¯">ä¸äºçå®ä½¿ç¨åºæ¯</h3>
<ol>
<li>
<p><strong>ä¿¡æ¯æ¶éä¸ç®æ¥</strong></p>
<blockquote>
<p>âæ¥ä¸ä¸ GitHub ä»æ¥ç­æ¦ï¼æ´çæç®æ¥ï¼æ¯å¤©æ©ä¸ 8 ç¹åç»æãâ</p>
</blockquote>
</li>
<li>
<p><strong>èªå¨åä¸è½½</strong></p>
<blockquote>
<p>âå»æå­¦ä¹ ç½ç«ï¼å¸®æä¸è½½ä¸å¥ Python æå­¦è§é¢ãâ</p>
</blockquote>
</li>
<li>
<p><strong>æ¢ç¥¨ / æ¢èµæº</strong><br>
æç½ååäº«ï¼éè¿ OpenClaw æåæ¢å°äºé«éç¥¨ï¼æ¯å¦æååå³äºè¿æ° + ç½ç»ç¯å¢ï¼ã</p>
</li>
<li>
<p><strong>æµè§å¨ä¸ç³»ç»æä½</strong><br>
èªå¨æä½ç½é¡µãè¡¨åå¡«åãæ°æ®æ´çï¼çæ­£åå°ãæ¿ä½ ç¹é¼ æ ãã</p>
</li>
</ol>
<p><img alt="PixPin_2026-02-01_22-50-44.png" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3715916/202602/3715916-20260206095520420-580560453.png" class="lazyload"></p>
<hr>
<h1 id="ä¸å¯å¿½è§çå¼ç«¯">ä¸å¯å¿½è§çå¼ç«¯</h1>
<p>å¨æè³ä¹å¤ï¼OpenClaw ä¹å¹¶éæ²¡æææ¬ã</p>
<ol>
<li>
<p><strong>Token æ¶èæå¤§</strong><br>
å¦æä½ ç¨çæ¯æéä»è´¹æ¨¡åï¼ççä¼âç§é±âï¼å»ºè®®åå°è§æ¨¡å°è¯ã</p>
</li>
<li>
<p><strong>æéè¦æ±éå¸¸é«</strong><br>
å®å ä¹ç­åäºâæçµèäº¤ç» AIâï¼</p>
<blockquote>
<p>çè®ºä¸ï¼å®<strong>ç¡®å®æè½åæ¸ç©ºä½ çæä»¶</strong>ã</p>
</blockquote>
<p>æä»¥ï¼</p>
<ul>
<li>ä¸è¦å¨ä¸»åçäº§ç¯å¢ç´æ¥ä½¿ç¨</li>
<li>ä¸è¦æäºä¸å¿è¦çæé</li>
</ul>
</li>
<li>
<p><strong>å½åç½ç»ç¯å¢æé¨æ§</strong><br>
éè¦ä½ å·å¤ä¸å®çãKeXueä¸ç½ãè½åï¼å¦åä½éªä¼å¤§æææ£ã</p>
</li>
</ol>
<hr>
<h1 id="å¦ä½å¸è½½-openclaw">å¦ä½å¸è½½ OpenClaw</h1>
<p>å¦æä½ åªæ¯å°é²ï¼æèä¸æç®ç»§ç»­ä½¿ç¨ï¼å¯ä»¥æä¸é¢æ­¥éª¤å®æ´å¸è½½ã</p>
<pre><code class="language-bash">openclaw uninstall
# ç©ºæ ¼+ç®­å¤´éæ©å¨é¨
</code></pre>
<p><img alt="PixPin_2026-02-02_09-23-18.png" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3715916/202602/3715916-20260206095520272-104191998.png" class="lazyload"></p>
<pre><code class="language-bash"># å®ä½å®è£è·¯å¾
which openclaw

# å¨å±å¸è½½
npm uninstall -g openclaw
# æ
pnpm remove -g openclaw

# æ¸çéç½®åç¼å­
rm -rf ~/.openclaw
rm -rf ~/.config/openclaw
rm -rf ~/.cache/openclaw

# /Users/ç¨æ·å/.zshrc éçopenclawå é¤ä¸
</code></pre>
<hr>
<h2 id="åå¨æå">åå¨æå</h2>
<p>OpenClaw ççç«ï¼å¹¶ä¸åªæ¯åä¸ä¸ªâå¥½ç©ç AI é¡¹ç®âï¼èæ¯ä¸ä¸ªéå¸¸æ¸æ°çä¿¡å·ï¼</p>
<blockquote>
<p><strong>AI Agent æ­£å¨ä»å®éªå®¤ï¼èµ°åæ®éäººççå®çæ´»ã</strong></p>
</blockquote>
<p>å®æè®¸è¿ä¸å®ç¾ï¼çè³æç¹å±é©ï¼ä½æ¯«æ çé®ââ</p>
<p><strong>æªæ¥ï¼è¶æ¥è¶å¤çå·¥ä½ï¼ççä¼äº¤ç» AI æ¥å®æã</strong></p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-06 10:09">2026-02-06 10:08</span>&nbsp;
<a href="https://www.cnblogs.com/bugshare">BugShare</a>&nbsp;
éè¯»(<span id="post_view_count">71</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19582865);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19582865', targetLink: 'https://www.cnblogs.com/bugshare/p/19582865', title: 'ClawdBot åºåè®°ï¼AI Agent æ­£å¨èµ°åå¤§ä¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Seataå®ç°åå¸å¼äºå¡ï¼å¤§ç½è¯å¨åæï¼æ ¸å¿è®²éATæ¨¡å¼ï¼ ]]></title>
    <link>https://www.cnblogs.com/sun-10387834/p/19584278</link>
    <guid>2f66bab690956ae35aab7157146ba90c</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/sun-10387834/p/19584278" title="åå¸äº 2026-02-06 14:16">
    <span role="heading" aria-level="2">Seataå®ç°åå¸å¼äºå¡ï¼å¤§ç½è¯å¨åæï¼æ ¸å¿è®²éATæ¨¡å¼ï¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>Seata æ¬è´¨æ¯<strong>æåå¸å¼äºå¡çåç§ç»å¸æ¹æ¡ï¼2PCãTCCãSagaãXAï¼åäºæè´å°è£åä¼å</strong>çæ¡æ¶ï¼ä¸ç¨ä½ ä»é¶ååºå±é»è¾ï¼åªéè¦ç®åéç½®åå°éæ³¨è§£ï¼å°±è½è½å°åå¸å¼äºå¡ã</p>
<p>å®çæ ¸å¿è®¾è®¡æ¯<strong>æåå¨å±äºå¡ä¸ºå¤ä¸ªæ¬å°äºå¡</strong>ï¼ç±Seataç»ä¸åè°ç®¡çï¼ä¿è¯è¿äºæ¬å°äºå¡è¦ä¹å¨æäº¤ãè¦ä¹å¨åæ»ï¼èä¸Seataå¯¹Javaå¾®æå¡ï¼Spring Cloud/Dubboï¼çä¾µå¥æ§æä½ï¼è¿ä¹æ¯å®æä¸ºä¸­å°ä¼ä¸é¦éçå³é®ã</p>
<p>åè®²Seataç<strong>3ä¸ªæ ¸å¿è§è²</strong>ï¼å¤§ç½è¯æ¯å»ï¼çè§£äºè§è²æè½ææµç¨ï¼ï¼è¿æ¯æææ¨¡å¼çåºç¡ï¼è®°ç¢è¿3ä¸ªï¼åé¢çé»è¾ä¸ç¼å°±è½çéï¼</p>
<h3 id="seataä¸å¤§æ ¸å¿è§è²å¿æ">Seataä¸å¤§æ ¸å¿è§è²ï¼å¿æï¼</h3>
<ol>
<li><strong>TCï¼Transaction Coordinatorï¼ï¼äºå¡åè°è</strong> â å¨åº<strong>æ»ææ¥</strong><br>
ç¬ç«çSeataæå¡ç«¯ï¼éè¦åç¬é¨ç½²ï¼ï¼è´è´£åå»º/ç®¡çå¨å±äºå¡ãåéå¨å±äºå¡IDï¼XIDï¼ï¼åè°ææåä¸èçæäº¤/åæ»ï¼æ¯æ´ä¸ªåå¸å¼äºå¡çâå¤§èâã</li>
<li><strong>TMï¼Transaction Managerï¼ï¼äºå¡ç®¡çå¨</strong> â äºå¡<strong>åèµ·è</strong><br>
å°±æ¯ä½ ç<strong>ä¸å¡å¥å£æå¡</strong>ï¼æ¯å¦çµåä¸åçãè®¢åæå¡ãï¼ï¼è´è´£åTC<strong>å¼å¯å¨å±äºå¡</strong>ï¼å¹¶æç»åTCåèµ·ãå¨å±æäº¤ãæãå¨å±åæ»ãçè¯·æ±ã</li>
<li><strong>RMï¼Resource Managerï¼ï¼èµæºç®¡çå¨</strong> â äºå¡<strong>åä¸è</strong><br>
æææ¶åæ°æ®æä½çæå¡/æ°æ®åºï¼æ¯å¦ä¸ååºæ¯çãåºå­æå¡ããæ¯ä»æå¡ãï¼ï¼è´è´£ç®¡çæ¬å°äºå¡ï¼åTC<strong>æ³¨ååæ¯äºå¡</strong>ï¼æ¯ä¸ªRMçæ¬å°äºå¡é½æ¯ä¸ä¸ªãåæ¯äºå¡ãï¼ï¼å¹¶æ¥æ¶TCçæä»¤ï¼æ§è¡æ¬å°äºå¡çæäº¤/åæ»ã</li>
</ol>
<p><strong>æ ¸å¿å³è</strong>ï¼ä¸ä¸ª<strong>å¨å±äºå¡</strong> = 1ä¸ªTMåèµ· + 1ä¸ªTCåè° + Nä¸ªRMåä¸ï¼Nä¸ªåæ¯äºå¡ï¼ï¼æææä½é½éè¿<strong>å¨å±å¯ä¸çXID</strong>å³èï¼XIDæ¯åå¸å¼äºå¡çâèº«ä»½è¯âï¼å¾®æå¡è°ç¨é¾ä¸­å¿é¡»éä¼ XIDï¼Seataä¼èªå¨åè¿ä»¶äºï¼ã</p>
<hr>
<h2 id="éç¹seataæå¸¸ç¨çatæ¨¡å¼èªå¨äºå¡90åºæ¯ç¨å®">éç¹ï¼Seataæå¸¸ç¨çATæ¨¡å¼ï¼èªå¨äºå¡ï¼90%åºæ¯ç¨å®ï¼</h2>
<p>Seataæ¯æATãTCCãSagaãXAåç§æ¨¡å¼ï¼å¶ä¸­<strong>ATæ¨¡å¼æ¯é»è®¤ãæä¸»æµç</strong>ï¼ä¹æ¯æè´´åæ¥å¸¸å¼åçââ<strong>å ä¹æ ä¸å¡ä¾µå¥</strong>ï¼åªå ä¸ä¸ªæ³¨è§£ï¼ã<strong>æ§è½æ¥è¿æ¬å°äºå¡</strong>ã<strong>èªå¨å®æåæ»è¡¥å¿</strong>ï¼å®ç¾ééäºèç½é«å¹¶ååºæ¯ï¼ä¸é¢ç¨å¤§ç½è¯è®²éå®çå®ç°åçï¼æ ¸å¿æ¯<strong>æ¹è¿çç2PC</strong>ï¼è§£å³äºåç2PCæ§è½å·®ãéèµæºä¹çé®é¢ï¼ã</p>
<p>åç»ATæ¨¡å¼å®è°ï¼<strong>åºäºæ¬å°äºå¡+undo logçèªå¨ä¸¤é¶æ®µæäº¤</strong>ï¼æ ¸å¿åæ°æ¯<strong>ç¬¬ä¸é¶æ®µå°±æ§è¡æ¬å°äºå¡å¹¶æäº¤ï¼éæ¾æ°æ®åºé</strong>ï¼ç¬¬äºé¶æ®µåªåâç¡®è®¤âæâåæ»è¡¥å¿âï¼å½»åºè§£å³äºåç2PCçæ§è½ç¶é¢ã</p>
<h3 id="åç½®æ¡ä»¶atæ¨¡å¼å¿é¡»æ»¡è¶³">åç½®æ¡ä»¶ï¼ATæ¨¡å¼å¿é¡»æ»¡è¶³ï¼</h3>
<ol>
<li>æ°æ®åºæ¯æ<strong>æ¬å°äºå¡</strong>ï¼MySQL/Oracle/PGç­ä¸»æµæ°æ®åºé½æ»¡è¶³ï¼ï¼</li>
<li>æ°æ®åºæ¯æ<strong>è¡çº§é</strong>ï¼InnoDBå¼æï¼è¿æ¯MySQLçé»è®¤å¼æï¼ï¼</li>
<li>å¿é¡»ä½¿ç¨Seataæä¾ç<strong>æ°æ®æºä»£ç</strong>ï¼Seataè¦æ¦æªSQLï¼çæundo logï¼èªå¨ä»£çï¼ä¸ç¨æå¨æ¹ï¼ã</li>
</ol>
<h3 id="atæ¨¡å¼æ ¸å¿æµç¨å2ä¸ªé¶æ®µç»åçµåä¸ååºæ¯è®¢åæå¡tm-åºå­æå¡rm">ATæ¨¡å¼æ ¸å¿æµç¨ï¼å2ä¸ªé¶æ®µï¼ç»åãçµåä¸åãåºæ¯ï¼è®¢åæå¡ï¼TMï¼+ åºå­æå¡ï¼RMï¼ï¼</h3>
<p>å¨ç¨å´ç»<strong>XID</strong>å³èï¼TCå¨ç¨åè°ï¼åä¸å¤§ç½è¯æµç¨ï¼åè®²å³é®ç»èï¼</p>
<h4 id="åºæ¯éºå«">åºæ¯éºå«</h4>
<ul>
<li>TMï¼è®¢åæå¡ï¼ä¸åæ¥å£å <code>@GlobalTransactional</code>æ³¨è§£ï¼åèµ·å¨å±äºå¡ï¼ï¼</li>
<li>RM1ï¼è®¢åæå¡çæ°æ®åºï¼æå¥è®¢åè®°å½ï¼åæ¯äºå¡1ï¼ï¼</li>
<li>RM2ï¼åºå­æå¡çæ°æ®åºï¼æ£ååºå­ï¼åæ¯äºå¡2ï¼ï¼</li>
<li>TCï¼Seataæå¡ç«¯ï¼æ»ææ¥ï¼ã</li>
</ul>
<h3 id="ç¬¬ä¸é¶æ®µæ¬å°äºå¡æäº¤æ ¸å¿åçå®æä½çåæè¯">ç¬¬ä¸é¶æ®µï¼æ¬å°äºå¡æäº¤ï¼æ ¸å¿ï¼åçå®æä½+çâåæè¯âï¼</h3>
<p>è¿æ¯ATæ¨¡å¼æå³é®çä¸æ­¥ï¼<strong>ææRMé½ä¼æ§è¡æ¬å°äºå¡å¹¶æäº¤</strong>ï¼åæ¶çæ<strong>undo log</strong>ï¼åæè¯ï¼ï¼å¹¶åTCæ³¨ååæ¯äºå¡ï¼æµç¨å¦ä¸ï¼</p>
<ol>
<li>TMåTCåèµ·ãå¼å¯å¨å±äºå¡ãè¯·æ±ï¼TCçæ<strong>å¨å±å¯ä¸XID</strong>å¹¶è¿åç»TMï¼</li>
<li>XIDéå¾®æå¡è°ç¨é¾éä¼ ï¼Seataèªå¨åï¼æ¯å¦Feign/Dubboè°ç¨æ¶ï¼XIDä¼æ¾å¨è¯·æ±å¤´éï¼ï¼ææåä¸çRMé½è½æ¿å°XIDï¼</li>
<li><strong>è®¢åæå¡ï¼RM1ï¼æ§è¡æ¬å°æä½</strong>ï¼æ§è¡<code>insert è®¢å</code>SQLï¼Seataçæ°æ®æºä»£çä¼æ¦æªè¿ä¸ªSQLï¼å3ä»¶äºï¼
<ul>
<li>ãåç½®å¿«ç§ãï¼æ§è¡SQLåï¼åæ¥è¯¢è¦æä½çæ°æ®ï¼ä¿å­<strong>æ°æ®å¿«ç§</strong>ï¼æ¯å¦è®¢åè¡¨çåå§ç¶æï¼æ è®¢åï¼ï¼</li>
<li>ãæ§è¡SQLãï¼çæ­£æå¥è®¢åè®°å½ï¼å®æä¸å¡æä½ï¼</li>
<li>ãçæundo logãï¼æ<strong>åç½®å¿«ç§+å½åæ°æ®+SQLç±»å</strong>ï¼æå¥/æ´æ°/å é¤ï¼å°è£æundo logï¼åå¥æ°æ®åºç<strong>undo_logè¡¨</strong>ï¼Seataèªå¨åå»ºï¼ï¼è¿å°±æ¯âåæè¯âï¼</li>
</ul>
</li>
<li>RM1<strong>æäº¤æ¬å°äºå¡</strong>ï¼å¹¶ç«å³éæ¾æ°æ®åºçè¡çº§éï¼åç2PCçè´å½é®é¢å°±æ¯ä¸æäº¤ãä¸éæ¾éï¼ATæ¨¡å¼è¿éç´æ¥æäº¤ï¼æ§è½ææ»¡ï¼ï¼</li>
<li>RM1åTCæ³¨åãè®¢ååæ¯äºå¡ãï¼åç¥TCï¼æè¿æ­¥æä½å®æäºï¼çäºundo logï¼éæ¶å¯ä»¥åæ»ï¼</li>
<li>åºå­æå¡ï¼RM2ï¼æ¶å°å¸¦XIDçè°ç¨è¯·æ±ï¼éå¤<strong>æ­¥éª¤3-5</strong>ï¼æ£ååºå­âçæundo logâæäº¤æ¬å°äºå¡âæ³¨ååºå­åæ¯äºå¡å°TCã</li>
</ol>
<p><strong>ç¬¬ä¸é¶æ®µç»æ</strong>ï¼ææRMçæ¬å°äºå¡é½å·²æäº¤ï¼æ°æ®å·²ç»åæ´ï¼éå¨é¨éæ¾ï¼ä¸å¡æ æç¥ï¼å¦æå¶ä¸­ä»»ä½ä¸ä¸ªRMæ§è¡å¤±è´¥ï¼æ¯å¦åºå­ä¸è¶³ï¼ï¼ç´æ¥åæ»èªå·±çæ¬å°äºå¡ï¼TMæç¥å°ååTCåèµ·ãå¨å±åæ»ãã</p>
<h3 id="ç¬¬äºé¶æ®µå¨å±æäº¤-or-å¨å±åæ»tcæ»ææ¥åªåè½»éæä½">ç¬¬äºé¶æ®µï¼å¨å±æäº¤ OR å¨å±åæ»ï¼TCæ»ææ¥ï¼åªåè½»éæä½ï¼</h3>
<p>ç¬¬ä¸é¶æ®µææRMé½æååï¼TMä¼åTCåèµ·ãå¨å±æäº¤ãè¯·æ±ï¼å¦ææä»»ä½ä¸ä¸ªRMå¤±è´¥ï¼TMåèµ·ãå¨å±åæ»ãè¯·æ±ï¼TCæ ¹æ®è¯·æ±æä»¤ï¼åææRMä¸åç»ä¸å½ä»¤ã</p>
<h4 id="æåµ1å¨å±æäº¤æå¸¸è§è½»éå°å ä¹æ å¼é">æåµ1ï¼å¨å±æäº¤ï¼æå¸¸è§ï¼è½»éå°å ä¹æ å¼éï¼</h4>
<ol>
<li>TCåææRMï¼è®¢åRMãåºå­RMï¼ä¸åãå¨å±æäº¤ãæä»¤ï¼</li>
<li>åRMæ¶å°æä»¤åï¼<strong>åªåä¸ä»¶äº</strong>ï¼å¼æ­¥å é¤èªå·±çundo logï¼åæè¯æ²¡ç¨äºï¼å æå ç©ºé´ï¼ï¼</li>
<li>RMåTCåé¦âæäº¤å®æâï¼ææRMåé¦åï¼TCæ è®°å¨å±äºå¡<strong>å®æ</strong>ã</li>
</ol>
<p><strong>ä¸ºä»ä¹è¿ä¹è½»éï¼</strong> å ä¸ºç¬¬ä¸é¶æ®µå·²ç»å®æäºçå®çä¸å¡æä½å¹¶æäº¤ï¼ç¬¬äºé¶æ®µçæäº¤åªæ¯âæ¸çåå¾âï¼æ²¡æä»»ä½æ°æ®åºéç«äºï¼æ§è½å ä¹æ æèã</p>
<h4 id="æåµ2å¨å±åæ»æéè¯¯ååæè¯æ¢å¤æ°æ®">æåµ2ï¼å¨å±åæ»ï¼æéè¯¯ï¼åâåæè¯âæ¢å¤æ°æ®ï¼</h4>
<p>è¿æ¯ATæ¨¡å¼çæ ¸å¿è¡¥å¿é»è¾ï¼<strong>éè¿undo logèªå¨åæ»æ°æ®</strong>ï¼å¨ç¨æ éä¸å¡ä»£ç ä»å¥ï¼æµç¨å¦ä¸ï¼</p>
<ol>
<li>TCåææRMä¸åãå¨å±åæ»ãæä»¤ï¼å¹¶éå¸¦è¦åæ»çåæ¯äºå¡IDï¼</li>
<li>åRMæ¶å°æä»¤åï¼å¼å¯<strong>æ¬å°å°äºå¡</strong>ï¼æ§è¡åæ»æä½ï¼
<ul>
<li>ä»undo_logè¡¨ä¸­æ ¹æ®åæ¯IDæ¥è¯¢å¯¹åºçundo logï¼åç½®å¿«ç§+å½åæ°æ®ï¼ï¼</li>
<li><strong>æ°æ®æ ¡éª</strong>ï¼å¯¹æ¯undo logä¸­çãå½åæ°æ®ãåæ°æ®åºä¸­çå®çãå½åæ°æ®ãï¼ç¡®ä¿æ°æ®æ²¡è¢«å¶ä»äºå¡ä¿®æ¹ï¼Seataçä¹è§éæºå¶ï¼é¿åèåæ»ï¼ï¼</li>
<li><strong>æ¢å¤æ°æ®</strong>ï¼ç¨undo logä¸­çãåç½®å¿«ç§ãè¦çæ°æ®åºçå½åæ°æ®ï¼æ¯å¦è®¢åRMå é¤æå¥çè®¢åè®°å½ï¼åºå­RMæ¢å¤æ£åçåºå­ï¼ï¼</li>
<li><strong>å é¤undo log</strong>ï¼åæ»å®æåï¼å é¤è¯¥æ¡undo logï¼</li>
</ul>
</li>
<li>RMæäº¤è¿ä¸ªæ¬å°åæ»äºå¡ï¼åTCåé¦âåæ»å®æâï¼</li>
<li>ææRMåæ»å®æåï¼TCæ è®°å¨å±äºå¡<strong>åæ»æå</strong>ã</li>
</ol>
<p><strong>å³é®</strong>ï¼åæ»æä½æ¯åºäºæ¬å°äºå¡çï¼å¿«éä¸æ éç«äºï¼å³ä½¿ä¸ªå«RMåæ»å¤±è´¥ï¼Seataä¼<strong>èªå¨éè¯</strong>ï¼ç´å°æåï¼ä¿è¯æç»åæ»ï¼ã</p>
<h3 id="atæ¨¡å¼çæ ¸å¿ä¼å¿ä¸ºä»ä¹æ¯90åºæ¯çé¦é">ATæ¨¡å¼çæ ¸å¿ä¼å¿ï¼ä¸ºä»ä¹æ¯90%åºæ¯çé¦éï¼</h3>
<ol>
<li><strong>å ä¹æ ä¸å¡ä¾µå¥</strong>ï¼åªéè¦å¨äºå¡å¥å£å <code>@GlobalTransactional</code>æ³¨è§£ï¼ä¸å¡ä»£ç ä¸è¡ä¸ç¨æ¹ï¼å¼åææ¬æä½ï¼</li>
<li><strong>æ§è½æé«</strong>ï¼ç¬¬ä¸é¶æ®µå°±æäº¤æ¬å°äºå¡ãéæ¾éï¼è§£å³äºåç2PCçæ§è½ç¶é¢ï¼æ¥è¿æ¬å°äºå¡çæ§è½ï¼</li>
<li><strong>èªå¨åæ»è¡¥å¿</strong>ï¼åºäºundo logèªå¨å®æåæ»ï¼ä¸ç¨åTCCé£æ ·æå¨åè¡¥å¿ä»£ç ï¼</li>
<li><strong>ééé«å¹¶å</strong>ï¼æ é¿æéãè½»éæäº¤ï¼å®ç¾ééäºèç½çµåãæ¯ä»ç­é«å¹¶ååºæ¯ã</li>
</ol>
<hr>
<h2 id="seataå¶ä»æ¨¡å¼çå®ç°ç®åè®²æééæ©">Seataå¶ä»æ¨¡å¼çå®ç°ï¼ç®åè®²ï¼æééæ©ï¼</h2>
<p>Seataå°è£äºææç»å¸åå¸å¼äºå¡æ¹æ¡ï¼é¤äºATæ¨¡å¼ï¼å¶ä»æ¨¡å¼é½æ¯ä¸ºäºééç¹æ®åºæ¯ï¼æ ¸å¿æ¯<strong>Seataå¸®ä½ å¤çäºåºå±çåè°ãéè¯ãå¹ç­ãäºå¡ä¸ä¸æä¼ é</strong>ï¼ä½ åªéè¦æè§èåå°éä»£ç ï¼ä¸ç¨ä»é¶å¼åã</p>
<h3 id="1-seata-tccæ¨¡å¼ééå¼ºä¸è´é«å¹¶åéæå¨åä»£ç ">1. Seata TCCæ¨¡å¼ï¼ééå¼ºä¸è´+é«å¹¶åï¼éæå¨åä»£ç ï¼</h3>
<p>å®å¨éµå¾ªTCCçTry-Confirm-Cancelä¸æ­¥ï¼ä½Seataåäºå°è£ï¼</p>
<ol>
<li>ä½ åªéè¦ä¸ºæ¯ä¸ªä¸å¡å3ä¸ªæ¹æ³ï¼åå«å <code>@Tcc</code>ï¼ä¸»æ¹æ³ï¼ã<code>@Confirm</code>ï¼ç¡®è®¤æ¹æ³ï¼ã<code>@Cancel</code>ï¼åæ¶æ¹æ³ï¼æ³¨è§£ï¼</li>
<li>Seataèªå¨ç®¡çäºå¡ä¸ä¸æï¼XIDï¼ï¼åè°åæå¡çTry/Confirm/Cancelæ§è¡ï¼</li>
<li>èªå¨å¤ç<strong>å¹ç­ãç©ºè¡¥å¿ãæ¬æ</strong>ï¼TCCçä¸å¤§åï¼ï¼ä¸ç¨èªå·±åå¤æ­é»è¾ã</li>
</ol>
<p><strong>éç¨åºæ¯</strong>ï¼ATæ¨¡å¼æ æ³è¦ççåºæ¯ï¼æ¯å¦éæ°æ®åºæä½ï¼è°ç¨ç¬¬ä¸æ¹æ¯ä»æ¥å£ãæ£åç¼å­åºå­ï¼ã</p>
<h3 id="2-seata-sagaæ¨¡å¼ééé¿äºå¡å¤ææµç¨ä½ä»£ç ">2. Seata Sagaæ¨¡å¼ï¼ééé¿äºå¡+å¤ææµç¨ï¼ä½ä»£ç ï¼</h3>
<p>ä¸ä¸ºé¿æµç¨ãå¤æ­¥éª¤çåå¸å¼äºå¡è®¾è®¡ï¼Seataåäºä¸¤å¤§ä¼åï¼</p>
<ol>
<li><strong>æ®éSaga</strong>ï¼ä½ åæ¯ä¸ªæ­¥éª¤çæ§è¡æ¹æ³åè¡¥å¿æ¹æ³ï¼Seataæé¡ºåºæ§è¡ï¼å¤±è´¥åååºæ§è¡è¡¥å¿ï¼</li>
<li><strong>ç¶ææºSaga</strong>ï¼ç¨<strong>JSON/YAML</strong>å®ä¹äºå¡æµç¨ï¼æ­¥éª¤é¡ºåºãåæ¯ãéè¯è§åï¼ï¼ä¸ç¨åä»£ç ï¼ä½ä»£ç éç½®ï¼æ¯æå¤æçæµç¨ï¼æ¯å¦åæ¯ãå¹¶è¡ãæ¡ä»¶å¤æ­ï¼ã</li>
</ol>
<p><strong>éç¨åºæ¯</strong>ï¼è·¨å¢æ¯ä»ãä¾åºé¾ç»ç®ãä¿é©çèµç­é¿æµç¨ä¸å¡ï¼æ­¥éª¤å¤ãèæ¶ä¹ï¼çè³è·¨å¤©ï¼ã</p>
<h3 id="3-seata-xaæ¨¡å¼åç2pcå¼ºä¸è´æ§è½å·®">3. Seata XAæ¨¡å¼ï¼åç2PCï¼å¼ºä¸è´ï¼æ§è½å·®ï¼</h3>
<p>å®å¨å®ç°æ°æ®åºçXAåè®®ï¼åç2PCï¼ï¼Seataä½ä¸ºåè°èï¼ç®¡çåæ°æ®åºçXAäºå¡ï¼</p>
<ol>
<li>ç¬¬ä¸é¶æ®µï¼åæ°æ®åºæ§è¡XA prepareï¼é¢æäº¤ï¼ï¼éå®èµæºï¼</li>
<li>ç¬¬äºé¶æ®µï¼TCä¸åXA commit/rollbackï¼åæ°æ®åºæ§è¡æ­£å¼æäº¤/åæ»ã</li>
</ol>
<p><strong>ç¹ç¹</strong>ï¼å¼ºä¸è´æ§ï¼æ°æ®åºå±é¢ä¿è¯ï¼ï¼ä½æ§è½å·®ãèµæºéå®ä¹ï¼<strong>ä»éç¨äºå¯¹ä¸è´æ§è¦æ±æé«çä½å¹¶ååºæ¯</strong>ï¼æ¯å¦é¶è¡æ ¸å¿äº¤æï¼ã</p>
<hr>
<h2 id="seataå®ç°åå¸å¼äºå¡çæ ¸å¿äº®ç¹æ»ç»">Seataå®ç°åå¸å¼äºå¡çæ ¸å¿äº®ç¹ï¼æ»ç»ï¼</h2>
<p>Seataä¹æä»¥è½æä¸ºJavaå¾®æå¡åå¸å¼äºå¡çé¦éï¼æ ¸å¿æ¯å®è§£å³äºä¼ ç»åå¸å¼äºå¡æ¹æ¡ç<strong>çç¹</strong>ï¼åäºæè´çå·¥ç¨åä¼åï¼</p>
<ol>
<li><strong>ç»ä¸åè°</strong>ï¼éè¿TC/TM/RMä¸å¤§è§è²ï¼æåå¸å¼äºå¡æåä¸ºâå¨å±äºå¡+åæ¯äºå¡âï¼ç»ä¸åè°ç®¡çï¼é»è¾æ¸æ°ï¼</li>
<li><strong>æç®å¼å</strong>ï¼ä¸»æµçATæ¨¡å¼å ä¹æ ä¾µå¥ï¼åªå ä¸ä¸ªæ³¨è§£ï¼å¼åææ¬æ¥è¿æ¬å°äºå¡ï¼</li>
<li><strong>æ§è½ä¼å</strong>ï¼ATæ¨¡å¼çâç¬¬ä¸é¶æ®µæäº¤+undo logåæ»âï¼å½»åºè§£å³äºåç2PCçæ§è½ç¶é¢ï¼ééé«å¹¶åï¼</li>
<li><strong>å¨åºæ¯è¦ç</strong>ï¼å°è£AT/TCC/Saga/XAåç§æ¨¡å¼ï¼ä»é«å¹¶åå°é¿äºå¡ï¼ä»æ ä¾µå¥å°æå¨å¼åï¼æ»¡è¶³ææåå¸å¼äºå¡åºæ¯ï¼</li>
<li><strong>èªå¨é¿å</strong>ï¼åç½®å¹ç­ãéè¯ãç©ºè¡¥å¿ãæ¬æãèåæ»ç­æºå¶ï¼ä¸ç¨å¼åèæå¨å¤çåå¸å¼äºå¡çåç§åï¼</li>
<li><strong>æ ç¼éæ</strong>ï¼å®ç¾ééSpring Boot/Spring Cloud/Dubboï¼æ¯æMySQL/Oracle/PGç­ä¸»æµæ°æ®åºï¼éç½®ç®åï¼å¿«éè½å°ã</li>
</ol>
<hr>
<h2 id="æç®è½å°seata-atæ¨¡å¼ä»£ç å±é¢è®©ä½ æç´è§è®¤ç¥">æç®è½å°Seata ATæ¨¡å¼ï¼ä»£ç å±é¢ï¼è®©ä½ æç´è§è®¤ç¥ï¼</h2>
<p>ä¸ç¨å¤æéç½®ï¼åªçæ ¸å¿ä»£ç ï¼å°±è½ç¥éSeataæå¤ç®åï¼Spring Cloudåºæ¯ï¼ï¼</p>
<h3 id="1-å¥å£æå¡tmäºå¡åèµ·è">1. å¥å£æå¡ï¼TMï¼äºå¡åèµ·èï¼</h3>
<p>åªéè¦å¨<strong>ä¸å¡å¥å£æ¹æ³</strong>ä¸å <code>@GlobalTransactional</code>æ³¨è§£ï¼å°±æ¯TMï¼å¼å¯å¨å±äºå¡ï¼</p>
<pre><code class="language-java">@RestController
public class OrderController {
    @Autowired
    private OrderService orderService;
    @Autowired
    private StockFeignClient stockFeignClient; // è°ç¨åºå­æå¡çFeignå®¢æ·ç«¯

    // ä¸åæ¥å£ï¼åå¸å¼äºå¡å¥å£ï¼TM
    @GlobalTransactional(rollbackFor = Exception.class) // å è¿ä¸ªæ³¨è§£å°±å¤äºï¼
    @PostMapping("/createOrder")
    public String createOrder(@RequestParam Long goodsId, @RequestParam Integer num) {
        // 1. æ¬å°æä½ï¼åå»ºè®¢åï¼RM1ï¼è®¢åæå¡çæ¬å°äºå¡ï¼
        orderService.createOrder(goodsId, num);
        // 2. è°ç¨åºå­æå¡ï¼æ£ååºå­ï¼RM2ï¼åºå­æå¡çæ¬å°äºå¡ï¼XIDèªå¨éä¼ ï¼
        Boolean reduceResult = stockFeignClient.reduceStock(goodsId, num);
        if (!reduceResult) {
            throw new RuntimeException("åºå­æ£åå¤±è´¥ï¼å¨å±åæ»");
        }
        return "ä¸åæå";
    }
}
</code></pre>
<h3 id="2-åä¸æå¡rmåºå­æå¡">2. åä¸æå¡ï¼RMï¼åºå­æå¡ï¼</h3>
<p><strong>ä¸è¡æ³¨è§£é½ä¸ç¨å </strong>ï¼æ­£å¸¸åæ¬å°ä¸å¡ä»£ç å°±è¡ï¼Seataèªå¨æ¦æªå¹¶çæundo logï¼</p>
<pre><code class="language-java">@RestController
public class StockController {
    @Autowired
    private StockService stockService;

    // æ£ååºå­ï¼RMï¼æ®éæ¬å°æ¥å£
    @PostMapping("/reduceStock")
    public Boolean reduceStock(@RequestParam Long goodsId, @RequestParam Integer num) {
        stockService.reduceStock(goodsId, num); // æ­£å¸¸æ£ååºå­çæ¬å°æ¹æ³
        return true;
    }
}
</code></pre>
<p><strong>è¿å°±æ¯Seataçå¨å</strong>ï¼ä¸å¡ä»£ç å ä¹æ æ¹å¨ï¼åªå ä¸ä¸ªæ³¨è§£ï¼å°±è½å®ç°åå¸å¼äºå¡çâè¦ä¹å¨æãè¦ä¹å¨éâã</p>
<hr>
<h3 id="æ ¸å¿æ»ç»">æ ¸å¿æ»ç»</h3>
<ol>
<li>Seataçæ ¸å¿æ¯<strong>æåå¨å±äºå¡ä¸ºå¤ä¸ªæ¬å°äºå¡</strong>ï¼éè¿TCï¼æ»ææ¥ï¼ãTMï¼åèµ·èï¼ãRMï¼åä¸èï¼ä¸å¤§è§è²åè°ï¼ç¨<strong>XID</strong>å³èæ´ä¸ªè°ç¨é¾ï¼</li>
<li>ä¸»æµç<strong>ATæ¨¡å¼</strong>æ¯æ¹è¿ç2PCï¼æ ¸å¿æ¯ãç¬¬ä¸é¶æ®µæ¬å°æäº¤+çæundo logï¼ç¬¬äºé¶æ®µè½»éæäº¤/åºäºundo logèªå¨åæ»ãï¼æ ä¾µå¥ãé«æ§è½ï¼éé90%çäºèç½åºæ¯ï¼</li>
<li>Seataå°è£äºTCC/Saga/XAæ¨¡å¼ï¼åå«éé<strong>å¼ºä¸è´é«å¹¶å</strong>ã<strong>é¿æµç¨å¤æä¸å¡</strong>ã<strong>å¼ºä¸è´ä½å¹¶å</strong>åºæ¯ï¼åºå±èªå¨å¤çå¹ç­ãéè¯ç­åå¸å¼åï¼</li>
<li>è½å°æç®åï¼ATæ¨¡å¼åªéè¦å¨äºå¡å¥å£å <code>@GlobalTransactional</code>æ³¨è§£ï¼ä¸å¡ä»£ç æ æ¹å¨ï¼å®ç¾éæSpring Cloud/Dubboã</li>
</ol>


</div>
<div id="MySignature" role="contentinfo">
    
<p>â¤ï¸ å¦æä½ åæ¬¢è¿ç¯æç« ï¼è¯·ç¹èµæ¯æï¼ ð åæ¶æ¬¢è¿å³æ³¨æçåå®¢ï¼è·åæ´å¤ç²¾å½©åå®¹ï¼</p>

<p>æ¬ææ¥èªåå®¢å­ï¼ä½èï¼<a href="https://www.cnblogs.com/sun-10387834/" target="_blank">ä½ç¥è®©ææ¥å·¡å±±</a>ï¼è½¬è½½è¯·æ³¨æåæé¾æ¥ï¼<a href="https://www.cnblogs.com/sun-10387834/p/19584278" target="_blank">https://www.cnblogs.com/sun-10387834/p/19584278</a></p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-06 14:16">2026-02-06 14:16</span>&nbsp;
<a href="https://www.cnblogs.com/sun-10387834">ä½ç¥è®©ææ¥å·¡å±±</a>&nbsp;
éè¯»(<span id="post_view_count">26</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19584278);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19584278', targetLink: 'https://www.cnblogs.com/sun-10387834/p/19584278', title: 'Seataå®ç°åå¸å¼äºå¡ï¼å¤§ç½è¯å¨åæï¼æ ¸å¿è®²éATæ¨¡å¼ï¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Redmi AX6 TTL æç è®°å½ ]]></title>
    <link>https://www.cnblogs.com/sollong/p/19584026</link>
    <guid>035ecf76693ac2c4dfce04e92984e42e</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/sollong/p/19584026" title="åå¸äº 2026-02-06 13:37">
    <span role="heading" aria-level="2">Redmi AX6 TTL æç è®°å½</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        è®°ä¸æ¬¡çº¢ç±³ AX6 æ®ç TTLæç è¿ç¨ãæ¬æéè¿ TTL ä¸²å£å©ç¨ TFTP å¨UBootå½ä»¤è¡ ä¿®å¤MIBIBååºè¡¨ï¼éæ°å·å¥ OpenWrt åºä»¶ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p><em>ä»åä¸æ¬¡è®°å½,å¯è½ä¼æä¸çè§£åéè¯¯çå°æ¹</em></p>
<h1 id="èæ¯">èæ¯</h1>
<p>å·è¿ä¸æ­»Uboot + ImmortalWrt, æ³å·ååååºä»¶,è¯å¾å·ååååºå æä½ååºè¡¨ä¸å½ææ®ç .</p>
<blockquote>
<p>ç åº¦å¤æ­:<a href="https://www.right.com.cn/forum/thread-5181728-1-1.html" target="_blank" rel="noopener nofollow">å¼ç¨æ©å±±</a><br>
ä¸å°å·ç çAX6ï¼åå¤å®æ¯æ®éç è¿æ¯æ·±åº¦ç ï¼æ®éç TTLå¯æï¼æ·±åº¦ç ç¼ç¨å¨æè½æï¼<br>
1ãæ®éç ï¼ä¸çµSYSé»ç¯å¸¸äº®ï¼è¿ä¼å¿åé»ç¯éªä¸ä¸åå¼å§SYSé»ç¯å¸¸äº®ï¼ç¶åéå¤ã<br>
ââè¿ç§UBOOTæªæåï¼ä¸è¬æ¯sysupgradeãubiformatæä»¤æwebéåå¥åºä»¶å¤±è´¥å¯¼è´ï¼ã<br>
2ãæ·±åº¦ç ï¼æ¥ä¸çµæºï¼åé»ç¯éªä¸ä¸ï¼è¿å ç§åé»ç¯åéªä¸ä¸ï¼ç¶åéå¤ã<br>
ââè¿ç§UBOOTå·²æåï¼ä¸è¬å·å¥æ°ååºè¡¨æä»¶åæ¼æçµéå¯æ­¥éª¤ï¼ï¼è¯·èµ°å®åææROMè¯çä¸ç¼ç¨å¨ã</p>
</blockquote>
<p>è¯å¾å°ç±³è·¯ç±å¨ä¿®å¤å·¥å·æç ,ä½æ¯ä¸è¯å«,æ ååº<br>
å¨åç»­çä¸²å£ä¿¡æ¯åç°ååºè¡¨åæè¿æ ·:</p>
<pre><code>IPQ807x#   mtdparts
device nand0 &lt;nand0&gt;, # parts = 1
 #: name                size            offset          mask_flags
 0: fs                  0x023c0000      0x02dc0000      0

active partition: nand0,0 - (fs) 0x023c0000 @ 0x02dc0000

defaults:
mtdids  : none
mtdparts: none
</code></pre>
<p>ç»å¤æ­è¿æ¬¡æ¯æ®éç ,ä½¿ç¨TTLæç .</p>
<h1 id="å¤§è´æè·¯">å¤§è´æè·¯</h1>
<p>éå·ååºè¡¨åopenwrtåºä»¶åç¨å°ç±³è·¯ç±å¨ä¿®å¤å·¥å·å·ååååºä»¶</p>
<h1 id="åå¤å·¥ä½">åå¤å·¥ä½</h1>
<ol>
<li>USBè½¬TTLå·¥å· + æé¦çº¿ è¿éä½¿ç¨CH340G (è®°å¾è£é©±å¨)</li>
</ol>
<p><img src="https://img2024.cnblogs.com/blog/3309763/202601/3309763-20260131231407423-1048980357.jpg" alt="test2" width="300" height="200" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/3309763/202601/3309763-20260131231413635-1323732633.jpg" alt="test" width="300" height="200" loading="lazy"></p>
<ol start="2">
<li><a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html" target="_blank" rel="noopener nofollow">Putty</a> è¿è¡ä¸²å£éä¿¡</li>
<li><a href="https://github.com/PJO2/tftpd64/releases" target="_blank" rel="noopener nofollow">tftpd64</a> ç¨äºæ­å»ºæ¬å° TFTP æå¡å¨ï¼ä¼ è¾æä»¶</li>
<li><a href="https://github.com/ZqinKing/wrt_release/releases" target="_blank" rel="noopener nofollow">ImmortalWrt</a>ååååºåºä»¶ è¿éä½¿ç¨immortalwrt-qualcommax-ipq807x-redmi_ax6-stock-squashfs-factory.ubi</li>
<li>ååååºè¡¨æä»¶mibib.bin</li>
<li><a href="https://bigota.miwifi.com/xiaoqiang/tools/MIWIFIRepairTool.x86.zip" target="_blank" rel="noopener nofollow">å°ç±³è·¯ç±å¨ä¿®å¤å·¥å·</a></li>
</ol>
<p>å°ååºè¡¨æä»¶mibib.binååºä»¶immortalwrt-qualcommax-ipq807x-redmi_ax6-stock-squashfs-factory.ubiæ¾å¥tftpd64ç®å½<br>
immortalwrt-qualcommax-ipq807x-redmi_ax6-stock-squashfs-factory.ubiå¨æ¬æä¸­è¢«æ¹åætest.bin</p>
<h1 id="ç« è1-ææºæ¾ttlè§¦ç¹-è¿çº¿è¿è¡puttyä¸²å£éä¿¡">ç« è1 ææºæ¾TTLè§¦ç¹ è¿çº¿è¿è¡Puttyä¸²å£éä¿¡</h1>
<p>å¤§æ¦å¨è¿ä¸ªä½ç½®:<br>
<img src="https://img2024.cnblogs.com/blog/3309763/202601/3309763-20260131231947950-1180083227.png" alt="202921e8t5jtztgt4ztguc" width="300" height="200" loading="lazy"></p>
<p>å¯ä»¥çä¸ª4pinéæ¹ä¾¿è¿æ¥</p>
<p><img src="https://img2024.cnblogs.com/blog/3309763/202601/3309763-20260131233641930-1376623072.png" alt="image" width="300" height="200" loading="lazy"></p>
<p>*CH340Gè·³çº¿å¸½éç­æ¥å¨ 3.3V æ¨¡å¼ *</p>
<p>PCæä¸CH340G å¨è®¾å¤ç®¡çå¨æ¥çå®çç«¯å£å·<br>
<img src="https://img2024.cnblogs.com/blog/3309763/202602/3309763-20260206134347304-1019943611.png" alt="è®¾å¤ç®¡çå¨" width="300" height="200" loading="lazy"></p>
<p>å¨puttyè®¾ç½®:<br>
Connection type: Serial<br>
Serial line: COM5 &lt;--ç¨å®éCH340Gçç«¯å£å·<br>
Speed (Baud rate): 115200</p>
<p><img src="https://img2024.cnblogs.com/blog/3309763/202601/3309763-20260131233134423-1601931815.png" alt="image" width="300" height="200" loading="lazy"></p>
<p>ç¶åæç§ä»¥ä¸é»è¾ç¸è</p>
<pre><code>CH340G GND       &lt;--&gt; è·¯ç±å¨ GND
CH340G TX (åé) &lt;--&gt; è·¯ç±å¨ RX (æ¥æ¶)
CH340G RX (æ¥æ¶) &lt;--&gt; è·¯ç±å¨ TX (åé)
VCCä¸è¿
</code></pre>
<p><em>è·¯ç±å¨éçµä¹ååæ¥TTL,ä¸ç¶è·¯ç±å¨æ æ³å¯å¨</em></p>
<p>æ­£å¸¸æåµåºè¯¥æ¯è·¯ç±å¨å¼å§éªé»ç¯,puttyå¼å§è¾åº:</p>
<pre><code>...
U-Boot 2016.01 (Jul 08 2021 - 07:16:48 +0000), Build: jenkins-common_router_openwrt_ota_publish-1455

DRAM:  smem ram ptable found: ver: 1 len: 4
512 MiB
NAND:  ONFI device found
ID = 158061c8
Vendor = c8
Device = 61
SF: Unsupported flash IDs: manuf ff, jedec ffff, ext_jedec ffff
ipq_spi: SPI Flash not found (bus/cs/speed/mode) = (0/0/48000000/0)
128 MiB
MMC:   sdhci: Node Not found, skipping initialization

PCI1 is not defined in the device tree
In:    serial@78B3000
Out:   serial@78B3000
Err:   serial@78B3000
machid: 8010010
MMC Device 0 not found
eth5 MAC Address from ART is not valid
write phy_id=1, reg(0x8074):0x0670
write phy_id=2, reg(0x8074):0x0670
write phy_id=3, reg(0x8074):0x0670
write phy_id=4, reg(0x8074):0x0670
bootwait is on, bootdelay=2
Hit any key to stop autoboot:  0
 trigger button release!
boot from rootfs 0
  miwifi: check crash in rmem !
ubi0: attaching mtd1
ubi0: scanning is finished
UBI init error 22
Erasing NAND...
Erasing at 0x6e0000 -- 100% complete.
Writing to NAND... OK
resetting ...

</code></pre>
<p>æä»¬éè¦å¨</p>
<pre><code class="language-bash">Hit any key to stop autoboot:  0
</code></pre>
<p>åè®¡æ¶ç»æåæä»»æé®å¦ Ctrl+C æè Enter<br>
å¼åºUBOOTå½ä»¤è¡ <em>IPQ807x#</em><br>
å¦æåè®¡æ¶è¿ç­æèåæ ¹æ²¡æbootwait,å¯ä»¥è¯çæä½resetåéçµåæ¥TTLåè¯å¾ä¸­æ­å¼åºUBOOTå½ä»¤è¡</p>
<pre><code>Hit any key to stop autoboot:  0
 detect button press, continue check 5 secs
 detect button pressed 5 secs !
 confirm to launch xq_upgrade ! &lt;--æ£æµå°reset,è¿å¥ååææ´æ¨¡å¼
</code></pre>
<h1 id="ç« è2-ä¿®å¤ååºè¡¨">ç« è2 ä¿®å¤ååºè¡¨</h1>
<p>æ¥è¯¢å½åååºè¡¨,åç°å·²ç»åæä»¥ä¸è¿ç§æåµäº</p>
<pre><code>IPQ807x#   mtdparts
device nand0 &lt;nand0&gt;, # parts = 1
 #: name                size            offset          mask_flags
 0: fs                  0x023c0000      0x02dc0000      0
active partition: nand0,0 - (fs) 0x023c0000 @ 0x02dc0000
defaults:
mtdids  : none
mtdparts: none
</code></pre>
<blockquote>
<p>Gemini:<br>
parts = 1ï¼ä½ çéªå­éç°å¨åªè®¤åºäº1ä¸ªååºã<br>
Name: fsï¼è¿å°±æ¯ä¸ºä»ä¹å¯å¨ä¼å¤±è´¥ï¼å®æ¾ä¸å° rootfsï¼åªæ¾å°äºä¸ªå« fs çæ®ä½ååºã<br>
Offset: 0x02dc0000ï¼å¥½æ¶æ¯æ¯ï¼è¿ä¸ªå°åæ­£å¥½æ¯ AX6 åååºä»¶ rootfs (ç³»ç»ååº) çèµ·å§ç©çå°åã</p>
</blockquote>
<h2 id="éå·ååºè¡¨-mibibbin-å°ç©çå°å-0x40000">éå·ååºè¡¨ mibib.bin å°ç©çå°å 0x40000</h2>
<h3 id="çµèç½å¡è®¾ç½®">çµèç½å¡è®¾ç½®</h3>
<p>åè®¾ç½®è¿æ¥è·¯ç±å¨çç½å¡:<br>
IP: 192.168.31.100<br>
æ©ç : 255.255.255.0<br>
ç½å³: 192.168.31.1</p>
<h3 id="éç½®tftpd">éç½®Tftpd</h3>
<p>æå¼Tftpd64-è®¾ç½®-DHCP<br>
IP pool start address: 192.168.31.2<br>
Size of pool: 5<br>
Router (Opt 3): å¡«å¥ 192.168.31.1<br>
Mask: 255.255.255.0<br>
WINS/DNS: å¡« 0.0.0.0 æèçç©ºå³å¯ã</p>
<p>Tftpd64ä¸»çé¢<br>
Server interfaces éæ©ç¸åºç½å¡</p>
<p><img src="https://img2024.cnblogs.com/blog/3309763/202602/3309763-20260205204518215-1615573348.png" alt="image" width="300" height="400" loading="lazy"></p>
<h3 id="éå·ååºè¡¨">éå·ååºè¡¨</h3>
<h4 id="å°ååºè¡¨æä»¶mibibbin-ä¸è½½å°åå­">å°ååºè¡¨æä»¶mibib.bin ä¸è½½å°åå­</h4>
<p>å¨UBOOTå½ä»¤è¡è¾å¥:<br>
è®¾ç½®TFTPæå¡å¨</p>
<pre><code>IPQ807x# setenv serverip 192.168.31.100
IPQ807x# setenv ipaddr 192.168.31.2
</code></pre>
<pre><code>
IPQ807x# tftpboot 0x44000000 mibib.bin 
</code></pre>
<h4 id="æ¦é¤-mibib-æå¨çåºå">æ¦é¤ MIBIB æå¨çåºå</h4>
<pre><code>IPQ807x# nand erase 0x40000 0x40000
</code></pre>
<h4 id="åå¥-mibib">åå¥ MIBIB</h4>
<pre><code>IPQ807x# nand write 0x44000000 0x40000 0x40000
</code></pre>
<h2 id="è®¾ç½®å¯å¨æ å¿å¹¶éç½®ç¯å¢åé">è®¾ç½®å¯å¨æ å¿å¹¶éç½®ç¯å¢åé</h2>
<pre><code>IPQ807x# env default -a
IPQ807x# saveenv
IPQ807x# reset
</code></pre>
<blockquote>
<p>env default -a<br>
gemini:<br>
è¿æ­¥æä½ç¸å½äºç» U-Boot è¿è¡äºä¸æ¬¡âæ ¼å¼åå¤§èâãå®å¿æäºææéè¯¯çæ§è®¾ç½®ï¼éå¯åéæ°ä»éªå­éè¯»åäºä½ ä¹åå·è¿å»çé£ä¸ªæ­£ç¡®ç mibib.binã</p>
</blockquote>
<h1 id="ç« è3-å·å¥openwrtåºå">ç« è3 å·å¥Openwrtåºå</h1>
<h2 id="éè¿tftpä¸è½½åºä»¶å°è·¯ç±å¨åå­">éè¿tftpä¸è½½åºä»¶å°è·¯ç±å¨åå­</h2>
<p>éæ°è®¾ç½®TFTPæå¡å¨</p>
<pre><code>IPQ807x# setenv serverip 192.168.31.100
IPQ807x# setenv ipaddr 192.168.31.2
</code></pre>
<p>ä¸è½½åºä»¶å°åå­</p>
<pre><code>IPQ807x# tftpboot 0x44000000 test.bin
</code></pre>
<h2 id="æ¦é¤rootfsååº">æ¦é¤rootfsååº</h2>
<pre><code>IPQ807x# nand erase 0x2dc0000 0x23c0000
</code></pre>
<h2 id="å°åºä»¶åå¥ååº">å°åºä»¶åå¥ååº</h2>
<pre><code>IPQ807x# nand write 0x44000000 0x2dc0000 0x1c50000
</code></pre>
<blockquote>
<p>ä½¿ç¨nand write 0x44000000 0x2dc0000 $filesize<br>
ä¼æ¥é<br>
IPQ807x# nand write 0x44000000 0x2dc0000 $filesize<br>
NAND write: device 0 offset 0x2dc0000, size 0x1c403bc<br>
NAND write to offset 2dc0000 failed -22<br>
Gemini:<br>
NAND write ... failed -22 æ¯å®å¨é¢æä¹ä¸­çï¼ä¹æ¯ä¸ªâå¥½âéè¯¯ã<br>
åå ï¼-22 ä»£è¡¨ "Invalid Argument" (åæ°æ æ)ã<br>
è¯¦è§£ï¼NAND Flash çåå¥å¿é¡»ä¸¥æ ¼æç§é¡µå¤§å° (Page Size) å¯¹é½ï¼éå¸¸æ¯ 2048 å­èæ 4096 å­èï¼ãä½ çåºä»¶å¤§å°æ¯ 0x1c403bcï¼æ«å°¾ç 3bc è¯´æå®æ²¡æå¯¹é½ï¼æä»¥ U-Boot æç»åå¥ã</p>
</blockquote>
<h2 id="ä¿å­ç¯å¢åé">ä¿å­ç¯å¢åé</h2>
<pre><code>IPQ807x# saveenv
IPQ807x# reset
</code></pre>
<p>åºç°resetting...åéæ°æ¥TTLçº¿,ä¸åºæå¤çè¯å è½½ä¸ä¼åä¸²å£åºè¯¥ä¼æ¾ç¤º:</p>
<pre><code>## Loading kernel from FIT Image at 44000000 ...
   Using 'config@ac04' configuration
   Trying 'kernel-1' kernel subimage
     Description:  ARM64 OpenWrt Linux-6.12.60
     Type:         Kernel Image
     Compression:  gzip compressed
     Data Start:   0x440000e8
     Data Size:    5599108 Bytes = 5.3 MiB
     Architecture: AArch64
     OS:           Linux
     Load Address: 0x41000000
     Entry Point:  0x41000000
     Hash algo:    crc32
     Hash value:   498fead8
     Hash algo:    sha1
     Hash value:   77fc2d898d54e6241736c2f5ad567dcf550ed6dd
   Verifying Hash Integrity ... crc32+ sha1+ OK
## Loading fdt from FIT Image at 44000000 ...
   Using 'config@ac04' configuration
   Trying 'fdt-1' fdt subimage
     Description:  ARM64 OpenWrt redmi_ax6-stock device tree blob
     Type:         Flat Device Tree
     Compression:  uncompressed
     Data Start:   0x445571ac
     Data Size:    49003 Bytes = 47.9 KiB
     Architecture: AArch64
     Hash algo:    crc32
     Hash value:   7aca8bd9
     Hash algo:    sha1
     Hash value:   f9759b7825963dbbd670ab22d1b7be2e8c778124
   Verifying Hash Integrity ... crc32+ sha1+ OK
   Booting using the fdt blob at 0x445571ac
   Uncompressing Kernel Image ... OK
   Loading Device Tree to 4a3f1000, end 4a3fff6a ... OK
Using machid 0x8010010 from environment

Starting kernel ...

Jumping to AARCH64 kernel via monitor

</code></pre>
<h1 id="ç« è3-å°ç±³è·¯ç±å¨ä¿®å¤å·¥å·å·åååå®æ¹åºä»¶">ç« è3 å°ç±³è·¯ç±å¨ä¿®å¤å·¥å·å·åååå®æ¹åºä»¶</h1>
<p>è¿å¥immortalwrt bash æ¥çå½åååºä¿¡æ¯,å¯ä»¥çè§å·²ç»è¿åååºè¡¨äº<br>
<img src="https://img2024.cnblogs.com/blog/3309763/202602/3309763-20260205221018952-1473979721.png" alt="æ¢å¤æåmtd" width="400" height="300" loading="lazy"></p>
<p>æ¥ä¸æ¥å°±å¯ä»¥æresetç¶åç¨å°ç±³è·¯ç±å¨ä¿®å¤å·¥å·å·ååå®æ¹åºä»¶äº<br>
è¿é¨åå°±çç¥äº</p>
<h1 id="ç»å°¾">ç»å°¾</h1>
<p>æè°¢ç½ä¸åè·¯å¤§ç¥çæç¨åGeminiçå¸®å©,ä½æ¯è²ä¼¼bdataä¸¢äº,æ²¡SNç åMACå°åäº<br>
ç´¯äº,åä¸æè¾äº,ä¸æ¬¡ä¸å®</p>
<h1 id="uboot-æ¥å¿è®°å½">Uboot æ¥å¿è®°å½:</h1>
<pre><code>U-Boot 2016.01 (Jul 08 2021 - 07:16:48 +0000), Build: jenkins-common_router_open

DRAM:  smem ram ptable found: ver: 1 len: 4
512 MiB
NAND:  ONFI device found
ID = 158061c8
Vendor = c8
Device = 61
SF: Unsupported flash IDs: manuf ff, jedec ffff, ext_jedec ffff
ipq_spi: SPI Flash not found (bus/cs/speed/mode) = (0/0/48000000/0)
128 MiB
MMC:   sdhci: Node Not found, skipping initialization

PCI1 is not defined in the device tree
In:    serial@78B3000
Out:   serial@78B3000
Err:   serial@78B3000
machid: 8010010
MMC Device 0 not found
eth5 MAC Address from ART is not valid
write phy_id=1, reg(0x8074):0x0670
write phy_id=2, reg(0x8074):0x0670
write phy_id=3, reg(0x8074):0x0670
write phy_id=4, reg(0x8074):0x0670
bootwait is on, bootdelay=2
Hit any key to stop autoboot:  0

Net:   MAC0 addr:9c:9d:7e:5c:d2:31
PHY ID1: 0x4d
PHY ID2: 0xd0b1
EDMA ver 1 hw init
Num rings - TxDesc:1 (0-0) TxCmpl:1 (7-7)
RxDesc:1 (15-15) RxFill:1 (7-7)
ipq807x_edma_alloc_rings: successfull
ipq807x_edma_setup_ring_resources: successfull
ipq807x_edma_configure_rings: successfull
ipq807x_edma_hw_init: successfull
board_eth_init: ipq807x_edma_init successed
eth0
IPQ807x#   mtdparts

device nand0 &lt;nand0&gt;, # parts = 1
 #: name                size            offset          mask_flags
 0: fs                  0x023c0000      0x02dc0000      0

active partition: nand0,0 - (fs) 0x023c0000 @ 0x02dc0000

defaults:
mtdids  : none
mtdparts: none
IPQ807x# &lt;INTERRUPT&gt;
IPQ807x# setenv serverip 192.168.31.100
IPQ807x# setenv ipaddr 192.168.31.2
IPQ807x# tftpboot 0x44000000 mibib.bin
ipq807x_eth_halt: done
eth0 PHY0 Down Speed :10 Half duplex
eth0 PHY1 up Speed :10 Full duplex
eth0 PHY2 Down Speed :10 Half duplex
eth0 PHY3 up Speed :1000 Full duplex
eth0 PHY4 Down Speed :10 Half duplex
eth0 PHY5 Down Speed :10 Half duplex
ipq807x_eth_init: done
Using eth0 device
TFTP from server 192.168.31.100; our IP address is 192.168.31.2
Filename 'mibib.bin'.
Load address: 0x44000000
Loading: *
Got TFTP_OACK: TFTP remote port: changes from 69 to 51212
#################################################################
         #######
         2.1 MiB/s
done
Bytes transferred = 1048576 (100000 hex)
ipq807x_eth_halt: done
IPQ807x# nand erase 0x40000 0x40000

NAND erase: device 0 offset 0x40000, size 0x40000
Erasing at 0x60000 -- 100% complete.
OK
IPQ807x# nand write 0x44000000 0x40000 0x40000

NAND write: device 0 offset 0x40000, size 0x40000
 262144 bytes written: OK
IPQ807x# tftpboot 0x44000000 test.bin
ipq807x_eth_halt: done
eth0 PHY0 Down Speed :10 Half duplex
eth0 PHY1 up Speed :10 Full duplex
eth0 PHY2 Down Speed :10 Half duplex
eth0 PHY3 up Speed :1000 Full duplex
eth0 PHY4 Down Speed :10 Half duplex
eth0 PHY5 Down Speed :10 Half duplex
ipq807x_eth_init: done
Using eth0 device
TFTP from server 192.168.31.100; our IP address is 192.168.31.2
Filename 'test.bin'.
Load address: 0x44000000
Loading: *
Got TFTP_OACK: TFTP remote port: changes from 69 to 51542
#################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         ###
         2.1 MiB/s
done
Bytes transferred = 29623228 (1c403bc hex)
ipq807x_eth_halt: done
IPQ807x# nand erase 0x2dc0000 0x23c0000

NAND erase: device 0 offset 0x2dc0000, size 0x23c0000
Erasing at 0x5160000 -- 100% complete.
OK
IPQ807x# nand write 0x44000000 0x2dc0000 $filesize

NAND write: device 0 offset 0x2dc0000, size 0x1c403bc
NAND write to offset 2dc0000 failed -22
 0 bytes written: ERROR
IPQ807x# &lt;INTERRUPT&gt;
IPQ807x# reset
resetting ...
PCI1 is not defined in the device tree
In:    serial@78B3000
Out:   serial@78B3000
Err:   serial@78B3000
machid: 8010010
MMC Device 0 not found
eth5 MAC Address from ART is not valid
write phy_id=1, reg(0x8074):0x0670
write phy_id=2, reg(0x8074):0x0670
write phy_id=3, reg(0x8074):0x0670
write phy_id=4, reg(0x8074):0x0670
bootwait is on, bootdelay=2
Hit any key to stop autoboot:  0

Net:   MAC0 addr:9c:9d:7e:5c:d2:31
PHY ID1: 0x4d
PHY ID2: 0xd0b1
EDMA ver 1 hw init
Num rings - TxDesc:1 (0-0) TxCmpl:1 (7-7)
RxDesc:1 (15-15) RxFill:1 (7-7)
ipq807x_edma_alloc_rings: successfull
ipq807x_edma_setup_ring_resources: successfull
ipq807x_edma_configure_rings: successfull
ipq807x_edma_hw_init: successfull
board_eth_init: ipq807x_edma_init successed
eth0
IPQ807x# &lt;INTERRUPT&gt;
IPQ807x# mtdparts

device nand0 &lt;nand0&gt;, # parts = 1
 #: name                size            offset          mask_flags
 0: fs                  0x023c0000      0x02dc0000      0

active partition: nand0,0 - (fs) 0x023c0000 @ 0x02dc0000

defaults:
mtdids  : none
mtdparts: none
IPQ807x# &lt;INTERRUPT&gt;
IPQ807x# setenv serverip 192.168.31.100
IPQ807x# setenv ipaddr 192.168.31.2
IPQ807x# tftpboot 0x44000000 test.bin
ipq807x_eth_halt: done
eth0 PHY0 Down Speed :10 Half duplex
eth0 PHY1 up Speed :10 Full duplex
eth0 PHY2 Down Speed :10 Half duplex
eth0 PHY3 up Speed :1000 Full duplex
eth0 PHY4 Down Speed :10 Half duplex
eth0 PHY5 Down Speed :10 Half duplex
ipq807x_eth_init: done
Using eth0 device
TFTP from server 192.168.31.100; our IP address is 192.168.31.2
Filename 'test.bin'.
Load address: 0x44000000
Loading: *
Got TFTP_OACK: TFTP remote port: changes from 69 to 57976
#################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         ############################
         2.1 MiB/s
done
Bytes transferred = 20447232 (1380000 hex)
ipq807x_eth_halt: done
IPQ807x# &lt;INTERRUPT&gt;
IPQ807x# nand write 0x44000000 0x2dc0000 0x1380000

NAND write: device 0 offset 0x2dc0000, size 0x1380000
 20447232 bytes written: OK
IPQ807x# setenv flag_boot_rootfs 0
IPQ807x# setenv flag_last_success 0
IPQ807x# setenv flag_try_sys1_failed 8
IPQ807x# setenv flag_try_sys2_failed 8
IPQ807x# saveenv
Saving Environment to NAND...
Erasing NAND...
Erasing at 0x6e0000 -- 100% complete.
Writing to NAND... OK
IPQ807x# reset
resetting ...


U-Boot 2016.01 (Jul 08 2021 - 07:16:48 +0000), Build: jenkins-common_router_openwrt_ota_publish-1455

DRAM:  smem ram ptable found: ver: 1 len: 4
512 MiB
NAND:  ONFI device found
ID = 158061c8
Vendor = c8
Device = 61
SF: Unsupported flash IDs: manuf ff, jedec ffff, ext_jedec ffff
ipq_spi: SPI Flash not found (bus/cs/speed/mode) = (0/0/48000000/0)
128 MiB
MMC:   sdhci: Node Not found, skipping initialization

PCI1 is not defined in the device tree
In:    serial@78B3000
Out:   serial@78B3000
Err:   serial@78B3000
machid: 8010010
MMC Device 0 not found
eth5 MAC Address from ART is not valid
write phy_id=1, reg(0x8074):0x0670
write phy_id=2, reg(0x8074):0x0670
write phy_id=3, reg(0x8074):0x0670
write phy_id=4, reg(0x8074):0x0670
bootwait is on, bootdelay=2
Hit any key to stop autoboot:  0
 trigger button release!
boot from rootfs 0
  miwifi: check crash in rmem !
ubi0: attaching mtd1
ubi0: scanning is finished
UBI init error 22
Erasing NAND...
Erasing at 0x6e0000 -- 100% complete.
Writing to NAND... OK
resetting ...


U-Boot 2016.01 (Jul 08 2021 - 07:16:48 +0000), Build: jenkins-common_router_openwrt_ota_publish-1455

DRAM:  smem ram ptable found: ver: 1 len: 4
512 MiB
NAND:  ONFI device found
ID = 158061c8
Vendor = c8
Device = 61
SF: Unsupported flash IDs: manuf ff, jedec ffff, ext_jedec ffff
ipq_spi: SPI Flash not found (bus/cs/speed/mode) = (0/0/48000000/0)
128 MiB
MMC:   sdhci: Node Not found, skipping initialization

PCI1 is not defined in the device tree
In:    serial@78B3000
Out:   serial@78B3000
Err:   serial@78B3000
machid: 8010010
MMC Device 0 not found
eth5 MAC Address from ART is not valid
write phy_id=1, reg(0x8074):0x0670
write phy_id=2, reg(0x8074):0x0670
write phy_id=3, reg(0x8074):0x0670
write phy_id=4, reg(0x8074):0x0670
bootwait is on, bootdelay=2
Hit any key to stop autoboot:  0

Net:   MAC0 addr:9c:9d:7e:5c:d2:31
PHY ID1: 0x4d
PHY ID2: 0xd0b1
EDMA ver 1 hw init
Num rings - TxDesc:1 (0-0) TxCmpl:1 (7-7)
RxDesc:1 (15-15) RxFill:1 (7-7)
ipq807x_edma_alloc_rings: successfull
ipq807x_edma_setup_ring_resources: successfull
ipq807x_edma_configure_rings: successfull
ipq807x_edma_hw_init: successfull
board_eth_init: ipq807x_edma_init successed
eth0
IPQ807x# env default -a
## Resetting to default environment
IPQ807x# saveenv
Saving Environment to NAND...
Erasing NAND...
Erasing at 0x6e0000 -- 100% complete.
Writing to NAND... OK
IPQ807x# reset
resetting ...


U-Boot 2016.01 (Jul 08 2021 - 07:16:48 +0000), Build: jenkins-common_router_openwrt_ota_publish-1455

DRAM:  smem ram ptable found: ver: 1 len: 4
512 MiB
NAND:  ONFI device found
ID = 158061c8
Vendor = c8
Device = 61
SF: Unsupported flash IDs: manuf ff, jedec ffff, ext_jedec ffff
ipq_spi: SPI Flash not found (bus/cs/speed/mode) = (0/0/48000000/0)
128 MiB
MMC:   sdhci: Node Not found, skipping initialization

PCI1 is not defined in the device tree
In:    serial@78B3000
Out:   serial@78B3000
Err:   serial@78B3000
machid: 8010010
MMC Device 0 not found
eth5 MAC Address from ART is not valid
write phy_id=1, reg(0x8074):0x0670
write phy_id=2, reg(0x8074):0x0670
write phy_id=3, reg(0x8074):0x0670
write phy_id=4, reg(0x8074):0x0670
Hit any key to stop autoboot:  0
 trigger button release!
boot from rootfs 1
  miwifi: check crash in rmem !
ubi0: attaching mtd1
ubi0: scanning is finished
ubi0: volume 2 ("rootfs_data") re-sized from 9 to 108 LEBs
ubi0: attached mtd1 (name "mtd=0", size 35 MiB)
ubi0: PEB size: 131072 bytes (128 KiB), LEB size: 126976 bytes
ubi0: min./max. I/O unit sizes: 2048/2048, sub-page size 2048
ubi0: VID header offset: 2048 (aligned 2048), data offset: 4096
ubi0: good PEBs: 286, bad PEBs: 0, corrupted PEBs: 0
ubi0: user volume: 3, internal volumes: 1, max. volumes count: 128
ubi0: max/mean erase counter: 1/0, WL threshold: 4096, image sequence number: 1764934210
ubi0: available PEBs: 0, total reserved PEBs: 286, PEBs reserved for bad PEB handling: 20
Read 0 bytes from volume kernel to 44000000
No size specified -&gt; Using max size (5713920)
Could not find PCI in device tree
Erasing NAND...
Erasing at 0x6e0000 -- 100% complete.
Writing to NAND... OK
## Loading kernel from FIT Image at 44000000 ...
   Using 'config@ac04' configuration
   Trying 'kernel-1' kernel subimage
     Description:  ARM64 OpenWrt Linux-6.12.60
     Type:         Kernel Image
     Compression:  gzip compressed
     Data Start:   0x440000e8
     Data Size:    5599108 Bytes = 5.3 MiB
     Architecture: AArch64
     OS:           Linux
     Load Address: 0x41000000
     Entry Point:  0x41000000
     Hash algo:    crc32
     Hash value:   498fead8
     Hash algo:    sha1
     Hash value:   77fc2d898d54e6241736c2f5ad567dcf550ed6dd
   Verifying Hash Integrity ... crc32+ sha1+ OK
## Loading fdt from FIT Image at 44000000 ...
   Using 'config@ac04' configuration
   Trying 'fdt-1' fdt subimage
     Description:  ARM64 OpenWrt redmi_ax6-stock device tree blob
     Type:         Flat Device Tree
     Compression:  uncompressed
     Data Start:   0x445571ac
     Data Size:    49003 Bytes = 47.9 KiB
     Architecture: AArch64
     Hash algo:    crc32
     Hash value:   7aca8bd9
     Hash algo:    sha1
     Hash value:   f9759b7825963dbbd670ab22d1b7be2e8c778124
   Verifying Hash Integrity ... crc32+ sha1+ OK
   Booting using the fdt blob at 0x445571ac
   Uncompressing Kernel Image ... OK
   Loading Device Tree to 4a3f1000, end 4a3fff6a ... OK
Using machid 0x8010010 from environment

Starting kernel ...

Jumping to AARCH64 kernel via monitor

</code></pre>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.004861111111111111" data-date-updated="2026-02-06 13:44">2026-02-06 13:37</span>&nbsp;
<a href="https://www.cnblogs.com/sollong">ä¹æ¥ä¸è§</a>&nbsp;
éè¯»(<span id="post_view_count">37</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19584026);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19584026', targetLink: 'https://www.cnblogs.com/sollong/p/19584026', title: 'Redmi AX6 TTL æç è®°å½' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
        </channel>
        </rss>