<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åå®¢å­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2026-02-05T13:15:28.837Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åå®¢å­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ 32å²ç¨åºåçæ­»ï¼è®©ææ³èµ·äºææ¾ç»çå ç­ç»åï¼åºå¹¸èªå·±è¿æ´»ç ]]></title>
    <link>https://www.cnblogs.com/StephenYoung/p/19539895</link>
    <guid>b8817eabc4fef9e18ae7cea2adac05f6</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/StephenYoung/p/19539895" title="åå¸äº 2026-02-05 20:41">
    <span role="heading" aria-level="2">32å²ç¨åºåçæ­»ï¼è®©ææ³èµ·äºææ¾ç»çå ç­ç»åï¼åºå¹¸èªå·±è¿æ´»ç</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>æè¿ï¼çå°32å²ç¨åºåçæ­»çæ°é»å·çå¨ç½ã</p>
<p>æç¬é´æ³èµ·äºèªå·±æ¾ç»çå ç­ç»åï¼å¿åºåªå©ä¸å¥åºå¹¸ââè¿å¥½ï¼æè¿æ´»çã</p>
<p>æ¾ç»ï¼æè´è´£å¨çèåAå®¢æ·çé¡¹ç®è®¾å¤è½¯ä»¶å¼åï¼é£æ®µæ¶é´å¸¸å¹´è¾è½¬äºå½ååå¤§ä»£å·¥åï¼èæ­¥ä»æªåæ­ãæé¾å¿çä¸æ¬¡ï¼æ¯è¿ç»­å ç­æ´æ´90å¤©ï¼è¿ä¸ä¸ªæéï¼æå ä¹è¿è½´è½¬ãæ ä¸å¤©ä¼æ¯ï¼å¶ä¸­è¿æå¥½å å¤©ç¬äºéå®µãå ä¸ºå·¥åæ¯24å°æ¶çï¼è®¾å¤æ¯24å°æ¶çãæ°äº§åè¯äº§ï¼ä»»ä½ä¸ä¸ªç¯èçä»»ä½ä¸ä¸ªå°é®é¢ï¼é½æ¯å¤§é®é¢ãå¿é¡»éè§ï¼å¿é¡»è§£å³ãå¯¹äºè´¨éçææ§ï¼è¿ä¹åæï¼å¦åï¼è¿å®¶Aå®¢æ·çäº§åä¹ä¸å¯è½ç¬æ­¥å¨çäºã</p>
<p>å°è±¡ææ·±çä¸æ¬¡ï¼å¤´å¤©æ©ä¸7ç¹åæ¶èµ·åºï¼ååæ´æ¼±åå°±é»è¿å·¥åè½¦é´æå¥å·¥ä½ï¼ç´å°ç¬¬äºå¤©ä¸åå«ä¹ç¹ï¼ææççäºéä¼¼çèº«ä½èµ°åºååºãæ¬ä»¥ä¸ºè½ç­ææ­å£æ°ãç¯ä¸ä¸ä¼å¿ï¼å¯å½å¤©ä¸å3ç¹ï¼ä¸ä¸ªç´§æ¥çµè¯çªç¶ææ¥ï¼æåä¸å¾ä¸æèµ·ç²¾ç¥ï¼é£é£ç«ç«å°åæ¬¡å²è¿è½¦é´ï¼æå¥å°è®¾å¤è°è¯ä¸­ã</p>
<p>è½¦é´éè°è¯ä»£ç ï¼å¿é¡»ç«çæä½çµèï¼æå¹³åä¸å¤©ç«ç«è¶è¿10å°æ¶ï¼ä¸ç­ååèè¿å¾è¿éå­é½é¾è±ä¸ãä¸æ®µæ¶é´åï¼çç®ä¹ç¯äºï¼å½¼æ¶åºå·®å¨éçåå¸ï¼æåªè½ç¬èªæ½2ä¸ªå°æ¶å»éè¿å»é¢æ¿è¯ï¼å³ä¾¿é¡¶çç¼çï¼ç¬¬äºå¤©ä¾æ§è¦ç«çè°è¯ä»£ç ãå½æ¶æåªæä¸ä¸ªå¿µå¤´ï¼å¿å®è¿éµï¼ä¸å®è¦æ¢ä¸ªç¯å¢ï¼å«ççæ²¡å½æ£é±ãæ²¡å½è±ã</p>
<p>åææåæ ·æåçï¼è¿ææä»¬å¨åä¸ä¸ªé¡¹ç®ç»çåä½ååçä¸ä¸ªHå¥ä»¬å¿ï¼Hå¥åæåé¾ï¼åªæ¯äººå®¶æ­£ç»985æ¯ä¸çï¼èæä¸æ¯ãHå¥ä¹æ¾å¤æ¬¡è·ææ±æ¨ï¼âçä¸æ³åAå®¢æ·çé¡¹ç®äºï¼å¤ªç´¯äºï¼åä¸æ¶ãæ¯å¤©è¿é¥­é½ä¸è½ææ¶åä¸ï¼æè¿é½é¥¿å¾èç¼ãè·å®¢æ·å¼ä¼æ¯è±æï¼æå¿é¡»åé¥±äºæè½å¬æèå¤è¯´è¯âãç¡®å®ï¼å¯å¸¸å¸¸å°ä¸åä¸å«ç¹å ä¸ºå®¢æ·è¿å¨è·æä»¬å¼ä¼ï¼æècheckæä»¬çé¡¹ç®è¿åº¦ï¼å®æå·¥ä½ä»»å¡ãç»å¸¸é½æ¯æ²¡åæé¥­ï¼é£ä¼å¿èå­åæµï¼å«è¯´å¬è±è¯­äºï¼æè¿æ±è¯­é½å¬ä¸æäºãæåç­Hå¥è¯´ï¼ååï¼ä½ è¿æ¯çµæ± æ²¡çµäºåï¼å½ç¶å¬ä¸æäºãææçµä¹å¬ä¸å¤ªæå¤å°ãç¡®å®ï¼ç°å¨æä¹æ¯ä¹é¥¿å¾ä¸è¡ï¼è¿ç»éé¿ä¹ä¹è®¡åã</p>
<p>æç¶ï¼é¡¹ç®çä¸ä¸ä¸ªé¶æ®µå¼å§æ¶ï¼ææ²¡åè§å°ä»çèº«å½±ï¼å¾®ä¿¡è¯¢é®åæå¾ç¥ï¼ä»ç³è¯·è°å°äºå¶ä»é¡¹ç®ï¼ä¸ç¨åé¥¿èå­å ç­äºï¼ååãå¶å°çå ç­ä¹è½æ¥åï¼è¯­æ°éæ»¡æ¯ä¹è¿çææ°ä¸å¹³åã</p>
<p>åå¹´åï¼æä¹æä½ä¸æ¬¡å¶ç¶çæºä¼ç¦»èï¼ç¦»å¼äºåä¸å®¶ï¼å½»åºåå«äºAå®¢æ·çé¡¹ç®ï¼ä¸ç¨åå¿åé¥¿èå­ãè¿è½´è½¬çå ç­æ¥å­ã</p>
<p>å¦ä»åæ³é£æ®µæ¥å­ï¼ä¾æ§å¿æä½æ¸ã</p>
<p>æå¹ï¼é£äºæ²¡æ¥æ²¡å¤çå ç­ãèº«ä½æ¿åççè¦ï¼é½æäºé¾å¿çè¿å¾ãå·¥ä½æ¯çæ´»çä¸é¨åï¼æ£é±æ¯ä¸ºäºæ»å»çæ´»ï¼èéæ¶èçæ´»ãå ç­æè®¸æ æ³å®å¨é¿åï¼æ£é±ä¹ä¾ç¶æ¯æä»¬åè¡çå¨åï¼ä½æä»¬ä¸è½è¢«è¿ä»½æ§å¿µè£¹æï¼å¿½ç¥äºçæ´»è´¨éï¼éæ¯äºèº«ä½å¥åº·ã</p>
<p>çæ­£çæçï¼ä»æ¥ä¸æ¯ä¸å³æ¼å½å ç­ãç²ç®æ£é±ï¼èæ¯æå¾å¹³è¡¡å ç­ä¸çæ´»ï¼å¼é¡¾æ£é±ä¸å¥åº·ãå·¥ä½åéè¦ï¼ä¹ä¸è½æ¿ä»£ä¸é¤åå­£çå®ç¨³ï¼èªèµåè¯±äººï¼ä¹ä¸åèº«ä½å¥åº·ççè´µãæ¿æ¯ä¸ä¸ªä¸ºçæ´»å¥æ³¢ãä¸ºæ£é±åªåçäººï¼é½è½å®ä½å¹³è¡¡ï¼ä¸è¾è´å·¥ä½ï¼ä¹ä¸è¾è´èªå·±ï¼ä¸éæ¯å¥åº·ï¼ä¹ä¸æµªè´¹æ¶åââæ¯ç«ï¼è½å¥½å¥½å·¥ä½ãå¥½å¥½çæ´»ãå¥½å¥½æ´»çï¼ææ¯æé¾å¾çå¹¸ç¦ã</p>
<p>ä»å¹´ï¼2026å¹´ï¼æä¾ç¶åºå¹¸èªå·±è¿æ´»çã<br>
<img src="https://img2024.cnblogs.com/blog/2213992/202602/2213992-20260205204048587-607747837.png" alt="å¬ä¼å·å¨æ¼«+å¾®ä¿¡å®æ¹ç " loading="lazy"></p>
<p>æ´å¤ç²¾å½©å³æ³¨å¾®ä¿¡å¬ä¼å·ï¼</p>
<p>è½»æ¾ååºæ¼äº®çLabVIEWçé¢-FlateUI2.0(æºç åäº«)</p>
<p>15å¹´ææ¯äºº+3å¹´åä¸å¤±è´¥èçææï¼å·¥æ§åéï¼ææ¯çè¯è¯­æä¸ºå¥è¿ä¹å¼±ï¼</p>
<p>LabVIEWè®°å½XYè½´è¿å¨è½¨è¿¹å¹¶ç»å¾çç¼ç¨æ¹æ³(æºç éä»¶)</p>
<p>C#éé¾ç¹2ï¼äºä»¶</p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-05 20:42">2026-02-05 20:41</span>&nbsp;
<a href="https://www.cnblogs.com/StephenYoung">Stephen_Young</a>&nbsp;
éè¯»(<span id="post_view_count">14</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19539895);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19539895', targetLink: 'https://www.cnblogs.com/StephenYoung/p/19539895', title: '32å²ç¨åºåçæ­»ï¼è®©ææ³èµ·äºææ¾ç»çå ç­ç»åï¼åºå¹¸èªå·±è¿æ´»ç' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ å©ç¨èªå®ä¹htmlåç´ å®ç°æ¯æå®æ¶ä¿®æ¹çé«äº®ä»£ç å ]]></title>
    <link>https://www.cnblogs.com/Fan-iX/p/-/shadow-dom-code-highlight</link>
    <guid>f10212d7b2727960eaefc30fc8a364c7</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Fan-iX/p/-/shadow-dom-code-highlight" title="åå¸äº 2026-02-05 19:39">
    <span role="heading" aria-level="2">å©ç¨èªå®ä¹htmlåç´ å®ç°æ¯æå®æ¶ä¿®æ¹çé«äº®ä»£ç å</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="å©ç¨èªå®ä¹htmlåç´ å®ç°æ¯æå®æ¶ä¿®æ¹çé«äº®ä»£ç å">å©ç¨èªå®ä¹htmlåç´ å®ç°æ¯æå®æ¶ä¿®æ¹çé«äº®ä»£ç å</h1>
<p>ä»£ç åé«äº®æ¯åç«¯å¼åä¸­å¸¸è§çéæ±ï¼å°¤å¶æ¯å¨å±ç¤ºä»£ç çæ®µçåå®¢ãææ¡£ç­åºæ¯ä¸­ãå¸é¢ä¸æå¾å¤æççä»£ç é«äº®åºï¼æ¯å¦<code>Highlight.js</code>ã<code>Prism.js</code>ç­ï¼å®ä»¬é½è½å¾å¥½å°å®ç°ä»£ç é«äº®åè½ã</p>
<p>éå¸¸çé«äº®ä»£ç åæ¯âéæâçï¼ä¿®æ¹ä»£ç åå®¹åéè¦å¯¹DOMåç´ éæ°åºç¨é«äº®æ ·å¼ãç±äºæ¶åDOMæä½ï¼å¨Vueç­åç«¯æ¡æ¶ä¸­ä½¿ç¨å¿é¡»è°¨æå¤çï¼å¦åä¼åºç°DOMæ åèæDOMä¸ä¸è´çé®é¢ï¼é æå¾å¤éº»ç¦ã</p>
<p>é£ä¹ææ²¡æåæ³è®©ä»£ç é«äº®ä¸æ¹åDOMç»æå¢ï¼ç­æ¡æ¯æçï¼æä»¬å¯ä»¥å©ç¨èªå®ä¹HTMLåç´ åShadow DOMæ¥å®ç°è¿ä¸ç¹ã</p>
<h3 id="shadow-domåèªå®ä¹htmlåç´ ">Shadow DOMåèªå®ä¹HTMLåç´ </h3>
<p>Shadow DOMåè®¸æä»¬åå»ºå°é­çDOMæ ï¼Shadow DOMåå¯ä»¥ä½¿ç¨èªå·±çæ ·å¼ï¼å¹¶å°è£å¤æçé»è¾ï¼èä¸ä¼å½±åå°å¤é¨çDOMç»æãç°ä»£æµè§å¨ç<code>&lt;input&gt;</code>ï¼ç¹å«æ¯<code>&lt;input type="range"&gt;</code>ã<code>&lt;input type="date"&gt;</code>ç­å¤ææ§ä»¶ï¼åç´ å°±æ¯å©ç¨Shadow DOMå®ç°çã</p>
<p>è¦æ³ä½¿ç¨Shadow DOMï¼æä»¬éè¦åå»ºä¸ä¸ªèªå®ä¹HTMLåç´ ï¼å¹¶å¨å¶ä¸­éè¿<code>attachShadow</code>æ¹æ³åå»ºShadow DOMã</p>
<pre><code class="language-js">class MyElement extends HTMLElement {
    constructor() {
        super()
        const shadow = this.attachShadow({ mode: 'open' })
        shadow.innerHTML = `&lt;p&gt;Hello, Shadow DOM!&lt;/p&gt;`
    }
}
customElements.define('my-element', MyElement)
</code></pre>
<p>ä¹åï¼æä»¬å°±å¯ä»¥å¨HTMLä¸­ä½¿ç¨<code>&lt;my-element&gt;&lt;/my-element&gt;</code>æ¥æå¥è¿ä¸ªèªå®ä¹åç´ ã</p>
<pre><code class="language-html">&lt;my-element&gt;&lt;/my-element&gt;
</code></pre>
<p>å¨DevToolsä¸­ï¼æä»¬å¯ä»¥çå°<code>&lt;my-element&gt;</code>çæ¸²æç»æï¼å¶ä¸­åæ¬åç´ åé¨çShadow DOMï¼</p>
<pre><code class="language-html">&lt;my-element&gt;
  #shadow-root (open)
    &lt;p&gt;Hello, Shadow DOM!&lt;/p&gt;
&lt;/my-element&gt;
</code></pre>
<h3 id="å¨èªå®ä¹åç´ ä¸­è·ååå®¹">å¨èªå®ä¹åç´ ä¸­è·ååå®¹</h3>
<p>æä»¬å¸æå¨èªå®ä¹åç´ ä¸­è·åæ ç­¾ä¹é´çåå®¹ãè¿å¯ä»¥éè¿ææ§½ï¼slotï¼æºå¶å®ç°ãææ§½æºå¶åè®¸æä»¬å¨èªå®ä¹åç´ ä¸­å®ä¹å ä½ç¬¦ï¼å¤é¨ä¼ å¥çåå®¹ä¼è¢«æå¥å°è¿äºå ä½ç¬¦ä¸­ã</p>
<p>ä¸ºäºä½¿ç¨ææ§½ï¼æä»¬éè¦å¨Shadow DOMä¸­æ·»å ä¸ä¸ª<code>&lt;slot&gt;</code>åç´ ï¼</p>
<pre><code class="language-js">class MyElement extends HTMLElement {
    constructor() {
        super()
        const shadow = this.attachShadow({ mode: 'open' })
        shadow.innerHTML = `&lt;slot&gt;&lt;/slot&gt;`
        const slot = shadow.querySelector('slot')
        slot.addEventListener('slotchange', this.handleSlotChange.bind(this))
    }
    handleSlotChange(event) {
        const slot = event.target
        console.log('Slot content changed:', slot.assignedNodes({ flatten: true }))
    }
}
customElements.define('my-element', MyElement)
</code></pre>
<p>å¯¹äºHTMLçæ®µ</p>
<pre><code class="language-html">&lt;my-element id="my-el"&gt;&lt;p&gt;This is slotted content.&lt;/p&gt;&lt;/my-element&gt;
</code></pre>
<p>å½é¡µé¢ç¬¬ä¸æ¬¡å è½½æ¶ï¼æ§å¶å°ä¼æ¾ç¤º</p>
<pre><code>Slot content changed:&nbsp;[p]
</code></pre>
<p>å¶ä¸­<code>p</code>å°±æ¯åç´ åé¨ç<code>&lt;p&gt;</code>èç¹ã</p>
<p>å¦ææä»¬å¨æä¿®æ¹<code>&lt;my-element&gt;</code>åçåå®¹ï¼æ¯å¦éè¿JavaScriptï¼</p>
<pre><code class="language-js">document.getElementById('my-el').innerHTML = '&lt;pre&gt;New slotted content1.&lt;/pre&gt;&lt;pre&gt;New slotted content2.&lt;/pre&gt;'
</code></pre>
<p>æ§å¶å°ä¼æ¾ç¤º</p>
<pre><code>Slot content changed: (2)&nbsp;[pre, pre]
</code></pre>
<p>ä¸¤ä¸ª<code>pre</code>èç¹å°±æ¯æä»¬æ°ä¿®æ¹çåå®¹ã</p>
<p>éè¿è¿ç§æ¹æ³ï¼æä»¬å¯ä»¥å¨èªå®ä¹åç´ ä¸­å®æ¶è·ååå®¹çååã</p>
<h3 id="å©ç¨èªå®ä¹åç´ å®ç°é«äº®ä»£ç å">å©ç¨èªå®ä¹åç´ å®ç°é«äº®ä»£ç å</h3>
<p>ç»ååé¢çåå®¹ï¼æä»¬å¯ä»¥åå»ºä¸ä¸ªèªå®ä¹åç´ <code>&lt;pre-highlight&gt;</code>ï¼ç¨äºå®ç°é«äº®ä»£ç åçåè½ãåªéè¦çå¬ææ§½åå®¹çååï¼å°åå®¹ä¼ éç»é«äº®åºè¿è¡å¤çï¼ç¶åå°å¤çåçç»ææ¾ç¤ºåºæ¥å³å¯ã</p>
<pre><code class="language-js">class PreHighlightElement extends HTMLElement {
    constructor() {
        super()
        const shadow = this.attachShadow({ mode: 'open' })
        shadow.innerHTML = `
&lt;link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets/styles/github.min.css"&gt;
&lt;pre id="code"&gt;&lt;/pre&gt;
&lt;pre hidden&gt;&lt;slot&gt;&lt;/slot&gt;&lt;/pre&gt;
`
        this.__code = this.shadowRoot.querySelector('#code')
        this.__slot = this.shadowRoot.querySelector('slot')
        this.__slot.addEventListener('slotchange', this.highlightContent.bind(this))
    }

    highlightContent() {
        if (typeof hljs === 'undefined') return

        let text = this.__slot.assignedNodes({ flatten: true }).map(n =&gt; n.textContent).join("")
        const code = document.createElement('code')

        const result = hljs.highlightAuto(text)
        code.innerHTML = result.value
        if (result.language) code.classList.add(`language-${result.language}`)
        this.__code.replaceChildren(code)
    }
}

customElements.define('pre-highlight', PreHighlightElement)
</code></pre>
<p>ä½¿ç¨æ¹æ³ï¼</p>
<pre><code class="language-html">&lt;pre-highlight id="my-el"&gt;
function helloWorld() {
    console.log("Hello, world!")
}
&lt;/pre-highlight&gt;
</code></pre>
<p>æ¸²æç»æä¸º</p>
<pre><code class="language-html">&lt;pre-highlight id="my-el"&gt;
  #shadow-root (open)
    &lt;link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets/styles/github.min.css"&gt;
    &lt;pre id="code"&gt;
      &lt;code class="language-javascript"&gt;
        &lt;span class="hljs-keyword"&gt;function&lt;/span&gt;
        &lt;span class="hljs-title function_"&gt;helloWorld&lt;/span&gt;
        "("
        &lt;span class="hljs-params"&gt;&lt;/span&gt;)
        "{"
        &lt;span class="hljs-variable language_"&gt;console&lt;/span&gt;
        "."
        &lt;span class="hljs-title function_"&gt;log&lt;/span&gt;
        "("
        &lt;span class="hljs-string"&gt;"Hello, world!"&lt;/span&gt;
        ") }"
      &lt;/code&gt;
    &lt;/pre&gt;
    &lt;pre hidden=""&gt;
      &lt;slot&gt;
        #text
      &lt;/slot&gt;
    &lt;/pre&gt;
  " function helloWorld() { console.log("Hello, world!") } "
&lt;/pre-highlight&gt;
</code></pre>
<p>ä¿®æ¹<code>&lt;pre-highlight&gt;</code>åçåå®¹åï¼é«äº®ææä¼èªå¨æ´æ°ã</p>
<pre><code class="language-js">document.getElementById('my-el').textContent = `void helloWorld(void) {
    printf("Hello, World!");
}`
</code></pre>
<p>æ¸²æç»æä¸º</p>
<pre><code class="language-html">&lt;pre-highlight id="my-el"&gt;
  #shadow-root (open)
    &lt;link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets/styles/github.min.css"&gt;
    &lt;pre id="code"&gt;
      &lt;code class="language-cpp"&gt;
        &lt;span class="hljs-function"&gt;
          &lt;span class="hljs-type"&gt;void&lt;/span&gt;
          &lt;span class="hljs-title"&gt;helloWorld&lt;/span&gt;
          &lt;span class="hljs-params"&gt;
            "("
            &lt;span class="hljs-type"&gt;void&lt;/span&gt;
            ")"
          &lt;/span&gt;
        &lt;/span&gt;
        "{"
        &lt;span class="hljs-built_in"&gt;printf&lt;/span&gt;
        "("
        &lt;span class="hljs-string"&gt;"Hello, World!"&lt;/span&gt;
        "); }"
      &lt;/code&gt;
    &lt;/pre&gt;
    &lt;pre hidden=""&gt;
      &lt;slot&gt;
        #text
      &lt;/slot&gt;
    &lt;/pre&gt;
  "void helloWorld(void) { printf("Hello, World!"); }"
&lt;/pre-highlight&gt;
</code></pre>
<h3 id="ä¸äºæ¹è¿">ä¸äºæ¹è¿</h3>
<p>ä¸ºäºé¿åé«äº®åºå è½½åé«äº®å¤çè¿ç¨ä¸­çéªçï¼æä»¬å¯ä»¥å¨Shadow DOMä¸­ä½¿ç¨ä¸¤ä¸ª<code>&lt;pre&gt;</code>åç´ ï¼ä¸ä¸ªç¨äºæ¾ç¤ºåå§åå®¹ï¼å¦ä¸ä¸ªç¨äºæ¾ç¤ºé«äº®åçåå®¹ãåå§æ¶åªæ¾ç¤ºåå§åå®¹ï¼é«äº®å¤çå®æåååæ¢æ¾ç¤ºã</p>
<p>æ­¤å¤ï¼æä»¬è¿å¯ä»¥æ·»å ä¸ä¸ª<code>lang</code>å±æ§ï¼åè®¸ç¨æ·æå®ä»£ç è¯­è¨ï¼ä»¥æé«é«äº®çåç¡®æ§ã</p>
<p>æç»ç»æå¦ä¸ï¼</p>
<pre><code class="language-js">class PreHighlightElement extends HTMLElement {
    constructor() {
        super()
        const shadow = this.attachShadow({ mode: 'open' })
        shadow.innerHTML = `
&lt;link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets/styles/github.min.css"&gt;
&lt;pre id="raw"&gt;&lt;slot&gt;&lt;/slot&gt;&lt;/pre&gt;
&lt;pre id="cooked" hidden&gt;&lt;/pre&gt;
`
        this.__raw = this.shadowRoot.querySelector('#raw')
        this.__cooked = this.shadowRoot.querySelector('#cooked')
        this.__slot = this.shadowRoot.querySelector('slot')
        this.__slot.addEventListener('slotchange', this.highlightContent.bind(this))
    }

    highlightContent() {
        this.__raw.hidden = false
        this.__cooked.hidden = true
        if (typeof hljs === 'undefined') return

        let text = this.__slot.assignedNodes({ flatten: true }).map(n =&gt; n.textContent).join("")
        const lang = this.getAttribute('lang')
        const code = document.createElement('code')

        if (lang) {
            const result = hljs.highlight(text, { language: lang, ignoreIllegals: true })
            code.innerHTML = result.value
            code.classList.add(`language-${lang}`)
        } else {
            const result = hljs.highlightAuto(text)
            code.innerHTML = result.value
            if (result.language) code.classList.add(`language-${result.language}`)
        }
        this.__cooked.replaceChildren(code)
        this.__raw.hidden = true
        this.__cooked.hidden = false
    }
}

customElements.define('pre-highlight', PreHighlightElement)
</code></pre>
<p>ç¨ä¾ï¼</p>
<pre><code class="language-html">&lt;pre-highlight id="code" lang="html"&gt;&lt;/pre-highlight&gt;
&lt;input type="range" id="input" value="10" /&gt;
&lt;script&gt;
    const input = document.getElementById('input')
    const preHighlight = document.getElementById('code')

    input.oninput = function(e) {
        preHighlight.textContent = `&lt;textarea rows="${this.value}" cols="50"&gt;
    Hello, world!
&lt;/textarea&gt;`
    }
    input.oninput()
&lt;/script&gt;
</code></pre>
<p>å¨è¿ä¸ªä¾å­ä¸­ï¼æä»¬åå»ºäºä¸ä¸ªæ»å¨æ¡ï¼å¯ä»¥å¨æä¿®æ¹<code>&lt;pre-highlight&gt;</code>åçä»£ç åå®¹ï¼åå®¹ä¿®æ¹åä¼å®æ¶æ¾ç¤ºé«äº®ææã</p>
<h3 id="å¨vueä¸­ä½¿ç¨pre-highlight">å¨Vueä¸­ä½¿ç¨<code>&lt;pre-highlight&gt;</code></h3>
<p>éè¿èªå®ä¹åç´ çæ¹æ³ï¼æä»¬å¯ä»¥è½»æ¾å°å¨Vueé¡¹ç®ä¸­ä½¿ç¨é«äº®ä»£ç åï¼èæ éæå¿DOMåèæDOMçä¸ä¸è´é®é¢ã</p>
<p>ä¸ºäºé¿åèªå®ä¹åç´ åVueç»ä»¶åå²çªï¼æä»¬éè¦å¨éç½®ä¸­å¶å®<code>isCustomElement</code>éé¡¹ï¼</p>
<pre><code class="language-js">// vite.config.js
export default defineConfig({
  plugins: [
    vue({
      template: {
        compilerOptions: {
          // å°ææå«"-"çæ ç­¾è§ä¸ºèªå®ä¹åç´ 
          // Vue3ä¸­éå¸¸ä½¿ç¨å¸æ¯å¡å½åæ³ï¼åè¯é¦å­æ¯å¤§åï¼ä½ä¸ºç»ä»¶æ ç­¾
          isCustomElement: (tag) =&gt; tag.includes('-')
        }
      }
    })
  ]
})
</code></pre>
<p>ä¹åå°±å¯ä»¥å¨ç»ä»¶æé¡µé¢ä¸­ç´æ¥ä½¿ç¨<code>&lt;pre-highlight&gt;</code>åç´ ï¼åé¨å¯ä»¥ä½¿ç¨Vueçæ°æ®ç»å®èä¸ç¨æå¿èæDOMå²çªçé®é¢ï¼</p>
<pre><code class="language-html">&lt;template&gt;
    &lt;pre-highlight lang="javascript"&gt;
function greet({{arg}}) {
    console.log("Hello, " + {{arg}} + "!")
}
    &lt;/pre-highlight&gt;
&lt;/template&gt;
</code></pre>
<h3 id="éå®æ´çåé¡µhtmlæ¼ç¤ºä»£ç ">éï¼å®æ´çåé¡µhtmlæ¼ç¤ºä»£ç </h3>
<details>
<summary>åçhtml</summary>
<pre><code class="language-html">&lt;html&gt;

&lt;head&gt;
    &lt;script src="https://unpkg.com/@highlightjs/cdn-assets/highlight.min.js"&gt;&lt;/script&gt;
    &lt;script&gt;
        class PreHighlightElement extends HTMLElement {
            constructor() {
                super()
                const shadow = this.attachShadow({ mode: 'open' })
                shadow.innerHTML = `
&lt;link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets/styles/github.min.css"&gt;
&lt;pre id="raw"&gt;&lt;slot&gt;&lt;/slot&gt;&lt;/pre&gt;
&lt;pre id="cooked" hidden&gt;&lt;/pre&gt;
`
                this.__raw = this.shadowRoot.querySelector('#raw')
                this.__cooked = this.shadowRoot.querySelector('#cooked')
                this.__slot = this.shadowRoot.querySelector('slot')
                this.__slot.addEventListener('slotchange', this.highlightContent.bind(this))
            }

            highlightContent() {
                this.__raw.hidden = false
                this.__cooked.hidden = true
                if (typeof hljs === 'undefined') return

                let text = this.__slot.assignedNodes({ flatten: true }).map(n =&gt; n.textContent).join("")
                const lang = this.getAttribute('lang')
                const code = document.createElement('code')

                if (lang) {
                    const result = hljs.highlight(text, { language: lang, ignoreIllegals: true })
                    code.innerHTML = result.value
                    code.classList.add(`language-${lang}`)
                } else {
                    const result = hljs.highlightAuto(text)
                    code.innerHTML = result.value
                    if (result.language) code.classList.add(`language-${result.language}`)
                }
                this.__cooked.replaceChildren(code)
                this.__raw.hidden = true
                this.__cooked.hidden = false
            }
        }

        customElements.define('pre-highlight', PreHighlightElement)
    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;pre-highlight id="code" lang="html"&gt;&lt;/pre-highlight&gt;
    &lt;input type="range" id="input" value="10" /&gt;
    &lt;script&gt;
        const input = document.getElementById('input')
        const preHighlight = document.getElementById('code')

        input.oninput = function (e) {
            preHighlight.textContent = `&lt;textarea rows="${this.value}" cols="50"&gt;
    Hello, world!
&lt;/textarea&gt;`
        }
        input.oninput()
    &lt;/script&gt;
&lt;/body&gt;

&lt;/html&gt;
</code></pre>
</details>
<details>
<summary>ä½¿ç¨Vue</summary>
<pre><code class="language-html">&lt;html&gt;

&lt;head&gt;
    &lt;script src="https://unpkg.com/vue@3/dist/vue.global.js"&gt;&lt;/script&gt;
    &lt;script src="https://unpkg.com/@highlightjs/cdn-assets/highlight.min.js"&gt;&lt;/script&gt;
    &lt;script&gt;
        class PreHighlightElement extends HTMLElement {
            constructor() {
                super()
                const shadow = this.attachShadow({ mode: 'open' })
                shadow.innerHTML = `
&lt;link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets/styles/github.min.css"&gt;
&lt;pre id="raw"&gt;&lt;slot&gt;&lt;/slot&gt;&lt;/pre&gt;
&lt;pre id="cooked" hidden&gt;&lt;/pre&gt;
`
                this.__raw = this.shadowRoot.querySelector('#raw')
                this.__cooked = this.shadowRoot.querySelector('#cooked')
                this.__slot = this.shadowRoot.querySelector('slot')
                this.__slot.addEventListener('slotchange', this.highlightContent.bind(this))
            }

            highlightContent() {
                this.__raw.hidden = false
                this.__cooked.hidden = true
                if (typeof hljs === 'undefined') return

                let text = this.__slot.assignedNodes({ flatten: true }).map(n =&gt; n.textContent).join("")
                const lang = this.getAttribute('lang')
                const code = document.createElement('code')

                if (lang) {
                    const result = hljs.highlight(text, { language: lang, ignoreIllegals: true })
                    code.innerHTML = result.value
                    code.classList.add(`language-${lang}`)
                } else {
                    const result = hljs.highlightAuto(text)
                    code.innerHTML = result.value
                    if (result.language) code.classList.add(`language-${result.language}`)
                }
                this.__cooked.replaceChildren(code)
                this.__raw.hidden = true
                this.__cooked.hidden = false
            }
        }

        customElements.define('pre-highlight', PreHighlightElement)
    &lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;div id="app"&gt;&lt;/div&gt;
    &lt;script&gt;
        const { createApp, ref } = Vue
        let app = createApp({
            data() {
                return { a: ref(10) }
            },
            template: `&lt;pre-highlight id="code" lang="javascript"&gt;let a = \{\{a\}\}&lt;/pre-highlight&gt;
            &lt;input type="range" v-model="a" /&gt;`
        })
        app.config.compilerOptions.isCustomElement = (tag) =&gt; tag.includes('-')
        app.mount('#app')
    &lt;/script&gt;
&lt;/body&gt;

&lt;/html&gt;
</code></pre>
</details>
<p>æ¸²æææï¼</p>
<p><img alt="å¨ç»" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3748561/202602/3748561-20260205193714336-1370494181.gif" class="lazyload"></p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.0006944444444444445" data-date-updated="2026-02-05 19:40">2026-02-05 19:39</span>&nbsp;
<a href="https://www.cnblogs.com/Fan-iX">Fan-iX</a>&nbsp;
éè¯»(<span id="post_view_count">32</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19545988);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19545988', targetLink: 'https://www.cnblogs.com/Fan-iX/p/-/shadow-dom-code-highlight', title: 'å©ç¨èªå®ä¹htmlåç´ å®ç°æ¯æå®æ¶ä¿®æ¹çé«äº®ä»£ç å' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ [å¤§æ¨¡åå®æ 03] æè§£ Transformersï¼ä»åçå¾è§£å° HuggingFace Transformers å®æ ]]></title>
    <link>https://www.cnblogs.com/algieba/p/19581327</link>
    <guid>4bb968309d4e1032f73320d4a92e7515</guid>
    <description>
    <![CDATA[ 
		<div class="postcontent">
			    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/3169973/202602/3169973-20260205193318638-616281954.png" alt="[å¤§æ¨¡åå®æ 03] æè§£ Transformersï¼ä»åçå¾è§£å° HuggingFace Transformers å®æ" class="desc_img">
        ä¼è·ä»£ç è¿ä¸å¤ï¼æä»¬è¦æåçãæ¬æä» Transformer çåºå±è§è§åºåï¼å¾è§£ä»ä½ç½®ç¼ç å°æ³¨æåæºå¶çå¨æµç¨ï¼å¹¶åºäº Kaggle å¹³å°ï¼æ·±å¥æè§£ HuggingFace Transformers åºçâéä¸è§âç»ä»¶ä¸çæåæ°ççæºã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="å¤§æ¨¡åå®æ-03-æè§£-transformersä»åçå¾è§£å°-huggingface-transformers-å®æ">[å¤§æ¨¡åå®æ 03] æè§£ Transformersï¼ä»åçå¾è§£å° HuggingFace Transformers å®æ</h1>
<blockquote>
<p><strong>æ ¸å¿æè¦ (TL;DR)</strong></p>
<ul>
<li><strong>åç</strong>ï¼å¾è§£ Transformer æ¯å¦ä½éè¿âæ³¨æåæºå¶âåâä½ç½®ç¼ç âæ¥çè§£äººç±»è¯­è¨çã</li>
<li><strong>å®æ</strong>ï¼å¨ <strong>Kaggle (å T4 GPU)</strong> ç¯å¢ä¸ï¼æè§£ HuggingFace ä»£ç çâéä¸è§âï¼Config, Tokenizer, Modelï¼ã</li>
<li><strong>æå·§</strong>ï¼ææ¡ <code>Temperature</code> å <code>Top_p</code>ï¼å­¦ä¼æ§å¶ AI çâåé åâã</li>
</ul>
</blockquote>
<h2 id="åè¨">åè¨</h2>
<p>åä½åäººä»¬ï¼å¤§å®¶å¥½ï¼è¿éæ¯é¿å°ãå¨ä¸ä¸èçâç¼ä¸¹âç¯å¢æ­å»ºä¸­ï¼å±ä»¬æåå°å°Qwen2.5æ¨¡åè¿è¡äºèµ·æ¥ï¼è·éäºã ä½æ¯ç¸ä¿¡å¤§å®¶å¯¹è¿è¡çæ¶åçé£äºåæ°é½ä»£è¡¨çä»ä¹ï¼é½è¿æ¯æµçã è¿ç¯åå®¢å°±æ¯ä¸ºæ­¤åå¤çï¼æä»¬æç®åå¿«éå¤§æ¦å°äºè§£ä¸ä¸å½åçå¤§æ¨¡åçåºå±åçï¼åç»åå¨ä¸èµ·ä»ç»éç¨çtransformersåº, å»ççä»£ç åå¦ä½å¯¹åºè¿äºçè®ºçã</p>
<h2 id="1-transformer-æç®åçå¤§æ¨¡åæ¯æä¹æèç">1. Transformer æç®åçï¼å¤§æ¨¡åæ¯æä¹æèçï¼</h2>
<p>å¤§æ¨¡ååæ®éçæºå¨å­¦ä¹ æ¨¡åä¸æ ·ï¼æ¬è´¨ä¹æ¯ä¸ä¸ªå½æ°ï¼ä¸åçæ¯ï¼ä¼ ç»æºå¨å­¦ä¹ å¯è½è¾å¥çæ¯ä¸äºæ´çå¥½çæ°æ®ï¼æ¯å¦æ¿å­çå°ºå¯¸ï¼å°æ®µï¼è´­ä¹°æ¶é¿ï¼åå¸ä¸­å¿çè·ç¦»ç­ç­æ°æ®ï¼è¾åºä¸ä¸ªé¢æµçæ¾åï¼èå¤§æ¨¡åè¾å¥çæ¯æä»¬çé®é¢ï¼æ¿å°çæ¯å¤§æ¨¡åç»åºçåç­ãä½ï¼å±ä»¬ç©¶å¶æ ¹æ¬ï¼å®ä»¬é½å¯ä»¥çä½æ¯ä¸ä¸ªå½æ°ï¼æä»¬è¾å¥ä¸äºä¸è¥¿ï¼ç»è¿è¿ç®ä¹åï¼è¾åºç»æä»¬ä¸äºä¸è¥¿ã</p>
<p>å¯¹äºå¤§æ¨¡åï¼å®çæ¬è´¨å°±æ¯ä¸ä¸ª<strong>ä¸ä¸ä¸ªå­ç¬¦é¢æµå¨</strong>ï¼æä»¬è¾å¥ä¸äºæå­ï¼å®åªè´è´£æ ¹æ®å®æè®­ç»çæµ·éæ°æ®ï¼è¾åºæç¬¦åï¼ææå¯è½çä¸ä¸ä¸ªå­ç¬¦ï¼å°±åä¸ä¸ª<strong>æå­æ¥é¾æºå¨</strong>ï¼å¶æ ¸å¿ä»»å¡åªæä¸ä¸ªï¼<strong>æ ¹æ®ä¸æï¼çä¸ä¸ä¸ªå­æ¯ä»ä¹ã</strong></p>
<p>ä¸ºäºå®ç°è¿ä¸ªç®æ ï¼Transformer æ¶æç»åäºä¸ä¸ªç²¾å¯çæµæ°´çº¿ï¼<br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm03-know-more-about-transformer-lib/01_cover.png" alt="åå«Transformerç5ä¸ªæ­¥éª¤çæ»è§å¾" loading="lazy"><br>
ä¸é¢ï¼æä»¬ä¼ç¨å¾®è¯¦ç»ä¸ç¹å°ä»ç»ä¸ä¸åä¸ªæ­¥éª¤ã</p>
<h3 id="11-ç¬¬ä¸æ­¥token-å-tokenization--æ¥å­å¸">1.1 ç¬¬ä¸æ­¥ï¼Token å (Tokenization) ââ æ¥å­å¸</h3>
<p>å¤§æ¨¡åæ¢ç¶æ¯ä¸ä¸ªå½æ°ï¼é£ä¹è¯å®æ¯éå¯¹æ°å­è¿è¡å¤ççï¼æä»¥ï¼æä»¬å°±éè¦ä¸ä¸ªæ³å­ï¼å»å°æä»¬çæå­å­ç¬¦ï¼çè³æ¯å¾çï¼åæå¤§æ¨¡åè®¤è¯çæ°å­ï¼æèè¯´å¼ éï¼åéï¼ã è¿å°±æ¯Tokenåï¼å»åè¿ä¸æ­¥æä½çå½æ°ï¼æèæ¨¡åå°±æ¯<strong>åè¯å¨ï¼Tokenizerï¼</strong>ã</p>
<p>é£ä¹<strong>Tokenizer</strong>å·ä½æ¯å¦ä½å·¥ä½çï¼å®å®éä¸å°±æ¯å°ä¸ä¸ªä¸ªçå­ç¬¦ï¼å¯¹åºæä¸ä¸ªä¸ªæ°å­ï¼æèè¯´IDï¼å°±åASCIIç ä¸æ ·ï¼ä¸è¿å®åå¾æ´é«çº§ã</p>
<p>ææ¯ä¸ä¸ªå­é½æ¾ä¸ä¸ªæ°å­å¯¹åºï¼æç¹å¥¢ä¾ï¼ç¹å«æ¯å¯¹äºè±è¯­,act, acting,action,actorå¶å®é½æç¸åçè¯æ ¹ï¼ä¸»è¦çè¯­ä¹æ¥æºäºå¶è¯æ ¹actï¼æä»¥åè¯å¨æ¯æç§è¯åï¼tokenï¼å»æåçï¼è½ææäºè¯ææè¯æ ¹ãåç¼ååç¼ç­ç­ï¼å½ç¶å·ä½å¦ä½æï¼åå³äºå­å¸å¦ä½å®ä¹ï¼å­å¸æå¤å¤§ã</p>
<p>è¿éæä»¬ç»ä¸ä¸ªç®åçä¾å­</p>
<ul>
<li><strong>è¾å¥</strong>ï¼âæç± AIâ</li>
<li><strong>å¨ä½</strong>ï¼åå -&gt; <code>["æ", "ç±", "AI"]</code> -&gt; æ¥è¡¨ -&gt; <code>[2301, 452, 1083]</code><br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm03-know-more-about-transformer-lib/1.1_tokenization.png" alt="Tokenåçç¤ºæå¾" loading="lazy"></li>
</ul>
<h3 id="12-ç¬¬äºæ­¥embedding--ä½ç½®ç¼ç --èµäºå«ä¹ä¸é¡ºåº">1.2 ç¬¬äºæ­¥ï¼Embedding &amp; ä½ç½®ç¼ç  ââ èµäºå«ä¹ä¸é¡ºåº</h3>
<p>æäºtokenä¹åï¼æä»¬æ³ç¥éè¯åè¯çå³ç³»ï¼æä»¬æ³è¦éè¿ä¸ä¸ªå¯ä»¥éåçéå»å¤æ­ä¸¤ä¸ªè¯æ¯å¦æ¯æå³ç³»çï¼å³ç³»å¤å¤§ãè¿å°±å¼å¥äºæä»¬çä¸ä¸ä¸ªæ¨¡åï¼è¯åµå¥æ¨¡åï¼Embeddingï¼ã</p>
<ul>
<li><strong>Embedding (è¯åé)</strong>ï¼ææ¯ä¸ª ID åæä¸ä¸ªé¿é¿çåéï¼æ¯å¦ 4096 ç»´çæ°ç»ï¼ãè¿ä¸ªåéå¨æ¨¡åè®­ç»ä¹åæ¯éæºçï¼å¶åéçæµ·éçè®­ç»æ°æ®æ´ç¤¼ï¼è¶ç¸å³çè¯åéè¶é è¿ï¼è¶ä¸ç¸å³çè¯è¶è¿ç¦»ãè¿ä¸ªåéä»£è¡¨äºè¯ç<strong>å«ä¹</strong>ãæ¯å¦âç«âåâçâçåéå¨ç©ºé´éè·ç¦»å¾è¿ï¼âè¹æâåâææºâå¨æç§è¯­å¢ä¸ä¹æ´è¿ã</li>
</ul>
<p>åç¥éè¯åè¯çå³ç³»è¿ä¸å¤ï¼âæç±ä½ âåâä½ ç±æâçæ¯ä¸ä¸ªè¯é½æ¯ç¸åçï¼ä½æ¯å®ä»¬ç¡®å®å¯ä»¥ä¸ç¸å³çä¸¤ä¸ªå¥å­ï¼âå°çå¬äºæâåâæå¬äºå°çâï¼ä¹ä¼è¢«äººè§ä½âå¯ä»¥æ­£å¸¸çè§£âåâè¿äººå¥½åä¸å¯¹å²âä¸¤ç§å®å¨ä¸åççè§£ãæ¾èæè§ï¼è¯è¯­å¨å¥ä¸­çä½ç½®æ¯ä¸ä¸ªéå¸¸éè¦çä¿¡æ¯ï¼æä»¬ä¸è½å¼ä¸¢å®ï¼ä¹éè¦å°è¿ä¸é¨åä¿¡æ¯ä¼ éç»æ¨¡åè®­ç»æ¶åå»å­¦ä¹ ã</p>
<ul>
<li><strong>Positional Encoding (ä½ç½®ç¼ç )</strong>ï¼Transformer æ¯å¹¶è¡è®¡ç®çï¼å®ä¸ç¼çå®ææè¯ï¼ï¼è¿å¯¼è´å®ä¸ç¥éâæç±ä½ âåâä½ ç±æâçåºå«ãæä»¥ï¼æä»¬éè¦ç»æ¯ä¸ªè¯è´´ä¸ä¸ä¸ªâåº§ä½å·âï¼åè¯æ¨¡åè°å¨åé¢ï¼è°å¨åé¢ã<br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm03-know-more-about-transformer-lib/1.2_ebedding.png" alt="Embedding &amp; ä½ç½®ç¼ç  ââ èµäºå«ä¹ä¸é¡ºåºç¤ºæå¾" loading="lazy"></li>
</ul>
<h3 id="13-ç¬¬ä¸æ­¥self-attention-èªæ³¨æå--å¯»æ¾å³ç³»">1.3 ç¬¬ä¸æ­¥ï¼Self-Attention (èªæ³¨æå) ââ å¯»æ¾å³ç³»</h3>
<p>æ¥ä¸æ¥å°±æ¯å¤§æ¨¡åççµé­ï¼æä»¬æ³ç¥éä¸å¥è¯éçæ¯ä¸ä¸ªè¯ååå¶ä»è¯åç<strong>å³èåº¦</strong>ï¼å¶å®å°±æ¯ä¸ä¸æçèç³»ãå½æ¨¡åå¤çâè¹æâè¿ä¸ªè¯æ¶ï¼å¦æä¸ä¸æéæâææºâãâåå¸ä¼âï¼æ³¨æåæºå¶ä¼åè¯æ¨¡åï¼âå¿ï¼è¿éçâè¹æâæçæ¯ç§æå¬å¸ï¼ä¸æ¯æ°´æï¼â,èªæ³¨æåæºå¶ï¼è®©æ¨¡åè½çè§£ä¸ä¸æã<br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm03-know-more-about-transformer-lib/1.3-self-attention.png" alt="Self-Attention ç¤ºæå¾" loading="lazy"></p>
<h3 id="14-ç¬¬åæ­¥mlp-åé¦ç¥ç»ç½ç»--æ¶åå¸æ¶">1.4 ç¬¬åæ­¥ï¼MLP (åé¦ç¥ç»ç½ç») ââ æ¶åå¸æ¶</h3>
<p>å¦æè¯´æ³¨æåæºå¶æ¯âçâï¼é£ä¹ MLP å°±æ¯âæ³âãå®åå«å¤å±ç¥ç»åï¼è´è´£å¯¹æåå°çä¿¡æ¯è¿è¡å¤æçéçº¿æ§åæ¢åé»è¾æ¨ç,ä¹å°±æ¯ä¼ ç»çæ·±åº¦å­¦ä¹ ã<br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm03-know-more-about-transformer-lib/1.4-mlp.png" alt="MLP (åé¦ç¥ç»ç½ç»)ç¤ºæå¾" loading="lazy"></p>
<h3 id="15-ç¬¬äºæ­¥decoder--softmax--è¾åºæ¦ç">1.5 ç¬¬äºæ­¥ï¼Decoder &amp; Softmax ââ è¾åºæ¦ç</h3>
<p>ç»è¿å±å±è®¡ç®ï¼æ¨¡åæç»ä¼è¾åºä¸ä¸ªåå«äºææè¯æ±ï¼æ¯å¦ 15 ä¸ä¸ªè¯ï¼ç<strong>æ¦çåè¡¨</strong>ã</p>
<ul>
<li><code>AI</code> (80%)</li>
<li><code>å</code> (10%)</li>
<li><code>ç¡</code> (5%)<br>
...<br>
æåï¼æä»¬æ ¹æ®è¿ä¸ªæ¦çåè¡¨ï¼éæ©ä¸ä¸ä¸ªè¯ã<br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm03-know-more-about-transformer-lib/1.5-decoder&amp;softmax.png" alt="è¾åºæ¦ççç¤ºæå¾" loading="lazy"></li>
</ul>
<hr>
<p>è¿å°±æ¯å¤§æ¨¡åè¯è¯­æ¥é¾çåçäºã</p>
<h2 id="2-æè§£æ¨¡åæä»¶å¤¹ä¸è½½ä¸æ¥çå°åºæ¯ä»ä¹">2. æè§£æ¨¡åæä»¶å¤¹ï¼ä¸è½½ä¸æ¥çå°åºæ¯ä»ä¹ï¼</h2>
<p>çè®ºè®²å®äºï¼æä»¬æ¥ççå¨ <strong>Kaggle</strong> çæä»¶ç³»ç»éï¼è¿äºçè®ºåæäºä»ä¹æä»¶ã</p>
<p>å½ä½ ä¸è½½ä¸ä¸ªæ¨¡åï¼ä»¥ Qwen2.5-7B ä¸ºä¾ï¼æ¶ï¼æä»¶å¤¹ç»æå¦ä¸ï¼</p>
<p><img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm03-know-more-about-transformer-lib/safetensor.png" alt="safetensoræ ¼å¼çæä»¶ç»ç»ç¤ºæå¾" loading="lazy"></p>
<h3 id="21-æ ¸å¿æ¶æconfigjson">2.1 æ ¸å¿æ¶æï¼config.json</h3>
<p><strong>config.json</strong>: æ¯å¤§æ¨¡åçèº«ä»½è¯ï¼ä¹å¯ä»¥è¯´æ¯ä½æ£è¡¨ï¼å®å¶ä¸­å°±æ¯çæ­£çæä»¬çæ¨¡åï¼å·ä½ç±åªäºå±ææï¼æ¯ä»ä¹æ¶æç±»åï¼éèå±æå¤æ·±ï¼æ³¨æåå¤´çæ°éæå ä¸ªï¼è¯è¡¨çå¤§å°æ¯å¤å°ãå¯¹äºå¤§æ¨¡åèè¨ï¼å®å°±æ¯æ¨¡åæ¬èº«ï¼ä¹æ¯<strong>éª¨æ¶</strong>ï¼å ä¸ºå¤§æ¨¡åéè¦çæ¯è®­ç»å®çåæ°ï¼æ¨¡åæ¬èº«æ¯å¾å°çã<br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm03-know-more-about-transformer-lib/config.json.png" alt="config.jsonçç¤ºæå¾" loading="lazy"></p>
<h3 id="22-è¡ä¸ºé¢è®¾generation_configjson">2.2 è¡ä¸ºé¢è®¾ï¼generation_config.json</h3>
<p><strong>generation_config.json</strong>:æ¯æ¨¡åçåºåé»è®¤è®¾ç½®ã<br>
<img src="https://cdn.jsdelivr.net/gh/Algieba-dean/BlogImgs@master/blog-images/test_blog/llm03-know-more-about-transformer-lib/generation_config_.png" alt="generation_configçç¤ºæå¾" loading="lazy"></p>
<h3 id="23-å¤§èæ¬èº«safetensorsåindexjson">2.3 å¤§èæ¬èº«ï¼*.safetensorså*.index.json</h3>
<p>æäºconfig.jsonä¸­çèº¯ä½ï¼æä»¬åä»<em>.safetensorså</em>.index.jsonè½½å¥çµé­ï¼è¿ææ¯æä»¬è½è¯´ä¼éçå¤§æ¨¡åã</p>
<ul>
<li><strong><code>model-xxxxx.safetensors</code></strong>ï¼è¿éé¢å­çæ¯å®æå®ç<strong>å¼ éï¼Tensorï¼æ°æ®</strong>ï¼å³æ°åäº¿ä¸ªåæ°çæµ®ç¹æ°ãä¸ºäºæ¹ä¾¿å­å¨åå è½½ï¼éå¸¸ä¼è¢«ååæå¤ä¸ª 2GB-5GB çå°æä»¶ï¼Shardï¼ã</li>
<li><strong><code>model.safetensors.index.json</code></strong>ï¼è¿æ¯ä¸å¼ <strong>èå®å¾</strong>ãå ä¸ºæéè¢«ååäºï¼æ¨¡åéè¦ç¥éâç¬¬ 5 å±çæéâå°åºèå¨åªä¸ªæä»¶éã
<ul>
<li><strong>åé¨é¿è¿æ ·</strong>ï¼<pre><code class="language-json">{
  "metadata": { "total_size": 15423653888 },
  "weight_map": {
    "model.layers.0.self_attn.q_proj.weight": "model-00001-of-00004.safetensors",
    "model.layers.20.mlp.gate_proj.weight": "model-00003-of-00004.safetensors"
  }
}
</code></pre>
</li>
</ul>
</li>
</ul>
<h3 id="æ°å­åæå­çç¿»è¯å®tokenizerç¸å³æä»¶">æ°å­åæå­çç¿»è¯å®ï¼tokenizerç¸å³æä»¶</h3>
<ul>
<li><strong><code>vocab.json</code> / <code>merges.txt</code></strong>ï¼è¿æ¯æåå§ç<strong>çè¯è¡¨</strong>ãè®°å½äºææå­ãè¯æ ¹å¯¹åºç IDã</li>
<li><strong><code>tokenizer.json</code></strong>ï¼è¿æ¯ä¸ä¸ª<strong>ç¼è¯å</strong>çé«æå­å¸æä»¶ï¼åå«äºåè¯çææé»è¾ï¼Pre-tokenization, Normalization ç­ï¼ï¼å è½½éåº¦æ¯è¯»åå§ææ¬å¿«å¾å¤ã</li>
<li><strong><code>tokenizer_config.json</code> (è³å³éè¦)</strong>ï¼è¿æ¯åè¯å¨ç<strong>éç½®æä»¶</strong>ã
<ul>
<li>å®å®ä¹äº<strong>ç¹æ®ç¬¦å·</strong>ï¼Special Tokensï¼ï¼æ¯å¦åªä¸ª ID ä»£è¡¨âå¼å§âï¼åªä¸ªä»£è¡¨âç»æâã</li>
<li>å®åå«äº <strong>Chat Template (èå¤©æ¨¡æ¿)</strong>ï¼è¿æ¯ä¸æ®µ Jinja2 ä»£ç ï¼å³å®äº <code>apply_chat_template</code> å¦ä½å·¥ä½ã</li>
<li><strong>åé¨é¿è¿æ ·</strong>ï¼<pre><code class="language-json">{
  "chat_template": "{% for message in messages %}...&lt;|im_start|&gt;...",
  "eos_token": "&lt;|im_end|&gt;",
  "pad_token": "&lt;|endoftext|&gt;"
}
</code></pre>
</li>
</ul>
</li>
</ul>
<h2 id="3-transformersåºå®æä»£ç ä¸­çéä¸è§">3. Transformersåºå®æï¼ä»£ç ä¸­çâéä¸è§â</h2>
<p>å¨Transformsåºä¸­ï¼æä»¬æ°¸è¿ç»ä¸å¼ä¸ä¸ªæ ¸å¿ç±»ã</p>
<p><strong>ç¯å¢åå¤ï¼</strong><br>
å¨ Kaggle å³ä¾§è®¾ç½®ä¸­ï¼ç¡®ä¿ <strong>Internet: On</strong> ä¸ <strong>Accelerator: GPU T4 x2</strong>ã</p>
<pre><code class="language-python">!pip install -U transformers accelerate bitsandbytes
</code></pre>
<h3 id="31-autotokenizer-ç¿»è¯å®">3.1 AutoTokenizer (ç¿»è¯å®)</h3>
<p>å¯¹åºçè®ºä¸­ç <strong>Token å</strong> æ­¥éª¤,åæ¨¡åæä»¶ä¸­çtokenizerç¸å³æä»¶ã</p>
<pre><code class="language-python">from transformers import AutoTokenizer

model_path = "/kaggle/input/qwen2.5/transformers/7b-instruct/1/"

# å è½½åè¯å¨
tokenizer = AutoTokenizer.from_pretrained(model_path, trust_remote_code=True)

text = "Transformer is amazing"
# 1. ç¼ç  (Encode): ææ¬ -&gt; æ°å­ ID
input_ids = tokenizer.encode(text)
print(f"åæ: {text}")
print(f"æ°å­ ID: {input_ids}")

# 2. è§£ç  (Decode): æ°å­ ID -&gt; ææ¬
decoded_text = tokenizer.decode(input_ids)
print(f"è¿å: {decoded_text}")
</code></pre>
<p>å¾å°çç»æå°ä¼æ¯è¿æ ·</p>
<pre><code class="language-bash">åæ: Transformer is amazing
æ°å­ ID: [46358, 374, 7897]
è¿å: Transformer is amazing
</code></pre>
<p><strong>å¯¹è¯æ ¼å¼ï¼Chat Template</strong><br>
å¤§æ¨¡åéè¦ç¹å®çå¯¹è¯æ ¼å¼ï¼Promptï¼ãæ¥å°æ¨¡åçåç­ï¼åç¨æ·çé®é¢ååºå, æä»¬ä¸è¬é½å¯ä»¥éè¿è½½å¥è¯­è¨æ¨¡åå¯¹åºæ¨¡æ¿ï¼ä¸åå®¶çæ¨¡åï¼å¯è½æ¨¡æ¿ä¼æä¸åï¼ï¼çè³å»æ¼è£åå²è®°å½ã</p>
<pre><code class="language-python">messages = [
    {"role": "system", "content": "ä½ æ¯ä¸ä¸ªç©çå­¦å®¶ã"},
    {"role": "user", "content": "ç¨ä¸å¥è¯è§£éç¸å¯¹è®ºã"}
]

# èªå¨åºç¨èå¤©æ¨¡æ¿
formatted_prompt = tokenizer.apply_chat_template(messages, tokenize=False, add_generation_prompt=True)
print("æ¨¡åå®éçå°çè¾å¥:\n", formatted_prompt)
</code></pre>
<p>è¿è¡ç»æå¦ä¸</p>
<pre><code class="language-bash">æ¨¡åå®éçå°çè¾å¥:
 &lt;|im_start|&gt;system
ä½ æ¯ä¸ä¸ªç©çå­¦å®¶ã&lt;|im_end|&gt;
&lt;|im_start|&gt;user
ç¨ä¸å¥è¯è§£éç¸å¯¹è®ºã&lt;|im_end|&gt;
&lt;|im_start|&gt;assistant
</code></pre>
<p>çå°è¿éï¼æä»¬ä¹è½æ´å¥½å°çè§£ï¼ä¸ºä»ä¹ä¸ä¸ªæ¬è´¨æ¯è¯è¯­æ¥é¾çæ¨¡åï¼è½å¤åºåé®é¢ï¼ç¶åååºåç­ãå ä¸ºå¨è®­ç»çè¿ç¨ä¸­ï¼æä»¬ä¼è®©ä»ç¥é&lt;|im_start&gt;è¡¨ç¤ºä¸ä¸ªmessageçå¼å§ï¼å¶ä¸­ä¼åè¯æ¨¡åï¼è¿å¥è¯æ¯è°è¯´çï¼è¿å¥è¯å¨ä»ä¹ä½ç½®ç»æï¼å®æ¥é¾çæ¶åä¹ä¼å¸¦ä¸å¼å§åç»æç¬¦å·ï¼å¨æ¨çæ¨¡åä¸­ï¼çè³ä¼å¸¦ä¸æèçæ ç­¾ã</p>
<h3 id="32-automodel-å¤§èæ¬ä½">3.2 AutoModel (å¤§èæ¬ä½)</h3>
<p>å¯¹åºçè®ºä¸­ç <strong>Embedding -&gt; Attention -&gt; MLP</strong> è®¡ç®è¿ç¨,éè¿ä»config.jsonä¸­å è½½æ¨¡åèº¯ä½ï¼å¨å è½½ä¸æ¨¡åçsafetensorçµé­æ°æ®ä»¥ågeneration_config.jsonçé»è®¤åå§å,<br>
å¨ Kaggle ä¸ï¼æä»¬æ¥æ <strong>å T4 (15GB x 2)</strong>ï¼ä¸å®è¦å©ç¨ <code>device_map="auto"</code> è®©åºèªå¨åéæ¾å­ã</p>
<pre><code class="language-python">from transformers import AutoModelForCausalLM
import torch

# å è½½æ¨¡å
model = AutoModelForCausalLM.from_pretrained(
    model_path,
    device_map="auto",      # å³é®ï¼èªå¨å°æ¨¡åååå°ä¸¤å¼  T4 æ¾å¡ä¸
    torch_dtype=torch.float16, # ä½¿ç¨åç²¾åº¦ï¼èçæ¾å­
    trust_remote_code=True
)

print(f"æ¨¡åå è½½æåï¼æ¾å­åå¸: {model.hf_device_map}")
</code></pre>
<p>è¾åºç»æä¸º</p>
<pre><code class="language-bash">æ¨¡åå è½½æåï¼æ¾å­åå¸: {'model.embed_tokens': 0, 'model.layers.0': 0, 'model.layers.1': 0, 'model.layers.2': 0, 'model.layers.3': 0, 'model.layers.4': 0, 'model.layers.5': 0, 'model.layers.6': 0, 'model.layers.7': 0, 'model.layers.8': 0, 'model.layers.9': 0, 'model.layers.10': 0, 'model.layers.11': 0, 'model.layers.12': 1, 'model.layers.13': 1, 'model.layers.14': 1, 'model.layers.15': 1, 'model.layers.16': 1, 'model.layers.17': 1, 'model.layers.18': 1, 'model.layers.19': 1, 'model.layers.20': 1, 'model.layers.21': 1, 'model.layers.22': 1, 'model.layers.23': 1, 'model.layers.24': 1, 'model.layers.25': 1, 'model.layers.26': 1, 'model.layers.27': 1, 'model.norm': 1, 'model.rotary_emb': 1, 'lm_head': 1}
</code></pre>
<h2 id="4-ææ§çæçè°èæé®">4. ææ§çæçâè°èæé®â</h2>
<p>å¨æ¨¡åè¾åºçè¿ç¨ä¸­ï¼æä»¬æä¸äºåæ°å¯ä»¥å¯¹è¾åºç»æè¿è¡è°èï¼å¯¹åºäºæä»¬è®²çè®ºé¨åçä¸­ç <strong>ç¬¬äºæ­¥ (Softmax æ¦çè¾åº)</strong>, æä»¬æä¸å ä¸ä¸ä¸ªè¯åçæ¦çåå¸äºï¼ä½æ¯æä»¬åºè¯¥å¦ä½å»éæ©å¢ï¼</p>
<h3 id="41-temperature-æ¸©åº¦">4.1 Temperature (æ¸©åº¦)</h3>
<p>æä»¬å¯ä»¥è®¾å®çTemperatureåæ°ï¼æä»¬å¨generation_config.jsonä¸­ä¹çè§è¿å®</p>
<p>å¼è¶å¤§ï¼æ´ç­ï¼æ´å·åé æ§ï¼æ´å®¹æè¾åºåç§å¤©é©¬è¡ç©ºçè¯, ä¼ç¼©å°ææè¯åçå·®è·ï¼<strong>é¨é²åæ²¾</strong>ï¼ä»¥è¾¾å°åé æ§ï¼è®©ä½æ¦ççè¯ï¼ä¹ææºä¼è¢«éä¸­ï¼å½ç¶,ä¹æ´å®¹æè¡è¯´å«éï¼åºç°å¹»è§.<br>
å¼è¶å°ï¼æ´å·ï¼æ´ä¸¥èï¼å¨æ¸©åº¦ä¸º0çæ¶åçè³ä¼åºå®è¾åºæé«çé£ä¸ªè¯ï¼å®ä¼æå¤§é«æ¦çåä½æ¦ççå·®è·ï¼<strong>èµ¢å®¶éå</strong>ï¼è®©æ¨¡åçåç­æ´ç¨³å®ï¼ä¸¥è°¨ã</p>
<h3 id="42-top_p-æ ¸éæ ·">4.2 Top_p (æ ¸éæ ·)</h3>
<p>åæ¸©åº¦ä¸åï¼æä»¬è¿æå¦ä¸ç§æ¹å¼ï¼è¿ç§æ¹å¼æ´ç±»ä¼¼äºæç½ï¼æä»¬åªè¦å¯è½æ§å80%çè¯ï¼å¨é£äºè¯éè¿è¡æéï¼è¿ä¸ªå¯è½æ§å°±æ¯Pï¼è¿ä¸ªéè¯ï¼éæ ·ï¼æ¹æ³åå«top_p(æ ¸éæ ·).<br>
ç®èè¨ä¹ï¼å¶åªå¨ç´¯ç§¯æ¦çè¾¾å° P (e.g., 0.9) çåå ä¸ªè¯ééãç´æ¥åæå°¾é¨é£äºæä½æ¦ççç¦»è°±è¯ã</p>
<h3 id="43-å®éªä¸ä¸">4.3 å®éªä¸ä¸</h3>
<p>æä»¬è¿éåå®ä¹ä¸ä¸ªå½æ°ï¼ä»¥æ¸©åº¦åtop_pä¸ºåæ°å»æµè¯ä¸åçåæ°å¯¹åç­çå½±å</p>
<pre><code class="language-python"># å®ä¹ä¸ä¸ªæµè¯å½æ°
def test_generation(temp, top_p, prompt_text):
    messages = [
        {"role": "system", "content": "ä½ æ¯ä¸ä¸ªåå«çç§å¹»å°è¯´å®¶ã"},
        {"role": "user", "content": prompt_text}
    ]
    text = tokenizer.apply_chat_template(messages, tokenize=False, add_generation_prompt=True)
    inputs = tokenizer([text], return_tensors="pt").to(model.device)

    print(f"\n======== è®¾ç½®: Temperature={temp}, Top_p={top_p} ========")

    try:
        generated_ids = model.generate(
            **inputs,
            max_new_tokens=100,  # éå¶é¿åº¦ï¼æ¹ä¾¿å¿«éçç»æ
            temperature=temp,
            top_p=top_p,
            do_sample=True,      # å¿é¡»å¼å¯éæ ·
            pad_token_id=tokenizer.eos_token_id
        )
        response = tokenizer.batch_decode(generated_ids, skip_special_tokens=True)[0]
        # åªæå°åç­é¨å
        print(response.split('assistant')[-1].strip())
    except Exception as e:
        print(f"çæåºé: {e}")
</code></pre>
<h3 id="æ¸©åº¦å®éª">æ¸©åº¦å®éª</h3>
<p>ç¶ååå¶ä¸æ°å»ºcode blockå»æµè¯ï¼ççææ</p>
<pre><code class="language-python">prompt = "è¯·ç¨è¿ä¸ä¸ªè¯åä¸ä¸ªå¾®æäºï¼éå­ãå¤±æãçé¥­ã"

# 1. ä½æ¸©æ¨¡å¼ (0.1)ï¼ä¸¥è°¨ãæ­»æ¿
test_generation(temp=0.1, top_p=0.9, prompt_text=prompt)

# 2. éä¸­æ¨¡å¼ (0.7)ï¼æ­£å¸¸ãæµç
test_generation(temp=0.7, top_p=0.9, prompt_text=prompt)

# 3. é«æ¸©æ¨¡å¼ (1.5)ï¼ç¯çãæ··ä¹±
# æ³¨æï¼å¯è½ä¼è¾åºä¹±ç æå®å¨ä¸éé¡ºçå¥å­
test_generation(temp=1.5, top_p=0.9, prompt_text=prompt)
</code></pre>
<p>è¿æ¯æçè¿è¡ç»æ</p>
<pre><code class="language-bash">======== è®¾ç½®: Temperature=0.1, Top_p=0.9 ========
å¨éå­ä¸çéï¼æ¶é´ä¸ç©ºé´çæ¦å¿µåå¾æ¨¡ç³ä¸æ¸ï¼èææçä¸çä¹å ä¸ºä¸æ®µå¤±è´¥çææèåå¾ä¸çæ··æ²ãä»å°è¯çç¨éå­çº ç¼ çè®ºæ¥ä¿®å¤èªå·±ç ´ç¢çå¿çµï¼å´æå¤å°å°èªå·±ä»ç°å®ä¸çéå¥äºä¸ä¸ªå¹³è¡å®å®ã

å¨è¿ä¸ªå¹³è¡å®å®ä¸­ï¼ææåç°äºä¸å®¶ç¹å«çé¤é¦ï¼è¿éçå¨å¸æ¯ä¸ä½æ¾ç»çæäººï¼å¥¹æ­£å¨ä¸ºä¸ä½é¡¾å®¢åå¤ä¸éç¹å«ççé¥­ãè¿éçé¥­ä¸ä»è²é¦å³ä¿±å¨ï¼è¿

======== è®¾ç½®: Temperature=0.7, Top_p=0.9 ========
å¨éå­ä¸ççè¾¹ç¼ï¼ææç¬èªä¸äººåå¨ä¸å®¶ä¸èµ·ç¼çå°é¤é¦éï¼é¢åæ¯ä¸ç¢æ®éççé¥­ãä»åå¥³æååæçåå ï¼æ¯å ä¸ºå¥¹æ²è¿·äºèæç°å®ä¸­çéå­ä¸çï¼èä»å´å¯¹ç°å®ä¸çåæ»¡äºçæã

å°±å¨å å¤©åï¼ä»ä»¬æåä¸æ¬¡äºåµåï¼å¥¹åè¯ä»ï¼âææ¾å°äºçæ­£çèªæââä¸ä¸ªç©¿æ¢­å¨éå­ä¸ççæ¢ç´¢èãâå¥¹çä¸äºä¸çæªåå®ççé¥­ï¼ç¶åæ¶å¤±å¨äºèæç°å®ä¸­ã

æææçé£ççé¥­ï¼

======== è®¾ç½®: Temperature=1.5, Top_p=0.9 ========
æ é¢ï¼æ¶ç©ºæ³¡é¥­

æææè¿å¤±æäºï¼æ¯å¤©åªè½ç®ä¸å¤§éæ³¡é¥­æ¥æ¶ç£¨æ¶é´ã

è¿å¤©æææ­£å¨åé¥­ï¼ä»å¿½ç¶æ¥æ¶å°ä¸æ¡éå­ä¿¡å·ãä»æå¥å°åç°é£æ¯èªå·±å¤±æåå¥³åçåæ ä½ç½®ãæ³å°è½ä¸èªå·±ç¸ç±è¿çäººå±åº¦æ¶åæ¯å¤ä¹ç¾å¦çäºæï¼ä»ä¾¿å°èªå·±ç®äºä¸éæ³¡é¥­éè¿äºåæ ä¼ éå¨ã

ç»æå´æ¯ä¸éçé¥­ã

ææç¾æä¸è§£ã
</code></pre>
<h3 id="top_på®éª">top_på®éª</h3>
<p>æ¥ä¸æ¥æ¯top_p</p>
<pre><code class="language-python">prompt_2 = "è¯·ç»ä¸ç§ä¸å­å¨çé¢è²èµ·ä¸ªåå­ï¼å¹¶æè¿°å®çæ ·å­ã"

# 1. æçªéæ · (0.01)ï¼åªéæ¦çæé«çé£ä¸ªè¯ï¼è¿ä¼¼è´ªå©ªæç´¢ï¼
test_generation(temp=0.8, top_p=0.01, prompt_text=prompt_2)

# 2. å®½å¹¿éæ · (0.95)ï¼åè®¸ç½è§è¯åºç°
test_generation(temp=0.8, top_p=0.95, prompt_text=prompt_2)
</code></pre>
<p>è¾åºç»æä¸º</p>
<pre><code class="language-bash">======== è®¾ç½®: Temperature=0.8, Top_p=0.01 ========
è¿ç§ä¸å­å¨çé¢è²æå½åä¸ºâæå°ç´«âãå®æ¯ä¸ç§æ¢¦å¹»è¬çé¢è²ï¼ä»äºç´«è²åé¶è²ä¹é´ï¼ä»¿ä½æ¯å®å®ä¸­æ æ°å¾®å°çæè¾°ç¢çå¨éªçæ¶ææ£ååºçåèãå¨ä¸åçåçº¿ä¸ï¼æå°ç´«ä¼åç°åºä¸åçè²è°ï¼ææ¶åç´«ï¼ææ¶åé¶ï¼ææ¶ååæ¯æºæäºç¹ç¹æåçæ·¡èè²ãå®æ¢ç¥ç§åä¼éï¼ä»¿ä½è½è®©äººæåå°å®å®çæµ©çä¸æ·±éã

======== è®¾ç½®: Temperature=0.8, Top_p=0.95 ========
è¿ç§ä¸å­å¨çé¢è²æç§°ä¹ä¸ºâæéå¹»å½©âï¼Stellar Mirageï¼ãå¨è§è§ä¸ï¼å®å¹¶éåä¸è²è°ï¼èæ¯ä¸ç§å¨æååçè²å½©ç»åï¼åæ¯æ æ°å¾®å°çåç¹å¨ç¼åéªçåå¹»ï¼è¿äºåç¹åå«äºææå¯è§åè°±çé¢è²ï¼åæ¶åå¸¦çä¸ç§ç¥ç§çãä¸å¯åç¶çè²å½©ã

å½è§å¯èæ³¨è§çâæéå¹»å½©âçæ¶åï¼ä»å¯ä»¥çå°èãç»¿ãç´«ç­é¢è²å¿«éå°å¨ç¼ååæ¢åæ··åï¼å®ä»¬ä»¥ä¸ç§å 
</code></pre>
<h2 id="5-å®æ´-transformers-ä»£ç å®æ">5. å®æ´ Transformers ä»£ç å®æ</h2>
<p>æææç§¯æ¨æ­å¨ä¸èµ·ï¼è¿å°±æ¯ä¸æ®µæ åçæ¨¡åæ¨çä»£ç ï¼</p>
<pre><code class="language-python">import torch
from transformers import AutoModelForCausalLM, AutoTokenizer

# 1. è®¾ç½®æ¨¡å ID
model_id = "/kaggle/input/qwen2.5/transformers/7b-instruct/1/"

# 2. å è½½ç¿»è¯å®
tokenizer = AutoTokenizer.from_pretrained(model_id, trust_remote_code=True)

# 3. å è½½å¤§è (åå¡æ¨¡å¼)
model = AutoModelForCausalLM.from_pretrained(
    model_id,
    device_map="auto",
    torch_dtype=torch.float16,
    trust_remote_code=True
)

# 4. åå¤è¾å¥
prompt = "è¯·ç¨è¿ä¸ä¸ªè¯åä¸ä¸ªå¾®å°è¯´ï¼Kaggleãæ·±å¤ãçæ¾å­"
messages = [
    {"role": "system", "content": "ä½ æ¯ä¸ä¸ªå¹½é»çç¨åºåã"},
    {"role": "user", "content": prompt}
]

text = tokenizer.apply_chat_template(messages, tokenize=False, add_generation_prompt=True)
model_inputs = tokenizer([text], return_tensors="pt").to(model.device)

# 5. çæ (è°èåæ°ï¼)
print(" æ­£å¨çæ...")
generated_ids = model.generate(
    **model_inputs,
    max_new_tokens=512,
    temperature=0.8,  # ç¨å¾®æç¹åæ
    top_p=0.9,        # åé¤ç¦»è°±è¯
    do_sample=True    # å¿é¡»å¼å¯éæ ·ï¼æ¸©åº¦æçæ
)

# 6. è§£ç å¹¶è¾åº
generated_ids = [
    output_ids[len(input_ids):] for input_ids, output_ids in zip(model_inputs.input_ids, generated_ids)
]
response = tokenizer.batch_decode(generated_ids, skip_special_tokens=True)[0]

print("-" * 20)
print(f" åç­:\n{response}")
print("-" * 20)
</code></pre>
<p>è¿æ¯è¾åºç»æ</p>
<pre><code class="language-bash">Loadingâcheckpointâshards:â100%
â4/4â[00:13&lt;00:00,ââ3.27s/it]
The module name  (originally ) is not a valid Python identifier. Please rename the original module to avoid import issues.
WARNING:accelerate.big_modeling:Some parameters are on the meta device because they were offloaded to the cpu.
 æ­£å¨çæ...
--------------------
 åç­:
å¨ä¸ä¸ªå¯å·çæ·±å¤ï¼æé·åå¨ä»é£é´å æ»¡åå¡ç½åä»£ç æä»¶çæ¿é´éï¼å±å¹ä¸æ¯Kaggleç«èµçæ°æ®éãä»æ­£å°è¯è®­ç»ä¸ä¸ªå¤æçæ·±åº¦å­¦ä¹ æ¨¡åãç¶èï¼å°±å¨ä»è®¤ä¸ºèå©å¨æçæ¶åï¼âå¶~âçä¸å£°ï¼æ¾ç¤ºå¨ç¬é´åæäºä¸çæ¼é»ï¼ä¼´éçä¸å£°æ²å£®çâçæ¾å­äºâã

æé·æäºæç¼çï¼ççç¼åä¸çç©ºç½çå±å¹ï¼å¿ä¸­åæ»¡äºæ«è´¥æï¼ä½ä»è½¬å¿µä¸æ³ï¼âè¿å¥½ä¸æ¯âçåå­äºâï¼å¦åæè¿å°èæ§çµèå¯è½å°±è¦å½»åºéä¼äºãâäºæ¯ï¼ä»åå¼å§è°æ´åæ°ï¼å¸æè½å¨è¿ä¸ªæ·±å¤éæ¾å°é£ä¸ªéèå¨æ°æ®æµ·æ´ä¸­çå®èã
--------------------
</code></pre>
<h3 id="hint">Hint:</h3>
<p><strong>ææçä»£ç ï¼é½å¯ä»¥å¨ <a href="https://www.kaggle.com/code/thaodinhoio/llm03-transformers" target="_blank" rel="noopener nofollow">è¿ä¸ªç¬è®°æ¬</a>ä¸­ç´æ¥è·åè¿è¡å¦</strong></p>
<h2 id="6-å¸¸è§é®é¢-qa">6. å¸¸è§é®é¢ (Q&amp;A)</h2>
<p><strong>Q: å¨ Kaggle ä¸ <code>device_map="auto"</code> æ¯å¿é¡»çåï¼</strong><br>
<strong>A:</strong> å¦æä½ ä½¿ç¨åå¡ T4 (15GB) è· 7B æ¨¡åï¼çº¦ 14GBï¼ï¼åå¼ºè½å¡è¿ä¸å¼ å¡ãä½å¦æä½ å¼å¯äº Kaggle ç <strong>T4 x2</strong>ï¼ä¸ºäºå©ç¨å¨é¨ 30GB æ¾å­ï¼<strong>å¿é¡»</strong>å è¿ä¸ªåæ°ï¼å¦åæ¨¡ååªä¼å¡è¿ç¬¬ä¸å¼ å¡ï¼å¯¼è´ç¬¬ä¸å¼ çæ»¡ï¼ç¬¬äºå¼ å´è§ã</p>
<p><strong>Q: ä¸ºä»ä¹çæçæ¯ä¸å¥è¯é½ä¸ä¸æ ·ï¼</strong><br>
<strong>A:</strong> å ä¸ºæä»¬å¼å¯äº <code>do_sample=True</code> å¹¶ä¸è®¾ç½®äº <code>temperature &gt; 0</code>ãæ¨¡åå¨éæ©ä¸ä¸ä¸ªè¯æ¶æ¯<strong>ææ¦çéæºæ½å</strong>çãå¦æä½ æ³è®©ç»ææ¯æ¬¡é½ä¸æ ·ï¼æ¯å¦åæ°å­¦é¢ï¼ï¼è¯·è®¾ç½® <code>do_sample=False</code>ï¼æ­¤æ¶æ¸©åº¦å¤±æï¼åä¸ºè´ªå©ªè§£ç ï¼ã</p>
<p><strong>Q: ä»ä¹æ¯ Logitsï¼</strong><br>
<strong>A:</strong> å¨ä»£ç æ·±å¤ï¼æ¨¡åè¾åºçé£ä¸ªâæ¦çè¡¨âå¨åæç¾åæ¯ä¹åï¼å« Logitsï¼æªå½ä¸åçæ°å¼ï¼ãSoftmax å½æ°çä½ç¨å°±æ¯æ Logits åææ¦çãä½ å¯ä»¥æ Logits çè§£ä¸ºæ¨¡åå¯¹æ¯ä¸ªè¯çâåå§æåâã</p>
<p><strong>Q: Token åå­æ¯ä¸ä¸å¯¹åºçåï¼</strong><br>
<strong>A:</strong> ä¸ä¸å®ã</p>
<ul>
<li>è±æï¼éå¸¸ä¸ä¸ªåè¯æ¯ä¸ä¸ª Tokenï¼é¿åè¯å¯è½è¢«ååã</li>
<li>ä¸­æï¼éå¸¸ä¸ä¸ªæ±å­æ¯ä¸ä¸ª Tokenï¼ä½å¸¸è§è¯ï¼å¦âä½ å¥½âï¼å¯è½ä¼åå¹¶ä¸ºä¸ä¸ª Tokenã</li>
<li>å¹³åæ¥è¯´ï¼<strong>0.75 ä¸ªè±æåè¯ â 1 Token</strong>ï¼<strong>1 ä¸ªæ±å­ â 1.5 - 2 Token</strong>ï¼åå³äºåè¯å¨æçï¼Qwen çä¸­æåç¼©çå¾é«ï¼ã</li>
</ul>
<hr>
<p><strong>æ¬æä½èï¼</strong> Algieba<br>
<strong>æ¬æé¾æ¥ï¼</strong> <a href="https://blog.algieba12.cn/llm03-know-more-about-transformer-lib/" target="_blank" rel="noopener nofollow">https://blog.algieba12.cn/llm03-know-more-about-transformer-lib/</a><br>
<strong>çæå£°æï¼</strong> æ¬åå®¢æææç« é¤ç¹å«å£°æå¤ï¼åéç¨ BY-NC-SA è®¸å¯åè®®ãè½¬è½½è¯·æ³¨æåºå¤ï¼</p>
<pre><code>
</code></pre>


</div>
<div class="clear"></div>

		</div>
		<div class="itemdesc">
			åè¡¨äº 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-05 19:34">2026-02-05 19:33</span>&nbsp;
<a href="https://www.cnblogs.com/algieba">é¿å°çä»£ç å±</a>&nbsp;
éè¯»(<span id="post_view_count">33</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19581327);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19581327', targetLink: 'https://www.cnblogs.com/algieba/p/19581327', title: '[å¤§æ¨¡åå®æ 03] æè§£ Transformersï¼ä»åçå¾è§£å° HuggingFace Transformers å®æ' })">ä¸¾æ¥</a>

		</div>
	 ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Trae IDE éèç©æ³ï¼æ¥å¥å³æ¢¦ AIï¼çæé«è´¨éå¤§çï¼ ]]></title>
    <link>https://www.cnblogs.com/daimajiangxin/p/19581317</link>
    <guid>c25b76b844ac7547597e0c254991fb0b</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/daimajiangxin/p/19581317" title="åå¸äº 2026-02-05 19:30">
    <span role="heading" aria-level="2">Trae IDE éèç©æ³ï¼æ¥å¥å³æ¢¦ AIï¼çæé«è´¨éå¤§çï¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/3365149/202602/3365149-20260205192859421-189703184.png" alt="Trae IDE éèç©æ³ï¼æ¥å¥å³æ¢¦ AIï¼çæé«è´¨éå¤§çï¼" class="desc_img">
        å¦ä½å¨ Trae IDE ä¸­å©ç¨ jimeng-api é¡¹ç®ï¼å¿«éæ­å»ºå¹¶ä½¿ç¨å³æ¢¦ (Jimeng) ç AI ç»å¾è½åï¼å®ç°åè´¹çé«è´¨éå¾åçæã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>æ³ç¨ AI çæçµå½±çº§ç»è´¨çç¾å¾ï¼å´è¢«é«æçè®¢éè´¹åéï¼</p>
<p>å¨ AI ç»å¾é¢åï¼å­èè·³å¨ç <strong>å³æ¢¦ (Jimeng)</strong> å­åå¶å¯¹ä¸­æçæ·±åº¦çè§£åæè³çç»é¢è´¨æï¼è¿éåºåã</p>
<p>ä»å¤©ï¼æä»¬å°è§£é <strong>Trae IDE</strong> çéèæè½ââç»åå¼æºç¥å¨ <code>jimeng-api</code>ï¼<strong>ä»é¶æé </strong>ä¸ä¸ªä¸å±ç AI ç»å¾æè½ãæ éå¤æçä»£ç ï¼åªéç®åçéç½®ï¼ä½ ç IDE å°±è½åèº«âç¥ç¬é©¬è¯âï¼<strong>åè´¹</strong>çæé«è´¨éå¤§çï¼</p>
<h2 id="ï¸-ä¸åå¤å·¥ä½é¨ç½²-api-æå¡">ð ï¸ ä¸ãåå¤å·¥ä½ï¼é¨ç½² API æå¡</h2>
<p>é¦åï¼æä»¬éè¦æ­å»ºä¸ä¸ªè½è°ç¨å³æ¢¦è½åçæ¡¥æ¢ãæè°¢å¼æºç¤¾åºï¼GitHub ä¸ç <a href="https://github.com/iptag/jimeng-api" target="_blank" rel="noopener nofollow">jimeng-api</a> é¡¹ç®å®ç¾è§£å³äºè¿ä¸ªé®é¢ã</p>
<h3 id="1-åéé¡¹ç®">1. åéé¡¹ç®</h3>
<p>å°é¡¹ç®æºç ä¸è½½å°æ¬å°ï¼</p>
<pre><code class="language-bash">git clone https://github.com/iptag/jimeng-api.git
</code></pre>
<h3 id="2-docker-é¨ç½²">2. Docker é¨ç½²</h3>
<p>ä½¿ç¨ Docker é¨ç½²æç®åï¼æ éå³å¿ç¯å¢ä¾èµã</p>
<p><strong>æ¹å¼ Aï¼ä½¿ç¨ docker-compose</strong></p>
<pre><code class="language-bash">cd jimeng-api
docker-compose up -d
</code></pre>
<p><strong>æ¹å¼ Bï¼æå¨æå»ºè¿è¡</strong></p>
<pre><code class="language-bash">cd jimeng-api
docker build -t jimeng-api .

docker run -d \
  --name jimeng-api \
  -p 5100:5100 \
  --restart unless-stopped \
  jimeng-api
</code></pre>
<blockquote>
<p>ð¡ <strong>æç¤º</strong>ï¼æå¡å¯å¨åé»è®¤çå¬ <code>5100</code> ç«¯å£ã</p>
</blockquote>
<h3 id="3-è·åå³é®å­è¯-token">3. è·åå³é®å­è¯ (Token)</h3>
<p>ä½ éè¦è·åå³æ¢¦è´¦å·ç <code>sessionid</code> ä½ä¸ºè°ç¨å­è¯ï¼</p>
<ol>
<li>è®¿é® <a href="https://jimeng.jianying.com" target="_blank" rel="noopener nofollow">å³æ¢¦å®ç½ (jimeng.jianying.com)</a> å¹¶ç»å½ã</li>
<li>æ <code>F12</code> æå¼æµè§å¨å¼åèå·¥å·ï¼åæ¢å° <code>Application</code> -&gt; <code>Cookies</code>ã</li>
<li>æ¾å° <code>sessionid</code> çå¼ï¼å¤å¶å¤ç¨ã</li>
</ol>
<p><img alt="è·å Session ID" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3365149/202602/3365149-20260205192732313-617095713.png" class="lazyload"></p>
<h2 id="-äºå¨-trae-ide-ä¸­è£è½½ç»å¾æè½">â¡ äºãå¨ Trae IDE ä¸­è£è½½âç»å¾æè½â</h2>
<p>ç°å¨ï¼æä»¬æé¨ç½²å¥½ç API è½åéæå° Trae ä¸­ã</p>
<h3 id="1-æ¤å¥æè½æä»¶">1. æ¤å¥æè½æä»¶</h3>
<p>å°ä¸è½½å¥½ç <code>jimeng-api</code> æä»¶å¤¹ï¼å®æ´å¤å¶å° Trae çæè½ç®å½ä¸­ã</p>
<ul>
<li><strong>å¨å±çæ</strong> (æ¨èï¼ææé¡¹ç®å¯ç¨)ï¼<br>
å¤å¶å° <code>C:\Users\ä½ çç¨æ·å\.trae\skills</code></li>
<li><strong>é¡¹ç®çæ</strong> (ä»å½åé¡¹ç®å¯ç¨)ï¼<br>
å¤å¶å°é¡¹ç®æ ¹ç®å½ä¸ç <code>.trae/skills</code></li>
</ul>
<h3 id="2-å®è£-python-ä¾èµ">2. å®è£ Python ä¾èµ</h3>
<p>Trae è¿è¡è¯¥æè½èæ¬éè¦ Python ç¯å¢æ¯æï¼è¯·ç¡®ä¿å®è£äºä»¥ä¸åºï¼</p>
<pre><code class="language-bash">pip install requests Pillow
</code></pre>
<h2 id="-ä¸è¿é¶ä½éªæºè½ç»å¾">ð¨ ä¸ãè¿é¶ï¼ä½éªæºè½ç»å¾</h2>
<p>ä¸åå°±ç»ªï¼ç°å¨ Trae å·²ç»ä¸ä»ä»æ¯ä¸ä¸ªä»£ç ç¼è¾å¨ï¼å®è¿æ¯ä½ ç <strong>AI ç»å¾å©ç</strong>ãTrae ä¼èªå¨è¯å«ä½ çç»å¾æå¾å¹¶è°ç¨æè½ã</p>
<blockquote>
<p><strong>ð¡ ä½¿ç¨å°è´´å£«</strong><br>
ç±äºèæ¬éè¦éªè¯èº«ä»½ï¼ç¬¬ä¸æ¬¡ä½¿ç¨æ¶ï¼è¯·åè¯ Trae ä½ ç <code>sessionid</code>ã</p>
</blockquote>
<p><strong>å®ææ¼ç¤ºï¼</strong></p>
<blockquote>
<p><strong>User</strong>: âæç sessionid æ¯ xxxxxï¼ä½¿ç¨å³æ¢¦å¸®æçæä¸å¼  2K åè¾¨ççæ¥è½æµ·æ»©å¾ï¼ç»é¢è¦å¯ç¾ãâ</p>
<p><strong>Trae</strong>: [æ¶å°ï¼æ­£å¨è°ç¨ jimeng æè½...çæå¾ç...ä¿å­å° /pic ç®å½]</p>
</blockquote>
<p><strong>â¨ ä½åå±ç¤ºï¼</strong><br>
æ§è¡æååï¼é«æ¸å¤§å¾ä¼èªå¨ä¿å­å¨é¡¹ç®ç <code>pic</code> ç®å½ä¸ï¼å·²èªå¨è½¬æ¢ä¸º PNG æ ¼å¼ï¼ãççè¿ç»èï¼</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3365149/202602/3365149-20260205192735733-801964721.png" class="lazyload"><br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3365149/202602/3365149-20260205192734581-1742098495.png" class="lazyload"><br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3365149/202602/3365149-20260205192732390-2065158161.png" class="lazyload"><br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3365149/202602/3365149-20260205192734117-227939770.png" class="lazyload"></p>
<h2 id="-åæ»ç»">ð åãæ»ç»</h2>
<p>éè¿ <strong>Docker é¨ç½² jimeng-api</strong> éå <strong>Trae IDE</strong> çå¼ºå¤§æ©å±è½åï¼æä»¬ä»ç¨äºå åéå°±æ­å»ºäºä¸å¥ä½ææ¬ãé«æç AI ç»å¾å·¥ä½æµã</p>
<p>ç¸æ¯äºæè´µçåä¸ APIï¼è¿ç§æ¹æ¡ï¼</p>
<ul>
<li>â <strong>æ´çµæ´»</strong>ï¼æ¬å°æ§å¶ï¼éå¿ææ¬²ã</li>
<li>â <strong>æ´ç»æµ</strong>ï¼ç´æ¥å©ç¨ç°æè´¦å·æçã</li>
<li>â <strong>æ´æå®¢</strong>ï¼å° AI è½åæ ç¼èå¥å¼åç¯å¢ã</li>
</ul>
<p>å¿«å»è¯è¯ç¨ä»£ç ç»åºä½ çæ¢¦å¢å§ï¼ð</p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-05 19:30">2026-02-05 19:30</span>&nbsp;
<a href="https://www.cnblogs.com/daimajiangxin">ä»£ç å å¿</a>&nbsp;
éè¯»(<span id="post_view_count">38</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19581317);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19581317', targetLink: 'https://www.cnblogs.com/daimajiangxin/p/19581317', title: 'Trae IDE éèç©æ³ï¼æ¥å¥å³æ¢¦ AIï¼çæé«è´¨éå¤§çï¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ä¸ä¸ªå°ççäººçå²æï¼ä»3Dç»å¶å°ç¢°å£åå¼¹ ]]></title>
    <link>https://www.cnblogs.com/lixingqiu/p/19580269</link>
    <guid>6ac6c472a6b1576f37a6fd88eb853afd</guid>
    <description>
    <![CDATA[ 
	<h1 class="postTitle"><a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/lixingqiu/p/19580269" title="åå¸äº 2026-02-05 17:01">
    <span role="heading" aria-level="2">ä¸ä¸ªå°ççäººçå²æï¼ä»3Dç»å¶å°ç¢°å£åå¼¹</span>
    

</a>
</h1>
	<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p><span><img alt="è°¢è°¢ä½ ç»3Dçº¢çåæ»å¨_èµäºäºº" width="88" height="156" loading="lazy" data-src="https://img2024.cnblogs.com/blog/523461/202602/523461-20260205170039544-78396001.png" class="lazyload"></span></p>
<p>å¨æ°å­ä¸ççèå°ä¸ï¼æ»æä¸äºç¥å¥çä»£ç è½å¨ç­ç­æ°è¡ä¹åï¼åé åºä»¤äººæå¹çè§è§å¥è§ãä»å¤©ï¼æä»¬è¦èçï¼å°±æ¯è¿æ ·ä¸ä¸ªéç¨C++ç²¾çµåºç¼åçâé­æ³ç¨åºâãå®ä»ç¨äº12è¡æ ¸å¿ä»£ç ï¼å°±ææ§çä¸ä¸ªå°çï¼å¨å±å¹ä¸å®æäºä¸æ¬¡ä»3Dç»å¶å°ç¢°å£åå¼¹å¨ç»çç²¾å½©è¡¨æ¼ãè¿ä¸ªè¿ç¨ï¼å°±åæ¯ä¸åºæµç¼©çäººçæå§ï¼åæ»¡äºæ¢¦æ³ãåé ãæé¿ä¸èªæçº¦æãè®©æä»¬åèº«ä¸ºè¿ä¸ªå°ççâé ç©ä¸»âï¼ä»¥ä¸ç§æäººçãè¯è°å¹½é»çè§è§ï¼æ·±å¥åæå®çä¸çã</p>
<p><strong>ç¬¬ä¸å¹ï¼è¯çï¼ä»æ å°æç3Dä¹æ¢¦</strong></p>
<p><span>ç¨åºçä¸»è§ï¼æ¯ä¸ä¸ªåä¸º r çå°çãå®ççå½å§äºä¸çâé»è²âçèæ (ä¸å¼å§å®æ¯éèç)ä¹ä¸­ãç¨åºçç¬¬ä¸è¡å°±å®£åäºå®çå­å¨ï¼Sprite r;ãå®çèå°ï¼æ¯ä¸ä¸ªæ é¢åä¸ºâç»3Dçº¢çåæ»å¨âçå±å¹ï¼å°ºå¯¸ä¸º 480x720ã</span></p>
<p><span>ä½å¨å®è½æ»å¨ä¹åï¼å®å¿é¡»é¦åæå®èªå·±çå¤å½¢ãäºæ¯ï¼å®çé ç©ä¸»å¼å§äºå®çâåä¸å·¥ç¨âãè¿æ¯ä¸æ®µä»æ100æ¬¡å¾ªç¯çä»£ç ï¼å´æå»ºäºå®æè¾ççæ¶å»ï¼</span></p>
<pre class="code-snippet__js" data-lang="apache"><span style="color: rgba(255, 0, 0, 1)"><code><span class="code-snippet__attribute">for(int i=<span class="code-snippet__number">0;i&lt;<span class="code-snippet__number">100;i++) r.penshade(i).dot(d-i).wait(<span class="code-snippet__number">0.<span class="code-snippet__number">05);&nbsp;</span></span></span></span></span></code></span></pre>
<p><span>æ³è±¡ä¸ä¸ï¼é ç©ä¸»è®©å°çéæ­¢å¨ä¸ä¸ªèæçâç»å¸âä¸­å¤®ãç¶åï¼å®å¼å§ä»¥ä¸ç§âåå½±é­æ¯âæ¥å¡é èªå·±ãå®ä¸æ­å°æ¹åç»ç¬çé¢è²æ·±æµï¼penshade(i)ï¼ï¼ç¶åç¨ä¸ç§ç¹æ®çæåç¹ç»ç¬ï¼dot(d-i)ï¼å¨å±å¹ä¸ç»åºä¸ä¸ªä¸ªç¹ãæ¯ä¸æ¬¡å¾ªç¯ï¼é¢è²é½ä¼æ´çº¢ä¸äºï¼ç¹çå¤§å°ä¹ä¼æ´å°ä¸äºãå½å¾ªç¯ç»ææ¶ï¼ä¸ä¸ªæ¥æå±æ¬¡æãä»¿ä½è½æå°åçº¿çâ3Dâçº¢çï¼å°±è¿æ ·è¯çäºãè¿æ¯ä¸æ¬¡ä»æ å°æçåé ï¼åæ»¡äºèå¿åç²¾å¦çæå·§ãè¿åè¯æä»¬ï¼ä»»ä½ä¼å¤§çæå°±ï¼é½å§äºä¸æ¬¡æ¬¡å¾®å°èæç»­çåªåã</span></p>
<p><strong>ç¬¬äºå¹ï¼é­è®°ï¼èªæè®¤ç¥ä¸èº«ä»½ç¡®ç«</strong></p>
<p><span>æäºå¤å¨çå½¢ä½ï¼è¿ä¸ªå°çè¿éè¦ä¸ä¸ªåå¨çâæâãå®çé ç©ä¸»æ·±ç¥è¿ä¸ç¹ï¼äºæ¯ï¼ä¸ä¸ªåæ»¡ä¸ªæ§çâ8âå­è¢«åå¨äºå®çè¡¨é¢ã</span></p>
<pre class="code-snippet__js" data-lang="apache"><span style="color: rgba(255, 0, 0, 1)"><code><span class="code-snippet__attribute">r.pencolor(<span class="code-snippet__string">"black").write(<span class="code-snippet__string">"8",<span class="code-snippet__number">36); &nbsp;//ç»ç¬é¢è²è®¾ä¸ºé»å¹¶ä¸å<span class="code-snippet__number">8å­</span></span></span></span></span></code></span></pre>
<p><span>è¿ä¸ªâ8âå­ï¼ä¸ä»ä»æ¯ä¸ä¸ªè£é¥°ãå®æ¯å°ççâçµé­çå°âï¼æ¯å®ç¬ä¸æ äºçèº«ä»½æ è¯ãå®åè¯ä¸çï¼âææ¯æï¼ä¸æ¯å«äººãâ ç¶åï¼é ç©ä¸»ä¸ºäºè®©è¿ä»½âèº«ä»½âæ°¸ä¸ç£¨ç­ï¼åäºä¸ä»¶å¤§äºââæªå¾ã</span></p>
<pre class="code-snippet__js" data-lang="apache"><span style="color: rgba(255, 0, 0, 1)"><code><span class="code-snippet__attribute">screen.savepng(filename, {-d/<span class="code-snippet__number">2, d/<span class="code-snippet__number">2, d,d},true);</span></span></span></code></span></pre>
<p><span>å®å°è¿ä¸ªç¬ä¸æ äºçãå¸¦æâ8âå­ç3Dçº¢çï¼æ°¸ä¹å°ä¿å­ä¸ºä¸ä¸ªåä¸º 3dball.png çå¾åæä»¶ãä»æ­¤ï¼æ è®ºå®å¨æªæ¥çæç¨ä¸­ç»åäºä»ä¹ï¼åªè¦åæ¬¡å è½½è¿ä¸ªå¾åï¼å®çâ8âå­çµé­å°±ä¼åå½ãè¿å°±åæä»¬æ¯ä¸ªäººï¼å¨æé¿è¿ç¨ä¸­ï¼é½ä¼çä¸èªå·±çå°è®°ï¼æ è®ºæ¯ä½åãææ³è¿æ¯ç»åï¼è¿äºé½æ¯æä»¬èº«ä»½çåºç³ã</span></p>
<p><strong>ç¬¬ä¸å¹ï¼å¯ç¨ï¼æ¢ç´¢ä¸æé¿çæé</strong></p>
<p><span>èº«ä»½ç¡®ç«åï¼å°ççé ç©ä¸»ä¸ºå®è®¾ç½®äºä¸ä¸ªç®åèååæ»¡å¸æçæç¨ãå®è¢«èµäºäºä¸ä¸ªåå§éåº¦ï¼å¹¶è¢«è®¾å®ä¸ºâæ°¸è¿æ»å¨âï¼</span></p>
<pre class="code-snippet__js" data-lang="javascript"><span style="color: rgba(255, 0, 0, 1)"><code>r.<span class="code-snippet__title">clear().<span class="code-snippet__title">shape(filename).<span class="code-snippet__title">show().<span class="code-snippet__title">wait(<span class="code-snippet__number">1); &nbsp;<span class="code-snippet__comment">//æ¸é¤æç»å¾å½¢æè§è²è®¾ä¸ºfilename</span></span></span></span></span></span></code></span></pre>
<p><span>å®è¢«èµäºäºä¸ä¸ªåå§éåº¦ï¼å¹¶è¢«è®¾å®ä¸ºâæ°¸è¿æ»å¨âï¼</span></p>
<pre class="code-snippet__js" data-lang="cs"><span style="color: rgba(255, 0, 0, 1)"><code><span class="code-snippet__built_in">int&nbsp;k=&nbsp;<span class="code-snippet__number">1;<br></span></span></code><code><span class="code-snippet__keyword">while(<span class="code-snippet__literal">true){ /<span class="code-snippet__comment">/ä¸æ­éå¤ï¼è®©è§è²æ»å¨ï¼</span></span></span></code><code>&nbsp; &nbsp;<br>  r.right(<span class="code-snippet__number">1*k).addx(step*k).wait(<span class="code-snippet__number">0.01);</span></span></code><code>&nbsp; <br>&nbsp;<span class="code-snippet__comment">//... ç¢°ææ£æµ ...<br></span></code><code>}</code></span></pre>
<p><span>ç°å¨ï¼å°ççæ­£å¼å§äºå®ççå½ä¹æãå®ä»¥ä¸ç§ä¼éçå§¿æï¼æ¯æè½¬ä¸åº¦ï¼right(1*k)ï¼ï¼å°±ååç§»å¨ä¸å°æ­¥ï¼addx(step*k)ï¼ãå®çä¸çæ¯ä¸ä¸ª 480x720 çå±å¹ï¼èå®èªå·±çå¤§å°æ¯ dãå®çæç¨åæ»¡äºæªç¥åæ°å¥ï¼æ¯ä¸æ¬¡ç§»å¨é½æ¯ä¸æ¬¡æ¢ç´¢ï¼æ¯ä¸æ¬¡æè½¬é½æ¯ä¸æ¬¡æèãè¿å°±åæä»¬æ¯ä¸ªäººçäººçï¼ä»æµææ ç¥å°å¼å§æ¢ç´¢ä¸çï¼å¨ä¸æ­çå­¦ä¹ åå®è·µä¸­ï¼ä¸æ­¥ä¸æ­¥å°æé¿ã</span></p>
<p><strong>ç¬¬åå¹ï¼æç¼ï¼è¾¹çä¸è§åçæå¼</strong></p>
<p><span>æç¨å¹¶éä¸å¸é£é¡ºãå¨å°ççæéä¸­ï¼é ç©ä¸»ä¸ºå®è®¾ç½®äºä¸ä¸ªæ®é·èåä»æçâæç¼âââè¾¹çã</span></p>
<pre class="code-snippet__js" data-lang="apache"><span style="color: rgba(255, 0, 0, 1)"><code><span class="code-snippet__attribute">if(r.xcor()+d/<span class="code-snippet__number">2&gt;=<span class="code-snippet__number">240&nbsp;|| r.xcor()-d/<span class="code-snippet__number">2&lt;=-<span class="code-snippet__number">240)k=-k;</span></span></span></span></span></code></span></pre>
<p><span>è¿è¡ä»£ç æ¯æç¨çâå¹è½¦âåâæ¹åçâãå®æ¶å»çæ§çå°ççä½ç½®ï¼</span></p>
<p><span>å½å°ççå³è¾¹ç¼ï¼xcor() + d/2ï¼è§¦ç¢°å°å±å¹çæå³ä¾§ï¼240ï¼æ¶ï¼å®ä¼æ¹åç§»å¨çæ¹åã</span></p>
<p><span>å½å°ççå·¦è¾¹ç¼ï¼xcor() - d/2ï¼è§¦ç¢°å°å±å¹çæå·¦ä¾§ï¼-240ï¼æ¶ï¼å®ä¹ä¼æ¹åç§»å¨çæ¹åã</span></p>
<p><span>è¿ä¸ªâç¢°å£åå¼¹âçè§åï¼çä¼¼æ¯ä¸ç§éå¶ï¼å´æ°æ°æ¯å°çè½å¨æéç©ºé´åæç»­è¿å¨çæ ¹æ¬ä¿éãå®æä¼å°çå­¦ä¼èªæçº¦æãæ²¡æè¾¹ççä¸çæ¯æ··æ²çï¼æäºè¾¹çï¼è¿å¨ææäºæ¹ååæä¹ãè¿å°±åç¤¾ä¼è§ååéå¾·ååï¼å®ä»¬å¹¶éè¦æç¼æä»¬ï¼èæ¯ä¸ºäºä¿æ¤æä»¬ï¼è®©æä»¬å¨ä¸ä¸ªæåºçç¯å¢ä¸­ï¼è½å¤æ´ç¨³å®ãæ´é¿è¿å°åå±ãä¸æå¾çº¦æçèªç±ï¼ç»å°ææä»¬æ¨åæ·±æ¸ã</span></p>
<p><strong>ç¬¬äºå¹ï¼å²æï¼äººççéå»ä¸å¯ç¤º</strong></p>
<p><span>åé¡¾è¿ä¸ªå°ççä¸çï¼æä»¬ä¼åç°ï¼å®çæç¨æ­£æ¯æä»¬æ¯ä¸ªäººäººççç¼©å½±ã</span></p>
<p><span><span><strong><em>åé èªæ</em></strong>ï¼ ä»æ å°æï¼æä»¬éè¿å­¦ä¹ åå®è·µï¼ä¸æ­å¡é åå®åèªå·±çè½åä¸åæ ¼ï¼æç»å½¢æä¸ä¸ªç¬ä¸æ äºçâèªæâã</span></span></p>
<p><span><span><em><strong>ç¡®ç«èº«ä»½</strong></em>ï¼ æä»¬çä½åãæå°±åç»åï¼ææäºæä»¬çç¤¾ä¼èº«ä»½åä¸ªäººä»·å¼ï¼è¿æ¯æä»¬å­å¨çè¯æã</span></span></p>
<p><span><span><strong><em>æ¢ç´¢ä¸ç</em></strong>ï¼ æä»¬å¸¦çæåçç­æåå¥½å¥ï¼å¨äººççéè·¯ä¸ä¸æ­åè¡ï¼å­¦ä¹ æ°äºç©ï¼ä½éªæ°æåã</span></span></p>
<p><span><span><em><strong>éµå®è§å</strong></em>ï¼ ç¤¾ä¼åçæ´»çâè¾¹çâè®©æä»¬å­¦ä¼äºèªå¾åå°éï¼å®ç¡®ä¿äºæä»¬çè¡ä¸ºæç« å¯å¾ªï¼ä»èé¿åäºæ··ä¹±åä¼¤å®³ã</span></span></p>
<p><span>æç»ï¼è¿ä¸ªå°çå¨å®çä¸çéï¼æ°¸ä¸åæ­å°æ»å¨çï¼æ¶èåè¿ï¼æ¶èåéï¼å§ç»ä¿æçèªå·±çèå¥ãå®çäººçï¼å°±æ¯ä¸åºå¨è§åä¸èªç±ä¹é´å¯»æ±å¹³è¡¡çæç¨ã</span></p>
<p><span>ç»è¯­ï¼ä¸æ®µä»£ç ï¼ä¸ç§äººç</span></p>
<p><span>è¿ä¸ªä»æ12è¡æ ¸å¿ä»£ç çç¨åºï¼éè¿ä¸ä¸ªå°ççè§è§ï¼ä¸ºæä»¬å±ç°äºä¸ä¸ªå®æ´èæ·±å»çâäººçâæäºãå®åè¯æä»¬ï¼äººçå§äºåé ï¼æäºè®¤ç¥ï¼è¡äºæ¢ç´¢ï¼ç»äºè§åãå®ç¨ä¸ç§è¯è°å¹½é»çæ¹å¼ï¼è®©æä»¬çå°äºä»£ç èåè´å«çæºæ§åå²çãä¸æ¬¡å½ä½ çå°ä¸æ®µç®æ´èå¼ºå¤§çä»£ç æ¶ï¼è¯·è®°ä½ï¼å®å¯è½ä¸ä»ä»æ¯æä»¤çéåï¼æ´æ¯ä¸ä¸ªå¾®åä¸ççå®æ´æäºã</span></p>
<p>è¿ä¸ªç¨åºçä»£ç å¦ä¸æç¤ºï¼</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">æ¬ç¨åºå¨ç»ç½å: </span><span style="color: rgba(0, 128, 0, 1); text-decoration: underline">https://www.douyin.com/video/7603283479270296867</span>
#include <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">sprites.h</span><span style="color: rgba(128, 0, 0, 1)">"</span>  <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">åå«C++ç²¾çµåº </span>
<span style="color: rgba(0, 0, 255, 1)">using</span> <span style="color: rgba(0, 0, 255, 1)">namespace</span><span style="color: rgba(0, 0, 0, 1)"> std;
Screen screen{</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ç»3Dçº¢çåæ»å¨</span><span style="color: rgba(128, 0, 0, 1)">"</span>,<span style="color: rgba(128, 0, 128, 1)">480</span>,<span style="color: rgba(128, 0, 128, 1)">720</span><span style="color: rgba(0, 0, 0, 1)">};
Sprite r;      </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">å»ºç«è§è²å«r</span>

<span style="color: rgba(0, 0, 255, 1)">int</span> main(){        <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">ä¸»åè½å</span>
    <span style="color: rgba(0, 0, 255, 1)">int</span> d= <span style="color: rgba(128, 0, 128, 1)">100</span><span style="color: rgba(0, 0, 0, 1)">; 
    </span><span style="color: rgba(0, 0, 255, 1)">float</span> step = <span style="color: rgba(128, 0, 128, 1)">3.14159535897932</span>*d/<span style="color: rgba(128, 0, 128, 1)">360.0</span>;  <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">æ¯æ¬¡çº¢çç§»å¨çè·ç¦»</span>
    r.bgcolor(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">black</span><span style="color: rgba(128, 0, 0, 1)">"</span>).hide().speed(<span style="color: rgba(128, 0, 128, 1)">0</span>).color(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">red</span><span style="color: rgba(128, 0, 0, 1)">"</span>).pu(); <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">åå¤å·¥ä½
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">éå¤100æ¬¡ç»ä¸ä¸ªæ¨¡æç3Dçº¢ç</span>
    <span style="color: rgba(0, 0, 255, 1)">for</span>(<span style="color: rgba(0, 0, 255, 1)">int</span> i=<span style="color: rgba(128, 0, 128, 1)">0</span>;i&lt;<span style="color: rgba(128, 0, 128, 1)">100</span>;i++) r.penshade(i).dot(d-i).wait(<span style="color: rgba(128, 0, 128, 1)">0.05</span><span style="color: rgba(0, 0, 0, 1)">); 
    
    r.pencolor(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">black</span><span style="color: rgba(128, 0, 0, 1)">"</span>).write(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">8</span><span style="color: rgba(128, 0, 0, 1)">"</span>,<span style="color: rgba(128, 0, 128, 1)">36</span>);  <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">ç»ç¬é¢è²è®¾ä¸ºé»å¹¶ä¸å8å­</span>
    
    <span style="color: rgba(0, 0, 255, 1)">string</span> filename = <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">res/3dball.png</span><span style="color: rgba(128, 0, 0, 1)">"</span>; <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">è®¾ç«è¦ä¿å­çpngæä»¶å</span>
    screen.savepng(filename, {-d/<span style="color: rgba(128, 0, 128, 1)">2</span>, d/<span style="color: rgba(128, 0, 128, 1)">2</span>, d,d},<span style="color: rgba(0, 0, 255, 1)">true</span>);<span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">æªåæç»å¾å½¢ï¼ä¿å­</span>
    r.clear().shape(filename).show().wait(<span style="color: rgba(128, 0, 128, 1)">1</span>);  <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">æ¸é¤æç»å¾å½¢æè§è²è®¾ä¸ºfilename</span>
    <span style="color: rgba(0, 0, 255, 1)">int</span> k= <span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">;
    </span><span style="color: rgba(0, 0, 255, 1)">while</span>(<span style="color: rgba(0, 0, 255, 1)">true</span>){       <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">ä¸æ­éå¤ï¼è®©è§è²æ»å¨ï¼</span>
       r.right(<span style="color: rgba(128, 0, 128, 1)">1</span>*k).addx(step*k).wait(<span style="color: rgba(128, 0, 128, 1)">0.01</span><span style="color: rgba(0, 0, 0, 1)">);
       </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">ä¸é¢æ¯ç¢°å°è¾¹ç¼å°±åå¼¹</span>
       <span style="color: rgba(0, 0, 255, 1)">if</span>(r.xcor()+d/<span style="color: rgba(128, 0, 128, 1)">2</span>&gt;=<span style="color: rgba(128, 0, 128, 1)">240</span> || r.xcor()-d/<span style="color: rgba(128, 0, 128, 1)">2</span>&lt;=-<span style="color: rgba(128, 0, 128, 1)">240</span>)k=-<span style="color: rgba(0, 0, 0, 1)">k;
    }
   r.done();     </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">å®æäº</span>
   <span style="color: rgba(0, 0, 255, 1)">return</span> <span style="color: rgba(128, 0, 128, 1)">0</span>;    <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">è¿å0</span>
}</pre>
</div>
<p>&nbsp;</p>

</div>
<div class="clear"></div>

	<div class="postDesc">posted on 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-05 17:02">2026-02-05 17:01</span>&nbsp;
<a href="https://www.cnblogs.com/lixingqiu">æå´ç</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19580269);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19580269', targetLink: 'https://www.cnblogs.com/lixingqiu/p/19580269', title: 'ä¸ä¸ªå°ççäººçå²æï¼ä»3Dç»å¶å°ç¢°å£åå¼¹' })">ä¸¾æ¥</a>
</div>
 ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨äºï¼èªç¶è¯­è¨å¤ç  ç¬¬ä¸å¨ï¼åºåæ¨¡åä¸æ³¨æåæºå¶ è¯¾åä¹ é¢ä¸ä»£ç å®è·µ ]]></title>
    <link>https://www.cnblogs.com/Goblinscholar/p/19579899</link>
    <guid>959916bbe6acf6a4c35f0ec3e1333a6e</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Goblinscholar/p/19579899" title="åå¸äº 2026-02-05 16:34">
    <span role="heading" aria-level="2">å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨äºï¼èªç¶è¯­è¨å¤ç  ç¬¬ä¸å¨ï¼åºåæ¨¡åä¸æ³¨æåæºå¶ è¯¾åä¹ é¢ä¸ä»£ç å®è·µ</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>æ­¤åç±»ç¨äºè®°å½å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨çå­¦ä¹ ç¬è®°ã<br>
è¯¾ç¨ç¸å³ä¿¡æ¯é¾æ¥å¦ä¸ï¼</p>
<ol>
<li>åè¯¾ç¨è§é¢é¾æ¥ï¼<a href="https://www.bilibili.com/video/BV1FT4y1E74V?buvid=XU762317353676D786954061C192FE625463B&amp;from_spmid=playlist.playlist-detail.0.0&amp;is_story_h5=false&amp;mid=zqernykrmpf7XfIorMR%2FnA%3D%3D&amp;plat_id=116&amp;share_from=ugc&amp;share_medium=android&amp;share_plat=android&amp;share_session_id=ce0bc526-db69-428a-962e-c65ed8c267bc&amp;share_source=COPY&amp;share_tag=s_i&amp;spmid=united.player-video-detail.0.0&amp;timestamp=1713085655&amp;unique_k=DfBgvFW&amp;up_id=8654113&amp;vd_source=e035e9878d32f414b4354b839a4c31a4" target="_blank" rel="noopener nofollow">[åè¯­å­å¹]å´æ©è¾¾æ·±åº¦å­¦ä¹ deeplearning.ai</a></li>
<li>githubè¯¾ç¨èµæï¼å«è¯¾ä»¶ä¸ç¬è®°:<a href="https://github.com/robbertliu/deeplearning.ai-andrewNG" target="_blank" rel="noopener nofollow">å´æ©è¾¾æ·±åº¦å­¦ä¹ æå­¦èµæ</a></li>
<li>è¯¾ç¨éå¥ç»ä¹ ï¼ä¸­è±ï¼ä¸ç­æ¡ï¼<a href="https://blog.csdn.net/u013733326/article/details/79827273" target="_blank" rel="noopener nofollow">å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾åä¹ é¢ä¸ç­æ¡</a></li>
</ol>
<p>æ¬ç¯ä¸ºç¬¬äºè¯¾ç¬¬ä¸å¨çè¯¾åä¹ é¢åä»£ç å®è·µé¨åã</p>
<hr>
<h1 id="1çè®ºä¹ é¢">1.çè®ºä¹ é¢</h1>
<p><a href="https://blog.csdn.net/u013733326/article/details/90144255" target="_blank" rel="noopener nofollow">ãä¸­è±ããå´æ©è¾¾è¯¾åæµéªãCourse 5 - åºåæ¨¡å - ç¬¬ä¸å¨æµéª</a></p>
<p>å¨è¿ä¸å¨çä¹ é¢åå®¹ä¸­æä¸éé¢çç¸å³åå®¹éè¦å±å¼ï¼åçä¸ä¸é¢é¢ï¼</p>
<blockquote>
<p>ç½ç»éè¿å­¦ä¹ æ³¨æååæ°æ¥å³å®ãææ³¨æåæ¾å¨åªéãï¼è¿äºå¼æ¯ç±ä¸ä¸ªå°ç¥ç»ç½ç»è®¡ç®å¾å°çã<br>
è¿éï¼æä»¬<strong>ä¸è½</strong>æ <span class="math inline">\(s^{&lt;t-1&gt;}\)</span> æ¿æ¢æ <span class="math inline">\(s^{&lt;t&gt;}\)</span> ä½ä¸ºè¿ä¸ªç¥ç»ç½ç»çè¾å¥ï¼<br>
åå å¦ä¸ï¼å ä¸º <span class="math inline">\(s^{&lt;t&gt;}\)</span> ä¾èµäºå½åçæ³¨æåæéï¼èå½åçæ³¨æåæéåä¾èµäºæ³¨æååæ°ï¼å æ­¤å¨éè¦è®¡ç®æ³¨æååæ°çæ¶å»ï¼<span class="math inline">\(s^{&lt;t&gt;}\)</span> <strong>å°æªè¢«è®¡ç®åºæ¥</strong>ï¼ æ­¤æ¶åªè½ä½¿ç¨åä¸æ¶å»çéèç¶æ <span class="math inline">\(s^{&lt;t-1&gt;}\)</span>ï¼èæ æ³ä½¿ç¨å½åç <span class="math inline">\(s^{&lt;t&gt;}\)</span>ã<br>
<strong>ç­æ¡ï¼æ­£ç¡®</strong></p>
</blockquote>
<p>è¿éé¢ä¸ç¼çä¸æ¥æ¯å¾è¿·æçï¼è¿æ¯<strong>å ä¸ºè¿éé¢è®²çæ¯ææ©çæ³¨æåæºå¶çé»è¾ï¼åæä»¬å¨çè®ºé¨åä»ç»çä¸»æµé»è¾ææä¸å</strong>ã<br>
å¨<a href="https://www.cnblogs.com/Goblinscholar/p/19563950" target="_blank">çè®ºé¨å</a>ï¼æä»¬ä»ç»çæ³¨æåæºå¶ï¼å­¦ä¹ æ³¨æååæ°çç½ç»çè¾å¥å°±æ¯ <span class="math inline">\(s^{&lt;t&gt;}\)</span> ï¼ä½å¨ææ©çæ³¨æåæºå¶ä¸­ï¼å®çè¾å¥æ¯ <span class="math inline">\(s^{&lt;t-1&gt;}\)</span>ã<br>
å¶ä¼ æ­é»è¾å¯ä»¥ç¨ä¸å¥è¯æ»ç»ï¼<strong>å¨å½åæ¶é´æ­¥ä¸­ï¼åå§æ³¨æåæºå¶å°ç±ä¸ä¸æ¶å»è§£ç ç¶æè®¡ç®å¾å°çä¸ä¸æåé <span class="math inline">\(c^{&lt;t&gt;}\)</span> ä½ä¸ºè§£ç å¨è¾å¥çä¸é¨åï¼ç¨äºè®¡ç®å½åè§£ç ç¶æ <span class="math inline">\(s^{&lt;t&gt;}\)</span>ã</strong><br>
æä»¬å±å¼å¦ä¸ï¼<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202602/3708248-20260205162801516-704399919.png" alt="image.png" loading="lazy"><br>
14 å¹´çåè®ºæä½¿ç¨çå°±æ¯è¿ç§ä¼ æ­æ¹å¼ï¼å·æå¼åæ§ä»·å¼ãä½å¨ç°ä»£ï¼è¿ç§å°ä¸ä¸æåéç´æ¥çº³å¥ç¶æéæ¨çåæ³æ´å¤åªå·æåå²æä¹ï¼äºè§£å³å¯ã</p>
<h1 id="2ä»£ç å®è·µ">2.ä»£ç å®è·µ</h1>
<p><a href="https://blog.csdn.net/u013733326/article/details/97619187" target="_blank" rel="noopener nofollow">ãä¸­æããå´æ©è¾¾è¯¾åç¼ç¨ä½ä¸ãCourse 5 - åºåæ¨¡å - ç¬¬ä¸å¨ä½ä¸</a><br>
è¿æ¯åæé¾æ¥ï¼è¿ç¯éåä¸»å°±æºå¨ç¿»è¯åè§¦åè¯æ£æµä¸¤é¨ååå®¹ï¼éå¸¸è¯¦ç»å°æ¼ç¤ºäºæ¬å¨çåå®¹ï¼ä½è¿æ¯è¦æ³¨æ Keras çå¯¼åæ´æ°é®é¢ã<br>
æä»¬åæ ·ä½¿ç¨æ¡æ¶æ¥æ¼ç¤ºè¿é¨ååå®¹ï¼ä¸»è¦åå®¹å¦ä¸ï¼</p>
<ol>
<li><strong>ä½¿ç¨ç¼ç è§£ç æ¡æ¶è¿è¡æ¥ææ ¼å¼ç¿»è¯</strong></li>
<li><strong>å¨ç¼ç è§£ç æ¡æ¶ä¸å¯¹æ¯è´ªå¿è§£ç åææç´¢æ§è½</strong></li>
<li><strong>ä½¿ç¨å¸¦æ³¨æåæºå¶çç¼ç è§£ç æ¡æ¶è¿è¡æ¥ææ ¼å¼ç¿»è¯</strong></li>
</ol>
<h2 id="21-æ°æ®åå¤">2.1 æ°æ®åå¤</h2>
<p>éè¦è¯´æçæ¯ï¼ç±äº <strong>seq2seq æ¨¡åèªèº«çç¼ç âè§£ç ç»æ</strong> ä»¥å <strong>åºåæ°æ®çæ¶åºç¹æ§</strong>ï¼è¿ç±»ä»»å¡ç¸æ¯è®¸å¤å¸¸è§çç£å­¦ä¹ ä»»å¡ï¼éå¸¸<strong>å¯¹è®¡ç®èµæºææ´é«çè¦æ±</strong>ã<br>
ä»¥æºå¨ç¿»è¯ä»»å¡ä¸ºä¾ï¼ç½ç»ä¸å­å¨å¤§éå¬å¼æ°æ®éï¼å¦è±æ³ç¿»è¯ãä¸­è±ç¿»è¯ç­ãç±äºè¿ç±»æ°æ®è·åç¸å¯¹å®¹æï¼åæ¶èªç¶è¯­è¨æ¬èº«å·æ<strong>è¯æ±è§æ¨¡å¤§ãè¡¨è¾¾å½¢å¼å¤æ ·</strong>çç¹ç¹ï¼æ¨¡åå¨è®­ç»è¿ç¨ä¸­å¾å¾éè¦åæ¶ç»´æ¤<strong>æºè¯­è¨è¯å¸åç®æ è¯­è¨è¯å¸</strong>ï¼å¶è§æ¨¡éå¸¸è³å°è¾¾å° <strong>æ°ä¸çº§å«</strong>ãè¿ç´æ¥å¯¼è´æ¨¡åå¨åæ°è§æ¨¡ãè®¡ç®éä»¥åæ¾å­å ç¨ç­æ¹é¢çææ¬æ¾èæåã<br>
å æ­¤ï¼è¿æ¬¡æä»¬éç¨ä¸ç§ç¸å¯¹ç®åçæºå¨ç¿»è¯ä»»å¡ââ<strong>æ¥ææ ¼å¼ç¿»è¯</strong>ï¼è¯¥ç±»ä»»å¡çä¸»è¦ç¹ç¹å¨äº<strong>è¯å¸è§æ¨¡å°ãè¾å¥è¾åºç»ææ¸æ°ãè¯­ä¹æ­§ä¹æå°</strong>ï¼å¯ä»¥è¾é«æçå°æ¼ç¤ºæ¬å¨åå®¹ã</p>
<p>è¿æ¬¡æä»¬ä¸ä½¿ç¨ç½ä¸å¬å¼çæ°æ®éï¼èæ¯æå±å´æ©è¾¾èå¸å¨ç¼ç¨ä½ä¸éçé»è¾ï¼è¿è¡<strong>äººå·¥åææ°æ®</strong>ã<br>
æä»¬éè¿è®¾è®¡å¥½çèæ¬ï¼çæ <strong>10000 æ¡</strong> ä»¥ä¸æ ¼å¼çç¸å³æ°æ®åå¯¹åºæ ç­¾å¹¶ä¿å­ä¸ºæä»¶ï¼</p>
<pre><code class="language-python">HUMAN_TEMPLATES = [  
    "{day} {month} {year}",  
    "{month} {day}, {year}",  
    "{day} of {month}, {year}",  
    "{month} {day} {year}",  
    "{day}/{month_num}/{year_short}",  
    "{month_num}/{day}/{year_short}",  
    "{weekday}, {day} {month_abbr} {year}",  
    "{month_abbr} {day}th {year_short}",  
    "{year}-{month_num}-{day}",  
    "The {day}{day_suffix} of {month}, {year}",  
    "{day}th {month_abbr}, {year}",  
    "{month} the {day}{day_suffix}, {year}",  
    "Date: {year}/{month_num}/{day}",  
    "{day} in Roman: {roman_day} {month} {year}",  
    "{month_abbr}. {day}, '{year_short}",  
]
</code></pre>
<p>å®æ´ä»£ç æ¾å¨éå½ï¼æå°å æ¡çææ°æ®å¦ä¸ï¼</p>
<pre><code>[1] The 28th of April, 1975  ==&gt;  1975-04-28
[2] Date: 2017/05/5  ==&gt;  2017-05-05
[3] Jan 10th 44  ==&gt;  1944-01-10
[4] Tuesday, 6 Nov 2096  ==&gt;  2096-11-06
[5] The 26th of August, 2089  ==&gt;  2089-08-26
[6] Date: 2061/08/18  ==&gt;  2061-08-18
[7] 08/4/35  ==&gt;  1935-08-04
[8] 27 of May, 1948  ==&gt;  1948-05-27
[9] 8 of April, 1907  ==&gt;  1907-04-08
[10] November 11, 1937  ==&gt;  1937-11-11
</code></pre>
<p>åå¤å¥½æ°æ®åï¼æä»¬ä¾¿å¯ä»¥è¿è¡ä¸ä¸æ­¥åå®¹ã</p>
<h2 id="22-æ¨¡åè®¾è®¡">2.2 æ¨¡åè®¾è®¡</h2>
<p>å¨<a href="https://www.cnblogs.com/Goblinscholar/p/19547898" target="_blank">æ¬å¨ç¬¬ä¸ç¯</a>åå®¹éæä»¬å°±æå°è¿ï¼ç¼ç è§£ç æ¡æ¶ä¸çç½ç»ç»æå®éä¸æ¯åå«è®¾è®¡çä¸¤ä¸ªå­ç½ç»ï¼å¨ä»£ç é»è¾ä¸­ï¼å°±æ¯<strong>ååå«å®ä¹è®¾è®¡ç¼ç å¨åè§£ç å¨ï¼åå¨æ´ä½ç½ç»ä¸­è°ç¨</strong>ãæä»¬åç¹å±å¼å¦ä¸ï¼</p>
<h4 id="1ç¼ç å¨">ï¼1ï¼ç¼ç å¨</h4>
<pre><code class="language-python">class Encoder(nn.Module):
    def __init__(self, vocab_size, emb_dim, hidden_dim):
        super().__init__()
        # åµå¥å±
        self.embedding = nn.Embedding(vocab_size, emb_dim)
        # ä½¿ç¨åå LSTM
        self.lstm = nn.LSTM(emb_dim, hidden_dim, batch_first=True, bidirectional=True)
    def forward(self, x):
        embedded = self.embedding(x) 
        outputs, (hidden, cell) = self.lstm(embedded)
        # outputs: LSTM å¯¹æ¯ä¸ªæ¶é´æ­¥çè¾åº,ç¨äºæ³¨æåçç¸å³è®¡ç®ã
        # (hidden,cell): æåæ¶é´æ­¥çéèç¶æåç»èç¶æï¼æ¯è§£ç å¨çåå§è¾å¥ã
        return outputs, (hidden, cell)

</code></pre>
<h4 id="2è§£ç å¨">ï¼2ï¼è§£ç å¨</h4>
<pre><code class="language-python">class Decoder(nn.Module):
    def __init__(self, vocab_size, emb_dim, hidden_dim, use_attention=False):
        super().__init__()
        # è®¾ç½®åæ°ï¼é»è®¤ä¸ä½¿ç¨æ³¨æåæºå¶
        self.use_attention = use_attention
        # åµå¥å±
        self.embedding = nn.Embedding(vocab_size, emb_dim)
        # LSTM 
        self.lstm = nn.LSTM(emb_dim, hidden_dim, batch_first=True)
        if use_attention:
            # æ³¨æåè¯åå±ï¼å°è§£ç å¨ hidden ä¸ç¼ç å¨ outputs æ¼æ¥è®¡ç®æ³¨æååæ°
            self.attn = nn.Linear(hidden_dim + hidden_dim * 2, 1)
            # æ³¨æåç»åå±ï¼å°è§£ç å¨ hidden ä¸ä¸ä¸æåéèåä¸ºæç» LSTM è¾åº
            self.attn_combine = nn.Linear(hidden_dim + hidden_dim * 2, hidden_dim)

        # è¾åºå±ï¼å° LSTM è¾åºæ å°å°è¯è¡¨ç»´åº¦ï¼é¢æµä¸ä¸ä¸ª token
        self.out = nn.Linear(hidden_dim, vocab_size)

    def forward(self, input_step, hidden_cell, encoder_outputs):
        embedded = self.embedding(input_step)
        # LSTM ååè®¡ç®ï¼å¾å°å½åæ¶é´æ­¥è¾åºåæ°ç hidden/cell
        lstm_out, hidden_cell = self.lstm(embedded, hidden_cell)
        # å»ææ¶é´ç»´åº¦ï¼æ¹ä¾¿æ³¨æåè®¡ç®
        query = lstm_out.squeeze(1)

        if self.use_attention:
            # æ©å± queryï¼å®éä¸å°±æ¯æå½åè§£ç éèç¶æå¤å¶å°åç¼ç éèç¶ææ°ç¸åã
            query_exp = query.unsqueeze(1).repeat(1, encoder_outputs.size(1), 1)
            # è®¡ç®æ³¨æååæ°
            attn_scores = self.attn(torch.cat((query_exp, encoder_outputs), dim=-1)).squeeze(-1)
            # è½¬ä¸ºæ³¨æåæé
            attn_weights = F.softmax(attn_scores, dim=-1).unsqueeze(1)
            # è®¡ç®ä¸ä¸æåé bmm:æ¹éç©éµä¹æ³
            context = torch.bmm(attn_weights, encoder_outputs).squeeze(1)
            # å° query ä¸ä¸ä¸æåéèå
            combined = torch.cat((query, context), dim=1)
            output = torch.tanh(self.attn_combine(combined))
        else:
            # ä¸ä½¿ç¨æ³¨æåæ¶ï¼ç´æ¥ç¨ LSTM è¾åºé¢æµ
            output = query

        # è¾åºå±
        output = self.out(output)
        return output, hidden_cell
</code></pre>
<h4 id="3æ´ä½ç½ç»">ï¼3ï¼æ´ä½ç½ç»</h4>
<pre><code class="language-python">class Seq2Seq(nn.Module):  
    def __init__(self, encoder, decoder):  
        super().__init__()  
        # ç¼ç å¨åè§£ç å¨ç´æ¥ä½ä¸ºåå§ååæ°ï¼å¨ä¸»å½æ°ä¸­åå»ºä¼ å¥
        self.encoder = encoder  
        self.decoder = decoder 
         
    def forward(self, src, tgt):  
        # src:æ ·æ¬ tgt:æ ç­¾
        # ç¼ç å¨
        enc_outputs, (hidden, cell) = self.encoder(src)

        # è¿éæ¯åå¹¶åå LSTM ç hidden/cell
        # å°ä¸¤ä¸ªæ¹åç hidden/cell å¨å±ç»´åº¦ä¸åå¼ï¼åæ±åææ¼æ¥ä½ä¸ºè§£ç å¨åå§ç¶æ
        hidden = hidden.view(2, -1, hidden.size(-1)).sum(dim=0, keepdim=True)
        cell   = cell.view(2, -1, cell.size(-1)).sum(dim=0, keepdim=True)
        dec_hidden = (hidden, cell)  # è§£ç å¨åå§ç¶æ

        outputs = []  # å­å¨æ¯ä¸ªæ¶é´æ­¥çè¾åº

        # è§£ç å¨
        for t in range(tgt.size(1)):
            # è®­ç»é»è¾ï¼æ¯æ­¥ä½¿ç¨çå®æ ç­¾ä½ä¸ºè¾å¥
            out, dec_hidden = self.decoder(
                tgt[:, t].unsqueeze(1), dec_hidden, enc_outputs
            )
            # tgt[:, t] å ä¸ºæ¹æ¬¡è®­ç»ï¼æ¯æ¬¡è¦å»åç¬¬ t å
            # out: å½åæ¶é´æ­¥é¢æµç token æ¦çåå¸ [batch_size, vocab_size]
            # dec_hidden: æ´æ°åçè§£ç å¨éèç¶æ
            outputs.append(out)  # ä¿å­å½åè¾åº

        # å°æææ¶é´æ­¥è¾åºå å ä¸ºæç»ç»æã
        return torch.stack(outputs, dim=1)

</code></pre>
<p>è¿æ ·æä»¬å°±å®æäºæ¨¡åçè®¾è®¡ï¼ç»§ç»­ä¸ä¸é¨ååå®¹ã</p>
<h2 id="23-è§£ç å½æ°">2.3 è§£ç å½æ°</h2>
<p>è¿æ¯çè®ºé¨åæå°çï¼å¨æ¨çé¶æ®µï¼è§£ç å¨çè¾åºå¶å®æ¯ä¸ç³»åçæ¦çåå¸ï¼æä»¬<strong>ä½¿ç¨è§£ç å½æ°ï¼å°±æ¯è®¾è®¡ç¸åºçæç´¢ç­ç¥æ¥å¯»æ¾æå¤§çèåæ¦çï¼å¾å°æç»è¾åºã</strong><br>
è¿éï¼æä»¬å®ä¹å®æ´çè§£ç å½æ°ï¼<strong>ä¸»é»è¾ä¸ºè´ªå¿è§£ç ï¼è¡¥åææç´¢çç¸å³é»è¾å¹¶éè¿åæ°éæ©æ¯å¦ä½¿ç¨</strong>ï¼</p>
<pre><code class="language-python">def decode(model, input_tensor, use_beam_search=False, beam_width=3, max_len=20):
    """
    åæ°ï¼
    - model: å·²è®­ç»ç Seq2Seq æ¨¡åï¼åå« encoder å decoderï¼
    - input_tensor: è¾å¥åºåç tensorï¼ä¸ä¸ªæ ·æ¬ï¼
    - use_beam_search: æ¯å¦ä½¿ç¨ææç´¢
    - beam_width: ææç´¢æ¶çåéæ°é
    - max_len: è§£ç æå¤§é¿åº¦
    """
    model.eval()  # è¯ä¼°æ¨¡å¼
    with torch.no_grad():  
        input_tensor = input_tensor.unsqueeze(0) 
        # ç¼ç å¨ä¼ æ­
        enc_outputs, (hidden, cell) = model.encoder(input_tensor)
        hidden = hidden.view(2, -1, hidden.size(-1)).sum(dim=0, keepdim=True)
        cell   = cell.view(2, -1, cell.size(-1)).sum(dim=0, keepdim=True)
        dec_hidden = (hidden, cell)  # è§£ç å¨åå§ç¶æ
        
        # è´ªå¿è§£ç 
        if not use_beam_search:
            # åå§è§£ç è¾å¥ï¼SOSï¼åå§ç¬¦ï¼è¿éæ¯ç®åä¸ºäº \t
            dec_input = torch.tensor([[target_token_index['\t']]], device=device)
            result = []
            for _ in range(max_len):
                # è§£ç å¨ä¼ æ­
                out, dec_hidden = model.decoder(dec_input, dec_hidden, enc_outputs)
                # åå½åæ¶é´æ­¥æå¤§æ¦çç token
                pred = out.argmax(dim=-1)
                token = pred.item()
                if token == target_token_index['\n']:  # éå° EOS åæ­¢ï¼åæ ·ç®åä¸º\n
                    break
                result.append(reverse_target_char_index[token])  # ä¿å­å­ç¬¦
                dec_input = pred.unsqueeze(0)  # ä¸ä¸æ­¥è¾å¥ä¸ºå½åé¢æµï¼å³èªåå½ã

            return ''.join(result)  # è¿åè§£ç åçå­ç¬¦ä¸²

       
        # ææç´¢
        candidates = [([target_token_index['\t']], 0.0, dec_hidden)]  # åå§ååéåºå
        for _ in range(max_len):
            new_cands = []
            for seq, score, h in candidates:
                # å¦æåºåå·²éå° EOSï¼ä¿çåé
                if seq[-1] == target_token_index['\n']:
                    new_cands.append((seq, score, h))
                    continue
                # å½åæ¶é´æ­¥è¾å¥
                inp = torch.tensor([[seq[-1]]], device=device)
                out, new_h = model.decoder(inp, h, enc_outputs)
                # è®¡ç® log æ¦ç
                log_probs = F.log_softmax(out, dim=-1).squeeze(0)
                # å top-k åé
                top_vals, top_idx = log_probs.topk(beam_width)
                for v, idx in zip(top_vals, top_idx):
                    new_seq = seq + [idx.item()]  # æ©å±åºå
                    new_score = score + v.item()  # æ´æ°ç´¯ç§¯ log æ¦ç
                    new_cands.append((new_seq, new_score, new_h))
            # æç´¯ç§¯æ¦çæåºï¼ä¿çå beam_width ä¸ªåºå
            candidates = sorted(new_cands, key=lambda x: x[1], reverse=True)[:beam_width]
        # æç»éæ©æ¦çæé«çåºå
        best = candidates[0][0]
        # å»ææ§å¶ç¬¦ï¼è½¬æ¢ä¸ºæç»å­ç¬¦
        return ''.join(reverse_target_char_index.get(i, '') 
                       for i in best[1:] if i != target_token_index['\n'])

</code></pre>
<p>è§£ç çé»è¾ä¹è¢«ä½¿ç¨å¨ä¹åçè¯ä¼°ç¯èä¸­ã</p>
<h2 id="24-è¯ä¼°ææ belu-åå®å¨å¹éç">2.4 è¯ä¼°ææ ï¼BELU åå®å¨å¹éç</h2>
<p>èªç¶ï¼å¨å®æè®­ç»åï¼æä»¬è¦æç¸åºçææ æ¥è¿è¡è¯ä¼°ï¼é¦åå°±æ¯æä»¬å¨çè®ºé¨åä»ç»ç BELU ï¼å®éè¿è®¡ç®è¾åºåæ ç­¾å¨ä¸åå°ºåº¦ä¸çå¹éåº¦æ¥è¯ä¼°æ¨¡åææã<br>
ä½æ¯ï¼æä»¬è¯´ï¼BELU è¿ç±»è¯­è¨ææ ä½¿ç¨çåå æ¯å ä¸ºå­å¨âåä¹ä¸åå½¢âçæåµã<br>
è<strong>å¨æ¥æç¿»è¯éï¼ç¿»è¯ç»ææ¯å¯ä¸çï¼éä¸ä¸ªæ°å­å°±æ¯å®å¨ä¸åçä¸å¤©ã</strong><br>
å æ­¤ï¼æä»¬åæå·¥å®ä¹ä¸ä¸ªå®å¨å¹éçï¼è¾åºåæ ç­¾åªæç¸ååä¸ç¸åä¸¤ç§æåµã<br>
è¿æ ·ï¼<strong>æä»¬ä½¿ç¨ BELU æ¥è¯ä¼°åºåæ¨¡åæåçå¤§è´ææï¼åç¨å®å¨å¹éçæ¥è§å¯å¨æ¥æç¿»è¯ä»»å¡ä¸­æ¨¡åççæ­£æ§è½ã</strong></p>
<pre><code class="language-python">from nltk.translate.bleu_score import sentence_bleu, SmoothingFunction
# BLEU
def evaluate_bleu(model, test_enc_input, test_targets, use_beam_search=False, beam_width=3):
    total_bleu = 0
    # BLEU å¹³æ»æ¹æ³ï¼é¿åç­å¥å¯¼è´åæ°è¿ä½
    smoother = SmoothingFunction().method4

    for i in range(len(test_enc_input)):
        # ä½¿ç¨ decode å½æ°çæé¢æµåºå
        pred = decode(model, test_enc_input[i], use_beam_search, beam_width)
        # å»æç®æ åºåçèµ·å§ç¬¦åç»æç¬¦
        true = test_targets[i][1:-1]
        # BLEU æ¥ååè¡¨å½¢å¼ï¼ref æ¯åèåºååè¡¨ï¼hyp æ¯é¢æµåºå
        ref = [list(true)]
        hyp = list(pred)
        # è®¡ç®å½åæ ·æ¬ BLEU åæ°
        bleu = sentence_bleu(ref, hyp, smoothing_function=smoother)
        total_bleu += bleu

    # å¹³å BLEU åæ°ï¼å¹¶è½¬æ¢ä¸ºç¾åæ¯
    avg_bleu = total_bleu / len(test_enc_input) * 100
    print(f"BLEU: {avg_bleu:.2f}")
    return avg_bleu

# å®å¨å¹éç
def evaluate_exact_match(model, test_enc_input, test_targets, use_beam_search=False, beam_width=3):
    correct = 0
    total = len(test_enc_input)
    for i in range(total):
        pred = decode(model, test_enc_input[i], use_beam_search, beam_width)
        true = test_targets[i][1:-1]
        # å¤æ­é¢æµä¸çå®æ¯å¦å®å¨ä¸è´
        if pred == true:
            correct += 1
    acc = correct / total * 100
    print(f"å®å¨å¹éç: {acc:.2f}%")
    return acc

</code></pre>
<p><strong>è¿éåå¼åä¸¤ä¸ªææ æ¹ä¾¿æ¼ç¤ºååç¬è°ç¨ï¼å®éä¸ï¼æäºèçååé¨åé»è¾åå¨ä¸èµ·æ¯æ´é«æçåæ³ã</strong><br>
å°æ­¤ï¼éè¦å¼ºè°çé¨åå°±å¨é¨å®ä¹å®æ¯ï¼æä»¬å¼å§æ­£å¼è¿è¡ã</p>
<h2 id="25-è¿è¡ææ">2.5 è¿è¡ææ</h2>
<p>æä»¬è®¾ç½®åæ°å¦ä¸ï¼</p>
<pre><code class="language-python">EMB_DIM = 64  
HIDDEN_DIM = 256  
EPOCHS = 10  
BATCH_SIZE = 128  
LR = 0.001
</code></pre>
<p>ä¸é¢ï¼å°±æ¥åæåµççææï¼</p>
<h4 id="1ä¸ä½¿ç¨æ³¨æåæºå¶ä½¿ç¨è´ªå¿è§£ç ">ï¼1ï¼ä¸ä½¿ç¨æ³¨æåæºå¶ï¼ä½¿ç¨è´ªå¿è§£ç </h4>
<p>å¨è¿ä¸ªæ¡ä»¶ä¸ï¼æä»¬å®ä¹ä¸»å½æ°å¦ä¸ï¼</p>
<pre><code class="language-python">if __name__ == "__main__":  
	EMB_DIM = 64  
	HIDDEN_DIM = 256  
	EPOCHS = 10  
	BATCH_SIZE = 128  
	LR = 0.001
	# å³é®è®¾ç½®
    USE_ATTENTION    = False  
    USE_BEAM_SEARCH  = False  
    BEAM_WIDTH       = 3  
  
    print(f"\n=== éç½® ===")  
    print(f"ä½¿ç¨æ³¨æå: {USE_ATTENTION}")  
    print(f"ä½¿ç¨ææç´¢: {USE_BEAM_SEARCH} (beam width = {BEAM_WIDTH if USE_BEAM_SEARCH else 'No'})")  
  
    encoder = Encoder(num_encoder_tokens, EMB_DIM, HIDDEN_DIM).to(device)  
    decoder = Decoder(num_decoder_tokens, EMB_DIM, HIDDEN_DIM, use_attention=USE_ATTENTION).to(device)  
    model = Seq2Seq(encoder, decoder).to(device)  
  
    print("\nå¼å§è®­ç»...")  
    train_time = train(model, epochs=EPOCHS, batch_size=BATCH_SIZE, lr=LR)  
  
    print("\nè¯ä¼°ä¸­...")  
    bleu = evaluate_bleu(model, test_encoder_input, test_targets,  
                         use_beam_search=USE_BEAM_SEARCH, beam_width=BEAM_WIDTH)  
    exact_acc = evaluate_exact_match(model, test_encoder_input, test_targets,  
                                     use_beam_search=USE_BEAM_SEARCH, beam_width=BEAM_WIDTH)  
  
	print("\n=== æ½åæµè¯æ ·æ¬è¾åº ===")  
	sample_indices = random.sample(range(len(test_encoder_input)), 10)  
	for i in sample_indices:  
	    src = test_inputs[i]  
	    true = test_targets[i][1:-1]  
	    pred,_ = decode(model, test_encoder_input[i],  
	                  use_beam_search=USE_BEAM_SEARCH, beam_width=BEAM_WIDTH)  
	    print(f"Human  : {src} | True  : {true} | Predicted  : {pred}")
</code></pre>
<p>ç»æå¦ä¸ï¼<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202602/3708248-20260205162800621-1772145123.png" alt="image.png" loading="lazy"></p>
<p>å¾çäºä»»å¡æ¬èº«ååææ°æ®è¾ä¸ºç®åï¼å¯ä»¥åç°ææ è¿ä¸éï¼æä»¬ä¸çæ¥åæ ï¼ç»§ç»­ä¸ä¸æ­¥è®¾ç½®è¿è¡å¯¹æ¯ã</p>
<h4 id="2ä¸ä½¿ç¨æ³¨æåæºå¶ä½¿ç¨ææç´¢">ï¼2ï¼ä¸ä½¿ç¨æ³¨æåæºå¶ï¼ä½¿ç¨ææç´¢</h4>
<p>è¿æ¬¡ï¼è®¾ç½®ä¸»å½æ°åæ°å¦ä¸ï¼</p>
<pre><code class="language-python">USE_ATTENTION    = False  
USE_BEAM_SEARCH  = True # ä½¿ç¨ææç´¢ 
BEAM_WIDTH       = 3 # æå®½
</code></pre>
<p>ççç»æï¼<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202602/3708248-20260205162801820-1581242608.png" alt="image.png" loading="lazy"></p>
<p>ææ å¥½åæææåï¼ä½ä¹å¯è½æ¯è®­ç»ä¸­çå¶ç¶æ§ï¼æä»¬åå¢å æå®½ççï¼</p>
<pre><code class="language-python">BEAM_WIDTH       = 10 
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3708248/202602/3708248-20260205162800857-1336184228.png" alt="image.png" loading="lazy"><br>
å¯ä»¥åç°ï¼<strong>éçæå®½çå¢å ï¼è§£ç æ¶é´ææ¾å¢å ï¼èææ æµ®å¨ä¸å¤§</strong>ï¼è¿è¯´æéå¶ææ çå³é®å ç´ å¯è½ä¸æ¯æç´¢ç­ç¥ã<br>
ç±æ­¤ï¼æä»¬è¿å¥ä¸ä¸æ­¥ï¼</p>
<h4 id="3ä½¿ç¨æ³¨æåæºå¶">ï¼3ï¼ä½¿ç¨æ³¨æåæºå¶</h4>
<p>ç°å¨ï¼è®¾ç½®åæ°å¦ä¸ï¼</p>
<pre><code class="language-python">USE_ATTENTION    = True # ä½¿ç¨æ³¨æåæºå¶  
USE_BEAM_SEARCH  = True  
BEAM_WIDTH       = 3 
</code></pre>
<p>ççç»æï¼<br>
<img src="https://img2024.cnblogs.com/blog/3708248/202602/3708248-20260205162800597-1996349670.png" alt="image.png" loading="lazy"></p>
<p>å¥½åä¹æ²¡ä»ä¹ç¨åï¼ ä½ ä¼åç°ï¼<strong>ä½¿ç¨æ³¨æåæºå¶åï¼è®­ç»æ¶é´å ç¸å³è®¡ç®ææ¾å¢å ï¼ä½æ¯ææ å¹¶æ²¡æææ¾æåã</strong><br>
å®éä¸ï¼è¿åæä»¬çæ¥æç¿»è¯ä»»å¡æ¬èº«çç¹ç¹æå³ï¼</p>
<ol>
<li><strong>è¾å¥è¾åºåºåè¾ç­</strong>ï¼æ¯ä¸ªæ ·æ¬éå¸¸åªæ 5~15 ä¸ªå­ç¬¦å·¦å³ï¼LSTM å¾å®¹æå¨æ²¡ææ³¨æåçæåµä¸å°±ææå°åºåæ´ä½ä¿¡æ¯ã</li>
<li><strong>ä¿¡æ¯å¯¹é½è¾ç®å</strong>ï¼æ¥æç¿»è¯æ¬è´¨ä¸æ¯å­ç¬¦çº§çå¯¹é½æ å°ï¼ä¾å¦ âJan 5, 2003â â â2003-01-05âï¼å ä¹ä¸å­å¨å¤æçé¿è·ç¦»ä¾èµã</li>
</ol>
<p>æ³¨æåæºå¶æææ¾çä½ç¨æ¯å¨åºåè¾é¿æè¾å¥è¾åºå³ç³»å¤ææ¶ï¼å¸®å©è§£ç å¨èç¦å°ç¸å³çç¼ç ç¶æãèå¯¹äºç°å¨è¿ç§ç­åºåãè§åæ§å¼ºçä»»å¡ï¼å¶è®¡ç®ææ¬å¢å ï¼èå¸¦æ¥çæ§è½æåå¾æéã</p>
<p>å¨è¿ä¸ªä»»å¡ä¸­ï¼æ³è¦ææ ç»§ç»­å¢å ï¼æä¸ä¸ªå¾ç®åçæ¹æ³å°±æ¯<strong>å¨èæ¬ä¸­å¢å æä»¬äººå·¥åæçæ°æ®é</strong>ï¼å°±ä¸åå±ç¤ºäºã</p>
<p><strong>è³æ­¤ï¼å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨äºè¯¾åäºå¨çåå®¹å°±å¨é¨ç»æäºï¼ä¹åä¼åºä¸ä¸ªå®æ´çç®å½ã</strong></p>
<h1 id="3-éå½">3. éå½</h1>
<h2 id="31-æ°æ®åæ">3.1 æ°æ®åæ</h2>
<pre><code class="language-python">import torch
import random
import numpy as np
from datetime import datetime, timedelta
from sklearn.model_selection import train_test_split

device = torch.device("cuda" if torch.cuda.is_available() else "cpu")
PAD_TOKEN = "&lt;PAD&gt;"

MONTHS_FULL = [
    "January", "February", "March", "April", "May", "June",
    "July", "August", "September", "October", "November", "December"
]
MONTHS_ABBR = ["Jan", "Feb", "Mar", "Apr", "May", "Jun",
               "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]

HUMAN_TEMPLATES = [
    "{day} {month} {year}",
    "{month} {day}, {year}",
    "{day} of {month}, {year}",
    "{month} {day} {year}",
    "{day}/{month_num}/{year_short}",
    "{month_num}/{day}/{year_short}",
    "{weekday}, {day} {month_abbr} {year}",
    "{month_abbr} {day}th {year_short}",
    "{year}-{month_num}-{day}",
    "The {day}{day_suffix} of {month}, {year}",
    "{day}th {month_abbr}, {year}",
    "{month} the {day}{day_suffix}, {year}",
    "Date: {year}/{month_num}/{day}",
    "{day} in Roman: {roman_day} {month} {year}",
    "{month_abbr}. {day}, '{year_short}",
]

def roman_numeral(n):
    vals = (10, 9, 5, 4, 1)
    nums = ('X', 'IX', 'V', 'IV', 'I')
    result = ""
    for v, r in zip(vals, nums):
        while n &gt;= v:
            result += r
            n -= v
    return result

def random_date(start_year=1900, end_year=2100):
    start = datetime(start_year, 1, 1)
    end = datetime(end_year, 12, 31)
    delta = end - start
    return start + timedelta(days=random.randint(0, delta.days))

def human_readable_date(date):
    template = random.choice(HUMAN_TEMPLATES)
    day = date.day
    month_idx = date.month - 1
    month_full = MONTHS_FULL[month_idx]
    month_abbr = MONTHS_ABBR[month_idx]
    year = date.year
    month_num = str(date.month).zfill(2)
    year_short = str(year % 100).zfill(2)
    weekday = date.strftime("%A")

    day_suffix = "th"
    if day % 10 == 1 and day != 11: day_suffix = "st"
    elif day % 10 == 2 and day != 12: day_suffix = "nd"
    elif day % 10 == 3 and day != 13: day_suffix = "rd"

    day_str = str(day)
    roman_day = roman_numeral(day) if random.random() &lt; 0.2 else day_str

    return template.format(
        day=day_str,
        day_suffix=day_suffix,
        month=month_full,
        month_abbr=month_abbr,
        year=year,
        month_num=month_num,
        year_short=year_short,
        weekday=weekday,
        roman_day=roman_day
    )

def machine_readable_date(date):
    return date.strftime("%Y-%m-%d")

def generate_date_pair():
    d = random_date()
    return human_readable_date(d), machine_readable_date(d)


NUM_SAMPLES = 10000
input_texts, target_texts = [], []

for _ in range(NUM_SAMPLES):
    human, machine = generate_date_pair()
    input_texts.append(human)
    target_texts.append('\t' + machine + '\n')

train_inputs, test_inputs, train_targets, test_targets = train_test_split(
    input_texts, target_texts, test_size=0.2, random_state=42
)

all_input_chars = [PAD_TOKEN] + sorted(set(''.join(input_texts)))
all_target_chars = [PAD_TOKEN] + sorted(set(''.join(target_texts)))

input_token_index = {c: i for i, c in enumerate(all_input_chars)}
target_token_index = {c: i for i, c in enumerate(all_target_chars)}

reverse_input_char_index = {i: c for c, i in input_token_index.items()}
reverse_target_char_index = {i: c for c, i in target_token_index.items()}

max_encoder_len = max(len(txt) for txt in input_texts)
max_decoder_len = max(len(txt) for txt in target_texts)

num_encoder_tokens = len(all_input_chars)
num_decoder_tokens = len(all_target_chars)

print(f"max enc len: {max_encoder_len}, max dec len: {max_decoder_len}")
print(f"input vocab size: {num_encoder_tokens}, target vocab size: {num_decoder_tokens}")

def texts_to_tensor(texts, token_index, max_len):
    pad_idx = token_index[PAD_TOKEN]
    data = np.full((len(texts), max_len), pad_idx, dtype=np.int64)
    for i, txt in enumerate(texts):
        for t, char in enumerate(txt):
            if t &lt; max_len:
                data[i, t] = token_index[char]
    return torch.tensor(data, dtype=torch.long, device=device)

train_encoder_input = texts_to_tensor(train_inputs, input_token_index, max_encoder_len)
train_decoder_input = texts_to_tensor(train_targets, target_token_index, max_decoder_len)

test_encoder_input = texts_to_tensor(test_inputs, input_token_index, max_encoder_len)
test_decoder_input = texts_to_tensor(test_targets, target_token_index, max_decoder_len)


dataset_pt = {
    'train_encoder_input': train_encoder_input,
    'train_decoder_input': train_decoder_input,
    'test_encoder_input': test_encoder_input,
    'test_decoder_input': test_decoder_input,
    'input_token_index': input_token_index,
    'target_token_index': target_token_index,
    'reverse_input_char_index': reverse_input_char_index,
    'reverse_target_char_index': reverse_target_char_index,
    'max_encoder_len': max_encoder_len,
    'max_decoder_len': max_decoder_len,
    'num_encoder_tokens': num_encoder_tokens,
    'num_decoder_tokens': num_decoder_tokens
}

torch.save(dataset_pt, "date_dataset.pt")
print("å·²ä¿å­ï¼date_dataset.pt")



def tensor_to_numpy(t):
    return t.detach().cpu().numpy()

dataset_npz = {
    "train_encoder_input": tensor_to_numpy(train_encoder_input),
    "train_decoder_input": tensor_to_numpy(train_decoder_input),
    "test_encoder_input": tensor_to_numpy(test_encoder_input),
    "test_decoder_input": tensor_to_numpy(test_decoder_input),

    "input_token_index": np.array(input_token_index, dtype=object),
    "target_token_index": np.array(target_token_index, dtype=object),
    "reverse_input_char_index": np.array(reverse_input_char_index, dtype=object),
    "reverse_target_char_index": np.array(reverse_target_char_index, dtype=object),

    "max_encoder_len": max_encoder_len,
    "max_decoder_len": max_decoder_len,
    "num_encoder_tokens": num_encoder_tokens,
    "num_decoder_tokens": num_decoder_tokens
}

np.savez("date_dataset.npz", **dataset_npz)
print("å·²ä¿å­ï¼date_dataset.npz\n")

def decode(tensor_row, reverse_dict):
    return ''.join(
        reverse_dict[idx.item()]
        for idx in tensor_row
        if reverse_dict[idx.item()] != PAD_TOKEN
    )

print("ç¤ºä¾æ°æ®ï¼")
for i in range(20):
    src = decode(train_encoder_input[i], reverse_input_char_index)
    tgt = decode(train_decoder_input[i], reverse_target_char_index)
    print(f"[{i+1}] {src}  ==&gt;  {tgt.strip()}")
</code></pre>
<h2 id="32-æ¥ææ ¼å¼ç¿»è¯-pytorchç">3.2 æ¥ææ ¼å¼ç¿»è¯-PyTorchç</h2>
<pre><code class="language-python">import random  
import torch  
import torch.nn as nn  
import torch.nn.functional as F  
from torch import optim  
import time  
from nltk.translate.bleu_score import sentence_bleu, SmoothingFunction  
device = torch.device("cuda" if torch.cuda.is_available() else "cpu")  
  
data = torch.load("date_dataset.pt", map_location=device)  
  
train_encoder_input = data['train_encoder_input']  
train_decoder_input = data['train_decoder_input']  
test_encoder_input  = data['test_encoder_input']  
test_decoder_input  = data['test_decoder_input']  
  
input_token_index = data['input_token_index']  
target_token_index = data['target_token_index']  
reverse_target_char_index = data['reverse_target_char_index']  
  
num_encoder_tokens = data['num_encoder_tokens']  
num_decoder_tokens = data['num_decoder_tokens']  
  
max_encoder_len = data['max_encoder_len']  
max_decoder_len = data['max_decoder_len']  
  
PAD_TOKEN = "&lt;PAD&gt;"  
reverse_input_char_index = {i: c for c, i in input_token_index.items()}  
  
def tensor_to_text(tensor_row, reverse_dict):  
    return ''.join(  
        reverse_dict[idx.item()]  
        for idx in tensor_row  
        if reverse_dict[idx.item()] != PAD_TOKEN  
    )  
  
test_inputs = [tensor_to_text(test_encoder_input[i], reverse_input_char_index)  
               for i in range(len(test_encoder_input))]  
  
test_targets = [tensor_to_text(test_decoder_input[i], reverse_target_char_index)  
                for i in range(len(test_decoder_input))]  
  
class Encoder(nn.Module):  
    def __init__(self, vocab_size, emb_dim, hidden_dim):  
        super().__init__()  
        self.embedding = nn.Embedding(vocab_size, emb_dim)  
        self.lstm = nn.LSTM(emb_dim, hidden_dim, batch_first=True, bidirectional=True)  
  
    def forward(self, x):  
        embedded = self.embedding(x)  
        outputs, (hidden, cell) = self.lstm(embedded)  
        return outputs, (hidden, cell)  
  
class Decoder(nn.Module):  
    def __init__(self, vocab_size, emb_dim, hidden_dim, use_attention=False):  
        super().__init__()  
        self.use_attention = use_attention  
        self.embedding = nn.Embedding(vocab_size, emb_dim)  
        self.lstm = nn.LSTM(emb_dim, hidden_dim, batch_first=True)  
  
        if use_attention:  
            self.attn = nn.Linear(hidden_dim + hidden_dim * 2, 1)  
            self.attn_combine = nn.Linear(hidden_dim + hidden_dim * 2, hidden_dim)  
  
        self.out = nn.Linear(hidden_dim, vocab_size)  
  
    def forward(self, input_step, hidden_cell, encoder_outputs):  
        embedded = self.embedding(input_step)  
        lstm_out, hidden_cell = self.lstm(embedded, hidden_cell)  
  
        query = lstm_out.squeeze(1)  
  
        if self.use_attention:  
            query_exp = query.unsqueeze(1).repeat(1, encoder_outputs.size(1), 1)  
            attn_scores = self.attn(torch.cat((query_exp, encoder_outputs), dim=-1)).squeeze(-1)  
            attn_weights = F.softmax(attn_scores, dim=-1).unsqueeze(1)  
            context = torch.bmm(attn_weights, encoder_outputs).squeeze(1)  
            combined = torch.cat((query, context), dim=1)  
            output = torch.tanh(self.attn_combine(combined))  
        else:  
            output = query  
  
        output = self.out(output)  
        return output, hidden_cell  
  
class Seq2Seq(nn.Module):  
    def __init__(self, encoder, decoder):  
        super().__init__()  
        self.encoder = encoder  
        self.decoder = decoder  
  
    def forward(self, src, tgt):  
        enc_outputs, (hidden, cell) = self.encoder(src)  
        hidden = hidden.view(2, -1, hidden.size(-1)).sum(dim=0, keepdim=True)  
        cell   = cell.view(2, -1, cell.size(-1)).sum(dim=0, keepdim=True)  
        dec_hidden = (hidden, cell)  
        outputs = []  
  
        for t in range(tgt.size(1)):  
            out, dec_hidden = self.decoder(tgt[:, t].unsqueeze(1), dec_hidden, enc_outputs)  
            outputs.append(out)  
  
        return torch.stack(outputs, dim=1)  
  
def train(model, epochs=10, batch_size=128, lr=0.001):  
    enc_optimizer = optim.Adam(model.encoder.parameters(), lr=lr)  
    dec_optimizer = optim.Adam(model.decoder.parameters(), lr=lr)  
    criterion = nn.CrossEntropyLoss(ignore_index=0)  
  
    start_time = time.time()  
  
    for epoch in range(epochs):  
        total_loss = 0  
        num_batches = 0  
        perm = torch.randperm(len(train_encoder_input))  
        for i in range(0, len(train_encoder_input), batch_size):  
            idx = perm[i:i+batch_size]  
            enc_in = train_encoder_input[idx]  
            dec_in_full = train_decoder_input[idx]  
            dec_in = dec_in_full[:, :-1]  
            dec_target = dec_in_full[:, 1:]  
  
            enc_optimizer.zero_grad()  
            dec_optimizer.zero_grad()  
  
            outputs = model(enc_in, dec_in)  
  
            loss = criterion(outputs.reshape(-1, num_decoder_tokens), dec_target.reshape(-1))  
            loss.backward()  
            enc_optimizer.step()  
            dec_optimizer.step()  
  
            total_loss += loss.item()  
            num_batches += 1  
  
        avg_loss = total_loss / num_batches  
        print(f"Epoch [{epoch+1}/{epochs}], Loss: {avg_loss:.4f}")  
  
    train_time = time.time() - start_time  
    print(f"è®­ç»æ»æ¶é´: {train_time:.2f} ç§")  
    return train_time  
  
import time  
  
def decode(model, input_tensor, use_beam_search=False, beam_width=3, max_len=20):  
    model.eval()  
    start_time = time.time()    
    with torch.no_grad():  
        input_tensor = input_tensor.unsqueeze(0)  
        enc_outputs, (hidden, cell) = model.encoder(input_tensor)  
        hidden = hidden.view(2, -1, hidden.size(-1)).sum(dim=0, keepdim=True)  
        cell   = cell.view(2, -1, cell.size(-1)).sum(dim=0, keepdim=True)  
        dec_hidden = (hidden, cell)  
  
        if not use_beam_search:  
            dec_input = torch.tensor([[target_token_index['\t']]], device=device)  
            result = []  
            for _ in range(max_len):  
                out, dec_hidden = model.decoder(dec_input, dec_hidden, enc_outputs)  
                pred = out.argmax(dim=-1)  
                token = pred.item()  
                if token == target_token_index['\n']:  
                    break  
                result.append(reverse_target_char_index[token])  
                dec_input = pred.unsqueeze(0)  
            decoded = ''.join(result)  
  
        else:  
            candidates = [([target_token_index['\t']], 0.0, dec_hidden)]  
            for _ in range(max_len):  
                new_cands = []  
                for seq, score, h in candidates:  
                    if seq[-1] == target_token_index['\n']:  
                        new_cands.append((seq, score, h))  
                        continue  
                    inp = torch.tensor([[seq[-1]]], device=device)  
                    out, new_h = model.decoder(inp, h, enc_outputs)  
                    log_probs = F.log_softmax(out, dim=-1).squeeze(0)  
                    k = min(beam_width, log_probs.size(0))    
                    top_vals, top_idx = log_probs.topk(k)  
                    for v, idx in zip(top_vals, top_idx):  
                        new_seq = seq + [idx.item()]  
                        new_score = score + v.item()  
                        new_cands.append((new_seq, new_score, new_h))  
                candidates = sorted(new_cands, key=lambda x: x[1], reverse=True)[:beam_width]  
  
            best = candidates[0][0]  
            decoded = ''.join(reverse_target_char_index.get(i, '') for i in best[1:] if i != target_token_index['\n'])  
  
    decode_time = time.time() - start_time  
    return decoded, decode_time  
  
  
def evaluate_bleu(model, test_enc_input, test_targets, use_beam_search=False, beam_width=3):  
    total_bleu = 0  
    total_time = 0  
    smoother = SmoothingFunction().method4  
  
    for i in range(len(test_enc_input)):  
        pred, dt = decode(model, test_enc_input[i], use_beam_search, beam_width)  
        total_time += dt  
        true = test_targets[i][1:-1]  
        ref = [list(true)]  
        hyp = list(pred)  
        bleu = sentence_bleu(ref, hyp, smoothing_function=smoother)  
        total_bleu += bleu  
  
    avg_bleu = total_bleu / len(test_enc_input) * 100  
    avg_time = total_time / len(test_enc_input)  
    print(f"BLEU: {avg_bleu:.2f} | å¹³åè§£ç æ¶é´: {avg_time:.4f} ç§/æ ·æ¬")  
    return avg_bleu, avg_time  
  
  
def evaluate_exact_match(model, test_enc_input, test_targets, use_beam_search=False, beam_width=3):  
    correct = 0  
    total = len(test_enc_input)  
  
    for i in range(total):  
        pred, _ = decode(model, test_enc_input[i], use_beam_search, beam_width)    
        true = test_targets[i][1:-1]    
        if pred == true:  
            correct += 1  
  
    acc = correct / total * 100  
    print(f"å®å¨å¹éç: {acc:.2f}%")  
    return acc  
  
if __name__ == "__main__":  
    EMB_DIM = 64  
    HIDDEN_DIM = 256  
    EPOCHS = 10  
    BATCH_SIZE = 128  
    LR = 0.001  
  
    USE_ATTENTION    = True  
    USE_BEAM_SEARCH  = True  
    BEAM_WIDTH       = 3  
  
    print(f"\n=== éç½® ===")  
    print(f"ä½¿ç¨æ³¨æå: {USE_ATTENTION}")  
    print(f"ä½¿ç¨ææç´¢: {USE_BEAM_SEARCH} (beam width = {BEAM_WIDTH if USE_BEAM_SEARCH else 'No'})")  
  
    encoder = Encoder(num_encoder_tokens, EMB_DIM, HIDDEN_DIM).to(device)  
    decoder = Decoder(num_decoder_tokens, EMB_DIM, HIDDEN_DIM, use_attention=USE_ATTENTION).to(device)  
    model = Seq2Seq(encoder, decoder).to(device)  
  
    print("\nå¼å§è®­ç»...")  
    train_time = train(model, epochs=EPOCHS, batch_size=BATCH_SIZE, lr=LR)  
  
    print("\nè¯ä¼°ä¸­...")  
    bleu = evaluate_bleu(model, test_encoder_input, test_targets,  
                         use_beam_search=USE_BEAM_SEARCH, beam_width=BEAM_WIDTH)  
    exact_acc = evaluate_exact_match(model, test_encoder_input, test_targets,  
                                     use_beam_search=USE_BEAM_SEARCH, beam_width=BEAM_WIDTH)  
  
    print("\n=== æ½åæµè¯æ ·æ¬è¾åº ===")  
    sample_indices = random.sample(range(len(test_encoder_input)), 10)  
    for i in sample_indices:  
        src = test_inputs[i]  
        true = test_targets[i][1:-1]  
        pred,_ = decode(model, test_encoder_input[i],  
                      use_beam_search=USE_BEAM_SEARCH, beam_width=BEAM_WIDTH)  
        print(f"Human  : {src} | True  : {true} | Predicted  : {pred}")
</code></pre>
<h2 id="33-æ¥ææ ¼å¼ç¿»è¯-tfç">3.3 æ¥ææ ¼å¼ç¿»è¯-TFç</h2>
<pre><code class="language-python">import numpy as np  
import tensorflow as tf  
from tensorflow.keras.layers import Embedding, LSTM, Dense, Bidirectional  
import random  
import time  
from nltk.translate.bleu_score import sentence_bleu, SmoothingFunction  
  
dataset = np.load("date_dataset.npz", allow_pickle=True)  
  
train_encoder_input = dataset['train_encoder_input']  
train_decoder_input = dataset['train_decoder_input']  
test_encoder_input = dataset['test_encoder_input']  
test_decoder_input = dataset['test_decoder_input']  
  
input_token_index = dataset['input_token_index'].item()  
target_token_index = dataset['target_token_index'].item()  
reverse_target_char_index = dataset['reverse_target_char_index'].item()  
  
num_encoder_tokens = int(dataset['num_encoder_tokens'])  
num_decoder_tokens = int(dataset['num_decoder_tokens'])  
max_encoder_len = int(dataset['max_encoder_len'])  
max_decoder_len = int(dataset['max_decoder_len'])  
  
reverse_input_char_index = {i: c for c, i in input_token_index.items()}  
  
PAD_TOKEN = "&lt;PAD&gt;"    
  
def tensor_to_text(tensor_row, reverse_dict):  
    return ''.join(  
        reverse_dict.get(int(idx), '')  
        for idx in tensor_row  
        if reverse_dict.get(int(idx), '') != PAD_TOKEN  
    )  
  
  
test_inputs = [tensor_to_text(test_encoder_input[i], reverse_input_char_index)  
               for i in range(len(test_encoder_input))]  
  
test_targets = [tensor_to_text(test_decoder_input[i], reverse_target_char_index)  
                for i in range(len(test_decoder_input))]  
  
class Encoder(tf.keras.Model):  
    def __init__(self, vocab_size, emb_dim, hidden_dim):  
        super(Encoder, self).__init__()  
        self.embedding = Embedding(vocab_size, emb_dim, mask_zero=True)  
        self.lstm = Bidirectional(  
            LSTM(hidden_dim, return_sequences=True, return_state=True)  
        )  
  
    def call(self, x):  
        embedded = self.embedding(x)  
        outputs, fw_h, fw_c, bw_h, bw_c = self.lstm(embedded)  
        hidden = tf.concat([fw_h, bw_h], axis=-1)  
        cell = tf.concat([fw_c, bw_c], axis=-1)  
        return outputs, (hidden, cell)  
  
  
class Decoder(tf.keras.layers.Layer):  
    def __init__(self, vocab_size, emb_dim, hidden_dim, use_attention=False):  
        super(Decoder, self).__init__()  
        self.use_attention = use_attention  
        self.embedding = Embedding(vocab_size, emb_dim, mask_zero=True)  
        self.lstm = LSTM(hidden_dim, return_sequences=False, return_state=True)  
        self.out = Dense(vocab_size)  
  
        if use_attention:  
            self.attn_W1 = Dense(hidden_dim)                 
            self.attn_W2 = Dense(hidden_dim)               
            self.attn_V  = Dense(1)  
            self.attn_combine = Dense(hidden_dim)  
  
    def call(self, input_step, hidden_cell, encoder_outputs):  
   
        embedded = self.embedding(input_step)            
        lstm_out, h, c = self.lstm(embedded, initial_state=hidden_cell)  
        query = lstm_out                                  
if self.use_attention:  
            score = self.attn_V(  
                tf.tanh(  
                    self.attn_W1(encoder_outputs) +  
                    self.attn_W2(query[:, tf.newaxis, :])  
                )  
            )                                             
  
            attn_weights = tf.nn.softmax(score, axis=1)   
  
            context = tf.reduce_sum(encoder_outputs * attn_weights, axis=1)  
            combined = tf.concat([query, context], axis=-1)  
            output = tf.tanh(self.attn_combine(combined))  
        else:  
            output = query  
  
        logits = self.out(output)                         
        return logits, (h, c)  
  
  
class Seq2Seq(tf.keras.Model):  
    def __init__(self, encoder, decoder):  
        super(Seq2Seq, self).__init__()  
        self.encoder = encoder  
        self.decoder = decoder  
  
    def call(self, src, tgt, training=True):  
        enc_outputs, (hidden, cell) = self.encoder(src)  
  
        hidden_fw, hidden_bw = tf.split(hidden, num_or_size_splits=2, axis=-1)  
        cell_fw, cell_bw = tf.split(cell, num_or_size_splits=2, axis=-1)  
  
        hidden = hidden_fw + hidden_bw  
        cell = cell_fw + cell_bw  
  
        dec_hidden = (hidden, cell)  
  
        outputs = []  
        for t in range(tgt.shape[1]):  
            step_input = tgt[:, t:t + 1]  
            logits, dec_hidden = self.decoder(  
                step_input, dec_hidden, enc_outputs  
            )  
            outputs.append(logits)  
  
        return tf.stack(outputs, axis=1)  
  
def train(model, epochs=10, batch_size=128, lr=0.001):  
    optimizer = tf.keras.optimizers.Adam(learning_rate=lr)  
    loss_fn = tf.keras.losses.SparseCategoricalCrossentropy(from_logits=True)  
  
    start_time = time.time()  
    n_samples = len(train_encoder_input)  
  
    for epoch in range(epochs):  
        total_loss = 0.0  
        num_batches = 0  
  
        indices = np.random.permutation(n_samples)  
        enc = train_encoder_input[indices]  
        dec = train_decoder_input[indices]  
  
        for i in range(0, n_samples, batch_size):  
            enc_batch = enc[i:i + batch_size]  
            dec_batch = dec[i:i + batch_size]  
  
            dec_in = dec_batch[:, :-1]  
            dec_tgt = dec_batch[:, 1:]  
  
            with tf.GradientTape() as tape:  
                logits = model(enc_batch, dec_in, training=True)  
                loss_value = loss_fn(dec_tgt, logits)  
                loss_value += tf.reduce_sum(model.losses)  
  
            grads = tape.gradient(loss_value, model.trainable_variables)  
            optimizer.apply_gradients(zip(grads, model.trainable_variables))  
  
            total_loss += float(loss_value)  
            num_batches += 1  
  
        avg_loss = total_loss / num_batches  
        print(f"Epoch [{epoch + 1}/{epochs}], Loss: {avg_loss:.4f}")  
  
    train_time = time.time() - start_time  
    print(f"è®­ç»ç¨æ¶: {train_time:.2f} ç§")  
    return train_time  
  
@tf.function  
def greedy_decode_step(decoder, dec_input, dec_hidden, enc_outputs):  
    logits, dec_hidden = decoder(dec_input, dec_hidden, enc_outputs)  
    return logits, dec_hidden  
  
  
def decode(model, input_tensor, use_beam_search=False, beam_width=3, max_len=20):  
    dummy_src = tf.zeros((1, max_encoder_len), dtype=tf.int32)  
    dummy_tgt = tf.zeros((1, 1), dtype=tf.int32)  
    _ = model(dummy_src, dummy_tgt, training=False)  
  
    start_time = time.time()  
  
    input_tensor = tf.expand_dims(input_tensor, 0)  
    enc_outputs, (hidden, cell) = model.encoder(input_tensor)  
  
    hidden_fw, hidden_bw = tf.split(hidden, num_or_size_splits=2, axis=-1)  
    cell_fw, cell_bw = tf.split(cell, num_or_size_splits=2, axis=-1)  
  
    hidden = hidden_fw + hidden_bw  
    cell = cell_fw + cell_bw  
  
    dec_hidden = (hidden, cell)  
  
    if not use_beam_search:  
        dec_input = tf.constant([[target_token_index['\t']]], dtype=tf.int32)  
        result = []  
        for _ in range(max_len):  
            logits, dec_hidden = greedy_decode_step(  
                model.decoder, dec_input, dec_hidden, enc_outputs  
            )  
            pred = tf.argmax(logits, axis=-1)  
            token = int(pred[0])  
            if token == target_token_index.get('\n', -1):  
                break  
            result.append(reverse_target_char_index.get(token, ''))  
            dec_input = pred[:, tf.newaxis]  
  
        decoded = ''.join(result)  
  
    else:  
        candidates = [([target_token_index['\t']], 0.0, dec_hidden)]  
        for _ in range(max_len):  
            new_cands = []  
            for seq, score, h_c in candidates:  
                if seq[-1] == target_token_index.get('\n', -1):  
                    new_cands.append((seq, score, h_c))  
                    continue  
                inp = tf.constant([[seq[-1]]], dtype=tf.int32)  
                logits, new_h_c = model.decoder(inp, h_c, enc_outputs)  
                log_probs = tf.nn.log_softmax(logits, axis=-1)[0]  
                top_vals, top_idx = tf.math.top_k(log_probs, k=beam_width)  
                for v, idx in zip(top_vals, top_idx):  
                    new_seq = seq + [int(idx)]  
                    new_score = score + float(v)  
                    new_cands.append((new_seq, new_score, new_h_c))  
  
            candidates = sorted(new_cands, key=lambda x: x[1], reverse=True)[:beam_width]  
  
        best_seq = candidates[0][0]  
        decoded = ''.join(  
            reverse_target_char_index.get(i, '') for i in best_seq[1:] if i != target_token_index.get('\n', -1))  
  
    decode_time = time.time() - start_time  
    return decoded, decode_time  
  
  
def evaluate_bleu(model, test_enc_input, test_targets, use_beam_search=False, beam_width=3):  
    total_bleu = 0  
    total_time = 0  
    smoother = SmoothingFunction().method4  
  
    for i in range(len(test_enc_input)):  
        pred, dt = decode(model, test_enc_input[i], use_beam_search, beam_width)  
        total_time += dt  
        true = test_targets[i][1:-1]    
        ref = [list(true)]  
        hyp = list(pred)  
        bleu = sentence_bleu(ref, hyp, smoothing_function=smoother)  
        total_bleu += bleu  
  
    avg_bleu = total_bleu / len(test_enc_input) * 100  
    avg_time = total_time / len(test_enc_input)  
    print(f"BLEU: {avg_bleu:.2f} | å¹³åè§£ç æ¶é´: {avg_time:.4f} ç§/æ ·æ¬")  
    return avg_bleu, avg_time  
  
  
def evaluate_exact_match(model, test_enc_input, test_targets, use_beam_search=False, beam_width=3):  
    correct = 0  
    total = len(test_enc_input)  
  
    for i in range(total):  
        pred, _ = decode(model, test_enc_input[i], use_beam_search, beam_width)  
        true = test_targets[i][1:-1]  
        if pred == true:  
            correct += 1  
  
    acc = correct / total * 100  
    print(f"å®å¨å¹éç: {acc:.2f}%")  
    return acc  
  
  
if __name__ == "__main__":  
    EMB_DIM = 64  
    HIDDEN_DIM = 256   
    BATCH_SIZE = 128  
    LR = 0.001  
  
    USE_ATTENTION = True  
    USE_BEAM_SEARCH = True  
    BEAM_WIDTH = 3  
  
    print(f"\n=== éç½® ===")  
    print(f"ä½¿ç¨æ³¨æå: {USE_ATTENTION}")  
    print(f"ä½¿ç¨ææç´¢: {USE_BEAM_SEARCH} (beam width = {BEAM_WIDTH if USE_BEAM_SEARCH else 'No'})")  
  
    encoder = Encoder(num_encoder_tokens, EMB_DIM, HIDDEN_DIM)  
    decoder = Decoder(num_decoder_tokens, EMB_DIM, HIDDEN_DIM, use_attention=USE_ATTENTION)  
    model = Seq2Seq(encoder, decoder)  
  
    print("\nå¼å§è®­ç»...")  
    train_time = train(model, epochs=EPOCHS, batch_size=BATCH_SIZE, lr=LR)  
  
    print("\nè¯ä¼°ä¸­...")  
    bleu = evaluate_bleu(model, test_encoder_input, test_targets,  
                         use_beam_search=USE_BEAM_SEARCH, beam_width=BEAM_WIDTH)  
    exact_acc = evaluate_exact_match(model, test_encoder_input, test_targets,  
                                     use_beam_search=USE_BEAM_SEARCH, beam_width=BEAM_WIDTH)  
  
    print("\n=== æ½åæµè¯æ ·æ¬è¾åº ===")  
    sample_indices = random.sample(range(len(test_encoder_input)), 10)  
    for i in sample_indices:  
        src = test_inputs[i]  
        true = test_targets[i][1:-1]  
        pred, _ = decode(model, test_encoder_input[i],  
                         use_beam_search=USE_BEAM_SEARCH, beam_width=BEAM_WIDTH)  
        print(f"Human  : {src} | True  : {true} | Predicted  : {pred}")
</code></pre>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.0020833333333333333" data-date-updated="2026-02-05 16:37">2026-02-05 16:34</span>&nbsp;
<a href="https://www.cnblogs.com/Goblinscholar">å¥å¸æå­¦è</a>&nbsp;
éè¯»(<span id="post_view_count">17</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19579899);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19579899', targetLink: 'https://www.cnblogs.com/Goblinscholar/p/19579899', title: 'å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨äºï¼èªç¶è¯­è¨å¤ç  ç¬¬ä¸å¨ï¼åºåæ¨¡åä¸æ³¨æåæºå¶ è¯¾åä¹ é¢ä¸ä»£ç å®è·µ' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ é¸¿èåºç¨å¼åUIåºç¡ç¬¬ä¸èï¼UIAbilityçå½å¨æå¨è§£æ ]]></title>
    <link>https://www.cnblogs.com/san-xiu/p/19579716</link>
    <guid>3ca5eda0bf9f7bfbdfaee80d9a97b4f5</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/san-xiu/p/19579716" title="åå¸äº 2026-02-05 15:55">
    <span role="heading" aria-level="2">é¸¿èåºç¨å¼åUIåºç¡ç¬¬ä¸èï¼UIAbilityçå½å¨æå¨è§£æ</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="å­¦ä¹ ç®æ ">ãå­¦ä¹ ç®æ ã</h2>
<ol>
<li>ææ¡UIAbilityæ ¸å¿çå½å¨ææ¹æ³çè§¦åæ¶æºãç³»ç»è¡ä¸ºåçº¦æè§åï¼</li>
<li>çè§£çå½å¨æä¸WindowStageçæ·±åº¦èå¨é»è¾ï¼æç¡®é¡µé¢å è½½ãäºä»¶è®¢éçæ¶æºï¼</li>
<li>ææ¡<code>onDestroy</code>åè°çç¹æ®è§¦åè§åï¼å«API 13ä¸é®æ¸çãè°è¯æ¨¡å¼ãterminateSelfè°ç¨åºæ¯ï¼ï¼</li>
<li>è½éè¿å®æéªè¯çå½å¨ææ§è¡é¡ºåºï¼ææ¡WindowStageäºä»¶çå¬çæ­£ç¡®æ¹å¼ï¼é¿åæ°æå¸¸è§æ··æ·ï¼</li>
<li>åºåâåºç¨éåå°âä¸âåºç¨éæ¯âçæ ¸å¿å·®å¼ï¼è§é¿çå½å¨æç¸å³çå¼åè¯¯åºã</li>
</ol>
<h2 id="æ¬èéç¹">ãæ¬èéç¹ã</h2>
<h3 id="1-æ ¸å¿é®é¢å¯¼å¥">1. æ ¸å¿é®é¢å¯¼å¥</h3>
<ul>
<li>åºç¨å¯å¨ãååå°ãååå°ãéåºæ¶ï¼UIAbilityä¼ç»ååªäºç¶æååï¼</li>
<li>çªå£çè·ç¦/å¤±ç¦ãåå°/åå°ç¶æè¯¥å¦ä½éè¿WindowStageäºä»¶çå¬ï¼</li>
<li>WindowStageçäºä»¶è®¢éä¸è§£ç»ï¼åå«åºå¨åªä¸ªçå½å¨ææ¹æ³ä¸­æ§è¡ï¼</li>
<li>ä¸åå³é­åºç¨çæ¹å¼ï¼æå¨è°ç¨APIãä¸é®æ¸çãè°è¯æ¨¡å¼ç§»é¤ä»»å¡ï¼å¯¹<code>onDestroy</code>è§¦åæä½å½±åï¼</li>
<li>ä¸ºä»ä¹é¡µé¢åªè½å¨<code>onWindowStageCreate</code>ä¸­å è½½ï¼ä¸è½å¨<code>onCreate</code>ä¸­å è½½ï¼</li>
</ul>
<h3 id="2-æ ¸å¿æ¦å¿µ">2. æ ¸å¿æ¦å¿µ</h3>
<p>UIAbilityçå½å¨ææ¯æUIAbilityä»åå»ºå°éæ¯çå¨æµç¨ï¼ç±ç³»ç»ç»ä¸è°åº¦ï¼åå«åå»ºãçªå£ç®¡çãååå°åæ¢ãéæ¯ç­æ ¸å¿é¶æ®µãéè¿éåçå½å¨ææ¹æ³ï¼å¯å¨ç¹å®æ¶æºå®æåå§åãèµæºç³è¯·/éæ¾ãé¡µé¢å è½½ç­æä½ï¼</p>
<p>çªå£çæ´»å¨ç¶æï¼è·ç¦/å¤±ç¦ãåå°/åå°ï¼ééè¿<code>WindowStage</code>äºä»¶çå¬å®ç°ï¼èéçå½å¨ææ¹æ³ã<br>
<code>onDestroy</code>ä½ä¸ºçå½å¨ææåä¸ä¸ªæ¹æ³ï¼å¶è§¦åä¸å¦åå³é­åºç¨çæ¹å¼ãAPIçæ¬ãåºç¨ç±»åï¼ææ å®åµçªï¼ãè¿è¡æ¨¡å¼ï¼è°è¯/æ­£å¼ï¼ç­å ç´ å½±åã</p>
<blockquote>
<p>æ¬èåå®¹å»¶ç¨<code>FirstApplication</code>å·¥ç¨,æ æ°å¢æä»¶ã ä½¿ç¨é»è®¤å¯å¨æ¨¡å¼singletonã</p>
</blockquote>
<h2 id="äºuiabilityçå½å¨ææ ¸å¿é¶æ®µä¸æ¹æ³">äºãUIAbilityçå½å¨ææ ¸å¿é¶æ®µä¸æ¹æ³</h2>
<h3 id="1-çå½å¨æå¯è§åç¤ºæå¾">1. çå½å¨æå¯è§åç¤ºæå¾</h3>
<p>çå½å¨æçå®æ´æµè½¬é»è¾å¯éè¿ä»¥ä¸ç¤ºæå¾ç´è§çè§£ï¼æ¶µçå¯å¨ãååå°åæ¢ãå³é­å¨æµç¨çæ¹æ³è§¦åé¡ºåºä¸WindowStageäºä»¶å³èï¼</p>
<p>ç¤ºæå¾è¯´æï¼å·¦ä¾§ä¸ºUIAbilityæ ¸å¿çå½å¨ææ¹æ³ï¼å³ä¾§ä¸ºå³èçWindowStageäºä»¶ï¼çªå£çè·ç¦/å¤±ç¦ãåå°/åå°ç¶æééè¿<code>windowStageEvent</code>äºä»¶çå¬å®ç°ï¼éæ¯é¶æ®µç<code>onDestroy</code>è§¦åè§åéç»åå³é­åºç¨çæ¹å¼å¤æ­ã</p>
<p><img alt="UIAbilityççå½å¨æç¤ºæå¾" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3730991/202602/3730991-20260205155157818-1758502701.png" class="lazyload"></p>
<h3 id="2-æ ¸å¿æ¹æ³">2. æ ¸å¿æ¹æ³</h3>
<p>ä»¥ä¸æ¯UIAbilityæ ¸å¿çå½å¨ææ¹æ³çè¯¦ç»è¯´æï¼èç¦åæ¹æ³çè§¦åæ¶æºãæ ¸å¿ä½ç¨ä¸æ§è¡æ¬¡æ°ï¼</p>
<h4 id="oncreatewant-launchparam"><code>onCreate(want, launchParam)</code></h4>
<ul>
<li><strong>è§¦åæ¶æº</strong>ï¼UIAbilityå®ä¾é¦æ¬¡åå»ºæ¶è§¦åï¼</li>
<li><strong>æ ¸å¿ä½ç¨</strong>ï¼å®æåºç¨å¨å±åå§åå·¥ä½ï¼æ¯å¦å»ºç«æ°æ®åºè¿æ¥ãåå§åå¨å±éç½®åæ°ãæ¥å¿æ¨¡åãç½ç»éç½®ãåå»ºå¨å±éç¨å·¥å·ç±»ç­ï¼è¿äºèµæºä¼å¨<code>onDestroy</code>ä¸­å¯¹åºéæ¾ï¼</li>
<li><strong>æ§è¡æ¬¡æ°</strong>ï¼æ´ä¸ªUIAbilityå®ä¾çå½å¨æåä»è§¦å1æ¬¡ã</li>
</ul>
<h4 id="onwindowstagecreatewindowstage"><code>onWindowStageCreate(windowStage)</code></h4>
<ul>
<li><strong>è§¦åæ¶æº</strong>ï¼UIAbilityå®ä¾åå»ºå®æåãåºç¨è¿å¥åå°åï¼ä¸ç³»ç»é¦æ¬¡åå»ºWindowStageï¼çªå£å®¹å¨ï¼æ¶è§¦åï¼</li>
<li><strong>æ ¸å¿ä½ç¨</strong>ï¼è´è´£é¡µé¢å è½½ãè®¢éWindowStageç¸å³äºä»¶ï¼å¦çªå£ç¦ç¹ååãæ¾ç¤º/éèäºä»¶ï¼ï¼</li>
<li><strong>æ§è¡æ¬¡æ°</strong>ï¼åå®ä¾ï¼singletonï¼æ¨¡å¼ä¸ä»è§¦å1æ¬¡ï¼å¤å®ä¾æ¨¡å¼ä¸æ¯æ¬¡åå»ºæ°å®ä¾é½ä¼è§¦åï¼ã</li>
</ul>
<h4 id="onforeground"><code>onForeground()</code></h4>
<ul>
<li><strong>è§¦åæ¶æº</strong>ï¼UIAbilityä»åå°åæ¢è³åå°ãçé¢å³å°å¯è§ä¹åè§¦åï¼</li>
<li><strong>æ ¸å¿ä½ç¨</strong>ï¼æ¢å¤åå°è¿è¡æéèµæºï¼æ¯å¦éå¯æåçå®æ¶å¨ãéæ°å¼å¯å®ä½æå¡ãæ¢å¤ç½ç»è¯·æ±è½®è¯¢ç­ï¼</li>
<li><strong>æ§è¡æ¬¡æ°</strong>ï¼å¯å¤æ¬¡è§¦åï¼æ¯æ¬¡ååå°é½ä¼æ§è¡ï¼ã</li>
</ul>
<h4 id="onbackground"><code>onBackground()</code></h4>
<ul>
<li><strong>è§¦åæ¶æº</strong>ï¼UIAbilityçé¢å®å¨ä¸å¯è§ï¼å¦æHomeé®ååå°ãæå¼å¶ä»åºç¨è¦çå½åçé¢ï¼åè§¦åï¼</li>
<li><strong>æ ¸å¿ä½ç¨</strong>ï¼æååå°èµæºä»¥èçç³»ç»å¼éï¼æ¯å¦åæ­¢å®æ¶å¨ãå³é­å®ä½æå¡ãä¿å­ç¨æ·æä½æ°æ®ï¼ä½ä¸º<code>onDestroy</code>æªè§¦åæ¶çååºæ¹æ¡ï¼ï¼</li>
<li><strong>æ§è¡æ¬¡æ°</strong>ï¼å¯å¤æ¬¡è§¦åï¼æ¯æ¬¡ååå°é½ä¼æ§è¡ï¼ã</li>
</ul>
<h4 id="onwindowstagewilldestroywindowstage"><code>onWindowStageWillDestroy(windowStage)</code></h4>
<ul>
<li><strong>è§¦åæ¶æº</strong>ï¼WindowStageï¼çªå£å®¹å¨ï¼å³å°è¢«éæ¯åè§¦åï¼</li>
<li><strong>æ ¸å¿ä½ç¨</strong>ï¼è§£ç»å¨<code>onWindowStageCreate</code>ä¸­è®¢éçWindowStageäºä»¶ãæ¸ççªå£ç¸å³ç¼å­èµæºï¼é¿ååå­æ³æ¼ï¼</li>
<li><strong>æ§è¡æ¬¡æ°</strong>ï¼ä»å¨åºç¨âä¼ééæ¯âï¼å¦è°ç¨<code>terminateSelf()</code>ãæ­£å¸¸éåºï¼æ¶è§¦å1æ¬¡ï¼ä¸é®æ¸çç­å¼ºå¶éæ¯åºæ¯ä¸è§¦åã</li>
</ul>
<h4 id="onwindowstagedestroy"><code>onWindowStageDestroy()</code></h4>
<ul>
<li><strong>è§¦åæ¶æº</strong>ï¼WindowStageï¼çªå£å®¹å¨ï¼éæ¯å®æåè§¦åï¼</li>
<li><strong>æ ¸å¿ä½ç¨</strong>ï¼ç¡®è®¤çªå£ç¸å³èµæºå·²éæ¾ï¼åæç»ççªå£ç¶ææ ¡éªï¼</li>
<li><strong>æ§è¡æ¬¡æ°</strong>ï¼ä»å¨åºç¨âä¼ééæ¯âæ¶è§¦å1æ¬¡ï¼å¼ºå¶éæ¯åºæ¯ä¸è§¦åã</li>
</ul>
<h4 id="ondestroy"><code>onDestroy()</code></h4>
<ul>
<li><strong>è§¦åæ¶æº</strong>ï¼UIAbilityå®ä¾å³å°è¢«éæ¯åè§¦åï¼</li>
<li><strong>æ ¸å¿ä½ç¨</strong>ï¼éæ¾<code>onCreate</code>ä¸­åå§åçå¨å±èµæºï¼æ¯å¦å³é­æ°æ®åºè¿æ¥ãæ¸çå¨å±ç¼å­ãä¿å­æç»çåºç¨ç¶ææ°æ®ï¼</li>
<li><strong>æ§è¡æ¬¡æ°</strong>ï¼ä»å¨âä¼ééæ¯âæ¶è§¦å1æ¬¡ï¼API 13+ä¸­ï¼æ å®åµçªåºç¨è¢«ä¸é®æ¸çãè°è¯æ¨¡å¼ç§»é¤ä»»å¡æ¶ï¼ç³»ç»ç´æ¥ç»æ­¢è¿ç¨ï¼è¯¥æ¹æ³ä¸è§¦åï¼ã</li>
</ul>
<h4 id="onnewwantwant-launchparam"><code>onNewWant(want, launchParam)</code></h4>
<ul>
<li><strong>è§¦åæ¶æº</strong>ï¼UIAbilityå®ä¾å·²å¯å¨ï¼æªéæ¯ï¼ãåæ¬¡è¢«å¤é¨è°ç¨ï¼å¦å¶ä»é¡µé¢/åºç¨è·³è½¬ï¼æ¶è§¦åï¼</li>
<li><strong>æ ¸å¿ä½ç¨</strong>ï¼å¤çæ°çå¯å¨åæ°ï¼æ¯å¦æ¥æ¶è·³è½¬ä¼ åãæ´æ°é¡µé¢å±ç¤ºåå®¹ï¼</li>
<li><strong>æ§è¡æ¬¡æ°</strong>ï¼æéè§¦åï¼æ¯æ¬¡å¤ç¨å®ä¾è°ç¨é½ä¼æ§è¡ï¼ã</li>
<li></li>
</ul>
<p><strong>æ³¨æ</strong>ï¼</p>
<ul>
<li><code>onDestroy</code>è§¦åç¹æ®è§åï¼API 13åä»¥ä¸çæ¬ä¸­ï¼æ å®åµçªåºç¨è¢«ä¸é®æ¸çãè°è¯æ¨¡å¼ä¸ç§»é¤ä»»å¡æ¶ï¼ç³»ç»ç´æ¥ç»æ­¢è¿ç¨ï¼è¯¥æ¹æ³ä¸ä¼è§¦åï¼ä»<code>terminateSelf()</code>è°ç¨ãæ­£å¸¸è¿åéåºãæå®åµçªåºç¨è¢«ä¸é®æ¸çæ¶è§¦åã</li>
</ul>
<h3 id="3-windowstageäºä»¶è¯¦è§£çå¬çªå£æ´»å¨ç¶æ">3. WindowStageäºä»¶è¯¦è§£ï¼çå¬çªå£æ´»å¨ç¶æï¼</h3>
<p>çªå£çæææ´»å¨ç¶æåéè¿<code>windowStageEvent</code>äºä»¶çå¬ï¼æ ¸å¿äºä»¶è¯´æï¼</p>
<ul>
<li><code>SHOWN</code>ï¼çªå£ä»åå°åæ¢å°åå°ï¼å¯è§ï¼ï¼ä»£è¡¨åºç¨ååå°ï¼</li>
<li><code>HIDDEN</code>ï¼çªå£ä»åå°åæ¢å°åå°ï¼ä¸å¯è§ï¼ï¼ä»£è¡¨åºç¨ååå°ï¼</li>
<li><code>ACTIVE</code>ï¼çªå£è·å¾ç¦ç¹ï¼å¯æ¥æ¶ç¹å»/è¾å¥ï¼ï¼å¤äºå¯äº¤äºç¶æï¼</li>
<li><code>INACTIVE</code>ï¼çªå£å¤±å»ç¦ç¹ï¼æ æ³æ¥æ¶è¾å¥ï¼ï¼å¤äºä¸å¯äº¤äºç¶æï¼</li>
<li><code>RESUMED</code>ï¼çªå£è¿å¥åå°å¯äº¤äºç¶æï¼åºç¨æ­£å¸¸è¿è¡ï¼</li>
<li><code>PAUSED</code>ï¼çªå£è¿å¥åå°ä¸å¯äº¤äºç¶æã</li>
</ul>
<h2 id="ä¸å®æ´çå½å¨æä»£ç ç¤ºä¾">ä¸ãå®æ´çå½å¨æä»£ç ç¤ºä¾</h2>
<pre><code class="language-javascript">import { UIAbility, AbilityConstant, Want, common } from '@kit.AbilityKit';
import { window } from '@kit.ArkUI';
import { hilog } from '@kit.LogKit';
import { BusinessError } from '@ohos.base';

const TAG = 'UIAbility_Lifecycle';
const DOMAIN = 0x0000;

export default class EntryAbility extends UIAbility {
  // 1. åå»ºé¶æ®µï¼ä»1æ¬¡ï¼
  onCreate(want: Want, launchParam: AbilityConstant.LaunchParam) {
    hilog.info(DOMAIN, TAG, '--- onCreate è§¦åï¼å¨å±åå§åï¼---');
    // èµæºåå§åï¼å¨å±éç½®ãæ°æ®åºè¿æ¥ç­ï¼å¯¹åºéæ¾ï¼onDestroyï¼
  }

  // 2. çªå£åå»ºé¶æ®µï¼çªå£é¦æ¬¡åå»º/éå»ºï¼
  onWindowStageCreate(windowStage: window.WindowStage): void {
    hilog.info(DOMAIN, TAG, '--- onWindowStageCreate è§¦åï¼å è½½é¡µé¢ï¼---');
    // è®¢éWindowStageäºä»¶
    this.registerWindowStageEvent(windowStage);
    // å è½½é¡µé¢ï¼å¯ä¸åæ³æ¶æºï¼
    windowStage.loadContent('pages/Index').then(()=&gt;{
      hilog.info(DOMAIN, TAG, 'Indexé¡µé¢å è½½æå');
    }).catch((err:BusinessError)=&gt;{
      hilog.error(DOMAIN, TAG, `é¡µé¢å è½½å¤±è´¥ï¼code=${err.code}, message=${err.message}`);
    })
  }

  // 3. åå°é¶æ®µï¼ååå°æ¶ï¼
  onForeground() {
    hilog.info(DOMAIN, TAG, '--- onForeground è§¦åï¼æ¢å¤åå°èµæºï¼---');
    // å¯å¨åå°ä¸å±èµæºï¼å®æ¶å¨ãå®ä½ç­ï¼
  }

  // 4. åå°é¶æ®µï¼ååå°æ¶ï¼
  onBackground() {
    hilog.info(DOMAIN, TAG, '--- onBackground è§¦åï¼éæ¾åå°èµæºï¼---');
    // æååå°èµæºï¼ä¿å­å³é®æ°æ®ï¼ååºï¼
  }

  // 5. çªå£é¢éæ¯é¶æ®µï¼çªå£å³å°éæ¯ï¼
  onWindowStageWillDestroy(windowStage: window.WindowStage) {
    hilog.info(DOMAIN, TAG, '--- onWindowStageWillDestroy è§¦åï¼çªå£é¢éæ¯ï¼---');
    // è§£ç»WindowStageäºä»¶ï¼é¿ååå­æ³æ¼
    this.unregisterWindowStageEvent(windowStage);
  }

  // 6. çªå£éæ¯é¶æ®µï¼çªå£å·²éæ¯ï¼
  onWindowStageDestroy() {
    hilog.info(DOMAIN, TAG, '--- onWindowStageDestroy è§¦åï¼éæ¯çªå£ï¼---');
    // çªå£å®ä¾å¤±æï¼æ éé¢å¤æä½
  }

  // 7. éæ¯é¶æ®µï¼ä»1æ¬¡ï¼å­å¨ä¸è§¦ååºæ¯ï¼
  onDestroy() {
    hilog.info(DOMAIN, TAG, '--- onDestroy è§¦åï¼éæ¯åºç¨ï¼---');
    // éæ¾å¨å±èµæºãä¿å­æç»æ°æ®
  }

  // 8. æ°åæ°é¶æ®µï¼å·²å¯å¨åæ¥æ¶æ°è¯·æ±ï¼
  onNewWant(want: Want, launchParam: AbilityConstant.LaunchParam) {
    hilog.info(DOMAIN, TAG, `--- onNewWant è§¦åï¼æ°åæ°ï¼${JSON.stringify(want)}ï¼---`);
    // å¤çæ°çå¯å¨åæ°
  }
  /**
   * è®¢éWindowStageäºä»¶ï¼çå¬çªå£æ´»å¨ç¶æï¼
   * @param windowStage - å½åçªå£å®ä¾
   */
  private registerWindowStageEvent(windowStage: window.WindowStage): void {
    try {
      windowStage.on('windowStageEvent', (data) =&gt; {
        const stageEventType: window.WindowStageEventType = data;
        switch (stageEventType) {
          case window.WindowStageEventType.SHOWN:
            hilog.info(DOMAIN, TAG, `windowStage foreground`);
            break;
          case window.WindowStageEventType.ACTIVE:
            hilog.info(DOMAIN, TAG, `windowStage active`);
            break;
          case window.WindowStageEventType.INACTIVE:
            hilog.info(DOMAIN, TAG, `windowStage inactive`);
            break;
          case window.WindowStageEventType.HIDDEN:
            hilog.info(DOMAIN, TAG, `windowStage background`);
            break;
          case window.WindowStageEventType.RESUMED:
            hilog.info(DOMAIN, TAG, `windowStage resumed`);
            break;
          case window.WindowStageEventType.PAUSED:
            hilog.info(DOMAIN, TAG, `windowStage paused.`);
            break;
          default:
            break;
        }
      });
      hilog.info(DOMAIN, TAG, 'WindowStageäºä»¶è®¢éæå');
    } catch (exception) {
      hilog.error(DOMAIN, TAG, `è®¢éçªå£äºä»¶å¤±è´¥ï¼${JSON.stringify(exception)}`);
    }
  }

  /**
   * è§£ç»WindowStageäºä»¶ï¼èµæºéæ¾ï¼
   */
  private unregisterWindowStageEvent(windowStage: window.WindowStage): void {
    try {
      windowStage.off('windowStageEvent');
      hilog.info(DOMAIN, TAG, 'çªå£äºä»¶è§£ç»æå');
    } catch (err) {
      hilog.error(DOMAIN, TAG, `è§£ç»çªå£äºä»¶å¤±è´¥ï¼code=${err.code}, message=${err.message}`);
    }
  }
}

/**
 * æå¨åæ­¢å½åUIAbilityå®ä¾ï¼è§¦åonDestroyï¼
 */
export function stopCurrentAbility(context: common.UIAbilityContext): void {
  context.terminateSelf().then(()=&gt;{
    hilog.info(DOMAIN, TAG, 'terminateSelfè°ç¨æåï¼å°è§¦åonDestroy');
  }).catch((err: BusinessError) =&gt; {
    hilog.error(DOMAIN, TAG, `åæ­¢UIAbilityå¤±è´¥ï¼code=${err.code}, message=${err.message}`);
  });
}
</code></pre>
<h2 id="åæ°å¢æå¨å³é­åºç¨indexets">åãæ°å¢æå¨å³é­åºç¨Index.ets</h2>
<pre><code class="language-javascript">import { common } from '@kit.AbilityKit';
import { stopCurrentAbility } from '../entryability/EntryAbility';

@Entry
@Component
struct Index {
  @State message: string = 'ç¬¬ä¸ä¸ªåºç¨';
  private context: common.UIAbilityContext = this.getUIContext().getHostContext() as common.UIAbilityContext;

  aboutToAppear(): void {}

  build() {
    Column() {
      Text(this.message)
        .fontSize($r('app.float.page_text_font_size'))
        .fontWeight(FontWeight.Bold);

      Button("å³é­åºç¨ç¨åº")
        .onClick(()=&gt;{
          stopCurrentAbility(this.context);
        });
    }
    .height('100%')
    .width('100%');
  }
}
</code></pre>
<h2 id="äºå®æå®æéªè¯çå½å¨ææ§è¡é¡ºåº">äºãå®æå®æï¼éªè¯çå½å¨ææ§è¡é¡ºåº</h2>
<h3 id="ç®æ ">ç®æ </h3>
<p>éè¿æå¨æä½åºç¨ï¼å¨Logcatä¸­è§å¯çå½å¨ææ¹æ³åWindowStageäºä»¶çè§¦åé¡ºåºï¼éç¹éªè¯ä¸ååºæ¯ä¸<code>onDestroy</code>çè§¦åæåµã</p>
<blockquote>
<p>ç¯å¢è¯´æï¼å¼åå·¥å·æä½æ¯æAPI 13ï¼æ æ³æµè¯API 12åä»¥ä¸çæ¬ï¼æææµè¯åºäºAPI 13 ææºæ¨¡æå¨ã<br>
ä¸åç±»åçè®¾å¤çå¬çªå£æ´»å¨ç¶æè¾åºæ¥å¿ä¼æå·®å¼ã</p>
</blockquote>
<h3 id="åºæ¯1å¯å¨åºç¨--è¿åæ¡é¢--åæ¬¡æå¼åºç¨">åºæ¯1ï¼å¯å¨åºç¨ â è¿åæ¡é¢ â åæ¬¡æå¼åºç¨</h3>
<p><strong>æ¥å¿è¾åº</strong>ï¼</p>
<pre><code>&lt;!-- å¯å¨åºç¨ --&gt;
--- onCreate è§¦åï¼å¨å±åå§åï¼---
--- onWindowStageCreate è§¦åï¼å è½½é¡µé¢ï¼---
WindowStageäºä»¶è®¢éæå
--- onForeground è§¦åï¼æ¢å¤åå°èµæºï¼---
windowStage foreground
windowStage active
Indexé¡µé¢å è½½æå

&lt;!-- è¿åæ¡é¢ --&gt;
windowStage paused.
windowStage inactive
--- onBackground è§¦åï¼éæ¾åå°èµæºï¼---
windowStage background


&lt;!-- åæ¬¡æå¼åºç¨ --&gt;
--- onNewWant è§¦åï¼æ°åæ°ï¼{"deviceId":"","bundleName":"com.example.FirstApplication","abilityName":"EntryAbility","moduleName":"entry","uri":"","type":"","flags":0,"action":"action.system.home","parameters":{"debugApp":true,"moduleName":"entry","ohos.aafwk.param.displayId":0},"fds":{},"entities":["entity.system.home"]}ï¼---
--- onForeground è§¦åï¼æ¢å¤åå°èµæºï¼---
windowStage foreground
windowStage active
</code></pre>
<h3 id="åºæ¯2ç¹å»å³é­åºç¨ç¨åºæé®è°ç¨terminateself">åºæ¯2ï¼ç¹å»âå³é­åºç¨ç¨åºâæé®ï¼è°ç¨terminateSelfï¼</h3>
<p><strong>æ¥å¿è¾åº</strong>ï¼</p>
<pre><code>&lt;!-- terminateSelfè°ç¨æåï¼å°è§¦åonDestroy --&gt;
windowStage inactive
--- onBackground è§¦åï¼éæ¾åå°èµæºï¼---
windowStage background
--- onWindowStageWillDestroy è§¦åï¼çªå£é¢éæ¯ï¼---
çªå£äºä»¶è§£ç»æå
--- onWindowStageDestroy è§¦åï¼éæ¯çªå£ï¼---
--- onDestroy è§¦åï¼éæ¯åºç¨ï¼---
</code></pre>
<h3 id="åºæ¯3å¯å¨åºç¨--ååå°--ä¸é®æ¸çæ å®åµçªåºç¨">åºæ¯3ï¼å¯å¨åºç¨ â ååå° â ä¸é®æ¸çæ å®åµçªåºç¨</h3>
<p><strong>æ¥å¿è¾åº</strong>ï¼</p>
<pre><code>--- onCreate è§¦åï¼å¨å±åå§åï¼---
--- onWindowStageCreate è§¦åï¼å è½½é¡µé¢ï¼---
WindowStageäºä»¶è®¢éæå
--- onForeground è§¦åï¼æ¢å¤åå°èµæºï¼---
windowStage foreground
windowStage active
Indexé¡µé¢å è½½æå
windowStage inactive
--- onBackground è§¦åï¼éæ¾åå°èµæºï¼---
windowStage background
</code></pre>
<p><strong>å³é®ç»è®º</strong>ï¼ä¸é®æ¸çæ¶ç³»ç»ç´æ¥ç»æ­¢è¿ç¨ï¼æªè§¦å<code>onWindowStageWillDestroy</code>/<code>onWindowStageDestroy</code>/<code>onDestroy</code>ã</p>
<h2 id="å­åå®¹æ»ç»">å­ãåå®¹æ»ç»</h2>
<ol>
<li><strong>çå½å¨æåå·¥</strong>ï¼<code>onCreate</code>åå¨å±åå§åï¼ä»1æ¬¡ï¼ï¼<code>onWindowStageCreate</code>è´è´£é¡µé¢å è½½/äºä»¶è®¢éï¼åå®ä¾æ¨¡å¼ä¸ä»é¦æ¬¡å¯å¨è§¦å1æ¬¡ï¼ï¼<code>onDestroy</code>éæ¾å¨å±èµæºï¼API 13+ä¸é®æ¸çæ å®åµçªåºç¨ä¸è§¦åï¼ï¼</li>
<li><strong>WindowStageæ ¸å¿è§å</strong>ï¼äºä»¶è®¢é/è§£ç»å¿é¡»æå¯¹åºç°å¨<code>onWindowStageCreate</code>/<code>onWindowStageWillDestroy</code>ï¼é¿ååå­æ³æ¼ï¼</li>
<li><strong>æ°æ®å®å¨ååº</strong>ï¼å <code>onDestroy</code>å­å¨ä¸è§¦ååºæ¯ï¼å³é®æ°æ®éå¨<code>onBackground</code>ä¸­ä¿å­ï¼</li>
<li><strong>ååå°åæ¢é¾è·¯</strong>ï¼ååå°åè§¦åPAUSED/INACTIVEâ<code>onBackground</code>âHIDDENï¼ååå°åè§¦åSHOWNâ<code>onForeground</code>âACTIVE/RESUMEDã</li>
</ol>
<h3 id="æ ¸å¿é®é¢è§£ç­ä¸ºä»ä¹é¡µé¢åªè½å¨onwindowstagecreateä¸­å è½½">æ ¸å¿é®é¢è§£ç­ï¼ä¸ºä»ä¹é¡µé¢åªè½å¨<code>onWindowStageCreate</code>ä¸­å è½½ï¼</h3>
<p>é¡µé¢å è½½çæ¬è´¨æ¯å° UI ç»ä»¶æè½½å°ç³»ç»ççªå£å®¹å¨ï¼WindowStageï¼ä¸ï¼ä¸¤ä¸ªçå½å¨æé¶æ®µçæ ¸å¿å·®å¼å³å®äºå è½½æ¶æºï¼</p>
<ul>
<li><code>onCreate</code>é¶æ®µï¼UIAbility å®ä¾ååå»ºï¼ç³»ç»å°æªåé WindowStageï¼æ é¡µé¢æ¿è½½è½½ä½ï¼ï¼æ­¤æ¶è°ç¨<code>loadContent</code>ä¼å æ çªå£å®¹å¨èå¤±è´¥ï¼çè³å¯¼è´åºç¨å´©æºï¼</li>
<li><code>onWindowStageCreate</code>é¶æ®µï¼ç³»ç»å·²åå»º WindowStage å¹¶ä½ä¸ºåæ°ä¼ å¥ï¼æ­¤æ¶æ¥æäºé¡µé¢æ¸²ææéççªå£å®¹å¨ï¼æ¯å è½½é¡µé¢çæ¶æºã</li>
</ul>
<h3 id="æ°æé¿åæå">æ°æé¿åæå</h3>
<ul>
<li>ç¦æ­¢å¨<code>onCreate</code>ä¸­å è½½é¡µé¢ï¼æ WindowStageå®ä¾ï¼ï¼</li>
<li>ä¸è¦ä¾èµ<code>onDestroy</code>ä¿å­å³é®æ°æ®ï¼ä¼åå¨<code>onBackground</code>ååºï¼</li>
<li>çå½å¨æåè°æ¯å¨åºç¨ä¸»çº¿ç¨æ§è¡ï¼ä¸ºäºç¡®ä¿åºç¨æ§è½ï¼å»ºè®®å¨çå½å¨æåè°ä¸­ï¼ä»æ§è¡å¿è¦çè½»éçº§æä½ãå¯¹äºèæ¶ä»»å¡ï¼æ¨èéç¨å¼æ­¥å¤çæäº¤ç±å­çº¿ç¨æ§è¡ï¼é¿åé»å¡ä¸»çº¿ç¨ã</li>
<li>å¦æéè¦æç¥UIAbilityçå½å¨æååï¼å¼åèå¯ä»¥ä½¿ç¨ApplicationContextæ³¨åæ¥å£çå¬UIAbilityçå½å¨æååã</li>
</ul>
<pre><code class="language-javascript">  // å®ä¹çå½å¨æID
  private lifecycleId: number = -1;
  
  // å®ä¹çå½å¨æåè°å¯¹è±¡
  let abilityLifecycleCallback: AbilityLifecycleCallback = {
    // ååè°æ¹æ³
  }
    // è·ååºç¨ä¸ä¸æ
  let applicationContext = this.context.getApplicationContext();
   // æ³¨ååºç¨åçå½å¨æåè°
  this.lifecycleId = applicationContext.on('abilityLifecycle', abilityLifecycleCallback);
  
</code></pre>
<h2 id="ä¸ä»£ç ä»åº">ä¸ãä»£ç ä»åº</h2>
<ul>
<li>å·¥ç¨åç§°ï¼FirstApplication</li>
<li>ä»åºå°åï¼<a href="https://gitee.com/HarmonyOS-UI-Basics/harmony-os-ui-basics.git" target="_blank" rel="noopener nofollow">https://gitee.com/HarmonyOS-UI-Basics/harmony-os-ui-basics.git</a></li>
</ul>
<h2 id="å«ä¸èé¢å">å«ãä¸èé¢å</h2>
<p>ä¸ä¸èæä»¬å°ç³»ç»å­¦ä¹ UIAbilityçå¨éå¯å¨æ¨¡å¼ï¼éç¹ææ¡ï¼</p>
<ol>
<li>multitonï¼å¤å®ä¾ï¼ãsingletonï¼åå®ä¾ï¼ãspecifiedï¼æå®å®ä¾ï¼ä¸ç§å¯å¨æ¨¡å¼çæ ¸å¿å·®å¼ä¸å®ä¾åå»ºè§åï¼</li>
<li>ä¸åå¯å¨æ¨¡å¼çéç½®æ¹æ³ï¼module.json5éç½®+ä»£ç å±é¢åæ°ä¼ éï¼åéç¨ä¸å¡åºæ¯ï¼</li>
<li>å¤å®ä¾/æå®å®ä¾æ¨¡å¼ä¸çå½å¨æçèå¨å³ç³»ï¼åæ<code>onCreate</code>/<code>onNewWant</code>/<code>onWindowStageCreate</code>çå·®å¼åè§¦åé»è¾ï¼ï¼</li>
<li>å®æéªè¯ä¸åå¯å¨æ¨¡å¼çææï¼è§£å³å®ä¾å²çªãåæ°ä¼ éå¼å¸¸ç­å¼åå¸¸è§é®é¢ã</li>
</ol>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.0006944444444444445" data-date-updated="2026-02-05 15:56">2026-02-05 15:55</span>&nbsp;
<a href="https://www.cnblogs.com/san-xiu">é¸¿è-æ£ä¿®</a>&nbsp;
éè¯»(<span id="post_view_count">10</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19579716);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19579716', targetLink: 'https://www.cnblogs.com/san-xiu/p/19579716', title: 'é¸¿èåºç¨å¼åUIåºç¡ç¬¬ä¸èï¼UIAbilityçå½å¨æå¨è§£æ' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ MWGA åçº¿ç¼è¯ææ¯æ¹æ¡ï¼ä¸ä»½ä»£ç ï¼åç«¯çæ ]]></title>
    <link>https://www.cnblogs.com/xdesigner/p/19579270</link>
    <guid>8956f493630d995990cdb69e1eced967</guid>
    <description>
    <![CDATA[ 
		<h2>
			<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xdesigner/p/19579270" title="åå¸äº 2026-02-05 14:44">
    <span role="heading" aria-level="2">MWGA åçº¿ç¼è¯ææ¯æ¹æ¡ï¼ä¸ä»½ä»£ç ï¼åç«¯çæ</span>
    

</a>

		</h2>
		<div class="postText">    <div id="cnblogs_post_description" style="display: none">
        
        ä¼ä¸è½¯ä»¶æ®éé¢ä¸´æ¡é¢ç«¯æ·±åº¦åºç¨ä¸ç½é¡µç«¯ä¾¿æ·è®¿é®çåééæ±ãä¼ ç»åæ³éè¦ä¸¤å¥ææ¯æ ãä¸¤å¥ä»£ç åºä¸ä¸¤å¥ç åå¢éï¼å¯¼è´ææ¬é«ãå¨æé¿ãåç«¯é»è¾ä¸ä¸è´ãMWGA å­ååçº¿ç¼è¯è½åï¼ä»éä¸ä»½ C# æ ¸å¿ä»£ç ï¼å³å¯åæ¶çææ¡é¢ EXE ä¸ç½é¡µ WebAssembly åºç¨ï¼å®ç°åç«¯ä»£ç å¤ç¨ãé»è¾ç»ä¸ãä½ææ¬ç»´æ¤ï¼ä¸ºè·¨ç«¯å¼åæä¾å¨æ°è§£å³æ¹æ¡ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h1 class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="91f9m-0-0">&nbsp;<span style="font-family: &quot;Microsoft YaHei&quot;" data-offset-key="bg4o3-0-0">ä¸ãå¼è¨</span></h1>
<div class="Editable-unstyled" data-block="true" data-editor="8cro6" data-offset-key="5mlus-0-0">
<p class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="5mlus-0-0"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt" data-offset-key="5mlus-0-0">ä¼ä¸è½¯ä»¶æ®éé¢ä¸´<span data-offset-key="5mlus-0-1">æ¡é¢ç«¯æ·±åº¦åºç¨<span data-offset-key="5mlus-0-2">ä¸<span data-offset-key="5mlus-0-3">ç½é¡µç«¯ä¾¿æ·è®¿é®<span data-offset-key="5mlus-0-4">çåééæ±ãä¼ ç»åæ³éè¦ä¸¤å¥ææ¯æ ãä¸¤å¥ä»£ç åºä¸ä¸¤å¥ç åå¢éï¼å¯¼è´ææ¬é«ãå¨æé¿ãåç«¯é»è¾ä¸ä¸è´ã<span data-offset-key="5mlus-0-5">MWGA å­ååçº¿ç¼è¯è½å<span data-offset-key="5mlus-0-6">ï¼ä»éä¸ä»½ C# æ ¸å¿ä»£ç ï¼å³å¯åæ¶çæ<span data-offset-key="5mlus-0-7">æ¡é¢ EXE<span data-offset-key="5mlus-0-8"> ä¸<span data-offset-key="5mlus-0-9">ç½é¡µ WebAssembly åºç¨<span data-offset-key="5mlus-0-10">ï¼å®ç°åç«¯ä»£ç å¤ç¨ãé»è¾ç»ä¸ãä½ææ¬ç»´æ¤ï¼ä¸ºè·¨ç«¯å¼åæä¾å¨æ°è§£å³æ¹æ¡ã</span></span></span></span></span></span></span></span></span></span></span></p>
<p class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="5mlus-0-0">&nbsp;</p>
</div>
<h1 class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="7af06-0-0"><span style="font-family: &quot;Microsoft YaHei&quot;" data-offset-key="7af06-0-0">äºãæ ¸å¿ææ¯åç</span></h1>
<div class="Editable-unstyled" data-block="true" data-editor="8cro6" data-offset-key="ajr9b-0-0">
<p class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="ajr9b-0-0"><span style="font-size: 14pt; font-family: &quot;Microsoft YaHei&quot;" data-offset-key="ajr9b-0-0">MWGA çåçº¿ç¼è¯åºäº<span data-offset-key="ajr9b-0-1">æ¨¡ååæ¶æ<span data-offset-key="ajr9b-0-2">ä¸<span data-offset-key="ajr9b-0-3">è·¨å¹³å°ç¼è¯å¼æ<span data-offset-key="ajr9b-0-4">ï¼å®ç°ã<span data-offset-key="ajr9b-0-5">ä¸ä»½ä»£ç ï¼ååçæ<span data-offset-key="ajr9b-0-6">ãã</span></span></span></span></span></span></span></p>
</div>
<ul class="public-DraftStyleDefault-ul" data-offset-key="a958d-0-0">
<li class="Editable-styled public-DraftStyleDefault-unorderedListItem public-DraftStyleDefault-reset public-DraftStyleDefault-depth0 public-DraftStyleDefault-listLTR" data-block="true" data-editor="8cro6" data-offset-key="a958d-0-0">
<p class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="a958d-0-0"><span style="font-size: 14pt; font-family: &quot;Microsoft YaHei&quot;" data-offset-key="a958d-0-0">ä»£ç åå±ï¼<span data-offset-key="a958d-0-1"> å°ä»£ç ååä¸º<span data-offset-key="a958d-0-2">æ ¸å¿ä¸å¡é»è¾å±<span data-offset-key="a958d-0-3">ä¸<span data-offset-key="a958d-0-4">ç«¯ä¾§ UI ééå±<span data-offset-key="a958d-0-5">ãæ ¸å¿å±åå«æ°æ®æ¨¡åãç®æ³ãæéæ ¡éªç­éç¨åè½ï¼çº¯ C# ç¼åä¸ä¸ä¾èµç«¯ä¾§ APIï¼åç«¯<span data-offset-key="a958d-0-6">å®å¨å¤ç¨<span data-offset-key="a958d-0-7">ï¼UI å±æ ¹æ®æ¡é¢ä¸ç½é¡µç¹æ§åå«åè½»éåééã</span></span></span></span></span></span></span></span></p>
</li>
<li class="Editable-styled public-DraftStyleDefault-unorderedListItem public-DraftStyleDefault-depth0 public-DraftStyleDefault-listLTR" data-block="true" data-editor="8cro6" data-offset-key="79jp3-0-0">
<p class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="79jp3-0-0"><span style="font-size: 14pt; font-family: &quot;Microsoft YaHei&quot;" data-offset-key="79jp3-0-0">åçº¿ç¼è¯å¼æï¼<span data-offset-key="79jp3-0-1"> å¯¹æ ¸å¿ä»£ç è¿è¡ååè½¬æ¢ââç¼è¯ä¸º EXE æ¶æ´åæ¡é¢ UIï¼çæåçåºç¨ï¼æ¯ææ¬å°é«æ§è½ä¸ç¡¬ä»¶å¯¹æ¥ï¼ç¼è¯ä¸º WebAssembly æ¶ï¼çææµè§å¨å¯ç´æ¥è¿è¡çåºç¨ï¼å®ç°é¶å®è£ãè·¨å¹³å°è®¿é®ã<span data-offset-key="79jp3-0-2">æ ¸å¿é»è¾æ éä¿®æ¹<span data-offset-key="79jp3-0-3">ï¼ä»éè¿éç½®å³å¯åæ¢è¾åºå½¢æï¼ä»åºå±ä¿éä»£ç å¤ç¨ä¸åç«¯ç¨³å®è¿è¡ã</span></span></span></span></p>
</li>
</ul>
<h1 class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="1pa5u-0-0">&nbsp;</h1>
<h1 class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="1pa5u-0-0"><span style="font-family: &quot;Microsoft YaHei&quot;" data-offset-key="1pa5u-0-0">ä¸ãå·¥ç¨å®è·µæ ¸å¿ä¼å¿</span></h1>
<h2 class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="csvol-0-0"><strong><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt" data-offset-key="csvol-0-0">ï¼ä¸ï¼ä»£ç é¶éå¤ï¼ç åæçç¿»å</span></strong></h2>
<div class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="a5cih-0-0"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt" data-offset-key="a5cih-0-0">ä¼ ç»è·¨ç«¯å¼åä¸­ï¼60%â80% çä¸å¡é»è¾ééå¤ç¼åï¼<span data-offset-key="a5cih-0-1">MWGA å®ç°æ ¸å¿é»è¾ 100% å¤ç¨<span data-offset-key="a5cih-0-2">ãä»¥è¿éå­ç³»ç»ä¸ºä¾ï¼ææ¬è®¡ç®ãåºå­æ ¸ç®ç­åè½ä»éç¼åä¸æ¬¡ï¼åç«¯ç´æ¥è°ç¨ï¼ç åå·¥ä½éåå° <span data-offset-key="a5cih-0-3">50% ä»¥ä¸<span data-offset-key="a5cih-0-4">ï¼æ°åè½ä¸çº¿å¨æç¼©ç­ <span data-offset-key="a5cih-0-5">40%â60%<span data-offset-key="a5cih-0-6">ã</span></span></span></span></span></span></span></div>
<h2 class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="12jdf-0-0"><strong><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt" data-offset-key="12jdf-0-0">ï¼äºï¼é»è¾ç»å¯¹ä¸è´ï¼è§é¿ä¸å¡é£é©</span></strong></h2>
<div class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="9jvj8-0-0"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt" data-offset-key="9jvj8-0-0">è´¢å¡ãå»çãå·¥ä¸ç­è¡ä¸å¯¹ä¸å¡ä¸è´æ§è¦æ±æé«ï¼åç«¯é»è¾å·®å¼æå¼åæ°æ®éè¯¯ä¸åè§é£é©ã<span data-offset-key="9jvj8-0-1">MWGA åç«¯è°ç¨åä¸æ ¸å¿ä»£ç <span data-offset-key="9jvj8-0-2">ï¼è®¡ç®ç»æãæéè§åãä¸å¡æµç¨ <span data-offset-key="9jvj8-0-3">100% ç»ä¸<span data-offset-key="9jvj8-0-4">ï¼å½»åºæç»é»è¾å²çªï¼éä½åè§ä¸ä¸å¡é£é©ã</span></span></span></span></span></div>
<h2 class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="2vel2-0-0"><strong><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt" data-offset-key="2vel2-0-0">ï¼ä¸ï¼ç»´æ¤ææ¬å¤§éï¼è¿­ä»£æçæå</span></strong></h2>
<div class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="ao7ob-0-0"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt" data-offset-key="ao7ob-0-0">è½¯ä»¶çå½å¨æä¸­ï¼ç»´æ¤ææ¬å æ¯è¶ 70%ãMWGA å®ç°ã<span data-offset-key="ao7ob-0-1">ä¸æ¬¡ä¿®æ¹ï¼åç«¯åæ­¥<span data-offset-key="ao7ob-0-2">ãï¼Bug ä¿®å¤ãåè½åçº§ä»éæ¹å¨æ ¸å¿ä»£ç ï¼éæ°ç¼è¯ååç«¯åæ­¥çæï¼æµè¯æµç¨æ ééå¤æ§è¡ï¼<span data-offset-key="ao7ob-0-3">ç»´æ¤ææ¬å¯éä½ 60% ä»¥ä¸<span data-offset-key="ao7ob-0-4">ã</span></span></span></span></span></div>
<h2 class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="bkjii-0-0"><strong><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt" data-offset-key="bkjii-0-0">ï¼åï¼ç²¾ç®ææ¯æ ï¼éä½å¢éææ¬</span></strong></h2>
<div class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="3k5p8-0-0"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt" data-offset-key="3k5p8-0-0">æ éåæ¶éå¤ C# ä¸åç«¯å¢éï¼<span data-offset-key="3k5p8-0-1">åæ C# å¼åå¢éå³å¯æ¿æ¥åç«¯å¼å<span data-offset-key="3k5p8-0-2">ï¼æ éå­¦ä¹  React/Vue ç­åç«¯æ¡æ¶ï¼å¢éè§æ¨¡å¯ç²¾ç® <span data-offset-key="3k5p8-0-3">30%â50%<span data-offset-key="3k5p8-0-4">ï¼æ°äººä¸æææ¬ä¹å¤§å¹éä½ã</span></span></span></span></span></div>
<h2 class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="c95be-0-0"><strong><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt" data-offset-key="c95be-0-0">ï¼äºï¼èé¡¹ç®ä½ææ¬ Web åï¼ä¿æ¤åå²èµäº§</span></strong></h2>
<div class="Editable-unstyled" data-block="true" data-editor="8cro6" data-offset-key="dstk5-0-0">
<p class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="dstk5-0-0"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt" data-offset-key="dstk5-0-0">éå¯¹æ²æ·å¤å¹´ç WinForms/WPF èé¡¹ç®ï¼MWGA <span data-offset-key="dstk5-0-1">æ ééåæ ¸å¿é»è¾<span data-offset-key="dstk5-0-2">ï¼ä»éæå»ºç½é¡µ UI å±å³å¯å¿«éçæ Web çï¼<span data-offset-key="dstk5-0-3">ä»£ç å¤ç¨çå¯è¾¾ 90%<span data-offset-key="dstk5-0-4">ï¼ç åææ¬éä½ <span data-offset-key="dstk5-0-5">çº¦ 80%<span data-offset-key="dstk5-0-6">ï¼ææå»¶é¿èé¡¹ç®çå½å¨æã</span></span></span></span></span></span></span></p>
<p class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="dstk5-0-0">&nbsp;</p>
</div>
<h1 class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="eo9um-0-0"><span style="font-family: &quot;Microsoft YaHei&quot;" data-offset-key="eo9um-0-0">åãåä¸ä»·å¼èµè½</span></h1>
<h2 class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="7fd7f-0-0"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt" data-offset-key="7fd7f-0-0">ï¼ä¸ï¼æåäº§åç«äºåï¼æ©å¤§å¸åºè¦ç</span></h2>
<div class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="1q32m-0-0"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt" data-offset-key="1q32m-0-0">åºäº MWGA å¯å¿«éæ¨åºã<span data-offset-key="1q32m-0-1">æ¡é¢ + ç½é¡µ<span data-offset-key="1q32m-0-2">ãåç«¯äº§åï¼æ¡é¢ EXE æ»¡è¶³æ¬å°é«æ§è½ãç¡¬ä»¶å¯¹æ¥éæ±ï¼ç½é¡µçééé¶å®è£ãè¿ç¨è®¿é®åºæ¯ï¼è¦çæ´å¤å®¢æ·ç¾¤ä½ï¼<span data-offset-key="1q32m-0-3">æ¾èæåä¸­æ ç<span data-offset-key="1q32m-0-4">ã</span></span></span></span></span></div>
<h2 class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="as8ep-0-0"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt" data-offset-key="as8ep-0-0">ï¼äºï¼çµæ´»äº¤ä»ï¼ééå¤åéæ±</span></h2>
<div class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="bj1ne-0-0"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt" data-offset-key="bj1ne-0-0">å¯æ ¹æ®å®¢æ·éæ±<span data-offset-key="bj1ne-0-1">æéç¼è¯<span data-offset-key="bj1ne-0-2">ï¼å¤§åä¼ä¸éæ¬å° EXE çï¼ä¸­å°ä¼ä¸éç½é¡µçï¼éå¢ä¼ä¸éæ··åé¨ç½²æ¨¡å¼ï¼<span data-offset-key="bj1ne-0-3">æ éé¢å¤å¼å<span data-offset-key="bj1ne-0-4">ï¼ä¸å¥ä»£ç æ»¡è¶³ç§æåãäºç«¯ãåå¤ç½ç­å¤ç§é¨ç½²éæ±ã</span></span></span></span></span></div>
<h2 class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="cdihu-0-0"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt" data-offset-key="cdihu-0-0">ï¼ä¸ï¼åæ°åä¸æ¨¡å¼ï¼æå±çå©ç©ºé´</span></h2>
<div class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="ulhb-0-0"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt" data-offset-key="ulhb-0-0">æ¯æ<span data-offset-key="ulhb-0-1">é¶æ¢¯å®ä»·<span data-offset-key="ulhb-0-2">ï¼åºç¡ Web çå¼æµãä¸ä¸ EXE çæ¶è´¹ï¼ã<span data-offset-key="ulhb-0-3">è®¢éå¶è½¬å<span data-offset-key="ulhb-0-4">ï¼ç½é¡µçééäºç«¯è®¢éï¼ï¼åæ¶åºäºå¤ç¨ä»£ç å¿«éæä¾å®å¶æå¡ï¼æåå®¢åä»·ä¸æç»­æ¶å¥ã</span></span></span></span></span></div>
<h2 class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="668ci-0-0"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt" data-offset-key="668ci-0-0">ï¼åï¼å»¶é¿äº§åçå½å¨æï¼æåèµäº§åæ¥</span></h2>
<div class="Editable-unstyled" data-block="true" data-editor="8cro6" data-offset-key="2kibb-0-0">
<p class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="2kibb-0-0"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt" data-offset-key="2kibb-0-0">ä¼ ç»æ¡é¢è½¯ä»¶éè¿ MWGA å¿«é Web åï¼æ ééææ ¸å¿ä»£ç ï¼å³å¯ééæ°å­åè½¬åéæ±ï¼<span data-offset-key="2kibb-0-1">äº§åçå½å¨æå¯å»¶é¿ 3â5 å¹´<span data-offset-key="2kibb-0-2">ï¼åå²ææ¯æå¥æç»­åé ä»·å¼ã</span></span></span></p>
</div>
<div class="Editable-divider FocusPlugin--unfocused">&nbsp;</div>
<h1 class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="7ph8f-0-0"><span style="font-family: &quot;Microsoft YaHei&quot;" data-offset-key="7ph8f-0-0">äºãçµæ´»é¨ç½²ï¼å¨åè½ EXE ä¸è½»éå Web</span></h1>
<div class="Editable-unstyled" data-block="true" data-editor="8cro6" data-offset-key="2p2a6-0-0">
<p class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="2p2a6-0-0"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt" data-offset-key="2p2a6-0-0">MWGA æ¯æã<span data-offset-key="2p2a6-0-1">EXE å¨åè½ + Web é¨ååè½<span data-offset-key="2p2a6-0-2">ãçå·®å¼åé¨ç½²ï¼</span></span></span></p>
</div>
<ul class="public-DraftStyleDefault-ul" data-offset-key="cls0k-0-0">
<li class="Editable-styled public-DraftStyleDefault-unorderedListItem public-DraftStyleDefault-reset public-DraftStyleDefault-depth0 public-DraftStyleDefault-listLTR" data-block="true" data-editor="8cro6" data-offset-key="cls0k-0-0">
<p class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="cls0k-0-0"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt" data-offset-key="cls0k-0-0"><strong>æ¡é¢ç</strong><span data-offset-key="cls0k-0-1"><strong>ï¼</strong>æåæææ¨¡åï¼åå«ç¡¬ä»¶å¯¹æ¥ãç³»ç»ç®¡çç­å¨éåè½ã</span></span></p>
</li>
<li class="Editable-styled public-DraftStyleDefault-unorderedListItem public-DraftStyleDefault-depth0 public-DraftStyleDefault-listLTR" data-block="true" data-editor="8cro6" data-offset-key="1dbdp-0-0">
<p class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="1dbdp-0-0"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt" data-offset-key="1dbdp-0-0"><strong>ç½é¡µç</strong><span data-offset-key="1dbdp-0-1"><strong>ï¼</strong>ä»ä¿çæ¥è¯¢ãæ¥è¡¨ç­åºç¡åè½ï¼åé¤ææä¸é«æ§è½æ¶èæ¨¡åã</span></span></p>
</li>
</ul>
<div class="Editable-unstyled" data-block="true" data-editor="8cro6" data-offset-key="9prh5-0-0">
<p class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="9prh5-0-0"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt" data-offset-key="9prh5-0-0">è¿æ ·æ¢å®ç°<span data-offset-key="9prh5-0-1">å®å¨éç¦»<span data-offset-key="9prh5-0-2">ãéä½ç½é¡µç«¯å®å¨é£é©ï¼å<span data-offset-key="9prh5-0-3">ä¼åæ§è½<span data-offset-key="9prh5-0-4">ââç½é¡µç«¯å è½½éåº¦å¯æå <span data-offset-key="9prh5-0-5">30% ä»¥ä¸<span data-offset-key="9prh5-0-6">ï¼ç²¾åééç®¡çåä¸æ®éåå·¥çä¸åä½¿ç¨åºæ¯ã</span></span></span></span></span></span></span></p>
</div>
<div class="Editable-divider FocusPlugin--unfocused">&nbsp;</div>
<h1 class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="2p9vj-0-0"><span style="font-family: &quot;Microsoft YaHei&quot;" data-offset-key="2p9vj-0-0">å­ãå¸åè¡ä¸åºç¨</span></h1>
<div class="TableToolbar-container" data-size="normal">
<table border="0" align="left">
<tbody>
<tr>
<td style="text-align: center">
<p><strong><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18pt">è¡ä¸</span></strong></p>
</td>
<td style="text-align: center">
<p><strong><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18pt">æ¡é¢EXE</span></strong></p>
</td>
<td style="text-align: center">
<p><strong><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18pt">ç½é¡µç«¯</span></strong></p>
</td>
</tr>
<tr>
<td style="text-align: center">
<p><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">å·¥ä¸è½¯ä»¶</span></p>
</td>
<td style="text-align: center">
<p><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">è®¾å¤å¯¹æ¥ãå¨åè½ç°åº</span></p>
</td>
<td style="text-align: center">
<p><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">è¿ç¨çæ§ãçæ¿</span></p>
</td>
</tr>
<tr>
<td style="text-align: center">
<p><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">ä¼ä¸ç®¡ç</span></p>
</td>
<td style="text-align: center">
<p><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">æ ¸å¿ä¸å¡ãéæµç¨</span></p>
</td>
<td style="text-align: center">
<p><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">å¤å¤æ¥è¯¢ãå®¡æ¹</span></p>
</td>
</tr>
<tr>
<td style="text-align: center">
<p><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">å»çè½¯ä»¶</span></p>
</td>
<td style="text-align: center">
<p><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">è¯çå¨æµç¨ãè®¾å¤</span></p>
</td>
<td style="text-align: center">
<p><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">è¿ç¨ä¼è¯ãæ¥é</span></p>
</td>
</tr>
<tr>
<td style="text-align: center">
<p><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">æ¿å¡è½¯ä»¶</span></p>
</td>
<td style="text-align: center">
<p><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">åç½å®¡æ¹ãæææ°æ®</span></p>
</td>
<td style="text-align: center">
<p><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">å¤ç½ä¾¿æ°æ¥è¯¢ãæå¡</span></p>
</td>
</tr>
</tbody>
</table>
<span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt" data-offset-key="al94h-0-0"><span data-text="true">åå®ç°ã<span data-offset-key="5k2m4-0-1"><span data-text="true">ä¸å¥ä»£ç ï¼åç«¯éé<span data-offset-key="5k2m4-0-2"><span data-text="true">ãã</span></span></span></span></span></span></div>
<p>&nbsp;</p>
<h1 class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="al94h-0-0"><span style="font-family: &quot;Microsoft YaHei&quot;" data-offset-key="al94h-0-0"><span data-text="true">ä¸ãä¸ä¼ ç»æ¹æ¡å¯¹æ¯</span></span></h1>
<div class="TableToolbar-container" data-size="normal">
<div>
<table class="Table FocusPlugin--unfocused" style="height: 694px; width: 872px" align="left" data-draft-node="block" data-draft-type="table" data-size="normal" data-row-style="normal">
<tbody>
<tr class="Table-row"><th class="Table-data Table-header" style="text-align: center">
<p class="Table-dataInputContainer">&nbsp;</p>
<div class="Table-dataInput"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18pt">å¯¹æ¯ç»´åº¦</span></div>
<p>&nbsp;</p>
</th><th class="Table-data Table-header" style="text-align: center">
<p class="Table-dataInputContainer">&nbsp;</p>
<div class="Table-dataInput"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18pt">ä¼ ç»åç«¯å¼å</span></div>
<p>&nbsp;</p>
</th><th class="Table-data Table-header" style="text-align: center">
<p class="Table-dataInputContainer">&nbsp;</p>
<div class="Table-dataInput"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18pt">çº¯ Web å¼å</span></div>
<p>&nbsp;</p>
</th><th class="Table-data Table-header" style="text-align: center">
<p class="Table-dataInputContainer">&nbsp;</p>
<div class="Table-dataInput"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18pt">Electron/MAUI</span></div>
<p>&nbsp;</p>
</th><th class="Table-data Table-header" style="text-align: center">
<p class="Table-dataInputContainer">&nbsp;</p>
<div class="Table-dataInput"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 18pt">MWGA</span></div>
<p>&nbsp;</p>
</th></tr>
<tr class="Table-row">
<td class="Table-data" style="text-align: center">
<p class="Table-dataInputContainer">&nbsp;</p>
<div class="Table-dataInput"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">ä»£ç å¤ç¨ç</span></div>
<p>&nbsp;</p>
</td>
<td class="Table-data" style="text-align: center">
<p class="Table-dataInputContainer">&nbsp;</p>
<div class="Table-dataInput"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">ä½</span></div>
<p>&nbsp;</p>
</td>
<td class="Table-data" style="text-align: center">
<p class="Table-dataInputContainer">&nbsp;</p>
<div class="Table-dataInput"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">ä¸­</span></div>
<p>&nbsp;</p>
</td>
<td class="Table-data" style="text-align: center">
<p class="Table-dataInputContainer">&nbsp;</p>
<div class="Table-dataInput"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">ä¸­</span></div>
<p>&nbsp;</p>
</td>
<td class="Table-data" style="text-align: center">
<p class="Table-dataInputContainer">&nbsp;</p>
<div class="Table-dataInput"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">é«</span></div>
<p>&nbsp;</p>
</td>
</tr>
<tr class="Table-row">
<td class="Table-data" style="text-align: center">
<p class="Table-dataInputContainer">&nbsp;</p>
<div class="Table-dataInput"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">åç«¯ä¸è´æ§</span></div>
<p>&nbsp;</p>
</td>
<td class="Table-data" style="text-align: center">
<p class="Table-dataInputContainer">&nbsp;</p>
<div class="Table-dataInput"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">å·®</span></div>
<p>&nbsp;</p>
</td>
<td class="Table-data" style="text-align: center">
<p class="Table-dataInputContainer">&nbsp;</p>
<div class="Table-dataInput"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">æ </span></div>
<p>&nbsp;</p>
</td>
<td class="Table-data" style="text-align: center">
<p class="Table-dataInputContainer">&nbsp;</p>
<div class="Table-dataInput"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">ä¸­</span></div>
<p>&nbsp;</p>
</td>
<td class="Table-data" style="text-align: center">
<p class="Table-dataInputContainer">&nbsp;</p>
<div class="Table-dataInput"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">ä¼</span></div>
<p>&nbsp;</p>
</td>
</tr>
<tr class="Table-row">
<td class="Table-data" style="text-align: center">
<p class="Table-dataInputContainer">&nbsp;</p>
<div class="Table-dataInput"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">ç åç»´æ¤ææ¬</span></div>
<p>&nbsp;</p>
</td>
<td class="Table-data" style="text-align: center">
<p class="Table-dataInputContainer">&nbsp;</p>
<div class="Table-dataInput"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">é«</span></div>
<p>&nbsp;</p>
</td>
<td class="Table-data" style="text-align: center">
<p class="Table-dataInputContainer">&nbsp;</p>
<div class="Table-dataInput"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">ä¸­</span></div>
<p>&nbsp;</p>
</td>
<td class="Table-data" style="text-align: center">
<p class="Table-dataInputContainer">&nbsp;</p>
<div class="Table-dataInput"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">ä¸­</span></div>
<p>&nbsp;</p>
</td>
<td class="Table-data" style="text-align: center">
<p class="Table-dataInputContainer">&nbsp;</p>
<div class="Table-dataInput"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">ä½</span></div>
<p>&nbsp;</p>
</td>
</tr>
<tr class="Table-row">
<td class="Table-data" style="text-align: center">
<p class="Table-dataInputContainer">&nbsp;</p>
<div class="Table-dataInput"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">æ¡é¢/ç½é¡µæ§è½</span></div>
<p>&nbsp;</p>
</td>
<td class="Table-data" style="text-align: center">
<p class="Table-dataInputContainer">&nbsp;</p>
<div class="Table-dataInput"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">ä¼/ä¸­</span></div>
<p>&nbsp;</p>
</td>
<td class="Table-data" style="text-align: center">
<p class="Table-dataInputContainer">&nbsp;</p>
<div class="Table-dataInput"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">å·®/ä¼</span></div>
<p>&nbsp;</p>
</td>
<td class="Table-data" style="text-align: center">
<p class="Table-dataInputContainer">&nbsp;</p>
<div class="Table-dataInput"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">ä¸­/å·®</span></div>
<p>&nbsp;</p>
</td>
<td class="Table-data" style="text-align: center">
<p class="Table-dataInputContainer">&nbsp;</p>
<div class="Table-dataInput"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">ä¼/ä¼</span></div>
<p>&nbsp;</p>
</td>
</tr>
</tbody>
</table>
<span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt" data-offset-key="2lidm-0-0"><span data-text="true">MWGA å¨ä»£ç å¤ç¨ãä¸è´æ§ãææ¬ãæ§è½ä¸<span data-offset-key="2lidm-0-1"><span data-text="true">åä¼äºä¼ ç»æ¹æ¡<span data-offset-key="2lidm-0-2"><span data-text="true">ï¼æ¯è·¨ç«¯å¼åçä¼éæ¹æ¡ã</span></span></span></span></span></span></div>
</div>
<div class="Editable-divider FocusPlugin--unfocused">&nbsp;</div>
<h1 class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="4hkin-0-0"><span style="font-family: &quot;Microsoft YaHei&quot;" data-offset-key="4hkin-0-0"><span data-text="true">å«ãæ»ç»</span></span></h1>
<div class="Editable-unstyled" data-block="true" data-editor="8cro6" data-offset-key="994bq-0-0">
<p class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="994bq-0-0"><span data-offset-key="994bq-0-0"><span data-text="true"><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">M</span><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt">WGA åçº¿ç¼è¯ä»¥ã<span data-offset-key="994bq-0-1"><span data-text="true">ä¸ä»½ä»£ç ãåç«¯çæ<span data-offset-key="994bq-0-2"><span data-text="true">ãä¸ºæ ¸å¿ï¼è§£å³äºä¼ ç»è·¨ç«¯å¼åçæ ¸å¿çç¹ï¼æ¢å®ç°äºç åä¸ç»´æ¤ç<span data-offset-key="994bq-0-3"><span data-text="true">éæ¬å¢æ<span data-offset-key="994bq-0-4"><span data-text="true">ï¼åä¸º<span data-offset-key="994bq-0-5"><span data-text="true">äº§åç«äºå<span data-offset-key="994bq-0-6"><span data-text="true">ä¸<span data-offset-key="994bq-0-7"><span data-text="true">åä¸æ¨¡å¼åæ°<span data-offset-key="994bq-0-8"><span data-text="true">æä¾äºæ¯æãå¶å·®å¼åé¨ç½²æ¨¡å¼è¿ä¸æ­¥æåäºåºæ¯ééæ§ï¼å¨å·¥ä¸ãå»çãæ¿å¡ç­è¡ä¸å·å¤å¹¿éåæ¯ãéçææ¯è¿­ä»£ï¼MWGA å°ééæ´å¤ç«¯ä¾§å½¢æï¼æä¸ºä¼ä¸æ°å­åè½¬åç<span data-offset-key="994bq-0-9"><span data-text="true">æ ¸å¿ææ¯æ¯æ<span data-offset-key="994bq-0-10"><span data-text="true">ã</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="994bq-0-0">&nbsp;</p>
</div>
<div class="Editable-unstyled" data-block="true" data-editor="8cro6" data-offset-key="3jsir-0-0">
<p class="public-DraftStyleDefault-block public-DraftStyleDefault-ltr" data-offset-key="3jsir-0-0"><em><span style="font-family: &quot;Microsoft YaHei&quot;; font-size: 14pt" data-offset-key="3jsir-0-0"><span data-text="true">æ¬æç¨äºè¯´æ MWGA åçº¿ç¼è¯è½åçä»·å¼ä¸ä¼å¿ï¼ä¾ææ¯éåä¸åä¸å³ç­åèã</span></span></em></p>
</div>

</div>
<div class="clear"></div>
</div>
		<p class="postfoot">
			posted on 
<span id="post-date" data-last-update-days="0.003472222222222222" data-date-updated="2026-02-05 14:49">2026-02-05 14:44</span>&nbsp;
<a href="https://www.cnblogs.com/xdesigner">è¢æ°¸ç¦ çµå­çåï¼å»çä¿¡æ¯å</a>&nbsp;
éè¯»(<span id="post_view_count">146</span>)&nbsp;
è¯è®º(<span id="post_comment_count">1</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19579270);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19579270', targetLink: 'https://www.cnblogs.com/xdesigner/p/19579270', title: 'MWGA åçº¿ç¼è¯ææ¯æ¹æ¡ï¼ä¸ä»½ä»£ç ï¼åç«¯çæ' })">ä¸¾æ¥</a>

		</p>
	 ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ åå«æ²é·çç´æ¹å¾ï¼ç»å¶é«é¢å¼çå¨å°éæ£®å¾ä¸éº¦ç©å¾ ]]></title>
    <link>https://www.cnblogs.com/wang_yb/p/19579048</link>
    <guid>3e4b213e86ec53f206cbbc91232662d5</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/wang_yb/p/19579048" title="åå¸äº 2026-02-05 14:13">
    <span role="heading" aria-level="2">åå«æ²é·çç´æ¹å¾ï¼ç»å¶é«é¢å¼çå¨å°éæ£®å¾ä¸éº¦ç©å¾</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>å¨æ°æ®å¯è§åä¸çä¸­ï¼æä»¬ç»å¸¸ç¨ç´æ¹å¾æ¥æè¿°æ°æ®çåå¸æåµï¼ä½ä»å¤©ææ³ä»ç»ä¸¤ç§ç¹å«èä¼éçç¹ç¶å¾åä½ï¼<strong>å¨å°éæ£®ç¹ç¶å¾</strong>å<strong>éº¦ç©å¾</strong>ã</p>
<p>å®ä»¬åæ°æ®ä¸çç"ç¹å½©æ´¾"ç»å®¶ï¼ç¨ç®åçç¹åé åºä¸°å¯çä¿¡æ¯å±æ¬¡ã</p>
<p>ä¸<strong>ç´æ¹å¾</strong>ç¸æ¯ï¼è¿ç§ç¹ç»æ³ä¸ä»è½å¤æ´ç´è§å°å±ç¤ºæ°æ®åå¸çç»èï¼è¿è½æ´å¥½å°æ­ç¤ºæ°æ®ä¹é´çå³ç³»åæ¨¡å¼ï¼ä½¿å¾è§å¯èè½å¤ä»æ´å¹¿éçè§è§çè§£æ°æ®éçç¹ç¹ã</p>
<h1 id="1-å¨å°éæ£®ç¹ç¶å¾">1. å¨å°éæ£®ç¹ç¶å¾</h1>
<p>æ³è±¡ä¸ä¸ï¼ä½ æä¸è¢å½©è²å¼¹ç ï¼éè¦æé¢è²åç±»å±ç¤ºãå¦æåªæ¯ç®åå°æææå¼¹ç ååºæ¥ï¼å®ä»¬ä¼æä¹±æ ç« ã</p>
<p>ä½å¦æä½ ä¸ºæ¯ç§é¢è²åå¤ä¸ä¸ªå°çå­ï¼æç¸åé¢è²çå¼¹ç æ´é½å°å å å¨éé¢ï¼è¿å°±æ¯<strong>å¨å°éæ£®ç¹ç¶å¾</strong>ç<strong>åºæ¬ææ³</strong>ã</p>
<p><strong>å¨å°éæ£®ç¹ç¶å¾</strong>å°æ°æ®ç¹å å å¨å¯¹åºçæ°å¼åºåï¼å½¢æç±»ä¼¼ç´æ¹å¾çåå¸å±ç¤ºï¼ä½ä¿çäºæ¯ä¸ªæ°æ®ç¹çä¸ªä½æ§ã</p>
<p>å®ä¸æ¯ç¨æ¡å½¢çé«åº¦è¡¨ç¤ºé¢çï¼èæ¯ç¨å®éçæ°æ®ç¹æ°éæ¥å¯è§ååå¸ã</p>
<p>ä¸é¢åºäº<code>matplotlib</code>åºå°è£äºä¸ä¸ªç»å¶å¨å°éæ£®ç¹ç¶å¾çå½æ°ã</p>
<pre><code class="language-python">def wilkinson_dot_plot(
    data, bins=10, dot_size=40, dot_spacing=0.8, show_stats=True, random_seed=42
):
    """
    åå»ºå¨å°éæ£®ç¹ç¶å¾

    åæ°:
    data: è¾å¥æ°æ®ï¼ä¸ç»´æ°ç»ï¼
    bins: åç»æ°éæåç»è¾¹ç
    dot_size: ç¹çå¤§å°
    dot_spacing: ç¹ä¹é´çåç´é´è·
    random_seed: éæºç§å­
    """
    np.random.seed(random_seed)

    # åå»ºå¾å½¢
    fig, ax = plt.subplots(figsize=(10, 7))

    # è®¡ç®ç´æ¹å¾æ°æ®
    hist, bin_edges = np.histogram(data, bins=bins)

    # ä¸ºæ¯ä¸ªåç»åå»ºç¹
    max_count = 0  # è®°å½æå¤§å å é«åº¦
    bin_centers = []  # ä¿å­æ¯ä¸ªåç»çä¸­å¿ä½ç½®

    # çç¥...

    plt.tight_layout()
    return fig, ax, (bin_edges, hist)
</code></pre>
<p><strong>å¨å°éæ£®ç¹ç¶å¾</strong>çæ ¸å¿ç®æ³å¯ä»¥åè§£ä¸ºå ä¸ªæ­¥éª¤ï¼</p>
<ol>
<li><strong>æ°æ®åç®±</strong>ï¼å°è¿ç»­æ°æ®åæè¥å¹²ä¸ªç­å®½çåºé´</li>
<li><strong>ç¹ä½ç½®è®¡ç®</strong>ï¼å¨æ¯ä¸ªåºé´åï¼å°æ°æ®ç¹åç´å å </li>
<li><strong>é¿åéå </strong>ï¼éè¿è°æ´ç¹çåç´ä½ç½®é²æ­¢éå ï¼åæ¶ä¿æå¯è¯»æ§</li>
</ol>
<p>ä½¿ç¨èµ·æ¥ä¹ç®åï¼</p>
<pre><code class="language-python"># çæç¤ºä¾æ°æ®
np.random.seed(42)

# æ°æ®éï¼æ­£æåå¸
data_normal = np.random.normal(100, 15, 100)
dot_size = 200

# åå»ºå¨å°éæ£®ç¹ç¶å¾
fig1, ax1, stats1 = wilkinson_dot_plot(data_normal, bins=12, dot_size=dot_size)
plt.show()
</code></pre>

<p><img src="https://img2024.cnblogs.com/blog/83005/202602/83005-20260205141247619-795851871.png" alt="" loading="lazy"></p>
<h1 id="2-éº¦ç©å¾">2. éº¦ç©å¾</h1>
<p>å¦ææ<strong>å¨å°éæ£®ç¹ç¶å¾</strong>æ¯ä½æ´é½å å çå¼¹ç ï¼é£ä¹<strong>éº¦ç©å¾</strong>å°±åæ¯ç°éä¸­çéº¦ç©ââæ¯ä¸ªæ°æ®ç¹é½åä¸é¢éº¦ç²ï¼ç²¾ç¡®å°çé¿å¨èªå·±çä½ç½®ä¸ï¼å±ç¤ºå¶å®éæ°å¼ã</p>
<p><strong>éº¦ç©å¾</strong>æ¯<strong>å¨å°éæ£®ç¹ç¶å¾</strong>çä¸ç§åä½ï¼å®å°ç¹æ¾ç½®å¨å¶å®éæ°å¼ä½ç½®ï¼èä¸æ¯åç»ä¸­å¿ã</p>
<p>è¿ä¿çäºæ°æ®çç²¾ç¡®æ§ï¼åæ¶éè¿å å é¿åäºéå ã</p>
<p><strong>éº¦ç©å¾</strong>çå®ç°ä¸<strong>å¨å°éæ£®ç¹ç¶å¾</strong>ç±»ä¼¼ï¼ä½æä¸ä¸ª<strong>å³é®åºå«</strong>ï¼ç¹æ²¿xè½´æ¾ç½®å¨å®éæ°æ®å¼ä½ç½®ï¼èä¸æ¯åç»ä¸­å¿ã</p>
<pre><code class="language-python"># å°è£éº¦ç©å¾å½æ°
def strip_plot(
    data,
    bin_edges=None,
    bins=10,
    dot_size=40,
    dot_spacing=0.8,
    jitter_amount=0.2,
    random_seed=42,
):
    """
    åå»ºéº¦ç©å¾ï¼å¨å¨å°éæ£®ç¹ç¶å¾åºç¡ä¸æ¾ç¤ºå®éå¼ï¼

    åæ°:
    data: è¾å¥æ°æ®ï¼ä¸ç»´æ°ç»ï¼
    bin_edges: å¯éï¼ä½¿ç¨é¢å®ä¹çåç»è¾¹ç
    bins: å¦ææªæä¾bin_edgesï¼åä½¿ç¨æ­¤åæ°åå»ºåç»
    dot_size: ç¹çå¤§å°
    dot_spacing: ç¹ä¹é´çåç´é´è·
    jitter_amount: æ°´å¹³æå¨ç¨åº¦ï¼é¿åéå ï¼
    random_seed: éæºç§å­
    """
    np.random.seed(random_seed)

    # åå»ºå¾å½¢
    fig, ax = plt.subplots(figsize=(10, 7))

    # å¦ææ²¡ææä¾åç»è¾¹çï¼åè®¡ç®
    if bin_edges is None:
        hist, bin_edges = np.histogram(data, bins=bins)
    else:
        hist, bin_edges = np.histogram(data, bins=bin_edges)

    # å¯¹æ°æ®è¿è¡æåº
    sorted_data = np.sort(data)

    # å°æ°æ®åéå°å¯¹åºçåç»
    data_by_bin = []
    for i in range(len(bin_edges) - 1):
        lower, upper = bin_edges[i], bin_edges[i + 1]
        bin_data = sorted_data[(sorted_data &gt;= lower) &amp; (sorted_data &lt; upper)]
        data_by_bin.append(bin_data)

    # å¤çæåä¸ä¸ªåç»ï¼åå«æå¤§å¼ï¼
    if len(data) &gt; 0:
        last_bin_data = sorted_data[sorted_data &gt;= bin_edges[-2]]
        if len(data_by_bin) &gt; 0:
            data_by_bin[-1] = last_bin_data

    # ç»å¶éº¦ç©å¾
    max_points_in_bin = 0
    
    # çç¥ ...

    plt.tight_layout()
    return fig, ax, (bin_edges, data_by_bin)
</code></pre>
<p>ä½¿ç¨èµ·æ¥ä¹ç®åï¼</p>
<pre><code class="language-python"># çæç¤ºä¾æ°æ®
np.random.seed(42)

# æ°æ®éï¼æ­£æåå¸
data_normal = np.random.normal(100, 15, 100)
dot_size = 200

# åå»ºçéº¦ç©å¾
bin_edges = 12
fig2, ax2, stats2 = strip_plot(
    data_normal, bin_edges=bin_edges, dot_size=dot_size, jitter_amount=0.15
)
plt.show()
</code></pre>

<p><img src="https://img2024.cnblogs.com/blog/83005/202602/83005-20260205141247657-1144653987.png" alt="" loading="lazy"></p>
<h1 id="3-ä¸¤ç§å¾çåºç¨åºæ¯">3. ä¸¤ç§å¾çåºç¨åºæ¯</h1>
<p>ä¸é¢æ¨¡æä¸ä¸ªå­¦çèè¯æç»©åå¸çåæåºæ¯ï¼ççä¸é¢ä¸¤ç§ç¹ç¶å¾çåºç¨ã</p>
<pre><code class="language-python"># ç¤ºä¾ï¼å­¦çèè¯æç»©åå¸åæ
print("ç¤ºä¾ï¼å­¦çèè¯æç»©åå¸åæ")
print("-" * 40)

# åå»ºæ¨¡æçèè¯æç»©æ°æ®
np.random.seed(42)
exam_scores = np.concatenate(
    [
        np.random.normal(65, 8, 45),  # ä¸­ç­æ°´å¹³å­¦ç
        np.random.normal(85, 6, 30),  # ä¼ç§å­¦ç
        np.random.normal(45, 10, 24),  # éè¦å¸®å©çå­¦ç
    ]
)

# è¿æ»¤æä¸åçåæ°
exam_scores = np.clip(exam_scores, 0, 100)

print(f"å­¦çæ»æ°: {len(exam_scores)}")
print(f"åæ°èå´: {exam_scores.min():.1f} - {exam_scores.max():.1f}")
print(f"å¹³åå: {exam_scores.mean():.1f}")
print(f"åæ ¼ç: {(exam_scores &gt;= 60).sum() / len(exam_scores) * 100:.1f}%\n")

# ä½¿ç¨å¨å°éæ£®ç¹ç¶å¾
print("åå»ºå¨å°éæ£®ç¹ç¶å¾...")
fig1, ax1, stats1 = wilkinson_dot_plot(
    exam_scores,
    bins=[0, 40, 60, 70, 80, 90, 100],
)
plt.show()

# ä½¿ç¨éº¦ç©å¾
print("åå»ºéº¦ç©å¾...")
fig2, ax2, stats2 = strip_plot(
    exam_scores,
    bins=[0, 40, 60, 70, 80, 90, 100],
    jitter_amount=0.15,
)
plt.show()

## è¾åºç»æï¼
'''
ç¤ºä¾ï¼å­¦çèè¯æç»©åå¸åæ
----------------------------------------
å­¦çæ»æ°: 99
åæ°èå´: 25.1 - 94.4
å¹³åå: 65.3
åæ ¼ç: 63.6%
'''
</code></pre>

<p><img src="https://img2024.cnblogs.com/blog/83005/202602/83005-20260205141247651-13405857.png" alt="" loading="lazy"></p>

<p><img src="https://img2024.cnblogs.com/blog/83005/202602/83005-20260205141247624-1158297536.png" alt="" loading="lazy"></p>
<p>å¨å­¦çèè¯æç»©åæè¿ä¸ªåºæ¯ä¸­ï¼</p>
<ul>
<li><strong>å¨å°éæ£®ç¹ç¶å¾</strong>ï¼å°åæ°åç»æåºé´ï¼å¦60-70åï¼ï¼ææè¯¥åºé´çå­¦çç¹é½å å å¨åºé´ä¸­å¿ï¼æ¸æ°å°å±ç¤ºäºåæ°æ®µçæ´ä½åå¸å½¢æï¼ç±»ä¼¼ç´æ¹å¾ä½è½çå°ä¸ªä½ç¹ã</li>
<li><strong>éº¦ç©å¾</strong>ï¼ç¹å¨å®éåæ°ä½ç½®å å ï¼å¦65åã68åç­ï¼ï¼æ¢æ¾ç¤ºäºæ¯ä¸ªå­¦ççå·ä½åæ°ï¼åéè¿åç´å å é¿åäºéå ï¼ä¿çäºæ°æ®çç²¾ç¡®æ§ã</li>
</ul>
<p>æ»çæ¥è¯´ï¼<strong>å¨å°éæ£®ç¹ç¶å¾</strong>çåå¸å½¢æï¼<strong>åºé´è§è§</strong>ï¼ï¼<strong>éº¦ç©å¾</strong>çå·ä½æ°å¼ï¼<strong>ç²¾ç¡®è§è§</strong>ï¼ã</p>
<h1 id="4-æ»ç»">4. æ»ç»</h1>
<p><strong>å¨å°éæ£®ç¹ç¶å¾</strong>å<strong>éº¦ç©å¾</strong>ä¸ºæ°æ®å¯è§åå·¥å·ç®±å¢æ·»äºä¼éèå®ç¨çå·¥å·ã</p>
<p>å®ä»¬å¡«è¡¥äºä¼ ç»<strong>ç´æ¹å¾</strong>å<strong>æ£ç¹å¾</strong>ä¹é´çç©ºç½ï¼æä¾äºåæ¶å±ç¤ºæ°æ®åå¸åä¸ªä½æ°æ®ç¹çç¬ç¹æ¹å¼ã</p>
<p>å¨æ°æ®å¯è§åä¸­ï¼éæ©åéçå¾è¡¨ç±»åå°±åéæ©æ­£ç¡®çå·¥å·æ¥å®æå·¥ä½ã</p>
<p><strong>å¨å°éæ£®ç¹ç¶å¾</strong>å<strong>éº¦ç©å¾</strong>æä¾äºç¬ç¹çè§è§ï¼è®©æä»¬è½å¤åæ¶çå°æ£®æåæ æ¨ââæ¢çè§£æ´ä½åå¸ï¼åå³æ³¨ä¸ªä½æ°æ®ç¹ã</p>
<p>å®æ´ä»£ç åäº«ï¼<a href="https://url11.ctfile.com/f/45455611-8640860073-8a6639?p=6872" target="_blank" rel="noopener nofollow">å¨å°éæ£®ä¸éº¦ç©å¾.ipynb</a> (è®¿é®å¯ç : 6872)</p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-05 14:14">2026-02-05 14:13</span>&nbsp;
<a href="https://www.cnblogs.com/wang_yb">wang_yb</a>&nbsp;
éè¯»(<span id="post_view_count">39</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19579048);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19579048', targetLink: 'https://www.cnblogs.com/wang_yb/p/19579048', title: 'åå«æ²é·çç´æ¹å¾ï¼ç»å¶é«é¢å¼çå¨å°éæ£®å¾ä¸éº¦ç©å¾' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ æ¨è .NET 8.0 å¼æºé¡¹ç®ä¼ªå¾®æå¡æ¡æ¶ ]]></title>
    <link>https://www.cnblogs.com/1312mn/p/18376570</link>
    <guid>234e6c19380759da9708c4c71ecec312</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/1312mn/p/18376570" title="åå¸äº 2026-02-05 13:32">
    <span role="heading" aria-level="2">æ¨è .NET 8.0 å¼æºé¡¹ç®ä¼ªå¾®æå¡æ¡æ¶</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h2 data-tool="mdniceç¼è¾å¨"><span class="prefix"><span class="content">åè¨</span></span></h2>
<p data-tool="mdniceç¼è¾å¨">å¿ï¼å°ä¼ä¼´ä»¬ï¼æè¿çå°äºä¸ä¸ª .NET 8.0 çå°é¡¹ç®ä¼ªå¾®æå¡æ¡æ¶ï¼éå¸¸éåæ³è¦å¿«éæ­å»ºå°ååºç¨é¡¹ç®ææ¯æ³è¦å­¦ä¹ .NET 8.0åæ°çææ¯ï¼ä½åä¸ç¥éä»åªéå­¦èµ·çæåãè¿ä¸ªæ¡æ¶å¯ä»¥å¸®å©æä»¬ç®åå¼åæµç¨ï¼åæ¶è¿è½éåºä¸æ­ååçéæ±ã</p>
<p data-tool="mdniceç¼è¾å¨">å®è½ç¶ç®åäºå¾å¤å¤æçå¾®æå¡ç¹æ§ï¼ä½ä»ä¿çäºå³é®çå¾®æå¡çå¿µï¼è®©æä»¬å¯ä»¥ä¸æ³¨äºä¸å¡é»è¾èä¸æ¯åºå±ç»èï¼å¹¶ä¸è¾¾å°å®æææã</p>
<p data-tool="mdniceç¼è¾å¨">æ³è¦å¿«éä¸æ .NET 8.0ï¼ä¸å¦¨è¯è¯è¿ä¸ªæ¡æ¶ãé¡¹ç®å·²ç»å¨ GitHub ä¸å¼æºäºï¼æ¬¢è¿å¤§å®¶åæ¥å´è§ãæä¾å»ºè®®æè´¡ç®ä»£ç ãå¸æè¿ä¸ªæ¡æ¶è½å¤å¸®å©æ´å¥½çå¸®å©æä»¬å·¥ä½ä¸­éå°çé®é¢ã</p>
<h2 data-tool="mdniceç¼è¾å¨"><span class="prefix"><span class="content">é¡¹ç®ä»ç»</span></span></h2>
<p data-tool="mdniceç¼è¾å¨">ä¸ºä»ä¹è¯´æ¯ä¼ªå¾®æå¡æ¡æ¶ï¼å¸¸è§å¾®æå¡æ¡æ¶å¯è½è¿åæ¬æå¡å®¹éãæå¡é´çéä¿¡ãæå¡è¿½è¸ªåçæ§ãæå¡æ³¨åååç°ç­ç­ï¼èè¿éä¸ºäºå¨ä½¿ç¨ä¸­çæ´ç®åï¼å°å¾å¤ä¸è¥¿è¿è¡äºç®åæèçç¥äºã</p>
<p data-tool="mdniceç¼è¾å¨"><strong>ç®åå¾®æå¡æ¦å¿µ</strong>ï¼ä½èè½ç¶ç§°ä¸ºâä¼ªå¾®æå¡âï¼ä½æ¬æ¡æ¶ä¾ç¶å·å¤ä¸äºå³é®çå¾®æå¡ç¹æ§ï¼å¦æ¨¡ååè®¾è®¡åæå¡è§£è¦ãå®éè¿åå°å¤æçæå¡é´éä¿¡ãå®¹éæºå¶åæå¡åç°ç­åè½ï¼ä½¿å¼åæ´å é«æä¸æäºç®¡çã</p>
<p data-tool="mdniceç¼è¾å¨"><strong>ææ¯æ </strong>ï¼éæäºä¸äºæ¯è¾å®ç¨çæ°ææ¯ï¼åæ¬EF CoreãRedisãRabbitMQåMySQLï¼ç¡®ä¿åºç¨é«æåè½åºå¯¹é«å¹¶ååºæ¯ã</p>
<p data-tool="mdniceç¼è¾å¨"><strong>æç¨æ§</strong>ï¼è¯¥æ¡æ¶çç®æ æ¯å°½å¯è½å°ç®åå¼åè¿ç¨ï¼æä¾å®æ´çæ¥å£åææ¡£ï¼è½å¤è¿éä¸æï¼å¹¶å°æ´å¤ç²¾åéä¸­å¨ä¸å¡é»è¾ä¸ã</p>
<p data-tool="mdniceç¼è¾å¨"><strong>æç»­ä¼å</strong>ï¼å°½ç®¡ç®åä»å¤äºæ©æé¶æ®µï¼ä½ä½èæ¿è¯ºå°æç»­æ¹è¿åå®åè¯¥é¡¹ç®ãè¿åæ¬ä½ä¸éäºå¼å¥æ´å¤é«çº§ç¹æ§ãå¢å¼ºç°æåè½ä»¥åæåæ´ä½æ§è½ã</p>
<h2 data-tool="mdniceç¼è¾å¨"><span class="prefix"><span class="content">é¡¹ç®æ ¸å¿</span></span></h2>
<p data-tool="mdniceç¼è¾å¨"><strong>å¯¹è±¡æ å°</strong>ï¼ä½¿ç¨ <code>AutoMapper</code> èªå¨å¤çå¯¹è±¡ä¹é´çæ å°ï¼è®©ä½ æ éæå¨ç¼åç¹ççè½¬æ¢ä»£ç ã</p>
<p data-tool="mdniceç¼è¾å¨"><strong>æ¥è¯¢å°è£</strong>ï¼éè¿ <code>Ardalis.Specification</code> å <code>LinqKit.Core</code> å°è£ EF Core æ¥è¯¢ï¼è®©æ°æ®è·ååå¾æ´ç®åç´è§ã</p>
<p data-tool="mdniceç¼è¾å¨"><strong>æ°æ®åºäº¤äº</strong>ï¼å¨ EF Core ä¸­éåäº <code>SaveChangesInterceptor</code>ï¼å®ç°äºè½¯å é¤åè½ï¼å¹¶èªå¨ç®¡çåå»ºæ¶é´åæ´æ°æ¶é´å­æ®µã</p>
<p data-tool="mdniceç¼è¾å¨"><strong>æ´ä½æ¶æ</strong>ï¼éç¨äºæ´æ´çæ¶æè®¾è®¡ï¼ä¾¿äºçè§£åç»´æ¤ã</p>
<p data-tool="mdniceç¼è¾å¨"><strong>ä¸å¡åè½</strong>ï¼å·²ç»é¢ç½®äºä¸äºåºæ¬çä¸å¡åè½ï¼å¼ç®±å³ç¨ã</p>
<p data-tool="mdniceç¼è¾å¨"><strong>ä¾èµæ³¨å¥</strong>ï¼åç½®äºä¾èµæ³¨å¥å®¹å¨ï¼æ¹ä¾¿ç®¡çç»ä»¶åæå¡ã</p>
<p data-tool="mdniceç¼è¾å¨"><strong>è®¤è¯ä¸ææ</strong>ï¼ä½¿ç¨å token å®ç°äºå®å¨ç»å½åæ æç¥çåç«¯ token å·æ°ã</p>
<p data-tool="mdniceç¼è¾å¨"><strong>åå¸å¼ ID çæ</strong>ï¼éæäº <code>Snowflake</code> åå¸å¼ ID çæå¨ï¼ç¡®ä¿å¨å±å¯ä¸æ è¯ç¬¦ã</p>
<p data-tool="mdniceç¼è¾å¨"><strong>ç¼å­ä¸é</strong>ï¼éè¿ Redis å®ç°äºåå¸å¼ç¼å­ååå¸å¼éï¼æé«äºç³»ç»çå¯ç¨æ§åå¹¶åæ§è½ã</p>
<p data-tool="mdniceç¼è¾å¨"><strong>æ¶æ¯éå</strong>ï¼å©ç¨ <code>RabbitMQ</code> å°è£äºå¼æ­¥ä»»å¡å¤çæºå¶ï¼å¦æä»¶ä¸ä¼ åä¸è½½ã</p>
<p data-tool="mdniceç¼è¾å¨"><strong>å®æ¶ä»»å¡</strong>ï¼ç»å <code>Cronos</code> å <code>BackgroundService</code> å®ç°äºç§çº§å®æ¶ä»»å¡ã</p>
<p data-tool="mdniceç¼è¾å¨"><strong>æ°æ®åå§å</strong>ï¼ä½¿ç¨ <code>BackgroundService</code> è¿è¡æ°æ®åå§åï¼æ¯å¦å­å¸æ°æ®çå è½½ã</p>
<p data-tool="mdniceç¼è¾å¨"><strong>æ¥å¿è®°å½</strong>ï¼éç¨ <code>Serilog</code> è®°å½å¼å¸¸æ¥å¿ï¼å¹¶éè¿ Docker é¨ç½²å®ç°æ¥å¿çå¯è§åçæ§ã</p>
<p data-tool="mdniceç¼è¾å¨"><strong>æä½æ¥å¿</strong>ï¼éè¿èªå®ä¹è¿æ»¤å¨ååå°è®°å½æä½æ¥å¿ï¼ä¾¿äºè¿½è¸ªç¨æ·è¡ä¸ºã</p>
<p data-tool="mdniceç¼è¾å¨"><strong>æééªè¯</strong>ï¼å®ç°äºæééªè¯è¿æ»¤å¨ï¼ç¡®ä¿ç¨æ·åªè½è®¿é®è¢«ææçèµæºã</p>
<p data-tool="mdniceç¼è¾å¨"><strong>ç»ä¸ååºæ ¼å¼</strong>ï¼ä½¿ç¨ <code>IAsyncResultFilter</code> ç»ä¸äºè¿åç»åç«¯çæ°æ®æ ¼å¼ã</p>
<p data-tool="mdniceç¼è¾å¨"><strong>Excel æä½</strong>ï¼éæ <code>EPPlus</code> åºï¼æ¯æ Excel å¯¼å¥åå¯¼åºã</p>
<p data-tool="mdniceç¼è¾å¨"><strong>ä¸é®é¨ç½²</strong>ï¼æ¯æä½¿ç¨ <code>goploy</code> å¿«éé¨ç½²ååç«¯åºç¨ã</p>
<p data-tool="mdniceç¼è¾å¨"><strong>API ææ¡£</strong>ï¼éè¿ <code>Swagger</code> èªå¨çæ RESTful API ææ¡£ï¼æ¹ä¾¿åç«¯ååç«¯å¼åäººååä½ã</p>
<p data-tool="mdniceç¼è¾å¨"><strong>éç½®å è½½</strong>ï¼èªå¨å è½½ <code>appsettings.json</code> æä»¶ä¸­çéç½®ä¿¡æ¯ã</p>
<h2 data-tool="mdniceç¼è¾å¨"><span class="prefix"><span class="content">é¡¹ç®æ¡æ¶</span></span></h2>
<p data-tool="mdniceç¼è¾å¨">éè¿Githubä¸è½½é¡¹ç®æºç ï¼æä»¬å¯ä»¥æ¥çé¡¹ç®æ¡æ¶ï¼å·ä½å¦ä¸å¾æç¤ºï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/576536/202408/576536-20240823165609019-1106450563.png" width="619" height="700" loading="lazy" style="vertical-align: middle; display: block; margin-left: auto; margin-right: auto"></p>
<img alt="">
<p data-tool="mdniceç¼è¾å¨">1ãLibraries</p>
<p data-tool="mdniceç¼è¾å¨">åå«åç§å¤é¨ç±»åºï¼å¯¹å¶æ·±å å·¥ä½¿ç¨å¨é¡¹ç®ä¸­</p>
<p data-tool="mdniceç¼è¾å¨">2ãServices/Basic</p>
<p data-tool="mdniceç¼è¾å¨">å¾®æå¡åºç¡æ¯æå­ç³»ç»</p>
<p data-tool="mdniceç¼è¾å¨">3ãServices/NCDP</p>
<p data-tool="mdniceç¼è¾å¨">å¾®æå¡ä¸å¡å­ç³»ç»</p>
<p data-tool="mdniceç¼è¾å¨">4ãServices/SystemService</p>
<p data-tool="mdniceç¼è¾å¨">å¾®æå¡ç³»ç»æå¡ï¼åæ¬æ°æ®åºçæ´æ°ãå®æ¶ä»»å¡ãæ°æ®åå§åãSwaggeræ¿è½½ãRabbitMQéåäºä»¶å¤çå¨ç­ï¼</p>
<p data-tool="mdniceç¼è¾å¨">5ãsun.Core</p>
<p data-tool="mdniceç¼è¾å¨">sun.Coreä½ä¸ºäºä¸­è½¬ï¼å¶ä»å¤é¨æèèªå·±å°è£çç±»åºï¼å¨å¼ç¨çæ¶åé½æ¯å¨sun.Coreä¸­è¿è¡çå¼ç¨ã</p>
<p data-tool="mdniceç¼è¾å¨">ç®æ¯é´æ¥å¼ç¨ï¼æ¥ç®åé¡¹ç®ä¸­çä¾èµå³ç³»ã</p>
<p data-tool="mdniceç¼è¾å¨">åæ¶å¨sun.Coreä¹å°è£äºä¸äºæ ¸å¿ç»ä»¶åæå¡ã</p>
<p><img src="https://img2024.cnblogs.com/blog/576536/202408/576536-20240823165855661-1876970856.png" alt="" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p data-tool="mdniceç¼è¾å¨">6ãsun.Infrastructure</p>
<p data-tool="mdniceç¼è¾å¨">ä¸»è¦å°è£ä¸äºéç¨çæ¹æ³ï¼ä»¥ååºç¡è®¾æ½ç»ä»¶ï¼ä¾å¤é¨ä½¿ç¨ã</p>
<p><img src="https://img2024.cnblogs.com/blog/576536/202408/576536-20240823165907878-476029284.png" alt="" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<h2 data-tool="mdniceç¼è¾å¨"><span class="prefix"><span class="content">é¡¹ç®è¯´æ</span></span></h2>
<p data-tool="mdniceç¼è¾å¨">å³äºé¡¹ç®è¯¦ç»ä½¿ç¨æåµå¯ä»¥æ¥çä½èæ´ççæç« é¾æ¥ https://www.cnblogs.com/aehyok/p/18058032 ï¼å¸æè½å¤å¸®å©å¤§å®¶æ´å¥½ççè§£é¡¹ç®åå­¦ä¹ ç¥è¯ç¹ï¼æåèªå·±çææ¯è½åï¼ä¸é¢åªå±ç¤ºäºé¨ååå®¹ã</p>
<h4 data-tool="mdniceç¼è¾å¨"><span class="prefix"><span class="content">1ãä¸å¡åè½</span></span></h4>
<p data-tool="mdniceç¼è¾å¨">ç®ååºæ¬å®ç°çåè½åæ¬ï¼ç¨æ·ç®¡çãè§è²ç®¡çãåºåç®¡çãæ¥çæ¥å¿ï¼ç»å½æ¥å¿åæä½æ¥å¿ï¼ãèåç®¡çãæéæ§å¶ãç³»ç»ç®¡çç­åè½ã</p>
<p><img src="https://img2024.cnblogs.com/blog/576536/202408/576536-20240823165950242-344963990.png" width="690" height="380" loading="lazy" style="vertical-align: middle; display: block; margin-left: auto; margin-right: auto"></p>
<h4 data-tool="mdniceç¼è¾å¨"><span class="prefix"><span class="content">2ãçæææ¡£å·¥å·</span></span></h4>
<p data-tool="mdniceç¼è¾å¨">Swagger çæREST APIsææ¡£å·¥å·åå«å¯ä»¥æ¿è½½å¤ä¸ªå¾®æå¡é¡¹ç®ï¼éè¿å³ä¸è§è¿è¡åæ¢ï¼ä¾¿å¯ä»¥æ¥çå½åå¾®æå¡é¡¹ç®çæ¥å£ææ¡£ï¼å¹¶å¯ä»¥è¿è¡æµè¯</p>
<p data-tool="mdniceç¼è¾å¨">æµè¯æ¥å£ç´æ¥å¯å¨swagger uiä¸è¿è¡</p>
<p data-tool="mdniceç¼è¾å¨">ç»ä¸æ·»å æ¥å£ä¸­çHeaderåæ°</p>
<p data-tool="mdniceç¼è¾å¨">éè¿å¯¹Swagger UIè¿è¡é¨åçèªå®ä¹ï¼ä½¿çæ´å¥½çééèªå·±çé¡¹ç®ï¼æ¯å¦æ·»å ç»å½ï¼è¿æ ·æ¥å£ä¾¿ç´æ¥å¯ä»¥å¨swagger UIä¸é¢è¿è¡ã</p>
<p><img src="https://img2024.cnblogs.com/blog/576536/202408/576536-20240823170029758-1450910516.png" width="619" loading="lazy" style="vertical-align: middle; display: block; margin-left: auto; margin-right: auto"></p>
<h4 data-tool="mdniceç¼è¾å¨"><span class="prefix"><span class="content">3ãåå¸å¼éªè±Idçæå¨</span></span></h4>
<p data-tool="mdniceç¼è¾å¨">Snowflake æä½¿ç¨çå¼æºç±»åºï¼https://github.com/stulzq/snowflake-net</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
<span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> åå¸å¼éªè±Idçæå¨
</span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
<span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> SnowFlake
{
    </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
    <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> éè¿éæç±»åªå®ä¾åä¸æ¬¡IdWorker å¦åçæçIdä¼æéå¤
    </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">private</span> <span style="color: rgba(0, 0, 255, 1)">static</span> <span style="color: rgba(0, 0, 255, 1)">readonly</span> Lazy&lt;IdWorker&gt; _instance = <span style="color: rgba(0, 0, 255, 1)">new</span>(() =&gt;<span style="color: rgba(0, 0, 0, 1)">
    {
        </span><span style="color: rgba(0, 0, 255, 1)">var</span> commonOptions = App.Options&lt;CommonOptions&gt;<span style="color: rgba(0, 0, 0, 1)">();

        </span><span style="color: rgba(0, 0, 255, 1)">return</span> <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> IdWorker(commonOptions.WorkerId, commonOptions.DatacenterId);
    });

    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">static</span> IdWorker Instance =<span style="color: rgba(0, 0, 0, 1)"> _instance.Value;
}</span></pre>
</div>
<p data-tool="mdniceç¼è¾å¨">å¶ä¸­ WorkerIdåDatacenterIdä¿æä¸åçè¯ï¼ä¾å¦ä¸¤ä¸ªå¾®æå¡WorkerIdä¸ä¸ªä¸º1ä¸ä¸ªä¸º2,é£ä¹å¨åä¸æ¯«ç§æ°çæçIdè¯å®æ¯ä¸åçã</p>
<p data-tool="mdniceç¼è¾å¨">åä¸ä¸ªIdWorkerå¨ä¸ä¸ªæ¯«ç§ä¸­å¯ä»¥çæ4096ä¸ªåºåå· è¶³å¤å¤§åç³»ç»ä½¿ç¨äºï¼ä¸æéå¤çé®é¢ã</p>
<h4 data-tool="mdniceç¼è¾å¨"><span class="prefix"><span class="content">4ãåå¸å¼ç¼å­ååå¸å¼é</span></span></h4>
<p data-tool="mdniceç¼è¾å¨">Redis ç»ä¸å°è£å®ç°åå¸å¼ç¼å­ååå¸å¼éï¼æä½¿ç¨çå¼æºç±»åºï¼https://github.com/2881099/csredis</p>
<p data-tool="mdniceç¼è¾å¨">ç®åä¸»è¦å°è£äºå ä¸ªå¸¸ç¨çæ¥å£æ¹æ³</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">interface</span><span style="color: rgba(0, 0, 0, 1)"> IRedisService
{
    </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
    <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> æ¥çæå¡æ¯å¦è¿è¡
    </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
    <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;returns&gt;&lt;/returns&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">bool</span><span style="color: rgba(0, 0, 0, 1)"> PingAsync();

    </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
    <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> æ ¹æ®keyè·åç¼å­
    </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
    <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;param name="key"&gt;&lt;/param&gt;</span>
    <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;returns&gt;&lt;/returns&gt;</span>
    Task&lt;T&gt; GetAsync&lt;T&gt;(<span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)"> key);



    </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
    <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> è®¾ç½®æå®keyçç¼å­å¼(ä¸è¿æ)
    </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
    <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;param name="key"&gt;&lt;/param&gt;</span>
    <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;param name="value"&gt;&lt;/param&gt;</span>
    <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;returns&gt;&lt;/returns&gt;</span>
    Task&lt;<span style="color: rgba(0, 0, 255, 1)">bool</span>&gt; SetAsync(<span style="color: rgba(0, 0, 255, 1)">string</span> key, <span style="color: rgba(0, 0, 255, 1)">object</span><span style="color: rgba(0, 0, 0, 1)"> value);

    </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
    <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> è®¾ç½®æå®keyçç¼å­å¼(å¯è®¾ç½®è¿ææ¶é´åNxãXx)
    </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
    <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;param name="key"&gt;&lt;/param&gt;</span>
    <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;param name="value"&gt;&lt;/param&gt;</span>
    <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;param name="expire"&gt;&lt;/param&gt;</span>
    <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;param name="exists"&gt;&lt;/param&gt;</span>
    <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;returns&gt;&lt;/returns&gt;</span>
    Task&lt;<span style="color: rgba(0, 0, 255, 1)">bool</span>&gt; SetAsync(<span style="color: rgba(0, 0, 255, 1)">string</span> key, <span style="color: rgba(0, 0, 255, 1)">object</span> value, TimeSpan expire, RedisExistence? exists = <span style="color: rgba(0, 0, 255, 1)">null</span><span style="color: rgba(0, 0, 0, 1)">);

    </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
    <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> è®¾ç½®æå®keyçç¼å­å¼(å¯è®¾ç½®è¿æç§æ°åNxãXx)
    </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
    <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;param name="key"&gt;&lt;/param&gt;</span>
    <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;param name="value"&gt;&lt;/param&gt;</span>
    <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;param name="expireSeconds"&gt;</span><span style="color: rgba(0, 128, 0, 1)">è¿ææ¶é´åä½ä¸ºç§</span><span style="color: rgba(128, 128, 128, 1)">&lt;/param&gt;</span>
    <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;param name="exists"&gt;&lt;/param&gt;</span>
    <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;returns&gt;&lt;/returns&gt;</span>
    Task&lt;<span style="color: rgba(0, 0, 255, 1)">bool</span>&gt; SetAsync(<span style="color: rgba(0, 0, 255, 1)">string</span> key, <span style="color: rgba(0, 0, 255, 1)">object</span> value, <span style="color: rgba(0, 0, 255, 1)">int</span> expireSeconds = -<span style="color: rgba(128, 0, 128, 1)">1</span>, RedisExistence? exists = <span style="color: rgba(0, 0, 255, 1)">null</span><span style="color: rgba(0, 0, 0, 1)">);

    </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;summary&gt;</span>
    <span style="color: rgba(128, 128, 128, 1)">///</span><span style="color: rgba(0, 128, 0, 1)"> å é¤Key
    </span><span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;/summary&gt;</span>
    <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;param name="key"&gt;&lt;/param&gt;</span>
    <span style="color: rgba(128, 128, 128, 1)">///</span> <span style="color: rgba(128, 128, 128, 1)">&lt;returns&gt;&lt;/returns&gt;</span>
    Task&lt;<span style="color: rgba(0, 0, 255, 1)">long</span>&gt; DeleteAsync(<span style="color: rgba(0, 0, 255, 1)">string</span><span style="color: rgba(0, 0, 0, 1)"> key);


    Task</span>&lt;Dictionary&lt;<span style="color: rgba(0, 0, 255, 1)">string</span>,<span style="color: rgba(0, 0, 255, 1)">string</span>&gt;&gt;<span style="color: rgba(0, 0, 0, 1)"> ScanAsync();
}</span></pre>
</div>
<p data-tool="mdniceç¼è¾å¨">ä¸»è¦æ¯ä¸ºäºä¿æä¸redis cliä¸­çæ¹æ³ä¸è´ï¼éäºè¿ä¸ªç±»åºï¼å½ç¶ä½ ä¹å¯ä»¥éæ©å¶ä»çç±»åº è¿æ¯è®å¤çã</p>
<p data-tool="mdniceç¼è¾å¨">åæ¶è¿å°è£äºä¸ä¸ªæ¥å£ç¨äºåç«¯çæµææçkeyåvalueã</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">async</span> Task&lt;<span style="color: rgba(0, 0, 255, 1)">dynamic</span>&gt;<span style="color: rgba(0, 0, 0, 1)"> ScanAsync(PagedQueryModelBase model)
{
    List</span>&lt;<span style="color: rgba(0, 0, 255, 1)">string</span>&gt; list = <span style="color: rgba(0, 0, 255, 1)">new</span> List&lt;<span style="color: rgba(0, 0, 255, 1)">string</span>&gt;<span style="color: rgba(0, 0, 0, 1)">();

    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">æ ¹æ²model.Keywordè¿è¡æ¨¡ç³å¹é</span>
    <span style="color: rgba(0, 0, 255, 1)">var</span> scanResult = <span style="color: rgba(0, 0, 255, 1)">await</span> RedisHelper.ScanAsync(model.Page, $<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">*{model.Keyword}*</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, model.Limit);
    list.AddRange(scanResult.Items);

    </span><span style="color: rgba(0, 0, 255, 1)">var</span> values = <span style="color: rgba(0, 0, 255, 1)">await</span><span style="color: rgba(0, 0, 0, 1)"> RedisHelper.MGetAsync(list.ToArray());

    </span><span style="color: rgba(0, 0, 255, 1)">var</span> resultDictionary = list.Zip(values, (key, value) =&gt; <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> { key, value })
                                    .ToDictionary(item </span>=&gt; item.key, item =&gt;<span style="color: rgba(0, 0, 0, 1)"> item.value);
    </span><span style="color: rgba(0, 0, 255, 1)">dynamic</span> result = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> ExpandoObject();
    result.Items </span>=<span style="color: rgba(0, 0, 0, 1)"> resultDictionary;
    result.Cursor </span>= scanResult.Cursor;  <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> ä¸ä¸æ¬¡è¦éè¿è¿ä¸ªCursorè·åä¸ä¸é¡µçkeys</span>
   <span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> result;
}</span></pre>
</div>
<h4 data-tool="mdniceç¼è¾å¨"><span class="prefix"><span class="content">5ãèªå¨åé¨ç½²</span></span></h4>
<p data-tool="mdniceç¼è¾å¨">éè¿google/zxä½¿ç¨nodejså¼åäºä¸ä¸ªèæ¬ï¼ç¨äºèªå¨åé¨ç½²</p>
<p data-tool="mdniceç¼è¾å¨">å¯ä»¥åèGithubçå°åï¼https://github.com/aehyok/zx-deploy</p>
<p data-tool="mdniceç¼è¾å¨">ä¸»è¦æ¯ç¨äºå¼åç¯å¢ï¼éè¿</p>
<div class="cnblogs_code">
<pre>pnpm sun-<span style="color: rgba(0, 0, 0, 1)">baisc
pnpm sun</span>-<span style="color: rgba(0, 0, 0, 1)">ncdp
pnpm sun</span>-systemserivce</pre>
</div>
<p data-tool="mdniceç¼è¾å¨">å½ç¶ä½ è¿å¯ä»¥éè¿ç»åå½ä»¤è¿è¡é¨ç½²ï¼ä¾å¦æ³ä¸èµ·é¨ç½²ä¸ä¸ªæå¡</p>
<div class="cnblogs_code">
<pre>pnpm sun-all</pre>
</div>
<pre class="custom" data-tool="mdniceç¼è¾å¨"><code class="hljs">å¶å®å°±æ¯&nbsp;&nbsp;<br></code></pre>
<div class="cnblogs_code">
<pre><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">pnpm sun-ncdp &amp;&amp; </span>
pnpm sun-basic &amp;&amp;<span style="color: rgba(0, 0, 0, 1)"> 
pnpm sun</span>-systemservice<span style="color: rgba(128, 0, 0, 1)">"</span></pre>
</div>
<p data-tool="mdniceç¼è¾å¨">è¿éæç¨ç<code>&amp;&amp;</code>ç¸å½äºä¸é¢ä¸ä¸ªå½ä»¤ä¸²è¡æ§è¡ï¼åæ§è¡sun-ncdp,åæ§è¡sun-basic,æåæ§è¡sun-systemserviceã</p>
<p data-tool="mdniceç¼è¾å¨">å¦æä½ ççµèæèæå¡å¨æ§è½è¶³å¤å¥½ï¼å¯ä»¥ä½¿ç¨<code>&amp;</code>ç¬¦å·ï¼è¿æ ·å°±æ¯å¹¶è¡æ§è¡ï¼ä¸ä¸ªæå¡åæ¶å¯å¨ï¼è¿æ ·å¯ä»¥èçæ¶é´ã</p>
<p data-tool="mdniceç¼è¾å¨">ä»¥ä¸ä»å±ç¤ºäºé¡¹ç®çé¨ååå®¹ï¼è¿æè®¸å¤å¶ä»çææ¯åºç¨ååè½éè¦å¤§å®¶å»åç°ã</p>
<p data-tool="mdniceç¼è¾å¨">ç¶åæä»¬å¯ä»¥ä¸è½½æºç åèææ¡£å¹¶è¿è¡å®éæä½ï¼ä»¥ä¾¿å¨é¢äºè§£æ´ä¸ªé¡¹ç®çææ¯åºç¨åç¹æ§ã</p>
<h2 data-tool="mdniceç¼è¾å¨"><span class="prefix"><span class="content">é¡¹ç®å°å</span></span></h2>
<p data-tool="mdniceç¼è¾å¨">Githubï¼https://github.com/aehyok/.NET8.0</p>
<h2 class="md-end-block md-heading"><span class="md-plain">æå</span></h2>
<p><span class="md-plain"><span class="md-plain md-expand">å¦æä½ è§å¾è¿ç¯æç« å¯¹ä½ æå¸®å©ï¼ä¸å¦¨ç¹ä¸ªèµæ¯æä¸ä¸ï¼ä½ çæ¯ææ¯æç»§ç»­åäº«ç¥è¯çå¨åãå¦ææä»»ä½çé®æéè¦è¿ä¸æ­¥çå¸®å©ï¼æ¬¢è¿éæ¶çè¨ãä¹å¯ä»¥å å¥å¾®ä¿¡å¬ä¼å·&nbsp;<span class="md-pair-s "><strong>[DotNetææ¯å ]</strong><span class="md-plain md-expand">&nbsp;ç¤¾åºï¼ä¸å¶ä»ç­ç±ææ¯çåè¡ä¸èµ·äº¤æµå¿å¾ï¼å±åæé¿ï¼</span></span></span></span></p>
<p><span class="md-plain"><img src="https://img2024.cnblogs.com/blog/576536/202408/576536-20240813102419584-1596250541.png" alt="" style="display: block; margin-left: auto; margin-right: auto"></span></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-05 13:33">2026-02-05 13:32</span>&nbsp;
<a href="https://www.cnblogs.com/1312mn">å°ç ç¼å </a>&nbsp;
éè¯»(<span id="post_view_count">342</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18376570);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18376570', targetLink: 'https://www.cnblogs.com/1312mn/p/18376570', title: 'æ¨è .NET 8.0 å¼æºé¡¹ç®ä¼ªå¾®æå¡æ¡æ¶' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
        </channel>
        </rss>