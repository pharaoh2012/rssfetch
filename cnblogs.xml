<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åå®¢å­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2026-01-13T08:25:19.638Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åå®¢å­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ iNeuOSå·¥ä¸äºèç½æä½ç³»ç»ï¼å®ç°è½æºç®¡çååºç¨æ¡ä¾ ]]></title>
    <link>https://www.cnblogs.com/lsjwq/p/19477890</link>
    <guid>1dc9bc66b908da034150e7468d326dfc</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/lsjwq/p/19477890" title="åå¸äº 2026-01-13 15:59">
    <span role="heading" aria-level="2">iNeuOSå·¥ä¸äºèç½æä½ç³»ç»ï¼å®ç°è½æºç®¡çååºç¨æ¡ä¾</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        æ¬æ¬¡åçº§å®ç°äºiNeuOSå·¥ä¸äºèç½æä½ç³»ç»ï¼è¯¥ç³»ç»åç«¯ä½¿ç¨VUE3ãåç«¯æ¥å£ä½¿ç¨NET6ãå³ç³»æ°æ®åº+æ¶åºæ°æ®åºï¼ä»åºç¡å·¥å·åºç¨åä¸å¡ç®¡çåºç¨ï¼è½æºç®¡çï¼çå¢å¼æå¡è¿åº¦ï¼åæ¶å¯ä»¥ä¾é iNeuOSåæçåºç¡å·¥å·æ©å±è½æºç®¡ççä¸å¡åè½ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p class="a">ç®&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; å½</p>
<p>1..... æ¦è¿°... 2</p>
<p>2..... åºç¨è¿ç¨... 3</p>
<p>1.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; åºç¡å·¥åæ¨¡åéç½®... 3</p>
<p>1.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; è½æºæ°æ®éé... 4</p>
<p>1.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; è½æºç®¡çåºç¡åè½... 5</p>
<p>1.4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; è§å¾å»ºæ¨¡ï¼Webç»æï¼æ©å±åè½... 6</p>
<p>1.5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; æ¥è¡¨è®¾è®¡ï¼Excelï¼æ©å±åè½... 8</p>
<hr>
<p>&nbsp;</p>
<h1>1.&nbsp;&nbsp; æ¦è¿°</h1>
<p><span style="font-size: 16px">ããæ¬æ¬¡åçº§å®ç°äº<a href="http://www.ineuos.net/" rel="noopener nofollow">iNeuOSå·¥ä¸äºèç½æä½ç³»ç»</a>ï¼è¯¥ç³»ç»åç«¯ä½¿ç¨VUE3ãåç«¯æ¥å£ä½¿ç¨NET6ãå³ç³»æ°æ®åº+æ¶åºæ°æ®åºï¼ä»<strong>åºç¡å·¥å·åºç¨</strong>å<strong>ä¸å¡ç®¡çåºç¨ï¼è½æºç®¡çï¼</strong>çå¢å¼æå¡è¿æ¸¡ï¼åæ¶å¯ä»¥ä¾é iNeuOSåæçåºç¡å·¥å·æ©å±è½æºç®¡ççä¸å¡åè½ï¼ä¾å¦ä»¥è½æºä¸å¡ä¸ºæ ¸å¿ï¼ä¾é è§å¾å»ºæ¨¡ï¼Webç»æï¼ãæ¥è¡¨è®¾è®¡ï¼Excelï¼ãè¡¨åè®¾è®¡ï¼å¼åé¡µé¢ï¼ç­å·¥å·å¼åçåè½å®ç°å¯¹è½æºç®¡çä¸å¡çæ©å±åºç¨ã</span></p>
<p><span style="font-size: 16px">ããè¿æ ·æ¹ä¾¿æç¨çå®æäºè½æºç®¡ççåºæ¬åè½ï¼å¤§å¤§éä½äºå®å¶åå¼åçå¨æåææ¬ãiNeuOSç³»ç»ä¸­è½æºç®¡çåè½å¦ä¸å¾ï¼</span></p>
<p align="center"><img src="https://img2024.cnblogs.com/blog/279374/202601/279374-20260113155011774-630804371.jpg" alt="20" loading="lazy"></p>
<p style="text-align: left" align="center"><span style="font-size: 16px">ããä¸å¡åè½æ¡æ¶å¦ä¸å¾ï¼</span></p>
<p><img src="https://img2024.cnblogs.com/blog/279374/202601/279374-20260113155046492-1750971088.png" alt="111" loading="lazy"></p>
<h1>2.&nbsp;&nbsp; åºç¨è¿ç¨</h1>
<h2>1.1&nbsp;&nbsp;&nbsp; åºç¡å·¥åæ¨¡åéç½®</h2>
<p><span style="font-size: 16px">ããå¢å åéç½®å·¥ååºæ¬ä¿¡æ¯ï¼å¹¶ä¸å¢å è¯¥å·¥åççäº§å·¥åºï¼è§åå·¥åºç²åº¦ç±ç²¾ç»åç®¡çç¨åºå³å®ãå¦ä¸å¾:</span></p>
<p><span style="font-size: 16px"><img src="https://img2024.cnblogs.com/blog/279374/202601/279374-20260113155136661-942199355.jpg" alt="21" loading="lazy"></span></p>
<p><span style="font-size: 16px">&nbsp; &nbsp; &nbsp; &nbsp;éç½®è¯¥å·¥åç­å¶ï¼ä¾å¦ä¸å¤©ä¸ç­å¶ç®¡çï¼ä¸»è¦ç¨äºç»è®¡ç­ç»æ°æ®ä½¿ç¨ãå¦ä¸å¾ï¼</span></p>
<p><img src="https://img2024.cnblogs.com/blog/279374/202601/279374-20260113155151406-909202069.jpg" alt="22" loading="lazy"></p>
<h2>1.2&nbsp;&nbsp;&nbsp; è½æºæ°æ®éé</h2>
<p><span style="font-size: 16px">ããå¨ãè®¾å¤æ¨¡åãä¸­å¢å ééæ°æ®çè®¾å¤ä¿¡æ¯ï¼éç½®åæéç½®çå·¥ååå·¥åºä¿¡æ¯ï¼å¦ä¸å¾ï¼</span></p>
<p><img src="https://img2024.cnblogs.com/blog/279374/202601/279374-20260113155228094-466659407.jpg" alt="23" loading="lazy"></p>
<p><span style="font-size: 16px">ãã</span><span style="font-size: 16px">éå¯¹é£ãæ°´ãçµãæ°åè¾æç­è½æºä»ªè¡¨è¿è¡å®æ¶æ°æ®ééï¼éå¯¹æ°æ®ç¹å¯ä»¥éç½®å·ä½çè½æºè®¡éç±»åï¼éè®¯åæ°æ ¹æ®ç°åºå®ç°çç½ç»ç¯å¢éç½®ï¼å¦ä¸å¾ï¼</span></p>
<p><img src="https://img2024.cnblogs.com/blog/279374/202601/279374-20260113155240048-1049057138.jpg" alt="24" loading="lazy"></p>
<p><span style="font-size: 16px">&nbsp; &nbsp; &nbsp; &nbsp;ééè½æºæ°æ®éç½®å¥½ä¹åï¼åå°æå¡ä¼å®æ¶ééæ°æ®ï¼åæ¶ä¹ä¼å®æ¶ç»è®¡ç­ãæ¥ãæãå¹´ç­è½æºæ°æ®ï¼å¦ä¸å¾ï¼</span></p>
<p><img src="https://img2024.cnblogs.com/blog/279374/202601/279374-20260113155255211-578187026.jpg" alt="25" loading="lazy"></p>
<h2>1.3&nbsp;&nbsp;&nbsp; è½æºç®¡çåºç¡åè½</h2>
<p><span style="font-size: 16px">ããç»è¿ä¸é¢çéç½®ï¼åºæ¬å®ç°äºè½æºç®¡ççå®æ¶çæµç»è®¡ãè½æºæ¥è¯¢ç­åè½ãè½æºå®æ¶çæµï¼å¦ä¸å¾ï¼</span></p>
<p><img src="https://img2024.cnblogs.com/blog/279374/202601/279374-20260113155325102-716275777.jpg" alt="1" loading="lazy"></p>
<p><span style="font-size: 16px">&nbsp; &nbsp; &nbsp; &nbsp;è½æºæ°æ®æ¥è¯¢ï¼å¦ä¸å¾ï¼</span></p>
<p><img src="https://img2024.cnblogs.com/blog/279374/202601/279374-20260113155338351-1412443122.jpg" alt="2" loading="lazy"></p>
<h2>1.4&nbsp;&nbsp;&nbsp; è§å¾å»ºæ¨¡ï¼Webç»æï¼æ©å±åè½</h2>
<p><span style="font-size: 16px">ããå·¥åæå¾å¤è½¦é´æå·¥åºï¼åæ¶ä¹ä¼æå¾å¤å®æ¶çæµçä¸å¡åè½ï¼è¿æ¶åå¯ä»¥ä½¿ç¨ãè§å¾å»ºæ¨¡ï¼Webç»æï¼ãæå»ºä¸åçè½æºçæµä¸å¡åè½ï¼çæµä¸å¡åè½å¼åï¼å¦ä¸å¾ï¼</span></p>
<p><img src="https://img2024.cnblogs.com/blog/279374/202601/279374-20260113155407091-1923487766.jpg" alt="6" loading="lazy"></p>
<p><span style="font-size: 16px">ãã</span><span style="font-size: 16px">ä¿å­è¯¥ç»æå¼åçè½æºçæµåè½åï¼åäº«è¿ä¸ªåè½ï¼å¤å¶è¯¥åè½çé¾æ¥ãå¨ãèåç®¡çãä¸­å¢å å°è½æºç®¡çä¸å¡æ¨¡åä¸­ãå¦ä¸å¾ï¼</span></p>
<p><img src="https://img2024.cnblogs.com/blog/279374/202601/279374-20260113155419489-212980671.jpg" alt="7" loading="lazy"></p>
<p><span style="font-size: 16px">ããå¨è½æºç®¡çä¸­æå¼ç»æçæµåè½ï¼å¦ä¸å¾ï¼</span></p>
<p><img src="https://img2024.cnblogs.com/blog/279374/202601/279374-20260113155433002-226497884.jpg" alt="8" loading="lazy"></p>
<h2>1.5&nbsp;&nbsp;&nbsp; æ¥è¡¨è®¾è®¡ï¼Excelï¼æ©å±åè½</h2>
<p>ããä½¿ç¨ãæ¥è¡¨è®¾è®¡ï¼Excelï¼ãå¼åæ¥è¡¨ä¸å¡åè½ï¼ä¾å¦ç­æ¥è¡¨ãæ¥æ¥è¡¨ãææ¥è¡¨ãå¹´æ¥è¡¨ç­ãå®ç°ä¸ä¸ªç­æ¥è¡¨ï¼å¦ä¸å¾ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/279374/202601/279374-20260113155501161-111594825.jpg" alt="9" loading="lazy"></p>
<p>ããä½¿ç¨æ¥è¡¨è®¾è®¡å¼åçæ¥è¡¨åè½ï¼åäº«è¿ä¸ªåè½ï¼å¤å¶è¯¥åè½çé¾æ¥ãå¨ãèåç®¡çãä¸­å¢å å°è½æºç®¡çä¸å¡æ¨¡åä¸­ãå¦ä¸å¾ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/279374/202601/279374-20260113155519792-1620019825.jpg" alt="10" loading="lazy"></p>
<p>ããå¨è½æºç®¡çä¸­æå¼è¯¥æ¥è¡¨åè½ï¼æ¥è¯¢æ¯å¤©ç­çè½æºæ°æ®ä½¿ç¨æåµï¼å¦ä¸å¾ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/279374/202601/279374-20260113155529621-1294135955.jpg" alt="11" loading="lazy"></p>
<hr>
<p>ç©èç½&amp;å¤§æ°æ®ææ¯ QQç¾¤ï¼54256083</p>
<p>ç©èç½&amp;å¤§æ°æ®é¡¹ç® QQç¾¤ï¼727664080</p>
<p>QQï¼504547114</p>
<p>å¾®ä¿¡ï¼wxzz0151</p>
<p>åå®¢ï¼https://www.cnblogs.com/lsjwq</p>
<p><img src="https://img2024.cnblogs.com/blog/279374/202509/279374-20250924180005285-1427975355.png" alt="image" width="193" height="96" class="lazyloaded medium-zoom-image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/279374/202509/279374-20250924180005285-1427975355.png"></p>
<hr>
<p>&nbsp;</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.011805555555555555" data-date-updated="2026-01-13 16:16">2026-01-13 15:59</span>&nbsp;
<a href="https://www.cnblogs.com/lsjwq">iNeuOSå·¥ä¸äºèç½ç³»ç»</a>&nbsp;
éè¯»(<span id="post_view_count">11</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19477890);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19477890', targetLink: 'https://www.cnblogs.com/lsjwq/p/19477890', title: 'iNeuOSå·¥ä¸äºèç½æä½ç³»ç»ï¼å®ç°è½æºç®¡çååºç¨æ¡ä¾' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ç½å¯çæéåå½±å¾è¾Xçè¯ç ]]></title>
    <link>https://www.cnblogs.com/lixingqiu/p/19477584</link>
    <guid>d6187cfc15285f786af030a7ccb92999</guid>
    <description>
    <![CDATA[ 
	<h1 class="postTitle"><a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/lixingqiu/p/19477584" title="åå¸äº 2026-01-13 15:05">
    <span role="heading" aria-level="2">ç½å¯çæéåå½±å¾è¾Xçè¯ç</span>
    

</a>
</h1>
	<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>è¿ä¸å¤©ï¼ä¸ºäºå¯»æ¾çµæï¼ç½å¯ (rocket) éªç°å°äºé£å¹èä½ç°çç¾çå¤§èåãä»å¨ "ä¸è±¡å¤§æ¨¡å" çå¸®å©ä¸ï¼æ­£å¨å±å¼æ ç©·çæ³åå.....</p>
<p>çªç¶ï¼ç½å¯æ³ï¼ç¨ 10 è¡ä»¥å C++ ä»£ç è½ç»åºä»ä¹å³ç®ååæè³çå¾æ¡ï¼&nbsp;</p>
<div>æå¯(ç½å¯çæµç§°)å¸­å°èåï¼æå°è½»è½»æ²å»çéèº«æºå¸¦çä¾¿æºç¼ç¨ç»ç«¯ï¼èæµ·éæ»¡æ¯æµ©çå¤ªç©ºçææ²³ä¸æäºãä½ä¸ºç´è¿·äºå¤ªç©ºé¨æ¸¸åé«ç§æåä½çå°å¹´ï¼ä»æ»ç±æå¤ªç©ºéçè§é»è½¬åä¸ºC++ ä»£ç ä½åï¼èä»å¤©ï¼ä»æ³åä¸ä¸ªè½ä»£è¡¨æéå¯¼èªçæç®æ è¯ã&nbsp;</div>
<div>&nbsp;</div>
<div>âæ¢ç¶é»è®¤è§è²æ¯å°ç«ç®­ï¼é£æå°±ä»¥èªå·±çåå­ârocketâæ¥å®ä¹è¿ä¸ªç»å¾è§è²å§ãâ æå¯ç¬çæ²ä¸<code>Sprite rocket;</code>ï¼ç»è¿ä¸ªèæè§è²èµäºäºåèªå·±ä¸æ ·ç âçµé­âãä»é¦åæ³å°äºå¤ªç©ºçæ·±éï¼äºæ¯ç¨<code>rocket.bgcolor("black")</code>å°ç»å¸è°æäºå®å®è¬ççº¯é»èæ¯ï¼åæç»ç¬ç²ç»è®¾ä¸º 50ï¼<code>pensize(50)</code>è½è®©ç»å¶çå¾æ¡æ´éç®ï¼å°±åå¤ªç©ºä¸­çå·¨åå¯¼èªç¯å¡ï¼åå°ç»å¾éåº¦è°è³ 0ï¼åªä¸ºç²¾åæ§å¶æ¯ä¸ç¬çè½¨è¿¹ã</div>
<div>&nbsp;</div>
<div>ä¸ºäºç»åºå¯¹ç§°åæä»ªå¼æçå¾æ¡ï¼æå¯æç»ç¬çè²ç¸è°ä¸º0ï¼å³çº¢è²ï¼ç¶å rocket è§è²å·¦è½¬ 45 åº¦ï¼æ¬ç¬åé 200 æ­¥æ¾åèµ·å§ä½ç½®ï¼åè½ç¬åå¤ç»å¶ã</div>
<div>
<div class="cnblogs_code">
<pre>rocket.pencolor(<span style="color: rgba(128, 0, 128, 1)">0</span>).lt(<span style="color: rgba(128, 0, 128, 1)">45</span>).pu().bk(<span style="color: rgba(128, 0, 128, 1)">200</span>).pd();</pre>
</div>
<p>âæ¥ä¸æ¥ï¼è¯¥ç»è¿ä¸ªå¾æ¡å ä¸å¤ªç©ºæåçæ¸åè´¨æäºãâ æå¯ç¼çä¸äº®ï¼åä¸äºç¬¬ä¸ä¸ªå¾ªç¯ï¼ç¨<code>penshade(i)</code>è®©ç»ç¬é¢è²éçå¾ªç¯éå¸§åæ·±ï¼å°±åææä»å¾®åå°çç¨ççç§è¿ç¨ï¼æ¯åè¿ 1 æ­¥å°±å»¶æ¶ 0.01 ç§ï¼<code>wait(0.01)</code>è½è®©æ¸åæææ´ç»è»ï¼èç¼æ¸æ°å¯è§åå½±çæµè½¬ï¼è¿æ¯ä»ä»å¤ªç©ºè§æµä¸­å¾å°ççµæ ââ å®å®ä¸­çåå½±ååï¼ä»æ¥é½ä¸æ¯ä¸è¹´èå°±çã&nbsp;</p>
</div>
<div>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">for</span>(<span style="color: rgba(0, 0, 255, 1)">int</span> i=<span style="color: rgba(128, 0, 128, 1)">0</span>;i&lt;<span style="color: rgba(128, 0, 128, 1)">400</span>;i++<span style="color: rgba(0, 0, 0, 1)">)
     </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">è®¾å®ç»ç¬é¢è²çæ·±æµåº¦</span>
     rocket.penshade(i).fd(<span style="color: rgba(128, 0, 128, 1)">1</span>).wait(<span style="color: rgba(128, 0, 128, 1)">0.01</span>);</pre>
</div>
<p>ç¬¬ä¸éåè½¨ç»å¶å®æï¼åä¸éç©¿éé»æçæéå°çº¿ãæå¯æ²¡æåä¸ï¼ä»è®©è§è²æ¬ç¬åéå¤ä½ï¼å·¦è½¬ 90 åº¦ååé 200 æ­¥ï¼æ¾åäºå¦ä¸éè½¨çº¿çèµ·å§ç¹ï¼ååä¸äºä¸æ®µä¸æ¨¡ä¸æ ·çå¾ªç¯ãè¿ä¸æ¬¡ï¼ç»ç¬ä¾æ§éçå¾ªç¯æ¸åææï¼å°±åå¤ªç©ºä¸­å¦ä¸éå¯¹åºçå¯¼èªå°çº¿ï¼ä¸ç¬¬ä¸éå½¢æå®ç¾çåå­å¤¹è§ï¼åæäºä»æ¾ç»å¨æ¨¡æå¤ªç©ºé¨æ¸¸æ¶çå°çæéåæ æ è®°ã</p>
</div>
<div>&nbsp;ççå±å¹ä¸ï¼çº¯é»èæ¯ä¸­ä¸¤éæ¸ååè½¨æ¢æ¢æåï¼ä»å¾®åå°æ·±éµï¼ç»è»åæè³ï¼æå¯çè¸ä¸é²åºäºæ»¡æçç¬å®¹ãä»æååä¸<code>rocket.hide().done();</code>ï¼è®©ç»å¾è§è²éèï¼å®æ ¼ä½è¿å¯å®ç¾çæéåå½±å¾è¾ã&nbsp;âè¿ä¸ä»ä»æ¯ä¸å¹ä»£ç å¾æ¡ï¼æ´æ¯ææªæ¥å¤ªç©ºé¨æ¸¸çå¯¼èªæ è®°åãâ æå¯ååèªè¯­ãè¿å¹ç¨å è¡ç®åC++ ä»£ç å®æçä½åï¼åå© C++ ç²¾çµåºçä¾¿æ·æä»¤ï¼æä»å¯¹å¤ªç©ºçç­ç±ãå¯¹é«ç§æçç´è¿·ï¼é½èè¿äºè¿ä¸¤éæ¸ååè½¨éã</div>
<div>&nbsp;</div>
<div>&nbsp;åæ¥ï¼è¿å¹æç®åæè³çå¾æ¡è¢«æå¯åæäºèªå·±å¤ªç©ºé¨æ¸¸æ¨¡æç¨åºçå¯å¨çé¢ï¼æ¯å½ä»æå¼ç¨åºï¼çå°è¿éåå­åå½±ï¼å°±ä¼æ³èµ·å¤§èåä¸é£ä¸ªçªåå¥æ³çååãèè¿ä¹è®©ä»æ´å åä¿¡ï¼ç¨ C++ ä»£ç ä¸ä»è½æé æè¶£çä½åï¼æ´è½æèªå·±é¨æ¸¸å¤ªç©ºçæ¢¦æ³ï¼ä¸ç¹ç¹åæè§¦æå¯åç âé«ç§æç°å®âãæ¥ä¸æ¥ï¼ä»åå¼å§ææï¼è½ä¸è½ç»è¿ä¸ªåå½±å¾è¾å ä¸å¨æéªçææï¼è®©å®æ´åå¤ªç©ºä¸­çæ­£çå¯¼èªç¯å¡å¢ï¼</div>
<div>&nbsp;</div>
<div><strong>ç½å¯çæéåå½±å¾è¾X</strong>çè¯çäºï¼ææä»£ç å¦ä¸æç¤ºï¼</div>
<div>
<div class="cnblogs_code">
<pre>#include <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">sprites.h</span><span style="color: rgba(128, 0, 0, 1)">"</span>  <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">åå«C++ç²¾çµåº </span>
Sprite rocket;       <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">å»ºç«è§è²å«rocket </span>

<span style="color: rgba(0, 0, 255, 1)">int</span> main(){        <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">ä¸»åè½å </span>
   rocket.bgcolor(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">black</span><span style="color: rgba(128, 0, 0, 1)">"</span>).speed(<span style="color: rgba(128, 0, 128, 1)">0</span>).pensize(<span style="color: rgba(128, 0, 128, 1)">50</span><span style="color: rgba(0, 0, 0, 1)">);
   rocket.pencolor(</span><span style="color: rgba(128, 0, 128, 1)">0</span>).lt(<span style="color: rgba(128, 0, 128, 1)">45</span>).pu().bk(<span style="color: rgba(128, 0, 128, 1)">200</span><span style="color: rgba(0, 0, 0, 1)">).pd();
   </span><span style="color: rgba(0, 0, 255, 1)">for</span>(<span style="color: rgba(0, 0, 255, 1)">int</span> i=<span style="color: rgba(128, 0, 128, 1)">0</span>;i&lt;<span style="color: rgba(128, 0, 128, 1)">400</span>;i++<span style="color: rgba(0, 0, 0, 1)">)
     </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">è®¾å®ç»ç¬é¢è²çæ·±æµåº¦</span>
     rocket.penshade(i).fd(<span style="color: rgba(128, 0, 128, 1)">1</span>).wait(<span style="color: rgba(128, 0, 128, 1)">0.01</span><span style="color: rgba(0, 0, 0, 1)">);
   rocket.pu().bk(</span><span style="color: rgba(128, 0, 128, 1)">200</span>).lt(<span style="color: rgba(128, 0, 128, 1)">90</span>).bk(<span style="color: rgba(128, 0, 128, 1)">200</span><span style="color: rgba(0, 0, 0, 1)">).pd();
   
   </span><span style="color: rgba(0, 0, 255, 1)">for</span>(<span style="color: rgba(0, 0, 255, 1)">int</span> i=<span style="color: rgba(128, 0, 128, 1)">0</span>;i&lt;<span style="color: rgba(128, 0, 128, 1)">400</span>;i++<span style="color: rgba(0, 0, 0, 1)">)
     </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">è®¾å®ç»ç¬é¢è²çæ·±æµåº¦</span>
     rocket.penshade(i).fd(<span style="color: rgba(128, 0, 128, 1)">1</span>).wait(<span style="color: rgba(128, 0, 128, 1)">0.01</span><span style="color: rgba(0, 0, 0, 1)">);
   
   rocket.hide().done();  
   </span><span style="color: rgba(0, 0, 255, 1)">return</span> <span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">;
}</span></pre>
</div>
<p><img alt="bandicam 2026-01-12 21-29-28-601.mp4_20260113_114239.036" loading="lazy" data-src="https://img2024.cnblogs.com/blog/523461/202601/523461-20260113150102596-719958892.jpg" class="lazyload"></p>
<p>è§é¢å·²å½ï¼è¯·çå®ä»¬è½»ç§»æ­¥å°æ¬äººæé³pxcodingå»æ¾æ¾ã</p>
</div>
</div>
<div class="clear"></div>

	<div class="postDesc">posted on 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-13 15:05">2026-01-13 15:05</span>&nbsp;
<a href="https://www.cnblogs.com/lixingqiu">æå´ç</a>&nbsp;
éè¯»(<span id="post_view_count">12</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19477584);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19477584', targetLink: 'https://www.cnblogs.com/lixingqiu/p/19477584', title: 'ç½å¯çæéåå½±å¾è¾Xçè¯ç' })">ä¸¾æ¥</a>
</div>
 ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ vueä½¿ç¨hå½æ°å°è£dialogç»ä»¶ï¼ä»¥å½ä»¤çå½¢å¼ä½¿ç¨dialogç»ä»¶ ]]></title>
    <link>https://www.cnblogs.com/IwishIcould/p/19147850</link>
    <guid>56b4e89dad859f4533e32025a0c3e728</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/IwishIcould/p/19147850" title="åå¸äº 2026-01-13 09:10">
    <span role="heading" aria-level="2">vueä½¿ç¨hå½æ°å°è£dialogç»ä»¶ï¼ä»¥å½ä»¤çå½¢å¼ä½¿ç¨dialogç»ä»¶</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h4 id="åºæ¯">åºæ¯</h4>
<p>æäºæ¶åæä»¬çé¡µé¢æ¯æå¾å¤çå¼¹çª<br>
å¦ææä»¬æè¿äºå¼¹çªé½åhtmlä¸­ä¼æä¸å¤§å¨<br>
å æ­¤ï¼æä»¬éè¦æå¼¹çªå°è£æå½ä»¤å¼çå½¢å¼</p>
<h4 id="å½ä»¤å¼å¼¹çª">å½ä»¤å¼å¼¹çª</h4>
<pre><code>// ä½¿ç¨å¼¹çªçç»ä»¶
&lt;template&gt;
  &lt;div&gt;
    &lt;el-button @click="openMask"&gt;ç¹å»å¼¹çª&lt;/el-button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import childTest from '@/components/childTest.vue'
import { renderDialog } from '@/hooks/dialog'
function openMask(){
  // ç¬¬1ä¸ªåæ°ï¼è¡¨ç¤ºçæ¯ç»ä»¶ï¼ä½ åå¼¹çªä¸­çç»ä»¶
  // ç¬¬2ä¸ªåæ°ï¼è¡¨ç¤ºçç»ä»¶å±æ§ï¼æ¯å¦ï¼ç¡®è®¤æé®çåç§°ç­
  // ç¬¬3ä¸ªåæ°ï¼è¡¨ç¤ºçæ¨¡ææ¡çå±æ§ãæ¯å¦ï¼æ¨¡æå®½çå®½åº¦ï¼æ é¢åç§°ï¼æ¯å¦å¯ç§»å¨
  renderDialog(childTest,{},{title:'æµè¯å¼¹çª'})
}
&lt;/script&gt;
</code></pre>
<pre><code>// å°è£çå¼¹çª
import { createApp, h } from "vue";
import { ElDialog } from "element-plus";
export function renderDialog(component:any,props:any, modalProps:any){
 const dialog  = h(
    ElDialog,   // æ¨¡ææ¡ç»ä»¶
    {
      ...modalProps, // æ¨¡ææ¡å±æ§
      modelValue:true, // æ¨¡ææ¡æ¯å¦æ¾ç¤º
    }, // å ä¸ºæ¯æ¨¡ææ¡ç»ä»¶ï¼è¯å®æ¯æ¨¡ææ¡çå±æ§
    {
      default:()=&gt;h(component, props ) // ææ§½ï¼el-dialogä¸çåå®¹
    }
  )
 console.log(dialog)
  // åå»ºä¸ä¸ªæ°ç Vue åºç¨å®ä¾ãè¿ä¸ªåºç¨å®ä¾æ¯ç¬ç«çï¼ä¸ä¸»åºç¨åç¦»ã
  const app = createApp(dialog)
  const div = document.createElement('div')
  document.body.appendChild(div)
  app.mount(div)
}
</code></pre>
<pre><code>//childTest.vue ç»ä»¶
&lt;template&gt;
  &lt;div&gt;
    &lt;span&gt;It's a modal Dialog&lt;/span&gt;
    &lt;el-form :model="form" label-width="auto" style="max-width: 600px"&gt;
    &lt;el-form-item label="Activity name"&gt;
      &lt;el-input v-model="form.name" /&gt;
    &lt;/el-form-item&gt;
    &lt;el-form-item label="Activity zone"&gt;
      &lt;el-select v-model="form.region" placeholder="please select your zone"&gt;
        &lt;el-option label="Zone one" value="shanghai" /&gt;
        &lt;el-option label="Zone two" value="beijing" /&gt;
      &lt;/el-select&gt;
    &lt;/el-form-item&gt;
  &lt;/el-form&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script setup lang="ts"&gt;
import { ref,reactive } from 'vue'
const dialogVisible = ref(true)
const form = reactive({
  name: '',
  region: '',
})
const onSubmit = () =&gt; {
  console.log('submit!')
}
&lt;/script&gt;
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1425695/202510/1425695-20251017145322240-379014905.png" alt="01" loading="lazy"></p>
<h4 id="ä¸ºå¥å¼¹çªä¸­çè¡¨åä¸è½å¤æ­£å¸¸å±ç¤ºå¢">ä¸ºå¥å¼¹çªä¸­çè¡¨åä¸è½å¤æ­£å¸¸å±ç¤ºå¢ï¼</h4>
<p>å¨æ§å¶å°ä¼æä¸é¢çæç¤ºä¿¡æ¯ï¼<br>
Failed to resolve component:<br>
el-form If this is a native custom element,<br>
make sure to exclude it from component resolution via compilerOptions.isCustomElement<br>
ç¿»è¯è¿æ¥å°±æ¯<br>
æ æ³è§£æç»ä»¶ï¼el-formå¦æè¿æ¯ä¸ä¸ªåçèªå®ä¹åç´ ï¼<br>
è¯·ç¡®ä¿éè¿ compilerOptions.isCustomElement å°å¶ä»ç»ä»¶è§£æä¸­æé¤</p>
<p><img src="https://img2024.cnblogs.com/blog/1425695/202510/1425695-20251017145524776-326631892.png" alt="02" loading="lazy"></p>
<p>å¶å®å°±æ¯è¯´ï¼æéæ°åå»ºäºä¸ä¸ªæ°çapp,è¿ä¸ªappä¸­æ²¡ææ³¨åç»ä»¶ã<br>
å æ­¤ä¼è­¦åï¼é¡µé¢æ¸²æä¸åºæ¥ã</p>
<pre><code>// æéæ°åå»ºäºä¸ä¸ªappï¼è¿ä¸ªappä¸­æ²¡ææ³¨å element-plus ç»ä»¶ã
const app = createApp(dialog)
</code></pre>
<p>ç°å¨æä»¬éæ°æ³¨åelement-plusç»ä»¶ã<br>
åç¡®çè¯´ï¼æä»¬è¦æ³¨å childTest.vue ç»ä»¶ä½¿ç¨å°çä¸è¥¿</p>
<h4 id="ç»æ°åå»ºçappåºç¨æ³¨åchildtestç»ä»¶ä½¿ç¨å°çä¸è¥¿">ç»æ°åå»ºçappåºç¨æ³¨åchildTestç»ä»¶ä½¿ç¨å°çä¸è¥¿</h4>
<p>æä»¬å°ä¼å¨è¿ä¸ªå½ä»¤å¼å¼¹çªä¸­éæ°æ³¨åéè¦ä½¿ç¨å°çç»ä»¶</p>
<pre><code>// å°è£çå¼¹çª
import { createApp, h } from "vue";
import { ElDialog } from "element-plus";
// å¼å¥ç»ä»¶åæ ·å¼
import ElementPlus from "element-plus";
// import "element-plus/dist/index.css";
export function renderDialog(component:any,props:any, modalProps:any){
 const dialog  = h(
    ElDialog,   // æ¨¡ææ¡ç»ä»¶
    {
      ...modalProps, // æ¨¡ææ¡å±æ§
      modelValue:true, // æ¨¡ææ¡æ¾ç¤º
    }, // å ä¸ºæ¯æ¨¡ææ¡ç»ä»¶ï¼è¯å®æ¯æ¨¡ææ¡çå±æ§
    {
      default:()=&gt;h(component, props ) // ææ§½ï¼el-dialogä¸çåå®¹
    }
  )
 console.log(dialog)
  // åå»ºä¸ä¸ªæ°ç Vue åºç¨å®ä¾ãè¿ä¸ªåºç¨å®ä¾æ¯ç¬ç«çï¼ä¸ä¸»åºç¨åç¦»ã
  const app = createApp(dialog)
  // å¨æ°å®ä¾ä¸­æ³¨å Element Plus, è¿å¼¹çªä¸­çç»ä»¶å°±å¯ä»¥æ­£å¸¸æ¾ç¤ºäº
  app.use(ElementPlus);
  const div = document.createElement('div')
  document.body.appendChild(div)
  app.mount(div)
}
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1425695/202510/1425695-20251017150030012-288792935.png" alt="03" loading="lazy"></p>
<p>ç°å¨æä»¬åç°å¯ä»¥æ­£å¸¸å±ç¤ºå¼¹çªä¸­çè¡¨åäºãå ä¸ºæä»¬æ³¨åäºelement-plusç»ä»¶ã<br>
ä½æ¯æä»¬åç°ååç°äºå¦å¤ä¸ä¸ªé®é¢ã<br>
å¼¹çªåºé¨æ²¡æåæ¶åç¡®è®¤æé®ã<br>
éè¦æä»¬åæ¬¡éè¿hå½æ°æ¥åå»º</p>
<h4 id="å³äºä½¿ç¨createappåå»ºæ°çåºç¨å®ä¾">å³äºä½¿ç¨createAppåå»ºæ°çåºç¨å®ä¾</h4>
<p>å¨Vue 3ä¸­ï¼æä»¬å¯ä»¥ä½¿ç¨ createApp æ¥åå»ºæ°çåºç¨å®ä¾<br>
ä½æ¯è¿æ ·ä¼åå»ºä¸ä¸ªå®å¨ç¬ç«çåºç¨<br>
å®ä¸ä¼å±äº«ä¸»åºç¨çç»ä»¶ãæä»¶ç­ã<br>
å æ­¤æä»¬éè¦éæ°æ³¨å</p>
<h4 id="å¼¹çªåºé¨æ°å¢åæ¶åç¡®è®¤æé®">å¼¹çªåºé¨æ°å¢åæ¶åç¡®è®¤æé®</h4>
<p>æä»¬å°ä¼ä½¿ç¨hå½æ°ä¸­çææ§½æ¥åå»ºåºé¨çåæ¶æé®</p>
<pre><code>// å°è£çå¼¹çª
import { createApp, h } from "vue";
import { ElDialog, ElButton, ElForm, ElFormItem, ElInput, ElSelect, ElOption } from "element-plus";
import ElementPlus from "element-plus";

export function renderDialog(component: any, props: any, modalProps: any) {
  // åå»ºå¼¹çªå®ä¾
  const dialog = h(
    ElDialog,
    {
      ...modalProps,
      modelValue: true,
    },
    {
      // ä¸»è¦åå®¹ææ§½
      default: () =&gt; h(component, props),
      // åºé¨ææ§½
      footer:() =&gt;h(
        'div',
        { class: 'dialog-footer' },
        [
          h(
            ElButton, 
            {
              onClick: () =&gt; {
                console.log('åæ¶')
              }
            },
            () =&gt; 'åæ¶'
          ),
          h(
            ElButton,
            { 
              type: 'primary',
              onClick: () =&gt; {
                console.log('ç¡®å®')
              }
            },
            () =&gt; 'ç¡®å®'
          )
        ]
      )
    }
  );
  // åå»ºä¸ä¸ªæ°ç Vue åºç¨å®ä¾ãè¿ä¸ªåºç¨å®ä¾æ¯ç¬ç«çï¼ä¸ä¸»åºç¨åç¦»ã
  const app = createApp(dialog)
  // å¨æ°å®ä¾ä¸­æ³¨å Element Plus, è¿å¼¹çªä¸­çç»ä»¶å°±å¯ä»¥æ­£å¸¸æ¾ç¤ºäº
  app.use(ElementPlus);
  const div = document.createElement('div')
  document.body.appendChild(div)
  app.mount(div)
}
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1425695/202510/1425695-20251017150758182-172077623.png" alt="04" loading="lazy"></p>
<h4 id="ç¹å»å³é­å¼¹çªæ¶éè¦ç§»é¤ä¹ååå»ºçdiv">ç¹å»å³é­å¼¹çªæ¶ï¼éè¦ç§»é¤ä¹ååå»ºçdiv</h4>
<p>å¸è½½çåæ¶éè¦ææä»¬åå»ºçdivåç´ ç§»é¤ï¼å¦åé¡µé¢ä¸ä¼åºç°å¾å¤divã<br>
2ä¸ªå°æ¹éè¦ç§»é¤ï¼1,ç¹å»ç¡®è®¤æé®ã 2,ç¹å»å¶ä»å°æ¹çå³é­<br>
<img src="https://img2024.cnblogs.com/blog/1425695/202510/1425695-20251017150936490-1107995889.png" alt="05" loading="lazy"></p>
<h4 id="å³é­å¼¹çªæ­£ç¡®éæ¯ç¸å³ç»ä»¶">å³é­å¼¹çªæ­£ç¡®éæ¯ç¸å³ç»ä»¶</h4>
<pre><code>// å°è£çå¼¹çª
import { createApp, h } from "vue";
import { ElDialog, ElButton, ElForm, ElFormItem, ElInput, ElSelect, ElOption } from "element-plus";
import ElementPlus from "element-plus";

export function renderDialog(component: any, props: any, modalProps: any) {
  console.log('111')
  // åå»ºå¼¹çªå®ä¾
  const dialog = h(
    ElDialog,
    {
      ...modalProps,
      modelValue: true,
      onClose: ()=&gt; {
        console.log('å³é­çåè°')
        app.unmount() // è¿æ ·å¸è½½ä¼è®©å¨ç»æ¶å¤±
        // å¸è½½çåæ¶éè¦ææä»¬åå»ºçdivåç´ ç§»é¤ï¼å¦åé¡µé¢ä¸ä¼åºç°å¾å¤div
        document.body.removeChild(div)
      }
    },
    {
      // ä¸»è¦åå®¹ææ§½
      default: () =&gt; h(component, props),
      // åºé¨ææ§½
      footer:() =&gt;h(
        'div',
        { 
          class: 'dialog-footer',
         
        },
        [
          h(
            ElButton, 
            {
              onClick: () =&gt; {
                console.log('ç¹å»åæ¶æé®')
                // å¸è½½ä¸ä¸ªå·²æè½½çåºç¨å®ä¾ãå¸è½½ä¸ä¸ªåºç¨ä¼è§¦åè¯¥åºç¨ç»ä»¶æ åææç»ä»¶çå¸è½½çå½å¨æé©å­ã
                app.unmount() // è¿æ ·å¸è½½ä¼è®©å¨ç»æ¶å¤±
                // å¸è½½çåæ¶éè¦ææä»¬åå»ºçdivåç´ ç§»é¤ï¼å¦åé¡µé¢ä¸ä¼åºç°å¾å¤div
                document.body.removeChild(div)
              }
            },
            () =&gt; 'åæ¶'
          ),
          h(
            ElButton,
            { 
              type: 'primary',
              onClick: () =&gt; {
                console.log('ç¡®å®')
              }
            },
            () =&gt; 'ç¡®å®'
          )
        ]
      )
    }
  );
  // åå»ºä¸ä¸ªæ°ç Vue åºç¨å®ä¾ãè¿ä¸ªåºç¨å®ä¾æ¯ç¬ç«çï¼ä¸ä¸»åºç¨åç¦»ã
  const app = createApp(dialog)
  // å¨æ°å®ä¾ä¸­æ³¨å Element Plus, è¿å¼¹çªä¸­çç»ä»¶å°±å¯ä»¥æ­£å¸¸æ¾ç¤ºäº
  app.use(ElementPlus);
  // è¿ä¸ªdivåç´ å¨å¨éæ¯åºç¨æ¶éè¦è¢«ç§»é¤å
  const div = document.createElement('div')
  document.body.appendChild(div)
  app.mount(div)
}
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1425695/202510/1425695-20251017151046536-220748441.png" alt="06" loading="lazy"></p>
<h4 id="ç¹å»ç¡®è®¤æé®æ¶éªè¯è§å">ç¹å»ç¡®è®¤æé®æ¶éªè¯è§å</h4>
<p>æäºæ¶åï¼æä»¬å¼¹çªä¸­çè¡¨åæ¯éè¦è¿è¡è§åæ ¡éªçã<br>
æä»¬ä¸é¢æ¥å®ç°è¿ä¸ªåè½ç¹<br>
ä¼ éçç»ä»¶</p>
<pre><code>&lt;template&gt;
  &lt;el-form
    ref="ruleFormRef"
    style="max-width: 600px"
    :model="ruleForm"
    :rules="rules"
    label-width="auto"
  &gt;
    &lt;el-form-item label="Activity name" prop="name"&gt;
      &lt;el-input v-model="ruleForm.name" /&gt;
    &lt;/el-form-item&gt;
    &lt;el-form-item label="Activity zone" prop="region"&gt;
      &lt;el-select v-model="ruleForm.region" placeholder="Activity zone"&gt;
        &lt;el-option label="Zone one" value="shanghai" /&gt;
        &lt;el-option label="Zone two" value="beijing" /&gt;
      &lt;/el-select&gt;
    &lt;/el-form-item&gt;
    
    &lt;el-form-item label="Activity time" required&gt;
      &lt;el-col :span="11"&gt;
        &lt;el-form-item prop="date1"&gt;
          &lt;el-date-picker
            v-model="ruleForm.date1"
            type="date"
            aria-label="Pick a date"
            placeholder="Pick a date"
            style="width: 100%"
          /&gt;
        &lt;/el-form-item&gt;
      &lt;/el-col&gt;
      &lt;el-col class="text-center" :span="2"&gt;
        &lt;span class="text-gray-500"&gt;-&lt;/span&gt;
      &lt;/el-col&gt;
      &lt;el-col :span="11"&gt;
        &lt;el-form-item prop="date2"&gt;
          &lt;el-time-picker
            v-model="ruleForm.date2"
            aria-label="Pick a time"
            placeholder="Pick a time"
            style="width: 100%"
          /&gt;
        &lt;/el-form-item&gt;
      &lt;/el-col&gt;
    &lt;/el-form-item&gt;

    &lt;el-form-item label="Resources" prop="resource"&gt;
      &lt;el-radio-group v-model="ruleForm.resource"&gt;
        &lt;el-radio value="Sponsorship"&gt;Sponsorship&lt;/el-radio&gt;
        &lt;el-radio value="Venue"&gt;Venue&lt;/el-radio&gt;
      &lt;/el-radio-group&gt;
    &lt;/el-form-item&gt;
    &lt;el-form-item label="Activity form" prop="desc"&gt;
      &lt;el-input v-model="ruleForm.desc" type="textarea" /&gt;
    &lt;/el-form-item&gt;

  &lt;/el-form&gt;
&lt;/template&gt;

&lt;script lang="ts" setup&gt;
import { reactive, ref } from 'vue'

import type { FormInstance, FormRules } from 'element-plus'

interface RuleForm {
  name: string
  region: string
  date1: string
  date2: string
  resource: string
  desc: string
}
const ruleFormRef = ref&lt;FormInstance&gt;()
const ruleForm = reactive&lt;RuleForm&gt;({
  name: 'Hello',
  region: '',
  date1: '',
  date2: '',
  resource: '',
  desc: '',
})
const rules = reactive&lt;FormRules&lt;RuleForm&gt;&gt;({
  name: [
    { required: true, message: 'Please input Activity name', trigger: 'blur' },
    { min: 3, max: 5, message: 'Length should be 3 to 5', trigger: 'blur' },
  ],
  region: [
    {
      required: true,
      message: 'Please select Activity zone',
      trigger: 'change',
    },
  ],
  date1: [
    {
      type: 'date',
      required: true,
      message: 'Please pick a date',
      trigger: 'change',
    },
  ],
  date2: [
    {
      type: 'date',
      required: true,
      message: 'Please pick a time',
      trigger: 'change',
    },
  ],
  resource: [
    {
      required: true,
      message: 'Please select activity resource',
      trigger: 'change',
    },
  ],
  desc: [
    { required: true, message: 'Please input activity form', trigger: 'blur' },
  ],
})

const submitForm = async () =&gt; {
  if (!ruleFormRef.value) {
    console.error('ruleFormRef is not initialized')
    return false
  }
  try {
    const valid = await ruleFormRef.value.validate()
    if (valid) {
      console.log('è¡¨åæ ¡éªéè¿', ruleForm)
      return Promise.resolve(ruleForm)
    }
  } catch (error) {
    // ä¸ºå¥submitFormä¸­ï¼validçå¼æ¯falseä¼æ§è¡catch ï¼
    // el-form ç»ä»¶ç validate æ¹æ³çå·¥ä½æºå¶å¯¼è´çã validate æ¹æ³å¨è¡¨åéªè¯å¤±è´¥æ¶ä¼æåºå¼å¸¸
    console.error('err', error)
    return false
    /**
     * ä¸é¢è¿æ ·åä¸ºå¥çé¢ä¼æ¥éå¢ï¼
     * return Promise.reject(error)
     * å½è¡¨åéªè¯å¤±è´¥æ¶ï¼ruleFormRef.value.validate() ä¼æåºä¸ä¸ªå¼å¸¸ã
     * è½ç¶ä½ ç¨äº try...catch æè·è¿ä¸ªå¼å¸¸ï¼å¹¶ä¸å¨ catch åä¸­éè¿ return Promise.reject(error) è¿åäºä¸ä¸ªè¢«æç»ç Promise
     * ä½å¦æè°ç¨ submitForm çå°æ¹æ²¡ææ­£ç¡®å°å¤çè¿ä¸ªè¢«æç»ç Promiseï¼å³æ²¡æä½¿ç¨ .catch() æè await æ¥æ¥æ¶éè¯¯ï¼ï¼
     * é£ä¹æµè§å¨æ§å¶å°å°±ä¼æ¾ç¤ºä¸ä¸ª "Uncaught (in promise)" éè¯¯ã
     * å¨ catch ä¸­åæ¬¡ return Promise.reject(error) æ¯å¤ä½çï¼ ç´æ¥return false
     * */ 
    /**
     * å¦æä½ è¿æ ·å
     * throw error ç´æ¥æåºéè¯¯å³å¯
     * é£ä¹å°±éè¦åè°ç¨submitFormçå°æ¹æè·å¼å¸¸
     * */  
  }
}

defineExpose({
  submitForm:submitForm
})
&lt;/script&gt;
</code></pre>
<pre><code>// å°è£çå¼¹çª
import { createApp, h, ref } from "vue";
import { ElDialog, ElButton, ElForm, ElFormItem, ElInput, ElSelect, ElOption } from "element-plus";
import ElementPlus from "element-plus";

export function renderDialog(component: any, props: any, modalProps: any) {
  const instanceElement = ref()
  console.log('111', instanceElement) 
  // åå»ºå¼¹çªå®ä¾
  const dialog = h(
    ElDialog,
    {
      ...modalProps,
      modelValue: true,
      onClose: ()=&gt; {
        console.log('å³é­çåè°')
        app.unmount() // è¿æ ·å¸è½½ä¼è®©å¨ç»æ¶å¤±
        // å¸è½½çåæ¶éè¦ææä»¬åå»ºçdivåç´ ç§»é¤ï¼å¦åé¡µé¢ä¸ä¼åºç°å¾å¤div
        document.body.removeChild(div)
      }
    },
    {
      // ä¸»è¦åå®¹ææ§½,è¿éçrefå¿é¡»æ¥æ¶ä¸ä¸ªref
      default: () =&gt; h(component, {...props, ref: instanceElement}),
      // åºé¨ææ§½
      footer:() =&gt;h(
        'div',
        { 
          class: 'dialog-footer',
         
        },
        [
          h(
            ElButton, 
            {
              onClick: () =&gt; {
                console.log('ç¹å»åæ¶æé®')
                // å¸è½½ä¸ä¸ªå·²æè½½çåºç¨å®ä¾ãå¸è½½ä¸ä¸ªåºç¨ä¼è§¦åè¯¥åºç¨ç»ä»¶æ åææç»ä»¶çå¸è½½çå½å¨æé©å­ã
                app.unmount() // è¿æ ·å¸è½½ä¼è®©å¨ç»æ¶å¤±
                // å¸è½½çåæ¶éè¦ææä»¬åå»ºçdivåç´ ç§»é¤ï¼å¦åé¡µé¢ä¸ä¼åºç°å¾å¤div
                document.body.removeChild(div)
              }
            },
            () =&gt; 'åæ¶'
          ),
          h(
            ElButton,
            { 
              type: 'primary',
              onClick: () =&gt; {
                instanceElement?.value?.submitForm().then((res:any) =&gt;{
                  console.log('å¾å°çå¼',res)
                })
                console.log('ç¡®å®')
              }
            },
            () =&gt; 'ç¡®å®'
          )
        ]
      )
    }
  );
  // åå»ºä¸ä¸ªæ°ç Vue åºç¨å®ä¾ãè¿ä¸ªåºç¨å®ä¾æ¯ç¬ç«çï¼ä¸ä¸»åºç¨åç¦»ã
  const app = createApp(dialog)
  // å¨æ°å®ä¾ä¸­æ³¨å Element Plus, è¿å¼¹çªä¸­çç»ä»¶å°±å¯ä»¥æ­£å¸¸æ¾ç¤ºäº
  app.use(ElementPlus);
  // è¿ä¸ªdivåç´ å¨å¨éæ¯åºç¨æ¶éè¦è¢«ç§»é¤å
  const div = document.createElement('div')
  document.body.appendChild(div)
  app.mount(div)
}
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1425695/202510/1425695-20251017153103678-1920669946.png" alt="07" loading="lazy"><br>
å³é®çç¹ï¼éè¿refæ¿å°childTestç»ä»¶ä¸­çæ¹æ³ï¼childTestè¦æ´é²éè¦çæ¹æ³</p>
<h4 id="å¦ä½æè¡¨åä¸­çæ°æ®æ´é²åºå»">å¦ä½æè¡¨åä¸­çæ°æ®æ´é²åºå»</h4>
<p>å¯ä»¥éè¿åè°å½æ°çæ¹å¼ææ°æ®æ´é²åºå»åã</p>
<pre><code>// å°è£çå¼¹çª
import { createApp, h, ref } from "vue";
import { ElDialog, ElButton, ElForm, ElFormItem, ElInput, ElSelect, ElOption } from "element-plus";
import ElementPlus from "element-plus";

export function renderDialog(component: any, props: any, modalProps: any, onConfirm: (data: any) =&gt; any ) {
  // ç¬¬4ä¸ªåæ°æ¯åè°å½æ°
  const instanceElement = ref()
  console.log('111', instanceElement) 
  // åå»ºå¼¹çªå®ä¾
  const dialog = h(
    ElDialog,
    {
      ...modalProps,
      modelValue: true,
      onClose: ()=&gt; {
        console.log('å³é­çåè°')
        app.unmount() // è¿æ ·å¸è½½ä¼è®©å¨ç»æ¶å¤±
        // å¸è½½çåæ¶éè¦ææä»¬åå»ºçdivåç´ ç§»é¤ï¼å¦åé¡µé¢ä¸ä¼åºç°å¾å¤div
        document.body.removeChild(div)
      }
    },
    {
      // ä¸»è¦åå®¹ææ§½,è¿éçrefå¿é¡»æ¥æ¶ä¸ä¸ªref
      default: () =&gt; h(component, {...props, ref: instanceElement}),
      // åºé¨ææ§½
      footer:() =&gt;h(
        'div',
        { 
          class: 'dialog-footer',
         
        },
        [
          h(
            ElButton, 
            {
              onClick: () =&gt; {
                console.log('ç¹å»åæ¶æé®')
                // å¸è½½ä¸ä¸ªå·²æè½½çåºç¨å®ä¾ãå¸è½½ä¸ä¸ªåºç¨ä¼è§¦åè¯¥åºç¨ç»ä»¶æ åææç»ä»¶çå¸è½½çå½å¨æé©å­ã
                app.unmount() // è¿æ ·å¸è½½ä¼è®©å¨ç»æ¶å¤±
                // å¸è½½çåæ¶éè¦ææä»¬åå»ºçdivåç´ ç§»é¤ï¼å¦åé¡µé¢ä¸ä¼åºç°å¾å¤div
                document.body.removeChild(div)
              }
            },
            () =&gt; 'åæ¶'
          ),
          h(
            ElButton,
            { 
              type: 'primary',
              onClick: () =&gt; {
                // submitForm è°ç¨è¡¨åç»ä»¶ä¸­éè¦éªè¯æèæ´é²åºå»çæ°æ®
                instanceElement?.value?.submitForm().then((res:any) =&gt;{
                  console.log('å¾å°çå¼',res)
                  // éªè¯éè¿åè°ç¨åè°å½æ°ä¼ éæ°æ®ï¼ å¦éªè¯å¤±è´¥ï¼res çå¼æå¯è½æ¯ä¸ä¸ªfalseã
                  onConfirm(res)
                  // æä¹æè¿ä¸ªäºä»¶ä¼ éåºå»ï¼è®©ä½¿ç¨çæ¶åç¥éç¹å»äºç¡®è®¤å¹¶ä¸ç¥ééªè¯éè¿äº
                }).catch((error: any) =&gt; {
                  // éªè¯å¤±è´¥æ¶ä¹å¯ä»¥ä¼ ééè¯¯ä¿¡æ¯
                  console.log('éªè¯å¤±è´¥', error)
                })
                console.log('ç¡®å®')
              }
            },
            () =&gt; 'ç¡®å®'
          )
        ]
      )
    }
  );
  // åå»ºä¸ä¸ªæ°ç Vue åºç¨å®ä¾ãè¿ä¸ªåºç¨å®ä¾æ¯ç¬ç«çï¼ä¸ä¸»åºç¨åç¦»ã
  const app = createApp(dialog)
  // å¨æ°å®ä¾ä¸­æ³¨å Element Plus, è¿å¼¹çªä¸­çç»ä»¶å°±å¯ä»¥æ­£å¸¸æ¾ç¤ºäº
  app.use(ElementPlus);
  // è¿ä¸ªdivåç´ å¨å¨éæ¯åºç¨æ¶éè¦è¢«ç§»é¤å
  const div = document.createElement('div')
  document.body.appendChild(div)
  app.mount(div)
}
</code></pre>
<pre><code>&lt;template&gt;
  &lt;div&gt;
    &lt;el-button @click="openMask"&gt;ç¹å»å¼¹çª&lt;/el-button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import childTest from '@/components/childTest.vue'
import { renderDialog } from '@/hooks/dialog'
import { getCurrentInstance } from 'vue';
const currentInstance = getCurrentInstance();
function openMask(){
  console.log('currentInstance',currentInstance)
  renderDialog(childTest,{},{title:'æµè¯å¼¹çª', width: '700'}, (res)=&gt;{
    console.log('éè¿åè°å½æ°è¿åå¼', res)
  })
}
&lt;/script&gt;
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1425695/202510/1425695-20251017153517135-614116266.png" alt="08" loading="lazy"></p>
<h4 id="ç¹å»ç¡®å®æ¶ä¸å¡å®æåå³é­å¼¹çª">ç¹å»ç¡®å®æ¶ï¼ä¸å¡å®æåå³é­å¼¹çª</h4>
<p>ç°å¨æ³è¦ç¹å»ç¡®å®ï¼ç­ä¸å¡å¤çå®æä¹åï¼æå³é­å¼¹çªã<br>
éè¦å¨ä½¿ç¨å®æä¸å¡çæ¶åè¿åä¸ä¸ªpromiseï¼è®©å°è£çå¼¹çªè°ç¨è¿ä¸ªpromise<br>
è¿æ ·å°±å¯ä»¥ç¥éä»ä¹æ¶åå³é­å¼¹çªäº</p>
<pre><code>// å°è£çå¼¹çª
import { createApp, h, ref } from "vue";
import { ElDialog, ElButton, ElForm, ElFormItem, ElInput, ElSelect, ElOption } from "element-plus";
import ElementPlus from "element-plus";

export function renderDialog(component: any, props: any, modalProps: any, onConfirm: (data: any) =&gt; any ) {
  // ç¬¬4ä¸ªåæ°æ¯åè°å½æ°
  const instanceElement = ref()
  console.log('111', instanceElement) 
  // åå»ºå¼¹çªå®ä¾
  const dialog = h(
    ElDialog,
    {
      ...modalProps,
      modelValue: true,
      onClose: ()=&gt; {
        console.log('å³é­çåè°')
        app.unmount() // è¿æ ·å¸è½½ä¼è®©å¨ç»æ¶å¤±
        // å¸è½½çåæ¶éè¦ææä»¬åå»ºçdivåç´ ç§»é¤ï¼å¦åé¡µé¢ä¸ä¼åºç°å¾å¤div
        document.body.removeChild(div)
      }
    },
    {
      // ä¸»è¦åå®¹ææ§½,è¿éçrefå¿é¡»æ¥æ¶ä¸ä¸ªref
      default: () =&gt; h(component, {...props, ref: instanceElement}),
      // åºé¨ææ§½
      footer:() =&gt;h(
        'div',
        { 
          class: 'dialog-footer',
         
        },
        [
          h(
            ElButton, 
            {
              onClick: () =&gt; {
                console.log('ç¹å»åæ¶æé®')
                // å¸è½½ä¸ä¸ªå·²æè½½çåºç¨å®ä¾ãå¸è½½ä¸ä¸ªåºç¨ä¼è§¦åè¯¥åºç¨ç»ä»¶æ åææç»ä»¶çå¸è½½çå½å¨æé©å­ã
                app.unmount() // è¿æ ·å¸è½½ä¼è®©å¨ç»æ¶å¤±
                // å¸è½½çåæ¶éè¦ææä»¬åå»ºçdivåç´ ç§»é¤ï¼å¦åé¡µé¢ä¸ä¼åºç°å¾å¤div
                document.body.removeChild(div)
              }
            },
            () =&gt; 'åæ¶'
          ),
          h(
            ElButton,
            { 
              type: 'primary',
              onClick: () =&gt; {
                // submitForm è°ç¨è¡¨åç»ä»¶ä¸­éè¦éªè¯æèæ´é²åºå»çæ°æ®
                instanceElement?.value?.submitForm().then((res:any) =&gt;{
                  console.log('å¾å°çå¼',res)
                  // éªè¯éè¿åè°ç¨åè°å½æ°ä¼ éæ°æ®ï¼å¦éªè¯å¤±è´¥ï¼res çå¼æå¯è½æ¯ä¸ä¸ªfalseã
                  const callbackResult = onConfirm(res);
                  // å¦æåè°å½æ°è¿åçæ¯ Promiseï¼åç­å¾ä¸å¡å®æååå³é­å¼¹çª
                  if (callbackResult instanceof Promise) {
                    // æ³¨æè¿éçfinallyï¼è¿æ ·åå¨æå¡åºç°å¼å¸¸çæ¶åä¼æé®é¢,è¿éæ¯æé®é¢çï¼éè¦ä¼å
                    // æ³¨æè¿éçfinallyï¼è¿æ ·åå¨æå¡åºç°å¼å¸¸çæ¶åä¼æé®é¢,è¿éæ¯æé®é¢çï¼éè¦ä¼å
                    callbackResult.finally(() =&gt; { 
                      // å¼¹çªå³é­é»è¾
                      app.unmount()
                      document.body.removeChild(div)
                    });
                  } else {
                    // å¦æä¸æ¯ Promiseï¼ç«å³å³é­å¼¹çª
                    app.unmount()
                    document.body.removeChild(div)
                  }
                }).catch((error: any) =&gt; {
                  // éªè¯å¤±è´¥æ¶ä¹å¯ä»¥ä¼ ééè¯¯ä¿¡æ¯
                  console.log('éªè¯å¤±è´¥', error)
                })
              }
            },
            () =&gt; 'ç¡®å®'
          )
        ]
      )
    }
  );
  // åå»ºä¸ä¸ªæ°ç Vue åºç¨å®ä¾ãè¿ä¸ªåºç¨å®ä¾æ¯ç¬ç«çï¼ä¸ä¸»åºç¨åç¦»ã
  const app = createApp(dialog)
  // å¨æ°å®ä¾ä¸­æ³¨å Element Plus, è¿å¼¹çªä¸­çç»ä»¶å°±å¯ä»¥æ­£å¸¸æ¾ç¤ºäº
  app.use(ElementPlus);
  // è¿ä¸ªdivåç´ å¨å¨éæ¯åºç¨æ¶éè¦è¢«ç§»é¤å
  const div = document.createElement('div')
  document.body.appendChild(div)
  app.mount(div)
}
</code></pre>
<pre><code>&lt;template&gt;
  &lt;div&gt;
    &lt;el-button @click="openMask"&gt;ç¹å»å¼¹çª&lt;/el-button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import childTest from '@/components/childTest.vue'
import { renderDialog } from '@/hooks/dialog'
import { getCurrentInstance } from 'vue';
const currentInstance = getCurrentInstance();
function openMask(){
  console.log('currentInstance',currentInstance)
  renderDialog(childTest,{},{title:'æµè¯å¼¹çª', width: '700'}, (res)=&gt;{
    console.log('éè¿åè°å½æ°è¿åå¼', res)
    // è¿éè¿åä¸ä¸ªpromiseå¯¹è±¡ï¼è¿æ ·å°±å¯ä»¥è®©ä¸å¡å®æåæå³é­å¼¹çª
    return fetch("https://dog.ceo/api/breed/pembroke/images/random")
     .then((res) =&gt; {
       return res.json();
     })
     .then((res) =&gt; {
        console.log('è·åçå¾çå°åä¸ºï¼', res.message);
     });
  })
}
&lt;/script&gt;
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1425695/202510/1425695-20251017153933776-969209851.png" alt="09" loading="lazy"></p>
<h4 id="ä¼åä¸å¡ç»ä»¶">ä¼åä¸å¡ç»ä»¶</h4>
<pre><code>// å°è£çå¼¹çª
import { createApp, h, ref } from "vue";
import { ElDialog, ElButton, ElForm, ElFormItem, ElInput, ElSelect, ElOption } from "element-plus";
import ElementPlus from "element-plus";

export function renderDialog(component: any, props: any, modalProps: any, onConfirm: (data: any) =&gt; any ) {
  // å³é­å¼¹çªï¼é¿åéå¤ä»£ç 
  const closeDialog = () =&gt; {
    // æåæ¶å³é­å¼¹çª
    app.unmount();
    // æ£æ¥divæ¯å¦ä»ç¶å­å¨ä¸ä¸ºbodyçå­åç´ ,å¦èå¯è½åºç°å¼å¸¸
    if (div &amp;&amp; div.parentNode) {
      document.body.removeChild(div)
    }
  }
  // ç¬¬4ä¸ªåæ°æ¯åè°å½æ°
  const instanceElement = ref()
  console.log('111', instanceElement) 
  // åå»ºå¼¹çªå®ä¾
  const dialog = h(
    ElDialog,
    {
      ...modalProps,
      modelValue: true,
      onClose: ()=&gt; {
        console.log('å³é­çåè°')
        app.unmount() // è¿æ ·å¸è½½ä¼è®©å¨ç»æ¶å¤±
        // å¸è½½çåæ¶éè¦ææä»¬åå»ºçdivåç´ ç§»é¤ï¼å¦åé¡µé¢ä¸ä¼åºç°å¾å¤div
        document.body.removeChild(div)
      }
    },
    {
      // ä¸»è¦åå®¹ææ§½,è¿éçrefå¿é¡»æ¥æ¶ä¸ä¸ªref
      default: () =&gt; h(component, {...props, ref: instanceElement}),
      // åºé¨ææ§½
      footer:() =&gt;h(
        'div',
        { 
          class: 'dialog-footer',
         
        },
        [
          h(
            ElButton, 
            {
              onClick: () =&gt; {
                console.log('ç¹å»åæ¶æé®')
                // å¸è½½ä¸ä¸ªå·²æè½½çåºç¨å®ä¾ãå¸è½½ä¸ä¸ªåºç¨ä¼è§¦åè¯¥åºç¨ç»ä»¶æ åææç»ä»¶çå¸è½½çå½å¨æé©å­ã
                app.unmount() // è¿æ ·å¸è½½ä¼è®©å¨ç»æ¶å¤±
                // å¸è½½çåæ¶éè¦ææä»¬åå»ºçdivåç´ ç§»é¤ï¼å¦åé¡µé¢ä¸ä¼åºç°å¾å¤div
                document.body.removeChild(div)
              }
            },
            () =&gt; 'åæ¶'
          ),
          h(
            ElButton,
            { 
              type: 'primary',
              onClick: () =&gt; {
                // submitForm è°ç¨è¡¨åç»ä»¶ä¸­éè¦éªè¯æèæ´é²åºå»çæ°æ®
                instanceElement?.value?.submitForm().then((res:any) =&gt;{
                  console.log('å¾å°çå¼',res)
                  // éªè¯éè¿åè°ç¨åè°å½æ°ä¼ éæ°æ®ï¼å¦éªè¯å¤±è´¥ï¼res çå¼æå¯è½æ¯ä¸ä¸ªfalseã
                  const callbackResult = onConfirm(res);
                  // å¦æåè°å½æ°è¿åçæ¯ Promiseï¼åç­å¾ä¸å¡å®æååå³é­å¼¹çª
                  if (callbackResult instanceof Promise) {
                   
                     callbackResult.then(() =&gt; {
                      if(res){
                        console.log('111')
                        closeDialog()
                      }
                    }).catch(error=&gt;{
                      console.log('222')
                      console.error('åè°å½æ°æ§è¡åºé,å¦:ç½ç»éè¯¯', error);
                      // éè¯¯æåµä¸ä¹å³é­å¼¹çª
                      closeDialog()
                    });
                  } else {
                    // å¦æä¸æ¯ Promiseï¼å¹¶ä¸éªè¯æ¶éè¿äºçãç«å³å³é­å¼¹çª
                    console.log('333', res)
                    if(res){
                      closeDialog()
                    }
                  }
                }).catch((error: any) =&gt; {
                  console.log('44444')
                  // éªè¯å¤±è´¥æ¶ä¹å¯ä»¥ä¼ ééè¯¯ä¿¡æ¯
                  console.log('éªè¯å¤±è´¥', error)
                })
              }
            },
            () =&gt; 'ç¡®å®'
          )
        ]
      )
    }
  );
  // åå»ºä¸ä¸ªæ°ç Vue åºç¨å®ä¾ãè¿ä¸ªåºç¨å®ä¾æ¯ç¬ç«çï¼ä¸ä¸»åºç¨åç¦»ã
  const app = createApp(dialog)
  // å¨æ°å®ä¾ä¸­æ³¨å Element Plus, è¿å¼¹çªä¸­çç»ä»¶å°±å¯ä»¥æ­£å¸¸æ¾ç¤ºäº
  app.use(ElementPlus);
  // è¿ä¸ªdivåç´ å¨å¨éæ¯åºç¨æ¶éè¦è¢«ç§»é¤å
  const div = document.createElement('div')
  document.body.appendChild(div)
  app.mount(div)
}
</code></pre>
<pre><code>&lt;template&gt;
  &lt;div&gt;
    &lt;el-button @click="openMask"&gt;ç¹å»å¼¹çª&lt;/el-button&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script setup lang="ts"&gt;
import childTest from '@/components/childTest.vue'
import { renderDialog } from '@/hooks/dialog'
import { getCurrentInstance } from 'vue';
const currentInstance = getCurrentInstance();
function openMask(){
  console.log('currentInstance',currentInstance)
  renderDialog(childTest,{},{title:'æµè¯å¼¹çª', width: '700'}, (res)=&gt;{
    console.log('éè¿åè°å½æ°è¿åå¼', res)
      // è¿éè¿åä¸ä¸ªpromiseå¯¹è±¡ï¼è¿æ ·å°±å¯ä»¥è®©ä¸å¡å®æåæå³é­å¼¹çª
      return fetch("https://dog.ceo/api/breed/pembroke/images/random")
      .then((res) =&gt; {
        return res.json();
      })
      .then((res) =&gt; {
          console.log('è·åçå¾çå°åä¸ºï¼', res.message);
      });
  })
}
&lt;/script&gt;
</code></pre>
<p>ç¼å°çå°ä¼ä¼´å¯è½å·²ç»åç°äºè¿ä¸æ®µä»£ç ã<br>
1ï¼éªè¯ä¸éè¿ä¼ä¹ä¼è§¦åå¸è½½å¼¹çª<br>
2ï¼callbackResult.finallyæ¯ä¸åéç<br>
3.<br>
<img src="https://img2024.cnblogs.com/blog/1425695/202510/1425695-20251017160228378-793571991.png" alt="image" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/1425695/202510/1425695-20251017154924223-2023334538.png" alt="10" loading="lazy"></p>
<h4 id="æç»çä»£ç ">æç»çä»£ç </h4>
<pre><code>// å°è£çå¼¹çª
import { createApp, h, ref } from "vue";
import { ElDialog, ElButton, ElForm, ElFormItem, ElInput, ElSelect, ElOption } from "element-plus";
import ElementPlus from "element-plus";

export function renderDialog(component: any, props: any, modalProps: any, onConfirm: (data: any) =&gt; any ) {
  // å³é­å¼¹çªï¼é¿åéå¤ä»£ç 
  const closeDialog = () =&gt; {
    // æåæ¶å³é­å¼¹çª
    app.unmount();
    // æ£æ¥divæ¯å¦ä»ç¶å­å¨ä¸ä¸ºbodyçå­åç´ ,å¦èå¯è½åºç°å¼å¸¸
    if (div &amp;&amp; div.parentNode) {
      document.body.removeChild(div)
    }
  }
  // ç¬¬4ä¸ªåæ°æ¯åè°å½æ°
  const instanceElement = ref()
  console.log('111', instanceElement) 
  const isLoading = ref(false)
  // åå»ºå¼¹çªå®ä¾
  const dialog = h(
    ElDialog,
    {
      ...modalProps,
      modelValue: true,
      onClose: ()=&gt; {
        isLoading.value = false
        console.log('å³é­çåè°')
        app.unmount() // è¿æ ·å¸è½½ä¼è®©å¨ç»æ¶å¤±
        // å¸è½½çåæ¶éè¦ææä»¬åå»ºçdivåç´ ç§»é¤ï¼å¦åé¡µé¢ä¸ä¼åºç°å¾å¤div
        document.body.removeChild(div)
      }
    },
    {
      // ä¸»è¦åå®¹ææ§½,è¿éçrefå¿é¡»æ¥æ¶ä¸ä¸ªref
      default: () =&gt; h(component, {...props, ref: instanceElement}),
      // åºé¨ææ§½,noShowFooterBoolæ¯true,ä¸æ¾ç¤ºï¼ falseçæ¾ç¤ºåºé¨ 
      footer: props.noShowFooterBool ? null : () =&gt;h(
        'div',
        { 
          class: 'dialog-footer',
        },
        [
          h(
            ElButton, 
            {
              onClick: () =&gt; {
                console.log('ç¹å»åæ¶æé®')
                // å¸è½½ä¸ä¸ªå·²æè½½çåºç¨å®ä¾ãå¸è½½ä¸ä¸ªåºç¨ä¼è§¦åè¯¥åºç¨ç»ä»¶æ åææç»ä»¶çå¸è½½çå½å¨æé©å­ã
                app.unmount() // è¿æ ·å¸è½½ä¼è®©å¨ç»æ¶å¤±
                // å¸è½½çåæ¶éè¦ææä»¬åå»ºçdivåç´ ç§»é¤ï¼å¦åé¡µé¢ä¸ä¼åºç°å¾å¤div
                document.body.removeChild(div)
              }
            },
            () =&gt; props.cancelText || 'åæ¶'
          ),
          h(
            ElButton,
            { 
              type: 'primary',
              loading: isLoading.value,
              onClick: () =&gt; {
                isLoading.value = true
                // submitForm è°ç¨è¡¨åç»ä»¶ä¸­éè¦éªè¯æèæ´é²åºå»çæ°æ®
                instanceElement?.value?.submitForm().then((res:any) =&gt;{
                  if(!res){
                    isLoading.value = false
                  }
                  console.log('å¾å°çå¼',res)
                  // éªè¯éè¿åè°ç¨åè°å½æ°ä¼ éæ°æ®ï¼å¦éªè¯å¤±è´¥ï¼res çå¼æå¯è½æ¯ä¸ä¸ªfalseã
                  const callbackResult = onConfirm(res);
                  // å¦æåè°å½æ°è¿åçæ¯ Promiseï¼åç­å¾ä¸å¡å®æååå³é­å¼¹çª
                  if (callbackResult instanceof Promise) {
                     callbackResult.then(() =&gt; {
                      if(res){
                        console.log('111')
                        closeDialog()
                      }else{
                        isLoading.value = false
                      }
                    }).catch(error=&gt;{
                      console.log('222')
                      console.error('åè°å½æ°æ§è¡åºé,å¦:ç½ç»éè¯¯', error);
                      // éè¯¯æåµä¸ä¹å³é­å¼¹çª
                      closeDialog()
                    });
                  } else {
                    // å¦æä¸æ¯ Promiseï¼å¹¶ä¸éªè¯æ¶éè¿äºçãç«å³å³é­å¼¹çª
                    console.log('333', res)
                    if(res){
                      closeDialog()
                    }else{
                      isLoading.value = false
                    }
                  }
                }).catch((error: any) =&gt; {
                  console.log('44444')
                   isLoading.value = false
                  // éªè¯å¤±è´¥æ¶ä¹å¯ä»¥ä¼ ééè¯¯ä¿¡æ¯
                  console.log('éªè¯å¤±è´¥', error)
                })
              }
            },
            () =&gt; props.confirmText ||  'ç¡®å®'
          )
        ]
      ) 
    }
  );
  // åå»ºä¸ä¸ªæ°ç Vue åºç¨å®ä¾ãè¿ä¸ªåºç¨å®ä¾æ¯ç¬ç«çï¼ä¸ä¸»åºç¨åç¦»ã
  const app = createApp(dialog)
  // å¨æ°å®ä¾ä¸­æ³¨å Element Plus, è¿å¼¹çªä¸­çç»ä»¶å°±å¯ä»¥æ­£å¸¸æ¾ç¤ºäº
  app.use(ElementPlus);
  // è¿ä¸ªdivåç´ å¨å¨éæ¯åºç¨æ¶éè¦è¢«ç§»é¤å
  const div = document.createElement('div')
  document.body.appendChild(div)
  app.mount(div)
}
</code></pre>
<pre><code>&lt;template&gt;
  &lt;div&gt;
    &lt;el-button @click="openMask"&gt;ç¹å»å¼¹çª&lt;/el-button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import childTest from '@/components/childTest.vue'
import { renderDialog } from '@/hooks/dialog'
import { getCurrentInstance } from 'vue';
const currentInstance = getCurrentInstance();
function openMask(){
  console.log('currentInstance',currentInstance)
  const otherProps =  {cancelText:'åæ¶å', confirmText: 'ç¡®è®¤å',showFooterBool:true }
  const dialogSetObject = {title:'æµè¯å¼¹çªå', width: '700', draggable: true}
  renderDialog(childTest,otherProps,dialogSetObject, (res)=&gt;{
    console.log('éè¿åè°å½æ°è¿åå¼', res)
    // è¿éè¿åä¸ä¸ªpromiseå¯¹è±¡ï¼è¿æ ·å°±å¯ä»¥è®©ä¸å¡å®æåæå³é­å¼¹çª
    return fetch("https://dog.ceo/api/breed/pembroke/images/random")
    .then((res) =&gt; {
      return res.json();
    })
    .then((res) =&gt; {
        console.log('è·åçå¾çå°åä¸ºï¼', res.message);
    });
  })
}
&lt;/script&gt;

&lt;style lang="scss" scoped&gt;

&lt;/style&gt;
</code></pre>
<pre><code>&lt;template&gt;
  &lt;el-form
    ref="ruleFormRef"
    style="max-width: 600px"
    :model="ruleForm"
    :rules="rules"
    label-width="auto"
  &gt;
    &lt;el-form-item label="Activity name" prop="name"&gt;
      &lt;el-input v-model="ruleForm.name" /&gt;
    &lt;/el-form-item&gt;
    &lt;el-form-item label="Activity zone" prop="region"&gt;
      &lt;el-select v-model="ruleForm.region" placeholder="Activity zone"&gt;
        &lt;el-option label="Zone one" value="shanghai" /&gt;
        &lt;el-option label="Zone two" value="beijing" /&gt;
      &lt;/el-select&gt;
    &lt;/el-form-item&gt;
    
    &lt;el-form-item label="Activity time" required&gt;
      &lt;el-col :span="11"&gt;
        &lt;el-form-item prop="date1"&gt;
          &lt;el-date-picker
            v-model="ruleForm.date1"
            type="date"
            aria-label="Pick a date"
            placeholder="Pick a date"
            style="width: 100%"
          /&gt;
        &lt;/el-form-item&gt;
      &lt;/el-col&gt;
      &lt;el-col class="text-center" :span="2"&gt;
        &lt;span class="text-gray-500"&gt;-&lt;/span&gt;
      &lt;/el-col&gt;
      &lt;el-col :span="11"&gt;
        &lt;el-form-item prop="date2"&gt;
          &lt;el-time-picker
            v-model="ruleForm.date2"
            aria-label="Pick a time"
            placeholder="Pick a time"
            style="width: 100%"
          /&gt;
        &lt;/el-form-item&gt;
      &lt;/el-col&gt;
    &lt;/el-form-item&gt;

  
    &lt;el-form-item label="Resources" prop="resource"&gt;
      &lt;el-radio-group v-model="ruleForm.resource"&gt;
        &lt;el-radio value="Sponsorship"&gt;Sponsorship&lt;/el-radio&gt;
        &lt;el-radio value="Venue"&gt;Venue&lt;/el-radio&gt;
      &lt;/el-radio-group&gt;
    &lt;/el-form-item&gt;
    &lt;el-form-item label="Activity form" prop="desc"&gt;
      &lt;el-input v-model="ruleForm.desc" type="textarea" /&gt;
    &lt;/el-form-item&gt;

  &lt;/el-form&gt;
&lt;/template&gt;

&lt;script lang="ts" setup&gt;
import { reactive, ref } from 'vue'

import type { FormInstance, FormRules } from 'element-plus'

interface RuleForm {
  name: string
  region: string

  date1: string
  date2: string


  resource: string
  desc: string
}


const ruleFormRef = ref&lt;FormInstance&gt;()
const ruleForm = reactive&lt;RuleForm&gt;({
  name: 'Hello',
  region: '',
  date1: '',
  date2: '',
  resource: '',
  desc: '',
})



const rules = reactive&lt;FormRules&lt;RuleForm&gt;&gt;({
  name: [
    { required: true, message: 'Please input Activity name', trigger: 'blur' },
    { min: 3, max: 5, message: 'Length should be 3 to 5', trigger: 'blur' },
  ],
  region: [
    {
      required: true,
      message: 'Please select Activity zone',
      trigger: 'change',
    },
  ],
  date1: [
    {
      type: 'date',
      required: true,
      message: 'Please pick a date',
      trigger: 'change',
    },
  ],
  date2: [
    {
      type: 'date',
      required: true,
      message: 'Please pick a time',
      trigger: 'change',
    },
  ],
  resource: [
    {
      required: true,
      message: 'Please select activity resource',
      trigger: 'change',
    },
  ],
  desc: [
    { required: true, message: 'Please input activity form', trigger: 'blur' },
  ],
})

const submitForm = async () =&gt; {
  if (!ruleFormRef.value) {
    console.error('ruleFormRef is not initialized')
    return false
  }
  try {
    const valid = await ruleFormRef.value.validate()
    if (valid) {
      // éªè¯éè¿åï¼å°±ä¼å¯ä»¥æä½ éè¦çæ°æ®æ´é²åºå»
      return Promise.resolve(ruleForm)
    }
  } catch (error) {
    // ä¸ºå¥submitFormä¸­ï¼validçå¼æ¯falseä¼æ§è¡catch ï¼
    // el-form ç»ä»¶ç validate æ¹æ³çå·¥ä½æºå¶å¯¼è´çã validate æ¹æ³å¨è¡¨åéªè¯å¤±è´¥æ¶ä¼æåºå¼å¸¸
    console.error('err', error)
    return false
    /**
     * ä¸é¢è¿æ ·åä¸ºå¥çé¢ä¼æ¥éå¢ï¼
     * return Promise.reject(error)
     * å½è¡¨åéªè¯å¤±è´¥æ¶ï¼ruleFormRef.value.validate() ä¼æåºä¸ä¸ªå¼å¸¸ã
     * è½ç¶ä½ ç¨äº try...catch æè·è¿ä¸ªå¼å¸¸ï¼å¹¶ä¸å¨ catch åä¸­éè¿ return Promise.reject(error) è¿åäºä¸ä¸ªè¢«æç»ç Promise
     * ä½å¦æè°ç¨ submitForm çå°æ¹æ²¡ææ­£ç¡®å°å¤çè¿ä¸ªè¢«æç»ç Promiseï¼å³æ²¡æä½¿ç¨ .catch() æè await æ¥æ¥æ¶éè¯¯ï¼ï¼
     * é£ä¹æµè§å¨æ§å¶å°å°±ä¼æ¾ç¤ºä¸ä¸ª "Uncaught (in promise)" éè¯¯ã
     * å¨ catch ä¸­åæ¬¡ return Promise.reject(error) æ¯å¤ä½çï¼ ç´æ¥return false
     * */ 
    /**
     * å¦æä½ è¿æ ·å
     * throw error ç´æ¥æåºéè¯¯å³å¯
     * é£ä¹å°±éè¦åè°ç¨submitFormçå°æ¹æè·å¼å¸¸
     * */  
  }
}

defineExpose({
  submitForm:submitForm
})
&lt;/script&gt;

</code></pre>

</div>
<div id="MySignature" role="contentinfo">
    <div style="width:818px;background:#f5f5f5; padding: 10px 10px 10px 10px; border: 1px dashed rgb(224, 224, 224); font-family: å¾®è½¯éé»; font-size: 13px;">
            <h1 style="font-size: 24px;"> éè§é®é¢ï¼è¿æ¯ä½ æé¿çæºä¼ï¼å¦æä½ è½å¤è§£å³ï¼è¿å°±æ¯æ¶è·ã </h1>
		    <div style="padding:10px">
		        ä½èï¼<a href="https://www.cnblogs.com/IwishIcould/" target="_blank">ææ¥åé£æç¸è¯</a> <br>
		        åºå¤ï¼<a href="https://www.cnblogs.com/IwishIcould/">https://www.cnblogs.com/IwishIcould/</a> <br>
                        <p> æ³é®é®é¢ï¼æèµäºåå¾®çåä¸»ï¼æ±æ±ä½ å¤æ³¨ä¸ä¸çæ£æ£æèå¾®ä¿¡ï¼è¿æ ·æå¥½èç³»ä½ ï¼(ã£â¢ÌÏâ¢Ì)ã£ââ¾â¾ï¼</p>
		        <p>å¦æè§å¾è¿ç¯æç« å¯¹ä½ æå°å°çå¸®å©çè¯ï¼è®°å¾å¨å³ä¸è§ç¹ä¸ªâæ¨èâå¦ï¼æèå³æ³¨åä¸»ï¼å¨æ­¤æè°¢ï¼</p>
		        <p> ä¸æ°´åå±±æ»æ¯æï¼æèµ5æ¯ä¹°è¾£æ¡è¡ä¸è¡ï¼æä»¥å¦æä½ å¿æè¿æ¯è¾é«å´ï¼ä¹æ¯å¯ä»¥æ«ç æèµåä¸»(ã£â¢ÌÏâ¢Ì)ã£ââ¾â¾ï¼</p>
                        <p> æ³é®é®é¢ï¼æèµäºåå¾®çåä¸»ï¼æ±æ±ä½ å¤æ³¨ä¸ä¸çæ£æ£æèå¾®ä¿¡ï¼è¿æ ·æå¥½èç³»ä½ ï¼(ã£â¢ÌÏâ¢Ì)ã£ââ¾â¾ï¼</p>
				<div style="display: flex;">
					<div style="margin-right: 100px;text-align: center;">
						<img src="//images.cnblogs.com/cnblogs_com/IwishIcould/1900124/t_201214043958æ¯ä»å®æ¶æ¬¾ç .jpg?a=1607924145179">
						<div>
							æ¯ä»å®
						</div>
					</div>
					<div style="text-align: center;">
						<img src="//images.cnblogs.com/cnblogs_com/IwishIcould/1900124/t_20121604194271E6E296CCB71A007F4E22073D5EB64A.jpg">
						<div>å¾®ä¿¡</div>
					</div>
				</div>
		        æ¬æçæå½ä½èææï¼æ¬¢è¿è½¬è½½ï¼æªç»ä½èåæé¡»ä¿çæ­¤æ®µå£°æï¼å¨æç« é¡µé¢ææ¾ä½ç½®ç»åºåæè¿æ¥ <br>
		        å¦ææä¸­æä»ä¹éè¯¯ï¼æ¬¢è¿æåºãä»¥åæ´å¤çäººè¢«è¯¯å¯¼ã <br>
               
		    </div>
           
            
		</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-13 09:11">2026-01-13 09:10</span>&nbsp;
<a href="https://www.cnblogs.com/IwishIcould">åé£ææ¥æç¸è¯</a>&nbsp;
éè¯»(<span id="post_view_count">63</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19147850);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19147850', targetLink: 'https://www.cnblogs.com/IwishIcould/p/19147850', title: 'vueä½¿ç¨hå½æ°å°è£dialogç»ä»¶ï¼ä»¥å½ä»¤çå½¢å¼ä½¿ç¨dialogç»ä»¶' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Karmada-ResourceBinding (RB) ç»ä»¶è¯¦è§£ ]]></title>
    <link>https://www.cnblogs.com/Mephostopheles/p/19477095</link>
    <guid>35f97711bacce4e392555658e3c8c12f</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Mephostopheles/p/19477095" title="åå¸äº 2026-01-13 14:25">
    <span role="heading" aria-level="2">karmada-ResourceBinding (RB) å·¥ä½åçè¯¦è§£</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        ResourceBindingï¼RBï¼æ¯ Karmada ä¸­ç¨äºæè¿°èµæºå¦ä½å¨å¤ä¸ªæåéç¾¤ä¸­åå¸åè°åº¦çæ ¸å¿å¯¹è±¡ãæ¬æç»åæºç è¯¦ç»è§£é RB çå®æ´çå½å¨æåå·¥ä½åçã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="resourcebinding-rb-å·¥ä½åçè¯¦è§£">ResourceBinding (RB) å·¥ä½åçè¯¦è§£</h1>
<h2 id="æ¦è¿°">æ¦è¿°</h2>
<p>ResourceBindingï¼RBï¼æ¯ Karmada ä¸­ç¨äºæè¿°èµæºå¦ä½å¨å¤ä¸ªæåéç¾¤ä¸­åå¸åè°åº¦çæ ¸å¿å¯¹è±¡ãæ¬ææ¡£ç»åæºç è¯¦ç»è§£é RB çå®æ´çå½å¨æåå·¥ä½åçã</p>
<h2 id="é¶æ ¸å¿æ¦å¿µè¯¦è§£">é¶ãæ ¸å¿æ¦å¿µè¯¦è§£</h2>
<p>å¨æ·±å¥çè§£ RB çå·¥ä½åçä¹åï¼æä»¬éè¦åçè§£ Karmada ä¸­çå ä¸ªæ ¸å¿æ¦å¿µã</p>
<h3 id="01-propagationpolicyä¼ æ­ç­ç¥">0.1 PropagationPolicyï¼ä¼ æ­ç­ç¥ï¼</h3>
<p><strong>PropagationPolicy</strong> æ¯ Karmada ä¸­ç¨äºå®ä¹èµæºå¦ä½ä¼ æ­å°æåéç¾¤çç­ç¥å¯¹è±¡ãå®ç±»ä¼¼äº Kubernetes ä¸­ç ReplicaSetï¼ä½å®æ§å¶çæ¯èµæºå¨å¤ä¸ªéç¾¤é´çåå¸ï¼èä¸æ¯ Pod å¨èç¹é´çåå¸ã</p>
<h4 id="å®ä¹">å®ä¹</h4>
<pre><code class="language-52:59:pkg/apis/policy/v1alpha1/propagation_types.go">// PropagationPolicy represents the policy that propagates a group of resources to one or more clusters.
type PropagationPolicy struct {
	metav1.TypeMeta   `json:",inline"`
	metav1.ObjectMeta `json:"metadata,omitempty"`

	// Spec represents the desired behavior of PropagationPolicy.
	// +required
	Spec PropagationSpec `json:"spec"`
}
</code></pre>
<h4 id="propagationspec-ç»æ">PropagationSpec ç»æ</h4>
<pre><code class="language-61:220:pkg/apis/policy/v1alpha1/propagation_types.go">// PropagationSpec represents the desired behavior of PropagationPolicy.
type PropagationSpec struct {
	// ResourceSelectors used to select resources.
	// Nil or empty selector is not allowed and doesn't mean match all kinds
	// of resources for security concerns that sensitive resources(like Secret)
	// might be accidentally propagated.
	// +required
	// +kubebuilder:validation:MinItems=1
	ResourceSelectors []ResourceSelector `json:"resourceSelectors"`

	// Association tells if relevant resources should be selected automatically.
	// e.g. a ConfigMap referred by a Deployment.
	// default false.
	// Deprecated: in favor of PropagateDeps.
	// +optional
	Association bool `json:"association,omitempty"`

	// PropagateDeps tells if relevant resources should be propagated automatically.
	// Take 'Deployment' which referencing 'ConfigMap' and 'Secret' as an example, when 'propagateDeps' is 'true',
	// the referencing resources could be omitted(for saving config effort) from 'resourceSelectors' as they will be
	// propagated along with the Deployment. In addition to the propagating process, the referencing resources will be
	// migrated along with the Deployment in the fail-over scenario.
	//
	// Defaults to false.
	// +optional
	PropagateDeps bool `json:"propagateDeps,omitempty"`

	// Placement represents the rule for select clusters to propagate resources.
	// +optional
	Placement Placement `json:"placement,omitempty"`
</code></pre>
<p><strong>å³é®å­æ®µè¯´æ</strong>ï¼</p>
<ol>
<li>
<p><strong>ResourceSelectors</strong>: èµæºéæ©å¨ï¼ç¨äºéæ©åªäºèµæºéè¦ä¼ æ­</p>
<ul>
<li>å¯ä»¥éè¿ APIVersionãKindãNameãNamespaceãLabelSelector æ¥éæ©èµæº</li>
<li>è³å°éè¦ä¸ä¸ªéæ©å¨ï¼å®å¨èèï¼é²æ­¢ææèµæºè¢«æå¤ä¼ æ­ï¼</li>
</ul>
</li>
<li>
<p><strong>PropagateDeps</strong>: æ¯å¦èªå¨ä¼ æ­ä¾èµèµæº</p>
<ul>
<li>ä¾å¦ï¼Deployment å¼ç¨ç ConfigMap å Secret</li>
<li>è®¾ç½®ä¸º <code>true</code> æ¶ï¼å¯ä»¥çç¥è¿äºä¾èµèµæºçéæ©å¨ï¼å®ä»¬ä¼èªå¨ä¼ æ­</li>
</ul>
</li>
<li>
<p><strong>Placement</strong>: éç¾¤éæ©è§åï¼è¯¦è§ä¸æï¼</p>
</li>
<li>
<p><strong>Priority</strong>: ç­ç¥ä¼åçº§ï¼ç¨äºç­ç¥æ¢å ï¼</p>
</li>
<li>
<p><strong>Failover</strong>: æéè½¬ç§»è¡ä¸ºï¼è¯¦è§ä¸æï¼</p>
</li>
</ol>
<h4 id="resourceselector-ç»æ">ResourceSelector ç»æ</h4>
<pre><code class="language-222:246:pkg/apis/policy/v1alpha1/propagation_types.go">// ResourceSelector the resources will be selected.
type ResourceSelector struct {
	// APIVersion represents the API version of the target resources.
	// +required
	APIVersion string `json:"apiVersion"`

	// Kind represents the Kind of the target resources.
	// +required
	Kind string `json:"kind"`

	// Namespace of the target resource.
	// Default is empty, which means inherit from the parent object scope.
	// +optional
	Namespace string `json:"namespace,omitempty"`

	// Name of the target resource.
	// Default is empty, which means selecting all resources.
	// +optional
	Name string `json:"name,omitempty"`

	// A label query over a set of resources.
	// If name is not empty, labelSelector will be ignored.
	// +optional
	LabelSelector *metav1.LabelSelector `json:"labelSelector,omitempty"`
}
</code></pre>
<h4 id="clusterpropagationpolicy">ClusterPropagationPolicy</h4>
<p><strong>ClusterPropagationPolicy</strong> ä¸ PropagationPolicy åè½ç¸åï¼ä½ä½ç¨åæ¯éç¾¤çº§å«çï¼ç¨äºéç¾¤çº§å«çèµæºï¼å¦ ClusterRoleãClusterRoleBinding ç­ï¼ã</p>
<h3 id="02-placementæ¾ç½®è§å">0.2 Placementï¼æ¾ç½®è§åï¼</h3>
<p><strong>Placement</strong> å®ä¹äºèµæºåºè¯¥è¢«è°åº¦å°åªäºéç¾¤ï¼ä»¥åå¦ä½å¨è¿äºéç¾¤é´åéã</p>
<h4 id="å®ä¹-1">å®ä¹</h4>
<p>Placement åå«ä»¥ä¸ä¸»è¦å­æ®µï¼</p>
<ol>
<li><strong>ClusterAffinity</strong>: éç¾¤äº²åæ§ï¼é¦éåªäºéç¾¤ï¼</li>
<li><strong>ClusterTolerations</strong>: éç¾¤å®¹å¿åº¦ï¼å¯ä»¥è°åº¦å°åªäºéç¾¤ï¼</li>
<li><strong>SpreadConstraints</strong>: åæ£çº¦æï¼å¦ä½å¨ä¸åéç¾¤é´åéï¼</li>
<li><strong>ReplicaScheduling</strong>: å¯æ¬è°åº¦ç­ç¥ï¼å¯æ¬å¦ä½åéå°éç¾¤ï¼</li>
</ol>
<p><strong>ç¤ºä¾</strong>ï¼</p>
<ul>
<li><strong>Duplicated</strong>: ææéç¾¤é½è¿è¡ç¸åçå¯æ¬æ°ï¼å¦ ConfigMapãSecretï¼</li>
<li><strong>Divided</strong>: å¯æ¬ææ¯ä¾åéå°ä¸åéç¾¤ï¼å¦ Deploymentï¼</li>
</ul>
<h3 id="03-resourcebindingèµæºç»å®">0.3 ResourceBindingï¼èµæºç»å®ï¼</h3>
<p><strong>ResourceBindingï¼RBï¼</strong> æ¯ PropagationPolicy åèµæºå¯¹è±¡çç»å®ç»æãå®è®°å½äºï¼</p>
<ol>
<li><strong>èµæºå¼ç¨</strong>: æååå§èµæºå¯¹è±¡ï¼DeploymentãStatefulSet ç­ï¼</li>
<li><strong>å¯æ¬ä¿¡æ¯</strong>: ä»èµæºä¸­æåçå¯æ¬æ°åèµæºéæ±</li>
<li><strong>è°åº¦ç»æ</strong>: ç± Scheduler å¡«åçç®æ éç¾¤åè¡¨</li>
<li><strong>ç­ç¥ä¿¡æ¯</strong>: ä» PropagationPolicy å¤å¶çç­ç¥éç½®</li>
</ol>
<h4 id="resourcebinding-ä¸-propagationpolicy-çå³ç³»">ResourceBinding ä¸ PropagationPolicy çå³ç³»</h4>
<pre><code>ç¨æ·åå»º Deployment + PropagationPolicy
    â
ResourceDetector æ£æµå¹é
    â
åå»º ResourceBindingï¼ç»å® Deployment å PropagationPolicyï¼
    â
Scheduler å¡«å ResourceBinding.Spec.Clustersï¼è°åº¦ç»æï¼
</code></pre>
<p><strong>éè¦</strong>ï¼RB æ¯ç­ç¥åèµæºç<strong>ç»å®</strong>ï¼ä¸ä¸ªèµæºåªä¼è¢«ä¸ä¸ªç­ç¥ç»å®ï¼æä¼åçº§éæ©ï¼ã</p>
<h3 id="04-workå·¥ä½è´è½½">0.4 Workï¼å·¥ä½è´è½½ï¼</h3>
<p><strong>Work</strong> æ¯å®éè¢«åéå°æåéç¾¤çèµæºå¯¹è±¡ãä¸ä¸ª RB å¯ä»¥çæå¤ä¸ª Workï¼æ¯ä¸ªç®æ éç¾¤ä¸ä¸ªï¼ã</p>
<h4 id="å®ä¹-2">å®ä¹</h4>
<pre><code class="language-43:74:pkg/apis/work/v1alpha1/work_types.go">// Work defines a list of resources to be deployed on the member cluster.
type Work struct {
	metav1.TypeMeta   `json:",inline"`
	metav1.ObjectMeta `json:"metadata,omitempty"`

	// Spec represents the desired behavior of Work.
	Spec WorkSpec `json:"spec"`

	// Status represents the status of PropagationStatus.
	// +optional
	Status WorkStatus `json:"status,omitempty"`
}

// WorkSpec defines the desired state of Work.
type WorkSpec struct {
	// Workload represents the manifest workload to be deployed on managed cluster.
	Workload WorkloadTemplate `json:"workload,omitempty"`

	// SuspendDispatching controls whether dispatching should
	// be suspended, nil means not suspend.
	// Note: true means stop propagating to the corresponding member cluster, and
	// does not prevent status collection.
	// +optional
	SuspendDispatching *bool `json:"suspendDispatching,omitempty"`

	// PreserveResourcesOnDeletion controls whether resources should be preserved on the
	// member cluster when the Work object is deleted.
	// If set to true, resources will be preserved on the member cluster.
	// Default is false, which means resources will be deleted along with the Work object.
	// +optional
	PreserveResourcesOnDeletion *bool `json:"preserveResourcesOnDeletion,omitempty"`
}
</code></pre>
<h4 id="work-ä¸-resourcebinding-çå³ç³»">Work ä¸ ResourceBinding çå³ç³»</h4>
<pre><code>ResourceBinding (æ§å¶å¹³é¢)
    â è½¬æ¢ä¸º
Work (æ§è¡ç©ºé´: execution-{cluster-name})
    â ååå°
æåéç¾¤
    â æ§è¡
å®éèµæºï¼DeploymentãService ç­ï¼
</code></pre>
<p><strong>æ§è¡ç©ºé´ï¼Execution Spaceï¼</strong>ï¼æ¯ä¸ªæåéç¾¤é½æä¸ä¸ªå¯¹åºç namespaceï¼æ ¼å¼ä¸º <code>execution-{cluster-name}</code>ï¼ææåéå°è¯¥éç¾¤ç Work é½æ¾å¨è¿ä¸ª namespace ä¸­ã</p>
<h3 id="05-resourceinterpreterèµæºè§£éå¨">0.5 ResourceInterpreterï¼èµæºè§£éå¨ï¼</h3>
<p><strong>ResourceInterpreter</strong> æ¯ Karmada ä¸­ç¨äºè§£éèªå®ä¹èµæºçæ ¸å¿ç»ä»¶ãå®è½å¤çè§£ä¸åç§ç±»çèµæºï¼DeploymentãStatefulSetãèªå®ä¹ CRD ç­ï¼ï¼å¹¶æåå³é®ä¿¡æ¯ã</p>
<h4 id="ä½ç¨">ä½ç¨</h4>
<p>ResourceInterpreter æä¾ä»¥ä¸è½åï¼</p>
<ol>
<li><strong>GetReplicas</strong>: ä»èµæºä¸­æåå¯æ¬æ°åèµæºéæ±ï¼ç¨äº RB åå»ºæ¶çæ§è½ç¶é¢ç¹ï¼</li>
<li><strong>ReviseReplica</strong>: ä¿®æ¹èµæºçå¯æ¬æ°ï¼ç¨äºå°è°åº¦ç»æåºç¨å° Workï¼</li>
<li><strong>Retain</strong>: ä¿çéç¾¤ç¹å®çå­æ®µï¼é²æ­¢è¦çï¼</li>
<li><strong>AggregateStatus</strong>: èåå¤ä¸ªéç¾¤çç¶æ</li>
<li><strong>InterpretHealth</strong>: å¤æ­èµæºæ¯å¦å¥åº·</li>
<li><strong>GetDependencies</strong>: è·åä¾èµèµæº</li>
</ol>
<h4 id="å®ç°å±æ¬¡">å®ç°å±æ¬¡</h4>
<pre><code class="language-42:72:pkg/resourceinterpreter/interpreter.go">// ResourceInterpreter manages both default and customized webhooks to interpret custom resource structure.
type ResourceInterpreter interface {
	// Start initializes the resource interpreter and performs cache synchronization.
	Start(ctx context.Context) (err error)

	// HookEnabled tells if any hook exist for specific resource type and operation.
	HookEnabled(objGVK schema.GroupVersionKind, operationType configv1alpha1.InterpreterOperation) bool

	// GetReplicas returns the desired replicas of the object as well as the requirements of each replica.
	GetReplicas(object *unstructured.Unstructured) (replica int32, replicaRequires *workv1alpha2.ReplicaRequirements, err error)

	// ReviseReplica revises the replica of the given object.
	ReviseReplica(object *unstructured.Unstructured, replica int64) (*unstructured.Unstructured, error)

	// GetComponents extracts the resource requirements for multiple components from the given object.
	// This hook is designed for CRDs with multiple components (e.g., FlinkDeployment), but can
	// also be used for single-component resources like Deployment.
	// If implemented, the controller will use this hook to obtain per-component replica and resource
	// requirements, and will not call GetReplicas.
	// If not implemented, the controller will fall back to GetReplicas for backward compatibility.
	// This hook will only be called when the feature gate 'MultiplePodTemplatesScheduling' is enabled.
	GetComponents(object *unstructured.Unstructured) (components []workv1alpha2.Component, err error)

	// Retain returns the objects that based on the "desired" object but with values retained from the "observed" object.
	Retain(desired *unstructured.Unstructured, observed *unstructured.Unstructured) (retained *unstructured.Unstructured, err error)

	// AggregateStatus returns the objects that based on the 'object' but with status aggregated.
	AggregateStatus(object *unstructured.Unstructured, aggregatedStatusItems []workv1alpha2.AggregatedStatusItem) (*unstructured.Unstructured, error)

	// GetDependencies returns the dependent resources of the given object.
</code></pre>
<h4 id="è§£éå¨ç±»å">è§£éå¨ç±»å</h4>
<p>ResourceInterpreter æåç§å®ç°æ¹å¼ï¼æä¼åçº§ï¼ï¼</p>
<ol>
<li><strong>ConfigurableInterpreter</strong>ï¼æé«ä¼åçº§ï¼ï¼ä½¿ç¨ Lua èæ¬è¿è¡å£°æå¼éç½®</li>
<li><strong>CustomizedInterpreter</strong>ï¼ä½¿ç¨ Webhook è¿è¡èªå®ä¹</li>
<li><strong>ThirdPartyInterpreter</strong>ï¼ç¬¬ä¸æ¹åç½®çè§£éè§å</li>
<li><strong>DefaultInterpreter</strong>ï¼æä½ä¼åçº§ï¼ï¼Karmada åç½®çé»è®¤è§£éå¨</li>
</ol>
<p>è°ç¨é¡ºåºï¼</p>
<pre><code class="language-136:168:pkg/resourceinterpreter/interpreter.go">// GetReplicas returns the desired replicas of the object as well as the requirements of each replica.
func (i *customResourceInterpreterImpl) GetReplicas(object *unstructured.Unstructured) (replica int32, requires *workv1alpha2.ReplicaRequirements, err error) {
	var hookEnabled bool

	replica, requires, hookEnabled, err = i.configurableInterpreter.GetReplicas(object)
	if err != nil {
		return
	}
	if hookEnabled {
		return
	}

	replica, requires, hookEnabled, err = i.customizedInterpreter.GetReplicas(context.TODO(), &amp;request.Attributes{
		Operation: configv1alpha1.InterpreterOperationInterpretReplica,
		Object:    object,
	})
	if err != nil {
		return
	}
	if hookEnabled {
		return
	}
	replica, requires, hookEnabled, err = i.thirdpartyInterpreter.GetReplicas(object)
	if err != nil {
		return
	}
	if hookEnabled {
		return
	}

	replica, requires, err = i.defaultInterpreter.GetReplicas(object)
	return
}
</code></pre>
<h3 id="06-resourcedetectorèµæºæ£æµå¨">0.6 ResourceDetectorï¼èµæºæ£æµå¨ï¼</h3>
<p><strong>ResourceDetector</strong> æ¯ Karmada æ§å¶å¨çä¸é¨åï¼è´è´£ï¼</p>
<ol>
<li><strong>çå¬èµæºåå</strong>ï¼çå¬ Kubernetes èµæºï¼DeploymentãService ç­ï¼çåå»º/æ´æ°/å é¤</li>
<li><strong>å¹éç­ç¥</strong>ï¼ä¸ºèµæºæ¾å°å¹éç PropagationPolicy</li>
<li><strong>åå»º RB</strong>ï¼æ ¹æ®ç­ç¥åå»ºææ´æ° ResourceBinding</li>
<li><strong>ç­ç¥ç®¡ç</strong>ï¼å¤ç PropagationPolicy ççå½å¨æ</li>
</ol>
<h3 id="07-schedulerè°åº¦å¨">0.7 Schedulerï¼è°åº¦å¨ï¼</h3>
<p><strong>Scheduler</strong> æ¯ Karmada çè°åº¦ç»ä»¶ï¼è´è´£ï¼</p>
<ol>
<li><strong>çå¬ RB</strong>ï¼çå¬ ResourceBinding çåå»ºåæ´æ°</li>
<li><strong>éæ©éç¾¤</strong>ï¼æ ¹æ® Placement è§åéæ©åéçæåéç¾¤</li>
<li><strong>åéå¯æ¬</strong>ï¼å°å¯æ¬æç­ç¥åéå°ä¸åéç¾¤</li>
<li><strong>æ´æ° RB</strong>ï¼å°è°åº¦ç»æå¡«åå° <code>ResourceBinding.Spec.Clusters</code></li>
</ol>
<p><strong>éè¦</strong>ï¼Scheduler <strong>åªè´è´£å¡«å <code>Spec.Clusters</code></strong>ï¼ä¸ä¼ä¿®æ¹å¶ä»å­æ®µã</p>
<h3 id="08-æ¦å¿µå³ç³»å¾">0.8 æ¦å¿µå³ç³»å¾</h3>
<pre><code>âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
â                   æ§å¶å¹³é¢ï¼Karmadaï¼                      â
â                                                          â
â  âââââââââââââââ      ââââââââââââââââ                â
â  â Deployment  â      âPropagation   â                â
â  â  (èµæºå¯¹è±¡)  â      â  Policy      â                â
â  ââââââââ¬âââââââ      ââââââââ¬ââââââââ                â
â         â                    â                         â
â         ââââââââââ¬ââââââââââââ                         â
â                  â                                     â
â                  â¼                                     â
â         ââââââââââââââââââââ                          â
â         âResourceDetector  â                          â
â         â  (æ£æµå¹¶åå»º)     â                          â
â         ââââââââââ¬ââââââââââ                          â
â                  â                                     â
â                  â¼                                     â
â         ââââââââââââââââââââ                          â
â         âResourceBinding   â                          â
â         â  (ç»å®ç­ç¥åèµæº)  â                          â
â         ââââââââââ¬ââââââââââ                          â
â                  â                                     â
â                  â¼                                     â
â         ââââââââââââââââââââ                          â
â         â   Scheduler      â                          â
â         â  (éæ©ç®æ éç¾¤)   â                          â
â         ââââââââââ¬ââââââââââ                          â
â                  â                                     â
â                  â¼                                     â
â         ââââââââââââââââââââ                          â
â         âResourceBinding   â                          â
â         â (Spec.Clusterså·² â                          â
â         â   è¢«å¡«å)        â                          â
â         ââââââââââ¬ââââââââââ                          â
â                  â                                     â
â                  â¼                                     â
â         ââââââââââââââââââââ                          â
â         â BindingControllerâ                          â
â         â   (è½¬æ¢ä¸ºWork)    â                          â
â         ââââââââââ¬ââââââââââ                          â
â                  â                                     â
ââââââââââââââââââââ¼ââââââââââââââââââââââââââââââââââââââ
                   â
        ââââââââââââ´âââââââââââ
        â                     â
        â¼                     â¼
ââââââââââââââââ      ââââââââââââââââ
â   Work       â      â   Work       â
â(execution-   â      â(execution-   â
â cluster-1)   â      â cluster-2)   â
ââââââââ¬ââââââââ      ââââââââ¬ââââââââ
       â                     â
       ââââââââââââ¬âââââââââââ
                  â
        âââââââââââ´ââââââââââ
        â                   â
        â¼                   â¼
âââââââââââââââ      âââââââââââââââ
âæåéç¾¤1     â      âæåéç¾¤2     â
â             â      â             â
â Deployment  â      â Deployment  â
â  (å®éè¿è¡)  â      â  (å®éè¿è¡)  â
âââââââââââââââ      âââââââââââââââ
</code></pre>
<h2 id="ä¸rb-ççå½å¨æ">ä¸ãRB ççå½å¨æ</h2>
<h3 id="11-æ´ä½æµç¨">1.1 æ´ä½æµç¨</h3>
<pre><code>ç¨æ·åå»ºèµæº + PropagationPolicy
    â
ResourceDetector æ£æµå¹¶åå»º/æ´æ° RB
    â
Scheduler ä¸º RB éæ©ç®æ éç¾¤
    â
ResourceBindingController å° RB è½¬æ¢ä¸º Work
    â
Work è¢«ååå°æåéç¾¤
</code></pre>
<h3 id="12-å³é®ç»ä»¶">1.2 å³é®ç»ä»¶</h3>
<ol>
<li><strong>ResourceDetector</strong> (<code>pkg/detector/detector.go</code>): è´è´£æ£æµèµæºå¹¶åå»º RB</li>
<li><strong>Scheduler</strong> (<code>pkg/scheduler/</code>): ä¸º RB éæ©ç®æ éç¾¤</li>
<li><strong>ResourceBindingController</strong> (<code>pkg/controllers/binding/</code>): å° RB è½¬æ¢ä¸º Work</li>
<li><strong>ResourceInterpreter</strong> (<code>pkg/resourceinterpreter/</code>): è§£éèµæºï¼æåå¯æ¬æ°åèµæºéæ±</li>
</ol>
<h2 id="äºrb-çåå»ºè¿ç¨">äºãRB çåå»ºè¿ç¨</h2>
<h3 id="21-è§¦åæ¡ä»¶">2.1 è§¦åæ¡ä»¶</h3>
<p>å½ç¨æ·åå»ºææ´æ°äºï¼</p>
<ul>
<li><strong>èµæºå¯¹è±¡</strong>ï¼å¦ Deploymentï¼</li>
<li><strong>PropagationPolicy</strong> æ <strong>ClusterPropagationPolicy</strong></li>
</ul>
<p>ResourceDetector ä¼æ£æµå°ååå¹¶è§¦å RB çåå»ºææ´æ°ã</p>
<h3 id="22-åå»ºæµç¨è¯¦è§£">2.2 åå»ºæµç¨è¯¦è§£</h3>
<h4 id="æ­¥éª¤1-æ£æµèµæºåç­ç¥å¹é">æ­¥éª¤1: æ£æµèµæºåç­ç¥å¹é</h4>
<p>å½èµæºå¯¹è±¡åçååæ¶ï¼ResourceDetector ä¼ï¼</p>
<pre><code class="language-796:862:pkg/detector/detector.go">// BuildResourceBinding builds a desired ResourceBinding for object.
func (d *ResourceDetector) BuildResourceBinding(object *unstructured.Unstructured, policySpec *policyv1alpha1.PropagationSpec, policyID string, policyMeta metav1.ObjectMeta, claimFunc func(object metav1.Object, policyId string, objectMeta metav1.ObjectMeta)) (*workv1alpha2.ResourceBinding, error) {
	bindingName := names.GenerateBindingName(object.GetKind(), object.GetName())
	propagationBinding := &amp;workv1alpha2.ResourceBinding{
		ObjectMeta: metav1.ObjectMeta{
			Name:      bindingName,
			Namespace: object.GetNamespace(),
			OwnerReferences: []metav1.OwnerReference{
				*metav1.NewControllerRef(object, object.GroupVersionKind()),
			},
			Finalizers: []string{util.BindingControllerFinalizer},
		},
		Spec: workv1alpha2.ResourceBindingSpec{
			PropagateDeps:               policySpec.PropagateDeps,
			SchedulerName:               policySpec.SchedulerName,
			Placement:                   &amp;policySpec.Placement,
			Failover:                    policySpec.Failover,
			ConflictResolution:          policySpec.ConflictResolution,
			PreserveResourcesOnDeletion: policySpec.PreserveResourcesOnDeletion,
			Resource: workv1alpha2.ObjectReference{
				APIVersion:      object.GetAPIVersion(),
				Kind:            object.GetKind(),
				Namespace:       object.GetNamespace(),
				Name:            object.GetName(),
				UID:             object.GetUID(),
				ResourceVersion: object.GetResourceVersion(),
			},
		},
	}

	if policySpec.Suspension != nil {
		propagationBinding.Spec.Suspension = &amp;workv1alpha2.Suspension{Suspension: *policySpec.Suspension}
	}

	claimFunc(propagationBinding, policyID, policyMeta)

	if err := d.applyReplicaInterpretation(object, &amp;propagationBinding.Spec); err != nil {
		return nil, err
	}

	if features.FeatureGate.Enabled(features.PriorityBasedScheduling) &amp;&amp; policySpec.SchedulePriority != nil {
		// ... å¤çè°åº¦ä¼åçº§
	}

	return propagationBinding, nil
}
</code></pre>
<p><strong>å³é®ç¹</strong>ï¼</p>
<ul>
<li>ä½¿ç¨ <code>names.GenerateBindingName()</code> çæ RB åç§°ï¼æ ¼å¼ï¼<code>{Kind}-{Name}</code>ï¼</li>
<li>è®¾ç½® OwnerReference å»ºç«èµæºå¯¹è±¡å RB çå³è</li>
<li>æ·»å  Finalizer ç¡®ä¿å é¤æ¶æ­£ç¡®æ¸ç</li>
</ul>
<h4 id="æ­¥éª¤2-åºç¨å¯æ¬è§£é">æ­¥éª¤2: åºç¨å¯æ¬è§£é</h4>
<p>è¿æ¯ RB åå»ºä¸­ç<strong>å³é®æ­¥éª¤</strong></p>
<pre><code class="language-1442:1470:pkg/detector/detector.go">// applyReplicaInterpretation handles the logic for interpreting replicas or components from an object.
func (d *ResourceDetector) applyReplicaInterpretation(object *unstructured.Unstructured, spec *workv1alpha2.ResourceBindingSpec) error {
	gvk := object.GroupVersionKind()
	name := object.GetName()

	// Prioritize component interpretation if the feature and GetComponents are enabled.
	if features.FeatureGate.Enabled(features.MultiplePodTemplatesScheduling) &amp;&amp; d.ResourceInterpreter.HookEnabled(gvk, configv1alpha1.InterpreterOperationInterpretComponent) {
		components, err := d.ResourceInterpreter.GetComponents(object)
		if err != nil {
			klog.Errorf("Failed to get components for %s(%s): %v", gvk, name, err)
			return err
		}
		spec.Components = components
		return nil
	}

	// GetReplicas is executed if the MultiplePodTemplatesScheduling feature gate is disabled, or if GetComponents is not implemented.
	if d.ResourceInterpreter.HookEnabled(gvk, configv1alpha1.InterpreterOperationInterpretReplica) {
		replicas, replicaRequirements, err := d.ResourceInterpreter.GetReplicas(object)
		if err != nil {
			klog.Errorf("Failed to customize replicas for %s(%s): %v", gvk, name, err)
			return err
		}
		spec.Replicas = replicas
		spec.ReplicaRequirements = replicaRequirements
	}

	return nil
}
</code></pre>
<p><strong>è°ç¨é¾</strong>ï¼</p>
<pre><code>applyReplicaInterpretation
    â
ResourceInterpreter.GetReplicas(object)
    â
ConfigurableInterpreter.GetReplicas(object)
    â
LuaVM.GetReplicas(object, script) 
    â
LuaVM.RunScript(script, "GetReplicas", 2, object)  â éè¦ä» VM æ± è·åå®ä¾
    â
VM.Pool.Get()  â éç«äºç¹
    â
Lua.DoString(script)  â èæ¬ç¼è¯ç¹
    â
Lua.CallByParam(...)  â æ§è¡ GetReplicas å½æ°
</code></pre>
<h4 id="æ­¥éª¤3-åå»ºææ´æ°-rb">æ­¥éª¤3: åå»ºææ´æ° RB</h4>
<p>ä½¿ç¨ <code>CreateOrUpdate</code> ç¡®ä¿ RB å­å¨ï¼</p>
<pre><code class="language-475:524:pkg/detector/detector.go">	binding, err := d.BuildResourceBinding(object, &amp;policy.Spec, policyID, policy.ObjectMeta, AddPPClaimMetadata)
	if err != nil {
		klog.Errorf("Failed to build resourceBinding for object: %s. error: %v", objectKey, err)
		return err
	}
	bindingCopy := binding.DeepCopy()
	err = retry.RetryOnConflict(retry.DefaultRetry, func() (err error) {
		operationResult, err = controllerutil.CreateOrUpdate(context.TODO(), d.Client, bindingCopy, func() error {
			// If this binding exists and its owner is not the input object, return error and let garbage collector
			// delete this binding and try again later. See https://github.com/karmada-io/karmada/issues/2090.
			if ownerRef := metav1.GetControllerOfNoCopy(bindingCopy); ownerRef != nil &amp;&amp; ownerRef.UID != object.GetUID() {
				return fmt.Errorf("failed to update binding due to different owner reference UID, will " +
					"try again later after binding is garbage collected, see https://github.com/karmada-io/karmada/issues/2090")
			}

			// Just update necessary fields, especially avoid modifying Spec.Clusters which is scheduling result, if already exists.
			bindingCopy.Annotations = util.DedupeAndMergeAnnotations(bindingCopy.Annotations, binding.Annotations)
			bindingCopy.Labels = util.DedupeAndMergeLabels(bindingCopy.Labels, binding.Labels)
			bindingCopy.OwnerReferences = binding.OwnerReferences
			bindingCopy.Spec.Placement = binding.Spec.Placement
			bindingCopy.Spec.Resource = binding.Spec.Resource
			bindingCopy.Spec.ConflictResolution = binding.Spec.ConflictResolution
			if binding.Spec.Suspension != nil {
				if bindingCopy.Spec.Suspension == nil {
					bindingCopy.Spec.Suspension = &amp;workv1alpha2.Suspension{}
				}
				bindingCopy.Spec.Suspension.Suspension = binding.Spec.Suspension.Suspension
			}
			return nil
		})
		if err != nil {
			return err
		}
		return nil
	})
</code></pre>
<p><strong>å³é®ç¹</strong>ï¼</p>
<ul>
<li>ä½¿ç¨ <code>RetryOnConflict</code> å¤çå¹¶åæ´æ°å²çª</li>
<li><strong>ä¸ä¿®æ¹ <code>Spec.Clusters</code></strong>ï¼è¿æ¯è°åº¦å¨çè°åº¦ç»æ</li>
<li>åªæ´æ°ç­ç¥ç¸å³çå­æ®µ</li>
</ul>
<h2 id="ä¸rb-å°-work-çè½¬æ¢">ä¸ãRB å° Work çè½¬æ¢</h2>
<h3 id="31-è½¬æ¢è§¦å">3.1 è½¬æ¢è§¦å</h3>
<p>å½ RB è¢«åå»ºææ´æ°åï¼ResourceBindingController ä¼çå¬ RB çååï¼</p>
<pre><code class="language-110:148:pkg/controllers/binding/binding_controller.go">// syncBinding will sync resourceBinding to Works.
func (c *ResourceBindingController) syncBinding(ctx context.Context, binding *workv1alpha2.ResourceBinding) (controllerruntime.Result, error) {
	if err := c.removeOrphanWorks(ctx, binding); err != nil {
		return controllerruntime.Result{}, err
	}

	needWaitForCleanup, err := c.checkDirectPurgeOrphanWorks(ctx, binding)
	if err != nil {
		return controllerruntime.Result{}, err
	}
	if needWaitForCleanup {
		msg := fmt.Sprintf("There are works in clusters with PurgeMode 'Directly' not deleted for ResourceBinding(%s/%s), skip syncing works",
			binding.Namespace, binding.Name)
		klog.V(4).InfoS(msg, "namespace", binding.GetNamespace(), "binding", binding.GetName())
		return controllerruntime.Result{RequeueAfter: requeueIntervalForDirectlyPurge}, nil
	}

	workload, err := helper.FetchResourceTemplate(ctx, c.DynamicClient, c.InformerManager, c.RESTMapper, binding.Spec.Resource)
	if err != nil {
		if apierrors.IsNotFound(err) {
			// It might happen when the resource template has been removed but the garbage collector hasn't removed
			// the ResourceBinding which dependent on resource template.
			// So, just return without retry(requeue) would save unnecessary loop.
			return controllerruntime.Result{}, nil
		}
		klog.ErrorS(err, "Failed to fetch workload for ResourceBinding", "namespace", binding.GetNamespace(), "binding", binding.GetName())
		return controllerruntime.Result{}, err
	}
	start := time.Now()
	err = ensureWork(ctx, c.Client, c.ResourceInterpreter, workload, c.OverrideManager, binding, apiextensionsv1.NamespaceScoped)
	metrics.ObserveSyncWorkLatency(err, start)
	if err != nil {
		klog.ErrorS(err, "Failed to transform ResourceBinding to works", "namespace", binding.GetNamespace(), "binding", binding.GetName())
		c.EventRecorder.Event(binding, corev1.EventTypeWarning, events.EventReasonSyncWorkFailed, err.Error())
		c.EventRecorder.Event(workload, corev1.EventTypeWarning, events.EventReasonSyncWorkFailed, err.Error())
		return controllerruntime.Result{}, err
	}

	msg := fmt.Sprintf("Sync work of ResourceBinding(%s/%s) successful.",
</code></pre>
<h3 id="32-ensurework-å½æ°è¯¦è§£">3.2 ensureWork å½æ°è¯¦è§£</h3>
<p>è¿æ¯å° RB è½¬æ¢ä¸º Work çæ ¸å¿å½æ°ï¼</p>
<pre><code class="language-50:158:pkg/controllers/binding/common.go">// ensureWork ensure Work to be created or updated.
func ensureWork(
	ctx context.Context, c client.Client, resourceInterpreter resourceinterpreter.ResourceInterpreter, workload *unstructured.Unstructured,
	overrideManager overridemanager.OverrideManager, binding metav1.Object, scope apiextensionsv1.ResourceScope,
) error {
	bindingSpec := getBindingSpec(binding, scope)
	targetClusters := mergeTargetClusters(bindingSpec.Clusters, bindingSpec.RequiredBy)
	var err error
	var errs []error

	var jobCompletions []workv1alpha2.TargetCluster
	if workload.GetKind() == util.JobKind &amp;&amp; needReviseJobCompletions(bindingSpec.Replicas, bindingSpec.Placement) {
		jobCompletions, err = divideReplicasByJobCompletions(workload, targetClusters)
		if err != nil {
			return err
		}
	}

	for i := range targetClusters {
		targetCluster := targetClusters[i]
		clonedWorkload := workload.DeepCopy()

		workNamespace := names.GenerateExecutionSpaceName(targetCluster.Name)

		// When syncing workloads to member clusters, the controller MUST strictly adhere to the scheduling results
		// specified in bindingSpec.Clusters for replica allocation, rather than using the replicas declared in the
		// workload's resource template.
		// This rule applies regardless of whether the workload distribution mode is "Divided" or "Duplicated".
		// Failing to do so could allow workloads to bypass the quota checks performed by the scheduler
		// (especially during scale-up operations) or skip queue validation when scheduling is suspended.
		if bindingSpec.IsWorkload() {
			if resourceInterpreter.HookEnabled(clonedWorkload.GroupVersionKind(), configv1alpha1.InterpreterOperationReviseReplica) {
				clonedWorkload, err = resourceInterpreter.ReviseReplica(clonedWorkload, int64(targetCluster.Replicas))
				if err != nil {
					klog.ErrorS(err, "Failed to revise replica for workload in cluster.", "workloadKind", workload.GetKind(),
						"workloadNamespace", workload.GetNamespace(), "workloadName", workload.GetName(), "cluster", targetCluster.Name)
					errs = append(errs, err)
					continue
				}
			}
		}

		// jobSpec.Completions specifies the desired number of successfully finished pods the job should be run with.
		// When the replica scheduling policy is set to "divided", jobSpec.Completions should also be divided accordingly.
		// The weight assigned to each cluster roughly equals that cluster's jobSpec.Parallelism value. This approach helps
		// balance the execution time of the job across member clusters.
		if len(jobCompletions) &gt; 0 {
			// Set allocated completions for Job only when the '.spec.completions' field not omitted from resource template.
			// For jobs running with a 'work queue' usually leaves '.spec.completions' unset, in that case we skip
			// setting this field as well.
			// Refer to: https://kubernetes.io/docs/concepts/workloads/controllers/job/#parallel-jobs.
			if err = helper.ApplyReplica(clonedWorkload, int64(jobCompletions[i].Replicas), util.CompletionsField); err != nil {
				klog.ErrorS(err, "Failed to apply Completions for workload in cluster.",
					"workloadKind", clonedWorkload.GetKind(), "workloadNamespace", clonedWorkload.GetNamespace(),
					"workloadName", clonedWorkload.GetName(), "cluster", targetCluster.Name)
				errs = append(errs, err)
				continue
			}
		}

		// We should call ApplyOverridePolicies last, as override rules have the highest priority
		cops, ops, err := overrideManager.ApplyOverridePolicies(clonedWorkload, targetCluster.Name)
		if err != nil {
			klog.ErrorS(err, "Failed to apply overrides for workload in cluster.",
				"workloadKind", clonedWorkload.GetKind(), "workloadNamespace", clonedWorkload.GetNamespace(),
				"workloadName", clonedWorkload.GetName(), "cluster", targetCluster.Name)
			errs = append(errs, err)
			continue
		}
		workLabel := mergeLabel(clonedWorkload, binding, scope)

		annotations := mergeAnnotations(clonedWorkload, binding, scope)
		annotations = mergeConflictResolution(clonedWorkload, bindingSpec.ConflictResolution, annotations)
		annotations, err = RecordAppliedOverrides(cops, ops, annotations)
		if err != nil {
			klog.ErrorS(err, "Failed to record appliedOverrides in cluster.", "cluster", targetCluster.Name)
			errs = append(errs, err)
			continue
		}

		if features.FeatureGate.Enabled(features.StatefulFailoverInjection) {
			// we need to figure out if the targetCluster is in the cluster we are going to migrate application to.
			// If yes, we have to inject the preserved label state to the clonedWorkload.
			clonedWorkload = injectReservedLabelState(bindingSpec, targetCluster, clonedWorkload, len(targetClusters))
		}

		workMeta := metav1.ObjectMeta{
			Name:        names.GenerateWorkName(clonedWorkload.GetKind(), clonedWorkload.GetName(), clonedWorkload.GetNamespace()),
			Namespace:   workNamespace,
			Finalizers:  []string{util.ExecutionControllerFinalizer},
			Labels:      workLabel,
			Annotations: annotations,
		}

		if err = ctrlutil.CreateOrUpdateWork(
			ctx,
			c,
			workMeta,
			clonedWorkload,
			ctrlutil.WithSuspendDispatching(shouldSuspendDispatching(bindingSpec.Suspension, targetCluster)),
			ctrlutil.WithPreserveResourcesOnDeletion(ptr.Deref(bindingSpec.PreserveResourcesOnDeletion, false)),
		); err != nil {
			errs = append(errs, err)
			continue
		}
	}

	return errors.NewAggregate(errs)
}
</code></pre>
<p><strong>å³é®æ­¥éª¤</strong>ï¼</p>
<ol>
<li><strong>è·åç®æ éç¾¤åè¡¨</strong>ï¼ä» <code>bindingSpec.Clusters</code> ä¸­è·åè°åº¦ç»æ</li>
<li><strong>ä¸ºæ¯ä¸ªéç¾¤åå»º Work</strong>ï¼
<ul>
<li>åé workload</li>
<li>æ ¹æ®è°åº¦ç»æè°æ´å¯æ¬æ°ï¼<code>ReviseReplica</code>ï¼</li>
<li>åºç¨ OverridePolicies</li>
<li>åå»º Work å¯¹è±¡</li>
</ul>
</li>
</ol>
<h2 id="årb-çæ°æ®ç»æ">åãRB çæ°æ®ç»æ</h2>
<h3 id="41-resourcebindingspec">4.1 ResourceBindingSpec</h3>
<pre><code class="language-go">type ResourceBindingSpec struct {
    // èµæºå¼ç¨
    Resource workv1alpha2.ObjectReference
    
    // å¯æ¬ä¿¡æ¯ï¼ä» ResourceInterpreter è·åï¼
    Replicas *int32
    ReplicaRequirements *ReplicaRequirements
    Components []Component
    
    // è°åº¦ç¸å³
    Placement *Placement
    Clusters []TargetCluster  // è°åº¦ç»æï¼ç± Scheduler å¡«å
    SchedulerName string
    
    // å¶ä»
    PropagateDeps bool
    Failover *FailoverBehavior
    ConflictResolution ConflictResolution
    // ...
}
</code></pre>
<h3 id="42-å³é®å­æ®µè¯´æ">4.2 å³é®å­æ®µè¯´æ</h3>
<ul>
<li><strong>Resource</strong>: æååå§èµæºå¯¹è±¡ï¼DeploymentãStatefulSet ç­ï¼</li>
<li><strong>Replicas/ReplicaRequirements</strong>: ä»èµæºä¸­æåçå¯æ¬æ°åèµæºéæ±</li>
<li><strong>Clusters</strong>: <strong>ç± Scheduler å¡«å</strong>ï¼åå«ç®æ éç¾¤ååéçå¯æ¬æ°</li>
<li><strong>Placement</strong>: è°åº¦ç­ç¥ï¼ä»åªéè°åº¦ï¼</li>
</ul>
<h2 id="äºå³é®æ¦å¿µå¿«éç´¢å¼">äºãå³é®æ¦å¿µå¿«éç´¢å¼</h2>
<h3 id="51-æ ¸å¿èµæºå¯¹è±¡">5.1 æ ¸å¿èµæºå¯¹è±¡</h3>
<table>
<thead>
<tr>
<th>æ¦å¿µ</th>
<th>å®ä¹</th>
<th>ä½ç¨å</th>
<th>å³é®å­æ®µ</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>PropagationPolicy</strong></td>
<td>å®ä¹èµæºå¦ä½ä¼ æ­çç­ç¥</td>
<td>Namespace</td>
<td>ResourceSelectors, Placement, Priority</td>
</tr>
<tr>
<td><strong>ClusterPropagationPolicy</strong></td>
<td>éç¾¤çº§å«çä¼ æ­ç­ç¥</td>
<td>Cluster</td>
<td>å PropagationPolicy</td>
</tr>
<tr>
<td><strong>ResourceBinding</strong></td>
<td>èµæºå¯¹è±¡åç­ç¥çç»å®</td>
<td>Namespace</td>
<td>Resource, Replicas, Clusters</td>
</tr>
<tr>
<td><strong>ClusterResourceBinding</strong></td>
<td>éç¾¤çº§å«çèµæºç»å®</td>
<td>Cluster</td>
<td>å ResourceBinding</td>
</tr>
<tr>
<td><strong>Work</strong></td>
<td>å®éåéå°æåéç¾¤çå·¥ä½è´è½½</td>
<td>Namespace</td>
<td>Workload.Manifests, Status</td>
</tr>
</tbody>
</table>
<h3 id="52-æ ¸å¿ç»ä»¶">5.2 æ ¸å¿ç»ä»¶</h3>
<table>
<thead>
<tr>
<th>ç»ä»¶</th>
<th>èè´£</th>
<th>å³é®æä½</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ResourceDetector</strong></td>
<td>æ£æµèµæºå¹¶åå»º RB</td>
<td>ApplyPolicy, BuildResourceBinding</td>
</tr>
<tr>
<td><strong>Scheduler</strong></td>
<td>ä¸º RB éæ©ç®æ éç¾¤</td>
<td>å¡«å Spec.Clusters</td>
</tr>
<tr>
<td><strong>ResourceBindingController</strong></td>
<td>å° RB è½¬æ¢ä¸º Work</td>
<td>syncBinding, ensureWork</td>
</tr>
<tr>
<td><strong>ResourceInterpreter</strong></td>
<td>è§£éèµæºç»æ</td>
<td>GetReplicas, ReviseReplica</td>
</tr>
<tr>
<td><strong>ExecutionController</strong></td>
<td>å¨æåéç¾¤æ§è¡ Work</td>
<td>syncToClusters</td>
</tr>
</tbody>
</table>
<h3 id="53-å³é®æ°æ®ç»æ">5.3 å³é®æ°æ®ç»æ</h3>
<h4 id="placementæ¾ç½®è§å">Placementï¼æ¾ç½®è§åï¼</h4>
<pre><code class="language-470:524:pkg/apis/policy/v1alpha1/propagation_types.go">type Placement struct {
	// ClusterAffinity represents scheduling restrictions to a certain set of clusters.
	// Note:
	//   1. ClusterAffinity can not co-exist with ClusterAffinities.
	//   2. If both ClusterAffinity and ClusterAffinities are not set, any cluster
	//      can be scheduling candidates.
	// +optional
	ClusterAffinity *ClusterAffinity `json:"clusterAffinity,omitempty"`

	// ClusterAffinities represents scheduling restrictions to multiple cluster
	// groups that indicated by ClusterAffinityTerm.
	//
	// The scheduler will evaluate these groups one by one in the order they
	// appear in the spec, the group that does not satisfy scheduling restrictions
	// will be ignored which means all clusters in this group will not be selected
	// unless it also belongs to the next group(a cluster could belong to multiple
	// groups).
	//
	// If none of the groups satisfy the scheduling restrictions, then scheduling
	// fails, which means no cluster will be selected.
	//
	// Note:
	//   1. ClusterAffinities can not co-exist with ClusterAffinity.
	//   2. If both ClusterAffinity and ClusterAffinities are not set, any cluster
	//      can be scheduling candidates.
	//
	// Potential use case 1:
	// The private clusters in the local data center could be the main group, and
	// the managed clusters provided by cluster providers could be the secondary
	// group. So that the Karmada scheduler would prefer to schedule workloads
	// to the main group and the second group will only be considered in case of
	// the main group does not satisfy restrictions(like, lack of resources).
	//
	// Potential use case 2:
	// For the disaster recovery scenario, the clusters could be organized to
	// primary and backup groups, the workloads would be scheduled to primary
	// clusters firstly, and when primary cluster fails(like data center power off),
	// Karmada scheduler could migrate workloads to the backup clusters.
	//
	// +optional
	ClusterAffinities []ClusterAffinityTerm `json:"clusterAffinities,omitempty"`

	// ClusterTolerations represents the tolerations.
	// +optional
	ClusterTolerations []corev1.Toleration `json:"clusterTolerations,omitempty"`

	// SpreadConstraints represents a list of the scheduling constraints.
	// +optional
	SpreadConstraints []SpreadConstraint `json:"spreadConstraints,omitempty"`

	// ReplicaScheduling represents the scheduling policy on dealing with the number of replicas
	// when propagating resources that have replicas in spec (e.g. deployments, statefulsets) to member clusters.
	// +optional
	ReplicaScheduling *ReplicaSchedulingStrategy `json:"replicaScheduling,omitempty"`
}
</code></pre>
<p><strong>å­æ®µè¯´æ</strong>ï¼</p>
<ul>
<li><strong>ClusterAffinity</strong>: é¦éåªäºéç¾¤ï¼éè¿æ ç­¾ãå­æ®µãéç¾¤åéæ©ï¼</li>
<li><strong>ClusterTolerations</strong>: éç¾¤å®¹å¿åº¦ï¼ç±»ä¼¼ Pod ç Tolerationsï¼</li>
<li><strong>SpreadConstraints</strong>: åæ£çº¦æï¼å¦ï¼æå¤ 3 ä¸ªéç¾¤ï¼æ¯ä¸ªéç¾¤è³å° 1 ä¸ªå¯æ¬ï¼</li>
<li><strong>ReplicaScheduling</strong>: å¯æ¬è°åº¦ç­ç¥ï¼Duplicated æ Dividedï¼</li>
</ul>
<h4 id="resourcebindingspec">ResourceBindingSpec</h4>
<p>RB ç Spec åå«ï¼</p>
<ul>
<li><strong>Resource</strong>: èµæºå¼ç¨ï¼APIVersion, Kind, Name, Namespace, UIDï¼</li>
<li><strong>Replicas</strong>: å¯æ¬æ°ï¼ä» ResourceInterpreter è·åï¼</li>
<li><strong>ReplicaRequirements</strong>: èµæºéæ±ï¼CPUãåå­ç­ï¼</li>
<li><strong>Clusters</strong>: ç®æ éç¾¤åè¡¨ï¼<strong>ç± Scheduler å¡«å</strong>ï¼</li>
<li><strong>Placement</strong>: æ¾ç½®è§åï¼ä» PropagationPolicy å¤å¶ï¼</li>
<li><strong>Failover</strong>: æéè½¬ç§»è¡ä¸º</li>
</ul>
<p><strong>éè¦</strong>ï¼<code>Spec.Clusters</code> æ¯è°åº¦ç»æï¼ResourceDetector å BindingController é½ä¸ä¼ä¿®æ¹å®ã</p>
<h3 id="54-æ§è¡ç©ºé´execution-space">5.4 æ§è¡ç©ºé´ï¼Execution Spaceï¼</h3>
<p>æ¯ä¸ªæåéç¾¤é½æä¸ä¸ªå¯¹åºç namespaceï¼</p>
<ul>
<li><strong>å½åè§å</strong>: <code>execution-{cluster-name}</code></li>
<li><strong>ä½ç¨</strong>: å­æ¾åéå°è¯¥éç¾¤çææ Work</li>
<li><strong>ç¤ºä¾</strong>:
<ul>
<li>éç¾¤ <code>member1</code> â namespace <code>execution-member1</code></li>
<li>éç¾¤ <code>member2</code> â namespace <code>execution-member2</code></li>
</ul>
</li>
</ul>
<h3 id="55-æéè½¬ç§»failover">5.5 æéè½¬ç§»ï¼Failoverï¼</h3>
<p><strong>FailoverBehavior</strong> å®ä¹äºå¨åºç¨æéç¾¤æéæ¶çè¡ä¸ºï¼</p>
<pre><code class="language-328:392:pkg/apis/policy/v1alpha1/propagation_types.go">// FailoverBehavior indicates failover behaviors in case of an application or
// cluster failure.
type FailoverBehavior struct {
	// Application indicates failover behaviors in case of application failure.
	// If this value is nil, failover is disabled.
	// If set, the PropagateDeps should be true so that the dependencies could
	// be migrated along with the application.
	// +optional
	Application *ApplicationFailoverBehavior `json:"application,omitempty"`

	// Cluster indicates failover behaviors in case of cluster failure.
	// If this value is nil, the failover behavior in case of cluster failure
	// will be controlled by the controller's no-execute-taint-eviction-purge-mode
	// parameter.
	// If set, the failover behavior in case of cluster failure will be defined
	// by this value.
	// +optional
	Cluster *ClusterFailoverBehavior `json:"cluster,omitempty"`
}

// ApplicationFailoverBehavior indicates application failover behaviors.
type ApplicationFailoverBehavior struct {
	// DecisionConditions indicates the decision conditions of performing the failover process.
	// Only when all conditions are met can the failover process be performed.
	// Currently, DecisionConditions includes several conditions:
	// - TolerationSeconds (optional)
	// +required
	DecisionConditions DecisionConditions `json:"decisionConditions"`

	// PurgeMode represents how to deal with the legacy applications on the
	// cluster from which the application is migrated.
	// Valid options are "Directly", "Gracefully", "Never", "Immediately"(deprecated),
	// and "Graciously"(deprecated).
	// Defaults to "Gracefully".
	// +kubebuilder:validation:Enum=Directly;Gracefully;Never;Immediately;Graciously
	// +kubebuilder:default=Gracefully
	// +optional
	PurgeMode PurgeMode `json:"purgeMode,omitempty"`
</code></pre>
<p><strong>PurgeMode è¯´æ</strong>ï¼</p>
<ul>
<li><strong>Directly</strong>: ç«å³å é¤æ§éç¾¤ä¸çåºç¨ï¼ç¨äºä¸è½å®¹å¿ä¸¤ä¸ªå®ä¾åæ¶è¿è¡çåºç¨ï¼å¦ Flinkï¼</li>
<li><strong>Gracefully</strong>: ç­å¾æ°éç¾¤ä¸çåºç¨å¥åº·ååå é¤ï¼é»è®¤ï¼</li>
<li><strong>Never</strong>: ä¸å é¤ï¼æå¨æ¸ç</li>
</ul>
<h2 id="å­æ»ç»">å­ãæ»ç»</h2>
<h3 id="61-å³é®æµç¨åé¡¾">6.1 å³é®æµç¨åé¡¾</h3>
<ol>
<li><strong>èµæºåå»º</strong> â ResourceDetector æ£æµ</li>
<li><strong>ç­ç¥å¹é</strong> â æ¾å°å¹éç PropagationPolicy</li>
<li><strong>åå»º RB</strong> â BuildResourceBindingï¼æ§è½ç¶é¢ï¼Lua èæ¬æ§è¡ï¼</li>
<li><strong>è°åº¦</strong> â Scheduler å¡«å Spec.Clusters</li>
<li><strong>è½¬æ¢ Work</strong> â ResourceBindingController å° RB è½¬æ¢ä¸º Work</li>
<li><strong>ååæ§è¡</strong> â Work åéå°æåéç¾¤æ§è¡</li>
</ol>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-13 14:26">2026-01-13 14:25</span>&nbsp;
<a href="https://www.cnblogs.com/Mephostopheles">Mephostopheles</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19477095);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19477095', targetLink: 'https://www.cnblogs.com/Mephostopheles/p/19477095', title: 'karmada-ResourceBinding (RB) å·¥ä½åçè¯¦è§£' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Anthropic å¦ä½è¯ä¼° AI Agent ]]></title>
    <link>https://www.cnblogs.com/didispace/p/19477137</link>
    <guid>c1cd776368ea5078c0325959df4bed3e</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/didispace/p/19477137" title="åå¸äº 2026-01-13 14:22">
    <span role="heading" aria-level="2">Anthropic å¦ä½è¯ä¼° AI Agent</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="å¼è¨æç ´ç²ç®é£è¡çå¼åå¾ªç¯">å¼è¨ï¼æç ´âç²ç®é£è¡âçå¼åå¾ªç¯</h2>
<p>å¨å¼åAIæºè½ä½çè¿ç¨ä¸­ï¼è®¸å¤å¢éé½ç»åè¿è¿æ ·ççç¹ï¼ä½ ä¿®å¤äºä¸ä¸ªé®é¢ï¼å´å¨ä¸ç»æé´å¼åäºå¦ä¸ä¸ªæ´éè½çé®é¢ãå¦ææ²¡æä¸å¥å¯é çè¯ä¼°ä½ç³»ï¼æ´ä¸ªå¼åè¿ç¨å°±åæ¯å¨âç²ç®é£è¡âï¼å¢éé·å¥è¢«å¨ä¿®å¤çå¾ªç¯ï¼é¾ä»¥èªä¿¡å°åå¸æ°çæ¬ã</p>
<p>ææçè¯ä¼°ï¼evalsï¼æ­£æ¯æç ´è¿ä¸å°å¢çå³é®ãå®è½è®©æºè½ä½å¨è¡ä¸ºä¸çåååæ½å¨é®é¢å¨å½±åç¨æ·ä¹åå°±åå¾æ¸æ°å¯è§ãæ¬æå°ä»Anthropicçæ·±åº¦åäº«ä¸­ï¼æç¼åºäºä¸ªæä»¤äººæè®¶ãæå·å½±ååçæ ¸å¿æè®­ï¼å®ä»¬å°å½»åºæ¹åä½ å¯¹AIæºè½ä½è¯ä¼°ççæ³ã</p>
<h2 id="äºä¸ªå³äºaiæºè½ä½è¯ä¼°çåç´è§æè®­">äºä¸ªå³äºAIæºè½ä½è¯ä¼°çåç´è§æè®­</h2>
<h3 id="æè®­ä¸å«ç­äºä»20ä¸ªå¤±è´¥æ¡ä¾å¼å§æå»ºä½ çè¯ä¼°ä½ç³»">æè®­ä¸ï¼å«ç­äºï¼ä»20ä¸ªå¤±è´¥æ¡ä¾å¼å§æå»ºä½ çè¯ä¼°ä½ç³»</h3>
<p>å¢éå¨é¡¹ç®åæå¸¸å¸¸è®¤ä¸ºæå»ºè¯ä¼°ä½ç³»æ¯ä¸é¡¹å·¨å¤§çâå¼éâï¼ä¼ææ¢äº§åä¸å¸çè¿åº¦ï¼å æ­¤éæ©æ¨è¿ãä»ä»¬è®¤ä¸ºï¼ç­äº§ååè½ç¨³å®ãè§æ¨¡åä¹ååæ¥èèè¯ä¼°ä¹ä¸è¿ã</p>
<p>ç¶èï¼Anthropicçç»éªæ°æ°ç¸åï¼ç­å°æºè½ä½è§æ¨¡ååæå¼å§æå»ºè¯ä¼°ï¼ä½ ä¼éå°æ´å¤§çå°é¾ãæ´éè¦çæ¯ï¼è¯ä¼°çä»·å¼ä¼éçæ¶é´å¤å©å¢é¿ãæ©ææå¥ä¸ä»ä¸ä¼ææ¢ä½ ï¼åèä¼æä¸ºæªæ¥å éè¿­ä»£çå¼æãé£ä¹ï¼è¯¥å¦ä½å¼å§å¢ï¼å¶å®é¨æ§æ¯ä½ æ³è±¡çè¦ä½å¾å¤ï¼</p>
<p>âå®éä¸ï¼ä¸å¥ç±20-50ä¸ªæºèªçå®å¤±è´¥æ¡ä¾çç®åä»»å¡ï¼å°±æ¯ä¸ä¸ªç»ä½³çèµ·ç¹ãâ</p>
<p>è¿ä¸ªè§ç¹ä¹æä»¥éè¦ï¼æ¯å ä¸ºå®å½»åºæç ´äºâè¯ä¼°ä½ç³»å¿é¡»åºå¤§èå®ç¾âçè¯¯åºãè¿ä¸ä»ä»æ¯å³äºé¿åææ¯åºï¼æ´æ¯ä¸ºäºè·å¾å¼åè¿ç¨ä¸­çè½è§åº¦ãç¨ä¸å°ç»çå®çå¤±è´¥æ¡ä¾èµ·æ­¥ï¼å°±ç­äºä¸ºä½ çé©¾é©¶è±å®è£äºç¬¬ä¸æ¹ä»ªè¡¨ï¼è®©ä½ åæ­¢âç²ç®é£è¡âï¼å¼å§ç¨æ°æ®å¯¼èªã</p>
<h3 id="æè®­äºå½ä½ çæºè½ä½å¤±è´¥æ¶å¯è½æ°æ°æ¯å¤©æçä½ç°">æè®­äºï¼å½ä½ çæºè½ä½âå¤±è´¥âæ¶ï¼å¯è½æ°æ°æ¯å¤©æçä½ç°</h3>
<p>æä»¬éå¸¸è®¤ä¸ºï¼è¯ä¼°å¤±è´¥å°±æå³çæºè½ä½ç¯äºéãä½ææ¶ï¼è¿ç§âå¤±è´¥âæ°æ°æ¯å¶åè¶åé åçä½ç°ã</p>
<p>ä»¥Anthropicæå°ç Opus 4.5 æ¨¡åä¸ºä¾ï¼å¨ä¸ä¸ªé¢è®¢èªç­çæµè¯ä»»å¡ä¸­ï¼å®æ²¡æéµå¾ªé¢è®¾çæµç¨ï¼èæ¯éè¿åç°æ¿ç­ä¸­çä¸ä¸ªæ¼æ´ï¼ä¸ºç¨æ·æ¾å°äºä¸ä¸ªæ´å¥½çè§£å³æ¹æ¡ãä»å­é¢ä¸çï¼å®âå¤±è´¥âäºè¿æ¬¡è¯ä¼°ï¼å ä¸ºå®æ²¡ææç§äººç±»è®¾è®¡çæ­»æ¿è·¯å¾æ§è¡ä»»å¡ãä½ä»ç¨æ·çè§åº¦çï¼å®åå¾äºå·¨å¤§çæåã</p>
<p>âå®âå¤±è´¥âäºä¹¦é¢ä¸çè¯ä¼°ï¼ä½å®éä¸ä¸ºç¨æ·æ³åºäºä¸ä¸ªæ´å¥½çè§£å³æ¹æ¡ãâ</p>
<p>è¿ä¸ªä¾å­æ·±å»å°æ­ç¤ºäºéæè¯ä¼°çå±éæ§ãè¿å¹¶éç®åçç¨åºéè¯¯ï¼èæ¯åæ²¿æ¨¡åçä¸ä¸ªå¸åç¹å¾ï¼å®ä»¬çè§£å³é®é¢çè½åï¼å·²ç»å¼å§è¶è¶é£äºåµå¥å¨æ§å¼è¯ä¼°éçãåºäºéæè§åçåè®¾ãä¾èµåµåçè·¯å¾è¯ä¼°æ å¼äºå¦ä¸ç§âç²ç®é£è¡âï¼å ä¸ºå®è®©ä½ å¯¹æ¨¡åèªèº«çå¤©æä¹å¤è§èä¸è§ãå­¦ä¼è¯å«è¿äºâå¤©æè¬âçå¤±è´¥ï¼æè½è®©ä½ çæ­£çæ¸ä½ æè§£éçåæ²¿è½åã</p>
<h3 id="æè®­ä¸è¯ä¼°ç»ç¹èéè¿ç¨">æè®­ä¸ï¼è¯ä¼°ç»ç¹ï¼èéè¿ç¨</h3>
<p>å¨è¯ä¼°æºè½ä½æ¶ï¼ä¸ä¸ªå¸¸è§çéè¯¯æ¯æ£æ¥å®æ¯å¦éµå¾ªäºä¸å¥éå¸¸å·ä½çæ­¥éª¤ï¼æ¯å¦æ¯å¦æç§ç¹å®é¡ºåºè°ç¨äºæäºå·¥å·ãè¿ç§æ¹æ³çä¼¼ä¸¥è°¨ï¼å®åéå¸¸èå¼±ã</p>
<p>Anthropicæåºï¼è¿ç§æ¹æ³âè¿äºåµåï¼ä¼å¯¼è´æµè¯è¿äºèå¼±âï¼å ä¸ºå®ä¼æ©ç½é£äºè¯ä¼°è®¾è®¡èæªæ¾é¢æå°çãåæ ·ææçåæ°æ¹æ³ãä¸ä¸ªæ´ä¼è¶ãæ´å·åç»æ§çåæ³æ¯ï¼è¯ä¼°æºè½ä½æç»äº§åºçææï¼outcomeï¼ï¼èä¸æ¯å®æéåçå·ä½è·¯å¾ï¼pathï¼ã</p>
<p>ä¾å¦ï¼ä¸å¶æ£æ¥ä¸ä¸ªç¼ç æºè½ä½æ¯å¦è°ç¨äºæä¸ªç¹å®çç¼è¾å½æ°ï¼ä¸å¦ç´æ¥è¯ä¼°å®çæçä»£ç æ¯å¦éè¿äºææçååæµè¯ãä¸æ³¨äºè¿ç¨æ¬èº«å°±æ¯ä¸ç§âç²ç®é£è¡âï¼å ä¸ºå®è®©ä½ å¯¹é£äºæ´ä¼è¶ãæªæ¾é¢è§çè§£å³æ¹æ¡è§èä¸è§ãèä¸æ³¨äºæç»ææï¼ææ¯è·å¾æºè½ä½ç©¶ç«ä¸ºç¨æ·å®æäºä»ä¹ççå®è§éãè¿ä¸æè®­å¯¹äºéæ¾AIæºè½ä½çå¨é¨æ½åè³å³éè¦ã</p>
<h3 id="æè®­åä½ çææ å¨è¡¡éä»ä¹ä¸æ¬¡æåè¿æ¯æ¬¡æ¬¡å¯é ">æè®­åï¼ä½ çææ å¨è¡¡éä»ä¹ï¼ä¸æ¬¡æåè¿æ¯æ¬¡æ¬¡å¯é ï¼</h3>
<p>âæä»¬çæºè½ä½æåçæ¯75%ãâ è¿å¥è¯å¬èµ·æ¥ä¸éï¼ä½å®å¯è½éèçå·¨å¤§çè¯¯å¯¼æ§ãä½ éè¦é®ä¸ä¸ªæ´æ·±å±æ¬¡çé®é¢ï¼è¿ä¸ªæåçè¡¡éçæ¯ä»ä¹ï¼æ¯å¤æ¬¡å°è¯ä¸­çä¸æ¬¡æåï¼è¿æ¯æ¯ä¸æ¬¡å°è¯é½å¿é¡»æåï¼è¿éæä¸¤ä¸ªå³é®ææ ï¼pass@k å pass^kã</p>
<ul>
<li>pass@k è¡¡éçæ¯æºè½ä½å¨ k æ¬¡å°è¯ä¸­è³å°æä¸æ¬¡æåçå¯è½æ§ãä½ å¯ä»¥æå®æ¯ä½âå¤æ¬¡å°é¨ï¼åªè¦è¿ä¸ä¸ªçå°±ç®æåâãè¿ä¸ªææ éç¨äºé£äºåªè¦æ¾å°ä¸ä¸ªå¯è¡è§£å°±è¡çåºæ¯ï¼æ¯å¦ä»£ç çææåæææã</li>
<li>pass^k è¡¡éçæ¯æºè½ä½å¨å¨é¨ k æ¬¡å°è¯ä¸­æ¯æ¬¡é½æåçæ¦çãè¿æ´åæ¯âè¦æ±æ¯æ¬¡å°é¨é½å¿é¡»å½ä¸­âãå¯¹äºéè¦é«åº¦å¯é åä¸è´æ§çé¢åå®¢æ·çæºè½ä½æ¥è¯´ï¼è¿ä¸ªææ è³å³éè¦ã</li>
</ul>
<p>è¿ä¸¤ä¸ªææ çå·®å¼å·¨å¤§ãä¾å¦ï¼å¦æä¸ä¸ªæºè½ä½çåæ¬¡æåçï¼pass@1ï¼æ¯75%ï¼é£ä¹å®è¿ç»­æå3æ¬¡çæ¦çï¼pass^3ï¼å°±éª¤éè³42.1875%ï¼çº¦ç­äº42% (0.75 x 0.75 x 0.75)ã</p>
<p>ä¸ºéè¦é«å¯é æ§çé¢åå®¢æ·çæºè½ä½ä½¿ç¨ pass@k ææ ï¼æ¯å¯¼è´ç¨æ·æµå¤±çæ¸©åºãå ä¸º75%çåæ¬¡æåçæ©çäºå¨ä»ä»ä¸æ¬¡äº¤äºä¸­ï¼æ§è½ç¨³å®ççè³ä¸è¶³50%çæ®é·äºå®ãè¿ä¸ä»ä»æ¯ç»è®¡å­¦ä¸çéæ©ï¼æ´æ¯å³å®äº§åå®ä½çæç¥ææ©ãä½ æ¯å¨æé ä¸ä¸ªåææ§çå¤´èé£æ´ä¼ä¼´ï¼åæ¬¡å°è¯æä¸æ¬¡ç»å¦ç¹å­å°±ç®å·¨å¤§æåï¼pass@kï¼ï¼è¿æ¯å¨æå»ºä¸ä¸ªå³é®ä»»å¡åæ¯æå©æï¼ä»»ä½ä½äºè¿ä¹å®ç¾çå¯é æ§é½æ¯ä¸å¯æ¥åçï¼pass^kï¼ï¼ä½ çææ éæ©ï¼å³å®äºä½ çä¼åæ¹åã</p>
<h3 id="æè®­äºä½ æå¼ºå¤§çè¯ä¼°å·¥å·ä¸æ¯ä»£ç èæ¯ä½ çç¼ç">æè®­äºï¼ä½ æå¼ºå¤§çè¯ä¼°å·¥å·ä¸æ¯ä»£ç ï¼èæ¯ä½ çç¼ç</h3>
<p>å¨è¿½æ±èªå¨åçè¿ç¨ä¸­ï¼æä»¬å¾å®¹æè¿åº¦ä¾èµå·å°å°çè¯ä¼°åæ°ãç¶èï¼åæ°å¯è½æ¯éªäººçãä¸ä¸ªè¯¯å¯¼æ§çä½åå¯è½ä¸æ¯å ä¸ºæºè½ä½å¤±è´¥äºï¼èæ¯å ä¸ºè¯ä¼°æ¬èº«å­å¨ç¼ºé·ã</p>
<p>ä¾å¦ï¼Anthropicå¨å¯¹Opus 4.5æ¨¡åè¿è¡CORE-Benchåºåæµè¯æ¶ï¼éè¿äººå·¥å®¡æ¥è®°å½åç°ï¼å¶åæ°ä»æåç42%è·åè³95%ãåå ä½å¨ï¼ä»ä»æ¯ä¿®å¤äºè¯ä¼°ç³»ç»ä¸­çé®é¢ï¼æ¯å¦è¿äºåµåçè¯åæ åï¼å®ä¼å ä¸ºâ96.12âä¸é¢ææ ¼å¼â96.124991â¦âä¸å®å¨å¹éèå¤å®ä¸ºéè¯¯ï¼ãå¦ææ²¡æéè¯»å®æ´çè¯éªè®°å½ï¼transcriptï¼ï¼å¢éä¼éè¯¯å°è®¤ä¸ºæ¨¡åçè½åè¿æ¯å®éæåµè¦å·®ã</p>
<p>âéè¯»è®°å½æ¯éªè¯ä½ çè¯ä¼°æ¯å¦å¨è¡¡éçæ­£éè¦çäºæçæ¹å¼ï¼ä¹æ¯æºè½ä½å¼åçä¸é¡¹å³é®æè½ãâ</p>
<p>ä¿¡ä»»åæ°èä¸å»éè¯»è®°å½ï¼æ¯ç»æçâç²ç®é£è¡âââä»ªè¡¨çæ¾ç¤ºä½ å¨æ¥éä¸å ï¼ä½å®éä¸ä½ å¯è½é£å¾æ¯ä»¥å¾ä»»ä½æ¶åé½é«ï¼åªæ¯ä½ çä»ªè¡¨åäºãèªå¨åå·¥å·åè¯ä½ âæ¯ä»ä¹âï¼åæ°æ¯42%ï¼ï¼ä½åªææ·±å¥å®¡æ¥è®°å½æè½æ­ç¤ºâä¸ºä»ä¹âââä¸æ¯å ä¸ºæ¨¡åä¸è¡ï¼èæ¯å ä¸ºè¯ä¼°æ¬èº«å­å¨ç¼ºé·ã</p>
<h2 id="ç»è®ºå°è¯ä¼°è§ä¸ºæ ¸å¿æç¥èéäºåå¼¥è¡¥">ç»è®ºï¼å°è¯ä¼°è§ä¸ºæ ¸å¿æç¥ï¼èéäºåå¼¥è¡¥</h2>
<p>ææçè¯ä¼°ä¸æ¯å¼åè¿ç¨ä¸­çè´æï¼èæ¯ä¸ç§è½å¤å éå¼åãç¡®ä¿è´¨éçæ ¸å¿æç¥èµäº§ãå®è½å°å¢éæåæ¨¡ç³çâæè§åå·®äºâè½¬åä¸ºäºæ¸æ°ãå¯æä½çè¡¡éææ ã</p>
<p>æåçAIå¢éé½æç½ä¸ä¸ªéçï¼è¯ä¼°ä½ç³»æ¯äº§åä¸å¯æç¼ºçä¸é¨åï¼å¶éè¦æ§ä¸äºäºååæµè¯ä¹äºä¼ ç»è½¯ä»¶ãèä¸ï¼å¨æ¨¡åè½åé£éåå±çæ¶ä»£ï¼ä¸ä¸ªå¼ºå¤§çè¯ä¼°å¥ä»¶å°±æ¯ä½ çæ¤åæ²³ãå®è½è®©ä½ å¨å å¤©åéªè¯å¹¶é¨ç½²æ´åè¿çæ¨¡åï¼èä½ çç«äºå¯¹æå¯è½è¿å¨æ°å¨çæå¨æµè¯ä¸­è¦è¦æ£æã</p>
<p>å¦æä½ çè¯ä¼°ä½ç³»åæ äºä½ æçéçä¸è¥¿ï¼é£ä¹å®æ­£å¨è®²è¿°ä¸ä¸ªå³äºä½ æºè½ä½çæ ¸å¿æäºã</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-13 14:23">2026-01-13 14:22</span>&nbsp;
<a href="https://www.cnblogs.com/didispace">ç¨åºç¿DD</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">1</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19477137);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19477137', targetLink: 'https://www.cnblogs.com/didispace/p/19477137', title: 'Anthropic å¦ä½è¯ä¼° AI Agent' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ openEuler å®è£ K3S ]]></title>
    <link>https://www.cnblogs.com/ghostmen/p/19477120</link>
    <guid>c49a0552c77b5f35d4300626473fb713</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ghostmen/p/19477120" title="åå¸äº 2026-01-13 14:22">
    <span role="heading" aria-level="2">openEuler å®è£ K3S</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="openeuler-å®è£-k3s">openEuler å®è£ K3S</h1>
<blockquote>
<p>åèæç®ï¼</p>
<p>K3Så®æ¹ï¼<a href="https://www.rancher.cn/k3s/" target="_blank" rel="noopener nofollow">https://www.rancher.cn/k3s/</a></p>
<p>K3Så®æ¹ä¸­æææ¡£ï¼<a href="https://docs.rancher.cn/k3s/" target="_blank" rel="noopener nofollow">https://docs.rancher.cn/k3s/</a></p>
<p>ä¸è½½ç½åï¼<a href="https://github.com/k3s-io/k3s/releases/tag/v1.35.0+k3s1" target="_blank" rel="noopener nofollow">https://github.com/k3s-io/k3s/releases/tag/v1.35.0+k3s1</a></p>
</blockquote>
<h2 id="å®è£è¦æ±ä»ç»">å®è£è¦æ±ä»ç»</h2>
<p>K3s éå¸¸è½»å·§ï¼ä½æä¸äºæä½è¦æ±ï¼å¦ä¸æè¿°ã</p>
<p>æ è®ºæ¨æ¯å° K3s éç¾¤éç½®ä¸ºå¨ Docker è¿æ¯ Kubernetes è®¾ç½®ä¸­è¿è¡ï¼è¿è¡ K3s çæ¯ä¸ªèç¹é½åºè¯¥æ»¡è¶³ä»¥ä¸æä½è¦æ±ãä½ å¯è½éè¦æ´å¤çèµæºæ¥æ»¡è¶³ä½ çéæ±ã</p>
<h3 id="åå³æ¡ä»¶">åå³æ¡ä»¶</h3>
<p>-ä¸¤ä¸ªèç¹ä¸è½æç¸åçä¸»æºåãå¦ææ¨çææèç¹é½æç¸åçä¸»æºåï¼è¯·ä½¿ç¨<code>--with-node-id</code>éé¡¹ä¸ºæ¯ä¸ªèç¹æ·»å ä¸ä¸ªéæºåç¼ï¼æèä¸ºæ¨æ·»å å°éç¾¤çæ¯ä¸ªèç¹è®¾è®¡ä¸ä¸ªç¬ç¹çåç§°ï¼ç¨<code>--node-name</code>æ<code>$K3S_NODE_NAME</code>ä¼ éã</p>
<h3 id="æä½ç³»ç»">æä½ç³»ç»</h3>
<p>K3s ææå¨å¤§å¤æ°ç°ä»£ Linux ç³»ç»ä¸è¿è¡ã</p>
<p>æäºæä½ç³»ç»æç¹å®è¦æ±ï¼</p>
<ul>
<li>å¦ææ¨ä½¿ç¨çæ¯<strong>Raspbian Buster</strong>ï¼è¯·æç§<a href="https://docs.rancher.cn/docs/k3s/advanced/#%E5%9C%A8-raspbian-buster-%E4%B8%8A%E5%90%AF%E7%94%A8%E6%97%A7%E7%89%88%E7%9A%84-iptables" target="_blank" rel="noopener nofollow">è¿äºæ­¥éª¤</a>åæ¢å°ä¼ ç»ç iptablesã</li>
<li>å¦ææ¨ä½¿ç¨çæ¯<strong>Alpine Linux</strong>ï¼è¯·æç§<a href="https://docs.rancher.cn/docs/k3s/advanced/#alpine-linux-%E5%AE%89%E8%A3%85%E7%9A%84%E9%A2%9D%E5%A4%96%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C" target="_blank" rel="noopener nofollow">è¿äºæ­¥éª¤</a>è¿è¡é¢å¤è®¾ç½®ã</li>
<li>å¦ææ¨ä½¿ç¨çæ¯<strong>Red Hat/CentOS</strong>ï¼è¯·æç§<a href="https://docs.rancher.cn/docs/k3s/advanced/#Red-Hat-%E5%92%8C-CentOS-%E7%9A%84%E9%A2%9D%E5%A4%96%E5%87%86%E5%A4%87" target="_blank" rel="noopener nofollow">è¿äºæ­¥éª¤</a>è¿è¡é¢å¤è®¾ç½®ã</li>
</ul>
<p>å³äº Rancher ç®¡çç K3s éç¾¤æµè¯äºåªäºæä½ç³»ç»çæ´å¤ä¿¡æ¯ï¼è¯·åè<a href="https://rancher.com/support-maintenance-terms/" target="_blank" rel="noopener nofollow">Rancher æ¯æåç»´æ¤æ¡æ¬¾ã</a></p>
<h3 id="ç¡¬ä»¶">ç¡¬ä»¶</h3>
<p>ç¡¬ä»¶è¦æ±æ ¹æ®æ¨é¨ç½²çè§æ¨¡èååãè¿éååºäºæä½å»ºè®®ã</p>
<h4 id="cpu-ååå­">CPU ååå­</h4>
<ul>
<li>CPUï¼ æä½ 1</li>
<li>åå­ï¼ æä½ 512MBï¼å»ºè®®è³å°ä¸º 1GBï¼</li>
</ul>
<p><a href="https://docs.rancher.cn/docs/k3s/installation/installation-requirements/resource-profiling/" target="_blank" rel="noopener nofollow">æ¬è</a>çæµè¯ç»ææ¯ä¸ºäºç¡®å® K3s agentãå·æå·¥ä½è´è½½ç K3s server åå·æä¸ä¸ª agent ç K3s server çæä½èµæºè¦æ±ãå®è¿åå«äºæå³å¯¹ K3s server å agent å©ç¨çäº§çæå¤§å½±åçåæï¼ä»¥åå¦ä½ä¿æ¤éç¾¤æ°æ®å­å¨åå agent åå·¥ä½è´è½½çå¹²æ°ã</p>
<h4 id="ç£ç">ç£ç</h4>
<p>K3s çæ§è½åå³äºæ°æ®åºçæ§è½ãä¸ºäºç¡®ä¿æä½³éåº¦ï¼æä»¬å»ºè®®å°½å¯è½ä½¿ç¨ SSDãå¨ä½¿ç¨ SD å¡æ eMMC ç ARM è®¾å¤ä¸ï¼ç£çæ§è½ä¼ææä¸åã</p>
<h3 id="ç½ç»">ç½ç»</h3>
<p>K3s server éè¦ 6443 ç«¯å£æè½è¢«ææèç¹è®¿é®ã</p>
<p>å½ä½¿ç¨ Flannel VXLAN æ¶ï¼èç¹éè¦è½å¤éè¿ UDP ç«¯å£ 8472 è®¿é®å¶ä»èç¹ï¼æèå½ä½¿ç¨ Flannel Wireguard åç«¯æ¶ï¼èç¹éè¦è½å¤éè¿ UDP ç«¯å£ 51820 å 51821ï¼ä½¿ç¨ IPv6 æ¶ï¼è®¿é®å¶ä»èç¹ãè¯¥èç¹ä¸åºä¾¦å¬ä»»ä½å¶ä»ç«¯å£ã K3s ä½¿ç¨ååé§éï¼ä»¥ä¾¿èç¹ä¸æå¡å¨å»ºç«åºç«è¿æ¥ï¼å¹¶ä¸ææ kubelet æµéé½éè¿è¯¥é§éè¿è¡ãä½æ¯ï¼å¦æä½ ä¸ä½¿ç¨ Flannel å¹¶æä¾èªå·±çèªå®ä¹ CNIï¼é£ä¹ K3s ä¸éè¦ Flannel æéçç«¯å£ã</p>
<p>å¦æè¦ä½¿ç¨<code>metrics server</code>ï¼åéè¦å¨æ¯ä¸ªèç¹ä¸æå¼ç«¯å£ 10250 ç«¯å£ã</p>
<p>å¦æè®¡åä½¿ç¨åµå¥å¼ etcd å®ç°é«å¯ç¨æ§ï¼å server èç¹å¿é¡»å¨ç«¯å£ 2379 å 2380 ä¸å¯ä»¥ç¸äºè®¿é®ã</p>
<p>éè¦</p>
<p>èç¹ä¸ç VXLAN ç«¯å£ä¸åºå¬å¼æ´é²ï¼å ä¸ºå®å¬å¼äºéç¾¤ç½ç»ï¼ä»»ä½äººé½å¯ä»¥è®¿é®å®ãåºå¨ç¦æ­¢è®¿é®ç«¯å£ 8472 çé²ç«å¢/å®å¨ç»åé¢è¿è¡èç¹ã</p>
<blockquote>
<p><strong>è­¦åï¼</strong> Flannel ä¾é  <a href="https://www.cni.dev/plugins/current/main/bridge/" target="_blank" rel="noopener nofollow">Bridge CNI plugin</a> æ¥åå»ºä¸ä¸ªå¯ä»¥äº¤æ¢æµéç L2 ç½ç»ãå·æ NET_RAW åè½ç Rogue pod å¯ä»¥æ»¥ç¨è¯¥ L2 ç½ç»æ¥åå¨æ»å»ï¼å¦ [ARP æ¬ºéª](<a href="https://static.sched.com/hosted_files/kccncna19/72/ARP" target="_blank" rel="noopener nofollow">https://static.sched.com/hosted_files/kccncna19/72/ARP</a> DNS spoof.pdf)ãå æ­¤ï¼æ­£å¦ <a href="https://kubernetes.io/docs/concepts/security/pod-security-standards/" target="_blank" rel="noopener nofollow">kubernetes ææ¡£</a>ä¸­è®°è½½çé£æ ·ï¼è¯·è®¾ç½®ä¸ä¸ªåééç½®æä»¶ï¼å¨ä¸å¯ä¿¡ä»»ç pod ä¸ç¦ç¨ NET_RAWã</p>
</blockquote>
<p>K3s Server èç¹çå¥ç«è§åå¦ä¸ï¼</p>
<table>
<thead>
<tr>
<th>åè®®</th>
<th>ç«¯å£</th>
<th>æº</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>TCP</td>
<td>6443</td>
<td>K3s agent èç¹</td>
<td>Kubernetes API Server</td>
</tr>
<tr>
<td>UDP</td>
<td>8472</td>
<td>K3s server å agent èç¹</td>
<td>ä»å¯¹ Flannel VXLAN éè¦</td>
</tr>
<tr>
<td>UDP</td>
<td>51820</td>
<td>K3s server å agent èç¹</td>
<td>åªæ Flannel Wireguard åç«¯éè¦</td>
</tr>
<tr>
<td>UDP</td>
<td>51821</td>
<td>K3s server å agent èç¹</td>
<td>åªæä½¿ç¨ IPv6 ç Flannel Wireguard åç«¯æéè¦</td>
</tr>
<tr>
<td>TCP</td>
<td>10250</td>
<td>K3s server å agent èç¹</td>
<td>Kubelet metrics</td>
</tr>
<tr>
<td>TCP</td>
<td>2379-2380</td>
<td>K3s server èç¹</td>
<td>åªæåµå¥å¼ etcd é«å¯ç¨æéè¦</td>
</tr>
</tbody>
</table>
<p>éå¸¸æåµä¸ï¼ææåºç«æµéé½æ¯åè®¸çã</p>
<h2 id="å®è£éé¡¹ä»ç»">å®è£éé¡¹ä»ç»</h2>
<h3 id="ä½¿ç¨èæ¬å®è£çéé¡¹">ä½¿ç¨èæ¬å®è£çéé¡¹</h3>
<p>æ­£å¦<a href="https://docs.rancher.cn/docs/k3s/quick-start/" target="_blank" rel="noopener nofollow">å¿«éå¯å¨æå</a>ä¸­æå°çé£æ ·ï¼ä½ å¯ä»¥ä½¿ç¨<a href="https://get.k3s.io/" target="_blank" rel="noopener nofollow">https://get.k3s.io</a> æä¾çå®è£èæ¬å¨åºäº systemd å openrc çç³»ç»ä¸å®è£ K3s ä½ä¸ºæå¡ã</p>
<p>è¯¥å½ä»¤çæç®åå½¢å¼å¦ä¸ï¼</p>
<pre><code class="language-sh">curl -sfL https://get.k3s.io | sh -
</code></pre>
<p>ä½¿ç¨æ­¤æ¹æ³å®è£ K3s æ¶ï¼å¯ä½¿ç¨ä»¥ä¸ç¯å¢åéæ¥éç½®å®è£:</p>
<table>
<thead>
<tr>
<th>Environment Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>INSTALL_K3S_SKIP_DOWNLOAD</code></td>
<td>å¦æè®¾ç½®ä¸º "true "å°ä¸ä¼ä¸è½½ K3s çåå¸å¼æäºè¿å¶ã</td>
</tr>
<tr>
<td><code>INSTALL_K3S_SYMLINK</code></td>
<td>é»è®¤æåµä¸ï¼å¦æè·¯å¾ä¸­ä¸å­å¨å½ä»¤ï¼å°ä¸º kubectlãcrictl å ctr äºè¿å¶æä»¶åå»ºç¬¦å·é¾æ¥ãå¦æè®¾ç½®ä¸º'skip'å°ä¸ä¼åå»ºç¬¦å·é¾æ¥ï¼è'force'å°è¦çã</td>
</tr>
<tr>
<td><code>INSTALL_K3S_SKIP_ENABLE</code></td>
<td>å¦æè®¾ç½®ä¸º "true"ï¼å°ä¸å¯ç¨æå¯å¨ K3s æå¡ã</td>
</tr>
<tr>
<td><code>INSTALL_K3S_SKIP_START</code></td>
<td>å¦æè®¾ç½®ä¸º "true "å°ä¸ä¼å¯å¨ K3s æå¡ã</td>
</tr>
<tr>
<td><code>INSTALL_K3S_VERSION</code></td>
<td>ä» Github ä¸è½½ K3s ççæ¬ãå¦ææ²¡ææå®ï¼å°å°è¯ä»"stable"é¢éä¸è½½ã</td>
</tr>
<tr>
<td><code>INSTALL_K3S_BIN_DIR</code></td>
<td>å®è£ K3s äºè¿å¶æä»¶ãé¾æ¥åå¸è½½èæ¬çç®å½ï¼æèä½¿ç¨<code>/usr/local/bin</code>ä½ä¸ºé»è®¤ç®å½ã</td>
</tr>
<tr>
<td><code>INSTALL_K3S_BIN_DIR_READ_ONLY</code></td>
<td>å¦æè®¾ç½®ä¸º true å°ä¸ä¼ææä»¶åå¥<code>INSTALL_K3S_BIN_DIR</code>ï¼å¼ºå¶è®¾ç½®<code>INSTALL_K3S_SKIP_DOWNLOAD=true</code>ã</td>
</tr>
<tr>
<td><code>INSTALL_K3S_SYSTEMD_DIR</code></td>
<td>å®è£ systemd æå¡åç¯å¢æä»¶çç®å½ï¼æèä½¿ç¨<code>/etc/systemd/system</code>ä½ä¸ºé»è®¤ç®å½ã</td>
</tr>
<tr>
<td><code>INSTALL_K3S_EXEC</code></td>
<td>å¸¦ææ å¿çå½ä»¤ï¼ç¨äºå¨æå¡ä¸­å¯å¨ K3sãå¦ææªæå®å½ä»¤ï¼å¹¶ä¸è®¾ç½®äº<code>K3S_URL</code>ï¼å®å°é»è®¤ä¸ºâagentâãå¦ææªè®¾ç½®<code>K3S_URL</code>ï¼å®å°é»è®¤ä¸ºâserverâãè¦è·å¾å¸®å©ï¼è¯·åè<a href="https://docs.rancher.cn/docs/k3s/installation/install-options/how-to-flags/#%E7%A4%BA%E4%BE%8B-b-install_k3s_exec" target="_blank" rel="noopener nofollow">æ­¤ç¤ºä¾ã</a></td>
</tr>
<tr>
<td><code>INSTALL_K3S_NAME</code></td>
<td>è¦åå»ºç systemd æå¡åç§°ï¼å¦æä»¥æå¡å¨æ¹å¼è¿è¡ k3sï¼åé»è®¤ä¸º'k3s'ï¼å¦æä»¥ agent æ¹å¼è¿è¡ k3sï¼åé»è®¤ä¸º'k3s-agent'ãå¦ææå®äºæå¡åï¼åæå¡åå°ä»¥'k3s-'ä¸ºåç¼ã</td>
</tr>
<tr>
<td><code>INSTALL_K3S_TYPE</code></td>
<td>è¦åå»ºç systemd æå¡ç±»åï¼å¦ææ²¡ææå®ï¼å°é»è®¤ä½¿ç¨ K3s exec å½ä»¤ã</td>
</tr>
<tr>
<td><code>INSTALL_K3S_SELINUX_WARN</code></td>
<td>å¦æè®¾ç½®ä¸º trueï¼åå¨æ²¡ææ¾å° k3s-selinux ç­ç¥çæåµä¸å°ç»§ç»­ã</td>
</tr>
<tr>
<td><code>INSTALL_K3S_SKIP_SELINUX_RPM</code></td>
<td>å¦æè®¾ç½®ä¸º "true "å°è·³è¿ k3s RPM çèªå¨å®è£ã</td>
</tr>
<tr>
<td><code>INSTALL_K3S_CHANNEL_URL</code></td>
<td>ç¨äºè·å K3s ä¸è½½ç½åçé¢é URLãé»è®¤ä¸º <a href="https://update.k3s.io/v1-release/channels" target="_blank" rel="noopener nofollow">https://update.k3s.io/v1-release/channels</a> ã</td>
</tr>
<tr>
<td><code>INSTALL_K3S_CHANNEL</code></td>
<td>ç¨äºè·å K3s ä¸è½½ URL çééãé»è®¤å¼ä¸º "stable"ãéé¡¹åæ¬ï¼<code>stable</code>, <code>latest</code>, <code>testing</code>ã</td>
</tr>
<tr>
<td><code>K3S_CONFIG_FILE</code></td>
<td>æå®éç½®æä»¶çä½ç½®ãé»è®¤ç®å½ä¸º<code>/etc/rancher/k3s/config.yaml</code>ã</td>
</tr>
<tr>
<td><code>K3S_TOKEN</code></td>
<td>ç¨äºå° server æ agent å å¥éç¾¤çå±äº« secretã</td>
</tr>
<tr>
<td><code>K3S_TOKEN_FILE</code></td>
<td>æå® <code>cluster-secret</code>,<code>token</code> çæä»¶ç®å½ã</td>
</tr>
</tbody>
</table>
<p>è¿ä¸ªä¾å­ä»ç»äºå¦ä½ä½¿ç¨ä¸è¿°çç¯å¢åéï¼å¨ç®¡éä¹åï¼ï¼</p>
<pre><code class="language-bash">curl -sfL https://get.k3s.io | INSTALL_K3S_CHANNEL=latest sh -
</code></pre>
<p>ä»¥ "K3S_"å¼å¤´çç¯å¢åéå°è¢«ä¿çï¼ä¾ systemd å openrc æå¡ä½¿ç¨ã</p>
<p>å¨æ²¡ææç¡®è®¾ç½® exec å½ä»¤çæåµä¸è®¾ç½®<code>K3S_URL</code>ï¼ä¼å°å½ä»¤é»è®¤ä¸º "agent"ã</p>
<p>è¿è¡ agent æ¶è¿å¿é¡»è®¾ç½®<code>K3S_TOKEN</code>ã</p>
<h3 id="ä»äºè¿å¶å®è£çéé¡¹">ä»äºè¿å¶å®è£çéé¡¹</h3>
<p>å¦ä¸æè¿°ï¼å®è£èæ¬ä¸»è¦æ¯éç½® K3s ä½ä¸ºæå¡è¿è¡ãå¦æä½ éæ©ä¸ä½¿ç¨èæ¬ï¼ä½ å¯ä»¥éè¿ä»æä»¬ç<a href="https://github.com/rancher/k3s/releases/latest" target="_blank" rel="noopener nofollow">åå¸é¡µé¢</a>ä¸è½½äºè¿å¶æä»¶ï¼å°å¶æ¾å¨ä½ çè·¯å¾ä¸ï¼ç¶åæ§è¡å®æ¥è¿è¡ K3sãK3s äºè¿å¶æ¯æä»¥ä¸å½ä»¤ï¼</p>
<table>
<thead>
<tr>
<th>å½ä»¤</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>k3s server</code></td>
<td>è¿è¡ K3s serverï¼å®è¿å°å¯å¨ Kubernetes control-plane ç»ä»¶ï¼å¦ API server, controller-manager, å schedulerã</td>
</tr>
<tr>
<td><code>k3s agent</code></td>
<td>è¿è¡ K3s agent èç¹ãè¿å°ä½¿ K3s ä½ä¸ºå·¥ä½èç¹è¿è¡ï¼å¯å¨ Kubernetes èç¹æå¡<code>kubelet</code>å<code>kube-proxy</code>ã</td>
</tr>
<tr>
<td><code>k3s kubectl</code></td>
<td>è¿è¡åµå¥å¼<a href="https://kubernetes.io/docs/reference/kubectl/overview/" target="_blank" rel="noopener nofollow">kubectl</a> CLIãå¦ææ²¡æè®¾ç½®<code>KUBECONFIG</code>ç¯å¢åéï¼å½å¯å¨ K3s æå¡å¨èç¹æ¶ï¼å°èªå¨å°è¯ä½¿ç¨å¨<code>/etc/rancher/k3s/k3s.yaml</code>åå»ºçéç½®æä»¶ã</td>
</tr>
<tr>
<td><code>k3s crictl</code></td>
<td>è¿è¡ä¸ä¸ªåµå¥å¼<a href="https://github.com/kubernetes-sigs/cri-tools/blob/master/docs/crictl.md" target="_blank" rel="noopener nofollow">crictl</a>ãè¿æ¯ä¸ä¸ªç¨äºä¸ Kubernetes çå®¹å¨è¿è¡æ¶æ¥å£ï¼CRIï¼äº¤äºç CLIãå¯¹è°è¯å¾æç¨ã</td>
</tr>
<tr>
<td><code>k3s ctr</code></td>
<td>è¿è¡ä¸ä¸ªåµå¥å¼ç<a href="https://github.com/projectatomic/containerd/blob/master/docs/cli.md" target="_blank" rel="noopener nofollow">ctr</a>ãè¿æ¯ä¸º containerdï¼K3s ä½¿ç¨çå®¹å¨å®æ¤è¿ç¨ï¼æä¾ç CLIãå¯¹è°è¯å¾æç¨ã</td>
</tr>
<tr>
<td><code>k3s help</code></td>
<td>æ¾ç¤ºä¸ä¸ªå½ä»¤çå½ä»¤åè¡¨æå¸®å©ã</td>
</tr>
</tbody>
</table>
<p><code>k3s server</code> å <code>k3s agent</code> å½ä»¤æé¢å¤çéç½®éé¡¹ï¼å¯ä»¥éè¿ <code>k3s server --help</code> æ <code>k3s agent --help</code> æ¥ç.</p>
<h2 id="æ­£å¼å®è£">æ­£å¼å®è£</h2>
<p>æ¬æå®è£éæ©ä¸ºäºè¿å¶æä»¶å®è£ï¼åå ä¸ºå®è£ç¯å¢ä¸å¯èç½</p>
<p>ä¸è½½é¾æ¥ï¼<a href="https://github.com/k3s-io/k3s/releases" target="_blank" rel="noopener nofollow">https://github.com/k3s-io/k3s/releases</a></p>
<p>ä¸è½½å®è£æä»¶<br>
<img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1744503/202601/1744503-20260113142140066-2137878236.png" class="lazyload"></p>
<h3 id="æ­¥éª¤1éç½®ç®å½ç»æ">æ­¥éª¤1ï¼éç½®ç®å½ç»æ</h3>
<pre><code class="language-bash"># åå»ºå¿è¦çç®å½
sudo mkdir -p /var/lib/rancher/k3s/agent/images/
sudo mkdir -p /usr/local/bin/

# å°ç¦»çº¿éåå¤å¶å°æ­£ç¡®ä½ç½®
sudo cp /tmp/k3s-airgap-images-amd64.tar.gz /var/lib/rancher/k3s/agent/images/

# å®è£ k3s äºè¿å¶æä»¶
sudo cp /tmp/k3s /usr/local/bin/
sudo chmod +x /usr/local/bin/k3s
</code></pre>
<h3 id="æ­¥éª¤2å¯¼å¥å®¹å¨éå">æ­¥éª¤2ï¼å¯¼å¥å®¹å¨éå</h3>
<pre><code class="language-bash"># æ¹æ³1ï¼ä½¿ç¨ k3s ctr å½ä»¤å¯¼å¥ï¼æ¨èï¼
sudo k3s ctr images import /var/lib/rancher/k3s/agent/images/k3s-airgap-images-amd64.tar.gz

# æ¹æ³2ï¼å¦æå·²å®è£ K3sï¼ä½¿ç¨ k3s å½ä»¤å¯¼å¥
sudo k3s ctr images import /var/lib/rancher/k3s/agent/images/k3s-airgap-images-amd64.tar.gz
</code></pre>
<h3 id="æ­¥éª¤3å®è£-k3sç¦»çº¿æ¨¡å¼">æ­¥éª¤3ï¼å®è£ K3sï¼ç¦»çº¿æ¨¡å¼ï¼</h3>
<p><strong>æ¹æ³Aï¼ä½¿ç¨ç¦»çº¿å®è£èæ¬</strong></p>
<pre><code class="language-bash"># 1. ä¸è½½å®è£èæ¬ï¼å¨è½èç½çæºå¨ä¸ï¼
curl -sfL https://get.k3s.io &gt; install.sh
chmod +x install.sh

# 2. ä¼ è¾å° openEuler å¹¶å®è£
INSTALL_K3S_SKIP_DOWNLOAD=true \
INSTALL_K3S_EXEC="server" \
./install.sh
</code></pre>
<p><strong>æ¹æ³Bï¼æå¨å®è£</strong></p>
<pre><code class="language-bash"># åå»ºéç½®æä»¶
sudo tee /etc/systemd/system/k3s.service &lt;&lt; EOF
[Unit]
Description=Lightweight Kubernetes
Documentation=https://k3s.io
After=network-online.target

[Service]
Type=notify
EnvironmentFile=/etc/systemd/system/k3s.service.env
ExecStartPre=-/sbin/modprobe br_netfilter
ExecStartPre=-/sbin/modprobe overlay
ExecStart=/usr/local/bin/k3s server
KillMode=process
Delegate=yes
LimitNOFILE=infinity
LimitNPROC=infinity
LimitCORE=infinity
TasksMax=infinity

[Install]
WantedBy=multi-user.target
EOF

# åå»ºç¯å¢åéæä»¶
sudo tee /etc/systemd/system/k3s.service.env &lt;&lt; EOF
K3S_TOKEN=my-secret-token
K3S_KUBECONFIG_MODE=644
EOF
</code></pre>
<h3 id="æ­¥éª¤4å¯å¨-k3s">æ­¥éª¤4ï¼å¯å¨ K3s</h3>
<pre><code class="language-bash"># å¯å¨æå¡
sudo systemctl daemon-reload
sudo systemctl enable k3s
sudo systemctl start k3s

# æ£æ¥ç¶æ
sudo systemctl status k3s
sudo journalctl -u k3s -f

# éªè¯å®è£
sudo k3s kubectl get nodes
sudo k3s kubectl get pods -A
</code></pre>
<h2 id="3-å®è£-k3s-agentå¦æéè¦">3. å®è£ K3s Agentï¼å¦æéè¦ï¼</h2>
<pre><code class="language-bash"># å¨ agent èç¹ä¸æ§è¡
INSTALL_K3S_SKIP_DOWNLOAD=true \
K3S_URL=https://server-ip:6443 \
K3S_TOKEN=your-token-from-server \
./install.sh agent
</code></pre>
<h2 id="4-éç½®-k3så¯é">4. éç½® K3sï¼å¯éï¼</h2>
<h3 id="éç½®-k3s-åæ°">éç½® K3s åæ°</h3>
<pre><code class="language-bash"># ç¼è¾éç½®æä»¶
sudo tee /etc/rancher/k3s/config.yaml &lt;&lt; EOF
write-kubeconfig-mode: "0644"
tls-san:
  - "k3s-server.local"
  - "192.168.1.100"
node-ip: "192.168.1.100"
advertise-address: "192.168.1.100"
EOF

# éå¯æå¡
sudo systemctl restart k3s
</code></pre>
<h3 id="éç½®å®¹å¨è¿è¡æ¶">éç½®å®¹å¨è¿è¡æ¶</h3>
<pre><code class="language-bash"># å¦æéè¦ä½¿ç¨ Docker èä¸æ¯ containerd
curl -sfL https://get.k3s.io | INSTALL_K3S_EXEC="--docker" sh -

# ç¦»çº¿æ¨¡å¼ä¸
INSTALL_K3S_SKIP_DOWNLOAD=true \
INSTALL_K3S_EXEC="server --docker" \
./install.sh
</code></pre>
<h2 id="5-éªè¯å®è£">5. éªè¯å®è£</h2>
<pre><code class="language-bash"># æ£æ¥ K3s çæ¬
k3s --version

# æ£æ¥éç¾¤ç¶æ
sudo k3s kubectl cluster-info

# æ£æ¥ææ Pod
sudo k3s kubectl get pods --all-namespaces

# æ¥çæå¡æ¥å¿
sudo journalctl -u k3s -f
</code></pre>
<h2 id="6-å¸¸è§é®é¢è§£å³">6. å¸¸è§é®é¢è§£å³</h2>
<h3 id="é®é¢1éåå¯¼å¥å¤±è´¥">é®é¢1ï¼éåå¯¼å¥å¤±è´¥</h3>
<pre><code class="language-bash"># æ£æ¥éåæä»¶å®æ´æ§
tar -tzf /var/lib/rancher/k3s/agent/images/k3s-airgap-images-amd64.tar.gz | head

# éæ°å¯¼å¥
sudo rm -rf /var/lib/rancher/k3s/agent/images/*
sudo cp k3s-airgap-images-amd64.tar.gz /var/lib/rancher/k3s/agent/images/
sudo k3s ctr images import /var/lib/rancher/k3s/agent/images/k3s-airgap-images-amd64.tar.gz
</code></pre>
<h3 id="é®é¢2æå¡å¯å¨å¤±è´¥">é®é¢2ï¼æå¡å¯å¨å¤±è´¥</h3>
<pre><code class="language-bash"># æ¥çè¯¦ç»æ¥å¿
sudo journalctl -u k3s -n 50 --no-pager

# æ£æ¥ç«¯å£å ç¨
sudo netstat -tlnp | grep 6443

# æ¸çåéæ°å®è£
sudo /usr/local/bin/k3s-uninstall.sh
</code></pre>
<h3 id="é®é¢3openeuler-ç¹å®éç½®">é®é¢3ï¼openEuler ç¹å®éç½®</h3>
<pre><code class="language-bash"># ç¦ç¨é²ç«å¢ï¼æ ¹æ®å®ééæ±ï¼
sudo systemctl stop firewalld
sudo systemctl disable firewalld

# æèéç½®é²ç«å¢è§å
sudo firewall-cmd --permanent --add-port=6443/tcp
sudo firewall-cmd --permanent --add-port=8472/udp
sudo firewall-cmd --reload

# éç½® SELinuxï¼å¦æå¯ç¨ï¼
sudo setenforce 0
sudo sed -i 's/SELINUX=enforcing/SELINUX=permissive/g' /etc/selinux/config
</code></pre>
<h2 id="7-ç®¡çå½ä»¤">7. ç®¡çå½ä»¤</h2>
<pre><code class="language-bash"># åæ­¢ K3s
sudo systemctl stop k3s

# éå¯ K3s
sudo systemctl restart k3s

# å¸è½½ K3s
sudo /usr/local/bin/k3s-uninstall.sh

# æ¥ç K3s éç½®
sudo cat /etc/rancher/k3s/k3s.yaml
</code></pre>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-13 14:22">2026-01-13 14:22</span>&nbsp;
<a href="https://www.cnblogs.com/ghostmen">ghostmen</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19477120);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19477120', targetLink: 'https://www.cnblogs.com/ghostmen/p/19477120', title: 'openEuler å®è£ K3S' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ .NET Aspire æ¦è¿° ]]></title>
    <link>https://www.cnblogs.com/powertoolsteam/p/19477015</link>
    <guid>fabc874ab4a7e40a1f4574d0f4d7e8d5</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/powertoolsteam/p/19477015" title="åå¸äº 2026-01-13 14:05">
    <span role="heading" aria-level="2">.NET Aspire æ¦è¿°</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="å¼è¨">å¼è¨</h2>
<p>.NET Aspire æ¯ Microsoft å¨ Build 2024 ä¸æ¨åºçä¸ä¸ªå¼æºæ¡æ¶ï¼æ¨å¨ç®åä½¿ç¨ .NET 8 åæ´é«çæ¬åå»ºåå¸å¼äºåçåºç¨çæµç¨ãå®éè¿æä¾ä¸å¥å·¥å·ãæ¨¡æ¿åæä½³å®è·µï¼è®©å¼åèè½å¤æ´ä¸æ³¨äºä¸å¡é»è¾èéåºç¡è®¾æ½çæ­å»ºãæ¬æå°è¯¦ç»ä»ç» .NET Aspire çæ ¸å¿åè½ãä¼å¿ä»¥åå¦ä½å¿«éä¸æä½¿ç¨è¿ä¸åæ°æ¡æ¶ã</p>
<h3 id="ä»ä¹æ¯-net-aspire">ä»ä¹æ¯ .NET Aspireï¼</h3>
<p>.NET Aspire æ¯ä¸ä¸ªå¼æºæ¡æ¶ï¼å®ç»åäºä»¥ä¸å³é®åç´ ï¼</p>
<ul>
<li>å¯ç»ååºç¨çå·¥å·ãæ¨¡æ¿å NuGet å</li>
<li>æ¬å°ç¼æä¸é¨ç½²è½å</li>
<li>åç½®å¯è§æµæ§åé¥æµ</li>
<li>ä¸ RedisãPostgreSQLãå¥åº·æ£æ¥ç­æå¡çç®åéæ</li>
</ul>
<p>å¶ç®æ æ¯è®©å¼åäººåä¸æ³¨äºä¸å¡é»è¾ï¼èéåºç¡è®¾æ½æµç¨ï¼éè¿æä¾ä¸ä¸ªæä¸»è§ãåå¤å¥½çäº§ç¯å¢çåºçº¿æ¥å®ç°è¿ä¸ç®æ ã</p>
<h3 id="æ ¸å¿åè½">æ ¸å¿åè½</h3>
<h4 id="1-ç¼æä¸åºç¨ç»å">1. ç¼æä¸åºç¨ç»å</h4>
<p>Aspire çæ ¸å¿æ¯ AppHostï¼è¿æ¯ä¸ä¸ªä¸­å¤®ç¼æå¨ï¼å°å¤ä¸ª .NET é¡¹ç®ç»åæå¯è¿è¡çåå¸å¼ç³»ç»ãæäºå®ï¼å¼åèåªéä¸ä¸ªå½ä»¤å°±è½å¨æ¬å°è¿è¡æ´ä¸ªåºç¨ï¼åæ¬ API æå¡ãåç«¯ãæ°æ®åºãç¼å­åæ¶æ¯éåãAspire è´è´£å¤çä¾èµãå®¹å¨è®¾ç½®åæå¡é´éç½®ãè¿ç§æ¹æ³è§£å³äºæ¬å° Docker Compose è®¾ç½®çå¤ææ§ï¼å¹¶ç¡®ä¿äºå¼åä¸çäº§ç¯å¢çä¸è´æ§ã</p>
<h4 id="2-ææè§çç»ä»¶ä¸æå¡é»è®¤">2. ææè§çç»ä»¶ä¸æå¡é»è®¤</h4>
<p>Aspire åå« ServiceDefaults åºï¼å®é¢è£äºä»¥ä¸æä½³å®è·µéç½®ï¼</p>
<ul>
<li>OpenTelemetryï¼æ¥å¿è®°å½ãåå¸å¼è¿½è¸ªãææ ï¼</li>
<li>å¥åº·æ£æ¥</li>
<li>æå¡åç°ï¼å¨æè¿æ¥æ³¨å¥ï¼</li>
</ul>
<p>è¿äºé»è®¤è®¾ç½®å¯ä»¥éè¿ä¸è¡ä»£ç ï¼<code>builder.AddServiceDefaults()</code>ï¼å¯ç¨ï¼å³æ¶ä¸ºæå¡å¸¦æ¥å¼¹æ§åå¯è§å¯æ§ã</p>
<h4 id="3-å¿«éè®¾ç½®çæ¨¡æ¿ä¸å·¥å·">3. å¿«éè®¾ç½®çæ¨¡æ¿ä¸å·¥å·</h4>
<p>Aspire æ¯æ Visual Studioï¼v17.10+ï¼ãVisual Studio Codeï¼éå C# Dev Kitï¼ä»¥åéè¿æ¨¡æ¿å®ç°ç .NET CLIãæä¾çæ¨¡æ¿åæ¬"Aspire Application"å"Aspire Starter Application"ï¼åèéå¤äº Blazor åç«¯ï¼ä¾¿äºå¿«éååå¶ä½ãè¿äºæ¨¡æ¿ä¸º AppHostãServiceDefaults ä»¥åå¯éçç½é¡µæ API é¡¹ç®æä¾äºæ¯æ¶ï¼å¤§å¤§ç¼©ç­äºä¸çº¿æ¶é´ã</p>
<h4 id="4-å¼åèä»ªè¡¨çä¸å¯è§å¯æ§">4. å¼åèä»ªè¡¨çä¸å¯è§å¯æ§</h4>
<p>è¿è¡ Aspire åºç¨ä¼å¼¹åºä¸ä¸ªåç½®ä»ªè¡¨çï¼æ¾ç¤ºï¼</p>
<ul>
<li>æ¥å¿</li>
<li>è·è¸ªä¸åå¸å¼è¯·æ±è·¯å¾</li>
<li>è¿è¡æ¶ææ </li>
<li>æ´»å¨å®¹å¨ä¸ç¯å¢åé</li>
</ul>
<p>ä»ªè¡¨çéå¸¸è¿åå« GitHub Copilot éæï¼ç¨äºå¼å¯¼è°è¯åæ´å¯ã</p>
<h4 id="5-çµæ´»é¨ç½²éé¡¹">5. çµæ´»é¨ç½²éé¡¹</h4>
<p>ç¼æç»åå¯ä»¥å¯¼åºå°é¨ç½²æ¸åä¸­ï¼ä¾¿äºé¨ç½²å°ï¼</p>
<ul>
<li>Azure Container Apps</li>
<li>Kubernetes éç¾¤</li>
<li>ECSãAWS Lambda æä»»ä½å®¹å¨å¹³å°</li>
</ul>
<p>è¿ç§æ¹å¼é¿åäºé¨ç½²æ©æ¦ï¼åæ¶ä¿æéç½®ä¸è´æ§ã</p>
<h3 id="ä¸ºä»ä¹è¦ä½¿ç¨-net-aspire">ä¸ºä»ä¹è¦ä½¿ç¨ .NET Aspireï¼</h3>
<h4 id="æåå¼åèçäº§å">æåå¼åèçäº§å</h4>
<p>Aspire ç®åäºæ¨¡æ¿æµç¨ï¼ä¸åéè¦æå¨ç®¡çæå¡å¸çº¿ãå æ è®¾ç½®æé¥æµãæ°å¼åèçå¥èéåº¦å¿«ä¸å¯éå¤ï¼åæ¬å¨ CI/CD ç¯å¢ä¸­ãæ­£å¦ä¸ä½ Reddit ç¨æ·æè¯´ï¼"å¨å¼åé¶æ®µï¼ææä¸ä¸ªç¯å¢ï¼å¯ä»¥ F5ï¼åæ¶æ¥ææææå¡ï¼åæ¬å¥åº·æ£æ¥ãOTELãç§å­...å¨é¨éç½®åå¯æ¥çãæå¯ä»¥è¿æ¥æ éå¤ä¸ªæµè¯ï¼è¿è¡ç¸åçç¨åº...å¨ CI/CD ä¸­å®å¨ç¸åã</p>
<h4 id="è·¨ç¯å¢çä¸è´æ§">è·¨ç¯å¢çä¸è´æ§</h4>
<p>éè¿ç»ä¸å¯¹å¼åãæµè¯åçäº§è¿è¡å¤çââä½¿ç¨ç¸åç AppHost ç»ååé»è®¤å¼ââAspire ç¡®ä¿æ¬å°è¿è¡çå°±æ¯é¨ç½²çãè¿å¤§å¤§åå°äºç¯å¢æ¼ç§»ã</p>
<h4 id="åç½®å¯è§æµæ§ä¸å¼¹æ§">åç½®å¯è§æµæ§ä¸å¼¹æ§</h4>
<p>é¥æµãå¥åº·æ£æ¥ãéè¯åè¯æ­åé»è®¤å¯ç¨ï¼èçæ¶é´å¹¶ç¡®ä¿çæ§åå¯é æ§çä¸è´æ§ã</p>
<h4 id="åºç¡è®¾æ½å¤æåº¦éä½">åºç¡è®¾æ½å¤æåº¦éä½</h4>
<p>Aspire æ½è±¡åäºå®¹å¨ç¼æãç¯å¢åéæ³¨å¥åæå¡åç°é»è¾ï¼ä½¿å¼åèè½å¤å£°æå¼å°ç»åæå¡ãå®è¡¥åäºä½ä¸åä»£ Kubernetesãäºå®ä¸ï¼é¨ç½²å¯ä»¥åæ¶ä½¿ç¨ Aspire Manifests å Kubernetes è¿è¡æ©å±ã</p>
<h3 id="ä¸»è¦ç¹æ§æ¦è¿°">ä¸»è¦ç¹æ§æ¦è¿°</h3>
<table>
<thead>
<tr>
<th>ç¹å¾</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>AppHost ç¼æ</td>
<td>ç®¡çå¤æå¡åºç¨ç»ååå®¹å¨ç¼æçä¸­å¤®é¡¹ç®</td>
</tr>
<tr>
<td>æå¡é»è®¤</td>
<td>é¢ççéç½®ï¼ç¨äºé¥æµãå¥åº·æ£æ¥ãå¼¹æ§åæå¡åç°</td>
</tr>
<tr>
<td>æ¨¡æ¿ï¼CLI/IDEï¼</td>
<td>.NET Aspire åºç¨çå¥é¨åå¨æ æ¨¡æ¿</td>
</tr>
<tr>
<td>å¼åèä»ªè¡¨ç</td>
<td>æ¾ç¤ºå®æ¶æ¥å¿ãææ ãçè¿¹ãå®¹å¨çç½é¡µçé¢</td>
</tr>
<tr>
<td>é¥æµï¼OpenTelemetryï¼</td>
<td>åç½®æ¥å¿ãè¿½è¸ªãè·¨ ASP.NET ææ ãgRPCãHTTP</td>
</tr>
<tr>
<td>æå¡åç°</td>
<td>å¨ææ³¨å¥ depsãè¿æ¥å­ç¬¦ä¸²ãç«¯ç¹</td>
</tr>
<tr>
<td>é¨ç½²è¾åº</td>
<td>é¨ç½²å° AzureãKubernetes åå®¹å¨ï¼ä½¿ç¨ä¸è´ç manifests</td>
</tr>
<tr>
<td>éæçæç³»ç»</td>
<td>æ¯æ RedisãPostgreSQLãMongoDBãEF CoreãAzure StorageãDaprãOrleans ç­</td>
</tr>
</tbody>
</table>
<h3 id="çå®ä¸çç»éªä¸æ¥é">çå®ä¸çç»éªä¸æ¥é</h3>
<p>Visual Studio æå¿ï¼2025 å¹´ 2 æï¼å° Aspire æè¿°ä¸º"ä¸ä¸ªæ¨å¨ç®å.NET åå¸å¼ç³»ç»å¼åçäºåçåºç¨æ "ï¼å¼ºè°èªå¨ä»ªè¡¨ãå¥åº·æ£æ¥ãæ¨¡æ¿è®¾ç½®åä»ªè¡¨çä½éªã</p>
<p>InfoWorldï¼2025 å¹´ 7 æï¼éç¹ä»ç»äº Aspire çç¼æåå¯è§æµæ§ï¼ç§°èµå¶å¨æ¬å°ç»åãé¥æµåéæç®¡çæ¹é¢çè½åï¼å³ä½¿æ¯å¤æçå¤æå¡éç½®ãä»ªè¡¨çä¸­ä¸ GitHub Copilot çéæè¢«ç¹å«å¼ºè°ä¸ºæåçäº§åçå·¥å·ã</p>
<p>Code æå¿ä¸ Syncfusion æä¾ Aspire ç¼æä¼å¿çå®ç¨è§£éãæç¡®çç»ä»¶é»è®¤è®¾ç½®ï¼ä»¥åä½¿ç¨ CLI æ IDE æ¨¡æ¿çéæ­¥å¥é¨æ¹æ³ã</p>
<p>ç¤¾åºåé¦ï¼Redditï¼æ¾ç¤ºï¼ç¨æ·æ¥åç§°å¨æ¬å°ç¼æãéææµè¯ä»¥åå¼åä¸ CI ä¹é´çä¸è´æ§è¡ä¸ºæ¹é¢ï¼æ¾èèçäºå¤§éæ¶é´ã</p>
<h3 id="å¥é¨-net-aspire">å¥é¨ .NET Aspire</h3>
<h4 id="åå³æ¡ä»¶">åå³æ¡ä»¶</h4>
<ul>
<li>.NET 8 SDK</li>
<li>Visual Studio 2022 ï¼17.10+ï¼æ VS Code æ­é C# å¼åå·¥å·å</li>
<li>Container runtime ï¼Docker/Podmanï¼</li>
</ul>
<h4 id="å®è£-aspire">å®è£ Aspire</h4>
<pre><code class="language-bash">dotnet workload install aspire
</code></pre>
<h4 id="åå»ºé¡¹ç®">åå»ºé¡¹ç®</h4>
<pre><code class="language-bash">dotnet new aspire-starter --use-redis-cache --output AspireSample
</code></pre>
<h4 id="æ¬å°è¿è¡">æ¬å°è¿è¡</h4>
<p>éè¿ IDE æ CLI å¯å¨ï¼Aspire å¯å¨å®¹å¨ãé¥æµãä»ªè¡¨çç­ã</p>
<h4 id="æ£æ¥ä»ªè¡¨ç">æ£æ¥ä»ªè¡¨ç</h4>
<p>æ¥çæ¥å¿ãææ ãè·è¸ªåå®¹å¨ç¶æã</p>
<h4 id="èªå®ä¹ç»ä»¶">èªå®ä¹ç»ä»¶</h4>
<p>ä¿®æ¹ ServiceDefaults ææ·»å æ°çéæï¼ä¾å¦ï¼PostgreSQLãKafkaï¼ã</p>
<h4 id="é¨ç½²">é¨ç½²</h4>
<p>å¯¼åº manifests ç¨äº Azure Container Apps æ Kubernetes é¨ç½²ã</p>
<h4 id="æ©å±æè¿ç§»ç°æåºç¨">æ©å±æè¿ç§»ç°æåºç¨</h4>
<p>éè¿åä¸å¼ç¨å <code>AddServiceDefaults()</code> è°ç¨æ³¨å¥ Aspireã</p>
<h3 id="æ½å¨èèå ç´ ">æ½å¨èèå ç´ </h3>
<h4 id="å­¦ä¹ æ²çº¿">å­¦ä¹ æ²çº¿</h4>
<p>å¶è§ç¹å¼ç»æå¯è½ä¸ä¼ ç»è®¾ç½®ä¸åï¼è¿æ¸¡å¯è½éè¦ä¸æ³¨åªåã</p>
<h4 id="çæç³»ç»æçåº¦">çæç³»ç»æçåº¦</h4>
<p>Aspire ç¸å¯¹è¾æ°ï¼éæè¦çåå·¥å·æ ¼å±æ­£å¨æ¼åã</p>
<h4 id="å®å¶ä¸ä¸»è§é»è®¤">å®å¶ä¸ä¸»è§é»è®¤</h4>
<p>è½ç¶é»è®¤è½èçæ¶é´ï¼ä½å¤§éå®å¶å¯è½éè¦æ´æ·±çç¥è¯ã</p>
<h4 id="çäº§ä½¿ç¨æ¨¡å¼">çäº§ä½¿ç¨æ¨¡å¼</h4>
<p>è½ç¶çäº§åå¤å°±ç»ªï¼ä½å¤§è§æ¨¡çäº§é¨ç½²æ¨¡å¼ï¼å¦å¤åºå Kubernetesï¼ä»å¯è½éè¦é¢å¤éç½®ã</p>
<h2 id="ç»è®º">ç»è®º</h2>
<p>.NET Aspire æ¯ä¸æ¬¾åæ°ãæ³¨éçäº§åçå·¥å·åï¼ç®åäºä½¿ç¨ .NET åå»ºåå¸å¼äºåçåºç¨çæµç¨ãå®å°ç¼æãé¥æµãæå¡é»è®¤ãæ¨¡æ¿åå®æ¶ä»ªè¡¨çç»åï¼æé åºä¸ä¸ªæ¢æä¸»è§åå¯æ©å±çå¼åèä½éªãæ è®ºä½ æ¯ä»é¶å¼å§æå»ºï¼è¿æ¯å¢å¼ºç°æç.NET æå¡ï¼Aspire é½è½è®©ä½ æ´å¿«ä¸æï¼æ´ææå°è°è¯ï¼å¹¶èªä¿¡å°é¨ç½²ã</p>
<p>éè¿æä¾æ ååçå¼åä½éªãåç½®çå¯è§æµæ§åç®åçé¨ç½²æµç¨ï¼.NET Aspire æ¾èéä½äºæå»ºåå¸å¼åºç¨ç¨åºçå¤ææ§ï¼ä½¿å¼åèè½å¤æ´ä¸æ³¨äºåé ä¸å¡ä»·å¼èéè§£å³åºç¡è®¾æ½é®é¢ãéççæç³»ç»çä¸æ­æçï¼.NET Aspire æææä¸º.NET å¼åèæå»ºäºåçåºç¨çé¦éæ¡æ¶ã</p>

</div>
<div id="MySignature" role="contentinfo">
    <hr>
<br>
<p style="font-size: 16px; font-family: å¾®è½¯éé», é»ä½, Arial; color: #000">æ¬ææ¯ç±è¡èåææ¯å¼åå¢éåå¸ï¼è½¬è½½è¯·æ³¨æåºå¤ï¼<a href="https://www.grapecity.com.cn/" target="_blank">è¡èåå®ç½</a></p>
<!--p style="font-size: 16px; font-family: å¾®è½¯éé», é»ä½, Arial; color: #000">äºè§£ä¼ä¸çº§ä½ä»£ç å¼åå¹³å°ï¼è¯·åå¾<a href="https://www.grapecity.com.cn/solutions/huozige" target="_blank">æ´»å­æ ¼</a>
</p><p style="font-size: 16px; font-family: å¾®è½¯éé», é»ä½, Arial; color: #000">äºè§£å¯åµå¥æ¨ç³»ç»çå¨çº¿ Excelï¼è¯·åå¾<a href="https://www.grapecity.com.cn/developer/spreadjs" target="_blank">SpreadJSçº¯åç«¯è¡¨æ ¼æ§ä»¶</a></p>
<p style="font-size: 16px; font-family: å¾®è½¯éé», é»ä½, Arial; color: #000">äºè§£åµå¥å¼çåä¸æºè½åæ¥è¡¨è½¯ä»¶ï¼è¯·åå¾<a href="https://www.grapecity.com.cn/solutions/wyn" target="_blank">Wyn Enterprise
</a></p-->

<br>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-13 14:06">2026-01-13 14:05</span>&nbsp;
<a href="https://www.cnblogs.com/powertoolsteam">è¡èåææ¯å¢é</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19477015);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19477015', targetLink: 'https://www.cnblogs.com/powertoolsteam/p/19477015', title: '.NET Aspire æ¦è¿°' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ æ»ç»å½çº³.NET 10 ä¸­ Minimal APIs ä¸»è¦åºç¨åºæ¯ ]]></title>
    <link>https://www.cnblogs.com/tianqing/p/19467531</link>
    <guid>239d860af5d29c9f50d780d13b9cd081</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/tianqing/p/19467531" title="åå¸äº 2026-01-13 13:55">
    <span role="heading" aria-level="2">æ»ç»å½çº³.NET 10 ä¸­ Minimal APIs ä¸»è¦åºç¨åºæ¯</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>ä¸ä¸ç¯æç« ç»å¤§å®¶åäº«äº</p>
<p><a class="post-item-title" href="https://www.cnblogs.com/tianqing/p/19467483" target="_blank">.NET 10 New feature æ°å¢åè½ä»ç»-Minimal APIså¢å¼º</a></p>
<p>ä»å¤©ç»§ç»­åäº«ï¼&nbsp;Minimal APIs ä¸»è¦åºç¨åºæ¯</p>
<p class="p1">å¨ .NET 6â8 ä¸­ï¼Minimal APIs å·²ç»å®æäºâ<span class="s1"><strong>è½ç¨</strong>âé¶æ®µï¼</span></p>
<p class="p2"><span class="s2">.NET 9â10 çç®æ éå¸¸æç¡®ï¼<strong>è®© Minimal APIs æä¸ºä¼ä¸çº§ API çä¸ç­å¬æ°</strong><span class="s2">ã</span></span></p>
<p class="p3">æ ¸å¿å¢å¼ºæ¹åå¯ä»¥æ¦æ¬ä¸ºåä¸ªå³é®è¯ï¼&nbsp;</p>
<blockquote><strong>å¯ç»´æ¤ãå¯æ²»çãå¯æ©å±ãå¯å·¥ç¨å</strong></blockquote>
<p class="p1">å·ä½ä½ç°å¨ä»¥ä¸è½åæçåº¦æåï¼</p>
<ol start="1">
<li>
<p class="p1"><strong>æ´å¼ºçç±»åç³»ç»æ¯æï¼Typed Results / OpenAPI å¯¹é½ï¼</strong></p>
</li>
<li>
<p class="p1"><strong>æ´å®åçè¿æ»¤å¨ä¸ä¸­é´ä»¶ç»åè½å</strong></p>
</li>
<li>
<p class="p1"><strong>ä¸ DIãValidationãAuthorization çæ·±åº¦èå</strong></p>
</li>
<li>
<p class="p1"><strong>å¯¹ API åå±ãæ¨¡ååãè§æ¨¡åçåçæ¯æ</strong></p>
</li>
</ol>
<p>&nbsp;æä»¬ç»§ç»­å¯¹æ¯æèä¼ ç» Controller æ¨¡åçå¸åé®é¢ï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/23525/202601/23525-20260111101830293-1711275646.png" alt="image" width="774" height="248" loading="lazy"></p>
<p>&nbsp;<strong>Minimal APIs å¢å¼ºåçæ ¸å¿åºç¨åºæ¯æ»ç»</strong></p>
<p class="p1">&nbsp;<strong>åºæ¯ä¸ï¼é«å¹¶åè¯»æ¥å£ï¼æ°æ®æå¡ / æºè½é®æ° / çæ¿æ¥å£ï¼</strong></p>
<p class="p1">é¦åæ¯<span class="Apple-converted-space">æ´å¼º Typed Resultsï¼å½»åºæ¶é¤âè¿åä¸ç¡®å®æ§â</span></p>
<div class="cnblogs_code">
<pre>app.MapGet(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">/stations/{id}</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
    </span><span style="color: rgba(0, 0, 255, 1)">async</span> Task&lt;Results&lt;Ok&lt;StationDto&gt;, NotFound, ProblemHttpResult&gt;&gt;<span style="color: rgba(0, 0, 0, 1)"> 
    (</span><span style="color: rgba(0, 0, 255, 1)">long</span> id, IStationService service) =&gt;<span style="color: rgba(0, 0, 0, 1)">
{
    </span><span style="color: rgba(0, 0, 255, 1)">var</span> station = <span style="color: rgba(0, 0, 255, 1)">await</span><span style="color: rgba(0, 0, 0, 1)"> service.GetAsync(id);
    </span><span style="color: rgba(0, 0, 255, 1)">return</span> station <span style="color: rgba(0, 0, 255, 1)">is</span> <span style="color: rgba(0, 0, 255, 1)">null</span>
        ?<span style="color: rgba(0, 0, 0, 1)"> TypedResults.NotFound()
        : TypedResults.Ok(station);
});</span></pre>
</div>
<p>è¿ä¿è¯äº</p>
<ul>
<li>
<p class="p1">OpenAPI ææ¡£ <span class="s1"><strong>100% ç²¾ç¡®</strong></span></p>
</li>
<li>
<p class="p1">AI / åç«¯ / SDK èªå¨çæé¶æ­§ä¹</p>
</li>
<li>
<p class="p1"><span class="s1">ä¸åéè¦ [ProducesResponseType]</span></p>
</li>
</ul>
<p>&nbsp;<strong>æè´è½»éï¼é¿å Controller åå° &amp; Filter é¾ææ¬ï¼</strong>å¨ <span class="s1"><strong>é« QPS åºæ¯</strong></span></p>
<ul>
<li>
<p class="p1">Minimal APIsï¼</p>
<ul>
<li>
<p class="p1">è·¯ç±ç´æ¥ç»å® Delegate</p>
</li>
<li>
<p class="p1">å°ä¸å± MVC ç®¡é</p>
</li>
</ul>
</li>
<li>
<p class="p1">å¯¹ CPU ä¸åå­åå¥½</p>
</li>
</ul>
<blockquote><strong>åªè¯»æ¥å£ + é«é¢æ¥å£ï¼ä¼å Minimal APIs</strong></blockquote>
<p>&nbsp;<strong>åºæ¯äºï¼ä¸å¡è½åå API</strong></p>
<p class="p1">&nbsp;<strong>å¸åé®é¢ï¼Controller æ¨¡å¼ï¼</strong></p>
<ul>
<li>
<p class="p1">ä¸å¡è§åæ£è½å¨ Attribute / Filter / Action</p>
</li>
<li>
<p class="p1">ææãæ ¡éªãå®¡è®¡é¾ä»¥ç»ä¸<strong>.</strong></p>
</li>
</ul>
<p><strong>NET 10 çè§£å³æ¹å¼ï¼</strong><strong>Endpoint Filter å·¥ç¨å</strong><strong>ç»ä¸ä¸å¡è½åè¿æ»¤å¨</strong></p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> OperatorContextFilter : IEndpointFilter
{
    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">async</span> ValueTask&lt;<span style="color: rgba(0, 0, 255, 1)">object</span>?&gt;<span style="color: rgba(0, 0, 0, 1)"> InvokeAsync(
        EndpointFilterInvocationContext ctx,
        EndpointFilterDelegate next)
    {
        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> è§£æè¿è¥åä¸ä¸æ</span>
        OperatorContext.Current =<span style="color: rgba(0, 0, 0, 1)"> Resolve(ctx.HttpContext);
        </span><span style="color: rgba(0, 0, 255, 1)">return</span> <span style="color: rgba(0, 0, 255, 1)">await</span><span style="color: rgba(0, 0, 0, 1)"> next(ctx);
    }
}</span></pre>
</div>
<p class="p1">&nbsp;<strong>åºç¨å°ä¸å¡ API</strong></p>
<div class="cnblogs_code">
<pre>app.MapGroup(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">/api/charge</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">)
   .AddEndpointFilter</span>&lt;OperatorContextFilter&gt;<span style="color: rgba(0, 0, 0, 1)">()
   .RequireAuthorization(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">OperatorPolicy</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">)
   .MapPost(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">/start</span><span style="color: rgba(128, 0, 0, 1)">"</span>, StartCharge);</pre>
</div>
<p><img src="https://img2024.cnblogs.com/blog/23525/202601/23525-20260111102233372-1206307874.png" alt="image" width="585" height="159" loading="lazy"></p>
<p>&nbsp;</p>
<p class="p1">&nbsp;<strong>åºæ¯ä¸ï¼å¹³å°çº§ API æ¨¡åå</strong></p>
<p>&nbsp;æä»¬å¯ä»¥æ <span class="s1"><strong>ä¸å¡å</strong> æå APIï¼èä¸æ¯ Controllerï¼</span></p>
<p><span class="s1">&nbsp;&nbsp;</span></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">static</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> StationEndpoints
{
    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">static</span> IEndpointRouteBuilder MapStation(<span style="color: rgba(0, 0, 255, 1)">this</span><span style="color: rgba(0, 0, 0, 1)"> IEndpointRouteBuilder app)
    {
        </span><span style="color: rgba(0, 0, 255, 1)">var</span> group = app.MapGroup(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">/api/station</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">)
            .RequireAuthorization();

        group.MapGet(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">/{id}</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, GetStation);
        group.MapPost(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">/</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">, CreateStation);

        </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> app;
    }
}</span></pre>
</div>
<p class="p1">Program.cs æå¶çµæ´»ãç®ååéæå³å¯ï¼è¿å¯ä»¥å®ç°å¤ä¸å¡çº¿å¹¶è¡å¼å</p>
<p>app.MapStation();<br>app.MapOrder();<br>app.MapCharge();<br>app.MapFinance();</p>
<p>&nbsp;<strong>åºæ¯åï¼åé¨å¾®æå¡ / AI Agent æ¥å£ï¼éä¼ ç» RESTï¼</strong></p>
<p>&nbsp;Minimal APIs å¨ .NET 10 ä¸­ï¼<span class="s1"><strong>éå¸¸éåå Agent Tool æ¥å£</strong>ï¼</span></p>
<div class="cnblogs_code">
<pre>app.MapPost(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">/agent/charge/analyze</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
    </span><span style="color: rgba(0, 0, 255, 1)">async</span> (ChargeAnalyzeRequest req, IChargeAnalyzer analyzer) =&gt;<span style="color: rgba(0, 0, 0, 1)">
{
    </span><span style="color: rgba(0, 0, 255, 1)">return</span> TypedResults.Ok(<span style="color: rgba(0, 0, 255, 1)">await</span><span style="color: rgba(0, 0, 0, 1)"> analyzer.AnalyzeAsync(req));
});</span></pre>
</div>
<p class="p1">&nbsp;<strong>åºæ¯äºï¼BFF / API Gateway å±</strong></p>
<p>&nbsp;ä½¿ç¨ Minimal APIs å¯ä»¥å®ç°</p>
<ul>
<li>
<p class="p1">èåå¤ä¸ªä¸æ¸¸æ¥å£ãä¸å¡é»è¾ç¼æ</p>
</li>
<li>
<p class="p1">DTO è½¬æ¢ + åè®®éé</p>
</li>
<li>
<p class="p1">æè´ç®æ´</p>
</li>
</ul>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre>app.MapGet(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">/bff/station/{id}</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">,
    </span><span style="color: rgba(0, 0, 255, 1)">async</span> (<span style="color: rgba(0, 0, 255, 1)">long</span> id, IStationApi api, IPriceApi priceApi) =&gt;<span style="color: rgba(0, 0, 0, 1)">
{
    </span><span style="color: rgba(0, 0, 255, 1)">var</span> station = <span style="color: rgba(0, 0, 255, 1)">await</span><span style="color: rgba(0, 0, 0, 1)"> api.Get(id);
    </span><span style="color: rgba(0, 0, 255, 1)">var</span> price = <span style="color: rgba(0, 0, 255, 1)">await</span><span style="color: rgba(0, 0, 0, 1)"> priceApi.GetPrice(id);
    </span><span style="color: rgba(0, 0, 255, 1)">return</span> TypedResults.Ok(<span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> StationView(station, price));
});</span></pre>
</div>
<p>&nbsp;ä»¥ä¸æ¯.NET 10 ä¸­ Minimal APIs ä¸»è¦åºç¨åºæ¯çæ»ç»ååäº«ã</p>
<p>&nbsp;</p>
<p>å¨å½åº</p>
<p>2026/1/12</p>
<p>&nbsp;</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-13 13:55">2026-01-13 13:55</span>&nbsp;
<a href="https://www.cnblogs.com/tianqing">Eric zhou</a>&nbsp;
éè¯»(<span id="post_view_count">28</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19467531);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19467531', targetLink: 'https://www.cnblogs.com/tianqing/p/19467531', title: 'æ»ç»å½çº³.NET 10 ä¸­ Minimal APIs ä¸»è¦åºç¨åºæ¯' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ C# 14 ä¸­çæ°å¢åè½ ]]></title>
    <link>https://www.cnblogs.com/net-kevin-li/p/19476883</link>
    <guid>93d2aa7265145f1c2ae98e543e6ab7bd</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/net-kevin-li/p/19476883" title="åå¸äº 2026-01-13 13:46">
    <span role="heading" aria-level="2">C# 14 ä¸­çæ°å¢åè½</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>C# 14 å¼å¥äºå¤é¡¹éè¦æ´æ°ï¼ä»¥ä¸æ¯ä¸»è¦åè½çè¯¦ç»è¯´æï¼</p>
<hr>
<h3 id="1-æ©å±æå">1. <strong>æ©å±æå</strong></h3>
<p>åè®¸ä¸ºç°æç±»åæ·»å æ©å±æ¹æ³/å±æ§ï¼è¯­æ³æ´ç®æ´ï¼</p>
<pre><code class="language-csharp">public static class StringExtensions
{
    public static bool IsNullOrEmpty(this string? str) =&gt; 
        string.IsNullOrEmpty(str);
}
</code></pre>
<hr>
<h3 id="2-ç©ºæ¡ä»¶èµå¼">2. <strong>ç©ºæ¡ä»¶èµå¼</strong></h3>
<p>ç®åç©ºå¼æ£æ¥ä¸èµå¼æä½ï¼</p>
<pre><code class="language-csharp">obj?.Property ??= "default"; // è¥ obj.Property ä¸º null åèµå¼
</code></pre>
<hr>
<h3 id="3-nameof-æ¯ææªç»å®æ³åç±»å">3. <strong><code>nameof</code> æ¯ææªç»å®æ³åç±»å</strong></h3>
<p>å¢å¼ºæ³åç±»ååç§°è·åè½åï¼</p>
<pre><code class="language-csharp">var name = nameof(List&lt;int&gt;); // è¾åº "List"
</code></pre>
<hr>
<h3 id="4-spant-éå¼è½¬æ¢ä¼å">4. <strong><code>Span&lt;T&gt;</code> éå¼è½¬æ¢ä¼å</strong></h3>
<p>æ¯ææ´å¤ç±»åå®å¨è½¬æ¢ï¼</p>
<pre><code class="language-csharp">byte[] data = ...;
Span&lt;byte&gt; span = data; // æ éæ¾å¼è½¬æ¢
</code></pre>
<hr>
<h3 id="5-ç®å-lambda-åæ°ä¿®é¥°ç¬¦">5. <strong>ç®å lambda åæ°ä¿®é¥°ç¬¦</strong></h3>
<p>åè®¸ä¸º lambda åæ°æ·»å ä¿®é¥°ç¬¦ï¼</p>
<pre><code class="language-csharp">var process = (ref int x) =&gt; x *= 2; // æ¯æ ref/in ç­ä¿®é¥°
</code></pre>
<hr>
<h3 id="6-field-æ¯æçå±æ§">6. <strong><code>field</code> æ¯æçå±æ§</strong></h3>
<p>èªå¨å®ç°å±æ§æ¯æå­æ®µç´æ¥è®¿é®ï¼</p>
<pre><code class="language-csharp">public int Value { get; set field = 0; } // éè¿ 'field' å³é®å­è®¿é®åå¤å­æ®µ
</code></pre>
<hr>
<h3 id="7-partial-äºä»¶åæé å½æ°">7. <strong><code>partial</code> äºä»¶åæé å½æ°</strong></h3>
<p>åé¨ç±»æ¯æäºä»¶ä¸æé å½æ°çæåå®ä¹ï¼</p>
<pre><code class="language-csharp">partial class MyClass
{
    partial void Initialize(); // åé¨æé å½æ°é»è¾
    public event EventHandler? MyEvent;
}
</code></pre>
<hr>
<h3 id="8-ç¨æ·å®ä¹çå¤åèµå¼è¿ç®ç¬¦">8. <strong>ç¨æ·å®ä¹çå¤åèµå¼è¿ç®ç¬¦</strong></h3>
<p>æ¯æéè½½å¤åè¿ç®ç¬¦ï¼å¦ <code>+=</code>ï¼ï¼</p>
<pre><code class="language-csharp">public static Vector operator +(Vector a, Vector b) =&gt; ...;
public static Vector operator +=(Vector a, Vector b) =&gt; a = a + b; // æ¾å¼å®ä¹
</code></pre>
<hr>
<h3 id="9-åºäºæä»¶çé¢å¤çå¨æä»¤">9. <strong>åºäºæä»¶çé¢å¤çå¨æä»¤</strong></h3>
<p>ä¸ºæä»¶çº§éç½®æ°å¢æä»¤ï¼</p>
<pre><code class="language-csharp">#fileenable "FeatureA" // å¯ç¨ç¹å®æä»¶çº§åè½
</code></pre>
<hr>
<h3 id="ä½¿ç¨å»ºè®®">ä½¿ç¨å»ºè®®</h3>
<ul>
<li><strong>å¼åç¯å¢</strong>ï¼éå®è£ .NET 10 SDK æ Visual Studio 2026</li>
<li><strong>è¿ç§»æ³¨æ</strong>ï¼é¨ååè½éæ¾å¼å¯ç¨ç¼è¯å¨å¼å³ï¼å¦ <code>#enable</code>ï¼</li>
<li><strong>æ§è½ä¼å</strong>ï¼<code>Span&lt;T&gt;</code> éå¼è½¬æ¢å¯åå°åå­æ·è´ï¼éç¨äºé«æ§è½åºæ¯</li>
</ul>
<p>éè¿ä»¥ä¸ä»£ç éªè¯ç¯å¢æ¯æï¼</p>
<pre><code class="language-csharp">Console.WriteLine($"C# 14 enabled: {RuntimeFeature.IsSupported("CSharp14")}");

</code></pre>
<h2 id="netcorekevin">NetCoreKevin</h2>
<p>åºäºNETæ­å»º-AIæºè½ä½-ç°ä»£åSaasä¼ä¸çº§ååç«¯åç¦»æ¶æ-å¼å¯æºè½åºç¨çæ éå¯è½ï¼åç«¯Vue3ãIDS4åç¹ç»å½ãå¤ç¼å­ãèªå¨ä»»å¡ãåå¸å¼ãä¸åºå¤ç§æ·ãæ¥å¿ãææåé´æãCAPéæäºä»¶ãSignalRãé¢åäºä»¶ãMCPåè®®æå¡ãIOCæ¨¡ååæ³¨å¥ãä»£ç çæå¨ãQuartzèªå¨ä»»å¡ãå¤ç­ä¿¡éæãAIãAgentFrameworkæºè½ä½ãAISemanticKerneléæãRAGæ£ç´¢å¢å¼º<br>
-é¡¹ç®å°åï¼githubï¼<a href="https://github.com/junkai-li/NetCoreKevin" target="_blank" rel="noopener nofollow">https://github.com/junkai-li/NetCoreKevin</a><br>
Gitee: <a href="https://gitee.com/netkevin-li/NetCoreKevin" target="_blank" rel="noopener nofollow">https://gitee.com/netkevin-li/NetCoreKevin</a></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-13 13:47">2026-01-13 13:46</span>&nbsp;
<a href="https://www.cnblogs.com/net-kevin-li">NetCoreKevin</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19476883);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19476883', targetLink: 'https://www.cnblogs.com/net-kevin-li/p/19476883', title: 'C# 14 ä¸­çæ°å¢åè½' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ åºäºDCTåæ¢å¾åå»åªç®æ³çç»æä¼åï¼1920*1080ç°åº¦å¾åæ ¸çº¦22msï¼ ]]></title>
    <link>https://www.cnblogs.com/Imageshop/p/19475839</link>
    <guid>64c5045d6dc9d24c3b9e71975d965a6b</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Imageshop/p/19475839" title="åå¸äº 2026-01-13 13:43">
    <span role="heading" aria-level="2">åºäºDCTåæ¢å¾åå»åªç®æ³çç»æä¼åï¼1920*1080ç°åº¦å¾åæ ¸çº¦22msï¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        DCTå»åªä¹æ¯ä¸ç§å¸¸ç¨èä¸ç¨³å®çå»åªç®æ³ï¼ä½æ¯å å¶è®¡ç®éå¤ªå¤§ï¼å¾å¾é¾ä»¥å¨é¡¹ç®ä¸­äºä»¥è½å°ï¼æ¬æå¨æ©æçä¼åçæ¬ä¸ï¼ç»§ç»­æ·±å¥æ¢è®¨ãå°è¯¥ç®æ³çéåº¦è¿ä¸æ­¥ä»¥æåã
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>ããç¸å³æç« ï¼</p>
<p>ãã<a id="cb_post_title_url" class="postTitle2 vertical-middle" title="åå¸äº 2015-11-14 22:11" href="https://www.cnblogs.com/Imageshop/p/4965192.html">ä¼åIPOLç½ç«ä¸­åºäºDCTï¼ç¦»æ£ä½å¼¦åæ¢ï¼çå¾åå»åªç®æ³ï¼éæºä»£ç ï¼ã</a></p>
<p>ãã<a id="cb_post_title_url" class="postTitle2 vertical-middle" title="åå¸äº 2018-09-04 17:06" href="https://www.cnblogs.com/Imageshop/p/9584024.html">SSEå¾åç®æ³ä¼åç³»åäºåä¸ï¼åºäºDCTåæ¢å¾åå»åªç®æ³çè¿ä¸æ­¥ä¼åï¼100Wåç´ 30msï¼ã</a></p>
<p>ãã<span style="font-size: 13px">è¿ä¸ªç®æ³2015å¹´ä¼åè¿ä¸çï¼2018å¹´åä¼åè¿ä¸çï¼2016å¹´ååæ¥åè®¿ä¸ä¸ï¼æè§è¿æä¼åç©ºé´ï¼ç»§ç»­åæè¾äºå°è¿ä¸å¨ï¼éåº¦åæè¿ä¸æ­¥çæåï¼ä¸é¢æ¯è¿ä¸ªä¸ä¸ªçæ¬å¨åä¸å°çµèä¸çéåº¦æ¯è¾ï¼</span></p>
<p>&nbsp; &nbsp;&nbsp;<img src="https://img2024.cnblogs.com/blog/349293/202601/349293-20260113104140655-1263897161.png" alt="image" width="1090" height="168" loading="lazy"></p>
<p><span style="font-size: 13px">&nbsp;</span><span style="font-size: 13px">ããå¯¹äºå°å¾ï¼å¶å®2026çå2018å¹´éåº¦å·®å¼ä¸æ¯å¾å¤§ï¼å°äºå¤§å¾ï¼æ°ççº¦æ25%å·¦å³çæåã</span></p>
<p><span style="font-size: 13px">ããé£ä¹2026çä¼åçæ¸ éä¸»è¦æä¸¤å¤ï¼ç¬¬ä¸ä¸ªè¿æ¯åé¨DCTåæ¢æ¬èº«çä¼åï¼ä»¥8*8çDCTä¸ºä¾ï¼2015çDCT1Dçä»£ç å¦ä¸æç¤ºï¼</span></p>
<div class="cnblogs_code">
<pre>inline <span style="color: rgba(0, 0, 255, 1)">void</span> IM_DCT1D_8x1_GT_C(<span style="color: rgba(0, 0, 255, 1)">float</span> *In, <span style="color: rgba(0, 0, 255, 1)">float</span> *<span style="color: rgba(0, 0, 0, 1)">Out)
{
    </span><span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">float</span> mx00 = In[<span style="color: rgba(128, 0, 128, 1)">0</span>] + In[<span style="color: rgba(128, 0, 128, 1)">7</span><span style="color: rgba(0, 0, 0, 1)">];
    </span><span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">float</span> mx01 = In[<span style="color: rgba(128, 0, 128, 1)">1</span>] + In[<span style="color: rgba(128, 0, 128, 1)">6</span><span style="color: rgba(0, 0, 0, 1)">];
    </span><span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">float</span> mx02 = In[<span style="color: rgba(128, 0, 128, 1)">2</span>] + In[<span style="color: rgba(128, 0, 128, 1)">5</span><span style="color: rgba(0, 0, 0, 1)">];
    </span><span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">float</span> mx03 = In[<span style="color: rgba(128, 0, 128, 1)">3</span>] + In[<span style="color: rgba(128, 0, 128, 1)">4</span><span style="color: rgba(0, 0, 0, 1)">];
    </span><span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">float</span> mx04 = In[<span style="color: rgba(128, 0, 128, 1)">0</span>] - In[<span style="color: rgba(128, 0, 128, 1)">7</span><span style="color: rgba(0, 0, 0, 1)">];
    </span><span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">float</span> mx05 = In[<span style="color: rgba(128, 0, 128, 1)">1</span>] - In[<span style="color: rgba(128, 0, 128, 1)">6</span><span style="color: rgba(0, 0, 0, 1)">];
    </span><span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">float</span> mx06 = In[<span style="color: rgba(128, 0, 128, 1)">2</span>] - In[<span style="color: rgba(128, 0, 128, 1)">5</span><span style="color: rgba(0, 0, 0, 1)">];
    </span><span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">float</span> mx07 = In[<span style="color: rgba(128, 0, 128, 1)">3</span>] - In[<span style="color: rgba(128, 0, 128, 1)">4</span><span style="color: rgba(0, 0, 0, 1)">];
    </span><span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">float</span> mx08 = mx00 +<span style="color: rgba(0, 0, 0, 1)"> mx03;
    </span><span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">float</span> mx09 = mx01 +<span style="color: rgba(0, 0, 0, 1)"> mx02;
    </span><span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">float</span> mx0a = mx00 -<span style="color: rgba(0, 0, 0, 1)"> mx03;
    </span><span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">float</span> mx0b = mx01 -<span style="color: rgba(0, 0, 0, 1)"> mx02;
    </span><span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">float</span> mx0c = <span style="color: rgba(128, 0, 128, 1)">1.38703984532215f</span> * mx04 + <span style="color: rgba(128, 0, 128, 1)">0.275899379282943f</span> *<span style="color: rgba(0, 0, 0, 1)"> mx07;
    </span><span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">float</span> mx0d = <span style="color: rgba(128, 0, 128, 1)">1.17587560241936f</span> * mx05 + <span style="color: rgba(128, 0, 128, 1)">0.785694958387102f</span> *<span style="color: rgba(0, 0, 0, 1)"> mx06;
    </span><span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">float</span> mx0e = -<span style="color: rgba(128, 0, 128, 1)">0.785694958387102f</span> * mx05 + <span style="color: rgba(128, 0, 128, 1)">1.17587560241936f</span> *<span style="color: rgba(0, 0, 0, 1)"> mx06;
    </span><span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">float</span> mx0f = <span style="color: rgba(128, 0, 128, 1)">0.275899379282943f</span> * mx04 - <span style="color: rgba(128, 0, 128, 1)">1.38703984532215f</span> *<span style="color: rgba(0, 0, 0, 1)"> mx07;
    </span><span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">float</span> mx10 = <span style="color: rgba(128, 0, 128, 1)">0.353553390593274f</span> * (mx0c -<span style="color: rgba(0, 0, 0, 1)"> mx0d);
    </span><span style="color: rgba(0, 0, 255, 1)">const</span> <span style="color: rgba(0, 0, 255, 1)">float</span> mx11 = <span style="color: rgba(128, 0, 128, 1)">0.353553390593274f</span> * (mx0e -<span style="color: rgba(0, 0, 0, 1)"> mx0f);
    Out[</span><span style="color: rgba(128, 0, 128, 1)">0</span>] = <span style="color: rgba(128, 0, 128, 1)">0.353553390593274f</span> * (mx08 +<span style="color: rgba(0, 0, 0, 1)"> mx09);
    Out[</span><span style="color: rgba(128, 0, 128, 1)">1</span>] = <span style="color: rgba(128, 0, 128, 1)">0.353553390593274f</span> * (mx0c +<span style="color: rgba(0, 0, 0, 1)"> mx0d);
    Out[</span><span style="color: rgba(128, 0, 128, 1)">2</span>] = <span style="color: rgba(128, 0, 128, 1)">0.461939766255643f</span> * mx0a + <span style="color: rgba(128, 0, 128, 1)">0.191341716182545f</span> *<span style="color: rgba(0, 0, 0, 1)"> mx0b;
    Out[</span><span style="color: rgba(128, 0, 128, 1)">3</span>] = <span style="color: rgba(128, 0, 128, 1)">0.707106781186547f</span> * (mx10 -<span style="color: rgba(0, 0, 0, 1)"> mx11);
    Out[</span><span style="color: rgba(128, 0, 128, 1)">4</span>] = <span style="color: rgba(128, 0, 128, 1)">0.353553390593274f</span> * (mx08 -<span style="color: rgba(0, 0, 0, 1)"> mx09);
    Out[</span><span style="color: rgba(128, 0, 128, 1)">5</span>] = <span style="color: rgba(128, 0, 128, 1)">0.707106781186547f</span> * (mx10 +<span style="color: rgba(0, 0, 0, 1)"> mx11);
    Out[</span><span style="color: rgba(128, 0, 128, 1)">6</span>] = <span style="color: rgba(128, 0, 128, 1)">0.191341716182545f</span> * mx0a - <span style="color: rgba(128, 0, 128, 1)">0.461939766255643f</span> *<span style="color: rgba(0, 0, 0, 1)"> mx0b;
    Out[</span><span style="color: rgba(128, 0, 128, 1)">7</span>] = <span style="color: rgba(128, 0, 128, 1)">0.353553390593274f</span> * (mx0e +<span style="color: rgba(0, 0, 0, 1)"> mx0f);
}</span></pre>
</div>
<p>ããå¯ä»¥çå°Out[0]å°Out[7]è¿ä¸ª8ä¸ªæ°æ®åé¢é½è¿æå¾å¤ç³»æ°ï¼å±æ26æ¬¡å æ³å22æ¬¡ä¹æ³ï¼å®éä¸å¯ä»¥æä»ä»¬ååé¢çç³»æ°èåå°ä¸èµ·ï¼ä¿®æ¹åæ°æ®å¦ä¸æç¤ºï¼</p>
<div class="cnblogs_code">
<pre>inline <span style="color: rgba(0, 0, 255, 1)">void</span> IM_DCT1D_1x8_C(<span style="color: rgba(0, 0, 255, 1)">float</span>* In, <span style="color: rgba(0, 0, 255, 1)">float</span>*<span style="color: rgba(0, 0, 0, 1)"> Out)
{</span>
    <span style="color: rgba(0, 0, 255, 1)">float</span> V00 = In[<span style="color: rgba(128, 0, 128, 1)">0</span>] + In[<span style="color: rgba(128, 0, 128, 1)">7</span><span style="color: rgba(0, 0, 0, 1)">];
    </span><span style="color: rgba(0, 0, 255, 1)">float</span> V01 = In[<span style="color: rgba(128, 0, 128, 1)">0</span>] - In[<span style="color: rgba(128, 0, 128, 1)">7</span><span style="color: rgba(0, 0, 0, 1)">];
    </span><span style="color: rgba(0, 0, 255, 1)">float</span> V02 = In[<span style="color: rgba(128, 0, 128, 1)">1</span>] + In[<span style="color: rgba(128, 0, 128, 1)">6</span><span style="color: rgba(0, 0, 0, 1)">];
    </span><span style="color: rgba(0, 0, 255, 1)">float</span> V03 = In[<span style="color: rgba(128, 0, 128, 1)">1</span>] - In[<span style="color: rgba(128, 0, 128, 1)">6</span><span style="color: rgba(0, 0, 0, 1)">];
    </span><span style="color: rgba(0, 0, 255, 1)">float</span> V04 = In[<span style="color: rgba(128, 0, 128, 1)">2</span>] + In[<span style="color: rgba(128, 0, 128, 1)">5</span><span style="color: rgba(0, 0, 0, 1)">];
    </span><span style="color: rgba(0, 0, 255, 1)">float</span> V05 = In[<span style="color: rgba(128, 0, 128, 1)">2</span>] - In[<span style="color: rgba(128, 0, 128, 1)">5</span><span style="color: rgba(0, 0, 0, 1)">];
    </span><span style="color: rgba(0, 0, 255, 1)">float</span> V06 = In[<span style="color: rgba(128, 0, 128, 1)">3</span>] + In[<span style="color: rgba(128, 0, 128, 1)">4</span><span style="color: rgba(0, 0, 0, 1)">];
    </span><span style="color: rgba(0, 0, 255, 1)">float</span> V07 = In[<span style="color: rgba(128, 0, 128, 1)">3</span>] - In[<span style="color: rgba(128, 0, 128, 1)">4</span><span style="color: rgba(0, 0, 0, 1)">];
    </span><span style="color: rgba(0, 0, 255, 1)">float</span> V08 = <span style="color: rgba(128, 0, 128, 1)">0.353553390593274f</span> * (V00 +<span style="color: rgba(0, 0, 0, 1)"> V06);
    </span><span style="color: rgba(0, 0, 255, 1)">float</span> V09 = <span style="color: rgba(128, 0, 128, 1)">0.353553390593274f</span> * (V02 +<span style="color: rgba(0, 0, 0, 1)"> V04);
    </span><span style="color: rgba(0, 0, 255, 1)">float</span> V10 = V00 -<span style="color: rgba(0, 0, 0, 1)"> V06;
    </span><span style="color: rgba(0, 0, 255, 1)">float</span> V11 = V02 -<span style="color: rgba(0, 0, 0, 1)"> V04;
    </span><span style="color: rgba(0, 0, 255, 1)">float</span> V12 = <span style="color: rgba(128, 0, 128, 1)">0.490392640201616f</span> * V01 + <span style="color: rgba(128, 0, 128, 1)">0.097545161008064f</span> *<span style="color: rgba(0, 0, 0, 1)"> V07;
    </span><span style="color: rgba(0, 0, 255, 1)">float</span> V13 = <span style="color: rgba(128, 0, 128, 1)">0.415734806151273f</span> * V03 + <span style="color: rgba(128, 0, 128, 1)">0.277785116509801f</span> *<span style="color: rgba(0, 0, 0, 1)"> V05;
    </span><span style="color: rgba(0, 0, 255, 1)">float</span> V14 = <span style="color: rgba(128, 0, 128, 1)">0.415734806151273f</span> * V05 - <span style="color: rgba(128, 0, 128, 1)">0.277785116509801f</span> *<span style="color: rgba(0, 0, 0, 1)"> V03;
    </span><span style="color: rgba(0, 0, 255, 1)">float</span> V15 = <span style="color: rgba(128, 0, 128, 1)">0.097545161008064f</span> * V01 - <span style="color: rgba(128, 0, 128, 1)">0.490392640201616f</span> *<span style="color: rgba(0, 0, 0, 1)"> V07;
    </span><span style="color: rgba(0, 0, 255, 1)">float</span> V16 = <span style="color: rgba(128, 0, 128, 1)">0.707106781186547f</span> * (V12 -<span style="color: rgba(0, 0, 0, 1)"> V13);
    </span><span style="color: rgba(0, 0, 255, 1)">float</span> V17 = <span style="color: rgba(128, 0, 128, 1)">0.707106781186547f</span> * (V14 -<span style="color: rgba(0, 0, 0, 1)"> V15);

    Out[</span><span style="color: rgba(128, 0, 128, 1)">0</span>] = V08 +<span style="color: rgba(0, 0, 0, 1)"> V09;
    Out[</span><span style="color: rgba(128, 0, 128, 1)">1</span>] = V12 +<span style="color: rgba(0, 0, 0, 1)"> V13;
    Out[</span><span style="color: rgba(128, 0, 128, 1)">2</span>] = <span style="color: rgba(128, 0, 128, 1)">0.461939766255643f</span> * V10 + <span style="color: rgba(128, 0, 128, 1)">0.191341716182545f</span> *<span style="color: rgba(0, 0, 0, 1)"> V11;
    Out[</span><span style="color: rgba(128, 0, 128, 1)">3</span>] = V16 -<span style="color: rgba(0, 0, 0, 1)"> V17;
    Out[</span><span style="color: rgba(128, 0, 128, 1)">4</span>] = V08 -<span style="color: rgba(0, 0, 0, 1)"> V09;
    Out[</span><span style="color: rgba(128, 0, 128, 1)">5</span>] = V16 +<span style="color: rgba(0, 0, 0, 1)"> V17;
    Out[</span><span style="color: rgba(128, 0, 128, 1)">6</span>] = <span style="color: rgba(128, 0, 128, 1)">0.191341716182545f</span> * V10 - <span style="color: rgba(128, 0, 128, 1)">0.461939766255643f</span> *<span style="color: rgba(0, 0, 0, 1)"> V11;
    Out[</span><span style="color: rgba(128, 0, 128, 1)">7</span>] = V14 +<span style="color: rgba(0, 0, 0, 1)"> V15;
}</span></pre>
</div>
<p>ããä¿®æ¹åçä»£ç åªæ26æ¬¡å æ³å16æ¬¡ä¹æ³ï¼åå°äº6æ¬¡ä¹æ³ã</p>
<p>&nbsp;ã&nbsp; å éçå¦å¤ä¸ä¸ªé¨åå°±æ¯ï¼ååçæ¹æ³æ¯æ²¿çåæ¹åæ´æ°æéåç´¯å å¼ï¼æ°çç®æ³æ´æ¹ä¸ºè¡æ¹åæ´æ°æéåç´¯å å¼ï¼è¿éèªç¶çå°±åä¸ºäºç¼å­åå¥½çæ¹å¼äºãå½ç¶å¶ä¸­ï¼ä¼å¢å ä¸é¨ååå­å ç¨ã</p>
<p>ããååçå¤çæ¹å¼å¦ä¸ï¼</p>
<div class="cnblogs_code">
<pre>        <span style="color: rgba(0, 0, 255, 1)">for</span> (<span style="color: rgba(0, 0, 255, 1)">int</span> X = <span style="color: rgba(128, 0, 128, 1)">0</span>; X &lt; Width - <span style="color: rgba(128, 0, 128, 1)">7</span>; X +=<span style="color: rgba(0, 0, 0, 1)"> Step)
        {
            </span><span style="color: rgba(0, 0, 255, 1)">for</span> (<span style="color: rgba(0, 0, 255, 1)">int</span> Y = <span style="color: rgba(128, 0, 128, 1)">0</span>; Y &lt; Height; Y++<span style="color: rgba(0, 0, 0, 1)">)
            {
                IM_Convert8ucharTo8float_PureC(Src </span>+ Y * Stride + X, DctIn + Y * <span style="color: rgba(128, 0, 128, 1)">8</span>);                        <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">    æä¸æ´åçå­èæ°æ®è½¬æ¢ä¸ºæµ®ç¹æ°</span>
<span style="color: rgba(0, 0, 0, 1)">            }
            </span><span style="color: rgba(0, 0, 255, 1)">for</span> (<span style="color: rgba(0, 0, 255, 1)">int</span> Y = <span style="color: rgba(128, 0, 128, 1)">0</span>; Y &lt; Height; Y++<span style="color: rgba(0, 0, 0, 1)">)
            {
                IM_DCT1D_8x1_GT_C(DctIn </span>+ Y * <span style="color: rgba(128, 0, 128, 1)">8</span>, DctIn + Y * <span style="color: rgba(128, 0, 128, 1)">8</span><span style="color: rgba(0, 0, 0, 1)">);
            }
            </span><span style="color: rgba(0, 0, 255, 1)">for</span> (<span style="color: rgba(0, 0, 255, 1)">int</span> Y = <span style="color: rgba(128, 0, 128, 1)">0</span>; Y &lt; Height - <span style="color: rgba(128, 0, 128, 1)">7</span>; Y +=<span style="color: rgba(0, 0, 0, 1)"> Step)
            {
                IM_DCT2D_8x8_With1DRowDCT_GS_PureC(DctIn </span>+ Y * <span style="color: rgba(128, 0, 128, 1)">8</span>, DctOut);                            <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">    DCTåæ¢</span>
                IM_DctThreshold8x8_PureC(DctOut, Threshold);                                                <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">    éå¼å¤ç</span>
                IM_IDCT2D_8x8_GS_PureC(DctOut, DctOut);                                                <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">    å¨ååæ¢åæ¥</span>
                IM_UpdateSum8x8_PureC(Sum + Y * Width + X, DctOut, Width);                                <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">    æ´æ°æéåéå¼</span>
<span style="color: rgba(0, 0, 0, 1)">            }
        }
        IM_SumDivWeight2uchar8x8_PureC(Sum, Dest, Width, Height, Stride, FastMode);</span></pre>
</div>
<p>ããæ´æ¹åçæ¹æ¡ä¸ºï¼</p>
<div class="cnblogs_code">
<pre>    <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">    åæææçå­èæ°æ®è½¬æ¢ä¸ºæµ®ç¹æ°</span>
        <span style="color: rgba(0, 0, 255, 1)">for</span> (<span style="color: rgba(0, 0, 255, 1)">int</span> Y = <span style="color: rgba(128, 0, 128, 1)">0</span>; Y &lt; Height; Y++<span style="color: rgba(0, 0, 0, 1)">)
        {
            IM_ConvertU8To32F_PureC(Src </span>+ Y * Stride, SrcF + Y *<span style="color: rgba(0, 0, 0, 1)"> Width, Width);
        }
        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">    å ä¸ºåé¢è¿è¡äºä»¥yä¸ºèµ·ç¹ï¼è¿ç»­8ä¸ªåç´ çè¡æ¹åçDCTåæ¢ï¼æä»¥æå7ä¸ªç¹ä¹æ¯æåæ ·ç</span>
        <span style="color: rgba(0, 0, 255, 1)">for</span> (<span style="color: rgba(0, 0, 255, 1)">int</span> Y = <span style="color: rgba(128, 0, 128, 1)">0</span>; Y &lt; Height - <span style="color: rgba(128, 0, 128, 1)">7</span>; Y +=<span style="color: rgba(0, 0, 0, 1)"> Step)
        {
            </span><span style="color: rgba(0, 0, 255, 1)">float</span>* SumL = Sum + Y *<span style="color: rgba(0, 0, 0, 1)"> Width;
            </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">    8è¡æ°æ®çä¸ç»´åDCTåæ¢ï¼ä¿å­å°DctInä¸­</span>
            IM_DCT1D_8xW_C_PureC(SrcF + Y *<span style="color: rgba(0, 0, 0, 1)"> Width, DctIn, Width);
            </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">    æåDCTåæ¢çæ°æ®è½¬ç½®ä¸</span>
            IM_TransposeF_PureC(DctIn, DctInT, Width, <span style="color: rgba(128, 0, 128, 1)">8</span><span style="color: rgba(0, 0, 0, 1)">);
            </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">    è¿è¡äºä»¥Xä¸ºèµ·ç¹ï¼Xæ¹åè¿ç»­7ä¸ªåæ¹åçDCTååæ¢ï¼æä»¥åæ¹åæå7ä¸ªåç´ ä¹è½åæ ·å°</span>
            <span style="color: rgba(0, 0, 255, 1)">for</span> (<span style="color: rgba(0, 0, 255, 1)">int</span> X = <span style="color: rgba(128, 0, 128, 1)">0</span>; X &lt; Width - <span style="color: rgba(128, 0, 128, 1)">7</span>; X +=<span style="color: rgba(0, 0, 0, 1)"> Step)
            {
                </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">    å¯ä»¥éå¤å©ç¨è¡æ¹åçè½¬ç½®æ°æ®</span>
                IM_DCT1D_8x8_C_PureC(DctInT + X * <span style="color: rgba(128, 0, 128, 1)">8</span><span style="color: rgba(0, 0, 0, 1)">, DctOut);
                </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">    è½¬æ¢åçæ°æ®è¿è¦è½¬ç½®</span>
<span style="color: rgba(0, 0, 0, 1)">                IM_Transpose8x8F_W8_PureC(DctOut, DctOut);
                </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">    éå¼å¤ç</span>
<span style="color: rgba(0, 0, 0, 1)">                IM_DctThreshold8x8_PureC(DctOut, Threshold);
                </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">    å¨ååæ¢åæ¥</span>
<span style="color: rgba(0, 0, 0, 1)">                IM_IDCT2D_8x8_PureC(DctOut, DctOut);
                </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">    æ´æ°æéåéå¼</span>
                IM_UpdateSum8x8_PureC(SumL +<span style="color: rgba(0, 0, 0, 1)"> X, DctOut, Width);
            }
        }
        IM_SumDivWeight2uchar8x8_PureC(Sum, Dest, Width, Height, Stride, FastMode);</span></pre>
</div>
<p>ããå·ä½çç»èè¿éè¦å¤§å®¶èªå·±æ¢æ¢æã</p>
<p>ããå¯¹äº16*16çDCTï¼æ¬èº«çè®¡ç®éå°±ç¹å«å¤¸å¼ ï¼ååè®ºæéå¥çä»£ç ä¹ææä¾ï¼ä½æ¯åæ ·çéçé£éçä»£ç å­å¨å¤§éçå¯èçè®¡ç®ï¼å¾å¤ä¹æ³é¨åå¯ä»¥åå¹¶çãä¼ååçDCT16*16å±éè¦46æ¬¡ä¹æ³72æ¬¡å æ³ï¼16*16çå»åªç¨åº¦æ´å¼ºï¼åæ ·çSigmaåæ°ç»æä¼æ´å æ¨¡ç³ï¼ä¸ºäºæé«16*16çéåº¦ï¼ä¹å¯ä»¥ä»¿ç§8*8çæ¹å¼ï¼å å¤§åæ ·é´éï¼å®éæµè¯é´éè°æ´ä¸º2ä¸ªåç´ ï¼å¯¹ç»æåºæ¬æ²¡å½±åï¼å¦ææé´éè°æ´ä¸º4ä¸ªåç´ ï¼å¨å å¤§çSigmaæ¶ï¼å¯ä»¥è¾ä¸ºææ¾ççå°å±é¨çæ¹æ ¼ï¼è¿ä¸ªåºè¯¥æ¯ä¸è½å¿åçï¼ å®éæµè¯å¦ææé´è·è°æ´ä¸º3ä¸ªåç´ ï¼å¶å®ç»æååå§çè¿æ¯è½æ¿åçï¼èä¸å éä¹å¾å®¢è§ã</p>
<p>ããè®ºæéæå°çæ£æ ¼åæ ·ï¼è½ç¶æä¸å®ççè®ºæ­£ç¡®æ§ï¼ä½æ¯å®éä¸å¤ªå¯æä½ï¼é¦åæ¯è·åæ»¡è¶³ç½æ ¼å¸ç½®çåæ æ¬èº«å°±æ¯ä¸ä¸ªæ¯è¾æ¢çè¿ç¨ï¼ç¬¬äºä¸ªå³ä½¿è·åäºç½æ ¼åæ ï¼å ä¸ºè¿äºåæ åå¸åºæ¬ä¸æ¯æç§åXæ¹åå¢å ï¼åYæ¹åå¢å çå¸å±æ¹å¼å¸ç½®çï¼æä»¥ä¸ºäºå©ç¨åç»­çå éæå·§ï¼è¿è¦åå¯¹ä»ä»¬è¿è¡æåºï¼è¿ä¸ªå¢å çèæ¶ä¹æ¯éå¸¸å®¢è§çï¼æä»¥æä¸ªäººè§å¾é£ä¸ªåªå·æçè®ºæä¹ã <br>ããå¦å¤ä¸ä¸ªå°±æ¯å³äºSSEåAVXå éçé¨åï¼è¿éAVXèµ·å°çå éä½ç¨ä¸æ¯ç¹å«ææ¾ï¼æ ¸å¿åå ä¼°è®¡è¿æ¯åå­å è½½åä¿å­å æ¯å¨æ´ä¸ªè¿ç¨ä¸­æ¯è¾å¤ï¼èä¸å¨è®¡ç®é¨åï¼ä¹æ¾å°è¯ç¨FMAç¸å³æä»¤æ¿ä»£mul+addï¼ä¹ä¸è§æææ¾çæ¶çã å¦å¤ï¼å¯¹äºç®æ³ä¸­ç»å¸¸ä½¿ç¨ç8*8è½¬ç½®ï¼AVXçæ¬å¦æå­¦SSEé£ç§ç´æ¥å¤çï¼å éå°±æ´æéäºãä½æ¯AVXéæä¸åçportï¼å¦æååå©ç¨è¿ä¸ªåè¿ä¸éã</p>
<p><strong><span style="font-size: 13px">ããå¤çº¿ç¨ï¼</span></strong></p>
<p><span style="font-size: 13px">ããå ä¸ºè¿ä¸ªDCTç®æ³å¶å®ä¹æ¯é¢åç®æ³ï¼æä»¥ä¸å¤ªå¥½ç´æ¥ä½¿ç¨å¤çº¿ç¨è¿è¡å¤çï¼ä½æ¯è¿æ¯æåæ³ï¼å¯¹äºç°åº¦å¾åï¼ä¸ç§æ¹æ³æ¯æç§é«åº¦æèå®½åº¦æ¹åååï¼ä½æ¯ååçæ¶åéè¦æ³¨æåååä¹é´å¿é¡»æéå ï¼ä»¥ä¿è¯è¾¹ç¼çä¸åè¢«ååå¤çï¼è½ç¶éå ä¼å¢å é£ä¹ä¸ä¸¢ä¸¢çèæ¶ï¼ä½æ¯è¿ä¸ç®å¥ï¼èå¯¹äºå½©è²å¾åï¼å ä¸ºè¦æå½©è²å¾ååééååè°ç¨åééçå¤çç®æ³ï¼æä»¥ä¸ä¸ªèªç¶çæ³æ³å°±æ¯åè§£åçåééä¹é´å¼ä¸ä¸ªçº¿ç¨å¹¶è¡å°±å¯ä»¥äºãä¸ä¸ªç®åçä»£ç å¦ä¸</span><span style="font-size: 13px">ï¼</span></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">int</span> IM_DCT_Denoising_8x8_MultiThread_SSE(unsigned <span style="color: rgba(0, 0, 255, 1)">char</span>* Src, unsigned <span style="color: rgba(0, 0, 255, 1)">char</span>* Dest, <span style="color: rgba(0, 0, 255, 1)">int</span> Width, <span style="color: rgba(0, 0, 255, 1)">int</span> Height, <span style="color: rgba(0, 0, 255, 1)">int</span> Stride, <span style="color: rgba(0, 0, 255, 1)">float</span> Sigma, <span style="color: rgba(0, 0, 255, 1)">bool</span><span style="color: rgba(0, 0, 0, 1)"> FastMode)
{
    </span><span style="color: rgba(0, 0, 255, 1)">int</span> Channel = Stride /<span style="color: rgba(0, 0, 0, 1)"> Width;
    </span><span style="color: rgba(0, 0, 255, 1)">if</span> ((Src == NULL) || (Dest == NULL))                            <span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> IM_STATUS_NULLREFRENCE;
    </span><span style="color: rgba(0, 0, 255, 1)">if</span> ((Width &lt;= <span style="color: rgba(128, 0, 128, 1)">7</span>) || (Height &lt;= <span style="color: rgba(128, 0, 128, 1)">7</span>) || (Sigma &lt;= <span style="color: rgba(128, 0, 128, 1)">0</span>))                <span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> IM_STATUS_INVALIDPARAMETER;
    </span><span style="color: rgba(0, 0, 255, 1)">if</span> ((Channel != <span style="color: rgba(128, 0, 128, 1)">1</span>) &amp;&amp; (Channel != <span style="color: rgba(128, 0, 128, 1)">3</span>))                            <span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> IM_STATUS_NOTSUPPORTED;
    </span><span style="color: rgba(0, 0, 255, 1)">int</span> Status =<span style="color: rgba(0, 0, 0, 1)"> IM_STATUS_OK;
    </span><span style="color: rgba(0, 0, 255, 1)">if</span> (Width &lt; <span style="color: rgba(128, 0, 128, 1)">256</span><span style="color: rgba(0, 0, 0, 1)">)
    {
        </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> IM_DCT_Denoising_8x8_SSE(Src, Dest, Width, Height, Stride, Sigma, FastMode);
    }
    </span><span style="color: rgba(0, 0, 255, 1)">else</span><span style="color: rgba(0, 0, 0, 1)">
    {
        </span><span style="color: rgba(0, 0, 255, 1)">if</span> (Channel == <span style="color: rgba(128, 0, 128, 1)">3</span><span style="color: rgba(0, 0, 0, 1)">)
        {
            </span><span style="color: rgba(0, 0, 255, 1)">int</span> StatusA = IM_STATUS_OK, StatusB = IM_STATUS_OK, StatusC =<span style="color: rgba(0, 0, 0, 1)"> IM_STATUS_OK;
            unsigned </span><span style="color: rgba(0, 0, 255, 1)">char</span>* Blue = (unsigned <span style="color: rgba(0, 0, 255, 1)">char</span>*)malloc(Width * Height * <span style="color: rgba(0, 0, 255, 1)">sizeof</span>(unsigned <span style="color: rgba(0, 0, 255, 1)">char</span><span style="color: rgba(0, 0, 0, 1)">));
            unsigned </span><span style="color: rgba(0, 0, 255, 1)">char</span>* Green = (unsigned <span style="color: rgba(0, 0, 255, 1)">char</span>*)malloc(Width * Height * <span style="color: rgba(0, 0, 255, 1)">sizeof</span>(unsigned <span style="color: rgba(0, 0, 255, 1)">char</span><span style="color: rgba(0, 0, 0, 1)">));
            unsigned </span><span style="color: rgba(0, 0, 255, 1)">char</span>* Red = (unsigned <span style="color: rgba(0, 0, 255, 1)">char</span>*)malloc(Width * Height * <span style="color: rgba(0, 0, 255, 1)">sizeof</span>(unsigned <span style="color: rgba(0, 0, 255, 1)">char</span><span style="color: rgba(0, 0, 0, 1)">));
            </span><span style="color: rgba(0, 0, 255, 1)">if</span> ((Blue == NULL) || (Green == NULL) || (Red ==<span style="color: rgba(0, 0, 0, 1)"> NULL))
            {
                Status </span>=<span style="color: rgba(0, 0, 0, 1)"> IM_STATUS_OUTOFMEMORY;
                </span><span style="color: rgba(0, 0, 255, 1)">goto</span><span style="color: rgba(0, 0, 0, 1)"> FreeResource;
            }
            IM_SplitRGB(Src, Blue, Green, Red, Width, Height, Stride, </span><span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">);
            </span><span style="color: rgba(0, 0, 255, 1)">#pragma</span> omp parallel sections num_threads(3)<span style="color: rgba(0, 0, 0, 1)">
            {
                </span><span style="color: rgba(0, 0, 255, 1)">#pragma</span> omp section<span style="color: rgba(0, 0, 0, 1)">
                {
                    StatusA </span>=<span style="color: rgba(0, 0, 0, 1)"> IM_DCT_Denoising_8x8_SSE(Blue, Blue, Width, Height, Width, Sigma, FastMode);
                    </span><span style="color: rgba(0, 0, 255, 1)">if</span> (StatusA != IM_STATUS_OK)    Status =<span style="color: rgba(0, 0, 0, 1)"> StatusA;
                }
                </span><span style="color: rgba(0, 0, 255, 1)">#pragma</span> omp section<span style="color: rgba(0, 0, 0, 1)">
                {
                    StatusB </span>=<span style="color: rgba(0, 0, 0, 1)"> IM_DCT_Denoising_8x8_SSE(Green, Green, Width, Height, Width, Sigma, FastMode);
                    </span><span style="color: rgba(0, 0, 255, 1)">if</span> (StatusB != IM_STATUS_OK)    Status =<span style="color: rgba(0, 0, 0, 1)"> StatusB;
                }
                </span><span style="color: rgba(0, 0, 255, 1)">#pragma</span> omp section<span style="color: rgba(0, 0, 0, 1)">
                {
                    StatusC </span>=<span style="color: rgba(0, 0, 0, 1)"> IM_DCT_Denoising_8x8_SSE(Red, Red, Width, Height, Width, Sigma, FastMode);
                    </span><span style="color: rgba(0, 0, 255, 1)">if</span> (StatusC != IM_STATUS_OK)    Status =<span style="color: rgba(0, 0, 0, 1)"> StatusC;
                }
            }
            </span><span style="color: rgba(0, 0, 255, 1)">if</span> (Status != IM_STATUS_OK)    <span style="color: rgba(0, 0, 255, 1)">goto</span><span style="color: rgba(0, 0, 0, 1)"> FreeResource;
            IM_CombineRGB(Blue, Green, Red, Dest, Width, Height, Stride, </span><span style="color: rgba(128, 0, 128, 1)">0</span><span style="color: rgba(0, 0, 0, 1)">);
        FreeResource:
            </span><span style="color: rgba(0, 0, 255, 1)">if</span> (Blue !=<span style="color: rgba(0, 0, 0, 1)"> NULL)        free(Blue);
            </span><span style="color: rgba(0, 0, 255, 1)">if</span> (Green !=<span style="color: rgba(0, 0, 0, 1)"> NULL)        free(Green);
            </span><span style="color: rgba(0, 0, 255, 1)">if</span> (Red !=<span style="color: rgba(0, 0, 0, 1)"> NULL)        free(Red);
            </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> Status;
        }
        </span><span style="color: rgba(0, 0, 255, 1)">else</span> <span style="color: rgba(0, 0, 255, 1)">if</span> (Channel == <span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">)
        {
            </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">    å¤§å¾åä¸ä¸ªçº¿ç¨å¤çï¼å ä¸ºå¨10å¹´ççµèä¸ï¼å¯è½å¾å¤è¿æ¯4æ ¸ï¼è¦çä¸ä¸ªæ ¸ç»æä½ç³»ç»æ¯è¾å¥½</span>
            <span style="color: rgba(0, 0, 255, 1)">int</span> BlockSize = Width / <span style="color: rgba(128, 0, 128, 1)">3</span><span style="color: rgba(0, 0, 0, 1)">;
            </span><span style="color: rgba(0, 0, 255, 1)">int</span> BlockA_W = BlockSize + <span style="color: rgba(128, 0, 128, 1)">7</span>;                        <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">    1/3å®½åº¦å¨å ä¸å³ä¾§å¤7ä¸ªåç´ ï¼è½å®æ´çè®¡ç®åºå·¦ä¾§BlockSizeå¤§å°çä¿¡æ¯</span>
            <span style="color: rgba(0, 0, 255, 1)">int</span> BlockB_W = BlockSize + <span style="color: rgba(128, 0, 128, 1)">14</span>;                        <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">    1/3å®½åº¦å¨å ä¸å·¦å³ä¸¤ä¾§å7ä¸ªåç´ ï¼è½å®æ´çè®¡ç®åºä¸­é´çBlockSizeå¤§å°çä¿¡æ¯</span>
            <span style="color: rgba(0, 0, 255, 1)">int</span>    BlockC_W = Width - BlockSize - BlockSize + <span style="color: rgba(128, 0, 128, 1)">7</span>;    <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">    1/3å®½åº¦å¨å ä¸å·¦ä¾§å¤7ä¸ªåç´ ï¼è½å®æ´çè®¡ç®åºå³ä¾§BlockSizeå¤§å°çä¿¡æ¯ï¼æ³¨æå®½åº¦ä¸ä¸å®è½æ´é¤ï¼æä»¥è¦ç¨æ»å®½åº¦åå»2åç1/3å¤§å°</span>

            <span style="color: rgba(0, 0, 255, 1)">int</span> StatusA = IM_STATUS_OK, StatusB = IM_STATUS_OK, StatusC =<span style="color: rgba(0, 0, 0, 1)"> IM_STATUS_OK;
            unsigned </span><span style="color: rgba(0, 0, 255, 1)">char</span>* BlockA = (unsigned <span style="color: rgba(0, 0, 255, 1)">char</span>*)malloc(BlockA_W * Height * <span style="color: rgba(0, 0, 255, 1)">sizeof</span>(unsigned <span style="color: rgba(0, 0, 255, 1)">char</span><span style="color: rgba(0, 0, 0, 1)">));
            unsigned </span><span style="color: rgba(0, 0, 255, 1)">char</span>* BlockB = (unsigned <span style="color: rgba(0, 0, 255, 1)">char</span>*)malloc(BlockB_W * Height * <span style="color: rgba(0, 0, 255, 1)">sizeof</span>(unsigned <span style="color: rgba(0, 0, 255, 1)">char</span><span style="color: rgba(0, 0, 0, 1)">));
            unsigned </span><span style="color: rgba(0, 0, 255, 1)">char</span>* BlockC = (unsigned <span style="color: rgba(0, 0, 255, 1)">char</span>*)malloc(BlockC_W * Height * <span style="color: rgba(0, 0, 255, 1)">sizeof</span>(unsigned <span style="color: rgba(0, 0, 255, 1)">char</span><span style="color: rgba(0, 0, 0, 1)">));

            </span><span style="color: rgba(0, 0, 255, 1)">if</span> ((BlockA == NULL) || (BlockB == NULL) || (BlockC ==<span style="color: rgba(0, 0, 0, 1)"> NULL))
            {
                Status </span>=<span style="color: rgba(0, 0, 0, 1)"> IM_STATUS_OUTOFMEMORY;
                </span><span style="color: rgba(0, 0, 255, 1)">goto</span><span style="color: rgba(0, 0, 0, 1)"> FreeMemory;
            }

            </span><span style="color: rgba(0, 0, 255, 1)">#pragma</span> omp parallel sections num_threads(3)<span style="color: rgba(0, 0, 0, 1)">
            {
                </span><span style="color: rgba(0, 0, 255, 1)">#pragma</span> omp section<span style="color: rgba(0, 0, 0, 1)">
                {
                    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">    æ·è´å·¦ä¾§æ°æ®å°ä¸´æ¶åå­</span>
                    <span style="color: rgba(0, 0, 255, 1)">for</span> (<span style="color: rgba(0, 0, 255, 1)">int</span> Y = <span style="color: rgba(128, 0, 128, 1)">0</span>; Y &lt; Height; Y++<span style="color: rgba(0, 0, 0, 1)">)
                    {
                        memcpy(BlockA </span>+ Y * BlockA_W, Src + Y * Stride, BlockA_W * <span style="color: rgba(0, 0, 255, 1)">sizeof</span>(unsigned <span style="color: rgba(0, 0, 255, 1)">char</span><span style="color: rgba(0, 0, 0, 1)">));
                    }

                    StatusA </span>=<span style="color: rgba(0, 0, 0, 1)"> IM_DCT_Denoising_8x8_SSE(BlockA, BlockA, BlockA_W, Height, BlockA_W, Sigma, FastMode);
                    </span><span style="color: rgba(0, 0, 255, 1)">if</span> (StatusA !=<span style="color: rgba(0, 0, 0, 1)"> IM_STATUS_OK)
                    {
                        Status </span>=<span style="color: rgba(0, 0, 0, 1)"> StatusA;
                    }
                    </span><span style="color: rgba(0, 0, 255, 1)">else</span><span style="color: rgba(0, 0, 0, 1)">
                    {
                        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">    ææ°æ®å¤å¶åå»</span>
                        <span style="color: rgba(0, 0, 255, 1)">for</span> (<span style="color: rgba(0, 0, 255, 1)">int</span> Y = <span style="color: rgba(128, 0, 128, 1)">0</span>; Y &lt; Height; Y++<span style="color: rgba(0, 0, 0, 1)">)
                        {
                            memcpy(Dest </span>+ Y * Stride, BlockA + Y * BlockA_W, BlockSize * <span style="color: rgba(0, 0, 255, 1)">sizeof</span>(unsigned <span style="color: rgba(0, 0, 255, 1)">char</span><span style="color: rgba(0, 0, 0, 1)">));
                        }
                    }
                }
                </span><span style="color: rgba(0, 0, 255, 1)">#pragma</span> omp section<span style="color: rgba(0, 0, 0, 1)">
                {
                    </span><span style="color: rgba(0, 0, 255, 1)">for</span> (<span style="color: rgba(0, 0, 255, 1)">int</span> Y = <span style="color: rgba(128, 0, 128, 1)">0</span>; Y &lt; Height; Y++<span style="color: rgba(0, 0, 0, 1)">)
                    {
                        memcpy(BlockB </span>+ Y * BlockB_W, Src + Y * Stride + BlockSize - <span style="color: rgba(128, 0, 128, 1)">7</span>, BlockB_W * <span style="color: rgba(0, 0, 255, 1)">sizeof</span>(unsigned <span style="color: rgba(0, 0, 255, 1)">char</span><span style="color: rgba(0, 0, 0, 1)">));
                    }

                    StatusB </span>=<span style="color: rgba(0, 0, 0, 1)"> IM_DCT_Denoising_8x8_SSE(BlockB, BlockB, BlockB_W, Height, BlockB_W, Sigma, FastMode);
                    </span><span style="color: rgba(0, 0, 255, 1)">if</span> (StatusB !=<span style="color: rgba(0, 0, 0, 1)"> IM_STATUS_OK)
                    {
                        Status </span>=<span style="color: rgba(0, 0, 0, 1)"> StatusB;
                    }
                    </span><span style="color: rgba(0, 0, 255, 1)">else</span><span style="color: rgba(0, 0, 0, 1)">
                    {
                        </span><span style="color: rgba(0, 0, 255, 1)">for</span> (<span style="color: rgba(0, 0, 255, 1)">int</span> Y = <span style="color: rgba(128, 0, 128, 1)">0</span>; Y &lt; Height; Y++<span style="color: rgba(0, 0, 0, 1)">)
                        {
                            memcpy(Dest </span>+ Y * Stride + BlockSize, BlockB + Y * BlockB_W + <span style="color: rgba(128, 0, 128, 1)">7</span>, BlockSize * <span style="color: rgba(0, 0, 255, 1)">sizeof</span>(unsigned <span style="color: rgba(0, 0, 255, 1)">char</span><span style="color: rgba(0, 0, 0, 1)">));
                        }
                    }
                }
                </span><span style="color: rgba(0, 0, 255, 1)">#pragma</span> omp section<span style="color: rgba(0, 0, 0, 1)">
                {
                    </span><span style="color: rgba(0, 0, 255, 1)">for</span> (<span style="color: rgba(0, 0, 255, 1)">int</span> Y = <span style="color: rgba(128, 0, 128, 1)">0</span>; Y &lt; Height; Y++<span style="color: rgba(0, 0, 0, 1)">)
                    {
                        memcpy(BlockC </span>+ Y * BlockC_W, Src + Y * Stride + <span style="color: rgba(128, 0, 128, 1)">2</span> * BlockSize - <span style="color: rgba(128, 0, 128, 1)">7</span>, BlockC_W * <span style="color: rgba(0, 0, 255, 1)">sizeof</span>(unsigned <span style="color: rgba(0, 0, 255, 1)">char</span><span style="color: rgba(0, 0, 0, 1)">));
                    }
                    StatusC </span>=<span style="color: rgba(0, 0, 0, 1)"> IM_DCT_Denoising_8x8_SSE(BlockC, BlockC, BlockC_W, Height, BlockC_W, Sigma, FastMode);
                    </span><span style="color: rgba(0, 0, 255, 1)">if</span> (StatusC !=<span style="color: rgba(0, 0, 0, 1)"> IM_STATUS_OK)
                    {
                        Status </span>=<span style="color: rgba(0, 0, 0, 1)"> StatusC;
                    }
                    </span><span style="color: rgba(0, 0, 255, 1)">else</span><span style="color: rgba(0, 0, 0, 1)">
                    {
                        </span><span style="color: rgba(0, 0, 255, 1)">for</span> (<span style="color: rgba(0, 0, 255, 1)">int</span> Y = <span style="color: rgba(128, 0, 128, 1)">0</span>; Y &lt; Height; Y++<span style="color: rgba(0, 0, 0, 1)">)
                        {
                            memcpy(Dest </span>+ Y * Stride + <span style="color: rgba(128, 0, 128, 1)">2</span> * BlockSize, BlockC + Y * BlockC_W + <span style="color: rgba(128, 0, 128, 1)">7</span>, (Width - <span style="color: rgba(128, 0, 128, 1)">2</span> * BlockSize) * <span style="color: rgba(0, 0, 255, 1)">sizeof</span>(unsigned <span style="color: rgba(0, 0, 255, 1)">char</span><span style="color: rgba(0, 0, 0, 1)">));
                        }
                    }
                }
            }
        FreeMemory:
            </span><span style="color: rgba(0, 0, 255, 1)">if</span> (BlockA !=<span style="color: rgba(0, 0, 0, 1)"> NULL)        free(BlockA);
            </span><span style="color: rgba(0, 0, 255, 1)">if</span> (BlockB !=<span style="color: rgba(0, 0, 0, 1)"> NULL)        free(BlockB);
            </span><span style="color: rgba(0, 0, 255, 1)">if</span> (BlockC !=<span style="color: rgba(0, 0, 0, 1)"> NULL)        free(BlockC);
            </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> Status;
        }
    }
    </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> Status;
}</span></pre>
</div>
<p><span style="font-size: 13px">ããä»¥ä¸ä»£ç ç°åº¦å¾ä¹æ¯ä½¿ç¨äº3ä¸ªçº¿ç¨ï¼æ³¨æå¨ä¸­é´åé¨åå¢ï¼ä¸¤è¾¹é½è¦è¿è¡éå½çæ©å±ï¼å¦åä¼å½¢æä¸æ¡æ¯è¾ææ¾çåççº¿ï¼å¤çº¿ç¨å éä¹ä¸æ¯çº¿æ§ï¼å¼ä¸ä¸ªçº¿ç¨ä¹æ¯æ æ³å¾å°3åå éçï¼å¤§çº¦ä¸º2åå·¦å³çéåº¦æåã</span></p>
<p>ããå°±è¿ä¹ä¸ªç®æ³ï¼ææææçå¯è½æåé½åäºå®ç°ï¼è½»è½»æ¾æ¾å°±å¼äºè¿7000è¡ä»£ç ï¼ä¹æ¯ä¼æè¾ã</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<img src="https://img2024.cnblogs.com/blog/349293/202601/349293-20260113121831515-1819840843.png" alt="image" loading="lazy"></p>
<p>ããç°å¨å¹´é¾å¤§äºï¼æè§æçæ¶åç¡®å®æ¯æè¾ä¸å¨äºï¼æ°çææ¯å¨ä¸æ­åå±ï¼èæä»¬ä¾æ§è¶´å¨èæ§çææ¯ä¸åé£ã ä¸è¿å¢ä¹æ æè°ï¼20å¹´åçCS1.6ï¼å å°1942ï¼æéäºé¸ç°å¨ç©èµ·æ¥è¿æ¯æé£ç§æè§ã</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<img src="https://img2024.cnblogs.com/blog/349293/202601/349293-20260113122100378-1890276755.png" alt="image" loading="lazy"></p>
<p>ãã&nbsp; è¯¥ç®æ³å¨ææ°çDemoä¸­å·²ç»æ´æ°ï¼ç¸å³çé¢å¦ä¸å¾æç¤ºï¼ä¸è½½å°åï¼<a href="https://files.cnblogs.com/files/Imageshop/SSE_Optimization_Demo.rar" target="_blank">https://files.cnblogs.com/files/Imageshop/SSE_Optimization_Demo.rar</a></p>
<p>&nbsp;</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-13 13:44">2026-01-13 13:43</span>&nbsp;
<a href="https://www.cnblogs.com/Imageshop">Imageshop</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19475839);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19475839', targetLink: 'https://www.cnblogs.com/imageshop/p/19475839', title: 'åºäºDCTåæ¢å¾åå»åªç®æ³çç»æä¼åï¼1920*1080ç°åº¦å¾åæ ¸çº¦22msï¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
        </channel>
        </rss>