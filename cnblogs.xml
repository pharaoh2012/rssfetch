<?xml version="1.0" encoding="UTF-8" ?>
    <rss version="2.0">
    <channel>
        <title><![CDATA[ ä¸»é¡µ - åå®¢å­ ]]></title>
        <link><![CDATA[ https://www.cnblogs.com/ ]]></link>
        <lastBuildDate>2026-02-01T04:27:48.765Z</lastBuildDate>
        <description><![CDATA[
        ä¸»é¡µ - åå®¢å­ RSS
    ]]></description>
        <language>zh-cn</language>
        <item>
    <title><![CDATA[ nginx locationæ²¡å­¦å¥½ï¼æèªå·±åäºä¸æ ]]></title>
    <link>https://www.cnblogs.com/grey-wolf/p/19560342</link>
    <guid>cda2f02dd365364f323d3f7274b8c0fd</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/grey-wolf/p/19560342" title="åå¸äº 2026-02-01 11:28">
    <span role="heading" aria-level="2">nginx locationæ²¡å­¦å¥½ï¼æèªå·±åäºä¸æ</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="èæ¯">èæ¯</h1>
<p>åå å¤©å¨é¨ç½²ä¸å¥ç¯å¢çæ¶åï¼æ¶ånginxè¿åï¼å½æ¶ä»¥ä¸ºååéæå®ï¼æ²¡ç¸å¯¹è¿è´¹äºå¥½äºåå¤«ï¼çè³ä»¥ä¸ºæ¯nginxçbugäºã</p>
<p>æåä¸ä¸ªå¾ï¼</p>
<p>æä»¬æä¸ªæ ¡ä¼åä½çé¡¹ç®ï¼ç±äºé¡¹ç®çåä¸æ¹æ¶åå­¦æ ¡å­¦çï¼ç½ç»å æ­¤æ¯åç¬åäºä¸ä¸ªåºåï¼å°±ç¸å½äºä¸ä¸ªç¬ç«ç½æ®µï¼éé¢æå­¦çåå¬pcãlinuxæå¡å¨ç­ç­ãæä»¬è¿æ¬¡ç»éå¼åäºä¸ä¸ªå°çååç«¯åç¦»é¡¹ç®ï¼å¼åå®äºåï¼æå°±åå¤é¨ç½²ã</p>
<p>é¨ç½²çè¯ï¼ææ¯éè¿ç±»ä¼¼äºwindowsè¿ç¨æ¡é¢çæºå¶ï¼å®éæ¯æååçVDIï¼ç¸æ¯äºwindowsè¿ç¨æ¡é¢ï¼åºè¯¥æ¯å¤äºæ´å¤æä»¶è¿åºçç®¡æ§æºå¶ï¼æ¯å¦æ²¡æéçè¯ï¼è¿ç¨ä¸»æºéçæä»¶é»è®¤æ¯æ·è´ä¸åºæ¥çï¼ã</p>
<p>éè¿è¿ç¨æ¡é¢è¿å¥è¿ç¨windowsåï¼å¨éé¢åsshè¿æ¥linuxæå¡å¨ï¼å¨ä¸é¢é¨ç½²nginxãåç«¯åï¼ç±äºæå¡å¨æéï¼ç´æ¥æåç«¯spring bootåä¹æ¯é¨ç½²å¨äºè¿ä¸å°æºå¨ä¸ï¼æ¶æå¦ä¸ã</p>
<p><img src="https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260201104040556.png" alt="image-20260201104040556" loading="lazy"></p>
<p>åå¼å§é¨ç½²å®æåï¼åºç¨æå¡å¨ä¸ï¼åè®¾ipä¸º1.1.1.1ï¼çnginxï¼çå¬80ç«¯å£ï¼é£ä¹ï¼å¨è¿ç¨windowsä¸çæµè§å¨ï¼æ¯å¯ä»¥è®¿é®ï¼http://1.1.1.1:80æ¥æå¼ç³»ç»çï¼ä½æ¯ï¼å¨æçåå¬pcä¸ä¸è¡ã</p>
<p>ç±äºè¿ç§ä¸è¬æ¯éè¦ç»é¢å¯¼æ¼ç¤ºçï¼é£èªç¶è¦æ1.1.1.1:80ç«¯å£æ´é²åºæ¥ï¼è®©åå¬pcç½ç»å¯ä»¥è®¿é®ãä¸ºäºå®å¨èµ·è§ï¼è¿ç§ä¸è¬åªå¼æ¾å¿è¦çç«¯å£ï¼å¦ä¸é¢å°±åªå¼æ¾80ç«¯å£ãå°±åæä»¬å¹³æ¶ç³»ç»å¯¹äºèç½ä»å¼æ¾443ç«¯å£ä¸æ ·ã</p>
<h1 id="é®é¢">é®é¢</h1>
<p>ç±äºçæ¬åå¼å§ä¸ç¨³å®ï¼èªç¶æ¯ä¼åç°ä¸äºbugï¼åç°bugå°±éè¦çæ¥å¿ï¼æä»¬è¿è¾¹çæ¥å¿è¿æ¯æ¯è¾åå§çï¼ä¹æ²¡æä»ä¹elkè¿ç±»ãspring bootæå¡çæ¥å¿ï¼å°±å¨ä¸è¿°ç1.1.1.1è¿å°æå¡å¨çç¹å®ç®å½ä¸ï¼æå°±æ³çï¼éè¿80ç«¯å£ï¼nginxéé¢åéä¸ªlocationï¼ælogæ´é²åºæ¥ï¼æ¹ä¾¿ç»ååäºçæ¥å¿ï¼åºè¯¥æ´æ¹ä¾¿ä¸äºã</p>
<p>åå§çnginxéç½®å¦ä¸ï¼å°±ä¸ä¸ªååç«¯åç¦»çéç½®ï¼</p>
<pre><code class="language-shell">server {
    listen 80;
    server_name localhost;
    location / {
        root /usr/local/nginx/html/quantify-trade-platform-frontend/dist;
        index index.html  index.htm;
        try_files $uri $uri/ /index.html;
    }
    location ~ /quantify-trade-platform-admin {
        proxy_pass http://localhost:8093;
   }
}
</code></pre>
<p>æä»¬javaæå¡å¢ï¼æ¥å¿æ¯å¨:</p>
<p>/opt/quantify-trade-platform-admin/quantify-trade-platform-admin-0.1-SNAPSHOT/logs</p>
<p><img src="https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260201105400498.png" alt="image-20260201105400498" loading="lazy"></p>
<p>æä»¥ï¼æå°±å äºä¸æ®µéç½®ï¼</p>
<pre><code class="language-shell">    location /mylog/ {
      alias /opt/quantify-trade-platform-admin/quantify-trade-platform-admin-0.1-SNAPSHOT/logs/;
      autoindex on;
    }
</code></pre>
<p>å®æ´å¦ä¸ï¼</p>
<pre><code class="language-shell">    server {
        listen 80;
        server_name localhost;
        location / {
            root /usr/local/nginx/html/quantify-trade-platform-frontend/dist;
            index index.html  index.htm;
            try_files $uri $uri/ /index.html;
        }
        location ~ /quantify-trade-platform-admin {
            proxy_pass http://localhost:8093;
        }
		-- æ°å¢å¦ä¸:
	    location /mylog/ {
	      alias /opt/quantify-trade-platform-admin/quantify-trade-platform-admin-0.1-SNAPSHOT/logs/;
          autoindex on;
        }
   }
</code></pre>
<p>å å¥½åï¼æè¯äºä¸, <a href="http://1.1.1.1/mylog/%EF%BC%8C%E5%8F%AF%E4%BB%A5%E6%AD%A3%E5%B8%B8%E8%AE%BF%E9%97%AE%EF%BC%9A%EF%BC%88%E5%AE%9E%E9%99%85%E4%B8%8A%EF%BC%8C%E6%8A%98%E8%85%BE%E8%BF%99%E4%B8%AAautoindex%E8%BF%99%E4%B8%AAlocation%EF%BC%8C%E4%B9%9F%E8%8A%B1%E4%BA%86%E4%B8%8D%E5%B0%91%E6%97%B6%E9%97%B4%EF%BC%8C%E8%A6%81%E4%B8%8D%E8%A6%81%E5%8A%A0/%E4%B9%8B%E7%B1%BB%E7%9A%84%EF%BC%89" target="_blank" rel="noopener nofollow">http://1.1.1.1/mylog/ï¼å¯ä»¥æ­£å¸¸è®¿é®ï¼ï¼å®éä¸ï¼æè¾è¿ä¸ªautoindexè¿ä¸ªlocationï¼ä¹è±äºä¸å°æ¶é´ï¼è¦ä¸è¦å /ä¹ç±»çï¼</a></p>
<p><img src="https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260201105622188.png" alt="image-20260201105622188" loading="lazy"></p>
<p>ä½æ¯å¢ï¼æå¨ç¹å»éé¢çæä»¶çæ¶åï¼åç°æ¥404ï¼</p>
<p><a href="http://1.1.1.1/mylog/quantify-trade-platform-admin.log" target="_blank" rel="noopener nofollow">http://1.1.1.1/mylog/quantify-trade-platform-admin.log</a></p>
<p><img src="https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260201105804252.png" alt="image-20260201105804252" loading="lazy"></p>
<p>è¿ä¸ªé®é¢æææè¾çå¤åï¼æä¸ç´ä»¥ä¸ºæ¯æautoindexè¿åï¼æ¯ä¸æ¯åªééç½®æ²¡å¯¹ï¼å°±è¿ä¸ªå°æ¹ï¼åå¤æè¾ï¼åå¤æè¾ï¼</p>
<pre><code class="language-shell">location /mylog/ {
  alias /opt/quantify-trade-platform-admin/quantify-trade-platform-admin-0.1-SNAPSHOT/logs/;
  autoindex on;
}
</code></pre>
<p>å¿«ä¸ç­çæ¶åï¼æåç°å¦æææadminæ¹æaminãadinï¼å°±æ¼éä¸ä¸¤ä¸ªå­æ¯ï¼å°±è½ä¸è½½ä¸æ¥äºãå½æ¶ä»¥ä¸ºï¼æ¯autoindexè¿ç§éææä»¶æºå¶ï¼ä¼ä¸ä¼æ¯ä¸ºäºå®å¨èèï¼æä»¶åå¹éå°adminè¿ä¸ªå³é®å­å¥çï¼å°±404.</p>
<p><img src="https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260201110908710.png" alt="image-20260201110908710" loading="lazy"></p>
<p>ä½åé¢ï¼æælogæ·è´ä¸ä¸ï¼å»æä¸­é´çä¸­åçº¿ï¼ä¹å¯ä»¥ä¸è½½ä¸æ¥ï¼</p>
<p><img src="https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260201110108269.png" alt="image-20260201110108269" loading="lazy"></p>
<p>ç¶åç½ä¸ä¸é¡¿ä¹±æï¼ççæ¯ä¸æ¯ä¸­åçº¿å¯¼è´çé®é¢å¥çï¼æèæ¯å ä¸ºå«æadminå³é®å­å¯¼è´çï¼ç»æé½æ²¡æ¥å°æäººéå°è¿ç§é®é¢ã</p>
<p>ä¸é¡¿æç´¢çå¦èï¼ä»¥ä¸ºæ¯nginxçä»ä¹å°bugï¼å½æ¶æè§autoindexè¿ç§éææä»¶æºå¶ï¼å¯è½ç¨çäººå°ï¼æ¯ä¸æ¯æå¥å°bugæ­£å¥½è¢«ææè§äºï¼</p>
<h1 id="æ¬¡æ¥ææ¥">æ¬¡æ¥ææ¥</h1>
<p>ç¬¬äºå¤©æ©ä¸æ¥äºåï¼æ¾äºå°æå¡å¨ï¼æ°æ­å»ºï¼ç»æåç°admin.txtå¯ä»¥æ­£å¸¸ä¸è½½ï¼ä¸ºå¥å¨é£å°æºå¨ä¸å°±ä¸è¡å¢ï¼</p>
<p>ææ³èµ·æ¥straceå½ä»¤ï¼é£å°±ççææ²¡æçº¿ç´¢å§ï¼</p>
<pre><code class="language-shell">strace -p 121920 -s 1000  -t -e trace=network,file,desc,process
</code></pre>
<p>ç»æè¯·æ±http://1.1.1.1/mylog/quantify-trade-platform-admin.log æ¶ï¼åç°ä¿¡æ¯æ¾ç¤ºåºï¼åèµ·äºsocketæä½ï¼è¯·æ±äºspringbootæå¡çç«¯å£ã</p>
<p>å½æ¶å¾å¥æªï¼ç¬¬ä¸æ¬¡è¿æ²¡æ¾å°å¿ä¸ï¼ç¶åå¤æµäºä¸éï¼åç°è¿æ¯è¿æ ·ãç¶åå°±åtcpdumpæäºä¸ªåï¼å¦ï¼è¿ä¸ªæ¥å¿æä»¶çè¯·æ±æä¹è¢«åå°åç«¯æå¡å»äºã</p>
<p>ç¶ååä¸çlocationï¼</p>
<p><img src="https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260201111403498.png" alt="image-20260201111403498" loading="lazy"></p>
<p>è¡å§ï¼ä¸çè¯å®æ¯locationä¸­çé£ä¸ª<sub>çé®é¢äºï¼ç±äºæ¥å¿æä»¶ååæä»¬åç«¯æ¥å£çåç¼æ¯ä¸æ ·çï¼æä»¥å¹éå°äºä¸å¾çé£ä¸ªlocationï¼ç¶å</sub>åæ¯æ­£åå¹éï¼è¿åè¿å ä¸ªç¬¦å·ä¸ç´è®°ä¸æ¸æ¥ï¼è¿ä¸æèªå·±åäºï¼</p>
<h1 id="è§£å³æ¹æ³å¦ä½ç¥éurlå¹éä¸äºåªä¸ªlocation">è§£å³æ¹æ³ï¼å¦ä½ç¥éurlå¹éä¸äºåªä¸ªlocation</h1>
<p>åè¿ç¯æç« æ¶ï¼ç½ä¸æç´¢äºä¸ï¼åç°æè¿ä¹ä¸ä¸ªæå·§ï¼</p>
<p><a href="https://stackoverflow.com/questions/12703702/nginx-test-which-location-used-to-process-request#:~:text=If%20you%20just%20want%20to,3%20Comments" target="_blank" rel="noopener nofollow">https://stackoverflow.com/questions/12703702/nginx-test-which-location-used-to-process-request#:~:text=If you just want to,3 Comments</a></p>
<p><a href="https://stackoverflow.com/questions/12703702/nginx-test-which-location-used-to-process-request" target="_blank" rel="noopener nofollow">https://stackoverflow.com/questions/12703702/nginx-test-which-location-used-to-process-request</a></p>
<p>å°±æ¯å¨æ¯ä¸ªlocationä¸­å ä¸ä¸ªè¯­å¥ï¼å¨è¿åçhttp headerä¸­å ä¸ä¸ªï¼</p>
<pre><code class="language-shell">add_header location 1 always;
</code></pre>
<p>æ³¨æï¼è¿éè¦å alwaysï¼ä¸ç¶åæè¿ç§404æåµä¸ï¼ä¸å alwaysæ¯ä¸ä¼æè¿ä¸ªheaderçã</p>
<p><img src="https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260201111900000.png" alt="image-20260201111900000" loading="lazy"></p>
<p>å äºalwaysï¼æä¼åä¸é¢è¿æ ·ï¼</p>
<p><img src="https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260201112049861.png" alt="image-20260201112049861" loading="lazy"></p>
<p>å¦å¤ï¼ç±äºlocationæ¯ä¸ä¸ªhttpè§èä¸­é¢å®ä¹çheaderï¼å403éå®åéåä½¿ç¨ï¼æä»¬å¯ä»¥æ¢ä¸ªåå­ï¼</p>
<pre><code class="language-shell">    add_header mylocation 2 always;
</code></pre>
<p><img src="https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260201112228298.png" alt="image-20260201112228298" loading="lazy"></p>
<h1 id="å¢å æ¥å¿">å¢å æ¥å¿</h1>
<p>å¦å¤ä¸ä¸ªæ¹å¼ï¼å°±æ¯ææ¥å¿å¤æä¸ç¹ï¼æè¯è¿ä¸¤ç§ï¼</p>
<h2 id="error_log">error_log</h2>
<pre><code class="language-shell">error_log  logs/my_error.log  info;
</code></pre>
<p><a href="https://nginx.org/en/docs/ngx_core_module.html#error_log" target="_blank" rel="noopener nofollow">https://nginx.org/en/docs/ngx_core_module.html#error_log</a></p>
<p>vim /usr/local/nginx/logs/my_error.log</p>
<p>ä½åç°æ²¡å¥ç¨ï¼è¿æ¯æ²¡æè¯¦ç»æ¥å¿ã</p>
<h2 id="access-log">access log</h2>
<p><img src="https://dump-1252523945.cos.ap-shanghai.myqcloud.com/img/image-20260201112452079.png" alt="image-20260201112452079" loading="lazy"></p>
<pre><code class="language-shell">    log_format upstream_time '$remote_addr - $remote_user [$time_local] '
                             '"$request" $status $body_bytes_sent '
                             '"$http_referer" "$http_user_agent"'
                             'rt="$request_time" $upstream_addr uct="$upstream_connect_time" uht="$upstream_header_time" urt="$upstream_response_time"';

    server {
        listen       80;
        server_name  localhost;


        access_log  logs/my.access.log  upstream_time;
</code></pre>
<p>éè¿ä¸é¢è¿ç±»æ¥å¿ï¼ä¹è½å¸®æä»¬çå°ï¼å°åºèµ°å°äºåªä¸ªlocationï¼ååä»£çå°äºåªå°åç«¯æå¡å¨ã</p>
<h2 id="debug-log">debug log</h2>
<p><a href="https://nginx.org/en/docs/debugging_log.html" target="_blank" rel="noopener nofollow">https://nginx.org/en/docs/debugging_log.html</a></p>
<p>è¿ä¸ªè¦å¨ç¼è¯æ¶æå¼ï¼</p>
<pre><code class="language-shell">./configure --with-debug ...
</code></pre>
<p>è¿ä¸ªæå°±æ²¡è¯äºï¼åç»­æç©ºåè¯´ã</p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-02-01 11:29">2026-02-01 11:28</span>&nbsp;
<a href="https://www.cnblogs.com/grey-wolf">ä¸å½æ¢¦å</a>&nbsp;
éè¯»(<span id="post_view_count">5</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19560342);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19560342', targetLink: 'https://www.cnblogs.com/grey-wolf/p/19560342', title: 'nginx locationæ²¡å­¦å¥½ï¼æèªå·±åäºä¸æ' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ä»0å°1ï¼å¿«éè®­ç»å¹¶ä½¿ç¨YOLOæ¨¡å ]]></title>
    <link>https://www.cnblogs.com/ClownLMe/p/19559180</link>
    <guid>65df351b854a545c186b8f26d64191cd</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ClownLMe/p/19559180" title="åå¸äº 2026-01-31 21:54">
    <span role="heading" aria-level="2">ä»0å°1ï¼å¿«éè®­ç»å¹¶ä½¿ç¨YOLOæ¨¡å</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="ç®ä»">ç®ä»</h1>
<p><strong>YOLO</strong>æ¯ç®åè®¡ç®æºè§è§é¢åæåæ²¿ãåºç¨æå¹¿æ³ç<strong>ç®æ æ£æµ</strong>ç®æ³æ¡æ¶ï¼ä»è½å¿«éè¯å«åºåç®æ ï¼å¹¿æ³åºç¨äºæ¸¸æï¼æ äººé©¾é©¶ï¼å·¥ä¸ç­é¢åã</p>
<p>ä»¥è¯å«èº²é¿æè½æ»åçæ¸¸æçç©ä½å¾çä½ä¸ºä¾å­ã</p>
<h1 id="ä¸ç¯å¢éç½®">ä¸ï¼ç¯å¢éç½®</h1>
<pre><code class="language-bash">pip install ultralytics
</code></pre>
<h1 id="äºåå¤æ°æ®é">äºï¼åå¤æ°æ®é</h1>
<p>è¿ä¸ªæ ¼å¼ç®å½å¦ä¸ï¼</p>
<pre><code class="language-bash">my_dataset/
âââ data.yaml # éç½®æä»¶ï¼å®ä¹è·¯å¾åç±»å«ï¼
âââ train/ #è®­ç»æ°æ®é
â   âââ images/ # è®­ç»å¾ç
â   âââ labels/ # æ æ³¨æä»¶ (.txt)
âââ val/ #éªè¯æ°æ®é
    âââ images/ 
    âââ labels/ 
</code></pre>
<h3 id="datayml">data.yml</h3>
<pre><code class="language-yaml">path: D:\D_MyProject\Ai\game_ai\my_dataset #æ°æ®éè·¯å¾
train: train/images #è®­ç»éå¾çè·¯å¾
val: val/images #éªè¯éå¾çè·¯å¾

nc: 3 #æ è®°ä¸ªæ°
names:  #æ¯ä¸ªæ è®°çåç§°
&nbsp; 0: player
&nbsp; 1: enemy
&nbsp; 2: game_over
</code></pre>
<h3 id="ä¸é¢æ¯ç¨aiçæäºæ°æ®éççæèæ¬">ä¸é¢æ¯ç¨AIçæäºæ°æ®éççæèæ¬</h3>
<p><mark>æ°æ®éå¤ªå¤äºï¼è¿éä¸ºäºæ¼ç¤ºï¼æèå­¦ä¹ ï¼å¯ä»¥ç´æ¥ä½¿ç¨ä¸é¢èæ¬</mark></p>
<pre><code class="language-python">import pygame
import random
import sys
import os
import shutil

# =================éç½®åºå=================
# æ°æ®éæ ¹ç®å½åç§°
DATASET_ROOT = "my_dataset"
# ééæ»æ°é
MAX_IMAGES = 1000
# è®­ç»éå æ¯ (0.8 = 80% è®­ç», 20% éªè¯)
TRAIN_RATIO = 0.8

# ================= 1. ç¯å¢æ¸çä¸ç®å½åå»º =================
print(f"ð æ­£å¨åå§åæ°æ®éç®å½: {DATASET_ROOT} ...")

# å¦æç®å½å·²å­å¨ï¼åå é¤ï¼é²æ­¢æ§æ°æ®æ··å¥ï¼ï¼ç¡®ä¿æ°æ®çº¯å
if os.path.exists(DATASET_ROOT):
    shutil.rmtree(DATASET_ROOT)

# åå»º YOLO æ åç®å½ç»æ
for split in ['train', 'val']:
    os.makedirs(os.path.join(DATASET_ROOT, split, 'images'), exist_ok=True)
    os.makedirs(os.path.join(DATASET_ROOT, split, 'labels'), exist_ok=True)

# ================= 2. èªå¨çæ data.yaml =================
yaml_content = f"""
path: {os.path.abspath(DATASET_ROOT)} # ä½¿ç¨ç»å¯¹è·¯å¾ï¼é²æ­¢æ¥é
train: train/images
val: val/images

nc: 3
names:
  0: player
  1: enemy
  2: game_over
"""
with open(os.path.join(DATASET_ROOT, "data.yaml"), "w", encoding='utf-8') as f:
    f.write(yaml_content)
print("â data.yaml éç½®æä»¶å·²çæã")

# ================= 3. æ¸¸æä¸ééé»è¾ =================
pygame.init()
WIDTH, HEIGHT = 800, 600
# ä½¿ç¨ hidden æ¨¡å¼ææ­£å¸¸æ¨¡å¼åå¯ï¼è¿éç¨æ­£å¸¸æ¨¡å¼æ¹ä¾¿ä½ çå°è¿åº¦
screen = pygame.display.set_mode((WIDTH, HEIGHT))
pygame.display.set_caption("Auto Data Generator")
clock = pygame.time.Clock()

font_big = pygame.font.SysFont("monospace", 50)
font_small = pygame.font.SysFont("monospace", 35)

# æ¸¸æç¶æ
player_size, enemy_size = 50, 50
player_x = WIDTH // 2
player_y = HEIGHT - player_size - 10
enemies = []

img_count = 0
GAMEPLAY_LIMIT = int(MAX_IMAGES * 0.9) # 90% æ­£å¸¸æ¸¸æï¼10% Game Over

print(f"ð¸ å¼å§éé {MAX_IMAGES} å¼ å¾ç (èªå¨åå Train/Val)...")

while img_count &lt; MAX_IMAGES:
    # å¤çéåºäºä»¶ï¼é²æ­¢å¡æ­»
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            pygame.quit()
            sys.exit()

    screen.fill((0, 0, 0))
    labels = [] # å­å¨å½åå¸§çæ ç­¾
    dw, dh = 1.0 / WIDTH, 1.0 / HEIGHT # å½ä¸åç³»æ°

    # --- é»è¾åæ¯ï¼æ­£å¸¸æ¸¸æ vs Game Over ---
    if img_count &lt; GAMEPLAY_LIMIT:
        # A. æ­£å¸¸æ¸¸æç»é¢
        # 1. ç©å®¶ç§»å¨
        if random.random() &lt; 0.2: # å¢å ç§»å¨é¢ç
            player_x += random.choice([-15, 15])
            player_x = max(0, min(WIDTH - player_size, player_x))

        # 2. æäººçæä¸ç§»å¨
        if random.randint(0, 20) == 0: # å¢å æäººå¯åº¦
            enemies.append([random.randint(0, WIDTH - enemy_size), 0])
        
        for enemy in enemies: enemy[1] += 15 # å å¿«ä¸è½éåº¦
        enemies = [e for e in enemies if e[1] &lt; HEIGHT]

        # 3. ç»å¶ç©å®¶ (Class 0)
        pygame.draw.rect(screen, (50, 150, 255), (player_x, player_y, player_size, player_size))
        # è®¡ç® YOLO åæ  (class x_center y_center width height)
        px, py = (player_x + player_size/2) * dw, (player_y + player_size/2) * dh
        labels.append(f"0 {px:.6f} {py:.6f} {player_size*dw:.6f} {player_size*dh:.6f}")

        # 4. ç»å¶æäºº (Class 1)
        for e in enemies:
            pygame.draw.rect(screen, (255, 50, 50), (e[0], e[1], enemy_size, enemy_size))
            ex, ey = (e[0] + enemy_size/2) * dw, (e[1] + enemy_size/2) * dh
            labels.append(f"1 {ex:.6f} {ey:.6f} {enemy_size*dw:.6f} {enemy_size*dh:.6f}")

    else:
        # B. Game Over ç»é¢ (Class 2)
        text_surf = font_big.render("GAME OVER", True, (255, 50, 50))
        
        # éæºæå¨ä½ç½®ï¼é²æ­¢è¿æå
        off_x, off_y = random.randint(-50, 50), random.randint(-50, 50)
        text_x = WIDTH // 2 - text_surf.get_width() // 2 + off_x
        text_y = HEIGHT // 2 - 100 + off_y
        screen.blit(text_surf, (text_x, text_y))

        # å¹²æ°é¡¹
        score_surf = font_small.render(f"Score: {random.randint(0,999)}", True, (255,255,255))
        screen.blit(score_surf, (WIDTH//2 - score_surf.get_width()//2, HEIGHT//2 + 50))

        # è®°å½æ ç­¾
        tw, th = text_surf.get_width(), text_surf.get_height()
        tx, ty = (text_x + tw/2) * dw, (text_y + th/2) * dh
        labels.append(f"2 {tx:.6f} {ty:.6f} {tw*dw:.6f} {th*dh:.6f}")

    # ================= 4. ä¿å­é»è¾ (æ ¸å¿ä¿®æ¹) =================
    pygame.display.flip()
    
    # éæ ·çï¼ä¸æ¯æ¯ä¸å¸§é½ä¿å­ï¼é²æ­¢éå¤åº¦è¿é« (è¿éè®¾ä¸º 30% æ¦çä¿å­)
    if random.random() &lt; 0.3:
        # A. å³å®æ¯å» Train è¿æ¯ Val
        split_folder = "train" if random.random() &lt; TRAIN_RATIO else "val"
        
        # B. çææä»¶å
        filename = f"{img_count:06d}"
        img_save_path = os.path.join(DATASET_ROOT, split_folder, "images", f"{filename}.jpg")
        lbl_save_path = os.path.join(DATASET_ROOT, split_folder, "labels", f"{filename}.txt")

        # C. ä¿å­å¾ç
        pygame.image.save(screen, img_save_path)

        # D. ä¿å­æ ç­¾
        with open(lbl_save_path, "w") as f:
            f.write("\n".join(labels))

        img_count += 1
        
        # æå°è¿åº¦æ¡
        print(f"[{split_folder.upper()}] è¿åº¦: {img_count}/{MAX_IMAGES}", end="\r")

    # å éæ¨¡æï¼ä¸è¦åç´åæ­¥ï¼è¶å¿«è¶å¥½
    clock.tick(0) 

pygame.quit()
print(f"\n\nâ¨ å¨é¨å®æï¼æ°æ®éå·²å°±ç»ªï¼{os.path.abspath(DATASET_ROOT)}")
print("ð¡ ä¸ä¸æ­¥ï¼ç´æ¥è¿è¡ model.train(data='my_dataset/data.yaml')")
</code></pre>
<h1 id="ä¸è®­ç»yoloæ¨¡å">ä¸ï¼è®­ç»YOLOæ¨¡å</h1>
<p>å¯ä»¥çå°ï¼ä½¿ç¨<code>ultralytics</code>æ¡æ¶è®­ç»YOLOçä»£ç éå¸¸ç®åï¼åªéè¦å è¡<br>
<mark><strong>æ³¨æï¼è¿éYOLOä¼èªå¨ä¸è½½æ¨¡åå¹¶è®­ç»ï¼ä¸è½½æ¶å¤±è´¥å¯è½éè¦ææ¢¯å­</strong></mark></p>
<pre><code class="language-python">from ultralytics import YOLO

def train_model():
    #å è½½æ¨¡å
    model = YOLO("yolo11n.pt") 

    #å¼å§è®­ç»
    print("å¼å§è®­ç»...")
    results = model.train(
        data="my_dataset/data.yaml", #æ°æ®ééç½®æä»¶
        epochs=30, #è®­ç»è½®æ°
        imgsz=640, #å¾çè¾å¥å°ºå¯¸
        batch=16, #æ¾å­å¤å¤§å¯ä»¥æ¹å¤§ï¼æ¯å¦ 32 æ 64
        device=0, #å¼ºå¶ä½¿ç¨ç¬¬ä¸å¼ æ¾å¡ (éè¦CUDA)
        workers=0, #Windowsä¸è®¾ä¸º0é²æ­¢å¤è¿ç¨æ¥é
        project="dodge_project",#ä¿å­è·¯å¾
        name="ai_model" #è®­ç»è¿è¡åç§°
    )
    print(f"è®­ç»å®æï¼æä½³æ¨¡åä¿å­å¨: {results.save_dir}/weights/best.pt")

if __name__ == "__main__":
    train_model()
</code></pre>
<h1 id="åä½¿ç¨yoloæ¨¡å">åï¼ä½¿ç¨YOLOæ¨¡å</h1>
<pre><code class="language-python">from ultralytics import YOLO

#éç½®è·¯å¾
MODEL_PATH = "dodge_project/ai_model/weights/best.pt" 
PIC_PATH = "my_dataset/val/images/000045.jpg"

#å è½½æ¨¡å
model = YOLO(MODEL_PATH)
print(f"æ¨¡åå è½½æå")

#è¯å«å¾ç
results = model.predict(PIC_PATH, verbose=False, conf=0.4, imgsz=640)
result = results[0]

#è·åä¿¡æ¯å¹¶æå°
for box in result.boxes:
    # è·ååæ  (x1, y1, x2, y2)ãç±»å« ID åç½®ä¿¡åº¦
    x1, y1, x2, y2 = map(int, box.xyxy[0])
    cls_id = int(box.cls[0])
    conf = float(box.conf[0])
    
    # ç±»å«åç§°æ å°
    names = {0: "Player", 1: "Enemy", 2: "Game Over"}
    label = names.get(cls_id, f"Unknown({cls_id})")
    print(f"æ¾å°ç©ä½: [{label:10}] | ç½®ä¿¡åº¦: {conf:.2f} | åæ : ({x1}, {y1}) -&gt; ({x2}, {y2})")

#å±ç¤ºå¾ç
result.show()
</code></pre>
<p><strong>å¦æâ¤åæ¬¢â¤æ¬ç³»åæç¨ï¼å°±ç¹ä¸ªå³æ³¨å§ï¼åç»­ä¸å®ææ´æ°~</strong></p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-31 21:55">2026-01-31 21:54</span>&nbsp;
<a href="https://www.cnblogs.com/ClownLMe">ClownLMe</a>&nbsp;
éè¯»(<span id="post_view_count">69</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19559180);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19559180', targetLink: 'https://www.cnblogs.com/ClownLMe/p/19559180', title: 'ä»0å°1ï¼å¿«éè®­ç»å¹¶ä½¿ç¨YOLOæ¨¡å' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ãä¿å§çº§æç¨ãææææä½ å®è£OpenClawå¹¶æ¥å¥é£ä¹¦ï¼è®©AIå¨èå¤©è½¯ä»¶éå¸®ä½ å¹²æ´» ]]></title>
    <link>https://www.cnblogs.com/weipo0105/p/19558953</link>
    <guid>bb71077863ac0e0d0386573412360a1d</guid>
    <description>
    <![CDATA[ 
		<h1 class="postTitle">
			<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/weipo0105/p/19558953" title="åå¸äº 2026-01-31 19:50">
    <span role="heading" aria-level="2">ãä¿å§çº§æç¨ãææææä½ å®è£OpenClawå¹¶æ¥å¥é£ä¹¦ï¼è®©AIå¨èå¤©è½¯ä»¶éå¸®ä½ å¹²æ´»</span>
    

</a>

		</h1>
		<div class="clear"></div>
		<div class="postBody">
			    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131195003333-854515303.png" alt="ãä¿å§çº§æç¨ãææææä½ å®è£OpenClawå¹¶æ¥å¥é£ä¹¦ï¼è®©AIå¨èå¤©è½¯ä»¶éå¸®ä½ å¹²æ´»" class="desc_img">
        OpenClaw æ¯ä¸æ¬¾è½ç´æ¥æä½ä½ çµèçå¼æºAIå©æï¼ä¸æ­¢äºèå¤©ï¼æ´è½æ¿ä½ æ§è¡ä»»å¡ãæ¬ææä¾ä¸ä»½ä¿å§çº§æç¨ï¼ä»é¶å¼å§ï¼è¯¦ç»æ¼ç¤ºå¦ä½å¨ Windows ç³»ç»ä¸å®æ OpenClaw çå®è£ãåå§éç½®ï¼å¹¶éç¹ä¸æ­¥æ­¥æä½ æ¥å¥é£ä¹¦æºå¨äººï¼æç»å®ç°å¨é£ä¹¦Appä¸­ç´æ¥ææ¥ä½ çAIå©æå¤çå·¥ä½ãè·éå¾ææå¼ï¼è½»æ¾æ¥æä½ çä¸ªäººâè´¾ç»´æ¯âã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>è¿éååä¸ä¸ç®åçç§æ®ï¼</p>
<p><code>OpenClaw</code> çåå­ç»åäºä¸æ¬¡åæ´ï¼ç¬¬ä¸æ¬¡å«å <code>ClawdBot</code>ï¼åæ¥å ä¸ºåå­è· <code>Claude</code> å¤ªè¿ç¸ä¼¼ï¼è¢« <code>CLaude</code> åä¾µæï¼éæ¹å <code>MoltBot</code> ã</p>
<p>ä½æ¯åæ¥å¨æ¹åè¿ç¨ä¸­é­éåååç¤¾äº¤è´¦å·è¢«æ¢æ³¨ï¼çè³åºåååå å¯è´§å¸å²é­èçæåµï¼å¯¼è´åç§°ä¼ æ­åé»ã</p>
<p>æç»å®åä¸ºï¼<strong>OpenClaw</strong>ã</p>
<p>æä»¥ï¼åå­ç»åååé¡ºåºä¸ºï¼ClawdBot -&gt; MoltBot -&gt; OpenClaw</p>
<p>å¤§å®¶ä¸è¦å ä¸ºåå­å°æäºï¼æçæ¯ä¸æ¯èªå·±ä¸éè½¯ä»¶äºï¼ä»ä»¬é½æ¯åä¸ä¸ªã</p>
<h1 id="ä¸ä»ä¹æ¯-openclaw">ä¸ãä»ä¹æ¯ OpenClawï¼</h1>
<p><strong>OpenClaw</strong>ï¼æ¾ç¨å Clawdbotï¼æ¯ä¸æ¬¾ 2026 å¹´çç«çå¼æºä¸ªäºº AI å©æï¼GitHub ææ å·²è¶è¿ 10 ä¸é¢ãä¸ä¼ ç» AI èå¤©æºå¨äººçæ ¹æ¬åºå«å¨äºï¼</p>
<ul>
<li><strong>çæ­£çæ§è¡è½å</strong>ï¼ä¸ä»è½åç­é®é¢ï¼è¿è½å®éæä½ä½ ççµè</li>
<li><strong>24/7 å¨å¤©åå¾å½</strong>ï¼å¨ä½ ç¡è§æ¶ä¹è½ä¸»å¨å®æä»»å¡</li>
<li><strong>å®å¨å¼æºåè´¹</strong>ï¼æ°æ®å®å¨ææ§å¨èªå·±æä¸­</li>
<li><strong>æ¯æå¤ç§éè®¯å¹³å°</strong>ï¼å¨å½å¤ï¼WhatsAppãTelegramãDiscordãSlackãiMessage ç­ï¼å¨å½åï¼é£ä¹¦ï¼ééç­åå¤§ååçå³æ¶èå¤©è½¯ä»¶å·²ç»æ¯ææ¥å¥</li>
</ul>
<p><strong>å®è½åä»ä¹ï¼</strong></p>
<p>å®ä¸åªæ¯åç­é®é¢çèå¤©æºå¨äººï¼èæ¯ççè½å¨ä½ çµèä¸å¨ææä½ãæ¯å¦ä½ åè¯å®âå¸®ææ´çä¸ä¸ä¸ä¸ªæçé®ä»¶âï¼å®å°±é»é»å»å¤çäºï¼ä½ ç¡è§æ¶ï¼å®è¿è½ç»§ç»­å¹²æ´»ï¼éè®¢å¹¿åãé¢çº¦è¡ç¨ãçè³æ¾æ¾ Bugã</p>
<p>å®å®å¨åè´¹ï¼ä½ çæ°æ®é½å¨èªå·±æéãèä¸å¯ä»¥ç¨ééï¼é£ä¹¦ï¼WhatsAppãTelegramç­åç±»å³æ¶éè®¯è½¯ä»¶æ¥ææ¥ä»å¹²æ´»ï¼</p>
<p>ç®åæ¥è¯´ï¼ä¸å¥è¯äº¤ç»å®ï¼ä»æ´çæ¡é¢æä»¶å°æ§å¶å®¶éç¯åï¼å®é½é»é»å¸®ä½ æå®ãæ¯ä½ çµèéçæ­£çè´¾ç»´æ¯ï¼è¶çº§æºè½çAIå©çï¼</p>
<h1 id="äºå®è£nodejs">äºãå®è£nodejs</h1>
<p>åé¢æ§è¡ä¸é®å®è£å½ä»¤ï¼å¯ä»¥èªå¨å®è£nodejsï¼ä½æ¯å¦æä¸ºäºå å¿«éåº¦ï¼é²æ­¢å®è£æå¤ï¼å¯ä»¥åå®è£nodejsï¼</p>
<p>å®æ¹ä¸è½½å°åï¼<a href="https://nodejs.org/zh-cn/download" target="_blank" rel="noopener nofollow">https://nodejs.org/zh-cn/download</a><br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900414-968176600.png" class="lazyload"></p>
<h1 id="ä¸å¼å§å®è£">ä¸ãå¼å§å®è£</h1>
<h3 id="ä¸è®¾ç½®-powershell-æ§è¡æé">ä¸ï¼è®¾ç½® PowerShell æ§è¡æé</h3>
<p>ä»¥ç®¡çåèº«ä»½è¿è¡ PowerShellï¼</p>
<ol>
<li>æ <code>Win</code> é®ï¼æç´¢ <strong>PowerShell</strong></li>
<li>å³é®ç¹å» <strong>Windows PowerShell</strong></li>
<li>éæ© <strong>ä»¥ç®¡çåèº«ä»½è¿è¡</strong></li>
<li>ç¹å» <strong>æ¯</strong> ç¡®è®¤<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900472-1442678342.png" class="lazyload"></li>
</ol>
<p>å¨ç®¡çå PowerShell çªå£ä¸­ï¼ä¾æ¬¡æ§è¡ä»¥ä¸ä¸¤æ¡å½ä»¤ï¼</p>
<pre><code class="language-powershell">Set-ExecutionPolicy RemoteSigned -Scope CurrentUser

Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass
</code></pre>
<p><strong>è¿æ¯ä»ä¹ææï¼</strong></p>
<ul>
<li>ç¬¬ä¸æ¡å½ä»¤ï¼åè®¸å½åç¨æ·è¿è¡æ¬å°åä¸è½½çèæ¬</li>
<li>ç¬¬äºæ¡å½ä»¤ï¼åè®¸å½åç¨æ·è¿è¡æ¬å°åä¸è½½çèæ¬</li>
</ul>
<blockquote>
<p>â ï¸ <strong>å®å¨æç¤º</strong>ï¼è¿äºå½ä»¤åªä¼å½±åæ¨èªå·±çè´¦æ·ï¼ä¸ä¼å½±åç³»ç»å®å¨æå¶ä»ç¨æ·ã</p>
</blockquote>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900423-653791165.png" class="lazyload"></p>
<h3 id="äºæ§è¡ä¸é®å®è£å½ä»¤">äºï¼æ§è¡ä¸é®å®è£å½ä»¤</h3>
<p>å¤å¶ä»¥ä¸å½ä»¤ï¼ç²è´´å° PowerShell çªå£ä¸­ï¼æ <strong>Enter</strong> æ§è¡ï¼</p>
<pre><code class="language-powershell">iwr -useb https://openclaw.ai/install.ps1 | iex
</code></pre>
<p><strong>å®è£è¿ç¨ä¼èªå¨å®æï¼</strong></p>
<ul>
<li>æ£æµç³»ç»ç¯å¢</li>
<li>å®è£å¿è¦ä¾èµï¼Node.js ç­ï¼</li>
<li>ä¸è½½ OpenClaw æ ¸å¿æä»¶</li>
<li>éç½®ç¯å¢åé</li>
<li>å¯å¨éç½®åå¯¼</li>
</ul>
<blockquote>
<p>æ³¨æï¼å¦æå½ä»¤æ§è¡åï¼è¿æ¯æ¥éï¼å¯ä»¥èªå·±å°å®ç½ä¸è½½nodeå®è£åï¼èªå·±å®è£nodeç¯å¢ï¼æ³¨æçæ¬æå¥½å¨ node v22.x ä»¥ä¸ï¼nodeå®ç½ä¸è½½å°åï¼<a href="https://nodejs.org/zh-cn/download%EF%BC%8C%E8%8B%A5%E8%BF%98%E6%98%AF%E4%B8%8D%E6%87%82%E6%80%8E%E4%B9%88%E5%AE%89%E8%A3%85%EF%BC%8C%E7%82%B9%E5%A4%B4%E5%83%8F%E8%BF%9B%E6%88%91%E4%B8%BB%E9%A1%B5%E6%89%BE%E5%88%B0%E6%88%91%EF%BC%8C%E6%8B%89%E4%BD%A0%E8%BF%9B%E4%BA%A4%E6%B5%81%E7%BE%A4" target="_blank" rel="noopener nofollow">https://nodejs.org/zh-cn/downloadï¼è¥è¿æ¯ä¸ææä¹å®è£ï¼ç¹å¤´åè¿æä¸»é¡µæ¾å°æï¼æä½ è¿äº¤æµç¾¤</a></p>
</blockquote>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900314-66670908.png" class="lazyload"></p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900419-1797596666.png" class="lazyload"></p>
<h1 id="ååå§éç½®åå¯¼">åãåå§éç½®åå¯¼</h1>
<p>å®è£å®æåï¼ä¼èªå¨è¿å¥éç½®åå¯¼ï¼<code>openclaw onboard</code>ï¼ã</p>
<h2 id="ä¸é£é©åç¥">ä¸ï¼é£é©åç¥</h2>
<p>è¿ä¸æ­¥ä¸»è¦æ¯åè¯ä½ ï¼ä½¿ç¨OpenClawå¯è½ä¼æä¸äºé£é©ãè¯·é®ä½ æ¯å¦ç»§ç»­ï¼<br>
æ åå·¦æ¹åé® âï¼éæ© <code>Yes</code>ï¼æ <code>Enter</code> åè½¦ç¡®è®¤<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900286-2146999803.png" class="lazyload"></p>
<h2 id="äºéæ©-qiuickstart-æ¨¡å¼">äºï¼éæ© QiuickStart æ¨¡å¼</h2>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900421-571170739.png" class="lazyload"></p>
<h2 id="ä¸éç½®-ai-æ¨¡å-api-key">ä¸ï¼éç½® AI æ¨¡å API Key</h2>
<p>OpenClaw éè¦è¿æ¥å°å¤§è¯­è¨æ¨¡åæè½å·¥ä½ãOpenclaw æ¯è¾è´¹tokenï¼å½å¤æ¨¡åææ¬é«ï¼é¨æ§ä¹é«ï¼è¿éæéæ©å½åçæºè°±ç GLM 4.7</p>
<blockquote>
<p>å¦ææ²¡ææºè°±çAPI Keyï¼ç¹å»å®æ¹å°åèªå·±æ³¨åè´¦å·è·åAPI keyï¼<a href="https://www.bigmodel.cn/glm-coding?ic=RBSKXMPNJP" target="_blank" rel="noopener nofollow">https://www.bigmodel.cn/glm-coding?ic=RBSKXMPNJP</a></p>
</blockquote>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900327-2131638734.png" class="lazyload"></p>
<p>è¾å¥èªå·±ç API Keyï¼</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900388-1365487251.png" class="lazyload"></p>
<h2 id="åéæ©-ai-æ¨¡å">åï¼éæ© AI æ¨¡å</h2>
<blockquote>
<p>è¿éæéæ©é»è®¤çGLM 4.7ï¼ä¹æ¯æºæ®å½åçæè°æ¨¡å</p>
</blockquote>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900427-1206679887.png" class="lazyload"></p>
<h2 id="äºè¿æ¥å³æ¶éè®¯å¹³å°">äºï¼è¿æ¥å³æ¶éè®¯å¹³å°</h2>
<p>éç½®å® AI æ¨¡ååï¼OpenClaw ä¼è¯¢é®ä½ è¦è¿æ¥åªä¸ªéè®¯å¹³å°ï¼</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900329-126448555.png" class="lazyload"></p>
<blockquote>
<p>OpenClaw åçæ¯æçå³æ¶éä¿¡å¹³å°ä¸»è¦æ¯æµ·å¤ç WhatsAppãTelegramãDiscordãSlackãiMessage ç­ï¼å½åç¨æ·ä¸ä¹ æ¯ï¼è¿éå½äº§å³æ¶éä¿¡è½¯ä»¶å¤§åä¹è·è¿äºï¼ç°å¨ééï¼é£ä¹¦ç­é½å·²æ¯ææ¥å¥OpenClaw</p>
</blockquote>
<p>åé¢ä¼å¸¦é¢å¤§å®¶æé£ä¹¦æºå¨äººæ¥å¥ OpenClawï¼ä½¿å¤§å®¶å¯ä»¥éè¿é£ä¹¦å³å¯ææ¥OpenClawä¸ºæä»¬å¹²æ´»ï¼ä½æ¯é£ä¹¦éç½®æ¯è¾å¤æï¼è¿éæä»¬åéæ©è·³è¿ï¼åé¢æä»¬å¯ä»¥éè¿ç»§ç»­è¿è¡éç½®ï¼</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900417-1715423641.png" class="lazyload"></p>
<h2 id="å­éæ©skills">å­ï¼éæ©Skills</h2>
<p>è¿éä¹éæ©ï¼Noï¼æä¸éç½®ï¼åé¢éè¿UIçé¢è¿è¡éç½®ï¼<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900413-692235842.png" class="lazyload"></p>
<h2 id="ä¸æ¯å¦å¼å¯hooks">ä¸ï¼æ¯å¦å¼å¯Hooks</h2>
<p>æä½æ­¥éª¤ï¼åæ²<strong>ç©ºæ ¼</strong>ï¼è¡¨ç¤ºéä¸­å½åé¡¹ï¼åæ²åè½¦é®</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900374-323484497.png" class="lazyload"></p>
<h2 id="å«å¯å¨æå¡å¹¶æå¼uiçé¢">å«ï¼å¯å¨æå¡å¹¶æå¼UIçé¢</h2>
<p>æ­¤æ¶å®ä¼èªå¨åæå¼ä¸ä¸ªå½ä»¤çªå£æ¥å¯å¨æå¡:</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900333-208255503.png" class="lazyload"></p>
<blockquote>
<p>è¿ä¸ªè¿ç¨æ¯å¨å¯å¨æå¡ï¼å¯è½ä¼éè¦ç­ä¸ç¹æ¶é´</p>
</blockquote>
<p>åæ¶ï¼å¤§çº¦è¿30ç§å·¦å³ï¼æä»¬åå°åæçè®¾ç½®çªå£ï¼éæ© <code>Open the Web UI</code> ï¼æå¼ <code>OpenClaw</code> çUIçé¢ï¼</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900250-1652139924.png" class="lazyload"></p>
<p>æµè§å¨èªå¨æå¼Web UIçé¢ï¼</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900345-1845859887.png" class="lazyload"></p>
<h2 id="ä¹æµè¯ä¸ä¸">ä¹ï¼æµè¯ä¸ä¸</h2>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900317-1571656437.png" class="lazyload"></p>
<h1 id="äºæ¥å¥é£ä¹¦æºå¨äºº">äºãæ¥å¥é£ä¹¦æºå¨äºº</h1>
<p>æä»¬éè¦åå°é£ä¹¦å¹³å°åå»ºèªå·±çæºå¨äººæ¥æ¥å¥OpenClawï¼</p>
<h2 id="ä¸æ¥å°é£ä¹¦å¼åèåå°">ä¸ï¼æ¥å°é£ä¹¦å¼åèåå°</h2>
<p>é£ä¹¦å¼æ¾å¹³å°å°åï¼<a href="https://open.feishu.cn" target="_blank" rel="noopener nofollow">https://open.feishu.cn</a></p>
<blockquote>
<p>æ²¡æé£ä¹¦è´¦å·çï¼éè¦èªå·±æ³¨åè´¦å·</p>
</blockquote>
<p>ç¹å»å³ä¸è§è¿å¥ <strong>å¼åèåå°</strong>ï¼</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900343-1879614047.png" class="lazyload"></p>
<h2 id="äºåå»ºåºç¨">äºï¼åå»ºåºç¨</h2>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900398-1841476993.png" class="lazyload"></p>
<h2 id="ä¸å¡«ååºç¨ä¿¡æ¯">ä¸ï¼å¡«ååºç¨ä¿¡æ¯</h2>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900408-1479853027.png" class="lazyload"></p>
<h2 id="åè·åèªå·±çåºç¨å­è¯">åï¼è·åèªå·±çåºç¨å­è¯</h2>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900351-575267531.png" class="lazyload"></p>
<h2 id="äºç»åºç¨æ·»å æºå¨äºº">äºï¼ç»åºç¨æ·»å æºå¨äºº</h2>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900381-1004037085.png" class="lazyload"></p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900322-1666669395.png" class="lazyload"></p>
<h2 id="å­ç»åºç¨éç½®æé">å­ï¼ç»åºç¨éç½®æé</h2>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900352-209734116.png" class="lazyload"></p>
<p>æå³æ¶éè®¯ç¸å³çæéå¨é¨å¼éï¼</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900464-1819443892.png" class="lazyload"></p>
<h2 id="ä¸åå»ºçæ¬å¹¶åå¸">ä¸ï¼åå»ºçæ¬å¹¶åå¸</h2>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900348-661047761.png" class="lazyload"></p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900337-1730165463.png" class="lazyload"></p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900278-2005507871.png" class="lazyload"></p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900403-1816510157.png" class="lazyload"></p>
<p>æ¥å°é£ä¹¦å®¢æ·ç«¯è¿è¡å®¡æ¹ï¼</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900691-2136889623.png" class="lazyload"></p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900298-1018251019.png" class="lazyload"></p>
<h2 id="å«å®è£é£ä¹¦æä»¶">å«ï¼å®è£é£ä¹¦æä»¶</h2>
<p>æå¼powershellï¼è¾å¥ä»¥ä¸å½ä»¤ï¼å®è£é£ä¹¦æä»¶ï¼</p>
<pre><code>openclaw plugins install @m1heng-clawd/feishu
</code></pre>
<p>å®è£æååï¼åæå¼ä¸ä¸ªæ°çå½ä»¤çªå£ï¼å¼å§éç½®é£ä¹¦æä»¶ï¼</p>
<p>è¾å¥å½ä»¤ï¼<code>openclaw config</code></p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900279-1640601270.png" class="lazyload"></p>
<p>éæ©æ¸ é:<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900318-2100612820.png" class="lazyload"></p>
<p>éæ©éç½®é¾æ¥:<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900296-643979225.png" class="lazyload"></p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900376-1505391464.png" class="lazyload"></p>
<p>è¾å¥é£ä¹¦çAppIDï¼AppSecrectï¼</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900299-381972467.png" class="lazyload"></p>
<p>ååéæ©ä¸­å½çï¼<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900409-1003405634.png" class="lazyload"></p>
<p>æ¥åç¾¤ç»èå¤©ï¼<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900303-493855197.png" class="lazyload"></p>
<p>éæ©å®æï¼<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900423-13996540.png" class="lazyload"></p>
<p>éæ©yesï¼<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900357-118289834.png" class="lazyload"></p>
<p>éæ©openï¼<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900388-830142302.png" class="lazyload"></p>
<p>éæ©ç»§ç»­ï¼å®æéç½®ï¼<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900353-1706791968.png" class="lazyload"></p>
<p>éå¯æå¡ï¼ä½¿éç½®çæï¼<br>
æ§å¶å¯ä»¥çå°é£ä¹¦æä»¶å·²ç»éç½®æå<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900419-1691413263.png" class="lazyload"></p>
<h2 id="ä¸åå°é£ä¹¦åå°è®¾ç½®äºä»¶åè°">ä¸ï¼åå°é£ä¹¦åå°è®¾ç½®äºä»¶åè°</h2>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900587-1148162029.png" class="lazyload"></p>
<p>éæ© <code>ä½¿ç¨é¿è¿æ¥æ¥æ¶äºä»¶</code> ï¼</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900371-1606340248.png" class="lazyload"></p>
<p>å¯ä»¥çå°æ·»å äºä»¶æé®ç±åæ¥çç°è²ä¸å¯ç¹å»åä¸ºå¯ç¹å»ï¼<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900298-247178040.png" class="lazyload"></p>
<p>æ·»å æ¥æ¶æ¶æ¯äºä»¶ï¼<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900359-2126904009.png" class="lazyload"></p>
<p>ç»åºç¨å¼éè·åéè®¯å½åºæ¬ä¿¡æ¯çæéï¼<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900383-262492762.png" class="lazyload"></p>
<p>éæ°åå¸çæ¬ï¼<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900331-23540788.png" class="lazyload"></p>
<p>è·åé¢çæ­¥éª¤ä¸æ ·ï¼åå¸ä¸ºå¨çº¿åºç¨å³å¯ã</p>
<p>ç°å¨å¯ä»¥å¨ é£ä¹¦ä¸­ä¸ AI å©æå¯¹è¯äºï¼</p>
<h2 id="å«å¨é£ä¹¦ä¸­ä¸openclawå¯¹è¯">å«ï¼å¨é£ä¹¦ä¸­ä¸OpenClawå¯¹è¯</h2>
<p>æ¥å°é£ä¹¦å®¢æ·ç«¯æèææºé£ä¹¦appä¸ï¼</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900366-463784394.png" class="lazyload"></p>
<p>ä»¥ä¸æ¯openclawæä»¶å¤¹ä¸é¢çææ¡£åçåå®¹ï¼<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900341-771268919.png" class="lazyload"></p>
<p>ç°å¨æè·åºæ°´æºå¨äººå¯¹è¯ï¼è®©ä»åè¯ææå®ææ¡£åæ¯ä»ä¹åå®¹ï¼<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900316-1547165344.jpg" class="lazyload"></p>
<hr>
<h1 id="å­è®¿é®-web-æ§å¶é¢æ¿">å­ãè®¿é® Web æ§å¶é¢æ¿</h1>
<p>éç½®å®æåï¼PowerShell çªå£åºé¨ä¼æ¾ç¤ºæ§å¶é¢æ¿é¾æ¥ï¼æ ¼å¼ç±»ä¼¼ï¼</p>
<pre><code>Control UI: http://127.0.0.1:18789
</code></pre>
<ol>
<li>å¤å¶å®æ´é¾æ¥</li>
<li>å¨æµè§å¨ä¸­æå¼</li>
<li>å³å¯çå°å¯è§åUIç®¡ççé¢</li>
</ol>
<hr>
<h1 id="ä¸å¸¸ç¨å½ä»¤éæ¥">ä¸ãå¸¸ç¨å½ä»¤éæ¥</h1>
<table>
<thead>
<tr>
<th>å½ä»¤</th>
<th>åè½</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>openclaw onboard</code></td>
<td>éæ°è¿å¥éç½®åå¯¼</td>
</tr>
<tr>
<td><code>openclaw status</code></td>
<td>æ¥çè¿è¡ç¶æ</td>
</tr>
<tr>
<td><code>openclaw health</code></td>
<td>å¥åº·æ£æ¥</td>
</tr>
<tr>
<td><code>openclaw gateway start</code></td>
<td>å¯å¨æå¡</td>
</tr>
<tr>
<td><code>openclaw gateway stop</code></td>
<td>åæ­¢æå¡</td>
</tr>
<tr>
<td><code>openclaw update</code></td>
<td>æ´æ°å°ææ°çæ¬</td>
</tr>
<tr>
<td><code>openclaw doctor</code></td>
<td>è¯æ­é®é¢</td>
</tr>
<tr>
<td><code>openclaw uninstall</code></td>
<td>å¸è½½ OpenClaw</td>
</tr>
</tbody>
</table>
<hr>
<h1 id="å«å¸¸è§é®é¢è§£ç­">å«ãå¸¸è§é®é¢è§£ç­</h1>
<h3 id="q1-å®è£é£ä¹¦æä»¶æç¤ºspawn-npm-enoent">Q1: å®è£é£ä¹¦æä»¶æç¤ºï¼spawn npm ENOENT</h3>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1205021/202601/1205021-20260131194900351-652455840.png" class="lazyload"></p>
<p>é®é¢åå ï¼è¿å¯è½æ¯openclawçä¸ä¸ªbugï¼å¯ä»¥ç­å®æ¹æ´æ°ï¼ä¹å¯ä»¥èªå·±å»å®æ¹ä»åºæissue</p>
<p>è§£å³æ­¥éª¤ï¼</p>
<p>å®ä½é®é¢ä»£ç </p>
<p>æä»¶è·¯å¾ï¼</p>
<pre><code>C:\Users\Administrator\AppData\Roaming\fnm\node-versions\v22.14.0\installation\node_modules\openclaw\dist\process\exec.js
</code></pre>
<p>ä¿®æ¹ä»£ç </p>
<p>æ¾å° <code>runCommandWithTimeout</code> å½æ°ä¸­ç spawn è°ç¨ï¼ä¿®æ¹å¦ä¸ï¼</p>
<p><strong>ä¿®æ¹åï¼</strong></p>
<pre><code class="language-javascript">const stdio = resolveCommandStdio({ hasInput, preferInherit: true });
const child = spawn(argv[0], argv.slice(1), {
    stdio,
    cwd,
    env: resolvedEnv,
    windowsVerbatimArguments,
});
</code></pre>
<p><strong>ä¿®æ¹åï¼</strong></p>
<pre><code class="language-javascript">const stdio = resolveCommandStdio({ hasInput, preferInherit: true });
// On Windows, npm must be spawned with shell: true or use .cmd extension
let command = argv[0];
let useShell = false;
if (process.platform === "win32" &amp;&amp; path.basename(command) === "npm") {
    useShell = true;
}
const child = spawn(command, argv.slice(1), {
    stdio,
    cwd,
    env: resolvedEnv,
    shell: useShell,
});
</code></pre>
<h3 id="q2-æç¤º-openclaw-å½ä»¤æ¾ä¸å°">Q2: æç¤º "openclaw å½ä»¤æ¾ä¸å°"</h3>
<p><strong>è§£å³æ¹æ³ï¼</strong></p>
<ol>
<li>å³é­ææ PowerShell çªå£</li>
<li>éæ°æå¼ PowerShell</li>
<li>å¦æè¿ä¸è¡ï¼æ§è¡ <code>exec bash</code> æéå¯çµè</li>
</ol>
<h3 id="q3-å®è£å¡ä½ä¸å¨">Q3: å®è£å¡ä½ä¸å¨</h3>
<p><strong>è§£å³æ¹æ³ï¼</strong></p>
<ol>
<li>æ <code>Ctrl + C</code> ä¸­æ­å½åæä½</li>
<li>æ§è¡ï¼<code>openclaw doctor</code> æ£æ¥é®é¢</li>
<li>å¦æç¤ºç½ç»é®é¢ï¼æ£æ¥é²ç«å¢è®¾ç½®</li>
</ol>
<h3 id="q4-api-key-éç½®éè¯¯">Q4: API Key éç½®éè¯¯</h3>
<p><strong>è§£å³æ¹æ³ï¼</strong></p>
<ol>
<li>æ§è¡ï¼<code>openclaw onboard</code></li>
<li>éæ©éæ°éç½® API Key</li>
<li>ç¡®ä¿å¯é¥æ ¼å¼æ­£ç¡®</li>
</ol>
<h3 id="q5-ç«¯å£-18789-è¢«å ç¨">Q5: ç«¯å£ 18789 è¢«å ç¨</h3>
<p><strong>è§£å³æ¹æ³ï¼</strong></p>
<pre><code class="language-powershell">openclaw gateway --port 18790
</code></pre>
<p>ä½¿ç¨å¶ä»ç«¯å£å¯å¨æå¡ã</p>
<h1 id="ä¹ææ¬è¯´æ">ä¹ãææ¬è¯´æ</h1>
<p>OpenClaw è½¯ä»¶æ¬èº«å®å¨åè´¹ï¼ä¸»è¦ææ¬æ¥èª AI æ¨¡å API è°ç¨ï¼å¯éæ©å½äº§å¤§æ¨¡åï¼éä½ææ¬ã</p>
<hr>
<h1 id="ç»è¯­">ç»è¯­</h1>
<p>OpenClaw ä»£è¡¨äºä¸ªäºº AI å©ççæªæ¥è¶å¿ââä»"èå¤©å·¥å·"è¿åä¸º"æ§è¡å·¥å·"ãè½ç¶ç®åçéç½®è¿ç¨å¯¹å°ç½ç¨æ·æä¸å®é¨æ§ï¼ä½ä¸æ¦å®æè®¾ç½®ï¼æ¨å°æ¥æä¸ä¸ª 24/7 å¾å½çè¶çº§å©æã</p>


</div>
<div class="clear"></div>

		</div>
		<div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-31 19:50">2026-01-31 19:50</span>&nbsp;
<a href="https://www.cnblogs.com/weipo0105">é¿å¡RPA</a>&nbsp;
éè¯»(<span id="post_view_count">136</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19558953);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19558953', targetLink: 'https://www.cnblogs.com/weipo0105/p/19558953', title: 'ãä¿å§çº§æç¨ãææææä½ å®è£OpenClawå¹¶æ¥å¥é£ä¹¦ï¼è®©AIå¨èå¤©è½¯ä»¶éå¸®ä½ å¹²æ´»' })">ä¸¾æ¥</a>
</div>
	 ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ Rediså¿«éå®ç°å¸éè¿æ»¤å¨ï¼ç¼å­å»éçâæºè½é¨å«â ]]></title>
    <link>https://www.cnblogs.com/sun-10387834/p/19522155</link>
    <guid>0247f249e3ffca5b2e8153897549402b</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/sun-10387834/p/19522155" title="åå¸äº 2026-01-31 18:32">
    <span role="heading" aria-level="2">Rediså¿«éå®ç°å¸éè¿æ»¤å¨ï¼ç¼å­å»éçâæºè½é¨å«â</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>å¨ç¼å­æ¶æä¸­ï¼æ»æä¸äºâå¤´ç¼é®é¢âï¼ç¨æ·åå¤æäº¤ç¸åè¯·æ±ãæ¥è¯¢ä¸å­å¨çkeyå¯¼è´ç¼å­ç©¿éãæµ·éæ°æ®å»éæçä½ä¸â¦â¦è¿äºåºæ¯ä¸ï¼Rediså¸éè¿æ»¤å¨å°±æ¯å½ä¹æ æ§çâææâãå®åä¸ä¸ªæºè½é¨å«ï¼è½å¿«éå¤æ­âè¿ä¸ªäººæ¯ä¸æ¯æ¥è¿ââè¿ä¸ªkeyæ¯ä¸æ¯ä¸å­å¨âï¼ç¨æå°çç©ºé´ææ¬å®ç°é«æè¿æ»¤ï¼æ§è½è¿è¶ä¼ ç»çæ°æ®åºæ¥è¯¢æå¨éç¼å­æ ¡éªã</p>
<p>ä»å¤©å±ä»¬å°±ä»âæ¯ä»ä¹ãä¸ºä»ä¹å¥½ç¨ãæä¹ç¨Rediså¿«éå®ç°âä¸ä¸ªç»´åº¦ï¼ç¨éä¿çè¯­è¨+å®æä»£ç ï¼æå¸éè¿æ»¤å¨è®²éãå¨ç¨é¿å¼å¤æå¬å¼ï¼å°±ç®æ¯åæ¥è§¦ç¼å­çåå­¦ï¼ä¹è½è·çæ­¥éª¤å¿«éè½å°ã</p>
<h2 id="ä¸åææå¸éè¿æ»¤å¨å°åºæ¯ä¸ªå¥">ä¸ãåææï¼å¸éè¿æ»¤å¨å°åºæ¯ä¸ªå¥ï¼</h2>
<p>å¸éè¿æ»¤å¨ï¼Bloom Filterï¼æ¬è´¨æ¯ä¸ä¸ª<strong>åºäºåå¸å½æ°çæ¦çåæ°æ®ç»æ</strong>ï¼æ ¸å¿ä½ç¨æ¯âå¿«éå¤æ­ä¸ä¸ªåç´ æ¯å¦å­å¨äºéåä¸­âãå®ä¸ååå¸è¡¨é£æ ·å­å¨å®æ´æ°æ®ï¼èæ¯ç¨ä¸ä¸ªäºè¿å¶æ°ç»ï¼bitæ°ç»ï¼+å¤ä¸ªåå¸å½æ°ï¼éè¿æ è®°åç´ çåå¸ä½ç½®æ¥å®ç°è¿æ»¤ã</p>
<p>å±ä»¬ç¨âå°åºé¨å«è®°è®¿å®¢âçåºæ¯ç±»æ¯ï¼ç§ææ ¸å¿é»è¾ï¼</p>
<ul>
<li>
<p>äºè¿å¶æ°ç» = é¨å«çç»è®°æ¬ï¼æ¯ä¸é¡µåªæâæ¯âï¼1ï¼åâå¦âï¼0ï¼ä¸¤ä¸ªç¶æï¼</p>
</li>
<li>
<p>åå¸å½æ° = é¨å«çâè®°å¿è§åâï¼æ¯å¦âè®°ä½è®¿å®¢çå§æ°é¦å­æ¯+èº«é«åºé´+éå­é¢è²âï¼</p>
</li>
<li>
<p>åç´ å­å¨å¤æ­ = é¨å«æ ¹æ®è®°å¿è§åæ ¸å¯¹ç»è®°æ¬ï¼åªè¦æä¸æ¡è§åå¯¹åºâå¦âï¼å°±ç¡®å®è®¿å®¢æ²¡æ¥è¿ï¼å¦æå¨æ¯âæ¯âï¼åå¤§æ¦çæ¥è¿ï¼å­å¨æå°è¯¯å¤ï¼ã</p>
</li>
</ul>
<h3 id="æ ¸å¿ç¹æ§ä¼ç¹ä¸å°ççµ">æ ¸å¿ç¹æ§ï¼ä¼ç¹ä¸âå°ççµâ</h3>
<p>å¸éè¿æ»¤å¨çä¼å¿åå±éæ§é½å¾é²æï¼è½å°åå¿é¡»æ¸æ¸ï¼</p>
<h4 id="-æ ¸å¿ä¼ç¹">â æ ¸å¿ä¼ç¹</h4>
<ul>
<li>
<p>ç©ºé´å ç¨æå°ï¼ä»ç¨bitæ°ç»å­å¨æ è®°ï¼å­å¨100ä¸æ¡æ°æ®ï¼è¯¯å¤ç1%æ¶ï¼ä»éçº¦1.2MBç©ºé´ï¼</p>
</li>
<li>
<p>æ¥è¯¢éåº¦æå¿«ï¼æ¶é´å¤æåº¦æ¯O(k)ï¼kæ¯åå¸å½æ°ä¸ªæ°ï¼ï¼æ è®ºæ°æ®éå¤å¤§ï¼é½è½ç¬é´è¿åç»æï¼</p>
</li>
<li>
<p>æ¯ææµ·éæ°æ®ï¼æ éå­å¨å®æ´æ°æ®ï¼å¯è½»æ¾åºå¯¹åä¸çº§ãäº¿çº§æ°æ®çè¿æ»¤åºæ¯ã</p>
</li>
</ul>
<h4 id="-ä¸å¯å¿½è§çå±éæ§">â ä¸å¯å¿½è§çå±éæ§</h4>
<ul>
<li>
<p>å­å¨è¯¯å¤çï¼åªè½ç¡®å®âåç´ ä¸å®ä¸å­å¨âï¼ä¸è½100%ç¡®å®âåç´ ä¸å®å­å¨âï¼è¯¯å¤çå¯éè¿åæ°è°æ´ï¼ä½æ æ³å®å¨æ¶é¤ï¼</p>
</li>
<li>
<p>ä¸æ¯æå é¤æä½ï¼ä¸æ¦åç´ è¢«æ è®°å°bitæ°ç»ï¼æ æ³ååæ¸é¤ï¼ä¼å½±åå¶ä»åç´ çå¤æ­ï¼ï¼</p>
</li>
<li>
<p>éæåé¢ä¼°æ°æ®éï¼åå¸å½æ°ä¸ªæ°ãbitæ°ç»é¿åº¦éæ ¹æ®é¢ä¼°æ°æ®éè®¡ç®ï¼å¦åä¼å¯¼è´è¯¯å¤çé£åã</p>
</li>
</ul>
<h2 id="äºrediså®ç°å¸éè¿æ»¤å¨çä¸¤ç§æ¹å¼">äºãRediså®ç°å¸éè¿æ»¤å¨çä¸¤ç§æ¹å¼</h2>
<p>Redisæ¬èº«æ²¡æåç½®å¸éè¿æ»¤å¨ï¼ä½æä¾äºä¸¤ç§å¿«éå®ç°çæ¹æ¡ï¼ä¸æ¯åºäºRedisçBitMapï¼ä½å¾ï¼æå¨å®ç°ï¼çµæ´»å¯æ§ï¼äºæ¯ä½¿ç¨Rediså®æ¹æ¨èçRedissonå®¢æ·ç«¯ï¼å°è£å¥½ç°æAPIï¼å¼ç®±å³ç¨ãå±ä»¬åå«è®²å®æï¼æééæ©å³å¯ã</p>
<h3 id="æ¹æ¡ä¸åºäºbitmapæå¨å®ç°çµæ´»å¯æ§">æ¹æ¡ä¸ï¼åºäºBitMapæå¨å®ç°ï¼çµæ´»å¯æ§ï¼</h3>
<p>æ ¸å¿æè·¯ï¼å©ç¨RedisçBitMapæ°æ®ç»æä½ä¸ºå¸éè¿æ»¤å¨çbitæ°ç»ï¼éè¿å¤ä¸ªåå¸å½æ°è®¡ç®åç´ çåå¸å¼ï¼å°å¯¹åºä½ç½®çbitç½®ä¸º1ï¼æ¥è¯¢æ¶ï¼åæ ·è®¡ç®åå¸å¼ï¼æ£æ¥ææä½ç½®æ¯å¦ä¸º1ï¼å¨ä¸º1åå¤§æ¦çå­å¨ï¼å¦åä¸å®ä¸å­å¨ã</p>
<h4 id="1-å³é®åæ°è®¡ç®é¿åè¯¯å¤çè¿é«">1. å³é®åæ°è®¡ç®ï¼é¿åè¯¯å¤çè¿é«ï¼</h4>
<p>æå¨å®ç°åï¼éåç¡®å®ä¸ä¸ªæ ¸å¿åæ°ï¼å¯éè¿å¬å¼æå¨çº¿å·¥å·è®¡ç®ï¼</p>
<ul>
<li>
<p>mï¼bitæ°ç»é¿åº¦ï¼åä½ï¼bitï¼ï¼é¢ä¼°æ°æ®énè¶å¤§ï¼méè¶å¤§ï¼</p>
</li>
<li>
<p>kï¼åå¸å½æ°ä¸ªæ°ï¼kè¿å¤ä¼å¯¼è´bitæ°ç»å¿«éè¢«å æ»¡ï¼è¯¯å¤çä¸åï¼kè¿å°åè¿æ»¤ææå·®ï¼</p>
</li>
<li>
<p>pï¼å¯æ¥åçè¯¯å¤çï¼éå¸¸è®¾ä¸º0.01~0.1ï¼ã</p>
</li>
</ul>
<p>å¸¸ç¨è®¡ç®å¬å¼ï¼æ éæ­»è®°ï¼å¨çº¿å·¥å·ç´æ¥ç®ï¼ï¼</p>
<ul>
<li>
<p>m = - (n * ln p) / (ln 2)Â² ï¼bitæ°ç»é¿åº¦ï¼ï¼</p>
</li>
<li>
<p>k = (m / n) * ln 2 ï¼åå¸å½æ°ä¸ªæ°ï¼ã</p>
</li>
</ul>
<p>ä¸¾ä¸ªä¾å­ï¼é¢ä¼°å­å¨10ä¸æ¡æ°æ®ï¼è¯¯å¤çè®¾ä¸º0.01ï¼è®¡ç®å¾mâ958505 bitï¼çº¦117KBï¼ï¼kâ7ä¸ªåå¸å½æ°ã</p>
<h4 id="2-æå¨å®ç°ä»£ç javaç¤ºä¾">2. æå¨å®ç°ä»£ç ï¼Javaç¤ºä¾ï¼</h4>
<p>æ ¸å¿æ¯å®ç°å¤ä¸ªåå¸å½æ°ï¼æä½RedisçBitMapæä»¤ï¼SETBITç½®1ï¼GETBITæ¥è¯¢ï¼ï¼</p>
<pre><code class="language-java">import org.springframework.data.redis.core.StringRedisTemplate;
import java.nio.charset.StandardCharsets;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;

/**
 * åºäºRedis BitMapæå¨å®ç°å¸éè¿æ»¤å¨
 */
public class RedisBloomFilter {
    // Redisé®å
    private final String key;
    // bitæ°ç»é¿åº¦
    private final long bitSize;
    // åå¸å½æ°ä¸ªæ°
    private final int hashCount;
    private final StringRedisTemplate stringRedisTemplate;

    // æé å¨ï¼åå§ååæ°
    public RedisBloomFilter(String key, long n, double p, StringRedisTemplate stringRedisTemplate) {
        this.key = key;
        this.stringRedisTemplate = stringRedisTemplate;
        // è®¡ç®bitæ°ç»é¿åº¦
        this.bitSize = (long) (-n * Math.log(p) / (Math.log(2) * Math.log(2)));
        // è®¡ç®åå¸å½æ°ä¸ªæ°
        this.hashCount = (int) (this.bitSize / n * Math.log(2));
    }

    // æ·»å åç´ å°å¸éè¿æ»¤å¨
    public void add(Object value) {
        byte[] bytes = value.toString().getBytes(StandardCharsets.UTF_8);
        long[] hashes = hash(bytes, hashCount, bitSize);
        for (long hash : hashes) {
            // æå¯¹åºbitä½ç½®ç½®ä¸º1
            stringRedisTemplate.opsForValue().setBit(key, hash, true);
        }
    }

    // å¤æ­åç´ æ¯å¦å­å¨ï¼å­å¨è¿åtrueï¼ä¸å­å¨è¿åfalseï¼trueå¯è½æ¯è¯¯å¤ï¼
    public boolean contains(Object value) {
        byte[] bytes = value.toString().getBytes(StandardCharsets.UTF_8);
        long[] hashes = hash(bytes, hashCount, bitSize);
        for (long hash : hashes) {
            // åªè¦æä¸ä¸ªbitä½ä¸º0ï¼å°±ç¡®å®ä¸å­å¨
            if (!stringRedisTemplate.opsForValue().getBit(key, hash)) {
                return false;
            }
        }
        return true;
    }

    // å¤åå¸å½æ°å®ç°ï¼åºäºMD5æåï¼
    private long[] hash(byte[] bytes, int hashCount, long bitSize) {
        long[] hashes = new long[hashCount];
        try {
            MessageDigest md5 = MessageDigest.getInstance("MD5");
            byte[] digest = md5.digest(bytes);
            // æMD5ç»æï¼16å­èï¼æåæå¤ä¸ªåå¸å¼
            for (int i = 0; i &lt; hashCount; i++) {
                long hash = 0;
                for (int j = i * 2; j &lt; (i + 1) * 2 &amp;&amp; j &lt; digest.length; j++) {
                    hash = hash * 256 + (digest[j] &amp; 0xFF);
                }
                // ç¡®ä¿åå¸å¼å¨bitæ°ç»é¿åº¦èå´å
                hashes[i] = hash % bitSize;
            }
        } catch (NoSuchAlgorithmException e) {
            throw new RuntimeException("åå¸å½æ°åå§åå¤±è´¥", e);
        }
        return hashes;
    }
}
</code></pre>
<h4 id="3-ä½¿ç¨æ¹å¼">3. ä½¿ç¨æ¹å¼</h4>
<pre><code class="language-java">// åå§åå¸éè¿æ»¤å¨ï¼keyä¸º"user:bloom:filter"ï¼é¢ä¼°10ä¸æ¡æ°æ®ï¼è¯¯å¤ç0.01
RedisBloomFilter bloomFilter = new RedisBloomFilter("user:bloom:filter", 100000, 0.01, stringRedisTemplate);

// æ·»å åç´ 
bloomFilter.add("user123");
bloomFilter.add("order456");

// å¤æ­åç´ æ¯å¦å­å¨
boolean exists = bloomFilter.contains("user123"); // å¤§æ¦çè¿åtrue
boolean notExists = bloomFilter.contains("user789"); // ä¸å®è¿åfalse
</code></pre>
<h3 id="æ¹æ¡äºredissonå®¢æ·ç«¯å®ç°å¼ç®±å³ç¨">æ¹æ¡äºï¼Redissonå®¢æ·ç«¯å®ç°ï¼å¼ç®±å³ç¨ï¼</h3>
<p>å¦æè§å¾æå¨å®ç°éº»ç¦ï¼æ¨èç¨RedissonââRediså®æ¹çæçJavaå®¢æ·ç«¯ï¼å·²ç»å°è£å¥½äºå¸éè¿æ»¤å¨ï¼æ¯æèªå¨è®¡ç®åæ°ãåå¸å¼åºæ¯ï¼è¿è§£å³äºæå¨å®ç°çåå¸å½æ°ä¼åé®é¢ï¼çäº§ç¯å¢é¦éã</p>
<h4 id="1-å¼å¥ä¾èµ">1. å¼å¥ä¾èµ</h4>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.redisson&lt;/groupId&gt;
    &lt;artifactId&gt;redisson-spring-boot-starter&lt;/artifactId&gt;
    &lt;version&gt;3.23.3&lt;/version&gt; // çæ¬ä¸Redisçæ¬éé
&lt;/dependency&gt;
</code></pre>
<h4 id="2-å¿«éå®ç°ä»£ç ">2. å¿«éå®ç°ä»£ç </h4>
<pre><code class="language-java">import org.redisson.api.RBloomFilter;
import org.redisson.api.RedissonClient;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

@Component
public class RedissonBloomFilterDemo {
    @Autowired
    private RedissonClient redissonClient;

    // åå§åå¸éè¿æ»¤å¨
    public RBloomFilter&lt;String&gt; initBloomFilter() {
        // å¸éè¿æ»¤å¨åç§°
        String filterName = "user:bloom:filter:redisson";
        // è·åå¸éè¿æ»¤å¨å®ä¾
        RBloomFilter&lt;String&gt; bloomFilter = redissonClient.getBloomFilter(filterName);
        // åå§åï¼é¢ä¼°10ä¸æ¡æ°æ®ï¼è¯¯å¤ç0.01ï¼Redissonä¼èªå¨è®¡ç®måkï¼
        bloomFilter.tryInit(100000, 0.01);
        return bloomFilter;
    }

    // æµè¯ä½¿ç¨
    public void testBloomFilter() {
        RBloomFilter&lt;String&gt; bloomFilter = initBloomFilter();
        // æ·»å åç´ 
        bloomFilter.add("user123");
        bloomFilter.add("order456");

        // å¤æ­åç´ æ¯å¦å­å¨
        boolean exists = bloomFilter.contains("user123"); // å¤§æ¦çtrue
        boolean notExists = bloomFilter.contains("user789"); // ä¸å®false

        // ç»è®¡å·²æ·»å åç´ æ°éï¼è¿ä¼¼å¼ï¼
        long count = bloomFilter.count();
        System.out.println("å·²æ·»å åç´ æ°éï¼" + count);
    }
}
</code></pre>
<h4 id="3-æ ¸å¿ä¼å¿">3. æ ¸å¿ä¼å¿</h4>
<ul>
<li>
<p>åå¸å¼æ¯æï¼ééå¾®æå¡åºæ¯ï¼å¤å®ä¾å±äº«åä¸ä¸ªå¸éè¿æ»¤å¨ï¼æ éæå¿æ°æ®ä¸è´æ§ï¼</p>
</li>
<li>
<p>åæ°ä¼åï¼åç½®æ´é«æçåå¸å½æ°ï¼MurmurHashï¼ï¼è¯¯å¤çæ§å¶æ´ç²¾åï¼</p>
</li>
<li>
<p>APIä¸°å¯ï¼æ¯æåç´ è®¡æ°ãæ¹éæ·»å ç­åè½ï¼æ¯æå¨å®ç°æ´å®åã</p>
</li>
</ul>
<h2 id="ä¸å®éåºç¨åºæ¯ä¸é¿åæå">ä¸ãå®éåºç¨åºæ¯ä¸é¿åæå</h2>
<h3 id="-å¸ååºç¨åºæ¯">â å¸ååºç¨åºæ¯</h3>
<ol>
<li>
<p>ç¼å­ç©¿éé²æ¤ï¼æ¥è¯¢æ°æ®åºåï¼åç¨å¸éè¿æ»¤å¨å¤æ­keyæ¯å¦å­å¨ï¼ä¸å­å¨åç´æ¥è¿åï¼é¿åå¤§éæ ææ°æ®åºæ¥è¯¢ï¼</p>
</li>
<li>
<p>æµ·éæ°æ®å»éï¼æ¯å¦ç¨æ·ç­¾å°ãæ¥å¿å»éãç¬è«URLå»éï¼æ éå­å¨å¨éæ°æ®ï¼ä»ç¨bitæ°ç»æ è®°ï¼</p>
</li>
<li>
<p>é²æ­¢éå¤æäº¤ï¼æ¥å£è¯·æ±åï¼ç¨å¸éè¿æ»¤å¨å¤æ­è¯·æ±IDæ¯å¦å·²å¤çï¼é¿åéå¤ä¸å¡é»è¾æ§è¡ï¼</p>
</li>
<li>
<p>é»ååè¿æ»¤ï¼æ¯å¦åå¾é®ä»¶è¯å«ãæ¶æIPæ¦æªï¼å¿«éå¤æ­æ¯å¦å¨é»ååä¸­ã</p>
</li>
</ol>
<h3 id="-é¿åæå">â é¿åæå</h3>
<ul>
<li>
<p>ä¸è¦ç¨å¨âç»å¯¹ä¸è½è¯¯å¤âçåºæ¯ï¼æ¯å¦éèäº¤æãç¨æ·ç»å½éªè¯ï¼è¯¯å¤å¯è½å¯¼è´ä¸¥éé®é¢ï¼</p>
</li>
<li>
<p>æåé¢ä¼°æ°æ®éï¼è¥å®éæ°æ®éè¿è¶é¢ä¼°ï¼bitæ°ç»ä¼è¢«å¿«éå æ»¡ï¼è¯¯å¤çä¼æ¥å§ä¸åï¼å¯é¢ç2~3ååä½ï¼</p>
</li>
<li>
<p>å®æéç½®å¸éè¿æ»¤å¨ï¼è¥æ°æ®æè¿æç¹æ§ï¼æ¯å¦æ¯æ¥é»ååæ´æ°ï¼ï¼å¯å®æå é¤æ§çå¸éè¿æ»¤å¨ï¼éå»ºæ°å®ä¾ï¼</p>
</li>
<li>
<p>Rediséç¾¤æ³¨æäºé¡¹ï¼æå¨å®ç°çå¸éè¿æ»¤å¨è¥ç¨å¨Rediséç¾¤ä¸­ï¼éç¡®ä¿keyè½å¨åä¸ä¸ªèç¹ï¼é¿ååå¸åçå¯¼è´bitæ°ç»åæ£ï¼ï¼Redissonå·²èªå¨å¤çè¯¥é®é¢ã</p>
</li>
</ul>
<h2 id="åæ»ç»ä»ä¹æ¶åéåªç§å®ç°æ¹å¼">åãæ»ç»ï¼ä»ä¹æ¶åéåªç§å®ç°æ¹å¼ï¼</h2>
<p>Rediså¸éè¿æ»¤å¨çæ ¸å¿ä»·å¼çæ¯âç¨æå°ç©ºé´æ¢æé«è¿æ»¤æçâï¼è½å°æ¶æåºæ¯éæ©å®ç°æ¹å¼ï¼</p>
<ul>
<li>
<p>å¿«éè½å°ãçäº§ç¯å¢ãåå¸å¼åºæ¯ï¼éRedissonï¼çå¿é«æï¼ééæ§å¼ºï¼</p>
</li>
<li>
<p>å­¦ä¹ ç ç©¶ãèªå®ä¹åå¸å½æ°ãç¹æ®åæ°éæ±ï¼éæå¨å®ç°ï¼çµæ´»å¯æ§ï¼å æ·±å¯¹åçççè§£ã</p>
</li>
</ul>
<p>å¶å®å¸éè¿æ»¤å¨çé»è¾å¹¶ä¸å¤æï¼æ ¸å¿å°±æ¯âåå¸æ è®°+æ¦çå¤æ­âãææ¡å®ä¹åï¼é¢å¯¹ç¼å­ç©¿éãæµ·éå»éç­é®é¢ï¼å°±ä¸ç¨åé âå¨éå­å¨âè¿ç§ç¬¨åæ³ï¼è½å¤§å¹æåç³»ç»æ§è½åç©ºé´å©ç¨çãä¸æ¬¡åéå°ç±»ä¼¼åºæ¯ï¼ç´æ¥æåºRediså¸éè¿æ»¤å¨ï¼è½»æ¾æå®ï¼</p>


</div>
<div id="MySignature" role="contentinfo">
    
<p>â¤ï¸ å¦æä½ åæ¬¢è¿ç¯æç« ï¼è¯·ç¹èµæ¯æï¼ ð åæ¶æ¬¢è¿å³æ³¨æçåå®¢ï¼è·åæ´å¤ç²¾å½©åå®¹ï¼</p>

<p>æ¬ææ¥èªåå®¢å­ï¼ä½èï¼<a href="https://www.cnblogs.com/sun-10387834/" target="_blank">ä½ç¥è®©ææ¥å·¡å±±</a>ï¼è½¬è½½è¯·æ³¨æåæé¾æ¥ï¼<a href="https://www.cnblogs.com/sun-10387834/p/19522155" target="_blank">https://www.cnblogs.com/sun-10387834/p/19522155</a></p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-31 18:33">2026-01-31 18:32</span>&nbsp;
<a href="https://www.cnblogs.com/sun-10387834">ä½ç¥è®©ææ¥å·¡å±±</a>&nbsp;
éè¯»(<span id="post_view_count">48</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19522155);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19522155', targetLink: 'https://www.cnblogs.com/sun-10387834/p/19522155', title: 'Rediså¿«éå®ç°å¸éè¿æ»¤å¨ï¼ç¼å­å»éçâæºè½é¨å«â' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ æ¶æå¸å¿å¤ï¼ç°åº¦æ¹æ¡æ±æ» ]]></title>
    <link>https://www.cnblogs.com/toplist/p/19527704</link>
    <guid>7e92593f124e573b1bb1fb05309e071f</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/toplist/p/19527704" title="åå¸äº 2026-01-31 17:35">
    <span role="heading" aria-level="2">æ¶æå¸å¿å¤ï¼ç°åº¦æ¹æ¡æ±æ»</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>å¤§å®¶å¥½ï¼ææ¯Javaççå¸ãæ¬æç»åç¬èçç»éªåæèï¼å¯¹ç°åº¦æ¹æ¡åä¸ªæ»ç»ï¼éç¹ä»ç»ABå®éªã</p>
<p>ç°åº¦å¨å¼åæµç¨ä¸­éå¸¸æ®éãååå°æµééªè¯ï¼ç¡®è®¤æ è¯¯ååæ¨å¨ï¼ç°åº¦è¿ç¨ä¸­ä¸æ¦åç°ç³»ç»å¼å¸¸ãæä¸å¡ææ å¼å¸¸ï¼åºç«å»åæ»ã</p>
<h1 id="ç°åº¦åºæ¯">ç°åº¦åºæ¯</h1>
<ul>
<li>ä»£ç ç°åº¦ï¼æ¯æå¸åçç°åº¦ï¼ç°åº¦ååæ°é»è¾ï¼ç°åº¦å¤åæ§é»è¾
<ul>
<li>æ¢å¯ä»¥æä¾v2çæ¬æ°æ¥å£ç»è°ç¨æ¹æå¡ï¼ç±è°ç¨æ¹æ¥åç°åº¦åæ¢</li>
<li>ä¹å¯ä»¥åé¨åç°åº¦ï¼åå°è°ç¨æ¹æ æ</li>
</ul>
</li>
<li>åçç°åº¦ï¼ä¸çº¿è¿ç¨ä¸­ï¼æ°çæ¬æå¡å®ä¾ä¸æ­å¢å ï¼éèèå¼å®¹æ°æ§åè®®</li>
<li>éç½®ç°åº¦ï¼ä¿®æ¹éç½®æ¶ï¼ææå¡å®ä¾ç°åº¦æ¨ééç½®åæ´</li>
</ul>
<h1 id="ç°åº¦æ¨¡å¼">ç°åº¦æ¨¡å¼</h1>
<ul>
<li>æ°å­idå°¾å·ç°åº¦ï¼åidæå2ä½ï¼ç¾åæ¯ï¼ãæå3ä½ï¼ååæ¯ï¼ãæå4ä½ï¼ä¸åæ¯ï¼ç­
<ul>
<li>å®ç°æ¹å¼ï¼idåæ¨¡ï¼ä¾å¦ <code>id % 100 &lt; ç°åº¦ç¾åæ¯</code>ï¼åå½ä¸­ç°åº¦</li>
<li>ç¹ç¹ï¼ç®åï¼éç¨äºç»å¤§é¨åææ¯ä¼ååºæ¯</li>
</ul>
</li>
<li>éæºç°åº¦ï¼åä¸é¨åéæºæµéåç°åº¦
<ul>
<li>å®ç°æ¹å¼ï¼<code>ThreadLocalRandom.current().nextInt(100) &lt; ç°åº¦ç¾åæ¯</code></li>
<li>ä¹æä»¥ä½¿ç¨ThreadLocalRandomãèä¸æ¯Randomï¼æ¯ä¸ºäºé¿åå¤çº¿ç¨ç«äºç¨äºçæéæºæ°çseed</li>
</ul>
</li>
<li>A/Bå®éª
<ul>
<li>å®ç°æ¹å¼ï¼åå±å®éªãå®éªæ°æ®æ¶éãç¦»çº¿ç»è®¡</li>
<li>ç¹ç¹ï¼éç¨äºå°æµééªè¯æ°ä¸å¡åè½çææï¼æ´ä½æ¹æ¡ç¸å¯¹å¤æï¼éè¦ææ¯åºå»º</li>
</ul>
</li>
</ul>
<h1 id="idéå">idéå</h1>
<ul>
<li>ä¸å¡idï¼å¦ç¨æ·idãååidç­</li>
<li>è®¾å¤idï¼æªæ³¨å/æªç»å½ç¨æ·ï¼æ­¤æ¶æ²¡æç¨æ·idï¼åªè½åè®¾å¤çå¯ä¸æ è¯</li>
</ul>
<p>ä¸é¢éç¹ä»ç»ä¸ä¸A/Bå®éªã</p>
<h1 id="abå®éª">A/Bå®éª</h1>
<h2 id="ç®ç">ç®ç</h2>
<ul>
<li>å°æµééªè¯æ°ä¸å¡åè½ï¼æ­£åæ¾èåæ¨è³å¨éï¼å¦åç»§ç»­è¿­ä»£ä¼åãæä¸çº¿ï¼é¿ååè½è¿äºèè¿</li>
<li>ç¨æ°æ®ä½ä¸ºä¾æ®ï¼é¿åæ³å½ç¶ãæèè¢å³ç­</li>
</ul>
<h2 id="åå±å®éª">åå±å®éª</h2>
<p>ä¸»è¦ç®çæ¯ä¸ºäºåæ¶åå¤ä¸ªå®éªï¼èä¸æ¯ç»æ¯ä¸ªå®éªååä¸é¨åæµéãå ä¸ºå½åæ¶è¿è¡çå®éªåå¤æ¶ï¼ç»åæ°éæåå¢å ï¼æ¯ä¸ªå®éªåå°çæµéå°±å¾å°äºã<br>
æè¿å å±ç»æï¼å®éªå±ãå®éªãåç»</p>
<ul>
<li>å®éªå±ä¹é´æ­£äº¤ï¼å¯åæ¶è¿è¡å¤ä¸ªå®éªå±çå®éª</li>
<li>åä¸å®éªå±çå®éªä¹é´äºæ¥ï¼æ¯å¦å½ä¸­äºå®éª1-1ï¼å°±ä¸ä¼å½ä¸­å®éª1-2ãå®éªææ0å°å¤ä¸ªåæ¡¶ï¼æ ¹æ®ä¸å¡idå¯è®¡ç®åºæ¡¶å·ï¼è¿èç¥éå½ä¸­åªä¸ªå®éª</li>
<li>åä¸å®éªåæå¤ä¸ªåç»ï¼åæ¬1ä¸ªå¯¹ç§ç»ï¼å1å°å¤ä¸ªå®éªç»ï¼åªä¼å½ä¸­å¶ä¸­ä¸ä¸ªåç»ãåç»ææ0å°å¤ä¸ªåæ¡¶ï¼æ ¹æ®ä¸å¡idå¯è®¡ç®åºæ¡¶å·ï¼è¿èç¥éå½ä¸­åªä¸ªåç»</li>
</ul>
<p>å®éªå±ãå®éªä¸¾ä¾ï¼</p>
<ul>
<li>å±ç¤ºå®éªå±ï¼æ ¹æ®é¡µé¢è¿è¡ååï¼å¦é¦é¡µãæç´¢é¡µãæ¨èé¡µãè¯¦æé¡µç­ãæ¯ä¸ªé¡µé¢ä½ä¸ºä¸ä¸ªå®éªå±ï¼æ¯ä¸ªå®éªå±éå¯åæ¶åå¤ä¸ªå±ç¤ºå®éª</li>
<li>ç®æ³å®éªå±ï¼æ ¹æ®åºæ¯è¿è¡ååï¼å¦ç¸ä¼¼æ¨èãæ­éè´­æ¨èãä¸ªæ§åæ¨èãæç´¢æåºãå¹¿åæåºç­ãæ¯ä¸ªåºæ¯ä½ä¸ºä¸ä¸ªå®éªå±ï¼æ¯ä¸ªå®éªå±éå¯åæ¶åå¤ä¸ªç®æ³å®éª</li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/1247698/202601/1247698-20260127012326894-198795136.png" alt="image" loading="lazy"></p>
<h2 id="åå¸ç®æ³ææ£">åå¸ç®æ³ææ£</h2>
<p>è¦åæ¶æ¯æå¤ä¸ªåå±å®éªï¼æ ¸å¿å¨äºéè¿åå¸ç®æ³å°æ¯ä¸å±çæµéææ£ï¼ç¨äºå®ç°âåååæµâåâå±é´æ­£äº¤âï¼ä½¿å¾æµéå¨åä¸ªå®éªçæææ­£è´æµæ¶ï¼æè½å¾å°çå®çå¯¹æ¯ç»æã<br>
ä»¥ä¸æ¯è®¡ç®å®éªå±æ¡¶å·çä»£ç ç¤ºä¾ï¼å®éªæ¡¶å·åçï¼</p>
<pre><code class="language-java">import com.google.common.hash.Hashing;
import java.nio.charset.StandardCharsets;

public class ABTestRouter {

    /**
     * æ ¹æ®ç¨æ·IDåå®éªå±IDï¼å®éªå±IDåå½ççè§è²ï¼ï¼è®¡ç®æ¡¶å· (0-99)
     */
    public static int getBucket(String userId, String layerId) {
        // 1. æ¼æ¥ Key: "layerId:userId"
        String key = layerId + ":" + userId;

        // 2. ä½¿ç¨ MurmurHash3 (32-bit)
        // Guava ç murmur3_32_fixed æ¯çº¿ç¨å®å¨ç
        int hash = Hashing.murmur3_32_fixed()
                .hashString(key, StandardCharsets.UTF_8)
                .asInt();

        // 3. åæ¨¡å¹¶ç¡®ä¿ç»æä¸ºæ­£æ°
        // Math.abs(Integer.MIN_VALUE) ä¼è¿åè´æ°ï¼æä»¥æ¨èä½¿ç¨ä½è¿ç®å»é¤ç¬¦å·ä½
        return (hash &amp; Integer.MAX_VALUE) % 100;
    }

    public static void main(String[] args) {
        String uid = "user_123456";
        
        // ä¸åå±çæµéæ¯æ­£äº¤çï¼ææ£éæ°åéï¼
        System.out.println("å±ç¤ºå±æ¡¶å·: " + getBucket(uid, "layer_ui"));
        System.out.println("ç®æ³å±æ¡¶å·: " + getBucket(uid, "layer_algo"));
    }
}
</code></pre>
<p>ä¹æä»¥ç¨murmurhashï¼èémd5ï¼æ¯å ä¸ºmd5æ¯å å¯ç®æ³ï¼è®¡ç®å¼éæ´å¤§ï¼å¨ABå®éªä¸­ä»éååææ£å³å¯ï¼æ éæå¿æ ¹æ®åå¸ç»æåæ¨åæã<br>
ä¹æä»¥æå®éªå±idä½ä¸ºçï¼æ¯å ä¸ºå¾®å°çè¾å¥å·®å¼é½ä¼å¯¼è´åå¸ç»æç¸å·®å·¨å¤§ï¼å®ç°ææ£çææã</p>
<h2 id="å®éªæ°æ®æ¶é">å®éªæ°æ®æ¶é</h2>
<p>å®éªæ°æ®æ¶éæµç¨å¦ä¸ï¼</p>
<ul>
<li>å¨ABå®éªç®¡çç³»ç»ä¸­éç½®å®éªä¿¡æ¯ï¼å¦å®éªçå¼ãæ¡¶å·ä¸å®éªç»çæ å°å³ç³»ç­ï¼å¯å¨æä¿®æ¹</li>
<li>ä»£ç é»è¾å¼åï¼
<ul>
<li>å¼å¥å®éªsdkï¼sdkå¨å¯å¨ãæéç½®åæ´æ¶æåå®éªä¿¡æ¯ï¼æ¬å°è®¡ç®ä¸å¡idçæ¡¶å·ï¼è¿èå¾å°å½ä¸­çåç»</li>
<li>å¯¹ç§ç»åå½åé»è¾ï¼å®éªç»1åé»è¾1ï¼å®éªç»2åé»è¾2</li>
</ul>
</li>
<li>å¨æ­£å¼å¼å§ABå®éªä¹åï¼ååAAåæ¡¶å®éªï¼æ¨¡æå®éªç»ãå¯¹ç§ç»çç»æï¼å¤æ­æ¯å¦ååï¼é¿ååæ¡¶ä¸ååå¸¦æ¥éè¯¯çå®éªç»æ</li>
<li>å®éªå¼å§ï¼åç«¯åç¹ï¼sdkååºåç«¯åç¹æ¶æ¯
<ul>
<li>æ¶æ¯æ ¼å¼ä¸¾ä¾ï¼<code>ä¸å¡id, å®éªå±id, å®éªid, åç»id, æ¡¶å·, è§¦åæ¶é´</code></li>
</ul>
</li>
<li>å®éªè¿ç¨ï¼å®éªæç»­æ¶é´è³å°ä¸å¨ï¼è¦çå·¥ä½æ¥ãå¨æ«/åæï¼é¿ååæ¶é´å¨æå¸¦æ¥çæ³¢å¨å½±å</li>
<li>ç¦»çº¿ç»è®¡å®éªææï¼
<ul>
<li>åç«¯åç¹æ°æ®å¯¼å¥æåäºä»¶hiveè¡¨</li>
<li>ä¸å¡DBæ°æ®å¯¼å¥è¡ä¸ºäºä»¶hiveè¡¨ï¼å¦æ³¨åãç»å½ãæµè§ãç¹å»ãæ¶èãå è´­ãä¸åãæ¯ä»ç­ï¼åå³äºå®éªå³æ³¨çä¸å¡ææ </li>
<li>ææåäºä»¶ãè¡ä¸ºäºä»¶joinèµ·æ¥ï¼å¯¹æ¯å®éªç»ãå¯¹ç§ç»çä¸å¡ææ å·®å¼</li>
</ul>
</li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/1247698/202601/1247698-20260131014010302-1779078827.png" alt="image" loading="lazy"></p>
<p>ä»¥ä¸æ¯sqlç¤ºä¾ï¼ä»£è¡¨ä»å®éªæåå24å°æ¶ååä¸ªåç»çè½¬åçå¯¹æ¯ã</p>
<pre><code class="language-sql">SELECT 
    e.group_id,
    COUNT(DISTINCT e.user_id) as exposed_users,
    COUNT(DISTINCT a.user_id) as converted_users,
    COUNT(DISTINCT a.user_id) / COUNT(DISTINCT e.user_id) as conversion_rate
FROM exposure_events e
LEFT JOIN action_events a ON e.user_id = a.user_id 
    AND a.event_time BETWEEN e.event_time AND (e.event_time + INTERVAL 24 HOUR)
WHERE e.experiment_id = 'ui_test_001'
GROUP BY e.group_id;
</code></pre>
<h2 id="å®éªæ¥è¡¨åæ">å®éªæ¥è¡¨åæ</h2>
<p>è¯ä¼°å®éªç»ææ¯å¦æ­£åãæ¯å¦æ¾èãäºè§£ç»è®¡å­¦éçæ ¸å¿æ¦å¿µï¼è½çæå®éªæ¥è¡¨å³å¯ã</p>
<h3 id="på¼">på¼</h3>
<p>ç¨æ¥è¡¡éå®éªç»ææ¯å¦æ¾èï¼på¼çå«ä¹æ¯ï¼åè®¾å®éªç»ä¸å¯¹ç§ç»æ²¡æåºå«ï¼æ­¤æ¶è§å¯å°å®éªæå·®å¼çæ¦çãä¸è¬è¦æ± <code>p &lt; 0.05</code>ï¼ä¹å°±æ¯è¯´å®éªç»ææ¾èçæ¦çå¤§äº95%ï¼<code>1 - 0.05 = 95%</code>ï¼</p>
<h3 id="ç½®ä¿¡åºé´">ç½®ä¿¡åºé´</h3>
<p>å¨æ¾èçåæä¸ï¼ç¨æ¥è¡¡éå®éªç»ææ¯å¦æ­£åï¼ä»£è¡¨ä¸å¡ææ çå¯è½èå´åå¸ã<br>
æ¯å¦ï¼å®éªç»æéä¸å¡ææ æåäº1%ï¼95%ç½®ä¿¡åºé´å¨[0.8%, 1.2%]ï¼åä»£è¡¨æ95%çææ¡å¯ä»¥æä¸å¡ææ æåè³å°0.8%ãè³å¤1.2%ï¼æææ­£åãå¦æç½®ä¿¡åºé´çä¸çæ¯è´æ°ï¼å°±æå¯è½æ¯è´åææäºï¼éè¦è­¦æã</p>
<p>ä»¥ä¸å°±æ¯ç°åº¦æ¹æ¡çæ»ç»äºï¼æ¬¢è¿è®¨è®ºäº¤æµã</p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-31 17:35">2026-01-31 17:35</span>&nbsp;
<a href="https://www.cnblogs.com/toplist">Javaççå¸</a>&nbsp;
éè¯»(<span id="post_view_count">50</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19527704);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19527704', targetLink: 'https://www.cnblogs.com/toplist/p/19527704', title: 'æ¶æå¸å¿å¤ï¼ç°åº¦æ¹æ¡æ±æ»' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ å¼æºèªå»ºï¼GPT åæ¢ç©ºé´éº»ç¦ï¼ä¸ä»¶å¸®ä½ æå® ]]></title>
    <link>https://www.cnblogs.com/qxnm/p/19558462</link>
    <guid>df675c3287b85fd34c6b27a67bacb736</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/qxnm/p/19558462" title="åå¸äº 2026-01-31 16:23">
    <span role="heading" aria-level="2">å¼æºèªå»ºï¼GPT åæ¢ç©ºé´éº»ç¦ï¼ä¸ä»¶å¸®ä½ æå®</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p style="font-size: 0; line-height: 0; margin: 0">&nbsp;</p>
<section style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px">
<blockquote style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; font-style: italic; padding: 1em 1em 1em 2em; border-left: 4px solid rgba(0, 152, 116, 1); border-radius: 6px; color: rgba(0, 0, 0, 0.6); background: rgba(247, 247, 247, 1); margin-bottom: 1em; border-bottom: 0.2px solid rgba(0, 0, 0, 0.04); border-top: 0.2px solid rgba(0, 0, 0, 0.04); border-right: 0.2px solid rgba(0, 0, 0, 0.04); margin-top: 0">
<p style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 1em; display: block; letter-spacing: 0.1em; color: rgba(63, 63, 63, 1)">å­æ° 497ï¼éè¯»å¤§çº¦é 3 åé</p>
</blockquote>
<p style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; margin: 1.5em 8px; letter-spacing: 0.1em; color: rgba(63, 63, 63, 1)">è¿å å¤©ç»æå¿çï¼æè¿åäºä¸ä¸ªCodexçTEAM è´¦å·ç®¡çå·¥å·ç´æ¥å¨æ¬å°è¿è¡<br>å¤§æ¦æ¯ä¸é¢è¿æ ·èäºå å¤©ï¼è½éåcodex cliä½¿ç¨<br>æç®åè¿æä¸äºbugåä¸å¥½ç¨çå°æ¹ï¼åé¢ä¼éæ­¥ä¼ååºæ¥</p>
<p style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; margin: 1.5em 8px; letter-spacing: 0.1em; color: rgba(63, 63, 63, 1)">é¡¹ç®è¿æ¥ï¼éè¦çä½¬åå¸æè½è´¡ç®ä¸ä¸ªstart<br><span style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; color: rgba(87, 107, 149, 1)">hongshungao/Codex-Manager: ä¸ä¸ªCodex cli è´¦å·ç®¡çä¸åæ¢å·¥å·ãä¸º Codex cliæä¾æ¬å°å·æ± ç®¡çèªå¨åæ¢ã<sup>[1]</sup></span></p>
<h2 id="0" style="text-align: center; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 20.8px; display: table; padding: 0.3em 1.2em; margin: 4em auto 2em; color: rgba(255, 255, 255, 1); background: rgba(0, 152, 116, 1); font-weight: bold; border-radius: 8px 24px; box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06)" data-heading="true">ReadMe</h2>
<p style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; margin: 1.5em 8px; letter-spacing: 0.1em; color: rgba(63, 63, 63, 1)">æ¬å°æ¡é¢ç«¯ + æå¡è¿ç¨ç Codex è´¦å·æ± ç®¡çå¨ï¼ç¨äºç»ä¸ç®¡çè´¦å·ãç¨éä¸å¹³å° Keyï¼å¹¶æä¾æ¬å°ç½å³ä¸æå¡è½åã</p>
<h2 id="1" style="text-align: center; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 20.8px; display: table; padding: 0.3em 1.2em; margin: 4em auto 2em; color: rgba(255, 255, 255, 1); background: rgba(0, 152, 116, 1); font-weight: bold; border-radius: 8px 24px; box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06)" data-heading="true">é¡¹ç®ç®ä»</h2>
<ul style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; list-style: none; padding-left: 1.5em; margin-left: 0; color: rgba(63, 63, 63, 1)">
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">â¢ æ¡é¢ç«¯ï¼Tauriï¼è´è´£è´¦å·ç®¡çãç¨éå±ç¤ºãææç»å½ä¸å¹³å° Key éç½®</li>
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">â¢ æå¡ç«¯ï¼Rustï¼æä¾æ¬å° RPC + Gatewayï¼æ¯æç¨éå·æ°ãè´¦å·è½®è¯¢ä¸é´æè½¬å</li>
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">â¢ æ¯ææå¨è§£æ OAuth åè°é¾æ¥ï¼é¿åç«¯å£å²çªæåè°å¤±è´¥</li>
</ul>
<h2 id="2" style="text-align: center; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 20.8px; display: table; padding: 0.3em 1.2em; margin: 4em auto 2em; color: rgba(255, 255, 255, 1); background: rgba(0, 152, 116, 1); font-weight: bold; border-radius: 8px 24px; box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06)" data-heading="true">åè½äº®ç¹</h2>
<ul style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; list-style: none; padding-left: 1.5em; margin-left: 0; color: rgba(63, 63, 63, 1)">
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">â¢ è´¦å·æ± ç®¡çï¼åç»/æ ç­¾/æåº/å¤æ³¨</li>
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">â¢ ç¨éå±ç¤ºï¼5 å°æ¶ + 7 æ¥ç¨éå¿«ç§</li>
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">â¢ ææç»å½ï¼æµè§å¨ææ + æå¨åè°è§£æ</li>
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">â¢ å¹³å° Keyï¼çæ/ç¦ç¨/å é¤</li>
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">â¢ æ¬å°æå¡ï¼èªå¨å¯å¨ãå¯èªå®ä¹ç«¯å£</li>
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">â¢ ç½å³è½åï¼ä¸ºæ¬å° CLI/å·¥å·æä¾ç»ä¸å¥å£</li>
</ul>
<h2 id="3" style="text-align: center; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 20.8px; display: table; padding: 0.3em 1.2em; margin: 4em auto 2em; color: rgba(255, 255, 255, 1); background: rgba(0, 152, 116, 1); font-weight: bold; border-radius: 8px 24px; box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06)" data-heading="true">ææ¯æ </h2>
<ul style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; list-style: none; padding-left: 1.5em; margin-left: 0; color: rgba(63, 63, 63, 1)">
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">â¢ åç«¯ï¼Vite + åç JS + èªå®ä¹ UI</li>
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">â¢ æ¡é¢ç«¯ï¼Tauri (Rust)</li>
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">â¢ æå¡ç«¯ï¼Rustï¼æ¬å° HTTP/RPC + Gatewayï¼</li>
</ul>
<h2 id="4" style="text-align: center; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 20.8px; display: table; padding: 0.3em 1.2em; margin: 4em auto 2em; color: rgba(255, 255, 255, 1); background: rgba(0, 152, 116, 1); font-weight: bold; border-radius: 8px 24px; box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06)" data-heading="true">ç®å½ç»æ</h2>
<pre class="language-plaintext highlighter-hljs" data-dark-theme="true"><code>.
ââ&nbsp;apps/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;åç«¯ä¸&nbsp;Tauri&nbsp;æ¡é¢ç«¯
â&nbsp;&nbsp;ââ&nbsp;src/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;åç«¯æºç 
â&nbsp;&nbsp;ââ&nbsp;src-tauri/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Tauri&nbsp;ç«¯æºç 
â&nbsp;&nbsp;ââ&nbsp;dist/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;åç«¯æå»ºäº§ç©
ââ&nbsp;crates/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Rust&nbsp;æ ¸å¿ä¸æå¡ç«¯
â&nbsp;&nbsp;ââ&nbsp;gpttools-core
â&nbsp;&nbsp;ââ&nbsp;gpttools-service
ââ&nbsp;portable/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;ä¾¿æºçè¾åºç®å½
ââ&nbsp;rebuild.ps1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;æåèæ¬
ââ&nbsp;README.md</code></pre>
<h2 id="5" style="text-align: center; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 20.8px; display: table; padding: 0.3em 1.2em; margin: 4em auto 2em; color: rgba(255, 255, 255, 1); background: rgba(0, 152, 116, 1); font-weight: bold; border-radius: 8px 24px; box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06)" data-heading="true">å¿«éå¼å§</h2>
<ol style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; padding-left: 1.5em; margin-left: 0; color: rgba(63, 63, 63, 1)">
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">1. å¯å¨æ¡é¢ç«¯åï¼ç¹å»âå¯å¨æå¡â</li>
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">2. è¿å¥âè´¦å·ç®¡çâæ·»å è´¦å·å¹¶å®æææ</li>
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">3. éè¦æ¶ç²è´´åè°é¾æ¥å®ææå¨è§£æ</li>
<li style="text-align: left; line-height: 1.75; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 16px; display: block; margin: 0.5em 8px; color: rgba(63, 63, 63, 1)">4. å·æ°ç¨éï¼æ£æ¥ç¶æä¸éé¢</li>
</ol>
</section>
<p style="font-size: 0; line-height: 0; margin: 0">&nbsp;</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-31 16:24">2026-01-31 16:23</span>&nbsp;
<a href="https://www.cnblogs.com/qxnm">é«å®é¡º</a>&nbsp;
éè¯»(<span id="post_view_count">46</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19558462);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19558462', targetLink: 'https://www.cnblogs.com/qxnm/p/19558462', title: 'å¼æºèªå»ºï¼GPT åæ¢ç©ºé´éº»ç¦ï¼ä¸ä»¶å¸®ä½ æå®' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ ç¡¬æ ¸ç§æ®ï¼ä¸ºä½å°ç±³ä»»å¤©å å°æ Rootï¼æ­ç§æä½ç³»ç»ä»å¯å¨å°âå¤ºæâçåºå±æ¸¸æ ]]></title>
    <link>https://www.cnblogs.com/kaiux/p/19558207</link>
    <guid>1f8458a46456c1b5b1dbb35bcbc43e92</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/kaiux/p/19558207" title="åå¸äº 2026-01-31 15:40">
    <span role="heading" aria-level="2">ç¡¬æ ¸ç§æ®ï¼ä¸ºä½å°ç±³ä»»å¤©å å°æ Rootï¼æ­ç§æä½ç³»ç»ä»å¯å¨å°âå¤ºæâçåºå±æ¸¸æ</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/1158182/202601/1158182-20260131154106142-1968484472.png" alt="ç¡¬æ ¸ç§æ®ï¼ä¸ºä½å°ç±³ä»»å¤©å å°æ Rootï¼æ­ç§æä½ç³»ç»ä»å¯å¨å°âå¤ºæâçåºå±æ¸¸æ" class="desc_img">
        å°ç±³éBLãä»»å¤©å åç ´è§£ï¼ååå¨æä»ä¹ï¼æ¬æç¡¬æ ¸æè§£ä»å¼æºå°âå¤ºæâçåºå±é»è¾ãç©¿è¶UEFIæåäº¤æ¥ï¼æ­ç§Ring0ç©çé²çº¿ä¸Rootæ¬è´¨ï¼æ·±åº¦åæSwitchç¡¬ç ´çâçµåæéæ³¨å¥âåçãå¸¦ä½ æ·±å¥å¾®è§ä¸çï¼çæè¿åºè¯çæ·±å¤çä¿¡ä»»é¾æ»é²æã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>æè¿æºåæç­é¹çä¸¤ä»¶äºï¼ä¸æ¯å°ç±³å½»åºæ¶ç´§äº Bootloader è§£éæéï¼äºæ¯ä»»å¤©å åèµ·è¯äºå ä¸ªå Switch ç ´è§£è¯ççåå®¶ã</p>
<p>å¾å¤åå¼å¯è½ä¼è§å¾ï¼âæè±é±ä¹°çç¡¬ä»¶ï¼å­ä»ä¹ä¸è®©æå®å¨æ§å¶ï¼â</p>
<p>ä½å¨ååçé»è¾éï¼<strong>ä¸æ¦ä½ æ¿å°äºæé«æéï¼ä½ å°±æç ´äºæä»¬è¾è¦å»ºç«çâåä¸å´å¢âã</strong></p>
<p>ä¸ºäºçæè¿åºå³äºâæ§å¶æâçæäºï¼æä»¬ä¸éè¦å»åæ¯ç¥çãæä½ç³»ç»å¯¼è®ºãï¼åªéè¦æè§è§ç¼©å°å°çº³ç§çº§å«ï¼ççå½ä½ æä¸çµæºé®çé£ä¸æå¿å¨é­çç¬é´ï¼è®¡ç®æºåé¨å°åºä¸æ¼äºä¸åºææ ·çâæåäº¤æ¥âã</p>
<h2 id="ä¸è®èæ¶ä»£çå°å¾">ä¸ãè®èæ¶ä»£çå°å¾</h2>
<p>å¨ CPU ååéæ¥çé£ä¸å»ï¼å®é¢å¯¹çæ¯ä¸çæ¼é»çå­å¨èåââç¡¬çãè¦æåºå¤§çæä½ç³»ç»è£è¿èå­ï¼åå­ï¼éï¼é¦åå¾æä¸å¼ å°å¾ã</p>
<p><strong>1. MBRï¼ä¸ä¸ä»£çèå°å¾</strong></p>
<p>å¨ä»¥åï¼æä»¬ä½¿ç¨çæ¯ <strong>MBR (Master Boot Record)</strong>ãå®çæ ·å­éå¸¸å¯é¸ï¼åªå æ®ç¡¬çæå¼å¤´ç <strong>512 å­è</strong>ã</p>
<p>åªæä½ ç°å¨çç¡¬çæ 10TBï¼MBR ä¹åªæè¿ç¹å°çãè¿å°±å¯¼è´äºå®åå¤©ä¸è¶³ï¼å ä¸ºè®°å½å°åçç©ºé´å¤ªå°ï¼å®æå¤§åªè½è¯å« <strong>2TB</strong> çç¡¬çï¼èä¸æå¤åªè½å <strong>4 ä¸ªä¸»ååº</strong>ãå®å°±åä¸æ¬åªæä¸é¡µç®å½çèæ§ç¬è®°æ¬ï¼æ¢åä¸ä¸å¤ªå¤ä¸è¥¿ï¼ä¹æå¼ä¸äºéå¾å¤§åå¸çè·¯ã</p>
<p><strong>2. GPTï¼æ°ä¸ççå¨æ¯å¯¼èª</strong></p>
<p>ç°å¨ççµèå ä¹é½æ é <strong>UEFI</strong> å¯å¨ï¼ä¸ä¹æ­éçæ¯ <strong>GPT (GUID Partition Table)</strong> ååºè¡¨ã</p>
<p>å®çä¼å¿æ¾èæè§ï¼å½»åºæç ´äºå®¹éåååºæ°éçéå¶ï¼æ³åå¤å°å°±åå¤å°ãæ´éè¦çæ¯å®å·å¤äº<strong>å®¹ç¾æºå¶</strong>ââMBR åäºï¼æ´åç¡¬ççæ°æ®å¯è½å°±è¯»ä¸åºæ¥äºï¼ä½ GPT èªæå°å¨ç¡¬ççâè½¦å¤´âåâè½¦å°¾âåå­äºä¸ä»½ï¼åäºè¿è½æã</p>
<p>ä¸ºäºç§é¡¾é£äºèæ§çè½¯ä»¶ï¼ç°å¨ç GPT ç¡¬çè¿ä¼å¨å¼å¤´ä¿çä¸ä¸ªâåè£ç MBRâãå®çå¯ä¸ä½ç¨å°±æ¯åè¯èè½¯ä»¶ï¼âè¿åç¡¬çå·²ç»æä¸»äºï¼å«ä¹±å¨ãâ</p>
<p><img src="https://img2024.cnblogs.com/blog/1158182/202601/1158182-20260131153816610-848754645.jpg" alt="mbrvsgpt" loading="lazy"></p>
<h2 id="äºç¬¬ä¸æ£ç«ç¬æ">äºãç¬¬ä¸æ£ç«ç¬æ</h2>
<p>å½ä½ æä¸çµæºé®ï¼çµæµæ¶å¥ä¸»æ¿ï¼CPU åçç¬¬ä¸ä»¶äºæ¯âç¡¬ç¼ç âåæ­»çï¼å¼ºå¶è¯»åä¸æ®µâç»å¯¹æå¨âçä»£ç ã</p>
<p>è¿éä½çç¡¬ä»¶ççµé­ââ<strong>åºä»¶ (Firmware)</strong>ãä¸è¿ï¼æ ¹æ®è®¾å¤ç±»åçä¸åï¼è¿éçç®¡å®¶ä¹åä¸ºä¸¤æ´¾ã</p>
<p><strong>1. PC ççç®¡å®¶ï¼ä» BIOS å° UEFI</strong></p>
<p>å¨æ¼«é¿ç PC åå±å²ä¸­ï¼ç®¡å®¶æ¢äºä¸å±ã</p>
<ul>
<li><strong>èç®¡å®¶å« BIOS</strong>ãå®æ¯ä¸ªå®æ§æ´¾ï¼åªæ 16 ä½æ±ç¼è¯­è¨ï¼åªè½åæ¿å°è¯»åç¡¬çå¤´é¨ç MBRï¼å¹²æ´»æ¢ä¸æçä½ã</li>
<li><strong>æ°ç®¡å®¶å« UEFI</strong>ãå®æ¬è´¨ä¸å·²ç»æ¯ä¸ä¸ª<strong>å¾®åæä½ç³»ç»</strong>äºãå®è½è¯»ææä»¶ç³»ç»ï¼æ¯å¦ FAT32ï¼ï¼è½ç´æ¥è¿è¡åç¼ä¸º <code>.efi</code> çå¯æ§è¡ç¨åºï¼çè³è½èç½ãè¿ä¹æ¯ä¸ºä»ä¹ç°å¨ç BIOS çé¢è½ç¨é¼ æ ãè½æªå¾ï¼çè³åå¾è±éè¡å¨çåå ã</li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/1158182/202601/1158182-20260131153830288-1861685661.jpg" alt="bios" loading="lazy"></p>
<p><strong>2. åµå¥å¼ççç®¡å®¶ï¼BootROM</strong></p>
<p>å¯¹äº<strong>å°ç±³ææº</strong>æ <strong>Switch</strong> è¿ç§åµå¥å¼è®¾å¤ï¼éå¸¸æ¯ ARM æ¶æï¼ï¼è½ç¶å®ä»¬æ²¡æåçµèé£æ ·å¯ä»¥æ <code>Del</code> é®è¿å¥çå¾å½¢å UEFI çé¢ï¼ä½æ ¸å¿é»è¾æ¯ä¸æ ·çã</p>
<p>å®ä»¬ä¾é çæ¯è¯çåºåæ¶å°±å¨åé¨ç§å½æ­»çä¸å°æ®µä»£ç ââ<strong>BootROM</strong>ãå®æ¯ç¡¬ä»¶èéåæ§è¡çç¬¬ä¸æ®µä»£ç ï¼æ¯ä»»ä½è½¯ä»¶é½æ©ï¼ä¸æ æ³è¢«ä¿®æ¹ãå®çèè´£åä¸èç¥å£ï¼åå§åæåºæ¬çç¡¬ä»¶ï¼ç¶åå»å¯»æ¾å¹¶éªè¯ä¸ä¸æ£æ¥åèã</p>
<h2 id="ä¸çµæ´»çä¸­é´äºº">ä¸ãçµæ´»çä¸­é´äºº</h2>
<p>å½ UEFI æ BootROM èªæ£å®ç¡¬ä»¶ï¼åå¤ææåç§»äº¤ç»æä½ç³»ç»æ¶ï¼å®ä¸ä¼ç´æ¥å¤é Windows æ Linux çåæ ¸ï¼èæ¯åå¤éä¸ä½ä¸­é´äººââ<strong>Bootloader</strong>ï¼å¨ Linux PC ä¸çééå¸¸æ¯ GRUBï¼å¨å®å/ææºä¸çééå¸¸æ¯ U-Boot æååèªç ç Bootloaderï¼ã</p>
<p><strong>ä¸ºä»ä¹è¦ç»ä¸åï¼ä¸è½ç´æ¥å è½½åæ ¸åï¼</strong></p>
<p>åå å¨äºæä½ç³»ç»åæ ¸ï¼Kernelï¼å¤ªâå¨è´µâäºï¼</p>
<ol>
<li>å®å¯è½éè¦ç¹æ®çå¯å¨åæ°ï¼æ¯å¦ä½ éè¦è¿å¥å®å¨æ¨¡å¼ï¼æèå¼å¯è°è¯ï¼ã</li>
<li>å®å¯è½èººå¨åºä»¶è¯»ä¸æçæä»¶ç³»ç»éï¼æ¯å¦ Linux ç Ext4 æ ¼å¼ï¼UEFI åçå¯è½åªè®¤ FATï¼ã</li>
<li>ä½ å¯è½å®è£äºåç³»ç»ï¼éè¦æäººæ¥é®ä½ å°åºè¿åªä¸ä¸ªã</li>
</ol>
<p>æä»¥ï¼Bootloader å°±åæ¯ä¸ä¸ªä¸ä¸çâé¢è·¯äººâãå®è´è´£æåæ ¸æä»¶ï¼<code>vmlinuz</code>ï¼ååå§åæä»¶ç³»ç»ï¼<code>initrd</code>ï¼æ¬è¿å°åå­éï¼ä¸ååå¤å°±ç»ªåï¼æ§è¡ä¸ä¸ªä¿¡ä»°ä¹è·ï¼Jump æä»¤ï¼ï¼å° CPU çæ§å¶æå½»åºç§»äº¤ç»åæ ¸ã</p>
<p><img src="https://img2024.cnblogs.com/blog/1158182/202601/1158182-20260131153843749-1017464152.jpg" alt="bootloader" loading="lazy"></p>
<h2 id="åé¶çº§æ£®ä¸¥">åãé¶çº§æ£®ä¸¥</h2>
<p>åæ ¸ï¼Kernelï¼ä¸æ¦æ¥ç®¡äº CPUï¼åçç¬¬ä¸ä»¶äºå°±æ¯å©ç¨ CPU çç¡¬ä»¶ç¹æ§ï¼å»ºç«èµ·æ£®ä¸¥çç­çº§å¶åº¦ãè¿æ¯ç³»ç»å®å¨çåºç³ã</p>
<p><strong>1. æ¶å¤±ç Ring 1 å Ring 2</strong></p>
<p>Intel x86 æ¶æå¨è®¾è®¡ä¹åï¼å¶å®å®ä¹äº 4 ä¸ªç¹æçº§ï¼<strong>Ring 0</strong>ï¼åæ ¸ï¼æé«æéï¼ã<strong>Ring 1 &amp; 2</strong>ï¼åæ¬ç»é©±å¨ï¼ã<strong>Ring 3</strong>ï¼åºç¨ç¨åºï¼æä½æéï¼ã</p>
<p><strong>ä½å¨ç°ä»£æä½ç³»ç»ï¼Windows/Linuxï¼ä¸­ï¼Ring 1 å Ring 2 å ä¹è¢«åºå¼äºï¼åªå©ä¸äºä¸¤æååç Ring 0 å Ring 3ã</strong></p>
<p>è¿ææ ¸å¿çåå æ¯<strong>ç§»æ¤æ§ï¼Portabilityï¼</strong>ãå½å¹´ç Linux å Windows NT ä¸ºäºè½è·å¨ä¸åç CPU æ¶æä¸ï¼æ¯å¦ MIPSãARMï¼ï¼éå°äºä¸ä¸ªå¤§é¾é¢ï¼å¾å¤é x86 ç RISC æ¶æç¡¬ä»¶è®¾è®¡ä¸éå¸¸ç²¾ç®ï¼<strong>åªæ¯æä¸¤ä¸ªå±çº§</strong>ï¼åæ ¸æ Kernel Mode åç¨æ·æ User Modeï¼ãä¸ºäºä¿è¯ä»£ç éç¨ï¼æä½ç³»ç»è®¾è®¡èç´¢æ§å³å®ï¼âå¥½ï¼é£æä»¬ä¹åªç¨ä¸¤å±ï¼æä¸­é´çç æãâ</p>
<p><strong>2. ç©çå±é¢çé²çº¿</strong></p>
<p>ç°å¨ç CPU åé¨ï¼æä¸ä¸ª <strong>CS å¯å­å¨</strong> æç¡®è®°å½äºå½åçèº«ä»½ï¼</p>
<ul>
<li><strong>0 (ä¸å¸æ¨¡å¼)</strong>ï¼ä½ å¯ä»¥æ§è¡æææä»¤ï¼å¼å³ä¸­æ­ãè¯»åä»»æåå­ãç´æ¥æä½ç¡¬ç IOã</li>
<li><strong>3 (å¹³æ°æ¨¡å¼)</strong>ï¼ä½ åªè½åæ°å­¦è¿ç®ï¼ä¸¥ç¦ç´æ¥è§¦ç¢°ç¡¬ä»¶ã</li>
</ul>
<p>å¦æä½ ç Appï¼è¿è¡å¨ Ring 3ï¼è¯å¾æ§è¡ä¸æ¡âè¯»åç¡¬çâçæ±ç¼æä»¤ï¼CPU ç¡¬ä»¶å¨è§£ç é¶æ®µå°±ä¼åç°ï¼âä½ åªæ 3 çº§æéï¼å´æ³æ§è¡ 0 çº§æä»¤ï¼â äºæ¯ç´æ¥æåºå¼å¸¸ï¼åæ ¸æè·åä¼ç´æ¥æè¿ä¸ª App ææââè¿å°±æ¯ç¨åº<strong>å´©æºï¼Crashï¼</strong>çæ¬è´¨ã</p>
<p><strong>3. å¯ä¸çééï¼Syscall</strong></p>
<p>é£å¹³æ°ï¼Appï¼æ³åäºï¼æ¯å¦è¯»æä»¶ãèç½ï¼æä¹åï¼å¿é¡»å»æ²è¡é¨çé¼ââè¿å«<strong>ç³»ç»è°ç¨ï¼Syscallï¼</strong>ã</p>
<ol>
<li>App æ§è¡ <code>SYSCALL</code> æä»¤ã</li>
<li>CPU ç¬é´åæ¢å° Ring 0ï¼è·³è½¬å°åæ ¸é¢è®¾å¥½çä»£ç ä½ç½®ã</li>
<li><strong>æ¢æ ï¼Stack Switchingï¼</strong>ï¼è¿æ¯å³é®ä¸æ­¥ï¼CPU ä¼èªå¨ææ æéä»âç¨æ·æ âåæ¢å°âåæ ¸æ âãè¿æ¯ä¸ºäºé²æ­¢é»å®¢å¨æ éåé·ï¼ç¡®ä¿åæ ¸å¨ä¸ä¸ªç»å¯¹å¹²åçç¯å¢ä¸å·¥ä½ã</li>
<li>åæ ¸æ¿ä½ åå®äºï¼æç»ææ·åç¨æ·åå­ï¼ç¶åéå Ring 3ã</li>
</ol>
<p><img src="https://img2024.cnblogs.com/blog/1158182/202601/1158182-20260131153901587-891608174.jpg" alt="rings" loading="lazy"></p>
<h2 id="äºçåç¾ç´ç">äºãçåç¾ç´ç</h2>
<p>è¿æ¯å¾å¤ææ¯ç±å¥½èæå®¹æææ··çå°æ¹ï¼<strong>âæææº Root äºï¼æ¯ä¸æ¯å°±æå³çæç App è¿è¡å¨ Ring 0 äºï¼â</strong></p>
<p><strong>ç­æ¡æ¯ï¼NOãå³ä½¿ä½  Root äºï¼ä½ ç App ä¾ç¶è¿è¡å¨ Ring 3ã</strong></p>
<p><strong>1. Root åªæ¯ä¸ä¸ªâéè¡è¯â</strong></p>
<p>æä»¬éè¦åºåä¸¤ä¸ªæ¦å¿µï¼</p>
<ul>
<li><strong>Root (User ID = 0)</strong>ï¼è¿æ¯<strong>è½¯ä»¶å±é¢</strong>çæ¦å¿µãå®åªæ¯ Linux ç³»ç»éçä¸æ¡ç¨æ·è®°å½ãå®çæåå¨äºï¼<strong>åæ ¸è¢«è®¾è®¡ä¸ºâæ æ¡ä»¶å¬ä» Root ç¨æ·çè¯·æ±âã</strong></li>
<li><strong>Ring 0</strong>ï¼è¿æ¯<strong>ç¡¬ä»¶å±é¢</strong>çæ¦å¿µãåªæåæ ¸ä»£ç æ¬èº«è¿è¡å¨è¿éã</li>
</ul>
<p><strong>2. çå¸ä¸å½å­æ</strong></p>
<p>å½ä½ è·åäº Root æéï¼è¿è¡ä¸ä¸ªå½ä»¤ <code>rm -rf /</code>ï¼å åºè·è·¯ï¼æ¶ï¼è¿ç¨æ¯è¿æ ·çï¼</p>
<ol>
<li><strong>Root ç¨æ·</strong> åèµ·å é¤æä»¶çè¯·æ±ã</li>
<li><strong>åæ ¸</strong> æ£æ¥åèµ·èï¼åï¼æ¯ ID ä¸º 0 çå¤§å¥åãè½ç¶å é¤ç³»ç»æä»¶å¾å±é©ï¼ä½æ¢ç¶å¤§å¥è¯´äºï¼æå°±ç§åã</li>
<li><strong>åæ ¸ï¼Ring 0ï¼</strong> é©±å¨ç¡¬çç£å¤´ï¼ç©çæ¦é¤æ°æ®ã</li>
</ol>
<p><strong>æ»ç»ä¸ä¸</strong>ï¼Root ç¨æ·å°±åæ¯æ¿çâå£æ¨âçé¦å·®å¤§è£ï¼ä½ä»æ¬èº«è¿æ¯ä¸ªäººï¼è¿è¡å¨ Ring 3ï¼ï¼è Ring 0 ææ¯é£ä¸ªçæ­£æåå¨æçå½å­æã<strong>Root æ¿å°äºæé«è¡æ¿æï¼ä½æ²¡ææ¿å°æé«ç©çæ§è¡æã</strong></p>
<p><img src="https://img2024.cnblogs.com/blog/1158182/202601/1158182-20260131153913727-1769032851.jpg" alt="rootvsring" loading="lazy"></p>
<h2 id="å­æç ´æ·é">å­ãæç ´æ·é</h2>
<p>çè§£äºä¸é¢çâä¿¡ä»»é¾âåâæéå¢âï¼æä»¬ç»äºå¯ä»¥çæé»å®¢æ¯å¦ä½ä¸æ­¥æ­¥æ»ç ´ç³»ç»çãè¿ä¸ªè¿ç¨ï¼æ¬è´¨ä¸å°±æ¯ä¸åºç²¾å¯çå¤ç§ææ¯ã</p>
<p><strong>1. æå¼å°æ¡ï¼ææºè§£é BL (Bootloader)</strong></p>
<p>æ­£å¸¸çææºå¯å¨é¾æ¡æ¯ä¸¥ä¸åç¼çï¼<strong>BootROM (ç¡¬ä»¶)</strong> â <strong>éªè¯ Bootloader ç­¾å</strong> â <strong>éªè¯ Kernel (ç³»ç»åæ ¸) ç­¾å</strong>ã</p>
<p>æè°ç <strong>BL é</strong>ï¼å°±æ¯ååè®© Bootloader ä¸¥æ ¼æ¥éªä¸ä¸çº§ï¼Kernelï¼æ¯ä¸æ¯å®æ¹ååçãå¦ææ¯å®æ¹çï¼æ¾è¡ï¼å¦æè¢«äººå¨è¿æèï¼æ¯å¦ä¸ºäº Rootï¼ï¼æç»å¯å¨ã</p>
<p>è<strong>è§£é BL</strong>ï¼å°±æ¯ç¨å®æ¹ç»çå·¥å·ï¼æèå©ç¨æ¼æ´ï¼ï¼ç» Bootloader ä¸è¾¾ä¸éæä»¤ï¼âå«æ¥ç­¾åäºï¼ä¸ç®¡æå·è¿å»ä»ä¹çä¸å«ç³çåæ ¸ï¼ä½ é½ç»æè·ãâ</p>
<p><em>æ³¨æä»£ä»·ï¼è§£é BL è½ç¶è®©ä½ è·å¾äºèªç±ï¼ä½ä¹<strong>ç ´åäºå®æ´çä¿¡ä»»é¾</strong>ï¼Android Verified Bootï¼ãæ­¤æ¶ï¼ç³»ç»éç TEEï¼å¯ä¿¡æ§è¡ç¯å¢ï¼ä¼æç¥å°ç¯å¢ä¸å®å¨ï¼ä»èå¯¼è´é¶è¡ App éªéãå¾®ä¿¡/æ¯ä»å®æçº¹æ¯ä»å¤±æç­åæã</em></p>
<p><strong>2. æ¤å¥åè¢ï¼ä»è§£éå°è·å Root çå¨è¿ç¨</strong></p>
<p>å¾å¤å°ç½ä»¥ä¸ºè§£äº BL å°±èªå¨ Root äºï¼å¶å®ä¸æ¯ãè§£éåªæ¯æå¼äºå¤§é¨ï¼æ¿é´ï¼ç³»ç»ï¼è¿æ¯ç©ºçãè¦æ¿å° Rootï¼å¿é¡»è¿è¡ä¸åº<strong>âå¨å®ç§»æ¤â</strong>ã</p>
<p>ä»¥ Android ä¸ææµè¡ç Magisk ä¸ºä¾ï¼å®çæ ¸å¿é­æ³å«å <strong>"Systemless"ï¼ä¸è§¦å¨ System ååºï¼</strong>ï¼æ åæµç¨æ¯ï¼</p>
<ol>
<li><strong>æåå¨å®</strong>ï¼ä»å®æ¹å·æºåéæååº <strong><code>boot.img</code></strong>ã</li>
<li><strong>ææ¯æ¹é </strong>ï¼Magisk ä¼åçæ¯ä¸æ ·ï¼æèªå·±çæ ¸å¿ä»£ç ï¼<code>su</code> æä»¶åå®æ¤è¿ç¨ï¼<strong>æ³¨å¥</strong> å°è¿ä¸ªéåéï¼èå®å¨ä¸å»ä¿®æ¹åæ¬ç System ååºã</li>
<li><strong>ç§»æ¤ææ¯</strong>ï¼å ä¸ºä½ ä¹å<strong>è§£éäº BL</strong>ï¼Bootloader çå°è¿ä¸ªè¢«ç¯¡æ¹è¿çéåï¼è½ç¶ç­¾åä¸å¯¹ï¼ä½å®è¸è¸è©ï¼âåæ­£ä½ è§£éäºï¼ä½ å¼å¿å°±å¥½âï¼ç¶åæå®å·è¿äºç¡¬çã</li>
<li><strong>å¤ºè</strong>ï¼ææºéå¯ï¼åæ ¸å è½½ãMagisk çå®æ¤è¿ç¨éä¹å¯å¨ï¼æ¥ç®¡äºæéç®¡çã</li>
</ol>
<p><img src="https://img2024.cnblogs.com/blog/1158182/202601/1158182-20260131153926524-1349870764.jpg" alt="å·æº" loading="lazy"></p>
<p><strong>3. ç»æç ´è§£ï¼Switch ä¸è¯çç¡¬ç ´</strong></p>
<p>å¦æè¯´ææº Root è¿æ¯è½¯ä»¶å±é¢çåå¼ï¼é£ä¹ Switch çç ´è§£å°±æ¯ç©çå±é¢çæ´åç¾å­¦ãSwitch ç ´è§£çæ ¸å¿å¨åéå¸¸æ´ç´ ï¼<strong>å ä¸ºç©·ï¼ä¸æ³ä¹°æ¸¸æï¼æä»¥å¿é¡»ç»è¿æ¸¸æç­¾åéªè¯ã</strong></p>
<p><strong>(1) ä¸å¤æ¶ä»£çâè½¯ç ´â</strong></p>
<p>ææ©çä¸æ¹ Switchï¼2018 å¹´ååºåï¼ï¼è¯çï¼Tegra X1ï¼éç <strong>BootROM</strong> ä»£ç åæ«äºãé»å®¢ä¸ä»éè¦ç¨ä¸æ ¹åå½¢é<strong>ç­æ¥æææ»è½¨</strong>è¿å¥ RCMï¼æ¢å¤ï¼æ¨¡å¼ï¼è¿éè¦éå<strong>çµèææ³¨å¥å¨éè¿ USB æ¥å£åéä¸æ®µ Payload</strong>ï¼å©ç¨ç¼å²åºæº¢åºæ¼æ´æ¬ºéª CPUãè¿å±äºâèå¤©ç·èµé¥­åâï¼ä»»å¤©å é¤äºåºæ°ç¡¬ä»¶ï¼è½¯ä»¶å±é¢æ ¹æ¬ä¿®è¡¥ä¸äºã</p>
<p><strong>(2) ç°ä»£çâç¡¬ç ´â (Modchip è¯çç ´è§£)</strong></p>
<p>ä»»å¤©å åæ¥ä¿®å¤äºæ¼æ´ãç°å¨çç ´è§£å¿é¡»<strong>ææº</strong>ï¼å¨ä¸»æ¿ä¸æå¶ç²¾ç»å°<strong>çæ¥ä¸é¢ç¬¬ä¸æ¹è¯ç</strong>ãè¿ç©æçåçå« <strong>âçµåæéæ³¨å¥â (Voltage Glitching)</strong>ã</p>
<ul>
<li><strong>ãåçã</strong> Switch å¯å¨æ¶ï¼CPU ä¼è¯»åå®æ¹ Bootloader å¹¶è¿è¡ç­¾åæ ¡éªã</li>
<li><strong>ãæ»å»ã</strong> çå¨ä¸»æ¿ä¸çç ´è§£è¯çåçå»æä¸æ ·ï¼æ­»æ­»ç¯ç CPUãå½ CPU åå¤æ§è¡âæ ¡éªç­¾åâè¿ä¸è¡ä»£ç ç<strong>çº³ç§çº§ç¬é´</strong>ï¼ç ´è§£è¯ççªç¶<strong>æä½ CPU çæ ¸å¿çµå (VCC)</strong>ã</li>
<li><strong>ãç»æã</strong> çµåéª¤éå¯¼è´ CPU å°±åè¢«çµå»äºä¸ä¸ï¼èå­âæµâäºé£ä¹ä¸ç¬é´ãå®åå¥½<strong>è·³è¿äºæ ¡éªæä»¤</strong>ï¼æèå°å¯å­å¨éæ ¡éªå¤±è´¥ç <code>False</code> éè¯¯å°è¯»æäº <code>True</code>ã</li>
</ul>
<p>è¿å°±å¥½æ¯ä¿å®æ¦ä½ä½ è¦æ¥èº«ä»½è¯ï¼ä½ æ²¡å¸¦ãä½å¨ä¿å®å¼ å´é®ä½ âèº«ä»½è¯å¢ï¼âçä¸ç¬é´ï¼ä½ çªç¶å¨ä»è³è¾¹æ²äºä¸è®°é£ãä¿å®èå­ä¸çç©ºç½ï¼ä¸æè¯å°æææï¼âè¡è¡è¡ï¼è¿å»å§ãâ</p>
<p><strong>(3) é¸ å é¹å·¢ï¼Atmosphere (å¤§æ°å±)</strong></p>
<p>æ¢ç¶éè¿âçµå»âä¿å®æ··è¿äºå¤§é¨ï¼æä»¬å°±ä¸å è½½ä»»å¤©å å®æ¹ç³»ç»äºï¼èæ¯å è½½ <strong>Atmosphere</strong>ãå®æ¬è´¨ä¸æ¯ä¸ä¸ª<strong>å®å¶ç Bootloader + ç³»ç»è¡¥ä¸é</strong>ãå®æ¥ç®¡äºå¯å¨æµç¨ï¼å¹¶ä¸å¨åå­ä¸­å®æ¶ä¿®æ¹ä»»å¤©å ç OSï¼æ¬ºéªç³»ç»è¯´ï¼âè¿å¼ ççå¡æ¯éè¿éªè¯çâã</p>
<p><img src="https://img2024.cnblogs.com/blog/1158182/202601/1158182-20260131153938657-967507878.jpg" alt="switch" loading="lazy"></p>
<h2 id="ä¸ç«é¼ æ¸¸æ">ä¸ãç«é¼ æ¸¸æ</h2>
<p>Root æåäºï¼å¹¶ä¸ä»£è¡¨ä½ å¯ä»¥é«ææ å¿§ãäºå®ä¸ï¼è¿ææ¯ä½ å App å¼ååï¼å°¤å¶æ¯é¶è¡ãæ¸¸æï¼ä¹é´âç«é¼ æ¸¸æâçå¼å§ã</p>
<p><strong>1. App æ¯æä¹åç°ä½  Root çï¼</strong></p>
<p>App ä¹æ¯è¿è¡å¨ Ring 3 çå¹³æ°ï¼å®ä¸è½ç´æ¥é® CPU âææ¯ä¸æ¯è¢« Root äºâãä½å®æå¾å¤é´æ¥ææ®µï¼</p>
<ul>
<li><strong>æ¥æ·å£ï¼æä»¶æ«æï¼</strong>ï¼App ä¼å·å·æ«æä½ ç <code>/bin</code> æ <code>/sbin</code> ç®å½ï¼ççææ²¡æ <code>su</code> è¿ä¸ªæä»¶ï¼æèææ²¡æå®è£ <code>Magisk Manager</code> è¿ä¸ª Appã</li>
<li><strong>æçµè¯é®å®¶é¿ï¼Play Integrity APIï¼</strong>ï¼è¿æ¯æç çä¸æãApp ä¼åèµ·ä¸ä¸ªè¯·æ±ï¼éè¿ Google çæå¡å»è¯¢é®ä½ çåºå±ç¡¬ä»¶ãGoogle ä¼æ£æ¥ä½ ç Bootloader ç¶æãå¦æä½ è§£éäºï¼ç¡¬ä»¶å±é¢ç <strong>TEE (å¯ä¿¡æ§è¡ç¯å¢)</strong> å°±ä¼èå®äº¤å¾ï¼âæ¯çï¼æçå¤§é¨è¢«æå¼äºãâ</li>
</ul>
<p><strong>2. Magisk çéèº«æ¯ï¼å½åç©ºé´éç¦» (Namespace Isolation)</strong></p>
<p>æ¢ç¶ App ä¼æ¥æä»¶ï¼é£æä»¬å¨å®æ¥æ¿çæ¶åï¼æè¿ç¦åèèµ·æ¥ä¸å°±å¥½äºï¼è¿å°±æ¯ Magisk Hideï¼ç°å¨è¿åä¸º Zygisk/Shamikoï¼çæ ¸å¿åçã</p>
<p>Linux åæ ¸æä¸ä¸ªå¼ºå¤§çåè½å« <strong>Mount Namespace</strong>ãå®å¯ä»¥è®©æ¯ä¸ªè¿ç¨çå°å®å¨ä¸åçæä»¶ç³»ç»è§å¾ã</p>
<ul>
<li><strong>å¹³æ¶</strong>ï¼ä½ çæä»¶ç³»ç»éç¡®å®æ Root ç¸å³çæä»¶ã</li>
<li><strong>å½ä½ æå¼é¶è¡ App æ¶</strong>ï¼Magisk ä¼ç«å»æ¦æªè¿ä¸ªå¯å¨è¿ç¨ï¼ä¸ºè¿ä¸ªé¶è¡ App åç¬åå»ºä¸ä¸ªâå¹³è¡å®å®âã</li>
<li><strong>å¨é£ä¸ªå®å®é</strong>ï¼Magisk ä¼å©ç¨ <code>unmount</code> æä»¤ï¼æ <code>su</code> æä»¶ãMagisk ç¸å³çæ¨¡åå¨é¨âå¸è½½âæã</li>
<li><strong>ç»æ</strong>ï¼é¶è¡ App çå¼ç¼ï¼çå°çæ¯ä¸ä¸ªå¹²å¹²ååãä»¿ä½ä»æªè¢« Root è¿çå®æ¹ç³»ç»ãå®æ»¡æå°ç¹ç¹å¤´ï¼è®©ä½ éè¿äºã</li>
</ul>
<p><strong>3. éé«ä¸å°ºï¼é­é«ä¸ä¸</strong></p>
<p>ç°å¨ï¼è¿åºæäºå·²ç»è¿åå°äº<strong>ç¡¬ä»¶å±é¢</strong>ã</p>
<p>å <strong>KernelSU</strong> è¿ç§æ°ä¸ä»£ Root æ¹æ¡ï¼ç´æ¥æèªå·±èè¿äºåæ ¸éï¼Ring 0ï¼ï¼è®©è¿è¡å¨ Ring 3 ç App æ ¹æ¬æ ä»æ¥èµ·ãè App åååå¼å§èåææºååï¼è¯å¾éè¿<strong>ç¡¬ä»¶å¯é¥è¯æ (Key Attestation)</strong> è®©ä½ å¨è§£é Bootloader çé£ä¸å»èµ·ï¼å°±æ°¸è¿å¤±å»éè¿âå®å¨éªè¯âçèµæ ¼ã</p>
<p>åªè¦ä½ ä¸ºäºèªç±è§£å¼äºéï¼ä½ å°±æ³¨å®è¦ä¸ç´å¨è¿ä¸ªç«é¼ æ¸¸æééè¿ä¸æ­çâä¼ªè£âçå­ä¸å»ã</p>
<h2 id="å«æ»ç»å¿æºæ¨¡å">å«ãæ»ç»ï¼å¿æºæ¨¡å</h2>
<p>çå®å¨æï¼ä½ åºè¯¥å¨èæµ·éå»ºç«èµ·è¿æ ·ä¸å¼ å¾ï¼</p>
<ol>
<li><strong>å°å¾ (MBR ä¸ GPT)</strong>ï¼å³å®äºå°çæä¹åã</li>
<li><strong>æ¥å (BootROM/UEFI â Bootloader â Kernel)</strong>ï¼æ¯ä¸åºä»ç¡¬ä»¶å°è½¯ä»¶çä¿¡ä»»æ¥åèµã</li>
<li><strong>é«å¢ (Ring 0 vs Ring 3)</strong>ï¼æ¯ä¸ºäºé²æ­¢å¹³æ°ï¼Appï¼çæç¡¬ä»¶ã</li>
<li><strong>Root</strong>ï¼æ¯ Ring 3 ä¸çéççå¸ï¼ä»å¯ä»¥å½ä»¤ Ring 0 åäºï¼ä½ä»èªå·±ä¾ç¶å¨å¢å¤ã</li>
<li><strong>ç ´è§£</strong>ï¼æ è®ºæ¯ Root ææºè¿æ¯ç ´è§£ Switchï¼æ¬è´¨é½æ¯æ³æ¹è®¾æ³<strong>ææ­ä¿¡ä»»é¾çä¼ é</strong>ã</li>
<li><strong>æ»é²</strong>ï¼Root ä¹åï¼æ¯ä¸åºå©ç¨âå¹³è¡å®å®âï¼Namespaceï¼æ¬ºéª App çç«é¼ æ¸¸æã</li>
</ol>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.0006944444444444445" data-date-updated="2026-01-31 15:41">2026-01-31 15:40</span>&nbsp;
<a href="https://www.cnblogs.com/kaiux">å¿µé£é¶å£¹</a>&nbsp;
éè¯»(<span id="post_view_count">119</span>)&nbsp;
è¯è®º(<span id="post_comment_count">2</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19558207);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19558207', targetLink: 'https://www.cnblogs.com/kaiux/p/19558207', title: 'ç¡¬æ ¸ç§æ®ï¼ä¸ºä½å°ç±³ä»»å¤©å å°æ Rootï¼æ­ç§æä½ç³»ç»ä»å¯å¨å°âå¤ºæâçåºå±æ¸¸æ' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ AAæ¸¸æèæ¬è§èï¼AA Game Scriptï¼ ]]></title>
    <link>https://www.cnblogs.com/ygluu/p/19550578</link>
    <guid>3dc6a89d73963f4dc5f2c02995f3bc3c</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ygluu/p/19550578" title="åå¸äº 2026-01-31 15:22">
    <span role="heading" aria-level="2">AAæ¸¸æèæ¬è§èï¼AA Game Scriptï¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<font color="#002FA5">
<h2 id="1-ä»ç»">1 ä»ç»</h2>
<p>ä¸­æåï¼AAæ¸¸æèæ¬<br>
è±æåï¼AA Game Script<br>
ç®  ç§°ï¼AAèæ¬ï¼AAGSï¼<br>
ä½  èï¼ygluuï¼ç å®¢ï¼<br>
WeChat: 48092788</p>
<p><strong>AAèæ¬æ¨ä¸ºï¼ä¸ºæ¸¸ææä¾ä¸ç§æ´å ç®åèåçµæ´»çéç¨éç½®æ¹å¼</strong>ã</p>
<p><strong>æ³¨</strong>ï¼<br>
1ãå½åæ ä»»ä½å«ä¹ä»æ¯æ è¯ç¬¦<br>
2ãæ¬äººå¨å¶ä»åæä¸­æå°çæ°æ®åï¼å¨æ¬æä¸­ç»ç§°ä¸ºåéåï¼ä¸¤èç­æ<br>
3ãæ¬æäº¦æ¯æ¬äººè¿å»åå®¢ç¥è¯ç¹çç³»ç»åæ»ç»ï¼ç¸å³åèè§éå½3ï¼<br>
4ãæ¬èæ¬ä¸ºéç¨èæ¬ï¼ä¸å±éäºä»»ä½æ¸¸æç±»å<br>
5ãæä½èè§è¯æéï¼å¦æé·åçº¯å±å·§åï¼è¯·çè¨å¿å ä¹</p>
<p>éå¾ æ¡ä»¶ç³»ç»åçï¼<br>
<img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3509144/202509/3509144-20250929195853996-308910414.png" class="lazyload"></p>
<p><strong>ç³»ç»æ¯æ</strong><br>
AAèæ¬çç³»ç»æ¯æå®ç°åçåèéå½5ãä¸ç©çIDãä¸äºçäºä»¶ãä¸äººçæ°æ®ãã<br>
AAèæ¬æä¸¤ç§å¹³å°è§£ææ¹å¼å¯éï¼<br>
1ãç¨å·¥å·å°éç½®è¡¨ææ¥å£è§èé¢åç¿»è¯æluaèæ¬ï¼åèéå½5 data-e çluaé¨åï¼ã<br>
2ãç¨é«çº§è¯­è¨å¨æ¸¸æå¯å¨æ¶è§£ææç¨åºå¯¹è±¡ï¼åèéå½5 data-e çgolangé¨åï¼ã<br>
æ³¨ï¼AAèæ¬è§£å³å¤æ°æ¥å¸¸ç­åéæ±ï¼å°æ°å¤æéæ±å¯ç±Luaèæ¬å®ç°ã</p>
<h2 id="2-on-doæ¨¡å">2 ON-DOæ¨¡å</h2>
<p>å¨æ¸¸æå¼åå½ä¸­ï¼å¤æ°ç­åéç½®éæ±ä¸å¤ä¹ï¼å½ä»ä¹æ¡ä»¶æ»¡è¶³æ¶åä»ä¹äºæï¼èæ¸¸ææä»ç¬æçæ°æ®å½¢æä»èé å°±äºä¸ç§æ¢å®æ¨¡å¼ï¼æä»¥æ¬æå°è¿ç§æ¨¡å¼æ½è±¡ä¸ºON-DOæ¨¡åã<br>
<strong>ON-DOæ¨¡åæ¦å¿µè¯æ±</strong>ï¼</p>
<blockquote style="color: rgba(102, 102, 102, 1); border-left-color: rgba(255, 102, 0, 1)">
ONï¼å¨æç§æ¡ä»¶è¾¾æçæ¶å<br>
DOï¼åä»ä¹äºæ<br>
<br>
Condï¼æ¡ä»¶è¡¨è¾¾å¼ï¼å¦ï¼(A&gt;10)&amp;(B&lt;0)<br>
Actï¼å¨ä½è¡¨è¾¾å¼ï¼å¦ï¼A+11;B-10<br>
</blockquote>
<p>ONè¡¨è¾¾å¼ãCondè¡¨è¾¾å¼ãæ¡ä»¶è¡¨è¾¾å¼ä¸èæ¦å¿µç­åã<br>
DOè¡¨è¾¾å¼ãActè¡¨è¾¾å¼ãå¨ä½è¡¨è¾¾å¼ä¸èæ¦å¿µç­åã</p>
<p><strong>ON-DOæ¨¡åä¸æ­¥éª¤</strong>ï¼<br>
1ãå®ä¹åé<br>
2ãå®åæ¡ä»¶å½æ°åç¼åæ¡ä»¶è¡¨è¾¾å¼<br>
3ãå®åå¨ä½å½æ°åç¼åå¨ä½è¡¨è¾¾å¼</p>
<h2 id="3-æ¡ä»¶è¡¨è¾¾å¼è§è">3 æ¡ä»¶è¡¨è¾¾å¼è§è</h2>
<p><strong>ååè¿ç®</strong>ï¼+ - * /<br>
å¦ï¼ç©å®¶ç­çº§&gt;10 &amp; (ä»æ¥ææª + æ¨æ¥ææª) &gt; 200<br>
<strong>æ¯è¾è¿ç®</strong>ï¼&gt; =&gt; = &lt; &lt;=<br>
<strong>é»è¾è¿ç®</strong>ï¼&amp; | and or<br>
<strong>ä¼åçº§</strong>ï¼( )<br>
<strong>åé</strong>: è§éå½åéè¡¨<br>
<strong>å½æ°</strong>: è§éå½å½æ°åº<br>
<strong>å¸¸é</strong>ï¼abc 123 true ...<br>
<strong>æ¶èå¨ä½</strong>(åå·)ï¼-<br>
æ³¨ï¼åå·è¡¨ç¤ºè½å¤æ£åæå®çç©åææ°æ®ï¼å¦ï¼ç©å®¶ç­çº§&gt;=10 &amp; å¥åºå·-10 &amp; éå¸-20</p>
<p><strong>ç¤ºä¾</strong>ï¼</p>
<blockquote style="color: rgba(102, 102, 102, 1); border-left-color: rgba(255, 102, 0, 1)">
ç¤ºä¾1ï¼æ¥æ&gt;=2023-01-01 &amp; æ¶é´&gt;18:00:00 &amp; äºä»¶(è¿å¥å°å¾) &amp; å°å¾(åç§°ï¼è±å±±)<br>
ç¤ºä¾2ï¼ç­çº§&gt;=10 &amp; éå¸-10 &amp; ä¸å±±å¡-20<br>
ç¤ºä¾3ï¼ç­çº§&gt;=20 &amp; (éå¸-30 | ä¸å±±å¡-30)<br>
ç¤ºä¾4ï¼å½åå°å¾=è±å±± &amp; ææ¶ç¬&gt;=100<br>
</blockquote>
<h2 id="4-å¨ä½è¡¨è¾¾å¼è§è">4 å¨ä½è¡¨è¾¾å¼è§è</h2>
<p><strong>ååè¿ç®</strong>ï¼+ - * /<br>
å¦ï¼å¹¸è¿å¼=(åæªç©(å¹¸è¿è)+åå°å¾(å¹¸è¿å¼)+åç©å(å¹¸è¿å¼)+ç©å®¶å¹¸è¿å¼) / 3 * 1.3<br>
<strong>ç´¯è®¡è¿ç®</strong>ï¼+ - * / += -= *= /=<br>
å¦ï¼éå¸+10;éå¸+=10ï¼åè¡¨ç¤ºéå¸ç´¯å 10<br>
<strong>èµå¼</strong>(ç­äºå·æåå·åå¯)ï¼= :<br>
<strong>åéç¬¦</strong>(åå·)ï¼;<br>
<strong>ä¼åçº§</strong>ï¼( )<br>
<strong>å½æ°</strong>ï¼è§éå½å½æ°åºï¼å«è§¦åäºä»¶å½æ°ï¼äºä»¶(XXX)</p>
<p><strong>ç¤ºä¾</strong>:</p>
<blockquote style="color: rgba(102, 102, 102, 1); border-left-color: rgba(255, 102, 0, 1)">
ç¤ºä¾1ï¼æ»å»+100;é²å¾¡+20<br>
ç¤ºä¾2: éå¸+20;çµè+20<br>
ç¤ºä¾3ï¼æ¶è(éå¸:100,é¶å¸:200);è·³è½¬(åå¤©é¨,103,304) // å½æ°åæ°è§èç±å½æ°å®ä¹<br>
ç¤ºä¾4ï¼å¥å±(éå¸:100,é¶å¸:200);å¥å±(1001) // å¥å±åéçéç½®ID<br>
ç¤ºä¾6: åå¼=188;äºä»¶(åå¼) // è®¾ç½®åå¼åéï¼è§¦ååå¼äºä»¶<br>
ç¤ºä¾6: å°å¾=Map.Name;æªç©=Mon.Name;æªç©ç±»å=çº¢æª;äºä»¶(ææª) // è®¾ç½®ææªæ°æ®ï¼è§¦åææªäºä»¶<br>
</blockquote>
<p>æ³¨ï¼<br>
1ãå¨ä½è¡¨è¾¾å¼åå«äºæ°æ®çæä½ãç©åçå¥å±åäºä»¶è§¦åç­ï¼å¦ææç©åå¥å±ç³»ç»ä¼èªå¨åºååªäºæ¯ç©åå¹¶ç»åèåç©ºé´æ¥æ§è¡å¥å±ã<br>
2ãè§¦åäºä»¶æ¯AAèæ¬çæ ¸å¿ï¼ä»ä¼è§¦åå³èæ¡ä»¶çå¤æ­åå¨ä½æ§è¡ã</p>
<h2 id="5-æµç¨æ§å¶è¡¨è¾¾å¼è§èæ´»å¨ç³»ç»è®¾è®¡è§è">5 æµç¨æ§å¶è¡¨è¾¾å¼è§èï¼æ´»å¨ç³»ç»è®¾è®¡è§èï¼</h2>
<p>æµç¨æ§å¶æ¯ON-DOè¡¨è¾¾å¼å¯¹ç»åçææ¬æä»¶ï¼å¦ï¼ctrl.aaï¼é»è®¤éå¯¹æ§è¡ãON-ORåDO-ORè¡¨è¾¾å¼å¯¹æ¯æå³ç³»ï¼ä¸¤å¯¹æå¤å¯¹æ¶è¡¨ç¤ºä»»æä¸å¯¹æ»¡è¶³å³å¯ï¼åå¯¹ä»ç¶è¿æ¯âä¸âå³ç³»ã<br>
ç¤ºä¾ï¼æ´»å¨è¡¨è¾¾å¼</p>
<blockquote style="color: rgba(102, 102, 102, 1); border-left-color: rgba(255, 102, 0, 1)">
Nameï¼æ¯æ¥BOSS
<p>ON: æ¶é´&gt;=18:25<br>
DO:<br>
åå»ºå°å¾(è±å±±, å®å¨å°å¾=1)  // å°å¾è®¾ç½®ä¸ºéææç¶æ<br>
å·æª(å·¨å½, x, y, z)<br>
å¥å£å¾æ (è±å±±); è·é©¬ç¯(å·¨å½åºæ¥æ£ä¹±äºï¼å¿«æ¥å»æå®å§ï¼)<br>
èå¤©(ä¸çé¢é, å·¨å½åºæ¥æ£ä¹±äºï¼å¿«æ¥å»æå®å§ï¼)</p>
<p>ON: æ¶é´&gt;=18:30<br>
DO:<br>
å°å¾åé(è±å±±, å®å¨å°å¾=0)  // 18:30å¼å§ææ<br>
è·é©¬ç¯(å·¨å½åºæ¥æ£ä¹±äºï¼å¿«æ¥å»æå®å§ï¼)<br>
èå¤©(ä¸çé¢é, å·¨å½åºæ¥æ£ä¹±äºï¼å¿«æ¥å»æå®å§ï¼)</p>
<p>// å¦æè¶æ¶å<br>
ON-OR: æ¶é´&gt;=19:00<br>
DO-OR: GOTO(æ¸åº)</p>
<p>// å¦ææ­»äº¡å<br>
ON-OR: æ­»äº¡æªç©=å·¨å½<br>
DO-OR: å¥å±(éå¸:100,è¯æ°´1000);GOTO(æ¸åº)</p>
<p>Labelï¼æ¸åº<br>
// labelä¹åæ æ¡ä»¶çå¯ä»¥ä¸åè¡¨è¾¾å¼, ä¹å¯ä»¥ä¸åON:<br>
ON:<br>
DO: æ¸åº()</p>
</blockquote>
<h2 id="6-éç½®è¡¨è§è">6 éç½®è¡¨è§è</h2>
<p>æ³¨ï¼éç½®è¡¨æ³æçµå­è¡¨æ ¼ä¹ç±»çææ¡£</p>
<h3 id="åºç¡å­æ®µç±»å">åºç¡å­æ®µç±»åï¼</h3>
<p><strong>int</strong> : 64ä½æç¬¦å·æ´å½¢<br>
<strong>bool</strong> : å¸å°å<br>
<strong>string</strong> : å­ç¬¦ä¸²å<br>
<strong>Cond</strong> : æ¡ä»¶è¡¨è¾¾å¼<br>
<strong>Act</strong> : å¨ä½è¡¨è¾¾å¼<br>
<strong>Ctrl</strong>: æµç¨æ§å¶è¡¨è¾¾å¼</p>
<h3 id="å®¹å¨å­æ®µç±»å">å®¹å¨å­æ®µç±»åï¼</h3>
<p><strong>arr</strong> : æ°ç», ç±»åç±ç¬¬ä¸ä¸ªåç´ çåºç¡å­æ®µç±»åå³å®ï¼å¯èªåµå¥ï¼å¦ï¼{{1,3},{3,4}}<br>
<strong>map</strong> : key-valueé®å¼å¯¹åå¸è¡¨ï¼keyç±»åå¯ä¸ºintåstringï¼valueç±»åä½åºæ¬å­æ®µç±»åï¼å¯èªåµå¥ååµå¥arrï¼å¦ï¼{{a=1,b=2},{a=A,b=B},{a=3,b={1,2,3,4}}}</p>
<h3 id="éç¨å­æ®µå">éç¨å­æ®µåï¼</h3>
<p><strong>CfgId</strong> : intï¼éç½®IDï¼å¨å±å¯ä¸ï¼int64å¯è§åå¥½åè¡¨çIDåæ®µèå´ï¼è¡¨åèªå¢ï¼ä¸å¡«åç³»ç»é»è®¤ä½¿ç¨CfgNameå­æ®µçcrc64å¼ï¼ç¢°æåæç¤ºæ¹å<br>
æ³¨ï¼<br>
1ãå¦æéè¦åç»è®¾ç½®çï¼æ¯1ä¸ä¸ä¸ªIDæ®µï¼å¦2ç»IDï¼1000010000ï¼3ç»IDï¼100001000010000,  å³å¯æ ¹æ®åç»ä¿¡æ¯è·åéç½®åå®¹<br>
2ãè¦è§åå·IDæ®µåéæè½ä¿è¯å¨å±å¯ä¸ï¼æèªè¡ä½¿ç¨ieee_crc64ç®æ³è®¡ç®ã<br>
3ãæ¨¡åååè¡¨éç½®æ æ³ç¡®ä¿CfgIDå¨å±å¯ä¸çå¯ä»¥ç¼ºçä¸å¡«ï¼ç³»ç»èªå¨ä½¿ç¨ieee_crc64ç®æ³æ¥è®¡ç®ï¼éç½®çæ¶åä½¿ç¨CfgNameæ¥éç½®å³å¯ã<br>
<strong>CfgName</strong> : stringï¼éç½®åï¼å¨å±å¯ä¸ï¼å¿å¡«ï¼å­ç¬¦ä¸²å<br>
<strong>CfgType</strong> : intï¼éç½®ç±»åï¼å¦ï¼è¯æãè´§å¸ãæ­¦å¨ãæè£ãçº¢æªã<br>
<strong>CfgFlag</strong> ï¼intï¼éç½®æ å¿ï¼å³CfgTypeçç»å<br>
<strong>ShowName</strong> : stringï¼æ¾ç¤ºåç§°ï¼ç¨äºUIå¤å½è¯­è¨ç­ï¼ä¸å¡«åé»è®¤ä½¿ç¨CfgNameï¼å¦æå¤å½è¯­è¨ä½¿ç¨â/âåé<br>
å¦ï¼è´§å¸/money/ë¨¸ëï¼å¯æ ¹æ®è®¾å®çè¯­è¨ç´¢å¼å·è·å<br>
<strong>Prop</strong> : mapï¼è¯¥éç½®å¯¹è±¡å·æçèªèº«å±æ§<br>
å¦å°å¾è¡¨ï¼{å¯ç©¿äºº=false,å¯ç©¿æª=false,é­æ§=20}<br>
æ³¨ï¼å°å¾å±æ§âé­æ§âæ¯ç»åæªç©åç©å®¶æ­»äº¡æ°éç¨å¬å¼è®¡ç®å¾åºçæ°å¼ï¼é­æ§è¶å¤§ç©å®¶è¡ä¸ºä¼ç¼æ¢ãæè½å½ä¸­çä¼éä½ç­ã<br>
<strong>Attr</strong> : mapï¼è¡¨ç¤ºæ¥æèè·å¾çå±æ§å æç­ï¼å¦ç©åè¡¨ï¼{é²å¾¡+100,æ»å»+200}<br>
<strong>Cond</strong> : Condï¼æ¡ä»¶è¡¨ç¤ºå¼<br>
<strong>Act</strong> : Actï¼å¨ä½è¡¨è¾¾å¼ï¼æ¡ä»¶è¾¾æåæ§è¡</p>
<h3 id="éç½®è¡¨æ³¨éè§è">éç½®è¡¨æ³¨éè§èï¼</h3>
<p>è¡¨æ ¼ç¬¬ä¸æ ¼ç¬¬ä¸ä¸ªå­ç¬¦æ¯â/âãâ#âãâ;âä¹ä¸çè¡¨ç¤ºè¯¥è¡ä¸ºæ³¨é<br>
ç¬¬1ä¸ªéæ³¨éçè¡è¡¨ç¤ºå­æ®µå<br>
ç¬¬2ä¸ªéæ³¨éçè¡è¡¨ç¤ºå­æ®µç±»å<br>
ä»ç¬¬3ä¸ªéæ³¨éçè¡å¼å§ä¸ºæ°æ®é¨å</p>
<h2 id="7-åéå®ä¹è§è">7 åéå®ä¹è§è</h2>
<p>åéè¡¨ï¼var.xlsx<br>
<img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3509144/202601/3509144-20260129194836230-1131129095.png" class="lazyload"></p>
<p><strong>CfgId</strong> : åéIDï¼å¦æä¸å¡«åä½¿ç¨CfgNameè®¡ç®CRC64ï¼ç¢°æåæç¤ºæ¹å<br>
<strong>CfgName</strong> : åéåï¼ç¨äºéç½®æè¿°ï¼å¨å±å¯ä¸<br>
<strong>ShowName</strong> : æ¾ç¤ºåï¼ç¨äºUIç­ï¼ä¸å¡«é»è®¤ç­äºCfgName<br>
å¦ï¼è´§å¸/money/ë¨¸ëï¼å¯æ ¹æ®è®¾å®çè¯­è¨ç´¢å¼å·è·å<br>
<strong>Reset</strong> : intï¼éç½®å¨æï¼ç¨äºå¨ææ§åéå¤ä½ä¸ºåå§åï¼ä¸å¡«å0è¡¨ç¤ºä¸éç½®ï¼1ï¼æ¯æ¥éç½®ï¼2ï¼æ¯å¨éç½®ï¼3ï¼æ¯æéç½®ï¼4ï¼æ¯å¹´éç½®<br>
å¦åéï¼æ¯æ¥ææªãå¨åå¼ãæåå¼ç­<br>
<strong>Valid</strong> : intï¼æææï¼è¿æåç³»ç»ä¸åå­å¨è¿äºåéï¼ä¸å¡«æ0è¡¨ç¤ºæ°¸ä¹ææï¼æç»è¡¨ç°å½¢å¼æ¯å¤±æç§æ¶é´æ³<br>
å¦ï¼â10æ1~10æ10æ¥âè¡¨ç¤ºæ¯å¹´å½åºææï¼10æ10æ¥åç³»ç»ä¸åå­å¨è¿äºåé<br>
<strong>Cond</strong> ï¼æ¡ä»¶è¡¨è¾¾å¼ï¼éç©ºåç³»ç»ä¼ä¾æ®æ¡ä»¶æ§è¡Actå¨ä½è¡¨è¾¾å¼ï¼ç¨äºåéèªèº«çç´¯è®¡è®¡ç®<br>
<strong>Act</strong> : CfgNameçèµå¼å¨ä½è¡¨è¾¾å¼<br>
æ³¨ï¼åéè¡¨çå¨ä½è¡¨è¾¾å¼ä¸è¬åªå¯¹CfgNameçèµå¼æä½ï¼ä¸åºè¯¥åå¶å®æä½<br>
å¦å¨åå¼åéï¼ON:äºä»¶=åå¼ï¼DO:å¨åå¼+=å½ååå¼<br>
å¦å¨åå¼åéï¼ON:äºä»¶=åå¼ï¼DO:æåå¼+=å½ååå¼<br>
å¦æ¯æ¥ææªåéï¼ON:äºä»¶=ææªï¼DO:æ¯æ¥ææª+1<br>
<strong>Init</strong> : åå§å¼ï¼ä¸å¡«é»è®¤0ï¼æ´å½¢å¼ææ<br>
<strong>Min</strong> : æå°å¼ï¼ä¸å¡«é»è®¤0ï¼æ´å½¢å¼ææ<br>
<strong>Max</strong> : æå¤§å¼ï¼ä¸å¡«é»è®¤int64çæå¤§å¼ï¼æ´å½¢å¼ææ</p>
<p><strong>æ³¨</strong>ï¼<br>
åéç±»åæstringãint64ãobjï¼æ éå®ä¹è®¾å®ï¼ä»¥æåä¸æ¬¡èµå¼çç±»åä¸ºåã</p>
<h2 id="8-å»æçº¿ç³»ç»è®¾è®¡è§è">8 å»æçº¿ç³»ç»è®¾è®¡è§è</h2>
<p>äºå®ä¸ä»»å¡ç³»ç»æ¯æ¯è¾å¤æçå»æçº¿ç³»ç»ï¼å»æçº¿æä¸ä¸ªç¹å¾æ¯éçº§åé¶ï¼ä¸å»æçº¿ä¸è¬æå±æ§å æï¼ä¸çº¿éç®ï¼åç©åå¥å±ï¼ä¸æ¬¡æ§ï¼ï¼å¹¶è§¦ååçº§äºä»¶ã</p>
<h3 id="ç­çº§èªå¢">ç­çº§èªå¢</h3>
<p>ç¨âæ¨¡ååâ+âç­çº§âä½ä¸ºç­çº§åéï¼æ¯æ¬¡åçº§åèªå¢ï¼å¦æ¨¡åâèµéçäººâçæ¨¡åç­çº§åéæ¯ï¼èµéçäººç­çº§</p>
<h3 id="ä¸å¯¹on-doæ¨¡å¼">ä¸å¯¹ON-DOæ¨¡å¼ï¼</h3>
<p>å­æ®µï¼Cond<br>
å­æ®µï¼Act<br>
å¦ä¸è¡¨ï¼<br>
<img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3509144/202602/3509144-20260201024832189-847974260.png" class="lazyload"></p>
<p>æ³¨ï¼å¨ä½è¡¨è¾¾å¼åå«äºæ°æ®çæä½åç©åçå¥å±ï¼ç³»ç»ä¼èªå¨åºååªäºæ¯ç©åå¹¶ç»åèåç©ºé´æ¥æ§è¡å¥å±ã</p>
<h3 id="ä¸¤å¯¹on-doæ¨¡å¼">ä¸¤å¯¹ON-DOæ¨¡å¼</h3>
<p>å¦æä¸å¯¹ON-DOæ¨¡å¼ä¸è½æ»¡è¶³è¦æ±çåä½¿ç¨æ¬æ¨¡å¼ã<br>
å­æ®µï¼Cond1<br>
å­æ®µï¼Act1<br>
å­æ®µï¼Cond2<br>
å­æ®µï¼Act2<br>
æ¡ä»¶Cond1æ»¡è¶³äºä¸æ¬¡æ§æ§è¡å¨ä½Act1ï¼æ¡ä»¶Cond2æ»¡è¶³äºä¸æ¬¡æ§æ§è¡å¨ä½Act2ï¼ä¸¤èä»¥âæâå³ç³»æ§è¡ï¼æå¤§å¯è½ä¸¤èé½æ»¡è¶³ï¼<br>
ç¬¬1å¯¹å¯ä»¥ç¨äºåºç¡æ°æ®çè®¡ç®ï¼å¦ï¼ON:äºä»¶=ææª &amp; å°å¾=åå¤©é¨ï¼DO: ä»æ¥ææª+1ï¼<br>
ç¬¬2å¯¹åç¨ç¬¬1å¯¹çæ°æ®ä½ä¸ºæ¡ä»¶ï¼å¦ï¼ON:ä»æ¥ææª&gt;20ï¼DO: éå¸+20;è¯æ+20<br>
å¦ä¸è¡¨ï¼<br>
<img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3509144/202601/3509144-20260131145846276-1004224871.png" class="lazyload"></p>
<p>æ³¨ï¼å¨ä½è¡¨è¾¾å¼åå«äºæ°æ®çæä½åç©åçå¥å±ï¼ç³»ç»ä¼èªå¨åºååªäºæ¯ç©åå¹¶ç»åèåç©ºé´æ¥æ§è¡å¥å±ã</p>
<h3 id="æµç¨æ§å¶ç±»åæ¨¡å¼æ¯è¾å¤æçéæ±">æµç¨æ§å¶ç±»åæ¨¡å¼ï¼æ¯è¾å¤æçéæ±ï¼</h3>
<p>å¦æä¸¤å¯¹ON-DOæ¨¡å¼ä¸è½æ»¡è¶³è¦æ±çåä½¿ç¨æ¬æ¨¡å¼ã<br>
å­æ®µï¼Ctrl</p>
<p>æ³¨ï¼å¨ä½è¡¨è¾¾å¼åå«äºæ°æ®çæä½åç©åçå¥å±ï¼ç³»ç»ä¼èªå¨åºååªäºæ¯ç©åå¹¶ç»åèåç©ºé´æ¥æ§è¡å¥å±ã</p>
<h3 id="å±æ§å æ">å±æ§å æ</h3>
<p>å­æ®µï¼Attr map<br>
æ³¨ï¼ä»»å¡ç³»ç»æ²¡æattrå­æ®µï¼ç©å®¶å±æ§å æè®¡ç®çæ¶åå¯ä»¥æ ¹æ®æ¨¡åç­çº§è·åå¶å¼ã</p>
<p>å¯æ ¹æ®éæ±éæ©éæ©ä¸è¿°3ä¸­æ¨¡å¼ä¹ä¸å®ç°éç½®ã</p>
<h2 id="9-å½æ°å®ä¹è§è">9 å½æ°å®ä¹è§è</h2>
<p>å½æ°å(åæ°1,åæ°2,..)<br>
<strong>æ³¨æ</strong>ï¼<br>
1ãææå½æ°é»è®¤è¿åint64ï¼0è¡¨ç¤ºå¤±è´¥ï¼ç­äºå¸å°å¼çfalse<br>
2ãå½æ°åæ°è§èç±åå½æ°å®ä¹</p>
<p>ç¤ºä¾ï¼<br>
<img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3509144/202601/3509144-20260131151904912-626225154.png" class="lazyload"></p>
<h2 id="éå½1-åéåº">éå½1 åéåº</h2>
<p>â¢æ¶é´<br>
â¢æ¥æ<br>
â¢æ¶é´æ¥æ<br>
â¢å¹´<br>
â¢æ<br>
â¢æ¥<br>
â¢å¤©<br>
â¢ææ<br>
â¢æ¶<br>
â¢å<br>
â¢ç§<br>
â¢å°å¾ // å½åæå¨å°å¾<br>
â¢X // å½åä½ç½®Xåæ <br>
â¢Y // å½åä½ç½®Yåæ <br>
â¢Z // å½åä½ç½®Zåæ <br>
â¢åå¼ // å½ååå¼åéï¼äº¦å³æåä¸æ¬¡åå¼</p>
<p>å¯èªè¡è¡¥åå®å</p>
<h2 id="éå½2-äºä»¶åº">éå½2 äºä»¶åº</h2>
<p>â¢å¹´ // æ¶é´ä¿¡æ¯æ¹å<br>
â¢æ<br>
â¢æ¥<br>
â¢å¤©<br>
â¢ææ<br>
â¢æ¶<br>
â¢å<br>
â¢ç§<br>
â¢ä¸çº¿<br>
â¢ä¸çº¿<br>
â¢æ­çº¿<br>
â¢è¿å¥å°å¾<br>
â¢ç¦»å¼å°å¾<br>
â¢æ­»äº¡ // è¢«å¯¹æææ­»<br>
â¢ææ­» // ååææ­»ä¸ä¸ªå¯¹æ<br>
â¢å¤æ´»<br>
â¢èµ°<br>
â¢è·<br>
â¢è·³<br>
â¢é£<br>
â¢è·¯è¿ // ä»å¯¹æ¹xè·ç¦»èµ°è¿<br>
â¢ç¢°ãå¯¹è¯ // ç¢°å°å¯¹æ¹ãå¯¹è¯<br>
â¢è¸©ãç©¿ // è¸©å°æç©¿è¿å¯¹æ¹</p>
<p>å¯èªè¡è¡¥åå®å</p>
<h2 id="éå½3-æ¡ä»¶å½æ°åº">éå½3 æ¡ä»¶å½æ°åº</h2>
<p>â¢äºä»¶(A,B,...) // å¤æ­äºä»¶æ¯å¦åå«æåå¼<br>
â¢æ¶è(A:100,B:200,...)<br>
â¢å¯¹æ¹(åå­, ä¼å°é­)ãå¯¹æ¹(ç±»å, æªç©) // å¤æ­PKå¯¹æ¹æå®çåéæ¯å¦ç­äºé¢æå¼<br>
â¢å°å¾(åå­, åå¤©é¨)ãå°å¾(ç±»å, å¤©ç) // å¤æ­å°å¾æå®çåéæ¯å¦ç­äºé¢æå¼</p>
<p>å¯èªè¡è¡¥åå®å</p>
<h2 id="éå½4-å¨ä½å½æ°åº">éå½4 å¨ä½å½æ°åº</h2>
<p>â¢äºä»¶(A,B,...) // ä¾æ¬¡è§¦åæåäºä»¶ï¼èªå¨å¯¹äºä»¶åéèµå¼åæ¸é¤ï¼äºä»¶=A;è§¦ååè°;äºä»¶=0<br>
â¢æ¶è(A:100,B:200,...)<br>
â¢å¥å±(A:100,B:200,...)ãå¥å±(10003) // è°ç¨IDæå®çå¥å±åè®¾å®å®ç°<br>
â¢å·æª(ä¼å°é­,1,203,235)ãå·æª(80001) // è°ç¨IDæå®çå¸æªè®¾å®å®ç°<br>
â¢è·³è½¬(åå¤©é¨,304,208)ãè·³è½¬(åå¤©é¨,304,208,10)// æå®èå´éæº<br>
â¢å¤æ´»(åå¤©é¨,304,208)ãå¤æ´»() // åå°å¤æ´»<br>
â¢èµ°(304,256) // ç±åç¹å°ç®æ ç¹<br>
â¢è·(304,256)<br>
â¢è·³(304,256)<br>
â¢é£(304,256,503) // ç±åç¹å°ç®æ 3Dç¹</p>
<p>å¯èªè¡è¡¥åå®å</p>
<h2 id="éå½-5-ç¸å³åèé¾æ¥">éå½ 5 ç¸å³åèé¾æ¥</h2>
<p>éç¨æ°æ®å¼æ(data-e)åå¶å¨æ¨¡ååæ¸¸æå¼åä¸­çåºç¨ææ³å¾è§£<br>
<a href="https://blog.csdn.net/guestcode/article/details/139897257" target="_blank" rel="noopener nofollow">https://blog.csdn.net/guestcode/article/details/139897257</a></p>
<p>ä¸ç©çIDãä¸äºçäºä»¶ãä¸äººçæ°æ®<br>
<a href="https://www.cnblogs.com/ygluu/p/19117836" target="_blank">https://www.cnblogs.com/ygluu/p/19117836</a></p>
</font>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.8666666666666667" data-date-updated="2026-02-01 12:10">2026-01-31 15:22</span>&nbsp;
<a href="https://www.cnblogs.com/ygluu">ç å®¢-ygluu</a>&nbsp;
éè¯»(<span id="post_view_count">111</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19550578);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19550578', targetLink: 'https://www.cnblogs.com/ygluu/p/19550578', title: 'AAæ¸¸æèæ¬è§èï¼AA Game Scriptï¼' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ æ°æ®âæ¾å¾®éâï¼èç¾¤å¾è®©æ¯ä¸ªæ°æ®ç¹é½åå£° ]]></title>
    <link>https://www.cnblogs.com/wang_yb/p/19557785</link>
    <guid>4254e035ab252d6c7896e93e09119a14</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/wang_yb/p/19557785" title="åå¸äº 2026-01-31 14:22">
    <span role="heading" aria-level="2">æ°æ®âæ¾å¾®éâï¼èç¾¤å¾è®©æ¯ä¸ªæ°æ®ç¹é½åå£°</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>æ³è±¡ä¸ä¸å¤æ¥çè±ä¸ä¸­ï¼æç¾¤çèèå´ç»çè±æµå¿ç¢å°é£èãæ¯åªèèé½æ¯ä¸ä¸ªç¬ç«çæ°æ®ç¹ï¼å®ä»¬æ¢ä¿æç¾¤ä½èéçå½¢æï¼åä¸ä¼å®å¨éå å¨ä¸èµ·ã</p>
<p>è¿å°±æ¯<strong>èç¾¤å¾</strong>ï¼<code>Swarm Plot</code>ï¼ç<strong>æ ¸å¿çå¿µ</strong>ââå¨æéçç©ºé´åå±ç¤ºæææ°æ®ç¹ï¼è®©æ¯ä¸ªç¹é½è½è¢«æ¸æ°çè§ã</p>
<p><strong>èç¾¤å¾</strong>æ¯ä¸ç§ç¹æ®çæ°æ®å¯è§åå¾è¡¨ï¼å®å°åç±»æ°æ®ä¸æ°å¼æ°æ®ç»åèµ·æ¥ï¼å±ç¤ºæ°æ®çåå¸æåµã</p>
<p>ä¸ä¼ ç»çæ¡å½¢å¾æç®±çº¿å¾ä¸åï¼èç¾¤å¾ä¸è¿è¡ä»»ä½æ°æ®èåï¼èæ¯å±ç¤ºæ¯ä¸ä¸ªåå§æ°æ®ç¹ï¼é¿åäºä¿¡æ¯ä¸¢å¤±ã</p>
<h1 id="1-èç¾¤å¾æ ¸å¿ç¹ç¹">1. èç¾¤å¾æ ¸å¿ç¹ç¹</h1>
<p><strong>èç¾¤å¾</strong>æå·§å¦çå°æ¹å¨äºå®çå¸å±ç®æ³ã</p>
<p>å½å¤ä¸ªæ°æ®ç¹å·æç¸ä¼¼æ°å¼æ¶ï¼å®ä»¬ä¸ä¼ç®åå°éå å¨ä¸èµ·ï¼èæ¯åæâææ¥åâä¸æ ·ï¼å¨åç´æ¹åï¼ææ°´å¹³æ¹åï¼ä¸è½»å¾®åç§»ï¼å½¢æä¸ä¸ªç±»ä¼¼èç¾¤çåå¸ã</p>
<p>æ¯å¦ï¼ä¸é¢æ¯<strong>åä¸ç»æ°æ®</strong>å¨<strong>æ£ç¹å¾</strong>å<strong>èç¾¤å¾</strong>ä¸­å±ç¤ºçææã</p>

<p><img src="https://img2024.cnblogs.com/blog/83005/202601/83005-20260131142128895-781019092.png" alt="" loading="lazy"></p>
<p>ä»ä¸­å¯ä»¥çåºèç¾¤å¾çæ ¸å¿ç¹ç¹æï¼</p>
<ol>
<li><strong>ç»ä¸éå </strong>ï¼ å®éè¿ç®æ³æ£æµæ°æ®ç¹çéå æåµï¼ä¸æ¦åç°ä¸¤ä¸ªç¹æ°å¼ç¸è¿ï¼å°±ä¼èªå¨æå®ä»¬åæ°´å¹³æ¹åæ¨å¼ã</li>
<li><strong>ä¿çåå¸å½¢æ</strong>ï¼ æ£å¼åçå½¢ç¶ï¼å¤©ç¶å½¢æäºä¸ç§ç±»ä¼¼âå°æç´âæâå±±å³°âçè½®å»ï¼ç´è§å°å±ç¤ºäºæ°æ®çå¯åº¦ã</li>
<li><strong>åæ°è°æ´</strong>ï¼ æä»¬å¯ä»¥è°æ´ç¹çå¤§å°ï¼marker sizeï¼åæåçç´§å¯ç¨åº¦ãç¹è¶å¤§ï¼è§è§å²å»åè¶å¼ºï¼ä½éè¦çæ°´å¹³ç©ºé´ä¹è¶å¤ã</li>
</ol>
<h1 id="2-èç¾¤å¾-vs-æ¡å½¢å¾ä»æè¦å°ç»è">2. èç¾¤å¾ vs. æ¡å½¢å¾ï¼ä»æè¦å°ç»è</h1>
<p><strong>æ¡å½¢å¾</strong>å°±åæ¯ä¸ä»½æ°æ®æè¦æ¥åï¼å®åè¯æä»¬æ¯ä¸ªç±»å«çå¹³åå¼ææ»è®¡å¼ï¼ä½éèäºæ°æ®åé¨çåå¸ç»èã</p>
<p>è<strong>èç¾¤å¾</strong>ååæ¯ä¸æ¬¡æ°æ®ç¹çå¨åå¤§ä¼ï¼æ¯ä¸ªæ°æ®ç¹é½æåè¨çæºä¼ã</p>
<p>ä¸é¢éå¯¹åä¸ç»æ°æ®ï¼æä»¬åå«ç»å¶äº<strong>æ¡å½¢å¾</strong>ã<strong>ç®±çº¿å¾</strong>å<strong>èç¾¤å¾</strong>ï¼ä¸èµ·æ¥æåä¸ä¸å®ä»¬ä¹é´ä¸åçå±ç¤ºææã</p>
<pre><code class="language-python"># çæç¤ºä¾æ°æ®
np.random.seed(123)
categories = ["äº§åA", "äº§åB", "äº§åC", "äº§åD"]
data_comparison = []
for category in categories:
    n_points = 40
    if category == "äº§åA":
        values = np.random.normal(75, 8, n_points)
    elif category == "äº§åB":
        values = np.random.normal(82, 12, n_points)
    elif category == "äº§åC":
        values = np.random.normal(65, 5, n_points)
    else:  # äº§åD
        # åå»ºä¸ä¸ªåå³°åå¸
        values1 = np.random.normal(55, 6, n_points // 2)
        values2 = np.random.normal(85, 7, n_points // 2)
        values = np.concatenate([values1, values2])

    for value in values:
        data_comparison.append({"äº§å": category, "ç¨æ·è¯å": value})

# 1. æ¡å½¢å¾ï¼å¹³åå¼ï¼
means = []
for category in categories:
    cat_data = [d["ç¨æ·è¯å"] for d in data_comparison if d["äº§å"] == category]
    means.append(np.mean(cat_data))

bars = axes[0].bar(
    categories, means, color=["#1f77b4", "#ff7f0e", "#2ca02c", "#d62728"]
)


# å¨æ¡å½¢ä¸æ æ³¨å¹³åå¼
# çç¥...

# 2. ç®±çº¿å¾
box_data = []
for category in categories:
    cat_data = [d["ç¨æ·è¯å"] for d in data_comparison if d["äº§å"] == category]
    box_data.append(cat_data)

boxplot = axes[1].boxplot(
    box_data, tick_labels=categories, patch_artist=True, boxprops=dict(facecolor="lightblue")
)
# çç¥...

# 3. èç¾¤å¾
data_df = pd.DataFrame(data_comparison)
sns.swarmplot(
    x="äº§å",
    y="ç¨æ·è¯å",
    hue="äº§å",
    data=data_df,
    ax=axes[2],
    size=5,
    palette="Set2",
    edgecolor="black",
    linewidth=0.5,
)
# çç¥...

plt.tight_layout()
plt.show()

</code></pre>

<p><img src="https://img2024.cnblogs.com/blog/83005/202601/83005-20260131142128894-2129735776.png" alt="" loading="lazy"></p>
<p>ç»å¶èç¾¤å¾å¯ä»¥ç¨<code>seaborn</code>è¿ä¸ªåºä¸­ç<code>swarmplot</code>å½æ°ã</p>
<p>ä»ä¸é¢çå¯¹æ¯å¯ä»¥çåºï¼</p>
<ul>
<li><strong>æ¡å½¢å¾</strong>åè¯æä»¬äº§åDçå¹³ååçº¦ä¸º70å</li>
<li><strong>ç®±çº¿å¾</strong>æç¤ºäº§åDçæ°æ®åå¸èå´å¾å¹¿</li>
<li>ä½åªæ<strong>èç¾¤å¾</strong>æ¸æ°å°æ­ç¤ºäºäº§åDå®éä¸æä¸¤ä¸ªææ¾çç¨æ·ç¾¤ä½ï¼ä¸ä¸ªä½è¯åç¾¤ä½åä¸ä¸ªé«è¯åç¾¤ä½</li>
</ul>
<h1 id="3-èç¾¤å¾-vs-æ£ç¹å¾ä»æ··ä¹±å°æåº">3. èç¾¤å¾ vs. æ£ç¹å¾ï¼ä»æ··ä¹±å°æåº</h1>
<p>ä¼ ç»<strong>æ£ç¹å¾</strong>å¨å¤çåç±»æ°æ®æ¶ï¼å¸¸å¸¸å¯¼è´æ°æ®ç¹å¤§ééå ï¼å½¢æ"é»å¢"ï¼æä»¬æ æ³çæ¸æ°æ®ç¹ççå®åå¸ã</p>
<p><strong>èç¾¤å¾</strong>éè¿æºè½å¸å±ç®æ³è§£å³äºè¿ä¸ªé®é¢ã</p>
<p>ä¸é¢æé ä¸ä¸ªä¸åå¯åº¦çæ°æ®ï¼ççèç¾¤å¾åæ£ç¹å¾çå±ç¤ºææã</p>
<pre><code class="language-python"># æ¯è¾æ£ç¹å¾ä¸èç¾¤å¾çè§è§ææ
fig, axes = plt.subplots(1, 2, figsize=(14, 6))

# çæå·æä¸åå¯åº¦çæ°æ®
np.random.seed(42)
density_data = []
categories = ["ä½å¯åº¦", "ä¸­ç­å¯åº¦", "é«å¯åº¦"]
for i, category in enumerate(categories):
    n_points = 20 + i * 30  # ä¸åå¯åº¦
    if category == "ä½å¯åº¦":
        values = np.random.normal(50, 15, n_points)
    elif category == "ä¸­ç­å¯åº¦":
        values = np.random.normal(50, 8, n_points)
    else:  # é«å¯åº¦
        values = np.random.normal(50, 4, n_points)

    for value in values:
        density_data.append({"ç±»å«": category, "æ°å¼": value})

# å·¦ä¾§ï¼ä¼ ç»æ£ç¹å¾
for i, category in enumerate(categories):
    cat_data = [d["æ°å¼"] for d in density_data if d["ç±»å«"] == category]
    x_positions = np.full(len(cat_data), i)
    axes[0].scatter(x_positions, cat_data, alpha=0.6, s=60, label=category)

#çç¥...

# å³ä¾§ï¼èç¾¤å¾
density_data_df = pd.DataFrame(density_data)
sns.swarmplot(
    x="ç±»å«",
    y="æ°å¼",
    hue="ç±»å«",
    data=density_data_df,
    ax=axes[1],
    size=6,
    palette="coolwarm",
    edgecolor="black",
    linewidth=0.5,
)
#çç¥...

plt.tight_layout()
plt.show()
</code></pre>

<p><img src="https://img2024.cnblogs.com/blog/83005/202601/83005-20260131142128896-1164818687.png" alt="" loading="lazy"></p>
<p><strong>èç¾¤å¾</strong>è§£å³äº <strong>âéå ï¼Overplottingï¼â</strong> çé®é¢ãå¨æ°æ®ééä¸­ï¼å ç¾å°å åä¸ªç¹ï¼æ¶ï¼å®æ¯å±ç¤ºåå¸å¯åº¦çæä½³éæ©ã</p>
<h1 id="4-èç¾¤å¾çéç¨åºæ¯">4. èç¾¤å¾çéç¨åºæ¯</h1>
<p><strong>èç¾¤å¾</strong>å¹¶ä¸æ¯ä¸ºäºåä»£<strong>æ¡å½¢å¾</strong>æ<strong>æ£ç¹å¾</strong>ï¼å®æèªå·±çéç¨åºæ¯åå±éæ§ã</p>
<p>éåä½¿ç¨<strong>èç¾¤å¾</strong>çåºæ¯ï¼</p>
<ul>
<li>æ ·æ¬ééä¸­ï¼éå¸¸å°äºå ç¾ä¸ªç¹ï¼æ¶ï¼å±ç¤ºå®æ´æ°æ®åå¸</li>
<li>éè¦åæ¶çå°æ´ä½è¶å¿åä¸ªä½æ°æ®ç¹</li>
<li>æ°æ®æå¤ä¸ªåç±»åéï¼éè¦æ¯è¾ä¸åç±»å«åå¸</li>
<li>å¸æåç°å¼å¸¸å¼æç¹æ®æ¨¡å¼ï¼å¦åå³°åå¸ï¼</li>
</ul>
<p><font style="color: rgba(15, 17, 21, 1)"></font></p>
<p><strong>èç¾¤å¾</strong>ç<strong>å±éæ§</strong>ä¸»è¦æï¼</p>
<ol>
<li>å¤§æ°æ®éå¯è½å¯¼è´å¾è¡¨è¿äºæ¥æ¤</li>
<li>å¯¹äºéå¸¸å¤§è§æ¨¡æ°æ®ï¼ç®±çº¿å¾æå°æç´å¾å¯è½æ´åé</li>
<li>ç²¾ç¡®çæ°å¼æ¯è¾ä¸å¦æ¡å½¢å¾ç´è§</li>
</ol>
<h1 id="5-æ»ç»">5. æ»ç»</h1>
<p><strong>èç¾¤å¾</strong>å°±åæ°æ®å¯è§åé¢åç"æ¾å¾®é"ï¼å®è®©æä»¬æ¢è½è§å¯å°æ°æ®çæ´ä½åå¸å½¢æï¼åè½çå°æ¯ä¸ä¸ªæ°æ®ç¹çå·ä½ä½ç½®ã</p>
<p>ä¸åªè½æ¾ç¤ºæè¦ä¿¡æ¯ç<strong>æ¡å½¢å¾</strong>åå®¹æäº§çéå ç<strong>æ£ç¹å¾</strong>ç¸æ¯ï¼<strong>èç¾¤å¾</strong>å¨æ¾ç¤ºä¸­å°åæ°æ®éçå®æ´åå¸ä¿¡æ¯æ¹é¢å·æç¬ç¹ä¼å¿ã</p>
<p>å¨æ°æ®å¯è§åå®è·µä¸­ï¼éæ©æ­£ç¡®çå¾è¡¨ç±»åå°±åéæ©æ­£ç¡®çå·¥å·ä¸æ ·éè¦ã</p>
<p>å½ä¸ä¸æ¬¡ä½ éè¦å±ç¤ºåç±»æ°æ®çåå¸æ¶ï¼ä¸å¦¨å°è¯ä¸ä¸èç¾¤å¾ï¼å®å¯è½ä¼æ­ç¤ºåºä½ ä»æªæ³¨æå°çæ°æ®ç§å¯ã</p>
<p>æä¸­çå®æ´ä»£ç å±äº«å¨ï¼<a href="https://url11.ctfile.com/f/45455611-8639900394-9a109f?p=6872" target="_blank" rel="noopener nofollow">èç¾¤å¾.ipynb</a> (è®¿é®å¯ç : 6872)</p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-31 14:22">2026-01-31 14:22</span>&nbsp;
<a href="https://www.cnblogs.com/wang_yb">wang_yb</a>&nbsp;
éè¯»(<span id="post_view_count">63</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19557785);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19557785', targetLink: 'https://www.cnblogs.com/wang_yb/p/19557785', title: 'æ°æ®âæ¾å¾®éâï¼èç¾¤å¾è®©æ¯ä¸ªæ°æ®ç¹é½åå£°' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
<item>
    <title><![CDATA[ C++ å°è£ C FFI æ¥å£æä½³å®è·µï¼ä»¥ Hugging Face Tokenizer ä¸ºä¾ ]]></title>
    <link>https://www.cnblogs.com/charlee44/p/19557586</link>
    <guid>e4fd64102f9d44c52c02fa3a99c6b27d</guid>
    <description>
    <![CDATA[ 
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/charlee44/p/19557586" title="åå¸äº 2026-01-31 13:36">
    <span role="heading" aria-level="2">C++ å°è£ C FFI æ¥å£æä½³å®è·µï¼ä»¥ Hugging Face Tokenizer ä¸ºä¾</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        è¯¦ç»ä»ç»äºå¦ä½éè¿ Rust ç C FFI å°è£ Hugging Face tokenizersï¼å¹¶å¨ C++ ä¸­å©ç¨ RAII åæºè½æéå®ç°å®å¨ãç®æ´ãé«æçèµæºç®¡çï¼æç»éµå¾ªç°ä»£ C++ çâé¶æ³åâå®æå·¥ä¸çº§å°è£ã
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="1-å¼å¥">1. å¼å¥</h1>
<p>å¨ç°ä»£ AI å·¥ç¨ä¸­ï¼Hugging Face ç tokenizers åºå·²æä¸ºåè¯å¨çäºå®æ åãä¸è¿ Hugging Face ç tokenizers æ¯ç¨ Rust æ¥å®ç°çï¼å®æ¹åªæä¾äº python å node çç»å®å®ç°ãè¦å®ç°ä¸ Hugging Face tokenizers ç¸åçè¡ä¸ºï¼æå¥½çåæ³å°±æ¯èªå·±å°è£ Hugging Face tokenizers ç C ç»å®ï¼ä»èå¯ä»¥è¢« C++ / C# / Java è¿äºé«çº§ç¼ç¨è¯­è¨è°ç¨ã</p>
<h1 id="2-å°è£-c-æ¥å£">2. å°è£ C æ¥å£</h1>
<p>é¦åè¦è¯´æçæ¯ï¼è¦åçä¸æ¯å®æ´çå°è£ Hugging Face tokenizers ç C ç FFIï¼Foreign Function Interfaceï¼æ¥å£ï¼èæ¯å°è£èªå·±éè¦çæ¥å£å°±å¯ä»¥äºãæ¯å¦æ§è¡åè¯æ¥å£åè®¡ç®Tokençæ¥å£ï¼</p>
<pre><code class="language-rust">use std::ffi::CStr;
use std::os::raw::c_char;
use tokenizers::{PaddingParams, Tokenizer, TruncationParams};

// === 1. å®ä¹ C å¼å®¹çè¿åç»æä½ ===
#[repr(C)]
pub struct TokenizerResult {
    pub input_ids: *mut i64,
    pub attention_mask: *mut i64,
    pub token_type_ids: *mut i64,
    pub length: u64,
}

// === 2. åé¨ç¶æï¼åè£ Tokenizer ===
struct TokenizerHandle {
    tokenizer: Tokenizer,     // ç¨äº encodeï¼å¸¦ paddingï¼
    raw_tokenizer: Tokenizer, // ç¨äº countï¼æ  paddingï¼
}

// === 3. è¾å©å½æ°ï¼å° Rust Vec è½¬ä¸º C å¯æ¥æçæé ===
fn vec_to_c_ptr(vec: Vec&lt;i64&gt;) -&gt; *mut i64 {
    let mut boxed = vec.into_boxed_slice();
    let ptr = boxed.as_mut_ptr();
    std::mem::forget(boxed); // é²æ­¢ Rust èªå¨éæ¾
    ptr
}

// === 4. åå»º tokenizer ===
#[unsafe(no_mangle)] // ç¦ç¨ name manglingï¼è®© C è½æ¾å°ç¬¦å·
pub extern "C" fn tokenizer_create(tokenizer_json_path: *const c_char) -&gt; *mut std::ffi::c_void {
    if tokenizer_json_path.is_null() {
        return std::ptr::null_mut();
    }

    let path_cstr = unsafe { CStr::from_ptr(tokenizer_json_path) };
    let path_str = match path_cstr.to_str() {
        Ok(s) =&gt; s,
        Err(_) =&gt; return std::ptr::null_mut(),
    };

    let mut tokenizer = match Tokenizer::from_file(path_str) {
        Ok(t) =&gt; t,
        Err(_) =&gt; return std::ptr::null_mut(),
    };

    // è®¾ç½® padding/truncation å° 512ï¼BGE é»è®¤ï¼
    tokenizer.with_padding(Some(PaddingParams {
        strategy: tokenizers::PaddingStrategy::Fixed(512),
        ..Default::default()
    }));

    if tokenizer
        .with_truncation(Some(TruncationParams {
            max_length: 512,
            ..Default::default()
        }))
        .is_err()
    {
        return std::ptr::null_mut();
    }

    let mut raw_tokenizer = tokenizer.clone();
    raw_tokenizer.with_padding(None);
    raw_tokenizer.with_truncation(None).ok();

    let handle = TokenizerHandle {
        tokenizer,
        raw_tokenizer,
    };
    Box::into_raw(Box::new(handle)) as *mut std::ffi::c_void
}

//è®¡ç®å¥å­token
#[unsafe(no_mangle)] // ç¦ç¨ name manglingï¼è®© C è½æ¾å°ç¬¦å·
pub extern "C" fn tokenizer_count(handle: *mut std::ffi::c_void, text: *const c_char) -&gt; u64 {
    if handle.is_null() || text.is_null() {
        return 0;
    }

    let handle_ref = unsafe { &amp;*(handle as *mut TokenizerHandle) };

    let text_cstr = unsafe { CStr::from_ptr(text) };
    let text_str = match text_cstr.to_str() {
        Ok(s) =&gt; s,
        Err(_) =&gt; return 0,
    };

    match handle_ref.raw_tokenizer.encode(text_str, true) {
        Ok(encoding) =&gt; encoding.len() as u64,
        Err(_) =&gt; 0,
    }
}

// === 5. éæ¯ tokenizer ===
#[unsafe(no_mangle)]
pub extern "C" fn tokenizer_destroy(handle: *mut std::ffi::c_void) {
    if !handle.is_null() {
        unsafe {
            let _ = Box::from_raw(handle as *mut TokenizerHandle);
            // Drop èªå¨è°ç¨
        }
    }
}

// === 6. æ§è¡åè¯ ===
#[unsafe(no_mangle)]
pub extern "C" fn tokenizer_encode(
    handle: *mut std::ffi::c_void,
    text: *const c_char,
) -&gt; TokenizerResult {
    let default_result = TokenizerResult {
        input_ids: std::ptr::null_mut(),
        attention_mask: std::ptr::null_mut(),
        token_type_ids: std::ptr::null_mut(),
        length: 0,
    };

    if handle.is_null() || text.is_null() {
        return default_result;
    }

    let handle_ref = unsafe { &amp;*(handle as *mut TokenizerHandle) };

    let text_cstr = unsafe { CStr::from_ptr(text) };
    let text_str = match text_cstr.to_str() {
        Ok(s) =&gt; s,
        Err(_) =&gt; return default_result,
    };

    let encoding = match handle_ref.tokenizer.encode(text_str, true) {
        Ok(e) =&gt; e,
        Err(_) =&gt; return default_result,
    };

    let input_ids: Vec&lt;i64&gt; = encoding.get_ids().iter().map(|&amp;x| x as i64).collect();
    let attention_mask: Vec&lt;i64&gt; = encoding
        .get_attention_mask()
        .iter()
        .map(|&amp;x| x as i64)
        .collect();
    let token_type_ids: Vec&lt;i64&gt; = encoding.get_type_ids().iter().map(|&amp;x| x as i64).collect();
    // BGE ä¸éè¦ï¼ä½ C++ ä»£ç ä¼ äº
    // let token_type_ids: Vec&lt;u32&gt; = vec![0u32; input_ids.len()];

    let len = input_ids.len(); // åºè¯¥æ¯ 512ï¼ä½æ´éç¨

    TokenizerResult {
        input_ids: vec_to_c_ptr(input_ids),
        attention_mask: vec_to_c_ptr(attention_mask),
        token_type_ids: vec_to_c_ptr(token_type_ids),
        length: len as u64,
    }
}

// === 7. éæ¾ç»æåå­ ===
#[unsafe(no_mangle)]
pub extern "C" fn tokenizer_result_free(result: TokenizerResult) {
    if !result.input_ids.is_null() {
        unsafe {
            let _ = Vec::from_raw_parts(
                result.input_ids,
                result.length as usize,
                result.length as usize,
            );
        }
    }

    if !result.attention_mask.is_null() {
        unsafe {
            let _ = Vec::from_raw_parts(
                result.attention_mask,
                result.length as usize,
                result.length as usize,
            );
        }
    }

    if !result.token_type_ids.is_null() {
        unsafe {
            let _ = Vec::from_raw_parts(
                result.token_type_ids,
                result.length as usize,
                result.length as usize,
            );
        }
    }
}
</code></pre>
<p>å¯¹åºç C æ¥å£å¦ä¸ï¼</p>
<pre><code class="language-c">// tokenizer_result.h
#pragma once

struct TokenizerResult {
  int64_t* input_ids;
  int64_t* attention_mask;
  int64_t* token_type_ids;
  uint64_t length;
};

#ifdef __cplusplus
static_assert(std::is_standard_layout_v&lt;TokenizerResult&gt; &amp;&amp;
                  std::is_trivially_copyable_v&lt;TokenizerResult&gt;,
              "TokenizerResult must be C ABI compatible");
#endif
</code></pre>
<pre><code class="language-c">// hf_tokenizer_ffi.h
#pragma once

#include &lt;stdint.h&gt;

#include "tokenizer_result.h"

#ifdef __cplusplus
extern "C" {
#endif

void* tokenizer_create(const char* tokenizer_json_path);
void tokenizer_destroy(void* handle);
TokenizerResult tokenizer_encode(void* handle, const char* text);
uint64_t tokenizer_count(void* handle, const char* text);
void tokenizer_result_free(TokenizerResult result);

#ifdef __cplusplus
}
#endif
</code></pre>
<p>å·ä½çå°è£ç»èç¬èå°±ä¸å¤è¯´äºï¼å ä¸ºä¸æ¬æçä¸»é¢æ å³ãä¸è¿å¯ä»¥ç¨ç¨äºè§£ä¸ä¸å¶ä¸­çåçï¼ä¹å°±æ¯è¯´ï¼æä½ç³»ç»å¤§å¤æ°æ¯ç± C å®ç°çï¼æèæä¾äº C çæ¥å£ãå æ­¤ï¼ç»å¤§å¤æ°æ¯ C é«çº§çç¼ç¨è¯­è¨é½æä¾äºä¸ C äº¤äºçè½åï¼å½ç¶åææ¯å¿é¡»å¾æç§ C å¾è§èç»ç»æ°æ®åå°è£æ¥å£ãæ¯å¦è¿éç<code>struct TokenizerResult</code>å°±æ¯ä¸ä¸ªå¼å®¹ C çç»æä½ï¼<code>#[unsafe(no_mangle)]</code>åè¡¨æè¿æ¯ä¸ä¸ª C è¯­è¨å½¢å¼çå½æ°æ¥å£ã</p>
<h1 id="3-ç»å¸-c-å°è£">3. ç»å¸ C++ å°è£</h1>
<p>å¦ä¸æ¥å£æ¯ä¸ä¸ªæ åç C é£æ ¼å¼çæ¥å£ï¼å°åè¯å¨å°è£æä¸ä¸ª Handle ï¼ä¹å°±æ¯ä¿ç§°çå¥æãèåç»­å·ä½çåè¯æä½å°±éè¿è¿ä¸ªå¥ææ¥è¿è¡ï¼åæ¬æåå¯¹èµæºçéæ¾ãå¨ C++ ä¸­ï¼å½ç¶ä¹å¯ä»¥ç´æ¥ä½¿ç¨è¿ç§å½¢å¼çæ¥å£ï¼ä¸è¿è¿æ ·å°±éè¦éµå¾ª C çèµæºæ§å¶è§åï¼èµæºç³è¯·åéæ¾å¿é¡»æå¯¹åºç°ââæ¯å¦è¿éç <code>tokenizer_create</code> å <code>tokenizer_destroy</code>ã</p>
<h2 id="31-raii-æºå¶">3.1 RAII æºå¶</h2>
<p>ä¸è¿è¿æ ·å°±ä¼æä¸ä¸ªé®é¢ï¼è¿ç¨å¼çæµç¨ä¸­å¾é¾ä¿è¯ <code>tokenizer_create</code> å <code>tokenizer_destroy</code> è½å¤æå¯¹è°ç¨ï¼ä¾å¦ï¼</p>
<pre><code class="language-c">tokenizer_create()

if(...){
    return;
}

tokenizer_destroy()
</code></pre>
<p>åªè¦å¨ <code>tokenizer_create</code> å <code>tokenizer_destroy</code> ä¹é´åºç°åæ¯ï¼ç¨åºæåè¿åï¼å°±ä¼å¯¼è´èµæºæ²¡æéæ¾èåå­æ³æ¼ãä¸ºäºé¿åè¿ä¸ªé®é¢ï¼å°±éè¦å¨æ¯æ¬¡ <code>return</code> ä¹åï¼é½è°ç¨ <code>tokenizer_destroy()</code>ââè¿å½ç¶æ¯éå¸¸ä¸ä¼éçï¼æ¢å®¹æå¿æåæ¯åä½ä»£ç ã</p>
<p>ä¸ºäºè§£å³è¿ç§èµæºç®¡çé¾é¢ï¼C++ æä¾äºä¸ç§å¼ºå¤§èä¼éçæºå¶ï¼RAIIï¼Resource Acquisition Is Initializationï¼èµæºè·åå³åå§åï¼ãå®çæ ¸å¿ææ³æ¯ï¼å°èµæºççå½å¨æç»å®å°å¯¹è±¡ççå½å¨æä¸ãå·ä½æ¥è¯´ï¼å°±æ¯å©ç¨é¢åå¯¹è±¡çææ³ï¼å°èµæºæ§å¶çè¡ä¸ºå°è£æä¸ä¸ªç±»å¯¹è±¡ï¼å¹¶ä¸ä¿è¯èµæºå¨å¯¹è±¡æé å½æ°ä¸­è·åï¼å¨ææå½æ°ä¸­èªå¨éæ¾ãç±äº C++ ä¸­æ å¯¹è±¡å¨ç¦»å¼ä½ç¨åæ¶ä¼èªå¨è°ç¨ææå½æ°ï¼å¨ç¦»å¼ä½ç¨åæ¶ä¼èªå¨è°ç¨ææå½æ°ãå æ­¤è¿äºèµæºæ»æ¯å¯ä»¥è¢«æ­£ç¡®éæ¾ï¼ä»æ ¹æ¬ä¸æç»åå­æ³æ¼æèµæºæ³é²ãä¾å¦ï¼</p>
<pre><code class="language-cpp">Tokenizer tokenizer;

//...æä½

if(...){
    return;
}

//...æ´å¤æä½
</code></pre>
<h2 id="32-æ·è´è¯­ä¹">3.2 æ·è´è¯­ä¹</h2>
<p>å¤ä¹ ä¸ä¸ C++ é¢åå¯¹è±¡è®¾è®¡çç»å¸äºæ³åï¼Rule of Fiveï¼ï¼å¦æä¸ä¸ªç±»èªå®ä¹äºä»¥ä¸ä»»æä¸ä¸ªå½æ°ï¼</p>
<ol>
<li>ææå½æ°ï¼Destructorï¼</li>
<li>æ·è´æé å½æ°ï¼Copy Constructorï¼</li>
<li>æ·è´èµå¼è¿ç®ç¬¦ï¼Copy Assignment Operatorï¼</li>
<li>ç§»å¨æé å½æ°ï¼Move Constructorï¼</li>
<li>ç§»å¨èµå¼è¿ç®ç¬¦ï¼Move Assignment Operatorï¼</li>
</ol>
<p>é£ä¹å¤§æ¦çä¹éè¦èªå®ä¹å¦å¤åä¸ªå½æ°ï¼æèæ¾å¼ = default / = delete æ¥æ§å¶è¡ä¸ºãå¾å¤ C++ ç¨åºåå¹¶ä¸çè§£ç§»å¨è¯­ä¹ï¼ä½è¿å¹¶æ²¡æå³ç³»ï¼æä»¬å¯ä»¥ååå®ä¸å®ä¹ç§»å¨æé å½æ°åç§»å¨èµå¼è¿ç®ç¬¦ï¼æèæ¾å¼ = defaultï¼ï¼æ­¤æ¶ç§»å¨æä½å°±ä¼éåä¸ºæ·è´è¯­ä¹çè¡ä¸ºã</p>
<p>èå³äºæ·è´è¯­ä¹ï¼ç»å¤§å¤æ° C++ ç¨åºååºè¯¥é½ç¥éè¿ä¸ªé®é¢ï¼å½å¨ç±»å¯¹è±¡ä¸­ç®¡çèµæºæ¶ï¼ç¼è¯å¨çæçé»è®¤æ·è´è¡ä¸ºæ¯âæµæ·è´âï¼å¯è½å¯¼è´åééæ¾ãåå­æ³æ¼ç­é®é¢ï¼å æ­¤éè¦èªå®ä¹æ·è´æé å½æ°åæ·è´èµå¼è¿ç®ç¬¦æ¥å®ç°âæ·±æ·è´âçè¡ä¸ºãå æ­¤ï¼è¿ä¸ªé¾æ¡å°±å¾æç¡®äºï¼å ä¸ºç±»ä¸­éè¦å®ä¹ææå½æ°ï¼æä»¥éè¦åæ¶å®ä¹æ·è´æé å½æ°åæ·è´èµå¼è¿ç®ç¬¦ã</p>
<h2 id="33-ç§»å¨è¯­ä¹">3.3 ç§»å¨è¯­ä¹</h2>
<p>è¿ä¸æ­¥è®¨è®ºï¼åæ­£ç§»å¨è¯­ä¹å¯ä»¥é»è®¤ï¼é£ä¹æ¯ä¸æ¯åªç¨å®ä¹æ·è´è¯­ä¹å°±è¡äºå¢ï¼è¿ä¸ªè¦çèµæºçå®ä¹ï¼å¦æåªæ¯ç®¡çåå­èµæºï¼é£ä¹è¿æ ·åæ¯æ²¡æé®é¢çï¼è³å°æ¯å®å¨çãä½æ¯èµæºç®¡çä¸ä»ä»æçæ¯åå­èµæºï¼è¿å¯ä»¥æ¯ä¸äºæä»¶å¥æãç½ç»è¿æ¥ç­ç­ãè¿äºèµæºå¾å¾æ¯ç¬å æ§çï¼è¿è¡æ·±æ·è´å¾å¾ä¼åºç°é®é¢ãå æ­¤å°±åºç°äº C++ 11 å¼å§è§å®çç§»å¨è¯­ä¹ï¼å¯ä»¥å®å¨å¾å®ç°âæµæ·è´âçè¡ä¸ºãåæ¶è¿å¯ä»¥è§£å³âæ·±æ·è´âçæ§è½é®é¢ã</p>
<p>åºäºä»¥ä¸çææ³ï¼ç¬èå°è£çåè¯å¨å¯¹è±¡å¦ä¸ï¼</p>
<pre><code class="language-cpp">// HfTokenizer.h
#pragma once

#include &lt;string&gt;

#include "hf_tokenizer_ffi.h"

namespace hf {
class Tokenizer {
 public:
  explicit Tokenizer(const std::string&amp; path);

  // ææå½æ°
  ~Tokenizer() noexcept;

  // ç¦æ­¢æ·è´
  Tokenizer(const Tokenizer&amp;) = delete;
  Tokenizer&amp; operator=(const Tokenizer&amp;) = delete;

  // ç§»å¨è¯­ä¹
  Tokenizer(Tokenizer&amp;&amp; rhs) noexcept;
  Tokenizer&amp; operator=(Tokenizer&amp;&amp; rhs) noexcept;

  // å¶ä»æ¥å£æ¹æ³
  // TokenizerResult Encode(const char* text) const;
  // uint64_t Count(const char* text) const;

 private:
  void* handle;  // æ¥èª tokenizer_create çæé
};

}  // namespace hf
</code></pre>
<pre><code class="language-cpp">// HfTokenizer.cpp
#include "HfTokenizer.h"

#include &lt;iostream&gt;

namespace hf {
Tokenizer::Tokenizer(const std::string&amp; path)
    : handle(tokenizer_create(path.c_str())) {
  if (!handle) {
    throw std::runtime_error("Failed to create tokenizer from " + path);
  }
}

Tokenizer::~Tokenizer() noexcept {
  if (handle) {
    tokenizer_destroy(handle);
  }
}

// ç§»å¨è¯­ä¹
Tokenizer::Tokenizer(Tokenizer&amp;&amp; rhs) noexcept : handle(rhs.handle) {
  rhs.handle = nullptr;
}

Tokenizer&amp; Tokenizer::operator=(Tokenizer&amp;&amp; rhs) noexcept {
  if (this != &amp;rhs) {
    if (handle) {
      tokenizer_destroy(handle);
    }
    handle = rhs.handle;
    rhs.handle = nullptr;
  }
  return *this;
}

}  // namespace hf
</code></pre>
<p>å¦åæè¿°ï¼å ä¸ºå°è£çæ¯ä¸ä¸ªå¥æï¼ä¸ºäºé¿åèµæºæ§å¶çéº»ç¦ï¼å°±ç¦æ­¢ææ·è´è¯­ä¹ï¼</p>
<pre><code class="language-cpp">// ç¦æ­¢æ·è´
Tokenizer(const Tokenizer&amp;) = delete;
Tokenizer&amp; operator=(const Tokenizer&amp;) = delete;
</code></pre>
<p>è¿è¡<code>()</code>æ·è´æé æè<code>=</code>èµå¼æé çèµ·æ¥ä¼¼ä¹å¾ç®åï¼å¶å®å¨ä»£ç å±å±åµå¥ä¹åï¼å°±å¯è½å¾é¾åæåºæ¯ä¸æ¯è°ç¨äºé»è®¤çæ·è´çè¡ä¸ºï¼æ¯å¦å½æ°ä¼ åãå®¹å¨æä½ç­ç­ãå½ç¶æ·±æ·è´çå®ç°ä¹ä¸æ¯æ§è½æä¼ï¼å æ­¤å¹²èå°±ç´æ¥å é¤ææ·è´æé å½æ°åæ·è´èµå¼è¿ç®ç¬¦ã</p>
<p>æ²¡ææ·è´è¯­ä¹ï¼é£ä¹å°±éè¦ç§»å¨è¯­ä¹æ¥è¿è¡ä¼ éå¯¹è±¡äºãå¶å®ç§»å¨è¯­ä¹æ²¡é£ä¹é¾ï¼æä»¬åªè¦ææ¡ä½ä¸ç¹ï¼ç§»å¨è¯­ä¹çç®çæ¯å®å¨å°å®ç°âæµæ·è´âãä»¥ç§»å¨èµå¼è¿ç®ç¬¦çå®ç°æ¥è¯´ï¼å¦æè¦å®ç°å¦ä¸ç§»å¨èµå¼ï¼</p>
<pre><code class="language-cpp">Tokenizer A();
Tokenizer B();
B = std::move(A);
</code></pre>
<p>å°±éè¦ä»¥ä¸çè¡ä¸ºï¼</p>
<ol>
<li>éæ¾æBç®¡ççèµæºã</li>
<li>å°Aä¸­çæåâæµæ·è´âå°Bä¸­ï¼è®©Bæ¥ç®¡Açèµæºã</li>
<li>å°Aä¸­æååå§åã</li>
</ol>
<p>å·ä½å®ç°å°±æ¯å¦ä¸æç¤ºï¼</p>
<pre><code class="language-cpp">Tokenizer&amp; Tokenizer::operator=(Tokenizer&amp;&amp; rhs) noexcept {
  if (this != &amp;rhs) {
    if (handle) {
      tokenizer_destroy(handle);
    }
    handle = rhs.handle;
    rhs.handle = nullptr;
  }
  return *this;
}
</code></pre>
<p>ç§»å¨æé å½æ°å°±æ´å ç®åäºï¼å ä¸ºBå¯¹è±¡å¨ç§»å¨æé ä¹åæåå¹¶æ²¡æåå§åï¼</p>
<pre><code class="language-cpp">Tokenizer A();
Tokenizer B(std::move(A));
</code></pre>
<p>å æ­¤å¯ä»¥çç¥æéæ¾èªèº«èµæºçæ­¥éª¤ï¼å·ä½å®ç°ä¹å°±æ¯å¦ä¸æç¤ºï¼</p>
<pre><code class="language-cpp">Tokenizer::Tokenizer(Tokenizer&amp;&amp; rhs) noexcept : handle(rhs.handle) {
  rhs.handle = nullptr;
}
</code></pre>
<p>æåè¿æä¸ä¸ªé®é¢ï¼Aéè¿ç§»å¨è¯­ä¹è½¬ç§»å°Bäºï¼Aè¿è½ä½¿ç¨åï¼ä¸è½ä¹æ²¡å¿è¦ä½¿ç¨Aäºï¼æ è®ºæ¯Aå¯¹è±¡åBå¯¹è±¡å¶å®æ¯ä¸ä¸ªæ å¯¹è±¡ï¼å½ç¶åé¨ç®¡ççæ°æ®æåå¯è½æ¾å¨å ä¸ï¼ï¼æèè¯´æ¯ä¸ä¸ªå¼å¯¹è±¡ï¼è¿è·å¼ç¨å¯¹è±¡æèå°åå¯¹è±¡å®å¨ä¸åãç§»å¨è¯­ä¹çæ¬è´¨æ¯å¯¹è±¡æææçè½¬ç§»ï¼è½¬ç§»ä¹ååå¯¹è±¡ä¸­èµæºæææå°±ä¸å­å¨äºï¼å³ä½¿å¼ºè¡è®¿é®ï¼è¦ä¹è®¿é®ä¸å°ï¼è¦ä¹ä¼ç¨åºå´©æºã</p>
<h1 id="4-é«çº§-c-å°è£">4. é«çº§ C++ å°è£</h1>
<h2 id="41-é¶æ³å">4.1 é¶æ³å</h2>
<p>ä½¿ç¨ RAII æºå¶ + ç»å¸äºæ³åæ¥è®¾è®¡ä¸ä¸ªç±»å¯¹è±¡ï¼è¿æä¸ä¸ªä¼ç¹ï¼å°±æ¯ä½¿ç¨è¿ä¸ªç±»å¯¹è±¡ä½ä¸ºæ°æ®æåçç±»ï¼å°±ä¸ç¨åæ¾å¼å®ç°ææå½æ°ãä¸ç¨æ¾å¼å®ç°ææå½æ°ï¼ä¹å°±æå³çä¸ç¨å®ç°æ·è´è¯­ä¹åç§»å¨è¯­ä¹ï¼å®å¨å¯ä»¥ä¾èµç±»å¯¹è±¡æ·è´åç§»å¨çé»è®¤è¡ä¸ºãä¸¾ä¾æ¥è¯´ï¼ä¸ä¸ª<code>MyResource</code>å¯¹è±¡ï¼ç®¡ççä¸æ®µåå­ buffer ï¼å®çç±»å®ä¹ä¸ºï¼</p>
<pre><code class="language-cpp">class MyResource {
public:
    // æé ï¼ç³è¯·èµæº
    MyResource() {
        data = new int[100];
    }

    // ææï¼éæ¾èµæº
    ~MyResource() {
        delete[] data;
    }

    // æ·è´æé ï¼æ·±æ·è´
    MyResource(const MyResource&amp; other) {
        data = new int[100];
        copy(other.data, other.data + 100, data);
    }

    // æ·è´èµå¼
    MyResource&amp; operator=(const MyResource&amp; other) {
        if (this != &amp;other) {
            delete[] data;
            data = new int[100];
            copy(other.data, other.data + 100, data);
        }
        return *this;
    }

    // ç§»å¨æé ï¼æ¥ç®¡èµæº
    MyResource(MyResource&amp;&amp; other) noexcept {
        data = other.data;
        other.data = nullptr;
    }

    // ç§»å¨èµå¼
    MyResource&amp; operator=(MyResource&amp;&amp; other) noexcept {
        if (this != &amp;other) {
            delete[] data;
            data = other.data;
            other.data = nullptr;
        }
        return *this;
    }

private:
    int* data = nullptr;
};
</code></pre>
<p>ä½æ¯å¦ææä½¿ç¨ std å®¹å¨<code>vector</code> ï¼ç¸åºçä»£ç å°±å¯ä»¥ç®åä¸ºï¼</p>
<pre><code class="language-cpp">#include &lt;vector&gt;

class MyResource {
public:
    // æé ï¼èªå¨åéåå­
    MyResource() : data(100) {}  // vector&lt;int&gt; èªå¨åå§åä¸º 100 ä¸ªåç´ 

    // â æ éæ¾å¼å®ä¹ææå½æ°
    // â æ éèªå®ä¹æ·è´æé  / æ·è´èµå¼
    // â æ éèªå®ä¹ç§»å¨æé  / ç§»å¨èµå¼

    // ç¼è¯å¨èªå¨çæççæ¬å·²æ­£ç¡®ãé«æãå¼å¸¸å®å¨

private:
    std::vector&lt;int&gt; data;  // RAII èªå¨ç®¡çåå­
};
</code></pre>
<p>è¿ä¸æ¯å ä¸º <code>vector</code> ä½¿ç¨äºä»ä¹é­æ³ï¼èæ¯ <code>vector</code> æ¬èº«å°±æ¯ä½¿ç¨äº RAII æºå¶ + ç»å¸äºæ³åæ¥è®¾è®¡çä¸ä¸ªæ¨¡æ¿ç±»å¯¹è±¡ï¼å¨ <code>MyResource</code> å¯¹è±¡è¿è¡æ·è´æèç§»å¨çæ¶åï¼ä½ä¸ºæ°æ®æåï¼<code>std::vector&lt;int&gt; data</code>ä¹ä¼éååæ ·çæ·è´æèç§»å¨çè¡ä¸ºï¼å¹¶ä¸é»è®¤çãç±ç¼è¯å¨èªå¨çæççæ¬å°±å¯ä»¥æ­£ç¡®å¤çã</p>
<p>ä»¥ä¸è¿ä¸ªææ³ï¼å°±æ¯ç°ä»£ C++ æ´æ¨èç<strong>é¶æ³åï¼Rule of Zeroï¼</strong>ï¼å°½éä¸è¦æå¨ç®¡çèµæºï¼èæ¯ä½¿ç¨ RAII ç±»åè®©ç¼è¯å¨èªå¨çæææç¹æ®æåå½æ°ãèè¿ä¸ª RAII ç±»åï¼å¯ä»¥æ¯ std çä»»ä½å®¹å¨å¯¹è±¡ãæºè½æéï¼ä¹å¯ä»¥æ¯èªå·±æç§äºæ³åå®ç°çç±»å¯¹è±¡ã</p>
<h2 id="42-æºè½æé">4.2 æºè½æé</h2>
<p>åå°æ¬æå¼å¥çé®é¢ï¼å¦ææçåè¯å¨å®ç°ä¸ååæ·è´è¯­ä¹åç§»å¨è¯­ä¹æä¹åå¢ï¼æ¯ç«é½æ¯æ ·æ¿ä»£ç ï¼åä¸å¥½è¿å®¹æåºé®é¢ãæ­¤æ¶æä»¬å°±å¯ä»¥ä½¿ç¨æºè½æé <code>unique_ptr</code> ãå¸¸è§æä¹ä¸ï¼æä»¬é½ç¥éæºè½æéå¯ä»¥å¨æ²¡æä»»ä½å¶ä»å¯¹è±¡å¼ç¨çæåµä¸èªå¨ <code>delete</code> ï¼å¶å®æºè½æéè¿å¯ä»¥èªå®ä¹èµæºçéæ¾è¡ä¸ºï¼</p>
<pre><code class="language-cpp">#pragma once

#include &lt;memory&gt;
#include &lt;string&gt;

namespace hf {
class Tokenizer {
 public:
  explicit Tokenizer(const std::string&amp; path);

  // ç¼è¯å¨èªå¨çæï¼
  // - ææå½æ°
  // - ç§»å¨æé  / ç§»å¨èµå¼
  // - ç¦æ­¢æ·è´ï¼å ä¸º unique_ptr ä¸å¯æ·è´ï¼

 private:
  std::unique_ptr&lt;void, void (*)(void*)&gt; handle;
};

}  // namespace hf
</code></pre>
<pre><code class="language-cpp">#include "HfTokenizer.h"

#include &lt;stdexcept&gt;

#include "hf_tokenizer_ffi.h"

namespace hf {

static void HandleDeleter(void* handle) noexcept {
  if (handle) {
    tokenizer_destroy(handle);
  }
}

Tokenizer::Tokenizer(const std::string&amp; path)
    : handle(tokenizer_create(path.c_str()), HandleDeleter) {
  if (!handle) {
    throw std::runtime_error("Failed to create tokenizer from " + path);
  }
}

}  // namespace hf
</code></pre>
<p>å¦ä¸å®ç°æç¤ºï¼å½æ° <code>HandleDeleter</code> å°±æ¯ <code>std::unique_ptr&lt;void, void (*)(void*)&gt; handle</code> çèªå®ä¹ææè¡ä¸ºï¼å¨ç±»å¯¹è±¡ææçæ¶åå°±ä¼èªå¨è°ç¨è¿ä¸ªå½æ°éæ¾èµæºãæ¢ç¶èµæºè¢«æºè½æç®¡äºï¼é£ä¹èªç¶å°±ä¸ç¨åææå½æ°ï¼ææå½æ°ä¸ç¨åï¼é£ä¹æ·è´æé å½æ°ãæ·è´èµå¼è¿ç®ç¬¦ãç§»å¨æé å½æ°ä»¥åç§»å¨èµå¼è¿ç®ç¬¦é½å¯ä»¥ä¸ç¨å®ç°ï¼å¨é¨å¯ä»¥ä¾èµç¼è¯å¨èªå¨çæãå½ç¶ï¼ç±äº <code>unique_ptr</code> åªè½ç§»å¨ä¸è½æ·è´ï¼<code>Tokenizer</code>ä¹å°±åªè½ç§»å¨ä¸è½æ·è´ã</p>
<h1 id="5-æ»ç»">5. æ»ç»</h1>
<p>æåï¼ç¬èå°±ç»åº C++ å°è£ C FFI æ¥å£çå®æ´å®ç°ï¼å¦ä¸æç¤ºï¼</p>
<pre><code class="language-cpp">// HfTokenizer.h
#pragma once

#include &lt;memory&gt;
#include &lt;string&gt;

#include "tokenizer_result.h"

namespace hf {
class Tokenizer {
 public:
  explicit Tokenizer(const std::string&amp; path);

  // ç¼è¯å¨èªå¨çæï¼
  // - ææå½æ°ï¼è°ç¨ Deleterï¼
  // - ç§»å¨æé  / ç§»å¨èµå¼
  // - ç¦æ­¢æ·è´ï¼å ä¸º unique_ptr ä¸å¯æ·è´ï¼

  // å¶ä»æ¥å£æ¹æ³
  uint64_t Count(const std::string&amp; text) const;

  // åéå
  using ResultPtr =
      std::unique_ptr&lt;TokenizerResult, void (*)(TokenizerResult*)&gt;;
  ResultPtr Encode(const std::string&amp; text) const;

 private:
  std::unique_ptr&lt;void, void (*)(void*)&gt; handle;
};

}  // namespace hf
</code></pre>
<pre><code class="language-cpp">// HfTokenizer.cpp
#include "HfTokenizer.h"

#include &lt;stdexcept&gt;

#include "hf_tokenizer_ffi.h"

namespace hf {

static void HandleDeleter(void* handle) noexcept {
  if (handle) {
    tokenizer_destroy(handle);
  }
}

static void ResultDeleter(TokenizerResult* p) noexcept {
  if (p) {
    tokenizer_result_free(*p);
    delete p;
  }
}

Tokenizer::Tokenizer(const std::string&amp; path)
    : handle(tokenizer_create(path.c_str()), HandleDeleter) {
  if (!handle) {
    throw std::runtime_error("Failed to create tokenizer from " + path);
  }
}

uint64_t Tokenizer::Count(const std::string&amp; text) const {
  return tokenizer_count(handle.get(), text.c_str());
}

Tokenizer::ResultPtr Tokenizer::Encode(const std::string&amp; text) const {
  auto result = std::make_unique&lt;TokenizerResult&gt;(
      tokenizer_encode(handle.get(), text.c_str()));
  return {result.release(), ResultDeleter};
};

}  // namespace hf
</code></pre>
<p>ä¸ä»æ¯å¥æï¼è¿ä¼ éçæ°æ®å¯¹è±¡ç¬èé½æç®¡ç»æºè½æéï¼ä»èé¿åå¤§éåç¹æ®æåå½æ°è¿äºæ ·æ¿ä»£ç ãä¸å¾ä¸è¯´ï¼RAII çè®¾è®¡æè·¯éå¸¸ç²¾å¦ï¼åæ¶ä¿è¯äºå®å¨æ§ä¸ç®æ´æ§ï¼ç»äººä¸ç§åå½ç¼ç¨åå§ç¶æçæè§ãæè°âå¤§éè³ç®âï¼ä¸æ¯ä»£ç è¶ç¹å¤å°±è¶å®å¨ï¼ä¹ä¸æ¯ä»£ç è¶æ½è±¡å°±è¶åå®³ï¼çæ­£å¥½çä»£ç ï¼æ¯å¨æ­£ç¡®æ§ãå¯ç»´æ¤æ§ä¸ç®æ´æ§ä¹é´åå¾å¹³è¡¡ï¼è®©èµæºç®¡çå¦å¼å¸è¬èªç¶ï¼èéè´æã</p>


</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2026-01-31 13:37">2026-01-31 13:36</span>&nbsp;
<a href="https://www.cnblogs.com/charlee44">charlee44</a>&nbsp;
éè¯»(<span id="post_view_count">44</span>)&nbsp;
è¯è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19557586);return false;">æ¶è</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19557586', targetLink: 'https://www.cnblogs.com/charlee44/p/19557586', title: 'C++ å°è£ C FFI æ¥å£æä½³å®è·µï¼ä»¥ Hugging Face Tokenizer ä¸ºä¾' })">ä¸¾æ¥</a>
</div>
         ]]>
    </description>
    </item>
        </channel>
        </rss>